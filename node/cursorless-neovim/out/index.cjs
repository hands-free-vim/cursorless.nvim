"use strict";var bB=Object.create;var gu=Object.defineProperty;var wB=Object.getOwnPropertyDescriptor;var _B=Object.getOwnPropertyNames;var EB=Object.getPrototypeOf,RB=Object.prototype.hasOwnProperty;var st=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),kB=(t,e)=>{for(var r in e)gu(t,r,{get:e[r],enumerable:!0})},gE=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of _B(e))!RB.call(t,i)&&i!==r&&gu(t,i,{get:()=>e[i],enumerable:!(n=wB(e,i))||n.enumerable});return t};var ur=(t,e,r)=>(r=t!=null?bB(EB(t)):{},gE(e||!t||!t.__esModule?gu(r,"default",{value:t,enumerable:!0}):r,t)),PB=t=>gE(gu({},"__esModule",{value:!0}),t);var NT=st(OT=>{"use strict";Object.defineProperty(OT,"__esModule",{value:!0});OT.default=e4;var XK=JK(require("crypto"));function JK(t){return t&&t.__esModule?t:{default:t}}var Af=new Uint8Array(256),Mf=Af.length;function e4(){return Mf>Af.length-16&&(XK.default.randomFillSync(Af),Mf=0),Af.slice(Mf,Mf+=16)}});var aP=st(Df=>{"use strict";Object.defineProperty(Df,"__esModule",{value:!0});Df.default=void 0;var t4=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;Df.default=t4});var rl=st(If=>{"use strict";Object.defineProperty(If,"__esModule",{value:!0});If.default=void 0;var r4=n4(aP());function n4(t){return t&&t.__esModule?t:{default:t}}function i4(t){return typeof t=="string"&&r4.default.test(t)}var o4=i4;If.default=o4});var il=st(nl=>{"use strict";Object.defineProperty(nl,"__esModule",{value:!0});nl.default=void 0;nl.unsafeStringify=cP;var s4=a4(rl());function a4(t){return t&&t.__esModule?t:{default:t}}var Ot=[];for(let t=0;t<256;++t)Ot.push((t+256).toString(16).slice(1));function cP(t,e=0){return Ot[t[e+0]]+Ot[t[e+1]]+Ot[t[e+2]]+Ot[t[e+3]]+"-"+Ot[t[e+4]]+Ot[t[e+5]]+"-"+Ot[t[e+6]]+Ot[t[e+7]]+"-"+Ot[t[e+8]]+Ot[t[e+9]]+"-"+Ot[t[e+10]]+Ot[t[e+11]]+Ot[t[e+12]]+Ot[t[e+13]]+Ot[t[e+14]]+Ot[t[e+15]]}function c4(t,e=0){let r=cP(t,e);if(!(0,s4.default)(r))throw TypeError("Stringified UUID is invalid");return r}var l4=c4;nl.default=l4});var pP=st(Ff=>{"use strict";Object.defineProperty(Ff,"__esModule",{value:!0});Ff.default=void 0;var p4=f4(NT()),u4=il();function f4(t){return t&&t.__esModule?t:{default:t}}var lP,LT,UT=0,VT=0;function d4(t,e,r){let n=e&&r||0,i=e||new Array(16);t=t||{};let o=t.node||lP,a=t.clockseq!==void 0?t.clockseq:LT;if(o==null||a==null){let g=t.random||(t.rng||p4.default)();o==null&&(o=lP=[g[0]|1,g[1],g[2],g[3],g[4],g[5]]),a==null&&(a=LT=(g[6]<<8|g[7])&16383)}let l=t.msecs!==void 0?t.msecs:Date.now(),p=t.nsecs!==void 0?t.nsecs:VT+1,u=l-UT+(p-VT)/1e4;if(u<0&&t.clockseq===void 0&&(a=a+1&16383),(u<0||l>UT)&&t.nsecs===void 0&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");UT=l,VT=p,LT=a,l+=122192928e5;let d=((l&268435455)*1e4+p)%4294967296;i[n++]=d>>>24&255,i[n++]=d>>>16&255,i[n++]=d>>>8&255,i[n++]=d&255;let h=l/4294967296*1e4&268435455;i[n++]=h>>>8&255,i[n++]=h&255,i[n++]=h>>>24&15|16,i[n++]=h>>>16&255,i[n++]=a>>>8|128,i[n++]=a&255;for(let g=0;g<6;++g)i[n+g]=o[g];return e||(0,u4.unsafeStringify)(i)}var m4=d4;Ff.default=m4});var BT=st(Cf=>{"use strict";Object.defineProperty(Cf,"__esModule",{value:!0});Cf.default=void 0;var h4=g4(rl());function g4(t){return t&&t.__esModule?t:{default:t}}function y4(t){if(!(0,h4.default)(t))throw TypeError("Invalid UUID");let e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}var x4=y4;Cf.default=x4});var HT=st(Go=>{"use strict";Object.defineProperty(Go,"__esModule",{value:!0});Go.URL=Go.DNS=void 0;Go.default=w4;var T4=il(),S4=v4(BT());function v4(t){return t&&t.__esModule?t:{default:t}}function b4(t){t=unescape(encodeURIComponent(t));let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}var uP="6ba7b810-9dad-11d1-80b4-00c04fd430c8";Go.DNS=uP;var fP="6ba7b811-9dad-11d1-80b4-00c04fd430c8";Go.URL=fP;function w4(t,e,r){function n(i,o,a,l){var p;if(typeof i=="string"&&(i=b4(i)),typeof o=="string"&&(o=(0,S4.default)(o)),((p=o)===null||p===void 0?void 0:p.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+i.length);if(u.set(o),u.set(i,o.length),u=r(u),u[6]=u[6]&15|e,u[8]=u[8]&63|128,a){l=l||0;for(let d=0;d<16;++d)a[l+d]=u[d];return a}return(0,T4.unsafeStringify)(u)}try{n.name=t}catch{}return n.DNS=uP,n.URL=fP,n}});var dP=st(Of=>{"use strict";Object.defineProperty(Of,"__esModule",{value:!0});Of.default=void 0;var _4=E4(require("crypto"));function E4(t){return t&&t.__esModule?t:{default:t}}function R4(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),_4.default.createHash("md5").update(t).digest()}var k4=R4;Of.default=k4});var hP=st(Nf=>{"use strict";Object.defineProperty(Nf,"__esModule",{value:!0});Nf.default=void 0;var P4=mP(HT()),M4=mP(dP());function mP(t){return t&&t.__esModule?t:{default:t}}var A4=(0,P4.default)("v3",48,M4.default),D4=A4;Nf.default=D4});var gP=st(Lf=>{"use strict";Object.defineProperty(Lf,"__esModule",{value:!0});Lf.default=void 0;var I4=F4(require("crypto"));function F4(t){return t&&t.__esModule?t:{default:t}}var C4={randomUUID:I4.default.randomUUID};Lf.default=C4});var TP=st(Uf=>{"use strict";Object.defineProperty(Uf,"__esModule",{value:!0});Uf.default=void 0;var yP=xP(gP()),O4=xP(NT()),N4=il();function xP(t){return t&&t.__esModule?t:{default:t}}function L4(t,e,r){if(yP.default.randomUUID&&!e&&!t)return yP.default.randomUUID();t=t||{};let n=t.random||(t.rng||O4.default)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return(0,N4.unsafeStringify)(n)}var U4=L4;Uf.default=U4});var SP=st(Vf=>{"use strict";Object.defineProperty(Vf,"__esModule",{value:!0});Vf.default=void 0;var V4=B4(require("crypto"));function B4(t){return t&&t.__esModule?t:{default:t}}function H4(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),V4.default.createHash("sha1").update(t).digest()}var W4=H4;Vf.default=W4});var bP=st(Bf=>{"use strict";Object.defineProperty(Bf,"__esModule",{value:!0});Bf.default=void 0;var $4=vP(HT()),q4=vP(SP());function vP(t){return t&&t.__esModule?t:{default:t}}var j4=(0,$4.default)("v5",80,q4.default),z4=j4;Bf.default=z4});var wP=st(Hf=>{"use strict";Object.defineProperty(Hf,"__esModule",{value:!0});Hf.default=void 0;var G4="00000000-0000-0000-0000-000000000000";Hf.default=G4});var _P=st(Wf=>{"use strict";Object.defineProperty(Wf,"__esModule",{value:!0});Wf.default=void 0;var K4=Q4(rl());function Q4(t){return t&&t.__esModule?t:{default:t}}function Z4(t){if(!(0,K4.default)(t))throw TypeError("Invalid UUID");return parseInt(t.slice(14,15),16)}var Y4=Z4;Wf.default=Y4});var EP=st(_n=>{"use strict";Object.defineProperty(_n,"__esModule",{value:!0});Object.defineProperty(_n,"NIL",{enumerable:!0,get:function(){return r6.default}});Object.defineProperty(_n,"parse",{enumerable:!0,get:function(){return s6.default}});Object.defineProperty(_n,"stringify",{enumerable:!0,get:function(){return o6.default}});Object.defineProperty(_n,"v1",{enumerable:!0,get:function(){return X4.default}});Object.defineProperty(_n,"v3",{enumerable:!0,get:function(){return J4.default}});Object.defineProperty(_n,"v4",{enumerable:!0,get:function(){return e6.default}});Object.defineProperty(_n,"v5",{enumerable:!0,get:function(){return t6.default}});Object.defineProperty(_n,"validate",{enumerable:!0,get:function(){return i6.default}});Object.defineProperty(_n,"version",{enumerable:!0,get:function(){return n6.default}});var X4=Si(pP()),J4=Si(hP()),e6=Si(TP()),t6=Si(bP()),r6=Si(wP()),n6=Si(_P()),i6=Si(rl()),o6=Si(il()),s6=Si(BT());function Si(t){return t&&t.__esModule?t:{default:t}}});var MP=st((PP,qf)=>{(function(t,e){typeof qf=="object"&&qf.exports?qf.exports=e():t.nearley=e()})(PP,function(){function t(p,u,d){return this.id=++t.highestId,this.name=p,this.symbols=u,this.postprocess=d,this}t.highestId=0,t.prototype.toString=function(p){var u=typeof p>"u"?this.symbols.map(l).join(" "):this.symbols.slice(0,p).map(l).join(" ")+" \u25CF "+this.symbols.slice(p).map(l).join(" ");return this.name+" \u2192 "+u};function e(p,u,d,h){this.rule=p,this.dot=u,this.reference=d,this.data=[],this.wantedBy=h,this.isComplete=this.dot===p.symbols.length}e.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},e.prototype.nextState=function(p){var u=new e(this.rule,this.dot+1,this.reference,this.wantedBy);return u.left=this,u.right=p,u.isComplete&&(u.data=u.build(),u.right=void 0),u},e.prototype.build=function(){var p=[],u=this;do p.push(u.right.data),u=u.left;while(u.left);return p.reverse(),p},e.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,o.fail))};function r(p,u){this.grammar=p,this.index=u,this.states=[],this.wants={},this.scannable=[],this.completed={}}r.prototype.process=function(p){for(var u=this.states,d=this.wants,h=this.completed,g=0;g<u.length;g++){var x=u[g];if(x.isComplete){if(x.finish(),x.data!==o.fail){for(var b=x.wantedBy,w=b.length;w--;){var F=b[w];this.complete(F,x)}if(x.reference===this.index){var M=x.rule.name;(this.completed[M]=this.completed[M]||[]).push(x)}}}else{var M=x.rule.symbols[x.dot];if(typeof M!="string"){this.scannable.push(x);continue}if(d[M]){if(d[M].push(x),h.hasOwnProperty(M))for(var U=h[M],w=0;w<U.length;w++){var Z=U[w];this.complete(x,Z)}}else d[M]=[x],this.predict(M)}}},r.prototype.predict=function(p){for(var u=this.grammar.byName[p]||[],d=0;d<u.length;d++){var h=u[d],g=this.wants[p],x=new e(h,0,this.index,g);this.states.push(x)}},r.prototype.complete=function(p,u){var d=p.nextState(u);this.states.push(d)};function n(p,u){this.rules=p,this.start=u||this.rules[0].name;var d=this.byName={};this.rules.forEach(function(h){d.hasOwnProperty(h.name)||(d[h.name]=[]),d[h.name].push(h)})}n.fromCompiled=function(h,u){var d=h.Lexer;h.ParserStart&&(u=h.ParserStart,h=h.ParserRules);var h=h.map(function(x){return new t(x.name,x.symbols,x.postprocess)}),g=new n(h,u);return g.lexer=d,g};function i(){this.reset("")}i.prototype.reset=function(p,u){this.buffer=p,this.index=0,this.line=u?u.line:1,this.lastLineBreak=u?-u.col:0},i.prototype.next=function(){if(this.index<this.buffer.length){var p=this.buffer[this.index++];return p===`
`&&(this.line+=1,this.lastLineBreak=this.index),{value:p}}},i.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},i.prototype.formatError=function(p,u){var d=this.buffer;if(typeof d=="string"){var h=d.split(`
`).slice(Math.max(0,this.line-5),this.line),g=d.indexOf(`
`,this.index);g===-1&&(g=d.length);var x=this.index-this.lastLineBreak,b=String(this.line).length;return u+=" at line "+this.line+" col "+x+`:

`,u+=h.map(function(F,M){return w(this.line-h.length+M+1,b)+" "+F},this).join(`
`),u+=`
`+w("",b+x)+`^
`,u}else return u+" at index "+(this.index-1);function w(F,M){var U=String(F);return Array(M-U.length+1).join(" ")+U}};function o(p,u,d){if(p instanceof n)var h=p,d=u;else var h=n.fromCompiled(p,u);this.grammar=h,this.options={keepHistory:!1,lexer:h.lexer||new i};for(var g in d||{})this.options[g]=d[g];this.lexer=this.options.lexer,this.lexerState=void 0;var x=new r(h,0),b=this.table=[x];x.wants[h.start]=[],x.predict(h.start),x.process(),this.current=0}o.fail={},o.prototype.feed=function(p){var u=this.lexer;u.reset(p,this.lexerState);for(var d;;){try{if(d=u.next(),!d)break}catch(de){var b=new r(this.grammar,this.current+1);this.table.push(b);var h=new Error(this.reportLexerError(de));throw h.offset=this.current,h.token=de.token,h}var g=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var x=this.current+1,b=new r(this.grammar,x);this.table.push(b);for(var w=d.text!==void 0?d.text:d.value,F=u.constructor===i?d.value:u.transform?.(d)??d,M=g.scannable,U=M.length;U--;){var Z=M[U],ne=Z.rule.symbols[Z.dot];if(ne.test?ne.test(F):ne.type?ne.type===d.type:ne.literal===w){var he=Z.nextState({data:F,token:d,isToken:!0,reference:x-1});b.states.push(he)}}if(b.process(),b.states.length===0){var h=new Error(this.reportError(d));throw h.offset=this.current,h.token=d,h}this.options.keepHistory&&(g.lexerState=u.save()),this.current++}return g&&(this.lexerState=u.save()),this.results=this.finish(),this},o.prototype.reportLexerError=function(p){var u,d,h=p.token;return h?(u="input "+JSON.stringify(h.text[0])+" (lexer error)",d=this.lexer.formatError(h,"Syntax error")):(u="input (lexer error)",d=p.message),this.reportErrorCommon(d,u)},o.prototype.reportError=function(p){var u=(p.type?p.type+" token: ":"")+JSON.stringify(p.value!==void 0?p.value:p),d=this.lexer.formatError(p,"Syntax error");return this.reportErrorCommon(d,u)},o.prototype.reportErrorCommon=function(p,u){var d=[];d.push(p);var h=this.table.length-2,g=this.table[h],x=g.states.filter(function(w){var F=w.rule.symbols[w.dot];return F&&typeof F!="string"});if(x.length===0)d.push("Unexpected "+u+`. I did not expect any more input. Here is the state of my parse table:
`),this.displayStateStack(g.states,d);else{d.push("Unexpected "+u+`. Instead, I was expecting to see one of the following:
`);var b=x.map(function(w){return this.buildFirstStateStack(w,[])||[w]},this);b.forEach(function(w){var F=w[0],M=F.rule.symbols[F.dot],U=this.getSymbolDisplay(M);d.push("A "+U+" based on:"),this.displayStateStack(w,d)},this)}return d.push(""),d.join(`
`)},o.prototype.displayStateStack=function(p,u){for(var d,h=0,g=0;g<p.length;g++){var x=p[g],b=x.rule.toString(x.dot);b===d?h++:(h>0&&u.push("    ^ "+h+" more lines identical to this"),h=0,u.push("    "+b)),d=b}},o.prototype.getSymbolDisplay=function(p){return a(p)},o.prototype.buildFirstStateStack=function(p,u){if(u.indexOf(p)!==-1)return null;if(p.wantedBy.length===0)return[p];var d=p.wantedBy[0],h=[p].concat(u),g=this.buildFirstStateStack(d,h);return g===null?null:[p].concat(g)},o.prototype.save=function(){var p=this.table[this.current];return p.lexerState=this.lexerState,p},o.prototype.restore=function(p){var u=p.index;this.current=u,this.table[u]=p,this.table.splice(u+1),this.lexerState=p.lexerState,this.results=this.finish()},o.prototype.rewind=function(p){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[p])},o.prototype.finish=function(){var p=[],u=this.grammar.start,d=this.table[this.table.length-1];return d.states.forEach(function(h){h.rule.name===u&&h.dot===h.rule.symbols.length&&h.reference===0&&h.data!==o.fail&&p.push(h)}),p.map(function(h){return h.data})};function a(p){var u=typeof p;if(u==="string")return p;if(u==="object"){if(p.literal)return JSON.stringify(p.literal);if(p instanceof RegExp)return"character matching "+p;if(p.type)return p.type+" token";if(p.test)return"token matching "+String(p.test);throw new Error("Unknown symbol type: "+p)}}function l(p){var u=typeof p;if(u==="string")return p;if(u==="object"){if(p.literal)return JSON.stringify(p.literal);if(p instanceof RegExp)return p.toString();if(p.type)return"%"+p.type;if(p.test)return"<"+String(p.test)+">";throw new Error("Unknown symbol type: "+p)}}return{Parser:o,Grammar:n,Rule:t}})});var OP=st((CP,Gf)=>{(function(t,e){typeof define=="function"&&define.amd?define([],e):typeof Gf=="object"&&Gf.exports?Gf.exports=e():t.moo=e()})(CP,function(){"use strict";var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,r=typeof new RegExp().sticky=="boolean";function n(N){return N&&e.call(N)==="[object RegExp]"}function i(N){return N&&typeof N=="object"&&!n(N)&&!Array.isArray(N)}function o(N){return N.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function a(N){var O=new RegExp("|"+N);return O.exec("").length-1}function l(N){return"("+N+")"}function p(N){if(!N.length)return"(?!)";var O=N.map(function(I){return"(?:"+I+")"}).join("|");return"(?:"+O+")"}function u(N){if(typeof N=="string")return"(?:"+o(N)+")";if(n(N)){if(N.ignoreCase)throw new Error("RegExp /i flag not allowed");if(N.global)throw new Error("RegExp /g flag is implied");if(N.sticky)throw new Error("RegExp /y flag is implied");if(N.multiline)throw new Error("RegExp /m flag is implied");return N.source}else throw new Error("Not a pattern: "+N)}function d(N,O){return N.length>O?N:Array(O-N.length+1).join(" ")+N}function h(N,O){for(var I=N.length,$=0;;){var j=N.lastIndexOf(`
`,I-1);if(j===-1||($++,I=j,$===O)||I===0)break}var K=$<O?0:I+1;return N.substring(K).split(`
`)}function g(N){for(var O=Object.getOwnPropertyNames(N),I=[],$=0;$<O.length;$++){var j=O[$],K=N[j],Q=[].concat(K);if(j==="include"){for(var te=0;te<Q.length;te++)I.push({include:Q[te]});continue}var me=[];Q.forEach(function(re){i(re)?(me.length&&I.push(b(j,me)),I.push(b(j,re)),me=[]):me.push(re)}),me.length&&I.push(b(j,me))}return I}function x(N){for(var O=[],I=0;I<N.length;I++){var $=N[I];if($.include){for(var j=[].concat($.include),K=0;K<j.length;K++)O.push({include:j[K]});continue}if(!$.type)throw new Error("Rule has no type: "+JSON.stringify($));O.push(b($.type,$))}return O}function b(N,O){if(i(O)||(O={match:O}),O.include)throw new Error("Matching rules cannot also include states");var I={defaultType:N,lineBreaks:!!O.error||!!O.fallback,pop:!1,next:null,push:null,error:!1,fallback:!1,value:null,type:null,shouldThrow:!1};for(var $ in O)t.call(O,$)&&(I[$]=O[$]);if(typeof I.type=="string"&&N!==I.type)throw new Error("Type transform cannot be a string (type '"+I.type+"' for token '"+N+"')");var j=I.match;return I.match=Array.isArray(j)?j:j?[j]:[],I.match.sort(function(K,Q){return n(K)&&n(Q)?0:n(Q)?-1:n(K)?1:Q.length-K.length}),I}function w(N){return Array.isArray(N)?x(N):g(N)}var F=b("error",{lineBreaks:!0,shouldThrow:!0});function M(N,O){for(var I=null,$=Object.create(null),j=!0,K=null,Q=[],te=[],me=0;me<N.length;me++)N[me].fallback&&(j=!1);for(var me=0;me<N.length;me++){var re=N[me];if(re.include)throw new Error("Inheritance is not allowed in stateless lexers");if(re.error||re.fallback){if(I)throw!re.fallback==!I.fallback?new Error("Multiple "+(re.fallback?"fallback":"error")+" rules not allowed (for token '"+re.defaultType+"')"):new Error("fallback and error are mutually exclusive (for token '"+re.defaultType+"')");I=re}var Re=re.match.slice();if(j)for(;Re.length&&typeof Re[0]=="string"&&Re[0].length===1;){var or=Re.shift();$[or.charCodeAt(0)]=re}if(re.pop||re.push||re.next){if(!O)throw new Error("State-switching options are not allowed in stateless lexers (for token '"+re.defaultType+"')");if(re.fallback)throw new Error("State-switching options are not allowed on fallback tokens (for token '"+re.defaultType+"')")}if(Re.length!==0){j=!1,Q.push(re);for(var ri=0;ri<Re.length;ri++){var sr=Re[ri];if(n(sr)){if(K===null)K=sr.unicode;else if(K!==sr.unicode&&re.fallback===!1)throw new Error("If one rule is /u then all must be")}}var mn=p(Re.map(u)),wr=new RegExp(mn);if(wr.test(""))throw new Error("RegExp matches empty string: "+wr);var hn=a(mn);if(hn>0)throw new Error("RegExp has capture groups: "+wr+`
Use (?: \u2026 ) instead`);if(!re.lineBreaks&&wr.test(`
`))throw new Error("Rule should declare lineBreaks: "+wr);te.push(l(mn))}}var $r=I&&I.fallback,Eo=r&&!$r?"ym":"gm",ni=r||$r?"":"|";K===!0&&(Eo+="u");var gs=new RegExp(p(te)+ni,Eo);return{regexp:gs,groups:Q,fast:$,error:I||F}}function U(N){var O=M(w(N));return new de({start:O},"start")}function Z(N,O,I){var $=N&&(N.push||N.next);if($&&!I[$])throw new Error("Missing state '"+$+"' (in token '"+N.defaultType+"' of state '"+O+"')");if(N&&N.pop&&+N.pop!=1)throw new Error("pop must be 1 (in token '"+N.defaultType+"' of state '"+O+"')")}function ne(N,O){var I=N.$all?w(N.$all):[];delete N.$all;var $=Object.getOwnPropertyNames(N);O||(O=$[0]);for(var j=Object.create(null),K=0;K<$.length;K++){var Q=$[K];j[Q]=w(N[Q]).concat(I)}for(var K=0;K<$.length;K++)for(var Q=$[K],te=j[Q],me=Object.create(null),re=0;re<te.length;re++){var Re=te[re];if(Re.include){var or=[re,1];if(Re.include!==Q&&!me[Re.include]){me[Re.include]=!0;var ri=j[Re.include];if(!ri)throw new Error("Cannot include nonexistent state '"+Re.include+"' (in state '"+Q+"')");for(var sr=0;sr<ri.length;sr++){var mn=ri[sr];te.indexOf(mn)===-1&&or.push(mn)}}te.splice.apply(te,or),re--}}for(var wr=Object.create(null),K=0;K<$.length;K++){var Q=$[K];wr[Q]=M(j[Q],!0)}for(var K=0;K<$.length;K++){for(var hn=$[K],$r=wr[hn],Eo=$r.groups,re=0;re<Eo.length;re++)Z(Eo[re],hn,wr);for(var ni=Object.getOwnPropertyNames($r.fast),re=0;re<ni.length;re++)Z($r.fast[ni[re]],hn,wr)}return new de(wr,O)}function he(N){for(var O=typeof Map<"u",I=O?new Map:Object.create(null),$=Object.getOwnPropertyNames(N),j=0;j<$.length;j++){var K=$[j],Q=N[K],te=Array.isArray(Q)?Q:[Q];te.forEach(function(me){if(typeof me!="string")throw new Error("keyword must be string (in keyword '"+K+"')");O?I.set(me,K):I[me]=K})}return function(me){return O?I.get(me):I[me]}}var de=function(N,O){this.startState=O,this.states=N,this.buffer="",this.stack=[],this.reset()};de.prototype.reset=function(N,O){return this.buffer=N||"",this.index=0,this.line=O?O.line:1,this.col=O?O.col:1,this.queuedToken=O?O.queuedToken:null,this.queuedText=O?O.queuedText:"",this.queuedThrow=O?O.queuedThrow:null,this.setState(O?O.state:this.startState),this.stack=O&&O.stack?O.stack.slice():[],this},de.prototype.save=function(){return{line:this.line,col:this.col,state:this.state,stack:this.stack.slice(),queuedToken:this.queuedToken,queuedText:this.queuedText,queuedThrow:this.queuedThrow}},de.prototype.setState=function(N){if(!(!N||this.state===N)){this.state=N;var O=this.states[N];this.groups=O.groups,this.error=O.error,this.re=O.regexp,this.fast=O.fast}},de.prototype.popState=function(){this.setState(this.stack.pop())},de.prototype.pushState=function(N){this.stack.push(this.state),this.setState(N)};var ht=r?function(N,O){return N.exec(O)}:function(N,O){var I=N.exec(O);return I[0].length===0?null:I};de.prototype._getGroup=function(N){for(var O=this.groups.length,I=0;I<O;I++)if(N[I+1]!==void 0)return this.groups[I];throw new Error("Cannot find token type for matched text")};function Dt(){return this.value}if(de.prototype.next=function(){var N=this.index;if(this.queuedGroup){var O=this._token(this.queuedGroup,this.queuedText,N);return this.queuedGroup=null,this.queuedText="",O}var I=this.buffer;if(N!==I.length){var Q=this.fast[I.charCodeAt(N)];if(Q)return this._token(Q,I.charAt(N),N);var $=this.re;$.lastIndex=N;var j=ht($,I),K=this.error;if(j==null)return this._token(K,I.slice(N,I.length),N);var Q=this._getGroup(j),te=j[0];return K.fallback&&j.index!==N?(this.queuedGroup=Q,this.queuedText=te,this._token(K,I.slice(N,j.index),N)):this._token(Q,te,N)}},de.prototype._token=function(N,O,I){var $=0;if(N.lineBreaks){var j=/\n/g,K=1;if(O===`
`)$=1;else for(;j.exec(O);)$++,K=j.lastIndex}var Q={type:typeof N.type=="function"&&N.type(O)||N.defaultType,value:typeof N.value=="function"?N.value(O):O,text:O,toString:Dt,offset:I,lineBreaks:$,line:this.line,col:this.col},te=O.length;if(this.index+=te,this.line+=$,$!==0?this.col=te-K+1:this.col+=te,N.shouldThrow){var me=new Error(this.formatError(Q,"invalid syntax"));throw me}return N.pop?this.popState():N.push?this.pushState(N.push):N.next&&this.setState(N.next),Q},typeof Symbol<"u"&&Symbol.iterator){var it=function(N){this.lexer=N};it.prototype.next=function(){var N=this.lexer.next();return{value:N,done:!N}},it.prototype[Symbol.iterator]=function(){return this},de.prototype[Symbol.iterator]=function(){return new it(this)}}return de.prototype.formatError=function(N,O){if(N==null)var I=this.buffer.slice(this.index),N={text:I,offset:this.index,lineBreaks:I.indexOf(`
`)===-1?0:1,line:this.line,col:this.col};var $=2,j=Math.max(N.line-$,1),K=N.line+$,Q=String(K).length,te=h(this.buffer,this.line-N.line+$+1).slice(0,5),me=[];me.push(O+" at line "+N.line+" col "+N.col+":"),me.push("");for(var re=0;re<te.length;re++){var Re=te[re],or=j+re;me.push(d(String(or),Q)+"  "+Re),or===N.line&&me.push(d("",Q+N.col+1)+"^")}return me.join(`
`)},de.prototype.clone=function(){return new de(this.states,this.state)},de.prototype.has=function(N){return!0},{compile:U,states:ne,error:Object.freeze({error:!0}),fallback:Object.freeze({fallback:!0}),keywords:he}})});var ul=st((Gn,RM)=>{"use strict";Object.defineProperty(Gn,"__esModule",{value:!0});function En(t){return typeof t=="object"&&!("toString"in t)?Object.prototype.toString.call(t).slice(8,-1):t}var w5=typeof process=="object"&&process.env.NODE_ENV==="production";function on(t,e){if(!t)throw w5?new Error("Invariant failed"):new Error(e())}Gn.invariant=on;var lS=Object.prototype.hasOwnProperty,_5=Array.prototype.splice,E5=Object.prototype.toString;function Zo(t){return E5.call(t).slice(8,-1)}var Ed=Object.assign||function(t,e){return pS(e).forEach(function(r){lS.call(e,r)&&(t[r]=e[r])}),t},pS=typeof Object.getOwnPropertySymbols=="function"?function(t){return Object.keys(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.keys(t)};function ao(t){return Array.isArray(t)?Ed(t.constructor(t.length),t):Zo(t)==="Map"?new Map(t):Zo(t)==="Set"?new Set(t):t&&typeof t=="object"?Ed(Object.create(Object.getPrototypeOf(t)),t):t}var _M=function(){function t(){this.commands=Ed({},R5),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(e,r){return e===r},this.update.newContext=function(){return new t().update}}return Object.defineProperty(t.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(e){this.update.isEquals=e},enumerable:!0,configurable:!0}),t.prototype.extend=function(e,r){this.commands[e]=r},t.prototype.update=function(e,r){var n=this,i=typeof r=="function"?{$apply:r}:r;Array.isArray(e)&&Array.isArray(i)||on(!Array.isArray(i),function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."}),on(typeof i=="object"&&i!==null,function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the "+("following commands: "+Object.keys(n.commands).join(", ")+".")});var o=e;return pS(i).forEach(function(a){if(lS.call(n.commands,a)){var l=e===o;o=n.commands[a](i[a],o,i,e),l&&n.isEquals(o,e)&&(o=e)}else{var p=Zo(e)==="Map"?n.update(e.get(a),i[a]):n.update(e[a],i[a]),u=Zo(o)==="Map"?o.get(a):o[a];(!n.isEquals(p,u)||typeof p>"u"&&!lS.call(e,a))&&(o===e&&(o=ao(e)),Zo(o)==="Map"?o.set(a,p):o[a]=p)}}),o},t}();Gn.Context=_M;var R5={$push:function(t,e,r){return bM(e,r,"$push"),t.length?e.concat(t):e},$unshift:function(t,e,r){return bM(e,r,"$unshift"),t.length?t.concat(e):e},$splice:function(t,e,r,n){return k5(e,r),t.forEach(function(i){EM(i),e===n&&i.length&&(e=ao(n)),_5.apply(e,i)}),e},$set:function(t,e,r){return M5(r),t},$toggle:function(t,e){pl(t,"$toggle");var r=t.length?ao(e):e;return t.forEach(function(n){r[n]=!e[n]}),r},$unset:function(t,e,r,n){return pl(t,"$unset"),t.forEach(function(i){Object.hasOwnProperty.call(e,i)&&(e===n&&(e=ao(n)),delete e[i])}),e},$add:function(t,e,r,n){return wM(e,"$add"),pl(t,"$add"),Zo(e)==="Map"?t.forEach(function(i){var o=i[0],a=i[1];e===n&&e.get(o)!==a&&(e=ao(n)),e.set(o,a)}):t.forEach(function(i){e===n&&!e.has(i)&&(e=ao(n)),e.add(i)}),e},$remove:function(t,e,r,n){return wM(e,"$remove"),pl(t,"$remove"),t.forEach(function(i){e===n&&e.has(i)&&(e=ao(n)),e.delete(i)}),e},$merge:function(t,e,r,n){return A5(e,t),pS(t).forEach(function(i){t[i]!==e[i]&&(e===n&&(e=ao(n)),e[i]=t[i])}),e},$apply:function(t,e){return P5(t),t(e)}},uS=new _M;Gn.isEquals=uS.update.isEquals;Gn.extend=uS.extend;Gn.default=uS.update;Gn.default.default=RM.exports=Ed(Gn.default,Gn);function bM(t,e,r){on(Array.isArray(t),function(){return"update(): expected target of "+En(r)+" to be an array; got "+En(t)+"."}),pl(e[r],r)}function pl(t,e){on(Array.isArray(t),function(){return"update(): expected spec of "+En(e)+" to be an array; got "+En(t)+". Did you forget to wrap your parameter in an array?"})}function k5(t,e){on(Array.isArray(t),function(){return"Expected $splice target to be an array; got "+En(t)}),EM(e.$splice)}function EM(t){on(Array.isArray(t),function(){return"update(): expected spec of $splice to be an array of arrays; got "+En(t)+". Did you forget to wrap your parameters in an array?"})}function P5(t){on(typeof t=="function",function(){return"update(): expected spec of $apply to be a function; got "+En(t)+"."})}function M5(t){on(Object.keys(t).length===1,function(){return"Cannot have more than one key in an object with $set"})}function A5(t,e){on(e&&typeof e=="object",function(){return"update(): $merge expects a spec of type 'object'; got "+En(e)}),on(t&&typeof t=="object",function(){return"update(): $merge expects a target of type 'object'; got "+En(t)})}function wM(t,e){var r=Zo(t);on(r==="Map"||r==="Set",function(){return"update(): "+En(e)+" expects a target of type Set or Map; got "+En(r)})}});var gv=st((za,Yl)=>{(function(){var t,e="4.17.21",r=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",i="Expected a function",o="Invalid `variable` option passed into `_.template`",a="__lodash_hash_undefined__",l=500,p="__lodash_placeholder__",u=1,d=2,h=4,g=1,x=2,b=1,w=2,F=4,M=8,U=16,Z=32,ne=64,he=128,de=256,ht=512,Dt=30,it="...",N=800,O=16,I=1,$=2,j=3,K=1/0,Q=9007199254740991,te=17976931348623157e292,me=NaN,re=4294967295,Re=re-1,or=re>>>1,ri=[["ary",he],["bind",b],["bindKey",w],["curry",M],["curryRight",U],["flip",ht],["partial",Z],["partialRight",ne],["rearg",de]],sr="[object Arguments]",mn="[object Array]",wr="[object AsyncFunction]",hn="[object Boolean]",$r="[object Date]",Eo="[object DOMException]",ni="[object Error]",gs="[object Function]",Vb="[object GeneratorFunction]",gn="[object Map]",ac="[object Number]",V1="[object Null]",ii="[object Object]",Bb="[object Promise]",B1="[object Proxy]",cc="[object RegExp]",yn="[object Set]",lc="[object String]",kp="[object Symbol]",H1="[object Undefined]",pc="[object WeakMap]",W1="[object WeakSet]",uc="[object ArrayBuffer]",ys="[object DataView]",dy="[object Float32Array]",my="[object Float64Array]",hy="[object Int8Array]",gy="[object Int16Array]",yy="[object Int32Array]",xy="[object Uint8Array]",Ty="[object Uint8ClampedArray]",Sy="[object Uint16Array]",vy="[object Uint32Array]",$1=/\b__p \+= '';/g,q1=/\b(__p \+=) '' \+/g,j1=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Hb=/&(?:amp|lt|gt|quot|#39);/g,Wb=/[&<>"']/g,z1=RegExp(Hb.source),G1=RegExp(Wb.source),K1=/<%-([\s\S]+?)%>/g,Q1=/<%([\s\S]+?)%>/g,$b=/<%=([\s\S]+?)%>/g,Z1=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Y1=/^\w*$/,X1=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,by=/[\\^$.*+?()[\]{}|]/g,J1=RegExp(by.source),wy=/^\s+/,eC=/\s/,tC=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,rC=/\{\n\/\* \[wrapped with (.+)\] \*/,nC=/,? & /,iC=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,oC=/[()=,{}\[\]\/\s]/,sC=/\\(\\)?/g,aC=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,qb=/\w*$/,cC=/^[-+]0x[0-9a-f]+$/i,lC=/^0b[01]+$/i,pC=/^\[object .+?Constructor\]$/,uC=/^0o[0-7]+$/i,fC=/^(?:0|[1-9]\d*)$/,dC=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Pp=/($^)/,mC=/['\n\r\u2028\u2029\\]/g,Mp="\\ud800-\\udfff",hC="\\u0300-\\u036f",gC="\\ufe20-\\ufe2f",yC="\\u20d0-\\u20ff",jb=hC+gC+yC,zb="\\u2700-\\u27bf",Gb="a-z\\xdf-\\xf6\\xf8-\\xff",xC="\\xac\\xb1\\xd7\\xf7",TC="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",SC="\\u2000-\\u206f",vC=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Kb="A-Z\\xc0-\\xd6\\xd8-\\xde",Qb="\\ufe0e\\ufe0f",Zb=xC+TC+SC+vC,_y="['\u2019]",bC="["+Mp+"]",Yb="["+Zb+"]",Ap="["+jb+"]",Xb="\\d+",wC="["+zb+"]",Jb="["+Gb+"]",ew="[^"+Mp+Zb+Xb+zb+Gb+Kb+"]",Ey="\\ud83c[\\udffb-\\udfff]",_C="(?:"+Ap+"|"+Ey+")",tw="[^"+Mp+"]",Ry="(?:\\ud83c[\\udde6-\\uddff]){2}",ky="[\\ud800-\\udbff][\\udc00-\\udfff]",xs="["+Kb+"]",rw="\\u200d",nw="(?:"+Jb+"|"+ew+")",EC="(?:"+xs+"|"+ew+")",iw="(?:"+_y+"(?:d|ll|m|re|s|t|ve))?",ow="(?:"+_y+"(?:D|LL|M|RE|S|T|VE))?",sw=_C+"?",aw="["+Qb+"]?",RC="(?:"+rw+"(?:"+[tw,Ry,ky].join("|")+")"+aw+sw+")*",kC="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",PC="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",cw=aw+sw+RC,MC="(?:"+[wC,Ry,ky].join("|")+")"+cw,AC="(?:"+[tw+Ap+"?",Ap,Ry,ky,bC].join("|")+")",DC=RegExp(_y,"g"),IC=RegExp(Ap,"g"),Py=RegExp(Ey+"(?="+Ey+")|"+AC+cw,"g"),FC=RegExp([xs+"?"+Jb+"+"+iw+"(?="+[Yb,xs,"$"].join("|")+")",EC+"+"+ow+"(?="+[Yb,xs+nw,"$"].join("|")+")",xs+"?"+nw+"+"+iw,xs+"+"+ow,PC,kC,Xb,MC].join("|"),"g"),CC=RegExp("["+rw+Mp+jb+Qb+"]"),OC=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,NC=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],LC=-1,Ye={};Ye[dy]=Ye[my]=Ye[hy]=Ye[gy]=Ye[yy]=Ye[xy]=Ye[Ty]=Ye[Sy]=Ye[vy]=!0,Ye[sr]=Ye[mn]=Ye[uc]=Ye[hn]=Ye[ys]=Ye[$r]=Ye[ni]=Ye[gs]=Ye[gn]=Ye[ac]=Ye[ii]=Ye[cc]=Ye[yn]=Ye[lc]=Ye[pc]=!1;var Qe={};Qe[sr]=Qe[mn]=Qe[uc]=Qe[ys]=Qe[hn]=Qe[$r]=Qe[dy]=Qe[my]=Qe[hy]=Qe[gy]=Qe[yy]=Qe[gn]=Qe[ac]=Qe[ii]=Qe[cc]=Qe[yn]=Qe[lc]=Qe[kp]=Qe[xy]=Qe[Ty]=Qe[Sy]=Qe[vy]=!0,Qe[ni]=Qe[gs]=Qe[pc]=!1;var UC={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},VC={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},BC={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},HC={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},WC=parseFloat,$C=parseInt,lw=typeof global=="object"&&global&&global.Object===Object&&global,qC=typeof self=="object"&&self&&self.Object===Object&&self,wt=lw||qC||Function("return this")(),My=typeof za=="object"&&za&&!za.nodeType&&za,Ro=My&&typeof Yl=="object"&&Yl&&!Yl.nodeType&&Yl,pw=Ro&&Ro.exports===My,Ay=pw&&lw.process,qr=function(){try{var k=Ro&&Ro.require&&Ro.require("util").types;return k||Ay&&Ay.binding&&Ay.binding("util")}catch{}}(),uw=qr&&qr.isArrayBuffer,fw=qr&&qr.isDate,dw=qr&&qr.isMap,mw=qr&&qr.isRegExp,hw=qr&&qr.isSet,gw=qr&&qr.isTypedArray;function _r(k,V,L){switch(L.length){case 0:return k.call(V);case 1:return k.call(V,L[0]);case 2:return k.call(V,L[0],L[1]);case 3:return k.call(V,L[0],L[1],L[2])}return k.apply(V,L)}function jC(k,V,L,J){for(var ge=-1,Ve=k==null?0:k.length;++ge<Ve;){var Tt=k[ge];V(J,Tt,L(Tt),k)}return J}function jr(k,V){for(var L=-1,J=k==null?0:k.length;++L<J&&V(k[L],L,k)!==!1;);return k}function zC(k,V){for(var L=k==null?0:k.length;L--&&V(k[L],L,k)!==!1;);return k}function yw(k,V){for(var L=-1,J=k==null?0:k.length;++L<J;)if(!V(k[L],L,k))return!1;return!0}function Fi(k,V){for(var L=-1,J=k==null?0:k.length,ge=0,Ve=[];++L<J;){var Tt=k[L];V(Tt,L,k)&&(Ve[ge++]=Tt)}return Ve}function Dp(k,V){var L=k==null?0:k.length;return!!L&&Ts(k,V,0)>-1}function Dy(k,V,L){for(var J=-1,ge=k==null?0:k.length;++J<ge;)if(L(V,k[J]))return!0;return!1}function Je(k,V){for(var L=-1,J=k==null?0:k.length,ge=Array(J);++L<J;)ge[L]=V(k[L],L,k);return ge}function Ci(k,V){for(var L=-1,J=V.length,ge=k.length;++L<J;)k[ge+L]=V[L];return k}function Iy(k,V,L,J){var ge=-1,Ve=k==null?0:k.length;for(J&&Ve&&(L=k[++ge]);++ge<Ve;)L=V(L,k[ge],ge,k);return L}function GC(k,V,L,J){var ge=k==null?0:k.length;for(J&&ge&&(L=k[--ge]);ge--;)L=V(L,k[ge],ge,k);return L}function Fy(k,V){for(var L=-1,J=k==null?0:k.length;++L<J;)if(V(k[L],L,k))return!0;return!1}var KC=Cy("length");function QC(k){return k.split("")}function ZC(k){return k.match(iC)||[]}function xw(k,V,L){var J;return L(k,function(ge,Ve,Tt){if(V(ge,Ve,Tt))return J=Ve,!1}),J}function Ip(k,V,L,J){for(var ge=k.length,Ve=L+(J?1:-1);J?Ve--:++Ve<ge;)if(V(k[Ve],Ve,k))return Ve;return-1}function Ts(k,V,L){return V===V?cO(k,V,L):Ip(k,Tw,L)}function YC(k,V,L,J){for(var ge=L-1,Ve=k.length;++ge<Ve;)if(J(k[ge],V))return ge;return-1}function Tw(k){return k!==k}function Sw(k,V){var L=k==null?0:k.length;return L?Ny(k,V)/L:me}function Cy(k){return function(V){return V==null?t:V[k]}}function Oy(k){return function(V){return k==null?t:k[V]}}function vw(k,V,L,J,ge){return ge(k,function(Ve,Tt,ze){L=J?(J=!1,Ve):V(L,Ve,Tt,ze)}),L}function XC(k,V){var L=k.length;for(k.sort(V);L--;)k[L]=k[L].value;return k}function Ny(k,V){for(var L,J=-1,ge=k.length;++J<ge;){var Ve=V(k[J]);Ve!==t&&(L=L===t?Ve:L+Ve)}return L}function Ly(k,V){for(var L=-1,J=Array(k);++L<k;)J[L]=V(L);return J}function JC(k,V){return Je(V,function(L){return[L,k[L]]})}function bw(k){return k&&k.slice(0,Rw(k)+1).replace(wy,"")}function Er(k){return function(V){return k(V)}}function Uy(k,V){return Je(V,function(L){return k[L]})}function fc(k,V){return k.has(V)}function ww(k,V){for(var L=-1,J=k.length;++L<J&&Ts(V,k[L],0)>-1;);return L}function _w(k,V){for(var L=k.length;L--&&Ts(V,k[L],0)>-1;);return L}function eO(k,V){for(var L=k.length,J=0;L--;)k[L]===V&&++J;return J}var tO=Oy(UC),rO=Oy(VC);function nO(k){return"\\"+HC[k]}function iO(k,V){return k==null?t:k[V]}function Ss(k){return CC.test(k)}function oO(k){return OC.test(k)}function sO(k){for(var V,L=[];!(V=k.next()).done;)L.push(V.value);return L}function Vy(k){var V=-1,L=Array(k.size);return k.forEach(function(J,ge){L[++V]=[ge,J]}),L}function Ew(k,V){return function(L){return k(V(L))}}function Oi(k,V){for(var L=-1,J=k.length,ge=0,Ve=[];++L<J;){var Tt=k[L];(Tt===V||Tt===p)&&(k[L]=p,Ve[ge++]=L)}return Ve}function Fp(k){var V=-1,L=Array(k.size);return k.forEach(function(J){L[++V]=J}),L}function aO(k){var V=-1,L=Array(k.size);return k.forEach(function(J){L[++V]=[J,J]}),L}function cO(k,V,L){for(var J=L-1,ge=k.length;++J<ge;)if(k[J]===V)return J;return-1}function lO(k,V,L){for(var J=L+1;J--;)if(k[J]===V)return J;return J}function vs(k){return Ss(k)?uO(k):KC(k)}function xn(k){return Ss(k)?fO(k):QC(k)}function Rw(k){for(var V=k.length;V--&&eC.test(k.charAt(V)););return V}var pO=Oy(BC);function uO(k){for(var V=Py.lastIndex=0;Py.test(k);)++V;return V}function fO(k){return k.match(Py)||[]}function dO(k){return k.match(FC)||[]}var mO=function k(V){V=V==null?wt:Ni.defaults(wt.Object(),V,Ni.pick(wt,NC));var L=V.Array,J=V.Date,ge=V.Error,Ve=V.Function,Tt=V.Math,ze=V.Object,By=V.RegExp,hO=V.String,zr=V.TypeError,Cp=L.prototype,gO=Ve.prototype,bs=ze.prototype,Op=V["__core-js_shared__"],Np=gO.toString,qe=bs.hasOwnProperty,yO=0,kw=function(){var s=/[^.]+$/.exec(Op&&Op.keys&&Op.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),Lp=bs.toString,xO=Np.call(ze),TO=wt._,SO=By("^"+Np.call(qe).replace(by,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Up=pw?V.Buffer:t,Li=V.Symbol,Vp=V.Uint8Array,Pw=Up?Up.allocUnsafe:t,Bp=Ew(ze.getPrototypeOf,ze),Mw=ze.create,Aw=bs.propertyIsEnumerable,Hp=Cp.splice,Dw=Li?Li.isConcatSpreadable:t,dc=Li?Li.iterator:t,ko=Li?Li.toStringTag:t,Wp=function(){try{var s=Io(ze,"defineProperty");return s({},"",{}),s}catch{}}(),vO=V.clearTimeout!==wt.clearTimeout&&V.clearTimeout,bO=J&&J.now!==wt.Date.now&&J.now,wO=V.setTimeout!==wt.setTimeout&&V.setTimeout,$p=Tt.ceil,qp=Tt.floor,Hy=ze.getOwnPropertySymbols,_O=Up?Up.isBuffer:t,Iw=V.isFinite,EO=Cp.join,RO=Ew(ze.keys,ze),St=Tt.max,Vt=Tt.min,kO=J.now,PO=V.parseInt,Fw=Tt.random,MO=Cp.reverse,Wy=Io(V,"DataView"),mc=Io(V,"Map"),$y=Io(V,"Promise"),ws=Io(V,"Set"),hc=Io(V,"WeakMap"),gc=Io(ze,"create"),jp=hc&&new hc,_s={},AO=Fo(Wy),DO=Fo(mc),IO=Fo($y),FO=Fo(ws),CO=Fo(hc),zp=Li?Li.prototype:t,yc=zp?zp.valueOf:t,Cw=zp?zp.toString:t;function T(s){if(ot(s)&&!xe(s)&&!(s instanceof Ae)){if(s instanceof Gr)return s;if(qe.call(s,"__wrapped__"))return O_(s)}return new Gr(s)}var Es=function(){function s(){}return function(c){if(!rt(c))return{};if(Mw)return Mw(c);s.prototype=c;var f=new s;return s.prototype=t,f}}();function Gp(){}function Gr(s,c){this.__wrapped__=s,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=t}T.templateSettings={escape:K1,evaluate:Q1,interpolate:$b,variable:"",imports:{_:T}},T.prototype=Gp.prototype,T.prototype.constructor=T,Gr.prototype=Es(Gp.prototype),Gr.prototype.constructor=Gr;function Ae(s){this.__wrapped__=s,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=re,this.__views__=[]}function OO(){var s=new Ae(this.__wrapped__);return s.__actions__=ar(this.__actions__),s.__dir__=this.__dir__,s.__filtered__=this.__filtered__,s.__iteratees__=ar(this.__iteratees__),s.__takeCount__=this.__takeCount__,s.__views__=ar(this.__views__),s}function NO(){if(this.__filtered__){var s=new Ae(this);s.__dir__=-1,s.__filtered__=!0}else s=this.clone(),s.__dir__*=-1;return s}function LO(){var s=this.__wrapped__.value(),c=this.__dir__,f=xe(s),m=c<0,y=f?s.length:0,S=QN(0,y,this.__views__),E=S.start,R=S.end,A=R-E,B=m?R:E-1,H=this.__iteratees__,q=H.length,Y=0,ie=Vt(A,this.__takeCount__);if(!f||!m&&y==A&&ie==A)return i_(s,this.__actions__);var pe=[];e:for(;A--&&Y<ie;){B+=c;for(var Ee=-1,ue=s[B];++Ee<q;){var Pe=H[Ee],Ie=Pe.iteratee,Pr=Pe.type,Zt=Ie(ue);if(Pr==$)ue=Zt;else if(!Zt){if(Pr==I)continue e;break e}}pe[Y++]=ue}return pe}Ae.prototype=Es(Gp.prototype),Ae.prototype.constructor=Ae;function Po(s){var c=-1,f=s==null?0:s.length;for(this.clear();++c<f;){var m=s[c];this.set(m[0],m[1])}}function UO(){this.__data__=gc?gc(null):{},this.size=0}function VO(s){var c=this.has(s)&&delete this.__data__[s];return this.size-=c?1:0,c}function BO(s){var c=this.__data__;if(gc){var f=c[s];return f===a?t:f}return qe.call(c,s)?c[s]:t}function HO(s){var c=this.__data__;return gc?c[s]!==t:qe.call(c,s)}function WO(s,c){var f=this.__data__;return this.size+=this.has(s)?0:1,f[s]=gc&&c===t?a:c,this}Po.prototype.clear=UO,Po.prototype.delete=VO,Po.prototype.get=BO,Po.prototype.has=HO,Po.prototype.set=WO;function oi(s){var c=-1,f=s==null?0:s.length;for(this.clear();++c<f;){var m=s[c];this.set(m[0],m[1])}}function $O(){this.__data__=[],this.size=0}function qO(s){var c=this.__data__,f=Kp(c,s);if(f<0)return!1;var m=c.length-1;return f==m?c.pop():Hp.call(c,f,1),--this.size,!0}function jO(s){var c=this.__data__,f=Kp(c,s);return f<0?t:c[f][1]}function zO(s){return Kp(this.__data__,s)>-1}function GO(s,c){var f=this.__data__,m=Kp(f,s);return m<0?(++this.size,f.push([s,c])):f[m][1]=c,this}oi.prototype.clear=$O,oi.prototype.delete=qO,oi.prototype.get=jO,oi.prototype.has=zO,oi.prototype.set=GO;function si(s){var c=-1,f=s==null?0:s.length;for(this.clear();++c<f;){var m=s[c];this.set(m[0],m[1])}}function KO(){this.size=0,this.__data__={hash:new Po,map:new(mc||oi),string:new Po}}function QO(s){var c=su(this,s).delete(s);return this.size-=c?1:0,c}function ZO(s){return su(this,s).get(s)}function YO(s){return su(this,s).has(s)}function XO(s,c){var f=su(this,s),m=f.size;return f.set(s,c),this.size+=f.size==m?0:1,this}si.prototype.clear=KO,si.prototype.delete=QO,si.prototype.get=ZO,si.prototype.has=YO,si.prototype.set=XO;function Mo(s){var c=-1,f=s==null?0:s.length;for(this.__data__=new si;++c<f;)this.add(s[c])}function JO(s){return this.__data__.set(s,a),this}function eN(s){return this.__data__.has(s)}Mo.prototype.add=Mo.prototype.push=JO,Mo.prototype.has=eN;function Tn(s){var c=this.__data__=new oi(s);this.size=c.size}function tN(){this.__data__=new oi,this.size=0}function rN(s){var c=this.__data__,f=c.delete(s);return this.size=c.size,f}function nN(s){return this.__data__.get(s)}function iN(s){return this.__data__.has(s)}function oN(s,c){var f=this.__data__;if(f instanceof oi){var m=f.__data__;if(!mc||m.length<r-1)return m.push([s,c]),this.size=++f.size,this;f=this.__data__=new si(m)}return f.set(s,c),this.size=f.size,this}Tn.prototype.clear=tN,Tn.prototype.delete=rN,Tn.prototype.get=nN,Tn.prototype.has=iN,Tn.prototype.set=oN;function Ow(s,c){var f=xe(s),m=!f&&Co(s),y=!f&&!m&&Wi(s),S=!f&&!m&&!y&&Ms(s),E=f||m||y||S,R=E?Ly(s.length,hO):[],A=R.length;for(var B in s)(c||qe.call(s,B))&&!(E&&(B=="length"||y&&(B=="offset"||B=="parent")||S&&(B=="buffer"||B=="byteLength"||B=="byteOffset")||pi(B,A)))&&R.push(B);return R}function Nw(s){var c=s.length;return c?s[ex(0,c-1)]:t}function sN(s,c){return au(ar(s),Ao(c,0,s.length))}function aN(s){return au(ar(s))}function qy(s,c,f){(f!==t&&!Sn(s[c],f)||f===t&&!(c in s))&&ai(s,c,f)}function xc(s,c,f){var m=s[c];(!(qe.call(s,c)&&Sn(m,f))||f===t&&!(c in s))&&ai(s,c,f)}function Kp(s,c){for(var f=s.length;f--;)if(Sn(s[f][0],c))return f;return-1}function cN(s,c,f,m){return Ui(s,function(y,S,E){c(m,y,f(y),E)}),m}function Lw(s,c){return s&&Ln(c,_t(c),s)}function lN(s,c){return s&&Ln(c,lr(c),s)}function ai(s,c,f){c=="__proto__"&&Wp?Wp(s,c,{configurable:!0,enumerable:!0,value:f,writable:!0}):s[c]=f}function jy(s,c){for(var f=-1,m=c.length,y=L(m),S=s==null;++f<m;)y[f]=S?t:Ex(s,c[f]);return y}function Ao(s,c,f){return s===s&&(f!==t&&(s=s<=f?s:f),c!==t&&(s=s>=c?s:c)),s}function Kr(s,c,f,m,y,S){var E,R=c&u,A=c&d,B=c&h;if(f&&(E=y?f(s,m,y,S):f(s)),E!==t)return E;if(!rt(s))return s;var H=xe(s);if(H){if(E=YN(s),!R)return ar(s,E)}else{var q=Bt(s),Y=q==gs||q==Vb;if(Wi(s))return a_(s,R);if(q==ii||q==sr||Y&&!y){if(E=A||Y?{}:R_(s),!R)return A?BN(s,lN(E,s)):VN(s,Lw(E,s))}else{if(!Qe[q])return y?s:{};E=XN(s,q,R)}}S||(S=new Tn);var ie=S.get(s);if(ie)return ie;S.set(s,E),tE(s)?s.forEach(function(ue){E.add(Kr(ue,c,f,ue,s,S))}):J_(s)&&s.forEach(function(ue,Pe){E.set(Pe,Kr(ue,c,f,Pe,s,S))});var pe=B?A?ux:px:A?lr:_t,Ee=H?t:pe(s);return jr(Ee||s,function(ue,Pe){Ee&&(Pe=ue,ue=s[Pe]),xc(E,Pe,Kr(ue,c,f,Pe,s,S))}),E}function pN(s){var c=_t(s);return function(f){return Uw(f,s,c)}}function Uw(s,c,f){var m=f.length;if(s==null)return!m;for(s=ze(s);m--;){var y=f[m],S=c[y],E=s[y];if(E===t&&!(y in s)||!S(E))return!1}return!0}function Vw(s,c,f){if(typeof s!="function")throw new zr(i);return Ec(function(){s.apply(t,f)},c)}function Tc(s,c,f,m){var y=-1,S=Dp,E=!0,R=s.length,A=[],B=c.length;if(!R)return A;f&&(c=Je(c,Er(f))),m?(S=Dy,E=!1):c.length>=r&&(S=fc,E=!1,c=new Mo(c));e:for(;++y<R;){var H=s[y],q=f==null?H:f(H);if(H=m||H!==0?H:0,E&&q===q){for(var Y=B;Y--;)if(c[Y]===q)continue e;A.push(H)}else S(c,q,m)||A.push(H)}return A}var Ui=f_(Nn),Bw=f_(Gy,!0);function uN(s,c){var f=!0;return Ui(s,function(m,y,S){return f=!!c(m,y,S),f}),f}function Qp(s,c,f){for(var m=-1,y=s.length;++m<y;){var S=s[m],E=c(S);if(E!=null&&(R===t?E===E&&!kr(E):f(E,R)))var R=E,A=S}return A}function fN(s,c,f,m){var y=s.length;for(f=be(f),f<0&&(f=-f>y?0:y+f),m=m===t||m>y?y:be(m),m<0&&(m+=y),m=f>m?0:nE(m);f<m;)s[f++]=c;return s}function Hw(s,c){var f=[];return Ui(s,function(m,y,S){c(m,y,S)&&f.push(m)}),f}function It(s,c,f,m,y){var S=-1,E=s.length;for(f||(f=eL),y||(y=[]);++S<E;){var R=s[S];c>0&&f(R)?c>1?It(R,c-1,f,m,y):Ci(y,R):m||(y[y.length]=R)}return y}var zy=d_(),Ww=d_(!0);function Nn(s,c){return s&&zy(s,c,_t)}function Gy(s,c){return s&&Ww(s,c,_t)}function Zp(s,c){return Fi(c,function(f){return ui(s[f])})}function Do(s,c){c=Bi(c,s);for(var f=0,m=c.length;s!=null&&f<m;)s=s[Un(c[f++])];return f&&f==m?s:t}function $w(s,c,f){var m=c(s);return xe(s)?m:Ci(m,f(s))}function Kt(s){return s==null?s===t?H1:V1:ko&&ko in ze(s)?KN(s):aL(s)}function Ky(s,c){return s>c}function dN(s,c){return s!=null&&qe.call(s,c)}function mN(s,c){return s!=null&&c in ze(s)}function hN(s,c,f){return s>=Vt(c,f)&&s<St(c,f)}function Qy(s,c,f){for(var m=f?Dy:Dp,y=s[0].length,S=s.length,E=S,R=L(S),A=1/0,B=[];E--;){var H=s[E];E&&c&&(H=Je(H,Er(c))),A=Vt(H.length,A),R[E]=!f&&(c||y>=120&&H.length>=120)?new Mo(E&&H):t}H=s[0];var q=-1,Y=R[0];e:for(;++q<y&&B.length<A;){var ie=H[q],pe=c?c(ie):ie;if(ie=f||ie!==0?ie:0,!(Y?fc(Y,pe):m(B,pe,f))){for(E=S;--E;){var Ee=R[E];if(!(Ee?fc(Ee,pe):m(s[E],pe,f)))continue e}Y&&Y.push(pe),B.push(ie)}}return B}function gN(s,c,f,m){return Nn(s,function(y,S,E){c(m,f(y),S,E)}),m}function Sc(s,c,f){c=Bi(c,s),s=A_(s,c);var m=s==null?s:s[Un(Zr(c))];return m==null?t:_r(m,s,f)}function qw(s){return ot(s)&&Kt(s)==sr}function yN(s){return ot(s)&&Kt(s)==uc}function xN(s){return ot(s)&&Kt(s)==$r}function vc(s,c,f,m,y){return s===c?!0:s==null||c==null||!ot(s)&&!ot(c)?s!==s&&c!==c:TN(s,c,f,m,vc,y)}function TN(s,c,f,m,y,S){var E=xe(s),R=xe(c),A=E?mn:Bt(s),B=R?mn:Bt(c);A=A==sr?ii:A,B=B==sr?ii:B;var H=A==ii,q=B==ii,Y=A==B;if(Y&&Wi(s)){if(!Wi(c))return!1;E=!0,H=!1}if(Y&&!H)return S||(S=new Tn),E||Ms(s)?w_(s,c,f,m,y,S):zN(s,c,A,f,m,y,S);if(!(f&g)){var ie=H&&qe.call(s,"__wrapped__"),pe=q&&qe.call(c,"__wrapped__");if(ie||pe){var Ee=ie?s.value():s,ue=pe?c.value():c;return S||(S=new Tn),y(Ee,ue,f,m,S)}}return Y?(S||(S=new Tn),GN(s,c,f,m,y,S)):!1}function SN(s){return ot(s)&&Bt(s)==gn}function Zy(s,c,f,m){var y=f.length,S=y,E=!m;if(s==null)return!S;for(s=ze(s);y--;){var R=f[y];if(E&&R[2]?R[1]!==s[R[0]]:!(R[0]in s))return!1}for(;++y<S;){R=f[y];var A=R[0],B=s[A],H=R[1];if(E&&R[2]){if(B===t&&!(A in s))return!1}else{var q=new Tn;if(m)var Y=m(B,H,A,s,c,q);if(!(Y===t?vc(H,B,g|x,m,q):Y))return!1}}return!0}function jw(s){if(!rt(s)||rL(s))return!1;var c=ui(s)?SO:pC;return c.test(Fo(s))}function vN(s){return ot(s)&&Kt(s)==cc}function bN(s){return ot(s)&&Bt(s)==yn}function wN(s){return ot(s)&&du(s.length)&&!!Ye[Kt(s)]}function zw(s){return typeof s=="function"?s:s==null?pr:typeof s=="object"?xe(s)?Qw(s[0],s[1]):Kw(s):mE(s)}function Yy(s){if(!_c(s))return RO(s);var c=[];for(var f in ze(s))qe.call(s,f)&&f!="constructor"&&c.push(f);return c}function _N(s){if(!rt(s))return sL(s);var c=_c(s),f=[];for(var m in s)m=="constructor"&&(c||!qe.call(s,m))||f.push(m);return f}function Xy(s,c){return s<c}function Gw(s,c){var f=-1,m=cr(s)?L(s.length):[];return Ui(s,function(y,S,E){m[++f]=c(y,S,E)}),m}function Kw(s){var c=dx(s);return c.length==1&&c[0][2]?P_(c[0][0],c[0][1]):function(f){return f===s||Zy(f,s,c)}}function Qw(s,c){return hx(s)&&k_(c)?P_(Un(s),c):function(f){var m=Ex(f,s);return m===t&&m===c?Rx(f,s):vc(c,m,g|x)}}function Yp(s,c,f,m,y){s!==c&&zy(c,function(S,E){if(y||(y=new Tn),rt(S))EN(s,c,E,f,Yp,m,y);else{var R=m?m(yx(s,E),S,E+"",s,c,y):t;R===t&&(R=S),qy(s,E,R)}},lr)}function EN(s,c,f,m,y,S,E){var R=yx(s,f),A=yx(c,f),B=E.get(A);if(B){qy(s,f,B);return}var H=S?S(R,A,f+"",s,c,E):t,q=H===t;if(q){var Y=xe(A),ie=!Y&&Wi(A),pe=!Y&&!ie&&Ms(A);H=A,Y||ie||pe?xe(R)?H=R:ct(R)?H=ar(R):ie?(q=!1,H=a_(A,!0)):pe?(q=!1,H=c_(A,!0)):H=[]:Rc(A)||Co(A)?(H=R,Co(R)?H=iE(R):(!rt(R)||ui(R))&&(H=R_(A))):q=!1}q&&(E.set(A,H),y(H,A,m,S,E),E.delete(A)),qy(s,f,H)}function Zw(s,c){var f=s.length;if(f)return c+=c<0?f:0,pi(c,f)?s[c]:t}function Yw(s,c,f){c.length?c=Je(c,function(S){return xe(S)?function(E){return Do(E,S.length===1?S[0]:S)}:S}):c=[pr];var m=-1;c=Je(c,Er(le()));var y=Gw(s,function(S,E,R){var A=Je(c,function(B){return B(S)});return{criteria:A,index:++m,value:S}});return XC(y,function(S,E){return UN(S,E,f)})}function RN(s,c){return Xw(s,c,function(f,m){return Rx(s,m)})}function Xw(s,c,f){for(var m=-1,y=c.length,S={};++m<y;){var E=c[m],R=Do(s,E);f(R,E)&&bc(S,Bi(E,s),R)}return S}function kN(s){return function(c){return Do(c,s)}}function Jy(s,c,f,m){var y=m?YC:Ts,S=-1,E=c.length,R=s;for(s===c&&(c=ar(c)),f&&(R=Je(s,Er(f)));++S<E;)for(var A=0,B=c[S],H=f?f(B):B;(A=y(R,H,A,m))>-1;)R!==s&&Hp.call(R,A,1),Hp.call(s,A,1);return s}function Jw(s,c){for(var f=s?c.length:0,m=f-1;f--;){var y=c[f];if(f==m||y!==S){var S=y;pi(y)?Hp.call(s,y,1):nx(s,y)}}return s}function ex(s,c){return s+qp(Fw()*(c-s+1))}function PN(s,c,f,m){for(var y=-1,S=St($p((c-s)/(f||1)),0),E=L(S);S--;)E[m?S:++y]=s,s+=f;return E}function tx(s,c){var f="";if(!s||c<1||c>Q)return f;do c%2&&(f+=s),c=qp(c/2),c&&(s+=s);while(c);return f}function ke(s,c){return xx(M_(s,c,pr),s+"")}function MN(s){return Nw(As(s))}function AN(s,c){var f=As(s);return au(f,Ao(c,0,f.length))}function bc(s,c,f,m){if(!rt(s))return s;c=Bi(c,s);for(var y=-1,S=c.length,E=S-1,R=s;R!=null&&++y<S;){var A=Un(c[y]),B=f;if(A==="__proto__"||A==="constructor"||A==="prototype")return s;if(y!=E){var H=R[A];B=m?m(H,A,R):t,B===t&&(B=rt(H)?H:pi(c[y+1])?[]:{})}xc(R,A,B),R=R[A]}return s}var e_=jp?function(s,c){return jp.set(s,c),s}:pr,DN=Wp?function(s,c){return Wp(s,"toString",{configurable:!0,enumerable:!1,value:Px(c),writable:!0})}:pr;function IN(s){return au(As(s))}function Qr(s,c,f){var m=-1,y=s.length;c<0&&(c=-c>y?0:y+c),f=f>y?y:f,f<0&&(f+=y),y=c>f?0:f-c>>>0,c>>>=0;for(var S=L(y);++m<y;)S[m]=s[m+c];return S}function FN(s,c){var f;return Ui(s,function(m,y,S){return f=c(m,y,S),!f}),!!f}function Xp(s,c,f){var m=0,y=s==null?m:s.length;if(typeof c=="number"&&c===c&&y<=or){for(;m<y;){var S=m+y>>>1,E=s[S];E!==null&&!kr(E)&&(f?E<=c:E<c)?m=S+1:y=S}return y}return rx(s,c,pr,f)}function rx(s,c,f,m){var y=0,S=s==null?0:s.length;if(S===0)return 0;c=f(c);for(var E=c!==c,R=c===null,A=kr(c),B=c===t;y<S;){var H=qp((y+S)/2),q=f(s[H]),Y=q!==t,ie=q===null,pe=q===q,Ee=kr(q);if(E)var ue=m||pe;else B?ue=pe&&(m||Y):R?ue=pe&&Y&&(m||!ie):A?ue=pe&&Y&&!ie&&(m||!Ee):ie||Ee?ue=!1:ue=m?q<=c:q<c;ue?y=H+1:S=H}return Vt(S,Re)}function t_(s,c){for(var f=-1,m=s.length,y=0,S=[];++f<m;){var E=s[f],R=c?c(E):E;if(!f||!Sn(R,A)){var A=R;S[y++]=E===0?0:E}}return S}function r_(s){return typeof s=="number"?s:kr(s)?me:+s}function Rr(s){if(typeof s=="string")return s;if(xe(s))return Je(s,Rr)+"";if(kr(s))return Cw?Cw.call(s):"";var c=s+"";return c=="0"&&1/s==-K?"-0":c}function Vi(s,c,f){var m=-1,y=Dp,S=s.length,E=!0,R=[],A=R;if(f)E=!1,y=Dy;else if(S>=r){var B=c?null:qN(s);if(B)return Fp(B);E=!1,y=fc,A=new Mo}else A=c?[]:R;e:for(;++m<S;){var H=s[m],q=c?c(H):H;if(H=f||H!==0?H:0,E&&q===q){for(var Y=A.length;Y--;)if(A[Y]===q)continue e;c&&A.push(q),R.push(H)}else y(A,q,f)||(A!==R&&A.push(q),R.push(H))}return R}function nx(s,c){return c=Bi(c,s),s=A_(s,c),s==null||delete s[Un(Zr(c))]}function n_(s,c,f,m){return bc(s,c,f(Do(s,c)),m)}function Jp(s,c,f,m){for(var y=s.length,S=m?y:-1;(m?S--:++S<y)&&c(s[S],S,s););return f?Qr(s,m?0:S,m?S+1:y):Qr(s,m?S+1:0,m?y:S)}function i_(s,c){var f=s;return f instanceof Ae&&(f=f.value()),Iy(c,function(m,y){return y.func.apply(y.thisArg,Ci([m],y.args))},f)}function ix(s,c,f){var m=s.length;if(m<2)return m?Vi(s[0]):[];for(var y=-1,S=L(m);++y<m;)for(var E=s[y],R=-1;++R<m;)R!=y&&(S[y]=Tc(S[y]||E,s[R],c,f));return Vi(It(S,1),c,f)}function o_(s,c,f){for(var m=-1,y=s.length,S=c.length,E={};++m<y;){var R=m<S?c[m]:t;f(E,s[m],R)}return E}function ox(s){return ct(s)?s:[]}function sx(s){return typeof s=="function"?s:pr}function Bi(s,c){return xe(s)?s:hx(s,c)?[s]:C_(We(s))}var CN=ke;function Hi(s,c,f){var m=s.length;return f=f===t?m:f,!c&&f>=m?s:Qr(s,c,f)}var s_=vO||function(s){return wt.clearTimeout(s)};function a_(s,c){if(c)return s.slice();var f=s.length,m=Pw?Pw(f):new s.constructor(f);return s.copy(m),m}function ax(s){var c=new s.constructor(s.byteLength);return new Vp(c).set(new Vp(s)),c}function ON(s,c){var f=c?ax(s.buffer):s.buffer;return new s.constructor(f,s.byteOffset,s.byteLength)}function NN(s){var c=new s.constructor(s.source,qb.exec(s));return c.lastIndex=s.lastIndex,c}function LN(s){return yc?ze(yc.call(s)):{}}function c_(s,c){var f=c?ax(s.buffer):s.buffer;return new s.constructor(f,s.byteOffset,s.length)}function l_(s,c){if(s!==c){var f=s!==t,m=s===null,y=s===s,S=kr(s),E=c!==t,R=c===null,A=c===c,B=kr(c);if(!R&&!B&&!S&&s>c||S&&E&&A&&!R&&!B||m&&E&&A||!f&&A||!y)return 1;if(!m&&!S&&!B&&s<c||B&&f&&y&&!m&&!S||R&&f&&y||!E&&y||!A)return-1}return 0}function UN(s,c,f){for(var m=-1,y=s.criteria,S=c.criteria,E=y.length,R=f.length;++m<E;){var A=l_(y[m],S[m]);if(A){if(m>=R)return A;var B=f[m];return A*(B=="desc"?-1:1)}}return s.index-c.index}function p_(s,c,f,m){for(var y=-1,S=s.length,E=f.length,R=-1,A=c.length,B=St(S-E,0),H=L(A+B),q=!m;++R<A;)H[R]=c[R];for(;++y<E;)(q||y<S)&&(H[f[y]]=s[y]);for(;B--;)H[R++]=s[y++];return H}function u_(s,c,f,m){for(var y=-1,S=s.length,E=-1,R=f.length,A=-1,B=c.length,H=St(S-R,0),q=L(H+B),Y=!m;++y<H;)q[y]=s[y];for(var ie=y;++A<B;)q[ie+A]=c[A];for(;++E<R;)(Y||y<S)&&(q[ie+f[E]]=s[y++]);return q}function ar(s,c){var f=-1,m=s.length;for(c||(c=L(m));++f<m;)c[f]=s[f];return c}function Ln(s,c,f,m){var y=!f;f||(f={});for(var S=-1,E=c.length;++S<E;){var R=c[S],A=m?m(f[R],s[R],R,f,s):t;A===t&&(A=s[R]),y?ai(f,R,A):xc(f,R,A)}return f}function VN(s,c){return Ln(s,mx(s),c)}function BN(s,c){return Ln(s,__(s),c)}function eu(s,c){return function(f,m){var y=xe(f)?jC:cN,S=c?c():{};return y(f,s,le(m,2),S)}}function Rs(s){return ke(function(c,f){var m=-1,y=f.length,S=y>1?f[y-1]:t,E=y>2?f[2]:t;for(S=s.length>3&&typeof S=="function"?(y--,S):t,E&&Qt(f[0],f[1],E)&&(S=y<3?t:S,y=1),c=ze(c);++m<y;){var R=f[m];R&&s(c,R,m,S)}return c})}function f_(s,c){return function(f,m){if(f==null)return f;if(!cr(f))return s(f,m);for(var y=f.length,S=c?y:-1,E=ze(f);(c?S--:++S<y)&&m(E[S],S,E)!==!1;);return f}}function d_(s){return function(c,f,m){for(var y=-1,S=ze(c),E=m(c),R=E.length;R--;){var A=E[s?R:++y];if(f(S[A],A,S)===!1)break}return c}}function HN(s,c,f){var m=c&b,y=wc(s);function S(){var E=this&&this!==wt&&this instanceof S?y:s;return E.apply(m?f:this,arguments)}return S}function m_(s){return function(c){c=We(c);var f=Ss(c)?xn(c):t,m=f?f[0]:c.charAt(0),y=f?Hi(f,1).join(""):c.slice(1);return m[s]()+y}}function ks(s){return function(c){return Iy(fE(uE(c).replace(DC,"")),s,"")}}function wc(s){return function(){var c=arguments;switch(c.length){case 0:return new s;case 1:return new s(c[0]);case 2:return new s(c[0],c[1]);case 3:return new s(c[0],c[1],c[2]);case 4:return new s(c[0],c[1],c[2],c[3]);case 5:return new s(c[0],c[1],c[2],c[3],c[4]);case 6:return new s(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new s(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var f=Es(s.prototype),m=s.apply(f,c);return rt(m)?m:f}}function WN(s,c,f){var m=wc(s);function y(){for(var S=arguments.length,E=L(S),R=S,A=Ps(y);R--;)E[R]=arguments[R];var B=S<3&&E[0]!==A&&E[S-1]!==A?[]:Oi(E,A);if(S-=B.length,S<f)return T_(s,c,tu,y.placeholder,t,E,B,t,t,f-S);var H=this&&this!==wt&&this instanceof y?m:s;return _r(H,this,E)}return y}function h_(s){return function(c,f,m){var y=ze(c);if(!cr(c)){var S=le(f,3);c=_t(c),f=function(R){return S(y[R],R,y)}}var E=s(c,f,m);return E>-1?y[S?c[E]:E]:t}}function g_(s){return li(function(c){var f=c.length,m=f,y=Gr.prototype.thru;for(s&&c.reverse();m--;){var S=c[m];if(typeof S!="function")throw new zr(i);if(y&&!E&&ou(S)=="wrapper")var E=new Gr([],!0)}for(m=E?m:f;++m<f;){S=c[m];var R=ou(S),A=R=="wrapper"?fx(S):t;A&&gx(A[0])&&A[1]==(he|M|Z|de)&&!A[4].length&&A[9]==1?E=E[ou(A[0])].apply(E,A[3]):E=S.length==1&&gx(S)?E[R]():E.thru(S)}return function(){var B=arguments,H=B[0];if(E&&B.length==1&&xe(H))return E.plant(H).value();for(var q=0,Y=f?c[q].apply(this,B):H;++q<f;)Y=c[q].call(this,Y);return Y}})}function tu(s,c,f,m,y,S,E,R,A,B){var H=c&he,q=c&b,Y=c&w,ie=c&(M|U),pe=c&ht,Ee=Y?t:wc(s);function ue(){for(var Pe=arguments.length,Ie=L(Pe),Pr=Pe;Pr--;)Ie[Pr]=arguments[Pr];if(ie)var Zt=Ps(ue),Mr=eO(Ie,Zt);if(m&&(Ie=p_(Ie,m,y,ie)),S&&(Ie=u_(Ie,S,E,ie)),Pe-=Mr,ie&&Pe<B){var lt=Oi(Ie,Zt);return T_(s,c,tu,ue.placeholder,f,Ie,lt,R,A,B-Pe)}var vn=q?f:this,di=Y?vn[s]:s;return Pe=Ie.length,R?Ie=cL(Ie,R):pe&&Pe>1&&Ie.reverse(),H&&A<Pe&&(Ie.length=A),this&&this!==wt&&this instanceof ue&&(di=Ee||wc(di)),di.apply(vn,Ie)}return ue}function y_(s,c){return function(f,m){return gN(f,s,c(m),{})}}function ru(s,c){return function(f,m){var y;if(f===t&&m===t)return c;if(f!==t&&(y=f),m!==t){if(y===t)return m;typeof f=="string"||typeof m=="string"?(f=Rr(f),m=Rr(m)):(f=r_(f),m=r_(m)),y=s(f,m)}return y}}function cx(s){return li(function(c){return c=Je(c,Er(le())),ke(function(f){var m=this;return s(c,function(y){return _r(y,m,f)})})})}function nu(s,c){c=c===t?" ":Rr(c);var f=c.length;if(f<2)return f?tx(c,s):c;var m=tx(c,$p(s/vs(c)));return Ss(c)?Hi(xn(m),0,s).join(""):m.slice(0,s)}function $N(s,c,f,m){var y=c&b,S=wc(s);function E(){for(var R=-1,A=arguments.length,B=-1,H=m.length,q=L(H+A),Y=this&&this!==wt&&this instanceof E?S:s;++B<H;)q[B]=m[B];for(;A--;)q[B++]=arguments[++R];return _r(Y,y?f:this,q)}return E}function x_(s){return function(c,f,m){return m&&typeof m!="number"&&Qt(c,f,m)&&(f=m=t),c=fi(c),f===t?(f=c,c=0):f=fi(f),m=m===t?c<f?1:-1:fi(m),PN(c,f,m,s)}}function iu(s){return function(c,f){return typeof c=="string"&&typeof f=="string"||(c=Yr(c),f=Yr(f)),s(c,f)}}function T_(s,c,f,m,y,S,E,R,A,B){var H=c&M,q=H?E:t,Y=H?t:E,ie=H?S:t,pe=H?t:S;c|=H?Z:ne,c&=~(H?ne:Z),c&F||(c&=~(b|w));var Ee=[s,c,y,ie,q,pe,Y,R,A,B],ue=f.apply(t,Ee);return gx(s)&&D_(ue,Ee),ue.placeholder=m,I_(ue,s,c)}function lx(s){var c=Tt[s];return function(f,m){if(f=Yr(f),m=m==null?0:Vt(be(m),292),m&&Iw(f)){var y=(We(f)+"e").split("e"),S=c(y[0]+"e"+(+y[1]+m));return y=(We(S)+"e").split("e"),+(y[0]+"e"+(+y[1]-m))}return c(f)}}var qN=ws&&1/Fp(new ws([,-0]))[1]==K?function(s){return new ws(s)}:Dx;function S_(s){return function(c){var f=Bt(c);return f==gn?Vy(c):f==yn?aO(c):JC(c,s(c))}}function ci(s,c,f,m,y,S,E,R){var A=c&w;if(!A&&typeof s!="function")throw new zr(i);var B=m?m.length:0;if(B||(c&=~(Z|ne),m=y=t),E=E===t?E:St(be(E),0),R=R===t?R:be(R),B-=y?y.length:0,c&ne){var H=m,q=y;m=y=t}var Y=A?t:fx(s),ie=[s,c,f,m,y,H,q,S,E,R];if(Y&&oL(ie,Y),s=ie[0],c=ie[1],f=ie[2],m=ie[3],y=ie[4],R=ie[9]=ie[9]===t?A?0:s.length:St(ie[9]-B,0),!R&&c&(M|U)&&(c&=~(M|U)),!c||c==b)var pe=HN(s,c,f);else c==M||c==U?pe=WN(s,c,R):(c==Z||c==(b|Z))&&!y.length?pe=$N(s,c,f,m):pe=tu.apply(t,ie);var Ee=Y?e_:D_;return I_(Ee(pe,ie),s,c)}function v_(s,c,f,m){return s===t||Sn(s,bs[f])&&!qe.call(m,f)?c:s}function b_(s,c,f,m,y,S){return rt(s)&&rt(c)&&(S.set(c,s),Yp(s,c,t,b_,S),S.delete(c)),s}function jN(s){return Rc(s)?t:s}function w_(s,c,f,m,y,S){var E=f&g,R=s.length,A=c.length;if(R!=A&&!(E&&A>R))return!1;var B=S.get(s),H=S.get(c);if(B&&H)return B==c&&H==s;var q=-1,Y=!0,ie=f&x?new Mo:t;for(S.set(s,c),S.set(c,s);++q<R;){var pe=s[q],Ee=c[q];if(m)var ue=E?m(Ee,pe,q,c,s,S):m(pe,Ee,q,s,c,S);if(ue!==t){if(ue)continue;Y=!1;break}if(ie){if(!Fy(c,function(Pe,Ie){if(!fc(ie,Ie)&&(pe===Pe||y(pe,Pe,f,m,S)))return ie.push(Ie)})){Y=!1;break}}else if(!(pe===Ee||y(pe,Ee,f,m,S))){Y=!1;break}}return S.delete(s),S.delete(c),Y}function zN(s,c,f,m,y,S,E){switch(f){case ys:if(s.byteLength!=c.byteLength||s.byteOffset!=c.byteOffset)return!1;s=s.buffer,c=c.buffer;case uc:return!(s.byteLength!=c.byteLength||!S(new Vp(s),new Vp(c)));case hn:case $r:case ac:return Sn(+s,+c);case ni:return s.name==c.name&&s.message==c.message;case cc:case lc:return s==c+"";case gn:var R=Vy;case yn:var A=m&g;if(R||(R=Fp),s.size!=c.size&&!A)return!1;var B=E.get(s);if(B)return B==c;m|=x,E.set(s,c);var H=w_(R(s),R(c),m,y,S,E);return E.delete(s),H;case kp:if(yc)return yc.call(s)==yc.call(c)}return!1}function GN(s,c,f,m,y,S){var E=f&g,R=px(s),A=R.length,B=px(c),H=B.length;if(A!=H&&!E)return!1;for(var q=A;q--;){var Y=R[q];if(!(E?Y in c:qe.call(c,Y)))return!1}var ie=S.get(s),pe=S.get(c);if(ie&&pe)return ie==c&&pe==s;var Ee=!0;S.set(s,c),S.set(c,s);for(var ue=E;++q<A;){Y=R[q];var Pe=s[Y],Ie=c[Y];if(m)var Pr=E?m(Ie,Pe,Y,c,s,S):m(Pe,Ie,Y,s,c,S);if(!(Pr===t?Pe===Ie||y(Pe,Ie,f,m,S):Pr)){Ee=!1;break}ue||(ue=Y=="constructor")}if(Ee&&!ue){var Zt=s.constructor,Mr=c.constructor;Zt!=Mr&&"constructor"in s&&"constructor"in c&&!(typeof Zt=="function"&&Zt instanceof Zt&&typeof Mr=="function"&&Mr instanceof Mr)&&(Ee=!1)}return S.delete(s),S.delete(c),Ee}function li(s){return xx(M_(s,t,U_),s+"")}function px(s){return $w(s,_t,mx)}function ux(s){return $w(s,lr,__)}var fx=jp?function(s){return jp.get(s)}:Dx;function ou(s){for(var c=s.name+"",f=_s[c],m=qe.call(_s,c)?f.length:0;m--;){var y=f[m],S=y.func;if(S==null||S==s)return y.name}return c}function Ps(s){var c=qe.call(T,"placeholder")?T:s;return c.placeholder}function le(){var s=T.iteratee||Mx;return s=s===Mx?zw:s,arguments.length?s(arguments[0],arguments[1]):s}function su(s,c){var f=s.__data__;return tL(c)?f[typeof c=="string"?"string":"hash"]:f.map}function dx(s){for(var c=_t(s),f=c.length;f--;){var m=c[f],y=s[m];c[f]=[m,y,k_(y)]}return c}function Io(s,c){var f=iO(s,c);return jw(f)?f:t}function KN(s){var c=qe.call(s,ko),f=s[ko];try{s[ko]=t;var m=!0}catch{}var y=Lp.call(s);return m&&(c?s[ko]=f:delete s[ko]),y}var mx=Hy?function(s){return s==null?[]:(s=ze(s),Fi(Hy(s),function(c){return Aw.call(s,c)}))}:Ix,__=Hy?function(s){for(var c=[];s;)Ci(c,mx(s)),s=Bp(s);return c}:Ix,Bt=Kt;(Wy&&Bt(new Wy(new ArrayBuffer(1)))!=ys||mc&&Bt(new mc)!=gn||$y&&Bt($y.resolve())!=Bb||ws&&Bt(new ws)!=yn||hc&&Bt(new hc)!=pc)&&(Bt=function(s){var c=Kt(s),f=c==ii?s.constructor:t,m=f?Fo(f):"";if(m)switch(m){case AO:return ys;case DO:return gn;case IO:return Bb;case FO:return yn;case CO:return pc}return c});function QN(s,c,f){for(var m=-1,y=f.length;++m<y;){var S=f[m],E=S.size;switch(S.type){case"drop":s+=E;break;case"dropRight":c-=E;break;case"take":c=Vt(c,s+E);break;case"takeRight":s=St(s,c-E);break}}return{start:s,end:c}}function ZN(s){var c=s.match(rC);return c?c[1].split(nC):[]}function E_(s,c,f){c=Bi(c,s);for(var m=-1,y=c.length,S=!1;++m<y;){var E=Un(c[m]);if(!(S=s!=null&&f(s,E)))break;s=s[E]}return S||++m!=y?S:(y=s==null?0:s.length,!!y&&du(y)&&pi(E,y)&&(xe(s)||Co(s)))}function YN(s){var c=s.length,f=new s.constructor(c);return c&&typeof s[0]=="string"&&qe.call(s,"index")&&(f.index=s.index,f.input=s.input),f}function R_(s){return typeof s.constructor=="function"&&!_c(s)?Es(Bp(s)):{}}function XN(s,c,f){var m=s.constructor;switch(c){case uc:return ax(s);case hn:case $r:return new m(+s);case ys:return ON(s,f);case dy:case my:case hy:case gy:case yy:case xy:case Ty:case Sy:case vy:return c_(s,f);case gn:return new m;case ac:case lc:return new m(s);case cc:return NN(s);case yn:return new m;case kp:return LN(s)}}function JN(s,c){var f=c.length;if(!f)return s;var m=f-1;return c[m]=(f>1?"& ":"")+c[m],c=c.join(f>2?", ":" "),s.replace(tC,`{
/* [wrapped with `+c+`] */
`)}function eL(s){return xe(s)||Co(s)||!!(Dw&&s&&s[Dw])}function pi(s,c){var f=typeof s;return c=c??Q,!!c&&(f=="number"||f!="symbol"&&fC.test(s))&&s>-1&&s%1==0&&s<c}function Qt(s,c,f){if(!rt(f))return!1;var m=typeof c;return(m=="number"?cr(f)&&pi(c,f.length):m=="string"&&c in f)?Sn(f[c],s):!1}function hx(s,c){if(xe(s))return!1;var f=typeof s;return f=="number"||f=="symbol"||f=="boolean"||s==null||kr(s)?!0:Y1.test(s)||!Z1.test(s)||c!=null&&s in ze(c)}function tL(s){var c=typeof s;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?s!=="__proto__":s===null}function gx(s){var c=ou(s),f=T[c];if(typeof f!="function"||!(c in Ae.prototype))return!1;if(s===f)return!0;var m=fx(f);return!!m&&s===m[0]}function rL(s){return!!kw&&kw in s}var nL=Op?ui:Fx;function _c(s){var c=s&&s.constructor,f=typeof c=="function"&&c.prototype||bs;return s===f}function k_(s){return s===s&&!rt(s)}function P_(s,c){return function(f){return f==null?!1:f[s]===c&&(c!==t||s in ze(f))}}function iL(s){var c=uu(s,function(m){return f.size===l&&f.clear(),m}),f=c.cache;return c}function oL(s,c){var f=s[1],m=c[1],y=f|m,S=y<(b|w|he),E=m==he&&f==M||m==he&&f==de&&s[7].length<=c[8]||m==(he|de)&&c[7].length<=c[8]&&f==M;if(!(S||E))return s;m&b&&(s[2]=c[2],y|=f&b?0:F);var R=c[3];if(R){var A=s[3];s[3]=A?p_(A,R,c[4]):R,s[4]=A?Oi(s[3],p):c[4]}return R=c[5],R&&(A=s[5],s[5]=A?u_(A,R,c[6]):R,s[6]=A?Oi(s[5],p):c[6]),R=c[7],R&&(s[7]=R),m&he&&(s[8]=s[8]==null?c[8]:Vt(s[8],c[8])),s[9]==null&&(s[9]=c[9]),s[0]=c[0],s[1]=y,s}function sL(s){var c=[];if(s!=null)for(var f in ze(s))c.push(f);return c}function aL(s){return Lp.call(s)}function M_(s,c,f){return c=St(c===t?s.length-1:c,0),function(){for(var m=arguments,y=-1,S=St(m.length-c,0),E=L(S);++y<S;)E[y]=m[c+y];y=-1;for(var R=L(c+1);++y<c;)R[y]=m[y];return R[c]=f(E),_r(s,this,R)}}function A_(s,c){return c.length<2?s:Do(s,Qr(c,0,-1))}function cL(s,c){for(var f=s.length,m=Vt(c.length,f),y=ar(s);m--;){var S=c[m];s[m]=pi(S,f)?y[S]:t}return s}function yx(s,c){if(!(c==="constructor"&&typeof s[c]=="function")&&c!="__proto__")return s[c]}var D_=F_(e_),Ec=wO||function(s,c){return wt.setTimeout(s,c)},xx=F_(DN);function I_(s,c,f){var m=c+"";return xx(s,JN(m,lL(ZN(m),f)))}function F_(s){var c=0,f=0;return function(){var m=kO(),y=O-(m-f);if(f=m,y>0){if(++c>=N)return arguments[0]}else c=0;return s.apply(t,arguments)}}function au(s,c){var f=-1,m=s.length,y=m-1;for(c=c===t?m:c;++f<c;){var S=ex(f,y),E=s[S];s[S]=s[f],s[f]=E}return s.length=c,s}var C_=iL(function(s){var c=[];return s.charCodeAt(0)===46&&c.push(""),s.replace(X1,function(f,m,y,S){c.push(y?S.replace(sC,"$1"):m||f)}),c});function Un(s){if(typeof s=="string"||kr(s))return s;var c=s+"";return c=="0"&&1/s==-K?"-0":c}function Fo(s){if(s!=null){try{return Np.call(s)}catch{}try{return s+""}catch{}}return""}function lL(s,c){return jr(ri,function(f){var m="_."+f[0];c&f[1]&&!Dp(s,m)&&s.push(m)}),s.sort()}function O_(s){if(s instanceof Ae)return s.clone();var c=new Gr(s.__wrapped__,s.__chain__);return c.__actions__=ar(s.__actions__),c.__index__=s.__index__,c.__values__=s.__values__,c}function pL(s,c,f){(f?Qt(s,c,f):c===t)?c=1:c=St(be(c),0);var m=s==null?0:s.length;if(!m||c<1)return[];for(var y=0,S=0,E=L($p(m/c));y<m;)E[S++]=Qr(s,y,y+=c);return E}function uL(s){for(var c=-1,f=s==null?0:s.length,m=0,y=[];++c<f;){var S=s[c];S&&(y[m++]=S)}return y}function fL(){var s=arguments.length;if(!s)return[];for(var c=L(s-1),f=arguments[0],m=s;m--;)c[m-1]=arguments[m];return Ci(xe(f)?ar(f):[f],It(c,1))}var dL=ke(function(s,c){return ct(s)?Tc(s,It(c,1,ct,!0)):[]}),mL=ke(function(s,c){var f=Zr(c);return ct(f)&&(f=t),ct(s)?Tc(s,It(c,1,ct,!0),le(f,2)):[]}),hL=ke(function(s,c){var f=Zr(c);return ct(f)&&(f=t),ct(s)?Tc(s,It(c,1,ct,!0),t,f):[]});function gL(s,c,f){var m=s==null?0:s.length;return m?(c=f||c===t?1:be(c),Qr(s,c<0?0:c,m)):[]}function yL(s,c,f){var m=s==null?0:s.length;return m?(c=f||c===t?1:be(c),c=m-c,Qr(s,0,c<0?0:c)):[]}function xL(s,c){return s&&s.length?Jp(s,le(c,3),!0,!0):[]}function TL(s,c){return s&&s.length?Jp(s,le(c,3),!0):[]}function SL(s,c,f,m){var y=s==null?0:s.length;return y?(f&&typeof f!="number"&&Qt(s,c,f)&&(f=0,m=y),fN(s,c,f,m)):[]}function N_(s,c,f){var m=s==null?0:s.length;if(!m)return-1;var y=f==null?0:be(f);return y<0&&(y=St(m+y,0)),Ip(s,le(c,3),y)}function L_(s,c,f){var m=s==null?0:s.length;if(!m)return-1;var y=m-1;return f!==t&&(y=be(f),y=f<0?St(m+y,0):Vt(y,m-1)),Ip(s,le(c,3),y,!0)}function U_(s){var c=s==null?0:s.length;return c?It(s,1):[]}function vL(s){var c=s==null?0:s.length;return c?It(s,K):[]}function bL(s,c){var f=s==null?0:s.length;return f?(c=c===t?1:be(c),It(s,c)):[]}function wL(s){for(var c=-1,f=s==null?0:s.length,m={};++c<f;){var y=s[c];m[y[0]]=y[1]}return m}function V_(s){return s&&s.length?s[0]:t}function _L(s,c,f){var m=s==null?0:s.length;if(!m)return-1;var y=f==null?0:be(f);return y<0&&(y=St(m+y,0)),Ts(s,c,y)}function EL(s){var c=s==null?0:s.length;return c?Qr(s,0,-1):[]}var RL=ke(function(s){var c=Je(s,ox);return c.length&&c[0]===s[0]?Qy(c):[]}),kL=ke(function(s){var c=Zr(s),f=Je(s,ox);return c===Zr(f)?c=t:f.pop(),f.length&&f[0]===s[0]?Qy(f,le(c,2)):[]}),PL=ke(function(s){var c=Zr(s),f=Je(s,ox);return c=typeof c=="function"?c:t,c&&f.pop(),f.length&&f[0]===s[0]?Qy(f,t,c):[]});function ML(s,c){return s==null?"":EO.call(s,c)}function Zr(s){var c=s==null?0:s.length;return c?s[c-1]:t}function AL(s,c,f){var m=s==null?0:s.length;if(!m)return-1;var y=m;return f!==t&&(y=be(f),y=y<0?St(m+y,0):Vt(y,m-1)),c===c?lO(s,c,y):Ip(s,Tw,y,!0)}function DL(s,c){return s&&s.length?Zw(s,be(c)):t}var IL=ke(B_);function B_(s,c){return s&&s.length&&c&&c.length?Jy(s,c):s}function FL(s,c,f){return s&&s.length&&c&&c.length?Jy(s,c,le(f,2)):s}function CL(s,c,f){return s&&s.length&&c&&c.length?Jy(s,c,t,f):s}var OL=li(function(s,c){var f=s==null?0:s.length,m=jy(s,c);return Jw(s,Je(c,function(y){return pi(y,f)?+y:y}).sort(l_)),m});function NL(s,c){var f=[];if(!(s&&s.length))return f;var m=-1,y=[],S=s.length;for(c=le(c,3);++m<S;){var E=s[m];c(E,m,s)&&(f.push(E),y.push(m))}return Jw(s,y),f}function Tx(s){return s==null?s:MO.call(s)}function LL(s,c,f){var m=s==null?0:s.length;return m?(f&&typeof f!="number"&&Qt(s,c,f)?(c=0,f=m):(c=c==null?0:be(c),f=f===t?m:be(f)),Qr(s,c,f)):[]}function UL(s,c){return Xp(s,c)}function VL(s,c,f){return rx(s,c,le(f,2))}function BL(s,c){var f=s==null?0:s.length;if(f){var m=Xp(s,c);if(m<f&&Sn(s[m],c))return m}return-1}function HL(s,c){return Xp(s,c,!0)}function WL(s,c,f){return rx(s,c,le(f,2),!0)}function $L(s,c){var f=s==null?0:s.length;if(f){var m=Xp(s,c,!0)-1;if(Sn(s[m],c))return m}return-1}function qL(s){return s&&s.length?t_(s):[]}function jL(s,c){return s&&s.length?t_(s,le(c,2)):[]}function zL(s){var c=s==null?0:s.length;return c?Qr(s,1,c):[]}function GL(s,c,f){return s&&s.length?(c=f||c===t?1:be(c),Qr(s,0,c<0?0:c)):[]}function KL(s,c,f){var m=s==null?0:s.length;return m?(c=f||c===t?1:be(c),c=m-c,Qr(s,c<0?0:c,m)):[]}function QL(s,c){return s&&s.length?Jp(s,le(c,3),!1,!0):[]}function ZL(s,c){return s&&s.length?Jp(s,le(c,3)):[]}var YL=ke(function(s){return Vi(It(s,1,ct,!0))}),XL=ke(function(s){var c=Zr(s);return ct(c)&&(c=t),Vi(It(s,1,ct,!0),le(c,2))}),JL=ke(function(s){var c=Zr(s);return c=typeof c=="function"?c:t,Vi(It(s,1,ct,!0),t,c)});function eU(s){return s&&s.length?Vi(s):[]}function tU(s,c){return s&&s.length?Vi(s,le(c,2)):[]}function rU(s,c){return c=typeof c=="function"?c:t,s&&s.length?Vi(s,t,c):[]}function Sx(s){if(!(s&&s.length))return[];var c=0;return s=Fi(s,function(f){if(ct(f))return c=St(f.length,c),!0}),Ly(c,function(f){return Je(s,Cy(f))})}function H_(s,c){if(!(s&&s.length))return[];var f=Sx(s);return c==null?f:Je(f,function(m){return _r(c,t,m)})}var nU=ke(function(s,c){return ct(s)?Tc(s,c):[]}),iU=ke(function(s){return ix(Fi(s,ct))}),oU=ke(function(s){var c=Zr(s);return ct(c)&&(c=t),ix(Fi(s,ct),le(c,2))}),sU=ke(function(s){var c=Zr(s);return c=typeof c=="function"?c:t,ix(Fi(s,ct),t,c)}),aU=ke(Sx);function cU(s,c){return o_(s||[],c||[],xc)}function lU(s,c){return o_(s||[],c||[],bc)}var pU=ke(function(s){var c=s.length,f=c>1?s[c-1]:t;return f=typeof f=="function"?(s.pop(),f):t,H_(s,f)});function W_(s){var c=T(s);return c.__chain__=!0,c}function uU(s,c){return c(s),s}function cu(s,c){return c(s)}var fU=li(function(s){var c=s.length,f=c?s[0]:0,m=this.__wrapped__,y=function(S){return jy(S,s)};return c>1||this.__actions__.length||!(m instanceof Ae)||!pi(f)?this.thru(y):(m=m.slice(f,+f+(c?1:0)),m.__actions__.push({func:cu,args:[y],thisArg:t}),new Gr(m,this.__chain__).thru(function(S){return c&&!S.length&&S.push(t),S}))});function dU(){return W_(this)}function mU(){return new Gr(this.value(),this.__chain__)}function hU(){this.__values__===t&&(this.__values__=rE(this.value()));var s=this.__index__>=this.__values__.length,c=s?t:this.__values__[this.__index__++];return{done:s,value:c}}function gU(){return this}function yU(s){for(var c,f=this;f instanceof Gp;){var m=O_(f);m.__index__=0,m.__values__=t,c?y.__wrapped__=m:c=m;var y=m;f=f.__wrapped__}return y.__wrapped__=s,c}function xU(){var s=this.__wrapped__;if(s instanceof Ae){var c=s;return this.__actions__.length&&(c=new Ae(this)),c=c.reverse(),c.__actions__.push({func:cu,args:[Tx],thisArg:t}),new Gr(c,this.__chain__)}return this.thru(Tx)}function TU(){return i_(this.__wrapped__,this.__actions__)}var SU=eu(function(s,c,f){qe.call(s,f)?++s[f]:ai(s,f,1)});function vU(s,c,f){var m=xe(s)?yw:uN;return f&&Qt(s,c,f)&&(c=t),m(s,le(c,3))}function bU(s,c){var f=xe(s)?Fi:Hw;return f(s,le(c,3))}var wU=h_(N_),_U=h_(L_);function EU(s,c){return It(lu(s,c),1)}function RU(s,c){return It(lu(s,c),K)}function kU(s,c,f){return f=f===t?1:be(f),It(lu(s,c),f)}function $_(s,c){var f=xe(s)?jr:Ui;return f(s,le(c,3))}function q_(s,c){var f=xe(s)?zC:Bw;return f(s,le(c,3))}var PU=eu(function(s,c,f){qe.call(s,f)?s[f].push(c):ai(s,f,[c])});function MU(s,c,f,m){s=cr(s)?s:As(s),f=f&&!m?be(f):0;var y=s.length;return f<0&&(f=St(y+f,0)),mu(s)?f<=y&&s.indexOf(c,f)>-1:!!y&&Ts(s,c,f)>-1}var AU=ke(function(s,c,f){var m=-1,y=typeof c=="function",S=cr(s)?L(s.length):[];return Ui(s,function(E){S[++m]=y?_r(c,E,f):Sc(E,c,f)}),S}),DU=eu(function(s,c,f){ai(s,f,c)});function lu(s,c){var f=xe(s)?Je:Gw;return f(s,le(c,3))}function IU(s,c,f,m){return s==null?[]:(xe(c)||(c=c==null?[]:[c]),f=m?t:f,xe(f)||(f=f==null?[]:[f]),Yw(s,c,f))}var FU=eu(function(s,c,f){s[f?0:1].push(c)},function(){return[[],[]]});function CU(s,c,f){var m=xe(s)?Iy:vw,y=arguments.length<3;return m(s,le(c,4),f,y,Ui)}function OU(s,c,f){var m=xe(s)?GC:vw,y=arguments.length<3;return m(s,le(c,4),f,y,Bw)}function NU(s,c){var f=xe(s)?Fi:Hw;return f(s,fu(le(c,3)))}function LU(s){var c=xe(s)?Nw:MN;return c(s)}function UU(s,c,f){(f?Qt(s,c,f):c===t)?c=1:c=be(c);var m=xe(s)?sN:AN;return m(s,c)}function VU(s){var c=xe(s)?aN:IN;return c(s)}function BU(s){if(s==null)return 0;if(cr(s))return mu(s)?vs(s):s.length;var c=Bt(s);return c==gn||c==yn?s.size:Yy(s).length}function HU(s,c,f){var m=xe(s)?Fy:FN;return f&&Qt(s,c,f)&&(c=t),m(s,le(c,3))}var WU=ke(function(s,c){if(s==null)return[];var f=c.length;return f>1&&Qt(s,c[0],c[1])?c=[]:f>2&&Qt(c[0],c[1],c[2])&&(c=[c[0]]),Yw(s,It(c,1),[])}),pu=bO||function(){return wt.Date.now()};function $U(s,c){if(typeof c!="function")throw new zr(i);return s=be(s),function(){if(--s<1)return c.apply(this,arguments)}}function j_(s,c,f){return c=f?t:c,c=s&&c==null?s.length:c,ci(s,he,t,t,t,t,c)}function z_(s,c){var f;if(typeof c!="function")throw new zr(i);return s=be(s),function(){return--s>0&&(f=c.apply(this,arguments)),s<=1&&(c=t),f}}var vx=ke(function(s,c,f){var m=b;if(f.length){var y=Oi(f,Ps(vx));m|=Z}return ci(s,m,c,f,y)}),G_=ke(function(s,c,f){var m=b|w;if(f.length){var y=Oi(f,Ps(G_));m|=Z}return ci(c,m,s,f,y)});function K_(s,c,f){c=f?t:c;var m=ci(s,M,t,t,t,t,t,c);return m.placeholder=K_.placeholder,m}function Q_(s,c,f){c=f?t:c;var m=ci(s,U,t,t,t,t,t,c);return m.placeholder=Q_.placeholder,m}function Z_(s,c,f){var m,y,S,E,R,A,B=0,H=!1,q=!1,Y=!0;if(typeof s!="function")throw new zr(i);c=Yr(c)||0,rt(f)&&(H=!!f.leading,q="maxWait"in f,S=q?St(Yr(f.maxWait)||0,c):S,Y="trailing"in f?!!f.trailing:Y);function ie(lt){var vn=m,di=y;return m=y=t,B=lt,E=s.apply(di,vn),E}function pe(lt){return B=lt,R=Ec(Pe,c),H?ie(lt):E}function Ee(lt){var vn=lt-A,di=lt-B,hE=c-vn;return q?Vt(hE,S-di):hE}function ue(lt){var vn=lt-A,di=lt-B;return A===t||vn>=c||vn<0||q&&di>=S}function Pe(){var lt=pu();if(ue(lt))return Ie(lt);R=Ec(Pe,Ee(lt))}function Ie(lt){return R=t,Y&&m?ie(lt):(m=y=t,E)}function Pr(){R!==t&&s_(R),B=0,m=A=y=R=t}function Zt(){return R===t?E:Ie(pu())}function Mr(){var lt=pu(),vn=ue(lt);if(m=arguments,y=this,A=lt,vn){if(R===t)return pe(A);if(q)return s_(R),R=Ec(Pe,c),ie(A)}return R===t&&(R=Ec(Pe,c)),E}return Mr.cancel=Pr,Mr.flush=Zt,Mr}var qU=ke(function(s,c){return Vw(s,1,c)}),jU=ke(function(s,c,f){return Vw(s,Yr(c)||0,f)});function zU(s){return ci(s,ht)}function uu(s,c){if(typeof s!="function"||c!=null&&typeof c!="function")throw new zr(i);var f=function(){var m=arguments,y=c?c.apply(this,m):m[0],S=f.cache;if(S.has(y))return S.get(y);var E=s.apply(this,m);return f.cache=S.set(y,E)||S,E};return f.cache=new(uu.Cache||si),f}uu.Cache=si;function fu(s){if(typeof s!="function")throw new zr(i);return function(){var c=arguments;switch(c.length){case 0:return!s.call(this);case 1:return!s.call(this,c[0]);case 2:return!s.call(this,c[0],c[1]);case 3:return!s.call(this,c[0],c[1],c[2])}return!s.apply(this,c)}}function GU(s){return z_(2,s)}var KU=CN(function(s,c){c=c.length==1&&xe(c[0])?Je(c[0],Er(le())):Je(It(c,1),Er(le()));var f=c.length;return ke(function(m){for(var y=-1,S=Vt(m.length,f);++y<S;)m[y]=c[y].call(this,m[y]);return _r(s,this,m)})}),bx=ke(function(s,c){var f=Oi(c,Ps(bx));return ci(s,Z,t,c,f)}),Y_=ke(function(s,c){var f=Oi(c,Ps(Y_));return ci(s,ne,t,c,f)}),QU=li(function(s,c){return ci(s,de,t,t,t,c)});function ZU(s,c){if(typeof s!="function")throw new zr(i);return c=c===t?c:be(c),ke(s,c)}function YU(s,c){if(typeof s!="function")throw new zr(i);return c=c==null?0:St(be(c),0),ke(function(f){var m=f[c],y=Hi(f,0,c);return m&&Ci(y,m),_r(s,this,y)})}function XU(s,c,f){var m=!0,y=!0;if(typeof s!="function")throw new zr(i);return rt(f)&&(m="leading"in f?!!f.leading:m,y="trailing"in f?!!f.trailing:y),Z_(s,c,{leading:m,maxWait:c,trailing:y})}function JU(s){return j_(s,1)}function e2(s,c){return bx(sx(c),s)}function t2(){if(!arguments.length)return[];var s=arguments[0];return xe(s)?s:[s]}function r2(s){return Kr(s,h)}function n2(s,c){return c=typeof c=="function"?c:t,Kr(s,h,c)}function i2(s){return Kr(s,u|h)}function o2(s,c){return c=typeof c=="function"?c:t,Kr(s,u|h,c)}function s2(s,c){return c==null||Uw(s,c,_t(c))}function Sn(s,c){return s===c||s!==s&&c!==c}var a2=iu(Ky),c2=iu(function(s,c){return s>=c}),Co=qw(function(){return arguments}())?qw:function(s){return ot(s)&&qe.call(s,"callee")&&!Aw.call(s,"callee")},xe=L.isArray,l2=uw?Er(uw):yN;function cr(s){return s!=null&&du(s.length)&&!ui(s)}function ct(s){return ot(s)&&cr(s)}function p2(s){return s===!0||s===!1||ot(s)&&Kt(s)==hn}var Wi=_O||Fx,u2=fw?Er(fw):xN;function f2(s){return ot(s)&&s.nodeType===1&&!Rc(s)}function d2(s){if(s==null)return!0;if(cr(s)&&(xe(s)||typeof s=="string"||typeof s.splice=="function"||Wi(s)||Ms(s)||Co(s)))return!s.length;var c=Bt(s);if(c==gn||c==yn)return!s.size;if(_c(s))return!Yy(s).length;for(var f in s)if(qe.call(s,f))return!1;return!0}function m2(s,c){return vc(s,c)}function h2(s,c,f){f=typeof f=="function"?f:t;var m=f?f(s,c):t;return m===t?vc(s,c,t,f):!!m}function wx(s){if(!ot(s))return!1;var c=Kt(s);return c==ni||c==Eo||typeof s.message=="string"&&typeof s.name=="string"&&!Rc(s)}function g2(s){return typeof s=="number"&&Iw(s)}function ui(s){if(!rt(s))return!1;var c=Kt(s);return c==gs||c==Vb||c==wr||c==B1}function X_(s){return typeof s=="number"&&s==be(s)}function du(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=Q}function rt(s){var c=typeof s;return s!=null&&(c=="object"||c=="function")}function ot(s){return s!=null&&typeof s=="object"}var J_=dw?Er(dw):SN;function y2(s,c){return s===c||Zy(s,c,dx(c))}function x2(s,c,f){return f=typeof f=="function"?f:t,Zy(s,c,dx(c),f)}function T2(s){return eE(s)&&s!=+s}function S2(s){if(nL(s))throw new ge(n);return jw(s)}function v2(s){return s===null}function b2(s){return s==null}function eE(s){return typeof s=="number"||ot(s)&&Kt(s)==ac}function Rc(s){if(!ot(s)||Kt(s)!=ii)return!1;var c=Bp(s);if(c===null)return!0;var f=qe.call(c,"constructor")&&c.constructor;return typeof f=="function"&&f instanceof f&&Np.call(f)==xO}var _x=mw?Er(mw):vN;function w2(s){return X_(s)&&s>=-Q&&s<=Q}var tE=hw?Er(hw):bN;function mu(s){return typeof s=="string"||!xe(s)&&ot(s)&&Kt(s)==lc}function kr(s){return typeof s=="symbol"||ot(s)&&Kt(s)==kp}var Ms=gw?Er(gw):wN;function _2(s){return s===t}function E2(s){return ot(s)&&Bt(s)==pc}function R2(s){return ot(s)&&Kt(s)==W1}var k2=iu(Xy),P2=iu(function(s,c){return s<=c});function rE(s){if(!s)return[];if(cr(s))return mu(s)?xn(s):ar(s);if(dc&&s[dc])return sO(s[dc]());var c=Bt(s),f=c==gn?Vy:c==yn?Fp:As;return f(s)}function fi(s){if(!s)return s===0?s:0;if(s=Yr(s),s===K||s===-K){var c=s<0?-1:1;return c*te}return s===s?s:0}function be(s){var c=fi(s),f=c%1;return c===c?f?c-f:c:0}function nE(s){return s?Ao(be(s),0,re):0}function Yr(s){if(typeof s=="number")return s;if(kr(s))return me;if(rt(s)){var c=typeof s.valueOf=="function"?s.valueOf():s;s=rt(c)?c+"":c}if(typeof s!="string")return s===0?s:+s;s=bw(s);var f=lC.test(s);return f||uC.test(s)?$C(s.slice(2),f?2:8):cC.test(s)?me:+s}function iE(s){return Ln(s,lr(s))}function M2(s){return s?Ao(be(s),-Q,Q):s===0?s:0}function We(s){return s==null?"":Rr(s)}var A2=Rs(function(s,c){if(_c(c)||cr(c)){Ln(c,_t(c),s);return}for(var f in c)qe.call(c,f)&&xc(s,f,c[f])}),oE=Rs(function(s,c){Ln(c,lr(c),s)}),hu=Rs(function(s,c,f,m){Ln(c,lr(c),s,m)}),D2=Rs(function(s,c,f,m){Ln(c,_t(c),s,m)}),I2=li(jy);function F2(s,c){var f=Es(s);return c==null?f:Lw(f,c)}var C2=ke(function(s,c){s=ze(s);var f=-1,m=c.length,y=m>2?c[2]:t;for(y&&Qt(c[0],c[1],y)&&(m=1);++f<m;)for(var S=c[f],E=lr(S),R=-1,A=E.length;++R<A;){var B=E[R],H=s[B];(H===t||Sn(H,bs[B])&&!qe.call(s,B))&&(s[B]=S[B])}return s}),O2=ke(function(s){return s.push(t,b_),_r(sE,t,s)});function N2(s,c){return xw(s,le(c,3),Nn)}function L2(s,c){return xw(s,le(c,3),Gy)}function U2(s,c){return s==null?s:zy(s,le(c,3),lr)}function V2(s,c){return s==null?s:Ww(s,le(c,3),lr)}function B2(s,c){return s&&Nn(s,le(c,3))}function H2(s,c){return s&&Gy(s,le(c,3))}function W2(s){return s==null?[]:Zp(s,_t(s))}function $2(s){return s==null?[]:Zp(s,lr(s))}function Ex(s,c,f){var m=s==null?t:Do(s,c);return m===t?f:m}function q2(s,c){return s!=null&&E_(s,c,dN)}function Rx(s,c){return s!=null&&E_(s,c,mN)}var j2=y_(function(s,c,f){c!=null&&typeof c.toString!="function"&&(c=Lp.call(c)),s[c]=f},Px(pr)),z2=y_(function(s,c,f){c!=null&&typeof c.toString!="function"&&(c=Lp.call(c)),qe.call(s,c)?s[c].push(f):s[c]=[f]},le),G2=ke(Sc);function _t(s){return cr(s)?Ow(s):Yy(s)}function lr(s){return cr(s)?Ow(s,!0):_N(s)}function K2(s,c){var f={};return c=le(c,3),Nn(s,function(m,y,S){ai(f,c(m,y,S),m)}),f}function Q2(s,c){var f={};return c=le(c,3),Nn(s,function(m,y,S){ai(f,y,c(m,y,S))}),f}var Z2=Rs(function(s,c,f){Yp(s,c,f)}),sE=Rs(function(s,c,f,m){Yp(s,c,f,m)}),Y2=li(function(s,c){var f={};if(s==null)return f;var m=!1;c=Je(c,function(S){return S=Bi(S,s),m||(m=S.length>1),S}),Ln(s,ux(s),f),m&&(f=Kr(f,u|d|h,jN));for(var y=c.length;y--;)nx(f,c[y]);return f});function X2(s,c){return aE(s,fu(le(c)))}var J2=li(function(s,c){return s==null?{}:RN(s,c)});function aE(s,c){if(s==null)return{};var f=Je(ux(s),function(m){return[m]});return c=le(c),Xw(s,f,function(m,y){return c(m,y[0])})}function eV(s,c,f){c=Bi(c,s);var m=-1,y=c.length;for(y||(y=1,s=t);++m<y;){var S=s==null?t:s[Un(c[m])];S===t&&(m=y,S=f),s=ui(S)?S.call(s):S}return s}function tV(s,c,f){return s==null?s:bc(s,c,f)}function rV(s,c,f,m){return m=typeof m=="function"?m:t,s==null?s:bc(s,c,f,m)}var cE=S_(_t),lE=S_(lr);function nV(s,c,f){var m=xe(s),y=m||Wi(s)||Ms(s);if(c=le(c,4),f==null){var S=s&&s.constructor;y?f=m?new S:[]:rt(s)?f=ui(S)?Es(Bp(s)):{}:f={}}return(y?jr:Nn)(s,function(E,R,A){return c(f,E,R,A)}),f}function iV(s,c){return s==null?!0:nx(s,c)}function oV(s,c,f){return s==null?s:n_(s,c,sx(f))}function sV(s,c,f,m){return m=typeof m=="function"?m:t,s==null?s:n_(s,c,sx(f),m)}function As(s){return s==null?[]:Uy(s,_t(s))}function aV(s){return s==null?[]:Uy(s,lr(s))}function cV(s,c,f){return f===t&&(f=c,c=t),f!==t&&(f=Yr(f),f=f===f?f:0),c!==t&&(c=Yr(c),c=c===c?c:0),Ao(Yr(s),c,f)}function lV(s,c,f){return c=fi(c),f===t?(f=c,c=0):f=fi(f),s=Yr(s),hN(s,c,f)}function pV(s,c,f){if(f&&typeof f!="boolean"&&Qt(s,c,f)&&(c=f=t),f===t&&(typeof c=="boolean"?(f=c,c=t):typeof s=="boolean"&&(f=s,s=t)),s===t&&c===t?(s=0,c=1):(s=fi(s),c===t?(c=s,s=0):c=fi(c)),s>c){var m=s;s=c,c=m}if(f||s%1||c%1){var y=Fw();return Vt(s+y*(c-s+WC("1e-"+((y+"").length-1))),c)}return ex(s,c)}var uV=ks(function(s,c,f){return c=c.toLowerCase(),s+(f?pE(c):c)});function pE(s){return kx(We(s).toLowerCase())}function uE(s){return s=We(s),s&&s.replace(dC,tO).replace(IC,"")}function fV(s,c,f){s=We(s),c=Rr(c);var m=s.length;f=f===t?m:Ao(be(f),0,m);var y=f;return f-=c.length,f>=0&&s.slice(f,y)==c}function dV(s){return s=We(s),s&&G1.test(s)?s.replace(Wb,rO):s}function mV(s){return s=We(s),s&&J1.test(s)?s.replace(by,"\\$&"):s}var hV=ks(function(s,c,f){return s+(f?"-":"")+c.toLowerCase()}),gV=ks(function(s,c,f){return s+(f?" ":"")+c.toLowerCase()}),yV=m_("toLowerCase");function xV(s,c,f){s=We(s),c=be(c);var m=c?vs(s):0;if(!c||m>=c)return s;var y=(c-m)/2;return nu(qp(y),f)+s+nu($p(y),f)}function TV(s,c,f){s=We(s),c=be(c);var m=c?vs(s):0;return c&&m<c?s+nu(c-m,f):s}function SV(s,c,f){s=We(s),c=be(c);var m=c?vs(s):0;return c&&m<c?nu(c-m,f)+s:s}function vV(s,c,f){return f||c==null?c=0:c&&(c=+c),PO(We(s).replace(wy,""),c||0)}function bV(s,c,f){return(f?Qt(s,c,f):c===t)?c=1:c=be(c),tx(We(s),c)}function wV(){var s=arguments,c=We(s[0]);return s.length<3?c:c.replace(s[1],s[2])}var _V=ks(function(s,c,f){return s+(f?"_":"")+c.toLowerCase()});function EV(s,c,f){return f&&typeof f!="number"&&Qt(s,c,f)&&(c=f=t),f=f===t?re:f>>>0,f?(s=We(s),s&&(typeof c=="string"||c!=null&&!_x(c))&&(c=Rr(c),!c&&Ss(s))?Hi(xn(s),0,f):s.split(c,f)):[]}var RV=ks(function(s,c,f){return s+(f?" ":"")+kx(c)});function kV(s,c,f){return s=We(s),f=f==null?0:Ao(be(f),0,s.length),c=Rr(c),s.slice(f,f+c.length)==c}function PV(s,c,f){var m=T.templateSettings;f&&Qt(s,c,f)&&(c=t),s=We(s),c=hu({},c,m,v_);var y=hu({},c.imports,m.imports,v_),S=_t(y),E=Uy(y,S),R,A,B=0,H=c.interpolate||Pp,q="__p += '",Y=By((c.escape||Pp).source+"|"+H.source+"|"+(H===$b?aC:Pp).source+"|"+(c.evaluate||Pp).source+"|$","g"),ie="//# sourceURL="+(qe.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++LC+"]")+`
`;s.replace(Y,function(ue,Pe,Ie,Pr,Zt,Mr){return Ie||(Ie=Pr),q+=s.slice(B,Mr).replace(mC,nO),Pe&&(R=!0,q+=`' +
__e(`+Pe+`) +
'`),Zt&&(A=!0,q+=`';
`+Zt+`;
__p += '`),Ie&&(q+=`' +
((__t = (`+Ie+`)) == null ? '' : __t) +
'`),B=Mr+ue.length,ue}),q+=`';
`;var pe=qe.call(c,"variable")&&c.variable;if(!pe)q=`with (obj) {
`+q+`
}
`;else if(oC.test(pe))throw new ge(o);q=(A?q.replace($1,""):q).replace(q1,"$1").replace(j1,"$1;"),q="function("+(pe||"obj")+`) {
`+(pe?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(R?", __e = _.escape":"")+(A?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+q+`return __p
}`;var Ee=dE(function(){return Ve(S,ie+"return "+q).apply(t,E)});if(Ee.source=q,wx(Ee))throw Ee;return Ee}function MV(s){return We(s).toLowerCase()}function AV(s){return We(s).toUpperCase()}function DV(s,c,f){if(s=We(s),s&&(f||c===t))return bw(s);if(!s||!(c=Rr(c)))return s;var m=xn(s),y=xn(c),S=ww(m,y),E=_w(m,y)+1;return Hi(m,S,E).join("")}function IV(s,c,f){if(s=We(s),s&&(f||c===t))return s.slice(0,Rw(s)+1);if(!s||!(c=Rr(c)))return s;var m=xn(s),y=_w(m,xn(c))+1;return Hi(m,0,y).join("")}function FV(s,c,f){if(s=We(s),s&&(f||c===t))return s.replace(wy,"");if(!s||!(c=Rr(c)))return s;var m=xn(s),y=ww(m,xn(c));return Hi(m,y).join("")}function CV(s,c){var f=Dt,m=it;if(rt(c)){var y="separator"in c?c.separator:y;f="length"in c?be(c.length):f,m="omission"in c?Rr(c.omission):m}s=We(s);var S=s.length;if(Ss(s)){var E=xn(s);S=E.length}if(f>=S)return s;var R=f-vs(m);if(R<1)return m;var A=E?Hi(E,0,R).join(""):s.slice(0,R);if(y===t)return A+m;if(E&&(R+=A.length-R),_x(y)){if(s.slice(R).search(y)){var B,H=A;for(y.global||(y=By(y.source,We(qb.exec(y))+"g")),y.lastIndex=0;B=y.exec(H);)var q=B.index;A=A.slice(0,q===t?R:q)}}else if(s.indexOf(Rr(y),R)!=R){var Y=A.lastIndexOf(y);Y>-1&&(A=A.slice(0,Y))}return A+m}function OV(s){return s=We(s),s&&z1.test(s)?s.replace(Hb,pO):s}var NV=ks(function(s,c,f){return s+(f?" ":"")+c.toUpperCase()}),kx=m_("toUpperCase");function fE(s,c,f){return s=We(s),c=f?t:c,c===t?oO(s)?dO(s):ZC(s):s.match(c)||[]}var dE=ke(function(s,c){try{return _r(s,t,c)}catch(f){return wx(f)?f:new ge(f)}}),LV=li(function(s,c){return jr(c,function(f){f=Un(f),ai(s,f,vx(s[f],s))}),s});function UV(s){var c=s==null?0:s.length,f=le();return s=c?Je(s,function(m){if(typeof m[1]!="function")throw new zr(i);return[f(m[0]),m[1]]}):[],ke(function(m){for(var y=-1;++y<c;){var S=s[y];if(_r(S[0],this,m))return _r(S[1],this,m)}})}function VV(s){return pN(Kr(s,u))}function Px(s){return function(){return s}}function BV(s,c){return s==null||s!==s?c:s}var HV=g_(),WV=g_(!0);function pr(s){return s}function Mx(s){return zw(typeof s=="function"?s:Kr(s,u))}function $V(s){return Kw(Kr(s,u))}function qV(s,c){return Qw(s,Kr(c,u))}var jV=ke(function(s,c){return function(f){return Sc(f,s,c)}}),zV=ke(function(s,c){return function(f){return Sc(s,f,c)}});function Ax(s,c,f){var m=_t(c),y=Zp(c,m);f==null&&!(rt(c)&&(y.length||!m.length))&&(f=c,c=s,s=this,y=Zp(c,_t(c)));var S=!(rt(f)&&"chain"in f)||!!f.chain,E=ui(s);return jr(y,function(R){var A=c[R];s[R]=A,E&&(s.prototype[R]=function(){var B=this.__chain__;if(S||B){var H=s(this.__wrapped__),q=H.__actions__=ar(this.__actions__);return q.push({func:A,args:arguments,thisArg:s}),H.__chain__=B,H}return A.apply(s,Ci([this.value()],arguments))})}),s}function GV(){return wt._===this&&(wt._=TO),this}function Dx(){}function KV(s){return s=be(s),ke(function(c){return Zw(c,s)})}var QV=cx(Je),ZV=cx(yw),YV=cx(Fy);function mE(s){return hx(s)?Cy(Un(s)):kN(s)}function XV(s){return function(c){return s==null?t:Do(s,c)}}var JV=x_(),eB=x_(!0);function Ix(){return[]}function Fx(){return!1}function tB(){return{}}function rB(){return""}function nB(){return!0}function iB(s,c){if(s=be(s),s<1||s>Q)return[];var f=re,m=Vt(s,re);c=le(c),s-=re;for(var y=Ly(m,c);++f<s;)c(f);return y}function oB(s){return xe(s)?Je(s,Un):kr(s)?[s]:ar(C_(We(s)))}function sB(s){var c=++yO;return We(s)+c}var aB=ru(function(s,c){return s+c},0),cB=lx("ceil"),lB=ru(function(s,c){return s/c},1),pB=lx("floor");function uB(s){return s&&s.length?Qp(s,pr,Ky):t}function fB(s,c){return s&&s.length?Qp(s,le(c,2),Ky):t}function dB(s){return Sw(s,pr)}function mB(s,c){return Sw(s,le(c,2))}function hB(s){return s&&s.length?Qp(s,pr,Xy):t}function gB(s,c){return s&&s.length?Qp(s,le(c,2),Xy):t}var yB=ru(function(s,c){return s*c},1),xB=lx("round"),TB=ru(function(s,c){return s-c},0);function SB(s){return s&&s.length?Ny(s,pr):0}function vB(s,c){return s&&s.length?Ny(s,le(c,2)):0}return T.after=$U,T.ary=j_,T.assign=A2,T.assignIn=oE,T.assignInWith=hu,T.assignWith=D2,T.at=I2,T.before=z_,T.bind=vx,T.bindAll=LV,T.bindKey=G_,T.castArray=t2,T.chain=W_,T.chunk=pL,T.compact=uL,T.concat=fL,T.cond=UV,T.conforms=VV,T.constant=Px,T.countBy=SU,T.create=F2,T.curry=K_,T.curryRight=Q_,T.debounce=Z_,T.defaults=C2,T.defaultsDeep=O2,T.defer=qU,T.delay=jU,T.difference=dL,T.differenceBy=mL,T.differenceWith=hL,T.drop=gL,T.dropRight=yL,T.dropRightWhile=xL,T.dropWhile=TL,T.fill=SL,T.filter=bU,T.flatMap=EU,T.flatMapDeep=RU,T.flatMapDepth=kU,T.flatten=U_,T.flattenDeep=vL,T.flattenDepth=bL,T.flip=zU,T.flow=HV,T.flowRight=WV,T.fromPairs=wL,T.functions=W2,T.functionsIn=$2,T.groupBy=PU,T.initial=EL,T.intersection=RL,T.intersectionBy=kL,T.intersectionWith=PL,T.invert=j2,T.invertBy=z2,T.invokeMap=AU,T.iteratee=Mx,T.keyBy=DU,T.keys=_t,T.keysIn=lr,T.map=lu,T.mapKeys=K2,T.mapValues=Q2,T.matches=$V,T.matchesProperty=qV,T.memoize=uu,T.merge=Z2,T.mergeWith=sE,T.method=jV,T.methodOf=zV,T.mixin=Ax,T.negate=fu,T.nthArg=KV,T.omit=Y2,T.omitBy=X2,T.once=GU,T.orderBy=IU,T.over=QV,T.overArgs=KU,T.overEvery=ZV,T.overSome=YV,T.partial=bx,T.partialRight=Y_,T.partition=FU,T.pick=J2,T.pickBy=aE,T.property=mE,T.propertyOf=XV,T.pull=IL,T.pullAll=B_,T.pullAllBy=FL,T.pullAllWith=CL,T.pullAt=OL,T.range=JV,T.rangeRight=eB,T.rearg=QU,T.reject=NU,T.remove=NL,T.rest=ZU,T.reverse=Tx,T.sampleSize=UU,T.set=tV,T.setWith=rV,T.shuffle=VU,T.slice=LL,T.sortBy=WU,T.sortedUniq=qL,T.sortedUniqBy=jL,T.split=EV,T.spread=YU,T.tail=zL,T.take=GL,T.takeRight=KL,T.takeRightWhile=QL,T.takeWhile=ZL,T.tap=uU,T.throttle=XU,T.thru=cu,T.toArray=rE,T.toPairs=cE,T.toPairsIn=lE,T.toPath=oB,T.toPlainObject=iE,T.transform=nV,T.unary=JU,T.union=YL,T.unionBy=XL,T.unionWith=JL,T.uniq=eU,T.uniqBy=tU,T.uniqWith=rU,T.unset=iV,T.unzip=Sx,T.unzipWith=H_,T.update=oV,T.updateWith=sV,T.values=As,T.valuesIn=aV,T.without=nU,T.words=fE,T.wrap=e2,T.xor=iU,T.xorBy=oU,T.xorWith=sU,T.zip=aU,T.zipObject=cU,T.zipObjectDeep=lU,T.zipWith=pU,T.entries=cE,T.entriesIn=lE,T.extend=oE,T.extendWith=hu,Ax(T,T),T.add=aB,T.attempt=dE,T.camelCase=uV,T.capitalize=pE,T.ceil=cB,T.clamp=cV,T.clone=r2,T.cloneDeep=i2,T.cloneDeepWith=o2,T.cloneWith=n2,T.conformsTo=s2,T.deburr=uE,T.defaultTo=BV,T.divide=lB,T.endsWith=fV,T.eq=Sn,T.escape=dV,T.escapeRegExp=mV,T.every=vU,T.find=wU,T.findIndex=N_,T.findKey=N2,T.findLast=_U,T.findLastIndex=L_,T.findLastKey=L2,T.floor=pB,T.forEach=$_,T.forEachRight=q_,T.forIn=U2,T.forInRight=V2,T.forOwn=B2,T.forOwnRight=H2,T.get=Ex,T.gt=a2,T.gte=c2,T.has=q2,T.hasIn=Rx,T.head=V_,T.identity=pr,T.includes=MU,T.indexOf=_L,T.inRange=lV,T.invoke=G2,T.isArguments=Co,T.isArray=xe,T.isArrayBuffer=l2,T.isArrayLike=cr,T.isArrayLikeObject=ct,T.isBoolean=p2,T.isBuffer=Wi,T.isDate=u2,T.isElement=f2,T.isEmpty=d2,T.isEqual=m2,T.isEqualWith=h2,T.isError=wx,T.isFinite=g2,T.isFunction=ui,T.isInteger=X_,T.isLength=du,T.isMap=J_,T.isMatch=y2,T.isMatchWith=x2,T.isNaN=T2,T.isNative=S2,T.isNil=b2,T.isNull=v2,T.isNumber=eE,T.isObject=rt,T.isObjectLike=ot,T.isPlainObject=Rc,T.isRegExp=_x,T.isSafeInteger=w2,T.isSet=tE,T.isString=mu,T.isSymbol=kr,T.isTypedArray=Ms,T.isUndefined=_2,T.isWeakMap=E2,T.isWeakSet=R2,T.join=ML,T.kebabCase=hV,T.last=Zr,T.lastIndexOf=AL,T.lowerCase=gV,T.lowerFirst=yV,T.lt=k2,T.lte=P2,T.max=uB,T.maxBy=fB,T.mean=dB,T.meanBy=mB,T.min=hB,T.minBy=gB,T.stubArray=Ix,T.stubFalse=Fx,T.stubObject=tB,T.stubString=rB,T.stubTrue=nB,T.multiply=yB,T.nth=DL,T.noConflict=GV,T.noop=Dx,T.now=pu,T.pad=xV,T.padEnd=TV,T.padStart=SV,T.parseInt=vV,T.random=pV,T.reduce=CU,T.reduceRight=OU,T.repeat=bV,T.replace=wV,T.result=eV,T.round=xB,T.runInContext=k,T.sample=LU,T.size=BU,T.snakeCase=_V,T.some=HU,T.sortedIndex=UL,T.sortedIndexBy=VL,T.sortedIndexOf=BL,T.sortedLastIndex=HL,T.sortedLastIndexBy=WL,T.sortedLastIndexOf=$L,T.startCase=RV,T.startsWith=kV,T.subtract=TB,T.sum=SB,T.sumBy=vB,T.template=PV,T.times=iB,T.toFinite=fi,T.toInteger=be,T.toLength=nE,T.toLower=MV,T.toNumber=Yr,T.toSafeInteger=M2,T.toString=We,T.toUpper=AV,T.trim=DV,T.trimEnd=IV,T.trimStart=FV,T.truncate=CV,T.unescape=OV,T.uniqueId=sB,T.upperCase=NV,T.upperFirst=kx,T.each=$_,T.eachRight=q_,T.first=V_,Ax(T,function(){var s={};return Nn(T,function(c,f){qe.call(T.prototype,f)||(s[f]=c)}),s}(),{chain:!1}),T.VERSION=e,jr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(s){T[s].placeholder=T}),jr(["drop","take"],function(s,c){Ae.prototype[s]=function(f){f=f===t?1:St(be(f),0);var m=this.__filtered__&&!c?new Ae(this):this.clone();return m.__filtered__?m.__takeCount__=Vt(f,m.__takeCount__):m.__views__.push({size:Vt(f,re),type:s+(m.__dir__<0?"Right":"")}),m},Ae.prototype[s+"Right"]=function(f){return this.reverse()[s](f).reverse()}}),jr(["filter","map","takeWhile"],function(s,c){var f=c+1,m=f==I||f==j;Ae.prototype[s]=function(y){var S=this.clone();return S.__iteratees__.push({iteratee:le(y,3),type:f}),S.__filtered__=S.__filtered__||m,S}}),jr(["head","last"],function(s,c){var f="take"+(c?"Right":"");Ae.prototype[s]=function(){return this[f](1).value()[0]}}),jr(["initial","tail"],function(s,c){var f="drop"+(c?"":"Right");Ae.prototype[s]=function(){return this.__filtered__?new Ae(this):this[f](1)}}),Ae.prototype.compact=function(){return this.filter(pr)},Ae.prototype.find=function(s){return this.filter(s).head()},Ae.prototype.findLast=function(s){return this.reverse().find(s)},Ae.prototype.invokeMap=ke(function(s,c){return typeof s=="function"?new Ae(this):this.map(function(f){return Sc(f,s,c)})}),Ae.prototype.reject=function(s){return this.filter(fu(le(s)))},Ae.prototype.slice=function(s,c){s=be(s);var f=this;return f.__filtered__&&(s>0||c<0)?new Ae(f):(s<0?f=f.takeRight(-s):s&&(f=f.drop(s)),c!==t&&(c=be(c),f=c<0?f.dropRight(-c):f.take(c-s)),f)},Ae.prototype.takeRightWhile=function(s){return this.reverse().takeWhile(s).reverse()},Ae.prototype.toArray=function(){return this.take(re)},Nn(Ae.prototype,function(s,c){var f=/^(?:filter|find|map|reject)|While$/.test(c),m=/^(?:head|last)$/.test(c),y=T[m?"take"+(c=="last"?"Right":""):c],S=m||/^find/.test(c);y&&(T.prototype[c]=function(){var E=this.__wrapped__,R=m?[1]:arguments,A=E instanceof Ae,B=R[0],H=A||xe(E),q=function(Pe){var Ie=y.apply(T,Ci([Pe],R));return m&&Y?Ie[0]:Ie};H&&f&&typeof B=="function"&&B.length!=1&&(A=H=!1);var Y=this.__chain__,ie=!!this.__actions__.length,pe=S&&!Y,Ee=A&&!ie;if(!S&&H){E=Ee?E:new Ae(this);var ue=s.apply(E,R);return ue.__actions__.push({func:cu,args:[q],thisArg:t}),new Gr(ue,Y)}return pe&&Ee?s.apply(this,R):(ue=this.thru(q),pe?m?ue.value()[0]:ue.value():ue)})}),jr(["pop","push","shift","sort","splice","unshift"],function(s){var c=Cp[s],f=/^(?:push|sort|unshift)$/.test(s)?"tap":"thru",m=/^(?:pop|shift)$/.test(s);T.prototype[s]=function(){var y=arguments;if(m&&!this.__chain__){var S=this.value();return c.apply(xe(S)?S:[],y)}return this[f](function(E){return c.apply(xe(E)?E:[],y)})}}),Nn(Ae.prototype,function(s,c){var f=T[c];if(f){var m=f.name+"";qe.call(_s,m)||(_s[m]=[]),_s[m].push({name:c,func:f})}}),_s[tu(t,w).name]=[{name:"wrapper",func:t}],Ae.prototype.clone=OO,Ae.prototype.reverse=NO,Ae.prototype.value=LO,T.prototype.at=fU,T.prototype.chain=dU,T.prototype.commit=mU,T.prototype.next=hU,T.prototype.plant=yU,T.prototype.reverse=xU,T.prototype.toJSON=T.prototype.valueOf=T.prototype.value=TU,T.prototype.first=T.prototype.head,dc&&(T.prototype[dc]=gU),T},Ni=mO();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(wt._=Ni,define(function(){return Ni})):Ro?((Ro.exports=Ni)._=Ni,My._=Ni):wt._=Ni}).call(za)});var VI=st((eOe,UI)=>{"use strict";UI.exports=NI;function NI(t,e,r){t instanceof RegExp&&(t=OI(t,r)),e instanceof RegExp&&(e=OI(e,r));var n=LI(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}function OI(t,e){var r=e.match(t);return r?r[0]:null}NI.range=LI;function LI(t,e,r){var n,i,o,a,l,p=r.indexOf(t),u=r.indexOf(e,p+1),d=p;if(p>=0&&u>0){if(t===e)return[p,u];for(n=[],o=r.length;d>=0&&!l;)d==p?(n.push(d),p=r.indexOf(t,d+1)):n.length==1?l=[n.pop(),u]:(i=n.pop(),i<o&&(o=i,a=u),u=r.indexOf(e,d+1)),d=p<u&&p>=0?p:u;n.length&&(l=[o,a])}return l}});var GI=st((tOe,zI)=>{var BI=VI();zI.exports=hQ;var HI="\0SLASH"+Math.random()+"\0",WI="\0OPEN"+Math.random()+"\0",Tv="\0CLOSE"+Math.random()+"\0",$I="\0COMMA"+Math.random()+"\0",qI="\0PERIOD"+Math.random()+"\0";function xv(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function dQ(t){return t.split("\\\\").join(HI).split("\\{").join(WI).split("\\}").join(Tv).split("\\,").join($I).split("\\.").join(qI)}function mQ(t){return t.split(HI).join("\\").split(WI).join("{").split(Tv).join("}").split($I).join(",").split(qI).join(".")}function jI(t){if(!t)return[""];var e=[],r=BI("{","}",t);if(!r)return t.split(",");var n=r.pre,i=r.body,o=r.post,a=n.split(",");a[a.length-1]+="{"+i+"}";var l=jI(o);return o.length&&(a[a.length-1]+=l.shift(),a.push.apply(a,l)),e.push.apply(e,a),e}function hQ(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),tp(dQ(t),!0).map(mQ)):[]}function gQ(t){return"{"+t+"}"}function yQ(t){return/^-?0\d/.test(t)}function xQ(t,e){return t<=e}function TQ(t,e){return t>=e}function tp(t,e){var r=[],n=BI("{","}",t);if(!n)return[t];var i=n.pre,o=n.post.length?tp(n.post,!1):[""];if(/\$$/.test(n.pre))for(var a=0;a<o.length;a++){var l=i+"{"+n.body+"}"+o[a];r.push(l)}else{var p=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),u=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),d=p||u,h=n.body.indexOf(",")>=0;if(!d&&!h)return n.post.match(/,.*\}/)?(t=n.pre+"{"+n.body+Tv+n.post,tp(t)):[t];var g;if(d)g=n.body.split(/\.\./);else if(g=jI(n.body),g.length===1&&(g=tp(g[0],!1).map(gQ),g.length===1))return o.map(function(N){return n.pre+g[0]+N});var x;if(d){var b=xv(g[0]),w=xv(g[1]),F=Math.max(g[0].length,g[1].length),M=g.length==3?Math.abs(xv(g[2])):1,U=xQ,Z=w<b;Z&&(M*=-1,U=TQ);var ne=g.some(yQ);x=[];for(var he=b;U(he,w);he+=M){var de;if(u)de=String.fromCharCode(he),de==="\\"&&(de="");else if(de=String(he),ne){var ht=F-de.length;if(ht>0){var Dt=new Array(ht+1).join("0");he<0?de="-"+Dt+de.slice(1):de=Dt+de}}x.push(de)}}else{x=[];for(var it=0;it<g.length;it++)x.push.apply(x,tp(g[it],!1))}for(var it=0;it<x.length;it++)for(var a=0;a<o.length;a++){var l=i+x[it]+o[a];(!e||d||l)&&r.push(l)}}return r}});var oY={};kB(oY,{default:()=>U1});module.exports=PB(oY);var Cx="cursorless.command",yu=class{constructor(e){this.baseTitle=e}get title(){return`Cursorless: ${this.baseTitle}`}},pt=class extends yu{constructor(){super(...arguments);this.isVisible=!1}},gt=class extends yu{constructor(){super(...arguments);this.isVisible=!0}};var aY={"cursorless.toggleDecorations":new gt("Toggle decorations"),"cursorless.recomputeDecorationStyles":new gt("Recompute decoration styles"),"cursorless.recordTestCase":new gt("Record test case"),"cursorless.recordOneTestCaseThenPause":new gt("Record one test case, then pause"),"cursorless.pauseRecording":new gt("Pause test case recording"),"cursorless.resumeRecording":new gt("Resume test case recording"),"cursorless.recordScopeTests.showUnimplementedFacets":new gt("Bulk record unimplemented scope facets"),"cursorless.recordScopeTests.saveActiveDocument":new gt("Bulk save scope tests for the active document"),"cursorless.showDocumentation":new gt("Show documentation"),"cursorless.showScopeVisualizer":new gt("Show the scope visualizer"),"cursorless.hideScopeVisualizer":new gt("Hide the scope visualizer"),"cursorless.analyzeCommandHistory":new gt("Analyze collected command history"),"cursorless.tutorial.start":new pt("Start a tutorial"),"cursorless.tutorial.next":new gt("Tutorial next"),"cursorless.tutorial.previous":new gt("Tutorial previous"),"cursorless.tutorial.restart":new gt("Tutorial restart"),"cursorless.tutorial.resume":new gt("Tutorial resume"),"cursorless.tutorial.list":new gt("Tutorial list"),"cursorless.documentationOpened":new pt("Used by talon to notify us that the docs have been opened; for use with tutorial"),"cursorless.command":new pt("The core cursorless command"),"cursorless.repeatPreviousCommand":new gt("Repeat the previous Cursorless command"),"cursorless.showQuickPick":new pt("Pop up a quick pick of all cursorless commands"),"cursorless.showCheatsheet":new pt("Display the cursorless cheatsheet"),"cursorless.internal.updateCheatsheetDefaults":new pt("Update the default values of the cheatsheet payload used on the website and for local development. Be sure to run this on stock community and cursorless."),"cursorless.private.logQuickActions":new pt("Log the quick actions available at the current cursor position"),"cursorless.takeSnapshot":new pt("Take a snapshot of the current editor state"),"cursorless.keyboard.escape":new pt("Should be mapped to the escape key when using cursorless keyboard. By default, exits modal keyboard mode, but changes behaviour when Cursorless is expecting a continuation keystroke.  For example, when you type a color and Cursorless is waiting for a character, it cancels the color and switches back to modal mode."),"cursorless.keyboard.targeted.targetHat":new pt("Sets the keyboard target to the given hat"),"cursorless.keyboard.targeted.targetScope":new pt("Sets the keyboard target to the scope containing the current target"),"cursorless.keyboard.targeted.targetSelection":new pt("Sets the keyboard target to the current selection"),"cursorless.keyboard.targeted.clearTarget":new pt("Clears the current keyboard target"),"cursorless.keyboard.targeted.runActionOnTarget":new pt("Run the given action on the current keyboard target"),"cursorless.keyboard.modal.modeOn":new pt("Turn on the cursorless modal mode"),"cursorless.keyboard.modal.modeOff":new pt("Turn off the cursorless modal mode"),"cursorless.keyboard.modal.modeToggle":new pt("Toggle the cursorless modal mode"),"cursorless.keyboard.undoTarget":new pt("Undo keyboard targeting changes"),"cursorless.keyboard.redoTarget":new pt("Redo keyboard targeting changes")};var xu=class{constructor(e,r){this.callback=e;this.debounceDelayMs=r;this.timeoutHandle=null;this.run=this.run.bind(this)}run(){this.timeoutHandle!=null&&clearTimeout(this.timeoutHandle),this.timeoutHandle=setTimeout(()=>{this.callback(),this.timeoutHandle=null},this.debounceDelayMs)}dispose(){this.timeoutHandle!=null&&clearTimeout(this.timeoutHandle)}};var Tu=class extends Error{constructor(e){super(`Language '${e}' is not implemented yet; See https://www.cursorless.org/docs/contributing/adding-a-new-language/`),this.name="UnsupportedLanguageError"}};var Su=class extends Error{constructor(){super("Cursorless Talon version is ahead of Cursorless VSCode extension version. Please update Cursorless VSCode.")}},Et=class extends Error{constructor(e){super(`Couldn't find containing ${e}.`),this.name="NoContainingScopeError"}};var vu=class{constructor(){this.signals={prePhrase:{getVersion:async()=>null}}}async getFocusedElementType(){return this.focusedElementType}setFocusedElementType(e){this.focusedElementType=e}};var MB=typeof global=="object"&&global&&global.Object===Object&&global,bu=MB;var AB=typeof self=="object"&&self&&self.Object===Object&&self,DB=bu||AB||Function("return this")(),Rt=DB;var IB=Rt.Symbol,Yt=IB;var yE=Object.prototype,FB=yE.hasOwnProperty,CB=yE.toString,kc=Yt?Yt.toStringTag:void 0;function OB(t){var e=FB.call(t,kc),r=t[kc];try{t[kc]=void 0;var n=!0}catch{}var i=CB.call(t);return n&&(e?t[kc]=r:delete t[kc]),i}var xE=OB;var NB=Object.prototype,LB=NB.toString;function UB(t){return LB.call(t)}var TE=UB;var VB="[object Null]",BB="[object Undefined]",SE=Yt?Yt.toStringTag:void 0;function HB(t){return t==null?t===void 0?BB:VB:SE&&SE in Object(t)?xE(t):TE(t)}var bn=HB;function WB(t){return t!=null&&typeof t=="object"}var Xt=WB;var $B="[object Symbol]";function qB(t){return typeof t=="symbol"||Xt(t)&&bn(t)==$B}var Ar=qB;function jB(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var Xr=jB;var zB=Array.isArray,Be=zB;var GB=1/0,vE=Yt?Yt.prototype:void 0,bE=vE?vE.toString:void 0;function wE(t){if(typeof t=="string")return t;if(Be(t))return Xr(t,wE)+"";if(Ar(t))return bE?bE.call(t):"";var e=t+"";return e=="0"&&1/t==-GB?"-0":e}var _E=wE;var KB=/\s/;function QB(t){for(var e=t.length;e--&&KB.test(t.charAt(e)););return e}var EE=QB;var ZB=/^\s+/;function YB(t){return t&&t.slice(0,EE(t)+1).replace(ZB,"")}var RE=YB;function XB(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Dr=XB;var kE=NaN,JB=/^[-+]0x[0-9a-f]+$/i,eH=/^0b[01]+$/i,tH=/^0o[0-7]+$/i,rH=parseInt;function nH(t){if(typeof t=="number")return t;if(Ar(t))return kE;if(Dr(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Dr(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=RE(t);var r=eH.test(t);return r||tH.test(t)?rH(t.slice(2),r?2:8):JB.test(t)?kE:+t}var PE=nH;var ME=1/0,iH=17976931348623157e292;function oH(t){if(!t)return t===0?t:0;if(t=PE(t),t===ME||t===-ME){var e=t<0?-1:1;return e*iH}return t===t?t:0}var Ds=oH;function sH(t){var e=Ds(t),r=e%1;return e===e?r?e-r:e:0}var wu=sH;function aH(t){return t}var Ht=aH;var cH="[object AsyncFunction]",lH="[object Function]",pH="[object GeneratorFunction]",uH="[object Proxy]";function fH(t){if(!Dr(t))return!1;var e=bn(t);return e==lH||e==pH||e==cH||e==uH}var _u=fH;var dH=Rt["__core-js_shared__"],Eu=dH;var AE=function(){var t=/[^.]+$/.exec(Eu&&Eu.keys&&Eu.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function mH(t){return!!AE&&AE in t}var DE=mH;var hH=Function.prototype,gH=hH.toString;function yH(t){if(t!=null){try{return gH.call(t)}catch{}try{return t+""}catch{}}return""}var mi=yH;var xH=/[\\^$.*+?()[\]{}|]/g,TH=/^\[object .+?Constructor\]$/,SH=Function.prototype,vH=Object.prototype,bH=SH.toString,wH=vH.hasOwnProperty,_H=RegExp("^"+bH.call(wH).replace(xH,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function EH(t){if(!Dr(t)||DE(t))return!1;var e=_u(t)?_H:TH;return e.test(mi(t))}var IE=EH;function RH(t,e){return t?.[e]}var FE=RH;function kH(t,e){var r=FE(t,e);return IE(r)?r:void 0}var fr=kH;var PH=fr(Rt,"WeakMap"),Oo=PH;var MH=Oo&&new Oo,Ox=MH;var CE=Object.create,AH=function(){function t(){}return function(e){if(!Dr(e))return{};if(CE)return CE(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),Ru=AH;function DH(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var OE=DH;function IH(){}var Is=IH;var FH=4294967295;function ku(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=FH,this.__views__=[]}ku.prototype=Ru(Is.prototype);ku.prototype.constructor=ku;var Fs=ku;function CH(){}var Pu=CH;var OH=Ox?function(t){return Ox.get(t)}:Pu,Mu=OH;var NH={},Nx=NH;var LH=Object.prototype,UH=LH.hasOwnProperty;function VH(t){for(var e=t.name+"",r=Nx[e],n=UH.call(Nx,e)?r.length:0;n--;){var i=r[n],o=i.func;if(o==null||o==t)return i.name}return e}var Cs=VH;function Au(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}Au.prototype=Ru(Is.prototype);Au.prototype.constructor=Au;var $i=Au;function BH(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var qi=BH;function HH(t){if(t instanceof Fs)return t.clone();var e=new $i(t.__wrapped__,t.__chain__);return e.__actions__=qi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var NE=HH;var WH=Object.prototype,$H=WH.hasOwnProperty;function Du(t){if(Xt(t)&&!Be(t)&&!(t instanceof Fs)){if(t instanceof $i)return t;if($H.call(t,"__wrapped__"))return NE(t)}return new $i(t)}Du.prototype=Is.prototype;Du.prototype.constructor=Du;var LE=Du;function qH(t){var e=Cs(t),r=LE[e];if(typeof r!="function"||!(e in Fs.prototype))return!1;if(t===r)return!0;var n=Mu(r);return!!n&&t===n[0]}var Lx=qH;var jH=800,zH=16,GH=Date.now;function KH(t){var e=0,r=0;return function(){var n=GH(),i=zH-(n-r);if(r=n,i>0){if(++e>=jH)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var UE=KH;function QH(t){return function(){return t}}var VE=QH;var ZH=function(){try{var t=fr(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Os=ZH;var YH=Os?function(t,e){return Os(t,"toString",{configurable:!0,enumerable:!1,value:VE(e),writable:!0})}:Ht,BE=YH;var XH=UE(BE),Iu=XH;function JH(t,e,r,n){for(var i=t.length,o=r+(n?1:-1);n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}var Fu=JH;function eW(t){return t!==t}var HE=eW;function tW(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}var WE=tW;function rW(t,e,r){return e===e?WE(t,e,r):Fu(t,HE,r)}var Cu=rW;function nW(t,e){var r=t==null?0:t.length;return!!r&&Cu(t,e,0)>-1}var $E=nW;var iW=9007199254740991,oW=/^(?:0|[1-9]\d*)$/;function sW(t,e){var r=typeof t;return e=e??iW,!!e&&(r=="number"||r!="symbol"&&oW.test(t))&&t>-1&&t%1==0&&t<e}var Ns=sW;function aW(t,e,r){e=="__proto__"&&Os?Os(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var qE=aW;function cW(t,e){return t===e||t!==t&&e!==e}var Ls=cW;var jE=Math.max;function lW(t,e,r){return e=jE(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,o=jE(n.length-e,0),a=Array(o);++i<o;)a[i]=n[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=n[i];return l[e]=r(a),OE(t,this,l)}}var Ou=lW;function pW(t,e){return Iu(Ou(t,e,Ht),t+"")}var Us=pW;var uW=9007199254740991;function fW(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=uW}var Vs=fW;function dW(t){return t!=null&&Vs(t.length)&&!_u(t)}var Vn=dW;function mW(t,e,r){if(!Dr(r))return!1;var n=typeof e;return(n=="number"?Vn(r)&&Ns(e,r.length):n=="string"&&e in r)?Ls(r[e],t):!1}var No=mW;var hW=Object.prototype;function gW(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||hW;return t===r}var zE=gW;function yW(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var Nu=yW;var xW="[object Arguments]";function TW(t){return Xt(t)&&bn(t)==xW}var Ux=TW;var GE=Object.prototype,SW=GE.hasOwnProperty,vW=GE.propertyIsEnumerable,bW=Ux(function(){return arguments}())?Ux:function(t){return Xt(t)&&SW.call(t,"callee")&&!vW.call(t,"callee")},Bs=bW;function wW(){return!1}var KE=wW;var YE=typeof exports=="object"&&exports&&!exports.nodeType&&exports,QE=YE&&typeof module=="object"&&module&&!module.nodeType&&module,_W=QE&&QE.exports===YE,ZE=_W?Rt.Buffer:void 0,EW=ZE?ZE.isBuffer:void 0,RW=EW||KE,Pc=RW;var kW="[object Arguments]",PW="[object Array]",MW="[object Boolean]",AW="[object Date]",DW="[object Error]",IW="[object Function]",FW="[object Map]",CW="[object Number]",OW="[object Object]",NW="[object RegExp]",LW="[object Set]",UW="[object String]",VW="[object WeakMap]",BW="[object ArrayBuffer]",HW="[object DataView]",WW="[object Float32Array]",$W="[object Float64Array]",qW="[object Int8Array]",jW="[object Int16Array]",zW="[object Int32Array]",GW="[object Uint8Array]",KW="[object Uint8ClampedArray]",QW="[object Uint16Array]",ZW="[object Uint32Array]",Xe={};Xe[WW]=Xe[$W]=Xe[qW]=Xe[jW]=Xe[zW]=Xe[GW]=Xe[KW]=Xe[QW]=Xe[ZW]=!0;Xe[kW]=Xe[PW]=Xe[BW]=Xe[MW]=Xe[HW]=Xe[AW]=Xe[DW]=Xe[IW]=Xe[FW]=Xe[CW]=Xe[OW]=Xe[NW]=Xe[LW]=Xe[UW]=Xe[VW]=!1;function YW(t){return Xt(t)&&Vs(t.length)&&!!Xe[bn(t)]}var XE=YW;function XW(t){return function(e){return t(e)}}var Hs=XW;var JE=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Mc=JE&&typeof module=="object"&&module&&!module.nodeType&&module,JW=Mc&&Mc.exports===JE,Vx=JW&&bu.process,e$=function(){try{var t=Mc&&Mc.require&&Mc.require("util").types;return t||Vx&&Vx.binding&&Vx.binding("util")}catch{}}(),Bx=e$;var e0=Bx&&Bx.isTypedArray,t$=e0?Hs(e0):XE,Lu=t$;var r$=Object.prototype,n$=r$.hasOwnProperty;function i$(t,e){var r=Be(t),n=!r&&Bs(t),i=!r&&!n&&Pc(t),o=!r&&!n&&!i&&Lu(t),a=r||n||i||o,l=a?Nu(t.length,String):[],p=l.length;for(var u in t)(e||n$.call(t,u))&&!(a&&(u=="length"||i&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Ns(u,p)))&&l.push(u);return l}var t0=i$;function o$(t,e){return function(r){return t(e(r))}}var r0=o$;var s$=r0(Object.keys,Object),n0=s$;var a$=Object.prototype,c$=a$.hasOwnProperty;function l$(t){if(!zE(t))return n0(t);var e=[];for(var r in Object(t))c$.call(t,r)&&r!="constructor"&&e.push(r);return e}var i0=l$;function p$(t){return Vn(t)?t0(t):i0(t)}var ji=p$;var u$=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,f$=/^\w*$/;function d$(t,e){if(Be(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||Ar(t)?!0:f$.test(t)||!u$.test(t)||e!=null&&t in Object(e)}var Ws=d$;var m$=fr(Object,"create"),hi=m$;function h$(){this.__data__=hi?hi(null):{},this.size=0}var o0=h$;function g$(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var s0=g$;var y$="__lodash_hash_undefined__",x$=Object.prototype,T$=x$.hasOwnProperty;function S$(t){var e=this.__data__;if(hi){var r=e[t];return r===y$?void 0:r}return T$.call(e,t)?e[t]:void 0}var a0=S$;var v$=Object.prototype,b$=v$.hasOwnProperty;function w$(t){var e=this.__data__;return hi?e[t]!==void 0:b$.call(e,t)}var c0=w$;var _$="__lodash_hash_undefined__";function E$(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=hi&&e===void 0?_$:e,this}var l0=E$;function $s(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}$s.prototype.clear=o0;$s.prototype.delete=s0;$s.prototype.get=a0;$s.prototype.has=c0;$s.prototype.set=l0;var Hx=$s;function R$(){this.__data__=[],this.size=0}var p0=R$;function k$(t,e){for(var r=t.length;r--;)if(Ls(t[r][0],e))return r;return-1}var zi=k$;var P$=Array.prototype,M$=P$.splice;function A$(t){var e=this.__data__,r=zi(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():M$.call(e,r,1),--this.size,!0}var u0=A$;function D$(t){var e=this.__data__,r=zi(e,t);return r<0?void 0:e[r][1]}var f0=D$;function I$(t){return zi(this.__data__,t)>-1}var d0=I$;function F$(t,e){var r=this.__data__,n=zi(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var m0=F$;function qs(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}qs.prototype.clear=p0;qs.prototype.delete=u0;qs.prototype.get=f0;qs.prototype.has=d0;qs.prototype.set=m0;var Gi=qs;var C$=fr(Rt,"Map"),Ki=C$;function O$(){this.size=0,this.__data__={hash:new Hx,map:new(Ki||Gi),string:new Hx}}var h0=O$;function N$(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var g0=N$;function L$(t,e){var r=t.__data__;return g0(e)?r[typeof e=="string"?"string":"hash"]:r.map}var Qi=L$;function U$(t){var e=Qi(this,t).delete(t);return this.size-=e?1:0,e}var y0=U$;function V$(t){return Qi(this,t).get(t)}var x0=V$;function B$(t){return Qi(this,t).has(t)}var T0=B$;function H$(t,e){var r=Qi(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var S0=H$;function js(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}js.prototype.clear=h0;js.prototype.delete=y0;js.prototype.get=x0;js.prototype.has=T0;js.prototype.set=S0;var Lo=js;var W$="Expected a function";function Wx(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(W$);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=t.apply(this,n);return r.cache=o.set(i,a)||o,a};return r.cache=new(Wx.Cache||Lo),r}Wx.Cache=Lo;var Ac=Wx;var $$=500;function q$(t){var e=Ac(t,function(n){return r.size===$$&&r.clear(),n}),r=e.cache;return e}var v0=q$;var j$=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,z$=/\\(\\)?/g,G$=v0(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(j$,function(r,n,i,o){e.push(i?o.replace(z$,"$1"):n||r)}),e}),b0=G$;function K$(t){return t==null?"":_E(t)}var wn=K$;function Q$(t,e){return Be(t)?t:Ws(t,e)?[t]:b0(wn(t))}var Uu=Q$;var Z$=1/0;function Y$(t){if(typeof t=="string"||Ar(t))return t;var e=t+"";return e=="0"&&1/t==-Z$?"-0":e}var Zi=Y$;function X$(t,e){e=Uu(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[Zi(e[r++])];return r&&r==n?t:void 0}var zs=X$;function J$(t,e,r){var n=t==null?void 0:zs(t,e);return n===void 0?r:n}var Uo=J$;function e3(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var Gs=e3;var w0=Yt?Yt.isConcatSpreadable:void 0;function t3(t){return Be(t)||Bs(t)||!!(w0&&t&&t[w0])}var _0=t3;function E0(t,e,r,n,i){var o=-1,a=t.length;for(r||(r=_0),i||(i=[]);++o<a;){var l=t[o];e>0&&r(l)?e>1?E0(l,e-1,r,n,i):Gs(i,l):n||(i[i.length]=l)}return i}var Ks=E0;function r3(t){var e=t==null?0:t.length;return e?Ks(t,1):[]}var Ge=r3;function n3(t){return Iu(Ou(t,void 0,Ge),t+"")}var R0=n3;function i3(t){return function(e){return t?.[e]}}var k0=i3;var o3={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},s3=k0(o3),P0=s3;var a3=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,c3="\\u0300-\\u036f",l3="\\ufe20-\\ufe2f",p3="\\u20d0-\\u20ff",u3=c3+l3+p3,f3="["+u3+"]",d3=RegExp(f3,"g");function m3(t){return t=wn(t),t&&t.replace(a3,P0).replace(d3,"")}var $x=m3;function h3(){this.__data__=new Gi,this.size=0}var M0=h3;function g3(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var A0=g3;function y3(t){return this.__data__.get(t)}var D0=y3;function x3(t){return this.__data__.has(t)}var I0=x3;var T3=200;function S3(t,e){var r=this.__data__;if(r instanceof Gi){var n=r.__data__;if(!Ki||n.length<T3-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Lo(n)}return r.set(t,e),this.size=r.size,this}var F0=S3;function Qs(t){var e=this.__data__=new Gi(t);this.size=e.size}Qs.prototype.clear=M0;Qs.prototype.delete=A0;Qs.prototype.get=D0;Qs.prototype.has=I0;Qs.prototype.set=F0;var Zs=Qs;function v3(t,e){for(var r=-1,n=t==null?0:t.length,i=0,o=[];++r<n;){var a=t[r];e(a,r,t)&&(o[i++]=a)}return o}var Vu=v3;function b3(){return[]}var C0=b3;var w3=Object.prototype,_3=w3.propertyIsEnumerable,O0=Object.getOwnPropertySymbols,E3=O0?function(t){return t==null?[]:(t=Object(t),Vu(O0(t),function(e){return _3.call(t,e)}))}:C0,N0=E3;function R3(t,e,r){var n=e(t);return Be(t)?n:Gs(n,r(t))}var L0=R3;function k3(t){return L0(t,ji,N0)}var qx=k3;var P3=fr(Rt,"DataView"),Bu=P3;var M3=fr(Rt,"Promise"),Hu=M3;var A3=fr(Rt,"Set"),Yi=A3;var U0="[object Map]",D3="[object Object]",V0="[object Promise]",B0="[object Set]",H0="[object WeakMap]",W0="[object DataView]",I3=mi(Bu),F3=mi(Ki),C3=mi(Hu),O3=mi(Yi),N3=mi(Oo),Vo=bn;(Bu&&Vo(new Bu(new ArrayBuffer(1)))!=W0||Ki&&Vo(new Ki)!=U0||Hu&&Vo(Hu.resolve())!=V0||Yi&&Vo(new Yi)!=B0||Oo&&Vo(new Oo)!=H0)&&(Vo=function(t){var e=bn(t),r=e==D3?t.constructor:void 0,n=r?mi(r):"";if(n)switch(n){case I3:return W0;case F3:return U0;case C3:return V0;case O3:return B0;case N3:return H0}return e});var jx=Vo;var L3=Rt.Uint8Array,zx=L3;function U3(){var t=arguments.length;if(!t)return[];for(var e=Array(t-1),r=arguments[0],n=t;n--;)e[n-1]=arguments[n];return Gs(Be(r)?qi(r):[r],Ks(e,1))}var Dc=U3;var V3="__lodash_hash_undefined__";function B3(t){return this.__data__.set(t,V3),this}var $0=B3;function H3(t){return this.__data__.has(t)}var q0=H3;function Wu(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new Lo;++e<r;)this.add(t[e])}Wu.prototype.add=Wu.prototype.push=$0;Wu.prototype.has=q0;var $u=Wu;function W3(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var j0=W3;function $3(t,e){return t.has(e)}var qu=$3;var q3=1,j3=2;function z3(t,e,r,n,i,o){var a=r&q3,l=t.length,p=e.length;if(l!=p&&!(a&&p>l))return!1;var u=o.get(t),d=o.get(e);if(u&&d)return u==e&&d==t;var h=-1,g=!0,x=r&j3?new $u:void 0;for(o.set(t,e),o.set(e,t);++h<l;){var b=t[h],w=e[h];if(n)var F=a?n(w,b,h,e,t,o):n(b,w,h,t,e,o);if(F!==void 0){if(F)continue;g=!1;break}if(x){if(!j0(e,function(M,U){if(!qu(x,U)&&(b===M||i(b,M,r,n,o)))return x.push(U)})){g=!1;break}}else if(!(b===w||i(b,w,r,n,o))){g=!1;break}}return o.delete(t),o.delete(e),g}var ju=z3;function G3(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}var z0=G3;function K3(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var Ys=K3;var Q3=1,Z3=2,Y3="[object Boolean]",X3="[object Date]",J3="[object Error]",eq="[object Map]",tq="[object Number]",rq="[object RegExp]",nq="[object Set]",iq="[object String]",oq="[object Symbol]",sq="[object ArrayBuffer]",aq="[object DataView]",G0=Yt?Yt.prototype:void 0,Gx=G0?G0.valueOf:void 0;function cq(t,e,r,n,i,o,a){switch(r){case aq:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case sq:return!(t.byteLength!=e.byteLength||!o(new zx(t),new zx(e)));case Y3:case X3:case tq:return Ls(+t,+e);case J3:return t.name==e.name&&t.message==e.message;case rq:case iq:return t==e+"";case eq:var l=z0;case nq:var p=n&Q3;if(l||(l=Ys),t.size!=e.size&&!p)return!1;var u=a.get(t);if(u)return u==e;n|=Z3,a.set(t,e);var d=ju(l(t),l(e),n,i,o,a);return a.delete(t),d;case oq:if(Gx)return Gx.call(t)==Gx.call(e)}return!1}var K0=cq;var lq=1,pq=Object.prototype,uq=pq.hasOwnProperty;function fq(t,e,r,n,i,o){var a=r&lq,l=qx(t),p=l.length,u=qx(e),d=u.length;if(p!=d&&!a)return!1;for(var h=p;h--;){var g=l[h];if(!(a?g in e:uq.call(e,g)))return!1}var x=o.get(t),b=o.get(e);if(x&&b)return x==e&&b==t;var w=!0;o.set(t,e),o.set(e,t);for(var F=a;++h<p;){g=l[h];var M=t[g],U=e[g];if(n)var Z=a?n(U,M,g,e,t,o):n(M,U,g,t,e,o);if(!(Z===void 0?M===U||i(M,U,r,n,o):Z)){w=!1;break}F||(F=g=="constructor")}if(w&&!F){var ne=t.constructor,he=e.constructor;ne!=he&&"constructor"in t&&"constructor"in e&&!(typeof ne=="function"&&ne instanceof ne&&typeof he=="function"&&he instanceof he)&&(w=!1)}return o.delete(t),o.delete(e),w}var Q0=fq;var dq=1,Z0="[object Arguments]",Y0="[object Array]",zu="[object Object]",mq=Object.prototype,X0=mq.hasOwnProperty;function hq(t,e,r,n,i,o){var a=Be(t),l=Be(e),p=a?Y0:jx(t),u=l?Y0:jx(e);p=p==Z0?zu:p,u=u==Z0?zu:u;var d=p==zu,h=u==zu,g=p==u;if(g&&Pc(t)){if(!Pc(e))return!1;a=!0,d=!1}if(g&&!d)return o||(o=new Zs),a||Lu(t)?ju(t,e,r,n,i,o):K0(t,e,p,r,n,i,o);if(!(r&dq)){var x=d&&X0.call(t,"__wrapped__"),b=h&&X0.call(e,"__wrapped__");if(x||b){var w=x?t.value():t,F=b?e.value():e;return o||(o=new Zs),i(w,F,r,n,o)}}return g?(o||(o=new Zs),Q0(t,e,r,n,i,o)):!1}var J0=hq;function eR(t,e,r,n,i){return t===e?!0:t==null||e==null||!Xt(t)&&!Xt(e)?t!==t&&e!==e:J0(t,e,r,n,eR,i)}var Xs=eR;var gq=1,yq=2;function xq(t,e,r,n){var i=r.length,o=i,a=!n;if(t==null)return!o;for(t=Object(t);i--;){var l=r[i];if(a&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++i<o;){l=r[i];var p=l[0],u=t[p],d=l[1];if(a&&l[2]){if(u===void 0&&!(p in t))return!1}else{var h=new Zs;if(n)var g=n(u,d,p,t,e,h);if(!(g===void 0?Xs(d,u,gq|yq,n,h):g))return!1}}return!0}var tR=xq;function Tq(t){return t===t&&!Dr(t)}var Gu=Tq;function Sq(t){for(var e=ji(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,Gu(i)]}return e}var rR=Sq;function vq(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var Ku=vq;function bq(t){var e=rR(t);return e.length==1&&e[0][2]?Ku(e[0][0],e[0][1]):function(r){return r===t||tR(r,t,e)}}var nR=bq;function wq(t,e){return t!=null&&e in Object(t)}var iR=wq;function _q(t,e,r){e=Uu(e,t);for(var n=-1,i=e.length,o=!1;++n<i;){var a=Zi(e[n]);if(!(o=t!=null&&r(t,a)))break;t=t[a]}return o||++n!=i?o:(i=t==null?0:t.length,!!i&&Vs(i)&&Ns(a,i)&&(Be(t)||Bs(t)))}var oR=_q;function Eq(t,e){return t!=null&&oR(t,e,iR)}var sR=Eq;var Rq=1,kq=2;function Pq(t,e){return Ws(t)&&Gu(e)?Ku(Zi(t),e):function(r){var n=Uo(r,t);return n===void 0&&n===e?sR(r,t):Xs(e,n,Rq|kq)}}var aR=Pq;function Mq(t){return function(e){return e?.[t]}}var Qu=Mq;function Aq(t){return function(e){return zs(e,t)}}var cR=Aq;function Dq(t){return Ws(t)?Qu(Zi(t)):cR(t)}var lR=Dq;function Iq(t){return typeof t=="function"?t:t==null?Ht:typeof t=="object"?Be(t)?aR(t[0],t[1]):nR(t):lR(t)}var Bn=Iq;function Fq(t,e,r,n){for(var i=-1,o=t==null?0:t.length;++i<o;){var a=t[i];e(n,a,r(a),t)}return n}var pR=Fq;function Cq(t){return function(e,r,n){for(var i=-1,o=Object(e),a=n(e),l=a.length;l--;){var p=a[t?l:++i];if(r(o[p],p,o)===!1)break}return e}}var uR=Cq;var Oq=uR(),fR=Oq;function Nq(t,e){return t&&fR(t,e,ji)}var dR=Nq;function Lq(t,e){return function(r,n){if(r==null)return r;if(!Vn(r))return t(r,n);for(var i=r.length,o=e?i:-1,a=Object(r);(e?o--:++o<i)&&n(a[o],o,a)!==!1;);return r}}var mR=Lq;var Uq=mR(dR),Zu=Uq;function Vq(t,e,r,n){return Zu(t,function(i,o,a){e(n,i,r(i),a)}),n}var hR=Vq;function Bq(t,e){return function(r,n){var i=Be(r)?pR:hR,o=e?e():{};return i(r,t,Bn(n,2),o)}}var gR=Bq;function Hq(t){return Xt(t)&&Vn(t)}var yR=Hq;function Wq(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}var xR=Wq;function $q(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var Yu=$q;var TR=/[\\^$.*+?()[\]{}|]/g,qq=RegExp(TR.source);function jq(t){return t=wn(t),t&&qq.test(t)?t.replace(TR,"\\$&"):t}var Ir=jq;var zq=Math.max,Gq=Math.min;function Kq(t,e,r){var n=t==null?0:t.length;if(!n)return-1;var i=n-1;return r!==void 0&&(i=wu(r),i=r<0?zq(n+i,0):Gq(i,n-1)),Fu(t,Bn(e,3),i,!0)}var Ic=Kq;function Qq(t,e){var r=-1,n=Vn(t)?Array(t.length):[];return Zu(t,function(i,o,a){n[++r]=e(i,o,a)}),n}var SR=Qq;var Zq="Expected a function",Yq=8,Xq=32,Jq=128,ej=256;function tj(t){return R0(function(e){var r=e.length,n=r,i=$i.prototype.thru;for(t&&e.reverse();n--;){var o=e[n];if(typeof o!="function")throw new TypeError(Zq);if(i&&!a&&Cs(o)=="wrapper")var a=new $i([],!0)}for(n=a?n:r;++n<r;){o=e[n];var l=Cs(o),p=l=="wrapper"?Mu(o):void 0;p&&Lx(p[0])&&p[1]==(Jq|Yq|Xq|ej)&&!p[4].length&&p[9]==1?a=a[Cs(p[0])].apply(a,p[3]):a=o.length==1&&Lx(o)?a[l]():a.thru(o)}return function(){var u=arguments,d=u[0];if(a&&u.length==1&&Be(d))return a.plant(d).value();for(var h=0,g=r?e[h].apply(this,u):d;++h<r;)g=e[h].call(this,g);return g}})}var vR=tj;var rj=vR(),Kx=rj;var nj=Object.prototype,ij=nj.hasOwnProperty,oj=gR(function(t,e,r){ij.call(t,r)?t[r].push(e):qE(t,r,[e])}),Qx=oj;function sj(t,e){return t>e}var bR=sj;function aj(t,e){return Xr(e,function(r){return t[r]})}var wR=aj;function cj(t){return t==null?[]:wR(t,ji(t))}var _R=cj;function lj(t,e){return Xs(t,e)}var gi=lj;function pj(t,e){return t<e}var ER=pj;function uj(t,e,r){for(var n=-1,i=t.length;++n<i;){var o=t[n],a=e(o);if(a!=null&&(l===void 0?a===a&&!Ar(a):r(a,l)))var l=a,p=o}return p}var Xu=uj;function fj(t,e){return t&&t.length?Xu(t,Bn(e,2),bR):void 0}var Zx=fj;function dj(t,e){for(var r,n=-1,i=t.length;++n<i;){var o=e(t[n]);o!==void 0&&(r=r===void 0?o:r+o)}return r}var RR=dj;function mj(t){return t&&t.length?Xu(t,Ht,ER):void 0}var Yx=mj;function hj(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}var kR=hj;function gj(t,e){if(t!==e){var r=t!==void 0,n=t===null,i=t===t,o=Ar(t),a=e!==void 0,l=e===null,p=e===e,u=Ar(e);if(!l&&!u&&!o&&t>e||o&&a&&p&&!l&&!u||n&&a&&p||!r&&p||!i)return 1;if(!n&&!o&&!u&&t<e||u&&r&&i&&!n&&!o||l&&r&&i||!a&&i||!p)return-1}return 0}var PR=gj;function yj(t,e,r){for(var n=-1,i=t.criteria,o=e.criteria,a=i.length,l=r.length;++n<a;){var p=PR(i[n],o[n]);if(p){if(n>=l)return p;var u=r[n];return p*(u=="desc"?-1:1)}}return t.index-e.index}var MR=yj;function xj(t,e,r){e.length?e=Xr(e,function(o){return Be(o)?function(a){return zs(a,o.length===1?o[0]:o)}:o}):e=[Ht];var n=-1;e=Xr(e,Hs(Bn));var i=SR(t,function(o,a,l){var p=Xr(e,function(u){return u(o)});return{criteria:p,index:++n,value:o}});return kR(i,function(o,a){return MR(o,a,r)})}var AR=xj;var Tj=9007199254740991,Sj=Math.floor;function vj(t,e){var r="";if(!t||e<1||e>Tj)return r;do e%2&&(r+=t),e=Sj(e/2),e&&(t+=t);while(e);return r}var DR=vj;function bj(t,e,r,n){for(var i=r-1,o=t.length;++i<o;)if(n(t[i],e))return i;return-1}var IR=bj;var wj=Array.prototype,FR=wj.splice;function _j(t,e,r,n){var i=n?IR:Cu,o=-1,a=e.length,l=t;for(t===e&&(e=qi(e)),r&&(l=Xr(t,Hs(r)));++o<a;)for(var p=0,u=e[o],d=r?r(u):u;(p=i(l,d,p,n))>-1;)l!==t&&FR.call(l,p,1),FR.call(t,p,1);return t}var CR=_j;function Ej(t,e){return t&&t.length&&e&&e.length?CR(t,e):t}var OR=Ej;var Rj=Us(OR),Jt=Rj;var kj=Math.floor,Pj=Math.random;function Mj(t,e){return t+kj(Pj()*(e-t+1))}var NR=Mj;var Aj=Math.ceil,Dj=Math.max;function Ij(t,e,r,n){for(var i=-1,o=Dj(Aj((e-t)/(r||1)),0),a=Array(o);o--;)a[n?o:++i]=t,t+=r;return a}var LR=Ij;function Fj(t){return function(e,r,n){return n&&typeof n!="number"&&No(e,r,n)&&(r=n=void 0),e=Ds(e),r===void 0?(r=e,e=0):r=Ds(r),n=n===void 0?e<r?1:-1:Ds(n),LR(e,r,n,t)}}var UR=Fj;var Cj=UR(),Xx=Cj;function Oj(t,e,r){return(r?No(t,e,r):e===void 0)?e=1:e=wu(e),DR(wn(t),e)}var Jx=Oj;function Nj(t,e){var r=-1,n=t.length,i=n-1;for(e=e===void 0?n:e;++r<e;){var o=NR(r,i),a=t[o];t[o]=t[r],t[r]=a}return t.length=e,t}var Ju=Nj;function Lj(t){return Ju(qi(t))}var VR=Lj;function Uj(t){return Ju(_R(t))}var BR=Uj;function Vj(t){var e=Be(t)?VR:BR;return e(t)}var eT=Vj;var Bj=Us(function(t,e){if(t==null)return[];var r=e.length;return r>1&&No(t,e[0],e[1])?e=[]:r>2&&No(e[0],e[1],e[2])&&(e=[e[0]]),AR(t,Ks(e,1),[])}),tT=Bj;function Hj(t,e){return t&&t.length?RR(t,Bn(e,2)):0}var ef=Hj;var Wj=1/0,$j=Yi&&1/Ys(new Yi([,-0]))[1]==Wj?function(t){return new Yi(t)}:Pu,HR=$j;var qj=200;function jj(t,e,r){var n=-1,i=$E,o=t.length,a=!0,l=[],p=l;if(r)a=!1,i=xR;else if(o>=qj){var u=e?null:HR(t);if(u)return Ys(u);a=!1,i=qu,p=new $u}else p=e?[]:l;e:for(;++n<o;){var d=t[n],h=e?e(d):d;if(d=r||d!==0?d:0,a&&h===h){for(var g=p.length;g--;)if(p[g]===h)continue e;e&&p.push(h),l.push(d)}else i(p,h,r)||(p!==l&&p.push(h),l.push(d))}return l}var tf=jj;function zj(t){return t&&t.length?tf(t):[]}var yi=zj;function Gj(t,e){return e=typeof e=="function"?e:void 0,t&&t.length?tf(t,void 0,e):[]}var Fc=Gj;var Kj=Math.max;function Qj(t){if(!(t&&t.length))return[];var e=0;return t=Vu(t,function(r){if(yR(r))return e=Kj(r.length,e),!0}),Nu(e,function(r){return Xr(t,Qu(r))})}var WR=Qj;var Zj=Us(WR),ut=Zj;var rf=class{constructor(){this.commands={clipboardPaste:void 0,clipboardCopy:void 0,toggleLineComment:void 0,indentLine:void 0,outdentLine:void 0,rename:void 0,quickFix:void 0,revealDefinition:void 0,revealTypeDefinition:void 0,showHover:void 0,showDebugHover:void 0,extractVariable:void 0,fold:void 0,highlight:{acceptsLocation:!0},unfold:void 0,showReferences:void 0,insertLineAfter:void 0}}};var Cc=class{constructor(){this.clipboardContents=""}async readText(){return this.clipboardContents}async writeText(e){this.clipboardContents=e}};var Wt=class{constructor(){this.listeners=[];this.notifyListeners=(...e)=>{this.listeners.forEach(r=>r(...e))};this.registerListener=this.registerListener.bind(this)}registerListener(e){return this.listeners.push(e),{dispose:()=>{Jt(this.listeners,e)}}}};var nf={tokenHatSplittingMode:{preserveCase:!1,lettersToPreserve:[],symbolsToPreserve:[]},wordSeparators:["_"],decorationDebounceDelayMs:50,experimental:{snippetsDir:void 0,hatStability:"balanced",keyboardTargetFollowsSelection:!1},commandHistory:!1,debug:!1};var Oc=class{constructor(){this.notifier=new Wt;this.mocks={...nf};this.scopes=[];this.onDidChangeConfiguration=this.notifier.registerListener;this.onDidChangeConfiguration=this.onDidChangeConfiguration.bind(this)}getOwnConfiguration(e,r){if(r!=null){for(let{scope:n,values:i}of this.scopes)if(Xj(n,r))return Uo(i,e)??Uo(this.mocks,e)}return Uo(this.mocks,e)}mockConfiguration(e,r){this.mocks[e]=r,this.notifier.notifyListeners()}mockConfigurationScope(e,r,n=!1){this.scopes.push({scope:e,values:r}),n||this.notifier.notifyListeners()}};function Xj(t,e){return t.languageId===e.languageId}var of={hideInferenceWarning:!1,tutorialProgress:{}};var Nc=class{constructor(){this.data={...of}}get(e){return this.data[e]}set(e,r){return this.data[e]=r,Promise.resolve()}};var Lc=class{async showMessage(e,r,n,...i){}};var sf=class{constructor(){this.configuration=new Oc;this.messages=new Lc;this.keyValueStore=new Nc;this.clipboard=new Cc;this.capabilities=new rf;this.runMode="test";this.cursorlessVersion="0.0.0";this.workspaceFolders=void 0;this.disposables=[];this.quickPickReturnValue=void 0;this.onDidOpenTextDocument=Js;this.onDidCloseTextDocument=Js;this.onDidChangeActiveTextEditor=Js;this.onDidChangeVisibleTextEditors=Js;this.onDidChangeTextEditorSelection=Js;this.onDidChangeTextEditorVisibleRanges=Js}async flashRanges(e){}async setHighlightRanges(e,r,n){}mockAssetsRoot(e){this.assetsRoot_=e}get assetsRoot(){if(this.assetsRoot_==null)throw Error("Field `assetsRoot` has not yet been mocked");return this.assetsRoot_}get activeTextEditor(){throw Error("Not implemented")}get activeEditableTextEditor(){throw Error("Not implemented")}get visibleTextEditors(){throw Error("Not implemented")}getEditableTextEditor(e){throw Error("Not implemented")}findInDocument(e,r){throw Error("Not implemented")}findInWorkspace(e){throw Error("Not implemented")}openTextDocument(e){throw Error("Not implemented")}openUntitledTextDocument(e){throw Error("Not implemented")}setQuickPickReturnValue(e){this.quickPickReturnValue=e}async showQuickPick(e,r){return this.quickPickReturnValue}showInputBox(e){throw Error("Not implemented")}executeCommand(e,...r){throw new Error("Method not implemented.")}onDidChangeTextDocument(e){throw Error("Not implemented")}disposeOnExit(...e){return this.disposables.push(...e),()=>Jt(this.disposables,...e)}exit(){this.disposables.forEach(e=>e.dispose())}};function Js(){return{dispose(){}}}var ae=class t{constructor(e,r){this.line=e,this.character=r}isEqual(e){return this.line===e.line&&this.character===e.character}isBefore(e){return this.line<e.line?!0:this.line>e.line?!1:this.character<e.character}isAfter(e){return this.line>e.line?!0:this.line<e.line?!1:this.character>e.character}isBeforeOrEqual(e){return this.isEqual(e)||this.isBefore(e)}isAfterOrEqual(e){return this.isEqual(e)||this.isAfter(e)}compareTo(e){return this.isBefore(e)?-1:this.isAfter(e)?1:0}with(e,r){return new t(e??this.line,r??this.character)}translate(e,r){return new t(this.line+(e??0),this.character+(r??0))}toEmptyRange(){return new W(this,this)}concise(){return`${this.line}:${this.character}`}toString(){return this.concise()}};function $R(t,e,r){return t.positionAt(t.offsetAt(e)+r)}var W=class t{constructor(...e){let[r,n]=e.length===2?e:[new ae(e[0],e[1]),new ae(e[2],e[3])];r.isBefore(n)?(this.start=r,this.end=n):(this.start=n,this.end=r)}get isEmpty(){return this.start.isEqual(this.end)}get isSingleLine(){return this.start.line===this.end.line}isRangeEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}contains(e){let[r,n]=e instanceof ae?[e,e]:[e.start,e.end];return r.isAfterOrEqual(this.start)&&n.isBeforeOrEqual(this.end)}intersection(e){let r=this.start.isAfter(e.start)?this.start:e.start,n=this.end.isBefore(e.end)?this.end:e.end;return r.isBeforeOrEqual(n)?new t(r,n):void 0}union(e){return new t(this.start.isBefore(e.start)?this.start:e.start,this.end.isAfter(e.end)?this.end:e.end)}with(e,r){return new t(e??this.start,r??this.end)}toSelection(e){return e?new Te(this.end,this.start):new Te(this.start,this.end)}concise(){return`${this.start.concise()}-${this.end.concise()}`}toString(){return this.concise()}};function Jj(t){let{source:e,flags:r}=t;return new RegExp(`(${e})$`,r.replace("m",""))}function ez(t){let{source:e,flags:r}=t;return new RegExp(`^(${e})`,r.replace("m",""))}function qR(t){let e=new Map;function r(n){let i=e.get(n);return i==null&&(i=t(n),e.set(n,i)),i}return r}var af=qR(Jj),cf=qR(ez);function Jr(t,e,r){return e.lastIndex=0,Array.from(t.matchAll(e),r)}function Uc(t,e){return t.lastIndex=0,t.test(e)}function jR(t,e){return t.lastIndex=0,e.match(t)}function Vc(t,e){return Jr(t,e,r=>({index:r.index,text:r[0]}))}var ea=class{constructor(e){this.original=e;this.configuration=e.configuration,this.keyValueStore=e.keyValueStore,this.clipboard=e.clipboard,this.messages=e.messages,this.capabilities=e.capabilities}flashRanges(e){return this.original.flashRanges(e)}setHighlightRanges(e,r,n){return this.original.setHighlightRanges(e,r,n)}onDidOpenTextDocument(e,r,n){return this.original.onDidOpenTextDocument(e,r,n)}onDidCloseTextDocument(e,r,n){return this.original.onDidCloseTextDocument(e,r,n)}onDidChangeActiveTextEditor(e,r,n){return this.original.onDidChangeActiveTextEditor(e,r,n)}onDidChangeVisibleTextEditors(e,r,n){return this.original.onDidChangeVisibleTextEditors(e,r,n)}onDidChangeTextEditorSelection(e,r,n){return this.original.onDidChangeTextEditorSelection(e,r,n)}onDidChangeTextEditorVisibleRanges(e,r,n){return this.original.onDidChangeTextEditorVisibleRanges(e,r,n)}get activeTextEditor(){return this.original.activeTextEditor}get activeEditableTextEditor(){return this.original.activeEditableTextEditor}get visibleTextEditors(){return this.original.visibleTextEditors}get cursorlessVersion(){return this.original.cursorlessVersion}get assetsRoot(){return this.original.assetsRoot}get runMode(){return this.original.runMode}get workspaceFolders(){return this.original.workspaceFolders}findInDocument(e,r){return this.original.findInDocument(e,r)}findInWorkspace(e){return this.original.findInWorkspace(e)}openTextDocument(e){return this.original.openTextDocument(e)}openUntitledTextDocument(e){return this.original.openUntitledTextDocument(e)}showQuickPick(e,r){return this.original.showQuickPick(e,r)}showInputBox(e){return this.original.showInputBox(e)}getEditableTextEditor(e){return this.original.getEditableTextEditor(e)}executeCommand(e,...r){return this.original.executeCommand(e,...r)}onDidChangeTextDocument(e){return this.original.onDidChangeTextDocument(e)}disposeOnExit(...e){return this.original.disposeOnExit(...e)}};var lf=class extends ea{constructor(r,n,i,o){super(r);this.fakeIde=n;this.isSilent=i;this.cursorlessSnippetsDir=o;this.messages=i?n.messages:r.messages,this.configuration=n.configuration,this.keyValueStore=n.keyValueStore,this.initializeConfiguration()}initializeConfiguration(){this.configuration.mockConfigurationScope({languageId:"css"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfigurationScope({languageId:"scss"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfigurationScope({languageId:"shellscript"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfiguration("experimental",{hatStability:this.configuration.getOwnConfiguration("experimental.hatStability"),snippetsDir:this.cursorlessSnippetsDir,keyboardTargetFollowsSelection:!1})}flashRanges(r){return this.isSilent?this.fakeIde.flashRanges(r):super.flashRanges(r)}setHighlightRanges(r,n,i){return this.isSilent?this.fakeIde.setHighlightRanges(r,n,i):super.setHighlightRanges(r,n,i)}async showQuickPick(r,n){return this.isSilent?this.fakeIde.showQuickPick(r,n):super.showQuickPick(r,n)}};function Bc(t,e,r,...n){return t.showMessage("warning",e,r,...n)}function nt(t,e,r,...n){return t.showMessage("error",e,r,...n)}var oe=(i=>(i[i.supported=0]="supported",i[i.supportedLegacy=1]="supportedLegacy",i[i.unsupported=2]="unsupported",i[i.notApplicable=3]="notApplicable",i))(oe||{});var{supported:et,unsupported:rle,notApplicable:zR}=oe,rT={ifStatement:et,disqualifyDelimiter:et,"comment.line":et,"comment.block":et,"string.singleLine":et,"textFragment.comment.line":et,"textFragment.comment.block":et,"textFragment.string.singleLine":et,class:et,className:et,namedFunction:et,"name.function":et,"name.class":et,"name.field":et,functionName:et,"name.argument.formal":et,"name.argument.formal.iteration":et,"name.variable":et,"value.variable":et,"name.assignment":et,"value.assignment":et,"statement.class":et,"type.class":et,"type.field":et,"value.argument.formal":zR,"value.argument.formal.iteration":zR};var{supported:ole,unsupported:sle,notApplicable:ale}=oe;var{supported:GR,unsupported:ule,notApplicable:fle}=oe,tz={...rT,"value.argument.formal":GR,"value.argument.formal.iteration":GR};var{supported:hle,unsupported:gle,notApplicable:yle}=oe;var{supported:Hc,unsupported:rz,notApplicable:Sle}=oe,nT={"comment.block":Hc,"string.singleLine":Hc,"name.iteration.block":Hc,"name.iteration.document":Hc,disqualifyDelimiter:Hc,"comment.line":rz};var{supported:wle,unsupported:_le,notApplicable:Ele}=oe;var{supported:Ple,notApplicable:Mle}=oe;var{supported:Ile,notApplicable:Fle}=oe;var{supported:z,unsupported:Nle,notApplicable:en}=oe,iT={list:z,map:z,ifStatement:z,regularExpression:z,switchStatementSubject:z,fieldAccess:z,disqualifyDelimiter:z,"textFragment.string.singleLine":z,"textFragment.string.multiLine":z,"textFragment.comment.line":z,"textFragment.comment.block":z,statement:z,"statement.iteration.document":z,"statement.iteration.block":z,class:z,className:z,anonymousFunction:z,namedFunction:z,"namedFunction.iteration.document":z,"namedFunction.method":z,"namedFunction.method.iteration.class":z,"namedFunction.constructor":z,functionName:z,"functionName.iteration.document":z,"functionName.method":z,"functionName.method.iteration.class":z,"functionName.constructor":z,functionCall:z,"functionCall.constructor":z,functionCallee:z,"functionCallee.constructor":z,"argument.actual":z,"argument.actual.iteration":z,"argument.actual.method":z,"argument.actual.method.iteration":z,"argument.actual.constructor":z,"argument.actual.constructor.iteration":z,"argument.formal":z,"argument.formal.iteration":z,"argument.formal.method":z,"argument.formal.method.iteration":z,"argument.formal.constructor":z,"argument.formal.constructor.iteration":z,"comment.line":z,"comment.block":z,"string.singleLine":z,"string.multiLine":z,"branch.if":z,"branch.if.iteration":z,"branch.try":z,"branch.switchCase":z,"branch.switchCase.iteration":z,"branch.ternary":z,"condition.if":z,"condition.while":z,"condition.doWhile":z,"condition.for":z,"condition.ternary":z,"condition.switchCase":z,"name.argument.formal":z,"name.argument.formal.iteration":z,"name.argument.formal.method":z,"name.argument.formal.method.iteration":z,"name.argument.formal.constructor":z,"name.argument.formal.constructor.iteration":z,"name.foreach":z,"name.assignment":z,"name.assignment.pattern":z,"name.variable":z,"name.variable.pattern":z,"name.function":z,"name.method":z,"name.constructor":z,"name.class":z,"name.field":z,"key.mapPair":z,"key.mapPair.iteration":z,"value.argument.formal":z,"value.argument.formal.iteration":z,"value.argument.formal.method":z,"value.argument.formal.method.iteration":z,"value.argument.formal.constructor":z,"value.argument.formal.constructor.iteration":z,"value.mapPair":z,"value.mapPair.iteration":z,"value.assignment":z,"value.variable":z,"value.variable.pattern":z,"value.foreach":z,"value.return":z,"value.return.lambda":z,"value.field":z},oT={element:z,tags:z,startTag:z,endTag:z,attribute:z,"key.attribute":z,"value.attribute":z},nz={...iT,...oT,"type.variable":en,"type.argument.formal":en,"type.argument.formal.iteration":en,"type.argument.formal.method":en,"type.argument.formal.method.iteration":en,"type.argument.formal.constructor":en,"type.argument.formal.constructor.iteration":en,"type.return":en,"type.field":en,"type.foreach":en,"type.interface":en,command:en};var{supported:sT}=oe,Wc={"comment.line":sT,"comment.block":sT,map:sT};var{supported:Wle,unsupported:$le,notApplicable:qle}=oe,iz={...Wc};var{supported:Kle,unsupported:Qle,notApplicable:Zle}=oe,oz={...Wc};var{supported:Jle,unsupported:epe,notApplicable:tpe}=oe;var{supported:ipe,notApplicable:ope}=oe;var{supported:cpe,unsupported:lpe,notApplicable:ppe}=oe;var{supported:dpe,unsupported:mpe,notApplicable:hpe}=oe;var{supported:xpe,notApplicable:Tpe}=oe;var{supported:bpe,unsupported:wpe,notApplicable:_pe}=oe;var{supported:kpe,unsupported:Ppe,notApplicable:Mpe}=oe;var{supported:Ipe,unsupported:Fpe,notApplicable:Cpe}=oe;var{supported:Lpe,unsupported:Upe,notApplicable:Vpe}=oe;var{supported:ta,unsupported:$pe,notApplicable:qpe}=oe,sz={...nT,"namedFunction.iteration":ta,"namedFunction.iteration.document":ta,"functionName.iteration":ta,"functionName.iteration.document":ta,"comment.line":ta,disqualifyDelimiter:ta};var{supported:Gpe}=oe;var{supported:er}=oe,aT={...iT,"name.field":er,"type.argument.formal":er,"type.argument.formal.iteration":er,"type.argument.formal.method":er,"type.argument.formal.method.iteration":er,"type.argument.formal.constructor":er,"type.argument.formal.constructor.iteration":er,"type.alias":er,"type.cast":er,"type.field":er,"type.interface":er,"type.return":er,"type.variable":er,"value.field":er,"value.typeAlias":er};var{supported:tue,unsupported:rue,notApplicable:nue}=oe,az={...aT,...oT};var{supported:sue,unsupported:aue,notApplicable:cue}=oe;var{supported:uue,unsupported:fue,notApplicable:due}=oe;var ra=["that","source","instanceReference","keyboard"];var Te=class extends W{get isReversed(){return this.active.isBefore(this.anchor)}constructor(...e){let[r,n]=e.length===2?e:[new ae(e[0],e[1]),new ae(e[2],e[3])];super(r,n),this.anchor=r,this.active=n}isEqual(e){return this.anchor.isEqual(e.anchor)&&this.active.isEqual(e.active)}concise(){return`${this.anchor.concise()}->${this.active.concise()}`}toString(){return this.concise()}};function QR({line:t,character:e}){return new ae(t,e)}function pf({start:t,end:e}){return new W(QR(t),QR(e))}function tn(t){return{type:"line",start:t.start.line,end:t.end.line}}function Ft({start:t,end:e}){return{type:"character",start:t,end:e}}function $c(t){return{start:uf(t.start),end:uf(t.end)}}function ZR(t){return{anchor:uf(t.anchor),active:uf(t.active)}}function uf({line:t,character:e}){return{line:t,character:e}}function mk(t){return typeof t>"u"||t===null}function cz(t){return typeof t=="object"&&t!==null}function lz(t){return Array.isArray(t)?t:mk(t)?[]:[t]}function pz(t,e){var r,n,i,o;if(e)for(o=Object.keys(e),r=0,n=o.length;r<n;r+=1)i=o[r],t[i]=e[i];return t}function uz(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}function fz(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var dz=mk,mz=cz,hz=lz,gz=uz,yz=fz,xz=pz,vt={isNothing:dz,isObject:mz,toArray:hz,repeat:gz,isNegativeZero:yz,extend:xz};function hk(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}function jc(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=hk(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}jc.prototype=Object.create(Error.prototype);jc.prototype.constructor=jc;jc.prototype.toString=function(e){return this.name+": "+hk(this,e)};var dr=jc;function cT(t,e,r,n,i){var o="",a="",l=Math.floor(i/2)-1;return n-e>l&&(o=" ... ",e=n-l+o.length),r-n>l&&(a=" ...",r=n+l-a.length),{str:o+t.slice(e,r).replace(/\t/g,"\u2192")+a,pos:n-e+o.length}}function lT(t,e){return vt.repeat(" ",e-t.length)+t}function Tz(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],o,a=-1;o=r.exec(t.buffer);)i.push(o.index),n.push(o.index+o[0].length),t.position<=o.index&&a<0&&(a=n.length-2);a<0&&(a=n.length-1);var l="",p,u,d=Math.min(t.line+e.linesAfter,i.length).toString().length,h=e.maxLength-(e.indent+d+3);for(p=1;p<=e.linesBefore&&!(a-p<0);p++)u=cT(t.buffer,n[a-p],i[a-p],t.position-(n[a]-n[a-p]),h),l=vt.repeat(" ",e.indent)+lT((t.line-p+1).toString(),d)+" | "+u.str+`
`+l;for(u=cT(t.buffer,n[a],i[a],t.position,h),l+=vt.repeat(" ",e.indent)+lT((t.line+1).toString(),d)+" | "+u.str+`
`,l+=vt.repeat("-",e.indent+d+3+u.pos)+`^
`,p=1;p<=e.linesAfter&&!(a+p>=i.length);p++)u=cT(t.buffer,n[a+p],i[a+p],t.position-(n[a]-n[a+p]),h),l+=vt.repeat(" ",e.indent)+lT((t.line+p+1).toString(),d)+" | "+u.str+`
`;return l.replace(/\n$/,"")}var Sz=Tz,vz=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],bz=["scalar","sequence","mapping"];function wz(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}function _z(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(vz.indexOf(r)===-1)throw new dr('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=wz(e.styleAliases||null),bz.indexOf(this.kind)===-1)throw new dr('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var Ct=_z;function JR(t,e){var r=[];return t[e].forEach(function(n){var i=r.length;r.forEach(function(o,a){o.tag===n.tag&&o.kind===n.kind&&o.multi===n.multi&&(i=a)}),r[i]=n}),r}function Ez(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}function uT(t){return this.extend(t)}uT.prototype.extend=function(e){var r=[],n=[];if(e instanceof Ct)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new dr("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(o){if(!(o instanceof Ct))throw new dr("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new dr("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new dr("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(o){if(!(o instanceof Ct))throw new dr("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(uT.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=JR(i,"implicit"),i.compiledExplicit=JR(i,"explicit"),i.compiledTypeMap=Ez(i.compiledImplicit,i.compiledExplicit),i};var Rz=uT,kz=new Ct("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),Pz=new Ct("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),Mz=new Ct("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),Az=new Rz({explicit:[kz,Pz,Mz]});function Dz(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function Iz(){return null}function Fz(t){return t===null}var Cz=new Ct("tag:yaml.org,2002:null",{kind:"scalar",resolve:Dz,construct:Iz,predicate:Fz,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function Oz(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function Nz(t){return t==="true"||t==="True"||t==="TRUE"}function Lz(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var Uz=new Ct("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Oz,construct:Nz,predicate:Lz,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function Vz(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function Bz(t){return 48<=t&&t<=55}function Hz(t){return 48<=t&&t<=57}function Wz(t){if(t===null)return!1;var e=t.length,r=0,n=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!Vz(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!Bz(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!Hz(t.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function $z(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}function qz(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!vt.isNegativeZero(t)}var jz=new Ct("tag:yaml.org,2002:int",{kind:"scalar",resolve:Wz,construct:$z,predicate:qz,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),zz=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Gz(t){return!(t===null||!zz.test(t)||t[t.length-1]==="_")}function Kz(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}var Qz=/^[-+]?[0-9]+e/;function Zz(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(vt.isNegativeZero(t))return"-0.0";return r=t.toString(10),Qz.test(r)?r.replace("e",".e"):r}function Yz(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||vt.isNegativeZero(t))}var Xz=new Ct("tag:yaml.org,2002:float",{kind:"scalar",resolve:Gz,construct:Kz,predicate:Yz,represent:Zz,defaultStyle:"lowercase"}),Jz=Az.extend({implicit:[Cz,Uz,jz,Xz]}),eG=Jz,gk=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),yk=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function tG(t){return t===null?!1:gk.exec(t)!==null||yk.exec(t)!==null}function rG(t){var e,r,n,i,o,a,l,p=0,u=null,d,h,g;if(e=gk.exec(t),e===null&&(e=yk.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(o=+e[4],a=+e[5],l=+e[6],e[7]){for(p=e[7].slice(0,3);p.length<3;)p+="0";p=+p}return e[9]&&(d=+e[10],h=+(e[11]||0),u=(d*60+h)*6e4,e[9]==="-"&&(u=-u)),g=new Date(Date.UTC(r,n,i,o,a,l,p)),u&&g.setTime(g.getTime()-u),g}function nG(t){return t.toISOString()}var iG=new Ct("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:tG,construct:rG,instanceOf:Date,represent:nG});function oG(t){return t==="<<"||t===null}var sG=new Ct("tag:yaml.org,2002:merge",{kind:"scalar",resolve:oG}),gT=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function aG(t){if(t===null)return!1;var e,r,n=0,i=t.length,o=gT;for(r=0;r<i;r++)if(e=o.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}function cG(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,o=gT,a=0,l=[];for(e=0;e<i;e++)e%4===0&&e&&(l.push(a>>16&255),l.push(a>>8&255),l.push(a&255)),a=a<<6|o.indexOf(n.charAt(e));return r=i%4*6,r===0?(l.push(a>>16&255),l.push(a>>8&255),l.push(a&255)):r===18?(l.push(a>>10&255),l.push(a>>2&255)):r===12&&l.push(a>>4&255),new Uint8Array(l)}function lG(t){var e="",r=0,n,i,o=t.length,a=gT;for(n=0;n<o;n++)n%3===0&&n&&(e+=a[r>>18&63],e+=a[r>>12&63],e+=a[r>>6&63],e+=a[r&63]),r=(r<<8)+t[n];return i=o%3,i===0?(e+=a[r>>18&63],e+=a[r>>12&63],e+=a[r>>6&63],e+=a[r&63]):i===2?(e+=a[r>>10&63],e+=a[r>>4&63],e+=a[r<<2&63],e+=a[64]):i===1&&(e+=a[r>>2&63],e+=a[r<<4&63],e+=a[64],e+=a[64]),e}function pG(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var uG=new Ct("tag:yaml.org,2002:binary",{kind:"scalar",resolve:aG,construct:cG,predicate:pG,represent:lG}),fG=Object.prototype.hasOwnProperty,dG=Object.prototype.toString;function mG(t){if(t===null)return!0;var e=[],r,n,i,o,a,l=t;for(r=0,n=l.length;r<n;r+=1){if(i=l[r],a=!1,dG.call(i)!=="[object Object]")return!1;for(o in i)if(fG.call(i,o))if(!a)a=!0;else return!1;if(!a)return!1;if(e.indexOf(o)===-1)e.push(o);else return!1}return!0}function hG(t){return t!==null?t:[]}var gG=new Ct("tag:yaml.org,2002:omap",{kind:"sequence",resolve:mG,construct:hG}),yG=Object.prototype.toString;function xG(t){if(t===null)return!0;var e,r,n,i,o,a=t;for(o=new Array(a.length),e=0,r=a.length;e<r;e+=1){if(n=a[e],yG.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;o[e]=[i[0],n[i[0]]]}return!0}function TG(t){if(t===null)return[];var e,r,n,i,o,a=t;for(o=new Array(a.length),e=0,r=a.length;e<r;e+=1)n=a[e],i=Object.keys(n),o[e]=[i[0],n[i[0]]];return o}var SG=new Ct("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:xG,construct:TG}),vG=Object.prototype.hasOwnProperty;function bG(t){if(t===null)return!0;var e,r=t;for(e in r)if(vG.call(r,e)&&r[e]!==null)return!1;return!0}function wG(t){return t!==null?t:{}}var _G=new Ct("tag:yaml.org,2002:set",{kind:"mapping",resolve:bG,construct:wG}),yT=eG.extend({implicit:[iG,sG],explicit:[uG,gG,SG,_G]}),Ji=Object.prototype.hasOwnProperty,ff=1,xk=2,Tk=3,df=4,pT=1,EG=2,ek=3,RG=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,kG=/[\x85\u2028\u2029]/,PG=/[,\[\]\{\}]/,Sk=/^(?:!|!!|![a-z\-]+!)$/i,vk=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function tk(t){return Object.prototype.toString.call(t)}function Hn(t){return t===10||t===13}function Ho(t){return t===9||t===32}function mr(t){return t===9||t===32||t===10||t===13}function ia(t){return t===44||t===91||t===93||t===123||t===125}function MG(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function AG(t){return t===120?2:t===117?4:t===85?8:0}function DG(t){return 48<=t&&t<=57?t-48:-1}function rk(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}function IG(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var bk=new Array(256),wk=new Array(256);for(Bo=0;Bo<256;Bo++)bk[Bo]=rk(Bo)?1:0,wk[Bo]=rk(Bo);var Bo;function FG(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||yT,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function _k(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=Sz(r),new dr(e,r)}function se(t,e){throw _k(t,e)}function mf(t,e){t.onWarning&&t.onWarning.call(null,_k(t,e))}var nk={YAML:function(e,r,n){var i,o,a;e.version!==null&&se(e,"duplication of %YAML directive"),n.length!==1&&se(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&se(e,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),a=parseInt(i[2],10),o!==1&&se(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=a<2,a!==1&&a!==2&&mf(e,"unsupported YAML version of the document")},TAG:function(e,r,n){var i,o;n.length!==2&&se(e,"TAG directive accepts exactly two arguments"),i=n[0],o=n[1],Sk.test(i)||se(e,"ill-formed tag handle (first argument) of the TAG directive"),Ji.call(e.tagMap,i)&&se(e,'there is a previously declared suffix for "'+i+'" tag handle'),vk.test(o)||se(e,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{se(e,"tag prefix is malformed: "+o)}e.tagMap[i]=o}};function Xi(t,e,r,n){var i,o,a,l;if(e<r){if(l=t.input.slice(e,r),n)for(i=0,o=l.length;i<o;i+=1)a=l.charCodeAt(i),a===9||32<=a&&a<=1114111||se(t,"expected valid JSON character");else RG.test(l)&&se(t,"the stream contains non-printable characters");t.result+=l}}function ik(t,e,r,n){var i,o,a,l;for(vt.isObject(r)||se(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),a=0,l=i.length;a<l;a+=1)o=i[a],Ji.call(e,o)||(e[o]=r[o],n[o]=!0)}function oa(t,e,r,n,i,o,a,l,p){var u,d;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),u=0,d=i.length;u<d;u+=1)Array.isArray(i[u])&&se(t,"nested arrays are not supported inside keys"),typeof i=="object"&&tk(i[u])==="[object Object]"&&(i[u]="[object Object]");if(typeof i=="object"&&tk(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(u=0,d=o.length;u<d;u+=1)ik(t,e,o[u],r);else ik(t,e,o,r);else!t.json&&!Ji.call(r,i)&&Ji.call(e,i)&&(t.line=a||t.line,t.lineStart=l||t.lineStart,t.position=p||t.position,se(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):e[i]=o,delete r[i];return e}function xT(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):se(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function yt(t,e,r){for(var n=0,i=t.input.charCodeAt(t.position);i!==0;){for(;Ho(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(Hn(i))for(xT(t),i=t.input.charCodeAt(t.position),n++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return r!==-1&&n!==0&&t.lineIndent<r&&mf(t,"deficient indentation"),n}function yf(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||mr(r)))}function TT(t,e){e===1?t.result+=" ":e>1&&(t.result+=vt.repeat(`
`,e-1))}function CG(t,e,r){var n,i,o,a,l,p,u,d,h=t.kind,g=t.result,x;if(x=t.input.charCodeAt(t.position),mr(x)||ia(x)||x===35||x===38||x===42||x===33||x===124||x===62||x===39||x===34||x===37||x===64||x===96||(x===63||x===45)&&(i=t.input.charCodeAt(t.position+1),mr(i)||r&&ia(i)))return!1;for(t.kind="scalar",t.result="",o=a=t.position,l=!1;x!==0;){if(x===58){if(i=t.input.charCodeAt(t.position+1),mr(i)||r&&ia(i))break}else if(x===35){if(n=t.input.charCodeAt(t.position-1),mr(n))break}else{if(t.position===t.lineStart&&yf(t)||r&&ia(x))break;if(Hn(x))if(p=t.line,u=t.lineStart,d=t.lineIndent,yt(t,!1,-1),t.lineIndent>=e){l=!0,x=t.input.charCodeAt(t.position);continue}else{t.position=a,t.line=p,t.lineStart=u,t.lineIndent=d;break}}l&&(Xi(t,o,a,!1),TT(t,t.line-p),o=a=t.position,l=!1),Ho(x)||(a=t.position+1),x=t.input.charCodeAt(++t.position)}return Xi(t,o,a,!1),t.result?!0:(t.kind=h,t.result=g,!1)}function OG(t,e){var r,n,i;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(Xi(t,n,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)n=t.position,t.position++,i=t.position;else return!0;else Hn(r)?(Xi(t,n,i,!0),TT(t,yt(t,!1,e)),n=i=t.position):t.position===t.lineStart&&yf(t)?se(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);se(t,"unexpected end of the stream within a single quoted scalar")}function NG(t,e){var r,n,i,o,a,l;if(l=t.input.charCodeAt(t.position),l!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(l=t.input.charCodeAt(t.position))!==0;){if(l===34)return Xi(t,r,t.position,!0),t.position++,!0;if(l===92){if(Xi(t,r,t.position,!0),l=t.input.charCodeAt(++t.position),Hn(l))yt(t,!1,e);else if(l<256&&bk[l])t.result+=wk[l],t.position++;else if((a=AG(l))>0){for(i=a,o=0;i>0;i--)l=t.input.charCodeAt(++t.position),(a=MG(l))>=0?o=(o<<4)+a:se(t,"expected hexadecimal character");t.result+=IG(o),t.position++}else se(t,"unknown escape sequence");r=n=t.position}else Hn(l)?(Xi(t,r,n,!0),TT(t,yt(t,!1,e)),r=n=t.position):t.position===t.lineStart&&yf(t)?se(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}se(t,"unexpected end of the stream within a double quoted scalar")}function LG(t,e){var r=!0,n,i,o,a=t.tag,l,p=t.anchor,u,d,h,g,x,b=Object.create(null),w,F,M,U;if(U=t.input.charCodeAt(t.position),U===91)d=93,x=!1,l=[];else if(U===123)d=125,x=!0,l={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=l),U=t.input.charCodeAt(++t.position);U!==0;){if(yt(t,!0,e),U=t.input.charCodeAt(t.position),U===d)return t.position++,t.tag=a,t.anchor=p,t.kind=x?"mapping":"sequence",t.result=l,!0;r?U===44&&se(t,"expected the node content, but found ','"):se(t,"missed comma between flow collection entries"),F=w=M=null,h=g=!1,U===63&&(u=t.input.charCodeAt(t.position+1),mr(u)&&(h=g=!0,t.position++,yt(t,!0,e))),n=t.line,i=t.lineStart,o=t.position,sa(t,e,ff,!1,!0),F=t.tag,w=t.result,yt(t,!0,e),U=t.input.charCodeAt(t.position),(g||t.line===n)&&U===58&&(h=!0,U=t.input.charCodeAt(++t.position),yt(t,!0,e),sa(t,e,ff,!1,!0),M=t.result),x?oa(t,l,b,F,w,M,n,i,o):h?l.push(oa(t,null,b,F,w,M,n,i,o)):l.push(w),yt(t,!0,e),U=t.input.charCodeAt(t.position),U===44?(r=!0,U=t.input.charCodeAt(++t.position)):r=!1}se(t,"unexpected end of the stream within a flow collection")}function UG(t,e){var r,n,i=pT,o=!1,a=!1,l=e,p=0,u=!1,d,h;if(h=t.input.charCodeAt(t.position),h===124)n=!1;else if(h===62)n=!0;else return!1;for(t.kind="scalar",t.result="";h!==0;)if(h=t.input.charCodeAt(++t.position),h===43||h===45)pT===i?i=h===43?ek:EG:se(t,"repeat of a chomping mode identifier");else if((d=DG(h))>=0)d===0?se(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):a?se(t,"repeat of an indentation width identifier"):(l=e+d-1,a=!0);else break;if(Ho(h)){do h=t.input.charCodeAt(++t.position);while(Ho(h));if(h===35)do h=t.input.charCodeAt(++t.position);while(!Hn(h)&&h!==0)}for(;h!==0;){for(xT(t),t.lineIndent=0,h=t.input.charCodeAt(t.position);(!a||t.lineIndent<l)&&h===32;)t.lineIndent++,h=t.input.charCodeAt(++t.position);if(!a&&t.lineIndent>l&&(l=t.lineIndent),Hn(h)){p++;continue}if(t.lineIndent<l){i===ek?t.result+=vt.repeat(`
`,o?1+p:p):i===pT&&o&&(t.result+=`
`);break}for(n?Ho(h)?(u=!0,t.result+=vt.repeat(`
`,o?1+p:p)):u?(u=!1,t.result+=vt.repeat(`
`,p+1)):p===0?o&&(t.result+=" "):t.result+=vt.repeat(`
`,p):t.result+=vt.repeat(`
`,o?1+p:p),o=!0,a=!0,p=0,r=t.position;!Hn(h)&&h!==0;)h=t.input.charCodeAt(++t.position);Xi(t,r,t.position,!1)}return!0}function ok(t,e){var r,n=t.tag,i=t.anchor,o=[],a,l=!1,p;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),p=t.input.charCodeAt(t.position);p!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,se(t,"tab characters must not be used in indentation")),!(p!==45||(a=t.input.charCodeAt(t.position+1),!mr(a))));){if(l=!0,t.position++,yt(t,!0,-1)&&t.lineIndent<=e){o.push(null),p=t.input.charCodeAt(t.position);continue}if(r=t.line,sa(t,e,Tk,!1,!0),o.push(t.result),yt(t,!0,-1),p=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&p!==0)se(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return l?(t.tag=n,t.anchor=i,t.kind="sequence",t.result=o,!0):!1}function VG(t,e,r){var n,i,o,a,l,p,u=t.tag,d=t.anchor,h={},g=Object.create(null),x=null,b=null,w=null,F=!1,M=!1,U;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=h),U=t.input.charCodeAt(t.position);U!==0;){if(!F&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,se(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),o=t.line,(U===63||U===58)&&mr(n))U===63?(F&&(oa(t,h,g,x,b,null,a,l,p),x=b=w=null),M=!0,F=!0,i=!0):F?(F=!1,i=!0):se(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,U=n;else{if(a=t.line,l=t.lineStart,p=t.position,!sa(t,r,xk,!1,!0))break;if(t.line===o){for(U=t.input.charCodeAt(t.position);Ho(U);)U=t.input.charCodeAt(++t.position);if(U===58)U=t.input.charCodeAt(++t.position),mr(U)||se(t,"a whitespace character is expected after the key-value separator within a block mapping"),F&&(oa(t,h,g,x,b,null,a,l,p),x=b=w=null),M=!0,F=!1,i=!1,x=t.tag,b=t.result;else if(M)se(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=u,t.anchor=d,!0}else if(M)se(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=u,t.anchor=d,!0}if((t.line===o||t.lineIndent>e)&&(F&&(a=t.line,l=t.lineStart,p=t.position),sa(t,e,df,!0,i)&&(F?b=t.result:w=t.result),F||(oa(t,h,g,x,b,w,a,l,p),x=b=w=null),yt(t,!0,-1),U=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&U!==0)se(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return F&&oa(t,h,g,x,b,null,a,l,p),M&&(t.tag=u,t.anchor=d,t.kind="mapping",t.result=h),M}function BG(t){var e,r=!1,n=!1,i,o,a;if(a=t.input.charCodeAt(t.position),a!==33)return!1;if(t.tag!==null&&se(t,"duplication of a tag property"),a=t.input.charCodeAt(++t.position),a===60?(r=!0,a=t.input.charCodeAt(++t.position)):a===33?(n=!0,i="!!",a=t.input.charCodeAt(++t.position)):i="!",e=t.position,r){do a=t.input.charCodeAt(++t.position);while(a!==0&&a!==62);t.position<t.length?(o=t.input.slice(e,t.position),a=t.input.charCodeAt(++t.position)):se(t,"unexpected end of the stream within a verbatim tag")}else{for(;a!==0&&!mr(a);)a===33&&(n?se(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),Sk.test(i)||se(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),a=t.input.charCodeAt(++t.position);o=t.input.slice(e,t.position),PG.test(o)&&se(t,"tag suffix cannot contain flow indicator characters")}o&&!vk.test(o)&&se(t,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{se(t,"tag name is malformed: "+o)}return r?t.tag=o:Ji.call(t.tagMap,i)?t.tag=t.tagMap[i]+o:i==="!"?t.tag="!"+o:i==="!!"?t.tag="tag:yaml.org,2002:"+o:se(t,'undeclared tag handle "'+i+'"'),!0}function HG(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&se(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!mr(r)&&!ia(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&se(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function WG(t){var e,r,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!mr(n)&&!ia(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&se(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),Ji.call(t.anchorMap,r)||se(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],yt(t,!0,-1),!0}function sa(t,e,r,n,i){var o,a,l,p=1,u=!1,d=!1,h,g,x,b,w,F;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=a=l=df===r||Tk===r,n&&yt(t,!0,-1)&&(u=!0,t.lineIndent>e?p=1:t.lineIndent===e?p=0:t.lineIndent<e&&(p=-1)),p===1)for(;BG(t)||HG(t);)yt(t,!0,-1)?(u=!0,l=o,t.lineIndent>e?p=1:t.lineIndent===e?p=0:t.lineIndent<e&&(p=-1)):l=!1;if(l&&(l=u||i),(p===1||df===r)&&(ff===r||xk===r?w=e:w=e+1,F=t.position-t.lineStart,p===1?l&&(ok(t,F)||VG(t,F,w))||LG(t,w)?d=!0:(a&&UG(t,w)||OG(t,w)||NG(t,w)?d=!0:WG(t)?(d=!0,(t.tag!==null||t.anchor!==null)&&se(t,"alias node should not have any properties")):CG(t,w,ff===r)&&(d=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):p===0&&(d=l&&ok(t,F))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&se(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),h=0,g=t.implicitTypes.length;h<g;h+=1)if(b=t.implicitTypes[h],b.resolve(t.result)){t.result=b.construct(t.result),t.tag=b.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(Ji.call(t.typeMap[t.kind||"fallback"],t.tag))b=t.typeMap[t.kind||"fallback"][t.tag];else for(b=null,x=t.typeMap.multi[t.kind||"fallback"],h=0,g=x.length;h<g;h+=1)if(t.tag.slice(0,x[h].tag.length)===x[h].tag){b=x[h];break}b||se(t,"unknown tag !<"+t.tag+">"),t.result!==null&&b.kind!==t.kind&&se(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+b.kind+'", not "'+t.kind+'"'),b.resolve(t.result,t.tag)?(t.result=b.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):se(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||d}function $G(t){var e=t.position,r,n,i,o=!1,a;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(a=t.input.charCodeAt(t.position))!==0&&(yt(t,!0,-1),a=t.input.charCodeAt(t.position),!(t.lineIndent>0||a!==37));){for(o=!0,a=t.input.charCodeAt(++t.position),r=t.position;a!==0&&!mr(a);)a=t.input.charCodeAt(++t.position);for(n=t.input.slice(r,t.position),i=[],n.length<1&&se(t,"directive name must not be less than one character in length");a!==0;){for(;Ho(a);)a=t.input.charCodeAt(++t.position);if(a===35){do a=t.input.charCodeAt(++t.position);while(a!==0&&!Hn(a));break}if(Hn(a))break;for(r=t.position;a!==0&&!mr(a);)a=t.input.charCodeAt(++t.position);i.push(t.input.slice(r,t.position))}a!==0&&xT(t),Ji.call(nk,n)?nk[n](t,n,i):mf(t,'unknown document directive "'+n+'"')}if(yt(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,yt(t,!0,-1)):o&&se(t,"directives end mark is expected"),sa(t,t.lineIndent-1,df,!1,!0),yt(t,!0,-1),t.checkLineBreaks&&kG.test(t.input.slice(e,t.position))&&mf(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&yf(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,yt(t,!0,-1));return}if(t.position<t.length-1)se(t,"end of the stream or a document separator is expected");else return}function Ek(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new FG(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,se(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)$G(r);return r.documents}function qG(t,e,r){e!==null&&typeof e=="object"&&typeof r>"u"&&(r=e,e=null);var n=Ek(t,r);if(typeof e!="function")return n;for(var i=0,o=n.length;i<o;i+=1)e(n[i])}function jG(t,e){var r=Ek(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new dr("expected a single document in the stream, but found more")}}var zG=qG,GG=jG,Rk={loadAll:zG,load:GG},kk=Object.prototype.toString,Pk=Object.prototype.hasOwnProperty,ST=65279,KG=9,zc=10,QG=13,ZG=32,YG=33,XG=34,fT=35,JG=37,eK=38,tK=39,rK=42,Mk=44,nK=45,hf=58,iK=61,oK=62,sK=63,aK=64,Ak=91,Dk=93,cK=96,Ik=123,lK=124,Fk=125,$t={};$t[0]="\\0";$t[7]="\\a";$t[8]="\\b";$t[9]="\\t";$t[10]="\\n";$t[11]="\\v";$t[12]="\\f";$t[13]="\\r";$t[27]="\\e";$t[34]='\\"';$t[92]="\\\\";$t[133]="\\N";$t[160]="\\_";$t[8232]="\\L";$t[8233]="\\P";var pK=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],uK=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function fK(t,e){var r,n,i,o,a,l,p;if(e===null)return{};for(r={},n=Object.keys(e),i=0,o=n.length;i<o;i+=1)a=n[i],l=String(e[a]),a.slice(0,2)==="!!"&&(a="tag:yaml.org,2002:"+a.slice(2)),p=t.compiledTypeMap.fallback[a],p&&Pk.call(p.styleAliases,l)&&(l=p.styleAliases[l]),r[a]=l;return r}function dK(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else if(t<=4294967295)r="U",n=8;else throw new dr("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+vt.repeat("0",n-e.length)+e}var mK=1,Gc=2;function hK(t){this.schema=t.schema||yT,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=vt.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=fK(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?Gc:mK,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function sk(t,e){for(var r=vt.repeat(" ",e),n=0,i=-1,o="",a,l=t.length;n<l;)i=t.indexOf(`
`,n),i===-1?(a=t.slice(n),n=l):(a=t.slice(n,i+1),n=i+1),a.length&&a!==`
`&&(o+=r),o+=a;return o}function dT(t,e){return`
`+vt.repeat(" ",t.indent*e)}function gK(t,e){var r,n,i;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(i=t.implicitTypes[r],i.resolve(e))return!0;return!1}function gf(t){return t===ZG||t===KG}function Kc(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==ST||65536<=t&&t<=1114111}function ak(t){return Kc(t)&&t!==ST&&t!==QG&&t!==zc}function ck(t,e,r){var n=ak(t),i=n&&!gf(t);return(r?n:n&&t!==Mk&&t!==Ak&&t!==Dk&&t!==Ik&&t!==Fk)&&t!==fT&&!(e===hf&&!i)||ak(e)&&!gf(e)&&t===fT||e===hf&&i}function yK(t){return Kc(t)&&t!==ST&&!gf(t)&&t!==nK&&t!==sK&&t!==hf&&t!==Mk&&t!==Ak&&t!==Dk&&t!==Ik&&t!==Fk&&t!==fT&&t!==eK&&t!==rK&&t!==YG&&t!==lK&&t!==iK&&t!==oK&&t!==tK&&t!==XG&&t!==JG&&t!==aK&&t!==cK}function xK(t){return!gf(t)&&t!==hf}function qc(t,e){var r=t.charCodeAt(e),n;return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function Ck(t){var e=/^\n* /;return e.test(t)}var Ok=1,mT=2,Nk=3,Lk=4,na=5;function TK(t,e,r,n,i,o,a,l){var p,u=0,d=null,h=!1,g=!1,x=n!==-1,b=-1,w=yK(qc(t,0))&&xK(qc(t,t.length-1));if(e||a)for(p=0;p<t.length;u>=65536?p+=2:p++){if(u=qc(t,p),!Kc(u))return na;w=w&&ck(u,d,l),d=u}else{for(p=0;p<t.length;u>=65536?p+=2:p++){if(u=qc(t,p),u===zc)h=!0,x&&(g=g||p-b-1>n&&t[b+1]!==" ",b=p);else if(!Kc(u))return na;w=w&&ck(u,d,l),d=u}g=g||x&&p-b-1>n&&t[b+1]!==" "}return!h&&!g?w&&!a&&!i(t)?Ok:o===Gc?na:mT:r>9&&Ck(t)?na:a?o===Gc?na:mT:g?Lk:Nk}function SK(t,e,r,n,i){t.dump=function(){if(e.length===0)return t.quotingType===Gc?'""':"''";if(!t.noCompatMode&&(pK.indexOf(e)!==-1||uK.test(e)))return t.quotingType===Gc?'"'+e+'"':"'"+e+"'";var o=t.indent*Math.max(1,r),a=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),l=n||t.flowLevel>-1&&r>=t.flowLevel;function p(u){return gK(t,u)}switch(TK(e,l,t.indent,a,p,t.quotingType,t.forceQuotes&&!n,i)){case Ok:return e;case mT:return"'"+e.replace(/'/g,"''")+"'";case Nk:return"|"+lk(e,t.indent)+pk(sk(e,o));case Lk:return">"+lk(e,t.indent)+pk(sk(vK(e,a),o));case na:return'"'+bK(e)+'"';default:throw new dr("impossible error: invalid scalar style")}}()}function lk(t,e){var r=Ck(t)?String(e):"",n=t[t.length-1]===`
`,i=n&&(t[t.length-2]===`
`||t===`
`),o=i?"+":n?"":"-";return r+o+`
`}function pk(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function vK(t,e){for(var r=/(\n+)([^\n]*)/g,n=function(){var u=t.indexOf(`
`);return u=u!==-1?u:t.length,r.lastIndex=u,uk(t.slice(0,u),e)}(),i=t[0]===`
`||t[0]===" ",o,a;a=r.exec(t);){var l=a[1],p=a[2];o=p[0]===" ",n+=l+(!i&&!o&&p!==""?`
`:"")+uk(p,e),i=o}return n}function uk(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,n,i=0,o,a=0,l=0,p="";n=r.exec(t);)l=n.index,l-i>e&&(o=a>i?a:l,p+=`
`+t.slice(i,o),i=o+1),a=l;return p+=`
`,t.length-i>e&&a>i?p+=t.slice(i,a)+`
`+t.slice(a+1):p+=t.slice(i),p.slice(1)}function bK(t){for(var e="",r=0,n,i=0;i<t.length;r>=65536?i+=2:i++)r=qc(t,i),n=$t[r],!n&&Kc(r)?(e+=t[i],r>=65536&&(e+=t[i+1])):e+=n||dK(r);return e}function wK(t,e,r){var n="",i=t.tag,o,a,l;for(o=0,a=r.length;o<a;o+=1)l=r[o],t.replacer&&(l=t.replacer.call(r,String(o),l)),(xi(t,e,l,!1,!1)||typeof l>"u"&&xi(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=i,t.dump="["+n+"]"}function fk(t,e,r,n){var i="",o=t.tag,a,l,p;for(a=0,l=r.length;a<l;a+=1)p=r[a],t.replacer&&(p=t.replacer.call(r,String(a),p)),(xi(t,e+1,p,!0,!0,!1,!0)||typeof p>"u"&&xi(t,e+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=dT(t,e)),t.dump&&zc===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=o,t.dump=i||"[]"}function _K(t,e,r){var n="",i=t.tag,o=Object.keys(r),a,l,p,u,d;for(a=0,l=o.length;a<l;a+=1)d="",n!==""&&(d+=", "),t.condenseFlow&&(d+='"'),p=o[a],u=r[p],t.replacer&&(u=t.replacer.call(r,p,u)),xi(t,e,p,!1,!1)&&(t.dump.length>1024&&(d+="? "),d+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),xi(t,e,u,!1,!1)&&(d+=t.dump,n+=d));t.tag=i,t.dump="{"+n+"}"}function EK(t,e,r,n){var i="",o=t.tag,a=Object.keys(r),l,p,u,d,h,g;if(t.sortKeys===!0)a.sort();else if(typeof t.sortKeys=="function")a.sort(t.sortKeys);else if(t.sortKeys)throw new dr("sortKeys must be a boolean or a function");for(l=0,p=a.length;l<p;l+=1)g="",(!n||i!=="")&&(g+=dT(t,e)),u=a[l],d=r[u],t.replacer&&(d=t.replacer.call(r,u,d)),xi(t,e+1,u,!0,!0,!0)&&(h=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,h&&(t.dump&&zc===t.dump.charCodeAt(0)?g+="?":g+="? "),g+=t.dump,h&&(g+=dT(t,e)),xi(t,e+1,d,!0,h)&&(t.dump&&zc===t.dump.charCodeAt(0)?g+=":":g+=": ",g+=t.dump,i+=g));t.tag=o,t.dump=i||"{}"}function dk(t,e,r){var n,i,o,a,l,p;for(i=r?t.explicitTypes:t.implicitTypes,o=0,a=i.length;o<a;o+=1)if(l=i[o],(l.instanceOf||l.predicate)&&(!l.instanceOf||typeof e=="object"&&e instanceof l.instanceOf)&&(!l.predicate||l.predicate(e))){if(r?l.multi&&l.representName?t.tag=l.representName(e):t.tag=l.tag:t.tag="?",l.represent){if(p=t.styleMap[l.tag]||l.defaultStyle,kk.call(l.represent)==="[object Function]")n=l.represent(e,p);else if(Pk.call(l.represent,p))n=l.represent[p](e,p);else throw new dr("!<"+l.tag+'> tag resolver accepts not "'+p+'" style');t.dump=n}return!0}return!1}function xi(t,e,r,n,i,o,a){t.tag=null,t.dump=r,dk(t,r,!1)||dk(t,r,!0);var l=kk.call(t.dump),p=n,u;n&&(n=t.flowLevel<0||t.flowLevel>e);var d=l==="[object Object]"||l==="[object Array]",h,g;if(d&&(h=t.duplicates.indexOf(r),g=h!==-1),(t.tag!==null&&t.tag!=="?"||g||t.indent!==2&&e>0)&&(i=!1),g&&t.usedDuplicates[h])t.dump="*ref_"+h;else{if(d&&g&&!t.usedDuplicates[h]&&(t.usedDuplicates[h]=!0),l==="[object Object]")n&&Object.keys(t.dump).length!==0?(EK(t,e,t.dump,i),g&&(t.dump="&ref_"+h+t.dump)):(_K(t,e,t.dump),g&&(t.dump="&ref_"+h+" "+t.dump));else if(l==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!a&&e>0?fk(t,e-1,t.dump,i):fk(t,e,t.dump,i),g&&(t.dump="&ref_"+h+t.dump)):(wK(t,e,t.dump),g&&(t.dump="&ref_"+h+" "+t.dump));else if(l==="[object String]")t.tag!=="?"&&SK(t,t.dump,e,o,p);else{if(l==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new dr("unacceptable kind of an object to dump "+l)}t.tag!==null&&t.tag!=="?"&&(u=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?u="!"+u:u.slice(0,18)==="tag:yaml.org,2002:"?u="!!"+u.slice(18):u="!<"+u+">",t.dump=u+" "+t.dump)}return!0}function RK(t,e){var r=[],n=[],i,o;for(hT(t,r,n),i=0,o=n.length;i<o;i+=1)e.duplicates.push(r[n[i]]);e.usedDuplicates=new Array(o)}function hT(t,e,r){var n,i,o;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(e.push(t),Array.isArray(t))for(i=0,o=t.length;i<o;i+=1)hT(t[i],e,r);else for(n=Object.keys(t),i=0,o=n.length;i<o;i+=1)hT(t[n[i]],e,r)}function kK(t,e){e=e||{};var r=new hK(e);r.noRefs||RK(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),xi(r,0,n,!0,!0)?r.dump+`
`:""}var PK=kK,MK={dump:PK};function vT(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var Uk=Ct;var Vk=yT,AK=Rk.load,Rfe=Rk.loadAll,Bk=MK.dump;var kfe=vT("safeLoad","load"),Pfe=vT("safeLoadAll","loadAll"),Mfe=vT("safeDump","dump");var xf=class{constructor(e,r){this.data=e;this.opts=r}represent(){let e=Bk(this.data,Object.assign({replacer:CK,schema:IK},this.opts));return e=e.trim(),e.includes(`
`)&&(e=`
`+e),e}},DK=new Uk("!format",{kind:"scalar",resolve:()=>!1,instanceOf:xf,represent:t=>t.represent()}),IK=Vk.extend({implicit:[DK]}),bT=t=>typeof t=="object"&&t!=null;function FK(t){if(bT(t))return Object.values(t).every(e=>!bT(e)&&!Array.isArray(e));if(Array.isArray(t))return t.every(e=>!bT(e)&&!Array.isArray(e))}function CK(t,e){return t===""?e:FK(e)?new xf(e,{flowLevel:0}):e}var wT=["breakLine","clearAndSetSelection","copyToClipboard","cutToClipboard","decrement","deselect","editNewLineAfter","editNewLineBefore","experimental.setInstanceReference","extractVariable","findInDocument","findInWorkspace","foldRegion","followLink","followLinkAside","increment","indentLine","insertCopyAfter","insertCopyBefore","insertEmptyLineAfter","insertEmptyLineBefore","insertEmptyLinesAround","joinLines","outdentLine","randomizeTargets","remove","rename","revealDefinition","revealTypeDefinition","reverseTargets","scrollToBottom","scrollToCenter","scrollToTop","setSelection","setSelectionAfter","setSelectionBefore","showDebugHover","showHover","showQuickFix","showReferences","sortTargets","toggleLineBreakpoint","toggleLineComment","unfoldRegion","private.setKeyboardTarget","private.showParseTree","private.getTargets"],NK=["callAsFunction","editNew","executeCommand","generateSnippet","getText","highlight","insertSnippet","moveToTarget","pasteFromClipboard","replace","replaceWithTarget","rewrapWithPairedDelimiter","swapTargets","wrapWithPairedDelimiter","wrapWithSnippet","parsed"],Wk=[...wT,...NK];var LK=["angleBrackets","backtickQuotes","curlyBrackets","doubleQuotes","escapedDoubleQuotes","escapedParentheses","escapedSingleQuotes","escapedSquareBrackets","parentheses","singleQuotes","squareBrackets","tripleDoubleQuotes","tripleSingleQuotes"],UK=["string","any","collectionBoundary"],Tf=[...LK,...UK],Wo=["argumentOrParameter","anonymousFunction","attribute","branch","class","className","collectionItem","collectionKey","comment","private.fieldAccess","functionCall","functionCallee","functionName","ifStatement","instance","list","map","name","namedFunction","regularExpression","statement","string","type","value","condition","section","sectionLevelOne","sectionLevelTwo","sectionLevelThree","sectionLevelFour","sectionLevelFive","sectionLevelSix","selector","private.switchStatementSubject","unit","xmlBothTags","xmlElement","xmlEndTag","xmlStartTag","part","chapter","subSection","subSubSection","namedParagraph","subParagraph","environment","character","word","token","identifier","line","sentence","paragraph","boundedParagraph","document","nonWhitespaceSequence","boundedNonWhitespaceSequence","url","notebookCell","command","textFragment","disqualifyDelimiter"];function $k(t){return Wo.includes(t.type)}var qk=["simpleScopeTypeType","complexScopeTypeType","customRegex","pairedDelimiter","action","customAction","grapheme"],Qc=class extends Error{constructor(e){super(e),this.name="NeedsInitialTalonUpdateError"}},aa=class extends Error{constructor(){super("Custom spoken forms are not currently supported in this ide"),this.name="DisabledCustomSpokenFormsError"}};function Zc(t){return t.replace(/([A-Z])/g," $1").split(" ").map(e=>e.toLowerCase()).join(" ")}function $o(t){return t.version>=7}var eo=class{constructor(e){this.hashFunction=e;this.map={}}hash(e){return this.hashFunction(e).join("\0")}set(e,r){return this.map[this.hash(e)]=r,this}has(e){return this.hash(e)in this.map}get(e){return this.map[this.hash(e)]}delete(e){return delete this.map[this.hash(e)],this}clear(){return this.map={},this}};var to=class extends Map{constructor(r){super();this.getDefaultValue=r}get(r){let n=super.get(r);if(n!=null)return n;let i=this.getDefaultValue(r);return this.set(r,i),i}};function jk(...t){return{dispose(){t.forEach(({dispose:e})=>{try{e()}catch(r){console.error(r)}})}}}function Yc(t){return typeof t=="string"||t instanceof String}function Sf(t){let[e,...r]=t;return BK(e,r)}function BK(t,e){let r;if(Yc(t)){let n=t,[i,o,...a]=e;r={version:0,spokenForm:n,action:i,targets:o,extraArgs:a,usePrePhraseSnapshot:!1}}else r=t;return r}function Xc(t,e){let r=new Map;return t.forEach(n=>{let i=e(n),o;r.has(i)?o=r.get(i):(o=[],r.set(i,o)),o.push(n)}),r}function zk(t){for(let e of t)return!1;return!0}function Ti(t){return Object.keys(t)}function Jc(t,e){return`${t}.${e}`}var Kk={camelCase(t){if(t.length===0)return"";let[e,...r]=t;return e+r.map(Gk).join("")},snakeCase(t){return t.join("_")},upperSnakeCase(t){return t.map(e=>e.toUpperCase()).join("_")},pascalCase(t){return t.map(Gk).join("")}};function Gk(t){return t.length===0?"":t[0].toUpperCase()+t.substr(1)}function Qk(t,e,r){if(t.length<2)return[...t];if(t.length===2)return e(t[0],t[1])?[t[0]]:[...t];let n=[],i=t.reduce((o,a)=>{let l=r(a),p=o.get(l);return p==null?(o.set(l,[a]),o):(o.get(l).push(a),p.length===2&&n.push(l),o)},new Map);return n.length===0?[...t]:(n.forEach(o=>{i.set(o,Fc(i.get(o),e))}),t.flatMap(o=>{let a=r(o),l=i.get(a);if(l==null||l.length===0)return[];let p=l[0];return e(p,o)?(l.shift(),p):[]}))}function _T(t,e){if(t.length!==e.length)throw new Error("Lists must have the same length");return t.map((r,n)=>[r,e[n]])}var tP=Symbol.for("immer-nothing"),Zk=Symbol.for("immer-draftable"),Fr=Symbol.for("immer-state"),HK=process.env.NODE_ENV!=="production"?[function(t){return`The plugin for '${t}' has not been loaded into Immer. To enable the plugin, import and call \`enable${t}()\` when initializing your application.`},function(t){return`produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '${t}'`},"This object has been frozen and should not be mutated",function(t){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+t},"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.","Immer forbids circular references","The first or second argument to `produce` must be a function","The third argument to `produce` must be a function or undefined","First argument to `createDraft` must be a plain object, an array, or an immerable object","First argument to `finishDraft` must be a draft returned by `createDraft`",function(t){return`'current' expects a draft, got: ${t}`},"Object.defineProperty() cannot be used on an Immer draft","Object.setPrototypeOf() cannot be used on an Immer draft","Immer only supports deleting array indices","Immer only supports setting array indices and the 'length' property",function(t){return`'original' expects a draft, got: ${t}`}]:[];function hr(t,...e){if(process.env.NODE_ENV!=="production"){let r=HK[t],n=typeof r=="function"?r.apply(null,e):r;throw new Error(`[Immer] ${n}`)}throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var ca=Object.getPrototypeOf;function la(t){return!!t&&!!t[Fr]}function jo(t){return t?rP(t)||Array.isArray(t)||!!t[Zk]||!!t.constructor?.[Zk]||Ef(t)||Rf(t):!1}var WK=Object.prototype.constructor.toString();function rP(t){if(!t||typeof t!="object")return!1;let e=ca(t);if(e===null)return!0;let r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===WK}function vf(t,e){_f(t)===0?Reflect.ownKeys(t).forEach(r=>{e(r,t[r],t)}):t.forEach((r,n)=>e(n,r,t))}function _f(t){let e=t[Fr];return e?e.type_:Array.isArray(t)?1:Ef(t)?2:Rf(t)?3:0}function kT(t,e){return _f(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function nP(t,e,r){let n=_f(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function $K(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Ef(t){return t instanceof Map}function Rf(t){return t instanceof Set}function qo(t){return t.copy_||t.base_}function PT(t,e){if(Ef(t))return new Map(t);if(Rf(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);if(!e&&rP(t))return ca(t)?{...t}:Object.assign(Object.create(null),t);let r=Object.getOwnPropertyDescriptors(t);delete r[Fr];let n=Reflect.ownKeys(r);for(let i=0;i<n.length;i++){let o=n[i],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:t[o]})}return Object.create(ca(t),r)}function FT(t,e=!1){return kf(t)||la(t)||!jo(t)||(_f(t)>1&&(t.set=t.add=t.clear=t.delete=qK),Object.freeze(t),e&&Object.entries(t).forEach(([r,n])=>FT(n,!0))),t}function qK(){hr(2)}function kf(t){return Object.isFrozen(t)}var jK={};function zo(t){let e=jK[t];return e||hr(0,t),e}var el;function iP(){return el}function zK(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Yk(t,e){e&&(zo("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function MT(t){AT(t),t.drafts_.forEach(GK),t.drafts_=null}function AT(t){t===el&&(el=t.parent_)}function Xk(t){return el=zK(el,t)}function GK(t){let e=t[Fr];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function Jk(t,e){e.unfinalizedDrafts_=e.drafts_.length;let r=e.drafts_[0];return t!==void 0&&t!==r?(r[Fr].modified_&&(MT(e),hr(4)),jo(t)&&(t=bf(e,t),e.parent_||wf(e,t)),e.patches_&&zo("Patches").generateReplacementPatches_(r[Fr].base_,t,e.patches_,e.inversePatches_)):t=bf(e,r,[]),MT(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==tP?t:void 0}function bf(t,e,r){if(kf(e))return e;let n=e[Fr];if(!n)return vf(e,(i,o)=>eP(t,n,e,i,o,r)),e;if(n.scope_!==t)return e;if(!n.modified_)return wf(t,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;let i=n.copy_,o=i,a=!1;n.type_===3&&(o=new Set(i),i.clear(),a=!0),vf(o,(l,p)=>eP(t,n,i,l,p,r,a)),wf(t,i,!1),r&&t.patches_&&zo("Patches").generatePatches_(n,r,t.patches_,t.inversePatches_)}return n.copy_}function eP(t,e,r,n,i,o,a){if(process.env.NODE_ENV!=="production"&&i===r&&hr(5),la(i)){let l=o&&e&&e.type_!==3&&!kT(e.assigned_,n)?o.concat(n):void 0,p=bf(t,i,l);if(nP(r,n,p),la(p))t.canAutoFreeze_=!1;else return}else a&&r.add(i);if(jo(i)&&!kf(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;bf(t,i),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&wf(t,i)}}function wf(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&FT(e,r)}function KK(t,e){let r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:iP(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1},i=n,o=CT;r&&(i=[n],o=tl);let{revoke:a,proxy:l}=Proxy.revocable(i,o);return n.draft_=l,n.revoke_=a,l}var CT={get(t,e){if(e===Fr)return t;let r=qo(t);if(!kT(r,e))return QK(t,r,e);let n=r[e];return t.finalized_||!jo(n)?n:n===ET(t.base_,e)?(RT(t),t.copy_[e]=IT(n,t)):n},has(t,e){return e in qo(t)},ownKeys(t){return Reflect.ownKeys(qo(t))},set(t,e,r){let n=oP(qo(t),e);if(n?.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){let i=ET(qo(t),e),o=i?.[Fr];if(o&&o.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if($K(r,i)&&(r!==void 0||kT(t.base_,e)))return!0;RT(t),DT(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return ET(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,RT(t),DT(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){let r=qo(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){hr(11)},getPrototypeOf(t){return ca(t.base_)},setPrototypeOf(){hr(12)}},tl={};vf(CT,(t,e)=>{tl[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});tl.deleteProperty=function(t,e){return process.env.NODE_ENV!=="production"&&isNaN(parseInt(e))&&hr(13),tl.set.call(this,t,e,void 0)};tl.set=function(t,e,r){return process.env.NODE_ENV!=="production"&&e!=="length"&&isNaN(parseInt(e))&&hr(14),CT.set.call(this,t[0],e,r,t[0])};function ET(t,e){let r=t[Fr];return(r?qo(r):t)[e]}function QK(t,e,r){let n=oP(e,r);return n?"value"in n?n.value:n.get?.call(t.draft_):void 0}function oP(t,e){if(!(e in t))return;let r=ca(t);for(;r;){let n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=ca(r)}}function DT(t){t.modified_||(t.modified_=!0,t.parent_&&DT(t.parent_))}function RT(t){t.copy_||(t.copy_=PT(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var ZK=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){let o=r;r=e;let a=this;return function(p=o,...u){return a.produce(p,d=>r.call(this,d,...u))}}typeof r!="function"&&hr(6),n!==void 0&&typeof n!="function"&&hr(7);let i;if(jo(e)){let o=Xk(this),a=IT(e,void 0),l=!0;try{i=r(a),l=!1}finally{l?MT(o):AT(o)}return Yk(o,n),Jk(i,o)}else if(!e||typeof e!="object"){if(i=r(e),i===void 0&&(i=e),i===tP&&(i=void 0),this.autoFreeze_&&FT(i,!0),n){let o=[],a=[];zo("Patches").generateReplacementPatches_(e,i,o,a),n(o,a)}return i}else hr(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(a,...l)=>this.produceWithPatches(a,p=>e(p,...l));let n,i;return[this.produce(e,r,(a,l)=>{n=a,i=l}),n,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){jo(t)||hr(8),la(t)&&(t=YK(t));let e=Xk(this),r=IT(t,void 0);return r[Fr].isManual_=!0,AT(e),r}finishDraft(t,e){let r=t&&t[Fr];(!r||!r.isManual_)&&hr(9);let{scope_:n}=r;return Yk(n,e),Jk(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){let i=e[r];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}r>-1&&(e=e.slice(r+1));let n=zo("Patches").applyPatches_;return la(t)?n(t,e):this.produce(t,i=>n(i,e))}};function IT(t,e){let r=Ef(t)?zo("MapSet").proxyMap_(t,e):Rf(t)?zo("MapSet").proxySet_(t,e):KK(t,e);return(e?e.scope_:iP()).drafts_.push(r),r}function YK(t){return la(t)||hr(10,t),sP(t)}function sP(t){if(!jo(t)||kf(t))return t;let e=t[Fr],r;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=PT(t,e.scope_.immer_.useStrictShallowCopy_)}else r=PT(t,!0);return vf(r,(n,i)=>{nP(r,n,sP(i))}),e&&(e.finalized_=!1),r}var Cr=new ZK,Pf=Cr.produce,Ehe=Cr.produceWithPatches.bind(Cr),Rhe=Cr.setAutoFreeze.bind(Cr),khe=Cr.setUseStrictShallowCopy.bind(Cr),Phe=Cr.applyPatches.bind(Cr),Mhe=Cr.createDraft.bind(Cr),Ahe=Cr.finishDraft.bind(Cr);var Wn=ur(EP(),1),Qhe=Wn.default.v1,Zhe=Wn.default.v3,RP=Wn.default.v4,Yhe=Wn.default.v5,Xhe=Wn.default.NIL,Jhe=Wn.default.version,ege=Wn.default.validate,tge=Wn.default.stringify,rge=Wn.default.parse;function kP(t,e,r){if(e>=t.length)throw Error(`Expected at least ${e+1} ${r} but received only ${t.length}`);return t[e]}function $f(t,e){if(Array.isArray(t))return t.map(r=>$f(r,e));if(typeof t=="object"&&t!=null){if(a6(t))return kP(e,t.index,"placeholder value");let r={};for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=$f(t[n],e));return r}return t}function a6(t){return typeof t=="object"&&t!=null&&"type"in t&&t.type==="placeholder"}var Zf=ur(MP(),1);var c6={blue:"blue",green:"green",red:"red",pink:"pink",yellow:"yellow",userColor1:"navy",userColor2:"apricot",default:null},l6={ex:"ex",fox:"fox",wing:"wing",hole:"hole",frame:"frame",curve:"curve",eye:"eye",play:"play",crosshairs:"cross",bolt:"bolt",default:null},jf={cursor:"this",that:"that",source:"source",nothing:"nothing",keyboard:null,explicit:null,decoratedSymbol:null,lineNumber:null,range:null,target:null},zf={modulo100:"row",relativeUp:"up",relativeDown:"down"};function AP(t){let e=c6[t];if(e==null)throw Error(`Unknown hat color '${t}'`);return e}function DP(t){let e=l6[t];if(e==null)throw Error(`Unknown hat shape '${t}'`);return e}function WT(t,e){return Object.fromEntries(Object.entries(t).map(([r,n])=>[r,Object.fromEntries(Object.entries(n).map(([i,o])=>[i,e(o,r,i)]))]))}var p6=Object.fromEntries("air bat cap drum each fine gust harp sit jury crunch look made near odd pit quench red sun trap urge vest whale plex yank zip".split(" ").map((t,e)=>[String.fromCharCode(97+e),t])),u6=Object.fromEntries("zero one two three four five six seven eight nine".split(" ").map((t,e)=>[e.toString(),t])),f6={".":"dot",",":"comma",";":"semicolon",":":"colon","!":"bang","*":"asterisk","@":"at sign","&":"ampersand","?":"question","/":"slash","\\":"backslash","-":"dash","=":"equals","+":"plus","~":"tilde",_:"underscore","#":"hash","%":"percent","^":"caret","|":"pipe",$:"dollar","\xA3":"pound","'":"quote",'"':"double quote","`":"back tick","(":"paren",")":"right paren","{":"brace","}":"right brace","[":"square","]":"right square","<":"angle",">":"right angle","\uFFFD":"special"},IP={...p6,...u6,...f6};function ro(...t){return{defaultSpokenForms:t,isDisabledByDefault:!0,isPrivate:!1}}function Nt(...t){return{defaultSpokenForms:t,isDisabledByDefault:!0,isPrivate:!0}}var FP={pairedDelimiter:{curlyBrackets:"curly",angleBrackets:"diamond",escapedDoubleQuotes:"escaped quad",escapedSingleQuotes:"escaped twin",escapedParentheses:"escaped round",escapedSquareBrackets:"escaped box",doubleQuotes:"quad",parentheses:"round",backtickQuotes:"skis",squareBrackets:"box",singleQuotes:"twin",tripleDoubleQuotes:Nt("triple quad"),tripleSingleQuotes:Nt("triple twin"),any:"pair",string:"string",whitespace:"void",collectionBoundary:Nt("collection boundary")},simpleScopeTypeType:{argumentOrParameter:"arg",attribute:"attribute",functionCall:"call",functionCallee:"callee",className:"class name",class:"class",comment:"comment",functionName:"funk name",namedFunction:"funk",ifStatement:"if state",instance:"instance",collectionItem:"item",collectionKey:"key",anonymousFunction:"lambda",list:"list",map:"map",name:"name",regularExpression:"regex",section:"section",sectionLevelOne:ro("one section"),sectionLevelTwo:ro("two section"),sectionLevelThree:ro("three section"),sectionLevelFour:ro("four section"),sectionLevelFive:ro("five section"),sectionLevelSix:ro("six section"),selector:"selector",statement:"state",branch:"branch",type:"type",value:"value",condition:"condition",unit:"unit",xmlElement:"element",xmlBothTags:"tags",xmlStartTag:"start tag",xmlEndTag:"end tag",part:"part",chapter:"chapter",subSection:"subsection",subSubSection:"subsubsection",namedParagraph:"paragraph",subParagraph:"subparagraph",environment:"environment",command:"command",character:"char",word:"sub",token:"token",identifier:"identifier",line:"line",sentence:"sentence",paragraph:"block",boundedParagraph:"short block",document:"file",nonWhitespaceSequence:"paint",boundedNonWhitespaceSequence:"short paint",url:"link",notebookCell:"cell",string:Nt("parse tree string"),textFragment:Nt("text fragment"),disqualifyDelimiter:Nt("disqualify delimiter"),"private.fieldAccess":Nt("access"),"private.switchStatementSubject":Nt("subject")},complexScopeTypeType:{glyph:"glyph"},surroundingPairForceDirection:{left:"left",right:"right"},simpleModifier:{excludeInterior:"bounds",toRawSelection:"just",leading:"leading",trailing:"trailing",keepContentFilter:"content",keepEmptyFilter:"empty",inferPreviousMark:"its",startOf:"start of",endOf:"end of",interiorOnly:"inside",visible:"visible",extendThroughStartOf:"head",extendThroughEndOf:"tail",everyScope:"every"},modifierExtra:{first:"first",last:"last",previous:"previous",next:"next",forward:"forward",backward:"backward",ancestor:"grand"},customRegex:{},action:{breakLine:"break",scrollToBottom:"bottom",toggleLineBreakpoint:"break point",cutToClipboard:"carve",scrollToCenter:"center",clearAndSetSelection:"change",remove:"chuck",insertCopyBefore:"clone up",insertCopyAfter:"clone",toggleLineComment:"comment",copyToClipboard:"copy",scrollToTop:"crown",outdentLine:"dedent",revealDefinition:"define",editNewLineBefore:"drink",insertEmptyLineBefore:"drop",extractVariable:"extract",insertEmptyLineAfter:"float",foldRegion:"fold",followLink:"follow",followLinkAside:"follow split",deselect:"give",highlight:"highlight",showHover:"hover",increment:"increment",decrement:"decrement",indentLine:"indent",showDebugHover:"inspect",setSelectionAfter:"post",editNewLineAfter:"pour",setSelectionBefore:"pre",insertEmptyLinesAround:"puff",showQuickFix:"quick fix",showReferences:"reference",rename:"rename",reverseTargets:"reverse",findInDocument:"scout",findInWorkspace:"scout all",randomizeTargets:"shuffle",generateSnippet:"snippet make",sortTargets:"sort",setSelection:"take",revealTypeDefinition:"type deaf",unfoldRegion:"unfold",callAsFunction:"call",swapTargets:"swap",replaceWithTarget:"bring",moveToTarget:"move",wrapWithPairedDelimiter:"wrap",wrapWithSnippet:"wrap",rewrapWithPairedDelimiter:"repack",insertSnippet:"snippet",pasteFromClipboard:"paste",joinLines:"join","private.showParseTree":Nt("parse tree"),"experimental.setInstanceReference":ro("from"),editNew:Nt("edit new"),executeCommand:Nt("execute command"),parsed:Nt("parsed"),getText:Nt("get text"),replace:Nt("replace"),"private.getTargets":Nt("get targets"),"private.setKeyboardTarget":Nt("set keyboard target")},customAction:{},grapheme:IP};var $T=WT(FP,t=>typeof t=="string"?{defaultSpokenForms:[t],isDisabledByDefault:!1,isPrivate:!1}:t),vi=WT($T,({defaultSpokenForms:t,isDisabledByDefault:e,isPrivate:r})=>({spokenForms:e?[]:t,isCustom:!1,defaultSpokenForms:t,requiresTalonUpdate:!1,isPrivate:r}));var ft={rangeExclusive:"between",rangeInclusive:"past",rangeExcludingStart:null,rangeExcludingEnd:"until",listConnective:"and",swapConnective:"with",sourceDestinationConnective:"to",before:"before",after:"after",verticalRange:"slice",previous:"previous",next:"next",forward:"forward",backward:"backward"};var NP=ur(OP(),1),Kf=class{constructor(e){this.mooLexer=NP.default.compile(e)}reset(e,r){let{mooState:n}=r??{};return this.mooLexer.reset(e,n),this}formatError(e,r){return this.mooLexer.formatError(e,r)}has(e){return this.mooLexer.has(e)}save(){return{mooState:this.mooLexer.save()}}next(){let e=this.mooLexer.next();return this.skipToken(e)?this.next():e}transform({value:e}){return e}skipToken(e){return e?.type==="ws"}};var bi={};for(let t of wT){let{spokenForms:e}=vi.action[t];for(let r of e)bi[r]={type:"simpleActionName",value:t}}var d6=["replaceWithTarget","moveToTarget"];for(let t of d6){let{spokenForms:e}=vi.action[t];for(let r of e)bi[r]={type:"bringMove",value:t}}var m6=["before","after","to"];for(let t of m6){let e=ft[t==="to"?"sourceDestinationConnective":t];bi[e]={type:"insertionMode",value:t}}for(let t of Wo){let{spokenForms:e}=vi.simpleScopeTypeType[t];for(let r of e)bi[r]={type:"simpleScopeTypeType",value:t}}for(let t of Tf){let{spokenForms:e}=vi.pairedDelimiter[t];for(let r of e)bi[r]={type:"pairedDelimiter",value:t}}for(let[t,e]of Object.entries(jf))e!=null&&(bi[e]={type:"simpleMarkType",value:t});var wi=new Kf({ws:/[ \t]+/,placeholderTarget:{match:/<target\d*>/,value:t=>t.slice(7,-1)},token:{match:Object.keys(bi),type:t=>bi[t].type,value:t=>bi[t].value}});function LP(t,e){return{name:t,target:e}}function UP(t,e,r){return{name:t,source:e,destination:r}}function Qf(t,e){let r={type:"primitive"};return t!=null&&(r.modifiers=t),e!=null&&(r.mark=e),r}function VP(t,e){return{type:"primitive",insertionMode:t,target:e}}function BP(t){return{type:"containingScope",scopeType:t}}function HP(t){return{type:t}}function WP(t){return{type:"surroundingPair",delimiter:t}}function $P(t){return{type:t}}function qP(t){return{type:"target",target:{type:"placeholder",index:t.length===0?0:parseInt(t)-1}}}function qT(t){return t[0]}var h6={Lexer:wi,ParserRules:[{name:"main",symbols:["action"],postprocess:qT},{name:"action",symbols:[wi.has("simpleActionName")?{type:"simpleActionName"}:simpleActionName,"target"],postprocess:([t,e])=>LP(t,e)},{name:"action",symbols:[wi.has("bringMove")?{type:"bringMove"}:bringMove,"target","destination"],postprocess:([t,e,r])=>UP(t,e,r)},{name:"destination",symbols:["primitiveDestination"],postprocess:qT},{name:"destination",symbols:[wi.has("insertionMode")?{type:"insertionMode"}:insertionMode,"target"],postprocess:([t,e])=>VP(t,e)},{name:"target",symbols:["primitiveTarget"],postprocess:qT},{name:"primitiveTarget$ebnf$1",symbols:["modifier"]},{name:"primitiveTarget$ebnf$1",symbols:["primitiveTarget$ebnf$1","modifier"],postprocess:t=>t[0].concat([t[1]])},{name:"primitiveTarget",symbols:["primitiveTarget$ebnf$1"],postprocess:([t])=>Qf(t,void 0)},{name:"primitiveTarget",symbols:["mark"],postprocess:([t])=>Qf(void 0,t)},{name:"primitiveTarget$ebnf$2",symbols:["modifier"]},{name:"primitiveTarget$ebnf$2",symbols:["primitiveTarget$ebnf$2","modifier"],postprocess:t=>t[0].concat([t[1]])},{name:"primitiveTarget",symbols:["primitiveTarget$ebnf$2","mark"],postprocess:([t,e])=>Qf(t,e)},{name:"modifier",symbols:["containingScopeModifier"],postprocess:([t])=>t},{name:"containingScopeModifier",symbols:["scopeType"],postprocess:([t])=>BP(t)},{name:"scopeType",symbols:[wi.has("simpleScopeTypeType")?{type:"simpleScopeTypeType"}:simpleScopeTypeType],postprocess:([t])=>HP(t)},{name:"scopeType",symbols:[wi.has("pairedDelimiter")?{type:"pairedDelimiter"}:pairedDelimiter],postprocess:([t])=>WP(t)},{name:"mark",symbols:[wi.has("simpleMarkType")?{type:"simpleMarkType"}:simpleMarkType],postprocess:([t])=>$P(t)},{name:"mark",symbols:[wi.has("placeholderTarget")?{type:"placeholderTarget"}:placeholderTarget],postprocess:([t])=>qP(t)}],ParserStart:"main"},jP=h6;function g6(){return new Zf.Parser(Zf.Grammar.fromCompiled(jP))}function zP(t){let e=g6();if(e.feed(t),e.results.length!==1)throw new Error(`Expected exactly one result, got ${e.results.length}`);return e.results[0]}function Yf(t,e){let r=zP(t);return $f(r,e)}function ol(t){switch(t.name){case"callAsFunction":return[t.callee,t.argument];case"replaceWithTarget":case"moveToTarget":return[t.source,...GP(t.destination)];case"swapTargets":return[t.target1,t.target2];case"pasteFromClipboard":case"insertSnippet":case"replace":case"editNew":return GP(t.destination);case"parsed":return ol(Yf(t.content,t.arguments));default:return[t.target]}}function GP(t){switch(t.type){case"list":return t.destinations.map(({target:e})=>e);case"primitive":return[t.target];case"implicit":return[]}}function zT(t){return t.flatMap(jT)}function jT(t){switch(t.type){case"primitive":return[t];case"list":return t.elements.flatMap(jT);case"range":return[t.anchor,t.active].flatMap(jT);case"implicit":return[]}}var y6={arrowFunction:"anonymousFunction",dictionary:"map",regex:"regularExpression"},x6={purple:"pink"};function T6(t){t.modifiers?.forEach(e=>{(e.type==="containingScope"||e.type==="everyScope")&&(e.scopeType.type=y6[e.scopeType.type]??e.scopeType.type)})}function S6(t){t.mark?.type==="decoratedSymbol"&&(t.mark.symbolColor=x6[t.mark.symbolColor]??t.mark.symbolColor)}function GT(t){zT(t).forEach(e=>{T6(e),S6(e)})}function KP(t){return{...t,version:1}}var v6={type:"primitive",mark:{type:"cursor"},selectionType:"token",position:"contents",modifier:{type:"identity"},insideOutsideType:"inside"},b6={type:"primitive",isImplicit:!0},QP=t=>gi(t,v6)?b6:t;function ZP(t){let e=t.action;return{spokenForm:t.spokenForm,action:{name:e,args:t.extraArgs},targets:_6(t.targets,e),usePrePhraseSnapshot:t.usePrePhraseSnapshot??!1,version:2}}function w6(t){switch(t.type){case"identity":return[];case"containingScope":{let{includeSiblings:e,scopeType:r,type:n,...i}=t;return[{type:e?"everyScope":"containingScope",scopeType:{type:r},...i}]}case"surroundingPair":{let{delimiterInclusion:e,...r}=t,n={type:"containingScope",scopeType:r};return e==="interiorOnly"||e==="excludeInterior"?n.scopeType.delimiter==="any"?[{type:e}]:[{type:e},n]:[n]}case"subpiece":{let{type:e,pieceType:r,...n}=t;return[{type:"ordinalRange",scopeType:{type:r},...n}]}case"head":return[{type:"extendThroughStartOf"}];case"tail":return[{type:"extendThroughEndOf"}];default:return[t]}}function KT(t,e){let{type:r,isImplicit:n,mark:i,insideOutsideType:o,modifier:a,selectionType:l,position:p}=t,u=[];if(p&&p!=="contents"&&(p==="before"?o==="inside"?u.push({type:"position",position:"start"}):e==="remove"?u.push({type:"leading"}):u.push({type:"position",position:"before"}):o==="inside"?u.push({type:"position",position:"end"}):e==="remove"?u.push({type:"trailing"}):u.push({type:"position",position:"after"})),l)switch(l){case"token":if(a?.type==="subpiece")break;case"line":if(i?.type==="lineNumber")break;default:u.push({type:"containingScope",scopeType:{type:l}})}return a&&u.push(...w6(a)),{type:r,isImplicit:n,modifiers:u.length>0?u:void 0,mark:i?.type==="cursorToken"?void 0:i}}function YP(t,e){switch(t.type){case"list":return{...t,elements:t.elements.map(r=>YP(r,e))};case"range":{let{type:r,rangeType:n,start:i,end:o,excludeStart:a,excludeEnd:l}=t;return{type:r,rangeType:n,anchor:KT(i,e),active:KT(o,e),excludeAnchor:a??!1,excludeActive:l??!1}}case"primitive":return KT(t,e)}}function _6(t,e){return t.map(r=>YP(r,e)).map(r=>r.type==="primitive"?QP(r):r)}function XP(t){return{...t,version:3,targets:t.targets.map(JP)}}function JP(t){switch(t.type){case"list":return{...t,elements:t.elements.map(e=>JP(e))};case"range":{let{anchor:e,active:r,...n}=t;return{anchor:QT(e),active:QT(r),...n}}case"primitive":return QT(t)}}function QT(t){let e=t.modifiers!=null?t.modifiers.map(R6):void 0;if(t.mark?.type==="lineNumber"){let{anchor:r,active:n}=t.mark;if(r.type!==n.type||r.lineNumber<0!=n.lineNumber<0)return{type:"range",anchor:{type:"primitive",mark:al(r),modifiers:e},active:{type:"primitive",mark:al(n)},excludeAnchor:!1,excludeActive:!1}}return{...t,mark:t.mark!=null?E6(t.mark):void 0,modifiers:e}}function E6(t){switch(t.type){case"lineNumber":return k6(t);default:return t}}function R6(t){switch(t.type){case"ordinalRange":return P6(t);default:return t}}function k6(t){return gi(t.anchor,t.active)?al(t.anchor):{type:"range",anchor:al(t.anchor),active:al(t.active)}}function P6(t){return t.anchor===t.active?sl(t.scopeType,t.anchor):t.anchor===0&&t.active>t.anchor?sl(t.scopeType,t.anchor,t.active-t.anchor+1):t.anchor<0&&t.active===-1?sl(t.scopeType,t.anchor,-t.anchor):{type:"range",anchor:sl(t.scopeType,t.anchor),active:sl(t.scopeType,t.active),excludeAnchor:t.excludeAnchor,excludeActive:t.excludeActive}}function al(t){return{type:"lineNumber",lineNumberType:t.type,lineNumber:t.lineNumber}}function sl(t,e,r=1){return{type:"ordinalScope",scopeType:t,start:e,length:r}}function tM(t){return{...t,version:4,targets:t.targets.map(rM)}}function rM(t){switch(t.type){case"primitive":return eM(t);case"range":{let{anchor:e,...r}=t;return{...r,anchor:eM(e)}}case"list":{let{elements:e,...r}=t;return{...r,elements:e.map(rM)}}}}function eM(t){return t.mark==null&&t.modifiers==null||t.isImplicit?{type:"implicit"}:t}function nM(t){return{...t,version:5,action:M6(t.action),targets:t.targets.map(Xf)}}function M6(t){switch(t.name){case"wrapWithSnippet":{let[e,r]=A6(t.args[0]);return{name:"wrapWithSnippet",args:[{type:"named",name:e,variableName:r}]}}case"insertSnippet":{let[e,r]=t.args,n={type:"named",name:e};return r!=null&&(n.substitutions=r),{name:"insertSnippet",args:[n]}}default:return t}}function A6(t){let[e,r]=t.split(".");if(e==null||r==null)throw new Error("Snippet location missing '.'");return[e,r]}function Xf(t){switch(t.type){case"implicit":return t;case"list":return{...t,elements:t.elements.map(Xf)};case"range":return{...t,anchor:Xf(t.anchor),active:Xf(t.active)};case"primitive":return{...t,mark:t.mark!=null?ZT(t.mark):void 0,modifiers:t.modifiers!=null&&t.modifiers.length>0?t.modifiers.map(YT):void 0}}}function ZT(t){return t.type==="range"?{...t,anchor:ZT(t.anchor),active:ZT(t.active),excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1}:t}function YT(t){return t.type==="range"?{...t,anchor:YT(t.anchor),active:YT(t.active),excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1}:t}var D6={bring:"replaceWithTarget",call:"callAsFunction",clear:"clearAndSetSelection",commentLines:"toggleLineComment",copy:"copyToClipboard",cut:"cutToClipboard",delete:"remove",editNewLineAbove:"editNewLineBefore",editNewLineBelow:"editNewLineAfter",findInFiles:"findInWorkspace",fold:"foldRegion",indentLines:"indentLine",insertEmptyLineAbove:"insertEmptyLineBefore",insertEmptyLineBelow:"insertEmptyLineAfter",insertLineAfter:"editNewLineAfter",insertLineBefore:"editNewLineBefore",move:"moveToTarget",outdentLines:"outdentLine",paste:"pasteFromClipboard",reverse:"reverseTargets",setBreakpoint:"toggleLineBreakpoint",sort:"sortTargets",swap:"swapTargets",unfold:"unfoldRegion",use:"replaceWithTarget",wrap:"wrapWithPairedDelimiter"};function XT(t){let e=D6[t]??t;if(!Wk.includes(e))throw new Error(`Unknown action name: ${e}`);return e}function iM(t){return{version:6,spokenForm:t.spokenForm,usePrePhraseSnapshot:t.usePrePhraseSnapshot,action:I6(t.action,t.targets)}}function I6(t,e){let r=XT(t.name);switch(r){case"replaceWithTarget":case"moveToTarget":return{name:r,source:rn(e[0]),destination:cl(e[1])};case"swapTargets":return{name:r,target1:rn(e[0]),target2:rn(e[1])};case"callAsFunction":return{name:r,callee:rn(e[0]),argument:rn(e[1])};case"pasteFromClipboard":return{name:r,destination:cl(e[0])};case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return{name:r,left:t.args[0],right:t.args[1],target:rn(e[0])};case"generateSnippet":return{name:r,snippetName:t.args?.[0],target:rn(e[0])};case"insertSnippet":return{name:r,snippetDescription:t.args[0],destination:cl(e[0])};case"wrapWithSnippet":return{name:r,snippetDescription:t.args[0],target:rn(e[0])};case"executeCommand":return{name:r,commandId:t.args[0],options:t.args?.[1],target:rn(e[0])};case"replace":return{name:r,replaceWith:t.args[0],destination:cl(e[0])};case"highlight":{let n={name:r,target:rn(e[0])};return t.args?.[0]!=null&&(n.highlightId=t.args?.[0]),n}case"editNew":return{name:r,destination:cl(e[0])};case"getText":return{name:r,options:t.args?.[0],target:rn(e[0])};case"parsed":throw Error("Parsed action should not be present in V5");default:return{name:r,target:rn(e[0])}}}function rn(t){switch(t.type){case"list":case"range":case"primitive":return F6(t);case"implicit":return t}}function F6(t){switch(t.type){case"list":return C6(t);case"range":case"primitive":return Jf(t)}}function C6(t){return{...t,elements:t.elements.map(Jf)}}function Jf(t){switch(t.type){case"range":return oM(t);case"primitive":return ed(t)}}function oM(t){let{anchor:e,active:r}=t,n={type:"range",anchor:e.type==="implicit"?e:ed(e),active:ed(r),excludeAnchor:t.excludeAnchor,excludeActive:t.excludeActive};return t.rangeType!=null&&(n.rangeType=t.rangeType),n}function ed(t){let e={type:"primitive"},r=B6(t.modifiers);return r!=null&&(e.modifiers=r),t.mark!=null&&(e.mark=t.mark),e}function cl(t){switch(t.type){case"list":return O6(t);case"range":return N6(t);case"primitive":return L6(t);case"implicit":return U6()}}function O6(t){let e=[],r=[],n,i=()=>{r.length>0&&e.push({type:"primitive",insertionMode:n??"to",target:r.length===1?r[0]:{type:"list",elements:r}})};return t.elements.forEach(o=>{let a=td(o);a!=null?(i(),r=[Jf(o)],n=a):r.push(Jf(o))}),i(),e.length>1?{type:"list",destinations:e}:e[0]}function N6(t){return{type:"primitive",insertionMode:td(t.anchor)??"to",target:oM(t)}}function L6(t){return{type:"primitive",insertionMode:td(t)??"to",target:ed(t)}}function U6(){return{type:"implicit"}}function td(t){switch(t.type){case"implicit":return"to";case"primitive":return V6(t);case"range":return td(t.anchor)}}function V6(t){let e=t.modifiers?.find(r=>r.type==="position");if(e!=null){if(t.modifiers.indexOf(e)!==0)throw Error("Position modifier has to be at first index");if(e?.position==="before"||e?.position==="after")return e.position}}function B6(t){let e=[];if(t!=null)for(let r of t)r.type==="position"?r.position==="start"?e.push({type:"startOf"}):r.position==="end"&&e.push({type:"endOf"}):e.push(r);return e.length>0?e:void 0}function sM(t){return{...t,version:7}}function eS(t){let e=H6(t,7),{action:r,usePrePhraseSnapshot:n=!1,spokenForm:i}=e;return{version:7,spokenForm:i,action:Pf(r,o=>{let a=ol(o);GT(a),r.name}),usePrePhraseSnapshot:n}}function H6(t,e){if(t.version>7)throw new Su;for(;t.version<e;)switch(t.version){case 0:t=KP(t);break;case 1:t=ZP(t);break;case 2:t=XP(t);break;case 3:t=tM(t);break;case 4:t=nM(t);break;case 5:t=iM(t);break;case 6:t=sM(t);break;default:throw new Error(`Can't upgrade from unknown version ${t.version}`)}return t}var tS;function rd(t){tS=t}function D(){if(tS==null)throw Error("Tried to access ide before it was injected");return tS}var nd=class{constructor(e){this.maxLength=e;this.stack=[];this.index=void 0}push(e){this.index!=null?this.stack.splice(this.index+1,this.stack.length-this.index-1,e):this.stack.push(e),this.stack.length>this.maxLength&&this.stack.shift(),this.index=this.stack.length-1}undo(){if(this.index!=null&&this.index>0)return this.index--,this.stack[this.index]}redo(){if(this.index!=null&&this.index<this.stack.length-1)return this.index++,this.stack[this.index]}};var W6=25,id=class{constructor(){this.targetMap=new Map;this.targetHistory=new to(()=>new nd(W6));this.notifier=new Wt}set(e,r,{history:n=!1}={}){this.targetMap.set(e,r),n&&r!=null&&this.targetHistory.get(e).push(r),this.notifier.notifyListeners(e,r)}get(e){return this.targetMap.get(e)}undo(e){let r=this.targetHistory.get(e).undo();r!=null&&this.set(e,r,{history:!1})}redo(e){let r=this.targetHistory.get(e).redo();r!=null&&this.set(e,r,{history:!1})}onStoredTargets(e){for(let r of ra)e(r,this.get(r));return this.notifier.registerListener(e)}};function no(t,e){return new W(new ae(e.start.line,0),t.document.lineAt(e.end).range.end)}function rS(t,e){return e.isEmpty?0:t.document.offsetAt(e.end)-t.document.offsetAt(e.start)}function aM(t,e){let[r,n]=e instanceof ae?[e,e]:[e.start,e.end];return t.start.isBefore(r)&&t.end.isAfter(n)}function Ko(t,...e){for(let r of e)r!=null&&(t=t.union(r));return t}var od=class t{constructor(e,r,n){this.target=e;this.insertionMode=r;this.contentRange=q6(e.contentRange,r),this.isBefore=r==="before",this.isLineDelimiter=e.insertionDelimiter.includes(`
`),this.indentationString=n??this.isLineDelimiter?$6(e.editor,e.contentRange):"",this.insertionPrefix=e.prefixRange!=null?e.editor.document.getText(e.prefixRange):void 0}get contentSelection(){return this.contentRange.toSelection(this.target.isReversed)}get editor(){return this.target.editor}get insertionDelimiter(){return this.target.insertionDelimiter}get isRaw(){return this.target.isRaw}withTarget(e){return new t(e,this.insertionMode,this.indentationString)}getEditNewActionType(){return this.insertionMode==="after"&&this.target.contentRange.isSingleLine&&this.insertionDelimiter===`
`&&this.insertionPrefix==null?"insertLineAfter":"edit"}constructChangeEdit(e){return this.insertionMode==="before"||this.insertionMode==="after"?this.constructEditWithDelimiters(e):this.constructEditWithoutDelimiters(e)}constructEditWithDelimiters(e){let r=this.getEditRange(),n=this.getEditText(e),i=o=>this.updateRange(o,e);return{range:r,text:n,isReplace:this.insertionMode==="after",updateRange:i}}constructEditWithoutDelimiters(e){return{range:this.contentRange,text:e,updateRange:r=>r}}getEditRange(){let e=(()=>{let r=this.isBefore?Ko(this.target.contentRange,this.target.prefixRange).start:this.target.contentRange.end;if(this.isLineDelimiter){let n=this.editor.document.lineAt(r),i=this.isBefore?n.rangeTrimmed?.start??n.range.start:n.rangeTrimmed?.end??n.range.end;if(r.isEqual(i))return this.isBefore?n.range.start:n.range.end}return r})();return new W(e,e)}getEditText(e){let r=this.indentationString+(this.insertionPrefix??"")+e;return this.isBefore?r+this.insertionDelimiter:this.insertionDelimiter+r}updateRange(e,r){let n=this.editor.document.offsetAt(e.start)+this.indentationString.length+(this.insertionPrefix?.length??0),i=this.isBefore?n:n+this.getLengthOfInsertionDelimiter(),o=i+r.length;return new W(this.editor.document.positionAt(i),this.editor.document.positionAt(o))}getLengthOfInsertionDelimiter(){if(this.editor.document.eol==="CRLF"){let e=this.insertionDelimiter.match(/\n/g);if(e!=null)return this.insertionDelimiter.length+e.length}return this.insertionDelimiter.length}};function $6(t,e){let r=Number.MAX_SAFE_INTEGER,n="";for(let i=e.start.line;i<=e.end.line;++i){let o=t.document.lineAt(i);if(o.range.isEmpty||o.isEmptyOrWhitespace&&!e.isSingleLine)continue;let a=o.rangeTrimmed?.start??o.range.end;a.character<r&&(r=a.character,n=o.text.slice(0,r))}return n}function q6(t,e){switch(e){case"before":return t.start.toEmptyRange();case"after":return t.end.toEmptyRange();case"to":return t}}function io(t,e,r,n){return ll(t.contentRange,e.contentRange,r,n)}function ll(t,e,r,n){return new W(r?t.start:t.end,n?e.end:e.start)}function pa(t,e,r,n){let i=r?t.contentRange.start:new ae(t.contentRange.end.line+1,0),o=n?e.contentRange.end:e.editor.document.lineAt(e.contentRange.start.line-1).range.end;return new W(i,o)}var Le=class t{constructor(e){this.isLine=!1;this.isToken=!0;this.hasExplicitScopeType=!0;this.hasExplicitRange=!0;this.isRaw=!1;this.isImplicit=!1;this.isNotebookCell=!1;this.isWord=!1;this.state={editor:e.editor,isReversed:e.isReversed,contentRange:e.contentRange,thatTarget:e.thatTarget}}get editor(){return this.state.editor}get isReversed(){return this.state.isReversed}get thatTarget(){return this.state.thatTarget!=null?this.state.thatTarget.thatTarget:this}get contentText(){return this.editor.document.getText(this.contentRange)}get contentSelection(){return this.contentRange.toSelection(this.isReversed)}get contentRange(){return this.state.contentRange}constructRemovalEdit(){return{range:this.getRemovalRange(),text:"",updateRange:e=>e}}getRemovalHighlightRange(){return this.getRemovalRange()}withThatTarget(e){return this.cloneWith({thatTarget:e})}withContentRange(e){return this.cloneWith({contentRange:e})}getInterior(){}getBoundary(){}cloneWith(e){let r=Object.getPrototypeOf(this).constructor;return new r({...this.getCloneParameters(),...e})}maybeCreateRichRangeTarget(e,r){let{constructor:n}=Object.getPrototypeOf(this);return new n({...this.getCloneParameters(),isReversed:e,contentRange:io(this,r,!0,!0)})}isEqual(e){return e instanceof t&&gi(this.getEqualityParameters(),e.getEqualityParameters())}getEqualityParameters(){let{thatTarget:e,...r}=this.getCloneParameters();return{...r}}toDestination(e){return new od(this,e)}toPlainObject(){return{type:this.type,contentRange:$c(this.contentRange),isReversed:this.isReversed,hasExplicitRange:this.hasExplicitRange}}};function sd(t,e){return j6(t,e.start,e.end)}function j6(t,e,r){return{editor:t.editor,selection:z6(t.selection,e,r)}}function z6(t,e,r){return t.isReversed?new Te(r,e):new Te(e,r)}function ad(t,e){let{document:r}=t,n=r.getText(e),i=n.length-n.trimStart().length,o=n.length-n.trimEnd().length,a=r.offsetAt(e.start)+i,l=r.offsetAt(e.end)-o,p=r.positionAt(a),u=r.positionAt(l);return new W(p,u)}function cd(t,e,r,n){return r==null?void 0:new t({editor:e,isReversed:n,contentRange:r})}var He=class extends Le{constructor(r){super(r);this.type="PlainTarget";this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.isToken=r.isToken??!0,this.insertionDelimiter=r.insertionDelimiter??""}getCloneParameters(){return{...this.state,isToken:this.isToken,insertionDelimiter:this.insertionDelimiter}}};function ua(t,e,r){return cd(He,t,e,r)}var ld=class extends Le{constructor(r){super(r);this.type="DocumentTarget";this.insertionDelimiter=`
`;this.isLine=!0}getLeadingDelimiterTarget(){}getTrailingDelimiterTarget(){}getRemovalRange(){return this.contentRange}getInterior(){return[new He({editor:this.editor,isReversed:this.isReversed,contentRange:ad(this.editor,this.contentRange)})]}getCloneParameters(){return this.state}};var Or=class t extends Le{constructor(){super(...arguments);this.type="LineTarget";this.insertionDelimiter=`
`;this.isLine=!0;this.getRemovalHighlightRange=()=>this.fullLineContentRange}get fullLineContentRange(){return no(this.editor,this.contentRange)}getLeadingDelimiterTarget(){return ua(this.editor,G6(this.editor,this.fullLineContentRange),this.isReversed)}getTrailingDelimiterTarget(){return ua(this.editor,K6(this.editor,this.fullLineContentRange),this.isReversed)}getRemovalRange(){let r=this.fullLineContentRange,n=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return n==null?r:r.union(n.contentRange)}maybeCreateRichRangeTarget(r,n){return new t({editor:this.editor,isReversed:r,contentRange:pa(this,n,!0,!0)})}getCloneParameters(){return this.state}};function G6(t,e){let{start:r}=e;return r.line>0?new W(t.document.lineAt(r.line-1).range.end,e.start):void 0}function K6(t,e){let{end:r}=e;return r.line+1<t.document.lineCount?new W(e.end,new ae(r.line+1,0)):void 0}function nS(t,e,r){return cd(Or,t,e,r)}var pd=class t{constructor(e,r){this.target=e;this.insertionMode=r}get editor(){return this.target.editor}get contentRange(){return this.target.contentRange}get contentSelection(){return this.target.contentSelection}get insertionDelimiter(){return this.target.insertionDelimiter}get isRaw(){return this.target.isRaw}withTarget(e){return new t(e,this.insertionMode)}getEditNewActionType(){throw new Error("Method not implemented.")}constructChangeEdit(e){throw new Error("Method not implemented.")}};var ud=class extends Le{constructor(r){super(r);this.type="NotebookCellTarget";this.insertionDelimiter=`
`;this.isNotebookCell=!0;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange}getCloneParameters(){return this.state}toDestination(r){return new pd(this,r)}};var fa=class t extends Le{constructor(){super(...arguments);this.type="ParagraphTarget";this.insertionDelimiter=`

`;this.isLine=!0}getLeadingDelimiterTarget(){return nS(this.editor,Q6(this.editor,this.fullLineContentRange),this.isReversed)}getTrailingDelimiterTarget(){return nS(this.editor,Z6(this.editor,this.fullLineContentRange),this.isReversed)}getRemovalRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.contentRange.union(r.contentRange):this.contentRange;return new Or({contentRange:n,editor:this.editor,isReversed:this.isReversed}).getRemovalRange()}get fullLineContentRange(){return no(this.editor,this.contentRange)}getRemovalHighlightRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return r!=null?this.fullLineContentRange.union(r.contentRange):this.fullLineContentRange}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,contentRange:pa(this,n,!0,!0)})}getCloneParameters(){return this.state}};function Q6(t,e){let{document:r}=t,n=r.lineAt(e.start),i=Y6(r,n);if(i!=null)return i.lineNumber+1===n.lineNumber?void 0:new W(new ae(i.lineNumber+1,0),r.lineAt(n.lineNumber-1).range.end);if(n.lineNumber>0)return new W(new ae(0,0),r.lineAt(n.lineNumber-1).range.end)}function Z6(t,e){let{document:r}=t,n=r.lineAt(e.end),i=X6(r,n);if(i!=null)return i.lineNumber-1===n.lineNumber?void 0:new W(new ae(n.lineNumber+1,0),r.lineAt(i.lineNumber-1).range.end);if(n.lineNumber<r.lineCount-1)return new W(new ae(n.lineNumber+1,0),r.lineAt(r.lineCount-1).range.end)}function Y6(t,e){for(;e.lineNumber>0;){let r=t.lineAt(e.lineNumber-1);if(!r.isEmptyOrWhitespace)return r;e=r}return null}function X6(t,e){for(;e.lineNumber+1<t.lineCount;){let r=t.lineAt(e.lineNumber+1);if(!r.isEmptyOrWhitespace)return r;e=r}return null}var oo=class extends Le{constructor(){super(...arguments);this.type="RawSelectionTarget";this.insertionDelimiter="";this.isRaw=!0;this.isToken=!1;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.getCloneParameters=()=>this.state}};var da=class t extends Le{constructor(r){super({...r,contentRange:ad(r.editor,r.fullInteriorRange)});this.type="InteriorTarget";this.insertionDelimiter=" ";this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.fullInteriorRange;this.fullInteriorRange=r.fullInteriorRange}getCloneParameters(){return{...this.state,fullInteriorRange:this.fullInteriorRange}}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,fullInteriorRange:ll(this.fullInteriorRange,n.fullInteriorRange,!0,!0)})}};function fd(t){let e=Ko(t.contentRange,t.prefixRange),r=t.getTrailingDelimiterTarget()??t.getLeadingDelimiterTarget();return r!=null?e.union(r.contentRange):e}var J6=['"',"'","(","[","{","<"],e5=['"',"'",")","]","}",">",",",";",":"];function $n(t){let{editor:e}=t,{start:r}=Ko(t.contentRange,t.prefixRange),o=e.document.lineAt(r).text.slice(0,r.character).match(/\s+$/);return o==null?void 0:new He({contentRange:new W(r.line,r.character-o[0].length,r.line,r.character),editor:e,isReversed:t.isReversed})}function qn(t){let{editor:e}=t,{end:r}=t.contentRange,o=e.document.lineAt(r).text.slice(r.character).match(/^\s+/);return o==null?void 0:new He({contentRange:new W(r.line,r.character,r.line,r.character+o[0].length),editor:e,isReversed:t.isReversed})}function jn(t){let{editor:e}=t,r=Ko(t.contentRange,t.prefixRange),{start:n,end:i}=r,o=t.getLeadingDelimiterTarget()?.contentRange??n.toEmptyRange(),a=t.getTrailingDelimiterTarget()?.contentRange??i.toEmptyRange(),l=no(e,r);return o.union(a).isRangeEqual(l)?l:!a.isEmpty&&(!o.isEmpty||r.start.isEqual(l.start)||J6.includes(t5(e,r)))?r.union(a):!o.isEmpty&&(r.end.isEqual(l.end)||e5.includes(r5(e,r)))?r.union(o):r}function t5(t,e){let{start:r}=e,n=t.document.lineAt(r);return r.isAfter(n.range.start)?t.document.getText(new W(r.translate(void 0,-1),r)):""}function r5(t,e){let{end:r}=e,n=t.document.lineAt(r);return r.isBefore(n.range.end)?t.document.getText(new W(r.translate(void 0,1),r)):""}var so=class t extends Le{constructor(r){super(r);this.type="ScopeTypeTarget";this.scopeTypeType_=r.scopeTypeType,this.removalRange_=r.removalRange,this.interiorRange_=r.interiorRange,this.leadingDelimiterRange_=r.leadingDelimiterRange,this.trailingDelimiterRange_=r.trailingDelimiterRange,this.prefixRange=r.prefixRange,this.insertionDelimiter=r.insertionDelimiter??n5(r.scopeTypeType),this.hasDelimiterRange_=!!this.leadingDelimiterRange_||!!this.trailingDelimiterRange_}getLeadingDelimiterTarget(){if(this.leadingDelimiterRange_!=null)return new He({editor:this.editor,isReversed:this.isReversed,contentRange:this.leadingDelimiterRange_});if(!this.hasDelimiterRange_)return $n(this)}getTrailingDelimiterTarget(){if(this.trailingDelimiterRange_!=null)return new He({editor:this.editor,isReversed:this.isReversed,contentRange:this.trailingDelimiterRange_});if(!this.hasDelimiterRange_)return qn(this)}getInterior(){return this.interiorRange_==null?super.getInterior():[new da({editor:this.editor,isReversed:this.isReversed,fullInteriorRange:this.interiorRange_})]}getRemovalRange(){return this.removalRange_!=null?this.removalRange_:this.hasDelimiterRange_?fd(this):jn(this)}maybeCreateRichRangeTarget(r,n){if(this.scopeTypeType_!==n.scopeTypeType_)return null;let i=this.removalRange_!=null||n.removalRange_!=null?ll(this.removalRange_??this.contentRange,n.removalRange_??n.contentRange,!0,!0):void 0;return new t({...this.getCloneParameters(),isReversed:r,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:n.trailingDelimiterRange_,removalRange:i,contentRange:io(this,n,!0,!0)})}getCloneParameters(){return{...this.state,insertionDelimiter:this.insertionDelimiter,prefixRange:this.prefixRange,removalRange:void 0,interiorRange:void 0,scopeTypeType:this.scopeTypeType_,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:this.trailingDelimiterRange_}}};function n5(t){switch(t){case"class":case"namedFunction":case"section":case"sectionLevelOne":case"sectionLevelTwo":case"sectionLevelThree":case"sectionLevelFour":case"sectionLevelFive":case"sectionLevelSix":case"part":case"chapter":case"subSection":case"subSubSection":case"namedParagraph":case"subParagraph":return`

`;case"anonymousFunction":case"statement":case"ifStatement":case"comment":case"xmlElement":case"collectionItem":case"branch":case"environment":return`
`;default:return" "}}var dd=class t extends Le{constructor(r){super(r);this.type="SubTokenWordTarget";this.isToken=!1;this.isWord=!0;this.leadingDelimiterRange_=r.leadingDelimiterRange,this.trailingDelimiterRange_=r.trailingDelimiterRange,this.insertionDelimiter=r.insertionDelimiter}getLeadingDelimiterTarget(){return ua(this.editor,this.leadingDelimiterRange_,this.isReversed)}getTrailingDelimiterTarget(){return ua(this.editor,this.trailingDelimiterRange_,this.isReversed)}getRemovalRange(){return fd(this)}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,contentRange:io(this,n,!0,!0),trailingDelimiterRange:n.trailingDelimiterRange_})}getCloneParameters(){return{...this.state,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:this.trailingDelimiterRange_,insertionDelimiter:this.insertionDelimiter}}};var gr=class extends Le{constructor(){super(...arguments);this.type="TokenTarget";this.insertionDelimiter=" "}getLeadingDelimiterTarget(){return $n(this)}getTrailingDelimiterTarget(){return qn(this)}getRemovalRange(){return jn(this)}getCloneParameters(){return this.state}};var md=class extends Le{constructor(r){super(r);this.type="SurroundingPairTarget";this.insertionDelimiter=" ";this.boundary_=r.boundary,this.interiorRange_=r.interiorRange}getLeadingDelimiterTarget(){return $n(this)}getTrailingDelimiterTarget(){return qn(this)}getRemovalRange(){return jn(this)}getInterior(){return[new da({editor:this.editor,isReversed:this.isReversed,fullInteriorRange:this.interiorRange_})]}getBoundary(){return this.boundary_.map(r=>new gr({editor:this.editor,isReversed:this.isReversed,contentRange:r}))}getCloneParameters(){return{...this.state,interiorRange:this.interiorRange_,boundary:this.boundary_}}};var kt=class extends Le{constructor(r){super(r);this.type="UntypedTarget";this.insertionDelimiter=" ";this.hasExplicitScopeType=!1;this.hasExplicitRange=r.hasExplicitRange,this.isToken=r.isToken??!0}getLeadingDelimiterTarget(){return $n(this)}getTrailingDelimiterTarget(){return qn(this)}getRemovalRange(){return this.editor.document.getText(this.contentRange).trim().length===0?this.contentRange:jn(this)}maybeCreateRichRangeTarget(){return null}getCloneParameters(){return{...this.state,isToken:this.isToken,hasExplicitRange:this.hasExplicitRange}}};var hd=class extends Le{constructor(){super(...arguments);this.type="ImplicitTarget";this.insertionDelimiter="";this.isRaw=!0;this.hasExplicitScopeType=!1;this.isImplicit=!0;this.isToken=!1;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.getCloneParameters=()=>this.state}};var gd=class extends Le{constructor(r){let{inputTarget:n,modifiedTarget:i,isHead:o}=r;super({...r,contentRange:cM(n.contentRange,i.contentRange,o)});this.type="HeadTailTarget";this.insertionDelimiter=" ";this.inputTarget=n,this.modifiedTarget=i,this.isHead=o}getLeadingDelimiterTarget(){return $n(this)}getTrailingDelimiterTarget(){return qn(this)}getRemovalRange(){return jn(this)}getInterior(){let r=this.modifiedTarget.getInterior();if(r!=null)return r.map(n=>new He({editor:this.editor,contentRange:cM(this.inputTarget.contentRange,n.contentRange,this.isHead),isReversed:this.isReversed}))}getCloneParameters(){return{...this.state,inputTarget:this.inputTarget,modifiedTarget:this.modifiedTarget,isHead:this.isHead}}};function cM(t,e,r){return r?new W(e.start,t.end):new W(t.start,e.end)}var yd=class t extends Le{constructor(r){super({...r,contentRange:i5(r.paragraphTarget.contentRange,r.containingInterior.contentRange)});this.type="BoundedParagraphTarget";this.insertionDelimiter=`

`;this.isLine=!0;this.containingInterior=r.containingInterior,this.paragraphTarget=r.paragraphTarget,this.startLineGap=this.contentRange.start.line-this.containingInterior.fullInteriorRange.start.line,this.endLineGap=this.containingInterior.fullInteriorRange.end.line-this.contentRange.end.line}getLeadingDelimiterTarget(){return this.startLineGap>1?this.paragraphTarget.getLeadingDelimiterTarget():void 0}getTrailingDelimiterTarget(){return this.endLineGap>1?this.paragraphTarget.getTrailingDelimiterTarget():void 0}getRemovalRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.contentRange.union(r.contentRange):this.contentRange;return this.startLineGap<=0||this.endLineGap<=0?n:new Or({contentRange:n,editor:this.editor,isReversed:this.isReversed}).getRemovalRange()}get fullLineContentRange(){return no(this.editor,this.contentRange)}getRemovalHighlightRange(){if(this.startLineGap<1||this.endLineGap<1)return this.getRemovalRange();let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return r!=null?this.fullLineContentRange.union(r.contentRange):this.fullLineContentRange}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,containingInterior:this.containingInterior.maybeCreateRichRangeTarget(r,n.containingInterior),paragraphTarget:this.paragraphTarget.maybeCreateRichRangeTarget(r,n.paragraphTarget)})}getCloneParameters(){return{...this.state,paragraphTarget:this.paragraphTarget,containingInterior:this.containingInterior}}};function i5(t,e){let r=t.intersection(e);if(r==null||r.isEmpty)throw new Error("Ranges do not intersect");return r}function xd(t){return t.activeTextEditor?.selections.map(e=>({selection:e,editor:t.activeTextEditor}))??[]}var ma=class{run(){return xd(D()).map(e=>new kt({editor:e.editor,isReversed:e.selection.isReversed,contentRange:e.selection,hasExplicitRange:!e.selection.isEmpty,isToken:!1}))}};var zn=class{constructor(e,r){this.debouncer=new xu(r,e.getOwnConfiguration("decorationDebounceDelayMs")),this.run=this.run.bind(this)}run(){this.debouncer.run()}dispose(){this.debouncer.dispose()}};var Td=class{constructor(e,r){this.ide=e;this.storedTargets=r;this.disposables=[];this.debouncer=new zn(e.configuration,()=>this.updateKeyboardTarget()),this.disposables.push(e.configuration.onDidChangeConfiguration(()=>this.maybeActivate()),this.debouncer),this.maybeActivate()}maybeActivate(){if(this.ide.configuration.getOwnConfiguration("experimental.keyboardTargetFollowsSelection")){this.selectionWatcherDisposable==null&&(this.selectionWatcherDisposable=this.ide.onDidChangeTextEditorSelection(this.debouncer.run));return}this.selectionWatcherDisposable!=null&&(this.selectionWatcherDisposable.dispose(),this.selectionWatcherDisposable=void 0)}updateKeyboardTarget(){this.ide.activeTextEditor==null||this.storedTargets.get("keyboard")==null||this.storedTargets.set("keyboard",new ma().run())}dispose(){this.disposables.forEach(e=>e.dispose()),this.selectionWatcherDisposable?.dispose()}};var Sd=class{constructor(e){this.ide=e;switch(e.disposeOnExit(this),this.evaluateSetting=this.evaluateSetting.bind(this),this.active=!0,e.runMode){case"development":this.enableDebugLog();break;case"test":this.disableDebugLog();break;case"production":this.evaluateSetting(),this.disposableConfiguration=e.configuration.onDidChangeConfiguration(this.evaluateSetting);break}}log(...e){this.active&&console.log(...e)}dispose(){this.disposableConfiguration&&this.disposableConfiguration.dispose()}enableDebugLog(){this.active=!0}disableDebugLog(){this.active=!1}evaluateSetting(){this.ide.configuration.getOwnConfiguration("debug")?this.enableDebugLog():this.disableDebugLog()}};var o5=["!","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_","`","{","|","}","~","\xA3",'"'],s5=o5.map(Ir).join("|"),a5=["[a-zA-Z0-9]",s5].join("|"),c5=new RegExp(`^(${a5})$`,"u"),l5="[unk]",p5=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}]/gu,vd=class{constructor(){this.disposables=[];this.algorithmChangeNotifier=new Wt;this.getTokenGraphemes=e=>Jr(e,p5,r=>({text:this.normalizeGrapheme(r[0]),tokenStartOffset:r.index,tokenEndOffset:r.index+r[0].length}));this.registerAlgorithmChangeListener=this.algorithmChangeNotifier.registerListener;D().disposeOnExit(this),this.updateTokenHatSplittingMode=this.updateTokenHatSplittingMode.bind(this),this.getTokenGraphemes=this.getTokenGraphemes.bind(this),this.updateTokenHatSplittingMode(),this.disposables.push(D().configuration.onDidChangeConfiguration(this.updateTokenHatSplittingMode))}updateTokenHatSplittingMode(){let{lettersToPreserve:e,symbolsToPreserve:r,...n}=D().configuration.getOwnConfiguration("tokenHatSplittingMode");this.tokenHatSplittingMode={lettersToPreserve:e.map(i=>i.toLowerCase().normalize("NFC")),symbolsToPreserve:r.map(i=>i.normalize("NFC")),...n},this.algorithmChangeNotifier.notifyListeners()}normalizeGrapheme(e){let{preserveCase:r,lettersToPreserve:n,symbolsToPreserve:i}=this.tokenHatSplittingMode,o=e.normalize("NFC");return i.includes(o)||(r||(o=o.toLowerCase()),n.includes(o.toLowerCase()))||(o=$x(o),c5.test(o)||(o=l5)),o}dispose(){this.disposables.forEach(({dispose:e})=>e())}};function Qo(){return iS==null&&(iS=new vd),iS}var iS;var lM=({penalty:t})=>-t;function pM(t){return({grapheme:{text:e},style:r})=>{let n=t.get({grapheme:e,hatStyle:r});return n==null?1/0:-n}}function uM(t,e){let r=Ac(n=>Yx(e[n].filter(i=>i>t))??1/0);return({grapheme:{text:n}})=>r(n)}function oS(t){return e=>e.grapheme.text===t?.grapheme&&e.style===t?.hatStyle?1:0}function fM(t){switch(t){case"greedy":return({penalty:e})=>-e;case"balanced":return({penalty:e})=>-(e<2?0:1);case"stable":return e=>0}}function dM(t,e){if(t.length===0)return;let r=t;for(let n of e){if(r.length===1)return r[0];r=u5(r,n)}return r[0]}function u5(t,e){let r=-1/0,n=[];for(let i of t){let o=e(i);o<r||(o>r&&(r=o,n.length=0),n.push(i))}return n}function mM({hatOldTokenRanks:t,graphemeTokenRanks:e},r,n,i,o,a){return dM(a,[oS(i),fM(r),oS(o),pM(t),lM,uM(n,e)])}function hM(t,e,r){let n={},i=new eo(({grapheme:o,hatStyle:a})=>[o,a]);return t.forEach(({token:o,rank:a})=>{let l=e.get(o);l!=null&&i.set(l,a),r.getTokenGraphemes(o.text).forEach(({text:p})=>{let u;p in n?u=n[p]:(u=[],n[p]=u),u.push(a)})}),{hatOldTokenRanks:i,graphemeTokenRanks:n}}function gM(t,e=[]){return new Map(Kx(Ge,yi)(Dc([e],t.visibleRanges.map(r=>Xx(r.start.line,r.end.line+1)))).sort((r,n)=>r-n).map((r,n)=>[r,n]))}function yM(t,e){return(r,n)=>{let i=Math.abs(r.displayLine-t),o=Math.abs(n.displayLine-t);if(i<o)return-1;if(i>o)return 1;let a=Math.abs(r.range.start.character-e),l=Math.abs(n.range.start.character-e);return a-l}}var f5=["-","+","*","/","=","<",">","_","#",".","|","&",":"],d5=["!==","!=","+=","-=","*=","/=","%=","<=",">=","=>","->","??",'"""',"```","/*","*/","<!--","-->"],m5=["\\p{L}","\\p{M}","\\p{N}"],h5="[^\\s\\w]",g5="(?<![.\\d])\\d+\\.\\d+(?![.\\d])";function y5(t){let{fixedTokens:e,repeatableSymbols:r,identifierWordRegexes:n,identifierWordDelimiters:i,numbersRegex:o,singleSymbolsRegex:a}=t,l=r.map(Ir).map(x=>`${x}+`).join("|"),p=e.map(Ir).join("|"),d=`(${n.concat(i.map(Ir)).join("|")})+`,h=`(${n.join("|")})+`,g=[p,o,d,l,a].join("|");return{identifierMatcher:new RegExp(d,"gu"),wordMatcher:new RegExp(h,"gu"),tokenMatcher:new RegExp(g,"gu")}}var sS=new Map;function nn(t){let e=D().configuration.getOwnConfiguration("wordSeparators",{languageId:t}),r=e.join("\0");if(!sS.has(r)){let n={fixedTokens:d5,repeatableSymbols:f5,identifierWordRegexes:m5,identifierWordDelimiters:e,numbersRegex:g5,singleSymbolsRegex:h5};sS.set(r,y5(n))}return sS.get(r)}function xM(t,e,r){return Jr(t,nn(e).tokenMatcher,r)}function TM(t,e){let r=t.document.languageId,n=t.document.getText(e),i=t.document.offsetAt(e.start);return xM(n,r,o=>{let a=i+o.index,l=i+o.index+o[0].length,p=new W(t.document.positionAt(a),t.document.positionAt(l));return{editor:t,text:o[0],range:p,offsets:{start:a,end:l}}})}function SM(t,e,r){let i=T5(t,e).flatMap(o=>{let a=o.selections[0].active,l=gM(o,[a.line]),p=Ge(o.visibleRanges.map(u=>TM(o,u).map(d=>({...d,displayLine:l.get(d.range.start.line)}))));return p.sort(yM(l.get(a.line),a.character)),p});return x5(r,i).map((o,a)=>({token:o,rank:-a}))}function x5(t,e){return t==null?e:e.sort((r,n)=>{let i=t.has(r),o=t.has(n);return i&&!o?-1:!i&&o?1:0})}function T5(t,e){let r;return t==null?r=e:r=[t,...e.filter(n=>n!==t)],r}function aS({tokenGraphemeSplitter:t,enabledHatStyles:e,forceTokenHats:r,oldTokenHats:n,hatStability:i,activeTextEditor:o,visibleTextEditors:a}){let l=r==null?void 0:vM(r),p=vM(n),u=SM(o,a,l),d=hM(u,p,t),h=Object.keys(e),g=new to(()=>[...h]);return u.map(({token:x,rank:b})=>{let w=S5(t,x,g,e),F=mM(d,i,b,l?.get(x),p.get(x),w);if(F!=null)return g.set(F.grapheme.text,g.get(F.grapheme.text).filter(M=>M!==F.style)),v5(x,F)}).filter(x=>x!=null)}function vM(t){let e=new eo(({editor:r,offsets:n})=>[r.id,n.start,n.end]);return t.forEach(r=>e.set(r.token,r)),e}function S5(t,e,r,n){let i=[],o=t.getTokenGraphemes(e.text);for(let a of o)for(let l of r.get(a.text))i.push({grapheme:a,style:l,penalty:n[l].penalty});return i}function v5(t,e){return{hatStyle:e.style,grapheme:e.grapheme.text,token:t,hatRange:new W(t.range.start.translate(void 0,e.grapheme.tokenStartOffset),t.range.start.translate(void 0,e.grapheme.tokenEndOffset))}}var bd=class{constructor(e,r){this.hats=e;this.context=r;this.disposables=[];D().disposeOnExit(this);let n=new zn(D().configuration,()=>this.allocateHats());this.disposables.push(this.hats.onDidChangeEnabledHatStyles(n.run),this.hats.onDidChangeIsEnabled(n.run),D().onDidOpenTextDocument(n.run),D().onDidCloseTextDocument(n.run),D().onDidChangeActiveTextEditor(n.run),D().onDidChangeVisibleTextEditors(n.run),D().onDidChangeTextDocument(n.run),D().onDidChangeTextEditorSelection(n.run),D().onDidChangeTextEditorVisibleRanges(n.run),Qo().registerAlgorithmChangeListener(n.run),n)}async allocateHats(e){let r=await this.context.getActiveMap();e=e?.map(i=>({...i,grapheme:Qo().normalizeGrapheme(i.grapheme)}));let n=this.hats.isEnabled?aS({tokenGraphemeSplitter:Qo(),enabledHatStyles:this.hats.enabledHatStyles,forceTokenHats:e,oldTokenHats:r.tokenHats,hatStability:D().configuration.getOwnConfiguration("experimental.hatStability"),activeTextEditor:D().activeTextEditor,visibleTextEditors:D().visibleTextEditors}):[];r.setTokenHats(n),await this.hats.setHatRanges(n.map(({hatStyle:i,hatRange:o,token:{editor:a}})=>({editor:a,range:o,styleName:i})))}dispose(){this.disposables.forEach(({dispose:e})=>e())}};var wd=class t{constructor(e){this.rangeUpdater=e;this.isExpired=!1;this.documentTokenLists=new Map;this.deregisterFunctions=[];this.map={};this._tokenHats=[]}get tokenHats(){return this._tokenHats}getDocumentTokenList(e){let r=e.uri.toString(),n=this.documentTokenLists.get(r);return n==null&&(n=[],this.documentTokenLists.set(r,n),this.deregisterFunctions.push(this.rangeUpdater.registerRangeInfoList(e,n))),n}clone(){let e=new t(this.rangeUpdater);return e.setTokenHats(this._tokenHats),e}setTokenHats(e){this.map={},this.documentTokenLists=new Map,this.deregisterFunctions.forEach(n=>n());let r=e.map(n=>{let{hatStyle:i,grapheme:o,token:a}=n,l=this.makeTokenLive(a);return this.map[Jc(i,o)]=l,{...n,token:l}});this._tokenHats=r}makeTokenLive(e){let{tokenMatcher:r}=nn(e.editor.document.languageId),n={...e,expansionBehavior:{start:{type:"regex",regex:r},end:{type:"regex",regex:r}}};return this.getDocumentTokenList(e.editor.document).push(n),n}getEntries(){return this.checkExpired(),Object.entries(this.map)}getToken(e,r){return this.checkExpired(),this.map[Jc(e,Qo().normalizeGrapheme(r))]}checkExpired(){if(this.isExpired)throw Error("Map snapshot has expired")}dispose(){this.isExpired=!0,this.deregisterFunctions.forEach(e=>e())}};var b5=6e4,_d=class{constructor(e,r,n,i){this.debug=r;this.commandServerApi=i;this.prePhraseMapsSnapshotTimestamp=null;this.lastSignalVersion=null;D().disposeOnExit(this),this.activeMap=new wd(e),this.getActiveMap=this.getActiveMap.bind(this),this.allocateHats=this.allocateHats.bind(this),this.hatAllocator=new bd(n,{getActiveMap:this.getActiveMap})}allocateHats(e){return this.hatAllocator.allocateHats(e)}async getActiveMap(){return await this.maybeTakePrePhraseSnapshot(),this.activeMap}async getReadableMap(e){return await this.maybeTakePrePhraseSnapshot(),e?this.lastSignalVersion==null?(console.error("Pre phrase snapshot requested but no signal was present; please upgrade command client"),this.activeMap):this.prePhraseMapSnapshot==null?(console.error("Navigation map pre-phrase snapshot requested, but no snapshot has been taken"),this.activeMap):performance.now()-this.prePhraseMapsSnapshotTimestamp>b5?(console.error("Navigation map pre-phrase snapshot requested, but snapshot is more than a minute old"),this.activeMap):this.prePhraseMapSnapshot:this.activeMap}dispose(){this.activeMap.dispose(),this.prePhraseMapSnapshot!=null&&this.prePhraseMapSnapshot.dispose()}async maybeTakePrePhraseSnapshot(){let e=await this.commandServerApi.signals.prePhrase.getVersion();e!==this.lastSignalVersion&&(this.debug.log("taking snapshot"),this.lastSignalVersion=e,e!=null&&this.takePrePhraseSnapshot())}takePrePhraseSnapshot(){this.prePhraseMapSnapshot!=null&&this.prePhraseMapSnapshot.dispose(),this.prePhraseMapSnapshot=this.activeMap.clone(),this.prePhraseMapsSnapshotTimestamp=performance.now()}};function cS(t,e,r){let n=t.get(e);return n==null&&(n=r(),t.set(e,n)),n}var fS=ur(ul(),1);function dS(t,e){let{originalOffsets:{start:r,end:n},finalOffsets:{end:i},displacement:o}=t,{offsets:{start:a,end:l}}=e;return(0,fS.invariant)(n>r,()=>"Change range expected to be nonempty"),(0,fS.invariant)(n>=a&&r<=l,()=>"Change range expected to intersect with selection range"),{start:n<=a?a+o:Math.min(a,i),end:n<=l?l+o:Math.min(l,i)}}var kM=ur(ul(),1);function mS(t,e){let{event:{text:r,isReplace:n},finalOffsets:{start:i,end:o}}=t;if((0,kM.invariant)(i===t.originalOffsets.end&&i===e.offsets.start&&i===e.offsets.end,()=>"Selection range and change range expected to be same empty range"),n){let a=e.expansionBehavior.end;switch(a.type){case"closed":return{start:i,end:i};case"open":return{start:i,end:o};case"regex":{let l=r.match(cf(a.regex));return l==null?{start:i,end:i}:{start:i,end:i+l[0].length}}}}else{let a=e.expansionBehavior.start;switch(a.type){case"closed":return{start:o,end:o};case"open":return{start:i,end:o};case"regex":{let l=r.search(af(a.regex));return l===-1?{start:o,end:o}:{start:i+l,end:o}}}}}var hS=ur(ul(),1);function gS(t,e){let{event:{text:r},originalOffsets:{start:n},displacement:i}=t,{offsets:{start:o,end:a},text:l}=e;if((0,hS.invariant)(a>o,()=>"Selection range expected to be nonempty"),(0,hS.invariant)(n>=o&&n<=a,()=>"Insertion offset expected to intersect with selection range"),n>o&&n<a)return{start:o,end:a+i};if(n===o){let p=e.expansionBehavior.start,u=a+i;switch(p.type){case"closed":return{start:o+i,end:u};case"open":return{start:o,end:u};case"regex":{let d=r+l,h=af(p.regex),g=d.search(h);for(;g>r.length;)d=d.slice(0,g),g=d.search(h);return g===-1?{start:o,end:u}:{start:o+g,end:u}}}}else{let p=e.expansionBehavior.end,u=o;switch(p.type){case"closed":return{start:u,end:a};case"open":return{start:u,end:a+i};case"regex":{let d=l+r,h=cf(p.regex),g=d.match(h),x=g==null?0:g[0].length;for(;x!==0&&x<l.length;)d=l.slice(x)+r,g=d.match(h),x=g==null?0:x+g[0].length;return x===0?{start:u,end:a}:{start:u,end:o+x}}}}}function PM(t,e,r){let{start:n,end:i}=t.originalOffsets,{start:o,end:a}=e.offsets,l=Math.min(n,o),p="";return o<n&&(p+=e.text.substring(0,n-o)),p+=t.event.text,i<a&&(p+=e.text.substring(a-i,e.text.length)),p.substring(r.start-l,r.end-l)}function MM(t,e){let{document:r,contentChanges:n}=t,i=n.map(o=>{let a=o.text.length-o.rangeLength,l=o.rangeOffset,p=l+o.rangeLength,u=l,d=p+a;return{displacement:a,event:o,originalOffsets:{start:l,end:p},finalOffsets:{start:u,end:d}}});for(let o of e){let a=o.offsets,l=i.map(u=>{let d;return u.originalOffsets.start>a.end?{start:0,end:0}:u.originalOffsets.end<a.start?{start:u.displacement,end:u.displacement}:(u.event.rangeLength===0?o.range.isEmpty?d=mS(u,o):d=gS(u,o):d=dS(u,o),o.text=PM(u,o,d),{start:d.start-a.start,end:d.end-a.end})}),p={start:a.start+ef(l,({start:u})=>u),end:a.end+ef(l,({end:u})=>u)};o.range=o.range.with(r.positionAt(p.start),r.positionAt(p.end)),o.offsets=p}}var Rd=class{constructor(){this.rangeInfoLists=new Map;this.replaceEditLists=new Map;this.listenForDocumentChanges()}getDocumentRangeInfoLists(e){return cS(this.rangeInfoLists,e.uri.toString(),()=>[])}getDocumentReplaceEditLists(e){return cS(this.replaceEditLists,e.uri.toString(),()=>[])}registerRangeInfoList(e,r){let n=this.getDocumentRangeInfoLists(e);return n.push(r),()=>Jt(n,r)}registerReplaceEditList(e,r){let n=this.getDocumentReplaceEditLists(e);return n.push(r),()=>Jt(n,r)}*documentRangeInfoGenerator(e){let r=this.getDocumentRangeInfoLists(e);for(let n of r)for(let i of n)yield i}listenForDocumentChanges(){this.disposable=D().onDidChangeTextDocument(e=>{let r=this.getDocumentReplaceEditLists(e.document),n={...e,contentChanges:e.contentChanges.map(i=>D5(r,i)?{...i,isReplace:!0}:i)};MM(n,this.documentRangeInfoGenerator(e.document))})}dispose(){this.disposable.dispose()}};function D5(t,e){for(let r of t)for(let n of r)if(n.range.isRangeEqual(e.range)&&n.text===e.text)return!0;return!1}var kd=class{constructor(){this.signals={prePhrase:{getVersion(){return Promise.resolve(null)}}}}getFocusedElementType(){return Promise.resolve(void 0)}};var Pd=class{async allocateHats(){}async getReadableMap(){return{getEntries(){return[]},getToken(){throw new Error("Hat map is disabled")}}}dispose(){}};var Md=class{onDidChangeDefinition(e){return{dispose:()=>{}}}loadLanguage(e){return Promise.resolve()}get(e){}getNodeAtLocation(e,r){}dispose(){}};var Ad=class{updateUserSnippets(){throw new Error("Snippets are not implemented.")}registerThirdPartySnippets(e,r){throw new Error("Snippets are not implemented.")}getSnippetStrict(e){throw new Error("Snippets are not implemented.")}openNewSnippetFile(e){throw new Error("Snippets are not implemented.")}};var Dd=class{getSpokenFormEntries(){throw new aa}onDidChange(){return{dispose:()=>{}}}};var Id=class{getTree(e){throw new Error("Tree sitter not provided")}loadLanguage(e){return Promise.resolve(!1)}getLanguage(e){throw new Error("Tree sitter not provided")}getNodeAtLocation(e,r){throw new Error("Tree sitter not provided")}};var Ke=class extends Error{constructor(r,n=!1,i=!1){super(`No spoken form for: ${r}`);this.reason=r;this.requiresTalonUpdate=n;this.isPrivate=i}};var AM={curlyBrackets:["{","}"],angleBrackets:["<",">"],escapedDoubleQuotes:['\\"','\\"'],escapedSingleQuotes:["\\'","\\'"],escapedParentheses:["\\(","\\)"],escapedSquareBrackets:["\\[","\\]"],doubleQuotes:['"','"'],parentheses:["(",")"],backtickQuotes:["`","`"],squareBrackets:["[","]"],singleQuotes:["'","'"],tripleDoubleQuotes:['"""','"""'],tripleSingleQuotes:["'''","'''"],whitespace:[" "," "],any:null,string:null,collectionBoundary:null};var DM=new eo(t=>t);for(let[t,e]of Object.entries(AM))e!=null&&DM.set(e,t);function IM(t,e,r){let n=DM.get([e,r]);if(n==null)throw Error(`Unknown surrounding pair delimiters '${e} ${r}'`);return t.pairedDelimiter[n]}var I5={ifStatement:"if",ifElseStatement:"if else",tryCatchStatement:"try",functionDeclaration:"funk",link:"link"},F5={"ifElseStatement.alternative":"else","functionDeclaration.body":"funk","ifElseStatement.consequence":"if else","ifStatement.consequence":"if","tryCatchStatement.body":"try","link.text":"link"};function FM(t){if(t.type==="custom")throw new Ke("Custom insertion snippet");let e=I5[t.name];if(e==null)throw new Ke(`Named insertion snippet '${t.name}'`);if(t.substitutions!=null){let r=Object.values(t.substitutions);return`${e} ${r.join(" ")}`}return e}function CM(t){if(t.type==="custom")throw new Ke("Custom wrap with snippet");let e=`${t.name}.${t.variableName}`,r=F5[e];if(r==null)throw new Ke(`Named wrap with snippet '${e}'`);return r}function fl(t,e,r){let n=r==="vertical"?`${ft.verticalRange} `:"";if(t&&e)return n+ft.rangeExclusive;if(t)throw new Ke("Range exclude anchor");return e?n+ft.rangeExcludingEnd:r==="vertical"?ft.verticalRange:ft.rangeInclusive}function OM(t){return Object.fromEntries(Object.entries(t).map(([e,r])=>[e,Object.fromEntries(Object.entries(r).map(([n,i])=>[n,{type:"customizable",spokenForms:i,spokenFormType:e,id:n}]))]))}var C5=["zero","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen","twenty","twenty one","twenty two","twenty three","twenty four","twenty five","twenty six","twenty seven","twenty eight","twenty nine","thirty","thirty one","thirty two","thirty three","thirty four","thirty five","thirty six","thirty seven","thirty eight","thirty nine","forty","forty one","forty two","forty three","forty four","forty five","forty six","forty seven","forty eight","forty nine","fifty","fifty one","fifty two","fifty three","fifty four","fifty five","fifty six","fifty seven","fifty eight","fifty nine","sixty","sixty one","sixty two","sixty three","sixty four","sixty five","sixty six","sixty seven","sixty eight","sixty nine","seventy","seventy one","seventy two","seventy three","seventy four","seventy five","seventy six","seventy seven","seventy eight","seventy nine","eighty","eighty one","eighty two","eighty three","eighty four","eighty five","eighty six","eighty seven","eighty eight","eighty nine","ninety","ninety one","ninety two","ninety three","ninety four","ninety five","ninety six","ninety seven","ninety eight","ninety nine"],O5=["zeroth","first","second","third","fourth","fifth","sixth","seventh","eighth","ninth","tenth","eleventh","twelfth","thirteenth","fourteenth","fifteenth","sixteenth","seventeenth","eighteenth","nineteenth","twentieth"];function ha(t){let e=C5[t];if(e==null)throw Error(`Unknown number '${t}'`);return e}function dl(t){let e=O5[t];if(e==null)throw Error(`Unknown ordinal '${t}'`);return e}var Fd=class{constructor(e){this.spokenFormMap=e;this.handleModifier=this.handleModifier.bind(this)}handlePrimitiveTarget(e){let r=[];return e.modifiers!=null&&r.push(e.modifiers.map(this.handleModifier)),e.mark!=null&&r.push(this.handleMark(e.mark)),r}handleModifier(e){switch(e.type){case"cascading":case"modifyIfUntyped":case"preferredScope":throw new Ke(`Modifier '${e.type}'`);case"containingScope":if(e.ancestorIndex==null||e.ancestorIndex===0)return this.handleScopeType(e.scopeType);if(e.ancestorIndex===1)return[this.spokenFormMap.modifierExtra.ancestor,this.handleScopeType(e.scopeType)];throw new Ke(`Modifier '${e.type}' with ancestor index ${e.ancestorIndex}`);case"everyScope":return[this.spokenFormMap.simpleModifier.everyScope,this.handleScopeType(e.scopeType)];case"extendThroughStartOf":case"extendThroughEndOf":{let r=this.spokenFormMap.simpleModifier[e.type];return e.modifiers!=null?[r,e.modifiers.map(this.handleModifier)]:[r]}case"relativeScope":return e.offset===0?this.handleRelativeScopeInclusive(e):this.handleRelativeScopeExclusive(e);case"ordinalScope":{let r=this.handleScopeType(e.scopeType),n=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.length===1)return e.start===-1?[n,this.spokenFormMap.modifierExtra.last,r]:e.start===0?[n,this.spokenFormMap.modifierExtra.first,r]:e.start<0?[n,dl(Math.abs(e.start)),this.spokenFormMap.modifierExtra.last,r]:[n,dl(e.start+1),r];let i=ha(e.length);if(e.start===0)return[n,this.spokenFormMap.modifierExtra.first,i,ml(r)];if(e.start===-e.length)return[n,this.spokenFormMap.modifierExtra.last,i,ml(r)];throw new Ke(`'${e.type}' with count > 1 and offset away from start / end`)}case"range":{if(e.anchor.type==="ordinalScope"&&e.active.type==="ordinalScope"&&e.anchor.length===1&&e.active.length===1&&e.anchor.scopeType.type===e.active.scopeType.type){let r=e.anchor.start===-1?this.spokenFormMap.modifierExtra.last:dl(e.anchor.start+1),n=this.handleModifier(e.active),i=fl(e.excludeAnchor,e.excludeActive);return[r,i,n]}throw Error(`Modifier '${e.type}' is not fully implemented`)}default:return[this.spokenFormMap.simpleModifier[e.type]]}}handleRelativeScopeInclusive(e){let r=this.handleScopeType(e.scopeType),n=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.length===1){let a=e.direction==="forward"?ft.forward:ft.backward;return[n,r,a]}let i=ha(e.length),o=ml(r);return e.direction==="forward"?[n,i,o]:[n,i,o,ft.backward]}handleRelativeScopeExclusive(e){let r=this.handleScopeType(e.scopeType),n=e.direction==="forward"?ft.next:ft.previous,i=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.offset===1){let o=ha(e.length);if(e.length===1)return[i,n,r];let a=ml(r);return[i,n,o,a]}if(e.length===1){let o=dl(e.offset);return[i,o,n,r]}throw new Ke(`${e.type} modifier with offset > 1 and length > 1`)}handleScopeType(e){switch(e.type){case"oneOf":case"surroundingPairInterior":throw new Ke(`Scope type '${e.type}'`);case"glyph":return[this.spokenFormMap.complexScopeTypeType.glyph,LM(this.spokenFormMap.grapheme,"grapheme",e.character)];case"surroundingPair":{let r=this.spokenFormMap.pairedDelimiter[e.delimiter];return e.forceDirection!=null?[this.spokenFormMap.surroundingPairForceDirection[e.forceDirection],r]:r}case"customRegex":return this.spokenFormMap.customRegex[e.regex]??{type:"customizable",spokenForms:{spokenForms:[],isCustom:!0,defaultSpokenForms:[],requiresTalonUpdate:!1,isPrivate:!1},spokenFormType:"customRegex",id:e.regex};default:return this.spokenFormMap.simpleScopeTypeType[e.type]}}handleMark(e){switch(e.type){case"decoratedSymbol":{let[r,n]=e.symbolColor.split("-"),i=[];return r!=="default"&&i.push(AP(r)),n!=null&&i.push(DP(n)),i.push(LM(this.spokenFormMap.grapheme,"grapheme",e.character)),i}case"lineNumber":return this.handleLineNumberMark(e);case"range":{if(e.anchor.type==="lineNumber"&&e.active.type==="lineNumber"){let[r,n]=this.handleLineNumberMark(e.anchor),[i,o]=this.handleLineNumberMark(e.active);if(r===i){let a=fl(e.excludeAnchor,e.excludeActive);return[r,n,a,o]}}throw Error(`Mark '${e.type}' is not fully implemented`)}case"explicit":case"keyboard":case"target":throw new Ke(`Mark '${e.type}'`);default:return[jf[e.type]]}}handleLineNumberMark(e){switch(e.lineNumberType){case"absolute":throw new Ke("Absolute line numbers");case"modulo100":return[zf.modulo100,ha(e.lineNumber+1)];case"relative":return[e.lineNumber<0?zf.relativeUp:zf.relativeDown,ha(Math.abs(e.lineNumber))]}}};function ml(t){if(typeof t=="string")return NM(t);if(Array.isArray(t)){if(t.length===0)return t;let e=t[t.length-1];return[...t.slice(0,-1),ml(e)]}return{...t,spokenForms:{...t.spokenForms,spokenForms:t.spokenForms.spokenForms.map(NM)}}}function NM(t){return`${t}s`}function LM(t,e,r){let n=t[r];if(n==null)throw new Ke(`${e} '${r}'`);return n}var ga=class{constructor(e){this.spokenFormMap=OM(e),this.primitiveGenerator=new Fd(this.spokenFormMap)}getSpokenFormForSingleTerm(e,r){return this.componentsToSpokenForm(()=>{let n=this.spokenFormMap[e][r];if(n==null)throw new Ke(`${e} with id ${r}`);return n})}processCommand(e){return this.componentsToSpokenForm(()=>this.handleAction(e.action))}processScopeType(e){return this.componentsToSpokenForm(()=>[this.primitiveGenerator.handleScopeType(e)])}componentsToSpokenForm(e){try{return{type:"success",spokenForms:UM(e())}}catch(r){if(r instanceof Ke)return{type:"error",reason:r.reason,requiresTalonUpdate:r.requiresTalonUpdate,isPrivate:r.isPrivate};throw r}}handleAction(e){switch(e.name){case"editNew":case"getText":case"replace":case"executeCommand":case"parsed":case"private.getTargets":case"private.setKeyboardTarget":throw new Ke(`Action '${e.name}'`);case"replaceWithTarget":case"moveToTarget":return[this.spokenFormMap.action[e.name],this.handleTarget(e.source),this.handleDestination(e.destination)];case"swapTargets":return[this.spokenFormMap.action[e.name],this.handleTarget(e.target1),ft.swapConnective,this.handleTarget(e.target2)];case"callAsFunction":return e.argument.type==="implicit"?[this.spokenFormMap.action[e.name],this.handleTarget(e.callee)]:[this.spokenFormMap.action[e.name],this.handleTarget(e.callee),"on",this.handleTarget(e.argument)];case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return[IM(this.spokenFormMap,e.left,e.right),this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"pasteFromClipboard":return[this.spokenFormMap.action[e.name],this.handleDestination(e.destination)];case"insertSnippet":return[this.spokenFormMap.action[e.name],FM(e.snippetDescription),this.handleDestination(e.destination)];case"generateSnippet":if(e.snippetName!=null)throw new Ke(`${e.name}.snippetName`);return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"wrapWithSnippet":return[CM(e.snippetDescription),this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"highlight":{if(e.highlightId!=null)throw new Ke(`${e.name}.highlightId`);return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)]}default:return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)]}}handleTarget(e){switch(e.type){case"list":if(e.elements.length<2)throw new Ke("List target with < 2 elements");return e.elements.map((r,n)=>n===0?this.handleTarget(r):[ft.listConnective,this.handleTarget(r)]);case"range":{let r=this.handleTarget(e.anchor),n=this.handleTarget(e.active),i=fl(e.excludeAnchor,e.excludeActive,e.rangeType);return[r,i,n]}case"primitive":return this.primitiveGenerator.handlePrimitiveTarget(e);case"implicit":return[]}}handleDestination(e){switch(e.type){case"list":if(e.destinations.length<2)throw new Ke("List destination with < 2 elements");return e.destinations.map((r,n)=>n===0?this.handleDestination(r):[ft.listConnective,this.handleDestination(r)]);case"primitive":return[this.handleInsertionMode(e.insertionMode),this.handleTarget(e.target)];case"implicit":return[]}}handleInsertionMode(e){switch(e){case"to":return ft.sourceDestinationConnective;case"before":return ft.before;case"after":return ft.after}}};function UM(t){if(typeof t=="string")return[t];if(Array.isArray(t))return t.length===0?[""]:VM(t.map(UM)).map(e=>e.filter(r=>r.length!==0).join(" "));if(t.spokenForms.spokenForms.length===0){let e=`${Zc(t.spokenFormType)} with id ${t.id}`,r;throw t.spokenForms.isPrivate?r="this is a private spoken form currently only for internal experimentation":t.spokenForms.requiresTalonUpdate?r="please update talon to the latest version (see https://www.cursorless.org/docs/user/updating/)":r="please see https://www.cursorless.org/docs/user/customization/ for more information",new Ke(`${e}; ${r}`,t.spokenForms.requiresTalonUpdate,t.spokenForms.isPrivate)}return t.spokenForms.spokenForms}function VM(t){if(t.length===0)return[];if(t.length===1)return t[0].map(i=>[i]);let[e,...r]=t,n=VM(r);return e.flatMap(i=>n.map(o=>[i,...o]))}var Cd=class{constructor(e){this.talonSpokenForms=e;this.notifier=new Wt;this.spokenFormMap_={...vi};this.onDidChangeCustomSpokenForms=this.notifier.registerListener;this.disposable=e.onDidChange(()=>this.updateSpokenFormMaps().catch(()=>{})),this.customSpokenFormsInitialized=this.updateSpokenFormMaps(),this.customSpokenFormsInitialized.catch(()=>{})}get spokenFormMap(){return this.spokenFormMap_}get needsInitialTalonUpdate(){return this.needsInitialTalonUpdate_}async updateSpokenFormMaps(){let e;try{if(e=await this.talonSpokenForms.getSpokenFormEntries(),e.length===0)throw new Error("Custom spoken forms list empty")}catch(r){if(r instanceof Qc)this.needsInitialTalonUpdate_=!0;else if(!(r instanceof aa)){console.error("Error loading custom spoken forms",r);let n=r.message.replace(/\.$/,"");nt(D().messages,"CustomSpokenForms.updateSpokenFormMaps",`Error loading custom spoken forms: ${n}. Falling back to default spoken forms.`)}throw this.spokenFormMap_={...vi},this.notifier.notifyListeners(),r}for(let r of qk)N5(this.spokenFormMap_,r,$T[r],Object.fromEntries(e.filter(n=>n.type===r).map(({id:n,spokenForms:i})=>[n,i])));this.notifier.notifyListeners()}getCustomRegexScopeTypes(){return Object.keys(this.spokenFormMap_.customRegex).map(e=>({type:"customRegex",regex:e}))}dispose(){this.disposable.dispose()}};function N5(t,e,r,n){let i=Array.from(new Set([...Object.keys(r),...Object.keys(n)])),o={};for(let a of i){let{defaultSpokenForms:l=[],isPrivate:p=!1}=r[a]??{},u=n[a];o[a]=u==null?{defaultSpokenForms:l,spokenForms:[],requiresTalonUpdate:!p,isCustom:!1,isPrivate:p}:{defaultSpokenForms:l,spokenForms:u,requiresTalonUpdate:!1,isCustom:!gi(l,u),isPrivate:p}}t[e]=o}var Od=class{constructor(e){this.customSpokenForms=new Cd(e),this.customSpokenFormsInitialized=this.customSpokenForms.customSpokenFormsInitialized,this.spokenFormGenerator=new ga(this.customSpokenForms.spokenFormMap),this.disposable=this.customSpokenForms.onDidChangeCustomSpokenForms(()=>{this.spokenFormGenerator=new ga(this.customSpokenForms.spokenFormMap)})}onDidChangeCustomSpokenForms(e){return this.customSpokenForms.onDidChangeCustomSpokenForms(e)}commandToSpokenForm(e){return this.spokenFormGenerator.processCommand(e)}scopeTypeToSpokenForm(e){return this.spokenFormGenerator.processScopeType(e)}actionIdToSpokenForm(e){return this.spokenFormGenerator.getSpokenFormForSingleTerm("action",e)}graphemeToSpokenForm(e){return this.spokenFormGenerator.getSpokenFormForSingleTerm("grapheme",e)}getCustomRegexScopeTypes(){return this.customSpokenForms.getCustomRegexScopeTypes()}get needsInitialTalonUpdate(){return this.customSpokenForms.needsInitialTalonUpdate}dispose(){this.disposable.dispose()}};function*L5(t){for(let e of t)for(let r of e)yield r}function*hl(t,e){let r=Nd(e),n=t;for(;n-- >0;){let i=r.next();if(!i.done)yield i.value;else return}}function*HM(t){let e=Nd(t),r=e.next();if(r.done)return;let n=r.value;for(let i of e)yield[n,i],n=i}var Jve=Symbol();function*U5(t=0,e=1){let r=t;for(;;)yield r,r+=e}function*WM(t,e){for(let r of t)e(r)&&(yield r)}function*Lt(t,e){for(let r of t)yield e(r)}function*$M(t,e,r,n=1){let i,o;if(r!==void 0?(i=e,o=r):(i=0,o=e),i<0)throw new Error("start cannot be negative");if(o!==null&&o<0)throw new Error("stop cannot be negative");if(n<=0)throw new Error("step cannot be negative");let a=-1,l=Nd(t),p;for(;;){if(a++,o!==null&&a>=o||(p=l.next(),p.done))return;a<i||(a-i)%n===0&&(yield p.value)}}function*V5(t,e){let r=Nd(t),n;for(;!(n=r.next()).done;){let i=n.value;if(!e(i))return;yield i}}function Nd(t){return t[Symbol.iterator]()}function co(t,e){return Array.from(Lt(t,e))}function BM(t,e,r){let n=U5(t,r),i=r>=0?o=>o<e:o=>o>e;return V5(n,i)}function qM(t,e,r=1){return e!==void 0?BM(t,e,r):BM(0,t,r)}function Ld(t,e){return L5(Lt(t,e))}function Rn(t,e,{domain:r},{domain:n}){return t==="forward"?B5(e,r,n):H5(e,r,n)}function B5(t,e,r){let n=e.start.isAfterOrEqual(t),i=r.start.isAfterOrEqual(t);if(n&&i){let a=e.start.compareTo(r.start);return a===0?e.end.compareTo(r.end):a}if(!n&&!i){let a=e.end.compareTo(r.end);return a===0?-e.start.compareTo(r.start):a}if(!n&&i){let a=e.end.compareTo(r.start);return a!==0?a:r.isEmpty?1:-1}let o=e.start.compareTo(r.end);return o!==0?o:e.isEmpty?-1:1}function H5(t,e,r){let n=e.end.isBeforeOrEqual(t),i=r.end.isBeforeOrEqual(t);if(n&&i){let a=-e.end.compareTo(r.end);return a===0?-e.start.compareTo(r.start):a}if(!n&&!i){let a=-e.start.compareTo(r.start);return a===0?e.end.compareTo(r.end):a}if(!n&&i){let a=-e.start.compareTo(r.end);return a!==0?a:r.isEmpty?1:-1}let o=-e.end.compareTo(r.start);return o!==0?o:e.isEmpty?-1:1}function jM(t,e,r,n,i,o){return W5(t,n,i,o)&&(i==null||Rn(r,n.includeDescendantScopes?t:e,i,o)<0)}function W5(t,e,r,n){let{containment:i,distalPosition:o,allowAdjacentScopes:a,skipAncestorScopes:l}=e,{domain:p}=n;switch(i){case"disallowed":if(p.contains(t))return!1;break;case"disallowedIfStrict":if(aM(p,t))return!1;break;case"required":if(!p.contains(t))return!1;break}return l&&r!=null&&p.contains(r.domain)?!1:$5(new W(t,o),p,a)}function $5(t,e,r){let n=t.intersection(e);return n==null?!1:!n.isEmpty||r||e.isEmpty}var q5={containment:null,allowAdjacentScopes:!1,skipAncestorScopes:!1,includeDescendantScopes:!1},xt=class{constructor(){this.includeAdjacentInEvery=!1}*generateScopes(e,r,n,i={}){let o={...q5,...i,distalPosition:i.distalPosition??(n==="forward"?e.document.range.end:e.document.range.start)},a,l=r;for(let p of this.generateScopeCandidates(e,r,n,o))if(jM(r,l,n,o,a,p)&&(yield p,a=p,l=n==="forward"?p.domain.end:p.domain.start),this.canStopEarly(r,n,o,a,p))return}canStopEarly(e,r,n,i,o){let{containment:a,distalPosition:l,skipAncestorScopes:p}=n;if(this.isHierarchical&&!p)return!1;let u=this.isHierarchical&&p?i:o;return u==null?!1:!!(a==="required"&&(r==="forward"?u.domain.end.isAfter(e):u.domain.start.isBefore(e))||(r==="forward"?u.domain.end.isAfterOrEqual(l):u.domain.start.isBeforeOrEqual(l)))}};var yr=class extends xt{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.scopeType=n;this.languageId=i;this.isHierarchical=!1}get searchScopeType(){return this.iterationScopeType}get searchScopeHandler(){return this._searchScopeHandler==null&&(this._searchScopeHandler=this.scopeHandlerFactory.create(this.searchScopeType,this.languageId)),this._searchScopeHandler}generateScopeCandidates(r,n,i,o){let{containment:a,...l}=o,p=this.searchScopeHandler.generateScopes(r,n,i,{containment:a==="required"?"required":void 0,...l});return Ld(p,u=>this.generateScopesInSearchScope(i,u))}};var Ud=class extends xt{constructor(r,n){super();this.scopeType={type:"line"};this.iterationScopeType={type:"paragraph"};this.isHierarchical=!1;this.includeAdjacentInEvery=!0}*generateScopeCandidates(r,n,i){if(i==="forward")for(let o=n.line;o<r.document.lineCount;o++)yield zM(r,o);else for(let o=n.line;o>=0;o--)yield zM(r,o)}};function zM(t,e){let{range:r}=t.document.lineAt(e);return{editor:t,domain:r,getTargets:n=>[yS(t,n,r)]}}function yS(t,e,r){return new Or({editor:t,isReversed:e,contentRange:gl(t,r)})}function gl(t,e){let r=t.document.lineAt(e.start),n=t.document.lineAt(e.end);return new W(r.rangeTrimmed?.start??r.range.start,n.rangeTrimmed?.end??n.range.end)}function Kn(t,e,r,n){let i=e.document.offsetAt(r.start),o=e.document.getText(r),a=l=>new W(e.document.positionAt(i+l.index),e.document.positionAt(i+l.index+l[0].length));return t.lastIndex=0,n==="forward"?Lt(o.matchAll(t),a):Array.from(o.matchAll(t),a).reverse()}var Vd=class extends yr{constructor(){super(...arguments);this.scopeType={type:"identifier"};this.iterationScopeType={type:"line"};this.regex=nn(this.languageId).identifierMatcher}generateScopesInSearchScope(r,{editor:n,domain:i}){return Lt(Kn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:a=>[new gr({editor:n,contentRange:o,isReversed:a})]}))}};function Bd(t,e,r){let n=t.editor.document.getText(t.domain),i=e.editor.document.getText(e.domain);for(let o of r){let a=Uc(o,n),l=Uc(o,i);if(a&&!l)return!0;if(l&&!a)return!1}}var j5=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}\p{Z}\p{C}]/gu,z5=/[$]/g,G5=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}]/gu,Hd=class extends yr{constructor(){super(...arguments);this.scopeType={type:"character"};this.iterationScopeType={type:"token"}}get searchScopeType(){return{type:"line"}}generateScopesInSearchScope(r,{editor:n,domain:i}){return Lt(Kn(j5,n,i,r),o=>({editor:n,domain:o,getTargets:a=>[new He({editor:n,contentRange:o,isReversed:a,isToken:!1})]}))}isPreferredOver(r,n){let{identifierMatcher:i}=nn(this.languageId);return Bd(r,n,[i,z5,G5])}};var K5=/\p{Lu}?\p{Ll}+|\p{Lu}+(?!\p{Ll})|\p{N}+/gu,Wd=class{constructor(e){this.wordRegex=nn(e).wordMatcher}splitIdentifier(e){let r=Vc(e,this.wordRegex);return r.length>1?r:Vc(e,K5)}};var $d=class extends yr{constructor(){super(...arguments);this.scopeType={type:"word"};this.iterationScopeType={type:"identifier"};this.wordTokenizer=new Wd(this.languageId)}getScopesInSearchScope({editor:r,domain:n}){let{document:i}=r,o=i.offsetAt(n.start),l=this.wordTokenizer.splitIdentifier(i.getText(n)).map(p=>new W(i.positionAt(o+p.index),i.positionAt(o+p.index+p.text.length)));return l.map((p,u)=>({editor:r,domain:p,getTargets:d=>{let h=u>0?l[u-1]:null,g=u+1<l.length?l[u+1]:null;return[Q5(d,r,h,p,g)]}}))}generateScopesInSearchScope(r,n){let i=this.getScopesInSearchScope(n);return r==="backward"&&i.reverse(),i}};function Q5(t,e,r,n,i){let o=r!=null&&n.start.isAfter(r.end)?new W(r.end,n.start):void 0,a=i!=null&&i.start.isAfter(n.end)?new W(n.end,i.start):void 0,p=o!=null||a!=null?e.document.getText(o??a):"";return new dd({editor:e,isReversed:t,contentRange:n,insertionDelimiter:p,leadingDelimiterRange:o,trailingDelimiterRange:a})}var Z5=/[$]/g,qd=class extends yr{constructor(){super(...arguments);this.scopeType={type:"token"};this.iterationScopeType={type:"line"};this.regex=nn(this.languageId).tokenMatcher}generateScopesInSearchScope(r,{editor:n,domain:i}){return Lt(Kn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:a=>[new gr({editor:n,contentRange:o,isReversed:a})]}))}isPreferredOver(r,n){let{identifierMatcher:i}=nn(this.languageId);return Bd(r,n,[i,Z5])}};var jd=class extends xt{constructor(r,n){super();this.scopeType={type:"document"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i){let o=r.document.range;yield{editor:r,domain:o,getTargets:a=>[new ld({editor:r,isReversed:a,contentRange:o})]}}};function GM(t,e,r){let n=[],i=[];for(let o of t)i.length===0||e(i[i.length-1],o)?i.push(o):(n.push(r(i)),i=[o]);return i.length>0&&n.push(r(i)),n}var ya=class extends xt{constructor(r){super();this.query=r}*generateScopeCandidates(r,n,i,o){let{document:a}=r,l=this.query.matches(a).map(p=>this.matchToScope(r,p)).filter(p=>p!=null).sort((p,u)=>Rn(i,n,p,u));yield*GM(l,(p,u)=>p.domain.isRangeEqual(u.domain),p=>p.length===1?p[0]:{...p[0],getTargets(u){let d=Fc(p.flatMap(h=>h.getTargets(u)),(h,g)=>h.isEqual(g));if(d.length>1&&!p.every(h=>h.allowMultiple)){let h="Please use #allow-multiple! predicate in your query to allow multiple matches for this scope type";if(nt(D().messages,"BaseTreeSitterScopeHandler.allow-multiple",h),D().runMode==="test")throw Error(h)}return d}})}};function xS(t,e,r,n){return n?xa(t,`${e}.${r}`,`_.${r}`):xa(t,`${e}.${r}`)??(xa(t,e)!=null?xa(t,`_.${r}`):void 0)}function _i(t,e,r,n){return xS(t,e,r,n)?.range}function xa(t,...e){return t.captures.find(r=>e.some(n=>r.name===n))}var zd=class extends ya{constructor(r,n){super(r);this.iterateeScopeType=n;this.isHierarchical=!0;this.scopeType=void 0}get iterationScopeType(){throw Error("Not implemented")}matchToScope(r,n){let i=this.iterateeScopeType.type,o=xS(n,i,"iteration",!1);if(o==null)return;let{range:a,allowMultiple:l}=o,p=_i(n,i,"iteration.domain",!1)??a;return{editor:r,domain:p,allowMultiple:l,getTargets:u=>[new He({editor:r,isReversed:u,contentRange:a})]}}};var Gd=class extends ya{constructor(r,n){super(r);this.scopeType=n;this.isHierarchical=!0}get iterationScopeType(){return{type:"custom",scopeHandler:new zd(this.query,this.scopeType)}}matchToScope(r,n){let i=this.scopeType.type,o=xa(n,i);if(o==null)return;let{range:a,allowMultiple:l,insertionDelimiter:p}=o,u=_i(n,i,"domain",!0)??a,d=_i(n,i,"removal",!0),h=_i(n,i,"interior",!0),g=_i(n,i,"prefix",!0)?.with(void 0,a.start),x=_i(n,i,"leading",!0)?.with(void 0,g?.start??a.start),b=_i(n,i,"trailing",!0)?.with(a.end);return{editor:r,domain:u,allowMultiple:l,getTargets:w=>[new so({scopeTypeType:i,editor:r,isReversed:w,contentRange:a,prefixRange:g,removalRange:d,leadingDelimiterRange:x,trailingDelimiterRange:b,interiorRange:h,insertionDelimiter:p})]}}};function KM(t){return t.flatMap(e=>{let{value:r,done:n}=e.next();return n?[]:[{iterator:e,value:r}]})}function QM(t,e){return t.flatMap(r=>{let{iterator:n}=r,{value:i}=r,o=!1;for(;!o&&!e(i);)({value:i,done:o}=n.next());return o?[]:[{iterator:n,value:i}]})}var Kd=class t extends xt{constructor(r,n,i){super();this.scopeType=r;this.scopeHandlers=n;this.getIterationScopeType=i;this.isHierarchical=!0}static create(r,n,i){let o=n.scopeTypes.map(l=>{let p=r.create(l,i);if(p==null)throw new Error(`No available scope handler for '${l.type}'`);return p}),a=()=>({type:"custom",scopeHandler:new t(void 0,o.map(l=>r.create(l.iterationScopeType,i)),()=>{throw new Error("Not implemented")})});return new t(n,o,a)}get iterationScopeType(){return this.getIterationScopeType()}*generateScopeCandidates(r,n,i,o){let a=this.scopeHandlers.map(p=>p.generateScopes(r,n,i,o)[Symbol.iterator]()),l=KM(a);for(;l.length>0;){l.sort((u,d)=>Rn(i,n,u.value,d.value));let p=l[0].value;yield p,l=QM(l,u=>Rn(i,n,p,u)<0)}}};var Qd=class extends xt{constructor(r,n){super();this.scopeType={type:"paragraph"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i){let{document:o}=r,a=i==="forward"?1:-1,l=i==="forward"?o.lineCount:-1,p=Y5(o,n,i),u=r.document.lineAt(n);for(let d=n.line+a;d!==l;d+=a){let h=r.document.lineAt(d);h.isEmptyOrWhitespace?p!=null&&(yield ZM(r,p.range.union(u.range)),p=void 0):p==null&&(p=h),u=h}p!=null&&(yield ZM(r,p.range.union(u.range)))}};function Y5(t,e,r){let n=r==="forward"?-1:1,i=r==="forward"?-1:t.lineCount,o=t.lineAt(e);if(!o.isEmptyOrWhitespace){for(let a=e.line+n;a!==i;a+=n){let l=t.lineAt(a);if(l.isEmptyOrWhitespace)break;o=l}return o}}function ZM(t,e){return{editor:t,domain:e,getTargets:r=>[new fa({editor:t,isReversed:r,contentRange:gl(t,e)})]}}function yl(t,e){return e.length>1?e.indexOf(t.slice(-1))>-1:t.slice(-1)===e}function YM(t,e){return t.slice(t.length-e.length)===e}var TS,J5=["al","adj","assn","Ave","BSc","MSc","Cell","Ch","Co","cc","Corp","Dem","Dept","ed","eg","Eq","Eqs","est","est","etc","Ex","ext","Fig","fig","Figs","figs","i.e","ie","Inc","inc","Jan","Feb","Mar","Apr","Jun","Jul","Aug","Sep","Sept","Oct","Nov","Dec","jr","mi","Miss","Mrs","Mr","Ms","Mol","mt","mts","no","Nos","PhD","MD","BA","MA","MM","pl","pop","pp","Prof","Dr","pt","Ref","Refs","Rep","repr","rev","Sec","Secs","Sgt","Col","Gen","Rep","Sen","Gov","Lt","Maj","Capt","St","Sr","sr","Jr","jr","Rev","Sun","Mon","Tu","Tue","Tues","Wed","Th","Thu","Thur","Thurs","Fri","Sat","trans","Univ","Viz","Vol","vs","v"];function XM(t){t?TS=t:TS=J5}function SS(t){return/^[A-Z][a-z].*/.test(t)||Zd(t)}function JM(t){return SS(t)||/``|"|'/.test(t.substring(0,2))}function eA(t){let e=t.replace(/[-'`~!@#$%^&*()_|+=?;:'",.<>{}[\]\\/]/gi,"");return~TS.indexOf(e)}function tA(t,e){return(t==="a.m."||t==="p.m.")&&e.replace(/\W+/g,"").slice(-3).toLowerCase()==="day"}function vS(t){let e=t.replace(/[()[]{}]/g,"").match(/(.\.)*/);return e&&e[0].length>0}function rA(t){return t.length<=3?!0:SS(t)}function bS(t,e){return e.length>0?t<5&&e[0].length<6&&SS(e[0])?!0:e.filter(function(n){return/[A-Z]/.test(n.charAt(0))}).length>=3:!1}function Zd(t,e){return e&&(t=t.slice(e-1,e+2)),!isNaN(t)}function nA(t){return t.match(/^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/)}function iA(t){return t.match(/[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/)}function oA(t){let e=0;return((e=t.indexOf("."))>-1||(e=t.indexOf("!"))>-1||(e=t.indexOf("?"))>-1)&&t.charAt(e+1).match(/[a-zA-Z].*/)?[t.slice(0,e),t.slice(e+1)]:!1}function sA(t){return t==="."||t==="!"||t==="?"}var cA=" @~@ ",aA=cA.trim(),t9=new RegExp("\\S",""),r9=new RegExp("\\n+|[-#=_+*]{4,}","g"),n9=new RegExp("\\S+|\\n","g"),i9={newlineBoundaries:!1,preserveWhitespace:!1,abbreviations:void 0};function lA(t,e){if(!t)return[];if(!t9.test(t))return[];let r={...i9,...e};XM(r.abbreviations),r.newlineBoundaries&&(t=t.replace(r9,cA));let n,i;r.preserveWhitespace?(i=t.split(/(<br\s*\/?>|\S+|\n+)/),n=i.filter(function(h,g){return g%2})):n=t.trim().match(n9)??[];let o=0,a=0,l=[],p=[],u=[];if(!n||!n.length)return[];for(let h=0,g=n.length;h<g;h++){if(o++,u.push(n[h]),~n[h].indexOf(",")&&(o=0),sA(n[h])||yl(n[h],"?!")||n[h]===aA){r.newlineBoundaries&&n[h]===aA&&u.pop(),p.push(u),o=0,u=[];continue}if((yl(n[h],'"')||yl(n[h],"\u201D"))&&(n[h]=n[h].slice(0,-1)),yl(n[h],".")){if(h+1<g){if(n[h].length===2&&isNaN(n[h].charAt(0))||eA(n[h]))continue;if(JM(n[h+1])){if(tA(n[h],n[h+1])||bS(o,n.slice(h,6))||Zd(n[h+1])&&rA(n[h]))continue}else if(YM(n[h],"..")||vS(n[h])||bS(o,n.slice(h,5)))continue}p.push(u),u=[],o=0;continue}(a=n[h].indexOf("."))>-1&&(Zd(n[h],a)||vS(n[h])||iA(n[h])||nA(n[h]))||(l=oA(n[h]))&&(u.pop(),u.push(l[0]),p.push(u),u=[],o=0,u.push(l[1]))}return u.length&&p.push(u),p=p.filter(function(h){return h.length>0}),p.slice(1).reduce(function(h,g){let x=h[h.length-1];return x.length===1&&/^.{1,2}[.]$/.test(x[0])&&!/[.]/.test(g[0])?(h.pop(),h.push(x.concat(g)),h):(h.push(g),h)},[p[0]]).map(function(h,g){if(r.preserveWhitespace&&!r.newlineBoundaries){let x=h.length*2;return g===0&&(x+=1),i.splice(0,x).join("")}return h.join(" ")})}var o9=/\S*\p{L}/u,pA=/(\r?\n[^\p{L}]*\r?\n)|(?<=[.!?])(\s*\r?\n)/gu,s9={newlineBoundaries:!1,preserveWhitespace:!0},Yd=class{*segment(e){let r=lA(e,s9),n=0;for(let i of r){let o=i.split(pA).filter(a=>a!=null);for(let a of o){if(!c9(a)){let l=a9(a,n);l!=null&&(yield l)}n+=a.length}}}};function a9(t,e){let r=jR(o9,t);if(r==null)return;let n=r.index;return n!==0&&(e+=n,t=t.slice(n)),{text:t.trimEnd(),index:e}}function c9(t){return Uc(pA,t)}var Xd=class extends yr{constructor(){super(...arguments);this.scopeType={type:"sentence"};this.iterationScopeType={type:"paragraph"};this.segmenter=new Yd}generateScopesInSearchScope(r,{editor:n,domain:i}){let o=n.document.offsetAt(i.start),a=n.document.getText(i),l=u=>{let d=new W(n.document.positionAt(o+u.index),n.document.positionAt(o+u.index+u.text.length));return{editor:n,domain:d,getTargets:h=>[new gr({editor:n,contentRange:d,isReversed:h})]}},p=this.segmenter.segment(a);return r==="forward"?Lt(p,l):Array.from(p,l).reverse()}};var Ta=class extends yr{constructor(){super(...arguments);this.iterationScopeType={type:"line"}}generateScopesInSearchScope(r,{editor:n,domain:i}){return Lt(Kn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:a=>[new gr({editor:n,contentRange:o,isReversed:a})]}))}},Jd=class extends Ta{constructor(){super(...arguments);this.regex=/\S+/g}},em=class extends Ta{constructor(r,n,i){super(r,n,i);this.scopeType=n;this.regex=/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/g}},tm=class extends Ta{constructor(r,n,i){super(r,n,i);this.scopeType=n}get regex(){return new RegExp(this.scopeType.regex,this.scopeType.flags??"gu")}},rm=class extends Ta{constructor(r,n,i){super(r,n,i);this.scopeType=n}get regex(){return new RegExp(Ir(this.scopeType.character),"gui")}};var nm=class extends xt{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.languageId=n;this.targetScopeType=i;this.isHierarchical=!0;this.targetScopeHandler=this.scopeHandlerFactory.create(this.targetScopeType,this.languageId),this.surroundingPairInteriorScopeHandler=this.scopeHandlerFactory.create({type:"surroundingPairInterior",delimiter:"any"},this.languageId)}get iterationScopeType(){if(this.targetScopeHandler.iterationScopeType.type==="custom")throw Error("Iteration scope type can't be custom for BoundedBaseScopeHandler");return{type:"oneOf",scopeTypes:[this.targetScopeHandler.iterationScopeType,{type:"surroundingPairInterior",delimiter:"any"}]}}*generateScopeCandidates(r,n,i,o){let a=this.targetScopeHandler.generateScopes(r,n,i,{...o,containment:o.containment!=="disallowed"?o.containment:void 0}),l=Array.from(this.surroundingPairInteriorScopeHandler.generateScopes(r,n,i,{...o,containment:o.containment==null&&o.skipAncestorScopes?"required":o.containment}));for(let p of a){let u=[];for(let d of l){let h=p.domain.intersection(d.domain);h!=null&&!h.isEmpty&&u.push({editor:r,domain:h,getTargets:g=>[this.getTargets(uA(p,g),uA(d,g))]})}u.push(p),u.sort((d,h)=>Rn(i,n,d,h)),yield*u}}};function uA(t,e){let r=t.getTargets(e);if(r.length!==1)throw Error(`Expected one target but got ${r.length}`);return r[0]}var im=class extends nm{constructor(r,n,i){super(r,i,{type:"nonWhitespaceSequence"});this.scopeType={type:"boundedNonWhitespaceSequence"}}getTargets(r,n){let i=r.contentRange.intersection(n.contentRange);if(i==null||i.isEmpty)throw Error("Expected non empty intersection");return new gr({editor:r.editor,isReversed:r.isReversed,contentRange:i})}},om=class extends nm{constructor(r,n,i){super(r,i,{type:"paragraph"});this.scopeType={type:"boundedParagraph"}}getTargets(r,n){if(!(r instanceof fa))throw Error("Expected ParagraphTarget");return new yd({editor:r.editor,isReversed:r.isReversed,paragraphTarget:r,containingInterior:n})}};var sm=class extends xt{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.scopeType=n;this.languageId=i;this.isHierarchical=!0;this.surroundingPairScopeHandler=this.scopeHandlerFactory.create({type:"surroundingPair",delimiter:this.scopeType.delimiter,requireStrongContainment:!0},this.languageId)}get iterationScopeType(){return this.surroundingPairScopeHandler.iterationScopeType}generateScopeCandidates(r,n,i,o){return co(this.surroundingPairScopeHandler.generateScopes(r,n,i,o),a=>({editor:r,domain:a.domain,getTargets(l){return a.getTargets(l).flatMap(p=>p.getInterior())}}))}};function fA(t,{openingDelimiterRange:e,closingDelimiterRange:r},n){let i=e.union(r),o=new W(e.end,r.start);return{editor:t,domain:n?o:i,getTargets:a=>[new md({editor:t,isReversed:a,contentRange:i,interiorRange:o,boundary:[e,r]})]}}function dA(t){let e=yi(t.map(({text:r})=>r)).map(Ir).join("|");return new RegExp(`(?<!\\\\)(${e})`,"gu")}function mA(t,e,r){if(r.length===0)return[];let n=dA(r),i=t?.getCaptures(e,"disqualifyDelimiter")??[],o=t?.getCaptures(e,"textFragment")??[],a=Object.fromEntries(r.map(p=>[p.text,p])),l=e.getText();return Jr(l,n,p=>{let u=p[0],d=new W(e.positionAt(p.index),e.positionAt(p.index+u.length)),h=i.some(x=>x.range.contains(d)&&!x.hasError()),g=o.find(x=>x.range.contains(d))?.range;return{delimiterInfo:a[u],isDisqualified:h,textFragmentRange:g,range:d}})}var cm=Object.freeze({angleBrackets:[["</","<"],[">","/>"]],backtickQuotes:["`","`"],curlyBrackets:[["{","${"],"}"],tripleDoubleQuotes:[[],[]],tripleSingleQuotes:[[],[]],doubleQuotes:['"','"',{isSingleLine:!0}],escapedDoubleQuotes:['\\"','\\"',{isSingleLine:!0}],escapedParentheses:["\\(","\\)"],escapedSquareBrackets:["\\[","\\]"],escapedSingleQuotes:["\\'","\\'",{isSingleLine:!0}],parentheses:[["(","$("],")"],singleQuotes:["'","'",{isSingleLine:!0}],squareBrackets:["[","]"]}),am=["","r","u","R","U","f","F","fr","Fr","fR","FR","rf","rF","Rf","RF","b","B","br","Br","bR","BR","rb","rB","Rb","RB"],hA={nix:{singleQuotes:["''","''"]},lua:{doubleQuotes:[['"',"[["],['"',"]]"]]},python:{singleQuotes:[am.map(t=>`${t}'`),"'",{isSingleLine:!0,isUnknownSide:!0}],doubleQuotes:[am.map(t=>`${t}"`),'"',{isSingleLine:!0,isUnknownSide:!0}],tripleSingleQuotes:[am.map(t=>`${t}'''`),"'''",{isUnknownSide:!0}],tripleDoubleQuotes:[am.map(t=>`${t}"""`),'"""',{isUnknownSide:!0}]},ruby:{tripleDoubleQuotes:["%Q(",")"]}},s_e=Object.fromEntries(Object.values(cm)),gA={any:Ti(cm),string:["tripleDoubleQuotes","tripleSingleQuotes","doubleQuotes","singleQuotes","backtickQuotes"],collectionBoundary:["parentheses","squareBrackets","curlyBrackets","angleBrackets"]};function yA(t){return t!=null&&t in hA?{...cm,...hA[t]}:cm}function xA(t,e){let r=gA[t]??[t];return l9(e,r)}function l9(t,e){let r=yA(t);return e.flatMap(n=>{let[i,o,a]=r[n],{isSingleLine:l=!1,isUnknownSide:p=!1}=a??{},u=Yc(i)?[i]:i,d=Yc(o)?[o]:o;return yi(Dc(u,d)).map(g=>{let x=u.includes(g),b=d.includes(g);return{text:g,side:p?"unknown":x&&!b?"left":!x&&b?"right":"unknown",delimiterName:n,isSingleLine:l}})})}function TA(t){let e=[],r=new to(()=>[]);for(let n of t){let{delimiterInfo:{delimiterName:i,side:o,isSingleLine:a},isDisqualified:l,textFragmentRange:p,range:u}=n;if(l)continue;let d=r.get(i);a&&(d=d.filter(g=>g.range.start.line===u.start.line),r.set(i,d));let h=d.filter(g=>p==null&&g.textFragmentRange==null||p!=null&&g.textFragmentRange!=null&&g.textFragmentRange.isRangeEqual(p));if(o==="left"||o==="unknown"&&h.length%2===0)d.push(n);else{let g=h.at(-1);if(g==null)continue;d.splice(d.lastIndexOf(g),1),e.push({delimiterName:i,openingDelimiterRange:g.range,closingDelimiterRange:u})}}return e}var lm=class extends xt{constructor(r,n,i){super();this.languageDefinitions=r;this.scopeType=n;this.languageId=i;this.iterationScopeType={type:"line"};this.isHierarchical=!0}*generateScopeCandidates(r,n,i,o){if(this.scopeType.forceDirection!=null){nt(D().messages,"deprecatedForceDirection","forceDirection is deprecated. If this is important to you please file an issue on the cursorless repo.");return}let a=mA(this.languageDefinitions.get(this.languageId),r.document,xA(this.scopeType.delimiter,this.languageId)),l=TA(a);l=p9(i,o,n,l),yield*l.map(p=>fA(r,p,this.scopeType.requireStrongContainment??!1)).sort((p,u)=>Rn(i,n,p,u))}};function p9(t,e,r,n){return t==="forward"&&e.containment==="required"&&e.allowAdjacentScopes&&e.skipAncestorScopes?n.filter((i,o)=>!(i.closingDelimiterRange.end.isEqual(r)&&n[o+1]?.closingDelimiterRange.start.isEqual(r))):n}var Sa=class{constructor(e){this.languageDefinitions=e;this.create=this.create.bind(this)}create(e,r){switch(e.type){case"character":return new Hd(this,e,r);case"word":return new $d(this,e,r);case"token":return new qd(this,e,r);case"identifier":return new Vd(this,e,r);case"line":return new Ud(e,r);case"sentence":return new Xd(this,e,r);case"paragraph":return new Qd(e,r);case"boundedParagraph":return new om(this,e,r);case"document":return new jd(e,r);case"oneOf":return Kd.create(this,e,r);case"nonWhitespaceSequence":return new Jd(this,e,r);case"boundedNonWhitespaceSequence":return new im(this,e,r);case"url":return new em(this,e,r);case"customRegex":return new tm(this,e,r);case"glyph":return new rm(this,e,r);case"surroundingPair":return new lm(this.languageDefinitions,e,r);case"surroundingPairInterior":return new sm(this,e,r);case"custom":return e.scopeHandler;case"instance":throw Error("Unexpected scope type 'instance'");default:return this.languageDefinitions.get(r)?.getScopeHandler(e)}}};function sn(t,e){return new W(t.row,t.column,e.row,e.column)}function wS(t){return new ae(t.row,t.column)}function SA(t){return new W(t.startPosition.row,t.startPosition.column,t.endPosition.row,t.endPosition.column)}function vA(t,e){return new Te(t.startPosition.row,t.startPosition.column,e.endPosition.row,e.endPosition.column)}function Qn(t,e){return{selection:new Te(new ae(e.startPosition.row,e.startPosition.column),new ae(e.endPosition.row,e.endPosition.column)),context:{}}}function u9(t,e,r){let n=e.startIndex<r.startIndex,i=n?e:r,o=n?r:e;return{selection:new Te(new ae(i.startPosition.row,i.startPosition.column),new ae(o.endPosition.row,o.endPosition.column)),context:{}}}function bA(){return xl(t=>t.type===","||t.type==="("||t.type===")"||t.type==="["||t.type==="]"||t.type===">"||t.type==="<"||t.type==="}"||t.type==="{",", ")}function wA(t,e){let r=e.startIndex,n=e.endIndex;return e.text.startsWith("(")&&e.text.endsWith(")")?(r+=1,n-=1):e.text.endsWith(";")&&(n-=1),{selection:new Te(t.document.positionAt(r),t.document.positionAt(n)),context:{}}}function _A(...t){return function(e,r){let n=r.previousSibling,i=n?.previousSibling,o;return n&&(t.includes(n.type)?i?o=sn(i.endPosition,r.startPosition):o=sn(n.startPosition,r.startPosition):o=sn(n.endPosition,r.startPosition)),{...Qn(e,r),context:{leadingDelimiterRange:o}}}}function Zn(t=[],e=[],{includeUnnamedChildren:r=!1}={}){return function(n,i){if(t.length>0&&e.length>0)throw new Error("Cannot have both exclusions and inclusions.");let o=r?i.children:i.namedChildren,a=new Set(t),l=new Set(e);return o=o.filter(p=>a.size>0?!a.has(p.type):l.size>0?l.has(p.type):!0),u9(n,o[0],o[o.length-1])}}function EA(...t){return function(e,r){let n=r.nextSibling,i=n?.nextSibling,o;return n&&(t.includes(n.type)?i?o=sn(r.endPosition,i.startPosition):o=sn(r.endPosition,n.endPosition):o=sn(r.endPosition,n.startPosition)),{...Qn(e,r),context:{trailingDelimiterRange:o}}}}function f9(t,e){let r=t.nextSibling;for(;r!=null;){if(!e(r))return r;r=r.nextSibling}return r}function d9(t,e){let r=t.previousSibling;for(;r!=null;){if(!e(r))return r;r=r.previousSibling}return r}function xl(t,e,r=Ht,n=Ht){return(i,o)=>{let a,l,p=r(o),u=n(o),d=d9(p,t),h=f9(u,t);d!=null&&(a=sn(d.endPosition,p.startPosition)),h!=null&&(l=sn(u.endPosition,h.startPosition));let g=m9(i,a,l,e);return{selection:new Te(new ae(p.startPosition.row,p.startPosition.column),new ae(u.endPosition.row,u.endPosition.column)),context:{containingListDelimiter:g,leadingDelimiterRange:a,trailingDelimiterRange:l}}}}function m9(t,e,r,n){let{document:i}=t,o=[r!=null?i.getText(r):n,e!=null?i.getText(e):n];return Zx(o,"length")}function RA(t,e){if(t.length===1)return!0;let r=!1,n=t.filter(({name:p})=>p.endsWith(".start")).map(({range:{end:p}})=>p).sort((p,u)=>p.compareTo(u)).at(-1),i=t.filter(({name:p})=>p.endsWith(".end")).map(({range:{start:p}})=>p).sort((p,u)=>p.compareTo(u)).at(0);n!=null&&i!=null&&n.isAfter(i)&&(nt(e,"TreeSitterQuery.checkCaptures.badOrder",`Start capture must be before end capture: ${t}`),r=!0);let o=t.filter(({name:p})=>p.endsWith(".start")).length,a=t.filter(({name:p})=>p.endsWith(".end")).length,l=t.length-o-a;return l>0&&(o>0||a>0)&&(nt(e,"TreeSitterQuery.checkCaptures.mixRegularStartEnd",`Please do not mix regular captures and start/end captures: ${t.map(({name:p,range:u})=>p+" "+u.toString())}`),r=!0),l>1&&(nt(e,"TreeSitterQuery.checkCaptures.duplicate",`A capture with the same name may only appear once in a single pattern: ${t.map(({name:p,range:u})=>p+" "+u.toString())}`),r=!0),!r}function kA(t){let e=t;for(;e!=null;){if(e.hasError)return!0;e=e.parent}return!1}var Ue;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{let o={};for(let a of i)o[a]=a;return o},t.getValidEnumValues=i=>{let o=t.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),a={};for(let l of o)a[l]=i[l];return t.objectValues(a)},t.objectValues=i=>t.objectKeys(i).map(function(o){return i[o]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let o=[];for(let a in i)Object.prototype.hasOwnProperty.call(i,a)&&o.push(a);return o},t.find=(i,o)=>{for(let a of i)if(o(a))return a},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,o=" | "){return i.map(a=>typeof a=="string"?`'${a}'`:a).join(o)}t.joinValues=n,t.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(Ue||(Ue={}));var ES;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(ES||(ES={}));var X=Ue.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),lo=t=>{switch(typeof t){case"undefined":return X.undefined;case"string":return X.string;case"number":return isNaN(t)?X.nan:X.number;case"boolean":return X.boolean;case"function":return X.function;case"bigint":return X.bigint;case"symbol":return X.symbol;case"object":return Array.isArray(t)?X.array:t===null?X.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?X.promise:typeof Map<"u"&&t instanceof Map?X.map:typeof Set<"u"&&t instanceof Set?X.set:typeof Date<"u"&&t instanceof Date?X.date:X.object;default:return X.unknown}},G=Ue.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),h9=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),Nr=class extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let r=e||function(o){return o.message},n={_errors:[]},i=o=>{for(let a of o.issues)if(a.code==="invalid_union")a.unionErrors.map(i);else if(a.code==="invalid_return_type")i(a.returnTypeError);else if(a.code==="invalid_arguments")i(a.argumentsError);else if(a.path.length===0)n._errors.push(r(a));else{let l=n,p=0;for(;p<a.path.length;){let u=a.path[p];p===a.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(r(a))):l[u]=l[u]||{_errors:[]},l=l[u],p++}}};return i(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ue.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};Nr.create=t=>new Nr(t);var Tl=(t,e)=>{let r;switch(t.code){case G.invalid_type:t.received===X.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case G.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,Ue.jsonStringifyReplacer)}`;break;case G.unrecognized_keys:r=`Unrecognized key(s) in object: ${Ue.joinValues(t.keys,", ")}`;break;case G.invalid_union:r="Invalid input";break;case G.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Ue.joinValues(t.options)}`;break;case G.invalid_enum_value:r=`Invalid enum value. Expected ${Ue.joinValues(t.options)}, received '${t.received}'`;break;case G.invalid_arguments:r="Invalid function arguments";break;case G.invalid_return_type:r="Invalid function return type";break;case G.invalid_date:r="Invalid date";break;case G.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:Ue.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case G.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case G.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case G.custom:r="Invalid input";break;case G.invalid_intersection_types:r="Intersection results could not be merged";break;case G.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case G.not_finite:r="Number must be finite";break;default:r=e.defaultError,Ue.assertNever(t)}return{message:r}},AA=Tl;function g9(t){AA=t}function um(){return AA}var fm=t=>{let{data:e,path:r,errorMaps:n,issueData:i}=t,o=[...r,...i.path||[]],a={...i,path:o},l="",p=n.filter(u=>!!u).slice().reverse();for(let u of p)l=u(a,{data:e,defaultError:l}).message;return{...i,path:o,message:i.message||l}},y9=[];function ee(t,e){let r=fm({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,um(),Tl].filter(n=>!!n)});t.common.issues.push(r)}var qt=class t{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let i of r){if(i.status==="aborted")return ye;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let i of r)n.push({key:await i.key,value:await i.value});return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let i of r){let{key:o,value:a}=i;if(o.status==="aborted"||a.status==="aborted")return ye;o.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof a.value<"u"||i.alwaysSet)&&(n[o.value]=a.value)}return{status:e.value,value:n}}},ye=Object.freeze({status:"aborted"}),DA=t=>({status:"dirty",value:t}),tr=t=>({status:"valid",value:t}),RS=t=>t.status==="aborted",kS=t=>t.status==="dirty",Sl=t=>t.status==="valid",dm=t=>typeof Promise<"u"&&t instanceof Promise,ce;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(ce||(ce={}));var an=class{constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},PA=(t,e)=>{if(Sl(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new Nr(t.common.issues);return this._error=r,this._error}}};function Se(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(a,l)=>a.code!=="invalid_type"?{message:l.defaultError}:typeof l.data>"u"?{message:n??l.defaultError}:{message:r??l.defaultError},description:i}}var ve=class{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return lo(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:lo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new qt,ctx:{common:e.parent.common,data:e.data,parsedType:lo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(dm(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;let i={common:{issues:[],async:(n=r?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:lo(e)},o=this._parseSync({data:e,path:i.path,parent:i});return PA(i,o)}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:lo(e)},i=this._parse({data:e,path:n.path,parent:n}),o=await(dm(i)?i:Promise.resolve(i));return PA(n,o)}refine(e,r){let n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,o)=>{let a=e(i),l=()=>o.addIssue({code:G.custom,...n(i)});return typeof Promise<"u"&&a instanceof Promise?a.then(p=>p?!0:(l(),!1)):a?!0:(l(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new Lr({schema:this,typeName:fe.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return kn.create(this,this._def)}nullable(){return ki.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ri.create(this,this._def)}promise(){return fo.create(this,this._def)}or(e){return ns.create([this,e],this._def)}and(e){return is.create(this,e,this._def)}transform(e){return new Lr({...Se(this._def),schema:this,typeName:fe.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new ls({...Se(this._def),innerType:this,defaultValue:r,typeName:fe.ZodDefault})}brand(){return new ym({typeName:fe.ZodBranded,type:this,...Se(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new Ra({...Se(this._def),innerType:this,catchValue:r,typeName:fe.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return vl.create(this,e)}readonly(){return Pa.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},x9=/^c[^\s-]{8,}$/i,T9=/^[a-z][a-z0-9]*$/,S9=/^[0-9A-HJKMNP-TV-Z]{26}$/,v9=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,b9=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,w9="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",_S,_9=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,E9=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,R9=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function k9(t,e){return!!((e==="v4"||!e)&&_9.test(t)||(e==="v6"||!e)&&E9.test(t))}var po=class t extends ve{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==X.string){let o=this._getOrReturnCtx(e);return ee(o,{code:G.invalid_type,expected:X.string,received:o.parsedType}),ye}let n=new qt,i;for(let o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(i=this._getOrReturnCtx(e,i),ee(i,{code:G.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="max")e.data.length>o.value&&(i=this._getOrReturnCtx(e,i),ee(i,{code:G.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="length"){let a=e.data.length>o.value,l=e.data.length<o.value;(a||l)&&(i=this._getOrReturnCtx(e,i),a?ee(i,{code:G.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):l&&ee(i,{code:G.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),n.dirty())}else if(o.kind==="email")b9.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"email",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="emoji")_S||(_S=new RegExp(w9,"u")),_S.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"emoji",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="uuid")v9.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"uuid",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid")x9.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"cuid",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid2")T9.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"cuid2",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="ulid")S9.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"ulid",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),ee(i,{validation:"url",code:G.invalid_string,message:o.message}),n.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"regex",code:G.invalid_string,message:o.message}),n.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(e,i),ee(i,{code:G.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),n.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(i=this._getOrReturnCtx(e,i),ee(i,{code:G.invalid_string,validation:{startsWith:o.value},message:o.message}),n.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(i=this._getOrReturnCtx(e,i),ee(i,{code:G.invalid_string,validation:{endsWith:o.value},message:o.message}),n.dirty()):o.kind==="datetime"?R9(o).test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{code:G.invalid_string,validation:"datetime",message:o.message}),n.dirty()):o.kind==="ip"?k9(e.data,o.version)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"ip",code:G.invalid_string,message:o.message}),n.dirty()):Ue.assertNever(o);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(i=>e.test(i),{validation:r,code:G.invalid_string,...ce.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ce.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ce.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ce.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ce.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ce.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ce.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ce.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ce.errToObj(e)})}datetime(e){var r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,...ce.errToObj(e?.message)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...ce.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...ce.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...ce.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...ce.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...ce.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...ce.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...ce.errToObj(r)})}nonempty(e){return this.min(1,ce.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};po.create=t=>{var e;return new po({checks:[],typeName:fe.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Se(t)})};function P9(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,o=parseInt(t.toFixed(i).replace(".","")),a=parseInt(e.toFixed(i).replace(".",""));return o%a/Math.pow(10,i)}var Yo=class t extends ve{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==X.number){let o=this._getOrReturnCtx(e);return ee(o,{code:G.invalid_type,expected:X.number,received:o.parsedType}),ye}let n,i=new qt;for(let o of this._def.checks)o.kind==="int"?Ue.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),ee(n,{code:G.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),ee(n,{code:G.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),ee(n,{code:G.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?P9(e.data,o.value)!==0&&(n=this._getOrReturnCtx(e,n),ee(n,{code:G.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),ee(n,{code:G.not_finite,message:o.message}),i.dirty()):Ue.assertNever(o);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,ce.toString(r))}gt(e,r){return this.setLimit("min",e,!1,ce.toString(r))}lte(e,r){return this.setLimit("max",e,!0,ce.toString(r))}lt(e,r){return this.setLimit("max",e,!1,ce.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:ce.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ce.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ce.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ce.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ce.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ce.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:ce.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:ce.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ce.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ce.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Ue.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};Yo.create=t=>new Yo({checks:[],typeName:fe.ZodNumber,coerce:t?.coerce||!1,...Se(t)});var Xo=class t extends ve{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==X.bigint){let o=this._getOrReturnCtx(e);return ee(o,{code:G.invalid_type,expected:X.bigint,received:o.parsedType}),ye}let n,i=new qt;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),ee(n,{code:G.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),ee(n,{code:G.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),ee(n,{code:G.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):Ue.assertNever(o);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,ce.toString(r))}gt(e,r){return this.setLimit("min",e,!1,ce.toString(r))}lte(e,r){return this.setLimit("max",e,!0,ce.toString(r))}lt(e,r){return this.setLimit("max",e,!1,ce.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:ce.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ce.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ce.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ce.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ce.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:ce.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};Xo.create=t=>{var e;return new Xo({checks:[],typeName:fe.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Se(t)})};var Jo=class extends ve{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==X.boolean){let n=this._getOrReturnCtx(e);return ee(n,{code:G.invalid_type,expected:X.boolean,received:n.parsedType}),ye}return tr(e.data)}};Jo.create=t=>new Jo({typeName:fe.ZodBoolean,coerce:t?.coerce||!1,...Se(t)});var es=class t extends ve{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==X.date){let o=this._getOrReturnCtx(e);return ee(o,{code:G.invalid_type,expected:X.date,received:o.parsedType}),ye}if(isNaN(e.data.getTime())){let o=this._getOrReturnCtx(e);return ee(o,{code:G.invalid_date}),ye}let n=new qt,i;for(let o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(i=this._getOrReturnCtx(e,i),ee(i,{code:G.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),n.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(i=this._getOrReturnCtx(e,i),ee(i,{code:G.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),n.dirty()):Ue.assertNever(o);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:ce.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:ce.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};es.create=t=>new es({checks:[],coerce:t?.coerce||!1,typeName:fe.ZodDate,...Se(t)});var ba=class extends ve{_parse(e){if(this._getType(e)!==X.symbol){let n=this._getOrReturnCtx(e);return ee(n,{code:G.invalid_type,expected:X.symbol,received:n.parsedType}),ye}return tr(e.data)}};ba.create=t=>new ba({typeName:fe.ZodSymbol,...Se(t)});var ts=class extends ve{_parse(e){if(this._getType(e)!==X.undefined){let n=this._getOrReturnCtx(e);return ee(n,{code:G.invalid_type,expected:X.undefined,received:n.parsedType}),ye}return tr(e.data)}};ts.create=t=>new ts({typeName:fe.ZodUndefined,...Se(t)});var rs=class extends ve{_parse(e){if(this._getType(e)!==X.null){let n=this._getOrReturnCtx(e);return ee(n,{code:G.invalid_type,expected:X.null,received:n.parsedType}),ye}return tr(e.data)}};rs.create=t=>new rs({typeName:fe.ZodNull,...Se(t)});var uo=class extends ve{constructor(){super(...arguments),this._any=!0}_parse(e){return tr(e.data)}};uo.create=t=>new uo({typeName:fe.ZodAny,...Se(t)});var Ei=class extends ve{constructor(){super(...arguments),this._unknown=!0}_parse(e){return tr(e.data)}};Ei.create=t=>new Ei({typeName:fe.ZodUnknown,...Se(t)});var Pn=class extends ve{_parse(e){let r=this._getOrReturnCtx(e);return ee(r,{code:G.invalid_type,expected:X.never,received:r.parsedType}),ye}};Pn.create=t=>new Pn({typeName:fe.ZodNever,...Se(t)});var wa=class extends ve{_parse(e){if(this._getType(e)!==X.undefined){let n=this._getOrReturnCtx(e);return ee(n,{code:G.invalid_type,expected:X.void,received:n.parsedType}),ye}return tr(e.data)}};wa.create=t=>new wa({typeName:fe.ZodVoid,...Se(t)});var Ri=class t extends ve{_parse(e){let{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==X.array)return ee(r,{code:G.invalid_type,expected:X.array,received:r.parsedType}),ye;if(i.exactLength!==null){let a=r.data.length>i.exactLength.value,l=r.data.length<i.exactLength.value;(a||l)&&(ee(r,{code:a?G.too_big:G.too_small,minimum:l?i.exactLength.value:void 0,maximum:a?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(ee(r,{code:G.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(ee(r,{code:G.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((a,l)=>i.type._parseAsync(new an(r,a,r.path,l)))).then(a=>qt.mergeArray(n,a));let o=[...r.data].map((a,l)=>i.type._parseSync(new an(r,a,r.path,l)));return qt.mergeArray(n,o)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:ce.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:ce.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:ce.toString(r)}})}nonempty(e){return this.min(1,e)}};Ri.create=(t,e)=>new Ri({type:t,minLength:null,maxLength:null,exactLength:null,typeName:fe.ZodArray,...Se(e)});function va(t){if(t instanceof xr){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=kn.create(va(n))}return new xr({...t._def,shape:()=>e})}else return t instanceof Ri?new Ri({...t._def,type:va(t.element)}):t instanceof kn?kn.create(va(t.unwrap())):t instanceof ki?ki.create(va(t.unwrap())):t instanceof Yn?Yn.create(t.items.map(e=>va(e))):t}var xr=class t extends ve{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=Ue.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==X.object){let u=this._getOrReturnCtx(e);return ee(u,{code:G.invalid_type,expected:X.object,received:u.parsedType}),ye}let{status:n,ctx:i}=this._processInputParams(e),{shape:o,keys:a}=this._getCached(),l=[];if(!(this._def.catchall instanceof Pn&&this._def.unknownKeys==="strip"))for(let u in i.data)a.includes(u)||l.push(u);let p=[];for(let u of a){let d=o[u],h=i.data[u];p.push({key:{status:"valid",value:u},value:d._parse(new an(i,h,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof Pn){let u=this._def.unknownKeys;if(u==="passthrough")for(let d of l)p.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(u==="strict")l.length>0&&(ee(i,{code:G.unrecognized_keys,keys:l}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let u=this._def.catchall;for(let d of l){let h=i.data[d];p.push({key:{status:"valid",value:d},value:u._parse(new an(i,h,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let u=[];for(let d of p){let h=await d.key;u.push({key:h,value:await d.value,alwaysSet:d.alwaysSet})}return u}).then(u=>qt.mergeObjectSync(n,u)):qt.mergeObjectSync(n,p)}get shape(){return this._def.shape()}strict(e){return ce.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var i,o,a,l;let p=(a=(o=(i=this._def).errorMap)===null||o===void 0?void 0:o.call(i,r,n).message)!==null&&a!==void 0?a:n.defaultError;return r.code==="unrecognized_keys"?{message:(l=ce.errToObj(e).message)!==null&&l!==void 0?l:p}:{message:p}}}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:fe.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};return Ue.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new t({...this._def,shape:()=>r})}omit(e){let r={};return Ue.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new t({...this._def,shape:()=>r})}deepPartial(){return va(this)}partial(e){let r={};return Ue.objectKeys(this.shape).forEach(n=>{let i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}),new t({...this._def,shape:()=>r})}required(e){let r={};return Ue.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let o=this.shape[n];for(;o instanceof kn;)o=o._def.innerType;r[n]=o}}),new t({...this._def,shape:()=>r})}keyof(){return IA(Ue.objectKeys(this.shape))}};xr.create=(t,e)=>new xr({shape:()=>t,unknownKeys:"strip",catchall:Pn.create(),typeName:fe.ZodObject,...Se(e)});xr.strictCreate=(t,e)=>new xr({shape:()=>t,unknownKeys:"strict",catchall:Pn.create(),typeName:fe.ZodObject,...Se(e)});xr.lazycreate=(t,e)=>new xr({shape:t,unknownKeys:"strip",catchall:Pn.create(),typeName:fe.ZodObject,...Se(e)});var ns=class extends ve{_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function i(o){for(let l of o)if(l.result.status==="valid")return l.result;for(let l of o)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;let a=o.map(l=>new Nr(l.ctx.common.issues));return ee(r,{code:G.invalid_union,unionErrors:a}),ye}if(r.common.async)return Promise.all(n.map(async o=>{let a={...r,common:{...r.common,issues:[]},parent:null};return{result:await o._parseAsync({data:r.data,path:r.path,parent:a}),ctx:a}})).then(i);{let o,a=[];for(let p of n){let u={...r,common:{...r.common,issues:[]},parent:null},d=p._parseSync({data:r.data,path:r.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!o&&(o={result:d,ctx:u}),u.common.issues.length&&a.push(u.common.issues)}if(o)return r.common.issues.push(...o.ctx.common.issues),o.result;let l=a.map(p=>new Nr(p));return ee(r,{code:G.invalid_union,unionErrors:l}),ye}}get options(){return this._def.options}};ns.create=(t,e)=>new ns({options:t,typeName:fe.ZodUnion,...Se(e)});var pm=t=>t instanceof os?pm(t.schema):t instanceof Lr?pm(t.innerType()):t instanceof ss?[t.value]:t instanceof as?t.options:t instanceof cs?Object.keys(t.enum):t instanceof ls?pm(t._def.innerType):t instanceof ts?[void 0]:t instanceof rs?[null]:null,mm=class t extends ve{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==X.object)return ee(r,{code:G.invalid_type,expected:X.object,received:r.parsedType}),ye;let n=this.discriminator,i=r.data[n],o=this.optionsMap.get(i);return o?r.common.async?o._parseAsync({data:r.data,path:r.path,parent:r}):o._parseSync({data:r.data,path:r.path,parent:r}):(ee(r,{code:G.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),ye)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let i=new Map;for(let o of r){let a=pm(o.shape[e]);if(!a)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let l of a){if(i.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);i.set(l,o)}}return new t({typeName:fe.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...Se(n)})}};function PS(t,e){let r=lo(t),n=lo(e);if(t===e)return{valid:!0,data:t};if(r===X.object&&n===X.object){let i=Ue.objectKeys(e),o=Ue.objectKeys(t).filter(l=>i.indexOf(l)!==-1),a={...t,...e};for(let l of o){let p=PS(t[l],e[l]);if(!p.valid)return{valid:!1};a[l]=p.data}return{valid:!0,data:a}}else if(r===X.array&&n===X.array){if(t.length!==e.length)return{valid:!1};let i=[];for(let o=0;o<t.length;o++){let a=t[o],l=e[o],p=PS(a,l);if(!p.valid)return{valid:!1};i.push(p.data)}return{valid:!0,data:i}}else return r===X.date&&n===X.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var is=class extends ve{_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=(o,a)=>{if(RS(o)||RS(a))return ye;let l=PS(o.value,a.value);return l.valid?((kS(o)||kS(a))&&r.dirty(),{status:r.value,value:l.data}):(ee(n,{code:G.invalid_intersection_types}),ye)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([o,a])=>i(o,a)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};is.create=(t,e,r)=>new is({left:t,right:e,typeName:fe.ZodIntersection,...Se(r)});var Yn=class t extends ve{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==X.array)return ee(n,{code:G.invalid_type,expected:X.array,received:n.parsedType}),ye;if(n.data.length<this._def.items.length)return ee(n,{code:G.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ye;!this._def.rest&&n.data.length>this._def.items.length&&(ee(n,{code:G.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let o=[...n.data].map((a,l)=>{let p=this._def.items[l]||this._def.rest;return p?p._parse(new an(n,a,n.path,l)):null}).filter(a=>!!a);return n.common.async?Promise.all(o).then(a=>qt.mergeArray(r,a)):qt.mergeArray(r,o)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};Yn.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Yn({items:t,typeName:fe.ZodTuple,rest:null,...Se(e)})};var hm=class t extends ve{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==X.object)return ee(n,{code:G.invalid_type,expected:X.object,received:n.parsedType}),ye;let i=[],o=this._def.keyType,a=this._def.valueType;for(let l in n.data)i.push({key:o._parse(new an(n,l,n.path,l)),value:a._parse(new an(n,n.data[l],n.path,l))});return n.common.async?qt.mergeObjectAsync(r,i):qt.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof ve?new t({keyType:e,valueType:r,typeName:fe.ZodRecord,...Se(n)}):new t({keyType:po.create(),valueType:e,typeName:fe.ZodRecord,...Se(r)})}},_a=class extends ve{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==X.map)return ee(n,{code:G.invalid_type,expected:X.map,received:n.parsedType}),ye;let i=this._def.keyType,o=this._def.valueType,a=[...n.data.entries()].map(([l,p],u)=>({key:i._parse(new an(n,l,n.path,[u,"key"])),value:o._parse(new an(n,p,n.path,[u,"value"]))}));if(n.common.async){let l=new Map;return Promise.resolve().then(async()=>{for(let p of a){let u=await p.key,d=await p.value;if(u.status==="aborted"||d.status==="aborted")return ye;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}})}else{let l=new Map;for(let p of a){let u=p.key,d=p.value;if(u.status==="aborted"||d.status==="aborted")return ye;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}}}};_a.create=(t,e,r)=>new _a({valueType:e,keyType:t,typeName:fe.ZodMap,...Se(r)});var Ea=class t extends ve{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==X.set)return ee(n,{code:G.invalid_type,expected:X.set,received:n.parsedType}),ye;let i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(ee(n,{code:G.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(ee(n,{code:G.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());let o=this._def.valueType;function a(p){let u=new Set;for(let d of p){if(d.status==="aborted")return ye;d.status==="dirty"&&r.dirty(),u.add(d.value)}return{status:r.value,value:u}}let l=[...n.data.values()].map((p,u)=>o._parse(new an(n,p,n.path,u)));return n.common.async?Promise.all(l).then(p=>a(p)):a(l)}min(e,r){return new t({...this._def,minSize:{value:e,message:ce.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:ce.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};Ea.create=(t,e)=>new Ea({valueType:t,minSize:null,maxSize:null,typeName:fe.ZodSet,...Se(e)});var gm=class t extends ve{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==X.function)return ee(r,{code:G.invalid_type,expected:X.function,received:r.parsedType}),ye;function n(l,p){return fm({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,um(),Tl].filter(u=>!!u),issueData:{code:G.invalid_arguments,argumentsError:p}})}function i(l,p){return fm({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,um(),Tl].filter(u=>!!u),issueData:{code:G.invalid_return_type,returnTypeError:p}})}let o={errorMap:r.common.contextualErrorMap},a=r.data;if(this._def.returns instanceof fo){let l=this;return tr(async function(...p){let u=new Nr([]),d=await l._def.args.parseAsync(p,o).catch(x=>{throw u.addIssue(n(p,x)),u}),h=await Reflect.apply(a,this,d);return await l._def.returns._def.type.parseAsync(h,o).catch(x=>{throw u.addIssue(i(h,x)),u})})}else{let l=this;return tr(function(...p){let u=l._def.args.safeParse(p,o);if(!u.success)throw new Nr([n(p,u.error)]);let d=Reflect.apply(a,this,u.data),h=l._def.returns.safeParse(d,o);if(!h.success)throw new Nr([i(d,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:Yn.create(e).rest(Ei.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||Yn.create([]).rest(Ei.create()),returns:r||Ei.create(),typeName:fe.ZodFunction,...Se(n)})}},os=class extends ve{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};os.create=(t,e)=>new os({getter:t,typeName:fe.ZodLazy,...Se(e)});var ss=class extends ve{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return ee(r,{received:r.data,code:G.invalid_literal,expected:this._def.value}),ye}return{status:"valid",value:e.data}}get value(){return this._def.value}};ss.create=(t,e)=>new ss({value:t,typeName:fe.ZodLiteral,...Se(e)});function IA(t,e){return new as({values:t,typeName:fe.ZodEnum,...Se(e)})}var as=class t extends ve{_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return ee(r,{expected:Ue.joinValues(n),received:r.parsedType,code:G.invalid_type}),ye}if(this._def.values.indexOf(e.data)===-1){let r=this._getOrReturnCtx(e),n=this._def.values;return ee(r,{received:r.data,code:G.invalid_enum_value,options:n}),ye}return tr(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e){return t.create(e)}exclude(e){return t.create(this.options.filter(r=>!e.includes(r)))}};as.create=IA;var cs=class extends ve{_parse(e){let r=Ue.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==X.string&&n.parsedType!==X.number){let i=Ue.objectValues(r);return ee(n,{expected:Ue.joinValues(i),received:n.parsedType,code:G.invalid_type}),ye}if(r.indexOf(e.data)===-1){let i=Ue.objectValues(r);return ee(n,{received:n.data,code:G.invalid_enum_value,options:i}),ye}return tr(e.data)}get enum(){return this._def.values}};cs.create=(t,e)=>new cs({values:t,typeName:fe.ZodNativeEnum,...Se(e)});var fo=class extends ve{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==X.promise&&r.common.async===!1)return ee(r,{code:G.invalid_type,expected:X.promise,received:r.parsedType}),ye;let n=r.parsedType===X.promise?r.data:Promise.resolve(r.data);return tr(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}};fo.create=(t,e)=>new fo({type:t,typeName:fe.ZodPromise,...Se(e)});var Lr=class extends ve{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===fe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,o={addIssue:a=>{ee(n,a),a.fatal?r.abort():r.dirty()},get path(){return n.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){let a=i.transform(n.data,o);return n.common.issues.length?{status:"dirty",value:n.data}:n.common.async?Promise.resolve(a).then(l=>this._def.schema._parseAsync({data:l,path:n.path,parent:n})):this._def.schema._parseSync({data:a,path:n.path,parent:n})}if(i.type==="refinement"){let a=l=>{let p=i.refinement(l,o);if(n.common.async)return Promise.resolve(p);if(p instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){let l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?ye:(l.status==="dirty"&&r.dirty(),a(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?ye:(l.status==="dirty"&&r.dirty(),a(l.value).then(()=>({status:r.value,value:l.value}))))}if(i.type==="transform")if(n.common.async===!1){let a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Sl(a))return a;let l=i.transform(a.value,o);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>Sl(a)?Promise.resolve(i.transform(a.value,o)).then(l=>({status:r.value,value:l})):a);Ue.assertNever(i)}};Lr.create=(t,e,r)=>new Lr({schema:t,typeName:fe.ZodEffects,effect:e,...Se(r)});Lr.createWithPreprocess=(t,e,r)=>new Lr({schema:e,effect:{type:"preprocess",transform:t},typeName:fe.ZodEffects,...Se(r)});var kn=class extends ve{_parse(e){return this._getType(e)===X.undefined?tr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};kn.create=(t,e)=>new kn({innerType:t,typeName:fe.ZodOptional,...Se(e)});var ki=class extends ve{_parse(e){return this._getType(e)===X.null?tr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};ki.create=(t,e)=>new ki({innerType:t,typeName:fe.ZodNullable,...Se(e)});var ls=class extends ve{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===X.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};ls.create=(t,e)=>new ls({innerType:t,typeName:fe.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Se(e)});var Ra=class extends ve{_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return dm(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Nr(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Nr(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};Ra.create=(t,e)=>new Ra({innerType:t,typeName:fe.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Se(e)});var ka=class extends ve{_parse(e){if(this._getType(e)!==X.nan){let n=this._getOrReturnCtx(e);return ee(n,{code:G.invalid_type,expected:X.nan,received:n.parsedType}),ye}return{status:"valid",value:e.data}}};ka.create=t=>new ka({typeName:fe.ZodNaN,...Se(t)});var M9=Symbol("zod_brand"),ym=class extends ve{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},vl=class t extends ve{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let o=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?ye:o.status==="dirty"?(r.dirty(),DA(o.value)):this._def.out._parseAsync({data:o.value,path:n.path,parent:n})})();{let i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?ye:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:fe.ZodPipeline})}},Pa=class extends ve{_parse(e){let r=this._def.innerType._parse(e);return Sl(r)&&(r.value=Object.freeze(r.value)),r}};Pa.create=(t,e)=>new Pa({innerType:t,typeName:fe.ZodReadonly,...Se(e)});var FA=(t,e={},r)=>t?uo.create().superRefine((n,i)=>{var o,a;if(!t(n)){let l=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,p=(a=(o=l.fatal)!==null&&o!==void 0?o:r)!==null&&a!==void 0?a:!0,u=typeof l=="string"?{message:l}:l;i.addIssue({code:"custom",...u,fatal:p})}}):uo.create(),A9={object:xr.lazycreate},fe;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(fe||(fe={}));var D9=(t,e={message:`Input not instance of ${t.name}`})=>FA(r=>r instanceof t,e),CA=po.create,OA=Yo.create,I9=ka.create,F9=Xo.create,NA=Jo.create,C9=es.create,O9=ba.create,N9=ts.create,L9=rs.create,U9=uo.create,V9=Ei.create,B9=Pn.create,H9=wa.create,W9=Ri.create,$9=xr.create,q9=xr.strictCreate,j9=ns.create,z9=mm.create,G9=is.create,K9=Yn.create,Q9=hm.create,Z9=_a.create,Y9=Ea.create,X9=gm.create,J9=os.create,e8=ss.create,t8=as.create,r8=cs.create,n8=fo.create,MA=Lr.create,i8=kn.create,o8=ki.create,s8=Lr.createWithPreprocess,a8=vl.create,c8=()=>CA().optional(),l8=()=>OA().optional(),p8=()=>NA().optional(),u8={string:t=>po.create({...t,coerce:!0}),number:t=>Yo.create({...t,coerce:!0}),boolean:t=>Jo.create({...t,coerce:!0}),bigint:t=>Xo.create({...t,coerce:!0}),date:t=>es.create({...t,coerce:!0})},f8=ye,$e=Object.freeze({__proto__:null,defaultErrorMap:Tl,setErrorMap:g9,getErrorMap:um,makeIssue:fm,EMPTY_PATH:y9,addIssueToContext:ee,ParseStatus:qt,INVALID:ye,DIRTY:DA,OK:tr,isAborted:RS,isDirty:kS,isValid:Sl,isAsync:dm,get util(){return Ue},get objectUtil(){return ES},ZodParsedType:X,getParsedType:lo,ZodType:ve,ZodString:po,ZodNumber:Yo,ZodBigInt:Xo,ZodBoolean:Jo,ZodDate:es,ZodSymbol:ba,ZodUndefined:ts,ZodNull:rs,ZodAny:uo,ZodUnknown:Ei,ZodNever:Pn,ZodVoid:wa,ZodArray:Ri,ZodObject:xr,ZodUnion:ns,ZodDiscriminatedUnion:mm,ZodIntersection:is,ZodTuple:Yn,ZodRecord:hm,ZodMap:_a,ZodSet:Ea,ZodFunction:gm,ZodLazy:os,ZodLiteral:ss,ZodEnum:as,ZodNativeEnum:cs,ZodPromise:fo,ZodEffects:Lr,ZodTransformer:Lr,ZodOptional:kn,ZodNullable:ki,ZodDefault:ls,ZodCatch:Ra,ZodNaN:ka,BRAND:M9,ZodBranded:ym,ZodPipeline:vl,ZodReadonly:Pa,custom:FA,Schema:ve,ZodSchema:ve,late:A9,get ZodFirstPartyTypeKind(){return fe},coerce:u8,any:U9,array:W9,bigint:F9,boolean:NA,date:C9,discriminatedUnion:z9,effect:MA,enum:t8,function:X9,instanceof:D9,intersection:G9,lazy:J9,literal:e8,map:Z9,nan:I9,nativeEnum:r8,never:B9,null:L9,nullable:o8,number:OA,object:$9,oboolean:p8,onumber:l8,optional:i8,ostring:c8,pipeline:a8,preprocess:s8,promise:n8,record:Q9,set:Y9,strictObject:q9,string:CA,symbol:O9,transformer:MA,tuple:K9,undefined:N9,union:j9,unknown:V9,void:H9,NEVER:f8,ZodIssueCode:G,quotelessJson:h9,ZodError:Nr});function LA(t){let e=t.operands.map(MS).join(" ");return`(#${t.operator} ${e})`}function MS(t){return t.type==="capture"?`@${t.name}`:t.value}function UA(t,e){return e.errors.filter(r=>!(r.code==="invalid_type"&&r.path.length===2&&(r.path[1]==="name"||r.path[1]==="value"))).map(r=>d8(t,r))}function d8(t,e){if(e.path.length===0)return e.code==="too_small"?"Too few arguments":e.code==="too_big"?"Too many arguments":e.message;let r=e.message;e.code==="invalid_literal"&&e.path[1]==="type"&&(r=e.expected==="capture"?"Capture names must be prefixed with @":"Expected string, but received capture");let n=e.path[0],i=MS(t[n]);return`Error on argument ${n} (\`${i}\`): ${r}`}var rr=class{allowMissingNode(){return!1}createPredicate(e){let r=this.schema.safeParse(e);return r.success?{success:!0,predicate:n=>{try{let i=this.constructAcceptArgs(r.data,n);return this.run(...i)}catch(i){if(i instanceof xm&&this.allowMissingNode())return!0;throw i}}}:{success:!1,errors:UA(e,r.error)}}constructAcceptArgs(e,r){return e.map(n=>{if(n.type==="capture"){let i=r.captures.find(o=>o.name===n.name);if(i==null)throw new xm(n.name);return i}else return n.value})}},xm=class extends Error{constructor(e){super(`Could not find capture ${e}`)}};var AS=$e.object({type:$e.literal("string"),value:$e.string()}),we={node:$e.object({type:$e.literal("capture"),name:$e.string()}),string:AS,integer:AS.transform((t,e)=>{let r=parseInt(t.value);return isNaN(r)?(e.addIssue({code:$e.ZodIssueCode.custom,message:"Expected an integer"}),$e.NEVER):{type:"integer",value:r}}),boolean:AS.transform((t,e)=>t.value==="true"?{type:"boolean",value:!0}:t.value==="false"?{type:"boolean",value:!1}:(e.addIssue({code:$e.ZodIssueCode.custom,message:"Expected true or false"}),$e.NEVER))};var DS=class extends rr{constructor(){super(...arguments);this.name="not-type?";this.schema=$e.tuple([we.node,we.string]).rest(we.string)}run({node:r},...n){return!n.includes(r.type)}},IS=class extends rr{constructor(){super(...arguments);this.name="not-parent-type?";this.schema=$e.tuple([we.node,we.string]).rest(we.string)}run({node:r},...n){return r.parent==null||!n.includes(r.parent.type)}},FS=class extends rr{constructor(){super(...arguments);this.name="is-nth-child?";this.schema=$e.tuple([we.node,we.integer])}run({node:r},n){return r.parent?.children.findIndex(i=>i.id===r.id)===n}},CS=class extends rr{constructor(){super(...arguments);this.name="has-multiple-children-of-type?";this.schema=$e.tuple([we.node,we.string])}run({node:r},n){return r.children.filter(o=>o.type===n).length>1}},OS=class extends rr{constructor(){super(...arguments);this.name="child-range!";this.schema=$e.union([$e.tuple([we.node,we.integer]),$e.tuple([we.node,we.integer,we.integer]),$e.tuple([we.node,we.integer,we.integer,we.boolean]),$e.tuple([we.node,we.integer,we.integer,we.boolean,we.boolean])])}run(r,n,i,o,a){let{node:{children:l}}=r;n=n<0?l.length+n:n,i=i??-1,i=i<0?l.length+i:i;let p=l[n],u=l[i];return r.range=sn(o?p.endPosition:p.startPosition,a?u.startPosition:u.endPosition),!0}},NS=class extends rr{constructor(){super(...arguments);this.name="character-range!";this.schema=$e.union([$e.tuple([we.node,we.integer]),$e.tuple([we.node,we.integer,we.integer])])}run(r,n,i){return r.range=new W(r.range.start.translate(void 0,n),r.range.end.translate(void 0,i??0)),!0}},LS=class extends rr{constructor(){super(...arguments);this.name="shrink-to-match!";this.schema=$e.tuple([we.node,we.string])}run(r,n){let{document:i,range:o}=r,l=i.getText(o).match(new RegExp(n,"ds"));if(l?.index==null)throw Error(`No match for pattern '${n}'`);let[p,u]=l.indices?.groups?.keep??l.indices[0],d=i.offsetAt(o.start);return r.range=new W(i.positionAt(d+p),i.positionAt(d+u)),!0}},US=class extends rr{constructor(){super(...arguments);this.name="trim-end!";this.schema=$e.tuple([we.node])}run(r){let{document:n,range:i}=r,o=n.getText(i),a=o.length-o.trimEnd().length;return a>0&&(r.range=new W(i.start,$R(n,i.end,-a))),!0}},VS=class extends rr{constructor(){super(...arguments);this.name="allow-multiple!";this.schema=$e.tuple([we.node])}allowMissingNode(){return!0}run(r){return r.allowMultiple=!0,!0}},BS=class extends rr{constructor(){super(...arguments);this.name="log!";this.schema=$e.tuple([we.node])}run(r){return console.log(`#log!: ${r.name}@${r.range}`),!0}},HS=class extends rr{constructor(){super(...arguments);this.name="insertion-delimiter!";this.schema=$e.tuple([we.node,we.string])}run(r,n){return r.insertionDelimiter=n,!0}},WS=class extends rr{constructor(){super(...arguments);this.name="single-or-multi-line-delimiter!";this.schema=$e.tuple([we.node,we.node,we.string,we.string])}run(r,n,i,o){return r.insertionDelimiter=n.range.isSingleLine?i:o,!0}},VA=[new BS,new DS,new US,new IS,new FS,new OS,new NS,new LS,new VS,new HS,new WS,new CS];function BA(t){let e=[],r=[];return t.forEach((n,i)=>{let o=[];n.forEach((a,l)=>{let p=VA.find(({name:d})=>d===a.operator);if(p==null){e.push({patternIdx:i,predicateIdx:l,error:`Unknown predicate operator "${a.operator}"`});return}let u=p.createPredicate(a.operands);if(!u.success){e.push(...u.errors.map(d=>({patternIdx:i,predicateIdx:l,error:d})));return}o.push(u.predicate)}),r.push(o)}),{errors:e,predicates:r}}function HA(t){return t.map(e=>e.name.endsWith(".startOf")?{...e,name:e.name.replace(/\.startOf$/,""),range:e.range.start.toEmptyRange()}:e.name.endsWith(".endOf")?{...e,name:e.name.replace(/\.endOf$/,""),range:e.range.end.toEmptyRange()}:e)}var bl=class t{constructor(e,r,n){this.treeSitter=e;this.query=r;this.patternPredicates=n}static create(e,r,n){let{errors:i,predicates:o}=BA(n.predicates);if(i.length>0){for(let a of i){let l=[`language ${e}`,`pattern ${a.patternIdx}`,`predicate \`${LA(n.predicates[a.patternIdx][a.predicateIdx])}\``].join(", ");nt(D().messages,"TreeSitterQuery.parsePredicates",`Error parsing predicate for ${l}: ${a.error}`)}if(D().runMode==="test")throw new Error("Invalid predicates")}return new t(r,n,o)}matches(e,r,n){return this.query.matches(this.treeSitter.getTree(e).rootNode,{startPosition:r==null?void 0:$A(r),endPosition:n==null?void 0:$A(n)}).map(({pattern:i,captures:o})=>({patternIdx:i,captures:o.map(({name:a,node:l})=>({name:a,node:l,document:e,range:SA(l),insertionDelimiter:void 0,allowMultiple:!1,hasError:()=>kA(l)}))})).filter(i=>this.patternPredicates[i.patternIdx].every(o=>o(i))).map(i=>{let o=Object.entries(Qx(i.captures,({name:a})=>WA(a))).map(([a,l])=>{if(l=HA(l),!RA(l,D().messages)&&D().runMode==="test")throw new Error("Invalid captures");return{name:a,range:l.map(({range:u})=>u).reduce((u,d)=>d.union(u)),allowMultiple:l.some(u=>u.allowMultiple),insertionDelimiter:l.find(u=>u.insertionDelimiter!=null)?.insertionDelimiter,hasError:()=>l.some(u=>u.hasError())}});return{...i,captures:o}})}get captureNames(){return yi(this.query.captureNames.map(WA))}};function WA(t){return t.replace(/(\.(start|end))?(\.(startOf|endOf))?$/,"")}function $A(t){return{row:t.line,column:t.character}}var jA="_",m8=[jA,...Wo],h8=["prefix","leading","trailing"],g8=["startOf","endOf"],y8=["domain","removal","interior","iteration","iteration.domain"],qA=["start","end","start.startOf","start.endOf","end.startOf","end.endOf"],ps=new Set;for(let t of m8){if(t!==jA){ps.add(t);for(let e of qA)ps.add(`${t}.${e}`)}for(let e of h8){ps.add(`${t}.${e}`);for(let r of g8)ps.add(`${t}.${e}.${r}`)}for(let e of y8){ps.add(`${t}.${e}`);for(let r of qA)ps.add(`${t}.${e}.${r}`)}}var x8=new RegExp("^(?!;;).*@([\\w.]*)","gm");function zA(t,e){let r=e.matchAll(x8),n=[];for(let o of r){let a=o[1];if(!(a.length>1&&!a.includes(".")&&a.startsWith("_"))&&!ps.has(a)){let l=o.input.slice(0,o.index).split(`
`).length;n.push(`${t}(${l}) invalid capture '@${a}'.`)}}if(n.length===0)return;let i=n.join(`
`);if(nt(D().messages,"validateQueryCaptures.invalidCaptureName",i),D().runMode==="test")throw new Error(i)}var Tm=class t{constructor(e){this.query=e}static async create(e,r,n,i){let o=await T8(e,r,`${i}.scm`);if(o==null||!await n.loadLanguage(i))return;let a=n.getLanguage(i).query(o),l=bl.create(i,n,a);return new t(l)}getScopeHandler(e){if(this.query.captureNames.includes(e.type))return new Gd(this.query,e)}getCaptures(e,r){return this.query.matches(e).map(n=>n.captures.find(({name:i})=>i===r)).filter(n=>n!=null)}};async function T8(t,e,r){let n={[r]:null},i=t.runMode!=="production";for(;Object.values(n).some(o=>o==null);)for(let[o,a]of Object.entries(n)){if(a!=null)continue;let l=await e.readQuery(o);if(l==null){if(o===r)return;if(nt(t.messages,"LanguageDefinition.readQueryFileAndImports.queryNotFound",`Could not find imported query file ${o}`),t.runMode==="test")throw new Error("Invalid import statement");l=""}i&&zA(o,l),n[o]=l,Jr(l,/^[^\S\r\n]*;;?[^\S\r\n]*(?:import|include)[^\S\r\n]+['"]?([\w|/\\.]+)['"]?[^\S\r\n]*$/gm,p=>{let u=p[1];i&&S8(t,o,u,p[0]),n[u]=n[u]??null})}return Object.values(n).join(`
`)}function S8(t,e,r,n){let i=!1;/[/\\]/g.test(r)&&(nt(t.messages,"LanguageDefinition.readQueryFileAndImports.invalidImport",`Invalid import statement in ${e}: "${n}". Relative import paths not supported`),i=!0);let o=`;; import ${r}`;if(n!==o&&(nt(t.messages,"LanguageDefinition.readQueryFileAndImports.malformedImport",`Malformed import statement in ${e}: "${n}". Import statements must be of the form "${o}"`),i=!0),i&&t.runMode==="test")throw new Error("Invalid import statement")}var GA=Symbol("LANGUAGE_UNDEFINED"),Sm=class t{constructor(e,r,n){this.ide=e;this.treeSitter=r;this.treeSitterQueryProvider=n;this.notifier=new Wt;this.languageDefinitions=new Map;this.disposables=[];this.onDidChangeDefinition=this.notifier.registerListener;e.onDidOpenTextDocument(i=>{this.loadLanguage(i.languageId)}),e.onDidChangeVisibleTextEditors(i=>{i.forEach(({document:o})=>this.loadLanguage(o.languageId))}),this.disposables.push(n.onChanges(()=>this.reloadLanguageDefinitions()))}static async create(e,r,n){let i=new t(e,r,n);return await i.loadAllLanguages(),i}async loadAllLanguages(){let e=this.ide.visibleTextEditors.map(({document:r})=>r.languageId);try{await Promise.all(e.map(r=>this.loadLanguage(r)))}catch(r){if(nt(this.ide.messages,"Failed to load language definitions",wn(r)),this.ide.runMode==="test")throw r}}async loadLanguage(e){if(this.languageDefinitions.has(e))return;let r=await Tm.create(this.ide,this.treeSitterQueryProvider,this.treeSitter,e)??GA;this.languageDefinitions.set(e,r)}async reloadLanguageDefinitions(){this.languageDefinitions.clear(),await this.loadAllLanguages(),this.notifier.notifyListeners()}get(e){let r=this.languageDefinitions.get(e);if(r==null)throw new Error("Expected language definition entry is missing for languageId "+e);return r===GA?void 0:r}getNodeAtLocation(e,r){return this.treeSitter.getNodeAtLocation(e,r)}dispose(){this.disposables.forEach(e=>e.dispose())}};var vm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}get nestedStages(){return this.nestedStages_==null&&(this.nestedStages_=this.modifier.modifiers.map(this.modifierStageFactory.create)),this.nestedStages_}run(e){for(let r of this.nestedStages)try{return r.run(e)}catch{continue}throw new Error("No modifier could be applied")}};var Ma=class{constructor(e,r){this.modifierStageFactory=e;this.nestedModifier=r;this.suppressErrors=!1}run(e){if(this.shouldModify(e))try{return this.nestedStage.run(e).map(r=>r.withThatTarget(e))}catch(r){if(!this.suppressErrors)throw r}return[e]}get nestedStage(){return this.nestedStage_==null&&(this.nestedStage_=this.modifierStageFactory.create(this.nestedModifier)),this.nestedStage_}},Aa=class extends Ma{constructor(e,r){super(e,r.modifier)}shouldModify(e){return!e.hasExplicitScopeType}},wl=class extends Ma{constructor(r,n,i){super(r,n);this.modificationCondition=i}shouldModify(r){return this.modificationCondition(r)}},bm=class extends Ma{shouldModify(e){return!e.hasExplicitScopeType&&!e.isImplicit}},Da=class extends Ma{constructor(r){super(r,{type:"containingScope",scopeType:{type:"token"}});this.suppressErrors=!0}shouldModify(r){return!r.hasExplicitScopeType&&!r.hasExplicitRange&&r.contentRange.isEmpty}};function KA(t,e){return Object.getPrototypeOf(t).constructor===Object.getPrototypeOf(e).constructor}function Ia(t,e,r,n,i){if(n&&i&&KA(e,r)){let o=e.maybeCreateRichRangeTarget(t,r);if(o!=null)return o}return e.isLine&&r.isLine?new Or({editor:e.editor,isReversed:t,contentRange:pa(e,r,n,i)}):new kt({editor:e.editor,isReversed:t,hasExplicitRange:!0,contentRange:io(e,r,n,i),isToken:n&&i&&e.isToken&&r.isToken})}function wm(t,e,r){if(e===r)return e.getTargets(t);let n=e.getTargets(t),i=r.getTargets(t);if(n.length!==1||i.length!==1)throw Error("Scope range targets must be single-target");let[o]=n,[a]=i,l=a.contentRange.start.isAfterOrEqual(o.contentRange.start),[p,u]=l?[o,a]:[a,o];return[Ia(t,p,u,!0,!0)]}function _m(t,e,r,n){let i=Array.from(t.generateScopes(e,r,"forward",{containment:"required",allowAdjacentScopes:!0,skipAncestorScopes:!0}));switch(i.length){case 0:return;case 1:return i[0];case 2:{let[o,a]=i;return n==="forward"?a:n==="backward"||(t.isPreferredOver?.(o,a)??!1)?o:a}default:throw new Error("Expected no more than 2 scope candidates")}}function Em(t,e,r=0){let{isReversed:n,editor:i,contentRange:{start:o,end:a}}=t;if(a.isEqual(o)){let u=_m(e,i,o);return u==null||(r>0&&(u=$S(e,i,u.domain.end,"forward",r,!0)),u==null)?void 0:u.getTargets(n)}let l=$S(e,i,o,"forward",r);if(l==null)return;if(l.domain.contains(a))return l.getTargets(n);let p=$S(e,i,a,"backward",r);if(p!=null)return wm(n,l,p)}function $S(t,e,r,n,i,o=!1){let a=0;for(let l of t.generateScopes(e,r,n,{containment:"required",allowAdjacentScopes:o})){if(a===i)return l;a+=1}}var Fa=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let{scopeType:r,ancestorIndex:n=0}=this.modifier,i=this.scopeHandlerFactory.create(r,e.editor.document.languageId);if(i==null)return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e);let o=Em(e,i,n);if(o==null){if(r.type==="collectionItem")return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e);throw new Et(this.modifier.scopeType.type)}return o}};var Rm=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let{scopeType:r}=this.modifier,{editor:n,isReversed:i}=e,o=this.scopeHandlerFactory.create(r,n.document.languageId);if(o==null)return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e);let a;if(e.hasExplicitRange&&(a=QA(o,n,e.contentRange),a.length===1&&a[0].domain.contains(e.contentRange)&&(a=void 0)),a==null)try{a=this.getDefaultIterationRange(o,this.scopeHandlerFactory,e).flatMap(l=>QA(o,n,l))}catch(l){if(!(l instanceof Et))throw l;a=[]}if(a.length===0){if(r.type==="collectionItem")return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e);throw new Et(r.type)}return a.flatMap(l=>l.getTargets(i))}getDefaultIterationRange(e,r,n){let i=r.create(e.iterationScopeType,n.editor.document.languageId);if(i==null)throw Error("Could not find iteration scope handler");let o=Em(n,i);if(o==null)throw new Et(`iteration scope for ${e.scopeType.type}`);return o.map(a=>a.contentRange)}};function QA(t,e,{start:r,end:n}){return Array.from(t.generateScopes(e,r,"forward",{distalPosition:n,skipAncestorScopes:!0,allowAdjacentScopes:t.includeAdjacentInEvery}))}var km=class{constructor(e){this.modifier=e}run(e){return e.contentText.trim()!==""?[e]:[]}},Pm=class{constructor(e){this.modifier=e}run(e){return e.contentText.trim()===""?[e]:[]}};var Mm=class{run(){return xd(D()).map(e=>new hd({editor:e.editor,isReversed:e.selection.isReversed,contentRange:e.selection}))}};var Am=class{constructor(e,r){this.modifierStageFactory=e;this.markStageFactory=r}run(e,{actionFinalStages:r=[],noAutomaticTokenExpansion:n=!1}={}){return new qS(this.modifierStageFactory,this.markStageFactory,e,{actionFinalStages:r,noAutomaticTokenExpansion:n}).run()}},qS=class{constructor(e,r,n,i){this.modifierStageFactory=e;this.markStageFactory=r;this.target=n;this.opts=i}run(){return v8(this.processTarget(this.target))}processTarget(e){switch(e.type){case"list":return e.elements.flatMap(r=>this.processTarget(r));case"range":return this.processRangeTarget(e);case"primitive":case"implicit":return this.processPrimitiveTarget(e)}}processRangeTarget(e){let r=this.processPrimitiveTarget(e.anchor),n=this.processPrimitiveTarget(e.active);return ut(r,n).flatMap(([i,o])=>{if(i==null||o==null)throw new Error("AnchorTargets and activeTargets lengths don't match");switch(e.rangeType){case"continuous":return this.processContinuousRangeTarget(i,o,e);case"vertical":return b8(i,o,e.excludeAnchor,e.excludeActive)}})}processContinuousRangeTarget(e,r,{excludeAnchor:n,excludeActive:i,exclusionScopeType:o}){if(o==null)return[mo(e,r,n,i)];let a=GS(e,r);return[mo(n?ZA(this.modifierStageFactory,e,o,a?"backward":"forward"):e,i?ZA(this.modifierStageFactory,r,o,a?"forward":"backward"):r,!1,!1)]}processPrimitiveTarget(e){let r,n;e.type==="implicit"?(r=new Mm,n=[]):(r=this.markStageFactory.create(e.mark),n=jS(this.modifierStageFactory,e.modifiers));let i=r.run(),o=[...n,...this.opts.actionFinalStages,...this.opts.noAutomaticTokenExpansion?[]:[new Da(this.modifierStageFactory)]];return zS(o,i)}};function jS(t,e){return e.map(t.create).reverse()}function zS(t,e){return t.forEach(r=>{e=e.flatMap(n=>r.run(n))}),e}function ZA(t,e,r,n){return t.create({type:"relativeScope",scopeType:r,direction:n,length:1,offset:1}).run(e)[0]}function GS(t,e){return t.contentRange.start.isAfter(e.contentRange.start)?!0:t.contentRange.start.isBefore(e.contentRange.start)?!1:t.contentRange.end.isAfter(e.contentRange.end)}function v8(t){return Qk(t,(e,r)=>e.isEqual(r),e=>e.contentRange.concise())}function YA(t,e){if(t.editor!==e.editor)throw new Error("Cannot form range between targets in different editors")}function mo(t,e,r=!1,n=!1){YA(t,e);let i=GS(t,e);return Ia(i,i?e:t,i?t:e,!(i?n:r),!(i?r:n))}function b8(t,e,r,n){YA(t,e);let i=GS(t,e),o=i?-1:1,l=(i?t.contentRange.start:t.contentRange.end).line+(r?o:0),u=(i?e.contentRange.start:e.contentRange.end).line-(n?o:0),d=[];for(let h=l;;h+=o){let g=new W(h,t.contentRange.start.character,h,t.contentRange.end.character);if(d.push(new He({editor:t.editor,isReversed:t.isReversed,contentRange:g,insertionDelimiter:t.insertionDelimiter})),h===u)return d}}var Dm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=this.modifier.modifiers??[{type:"containingScope",scopeType:{type:"line"}}],n=jS(this.modifierStageFactory,r);return zS(n,[e]).map(o=>{let a=this.modifier.type==="extendThroughStartOf";return new gd({editor:e.editor,isReversed:a,inputTarget:e,modifiedTarget:o,isHead:a})})}};var Pi=class extends Error{constructor(){super("Scope index out of range"),this.name="OutOfRangeError"}};function XA(t,e,r){return KS(t,e,r),t.slice(e,r+1)}function KS(t,e,r){if(e<0||r>=t.length)throw new Pi}var Ca=class{constructor(e,r,n){this.modifierStageFactory=e;this.storedTargets=r;this.modifier=n}run(e){let r=new Da(this.modifierStageFactory).run(e)[0];switch(this.modifier.type){case"everyScope":return this.handleEveryScope(r);case"ordinalScope":return this.handleOrdinalScope(r,this.modifier);case"relativeScope":return this.handleRelativeScope(r,this.modifier);default:throw Error(`${this.modifier.type} instance scope not supported`)}}handleEveryScope(e){return Array.from(Ld(this.getEveryRanges(e),([r,n])=>this.getTargetIterable(e,r,n,"forward")))}handleOrdinalScope(e,{start:r,length:n}){return this.getEveryRanges(e).flatMap(([i,o])=>JA(this.getTargetIterable(e,i,o,r>=0?"forward":"backward"),r>=0?r:-(n+r),n))}handleRelativeScope(e,{direction:r,offset:n,length:i}){return(this.storedTargets.get("instanceReference")??[e]).flatMap(a=>{let{editor:l}=a,p=r==="forward"?new W(n===0?a.contentRange.start:a.contentRange.end,l.document.range.end):new W(l.document.range.start,n===0?a.contentRange.end:a.contentRange.start);return JA(this.getTargetIterable(e,l,p,r),n===0?0:n-1,i)})}getEveryRanges({editor:e}){return this.storedTargets.get("instanceReference")?.map(({editor:r,contentRange:n})=>[r,n])??[[e,e.document.range]]}getTargetIterable(e,r,n,i){let o=Lt(Kn(new RegExp(Ir(e.contentText),"g"),r,n,i),l=>new He({contentRange:l,editor:r,isReversed:!1,isToken:!1})),a=w8(e);if(a!=null){let l=this.modifierStageFactory.create({type:"containingScope",scopeType:a});return WM(Lt(o,p=>{try{let u=l.run(p);return u.length===1&&u[0].contentRange.isRangeEqual(p.contentRange)?u[0]:null}catch{return null}}),p=>p!=null)}return o}};function w8(t){return t.isLine?{type:"line"}:t.isToken?{type:"token"}:t.isWord?{type:"word"}:null}function JA(t,e,r){Array.from(hl(e,t));let n=Array.from(hl(r,t));if(n.length<r)throw new Pi;return n}var Im=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r;this.containingSurroundingPairIfNoInteriorStage=_8(this.modifierStageFactory)}run(e){return this.containingSurroundingPairIfNoInteriorStage.run(e).flatMap(r=>r.getInterior())}},Fm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r;this.containingSurroundingPairIfNoBoundaryStage=QS(this.modifierStageFactory)}run(e){return this.containingSurroundingPairIfNoBoundaryStage.run(e).flatMap(r=>r.getBoundary())}};function _8(t){return new wl(t,{type:"containingScope",scopeType:{type:"surroundingPair",delimiter:"any"}},e=>e.getInterior()==null)}function QS(t){return new wl(t,{type:"containingScope",scopeType:{type:"surroundingPair",delimiter:"any"}},e=>e.getBoundary()==null)}function eD(...t){return e=>{let r=e;for(let n of t)if(r=n(r),r==null)return null;return r}}function tD(t,...e){return r=>{let n=r,i=[],o=[...e].reverse();for(let a of o){if(n==null||(n=a(n),n==null))return null;i.push(n),n=n.parent??null}return i.reverse()[t]}}var ZS=t=>new ae(t.row,t.column),rD=(...t)=>{let e=["(","{","[","<"],r=[")","}","]",">"],n=e.concat(r),i=(a,l)=>a!=null&&l.includes(a.type),o=a=>a!=null&&!i(a,n);return(a,l)=>{let p,{start:u,end:d}=l;if(i(a.parent,t))return i(a,e)?p=a.nextNamedSibling:i(a,r)?p=a.previousNamedSibling:a.type===","?p=d.isBeforeOrEqual(ZS(a.startPosition))?a.previousNamedSibling:a.nextNamedSibling:p=a,o(p)?p:null;if(i(a,t)){let h=[...a.children],g=h.find(({startPosition:b})=>ZS(b).isAfterOrEqual(d))??null;if(o(g))return g;h.reverse();let x=h.find(({endPosition:b})=>ZS(b).isBeforeOrEqual(u))??null;if(o(x))return x}return null}};function Ce(...t){let e=E8(t);return r=>{for(let n of e){let i=R8(r,n);if(i!=null)return i}return null}}function E8(t){return t.map(e=>e.split(".").map(r=>new YS(r)))}function R8(t,e){let r=k8(t,e);!r&&e.length>1&&(r=P8(t,e));let n=null,i;return r!=null&&([n,i]=r),n!=null&&i!=null&&i.fields!=null&&i.fields.forEach(o=>{n=(o.isIndex?n?.namedChild(o.value):n?.childForFieldName(o.value))??null}),n}function k8(t,e){let r=null,n=t;for(let i=e.length-1;i>-1;--i){let o=e[i];if(n==null||!o.typeEquals(n)){if(o.isOptional)continue;return null}(!r||!r[1].isImportant)&&(r=[n,o]),n=n.parent}return r}function P8(t,e){let r=null,n=t;for(let i=0;i<e.length;++i){let o=e[i];if(n==null||!o.typeEquals(n)){if(o.isOptional)continue;return null}if((!r||o.isImportant)&&(r=[n,o]),i+1<e.length){let a=n.namedChildren.filter(l=>e[i+1].typeEquals(l));n=a.length===1?a[0]:null}}return r}var YS=class{constructor(e){this.anyType=!1;this.notType=!1;this.type=e.match(/^[\w*~]+/)[0],this.type==="*"?this.anyType=!0:this.type.startsWith("~")&&(this.type=this.type.slice(1),this.notType=!0),this.isImportant=e.indexOf("!")>-1,this.isOptional=e.indexOf("?")>-1,this.fields=[...e.matchAll(/(?<=\[).+?(?=\])/g)].map(r=>r[0]).map(r=>/\d+/.test(r)?{isIndex:!0,value:Number(r)}:{isIndex:!1,value:r})}typeEquals(e){return this.anyType?!0:this.notType?this.type!==e.type:this.type===e.type}};function Me(t,e=Qn){return function(r,n){let i=t(n,r.selection);return i!=null?[{node:i,selection:e(r.editor,i)}]:null}}function Cm(t,e=Qn){let r=eD(...t);return function(n,i){let o=r(i);return o==null?null:[{node:o,selection:e(n.editor,o)}]}}function Oa(t,e=0,r=Qn){return Me(tD(e,...t),r)}function bt(...t){return Me(Ce(...t))}function ho(...t){return Me(rD(...t),bA())}function Na(...t){return Me(Ce(...t),wA)}function Mn(t,e=[]){return Me(Ce(...t),_A(...e))}function go(t,e=[]){return Me(Ce(...t),EA(...e))}function at(...t){return(e,r)=>{for(let n of t){let i=n(e,r);if(i!=null)return i}return null}}function nD(t){return(e,r)=>{throw new Error(`Node type '${t}' not supported`)}}function cn(t){return Object.freeze(Object.fromEntries(Ti(t).map(e=>{let r=t[e];return Array.isArray(r)?[e,bt(...r)]:typeof r=="string"?[e,bt(r)]:[e,r]})))}function iD(t,e){let r=t.walk();r.gotoFirstChild();let n=[],i=!0;for(;i;)r.currentFieldName===e&&n.push(r.currentNode),i=r.gotoNextSibling();return n}function M8(t,e){return JS(t,r=>Math.floor(r/2)*2+e)}function Om(t){return M8(Ce("map_lit"),t)}function JS(t,e){return r=>{let n=r.parent;if(n==null||t(n)==null)return null;let i=_l(n),o=i.findIndex(({id:l})=>l===r.id);if(o===-1)return null;let a=e(o);return a===-1?null:i[a]}}function A8(){return JS(t=>t,t=>t)}var _l=t=>iD(t,"value"),XS="~quoting_lit.list_lit!",sD=Ce(XS);function ev(...t){return e=>{let r=sD(e);if(r==null)return null;let n=_l(r)[0];return t.includes(n?.text)?r:null}}function D8(...t){return Me(ev(...t))}var aD=ev("defn","defmacro"),oD=Cm([aD,t=>_l(t)[1]]),cD=ev("if","if-let","when","when-let"),I8=Me(cD),F8={collectionKey:Me(Om(0)),collectionItem:at(Me(Om(0),xl(t=>t.type==="{"||t.type==="}",", ",Ht,Om(1))),Me(A8())),value:Me(Om(1)),argumentOrParameter:Me(JS(Ce(XS),t=>t!==0?t:-1)),functionCall:XS,functionCallee:Cm([sD,t=>_l(t)[0]]),namedFunction:Me(aD),functionName:oD,name:oD,anonymousFunction:at(D8("fn"),bt("anon_fn_lit")),ifStatement:I8,condition:Cm([cD,t=>_l(t)[1]])},lD=cn(F8);var pD=["command","displayed_equation","inline_formula","math_set","block_comment","package_include","class_include","latex_include","biblatex_include","bibtex_include","graphics_include","svg_include","inkscape_include","verbatim_include","import_include","caption","citation","label_definition","label_reference","label_reference_range","label_number","new_command_definition","old_command_definition","let_command_definition","environment_definition","glossary_entry_definition","glossary_entry_reference","acronym_definition","acronym_reference","theorem_definition","color_definition","color_set_definition","color_reference","tikz_library_import"],C8=["curly_group","curly_group_text","curly_group_text_list","curly_group_path","curly_group_path_list","curly_group_command_name","curly_group_key_value","curly_group_glob_pattern","curly_group_impl","brack_group","brack_group_text","brack_group_argc","brack_group_key_value","mixed_group"],fD=["subparagraph","paragraph","subsubsection","subsection","section","chapter","part"],uD=fD.map(t=>`${t}[text]`),O8=fD.map(t=>`${t}[command]`);function tv(t,e){return{selection:new Te(t.document.positionAt(e.startIndex+1),t.document.positionAt(e.endIndex-1)),context:{removalRange:new Te(t.document.positionAt(e.startIndex),t.document.positionAt(e.endIndex))}}}function N8(t,e){let r=e.startIndex,n=e.endIndex,i=e.nextNamedSibling;return i!=null&&i.isNamed&&(n=i.endIndex),{selection:new Te(t.document.positionAt(r),t.document.positionAt(n)),context:{}}}function L8(t,e){let r=e.startIndex,n=e.childForFieldName("label");if(n==null){let i=e.childForFieldName("command");i!=null&&(r=i.endIndex+1)}else r=n.endIndex+1;return{selection:new Te(t.document.positionAt(r),t.document.positionAt(e.endIndex)),context:{leadingDelimiterRange:new W(t.document.positionAt(e.startIndex),t.document.positionAt(r-1))}}}var U8={argumentOrParameter:at(Oa([Ce(...pD),Ce(...C8)],1,tv),Me(Ce("begin[name]","end[name]",...uD),tv)),functionCall:at(Me(Ce(...pD,"begin","end")),Me(Ce(...O8),N8)),name:at(Me(Ce(...uD),tv),bt("begin[name][text]","end[name][text]")),collectionItem:Me(Ce("enum_item"),L8)},dD=cn(U8);var V8=["alias","begin_block","end_block","if_modifier","rescue_modifier","undef","unless_modifier","until_modifier","while_modifier"],B8=["array","assignment","begin","binary","break","call","case","case_match","chained_string","character","class","class_variable","complex","conditional","constant","delimited_symbol","element_reference","false","float","for","global_variable","hash","heredoc_beginning","identifier","if","instance_variable","integer","lambda","method","module","next","nil","operator_assignment","parenthesized_statements","range","rational","redo","regex","retry","return","scope_resolution","self","simple_symbol","singleton_class","singleton_method","string","string_array","subshell","super","symbol_array","true","unary","unless","until","while","yield"],H8=["begin_block","begin","block_body","block","body_statement","do_block","do","else","end_block","ensure","heredoc_beginning","interpolation","lambda","method","parenthesized_statements","program","singleton_class","singleton_method","then"],W8=["hash"],$8=["array","string_array","symbol_array"],q8=["=","+=","-=","*=","**=","/=","||=","|=","&&=","&=","%=",">>=","<<=","^="],j8=[":","=>"];function z8(t){if(t.type!=="call")return null;let e=t.childForFieldName("receiver"),r=t.childForFieldName("method"),n=t.childForFieldName("block");return e?.text==="Proc"&&r?.text==="new"||e==null&&r?.text==="lambda"?t:n}var G8={statement:at(bt(...V8),Oa([Ce(...H8),Ce(...B8)],1)),anonymousFunction:at(bt("lambda","do_block"),Me(z8)),condition:Na("*[condition]"),argumentOrParameter:ho("lambda_parameters","method_parameters","block_parameters","argument_list"),collectionKey:go(["pair[key]"],[":"]),value:Mn(["pair[value]","assignment[right]","operator_assignment[right]","return.argument_list!"],q8.concat(j8)),collectionItem:ho(...W8,...$8)},mD=cn(G8);function rv(){let t=Zn(["else_clause"],[],{includeUnnamedChildren:!0});return function(e,r){let n=t(e,r),i=r.parent;if(i?.type!=="else_clause"){let a=r.childForFieldName("alternative");if(a==null)return n;let{selection:l}=n;return{selection:l,context:{removalRange:new Te(l.start,wS(a.namedChild(0).startPosition))}}}let{selection:o}=n;return{selection:new Te(wS(i.child(0).startPosition),o.end),context:{}}}}function hD(t){let e=rv();return function(r,n){return n.namedChild(0).type===t?e(r,n.namedChild(0)):Qn(r,n)}}var gD=["associated_type","attribute_item","const_item","empty_statement","enum_item","extern_crate_declaration","foreign_mod_item","impl_item","inner_attribute_item","let_declaration","macro_definition","macro_invocation","function_item","function_signature_item","mod_item","static_item","struct_item","trait_item","type_item","union_item","use_declaration","expression_statement"],K8=["source_file","block","declaration_list"];function Q8(t){return t.parent?.type==="impl_item"&&t.parent?.childForFieldName("type")?.equals(t)?t:null}function Z8(t,e){return{selection:vA(e.children[1],e.lastNamedChild),context:{leadingDelimiterRange:sn(e.children[0].startPosition,e.children[1].startPosition)}}}function Y8(t){if(t.type!=="block")return null;let{lastNamedChild:e}=t;if(e==null)return null;if(e.type==="expression_statement"){let r=e.child(0);return r.type==="return_expression"?r.child(1):null}return gD.includes(e.type)?null:e.type==="return_expression"?e.child(1):e}var X8={statement:Oa([Ce(...K8),Ce(...gD)],1),condition:at(bt("while_expression[condition]","if_expression[condition]"),Me(Ce("while_let_expression","if_let_expression"),Zn(["while","if","block"],[],{includeUnnamedChildren:!0})),Mn(["*.match_pattern![condition]"],["if"])),collectionItem:ho("array_expression","tuple_expression","tuple_type"),type:at(Mn(["let_declaration[type]","parameter[type]","field_declaration[type]","const_item[type]"],[":"]),Me(Ce("constrained_type_parameter[bounds]","where_predicate[bounds]"),Z8),Mn(["function_item[return_type]"],["->"]),Me(Q8),bt("struct_item","trait_item","impl_item","array_type[element]")),argumentOrParameter:ho("arguments","parameters","meta_arguments","type_parameters","ordered_field_declaration_list"),collectionKey:at(go(["field_initializer[name]","field_pattern[name]"],[":"])),name:at(bt("let_declaration.identifier!","parameter.identifier!","function_item[name]","struct_item[name]","enum_item[name]","enum_variant[name]","trait_item[name]","const_item[name]","meta_item.identifier!","let_declaration[pattern]","constrained_type_parameter[left]","where_predicate[left]","field_declaration[name]"),go(["field_initializer[name]","field_pattern[name]"],[":"])),value:at(Mn(["let_declaration[value]"],["="]),Mn(["field_initializer[value]","field_pattern[pattern]"],[":"]),bt("meta_item[value]","const_item[value]"),Me(Y8)),attribute:go(["mutable_specifier","attribute_item"]),branch:at(bt("match_arm"),Me(Ce("else_clause"),hD("if_expression")),Me(Ce("if_expression"),rv()))},yD=cn(X8);var J8={argumentOrParameter:ho("arguments","parameters","class_parameters","bindings"),branch:Me(Ce("case_clause"),Zn([],[],{includeUnnamedChildren:!0})),type:Mn(["upper_bound[type]","lower_bound[type]","view_bound[type]","context_bound[type]","val_definition[type]","val_declaration[type]","var_definition[type]","var_declaration[type]","type_definition","extends_clause[type]","class_parameter[type]","parameter[type]","function_definition[return_type]","typed_pattern[type]","binding[type]"],[":"]),value:Mn(["*[value]","*[default_value]","type_definition[type]"],["="]),condition:Na("*[condition]")},xD=cn(J8);var e7=["apply_statement","at_rule","charset_statement","debug_statement","each_statement","error_statement","for_statement","forward_statement","function_statement","if_statement","import_statement","include_statement","keyframes_statement","media_statement","mixin_statement","namespace_statement","placeholder","rule_set","supports_statement","use_statement","warn_statement","while_statement"];function SD(t){return[",","(",")"].includes(t.type)||vD(t)}function vD(t){return t.type==="plain_value"&&t.text==="at"}function TD(t){return e=>{(vD(e)||e.type===",")&&(e=e.previousSibling);let r=t(e);for(;r&&!SD(r);)e=r,r=t(r);return e}}function t7(t,e){return e.type!=="declaration"?null:e.descendantsOfType("unit").map(r=>({node:r,selection:Qn(t.editor,r)}))}var r7={condition:Na("condition"),statement:at(bt(...e7),Me(Ce("attribute_selector"),Zn([],["attribute_name","string_value"]))),argumentOrParameter:at(Me(Ce("arguments.*!","parameters.*!"),xl(t=>SD(t),", ",TD(t=>t.previousSibling),TD(t=>t.nextSibling)))),collectionKey:go(["declaration.property_name!"],[":"]),value:at(Me(Ce("declaration"),Zn(["property_name","variable_name"])),Me(Ce("include_statement","namespace_statement"),Zn()),bt("return_statement.*!","import_statement.*!","attribute_selector.plain_value!","attribute_selector.string_value!","parameter.default_value!")),unit:at(bt("integer_value.unit!"),t7)},nv=cn(r7);function bD(t,e,r){let n=El[t];if(n==null)throw new Tu(t);let i=n[e];return i==null?nD(e):r?n7(i):i}var El={clojure:lD,css:nv,latex:dD,ruby:mD,rust:yD,scala:xD,scss:nv};function n7(t){return(e,r)=>{let n=t(e,r);return n==null?null:(n=n.flatMap(i=>i7(i.node,sd(e,i.selection.selection),t)),n.length>0?n:null)}}function i7(t,e,r){let n=t.parent;for(;n!=null;){let i=n.namedChildren.flatMap(o=>r(e,o)).filter(o=>o!=null);if(i.length>0)return i;n=n.parent}return[]}var La=class{constructor(e,r){this.languageDefinitions=e;this.modifier=r}run(e){let r=bD(e.editor.document.languageId,this.modifier.scopeType.type,this.modifier.type==="everyScope"),n=this.languageDefinitions.getNodeAtLocation(e.editor.document,e.contentRange);if(n==null)throw new Et(this.modifier.scopeType.type);let i=o7(n,r,{editor:e.editor,selection:new Te(e.contentRange.start,e.contentRange.end)});if(i==null)throw new Et(this.modifier.scopeType.type);return i.map(o=>{let{containingListDelimiter:a,leadingDelimiterRange:l,trailingDelimiterRange:p,removalRange:u,interiorRange:d}=o.context;if(u!=null&&(l!=null||p!=null))throw Error("Removal range is mutually exclusive with leading or trailing delimiter range");let{editor:h,selection:g}=o.selection;return new so({scopeTypeType:this.modifier.scopeType.type,editor:h,isReversed:e.isReversed,contentRange:g,removalRange:u,interiorRange:d,insertionDelimiter:a,leadingDelimiterRange:l,trailingDelimiterRange:p})})}};function o7(t,e,r){let n=t;for(;n!=null;){let i=e(r,n);if(i!=null)return i.map(o=>o.selection).map(o=>({selection:sd(r,o.selection),context:o.context}));n=n.parent}return null}function _D(t,e){let r=ED(t,e);for(;r!=null;){if(s7(t,e,r))return{range:r.getInterior()[0].contentRange,boundary:iv(r)};r=a7(t,e.editor,r)}return{range:gl(e.editor,e.contentRange)}}function s7(t,e,r){let{contentRange:n}=e;if(n.isEmpty){let[o,a]=iv(r),l=n.start;if(l.isEqual(o.start)||l.isEqual(a.end))return!1;let p=e.editor.document.lineAt(l);if(l.isEqual(o.end)&&wD(p,l.character)||l.isEqual(a.start)&&wD(p,l.character-1))return!1}else{if(n.isRangeEqual(r.contentRange))return!1;let[o,a]=iv(r);if(n.isRangeEqual(o)||n.isRangeEqual(a))return!1}let i=c7(t,r);return!(i!=null&&r.contentRange.start.isBeforeOrEqual(i.contentRange.start))}function iv(t){return t.getBoundary().map(e=>e.contentRange)}function wD(t,e){return e<t.range.start.character||e>=t.range.end.character||t.text[e].trim()===""}function a7(t,e,r){let n=e.document.offsetAt(r.contentRange.start);if(n===0)return;let i=e.document.positionAt(n-1);return ED(t,new He({editor:e,contentRange:new W(i,i),isReversed:!1}))}function ED(t,e){return RD(t,e,{type:"surroundingPair",delimiter:"collectionBoundary",requireStrongContainment:!0})}function c7(t,e){return RD(t,e,{type:"surroundingPair",delimiter:"string",requireStrongContainment:!0})}function RD(t,e,r){let n=t.create({type:"containingScope",scopeType:r}),i=(()=>{try{return n.run(e)}catch{return[]}})();if(i.length>1)throw Error("Expected only one surrounding pair target");return i[0]}function kD(t,e,r){let{document:n}=t,o=n.getText(e).split(/([,(){}<>[\]"'`])|(?<!\\)(\\"|\\'|\\`)/g).filter(u=>u!=null&&u.length>0),a=l7(o),l=[],p=n.offsetAt(e.start);return a.forEach(u=>{if(u.trim().length===0){p+=u.length;return}if(u===PD)l.push({type:"separator",range:new W(n.positionAt(p),n.positionAt(p+u.length))});else{let d=p+(u.length-u.trimStart().length);l.push({type:"item",range:new W(n.positionAt(d),n.positionAt(d+u.trim().length))})}p+=u.length}),r!=null?[{type:"boundary",range:r[0]},...l,{type:"boundary",range:r[1]}]:l}function l7(t){let e=[],r=0,n=null,i=null,o=-1;return t.forEach((a,l)=>{r>0?a===i?--r:a===n&&++r:(ov[a]!=null&&t.indexOf(ov[a],l+1)>-1&&(n=a,i=ov[a],r=1),o<0&&(o=l));let p=a===PD&&r===0;if(p||l===t.length-1){let u=p?l:l+1;e.push(t.slice(o,u).join("")),o=-1,p&&e.push(a)}}),e}var PD=",",ov={"(":")","{":"}","<":">","[":"]",'"':'"',"'":"'","`":"`"};var Nm=class{constructor(e,r,n){this.languageDefinitions=e;this.modifierStageFactory=r;this.modifier=n}run(e){try{return new La(this.languageDefinitions,this.modifier).run(e)}catch{}return this.modifier.type==="everyScope"?this.getEveryTarget(this.modifierStageFactory,e):[this.getSingleTarget(this.modifierStageFactory,e)]}getEveryTarget(e,r){let n=AD(e,r),i=r.hasExplicitRange?MD(r,n):n;if(i.length===0)throw new Et(this.modifier.scopeType.type);return i.map(o=>this.itemInfoToTarget(r,o))}getSingleTarget(e,r){let n=AD(e,r),i=MD(r,n);if(i.length===0)throw new Et(this.modifier.scopeType.type);let o=i[0],a=i[i.length-1],l={contentRange:o.contentRange.union(a.contentRange),domain:o.domain.union(a.domain),leadingDelimiterRange:o.leadingDelimiterRange,trailingDelimiterRange:a.trailingDelimiterRange},p=l.leadingDelimiterRange!=null&&l.trailingDelimiterRange!=null&&rS(r.editor,l.leadingDelimiterRange)>rS(r.editor,l.trailingDelimiterRange)?l.contentRange.union(l.leadingDelimiterRange):void 0;return this.itemInfoToTarget(r,l,p)}itemInfoToTarget(e,r,n){let i=p7(r.leadingDelimiterRange,r.trailingDelimiterRange);return new so({scopeTypeType:this.modifier.scopeType.type,editor:e.editor,isReversed:e.isReversed,contentRange:r.contentRange,insertionDelimiter:i,leadingDelimiterRange:r.leadingDelimiterRange,trailingDelimiterRange:r.trailingDelimiterRange,removalRange:n})}};function p7(t,e){return t!=null&&!t.isSingleLine||e!=null&&!e.isSingleLine?`,
`:", "}function MD(t,e){return e.filter(r=>r.domain.intersection(t.contentRange)!=null)}function AD(t,e){let{range:r,boundary:n}=_D(t,e);return u7(e.editor,r,n)}function u7(t,e,r){let n=kD(t,e,r),i=[];return n.forEach((o,a)=>{if(o.type==="separator"||o.type==="boundary")return;let l=(()=>{if(n[a-2]?.type==="item")return new W(n[a-2].range.end,o.range.start);if(n[a-1]?.type==="separator")return new W(n[a-1].range.start,o.range.start)})(),p=(()=>{if(n[a+2]?.type==="item")return new W(o.range.end,n[a+2].range.start);if(n[a+1]?.type==="separator")return new W(o.range.end,n[a+1].range.end)})(),u=n[a-1]?.type==="boundary"||n[a-1]?.type==="separator"?n[a-1].range.end:o.range.start,d=n[a+1]?.type==="boundary"||n[a+1]?.type==="separator"?n[a+1].range.start:o.range.end;i.push({contentRange:o.range,leadingDelimiterRange:l,trailingDelimiterRange:p,domain:new W(u,d)})}),i}var Ua={type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:{type:"line"}}},sv={type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:{type:"token"}}};var Lm=class extends Error{constructor(e){super(`Target has no ${e} delimiter.`),this.name="NoDelimiterError"}},Um=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){return this.modifierStageFactory.create(sv).run(e).map(r=>{let n=r.getLeadingDelimiterTarget();if(n==null)throw new Lm("leading");return n})}},Vm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){return this.modifierStageFactory.create(sv).run(e).map(r=>{let n=r.getTrailingDelimiterTarget();if(n==null)throw new Lm("trailing");return n})}};function Bm(t,e,r,n){return KS(e,r,n),r===n?e[r]:Ia(t,e[r],e[n],!0,!0)}function Hm(t,e,r){return t.create({type:"everyScope",scopeType:r}).run(e)}var Wm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=Hm(this.modifierStageFactory,e,this.modifier.scopeType),n=this.modifier.start+(this.modifier.start<0?r.length:0),i=n+this.modifier.length-1;return this.modifier.isEvery?XA(r,n,i):[Bm(e.isReversed,r,n,i)]}};var $m=class{run(e){let r={editor:e.editor,isReversed:e.isReversed,contentRange:this.getContentRange(e.contentRange)};return[e.isRaw?new oo(r):new He({...r,isToken:!1})]}},qm=class extends $m{getContentRange(e){return e.start.toEmptyRange()}},jm=class extends $m{getContentRange(e){return e.end.toEmptyRange()}};var zm=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let{scopeType:r}=this.modifier,n=new Fa(this.modifierStageFactory,this.scopeHandlerFactory,{type:"containingScope",scopeType:r});try{return n.run(e)}catch(a){if(!(a instanceof Et))throw a}let i=this.scopeHandlerFactory.create(this.modifier.scopeType,e.editor.document.languageId);if(i==null)throw Error(`Couldn't create scope handler for: ${r.type}`);let o=f7(e,i);if(o==null)throw Error(`No scopes found for scope type: ${r.type}`);return o}};function f7(t,e){let r=e.generateScopes(t.editor,t.contentRange.start,"backward"),n=e.generateScopes(t.editor,t.contentRange.end,"forward"),{active:i}=t.contentSelection,o=DD(r,i),a=DD(n,i),l=o.distance<a.distance?o.scope:a.scope;return l?.getTargets(t.isReversed)}function DD(t,e){let r,n=1/0;for(let i of t){let o=Math.min(ID(e,i.domain.start),ID(e,i.domain.end));if(o<n)r=i,n=o;else break}return{scope:r,distance:n}}function ID(t,e){return Math.abs(t.line-e.line)*1e4+Math.abs(t.character-e.character)}var Gm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=this.modifierStageFactory.create(this.modifier.anchor),n=this.modifierStageFactory.create(this.modifier.active),i=r.run(e),o=n.run(e);if(i.length!==1||o.length!==1)throw new Error("Expected single anchor and active target");return[mo(i[0],o[0],this.modifier.excludeAnchor,this.modifier.excludeActive)]}};var Km=class{constructor(e){this.modifier=e}run(e){return[new oo({editor:e.editor,contentRange:e.contentRange,isReversed:e.isReversed})]}};var Qm=class extends Error{constructor(e,r,n){super(`Requested ${e} ${n}s, but ${r} are already selected.`),this.name="TooFewScopesError"}};function FD(t,e,r){let n=Hm(t,g7(r),e.scopeType),i=h7(r.contentRange,n);return d7(e,r,n,i)}function d7(t,e,r,n){let i=t.direction==="forward",o=m7(t,e.contentRange,r,i,n),a=i?o+t.length-1:o-t.length+1,l=Math.min(o,a),p=Math.max(o,a);return[Bm(e.isReversed,r,l,p)]}function m7(t,e,r,n,i){let o=t.offset===0;if(i==null){let p=n?r.findIndex(u=>u.contentRange.start.isAfter(e.start)):Ic(r,u=>u.contentRange.start.isBefore(e.start));if(p===-1)throw new Pi;return o?p:n?p+t.offset-1:p-t.offset+1}let a=i.start,l=i.end;if(o){let p=l-a+1;if(p>t.length)throw new Qm(t.length,p,t.scopeType.type);return n?a:l}return n?l+t.offset:a-t.offset}function h7(t,e){let r=e.map((i,o)=>({index:o,intersection:i.contentRange.intersection(t)})).filter(i=>i.intersection!=null);if(t.isEmpty){if(r.length===0)return;let i=r.at(-1).index;return{start:i,end:i}}let n=r.filter(i=>!i.intersection.isEmpty).map(i=>i.index);if(n.length!==0)return{start:n[0],end:n.at(-1)}}function g7(t){return new kt({editor:t.editor,isReversed:t.isReversed,contentRange:t.contentRange,hasExplicitRange:!1})}var Zm=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let r=this.scopeHandlerFactory.create(this.modifier.scopeType,e.editor.document.languageId);if(r==null)return FD(this.modifierStageFactory,this.modifier,e);let n=Array.from(this.modifier.offset===0?y7(r,e,this.modifier):x7(r,e,this.modifier));if(n.length<this.modifier.length)throw new Pi;let{isReversed:i}=e;return this.modifier.isEvery?n.flatMap(o=>o.getTargets(i)):wm(i,n[0],n[n.length-1])}};function y7(t,e,r){let{editor:n,contentRange:i}=e,{length:o,direction:a}=r,l=_m(t,n,a==="forward"?i.start:i.end,a)?.domain;if(l==null)throw new Et(r.scopeType.type);return hl(o,t.generateScopes(n,a==="forward"?l.start:l.end,a,{skipAncestorScopes:!0}))}function x7(t,e,r){let{editor:n,contentRange:i}=e,{length:o,direction:a,offset:l}=r,p=a==="forward"?i.end:i.start,u=i.isEmpty?"disallowed":"disallowedIfStrict";return $M(t.generateScopes(n,p,a,{containment:u,skipAncestorScopes:!0}),l-1,l+o-1)}var Ym=class{constructor(e){this.modifier=e}run(e){return e.editor.visibleRanges.map(r=>new He({editor:e.editor,isReversed:e.isReversed,contentRange:r}))}};var Xm=class{constructor(e){this.modifier=e}run(e){if(this.modifier.type==="everyScope")throw new Error(`Every ${this.modifier.type} not yet implemented`);return[new ud({editor:e.editor,isReversed:e.isReversed,contentRange:e.contentRange})]}};var Va=class{constructor(e,r,n){this.languageDefinitions=e;this.storedTargets=r;this.scopeHandlerFactory=n;this.create=this.create.bind(this)}create(e){switch(e.type){case"startOf":return new qm;case"endOf":return new jm;case"extendThroughStartOf":case"extendThroughEndOf":return new Dm(this,e);case"toRawSelection":return new Km(e);case"interiorOnly":return new Im(this,e);case"excludeInterior":return new Fm(this,e);case"leading":return new Um(this,e);case"trailing":return new Vm(this,e);case"visible":return new Ym(e);case"containingScope":return new Fa(this,this.scopeHandlerFactory,e);case"preferredScope":return new zm(this,this.scopeHandlerFactory,e);case"everyScope":return e.scopeType.type==="instance"?new Ca(this,this.storedTargets,e):new Rm(this,this.scopeHandlerFactory,e);case"ordinalScope":return e.scopeType.type==="instance"?new Ca(this,this.storedTargets,e):new Wm(this,e);case"relativeScope":return e.scopeType.type==="instance"?new Ca(this,this.storedTargets,e):new Zm(this,this.scopeHandlerFactory,e);case"keepContentFilter":return new km(e);case"keepEmptyFilter":return new Pm(e);case"cascading":return new vm(this,e);case"modifyIfUntyped":return new Aa(this,e);case"range":return new Gm(this,e);case"inferPreviousMark":throw Error(`Unexpected modifier '${e.type}'; it should have been removed during inference`)}}getLegacyScopeStage(e){switch(e.scopeType.type){case"notebookCell":return new Xm(e);case"collectionItem":return new Nm(this.languageDefinitions,this,e);default:return new La(this.languageDefinitions,e)}}};async function CD(t,e,r){let n=t.registerReplaceEditList(e.document,r.filter(o=>o.isReplace)),i=await e.edit(r);return n(),i}async function Fe({rangeUpdater:t,editor:e,selections:r,preserveCursorSelections:n,...i}){let o=Ti(r),a=o.map(u=>{let d=r[u],h=T7(d);return OD(e.document,h.selections,h.behavior)});n||a.push(OD(e.document,e.selections,1));let l=await("edits"in i?b7(t,e,i.edits,a):ND(t,i.callback,e.document,a));return n||await e.setSelections(l.pop()),Object.fromEntries(o.map((u,d)=>[u,l[d]]))}function OD(t,e,r){return e.map(n=>S7(t,n,n instanceof Te?!n.isReversed:!0,r))}function T7(t){return"selections"in t?t:{selections:t,behavior:1}}function S7(t,e,r,n){return{range:e,isForward:r,expansionBehavior:{start:{type:n===1||n===3?"closed":"open"},end:{type:n===1||n===2?"closed":"open"}},offsets:{start:t.offsetAt(e.start),end:t.offsetAt(e.end)},text:t.getText(e)}}function v7(t){return t.map(e=>e.map(({range:{start:r,end:n},isForward:i})=>i?new Te(r,n):new Te(n,r)))}async function ND(t,e,r,n){let i=t.registerRangeInfoList(r,Ge(n));return await e(),i(),v7(n)}async function b7(t,e,r,n){return await ND(t,async()=>{if(!await CD(t,e,r))throw new Error("Could not apply edits")},e.document,n)}function Tr(t){if(t.length===0)throw new Error("Require at least one target with this action");let e=t.map(r=>r.editor);if(new Set(e).size>1)throw new Error("Can only have one editor with this action");return e[0]}function Sr(t){if(t.length!==1)throw new Error("Can only have one target with this action");return t[0]}async function Mi(t,e,r){return Promise.all(av(t,e).map(([n,i])=>r(n,i)))}async function tt(t,e){return Mi(t,r=>r.editor,e)}async function LD(t,e){let r=av(t,i=>i.editor),n=[];for(let[i,o]of r)n.push(await e(i,o));return n}function UD(t){return av(t,e=>e.editor)}function av(t,e){let n=Xc(t,i=>e(i).document.uri);return Array.from(n.values(),i=>[e(i[0]),i])}function Jm(t){return t.contentRange}function ln(t,e){return e!=null?ut(t,e).map(([n,i])=>({editor:n.editor,selection:n?.isReversed?new Te(i.end,i.start):new Te(i.start,i.end)})):t.map(n=>({editor:n.editor,selection:n.contentSelection}))}function VD(t){let e=t.contentRange;return t.isLine?tn(e):Ft(e)}function Oe(t,e,r,n=Jm){return t.flashRanges(e.map(i=>{let o=n(i);return o==null?null:{editor:i.editor,range:i.isLine?tn(o):Ft(o),style:r}}).filter(i=>i!=null))}var eh=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e){return await Oe(D(),e,"pendingModification0"),{thatSelections:Ge(await tt(e,async(n,i)=>{let o=i.map(({contentRange:u})=>u),a=w7(n,o),l=D().getEditableTextEditor(n),{contentRanges:p}=await Fe({rangeUpdater:this.rangeUpdater,editor:l,edits:a,selections:{contentRanges:o}});return ut(i,p).map(([u,d])=>({editor:u.editor,selection:d.toSelection(u.isReversed)}))}))}}};function w7(t,e){let{document:r}=t,n=[];for(let i of e){let o=i.start,a=r.lineAt(o),l=a.text.slice(0,a.rangeTrimmed?.start?.character??a.range.start.character),p=a.text.slice(0,o.character).search(/\s+$/),u=p>-1?new W(new ae(a.lineNumber,p),o):o.toEmptyRange();n.push({range:u,text:`
`+l,isReplace:!u.isEmpty})}return n}function th(t){return t.length<2?t:UD(t).flatMap(([e,r])=>{if(r.length<2)return r;let n=[...r];n.sort((o,a)=>o.contentRange.start.compareTo(a.contentRange.start));let i=!0;for(;i;)[n,i]=_7(n);return n})}function _7(t){if(t.length<2)return[t,!1];let e=[],r=[];return t.forEach(n=>{r.length&&!E7(r[r.length-1],n)?(e.push(BD(r)),r=[n]):r.push(n)}),e.push(BD(r)),[e,e.length!==t.length]}function BD(t){if(t.length===1)return t[0];let e=t[0],r=t[t.length-1];return mo(e,r)}function E7(t,e){return!!t.getRemovalRange().intersection(e.getRemovalRange())}var Rl=class{constructor(e,r){this.rangeUpdater=e;this.type=r}async decorateTargets(e,r){await Promise.all([Oe(D(),e,this.decoration.sourceStyle,this.decoration.getSourceRangeCallback),Oe(D(),r,this.decoration.destinationStyle)])}getEditsBringMove(e,r){let n=[],i=[],o=e.length!==r.length&&r.length===1;return e.forEach((a,l)=>{let p=r[l];if((a==null||p==null)&&!o)throw new Error("Targets must have same number of args");if(p!=null){let u;o?u=e.map((d,h)=>{let g=d.contentText,x=(p.isRaw?null:p.insertionDelimiter)??(d.isRaw?null:d.insertionDelimiter);return h>0&&x!=null?x+g:g}).join(""):u=a.contentText,i.push({edit:p.constructChangeEdit(u),editor:p.editor,originalTarget:p.target,isSource:!1})}else p=r[0];n.includes(a)||(n.push(a),this.type==="bring"&&i.push({edit:a.toDestination("to").constructChangeEdit(p.target.contentText),editor:a.editor,originalTarget:a,isSource:!0}))}),this.type==="move"&&th(n).forEach(a=>{i.push({edit:a.constructRemovalEdit(),editor:a.editor,originalTarget:a,isSource:!0})}),i}async performEditsAndComputeThatMark(e){return Ge(await Mi(e,r=>r.editor,async(r,n)=>{let i=this.type!=="bring"?n:n.filter(({isSource:x})=>!x),o=this.type==="swap"?[]:n.filter(({isSource:x})=>x),a=this.type==="swap"?n:n.filter(({isSource:x})=>!x),l=o.map(({edit:x})=>x.range),p=a.map(({edit:x})=>x.range),u=D().getEditableTextEditor(r),{sourceEditRanges:d,destinationEditRanges:h}=await Fe({rangeUpdater:this.rangeUpdater,editor:u,edits:i.map(({edit:x})=>x),selections:{sourceEditRanges:l,destinationEditRanges:{selections:p,behavior:0}}}),g=[...this.getMarks(o,d),...this.getMarks(a,h)];return g.sort((x,b)=>n.findIndex(w=>w.originalTarget===x.target)-n.findIndex(w=>w.originalTarget===b.target)),g}))}getMarks(e,r){return e.map((n,i)=>{let o=r[i],a=n.edit.updateRange(o),l=n.originalTarget;return{editor:n.editor,selection:a.toSelection(l.isReversed),isSource:n.isSource,target:l}})}async decorateThatMark(e){let r=n=>e.find(i=>i.target===n).selection;return Promise.all([Oe(D(),e.filter(({isSource:n})=>n).map(({target:n})=>n),this.decoration.sourceStyle,r),Oe(D(),e.filter(({isSource:n})=>!n).map(({target:n})=>n),this.decoration.destinationStyle,r)])}calculateMarksBringMove(e){return{thatMark:e.filter(({isSource:r})=>!r),sourceMark:e.filter(({isSource:r})=>r)}}};function HD(t,e){return t.length===1?Array(e.length).fill(t[0]):t}var rh=class extends Rl{constructor(r){super(r,"bring");this.decoration={sourceStyle:"referenced",destinationStyle:"pendingModification0",getSourceRangeCallback:Jm};this.run=this.run.bind(this)}async run(r,n){r=HD(r,n),await this.decorateTargets(r,n.map(p=>p.target));let i=this.getEditsBringMove(r,n),o=await this.performEditsAndComputeThatMark(i),{thatMark:a,sourceMark:l}=this.calculateMarksBringMove(o);return await this.decorateThatMark(a),{thatSelections:a,sourceSelections:l}}},nh=class extends Rl{constructor(r){super(r,"move");this.decoration={sourceStyle:"pendingDelete",destinationStyle:"pendingModification0",getSourceRangeCallback:R7};this.run=this.run.bind(this)}async run(r,n){r=HD(r,n),await this.decorateTargets(r,n.map(p=>p.target));let i=this.getEditsBringMove(r,n),o=await this.performEditsAndComputeThatMark(i),{thatMark:a,sourceMark:l}=this.calculateMarksBringMove(o);return await this.decorateThatMark(a),{thatSelections:a,sourceSelections:l}}},ih=class extends Rl{constructor(r){super(r,"swap");this.decoration={sourceStyle:"pendingModification1",destinationStyle:"pendingModification0",getSourceRangeCallback:Jm};this.run=this.run.bind(this)}async run(r,n){await this.decorateTargets(r,n);let i=this.getEditsSwap(r,n),o=await this.performEditsAndComputeThatMark(i);return await this.decorateThatMark(o),{thatSelections:o,sourceSelections:[]}}getEditsSwap(r,n){let i=[];return r.forEach((o,a)=>{let l=n[a];if(o==null||l==null)throw new Error("Targets must have same number of args");i.push({edit:l.toDestination("to").constructChangeEdit(o.contentText),editor:l.editor,originalTarget:l,isSource:!1}),i.push({edit:o.toDestination("to").constructChangeEdit(l.contentText),editor:o.editor,originalTarget:o,isSource:!0})}),i}};function R7(t){return t.getRemovalHighlightRange()}var kl=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e,r){Sr(e);let{returnValue:n}=await this.actions.getText.run(e,{showDecorations:!1}),{thatSelections:i}=await this.actions.wrapWithPairedDelimiter.run(r,n[0]+"(",")");return{thatSelections:i}}};var Pl=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){let r=Tr(e),n=e.map(o=>new He({editor:o.editor,isReversed:o.isReversed,contentRange:o.contentRange})),{thatTargets:i}=await this.actions.remove.run(n);return i!=null&&await D().getEditableTextEditor(r).setSelections(i.map(({contentSelection:o})=>o),{focusEditor:!0}),{thatTargets:i}}};var Ba=t=>new kt({editor:t.editor,isReversed:t.selection.isReversed,contentRange:t.selection,hasExplicitRange:!0});var Ha=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e,r){r.showDecorations&&await Oe(D(),e,"referenced"),r.ensureSingleEditor&&Tr(e),r.ensureSingleTarget&&Sr(e);let n=D().activeEditableTextEditor,i=r.setSelection?LD:tt,o=Ge(await i(e,(a,l)=>this.runForEditor(r,a,l)));return r.setSelection&&r.restoreSelection&&n!=null&&!n.isActive&&await n.focus(),{thatTargets:o}}async runForEditor(e,r,n){let i=D().getEditableTextEditor(r),o=r.selections,a=r.document.version,l=n.map(d=>d.contentSelection);e.setSelection&&await i.setSelections(l,{focusEditor:!0,revealRange:!1});let{originalSelections:p,targetSelections:u}=await Fe({rangeUpdater:this.rangeUpdater,editor:i,callback:()=>e.callback(i,n),preserveCursorSelections:!0,selections:{originalSelections:o,targetSelections:l}});return e.setSelection&&e.restoreSelection&&await i.setSelections(p),r.document.version===a?n:u.map(d=>Ba({editor:r,selection:d}))}};var jt=class{constructor(e){this.ensureSingleEditor=!1;this.ensureSingleTarget=!1;this.restoreSelection=!0;this.showDecorations=!0;this.callbackAction=new Ha(e),this.run=this.run.bind(this)}async run(e,{showDecorations:r}={}){let n=D().capabilities.commands[this.command];if(n==null)throw Error(`Action ${this.command} is not supported by your ide`);let{acceptsLocation:i}=n;return this.callbackAction.run(e,{callback:(o,a)=>k7(o,i?a.map(l=>l.contentRange):void 0,this.command),setSelection:!i,ensureSingleEditor:this.ensureSingleEditor,ensureSingleTarget:this.ensureSingleTarget,restoreSelection:this.restoreSelection,showDecorations:r??this.showDecorations})}},oh=class extends jt{constructor(){super(...arguments);this.command="clipboardCopy";this.ensureSingleEditor=!0}},sh=class extends jt{constructor(){super(...arguments);this.command="toggleLineComment"}},ah=class extends jt{constructor(){super(...arguments);this.command="indentLine"}},ch=class extends jt{constructor(){super(...arguments);this.command="outdentLine"}},lh=class extends jt{constructor(){super(...arguments);this.command="fold"}},ph=class extends jt{constructor(){super(...arguments);this.command="unfold"}},uh=class extends jt{constructor(){super(...arguments);this.command="rename";this.ensureSingleTarget=!0}},fh=class extends jt{constructor(){super(...arguments);this.command="showReferences";this.ensureSingleTarget=!0}},dh=class extends jt{constructor(){super(...arguments);this.command="quickFix";this.ensureSingleTarget=!0}},mh=class extends jt{constructor(){super(...arguments);this.command="revealDefinition";this.ensureSingleTarget=!0;this.restoreSelection=!1}},hh=class extends jt{constructor(){super(...arguments);this.command="revealTypeDefinition";this.ensureSingleTarget=!0;this.restoreSelection=!1}},gh=class extends jt{constructor(){super(...arguments);this.command="showHover";this.ensureSingleTarget=!0;this.restoreSelection=!1}},yh=class extends jt{constructor(){super(...arguments);this.command="showDebugHover";this.ensureSingleTarget=!0;this.restoreSelection=!1}},xh=class extends jt{constructor(){super(...arguments);this.command="extractVariable";this.ensureSingleTarget=!0;this.restoreSelection=!1}};function k7(t,e,r){switch(r){case"toggleLineComment":return t.toggleLineComment(e);case"indentLine":return t.indentLine(e);case"outdentLine":return t.outdentLine(e);case"clipboardCopy":return t.clipboardCopy(e);case"fold":return t.fold(e);case"unfold":return t.unfold(e);case"insertLineAfter":return t.insertLineAfter(e);case"rename":return t.rename(e?.[0]);case"showReferences":return t.showReferences(e?.[0]);case"quickFix":return t.quickFix(e?.[0]);case"revealDefinition":return t.revealDefinition(e?.[0]);case"revealTypeDefinition":return t.revealTypeDefinition(e?.[0]);case"showHover":return t.showHover(e?.[0]);case"showDebugHover":return t.showDebugHover(e?.[0]);case"extractVariable":return t.extractVariable(e?.[0]);case"highlight":throw Error("Highlight command not supported as simple action")}}var Th=class{constructor(e,r){this.actions=e;this.rangeUpdater=r;this.run=this.run.bind(this)}async run(e,r={showDecorations:!0}){if(D().capabilities.commands.clipboardCopy!=null)return new oh(this.rangeUpdater).run(e,r);r.showDecorations&&await Oe(D(),e,"referenced",i=>i.contentRange);let n=e.map(i=>i.contentText).join(`
`);return await D().clipboard.writeText(n),{thatTargets:e}}};var Sh=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){await D().flashRanges(e.flatMap(i=>{let{editor:o,contentRange:a}=i,l=i.getRemovalHighlightRange();return i.isLine?[{editor:o,range:Ft(a),style:"referenced"},{editor:o,range:tn(l),style:"pendingDelete"}]:[{editor:o,range:Ft(a),style:"referenced"},...P7(a,l).map(p=>({editor:o,range:Ft(p),style:"pendingDelete"}))]}));let r={showDecorations:!1};await this.actions.copyToClipboard.run(e,r);let{thatTargets:n}=await this.actions.remove.run(e,r);return{thatTargets:n}}};function P7(t,e){let{start:r,end:n}=t,{start:i,end:o}=e,a=[];return i.isBefore(r)&&a.push(new W(i,r)),o.isAfter(n)&&a.push(new W(n,o)),a}var Ml=class{constructor(){this.run=this.run.bind(this)}async run(e){return await tt(e,async(r,n)=>{let i=r.selections.filter(o=>!n.some(a=>{let l=a.contentRange.intersection(o);return l&&(!l.isEmpty||o.isEmpty)}));if(i.length===0)throw new cv;await D().getEditableTextEditor(r).setSelections(i)}),{thatTargets:e}}},cv=class extends Error{constructor(){super("Can't deselect every selection. At least one is required"),this.name="SelectionRequiredError"}};async function WD(t,e,r,n){let i=r.destinations.map((b,w)=>{if(n||b.getEditNewActionType()==="edit")return{destination:b,index:w}}).filter(b=>!!b);if(i.length===0)return r;let o=i.map(b=>b.destination.constructChangeEdit("")),a=r.cursorRanges.map((b,w)=>({range:b,index:w})).filter(({range:b})=>b!=null),l=a.map(({index:b})=>b),p=a.map(({range:b})=>b),u=o.map(b=>b.range),{thatRanges:d,cursorRanges:h,editRanges:g}=await Fe({rangeUpdater:t,editor:e,edits:o,preserveCursorSelections:!0,selections:{thatRanges:r.thatRanges,cursorRanges:p,editRanges:{selections:u,behavior:0}}}),x=[...r.cursorRanges];return ut(l,h).forEach(([b,w])=>{x[b]=w}),i.forEach((b,w)=>{let M=o[w].updateRange(g[w]);x[b.index]=M}),{destinations:r.destinations,thatRanges:d,cursorRanges:x}}async function $D({acceptsLocation:t},e,r,n){let i=n.destinations.map((h,g)=>{if(h.getEditNewActionType()==="insertLineAfter")return{destination:h,index:g}}).filter(h=>!!h);if(i.length===0)return n;let o=i.map(({destination:h})=>h.contentRange),a=n.destinations.map(({contentRange:h})=>h),l=async()=>{t?await r.insertLineAfter(o):(await r.setSelections(o.map(h=>h.toSelection(!1))),await r.focus(),await r.insertLineAfter())},{targetRanges:p,thatRanges:u}=await Fe({rangeUpdater:e,editor:r,callback:l,preserveCursorSelections:!0,selections:{targetRanges:a,thatRanges:n.thatRanges}}),d=[...n.cursorRanges];return i.forEach((h,g)=>{d[h.index]=r.selections[g]}),{destinations:n.destinations.map((h,g)=>h.withTarget(h.target.withContentRange(p[g]))),thatRanges:u,cursorRanges:d}}async function qD(t,e){let r=Sr(e),n=D().getEditableTextEditor(r.editor),i=r.insertionMode==="before";if(r.insertionMode==="to")throw Error(`Unsupported insertion mode '${r.insertionMode}' for notebookcapell`);await t.setSelection.run([r.target]);let o=l=>l;i?o=await n.editNewNotebookCellAbove():await n.editNewNotebookCellBelow();let a=ln([r.target.thatTarget]);return a[0].selection=o(a[0].selection),{thatSelections:a}}var vh=class{constructor(e,r){this.rangeUpdater=e;this.actions=r;this.run=this.run.bind(this)}async run(e){if(e.some(({target:l})=>l.isNotebookCell))return qD(this.actions,e);let r=D().getEditableTextEditor(Tr(e)),n={destinations:e,thatRanges:e.map(({target:l})=>l.thatTarget.contentRange),cursorRanges:new Array(e.length).fill(void 0)},i=D().capabilities.commands.insertLineAfter,o=i!=null;o&&(n=await $D(i,this.rangeUpdater,r,n)),n=await WD(this.rangeUpdater,r,n,!o);let a=n.destinations.map((l,p)=>n.cursorRanges[p].toSelection(l.target.isReversed));return await r.setSelections(a,{focusEditor:!0}),{thatSelections:ln(n.destinations.map(l=>l.target),n.thatRanges)}}};var bh=class{constructor(e,r){this.actions=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(Ua)]}run(e){return this.actions.editNew.run(e.map(r=>r.toDestination(this.insertionMode)))}},wh=class extends bh{constructor(){super(...arguments);this.insertionMode="before"}},_h=class extends bh{constructor(){super(...arguments);this.insertionMode="after"}};var Al=class{constructor(e){this.callbackAction=new Ha(e),this.run=this.run.bind(this)}async run(e,r,{commandArgs:n,ensureSingleEditor:i,ensureSingleTarget:o,restoreSelection:a,showDecorations:l}={}){let p=n??[];return this.callbackAction.run(e,{callback:()=>D().executeCommand(r,...p),setSelection:!0,ensureSingleEditor:i??!1,ensureSingleTarget:o??!1,restoreSelection:a??!0,showDecorations:l??!0})}};var Eh=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){Sr(e);let{returnValue:r,thatTargets:n}=await this.actions.getText.run(e),[i]=r,o;return i.length>200?(o=i.substring(0,200),Bc(D().messages,"truncatedSearchText","Search text is longer than 200 characters; truncating")):o=i,await this.find(o),{thatTargets:n}}},Rh=class extends Eh{find(e){return D().findInDocument(e)}},kh=class extends Eh{find(e){return D().findInWorkspace(e)}};var Wa=class{constructor(e){this.options=e;this.run=this.run.bind(this)}async run(e){let r=Sr(e);return await Oe(D(),e,"referenced"),await D().getEditableTextEditor(r.editor).openLink(r.contentRange,this.options),{thatSelections:ln(e)}}};function jD(t,e){let r=[],n=0,i=null,[o,...a]=t.split(/\r?\n/);return[{text:e+o,startIndex:e.length},...a.map(p=>({text:p,startIndex:0}))].forEach(({text:p,startIndex:u})=>{let d=p.match(/^\s*/)?.[0]??"",h=d.length;i!=null&&(d.length>i.length?n++:d.length<i.length&&n--),i=d;let g=Math.max(h,u),x=Jx("	",n),b=p.slice(g);r.push(x+b)}),r}function zD(t,e){let r=tT(e,o=>o.offsets.start),n="",i=0;for(let o of r)n+=t.slice(i,o.offsets.start)+o.text,i=o.offsets.end;return n+=t.slice(i),n}var Dl=class{constructor(){this.substitutions=[]}addSubstitution(e,r=!1){let n=M7(10);return this.substitutions.push({to:e,randomId:n,isQuoted:r}),n}makeSubstitutions(e){return this.substitutions.forEach(({to:r,randomId:n,isQuoted:i})=>{let o=i?`"${n}"`:n;e=e.split(o).join(r)}),e}};function M7(t){let e="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=r.length;for(let i=0;i<t;i++)e+=r.charAt(Math.floor(Math.random()*n));return e}var $a=class{constructor(e){this.snippets=e;this.run=this.run.bind(this)}async run(e,r){let n=Sr(e),i=n.editor;if(Oe(D(),e,"referenced"),r==null&&(r=await D().showInputBox({prompt:"Name of snippet",placeHolder:"helloWorld"})),r==null)return{};let o=1,a=i.document.offsetAt(n.contentRange.start),l=i.selections.filter(M=>n.contentRange.contains(M)).map((M,U)=>({offsets:{start:i.document.offsetAt(M.start)-a,end:i.document.offsetAt(M.end)-a},defaultName:`variable${U+1}`,placeholderIndex:o++})),p=new Dl,u=i.document.getText(new W(n.contentRange.start.with(void 0,0),n.contentRange.start)),d=i.document.getText(n.contentRange),h=zD(d,[...Jr(d,/\$|\\/g,M=>({offsets:{start:M.index,end:M.index+M[0].length},text:M[0]==="\\"?`\\${M[0]}`:`\\\\${M[0]}`})),...l.map(({offsets:M,defaultName:U,placeholderIndex:Z})=>({offsets:M,text:p.addSubstitution(["\\$","${",Z,":",U,"}"].join(""))}))]),g=jD(h,u),x=({placeholderIndex:M})=>{let U="$"+M,Z=p.addSubstitution("{$"+o+++"}",!0);return[U,Z]},b={[r]:{definitions:[{scope:{langIds:[i.document.languageId]},body:g}],description:"$"+o++,variables:l.length===0?void 0:Object.fromEntries(l.map(x))}},w=p.makeSubstitutions(JSON.stringify(b,null,2)),F=D().getEditableTextEditor(i);return D().runMode==="test"?await F.setSelections([i.document.range.toSelection(!1)]):await this.snippets.openNewSnippetFile(r),await F.insertSnippet(w),{thatSelections:e.map(({editor:M,contentSelection:U})=>({editor:M,selection:U}))}}};var Il=class{constructor(){this.run=this.run.bind(this)}async run(e){return{returnValue:e.map(({contentRange:r})=>({contentRange:r})),thatTargets:e}}};var Fl=class{constructor(){this.run=this.run.bind(this)}async run(e,{showDecorations:r=!0,ensureSingleTarget:n=!1}={}){return r&&await Oe(D(),e,"referenced"),n&&Sr(e),{returnValue:e.map(i=>i.contentText),thatTargets:e}}};var Cl=class{constructor(){this.run=this.run.bind(this)}async run(e,r){if(D().capabilities.commands.highlight==null)throw Error("The highlight action is not supported by your ide");return e.length===0?await Promise.all(D().visibleTextEditors.map(n=>D().setHighlightRanges(r,n,[]))):await tt(e,(n,i)=>D().setHighlightRanges(r,n,i.map(VD))),{thatTargets:e}}};var Ph=class{constructor(e,r,n){this.rangeUpdater=e;this.modifierStageFactory=r;this.isBefore=n;this.getFinalStages=()=>[this.modifierStageFactory.create(Ua)];this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e){let r=Ge(await tt(e,this.runForEditor));return await D().flashRanges(r.flatMap(n=>n.thatMark.map(i=>({editor:i.editor,range:Ft(i.selection),style:"justAdded"})))),{sourceSelections:r.flatMap(({sourceMark:n})=>n),thatSelections:r.flatMap(({thatMark:n})=>n)}}async runForEditor(e,r){let n=this.isBefore?"after":"before",i=r.flatMap(g=>g.toDestination(n).constructChangeEdit(g.contentText)),o=r.map(({contentSelection:g})=>g),a=i.map(({range:g})=>g),l=D().getEditableTextEditor(e),{contentSelections:p,editRanges:u}=await Fe({rangeUpdater:this.rangeUpdater,editor:l,edits:i,selections:{contentSelections:o,editRanges:{selections:a,behavior:0}}}),d=ut(i,u).map(([g,x])=>g.updateRange(x)),h=e.selections[0];return p.some(g=>g.intersection(h)!=null)&&await l.revealRange(h),{sourceMark:ln(r,d),thatMark:ln(r,p)}}},Mh=class extends Ph{constructor(e,r){super(e,r,!0)}},Ah=class extends Ph{constructor(e,r){super(e,r,!1)}};var Ol=class{constructor(e,r,n){this.rangeUpdater=e;this.insertAbove=r;this.insertBelow=n;this.run=this.run.bind(this)}getRanges(e){let r=e.flatMap(n=>{let i=[];return this.insertAbove&&i.push(n.contentRange.start.line),this.insertBelow&&i.push(n.contentRange.end.line+1),i});return r=[...new Set(r)],r.map(n=>new W(n,0,n,0))}getEdits(e){return e.map(r=>({range:r,text:`
`}))}async run(e){let r=Ge(await tt(e,async(i,o)=>{let a=this.getRanges(o),l=this.getEdits(a),p=o.map(g=>g.thatTarget.contentSelection),u=D().getEditableTextEditor(i),{contentSelections:d,ranges:h}=await Fe({rangeUpdater:this.rangeUpdater,editor:u,edits:l,selections:{contentSelections:p,ranges:a}});return{thatMark:d.map(g=>({editor:i,selection:g})),lineSelections:h.map((g,x)=>({editor:i,range:a[x].start.line<i.document.lineCount-1?new W(g.start.translate(-1,void 0),g.end.translate(-1,void 0)):g}))}}));return await D().flashRanges(r.flatMap(i=>i.lineSelections.map(({editor:o,range:a})=>({editor:o,range:tn(a),style:"justAdded"})))),{thatSelections:r.flatMap(i=>i.thatMark)}}},Dh=class extends Ol{constructor(e){super(e,!0,!0)}},Ih=class extends Ol{constructor(e){super(e,!0,!1)}},Fh=class extends Ol{constructor(e){super(e,!1,!0)}};var lv=class t{constructor(){this.value="";this.pos=0}static{this._table={36:0,58:1,44:2,123:3,125:4,92:5,47:6,124:7,43:11,45:12,63:13}}static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return e===95||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};let e=this.pos,r=0,n=this.value.charCodeAt(e),i;if(i=t._table[n],typeof i=="number")return this.pos+=1,{type:i,pos:e,len:1};if(t.isDigitCharacter(n)){i=8;do r+=1,n=this.value.charCodeAt(e+r);while(t.isDigitCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}if(t.isVariableCharacter(n)){i=9;do n=this.value.charCodeAt(e+ ++r);while(t.isVariableCharacter(n)||t.isDigitCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}i=10;do r+=1,n=this.value.charCodeAt(e+r);while(!isNaN(n)&&typeof t._table[n]>"u"&&!t.isDigitCharacter(n)&&!t.isVariableCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}},xo=class{constructor(){this._children=[]}appendChild(e){return e instanceof vr&&this._children[this._children.length-1]instanceof vr?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,r){let{parent:n}=e,i=n.children.indexOf(e),o=n.children.slice(0);o.splice(i,1,...r),n._children=o,function a(l,p){for(let u of l)u.parent=p,a(u.children,u)}(r,n)}get children(){return this._children}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof Nh)return e;e=e.parent}}toString(){return this.children.reduce((e,r)=>e+r.toString(),"")}len(){return 0}},vr=class t extends xo{constructor(r){super();this.value=r}static escape(r){return r.replace(/\$|}|\\/g,"\\$&")}toString(){return this.value}toTextmateString(){return t.escape(this.value)}len(){return this.value.length}clone(){return new t(this.value)}},Ch=class extends xo{},Ur=class t extends Ch{constructor(r){super();this.index=r}static compareByIndex(r,n){return r.index===n.index?0:r.isFinalTabstop?1:n.isFinalTabstop||r.index<n.index?-1:r.index>n.index?1:0}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof Oh?this._children[0]:void 0}toTextmateString(){let r="";return this.transform&&(r=this.transform.toTextmateString()),this.children.length===0&&!this.transform?`$${this.index}`:this.children.length===0?`\${${this.index}${r}}`:this.choice?`\${${this.index}|${this.choice.toTextmateString()}|${r}}`:`\${${this.index}:${this.children.map(n=>n.toTextmateString()).join("")}${r}}`}clone(){let r=new t(this.index);return this.transform&&(r.transform=this.transform.clone()),r._children=this.children.map(n=>n.clone()),r}},Oh=class t extends xo{constructor(){super(...arguments);this.options=[]}appendChild(r){return r instanceof vr&&(r.parent=this,this.options.push(r)),this}toString(){return this.options[0].value}toTextmateString(){return this.options.map(r=>r.value.replace(/\||,|\\/g,"\\$&")).join(",")}len(){return this.options[0].len()}clone(){let r=new t;return this.options.forEach(r.appendChild,r),r}},pv=class t extends xo{constructor(){super(...arguments);this.regexp=new RegExp("")}resolve(r){let n=this,i=!1,o=r.replace(this.regexp,function(){return i=!0,n._replace(Array.prototype.slice.call(arguments,0,-2))});return!i&&this._children.some(a=>a instanceof An&&!!a.elseValue)&&(o=this._replace([])),o}_replace(r){let n="";for(let i of this._children)if(i instanceof An){let o=r[i.index]||"";o=i.resolve(o),n+=o}else n+=i.toString();return n}toString(){return""}toTextmateString(){return`/${this.regexp.source}/${this.children.map(r=>r.toTextmateString())}/${(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")}`}clone(){let r=new t;return r.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),r._children=this.children.map(n=>n.clone()),r}},An=class t extends xo{constructor(r,n,i,o){super();this.index=r;this.shorthandName=n;this.ifValue=i;this.elseValue=o}resolve(r){return this.shorthandName==="upcase"?r?r.toLocaleUpperCase():"":this.shorthandName==="downcase"?r?r.toLocaleLowerCase():"":this.shorthandName==="capitalize"?r?r[0].toLocaleUpperCase()+r.substr(1):"":this.shorthandName==="pascalcase"?r?this._toPascalCase(r):"":this.shorthandName==="camelcase"?r?this._toCamelCase(r):"":r&&typeof this.ifValue=="string"?this.ifValue:!r&&typeof this.elseValue=="string"?this.elseValue:r||""}_toPascalCase(r){let n=r.match(/[a-z0-9]+/gi);return n?n.map(i=>i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()).join(""):r}_toCamelCase(r){let n=r.match(/[a-z0-9]+/gi);return n?n.map((i,o)=>o===0?i.toLowerCase():i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()).join(""):r}toTextmateString(){let r="${";return r+=this.index,this.shorthandName?r+=`:/${this.shorthandName}`:this.ifValue&&this.elseValue?r+=`:?${this.ifValue}:${this.elseValue}`:this.ifValue?r+=`:+${this.ifValue}`:this.elseValue&&(r+=`:-${this.elseValue}`),r+="}",r}clone(){return new t(this.index,this.shorthandName,this.ifValue,this.elseValue)}},To=class t extends Ch{constructor(r){super();this.name=r}resolve(r){let n=r.resolve(this);return this.transform&&(n=this.transform.resolve(n||"")),n!==void 0?(this._children=[new vr(n)],!0):!1}toTextmateString(){let r="";return this.transform&&(r=this.transform.toTextmateString()),this.children.length===0?`\${${this.name}${r}}`:`\${${this.name}:${this.children.map(n=>n.toTextmateString()).join("")}${r}}`}clone(){let r=new t(this.name);return this.transform&&(r.transform=this.transform.clone()),r._children=this.children.map(n=>n.clone()),r}};function GD(t,e){let r=[...t];for(;r.length>0;){let n=r.shift();if(!e(n))break;r.unshift(...n.children)}}var Nh=class t extends xo{get placeholderInfo(){if(!this._placeholders){let e=[],r;this.walk(function(n){return n instanceof Ur&&(e.push(n),r=!r||r.index<n.index?n:r),!0}),this._placeholders={all:e,last:r}}return this._placeholders}get placeholders(){let{all:e}=this.placeholderInfo;return e}offset(e){let r=0,n=!1;return this.walk(i=>i===e?(n=!0,!1):(r+=i.len(),!0)),n?r:-1}fullLen(e){let r=0;return GD([e],n=>(r+=n.len(),!0)),r}enclosingPlaceholders(e){let r=[],{parent:n}=e;for(;n;)n instanceof Ur&&r.push(n),n=n.parent;return r}resolveVariables(e){return this.walk(r=>(r instanceof To&&r.resolve(e)&&(this._placeholders=void 0),!0)),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,r){return this._placeholders=void 0,super.replace(e,r)}toTextmateString(){return this.children.reduce((e,r)=>e+r.toTextmateString(),"")}clone(){let e=new t;return this._children=this.children.map(r=>r.clone()),e}walk(e){GD(this.children,e)}},qa=class{constructor(){this._scanner=new lv;this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}text(e){return this.parse(e).toString()}parse(e,r,n){this._scanner.text(e),this._token=this._scanner.next();let i=new Nh;for(;this._parse(i););let o=new Map,a=[],l=0;i.walk(p=>(p instanceof Ur&&(l+=1,p.isFinalTabstop?o.set(0,void 0):!o.has(p.index)&&p.children.length>0?o.set(p.index,p.children):a.push(p)),!0));for(let p of a){let u=o.get(p.index);if(u){let d=new Ur(p.index);d.transform=p.transform;for(let h of u)d.appendChild(h.clone());i.replace(p,[d])}}return n||(n=l>0&&r),!o.has(0)&&n&&i.appendChild(new Ur(0)),i}_accept(e,r){if(e===void 0||this._token.type===e){let n=r?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),n}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){let r=this._token;for(;this._token.type!==e;){if(this._token.type===14)return!1;if(this._token.type===5){let i=this._scanner.next();if(i.type!==0&&i.type!==4&&i.type!==5)return!1}this._token=this._scanner.next()}let n=this._scanner.value.substring(r.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),n}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let r;return(r=this._accept(5,!0))?(r=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||r,e.appendChild(new vr(r)),!0):!1}_parseTabstopOrVariableName(e){let r,n=this._token;return this._accept(0)&&(r=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(r)?new Ur(Number(r)):new To(r)),!0):this._backTo(n)}_parseComplexPlaceholder(e){let r,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(r=this._accept(8,!0))))return this._backTo(n);let o=new Ur(Number(r));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new vr("${"+r+":")),o.children.forEach(e.appendChild,e),!0}else if(o.index>0&&this._accept(7)){let a=new Oh;for(;;){if(this._parseChoiceElement(a)){if(this._accept(2))continue;if(this._accept(7)&&(o.appendChild(a),this._accept(4)))return e.appendChild(o),!0}return this._backTo(n),!1}}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseChoiceElement(e){let r=this._token,n=[];for(;!(this._token.type===2||this._token.type===7);){let i;if((i=this._accept(5,!0))?i=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||i:i=this._accept(void 0,!0),!i)return this._backTo(r),!1;n.push(i)}return n.length===0?(this._backTo(r),!1):(e.appendChild(new vr(n.join(""))),!0)}_parseComplexVariable(e){let r,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(r=this._accept(9,!0))))return this._backTo(n);let o=new To(r);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new vr("${"+r+":")),o.children.forEach(e.appendChild,e),!0}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseTransform(e){let r=new pv,n="",i="";for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(6,!0)||o,n+=o;continue}if(this._token.type!==14){n+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(5,!0)||this._accept(6,!0)||o,r.appendChild(new vr(o));continue}if(!(this._parseFormatString(r)||this._parseAnything(r)))return!1}for(;!this._accept(4);){if(this._token.type!==14){i+=this._accept(void 0,!0);continue}return!1}try{r.regexp=new RegExp(n,i)}catch{return!1}return e.transform=r,!0}_parseFormatString(e){let r=this._token;if(!this._accept(0))return!1;let n=!1;this._accept(3)&&(n=!0);let i=this._accept(8,!0);if(i)if(n){if(this._accept(4))return e.appendChild(new An(Number(i))),!0;if(!this._accept(1))return this._backTo(r),!1}else return e.appendChild(new An(Number(i))),!0;else return this._backTo(r),!1;if(this._accept(6)){let o=this._accept(9,!0);return!o||!this._accept(4)?(this._backTo(r),!1):(e.appendChild(new An(Number(i),o)),!0)}else if(this._accept(11)){let o=this._until(4);if(o)return e.appendChild(new An(Number(i),void 0,o,void 0)),!0}else if(this._accept(12)){let o=this._until(4);if(o)return e.appendChild(new An(Number(i),void 0,void 0,o)),!0}else if(this._accept(13)){let o=this._until(1);if(o){let a=this._until(4);if(a)return e.appendChild(new An(Number(i),void 0,o,a)),!0}}else{let o=this._until(4);if(o)return e.appendChild(new An(Number(i),void 0,void 0,o)),!0}return this._backTo(r),!1}_parseAnything(e){return this._token.type!==14?(e.appendChild(new vr(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}};var KD=Object.freeze({CURRENT_YEAR:!0,CURRENT_YEAR_SHORT:!0,CURRENT_MONTH:!0,CURRENT_DATE:!0,CURRENT_HOUR:!0,CURRENT_MINUTE:!0,CURRENT_SECOND:!0,CURRENT_DAY_NAME:!0,CURRENT_DAY_NAME_SHORT:!0,CURRENT_MONTH_NAME:!0,CURRENT_MONTH_NAME_SHORT:!0,CURRENT_SECONDS_UNIX:!0,SELECTION:!0,CLIPBOARD:!0,TM_SELECTED_TEXT:!0,TM_CURRENT_LINE:!0,TM_CURRENT_WORD:!0,TM_LINE_INDEX:!0,TM_LINE_NUMBER:!0,TM_FILENAME:!0,TM_FILENAME_BASE:!0,TM_DIRECTORY:!0,TM_FILEPATH:!0,RELATIVE_FILEPATH:!0,BLOCK_COMMENT_START:!0,BLOCK_COMMENT_END:!0,LINE_COMMENT:!0,WORKSPACE_NAME:!0,WORKSPACE_FOLDER:!0,RANDOM:!0,RANDOM_HEX:!0,UUID:!0});function Lh(t,e,r){let n=A7(t)+1,i={};t.walk(o=>{if(o instanceof To){if(o.name===e)o.name="TM_SELECTED_TEXT";else if(r!=null&&Object.prototype.hasOwnProperty.call(r,o.name))o.parent.replace(o,[new vr(r[o.name])]);else if(!KD[o.name]){let a;o.name in i?a=i[o.name]:(a=n++,i[o.name]=a);let l=new Ur(a);o.children.forEach(p=>l.appendChild(p)),o.parent.replace(o,[l])}}else o instanceof Ur&&o.index.toString()===e&&o.parent.replace(o,[new To("TM_SELECTED_TEXT")]);return!0})}function A7(t){let e=0;return t.walk(r=>(r instanceof Ur&&(e=Math.max(e,r.index)),!0)),e}function Uh(t,e,r){let n=e.map(o=>D7(t,o,r)),i=n[0];if(!n.every(o=>o===i))throw new Error("Multiple snippet definitions match the given context");if(i===-1)throw new Error("Couldn't find matching snippet definition");return r[i]}function D7(t,e,r){let n=e.editor.document.languageId;return r.findIndex(({scope:i})=>{if(i==null)return!0;let{langIds:o,scopeTypes:a,excludeDescendantScopeTypes:l}=i;if(o!=null&&!o.includes(n))return!1;if(a!=null){let p=a.concat(l??[]),u,d;for(let h of p)try{let g=t.create({type:"containingScope",scopeType:{type:h}}).run(e)[0];e.contentRange.isRangeEqual(g.contentRange)&&(g=t.create({type:"containingScope",scopeType:{type:h},ancestorIndex:1}).run(e)[0]),(u==null||u.contentRange.contains(g.contentRange))&&(u=g,d=h)}catch{continue}return d==null?!1:u!=null&&!(l??[]).includes(d)}return!0})}var Nl=class{constructor(e,r,n,i){this.rangeUpdater=e;this.snippets=r;this.actions=n;this.modifierStageFactory=i;this.snippetParser=new qa;this.run=this.run.bind(this)}getFinalStages(e){let r=this.getScopeTypes(e);return r.length===0?[]:[new bm(this.modifierStageFactory,{type:"cascading",modifiers:r.map(n=>({type:"containingScope",scopeType:n}))})]}getScopeTypes(e){if(e.type==="named"){let{name:r}=e,i=this.snippets.getSnippetStrict(r).insertionScopeTypes;return i==null?[]:i.map(o=>({type:o}))}else return e.scopeTypes??[]}getSnippetInfo(e,r){if(e.type==="named"){let{name:n}=e,i=this.snippets.getSnippetStrict(n),o=Uh(this.modifierStageFactory,r,i.definitions);return{body:o.body.join(`
`),formatSubstitutions(a){return a==null?void 0:I7(i,o,a)}}}else return{body:e.body,formatSubstitutions(n){return n}}}async run(e,r){let n=D().getEditableTextEditor(Tr(e));await this.actions.editNew.run(e);let{body:i,formatSubstitutions:o}=this.getSnippetInfo(r,n.selections.map(u=>new kt({editor:n,contentRange:u,isReversed:!1,hasExplicitRange:!0}))),a=this.snippetParser.parse(i);Lh(a,null,o(r.substitutions));let l=a.toTextmateString(),{editorSelections:p}=await Fe({rangeUpdater:this.rangeUpdater,editor:n,callback:()=>n.insertSnippet(l),preserveCursorSelections:!0,selections:{editorSelections:{selections:n.selections,behavior:0}}});return{thatSelections:p.map(u=>({editor:n,selection:u}))}}};function I7(t,e,r){return Object.fromEntries(Object.entries(r).map(([n,i])=>{let o=(e.variables??{})[n]?.formatter??(t.variables??{})[n]?.formatter;if(o==null)return[n,i];let a=Kk[o];if(a==null)throw new Error(`Couldn't find formatter ${o} for variable ${n}`);return[n,a(i.split(" "))]}))}var Ll=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e){return await Oe(D(),e,"pendingModification0"),{thatSelections:Ge(await tt(e,async(n,i)=>{let o=i.map(({contentRange:l})=>l),{contentRanges:a}=await Fe({rangeUpdater:this.rangeUpdater,editor:D().getEditableTextEditor(n),edits:F7(n,o),selections:{contentRanges:o}});return ut(i,a).map(([l,p])=>({editor:l.editor,selection:p.toSelection(l.isReversed)}))}))}}};function F7(t,e){let{document:r}=t,n=[];for(let i of e){let o=i.start.line,a=i.isSingleLine?o+1:i.end.line,l=co(qM(o,a+1),p=>r.lineAt(p));for(let[p,u]of HM(l))n.push({range:new W(p.rangeTrimmed?.end??p.range.end,u.rangeTrimmed?.start??u.range.start),text:u.isEmptyOrWhitespace?"":" ",isReplace:!0})}return n}var Vh=class{constructor(e,r){this.rangeUpdater=e;this.actions=r;this.run=this.run.bind(this)}async run(e){let r=D().getEditableTextEditor(Tr(e)),n=D().activeEditableTextEditor,i=async()=>{await this.actions.editNew.run(e)},{cursorSelections:o}=await Fe({rangeUpdater:this.rangeUpdater,editor:r,preserveCursorSelections:!0,callback:i,selections:{cursorSelections:r.selections}}),{originalCursorSelections:a,editorSelections:l}=await Fe({rangeUpdater:this.rangeUpdater,editor:r,callback:()=>r.clipboardPaste(),selections:{originalCursorSelections:o,editorSelections:{selections:r.selections,behavior:0}}});return await r.setSelections(a),n!=null&&!n.isActive&&await n.focus(),await D().flashRanges(l.map(p=>({editor:r,range:Ft(p),style:"justAdded"}))),{thatSelections:l.map(p=>({editor:r,selection:p}))}}};var Bh=class{constructor(e){this.rangeUpdater=e;this.runForEditor=this.runForEditor.bind(this)}async run(e){let r=await D().clipboard.readText(),n=r.split(/\r?\n/g),i=e.length===n.length?_T(e,n).map(([a,l])=>({destination:a,text:l})):e.map(a=>({destination:a,text:r}));return{thatSelections:Ge(await Mi(i,({destination:a})=>a.editor,this.runForEditor))}}async runForEditor(e,r){let n=r.map(({destination:a,text:l})=>a.constructChangeEdit(l)),{editSelections:i}=await Fe({rangeUpdater:this.rangeUpdater,editor:D().getEditableTextEditor(e),edits:n,selections:{editSelections:{selections:n.map(({range:a})=>a),behavior:0}}}),o=_T(n,i).map(([a,l])=>a.updateRange(l).toSelection(l.isReversed));return await D().flashRanges(o.map(a=>({editor:e,range:Ft(a),style:"justAdded"}))),o.map(a=>({editor:e,selection:a}))}};var Hh=class{constructor(e,r){this.run=this.run.bind(this),this.runner=D().capabilities.commands.clipboardPaste!=null?new Vh(e,r):new Bh(e)}run(e){return this.runner.run(e)}};var Ul=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e,{showDecorations:r=!0}={}){return e=th(e),r&&await Oe(D(),e,"pendingDelete",i=>i.getRemovalHighlightRange()),{thatTargets:Ge(await tt(e,this.runForEditor))}}async runForEditor(e,r){let n=r.map(a=>a.constructRemovalEdit()),i=D().getEditableTextEditor(e),{editRanges:o}=await Fe({rangeUpdater:this.rangeUpdater,editor:i,edits:n,selections:{editRanges:n.map(({range:a})=>a)}});return ut(r,o).map(([a,l])=>new oo({editor:a.editor,isReversed:a.isReversed,contentRange:l}))}};var Vl=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}getTexts(e,r){if(Array.isArray(r))return r.length===1?Array(e.length).fill(r[0]):r;let n=[];for(let i=0;i<e.length;++i)n[i]=(r.start+i).toString();return n}async run(e,r){await Oe(D(),e.map(l=>l.target),"pendingModification0");let n=this.getTexts(e,r);if(e.length!==n.length)throw new Error("Targets and texts must have same length");let i=ut(e,n).map(([l,p])=>({editor:l.editor,target:l.target,edit:l.constructChangeEdit(p)})),o=[],a=[];return await Mi(i,l=>l.editor,async(l,p)=>{let u=p.map(({edit:g})=>g),{contentSelections:d,editRanges:h}=await Fe({rangeUpdater:this.rangeUpdater,editor:D().getEditableTextEditor(l),edits:u,selections:{contentSelections:p.map(({target:g})=>g.contentSelection),editRanges:{selections:u.map(({range:g})=>g),behavior:0}}});for(let[g,x]of ut(p,d))o.push(g.target.withContentRange(x));for(let[g,x]of ut(p,h))a.push({editor:l,selection:g.edit.updateRange(x).toSelection(!1)})}),{sourceTargets:o,thatSelections:a}}};var Bl=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.getFinalStages=()=>[QS(this.modifierStageFactory)];this.run=this.run.bind(this)}async run(e,r,n){let i=e.flatMap(a=>{let l=a.getBoundary();if(l.length!==2)throw Error("Target must have an opening and closing delimiter");return l});await Oe(D(),i,"pendingModification0");let o=await tt(i,async(a,l)=>{let p=l.map((h,g)=>({editor:a,range:h.contentRange,text:g%2===0?r:n})),{sourceRanges:u,thatRanges:d}=await Fe({rangeUpdater:this.rangeUpdater,editor:D().getEditableTextEditor(a),edits:p,selections:{sourceRanges:e.map(h=>h.thatTarget.contentRange),thatRanges:e.map(h=>h.contentRange)}});return{sourceMark:ln(e,u),thatMark:ln(e,d)}});return{sourceSelections:o.flatMap(({sourceMark:a})=>a),thatSelections:o.flatMap(({thatMark:a})=>a)}}};var Hl=class{constructor(e){this.at=e;this.run=this.run.bind(this)}async run(e){let r=Xc(e,a=>a.editor),n=Array.from(r,([a,l])=>({lineNumber:C7(l,this.at),editor:a})),i=D().activeEditableTextEditor;for(let a of n)await D().getEditableTextEditor(a.editor).revealLine(a.lineNumber,this.at);i!=null&&!i.isActive&&await i.focus();let o=e.filter(a=>{let l=a.editor.visibleRanges,p=l[0].start.line,u=l[l.length-1].end.line;return a.contentRange.start.line>p||a.contentRange.end.line<u||a.contentRange.start.line===p&&a.contentRange.end.line===u});return await D().flashRanges(o.map(a=>({editor:a.editor,range:tn(a.contentRange),style:"referenced"}))),{thatTargets:e}}},Wh=class extends Hl{constructor(){super("top")}},$h=class extends Hl{constructor(){super("center")}},qh=class extends Hl{constructor(){super("bottom")}};function C7(t,e){let r=Number.MAX_SAFE_INTEGER,n=0;return t.forEach(i=>{r=Math.min(r,i.contentRange.start.line),n=Math.max(n,i.contentRange.end.line)}),e==="top"?r:e==="bottom"?n:Math.floor((r+n)/2)}var ja=class{constructor(){this.run=this.run.bind(this)}getSelection(e){return e.contentSelection}async run(e){let r=Tr(e),n=e.map(this.getSelection);return await D().getEditableTextEditor(r).setSelections(n,{focusEditor:!0}),{thatTargets:e}}},jh=class extends ja{getSelection(e){return new Te(e.contentRange.start,e.contentRange.start)}},zh=class extends ja{getSelection(e){return new Te(e.contentRange.end,e.contentRange.end)}};var Wl=class{constructor(e){this.key=e;this.noAutomaticTokenExpansion=!0;this.run=this.run.bind(this)}async run(e){return{thatTargets:e,[`${this.key}Targets`]:e}}};var $l=class{constructor(e){this.treeSitter=e;this.run=this.run.bind(this)}async run(e){await Oe(D(),e,"referenced");let r=["# Cursorless parse tree"];for(let n of e){let{editor:i,contentRange:o}=n,a=this.treeSitter.getTree(i.document);r.push(O7(i.document,a,o))}return D().openUntitledTextDocument({language:"markdown",content:r.join(`

`)}),{thatTargets:e}}};function O7(t,e,r){let n=[],i=[];return QD(n,i,r,e.walk(),0),[`## ${t.filename} [${r}]
`,`\`\`\`${t.languageId}`,t.getText(r),"```","","```scm",...i,"```","","```js",...n,"```",""].join(`
`)}function QD(t,e,r,n,i){for(;;){let o=new W(n.startPosition.row,n.startPosition.column,n.endPosition.row,n.endPosition.column);if(r.intersection(o)!=null){let a="  ".repeat(i),l=N7(n),p=a+l;if(n.nodeIsNamed)t.push(`${p}${n.nodeType} [${o}]`),e.push(`${p}(${n.nodeType}`),n.gotoFirstChild()?(QD(t,e,r,n,i+1),n.gotoParent(),e.push(`${a})`)):e[e.length-1]+=")";else{let u=`"${n.nodeType}"`;t.push(`${p}${u} [${o}]`),e.push(`${p}${u}`)}}if(!n.gotoNextSibling())return}}function N7(t){let e=t.currentFieldName;return e!=null?`${e}: `:""}var Gh=class{constructor(e,r){this.rangeUpdater=e;this.isIndent=r;this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e){return this.hasCapability()?this.runSimpleCommandAction(e):(await Oe(D(),e,"pendingModification0"),{thatTargets:Ge(await tt(e,this.runForEditor))})}hasCapability(){return this.isIndent?D().capabilities.commands.indentLine!=null:D().capabilities.commands.outdentLine!=null}runSimpleCommandAction(e){return(this.isIndent?new ah(this.rangeUpdater):new ch(this.rangeUpdater)).run(e)}async runForEditor(e,r){let n=this.isIndent?L7(e,r):U7(e,r),{targetSelections:i}=await Fe({rangeUpdater:this.rangeUpdater,editor:D().getEditableTextEditor(e),edits:n,selections:{targetSelections:r.map(({contentSelection:o})=>o)}});return ut(r,i).map(([o,a])=>Ba({editor:e,selection:a.toSelection(o.isReversed)}))}},Kh=class extends Gh{constructor(e){super(e,!0)}},Qh=class extends Gh{constructor(e){super(e,!1)}};function L7(t,e){let{document:r}=t,n=ZD(e),i=V7(t);return n.map(o=>({range:r.lineAt(o).range.start.toEmptyRange(),text:i}))}function U7(t,e){let{document:r}=t,n=ZD(e),i=B7(t);return n.map(o=>{let a=r.lineAt(o),l=a.text.match(i),{start:p}=a.range,u=p.translate(void 0,l?.[0].length);return{range:new W(p,u),text:""}})}function ZD(t){let e=new Set;for(let r of t){let{start:n,end:i}=r.contentRange;for(let o=n.line;o<=i.line;++o)e.add(o)}return[...e]}function V7(t){if(t.options.insertSpaces){let e=YD(t);return" ".repeat(e)}return"	"}function B7(t){if(t.options.insertSpaces){let e=YD(t);return new RegExp(`^[ ]{1,${e}}`)}return/^\t/}function YD(t){return typeof t.options.tabSize=="number"?t.options.tabSize:4}var ql=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){e.length<2&&Bc(D().messages,"tooFewTargets",'This action works on multiple targets, e.g. "sort every line block" instead of "sort block".');let r=e.slice().sort((a,l)=>a.contentRange.start.compareTo(l.contentRange.start)),{returnValue:n}=await this.actions.getText.run(r,{showDecorations:!1}),i=this.sortTexts(n),{thatSelections:o}=await this.actions.replace.run(r.map(a=>a.toDestination("to")),i);return{thatSelections:o}}},Zh=class extends ql{sortTexts(e){return e.sort((r,n)=>r.localeCompare(n,void 0,{numeric:!0,caseFirst:"upper"}))}},Yh=class extends ql{sortTexts(e){return e.reverse()}},Xh=class extends ql{sortTexts(e){return eT(e)}};var jl=class{constructor(e){this.modifierStageFactory=e;this.getFinalStages=()=>[this.modifierStageFactory.create(Ua)];this.run=this.run.bind(this)}async run(e){let r=e.map(({thatTarget:n})=>n);return await Oe(D(),r,"referenced"),await tt(e,async(n,i)=>{let o=i.map(a=>{let l=a.contentRange;return a.isLine?{type:"line",startLine:l.start.line,endLine:l.end.line}:{type:"inline",range:l}});await D().getEditableTextEditor(n).toggleBreakpoint(o)}),{thatTargets:e}}};var zl=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e,r,n){let i=await tt(e,async(o,a)=>{let l=a.map(w=>({start:new Te(w.contentRange.start,w.contentRange.start),end:new Te(w.contentRange.end,w.contentRange.end)})),p=l.flatMap(({start:w,end:F})=>[{text:r,range:w},{text:n,range:F,isReplace:!0}]),u=a.map(w=>w.contentSelection),{boundariesStartSelections:d,boundariesEndSelections:h,sourceSelections:g,thatSelections:x}=await Fe({rangeUpdater:this.rangeUpdater,editor:D().getEditableTextEditor(o),edits:p,selections:{boundariesStartSelections:{selections:l.map(({start:w})=>w),behavior:2},boundariesEndSelections:{selections:l.map(({end:w})=>w),behavior:3},sourceSelections:{selections:u,behavior:1},thatSelections:{selections:u,behavior:0}}}),b=[...d,...h];return await D().flashRanges(b.map(w=>({editor:o,range:Ft(w),style:"justAdded"}))),{sourceMark:g.map(w=>({editor:o,selection:w})),thatMark:x.map(w=>({editor:o,selection:w}))}});return{sourceSelections:i.flatMap(({sourceMark:o})=>o),thatSelections:i.flatMap(({thatMark:o})=>o)}}};var Gl=class{constructor(e,r,n){this.rangeUpdater=e;this.snippets=r;this.modifierStageFactory=n;this.snippetParser=new qa;this.run=this.run.bind(this)}getFinalStages(e){let r=this.getScopeType(e);return r==null?[]:[new Aa(this.modifierStageFactory,{type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:r}})]}getScopeType(e){if(e.type==="named"){let{name:r,variableName:n}=e,a=(this.snippets.getSnippetStrict(r).variables??{})[n]?.wrapperScopeType;return a==null?void 0:{type:a}}else return e.scopeType}getBody(e,r){if(e.type==="named"){let{name:n}=e,i=this.snippets.getSnippetStrict(n);return Uh(this.modifierStageFactory,r,i.definitions).body.join(`
`)}else return e.body}async run(e,r){let n=D().getEditableTextEditor(Tr(e)),i=this.getBody(r,e),o=this.snippetParser.parse(i);Lh(o,r.variableName);let a=o.toTextmateString();await Oe(D(),e,"pendingModification0");let l=e.map(d=>d.contentSelection),p=()=>n.insertSnippet(a,l),{targetSelections:u}=await Fe({rangeUpdater:this.rangeUpdater,editor:n,callback:p,preserveCursorSelections:!0,selections:{targetSelections:l}});return{thatSelections:u.map(d=>({editor:n,selection:d}))}}};var H7=/-?\d+(\.\d+)?/g,Jh=class{constructor(e,r){this.actions=e;this.isIncrement=r;this.run=this.run.bind(this)}async run(e){let r=[];return await Mi(e,n=>n.editor,async(n,i)=>{let o=await this.runOnEditor(n,i);r.push(...o)}),{thatSelections:r}}async runOnEditor(e,r){let{document:n}=e,i=[],o=[];for(let l of r){let p=n.offsetAt(l.contentRange.start),u=l.contentText,d=Vc(u,H7);for(let h of d)i.push(W7(e,p,h)),o.push($7(this.isIncrement,h.text))}let{thatSelections:a}=await this.actions.replace.run(i,o);return a}},eg=class extends Jh{constructor(e){super(e,!0)}},tg=class extends Jh{constructor(e){super(e,!1)}};function W7(t,e,r){return new He({editor:t,isReversed:!1,contentRange:new W(t.document.positionAt(e+r.index),t.document.positionAt(e+r.index+r.text.length))}).toDestination("to")}function $7(t,e){return e.includes(".")?j7(t,e).toString():q7(t,e).toString()}function q7(t,e){let r=parseInt(e),n=1;return r+(t?n:-n)}function j7(t,e){let r=parseFloat(e),i=Math.abs(r)<=1?.1:1,o=r+(t?i:-i);return parseFloat(o.toPrecision(15))/1}var rg=class{constructor(e,r,n,i){this.treeSitter=e;this.snippets=r;this.rangeUpdater=n;this.modifierStageFactory=i;this.callAsFunction=new kl(this);this.clearAndSetSelection=new Pl(this);this.copyToClipboard=new Th(this,this.rangeUpdater);this.cutToClipboard=new Sh(this);this.decrement=new tg(this);this.deselect=new Ml;this.editNew=new vh(this.rangeUpdater,this);this.editNewLineAfter=new _h(this,this.modifierStageFactory);this.editNewLineBefore=new wh(this,this.modifierStageFactory);this.executeCommand=new Al(this.rangeUpdater);this.extractVariable=new xh(this.rangeUpdater);this.findInDocument=new Rh(this);this.findInWorkspace=new kh(this);this.foldRegion=new lh(this.rangeUpdater);this.followLink=new Wa({openAside:!1});this.followLinkAside=new Wa({openAside:!0});this.generateSnippet=new $a(this.snippets);this.getText=new Fl;this.highlight=new Cl;this.increment=new eg(this);this.indentLine=new Kh(this.rangeUpdater);this.insertCopyAfter=new Ah(this.rangeUpdater,this.modifierStageFactory);this.insertCopyBefore=new Mh(this.rangeUpdater,this.modifierStageFactory);this.insertEmptyLineAfter=new Fh(this.rangeUpdater);this.insertEmptyLineBefore=new Ih(this.rangeUpdater);this.insertEmptyLinesAround=new Dh(this.rangeUpdater);this.insertSnippet=new Nl(this.rangeUpdater,this.snippets,this,this.modifierStageFactory);this.joinLines=new Ll(this.rangeUpdater);this.breakLine=new eh(this.rangeUpdater);this.moveToTarget=new nh(this.rangeUpdater);this.outdentLine=new Qh(this.rangeUpdater);this.pasteFromClipboard=new Hh(this.rangeUpdater,this);this.randomizeTargets=new Xh(this);this.remove=new Ul(this.rangeUpdater);this.rename=new uh(this.rangeUpdater);this.replace=new Vl(this.rangeUpdater);this.replaceWithTarget=new rh(this.rangeUpdater);this.revealDefinition=new mh(this.rangeUpdater);this.revealTypeDefinition=new hh(this.rangeUpdater);this.reverseTargets=new Yh(this);this.rewrapWithPairedDelimiter=new Bl(this.rangeUpdater,this.modifierStageFactory);this.scrollToBottom=new qh;this.scrollToCenter=new $h;this.scrollToTop=new Wh;this["private.setKeyboardTarget"]=new Wl("keyboard");this["experimental.setInstanceReference"]=new Wl("instanceReference");this.setSelection=new ja;this.setSelectionAfter=new zh;this.setSelectionBefore=new jh;this.showDebugHover=new yh(this.rangeUpdater);this.showHover=new gh(this.rangeUpdater);this.showQuickFix=new dh(this.rangeUpdater);this.showReferences=new fh(this.rangeUpdater);this.sortTargets=new Zh(this);this.swapTargets=new ih(this.rangeUpdater);this.toggleLineBreakpoint=new jl(this.modifierStageFactory);this.toggleLineComment=new sh(this.rangeUpdater);this.unfoldRegion=new ph(this.rangeUpdater);this.wrapWithPairedDelimiter=new zl(this.rangeUpdater);this.wrapWithSnippet=new Gl(this.rangeUpdater,this.snippets,this.modifierStageFactory);this["private.showParseTree"]=new $l(this.treeSitter);this["private.getTargets"]=new Il}};async function XD(t,e,r){let n=await t.getFocusedElementType();if(n==null||n==="textEditor")return null;let i=r.action;switch(i.name){case"replace":return ng(i.destination)&&Array.isArray(i.replaceWith)?{action:"insert",modifiers:ig(i.destination),text:i.replaceWith.join(`
`)}:null;case"replaceWithTarget":return ng(i.destination)?{action:"insert",modifiers:ig(i.destination),text:await uv(e,i.source)}:null;case"moveToTarget":if(ng(i.destination)){let o=await uv(e,i.source);return await z7(e,i.source),{action:"insert",modifiers:ig(i.destination),text:o}}return null;case"callAsFunction":return og(i.argument)?{action:i.name,modifiers:sg(i.argument),callee:await uv(e,i.callee)}:null;case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return og(i.target)?{action:i.name,modifiers:sg(i.target),left:i.left,right:i.right}:null;case"pasteFromClipboard":return ng(i.destination)?{action:i.name,modifiers:ig(i.destination)}:null;case"swapTargets":case"editNew":case"insertSnippet":case"generateSnippet":case"wrapWithSnippet":case"parsed":return null;default:return og(i.target)?{action:i.name,modifiers:sg(i.target)}:null}}function ng(t){return t.type==="implicit"?!0:t.type==="primitive"?t.insertionMode==="to"&&og(t.target):!1}function og(t){return t.type==="implicit"?!0:t.type==="primitive"?t.mark==null||t.mark.type==="cursor":!1}function ig(t){return t.type==="primitive"?sg(t.target):[]}function sg(t){if(t.type==="primitive"){if(t.modifiers!=null&&t.modifiers.length>0)return t.modifiers;if(t.mark?.type==="cursor")return[{type:"containingTokenIfEmpty"}]}return[]}async function uv(t,e){return(await t({name:"getText",target:e})).returnValue.join(`
`)}async function z7(t,e){await t({name:"remove",target:e})}function JD(t,e){let{anchor:r,rangeType:n,active:i}=t;if(r.type!=="primitive"||n!=="continuous")return t;let o=r.modifiers.map((a,l)=>[a,l]);for(let[a,l]of o.reverse())for(let p of G7){let u=p.accept(a);if(u.accepted){let[d,h]=[r.modifiers.slice(0,l+1),r.modifiers.slice(l+1)],g={...t,anchor:h.length===0&&e?{type:"implicit"}:{type:"primitive",mark:r.mark,modifiers:h},active:Pf(i,x=>{x.modifiers=x.modifiers.slice(Ic(x.modifiers,b=>p.accept(b).accepted)+1)})};return g=u.transformTarget?.(g)??g,{type:"primitive",mark:{type:"target",target:g},modifiers:d}}}return t}var G7=[{accept(t){return t.type==="everyScope"&&t.scopeType.type!=="instance"?{accepted:!0,transformTarget(e){return{...e,exclusionScopeType:t.scopeType}}}:{accepted:!1}}},{accept(t){return{accepted:(t.type==="everyScope"||t.type==="relativeScope"||t.type==="ordinalScope")&&t.scopeType.type==="instance"}}}];function dv(t,e){switch(t.type){case"list":return K7(t,e);case"range":return eI(t,e);case"primitive":return ag(t,e);case"implicit":return t}}function K7(t,e){return{...t,elements:t.elements.map((r,n)=>{let i=e.concat(t.elements.slice(0,n));switch(r.type){case"range":return eI(r,i);case"primitive":return ag(r,i)}})}}function eI(t,e){let r=Q7(t,e),n=t.anchor.type==="implicit"||t.anchor.mark==null;return JD(r,n)}function Q7(t,e){return{type:"range",rangeType:t.rangeType??"continuous",excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1,anchor:t.anchor.type==="implicit"?t.anchor:ag(t.anchor,e),active:ag(t.active,e.concat(t.anchor))}}function ag(t,e){let r=fv(t.mark??(Z7(t)?J7(e):null)??{type:"cursor"}),n=tI(t)??eQ(e)??tQ(e)??[];return{type:t.type,mark:r,modifiers:n}}function Z7(t){return t.modifiers?.some(e=>e.type==="inferPreviousMark")??!1}function tI(t){let e=t.modifiers?.filter(r=>r.type!=="inferPreviousMark")??[];return e.length!==0?e:void 0}function Y7(t){if(X7(t))return[{type:"containingScope",scopeType:{type:"line"}}]}function X7(t){let e=r=>r?.type==="lineNumber";return e(t.mark)?!0:t.mark?.type==="range"?e(t.mark.anchor)&&e(t.mark.active):!1}function J7(t){return Kl(t,e=>e.mark)}function eQ(t){return Kl(t,tI)}function tQ(t){return Kl(t,Y7)}function Kl(t,e){for(let r=t.length-1;r>-1;--r){let n=t[r];switch(n.type){case"primitive":{let i=e(n);if(i!=null)return i;break}case"range":{let i=Kl([n.anchor],e);if(i!=null)return i;break}case"list":{let i=Kl(n.elements,e);if(i!=null)return i;break}}}}function fv(t){switch(t.type){case"range":return{...t,anchor:fv(t.anchor),active:fv(t.active)};case"target":return{type:"target",target:dv(t.target,[])};default:return t}}var cg=class{constructor(e,r,n,i,o){this.commandServerApi=e;this.debug=r;this.storedTargets=n;this.pipelineRunner=i;this.actions=o;this.finalStages=[];this.runAction=this.runAction.bind(this),this.inferenceContext=new mv(this.debug)}async run(e){if($o(e)){let u=await XD(this.commandServerApi,this.runAction,e);if(u!=null)return{fallback:u}}let{returnValue:r,thatSelections:n,thatTargets:i,sourceSelections:o,sourceTargets:a,instanceReferenceTargets:l,keyboardTargets:p}=await this.runAction(e.action);return this.storedTargets.set("that",rI(i,n)),this.storedTargets.set("source",rI(a,o)),this.storedTargets.set("instanceReference",l),this.storedTargets.set("keyboard",p,{history:!0}),{returnValue:r}}runAction(e){switch(this.inferenceContext.reset(),this.finalStages=[],e.name){case"replaceWithTarget":return this.actions.replaceWithTarget.run(this.getTargets(e.source),this.getDestinations(e.destination));case"moveToTarget":return this.actions.moveToTarget.run(this.getTargets(e.source),this.getDestinations(e.destination));case"swapTargets":return this.actions.swapTargets.run(this.getTargets(e.target1),this.getTargets(e.target2));case"callAsFunction":return this.actions.callAsFunction.run(this.getTargets(e.callee),this.getTargets(e.argument));case"wrapWithPairedDelimiter":return this.actions.wrapWithPairedDelimiter.run(this.getTargets(e.target),e.left,e.right);case"rewrapWithPairedDelimiter":return this.finalStages=this.actions.rewrapWithPairedDelimiter.getFinalStages(),this.actions.rewrapWithPairedDelimiter.run(this.getTargets(e.target),e.left,e.right);case"pasteFromClipboard":return this.actions.pasteFromClipboard.run(this.getDestinations(e.destination));case"executeCommand":return this.actions.executeCommand.run(this.getTargets(e.target),e.commandId,e.options);case"replace":return this.actions.replace.run(this.getDestinations(e.destination),e.replaceWith);case"highlight":return this.actions.highlight.run(this.getTargets(e.target),e.highlightId);case"generateSnippet":return this.actions.generateSnippet.run(this.getTargets(e.target),e.snippetName);case"insertSnippet":return this.finalStages=this.actions.insertSnippet.getFinalStages(e.snippetDescription),this.actions.insertSnippet.run(this.getDestinations(e.destination),e.snippetDescription);case"wrapWithSnippet":return this.finalStages=this.actions.wrapWithSnippet.getFinalStages(e.snippetDescription),this.actions.wrapWithSnippet.run(this.getTargets(e.target),e.snippetDescription);case"editNew":return this.actions.editNew.run(this.getDestinations(e.destination));case"getText":return this.actions.getText.run(this.getTargets(e.target),e.options);case"parsed":return this.runAction(Yf(e.content,e.arguments));default:{let r=this.actions[e.name];return this.finalStages=r.getFinalStages?.()??[],this.noAutomaticTokenExpansion=r.noAutomaticTokenExpansion??!1,r.run(this.getTargets(e.target))}}}getTargets(e){let r=this.inferenceContext.run(e);return this.pipelineRunner.run(r,{actionFinalStages:this.finalStages,noAutomaticTokenExpansion:this.noAutomaticTokenExpansion})}getDestinations(e){switch(e.type){case"list":return e.destinations.flatMap(r=>this.getDestinations(r));case"primitive":return this.getTargets(e.target).map(r=>r.toDestination(e.insertionMode));case"implicit":return this.getTargets({type:"implicit"}).map(r=>r.toDestination("to"))}}},mv=class{constructor(e){this.debug=e;this.previousTargets=[]}run(e){let r=dv(e,this.previousTargets);return this.debug.active&&(this.debug.log("Full target:"),this.debug.log(JSON.stringify(r,null,2))),this.previousTargets.push(e),r}reset(){this.previousTargets=[]}};function rI(t,e){if(t!=null&&e!=null)throw Error("Actions may only return full targets or selections for that mark");return e!=null?e.map(Ba):t}var lg=class{constructor(e,r){this.readableHatMap=e;this.mark=r}run(){let e=this.readableHatMap.getToken(this.mark.symbolColor,this.mark.character);if(e==null)throw new Error(`Couldn't find mark ${this.mark.symbolColor} '${this.mark.character}'`);return[new kt({editor:e.editor,contentRange:e.range,isReversed:!1,hasExplicitRange:!1})]}};var pg=class{constructor(e){this.mark=e}run(){let{editorId:e,range:{start:r,end:n}}=this.mark,i=D().visibleTextEditors.find(a=>a.id===e);if(i==null)throw new Error(`Couldn't find editor '${e}'`);let o=new W(r.line,r.character,n.line,n.character);return[new kt({editor:i,contentRange:o,isReversed:!1,hasExplicitRange:!1})]}};var ug=class{constructor(e){this.mark=e}run(){let e=D().activeTextEditor;if(e==null)return[];let r=rQ(e,this.mark.lineNumberType,this.mark.lineNumber),n=e.document.lineAt(r).range;return[yS(e,!1,n)]}},rQ=(t,e,r)=>{switch(e){case"absolute":return r;case"relative":return t.selections[0].active.line+r;case"modulo100":{let i=t.visibleRanges[0].start.line,o=t.visibleRanges[t.visibleRanges.length-1].end.line,a=Math.floor(i/100)*100,l=[],p=[],u=a+r;for(;u<=o;)u>=i&&(t.visibleRanges.find(h=>u>=h.start.line&&u<=h.end.line)?l.push(u):p.push(u)),u+=100;if(l.length===1)return l[0];if(l.length+p.length>1)throw new Error("Multiple lines matching");if(p.length===1)return p[0];throw new Error("Line is not in viewport")}}};var fg=class{constructor(e){this.mark=e}run(){return[]}};var dg=class{constructor(e,r){this.markStageFactory=e;this.mark=r}run(){let e=this.markStageFactory.create(this.mark.anchor),r=this.markStageFactory.create(this.mark.active),n=e.run(),i=r.run();if(n.length!==1||i.length!==1)throw new Error("Expected single anchor and active target");return[mo(n[0],i[0],this.mark.excludeAnchor,this.mark.excludeActive)]}};var mg=class{constructor(e,r){this.storedTargets=e;this.key=r}run(){let e=this.storedTargets.get(this.key);if(e==null||e.length===0)throw Error(`No available ${this.key} marks`);return e}};var hg=class{constructor(e,r){this.targetPipelineRunner=e;this.mark=r}run(){return this.targetPipelineRunner.run(this.mark.target)}};var gg=class{constructor(e,r){this.readableHatMap=e;this.storedTargets=r;this.create=this.create.bind(this)}setPipelineRunner(e){this.targetPipelineRunner=e}create(e){switch(e.type){case"cursor":return new ma;case"that":case"source":case"keyboard":return new mg(this.storedTargets,e.type);case"decoratedSymbol":return new lg(this.readableHatMap,e);case"lineNumber":return new ug(e);case"range":return new dg(this,e);case"nothing":return new fg(e);case"target":return new hg(this.targetPipelineRunner,e);case"explicit":return new pg(e)}}};async function nI(t,e,r,n,i,o,a,l,p,u){r.active&&(r.log("command:"),r.log(JSON.stringify(u,null,2)));let d=eS(u),h=await n.getReadableMap(d.usePrePhraseSnapshot),g=iQ(t,e,a,r,o,h,i,l);for(let b of p)g=b.wrapCommandRunner(h,g);let x=await g.run(d);return await nQ(u,x)}async function nQ(t,e){if($o(t))return e;if("returnValue"in e)return e.returnValue}function iQ(t,e,r,n,i,o,a,l){let p=new Va(r,i,new Sa(r)),u=new gg(o,i),d=new Am(p,u);return u.setPipelineRunner(d),new cg(e,n,i,d,new rg(t,a,l,p))}var iI=["clojure","css","latex","ruby","rust","scala","scss"];async function oI(t,e){await oQ(t,e)}async function oQ(t,e){let r=[];for(let n of iI)await t.loadLanguage(n),await e.loadLanguage(n),Ti(El[n]??{}).map(i=>{e.get(n)?.getScopeHandler({type:i})!=null&&r.push(`Scope '${i}' defined as both legacy and new for language ${n}`)});if(r.length>0)throw Error(r.join(`
`))}function sI(t){return $k(t)?Zc(t.type).replace("."," "):t.type==="surroundingPair"?`Matching pair of ${Zc(t.delimiter)}`:t.type==="customRegex"?`Regex \`${t.regex}\``:"Unknown scope type"}var yg=class{constructor(e){this.customSpokenFormGenerator=e;this.listeners=[];this.disposable=e.onDidChangeCustomSpokenForms(()=>this.onChange()),this.onDidChangeScopeInfo=this.onDidChangeScopeInfo.bind(this),this.getScopeTypeInfo=this.getScopeTypeInfo.bind(this),this.updateScopeTypeInfos()}onDidChangeScopeInfo(e){return e(this.getScopeTypeInfos()),this.listeners.push(e),{dispose:()=>{Jt(this.listeners,e)}}}async onChange(){this.updateScopeTypeInfos(),this.listeners.forEach(e=>e(this.scopeInfos))}updateScopeTypeInfos(){let e=[...Wo.filter(r=>r!=="instance").map(r=>({type:r})),...Tf.map(r=>({type:"surroundingPair",delimiter:r})),...this.customSpokenFormGenerator.getCustomRegexScopeTypes()];this.scopeInfos=e.map(r=>this.getScopeTypeInfo(r))}getScopeTypeInfos(){return this.scopeInfos}getScopeTypeInfo(e){return{scopeType:e,spokenForm:this.customSpokenFormGenerator.scopeTypeToSpokenForm(e),humanReadableName:sI(e),isLanguageSpecific:sQ(e)}}dispose(){this.disposable.dispose()}};function sQ(t){switch(t.type){case"string":case"argumentOrParameter":case"anonymousFunction":case"attribute":case"branch":case"class":case"className":case"collectionItem":case"collectionKey":case"command":case"comment":case"private.fieldAccess":case"functionCall":case"functionCallee":case"functionName":case"ifStatement":case"instance":case"list":case"map":case"name":case"namedFunction":case"regularExpression":case"statement":case"type":case"value":case"condition":case"section":case"sectionLevelOne":case"sectionLevelTwo":case"sectionLevelThree":case"sectionLevelFour":case"sectionLevelFive":case"sectionLevelSix":case"selector":case"private.switchStatementSubject":case"unit":case"xmlBothTags":case"xmlElement":case"xmlEndTag":case"xmlStartTag":case"part":case"chapter":case"subSection":case"subSubSection":case"namedParagraph":case"subParagraph":case"environment":case"textFragment":case"disqualifyDelimiter":return!0;case"character":case"word":case"token":case"identifier":case"line":case"sentence":case"paragraph":case"boundedParagraph":case"document":case"nonWhitespaceSequence":case"boundedNonWhitespaceSequence":case"url":case"notebookCell":case"surroundingPair":case"surroundingPairInterior":case"customRegex":case"glyph":return!1;case"oneOf":throw Error(`Can't decide whether scope type ${JSON.stringify(t,void 0,3)} is language-specific`)}}function hv(t,e,r){if(!r)return t.document.range;let n=t.visibleRanges.reduce((a,l)=>a.union(l));n=t.document.range.intersection(n.with(n.start.translate(-10),n.end.translate(10)));let i=Yu(Array.from(e.generateScopes(t,n.start,"forward",{containment:"required"})))?.domain??n,o=Yu(Array.from(e.generateScopes(t,n.end,"forward",{containment:"required"})))?.domain??n;return i.union(o)}function us(t){return{contentRange:t.contentRange,removalRange:t.getRemovalRange(),removalHighlightRange:t.isLine?tn(t.getRemovalHighlightRange()):Ft(t.getRemovalHighlightRange()),leadingDelimiter:aI(t.getLeadingDelimiterTarget()),trailingDelimiter:aI(t.getTrailingDelimiterTarget()),interior:t.getInterior()?.map(us),boundary:t.getBoundary()?.map(us),insertionDelimiter:t.insertionDelimiter}}function aI(t){return t!=null?us(t):void 0}function cI(t,e,r,n,i){return co(e.generateScopes(t,n.start,"forward",{includeDescendantScopes:!0,distalPosition:n.end}),o=>({domain:o.domain,ranges:o.getTargets(!1).map(a=>({range:a.contentRange,targets:i?aQ(r,a).map(us):void 0}))}))}function aQ(t,e){try{return t.run(e)}catch(r){if(r.name==="NoContainingScopeError")return[];throw r}}function lI(t,e,r){return co(e.generateScopes(t,r.start,"forward",{includeDescendantScopes:!0,distalPosition:r.end}),n=>({domain:n.domain,targets:n.getTargets(!1).map(us)}))}var xg=class{constructor(e,r){this.scopeHandlerFactory=e;this.modifierStageFactory=r;this.provideScopeRanges=this.provideScopeRanges.bind(this),this.provideIterationScopeRanges=this.provideIterationScopeRanges.bind(this)}provideScopeRanges(e,{scopeType:r,visibleOnly:n}){let i=this.scopeHandlerFactory.create(r,e.document.languageId);return i==null?[]:lI(e,i,hv(e,i,n))}provideIterationScopeRanges(e,{scopeType:r,visibleOnly:n,includeNestedTargets:i}){let{languageId:o}=e.document,a=this.scopeHandlerFactory.create(r,o);if(a==null)return[];let l=this.scopeHandlerFactory.create(a.iterationScopeType,o);return l==null?[]:cI(e,l,this.modifierStageFactory.create({type:"everyScope",scopeType:r}),hv(e,a,n),i)}};var Tg=class{constructor(e,r){this.scopeRangeProvider=r;this.disposables=[];this.listeners=[];this.onChange=this.onChange.bind(this),this.onDidChangeScopeRanges=this.onDidChangeScopeRanges.bind(this),this.onDidChangeIterationScopeRanges=this.onDidChangeIterationScopeRanges.bind(this);let n=new zn(D().configuration,()=>this.onChange());this.disposables.push(D().onDidChangeVisibleTextEditors(n.run),D().onDidOpenTextDocument(n.run),D().onDidCloseTextDocument(n.run),D().onDidChangeTextDocument(n.run),D().onDidChangeTextEditorVisibleRanges(n.run),e.onDidChangeDefinition(this.onChange),n)}onDidChangeScopeRanges(e,r){let n=()=>{D().visibleTextEditors.forEach(i=>{let o;try{o=this.scopeRangeProvider.provideScopeRanges(i,r)}catch(a){if(nt(D().messages,"ScopeRangeWatcher.provide",a.message),o=[],D().runMode==="test")throw a}e(i,o)})};return this.listeners.push(n),n(),{dispose:()=>{Jt(this.listeners,n)}}}onDidChangeIterationScopeRanges(e,r){let n=()=>{D().visibleTextEditors.forEach(i=>{e(i,this.scopeRangeProvider.provideIterationScopeRanges(i,r))})};return this.listeners.push(n),n(),{dispose:()=>{Jt(this.listeners,n)}}}onChange(){this.listeners.forEach(e=>e())}dispose(){this.disposables.forEach(({dispose:e})=>{try{e()}catch{}})}};var Sg=class{constructor(e){this.scopeHandlerFactory=e;this.getScopeSupport=this.getScopeSupport.bind(this),this.getIterationScopeSupport=this.getIterationScopeSupport.bind(this)}getScopeSupport(e,r){let{languageId:n}=e.document,i=this.scopeHandlerFactory.create(r,n);return i==null?uI(n,r):pI(e,i)?0:1}getIterationScopeSupport(e,r){let{languageId:n}=e.document,i=this.scopeHandlerFactory.create(r,n);if(i==null)return uI(n,r);let o=this.scopeHandlerFactory.create(i.iterationScopeType,n);return o==null?3:pI(e,o)?0:1}};function pI(t,e){return!zk(e.generateScopes(t,new ae(0,0),"forward"))}function uI(t,e){switch(e.type){case"boundedNonWhitespaceSequence":case"surroundingPair":return 2;case"notebookCell":return 3;default:return El[t]?.[e.type]!=null?2:3}}var vg=class{constructor(e,r,n){this.scopeSupportChecker=r;this.scopeInfoProvider=n;this.listeners=[];this.onChange=this.onChange.bind(this),this.onDidChangeScopeSupport=this.onDidChangeScopeSupport.bind(this);let i=new zn(D().configuration,()=>this.onChange());this.disposable=jk(D().onDidOpenTextDocument(i.run),D().onDidCloseTextDocument(i.run),D().onDidChangeActiveTextEditor(i.run),D().onDidChangeTextDocument(i.run),e.onDidChangeDefinition(i.run),this.scopeInfoProvider.onDidChangeScopeInfo(this.onChange),i)}onDidChangeScopeSupport(e){return e(this.getSupportLevels()),this.listeners.push(e),{dispose:()=>{Jt(this.listeners,e)}}}onChange(){if(this.listeners.length===0)return;let e=this.getSupportLevels();this.listeners.forEach(r=>r(e))}getSupportLevels(){let e=D().activeTextEditor,r=e==null?()=>3:o=>this.scopeSupportChecker.getScopeSupport(e,o),n=e==null?()=>3:o=>this.scopeSupportChecker.getIterationScopeSupport(e,o);return this.scopeInfoProvider.getScopeTypeInfos().map(o=>({...o,support:r(o.scopeType),iterationScopeSupport:n(o.scopeType)}))}dispose(){this.disposable.dispose()}};async function fI({ide:t,hats:e,treeSitterQueryProvider:r,treeSitter:n=new Id,commandServerApi:i=new kd,talonSpokenForms:o=new Dd,snippets:a=new Ad}){rd(t);let l=new Sd(t),p=new Rd,u=new id,d=new Td(t,u),h=new Od(o),g=e!=null?new _d(p,l,e,i):new Pd;g.allocateHats();let x=r?await Sm.create(t,n,r):new Md;t.disposeOnExit(p,x,g,l,d);let b=[],w,F=M=>(w=M,nI(n,i,l,g,a,u,x,p,b,M));return{commandApi:{runCommand(M){return F(M)},runCommandSafe(...M){return F(Sf(M))},repeatPreviousCommand(){if(w==null)throw new Error("No previous command");return F(w)}},scopeProvider:lQ(x,u,h),customSpokenFormGenerator:h,storedTargets:u,hatTokenMap:g,injectIde:rd,runIntegrationTests:()=>oI(n,x),addCommandRunnerDecorator:M=>{b.push(M)}}}function lQ(t,e,r){let n=new Sa(t),i=new xg(n,new Va(t,e,n)),o=new Tg(t,i),a=new Sg(n),l=new yg(r),p=new vg(t,a,l);return{provideScopeRanges:i.provideScopeRanges,provideIterationScopeRanges:i.provideIterationScopeRanges,onDidChangeScopeRanges:o.onDidChangeScopeRanges,onDidChangeIterationScopeRanges:o.onDidChangeIterationScopeRanges,getScopeSupport:a.getScopeSupport,getIterationScopeSupport:a.getIterationScopeSupport,onDidChangeScopeSupport:p.onDidChangeScopeSupport,getScopeInfo:l.getScopeTypeInfo,onDidChangeScopeInfo:l.onDidChangeScopeInfo}}function dI(t,e){switch(e.type){case"UntypedTarget":return new kt({editor:t,isReversed:e.isReversed,contentRange:pf(e.contentRange),hasExplicitRange:e.hasExplicitRange});case"LineTarget":return new Or({editor:t,isReversed:e.isReversed,contentRange:pf(e.contentRange)});default:throw Error(`Unsupported target type ${e.type}`)}}var X1e=Symbol("unused");var Ql=class{constructor(e){this.position=e}},J1e={$0:new Ql(0),$1:new Ql(1),$2:new Ql(2)};var mI=require("node:events"),bg=class{constructor(){this.apis=new Map,this.commands=new Map,this.eventEmitter=new mI.EventEmitter}registerExtensionApi(e,r){this.apis.set(e,r)}getExtensionApi(e){return this.apis.get(e)}registerCommand(e,r){this.commands.set(e,r)}async executeCommand(e,...r){return await this.commands.get(e)(...r)}onEvent(e,r){return this.eventEmitter.on(e,r)}emitEvent(e,...r){return this.eventEmitter.emit(e,...r)}};function Vr(){return global._neovimRegistry==null&&(global._neovimRegistry=new bg),global._neovimRegistry}var hI="pokey.cursorless";async function wg(t,e){let r='return require("cursorless").buffer_get_selection()',[n,i,o,a,l]=await e.executeLua(r,[]),p;return l===!0?p=[new Te(new ae(o-1,a-1),new ae(n-1,i-1))]:p=[new Te(new ae(n-1,i-1),new ae(o-1,a-1))],console.debug(`bufferGetSelections(): selections=(${p[0].start.line}, ${p[0].start.character}), (${p[0].end.line}, ${p[0].end.character}) neovim=(${n},${i}),(${o},${a}),reverse=${l}`),p}async function gI(t,e){if(e.length!==1)throw new Error("bufferSetSelections() only supports one selection");let r=`return require("cursorless").select_range(${e[0].start.line+1}, ${e[0].start.character}, ${e[0].end.line+1}, ${e[0].end.character})`;console.debug(`bufferSetSelections() selections=(${e[0].start.line},${e[0].start.character}),(${e[0].end.line},${e[0].end.character}) luaCode="${r}"`),await t.executeLua(r,[])}async function yI(t,e,r){let n='return require("cursorless").window_get_visible_lines()',[i,o]=await e.executeLua(n,[]),a=new W(new ae(i-1,0),new ae(o-1,r[o-1].length-1));return console.debug(`windowGetVisibleRanges(): range=(${a.start.line}, ${a.start.character}), (${a.end.line}, ${a.end.character})`),[a]}async function xI(t){return await t.executeLua('return require("cursorless.utils").cursorless_nvim_path()',[])}async function _g(t,e){await e.callFunction("setreg",["*",t])}async function TI(t){return await t.callFunction("getreg",["*"])}async function SI(t){await t.executeLua('return require("cursorless.utils").paste()',[])}async function vI(t){await t.executeLua('return require("cursorless.utils").mode_switch_nt()',[])}async function bI(t){await t.executeLua('return require("cursorless.utils").mode_switch_t()',[])}async function wI(t,e){let r=`vim.notify("${e}")`;await t.executeLua(r,[])}var pQ={clipboardCopy:{acceptsLocation:!1},clipboardPaste:!0,toggleLineComment:void 0,indentLine:void 0,outdentLine:void 0,rename:void 0,quickFix:void 0,revealDefinition:void 0,revealTypeDefinition:void 0,showHover:void 0,showDebugHover:void 0,extractVariable:void 0,fold:void 0,highlight:{acceptsLocation:!0},unfold:void 0,showReferences:void 0,insertLineAfter:void 0},Eg=class{constructor(){this.commands=pQ}};var Zl=class{constructor(e){this.client=e}async readText(){return await TI(this.client)}async writeText(e){return await _g(e,this.client)}};var Rg=ur(gv(),1);var Xl=class{constructor(){this.notifier=new Wt;this.mocks={...nf};this.scopes=[];this.onDidChangeConfiguration=this.notifier.registerListener;this.onDidChangeConfiguration=this.onDidChangeConfiguration.bind(this)}getOwnConfiguration(e,r){if(r!=null){for(let{scope:n,values:i}of this.scopes)if(uQ(n,r))return(0,Rg.get)(i,e)??(0,Rg.get)(this.mocks,e)}return(0,Rg.get)(this.mocks,e)}mockConfiguration(e,r){this.mocks[e]=r,this.notifier.notifyListeners()}mockConfigurationScope(e,r,n=!1){this.scopes.push({scope:e,values:r}),n||this.notifier.notifyListeners()}};function uQ(t,e){return t.languageId===e.languageId}async function yv(t,e,r,n){console.debug("neovimEdit() [unsorted]:");for(let a of n)console.debug(`	range=${JSON.stringify(a.range)}, text='${a.text}', isReplace=${a.isReplace}`);n.sort((a,l)=>(_I(a)||EI(a))&&(_I(l)||EI(l))?1:a.range.start.line===l.range.start.line?l.range.start.character-a.range.start.character:l.range.start.line-a.range.start.line),console.debug("neovimEdit() [sorted]:");for(let a of n)console.debug(`	range=${JSON.stringify(a.range)}, text='${a.text}', isReplace=${a.isReplace}`);let i=e.getTextDocument(await t.window.buffer),o=[];for(let a of n)o.push({range:a.range,rangeOffset:i.offsetAt(a.range.start),rangeLength:i.offsetAt(a.range.end)-i.offsetAt(a.range.start),text:a.text});Vr().emitEvent("onDidChangeTextDocument",{document:i,contentChanges:o});for(let a of n){let{range:l,text:p,isReplace:u}=a;p===""?await RI(t,l):l.isEmpty&&!u?await kI(t,l.start,p):await fQ(t,l,p)}return await e.updateTextEditor(),!0}async function RI(t,e){console.debug(`neovimDelete(): range=${JSON.stringify(e)}`);let r=await t.window.buffer,n=(await r.getLines({start:e.end.line,end:e.end.line+1,strictIndexing:!0}))[0],i=n.slice(e.end.character);if(e.start.line===e.end.line){let l=n.slice(0,e.start.character)+i;await r.setLines(l,{start:e.start.line,end:e.start.line+1,strictIndexing:!0});return}if(e.start.character===0){await r.setLines(i,{start:e.start.line,end:e.end.line+1,strictIndexing:!0});return}let o=(await r.getLines({start:e.start.line,end:e.start.line+1,strictIndexing:!0}))[0],a=o.slice(0,e.start.character);if(e.start.character<=o.length){await r.setLines(a+i,{start:e.start.line,end:e.end.line+1,strictIndexing:!0});return}await r.setLines([a,i],{start:e.start.line,end:e.end.line+1,strictIndexing:!0})}async function kI(t,e,r){console.debug(`neovimInsert(): position=${JSON.stringify(e)}, text='${r}'`);let n=r.replace(/(?:\r\n|\r|\n)/g,`
`).split(`
`),i=await t.window.buffer,o=(await i.getLines({start:e.line,end:e.line+1,strictIndexing:!0}))[0],a=o.slice(0,e.character),l=o.slice(e.character);if(n.length===1){let d=a+n[0]+l;await i.setLines(d,{start:e.line,end:e.line+1,strictIndexing:!0});return}let p=a+n[0],u=n[n.length-1]+l;await i.setLines([p,...n.slice(1,n.length-1),u],{start:e.line,end:e.line+1,strictIndexing:!0})}async function fQ(t,e,r){console.debug(`neovimReplace(): range=${JSON.stringify(e)}, text='${r}'`),await RI(t,e),await kI(t,e.start,r)}function _I(t){return t.range.isEmpty&&!t.isReplace}function EI(t){return t.text!==""&&!!(!t.range.isEmpty||t.isReplace)}function PI(t){return Vr().onEvent("onDidChangeTextDocument",t),AI()}function MI(t,e,r){return Vr().onEvent("onDidOpenTextDocument",t),AI()}function AI(){return{dispose(){}}}var Jl=class{constructor(){this.data={...of}}get(e){return this.data[e]}set(e,r){return this.data[e]=r,Promise.resolve()}};var F1=ur(gv(),1);var ep=class{async showMessage(e,r,n,...i){}};async function DI(t,e){let r=e.activeTextEditor,n=await t.window,i=await wg(n,t),o=r.document.getText(i[0]);await _g(o,t)}async function II(t,e){await SI(t)}var kg=class{constructor(e,r,n,i,o,a,l){this.id=e;this.client=r;this.neovimIDE=n;this.window=i;this._document=o,this._selections=l,this._visibleRanges=a}get document(){return this._document}updateDocument(e,r,n,i){if(n)this._document=n;else if(i)this._document.update(i);else throw Error("updateDocument(): invalid arguments");return this._selections=r,this._visibleRanges=e,this._document}get selections(){return this._selections}async setSelections(e){this._selections=e,await gI(this.client,e)}get visibleRanges(){return this._visibleRanges}get options(){throw Error("get options Not implemented")}set options(e){throw Error("set options Not implemented")}get isActive(){return!0}isEqual(e){return this.id===e.id}async revealRange(e){}revealLine(e,r){throw Error("revealLine Not implemented")}async edit(e){return await yv(this.client,this.neovimIDE,this.window,e)}focus(){return Promise.resolve()}editNewNotebookCellAbove(){throw Error("editNewNotebookCellAbove Not implemented")}editNewNotebookCellBelow(){throw Error("editNewNotebookCellBelow Not implemented")}openLink(e,r){throw Error("openLink Not implemented")}fold(e){throw Error("fold Not implemented")}unfold(e){throw Error("unfold Not implemented")}toggleBreakpoint(e){throw Error("toggleBreakpoint Not implemented")}async toggleLineComment(e){throw Error("toggleLineComment Not implemented")}async clipboardCopy(e){await DI(this.client,this.neovimIDE)}async clipboardPaste(){await II(this.client,this.neovimIDE)}async indentLine(e){throw Error("indentLine Not implemented")}async outdentLine(e){throw Error("outdentLine Not implemented")}async insertLineAfter(e){throw Error("insertLineAfter Not implemented")}insertSnippet(e,r){throw Error("insertSnippet Not implemented")}async rename(e){throw Error("rename Not implemented")}async showReferences(e){throw Error("showReferences Not implemented")}async quickFix(e){throw Error("quickFix Not implemented")}async revealDefinition(e){throw Error("revealDefinition Not implemented")}async revealTypeDefinition(e){throw Error("revealTypeDefinition Not implemented")}async showHover(e){throw Error("showHover Not implemented")}async showDebugHover(e){throw Error("showDebugHover Not implemented")}async extractVariable(e){throw Error("extractVariable Not implemented")}};var Ub=ur(require("path"),1);var FI;(()=>{"use strict";var t={470:i=>{function o(p){if(typeof p!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(p))}function a(p,u){for(var d,h="",g=0,x=-1,b=0,w=0;w<=p.length;++w){if(w<p.length)d=p.charCodeAt(w);else{if(d===47)break;d=47}if(d===47){if(!(x===w-1||b===1))if(x!==w-1&&b===2){if(h.length<2||g!==2||h.charCodeAt(h.length-1)!==46||h.charCodeAt(h.length-2)!==46){if(h.length>2){var F=h.lastIndexOf("/");if(F!==h.length-1){F===-1?(h="",g=0):g=(h=h.slice(0,F)).length-1-h.lastIndexOf("/"),x=w,b=0;continue}}else if(h.length===2||h.length===1){h="",g=0,x=w,b=0;continue}}u&&(h.length>0?h+="/..":h="..",g=2)}else h.length>0?h+="/"+p.slice(x+1,w):h=p.slice(x+1,w),g=w-x-1;x=w,b=0}else d===46&&b!==-1?++b:b=-1}return h}var l={resolve:function(){for(var p,u="",d=!1,h=arguments.length-1;h>=-1&&!d;h--){var g;h>=0?g=arguments[h]:(p===void 0&&(p=process.cwd()),g=p),o(g),g.length!==0&&(u=g+"/"+u,d=g.charCodeAt(0)===47)}return u=a(u,!d),d?u.length>0?"/"+u:"/":u.length>0?u:"."},normalize:function(p){if(o(p),p.length===0)return".";var u=p.charCodeAt(0)===47,d=p.charCodeAt(p.length-1)===47;return(p=a(p,!u)).length!==0||u||(p="."),p.length>0&&d&&(p+="/"),u?"/"+p:p},isAbsolute:function(p){return o(p),p.length>0&&p.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var p,u=0;u<arguments.length;++u){var d=arguments[u];o(d),d.length>0&&(p===void 0?p=d:p+="/"+d)}return p===void 0?".":l.normalize(p)},relative:function(p,u){if(o(p),o(u),p===u||(p=l.resolve(p))===(u=l.resolve(u)))return"";for(var d=1;d<p.length&&p.charCodeAt(d)===47;++d);for(var h=p.length,g=h-d,x=1;x<u.length&&u.charCodeAt(x)===47;++x);for(var b=u.length-x,w=g<b?g:b,F=-1,M=0;M<=w;++M){if(M===w){if(b>w){if(u.charCodeAt(x+M)===47)return u.slice(x+M+1);if(M===0)return u.slice(x+M)}else g>w&&(p.charCodeAt(d+M)===47?F=M:M===0&&(F=0));break}var U=p.charCodeAt(d+M);if(U!==u.charCodeAt(x+M))break;U===47&&(F=M)}var Z="";for(M=d+F+1;M<=h;++M)M!==h&&p.charCodeAt(M)!==47||(Z.length===0?Z+="..":Z+="/..");return Z.length>0?Z+u.slice(x+F):(x+=F,u.charCodeAt(x)===47&&++x,u.slice(x))},_makeLong:function(p){return p},dirname:function(p){if(o(p),p.length===0)return".";for(var u=p.charCodeAt(0),d=u===47,h=-1,g=!0,x=p.length-1;x>=1;--x)if((u=p.charCodeAt(x))===47){if(!g){h=x;break}}else g=!1;return h===-1?d?"/":".":d&&h===1?"//":p.slice(0,h)},basename:function(p,u){if(u!==void 0&&typeof u!="string")throw new TypeError('"ext" argument must be a string');o(p);var d,h=0,g=-1,x=!0;if(u!==void 0&&u.length>0&&u.length<=p.length){if(u.length===p.length&&u===p)return"";var b=u.length-1,w=-1;for(d=p.length-1;d>=0;--d){var F=p.charCodeAt(d);if(F===47){if(!x){h=d+1;break}}else w===-1&&(x=!1,w=d+1),b>=0&&(F===u.charCodeAt(b)?--b==-1&&(g=d):(b=-1,g=w))}return h===g?g=w:g===-1&&(g=p.length),p.slice(h,g)}for(d=p.length-1;d>=0;--d)if(p.charCodeAt(d)===47){if(!x){h=d+1;break}}else g===-1&&(x=!1,g=d+1);return g===-1?"":p.slice(h,g)},extname:function(p){o(p);for(var u=-1,d=0,h=-1,g=!0,x=0,b=p.length-1;b>=0;--b){var w=p.charCodeAt(b);if(w!==47)h===-1&&(g=!1,h=b+1),w===46?u===-1?u=b:x!==1&&(x=1):u!==-1&&(x=-1);else if(!g){d=b+1;break}}return u===-1||h===-1||x===0||x===1&&u===h-1&&u===d+1?"":p.slice(u,h)},format:function(p){if(p===null||typeof p!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof p);return function(u,d){var h=d.dir||d.root,g=d.base||(d.name||"")+(d.ext||"");return h?h===d.root?h+g:h+"/"+g:g}(0,p)},parse:function(p){o(p);var u={root:"",dir:"",base:"",ext:"",name:""};if(p.length===0)return u;var d,h=p.charCodeAt(0),g=h===47;g?(u.root="/",d=1):d=0;for(var x=-1,b=0,w=-1,F=!0,M=p.length-1,U=0;M>=d;--M)if((h=p.charCodeAt(M))!==47)w===-1&&(F=!1,w=M+1),h===46?x===-1?x=M:U!==1&&(U=1):x!==-1&&(U=-1);else if(!F){b=M+1;break}return x===-1||w===-1||U===0||U===1&&x===w-1&&x===b+1?w!==-1&&(u.base=u.name=b===0&&g?p.slice(1,w):p.slice(b,w)):(b===0&&g?(u.name=p.slice(1,x),u.base=p.slice(1,w)):(u.name=p.slice(b,x),u.base=p.slice(b,w)),u.ext=p.slice(x,w)),b>0?u.dir=p.slice(0,b-1):g&&(u.dir="/"),u},sep:"/",delimiter:":",win32:null,posix:null};l.posix=l,i.exports=l}},e={};function r(i){var o=e[i];if(o!==void 0)return o.exports;var a=e[i]={exports:{}};return t[i](a,a.exports,r),a.exports}r.d=(i,o)=>{for(var a in o)r.o(o,a)&&!r.o(i,a)&&Object.defineProperty(i,a,{enumerable:!0,get:o[a]})},r.o=(i,o)=>Object.prototype.hasOwnProperty.call(i,o),r.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})};var n={};(()=>{let i;r.r(n),r.d(n,{URI:()=>g,Utils:()=>N}),typeof process=="object"?i=process.platform==="win32":typeof navigator=="object"&&(i=navigator.userAgent.indexOf("Windows")>=0);let o=/^\w[\w\d+.-]*$/,a=/^\//,l=/^\/\//;function p(O,I){if(!O.scheme&&I)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${O.authority}", path: "${O.path}", query: "${O.query}", fragment: "${O.fragment}"}`);if(O.scheme&&!o.test(O.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(O.path){if(O.authority){if(!a.test(O.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(l.test(O.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}let u="",d="/",h=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class g{static isUri(I){return I instanceof g||!!I&&typeof I.authority=="string"&&typeof I.fragment=="string"&&typeof I.path=="string"&&typeof I.query=="string"&&typeof I.scheme=="string"&&typeof I.fsPath=="string"&&typeof I.with=="function"&&typeof I.toString=="function"}scheme;authority;path;query;fragment;constructor(I,$,j,K,Q,te=!1){typeof I=="object"?(this.scheme=I.scheme||u,this.authority=I.authority||u,this.path=I.path||u,this.query=I.query||u,this.fragment=I.fragment||u):(this.scheme=function(me,re){return me||re?me:"file"}(I,te),this.authority=$||u,this.path=function(me,re){switch(me){case"https":case"http":case"file":re?re[0]!==d&&(re=d+re):re=d}return re}(this.scheme,j||u),this.query=K||u,this.fragment=Q||u,p(this,te))}get fsPath(){return U(this,!1)}with(I){if(!I)return this;let{scheme:$,authority:j,path:K,query:Q,fragment:te}=I;return $===void 0?$=this.scheme:$===null&&($=u),j===void 0?j=this.authority:j===null&&(j=u),K===void 0?K=this.path:K===null&&(K=u),Q===void 0?Q=this.query:Q===null&&(Q=u),te===void 0?te=this.fragment:te===null&&(te=u),$===this.scheme&&j===this.authority&&K===this.path&&Q===this.query&&te===this.fragment?this:new b($,j,K,Q,te)}static parse(I,$=!1){let j=h.exec(I);return j?new b(j[2]||u,de(j[4]||u),de(j[5]||u),de(j[7]||u),de(j[9]||u),$):new b(u,u,u,u,u)}static file(I){let $=u;if(i&&(I=I.replace(/\\/g,d)),I[0]===d&&I[1]===d){let j=I.indexOf(d,2);j===-1?($=I.substring(2),I=d):($=I.substring(2,j),I=I.substring(j)||d)}return new b("file",$,I,u,u)}static from(I){let $=new b(I.scheme,I.authority,I.path,I.query,I.fragment);return p($,!0),$}toString(I=!1){return Z(this,I)}toJSON(){return this}static revive(I){if(I){if(I instanceof g)return I;{let $=new b(I);return $._formatted=I.external,$._fsPath=I._sep===x?I.fsPath:null,$}}return I}}let x=i?1:void 0;class b extends g{_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=U(this,!1)),this._fsPath}toString(I=!1){return I?Z(this,!0):(this._formatted||(this._formatted=Z(this,!1)),this._formatted)}toJSON(){let I={$mid:1};return this._fsPath&&(I.fsPath=this._fsPath,I._sep=x),this._formatted&&(I.external=this._formatted),this.path&&(I.path=this.path),this.scheme&&(I.scheme=this.scheme),this.authority&&(I.authority=this.authority),this.query&&(I.query=this.query),this.fragment&&(I.fragment=this.fragment),I}}let w={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function F(O,I,$){let j,K=-1;for(let Q=0;Q<O.length;Q++){let te=O.charCodeAt(Q);if(te>=97&&te<=122||te>=65&&te<=90||te>=48&&te<=57||te===45||te===46||te===95||te===126||I&&te===47||$&&te===91||$&&te===93||$&&te===58)K!==-1&&(j+=encodeURIComponent(O.substring(K,Q)),K=-1),j!==void 0&&(j+=O.charAt(Q));else{j===void 0&&(j=O.substr(0,Q));let me=w[te];me!==void 0?(K!==-1&&(j+=encodeURIComponent(O.substring(K,Q)),K=-1),j+=me):K===-1&&(K=Q)}}return K!==-1&&(j+=encodeURIComponent(O.substring(K))),j!==void 0?j:O}function M(O){let I;for(let $=0;$<O.length;$++){let j=O.charCodeAt($);j===35||j===63?(I===void 0&&(I=O.substr(0,$)),I+=w[j]):I!==void 0&&(I+=O[$])}return I!==void 0?I:O}function U(O,I){let $;return $=O.authority&&O.path.length>1&&O.scheme==="file"?`//${O.authority}${O.path}`:O.path.charCodeAt(0)===47&&(O.path.charCodeAt(1)>=65&&O.path.charCodeAt(1)<=90||O.path.charCodeAt(1)>=97&&O.path.charCodeAt(1)<=122)&&O.path.charCodeAt(2)===58?I?O.path.substr(1):O.path[1].toLowerCase()+O.path.substr(2):O.path,i&&($=$.replace(/\//g,"\\")),$}function Z(O,I){let $=I?M:F,j="",{scheme:K,authority:Q,path:te,query:me,fragment:re}=O;if(K&&(j+=K,j+=":"),(Q||K==="file")&&(j+=d,j+=d),Q){let Re=Q.indexOf("@");if(Re!==-1){let or=Q.substr(0,Re);Q=Q.substr(Re+1),Re=or.lastIndexOf(":"),Re===-1?j+=$(or,!1,!1):(j+=$(or.substr(0,Re),!1,!1),j+=":",j+=$(or.substr(Re+1),!1,!0)),j+="@"}Q=Q.toLowerCase(),Re=Q.lastIndexOf(":"),Re===-1?j+=$(Q,!1,!0):(j+=$(Q.substr(0,Re),!1,!0),j+=Q.substr(Re))}if(te){if(te.length>=3&&te.charCodeAt(0)===47&&te.charCodeAt(2)===58){let Re=te.charCodeAt(1);Re>=65&&Re<=90&&(te=`/${String.fromCharCode(Re+32)}:${te.substr(3)}`)}else if(te.length>=2&&te.charCodeAt(1)===58){let Re=te.charCodeAt(0);Re>=65&&Re<=90&&(te=`${String.fromCharCode(Re+32)}:${te.substr(2)}`)}j+=$(te,!0,!1)}return me&&(j+="?",j+=$(me,!1,!1)),re&&(j+="#",j+=I?re:F(re,!1,!1)),j}function ne(O){try{return decodeURIComponent(O)}catch{return O.length>3?O.substr(0,3)+ne(O.substr(3)):O}}let he=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function de(O){return O.match(he)?O.replace(he,I=>ne(I)):O}var ht=r(470);let Dt=ht.posix||ht,it="/";var N;(function(O){O.joinPath=function(I,...$){return I.with({path:Dt.join(I.path,...$)})},O.resolvePath=function(I,...$){let j=I.path,K=!1;j[0]!==it&&(j=it+j,K=!0);let Q=Dt.resolve(j,...$);return K&&Q[0]===it&&!I.authority&&(Q=Q.substring(1)),I.with({path:Q})},O.dirname=function(I){if(I.path.length===0||I.path===it)return I;let $=Dt.dirname(I.path);return $.length===1&&$.charCodeAt(0)===46&&($=""),I.with({path:$})},O.basename=function(I){return Dt.basename(I.path)},O.extname=function(I){return Dt.extname(I.path)}})(N||(N={}))})(),FI=n})();var{URI:CI,Utils:XCe}=FI;var tF=ur(GI(),1);var rp=t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>65536)throw new TypeError("pattern is too long")};var SQ={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},np=t=>t.replace(/[[\]\\-]/g,"\\$&"),vQ=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),KI=t=>t.join(""),QI=(t,e)=>{let r=e;if(t.charAt(r)!=="[")throw new Error("not in a brace expression");let n=[],i=[],o=r+1,a=!1,l=!1,p=!1,u=!1,d=r,h="";e:for(;o<t.length;){let w=t.charAt(o);if((w==="!"||w==="^")&&o===r+1){u=!0,o++;continue}if(w==="]"&&a&&!p){d=o+1;break}if(a=!0,w==="\\"&&!p){p=!0,o++;continue}if(w==="["&&!p){for(let[F,[M,U,Z]]of Object.entries(SQ))if(t.startsWith(F,o)){if(h)return["$.",!1,t.length-r,!0];o+=F.length,Z?i.push(M):n.push(M),l=l||U;continue e}}if(p=!1,h){w>h?n.push(np(h)+"-"+np(w)):w===h&&n.push(np(w)),h="",o++;continue}if(t.startsWith("-]",o+1)){n.push(np(w+"-")),o+=2;continue}if(t.startsWith("-",o+1)){h=w,o+=2;continue}n.push(np(w)),o++}if(d<o)return["",!1,0,!1];if(!n.length&&!i.length)return["$.",!1,t.length-r,!0];if(i.length===0&&n.length===1&&/^\\?.$/.test(n[0])&&!u){let w=n[0].length===2?n[0].slice(-1):n[0];return[vQ(w),!1,d-r,!1]}let g="["+(u?"^":"")+KI(n)+"]",x="["+(u?"":"^")+KI(i)+"]";return[n.length&&i.length?"("+g+"|"+x+")":n.length?g:x,l,d-r,!0]};var Dn=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");var bQ=new Set(["!","?","+","*","@"]),ZI=t=>bQ.has(t),wQ="(?!(?:^|/)\\.\\.?(?:$|/))",Pg="(?!\\.)",_Q=new Set(["[","."]),EQ=new Set(["..","."]),RQ=new Set("().*{}+?[]^$\\!"),kQ=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Sv="[^/]",YI=Sv+"*?",XI=Sv+"+?",Ga=class t{type;#e;#r;#o=!1;#n=[];#s;#S;#l;#u=!1;#c;#a;#i=!1;constructor(e,r,n={}){this.type=e,e&&(this.#r=!0),this.#s=r,this.#e=this.#s?this.#s.#e:this,this.#c=this.#e===this?n:this.#e.#c,this.#l=this.#e===this?[]:this.#e.#l,e==="!"&&!this.#e.#u&&this.#l.push(this),this.#S=this.#s?this.#s.#n.length:0}get hasMagic(){if(this.#r!==void 0)return this.#r;for(let e of this.#n)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#r=!0;return this.#r}toString(){return this.#a!==void 0?this.#a:this.type?this.#a=this.type+"("+this.#n.map(e=>String(e)).join("|")+")":this.#a=this.#n.map(e=>String(e)).join("")}#g(){if(this!==this.#e)throw new Error("should only call on root");if(this.#u)return this;this.toString(),this.#u=!0;let e;for(;e=this.#l.pop();){if(e.type!=="!")continue;let r=e,n=r.#s;for(;n;){for(let i=r.#S+1;!n.type&&i<n.#n.length;i++)for(let o of e.#n){if(typeof o=="string")throw new Error("string part in extglob AST??");o.copyIn(n.#n[i])}r=n,n=r.#s}}return this}push(...e){for(let r of e)if(r!==""){if(typeof r!="string"&&!(r instanceof t&&r.#s===this))throw new Error("invalid part: "+r);this.#n.push(r)}}toJSON(){let e=this.type===null?this.#n.slice().map(r=>typeof r=="string"?r:r.toJSON()):[this.type,...this.#n.map(r=>r.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#u&&this.#s?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#s?.isStart())return!1;if(this.#S===0)return!0;let e=this.#s;for(let r=0;r<this.#S;r++){let n=e.#n[r];if(!(n instanceof t&&n.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#s?.type==="!")return!0;if(!this.#s?.isEnd())return!1;if(!this.type)return this.#s?.isEnd();let e=this.#s?this.#s.#n.length:0;return this.#S===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let r=new t(this.type,e);for(let n of this.#n)r.copyIn(n);return r}static#y(e,r,n,i){let o=!1,a=!1,l=-1,p=!1;if(r.type===null){let x=n,b="";for(;x<e.length;){let w=e.charAt(x++);if(o||w==="\\"){o=!o,b+=w;continue}if(a){x===l+1?(w==="^"||w==="!")&&(p=!0):w==="]"&&!(x===l+2&&p)&&(a=!1),b+=w;continue}else if(w==="["){a=!0,l=x,p=!1,b+=w;continue}if(!i.noext&&ZI(w)&&e.charAt(x)==="("){r.push(b),b="";let F=new t(w,r);x=t.#y(e,F,x,i),r.push(F);continue}b+=w}return r.push(b),x}let u=n+1,d=new t(null,r),h=[],g="";for(;u<e.length;){let x=e.charAt(u++);if(o||x==="\\"){o=!o,g+=x;continue}if(a){u===l+1?(x==="^"||x==="!")&&(p=!0):x==="]"&&!(u===l+2&&p)&&(a=!1),g+=x;continue}else if(x==="["){a=!0,l=u,p=!1,g+=x;continue}if(ZI(x)&&e.charAt(u)==="("){d.push(g),g="";let b=new t(x,d);d.push(b),u=t.#y(e,b,u,i);continue}if(x==="|"){d.push(g),g="",h.push(d),d=new t(null,r);continue}if(x===")")return g===""&&r.#n.length===0&&(r.#i=!0),d.push(g),g="",r.push(...h,d),u;g+=x}return r.type=null,r.#r=void 0,r.#n=[e.substring(n-1)],u}static fromGlob(e,r={}){let n=new t(null,void 0,r);return t.#y(e,n,0,r),n}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[r,n,i,o]=this.toRegExpSource();if(!(i||this.#r||this.#c.nocase&&!this.#c.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return n;let l=(this.#c.nocase?"i":"")+(o?"u":"");return Object.assign(new RegExp(`^${r}$`,l),{_src:r,_glob:e})}toRegExpSource(e){let r=e??!!this.#c.dot;if(this.#e===this&&this.#g(),!this.type){let p=this.isStart()&&this.isEnd(),u=this.#n.map(x=>{let[b,w,F,M]=typeof x=="string"?t.#f(x,this.#r,p):x.toRegExpSource(e);return this.#r=this.#r||F,this.#o=this.#o||M,b}).join(""),d="";if(this.isStart()&&typeof this.#n[0]=="string"&&!(this.#n.length===1&&EQ.has(this.#n[0]))){let b=_Q,w=r&&b.has(u.charAt(0))||u.startsWith("\\.")&&b.has(u.charAt(2))||u.startsWith("\\.\\.")&&b.has(u.charAt(4)),F=!r&&!e&&b.has(u.charAt(0));d=w?wQ:F?Pg:""}let h="";return this.isEnd()&&this.#e.#u&&this.#s?.type==="!"&&(h="(?:$|\\/)"),[d+u+h,Dn(u),this.#r=!!this.#r,this.#o]}let n=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",o=this.#d(r);if(this.isStart()&&this.isEnd()&&!o&&this.type!=="!"){let p=this.toString();return this.#n=[p],this.type=null,this.#r=void 0,[p,Dn(this.toString()),!1,!1]}let a=!n||e||r||!Pg?"":this.#d(!0);a===o&&(a=""),a&&(o=`(?:${o})(?:${a})*?`);let l="";if(this.type==="!"&&this.#i)l=(this.isStart()&&!r?Pg:"")+XI;else{let p=this.type==="!"?"))"+(this.isStart()&&!r&&!e?Pg:"")+YI+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&a?")":this.type==="*"&&a?")?":`)${this.type}`;l=i+o+p}return[l,Dn(o),this.#r=!!this.#r,this.#o]}#d(e){return this.#n.map(r=>{if(typeof r=="string")throw new Error("string type in extglob ast??");let[n,i,o,a]=r.toRegExpSource(e);return this.#o=this.#o||a,n}).filter(r=>!(this.isStart()&&this.isEnd())||!!r).join("|")}static#f(e,r,n=!1){let i=!1,o="",a=!1;for(let l=0;l<e.length;l++){let p=e.charAt(l);if(i){i=!1,o+=(RQ.has(p)?"\\":"")+p;continue}if(p==="\\"){l===e.length-1?o+="\\\\":i=!0;continue}if(p==="["){let[u,d,h,g]=QI(e,l);if(h){o+=u,a=a||d,l+=h-1,r=r||g;continue}}if(p==="*"){n&&e==="*"?o+=XI:o+=YI,r=!0;continue}if(p==="?"){o+=Sv,r=!0;continue}o+=kQ(p)}return[o,Dn(e),!!r,a]}};var Ka=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&");var nr=(t,e,r={})=>(rp(e),!r.nocomment&&e.charAt(0)==="#"?!1:new Br(e,r).match(t)),PQ=/^\*+([^+@!?\*\[\(]*)$/,MQ=t=>e=>!e.startsWith(".")&&e.endsWith(t),AQ=t=>e=>e.endsWith(t),DQ=t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),IQ=t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),FQ=/^\*+\.\*+$/,CQ=t=>!t.startsWith(".")&&t.includes("."),OQ=t=>t!=="."&&t!==".."&&t.includes("."),NQ=/^\.\*+$/,LQ=t=>t!=="."&&t!==".."&&t.startsWith("."),UQ=/^\*+$/,VQ=t=>t.length!==0&&!t.startsWith("."),BQ=t=>t.length!==0&&t!=="."&&t!=="..",HQ=/^\?+([^+@!?\*\[\(]*)?$/,WQ=([t,e=""])=>{let r=rF([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},$Q=([t,e=""])=>{let r=nF([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},qQ=([t,e=""])=>{let r=nF([t]);return e?n=>r(n)&&n.endsWith(e):r},jQ=([t,e=""])=>{let r=rF([t]);return e?n=>r(n)&&n.endsWith(e):r},rF=([t])=>{let e=t.length;return r=>r.length===e&&!r.startsWith(".")},nF=([t])=>{let e=t.length;return r=>r.length===e&&r!=="."&&r!==".."},iF=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",JI={win32:{sep:"\\"},posix:{sep:"/"}},zQ=iF==="win32"?JI.win32.sep:JI.posix.sep;nr.sep=zQ;var Ut=Symbol("globstar **");nr.GLOBSTAR=Ut;var GQ="[^/]",KQ=GQ+"*?",QQ="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",ZQ="(?:(?!(?:\\/|^)\\.).)*?",YQ=(t,e={})=>r=>nr(r,t,e);nr.filter=YQ;var pn=(t,e={})=>Object.assign({},t,e),XQ=t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return nr;let e=nr;return Object.assign((n,i,o={})=>e(n,i,pn(t,o)),{Minimatch:class extends e.Minimatch{constructor(i,o={}){super(i,pn(t,o))}static defaults(i){return e.defaults(pn(t,i)).Minimatch}},AST:class extends e.AST{constructor(i,o,a={}){super(i,o,pn(t,a))}static fromGlob(i,o={}){return e.AST.fromGlob(i,pn(t,o))}},unescape:(n,i={})=>e.unescape(n,pn(t,i)),escape:(n,i={})=>e.escape(n,pn(t,i)),filter:(n,i={})=>e.filter(n,pn(t,i)),defaults:n=>e.defaults(pn(t,n)),makeRe:(n,i={})=>e.makeRe(n,pn(t,i)),braceExpand:(n,i={})=>e.braceExpand(n,pn(t,i)),match:(n,i,o={})=>e.match(n,i,pn(t,o)),sep:e.sep,GLOBSTAR:Ut})};nr.defaults=XQ;var oF=(t,e={})=>(rp(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:(0,tF.default)(t));nr.braceExpand=oF;var JQ=(t,e={})=>new Br(t,e).makeRe();nr.makeRe=JQ;var eZ=(t,e,r={})=>{let n=new Br(e,r);return t=t.filter(i=>n.match(i)),n.options.nonull&&!t.length&&t.push(e),t};nr.match=eZ;var eF=/[?*]|[+@!]\(.*?\)|\[|\]/,tZ=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Br=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,r={}){rp(e),r=r||{},this.options=r,this.pattern=e,this.platform=r.platform||iF,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!r.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!r.nonegate,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=r.windowsNoMagicRoot!==void 0?r.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let r of e)if(typeof r!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],r.debug&&(this.debug=(...o)=>console.error(...o)),this.debug(this.pattern,this.globSet);let n=this.globSet.map(o=>this.slashSplit(o));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let i=this.globParts.map((o,a,l)=>{if(this.isWindows&&this.windowsNoMagicRoot){let p=o[0]===""&&o[1]===""&&(o[2]==="?"||!eF.test(o[2]))&&!eF.test(o[3]),u=/^[a-z]:/i.test(o[0]);if(p)return[...o.slice(0,4),...o.slice(4).map(d=>this.parse(d))];if(u)return[o[0],...o.slice(1).map(d=>this.parse(d))]}return o.map(p=>this.parse(p))});if(this.debug(this.pattern,i),this.set=i.filter(o=>o.indexOf(!1)===-1),this.isWindows)for(let o=0;o<this.set.length;o++){let a=this.set[o];a[0]===""&&a[1]===""&&this.globParts[o][2]==="?"&&typeof a[3]=="string"&&/^[a-z]:$/i.test(a[3])&&(a[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let n=0;n<e.length;n++)for(let i=0;i<e[n].length;i++)e[n][i]==="**"&&(e[n][i]="*");let{optimizationLevel:r=1}=this.options;return r>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):r>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(r=>{let n=-1;for(;(n=r.indexOf("**",n+1))!==-1;){let i=n;for(;r[i+1]==="**";)i++;i!==n&&r.splice(n,i-n)}return r})}levelOneOptimize(e){return e.map(r=>(r=r.reduce((n,i)=>{let o=n[n.length-1];return i==="**"&&o==="**"?n:i===".."&&o&&o!==".."&&o!=="."&&o!=="**"?(n.pop(),n):(n.push(i),n)},[]),r.length===0?[""]:r))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let r=!1;do{if(r=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let o=e[i];i===1&&o===""&&e[0]===""||(o==="."||o==="")&&(r=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(r=!0,e.pop())}let n=0;for(;(n=e.indexOf("..",n+1))!==-1;){let i=e[n-1];i&&i!=="."&&i!==".."&&i!=="**"&&(r=!0,e.splice(n-1,2),n-=2)}}while(r);return e.length===0?[""]:e}firstPhasePreProcess(e){let r=!1;do{r=!1;for(let n of e){let i=-1;for(;(i=n.indexOf("**",i+1))!==-1;){let a=i;for(;n[a+1]==="**";)a++;a>i&&n.splice(i+1,a-i);let l=n[i+1],p=n[i+2],u=n[i+3];if(l!==".."||!p||p==="."||p===".."||!u||u==="."||u==="..")continue;r=!0,n.splice(i,1);let d=n.slice(0);d[i]="**",e.push(d),i--}if(!this.preserveMultipleSlashes){for(let a=1;a<n.length-1;a++){let l=n[a];a===1&&l===""&&n[0]===""||(l==="."||l==="")&&(r=!0,n.splice(a,1),a--)}n[0]==="."&&n.length===2&&(n[1]==="."||n[1]==="")&&(r=!0,n.pop())}let o=0;for(;(o=n.indexOf("..",o+1))!==-1;){let a=n[o-1];if(a&&a!=="."&&a!==".."&&a!=="**"){r=!0;let p=o===1&&n[o+1]==="**"?["."]:[];n.splice(o-1,2,...p),n.length===0&&n.push(""),o-=2}}}}while(r);return e}secondPhasePreProcess(e){for(let r=0;r<e.length-1;r++)for(let n=r+1;n<e.length;n++){let i=this.partsMatch(e[r],e[n],!this.preserveMultipleSlashes);i&&(e[r]=i,e[n]=[])}return e.filter(r=>r.length)}partsMatch(e,r,n=!1){let i=0,o=0,a=[],l="";for(;i<e.length&&o<r.length;)if(e[i]===r[o])a.push(l==="b"?r[o]:e[i]),i++,o++;else if(n&&e[i]==="**"&&r[o]===e[i+1])a.push(e[i]),i++;else if(n&&r[o]==="**"&&e[i]===r[o+1])a.push(r[o]),o++;else if(e[i]==="*"&&r[o]&&(this.options.dot||!r[o].startsWith("."))&&r[o]!=="**"){if(l==="b")return!1;l="a",a.push(e[i]),i++,o++}else if(r[o]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(l==="a")return!1;l="b",a.push(r[o]),i++,o++}else return!1;return e.length===r.length&&a}parseNegate(){if(this.nonegate)return;let e=this.pattern,r=!1,n=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)r=!r,n++;n&&(this.pattern=e.slice(n)),this.negate=r}matchOne(e,r,n=!1){let i=this.options;if(this.isWindows){let w=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),F=!w&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),M=typeof r[0]=="string"&&/^[a-z]:$/i.test(r[0]),U=!M&&r[0]===""&&r[1]===""&&r[2]==="?"&&typeof r[3]=="string"&&/^[a-z]:$/i.test(r[3]),Z=F?3:w?0:void 0,ne=U?3:M?0:void 0;if(typeof Z=="number"&&typeof ne=="number"){let[he,de]=[e[Z],r[ne]];he.toLowerCase()===de.toLowerCase()&&(r[ne]=he,ne>Z?r=r.slice(ne):Z>ne&&(e=e.slice(Z)))}}let{optimizationLevel:o=1}=this.options;o>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var a=0,l=0,p=e.length,u=r.length;a<p&&l<u;a++,l++){this.debug("matchOne loop");var d=r[l],h=e[a];if(this.debug(r,d,h),d===!1)return!1;if(d===Ut){this.debug("GLOBSTAR",[r,d,h]);var g=a,x=l+1;if(x===u){for(this.debug("** at the end");a<p;a++)if(e[a]==="."||e[a]===".."||!i.dot&&e[a].charAt(0)===".")return!1;return!0}for(;g<p;){var b=e[g];if(this.debug(`
globstar while`,e,g,r,x,b),this.matchOne(e.slice(g),r.slice(x),n))return this.debug("globstar found match!",g,p,b),!0;if(b==="."||b===".."||!i.dot&&b.charAt(0)==="."){this.debug("dot detected!",e,g,r,x);break}this.debug("globstar swallow a segment, and continue"),g++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,g,r,x),g===p))}let w;if(typeof d=="string"?(w=h===d,this.debug("string match",d,h,w)):(w=d.test(h),this.debug("pattern match",d,h,w)),!w)return!1}if(a===p&&l===u)return!0;if(a===p)return n;if(l===u)return a===p-1&&e[a]==="";throw new Error("wtf?")}braceExpand(){return oF(this.pattern,this.options)}parse(e){rp(e);let r=this.options;if(e==="**")return Ut;if(e==="")return"";let n,i=null;(n=e.match(UQ))?i=r.dot?BQ:VQ:(n=e.match(PQ))?i=(r.nocase?r.dot?IQ:DQ:r.dot?AQ:MQ)(n[1]):(n=e.match(HQ))?i=(r.nocase?r.dot?$Q:WQ:r.dot?qQ:jQ)(n):(n=e.match(FQ))?i=r.dot?OQ:CQ:(n=e.match(NQ))&&(i=LQ);let o=Ga.fromGlob(e,this.options).toMMPattern();return i?Object.assign(o,{test:i}):o}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let r=this.options,n=r.noglobstar?KQ:r.dot?QQ:ZQ,i=new Set(r.nocase?["i"]:[]),o=e.map(p=>{let u=p.map(d=>{if(d instanceof RegExp)for(let h of d.flags.split(""))i.add(h);return typeof d=="string"?tZ(d):d===Ut?Ut:d._src});return u.forEach((d,h)=>{let g=u[h+1],x=u[h-1];d!==Ut||x===Ut||(x===void 0?g!==void 0&&g!==Ut?u[h+1]="(?:\\/|"+n+"\\/)?"+g:u[h]=n:g===void 0?u[h-1]=x+"(?:\\/|"+n+")?":g!==Ut&&(u[h-1]=x+"(?:\\/|\\/"+n+"\\/)"+g,u[h+1]=Ut))}),u.filter(d=>d!==Ut).join("/")}).join("|"),[a,l]=e.length>1?["(?:",")"]:["",""];o="^"+a+o+l+"$",this.negate&&(o="^(?!"+o+").+$");try{this.regexp=new RegExp(o,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;let n=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let o=this.set;this.debug(this.pattern,"set",o);let a=i[i.length-1];if(!a)for(let l=i.length-2;!a&&l>=0;l--)a=i[l];for(let l=0;l<o.length;l++){let p=o[l],u=i;if(n.matchBase&&p.length===1&&(u=[a]),this.matchOne(u,p,r))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return nr.defaults(e).Minimatch}};nr.AST=Ga;nr.Minimatch=Br;nr.escape=Ka;nr.unescape=Dn;var Qa=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,aF=new Set,vv=typeof process=="object"&&process?process:{},cF=(t,e,r,n)=>{typeof vv.emitWarning=="function"?vv.emitWarning(t,e,r,n):console.error(`[${r}] ${e}: ${t}`)},Mg=globalThis.AbortController,sF=globalThis.AbortSignal;if(typeof Mg>"u"){sF=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(n,i){this._onabort.push(i)}},Mg=class{constructor(){e()}signal=new sF;abort(n){if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(let i of this.signal._onabort)i(n);this.signal.onabort?.(n)}}};let t=vv.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{t&&(t=!1,cF("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var rZ=t=>!aF.has(t),vOe=Symbol("type"),So=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),lF=t=>So(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?Za:null:null,Za=class extends Array{constructor(e){super(e),this.fill(0)}},bv=class t{heap;length;static#e=!1;static create(e){let r=lF(e);if(!r)return[];t.#e=!0;let n=new t(e,r);return t.#e=!1,n}constructor(e,r){if(!t.#e)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},ip=class t{#e;#r;#o;#n;#s;#S;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#l;#u;#c;#a;#i;#g;#y;#d;#f;#w;#h;#_;#E;#T;#v;#b;#m;static unsafeExposeInternals(e){return{starts:e.#E,ttls:e.#T,sizes:e.#_,keyMap:e.#c,keyList:e.#a,valList:e.#i,next:e.#g,prev:e.#y,get head(){return e.#d},get tail(){return e.#f},free:e.#w,isBackgroundFetch:r=>e.#p(r),backgroundFetch:(r,n,i,o)=>e.#U(r,n,i,o),moveToTail:r=>e.#B(r),indexes:r=>e.#k(r),rindexes:r=>e.#P(r),isStale:r=>e.#x(r)}}get max(){return this.#e}get maxSize(){return this.#r}get calculatedSize(){return this.#u}get size(){return this.#l}get fetchMethod(){return this.#s}get memoMethod(){return this.#S}get dispose(){return this.#o}get disposeAfter(){return this.#n}constructor(e){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:a,updateAgeOnHas:l,allowStale:p,dispose:u,disposeAfter:d,noDisposeOnSet:h,noUpdateTTL:g,maxSize:x=0,maxEntrySize:b=0,sizeCalculation:w,fetchMethod:F,memoMethod:M,noDeleteOnFetchRejection:U,noDeleteOnStaleGet:Z,allowStaleOnFetchRejection:ne,allowStaleOnFetchAbort:he,ignoreFetchAbort:de}=e;if(r!==0&&!So(r))throw new TypeError("max option must be a nonnegative integer");let ht=r?lF(r):Array;if(!ht)throw new Error("invalid max value: "+r);if(this.#e=r,this.#r=x,this.maxEntrySize=b||this.#r,this.sizeCalculation=w,this.sizeCalculation){if(!this.#r&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(M!==void 0&&typeof M!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#S=M,F!==void 0&&typeof F!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#s=F,this.#b=!!F,this.#c=new Map,this.#a=new Array(r).fill(void 0),this.#i=new Array(r).fill(void 0),this.#g=new ht(r),this.#y=new ht(r),this.#d=0,this.#f=0,this.#w=bv.create(r),this.#l=0,this.#u=0,typeof u=="function"&&(this.#o=u),typeof d=="function"?(this.#n=d,this.#h=[]):(this.#n=void 0,this.#h=void 0),this.#v=!!this.#o,this.#m=!!this.#n,this.noDisposeOnSet=!!h,this.noUpdateTTL=!!g,this.noDeleteOnFetchRejection=!!U,this.allowStaleOnFetchRejection=!!ne,this.allowStaleOnFetchAbort=!!he,this.ignoreFetchAbort=!!de,this.maxEntrySize!==0){if(this.#r!==0&&!So(this.#r))throw new TypeError("maxSize must be a positive integer if specified");if(!So(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#A()}if(this.allowStale=!!p,this.noDeleteOnStaleGet=!!Z,this.updateAgeOnGet=!!a,this.updateAgeOnHas=!!l,this.ttlResolution=So(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=n||0,this.ttl){if(!So(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#M()}if(this.#e===0&&this.ttl===0&&this.#r===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#e&&!this.#r){let Dt="LRU_CACHE_UNBOUNDED";rZ(Dt)&&(aF.add(Dt),cF("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",Dt,t))}}getRemainingTTL(e){return this.#c.has(e)?1/0:0}#M(){let e=new Za(this.#e),r=new Za(this.#e);this.#T=e,this.#E=r,this.#I=(o,a,l=Qa.now())=>{if(r[o]=a!==0?l:0,e[o]=a,a!==0&&this.ttlAutopurge){let p=setTimeout(()=>{this.#x(o)&&this.#D(this.#a[o],"expire")},a+1);p.unref&&p.unref()}},this.#R=o=>{r[o]=e[o]!==0?Qa.now():0},this.#t=(o,a)=>{if(e[a]){let l=e[a],p=r[a];if(!l||!p)return;o.ttl=l,o.start=p,o.now=n||i();let u=o.now-p;o.remainingTTL=l-u}};let n=0,i=()=>{let o=Qa.now();if(this.ttlResolution>0){n=o;let a=setTimeout(()=>n=0,this.ttlResolution);a.unref&&a.unref()}return o};this.getRemainingTTL=o=>{let a=this.#c.get(o);if(a===void 0)return 0;let l=e[a],p=r[a];if(!l||!p)return 1/0;let u=(n||i())-p;return l-u},this.#x=o=>{let a=r[o],l=e[o];return!!l&&!!a&&(n||i())-a>l}}#R=()=>{};#t=()=>{};#I=()=>{};#x=()=>!1;#A(){let e=new Za(this.#e);this.#u=0,this.#_=e,this.#F=r=>{this.#u-=e[r],e[r]=0},this.#O=(r,n,i,o)=>{if(this.#p(n))return 0;if(!So(i))if(o){if(typeof o!="function")throw new TypeError("sizeCalculation must be a function");if(i=o(n,r),!So(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#C=(r,n,i)=>{if(e[r]=n,this.#r){let o=this.#r-e[r];for(;this.#u>o;)this.#L(!0)}this.#u+=e[r],i&&(i.entrySize=n,i.totalCalculatedSize=this.#u)}}#F=e=>{};#C=(e,r,n)=>{};#O=(e,r,n,i)=>{if(n||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#k({allowStale:e=this.allowStale}={}){if(this.#l)for(let r=this.#f;!(!this.#N(r)||((e||!this.#x(r))&&(yield r),r===this.#d));)r=this.#y[r]}*#P({allowStale:e=this.allowStale}={}){if(this.#l)for(let r=this.#d;!(!this.#N(r)||((e||!this.#x(r))&&(yield r),r===this.#f));)r=this.#g[r]}#N(e){return e!==void 0&&this.#c.get(this.#a[e])===e}*entries(){for(let e of this.#k())this.#i[e]!==void 0&&this.#a[e]!==void 0&&!this.#p(this.#i[e])&&(yield[this.#a[e],this.#i[e]])}*rentries(){for(let e of this.#P())this.#i[e]!==void 0&&this.#a[e]!==void 0&&!this.#p(this.#i[e])&&(yield[this.#a[e],this.#i[e]])}*keys(){for(let e of this.#k()){let r=this.#a[e];r!==void 0&&!this.#p(this.#i[e])&&(yield r)}}*rkeys(){for(let e of this.#P()){let r=this.#a[e];r!==void 0&&!this.#p(this.#i[e])&&(yield r)}}*values(){for(let e of this.#k())this.#i[e]!==void 0&&!this.#p(this.#i[e])&&(yield this.#i[e])}*rvalues(){for(let e of this.#P())this.#i[e]!==void 0&&!this.#p(this.#i[e])&&(yield this.#i[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,r={}){for(let n of this.#k()){let i=this.#i[n],o=this.#p(i)?i.__staleWhileFetching:i;if(o!==void 0&&e(o,this.#a[n],this))return this.get(this.#a[n],r)}}forEach(e,r=this){for(let n of this.#k()){let i=this.#i[n],o=this.#p(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#a[n],this)}}rforEach(e,r=this){for(let n of this.#P()){let i=this.#i[n],o=this.#p(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#a[n],this)}}purgeStale(){let e=!1;for(let r of this.#P({allowStale:!0}))this.#x(r)&&(this.#D(this.#a[r],"expire"),e=!0);return e}info(e){let r=this.#c.get(e);if(r===void 0)return;let n=this.#i[r],i=this.#p(n)?n.__staleWhileFetching:n;if(i===void 0)return;let o={value:i};if(this.#T&&this.#E){let a=this.#T[r],l=this.#E[r];if(a&&l){let p=a-(Qa.now()-l);o.ttl=p,o.start=Date.now()}}return this.#_&&(o.size=this.#_[r]),o}dump(){let e=[];for(let r of this.#k({allowStale:!0})){let n=this.#a[r],i=this.#i[r],o=this.#p(i)?i.__staleWhileFetching:i;if(o===void 0||n===void 0)continue;let a={value:o};if(this.#T&&this.#E){a.ttl=this.#T[r];let l=Qa.now()-this.#E[r];a.start=Math.floor(Date.now()-l)}this.#_&&(a.size=this.#_[r]),e.unshift([n,a])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let i=Date.now()-n.start;n.start=Qa.now()-i}this.set(r,n.value,n)}}set(e,r,n={}){if(r===void 0)return this.delete(e),this;let{ttl:i=this.ttl,start:o,noDisposeOnSet:a=this.noDisposeOnSet,sizeCalculation:l=this.sizeCalculation,status:p}=n,{noUpdateTTL:u=this.noUpdateTTL}=n,d=this.#O(e,r,n.size||0,l);if(this.maxEntrySize&&d>this.maxEntrySize)return p&&(p.set="miss",p.maxEntrySizeExceeded=!0),this.#D(e,"set"),this;let h=this.#l===0?void 0:this.#c.get(e);if(h===void 0)h=this.#l===0?this.#f:this.#w.length!==0?this.#w.pop():this.#l===this.#e?this.#L(!1):this.#l,this.#a[h]=e,this.#i[h]=r,this.#c.set(e,h),this.#g[this.#f]=h,this.#y[h]=this.#f,this.#f=h,this.#l++,this.#C(h,d,p),p&&(p.set="add"),u=!1;else{this.#B(h);let g=this.#i[h];if(r!==g){if(this.#b&&this.#p(g)){g.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:x}=g;x!==void 0&&!a&&(this.#v&&this.#o?.(x,e,"set"),this.#m&&this.#h?.push([x,e,"set"]))}else a||(this.#v&&this.#o?.(g,e,"set"),this.#m&&this.#h?.push([g,e,"set"]));if(this.#F(h),this.#C(h,d,p),this.#i[h]=r,p){p.set="replace";let x=g&&this.#p(g)?g.__staleWhileFetching:g;x!==void 0&&(p.oldValue=x)}}else p&&(p.set="update")}if(i!==0&&!this.#T&&this.#M(),this.#T&&(u||this.#I(h,i,o),p&&this.#t(p,h)),!a&&this.#m&&this.#h){let g=this.#h,x;for(;x=g?.shift();)this.#n?.(...x)}return this}pop(){try{for(;this.#l;){let e=this.#i[this.#d];if(this.#L(!0),this.#p(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#m&&this.#h){let e=this.#h,r;for(;r=e?.shift();)this.#n?.(...r)}}}#L(e){let r=this.#d,n=this.#a[r],i=this.#i[r];return this.#b&&this.#p(i)?i.__abortController.abort(new Error("evicted")):(this.#v||this.#m)&&(this.#v&&this.#o?.(i,n,"evict"),this.#m&&this.#h?.push([i,n,"evict"])),this.#F(r),e&&(this.#a[r]=void 0,this.#i[r]=void 0,this.#w.push(r)),this.#l===1?(this.#d=this.#f=0,this.#w.length=0):this.#d=this.#g[r],this.#c.delete(n),this.#l--,r}has(e,r={}){let{updateAgeOnHas:n=this.updateAgeOnHas,status:i}=r,o=this.#c.get(e);if(o!==void 0){let a=this.#i[o];if(this.#p(a)&&a.__staleWhileFetching===void 0)return!1;if(this.#x(o))i&&(i.has="stale",this.#t(i,o));else return n&&this.#R(o),i&&(i.has="hit",this.#t(i,o)),!0}else i&&(i.has="miss");return!1}peek(e,r={}){let{allowStale:n=this.allowStale}=r,i=this.#c.get(e);if(i===void 0||!n&&this.#x(i))return;let o=this.#i[i];return this.#p(o)?o.__staleWhileFetching:o}#U(e,r,n,i){let o=r===void 0?void 0:this.#i[r];if(this.#p(o))return o;let a=new Mg,{signal:l}=n;l?.addEventListener("abort",()=>a.abort(l.reason),{signal:a.signal});let p={signal:a.signal,options:n,context:i},u=(w,F=!1)=>{let{aborted:M}=a.signal,U=n.ignoreFetchAbort&&w!==void 0;if(n.status&&(M&&!F?(n.status.fetchAborted=!0,n.status.fetchError=a.signal.reason,U&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),M&&!U&&!F)return h(a.signal.reason);let Z=x;return this.#i[r]===x&&(w===void 0?Z.__staleWhileFetching?this.#i[r]=Z.__staleWhileFetching:this.#D(e,"fetch"):(n.status&&(n.status.fetchUpdated=!0),this.set(e,w,p.options))),w},d=w=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=w),h(w)),h=w=>{let{aborted:F}=a.signal,M=F&&n.allowStaleOnFetchAbort,U=M||n.allowStaleOnFetchRejection,Z=U||n.noDeleteOnFetchRejection,ne=x;if(this.#i[r]===x&&(!Z||ne.__staleWhileFetching===void 0?this.#D(e,"fetch"):M||(this.#i[r]=ne.__staleWhileFetching)),U)return n.status&&ne.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),ne.__staleWhileFetching;if(ne.__returned===ne)throw w},g=(w,F)=>{let M=this.#s?.(e,o,p);M&&M instanceof Promise&&M.then(U=>w(U===void 0?void 0:U),F),a.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(w(void 0),n.allowStaleOnFetchAbort&&(w=U=>u(U,!0)))})};n.status&&(n.status.fetchDispatched=!0);let x=new Promise(g).then(u,d),b=Object.assign(x,{__abortController:a,__staleWhileFetching:o,__returned:void 0});return r===void 0?(this.set(e,b,{...p.options,status:void 0}),r=this.#c.get(e)):this.#i[r]=b,b}#p(e){if(!this.#b)return!1;let r=e;return!!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof Mg}async fetch(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:a=this.ttl,noDisposeOnSet:l=this.noDisposeOnSet,size:p=0,sizeCalculation:u=this.sizeCalculation,noUpdateTTL:d=this.noUpdateTTL,noDeleteOnFetchRejection:h=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:g=this.allowStaleOnFetchRejection,ignoreFetchAbort:x=this.ignoreFetchAbort,allowStaleOnFetchAbort:b=this.allowStaleOnFetchAbort,context:w,forceRefresh:F=!1,status:M,signal:U}=r;if(!this.#b)return M&&(M.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,status:M});let Z={allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,ttl:a,noDisposeOnSet:l,size:p,sizeCalculation:u,noUpdateTTL:d,noDeleteOnFetchRejection:h,allowStaleOnFetchRejection:g,allowStaleOnFetchAbort:b,ignoreFetchAbort:x,status:M,signal:U},ne=this.#c.get(e);if(ne===void 0){M&&(M.fetch="miss");let he=this.#U(e,ne,Z,w);return he.__returned=he}else{let he=this.#i[ne];if(this.#p(he)){let N=n&&he.__staleWhileFetching!==void 0;return M&&(M.fetch="inflight",N&&(M.returnedStale=!0)),N?he.__staleWhileFetching:he.__returned=he}let de=this.#x(ne);if(!F&&!de)return M&&(M.fetch="hit"),this.#B(ne),i&&this.#R(ne),M&&this.#t(M,ne),he;let ht=this.#U(e,ne,Z,w),it=ht.__staleWhileFetching!==void 0&&n;return M&&(M.fetch=de?"stale":"refresh",it&&de&&(M.returnedStale=!0)),it?ht.__staleWhileFetching:ht.__returned=ht}}async forceFetch(e,r={}){let n=await this.fetch(e,r);if(n===void 0)throw new Error("fetch() returned undefined");return n}memo(e,r={}){let n=this.#S;if(!n)throw new Error("no memoMethod provided to constructor");let{context:i,forceRefresh:o,...a}=r,l=this.get(e,a);if(!o&&l!==void 0)return l;let p=n(e,l,{options:a,context:i});return this.set(e,p,a),p}get(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:a}=r,l=this.#c.get(e);if(l!==void 0){let p=this.#i[l],u=this.#p(p);return a&&this.#t(a,l),this.#x(l)?(a&&(a.get="stale"),u?(a&&n&&p.__staleWhileFetching!==void 0&&(a.returnedStale=!0),n?p.__staleWhileFetching:void 0):(o||this.#D(e,"expire"),a&&n&&(a.returnedStale=!0),n?p:void 0)):(a&&(a.get="hit"),u?p.__staleWhileFetching:(this.#B(l),i&&this.#R(l),p))}else a&&(a.get="miss")}#V(e,r){this.#y[r]=e,this.#g[e]=r}#B(e){e!==this.#f&&(e===this.#d?this.#d=this.#g[e]:this.#V(this.#y[e],this.#g[e]),this.#V(this.#f,e),this.#f=e)}delete(e){return this.#D(e,"delete")}#D(e,r){let n=!1;if(this.#l!==0){let i=this.#c.get(e);if(i!==void 0)if(n=!0,this.#l===1)this.#H(r);else{this.#F(i);let o=this.#i[i];if(this.#p(o)?o.__abortController.abort(new Error("deleted")):(this.#v||this.#m)&&(this.#v&&this.#o?.(o,e,r),this.#m&&this.#h?.push([o,e,r])),this.#c.delete(e),this.#a[i]=void 0,this.#i[i]=void 0,i===this.#f)this.#f=this.#y[i];else if(i===this.#d)this.#d=this.#g[i];else{let a=this.#y[i];this.#g[a]=this.#g[i];let l=this.#g[i];this.#y[l]=this.#y[i]}this.#l--,this.#w.push(i)}}if(this.#m&&this.#h?.length){let i=this.#h,o;for(;o=i?.shift();)this.#n?.(...o)}return n}clear(){return this.#H("delete")}#H(e){for(let r of this.#P({allowStale:!0})){let n=this.#i[r];if(this.#p(n))n.__abortController.abort(new Error("deleted"));else{let i=this.#a[r];this.#v&&this.#o?.(n,i,e),this.#m&&this.#h?.push([n,i,e])}}if(this.#c.clear(),this.#i.fill(void 0),this.#a.fill(void 0),this.#T&&this.#E&&(this.#T.fill(0),this.#E.fill(0)),this.#_&&this.#_.fill(0),this.#d=0,this.#f=0,this.#w.length=0,this.#u=0,this.#l=0,this.#m&&this.#h){let r=this.#h,n;for(;n=r?.shift();)this.#n?.(...n)}}};var Ja=require("path"),TF=require("url"),fZ=ur(require("fs"),1),ei=require("fs"),wo=require("fs/promises");var Ng=require("events"),Mv=ur(require("stream"),1),mF=require("string_decoder"),pF=typeof process=="object"&&process?process:{stdout:null,stderr:null},nZ=t=>!!t&&typeof t=="object"&&(t instanceof bo||t instanceof Mv.default||iZ(t)||oZ(t)),iZ=t=>!!t&&typeof t=="object"&&t instanceof Ng.EventEmitter&&typeof t.pipe=="function"&&t.pipe!==Mv.default.Writable.prototype.pipe,oZ=t=>!!t&&typeof t=="object"&&t instanceof Ng.EventEmitter&&typeof t.write=="function"&&typeof t.end=="function",Ai=Symbol("EOF"),Di=Symbol("maybeEmitEnd"),vo=Symbol("emittedEnd"),Ag=Symbol("emittingEnd"),op=Symbol("emittedError"),Dg=Symbol("closed"),uF=Symbol("read"),Ig=Symbol("flush"),fF=Symbol("flushChunk"),In=Symbol("encoding"),Ya=Symbol("decoder"),Pt=Symbol("flowing"),sp=Symbol("paused"),Xa=Symbol("resume"),Mt=Symbol("buffer"),ir=Symbol("pipes"),At=Symbol("bufferLength"),wv=Symbol("bufferPush"),Fg=Symbol("bufferShift"),zt=Symbol("objectMode"),mt=Symbol("destroyed"),_v=Symbol("error"),Ev=Symbol("emitData"),dF=Symbol("emitEnd"),Rv=Symbol("emitEnd2"),Xn=Symbol("async"),kv=Symbol("abort"),Cg=Symbol("aborted"),ap=Symbol("signal"),fs=Symbol("dataListeners"),Hr=Symbol("discarded"),cp=t=>Promise.resolve().then(t),sZ=t=>t(),aZ=t=>t==="end"||t==="finish"||t==="prefinish",cZ=t=>t instanceof ArrayBuffer||!!t&&typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,lZ=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),Og=class{src;dest;opts;ondrain;constructor(e,r,n){this.src=e,this.dest=r,this.opts=n,this.ondrain=()=>e[Xa](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(e){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},Pv=class extends Og{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,r,n){super(e,r,n),this.proxyErrors=i=>r.emit("error",i),e.on("error",this.proxyErrors)}},pZ=t=>!!t.objectMode,uZ=t=>!t.objectMode&&!!t.encoding&&t.encoding!=="buffer",bo=class extends Ng.EventEmitter{[Pt]=!1;[sp]=!1;[ir]=[];[Mt]=[];[zt];[In];[Xn];[Ya];[Ai]=!1;[vo]=!1;[Ag]=!1;[Dg]=!1;[op]=null;[At]=0;[mt]=!1;[ap];[Cg]=!1;[fs]=0;[Hr]=!1;writable=!0;readable=!0;constructor(...e){let r=e[0]||{};if(super(),r.objectMode&&typeof r.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");pZ(r)?(this[zt]=!0,this[In]=null):uZ(r)?(this[In]=r.encoding,this[zt]=!1):(this[zt]=!1,this[In]=null),this[Xn]=!!r.async,this[Ya]=this[In]?new mF.StringDecoder(this[In]):null,r&&r.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[Mt]}),r&&r.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[ir]});let{signal:n}=r;n&&(this[ap]=n,n.aborted?this[kv]():n.addEventListener("abort",()=>this[kv]()))}get bufferLength(){return this[At]}get encoding(){return this[In]}set encoding(e){throw new Error("Encoding must be set at instantiation time")}setEncoding(e){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[zt]}set objectMode(e){throw new Error("objectMode must be set at instantiation time")}get async(){return this[Xn]}set async(e){this[Xn]=this[Xn]||!!e}[kv](){this[Cg]=!0,this.emit("abort",this[ap]?.reason),this.destroy(this[ap]?.reason)}get aborted(){return this[Cg]}set aborted(e){}write(e,r,n){if(this[Cg])return!1;if(this[Ai])throw new Error("write after end");if(this[mt])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof r=="function"&&(n=r,r="utf8"),r||(r="utf8");let i=this[Xn]?cp:sZ;if(!this[zt]&&!Buffer.isBuffer(e)){if(lZ(e))e=Buffer.from(e.buffer,e.byteOffset,e.byteLength);else if(cZ(e))e=Buffer.from(e);else if(typeof e!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[zt]?(this[Pt]&&this[At]!==0&&this[Ig](!0),this[Pt]?this.emit("data",e):this[wv](e),this[At]!==0&&this.emit("readable"),n&&i(n),this[Pt]):e.length?(typeof e=="string"&&!(r===this[In]&&!this[Ya]?.lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[In]&&(e=this[Ya].write(e)),this[Pt]&&this[At]!==0&&this[Ig](!0),this[Pt]?this.emit("data",e):this[wv](e),this[At]!==0&&this.emit("readable"),n&&i(n),this[Pt]):(this[At]!==0&&this.emit("readable"),n&&i(n),this[Pt])}read(e){if(this[mt])return null;if(this[Hr]=!1,this[At]===0||e===0||e&&e>this[At])return this[Di](),null;this[zt]&&(e=null),this[Mt].length>1&&!this[zt]&&(this[Mt]=[this[In]?this[Mt].join(""):Buffer.concat(this[Mt],this[At])]);let r=this[uF](e||null,this[Mt][0]);return this[Di](),r}[uF](e,r){if(this[zt])this[Fg]();else{let n=r;e===n.length||e===null?this[Fg]():typeof n=="string"?(this[Mt][0]=n.slice(e),r=n.slice(0,e),this[At]-=e):(this[Mt][0]=n.subarray(e),r=n.subarray(0,e),this[At]-=e)}return this.emit("data",r),!this[Mt].length&&!this[Ai]&&this.emit("drain"),r}end(e,r,n){return typeof e=="function"&&(n=e,e=void 0),typeof r=="function"&&(n=r,r="utf8"),e!==void 0&&this.write(e,r),n&&this.once("end",n),this[Ai]=!0,this.writable=!1,(this[Pt]||!this[sp])&&this[Di](),this}[Xa](){this[mt]||(!this[fs]&&!this[ir].length&&(this[Hr]=!0),this[sp]=!1,this[Pt]=!0,this.emit("resume"),this[Mt].length?this[Ig]():this[Ai]?this[Di]():this.emit("drain"))}resume(){return this[Xa]()}pause(){this[Pt]=!1,this[sp]=!0,this[Hr]=!1}get destroyed(){return this[mt]}get flowing(){return this[Pt]}get paused(){return this[sp]}[wv](e){this[zt]?this[At]+=1:this[At]+=e.length,this[Mt].push(e)}[Fg](){return this[zt]?this[At]-=1:this[At]-=this[Mt][0].length,this[Mt].shift()}[Ig](e=!1){do;while(this[fF](this[Fg]())&&this[Mt].length);!e&&!this[Mt].length&&!this[Ai]&&this.emit("drain")}[fF](e){return this.emit("data",e),this[Pt]}pipe(e,r){if(this[mt])return e;this[Hr]=!1;let n=this[vo];return r=r||{},e===pF.stdout||e===pF.stderr?r.end=!1:r.end=r.end!==!1,r.proxyErrors=!!r.proxyErrors,n?r.end&&e.end():(this[ir].push(r.proxyErrors?new Pv(this,e,r):new Og(this,e,r)),this[Xn]?cp(()=>this[Xa]()):this[Xa]()),e}unpipe(e){let r=this[ir].find(n=>n.dest===e);r&&(this[ir].length===1?(this[Pt]&&this[fs]===0&&(this[Pt]=!1),this[ir]=[]):this[ir].splice(this[ir].indexOf(r),1),r.unpipe())}addListener(e,r){return this.on(e,r)}on(e,r){let n=super.on(e,r);if(e==="data")this[Hr]=!1,this[fs]++,!this[ir].length&&!this[Pt]&&this[Xa]();else if(e==="readable"&&this[At]!==0)super.emit("readable");else if(aZ(e)&&this[vo])super.emit(e),this.removeAllListeners(e);else if(e==="error"&&this[op]){let i=r;this[Xn]?cp(()=>i.call(this,this[op])):i.call(this,this[op])}return n}removeListener(e,r){return this.off(e,r)}off(e,r){let n=super.off(e,r);return e==="data"&&(this[fs]=this.listeners("data").length,this[fs]===0&&!this[Hr]&&!this[ir].length&&(this[Pt]=!1)),n}removeAllListeners(e){let r=super.removeAllListeners(e);return(e==="data"||e===void 0)&&(this[fs]=0,!this[Hr]&&!this[ir].length&&(this[Pt]=!1)),r}get emittedEnd(){return this[vo]}[Di](){!this[Ag]&&!this[vo]&&!this[mt]&&this[Mt].length===0&&this[Ai]&&(this[Ag]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[Dg]&&this.emit("close"),this[Ag]=!1)}emit(e,...r){let n=r[0];if(e!=="error"&&e!=="close"&&e!==mt&&this[mt])return!1;if(e==="data")return!this[zt]&&!n?!1:this[Xn]?(cp(()=>this[Ev](n)),!0):this[Ev](n);if(e==="end")return this[dF]();if(e==="close"){if(this[Dg]=!0,!this[vo]&&!this[mt])return!1;let o=super.emit("close");return this.removeAllListeners("close"),o}else if(e==="error"){this[op]=n,super.emit(_v,n);let o=!this[ap]||this.listeners("error").length?super.emit("error",n):!1;return this[Di](),o}else if(e==="resume"){let o=super.emit("resume");return this[Di](),o}else if(e==="finish"||e==="prefinish"){let o=super.emit(e);return this.removeAllListeners(e),o}let i=super.emit(e,...r);return this[Di](),i}[Ev](e){for(let n of this[ir])n.dest.write(e)===!1&&this.pause();let r=this[Hr]?!1:super.emit("data",e);return this[Di](),r}[dF](){return this[vo]?!1:(this[vo]=!0,this.readable=!1,this[Xn]?(cp(()=>this[Rv]()),!0):this[Rv]())}[Rv](){if(this[Ya]){let r=this[Ya].end();if(r){for(let n of this[ir])n.dest.write(r);this[Hr]||super.emit("data",r)}}for(let r of this[ir])r.end();let e=super.emit("end");return this.removeAllListeners("end"),e}async collect(){let e=Object.assign([],{dataLength:0});this[zt]||(e.dataLength=0);let r=this.promise();return this.on("data",n=>{e.push(n),this[zt]||(e.dataLength+=n.length)}),await r,e}async concat(){if(this[zt])throw new Error("cannot concat in objectMode");let e=await this.collect();return this[In]?e.join(""):Buffer.concat(e,e.dataLength)}async promise(){return new Promise((e,r)=>{this.on(mt,()=>r(new Error("stream destroyed"))),this.on("error",n=>r(n)),this.on("end",()=>e())})}[Symbol.asyncIterator](){this[Hr]=!1;let e=!1,r=async()=>(this.pause(),e=!0,{value:void 0,done:!0});return{next:()=>{if(e)return r();let i=this.read();if(i!==null)return Promise.resolve({done:!1,value:i});if(this[Ai])return r();let o,a,l=h=>{this.off("data",p),this.off("end",u),this.off(mt,d),r(),a(h)},p=h=>{this.off("error",l),this.off("end",u),this.off(mt,d),this.pause(),o({value:h,done:!!this[Ai]})},u=()=>{this.off("error",l),this.off("data",p),this.off(mt,d),r(),o({done:!0,value:void 0})},d=()=>l(new Error("stream destroyed"));return new Promise((h,g)=>{a=g,o=h,this.once(mt,d),this.once("error",l),this.once("end",u),this.once("data",p)})},throw:r,return:r,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[Hr]=!1;let e=!1,r=()=>(this.pause(),this.off(_v,r),this.off(mt,r),this.off("end",r),e=!0,{done:!0,value:void 0}),n=()=>{if(e)return r();let i=this.read();return i===null?r():{done:!1,value:i}};return this.once("end",r),this.once(_v,r),this.once(mt,r),{next:n,throw:r,return:r,[Symbol.iterator](){return this}}}destroy(e){if(this[mt])return e?this.emit("error",e):this.emit(mt),this;this[mt]=!0,this[Hr]=!0,this[Mt].length=0,this[At]=0;let r=this;return typeof r.close=="function"&&!this[Dg]&&r.close(),e?this.emit("error",e):this.emit(mt),this}static get isStream(){return nZ}};var dZ=ei.realpathSync.native,pp={lstatSync:ei.lstatSync,readdir:ei.readdir,readdirSync:ei.readdirSync,readlinkSync:ei.readlinkSync,realpathSync:dZ,promises:{lstat:wo.lstat,readdir:wo.readdir,readlink:wo.readlink,realpath:wo.realpath}},SF=t=>!t||t===pp||t===fZ?pp:{...pp,...t,promises:{...pp.promises,...t.promises||{}}},vF=/^\\\\\?\\([a-z]:)\\?$/i,mZ=t=>t.replace(/\//g,"\\").replace(vF,"$1\\"),hZ=/[\\\/]/,fn=0,bF=1,wF=2,Jn=4,_F=6,EF=8,ds=10,RF=12,un=15,lp=~un,Av=16,hF=32,up=64,Fn=128,Lg=256,Vg=512,gF=up|Fn|Vg,gZ=1023,Dv=t=>t.isFile()?EF:t.isDirectory()?Jn:t.isSymbolicLink()?ds:t.isCharacterDevice()?wF:t.isBlockDevice()?_F:t.isSocket()?RF:t.isFIFO()?bF:fn,yF=new Map,fp=t=>{let e=yF.get(t);if(e)return e;let r=t.normalize("NFKD");return yF.set(t,r),r},xF=new Map,Ug=t=>{let e=xF.get(t);if(e)return e;let r=fp(t.toLowerCase());return xF.set(t,r),r},Bg=class extends ip{constructor(){super({max:256})}},Iv=class extends ip{constructor(e=16*1024){super({maxSize:e,sizeCalculation:r=>r.length+1})}},kF=Symbol("PathScurry setAsCwd"),Gt=class{name;root;roots;parent;nocase;#e;#r;get dev(){return this.#r}#o;get mode(){return this.#o}#n;get nlink(){return this.#n}#s;get uid(){return this.#s}#S;get gid(){return this.#S}#l;get rdev(){return this.#l}#u;get blksize(){return this.#u}#c;get ino(){return this.#c}#a;get size(){return this.#a}#i;get blocks(){return this.#i}#g;get atimeMs(){return this.#g}#y;get mtimeMs(){return this.#y}#d;get ctimeMs(){return this.#d}#f;get birthtimeMs(){return this.#f}#w;get atime(){return this.#w}#h;get mtime(){return this.#h}#_;get ctime(){return this.#_}#E;get birthtime(){return this.#E}#T;#v;#b;#m;#M;#R;#t;#I;#x;#A;get path(){return(this.parent||this).fullpath()}constructor(e,r=fn,n,i,o,a,l){this.name=e,this.#T=o?Ug(e):fp(e),this.#t=r&gZ,this.nocase=o,this.roots=i,this.root=n||this,this.#I=a,this.#b=l.fullpath,this.#M=l.relative,this.#R=l.relativePosix,this.parent=l.parent,this.parent?this.#e=this.parent.#e:this.#e=SF(l.fs)}depth(){return this.#v!==void 0?this.#v:this.parent?this.#v=this.parent.depth()+1:this.#v=0}childrenCache(){return this.#I}resolve(e){if(!e)return this;let r=this.getRootString(e),i=e.substring(r.length).split(this.splitSep);return r?this.getRoot(r).#F(i):this.#F(i)}#F(e){let r=this;for(let n of e)r=r.child(n);return r}children(){let e=this.#I.get(this);if(e)return e;let r=Object.assign([],{provisional:0});return this.#I.set(this,r),this.#t&=~Av,r}child(e,r){if(e===""||e===".")return this;if(e==="..")return this.parent||this;let n=this.children(),i=this.nocase?Ug(e):fp(e);for(let p of n)if(p.#T===i)return p;let o=this.parent?this.sep:"",a=this.#b?this.#b+o+e:void 0,l=this.newChild(e,fn,{...r,parent:this,fullpath:a});return this.canReaddir()||(l.#t|=Fn),n.push(l),l}relative(){if(this.#M!==void 0)return this.#M;let e=this.name,r=this.parent;if(!r)return this.#M=this.name;let n=r.relative();return n+(!n||!r.parent?"":this.sep)+e}relativePosix(){if(this.sep==="/")return this.relative();if(this.#R!==void 0)return this.#R;let e=this.name,r=this.parent;if(!r)return this.#R=this.fullpathPosix();let n=r.relativePosix();return n+(!n||!r.parent?"":"/")+e}fullpath(){if(this.#b!==void 0)return this.#b;let e=this.name,r=this.parent;if(!r)return this.#b=this.name;let i=r.fullpath()+(r.parent?this.sep:"")+e;return this.#b=i}fullpathPosix(){if(this.#m!==void 0)return this.#m;if(this.sep==="/")return this.#m=this.fullpath();if(!this.parent){let i=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(i)?this.#m=`//?/${i}`:this.#m=i}let e=this.parent,r=e.fullpathPosix(),n=r+(!r||!e.parent?"":"/")+this.name;return this.#m=n}isUnknown(){return(this.#t&un)===fn}isType(e){return this[`is${e}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#t&un)===EF}isDirectory(){return(this.#t&un)===Jn}isCharacterDevice(){return(this.#t&un)===wF}isBlockDevice(){return(this.#t&un)===_F}isFIFO(){return(this.#t&un)===bF}isSocket(){return(this.#t&un)===RF}isSymbolicLink(){return(this.#t&ds)===ds}lstatCached(){return this.#t&hF?this:void 0}readlinkCached(){return this.#x}realpathCached(){return this.#A}readdirCached(){let e=this.children();return e.slice(0,e.provisional)}canReadlink(){if(this.#x)return!0;if(!this.parent)return!1;let e=this.#t&un;return!(e!==fn&&e!==ds||this.#t&Lg||this.#t&Fn)}calledReaddir(){return!!(this.#t&Av)}isENOENT(){return!!(this.#t&Fn)}isNamed(e){return this.nocase?this.#T===Ug(e):this.#T===fp(e)}async readlink(){let e=this.#x;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=await this.#e.promises.readlink(this.fullpath()),n=this.parent.resolve(r);if(n)return this.#x=n}catch(r){this.#p(r.code);return}}readlinkSync(){let e=this.#x;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=this.#e.readlinkSync(this.fullpath()),n=this.parent.resolve(r);if(n)return this.#x=n}catch(r){this.#p(r.code);return}}#C(e){this.#t|=Av;for(let r=e.provisional;r<e.length;r++)e[r].#O()}#O(){this.#t&Fn||(this.#t=(this.#t|Fn)&lp,this.#k())}#k(){let e=this.children();e.provisional=0;for(let r of e)r.#O()}#P(){this.#t|=Vg,this.#N()}#N(){if(this.#t&up)return;let e=this.#t;(e&un)===Jn&&(e&=lp),this.#t=e|up,this.#k()}#L(e=""){e==="ENOTDIR"||e==="EPERM"?this.#N():e==="ENOENT"?this.#O():this.children().provisional=0}#U(e=""){e==="ENOTDIR"?this.parent.#N():e==="ENOENT"&&this.#O()}#p(e=""){let r=this.#t;r|=Lg,e==="ENOENT"&&(r|=Fn),(e==="EINVAL"||e==="UNKNOWN")&&(r&=lp),this.#t=r,e==="ENOTDIR"&&this.parent&&this.parent.#N()}#V(e,r){return this.#D(e,r)||this.#B(e,r)}#B(e,r){let n=Dv(e),i=this.newChild(e.name,n,{parent:this}),o=i.#t&un;return o!==Jn&&o!==ds&&o!==fn&&(i.#t|=up),r.unshift(i),r.provisional++,i}#D(e,r){for(let n=r.provisional;n<r.length;n++){let i=r[n];if((this.nocase?Ug(e.name):fp(e.name))===i.#T)return this.#H(e,i,n,r)}}#H(e,r,n,i){let o=r.name;return r.#t=r.#t&lp|Dv(e),o!==e.name&&(r.name=e.name),n!==i.provisional&&(n===i.length-1?i.pop():i.splice(n,1),i.unshift(r)),i.provisional++,r}async lstat(){if(!(this.#t&Fn))try{return this.#j(await this.#e.promises.lstat(this.fullpath())),this}catch(e){this.#U(e.code)}}lstatSync(){if(!(this.#t&Fn))try{return this.#j(this.#e.lstatSync(this.fullpath())),this}catch(e){this.#U(e.code)}}#j(e){let{atime:r,atimeMs:n,birthtime:i,birthtimeMs:o,blksize:a,blocks:l,ctime:p,ctimeMs:u,dev:d,gid:h,ino:g,mode:x,mtime:b,mtimeMs:w,nlink:F,rdev:M,size:U,uid:Z}=e;this.#w=r,this.#g=n,this.#E=i,this.#f=o,this.#u=a,this.#i=l,this.#_=p,this.#d=u,this.#r=d,this.#S=h,this.#c=g,this.#o=x,this.#h=b,this.#y=w,this.#n=F,this.#l=M,this.#a=U,this.#s=Z;let ne=Dv(e);this.#t=this.#t&lp|ne|hF,ne!==fn&&ne!==Jn&&ne!==ds&&(this.#t|=up)}#$=[];#q=!1;#z(e){this.#q=!1;let r=this.#$.slice();this.#$.length=0,r.forEach(n=>n(null,e))}readdirCB(e,r=!1){if(!this.canReaddir()){r?e(null,[]):queueMicrotask(()=>e(null,[]));return}let n=this.children();if(this.calledReaddir()){let o=n.slice(0,n.provisional);r?e(null,o):queueMicrotask(()=>e(null,o));return}if(this.#$.push(e),this.#q)return;this.#q=!0;let i=this.fullpath();this.#e.readdir(i,{withFileTypes:!0},(o,a)=>{if(o)this.#L(o.code),n.provisional=0;else{for(let l of a)this.#V(l,n);this.#C(n)}this.#z(n.slice(0,n.provisional))})}#W;async readdir(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();if(this.#W)await this.#W;else{let n=()=>{};this.#W=new Promise(i=>n=i);try{for(let i of await this.#e.promises.readdir(r,{withFileTypes:!0}))this.#V(i,e);this.#C(e)}catch(i){this.#L(i.code),e.provisional=0}this.#W=void 0,n()}return e.slice(0,e.provisional)}readdirSync(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();try{for(let n of this.#e.readdirSync(r,{withFileTypes:!0}))this.#V(n,e);this.#C(e)}catch(n){this.#L(n.code),e.provisional=0}return e.slice(0,e.provisional)}canReaddir(){if(this.#t&gF)return!1;let e=un&this.#t;return e===fn||e===Jn||e===ds}shouldWalk(e,r){return(this.#t&Jn)===Jn&&!(this.#t&gF)&&!e.has(this)&&(!r||r(this))}async realpath(){if(this.#A)return this.#A;if(!((Vg|Lg|Fn)&this.#t))try{let e=await this.#e.promises.realpath(this.fullpath());return this.#A=this.resolve(e)}catch{this.#P()}}realpathSync(){if(this.#A)return this.#A;if(!((Vg|Lg|Fn)&this.#t))try{let e=this.#e.realpathSync(this.fullpath());return this.#A=this.resolve(e)}catch{this.#P()}}[kF](e){if(e===this)return;let r=new Set([]),n=[],i=this;for(;i&&i.parent;)r.add(i),i.#M=n.join(this.sep),i.#R=n.join("/"),i=i.parent,n.push("..");for(i=e;i&&i.parent&&!r.has(i);)i.#M=void 0,i.#R=void 0,i=i.parent}},Hg=class t extends Gt{sep="\\";splitSep=hZ;constructor(e,r=fn,n,i,o,a,l){super(e,r,n,i,o,a,l)}newChild(e,r=fn,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}getRootString(e){return Ja.win32.parse(e).root}getRoot(e){if(e=mZ(e.toUpperCase()),e===this.root.name)return this.root;for(let[r,n]of Object.entries(this.roots))if(this.sameRoot(e,r))return this.roots[e]=n;return this.roots[e]=new ec(e,this).root}sameRoot(e,r=this.root.name){return e=e.toUpperCase().replace(/\//g,"\\").replace(vF,"$1\\"),e===r}},Wg=class t extends Gt{splitSep="/";sep="/";constructor(e,r=fn,n,i,o,a,l){super(e,r,n,i,o,a,l)}getRootString(e){return e.startsWith("/")?"/":""}getRoot(e){return this.root}newChild(e,r=fn,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}},$g=class{root;rootPath;roots;cwd;#e;#r;#o;nocase;#n;constructor(e=process.cwd(),r,n,{nocase:i,childrenCacheSize:o=16*1024,fs:a=pp}={}){this.#n=SF(a),(e instanceof URL||e.startsWith("file://"))&&(e=(0,TF.fileURLToPath)(e));let l=r.resolve(e);this.roots=Object.create(null),this.rootPath=this.parseRootPath(l),this.#e=new Bg,this.#r=new Bg,this.#o=new Iv(o);let p=l.substring(this.rootPath.length).split(n);if(p.length===1&&!p[0]&&p.pop(),i===void 0)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=i,this.root=this.newRoot(this.#n),this.roots[this.rootPath]=this.root;let u=this.root,d=p.length-1,h=r.sep,g=this.rootPath,x=!1;for(let b of p){let w=d--;u=u.child(b,{relative:new Array(w).fill("..").join(h),relativePosix:new Array(w).fill("..").join("/"),fullpath:g+=(x?"":h)+b}),x=!0}this.cwd=u}depth(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.depth()}childrenCache(){return this.#o}resolve(...e){let r="";for(let o=e.length-1;o>=0;o--){let a=e[o];if(!(!a||a===".")&&(r=r?`${a}/${r}`:a,this.isAbsolute(a)))break}let n=this.#e.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpath();return this.#e.set(r,i),i}resolvePosix(...e){let r="";for(let o=e.length-1;o>=0;o--){let a=e[o];if(!(!a||a===".")&&(r=r?`${a}/${r}`:a,this.isAbsolute(a)))break}let n=this.#r.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpathPosix();return this.#r.set(r,i),i}relative(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relative()}relativePosix(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relativePosix()}basename(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.name}dirname(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),(e.parent||e).fullpath()}async readdir(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Gt||(r=e,e=this.cwd);let{withFileTypes:n}=r;if(e.canReaddir()){let i=await e.readdir();return n?i:i.map(o=>o.name)}else return[]}readdirSync(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Gt||(r=e,e=this.cwd);let{withFileTypes:n=!0}=r;return e.canReaddir()?n?e.readdirSync():e.readdirSync().map(i=>i.name):[]}async lstat(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstat()}lstatSync(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstatSync()}async readlink(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Gt||(r=e.withFileTypes,e=this.cwd);let n=await e.readlink();return r?n:n?.fullpath()}readlinkSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Gt||(r=e.withFileTypes,e=this.cwd);let n=e.readlinkSync();return r?n:n?.fullpath()}async realpath(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Gt||(r=e.withFileTypes,e=this.cwd);let n=await e.realpath();return r?n:n?.fullpath()}realpathSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Gt||(r=e.withFileTypes,e=this.cwd);let n=e.realpathSync();return r?n:n?.fullpath()}async walk(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Gt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:a}=r,l=[];(!o||o(e))&&l.push(n?e:e.fullpath());let p=new Set,u=(h,g)=>{p.add(h),h.readdirCB((x,b)=>{if(x)return g(x);let w=b.length;if(!w)return g();let F=()=>{--w===0&&g()};for(let M of b)(!o||o(M))&&l.push(n?M:M.fullpath()),i&&M.isSymbolicLink()?M.realpath().then(U=>U?.isUnknown()?U.lstat():U).then(U=>U?.shouldWalk(p,a)?u(U,F):F()):M.shouldWalk(p,a)?u(M,F):F()},!0)},d=e;return new Promise((h,g)=>{u(d,x=>{if(x)return g(x);h(l)})})}walkSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Gt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:a}=r,l=[];(!o||o(e))&&l.push(n?e:e.fullpath());let p=new Set([e]);for(let u of p){let d=u.readdirSync();for(let h of d){(!o||o(h))&&l.push(n?h:h.fullpath());let g=h;if(h.isSymbolicLink()){if(!(i&&(g=h.realpathSync())))continue;g.isUnknown()&&g.lstatSync()}g.shouldWalk(p,a)&&p.add(g)}}return l}[Symbol.asyncIterator](){return this.iterate()}iterate(e=this.cwd,r={}){return typeof e=="string"?e=this.cwd.resolve(e):e instanceof Gt||(r=e,e=this.cwd),this.stream(e,r)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Gt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:a}=r;(!o||o(e))&&(yield n?e:e.fullpath());let l=new Set([e]);for(let p of l){let u=p.readdirSync();for(let d of u){(!o||o(d))&&(yield n?d:d.fullpath());let h=d;if(d.isSymbolicLink()){if(!(i&&(h=d.realpathSync())))continue;h.isUnknown()&&h.lstatSync()}h.shouldWalk(l,a)&&l.add(h)}}}stream(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Gt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:a}=r,l=new bo({objectMode:!0});(!o||o(e))&&l.write(n?e:e.fullpath());let p=new Set,u=[e],d=0,h=()=>{let g=!1;for(;!g;){let x=u.shift();if(!x){d===0&&l.end();return}d++,p.add(x);let b=(F,M,U=!1)=>{if(F)return l.emit("error",F);if(i&&!U){let Z=[];for(let ne of M)ne.isSymbolicLink()&&Z.push(ne.realpath().then(he=>he?.isUnknown()?he.lstat():he));if(Z.length){Promise.all(Z).then(()=>b(null,M,!0));return}}for(let Z of M)Z&&(!o||o(Z))&&(l.write(n?Z:Z.fullpath())||(g=!0));d--;for(let Z of M){let ne=Z.realpathCached()||Z;ne.shouldWalk(p,a)&&u.push(ne)}g&&!l.flowing?l.once("drain",h):w||h()},w=!0;x.readdirCB(b,!0),w=!1}};return h(),l}streamSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Gt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:a}=r,l=new bo({objectMode:!0}),p=new Set;(!o||o(e))&&l.write(n?e:e.fullpath());let u=[e],d=0,h=()=>{let g=!1;for(;!g;){let x=u.shift();if(!x){d===0&&l.end();return}d++,p.add(x);let b=x.readdirSync();for(let w of b)(!o||o(w))&&(l.write(n?w:w.fullpath())||(g=!0));d--;for(let w of b){let F=w;if(w.isSymbolicLink()){if(!(i&&(F=w.realpathSync())))continue;F.isUnknown()&&F.lstatSync()}F.shouldWalk(p,a)&&u.push(F)}}g&&!l.flowing&&l.once("drain",h)};return h(),l}chdir(e=this.cwd){let r=this.cwd;this.cwd=typeof e=="string"?this.cwd.resolve(e):e,this.cwd[kF](r)}},ec=class extends $g{sep="\\";constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,Ja.win32,"\\",{...r,nocase:n}),this.nocase=n;for(let i=this.cwd;i;i=i.parent)i.nocase=this.nocase}parseRootPath(e){return Ja.win32.parse(e).root.toUpperCase()}newRoot(e){return new Hg(this.rootPath,Jn,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")||e.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(e)}},tc=class extends $g{sep="/";constructor(e=process.cwd(),r={}){let{nocase:n=!1}=r;super(e,Ja.posix,"/",{...r,nocase:n}),this.nocase=n}parseRootPath(e){return"/"}newRoot(e){return new Wg(this.rootPath,Jn,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")}},dp=class extends tc{constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,{...r,nocase:n})}},ROe=process.platform==="win32"?Hg:Wg,PF=process.platform==="win32"?ec:process.platform==="darwin"?dp:tc;var MF=require("url");var yZ=t=>t.length>=1,xZ=t=>t.length>=1,rc=class t{#e;#r;#o;length;#n;#s;#S;#l;#u;#c;#a=!0;constructor(e,r,n,i){if(!yZ(e))throw new TypeError("empty pattern list");if(!xZ(r))throw new TypeError("empty glob list");if(r.length!==e.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=e.length,n<0||n>=this.length)throw new TypeError("index out of range");if(this.#e=e,this.#r=r,this.#o=n,this.#n=i,this.#o===0){if(this.isUNC()){let[o,a,l,p,...u]=this.#e,[d,h,g,x,...b]=this.#r;u[0]===""&&(u.shift(),b.shift());let w=[o,a,l,p,""].join("/"),F=[d,h,g,x,""].join("/");this.#e=[w,...u],this.#r=[F,...b],this.length=this.#e.length}else if(this.isDrive()||this.isAbsolute()){let[o,...a]=this.#e,[l,...p]=this.#r;a[0]===""&&(a.shift(),p.shift());let u=o+"/",d=l+"/";this.#e=[u,...a],this.#r=[d,...p],this.length=this.#e.length}}}pattern(){return this.#e[this.#o]}isString(){return typeof this.#e[this.#o]=="string"}isGlobstar(){return this.#e[this.#o]===Ut}isRegExp(){return this.#e[this.#o]instanceof RegExp}globString(){return this.#S=this.#S||(this.#o===0?this.isAbsolute()?this.#r[0]+this.#r.slice(1).join("/"):this.#r.join("/"):this.#r.slice(this.#o).join("/"))}hasMore(){return this.length>this.#o+1}rest(){return this.#s!==void 0?this.#s:this.hasMore()?(this.#s=new t(this.#e,this.#r,this.#o+1,this.#n),this.#s.#c=this.#c,this.#s.#u=this.#u,this.#s.#l=this.#l,this.#s):this.#s=null}isUNC(){let e=this.#e;return this.#u!==void 0?this.#u:this.#u=this.#n==="win32"&&this.#o===0&&e[0]===""&&e[1]===""&&typeof e[2]=="string"&&!!e[2]&&typeof e[3]=="string"&&!!e[3]}isDrive(){let e=this.#e;return this.#l!==void 0?this.#l:this.#l=this.#n==="win32"&&this.#o===0&&this.length>1&&typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0])}isAbsolute(){let e=this.#e;return this.#c!==void 0?this.#c:this.#c=e[0]===""&&e.length>1||this.isDrive()||this.isUNC()}root(){let e=this.#e[0];return typeof e=="string"&&this.isAbsolute()&&this.#o===0?e:""}checkFollowGlobstar(){return!(this.#o===0||!this.isGlobstar()||!this.#a)}markFollowGlobstar(){return this.#o===0||!this.isGlobstar()||!this.#a?!1:(this.#a=!1,!0)}};var TZ=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",mp=class{relative;relativeChildren;absolute;absoluteChildren;constructor(e,{nobrace:r,nocase:n,noext:i,noglobstar:o,platform:a=TZ}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[];let l={dot:!0,nobrace:r,nocase:n,noext:i,noglobstar:o,optimizationLevel:2,platform:a,nocomment:!0,nonegate:!0};for(let p of e){let u=new Br(p,l);for(let d=0;d<u.set.length;d++){let h=u.set[d],g=u.globParts[d];if(!h||!g)throw new Error("invalid pattern object");let x=new rc(h,g,0,a),b=new Br(x.globString(),l),w=g[g.length-1]==="**",F=x.isAbsolute();F?this.absolute.push(b):this.relative.push(b),w&&(F?this.absoluteChildren.push(b):this.relativeChildren.push(b))}}}ignored(e){let r=e.fullpath(),n=`${r}/`,i=e.relative()||".",o=`${i}/`;for(let a of this.relative)if(a.match(i)||a.match(o))return!0;for(let a of this.absolute)if(a.match(r)||a.match(n))return!0;return!1}childrenIgnored(e){let r=e.fullpath()+"/",n=(e.relative()||".")+"/";for(let i of this.relativeChildren)if(i.match(n))return!0;for(let i of this.absoluteChildren)if(i.match(r))return!0;return!1}};var Fv=class t{store;constructor(e=new Map){this.store=e}copy(){return new t(new Map(this.store))}hasWalked(e,r){return this.store.get(e.fullpath())?.has(r.globString())}storeWalked(e,r){let n=e.fullpath(),i=this.store.get(n);i?i.add(r.globString()):this.store.set(n,new Set([r.globString()]))}},Cv=class{store=new Map;add(e,r,n){let i=(r?2:0)|(n?1:0),o=this.store.get(e);this.store.set(e,o===void 0?i:i&o)}entries(){return[...this.store.entries()].map(([e,r])=>[e,!!(r&2),!!(r&1)])}},Ov=class{store=new Map;add(e,r){if(!e.canReaddir())return;let n=this.store.get(e);n?n.find(i=>i.globString()===r.globString())||n.push(r):this.store.set(e,[r])}get(e){let r=this.store.get(e);if(!r)throw new Error("attempting to walk unknown path");return r}entries(){return this.keys().map(e=>[e,this.store.get(e)])}keys(){return[...this.store.keys()].filter(e=>e.canReaddir())}},hp=class t{hasWalkedCache;matches=new Cv;subwalks=new Ov;patterns;follow;dot;opts;constructor(e,r){this.opts=e,this.follow=!!e.follow,this.dot=!!e.dot,this.hasWalkedCache=r?r.copy():new Fv}processPatterns(e,r){this.patterns=r;let n=r.map(i=>[e,i]);for(let[i,o]of n){this.hasWalkedCache.storeWalked(i,o);let a=o.root(),l=o.isAbsolute()&&this.opts.absolute!==!1;if(a){i=i.resolve(a==="/"&&this.opts.root!==void 0?this.opts.root:a);let h=o.rest();if(h)o=h;else{this.matches.add(i,!0,!1);continue}}if(i.isENOENT())continue;let p,u,d=!1;for(;typeof(p=o.pattern())=="string"&&(u=o.rest());)i=i.resolve(p),o=u,d=!0;if(p=o.pattern(),u=o.rest(),d){if(this.hasWalkedCache.hasWalked(i,o))continue;this.hasWalkedCache.storeWalked(i,o)}if(typeof p=="string"){let h=p===".."||p===""||p===".";this.matches.add(i.resolve(p),l,h);continue}else if(p===Ut){(!i.isSymbolicLink()||this.follow||o.checkFollowGlobstar())&&this.subwalks.add(i,o);let h=u?.pattern(),g=u?.rest();if(!u||(h===""||h===".")&&!g)this.matches.add(i,l,h===""||h===".");else if(h===".."){let x=i.parent||i;g?this.hasWalkedCache.hasWalked(x,g)||this.subwalks.add(x,g):this.matches.add(x,l,!0)}}else p instanceof RegExp&&this.subwalks.add(i,o)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new t(this.opts,this.hasWalkedCache)}filterEntries(e,r){let n=this.subwalks.get(e),i=this.child();for(let o of r)for(let a of n){let l=a.isAbsolute(),p=a.pattern(),u=a.rest();p===Ut?i.testGlobstar(o,a,u,l):p instanceof RegExp?i.testRegExp(o,p,u,l):i.testString(o,p,u,l)}return i}testGlobstar(e,r,n,i){if((this.dot||!e.name.startsWith("."))&&(r.hasMore()||this.matches.add(e,i,!1),e.canReaddir()&&(this.follow||!e.isSymbolicLink()?this.subwalks.add(e,r):e.isSymbolicLink()&&(n&&r.checkFollowGlobstar()?this.subwalks.add(e,n):r.markFollowGlobstar()&&this.subwalks.add(e,r)))),n){let o=n.pattern();if(typeof o=="string"&&o!==".."&&o!==""&&o!==".")this.testString(e,o,n.rest(),i);else if(o===".."){let a=e.parent||e;this.subwalks.add(a,n)}else o instanceof RegExp&&this.testRegExp(e,o,n.rest(),i)}}testRegExp(e,r,n,i){r.test(e.name)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}testString(e,r,n,i){e.isNamed(r)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}};var SZ=(t,e)=>typeof t=="string"?new mp([t],e):Array.isArray(t)?new mp(t,e):t,qg=class{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#e=[];#r;#o;signal;maxDepth;constructor(e,r,n){this.patterns=e,this.path=r,this.opts=n,this.#o=!n.posix&&n.platform==="win32"?"\\":"/",n.ignore&&(this.#r=SZ(n.ignore,n)),this.maxDepth=n.maxDepth||1/0,n.signal&&(this.signal=n.signal,this.signal.addEventListener("abort",()=>{this.#e.length=0}))}#n(e){return this.seen.has(e)||!!this.#r?.ignored?.(e)}#s(e){return!!this.#r?.childrenIgnored?.(e)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;this.paused=!1;let e;for(;!this.paused&&(e=this.#e.shift());)e()}onResume(e){this.signal?.aborted||(this.paused?this.#e.push(e):e())}async matchCheck(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||await e.realpath(),!n)return;e=n}let i=e.isUnknown()||this.opts.stat;return this.matchCheckTest(i?await e.lstat():e,r)}matchCheckTest(e,r){return e&&(this.maxDepth===1/0||e.depth()<=this.maxDepth)&&(!r||e.canReaddir())&&(!this.opts.nodir||!e.isDirectory())&&!this.#n(e)?e:void 0}matchCheckSync(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||e.realpathSync(),!n)return;e=n}let i=e.isUnknown()||this.opts.stat;return this.matchCheckTest(i?e.lstatSync():e,r)}matchFinish(e,r){if(this.#n(e))return;let n=this.opts.absolute===void 0?r:this.opts.absolute;this.seen.add(e);let i=this.opts.mark&&e.isDirectory()?this.#o:"";if(this.opts.withFileTypes)this.matchEmit(e);else if(n){let o=this.opts.posix?e.fullpathPosix():e.fullpath();this.matchEmit(o+i)}else{let o=this.opts.posix?e.relativePosix():e.relative(),a=this.opts.dotRelative&&!o.startsWith(".."+this.#o)?"."+this.#o:"";this.matchEmit(o?a+o+i:"."+i)}}async match(e,r,n){let i=await this.matchCheck(e,n);i&&this.matchFinish(i,r)}matchSync(e,r,n){let i=this.matchCheckSync(e,n);i&&this.matchFinish(i,r)}walkCB(e,r,n){this.signal?.aborted&&n(),this.walkCB2(e,r,new hp(this.opts),n)}walkCB2(e,r,n,i){if(this.#s(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2(e,r,n,i));return}n.processPatterns(e,r);let o=1,a=()=>{--o===0&&i()};for(let[l,p,u]of n.matches.entries())this.#n(l)||(o++,this.match(l,p,u).then(()=>a()));for(let l of n.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;o++;let p=l.readdirCached();l.calledReaddir()?this.walkCB3(l,p,n,a):l.readdirCB((u,d)=>this.walkCB3(l,d,n,a),!0)}a()}walkCB3(e,r,n,i){n=n.filterEntries(e,r);let o=1,a=()=>{--o===0&&i()};for(let[l,p,u]of n.matches.entries())this.#n(l)||(o++,this.match(l,p,u).then(()=>a()));for(let[l,p]of n.subwalks.entries())o++,this.walkCB2(l,p,n.child(),a);a()}walkCBSync(e,r,n){this.signal?.aborted&&n(),this.walkCB2Sync(e,r,new hp(this.opts),n)}walkCB2Sync(e,r,n,i){if(this.#s(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2Sync(e,r,n,i));return}n.processPatterns(e,r);let o=1,a=()=>{--o===0&&i()};for(let[l,p,u]of n.matches.entries())this.#n(l)||this.matchSync(l,p,u);for(let l of n.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;o++;let p=l.readdirSync();this.walkCB3Sync(l,p,n,a)}a()}walkCB3Sync(e,r,n,i){n=n.filterEntries(e,r);let o=1,a=()=>{--o===0&&i()};for(let[l,p,u]of n.matches.entries())this.#n(l)||this.matchSync(l,p,u);for(let[l,p]of n.subwalks.entries())o++,this.walkCB2Sync(l,p,n.child(),a);a()}},gp=class extends qg{matches;constructor(e,r,n){super(e,r,n),this.matches=new Set}matchEmit(e){this.matches.add(e)}async walk(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise((e,r)=>{this.walkCB(this.path,this.patterns,()=>{this.signal?.aborted?r(this.signal.reason):e(this.matches)})}),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>{if(this.signal?.aborted)throw this.signal.reason}),this.matches}},yp=class extends qg{results;constructor(e,r,n){super(e,r,n),this.results=new bo({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(e){this.results.write(e),this.results.flowing||this.pause()}stream(){let e=this.path;return e.isUnknown()?e.lstat().then(()=>{this.walkCB(e,this.patterns,()=>this.results.end())}):this.walkCB(e,this.patterns,()=>this.results.end()),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}};var vZ=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",Cn=class{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;opts;patterns;constructor(e,r){if(!r)throw new TypeError("glob options required");if(this.withFileTypes=!!r.withFileTypes,this.signal=r.signal,this.follow=!!r.follow,this.dot=!!r.dot,this.dotRelative=!!r.dotRelative,this.nodir=!!r.nodir,this.mark=!!r.mark,r.cwd?(r.cwd instanceof URL||r.cwd.startsWith("file://"))&&(r.cwd=(0,MF.fileURLToPath)(r.cwd)):this.cwd="",this.cwd=r.cwd||"",this.root=r.root,this.magicalBraces=!!r.magicalBraces,this.nobrace=!!r.nobrace,this.noext=!!r.noext,this.realpath=!!r.realpath,this.absolute=r.absolute,this.noglobstar=!!r.noglobstar,this.matchBase=!!r.matchBase,this.maxDepth=typeof r.maxDepth=="number"?r.maxDepth:1/0,this.stat=!!r.stat,this.ignore=r.ignore,this.withFileTypes&&this.absolute!==void 0)throw new Error("cannot set absolute and withFileTypes:true");if(typeof e=="string"&&(e=[e]),this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(e=e.map(p=>p.replace(/\\/g,"/"))),this.matchBase){if(r.noglobstar)throw new TypeError("base matching requires globstar");e=e.map(p=>p.includes("/")?p:`./**/${p}`)}if(this.pattern=e,this.platform=r.platform||vZ,this.opts={...r,platform:this.platform},r.scurry){if(this.scurry=r.scurry,r.nocase!==void 0&&r.nocase!==r.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{let p=r.platform==="win32"?ec:r.platform==="darwin"?dp:r.platform?tc:PF;this.scurry=new p(this.cwd,{nocase:r.nocase,fs:r.fs})}this.nocase=this.scurry.nocase;let n=this.platform==="darwin"||this.platform==="win32",i={...r,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:n,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},o=this.pattern.map(p=>new Br(p,i)),[a,l]=o.reduce((p,u)=>(p[0].push(...u.set),p[1].push(...u.globParts),p),[[],[]]);this.patterns=a.map((p,u)=>{let d=l[u];if(!d)throw new Error("invalid pattern object");return new rc(p,d,0,this.platform)})}async walk(){return[...await new gp(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase}).walk()]}walkSync(){return[...new gp(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase}).walkSync()]}stream(){return new yp(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase}).stream()}streamSync(){return new yp(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}};var Nv=(t,e={})=>{Array.isArray(t)||(t=[t]);for(let r of t)if(new Br(r,e).hasMagic())return!0;return!1};function jg(t,e={}){return new Cn(t,e).streamSync()}function DF(t,e={}){return new Cn(t,e).stream()}function IF(t,e={}){return new Cn(t,e).walkSync()}async function AF(t,e={}){return new Cn(t,e).walk()}function zg(t,e={}){return new Cn(t,e).iterateSync()}function FF(t,e={}){return new Cn(t,e).iterate()}var bZ=jg,wZ=Object.assign(DF,{sync:jg}),_Z=zg,EZ=Object.assign(FF,{sync:zg}),RZ=Object.assign(IF,{stream:jg,iterate:zg}),Lv=Object.assign(AF,{glob:AF,globSync:IF,sync:RZ,globStream:DF,stream:wZ,globStreamSync:jg,streamSync:bZ,globIterate:FF,iterate:EZ,globIterateSync:zg,iterateSync:_Z,Glob:Cn,hasMagic:Nv,escape:Ka,unescape:Dn});Lv.glob=Lv;function CF(){let t=process.env.CURSORLESS_MODE;switch(t){case void 0:case"production":return"production";case"development":return"development";case"test":return"test";default:throw new Error(`Unexpected value for environment variable CURSORLESS_MODE: ${t}`)}}var qF=Object.defineProperty,MZ=Object.getOwnPropertyNames,C=(t,e)=>qF(t,"name",{value:e,configurable:!0}),AZ=(t,e)=>function(){return e||(0,t[MZ(t)[0]])((e={exports:{}}).exports,e),e.exports},eb=(t,e)=>{for(var r in e)qF(t,r,{get:e[r],enumerable:!0})},DZ=AZ({"(disabled):util"(){}}),Gg={};eb(Gg,{addChainableMethod:()=>fb,addLengthGuard:()=>bp,addMethod:()=>lb,addProperty:()=>cb,checkError:()=>Wr,compareByInspect:()=>Yg,eql:()=>g1,expectTypes:()=>YF,flag:()=>_e,getActual:()=>ey,getMessage:()=>nb,getName:()=>ry,getOperator:()=>gb,getOwnEnumerableProperties:()=>hb,getOwnEnumerablePropertySymbols:()=>mb,getPathInfo:()=>ab,hasProperty:()=>ty,inspect:()=>Ne,isNaN:()=>Xg,isProxyEnabled:()=>vp,objDisplay:()=>ms,overwriteChainableMethod:()=>db,overwriteMethod:()=>ub,overwriteProperty:()=>pb,proxify:()=>sc,test:()=>tb,transferFlags:()=>On,type:()=>Ze});var Wr={};eb(Wr,{compatibleConstructor:()=>zF,compatibleInstance:()=>jF,compatibleMessage:()=>GF,getConstructorName:()=>KF,getMessage:()=>QF});function jF(t,e){return e instanceof Error&&t===e}C(jF,"compatibleInstance");function zF(t,e){return e instanceof Error?t.constructor===e.constructor||t instanceof e.constructor:e.prototype instanceof Error||e===Error?t.constructor===e||t instanceof e:!1}C(zF,"compatibleConstructor");function GF(t,e){let r=typeof t=="string"?t:t.message;return e instanceof RegExp?e.test(r):typeof e=="string"?r.indexOf(e)!==-1:!1}C(GF,"compatibleMessage");function KF(t){let e=t;return t instanceof Error?e=t.constructor.name:typeof t=="function"&&(e=t.name,e===""&&(e=new t().name||e)),e}C(KF,"getConstructorName");function QF(t){let e="";return t&&t.message?e=t.message:typeof t=="string"&&(e=t),e}C(QF,"getMessage");function _e(t,e,r){var n=t.__flags||(t.__flags=Object.create(null));if(arguments.length===3)n[e]=r;else return n[e]}C(_e,"flag");function tb(t,e){var r=_e(t,"negate"),n=e[0];return r?!n:n}C(tb,"test");function Ze(t){if(typeof t>"u")return"undefined";if(t===null)return"null";let e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}C(Ze,"type");var IZ="captureStackTrace"in Error,je=class ZF extends Error{static{C(this,"AssertionError")}message;get name(){return"AssertionError"}get ok(){return!1}constructor(e="Unspecified AssertionError",r,n){super(e),this.message=e,IZ&&Error.captureStackTrace(this,n||ZF);for(let i in r)i in this||(this[i]=r[i])}toJSON(e){return{...this,name:this.name,message:this.message,ok:!1,stack:e!==!1?this.stack:void 0}}};function YF(t,e){var r=_e(t,"message"),n=_e(t,"ssfi");r=r?r+": ":"",t=_e(t,"object"),e=e.map(function(a){return a.toLowerCase()}),e.sort();var i=e.map(function(a,l){var p=~["a","e","i","o","u"].indexOf(a.charAt(0))?"an":"a",u=e.length>1&&l===e.length-1?"or ":"";return u+p+" "+a}).join(", "),o=Ze(t).toLowerCase();if(!e.some(function(a){return o===a}))throw new je(r+"object tested must be "+i+", but "+o+" given",void 0,n)}C(YF,"expectTypes");function ey(t,e){return e.length>4?e[4]:t._obj}C(ey,"getActual");var OF={bold:["1","22"],dim:["2","22"],italic:["3","23"],underline:["4","24"],inverse:["7","27"],hidden:["8","28"],strike:["9","29"],black:["30","39"],red:["31","39"],green:["32","39"],yellow:["33","39"],blue:["34","39"],magenta:["35","39"],cyan:["36","39"],white:["37","39"],brightblack:["30;1","39"],brightred:["31;1","39"],brightgreen:["32;1","39"],brightyellow:["33;1","39"],brightblue:["34;1","39"],brightmagenta:["35;1","39"],brightcyan:["36;1","39"],brightwhite:["37;1","39"],grey:["90","39"]},FZ={special:"cyan",number:"yellow",bigint:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",symbol:"green",date:"magenta",regexp:"red"},ic="\u2026";function XF(t,e){let r=OF[FZ[e]]||OF[e]||"";return r?`\x1B[${r[0]}m${String(t)}\x1B[${r[1]}m`:String(t)}C(XF,"colorise");function JF({showHidden:t=!1,depth:e=2,colors:r=!1,customInspect:n=!0,showProxy:i=!1,maxArrayLength:o=1/0,breakLength:a=1/0,seen:l=[],truncate:p=1/0,stylize:u=String}={},d){let h={showHidden:!!t,depth:Number(e),colors:!!r,customInspect:!!n,showProxy:!!i,maxArrayLength:Number(o),breakLength:Number(a),truncate:Number(p),seen:l,inspect:d,stylize:u};return h.colors&&(h.stylize=XF),h}C(JF,"normaliseOptions");function Ii(t,e,r=ic){t=String(t);let n=r.length,i=t.length;return n>e&&i>n?r:i>e&&i>n?`${t.slice(0,e-n)}${r}`:t}C(Ii,"truncate");function dn(t,e,r,n=", "){r=r||e.inspect;let i=t.length;if(i===0)return"";let o=e.truncate,a="",l="",p="";for(let u=0;u<i;u+=1){let d=u+1===t.length,h=u+2===t.length;p=`${ic}(${t.length-u})`;let g=t[u];e.truncate=o-a.length-(d?0:n.length);let x=l||r(g,e)+(d?"":n),b=a.length+x.length,w=b+p.length;if(d&&b>o&&a.length+p.length<=o||!d&&!h&&w>o||(l=d?"":r(t[u+1],e)+(h?"":n),!d&&h&&w>o&&b+l.length>o))break;if(a+=x,!d&&!h&&b+l.length>=o){p=`${ic}(${t.length-u-1})`;break}p=""}return`${a}${p}`}C(dn,"inspectList");function e1(t){return t.match(/^[a-zA-Z_][a-zA-Z_0-9]*$/)?t:JSON.stringify(t).replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'")}C(e1,"quoteComplexKey");function oc([t,e],r){return r.truncate-=2,typeof t=="string"?t=e1(t):typeof t!="number"&&(t=`[${r.inspect(t,r)}]`),r.truncate-=t.length,e=r.inspect(e,r),`${t}: ${e}`}C(oc,"inspectProperty");function t1(t,e){let r=Object.keys(t).slice(t.length);if(!t.length&&!r.length)return"[]";e.truncate-=4;let n=dn(t,e);e.truncate-=n.length;let i="";return r.length&&(i=dn(r.map(o=>[o,t[o]]),e,oc)),`[ ${n}${i?`, ${i}`:""} ]`}C(t1,"inspectArray");var CZ=C(t=>typeof Buffer=="function"&&t instanceof Buffer?"Buffer":t[Symbol.toStringTag]?t[Symbol.toStringTag]:t.constructor.name,"getArrayName");function ti(t,e){let r=CZ(t);e.truncate-=r.length+4;let n=Object.keys(t).slice(t.length);if(!t.length&&!n.length)return`${r}[]`;let i="";for(let a=0;a<t.length;a++){let l=`${e.stylize(Ii(t[a],e.truncate),"number")}${a===t.length-1?"":", "}`;if(e.truncate-=l.length,t[a]!==t.length&&e.truncate<=3){i+=`${ic}(${t.length-t[a]+1})`;break}i+=l}let o="";return n.length&&(o=dn(n.map(a=>[a,t[a]]),e,oc)),`${r}[ ${i}${o?`, ${o}`:""} ]`}C(ti,"inspectTypedArray");function r1(t,e){let r=t.toJSON();if(r===null)return"Invalid Date";let n=r.split("T"),i=n[0];return e.stylize(`${i}T${Ii(n[1],e.truncate-i.length-1)}`,"date")}C(r1,"inspectDate");function Bv(t,e){let r=t[Symbol.toStringTag]||"Function",n=t.name;return n?e.stylize(`[${r} ${Ii(n,e.truncate-11)}]`,"special"):e.stylize(`[${r}]`,"special")}C(Bv,"inspectFunction");function n1([t,e],r){return r.truncate-=4,t=r.inspect(t,r),r.truncate-=t.length,e=r.inspect(e,r),`${t} => ${e}`}C(n1,"inspectMapEntry");function i1(t){let e=[];return t.forEach((r,n)=>{e.push([n,r])}),e}C(i1,"mapToEntries");function o1(t,e){return t.size-1<=0?"Map{}":(e.truncate-=7,`Map{ ${dn(i1(t),e,n1)} }`)}C(o1,"inspectMap");var OZ=Number.isNaN||(t=>t!==t);function Hv(t,e){return OZ(t)?e.stylize("NaN","number"):t===1/0?e.stylize("Infinity","number"):t===-1/0?e.stylize("-Infinity","number"):t===0?e.stylize(1/t===1/0?"+0":"-0","number"):e.stylize(Ii(String(t),e.truncate),"number")}C(Hv,"inspectNumber");function Wv(t,e){let r=Ii(t.toString(),e.truncate-1);return r!==ic&&(r+="n"),e.stylize(r,"bigint")}C(Wv,"inspectBigInt");function s1(t,e){let r=t.toString().split("/")[2],n=e.truncate-(2+r.length),i=t.source;return e.stylize(`/${Ii(i,n)}/${r}`,"regexp")}C(s1,"inspectRegExp");function a1(t){let e=[];return t.forEach(r=>{e.push(r)}),e}C(a1,"arrayFromSet");function c1(t,e){return t.size===0?"Set{}":(e.truncate-=7,`Set{ ${dn(a1(t),e)} }`)}C(c1,"inspectSet");var NF=new RegExp("['\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]","g"),NZ={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"},LZ=16,UZ=4;function l1(t){return NZ[t]||`\\u${`0000${t.charCodeAt(0).toString(LZ)}`.slice(-UZ)}`}C(l1,"escape");function $v(t,e){return NF.test(t)&&(t=t.replace(NF,l1)),e.stylize(`'${Ii(t,e.truncate-2)}'`,"string")}C($v,"inspectString");function qv(t){return"description"in Symbol.prototype?t.description?`Symbol(${t.description})`:"Symbol()":t.toString()}C(qv,"inspectSymbol");var p1=C(()=>"Promise{\u2026}","getPromiseValue");try{let{getPromiseDetails:t,kPending:e,kRejected:r}=process.binding("util");Array.isArray(t(Promise.resolve()))&&(p1=C((n,i)=>{let[o,a]=t(n);return o===e?"Promise{<pending>}":`Promise${o===r?"!":""}{${i.inspect(a,i)}}`},"getPromiseValue"))}catch{}var VZ=p1;function Tp(t,e){let r=Object.getOwnPropertyNames(t),n=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[];if(r.length===0&&n.length===0)return"{}";if(e.truncate-=4,e.seen=e.seen||[],e.seen.indexOf(t)>=0)return"[Circular]";e.seen.push(t);let i=dn(r.map(l=>[l,t[l]]),e,oc),o=dn(n.map(l=>[l,t[l]]),e,oc);e.seen.pop();let a="";return i&&o&&(a=", "),`{ ${i}${a}${o} }`}C(Tp,"inspectObject");var Uv=typeof Symbol<"u"&&Symbol.toStringTag?Symbol.toStringTag:!1;function u1(t,e){let r="";return Uv&&Uv in t&&(r=t[Uv]),r=r||t.constructor.name,(!r||r==="_class")&&(r="<Anonymous Class>"),e.truncate-=r.length,`${r}${Tp(t,e)}`}C(u1,"inspectClass");function f1(t,e){return t.length===0?"Arguments[]":(e.truncate-=13,`Arguments[ ${dn(t,e)} ]`)}C(f1,"inspectArguments");var BZ=["stack","line","column","name","message","fileName","lineNumber","columnNumber","number","description"];function d1(t,e){let r=Object.getOwnPropertyNames(t).filter(a=>BZ.indexOf(a)===-1),n=t.name;e.truncate-=n.length;let i="";typeof t.message=="string"?i=Ii(t.message,e.truncate):r.unshift("message"),i=i?`: ${i}`:"",e.truncate-=i.length+5;let o=dn(r.map(a=>[a,t[a]]),e,oc);return`${n}${i}${o?` { ${o} }`:""}`}C(d1,"inspectObject");function m1([t,e],r){return r.truncate-=3,e?`${r.stylize(String(t),"yellow")}=${r.stylize(`"${e}"`,"string")}`:`${r.stylize(String(t),"yellow")}`}C(m1,"inspectAttribute");function Kg(t,e){return dn(t,e,rb,`
`)}C(Kg,"inspectHTMLCollection");function rb(t,e){let r=t.getAttributeNames(),n=t.tagName.toLowerCase(),i=e.stylize(`<${n}`,"special"),o=e.stylize(">","special"),a=e.stylize(`</${n}>`,"special");e.truncate-=n.length*2+5;let l="";r.length>0&&(l+=" ",l+=dn(r.map(d=>[d,t.getAttribute(d)]),e,m1," ")),e.truncate-=l.length;let p=e.truncate,u=Kg(t.children,e);return u&&u.length>p&&(u=`${ic}(${t.children.length})`),`${i}${l}${o}${u}${a}`}C(rb,"inspectHTML");var HZ=typeof Symbol=="function"&&typeof Symbol.for=="function",Vv=HZ?Symbol.for("chai/inspect"):"@@chai/inspect",nc=!1;try{let t=DZ();nc=t.inspect?t.inspect.custom:!1}catch{nc=!1}var LF=new WeakMap,UF={},VF={undefined:(t,e)=>e.stylize("undefined","undefined"),null:(t,e)=>e.stylize("null","null"),boolean:(t,e)=>e.stylize(String(t),"boolean"),Boolean:(t,e)=>e.stylize(String(t),"boolean"),number:Hv,Number:Hv,bigint:Wv,BigInt:Wv,string:$v,String:$v,function:Bv,Function:Bv,symbol:qv,Symbol:qv,Array:t1,Date:r1,Map:o1,Set:c1,RegExp:s1,Promise:VZ,WeakSet:(t,e)=>e.stylize("WeakSet{\u2026}","special"),WeakMap:(t,e)=>e.stylize("WeakMap{\u2026}","special"),Arguments:f1,Int8Array:ti,Uint8Array:ti,Uint8ClampedArray:ti,Int16Array:ti,Uint16Array:ti,Int32Array:ti,Uint32Array:ti,Float32Array:ti,Float64Array:ti,Generator:()=>"",DataView:()=>"",ArrayBuffer:()=>"",Error:d1,HTMLCollection:Kg,NodeList:Kg},WZ=C((t,e,r)=>Vv in t&&typeof t[Vv]=="function"?t[Vv](e):nc&&nc in t&&typeof t[nc]=="function"?t[nc](e.depth,e):"inspect"in t&&typeof t.inspect=="function"?t.inspect(e.depth,e):"constructor"in t&&LF.has(t.constructor)?LF.get(t.constructor)(t,e):UF[r]?UF[r](t,e):"","inspectCustom"),$Z=Object.prototype.toString;function Qg(t,e={}){let r=JF(e,Qg),{customInspect:n}=r,i=t===null?"null":typeof t;if(i==="object"&&(i=$Z.call(t).slice(8,-1)),i in VF)return VF[i](t,r);if(n&&t){let a=WZ(t,r,i);if(a)return typeof a=="string"?a:Qg(a,r)}let o=t?Object.getPrototypeOf(t):!1;return o===Object.prototype||o===null?Tp(t,r):t&&typeof HTMLElement=="function"&&t instanceof HTMLElement?rb(t,r):"constructor"in t?t.constructor!==Object?u1(t,r):Tp(t,r):t===Object(t)?Tp(t,r):r.stylize(String(t),i)}C(Qg,"inspect");var br={includeStack:!1,showDiff:!0,truncateThreshold:40,useProxy:!0,proxyExcludedKeys:["then","catch","inspect","toJSON"],deepEqual:null};function Ne(t,e,r,n){var i={colors:n,depth:typeof r>"u"?2:r,showHidden:e,truncate:br.truncateThreshold?br.truncateThreshold:1/0};return Qg(t,i)}C(Ne,"inspect");function ms(t){var e=Ne(t),r=Object.prototype.toString.call(t);if(br.truncateThreshold&&e.length>=br.truncateThreshold){if(r==="[object Function]")return!t.name||t.name===""?"[Function]":"[Function: "+t.name+"]";if(r==="[object Array]")return"[ Array("+t.length+") ]";if(r==="[object Object]"){var n=Object.keys(t),i=n.length>2?n.splice(0,2).join(", ")+", ...":n.join(", ");return"{ Object ("+i+") }"}else return e}else return e}C(ms,"objDisplay");function nb(t,e){var r=_e(t,"negate"),n=_e(t,"object"),i=e[3],o=ey(t,e),a=r?e[2]:e[1],l=_e(t,"message");return typeof a=="function"&&(a=a()),a=a||"",a=a.replace(/#\{this\}/g,function(){return ms(n)}).replace(/#\{act\}/g,function(){return ms(o)}).replace(/#\{exp\}/g,function(){return ms(i)}),l?l+": "+a:a}C(nb,"getMessage");function On(t,e,r){var n=t.__flags||(t.__flags=Object.create(null));e.__flags||(e.__flags=Object.create(null)),r=arguments.length===3?r:!0;for(var i in n)(r||i!=="object"&&i!=="ssfi"&&i!=="lockSsfi"&&i!="message")&&(e.__flags[i]=n[i])}C(On,"transferFlags");function jv(t){if(typeof t>"u")return"undefined";if(t===null)return"null";let e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}C(jv,"type");function ib(){this._key="chai/deep-eql__"+Math.random()+Date.now()}C(ib,"FakeMap");ib.prototype={get:C(function(e){return e[this._key]},"get"),set:C(function(e,r){Object.isExtensible(e)&&Object.defineProperty(e,this._key,{value:r,configurable:!0})},"set")};var h1=typeof WeakMap=="function"?WeakMap:ib;function zv(t,e,r){if(!r||hs(t)||hs(e))return null;var n=r.get(t);if(n){var i=n.get(e);if(typeof i=="boolean")return i}return null}C(zv,"memoizeCompare");function xp(t,e,r,n){if(!(!r||hs(t)||hs(e))){var i=r.get(t);i?i.set(e,n):(i=new h1,i.set(e,n),r.set(t,i))}}C(xp,"memoizeSet");var g1=Sp;function Sp(t,e,r){if(r&&r.comparator)return Gv(t,e,r);var n=ob(t,e);return n!==null?n:Gv(t,e,r)}C(Sp,"deepEqual");function ob(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e?!0:hs(t)||hs(e)?!1:null}C(ob,"simpleEqual");function Gv(t,e,r){r=r||{},r.memoize=r.memoize===!1?!1:r.memoize||new h1;var n=r&&r.comparator,i=zv(t,e,r.memoize);if(i!==null)return i;var o=zv(e,t,r.memoize);if(o!==null)return o;if(n){var a=n(t,e);if(a===!1||a===!0)return xp(t,e,r.memoize,a),a;var l=ob(t,e);if(l!==null)return l}var p=jv(t);if(p!==jv(e))return xp(t,e,r.memoize,!1),!1;xp(t,e,r.memoize,!0);var u=y1(t,e,p,r);return xp(t,e,r.memoize,u),u}C(Gv,"extensiveDeepEqual");function y1(t,e,r,n){switch(r){case"String":case"Number":case"Boolean":case"Date":return Sp(t.valueOf(),e.valueOf());case"Promise":case"Symbol":case"function":case"WeakMap":case"WeakSet":return t===e;case"Error":return sb(t,e,["name","message","code"],n);case"Arguments":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"Array":return _o(t,e,n);case"RegExp":return x1(t,e);case"Generator":return T1(t,e,n);case"DataView":return _o(new Uint8Array(t.buffer),new Uint8Array(e.buffer),n);case"ArrayBuffer":return _o(new Uint8Array(t),new Uint8Array(e),n);case"Set":return Kv(t,e,n);case"Map":return Kv(t,e,n);case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.Instant":case"Temporal.ZonedDateTime":case"Temporal.PlainYearMonth":case"Temporal.PlainMonthDay":return t.equals(e);case"Temporal.Duration":return t.total("nanoseconds")===e.total("nanoseconds");case"Temporal.TimeZone":case"Temporal.Calendar":return t.toString()===e.toString();default:return v1(t,e,n)}}C(y1,"extensiveDeepEqualByType");function x1(t,e){return t.toString()===e.toString()}C(x1,"regexpEqual");function Kv(t,e,r){if(t.size!==e.size)return!1;if(t.size===0)return!0;var n=[],i=[];return t.forEach(C(function(a,l){n.push([a,l])},"gatherEntries")),e.forEach(C(function(a,l){i.push([a,l])},"gatherEntries")),_o(n.sort(),i.sort(),r)}C(Kv,"entriesEqual");function _o(t,e,r){var n=t.length;if(n!==e.length)return!1;if(n===0)return!0;for(var i=-1;++i<n;)if(Sp(t[i],e[i],r)===!1)return!1;return!0}C(_o,"iterableEqual");function T1(t,e,r){return _o(Zg(t),Zg(e),r)}C(T1,"generatorEqual");function S1(t){return typeof Symbol<"u"&&typeof t=="object"&&typeof Symbol.iterator<"u"&&typeof t[Symbol.iterator]=="function"}C(S1,"hasIteratorFunction");function Qv(t){if(S1(t))try{return Zg(t[Symbol.iterator]())}catch{return[]}return[]}C(Qv,"getIteratorEntries");function Zg(t){for(var e=t.next(),r=[e.value];e.done===!1;)e=t.next(),r.push(e.value);return r}C(Zg,"getGeneratorEntries");function Zv(t){var e=[];for(var r in t)e.push(r);return e}C(Zv,"getEnumerableKeys");function Yv(t){for(var e=[],r=Object.getOwnPropertySymbols(t),n=0;n<r.length;n+=1){var i=r[n];Object.getOwnPropertyDescriptor(t,i).enumerable&&e.push(i)}return e}C(Yv,"getEnumerableSymbols");function sb(t,e,r,n){var i=r.length;if(i===0)return!0;for(var o=0;o<i;o+=1)if(Sp(t[r[o]],e[r[o]],n)===!1)return!1;return!0}C(sb,"keysEqual");function v1(t,e,r){var n=Zv(t),i=Zv(e),o=Yv(t),a=Yv(e);if(n=n.concat(o),i=i.concat(a),n.length&&n.length===i.length)return _o(Xv(n).sort(),Xv(i).sort())===!1?!1:sb(t,e,n,r);var l=Qv(t),p=Qv(e);return l.length&&l.length===p.length?(l.sort(),p.sort(),_o(l,p,r)):n.length===0&&l.length===0&&i.length===0&&p.length===0}C(v1,"objectEqual");function hs(t){return t===null||typeof t!="object"}C(hs,"isPrimitive");function Xv(t){return t.map(C(function(r){return typeof r=="symbol"?r.toString():r},"mapSymbol"))}C(Xv,"mapSymbols");function ty(t,e){return typeof t>"u"||t===null?!1:e in Object(t)}C(ty,"hasProperty");function b1(t){return t.replace(/([^\\])\[/g,"$1.[").match(/(\\\.|[^.]+?)+/g).map(n=>{if(n==="constructor"||n==="__proto__"||n==="prototype")return{};let o=/^\[(\d+)\]$/.exec(n),a=null;return o?a={i:parseFloat(o[1])}:a={p:n.replace(/\\([.[\]])/g,"$1")},a})}C(b1,"parsePath");function Jv(t,e,r){let n=t,i=null;r=typeof r>"u"?e.length:r;for(let o=0;o<r;o++){let a=e[o];n&&(typeof a.p>"u"?n=n[a.i]:n=n[a.p],o===r-1&&(i=n))}return i}C(Jv,"internalGetPathValue");function ab(t,e){let r=b1(e),n=r[r.length-1],i={parent:r.length>1?Jv(t,r,r.length-1):t,name:n.p||n.i,value:Jv(t,r)};return i.exists=ty(i.parent,i.name),i}C(ab,"getPathInfo");function _(t,e,r,n){return _e(this,"ssfi",r||_),_e(this,"lockSsfi",n),_e(this,"object",t),_e(this,"message",e),_e(this,"eql",br.deepEqual||g1),sc(this)}C(_,"Assertion");Object.defineProperty(_,"includeStack",{get:function(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),br.includeStack},set:function(t){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),br.includeStack=t}});Object.defineProperty(_,"showDiff",{get:function(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),br.showDiff},set:function(t){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),br.showDiff=t}});_.addProperty=function(t,e){cb(this.prototype,t,e)};_.addMethod=function(t,e){lb(this.prototype,t,e)};_.addChainableMethod=function(t,e,r){fb(this.prototype,t,e,r)};_.overwriteProperty=function(t,e){pb(this.prototype,t,e)};_.overwriteMethod=function(t,e){ub(this.prototype,t,e)};_.overwriteChainableMethod=function(t,e,r){db(this.prototype,t,e,r)};_.prototype.assert=function(t,e,r,n,i,o){var a=tb(this,arguments);if(o!==!1&&(o=!0),n===void 0&&i===void 0&&(o=!1),br.showDiff!==!0&&(o=!1),!a){e=nb(this,arguments);var l=ey(this,arguments),p={actual:l,expected:n,showDiff:o},u=gb(this,arguments);throw u&&(p.operator=u),new je(e,p,br.includeStack?this.assert:_e(this,"ssfi"))}};Object.defineProperty(_.prototype,"_obj",{get:function(){return _e(this,"object")},set:function(t){_e(this,"object",t)}});function vp(){return br.useProxy&&typeof Proxy<"u"&&typeof Reflect<"u"}C(vp,"isProxyEnabled");function cb(t,e,r){r=r===void 0?function(){}:r,Object.defineProperty(t,e,{get:C(function n(){!vp()&&!_e(this,"lockSsfi")&&_e(this,"ssfi",n);var i=r.call(this);if(i!==void 0)return i;var o=new _;return On(this,o),o},"propertyGetter"),configurable:!0})}C(cb,"addProperty");var qZ=Object.getOwnPropertyDescriptor(function(){},"length");function bp(t,e,r){return qZ.configurable&&Object.defineProperty(t,"length",{get:function(){throw Error(r?"Invalid Chai property: "+e+'.length. Due to a compatibility issue, "length" cannot directly follow "'+e+'". Use "'+e+'.lengthOf" instead.':"Invalid Chai property: "+e+'.length. See docs for proper usage of "'+e+'".')}}),t}C(bp,"addLengthGuard");function w1(t){var e=Object.getOwnPropertyNames(t);function r(i){e.indexOf(i)===-1&&e.push(i)}C(r,"addProperty");for(var n=Object.getPrototypeOf(t);n!==null;)Object.getOwnPropertyNames(n).forEach(r),n=Object.getPrototypeOf(n);return e}C(w1,"getProperties");var BF=["__flags","__methods","_obj","assert"];function sc(t,e){return vp()?new Proxy(t,{get:C(function r(n,i){if(typeof i=="string"&&br.proxyExcludedKeys.indexOf(i)===-1&&!Reflect.has(n,i)){if(e)throw Error("Invalid Chai property: "+e+"."+i+'. See docs for proper usage of "'+e+'".');var o=null,a=4;throw w1(n).forEach(function(l){if(!Object.prototype.hasOwnProperty(l)&&BF.indexOf(l)===-1){var p=_1(i,l,a);p<a&&(o=l,a=p)}}),Error(o!==null?"Invalid Chai property: "+i+'. Did you mean "'+o+'"?':"Invalid Chai property: "+i)}return BF.indexOf(i)===-1&&!_e(n,"lockSsfi")&&_e(n,"ssfi",r),Reflect.get(n,i)},"proxyGetter")}):t}C(sc,"proxify");function _1(t,e,r){if(Math.abs(t.length-e.length)>=r)return r;for(var n=[],i=0;i<=t.length;i++)n[i]=Array(e.length+1).fill(0),n[i][0]=i;for(var o=0;o<e.length;o++)n[0][o]=o;for(var i=1;i<=t.length;i++)for(var a=t.charCodeAt(i-1),o=1;o<=e.length;o++){if(Math.abs(i-o)>=r){n[i][o]=r;continue}n[i][o]=Math.min(n[i-1][o]+1,n[i][o-1]+1,n[i-1][o-1]+(a===e.charCodeAt(o-1)?0:1))}return n[t.length][e.length]}C(_1,"stringDistanceCapped");function lb(t,e,r){var n=C(function(){_e(this,"lockSsfi")||_e(this,"ssfi",n);var i=r.apply(this,arguments);if(i!==void 0)return i;var o=new _;return On(this,o),o},"methodWrapper");bp(n,e,!1),t[e]=sc(n,e)}C(lb,"addMethod");function pb(t,e,r){var n=Object.getOwnPropertyDescriptor(t,e),i=C(function(){},"_super");n&&typeof n.get=="function"&&(i=n.get),Object.defineProperty(t,e,{get:C(function o(){!vp()&&!_e(this,"lockSsfi")&&_e(this,"ssfi",o);var a=_e(this,"lockSsfi");_e(this,"lockSsfi",!0);var l=r(i).call(this);if(_e(this,"lockSsfi",a),l!==void 0)return l;var p=new _;return On(this,p),p},"overwritingPropertyGetter"),configurable:!0})}C(pb,"overwriteProperty");function ub(t,e,r){var n=t[e],i=C(function(){throw new Error(e+" is not a function")},"_super");n&&typeof n=="function"&&(i=n);var o=C(function(){_e(this,"lockSsfi")||_e(this,"ssfi",o);var a=_e(this,"lockSsfi");_e(this,"lockSsfi",!0);var l=r(i).apply(this,arguments);if(_e(this,"lockSsfi",a),l!==void 0)return l;var p=new _;return On(this,p),p},"overwritingMethodWrapper");bp(o,e,!1),t[e]=sc(o,e)}C(ub,"overwriteMethod");var jZ=typeof Object.setPrototypeOf=="function",HF=C(function(){},"testFn"),zZ=Object.getOwnPropertyNames(HF).filter(function(t){var e=Object.getOwnPropertyDescriptor(HF,t);return typeof e!="object"?!0:!e.configurable}),GZ=Function.prototype.call,KZ=Function.prototype.apply;function fb(t,e,r,n){typeof n!="function"&&(n=C(function(){},"chainingBehavior"));var i={method:r,chainingBehavior:n};t.__methods||(t.__methods={}),t.__methods[e]=i,Object.defineProperty(t,e,{get:C(function(){i.chainingBehavior.call(this);var a=C(function(){_e(this,"lockSsfi")||_e(this,"ssfi",a);var u=i.method.apply(this,arguments);if(u!==void 0)return u;var d=new _;return On(this,d),d},"chainableMethodWrapper");if(bp(a,e,!0),jZ){var l=Object.create(this);l.call=GZ,l.apply=KZ,Object.setPrototypeOf(a,l)}else{var p=Object.getOwnPropertyNames(t);p.forEach(function(u){if(zZ.indexOf(u)===-1){var d=Object.getOwnPropertyDescriptor(t,u);Object.defineProperty(a,u,d)}})}return On(this,a),sc(a)},"chainableMethodGetter"),configurable:!0})}C(fb,"addChainableMethod");function db(t,e,r,n){var i=t.__methods[e],o=i.chainingBehavior;i.chainingBehavior=C(function(){var p=n(o).call(this);if(p!==void 0)return p;var u=new _;return On(this,u),u},"overwritingChainableMethodGetter");var a=i.method;i.method=C(function(){var p=r(a).apply(this,arguments);if(p!==void 0)return p;var u=new _;return On(this,u),u},"overwritingChainableMethodWrapper")}C(db,"overwriteChainableMethod");function Yg(t,e){return Ne(t)<Ne(e)?-1:1}C(Yg,"compareByInspect");function mb(t){return typeof Object.getOwnPropertySymbols!="function"?[]:Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})}C(mb,"getOwnEnumerablePropertySymbols");function hb(t){return Object.keys(t).concat(mb(t))}C(hb,"getOwnEnumerableProperties");function E1(t){return t!==t}C(E1,"_isNaN");var Xg=Number.isNaN||E1;function R1(t){var e=Ze(t),r=["Array","Object","Function"];return r.indexOf(e)!==-1}C(R1,"isObjectType");function gb(t,e){var r=_e(t,"operator"),n=_e(t,"negate"),i=e[3],o=n?e[2]:e[1];if(r)return r;if(typeof o=="function"&&(o=o()),o=o||"",!!o&&!/\shave\s/.test(o)){var a=R1(i);return/\snot\s/.test(o)?a?"notDeepStrictEqual":"notStrictEqual":a?"deepStrictEqual":"strictEqual"}}C(gb,"getOperator");function ry(t){return t.name}C(ry,"getName");var{flag:P}=Gg;["to","be","been","is","and","has","have","with","that","which","at","of","same","but","does","still","also"].forEach(function(t){_.addProperty(t)});_.addProperty("not",function(){P(this,"negate",!0)});_.addProperty("deep",function(){P(this,"deep",!0)});_.addProperty("nested",function(){P(this,"nested",!0)});_.addProperty("own",function(){P(this,"own",!0)});_.addProperty("ordered",function(){P(this,"ordered",!0)});_.addProperty("any",function(){P(this,"any",!0),P(this,"all",!1)});_.addProperty("all",function(){P(this,"all",!0),P(this,"any",!1)});var WF={function:["function","asyncfunction","generatorfunction","asyncgeneratorfunction"],asyncfunction:["asyncfunction","asyncgeneratorfunction"],generatorfunction:["generatorfunction","asyncgeneratorfunction"],asyncgeneratorfunction:["asyncgeneratorfunction"]};function yb(t,e){e&&P(this,"message",e),t=t.toLowerCase();var r=P(this,"object"),n=~["a","e","i","o","u"].indexOf(t.charAt(0))?"an ":"a ";let i=Ze(r).toLowerCase();WF.function.includes(t)?this.assert(WF[t].includes(i),"expected #{this} to be "+n+t,"expected #{this} not to be "+n+t):this.assert(t===i,"expected #{this} to be "+n+t,"expected #{this} not to be "+n+t)}C(yb,"an");_.addChainableMethod("an",yb);_.addChainableMethod("a",yb);function k1(t,e){return Xg(t)&&Xg(e)||t===e}C(k1,"SameValueZero");function wp(){P(this,"contains",!0)}C(wp,"includeChainingBehavior");function _p(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=Ze(r).toLowerCase(),i=P(this,"message"),o=P(this,"negate"),a=P(this,"ssfi"),l=P(this,"deep"),p=l?"deep ":"",u=l?P(this,"eql"):k1;i=i?i+": ":"";var d=!1;switch(n){case"string":d=r.indexOf(t)!==-1;break;case"weakset":if(l)throw new je(i+"unable to use .deep.include with WeakSet",void 0,a);d=r.has(t);break;case"map":r.forEach(function(b){d=d||u(b,t)});break;case"set":l?r.forEach(function(b){d=d||u(b,t)}):d=r.has(t);break;case"array":l?d=r.some(function(b){return u(b,t)}):d=r.indexOf(t)!==-1;break;default:if(t!==Object(t))throw new je(i+"the given combination of arguments ("+n+" and "+Ze(t).toLowerCase()+") is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a "+Ze(t).toLowerCase(),void 0,a);var h=Object.keys(t),g=null,x=0;if(h.forEach(function(b){var w=new _(r);if(On(this,w,!0),P(w,"lockSsfi",!0),!o||h.length===1){w.property(b,t[b]);return}try{w.property(b,t[b])}catch(F){if(!Wr.compatibleConstructor(F,je))throw F;g===null&&(g=F),x++}},this),o&&h.length>1&&x===h.length)throw g;return}this.assert(d,"expected #{this} to "+p+"include "+Ne(t),"expected #{this} to not "+p+"include "+Ne(t))}C(_p,"include");_.addChainableMethod("include",_p,wp);_.addChainableMethod("contain",_p,wp);_.addChainableMethod("contains",_p,wp);_.addChainableMethod("includes",_p,wp);_.addProperty("ok",function(){this.assert(P(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")});_.addProperty("true",function(){this.assert(P(this,"object")===!0,"expected #{this} to be true","expected #{this} to be false",!P(this,"negate"))});_.addProperty("callable",function(){let t=P(this,"object"),e=P(this,"ssfi"),r=P(this,"message"),n=r?`${r}: `:"",i=P(this,"negate"),o=i?`${n}expected ${Ne(t)} not to be a callable function`:`${n}expected ${Ne(t)} to be a callable function`,a=["Function","AsyncFunction","GeneratorFunction","AsyncGeneratorFunction"].includes(Ze(t));if(a&&i||!a&&!i)throw new je(o,void 0,e)});_.addProperty("false",function(){this.assert(P(this,"object")===!1,"expected #{this} to be false","expected #{this} to be true",!!P(this,"negate"))});_.addProperty("null",function(){this.assert(P(this,"object")===null,"expected #{this} to be null","expected #{this} not to be null")});_.addProperty("undefined",function(){this.assert(P(this,"object")===void 0,"expected #{this} to be undefined","expected #{this} not to be undefined")});_.addProperty("NaN",function(){this.assert(Xg(P(this,"object")),"expected #{this} to be NaN","expected #{this} not to be NaN")});function xb(){var t=P(this,"object");this.assert(t!=null,"expected #{this} to exist","expected #{this} to not exist")}C(xb,"assertExist");_.addProperty("exist",xb);_.addProperty("exists",xb);_.addProperty("empty",function(){var t=P(this,"object"),e=P(this,"ssfi"),r=P(this,"message"),n;switch(r=r?r+": ":"",Ze(t).toLowerCase()){case"array":case"string":n=t.length;break;case"map":case"set":n=t.size;break;case"weakmap":case"weakset":throw new je(r+".empty was passed a weak collection",void 0,e);case"function":var i=r+".empty was passed a function "+ry(t);throw new je(i.trim(),void 0,e);default:if(t!==Object(t))throw new je(r+".empty was passed non-string primitive "+Ne(t),void 0,e);n=Object.keys(t).length}this.assert(n===0,"expected #{this} to be empty","expected #{this} not to be empty")});function Tb(){var t=P(this,"object"),e=Ze(t);this.assert(e==="Arguments","expected #{this} to be arguments but got "+e,"expected #{this} to not be arguments")}C(Tb,"checkArguments");_.addProperty("arguments",Tb);_.addProperty("Arguments",Tb);function ny(t,e){e&&P(this,"message",e);var r=P(this,"object");if(P(this,"deep")){var n=P(this,"lockSsfi");P(this,"lockSsfi",!0),this.eql(t),P(this,"lockSsfi",n)}else this.assert(t===r,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",t,this._obj,!0)}C(ny,"assertEqual");_.addMethod("equal",ny);_.addMethod("equals",ny);_.addMethod("eq",ny);function Sb(t,e){e&&P(this,"message",e);var r=P(this,"eql");this.assert(r(t,P(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",t,this._obj,!0)}C(Sb,"assertEql");_.addMethod("eql",Sb);_.addMethod("eqls",Sb);function iy(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"doLength"),i=P(this,"message"),o=i?i+": ":"",a=P(this,"ssfi"),l=Ze(r).toLowerCase(),p=Ze(t).toLowerCase(),u,d=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,a,!0).to.have.property("length"),!n&&l==="date"&&p!=="date")u=o+"the argument to above must be a date";else if(p!=="number"&&(n||l==="number"))u=o+"the argument to above must be a number";else if(!n&&l!=="date"&&l!=="number"){var h=l==="string"?"'"+r+"'":r;u=o+"expected "+h+" to be a number or a date"}else d=!1;if(d)throw new je(u,void 0,a);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x>t,"expected #{this} to have a "+g+" above #{exp} but got #{act}","expected #{this} to not have a "+g+" above #{exp}",t,x)}else this.assert(r>t,"expected #{this} to be above #{exp}","expected #{this} to be at most #{exp}",t)}C(iy,"assertAbove");_.addMethod("above",iy);_.addMethod("gt",iy);_.addMethod("greaterThan",iy);function oy(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"doLength"),i=P(this,"message"),o=i?i+": ":"",a=P(this,"ssfi"),l=Ze(r).toLowerCase(),p=Ze(t).toLowerCase(),u,d=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,a,!0).to.have.property("length"),!n&&l==="date"&&p!=="date")u=o+"the argument to least must be a date";else if(p!=="number"&&(n||l==="number"))u=o+"the argument to least must be a number";else if(!n&&l!=="date"&&l!=="number"){var h=l==="string"?"'"+r+"'":r;u=o+"expected "+h+" to be a number or a date"}else d=!1;if(d)throw new je(u,void 0,a);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x>=t,"expected #{this} to have a "+g+" at least #{exp} but got #{act}","expected #{this} to have a "+g+" below #{exp}",t,x)}else this.assert(r>=t,"expected #{this} to be at least #{exp}","expected #{this} to be below #{exp}",t)}C(oy,"assertLeast");_.addMethod("least",oy);_.addMethod("gte",oy);_.addMethod("greaterThanOrEqual",oy);function sy(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"doLength"),i=P(this,"message"),o=i?i+": ":"",a=P(this,"ssfi"),l=Ze(r).toLowerCase(),p=Ze(t).toLowerCase(),u,d=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,a,!0).to.have.property("length"),!n&&l==="date"&&p!=="date")u=o+"the argument to below must be a date";else if(p!=="number"&&(n||l==="number"))u=o+"the argument to below must be a number";else if(!n&&l!=="date"&&l!=="number"){var h=l==="string"?"'"+r+"'":r;u=o+"expected "+h+" to be a number or a date"}else d=!1;if(d)throw new je(u,void 0,a);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x<t,"expected #{this} to have a "+g+" below #{exp} but got #{act}","expected #{this} to not have a "+g+" below #{exp}",t,x)}else this.assert(r<t,"expected #{this} to be below #{exp}","expected #{this} to be at least #{exp}",t)}C(sy,"assertBelow");_.addMethod("below",sy);_.addMethod("lt",sy);_.addMethod("lessThan",sy);function ay(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"doLength"),i=P(this,"message"),o=i?i+": ":"",a=P(this,"ssfi"),l=Ze(r).toLowerCase(),p=Ze(t).toLowerCase(),u,d=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,a,!0).to.have.property("length"),!n&&l==="date"&&p!=="date")u=o+"the argument to most must be a date";else if(p!=="number"&&(n||l==="number"))u=o+"the argument to most must be a number";else if(!n&&l!=="date"&&l!=="number"){var h=l==="string"?"'"+r+"'":r;u=o+"expected "+h+" to be a number or a date"}else d=!1;if(d)throw new je(u,void 0,a);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x<=t,"expected #{this} to have a "+g+" at most #{exp} but got #{act}","expected #{this} to have a "+g+" above #{exp}",t,x)}else this.assert(r<=t,"expected #{this} to be at most #{exp}","expected #{this} to be above #{exp}",t)}C(ay,"assertMost");_.addMethod("most",ay);_.addMethod("lte",ay);_.addMethod("lessThanOrEqual",ay);_.addMethod("within",function(t,e,r){r&&P(this,"message",r);var n=P(this,"object"),i=P(this,"doLength"),o=P(this,"message"),a=o?o+": ":"",l=P(this,"ssfi"),p=Ze(n).toLowerCase(),u=Ze(t).toLowerCase(),d=Ze(e).toLowerCase(),h,g=!0,x=u==="date"&&d==="date"?t.toISOString()+".."+e.toISOString():t+".."+e;if(i&&p!=="map"&&p!=="set"&&new _(n,o,l,!0).to.have.property("length"),!i&&p==="date"&&(u!=="date"||d!=="date"))h=a+"the arguments to within must be dates";else if((u!=="number"||d!=="number")&&(i||p==="number"))h=a+"the arguments to within must be numbers";else if(!i&&p!=="date"&&p!=="number"){var b=p==="string"?"'"+n+"'":n;h=a+"expected "+b+" to be a number or a date"}else g=!1;if(g)throw new je(h,void 0,l);if(i){var w="length",F;p==="map"||p==="set"?(w="size",F=n.size):F=n.length,this.assert(F>=t&&F<=e,"expected #{this} to have a "+w+" within "+x,"expected #{this} to not have a "+w+" within "+x)}else this.assert(n>=t&&n<=e,"expected #{this} to be within "+x,"expected #{this} to not be within "+x)});function vb(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"ssfi"),i=P(this,"message");try{var o=r instanceof t}catch(l){throw l instanceof TypeError?(i=i?i+": ":"",new je(i+"The instanceof assertion needs a constructor but "+Ze(t)+" was given.",void 0,n)):l}var a=ry(t);a==null&&(a="an unnamed constructor"),this.assert(o,"expected #{this} to be an instance of "+a,"expected #{this} to not be an instance of "+a)}C(vb,"assertInstanceOf");_.addMethod("instanceof",vb);_.addMethod("instanceOf",vb);function bb(t,e,r){r&&P(this,"message",r);var n=P(this,"nested"),i=P(this,"own"),o=P(this,"message"),a=P(this,"object"),l=P(this,"ssfi"),p=typeof t;if(o=o?o+": ":"",n){if(p!=="string")throw new je(o+"the argument to property must be a string when using nested syntax",void 0,l)}else if(p!=="string"&&p!=="number"&&p!=="symbol")throw new je(o+"the argument to property must be a string, number, or symbol",void 0,l);if(n&&i)throw new je(o+'The "nested" and "own" flags cannot be combined.',void 0,l);if(a==null)throw new je(o+"Target cannot be null or undefined.",void 0,l);var u=P(this,"deep"),d=P(this,"negate"),h=n?ab(a,t):null,g=n?h.value:a[t],x=u?P(this,"eql"):(F,M)=>F===M,b="";u&&(b+="deep "),i&&(b+="own "),n&&(b+="nested "),b+="property ";var w;i?w=Object.prototype.hasOwnProperty.call(a,t):n?w=h.exists:w=ty(a,t),(!d||arguments.length===1)&&this.assert(w,"expected #{this} to have "+b+Ne(t),"expected #{this} to not have "+b+Ne(t)),arguments.length>1&&this.assert(w&&x(e,g),"expected #{this} to have "+b+Ne(t)+" of #{exp}, but got #{act}","expected #{this} to not have "+b+Ne(t)+" of #{act}",e,g),P(this,"object",g)}C(bb,"assertProperty");_.addMethod("property",bb);function wb(t,e,r){P(this,"own",!0),bb.apply(this,arguments)}C(wb,"assertOwnProperty");_.addMethod("ownProperty",wb);_.addMethod("haveOwnProperty",wb);function _b(t,e,r){typeof e=="string"&&(r=e,e=null),r&&P(this,"message",r);var n=P(this,"object"),i=Object.getOwnPropertyDescriptor(Object(n),t),o=P(this,"eql");i&&e?this.assert(o(e,i),"expected the own property descriptor for "+Ne(t)+" on #{this} to match "+Ne(e)+", got "+Ne(i),"expected the own property descriptor for "+Ne(t)+" on #{this} to not match "+Ne(e),e,i,!0):this.assert(i,"expected #{this} to have an own property descriptor for "+Ne(t),"expected #{this} to not have an own property descriptor for "+Ne(t)),P(this,"object",i)}C(_b,"assertOwnPropertyDescriptor");_.addMethod("ownPropertyDescriptor",_b);_.addMethod("haveOwnPropertyDescriptor",_b);function Eb(){P(this,"doLength",!0)}C(Eb,"assertLengthChain");function Rb(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=Ze(r).toLowerCase(),i=P(this,"message"),o=P(this,"ssfi"),a="length",l;switch(n){case"map":case"set":a="size",l=r.size;break;default:new _(r,i,o,!0).to.have.property("length"),l=r.length}this.assert(l==t,"expected #{this} to have a "+a+" of #{exp} but got #{act}","expected #{this} to not have a "+a+" of #{act}",t,l)}C(Rb,"assertLength");_.addChainableMethod("length",Rb,Eb);_.addChainableMethod("lengthOf",Rb,Eb);function kb(t,e){e&&P(this,"message",e);var r=P(this,"object");this.assert(t.exec(r),"expected #{this} to match "+t,"expected #{this} not to match "+t)}C(kb,"assertMatch");_.addMethod("match",kb);_.addMethod("matches",kb);_.addMethod("string",function(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"message"),i=P(this,"ssfi");new _(r,n,i,!0).is.a("string"),this.assert(~r.indexOf(t),"expected #{this} to contain "+Ne(t),"expected #{this} to not contain "+Ne(t))});function Pb(t){var e=P(this,"object"),r=Ze(e),n=Ze(t),i=P(this,"ssfi"),o=P(this,"deep"),a,l="",p,u=!0,d=P(this,"message");d=d?d+": ":"";var h=d+"when testing keys against an object or an array you must give a single Array|Object|String argument or multiple String arguments";if(r==="Map"||r==="Set")l=o?"deeply ":"",p=[],e.forEach(function(U,Z){p.push(Z)}),n!=="Array"&&(t=Array.prototype.slice.call(arguments));else{switch(p=hb(e),n){case"Array":if(arguments.length>1)throw new je(h,void 0,i);break;case"Object":if(arguments.length>1)throw new je(h,void 0,i);t=Object.keys(t);break;default:t=Array.prototype.slice.call(arguments)}t=t.map(function(U){return typeof U=="symbol"?U:String(U)})}if(!t.length)throw new je(d+"keys required",void 0,i);var g=t.length,x=P(this,"any"),b=P(this,"all"),w=t,F=o?P(this,"eql"):(U,Z)=>U===Z;if(!x&&!b&&(b=!0),x&&(u=w.some(function(U){return p.some(function(Z){return F(U,Z)})})),b&&(u=w.every(function(U){return p.some(function(Z){return F(U,Z)})}),P(this,"contains")||(u=u&&t.length==p.length)),g>1){t=t.map(function(U){return Ne(U)});var M=t.pop();b&&(a=t.join(", ")+", and "+M),x&&(a=t.join(", ")+", or "+M)}else a=Ne(t[0]);a=(g>1?"keys ":"key ")+a,a=(P(this,"contains")?"contain ":"have ")+a,this.assert(u,"expected #{this} to "+l+a,"expected #{this} to not "+l+a,w.slice(0).sort(Yg),p.sort(Yg),!0)}C(Pb,"assertKeys");_.addMethod("keys",Pb);_.addMethod("key",Pb);function cy(t,e,r){r&&P(this,"message",r);var n=P(this,"object"),i=P(this,"ssfi"),o=P(this,"message"),a=P(this,"negate")||!1;new _(n,o,i,!0).is.a("function"),(t instanceof RegExp||typeof t=="string")&&(e=t,t=null);var l;try{n()}catch(M){l=M}var p=t===void 0&&e===void 0,u=!!(t&&e),d=!1,h=!1;if(p||!p&&!a){var g="an error";t instanceof Error?g="#{exp}":t&&(g=Wr.getConstructorName(t)),this.assert(l,"expected #{this} to throw "+g,"expected #{this} to not throw an error but #{act} was thrown",t&&t.toString(),l instanceof Error?l.toString():typeof l=="string"?l:l&&Wr.getConstructorName(l))}if(t&&l){if(t instanceof Error){var x=Wr.compatibleInstance(l,t);x===a&&(u&&a?d=!0:this.assert(a,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l&&!a?" but #{act} was thrown":""),t.toString(),l.toString()))}var b=Wr.compatibleConstructor(l,t);b===a&&(u&&a?d=!0:this.assert(a,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&Wr.getConstructorName(t),l instanceof Error?l.toString():l&&Wr.getConstructorName(l)))}if(l&&e!==void 0&&e!==null){var w="including";e instanceof RegExp&&(w="matching");var F=Wr.compatibleMessage(l,e);F===a&&(u&&a?h=!0:this.assert(a,"expected #{this} to throw error "+w+" #{exp} but got #{act}","expected #{this} to throw error not "+w+" #{exp}",e,Wr.getMessage(l)))}d&&h&&this.assert(a,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&Wr.getConstructorName(t),l instanceof Error?l.toString():l&&Wr.getConstructorName(l)),P(this,"object",l)}C(cy,"assertThrows");_.addMethod("throw",cy);_.addMethod("throws",cy);_.addMethod("Throw",cy);function Mb(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"itself"),i=typeof r=="function"&&!n?r.prototype[t]:r[t];this.assert(typeof i=="function","expected #{this} to respond to "+Ne(t),"expected #{this} to not respond to "+Ne(t))}C(Mb,"respondTo");_.addMethod("respondTo",Mb);_.addMethod("respondsTo",Mb);_.addProperty("itself",function(){P(this,"itself",!0)});function Ab(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=t(r);this.assert(n,"expected #{this} to satisfy "+ms(t),"expected #{this} to not satisfy"+ms(t),!P(this,"negate"),n)}C(Ab,"satisfy");_.addMethod("satisfy",Ab);_.addMethod("satisfies",Ab);function Db(t,e,r){r&&P(this,"message",r);var n=P(this,"object"),i=P(this,"message"),o=P(this,"ssfi");if(new _(n,i,o,!0).is.a("number"),typeof t!="number"||typeof e!="number"){i=i?i+": ":"";var a=e===void 0?", and a delta is required":"";throw new je(i+"the arguments to closeTo or approximately must be numbers"+a,void 0,o)}this.assert(Math.abs(n-t)<=e,"expected #{this} to be close to "+t+" +/- "+e,"expected #{this} not to be close to "+t+" +/- "+e)}C(Db,"closeTo");_.addMethod("closeTo",Db);_.addMethod("approximately",Db);function P1(t,e,r,n,i){let o=Array.from(e),a=Array.from(t);if(!n){if(a.length!==o.length)return!1;o=o.slice()}return a.every(function(l,p){if(i)return r?r(l,o[p]):l===o[p];if(!r){var u=o.indexOf(l);return u===-1?!1:(n||o.splice(u,1),!0)}return o.some(function(d,h){return r(l,d)?(n||o.splice(h,1),!0):!1})})}C(P1,"isSubsetOf");_.addMethod("members",function(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"message"),i=P(this,"ssfi");new _(r,n,i,!0).to.be.iterable,new _(t,n,i,!0).to.be.iterable;var o=P(this,"contains"),a=P(this,"ordered"),l,p,u;o?(l=a?"an ordered superset":"a superset",p="expected #{this} to be "+l+" of #{exp}",u="expected #{this} to not be "+l+" of #{exp}"):(l=a?"ordered members":"members",p="expected #{this} to have the same "+l+" as #{exp}",u="expected #{this} to not have the same "+l+" as #{exp}");var d=P(this,"deep")?P(this,"eql"):void 0;this.assert(P1(t,r,d,o,a),p,u,t,r,!0)});_.addProperty("iterable",function(t){t&&P(this,"message",t);var e=P(this,"object");this.assert(e!=null&&e[Symbol.iterator],"expected #{this} to be an iterable","expected #{this} to not be an iterable",e)});function M1(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"message"),i=P(this,"ssfi"),o=P(this,"contains"),a=P(this,"deep"),l=P(this,"eql");new _(t,n,i,!0).to.be.an("array"),o?this.assert(t.some(function(p){return r.indexOf(p)>-1}),"expected #{this} to contain one of #{exp}","expected #{this} to not contain one of #{exp}",t,r):a?this.assert(t.some(function(p){return l(r,p)}),"expected #{this} to deeply equal one of #{exp}","expected #{this} to deeply equal one of #{exp}",t,r):this.assert(t.indexOf(r)>-1,"expected #{this} to be one of #{exp}","expected #{this} to not be one of #{exp}",t,r)}C(M1,"oneOf");_.addMethod("oneOf",M1);function Ib(t,e,r){r&&P(this,"message",r);var n=P(this,"object"),i=P(this,"message"),o=P(this,"ssfi");new _(n,i,o,!0).is.a("function");var a;e?(new _(t,i,o,!0).to.have.property(e),a=t[e]):(new _(t,i,o,!0).is.a("function"),a=t()),n();var l=e==null?t():t[e],p=e==null?a:"."+e;P(this,"deltaMsgObj",p),P(this,"initialDeltaValue",a),P(this,"finalDeltaValue",l),P(this,"deltaBehavior","change"),P(this,"realDelta",l!==a),this.assert(a!==l,"expected "+p+" to change","expected "+p+" to not change")}C(Ib,"assertChanges");_.addMethod("change",Ib);_.addMethod("changes",Ib);function Fb(t,e,r){r&&P(this,"message",r);var n=P(this,"object"),i=P(this,"message"),o=P(this,"ssfi");new _(n,i,o,!0).is.a("function");var a;e?(new _(t,i,o,!0).to.have.property(e),a=t[e]):(new _(t,i,o,!0).is.a("function"),a=t()),new _(a,i,o,!0).is.a("number"),n();var l=e==null?t():t[e],p=e==null?a:"."+e;P(this,"deltaMsgObj",p),P(this,"initialDeltaValue",a),P(this,"finalDeltaValue",l),P(this,"deltaBehavior","increase"),P(this,"realDelta",l-a),this.assert(l-a>0,"expected "+p+" to increase","expected "+p+" to not increase")}C(Fb,"assertIncreases");_.addMethod("increase",Fb);_.addMethod("increases",Fb);function Cb(t,e,r){r&&P(this,"message",r);var n=P(this,"object"),i=P(this,"message"),o=P(this,"ssfi");new _(n,i,o,!0).is.a("function");var a;e?(new _(t,i,o,!0).to.have.property(e),a=t[e]):(new _(t,i,o,!0).is.a("function"),a=t()),new _(a,i,o,!0).is.a("number"),n();var l=e==null?t():t[e],p=e==null?a:"."+e;P(this,"deltaMsgObj",p),P(this,"initialDeltaValue",a),P(this,"finalDeltaValue",l),P(this,"deltaBehavior","decrease"),P(this,"realDelta",a-l),this.assert(l-a<0,"expected "+p+" to decrease","expected "+p+" to not decrease")}C(Cb,"assertDecreases");_.addMethod("decrease",Cb);_.addMethod("decreases",Cb);function A1(t,e){e&&P(this,"message",e);var r=P(this,"deltaMsgObj"),n=P(this,"initialDeltaValue"),i=P(this,"finalDeltaValue"),o=P(this,"deltaBehavior"),a=P(this,"realDelta"),l;o==="change"?l=Math.abs(i-n)===Math.abs(t):l=a===Math.abs(t),this.assert(l,"expected "+r+" to "+o+" by "+t,"expected "+r+" to not "+o+" by "+t)}C(A1,"assertDelta");_.addMethod("by",A1);_.addProperty("extensible",function(){var t=P(this,"object"),e=t===Object(t)&&Object.isExtensible(t);this.assert(e,"expected #{this} to be extensible","expected #{this} to not be extensible")});_.addProperty("sealed",function(){var t=P(this,"object"),e=t===Object(t)?Object.isSealed(t):!0;this.assert(e,"expected #{this} to be sealed","expected #{this} to not be sealed")});_.addProperty("frozen",function(){var t=P(this,"object"),e=t===Object(t)?Object.isFrozen(t):!0;this.assert(e,"expected #{this} to be frozen","expected #{this} to not be frozen")});_.addProperty("finite",function(t){var e=P(this,"object");this.assert(typeof e=="number"&&isFinite(e),"expected #{this} to be a finite number","expected #{this} to not be a finite number")});function Jg(t,e){return new _(t,e)}C(Jg,"expect");Jg.fail=function(t,e,r,n){throw arguments.length<2&&(r=t,t=void 0),r=r||"expect.fail()",new je(r,{actual:t,expected:e,operator:n},Jg.fail)};var D1={};eb(D1,{Should:()=>ZZ,should:()=>QZ});function Ob(){function t(){return this instanceof String||this instanceof Number||this instanceof Boolean||typeof Symbol=="function"&&this instanceof Symbol||typeof BigInt=="function"&&this instanceof BigInt?new _(this.valueOf(),null,t):new _(this,null,t)}C(t,"shouldGetter");function e(n){Object.defineProperty(this,"should",{value:n,enumerable:!0,configurable:!0,writable:!0})}C(e,"shouldSetter"),Object.defineProperty(Object.prototype,"should",{set:e,get:t,configurable:!0});var r={};return r.fail=function(n,i,o,a){throw arguments.length<2&&(o=n,n=void 0),o=o||"should.fail()",new je(o,{actual:n,expected:i,operator:a},r.fail)},r.equal=function(n,i,o){new _(n,o).to.equal(i)},r.Throw=function(n,i,o,a){new _(n,a).to.Throw(i,o)},r.exist=function(n,i){new _(n,i).to.exist},r.not={},r.not.equal=function(n,i,o){new _(n,o).to.not.equal(i)},r.not.Throw=function(n,i,o,a){new _(n,a).to.not.Throw(i,o)},r.not.exist=function(n,i){new _(n,i).to.not.exist},r.throw=r.Throw,r.not.throw=r.not.Throw,r}C(Ob,"loadShould");var QZ=Ob,ZZ=Ob;function v(t,e){var r=new _(null,null,v,!0);r.assert(t,e,"[ negation message unavailable ]")}C(v,"assert");v.fail=function(t,e,r,n){throw arguments.length<2&&(r=t,t=void 0),r=r||"assert.fail()",new je(r,{actual:t,expected:e,operator:n},v.fail)};v.isOk=function(t,e){new _(t,e,v.isOk,!0).is.ok};v.isNotOk=function(t,e){new _(t,e,v.isNotOk,!0).is.not.ok};v.equal=function(t,e,r){var n=new _(t,r,v.equal,!0);n.assert(e==_e(n,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",e,t,!0)};v.notEqual=function(t,e,r){var n=new _(t,r,v.notEqual,!0);n.assert(e!=_e(n,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",e,t,!0)};v.strictEqual=function(t,e,r){new _(t,r,v.strictEqual,!0).to.equal(e)};v.notStrictEqual=function(t,e,r){new _(t,r,v.notStrictEqual,!0).to.not.equal(e)};v.deepEqual=v.deepStrictEqual=function(t,e,r){new _(t,r,v.deepEqual,!0).to.eql(e)};v.notDeepEqual=function(t,e,r){new _(t,r,v.notDeepEqual,!0).to.not.eql(e)};v.isAbove=function(t,e,r){new _(t,r,v.isAbove,!0).to.be.above(e)};v.isAtLeast=function(t,e,r){new _(t,r,v.isAtLeast,!0).to.be.least(e)};v.isBelow=function(t,e,r){new _(t,r,v.isBelow,!0).to.be.below(e)};v.isAtMost=function(t,e,r){new _(t,r,v.isAtMost,!0).to.be.most(e)};v.isTrue=function(t,e){new _(t,e,v.isTrue,!0).is.true};v.isNotTrue=function(t,e){new _(t,e,v.isNotTrue,!0).to.not.equal(!0)};v.isFalse=function(t,e){new _(t,e,v.isFalse,!0).is.false};v.isNotFalse=function(t,e){new _(t,e,v.isNotFalse,!0).to.not.equal(!1)};v.isNull=function(t,e){new _(t,e,v.isNull,!0).to.equal(null)};v.isNotNull=function(t,e){new _(t,e,v.isNotNull,!0).to.not.equal(null)};v.isNaN=function(t,e){new _(t,e,v.isNaN,!0).to.be.NaN};v.isNotNaN=function(t,e){new _(t,e,v.isNotNaN,!0).not.to.be.NaN};v.exists=function(t,e){new _(t,e,v.exists,!0).to.exist};v.notExists=function(t,e){new _(t,e,v.notExists,!0).to.not.exist};v.isUndefined=function(t,e){new _(t,e,v.isUndefined,!0).to.equal(void 0)};v.isDefined=function(t,e){new _(t,e,v.isDefined,!0).to.not.equal(void 0)};v.isCallable=function(t,e){new _(t,e,v.isCallable,!0).is.callable};v.isNotCallable=function(t,e){new _(t,e,v.isNotCallable,!0).is.not.callable};v.isObject=function(t,e){new _(t,e,v.isObject,!0).to.be.a("object")};v.isNotObject=function(t,e){new _(t,e,v.isNotObject,!0).to.not.be.a("object")};v.isArray=function(t,e){new _(t,e,v.isArray,!0).to.be.an("array")};v.isNotArray=function(t,e){new _(t,e,v.isNotArray,!0).to.not.be.an("array")};v.isString=function(t,e){new _(t,e,v.isString,!0).to.be.a("string")};v.isNotString=function(t,e){new _(t,e,v.isNotString,!0).to.not.be.a("string")};v.isNumber=function(t,e){new _(t,e,v.isNumber,!0).to.be.a("number")};v.isNotNumber=function(t,e){new _(t,e,v.isNotNumber,!0).to.not.be.a("number")};v.isFinite=function(t,e){new _(t,e,v.isFinite,!0).to.be.finite};v.isBoolean=function(t,e){new _(t,e,v.isBoolean,!0).to.be.a("boolean")};v.isNotBoolean=function(t,e){new _(t,e,v.isNotBoolean,!0).to.not.be.a("boolean")};v.typeOf=function(t,e,r){new _(t,r,v.typeOf,!0).to.be.a(e)};v.notTypeOf=function(t,e,r){new _(t,r,v.notTypeOf,!0).to.not.be.a(e)};v.instanceOf=function(t,e,r){new _(t,r,v.instanceOf,!0).to.be.instanceOf(e)};v.notInstanceOf=function(t,e,r){new _(t,r,v.notInstanceOf,!0).to.not.be.instanceOf(e)};v.include=function(t,e,r){new _(t,r,v.include,!0).include(e)};v.notInclude=function(t,e,r){new _(t,r,v.notInclude,!0).not.include(e)};v.deepInclude=function(t,e,r){new _(t,r,v.deepInclude,!0).deep.include(e)};v.notDeepInclude=function(t,e,r){new _(t,r,v.notDeepInclude,!0).not.deep.include(e)};v.nestedInclude=function(t,e,r){new _(t,r,v.nestedInclude,!0).nested.include(e)};v.notNestedInclude=function(t,e,r){new _(t,r,v.notNestedInclude,!0).not.nested.include(e)};v.deepNestedInclude=function(t,e,r){new _(t,r,v.deepNestedInclude,!0).deep.nested.include(e)};v.notDeepNestedInclude=function(t,e,r){new _(t,r,v.notDeepNestedInclude,!0).not.deep.nested.include(e)};v.ownInclude=function(t,e,r){new _(t,r,v.ownInclude,!0).own.include(e)};v.notOwnInclude=function(t,e,r){new _(t,r,v.notOwnInclude,!0).not.own.include(e)};v.deepOwnInclude=function(t,e,r){new _(t,r,v.deepOwnInclude,!0).deep.own.include(e)};v.notDeepOwnInclude=function(t,e,r){new _(t,r,v.notDeepOwnInclude,!0).not.deep.own.include(e)};v.match=function(t,e,r){new _(t,r,v.match,!0).to.match(e)};v.notMatch=function(t,e,r){new _(t,r,v.notMatch,!0).to.not.match(e)};v.property=function(t,e,r){new _(t,r,v.property,!0).to.have.property(e)};v.notProperty=function(t,e,r){new _(t,r,v.notProperty,!0).to.not.have.property(e)};v.propertyVal=function(t,e,r,n){new _(t,n,v.propertyVal,!0).to.have.property(e,r)};v.notPropertyVal=function(t,e,r,n){new _(t,n,v.notPropertyVal,!0).to.not.have.property(e,r)};v.deepPropertyVal=function(t,e,r,n){new _(t,n,v.deepPropertyVal,!0).to.have.deep.property(e,r)};v.notDeepPropertyVal=function(t,e,r,n){new _(t,n,v.notDeepPropertyVal,!0).to.not.have.deep.property(e,r)};v.ownProperty=function(t,e,r){new _(t,r,v.ownProperty,!0).to.have.own.property(e)};v.notOwnProperty=function(t,e,r){new _(t,r,v.notOwnProperty,!0).to.not.have.own.property(e)};v.ownPropertyVal=function(t,e,r,n){new _(t,n,v.ownPropertyVal,!0).to.have.own.property(e,r)};v.notOwnPropertyVal=function(t,e,r,n){new _(t,n,v.notOwnPropertyVal,!0).to.not.have.own.property(e,r)};v.deepOwnPropertyVal=function(t,e,r,n){new _(t,n,v.deepOwnPropertyVal,!0).to.have.deep.own.property(e,r)};v.notDeepOwnPropertyVal=function(t,e,r,n){new _(t,n,v.notDeepOwnPropertyVal,!0).to.not.have.deep.own.property(e,r)};v.nestedProperty=function(t,e,r){new _(t,r,v.nestedProperty,!0).to.have.nested.property(e)};v.notNestedProperty=function(t,e,r){new _(t,r,v.notNestedProperty,!0).to.not.have.nested.property(e)};v.nestedPropertyVal=function(t,e,r,n){new _(t,n,v.nestedPropertyVal,!0).to.have.nested.property(e,r)};v.notNestedPropertyVal=function(t,e,r,n){new _(t,n,v.notNestedPropertyVal,!0).to.not.have.nested.property(e,r)};v.deepNestedPropertyVal=function(t,e,r,n){new _(t,n,v.deepNestedPropertyVal,!0).to.have.deep.nested.property(e,r)};v.notDeepNestedPropertyVal=function(t,e,r,n){new _(t,n,v.notDeepNestedPropertyVal,!0).to.not.have.deep.nested.property(e,r)};v.lengthOf=function(t,e,r){new _(t,r,v.lengthOf,!0).to.have.lengthOf(e)};v.hasAnyKeys=function(t,e,r){new _(t,r,v.hasAnyKeys,!0).to.have.any.keys(e)};v.hasAllKeys=function(t,e,r){new _(t,r,v.hasAllKeys,!0).to.have.all.keys(e)};v.containsAllKeys=function(t,e,r){new _(t,r,v.containsAllKeys,!0).to.contain.all.keys(e)};v.doesNotHaveAnyKeys=function(t,e,r){new _(t,r,v.doesNotHaveAnyKeys,!0).to.not.have.any.keys(e)};v.doesNotHaveAllKeys=function(t,e,r){new _(t,r,v.doesNotHaveAllKeys,!0).to.not.have.all.keys(e)};v.hasAnyDeepKeys=function(t,e,r){new _(t,r,v.hasAnyDeepKeys,!0).to.have.any.deep.keys(e)};v.hasAllDeepKeys=function(t,e,r){new _(t,r,v.hasAllDeepKeys,!0).to.have.all.deep.keys(e)};v.containsAllDeepKeys=function(t,e,r){new _(t,r,v.containsAllDeepKeys,!0).to.contain.all.deep.keys(e)};v.doesNotHaveAnyDeepKeys=function(t,e,r){new _(t,r,v.doesNotHaveAnyDeepKeys,!0).to.not.have.any.deep.keys(e)};v.doesNotHaveAllDeepKeys=function(t,e,r){new _(t,r,v.doesNotHaveAllDeepKeys,!0).to.not.have.all.deep.keys(e)};v.throws=function(t,e,r,n){(typeof e=="string"||e instanceof RegExp)&&(r=e,e=null);var i=new _(t,n,v.throws,!0).to.throw(e,r);return _e(i,"object")};v.doesNotThrow=function(t,e,r,n){(typeof e=="string"||e instanceof RegExp)&&(r=e,e=null),new _(t,n,v.doesNotThrow,!0).to.not.throw(e,r)};v.operator=function(t,e,r,n){var i;switch(e){case"==":i=t==r;break;case"===":i=t===r;break;case">":i=t>r;break;case">=":i=t>=r;break;case"<":i=t<r;break;case"<=":i=t<=r;break;case"!=":i=t!=r;break;case"!==":i=t!==r;break;default:throw n=n&&n+": ",new je(n+'Invalid operator "'+e+'"',void 0,v.operator)}var o=new _(i,n,v.operator,!0);o.assert(_e(o,"object")===!0,"expected "+Ne(t)+" to be "+e+" "+Ne(r),"expected "+Ne(t)+" to not be "+e+" "+Ne(r))};v.closeTo=function(t,e,r,n){new _(t,n,v.closeTo,!0).to.be.closeTo(e,r)};v.approximately=function(t,e,r,n){new _(t,n,v.approximately,!0).to.be.approximately(e,r)};v.sameMembers=function(t,e,r){new _(t,r,v.sameMembers,!0).to.have.same.members(e)};v.notSameMembers=function(t,e,r){new _(t,r,v.notSameMembers,!0).to.not.have.same.members(e)};v.sameDeepMembers=function(t,e,r){new _(t,r,v.sameDeepMembers,!0).to.have.same.deep.members(e)};v.notSameDeepMembers=function(t,e,r){new _(t,r,v.notSameDeepMembers,!0).to.not.have.same.deep.members(e)};v.sameOrderedMembers=function(t,e,r){new _(t,r,v.sameOrderedMembers,!0).to.have.same.ordered.members(e)};v.notSameOrderedMembers=function(t,e,r){new _(t,r,v.notSameOrderedMembers,!0).to.not.have.same.ordered.members(e)};v.sameDeepOrderedMembers=function(t,e,r){new _(t,r,v.sameDeepOrderedMembers,!0).to.have.same.deep.ordered.members(e)};v.notSameDeepOrderedMembers=function(t,e,r){new _(t,r,v.notSameDeepOrderedMembers,!0).to.not.have.same.deep.ordered.members(e)};v.includeMembers=function(t,e,r){new _(t,r,v.includeMembers,!0).to.include.members(e)};v.notIncludeMembers=function(t,e,r){new _(t,r,v.notIncludeMembers,!0).to.not.include.members(e)};v.includeDeepMembers=function(t,e,r){new _(t,r,v.includeDeepMembers,!0).to.include.deep.members(e)};v.notIncludeDeepMembers=function(t,e,r){new _(t,r,v.notIncludeDeepMembers,!0).to.not.include.deep.members(e)};v.includeOrderedMembers=function(t,e,r){new _(t,r,v.includeOrderedMembers,!0).to.include.ordered.members(e)};v.notIncludeOrderedMembers=function(t,e,r){new _(t,r,v.notIncludeOrderedMembers,!0).to.not.include.ordered.members(e)};v.includeDeepOrderedMembers=function(t,e,r){new _(t,r,v.includeDeepOrderedMembers,!0).to.include.deep.ordered.members(e)};v.notIncludeDeepOrderedMembers=function(t,e,r){new _(t,r,v.notIncludeDeepOrderedMembers,!0).to.not.include.deep.ordered.members(e)};v.oneOf=function(t,e,r){new _(t,r,v.oneOf,!0).to.be.oneOf(e)};v.isIterable=function(t,e){if(t==null||!t[Symbol.iterator])throw e=e?`${e} expected ${Ne(t)} to be an iterable`:`expected ${Ne(t)} to be an iterable`,new je(e,void 0,v.isIterable)};v.changes=function(t,e,r,n){arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,v.changes,!0).to.change(e,r)};v.changesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,v.changesBy,!0).to.change(e,r).by(n)};v.doesNotChange=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,v.doesNotChange,!0).to.not.change(e,r)};v.changesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,v.changesButNotBy,!0).to.change(e,r).but.not.by(n)};v.increases=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,v.increases,!0).to.increase(e,r)};v.increasesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,v.increasesBy,!0).to.increase(e,r).by(n)};v.doesNotIncrease=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,v.doesNotIncrease,!0).to.not.increase(e,r)};v.increasesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,v.increasesButNotBy,!0).to.increase(e,r).but.not.by(n)};v.decreases=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,v.decreases,!0).to.decrease(e,r)};v.decreasesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,v.decreasesBy,!0).to.decrease(e,r).by(n)};v.doesNotDecrease=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,v.doesNotDecrease,!0).to.not.decrease(e,r)};v.doesNotDecreaseBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);return new _(t,i,v.doesNotDecreaseBy,!0).to.not.decrease(e,r).by(n)};v.decreasesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,v.decreasesButNotBy,!0).to.decrease(e,r).but.not.by(n)};v.ifError=function(t){if(t)throw t};v.isExtensible=function(t,e){new _(t,e,v.isExtensible,!0).to.be.extensible};v.isNotExtensible=function(t,e){new _(t,e,v.isNotExtensible,!0).to.not.be.extensible};v.isSealed=function(t,e){new _(t,e,v.isSealed,!0).to.be.sealed};v.isNotSealed=function(t,e){new _(t,e,v.isNotSealed,!0).to.not.be.sealed};v.isFrozen=function(t,e){new _(t,e,v.isFrozen,!0).to.be.frozen};v.isNotFrozen=function(t,e){new _(t,e,v.isNotFrozen,!0).to.not.be.frozen};v.isEmpty=function(t,e){new _(t,e,v.isEmpty,!0).to.be.empty};v.isNotEmpty=function(t,e){new _(t,e,v.isNotEmpty,!0).to.not.be.empty};C(function t(e,r){return v[r]=v[e],t},"alias")("isOk","ok")("isNotOk","notOk")("throws","throw")("throws","Throw")("isExtensible","extensible")("isNotExtensible","notExtensible")("isSealed","sealed")("isNotSealed","notSealed")("isFrozen","frozen")("isNotFrozen","notFrozen")("isEmpty","empty")("isNotEmpty","notEmpty")("isCallable","isFunction")("isNotCallable","isNotFunction");var $F=[];function YZ(t){let e={AssertionError:je,util:Gg,config:br,expect:Jg,assert:v,Assertion:_,...D1};return~$F.indexOf(t)||(t(e,Gg),$F.push(t)),e}C(YZ,"use");var Ep=class{constructor(e,r,n){this._lineNumber=e,this._text=r,this._isLastLine=n}get lineNumber(){return this._lineNumber}get text(){return this._text}get range(){return new W(this._lineNumber,0,this._lineNumber,this._text.length)}get rangeIncludingLineBreak(){return this._isLastLine?this.range:new W(this._lineNumber,0,this._lineNumber+1,0)}get rangeTrimmed(){let e=/^(\s*)/.exec(this._text)[1].length;if(e===this._text.length)return;let r=this.text.trimEnd().length;return new W(this._lineNumber,e,this._lineNumber,r)}get isEmptyOrWhitespace(){return this.rangeTrimmed==null}};var I1=ur(require("node:path"),1),ly=class{get uri(){return this._uri}get filename(){return I1.default.basename(this._uri.path)}get languageId(){return this._languageId}get version(){return this._version}get lineCount(){return this._lineCount}get range(){let{end:e}=this.lineAt(this.lineCount-1).range;return new W(0,0,e.line,e.character)}get eol(){return this._eol===`
`?"LF":"CRLF"}constructor(e,r,n,i,o){this._uri=e,this._languageId=r,this._version=n,this._eol=i,this._lines=o,this._lineCount=o.length,this._lineStarts=null,this._cachedTextValue=null}update(e){this._lines=e,this._lineCount=e.length,this._lineStarts=null,this._cachedTextValue=null}lineAt(e){let r;if(e instanceof ae?r=e.line:typeof e=="number"&&(r=e),typeof r!="number"||r<0||Math.floor(r)!==r)throw new Error("Illegal value for `line`");return r=Math.min(r,this._lines.length-1),new Ep(r,this._lines[r],r===this._lines.length-1)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.line-1)+e.character}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();let r=this._lineStarts.getIndexOf(e),n=this._lines[r.index].length;return new ae(r.index,Math.min(r.remainder,n))}getText(e){if(e===void 0)return this._cachedTextValue==null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue;if(e=this._validateRange(e),e.isEmpty)return"";if(e.isSingleLine)return this._lines[e.start.line].substring(e.start.character,e.end.character);let r=this._eol,n=e.start.line,i=e.end.line,o=[];o.push(this._lines[n].substring(e.start.character));for(let a=n+1;a<i;a++)o.push(this._lines[a]);return o.push(this._lines[i].substring(0,e.end.character)),o.join(r)}_validateRange(e){if(!(e instanceof W))throw new Error("Invalid argument");let r=this._validatePosition(e.start),n=this._validatePosition(e.end);return r===e.start&&n===e.end?e:new W(r.line,r.character,n.line,n.character)}_validatePosition(e){if(!(e instanceof ae))throw new Error("Invalid argument");if(this._lines.length===0)return e.with(0,0);let{line:r,character:n}=e,i=!1;if(r<0)r=0,n=0,i=!0;else if(r>=this._lines.length)r=this._lines.length-1,n=this._lines[r].length,i=!0;else{let o=this._lines[r].length;n<0?(n=0,i=!0):n>o&&(n=o,i=!0)}return i?new ae(r,n):e}_ensureLineStarts(){if(!this._lineStarts){let e=this._eol.length,r=this._lines.length,n=new Uint32Array(r);for(let i=0;i<r;i++)n[i]=this._lines[i].length+e;this._lineStarts=new Nb(n)}}};function eY(t){if(t<0)return 0;let e=4294967295;return t>e?e:t|0}var Nb=class{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}getCount(){return this.values.length}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=eY(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let r=this.prefixSumValidIndex[0]+1;r===0&&(this.prefixSum[0]=this.values[0],r++),e>=this.values.length&&(e=this.values.length-1);for(let n=r;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let r=0,n=this.values.length-1,i=0,o=0,a=0;for(;r<=n;)if(i=r+(n-r)/2|0,o=this.prefixSum[i],a=o-this.values[i],e<a)n=i-1;else if(e>=o)r=i+1;else break;return new Lb(i,e-a)}},Lb=class{constructor(e,r){this.index=e;this.remainder=r;this._prefixSumIndexOfResultBrand=void 0;this.index=e,this.remainder=r}};var py=class{constructor(e){this.client=e;this.cursorlessVersion="0.0.0";this.workspaceFolders=void 0;this.disposables=[];this.quickPickReturnValue=void 0;this.onDidCloseTextDocument=Rp;this.onDidChangeActiveTextEditor=Rp;this.onDidChangeVisibleTextEditors=Rp;this.onDidChangeTextEditorSelection=Rp;this.onDidChangeTextEditorVisibleRanges=Rp;this.configuration=new Xl,this.keyValueStore=new Jl,this.messages=new ep,this.clipboard=new Zl(this.client),this.capabilities=new Eg,this.editorMap=new Map,this.documentMap=new Map,this.activeWindow=void 0,this.activeBuffer=void 0}async init(){let e=await xI(this.client);this.assetsRoot_=Ub.default.join(e,"assets"),this.cursorlessNeovimPath=Ub.default.join(e,"node","cursorless-neovim")}async showQuickPick(e,r){throw Error("showQuickPick Not implemented")}async setHighlightRanges(e,r,n){throw Error("setHighlightRanges Not implemented")}async flashRanges(e){console.debug("flashRanges Not implemented")}get assetsRoot(){if(this.assetsRoot_==null)throw Error("Field `assetsRoot` has not yet been mocked");return this.assetsRoot_}get runMode(){return CF()}get activeTextEditor(){return this.getActiveTextEditor()}get activeEditableTextEditor(){return this.getActiveTextEditor()}getActiveTextEditor(){let e=this.activeWindow?this.getTextEditor(this.activeWindow):void 0;return e===void 0&&console.debug("getActiveTextEditor: editor is undefined"),e}getTextEditor(e){for(let[r,n]of this.editorMap)if(r.id===e.id)return n}getTextDocument(e){for(let[r,n]of this.documentMap)if(r.id===e.id)return n}get visibleTextEditors(){return Array.from(this.editorMap.values())}getEditableTextEditor(e){return e}async findInDocument(e,r){throw Error("findInDocument Not implemented")}async findInWorkspace(e){throw Error("findInWorkspace Not implemented")}async openTextDocument(e){throw Error("openTextDocument Not implemented")}async openUntitledTextDocument(e){throw Error("openUntitledTextDocument Not implemented")}async showInputBox(e){throw Error("TextDocumentChangeEvent Not implemented")}async executeCommand(e,...r){throw new Error("executeCommand Method not implemented.")}onDidChangeTextDocument(e){return PI(e)}onDidOpenTextDocument(e,r,n){return MI(e,r,n)}async updateTextEditor(e=!1){let r=await this.client.window,n=await r.buffer,i=await n.lines,o=i;i.length>=30&&(o=i.slice(0,15).concat(["..."]).concat(i.slice(-15))),console.debug(`updateTextEditor(): window:${r.id}, buffer:${n.id}, lines=${JSON.stringify(o)}`);let a,l;e?(a=[],l=[]):(a=await wg(r,this.client),l=await yI(r,this.client,i));let p=this.toNeovimEditor(r,n,i,l,a);return Vr().emitEvent("onDidOpenTextDocument",p.document),p}toNeovimEditor(e,r,n,i,o){let a=this.getTextDocument(r),l=this.getTextEditor(e);return a?(console.debug(`toNeovimEditor(): updating document: buffer=${r.id}`),a.update(n)):(console.debug(`toNeovimEditor(): creating new document: buffer=${r.id}`),a=new ly(CI.parse(`neovim://${r.id}`),"plaintext",1,`
`,n),this.documentMap.set(r,a)),l?(console.debug(`toNeovimEditor(): updating editor: window=${e.id}`),l.updateDocument(i,o,a)):(console.debug(`toNeovimEditor(): creating new editor: window=${e.id}`),l=new kg(RP(),this.client,this,e,a,i,o),this.editorMap.set(e,l)),this.activeBuffer=r,this.activeWindow=e,this.activeTextEditor}handleCommandError(e){wI(this.client,e.message)}disposeOnExit(...e){return this.disposables.push(...e),()=>(0,F1.pull)(this.disposables,...e)}};function Rp(){return{dispose(){}}}var uy=class{constructor(e){this.client=e;this.signals={prePhrase:{getVersion:async()=>null}}}async getFocusedElementType(){let e=await this.client.mode;return e.mode==="t"||e.mode==="nt"?"terminal":"textEditor"}};var rY=BigInt(1e9);function C1(t,e=BigInt(1e6)){return Number(t*e/rY)/Number(e)}async function fy(t,e=[],r=[],n,i,o,a,l){let p={documentContents:n.document.getText(),selections:n.selections.map(ZR)};o!=null&&(p.marks=o),l!=null&&(p.metadata=l),e.includes("clipboard")||(p.clipboard=await i.clipboard.readText()),e.includes("visibleRanges")||(p.visibleRanges=n.visibleRanges.map($c));for(let u of ra){let d=t?.get(u),h=`${u}Mark`;d!=null&&!e.includes(h)&&(p[h]=d.map(g=>g.toPlainObject()))}if(r.includes("timeOffsetSeconds")){let u=a?.startTimestamp;if(u==null)throw new Error("No start timestamp provided but time offset was requested");let d=process.hrtime.bigint()-u;p.timeOffsetSeconds=C1(d)}return p}var nY=ur(ul(),1);function O1(t,e,r,n,i,o,a,l){return{commandServerApi:t,ide:i,neovimIDE:n,injectIde:a,scopeProvider:o,takeSnapshot(p,u,d,h,g){return fy(e,p,u,d,h,g,void 0,void 0)},setStoredTarget(p,u,d){e.set(u,d?.map(h=>dI(p,h)))},hatTokenMap:r,runIntegrationTests:l}}async function N1(t,e,r,n){let i={[Cx]:async(...o)=>{(await t.mode).mode==="t"&&vI(t);try{await e.updateTextEditor();let l=await r.runCommandSafe(...o),p=Sf(o);if(await n.getFocusedElementType()==="terminal"&&$o(p)){let d=l;"fallback"in d&&d.fallback.action==="insert"&&bI(t)}return l}catch(l){if(e.runMode!=="test"){let p=l;console.error(p.stack),e.handleCommandError(p)}throw l}},"cursorless.repeatPreviousCommand":De,"cursorless.showCheatsheet":De,"cursorless.internal.updateCheatsheetDefaults":De,"cursorless.recordTestCase":De,"cursorless.recordOneTestCaseThenPause":De,"cursorless.pauseRecording":De,"cursorless.resumeRecording":De,"cursorless.takeSnapshot":De,"cursorless.recordScopeTests.showUnimplementedFacets":De,"cursorless.recordScopeTests.saveActiveDocument":De,"cursorless.showQuickPick":De,"cursorless.showDocumentation":De,"cursorless.private.logQuickActions":De,"cursorless.toggleDecorations":De,"cursorless.recomputeDecorationStyles":De,"cursorless.showScopeVisualizer":De,"cursorless.hideScopeVisualizer":De,"cursorless.analyzeCommandHistory":De,"cursorless.keyboard.escape":De,"cursorless.keyboard.targeted.targetHat":De,"cursorless.keyboard.targeted.targetScope":De,"cursorless.keyboard.targeted.targetSelection":De,"cursorless.keyboard.targeted.clearTarget":De,"cursorless.keyboard.targeted.runActionOnTarget":De,"cursorless.keyboard.modal.modeOn":De,"cursorless.keyboard.modal.modeOff":De,"cursorless.keyboard.modal.modeToggle":De,"cursorless.keyboard.undoTarget":De,"cursorless.keyboard.redoTarget":De,"cursorless.tutorial.start":De,"cursorless.tutorial.next":De,"cursorless.tutorial.previous":De,"cursorless.tutorial.restart":De,"cursorless.tutorial.resume":De,"cursorless.tutorial.list":De,"cursorless.documentationOpened":De};Object.entries(i).map(([o,a])=>Vr().registerCommand(o,a))}async function De(...t){console.debug(`dummyCommandHandler(): args=${t}`)}async function L1(t){let e=t.nvim,r=new py(e);await r.init();let n=r.runMode==="production"?r:new lf(r,new sf,r.runMode==="test",void 0),i=new vu,o=new uy(e),a=r.runMode==="test"?i:o,{commandApi:l,storedTargets:p,hatTokenMap:u,scopeProvider:d,injectIde:h,runIntegrationTests:g}=await fI({ide:n,commandServerApi:a});await N1(e,r,l,a);let x={testHelpers:r.runMode==="test"?O1(i,p,u,r,n,d,h,g):void 0};Vr().registerExtensionApi(hI,x),console.log("activate(): Cursorless extension loaded")}function U1(t){t.setOptions({dev:!1}),t.registerFunction("CursorlessLoadExtension",async()=>await iY(t),{sync:!1})}async function iY(t){console.log("==============================================================================================="),console.log("loadExtension(cursorless-neovim): start"),await L1(t),console.log("loadExtension(cursorless-neovim): done")}
/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)

itertools/dist/index.js:
  (* istanbul ignore else -- @preserve *)
  (* istanbul ignore if -- @preserve *)

chai/chai.js:
  (*!
   * Chai - flag utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - test utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - expectTypes utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getActual utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - message composition utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - transferFlags utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * http://chaijs.com
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - isProxyEnabled helper
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addLengthGuard utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getProperties utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - proxify utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addChainingMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteChainableMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - compareByInspect utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getOwnEnumerablePropertySymbols utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getOwnEnumerableProperties utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - isNaN utility
   * Copyright(c) 2012-2015 Sakthipriyan Vairamani <thechargingvolcano@gmail.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*! Bundled license information:
  
  deep-eql/index.js:
    (*!
     * deep-eql
     * Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>
     * MIT Licensed
     *)
    (*!
     * Check to see if the MemoizeMap has recorded a result of the two operands
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {MemoizeMap} memoizeMap
     * @returns {Boolean|null} result
    *)
    (*!
     * Set the result of the equality into the MemoizeMap
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {MemoizeMap} memoizeMap
     * @param {Boolean} result
    *)
    (*!
     * Primary Export
     *)
    (*!
     * The main logic of the `deepEqual` function.
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Object} [options] (optional) Additional options
     * @param {Array} [options.comparator] (optional) Override default algorithm, determining custom equality.
     * @param {Array} [options.memoize] (optional) Provide a custom memoization object which will cache the results of
        complex objects for a speed boost. By passing `false` you can disable memoization, but this will cause circular
        references to blow the stack.
     * @return {Boolean} equal match
    *)
    (*!
     * Compare two Regular Expressions for equality.
     *
     * @param {RegExp} leftHandOperand
     * @param {RegExp} rightHandOperand
     * @return {Boolean} result
     *)
    (*!
     * Compare two Sets/Maps for equality. Faster than other equality functions.
     *
     * @param {Set} leftHandOperand
     * @param {Set} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Simple equality for flat iterable objects such as Arrays, TypedArrays or Node.js buffers.
     *
     * @param {Iterable} leftHandOperand
     * @param {Iterable} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Simple equality for generator objects such as those returned by generator functions.
     *
     * @param {Iterable} leftHandOperand
     * @param {Iterable} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Determine if the given object has an @@iterator function.
     *
     * @param {Object} target
     * @return {Boolean} `true` if the object has an @@iterator function.
     *)
    (*!
     * Gets all iterator entries from the given Object. If the Object has no @@iterator function, returns an empty array.
     * This will consume the iterator - which could have side effects depending on the @@iterator implementation.
     *
     * @param {Object} target
     * @returns {Array} an array of entries from the @@iterator function
     *)
    (*!
     * Gets all entries from a Generator. This will consume the generator - which could have side effects.
     *
     * @param {Generator} target
     * @returns {Array} an array of entries from the Generator.
     *)
    (*!
     * Gets all own and inherited enumerable keys from a target.
     *
     * @param {Object} target
     * @returns {Array} an array of own and inherited enumerable keys from the target.
     *)
    (*!
     * Determines if two objects have matching values, given a set of keys. Defers to deepEqual for the equality check of
     * each key. If any value of the given key is not equal, the function will return false (early).
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Array} keys An array of keys to compare the values of leftHandOperand and rightHandOperand against
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Recursively check the equality of two Objects. Once basic sameness has been established it will defer to `deepEqual`
     * for each enumerable key in the object.
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Returns true if the argument is a primitive.
     *
     * This intentionally returns true for all objects that can be compared by reference,
     * including functions and symbols.
     *
     * @param {Mixed} value
     * @return {Boolean} result
     *)
  *)
*/
