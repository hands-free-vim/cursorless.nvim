"use strict";var RB=Object.create;var Up=Object.defineProperty;var kB=Object.getOwnPropertyDescriptor;var PB=Object.getOwnPropertyNames;var AB=Object.getPrototypeOf,MB=Object.prototype.hasOwnProperty;var Ye=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),DB=(t,e)=>{for(var r in e)Up(t,r,{get:e[r],enumerable:!0})},yE=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of PB(e))!MB.call(t,i)&&i!==r&&Up(t,i,{get:()=>e[i],enumerable:!(n=kB(e,i))||n.enumerable});return t};var br=(t,e,r)=>(r=t!=null?RB(AB(t)):{},yE(e||!t||!t.__esModule?Up(r,"default",{value:t,enumerable:!0}):r,t)),FB=t=>yE(Up({},"__esModule",{value:!0}),t);var nA=Ye(Yf=>{"use strict";Object.defineProperty(Yf,"__esModule",{value:!0});Yf.default=void 0;var lye=Yf.default="ffffffff-ffff-ffff-ffff-ffffffffffff"});var iA=Ye(Xf=>{"use strict";Object.defineProperty(Xf,"__esModule",{value:!0});Xf.default=void 0;var pye=Xf.default="00000000-0000-0000-0000-000000000000"});var oA=Ye(Jf=>{"use strict";Object.defineProperty(Jf,"__esModule",{value:!0});Jf.default=void 0;var mye=Jf.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i});var wl=Ye(em=>{"use strict";Object.defineProperty(em,"__esModule",{value:!0});em.default=void 0;var Q4=Z4(oA());function Z4(t){return t&&t.__esModule?t:{default:t}}function Y4(t){return typeof t=="string"&&Q4.default.test(t)}var hye=em.default=Y4});var _l=Ye(tm=>{"use strict";Object.defineProperty(tm,"__esModule",{value:!0});tm.default=void 0;var X4=J4(wl());function J4(t){return t&&t.__esModule?t:{default:t}}function e6(t){if(!(0,X4.default)(t))throw TypeError("Invalid UUID");let e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}var yye=tm.default=e6});var Fi=Ye(El=>{"use strict";Object.defineProperty(El,"__esModule",{value:!0});El.default=void 0;El.unsafeStringify=aA;var t6=r6(wl());function r6(t){return t&&t.__esModule?t:{default:t}}var Bt=[];for(let t=0;t<256;++t)Bt.push((t+256).toString(16).slice(1));function aA(t,e=0){return(Bt[t[e+0]]+Bt[t[e+1]]+Bt[t[e+2]]+Bt[t[e+3]]+"-"+Bt[t[e+4]]+Bt[t[e+5]]+"-"+Bt[t[e+6]]+Bt[t[e+7]]+"-"+Bt[t[e+8]]+Bt[t[e+9]]+"-"+Bt[t[e+10]]+Bt[t[e+11]]+Bt[t[e+12]]+Bt[t[e+13]]+Bt[t[e+14]]+Bt[t[e+15]]).toLowerCase()}function n6(t,e=0){let r=aA(t,e);if(!(0,t6.default)(r))throw TypeError("Stringified UUID is invalid");return r}var Tye=El.default=n6});var im=Ye(SS=>{"use strict";Object.defineProperty(SS,"__esModule",{value:!0});SS.default=a6;var i6=o6(require("node:crypto"));function o6(t){return t&&t.__esModule?t:{default:t}}var nm=new Uint8Array(256),rm=nm.length;function a6(){return rm>nm.length-16&&(i6.default.randomFillSync(nm),rm=0),nm.slice(rm,rm+=16)}});var _S=Ye(am=>{"use strict";Object.defineProperty(am,"__esModule",{value:!0});am.default=void 0;var s6=l6(im()),c6=Fi();function l6(t){return t&&t.__esModule?t:{default:t}}var vS,om,bS=0,wS=0;function u6(t,e,r){let n=e&&r||0,i=e||new Array(16);t=t||{};let o=t.node,s=t.clockseq;if(t._v6||(o||(o=vS),s==null&&(s=om)),o==null||s==null){let g=t.random||(t.rng||s6.default)();o==null&&(o=[g[0],g[1],g[2],g[3],g[4],g[5]],!vS&&!t._v6&&(o[0]|=1,vS=o)),s==null&&(s=(g[6]<<8|g[7])&16383,om===void 0&&!t._v6&&(om=s))}let l=t.msecs!==void 0?t.msecs:Date.now(),u=t.nsecs!==void 0?t.nsecs:wS+1,p=l-bS+(u-wS)/1e4;if(p<0&&t.clockseq===void 0&&(s=s+1&16383),(p<0||l>bS)&&t.nsecs===void 0&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");bS=l,wS=u,om=s,l+=122192928e5;let m=((l&268435455)*1e4+u)%4294967296;i[n++]=m>>>24&255,i[n++]=m>>>16&255,i[n++]=m>>>8&255,i[n++]=m&255;let d=l/4294967296*1e4&268435455;i[n++]=d>>>8&255,i[n++]=d&255,i[n++]=d>>>24&15|16,i[n++]=d>>>16&255,i[n++]=s>>>8|128,i[n++]=s&255;for(let g=0;g<6;++g)i[n+g]=o[g];return e||(0,c6.unsafeStringify)(i)}var bye=am.default=u6});var RS=Ye(ES=>{"use strict";Object.defineProperty(ES,"__esModule",{value:!0});ES.default=d6;var p6=m6(_l()),f6=Fi();function m6(t){return t&&t.__esModule?t:{default:t}}function d6(t){let e=typeof t=="string"?(0,p6.default)(t):t,r=h6(e);return typeof t=="string"?(0,f6.unsafeStringify)(r):r}function h6(t,e=!1){return Uint8Array.of((t[6]&15)<<4|t[7]>>4&15,(t[7]&15)<<4|(t[4]&240)>>4,(t[4]&15)<<4|(t[5]&240)>>4,(t[5]&15)<<4|(t[0]&240)>>4,(t[0]&15)<<4|(t[1]&240)>>4,(t[1]&15)<<4|(t[2]&240)>>4,96|t[2]&15,t[3],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}});var kS=Ye(pa=>{"use strict";Object.defineProperty(pa,"__esModule",{value:!0});pa.URL=pa.DNS=void 0;pa.default=b6;var g6=Fi(),y6=x6(_l());function x6(t){return t&&t.__esModule?t:{default:t}}function T6(t){t=unescape(encodeURIComponent(t));let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}var S6=pa.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",v6=pa.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function b6(t,e,r){function n(i,o,s,l){var u;if(typeof i=="string"&&(i=T6(i)),typeof o=="string"&&(o=(0,y6.default)(o)),((u=o)===null||u===void 0?void 0:u.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let p=new Uint8Array(16+i.length);if(p.set(o),p.set(i,o.length),p=r(p),p[6]=p[6]&15|e,p[8]=p[8]&63|128,s){l=l||0;for(let m=0;m<16;++m)s[l+m]=p[m];return s}return(0,g6.unsafeStringify)(p)}try{n.name=t}catch{}return n.DNS=S6,n.URL=v6,n}});var sA=Ye(sm=>{"use strict";Object.defineProperty(sm,"__esModule",{value:!0});sm.default=void 0;var w6=_6(require("node:crypto"));function _6(t){return t&&t.__esModule?t:{default:t}}function E6(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),w6.default.createHash("md5").update(t).digest()}var Rye=sm.default=E6});var lA=Ye(cm=>{"use strict";Object.defineProperty(cm,"__esModule",{value:!0});cm.default=void 0;var R6=cA(kS()),k6=cA(sA());function cA(t){return t&&t.__esModule?t:{default:t}}var P6=(0,R6.default)("v3",48,k6.default),Pye=cm.default=P6});var uA=Ye(lm=>{"use strict";Object.defineProperty(lm,"__esModule",{value:!0});lm.default=void 0;var A6=M6(require("node:crypto"));function M6(t){return t&&t.__esModule?t:{default:t}}var Mye=lm.default={randomUUID:A6.default.randomUUID}});var mA=Ye(um=>{"use strict";Object.defineProperty(um,"__esModule",{value:!0});um.default=void 0;var pA=fA(uA()),D6=fA(im()),F6=Fi();function fA(t){return t&&t.__esModule?t:{default:t}}function I6(t,e,r){if(pA.default.randomUUID&&!e&&!t)return pA.default.randomUUID();t=t||{};let n=t.random||(t.rng||D6.default)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return(0,F6.unsafeStringify)(n)}var Fye=um.default=I6});var dA=Ye(pm=>{"use strict";Object.defineProperty(pm,"__esModule",{value:!0});pm.default=void 0;var C6=O6(require("node:crypto"));function O6(t){return t&&t.__esModule?t:{default:t}}function N6(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),C6.default.createHash("sha1").update(t).digest()}var Cye=pm.default=N6});var gA=Ye(fm=>{"use strict";Object.defineProperty(fm,"__esModule",{value:!0});fm.default=void 0;var L6=hA(kS()),U6=hA(dA());function hA(t){return t&&t.__esModule?t:{default:t}}var H6=(0,L6.default)("v5",80,U6.default),Nye=fm.default=H6});var xA=Ye(PS=>{"use strict";Object.defineProperty(PS,"__esModule",{value:!0});PS.default=$6;var V6=Fi(),B6=yA(_S()),W6=yA(RS());function yA(t){return t&&t.__esModule?t:{default:t}}function $6(t={},e,r=0){let n=(0,B6.default)({...t,_v6:!0},new Uint8Array(16));if(n=(0,W6.default)(n),e){for(let i=0;i<16;i++)e[r+i]=n[i];return e}return(0,V6.unsafeStringify)(n)}});var TA=Ye(AS=>{"use strict";Object.defineProperty(AS,"__esModule",{value:!0});AS.default=G6;var j6=z6(_l()),q6=Fi();function z6(t){return t&&t.__esModule?t:{default:t}}function G6(t){let e=typeof t=="string"?(0,j6.default)(t):t,r=K6(e);return typeof t=="string"?(0,q6.unsafeStringify)(r):r}function K6(t){return Uint8Array.of((t[3]&15)<<4|t[4]>>4&15,(t[4]&15)<<4|(t[5]&240)>>4,(t[5]&15)<<4|t[6]&15,t[7],(t[1]&15)<<4|(t[2]&240)>>4,(t[2]&15)<<4|(t[3]&240)>>4,16|(t[0]&240)>>4,(t[0]&15)<<4|(t[1]&240)>>4,t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}});var bA=Ye(mm=>{"use strict";Object.defineProperty(mm,"__esModule",{value:!0});mm.default=void 0;var Q6=Y6(im()),Z6=Fi();function Y6(t){return t&&t.__esModule?t:{default:t}}var SA=null,vA=null,On=0;function X6(t,e,r){t=t||{};let n=e&&r||0,i=e||new Uint8Array(16),o=t.random||(t.rng||Q6.default)(),s=t.msecs!==void 0?t.msecs:Date.now(),l=t.seq!==void 0?t.seq:null,u=vA,p=SA;return s>On&&t.msecs===void 0&&(On=s,l!==null&&(u=null,p=null)),l!==null&&(l>2147483647&&(l=2147483647),u=l>>>19&4095,p=l&524287),(u===null||p===null)&&(u=o[6]&127,u=u<<8|o[7],p=o[8]&63,p=p<<8|o[9],p=p<<5|o[10]>>>3),s+1e4>On&&l===null?++p>524287&&(p=0,++u>4095&&(u=0,On++)):On=s,vA=u,SA=p,i[n++]=On/1099511627776&255,i[n++]=On/4294967296&255,i[n++]=On/16777216&255,i[n++]=On/65536&255,i[n++]=On/256&255,i[n++]=On&255,i[n++]=u>>>4&15|112,i[n++]=u&255,i[n++]=p>>>13&63|128,i[n++]=p>>>5&255,i[n++]=p<<3&255|o[10]&7,i[n++]=o[11],i[n++]=o[12],i[n++]=o[13],i[n++]=o[14],i[n++]=o[15],e||(0,Z6.unsafeStringify)(i)}var Vye=mm.default=X6});var wA=Ye(dm=>{"use strict";Object.defineProperty(dm,"__esModule",{value:!0});dm.default=void 0;var J6=e9(wl());function e9(t){return t&&t.__esModule?t:{default:t}}function t9(t){if(!(0,J6.default)(t))throw TypeError("Invalid UUID");return parseInt(t.slice(14,15),16)}var Wye=dm.default=t9});var _A=Ye(Yt=>{"use strict";Object.defineProperty(Yt,"__esModule",{value:!0});Object.defineProperty(Yt,"MAX",{enumerable:!0,get:function(){return r9.default}});Object.defineProperty(Yt,"NIL",{enumerable:!0,get:function(){return n9.default}});Object.defineProperty(Yt,"parse",{enumerable:!0,get:function(){return i9.default}});Object.defineProperty(Yt,"stringify",{enumerable:!0,get:function(){return o9.default}});Object.defineProperty(Yt,"v1",{enumerable:!0,get:function(){return a9.default}});Object.defineProperty(Yt,"v1ToV6",{enumerable:!0,get:function(){return s9.default}});Object.defineProperty(Yt,"v3",{enumerable:!0,get:function(){return c9.default}});Object.defineProperty(Yt,"v4",{enumerable:!0,get:function(){return l9.default}});Object.defineProperty(Yt,"v5",{enumerable:!0,get:function(){return u9.default}});Object.defineProperty(Yt,"v6",{enumerable:!0,get:function(){return p9.default}});Object.defineProperty(Yt,"v6ToV1",{enumerable:!0,get:function(){return f9.default}});Object.defineProperty(Yt,"v7",{enumerable:!0,get:function(){return m9.default}});Object.defineProperty(Yt,"validate",{enumerable:!0,get:function(){return d9.default}});Object.defineProperty(Yt,"version",{enumerable:!0,get:function(){return h9.default}});var r9=Pr(nA()),n9=Pr(iA()),i9=Pr(_l()),o9=Pr(Fi()),a9=Pr(_S()),s9=Pr(RS()),c9=Pr(lA()),l9=Pr(mA()),u9=Pr(gA()),p9=Pr(xA()),f9=Pr(TA()),m9=Pr(bA()),d9=Pr(wl()),h9=Pr(wA());function Pr(t){return t&&t.__esModule?t:{default:t}}});var PA=Ye((kA,gm)=>{(function(t,e){typeof gm=="object"&&gm.exports?gm.exports=e():t.nearley=e()})(kA,function(){function t(u,p,m){return this.id=++t.highestId,this.name=u,this.symbols=p,this.postprocess=m,this}t.highestId=0,t.prototype.toString=function(u){var p=typeof u>"u"?this.symbols.map(l).join(" "):this.symbols.slice(0,u).map(l).join(" ")+" \u25CF "+this.symbols.slice(u).map(l).join(" ");return this.name+" \u2192 "+p};function e(u,p,m,d){this.rule=u,this.dot=p,this.reference=m,this.data=[],this.wantedBy=d,this.isComplete=this.dot===u.symbols.length}e.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},e.prototype.nextState=function(u){var p=new e(this.rule,this.dot+1,this.reference,this.wantedBy);return p.left=this,p.right=u,p.isComplete&&(p.data=p.build(),p.right=void 0),p},e.prototype.build=function(){var u=[],p=this;do u.push(p.right.data),p=p.left;while(p.left);return u.reverse(),u},e.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,o.fail))};function r(u,p){this.grammar=u,this.index=p,this.states=[],this.wants={},this.scannable=[],this.completed={}}r.prototype.process=function(u){for(var p=this.states,m=this.wants,d=this.completed,g=0;g<p.length;g++){var x=p[g];if(x.isComplete){if(x.finish(),x.data!==o.fail){for(var b=x.wantedBy,v=b.length;v--;){var I=b[v];this.complete(I,x)}if(x.reference===this.index){var F=x.rule.name;(this.completed[F]=this.completed[F]||[]).push(x)}}}else{var F=x.rule.symbols[x.dot];if(typeof F!="string"){this.scannable.push(x);continue}if(m[F]){if(m[F].push(x),d.hasOwnProperty(F))for(var V=d[F],v=0;v<V.length;v++){var Z=V[v];this.complete(x,Z)}}else m[F]=[x],this.predict(F)}}},r.prototype.predict=function(u){for(var p=this.grammar.byName[u]||[],m=0;m<p.length;m++){var d=p[m],g=this.wants[u],x=new e(d,0,this.index,g);this.states.push(x)}},r.prototype.complete=function(u,p){var m=u.nextState(p);this.states.push(m)};function n(u,p){this.rules=u,this.start=p||this.rules[0].name;var m=this.byName={};this.rules.forEach(function(d){m.hasOwnProperty(d.name)||(m[d.name]=[]),m[d.name].push(d)})}n.fromCompiled=function(d,p){var m=d.Lexer;d.ParserStart&&(p=d.ParserStart,d=d.ParserRules);var d=d.map(function(x){return new t(x.name,x.symbols,x.postprocess)}),g=new n(d,p);return g.lexer=m,g};function i(){this.reset("")}i.prototype.reset=function(u,p){this.buffer=u,this.index=0,this.line=p?p.line:1,this.lastLineBreak=p?-p.col:0},i.prototype.next=function(){if(this.index<this.buffer.length){var u=this.buffer[this.index++];return u===`
`&&(this.line+=1,this.lastLineBreak=this.index),{value:u}}},i.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},i.prototype.formatError=function(u,p){var m=this.buffer;if(typeof m=="string"){var d=m.split(`
`).slice(Math.max(0,this.line-5),this.line),g=m.indexOf(`
`,this.index);g===-1&&(g=m.length);var x=this.index-this.lastLineBreak,b=String(this.line).length;return p+=" at line "+this.line+" col "+x+`:

`,p+=d.map(function(I,F){return v(this.line-d.length+F+1,b)+" "+I},this).join(`
`),p+=`
`+v("",b+x)+`^
`,p}else return p+" at index "+(this.index-1);function v(I,F){var V=String(I);return Array(F-V.length+1).join(" ")+V}};function o(u,p,m){if(u instanceof n)var d=u,m=p;else var d=n.fromCompiled(u,p);this.grammar=d,this.options={keepHistory:!1,lexer:d.lexer||new i};for(var g in m||{})this.options[g]=m[g];this.lexer=this.options.lexer,this.lexerState=void 0;var x=new r(d,0),b=this.table=[x];x.wants[d.start]=[],x.predict(d.start),x.process(),this.current=0}o.fail={},o.prototype.feed=function(u){var p=this.lexer;p.reset(u,this.lexerState);for(var m;;){try{if(m=p.next(),!m)break}catch(le){var b=new r(this.grammar,this.current+1);this.table.push(b);var d=new Error(this.reportLexerError(le));throw d.offset=this.current,d.token=le.token,d}var g=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var x=this.current+1,b=new r(this.grammar,x);this.table.push(b);for(var v=m.text!==void 0?m.text:m.value,I=p.constructor===i?m.value:p.transform?.(m)??m,F=g.scannable,V=F.length;V--;){var Z=F[V],oe=Z.rule.symbols[Z.dot];if(oe.test?oe.test(I):oe.type?oe.type===m.type:oe.literal===v){var ae=Z.nextState({data:I,token:m,isToken:!0,reference:x-1});b.states.push(ae)}}if(b.process(),b.states.length===0){var d=new Error(this.reportError(m));throw d.offset=this.current,d.token=m,d}this.options.keepHistory&&(g.lexerState=p.save()),this.current++}return g&&(this.lexerState=p.save()),this.results=this.finish(),this},o.prototype.reportLexerError=function(u){var p,m,d=u.token;return d?(p="input "+JSON.stringify(d.text[0])+" (lexer error)",m=this.lexer.formatError(d,"Syntax error")):(p="input (lexer error)",m=u.message),this.reportErrorCommon(m,p)},o.prototype.reportError=function(u){var p=(u.type?u.type+" token: ":"")+JSON.stringify(u.value!==void 0?u.value:u),m=this.lexer.formatError(u,"Syntax error");return this.reportErrorCommon(m,p)},o.prototype.reportErrorCommon=function(u,p){var m=[];m.push(u);var d=this.table.length-2,g=this.table[d],x=g.states.filter(function(v){var I=v.rule.symbols[v.dot];return I&&typeof I!="string"});if(x.length===0)m.push("Unexpected "+p+`. I did not expect any more input. Here is the state of my parse table:
`),this.displayStateStack(g.states,m);else{m.push("Unexpected "+p+`. Instead, I was expecting to see one of the following:
`);var b=x.map(function(v){return this.buildFirstStateStack(v,[])||[v]},this);b.forEach(function(v){var I=v[0],F=I.rule.symbols[I.dot],V=this.getSymbolDisplay(F);m.push("A "+V+" based on:"),this.displayStateStack(v,m)},this)}return m.push(""),m.join(`
`)},o.prototype.displayStateStack=function(u,p){for(var m,d=0,g=0;g<u.length;g++){var x=u[g],b=x.rule.toString(x.dot);b===m?d++:(d>0&&p.push("    ^ "+d+" more lines identical to this"),d=0,p.push("    "+b)),m=b}},o.prototype.getSymbolDisplay=function(u){return s(u)},o.prototype.buildFirstStateStack=function(u,p){if(p.indexOf(u)!==-1)return null;if(u.wantedBy.length===0)return[u];var m=u.wantedBy[0],d=[u].concat(p),g=this.buildFirstStateStack(m,d);return g===null?null:[u].concat(g)},o.prototype.save=function(){var u=this.table[this.current];return u.lexerState=this.lexerState,u},o.prototype.restore=function(u){var p=u.index;this.current=p,this.table[p]=u,this.table.splice(p+1),this.lexerState=u.lexerState,this.results=this.finish()},o.prototype.rewind=function(u){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[u])},o.prototype.finish=function(){var u=[],p=this.grammar.start,m=this.table[this.table.length-1];return m.states.forEach(function(d){d.rule.name===p&&d.dot===d.rule.symbols.length&&d.reference===0&&d.data!==o.fail&&u.push(d)}),u.map(function(d){return d.data})};function s(u){var p=typeof u;if(p==="string")return u;if(p==="object"){if(u.literal)return JSON.stringify(u.literal);if(u instanceof RegExp)return"character matching "+u;if(u.type)return u.type+" token";if(u.test)return"token matching "+String(u.test);throw new Error("Unknown symbol type: "+u)}}function l(u){var p=typeof u;if(p==="string")return u;if(p==="object"){if(u.literal)return JSON.stringify(u.literal);if(u instanceof RegExp)return u.toString();if(u.type)return"%"+u.type;if(u.test)return"<"+String(u.test)+">";throw new Error("Unknown symbol type: "+u)}}return{Parser:o,Grammar:n,Rule:t}})});var CA=Ye((IA,Tm)=>{(function(t,e){typeof define=="function"&&define.amd?define([],e):typeof Tm=="object"&&Tm.exports?Tm.exports=e():t.moo=e()})(IA,function(){"use strict";var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,r=typeof new RegExp().sticky=="boolean";function n(U){return U&&e.call(U)==="[object RegExp]"}function i(U){return U&&typeof U=="object"&&!n(U)&&!Array.isArray(U)}function o(U){return U.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function s(U){var N=new RegExp("|"+U);return N.exec("").length-1}function l(U){return"("+U+")"}function u(U){if(!U.length)return"(?!)";var N=U.map(function(D){return"(?:"+D+")"}).join("|");return"(?:"+N+")"}function p(U){if(typeof U=="string")return"(?:"+o(U)+")";if(n(U)){if(U.ignoreCase)throw new Error("RegExp /i flag not allowed");if(U.global)throw new Error("RegExp /g flag is implied");if(U.sticky)throw new Error("RegExp /y flag is implied");if(U.multiline)throw new Error("RegExp /m flag is implied");return U.source}else throw new Error("Not a pattern: "+U)}function m(U,N){return U.length>N?U:Array(N-U.length+1).join(" ")+U}function d(U,N){for(var D=U.length,z=0;;){var K=U.lastIndexOf(`
`,D-1);if(K===-1||(z++,D=K,z===N)||D===0)break}var Y=z<N?0:D+1;return U.substring(Y).split(`
`)}function g(U){for(var N=Object.getOwnPropertyNames(U),D=[],z=0;z<N.length;z++){var K=N[z],Y=U[K],X=[].concat(Y);if(K==="include"){for(var ne=0;ne<X.length;ne++)D.push({include:X[ne]});continue}var xe=[];X.forEach(function(ie){i(ie)?(xe.length&&D.push(b(K,xe)),D.push(b(K,ie)),xe=[]):xe.push(ie)}),xe.length&&D.push(b(K,xe))}return D}function x(U){for(var N=[],D=0;D<U.length;D++){var z=U[D];if(z.include){for(var K=[].concat(z.include),Y=0;Y<K.length;Y++)N.push({include:K[Y]});continue}if(!z.type)throw new Error("Rule has no type: "+JSON.stringify(z));N.push(b(z.type,z))}return N}function b(U,N){if(i(N)||(N={match:N}),N.include)throw new Error("Matching rules cannot also include states");var D={defaultType:U,lineBreaks:!!N.error||!!N.fallback,pop:!1,next:null,push:null,error:!1,fallback:!1,value:null,type:null,shouldThrow:!1};for(var z in N)t.call(N,z)&&(D[z]=N[z]);if(typeof D.type=="string"&&U!==D.type)throw new Error("Type transform cannot be a string (type '"+D.type+"' for token '"+U+"')");var K=D.match;return D.match=Array.isArray(K)?K:K?[K]:[],D.match.sort(function(Y,X){return n(Y)&&n(X)?0:n(X)?-1:n(Y)?1:X.length-Y.length}),D}function v(U){return Array.isArray(U)?x(U):g(U)}var I=b("error",{lineBreaks:!0,shouldThrow:!0});function F(U,N){for(var D=null,z=Object.create(null),K=!0,Y=null,X=[],ne=[],xe=0;xe<U.length;xe++)U[xe].fallback&&(K=!1);for(var xe=0;xe<U.length;xe++){var ie=U[xe];if(ie.include)throw new Error("Inheritance is not allowed in stateless lexers");if(ie.error||ie.fallback){if(D)throw!ie.fallback==!D.fallback?new Error("Multiple "+(ie.fallback?"fallback":"error")+" rules not allowed (for token '"+ie.defaultType+"')"):new Error("fallback and error are mutually exclusive (for token '"+ie.defaultType+"')");D=ie}var Ae=ie.match.slice();if(K)for(;Ae.length&&typeof Ae[0]=="string"&&Ae[0].length===1;){var gr=Ae.shift();z[gr.charCodeAt(0)]=ie}if(ie.pop||ie.push||ie.next){if(!N)throw new Error("State-switching options are not allowed in stateless lexers (for token '"+ie.defaultType+"')");if(ie.fallback)throw new Error("State-switching options are not allowed on fallback tokens (for token '"+ie.defaultType+"')")}if(Ae.length!==0){K=!1,X.push(ie);for(var di=0;di<Ae.length;di++){var yr=Ae[di];if(n(yr)){if(Y===null)Y=yr.unicode;else if(Y!==yr.unicode&&ie.fallback===!1)throw new Error("If one rule is /u then all must be")}}var En=u(Ae.map(p)),Cr=new RegExp(En);if(Cr.test(""))throw new Error("RegExp matches empty string: "+Cr);var Rn=s(En);if(Rn>0)throw new Error("RegExp has capture groups: "+Cr+`
Use (?: \u2026 ) instead`);if(!ie.lineBreaks&&Cr.test(`
`))throw new Error("Rule should declare lineBreaks: "+Cr);ne.push(l(En))}}var tn=D&&D.fallback,Uo=r&&!tn?"ym":"gm",hi=r||tn?"":"|";Y===!0&&(Uo+="u");var La=new RegExp(u(ne)+hi,Uo);return{regexp:La,groups:X,fast:z,error:D||I}}function V(U){var N=F(v(U));return new le({start:N},"start")}function Z(U,N,D){var z=U&&(U.push||U.next);if(z&&!D[z])throw new Error("Missing state '"+z+"' (in token '"+U.defaultType+"' of state '"+N+"')");if(U&&U.pop&&+U.pop!=1)throw new Error("pop must be 1 (in token '"+U.defaultType+"' of state '"+N+"')")}function oe(U,N){var D=U.$all?v(U.$all):[];delete U.$all;var z=Object.getOwnPropertyNames(U);N||(N=z[0]);for(var K=Object.create(null),Y=0;Y<z.length;Y++){var X=z[Y];K[X]=v(U[X]).concat(D)}for(var Y=0;Y<z.length;Y++)for(var X=z[Y],ne=K[X],xe=Object.create(null),ie=0;ie<ne.length;ie++){var Ae=ne[ie];if(Ae.include){var gr=[ie,1];if(Ae.include!==X&&!xe[Ae.include]){xe[Ae.include]=!0;var di=K[Ae.include];if(!di)throw new Error("Cannot include nonexistent state '"+Ae.include+"' (in state '"+X+"')");for(var yr=0;yr<di.length;yr++){var En=di[yr];ne.indexOf(En)===-1&&gr.push(En)}}ne.splice.apply(ne,gr),ie--}}for(var Cr=Object.create(null),Y=0;Y<z.length;Y++){var X=z[Y];Cr[X]=F(K[X],!0)}for(var Y=0;Y<z.length;Y++){for(var Rn=z[Y],tn=Cr[Rn],Uo=tn.groups,ie=0;ie<Uo.length;ie++)Z(Uo[ie],Rn,Cr);for(var hi=Object.getOwnPropertyNames(tn.fast),ie=0;ie<hi.length;ie++)Z(tn.fast[hi[ie]],Rn,Cr)}return new le(Cr,N)}function ae(U){for(var N=typeof Map<"u",D=N?new Map:Object.create(null),z=Object.getOwnPropertyNames(U),K=0;K<z.length;K++){var Y=z[K],X=U[Y],ne=Array.isArray(X)?X:[X];ne.forEach(function(xe){if(typeof xe!="string")throw new Error("keyword must be string (in keyword '"+Y+"')");N?D.set(xe,Y):D[xe]=Y})}return function(xe){return N?D.get(xe):D[xe]}}var le=function(U,N){this.startState=N,this.states=U,this.buffer="",this.stack=[],this.reset()};le.prototype.reset=function(U,N){return this.buffer=U||"",this.index=0,this.line=N?N.line:1,this.col=N?N.col:1,this.queuedToken=N?N.queuedToken:null,this.queuedText=N?N.queuedText:"",this.queuedThrow=N?N.queuedThrow:null,this.setState(N?N.state:this.startState),this.stack=N&&N.stack?N.stack.slice():[],this},le.prototype.save=function(){return{line:this.line,col:this.col,state:this.state,stack:this.stack.slice(),queuedToken:this.queuedToken,queuedText:this.queuedText,queuedThrow:this.queuedThrow}},le.prototype.setState=function(U){if(!(!U||this.state===U)){this.state=U;var N=this.states[U];this.groups=N.groups,this.error=N.error,this.re=N.regexp,this.fast=N.fast}},le.prototype.popState=function(){this.setState(this.stack.pop())},le.prototype.pushState=function(U){this.stack.push(this.state),this.setState(U)};var st=r?function(U,N){return U.exec(N)}:function(U,N){var D=U.exec(N);return D[0].length===0?null:D};le.prototype._getGroup=function(U){for(var N=this.groups.length,D=0;D<N;D++)if(U[D+1]!==void 0)return this.groups[D];throw new Error("Cannot find token type for matched text")};function Lt(){return this.value}if(le.prototype.next=function(){var U=this.index;if(this.queuedGroup){var N=this._token(this.queuedGroup,this.queuedText,U);return this.queuedGroup=null,this.queuedText="",N}var D=this.buffer;if(U!==D.length){var X=this.fast[D.charCodeAt(U)];if(X)return this._token(X,D.charAt(U),U);var z=this.re;z.lastIndex=U;var K=st(z,D),Y=this.error;if(K==null)return this._token(Y,D.slice(U,D.length),U);var X=this._getGroup(K),ne=K[0];return Y.fallback&&K.index!==U?(this.queuedGroup=X,this.queuedText=ne,this._token(Y,D.slice(U,K.index),U)):this._token(X,ne,U)}},le.prototype._token=function(U,N,D){var z=0;if(U.lineBreaks){var K=/\n/g,Y=1;if(N===`
`)z=1;else for(;K.exec(N);)z++,Y=K.lastIndex}var X={type:typeof U.type=="function"&&U.type(N)||U.defaultType,value:typeof U.value=="function"?U.value(N):N,text:N,toString:Lt,offset:D,lineBreaks:z,line:this.line,col:this.col},ne=N.length;if(this.index+=ne,this.line+=z,z!==0?this.col=ne-Y+1:this.col+=ne,U.shouldThrow){var xe=new Error(this.formatError(X,"invalid syntax"));throw xe}return U.pop?this.popState():U.push?this.pushState(U.push):U.next&&this.setState(U.next),X},typeof Symbol<"u"&&Symbol.iterator){var pt=function(U){this.lexer=U};pt.prototype.next=function(){var U=this.lexer.next();return{value:U,done:!U}},pt.prototype[Symbol.iterator]=function(){return this},le.prototype[Symbol.iterator]=function(){return new pt(this)}}return le.prototype.formatError=function(U,N){if(U==null)var D=this.buffer.slice(this.index),U={text:D,offset:this.index,lineBreaks:D.indexOf(`
`)===-1?0:1,line:this.line,col:this.col};var z=2,K=Math.max(U.line-z,1),Y=U.line+z,X=String(Y).length,ne=d(this.buffer,this.line-U.line+z+1).slice(0,5),xe=[];xe.push(N+" at line "+U.line+" col "+U.col+":"),xe.push("");for(var ie=0;ie<ne.length;ie++){var Ae=ne[ie],gr=K+ie;xe.push(m(String(gr),X)+"  "+Ae),gr===U.line&&xe.push(m("",X+U.col+1)+"^")}return xe.join(`
`)},le.prototype.clone=function(){return new le(this.states,this.state)},le.prototype.has=function(U){return!0},{compile:V,states:oe,error:Object.freeze({error:!0}),fallback:Object.freeze({fallback:!0}),keywords:ae}})});var Fl=Ye((ei,PM)=>{"use strict";Object.defineProperty(ei,"__esModule",{value:!0});function Nn(t){return typeof t=="object"&&!("toString"in t)?Object.prototype.toString.call(t).slice(8,-1):t}var L5=typeof process=="object"&&process.env.NODE_ENV==="production";function yn(t,e){if(!t)throw L5?new Error("Invariant failed"):new Error(e())}ei.invariant=yn;var JS=Object.prototype.hasOwnProperty,U5=Array.prototype.splice,H5=Object.prototype.toString;function da(t){return H5.call(t).slice(8,-1)}var Qm=Object.assign||function(t,e){return ev(e).forEach(function(r){JS.call(e,r)&&(t[r]=e[r])}),t},ev=typeof Object.getOwnPropertySymbols=="function"?function(t){return Object.keys(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.keys(t)};function vo(t){return Array.isArray(t)?Qm(t.constructor(t.length),t):da(t)==="Map"?new Map(t):da(t)==="Set"?new Set(t):t&&typeof t=="object"?Qm(Object.create(Object.getPrototypeOf(t)),t):t}var RM=function(){function t(){this.commands=Qm({},V5),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(e,r){return e===r},this.update.newContext=function(){return new t().update}}return Object.defineProperty(t.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(e){this.update.isEquals=e},enumerable:!0,configurable:!0}),t.prototype.extend=function(e,r){this.commands[e]=r},t.prototype.update=function(e,r){var n=this,i=typeof r=="function"?{$apply:r}:r;Array.isArray(e)&&Array.isArray(i)||yn(!Array.isArray(i),function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."}),yn(typeof i=="object"&&i!==null,function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the "+("following commands: "+Object.keys(n.commands).join(", ")+".")});var o=e;return ev(i).forEach(function(s){if(JS.call(n.commands,s)){var l=e===o;o=n.commands[s](i[s],o,i,e),l&&n.isEquals(o,e)&&(o=e)}else{var u=da(e)==="Map"?n.update(e.get(s),i[s]):n.update(e[s],i[s]),p=da(o)==="Map"?o.get(s):o[s];(!n.isEquals(u,p)||typeof u>"u"&&!JS.call(e,s))&&(o===e&&(o=vo(e)),da(o)==="Map"?o.set(s,u):o[s]=u)}}),o},t}();ei.Context=RM;var V5={$push:function(t,e,r){return _M(e,r,"$push"),t.length?e.concat(t):e},$unshift:function(t,e,r){return _M(e,r,"$unshift"),t.length?t.concat(e):e},$splice:function(t,e,r,n){return B5(e,r),t.forEach(function(i){kM(i),e===n&&i.length&&(e=vo(n)),U5.apply(e,i)}),e},$set:function(t,e,r){return $5(r),t},$toggle:function(t,e){Dl(t,"$toggle");var r=t.length?vo(e):e;return t.forEach(function(n){r[n]=!e[n]}),r},$unset:function(t,e,r,n){return Dl(t,"$unset"),t.forEach(function(i){Object.hasOwnProperty.call(e,i)&&(e===n&&(e=vo(n)),delete e[i])}),e},$add:function(t,e,r,n){return EM(e,"$add"),Dl(t,"$add"),da(e)==="Map"?t.forEach(function(i){var o=i[0],s=i[1];e===n&&e.get(o)!==s&&(e=vo(n)),e.set(o,s)}):t.forEach(function(i){e===n&&!e.has(i)&&(e=vo(n)),e.add(i)}),e},$remove:function(t,e,r,n){return EM(e,"$remove"),Dl(t,"$remove"),t.forEach(function(i){e===n&&e.has(i)&&(e=vo(n)),e.delete(i)}),e},$merge:function(t,e,r,n){return j5(e,t),ev(t).forEach(function(i){t[i]!==e[i]&&(e===n&&(e=vo(n)),e[i]=t[i])}),e},$apply:function(t,e){return W5(t),t(e)}},tv=new RM;ei.isEquals=tv.update.isEquals;ei.extend=tv.extend;ei.default=tv.update;ei.default.default=PM.exports=Qm(ei.default,ei);function _M(t,e,r){yn(Array.isArray(t),function(){return"update(): expected target of "+Nn(r)+" to be an array; got "+Nn(t)+"."}),Dl(e[r],r)}function Dl(t,e){yn(Array.isArray(t),function(){return"update(): expected spec of "+Nn(e)+" to be an array; got "+Nn(t)+". Did you forget to wrap your parameter in an array?"})}function B5(t,e){yn(Array.isArray(t),function(){return"Expected $splice target to be an array; got "+Nn(t)}),kM(e.$splice)}function kM(t){yn(Array.isArray(t),function(){return"update(): expected spec of $splice to be an array of arrays; got "+Nn(t)+". Did you forget to wrap your parameters in an array?"})}function W5(t){yn(typeof t=="function",function(){return"update(): expected spec of $apply to be a function; got "+Nn(t)+"."})}function $5(t){yn(Object.keys(t).length===1,function(){return"Cannot have more than one key in an object with $set"})}function j5(t,e){yn(e&&typeof e=="object",function(){return"update(): $merge expects a spec of type 'object'; got "+Nn(e)}),yn(t&&typeof t=="object",function(){return"update(): $merge expects a target of type 'object'; got "+Nn(t)})}function EM(t,e){var r=da(t);yn(r==="Map"||r==="Set",function(){return"update(): "+Nn(e)+" expects a target of type Set or Map; got "+Nn(r)})}});var yb=Ye((gc,Su)=>{(function(){var t,e="4.17.21",r=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",i="Expected a function",o="Invalid `variable` option passed into `_.template`",s="__lodash_hash_undefined__",l=500,u="__lodash_placeholder__",p=1,m=2,d=4,g=1,x=2,b=1,v=2,I=4,F=8,V=16,Z=32,oe=64,ae=128,le=256,st=512,Lt=30,pt="...",U=800,N=16,D=1,z=2,K=3,Y=1/0,X=9007199254740991,ne=17976931348623157e292,xe=NaN,ie=4294967295,Ae=ie-1,gr=ie>>>1,di=[["ary",ae],["bind",b],["bindKey",v],["curry",F],["curryRight",V],["flip",st],["partial",Z],["partialRight",oe],["rearg",le]],yr="[object Arguments]",En="[object Array]",Cr="[object AsyncFunction]",Rn="[object Boolean]",tn="[object Date]",Uo="[object DOMException]",hi="[object Error]",La="[object Function]",Vw="[object GeneratorFunction]",kn="[object Map]",Fc="[object Number]",$1="[object Null]",gi="[object Object]",Bw="[object Promise]",j1="[object Proxy]",Ic="[object RegExp]",Pn="[object Set]",Cc="[object String]",Qu="[object Symbol]",q1="[object Undefined]",Oc="[object WeakMap]",z1="[object WeakSet]",Nc="[object ArrayBuffer]",Ua="[object DataView]",Xy="[object Float32Array]",Jy="[object Float64Array]",ex="[object Int8Array]",tx="[object Int16Array]",rx="[object Int32Array]",nx="[object Uint8Array]",ix="[object Uint8ClampedArray]",ox="[object Uint16Array]",ax="[object Uint32Array]",G1=/\b__p \+= '';/g,K1=/\b(__p \+=) '' \+/g,Q1=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ww=/&(?:amp|lt|gt|quot|#39);/g,$w=/[&<>"']/g,Z1=RegExp(Ww.source),Y1=RegExp($w.source),X1=/<%-([\s\S]+?)%>/g,J1=/<%([\s\S]+?)%>/g,jw=/<%=([\s\S]+?)%>/g,eO=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,tO=/^\w*$/,rO=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,sx=/[\\^$.*+?()[\]{}|]/g,nO=RegExp(sx.source),cx=/^\s+/,iO=/\s/,oO=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,aO=/\{\n\/\* \[wrapped with (.+)\] \*/,sO=/,? & /,cO=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,lO=/[()=,{}\[\]\/\s]/,uO=/\\(\\)?/g,pO=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,qw=/\w*$/,fO=/^[-+]0x[0-9a-f]+$/i,mO=/^0b[01]+$/i,dO=/^\[object .+?Constructor\]$/,hO=/^0o[0-7]+$/i,gO=/^(?:0|[1-9]\d*)$/,yO=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Zu=/($^)/,xO=/['\n\r\u2028\u2029\\]/g,Yu="\\ud800-\\udfff",TO="\\u0300-\\u036f",SO="\\ufe20-\\ufe2f",vO="\\u20d0-\\u20ff",zw=TO+SO+vO,Gw="\\u2700-\\u27bf",Kw="a-z\\xdf-\\xf6\\xf8-\\xff",bO="\\xac\\xb1\\xd7\\xf7",wO="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",_O="\\u2000-\\u206f",EO=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Qw="A-Z\\xc0-\\xd6\\xd8-\\xde",Zw="\\ufe0e\\ufe0f",Yw=bO+wO+_O+EO,lx="['\u2019]",RO="["+Yu+"]",Xw="["+Yw+"]",Xu="["+zw+"]",Jw="\\d+",kO="["+Gw+"]",e_="["+Kw+"]",t_="[^"+Yu+Yw+Jw+Gw+Kw+Qw+"]",ux="\\ud83c[\\udffb-\\udfff]",PO="(?:"+Xu+"|"+ux+")",r_="[^"+Yu+"]",px="(?:\\ud83c[\\udde6-\\uddff]){2}",fx="[\\ud800-\\udbff][\\udc00-\\udfff]",Ha="["+Qw+"]",n_="\\u200d",i_="(?:"+e_+"|"+t_+")",AO="(?:"+Ha+"|"+t_+")",o_="(?:"+lx+"(?:d|ll|m|re|s|t|ve))?",a_="(?:"+lx+"(?:D|LL|M|RE|S|T|VE))?",s_=PO+"?",c_="["+Zw+"]?",MO="(?:"+n_+"(?:"+[r_,px,fx].join("|")+")"+c_+s_+")*",DO="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",FO="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",l_=c_+s_+MO,IO="(?:"+[kO,px,fx].join("|")+")"+l_,CO="(?:"+[r_+Xu+"?",Xu,px,fx,RO].join("|")+")",OO=RegExp(lx,"g"),NO=RegExp(Xu,"g"),mx=RegExp(ux+"(?="+ux+")|"+CO+l_,"g"),LO=RegExp([Ha+"?"+e_+"+"+o_+"(?="+[Xw,Ha,"$"].join("|")+")",AO+"+"+a_+"(?="+[Xw,Ha+i_,"$"].join("|")+")",Ha+"?"+i_+"+"+o_,Ha+"+"+a_,FO,DO,Jw,IO].join("|"),"g"),UO=RegExp("["+n_+Yu+zw+Zw+"]"),HO=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,VO=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],BO=-1,et={};et[Xy]=et[Jy]=et[ex]=et[tx]=et[rx]=et[nx]=et[ix]=et[ox]=et[ax]=!0,et[yr]=et[En]=et[Nc]=et[Rn]=et[Ua]=et[tn]=et[hi]=et[La]=et[kn]=et[Fc]=et[gi]=et[Ic]=et[Pn]=et[Cc]=et[Oc]=!1;var Xe={};Xe[yr]=Xe[En]=Xe[Nc]=Xe[Ua]=Xe[Rn]=Xe[tn]=Xe[Xy]=Xe[Jy]=Xe[ex]=Xe[tx]=Xe[rx]=Xe[kn]=Xe[Fc]=Xe[gi]=Xe[Ic]=Xe[Pn]=Xe[Cc]=Xe[Qu]=Xe[nx]=Xe[ix]=Xe[ox]=Xe[ax]=!0,Xe[hi]=Xe[La]=Xe[Oc]=!1;var WO={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},$O={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},jO={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},qO={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},zO=parseFloat,GO=parseInt,u_=typeof global=="object"&&global&&global.Object===Object&&global,KO=typeof self=="object"&&self&&self.Object===Object&&self,At=u_||KO||Function("return this")(),dx=typeof gc=="object"&&gc&&!gc.nodeType&&gc,Ho=dx&&typeof Su=="object"&&Su&&!Su.nodeType&&Su,p_=Ho&&Ho.exports===dx,hx=p_&&u_.process,rn=function(){try{var P=Ho&&Ho.require&&Ho.require("util").types;return P||hx&&hx.binding&&hx.binding("util")}catch{}}(),f_=rn&&rn.isArrayBuffer,m_=rn&&rn.isDate,d_=rn&&rn.isMap,h_=rn&&rn.isRegExp,g_=rn&&rn.isSet,y_=rn&&rn.isTypedArray;function Or(P,B,H){switch(H.length){case 0:return P.call(B);case 1:return P.call(B,H[0]);case 2:return P.call(B,H[0],H[1]);case 3:return P.call(B,H[0],H[1],H[2])}return P.apply(B,H)}function QO(P,B,H,re){for(var Se=-1,We=P==null?0:P.length;++Se<We;){var _t=P[Se];B(re,_t,H(_t),P)}return re}function nn(P,B){for(var H=-1,re=P==null?0:P.length;++H<re&&B(P[H],H,P)!==!1;);return P}function ZO(P,B){for(var H=P==null?0:P.length;H--&&B(P[H],H,P)!==!1;);return P}function x_(P,B){for(var H=-1,re=P==null?0:P.length;++H<re;)if(!B(P[H],H,P))return!1;return!0}function ji(P,B){for(var H=-1,re=P==null?0:P.length,Se=0,We=[];++H<re;){var _t=P[H];B(_t,H,P)&&(We[Se++]=_t)}return We}function Ju(P,B){var H=P==null?0:P.length;return!!H&&Va(P,B,0)>-1}function gx(P,B,H){for(var re=-1,Se=P==null?0:P.length;++re<Se;)if(H(B,P[re]))return!0;return!1}function nt(P,B){for(var H=-1,re=P==null?0:P.length,Se=Array(re);++H<re;)Se[H]=B(P[H],H,P);return Se}function qi(P,B){for(var H=-1,re=B.length,Se=P.length;++H<re;)P[Se+H]=B[H];return P}function yx(P,B,H,re){var Se=-1,We=P==null?0:P.length;for(re&&We&&(H=P[++Se]);++Se<We;)H=B(H,P[Se],Se,P);return H}function YO(P,B,H,re){var Se=P==null?0:P.length;for(re&&Se&&(H=P[--Se]);Se--;)H=B(H,P[Se],Se,P);return H}function xx(P,B){for(var H=-1,re=P==null?0:P.length;++H<re;)if(B(P[H],H,P))return!0;return!1}var XO=Tx("length");function JO(P){return P.split("")}function eN(P){return P.match(cO)||[]}function T_(P,B,H){var re;return H(P,function(Se,We,_t){if(B(Se,We,_t))return re=We,!1}),re}function ep(P,B,H,re){for(var Se=P.length,We=H+(re?1:-1);re?We--:++We<Se;)if(B(P[We],We,P))return We;return-1}function Va(P,B,H){return B===B?fN(P,B,H):ep(P,S_,H)}function tN(P,B,H,re){for(var Se=H-1,We=P.length;++Se<We;)if(re(P[Se],B))return Se;return-1}function S_(P){return P!==P}function v_(P,B){var H=P==null?0:P.length;return H?vx(P,B)/H:xe}function Tx(P){return function(B){return B==null?t:B[P]}}function Sx(P){return function(B){return P==null?t:P[B]}}function b_(P,B,H,re,Se){return Se(P,function(We,_t,Ze){H=re?(re=!1,We):B(H,We,_t,Ze)}),H}function rN(P,B){var H=P.length;for(P.sort(B);H--;)P[H]=P[H].value;return P}function vx(P,B){for(var H,re=-1,Se=P.length;++re<Se;){var We=B(P[re]);We!==t&&(H=H===t?We:H+We)}return H}function bx(P,B){for(var H=-1,re=Array(P);++H<P;)re[H]=B(H);return re}function nN(P,B){return nt(B,function(H){return[H,P[H]]})}function w_(P){return P&&P.slice(0,k_(P)+1).replace(cx,"")}function Nr(P){return function(B){return P(B)}}function wx(P,B){return nt(B,function(H){return P[H]})}function Lc(P,B){return P.has(B)}function __(P,B){for(var H=-1,re=P.length;++H<re&&Va(B,P[H],0)>-1;);return H}function E_(P,B){for(var H=P.length;H--&&Va(B,P[H],0)>-1;);return H}function iN(P,B){for(var H=P.length,re=0;H--;)P[H]===B&&++re;return re}var oN=Sx(WO),aN=Sx($O);function sN(P){return"\\"+qO[P]}function cN(P,B){return P==null?t:P[B]}function Ba(P){return UO.test(P)}function lN(P){return HO.test(P)}function uN(P){for(var B,H=[];!(B=P.next()).done;)H.push(B.value);return H}function _x(P){var B=-1,H=Array(P.size);return P.forEach(function(re,Se){H[++B]=[Se,re]}),H}function R_(P,B){return function(H){return P(B(H))}}function zi(P,B){for(var H=-1,re=P.length,Se=0,We=[];++H<re;){var _t=P[H];(_t===B||_t===u)&&(P[H]=u,We[Se++]=H)}return We}function tp(P){var B=-1,H=Array(P.size);return P.forEach(function(re){H[++B]=re}),H}function pN(P){var B=-1,H=Array(P.size);return P.forEach(function(re){H[++B]=[re,re]}),H}function fN(P,B,H){for(var re=H-1,Se=P.length;++re<Se;)if(P[re]===B)return re;return-1}function mN(P,B,H){for(var re=H+1;re--;)if(P[re]===B)return re;return re}function Wa(P){return Ba(P)?hN(P):XO(P)}function An(P){return Ba(P)?gN(P):JO(P)}function k_(P){for(var B=P.length;B--&&iO.test(P.charAt(B)););return B}var dN=Sx(jO);function hN(P){for(var B=mx.lastIndex=0;mx.test(P);)++B;return B}function gN(P){return P.match(mx)||[]}function yN(P){return P.match(LO)||[]}var xN=function P(B){B=B==null?At:Gi.defaults(At.Object(),B,Gi.pick(At,VO));var H=B.Array,re=B.Date,Se=B.Error,We=B.Function,_t=B.Math,Ze=B.Object,Ex=B.RegExp,TN=B.String,on=B.TypeError,rp=H.prototype,SN=We.prototype,$a=Ze.prototype,np=B["__core-js_shared__"],ip=SN.toString,qe=$a.hasOwnProperty,vN=0,P_=function(){var a=/[^.]+$/.exec(np&&np.keys&&np.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),op=$a.toString,bN=ip.call(Ze),wN=At._,_N=Ex("^"+ip.call(qe).replace(sx,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ap=p_?B.Buffer:t,Ki=B.Symbol,sp=B.Uint8Array,A_=ap?ap.allocUnsafe:t,cp=R_(Ze.getPrototypeOf,Ze),M_=Ze.create,D_=$a.propertyIsEnumerable,lp=rp.splice,F_=Ki?Ki.isConcatSpreadable:t,Uc=Ki?Ki.iterator:t,Vo=Ki?Ki.toStringTag:t,up=function(){try{var a=qo(Ze,"defineProperty");return a({},"",{}),a}catch{}}(),EN=B.clearTimeout!==At.clearTimeout&&B.clearTimeout,RN=re&&re.now!==At.Date.now&&re.now,kN=B.setTimeout!==At.setTimeout&&B.setTimeout,pp=_t.ceil,fp=_t.floor,Rx=Ze.getOwnPropertySymbols,PN=ap?ap.isBuffer:t,I_=B.isFinite,AN=rp.join,MN=R_(Ze.keys,Ze),Et=_t.max,zt=_t.min,DN=re.now,FN=B.parseInt,C_=_t.random,IN=rp.reverse,kx=qo(B,"DataView"),Hc=qo(B,"Map"),Px=qo(B,"Promise"),ja=qo(B,"Set"),Vc=qo(B,"WeakMap"),Bc=qo(Ze,"create"),mp=Vc&&new Vc,qa={},CN=zo(kx),ON=zo(Hc),NN=zo(Px),LN=zo(ja),UN=zo(Vc),dp=Ki?Ki.prototype:t,Wc=dp?dp.valueOf:t,O_=dp?dp.toString:t;function T(a){if(ft(a)&&!ve(a)&&!(a instanceof Oe)){if(a instanceof an)return a;if(qe.call(a,"__wrapped__"))return N0(a)}return new an(a)}var za=function(){function a(){}return function(c){if(!ct(c))return{};if(M_)return M_(c);a.prototype=c;var f=new a;return a.prototype=t,f}}();function hp(){}function an(a,c){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=t}T.templateSettings={escape:X1,evaluate:J1,interpolate:jw,variable:"",imports:{_:T}},T.prototype=hp.prototype,T.prototype.constructor=T,an.prototype=za(hp.prototype),an.prototype.constructor=an;function Oe(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ie,this.__views__=[]}function HN(){var a=new Oe(this.__wrapped__);return a.__actions__=xr(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=xr(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=xr(this.__views__),a}function VN(){if(this.__filtered__){var a=new Oe(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a}function BN(){var a=this.__wrapped__.value(),c=this.__dir__,f=ve(a),h=c<0,y=f?a.length:0,S=JL(0,y,this.__views__),E=S.start,R=S.end,M=R-E,$=h?R:E-1,j=this.__iteratees__,G=j.length,J=0,se=zt(M,this.__takeCount__);if(!f||!h&&y==M&&se==M)return o0(a,this.__actions__);var he=[];e:for(;M--&&J<se;){$+=c;for(var Pe=-1,ge=a[$];++Pe<G;){var Ie=j[Pe],Ne=Ie.iteratee,Hr=Ie.type,or=Ne(ge);if(Hr==z)ge=or;else if(!or){if(Hr==D)continue e;break e}}he[J++]=ge}return he}Oe.prototype=za(hp.prototype),Oe.prototype.constructor=Oe;function Bo(a){var c=-1,f=a==null?0:a.length;for(this.clear();++c<f;){var h=a[c];this.set(h[0],h[1])}}function WN(){this.__data__=Bc?Bc(null):{},this.size=0}function $N(a){var c=this.has(a)&&delete this.__data__[a];return this.size-=c?1:0,c}function jN(a){var c=this.__data__;if(Bc){var f=c[a];return f===s?t:f}return qe.call(c,a)?c[a]:t}function qN(a){var c=this.__data__;return Bc?c[a]!==t:qe.call(c,a)}function zN(a,c){var f=this.__data__;return this.size+=this.has(a)?0:1,f[a]=Bc&&c===t?s:c,this}Bo.prototype.clear=WN,Bo.prototype.delete=$N,Bo.prototype.get=jN,Bo.prototype.has=qN,Bo.prototype.set=zN;function yi(a){var c=-1,f=a==null?0:a.length;for(this.clear();++c<f;){var h=a[c];this.set(h[0],h[1])}}function GN(){this.__data__=[],this.size=0}function KN(a){var c=this.__data__,f=gp(c,a);if(f<0)return!1;var h=c.length-1;return f==h?c.pop():lp.call(c,f,1),--this.size,!0}function QN(a){var c=this.__data__,f=gp(c,a);return f<0?t:c[f][1]}function ZN(a){return gp(this.__data__,a)>-1}function YN(a,c){var f=this.__data__,h=gp(f,a);return h<0?(++this.size,f.push([a,c])):f[h][1]=c,this}yi.prototype.clear=GN,yi.prototype.delete=KN,yi.prototype.get=QN,yi.prototype.has=ZN,yi.prototype.set=YN;function xi(a){var c=-1,f=a==null?0:a.length;for(this.clear();++c<f;){var h=a[c];this.set(h[0],h[1])}}function XN(){this.size=0,this.__data__={hash:new Bo,map:new(Hc||yi),string:new Bo}}function JN(a){var c=Pp(this,a).delete(a);return this.size-=c?1:0,c}function eL(a){return Pp(this,a).get(a)}function tL(a){return Pp(this,a).has(a)}function rL(a,c){var f=Pp(this,a),h=f.size;return f.set(a,c),this.size+=f.size==h?0:1,this}xi.prototype.clear=XN,xi.prototype.delete=JN,xi.prototype.get=eL,xi.prototype.has=tL,xi.prototype.set=rL;function Wo(a){var c=-1,f=a==null?0:a.length;for(this.__data__=new xi;++c<f;)this.add(a[c])}function nL(a){return this.__data__.set(a,s),this}function iL(a){return this.__data__.has(a)}Wo.prototype.add=Wo.prototype.push=nL,Wo.prototype.has=iL;function Mn(a){var c=this.__data__=new yi(a);this.size=c.size}function oL(){this.__data__=new yi,this.size=0}function aL(a){var c=this.__data__,f=c.delete(a);return this.size=c.size,f}function sL(a){return this.__data__.get(a)}function cL(a){return this.__data__.has(a)}function lL(a,c){var f=this.__data__;if(f instanceof yi){var h=f.__data__;if(!Hc||h.length<r-1)return h.push([a,c]),this.size=++f.size,this;f=this.__data__=new xi(h)}return f.set(a,c),this.size=f.size,this}Mn.prototype.clear=oL,Mn.prototype.delete=aL,Mn.prototype.get=sL,Mn.prototype.has=cL,Mn.prototype.set=lL;function N_(a,c){var f=ve(a),h=!f&&Go(a),y=!f&&!h&&Ji(a),S=!f&&!h&&!y&&Za(a),E=f||h||y||S,R=E?bx(a.length,TN):[],M=R.length;for(var $ in a)(c||qe.call(a,$))&&!(E&&($=="length"||y&&($=="offset"||$=="parent")||S&&($=="buffer"||$=="byteLength"||$=="byteOffset")||bi($,M)))&&R.push($);return R}function L_(a){var c=a.length;return c?a[Hx(0,c-1)]:t}function uL(a,c){return Ap(xr(a),$o(c,0,a.length))}function pL(a){return Ap(xr(a))}function Ax(a,c,f){(f!==t&&!Dn(a[c],f)||f===t&&!(c in a))&&Ti(a,c,f)}function $c(a,c,f){var h=a[c];(!(qe.call(a,c)&&Dn(h,f))||f===t&&!(c in a))&&Ti(a,c,f)}function gp(a,c){for(var f=a.length;f--;)if(Dn(a[f][0],c))return f;return-1}function fL(a,c,f,h){return Qi(a,function(y,S,E){c(h,y,f(y),E)}),h}function U_(a,c){return a&&Gn(c,Mt(c),a)}function mL(a,c){return a&&Gn(c,Sr(c),a)}function Ti(a,c,f){c=="__proto__"&&up?up(a,c,{configurable:!0,enumerable:!0,value:f,writable:!0}):a[c]=f}function Mx(a,c){for(var f=-1,h=c.length,y=H(h),S=a==null;++f<h;)y[f]=S?t:uT(a,c[f]);return y}function $o(a,c,f){return a===a&&(f!==t&&(a=a<=f?a:f),c!==t&&(a=a>=c?a:c)),a}function sn(a,c,f,h,y,S){var E,R=c&p,M=c&m,$=c&d;if(f&&(E=y?f(a,h,y,S):f(a)),E!==t)return E;if(!ct(a))return a;var j=ve(a);if(j){if(E=tU(a),!R)return xr(a,E)}else{var G=Gt(a),J=G==La||G==Vw;if(Ji(a))return c0(a,R);if(G==gi||G==yr||J&&!y){if(E=M||J?{}:k0(a),!R)return M?jL(a,mL(E,a)):$L(a,U_(E,a))}else{if(!Xe[G])return y?a:{};E=rU(a,G,R)}}S||(S=new Mn);var se=S.get(a);if(se)return se;S.set(a,E),rE(a)?a.forEach(function(ge){E.add(sn(ge,c,f,ge,a,S))}):eE(a)&&a.forEach(function(ge,Ie){E.set(Ie,sn(ge,c,f,Ie,a,S))});var he=$?M?Zx:Qx:M?Sr:Mt,Pe=j?t:he(a);return nn(Pe||a,function(ge,Ie){Pe&&(Ie=ge,ge=a[Ie]),$c(E,Ie,sn(ge,c,f,Ie,a,S))}),E}function dL(a){var c=Mt(a);return function(f){return H_(f,a,c)}}function H_(a,c,f){var h=f.length;if(a==null)return!h;for(a=Ze(a);h--;){var y=f[h],S=c[y],E=a[y];if(E===t&&!(y in a)||!S(E))return!1}return!0}function V_(a,c,f){if(typeof a!="function")throw new on(i);return Zc(function(){a.apply(t,f)},c)}function jc(a,c,f,h){var y=-1,S=Ju,E=!0,R=a.length,M=[],$=c.length;if(!R)return M;f&&(c=nt(c,Nr(f))),h?(S=gx,E=!1):c.length>=r&&(S=Lc,E=!1,c=new Wo(c));e:for(;++y<R;){var j=a[y],G=f==null?j:f(j);if(j=h||j!==0?j:0,E&&G===G){for(var J=$;J--;)if(c[J]===G)continue e;M.push(j)}else S(c,G,h)||M.push(j)}return M}var Qi=m0(zn),B_=m0(Fx,!0);function hL(a,c){var f=!0;return Qi(a,function(h,y,S){return f=!!c(h,y,S),f}),f}function yp(a,c,f){for(var h=-1,y=a.length;++h<y;){var S=a[h],E=c(S);if(E!=null&&(R===t?E===E&&!Ur(E):f(E,R)))var R=E,M=S}return M}function gL(a,c,f,h){var y=a.length;for(f=Ee(f),f<0&&(f=-f>y?0:y+f),h=h===t||h>y?y:Ee(h),h<0&&(h+=y),h=f>h?0:iE(h);f<h;)a[f++]=c;return a}function W_(a,c){var f=[];return Qi(a,function(h,y,S){c(h,y,S)&&f.push(h)}),f}function Ut(a,c,f,h,y){var S=-1,E=a.length;for(f||(f=iU),y||(y=[]);++S<E;){var R=a[S];c>0&&f(R)?c>1?Ut(R,c-1,f,h,y):qi(y,R):h||(y[y.length]=R)}return y}var Dx=d0(),$_=d0(!0);function zn(a,c){return a&&Dx(a,c,Mt)}function Fx(a,c){return a&&$_(a,c,Mt)}function xp(a,c){return ji(c,function(f){return wi(a[f])})}function jo(a,c){c=Yi(c,a);for(var f=0,h=c.length;a!=null&&f<h;)a=a[Kn(c[f++])];return f&&f==h?a:t}function j_(a,c,f){var h=c(a);return ve(a)?h:qi(h,f(a))}function nr(a){return a==null?a===t?q1:$1:Vo&&Vo in Ze(a)?XL(a):pU(a)}function Ix(a,c){return a>c}function yL(a,c){return a!=null&&qe.call(a,c)}function xL(a,c){return a!=null&&c in Ze(a)}function TL(a,c,f){return a>=zt(c,f)&&a<Et(c,f)}function Cx(a,c,f){for(var h=f?gx:Ju,y=a[0].length,S=a.length,E=S,R=H(S),M=1/0,$=[];E--;){var j=a[E];E&&c&&(j=nt(j,Nr(c))),M=zt(j.length,M),R[E]=!f&&(c||y>=120&&j.length>=120)?new Wo(E&&j):t}j=a[0];var G=-1,J=R[0];e:for(;++G<y&&$.length<M;){var se=j[G],he=c?c(se):se;if(se=f||se!==0?se:0,!(J?Lc(J,he):h($,he,f))){for(E=S;--E;){var Pe=R[E];if(!(Pe?Lc(Pe,he):h(a[E],he,f)))continue e}J&&J.push(he),$.push(se)}}return $}function SL(a,c,f,h){return zn(a,function(y,S,E){c(h,f(y),S,E)}),h}function qc(a,c,f){c=Yi(c,a),a=D0(a,c);var h=a==null?a:a[Kn(ln(c))];return h==null?t:Or(h,a,f)}function q_(a){return ft(a)&&nr(a)==yr}function vL(a){return ft(a)&&nr(a)==Nc}function bL(a){return ft(a)&&nr(a)==tn}function zc(a,c,f,h,y){return a===c?!0:a==null||c==null||!ft(a)&&!ft(c)?a!==a&&c!==c:wL(a,c,f,h,zc,y)}function wL(a,c,f,h,y,S){var E=ve(a),R=ve(c),M=E?En:Gt(a),$=R?En:Gt(c);M=M==yr?gi:M,$=$==yr?gi:$;var j=M==gi,G=$==gi,J=M==$;if(J&&Ji(a)){if(!Ji(c))return!1;E=!0,j=!1}if(J&&!j)return S||(S=new Mn),E||Za(a)?_0(a,c,f,h,y,S):ZL(a,c,M,f,h,y,S);if(!(f&g)){var se=j&&qe.call(a,"__wrapped__"),he=G&&qe.call(c,"__wrapped__");if(se||he){var Pe=se?a.value():a,ge=he?c.value():c;return S||(S=new Mn),y(Pe,ge,f,h,S)}}return J?(S||(S=new Mn),YL(a,c,f,h,y,S)):!1}function _L(a){return ft(a)&&Gt(a)==kn}function Ox(a,c,f,h){var y=f.length,S=y,E=!h;if(a==null)return!S;for(a=Ze(a);y--;){var R=f[y];if(E&&R[2]?R[1]!==a[R[0]]:!(R[0]in a))return!1}for(;++y<S;){R=f[y];var M=R[0],$=a[M],j=R[1];if(E&&R[2]){if($===t&&!(M in a))return!1}else{var G=new Mn;if(h)var J=h($,j,M,a,c,G);if(!(J===t?zc(j,$,g|x,h,G):J))return!1}}return!0}function z_(a){if(!ct(a)||aU(a))return!1;var c=wi(a)?_N:dO;return c.test(zo(a))}function EL(a){return ft(a)&&nr(a)==Ic}function RL(a){return ft(a)&&Gt(a)==Pn}function kL(a){return ft(a)&&Op(a.length)&&!!et[nr(a)]}function G_(a){return typeof a=="function"?a:a==null?vr:typeof a=="object"?ve(a)?Z_(a[0],a[1]):Q_(a):hE(a)}function Nx(a){if(!Qc(a))return MN(a);var c=[];for(var f in Ze(a))qe.call(a,f)&&f!="constructor"&&c.push(f);return c}function PL(a){if(!ct(a))return uU(a);var c=Qc(a),f=[];for(var h in a)h=="constructor"&&(c||!qe.call(a,h))||f.push(h);return f}function Lx(a,c){return a<c}function K_(a,c){var f=-1,h=Tr(a)?H(a.length):[];return Qi(a,function(y,S,E){h[++f]=c(y,S,E)}),h}function Q_(a){var c=Xx(a);return c.length==1&&c[0][2]?A0(c[0][0],c[0][1]):function(f){return f===a||Ox(f,a,c)}}function Z_(a,c){return eT(a)&&P0(c)?A0(Kn(a),c):function(f){var h=uT(f,a);return h===t&&h===c?pT(f,a):zc(c,h,g|x)}}function Tp(a,c,f,h,y){a!==c&&Dx(c,function(S,E){if(y||(y=new Mn),ct(S))AL(a,c,E,f,Tp,h,y);else{var R=h?h(rT(a,E),S,E+"",a,c,y):t;R===t&&(R=S),Ax(a,E,R)}},Sr)}function AL(a,c,f,h,y,S,E){var R=rT(a,f),M=rT(c,f),$=E.get(M);if($){Ax(a,f,$);return}var j=S?S(R,M,f+"",a,c,E):t,G=j===t;if(G){var J=ve(M),se=!J&&Ji(M),he=!J&&!se&&Za(M);j=M,J||se||he?ve(R)?j=R:ht(R)?j=xr(R):se?(G=!1,j=c0(M,!0)):he?(G=!1,j=l0(M,!0)):j=[]:Yc(M)||Go(M)?(j=R,Go(R)?j=oE(R):(!ct(R)||wi(R))&&(j=k0(M))):G=!1}G&&(E.set(M,j),y(j,M,h,S,E),E.delete(M)),Ax(a,f,j)}function Y_(a,c){var f=a.length;if(f)return c+=c<0?f:0,bi(c,f)?a[c]:t}function X_(a,c,f){c.length?c=nt(c,function(S){return ve(S)?function(E){return jo(E,S.length===1?S[0]:S)}:S}):c=[vr];var h=-1;c=nt(c,Nr(me()));var y=K_(a,function(S,E,R){var M=nt(c,function($){return $(S)});return{criteria:M,index:++h,value:S}});return rN(y,function(S,E){return WL(S,E,f)})}function ML(a,c){return J_(a,c,function(f,h){return pT(a,h)})}function J_(a,c,f){for(var h=-1,y=c.length,S={};++h<y;){var E=c[h],R=jo(a,E);f(R,E)&&Gc(S,Yi(E,a),R)}return S}function DL(a){return function(c){return jo(c,a)}}function Ux(a,c,f,h){var y=h?tN:Va,S=-1,E=c.length,R=a;for(a===c&&(c=xr(c)),f&&(R=nt(a,Nr(f)));++S<E;)for(var M=0,$=c[S],j=f?f($):$;(M=y(R,j,M,h))>-1;)R!==a&&lp.call(R,M,1),lp.call(a,M,1);return a}function e0(a,c){for(var f=a?c.length:0,h=f-1;f--;){var y=c[f];if(f==h||y!==S){var S=y;bi(y)?lp.call(a,y,1):Wx(a,y)}}return a}function Hx(a,c){return a+fp(C_()*(c-a+1))}function FL(a,c,f,h){for(var y=-1,S=Et(pp((c-a)/(f||1)),0),E=H(S);S--;)E[h?S:++y]=a,a+=f;return E}function Vx(a,c){var f="";if(!a||c<1||c>X)return f;do c%2&&(f+=a),c=fp(c/2),c&&(a+=a);while(c);return f}function Me(a,c){return nT(M0(a,c,vr),a+"")}function IL(a){return L_(Ya(a))}function CL(a,c){var f=Ya(a);return Ap(f,$o(c,0,f.length))}function Gc(a,c,f,h){if(!ct(a))return a;c=Yi(c,a);for(var y=-1,S=c.length,E=S-1,R=a;R!=null&&++y<S;){var M=Kn(c[y]),$=f;if(M==="__proto__"||M==="constructor"||M==="prototype")return a;if(y!=E){var j=R[M];$=h?h(j,M,R):t,$===t&&($=ct(j)?j:bi(c[y+1])?[]:{})}$c(R,M,$),R=R[M]}return a}var t0=mp?function(a,c){return mp.set(a,c),a}:vr,OL=up?function(a,c){return up(a,"toString",{configurable:!0,enumerable:!1,value:mT(c),writable:!0})}:vr;function NL(a){return Ap(Ya(a))}function cn(a,c,f){var h=-1,y=a.length;c<0&&(c=-c>y?0:y+c),f=f>y?y:f,f<0&&(f+=y),y=c>f?0:f-c>>>0,c>>>=0;for(var S=H(y);++h<y;)S[h]=a[h+c];return S}function LL(a,c){var f;return Qi(a,function(h,y,S){return f=c(h,y,S),!f}),!!f}function Sp(a,c,f){var h=0,y=a==null?h:a.length;if(typeof c=="number"&&c===c&&y<=gr){for(;h<y;){var S=h+y>>>1,E=a[S];E!==null&&!Ur(E)&&(f?E<=c:E<c)?h=S+1:y=S}return y}return Bx(a,c,vr,f)}function Bx(a,c,f,h){var y=0,S=a==null?0:a.length;if(S===0)return 0;c=f(c);for(var E=c!==c,R=c===null,M=Ur(c),$=c===t;y<S;){var j=fp((y+S)/2),G=f(a[j]),J=G!==t,se=G===null,he=G===G,Pe=Ur(G);if(E)var ge=h||he;else $?ge=he&&(h||J):R?ge=he&&J&&(h||!se):M?ge=he&&J&&!se&&(h||!Pe):se||Pe?ge=!1:ge=h?G<=c:G<c;ge?y=j+1:S=j}return zt(S,Ae)}function r0(a,c){for(var f=-1,h=a.length,y=0,S=[];++f<h;){var E=a[f],R=c?c(E):E;if(!f||!Dn(R,M)){var M=R;S[y++]=E===0?0:E}}return S}function n0(a){return typeof a=="number"?a:Ur(a)?xe:+a}function Lr(a){if(typeof a=="string")return a;if(ve(a))return nt(a,Lr)+"";if(Ur(a))return O_?O_.call(a):"";var c=a+"";return c=="0"&&1/a==-Y?"-0":c}function Zi(a,c,f){var h=-1,y=Ju,S=a.length,E=!0,R=[],M=R;if(f)E=!1,y=gx;else if(S>=r){var $=c?null:KL(a);if($)return tp($);E=!1,y=Lc,M=new Wo}else M=c?[]:R;e:for(;++h<S;){var j=a[h],G=c?c(j):j;if(j=f||j!==0?j:0,E&&G===G){for(var J=M.length;J--;)if(M[J]===G)continue e;c&&M.push(G),R.push(j)}else y(M,G,f)||(M!==R&&M.push(G),R.push(j))}return R}function Wx(a,c){return c=Yi(c,a),a=D0(a,c),a==null||delete a[Kn(ln(c))]}function i0(a,c,f,h){return Gc(a,c,f(jo(a,c)),h)}function vp(a,c,f,h){for(var y=a.length,S=h?y:-1;(h?S--:++S<y)&&c(a[S],S,a););return f?cn(a,h?0:S,h?S+1:y):cn(a,h?S+1:0,h?y:S)}function o0(a,c){var f=a;return f instanceof Oe&&(f=f.value()),yx(c,function(h,y){return y.func.apply(y.thisArg,qi([h],y.args))},f)}function $x(a,c,f){var h=a.length;if(h<2)return h?Zi(a[0]):[];for(var y=-1,S=H(h);++y<h;)for(var E=a[y],R=-1;++R<h;)R!=y&&(S[y]=jc(S[y]||E,a[R],c,f));return Zi(Ut(S,1),c,f)}function a0(a,c,f){for(var h=-1,y=a.length,S=c.length,E={};++h<y;){var R=h<S?c[h]:t;f(E,a[h],R)}return E}function jx(a){return ht(a)?a:[]}function qx(a){return typeof a=="function"?a:vr}function Yi(a,c){return ve(a)?a:eT(a,c)?[a]:O0(je(a))}var UL=Me;function Xi(a,c,f){var h=a.length;return f=f===t?h:f,!c&&f>=h?a:cn(a,c,f)}var s0=EN||function(a){return At.clearTimeout(a)};function c0(a,c){if(c)return a.slice();var f=a.length,h=A_?A_(f):new a.constructor(f);return a.copy(h),h}function zx(a){var c=new a.constructor(a.byteLength);return new sp(c).set(new sp(a)),c}function HL(a,c){var f=c?zx(a.buffer):a.buffer;return new a.constructor(f,a.byteOffset,a.byteLength)}function VL(a){var c=new a.constructor(a.source,qw.exec(a));return c.lastIndex=a.lastIndex,c}function BL(a){return Wc?Ze(Wc.call(a)):{}}function l0(a,c){var f=c?zx(a.buffer):a.buffer;return new a.constructor(f,a.byteOffset,a.length)}function u0(a,c){if(a!==c){var f=a!==t,h=a===null,y=a===a,S=Ur(a),E=c!==t,R=c===null,M=c===c,$=Ur(c);if(!R&&!$&&!S&&a>c||S&&E&&M&&!R&&!$||h&&E&&M||!f&&M||!y)return 1;if(!h&&!S&&!$&&a<c||$&&f&&y&&!h&&!S||R&&f&&y||!E&&y||!M)return-1}return 0}function WL(a,c,f){for(var h=-1,y=a.criteria,S=c.criteria,E=y.length,R=f.length;++h<E;){var M=u0(y[h],S[h]);if(M){if(h>=R)return M;var $=f[h];return M*($=="desc"?-1:1)}}return a.index-c.index}function p0(a,c,f,h){for(var y=-1,S=a.length,E=f.length,R=-1,M=c.length,$=Et(S-E,0),j=H(M+$),G=!h;++R<M;)j[R]=c[R];for(;++y<E;)(G||y<S)&&(j[f[y]]=a[y]);for(;$--;)j[R++]=a[y++];return j}function f0(a,c,f,h){for(var y=-1,S=a.length,E=-1,R=f.length,M=-1,$=c.length,j=Et(S-R,0),G=H(j+$),J=!h;++y<j;)G[y]=a[y];for(var se=y;++M<$;)G[se+M]=c[M];for(;++E<R;)(J||y<S)&&(G[se+f[E]]=a[y++]);return G}function xr(a,c){var f=-1,h=a.length;for(c||(c=H(h));++f<h;)c[f]=a[f];return c}function Gn(a,c,f,h){var y=!f;f||(f={});for(var S=-1,E=c.length;++S<E;){var R=c[S],M=h?h(f[R],a[R],R,f,a):t;M===t&&(M=a[R]),y?Ti(f,R,M):$c(f,R,M)}return f}function $L(a,c){return Gn(a,Jx(a),c)}function jL(a,c){return Gn(a,E0(a),c)}function bp(a,c){return function(f,h){var y=ve(f)?QO:fL,S=c?c():{};return y(f,a,me(h,2),S)}}function Ga(a){return Me(function(c,f){var h=-1,y=f.length,S=y>1?f[y-1]:t,E=y>2?f[2]:t;for(S=a.length>3&&typeof S=="function"?(y--,S):t,E&&ir(f[0],f[1],E)&&(S=y<3?t:S,y=1),c=Ze(c);++h<y;){var R=f[h];R&&a(c,R,h,S)}return c})}function m0(a,c){return function(f,h){if(f==null)return f;if(!Tr(f))return a(f,h);for(var y=f.length,S=c?y:-1,E=Ze(f);(c?S--:++S<y)&&h(E[S],S,E)!==!1;);return f}}function d0(a){return function(c,f,h){for(var y=-1,S=Ze(c),E=h(c),R=E.length;R--;){var M=E[a?R:++y];if(f(S[M],M,S)===!1)break}return c}}function qL(a,c,f){var h=c&b,y=Kc(a);function S(){var E=this&&this!==At&&this instanceof S?y:a;return E.apply(h?f:this,arguments)}return S}function h0(a){return function(c){c=je(c);var f=Ba(c)?An(c):t,h=f?f[0]:c.charAt(0),y=f?Xi(f,1).join(""):c.slice(1);return h[a]()+y}}function Ka(a){return function(c){return yx(mE(fE(c).replace(OO,"")),a,"")}}function Kc(a){return function(){var c=arguments;switch(c.length){case 0:return new a;case 1:return new a(c[0]);case 2:return new a(c[0],c[1]);case 3:return new a(c[0],c[1],c[2]);case 4:return new a(c[0],c[1],c[2],c[3]);case 5:return new a(c[0],c[1],c[2],c[3],c[4]);case 6:return new a(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new a(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var f=za(a.prototype),h=a.apply(f,c);return ct(h)?h:f}}function zL(a,c,f){var h=Kc(a);function y(){for(var S=arguments.length,E=H(S),R=S,M=Qa(y);R--;)E[R]=arguments[R];var $=S<3&&E[0]!==M&&E[S-1]!==M?[]:zi(E,M);if(S-=$.length,S<f)return S0(a,c,wp,y.placeholder,t,E,$,t,t,f-S);var j=this&&this!==At&&this instanceof y?h:a;return Or(j,this,E)}return y}function g0(a){return function(c,f,h){var y=Ze(c);if(!Tr(c)){var S=me(f,3);c=Mt(c),f=function(R){return S(y[R],R,y)}}var E=a(c,f,h);return E>-1?y[S?c[E]:E]:t}}function y0(a){return vi(function(c){var f=c.length,h=f,y=an.prototype.thru;for(a&&c.reverse();h--;){var S=c[h];if(typeof S!="function")throw new on(i);if(y&&!E&&kp(S)=="wrapper")var E=new an([],!0)}for(h=E?h:f;++h<f;){S=c[h];var R=kp(S),M=R=="wrapper"?Yx(S):t;M&&tT(M[0])&&M[1]==(ae|F|Z|le)&&!M[4].length&&M[9]==1?E=E[kp(M[0])].apply(E,M[3]):E=S.length==1&&tT(S)?E[R]():E.thru(S)}return function(){var $=arguments,j=$[0];if(E&&$.length==1&&ve(j))return E.plant(j).value();for(var G=0,J=f?c[G].apply(this,$):j;++G<f;)J=c[G].call(this,J);return J}})}function wp(a,c,f,h,y,S,E,R,M,$){var j=c&ae,G=c&b,J=c&v,se=c&(F|V),he=c&st,Pe=J?t:Kc(a);function ge(){for(var Ie=arguments.length,Ne=H(Ie),Hr=Ie;Hr--;)Ne[Hr]=arguments[Hr];if(se)var or=Qa(ge),Vr=iN(Ne,or);if(h&&(Ne=p0(Ne,h,y,se)),S&&(Ne=f0(Ne,S,E,se)),Ie-=Vr,se&&Ie<$){var gt=zi(Ne,or);return S0(a,c,wp,ge.placeholder,f,Ne,gt,R,M,$-Ie)}var Fn=G?f:this,Ei=J?Fn[a]:a;return Ie=Ne.length,R?Ne=fU(Ne,R):he&&Ie>1&&Ne.reverse(),j&&M<Ie&&(Ne.length=M),this&&this!==At&&this instanceof ge&&(Ei=Pe||Kc(Ei)),Ei.apply(Fn,Ne)}return ge}function x0(a,c){return function(f,h){return SL(f,a,c(h),{})}}function _p(a,c){return function(f,h){var y;if(f===t&&h===t)return c;if(f!==t&&(y=f),h!==t){if(y===t)return h;typeof f=="string"||typeof h=="string"?(f=Lr(f),h=Lr(h)):(f=n0(f),h=n0(h)),y=a(f,h)}return y}}function Gx(a){return vi(function(c){return c=nt(c,Nr(me())),Me(function(f){var h=this;return a(c,function(y){return Or(y,h,f)})})})}function Ep(a,c){c=c===t?" ":Lr(c);var f=c.length;if(f<2)return f?Vx(c,a):c;var h=Vx(c,pp(a/Wa(c)));return Ba(c)?Xi(An(h),0,a).join(""):h.slice(0,a)}function GL(a,c,f,h){var y=c&b,S=Kc(a);function E(){for(var R=-1,M=arguments.length,$=-1,j=h.length,G=H(j+M),J=this&&this!==At&&this instanceof E?S:a;++$<j;)G[$]=h[$];for(;M--;)G[$++]=arguments[++R];return Or(J,y?f:this,G)}return E}function T0(a){return function(c,f,h){return h&&typeof h!="number"&&ir(c,f,h)&&(f=h=t),c=_i(c),f===t?(f=c,c=0):f=_i(f),h=h===t?c<f?1:-1:_i(h),FL(c,f,h,a)}}function Rp(a){return function(c,f){return typeof c=="string"&&typeof f=="string"||(c=un(c),f=un(f)),a(c,f)}}function S0(a,c,f,h,y,S,E,R,M,$){var j=c&F,G=j?E:t,J=j?t:E,se=j?S:t,he=j?t:S;c|=j?Z:oe,c&=~(j?oe:Z),c&I||(c&=~(b|v));var Pe=[a,c,y,se,G,he,J,R,M,$],ge=f.apply(t,Pe);return tT(a)&&F0(ge,Pe),ge.placeholder=h,I0(ge,a,c)}function Kx(a){var c=_t[a];return function(f,h){if(f=un(f),h=h==null?0:zt(Ee(h),292),h&&I_(f)){var y=(je(f)+"e").split("e"),S=c(y[0]+"e"+(+y[1]+h));return y=(je(S)+"e").split("e"),+(y[0]+"e"+(+y[1]-h))}return c(f)}}var KL=ja&&1/tp(new ja([,-0]))[1]==Y?function(a){return new ja(a)}:gT;function v0(a){return function(c){var f=Gt(c);return f==kn?_x(c):f==Pn?pN(c):nN(c,a(c))}}function Si(a,c,f,h,y,S,E,R){var M=c&v;if(!M&&typeof a!="function")throw new on(i);var $=h?h.length:0;if($||(c&=~(Z|oe),h=y=t),E=E===t?E:Et(Ee(E),0),R=R===t?R:Ee(R),$-=y?y.length:0,c&oe){var j=h,G=y;h=y=t}var J=M?t:Yx(a),se=[a,c,f,h,y,j,G,S,E,R];if(J&&lU(se,J),a=se[0],c=se[1],f=se[2],h=se[3],y=se[4],R=se[9]=se[9]===t?M?0:a.length:Et(se[9]-$,0),!R&&c&(F|V)&&(c&=~(F|V)),!c||c==b)var he=qL(a,c,f);else c==F||c==V?he=zL(a,c,R):(c==Z||c==(b|Z))&&!y.length?he=GL(a,c,f,h):he=wp.apply(t,se);var Pe=J?t0:F0;return I0(Pe(he,se),a,c)}function b0(a,c,f,h){return a===t||Dn(a,$a[f])&&!qe.call(h,f)?c:a}function w0(a,c,f,h,y,S){return ct(a)&&ct(c)&&(S.set(c,a),Tp(a,c,t,w0,S),S.delete(c)),a}function QL(a){return Yc(a)?t:a}function _0(a,c,f,h,y,S){var E=f&g,R=a.length,M=c.length;if(R!=M&&!(E&&M>R))return!1;var $=S.get(a),j=S.get(c);if($&&j)return $==c&&j==a;var G=-1,J=!0,se=f&x?new Wo:t;for(S.set(a,c),S.set(c,a);++G<R;){var he=a[G],Pe=c[G];if(h)var ge=E?h(Pe,he,G,c,a,S):h(he,Pe,G,a,c,S);if(ge!==t){if(ge)continue;J=!1;break}if(se){if(!xx(c,function(Ie,Ne){if(!Lc(se,Ne)&&(he===Ie||y(he,Ie,f,h,S)))return se.push(Ne)})){J=!1;break}}else if(!(he===Pe||y(he,Pe,f,h,S))){J=!1;break}}return S.delete(a),S.delete(c),J}function ZL(a,c,f,h,y,S,E){switch(f){case Ua:if(a.byteLength!=c.byteLength||a.byteOffset!=c.byteOffset)return!1;a=a.buffer,c=c.buffer;case Nc:return!(a.byteLength!=c.byteLength||!S(new sp(a),new sp(c)));case Rn:case tn:case Fc:return Dn(+a,+c);case hi:return a.name==c.name&&a.message==c.message;case Ic:case Cc:return a==c+"";case kn:var R=_x;case Pn:var M=h&g;if(R||(R=tp),a.size!=c.size&&!M)return!1;var $=E.get(a);if($)return $==c;h|=x,E.set(a,c);var j=_0(R(a),R(c),h,y,S,E);return E.delete(a),j;case Qu:if(Wc)return Wc.call(a)==Wc.call(c)}return!1}function YL(a,c,f,h,y,S){var E=f&g,R=Qx(a),M=R.length,$=Qx(c),j=$.length;if(M!=j&&!E)return!1;for(var G=M;G--;){var J=R[G];if(!(E?J in c:qe.call(c,J)))return!1}var se=S.get(a),he=S.get(c);if(se&&he)return se==c&&he==a;var Pe=!0;S.set(a,c),S.set(c,a);for(var ge=E;++G<M;){J=R[G];var Ie=a[J],Ne=c[J];if(h)var Hr=E?h(Ne,Ie,J,c,a,S):h(Ie,Ne,J,a,c,S);if(!(Hr===t?Ie===Ne||y(Ie,Ne,f,h,S):Hr)){Pe=!1;break}ge||(ge=J=="constructor")}if(Pe&&!ge){var or=a.constructor,Vr=c.constructor;or!=Vr&&"constructor"in a&&"constructor"in c&&!(typeof or=="function"&&or instanceof or&&typeof Vr=="function"&&Vr instanceof Vr)&&(Pe=!1)}return S.delete(a),S.delete(c),Pe}function vi(a){return nT(M0(a,t,H0),a+"")}function Qx(a){return j_(a,Mt,Jx)}function Zx(a){return j_(a,Sr,E0)}var Yx=mp?function(a){return mp.get(a)}:gT;function kp(a){for(var c=a.name+"",f=qa[c],h=qe.call(qa,c)?f.length:0;h--;){var y=f[h],S=y.func;if(S==null||S==a)return y.name}return c}function Qa(a){var c=qe.call(T,"placeholder")?T:a;return c.placeholder}function me(){var a=T.iteratee||dT;return a=a===dT?G_:a,arguments.length?a(arguments[0],arguments[1]):a}function Pp(a,c){var f=a.__data__;return oU(c)?f[typeof c=="string"?"string":"hash"]:f.map}function Xx(a){for(var c=Mt(a),f=c.length;f--;){var h=c[f],y=a[h];c[f]=[h,y,P0(y)]}return c}function qo(a,c){var f=cN(a,c);return z_(f)?f:t}function XL(a){var c=qe.call(a,Vo),f=a[Vo];try{a[Vo]=t;var h=!0}catch{}var y=op.call(a);return h&&(c?a[Vo]=f:delete a[Vo]),y}var Jx=Rx?function(a){return a==null?[]:(a=Ze(a),ji(Rx(a),function(c){return D_.call(a,c)}))}:yT,E0=Rx?function(a){for(var c=[];a;)qi(c,Jx(a)),a=cp(a);return c}:yT,Gt=nr;(kx&&Gt(new kx(new ArrayBuffer(1)))!=Ua||Hc&&Gt(new Hc)!=kn||Px&&Gt(Px.resolve())!=Bw||ja&&Gt(new ja)!=Pn||Vc&&Gt(new Vc)!=Oc)&&(Gt=function(a){var c=nr(a),f=c==gi?a.constructor:t,h=f?zo(f):"";if(h)switch(h){case CN:return Ua;case ON:return kn;case NN:return Bw;case LN:return Pn;case UN:return Oc}return c});function JL(a,c,f){for(var h=-1,y=f.length;++h<y;){var S=f[h],E=S.size;switch(S.type){case"drop":a+=E;break;case"dropRight":c-=E;break;case"take":c=zt(c,a+E);break;case"takeRight":a=Et(a,c-E);break}}return{start:a,end:c}}function eU(a){var c=a.match(aO);return c?c[1].split(sO):[]}function R0(a,c,f){c=Yi(c,a);for(var h=-1,y=c.length,S=!1;++h<y;){var E=Kn(c[h]);if(!(S=a!=null&&f(a,E)))break;a=a[E]}return S||++h!=y?S:(y=a==null?0:a.length,!!y&&Op(y)&&bi(E,y)&&(ve(a)||Go(a)))}function tU(a){var c=a.length,f=new a.constructor(c);return c&&typeof a[0]=="string"&&qe.call(a,"index")&&(f.index=a.index,f.input=a.input),f}function k0(a){return typeof a.constructor=="function"&&!Qc(a)?za(cp(a)):{}}function rU(a,c,f){var h=a.constructor;switch(c){case Nc:return zx(a);case Rn:case tn:return new h(+a);case Ua:return HL(a,f);case Xy:case Jy:case ex:case tx:case rx:case nx:case ix:case ox:case ax:return l0(a,f);case kn:return new h;case Fc:case Cc:return new h(a);case Ic:return VL(a);case Pn:return new h;case Qu:return BL(a)}}function nU(a,c){var f=c.length;if(!f)return a;var h=f-1;return c[h]=(f>1?"& ":"")+c[h],c=c.join(f>2?", ":" "),a.replace(oO,`{
/* [wrapped with `+c+`] */
`)}function iU(a){return ve(a)||Go(a)||!!(F_&&a&&a[F_])}function bi(a,c){var f=typeof a;return c=c??X,!!c&&(f=="number"||f!="symbol"&&gO.test(a))&&a>-1&&a%1==0&&a<c}function ir(a,c,f){if(!ct(f))return!1;var h=typeof c;return(h=="number"?Tr(f)&&bi(c,f.length):h=="string"&&c in f)?Dn(f[c],a):!1}function eT(a,c){if(ve(a))return!1;var f=typeof a;return f=="number"||f=="symbol"||f=="boolean"||a==null||Ur(a)?!0:tO.test(a)||!eO.test(a)||c!=null&&a in Ze(c)}function oU(a){var c=typeof a;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?a!=="__proto__":a===null}function tT(a){var c=kp(a),f=T[c];if(typeof f!="function"||!(c in Oe.prototype))return!1;if(a===f)return!0;var h=Yx(f);return!!h&&a===h[0]}function aU(a){return!!P_&&P_ in a}var sU=np?wi:xT;function Qc(a){var c=a&&a.constructor,f=typeof c=="function"&&c.prototype||$a;return a===f}function P0(a){return a===a&&!ct(a)}function A0(a,c){return function(f){return f==null?!1:f[a]===c&&(c!==t||a in Ze(f))}}function cU(a){var c=Ip(a,function(h){return f.size===l&&f.clear(),h}),f=c.cache;return c}function lU(a,c){var f=a[1],h=c[1],y=f|h,S=y<(b|v|ae),E=h==ae&&f==F||h==ae&&f==le&&a[7].length<=c[8]||h==(ae|le)&&c[7].length<=c[8]&&f==F;if(!(S||E))return a;h&b&&(a[2]=c[2],y|=f&b?0:I);var R=c[3];if(R){var M=a[3];a[3]=M?p0(M,R,c[4]):R,a[4]=M?zi(a[3],u):c[4]}return R=c[5],R&&(M=a[5],a[5]=M?f0(M,R,c[6]):R,a[6]=M?zi(a[5],u):c[6]),R=c[7],R&&(a[7]=R),h&ae&&(a[8]=a[8]==null?c[8]:zt(a[8],c[8])),a[9]==null&&(a[9]=c[9]),a[0]=c[0],a[1]=y,a}function uU(a){var c=[];if(a!=null)for(var f in Ze(a))c.push(f);return c}function pU(a){return op.call(a)}function M0(a,c,f){return c=Et(c===t?a.length-1:c,0),function(){for(var h=arguments,y=-1,S=Et(h.length-c,0),E=H(S);++y<S;)E[y]=h[c+y];y=-1;for(var R=H(c+1);++y<c;)R[y]=h[y];return R[c]=f(E),Or(a,this,R)}}function D0(a,c){return c.length<2?a:jo(a,cn(c,0,-1))}function fU(a,c){for(var f=a.length,h=zt(c.length,f),y=xr(a);h--;){var S=c[h];a[h]=bi(S,f)?y[S]:t}return a}function rT(a,c){if(!(c==="constructor"&&typeof a[c]=="function")&&c!="__proto__")return a[c]}var F0=C0(t0),Zc=kN||function(a,c){return At.setTimeout(a,c)},nT=C0(OL);function I0(a,c,f){var h=c+"";return nT(a,nU(h,mU(eU(h),f)))}function C0(a){var c=0,f=0;return function(){var h=DN(),y=N-(h-f);if(f=h,y>0){if(++c>=U)return arguments[0]}else c=0;return a.apply(t,arguments)}}function Ap(a,c){var f=-1,h=a.length,y=h-1;for(c=c===t?h:c;++f<c;){var S=Hx(f,y),E=a[S];a[S]=a[f],a[f]=E}return a.length=c,a}var O0=cU(function(a){var c=[];return a.charCodeAt(0)===46&&c.push(""),a.replace(rO,function(f,h,y,S){c.push(y?S.replace(uO,"$1"):h||f)}),c});function Kn(a){if(typeof a=="string"||Ur(a))return a;var c=a+"";return c=="0"&&1/a==-Y?"-0":c}function zo(a){if(a!=null){try{return ip.call(a)}catch{}try{return a+""}catch{}}return""}function mU(a,c){return nn(di,function(f){var h="_."+f[0];c&f[1]&&!Ju(a,h)&&a.push(h)}),a.sort()}function N0(a){if(a instanceof Oe)return a.clone();var c=new an(a.__wrapped__,a.__chain__);return c.__actions__=xr(a.__actions__),c.__index__=a.__index__,c.__values__=a.__values__,c}function dU(a,c,f){(f?ir(a,c,f):c===t)?c=1:c=Et(Ee(c),0);var h=a==null?0:a.length;if(!h||c<1)return[];for(var y=0,S=0,E=H(pp(h/c));y<h;)E[S++]=cn(a,y,y+=c);return E}function hU(a){for(var c=-1,f=a==null?0:a.length,h=0,y=[];++c<f;){var S=a[c];S&&(y[h++]=S)}return y}function gU(){var a=arguments.length;if(!a)return[];for(var c=H(a-1),f=arguments[0],h=a;h--;)c[h-1]=arguments[h];return qi(ve(f)?xr(f):[f],Ut(c,1))}var yU=Me(function(a,c){return ht(a)?jc(a,Ut(c,1,ht,!0)):[]}),xU=Me(function(a,c){var f=ln(c);return ht(f)&&(f=t),ht(a)?jc(a,Ut(c,1,ht,!0),me(f,2)):[]}),TU=Me(function(a,c){var f=ln(c);return ht(f)&&(f=t),ht(a)?jc(a,Ut(c,1,ht,!0),t,f):[]});function SU(a,c,f){var h=a==null?0:a.length;return h?(c=f||c===t?1:Ee(c),cn(a,c<0?0:c,h)):[]}function vU(a,c,f){var h=a==null?0:a.length;return h?(c=f||c===t?1:Ee(c),c=h-c,cn(a,0,c<0?0:c)):[]}function bU(a,c){return a&&a.length?vp(a,me(c,3),!0,!0):[]}function wU(a,c){return a&&a.length?vp(a,me(c,3),!0):[]}function _U(a,c,f,h){var y=a==null?0:a.length;return y?(f&&typeof f!="number"&&ir(a,c,f)&&(f=0,h=y),gL(a,c,f,h)):[]}function L0(a,c,f){var h=a==null?0:a.length;if(!h)return-1;var y=f==null?0:Ee(f);return y<0&&(y=Et(h+y,0)),ep(a,me(c,3),y)}function U0(a,c,f){var h=a==null?0:a.length;if(!h)return-1;var y=h-1;return f!==t&&(y=Ee(f),y=f<0?Et(h+y,0):zt(y,h-1)),ep(a,me(c,3),y,!0)}function H0(a){var c=a==null?0:a.length;return c?Ut(a,1):[]}function EU(a){var c=a==null?0:a.length;return c?Ut(a,Y):[]}function RU(a,c){var f=a==null?0:a.length;return f?(c=c===t?1:Ee(c),Ut(a,c)):[]}function kU(a){for(var c=-1,f=a==null?0:a.length,h={};++c<f;){var y=a[c];h[y[0]]=y[1]}return h}function V0(a){return a&&a.length?a[0]:t}function PU(a,c,f){var h=a==null?0:a.length;if(!h)return-1;var y=f==null?0:Ee(f);return y<0&&(y=Et(h+y,0)),Va(a,c,y)}function AU(a){var c=a==null?0:a.length;return c?cn(a,0,-1):[]}var MU=Me(function(a){var c=nt(a,jx);return c.length&&c[0]===a[0]?Cx(c):[]}),DU=Me(function(a){var c=ln(a),f=nt(a,jx);return c===ln(f)?c=t:f.pop(),f.length&&f[0]===a[0]?Cx(f,me(c,2)):[]}),FU=Me(function(a){var c=ln(a),f=nt(a,jx);return c=typeof c=="function"?c:t,c&&f.pop(),f.length&&f[0]===a[0]?Cx(f,t,c):[]});function IU(a,c){return a==null?"":AN.call(a,c)}function ln(a){var c=a==null?0:a.length;return c?a[c-1]:t}function CU(a,c,f){var h=a==null?0:a.length;if(!h)return-1;var y=h;return f!==t&&(y=Ee(f),y=y<0?Et(h+y,0):zt(y,h-1)),c===c?mN(a,c,y):ep(a,S_,y,!0)}function OU(a,c){return a&&a.length?Y_(a,Ee(c)):t}var NU=Me(B0);function B0(a,c){return a&&a.length&&c&&c.length?Ux(a,c):a}function LU(a,c,f){return a&&a.length&&c&&c.length?Ux(a,c,me(f,2)):a}function UU(a,c,f){return a&&a.length&&c&&c.length?Ux(a,c,t,f):a}var HU=vi(function(a,c){var f=a==null?0:a.length,h=Mx(a,c);return e0(a,nt(c,function(y){return bi(y,f)?+y:y}).sort(u0)),h});function VU(a,c){var f=[];if(!(a&&a.length))return f;var h=-1,y=[],S=a.length;for(c=me(c,3);++h<S;){var E=a[h];c(E,h,a)&&(f.push(E),y.push(h))}return e0(a,y),f}function iT(a){return a==null?a:IN.call(a)}function BU(a,c,f){var h=a==null?0:a.length;return h?(f&&typeof f!="number"&&ir(a,c,f)?(c=0,f=h):(c=c==null?0:Ee(c),f=f===t?h:Ee(f)),cn(a,c,f)):[]}function WU(a,c){return Sp(a,c)}function $U(a,c,f){return Bx(a,c,me(f,2))}function jU(a,c){var f=a==null?0:a.length;if(f){var h=Sp(a,c);if(h<f&&Dn(a[h],c))return h}return-1}function qU(a,c){return Sp(a,c,!0)}function zU(a,c,f){return Bx(a,c,me(f,2),!0)}function GU(a,c){var f=a==null?0:a.length;if(f){var h=Sp(a,c,!0)-1;if(Dn(a[h],c))return h}return-1}function KU(a){return a&&a.length?r0(a):[]}function QU(a,c){return a&&a.length?r0(a,me(c,2)):[]}function ZU(a){var c=a==null?0:a.length;return c?cn(a,1,c):[]}function YU(a,c,f){return a&&a.length?(c=f||c===t?1:Ee(c),cn(a,0,c<0?0:c)):[]}function XU(a,c,f){var h=a==null?0:a.length;return h?(c=f||c===t?1:Ee(c),c=h-c,cn(a,c<0?0:c,h)):[]}function JU(a,c){return a&&a.length?vp(a,me(c,3),!1,!0):[]}function eH(a,c){return a&&a.length?vp(a,me(c,3)):[]}var tH=Me(function(a){return Zi(Ut(a,1,ht,!0))}),rH=Me(function(a){var c=ln(a);return ht(c)&&(c=t),Zi(Ut(a,1,ht,!0),me(c,2))}),nH=Me(function(a){var c=ln(a);return c=typeof c=="function"?c:t,Zi(Ut(a,1,ht,!0),t,c)});function iH(a){return a&&a.length?Zi(a):[]}function oH(a,c){return a&&a.length?Zi(a,me(c,2)):[]}function aH(a,c){return c=typeof c=="function"?c:t,a&&a.length?Zi(a,t,c):[]}function oT(a){if(!(a&&a.length))return[];var c=0;return a=ji(a,function(f){if(ht(f))return c=Et(f.length,c),!0}),bx(c,function(f){return nt(a,Tx(f))})}function W0(a,c){if(!(a&&a.length))return[];var f=oT(a);return c==null?f:nt(f,function(h){return Or(c,t,h)})}var sH=Me(function(a,c){return ht(a)?jc(a,c):[]}),cH=Me(function(a){return $x(ji(a,ht))}),lH=Me(function(a){var c=ln(a);return ht(c)&&(c=t),$x(ji(a,ht),me(c,2))}),uH=Me(function(a){var c=ln(a);return c=typeof c=="function"?c:t,$x(ji(a,ht),t,c)}),pH=Me(oT);function fH(a,c){return a0(a||[],c||[],$c)}function mH(a,c){return a0(a||[],c||[],Gc)}var dH=Me(function(a){var c=a.length,f=c>1?a[c-1]:t;return f=typeof f=="function"?(a.pop(),f):t,W0(a,f)});function $0(a){var c=T(a);return c.__chain__=!0,c}function hH(a,c){return c(a),a}function Mp(a,c){return c(a)}var gH=vi(function(a){var c=a.length,f=c?a[0]:0,h=this.__wrapped__,y=function(S){return Mx(S,a)};return c>1||this.__actions__.length||!(h instanceof Oe)||!bi(f)?this.thru(y):(h=h.slice(f,+f+(c?1:0)),h.__actions__.push({func:Mp,args:[y],thisArg:t}),new an(h,this.__chain__).thru(function(S){return c&&!S.length&&S.push(t),S}))});function yH(){return $0(this)}function xH(){return new an(this.value(),this.__chain__)}function TH(){this.__values__===t&&(this.__values__=nE(this.value()));var a=this.__index__>=this.__values__.length,c=a?t:this.__values__[this.__index__++];return{done:a,value:c}}function SH(){return this}function vH(a){for(var c,f=this;f instanceof hp;){var h=N0(f);h.__index__=0,h.__values__=t,c?y.__wrapped__=h:c=h;var y=h;f=f.__wrapped__}return y.__wrapped__=a,c}function bH(){var a=this.__wrapped__;if(a instanceof Oe){var c=a;return this.__actions__.length&&(c=new Oe(this)),c=c.reverse(),c.__actions__.push({func:Mp,args:[iT],thisArg:t}),new an(c,this.__chain__)}return this.thru(iT)}function wH(){return o0(this.__wrapped__,this.__actions__)}var _H=bp(function(a,c,f){qe.call(a,f)?++a[f]:Ti(a,f,1)});function EH(a,c,f){var h=ve(a)?x_:hL;return f&&ir(a,c,f)&&(c=t),h(a,me(c,3))}function RH(a,c){var f=ve(a)?ji:W_;return f(a,me(c,3))}var kH=g0(L0),PH=g0(U0);function AH(a,c){return Ut(Dp(a,c),1)}function MH(a,c){return Ut(Dp(a,c),Y)}function DH(a,c,f){return f=f===t?1:Ee(f),Ut(Dp(a,c),f)}function j0(a,c){var f=ve(a)?nn:Qi;return f(a,me(c,3))}function q0(a,c){var f=ve(a)?ZO:B_;return f(a,me(c,3))}var FH=bp(function(a,c,f){qe.call(a,f)?a[f].push(c):Ti(a,f,[c])});function IH(a,c,f,h){a=Tr(a)?a:Ya(a),f=f&&!h?Ee(f):0;var y=a.length;return f<0&&(f=Et(y+f,0)),Np(a)?f<=y&&a.indexOf(c,f)>-1:!!y&&Va(a,c,f)>-1}var CH=Me(function(a,c,f){var h=-1,y=typeof c=="function",S=Tr(a)?H(a.length):[];return Qi(a,function(E){S[++h]=y?Or(c,E,f):qc(E,c,f)}),S}),OH=bp(function(a,c,f){Ti(a,f,c)});function Dp(a,c){var f=ve(a)?nt:K_;return f(a,me(c,3))}function NH(a,c,f,h){return a==null?[]:(ve(c)||(c=c==null?[]:[c]),f=h?t:f,ve(f)||(f=f==null?[]:[f]),X_(a,c,f))}var LH=bp(function(a,c,f){a[f?0:1].push(c)},function(){return[[],[]]});function UH(a,c,f){var h=ve(a)?yx:b_,y=arguments.length<3;return h(a,me(c,4),f,y,Qi)}function HH(a,c,f){var h=ve(a)?YO:b_,y=arguments.length<3;return h(a,me(c,4),f,y,B_)}function VH(a,c){var f=ve(a)?ji:W_;return f(a,Cp(me(c,3)))}function BH(a){var c=ve(a)?L_:IL;return c(a)}function WH(a,c,f){(f?ir(a,c,f):c===t)?c=1:c=Ee(c);var h=ve(a)?uL:CL;return h(a,c)}function $H(a){var c=ve(a)?pL:NL;return c(a)}function jH(a){if(a==null)return 0;if(Tr(a))return Np(a)?Wa(a):a.length;var c=Gt(a);return c==kn||c==Pn?a.size:Nx(a).length}function qH(a,c,f){var h=ve(a)?xx:LL;return f&&ir(a,c,f)&&(c=t),h(a,me(c,3))}var zH=Me(function(a,c){if(a==null)return[];var f=c.length;return f>1&&ir(a,c[0],c[1])?c=[]:f>2&&ir(c[0],c[1],c[2])&&(c=[c[0]]),X_(a,Ut(c,1),[])}),Fp=RN||function(){return At.Date.now()};function GH(a,c){if(typeof c!="function")throw new on(i);return a=Ee(a),function(){if(--a<1)return c.apply(this,arguments)}}function z0(a,c,f){return c=f?t:c,c=a&&c==null?a.length:c,Si(a,ae,t,t,t,t,c)}function G0(a,c){var f;if(typeof c!="function")throw new on(i);return a=Ee(a),function(){return--a>0&&(f=c.apply(this,arguments)),a<=1&&(c=t),f}}var aT=Me(function(a,c,f){var h=b;if(f.length){var y=zi(f,Qa(aT));h|=Z}return Si(a,h,c,f,y)}),K0=Me(function(a,c,f){var h=b|v;if(f.length){var y=zi(f,Qa(K0));h|=Z}return Si(c,h,a,f,y)});function Q0(a,c,f){c=f?t:c;var h=Si(a,F,t,t,t,t,t,c);return h.placeholder=Q0.placeholder,h}function Z0(a,c,f){c=f?t:c;var h=Si(a,V,t,t,t,t,t,c);return h.placeholder=Z0.placeholder,h}function Y0(a,c,f){var h,y,S,E,R,M,$=0,j=!1,G=!1,J=!0;if(typeof a!="function")throw new on(i);c=un(c)||0,ct(f)&&(j=!!f.leading,G="maxWait"in f,S=G?Et(un(f.maxWait)||0,c):S,J="trailing"in f?!!f.trailing:J);function se(gt){var Fn=h,Ei=y;return h=y=t,$=gt,E=a.apply(Ei,Fn),E}function he(gt){return $=gt,R=Zc(Ie,c),j?se(gt):E}function Pe(gt){var Fn=gt-M,Ei=gt-$,gE=c-Fn;return G?zt(gE,S-Ei):gE}function ge(gt){var Fn=gt-M,Ei=gt-$;return M===t||Fn>=c||Fn<0||G&&Ei>=S}function Ie(){var gt=Fp();if(ge(gt))return Ne(gt);R=Zc(Ie,Pe(gt))}function Ne(gt){return R=t,J&&h?se(gt):(h=y=t,E)}function Hr(){R!==t&&s0(R),$=0,h=M=y=R=t}function or(){return R===t?E:Ne(Fp())}function Vr(){var gt=Fp(),Fn=ge(gt);if(h=arguments,y=this,M=gt,Fn){if(R===t)return he(M);if(G)return s0(R),R=Zc(Ie,c),se(M)}return R===t&&(R=Zc(Ie,c)),E}return Vr.cancel=Hr,Vr.flush=or,Vr}var KH=Me(function(a,c){return V_(a,1,c)}),QH=Me(function(a,c,f){return V_(a,un(c)||0,f)});function ZH(a){return Si(a,st)}function Ip(a,c){if(typeof a!="function"||c!=null&&typeof c!="function")throw new on(i);var f=function(){var h=arguments,y=c?c.apply(this,h):h[0],S=f.cache;if(S.has(y))return S.get(y);var E=a.apply(this,h);return f.cache=S.set(y,E)||S,E};return f.cache=new(Ip.Cache||xi),f}Ip.Cache=xi;function Cp(a){if(typeof a!="function")throw new on(i);return function(){var c=arguments;switch(c.length){case 0:return!a.call(this);case 1:return!a.call(this,c[0]);case 2:return!a.call(this,c[0],c[1]);case 3:return!a.call(this,c[0],c[1],c[2])}return!a.apply(this,c)}}function YH(a){return G0(2,a)}var XH=UL(function(a,c){c=c.length==1&&ve(c[0])?nt(c[0],Nr(me())):nt(Ut(c,1),Nr(me()));var f=c.length;return Me(function(h){for(var y=-1,S=zt(h.length,f);++y<S;)h[y]=c[y].call(this,h[y]);return Or(a,this,h)})}),sT=Me(function(a,c){var f=zi(c,Qa(sT));return Si(a,Z,t,c,f)}),X0=Me(function(a,c){var f=zi(c,Qa(X0));return Si(a,oe,t,c,f)}),JH=vi(function(a,c){return Si(a,le,t,t,t,c)});function e2(a,c){if(typeof a!="function")throw new on(i);return c=c===t?c:Ee(c),Me(a,c)}function t2(a,c){if(typeof a!="function")throw new on(i);return c=c==null?0:Et(Ee(c),0),Me(function(f){var h=f[c],y=Xi(f,0,c);return h&&qi(y,h),Or(a,this,y)})}function r2(a,c,f){var h=!0,y=!0;if(typeof a!="function")throw new on(i);return ct(f)&&(h="leading"in f?!!f.leading:h,y="trailing"in f?!!f.trailing:y),Y0(a,c,{leading:h,maxWait:c,trailing:y})}function n2(a){return z0(a,1)}function i2(a,c){return sT(qx(c),a)}function o2(){if(!arguments.length)return[];var a=arguments[0];return ve(a)?a:[a]}function a2(a){return sn(a,d)}function s2(a,c){return c=typeof c=="function"?c:t,sn(a,d,c)}function c2(a){return sn(a,p|d)}function l2(a,c){return c=typeof c=="function"?c:t,sn(a,p|d,c)}function u2(a,c){return c==null||H_(a,c,Mt(c))}function Dn(a,c){return a===c||a!==a&&c!==c}var p2=Rp(Ix),f2=Rp(function(a,c){return a>=c}),Go=q_(function(){return arguments}())?q_:function(a){return ft(a)&&qe.call(a,"callee")&&!D_.call(a,"callee")},ve=H.isArray,m2=f_?Nr(f_):vL;function Tr(a){return a!=null&&Op(a.length)&&!wi(a)}function ht(a){return ft(a)&&Tr(a)}function d2(a){return a===!0||a===!1||ft(a)&&nr(a)==Rn}var Ji=PN||xT,h2=m_?Nr(m_):bL;function g2(a){return ft(a)&&a.nodeType===1&&!Yc(a)}function y2(a){if(a==null)return!0;if(Tr(a)&&(ve(a)||typeof a=="string"||typeof a.splice=="function"||Ji(a)||Za(a)||Go(a)))return!a.length;var c=Gt(a);if(c==kn||c==Pn)return!a.size;if(Qc(a))return!Nx(a).length;for(var f in a)if(qe.call(a,f))return!1;return!0}function x2(a,c){return zc(a,c)}function T2(a,c,f){f=typeof f=="function"?f:t;var h=f?f(a,c):t;return h===t?zc(a,c,t,f):!!h}function cT(a){if(!ft(a))return!1;var c=nr(a);return c==hi||c==Uo||typeof a.message=="string"&&typeof a.name=="string"&&!Yc(a)}function S2(a){return typeof a=="number"&&I_(a)}function wi(a){if(!ct(a))return!1;var c=nr(a);return c==La||c==Vw||c==Cr||c==j1}function J0(a){return typeof a=="number"&&a==Ee(a)}function Op(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=X}function ct(a){var c=typeof a;return a!=null&&(c=="object"||c=="function")}function ft(a){return a!=null&&typeof a=="object"}var eE=d_?Nr(d_):_L;function v2(a,c){return a===c||Ox(a,c,Xx(c))}function b2(a,c,f){return f=typeof f=="function"?f:t,Ox(a,c,Xx(c),f)}function w2(a){return tE(a)&&a!=+a}function _2(a){if(sU(a))throw new Se(n);return z_(a)}function E2(a){return a===null}function R2(a){return a==null}function tE(a){return typeof a=="number"||ft(a)&&nr(a)==Fc}function Yc(a){if(!ft(a)||nr(a)!=gi)return!1;var c=cp(a);if(c===null)return!0;var f=qe.call(c,"constructor")&&c.constructor;return typeof f=="function"&&f instanceof f&&ip.call(f)==bN}var lT=h_?Nr(h_):EL;function k2(a){return J0(a)&&a>=-X&&a<=X}var rE=g_?Nr(g_):RL;function Np(a){return typeof a=="string"||!ve(a)&&ft(a)&&nr(a)==Cc}function Ur(a){return typeof a=="symbol"||ft(a)&&nr(a)==Qu}var Za=y_?Nr(y_):kL;function P2(a){return a===t}function A2(a){return ft(a)&&Gt(a)==Oc}function M2(a){return ft(a)&&nr(a)==z1}var D2=Rp(Lx),F2=Rp(function(a,c){return a<=c});function nE(a){if(!a)return[];if(Tr(a))return Np(a)?An(a):xr(a);if(Uc&&a[Uc])return uN(a[Uc]());var c=Gt(a),f=c==kn?_x:c==Pn?tp:Ya;return f(a)}function _i(a){if(!a)return a===0?a:0;if(a=un(a),a===Y||a===-Y){var c=a<0?-1:1;return c*ne}return a===a?a:0}function Ee(a){var c=_i(a),f=c%1;return c===c?f?c-f:c:0}function iE(a){return a?$o(Ee(a),0,ie):0}function un(a){if(typeof a=="number")return a;if(Ur(a))return xe;if(ct(a)){var c=typeof a.valueOf=="function"?a.valueOf():a;a=ct(c)?c+"":c}if(typeof a!="string")return a===0?a:+a;a=w_(a);var f=mO.test(a);return f||hO.test(a)?GO(a.slice(2),f?2:8):fO.test(a)?xe:+a}function oE(a){return Gn(a,Sr(a))}function I2(a){return a?$o(Ee(a),-X,X):a===0?a:0}function je(a){return a==null?"":Lr(a)}var C2=Ga(function(a,c){if(Qc(c)||Tr(c)){Gn(c,Mt(c),a);return}for(var f in c)qe.call(c,f)&&$c(a,f,c[f])}),aE=Ga(function(a,c){Gn(c,Sr(c),a)}),Lp=Ga(function(a,c,f,h){Gn(c,Sr(c),a,h)}),O2=Ga(function(a,c,f,h){Gn(c,Mt(c),a,h)}),N2=vi(Mx);function L2(a,c){var f=za(a);return c==null?f:U_(f,c)}var U2=Me(function(a,c){a=Ze(a);var f=-1,h=c.length,y=h>2?c[2]:t;for(y&&ir(c[0],c[1],y)&&(h=1);++f<h;)for(var S=c[f],E=Sr(S),R=-1,M=E.length;++R<M;){var $=E[R],j=a[$];(j===t||Dn(j,$a[$])&&!qe.call(a,$))&&(a[$]=S[$])}return a}),H2=Me(function(a){return a.push(t,w0),Or(sE,t,a)});function V2(a,c){return T_(a,me(c,3),zn)}function B2(a,c){return T_(a,me(c,3),Fx)}function W2(a,c){return a==null?a:Dx(a,me(c,3),Sr)}function $2(a,c){return a==null?a:$_(a,me(c,3),Sr)}function j2(a,c){return a&&zn(a,me(c,3))}function q2(a,c){return a&&Fx(a,me(c,3))}function z2(a){return a==null?[]:xp(a,Mt(a))}function G2(a){return a==null?[]:xp(a,Sr(a))}function uT(a,c,f){var h=a==null?t:jo(a,c);return h===t?f:h}function K2(a,c){return a!=null&&R0(a,c,yL)}function pT(a,c){return a!=null&&R0(a,c,xL)}var Q2=x0(function(a,c,f){c!=null&&typeof c.toString!="function"&&(c=op.call(c)),a[c]=f},mT(vr)),Z2=x0(function(a,c,f){c!=null&&typeof c.toString!="function"&&(c=op.call(c)),qe.call(a,c)?a[c].push(f):a[c]=[f]},me),Y2=Me(qc);function Mt(a){return Tr(a)?N_(a):Nx(a)}function Sr(a){return Tr(a)?N_(a,!0):PL(a)}function X2(a,c){var f={};return c=me(c,3),zn(a,function(h,y,S){Ti(f,c(h,y,S),h)}),f}function J2(a,c){var f={};return c=me(c,3),zn(a,function(h,y,S){Ti(f,y,c(h,y,S))}),f}var eV=Ga(function(a,c,f){Tp(a,c,f)}),sE=Ga(function(a,c,f,h){Tp(a,c,f,h)}),tV=vi(function(a,c){var f={};if(a==null)return f;var h=!1;c=nt(c,function(S){return S=Yi(S,a),h||(h=S.length>1),S}),Gn(a,Zx(a),f),h&&(f=sn(f,p|m|d,QL));for(var y=c.length;y--;)Wx(f,c[y]);return f});function rV(a,c){return cE(a,Cp(me(c)))}var nV=vi(function(a,c){return a==null?{}:ML(a,c)});function cE(a,c){if(a==null)return{};var f=nt(Zx(a),function(h){return[h]});return c=me(c),J_(a,f,function(h,y){return c(h,y[0])})}function iV(a,c,f){c=Yi(c,a);var h=-1,y=c.length;for(y||(y=1,a=t);++h<y;){var S=a==null?t:a[Kn(c[h])];S===t&&(h=y,S=f),a=wi(S)?S.call(a):S}return a}function oV(a,c,f){return a==null?a:Gc(a,c,f)}function aV(a,c,f,h){return h=typeof h=="function"?h:t,a==null?a:Gc(a,c,f,h)}var lE=v0(Mt),uE=v0(Sr);function sV(a,c,f){var h=ve(a),y=h||Ji(a)||Za(a);if(c=me(c,4),f==null){var S=a&&a.constructor;y?f=h?new S:[]:ct(a)?f=wi(S)?za(cp(a)):{}:f={}}return(y?nn:zn)(a,function(E,R,M){return c(f,E,R,M)}),f}function cV(a,c){return a==null?!0:Wx(a,c)}function lV(a,c,f){return a==null?a:i0(a,c,qx(f))}function uV(a,c,f,h){return h=typeof h=="function"?h:t,a==null?a:i0(a,c,qx(f),h)}function Ya(a){return a==null?[]:wx(a,Mt(a))}function pV(a){return a==null?[]:wx(a,Sr(a))}function fV(a,c,f){return f===t&&(f=c,c=t),f!==t&&(f=un(f),f=f===f?f:0),c!==t&&(c=un(c),c=c===c?c:0),$o(un(a),c,f)}function mV(a,c,f){return c=_i(c),f===t?(f=c,c=0):f=_i(f),a=un(a),TL(a,c,f)}function dV(a,c,f){if(f&&typeof f!="boolean"&&ir(a,c,f)&&(c=f=t),f===t&&(typeof c=="boolean"?(f=c,c=t):typeof a=="boolean"&&(f=a,a=t)),a===t&&c===t?(a=0,c=1):(a=_i(a),c===t?(c=a,a=0):c=_i(c)),a>c){var h=a;a=c,c=h}if(f||a%1||c%1){var y=C_();return zt(a+y*(c-a+zO("1e-"+((y+"").length-1))),c)}return Hx(a,c)}var hV=Ka(function(a,c,f){return c=c.toLowerCase(),a+(f?pE(c):c)});function pE(a){return fT(je(a).toLowerCase())}function fE(a){return a=je(a),a&&a.replace(yO,oN).replace(NO,"")}function gV(a,c,f){a=je(a),c=Lr(c);var h=a.length;f=f===t?h:$o(Ee(f),0,h);var y=f;return f-=c.length,f>=0&&a.slice(f,y)==c}function yV(a){return a=je(a),a&&Y1.test(a)?a.replace($w,aN):a}function xV(a){return a=je(a),a&&nO.test(a)?a.replace(sx,"\\$&"):a}var TV=Ka(function(a,c,f){return a+(f?"-":"")+c.toLowerCase()}),SV=Ka(function(a,c,f){return a+(f?" ":"")+c.toLowerCase()}),vV=h0("toLowerCase");function bV(a,c,f){a=je(a),c=Ee(c);var h=c?Wa(a):0;if(!c||h>=c)return a;var y=(c-h)/2;return Ep(fp(y),f)+a+Ep(pp(y),f)}function wV(a,c,f){a=je(a),c=Ee(c);var h=c?Wa(a):0;return c&&h<c?a+Ep(c-h,f):a}function _V(a,c,f){a=je(a),c=Ee(c);var h=c?Wa(a):0;return c&&h<c?Ep(c-h,f)+a:a}function EV(a,c,f){return f||c==null?c=0:c&&(c=+c),FN(je(a).replace(cx,""),c||0)}function RV(a,c,f){return(f?ir(a,c,f):c===t)?c=1:c=Ee(c),Vx(je(a),c)}function kV(){var a=arguments,c=je(a[0]);return a.length<3?c:c.replace(a[1],a[2])}var PV=Ka(function(a,c,f){return a+(f?"_":"")+c.toLowerCase()});function AV(a,c,f){return f&&typeof f!="number"&&ir(a,c,f)&&(c=f=t),f=f===t?ie:f>>>0,f?(a=je(a),a&&(typeof c=="string"||c!=null&&!lT(c))&&(c=Lr(c),!c&&Ba(a))?Xi(An(a),0,f):a.split(c,f)):[]}var MV=Ka(function(a,c,f){return a+(f?" ":"")+fT(c)});function DV(a,c,f){return a=je(a),f=f==null?0:$o(Ee(f),0,a.length),c=Lr(c),a.slice(f,f+c.length)==c}function FV(a,c,f){var h=T.templateSettings;f&&ir(a,c,f)&&(c=t),a=je(a),c=Lp({},c,h,b0);var y=Lp({},c.imports,h.imports,b0),S=Mt(y),E=wx(y,S),R,M,$=0,j=c.interpolate||Zu,G="__p += '",J=Ex((c.escape||Zu).source+"|"+j.source+"|"+(j===jw?pO:Zu).source+"|"+(c.evaluate||Zu).source+"|$","g"),se="//# sourceURL="+(qe.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++BO+"]")+`
`;a.replace(J,function(ge,Ie,Ne,Hr,or,Vr){return Ne||(Ne=Hr),G+=a.slice($,Vr).replace(xO,sN),Ie&&(R=!0,G+=`' +
__e(`+Ie+`) +
'`),or&&(M=!0,G+=`';
`+or+`;
__p += '`),Ne&&(G+=`' +
((__t = (`+Ne+`)) == null ? '' : __t) +
'`),$=Vr+ge.length,ge}),G+=`';
`;var he=qe.call(c,"variable")&&c.variable;if(!he)G=`with (obj) {
`+G+`
}
`;else if(lO.test(he))throw new Se(o);G=(M?G.replace(G1,""):G).replace(K1,"$1").replace(Q1,"$1;"),G="function("+(he||"obj")+`) {
`+(he?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(R?", __e = _.escape":"")+(M?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+G+`return __p
}`;var Pe=dE(function(){return We(S,se+"return "+G).apply(t,E)});if(Pe.source=G,cT(Pe))throw Pe;return Pe}function IV(a){return je(a).toLowerCase()}function CV(a){return je(a).toUpperCase()}function OV(a,c,f){if(a=je(a),a&&(f||c===t))return w_(a);if(!a||!(c=Lr(c)))return a;var h=An(a),y=An(c),S=__(h,y),E=E_(h,y)+1;return Xi(h,S,E).join("")}function NV(a,c,f){if(a=je(a),a&&(f||c===t))return a.slice(0,k_(a)+1);if(!a||!(c=Lr(c)))return a;var h=An(a),y=E_(h,An(c))+1;return Xi(h,0,y).join("")}function LV(a,c,f){if(a=je(a),a&&(f||c===t))return a.replace(cx,"");if(!a||!(c=Lr(c)))return a;var h=An(a),y=__(h,An(c));return Xi(h,y).join("")}function UV(a,c){var f=Lt,h=pt;if(ct(c)){var y="separator"in c?c.separator:y;f="length"in c?Ee(c.length):f,h="omission"in c?Lr(c.omission):h}a=je(a);var S=a.length;if(Ba(a)){var E=An(a);S=E.length}if(f>=S)return a;var R=f-Wa(h);if(R<1)return h;var M=E?Xi(E,0,R).join(""):a.slice(0,R);if(y===t)return M+h;if(E&&(R+=M.length-R),lT(y)){if(a.slice(R).search(y)){var $,j=M;for(y.global||(y=Ex(y.source,je(qw.exec(y))+"g")),y.lastIndex=0;$=y.exec(j);)var G=$.index;M=M.slice(0,G===t?R:G)}}else if(a.indexOf(Lr(y),R)!=R){var J=M.lastIndexOf(y);J>-1&&(M=M.slice(0,J))}return M+h}function HV(a){return a=je(a),a&&Z1.test(a)?a.replace(Ww,dN):a}var VV=Ka(function(a,c,f){return a+(f?" ":"")+c.toUpperCase()}),fT=h0("toUpperCase");function mE(a,c,f){return a=je(a),c=f?t:c,c===t?lN(a)?yN(a):eN(a):a.match(c)||[]}var dE=Me(function(a,c){try{return Or(a,t,c)}catch(f){return cT(f)?f:new Se(f)}}),BV=vi(function(a,c){return nn(c,function(f){f=Kn(f),Ti(a,f,aT(a[f],a))}),a});function WV(a){var c=a==null?0:a.length,f=me();return a=c?nt(a,function(h){if(typeof h[1]!="function")throw new on(i);return[f(h[0]),h[1]]}):[],Me(function(h){for(var y=-1;++y<c;){var S=a[y];if(Or(S[0],this,h))return Or(S[1],this,h)}})}function $V(a){return dL(sn(a,p))}function mT(a){return function(){return a}}function jV(a,c){return a==null||a!==a?c:a}var qV=y0(),zV=y0(!0);function vr(a){return a}function dT(a){return G_(typeof a=="function"?a:sn(a,p))}function GV(a){return Q_(sn(a,p))}function KV(a,c){return Z_(a,sn(c,p))}var QV=Me(function(a,c){return function(f){return qc(f,a,c)}}),ZV=Me(function(a,c){return function(f){return qc(a,f,c)}});function hT(a,c,f){var h=Mt(c),y=xp(c,h);f==null&&!(ct(c)&&(y.length||!h.length))&&(f=c,c=a,a=this,y=xp(c,Mt(c)));var S=!(ct(f)&&"chain"in f)||!!f.chain,E=wi(a);return nn(y,function(R){var M=c[R];a[R]=M,E&&(a.prototype[R]=function(){var $=this.__chain__;if(S||$){var j=a(this.__wrapped__),G=j.__actions__=xr(this.__actions__);return G.push({func:M,args:arguments,thisArg:a}),j.__chain__=$,j}return M.apply(a,qi([this.value()],arguments))})}),a}function YV(){return At._===this&&(At._=wN),this}function gT(){}function XV(a){return a=Ee(a),Me(function(c){return Y_(c,a)})}var JV=Gx(nt),eB=Gx(x_),tB=Gx(xx);function hE(a){return eT(a)?Tx(Kn(a)):DL(a)}function rB(a){return function(c){return a==null?t:jo(a,c)}}var nB=T0(),iB=T0(!0);function yT(){return[]}function xT(){return!1}function oB(){return{}}function aB(){return""}function sB(){return!0}function cB(a,c){if(a=Ee(a),a<1||a>X)return[];var f=ie,h=zt(a,ie);c=me(c),a-=ie;for(var y=bx(h,c);++f<a;)c(f);return y}function lB(a){return ve(a)?nt(a,Kn):Ur(a)?[a]:xr(O0(je(a)))}function uB(a){var c=++vN;return je(a)+c}var pB=_p(function(a,c){return a+c},0),fB=Kx("ceil"),mB=_p(function(a,c){return a/c},1),dB=Kx("floor");function hB(a){return a&&a.length?yp(a,vr,Ix):t}function gB(a,c){return a&&a.length?yp(a,me(c,2),Ix):t}function yB(a){return v_(a,vr)}function xB(a,c){return v_(a,me(c,2))}function TB(a){return a&&a.length?yp(a,vr,Lx):t}function SB(a,c){return a&&a.length?yp(a,me(c,2),Lx):t}var vB=_p(function(a,c){return a*c},1),bB=Kx("round"),wB=_p(function(a,c){return a-c},0);function _B(a){return a&&a.length?vx(a,vr):0}function EB(a,c){return a&&a.length?vx(a,me(c,2)):0}return T.after=GH,T.ary=z0,T.assign=C2,T.assignIn=aE,T.assignInWith=Lp,T.assignWith=O2,T.at=N2,T.before=G0,T.bind=aT,T.bindAll=BV,T.bindKey=K0,T.castArray=o2,T.chain=$0,T.chunk=dU,T.compact=hU,T.concat=gU,T.cond=WV,T.conforms=$V,T.constant=mT,T.countBy=_H,T.create=L2,T.curry=Q0,T.curryRight=Z0,T.debounce=Y0,T.defaults=U2,T.defaultsDeep=H2,T.defer=KH,T.delay=QH,T.difference=yU,T.differenceBy=xU,T.differenceWith=TU,T.drop=SU,T.dropRight=vU,T.dropRightWhile=bU,T.dropWhile=wU,T.fill=_U,T.filter=RH,T.flatMap=AH,T.flatMapDeep=MH,T.flatMapDepth=DH,T.flatten=H0,T.flattenDeep=EU,T.flattenDepth=RU,T.flip=ZH,T.flow=qV,T.flowRight=zV,T.fromPairs=kU,T.functions=z2,T.functionsIn=G2,T.groupBy=FH,T.initial=AU,T.intersection=MU,T.intersectionBy=DU,T.intersectionWith=FU,T.invert=Q2,T.invertBy=Z2,T.invokeMap=CH,T.iteratee=dT,T.keyBy=OH,T.keys=Mt,T.keysIn=Sr,T.map=Dp,T.mapKeys=X2,T.mapValues=J2,T.matches=GV,T.matchesProperty=KV,T.memoize=Ip,T.merge=eV,T.mergeWith=sE,T.method=QV,T.methodOf=ZV,T.mixin=hT,T.negate=Cp,T.nthArg=XV,T.omit=tV,T.omitBy=rV,T.once=YH,T.orderBy=NH,T.over=JV,T.overArgs=XH,T.overEvery=eB,T.overSome=tB,T.partial=sT,T.partialRight=X0,T.partition=LH,T.pick=nV,T.pickBy=cE,T.property=hE,T.propertyOf=rB,T.pull=NU,T.pullAll=B0,T.pullAllBy=LU,T.pullAllWith=UU,T.pullAt=HU,T.range=nB,T.rangeRight=iB,T.rearg=JH,T.reject=VH,T.remove=VU,T.rest=e2,T.reverse=iT,T.sampleSize=WH,T.set=oV,T.setWith=aV,T.shuffle=$H,T.slice=BU,T.sortBy=zH,T.sortedUniq=KU,T.sortedUniqBy=QU,T.split=AV,T.spread=t2,T.tail=ZU,T.take=YU,T.takeRight=XU,T.takeRightWhile=JU,T.takeWhile=eH,T.tap=hH,T.throttle=r2,T.thru=Mp,T.toArray=nE,T.toPairs=lE,T.toPairsIn=uE,T.toPath=lB,T.toPlainObject=oE,T.transform=sV,T.unary=n2,T.union=tH,T.unionBy=rH,T.unionWith=nH,T.uniq=iH,T.uniqBy=oH,T.uniqWith=aH,T.unset=cV,T.unzip=oT,T.unzipWith=W0,T.update=lV,T.updateWith=uV,T.values=Ya,T.valuesIn=pV,T.without=sH,T.words=mE,T.wrap=i2,T.xor=cH,T.xorBy=lH,T.xorWith=uH,T.zip=pH,T.zipObject=fH,T.zipObjectDeep=mH,T.zipWith=dH,T.entries=lE,T.entriesIn=uE,T.extend=aE,T.extendWith=Lp,hT(T,T),T.add=pB,T.attempt=dE,T.camelCase=hV,T.capitalize=pE,T.ceil=fB,T.clamp=fV,T.clone=a2,T.cloneDeep=c2,T.cloneDeepWith=l2,T.cloneWith=s2,T.conformsTo=u2,T.deburr=fE,T.defaultTo=jV,T.divide=mB,T.endsWith=gV,T.eq=Dn,T.escape=yV,T.escapeRegExp=xV,T.every=EH,T.find=kH,T.findIndex=L0,T.findKey=V2,T.findLast=PH,T.findLastIndex=U0,T.findLastKey=B2,T.floor=dB,T.forEach=j0,T.forEachRight=q0,T.forIn=W2,T.forInRight=$2,T.forOwn=j2,T.forOwnRight=q2,T.get=uT,T.gt=p2,T.gte=f2,T.has=K2,T.hasIn=pT,T.head=V0,T.identity=vr,T.includes=IH,T.indexOf=PU,T.inRange=mV,T.invoke=Y2,T.isArguments=Go,T.isArray=ve,T.isArrayBuffer=m2,T.isArrayLike=Tr,T.isArrayLikeObject=ht,T.isBoolean=d2,T.isBuffer=Ji,T.isDate=h2,T.isElement=g2,T.isEmpty=y2,T.isEqual=x2,T.isEqualWith=T2,T.isError=cT,T.isFinite=S2,T.isFunction=wi,T.isInteger=J0,T.isLength=Op,T.isMap=eE,T.isMatch=v2,T.isMatchWith=b2,T.isNaN=w2,T.isNative=_2,T.isNil=R2,T.isNull=E2,T.isNumber=tE,T.isObject=ct,T.isObjectLike=ft,T.isPlainObject=Yc,T.isRegExp=lT,T.isSafeInteger=k2,T.isSet=rE,T.isString=Np,T.isSymbol=Ur,T.isTypedArray=Za,T.isUndefined=P2,T.isWeakMap=A2,T.isWeakSet=M2,T.join=IU,T.kebabCase=TV,T.last=ln,T.lastIndexOf=CU,T.lowerCase=SV,T.lowerFirst=vV,T.lt=D2,T.lte=F2,T.max=hB,T.maxBy=gB,T.mean=yB,T.meanBy=xB,T.min=TB,T.minBy=SB,T.stubArray=yT,T.stubFalse=xT,T.stubObject=oB,T.stubString=aB,T.stubTrue=sB,T.multiply=vB,T.nth=OU,T.noConflict=YV,T.noop=gT,T.now=Fp,T.pad=bV,T.padEnd=wV,T.padStart=_V,T.parseInt=EV,T.random=dV,T.reduce=UH,T.reduceRight=HH,T.repeat=RV,T.replace=kV,T.result=iV,T.round=bB,T.runInContext=P,T.sample=BH,T.size=jH,T.snakeCase=PV,T.some=qH,T.sortedIndex=WU,T.sortedIndexBy=$U,T.sortedIndexOf=jU,T.sortedLastIndex=qU,T.sortedLastIndexBy=zU,T.sortedLastIndexOf=GU,T.startCase=MV,T.startsWith=DV,T.subtract=wB,T.sum=_B,T.sumBy=EB,T.template=FV,T.times=cB,T.toFinite=_i,T.toInteger=Ee,T.toLength=iE,T.toLower=IV,T.toNumber=un,T.toSafeInteger=I2,T.toString=je,T.toUpper=CV,T.trim=OV,T.trimEnd=NV,T.trimStart=LV,T.truncate=UV,T.unescape=HV,T.uniqueId=uB,T.upperCase=VV,T.upperFirst=fT,T.each=j0,T.eachRight=q0,T.first=V0,hT(T,function(){var a={};return zn(T,function(c,f){qe.call(T.prototype,f)||(a[f]=c)}),a}(),{chain:!1}),T.VERSION=e,nn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){T[a].placeholder=T}),nn(["drop","take"],function(a,c){Oe.prototype[a]=function(f){f=f===t?1:Et(Ee(f),0);var h=this.__filtered__&&!c?new Oe(this):this.clone();return h.__filtered__?h.__takeCount__=zt(f,h.__takeCount__):h.__views__.push({size:zt(f,ie),type:a+(h.__dir__<0?"Right":"")}),h},Oe.prototype[a+"Right"]=function(f){return this.reverse()[a](f).reverse()}}),nn(["filter","map","takeWhile"],function(a,c){var f=c+1,h=f==D||f==K;Oe.prototype[a]=function(y){var S=this.clone();return S.__iteratees__.push({iteratee:me(y,3),type:f}),S.__filtered__=S.__filtered__||h,S}}),nn(["head","last"],function(a,c){var f="take"+(c?"Right":"");Oe.prototype[a]=function(){return this[f](1).value()[0]}}),nn(["initial","tail"],function(a,c){var f="drop"+(c?"":"Right");Oe.prototype[a]=function(){return this.__filtered__?new Oe(this):this[f](1)}}),Oe.prototype.compact=function(){return this.filter(vr)},Oe.prototype.find=function(a){return this.filter(a).head()},Oe.prototype.findLast=function(a){return this.reverse().find(a)},Oe.prototype.invokeMap=Me(function(a,c){return typeof a=="function"?new Oe(this):this.map(function(f){return qc(f,a,c)})}),Oe.prototype.reject=function(a){return this.filter(Cp(me(a)))},Oe.prototype.slice=function(a,c){a=Ee(a);var f=this;return f.__filtered__&&(a>0||c<0)?new Oe(f):(a<0?f=f.takeRight(-a):a&&(f=f.drop(a)),c!==t&&(c=Ee(c),f=c<0?f.dropRight(-c):f.take(c-a)),f)},Oe.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},Oe.prototype.toArray=function(){return this.take(ie)},zn(Oe.prototype,function(a,c){var f=/^(?:filter|find|map|reject)|While$/.test(c),h=/^(?:head|last)$/.test(c),y=T[h?"take"+(c=="last"?"Right":""):c],S=h||/^find/.test(c);y&&(T.prototype[c]=function(){var E=this.__wrapped__,R=h?[1]:arguments,M=E instanceof Oe,$=R[0],j=M||ve(E),G=function(Ie){var Ne=y.apply(T,qi([Ie],R));return h&&J?Ne[0]:Ne};j&&f&&typeof $=="function"&&$.length!=1&&(M=j=!1);var J=this.__chain__,se=!!this.__actions__.length,he=S&&!J,Pe=M&&!se;if(!S&&j){E=Pe?E:new Oe(this);var ge=a.apply(E,R);return ge.__actions__.push({func:Mp,args:[G],thisArg:t}),new an(ge,J)}return he&&Pe?a.apply(this,R):(ge=this.thru(G),he?h?ge.value()[0]:ge.value():ge)})}),nn(["pop","push","shift","sort","splice","unshift"],function(a){var c=rp[a],f=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",h=/^(?:pop|shift)$/.test(a);T.prototype[a]=function(){var y=arguments;if(h&&!this.__chain__){var S=this.value();return c.apply(ve(S)?S:[],y)}return this[f](function(E){return c.apply(ve(E)?E:[],y)})}}),zn(Oe.prototype,function(a,c){var f=T[c];if(f){var h=f.name+"";qe.call(qa,h)||(qa[h]=[]),qa[h].push({name:c,func:f})}}),qa[wp(t,v).name]=[{name:"wrapper",func:t}],Oe.prototype.clone=HN,Oe.prototype.reverse=VN,Oe.prototype.value=BN,T.prototype.at=gH,T.prototype.chain=yH,T.prototype.commit=xH,T.prototype.next=TH,T.prototype.plant=vH,T.prototype.reverse=bH,T.prototype.toJSON=T.prototype.valueOf=T.prototype.value=wH,T.prototype.first=T.prototype.head,Uc&&(T.prototype[Uc]=SH),T},Gi=xN();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(At._=Gi,define(function(){return Gi})):Ho?((Ho.exports=Gi)._=Gi,dx._=Gi):At._=Gi}).call(gc)});var WI=Ye(($Ue,BI)=>{"use strict";BI.exports=HI;function HI(t,e,r){t instanceof RegExp&&(t=UI(t,r)),e instanceof RegExp&&(e=UI(e,r));var n=VI(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}function UI(t,e){var r=e.match(t);return r?r[0]:null}HI.range=VI;function VI(t,e,r){var n,i,o,s,l,u=r.indexOf(t),p=r.indexOf(e,u+1),m=u;if(u>=0&&p>0){if(t===e)return[u,p];for(n=[],o=r.length;m>=0&&!l;)m==u?(n.push(m),u=r.indexOf(t,m+1)):n.length==1?l=[n.pop(),p]:(i=n.pop(),i<o&&(o=i,s=p),p=r.indexOf(e,m+1)),m=u<p&&u>=0?u:p;n.length&&(l=[o,s])}return l}});var ZI=Ye((jUe,QI)=>{var $I=WI();QI.exports=qZ;var jI="\0SLASH"+Math.random()+"\0",qI="\0OPEN"+Math.random()+"\0",Sb="\0CLOSE"+Math.random()+"\0",zI="\0COMMA"+Math.random()+"\0",GI="\0PERIOD"+Math.random()+"\0";function Tb(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function $Z(t){return t.split("\\\\").join(jI).split("\\{").join(qI).split("\\}").join(Sb).split("\\,").join(zI).split("\\.").join(GI)}function jZ(t){return t.split(jI).join("\\").split(qI).join("{").split(Sb).join("}").split(zI).join(",").split(GI).join(".")}function KI(t){if(!t)return[""];var e=[],r=$I("{","}",t);if(!r)return t.split(",");var n=r.pre,i=r.body,o=r.post,s=n.split(",");s[s.length-1]+="{"+i+"}";var l=KI(o);return o.length&&(s[s.length-1]+=l.shift(),s.push.apply(s,l)),e.push.apply(e,s),e}function qZ(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),_u($Z(t),!0).map(jZ)):[]}function zZ(t){return"{"+t+"}"}function GZ(t){return/^-?0\d/.test(t)}function KZ(t,e){return t<=e}function QZ(t,e){return t>=e}function _u(t,e){var r=[],n=$I("{","}",t);if(!n)return[t];var i=n.pre,o=n.post.length?_u(n.post,!1):[""];if(/\$$/.test(n.pre))for(var s=0;s<o.length;s++){var l=i+"{"+n.body+"}"+o[s];r.push(l)}else{var u=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),p=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),m=u||p,d=n.body.indexOf(",")>=0;if(!m&&!d)return n.post.match(/,.*\}/)?(t=n.pre+"{"+n.body+Sb+n.post,_u(t)):[t];var g;if(m)g=n.body.split(/\.\./);else if(g=KI(n.body),g.length===1&&(g=_u(g[0],!1).map(zZ),g.length===1))return o.map(function(U){return n.pre+g[0]+U});var x;if(m){var b=Tb(g[0]),v=Tb(g[1]),I=Math.max(g[0].length,g[1].length),F=g.length==3?Math.abs(Tb(g[2])):1,V=KZ,Z=v<b;Z&&(F*=-1,V=QZ);var oe=g.some(GZ);x=[];for(var ae=b;V(ae,v);ae+=F){var le;if(p)le=String.fromCharCode(ae),le==="\\"&&(le="");else if(le=String(ae),oe){var st=I-le.length;if(st>0){var Lt=new Array(st+1).join("0");ae<0?le="-"+Lt+le.slice(1):le=Lt+le}}x.push(le)}}else{x=[];for(var pt=0;pt<g.length;pt++)x.push.apply(x,_u(g[pt],!1))}for(var pt=0;pt<x.length;pt++)for(var s=0;s<o.length;s++){var l=i+x[pt]+o[s];(!e||m||l)&&r.push(l)}}return r}});var OX={};DB(OX,{default:()=>W1});module.exports=FB(OX);var TT="cursorless.command",Hp=class{constructor(e){this.baseTitle=e}get title(){return`Cursorless: ${this.baseTitle}`}},mt=class extends Hp{constructor(){super(...arguments);this.isVisible=!1}},yt=class extends Hp{constructor(){super(...arguments);this.isVisible=!0}};var LX={"cursorless.toggleDecorations":new yt("Toggle decorations"),"cursorless.recomputeDecorationStyles":new yt("Recompute decoration styles"),"cursorless.recordTestCase":new yt("Record test case"),"cursorless.recordOneTestCaseThenPause":new yt("Record one test case, then pause"),"cursorless.pauseRecording":new yt("Pause test case recording"),"cursorless.resumeRecording":new yt("Resume test case recording"),"cursorless.recordScopeTests.showUnimplementedFacets":new yt("Bulk record unimplemented scope facets"),"cursorless.recordScopeTests.saveActiveDocument":new yt("Bulk save scope tests for the active document"),"cursorless.showDocumentation":new yt("Show documentation"),"cursorless.showInstallationDependencies":new yt("Show installation dependencies"),"cursorless.showScopeVisualizer":new yt("Show the scope visualizer"),"cursorless.hideScopeVisualizer":new yt("Hide the scope visualizer"),"cursorless.analyzeCommandHistory":new yt("Analyze collected command history"),"cursorless.tutorial.start":new mt("Start a tutorial"),"cursorless.tutorial.next":new yt("Tutorial next"),"cursorless.tutorial.previous":new yt("Tutorial previous"),"cursorless.tutorial.restart":new yt("Tutorial restart"),"cursorless.tutorial.resume":new yt("Tutorial resume"),"cursorless.tutorial.list":new yt("Tutorial list"),"cursorless.documentationOpened":new mt("Used by talon to notify us that the docs have been opened; for use with tutorial"),"cursorless.command":new mt("The core cursorless command"),"cursorless.repeatPreviousCommand":new yt("Repeat the previous Cursorless command"),"cursorless.showQuickPick":new mt("Pop up a quick pick of all cursorless commands"),"cursorless.showCheatsheet":new mt("Display the cursorless cheatsheet"),"cursorless.internal.updateCheatsheetDefaults":new mt("Update the default values of the cheatsheet payload used on the website and for local development. Be sure to run this on stock community and cursorless."),"cursorless.private.logQuickActions":new mt("Log the quick actions available at the current cursor position"),"cursorless.takeSnapshot":new mt("Take a snapshot of the current editor state"),"cursorless.keyboard.escape":new mt("Should be mapped to the escape key when using cursorless keyboard. By default, exits modal keyboard mode, but changes behaviour when Cursorless is expecting a continuation keystroke.  For example, when you type a color and Cursorless is waiting for a character, it cancels the color and switches back to modal mode."),"cursorless.keyboard.targeted.targetHat":new mt("Sets the keyboard target to the given hat"),"cursorless.keyboard.targeted.targetScope":new mt("Sets the keyboard target to the scope containing the current target"),"cursorless.keyboard.targeted.targetSelection":new mt("Sets the keyboard target to the current selection"),"cursorless.keyboard.targeted.clearTarget":new mt("Clears the current keyboard target"),"cursorless.keyboard.targeted.runActionOnTarget":new mt("Run the given action on the current keyboard target"),"cursorless.keyboard.modal.modeOn":new mt("Turn on the cursorless modal mode"),"cursorless.keyboard.modal.modeOff":new mt("Turn off the cursorless modal mode"),"cursorless.keyboard.modal.modeToggle":new mt("Toggle the cursorless modal mode"),"cursorless.keyboard.undoTarget":new mt("Undo keyboard targeting changes"),"cursorless.keyboard.redoTarget":new mt("Redo keyboard targeting changes"),"cursorless.migrateSnippets":new mt("Migrate snippets from the old Cursorless format to the new community format")};var Vp=class{constructor(e,r){this.callback=e;this.debounceDelayMs=r;this.timeoutHandle=null;this.run=this.run.bind(this)}run(){this.timeoutHandle!=null&&clearTimeout(this.timeoutHandle),this.timeoutHandle=setTimeout(()=>{this.callback(),this.timeoutHandle=null},this.debounceDelayMs)}dispose(){this.timeoutHandle!=null&&clearTimeout(this.timeoutHandle)}};var Bp=class extends Error{constructor(e){super(`Language '${e}' is not implemented yet; See https://www.cursorless.org/docs/contributing/adding-a-new-language/`),this.name="UnsupportedLanguageError"}};var Wp=class extends Error{constructor(){super("Cursorless Talon version is ahead of Cursorless VSCode extension version. Please update Cursorless VSCode.")}},dt=class extends Error{constructor(e){super(`Couldn't find containing ${e}.`),this.name="NoContainingScopeError"}};var $p=class{constructor(){this.signals={prePhrase:{getVersion:async()=>null}}}async getFocusedElementType(){return this.focusedElementType}setFocusedElementType(e){this.focusedElementType=e}};var IB=typeof global=="object"&&global&&global.Object===Object&&global,jp=IB;var CB=typeof self=="object"&&self&&self.Object===Object&&self,OB=jp||CB||Function("return this")(),Dt=OB;var NB=Dt.Symbol,ar=NB;var xE=Object.prototype,LB=xE.hasOwnProperty,UB=xE.toString,Xc=ar?ar.toStringTag:void 0;function HB(t){var e=LB.call(t,Xc),r=t[Xc];try{t[Xc]=void 0;var n=!0}catch{}var i=UB.call(t);return n&&(e?t[Xc]=r:delete t[Xc]),i}var TE=HB;var VB=Object.prototype,BB=VB.toString;function WB(t){return BB.call(t)}var SE=WB;var $B="[object Null]",jB="[object Undefined]",vE=ar?ar.toStringTag:void 0;function qB(t){return t==null?t===void 0?jB:$B:vE&&vE in Object(t)?TE(t):SE(t)}var In=qB;function zB(t){return t!=null&&typeof t=="object"}var sr=zB;var GB="[object Symbol]";function KB(t){return typeof t=="symbol"||sr(t)&&In(t)==GB}var Br=KB;function QB(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var pn=QB;var ZB=Array.isArray,ze=ZB;var YB=1/0,bE=ar?ar.prototype:void 0,wE=bE?bE.toString:void 0;function _E(t){if(typeof t=="string")return t;if(ze(t))return pn(t,_E)+"";if(Br(t))return wE?wE.call(t):"";var e=t+"";return e=="0"&&1/t==-YB?"-0":e}var EE=_E;var XB=/\s/;function JB(t){for(var e=t.length;e--&&XB.test(t.charAt(e)););return e}var RE=JB;var eW=/^\s+/;function tW(t){return t&&t.slice(0,RE(t)+1).replace(eW,"")}var kE=tW;function rW(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Wr=rW;var PE=NaN,nW=/^[-+]0x[0-9a-f]+$/i,iW=/^0b[01]+$/i,oW=/^0o[0-7]+$/i,aW=parseInt;function sW(t){if(typeof t=="number")return t;if(Br(t))return PE;if(Wr(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Wr(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=kE(t);var r=iW.test(t);return r||oW.test(t)?aW(t.slice(2),r?2:8):nW.test(t)?PE:+t}var AE=sW;var ME=1/0,cW=17976931348623157e292;function lW(t){if(!t)return t===0?t:0;if(t=AE(t),t===ME||t===-ME){var e=t<0?-1:1;return e*cW}return t===t?t:0}var Xa=lW;function uW(t){var e=Xa(t),r=e%1;return e===e?r?e-r:e:0}var qp=uW;function pW(t){return t}var wr=pW;var fW="[object AsyncFunction]",mW="[object Function]",dW="[object GeneratorFunction]",hW="[object Proxy]";function gW(t){if(!Wr(t))return!1;var e=In(t);return e==mW||e==dW||e==fW||e==hW}var zp=gW;var yW=Dt["__core-js_shared__"],Gp=yW;var DE=function(){var t=/[^.]+$/.exec(Gp&&Gp.keys&&Gp.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function xW(t){return!!DE&&DE in t}var FE=xW;var TW=Function.prototype,SW=TW.toString;function vW(t){if(t!=null){try{return SW.call(t)}catch{}try{return t+""}catch{}}return""}var Ri=vW;var bW=/[\\^$.*+?()[\]{}|]/g,wW=/^\[object .+?Constructor\]$/,_W=Function.prototype,EW=Object.prototype,RW=_W.toString,kW=EW.hasOwnProperty,PW=RegExp("^"+RW.call(kW).replace(bW,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function AW(t){if(!Wr(t)||FE(t))return!1;var e=zp(t)?PW:wW;return e.test(Ri(t))}var IE=AW;function MW(t,e){return t?.[e]}var CE=MW;function DW(t,e){var r=CE(t,e);return IE(r)?r:void 0}var _r=DW;var FW=_r(Dt,"WeakMap"),Ko=FW;var IW=Ko&&new Ko,ST=IW;var OE=Object.create,CW=function(){function t(){}return function(e){if(!Wr(e))return{};if(OE)return OE(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),Kp=CW;function OW(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var NE=OW;function NW(){}var Ja=NW;var LW=4294967295;function Qp(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=LW,this.__views__=[]}Qp.prototype=Kp(Ja.prototype);Qp.prototype.constructor=Qp;var es=Qp;function UW(){}var Zp=UW;var HW=ST?function(t){return ST.get(t)}:Zp,Yp=HW;var VW={},vT=VW;var BW=Object.prototype,WW=BW.hasOwnProperty;function $W(t){for(var e=t.name+"",r=vT[e],n=WW.call(vT,e)?r.length:0;n--;){var i=r[n],o=i.func;if(o==null||o==t)return i.name}return e}var ts=$W;function Xp(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}Xp.prototype=Kp(Ja.prototype);Xp.prototype.constructor=Xp;var eo=Xp;function jW(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var to=jW;function qW(t){if(t instanceof es)return t.clone();var e=new eo(t.__wrapped__,t.__chain__);return e.__actions__=to(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var LE=qW;var zW=Object.prototype,GW=zW.hasOwnProperty;function Jp(t){if(sr(t)&&!ze(t)&&!(t instanceof es)){if(t instanceof eo)return t;if(GW.call(t,"__wrapped__"))return LE(t)}return new eo(t)}Jp.prototype=Ja.prototype;Jp.prototype.constructor=Jp;var UE=Jp;function KW(t){var e=ts(t),r=UE[e];if(typeof r!="function"||!(e in es.prototype))return!1;if(t===r)return!0;var n=Yp(r);return!!n&&t===n[0]}var bT=KW;var QW=800,ZW=16,YW=Date.now;function XW(t){var e=0,r=0;return function(){var n=YW(),i=ZW-(n-r);if(r=n,i>0){if(++e>=QW)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var HE=XW;function JW(t){return function(){return t}}var VE=JW;var e$=function(){try{var t=_r(Object,"defineProperty");return t({},"",{}),t}catch{}}(),wT=e$;var t$=wT?function(t,e){return wT(t,"toString",{configurable:!0,enumerable:!1,value:VE(e),writable:!0})}:wr,BE=t$;var r$=HE(BE),ef=r$;function n$(t,e,r,n){for(var i=t.length,o=r+(n?1:-1);n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}var tf=n$;function i$(t){return t!==t}var WE=i$;function o$(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}var $E=o$;function a$(t,e,r){return e===e?$E(t,e,r):tf(t,WE,r)}var rf=a$;function s$(t,e){var r=t==null?0:t.length;return!!r&&rf(t,e,0)>-1}var jE=s$;var c$=9007199254740991,l$=/^(?:0|[1-9]\d*)$/;function u$(t,e){var r=typeof t;return e=e??c$,!!e&&(r=="number"||r!="symbol"&&l$.test(t))&&t>-1&&t%1==0&&t<e}var rs=u$;function p$(t,e){return t===e||t!==t&&e!==e}var ns=p$;var qE=Math.max;function f$(t,e,r){return e=qE(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,o=qE(n.length-e,0),s=Array(o);++i<o;)s[i]=n[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=n[i];return l[e]=r(s),NE(t,this,l)}}var nf=f$;function m$(t,e){return ef(nf(t,e,wr),t+"")}var is=m$;var d$=9007199254740991;function h$(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=d$}var os=h$;function g$(t){return t!=null&&os(t.length)&&!zp(t)}var Qn=g$;function y$(t,e,r){if(!Wr(r))return!1;var n=typeof e;return(n=="number"?Qn(r)&&rs(e,r.length):n=="string"&&e in r)?ns(r[e],t):!1}var Qo=y$;var x$=Object.prototype;function T$(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||x$;return t===r}var zE=T$;function S$(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var of=S$;var v$="[object Arguments]";function b$(t){return sr(t)&&In(t)==v$}var _T=b$;var GE=Object.prototype,w$=GE.hasOwnProperty,_$=GE.propertyIsEnumerable,E$=_T(function(){return arguments}())?_T:function(t){return sr(t)&&w$.call(t,"callee")&&!_$.call(t,"callee")},as=E$;function R$(){return!1}var KE=R$;var YE=typeof exports=="object"&&exports&&!exports.nodeType&&exports,QE=YE&&typeof module=="object"&&module&&!module.nodeType&&module,k$=QE&&QE.exports===YE,ZE=k$?Dt.Buffer:void 0,P$=ZE?ZE.isBuffer:void 0,A$=P$||KE,Jc=A$;var M$="[object Arguments]",D$="[object Array]",F$="[object Boolean]",I$="[object Date]",C$="[object Error]",O$="[object Function]",N$="[object Map]",L$="[object Number]",U$="[object Object]",H$="[object RegExp]",V$="[object Set]",B$="[object String]",W$="[object WeakMap]",$$="[object ArrayBuffer]",j$="[object DataView]",q$="[object Float32Array]",z$="[object Float64Array]",G$="[object Int8Array]",K$="[object Int16Array]",Q$="[object Int32Array]",Z$="[object Uint8Array]",Y$="[object Uint8ClampedArray]",X$="[object Uint16Array]",J$="[object Uint32Array]",tt={};tt[q$]=tt[z$]=tt[G$]=tt[K$]=tt[Q$]=tt[Z$]=tt[Y$]=tt[X$]=tt[J$]=!0;tt[M$]=tt[D$]=tt[$$]=tt[F$]=tt[j$]=tt[I$]=tt[C$]=tt[O$]=tt[N$]=tt[L$]=tt[U$]=tt[H$]=tt[V$]=tt[B$]=tt[W$]=!1;function ej(t){return sr(t)&&os(t.length)&&!!tt[In(t)]}var XE=ej;function tj(t){return function(e){return t(e)}}var ss=tj;var JE=typeof exports=="object"&&exports&&!exports.nodeType&&exports,el=JE&&typeof module=="object"&&module&&!module.nodeType&&module,rj=el&&el.exports===JE,ET=rj&&jp.process,nj=function(){try{var t=el&&el.require&&el.require("util").types;return t||ET&&ET.binding&&ET.binding("util")}catch{}}(),RT=nj;var eR=RT&&RT.isTypedArray,ij=eR?ss(eR):XE,af=ij;var oj=Object.prototype,aj=oj.hasOwnProperty;function sj(t,e){var r=ze(t),n=!r&&as(t),i=!r&&!n&&Jc(t),o=!r&&!n&&!i&&af(t),s=r||n||i||o,l=s?of(t.length,String):[],u=l.length;for(var p in t)(e||aj.call(t,p))&&!(s&&(p=="length"||i&&(p=="offset"||p=="parent")||o&&(p=="buffer"||p=="byteLength"||p=="byteOffset")||rs(p,u)))&&l.push(p);return l}var tR=sj;function cj(t,e){return function(r){return t(e(r))}}var rR=cj;var lj=rR(Object.keys,Object),nR=lj;var uj=Object.prototype,pj=uj.hasOwnProperty;function fj(t){if(!zE(t))return nR(t);var e=[];for(var r in Object(t))pj.call(t,r)&&r!="constructor"&&e.push(r);return e}var iR=fj;function mj(t){return Qn(t)?tR(t):iR(t)}var ro=mj;var dj=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,hj=/^\w*$/;function gj(t,e){if(ze(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||Br(t)?!0:hj.test(t)||!dj.test(t)||e!=null&&t in Object(e)}var cs=gj;var yj=_r(Object,"create"),ki=yj;function xj(){this.__data__=ki?ki(null):{},this.size=0}var oR=xj;function Tj(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var aR=Tj;var Sj="__lodash_hash_undefined__",vj=Object.prototype,bj=vj.hasOwnProperty;function wj(t){var e=this.__data__;if(ki){var r=e[t];return r===Sj?void 0:r}return bj.call(e,t)?e[t]:void 0}var sR=wj;var _j=Object.prototype,Ej=_j.hasOwnProperty;function Rj(t){var e=this.__data__;return ki?e[t]!==void 0:Ej.call(e,t)}var cR=Rj;var kj="__lodash_hash_undefined__";function Pj(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=ki&&e===void 0?kj:e,this}var lR=Pj;function ls(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ls.prototype.clear=oR;ls.prototype.delete=aR;ls.prototype.get=sR;ls.prototype.has=cR;ls.prototype.set=lR;var kT=ls;function Aj(){this.__data__=[],this.size=0}var uR=Aj;function Mj(t,e){for(var r=t.length;r--;)if(ns(t[r][0],e))return r;return-1}var no=Mj;var Dj=Array.prototype,Fj=Dj.splice;function Ij(t){var e=this.__data__,r=no(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():Fj.call(e,r,1),--this.size,!0}var pR=Ij;function Cj(t){var e=this.__data__,r=no(e,t);return r<0?void 0:e[r][1]}var fR=Cj;function Oj(t){return no(this.__data__,t)>-1}var mR=Oj;function Nj(t,e){var r=this.__data__,n=no(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var dR=Nj;function us(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}us.prototype.clear=uR;us.prototype.delete=pR;us.prototype.get=fR;us.prototype.has=mR;us.prototype.set=dR;var io=us;var Lj=_r(Dt,"Map"),oo=Lj;function Uj(){this.size=0,this.__data__={hash:new kT,map:new(oo||io),string:new kT}}var hR=Uj;function Hj(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var gR=Hj;function Vj(t,e){var r=t.__data__;return gR(e)?r[typeof e=="string"?"string":"hash"]:r.map}var ao=Vj;function Bj(t){var e=ao(this,t).delete(t);return this.size-=e?1:0,e}var yR=Bj;function Wj(t){return ao(this,t).get(t)}var xR=Wj;function $j(t){return ao(this,t).has(t)}var TR=$j;function jj(t,e){var r=ao(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var SR=jj;function ps(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ps.prototype.clear=hR;ps.prototype.delete=yR;ps.prototype.get=xR;ps.prototype.has=TR;ps.prototype.set=SR;var Zo=ps;var qj="Expected a function";function PT(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(qj);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=t.apply(this,n);return r.cache=o.set(i,s)||o,s};return r.cache=new(PT.Cache||Zo),r}PT.Cache=Zo;var tl=PT;var zj=500;function Gj(t){var e=tl(t,function(n){return r.size===zj&&r.clear(),n}),r=e.cache;return e}var vR=Gj;var Kj=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Qj=/\\(\\)?/g,Zj=vR(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Kj,function(r,n,i,o){e.push(i?o.replace(Qj,"$1"):n||r)}),e}),bR=Zj;function Yj(t){return t==null?"":EE(t)}var Cn=Yj;function Xj(t,e){return ze(t)?t:cs(t,e)?[t]:bR(Cn(t))}var sf=Xj;var Jj=1/0;function eq(t){if(typeof t=="string"||Br(t))return t;var e=t+"";return e=="0"&&1/t==-Jj?"-0":e}var so=eq;function tq(t,e){e=sf(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[so(e[r++])];return r&&r==n?t:void 0}var fs=tq;function rq(t,e,r){var n=t==null?void 0:fs(t,e);return n===void 0?r:n}var Yo=rq;function nq(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var ms=nq;var wR=ar?ar.isConcatSpreadable:void 0;function iq(t){return ze(t)||as(t)||!!(wR&&t&&t[wR])}var _R=iq;function ER(t,e,r,n,i){var o=-1,s=t.length;for(r||(r=_R),i||(i=[]);++o<s;){var l=t[o];e>0&&r(l)?e>1?ER(l,e-1,r,n,i):ms(i,l):n||(i[i.length]=l)}return i}var ds=ER;function oq(t){var e=t==null?0:t.length;return e?ds(t,1):[]}var rt=oq;function aq(t){return ef(nf(t,void 0,rt),t+"")}var RR=aq;function sq(t){return function(e){return t?.[e]}}var kR=sq;var cq={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},lq=kR(cq),PR=lq;var uq=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,pq="\\u0300-\\u036f",fq="\\ufe20-\\ufe2f",mq="\\u20d0-\\u20ff",dq=pq+fq+mq,hq="["+dq+"]",gq=RegExp(hq,"g");function yq(t){return t=Cn(t),t&&t.replace(uq,PR).replace(gq,"")}var AT=yq;function xq(){this.__data__=new io,this.size=0}var AR=xq;function Tq(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var MR=Tq;function Sq(t){return this.__data__.get(t)}var DR=Sq;function vq(t){return this.__data__.has(t)}var FR=vq;var bq=200;function wq(t,e){var r=this.__data__;if(r instanceof io){var n=r.__data__;if(!oo||n.length<bq-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Zo(n)}return r.set(t,e),this.size=r.size,this}var IR=wq;function hs(t){var e=this.__data__=new io(t);this.size=e.size}hs.prototype.clear=AR;hs.prototype.delete=MR;hs.prototype.get=DR;hs.prototype.has=FR;hs.prototype.set=IR;var gs=hs;function _q(t,e){for(var r=-1,n=t==null?0:t.length,i=0,o=[];++r<n;){var s=t[r];e(s,r,t)&&(o[i++]=s)}return o}var cf=_q;function Eq(){return[]}var CR=Eq;var Rq=Object.prototype,kq=Rq.propertyIsEnumerable,OR=Object.getOwnPropertySymbols,Pq=OR?function(t){return t==null?[]:(t=Object(t),cf(OR(t),function(e){return kq.call(t,e)}))}:CR,NR=Pq;function Aq(t,e,r){var n=e(t);return ze(t)?n:ms(n,r(t))}var LR=Aq;function Mq(t){return LR(t,ro,NR)}var MT=Mq;var Dq=_r(Dt,"DataView"),lf=Dq;var Fq=_r(Dt,"Promise"),uf=Fq;var Iq=_r(Dt,"Set"),co=Iq;var UR="[object Map]",Cq="[object Object]",HR="[object Promise]",VR="[object Set]",BR="[object WeakMap]",WR="[object DataView]",Oq=Ri(lf),Nq=Ri(oo),Lq=Ri(uf),Uq=Ri(co),Hq=Ri(Ko),Xo=In;(lf&&Xo(new lf(new ArrayBuffer(1)))!=WR||oo&&Xo(new oo)!=UR||uf&&Xo(uf.resolve())!=HR||co&&Xo(new co)!=VR||Ko&&Xo(new Ko)!=BR)&&(Xo=function(t){var e=In(t),r=e==Cq?t.constructor:void 0,n=r?Ri(r):"";if(n)switch(n){case Oq:return WR;case Nq:return UR;case Lq:return HR;case Uq:return VR;case Hq:return BR}return e});var DT=Xo;var Vq=Dt.Uint8Array,FT=Vq;function Bq(){var t=arguments.length;if(!t)return[];for(var e=Array(t-1),r=arguments[0],n=t;n--;)e[n-1]=arguments[n];return ms(ze(r)?to(r):[r],ds(e,1))}var rl=Bq;var Wq="__lodash_hash_undefined__";function $q(t){return this.__data__.set(t,Wq),this}var $R=$q;function jq(t){return this.__data__.has(t)}var jR=jq;function pf(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new Zo;++e<r;)this.add(t[e])}pf.prototype.add=pf.prototype.push=$R;pf.prototype.has=jR;var ff=pf;function qq(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var qR=qq;function zq(t,e){return t.has(e)}var mf=zq;var Gq=1,Kq=2;function Qq(t,e,r,n,i,o){var s=r&Gq,l=t.length,u=e.length;if(l!=u&&!(s&&u>l))return!1;var p=o.get(t),m=o.get(e);if(p&&m)return p==e&&m==t;var d=-1,g=!0,x=r&Kq?new ff:void 0;for(o.set(t,e),o.set(e,t);++d<l;){var b=t[d],v=e[d];if(n)var I=s?n(v,b,d,e,t,o):n(b,v,d,t,e,o);if(I!==void 0){if(I)continue;g=!1;break}if(x){if(!qR(e,function(F,V){if(!mf(x,V)&&(b===F||i(b,F,r,n,o)))return x.push(V)})){g=!1;break}}else if(!(b===v||i(b,v,r,n,o))){g=!1;break}}return o.delete(t),o.delete(e),g}var df=Qq;function Zq(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}var zR=Zq;function Yq(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var ys=Yq;var Xq=1,Jq=2,e3="[object Boolean]",t3="[object Date]",r3="[object Error]",n3="[object Map]",i3="[object Number]",o3="[object RegExp]",a3="[object Set]",s3="[object String]",c3="[object Symbol]",l3="[object ArrayBuffer]",u3="[object DataView]",GR=ar?ar.prototype:void 0,IT=GR?GR.valueOf:void 0;function p3(t,e,r,n,i,o,s){switch(r){case u3:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case l3:return!(t.byteLength!=e.byteLength||!o(new FT(t),new FT(e)));case e3:case t3:case i3:return ns(+t,+e);case r3:return t.name==e.name&&t.message==e.message;case o3:case s3:return t==e+"";case n3:var l=zR;case a3:var u=n&Xq;if(l||(l=ys),t.size!=e.size&&!u)return!1;var p=s.get(t);if(p)return p==e;n|=Jq,s.set(t,e);var m=df(l(t),l(e),n,i,o,s);return s.delete(t),m;case c3:if(IT)return IT.call(t)==IT.call(e)}return!1}var KR=p3;var f3=1,m3=Object.prototype,d3=m3.hasOwnProperty;function h3(t,e,r,n,i,o){var s=r&f3,l=MT(t),u=l.length,p=MT(e),m=p.length;if(u!=m&&!s)return!1;for(var d=u;d--;){var g=l[d];if(!(s?g in e:d3.call(e,g)))return!1}var x=o.get(t),b=o.get(e);if(x&&b)return x==e&&b==t;var v=!0;o.set(t,e),o.set(e,t);for(var I=s;++d<u;){g=l[d];var F=t[g],V=e[g];if(n)var Z=s?n(V,F,g,e,t,o):n(F,V,g,t,e,o);if(!(Z===void 0?F===V||i(F,V,r,n,o):Z)){v=!1;break}I||(I=g=="constructor")}if(v&&!I){var oe=t.constructor,ae=e.constructor;oe!=ae&&"constructor"in t&&"constructor"in e&&!(typeof oe=="function"&&oe instanceof oe&&typeof ae=="function"&&ae instanceof ae)&&(v=!1)}return o.delete(t),o.delete(e),v}var QR=h3;var g3=1,ZR="[object Arguments]",YR="[object Array]",hf="[object Object]",y3=Object.prototype,XR=y3.hasOwnProperty;function x3(t,e,r,n,i,o){var s=ze(t),l=ze(e),u=s?YR:DT(t),p=l?YR:DT(e);u=u==ZR?hf:u,p=p==ZR?hf:p;var m=u==hf,d=p==hf,g=u==p;if(g&&Jc(t)){if(!Jc(e))return!1;s=!0,m=!1}if(g&&!m)return o||(o=new gs),s||af(t)?df(t,e,r,n,i,o):KR(t,e,u,r,n,i,o);if(!(r&g3)){var x=m&&XR.call(t,"__wrapped__"),b=d&&XR.call(e,"__wrapped__");if(x||b){var v=x?t.value():t,I=b?e.value():e;return o||(o=new gs),i(v,I,r,n,o)}}return g?(o||(o=new gs),QR(t,e,r,n,i,o)):!1}var JR=x3;function ek(t,e,r,n,i){return t===e?!0:t==null||e==null||!sr(t)&&!sr(e)?t!==t&&e!==e:JR(t,e,r,n,ek,i)}var xs=ek;var T3=1,S3=2;function v3(t,e,r,n){var i=r.length,o=i,s=!n;if(t==null)return!o;for(t=Object(t);i--;){var l=r[i];if(s&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++i<o;){l=r[i];var u=l[0],p=t[u],m=l[1];if(s&&l[2]){if(p===void 0&&!(u in t))return!1}else{var d=new gs;if(n)var g=n(p,m,u,t,e,d);if(!(g===void 0?xs(m,p,T3|S3,n,d):g))return!1}}return!0}var tk=v3;function b3(t){return t===t&&!Wr(t)}var gf=b3;function w3(t){for(var e=ro(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,gf(i)]}return e}var rk=w3;function _3(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var yf=_3;function E3(t){var e=rk(t);return e.length==1&&e[0][2]?yf(e[0][0],e[0][1]):function(r){return r===t||tk(r,t,e)}}var nk=E3;function R3(t,e){return t!=null&&e in Object(t)}var ik=R3;function k3(t,e,r){e=sf(e,t);for(var n=-1,i=e.length,o=!1;++n<i;){var s=so(e[n]);if(!(o=t!=null&&r(t,s)))break;t=t[s]}return o||++n!=i?o:(i=t==null?0:t.length,!!i&&os(i)&&rs(s,i)&&(ze(t)||as(t)))}var ok=k3;function P3(t,e){return t!=null&&ok(t,e,ik)}var ak=P3;var A3=1,M3=2;function D3(t,e){return cs(t)&&gf(e)?yf(so(t),e):function(r){var n=Yo(r,t);return n===void 0&&n===e?ak(r,t):xs(e,n,A3|M3)}}var sk=D3;function F3(t){return function(e){return e?.[t]}}var xf=F3;function I3(t){return function(e){return fs(e,t)}}var ck=I3;function C3(t){return cs(t)?xf(so(t)):ck(t)}var lk=C3;function O3(t){return typeof t=="function"?t:t==null?wr:typeof t=="object"?ze(t)?sk(t[0],t[1]):nk(t):lk(t)}var lo=O3;function N3(t){return function(e,r,n){for(var i=-1,o=Object(e),s=n(e),l=s.length;l--;){var u=s[t?l:++i];if(r(o[u],u,o)===!1)break}return e}}var uk=N3;var L3=uk(),pk=L3;function U3(t,e){return t&&pk(t,e,ro)}var fk=U3;function H3(t,e){return function(r,n){if(r==null)return r;if(!Qn(r))return t(r,n);for(var i=r.length,o=e?i:-1,s=Object(r);(e?o--:++o<i)&&n(s[o],o,s)!==!1;);return r}}var mk=H3;var V3=mk(fk),dk=V3;function B3(t){return sr(t)&&Qn(t)}var hk=B3;function W3(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}var gk=W3;function $3(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var Tf=$3;var yk=/[\\^$.*+?()[\]{}|]/g,j3=RegExp(yk.source);function q3(t){return t=Cn(t),t&&j3.test(t)?t.replace(yk,"\\$&"):t}var $r=q3;var z3=Math.max,G3=Math.min;function K3(t,e,r){var n=t==null?0:t.length;if(!n)return-1;var i=n-1;return r!==void 0&&(i=qp(r),i=r<0?z3(n+i,0):G3(i,n-1)),tf(t,lo(e,3),i,!0)}var Jo=K3;function Q3(t,e){var r=-1,n=Qn(t)?Array(t.length):[];return dk(t,function(i,o,s){n[++r]=e(i,o,s)}),n}var xk=Q3;var Z3="Expected a function",Y3=8,X3=32,J3=128,ez=256;function tz(t){return RR(function(e){var r=e.length,n=r,i=eo.prototype.thru;for(t&&e.reverse();n--;){var o=e[n];if(typeof o!="function")throw new TypeError(Z3);if(i&&!s&&ts(o)=="wrapper")var s=new eo([],!0)}for(n=s?n:r;++n<r;){o=e[n];var l=ts(o),u=l=="wrapper"?Yp(o):void 0;u&&bT(u[0])&&u[1]==(J3|Y3|X3|ez)&&!u[4].length&&u[9]==1?s=s[ts(u[0])].apply(s,u[3]):s=o.length==1&&bT(o)?s[l]():s.thru(o)}return function(){var p=arguments,m=p[0];if(s&&p.length==1&&ze(m))return s.plant(m).value();for(var d=0,g=r?e[d].apply(this,p):m;++d<r;)g=e[d].call(this,g);return g}})}var Tk=tz;var rz=Tk(),CT=rz;function nz(t,e){return t>e}var Sk=nz;function iz(t,e){return pn(e,function(r){return t[r]})}var vk=iz;function oz(t){return t==null?[]:vk(t,ro(t))}var bk=oz;function az(t,e){return xs(t,e)}var Pi=az;function sz(t,e){return t<e}var wk=sz;function cz(t,e,r){for(var n=-1,i=t.length;++n<i;){var o=t[n],s=e(o);if(s!=null&&(l===void 0?s===s&&!Br(s):r(s,l)))var l=s,u=o}return u}var Sf=cz;function lz(t,e){return t&&t.length?Sf(t,lo(e,2),Sk):void 0}var OT=lz;function uz(t,e){for(var r,n=-1,i=t.length;++n<i;){var o=e(t[n]);o!==void 0&&(r=r===void 0?o:r+o)}return r}var _k=uz;function pz(t){return t&&t.length?Sf(t,wr,wk):void 0}var NT=pz;function fz(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}var Ek=fz;function mz(t,e){if(t!==e){var r=t!==void 0,n=t===null,i=t===t,o=Br(t),s=e!==void 0,l=e===null,u=e===e,p=Br(e);if(!l&&!p&&!o&&t>e||o&&s&&u&&!l&&!p||n&&s&&u||!r&&u||!i)return 1;if(!n&&!o&&!p&&t<e||p&&r&&i&&!n&&!o||l&&r&&i||!s&&i||!u)return-1}return 0}var Rk=mz;function dz(t,e,r){for(var n=-1,i=t.criteria,o=e.criteria,s=i.length,l=r.length;++n<s;){var u=Rk(i[n],o[n]);if(u){if(n>=l)return u;var p=r[n];return u*(p=="desc"?-1:1)}}return t.index-e.index}var kk=dz;function hz(t,e,r){e.length?e=pn(e,function(o){return ze(o)?function(s){return fs(s,o.length===1?o[0]:o)}:o}):e=[wr];var n=-1;e=pn(e,ss(lo));var i=xk(t,function(o,s,l){var u=pn(e,function(p){return p(o)});return{criteria:u,index:++n,value:o}});return Ek(i,function(o,s){return kk(o,s,r)})}var Pk=hz;var gz=9007199254740991,yz=Math.floor;function xz(t,e){var r="";if(!t||e<1||e>gz)return r;do e%2&&(r+=t),e=yz(e/2),e&&(t+=t);while(e);return r}var Ak=xz;function Tz(t,e,r,n){for(var i=r-1,o=t.length;++i<o;)if(n(t[i],e))return i;return-1}var Mk=Tz;var Sz=Array.prototype,Dk=Sz.splice;function vz(t,e,r,n){var i=n?Mk:rf,o=-1,s=e.length,l=t;for(t===e&&(e=to(e)),r&&(l=pn(t,ss(r)));++o<s;)for(var u=0,p=e[o],m=r?r(p):p;(u=i(l,m,u,n))>-1;)l!==t&&Dk.call(l,u,1),Dk.call(t,u,1);return t}var Fk=vz;function bz(t,e){return t&&t.length&&e&&e.length?Fk(t,e):t}var Ik=bz;var wz=is(Ik),cr=wz;var _z=Math.floor,Ez=Math.random;function Rz(t,e){return t+_z(Ez()*(e-t+1))}var Ck=Rz;var kz=Math.ceil,Pz=Math.max;function Az(t,e,r,n){for(var i=-1,o=Pz(kz((e-t)/(r||1)),0),s=Array(o);o--;)s[n?o:++i]=t,t+=r;return s}var Ok=Az;function Mz(t){return function(e,r,n){return n&&typeof n!="number"&&Qo(e,r,n)&&(r=n=void 0),e=Xa(e),r===void 0?(r=e,e=0):r=Xa(r),n=n===void 0?e<r?1:-1:Xa(n),Ok(e,r,n,t)}}var Nk=Mz;var Dz=Nk(),LT=Dz;function Fz(t,e,r){return(r?Qo(t,e,r):e===void 0)?e=1:e=qp(e),Ak(Cn(t),e)}var UT=Fz;function Iz(t,e){var r=-1,n=t.length,i=n-1;for(e=e===void 0?n:e;++r<e;){var o=Ck(r,i),s=t[o];t[o]=t[r],t[r]=s}return t.length=e,t}var vf=Iz;function Cz(t){return vf(to(t))}var Lk=Cz;function Oz(t){return vf(bk(t))}var Uk=Oz;function Nz(t){var e=ze(t)?Lk:Uk;return e(t)}var HT=Nz;var Lz=is(function(t,e){if(t==null)return[];var r=e.length;return r>1&&Qo(t,e[0],e[1])?e=[]:r>2&&Qo(e[0],e[1],e[2])&&(e=[e[0]]),Pk(t,ds(e,1),[])}),VT=Lz;function Uz(t,e){return t&&t.length?_k(t,lo(e,2)):0}var bf=Uz;var Hz=1/0,Vz=co&&1/ys(new co([,-0]))[1]==Hz?function(t){return new co(t)}:Zp,Hk=Vz;var Bz=200;function Wz(t,e,r){var n=-1,i=jE,o=t.length,s=!0,l=[],u=l;if(r)s=!1,i=gk;else if(o>=Bz){var p=e?null:Hk(t);if(p)return ys(p);s=!1,i=mf,u=new ff}else u=e?[]:l;e:for(;++n<o;){var m=t[n],d=e?e(m):m;if(m=r||m!==0?m:0,s&&d===d){for(var g=u.length;g--;)if(u[g]===d)continue e;e&&u.push(d),l.push(m)}else i(u,d,r)||(u!==l&&u.push(d),l.push(m))}return l}var wf=Wz;function $z(t){return t&&t.length?wf(t):[]}var ea=$z;function jz(t,e){return e=typeof e=="function"?e:void 0,t&&t.length?wf(t,void 0,e):[]}var nl=jz;var qz=Math.max;function zz(t){if(!(t&&t.length))return[];var e=0;return t=cf(t,function(r){if(hk(r))return e=qz(r.length,e),!0}),of(e,function(r){return pn(t,xf(r))})}var Vk=zz;var Gz=is(Vk),Rt=Gz;var _f=class{constructor(){this.commands={clipboardPaste:void 0,clipboardCopy:void 0,toggleLineComment:void 0,indentLine:void 0,outdentLine:void 0,rename:void 0,quickFix:void 0,revealDefinition:void 0,revealTypeDefinition:void 0,showHover:void 0,showDebugHover:void 0,extractVariable:void 0,fold:void 0,highlight:{acceptsLocation:!0},unfold:void 0,showReferences:void 0,insertLineAfter:void 0,gitAccept:void 0,gitRevert:void 0,gitStage:void 0,gitUnstage:void 0}}};var il=class{constructor(){this.clipboardContents=""}async readText(){return this.clipboardContents}async writeText(e){this.clipboardContents=e}};var Kt=class{constructor(){this.listeners=[];this.notifyListeners=(...e)=>{this.listeners.forEach(r=>r(...e))};this.registerListener=this.registerListener.bind(this)}registerListener(e){return this.listeners.push(e),{dispose:()=>{cr(this.listeners,e)}}}};var Ef={tokenHatSplittingMode:{preserveCase:!1,lettersToPreserve:[],symbolsToPreserve:[]},wordSeparators:["_"],decorationDebounceDelayMs:50,experimental:{snippetsDir:void 0,hatStability:"balanced",keyboardTargetFollowsSelection:!1},commandHistory:!1,debug:!1};var ol=class{constructor(){this.notifier=new Kt;this.mocks={...Ef};this.scopes=[];this.onDidChangeConfiguration=this.notifier.registerListener;this.onDidChangeConfiguration=this.onDidChangeConfiguration.bind(this)}getOwnConfiguration(e,r){if(r!=null){for(let{scope:n,values:i}of this.scopes)if(Qz(n,r))return Yo(i,e)??Yo(this.mocks,e)}return Yo(this.mocks,e)}mockConfiguration(e,r){this.mocks[e]=r,this.notifier.notifyListeners()}mockConfigurationScope(e,r,n=!1){this.scopes.push({scope:e,values:r}),n||this.notifier.notifyListeners()}};function Qz(t,e){return t.languageId===e.languageId}var Rf={hideInferenceWarning:!1,tutorialProgress:{}};var al=class{constructor(){this.data={...Rf}}get(e){return this.data[e]}set(e,r){return this.data[e]=r,Promise.resolve()}};var sl=class{async showMessage(e,r,n,...i){}};var kf=class{constructor(){this.configuration=new ol;this.messages=new sl;this.keyValueStore=new al;this.clipboard=new il;this.capabilities=new _f;this.runMode="test";this.cursorlessVersion="0.0.0";this.workspaceFolders=void 0;this.disposables=[];this.quickPickReturnValue=void 0;this.onDidOpenTextDocument=Ts;this.onDidCloseTextDocument=Ts;this.onDidChangeActiveTextEditor=Ts;this.onDidChangeVisibleTextEditors=Ts;this.onDidChangeTextEditorSelection=Ts;this.onDidChangeTextEditorVisibleRanges=Ts}async flashRanges(e){}async setHighlightRanges(e,r,n){}mockAssetsRoot(e){this.assetsRoot_=e}get assetsRoot(){if(this.assetsRoot_==null)throw Error("Field `assetsRoot` has not yet been mocked");return this.assetsRoot_}get activeTextEditor(){throw Error("Not implemented")}get activeEditableTextEditor(){throw Error("Not implemented")}get visibleTextEditors(){throw Error("Not implemented")}get visibleNotebookEditors(){throw Error("Not implemented")}getEditableTextEditor(e){throw Error("Not implemented")}findInDocument(e,r){throw Error("Not implemented")}findInWorkspace(e){throw Error("Not implemented")}openTextDocument(e){throw Error("Not implemented")}openUntitledTextDocument(e){throw Error("Not implemented")}setQuickPickReturnValue(e){this.quickPickReturnValue=e}async showQuickPick(e,r){return this.quickPickReturnValue}showInputBox(e){throw Error("Not implemented")}executeCommand(e,...r){throw new Error("Method not implemented.")}onDidChangeTextDocument(e){throw Error("Not implemented")}disposeOnExit(...e){return this.disposables.push(...e),()=>cr(this.disposables,...e)}exit(){this.disposables.forEach(e=>e.dispose())}};function Ts(){return{dispose(){}}}var fe=class t{constructor(e,r){this.line=e,this.character=r}isEqual(e){return this.line===e.line&&this.character===e.character}isBefore(e){return this.line<e.line?!0:this.line>e.line?!1:this.character<e.character}isAfter(e){return this.line>e.line?!0:this.line<e.line?!1:this.character>e.character}isBeforeOrEqual(e){return this.isEqual(e)||this.isBefore(e)}isAfterOrEqual(e){return this.isEqual(e)||this.isAfter(e)}compareTo(e){return this.isBefore(e)?-1:this.isAfter(e)?1:0}with(e,r){return new t(e??this.line,r??this.character)}translate(e,r){return new t(this.line+(e??0),this.character+(r??0))}toEmptyRange(){return new q(this,this)}concise(){return`${this.line}:${this.character}`}conciseOneBased(){return`${this.line+1}:${this.character+1}`}toString(){return this.concise()}};function Bk(t,e,r){return t.positionAt(t.offsetAt(e)+r)}var q=class t{constructor(...e){let[r,n]=e.length===2?e:[new fe(e[0],e[1]),new fe(e[2],e[3])];r.isBefore(n)?(this.start=r,this.end=n):(this.start=n,this.end=r)}get isEmpty(){return this.start.isEqual(this.end)}get isSingleLine(){return this.start.line===this.end.line}isRangeEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}contains(e){let[r,n]=e instanceof fe?[e,e]:[e.start,e.end];return r.isAfterOrEqual(this.start)&&n.isBeforeOrEqual(this.end)}intersection(e){let r=this.start.isAfter(e.start)?this.start:e.start,n=this.end.isBefore(e.end)?this.end:e.end;return r.isBeforeOrEqual(n)?new t(r,n):void 0}union(e){return new t(this.start.isBefore(e.start)?this.start:e.start,this.end.isAfter(e.end)?this.end:e.end)}with(e,r){return new t(e??this.start,r??this.end)}toSelection(e){return e?new Re(this.end,this.start):new Re(this.start,this.end)}concise(){return`${this.start.concise()}-${this.end.concise()}`}conciseOneBased(){return`${this.start.conciseOneBased()}-${this.end.conciseOneBased()}`}toString(){return`${this.start.concise()}-${this.end.concise()}`}};function Zz(t){let{source:e,flags:r}=t;return new RegExp(`(${e})$`,r.replace("m",""))}function Yz(t){let{source:e,flags:r}=t;return new RegExp(`^(${e})`,r.replace("m",""))}function Wk(t){let e=new Map;function r(n){let i=e.get(n);return i==null&&(i=t(n),e.set(n,i)),i}return r}var Pf=Wk(Zz),Af=Wk(Yz);function BT(t,e){return e.lastIndex=0,t.matchAll(e)}function fn(t,e,r){return Array.from(BT(t,e),r)}function ta(t,e){return t.lastIndex=0,t.test(e)}function $k(t,e){return t.lastIndex=0,e.match(t)}function cl(t,e){return fn(t,e,r=>({index:r.index,text:r[0]}))}var Ss=class{constructor(e){this.original=e;this.configuration=e.configuration,this.keyValueStore=e.keyValueStore,this.clipboard=e.clipboard,this.messages=e.messages,this.capabilities=e.capabilities}flashRanges(e){return this.original.flashRanges(e)}setHighlightRanges(e,r,n){return this.original.setHighlightRanges(e,r,n)}onDidOpenTextDocument(e,r,n){return this.original.onDidOpenTextDocument(e,r,n)}onDidCloseTextDocument(e,r,n){return this.original.onDidCloseTextDocument(e,r,n)}onDidChangeActiveTextEditor(e,r,n){return this.original.onDidChangeActiveTextEditor(e,r,n)}onDidChangeVisibleTextEditors(e,r,n){return this.original.onDidChangeVisibleTextEditors(e,r,n)}onDidChangeTextEditorSelection(e,r,n){return this.original.onDidChangeTextEditorSelection(e,r,n)}onDidChangeTextEditorVisibleRanges(e,r,n){return this.original.onDidChangeTextEditorVisibleRanges(e,r,n)}get activeTextEditor(){return this.original.activeTextEditor}get activeEditableTextEditor(){return this.original.activeEditableTextEditor}get visibleTextEditors(){return this.original.visibleTextEditors}get visibleNotebookEditors(){return this.original.visibleNotebookEditors}get cursorlessVersion(){return this.original.cursorlessVersion}get assetsRoot(){return this.original.assetsRoot}get runMode(){return this.original.runMode}get workspaceFolders(){return this.original.workspaceFolders}findInDocument(e,r){return this.original.findInDocument(e,r)}findInWorkspace(e){return this.original.findInWorkspace(e)}openTextDocument(e){return this.original.openTextDocument(e)}openUntitledTextDocument(e){return this.original.openUntitledTextDocument(e)}showQuickPick(e,r){return this.original.showQuickPick(e,r)}showInputBox(e){return this.original.showInputBox(e)}getEditableTextEditor(e){return this.original.getEditableTextEditor(e)}executeCommand(e,...r){return this.original.executeCommand(e,...r)}onDidChangeTextDocument(e){return this.original.onDidChangeTextDocument(e)}disposeOnExit(...e){return this.original.disposeOnExit(...e)}};var Mf=class extends Ss{constructor(r,n,i,o){super(r);this.fakeIde=n;this.isSilent=i;this.cursorlessSnippetsDir=o;this.messages=i?n.messages:r.messages,this.configuration=n.configuration,this.keyValueStore=n.keyValueStore,this.initializeConfiguration()}initializeConfiguration(){this.configuration.mockConfigurationScope({languageId:"css"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfigurationScope({languageId:"scss"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfigurationScope({languageId:"shellscript"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfiguration("experimental",{hatStability:this.configuration.getOwnConfiguration("experimental.hatStability"),snippetsDir:this.cursorlessSnippetsDir,keyboardTargetFollowsSelection:!1})}flashRanges(r){return this.isSilent?this.fakeIde.flashRanges(r):super.flashRanges(r)}setHighlightRanges(r,n,i){return this.isSilent?this.fakeIde.setHighlightRanges(r,n,i):super.setHighlightRanges(r,n,i)}async showQuickPick(r,n){return this.isSilent?this.fakeIde.showQuickPick(r,n):super.showQuickPick(r,n)}};function ra(t,e,r,...n){return t.showMessage("warning",e,r,...n)}function lt(t,e,r,...n){return t.showMessage("error",e,r,...n)}var ce=(i=>(i[i.supported=0]="supported",i[i.supportedLegacy=1]="supportedLegacy",i[i.unsupported=2]="unsupported",i[i.notApplicable=3]="notApplicable",i))(ce||{});var{supported:it,unsupported:xue,notApplicable:jk}=ce,WT={ifStatement:it,disqualifyDelimiter:it,"comment.line":it,"comment.block":it,"string.singleLine":it,"textFragment.comment.line":it,"textFragment.comment.block":it,"textFragment.string.singleLine":it,class:it,className:it,namedFunction:it,"name.function":it,"name.class":it,"name.field":it,functionName:it,"name.argument.formal":it,"name.argument.formal.iteration":it,"name.variable":it,"value.variable":it,"name.assignment":it,"value.assignment":it,"statement.class":it,"type.class":it,"type.field":it,"value.argument.formal":jk,"value.argument.formal.iteration":jk};var{supported:vue,unsupported:bue,notApplicable:wue}=ce;var{supported:qk,unsupported:kue,notApplicable:Pue}=ce,Xz={...WT,"value.argument.formal":qk,"value.argument.formal.iteration":qk};var{supported:Due,unsupported:Fue,notApplicable:Iue}=ce;var{supported:St,notApplicable:L}=ce,$T={"comment.block":St,"string.singleLine":St,disqualifyDelimiter:St,map:St,functionCall:St,functionCallee:St,"argument.actual":St,"argument.actual.iteration":St,"name.iteration.document":St,"name.iteration.block":St,"textFragment.comment.block":St,"textFragment.string.singleLine":St,"key.mapPair":St,"key.mapPair.iteration":St,"value.mapPair":St,"value.mapPair.iteration":St,"collectionItem.unenclosed":St,"collectionItem.unenclosed.iteration":St,statement:St,"statement.iteration.document":St,anonymousFunction:L,"argument.actual.constructor.iteration":L,"argument.actual.constructor":L,"argument.actual.method.iteration":L,"argument.actual.method":L,"argument.formal.constructor.iteration":L,"argument.formal.constructor":L,"argument.formal.iteration":L,"argument.formal.method.iteration":L,"argument.formal.method":L,"argument.formal":L,"argument.formal.lambda":L,"argument.formal.lambda.iteration":L,"argumentList.formal":L,"argumentList.formal.method":L,"argumentList.formal.constructor":L,"argumentList.formal.lambda":L,attribute:L,"branch.if.iteration":L,"branch.if":L,"branch.loop":L,"branch.switchCase.iteration":L,"branch.switchCase":L,"branch.ternary":L,"branch.try.iteration":L,"branch.try":L,"class.iteration.block":L,"class.iteration.document":L,class:L,"className.iteration.block":L,"className.iteration.document":L,className:L,command:L,"comment.line":L,"condition.doWhile":L,"condition.for":L,"condition.if":L,"condition.switchCase.iteration":L,"condition.switchCase":L,"condition.ternary":L,"condition.while":L,element:L,endTag:L,environment:L,fieldAccess:L,"functionCall.constructor":L,"functionCallee.constructor":L,"functionName.constructor":L,"functionName.iteration.block":L,"functionName.iteration.document":L,"functionName.method.iteration.class":L,"functionName.method":L,functionName:L,ifStatement:L,"interior.cell":L,"interior.class":L,"interior.command":L,"interior.element":L,"interior.function":L,"interior.if":L,"interior.lambda":L,"interior.loop":L,"interior.resource":L,"interior.switchCase":L,"interior.ternary":L,"interior.try":L,"key.attribute":L,list:L,"name.argument.actual.iteration":L,"name.argument.actual":L,"name.argument.formal.constructor.iteration":L,"name.argument.formal.constructor":L,"name.argument.formal.iteration":L,"name.argument.formal.method.iteration":L,"name.argument.formal.method":L,"name.argument.formal":L,"name.assignment.pattern":L,"name.assignment":L,"name.class":L,"name.constructor":L,"name.field":L,"name.foreach":L,"name.function":L,"name.method":L,"name.resource.iteration":L,"name.resource":L,"name.variable.pattern":L,"name.variable":L,"namedFunction.constructor":L,"namedFunction.iteration.block":L,"namedFunction.iteration.document":L,"namedFunction.method.iteration.class":L,"namedFunction.method":L,namedFunction:L,notebookCell:L,pairDelimiter:L,regularExpression:L,"section.iteration.document":L,"section.iteration.parent":L,section:L,startTag:L,"statement.iteration.block":L,"statement.class":L,"string.multiLine":L,switchStatementSubject:L,tags:L,"textFragment.comment.line":L,"textFragment.element":L,"textFragment.string.multiLine":L,"type.alias":L,"type.argument.formal.constructor.iteration":L,"type.argument.formal.constructor":L,"type.argument.formal.iteration":L,"type.argument.formal.method.iteration":L,"type.argument.formal.method":L,"type.argument.formal":L,"type.cast":L,"type.class":L,"type.enum":L,"type.field.iteration":L,"type.field":L,"type.foreach":L,"type.interface":L,"type.return":L,"type.typeArgument.iteration":L,"type.typeArgument":L,"type.variable":L,"value.argument.actual.iteration":L,"value.argument.actual":L,"value.argument.formal.constructor.iteration":L,"value.argument.formal.constructor":L,"value.argument.formal.iteration":L,"value.argument.formal.method.iteration":L,"value.argument.formal.method":L,"value.argument.formal":L,"value.assignment":L,"value.attribute":L,"value.field":L,"value.foreach":L,"value.resource.iteration":L,"value.resource":L,"value.return.lambda":L,"value.return":L,"value.typeAlias":L,"value.variable.pattern":L,"value.variable":L,"value.yield":L};var{supported:Uue,unsupported:Hue,notApplicable:Vue}=ce;var{supported:$ue,unsupported:jue,notApplicable:que}=ce;var{supported:Kue,notApplicable:Que}=ce;var{supported:Xue,unsupported:Jue,notApplicable:epe}=ce;var{supported:W,unsupported:uo,notApplicable:be}=ce,jT={list:W,map:W,regularExpression:W,switchStatementSubject:W,fieldAccess:W,disqualifyDelimiter:W,pairDelimiter:W,"collectionItem.unenclosed":W,"collectionItem.unenclosed.iteration":W,"textFragment.string.singleLine":W,"textFragment.string.multiLine":W,"textFragment.comment.line":W,"textFragment.comment.block":W,ifStatement:W,statement:W,"statement.iteration.document":W,"statement.iteration.block":W,"statement.class":W,class:W,"class.iteration.document":W,className:W,"className.iteration.document":W,anonymousFunction:W,namedFunction:W,"namedFunction.iteration.document":W,"namedFunction.method":W,"namedFunction.method.iteration.class":W,"namedFunction.constructor":W,functionName:W,"functionName.iteration.document":W,"functionName.method":W,"functionName.method.iteration.class":W,"functionName.constructor":W,functionCall:W,"functionCall.constructor":W,functionCallee:W,"functionCallee.constructor":W,"argument.actual":W,"argument.actual.iteration":W,"argument.actual.method":W,"argument.actual.method.iteration":W,"argument.actual.constructor":W,"argument.actual.constructor.iteration":W,"argument.formal":W,"argument.formal.iteration":W,"argument.formal.method":W,"argument.formal.method.iteration":W,"argument.formal.constructor":W,"argument.formal.constructor.iteration":W,"argument.formal.lambda":W,"argument.formal.lambda.iteration":W,"argumentList.formal":W,"argumentList.formal.method":W,"argumentList.formal.constructor":W,"argumentList.formal.lambda":W,"comment.line":W,"comment.block":W,"string.singleLine":W,"string.multiLine":W,"branch.if":W,"branch.if.iteration":W,"branch.try":W,"branch.try.iteration":W,"branch.switchCase":W,"branch.switchCase.iteration":W,"branch.ternary":W,"branch.loop":W,"condition.if":W,"condition.while":W,"condition.doWhile":W,"condition.for":W,"condition.ternary":W,"condition.switchCase":W,"condition.switchCase.iteration":W,"name.argument.formal":W,"name.argument.formal.iteration":W,"name.argument.formal.method":W,"name.argument.formal.method.iteration":W,"name.argument.formal.constructor":W,"name.argument.formal.constructor.iteration":W,"name.foreach":W,"name.assignment":W,"name.assignment.pattern":W,"name.variable":W,"name.variable.pattern":W,"name.function":W,"name.method":W,"name.constructor":W,"name.class":W,"name.field":W,"name.iteration.document":W,"name.iteration.block":W,"key.mapPair":W,"key.mapPair.iteration":W,"value.argument.formal":W,"value.argument.formal.iteration":W,"value.argument.formal.method":W,"value.argument.formal.method.iteration":W,"value.argument.formal.constructor":W,"value.argument.formal.constructor.iteration":W,"value.mapPair":W,"value.mapPair.iteration":W,"value.assignment":W,"value.variable":W,"value.variable.pattern":W,"value.foreach":W,"value.return":W,"value.return.lambda":W,"value.field":W,"value.yield":W,"type.class":W,"interior.class":uo,"interior.function":uo,"interior.if":uo,"interior.lambda":uo,"interior.loop":uo,"interior.switchCase":uo,"interior.ternary":uo,"interior.try":uo,"class.iteration.block":be,"className.iteration.block":be,"functionName.iteration.block":be,"interior.cell":be,"interior.command":be,"interior.resource":be,"name.argument.actual.iteration":be,"name.argument.actual":be,"name.resource.iteration":be,"name.resource":be,"namedFunction.iteration.block":be,"section.iteration.document":be,"section.iteration.parent":be,"textFragment.element":be,"type.resource.iteration":be,"type.resource":be,"value.argument.actual.iteration":be,"value.argument.actual":be,"value.resource.iteration":be,"value.resource":be,command:be,environment:be,notebookCell:be,section:be},qT={element:W,tags:W,startTag:W,endTag:W,attribute:W,"key.attribute":W,"value.attribute":W,"interior.element":W},zT={...jT,...qT,"value.typeAlias":be,"type.alias":be,"type.argument.formal.constructor.iteration":be,"type.argument.formal.constructor":be,"type.argument.formal.iteration":be,"type.argument.formal.method.iteration":be,"type.argument.formal.method":be,"type.argument.formal":be,"type.cast":be,"type.enum":be,"type.field.iteration":be,"type.field":be,"type.foreach":be,"type.interface":be,"type.return":be,"type.typeArgument.iteration":be,"type.typeArgument":be,"type.variable":be};var{supported:Jz,unsupported:ape,notApplicable:spe}=ce,eG={...zT,"textFragment.element":Jz};var{supported:mn,notApplicable:C}=ce,ll={list:mn,map:mn,"string.singleLine":mn,"key.mapPair.iteration":mn,"key.mapPair":mn,"value.mapPair.iteration":mn,"value.mapPair":mn,"comment.block":mn,"comment.line":mn,"textFragment.comment.block":mn,"textFragment.comment.line":mn,"textFragment.string.singleLine":mn,anonymousFunction:C,"argument.actual":C,"argument.actual.constructor":C,"argument.actual.constructor.iteration":C,"argument.actual.iteration":C,"argument.actual.method":C,"argument.actual.method.iteration":C,"argument.formal":C,"argument.formal.constructor":C,"argument.formal.constructor.iteration":C,"argument.formal.iteration":C,"argument.formal.method":C,"argument.formal.method.iteration":C,"argument.formal.lambda":C,"argument.formal.lambda.iteration":C,"argumentList.formal":C,"argumentList.formal.method":C,"argumentList.formal.constructor":C,"argumentList.formal.lambda":C,attribute:C,"branch.if":C,"branch.if.iteration":C,"branch.loop":C,"branch.switchCase":C,"branch.switchCase.iteration":C,"branch.ternary":C,"branch.try":C,"branch.try.iteration":C,class:C,"class.iteration.block":C,"class.iteration.document":C,className:C,"className.iteration.block":C,"className.iteration.document":C,"collectionItem.unenclosed":C,"collectionItem.unenclosed.iteration":C,command:C,"condition.doWhile":C,"condition.for":C,"condition.if":C,"condition.switchCase":C,"condition.switchCase.iteration":C,"condition.ternary":C,"condition.while":C,disqualifyDelimiter:C,element:C,endTag:C,environment:C,fieldAccess:C,functionCall:C,"functionCall.constructor":C,functionCallee:C,"functionCallee.constructor":C,functionName:C,"functionName.constructor":C,"functionName.iteration.block":C,"functionName.iteration.document":C,"functionName.method":C,"functionName.method.iteration.class":C,ifStatement:C,"interior.cell":C,"interior.class":C,"interior.command":C,"interior.element":C,"interior.function":C,"interior.if":C,"interior.lambda":C,"interior.loop":C,"interior.resource":C,"interior.switchCase":C,"interior.ternary":C,"interior.try":C,"key.attribute":C,"name.argument.actual":C,"name.argument.actual.iteration":C,"name.argument.formal":C,"name.argument.formal.constructor":C,"name.argument.formal.constructor.iteration":C,"name.argument.formal.iteration":C,"name.argument.formal.method":C,"name.argument.formal.method.iteration":C,"name.assignment":C,"name.assignment.pattern":C,"name.class":C,"name.constructor":C,"name.field":C,"name.foreach":C,"name.function":C,"name.iteration.block":C,"name.iteration.document":C,"name.method":C,"name.resource":C,"name.resource.iteration":C,"name.variable":C,"name.variable.pattern":C,namedFunction:C,"namedFunction.constructor":C,"namedFunction.iteration.block":C,"namedFunction.iteration.document":C,"namedFunction.method":C,"namedFunction.method.iteration.class":C,notebookCell:C,pairDelimiter:C,regularExpression:C,section:C,"section.iteration.document":C,"section.iteration.parent":C,startTag:C,statement:C,"statement.class":C,"statement.iteration.block":C,"statement.iteration.document":C,"string.multiLine":C,switchStatementSubject:C,tags:C,"textFragment.element":C,"textFragment.string.multiLine":C,"type.alias":C,"type.argument.formal":C,"type.argument.formal.constructor":C,"type.argument.formal.constructor.iteration":C,"type.argument.formal.iteration":C,"type.argument.formal.method":C,"type.argument.formal.method.iteration":C,"type.cast":C,"type.class":C,"type.enum":C,"type.field":C,"type.field.iteration":C,"type.foreach":C,"type.interface":C,"type.return":C,"type.typeArgument":C,"type.typeArgument.iteration":C,"type.variable":C,"value.argument.actual":C,"value.argument.actual.iteration":C,"value.argument.formal":C,"value.argument.formal.constructor":C,"value.argument.formal.constructor.iteration":C,"value.argument.formal.iteration":C,"value.argument.formal.method":C,"value.argument.formal.method.iteration":C,"value.assignment":C,"value.attribute":C,"value.field":C,"value.foreach":C,"value.resource":C,"value.resource.iteration":C,"value.return":C,"value.return.lambda":C,"value.typeAlias":C,"value.variable":C,"value.variable.pattern":C,"value.yield":C};var{supported:mpe,unsupported:dpe,notApplicable:hpe}=ce,tG={...ll};var{supported:Tpe,unsupported:Spe,notApplicable:vpe}=ce,rG={...ll};var{supported:_pe,unsupported:Epe,notApplicable:Rpe}=ce;var{supported:Ape,notApplicable:Mpe}=ce;var{supported:Ipe,notApplicable:Cpe}=ce;var{supported:Lpe,unsupported:Upe,notApplicable:Hpe}=ce;var{supported:Wpe,unsupported:$pe,notApplicable:jpe}=ce;var{supported:Gpe,unsupported:Kpe,notApplicable:Qpe}=ce;var{supported:Xpe,unsupported:Jpe,notApplicable:efe}=ce;var{supported:nfe,unsupported:ife,notApplicable:ofe}=ce;var{supported:cfe,notApplicable:lfe}=ce;var{supported:Qt,unsupported:Df}=ce,nG={...$T,"comment.line":Qt,"condition.if":Qt,namedFunction:Qt,"namedFunction.iteration.block":Qt,"namedFunction.iteration.document":Qt,functionName:Qt,"functionName.iteration.block":Qt,"functionName.iteration.document":Qt,"name.argument.formal":Qt,"name.argument.formal.iteration":Qt,"name.function":Qt,"value.argument.formal":Qt,"value.argument.formal.iteration":Qt,"value.return":Qt,ifStatement:Qt,"textFragment.comment.line":Qt,"branch.if":Df,"branch.if.iteration":Df,"interior.function":Df,"interior.if":Df};var{supported:hfe,unsupported:gfe,notApplicable:yfe}=ce;var{supported:Ht,notApplicable:Ai}=ce,GT={...jT,"type.argument.formal":Ht,"type.argument.formal.iteration":Ht,"type.argument.formal.method":Ht,"type.argument.formal.method.iteration":Ht,"type.argument.formal.constructor":Ht,"type.argument.formal.constructor.iteration":Ht,"type.alias":Ht,"type.cast":Ht,"type.field":Ht,"type.field.iteration":Ht,"type.interface":Ht,"type.enum":Ht,"type.return":Ht,"type.variable":Ht,"type.typeArgument":Ht,"type.typeArgument.iteration":Ht,"value.typeAlias":Ht,element:Ai,tags:Ai,startTag:Ai,endTag:Ai,attribute:Ai,"key.attribute":Ai,"value.attribute":Ai,"type.foreach":Ai,"interior.element":Ai};var{supported:Efe,unsupported:Rfe,notApplicable:kfe}=ce,iG={...GT,...qT};var{supported:Mfe,notApplicable:Dfe}=ce;var{supported:Cfe,unsupported:Ofe,notApplicable:Nfe}=ce;var vs=["that","source","instanceReference","keyboard"];var Re=class extends q{get isReversed(){return this.active.isBefore(this.anchor)}constructor(...e){let[r,n]=e.length===2?e:[new fe(e[0],e[1]),new fe(e[2],e[3])];super(r,n),this.anchor=r,this.active=n}isEqual(e){return this.anchor.isEqual(e.anchor)&&this.active.isEqual(e.active)}concise(){return`${this.anchor.concise()}->${this.active.concise()}`}conciseOneBased(){return`${this.start.conciseOneBased()}->${this.end.conciseOneBased()}`}toString(){return this.concise()}};function Gk({line:t,character:e}){return new fe(t,e)}function Ff({start:t,end:e}){return new q(Gk(t),Gk(e))}function jr({start:t,end:e}){return{type:"line",start:t.line,end:e.line}}function lr({start:t,end:e}){return{type:"character",start:t,end:e}}function ul(t){return{start:If(t.start),end:If(t.end)}}function Kk(t){return{anchor:If(t.anchor),active:If(t.active)}}function If({line:t,character:e}){return{line:t,character:e}}function fP(t){return typeof t>"u"||t===null}function oG(t){return typeof t=="object"&&t!==null}function aG(t){return Array.isArray(t)?t:fP(t)?[]:[t]}function sG(t,e){var r,n,i,o;if(e)for(o=Object.keys(e),r=0,n=o.length;r<n;r+=1)i=o[r],t[i]=e[i];return t}function cG(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}function lG(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var uG=fP,pG=oG,fG=aG,mG=cG,dG=lG,hG=sG,kt={isNothing:uG,isObject:pG,toArray:fG,repeat:mG,isNegativeZero:dG,extend:hG};function mP(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}function fl(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=mP(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}fl.prototype=Object.create(Error.prototype);fl.prototype.constructor=fl;fl.prototype.toString=function(e){return this.name+": "+mP(this,e)};var Er=fl;function KT(t,e,r,n,i){var o="",s="",l=Math.floor(i/2)-1;return n-e>l&&(o=" ... ",e=n-l+o.length),r-n>l&&(s=" ...",r=n+l-s.length),{str:o+t.slice(e,r).replace(/\t/g,"\u2192")+s,pos:n-e+o.length}}function QT(t,e){return kt.repeat(" ",e-t.length)+t}function gG(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],o,s=-1;o=r.exec(t.buffer);)i.push(o.index),n.push(o.index+o[0].length),t.position<=o.index&&s<0&&(s=n.length-2);s<0&&(s=n.length-1);var l="",u,p,m=Math.min(t.line+e.linesAfter,i.length).toString().length,d=e.maxLength-(e.indent+m+3);for(u=1;u<=e.linesBefore&&!(s-u<0);u++)p=KT(t.buffer,n[s-u],i[s-u],t.position-(n[s]-n[s-u]),d),l=kt.repeat(" ",e.indent)+QT((t.line-u+1).toString(),m)+" | "+p.str+`
`+l;for(p=KT(t.buffer,n[s],i[s],t.position,d),l+=kt.repeat(" ",e.indent)+QT((t.line+1).toString(),m)+" | "+p.str+`
`,l+=kt.repeat("-",e.indent+m+3+p.pos)+`^
`,u=1;u<=e.linesAfter&&!(s+u>=i.length);u++)p=KT(t.buffer,n[s+u],i[s+u],t.position-(n[s]-n[s+u]),d),l+=kt.repeat(" ",e.indent)+QT((t.line+u+1).toString(),m)+" | "+p.str+`
`;return l.replace(/\n$/,"")}var yG=gG,xG=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],TG=["scalar","sequence","mapping"];function SG(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}function vG(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(xG.indexOf(r)===-1)throw new Er('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=SG(e.styleAliases||null),TG.indexOf(this.kind)===-1)throw new Er('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var Vt=vG;function Yk(t,e){var r=[];return t[e].forEach(function(n){var i=r.length;r.forEach(function(o,s){o.tag===n.tag&&o.kind===n.kind&&o.multi===n.multi&&(i=s)}),r[i]=n}),r}function bG(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}function YT(t){return this.extend(t)}YT.prototype.extend=function(e){var r=[],n=[];if(e instanceof Vt)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new Er("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(o){if(!(o instanceof Vt))throw new Er("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new Er("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new Er("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(o){if(!(o instanceof Vt))throw new Er("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(YT.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=Yk(i,"implicit"),i.compiledExplicit=Yk(i,"explicit"),i.compiledTypeMap=bG(i.compiledImplicit,i.compiledExplicit),i};var wG=YT,_G=new Vt("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),EG=new Vt("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),RG=new Vt("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),kG=new wG({explicit:[_G,EG,RG]});function PG(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function AG(){return null}function MG(t){return t===null}var DG=new Vt("tag:yaml.org,2002:null",{kind:"scalar",resolve:PG,construct:AG,predicate:MG,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function FG(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function IG(t){return t==="true"||t==="True"||t==="TRUE"}function CG(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var OG=new Vt("tag:yaml.org,2002:bool",{kind:"scalar",resolve:FG,construct:IG,predicate:CG,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function NG(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function LG(t){return 48<=t&&t<=55}function UG(t){return 48<=t&&t<=57}function HG(t){if(t===null)return!1;var e=t.length,r=0,n=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!NG(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!LG(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!UG(t.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function VG(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}function BG(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!kt.isNegativeZero(t)}var WG=new Vt("tag:yaml.org,2002:int",{kind:"scalar",resolve:HG,construct:VG,predicate:BG,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),$G=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function jG(t){return!(t===null||!$G.test(t)||t[t.length-1]==="_")}function qG(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}var zG=/^[-+]?[0-9]+e/;function GG(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(kt.isNegativeZero(t))return"-0.0";return r=t.toString(10),zG.test(r)?r.replace("e",".e"):r}function KG(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||kt.isNegativeZero(t))}var QG=new Vt("tag:yaml.org,2002:float",{kind:"scalar",resolve:jG,construct:qG,predicate:KG,represent:GG,defaultStyle:"lowercase"}),ZG=kG.extend({implicit:[DG,OG,WG,QG]}),YG=ZG,dP=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),hP=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function XG(t){return t===null?!1:dP.exec(t)!==null||hP.exec(t)!==null}function JG(t){var e,r,n,i,o,s,l,u=0,p=null,m,d,g;if(e=dP.exec(t),e===null&&(e=hP.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(o=+e[4],s=+e[5],l=+e[6],e[7]){for(u=e[7].slice(0,3);u.length<3;)u+="0";u=+u}return e[9]&&(m=+e[10],d=+(e[11]||0),p=(m*60+d)*6e4,e[9]==="-"&&(p=-p)),g=new Date(Date.UTC(r,n,i,o,s,l,u)),p&&g.setTime(g.getTime()-p),g}function eK(t){return t.toISOString()}var tK=new Vt("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:XG,construct:JG,instanceOf:Date,represent:eK});function rK(t){return t==="<<"||t===null}var nK=new Vt("tag:yaml.org,2002:merge",{kind:"scalar",resolve:rK}),rS=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function iK(t){if(t===null)return!1;var e,r,n=0,i=t.length,o=rS;for(r=0;r<i;r++)if(e=o.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}function oK(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,o=rS,s=0,l=[];for(e=0;e<i;e++)e%4===0&&e&&(l.push(s>>16&255),l.push(s>>8&255),l.push(s&255)),s=s<<6|o.indexOf(n.charAt(e));return r=i%4*6,r===0?(l.push(s>>16&255),l.push(s>>8&255),l.push(s&255)):r===18?(l.push(s>>10&255),l.push(s>>2&255)):r===12&&l.push(s>>4&255),new Uint8Array(l)}function aK(t){var e="",r=0,n,i,o=t.length,s=rS;for(n=0;n<o;n++)n%3===0&&n&&(e+=s[r>>18&63],e+=s[r>>12&63],e+=s[r>>6&63],e+=s[r&63]),r=(r<<8)+t[n];return i=o%3,i===0?(e+=s[r>>18&63],e+=s[r>>12&63],e+=s[r>>6&63],e+=s[r&63]):i===2?(e+=s[r>>10&63],e+=s[r>>4&63],e+=s[r<<2&63],e+=s[64]):i===1&&(e+=s[r>>2&63],e+=s[r<<4&63],e+=s[64],e+=s[64]),e}function sK(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var cK=new Vt("tag:yaml.org,2002:binary",{kind:"scalar",resolve:iK,construct:oK,predicate:sK,represent:aK}),lK=Object.prototype.hasOwnProperty,uK=Object.prototype.toString;function pK(t){if(t===null)return!0;var e=[],r,n,i,o,s,l=t;for(r=0,n=l.length;r<n;r+=1){if(i=l[r],s=!1,uK.call(i)!=="[object Object]")return!1;for(o in i)if(lK.call(i,o))if(!s)s=!0;else return!1;if(!s)return!1;if(e.indexOf(o)===-1)e.push(o);else return!1}return!0}function fK(t){return t!==null?t:[]}var mK=new Vt("tag:yaml.org,2002:omap",{kind:"sequence",resolve:pK,construct:fK}),dK=Object.prototype.toString;function hK(t){if(t===null)return!0;var e,r,n,i,o,s=t;for(o=new Array(s.length),e=0,r=s.length;e<r;e+=1){if(n=s[e],dK.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;o[e]=[i[0],n[i[0]]]}return!0}function gK(t){if(t===null)return[];var e,r,n,i,o,s=t;for(o=new Array(s.length),e=0,r=s.length;e<r;e+=1)n=s[e],i=Object.keys(n),o[e]=[i[0],n[i[0]]];return o}var yK=new Vt("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:hK,construct:gK}),xK=Object.prototype.hasOwnProperty;function TK(t){if(t===null)return!0;var e,r=t;for(e in r)if(xK.call(r,e)&&r[e]!==null)return!1;return!0}function SK(t){return t!==null?t:{}}var vK=new Vt("tag:yaml.org,2002:set",{kind:"mapping",resolve:TK,construct:SK}),nS=YG.extend({implicit:[tK,nK],explicit:[cK,mK,yK,vK]}),fo=Object.prototype.hasOwnProperty,Cf=1,gP=2,yP=3,Of=4,ZT=1,bK=2,Xk=3,wK=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,_K=/[\x85\u2028\u2029]/,EK=/[,\[\]\{\}]/,xP=/^(?:!|!!|![a-z\-]+!)$/i,TP=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Jk(t){return Object.prototype.toString.call(t)}function Zn(t){return t===10||t===13}function ia(t){return t===9||t===32}function Rr(t){return t===9||t===32||t===10||t===13}function ws(t){return t===44||t===91||t===93||t===123||t===125}function RK(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function kK(t){return t===120?2:t===117?4:t===85?8:0}function PK(t){return 48<=t&&t<=57?t-48:-1}function eP(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}function AK(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var SP=new Array(256),vP=new Array(256);for(na=0;na<256;na++)SP[na]=eP(na)?1:0,vP[na]=eP(na);var na;function MK(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||nS,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function bP(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=yG(r),new Er(e,r)}function pe(t,e){throw bP(t,e)}function Nf(t,e){t.onWarning&&t.onWarning.call(null,bP(t,e))}var tP={YAML:function(e,r,n){var i,o,s;e.version!==null&&pe(e,"duplication of %YAML directive"),n.length!==1&&pe(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&pe(e,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),s=parseInt(i[2],10),o!==1&&pe(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=s<2,s!==1&&s!==2&&Nf(e,"unsupported YAML version of the document")},TAG:function(e,r,n){var i,o;n.length!==2&&pe(e,"TAG directive accepts exactly two arguments"),i=n[0],o=n[1],xP.test(i)||pe(e,"ill-formed tag handle (first argument) of the TAG directive"),fo.call(e.tagMap,i)&&pe(e,'there is a previously declared suffix for "'+i+'" tag handle'),TP.test(o)||pe(e,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{pe(e,"tag prefix is malformed: "+o)}e.tagMap[i]=o}};function po(t,e,r,n){var i,o,s,l;if(e<r){if(l=t.input.slice(e,r),n)for(i=0,o=l.length;i<o;i+=1)s=l.charCodeAt(i),s===9||32<=s&&s<=1114111||pe(t,"expected valid JSON character");else wK.test(l)&&pe(t,"the stream contains non-printable characters");t.result+=l}}function rP(t,e,r,n){var i,o,s,l;for(kt.isObject(r)||pe(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),s=0,l=i.length;s<l;s+=1)o=i[s],fo.call(e,o)||(e[o]=r[o],n[o]=!0)}function _s(t,e,r,n,i,o,s,l,u){var p,m;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),p=0,m=i.length;p<m;p+=1)Array.isArray(i[p])&&pe(t,"nested arrays are not supported inside keys"),typeof i=="object"&&Jk(i[p])==="[object Object]"&&(i[p]="[object Object]");if(typeof i=="object"&&Jk(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(p=0,m=o.length;p<m;p+=1)rP(t,e,o[p],r);else rP(t,e,o,r);else!t.json&&!fo.call(r,i)&&fo.call(e,i)&&(t.line=s||t.line,t.lineStart=l||t.lineStart,t.position=u||t.position,pe(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):e[i]=o,delete r[i];return e}function iS(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):pe(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function vt(t,e,r){for(var n=0,i=t.input.charCodeAt(t.position);i!==0;){for(;ia(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(Zn(i))for(iS(t),i=t.input.charCodeAt(t.position),n++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return r!==-1&&n!==0&&t.lineIndent<r&&Nf(t,"deficient indentation"),n}function Hf(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||Rr(r)))}function oS(t,e){e===1?t.result+=" ":e>1&&(t.result+=kt.repeat(`
`,e-1))}function DK(t,e,r){var n,i,o,s,l,u,p,m,d=t.kind,g=t.result,x;if(x=t.input.charCodeAt(t.position),Rr(x)||ws(x)||x===35||x===38||x===42||x===33||x===124||x===62||x===39||x===34||x===37||x===64||x===96||(x===63||x===45)&&(i=t.input.charCodeAt(t.position+1),Rr(i)||r&&ws(i)))return!1;for(t.kind="scalar",t.result="",o=s=t.position,l=!1;x!==0;){if(x===58){if(i=t.input.charCodeAt(t.position+1),Rr(i)||r&&ws(i))break}else if(x===35){if(n=t.input.charCodeAt(t.position-1),Rr(n))break}else{if(t.position===t.lineStart&&Hf(t)||r&&ws(x))break;if(Zn(x))if(u=t.line,p=t.lineStart,m=t.lineIndent,vt(t,!1,-1),t.lineIndent>=e){l=!0,x=t.input.charCodeAt(t.position);continue}else{t.position=s,t.line=u,t.lineStart=p,t.lineIndent=m;break}}l&&(po(t,o,s,!1),oS(t,t.line-u),o=s=t.position,l=!1),ia(x)||(s=t.position+1),x=t.input.charCodeAt(++t.position)}return po(t,o,s,!1),t.result?!0:(t.kind=d,t.result=g,!1)}function FK(t,e){var r,n,i;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(po(t,n,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)n=t.position,t.position++,i=t.position;else return!0;else Zn(r)?(po(t,n,i,!0),oS(t,vt(t,!1,e)),n=i=t.position):t.position===t.lineStart&&Hf(t)?pe(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);pe(t,"unexpected end of the stream within a single quoted scalar")}function IK(t,e){var r,n,i,o,s,l;if(l=t.input.charCodeAt(t.position),l!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(l=t.input.charCodeAt(t.position))!==0;){if(l===34)return po(t,r,t.position,!0),t.position++,!0;if(l===92){if(po(t,r,t.position,!0),l=t.input.charCodeAt(++t.position),Zn(l))vt(t,!1,e);else if(l<256&&SP[l])t.result+=vP[l],t.position++;else if((s=kK(l))>0){for(i=s,o=0;i>0;i--)l=t.input.charCodeAt(++t.position),(s=RK(l))>=0?o=(o<<4)+s:pe(t,"expected hexadecimal character");t.result+=AK(o),t.position++}else pe(t,"unknown escape sequence");r=n=t.position}else Zn(l)?(po(t,r,n,!0),oS(t,vt(t,!1,e)),r=n=t.position):t.position===t.lineStart&&Hf(t)?pe(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}pe(t,"unexpected end of the stream within a double quoted scalar")}function CK(t,e){var r=!0,n,i,o,s=t.tag,l,u=t.anchor,p,m,d,g,x,b=Object.create(null),v,I,F,V;if(V=t.input.charCodeAt(t.position),V===91)m=93,x=!1,l=[];else if(V===123)m=125,x=!0,l={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=l),V=t.input.charCodeAt(++t.position);V!==0;){if(vt(t,!0,e),V=t.input.charCodeAt(t.position),V===m)return t.position++,t.tag=s,t.anchor=u,t.kind=x?"mapping":"sequence",t.result=l,!0;r?V===44&&pe(t,"expected the node content, but found ','"):pe(t,"missed comma between flow collection entries"),I=v=F=null,d=g=!1,V===63&&(p=t.input.charCodeAt(t.position+1),Rr(p)&&(d=g=!0,t.position++,vt(t,!0,e))),n=t.line,i=t.lineStart,o=t.position,Es(t,e,Cf,!1,!0),I=t.tag,v=t.result,vt(t,!0,e),V=t.input.charCodeAt(t.position),(g||t.line===n)&&V===58&&(d=!0,V=t.input.charCodeAt(++t.position),vt(t,!0,e),Es(t,e,Cf,!1,!0),F=t.result),x?_s(t,l,b,I,v,F,n,i,o):d?l.push(_s(t,null,b,I,v,F,n,i,o)):l.push(v),vt(t,!0,e),V=t.input.charCodeAt(t.position),V===44?(r=!0,V=t.input.charCodeAt(++t.position)):r=!1}pe(t,"unexpected end of the stream within a flow collection")}function OK(t,e){var r,n,i=ZT,o=!1,s=!1,l=e,u=0,p=!1,m,d;if(d=t.input.charCodeAt(t.position),d===124)n=!1;else if(d===62)n=!0;else return!1;for(t.kind="scalar",t.result="";d!==0;)if(d=t.input.charCodeAt(++t.position),d===43||d===45)ZT===i?i=d===43?Xk:bK:pe(t,"repeat of a chomping mode identifier");else if((m=PK(d))>=0)m===0?pe(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?pe(t,"repeat of an indentation width identifier"):(l=e+m-1,s=!0);else break;if(ia(d)){do d=t.input.charCodeAt(++t.position);while(ia(d));if(d===35)do d=t.input.charCodeAt(++t.position);while(!Zn(d)&&d!==0)}for(;d!==0;){for(iS(t),t.lineIndent=0,d=t.input.charCodeAt(t.position);(!s||t.lineIndent<l)&&d===32;)t.lineIndent++,d=t.input.charCodeAt(++t.position);if(!s&&t.lineIndent>l&&(l=t.lineIndent),Zn(d)){u++;continue}if(t.lineIndent<l){i===Xk?t.result+=kt.repeat(`
`,o?1+u:u):i===ZT&&o&&(t.result+=`
`);break}for(n?ia(d)?(p=!0,t.result+=kt.repeat(`
`,o?1+u:u)):p?(p=!1,t.result+=kt.repeat(`
`,u+1)):u===0?o&&(t.result+=" "):t.result+=kt.repeat(`
`,u):t.result+=kt.repeat(`
`,o?1+u:u),o=!0,s=!0,u=0,r=t.position;!Zn(d)&&d!==0;)d=t.input.charCodeAt(++t.position);po(t,r,t.position,!1)}return!0}function nP(t,e){var r,n=t.tag,i=t.anchor,o=[],s,l=!1,u;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),u=t.input.charCodeAt(t.position);u!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,pe(t,"tab characters must not be used in indentation")),!(u!==45||(s=t.input.charCodeAt(t.position+1),!Rr(s))));){if(l=!0,t.position++,vt(t,!0,-1)&&t.lineIndent<=e){o.push(null),u=t.input.charCodeAt(t.position);continue}if(r=t.line,Es(t,e,yP,!1,!0),o.push(t.result),vt(t,!0,-1),u=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&u!==0)pe(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return l?(t.tag=n,t.anchor=i,t.kind="sequence",t.result=o,!0):!1}function NK(t,e,r){var n,i,o,s,l,u,p=t.tag,m=t.anchor,d={},g=Object.create(null),x=null,b=null,v=null,I=!1,F=!1,V;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=d),V=t.input.charCodeAt(t.position);V!==0;){if(!I&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,pe(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),o=t.line,(V===63||V===58)&&Rr(n))V===63?(I&&(_s(t,d,g,x,b,null,s,l,u),x=b=v=null),F=!0,I=!0,i=!0):I?(I=!1,i=!0):pe(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,V=n;else{if(s=t.line,l=t.lineStart,u=t.position,!Es(t,r,gP,!1,!0))break;if(t.line===o){for(V=t.input.charCodeAt(t.position);ia(V);)V=t.input.charCodeAt(++t.position);if(V===58)V=t.input.charCodeAt(++t.position),Rr(V)||pe(t,"a whitespace character is expected after the key-value separator within a block mapping"),I&&(_s(t,d,g,x,b,null,s,l,u),x=b=v=null),F=!0,I=!1,i=!1,x=t.tag,b=t.result;else if(F)pe(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=p,t.anchor=m,!0}else if(F)pe(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=p,t.anchor=m,!0}if((t.line===o||t.lineIndent>e)&&(I&&(s=t.line,l=t.lineStart,u=t.position),Es(t,e,Of,!0,i)&&(I?b=t.result:v=t.result),I||(_s(t,d,g,x,b,v,s,l,u),x=b=v=null),vt(t,!0,-1),V=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&V!==0)pe(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return I&&_s(t,d,g,x,b,null,s,l,u),F&&(t.tag=p,t.anchor=m,t.kind="mapping",t.result=d),F}function LK(t){var e,r=!1,n=!1,i,o,s;if(s=t.input.charCodeAt(t.position),s!==33)return!1;if(t.tag!==null&&pe(t,"duplication of a tag property"),s=t.input.charCodeAt(++t.position),s===60?(r=!0,s=t.input.charCodeAt(++t.position)):s===33?(n=!0,i="!!",s=t.input.charCodeAt(++t.position)):i="!",e=t.position,r){do s=t.input.charCodeAt(++t.position);while(s!==0&&s!==62);t.position<t.length?(o=t.input.slice(e,t.position),s=t.input.charCodeAt(++t.position)):pe(t,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!Rr(s);)s===33&&(n?pe(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),xP.test(i)||pe(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),s=t.input.charCodeAt(++t.position);o=t.input.slice(e,t.position),EK.test(o)&&pe(t,"tag suffix cannot contain flow indicator characters")}o&&!TP.test(o)&&pe(t,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{pe(t,"tag name is malformed: "+o)}return r?t.tag=o:fo.call(t.tagMap,i)?t.tag=t.tagMap[i]+o:i==="!"?t.tag="!"+o:i==="!!"?t.tag="tag:yaml.org,2002:"+o:pe(t,'undeclared tag handle "'+i+'"'),!0}function UK(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&pe(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!Rr(r)&&!ws(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&pe(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function HK(t){var e,r,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!Rr(n)&&!ws(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&pe(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),fo.call(t.anchorMap,r)||pe(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],vt(t,!0,-1),!0}function Es(t,e,r,n,i){var o,s,l,u=1,p=!1,m=!1,d,g,x,b,v,I;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=s=l=Of===r||yP===r,n&&vt(t,!0,-1)&&(p=!0,t.lineIndent>e?u=1:t.lineIndent===e?u=0:t.lineIndent<e&&(u=-1)),u===1)for(;LK(t)||UK(t);)vt(t,!0,-1)?(p=!0,l=o,t.lineIndent>e?u=1:t.lineIndent===e?u=0:t.lineIndent<e&&(u=-1)):l=!1;if(l&&(l=p||i),(u===1||Of===r)&&(Cf===r||gP===r?v=e:v=e+1,I=t.position-t.lineStart,u===1?l&&(nP(t,I)||NK(t,I,v))||CK(t,v)?m=!0:(s&&OK(t,v)||FK(t,v)||IK(t,v)?m=!0:HK(t)?(m=!0,(t.tag!==null||t.anchor!==null)&&pe(t,"alias node should not have any properties")):DK(t,v,Cf===r)&&(m=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):u===0&&(m=l&&nP(t,I))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&pe(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),d=0,g=t.implicitTypes.length;d<g;d+=1)if(b=t.implicitTypes[d],b.resolve(t.result)){t.result=b.construct(t.result),t.tag=b.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(fo.call(t.typeMap[t.kind||"fallback"],t.tag))b=t.typeMap[t.kind||"fallback"][t.tag];else for(b=null,x=t.typeMap.multi[t.kind||"fallback"],d=0,g=x.length;d<g;d+=1)if(t.tag.slice(0,x[d].tag.length)===x[d].tag){b=x[d];break}b||pe(t,"unknown tag !<"+t.tag+">"),t.result!==null&&b.kind!==t.kind&&pe(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+b.kind+'", not "'+t.kind+'"'),b.resolve(t.result,t.tag)?(t.result=b.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):pe(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||m}function VK(t){var e=t.position,r,n,i,o=!1,s;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(s=t.input.charCodeAt(t.position))!==0&&(vt(t,!0,-1),s=t.input.charCodeAt(t.position),!(t.lineIndent>0||s!==37));){for(o=!0,s=t.input.charCodeAt(++t.position),r=t.position;s!==0&&!Rr(s);)s=t.input.charCodeAt(++t.position);for(n=t.input.slice(r,t.position),i=[],n.length<1&&pe(t,"directive name must not be less than one character in length");s!==0;){for(;ia(s);)s=t.input.charCodeAt(++t.position);if(s===35){do s=t.input.charCodeAt(++t.position);while(s!==0&&!Zn(s));break}if(Zn(s))break;for(r=t.position;s!==0&&!Rr(s);)s=t.input.charCodeAt(++t.position);i.push(t.input.slice(r,t.position))}s!==0&&iS(t),fo.call(tP,n)?tP[n](t,n,i):Nf(t,'unknown document directive "'+n+'"')}if(vt(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,vt(t,!0,-1)):o&&pe(t,"directives end mark is expected"),Es(t,t.lineIndent-1,Of,!1,!0),vt(t,!0,-1),t.checkLineBreaks&&_K.test(t.input.slice(e,t.position))&&Nf(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&Hf(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,vt(t,!0,-1));return}if(t.position<t.length-1)pe(t,"end of the stream or a document separator is expected");else return}function wP(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new MK(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,pe(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)VK(r);return r.documents}function BK(t,e,r){e!==null&&typeof e=="object"&&typeof r>"u"&&(r=e,e=null);var n=wP(t,r);if(typeof e!="function")return n;for(var i=0,o=n.length;i<o;i+=1)e(n[i])}function WK(t,e){var r=wP(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new Er("expected a single document in the stream, but found more")}}var $K=BK,jK=WK,_P={loadAll:$K,load:jK},EP=Object.prototype.toString,RP=Object.prototype.hasOwnProperty,aS=65279,qK=9,ml=10,zK=13,GK=32,KK=33,QK=34,XT=35,ZK=37,YK=38,XK=39,JK=42,kP=44,e4=45,Lf=58,t4=61,r4=62,n4=63,i4=64,PP=91,AP=93,o4=96,MP=123,a4=124,DP=125,Zt={};Zt[0]="\\0";Zt[7]="\\a";Zt[8]="\\b";Zt[9]="\\t";Zt[10]="\\n";Zt[11]="\\v";Zt[12]="\\f";Zt[13]="\\r";Zt[27]="\\e";Zt[34]='\\"';Zt[92]="\\\\";Zt[133]="\\N";Zt[160]="\\_";Zt[8232]="\\L";Zt[8233]="\\P";var s4=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],c4=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function l4(t,e){var r,n,i,o,s,l,u;if(e===null)return{};for(r={},n=Object.keys(e),i=0,o=n.length;i<o;i+=1)s=n[i],l=String(e[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),u=t.compiledTypeMap.fallback[s],u&&RP.call(u.styleAliases,l)&&(l=u.styleAliases[l]),r[s]=l;return r}function u4(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else if(t<=4294967295)r="U",n=8;else throw new Er("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+kt.repeat("0",n-e.length)+e}var p4=1,dl=2;function f4(t){this.schema=t.schema||nS,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=kt.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=l4(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?dl:p4,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function iP(t,e){for(var r=kt.repeat(" ",e),n=0,i=-1,o="",s,l=t.length;n<l;)i=t.indexOf(`
`,n),i===-1?(s=t.slice(n),n=l):(s=t.slice(n,i+1),n=i+1),s.length&&s!==`
`&&(o+=r),o+=s;return o}function JT(t,e){return`
`+kt.repeat(" ",t.indent*e)}function m4(t,e){var r,n,i;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(i=t.implicitTypes[r],i.resolve(e))return!0;return!1}function Uf(t){return t===GK||t===qK}function hl(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==aS||65536<=t&&t<=1114111}function oP(t){return hl(t)&&t!==aS&&t!==zK&&t!==ml}function aP(t,e,r){var n=oP(t),i=n&&!Uf(t);return(r?n:n&&t!==kP&&t!==PP&&t!==AP&&t!==MP&&t!==DP)&&t!==XT&&!(e===Lf&&!i)||oP(e)&&!Uf(e)&&t===XT||e===Lf&&i}function d4(t){return hl(t)&&t!==aS&&!Uf(t)&&t!==e4&&t!==n4&&t!==Lf&&t!==kP&&t!==PP&&t!==AP&&t!==MP&&t!==DP&&t!==XT&&t!==YK&&t!==JK&&t!==KK&&t!==a4&&t!==t4&&t!==r4&&t!==XK&&t!==QK&&t!==ZK&&t!==i4&&t!==o4}function h4(t){return!Uf(t)&&t!==Lf}function pl(t,e){var r=t.charCodeAt(e),n;return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function FP(t){var e=/^\n* /;return e.test(t)}var IP=1,eS=2,CP=3,OP=4,bs=5;function g4(t,e,r,n,i,o,s,l){var u,p=0,m=null,d=!1,g=!1,x=n!==-1,b=-1,v=d4(pl(t,0))&&h4(pl(t,t.length-1));if(e||s)for(u=0;u<t.length;p>=65536?u+=2:u++){if(p=pl(t,u),!hl(p))return bs;v=v&&aP(p,m,l),m=p}else{for(u=0;u<t.length;p>=65536?u+=2:u++){if(p=pl(t,u),p===ml)d=!0,x&&(g=g||u-b-1>n&&t[b+1]!==" ",b=u);else if(!hl(p))return bs;v=v&&aP(p,m,l),m=p}g=g||x&&u-b-1>n&&t[b+1]!==" "}return!d&&!g?v&&!s&&!i(t)?IP:o===dl?bs:eS:r>9&&FP(t)?bs:s?o===dl?bs:eS:g?OP:CP}function y4(t,e,r,n,i){t.dump=function(){if(e.length===0)return t.quotingType===dl?'""':"''";if(!t.noCompatMode&&(s4.indexOf(e)!==-1||c4.test(e)))return t.quotingType===dl?'"'+e+'"':"'"+e+"'";var o=t.indent*Math.max(1,r),s=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),l=n||t.flowLevel>-1&&r>=t.flowLevel;function u(p){return m4(t,p)}switch(g4(e,l,t.indent,s,u,t.quotingType,t.forceQuotes&&!n,i)){case IP:return e;case eS:return"'"+e.replace(/'/g,"''")+"'";case CP:return"|"+sP(e,t.indent)+cP(iP(e,o));case OP:return">"+sP(e,t.indent)+cP(iP(x4(e,s),o));case bs:return'"'+T4(e)+'"';default:throw new Er("impossible error: invalid scalar style")}}()}function sP(t,e){var r=FP(t)?String(e):"",n=t[t.length-1]===`
`,i=n&&(t[t.length-2]===`
`||t===`
`),o=i?"+":n?"":"-";return r+o+`
`}function cP(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function x4(t,e){for(var r=/(\n+)([^\n]*)/g,n=function(){var p=t.indexOf(`
`);return p=p!==-1?p:t.length,r.lastIndex=p,lP(t.slice(0,p),e)}(),i=t[0]===`
`||t[0]===" ",o,s;s=r.exec(t);){var l=s[1],u=s[2];o=u[0]===" ",n+=l+(!i&&!o&&u!==""?`
`:"")+lP(u,e),i=o}return n}function lP(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,n,i=0,o,s=0,l=0,u="";n=r.exec(t);)l=n.index,l-i>e&&(o=s>i?s:l,u+=`
`+t.slice(i,o),i=o+1),s=l;return u+=`
`,t.length-i>e&&s>i?u+=t.slice(i,s)+`
`+t.slice(s+1):u+=t.slice(i),u.slice(1)}function T4(t){for(var e="",r=0,n,i=0;i<t.length;r>=65536?i+=2:i++)r=pl(t,i),n=Zt[r],!n&&hl(r)?(e+=t[i],r>=65536&&(e+=t[i+1])):e+=n||u4(r);return e}function S4(t,e,r){var n="",i=t.tag,o,s,l;for(o=0,s=r.length;o<s;o+=1)l=r[o],t.replacer&&(l=t.replacer.call(r,String(o),l)),(Mi(t,e,l,!1,!1)||typeof l>"u"&&Mi(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=i,t.dump="["+n+"]"}function uP(t,e,r,n){var i="",o=t.tag,s,l,u;for(s=0,l=r.length;s<l;s+=1)u=r[s],t.replacer&&(u=t.replacer.call(r,String(s),u)),(Mi(t,e+1,u,!0,!0,!1,!0)||typeof u>"u"&&Mi(t,e+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=JT(t,e)),t.dump&&ml===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=o,t.dump=i||"[]"}function v4(t,e,r){var n="",i=t.tag,o=Object.keys(r),s,l,u,p,m;for(s=0,l=o.length;s<l;s+=1)m="",n!==""&&(m+=", "),t.condenseFlow&&(m+='"'),u=o[s],p=r[u],t.replacer&&(p=t.replacer.call(r,u,p)),Mi(t,e,u,!1,!1)&&(t.dump.length>1024&&(m+="? "),m+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),Mi(t,e,p,!1,!1)&&(m+=t.dump,n+=m));t.tag=i,t.dump="{"+n+"}"}function b4(t,e,r,n){var i="",o=t.tag,s=Object.keys(r),l,u,p,m,d,g;if(t.sortKeys===!0)s.sort();else if(typeof t.sortKeys=="function")s.sort(t.sortKeys);else if(t.sortKeys)throw new Er("sortKeys must be a boolean or a function");for(l=0,u=s.length;l<u;l+=1)g="",(!n||i!=="")&&(g+=JT(t,e)),p=s[l],m=r[p],t.replacer&&(m=t.replacer.call(r,p,m)),Mi(t,e+1,p,!0,!0,!0)&&(d=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,d&&(t.dump&&ml===t.dump.charCodeAt(0)?g+="?":g+="? "),g+=t.dump,d&&(g+=JT(t,e)),Mi(t,e+1,m,!0,d)&&(t.dump&&ml===t.dump.charCodeAt(0)?g+=":":g+=": ",g+=t.dump,i+=g));t.tag=o,t.dump=i||"{}"}function pP(t,e,r){var n,i,o,s,l,u;for(i=r?t.explicitTypes:t.implicitTypes,o=0,s=i.length;o<s;o+=1)if(l=i[o],(l.instanceOf||l.predicate)&&(!l.instanceOf||typeof e=="object"&&e instanceof l.instanceOf)&&(!l.predicate||l.predicate(e))){if(r?l.multi&&l.representName?t.tag=l.representName(e):t.tag=l.tag:t.tag="?",l.represent){if(u=t.styleMap[l.tag]||l.defaultStyle,EP.call(l.represent)==="[object Function]")n=l.represent(e,u);else if(RP.call(l.represent,u))n=l.represent[u](e,u);else throw new Er("!<"+l.tag+'> tag resolver accepts not "'+u+'" style');t.dump=n}return!0}return!1}function Mi(t,e,r,n,i,o,s){t.tag=null,t.dump=r,pP(t,r,!1)||pP(t,r,!0);var l=EP.call(t.dump),u=n,p;n&&(n=t.flowLevel<0||t.flowLevel>e);var m=l==="[object Object]"||l==="[object Array]",d,g;if(m&&(d=t.duplicates.indexOf(r),g=d!==-1),(t.tag!==null&&t.tag!=="?"||g||t.indent!==2&&e>0)&&(i=!1),g&&t.usedDuplicates[d])t.dump="*ref_"+d;else{if(m&&g&&!t.usedDuplicates[d]&&(t.usedDuplicates[d]=!0),l==="[object Object]")n&&Object.keys(t.dump).length!==0?(b4(t,e,t.dump,i),g&&(t.dump="&ref_"+d+t.dump)):(v4(t,e,t.dump),g&&(t.dump="&ref_"+d+" "+t.dump));else if(l==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!s&&e>0?uP(t,e-1,t.dump,i):uP(t,e,t.dump,i),g&&(t.dump="&ref_"+d+t.dump)):(S4(t,e,t.dump),g&&(t.dump="&ref_"+d+" "+t.dump));else if(l==="[object String]")t.tag!=="?"&&y4(t,t.dump,e,o,u);else{if(l==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new Er("unacceptable kind of an object to dump "+l)}t.tag!==null&&t.tag!=="?"&&(p=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?p="!"+p:p.slice(0,18)==="tag:yaml.org,2002:"?p="!!"+p.slice(18):p="!<"+p+">",t.dump=p+" "+t.dump)}return!0}function w4(t,e){var r=[],n=[],i,o;for(tS(t,r,n),i=0,o=n.length;i<o;i+=1)e.duplicates.push(r[n[i]]);e.usedDuplicates=new Array(o)}function tS(t,e,r){var n,i,o;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(e.push(t),Array.isArray(t))for(i=0,o=t.length;i<o;i+=1)tS(t[i],e,r);else for(n=Object.keys(t),i=0,o=n.length;i<o;i+=1)tS(t[n[i]],e,r)}function _4(t,e){e=e||{};var r=new f4(e);r.noRefs||w4(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),Mi(r,0,n,!0,!0)?r.dump+`
`:""}var E4=_4,R4={dump:E4};function sS(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var NP=Vt;var LP=nS,k4=_P.load,Xme=_P.loadAll,UP=R4.dump;var Jme=sS("safeLoad","load"),ede=sS("safeLoadAll","loadAll"),tde=sS("safeDump","dump");var Vf=class{constructor(e,r){this.data=e;this.opts=r}represent(){let e=UP(this.data,Object.assign({replacer:D4,schema:A4},this.opts));return e=e.trim(),e.includes(`
`)&&(e=`
`+e),e}},P4=new NP("!format",{kind:"scalar",resolve:()=>!1,instanceOf:Vf,represent:t=>t.represent()}),A4=LP.extend({implicit:[P4]}),cS=t=>typeof t=="object"&&t!=null;function M4(t){if(cS(t))return Object.values(t).every(e=>!cS(e)&&!Array.isArray(e));if(Array.isArray(t))return t.every(e=>!cS(e)&&!Array.isArray(e))}function D4(t,e){return t===""?e:M4(e)?new Vf(e,{flowLevel:0}):e}var lS=["addSelection","addSelectionAfter","addSelectionBefore","breakLine","clearAndSetSelection","copyToClipboard","cutToClipboard","decrement","deselect","editNewLineAfter","editNewLineBefore","experimental.setInstanceReference","extractVariable","findInDocument","findInWorkspace","flashTargets","foldRegion","followLink","followLinkAside","gitAccept","gitRevert","gitStage","gitUnstage","increment","indentLine","insertCopyAfter","insertCopyBefore","insertEmptyLineAfter","insertEmptyLineBefore","insertEmptyLinesAround","joinLines","outdentLine","randomizeTargets","remove","rename","revealDefinition","revealTypeDefinition","reverseTargets","scrollToBottom","scrollToCenter","scrollToTop","setSelection","setSelectionAfter","setSelectionBefore","showDebugHover","showHover","showQuickFix","showReferences","sortTargets","toggleLineBreakpoint","toggleLineComment","unfoldRegion","private.getTargets","private.setKeyboardTarget","private.showParseTree"],I4=["callAsFunction","editNew","executeCommand","generateSnippet","getText","highlight","insertSnippet","moveToTarget","pasteFromClipboard","replace","replaceWithTarget","rewrapWithPairedDelimiter","swapTargets","wrapWithPairedDelimiter","wrapWithSnippet","parsed"],VP=[...lS,...I4];var C4=["angleBrackets","backtickQuotes","curlyBrackets","doubleQuotes","escapedDoubleQuotes","escapedParentheses","escapedSingleQuotes","escapedSquareBrackets","parentheses","singleQuotes","squareBrackets","tripleBacktickQuotes","tripleDoubleQuotes","tripleSingleQuotes"],O4=["string","any","collectionBoundary"],Bf=[...C4,...O4],oa=["argumentOrParameter","argumentList","anonymousFunction","attribute","branch","class","className","collectionItem","collectionKey","comment","private.fieldAccess","functionCall","functionCallee","functionName","ifStatement","instance","list","map","name","namedFunction","regularExpression","statement","string","type","value","condition","section","sectionLevelOne","sectionLevelTwo","sectionLevelThree","sectionLevelFour","sectionLevelFive","sectionLevelSix","selector","private.switchStatementSubject","unit","xmlBothTags","xmlElement","xmlEndTag","xmlStartTag","part","chapter","subSection","subSubSection","namedParagraph","subParagraph","environment","character","word","token","identifier","line","sentence","paragraph","boundedParagraph","document","nonWhitespaceSequence","boundedNonWhitespaceSequence","url","notebookCell","command","textFragment","disqualifyDelimiter","pairDelimiter"];function BP(t){return oa.includes(t.type)}var WP=["simpleScopeTypeType","complexScopeTypeType","customRegex","pairedDelimiter","action","customAction","grapheme"],gl=class extends Error{constructor(e){super(e),this.name="NeedsInitialTalonUpdateError"}},Rs=class extends Error{constructor(){super("Custom spoken forms are not currently supported in this ide"),this.name="DisabledCustomSpokenFormsError"}};function yl(t){return t.replace(/([A-Z])/g," $1").split(" ").map(e=>e.toLowerCase()).join(" ")}function aa(t){return t.version>=7}var mo=class{constructor(e){this.hashFunction=e;this.map={}}hash(e){return this.hashFunction(e).join("\0")}set(e,r){return this.map[this.hash(e)]=r,this}has(e){return this.hash(e)in this.map}get(e){return this.map[this.hash(e)]}delete(e){return delete this.map[this.hash(e)],this}clear(){return this.map={},this}};var ks=class extends Map{constructor(r){super();this.getDefaultValue=r}get(r){let n=super.get(r);if(n!=null)return n;let i=this.getDefaultValue(r);return this.set(r,i),i}};function $P(...t){return{dispose(){t.forEach(({dispose:e})=>{try{e()}catch(r){console.error(r)}})}}}function xl(t){return typeof t=="string"||t instanceof String}function Wf(t){let[e,...r]=t;return L4(e,r)}function L4(t,e){let r;if(xl(t)){let n=t,[i,o,...s]=e;r={version:0,spokenForm:n,action:i,targets:o,extraArgs:s,usePrePhraseSnapshot:!1}}else r=t;return r}function Tl(t,e){let r=new Map;return t.forEach(n=>{let i=e(n),o;r.has(i)?o=r.get(i):(o=[],r.set(i,o)),o.push(n)}),r}function jP(t){for(let e of t)return!1;return!0}function Di(t){return Object.keys(t)}function Sl(t,e){return`${t}.${e}`}function qP(t,e,r){if(t.length<2)return[...t];if(t.length===2)return e(t[0],t[1])?[t[0]]:[...t];let n=[],i=t.reduce((o,s)=>{let l=r(s),u=o.get(l);return u==null?(o.set(l,[s]),o):(o.get(l).push(s),u.length===2&&n.push(l),o)},new Map);return n.length===0?[...t]:(n.forEach(o=>{i.set(o,nl(i.get(o),e))}),t.flatMap(o=>{let s=r(o),l=i.get(s);if(l==null||l.length===0)return[];let u=l[0];return e(u,o)?(l.shift(),u):[]}))}function sa(t,e){if(t.length!==e.length)throw new Error("Lists must have the same length");return t.map((r,n)=>[r,e[n]])}var YP=Symbol.for("immer-nothing"),zP=Symbol.for("immer-draftable"),qr=Symbol.for("immer-state"),U4=process.env.NODE_ENV!=="production"?[function(t){return`The plugin for '${t}' has not been loaded into Immer. To enable the plugin, import and call \`enable${t}()\` when initializing your application.`},function(t){return`produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '${t}'`},"This object has been frozen and should not be mutated",function(t){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+t},"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.","Immer forbids circular references","The first or second argument to `produce` must be a function","The third argument to `produce` must be a function or undefined","First argument to `createDraft` must be a plain object, an array, or an immerable object","First argument to `finishDraft` must be a draft returned by `createDraft`",function(t){return`'current' expects a draft, got: ${t}`},"Object.defineProperty() cannot be used on an Immer draft","Object.setPrototypeOf() cannot be used on an Immer draft","Immer only supports deleting array indices","Immer only supports setting array indices and the 'length' property",function(t){return`'original' expects a draft, got: ${t}`}]:[];function kr(t,...e){if(process.env.NODE_ENV!=="production"){let r=U4[t],n=typeof r=="function"?r.apply(null,e):r;throw new Error(`[Immer] ${n}`)}throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Ps=Object.getPrototypeOf;function As(t){return!!t&&!!t[qr]}function la(t){return t?XP(t)||Array.isArray(t)||!!t[zP]||!!t.constructor?.[zP]||Gf(t)||Kf(t):!1}var H4=Object.prototype.constructor.toString();function XP(t){if(!t||typeof t!="object")return!1;let e=Ps(t);if(e===null)return!0;let r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===H4}function $f(t,e){zf(t)===0?Reflect.ownKeys(t).forEach(r=>{e(r,t[r],t)}):t.forEach((r,n)=>e(n,r,t))}function zf(t){let e=t[qr];return e?e.type_:Array.isArray(t)?1:Gf(t)?2:Kf(t)?3:0}function fS(t,e){return zf(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function JP(t,e,r){let n=zf(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function V4(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Gf(t){return t instanceof Map}function Kf(t){return t instanceof Set}function ca(t){return t.copy_||t.base_}function mS(t,e){if(Gf(t))return new Map(t);if(Kf(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);let r=XP(t);if(e===!0||e==="class_only"&&!r){let n=Object.getOwnPropertyDescriptors(t);delete n[qr];let i=Reflect.ownKeys(n);for(let o=0;o<i.length;o++){let s=i[o],l=n[s];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[s]={configurable:!0,writable:!0,enumerable:l.enumerable,value:t[s]})}return Object.create(Ps(t),n)}else{let n=Ps(t);if(n!==null&&r)return{...t};let i=Object.create(n);return Object.assign(i,t)}}function xS(t,e=!1){return Qf(t)||As(t)||!la(t)||(zf(t)>1&&(t.set=t.add=t.clear=t.delete=B4),Object.freeze(t),e&&Object.entries(t).forEach(([r,n])=>xS(n,!0))),t}function B4(){kr(2)}function Qf(t){return Object.isFrozen(t)}var W4={};function ua(t){let e=W4[t];return e||kr(0,t),e}var vl;function eA(){return vl}function $4(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function GP(t,e){e&&(ua("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function dS(t){hS(t),t.drafts_.forEach(j4),t.drafts_=null}function hS(t){t===vl&&(vl=t.parent_)}function KP(t){return vl=$4(vl,t)}function j4(t){let e=t[qr];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function QP(t,e){e.unfinalizedDrafts_=e.drafts_.length;let r=e.drafts_[0];return t!==void 0&&t!==r?(r[qr].modified_&&(dS(e),kr(4)),la(t)&&(t=jf(e,t),e.parent_||qf(e,t)),e.patches_&&ua("Patches").generateReplacementPatches_(r[qr].base_,t,e.patches_,e.inversePatches_)):t=jf(e,r,[]),dS(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==YP?t:void 0}function jf(t,e,r){if(Qf(e))return e;let n=e[qr];if(!n)return $f(e,(i,o)=>ZP(t,n,e,i,o,r)),e;if(n.scope_!==t)return e;if(!n.modified_)return qf(t,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;let i=n.copy_,o=i,s=!1;n.type_===3&&(o=new Set(i),i.clear(),s=!0),$f(o,(l,u)=>ZP(t,n,i,l,u,r,s)),qf(t,i,!1),r&&t.patches_&&ua("Patches").generatePatches_(n,r,t.patches_,t.inversePatches_)}return n.copy_}function ZP(t,e,r,n,i,o,s){if(process.env.NODE_ENV!=="production"&&i===r&&kr(5),As(i)){let l=o&&e&&e.type_!==3&&!fS(e.assigned_,n)?o.concat(n):void 0,u=jf(t,i,l);if(JP(r,n,u),As(u))t.canAutoFreeze_=!1;else return}else s&&r.add(i);if(la(i)&&!Qf(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;jf(t,i),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&qf(t,i)}}function qf(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&xS(e,r)}function q4(t,e){let r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:eA(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1},i=n,o=TS;r&&(i=[n],o=bl);let{revoke:s,proxy:l}=Proxy.revocable(i,o);return n.draft_=l,n.revoke_=s,l}var TS={get(t,e){if(e===qr)return t;let r=ca(t);if(!fS(r,e))return z4(t,r,e);let n=r[e];return t.finalized_||!la(n)?n:n===uS(t.base_,e)?(pS(t),t.copy_[e]=yS(n,t)):n},has(t,e){return e in ca(t)},ownKeys(t){return Reflect.ownKeys(ca(t))},set(t,e,r){let n=tA(ca(t),e);if(n?.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){let i=uS(ca(t),e),o=i?.[qr];if(o&&o.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(V4(r,i)&&(r!==void 0||fS(t.base_,e)))return!0;pS(t),gS(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return uS(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,pS(t),gS(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){let r=ca(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){kr(11)},getPrototypeOf(t){return Ps(t.base_)},setPrototypeOf(){kr(12)}},bl={};$f(TS,(t,e)=>{bl[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});bl.deleteProperty=function(t,e){return process.env.NODE_ENV!=="production"&&isNaN(parseInt(e))&&kr(13),bl.set.call(this,t,e,void 0)};bl.set=function(t,e,r){return process.env.NODE_ENV!=="production"&&e!=="length"&&isNaN(parseInt(e))&&kr(14),TS.set.call(this,t[0],e,r,t[0])};function uS(t,e){let r=t[qr];return(r?ca(r):t)[e]}function z4(t,e,r){let n=tA(e,r);return n?"value"in n?n.value:n.get?.call(t.draft_):void 0}function tA(t,e){if(!(e in t))return;let r=Ps(t);for(;r;){let n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Ps(r)}}function gS(t){t.modified_||(t.modified_=!0,t.parent_&&gS(t.parent_))}function pS(t){t.copy_||(t.copy_=mS(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var G4=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){let o=r;r=e;let s=this;return function(u=o,...p){return s.produce(u,m=>r.call(this,m,...p))}}typeof r!="function"&&kr(6),n!==void 0&&typeof n!="function"&&kr(7);let i;if(la(e)){let o=KP(this),s=yS(e,void 0),l=!0;try{i=r(s),l=!1}finally{l?dS(o):hS(o)}return GP(o,n),QP(i,o)}else if(!e||typeof e!="object"){if(i=r(e),i===void 0&&(i=e),i===YP&&(i=void 0),this.autoFreeze_&&xS(i,!0),n){let o=[],s=[];ua("Patches").generateReplacementPatches_(e,i,o,s),n(o,s)}return i}else kr(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(s,...l)=>this.produceWithPatches(s,u=>e(u,...l));let n,i;return[this.produce(e,r,(s,l)=>{n=s,i=l}),n,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){la(t)||kr(8),As(t)&&(t=K4(t));let e=KP(this),r=yS(t,void 0);return r[qr].isManual_=!0,hS(e),r}finishDraft(t,e){let r=t&&t[qr];(!r||!r.isManual_)&&kr(9);let{scope_:n}=r;return GP(n,e),QP(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){let i=e[r];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}r>-1&&(e=e.slice(r+1));let n=ua("Patches").applyPatches_;return As(t)?n(t,e):this.produce(t,i=>n(i,e))}};function yS(t,e){let r=Gf(t)?ua("MapSet").proxyMap_(t,e):Kf(t)?ua("MapSet").proxySet_(t,e):q4(t,e);return(e?e.scope_:eA()).drafts_.push(r),r}function K4(t){return As(t)||kr(10,t),rA(t)}function rA(t){if(!la(t)||Qf(t))return t;let e=t[qr],r;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=mS(t,e.scope_.immer_.useStrictShallowCopy_)}else r=mS(t,!0);return $f(r,(n,i)=>{JP(r,n,rA(i))}),e&&(e.finalized_=!1),r}var zr=new G4,Zf=zr.produce,tye=zr.produceWithPatches.bind(zr),rye=zr.setAutoFreeze.bind(zr),nye=zr.setUseStrictShallowCopy.bind(zr),iye=zr.applyPatches.bind(zr),oye=zr.createDraft.bind(zr),aye=zr.finishDraft.bind(zr);var ur=br(_A(),1),qye=ur.default.v1,zye=ur.default.v1ToV6,Gye=ur.default.v3,EA=ur.default.v4,Kye=ur.default.v5,Qye=ur.default.v6,Zye=ur.default.v6ToV1,Yye=ur.default.v7,Xye=ur.default.NIL,Jye=ur.default.MAX,exe=ur.default.version,txe=ur.default.validate,rxe=ur.default.stringify,nxe=ur.default.parse;function RA(t,e,r){if(e>=t.length)throw Error(`Expected at least ${e+1} ${r} but received only ${t.length}`);return t[e]}function hm(t,e){if(Array.isArray(t))return t.map(r=>hm(r,e));if(typeof t=="object"&&t!=null){if(g9(t))return RA(e,t.index,"placeholder value");let r={};for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=hm(t[n],e));return r}return t}function g9(t){return typeof t=="object"&&t!=null&&"type"in t&&t.type==="placeholder"}var bm=br(PA(),1);var y9={blue:"blue",green:"green",red:"red",pink:"pink",yellow:"yellow",userColor1:"navy",userColor2:"apricot",default:null},x9={ex:"ex",fox:"fox",wing:"wing",hole:"hole",frame:"frame",curve:"curve",eye:"eye",play:"play",crosshairs:"cross",bolt:"bolt",default:null},ym={cursor:"this",that:"that",source:"source",nothing:"nothing",keyboard:null,explicit:null,decoratedSymbol:null,lineNumber:null,range:null,target:null},xm={modulo100:"row",relativeUp:"up",relativeDown:"down"};function AA(t){let e=y9[t];if(e==null)throw Error(`Unknown hat color '${t}'`);return e}function MA(t){let e=x9[t];if(e==null)throw Error(`Unknown hat shape '${t}'`);return e}function MS(t,e){return Object.fromEntries(Object.entries(t).map(([r,n])=>[r,Object.fromEntries(Object.entries(n).map(([i,o])=>[i,e(o,r,i)]))]))}var T9=Object.fromEntries("air bat cap drum each fine gust harp sit jury crunch look made near odd pit quench red sun trap urge vest whale plex yank zip".split(" ").map((t,e)=>[String.fromCharCode(97+e),t])),S9=Object.fromEntries("zero one two three four five six seven eight nine".split(" ").map((t,e)=>[e.toString(),t])),v9={".":"dot",",":"comma",";":"semicolon",":":"colon","!":"bang","*":"asterisk","@":"at sign","&":"ampersand","?":"question","/":"slash","\\":"backslash","-":"dash","=":"equals","+":"plus","~":"tilde",_:"underscore","#":"hash","%":"percent","^":"caret","|":"pipe",$:"dollar","\xA3":"pound","'":"quote",'"':"double quote","`":"back tick","(":"paren",")":"right paren","{":"brace","}":"right brace","[":"square","]":"right square","<":"angle",">":"right angle","\uFFFD":"special"},DA={...T9,...S9,...v9};function ho(...t){return{defaultSpokenForms:t,isDisabledByDefault:!0,isPrivate:!1}}function Pt(...t){return{defaultSpokenForms:t,isDisabledByDefault:!0,isPrivate:!0}}var FA={pairedDelimiter:{curlyBrackets:"curly",angleBrackets:"diamond",escapedDoubleQuotes:"escaped quad",escapedSingleQuotes:"escaped twin",escapedParentheses:"escaped round",escapedSquareBrackets:"escaped box",doubleQuotes:"quad",parentheses:"round",backtickQuotes:"skis",squareBrackets:"box",singleQuotes:"twin",tripleDoubleQuotes:Pt("triple quad"),tripleSingleQuotes:Pt("triple twin"),tripleBacktickQuotes:Pt("triple skis"),any:"pair",string:"string",whitespace:"void",collectionBoundary:Pt("collection boundary")},simpleScopeTypeType:{argumentOrParameter:"arg",argumentList:"arg list",attribute:"attribute",functionCall:"call",functionCallee:"callee",className:"class name",class:"class",comment:"comment",functionName:"funk name",namedFunction:"funk",ifStatement:"if state",instance:"instance",collectionItem:"item",collectionKey:"key",anonymousFunction:"lambda",list:"list",map:"map",name:"name",regularExpression:"regex",section:"section",sectionLevelOne:ho("one section"),sectionLevelTwo:ho("two section"),sectionLevelThree:ho("three section"),sectionLevelFour:ho("four section"),sectionLevelFive:ho("five section"),sectionLevelSix:ho("six section"),selector:"selector",statement:"state",branch:"branch",type:"type",value:"value",condition:"condition",unit:"unit",xmlElement:"element",xmlBothTags:"tags",xmlStartTag:"start tag",xmlEndTag:"end tag",part:"part",chapter:"chapter",subSection:"subsection",subSubSection:"subsubsection",namedParagraph:"paragraph",subParagraph:"subparagraph",environment:"environment",command:"command",character:"char",word:"sub",token:"token",identifier:"identifier",line:"line",sentence:"sentence",paragraph:"block",boundedParagraph:"short block",document:"file",nonWhitespaceSequence:"paint",boundedNonWhitespaceSequence:"short paint",url:"link",notebookCell:"cell",string:Pt("parse tree string"),textFragment:Pt("text fragment"),disqualifyDelimiter:Pt("disqualify delimiter"),pairDelimiter:Pt("pair delimiter"),"private.fieldAccess":Pt("access"),"private.switchStatementSubject":Pt("subject")},complexScopeTypeType:{glyph:"glyph"},surroundingPairForceDirection:{left:"left",right:"right"},simpleModifier:{excludeInterior:"bounds",toRawSelection:"just",leading:"leading",trailing:"trailing",keepContentFilter:"content",keepEmptyFilter:"empty",inferPreviousMark:"its",startOf:"start of",endOf:"end of",interiorOnly:"inside",visible:"visible",extendThroughStartOf:"head",extendThroughEndOf:"tail",everyScope:"every"},modifierExtra:{first:"first",last:"last",previous:"previous",next:"next",forward:"forward",backward:"backward",ancestor:"grand"},customRegex:{},action:{addSelection:"append",addSelectionAfter:"append post",addSelectionBefore:"append pre",breakLine:"break",scrollToBottom:"bottom",toggleLineBreakpoint:"break point",cutToClipboard:"carve",scrollToCenter:"center",clearAndSetSelection:"change",remove:"chuck",insertCopyBefore:"clone up",insertCopyAfter:"clone",toggleLineComment:"comment",copyToClipboard:"copy",scrollToTop:"crown",outdentLine:"dedent",revealDefinition:"define",editNewLineBefore:"drink",insertEmptyLineBefore:"drop",extractVariable:"extract",insertEmptyLineAfter:"float",foldRegion:"fold",followLink:"follow",followLinkAside:"follow split",flashTargets:"flash",deselect:"give",highlight:"highlight",showHover:"hover",increment:"increment",decrement:"decrement",indentLine:"indent",showDebugHover:"inspect",setSelectionAfter:"post",editNewLineAfter:"pour",setSelectionBefore:"pre",insertEmptyLinesAround:"puff",showQuickFix:"quick fix",showReferences:"reference",rename:"rename",reverseTargets:"reverse",findInDocument:"scout",findInWorkspace:"scout all",randomizeTargets:"shuffle",generateSnippet:"snippet make",sortTargets:"sort",setSelection:"take",revealTypeDefinition:"type deaf",unfoldRegion:"unfold",callAsFunction:"call",swapTargets:"swap",replaceWithTarget:"bring",moveToTarget:"move",wrapWithPairedDelimiter:"wrap",wrapWithSnippet:"wrap",rewrapWithPairedDelimiter:"repack",insertSnippet:"snippet",pasteFromClipboard:"paste",joinLines:"join",gitAccept:"git accept",gitRevert:"git revert",gitStage:"git stage",gitUnstage:"git unstage","private.showParseTree":Pt("parse tree"),"experimental.setInstanceReference":ho("from"),editNew:Pt("edit new"),executeCommand:Pt("execute command"),parsed:Pt("parsed"),getText:Pt("get text"),replace:Pt("replace"),"private.getTargets":Pt("get targets"),"private.setKeyboardTarget":Pt("set keyboard target")},customAction:{},grapheme:DA};var DS=MS(FA,t=>typeof t=="string"?{defaultSpokenForms:[t],isDisabledByDefault:!1,isPrivate:!1}:t),Ii=MS(DS,({defaultSpokenForms:t,isDisabledByDefault:e,isPrivate:r})=>({spokenForms:e?[]:t,isCustom:!1,defaultSpokenForms:t,requiresTalonUpdate:!1,isPrivate:r}));var xt={rangeExclusive:"between",rangeInclusive:"past",rangeExcludingStart:null,rangeExcludingEnd:"until",listConnective:"and",swapConnective:"with",sourceDestinationConnective:"to",before:"before",after:"after",verticalRange:"slice",previous:"previous",next:"next",forward:"forward",backward:"backward"};var OA=br(CA(),1),Sm=class{constructor(e){this.mooLexer=OA.default.compile(e)}reset(e,r){let{mooState:n}=r??{};return this.mooLexer.reset(e,n),this}formatError(e,r){return this.mooLexer.formatError(e,r)}has(e){return this.mooLexer.has(e)}save(){return{mooState:this.mooLexer.save()}}next(){let e=this.mooLexer.next();return this.skipToken(e)?this.next():e}transform({value:e}){return e}skipToken(e){return e?.type==="ws"}};var Ci={};for(let t of lS){let{spokenForms:e}=Ii.action[t];for(let r of e)Ci[r]={type:"simpleActionName",value:t}}var b9=["replaceWithTarget","moveToTarget"];for(let t of b9){let{spokenForms:e}=Ii.action[t];for(let r of e)Ci[r]={type:"bringMove",value:t}}var w9=["before","after","to"];for(let t of w9){let e=xt[t==="to"?"sourceDestinationConnective":t];Ci[e]={type:"insertionMode",value:t}}for(let t of oa){let{spokenForms:e}=Ii.simpleScopeTypeType[t];for(let r of e)Ci[r]={type:"simpleScopeTypeType",value:t}}for(let t of Bf){let{spokenForms:e}=Ii.pairedDelimiter[t];for(let r of e)Ci[r]={type:"pairedDelimiter",value:t}}for(let[t,e]of Object.entries(ym))e!=null&&(Ci[e]={type:"simpleMarkType",value:t});var Oi=new Sm({ws:/[ \t]+/,placeholderTarget:{match:/<target\d*>/,value:t=>t.slice(7,-1)},token:{match:Object.keys(Ci),type:t=>Ci[t].type,value:t=>Ci[t].value}});function NA(t,e){return{name:t,target:e}}function LA(t,e,r){return{name:t,source:e,destination:r}}function vm(t,e){let r={type:"primitive"};return t!=null&&(r.modifiers=t),e!=null&&(r.mark=e),r}function UA(t,e){return{type:"primitive",insertionMode:t,target:e}}function HA(t){return{type:"containingScope",scopeType:t}}function VA(t){return{type:t}}function BA(t){return{type:"surroundingPair",delimiter:t}}function WA(t){return{type:t}}function $A(t){return{type:"target",target:{type:"placeholder",index:t.length===0?0:parseInt(t)-1}}}function FS(t){return t[0]}var _9={Lexer:Oi,ParserRules:[{name:"main",symbols:["action"],postprocess:FS},{name:"action",symbols:[Oi.has("simpleActionName")?{type:"simpleActionName"}:simpleActionName,"target"],postprocess:([t,e])=>NA(t,e)},{name:"action",symbols:[Oi.has("bringMove")?{type:"bringMove"}:bringMove,"target","destination"],postprocess:([t,e,r])=>LA(t,e,r)},{name:"destination",symbols:["primitiveDestination"],postprocess:FS},{name:"destination",symbols:[Oi.has("insertionMode")?{type:"insertionMode"}:insertionMode,"target"],postprocess:([t,e])=>UA(t,e)},{name:"target",symbols:["primitiveTarget"],postprocess:FS},{name:"primitiveTarget$ebnf$1",symbols:["modifier"]},{name:"primitiveTarget$ebnf$1",symbols:["primitiveTarget$ebnf$1","modifier"],postprocess:t=>t[0].concat([t[1]])},{name:"primitiveTarget",symbols:["primitiveTarget$ebnf$1"],postprocess:([t])=>vm(t,void 0)},{name:"primitiveTarget",symbols:["mark"],postprocess:([t])=>vm(void 0,t)},{name:"primitiveTarget$ebnf$2",symbols:["modifier"]},{name:"primitiveTarget$ebnf$2",symbols:["primitiveTarget$ebnf$2","modifier"],postprocess:t=>t[0].concat([t[1]])},{name:"primitiveTarget",symbols:["primitiveTarget$ebnf$2","mark"],postprocess:([t,e])=>vm(t,e)},{name:"modifier",symbols:["containingScopeModifier"],postprocess:([t])=>t},{name:"containingScopeModifier",symbols:["scopeType"],postprocess:([t])=>HA(t)},{name:"scopeType",symbols:[Oi.has("simpleScopeTypeType")?{type:"simpleScopeTypeType"}:simpleScopeTypeType],postprocess:([t])=>VA(t)},{name:"scopeType",symbols:[Oi.has("pairedDelimiter")?{type:"pairedDelimiter"}:pairedDelimiter],postprocess:([t])=>BA(t)},{name:"mark",symbols:[Oi.has("simpleMarkType")?{type:"simpleMarkType"}:simpleMarkType],postprocess:([t])=>WA(t)},{name:"mark",symbols:[Oi.has("placeholderTarget")?{type:"placeholderTarget"}:placeholderTarget],postprocess:([t])=>$A(t)}],ParserStart:"main"},jA=_9;function E9(){return new bm.Parser(bm.Grammar.fromCompiled(jA))}function qA(t){let e=E9();if(e.feed(t),e.results.length!==1)throw new Error(`Expected exactly one result, got ${e.results.length}`);return e.results[0]}function wm(t,e){let r=qA(t);return hm(r,e)}function Rl(t){switch(t.name){case"callAsFunction":return[t.callee,t.argument];case"replaceWithTarget":case"moveToTarget":return[t.source,...zA(t.destination)];case"swapTargets":return[t.target1,t.target2];case"pasteFromClipboard":case"insertSnippet":case"replace":case"editNew":return zA(t.destination);case"parsed":return Rl(wm(t.content,t.arguments));default:return[t.target]}}function zA(t){switch(t.type){case"list":return t.destinations.map(({target:e})=>e);case"primitive":return[t.target];case"implicit":return[]}}function CS(t){return t.flatMap(IS)}function IS(t){switch(t.type){case"primitive":return[t];case"list":return t.elements.flatMap(IS);case"range":return[t.anchor,t.active].flatMap(IS);case"implicit":return[]}}var R9={arrowFunction:"anonymousFunction",dictionary:"map",regex:"regularExpression"},k9={purple:"pink"};function P9(t){t.modifiers?.forEach(e=>{(e.type==="containingScope"||e.type==="everyScope")&&(e.scopeType.type=R9[e.scopeType.type]??e.scopeType.type)})}function A9(t){t.mark?.type==="decoratedSymbol"&&(t.mark.symbolColor=k9[t.mark.symbolColor]??t.mark.symbolColor)}function OS(t){CS(t).forEach(e=>{P9(e),A9(e)})}function GA(t){return{...t,version:1}}var M9={type:"primitive",mark:{type:"cursor"},selectionType:"token",position:"contents",modifier:{type:"identity"},insideOutsideType:"inside"},D9={type:"primitive",isImplicit:!0},KA=t=>Pi(t,M9)?D9:t;function QA(t){let e=t.action;return{spokenForm:t.spokenForm,action:{name:e,args:t.extraArgs},targets:I9(t.targets,e),usePrePhraseSnapshot:t.usePrePhraseSnapshot??!1,version:2}}function F9(t){switch(t.type){case"identity":return[];case"containingScope":{let{includeSiblings:e,scopeType:r,type:n,...i}=t;return[{type:e?"everyScope":"containingScope",scopeType:{type:r},...i}]}case"surroundingPair":{let{delimiterInclusion:e,...r}=t,n={type:"containingScope",scopeType:r};return e==="interiorOnly"||e==="excludeInterior"?n.scopeType.delimiter==="any"?[{type:e}]:[{type:e},n]:[n]}case"subpiece":{let{type:e,pieceType:r,...n}=t;return[{type:"ordinalRange",scopeType:{type:r},...n}]}case"head":return[{type:"extendThroughStartOf"}];case"tail":return[{type:"extendThroughEndOf"}];default:return[t]}}function NS(t,e){let{type:r,isImplicit:n,mark:i,insideOutsideType:o,modifier:s,selectionType:l,position:u}=t,p=[];if(u&&u!=="contents"&&(u==="before"?o==="inside"?p.push({type:"position",position:"start"}):e==="remove"?p.push({type:"leading"}):p.push({type:"position",position:"before"}):o==="inside"?p.push({type:"position",position:"end"}):e==="remove"?p.push({type:"trailing"}):p.push({type:"position",position:"after"})),l)switch(l){case"token":if(s?.type==="subpiece")break;case"line":if(i?.type==="lineNumber")break;default:p.push({type:"containingScope",scopeType:{type:l}})}return s&&p.push(...F9(s)),{type:r,isImplicit:n,modifiers:p.length>0?p:void 0,mark:i?.type==="cursorToken"?void 0:i}}function ZA(t,e){switch(t.type){case"list":return{...t,elements:t.elements.map(r=>ZA(r,e))};case"range":{let{type:r,rangeType:n,start:i,end:o,excludeStart:s,excludeEnd:l}=t;return{type:r,rangeType:n,anchor:NS(i,e),active:NS(o,e),excludeAnchor:s??!1,excludeActive:l??!1}}case"primitive":return NS(t,e)}}function I9(t,e){return t.map(r=>ZA(r,e)).map(r=>r.type==="primitive"?KA(r):r)}function YA(t){return{...t,version:3,targets:t.targets.map(XA)}}function XA(t){switch(t.type){case"list":return{...t,elements:t.elements.map(e=>XA(e))};case"range":{let{anchor:e,active:r,...n}=t;return{anchor:LS(e),active:LS(r),...n}}case"primitive":return LS(t)}}function LS(t){let e=t.modifiers!=null?t.modifiers.map(O9):void 0;if(t.mark?.type==="lineNumber"){let{anchor:r,active:n}=t.mark;if(r.type!==n.type||r.lineNumber<0!=n.lineNumber<0)return{type:"range",anchor:{type:"primitive",mark:Pl(r),modifiers:e},active:{type:"primitive",mark:Pl(n)},excludeAnchor:!1,excludeActive:!1}}return{...t,mark:t.mark!=null?C9(t.mark):void 0,modifiers:e}}function C9(t){switch(t.type){case"lineNumber":return N9(t);default:return t}}function O9(t){switch(t.type){case"ordinalRange":return L9(t);default:return t}}function N9(t){return Pi(t.anchor,t.active)?Pl(t.anchor):{type:"range",anchor:Pl(t.anchor),active:Pl(t.active)}}function L9(t){return t.anchor===t.active?kl(t.scopeType,t.anchor):t.anchor===0&&t.active>t.anchor?kl(t.scopeType,t.anchor,t.active-t.anchor+1):t.anchor<0&&t.active===-1?kl(t.scopeType,t.anchor,-t.anchor):{type:"range",anchor:kl(t.scopeType,t.anchor),active:kl(t.scopeType,t.active),excludeAnchor:t.excludeAnchor,excludeActive:t.excludeActive}}function Pl(t){return{type:"lineNumber",lineNumberType:t.type,lineNumber:t.lineNumber}}function kl(t,e,r=1){return{type:"ordinalScope",scopeType:t,start:e,length:r}}function eM(t){return{...t,version:4,targets:t.targets.map(tM)}}function tM(t){switch(t.type){case"primitive":return JA(t);case"range":{let{anchor:e,...r}=t;return{...r,anchor:JA(e)}}case"list":{let{elements:e,...r}=t;return{...r,elements:e.map(tM)}}}}function JA(t){return t.mark==null&&t.modifiers==null||t.isImplicit?{type:"implicit"}:t}function rM(t){return{...t,version:5,action:U9(t.action),targets:t.targets.map(_m)}}function U9(t){switch(t.name){case"wrapWithSnippet":{let[e,r]=H9(t.args[0]);return{name:"wrapWithSnippet",args:[{type:"named",name:e,variableName:r}]}}case"insertSnippet":{let[e,r]=t.args,n={type:"named",name:e};return r!=null&&(n.substitutions=r),{name:"insertSnippet",args:[n]}}default:return t}}function H9(t){let[e,r]=t.split(".");if(e==null||r==null)throw new Error("Snippet location missing '.'");return[e,r]}function _m(t){switch(t.type){case"implicit":return t;case"list":return{...t,elements:t.elements.map(_m)};case"range":return{...t,anchor:_m(t.anchor),active:_m(t.active)};case"primitive":return{...t,mark:t.mark!=null?US(t.mark):void 0,modifiers:t.modifiers!=null&&t.modifiers.length>0?t.modifiers.map(HS):void 0}}}function US(t){return t.type==="range"?{...t,anchor:US(t.anchor),active:US(t.active),excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1}:t}function HS(t){return t.type==="range"?{...t,anchor:HS(t.anchor),active:HS(t.active),excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1}:t}var V9={bring:"replaceWithTarget",call:"callAsFunction",clear:"clearAndSetSelection",commentLines:"toggleLineComment",copy:"copyToClipboard",cut:"cutToClipboard",delete:"remove",editNewLineAbove:"editNewLineBefore",editNewLineBelow:"editNewLineAfter",findInFiles:"findInWorkspace",fold:"foldRegion",indentLines:"indentLine",insertEmptyLineAbove:"insertEmptyLineBefore",insertEmptyLineBelow:"insertEmptyLineAfter",insertLineAfter:"editNewLineAfter",insertLineBefore:"editNewLineBefore",move:"moveToTarget",outdentLines:"outdentLine",paste:"pasteFromClipboard",reverse:"reverseTargets",setBreakpoint:"toggleLineBreakpoint",sort:"sortTargets",swap:"swapTargets",unfold:"unfoldRegion",use:"replaceWithTarget",wrap:"wrapWithPairedDelimiter"};function VS(t){let e=V9[t]??t;if(!VP.includes(e))throw new Error(`Unknown action name: ${e}`);return e}function nM(t){return{version:6,spokenForm:t.spokenForm,usePrePhraseSnapshot:t.usePrePhraseSnapshot,action:B9(t.action,t.targets)}}function B9(t,e){let r=VS(t.name);switch(r){case"replaceWithTarget":case"moveToTarget":return{name:r,source:dn(e[0]),destination:Al(e[1])};case"swapTargets":return{name:r,target1:dn(e[0]),target2:dn(e[1])};case"callAsFunction":return{name:r,callee:dn(e[0]),argument:dn(e[1])};case"pasteFromClipboard":return{name:r,destination:Al(e[0])};case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return{name:r,left:t.args[0],right:t.args[1],target:dn(e[0])};case"generateSnippet":return{name:r,snippetName:t.args?.[0],target:dn(e[0])};case"insertSnippet":return{name:r,snippetDescription:t.args[0],destination:Al(e[0])};case"wrapWithSnippet":return{name:r,snippetDescription:t.args[0],target:dn(e[0])};case"executeCommand":return{name:r,commandId:t.args[0],options:t.args?.[1],target:dn(e[0])};case"replace":return{name:r,replaceWith:t.args[0],destination:Al(e[0])};case"highlight":{let n={name:r,target:dn(e[0])};return t.args?.[0]!=null&&(n.highlightId=t.args?.[0]),n}case"editNew":return{name:r,destination:Al(e[0])};case"getText":return{name:r,options:t.args?.[0],target:dn(e[0])};case"parsed":throw Error("Parsed action should not be present in V5");default:return{name:r,target:dn(e[0])}}}function dn(t){switch(t.type){case"list":case"range":case"primitive":return W9(t);case"implicit":return t}}function W9(t){switch(t.type){case"list":return $9(t);case"range":case"primitive":return Em(t)}}function $9(t){return{...t,elements:t.elements.map(Em)}}function Em(t){switch(t.type){case"range":return iM(t);case"primitive":return Rm(t)}}function iM(t){let{anchor:e,active:r}=t,n={type:"range",anchor:e.type==="implicit"?e:Rm(e),active:Rm(r),excludeAnchor:t.excludeAnchor,excludeActive:t.excludeActive};return t.rangeType!=null&&(n.rangeType=t.rangeType),n}function Rm(t){let e={type:"primitive"},r=Q9(t.modifiers);return r!=null&&(e.modifiers=r),t.mark!=null&&(e.mark=t.mark),e}function Al(t){switch(t.type){case"list":return j9(t);case"range":return q9(t);case"primitive":return z9(t);case"implicit":return G9()}}function j9(t){let e=[],r=[],n,i=()=>{r.length>0&&e.push({type:"primitive",insertionMode:n??"to",target:r.length===1?r[0]:{type:"list",elements:r}})};return t.elements.forEach(o=>{let s=km(o);s!=null?(i(),r=[Em(o)],n=s):r.push(Em(o))}),i(),e.length>1?{type:"list",destinations:e}:e[0]}function q9(t){return{type:"primitive",insertionMode:km(t.anchor)??"to",target:iM(t)}}function z9(t){return{type:"primitive",insertionMode:km(t)??"to",target:Rm(t)}}function G9(){return{type:"implicit"}}function km(t){switch(t.type){case"implicit":return"to";case"primitive":return K9(t);case"range":return km(t.anchor)}}function K9(t){let e=t.modifiers?.find(r=>r.type==="position");if(e!=null){if(t.modifiers.indexOf(e)!==0)throw Error("Position modifier has to be at first index");if(e?.position==="before"||e?.position==="after")return e.position}}function Q9(t){let e=[];if(t!=null)for(let r of t)r.type==="position"?r.position==="start"?e.push({type:"startOf"}):r.position==="end"&&e.push({type:"endOf"}):e.push(r);return e.length>0?e:void 0}function oM(t){return{...t,version:7}}function WS(t){let e=Z9(t,7),{action:r,usePrePhraseSnapshot:n=!1,spokenForm:i}=e;return{version:7,spokenForm:i,action:Zf(r,o=>{let s=Rl(o);OS(s),r.name}),usePrePhraseSnapshot:n}}function Z9(t,e){if(t.version>7)throw new Wp;for(;t.version<e;)switch(t.version){case 0:t=GA(t);break;case 1:t=QA(t);break;case 2:t=YA(t);break;case 3:t=eM(t);break;case 4:t=rM(t);break;case 5:t=nM(t);break;case 6:t=oM(t);break;default:throw new Error(`Can't upgrade from unknown version ${t.version}`)}return t}var $S;function Pm(t){$S=t}function k(){if($S==null)throw Error("Tried to access ide before it was injected");return $S}var Am=class{constructor(e){this.maxLength=e;this.stack=[];this.index=void 0}push(e){this.index!=null?this.stack.splice(this.index+1,this.stack.length-this.index-1,e):this.stack.push(e),this.stack.length>this.maxLength&&this.stack.shift(),this.index=this.stack.length-1}undo(){if(this.index!=null&&this.index>0)return this.index--,this.stack[this.index]}redo(){if(this.index!=null&&this.index<this.stack.length-1)return this.index++,this.stack[this.index]}};var Y9=25,Mm=class{constructor(){this.targetMap=new Map;this.targetHistory=new ks(()=>new Am(Y9));this.notifier=new Kt}set(e,r,{history:n=!1}={}){this.targetMap.set(e,r),n&&r!=null&&this.targetHistory.get(e).push(r),this.notifier.notifyListeners(e,r)}get(e){return this.targetMap.get(e)}undo(e){let r=this.targetHistory.get(e).undo();r!=null&&this.set(e,r,{history:!1})}redo(e){let r=this.targetHistory.get(e).redo();r!=null&&this.set(e,r,{history:!1})}onStoredTargets(e){for(let r of vs)e(r,this.get(r));return this.notifier.registerListener(e)}};function bt(t){if(t.length===0)throw new Error("Require at least one target with this action");let e=t.map(r=>r.editor);if(new Set(e).size>1)throw new Error("Can only have one editor with this action");return e[0]}function Ar(t){if(t.length!==1)throw new Error("Can only have one target with this action");return t[0]}async function Ni(t,e,r){return Promise.all(jS(t,e).map(([n,i])=>r(n,i)))}async function ot(t,e){return Ni(t,r=>r.editor,e)}async function aM(t,e){let r=jS(t,i=>i.editor),n=[];for(let[i,o]of r)n.push(await e(i,o));return n}function sM(t){return jS(t,e=>e.editor)}function jS(t,e){let n=Tl(t,i=>e(i).document.uri);return Array.from(n.values(),i=>[e(i[0]),i])}function hn(t,e){return e!=null?Rt(t,e).map(([n,i])=>({editor:n.editor,selection:n?.isReversed?new Re(i.end,i.start):new Re(i.start,i.end)})):t.map(n=>({editor:n.editor,selection:n.contentSelection}))}function gn(t,e){return t.textualType==="line"?jr(e):lr(e)}function X9(t){return gn(t,t.contentRange)}function Ce(t,e,r,n=X9){return t.flashRanges(e.map(i=>({editor:i.editor,range:n(i),style:r})))}function go(t,e){return new q(new fe(e.start.line,0),t.document.lineAt(e.end).range.end)}function qS(t,e){return e.isEmpty?0:t.document.offsetAt(e.end)-t.document.offsetAt(e.start)}function cM(t,e){let[r,n]=e instanceof fe?[e,e]:[e.start,e.end];return t.start.isBefore(r)&&t.end.isAfter(n)}function Li(t,...e){for(let r of e)r!=null&&(t=t.union(r));return t}var Dm=class t{constructor(e,r,n){this.target=e;this.insertionMode=r;this.contentRange=e5(e.contentRange,r),this.isBefore=r==="before",this.isLineDelimiter=e.insertionDelimiter.includes(`
`),this.indentationString=n??this.isLineDelimiter?J9(e.editor,e.contentRange):"",this.insertionPrefix=e.prefixRange!=null?e.editor.document.getText(e.prefixRange):void 0}get contentSelection(){return this.contentRange.toSelection(this.target.isReversed)}get editor(){return this.target.editor}get insertionDelimiter(){return this.target.insertionDelimiter}get isRaw(){return this.target.isRaw}withTarget(e){return new t(e,this.insertionMode,this.indentationString)}getEditNewActionType(){return this.insertionMode==="after"&&this.target.contentRange.isSingleLine&&this.insertionDelimiter===`
`&&this.insertionPrefix==null?"insertLineAfter":"edit"}constructChangeEdit(e,r=!1){return this.insertionMode==="before"||this.insertionMode==="after"?this.constructEditWithDelimiters(e,r):this.constructEditWithoutDelimiters(e)}constructEditWithDelimiters(e,r){let n=this.getEditRange(),i=this.getEditText(e,r),o=s=>this.updateRange(s,e,r);return{range:n,text:i,isReplace:this.insertionMode==="after",updateRange:o}}constructEditWithoutDelimiters(e){return{range:this.contentRange,text:e,updateRange:r=>r}}getEditRange(){let e=(()=>{let r=this.isBefore?Li(this.target.contentRange,this.target.prefixRange).start:this.target.contentRange.end;if(this.isLineDelimiter){let n=this.editor.document.lineAt(r),i=this.isBefore?n.rangeTrimmed?.start??n.range.start:n.rangeTrimmed?.end??n.range.end;if(r.isEqual(i))return this.isBefore?n.range.start:n.range.end}return r})();return new q(e,e)}getEditText(e,r){let i=(r?"":this.indentationString)+(this.insertionPrefix??"")+e;return this.isBefore?i+this.insertionDelimiter:this.insertionDelimiter+i}updateRange(e,r,n){let i=this.editor.document.offsetAt(e.start)+(n?0:this.indentationString.length)+(this.insertionPrefix?.length??0),o=this.isBefore?i:i+this.getLengthOfInsertionDelimiter(),s=o+r.length;return new q(this.editor.document.positionAt(o),this.editor.document.positionAt(s))}getLengthOfInsertionDelimiter(){if(this.editor.document.eol==="CRLF"){let e=this.insertionDelimiter.match(/\n/g);if(e!=null)return this.insertionDelimiter.length+e.length}return this.insertionDelimiter.length}};function J9(t,e){let r=Number.MAX_SAFE_INTEGER,n="";for(let i=e.start.line;i<=e.end.line;++i){let o=t.document.lineAt(i);if(o.range.isEmpty||o.isEmptyOrWhitespace&&!e.isSingleLine)continue;let s=o.rangeTrimmed?.start??o.range.end;s.character<r&&(r=s.character,n=o.text.slice(0,r))}return n}function e5(t,e){switch(e){case"before":return t.start.toEmptyRange();case"after":return t.end.toEmptyRange();case"to":return t}}function Ms(t,e,r,n){return t5(t.contentRange,e.contentRange,r,n)}function t5(t,e,r,n){return new q(r?t.start:t.end,n?e.end:e.start)}function Ds(t,e,r,n){let i=r?t.contentRange.start:new fe(t.contentRange.end.line+1,0),o=n?e.contentRange.end:e.editor.document.lineAt(e.contentRange.start.line-1).range.end;return new q(i,o)}var Be=class t{constructor(e){this.hasExplicitScopeType=!0;this.hasExplicitRange=!0;this.isRaw=!1;this.isImplicit=!1;this.isNotebookCell=!1;this.textualType="token";this.state={editor:e.editor,isReversed:e.isReversed,contentRange:e.contentRange,thatTarget:e.thatTarget}}get editor(){return this.state.editor}get isReversed(){return this.state.isReversed}get thatTarget(){return this.state.thatTarget!=null?this.state.thatTarget.thatTarget:this}get contentText(){return this.editor.document.getText(this.contentRange)}get contentSelection(){return this.contentRange.toSelection(this.isReversed)}get contentRange(){return this.state.contentRange}constructRemovalEdit(){return{range:this.getRemovalRange(),text:"",updateRange:e=>e}}getRemovalHighlightRange(){return gn(this,this.getRemovalRange())}withThatTarget(e){return this.cloneWith({thatTarget:e})}withContentRange(e){return this.cloneWith({contentRange:e})}getInterior(){}getBoundary(){}cloneWith(e){let r=Object.getPrototypeOf(this).constructor;return new r({...this.getCloneParameters(),...e})}maybeCreateRichRangeTarget(e,r){let{constructor:n}=Object.getPrototypeOf(this);return new n({...this.getCloneParameters(),isReversed:e,contentRange:Ms(this,r,!0,!0)})}isEqual(e){return e instanceof t&&Pi(this.getEqualityParameters(),e.getEqualityParameters())}getEqualityParameters(){let{thatTarget:e,...r}=this.getCloneParameters();return{...r}}toDestination(e){return new Dm(this,e)}toPlainObject(){return{type:this.type,contentRange:ul(this.contentRange),isReversed:this.isReversed,hasExplicitRange:this.hasExplicitRange}}};function Fm(t,e){return r5(t,e.start,e.end)}function r5(t,e,r){return{editor:t.editor,selection:n5(t.selection,e,r)}}function n5(t,e,r){return t.isReversed?new Re(r,e):new Re(e,r)}function fa(t,e){let{document:r}=t,n=r.getText(e),i=n.length-n.trimStart().length,o=n.length-n.trimEnd().length,s=r.offsetAt(e.start)+i,l=r.offsetAt(e.end)-o,u=r.positionAt(s),p=r.positionAt(l);return new q(u,p)}function Im(t,e,r,n){return r==null?void 0:new t({editor:e,isReversed:n,contentRange:r})}var $e=class extends Be{constructor(r){super(r);this.type="PlainTarget";this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.textualType=r.textualType??"token",this.insertionDelimiter=r.insertionDelimiter??""}getCloneParameters(){return{...this.state,textualType:this.textualType,insertionDelimiter:this.insertionDelimiter}}};function Fs(t,e,r){return Im($e,t,e,r)}var Cm=class extends Be{constructor(r){super(r);this.type="DocumentTarget";this.textualType="line";this.insertionDelimiter=`
`}getInterior(){return[new $e({editor:this.editor,isReversed:this.isReversed,contentRange:fa(this.editor,this.contentRange)})]}getRemovalRange(){return this.contentRange}getLeadingDelimiterTarget(){}getTrailingDelimiterTarget(){}getCloneParameters(){return this.state}};var pr=class t extends Be{constructor(){super(...arguments);this.type="LineTarget";this.textualType="line";this.insertionDelimiter=`
`;this.getRemovalHighlightRange=()=>jr(this.fullLineContentRange)}get fullLineContentRange(){return go(this.editor,this.contentRange)}getLeadingDelimiterTarget(){return Fs(this.editor,i5(this.editor,this.fullLineContentRange),this.isReversed)}getTrailingDelimiterTarget(){return Fs(this.editor,o5(this.editor,this.fullLineContentRange),this.isReversed)}getRemovalRange(){let r=this.fullLineContentRange,n=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return n==null?r:r.union(n.contentRange)}maybeCreateRichRangeTarget(r,n){return new t({editor:this.editor,isReversed:r,contentRange:Ds(this,n,!0,!0)})}getCloneParameters(){return this.state}};function i5(t,e){let{start:r}=e;return r.line>0?new q(t.document.lineAt(r.line-1).range.end,e.start):void 0}function o5(t,e){let{end:r}=e;return r.line+1<t.document.lineCount?new q(e.end,new fe(r.line+1,0)):void 0}function zS(t,e,r){return Im(pr,t,e,r)}var Om=class t{constructor(e,r){this.target=e;this.insertionMode=r}get editor(){return this.target.editor}get contentRange(){return this.target.contentRange}get contentSelection(){return this.target.contentSelection}get insertionDelimiter(){return this.target.insertionDelimiter}get isRaw(){return this.target.isRaw}withTarget(e){return new t(e,this.insertionMode)}getEditNewActionType(){throw new Error("Method not implemented.")}constructChangeEdit(e){throw new Error("Method not implemented.")}};var Nm=class extends Be{constructor(r){super(r);this.type="NotebookCellTarget";this.insertionDelimiter=`
`;this.isNotebookCell=!0;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange}getCloneParameters(){return this.state}toDestination(r){return new Om(this,r)}};var yo=class t extends Be{constructor(){super(...arguments);this.type="ParagraphTarget";this.textualType="line";this.insertionDelimiter=`

`}getLeadingDelimiterTarget(){return zS(this.editor,a5(this.editor,this.fullLineContentRange),this.isReversed)}getTrailingDelimiterTarget(){return zS(this.editor,s5(this.editor,this.fullLineContentRange),this.isReversed)}getRemovalRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.contentRange.union(r.contentRange):this.contentRange;return new pr({contentRange:n,editor:this.editor,isReversed:this.isReversed}).getRemovalRange()}get fullLineContentRange(){return go(this.editor,this.contentRange)}getRemovalHighlightRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.fullLineContentRange.union(r.contentRange):this.fullLineContentRange;return jr(n)}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,contentRange:Ds(this,n,!0,!0)})}getCloneParameters(){return this.state}};function a5(t,e){let{document:r}=t,n=r.lineAt(e.start),i=c5(r,n);if(i!=null)return i.lineNumber+1===n.lineNumber?void 0:new q(new fe(i.lineNumber+1,0),r.lineAt(n.lineNumber-1).range.end);if(n.lineNumber>0)return new q(new fe(0,0),r.lineAt(n.lineNumber-1).range.end)}function s5(t,e){let{document:r}=t,n=r.lineAt(e.end),i=l5(r,n);if(i!=null)return i.lineNumber-1===n.lineNumber?void 0:new q(new fe(n.lineNumber+1,0),r.lineAt(i.lineNumber-1).range.end);if(n.lineNumber<r.lineCount-1)return new q(new fe(n.lineNumber+1,0),r.lineAt(r.lineCount-1).range.end)}function c5(t,e){for(;e.lineNumber>0;){let r=t.lineAt(e.lineNumber-1);if(!r.isEmptyOrWhitespace)return r;e=r}return null}function l5(t,e){for(;e.lineNumber+1<t.lineCount;){let r=t.lineAt(e.lineNumber+1);if(!r.isEmptyOrWhitespace)return r;e=r}return null}var xo=class extends Be{constructor(){super(...arguments);this.type="RawSelectionTarget";this.textualType="character";this.insertionDelimiter="";this.isRaw=!0;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.getCloneParameters=()=>this.state}};function Ml(t){let e=Li(t.contentRange,t.prefixRange),r=t.getTrailingDelimiterTarget()??t.getLeadingDelimiterTarget();return r!=null?e.union(r.contentRange):e}var u5=['"',"'","(","[","{","<"],p5=['"',"'",")","]","}",">",",",";",":"];function Yn(t){let{editor:e}=t,{start:r}=Li(t.contentRange,t.prefixRange),o=e.document.lineAt(r).text.slice(0,r.character).match(/\s+$/);return o==null?void 0:new $e({contentRange:new q(r.line,r.character-o[0].length,r.line,r.character),editor:e,isReversed:t.isReversed})}function Xn(t){let{editor:e}=t,{end:r}=t.contentRange,o=e.document.lineAt(r).text.slice(r.character).match(/^\s+/);return o==null?void 0:new $e({contentRange:new q(r.line,r.character,r.line,r.character+o[0].length),editor:e,isReversed:t.isReversed})}function To(t){let{editor:e}=t,r=Li(t.contentRange,t.prefixRange),{start:n,end:i}=r,o=t.getLeadingDelimiterTarget()?.contentRange??n.toEmptyRange(),s=t.getTrailingDelimiterTarget()?.contentRange??i.toEmptyRange(),l=go(e,r);return o.union(s).isRangeEqual(l)?l:!s.isEmpty&&(!o.isEmpty||r.start.isEqual(l.start)||u5.includes(f5(e,r)))?r.union(s):!o.isEmpty&&(r.end.isEqual(l.end)||p5.includes(m5(e,r)))?r.union(o):r}function f5(t,e){let{start:r}=e,n=t.document.lineAt(r);return r.isAfter(n.range.start)?t.document.getText(new q(r.translate(void 0,-1),r)):""}function m5(t,e){let{end:r}=e,n=t.document.lineAt(r);return r.isBefore(n.range.end)?t.document.getText(new q(r.translate(void 0,1),r)):""}var Xt=class extends Be{constructor(){super(...arguments);this.type="TokenTarget";this.textualType="token";this.insertionDelimiter=" "}getLeadingDelimiterTarget(){return Yn(this)}getTrailingDelimiterTarget(){return Xn(this)}getRemovalRange(){return To(this)}getCloneParameters(){return this.state}};function GS(t){let{editor:e,isReversed:r}=t,{document:n}=e,i=Li(t.contentRange,t.prefixRange);return d5(n,i)?h5(n,i)?new yo({editor:e,isReversed:r,contentRange:i}):new pr({editor:e,isReversed:r,contentRange:i}):new Xt({editor:e,isReversed:r,contentRange:i})}function d5(t,e){let r=t.lineAt(e.start).rangeTrimmed?.start,n=t.lineAt(e.end).rangeTrimmed?.end;return r!=null&&n!=null&&r.isEqual(e.start)&&n.isEqual(e.end)}function h5(t,e){let{start:r,end:n}=e;return(r.line===0||t.lineAt(r.line-1).isEmptyOrWhitespace)&&(n.line===t.lineCount-1||t.lineAt(n.line+1).isEmptyOrWhitespace)}var So=class t extends Be{constructor(r){super(r);this.type="ScopeTypeTarget";this.scopeTypeType_=r.scopeTypeType,this.removalRange_=r.removalRange,this.leadingDelimiterRange_=r.leadingDelimiterRange,this.trailingDelimiterRange_=r.trailingDelimiterRange,this.prefixRange=r.prefixRange,this.insertionDelimiter=r.insertionDelimiter??g5(r.scopeTypeType),this.hasDelimiterRange_=!!this.leadingDelimiterRange_||!!this.trailingDelimiterRange_}getLeadingDelimiterTarget(){if(this.leadingDelimiterRange_!=null)return new $e({editor:this.editor,isReversed:this.isReversed,contentRange:this.leadingDelimiterRange_});if(!this.hasDelimiterRange_)return Yn(this)}getTrailingDelimiterTarget(){if(this.trailingDelimiterRange_!=null)return new $e({editor:this.editor,isReversed:this.isReversed,contentRange:this.trailingDelimiterRange_});if(!this.hasDelimiterRange_)return Xn(this)}getRemovalRange(){return this.removalRange_!=null?this.removalRange_:this.hasDelimiterRange_?Ml(this):GS(this).getRemovalRange()}getRemovalHighlightRange(){return this.removalRange_!=null?gn(this,this.removalRange_):this.hasDelimiterRange_?gn(this,Ml(this)):GS(this).getRemovalHighlightRange()}maybeCreateRichRangeTarget(r,n){if(this.scopeTypeType_!==n.scopeTypeType_)return null;let i=this.removalRange_!=null||n.removalRange_!=null?(this.removalRange_??this.contentRange).union(n.removalRange_??n.contentRange):void 0;return new t({...this.getCloneParameters(),isReversed:r,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:n.trailingDelimiterRange_,removalRange:i,contentRange:this.contentRange.union(n.contentRange)})}getCloneParameters(){return{...this.state,insertionDelimiter:this.insertionDelimiter,prefixRange:this.prefixRange,removalRange:void 0,interiorRange:void 0,scopeTypeType:this.scopeTypeType_,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:this.trailingDelimiterRange_}}};function g5(t){switch(t){case"class":case"namedFunction":case"section":case"sectionLevelOne":case"sectionLevelTwo":case"sectionLevelThree":case"sectionLevelFour":case"sectionLevelFive":case"sectionLevelSix":case"part":case"chapter":case"subSection":case"subSubSection":case"namedParagraph":case"subParagraph":return`

`;case"anonymousFunction":case"statement":case"ifStatement":case"comment":case"xmlElement":case"collectionItem":case"branch":case"environment":return`
`;default:return" "}}var Lm=class t extends Be{constructor(r){super(r);this.type="SubTokenWordTarget";this.textualType="word";this.leadingDelimiterRange_=r.leadingDelimiterRange,this.trailingDelimiterRange_=r.trailingDelimiterRange,this.insertionDelimiter=r.insertionDelimiter}getLeadingDelimiterTarget(){return Fs(this.editor,this.leadingDelimiterRange_,this.isReversed)}getTrailingDelimiterTarget(){return Fs(this.editor,this.trailingDelimiterRange_,this.isReversed)}getRemovalRange(){return Ml(this)}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,contentRange:Ms(this,n,!0,!0),trailingDelimiterRange:n.trailingDelimiterRange_})}getCloneParameters(){return{...this.state,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:this.trailingDelimiterRange_,insertionDelimiter:this.insertionDelimiter}}};var Is=class t extends Be{constructor(r){super({...r,contentRange:fa(r.editor,r.fullInteriorRange)});this.type="InteriorTarget";this.insertionDelimiter=" ";this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.fullInteriorRange;this.fullInteriorRange=r.fullInteriorRange}getCloneParameters(){return{...this.state,fullInteriorRange:this.fullInteriorRange}}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,fullInteriorRange:this.fullInteriorRange.union(n.fullInteriorRange)})}};var Um=class extends Be{constructor(r){super(r);this.type="SurroundingPairTarget";this.insertionDelimiter=" ";this.boundary_=r.boundary,this.interiorRange_=r.interiorRange}getLeadingDelimiterTarget(){return Yn(this)}getTrailingDelimiterTarget(){return Xn(this)}getRemovalRange(){return To(this)}getInterior(){return[new Is({editor:this.editor,isReversed:this.isReversed,fullInteriorRange:this.interiorRange_})]}getBoundary(){return this.boundary_.map(r=>new Xt({editor:this.editor,isReversed:this.isReversed,contentRange:r}))}getCloneParameters(){return{...this.state,interiorRange:this.interiorRange_,boundary:this.boundary_}}};var Ft=class extends Be{constructor(r){super(r);this.type="UntypedTarget";this.insertionDelimiter=" ";this.hasExplicitScopeType=!1;this.hasExplicitRange=r.hasExplicitRange,this.textualType=r.textualType??"token"}getLeadingDelimiterTarget(){return Yn(this)}getTrailingDelimiterTarget(){return Xn(this)}getRemovalRange(){return this.editor.document.getText(this.contentRange).trim().length===0?this.contentRange:To(this)}maybeCreateRichRangeTarget(){return null}getCloneParameters(){return{...this.state,textualType:this.textualType,hasExplicitRange:this.hasExplicitRange}}};var Hm=class extends Be{constructor(){super(...arguments);this.type="ImplicitTarget";this.textualType="character";this.insertionDelimiter="";this.isRaw=!0;this.hasExplicitScopeType=!1;this.isImplicit=!0;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.getCloneParameters=()=>this.state}};var Vm=class extends Be{constructor(r){let{inputTarget:n,modifiedTarget:i,isHead:o}=r;super({...r,contentRange:lM(n.contentRange,i.contentRange,o)});this.type="HeadTailTarget";this.insertionDelimiter=" ";this.inputTarget=n,this.modifiedTarget=i,this.isHead=o}getLeadingDelimiterTarget(){return Yn(this)}getTrailingDelimiterTarget(){return Xn(this)}getRemovalRange(){return To(this)}getInterior(){let r=this.modifiedTarget.getInterior();if(r!=null)return r.map(n=>new $e({editor:this.editor,contentRange:lM(this.inputTarget.contentRange,n.contentRange,this.isHead),isReversed:this.isReversed}))}getCloneParameters(){return{...this.state,inputTarget:this.inputTarget,modifiedTarget:this.modifiedTarget,isHead:this.isHead}}};function lM(t,e,r){return r?new q(e.start,t.end):new q(t.start,e.end)}var Bm=class t extends Be{constructor(r){super({...r,contentRange:y5(r.paragraphTarget.contentRange,r.containingInterior.contentRange)});this.type="BoundedParagraphTarget";this.textualType="line";this.insertionDelimiter=`

`;this.containingInterior=r.containingInterior,this.paragraphTarget=r.paragraphTarget,this.startLineGap=this.contentRange.start.line-this.containingInterior.fullInteriorRange.start.line,this.endLineGap=this.containingInterior.fullInteriorRange.end.line-this.contentRange.end.line}getLeadingDelimiterTarget(){return this.startLineGap>1?this.paragraphTarget.getLeadingDelimiterTarget():void 0}getTrailingDelimiterTarget(){return this.endLineGap>1?this.paragraphTarget.getTrailingDelimiterTarget():void 0}getRemovalRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.contentRange.union(r.contentRange):this.contentRange;return this.startLineGap<=0||this.endLineGap<=0?n:new pr({contentRange:n,editor:this.editor,isReversed:this.isReversed}).getRemovalRange()}get fullLineContentRange(){return go(this.editor,this.contentRange)}getRemovalHighlightRange(){let r=(()=>{if(this.startLineGap<1||this.endLineGap<1)return this.getRemovalRange();let n=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return n!=null?this.fullLineContentRange.union(n.contentRange):this.fullLineContentRange})();return jr(r)}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,containingInterior:this.containingInterior.maybeCreateRichRangeTarget(r,n.containingInterior),paragraphTarget:this.paragraphTarget.maybeCreateRichRangeTarget(r,n.paragraphTarget)})}getCloneParameters(){return{...this.state,paragraphTarget:this.paragraphTarget,containingInterior:this.containingInterior}}};function y5(t,e){let r=t.intersection(e);if(r==null||r.isEmpty)throw new Error("Ranges do not intersect");return r}function Wm(t){return t.activeTextEditor?.selections.map(e=>({selection:e,editor:t.activeTextEditor}))??[]}var Cs=class{run(){return Wm(k()).map(e=>new Ft({editor:e.editor,isReversed:e.selection.isReversed,contentRange:e.selection,hasExplicitRange:!e.selection.isEmpty,textualType:"character"}))}};var Jn=class{constructor(e,r){this.debouncer=new Vp(r,e.getOwnConfiguration("decorationDebounceDelayMs")),this.run=this.run.bind(this)}run(){this.debouncer.run()}dispose(){this.debouncer.dispose()}};var $m=class{constructor(e,r){this.ide=e;this.storedTargets=r;this.disposables=[];this.debouncer=new Jn(e.configuration,()=>this.updateKeyboardTarget()),this.disposables.push(e.configuration.onDidChangeConfiguration(()=>this.maybeActivate()),this.debouncer),this.maybeActivate()}maybeActivate(){if(this.ide.configuration.getOwnConfiguration("experimental.keyboardTargetFollowsSelection")){this.selectionWatcherDisposable==null&&(this.selectionWatcherDisposable=this.ide.onDidChangeTextEditorSelection(this.debouncer.run));return}this.selectionWatcherDisposable!=null&&(this.selectionWatcherDisposable.dispose(),this.selectionWatcherDisposable=void 0)}updateKeyboardTarget(){this.ide.activeTextEditor==null||this.storedTargets.get("keyboard")==null||this.storedTargets.set("keyboard",new Cs().run())}dispose(){this.disposables.forEach(e=>e.dispose()),this.selectionWatcherDisposable?.dispose()}};var jm=class{constructor(e){this.ide=e;switch(e.disposeOnExit(this),this.evaluateSetting=this.evaluateSetting.bind(this),this.active=!0,e.runMode){case"development":this.enableDebugLog();break;case"test":this.disableDebugLog();break;case"production":this.evaluateSetting(),this.disposableConfiguration=e.configuration.onDidChangeConfiguration(this.evaluateSetting);break}}log(...e){this.active&&console.log(...e)}dispose(){this.disposableConfiguration&&this.disposableConfiguration.dispose()}enableDebugLog(){this.active=!0}disableDebugLog(){this.active=!1}evaluateSetting(){this.ide.configuration.getOwnConfiguration("debug")?this.enableDebugLog():this.disableDebugLog()}};var x5=["!","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_","`","{","|","}","~","\xA3",'"'],T5=x5.map($r).join("|"),S5=["[a-zA-Z0-9]",T5].join("|"),v5=new RegExp(`^(${S5})$`,"u"),b5="[unk]",w5=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}]/gu,qm=class{constructor(){this.disposables=[];this.algorithmChangeNotifier=new Kt;this.getTokenGraphemes=e=>fn(e,w5,r=>({text:this.normalizeGrapheme(r[0]),tokenStartOffset:r.index,tokenEndOffset:r.index+r[0].length}));this.registerAlgorithmChangeListener=this.algorithmChangeNotifier.registerListener;k().disposeOnExit(this),this.updateTokenHatSplittingMode=this.updateTokenHatSplittingMode.bind(this),this.getTokenGraphemes=this.getTokenGraphemes.bind(this),this.updateTokenHatSplittingMode(),this.disposables.push(k().configuration.onDidChangeConfiguration(this.updateTokenHatSplittingMode))}updateTokenHatSplittingMode(){let{lettersToPreserve:e,symbolsToPreserve:r,...n}=k().configuration.getOwnConfiguration("tokenHatSplittingMode");this.tokenHatSplittingMode={lettersToPreserve:e.map(i=>i.toLowerCase().normalize("NFC")),symbolsToPreserve:r.map(i=>i.normalize("NFC")),...n},this.algorithmChangeNotifier.notifyListeners()}normalizeGrapheme(e){let{preserveCase:r,lettersToPreserve:n,symbolsToPreserve:i}=this.tokenHatSplittingMode,o=e.normalize("NFC");return i.includes(o)||(r||(o=o.toLowerCase()),n.includes(o.toLowerCase()))||(o=AT(o),v5.test(o)||(o=b5)),o}dispose(){this.disposables.forEach(({dispose:e})=>e())}};function ma(){return KS==null&&(KS=new qm),KS}var KS;var _5=["-","+","*","/","=","<",">","_","#",".","|","&",":"],E5=["!==","!=","+=","-=","*=","/=","%=","<=",">=","=>","->","??",'"""',"```","/*","*/","<!--","-->"],R5=["\\p{L}","\\p{M}","\\p{N}"],k5="[^\\s\\w]",P5="(?<![.\\d])\\d+\\.\\d+(?![.\\d])";function A5(t){let{fixedTokens:e,repeatableSymbols:r,identifierWordRegexes:n,identifierWordDelimiters:i,numbersRegex:o,singleSymbolsRegex:s}=t,l=r.map($r).map(x=>`${x}+`).join("|"),u=e.map($r).join("|"),m=`(${n.concat(i.map($r)).join("|")})+`,d=`(${n.join("|")})+`,g=[u,o,m,l,s].join("|");return{identifierMatcher:new RegExp(m,"gu"),wordMatcher:new RegExp(d,"gu"),tokenMatcher:new RegExp(g,"gu")}}var QS=new Map;function Mr(t){let e=k().configuration.getOwnConfiguration("wordSeparators",{languageId:t}),r=e.join("\0");if(!QS.has(r)){let n={fixedTokens:E5,repeatableSymbols:_5,identifierWordRegexes:R5,identifierWordDelimiters:e,numbersRegex:P5,singleSymbolsRegex:k5};QS.set(r,A5(n))}return QS.get(r)}function uM(t,e,r){return fn(t,Mr(e).tokenMatcher,r)}var M5=/\p{Lu}?\p{Ll}+|\p{Lu}+(?!\p{Ll})|\p{N}+/gu,Os=class{constructor(e){this.wordRegex=Mr(e).wordMatcher}splitIdentifier(e){let r=cl(e,this.wordRegex);return r.length>1?r:cl(e,M5)}};var pM=({penalty:t})=>-t,fM=({isFirstLetter:t})=>t?-1:0;function mM(t){return({grapheme:{text:e},style:r})=>{let n=t.get({grapheme:e,hatStyle:r});return n==null?1/0:-n}}function dM(t,e){let r=tl(n=>NT(e[n].filter(i=>i>t))??1/0);return({grapheme:{text:n}})=>r(n)}function ZS(t){return e=>e.grapheme.text===t?.grapheme&&e.style===t?.hatStyle?1:0}function hM(t){switch(t){case"greedy":return({penalty:e})=>-e;case"balanced":return({penalty:e})=>-(e<2?0:1);case"stable":return e=>0}}function gM(t,e){if(t.length===0)return;let r=t;for(let n of e){if(r.length===1)return r[0];r=D5(r,n)}return r[0]}function D5(t,e){let r=-1/0,n=[];for(let i of t){let o=e(i);o<r||(o>r&&(r=o,n.length=0),n.push(i))}return n}function yM({hatOldTokenRanks:t,graphemeTokenRanks:e},r,n,i,o,s){return gM(s,[ZS(i),hM(r),ZS(o),mM(t),pM,fM,dM(n,e)])}function xM(t,e,r){let n={},i=new mo(({grapheme:o,hatStyle:s})=>[o,s]);return t.forEach(({token:o,rank:s})=>{let l=e.get(o);l!=null&&i.set(l,s),r.getTokenGraphemes(o.text).forEach(({text:u})=>{let p;u in n?p=n[u]:(p=[],n[u]=p),p.push(s)})}),{hatOldTokenRanks:i,graphemeTokenRanks:n}}function TM(t,e=[]){return new Map(CT(rt,ea)(rl([e],t.visibleRanges.map(r=>LT(r.start.line,r.end.line+1)))).sort((r,n)=>r-n).map((r,n)=>[r,n]))}function SM(t,e){return(r,n)=>{let i=Math.abs(r.displayLine-t),o=Math.abs(n.displayLine-t);if(i<o)return-1;if(i>o)return 1;let s=Math.abs(r.range.start.character-e),l=Math.abs(n.range.start.character-e);return s-l}}function vM(t,e){let r=t.document.languageId,n=t.document.getText(e),i=t.document.offsetAt(e.start);return uM(n,r,o=>{let s=i+o.index,l=i+o.index+o[0].length,u=new q(t.document.positionAt(s),t.document.positionAt(l));return{editor:t,text:o[0],range:u,offsets:{start:s,end:l}}})}function bM(t,e,r){let i=I5(t,e).flatMap(o=>{let s=o.selections[0].active,l=TM(o,[s.line]),u=rt(o.visibleRanges.map(p=>vM(o,p).map(m=>({...m,displayLine:l.get(m.range.start.line)}))));return u.sort(SM(l.get(s.line),s.character)),u});return F5(r,i).map((o,s)=>({token:o,rank:-s}))}function F5(t,e){return t==null?e:e.sort((r,n)=>{let i=t.has(r),o=t.has(n);return i&&!o?-1:!i&&o?1:0})}function I5(t,e){let r;return t==null?r=e:r=[t,...e.filter(n=>n!==t)],r}function YS({tokenGraphemeSplitter:t,enabledHatStyles:e,forceTokenHats:r,oldTokenHats:n,hatStability:i,activeTextEditor:o,visibleTextEditors:s}){let l=r==null?void 0:wM(r),u=wM(n),p=bM(o,s,l),m=xM(p,u,t),d=Object.keys(e),g=new ks(()=>[...d]);return p.map(({token:x,rank:b})=>{let v=C5(t,x,g,e),I=yM(m,i,b,l?.get(x),u.get(x),v);if(I!=null)return g.set(I.grapheme.text,g.get(I.grapheme.text).filter(F=>F!==I.style)),O5(x,I)}).filter(x=>x!=null)}function wM(t){let e=new mo(({editor:r,offsets:n})=>[r.id,n.start,n.end]);return t.forEach(r=>e.set(r.token,r)),e}function C5(t,e,r,n){let i=[],o=t.getTokenGraphemes(e.text),s=new Set(new Os(e.editor.document.languageId).splitIdentifier(e.text).map(l=>l.index));for(let l of o){let u=s.has(l.tokenStartOffset);for(let p of r.get(l.text))i.push({grapheme:l,style:p,penalty:n[p].penalty,isFirstLetter:u})}return i}function O5(t,e){return{hatStyle:e.style,grapheme:e.grapheme.text,token:t,hatRange:new q(t.range.start.translate(void 0,e.grapheme.tokenStartOffset),t.range.start.translate(void 0,e.grapheme.tokenEndOffset))}}var zm=class{constructor(e,r){this.hats=e;this.context=r;this.disposables=[];k().disposeOnExit(this);let n=new Jn(k().configuration,()=>this.allocateHats());this.disposables.push(this.hats.onDidChangeEnabledHatStyles(n.run),this.hats.onDidChangeIsEnabled(n.run),k().onDidOpenTextDocument(n.run),k().onDidCloseTextDocument(n.run),k().onDidChangeActiveTextEditor(n.run),k().onDidChangeVisibleTextEditors(n.run),k().onDidChangeTextDocument(n.run),k().onDidChangeTextEditorSelection(n.run),k().onDidChangeTextEditorVisibleRanges(n.run),ma().registerAlgorithmChangeListener(n.run),n)}async allocateHats(e){let r=await this.context.getActiveMap();e=e?.map(i=>({...i,grapheme:ma().normalizeGrapheme(i.grapheme)}));let n=this.hats.isEnabled?YS({tokenGraphemeSplitter:ma(),enabledHatStyles:this.hats.enabledHatStyles,forceTokenHats:e,oldTokenHats:r.tokenHats,hatStability:k().configuration.getOwnConfiguration("experimental.hatStability"),activeTextEditor:k().activeTextEditor,visibleTextEditors:k().visibleTextEditors}):[];r.setTokenHats(n),await this.hats.setHatRanges(n.map(({hatStyle:i,hatRange:o,token:{editor:s}})=>({editor:s,range:o,styleName:i})))}dispose(){this.disposables.forEach(({dispose:e})=>e())}};var Gm=class t{constructor(e){this.rangeUpdater=e;this.isExpired=!1;this.documentTokenLists=new Map;this.deregisterFunctions=[];this.map={};this._tokenHats=[]}get tokenHats(){return this._tokenHats}getDocumentTokenList(e){let r=e.uri.toString(),n=this.documentTokenLists.get(r);return n==null&&(n=[],this.documentTokenLists.set(r,n),this.deregisterFunctions.push(this.rangeUpdater.registerRangeInfoList(e,n))),n}clone(){let e=new t(this.rangeUpdater);return e.setTokenHats(this._tokenHats),e}setTokenHats(e){this.map={},this.documentTokenLists=new Map,this.deregisterFunctions.forEach(n=>n());let r=e.map(n=>{let{hatStyle:i,grapheme:o,token:s}=n,l=this.makeTokenLive(s);return this.map[Sl(i,o)]=l,{...n,token:l}});this._tokenHats=r}makeTokenLive(e){let{tokenMatcher:r}=Mr(e.editor.document.languageId),n={...e,expansionBehavior:{start:{type:"regex",regex:r},end:{type:"regex",regex:r}}};return this.getDocumentTokenList(e.editor.document).push(n),n}getEntries(){return this.checkExpired(),Object.entries(this.map)}getToken(e,r){return this.checkExpired(),this.map[Sl(e,ma().normalizeGrapheme(r))]}checkExpired(){if(this.isExpired)throw Error("Map snapshot has expired")}dispose(){this.isExpired=!0,this.deregisterFunctions.forEach(e=>e())}};var N5=6e4,Km=class{constructor(e,r,n,i){this.debug=r;this.commandServerApi=i;this.prePhraseMapsSnapshotTimestamp=null;this.lastSignalVersion=null;k().disposeOnExit(this),this.activeMap=new Gm(e),this.getActiveMap=this.getActiveMap.bind(this),this.allocateHats=this.allocateHats.bind(this),this.hatAllocator=new zm(n,{getActiveMap:this.getActiveMap})}allocateHats(e){return this.hatAllocator.allocateHats(e)}async getActiveMap(){return await this.maybeTakePrePhraseSnapshot(),this.activeMap}async getReadableMap(e){return await this.maybeTakePrePhraseSnapshot(),e?this.lastSignalVersion==null?(console.error("Pre phrase snapshot requested but no signal was present; please upgrade command client"),this.activeMap):this.prePhraseMapSnapshot==null?(console.error("Navigation map pre-phrase snapshot requested, but no snapshot has been taken"),this.activeMap):performance.now()-this.prePhraseMapsSnapshotTimestamp>N5?(console.error("Navigation map pre-phrase snapshot requested, but snapshot is more than a minute old"),this.activeMap):this.prePhraseMapSnapshot:this.activeMap}dispose(){this.activeMap.dispose(),this.prePhraseMapSnapshot!=null&&this.prePhraseMapSnapshot.dispose()}async maybeTakePrePhraseSnapshot(){let e=await this.commandServerApi.signals.prePhrase.getVersion();e!==this.lastSignalVersion&&(this.debug.log("taking snapshot"),this.lastSignalVersion=e,e!=null&&this.takePrePhraseSnapshot())}takePrePhraseSnapshot(){this.prePhraseMapSnapshot!=null&&this.prePhraseMapSnapshot.dispose(),this.prePhraseMapSnapshot=this.activeMap.clone(),this.prePhraseMapsSnapshotTimestamp=performance.now()}};function XS(t,e,r){let n=t.get(e);return n==null&&(n=r(),t.set(e,n)),n}var rv=br(Fl(),1);function nv(t,e){let{originalOffsets:{start:r,end:n},finalOffsets:{end:i},displacement:o}=t,{offsets:{start:s,end:l}}=e;return(0,rv.invariant)(n>r,()=>"Change range expected to be nonempty"),(0,rv.invariant)(n>=s&&r<=l,()=>"Change range expected to intersect with selection range"),{start:n<=s?s+o:Math.min(s,i),end:n<=l?l+o:Math.min(l,i)}}var AM=br(Fl(),1);function iv(t,e){let{event:{text:r,isReplace:n},finalOffsets:{start:i,end:o}}=t;if((0,AM.invariant)(i===t.originalOffsets.end&&i===e.offsets.start&&i===e.offsets.end,()=>"Selection range and change range expected to be same empty range"),n){let s=e.expansionBehavior.end;switch(s.type){case"closed":return{start:i,end:i};case"open":return{start:i,end:o};case"regex":{let l=r.match(Af(s.regex));return l==null?{start:i,end:i}:{start:i,end:i+l[0].length}}}}else{let s=e.expansionBehavior.start;switch(s.type){case"closed":return{start:o,end:o};case"open":return{start:i,end:o};case"regex":{let l=r.search(Pf(s.regex));return l===-1?{start:o,end:o}:{start:i+l,end:o}}}}}var ov=br(Fl(),1);function av(t,e){let{event:{text:r},originalOffsets:{start:n},displacement:i}=t,{offsets:{start:o,end:s},text:l}=e;if((0,ov.invariant)(s>o,()=>"Selection range expected to be nonempty"),(0,ov.invariant)(n>=o&&n<=s,()=>"Insertion offset expected to intersect with selection range"),n>o&&n<s)return{start:o,end:s+i};if(n===o){let u=e.expansionBehavior.start,p=s+i;switch(u.type){case"closed":return{start:o+i,end:p};case"open":return{start:o,end:p};case"regex":{let m=r+l,d=Pf(u.regex),g=m.search(d);for(;g>r.length;)m=m.slice(0,g),g=m.search(d);return g===-1?{start:o,end:p}:{start:o+g,end:p}}}}else{let u=e.expansionBehavior.end,p=o;switch(u.type){case"closed":return{start:p,end:s};case"open":return{start:p,end:s+i};case"regex":{let m=l+r,d=Af(u.regex),g=m.match(d),x=g==null?0:g[0].length;for(;x!==0&&x<l.length;)m=l.slice(x)+r,g=m.match(d),x=g==null?0:x+g[0].length;return x===0?{start:p,end:s}:{start:p,end:o+x}}}}}function MM(t,e,r){let{start:n,end:i}=t.originalOffsets,{start:o,end:s}=e.offsets,l=Math.min(n,o),u="";return o<n&&(u+=e.text.substring(0,n-o)),u+=t.event.text,i<s&&(u+=e.text.substring(s-i,e.text.length)),u.substring(r.start-l,r.end-l)}function DM(t,e){let{document:r,contentChanges:n}=t,i=n.map(o=>{let s=o.text.length-o.rangeLength,l=o.rangeOffset,u=l+o.rangeLength,p=l,m=u+s;return{displacement:s,event:o,originalOffsets:{start:l,end:u},finalOffsets:{start:p,end:m}}});for(let o of e){let s=o.offsets,l=i.map(p=>{let m;return p.originalOffsets.start>s.end?{start:0,end:0}:p.originalOffsets.end<s.start?{start:p.displacement,end:p.displacement}:(p.event.rangeLength===0?o.range.isEmpty?m=iv(p,o):m=av(p,o):m=nv(p,o),o.text=MM(p,o,m),{start:m.start-s.start,end:m.end-s.end})}),u={start:s.start+bf(l,({start:p})=>p),end:s.end+bf(l,({end:p})=>p)};o.range=o.range.with(r.positionAt(u.start),r.positionAt(u.end)),o.offsets=u}}var Zm=class{constructor(){this.rangeInfoLists=new Map;this.replaceEditLists=new Map;this.listenForDocumentChanges()}getDocumentRangeInfoLists(e){return XS(this.rangeInfoLists,e.uri.toString(),()=>[])}getDocumentReplaceEditLists(e){return XS(this.replaceEditLists,e.uri.toString(),()=>[])}registerRangeInfoList(e,r){let n=this.getDocumentRangeInfoLists(e);return n.push(r),()=>cr(n,r)}registerReplaceEditList(e,r){let n=this.getDocumentReplaceEditLists(e);return n.push(r),()=>cr(n,r)}*documentRangeInfoGenerator(e){let r=this.getDocumentRangeInfoLists(e);for(let n of r)for(let i of n)yield i}listenForDocumentChanges(){this.disposable=k().onDidChangeTextDocument(e=>{let r=this.getDocumentReplaceEditLists(e.document),n={...e,contentChanges:e.contentChanges.map(i=>q5(r,i)?{...i,isReplace:!0}:i)};DM(n,this.documentRangeInfoGenerator(e.document))})}dispose(){this.disposable.dispose()}};function q5(t,e){for(let r of t)for(let n of r)if(n.range.isRangeEqual(e.range)&&n.text===e.text)return!0;return!1}var Ym=class{constructor(){this.signals={prePhrase:{getVersion(){return Promise.resolve(null)}}}}getFocusedElementType(){return Promise.resolve(void 0)}};var Xm=class{async allocateHats(){}async getReadableMap(){return{getEntries(){return[]},getToken(){throw new Error("Hat map is disabled")}}}dispose(){}};var Jm=class{onDidChangeDefinition(e){return{dispose:()=>{}}}loadLanguage(e){return Promise.resolve()}get(e){}getNodeAtLocation(e,r){}dispose(){}};var ed=class{getSnippetStrict(e){throw new Error("Snippets are not implemented.")}openNewSnippetFile(e,r){throw new Error("Snippets are not implemented.")}};var td=class{getSpokenFormEntries(){throw new Rs}onDidChange(){return{dispose:()=>{}}}};var rd=class{getTree(e){throw new Error("Tree sitter not provided")}loadLanguage(e){return Promise.resolve(!1)}getNodeAtLocation(e,r){throw new Error("Tree sitter not provided")}createQuery(e,r){throw new Error("Tree sitter not provided")}};var at=class extends Error{constructor(r,n=!1,i=!1){super(`No spoken form for: ${r}`);this.reason=r;this.requiresTalonUpdate=n;this.isPrivate=i}};var FM={curlyBrackets:["{","}"],angleBrackets:["<",">"],escapedDoubleQuotes:['\\"','\\"'],escapedSingleQuotes:["\\'","\\'"],escapedParentheses:["\\(","\\)"],escapedSquareBrackets:["\\[","\\]"],doubleQuotes:['"','"'],parentheses:["(",")"],backtickQuotes:["`","`"],squareBrackets:["[","]"],singleQuotes:["'","'"],tripleBacktickQuotes:["```","```"],tripleDoubleQuotes:['"""','"""'],tripleSingleQuotes:["'''","'''"],whitespace:[" "," "],any:null,string:null,collectionBoundary:null};var IM=new mo(t=>t);for(let[t,e]of Object.entries(FM))e!=null&&IM.set(e,t);function CM(t,e,r){let n=IM.get([e,r]);if(n==null)throw Error(`Unknown surrounding pair delimiters '${e} ${r}'`);return t.pairedDelimiter[n]}function OM(t){throw new at(`${t.type} insertion snippet`)}function NM(t){throw new at(`${t.type} wrap with snippet`)}function Il(t,e,r){let n=r==="vertical"?`${xt.verticalRange} `:"";if(t&&e)return n+xt.rangeExclusive;if(t)throw new at("Range exclude anchor");return e?n+xt.rangeExcludingEnd:r==="vertical"?xt.verticalRange:xt.rangeInclusive}function LM(t){return Object.fromEntries(Object.entries(t).map(([e,r])=>[e,Object.fromEntries(Object.entries(r).map(([n,i])=>[n,{type:"customizable",spokenForms:i,spokenFormType:e,id:n}]))]))}var z5=["zero","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen","twenty","twenty one","twenty two","twenty three","twenty four","twenty five","twenty six","twenty seven","twenty eight","twenty nine","thirty","thirty one","thirty two","thirty three","thirty four","thirty five","thirty six","thirty seven","thirty eight","thirty nine","forty","forty one","forty two","forty three","forty four","forty five","forty six","forty seven","forty eight","forty nine","fifty","fifty one","fifty two","fifty three","fifty four","fifty five","fifty six","fifty seven","fifty eight","fifty nine","sixty","sixty one","sixty two","sixty three","sixty four","sixty five","sixty six","sixty seven","sixty eight","sixty nine","seventy","seventy one","seventy two","seventy three","seventy four","seventy five","seventy six","seventy seven","seventy eight","seventy nine","eighty","eighty one","eighty two","eighty three","eighty four","eighty five","eighty six","eighty seven","eighty eight","eighty nine","ninety","ninety one","ninety two","ninety three","ninety four","ninety five","ninety six","ninety seven","ninety eight","ninety nine"],G5=["zeroth","first","second","third","fourth","fifth","sixth","seventh","eighth","ninth","tenth","eleventh","twelfth","thirteenth","fourteenth","fifteenth","sixteenth","seventeenth","eighteenth","nineteenth","twentieth"];function Ns(t){let e=z5[t];if(e==null)throw Error(`Unknown number '${t}'`);return e}function Cl(t){let e=G5[t];if(e==null)throw Error(`Unknown ordinal '${t}'`);return e}var nd=class{constructor(e){this.spokenFormMap=e;this.handleModifier=this.handleModifier.bind(this)}handlePrimitiveTarget(e){let r=[];return e.modifiers!=null&&r.push(e.modifiers.map(this.handleModifier)),e.mark!=null&&r.push(this.handleMark(e.mark)),r}handleModifier(e){switch(e.type){case"cascading":case"modifyIfUntyped":case"preferredScope":throw new at(`Modifier '${e.type}'`);case"containingScope":return e.ancestorIndex==null||e.ancestorIndex===0?this.handleScopeType(e.scopeType):[new Array(e.ancestorIndex).fill(this.spokenFormMap.modifierExtra.ancestor),this.handleScopeType(e.scopeType)];case"everyScope":return[this.spokenFormMap.simpleModifier.everyScope,this.handleScopeType(e.scopeType)];case"extendThroughStartOf":case"extendThroughEndOf":{let r=this.spokenFormMap.simpleModifier[e.type];return e.modifiers!=null?[r,e.modifiers.map(this.handleModifier)]:[r]}case"relativeScope":return e.offset===0?this.handleRelativeScopeInclusive(e):this.handleRelativeScopeExclusive(e);case"ordinalScope":{let r=this.handleScopeType(e.scopeType),n=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.length===1)return e.start===-1?[n,this.spokenFormMap.modifierExtra.last,r]:e.start===0?[n,this.spokenFormMap.modifierExtra.first,r]:e.start<0?[n,Cl(Math.abs(e.start)),this.spokenFormMap.modifierExtra.last,r]:[n,Cl(e.start+1),r];let i=Ns(e.length);if(e.start===0)return[n,this.spokenFormMap.modifierExtra.first,i,Ol(r)];if(e.start===-e.length)return[n,this.spokenFormMap.modifierExtra.last,i,Ol(r)];throw new at(`'${e.type}' with count > 1 and offset away from start / end`)}case"range":{if(e.anchor.type==="ordinalScope"&&e.active.type==="ordinalScope"&&e.anchor.length===1&&e.active.length===1&&e.anchor.scopeType.type===e.active.scopeType.type){let r=e.anchor.start===-1?this.spokenFormMap.modifierExtra.last:Cl(e.anchor.start+1),n=this.handleModifier(e.active),i=Il(e.excludeAnchor,e.excludeActive);return[r,i,n]}throw Error(`Modifier '${e.type}' is not fully implemented`)}default:return[this.spokenFormMap.simpleModifier[e.type]]}}handleRelativeScopeInclusive(e){let r=this.handleScopeType(e.scopeType),n=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.length===1){let s=e.direction==="forward"?xt.forward:xt.backward;return[n,r,s]}let i=Ns(e.length),o=Ol(r);return e.direction==="forward"?[n,i,o]:[n,i,o,xt.backward]}handleRelativeScopeExclusive(e){let r=this.handleScopeType(e.scopeType),n=e.direction==="forward"?xt.next:xt.previous,i=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.offset===1){let o=Ns(e.length);if(e.length===1)return[i,n,r];let s=Ol(r);return[i,n,o,s]}if(e.length===1){let o=Cl(e.offset);return[i,o,n,r]}throw new at(`${e.type} modifier with offset > 1 and length > 1`)}handleScopeType(e){switch(e.type){case"oneOf":case"surroundingPairInterior":throw new at(`Scope type '${e.type}'`);case"glyph":return[this.spokenFormMap.complexScopeTypeType.glyph,HM(this.spokenFormMap.grapheme,"grapheme",e.character)];case"surroundingPair":{let r=this.spokenFormMap.pairedDelimiter[e.delimiter];return e.forceDirection!=null?[this.spokenFormMap.surroundingPairForceDirection[e.forceDirection],r]:r}case"customRegex":return this.spokenFormMap.customRegex[e.regex]??{type:"customizable",spokenForms:{spokenForms:[],isCustom:!0,defaultSpokenForms:[],requiresTalonUpdate:!1,isPrivate:!1},spokenFormType:"customRegex",id:e.regex};case"interior":return this.spokenFormMap.simpleModifier.interiorOnly;default:return this.spokenFormMap.simpleScopeTypeType[e.type]}}handleMark(e){switch(e.type){case"decoratedSymbol":{let[r,n]=e.symbolColor.split("-"),i=[];return r!=="default"&&i.push(AA(r)),n!=null&&i.push(MA(n)),i.push(HM(this.spokenFormMap.grapheme,"grapheme",e.character)),i}case"lineNumber":return this.handleLineNumberMark(e);case"range":{if(e.anchor.type==="lineNumber"&&e.active.type==="lineNumber"){let[r,n]=this.handleLineNumberMark(e.anchor),[i,o]=this.handleLineNumberMark(e.active);if(r===i){let s=Il(e.excludeAnchor,e.excludeActive);return[r,n,s,o]}}throw Error(`Mark '${e.type}' is not fully implemented`)}case"explicit":case"keyboard":case"target":throw new at(`Mark '${e.type}'`);default:return[ym[e.type]]}}handleLineNumberMark(e){switch(e.lineNumberType){case"absolute":throw new at("Absolute line numbers");case"modulo100":return[xm.modulo100,Ns(e.lineNumber+1)];case"relative":return[e.lineNumber<0?xm.relativeUp:xm.relativeDown,Ns(Math.abs(e.lineNumber))]}}};function Ol(t){if(typeof t=="string")return UM(t);if(Array.isArray(t)){if(t.length===0)return t;let e=t[t.length-1];return[...t.slice(0,-1),Ol(e)]}return{...t,spokenForms:{...t.spokenForms,spokenForms:t.spokenForms.spokenForms.map(UM)}}}function UM(t){return`${t}s`}function HM(t,e,r){let n=t[r];if(n==null)throw new at(`${e} '${r}'`);return n}var Ls=class{constructor(e){this.spokenFormMap=LM(e),this.primitiveGenerator=new nd(this.spokenFormMap)}getSpokenFormForSingleTerm(e,r){return this.componentsToSpokenForm(()=>{let n=this.spokenFormMap[e][r];if(n==null)throw new at(`${e} with id ${r}`);return n})}processCommand(e){return this.componentsToSpokenForm(()=>this.handleAction(e.action))}processScopeType(e){return this.componentsToSpokenForm(()=>[this.primitiveGenerator.handleScopeType(e)])}componentsToSpokenForm(e){try{return{type:"success",spokenForms:VM(e())}}catch(r){if(r instanceof at)return{type:"error",reason:r.reason,requiresTalonUpdate:r.requiresTalonUpdate,isPrivate:r.isPrivate};throw r}}handleAction(e){switch(e.name){case"editNew":case"getText":case"replace":case"executeCommand":case"parsed":case"private.getTargets":case"private.setKeyboardTarget":throw new at(`Action '${e.name}'`);case"replaceWithTarget":case"moveToTarget":return[this.spokenFormMap.action[e.name],this.handleTarget(e.source),this.handleDestination(e.destination)];case"swapTargets":return[this.spokenFormMap.action[e.name],this.handleTarget(e.target1),xt.swapConnective,this.handleTarget(e.target2)];case"callAsFunction":return e.argument.type==="implicit"?[this.spokenFormMap.action[e.name],this.handleTarget(e.callee)]:[this.spokenFormMap.action[e.name],this.handleTarget(e.callee),"on",this.handleTarget(e.argument)];case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return[CM(this.spokenFormMap,e.left,e.right),this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"pasteFromClipboard":return[this.spokenFormMap.action[e.name],this.handleDestination(e.destination)];case"insertSnippet":return[this.spokenFormMap.action[e.name],OM(e.snippetDescription),this.handleDestination(e.destination)];case"generateSnippet":if(e.snippetName!=null)throw new at(`${e.name}.snippetName`);return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"wrapWithSnippet":return[NM(e.snippetDescription),this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"highlight":{if(e.highlightId!=null)throw new at(`${e.name}.highlightId`);return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)]}default:return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)]}}handleTarget(e){switch(e.type){case"list":if(e.elements.length<2)throw new at("List target with < 2 elements");return e.elements.map((r,n)=>n===0?this.handleTarget(r):[xt.listConnective,this.handleTarget(r)]);case"range":{let r=this.handleTarget(e.anchor),n=this.handleTarget(e.active),i=Il(e.excludeAnchor,e.excludeActive,e.rangeType);return[r,i,n]}case"primitive":return this.primitiveGenerator.handlePrimitiveTarget(e);case"implicit":return[]}}handleDestination(e){switch(e.type){case"list":if(e.destinations.length<2)throw new at("List destination with < 2 elements");return e.destinations.map((r,n)=>n===0?this.handleDestination(r):[xt.listConnective,this.handleDestination(r)]);case"primitive":return[this.handleInsertionMode(e.insertionMode),this.handleTarget(e.target)];case"implicit":return[]}}handleInsertionMode(e){switch(e){case"to":return xt.sourceDestinationConnective;case"before":return xt.before;case"after":return xt.after}}};function VM(t){if(typeof t=="string")return[t];if(Array.isArray(t))return t.length===0?[""]:BM(t.map(VM)).map(e=>e.filter(r=>r.length!==0).join(" "));if(t.spokenForms.spokenForms.length===0){let e=`${yl(t.spokenFormType)} with id ${t.id}`,r;throw t.spokenForms.isPrivate?r="this is a private spoken form currently only for internal experimentation":t.spokenForms.requiresTalonUpdate?r="please update talon to the latest version (see https://www.cursorless.org/docs/user/updating/)":r="please see https://www.cursorless.org/docs/user/customization/ for more information",new at(`${e}; ${r}`,t.spokenForms.requiresTalonUpdate,t.spokenForms.isPrivate)}return t.spokenForms.spokenForms}function BM(t){if(t.length===0)return[];if(t.length===1)return t[0].map(i=>[i]);let[e,...r]=t,n=BM(r);return e.flatMap(i=>n.map(o=>[i,...o]))}var id=class{constructor(e){this.talonSpokenForms=e;this.notifier=new Kt;this.spokenFormMap_={...Ii};this.onDidChangeCustomSpokenForms=this.notifier.registerListener;this.disposable=e.onDidChange(()=>this.updateSpokenFormMaps()),this.customSpokenFormsInitialized=this.updateSpokenFormMaps()}get spokenFormMap(){return this.spokenFormMap_}get needsInitialTalonUpdate(){return this.needsInitialTalonUpdate_}async updateSpokenFormMaps(){let e;try{if(e=await this.talonSpokenForms.getSpokenFormEntries(),e.length===0)throw new Error("Custom spoken forms list empty")}catch(r){if(r instanceof gl)this.needsInitialTalonUpdate_=!0;else if(!(r instanceof Rs)){console.error("Error loading custom spoken forms",r);let n=r.message.replace(/\.$/,"");lt(k().messages,"CustomSpokenForms.updateSpokenFormMaps",`Error loading custom spoken forms: ${n}. Falling back to default spoken forms.`)}this.spokenFormMap_={...Ii},this.notifier.notifyListeners();return}for(let r of WP)K5(this.spokenFormMap_,r,DS[r],Object.fromEntries(e.filter(n=>n.type===r).map(({id:n,spokenForms:i})=>[n,i])));this.notifier.notifyListeners()}getCustomRegexScopeTypes(){return Object.keys(this.spokenFormMap_.customRegex).map(e=>({type:"customRegex",regex:e}))}dispose(){this.disposable.dispose()}};function K5(t,e,r,n){let i=Array.from(new Set([...Object.keys(r),...Object.keys(n)])),o={};for(let s of i){let{defaultSpokenForms:l=[],isPrivate:u=!1}=r[s]??{},p=n[s];o[s]=p==null?{defaultSpokenForms:l,spokenForms:[],requiresTalonUpdate:!u,isCustom:!1,isPrivate:u}:{defaultSpokenForms:l,spokenForms:p,requiresTalonUpdate:!1,isCustom:!Pi(l,p),isPrivate:u}}t[e]=o}var od=class{constructor(e){this.customSpokenForms=new id(e),this.customSpokenFormsInitialized=this.customSpokenForms.customSpokenFormsInitialized,this.spokenFormGenerator=new Ls(this.customSpokenForms.spokenFormMap),this.disposable=this.customSpokenForms.onDidChangeCustomSpokenForms(()=>{this.spokenFormGenerator=new Ls(this.customSpokenForms.spokenFormMap)})}onDidChangeCustomSpokenForms(e){return this.customSpokenForms.onDidChangeCustomSpokenForms(e)}commandToSpokenForm(e){return this.spokenFormGenerator.processCommand(e)}scopeTypeToSpokenForm(e){return this.spokenFormGenerator.processScopeType(e)}actionIdToSpokenForm(e){return this.spokenFormGenerator.getSpokenFormForSingleTerm("action",e)}graphemeToSpokenForm(e){return this.spokenFormGenerator.getSpokenFormForSingleTerm("grapheme",e)}getCustomRegexScopeTypes(){return this.customSpokenForms.getCustomRegexScopeTypes()}get needsInitialTalonUpdate(){return this.customSpokenForms.needsInitialTalonUpdate}dispose(){this.disposable.dispose()}};function*Q5(t){for(let e of t)for(let r of e)yield r}function*Nl(t,e){let r=sd(e),n=t;for(;n-- >0;){let i=r.next();if(!i.done)yield i.value;else return}}function*sv(t){let e=sd(t),r=e.next();if(r.done)return;let n=r.value;for(let i of e)yield[n,i],n=i}var c_e=Symbol();function*Z5(t=0,e=1){let r=t;for(;;)yield r,r+=e}function*ad(t,e){for(let r of t)e(r)&&(yield r)}function*Wt(t,e){for(let r of t)yield e(r)}function*$M(t,e,r,n=1){let i,o;if(r!==void 0?(i=e,o=r):(i=0,o=e),i<0)throw new Error("start cannot be negative");if(o!==null&&o<0)throw new Error("stop cannot be negative");if(n<=0)throw new Error("step cannot be negative");let s=-1,l=sd(t),u;for(;;){if(s++,o!==null&&s>=o||(u=l.next(),u.done))return;s<i||(s-i)%n===0&&(yield u.value)}}function*Y5(t,e){let r=sd(t),n;for(;!(n=r.next()).done;){let i=n.value;if(!e(i))return;yield i}}function sd(t){return t[Symbol.iterator]()}function Us(t,e){return Array.from(Wt(t,e))}function WM(t,e,r){let n=Z5(t,r),i=r>=0?o=>o<e:o=>o>e;return Y5(n,i)}function jM(t,e,r=1){return e!==void 0?WM(t,e,r):WM(0,t,r)}function cd(t,e){return Q5(Wt(t,e))}function Gr(t,e,{domain:r},{domain:n}){return t==="forward"?X5(e,r,n):J5(e,r,n)}function X5(t,e,r){let n=e.start.isAfterOrEqual(t),i=r.start.isAfterOrEqual(t);if(n&&i){let s=e.start.compareTo(r.start);return s===0?e.end.compareTo(r.end):s}if(!n&&!i){let s=e.end.compareTo(r.end);return s===0?-e.start.compareTo(r.start):s}if(!n&&i){let s=e.end.compareTo(r.start);return s!==0?s:r.isEmpty?1:-1}let o=e.start.compareTo(r.end);return o!==0?o:e.isEmpty?-1:1}function J5(t,e,r){let n=e.end.isBeforeOrEqual(t),i=r.end.isBeforeOrEqual(t);if(n&&i){let s=-e.end.compareTo(r.end);return s===0?-e.start.compareTo(r.start):s}if(!n&&!i){let s=-e.start.compareTo(r.start);return s===0?e.end.compareTo(r.end):s}if(!n&&i){let s=-e.start.compareTo(r.end);return s!==0?s:r.isEmpty?1:-1}let o=-e.end.compareTo(r.start);return o!==0?o:e.isEmpty?-1:1}function qM(t,e,r,n,i,o){return e8(t,n,i,o)&&(i==null||Gr(r,n.includeDescendantScopes?t:e,i,o)<0)}function e8(t,e,r,n){let{containment:i,distalPosition:o,allowAdjacentScopes:s,skipAncestorScopes:l}=e,{domain:u}=n;switch(i){case"disallowed":if(u.contains(t))return!1;break;case"disallowedIfStrict":if(cM(u,t))return!1;break;case"required":if(!u.contains(t))return!1;break}return l&&r!=null&&u.contains(r.domain)?!1:t8(new q(t,o),u,s)}function t8(t,e,r){let n=t.intersection(e);return n==null?!1:!n.isEmpty||r||e.isEmpty}var r8={containment:null,allowAdjacentScopes:!1,skipAncestorScopes:!1,includeDescendantScopes:!1},Ue=class{constructor(){this.includeAdjacentInEvery=!1}*generateScopes(e,r,n,i={}){let o={...r8,...i,distalPosition:i.distalPosition??(n==="forward"?e.document.range.end:e.document.range.start)},s,l=r;for(let u of this.generateScopeCandidates(e,r,n,o))if(qM(r,l,n,o,s,u)&&(yield u,s=u,l=n==="forward"?u.domain.end:u.domain.start),this.canStopEarly(r,n,o,s,u))return}canStopEarly(e,r,n,i,o){let{containment:s,distalPosition:l,skipAncestorScopes:u}=n;if(this.isHierarchical&&!u)return!1;let p=this.isHierarchical&&u?i:o;return p==null?!1:!!(s==="required"&&(r==="forward"?p.domain.end.isAfter(e):p.domain.start.isBefore(e))||(r==="forward"?p.domain.end.isAfterOrEqual(l):p.domain.start.isBeforeOrEqual(l)))}};var Dr=class extends Ue{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.scopeType=n;this.languageId=i;this.isHierarchical=!1}get searchScopeType(){return this.iterationScopeType}get searchScopeHandler(){return this._searchScopeHandler==null&&(this._searchScopeHandler=this.scopeHandlerFactory.create(this.searchScopeType,this.languageId)),this._searchScopeHandler}generateScopeCandidates(r,n,i,o){let{containment:s,...l}=o,u=this.searchScopeHandler.generateScopes(r,n,i,{containment:s==="required"?"required":void 0,...l});return cd(u,p=>this.generateScopesInSearchScope(i,p))}};var ld=class extends Ue{constructor(r,n){super();this.scopeType={type:"line"};this.iterationScopeType={type:"paragraph"};this.isHierarchical=!1;this.includeAdjacentInEvery=!0}*generateScopeCandidates(r,n,i){if(i==="forward")for(let o=n.line;o<r.document.lineCount;o++)yield zM(r,o);else for(let o=n.line;o>=0;o--)yield zM(r,o)}};function zM(t,e){let{range:r}=t.document.lineAt(e);return{editor:t,domain:r,getTargets:n=>[cv(t,n,r)]}}function cv(t,e,r){return new pr({editor:t,isReversed:e,contentRange:lv(t,r)})}function lv(t,e){let r=t.document.lineAt(e.start),n=t.document.lineAt(e.end);return new q(r.rangeTrimmed?.start??r.range.start,n.rangeTrimmed?.end??n.range.end)}function xn(t,e,r,n){let i=e.document.offsetAt(r.start),o=e.document.getText(r),s=l=>new q(e.document.positionAt(i+l.index),e.document.positionAt(i+l.index+l[0].length));return t.lastIndex=0,n==="forward"?Wt(o.matchAll(t),s):Array.from(o.matchAll(t),s).reverse()}var ud=class extends Dr{constructor(){super(...arguments);this.scopeType={type:"identifier"};this.iterationScopeType={type:"line"};this.regex=Mr(this.languageId).identifierMatcher}generateScopesInSearchScope(r,{editor:n,domain:i}){return Wt(xn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new Xt({editor:n,contentRange:o,isReversed:s})]}))}};function pd(t,e,r){let n=t.editor.document.getText(t.domain),i=e.editor.document.getText(e.domain);for(let o of r){let s=ta(o,n),l=ta(o,i);if(s&&!l)return!0;if(l&&!s)return!1}}var n8=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}\p{Z}\p{C}]/gu,i8=/[$]/g,o8=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}]/gu,fd=class extends Dr{constructor(){super(...arguments);this.scopeType={type:"character"};this.iterationScopeType={type:"token"}}get searchScopeType(){return{type:"line"}}generateScopesInSearchScope(r,{editor:n,domain:i}){return Wt(xn(n8,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new $e({editor:n,contentRange:o,isReversed:s,textualType:"character"})]}))}isPreferredOver(r,n){let{identifierMatcher:i}=Mr(this.languageId);return pd(r,n,[i,i8,o8])}};var md=class extends Dr{constructor(){super(...arguments);this.scopeType={type:"word"};this.iterationScopeType={type:"identifier"};this.wordTokenizer=new Os(this.languageId)}getScopesInSearchScope({editor:r,domain:n}){let{document:i}=r,o=i.offsetAt(n.start),l=this.wordTokenizer.splitIdentifier(i.getText(n)).map(u=>new q(i.positionAt(o+u.index),i.positionAt(o+u.index+u.text.length)));return l.map((u,p)=>({editor:r,domain:u,getTargets:m=>{let d=p>0?l[p-1]:null,g=p+1<l.length?l[p+1]:null;return[a8(m,r,d,u,g)]}}))}generateScopesInSearchScope(r,n){let i=this.getScopesInSearchScope(n);return r==="backward"&&i.reverse(),i}};function a8(t,e,r,n,i){let o=r!=null&&n.start.isAfter(r.end)?new q(r.end,n.start):void 0,s=i!=null&&i.start.isAfter(n.end)?new q(n.end,i.start):void 0,u=o!=null||s!=null?e.document.getText(o??s):"";return new Lm({editor:e,isReversed:t,contentRange:n,insertionDelimiter:u,leadingDelimiterRange:o,trailingDelimiterRange:s})}var s8=/[$]/g,dd=class extends Dr{constructor(){super(...arguments);this.scopeType={type:"token"};this.iterationScopeType={type:"line"};this.regex=Mr(this.languageId).tokenMatcher}generateScopesInSearchScope(r,{editor:n,domain:i}){return Wt(xn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new Xt({editor:n,contentRange:o,isReversed:s})]}))}isPreferredOver(r,n){let{identifierMatcher:i}=Mr(this.languageId);return pd(r,n,[i,s8])}};var hd=class extends Ue{constructor(r,n){super();this.scopeType={type:"document"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i){let o=r.document.range;yield{editor:r,domain:o,getTargets:s=>[new Cm({editor:r,isReversed:s,contentRange:o})]}}};function gd(t,e,r,n,i){if(!t&&n!=null&&i!=null&&qS(e,n)>qS(e,i))return r.union(n)}function Hs(t){return t.containment==null&&t.skipAncestorScopes}function GM(t,e,r,{containment:n,distalPosition:i,allowAdjacentScopes:o}){let{start:s,end:l}=c8(t.offsetAt(e),t.offsetAt(i),r,n,o);return{start:t.positionAt(s),end:t.positionAt(l)}}function c8(t,e,r,n,i){let o=i?1:0;if(n==="required")return r==="forward"?{start:t-o,end:t+1}:{start:t-1,end:t+o};let s=n==="disallowed"?1:-o;return r==="forward"?{start:t+s,end:e+o}:{start:e-o,end:t-s}}function KM(t,e,r){let n=[],i=[];for(let o of t)i.length===0||e(i[i.length-1],o)?i.push(o):(n.push(r(i)),i=[o]);return i.length>0&&n.push(r(i)),n}var Vs=class extends Ue{constructor(r){super();this.query=r}*generateScopeCandidates(r,n,i,o){let{document:s}=r,l=Hs(o),{start:u,end:p}=GM(s,n,i,o),m=this.query.matches(s,u,p).map(d=>this.matchToScope(r,d,l)).filter(d=>d!=null).sort((d,g)=>Gr(i,n,d,g));yield*KM(m,(d,g)=>d.domain.isRangeEqual(g.domain),d=>d.length===1?d[0]:{...d[0],getTargets(g){let x=nl(d.flatMap(b=>b.getTargets(g)),(b,v)=>b.isEqual(v));if(x.length>1&&!d.every(b=>b.allowMultiple)){let b="Please use #allow-multiple! predicate in your query to allow multiple matches for this scope type";if(lt(k().messages,"BaseTreeSitterScopeHandler.allow-multiple",b),k().runMode==="test")throw Error(b)}return x}})}};function uv(t,e,r,n){return n?Bs(t,`${e}.${r}`,`_.${r}`):Bs(t,`${e}.${r}`)??(Bs(t,e)!=null?Bs(t,`_.${r}`):void 0)}function bo(t,e,r,n){return uv(t,e,r,n)?.range}function Bs(t,...e){return t.captures.find(r=>e.some(n=>r.name===n))}var yd=class extends Vs{constructor(r,n){super(r);this.iterateeScopeType=n;this.isHierarchical=!0;this.scopeType=void 0}get iterationScopeType(){throw Error("Not implemented")}matchToScope(r,n,i){let o=this.iterateeScopeType.type,s=uv(n,o,"iteration",!1);if(s==null)return;let{range:l,allowMultiple:u}=s,p=bo(n,o,"iteration.domain",!1)??l;return{editor:r,domain:p,allowMultiple:u,getTargets:m=>[new $e({editor:r,isReversed:m,contentRange:l})]}}};var xd=class extends Vs{constructor(r,n){super(r);this.scopeType=n;this.isHierarchical=!0}get iterationScopeType(){return{type:"custom",scopeHandler:new yd(this.query,this.scopeType)}}matchToScope(r,n,i){let o=this.scopeType.type,s=Bs(n,o);if(s==null)return;let{range:l,allowMultiple:u,insertionDelimiter:p}=s,m=bo(n,o,"domain",!0)??l,d=bo(n,o,"prefix",!0)?.with(void 0,l.start),g=bo(n,o,"leading",!0)?.with(void 0,d?.start??l.start),x=bo(n,o,"trailing",!0)?.with(l.end),b=bo(n,o,"removal",!0);return b==null&&(o==="collectionItem"||o==="argumentOrParameter")&&(b=gd(i,r,l,g,x)),{editor:r,domain:m,allowMultiple:u,getTargets:v=>[new So({scopeTypeType:o,editor:r,isReversed:v,contentRange:l,prefixRange:d,removalRange:b,leadingDelimiterRange:g,trailingDelimiterRange:x,insertionDelimiter:p})]}}};function QM(t){return t.flatMap((e,r)=>{let{value:n,done:i}=e.next();return i?[]:[{iterator:e,value:n,index:r}]})}function ZM(t,e){return t.flatMap(r=>{let{iterator:n,index:i}=r,{value:o}=r,s=!1;for(;!s&&!e(o);)({value:o,done:s}=n.next());return s?[]:[{iterator:n,value:o,index:i}]})}var ti=class t extends Ue{constructor(r,n){super();this.scopeHandlers=r;this.getIterationScopeHandler=n;this.isHierarchical=!0;this.scopeType=void 0}static create(r,n,i){let o=n.scopeTypes.map(s=>r.create(s,i));return this.createFromScopeHandlers(r,i,o)}static createFromScopeHandlers(r,n,i){let o=()=>new t(i.map(s=>r.create(s.iterationScopeType,n)),()=>{throw new Error("Not implemented")});return new t(i,o)}get iterationScopeType(){return this.iterationScopeHandler==null&&(this.iterationScopeHandler=this.getIterationScopeHandler()),{type:"custom",scopeHandler:this.iterationScopeHandler}}*generateScopeCandidates(r,n,i,o){if(this.iterationScopeHandler?.lastYieldedIndex!=null){let u=this.iterationScopeHandler.lastYieldedIndex;yield*this.scopeHandlers[u].generateScopes(r,n,i,o);return}let s=this.scopeHandlers.map(u=>u.generateScopes(r,n,i,o)[Symbol.iterator]()),l=QM(s);for(;l.length>0;){l.sort((m,d)=>Gr(i,n,m.value,d.value));let u=l[0],p=u.value;this.lastYieldedIndex=u.index,yield p,l=ZM(l,m=>Gr(i,n,p,m)<0)}}};var Td=class extends Ue{constructor(r,n){super();this.scopeType={type:"paragraph"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i){let{document:o}=r,s=i==="forward"?1:-1,l=i==="forward"?o.lineCount:-1,u=l8(o,n,i),p=r.document.lineAt(n);for(let m=n.line+s;m!==l;m+=s){let d=r.document.lineAt(m);d.isEmptyOrWhitespace?u!=null&&(yield YM(r,u.range.union(p.range)),u=void 0):u==null&&(u=d),p=d}u!=null&&(yield YM(r,u.range.union(p.range)))}};function l8(t,e,r){let n=r==="forward"?-1:1,i=r==="forward"?-1:t.lineCount,o=t.lineAt(e);if(!o.isEmptyOrWhitespace){for(let s=e.line+n;s!==i;s+=n){let l=t.lineAt(s);if(l.isEmptyOrWhitespace)break;o=l}return o}}function YM(t,e){return{editor:t,domain:e,getTargets:r=>[new yo({editor:t,isReversed:r,contentRange:lv(t,e)})]}}function Ll(t,e){return e.length>1?e.indexOf(t.slice(-1))>-1:t.slice(-1)===e}function XM(t,e){return t.slice(t.length-e.length)===e}var pv,p8=["al","adj","assn","Ave","BSc","MSc","Cell","Ch","Co","cc","Corp","Dem","Dept","ed","eg","Eq","Eqs","est","est","etc","Ex","ext","Fig","fig","Figs","figs","i.e","ie","Inc","inc","Jan","Feb","Mar","Apr","Jun","Jul","Aug","Sep","Sept","Oct","Nov","Dec","jr","mi","Miss","Mrs","Mr","Ms","Mol","mt","mts","no","Nos","PhD","MD","BA","MA","MM","pl","pop","pp","Prof","Dr","pt","Ref","Refs","Rep","repr","rev","Sec","Secs","Sgt","Col","Gen","Rep","Sen","Gov","Lt","Maj","Capt","St","Sr","sr","Jr","jr","Rev","Sun","Mon","Tu","Tue","Tues","Wed","Th","Thu","Thur","Thurs","Fri","Sat","trans","Univ","Viz","Vol","vs","v"];function JM(t){t?pv=t:pv=p8}function fv(t){return/^[A-Z][a-z].*/.test(t)||Sd(t)}function eD(t){return fv(t)||/``|"|'/.test(t.substring(0,2))}function tD(t){let e=t.replace(/[-'`~!@#$%^&*()_|+=?;:'",.<>{}[\]\\/]/gi,"");return~pv.indexOf(e)}function rD(t,e){return(t==="a.m."||t==="p.m.")&&e.replace(/\W+/g,"").slice(-3).toLowerCase()==="day"}function mv(t){let e=t.replace(/[()[]{}]/g,"").match(/(.\.)*/);return e&&e[0].length>0}function nD(t){return t.length<=3?!0:fv(t)}function dv(t,e){return e.length>0?t<5&&e[0].length<6&&fv(e[0])?!0:e.filter(function(n){return/[A-Z]/.test(n.charAt(0))}).length>=3:!1}function Sd(t,e){return e&&(t=t.slice(e-1,e+2)),!isNaN(t)}function iD(t){return t.match(/^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/)}function oD(t){return t.match(/[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/)}function aD(t){let e=0;return((e=t.indexOf("."))>-1||(e=t.indexOf("!"))>-1||(e=t.indexOf("?"))>-1)&&t.charAt(e+1).match(/[a-zA-Z].*/)?[t.slice(0,e),t.slice(e+1)]:!1}function sD(t){return t==="."||t==="!"||t==="?"}var lD=" @~@ ",cD=lD.trim(),m8=new RegExp("\\S",""),d8=new RegExp("\\n+|[-#=_+*]{4,}","g"),h8=new RegExp("\\S+|\\n","g"),g8={newlineBoundaries:!1,preserveWhitespace:!1,abbreviations:void 0};function uD(t,e){if(!t)return[];if(!m8.test(t))return[];let r={...g8,...e};JM(r.abbreviations),r.newlineBoundaries&&(t=t.replace(d8,lD));let n,i;r.preserveWhitespace?(i=t.split(/(<br\s*\/?>|\S+|\n+)/),n=i.filter(function(d,g){return g%2})):n=t.trim().match(h8)??[];let o=0,s=0,l=[],u=[],p=[];if(!n||!n.length)return[];for(let d=0,g=n.length;d<g;d++){if(o++,p.push(n[d]),~n[d].indexOf(",")&&(o=0),sD(n[d])||Ll(n[d],"?!")||n[d]===cD){r.newlineBoundaries&&n[d]===cD&&p.pop(),u.push(p),o=0,p=[];continue}if((Ll(n[d],'"')||Ll(n[d],"\u201D"))&&(n[d]=n[d].slice(0,-1)),Ll(n[d],".")){if(d+1<g){if(n[d].length===2&&isNaN(n[d].charAt(0))||tD(n[d]))continue;if(eD(n[d+1])){if(rD(n[d],n[d+1])||dv(o,n.slice(d,6))||Sd(n[d+1])&&nD(n[d]))continue}else if(XM(n[d],"..")||mv(n[d])||dv(o,n.slice(d,5)))continue}u.push(p),p=[],o=0;continue}(s=n[d].indexOf("."))>-1&&(Sd(n[d],s)||mv(n[d])||oD(n[d])||iD(n[d]))||(l=aD(n[d]))&&(p.pop(),p.push(l[0]),u.push(p),p=[],o=0,p.push(l[1]))}return p.length&&u.push(p),u=u.filter(function(d){return d.length>0}),u.slice(1).reduce(function(d,g){let x=d[d.length-1];return x.length===1&&/^.{1,2}[.]$/.test(x[0])&&!/[.]/.test(g[0])?(d.pop(),d.push(x.concat(g)),d):(d.push(g),d)},[u[0]]).map(function(d,g){if(r.preserveWhitespace&&!r.newlineBoundaries){let x=d.length*2;return g===0&&(x+=1),i.splice(0,x).join("")}return d.join(" ")})}var y8=/\S*\p{L}/u,pD=/(\r?\n[^\p{L}]*\r?\n)|(?<=[.!?])(\s*\r?\n)/gu,x8={newlineBoundaries:!1,preserveWhitespace:!0},vd=class{*segment(e){let r=uD(e,x8),n=0;for(let i of r){let o=i.split(pD).filter(s=>s!=null);for(let s of o){if(!S8(s)){let l=T8(s,n);l!=null&&(yield l)}n+=s.length}}}};function T8(t,e){let r=$k(y8,t);if(r==null)return;let n=r.index;return n!==0&&(e+=n,t=t.slice(n)),{text:t.trimEnd(),index:e}}function S8(t){return ta(pD,t)}var bd=class extends Dr{constructor(){super(...arguments);this.scopeType={type:"sentence"};this.iterationScopeType={type:"paragraph"};this.segmenter=new vd}generateScopesInSearchScope(r,{editor:n,domain:i}){let o=n.document.offsetAt(i.start),s=n.document.getText(i),l=p=>{let m=new q(n.document.positionAt(o+p.index),n.document.positionAt(o+p.index+p.text.length));return{editor:n,domain:m,getTargets:d=>[new Xt({editor:n,contentRange:m,isReversed:d})]}},u=this.segmenter.segment(s);return r==="forward"?Wt(u,l):Array.from(u,l).reverse()}};var Ws=class extends Dr{constructor(){super(...arguments);this.iterationScopeType={type:"line"}}generateScopesInSearchScope(r,{editor:n,domain:i}){return Wt(xn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new Xt({editor:n,contentRange:o,isReversed:s})]}))}},wd=class extends Ws{constructor(){super(...arguments);this.regex=/\S+/g}},_d=class extends Ws{constructor(r,n,i){super(r,n,i);this.scopeType=n;this.regex=/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/g}},Ed=class extends Ws{constructor(r,n,i){super(r,n,i);this.scopeType=n}get regex(){return new RegExp(this.scopeType.regex,this.scopeType.flags??"gu")}},Rd=class extends Ws{constructor(r,n,i){super(r,n,i);this.scopeType=n}get regex(){return new RegExp($r(this.scopeType.character),"gui")}};var kd=class extends Ue{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.languageId=n;this.targetScopeType=i;this.isHierarchical=!0;this.targetScopeHandler=this.scopeHandlerFactory.create(this.targetScopeType,this.languageId),this.surroundingPairInteriorScopeHandler=this.scopeHandlerFactory.create({type:"surroundingPairInterior",delimiter:"any"},this.languageId)}get iterationScopeType(){switch(this.targetScopeHandler.iterationScopeType.type){case"custom":case"fallback":case"conditional":throw Error(`Iteration scope type can't be '${this.targetScopeHandler.iterationScopeType.type}' for BoundedBaseScopeHandler`)}return{type:"oneOf",scopeTypes:[this.targetScopeHandler.iterationScopeType,{type:"surroundingPairInterior",delimiter:"any"}]}}*generateScopeCandidates(r,n,i,o){let s=this.targetScopeHandler.generateScopes(r,n,i,{...o,containment:o.containment!=="disallowed"?o.containment:void 0}),l=Array.from(this.surroundingPairInteriorScopeHandler.generateScopes(r,n,i,{...o,containment:Hs(o)?"required":o.containment}));for(let u of s){let p=[];for(let m of l){let d=u.domain.intersection(m.domain);d!=null&&!d.isEmpty&&p.push({editor:r,domain:d,getTargets:g=>[this.getTargets(fD(u,g),fD(m,g))]})}p.push(u),p.sort((m,d)=>Gr(i,n,m,d)),yield*p}}};function fD(t,e){let r=t.getTargets(e);if(r.length!==1)throw Error(`Expected one target but got ${r.length}`);return r[0]}var Pd=class extends kd{constructor(r,n,i){super(r,i,{type:"nonWhitespaceSequence"});this.scopeType={type:"boundedNonWhitespaceSequence"}}getTargets(r,n){let i=r.contentRange.intersection(n.contentRange);if(i==null||i.isEmpty)throw Error("Expected non empty intersection");return new Xt({editor:r.editor,isReversed:r.isReversed,contentRange:i})}},Ad=class extends kd{constructor(r,n,i){super(r,i,{type:"paragraph"});this.scopeType={type:"boundedParagraph"}}getTargets(r,n){if(!(r instanceof yo))throw Error("Expected ParagraphTarget");return new Bm({editor:r.editor,isReversed:r.isReversed,paragraphTarget:r,containingInterior:n})}};var ri=class{constructor(e){this.items=e;this.index=0}add(e){this.items.push(e)}contains(e){return this.advance(e)}getContaining(e){if(this.advance(e))return this.items[this.index]}advance(e){for(;this.index<this.items.length;){let r=this.items[this.index].range;if(r.contains(e))return!0;if(e.end.isBeforeOrEqual(r.start))return!1;this.index++}return!1}};var $s=class{constructor(e){this.children=v8(e)}getSmallestContaining(e){return this.children.getContaining(e)?.getSmallestContaining(e)}};function v8(t){let e=[],r=[];for(let n of t){let i=new hv(n);for(;r.length>0&&!r[r.length-1].range.contains(n.range);)r.pop();let o=r[r.length-1];o!=null?o.children.add(i):e.push(i),r.push(i)}return new ri(e)}var hv=class{constructor(e){this.item=e;this.children=new ri([])}get range(){return this.item.range}getSmallestContaining(e){return this.children.getContaining(e)?.getSmallestContaining(e)??this.item}};var b8=",",gv=new RegExp(b8,"g");function mD(t){let e=t.getText();return fn(e,gv,r=>new q(t.positionAt(r.index),t.positionAt(r.index+r[0].length)))}var dD={type:"fallback",scopeTypes:[{type:"surroundingPairInterior",delimiter:"collectionBoundary"},{type:"conditional",scopeType:{type:"line"},predicate:t=>{let e=t.editor.document.getText(t.domain);return ta(gv,e)}}]};function yv(t,e,r,n,i,o){let s=i!=null?new q(i.end,n.start):void 0,l=o!=null?new q(n.end,o.start):void 0,u=gd(t,e,n,s,l),p=r.isSingleLine?", ":`,
`;return{editor:e,domain:n,getTargets(m){return[new So({scopeTypeType:"collectionItem",editor:e,isReversed:m,contentRange:n,insertionDelimiter:p,leadingDelimiterRange:s,trailingDelimiterRange:l,removalRange:u})]}}}function xv(t,e,r,n){let i=t.create({type:"surroundingPairInterior",delimiter:n},e);return Array.from(i.generateScopes(r,new fe(0,0),"forward",{containment:void 0,skipAncestorScopes:!1,includeDescendantScopes:!0}),o=>({range:o.domain}))}var Md=class extends Ue{constructor(r,n){super();this.scopeHandlerFactory=r;this.languageId=n;this.scopeType={type:"collectionItem"};this.isHierarchical=!0}get iterationScopeType(){return dD}*generateScopeCandidates(r,n,i,o){let s=Hs(o),l=mD(r.document),u=xv(this.scopeHandlerFactory,this.languageId,r,"collectionBoundary"),p=new $s(u),m=xv(this.scopeHandlerFactory,this.languageId,r,"string"),d=new ri(m),g=[],x=new Set,b=[];for(let v of l){if(d.contains(v))continue;let I;for(;b.length>0;){let Z=b[b.length-1];if(Z.iterationRange.contains(v)){I=Z;break}this.addScopes(g,Z),b.pop()}let F=p.getSmallestContaining(v)?.range,V=F??r.document.lineAt(v.start.line).range;if(I!=null&&I.iterationRange.isRangeEqual(V)){I.delimiters.push(v);continue}F!=null&&x.add(F),b.push({editor:r,isEveryScope:s,iterationRange:V,delimiters:[v]})}for(let v of b)this.addScopes(g,v);for(let v of u)if(!x.has(v.range)&&!v.range.isEmpty){let I=fa(r,v.range);I.isEmpty||g.push(yv(s,r,v.range,I))}g.sort((v,I)=>Gr(i,n,v,I)),yield*g}addScopes(r,n){let{editor:i,iterationRange:o,isEveryScope:s,delimiters:l}=n;if(l.length===0)return;let u=[];for(let d=0;d<l.length;++d){let g=l[d],x=l[d-1]?.end??o.start;u.push(new q(x,g.start))}let p=l[l.length-1];u.push(new q(p.end,o.end));let m=u.map(d=>fa(i,d));for(let d=0;d<m.length;++d)d===m.length-1&&i.document.getText(m[d]).trim()===""||r.push(yv(s,i,o,m[d],m[d-1],m[d+1]))}};var Dd=class extends Ue{constructor(r,n,i){super();this.scopeType={type:"collectionItem"};this.isHierarchical=!0;this.scopeHandler=(()=>{let o=new Md(r,i),s=n.get(i)?.getScopeHandler(this.scopeType);return s==null?o:ti.createFromScopeHandlers(r,i,[s,o])})()}get iterationScopeType(){return this.scopeHandler.iterationScopeType}generateScopeCandidates(r,n,i,o){return this.scopeHandler.generateScopes(r,n,i,o)}};var Fd=class extends Ue{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.conditionalScopeType=n;this.languageId=i;this.scopeType=void 0;this.isHierarchical=!0}get iterationScopeType(){throw new dt("Iteration scope for ConditionalScopeHandler")}generateScopeCandidates(r,n,i,o){let s=this.scopeHandlerFactory.create(this.conditionalScopeType.scopeType,this.languageId);return ad(s.generateScopes(r,n,i,o),this.conditionalScopeType.predicate)}};var js=class t extends Ue{constructor(r){super();this.scopeHandlers=r;this.scopeType=void 0;this.isHierarchical=!0}static create(r,n,i){let o=n.scopeTypes.map(s=>r.create(s,i));return this.createFromScopeHandlers(o)}static createFromScopeHandlers(r){return new t(r)}get iterationScopeType(){throw new dt("Iteration scope for FallbackScopeHandler")}*generateScopeCandidates(r,n,i,o){for(let s of this.scopeHandlers)yield*s.generateScopes(r,n,i,o)}};var Id=class extends Ue{constructor(){super();this.scopeType={type:"notebookCell"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i,o){let s=w8(r,n,i,o);for(let l of s)yield E8(l)}};function w8(t,e,r,n){let i=_8(t);if(i==null)return[];let{notebook:o,cell:s}=i;return n.containment==="required"?[s]:n.containment==="disallowed"||n.containment==="disallowedIfStrict"?r==="forward"?o.cells.slice(s.index+1):o.cells.slice(0,s.index).reverse():n.distalPosition!=null&&new q(e,n.distalPosition).isRangeEqual(t.document.range)?o.cells:r==="forward"?o.cells.slice(s.index):o.cells.slice(0,s.index+1).reverse()}function _8(t){let e=t.document.uri.toString();for(let r of k().visibleNotebookEditors)for(let n of r.cells)if(n.document.uri.toString()===e)return{notebook:r,cell:n}}function E8(t){let e=R8(t),r=e.document.range;return{editor:e,domain:r,getTargets:n=>[new Nm({editor:e,isReversed:n,contentRange:r})]}}function R8(t){let e=t.document.uri.toString();for(let r of k().visibleTextEditors)if(r.document.uri.toString()===e)return r;throw new Error("Editor not found notebook cell")}var Cd=class extends Ue{constructor(r,n,i,o){super();this.scopeType={type:"notebookCell"};this.isHierarchical=!1;this.scopeHandler=(()=>{let s=new Id,l=n.get(o)?.getScopeHandler(this.scopeType);return l==null?s:ti.createFromScopeHandlers(r,o,[l,s])})()}get iterationScopeType(){return this.scopeHandler.iterationScopeType}generateScopeCandidates(r,n,i,o){return this.scopeHandler.generateScopes(r,n,i,o)}};var Od=class extends Ue{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.scopeType=n;this.languageId=i;this.isHierarchical=!0;this.surroundingPairScopeHandler=this.scopeHandlerFactory.create({type:"surroundingPair",delimiter:this.scopeType.delimiter,requireStrongContainment:!0},this.languageId)}get iterationScopeType(){return this.surroundingPairScopeHandler.iterationScopeType}*generateScopeCandidates(r,n,i,o){let s=this.surroundingPairScopeHandler.generateScopes(r,n,i,o);for(let l of s)yield{editor:r,domain:l.domain,getTargets(u){return l.getTargets(u).flatMap(p=>p.getInterior())}}}};function hD(t,{openingDelimiterRange:e,closingDelimiterRange:r},n){let i=e.union(r),o=new q(e.end,r.start);return{editor:t,domain:n?o:i,getTargets:s=>[new Um({editor:t,isReversed:s,contentRange:i,interiorRange:o,boundary:[e,r]})]}}function gD(t){let e=ea(t.map(({text:r})=>r)).map($r).join("|");return new RegExp(`(?<!\\\\)(${e})`,"gu")}function xD(t,e,r){if(r.length===0)return[];let n=t?.getCapturesMap(e)??{},i=new ri(Tv(n.disqualifyDelimiter)),o=new ri(Tv(n.pairDelimiter)),s=new $s(Tv(n.textFragment)),l=Object.fromEntries(r.map(m=>[m.text,m])),u=BT(e.getText(),gD(r)),p=[];for(let m of u){let d=m[0],g=new q(e.positionAt(m.index),e.positionAt(m.index+d.length));yD(i.getContaining(g))==null&&p.push({delimiterInfo:l[d],textFragmentRange:s.getSmallestContaining(g)?.range,range:yD(o.getContaining(g))?.range??g})}return p}function yD(t){return t!=null&&!t.hasError()?t:void 0}function Tv(t){return t==null?[]:(t.sort((e,r)=>e.range.start.compareTo(r.range.start)),t)}var Nd=Object.freeze({angleBrackets:[["</","<"],[">","/>"]],curlyBrackets:[["{","${"],"}"],tripleBacktickQuotes:[[],[]],tripleDoubleQuotes:[[],[]],tripleSingleQuotes:[[],[]],doubleQuotes:['"','"',{isSingleLine:!0}],escapedDoubleQuotes:['\\"','\\"',{isSingleLine:!0}],escapedParentheses:["\\(","\\)"],escapedSquareBrackets:["\\[","\\]"],escapedSingleQuotes:["\\'","\\'",{isSingleLine:!0}],parentheses:[["(","$("],")"],backtickQuotes:["`","`"],singleQuotes:["'","'",{isSingleLine:!0}],squareBrackets:["[","]"]}),TD={nix:{singleQuotes:["''","''"]},lua:{doubleQuotes:[['"',"[["],['"',"]]"]]},python:{tripleSingleQuotes:["'''","'''"],tripleDoubleQuotes:['"""','"""']},markdown:{tripleBacktickQuotes:["```","```"]},ruby:{tripleDoubleQuotes:["%Q(",")"]}},mRe=Object.fromEntries(Object.values(Nd)),SD={any:Di(Nd),string:["tripleDoubleQuotes","tripleSingleQuotes","tripleBacktickQuotes","doubleQuotes","singleQuotes","backtickQuotes"],collectionBoundary:["parentheses","squareBrackets","curlyBrackets","angleBrackets"]};function vD(t){return t!=null&&t in TD?{...Nd,...TD[t]}:Nd}function bD(t,e){let r=SD[t]??[t];return k8(e,r)}function k8(t,e){let r=vD(t);return e.flatMap(n=>{let[i,o,s]=r[n],{isSingleLine:l=!1}=s??{},u=xl(i)?[i]:i,p=xl(o)?[o]:o;return ea(rl(u,p)).map(d=>{let g=u.includes(d),x=p.includes(d);return{text:d,side:g&&!x?"left":!g&&x?"right":"unknown",delimiterName:n,isSingleLine:l}})})}function wD(t){let e=[],r=[];for(let n of t){let{delimiterInfo:{delimiterName:i,side:o,isSingleLine:s},textFragmentRange:l,range:u}=n;if(o==="left")r.push(n);else{let p=Jo(r,d=>d.delimiterInfo.delimiterName===i&&P8(d.textFragmentRange,l)&&A8(s,d.range,u));if(p===-1){o==="unknown"&&r.push(n);continue}let m=r[p];r.length=p,e.push({delimiterName:i,openingDelimiterRange:m.range,closingDelimiterRange:u})}}return e}function P8(t,e){return t==null||e==null?t===e:t.isRangeEqual(e)}function A8(t,e,r){return!t||e.start.line===r.start.line}var Ld=class extends Ue{constructor(r,n,i){super();this.languageDefinitions=r;this.scopeType=n;this.languageId=i;this.iterationScopeType={type:"line"};this.isHierarchical=!0}*generateScopeCandidates(r,n,i,o){if(this.scopeType.forceDirection!=null){lt(k().messages,"deprecatedForceDirection","forceDirection is deprecated. If this is important to you please file an issue on the cursorless repo.");return}let s=xD(this.languageDefinitions.get(this.languageId),r.document,bD(this.scopeType.delimiter,this.languageId)),l=wD(s);l=M8(i,o,n,l),yield*l.map(u=>hD(r,u,this.scopeType.requireStrongContainment??!1)).sort((u,p)=>Gr(i,n,u,p))}};function M8(t,e,r,n){return t==="forward"&&e.containment==="required"&&e.allowAdjacentScopes&&e.skipAncestorScopes?n.filter((i,o)=>!(i.closingDelimiterRange.end.isEqual(r)&&n[o+1]?.closingDelimiterRange.start.isEqual(r))):n}var Ud=class extends Ue{constructor(r,n,i,o){super();this.scopeHandlerFactory=r;this.languageDefinitions=n;this.scopeType=i;this.languageId=o;this.isHierarchical=!0}get iterationScopeType(){throw new dt("Iteration scope for InteriorScopeHandler")}*generateScopeCandidates(r,n,i,o){let s=new q(n,o.distalPosition),l=this.getScopeHandler();if(l==null)return;let u=l.generateScopes(r,n,i,o);for(let p of u)this.shouldYield(s,p)&&(yield D8(p))}getScopeHandler(){let r=this.languageDefinitions.get(this.languageId)?.getScopeHandler(this.scopeType),n=this.scopeHandlerFactory.create({type:"surroundingPair",delimiter:"any"},this.languageId);return this.scopeType.explicitScopeType?r==null?n:js.createFromScopeHandlers([r,n]):r==null?n:ti.createFromScopeHandlers(this.scopeHandlerFactory,this.languageId,[r,n])}shouldYield(r,n){return!this.scopeType.explicitScopeType||r.contains(n.domain)}};function D8(t){return{editor:t.editor,domain:t.domain,getTargets(e){return t.getTargets(e).flatMap(F8)}}}function F8(t){let e=t.getInterior();return e??[new Is({editor:t.editor,isReversed:t.isReversed,fullInteriorRange:t.contentRange})]}var qs=class{constructor(e){this.languageDefinitions=e;this.maybeCreate=this.maybeCreate.bind(this),this.create=this.create.bind(this)}maybeCreate(e,r){switch(e.type){case"character":return new fd(this,e,r);case"word":return new md(this,e,r);case"token":return new dd(this,e,r);case"identifier":return new ud(this,e,r);case"line":return new ld(e,r);case"sentence":return new bd(this,e,r);case"paragraph":return new Td(e,r);case"boundedParagraph":return new Ad(this,e,r);case"document":return new hd(e,r);case"nonWhitespaceSequence":return new wd(this,e,r);case"boundedNonWhitespaceSequence":return new Pd(this,e,r);case"url":return new _d(this,e,r);case"customRegex":return new Ed(this,e,r);case"glyph":return new Rd(this,e,r);case"collectionItem":return new Dd(this,this.languageDefinitions,r);case"surroundingPair":return new Ld(this.languageDefinitions,e,r);case"surroundingPairInterior":return new Od(this,e,r);case"notebookCell":return new Cd(this,this.languageDefinitions,e,r);case"interior":return new Ud(this,this.languageDefinitions,e,r);case"custom":return e.scopeHandler;case"oneOf":return ti.create(this,e,r);case"fallback":return js.create(this,e,r);case"conditional":return new Fd(this,e,r);case"instance":throw Error("Unexpected scope type 'instance'");default:return this.languageDefinitions.get(r)?.getScopeHandler(e)}}create(e,r){let n=this.maybeCreate(e,r);if(n==null)throw new Error(`Couldn't create scope handler for '${e.type}'`);return n}};function Kr(t,e){return new q(t.row,t.column,e.row,e.column)}function Sv(t){return new fe(t.row,t.column)}function _D(t){return new q(t.startPosition.row,t.startPosition.column,t.endPosition.row,t.endPosition.column)}function ED(t,e){return new Re(t.startPosition.row,t.startPosition.column,e.endPosition.row,e.endPosition.column)}function wo(t,e){return{selection:new Re(new fe(e.startPosition.row,e.startPosition.column),new fe(e.endPosition.row,e.endPosition.column)),context:{}}}function I8(t,e,r){let n=e.startIndex<r.startIndex,i=n?e:r,o=n?r:e;return{selection:new Re(new fe(i.startPosition.row,i.startPosition.column),new fe(o.endPosition.row,o.endPosition.column)),context:{}}}function RD(){return N8(t=>t.type===","||t.type==="("||t.type===")"||t.type==="["||t.type==="]"||t.type===">"||t.type==="<"||t.type==="}"||t.type==="{",", ")}function kD(t,e){let r=e.startIndex,n=e.endIndex;return e.text.startsWith("(")&&e.text.endsWith(")")?(r+=1,n-=1):e.text.endsWith(";")&&(n-=1),{selection:new Re(t.document.positionAt(r),t.document.positionAt(n)),context:{}}}function PD(...t){return function(e,r){let n=r.previousSibling,i=n?.previousSibling,o;return n&&(t.includes(n.type)?i?o=Kr(i.endPosition,r.startPosition):o=Kr(n.startPosition,r.startPosition):o=Kr(n.endPosition,r.startPosition)),{...wo(e,r),context:{leadingDelimiterRange:o}}}}function zs(t=[],e=[],{includeUnnamedChildren:r=!1}={}){return function(n,i){if(t.length>0&&e.length>0)throw new Error("Cannot have both exclusions and inclusions.");let o=r?i.children:i.namedChildren,s=new Set(t),l=new Set(e);return o=o.filter(u=>s.size>0?!s.has(u.type):l.size>0?l.has(u.type):!0),I8(n,o[0],o[o.length-1])}}function AD(...t){return function(e,r){let n=r.nextSibling,i=n?.nextSibling,o;return n&&(t.includes(n.type)?i?o=Kr(r.endPosition,i.startPosition):o=Kr(r.endPosition,n.endPosition):o=Kr(r.endPosition,n.startPosition)),{...wo(e,r),context:{trailingDelimiterRange:o}}}}function C8(t,e){let r=t.nextSibling;for(;r!=null;){if(!e(r))return r;r=r.nextSibling}return r}function O8(t,e){let r=t.previousSibling;for(;r!=null;){if(!e(r))return r;r=r.previousSibling}return r}function N8(t,e,r=wr,n=wr){return(i,o)=>{let s,l,u=r(o),p=n(o),m=O8(u,t),d=C8(p,t);m!=null&&(s=Kr(m.endPosition,u.startPosition)),d!=null&&(l=Kr(p.endPosition,d.startPosition));let g=L8(i,s,l,e);return{selection:new Re(new fe(u.startPosition.row,u.startPosition.column),new fe(p.endPosition.row,p.endPosition.column)),context:{containingListDelimiter:g,leadingDelimiterRange:s,trailingDelimiterRange:l}}}}function L8(t,e,r,n){let{document:i}=t,o=[r!=null?i.getText(r):n,e!=null?i.getText(e):n];return OT(o,"length")}function MD(t,e){if(t.length===1)return!0;let r=!1,n=t.filter(({name:u})=>u.endsWith(".start")).map(({range:{end:u}})=>u).sort((u,p)=>u.compareTo(p)).at(-1),i=t.filter(({name:u})=>u.endsWith(".end")).map(({range:{start:u}})=>u).sort((u,p)=>u.compareTo(p)).at(0);n!=null&&i!=null&&n.isAfter(i)&&(lt(e,"TreeSitterQuery.checkCaptures.badOrder",`Start capture must be before end capture: ${t}`),r=!0);let o=t.filter(({name:u})=>u.endsWith(".start")).length,s=t.filter(({name:u})=>u.endsWith(".end")).length,l=t.length-o-s;return l>0&&(o>0||s>0)&&(lt(e,"TreeSitterQuery.checkCaptures.mixRegularStartEnd",`Please do not mix regular captures and start/end captures: ${t.map(({name:u,range:p})=>u+" "+p.toString())}`),r=!0),l>1&&(lt(e,"TreeSitterQuery.checkCaptures.duplicate",`A capture with the same name may only appear once in a single pattern: ${t.map(({name:u,range:p})=>u+" "+p.toString())}`),r=!0),!r}function DD(t){if(t.hasError)return!0;let e=t.parent;for(;e!=null;){if(e.isError)return!0;if(e.hasError)return!1;if(e.previousSibling?.isError||e.nextSibling?.isError)return!0;e=e.parent}return!1}function vv(t){return t.replace(/(\.(start|end))?(\.(startOf|endOf))?$/,"")}var He;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{let o={};for(let s of i)o[s]=s;return o},t.getValidEnumValues=i=>{let o=t.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),s={};for(let l of o)s[l]=i[l];return t.objectValues(s)},t.objectValues=i=>t.objectKeys(i).map(function(o){return i[o]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let o=[];for(let s in i)Object.prototype.hasOwnProperty.call(i,s)&&o.push(s);return o},t.find=(i,o)=>{for(let s of i)if(o(s))return s},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,o=" | "){return i.map(s=>typeof s=="string"?`'${s}'`:s).join(o)}t.joinValues=n,t.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(He||(He={}));var wv;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(wv||(wv={}));var te=He.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),_o=t=>{switch(typeof t){case"undefined":return te.undefined;case"string":return te.string;case"number":return isNaN(t)?te.nan:te.number;case"boolean":return te.boolean;case"function":return te.function;case"bigint":return te.bigint;case"symbol":return te.symbol;case"object":return Array.isArray(t)?te.array:t===null?te.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?te.promise:typeof Map<"u"&&t instanceof Map?te.map:typeof Set<"u"&&t instanceof Set?te.set:typeof Date<"u"&&t instanceof Date?te.date:te.object;default:return te.unknown}},Q=He.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),U8=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),Qr=class t extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let r=e||function(o){return o.message},n={_errors:[]},i=o=>{for(let s of o.issues)if(s.code==="invalid_union")s.unionErrors.map(i);else if(s.code==="invalid_return_type")i(s.returnTypeError);else if(s.code==="invalid_arguments")i(s.argumentsError);else if(s.path.length===0)n._errors.push(r(s));else{let l=n,u=0;for(;u<s.path.length;){let p=s.path[u];u===s.path.length-1?(l[p]=l[p]||{_errors:[]},l[p]._errors.push(r(s))):l[p]=l[p]||{_errors:[]},l=l[p],u++}}};return i(this),n}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,He.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};Qr.create=t=>new Qr(t);var Qs=(t,e)=>{let r;switch(t.code){case Q.invalid_type:t.received===te.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case Q.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,He.jsonStringifyReplacer)}`;break;case Q.unrecognized_keys:r=`Unrecognized key(s) in object: ${He.joinValues(t.keys,", ")}`;break;case Q.invalid_union:r="Invalid input";break;case Q.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${He.joinValues(t.options)}`;break;case Q.invalid_enum_value:r=`Invalid enum value. Expected ${He.joinValues(t.options)}, received '${t.received}'`;break;case Q.invalid_arguments:r="Invalid function arguments";break;case Q.invalid_return_type:r="Invalid function return type";break;case Q.invalid_date:r="Invalid date";break;case Q.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:He.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case Q.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case Q.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case Q.custom:r="Invalid input";break;case Q.invalid_intersection_types:r="Intersection results could not be merged";break;case Q.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case Q.not_finite:r="Number must be finite";break;default:r=e.defaultError,He.assertNever(t)}return{message:r}},CD=Qs;function H8(t){CD=t}function Hd(){return CD}var Vd=t=>{let{data:e,path:r,errorMaps:n,issueData:i}=t,o=[...r,...i.path||[]],s={...i,path:o};if(i.message!==void 0)return{...i,path:o,message:i.message};let l="",u=n.filter(p=>!!p).slice().reverse();for(let p of u)l=p(s,{data:e,defaultError:l}).message;return{...i,path:o,message:l}},V8=[];function ee(t,e){let r=Hd(),n=Vd({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===Qs?void 0:Qs].filter(i=>!!i)});t.common.issues.push(n)}var Jt=class t{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let i of r){if(i.status==="aborted")return Te;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let i of r){let o=await i.key,s=await i.value;n.push({key:o,value:s})}return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let i of r){let{key:o,value:s}=i;if(o.status==="aborted"||s.status==="aborted")return Te;o.status==="dirty"&&e.dirty(),s.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof s.value<"u"||i.alwaysSet)&&(n[o.value]=s.value)}return{status:e.value,value:n}}},Te=Object.freeze({status:"aborted"}),Ks=t=>({status:"dirty",value:t}),fr=t=>({status:"valid",value:t}),_v=t=>t.status==="aborted",Ev=t=>t.status==="dirty",Vl=t=>t.status==="valid",Bl=t=>typeof Promise<"u"&&t instanceof Promise;function Bd(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function OD(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}var ue;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(ue||(ue={}));var Ul,Hl,Sn=class{constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},FD=(t,e)=>{if(Vl(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new Qr(t.common.issues);return this._error=r,this._error}}};function we(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(s,l)=>{var u,p;let{message:m}=t;return s.code==="invalid_enum_value"?{message:m??l.defaultError}:typeof l.data>"u"?{message:(u=m??n)!==null&&u!==void 0?u:l.defaultError}:s.code!=="invalid_type"?{message:l.defaultError}:{message:(p=m??r)!==null&&p!==void 0?p:l.defaultError}},description:i}}var _e=class{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return _o(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:_o(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Jt,ctx:{common:e.parent.common,data:e.data,parsedType:_o(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(Bl(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;let i={common:{issues:[],async:(n=r?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:_o(e)},o=this._parseSync({data:e,path:i.path,parent:i});return FD(i,o)}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:_o(e)},i=this._parse({data:e,path:n.path,parent:n}),o=await(Bl(i)?i:Promise.resolve(i));return FD(n,o)}refine(e,r){let n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,o)=>{let s=e(i),l=()=>o.addIssue({code:Q.custom,...n(i)});return typeof Promise<"u"&&s instanceof Promise?s.then(u=>u?!0:(l(),!1)):s?!0:(l(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new Zr({schema:this,typeName:ye.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Tn.create(this,this._def)}nullable(){return ii.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Vi.create(this,this._def)}promise(){return ko.create(this,this._def)}or(e){return va.create([this,e],this._def)}and(e){return ba.create(this,e,this._def)}transform(e){return new Zr({...we(this._def),schema:this,typeName:ye.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new ka({...we(this._def),innerType:this,defaultValue:r,typeName:ye.ZodDefault})}brand(){return new Wl({typeName:ye.ZodBranded,type:this,...we(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new Pa({...we(this._def),innerType:this,catchValue:r,typeName:ye.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return $l.create(this,e)}readonly(){return Aa.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},B8=/^c[^\s-]{8,}$/i,W8=/^[0-9a-z]+$/,$8=/^[0-9A-HJKMNP-TV-Z]{26}$/,j8=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,q8=/^[a-z0-9_-]{21}$/i,z8=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,G8=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,K8="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",bv,Q8=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Z8=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Y8=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,ND="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",X8=new RegExp(`^${ND}$`);function LD(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function J8(t){return new RegExp(`^${LD(t)}$`)}function UD(t){let e=`${ND}T${LD(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function eQ(t,e){return!!((e==="v4"||!e)&&Q8.test(t)||(e==="v6"||!e)&&Z8.test(t))}var Eo=class t extends _e{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==te.string){let o=this._getOrReturnCtx(e);return ee(o,{code:Q.invalid_type,expected:te.string,received:o.parsedType}),Te}let n=new Jt,i;for(let o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(i=this._getOrReturnCtx(e,i),ee(i,{code:Q.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="max")e.data.length>o.value&&(i=this._getOrReturnCtx(e,i),ee(i,{code:Q.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="length"){let s=e.data.length>o.value,l=e.data.length<o.value;(s||l)&&(i=this._getOrReturnCtx(e,i),s?ee(i,{code:Q.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):l&&ee(i,{code:Q.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),n.dirty())}else if(o.kind==="email")G8.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"email",code:Q.invalid_string,message:o.message}),n.dirty());else if(o.kind==="emoji")bv||(bv=new RegExp(K8,"u")),bv.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"emoji",code:Q.invalid_string,message:o.message}),n.dirty());else if(o.kind==="uuid")j8.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"uuid",code:Q.invalid_string,message:o.message}),n.dirty());else if(o.kind==="nanoid")q8.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"nanoid",code:Q.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid")B8.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"cuid",code:Q.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid2")W8.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"cuid2",code:Q.invalid_string,message:o.message}),n.dirty());else if(o.kind==="ulid")$8.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"ulid",code:Q.invalid_string,message:o.message}),n.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),ee(i,{validation:"url",code:Q.invalid_string,message:o.message}),n.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"regex",code:Q.invalid_string,message:o.message}),n.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(e,i),ee(i,{code:Q.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),n.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(i=this._getOrReturnCtx(e,i),ee(i,{code:Q.invalid_string,validation:{startsWith:o.value},message:o.message}),n.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(i=this._getOrReturnCtx(e,i),ee(i,{code:Q.invalid_string,validation:{endsWith:o.value},message:o.message}),n.dirty()):o.kind==="datetime"?UD(o).test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{code:Q.invalid_string,validation:"datetime",message:o.message}),n.dirty()):o.kind==="date"?X8.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{code:Q.invalid_string,validation:"date",message:o.message}),n.dirty()):o.kind==="time"?J8(o).test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{code:Q.invalid_string,validation:"time",message:o.message}),n.dirty()):o.kind==="duration"?z8.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"duration",code:Q.invalid_string,message:o.message}),n.dirty()):o.kind==="ip"?eQ(e.data,o.version)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"ip",code:Q.invalid_string,message:o.message}),n.dirty()):o.kind==="base64"?Y8.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"base64",code:Q.invalid_string,message:o.message}),n.dirty()):He.assertNever(o);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(i=>e.test(i),{validation:r,code:Q.invalid_string,...ue.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ue.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ue.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ue.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ue.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ue.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ue.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ue.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ue.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ue.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ue.errToObj(e)})}datetime(e){var r,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,local:(n=e?.local)!==null&&n!==void 0?n:!1,...ue.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...ue.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...ue.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...ue.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...ue.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...ue.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...ue.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...ue.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...ue.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...ue.errToObj(r)})}nonempty(e){return this.min(1,ue.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};Eo.create=t=>{var e;return new Eo({checks:[],typeName:ye.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...we(t)})};function tQ(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,o=parseInt(t.toFixed(i).replace(".","")),s=parseInt(e.toFixed(i).replace(".",""));return o%s/Math.pow(10,i)}var ha=class t extends _e{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==te.number){let o=this._getOrReturnCtx(e);return ee(o,{code:Q.invalid_type,expected:te.number,received:o.parsedType}),Te}let n,i=new Jt;for(let o of this._def.checks)o.kind==="int"?He.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),ee(n,{code:Q.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),ee(n,{code:Q.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),ee(n,{code:Q.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?tQ(e.data,o.value)!==0&&(n=this._getOrReturnCtx(e,n),ee(n,{code:Q.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),ee(n,{code:Q.not_finite,message:o.message}),i.dirty()):He.assertNever(o);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,ue.toString(r))}gt(e,r){return this.setLimit("min",e,!1,ue.toString(r))}lte(e,r){return this.setLimit("max",e,!0,ue.toString(r))}lt(e,r){return this.setLimit("max",e,!1,ue.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:ue.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ue.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ue.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ue.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ue.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ue.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:ue.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:ue.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ue.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ue.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&He.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};ha.create=t=>new ha({checks:[],typeName:ye.ZodNumber,coerce:t?.coerce||!1,...we(t)});var ga=class t extends _e{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==te.bigint){let o=this._getOrReturnCtx(e);return ee(o,{code:Q.invalid_type,expected:te.bigint,received:o.parsedType}),Te}let n,i=new Jt;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),ee(n,{code:Q.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),ee(n,{code:Q.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),ee(n,{code:Q.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):He.assertNever(o);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,ue.toString(r))}gt(e,r){return this.setLimit("min",e,!1,ue.toString(r))}lte(e,r){return this.setLimit("max",e,!0,ue.toString(r))}lt(e,r){return this.setLimit("max",e,!1,ue.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:ue.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ue.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ue.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ue.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ue.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:ue.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};ga.create=t=>{var e;return new ga({checks:[],typeName:ye.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...we(t)})};var ya=class extends _e{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==te.boolean){let n=this._getOrReturnCtx(e);return ee(n,{code:Q.invalid_type,expected:te.boolean,received:n.parsedType}),Te}return fr(e.data)}};ya.create=t=>new ya({typeName:ye.ZodBoolean,coerce:t?.coerce||!1,...we(t)});var xa=class t extends _e{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==te.date){let o=this._getOrReturnCtx(e);return ee(o,{code:Q.invalid_type,expected:te.date,received:o.parsedType}),Te}if(isNaN(e.data.getTime())){let o=this._getOrReturnCtx(e);return ee(o,{code:Q.invalid_date}),Te}let n=new Jt,i;for(let o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(i=this._getOrReturnCtx(e,i),ee(i,{code:Q.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),n.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(i=this._getOrReturnCtx(e,i),ee(i,{code:Q.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),n.dirty()):He.assertNever(o);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:ue.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:ue.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};xa.create=t=>new xa({checks:[],coerce:t?.coerce||!1,typeName:ye.ZodDate,...we(t)});var Zs=class extends _e{_parse(e){if(this._getType(e)!==te.symbol){let n=this._getOrReturnCtx(e);return ee(n,{code:Q.invalid_type,expected:te.symbol,received:n.parsedType}),Te}return fr(e.data)}};Zs.create=t=>new Zs({typeName:ye.ZodSymbol,...we(t)});var Ta=class extends _e{_parse(e){if(this._getType(e)!==te.undefined){let n=this._getOrReturnCtx(e);return ee(n,{code:Q.invalid_type,expected:te.undefined,received:n.parsedType}),Te}return fr(e.data)}};Ta.create=t=>new Ta({typeName:ye.ZodUndefined,...we(t)});var Sa=class extends _e{_parse(e){if(this._getType(e)!==te.null){let n=this._getOrReturnCtx(e);return ee(n,{code:Q.invalid_type,expected:te.null,received:n.parsedType}),Te}return fr(e.data)}};Sa.create=t=>new Sa({typeName:ye.ZodNull,...we(t)});var Ro=class extends _e{constructor(){super(...arguments),this._any=!0}_parse(e){return fr(e.data)}};Ro.create=t=>new Ro({typeName:ye.ZodAny,...we(t)});var Hi=class extends _e{constructor(){super(...arguments),this._unknown=!0}_parse(e){return fr(e.data)}};Hi.create=t=>new Hi({typeName:ye.ZodUnknown,...we(t)});var Ln=class extends _e{_parse(e){let r=this._getOrReturnCtx(e);return ee(r,{code:Q.invalid_type,expected:te.never,received:r.parsedType}),Te}};Ln.create=t=>new Ln({typeName:ye.ZodNever,...we(t)});var Ys=class extends _e{_parse(e){if(this._getType(e)!==te.undefined){let n=this._getOrReturnCtx(e);return ee(n,{code:Q.invalid_type,expected:te.void,received:n.parsedType}),Te}return fr(e.data)}};Ys.create=t=>new Ys({typeName:ye.ZodVoid,...we(t)});var Vi=class t extends _e{_parse(e){let{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==te.array)return ee(r,{code:Q.invalid_type,expected:te.array,received:r.parsedType}),Te;if(i.exactLength!==null){let s=r.data.length>i.exactLength.value,l=r.data.length<i.exactLength.value;(s||l)&&(ee(r,{code:s?Q.too_big:Q.too_small,minimum:l?i.exactLength.value:void 0,maximum:s?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(ee(r,{code:Q.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(ee(r,{code:Q.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((s,l)=>i.type._parseAsync(new Sn(r,s,r.path,l)))).then(s=>Jt.mergeArray(n,s));let o=[...r.data].map((s,l)=>i.type._parseSync(new Sn(r,s,r.path,l)));return Jt.mergeArray(n,o)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:ue.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:ue.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:ue.toString(r)}})}nonempty(e){return this.min(1,e)}};Vi.create=(t,e)=>new Vi({type:t,minLength:null,maxLength:null,exactLength:null,typeName:ye.ZodArray,...we(e)});function Gs(t){if(t instanceof Fr){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=Tn.create(Gs(n))}return new Fr({...t._def,shape:()=>e})}else return t instanceof Vi?new Vi({...t._def,type:Gs(t.element)}):t instanceof Tn?Tn.create(Gs(t.unwrap())):t instanceof ii?ii.create(Gs(t.unwrap())):t instanceof ni?ni.create(t.items.map(e=>Gs(e))):t}var Fr=class t extends _e{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=He.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==te.object){let p=this._getOrReturnCtx(e);return ee(p,{code:Q.invalid_type,expected:te.object,received:p.parsedType}),Te}let{status:n,ctx:i}=this._processInputParams(e),{shape:o,keys:s}=this._getCached(),l=[];if(!(this._def.catchall instanceof Ln&&this._def.unknownKeys==="strip"))for(let p in i.data)s.includes(p)||l.push(p);let u=[];for(let p of s){let m=o[p],d=i.data[p];u.push({key:{status:"valid",value:p},value:m._parse(new Sn(i,d,i.path,p)),alwaysSet:p in i.data})}if(this._def.catchall instanceof Ln){let p=this._def.unknownKeys;if(p==="passthrough")for(let m of l)u.push({key:{status:"valid",value:m},value:{status:"valid",value:i.data[m]}});else if(p==="strict")l.length>0&&(ee(i,{code:Q.unrecognized_keys,keys:l}),n.dirty());else if(p!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let p=this._def.catchall;for(let m of l){let d=i.data[m];u.push({key:{status:"valid",value:m},value:p._parse(new Sn(i,d,i.path,m)),alwaysSet:m in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let p=[];for(let m of u){let d=await m.key,g=await m.value;p.push({key:d,value:g,alwaysSet:m.alwaysSet})}return p}).then(p=>Jt.mergeObjectSync(n,p)):Jt.mergeObjectSync(n,u)}get shape(){return this._def.shape()}strict(e){return ue.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var i,o,s,l;let u=(s=(o=(i=this._def).errorMap)===null||o===void 0?void 0:o.call(i,r,n).message)!==null&&s!==void 0?s:n.defaultError;return r.code==="unrecognized_keys"?{message:(l=ue.errToObj(e).message)!==null&&l!==void 0?l:u}:{message:u}}}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ye.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};return He.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new t({...this._def,shape:()=>r})}omit(e){let r={};return He.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new t({...this._def,shape:()=>r})}deepPartial(){return Gs(this)}partial(e){let r={};return He.objectKeys(this.shape).forEach(n=>{let i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}),new t({...this._def,shape:()=>r})}required(e){let r={};return He.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let o=this.shape[n];for(;o instanceof Tn;)o=o._def.innerType;r[n]=o}}),new t({...this._def,shape:()=>r})}keyof(){return HD(He.objectKeys(this.shape))}};Fr.create=(t,e)=>new Fr({shape:()=>t,unknownKeys:"strip",catchall:Ln.create(),typeName:ye.ZodObject,...we(e)});Fr.strictCreate=(t,e)=>new Fr({shape:()=>t,unknownKeys:"strict",catchall:Ln.create(),typeName:ye.ZodObject,...we(e)});Fr.lazycreate=(t,e)=>new Fr({shape:t,unknownKeys:"strip",catchall:Ln.create(),typeName:ye.ZodObject,...we(e)});var va=class extends _e{_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function i(o){for(let l of o)if(l.result.status==="valid")return l.result;for(let l of o)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;let s=o.map(l=>new Qr(l.ctx.common.issues));return ee(r,{code:Q.invalid_union,unionErrors:s}),Te}if(r.common.async)return Promise.all(n.map(async o=>{let s={...r,common:{...r.common,issues:[]},parent:null};return{result:await o._parseAsync({data:r.data,path:r.path,parent:s}),ctx:s}})).then(i);{let o,s=[];for(let u of n){let p={...r,common:{...r.common,issues:[]},parent:null},m=u._parseSync({data:r.data,path:r.path,parent:p});if(m.status==="valid")return m;m.status==="dirty"&&!o&&(o={result:m,ctx:p}),p.common.issues.length&&s.push(p.common.issues)}if(o)return r.common.issues.push(...o.ctx.common.issues),o.result;let l=s.map(u=>new Qr(u));return ee(r,{code:Q.invalid_union,unionErrors:l}),Te}}get options(){return this._def.options}};va.create=(t,e)=>new va({options:t,typeName:ye.ZodUnion,...we(e)});var Ui=t=>t instanceof wa?Ui(t.schema):t instanceof Zr?Ui(t.innerType()):t instanceof _a?[t.value]:t instanceof Ea?t.options:t instanceof Ra?He.objectValues(t.enum):t instanceof ka?Ui(t._def.innerType):t instanceof Ta?[void 0]:t instanceof Sa?[null]:t instanceof Tn?[void 0,...Ui(t.unwrap())]:t instanceof ii?[null,...Ui(t.unwrap())]:t instanceof Wl||t instanceof Aa?Ui(t.unwrap()):t instanceof Pa?Ui(t._def.innerType):[],Wd=class t extends _e{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==te.object)return ee(r,{code:Q.invalid_type,expected:te.object,received:r.parsedType}),Te;let n=this.discriminator,i=r.data[n],o=this.optionsMap.get(i);return o?r.common.async?o._parseAsync({data:r.data,path:r.path,parent:r}):o._parseSync({data:r.data,path:r.path,parent:r}):(ee(r,{code:Q.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Te)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let i=new Map;for(let o of r){let s=Ui(o.shape[e]);if(!s.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let l of s){if(i.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);i.set(l,o)}}return new t({typeName:ye.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...we(n)})}};function Rv(t,e){let r=_o(t),n=_o(e);if(t===e)return{valid:!0,data:t};if(r===te.object&&n===te.object){let i=He.objectKeys(e),o=He.objectKeys(t).filter(l=>i.indexOf(l)!==-1),s={...t,...e};for(let l of o){let u=Rv(t[l],e[l]);if(!u.valid)return{valid:!1};s[l]=u.data}return{valid:!0,data:s}}else if(r===te.array&&n===te.array){if(t.length!==e.length)return{valid:!1};let i=[];for(let o=0;o<t.length;o++){let s=t[o],l=e[o],u=Rv(s,l);if(!u.valid)return{valid:!1};i.push(u.data)}return{valid:!0,data:i}}else return r===te.date&&n===te.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var ba=class extends _e{_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=(o,s)=>{if(_v(o)||_v(s))return Te;let l=Rv(o.value,s.value);return l.valid?((Ev(o)||Ev(s))&&r.dirty(),{status:r.value,value:l.data}):(ee(n,{code:Q.invalid_intersection_types}),Te)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([o,s])=>i(o,s)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};ba.create=(t,e,r)=>new ba({left:t,right:e,typeName:ye.ZodIntersection,...we(r)});var ni=class t extends _e{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==te.array)return ee(n,{code:Q.invalid_type,expected:te.array,received:n.parsedType}),Te;if(n.data.length<this._def.items.length)return ee(n,{code:Q.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Te;!this._def.rest&&n.data.length>this._def.items.length&&(ee(n,{code:Q.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let o=[...n.data].map((s,l)=>{let u=this._def.items[l]||this._def.rest;return u?u._parse(new Sn(n,s,n.path,l)):null}).filter(s=>!!s);return n.common.async?Promise.all(o).then(s=>Jt.mergeArray(r,s)):Jt.mergeArray(r,o)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};ni.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ni({items:t,typeName:ye.ZodTuple,rest:null,...we(e)})};var $d=class t extends _e{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==te.object)return ee(n,{code:Q.invalid_type,expected:te.object,received:n.parsedType}),Te;let i=[],o=this._def.keyType,s=this._def.valueType;for(let l in n.data)i.push({key:o._parse(new Sn(n,l,n.path,l)),value:s._parse(new Sn(n,n.data[l],n.path,l)),alwaysSet:l in n.data});return n.common.async?Jt.mergeObjectAsync(r,i):Jt.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof _e?new t({keyType:e,valueType:r,typeName:ye.ZodRecord,...we(n)}):new t({keyType:Eo.create(),valueType:e,typeName:ye.ZodRecord,...we(r)})}},Xs=class extends _e{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==te.map)return ee(n,{code:Q.invalid_type,expected:te.map,received:n.parsedType}),Te;let i=this._def.keyType,o=this._def.valueType,s=[...n.data.entries()].map(([l,u],p)=>({key:i._parse(new Sn(n,l,n.path,[p,"key"])),value:o._parse(new Sn(n,u,n.path,[p,"value"]))}));if(n.common.async){let l=new Map;return Promise.resolve().then(async()=>{for(let u of s){let p=await u.key,m=await u.value;if(p.status==="aborted"||m.status==="aborted")return Te;(p.status==="dirty"||m.status==="dirty")&&r.dirty(),l.set(p.value,m.value)}return{status:r.value,value:l}})}else{let l=new Map;for(let u of s){let p=u.key,m=u.value;if(p.status==="aborted"||m.status==="aborted")return Te;(p.status==="dirty"||m.status==="dirty")&&r.dirty(),l.set(p.value,m.value)}return{status:r.value,value:l}}}};Xs.create=(t,e,r)=>new Xs({valueType:e,keyType:t,typeName:ye.ZodMap,...we(r)});var Js=class t extends _e{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==te.set)return ee(n,{code:Q.invalid_type,expected:te.set,received:n.parsedType}),Te;let i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(ee(n,{code:Q.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(ee(n,{code:Q.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());let o=this._def.valueType;function s(u){let p=new Set;for(let m of u){if(m.status==="aborted")return Te;m.status==="dirty"&&r.dirty(),p.add(m.value)}return{status:r.value,value:p}}let l=[...n.data.values()].map((u,p)=>o._parse(new Sn(n,u,n.path,p)));return n.common.async?Promise.all(l).then(u=>s(u)):s(l)}min(e,r){return new t({...this._def,minSize:{value:e,message:ue.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:ue.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};Js.create=(t,e)=>new Js({valueType:t,minSize:null,maxSize:null,typeName:ye.ZodSet,...we(e)});var jd=class t extends _e{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==te.function)return ee(r,{code:Q.invalid_type,expected:te.function,received:r.parsedType}),Te;function n(l,u){return Vd({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Hd(),Qs].filter(p=>!!p),issueData:{code:Q.invalid_arguments,argumentsError:u}})}function i(l,u){return Vd({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Hd(),Qs].filter(p=>!!p),issueData:{code:Q.invalid_return_type,returnTypeError:u}})}let o={errorMap:r.common.contextualErrorMap},s=r.data;if(this._def.returns instanceof ko){let l=this;return fr(async function(...u){let p=new Qr([]),m=await l._def.args.parseAsync(u,o).catch(x=>{throw p.addIssue(n(u,x)),p}),d=await Reflect.apply(s,this,m);return await l._def.returns._def.type.parseAsync(d,o).catch(x=>{throw p.addIssue(i(d,x)),p})})}else{let l=this;return fr(function(...u){let p=l._def.args.safeParse(u,o);if(!p.success)throw new Qr([n(u,p.error)]);let m=Reflect.apply(s,this,p.data),d=l._def.returns.safeParse(m,o);if(!d.success)throw new Qr([i(m,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:ni.create(e).rest(Hi.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||ni.create([]).rest(Hi.create()),returns:r||Hi.create(),typeName:ye.ZodFunction,...we(n)})}},wa=class extends _e{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};wa.create=(t,e)=>new wa({getter:t,typeName:ye.ZodLazy,...we(e)});var _a=class extends _e{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return ee(r,{received:r.data,code:Q.invalid_literal,expected:this._def.value}),Te}return{status:"valid",value:e.data}}get value(){return this._def.value}};_a.create=(t,e)=>new _a({value:t,typeName:ye.ZodLiteral,...we(e)});function HD(t,e){return new Ea({values:t,typeName:ye.ZodEnum,...we(e)})}var Ea=class t extends _e{constructor(){super(...arguments),Ul.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return ee(r,{expected:He.joinValues(n),received:r.parsedType,code:Q.invalid_type}),Te}if(Bd(this,Ul,"f")||OD(this,Ul,new Set(this._def.values),"f"),!Bd(this,Ul,"f").has(e.data)){let r=this._getOrReturnCtx(e),n=this._def.values;return ee(r,{received:r.data,code:Q.invalid_enum_value,options:n}),Te}return fr(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}};Ul=new WeakMap;Ea.create=HD;var Ra=class extends _e{constructor(){super(...arguments),Hl.set(this,void 0)}_parse(e){let r=He.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==te.string&&n.parsedType!==te.number){let i=He.objectValues(r);return ee(n,{expected:He.joinValues(i),received:n.parsedType,code:Q.invalid_type}),Te}if(Bd(this,Hl,"f")||OD(this,Hl,new Set(He.getValidEnumValues(this._def.values)),"f"),!Bd(this,Hl,"f").has(e.data)){let i=He.objectValues(r);return ee(n,{received:n.data,code:Q.invalid_enum_value,options:i}),Te}return fr(e.data)}get enum(){return this._def.values}};Hl=new WeakMap;Ra.create=(t,e)=>new Ra({values:t,typeName:ye.ZodNativeEnum,...we(e)});var ko=class extends _e{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==te.promise&&r.common.async===!1)return ee(r,{code:Q.invalid_type,expected:te.promise,received:r.parsedType}),Te;let n=r.parsedType===te.promise?r.data:Promise.resolve(r.data);return fr(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}};ko.create=(t,e)=>new ko({type:t,typeName:ye.ZodPromise,...we(e)});var Zr=class extends _e{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ye.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,o={addIssue:s=>{ee(n,s),s.fatal?r.abort():r.dirty()},get path(){return n.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){let s=i.transform(n.data,o);if(n.common.async)return Promise.resolve(s).then(async l=>{if(r.value==="aborted")return Te;let u=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return u.status==="aborted"?Te:u.status==="dirty"||r.value==="dirty"?Ks(u.value):u});{if(r.value==="aborted")return Te;let l=this._def.schema._parseSync({data:s,path:n.path,parent:n});return l.status==="aborted"?Te:l.status==="dirty"||r.value==="dirty"?Ks(l.value):l}}if(i.type==="refinement"){let s=l=>{let u=i.refinement(l,o);if(n.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){let l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?Te:(l.status==="dirty"&&r.dirty(),s(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?Te:(l.status==="dirty"&&r.dirty(),s(l.value).then(()=>({status:r.value,value:l.value}))))}if(i.type==="transform")if(n.common.async===!1){let s=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Vl(s))return s;let l=i.transform(s.value,o);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(s=>Vl(s)?Promise.resolve(i.transform(s.value,o)).then(l=>({status:r.value,value:l})):s);He.assertNever(i)}};Zr.create=(t,e,r)=>new Zr({schema:t,typeName:ye.ZodEffects,effect:e,...we(r)});Zr.createWithPreprocess=(t,e,r)=>new Zr({schema:e,effect:{type:"preprocess",transform:t},typeName:ye.ZodEffects,...we(r)});var Tn=class extends _e{_parse(e){return this._getType(e)===te.undefined?fr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Tn.create=(t,e)=>new Tn({innerType:t,typeName:ye.ZodOptional,...we(e)});var ii=class extends _e{_parse(e){return this._getType(e)===te.null?fr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};ii.create=(t,e)=>new ii({innerType:t,typeName:ye.ZodNullable,...we(e)});var ka=class extends _e{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===te.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};ka.create=(t,e)=>new ka({innerType:t,typeName:ye.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...we(e)});var Pa=class extends _e{_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Bl(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Qr(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Qr(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};Pa.create=(t,e)=>new Pa({innerType:t,typeName:ye.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...we(e)});var ec=class extends _e{_parse(e){if(this._getType(e)!==te.nan){let n=this._getOrReturnCtx(e);return ee(n,{code:Q.invalid_type,expected:te.nan,received:n.parsedType}),Te}return{status:"valid",value:e.data}}};ec.create=t=>new ec({typeName:ye.ZodNaN,...we(t)});var rQ=Symbol("zod_brand"),Wl=class extends _e{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},$l=class t extends _e{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let o=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?Te:o.status==="dirty"?(r.dirty(),Ks(o.value)):this._def.out._parseAsync({data:o.value,path:n.path,parent:n})})();{let i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?Te:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:ye.ZodPipeline})}},Aa=class extends _e{_parse(e){let r=this._def.innerType._parse(e),n=i=>(Vl(i)&&(i.value=Object.freeze(i.value)),i);return Bl(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}};Aa.create=(t,e)=>new Aa({innerType:t,typeName:ye.ZodReadonly,...we(e)});function VD(t,e={},r){return t?Ro.create().superRefine((n,i)=>{var o,s;if(!t(n)){let l=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,u=(s=(o=l.fatal)!==null&&o!==void 0?o:r)!==null&&s!==void 0?s:!0,p=typeof l=="string"?{message:l}:l;i.addIssue({code:"custom",...p,fatal:u})}}):Ro.create()}var nQ={object:Fr.lazycreate},ye;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(ye||(ye={}));var iQ=(t,e={message:`Input not instance of ${t.name}`})=>VD(r=>r instanceof t,e),BD=Eo.create,WD=ha.create,oQ=ec.create,aQ=ga.create,$D=ya.create,sQ=xa.create,cQ=Zs.create,lQ=Ta.create,uQ=Sa.create,pQ=Ro.create,fQ=Hi.create,mQ=Ln.create,dQ=Ys.create,hQ=Vi.create,gQ=Fr.create,yQ=Fr.strictCreate,xQ=va.create,TQ=Wd.create,SQ=ba.create,vQ=ni.create,bQ=$d.create,wQ=Xs.create,_Q=Js.create,EQ=jd.create,RQ=wa.create,kQ=_a.create,PQ=Ea.create,AQ=Ra.create,MQ=ko.create,ID=Zr.create,DQ=Tn.create,FQ=ii.create,IQ=Zr.createWithPreprocess,CQ=$l.create,OQ=()=>BD().optional(),NQ=()=>WD().optional(),LQ=()=>$D().optional(),UQ={string:t=>Eo.create({...t,coerce:!0}),number:t=>ha.create({...t,coerce:!0}),boolean:t=>ya.create({...t,coerce:!0}),bigint:t=>ga.create({...t,coerce:!0}),date:t=>xa.create({...t,coerce:!0})},HQ=Te,Le=Object.freeze({__proto__:null,defaultErrorMap:Qs,setErrorMap:H8,getErrorMap:Hd,makeIssue:Vd,EMPTY_PATH:V8,addIssueToContext:ee,ParseStatus:Jt,INVALID:Te,DIRTY:Ks,OK:fr,isAborted:_v,isDirty:Ev,isValid:Vl,isAsync:Bl,get util(){return He},get objectUtil(){return wv},ZodParsedType:te,getParsedType:_o,ZodType:_e,datetimeRegex:UD,ZodString:Eo,ZodNumber:ha,ZodBigInt:ga,ZodBoolean:ya,ZodDate:xa,ZodSymbol:Zs,ZodUndefined:Ta,ZodNull:Sa,ZodAny:Ro,ZodUnknown:Hi,ZodNever:Ln,ZodVoid:Ys,ZodArray:Vi,ZodObject:Fr,ZodUnion:va,ZodDiscriminatedUnion:Wd,ZodIntersection:ba,ZodTuple:ni,ZodRecord:$d,ZodMap:Xs,ZodSet:Js,ZodFunction:jd,ZodLazy:wa,ZodLiteral:_a,ZodEnum:Ea,ZodNativeEnum:Ra,ZodPromise:ko,ZodEffects:Zr,ZodTransformer:Zr,ZodOptional:Tn,ZodNullable:ii,ZodDefault:ka,ZodCatch:Pa,ZodNaN:ec,BRAND:rQ,ZodBranded:Wl,ZodPipeline:$l,ZodReadonly:Aa,custom:VD,Schema:_e,ZodSchema:_e,late:nQ,get ZodFirstPartyTypeKind(){return ye},coerce:UQ,any:pQ,array:hQ,bigint:aQ,boolean:$D,date:sQ,discriminatedUnion:TQ,effect:ID,enum:PQ,function:EQ,instanceof:iQ,intersection:SQ,lazy:RQ,literal:kQ,map:wQ,nan:oQ,nativeEnum:AQ,never:mQ,null:uQ,nullable:FQ,number:WD,object:gQ,oboolean:LQ,onumber:NQ,optional:DQ,ostring:OQ,pipeline:CQ,preprocess:IQ,promise:MQ,record:bQ,set:_Q,strictObject:yQ,string:BD,symbol:cQ,transformer:ID,tuple:vQ,undefined:lQ,union:xQ,unknown:fQ,void:dQ,NEVER:HQ,ZodIssueCode:Q,quotelessJson:U8,ZodError:Qr});function jD(t){let e=t.operands.map(kv).join(" ");return`(#${t.operator} ${e})`}function kv(t){return t.type==="capture"?`@${t.name}`:t.value}function qD(t,e){return e.errors.filter(r=>!(r.code==="invalid_type"&&r.path.length===2&&(r.path[1]==="name"||r.path[1]==="value"))).map(r=>VQ(t,r))}function VQ(t,e){if(e.path.length===0)return e.code==="too_small"?"Too few arguments":e.code==="too_big"?"Too many arguments":e.message;let r=e.message;e.code==="invalid_literal"&&e.path[1]==="type"&&(r=e.expected==="capture"?"Capture names must be prefixed with @":"Expected string, but received capture");let n=e.path[0],i=kv(t[n]);return`Error on argument ${n} (\`${i}\`): ${r}`}var It=class{allowMissingNode(){return!1}createPredicate(e){let r=this.schema.safeParse(e);return r.success?{success:!0,predicate:n=>{try{let i=this.constructAcceptArgs(r.data,n);return this.run(...i)}catch(i){if(i instanceof qd&&this.allowMissingNode())return!0;throw i}}}:{success:!1,errors:qD(e,r.error)}}constructAcceptArgs(e,r){return e.map(n=>{if(n.type==="capture"){let i=r.captures.find(o=>o.name===n.name);if(i==null)throw new qd(n.name);return i}else return n.value})}},qd=class extends Error{constructor(e){super(`Could not find capture ${e}`)}};var Pv=Le.object({type:Le.literal("string"),value:Le.string()}),de={node:Le.object({type:Le.literal("capture"),name:Le.string()}),string:Pv,integer:Pv.transform((t,e)=>{let r=parseInt(t.value);return isNaN(r)?(e.addIssue({code:Le.ZodIssueCode.custom,message:"Expected an integer"}),Le.NEVER):{type:"integer",value:r}}),boolean:Pv.transform((t,e)=>t.value==="true"?{type:"boolean",value:!0}:t.value==="false"?{type:"boolean",value:!1}:(e.addIssue({code:Le.ZodIssueCode.custom,message:"Expected true or false"}),Le.NEVER))};var Av=class extends It{constructor(){super(...arguments);this.name="not-type?";this.schema=Le.tuple([de.node,de.string]).rest(de.string)}run({node:r},...n){return!n.includes(r.type)}},Mv=class extends It{constructor(){super(...arguments);this.name="not-parent-type?";this.schema=Le.tuple([de.node,de.string]).rest(de.string)}run({node:r},...n){return r.parent==null||!n.includes(r.parent.type)}},Dv=class extends It{constructor(){super(...arguments);this.name="is-nth-child?";this.schema=Le.tuple([de.node,de.integer])}run({node:r},n){return r.parent?.children.findIndex(i=>i.id===r.id)===n}},Fv=class extends It{constructor(){super(...arguments);this.name="has-multiple-children-of-type?";this.schema=Le.tuple([de.node,de.string])}run({node:r},n){return r.children.filter(o=>o.type===n).length>1}},Iv=class extends It{constructor(){super(...arguments);this.name="child-range!";this.schema=Le.union([Le.tuple([de.node,de.integer]),Le.tuple([de.node,de.integer,de.integer]),Le.tuple([de.node,de.integer,de.integer,de.boolean]),Le.tuple([de.node,de.integer,de.integer,de.boolean,de.boolean])])}run(r,n,i,o,s){let{node:{children:l}}=r;n=n<0?l.length+n:n,i=i??-1,i=i<0?l.length+i:i;let u=l[n],p=l[i];return r.range=Kr(o?u.endPosition:u.startPosition,s?p.startPosition:p.endPosition),!0}},Cv=class extends It{constructor(){super(...arguments);this.name="character-range!";this.schema=Le.union([Le.tuple([de.node,de.integer]),Le.tuple([de.node,de.integer,de.integer])])}run(r,n,i){return r.range=new q(r.range.start.translate(void 0,n),r.range.end.translate(void 0,i??0)),!0}},Ov=class extends It{constructor(){super(...arguments);this.name="shrink-to-match!";this.schema=Le.tuple([de.node,de.string])}run(r,n){let{document:i,range:o}=r,l=i.getText(o).match(new RegExp(n,"ds"));if(l?.index==null)throw Error(`No match for pattern '${n}'`);let[u,p]=l.indices?.groups?.keep??l.indices[0],m=i.offsetAt(o.start);return r.range=new q(i.positionAt(m+u),i.positionAt(m+p)),!0}},Nv=class extends It{constructor(){super(...arguments);this.name="grow-to-named-siblings!";this.schema=Le.union([Le.tuple([de.node]),Le.tuple([de.node,de.string])])}run(r,n){let{node:i,range:o,document:s}=r;if(i.parent==null)throw Error("Node has no parent");let{children:l}=i.parent,u=l.findIndex(m=>m.id===i.id),p=null;if(u===-1)throw Error("Node not found in parent");for(let m=u+1;m<l.length;++m){let d=l[m];if(!d.isNamed)break;let g=Kr(d.startPosition,d.endPosition);if(n!=null&&n===s.getText(g))break;p=g.end}return p!=null&&(r.range=new q(o.start,p)),!0}},Lv=class extends It{constructor(){super(...arguments);this.name="trim-end!";this.schema=Le.tuple([de.node])}run(r){let{document:n,range:i}=r,o=n.getText(i),s=o.length-o.trimEnd().length;return s>0&&(r.range=new q(i.start,Bk(n,i.end,-s))),!0}},Uv=class extends It{constructor(){super(...arguments);this.name="document-range!";this.schema=Le.tuple([de.node]).rest(de.node)}run(...r){for(let n of r)n.range=n.document.range;return!0}},Hv=class extends It{constructor(){super(...arguments);this.name="allow-multiple!";this.schema=Le.tuple([de.node])}allowMissingNode(){return!0}run(r){return r.allowMultiple=!0,!0}},Vv=class extends It{constructor(){super(...arguments);this.name="log!";this.schema=Le.tuple([de.node])}run(r){return console.log(`#log!: ${r.name}@${r.range}`),!0}},Bv=class extends It{constructor(){super(...arguments);this.name="insertion-delimiter!";this.schema=Le.tuple([de.node,de.string])}run(r,n){return r.insertionDelimiter=n,!0}},Wv=class extends It{constructor(){super(...arguments);this.name="single-or-multi-line-delimiter!";this.schema=Le.tuple([de.node,de.node,de.string,de.string])}run(r,n,i,o){return r.insertionDelimiter=n.range.isSingleLine?i:o,!0}},$v=class extends It{constructor(){super(...arguments);this.name="empty-single-multi-delimiter!";this.schema=Le.tuple([de.node,de.node,de.string,de.string,de.string])}run(r,n,i,o,s){let l=!n.node.children.some(u=>u.isNamed);return r.insertionDelimiter=l?i:n.range.isSingleLine?o:s,!0}},zD=[new Vv,new Av,new Lv,new Uv,new Mv,new Dv,new Iv,new Cv,new Ov,new Nv,new Hv,new Bv,new Wv,new $v,new Fv];function GD(t){let e=[],r=[];return t.forEach((n,i)=>{let o=[];n.forEach((s,l)=>{let u=zD.find(({name:m})=>m===s.operator);if(u==null){e.push({patternIdx:i,predicateIdx:l,error:`Unknown predicate operator "${s.operator}"`});return}let p=u.createPredicate(s.operands);if(!p.success){e.push(...p.errors.map(m=>({patternIdx:i,predicateIdx:l,error:m})));return}o.push(p.predicate)}),r.push(o)}),{errors:e,predicates:r}}function KD(t,e){let{errors:r,predicates:n}=GD(e.predicates);if(r.length>0){for(let i of r){let o=[`language ${t}`,`pattern ${i.patternIdx}`,`predicate \`${jD(e.predicates[i.patternIdx][i.predicateIdx])}\``].join(", ");lt(k().messages,"TreeSitterQuery.parsePredicates",`Error parsing predicate for ${o}: ${i.error}`)}if(k().runMode==="test")throw new Error("Invalid predicates")}return n}function jv(t){return{row:t.line,column:t.character}}function QD(t){return t.map(e=>({...e,range:qv(e),name:BQ(e)}))}function qv(t){return t.name.endsWith(".startOf")?t.range.start.toEmptyRange():t.name.endsWith(".endOf")?t.range.end.toEmptyRange():t.range}function BQ(t){return t.name.endsWith(".startOf")?t.name.slice(0,-8):t.name.endsWith(".endOf")?t.name.slice(0,-6):t.name}var zv=class{constructor(){this.documentVersion=-1;this.documentUri="";this.documentLanguageId="";this.matches=[]}clear(){this.documentUri="",this.documentVersion=-1,this.documentLanguageId="",this.startPosition=void 0,this.endPosition=void 0,this.matches=[]}isValid(e,r,n){return this.documentVersion===e.version&&this.documentUri===e.uri.toString()&&this.documentLanguageId===e.languageId&&ZD(this.startPosition,r)&&ZD(this.endPosition,n)}update(e,r,n,i){this.documentVersion=e.version,this.documentUri=e.uri.toString(),this.documentLanguageId=e.languageId,this.startPosition=r,this.endPosition=n,this.matches=i}get(){return this.matches}};function ZD(t,e){return t==null||e==null?t===e:t.isEqual(e)}var Ma=new zv;var jl=class t{constructor(e,r,n){this.treeSitter=e;this.query=r;this.patternPredicates=n;this.shouldCheckCaptures=k().runMode!=="production"}static create(e,r,n){let i=KD(e,n);return new t(r,n,i)}hasCapture(e){return this.query.captureNames.some(r=>vv(r)===e)}matches(e,r,n){if(!Ma.isValid(e,r,n)){let i=this.getAllMatches(e,r,n);Ma.update(e,r,n,i)}return Ma.get()}getAllMatches(e,r,n){let i=this.getTreeMatches(e,r,n),o=[];for(let s of i){let l=this.createMutableQueryMatch(e,s);this.runPredicates(l)&&o.push(this.createQueryMatch(l))}return o}getTreeMatches(e,r,n){let{rootNode:i}=this.treeSitter.getTree(e);return this.query.matches(i,{startPosition:r!=null?jv(r):void 0,endPosition:n!=null?jv(n):void 0})}createMutableQueryMatch(e,r){return{patternIdx:r.pattern,captures:r.captures.map(({name:n,node:i})=>({name:n,node:i,document:e,range:_D(i),insertionDelimiter:void 0,allowMultiple:!1,hasError:()=>DD(i)}))}}runPredicates(e){for(let r of this.patternPredicates[e.patternIdx])if(!r(e))return!1;return!0}createQueryMatch(e){let r=[],n=new Map;for(let i of e.captures){let o=vv(i.name),s=qv(i),l=n.get(o);if(l==null){let u=[i],p={...i,name:o,range:s,hasError:()=>u.some(m=>m.hasError())};r.push(p),n.set(o,{acc:p,captures:u})}else l.acc.range=l.acc.range.union(s),l.acc.allowMultiple=l.acc.allowMultiple||i.allowMultiple,l.acc.insertionDelimiter=l.acc.insertionDelimiter??i.insertionDelimiter,l.captures.push(i)}return this.shouldCheckCaptures&&this.checkCaptures(Array.from(n.values())),{captures:r}}checkCaptures(e){for(let r of e)if(!MD(QD(r.captures),k().messages)&&k().runMode==="test")throw new Error("Invalid captures")}};var XD="_",WQ=[XD,"interior",...oa],$Q=["prefix","leading","trailing"],jQ=["startOf","endOf","start.startOf","start.endOf","end.startOf","end.endOf"],qQ=["domain","removal","iteration","iteration.domain"],YD=["start","end","start.startOf","start.endOf","end.startOf","end.endOf"],Da=new Set;for(let t of WQ){if(t!==XD){Da.add(t);for(let e of YD)Da.add(`${t}.${e}`)}for(let e of $Q){Da.add(`${t}.${e}`);for(let r of jQ)Da.add(`${t}.${e}.${r}`)}for(let e of qQ){Da.add(`${t}.${e}`);for(let r of YD)Da.add(`${t}.${e}.${r}`)}}var zQ=/^(?!;;).*(?<!"\w*)@([\w.]*)/gm;function JD(t,e){let r=e.matchAll(zQ),n=[];for(let o of r){let s=o[1];if(!(s.length>1&&!s.includes(".")&&s.startsWith("_"))&&!Da.has(s)){let l=o.input.slice(0,o.index).split(`
`).length;n.push(`${t}(${l}) invalid capture '@${s}'.`)}}if(n.length===0)return;let i=n.join(`
`);if(lt(k().messages,"validateQueryCaptures.invalidCaptureName",i),k().runMode==="test")throw new Error(i)}var zd=class t{constructor(e){this.query=e}static async create(e,r,n,i){let o=await GQ(e,r,`${i}.scm`);if(o==null||!await n.loadLanguage(i))return;let s=n.createQuery(i,o);if(s==null)throw Error(`Could not create Tree sitter query for language ${i}`);let l=jl.create(i,n,s);return new t(l)}getScopeHandler(e){if(this.query.hasCapture(e.type))return new xd(this.query,e)}getCapturesMap(e){let r=this.query.matches(e),n={};for(let i of r)for(let o of i.captures){let s=o.name;n[s]==null&&(n[s]=[]),n[s].push(o)}return n}};async function GQ(t,e,r){let n={[r]:null},i=t.runMode!=="production";for(;Object.values(n).some(o=>o==null);)for(let[o,s]of Object.entries(n)){if(s!=null)continue;let l=await e.readQuery(o);if(l==null){if(o===r)return;if(lt(t.messages,"LanguageDefinition.readQueryFileAndImports.queryNotFound",`Could not find imported query file ${o}`),t.runMode==="test")throw new Error("Invalid import statement");l=""}i&&JD(o,l),n[o]=l,fn(l,/^[^\S\r\n]*;;?[^\S\r\n]*(?:import|include)[^\S\r\n]+['"]?([\w|/\\.]+)['"]?[^\S\r\n]*$/gm,u=>{let p=u[1];i&&KQ(t,o,p,u[0]),n[p]=n[p]??null})}return Object.values(n).join(`
`)}function KQ(t,e,r,n){let i=!1;/[/\\]/g.test(r)&&(lt(t.messages,"LanguageDefinition.readQueryFileAndImports.invalidImport",`Invalid import statement in ${e}: "${n}". Relative import paths not supported`),i=!0);let o=`;; import ${r}`;if(n!==o&&(lt(t.messages,"LanguageDefinition.readQueryFileAndImports.malformedImport",`Malformed import statement in ${e}: "${n}". Import statements must be of the form "${o}"`),i=!0),i&&t.runMode==="test")throw new Error("Invalid import statement")}var eF=Symbol("LANGUAGE_UNDEFINED"),Gd=class t{constructor(e,r,n){this.ide=e;this.treeSitter=r;this.treeSitterQueryProvider=n;this.notifier=new Kt;this.languageDefinitions=new Map;this.disposables=[];this.onDidChangeDefinition=this.notifier.registerListener;let i=e.runMode==="test";e.onDidOpenTextDocument(o=>{i&&Ma.clear(),this.loadLanguage(o.languageId)}),e.onDidChangeVisibleTextEditors(o=>{o.forEach(({document:s})=>this.loadLanguage(s.languageId))}),this.disposables.push(n.onChanges(()=>this.reloadLanguageDefinitions()))}static async create(e,r,n){let i=new t(e,r,n);return await i.loadAllLanguages(),i}async loadAllLanguages(){let e=this.ide.visibleTextEditors.map(({document:r})=>r.languageId);try{await Promise.all(e.map(r=>this.loadLanguage(r)))}catch(r){if(lt(this.ide.messages,"Failed to load language definitions",Cn(r)),this.ide.runMode==="test")throw r}}async loadLanguage(e){if(this.languageDefinitions.has(e))return;let r=await zd.create(this.ide,this.treeSitterQueryProvider,this.treeSitter,e)??eF;this.languageDefinitions.set(e,r)}async reloadLanguageDefinitions(){this.languageDefinitions.clear(),await this.loadAllLanguages(),Ma.clear(),this.notifier.notifyListeners()}get(e){let r=this.languageDefinitions.get(e);if(r==null)throw new Error("Expected language definition entry is missing for languageId "+e);return r===eF?void 0:r}getNodeAtLocation(e,r){return this.treeSitter.getNodeAtLocation(e,r)}dispose(){this.disposables.forEach(e=>e.dispose())}};var Kd=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}get nestedStages(){return this.nestedStages_==null&&(this.nestedStages_=this.modifier.modifiers.map(this.modifierStageFactory.create)),this.nestedStages_}run(e,r){for(let n of this.nestedStages)try{return n.run(e,r)}catch{continue}throw new Error("No modifier could be applied")}};var tc=class{constructor(e,r){this.modifierStageFactory=e;this.nestedModifier=r;this.suppressErrors=!1}run(e,r){if(this.shouldModify(e))try{return this.nestedStage.run(e,r).map(n=>n.withThatTarget(e))}catch(n){if(!this.suppressErrors)throw n}return[e]}get nestedStage(){return this.nestedStage_==null&&(this.nestedStage_=this.modifierStageFactory.create(this.nestedModifier)),this.nestedStage_}},Po=class extends tc{constructor(e,r){super(e,r.modifier)}shouldModify(e){return!e.hasExplicitScopeType}},Qd=class extends tc{constructor(r,n,i){super(r,n);this.modificationCondition=i}shouldModify(r){return this.modificationCondition(r)}},rc=class extends tc{shouldModify(e){return!e.hasExplicitScopeType&&!e.isImplicit}},nc=class extends tc{constructor(r){super(r,{type:"containingScope",scopeType:{type:"token"}});this.suppressErrors=!0}shouldModify(r){return!r.hasExplicitScopeType&&!r.hasExplicitRange&&r.contentRange.isEmpty}};function tF(t,e){return Object.getPrototypeOf(t).constructor===Object.getPrototypeOf(e).constructor}function ic(t,e,r,n,i){if(e.editor!==r.editor)throw Error("Continuous targets must be in the same editor");if(n&&i&&tF(e,r)){let o=e.maybeCreateRichRangeTarget(t,r);if(o!=null)return o}return e.textualType==="line"&&r.textualType==="line"?new pr({editor:e.editor,isReversed:t,contentRange:Ds(e,r,n,i)}):new Ft({editor:e.editor,isReversed:t,hasExplicitRange:!0,contentRange:Ms(e,r,n,i),textualType:n&&i&&e.textualType==="token"&&r.textualType==="token"?"token":"character"})}function Zd(t,e,r){if(e===r)return e.getTargets(t);let n=e.getTargets(t),i=r.getTargets(t);if(n.length!==1||i.length!==1)throw Error("Scope range targets must be single-target");let[o]=n,[s]=i,l=s.contentRange.start.isAfterOrEqual(o.contentRange.start),[u,p]=l?[o,s]:[s,o];return[ic(t,u,p,!0,!0)]}function Yd(t,e,r,n){let i=Array.from(t.generateScopes(e,r,"forward",{containment:"required",allowAdjacentScopes:!0,skipAncestorScopes:!0}));switch(i.length){case 0:return;case 1:return i[0];case 2:{let[o,s]=i;return n==="forward"?s:n==="backward"||(t.isPreferredOver?.(o,s)??!1)?o:s}default:throw new Error("Expected no more than 2 scope candidates")}}function Xd(t,e,r=0){let{isReversed:n,editor:i,contentRange:{start:o,end:s}}=t;if(s.isEqual(o)){let p=Yd(e,i,o);return p==null||(r>0&&(p=Gv(e,i,p.domain.end,"forward",r,!0)),p==null)?void 0:p.getTargets(n)}let l=Gv(e,i,o,"forward",r);if(l==null)return;if(l.domain.contains(s))return l.getTargets(n);let u=Gv(e,i,s,"backward",r);if(u!=null)return Zd(n,l,u)}function Gv(t,e,r,n,i,o=!1){let s=0;for(let l of t.generateScopes(e,r,n,{containment:"required",allowAdjacentScopes:o})){if(s===i)return l;s+=1}}var oc=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e,r){let{scopeType:n,ancestorIndex:i=0}=this.modifier,o=this.scopeHandlerFactory.maybeCreate(n,e.editor.document.languageId);if(o==null)return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e,r);let s=Xd(e,o,i);if(s==null)throw new dt(n.type);return s}};var Jd=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e,r){let{scopeType:n}=this.modifier,{editor:i,isReversed:o}=e,s=this.scopeHandlerFactory.maybeCreate(n,i.document.languageId);if(s==null)return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e,r);let l;if(e.hasExplicitRange&&(l=rF(s,i,e.contentRange),l.length===1&&l[0].domain.contains(e.contentRange)&&!e.hasExplicitScopeType&&!r.multipleTargets&&(l=void 0)),l==null&&(l=this.getDefaultIterationRange(s,this.scopeHandlerFactory,e).flatMap(u=>rF(s,i,u))),l.length===0)throw new dt(n.type);return l.flatMap(u=>u.getTargets(o))}getDefaultIterationRange(e,r,n){let i=r.maybeCreate(e.iterationScopeType,n.editor.document.languageId);if(i==null)throw Error("Could not find iteration scope handler");let o=Xd(n,i);if(o==null)throw new dt(`iteration scope for ${e.scopeType.type}`);return o.map(s=>s.contentRange)}};function rF(t,e,{start:r,end:n}){return Array.from(t.generateScopes(e,r,"forward",{distalPosition:n,skipAncestorScopes:!0,allowAdjacentScopes:t.includeAdjacentInEvery}))}var eh=class{constructor(e){this.modifier=e}run(e){return e.contentText.trim()!==""?[e]:[]}},th=class{constructor(e){this.modifier=e}run(e){return e.contentText.trim()===""?[e]:[]}};var rh=class{run(){return Wm(k()).map(e=>new Hm({editor:e.editor,isReversed:e.selection.isReversed,contentRange:e.selection}))}};var nh=class{constructor(e,r){this.modifierStageFactory=e;this.markStageFactory=r}run(e,{actionFinalStages:r=[],noAutomaticTokenExpansion:n=!1}={}){return new Kv(this.modifierStageFactory,this.markStageFactory,e,{actionFinalStages:r,noAutomaticTokenExpansion:n}).run()}},Kv=class{constructor(e,r,n,i){this.modifierStageFactory=e;this.markStageFactory=r;this.target=n;this.opts=i}run(){return ZQ(this.processTarget(this.target))}processTarget(e){switch(e.type){case"list":return e.elements.flatMap(r=>this.processTarget(r));case"range":return this.processRangeTarget(e);case"primitive":case"implicit":return this.processPrimitiveTarget(e)}}processRangeTarget(e){let r=this.processPrimitiveTarget(e.anchor),n=this.processPrimitiveTarget(e.active);return Rt(r,n).flatMap(([i,o])=>{if(i==null||o==null)throw new Error("AnchorTargets and activeTargets lengths don't match");switch(e.rangeType){case"continuous":return this.processContinuousRangeTarget(i,o,e);case"vertical":return YQ(i,o,e.excludeAnchor,e.excludeActive)}})}processContinuousRangeTarget(e,r,{excludeAnchor:n,excludeActive:i,exclusionScopeType:o}){if(o==null)return[Ao(e,r,n,i)];let s=Yv(e,r);return[Ao(n?nF(this.modifierStageFactory,e,o,s?"backward":"forward"):e,i?nF(this.modifierStageFactory,r,o,s?"forward":"backward"):r,!1,!1)]}processPrimitiveTarget(e){let r,n,i=!1;e.type==="implicit"?(r=new rh,n=[]):(r=this.markStageFactory.create(e.mark),n=Qv(this.modifierStageFactory,e.modifiers),i=QQ(e));let o=r.run(),[s,l]=this.getPreAndPostStages(i),u=[...s,...n,...this.opts.actionFinalStages,...l];return Zv(u,o)}getPreAndPostStages(e){if(this.opts.noAutomaticTokenExpansion)return[[],[]];let r=new nc(this.modifierStageFactory);return e?[[r],[]]:[[],[r]]}};function QQ(t){return t.modifiers.length>0&&t.modifiers.every(({type:e})=>e==="startOf"||e==="endOf")}function Qv(t,e){return e.map(t.create).reverse()}function Zv(t,e){return t.forEach(r=>{let n={multipleTargets:e.length>1};e=e.flatMap(i=>r.run(i,n))}),e}function nF(t,e,r,n){let i={multipleTargets:!1};return t.create({type:"relativeScope",scopeType:r,direction:n,length:1,offset:1}).run(e,i)[0]}function Yv(t,e){return t.contentRange.start.isAfter(e.contentRange.start)?!0:t.contentRange.start.isBefore(e.contentRange.start)?!1:t.contentRange.end.isAfter(e.contentRange.end)}function ZQ(t){return qP(t,(e,r)=>e.isEqual(r),e=>e.contentRange.concise())}function iF(t,e){if(t.editor!==e.editor)throw new Error("Cannot form range between targets in different editors")}function Ao(t,e,r=!1,n=!1){iF(t,e);let i=Yv(t,e);return ic(i,i?e:t,i?t:e,!(i?n:r),!(i?r:n))}function YQ(t,e,r,n){iF(t,e);let i=Yv(t,e),o=i?-1:1,l=(i?t.contentRange.start:t.contentRange.end).line+(r?o:0),p=(i?e.contentRange.start:e.contentRange.end).line-(n?o:0),m=[];for(let d=l;;d+=o){let g=new q(d,t.contentRange.start.character,d,t.contentRange.end.character);if(m.push(new $e({editor:t.editor,isReversed:t.isReversed,contentRange:g,insertionDelimiter:t.insertionDelimiter})),d===p)return m}}var ih=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=this.getModifierStages(),n=Zv(r,[e]),i=this.modifier.type==="extendThroughStartOf";return n.map(o=>new Vm({editor:e.editor,isReversed:i,inputTarget:e,modifiedTarget:o,isHead:i}))}getModifierStages(){return this.modifier.modifiers!=null?Qv(this.modifierStageFactory,this.modifier.modifiers):[new Xv(this.modifierStageFactory,this.modifier)]}},Xv=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e,r){let n=this.getContainingLine(e,r),i=this.getContainingPairInterior(e,r),o=i!=null?n.contentRange.intersection(i.contentRange):null;return o==null||o.isEmpty?[n]:[new $e({editor:e.editor,isReversed:e.isReversed,contentRange:o})]}getContainingPairInterior(e,r){try{return this.getContaining(e,r,{type:"surroundingPairInterior",delimiter:"any"})[0]}catch(n){if(n instanceof dt)return;throw n}}getContainingLine(e,r){return this.getContaining(e,r,{type:"line"})[0]}getContaining(e,r,n){return this.modifierStageFactory.create({type:"containingScope",scopeType:n}).run(e,r)}};var oi=class extends Error{constructor(e,r){let n=r!=null?` #${r+1}`:"";super(`Scope '${e.type}'${n} is out of range`),this.name="OutOfRangeError"}};function oF(t,e,r,n){return Jv(t,e,r,n),e.slice(r,n+1)}function Jv(t,e,r,n){if(r<0||r>=e.length)throw new oi(t,r);if(n<0||n>=e.length)throw new oi(t,n)}var ac=class{constructor(e,r,n){this.modifierStageFactory=e;this.storedTargets=r;this.modifier=n}run(e,r){let n=new nc(this.modifierStageFactory).run(e,r)[0];switch(this.modifier.type){case"everyScope":return this.handleEveryScope(n,r);case"ordinalScope":return this.handleOrdinalScope(n,r,this.modifier);case"relativeScope":return this.handleRelativeScope(n,r,this.modifier);default:throw Error(`${this.modifier.type} instance scope not supported`)}}handleEveryScope(e,r){return Array.from(cd(this.getEveryRanges(e),([n,i])=>this.getTargetIterable(e,r,n,i,"forward")))}handleOrdinalScope(e,r,{start:n,length:i,scopeType:o}){return this.getEveryRanges(e).flatMap(([s,l])=>aF(o,this.getTargetIterable(e,r,s,l,n>=0?"forward":"backward"),n>=0?n:-(i+n),i))}handleRelativeScope(e,r,{direction:n,offset:i,length:o,scopeType:s}){return(this.storedTargets.get("instanceReference")??[e]).flatMap(u=>{let{editor:p}=u,m=n==="forward"?new q(i===0?u.contentRange.start:u.contentRange.end,p.document.range.end):new q(p.document.range.start,i===0?u.contentRange.end:u.contentRange.start);return aF(s,this.getTargetIterable(e,r,p,m,n),i===0?0:i-1,o)})}getEveryRanges({editor:e}){return this.storedTargets.get("instanceReference")?.map(({editor:r,contentRange:n})=>[r,n])??[[e,e.document.range]]}getTargetIterable(e,r,n,i,o){let s=Wt(xn(new RegExp($r(e.contentText),"g"),n,i,o),u=>new $e({contentRange:u,editor:n,isReversed:!1,textualType:"character"})),l=XQ(e);if(l!=null){let u=this.modifierStageFactory.create({type:"containingScope",scopeType:l});return ad(Wt(s,p=>{try{let m=u.run(p,r);return m.length===1&&m[0].contentRange.isRangeEqual(p.contentRange)?m[0]:null}catch{return null}}),p=>p!=null)}return s}};function XQ(t){switch(t.textualType){case"line":case"token":case"word":return{type:t.textualType};default:return null}}function aF(t,e,r,n){Array.from(Nl(r,e));let i=Array.from(Nl(n,e));if(i.length<n)throw new oi(t,r+n-1);return i}var oh=class{constructor(e,r){this.modifierHandlerFactory=e;this.modifier=r}run(e,r){let n=e.getInterior();return n??this.modifierHandlerFactory.create({type:"containingScope",scopeType:{type:"interior",explicitScopeType:e.hasExplicitScopeType}}).run(e,r)}},ah=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r;this.containingSurroundingPairIfNoBoundaryStage=eb(this.modifierStageFactory)}run(e,r){return this.containingSurroundingPairIfNoBoundaryStage.run(e,r).flatMap(n=>n.getBoundary())}};function eb(t){return new Qd(t,{type:"containingScope",scopeType:{type:"surroundingPair",delimiter:"any"}},e=>e.getBoundary()==null)}var ai={type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:{type:"line"}}},tb={type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:{type:"token"}}};var sh=class extends Error{constructor(e){super(`Target has no ${e} delimiter.`),this.name="NoDelimiterError"}},ch=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e,r){return this.modifierStageFactory.create(tb).run(e,r).map(n=>{let i=n.getLeadingDelimiterTarget();if(i==null)throw new sh("leading");return i})}},lh=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e,r){return this.modifierStageFactory.create(tb).run(e,r).map(n=>{let i=n.getTrailingDelimiterTarget();if(i==null)throw new sh("trailing");return i})}};function uh(t,e,r,n,i){return Jv(t,r,n,i),n===i?r[n]:ic(e,r[n],r[i],!0,!0)}function ph(t,e,r,n){return t.create({type:"everyScope",scopeType:n}).run(e,r)}var fh=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e,r){let n=ph(this.modifierStageFactory,e,r,this.modifier.scopeType),i=this.modifier.start+(this.modifier.start<0?n.length:0),o=i+this.modifier.length-1;return this.modifier.isEvery?oF(this.modifier.scopeType,n,i,o):[uh(this.modifier.scopeType,e.isReversed,n,i,o)]}};var mh=class{run(e){let r={editor:e.editor,isReversed:e.isReversed,contentRange:this.getContentRange(e.contentRange)};return[e.isRaw?new xo(r):new $e({...r,textualType:"character"})]}},dh=class extends mh{getContentRange(e){return e.start.toEmptyRange()}},hh=class extends mh{getContentRange(e){return e.end.toEmptyRange()}};var gh=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e,r){let{scopeType:n}=this.modifier,i=new oc(this.modifierStageFactory,this.scopeHandlerFactory,{type:"containingScope",scopeType:n});try{return i.run(e,r)}catch(l){if(!(l instanceof dt))throw l}let o=this.scopeHandlerFactory.create(this.modifier.scopeType,e.editor.document.languageId),s=JQ(e,o);if(s==null)throw Error(`No scopes found for scope type: ${n.type}`);return s}};function JQ(t,e){let r=e.generateScopes(t.editor,t.contentRange.start,"backward"),n=e.generateScopes(t.editor,t.contentRange.end,"forward"),{active:i}=t.contentSelection,o=sF(r,i),s=sF(n,i),l=o.distance<s.distance?o.scope:s.scope;return l?.getTargets(t.isReversed)}function sF(t,e){let r,n=1/0;for(let i of t){let o=Math.min(cF(e,i.domain.start),cF(e,i.domain.end));if(o<n)r=i,n=o;else break}return{scope:r,distance:n}}function cF(t,e){return Math.abs(t.line-e.line)*1e4+Math.abs(t.character-e.character)}var yh=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e,r){let n=this.modifierStageFactory.create(this.modifier.anchor),i=this.modifierStageFactory.create(this.modifier.active),o=n.run(e,r),s=i.run(e,r);if(o.length!==1||s.length!==1)throw new Error("Expected single anchor and active target");return[Ao(o[0],s[0],this.modifier.excludeAnchor,this.modifier.excludeActive)]}};var xh=class{constructor(e){this.modifier=e}run(e){return[new xo({editor:e.editor,contentRange:e.contentRange,isReversed:e.isReversed})]}};var Th=class extends Error{constructor(e,r,n){super(`Requested ${e} ${n}s, but ${r} are already selected.`),this.name="TooFewScopesError"}};function lF(t,e,r,n){let i=ph(t,n7(r),n,e.scopeType),o=r7(r.contentRange,i);return e7(e,r,i,o)}function e7(t,e,r,n){let i=t.direction==="forward",o=t7(t,e.contentRange,r,i,n),s=i?o+t.length-1:o-t.length+1,l=Math.min(o,s),u=Math.max(o,s);return[uh(t.scopeType,e.isReversed,r,l,u)]}function t7(t,e,r,n,i){let o=t.offset===0;if(i==null){let u=n?r.findIndex(p=>p.contentRange.start.isAfter(e.start)):Jo(r,p=>p.contentRange.start.isBefore(e.start));if(u===-1)throw new oi(t.scopeType);return o?u:n?u+t.offset-1:u-t.offset+1}let s=i.start,l=i.end;if(o){let u=l-s+1;if(u>t.length)throw new Th(t.length,u,t.scopeType.type);return n?s:l}return n?l+t.offset:s-t.offset}function r7(t,e){let r=e.map((i,o)=>({index:o,intersection:i.contentRange.intersection(t)})).filter(i=>i.intersection!=null);if(t.isEmpty){if(r.length===0)return;let i=r.at(-1).index;return{start:i,end:i}}let n=r.filter(i=>!i.intersection.isEmpty).map(i=>i.index);if(n.length!==0)return{start:n[0],end:n.at(-1)}}function n7(t){return new Ft({editor:t.editor,isReversed:t.isReversed,contentRange:t.contentRange,hasExplicitRange:!1})}var Sh=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e,r){let n=this.scopeHandlerFactory.maybeCreate(this.modifier.scopeType,e.editor.document.languageId);if(n==null)return lF(this.modifierStageFactory,this.modifier,e,r);let i=Array.from(this.modifier.offset===0?i7(n,e,this.modifier):o7(n,e,this.modifier));if(i.length<this.modifier.length)throw new oi(this.modifier.scopeType,this.modifier.offset+this.modifier.length-1);let{isReversed:o}=e;return this.modifier.isEvery?i.flatMap(s=>s.getTargets(o)):Zd(o,i[0],i[i.length-1])}};function i7(t,e,r){let{editor:n,contentRange:i}=e,{length:o,direction:s}=r,l=Yd(t,n,s==="forward"?i.start:i.end,s)?.domain;if(l==null)throw new dt(r.scopeType.type);return Nl(o,t.generateScopes(n,s==="forward"?l.start:l.end,s,{skipAncestorScopes:!0}))}function o7(t,e,r){let{editor:n,contentRange:i}=e,{length:o,direction:s,offset:l}=r,u=s==="forward"?i.end:i.start,p=i.isEmpty?"disallowed":"disallowedIfStrict";return $M(t.generateScopes(n,u,s,{containment:p,skipAncestorScopes:!0}),l-1,l+o-1)}var vh=class{constructor(e){this.modifier=e}run(e){return e.editor.visibleRanges.map(r=>new $e({editor:e.editor,isReversed:e.isReversed,contentRange:r}))}};function uF(...t){return e=>{let r=e;for(let n of t)if(r=n(r),r==null)return null;return r}}function pF(t,...e){return r=>{let n=r,i=[],o=[...e].reverse();for(let s of o){if(n==null||(n=s(n),n==null))return null;i.push(n),n=n.parent??null}return i.reverse()[t]}}var rb=t=>new fe(t.row,t.column),fF=(...t)=>{let e=["(","{","[","<"],r=[")","}","]",">"],n=e.concat(r),i=(s,l)=>s!=null&&l.includes(s.type),o=s=>s!=null&&!i(s,n);return(s,l)=>{let u,{start:p,end:m}=l;if(i(s.parent,t))return i(s,e)?u=s.nextNamedSibling:i(s,r)?u=s.previousNamedSibling:s.type===","?u=m.isBeforeOrEqual(rb(s.startPosition))?s.previousNamedSibling:s.nextNamedSibling:u=s,o(u)?u:null;if(i(s,t)){let d=[...s.children],g=d.find(({startPosition:b})=>rb(b).isAfterOrEqual(m))??null;if(o(g))return g;d.reverse();let x=d.find(({endPosition:b})=>rb(b).isBeforeOrEqual(p))??null;if(o(x))return x}return null}};function Qe(...t){let e=a7(t);return r=>{for(let n of e){let i=s7(r,n);if(i!=null)return i}return null}}function a7(t){return t.map(e=>e.split(".").map(r=>new nb(r)))}function s7(t,e){let r=c7(t,e);!r&&e.length>1&&(r=l7(t,e));let n=null,i;return r!=null&&([n,i]=r),n!=null&&i!=null&&i.fields!=null&&i.fields.forEach(o=>{n=(o.isIndex?n?.namedChild(o.value):n?.childForFieldName(o.value))??null}),n}function c7(t,e){let r=null,n=t;for(let i=e.length-1;i>-1;--i){let o=e[i];if(n==null||!o.typeEquals(n)){if(o.isOptional)continue;return null}(!r||!r[1].isImportant)&&(r=[n,o]),n=n.parent}return r}function l7(t,e){let r=null,n=t;for(let i=0;i<e.length;++i){let o=e[i];if(n==null||!o.typeEquals(n)){if(o.isOptional)continue;return null}if((!r||o.isImportant)&&(r=[n,o]),i+1<e.length){let s=n.namedChildren.filter(l=>e[i+1].typeEquals(l));n=s.length===1?s[0]:null}}return r}var nb=class{constructor(e){this.anyType=!1;this.notType=!1;this.type=e.match(/^[\w*~]+/)[0],this.type==="*"?this.anyType=!0:this.type.startsWith("~")&&(this.type=this.type.slice(1),this.notType=!0),this.isImportant=e.indexOf("!")>-1,this.isOptional=e.indexOf("?")>-1,this.fields=[...e.matchAll(/(?<=\[).+?(?=\])/g)].map(r=>r[0]).map(r=>/\d+/.test(r)?{isIndex:!0,value:Number(r)}:{isIndex:!1,value:r})}typeEquals(e){return this.anyType?!0:this.notType?this.type!==e.type:this.type===e.type}};function Ge(t,e=wo){return function(r,n){let i=t(n,r.selection);return i!=null?[{node:i,selection:e(r.editor,i)}]:null}}function bh(t,e=wo){let r=uF(...t);return function(n,i){let o=r(i);return o==null?null:[{node:o,selection:e(n.editor,o)}]}}function sc(t,e=0,r=wo){return Ge(pF(e,...t),r)}function mr(...t){return Ge(Qe(...t))}function cc(...t){return Ge(fF(...t),RD())}function mF(...t){return Ge(Qe(...t),kD)}function Un(t,e=[]){return Ge(Qe(...t),PD(...e))}function lc(t,e=[]){return Ge(Qe(...t),AD(...e))}function er(...t){return(e,r)=>{for(let n of t){let i=n(e,r);if(i!=null)return i}return null}}function dF(t){return(e,r)=>{throw new Error(`Node type '${t}' not supported`)}}function si(t){return Object.freeze(Object.fromEntries(Di(t).map(e=>{let r=t[e];return Array.isArray(r)?[e,mr(...r)]:typeof r=="string"?[e,mr(r)]:[e,r]})))}function hF(t,e){let r=t.walk();r.gotoFirstChild();let n=[],i=!0;for(;i;)r.currentFieldName===e&&n.push(r.currentNode),i=r.gotoNextSibling();return n}function u7(t,e){return xF(t,r=>Math.floor(r/2)*2+e)}function gF(t){return u7(Qe("map_lit"),t)}function xF(t,e){return r=>{let n=r.parent;if(n==null||t(n)==null)return null;let i=ql(n),o=i.findIndex(({id:l})=>l===r.id);if(o===-1)return null;let s=e(o);return s===-1?null:i[s]}}var ql=t=>hF(t,"value"),ib="~quoting_lit.list_lit!",TF=Qe(ib);function ob(...t){return e=>{let r=TF(e);if(r==null)return null;let n=ql(r)[0];return t.includes(n?.text)?r:null}}function p7(...t){return Ge(ob(...t))}var SF=ob("defn","defmacro"),yF=bh([SF,t=>ql(t)[1]]),vF=ob("if","if-let","when","when-let"),f7=Ge(vF),m7={collectionKey:Ge(gF(0)),value:Ge(gF(1)),argumentOrParameter:Ge(xF(Qe(ib),t=>t!==0?t:-1)),functionCall:ib,functionCallee:bh([TF,t=>ql(t)[0]]),namedFunction:Ge(SF),functionName:yF,name:yF,anonymousFunction:er(p7("fn"),mr("anon_fn_lit")),ifStatement:f7,condition:bh([vF,t=>ql(t)[1]])},bF=si(m7);var wF=["command","displayed_equation","generic_command","inline_formula","math_set","block_comment","package_include","class_include","latex_include","biblatex_include","bibtex_include","graphics_include","svg_include","inkscape_include","verbatim_include","import_include","caption","citation","label_definition","label_reference","label_reference_range","label_number","new_command_definition","old_command_definition","let_command_definition","environment_definition","glossary_entry_definition","glossary_entry_reference","acronym_definition","acronym_reference","theorem_definition","color_definition","color_set_definition","color_reference","tikz_library_import"],d7=["curly_group","curly_group_text","curly_group_text_list","curly_group_path","curly_group_path_list","curly_group_command_name","curly_group_key_value","curly_group_glob_pattern","curly_group_impl","brack_group","brack_group_text","brack_group_argc","brack_group_key_value","mixed_group"],EF=["subparagraph","paragraph","subsubsection","subsection","section","chapter","part"],_F=EF.map(t=>`${t}[text]`),h7=EF.map(t=>`${t}[command]`);function ab(t,e){return{selection:new Re(t.document.positionAt(e.startIndex+1),t.document.positionAt(e.endIndex-1)),context:{removalRange:new Re(t.document.positionAt(e.startIndex),t.document.positionAt(e.endIndex))}}}function g7(t,e){let r=e.startIndex,n=e.endIndex,i=e.nextNamedSibling;return i!=null&&i.isNamed&&(n=i.endIndex),{selection:new Re(t.document.positionAt(r),t.document.positionAt(n)),context:{}}}var y7={argumentOrParameter:er(sc([Qe(...wF),Qe(...d7)],1,ab),Ge(Qe("begin[name]","end[name]",..._F),ab)),functionCall:er(Ge(Qe(...wF,"begin","end")),Ge(Qe(...h7),g7)),name:er(Ge(Qe(..._F),ab),mr("begin[name][text]","end[name][text]"))},RF=si(y7);var x7=["alias","begin_block","end_block","if_modifier","rescue_modifier","undef","unless_modifier","until_modifier","while_modifier"],T7=["array","assignment","begin","binary","break","call","case","case_match","chained_string","character","class","class_variable","complex","conditional","constant","delimited_symbol","element_reference","false","float","for","global_variable","hash","heredoc_beginning","identifier","if","instance_variable","integer","lambda","method","module","next","nil","operator_assignment","parenthesized_statements","range","rational","redo","regex","retry","return","scope_resolution","self","simple_symbol","singleton_class","singleton_method","string","string_array","subshell","super","symbol_array","true","unary","unless","until","while","yield"],S7=["begin_block","begin","block_body","block","body_statement","do_block","do","else","end_block","ensure","heredoc_beginning","interpolation","lambda","method","parenthesized_statements","program","singleton_class","singleton_method","then"],v7=["=","+=","-=","*=","**=","/=","||=","|=","&&=","&=","%=",">>=","<<=","^="],b7=[":","=>"];function w7(t){if(t.type!=="call")return null;let e=t.childForFieldName("receiver"),r=t.childForFieldName("method"),n=t.childForFieldName("block");return e?.text==="Proc"&&r?.text==="new"||e==null&&r?.text==="lambda"?t:n}var _7={statement:er(mr(...x7),sc([Qe(...S7),Qe(...T7)],1)),anonymousFunction:er(mr("lambda","do_block"),Ge(w7)),condition:mF("*[condition]"),argumentOrParameter:cc("lambda_parameters","method_parameters","block_parameters","argument_list"),collectionKey:lc(["pair[key]"],[":"]),value:Un(["pair[value]","assignment[right]","operator_assignment[right]","return.argument_list!"],v7.concat(b7))},kF=si(_7);function sb(){let t=zs(["else_clause"],[],{includeUnnamedChildren:!0});return function(e,r){let n=t(e,r),i=r.parent;if(i?.type!=="else_clause"){let s=r.childForFieldName("alternative");if(s==null)return n;let{selection:l}=n;return{selection:l,context:{removalRange:new Re(l.start,Sv(s.namedChild(0).startPosition))}}}let{selection:o}=n;return{selection:new Re(Sv(i.child(0).startPosition),o.end),context:{}}}}function PF(t){let e=sb();return function(r,n){return n.namedChild(0).type===t?e(r,n.namedChild(0)):wo(r,n)}}var AF=["associated_type","attribute_item","const_item","empty_statement","enum_item","extern_crate_declaration","foreign_mod_item","impl_item","inner_attribute_item","let_declaration","macro_definition","macro_invocation","function_item","function_signature_item","mod_item","static_item","struct_item","trait_item","type_item","union_item","use_declaration","expression_statement"],E7=["source_file","block","declaration_list"];function R7(t){return t.parent?.type==="impl_item"&&t.parent?.childForFieldName("type")?.equals(t)?t:null}function k7(t,e){return{selection:ED(e.children[1],e.lastNamedChild),context:{leadingDelimiterRange:Kr(e.children[0].startPosition,e.children[1].startPosition)}}}function P7(t){if(t.type!=="block")return null;let{lastNamedChild:e}=t;if(e==null)return null;if(e.type==="expression_statement"){let r=e.child(0);return r.type==="return_expression"?r.child(1):null}return AF.includes(e.type)?null:e.type==="return_expression"?e.child(1):e}var A7={statement:sc([Qe(...E7),Qe(...AF)],1),condition:er(mr("while_expression[condition]","if_expression[condition]"),Ge(Qe("while_let_expression","if_let_expression"),zs(["while","if","block"],[],{includeUnnamedChildren:!0})),Un(["*.match_pattern![condition]"],["if"])),type:er(Un(["let_declaration[type]","parameter[type]","field_declaration[type]","const_item[type]"],[":"]),Ge(Qe("constrained_type_parameter[bounds]","where_predicate[bounds]"),k7),Un(["function_item[return_type]"],["->"]),Ge(R7),mr("struct_item","trait_item","impl_item","array_type[element]")),argumentOrParameter:cc("arguments","parameters","meta_arguments","type_parameters","ordered_field_declaration_list"),collectionKey:er(lc(["field_initializer[name]","field_pattern[name]"],[":"])),name:er(mr("let_declaration.identifier!","parameter.identifier!","function_item[name]","struct_item[name]","enum_item[name]","enum_variant[name]","trait_item[name]","const_item[name]","meta_item.identifier!","let_declaration[pattern]","constrained_type_parameter[left]","where_predicate[left]","field_declaration[name]"),lc(["field_initializer[name]","field_pattern[name]"],[":"])),value:er(Un(["let_declaration[value]"],["="]),Un(["field_initializer[value]","field_pattern[pattern]"],[":"]),mr("meta_item[value]","const_item[value]"),Ge(P7)),attribute:lc(["mutable_specifier","attribute_item"]),branch:er(mr("match_arm"),Ge(Qe("else_clause"),PF("if_expression")),Ge(Qe("if_expression"),sb()))},MF=si(A7);var M7={argumentOrParameter:cc("arguments","parameters","class_parameters","bindings"),branch:Ge(Qe("case_clause"),zs([],[],{includeUnnamedChildren:!0})),type:Un(["upper_bound[type]","lower_bound[type]","view_bound[type]","context_bound[type]","val_definition[type]","val_declaration[type]","var_definition[type]","var_declaration[type]","type_definition","extends_clause[type]","class_parameter[type]","parameter[type]","function_definition[return_type]","typed_pattern[type]","binding[type]"],[":"]),value:Un(["*[value]","*[default_value]","type_definition[type]"],["="])},DF=si(M7);function FF(t,e,r){let n=zl[t];if(n==null)throw new Bp(t);let i=n[e];return i==null?dF(e):r?D7(i):i}var zl={clojure:bF,latex:RF,ruby:kF,rust:MF,scala:DF};function D7(t){return(e,r)=>{let n=t(e,r);return n==null?null:(n=n.flatMap(i=>F7(i.node,Fm(e,i.selection.selection),t)),n.length>0?n:null)}}function F7(t,e,r){let n=t.parent;for(;n!=null;){let i=n.namedChildren.flatMap(o=>r(e,o)).filter(o=>o!=null);if(i.length>0)return i;n=n.parent}return[]}var wh=class{constructor(e,r){this.languageDefinitions=e;this.modifier=r}run(e){let r=FF(e.editor.document.languageId,this.modifier.scopeType.type,this.modifier.type==="everyScope"),n=this.languageDefinitions.getNodeAtLocation(e.editor.document,e.contentRange);if(n==null)throw new dt(this.modifier.scopeType.type);let i=I7(n,r,{editor:e.editor,selection:new Re(e.contentRange.start,e.contentRange.end)});if(i==null)throw new dt(this.modifier.scopeType.type);return i.map(o=>{let{containingListDelimiter:s,leadingDelimiterRange:l,trailingDelimiterRange:u,removalRange:p}=o.context;if(p!=null&&(l!=null||u!=null))throw Error("Removal range is mutually exclusive with leading or trailing delimiter range");let{editor:m,selection:d}=o.selection;return new So({scopeTypeType:this.modifier.scopeType.type,editor:m,isReversed:e.isReversed,contentRange:d,removalRange:p,insertionDelimiter:s,leadingDelimiterRange:l,trailingDelimiterRange:u})})}};function I7(t,e,r){let n=t;for(;n!=null;){let i=e(r,n);if(i!=null)return i.map(o=>o.selection).map(o=>({selection:Fm(r,o.selection),context:o.context}));n=n.parent}return null}var uc=class{constructor(e,r,n){this.languageDefinitions=e;this.storedTargets=r;this.scopeHandlerFactory=n;this.create=this.create.bind(this)}create(e){switch(e.type){case"startOf":return new dh;case"endOf":return new hh;case"extendThroughStartOf":case"extendThroughEndOf":return new ih(this,e);case"toRawSelection":return new xh(e);case"interiorOnly":return new oh(this,e);case"excludeInterior":return new ah(this,e);case"leading":return new ch(this,e);case"trailing":return new lh(this,e);case"visible":return new vh(e);case"containingScope":return new oc(this,this.scopeHandlerFactory,e);case"preferredScope":return new gh(this,this.scopeHandlerFactory,e);case"everyScope":return e.scopeType.type==="instance"?new ac(this,this.storedTargets,e):new Jd(this,this.scopeHandlerFactory,e);case"ordinalScope":return e.scopeType.type==="instance"?new ac(this,this.storedTargets,e):new fh(this,e);case"relativeScope":return e.scopeType.type==="instance"?new ac(this,this.storedTargets,e):new Sh(this,this.scopeHandlerFactory,e);case"keepContentFilter":return new eh(e);case"keepEmptyFilter":return new th(e);case"cascading":return new Kd(this,e);case"modifyIfUntyped":return new Po(this,e);case"range":return new yh(this,e);case"inferPreviousMark":throw Error(`Unexpected modifier '${e.type}'; it should have been removed during inference`);default:{let r=e,{type:n}=e;throw new Error(`Unknown modifier: ${n}`)}}}getLegacyScopeStage(e){switch(e.scopeType.type){default:return new wh(this.languageDefinitions,e)}}};async function IF(t,e,r){let n=t.registerReplaceEditList(e.document,r.filter(o=>o.isReplace)),i=await e.edit(r);return n(),i}async function De({rangeUpdater:t,editor:e,selections:r,preserveCursorSelections:n,...i}){let o=Di(r),s=o.map(p=>{let m=r[p],d=C7(m);return CF(e.document,d.selections,d.behavior)});n||s.push(CF(e.document,e.selections,1));let l=await("edits"in i?L7(t,e,i.edits,s):OF(t,i.callback,e.document,s));return n||await e.setSelections(l.pop()),Object.fromEntries(o.map((p,m)=>[p,l[m]]))}function CF(t,e,r){return e.map(n=>O7(t,n,n instanceof Re?!n.isReversed:!0,r))}function C7(t){return"selections"in t?t:{selections:t,behavior:1}}function O7(t,e,r,n){return{range:e,isForward:r,expansionBehavior:{start:{type:n===1||n===3?"closed":"open"},end:{type:n===1||n===2?"closed":"open"}},offsets:{start:t.offsetAt(e.start),end:t.offsetAt(e.end)},text:t.getText(e)}}function N7(t){return t.map(e=>e.map(({range:{start:r,end:n},isForward:i})=>i?new Re(r,n):new Re(n,r)))}async function OF(t,e,r,n){let i=t.registerRangeInfoList(r,rt(n));return await e(),i(),N7(n)}async function L7(t,e,r,n){return await OF(t,async()=>{if(!await IF(t,e,r))throw new Error("Could not apply edits")},e.document,n)}var _h=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e){return await Ce(k(),e,"pendingModification0"),{thatSelections:rt(await ot(e,async(n,i)=>{let o=i.map(({contentRange:p})=>p),s=U7(n,o),l=k().getEditableTextEditor(n),{contentRanges:u}=await De({rangeUpdater:this.rangeUpdater,editor:l,edits:s,selections:{contentRanges:o}});return Rt(i,u).map(([p,m])=>({editor:p.editor,selection:m.toSelection(p.isReversed)}))}))}}};function U7(t,e){let{document:r}=t,n=[];for(let i of e){let o=i.start,s=r.lineAt(o),l=s.text.slice(0,s.rangeTrimmed?.start?.character??s.range.start.character),u=s.text.slice(0,o.character).search(/\s+$/),p=u>-1?new q(new fe(s.lineNumber,u),o):o.toEmptyRange();n.push({range:p,text:`
`+l,isReplace:!p.isEmpty})}return n}function Eh(t){return t.length<2?t:sM(t).flatMap(([e,r])=>{if(r.length<2)return r;let n=[...r];n.sort((o,s)=>o.contentRange.start.compareTo(s.contentRange.start));let i=!0;for(;i;)[n,i]=H7(n);return n})}function H7(t){if(t.length<2)return[t,!1];let e=[],r=[];return t.forEach(n=>{r.length&&!V7(r[r.length-1],n)?(e.push(NF(r)),r=[n]):r.push(n)}),e.push(NF(r)),[e,e.length!==t.length]}function NF(t){if(t.length===1)return t[0];let e=t[0],r=t[t.length-1];return Ao(e,r)}function V7(t,e){return!!t.getRemovalRange().intersection(e.getRemovalRange())}var Gl=class{constructor(e,r){this.rangeUpdater=e;this.type=r}async decorateTargets(e,r){await Promise.all([Ce(k(),e,this.decoration.sourceStyle,this.decoration.getSourceRangeCallback),Ce(k(),r,this.decoration.destinationStyle)])}getEditsBringMove(e,r){let n=[],i=[],o=e.length!==r.length&&r.length===1;return e.forEach((s,l)=>{let u=r[l];if((s==null||u==null)&&!o)throw new Error("Targets must have same number of args");if(u!=null){let p;o?p=e.map((m,d)=>{let g=m.contentText,x=(u.isRaw?null:u.insertionDelimiter)??(m.isRaw?null:m.insertionDelimiter);return d>0&&x!=null?x+g:g}).join(""):p=s.contentText,i.push({edit:u.constructChangeEdit(p),editor:u.editor,originalTarget:u.target,isSource:!1})}else u=r[0];n.includes(s)||(n.push(s),this.type==="bring"&&i.push({edit:s.toDestination("to").constructChangeEdit(u.target.contentText),editor:s.editor,originalTarget:s,isSource:!0}))}),this.type==="move"&&Eh(n).forEach(s=>{i.push({edit:s.constructRemovalEdit(),editor:s.editor,originalTarget:s,isSource:!0})}),i}async performEditsAndComputeThatMark(e){return rt(await Ni(e,r=>r.editor,async(r,n)=>{let i=this.type!=="bring"?n:n.filter(({isSource:x})=>!x),o=this.type==="swap"?[]:n.filter(({isSource:x})=>x),s=this.type==="swap"?n:n.filter(({isSource:x})=>!x),l=o.map(({edit:x})=>x.range),u=s.map(({edit:x})=>x.range),p=k().getEditableTextEditor(r),{sourceEditRanges:m,destinationEditRanges:d}=await De({rangeUpdater:this.rangeUpdater,editor:p,edits:i.map(({edit:x})=>x),selections:{sourceEditRanges:l,destinationEditRanges:{selections:u,behavior:0}}}),g=[...this.getMarks(o,m),...this.getMarks(s,d)];return g.sort((x,b)=>n.findIndex(v=>v.originalTarget===x.target)-n.findIndex(v=>v.originalTarget===b.target)),g}))}getMarks(e,r){return e.map((n,i)=>{let o=r[i],s=n.edit.updateRange(o),l=n.originalTarget;return{editor:n.editor,selection:s.toSelection(l.isReversed),isSource:n.isSource,target:l}})}async decorateThatMark(e){let r=n=>gn(n,e.find(i=>i.target===n).selection);return Promise.all([Ce(k(),e.filter(({isSource:n})=>n).map(({target:n})=>n),this.decoration.sourceStyle,r),Ce(k(),e.filter(({isSource:n})=>!n).map(({target:n})=>n),this.decoration.destinationStyle,r)])}calculateMarksBringMove(e){return{thatMark:e.filter(({isSource:r})=>!r),sourceMark:e.filter(({isSource:r})=>r)}}};function LF(t,e){return t.length===1?Array(e.length).fill(t[0]):t}var Rh=class extends Gl{constructor(r){super(r,"bring");this.decoration={sourceStyle:"referenced",destinationStyle:"pendingModification0"};this.run=this.run.bind(this)}async run(r,n){r=LF(r,n),await this.decorateTargets(r,n.map(u=>u.target));let i=this.getEditsBringMove(r,n),o=await this.performEditsAndComputeThatMark(i),{thatMark:s,sourceMark:l}=this.calculateMarksBringMove(o);return await this.decorateThatMark(s),{thatSelections:s,sourceSelections:l}}},kh=class extends Gl{constructor(r){super(r,"move");this.decoration={sourceStyle:"pendingDelete",destinationStyle:"pendingModification0",getSourceRangeCallback:B7};this.run=this.run.bind(this)}async run(r,n){r=LF(r,n),await this.decorateTargets(r,n.map(u=>u.target));let i=this.getEditsBringMove(r,n),o=await this.performEditsAndComputeThatMark(i),{thatMark:s,sourceMark:l}=this.calculateMarksBringMove(o);return await this.decorateThatMark(s),{thatSelections:s,sourceSelections:l}}},Ph=class extends Gl{constructor(r){super(r,"swap");this.decoration={sourceStyle:"pendingModification1",destinationStyle:"pendingModification0"};this.run=this.run.bind(this)}async run(r,n){await this.decorateTargets(r,n);let i=this.getEditsSwap(r,n),o=await this.performEditsAndComputeThatMark(i);return await this.decorateThatMark(o),{thatSelections:o,sourceSelections:[]}}getEditsSwap(r,n){let i=[];return r.forEach((o,s)=>{let l=n[s];if(o==null||l==null)throw new Error("Targets must have same number of args");i.push({edit:l.toDestination("to").constructChangeEdit(o.contentText),editor:l.editor,originalTarget:l,isSource:!1}),i.push({edit:o.toDestination("to").constructChangeEdit(l.contentText),editor:o.editor,originalTarget:o,isSource:!0})}),i}};function B7(t){return t.getRemovalHighlightRange()}var Kl=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e,r){Ar(e);let{returnValue:n}=await this.actions.getText.run(e,{showDecorations:!1}),{thatSelections:i}=await this.actions.wrapWithPairedDelimiter.run(r,n[0]+"(",")");return{thatSelections:i}}};var Ql=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){let r=bt(e),n=e.map(o=>new $e({editor:o.editor,isReversed:o.isReversed,contentRange:o.contentRange})),{thatTargets:i}=await this.actions.remove.run(n);return i!=null&&await k().getEditableTextEditor(r).setSelections(i.map(({contentSelection:o})=>o),{focusEditor:!0}),{thatTargets:i}}};var pc=t=>new Ft({editor:t.editor,isReversed:t.selection.isReversed,contentRange:t.selection,hasExplicitRange:!0});var fc=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e,r){r.showDecorations&&await Ce(k(),e,"referenced"),r.ensureSingleEditor&&bt(e),r.ensureSingleTarget&&Ar(e);let n=k().activeEditableTextEditor,i=r.setSelection?aM:ot,o=rt(await i(e,(s,l)=>this.runForEditor(r,s,l)));return r.setSelection&&r.restoreSelection&&n!=null&&!n.isActive&&await n.focus(),{thatTargets:o}}async runForEditor(e,r,n){let i=k().getEditableTextEditor(r),o=r.selections,s=r.document.version,l=n.map(m=>m.contentSelection);e.setSelection&&await i.setSelections(l,{focusEditor:!0,revealRange:!1});let{originalSelections:u,targetSelections:p}=await De({rangeUpdater:this.rangeUpdater,editor:i,callback:()=>e.callback(i,n),preserveCursorSelections:!0,selections:{originalSelections:o,targetSelections:l}});return e.setSelection&&e.restoreSelection&&await i.setSelections(u),r.document.version===s?n:p.map(m=>pc({editor:r,selection:m}))}};var wt=class{constructor(e){this.ensureSingleEditor=!1;this.ensureSingleTarget=!1;this.restoreSelection=!0;this.showDecorations=!0;this.callbackAction=new fc(e),this.run=this.run.bind(this)}async run(e,{showDecorations:r}={}){let n=k().capabilities.commands[this.command];if(n==null)throw Error(`Action ${this.command} is not supported by your ide`);let{acceptsLocation:i}=n;return this.callbackAction.run(e,{callback:(o,s)=>W7(o,i?s.map(l=>l.contentRange):void 0,this.command),setSelection:!i,ensureSingleEditor:this.ensureSingleEditor,ensureSingleTarget:this.ensureSingleTarget,restoreSelection:this.restoreSelection,showDecorations:r??this.showDecorations})}},Ah=class extends wt{constructor(){super(...arguments);this.command="clipboardCopy";this.ensureSingleEditor=!0}},Mh=class extends wt{constructor(){super(...arguments);this.command="toggleLineComment"}},Dh=class extends wt{constructor(){super(...arguments);this.command="indentLine"}},Fh=class extends wt{constructor(){super(...arguments);this.command="outdentLine"}},Ih=class extends wt{constructor(){super(...arguments);this.command="fold"}},Ch=class extends wt{constructor(){super(...arguments);this.command="unfold"}},Oh=class extends wt{constructor(){super(...arguments);this.command="rename";this.ensureSingleTarget=!0}},Nh=class extends wt{constructor(){super(...arguments);this.command="showReferences";this.ensureSingleTarget=!0}},Lh=class extends wt{constructor(){super(...arguments);this.command="quickFix";this.ensureSingleTarget=!0}},Uh=class extends wt{constructor(){super(...arguments);this.command="revealDefinition";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Hh=class extends wt{constructor(){super(...arguments);this.command="revealTypeDefinition";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Vh=class extends wt{constructor(){super(...arguments);this.command="showHover";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Bh=class extends wt{constructor(){super(...arguments);this.command="showDebugHover";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Wh=class extends wt{constructor(){super(...arguments);this.command="extractVariable";this.ensureSingleTarget=!0;this.restoreSelection=!1}},$h=class extends wt{constructor(){super(...arguments);this.command="gitAccept";this.ensureSingleTarget=!0}},jh=class extends wt{constructor(){super(...arguments);this.command="gitRevert";this.ensureSingleTarget=!0}},qh=class extends wt{constructor(){super(...arguments);this.command="gitStage";this.ensureSingleTarget=!0}},zh=class extends wt{constructor(){super(...arguments);this.command="gitUnstage";this.ensureSingleTarget=!0}};function W7(t,e,r){switch(r){case"toggleLineComment":return t.toggleLineComment(e);case"indentLine":return t.indentLine(e);case"outdentLine":return t.outdentLine(e);case"clipboardCopy":return t.clipboardCopy(e);case"fold":return t.fold(e);case"unfold":return t.unfold(e);case"insertLineAfter":return t.insertLineAfter(e);case"rename":return t.rename(e?.[0]);case"showReferences":return t.showReferences(e?.[0]);case"quickFix":return t.quickFix(e?.[0]);case"revealDefinition":return t.revealDefinition(e?.[0]);case"revealTypeDefinition":return t.revealTypeDefinition(e?.[0]);case"showHover":return t.showHover(e?.[0]);case"showDebugHover":return t.showDebugHover(e?.[0]);case"extractVariable":return t.extractVariable(e?.[0]);case"gitAccept":return t.gitAccept(e?.[0]);case"gitRevert":return t.gitRevert(e?.[0]);case"gitStage":return t.gitStage(e?.[0]);case"gitUnstage":return t.gitUnstage(e?.[0]);case"highlight":throw Error("Highlight command not supported as simple action")}}var Gh=class{constructor(e,r){this.actions=e;this.rangeUpdater=r;this.run=this.run.bind(this)}async run(e,r={showDecorations:!0}){if(k().capabilities.commands.clipboardCopy!=null)return new Ah(this.rangeUpdater).run(e,r);r.showDecorations&&await Ce(k(),e,"referenced");let n=e.map(i=>i.contentText).join(`
`);return await k().clipboard.writeText(n),{thatTargets:e}}};var Kh=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){await k().flashRanges(e.flatMap($7));let r={showDecorations:!1};await this.actions.copyToClipboard.run(e,r);let{thatTargets:n}=await this.actions.remove.run(e,r);return{thatTargets:n}}};function $7(t){let{editor:e,contentRange:r}=t,n=t.getRemovalHighlightRange(),i=[{editor:e,range:lr(r),style:"referenced"}];return n.type==="line"?i.push({editor:e,range:n,style:"pendingDelete"}):i.push(...j7(r,n).map(o=>({editor:e,range:lr(o),style:"pendingDelete"}))),i}function j7(t,e){let{start:r,end:n}=t,{start:i,end:o}=e,s=[];return i.isBefore(r)&&s.push(new q(i,r)),o.isAfter(n)&&s.push(new q(n,o)),s}var Zl=class{constructor(){this.run=this.run.bind(this)}async run(e){return await ot(e,async(r,n)=>{let i=r.selections.filter(o=>!n.some(s=>{let l=s.contentRange.intersection(o);return l&&(!l.isEmpty||o.isEmpty)}));if(i.length===0)throw new cb;await k().getEditableTextEditor(r).setSelections(i)}),{thatTargets:e}}},cb=class extends Error{constructor(){super("Can't deselect every selection. At least one is required"),this.name="SelectionRequiredError"}};async function UF(t,e,r,n){let i=r.destinations.map((b,v)=>{if(n||r.actionTypes[v]==="edit")return{destination:b,index:v}}).filter(b=>!!b);if(i.length===0)return r;let o=i.map(b=>b.destination.constructChangeEdit("")),s=r.cursorRanges.map((b,v)=>({range:b,index:v})).filter(({range:b})=>b!=null),l=s.map(({index:b})=>b),u=s.map(({range:b})=>b),p=o.map(b=>b.range),{thatRanges:m,cursorRanges:d,editRanges:g}=await De({rangeUpdater:t,editor:e,edits:o,preserveCursorSelections:!0,selections:{thatRanges:r.thatRanges,cursorRanges:u,editRanges:{selections:p,behavior:0}}}),x=[...r.cursorRanges];return Rt(l,d).forEach(([b,v])=>{x[b]=v}),i.forEach((b,v)=>{let F=o[v].updateRange(g[v]);x[b.index]=F}),{destinations:r.destinations,actionTypes:r.actionTypes,thatRanges:m,cursorRanges:x}}async function HF({acceptsLocation:t},e,r,n){let i=n.destinations.map((d,g)=>{if(n.actionTypes[g]==="insertLineAfter")return{destination:d,index:g}}).filter(d=>!!d);if(i.length===0)return n;let o=i.map(({destination:d})=>d.contentRange),s=n.destinations.map(({contentRange:d})=>d),l=async()=>{t?await r.insertLineAfter(o):(await r.setSelections(o.map(d=>d.toSelection(!1))),await r.focus(),await r.insertLineAfter())},{targetRanges:u,thatRanges:p}=await De({rangeUpdater:e,editor:r,callback:l,preserveCursorSelections:!0,selections:{targetRanges:s,thatRanges:n.thatRanges}}),m=[...n.cursorRanges];return i.forEach((d,g)=>{m[d.index]=r.selections[g]}),{destinations:n.destinations.map((d,g)=>d.withTarget(d.target.withContentRange(u[g]))),actionTypes:n.actionTypes,thatRanges:p,cursorRanges:m}}async function VF(t,e){let r=Ar(e),n=k().getEditableTextEditor(r.editor),i=r.insertionMode==="before";if(r.insertionMode==="to")throw Error(`Unsupported insertion mode '${r.insertionMode}' for notebookcapell`);return await t.setSelection.run([r.target]),i?await n.editNewNotebookCellAbove():await n.editNewNotebookCellBelow(),{thatSelections:hn([r.target.thatTarget])}}var Qh=class{constructor(e,r){this.rangeUpdater=e;this.actions=r;this.run=this.run.bind(this)}async run(e){if(e.some(({target:l})=>l.isNotebookCell))return VF(this.actions,e);let r=k().getEditableTextEditor(bt(e)),n={destinations:e,actionTypes:e.map(l=>l.getEditNewActionType()),thatRanges:e.map(({target:l})=>l.thatTarget.contentRange),cursorRanges:new Array(e.length).fill(void 0)},i=k().capabilities.commands.insertLineAfter,o=i!=null;o&&(n=await HF(i,this.rangeUpdater,r,n)),n=await UF(this.rangeUpdater,r,n,!o);let s=n.destinations.map((l,u)=>{let p=n.cursorRanges[u];if(p==null)throw Error("Cursor range is undefined for destination");return p.toSelection(l.target.isReversed)});return await r.setSelections(s,{focusEditor:!0}),{thatSelections:hn(n.destinations.map(l=>l.target),n.thatRanges)}}};var Zh=class{constructor(e,r){this.actions=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(ai)]}run(e){return this.actions.editNew.run(e.map(r=>r.toDestination(this.insertionMode)))}},Yh=class extends Zh{constructor(){super(...arguments);this.insertionMode="before"}},Xh=class extends Zh{constructor(){super(...arguments);this.insertionMode="after"}};var Yl=class{constructor(e){this.callbackAction=new fc(e),this.run=this.run.bind(this)}async run(e,r,{commandArgs:n,ensureSingleEditor:i,ensureSingleTarget:o,restoreSelection:s,showDecorations:l}={}){let u=n??[];return this.callbackAction.run(e,{callback:()=>k().executeCommand(r,...u),setSelection:!0,ensureSingleEditor:i??!1,ensureSingleTarget:o??!1,restoreSelection:s??!0,showDecorations:l??!0})}};var Jh=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){Ar(e);let{returnValue:r,thatTargets:n}=await this.actions.getText.run(e),[i]=r,o;return i.length>200?(o=i.substring(0,200),ra(k().messages,"truncatedSearchText","Search text is longer than 200 characters; truncating")):o=i,await this.find(o),{thatTargets:n}}},eg=class extends Jh{find(e){return k().findInDocument(e)}},tg=class extends Jh{find(e){return k().findInWorkspace(e)}};var rg=class{constructor(){this.run=this.run.bind(this)}async run(e){return await Ce(k(),e,"referenced"),{thatTargets:e}}};var mc=class{constructor(e){this.options=e;this.run=this.run.bind(this)}async run(e){let r=Ar(e);return await Ce(k(),e,"referenced"),await k().getEditableTextEditor(r.editor).openLink(r.contentRange,this.options),{thatSelections:hn(e)}}};function BF(t){let e=t.split(/^---$/m),r={snippets:[]};for(let n of e){let i=n.match(/^-$/m),o=i!=null?n.slice(0,i.index):n,s=i!=null?n.slice(i.index+i[0].length):null,l=s?K7(s):null,u=q7(o);if(l!=null){u==null&&(u={variables:[]});let{variables:p,...m}=u;r.snippets.push({...m,body:l,variables:p})}else if(u!=null){if(r.header!=null||r.snippets.length!==0)throw Error("Header snippet must be first in file");r.header=u}}return r}function q7(t){let e={variables:[]},r=z7(t);if(Object.keys(r).length===0)return;let n={};for(let[i,o]of Object.entries(r))switch(i){case"name":e.name=o;break;case"description":e.description=o;break;case"phrase":e.phrases=Xl(o);break;case"insertionScope":e.insertionScopes=Xl(o);break;case"language":e.languages=Xl(o);break;default:if(!i.startsWith("$"))throw Error(`Invalid key '${i}'`);n[i]=o}return e.variables=G7(n),e}function z7(t){let e=t.split(/\r?\n/).map(n=>n.trim()).filter(Boolean),r={};for(let n of e){let i=n.split(":");if(i.length!==2)throw Error(`Invalid line '${n}'`);let o=i[0].trim(),s=i[1].trim();if(o.length===0||s.length===0)throw Error(`Invalid line '${n}'`);if(r[o]!=null)throw Error(`Duplicate key '${o}' in '${t}'`);r[o]=s}return r}function G7(t){let e={},r=n=>(e[n]==null&&(e[n]={name:n}),e[n]);for(let[n,i]of Object.entries(t)){let o=n.split(".");if(o.length!==2)throw Error(`Invalid variable key '${n}'`);let s=o[0].slice(1);switch(o[1]){case"insertionFormatter":r(s).insertionFormatters=Xl(i);break;case"wrapperPhrase":r(s).wrapperPhrases=Xl(i);break;case"wrapperScope":r(s).wrapperScope=i;break;default:throw Error(`Invalid variable key '${n}'`)}}return Object.values(e)}function K7(t){let e=t.match(/^[ \t]*\S/m);if(e?.index!=null)return t.slice(e.index).trimEnd().split(/\r?\n/).map(r=>r.trimEnd())}function Xl(t){return t.split("|").map(e=>e.trim())}function $F(t){let e=[];t.header!=null&&e.push(WF(t.header)),e.push(...t.snippets.map(WF));let r=e.filter(Boolean).join(`
---

`);return r?r+`
---
`:""}function WF(t){let e=[Mo("name",t.name),Mo("description",t.description),Mo("language",t.languages),Mo("phrase",t.phrases),Mo("insertionScope",t.insertionScopes)].filter(Boolean);return t.variables.length>0&&(e.length>0&&e.push(""),e.push(...Q7(t.variables))),"body"in t&&e.push("-",...t.body),e.join(`
`)}function Q7(t){let e=[...t];return e.sort(Z7),e.flatMap(r=>[Mo(`$${r.name}.insertionFormatter`,r.insertionFormatters),Mo(`$${r.name}.wrapperPhrase`,r.wrapperPhrases),Mo(`$${r.name}.wrapperScope`,r.wrapperScope)]).filter(Boolean)}function Mo(t,e){return e==null?"":Array.isArray(e)?`${t}: ${e.join(" | ")}`:`${t}: ${e}`}function Z7(t,e){return t.name==="0"?1:e.name==="0"?-1:t.name.localeCompare(e.name)}function jF(t,e){let r=[],n=0,i=null,[o,...s]=t.split(/\r?\n/);return[{text:e+o,startIndex:e.length},...s.map(u=>({text:u,startIndex:0}))].forEach(({text:u,startIndex:p})=>{let m=u.match(/^\s*/)?.[0]??"",d=m.length;i!=null&&(m.length>i.length?n++:m.length<i.length&&n--),i=m;let g=Math.max(d,p),x=UT("	",n),b=u.slice(g);r.push(x+b)}),r}function qF(t,e){let r=VT(e,o=>o.offsets.start),n="",i=0;for(let o of r)n+=t.slice(i,o.offsets.start)+o.text,i=o.offsets.end;return n+=t.slice(i),n}var dc=class{constructor(e){this.snippets=e;this.run=this.run.bind(this)}async run(e,r,n){if(r==null)throw new Error("Directory argument is required for GenerateSnippet action. Please update Cursorless Talon");let i=Ar(e),o=i.editor;if(Ce(k(),e,"referenced"),n==null&&(n=await k().showInputBox({prompt:"Name of snippet",placeHolder:"helloWorld"}),!n))return{};let s=o.document.offsetAt(i.contentRange.start),l=X7(o,i.contentRange),u=l.map((ae,le)=>({offsets:{start:o.document.offsetAt(ae.start)-s,end:o.document.offsetAt(ae.end)-s},name:le===l.length-1?"0":`${le+1}`})),p=o.document.getText(new q(i.contentRange.start.with(void 0,0),i.contentRange.start)),m=o.document.getText(i.contentRange),d=qF(m,[...fn(m,/\$|\\/g,ae=>({offsets:{start:ae.index,end:ae.index+ae[0].length},text:`\\${ae[0]}`})),...u.map(({offsets:ae,name:le})=>({offsets:ae,text:`$${le}`}))]),g=jF(d,p),x,b={snippets:[]};k().runMode==="test"?x=k().getEditableTextEditor(o):(x=k().getEditableTextEditor(await this.snippets.openNewSnippetFile(n,r)),b=BF(x.document.getText())),await x.setSelections([x.document.range.toSelection(!1)]);let v=1,{header:I}=b,F=b.header?.phrases!=null?void 0:[`${lb}${v++}`],V=ae=>{let le=I?.variables?.some(st=>st.name===ae.name&&st.wrapperPhrases!=null);return{name:ae.name,wrapperPhrases:le?void 0:[`${lb}${v++}`]}},Z={name:I?.name===n?void 0:n,phrases:F,languages:Y7(o,I),body:g,variables:u.map(V)};b.snippets.push(Z);let oe=$F(b).replace(/\$/g,"\\$").replaceAll(lb,"$");return await x.insertSnippet(oe),{thatSelections:e.map(({editor:ae,contentSelection:le})=>({editor:ae,selection:le}))}}};function Y7(t,e){if(!e?.languages?.includes(t.document.languageId))return[t.document.languageId]}function X7(t,e){let r=t.selections.filter(n=>e.contains(n));return r.sort((n,i)=>n.start.compareTo(i.start)),r}var lb="PLACEHOLDER_VFA77zcbLD6wXNmfMAay";var Jl=class{constructor(){this.run=this.run.bind(this)}async run(e){return{returnValue:e.map(({contentRange:r})=>({contentRange:r})),thatTargets:e}}};var eu=class{constructor(){this.run=this.run.bind(this)}async run(e,{showDecorations:r=!0,ensureSingleTarget:n=!1}={}){return r&&await Ce(k(),e,"referenced"),n&&Ar(e),{returnValue:e.map(i=>i.contentText),thatTargets:e}}};var tu=class{constructor(){this.run=this.run.bind(this)}async run(e,r){if(k().capabilities.commands.highlight==null)throw Error("The highlight action is not supported by your ide");return e.length===0?await Promise.all(k().visibleTextEditors.map(n=>k().setHighlightRanges(r,n,[]))):await ot(e,(n,i)=>k().setHighlightRanges(r,n,i.map(o=>gn(o,o.contentRange)))),{thatTargets:e}}};var ng=class{constructor(e,r){this.rangeUpdater=e;this.isIndent=r;this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e){return this.hasCapability()?this.runSimpleCommandAction(e):(await Ce(k(),e,"pendingModification0"),{thatTargets:rt(await ot(e,this.runForEditor))})}hasCapability(){return this.isIndent?k().capabilities.commands.indentLine!=null:k().capabilities.commands.outdentLine!=null}runSimpleCommandAction(e){return(this.isIndent?new Dh(this.rangeUpdater):new Fh(this.rangeUpdater)).run(e)}async runForEditor(e,r){let n=this.isIndent?J7(e,r):eZ(e,r),{targetSelections:i}=await De({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(e),edits:n,selections:{targetSelections:r.map(({contentSelection:o})=>o)}});return Rt(r,i).map(([o,s])=>pc({editor:e,selection:s.toSelection(o.isReversed)}))}},ig=class extends ng{constructor(e){super(e,!0)}},og=class extends ng{constructor(e){super(e,!1)}};function J7(t,e){let{document:r}=t,n=zF(e),i=tZ(t);return n.map(o=>({range:r.lineAt(o).range.start.toEmptyRange(),text:i}))}function eZ(t,e){let{document:r}=t,n=zF(e),i=rZ(t);return n.map(o=>{let s=r.lineAt(o),l=s.text.match(i),{start:u}=s.range,p=u.translate(void 0,l?.[0].length);return{range:new q(u,p),text:""}})}function zF(t){let e=new Set;for(let r of t){let{start:n,end:i}=r.contentRange;for(let o=n.line;o<=i.line;++o)e.add(o)}return[...e]}function tZ(t){if(t.options.insertSpaces){let e=GF(t);return" ".repeat(e)}return"	"}function rZ(t){if(t.options.insertSpaces){let e=GF(t);return new RegExp(`^[ ]{1,${e}}`)}return/^\t/}function GF(t){return typeof t.options.tabSize=="number"?t.options.tabSize:4}var ag=class{constructor(e,r,n){this.rangeUpdater=e;this.modifierStageFactory=r;this.isBefore=n;this.getFinalStages=()=>[this.modifierStageFactory.create(ai)];this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e){let r=rt(await ot(e,this.runForEditor));return await k().flashRanges(r.flatMap(n=>n.thatMark.map(i=>({editor:i.editor,range:lr(i.selection),style:"justAdded"})))),{sourceSelections:r.flatMap(({sourceMark:n})=>n),thatSelections:r.flatMap(({thatMark:n})=>n)}}async runForEditor(e,r){let n=this.isBefore?"after":"before",i=r.flatMap(g=>g.toDestination(n).constructChangeEdit(g.contentText)),o=r.map(({contentSelection:g})=>g),s=i.map(({range:g})=>g),l=k().getEditableTextEditor(e),{contentSelections:u,editRanges:p}=await De({rangeUpdater:this.rangeUpdater,editor:l,edits:i,selections:{contentSelections:o,editRanges:{selections:s,behavior:0}}}),m=Rt(i,p).map(([g,x])=>g.updateRange(x)),d=e.selections[0];return u.some(g=>g.intersection(d)!=null)&&await l.revealRange(d),{sourceMark:hn(r,m),thatMark:hn(r,u)}}},sg=class extends ag{constructor(e,r){super(e,r,!0)}},cg=class extends ag{constructor(e,r){super(e,r,!1)}};var ru=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(ai)]}async run(e){let r=await ot(e,async(i,o)=>{let s=this.getEdits(o),l=o.map(m=>m.thatTarget.contentSelection),{contentSelections:u,editRanges:p}=await De({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(i),edits:s,selections:{contentSelections:l,editRanges:{selections:s.map(m=>m.range),behavior:0}}});return{thatMark:u.map(m=>({editor:i,selection:m})),flashRanges:sa(s,p).map(([m,d])=>({editor:i,range:m.isLine?m.updateRange(d):d,isLine:m.isLine}))}});return await k().flashRanges(r.flatMap(i=>i.flashRanges.map(({editor:o,range:s,isLine:l})=>({editor:o,range:l?jr(s):lr(s),style:"justAdded"})))),{thatSelections:r.flatMap(i=>i.thatMark)}}},lg=class extends ru{constructor(e,r){super(e,r)}getEdits(e){return e.flatMap(r=>[fg(r,"before"),fg(r,"after")])}},ug=class extends ru{constructor(e,r){super(e,r)}getEdits(e){return e.map(r=>fg(r,"before"))}},pg=class extends ru{constructor(e,r){super(e,r)}getEdits(e){return e.map(r=>fg(r,"after"))}};function fg(t,e){return{...t.toDestination(e).constructChangeEdit("",!0),isLine:t.textualType==="line"}}function QF(t,e){return nZ(KF(t),KF(e))}function KF(t){if(t.languages!=null)return{langIds:t.languages}}function nZ(t,e){if(t==null&&e==null)return 0;if(t==null)return-1;if(e==null)return 1;if(t.langIds==null&&e.langIds!=null)return-1;if(e.langIds==null&&t.langIds!=null)return 1;let r=iZ(t.scopeTypes,e.scopeTypes);return r!==0?r:t.langIds==null?0:e.langIds.length-t.langIds.length}function iZ(t,e){return t==null&&e!=null?-1:e==null&&t!=null?1:0}function hc(t,e){if(t.type==="named")throw new Error("Cursorless snippets are deprecated. Please use community snippets. Update to latest cursorless-talon and say 'cursorless migrate snippets'.");if(t.type==="custom")return t;let r=aZ(t.snippets,e);r.sort(QF);let n=r[0];if(n==null){let i=oZ(t.snippets);throw new Error(`No snippet available for language '${e}'. Available languages: ${i}`)}return n}function oZ(t){let e=new Set(t.flatMap(r=>r.languages??[]));return Array.from(e).sort().join(", ")}function aZ(t,e){return t.filter(r=>r.languages==null?!0:r.languages.includes(e))}var ub=class t{constructor(){this.value="";this.pos=0}static{this._table={36:0,58:1,44:2,123:3,125:4,92:5,47:6,124:7,43:11,45:12,63:13}}static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return e===95||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};let e=this.pos,r=0,n=this.value.charCodeAt(e),i;if(i=t._table[n],typeof i=="number")return this.pos+=1,{type:i,pos:e,len:1};if(t.isDigitCharacter(n)){i=8;do r+=1,n=this.value.charCodeAt(e+r);while(t.isDigitCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}if(t.isVariableCharacter(n)){i=9;do n=this.value.charCodeAt(e+ ++r);while(t.isVariableCharacter(n)||t.isDigitCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}i=10;do r+=1,n=this.value.charCodeAt(e+r);while(!isNaN(n)&&typeof t._table[n]>"u"&&!t.isDigitCharacter(n)&&!t.isVariableCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}},Do=class{constructor(){this._children=[]}appendChild(e){return e instanceof $t&&this._children[this._children.length-1]instanceof $t?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,r){let{parent:n}=e,i=n.children.indexOf(e),o=n.children.slice(0);o.splice(i,1,...r),n._children=o,function s(l,u){for(let p of l)p.parent=u,s(p.children,p)}(r,n)}get children(){return this._children}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof hg)return e;e=e.parent}}toString(){return this.children.reduce((e,r)=>e+r.toString(),"")}len(){return 0}},$t=class t extends Do{constructor(r){super();this.value=r}static escape(r){return r.replace(/\$|}|\\/g,"\\$&")}toString(){return this.value}toTextmateString(){return t.escape(this.value)}len(){return this.value.length}clone(){return new t(this.value)}},mg=class extends Do{},jt=class t extends mg{constructor(r){super();this.index=r}static compareByIndex(r,n){return r.index===n.index?0:r.isFinalTabstop?1:n.isFinalTabstop||r.index<n.index?-1:r.index>n.index?1:0}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof dg?this._children[0]:void 0}toTextmateString(){let r="";return this.transform&&(r=this.transform.toTextmateString()),this.children.length===0&&!this.transform?`$${this.index}`:this.children.length===0?`\${${this.index}${r}}`:this.choice?`\${${this.index}|${this.choice.toTextmateString()}|${r}}`:`\${${this.index}:${this.children.map(n=>n.toTextmateString()).join("")}${r}}`}clone(){let r=new t(this.index);return this.transform&&(r.transform=this.transform.clone()),r._children=this.children.map(n=>n.clone()),r}},dg=class t extends Do{constructor(){super(...arguments);this.options=[]}appendChild(r){return r instanceof $t&&(r.parent=this,this.options.push(r)),this}toString(){return this.options[0].value}toTextmateString(){return this.options.map(r=>r.value.replace(/\||,|\\/g,"\\$&")).join(",")}len(){return this.options[0].len()}clone(){let r=new t;return this.options.forEach(r.appendChild,r),r}},pb=class t extends Do{constructor(){super(...arguments);this.regexp=new RegExp("")}resolve(r){let n=this,i=!1,o=r.replace(this.regexp,function(){return i=!0,n._replace(Array.prototype.slice.call(arguments,0,-2))});return!i&&this._children.some(s=>s instanceof Hn&&!!s.elseValue)&&(o=this._replace([])),o}_replace(r){let n="";for(let i of this._children)if(i instanceof Hn){let o=r[i.index]||"";o=i.resolve(o),n+=o}else n+=i.toString();return n}toString(){return""}toTextmateString(){return`/${this.regexp.source}/${this.children.map(r=>r.toTextmateString())}/${(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")}`}clone(){let r=new t;return r.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),r._children=this.children.map(n=>n.clone()),r}},Hn=class t extends Do{constructor(r,n,i,o){super();this.index=r;this.shorthandName=n;this.ifValue=i;this.elseValue=o}resolve(r){return this.shorthandName==="upcase"?r?r.toLocaleUpperCase():"":this.shorthandName==="downcase"?r?r.toLocaleLowerCase():"":this.shorthandName==="capitalize"?r?r[0].toLocaleUpperCase()+r.substr(1):"":this.shorthandName==="pascalcase"?r?this._toPascalCase(r):"":this.shorthandName==="camelcase"?r?this._toCamelCase(r):"":r&&typeof this.ifValue=="string"?this.ifValue:!r&&typeof this.elseValue=="string"?this.elseValue:r||""}_toPascalCase(r){let n=r.match(/[a-z0-9]+/gi);return n?n.map(i=>i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()).join(""):r}_toCamelCase(r){let n=r.match(/[a-z0-9]+/gi);return n?n.map((i,o)=>o===0?i.toLowerCase():i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()).join(""):r}toTextmateString(){let r="${";return r+=this.index,this.shorthandName?r+=`:/${this.shorthandName}`:this.ifValue&&this.elseValue?r+=`:?${this.ifValue}:${this.elseValue}`:this.ifValue?r+=`:+${this.ifValue}`:this.elseValue&&(r+=`:-${this.elseValue}`),r+="}",r}clone(){return new t(this.index,this.shorthandName,this.ifValue,this.elseValue)}},Vn=class t extends mg{constructor(r){super();this.name=r}resolve(r){let n=r.resolve(this);return this.transform&&(n=this.transform.resolve(n||"")),n!==void 0?(this._children=[new $t(n)],!0):!1}toTextmateString(){let r="";return this.transform&&(r=this.transform.toTextmateString()),this.children.length===0?`\${${this.name}${r}}`:`\${${this.name}:${this.children.map(n=>n.toTextmateString()).join("")}${r}}`}clone(){let r=new t(this.name);return this.transform&&(r.transform=this.transform.clone()),r._children=this.children.map(n=>n.clone()),r}};function ZF(t,e){let r=[...t];for(;r.length>0;){let n=r.shift();if(!e(n))break;r.unshift(...n.children)}}var hg=class t extends Do{get placeholderInfo(){if(!this._placeholders){let e=[],r;this.walk(function(n){return n instanceof jt&&(e.push(n),r=!r||r.index<n.index?n:r),!0}),this._placeholders={all:e,last:r}}return this._placeholders}get placeholders(){let{all:e}=this.placeholderInfo;return e}offset(e){let r=0,n=!1;return this.walk(i=>i===e?(n=!0,!1):(r+=i.len(),!0)),n?r:-1}fullLen(e){let r=0;return ZF([e],n=>(r+=n.len(),!0)),r}enclosingPlaceholders(e){let r=[],{parent:n}=e;for(;n;)n instanceof jt&&r.push(n),n=n.parent;return r}resolveVariables(e){return this.walk(r=>(r instanceof Vn&&r.resolve(e)&&(this._placeholders=void 0),!0)),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,r){return this._placeholders=void 0,super.replace(e,r)}toTextmateString(){return this.children.reduce((e,r)=>e+r.toTextmateString(),"")}clone(){let e=new t;return this._children=this.children.map(r=>r.clone()),e}walk(e){ZF(this.children,e)}},li=class{constructor(){this._scanner=new ub;this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}text(e){return this.parse(e).toString()}parse(e,r,n){this._scanner.text(e),this._token=this._scanner.next();let i=new hg;for(;this._parse(i););let o=new Map,s=[],l=0;i.walk(u=>(u instanceof jt&&(l+=1,u.isFinalTabstop?o.set(0,void 0):!o.has(u.index)&&u.children.length>0?o.set(u.index,u.children):s.push(u)),!0));for(let u of s){let p=o.get(u.index);if(p){let m=new jt(u.index);m.transform=u.transform;for(let d of p)m.appendChild(d.clone());i.replace(u,[m])}}return n||(n=l>0&&r),!o.has(0)&&n&&i.appendChild(new jt(0)),i}_accept(e,r){if(e===void 0||this._token.type===e){let n=r?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),n}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){let r=this._token;for(;this._token.type!==e;){if(this._token.type===14)return!1;if(this._token.type===5){let i=this._scanner.next();if(i.type!==0&&i.type!==4&&i.type!==5)return!1}this._token=this._scanner.next()}let n=this._scanner.value.substring(r.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),n}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let r;return(r=this._accept(5,!0))?(r=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||r,e.appendChild(new $t(r)),!0):!1}_parseTabstopOrVariableName(e){let r,n=this._token;return this._accept(0)&&(r=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(r)?new jt(Number(r)):new Vn(r)),!0):this._backTo(n)}_parseComplexPlaceholder(e){let r,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(r=this._accept(8,!0))))return this._backTo(n);let o=new jt(Number(r));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new $t("${"+r+":")),o.children.forEach(e.appendChild,e),!0}else if(o.index>0&&this._accept(7)){let s=new dg;for(;;){if(this._parseChoiceElement(s)){if(this._accept(2))continue;if(this._accept(7)&&(o.appendChild(s),this._accept(4)))return e.appendChild(o),!0}return this._backTo(n),!1}}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseChoiceElement(e){let r=this._token,n=[];for(;!(this._token.type===2||this._token.type===7);){let i;if((i=this._accept(5,!0))?i=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||i:i=this._accept(void 0,!0),!i)return this._backTo(r),!1;n.push(i)}return n.length===0?(this._backTo(r),!1):(e.appendChild(new $t(n.join(""))),!0)}_parseComplexVariable(e){let r,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(r=this._accept(9,!0))))return this._backTo(n);let o=new Vn(r);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new $t("${"+r+":")),o.children.forEach(e.appendChild,e),!0}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseTransform(e){let r=new pb,n="",i="";for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(6,!0)||o,n+=o;continue}if(this._token.type!==14){n+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(5,!0)||this._accept(6,!0)||o,r.appendChild(new $t(o));continue}if(!(this._parseFormatString(r)||this._parseAnything(r)))return!1}for(;!this._accept(4);){if(this._token.type!==14){i+=this._accept(void 0,!0);continue}return!1}try{r.regexp=new RegExp(n,i)}catch{return!1}return e.transform=r,!0}_parseFormatString(e){let r=this._token;if(!this._accept(0))return!1;let n=!1;this._accept(3)&&(n=!0);let i=this._accept(8,!0);if(i)if(n){if(this._accept(4))return e.appendChild(new Hn(Number(i))),!0;if(!this._accept(1))return this._backTo(r),!1}else return e.appendChild(new Hn(Number(i))),!0;else return this._backTo(r),!1;if(this._accept(6)){let o=this._accept(9,!0);return!o||!this._accept(4)?(this._backTo(r),!1):(e.appendChild(new Hn(Number(i),o)),!0)}else if(this._accept(11)){let o=this._until(4);if(o)return e.appendChild(new Hn(Number(i),void 0,o,void 0)),!0}else if(this._accept(12)){let o=this._until(4);if(o)return e.appendChild(new Hn(Number(i),void 0,void 0,o)),!0}else if(this._accept(13)){let o=this._until(1);if(o){let s=this._until(4);if(s)return e.appendChild(new Hn(Number(i),void 0,o,s)),!0}}else{let o=this._until(4);if(o)return e.appendChild(new Hn(Number(i),void 0,void 0,o)),!0}return this._backTo(r),!1}_parseAnything(e){return this._token.type!==14?(e.appendChild(new $t(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}};var gg=Object.freeze({CURRENT_YEAR:!0,CURRENT_YEAR_SHORT:!0,CURRENT_MONTH:!0,CURRENT_DATE:!0,CURRENT_HOUR:!0,CURRENT_MINUTE:!0,CURRENT_SECOND:!0,CURRENT_DAY_NAME:!0,CURRENT_DAY_NAME_SHORT:!0,CURRENT_MONTH_NAME:!0,CURRENT_MONTH_NAME_SHORT:!0,CURRENT_SECONDS_UNIX:!0,SELECTION:!0,CLIPBOARD:!0,TM_SELECTED_TEXT:!0,TM_CURRENT_LINE:!0,TM_CURRENT_WORD:!0,TM_LINE_INDEX:!0,TM_LINE_NUMBER:!0,TM_FILENAME:!0,TM_FILENAME_BASE:!0,TM_DIRECTORY:!0,TM_FILEPATH:!0,RELATIVE_FILEPATH:!0,BLOCK_COMMENT_START:!0,BLOCK_COMMENT_END:!0,LINE_COMMENT:!0,WORKSPACE_NAME:!0,WORKSPACE_FOLDER:!0,RANDOM:!0,RANDOM_HEX:!0,UUID:!0});function yg(t,e,r){let n=sZ(t)+1,i={};t.walk(o=>{if(o instanceof Vn){if(o.name===e)o.name="TM_SELECTED_TEXT";else if(r!=null&&Object.prototype.hasOwnProperty.call(r,o.name))o.parent.replace(o,[new $t(r[o.name])]);else if(!gg[o.name]){let s;o.name in i?s=i[o.name]:(s=n++,i[o.name]=s);let l=new jt(s);o.children.forEach(u=>l.appendChild(u)),o.parent.replace(o,[l])}}else o instanceof jt&&(o.index.toString()===e?o.parent.replace(o,[new Vn("TM_SELECTED_TEXT")]):r!=null&&Object.prototype.hasOwnProperty.call(r,o.index)&&o.parent.replace(o,[new $t(r[o.index])]));return!0})}function sZ(t){let e=0;return t.walk(r=>(r instanceof jt&&(e=Math.max(e,r.index)),!0)),e}function xg(t,e,r){let n=cZ(t)+1,i={};t.walk(o=>{if(o instanceof Vn){if(o.name===e)o.name="TM_SELECTED_TEXT";else if(r!=null&&Object.prototype.hasOwnProperty.call(r,o.name))o.parent.replace(o,[new $t(r[o.name])]);else if(!gg[o.name]){let s;o.name in i?s=i[o.name]:(s=n++,i[o.name]=s);let l=new jt(s);o.children.forEach(u=>l.appendChild(u)),o.parent.replace(o,[l])}}else o instanceof jt&&o.index.toString()===e&&o.parent.replace(o,[new Vn("TM_SELECTED_TEXT")]);return!0})}function cZ(t){let e=0;return t.walk(r=>(r instanceof jt&&(e=Math.max(e,r.index)),!0)),e}function Tg(t,e,r){let n=e.map(o=>lZ(t,o,r)),i=n[0];if(!n.every(o=>o===i))throw new Error("Multiple snippet definitions match the given context");if(i===-1)throw new Error("Couldn't find matching snippet definition");return r[i]}function lZ(t,e,r){let n=e.editor.document.languageId,i={multipleTargets:!1};return r.findIndex(({scope:o})=>{if(o==null)return!0;let{langIds:s,scopeTypes:l,excludeDescendantScopeTypes:u}=o;if(s!=null&&!s.includes(n))return!1;if(l!=null){let p=l.concat(u??[]),m,d;for(let g of p)try{let x=t.create({type:"containingScope",scopeType:{type:g}}).run(e,i)[0];e.contentRange.isRangeEqual(x.contentRange)&&(x=t.create({type:"containingScope",scopeType:{type:g},ancestorIndex:1}).run(e,i)[0]),(m==null||m.contentRange.contains(x.contentRange))&&(m=x,d=g)}catch{continue}return d==null?!1:m!=null&&!(u??[]).includes(d)}return!0})}var YF=!1;function Sg(){YF||(ra(k().messages,"legacySnippets","Talon community snippets are now fully supported in Cursorless! Cursorless's experimental snippets are now deprecated, but in most cases we can help you migrate automatically. Update cursorless-talon and say 'cursorless migrate snippets'."),YF=!0)}var JF={camelCase(t){if(t.length===0)return"";let[e,...r]=t;return e+r.map(XF).join("")},snakeCase(t){return t.join("_")},upperSnakeCase(t){return t.map(e=>e.toUpperCase()).join("_")},pascalCase(t){return t.map(XF).join("")}};function XF(t){return t.length===0?"":t[0].toUpperCase()+t.substr(1)}var nu=class{constructor(e,r,n,i){this.rangeUpdater=e;this.snippets=r;this.actions=n;this.modifierStageFactory=i;this.snippetParser=new li;this.run=this.run.bind(this)}getFinalStages(e){let r=this.getScopeTypes(e);return r.length===0?[]:[new rc(this.modifierStageFactory,{type:"cascading",modifiers:r.map(n=>({type:"containingScope",scopeType:n}))})]}getScopeTypes(e){let{name:r}=e,i=this.snippets.getSnippetStrict(r).insertionScopeTypes;return i==null?[]:i.map(o=>({type:o}))}getSnippetInfo(e,r){let{name:n}=e,i=this.snippets.getSnippetStrict(n),o=Tg(this.modifierStageFactory,r,i.definitions);return{body:o.body.join(`
`),formatSubstitutions(s){return s==null?void 0:uZ(i,o,s)}}}async run(e,r){Sg();let n=k().getEditableTextEditor(bt(e));await this.actions.editNew.run(e);let{body:i,formatSubstitutions:o}=this.getSnippetInfo(r,n.selections.map(p=>new Ft({editor:n,contentRange:p,isReversed:!1,hasExplicitRange:!0}))),s=this.snippetParser.parse(i);xg(s,null,o(r.substitutions));let l=s.toTextmateString(),{editorSelections:u}=await De({rangeUpdater:this.rangeUpdater,editor:n,callback:()=>n.insertSnippet(l),preserveCursorSelections:!0,selections:{editorSelections:{selections:n.selections,behavior:0}}});return{thatSelections:u.map(p=>({editor:n,selection:p}))}}};function uZ(t,e,r){return Object.fromEntries(Object.entries(r).map(([n,i])=>{let o=(e.variables??{})[n]?.formatter??(t.variables??{})[n]?.formatter;if(o==null)return[n,i];let s=JF[o];if(s==null)throw new Error(`Couldn't find formatter ${o} for variable ${n}`);return[n,s(i.split(" "))]}))}var iu=class{constructor(e,r,n,i){this.rangeUpdater=e;this.snippets=r;this.actions=n;this.modifierStageFactory=i;this.snippetParser=new li;this.run=this.run.bind(this)}getFinalStages(e,r){if(r.type==="named")return this.legacy().getFinalStages(r);let n=bt(e),o=hc(r,n.document.languageId).scopeTypes??[];return o.length===0?[]:[new rc(this.modifierStageFactory,{type:"cascading",modifiers:o.map(s=>({type:"containingScope",scopeType:s}))})]}async run(e,r){if(r.type==="named")return this.legacy().run(e,r);let n=k().getEditableTextEditor(bt(e)),i=hc(r,n.document.languageId),o=this.snippetParser.parse(i.body),s=i.substitutions??r.substitutions;yg(o,null,s);let l=o.toTextmateString();await this.actions.editNew.run(e);let{editorSelections:u}=await De({rangeUpdater:this.rangeUpdater,editor:n,callback:()=>n.insertSnippet(l),preserveCursorSelections:!0,selections:{editorSelections:{selections:n.selections,behavior:0}}});return{thatSelections:u.map(p=>({editor:n,selection:p}))}}legacy(){return new nu(this.rangeUpdater,this.snippets,this.actions,this.modifierStageFactory)}};var ou=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(ai)]}async run(e){return await Ce(k(),e.map(({thatTarget:n})=>n),"pendingModification0"),{thatSelections:rt(await ot(e,async(n,i)=>{let{thatRanges:o}=await De({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(n),edits:pZ(n,i),selections:{thatRanges:i.map(({contentRange:s})=>s)}});return sa(i,o).map(([s,l])=>({editor:n,selection:l.toSelection(s.isReversed)}))}))}}};function pZ(t,e){let r=[];for(let n of e){let i=n.textualType==="token"?fZ(n):mZ(n);r.push(...i)}return r}function fZ(t){let{editor:e,contentRange:r}=t,n=Mr(e.document.languageId).tokenMatcher,i=xn(n,e,r,"forward");return Array.from(sv(i)).map(([o,s])=>({range:new q(o.end,s.start),text:"",isReplace:!0}))}function mZ(t){let{document:e}=t.editor,r=t.contentRange,n=r.start.line,i=r.isSingleLine?Math.min(n+1,e.lineCount-1):r.end.line,o=Us(jM(n,i+1),s=>e.lineAt(s));return Array.from(sv(o)).map(([s,l])=>({range:new q(s.rangeTrimmed?.end??s.range.end,l.rangeTrimmed?.start??l.range.start),text:l.isEmptyOrWhitespace?"":" ",isReplace:!0}))}var vg=class{constructor(e,r){this.rangeUpdater=e;this.actions=r;this.run=this.run.bind(this)}async run(e){let r=k().getEditableTextEditor(bt(e)),n=k().activeEditableTextEditor,i=async()=>{await this.actions.editNew.run(e)},{cursorSelections:o}=await De({rangeUpdater:this.rangeUpdater,editor:r,preserveCursorSelections:!0,callback:i,selections:{cursorSelections:r.selections}}),{originalCursorSelections:s,editorSelections:l}=await De({rangeUpdater:this.rangeUpdater,editor:r,callback:()=>r.clipboardPaste(),selections:{originalCursorSelections:o,editorSelections:{selections:r.selections,behavior:0}}});return await r.setSelections(s),n!=null&&!n.isActive&&await n.focus(),await k().flashRanges(l.map(u=>({editor:r,range:lr(u),style:"justAdded"}))),{thatSelections:l.map(u=>({editor:r,selection:u}))}}};var bg=class{constructor(e){this.rangeUpdater=e;this.runForEditor=this.runForEditor.bind(this)}async run(e){let r=await k().clipboard.readText(),n=r.split(/\r?\n/g),i=e.length===n.length?sa(e,n).map(([s,l])=>({destination:s,text:l})):e.map(s=>({destination:s,text:r}));return{thatSelections:rt(await Ni(i,({destination:s})=>s.editor,this.runForEditor))}}async runForEditor(e,r){let n=r.map(({destination:s,text:l})=>s.constructChangeEdit(l)),{editSelections:i}=await De({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(e),edits:n,selections:{editSelections:{selections:n.map(({range:s})=>s),behavior:0}}}),o=sa(n,i).map(([s,l])=>s.updateRange(l).toSelection(l.isReversed));return await k().flashRanges(o.map(s=>({editor:e,range:lr(s),style:"justAdded"}))),o.map(s=>({editor:e,selection:s}))}};var wg=class{constructor(e,r){this.run=this.run.bind(this),this.runner=k().capabilities.commands.clipboardPaste!=null?new vg(e,r):new bg(e)}run(e){return this.runner.run(e)}};var au=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e,{showDecorations:r=!0}={}){return e=Eh(e),r&&await Ce(k(),e,"pendingDelete",i=>i.getRemovalHighlightRange()),{thatTargets:rt(await ot(e,this.runForEditor))}}async runForEditor(e,r){let n=r.map(s=>s.constructRemovalEdit()),i=k().getEditableTextEditor(e),{editRanges:o}=await De({rangeUpdater:this.rangeUpdater,editor:i,edits:n,selections:{editRanges:n.map(({range:s})=>s)}});return Rt(r,o).map(([s,l])=>new xo({editor:s.editor,isReversed:s.isReversed,contentRange:l}))}};var su=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}getTexts(e,r){if(Array.isArray(r))return r.length===1?Array(e.length).fill(r[0]):r;let n=[];for(let i=0;i<e.length;++i)n[i]=(r.start+i).toString();return n}async run(e,r){await Ce(k(),e.map(l=>l.target),"pendingModification0");let n=this.getTexts(e,r);if(e.length!==n.length)throw new Error("Targets and texts must have same length");let i=Rt(e,n).map(([l,u])=>({editor:l.editor,target:l.target,edit:l.constructChangeEdit(u)})),o=[],s=[];return await Ni(i,l=>l.editor,async(l,u)=>{let p=u.map(({edit:g})=>g),{contentSelections:m,editRanges:d}=await De({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(l),edits:p,selections:{contentSelections:u.map(({target:g})=>g.contentSelection),editRanges:{selections:p.map(({range:g})=>g),behavior:0}}});for(let[g,x]of Rt(u,m))o.push(g.target.withContentRange(x));for(let[g,x]of Rt(u,d))s.push({editor:l,selection:g.edit.updateRange(x).toSelection(!1)})}),{sourceTargets:o,thatSelections:s}}};var cu=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.getFinalStages=()=>[eb(this.modifierStageFactory)];this.run=this.run.bind(this)}async run(e,r,n){let i=e.flatMap(s=>{let l=s.getBoundary();if(l.length!==2)throw Error("Target must have an opening and closing delimiter");return l});await Ce(k(),i,"pendingModification0");let o=await ot(i,async(s,l)=>{let u=l.map((d,g)=>({editor:s,range:d.contentRange,text:g%2===0?r:n})),{sourceRanges:p,thatRanges:m}=await De({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(s),edits:u,selections:{sourceRanges:e.map(d=>d.thatTarget.contentRange),thatRanges:e.map(d=>d.contentRange)}});return{sourceMark:hn(e,p),thatMark:hn(e,m)}});return{sourceSelections:o.flatMap(({sourceMark:s})=>s),thatSelections:o.flatMap(({thatMark:s})=>s)}}};var lu=class{constructor(e){this.at=e;this.run=this.run.bind(this)}async run(e){let r=Tl(e,s=>s.editor),n=Array.from(r,([s,l])=>({lineNumber:dZ(l,this.at),editor:s})),i=k().activeEditableTextEditor;for(let s of n)await k().getEditableTextEditor(s.editor).revealLine(s.lineNumber,this.at);i!=null&&!i.isActive&&await i.focus();let o=e.filter(s=>{let l=s.editor.visibleRanges,u=l[0].start.line,p=l[l.length-1].end.line;return s.contentRange.start.line>u||s.contentRange.end.line<p||s.contentRange.start.line===u&&s.contentRange.end.line===p});return await k().flashRanges(o.map(s=>({editor:s.editor,range:jr(s.contentRange),style:"referenced"}))),{thatTargets:e}}},_g=class extends lu{constructor(){super("top")}},Eg=class extends lu{constructor(){super("center")}},Rg=class extends lu{constructor(){super("bottom")}};function dZ(t,e){let r=Number.MAX_SAFE_INTEGER,n=0;return t.forEach(i=>{r=Math.min(r,i.contentRange.start.line),n=Math.max(n,i.contentRange.end.line)}),e==="top"?r:e==="bottom"?n:Math.floor((r+n)/2)}var Fo=class{constructor(e,r){this.selectionMode=e;this.rangeMode=r;this.run=this.run.bind(this)}async run(e){let r=bt(e),n=this.getSelections(e),i=this.selectionMode==="add"?r.selections.concat(n):n,o=this.selectionMode==="set"&&i.length===1&&i[0].isEmpty;return await k().getEditableTextEditor(r).setSelections(i,{focusEditor:!0,highlightWord:o}),{thatTargets:e}}getSelections(e){switch(this.rangeMode){case"content":return e.map(r=>r.contentSelection);case"before":return e.map(r=>new Re(r.contentRange.start,r.contentRange.start));case"after":return e.map(r=>new Re(r.contentRange.end,r.contentRange.end))}}},kg=class extends Fo{constructor(){super("set","content")}},Pg=class extends Fo{constructor(){super("set","before")}},Ag=class extends Fo{constructor(){super("set","after")}},Mg=class extends Fo{constructor(){super("add","content")}},Dg=class extends Fo{constructor(){super("add","before")}},Fg=class extends Fo{constructor(){super("add","after")}};var uu=class{constructor(e){this.key=e;this.noAutomaticTokenExpansion=!0;this.run=this.run.bind(this)}async run(e){return{thatTargets:e,[`${this.key}Targets`]:e}}};var pu=class{constructor(e){this.treeSitter=e;this.run=this.run.bind(this)}async run(e){await Ce(k(),e,"referenced");let r=["# Cursorless parse tree"];for(let n of e){let{editor:i,contentRange:o}=n,s=this.treeSitter.getTree(i.document);r.push(hZ(i.document,s,o))}return k().openUntitledTextDocument({language:"markdown",content:r.join(`

`)}),{thatTargets:e}}};function hZ(t,e,r){let n=[],i=[];return eI(n,i,r,e.walk(),0),[`## ${t.filename} [${r}]
`,`\`\`\`${t.languageId}`,t.getText(r),"```","","```scm",...i,"```","","```js",...n,"```",""].join(`
`)}function eI(t,e,r,n,i){for(;;){let o=new q(n.startPosition.row,n.startPosition.column,n.endPosition.row,n.endPosition.column);if(r.intersection(o)!=null){let s="  ".repeat(i),l=gZ(n),u=s+l;if(n.nodeIsNamed)t.push(`${u}${n.nodeType} [${o}]`),e.push(`${u}(${n.nodeType}`),n.gotoFirstChild()?(eI(t,e,r,n,i+1),n.gotoParent(),e.push(`${s})`)):e[e.length-1]+=")";else{let p=`"${n.nodeType}"`;t.push(`${u}${p} [${o}]`),e.push(`${u}${p}`)}}if(!n.gotoNextSibling())return}}function gZ(t){let e=t.currentFieldName;return e!=null?`${e}: `:""}var fu=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){e.length<2&&ra(k().messages,"tooFewTargets",'This action works on multiple targets, e.g. "sort every line block" instead of "sort block".');let r=e.slice().sort((s,l)=>s.contentRange.start.compareTo(l.contentRange.start)),{returnValue:n}=await this.actions.getText.run(r,{showDecorations:!1}),i=this.sortTexts(n),{thatSelections:o}=await this.actions.replace.run(r.map(s=>s.toDestination("to")),i);return{thatSelections:o}}},Ig=class extends fu{sortTexts(e){return e.sort((r,n)=>r.localeCompare(n,void 0,{numeric:!0,caseFirst:"upper"}))}},Cg=class extends fu{sortTexts(e){return e.reverse()}},Og=class extends fu{sortTexts(e){return HT(e)}};var mu=class{constructor(e){this.modifierStageFactory=e;this.getFinalStages=()=>[this.modifierStageFactory.create(ai)];this.run=this.run.bind(this)}async run(e){let r=e.map(({thatTarget:n})=>n);return await Ce(k(),r,"referenced"),await ot(e,async(n,i)=>{let o=i.map(s=>gn(s,s.contentRange));await k().getEditableTextEditor(n).toggleBreakpoint(o)}),{thatTargets:e}}};var du=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e,r,n){let i=await ot(e,async(o,s)=>{let l=s.map(v=>({start:new Re(v.contentRange.start,v.contentRange.start),end:new Re(v.contentRange.end,v.contentRange.end)})),u=l.flatMap(({start:v,end:I})=>[{text:r,range:v},{text:n,range:I,isReplace:!0}]),p=s.map(v=>v.contentSelection),{boundariesStartSelections:m,boundariesEndSelections:d,sourceSelections:g,thatSelections:x}=await De({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(o),edits:u,selections:{boundariesStartSelections:{selections:l.map(({start:v})=>v),behavior:2},boundariesEndSelections:{selections:l.map(({end:v})=>v),behavior:3},sourceSelections:{selections:p,behavior:1},thatSelections:{selections:p,behavior:0}}}),b=[...m,...d];return await k().flashRanges(b.map(v=>({editor:o,range:lr(v),style:"justAdded"}))),{sourceMark:g.map(v=>({editor:o,selection:v})),thatMark:x.map(v=>({editor:o,selection:v}))}});return{sourceSelections:i.flatMap(({sourceMark:o})=>o),thatSelections:i.flatMap(({thatMark:o})=>o)}}};var hu=class{constructor(e,r,n){this.rangeUpdater=e;this.snippets=r;this.modifierStageFactory=n;this.snippetParser=new li;this.run=this.run.bind(this)}getFinalStages(e){let r=this.getScopeType(e);return r==null?[]:[new Po(this.modifierStageFactory,{type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:r}})]}getScopeType(e){let{name:r,variableName:n}=e,s=(this.snippets.getSnippetStrict(r).variables??{})[n]?.wrapperScopeType;return s==null?void 0:{type:s}}getBody(e,r){let{name:n}=e,i=this.snippets.getSnippetStrict(n);return Tg(this.modifierStageFactory,r,i.definitions).body.join(`
`)}async run(e,r){Sg();let n=k().getEditableTextEditor(bt(e)),i=this.getBody(r,e),o=this.snippetParser.parse(i);xg(o,r.variableName);let s=o.toTextmateString();await Ce(k(),e,"pendingModification0");let l=e.map(m=>m.contentSelection),u=()=>n.insertSnippet(s,l),{targetSelections:p}=await De({rangeUpdater:this.rangeUpdater,editor:n,callback:u,preserveCursorSelections:!0,selections:{targetSelections:l}});return{thatSelections:p.map(m=>({editor:n,selection:m}))}}};var gu=class{constructor(e,r,n){this.rangeUpdater=e;this.snippets=r;this.modifierStageFactory=n;this.snippetParser=new li;this.run=this.run.bind(this)}getFinalStages(e,r){if(r.type==="named")return this.legacy().getFinalStages(r);let n=bt(e),i=hc(r,n.document.languageId);return i.scopeType==null?[]:[new Po(this.modifierStageFactory,{type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:i.scopeType}})]}async run(e,r){if(r.type==="named")return this.legacy().run(e,r);let n=k().getEditableTextEditor(bt(e)),i=hc(r,n.document.languageId),o=this.snippetParser.parse(i.body);yg(o,i.variableName);let s=o.toTextmateString();await Ce(k(),e,"pendingModification0");let l=e.map(p=>p.contentSelection),{targetSelections:u}=await De({rangeUpdater:this.rangeUpdater,editor:n,callback:()=>n.insertSnippet(s,l),preserveCursorSelections:!0,selections:{targetSelections:l}});return{thatSelections:u.map(p=>({editor:n,selection:p}))}}legacy(){return new hu(this.rangeUpdater,this.snippets,this.modifierStageFactory)}};var yZ=/-?\d+(\.\d+)?/g,Ng=class{constructor(e,r){this.actions=e;this.isIncrement=r;this.run=this.run.bind(this)}async run(e){let r=[];return await Ni(e,n=>n.editor,async(n,i)=>{let o=await this.runOnEditor(n,i);r.push(...o)}),{thatSelections:r}}async runOnEditor(e,r){let{document:n}=e,i=[],o=[];for(let l of r){let u=n.offsetAt(l.contentRange.start),p=l.contentText,m=cl(p,yZ);for(let d of m)i.push(xZ(e,u,d)),o.push(TZ(this.isIncrement,d.text))}let{thatSelections:s}=await this.actions.replace.run(i,o);return s}},Lg=class extends Ng{constructor(e){super(e,!0)}},Ug=class extends Ng{constructor(e){super(e,!1)}};function xZ(t,e,r){return new $e({editor:t,isReversed:!1,contentRange:new q(t.document.positionAt(e+r.index),t.document.positionAt(e+r.index+r.text.length))}).toDestination("to")}function TZ(t,e){return e.includes(".")?vZ(t,e).toString():SZ(t,e).toString()}function SZ(t,e){let r=parseInt(e),n=1;return r+(t?n:-n)}function vZ(t,e){let r=parseFloat(e),i=Math.abs(r)<=1?.1:1,o=r+(t?i:-i);return parseFloat(o.toPrecision(15))/1}var Hg=class{constructor(e,r,n,i){this.addSelection=new Mg,this.addSelectionBefore=new Dg,this.addSelectionAfter=new Fg,this.callAsFunction=new Kl(this),this.clearAndSetSelection=new Ql(this),this.copyToClipboard=new Gh(this,n),this.cutToClipboard=new Kh(this),this.decrement=new Ug(this),this.deselect=new Zl,this.editNew=new Qh(n,this),this.editNewLineAfter=new Xh(this,i),this.editNewLineBefore=new Yh(this,i),this.executeCommand=new Yl(n),this.extractVariable=new Wh(n),this.findInDocument=new eg(this),this.findInWorkspace=new tg(this),this.flashTargets=new rg,this.foldRegion=new Ih(n),this.followLink=new mc({openAside:!1}),this.followLinkAside=new mc({openAside:!0}),this.generateSnippet=new dc(r),this.getText=new eu,this.gitAccept=new $h(n),this.gitRevert=new jh(n),this.gitStage=new qh(n),this.gitUnstage=new zh(n),this.highlight=new tu,this.increment=new Lg(this),this.indentLine=new ig(n),this.insertCopyAfter=new cg(n,i),this.insertCopyBefore=new sg(n,i),this.insertEmptyLineAfter=new pg(n,i),this.insertEmptyLineBefore=new ug(n,i),this.insertEmptyLinesAround=new lg(n,i),this.insertSnippet=new iu(n,r,this,i),this.joinLines=new ou(n,i),this.breakLine=new _h(n),this.moveToTarget=new kh(n),this.outdentLine=new og(n),this.pasteFromClipboard=new wg(n,this),this.randomizeTargets=new Og(this),this.remove=new au(n),this.rename=new Oh(n),this.replace=new su(n),this.replaceWithTarget=new Rh(n),this.revealDefinition=new Uh(n),this.revealTypeDefinition=new Hh(n),this.reverseTargets=new Cg(this),this.rewrapWithPairedDelimiter=new cu(n,i),this.scrollToBottom=new Rg,this.scrollToCenter=new Eg,this.scrollToTop=new _g,this.setSelection=new kg,this.setSelectionAfter=new Ag,this.setSelectionBefore=new Pg,this.showDebugHover=new Bh(n),this.showHover=new Vh(n),this.showQuickFix=new Lh(n),this.showReferences=new Nh(n),this.sortTargets=new Ig(this),this.swapTargets=new Ph(n),this.toggleLineBreakpoint=new mu(i),this.toggleLineComment=new Mh(n),this.unfoldRegion=new Ch(n),this.wrapWithPairedDelimiter=new du(n),this.wrapWithSnippet=new gu(n,r,i),this["experimental.setInstanceReference"]=new uu("instanceReference"),this["private.showParseTree"]=new pu(e),this["private.getTargets"]=new Jl,this["private.setKeyboardTarget"]=new uu("keyboard")}};async function tI(t,e,r){let n=await t.getFocusedElementType();if(n==null||n==="textEditor")return null;let i=r.action;switch(i.name){case"replace":return Vg(i.destination)&&Array.isArray(i.replaceWith)?{action:"insert",modifiers:Bg(i.destination),text:i.replaceWith.join(`
`)}:null;case"replaceWithTarget":return Vg(i.destination)?{action:"insert",modifiers:Bg(i.destination),text:await fb(e,i.source)}:null;case"moveToTarget":if(Vg(i.destination)){let o=await fb(e,i.source);return await bZ(e,i.source),{action:"insert",modifiers:Bg(i.destination),text:o}}return null;case"callAsFunction":return Wg(i.argument)?{action:i.name,modifiers:$g(i.argument),callee:await fb(e,i.callee)}:null;case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return Wg(i.target)?{action:i.name,modifiers:$g(i.target),left:i.left,right:i.right}:null;case"pasteFromClipboard":return Vg(i.destination)?{action:i.name,modifiers:Bg(i.destination)}:null;case"swapTargets":case"editNew":case"insertSnippet":case"generateSnippet":case"wrapWithSnippet":case"parsed":return null;default:return Wg(i.target)?{action:i.name,modifiers:$g(i.target)}:null}}function Vg(t){return t.type==="implicit"?!0:t.type==="primitive"?t.insertionMode==="to"&&Wg(t.target):!1}function Wg(t){return t.type==="implicit"?!0:t.type==="primitive"?t.mark==null||t.mark.type==="cursor":!1}function Bg(t){return t.type==="primitive"?$g(t.target):[]}function $g(t){return t.type==="primitive"&&t.modifiers!=null&&t.modifiers.length>0?t.modifiers:[]}async function fb(t,e){return(await t({name:"getText",target:e})).returnValue.join(`
`)}async function bZ(t,e){await t({name:"remove",target:e})}function rI(t,e){let{anchor:r,rangeType:n,active:i}=t;if(r.type!=="primitive"||n!=="continuous")return t;let o=r.modifiers.map((s,l)=>[s,l]);for(let[s,l]of o.reverse())for(let u of wZ){let p=u.accept(s);if(p.accepted){let[m,d]=[r.modifiers.slice(0,l+1),r.modifiers.slice(l+1)],g={...t,anchor:d.length===0&&e?{type:"implicit"}:{type:"primitive",mark:r.mark,modifiers:d},active:Zf(i,x=>{x.modifiers=x.modifiers.slice(Jo(x.modifiers,b=>u.accept(b).accepted)+1)})};return g=p.transformTarget?.(g)??g,{type:"primitive",mark:{type:"target",target:g},modifiers:m}}}return t}var wZ=[{accept(t){return t.type==="everyScope"&&t.scopeType.type!=="instance"?{accepted:!0,transformTarget(e){return{...e,exclusionScopeType:t.scopeType}}}:{accepted:!1}}},{accept(t){return{accepted:(t.type==="everyScope"||t.type==="relativeScope"||t.type==="ordinalScope")&&t.scopeType.type==="instance"}}}];function db(t,e){switch(t.type){case"list":return _Z(t,e);case"range":return nI(t,e);case"primitive":return jg(t,e);case"implicit":return t}}function _Z(t,e){return{...t,elements:t.elements.map((r,n)=>{let i=e.concat(t.elements.slice(0,n));switch(r.type){case"range":return nI(r,i);case"primitive":return jg(r,i)}})}}function nI(t,e){let r=EZ(t,e),n=t.anchor.type==="implicit"||t.anchor.mark==null;return rI(r,n)}function EZ(t,e){return{type:"range",rangeType:t.rangeType??"continuous",excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1,anchor:t.anchor.type==="implicit"?t.anchor:jg(t.anchor,e),active:jg(t.active,e.concat(t.anchor))}}function jg(t,e){let r=mb(t.mark??(RZ(t)?AZ(e):null)??{type:"cursor"}),n=iI(t)??MZ(e)??DZ(e)??[];return{type:t.type,mark:r,modifiers:n}}function RZ(t){return t.modifiers?.some(e=>e.type==="inferPreviousMark")??!1}function iI(t){let e=t.modifiers?.filter(r=>r.type!=="inferPreviousMark")??[];return e.length!==0?e:void 0}function kZ(t){if(PZ(t))return[{type:"containingScope",scopeType:{type:"line"}}]}function PZ(t){let e=r=>r?.type==="lineNumber";return e(t.mark)?!0:t.mark?.type==="range"?e(t.mark.anchor)&&e(t.mark.active):!1}function AZ(t){return yu(t,e=>e.mark)}function MZ(t){return yu(t,iI)}function DZ(t){return yu(t,kZ)}function yu(t,e){for(let r=t.length-1;r>-1;--r){let n=t[r];switch(n.type){case"primitive":{let i=e(n);if(i!=null)return i;break}case"range":{let i=yu([n.anchor],e);if(i!=null)return i;break}case"list":{let i=yu(n.elements,e);if(i!=null)return i;break}}}}function mb(t){switch(t.type){case"range":return{...t,anchor:mb(t.anchor),active:mb(t.active)};case"target":return{type:"target",target:db(t.target,[])};default:return t}}var qg=class{constructor(e,r,n,i,o){this.commandServerApi=e;this.debug=r;this.storedTargets=n;this.pipelineRunner=i;this.actions=o;this.finalStages=[];this.runAction=this.runAction.bind(this),this.inferenceContext=new hb(this.debug)}async run(e){if(aa(e)){let p=await tI(this.commandServerApi,this.runAction,e);if(p!=null)return{fallback:p}}let{returnValue:r,thatSelections:n,thatTargets:i,sourceSelections:o,sourceTargets:s,instanceReferenceTargets:l,keyboardTargets:u}=await this.runAction(e.action);return this.storedTargets.set("that",oI(i,n)),this.storedTargets.set("source",oI(s,o)),this.storedTargets.set("instanceReference",l),this.storedTargets.set("keyboard",u,{history:!0}),{returnValue:r}}runAction(e){switch(this.inferenceContext.reset(),this.finalStages=[],e.name){case"replaceWithTarget":return this.actions.replaceWithTarget.run(this.getTargets(e.source),this.getDestinations(e.destination));case"moveToTarget":return this.actions.moveToTarget.run(this.getTargets(e.source),this.getDestinations(e.destination));case"swapTargets":return this.actions.swapTargets.run(this.getTargets(e.target1),this.getTargets(e.target2));case"callAsFunction":return this.actions.callAsFunction.run(this.getTargets(e.callee),this.getTargets(e.argument));case"wrapWithPairedDelimiter":return this.actions.wrapWithPairedDelimiter.run(this.getTargets(e.target),e.left,e.right);case"rewrapWithPairedDelimiter":return this.finalStages=this.actions.rewrapWithPairedDelimiter.getFinalStages(),this.actions.rewrapWithPairedDelimiter.run(this.getTargets(e.target),e.left,e.right);case"pasteFromClipboard":return this.actions.pasteFromClipboard.run(this.getDestinations(e.destination));case"executeCommand":return this.actions.executeCommand.run(this.getTargets(e.target),e.commandId,e.options);case"replace":return this.actions.replace.run(this.getDestinations(e.destination),e.replaceWith);case"highlight":return this.actions.highlight.run(this.getTargets(e.target),e.highlightId);case"generateSnippet":return this.actions.generateSnippet.run(this.getTargets(e.target),e.directory,e.snippetName);case"insertSnippet":return this.finalStages=this.actions.insertSnippet.getFinalStages(this.getDestinations(e.destination),e.snippetDescription),this.actions.insertSnippet.run(this.getDestinations(e.destination),e.snippetDescription);case"wrapWithSnippet":return this.finalStages=this.actions.wrapWithSnippet.getFinalStages(this.getTargets(e.target),e.snippetDescription),this.actions.wrapWithSnippet.run(this.getTargets(e.target),e.snippetDescription);case"editNew":return this.actions.editNew.run(this.getDestinations(e.destination));case"getText":return this.actions.getText.run(this.getTargets(e.target),e.options);case"parsed":return this.runAction(wm(e.content,e.arguments));default:{let r=this.actions[e.name];if(r==null)throw new Error(`Unknown action: ${e.name}`);return this.finalStages=r.getFinalStages?.()??[],this.noAutomaticTokenExpansion=r.noAutomaticTokenExpansion??!1,r.run(this.getTargets(e.target))}}}getTargets(e){let r=this.inferenceContext.run(e);return this.pipelineRunner.run(r,{actionFinalStages:this.finalStages,noAutomaticTokenExpansion:this.noAutomaticTokenExpansion})}getDestinations(e){switch(e.type){case"list":return e.destinations.flatMap(r=>this.getDestinations(r));case"primitive":return this.getTargets(e.target).map(r=>r.toDestination(e.insertionMode));case"implicit":return this.getTargets({type:"implicit"}).map(r=>r.toDestination("to"))}}},hb=class{constructor(e){this.debug=e;this.previousTargets=[]}run(e){let r=db(e,this.previousTargets);return this.debug.active&&(this.debug.log("Full target:"),this.debug.log(JSON.stringify(r,null,2))),this.previousTargets.push(e),r}reset(){this.previousTargets=[]}};function oI(t,e){if(t!=null&&e!=null)throw Error("Actions may only return full targets or selections for that mark");return e!=null?e.map(pc):t}var zg=class{constructor(e,r){this.readableHatMap=e;this.mark=r}run(){let e=this.readableHatMap.getToken(this.mark.symbolColor,this.mark.character);if(e==null)throw new Error(`Couldn't find mark ${this.mark.symbolColor} '${this.mark.character}'`);return[new Ft({editor:e.editor,contentRange:e.range,isReversed:!1,hasExplicitRange:!1})]}};var Gg=class{constructor(e){this.mark=e}run(){let{editorId:e,range:{start:r,end:n}}=this.mark,i=k().visibleTextEditors.find(s=>s.id===e);if(i==null)throw new Error(`Couldn't find editor '${e}'`);let o=new q(r.line,r.character,n.line,n.character);return[new Ft({editor:i,contentRange:o,isReversed:!1,hasExplicitRange:!1})]}};var Kg=class{constructor(e){this.mark=e}run(){let e=k().activeTextEditor;if(e==null)return[];let r=FZ(e,this.mark.lineNumberType,this.mark.lineNumber),n=e.document.lineAt(r).range;return[cv(e,!1,n)]}},FZ=(t,e,r)=>{switch(e){case"absolute":return r;case"relative":return t.selections[0].active.line+r;case"modulo100":{let i=t.visibleRanges[0].start.line,o=t.visibleRanges[t.visibleRanges.length-1].end.line,s=Math.floor(i/100)*100,l=[],u=[],p=s+r;for(;p<=o;)p>=i&&(t.visibleRanges.find(d=>p>=d.start.line&&p<=d.end.line)?l.push(p):u.push(p)),p+=100;if(l.length===1)return l[0];if(l.length+u.length>1)throw new Error("Multiple lines matching");if(u.length===1)return u[0];throw new Error("Line is not in viewport")}}};var Qg=class{constructor(e){this.mark=e}run(){return[]}};var Zg=class{constructor(e,r){this.markStageFactory=e;this.mark=r}run(){let e=this.markStageFactory.create(this.mark.anchor),r=this.markStageFactory.create(this.mark.active),n=e.run(),i=r.run();if(n.length!==1||i.length!==1)throw new Error("Expected single anchor and active target");return[Ao(n[0],i[0],this.mark.excludeAnchor,this.mark.excludeActive)]}};var Yg=class{constructor(e,r){this.storedTargets=e;this.key=r}run(){let e=this.storedTargets.get(this.key);if(e==null||e.length===0)throw Error(`No available ${this.key} marks`);return e}};var Xg=class{constructor(e,r){this.targetPipelineRunner=e;this.mark=r}run(){return this.targetPipelineRunner.run(this.mark.target)}};var Jg=class{constructor(e,r){this.readableHatMap=e;this.storedTargets=r;this.create=this.create.bind(this)}setPipelineRunner(e){this.targetPipelineRunner=e}create(e){switch(e.type){case"cursor":return new Cs;case"that":case"source":case"keyboard":return new Yg(this.storedTargets,e.type);case"decoratedSymbol":return new zg(this.readableHatMap,e);case"lineNumber":return new Kg(e);case"range":return new Zg(this,e);case"nothing":return new Qg(e);case"target":return new Xg(this.targetPipelineRunner,e);case"explicit":return new Gg(e);default:{let r=e,{type:n}=e;throw new Error(`Unknown mark: ${n}`)}}}};async function aI(t,e,r,n,i,o,s,l,u,p){r.active&&(r.log("command:"),r.log(JSON.stringify(p,null,2)));let m=WS(p),d=await n.getReadableMap(m.usePrePhraseSnapshot),g=CZ(t,e,s,r,o,d,i,l);for(let b of u)g=b.wrapCommandRunner(d,g);let x=await g.run(m);return await IZ(p,x)}async function IZ(t,e){if(aa(t))return e;if("returnValue"in e)return e.returnValue}function CZ(t,e,r,n,i,o,s,l){let u=new uc(r,i,new qs(r)),p=new Jg(o,i),m=new nh(u,p);return p.setPipelineRunner(m),new qg(e,n,i,m,new Hg(t,s,l,u))}var sI=["clojure","latex","ruby","rust","scala"];async function cI(t,e){await OZ(t,e)}async function OZ(t,e){let r=[];for(let n of sI)await t.loadLanguage(n),await e.loadLanguage(n),Di(zl[n]??{}).map(i=>{e.get(n)?.getScopeHandler({type:i})!=null&&r.push(`Scope '${i}' defined as both legacy and new for language ${n}`)});if(r.length>0)throw Error(r.join(`
`))}function lI(t){return BP(t)?yl(t.type).replace("."," "):t.type==="surroundingPair"?`Matching pair of ${yl(t.delimiter)}`:t.type==="customRegex"?`Regex \`${t.regex}\``:"Unknown scope type"}var ey=class{constructor(e){this.customSpokenFormGenerator=e;this.listeners=[];this.disposable=e.onDidChangeCustomSpokenForms(()=>this.onChange()),this.onDidChangeScopeInfo=this.onDidChangeScopeInfo.bind(this),this.getScopeTypeInfo=this.getScopeTypeInfo.bind(this),this.updateScopeTypeInfos()}onDidChangeScopeInfo(e){return e(this.getScopeTypeInfos()),this.listeners.push(e),{dispose:()=>{cr(this.listeners,e)}}}async onChange(){this.updateScopeTypeInfos(),this.listeners.forEach(e=>e(this.scopeInfos))}updateScopeTypeInfos(){let e=[...oa.filter(r=>r!=="instance").map(r=>({type:r})),...Bf.map(r=>({type:"surroundingPair",delimiter:r})),...this.customSpokenFormGenerator.getCustomRegexScopeTypes()];this.scopeInfos=e.map(r=>this.getScopeTypeInfo(r))}getScopeTypeInfos(){return this.scopeInfos}getScopeTypeInfo(e){return{scopeType:e,spokenForm:this.customSpokenFormGenerator.scopeTypeToSpokenForm(e),humanReadableName:lI(e),isLanguageSpecific:NZ(e)}}dispose(){this.disposable.dispose()}};function NZ(t){switch(t.type){case"string":case"argumentOrParameter":case"argumentList":case"anonymousFunction":case"attribute":case"branch":case"class":case"className":case"collectionItem":case"collectionKey":case"command":case"comment":case"private.fieldAccess":case"functionCall":case"functionCallee":case"functionName":case"ifStatement":case"instance":case"interior":case"list":case"map":case"name":case"namedFunction":case"regularExpression":case"statement":case"type":case"value":case"condition":case"section":case"sectionLevelOne":case"sectionLevelTwo":case"sectionLevelThree":case"sectionLevelFour":case"sectionLevelFive":case"sectionLevelSix":case"selector":case"private.switchStatementSubject":case"unit":case"xmlBothTags":case"xmlElement":case"xmlEndTag":case"xmlStartTag":case"part":case"chapter":case"subSection":case"subSubSection":case"namedParagraph":case"subParagraph":case"environment":case"textFragment":case"disqualifyDelimiter":case"pairDelimiter":return!0;case"character":case"word":case"token":case"identifier":case"line":case"sentence":case"paragraph":case"boundedParagraph":case"document":case"nonWhitespaceSequence":case"boundedNonWhitespaceSequence":case"url":case"notebookCell":case"surroundingPair":case"surroundingPairInterior":case"customRegex":case"glyph":return!1;case"oneOf":throw Error(`Can't decide whether scope type ${JSON.stringify(t,void 0,3)} is language-specific`)}}function gb(t,e,r){if(!r)return t.document.range;let n=t.visibleRanges.reduce((s,l)=>s.union(l));n=t.document.range.intersection(n.with(n.start.translate(-10),n.end.translate(10)));let i=Tf(Array.from(e.generateScopes(t,n.start,"forward",{containment:"required"})))?.domain??n,o=Tf(Array.from(e.generateScopes(t,n.end,"forward",{containment:"required"})))?.domain??n;return i.union(o)}function Fa(t){return{contentRange:t.contentRange,removalRange:t.getRemovalRange(),removalHighlightRange:t.getRemovalHighlightRange(),leadingDelimiter:uI(t.getLeadingDelimiterTarget()),trailingDelimiter:uI(t.getTrailingDelimiterTarget()),interior:t.getInterior()?.map(Fa),boundary:t.getBoundary()?.map(Fa),insertionDelimiter:t.insertionDelimiter}}function uI(t){return t!=null?Fa(t):void 0}function pI(t,e,r,n,i){let o={multipleTargets:!0};return Us(e.generateScopes(t,n.start,"forward",{includeDescendantScopes:!0,distalPosition:n.end}),s=>({domain:s.domain,ranges:s.getTargets(!1).map(l=>({range:l.contentRange,targets:i?LZ(r,l,o).map(Fa):void 0}))}))}function LZ(t,e,r){try{return t.run(e,r)}catch(n){if(n.name==="NoContainingScopeError")return[];throw n}}function fI(t,e,r){return Us(e.generateScopes(t,r.start,"forward",{includeDescendantScopes:!0,distalPosition:r.end}),n=>({domain:n.domain,targets:n.getTargets(!1).map(Fa)}))}var ty=class{constructor(e,r){this.scopeHandlerFactory=e;this.modifierStageFactory=r;this.provideScopeRanges=this.provideScopeRanges.bind(this),this.provideIterationScopeRanges=this.provideIterationScopeRanges.bind(this)}provideScopeRanges(e,{scopeType:r,visibleOnly:n}){let i=this.scopeHandlerFactory.maybeCreate(r,e.document.languageId);return i==null?[]:fI(e,i,gb(e,i,n))}provideIterationScopeRanges(e,{scopeType:r,visibleOnly:n,includeNestedTargets:i}){let{languageId:o}=e.document,s=this.scopeHandlerFactory.maybeCreate(r,o);if(s==null)return[];let l=this.scopeHandlerFactory.maybeCreate(s.iterationScopeType,o);return l==null?[]:pI(e,l,this.modifierStageFactory.create({type:"everyScope",scopeType:r}),gb(e,s,n),i)}};var ry=class{constructor(e,r){this.scopeRangeProvider=r;this.disposables=[];this.listeners=[];this.onChange=this.onChange.bind(this),this.onDidChangeScopeRanges=this.onDidChangeScopeRanges.bind(this),this.onDidChangeIterationScopeRanges=this.onDidChangeIterationScopeRanges.bind(this);let n=new Jn(k().configuration,()=>this.onChange());this.disposables.push(k().onDidChangeVisibleTextEditors(n.run),k().onDidOpenTextDocument(n.run),k().onDidCloseTextDocument(n.run),k().onDidChangeTextDocument(n.run),k().onDidChangeTextEditorVisibleRanges(n.run),e.onDidChangeDefinition(this.onChange),n)}onDidChangeScopeRanges(e,r){let n=()=>{k().visibleTextEditors.forEach(i=>{let o;try{o=this.scopeRangeProvider.provideScopeRanges(i,r)}catch(s){if(lt(k().messages,"ScopeRangeWatcher.provide",s.message),o=[],k().runMode==="test")throw s}e(i,o)})};return this.listeners.push(n),n(),{dispose:()=>{cr(this.listeners,n)}}}onDidChangeIterationScopeRanges(e,r){let n=()=>{k().visibleTextEditors.forEach(i=>{e(i,this.scopeRangeProvider.provideIterationScopeRanges(i,r))})};return this.listeners.push(n),n(),{dispose:()=>{cr(this.listeners,n)}}}onChange(){this.listeners.forEach(e=>e())}dispose(){this.disposables.forEach(({dispose:e})=>{try{e()}catch{}})}};var ny=class{constructor(e){this.scopeHandlerFactory=e;this.getScopeSupport=this.getScopeSupport.bind(this),this.getIterationScopeSupport=this.getIterationScopeSupport.bind(this)}getScopeSupport(e,r){let{languageId:n}=e.document,i=this.scopeHandlerFactory.maybeCreate(r,n);return i==null?dI(n,r):mI(e,i)?0:1}getIterationScopeSupport(e,r){let{languageId:n}=e.document,i=this.scopeHandlerFactory.maybeCreate(r,n);if(i==null)return dI(n,r);let o=this.scopeHandlerFactory.maybeCreate(i.iterationScopeType,n);return o==null?3:mI(e,o)?0:1}};function mI(t,e){return!jP(e.generateScopes(t,new fe(0,0),"forward"))}function dI(t,e){switch(e.type){case"notebookCell":return 3;default:return zl[t]?.[e.type]!=null?2:3}}var iy=class{constructor(e,r,n){this.scopeSupportChecker=r;this.scopeInfoProvider=n;this.listeners=[];this.onChange=this.onChange.bind(this),this.onDidChangeScopeSupport=this.onDidChangeScopeSupport.bind(this);let i=new Jn(k().configuration,()=>this.onChange());this.disposable=$P(k().onDidOpenTextDocument(i.run),k().onDidCloseTextDocument(i.run),k().onDidChangeActiveTextEditor(i.run),k().onDidChangeTextDocument(i.run),e.onDidChangeDefinition(i.run),this.scopeInfoProvider.onDidChangeScopeInfo(this.onChange),i)}onDidChangeScopeSupport(e){return e(this.getSupportLevels()),this.listeners.push(e),{dispose:()=>{cr(this.listeners,e)}}}onChange(){if(this.listeners.length===0)return;let e=this.getSupportLevels();this.listeners.forEach(r=>r(e))}getSupportLevels(){let e=k().activeTextEditor,r=e==null?()=>3:o=>this.scopeSupportChecker.getScopeSupport(e,o),n=e==null?()=>3:o=>this.scopeSupportChecker.getIterationScopeSupport(e,o);return this.scopeInfoProvider.getScopeTypeInfos().map(o=>({...o,support:r(o.scopeType),iterationScopeSupport:n(o.scopeType)}))}dispose(){this.disposable.dispose()}};async function hI({ide:t,hats:e,treeSitterQueryProvider:r,treeSitter:n=new rd,commandServerApi:i=new Ym,talonSpokenForms:o=new td,snippets:s=new ed}){Pm(t);let l=new jm(t),u=new Zm,p=new Mm,m=new $m(t,p),d=new od(o),g=e!=null?new Km(u,l,e,i):new Xm;g.allocateHats();let x=r?await Gd.create(t,n,r):new Jm;t.disposeOnExit(u,x,g,l,m);let b=[],v,I=F=>(v=F,aI(n,i,l,g,s,p,x,u,b,F));return{commandApi:{runCommand(F){return I(F)},runCommandSafe(...F){return I(Wf(F))},repeatPreviousCommand(){if(v==null)throw new Error("No previous command");return I(v)}},scopeProvider:HZ(x,p,d),customSpokenFormGenerator:d,storedTargets:p,hatTokenMap:g,injectIde:Pm,runIntegrationTests:()=>cI(n,x),addCommandRunnerDecorator:F=>{b.push(F)}}}function HZ(t,e,r){let n=new qs(t),i=new ty(n,new uc(t,e,n)),o=new ry(t,i),s=new ny(n),l=new ey(r),u=new iy(t,s,l);return{provideScopeRanges:i.provideScopeRanges,provideIterationScopeRanges:i.provideIterationScopeRanges,onDidChangeScopeRanges:o.onDidChangeScopeRanges,onDidChangeIterationScopeRanges:o.onDidChangeIterationScopeRanges,getScopeSupport:s.getScopeSupport,getIterationScopeSupport:s.getIterationScopeSupport,onDidChangeScopeSupport:u.onDidChangeScopeSupport,getScopeInfo:l.getScopeTypeInfo,onDidChangeScopeInfo:l.onDidChangeScopeInfo}}function gI(t,e){switch(e.type){case"UntypedTarget":return new Ft({editor:t,isReversed:e.isReversed,contentRange:Ff(e.contentRange),hasExplicitRange:e.hasExplicitRange});case"LineTarget":return new pr({editor:t,isReversed:e.isReversed,contentRange:Ff(e.contentRange)});default:throw Error(`Unsupported target type ${e.type}`)}}var WLe=Symbol("unused");var xu=class{constructor(e){this.position=e}},$Le={$0:new xu(0),$1:new xu(1),$2:new xu(2)};var yI=require("node:events"),oy=class{constructor(){this.apis=new Map,this.commands=new Map,this.eventEmitter=new yI.EventEmitter}registerExtensionApi(e,r){this.apis.set(e,r)}getExtensionApi(e){return this.apis.get(e)}registerCommand(e,r){this.commands.set(e,r)}async executeCommand(e,...r){return await this.commands.get(e)(...r)}onEvent(e,r){return this.eventEmitter.on(e,r)}emitEvent(e,...r){return this.eventEmitter.emit(e,...r)}};function Yr(){return global._neovimRegistry==null&&(global._neovimRegistry=new oy),global._neovimRegistry}var xI="pokey.cursorless";async function ay(t,e){let r='return require("cursorless").buffer_get_selection()',[n,i,o,s,l]=await e.executeLua(r,[]),u;return l===!0?u=[new Re(new fe(o-1,s-1),new fe(n-1,i-1))]:u=[new Re(new fe(n-1,i-1),new fe(o-1,s-1))],console.debug(`bufferGetSelections(): selections=(${u[0].start.line}, ${u[0].start.character}), (${u[0].end.line}, ${u[0].end.character}) neovim=(${n},${i}),(${o},${s}),reverse=${l}`),u}async function TI(t,e){if(e.length!==1)throw new Error("bufferSetSelections() only supports one selection");let r=`return require("cursorless").select_range(${e[0].start.line+1}, ${e[0].start.character}, ${e[0].end.line+1}, ${e[0].end.character})`;console.debug(`bufferSetSelections() selections=(${e[0].start.line},${e[0].start.character}),(${e[0].end.line},${e[0].end.character}) luaCode="${r}"`),await t.executeLua(r,[])}async function SI(t,e,r){let n='return require("cursorless").window_get_visible_lines()',[i,o]=await e.executeLua(n,[]),s=new q(new fe(i-1,0),new fe(o-1,r[o-1].length-1));return console.debug(`windowGetVisibleRanges(): range=(${s.start.line}, ${s.start.character}), (${s.end.line}, ${s.end.character})`),[s]}async function vI(t){return await t.executeLua('return require("cursorless.utils").cursorless_nvim_path()',[])}async function sy(t,e){await e.callFunction("setreg",["*",t])}async function bI(t){return await t.callFunction("getreg",["*"])}async function wI(t){await t.executeLua('return require("cursorless.utils").paste()',[])}async function _I(t){await t.executeLua('return require("cursorless.utils").mode_switch_nt()',[])}async function EI(t){await t.executeLua('return require("cursorless.utils").mode_switch_t()',[])}async function RI(t,e){let r=`vim.notify("${e}")`;await t.executeLua(r,[])}var VZ={clipboardCopy:{acceptsLocation:!1},clipboardPaste:!0,toggleLineComment:void 0,indentLine:void 0,outdentLine:void 0,rename:void 0,quickFix:void 0,revealDefinition:void 0,revealTypeDefinition:void 0,showHover:void 0,showDebugHover:void 0,extractVariable:void 0,fold:void 0,highlight:{acceptsLocation:!0},unfold:void 0,showReferences:void 0,insertLineAfter:void 0,gitAccept:void 0,gitRevert:void 0,gitStage:void 0,gitUnstage:void 0},cy=class{constructor(){this.commands=VZ}};var Tu=class{constructor(e){this.client=e}async readText(){return await bI(this.client)}async writeText(e){return await sy(e,this.client)}};var ly=br(yb(),1);var vu=class{constructor(){this.notifier=new Kt;this.mocks={...Ef};this.scopes=[];this.onDidChangeConfiguration=this.notifier.registerListener;this.onDidChangeConfiguration=this.onDidChangeConfiguration.bind(this)}getOwnConfiguration(e,r){if(r!=null){for(let{scope:n,values:i}of this.scopes)if(BZ(n,r))return(0,ly.get)(i,e)??(0,ly.get)(this.mocks,e)}return(0,ly.get)(this.mocks,e)}mockConfiguration(e,r){this.mocks[e]=r,this.notifier.notifyListeners()}mockConfigurationScope(e,r,n=!1){this.scopes.push({scope:e,values:r}),n||this.notifier.notifyListeners()}};function BZ(t,e){return t.languageId===e.languageId}async function xb(t,e,r,n){console.debug("neovimEdit() [unsorted]:");for(let s of n)console.debug(`	range=${JSON.stringify(s.range)}, text='${s.text}', isReplace=${s.isReplace}`);n.sort((s,l)=>(kI(s)||PI(s))&&(kI(l)||PI(l))?1:s.range.start.line===l.range.start.line?l.range.start.character-s.range.start.character:l.range.start.line-s.range.start.line),console.debug("neovimEdit() [sorted]:");for(let s of n)console.debug(`	range=${JSON.stringify(s.range)}, text='${s.text}', isReplace=${s.isReplace}`);let i=e.getTextDocument(await t.window.buffer),o=[];for(let s of n)o.push({range:s.range,rangeOffset:i.offsetAt(s.range.start),rangeLength:i.offsetAt(s.range.end)-i.offsetAt(s.range.start),text:s.text});Yr().emitEvent("onDidChangeTextDocument",{document:i,contentChanges:o});for(let s of n){let{range:l,text:u,isReplace:p}=s;u===""?await AI(t,l):l.isEmpty&&!p?await MI(t,l.start,u):await WZ(t,l,u)}return await e.updateTextEditor(),!0}async function AI(t,e){console.debug(`neovimDelete(): range=${JSON.stringify(e)}`);let r=await t.window.buffer,n=(await r.getLines({start:e.end.line,end:e.end.line+1,strictIndexing:!0}))[0],i=n.slice(e.end.character);if(e.start.line===e.end.line){let l=n.slice(0,e.start.character)+i;await r.setLines(l,{start:e.start.line,end:e.start.line+1,strictIndexing:!0});return}if(e.start.character===0){await r.setLines(i,{start:e.start.line,end:e.end.line+1,strictIndexing:!0});return}let o=(await r.getLines({start:e.start.line,end:e.start.line+1,strictIndexing:!0}))[0],s=o.slice(0,e.start.character);if(e.start.character<=o.length){await r.setLines(s+i,{start:e.start.line,end:e.end.line+1,strictIndexing:!0});return}await r.setLines([s,i],{start:e.start.line,end:e.end.line+1,strictIndexing:!0})}async function MI(t,e,r){console.debug(`neovimInsert(): position=${JSON.stringify(e)}, text='${r}'`);let n=r.replace(/(?:\r\n|\r|\n)/g,`
`).split(`
`),i=await t.window.buffer,o=(await i.getLines({start:e.line,end:e.line+1,strictIndexing:!0}))[0],s=o.slice(0,e.character),l=o.slice(e.character);if(n.length===1){let m=s+n[0]+l;await i.setLines(m,{start:e.line,end:e.line+1,strictIndexing:!0});return}let u=s+n[0],p=n[n.length-1]+l;await i.setLines([u,...n.slice(1,n.length-1),p],{start:e.line,end:e.line+1,strictIndexing:!0})}async function WZ(t,e,r){console.debug(`neovimReplace(): range=${JSON.stringify(e)}, text='${r}'`),await AI(t,e),await MI(t,e.start,r)}function kI(t){return t.range.isEmpty&&!t.isReplace}function PI(t){return t.text!==""&&!!(!t.range.isEmpty||t.isReplace)}function DI(t){return Yr().onEvent("onDidChangeTextDocument",t),II()}function FI(t,e,r){return Yr().onEvent("onDidOpenTextDocument",t),II()}function II(){return{dispose(){}}}var bu=class{constructor(){this.data={...Rf}}get(e){return this.data[e]}set(e,r){return this.data[e]=r,Promise.resolve()}};var L1=br(yb(),1);var wu=class{async showMessage(e,r,n,...i){}};async function CI(t,e){let r=e.activeTextEditor,n=await t.window,i=await ay(n,t),o=r.document.getText(i[0]);await sy(o,t)}async function OI(t,e){await wI(t)}var uy=class{constructor(e,r,n,i,o,s,l){this.id=e;this.client=r;this.neovimIDE=n;this.window=i;this._document=o,this._selections=l,this._visibleRanges=s}get document(){return this._document}updateDocument(e,r,n,i){if(n)this._document=n;else if(i)this._document.update(i);else throw Error("updateDocument(): invalid arguments");return this._selections=r,this._visibleRanges=e,this._document}get selections(){return this._selections}async setSelections(e){this._selections=e,await TI(this.client,e)}get visibleRanges(){return this._visibleRanges}get options(){throw Error("get options Not implemented")}set options(e){throw Error("set options Not implemented")}get isActive(){return!0}isEqual(e){return this.id===e.id}async revealRange(e){}revealLine(e,r){throw Error("revealLine Not implemented")}async edit(e){return await xb(this.client,this.neovimIDE,this.window,e)}focus(){return Promise.resolve()}editNewNotebookCellAbove(){throw Error("editNewNotebookCellAbove Not implemented")}editNewNotebookCellBelow(){throw Error("editNewNotebookCellBelow Not implemented")}openLink(e,r){throw Error("openLink Not implemented")}fold(e){throw Error("fold Not implemented")}unfold(e){throw Error("unfold Not implemented")}toggleBreakpoint(e){throw Error("toggleBreakpoint Not implemented")}async toggleLineComment(e){throw Error("toggleLineComment Not implemented")}async clipboardCopy(e){await CI(this.client,this.neovimIDE)}async clipboardPaste(){await OI(this.client,this.neovimIDE)}async indentLine(e){throw Error("indentLine Not implemented")}async outdentLine(e){throw Error("outdentLine Not implemented")}async insertLineAfter(e){throw Error("insertLineAfter Not implemented")}insertSnippet(e,r){throw Error("insertSnippet Not implemented")}async rename(e){throw Error("rename Not implemented")}async showReferences(e){throw Error("showReferences Not implemented")}async quickFix(e){throw Error("quickFix Not implemented")}async revealDefinition(e){throw Error("revealDefinition Not implemented")}async revealTypeDefinition(e){throw Error("revealTypeDefinition Not implemented")}async showHover(e){throw Error("showHover Not implemented")}async showDebugHover(e){throw Error("showDebugHover Not implemented")}async extractVariable(e){throw Error("extractVariable Not implemented")}async gitAccept(e){throw Error("gitAccept Not implemented")}async gitRevert(e){throw Error("gitRevert Not implemented")}async gitStage(e){throw Error("gitStage Not implemented")}async gitUnstage(e){throw Error("gitUnstage Not implemented")}};var Hw=br(require("path"),1);var NI;(()=>{"use strict";var t={470:i=>{function o(u){if(typeof u!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(u))}function s(u,p){for(var m,d="",g=0,x=-1,b=0,v=0;v<=u.length;++v){if(v<u.length)m=u.charCodeAt(v);else{if(m===47)break;m=47}if(m===47){if(!(x===v-1||b===1))if(x!==v-1&&b===2){if(d.length<2||g!==2||d.charCodeAt(d.length-1)!==46||d.charCodeAt(d.length-2)!==46){if(d.length>2){var I=d.lastIndexOf("/");if(I!==d.length-1){I===-1?(d="",g=0):g=(d=d.slice(0,I)).length-1-d.lastIndexOf("/"),x=v,b=0;continue}}else if(d.length===2||d.length===1){d="",g=0,x=v,b=0;continue}}p&&(d.length>0?d+="/..":d="..",g=2)}else d.length>0?d+="/"+u.slice(x+1,v):d=u.slice(x+1,v),g=v-x-1;x=v,b=0}else m===46&&b!==-1?++b:b=-1}return d}var l={resolve:function(){for(var u,p="",m=!1,d=arguments.length-1;d>=-1&&!m;d--){var g;d>=0?g=arguments[d]:(u===void 0&&(u=process.cwd()),g=u),o(g),g.length!==0&&(p=g+"/"+p,m=g.charCodeAt(0)===47)}return p=s(p,!m),m?p.length>0?"/"+p:"/":p.length>0?p:"."},normalize:function(u){if(o(u),u.length===0)return".";var p=u.charCodeAt(0)===47,m=u.charCodeAt(u.length-1)===47;return(u=s(u,!p)).length!==0||p||(u="."),u.length>0&&m&&(u+="/"),p?"/"+u:u},isAbsolute:function(u){return o(u),u.length>0&&u.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var u,p=0;p<arguments.length;++p){var m=arguments[p];o(m),m.length>0&&(u===void 0?u=m:u+="/"+m)}return u===void 0?".":l.normalize(u)},relative:function(u,p){if(o(u),o(p),u===p||(u=l.resolve(u))===(p=l.resolve(p)))return"";for(var m=1;m<u.length&&u.charCodeAt(m)===47;++m);for(var d=u.length,g=d-m,x=1;x<p.length&&p.charCodeAt(x)===47;++x);for(var b=p.length-x,v=g<b?g:b,I=-1,F=0;F<=v;++F){if(F===v){if(b>v){if(p.charCodeAt(x+F)===47)return p.slice(x+F+1);if(F===0)return p.slice(x+F)}else g>v&&(u.charCodeAt(m+F)===47?I=F:F===0&&(I=0));break}var V=u.charCodeAt(m+F);if(V!==p.charCodeAt(x+F))break;V===47&&(I=F)}var Z="";for(F=m+I+1;F<=d;++F)F!==d&&u.charCodeAt(F)!==47||(Z.length===0?Z+="..":Z+="/..");return Z.length>0?Z+p.slice(x+I):(x+=I,p.charCodeAt(x)===47&&++x,p.slice(x))},_makeLong:function(u){return u},dirname:function(u){if(o(u),u.length===0)return".";for(var p=u.charCodeAt(0),m=p===47,d=-1,g=!0,x=u.length-1;x>=1;--x)if((p=u.charCodeAt(x))===47){if(!g){d=x;break}}else g=!1;return d===-1?m?"/":".":m&&d===1?"//":u.slice(0,d)},basename:function(u,p){if(p!==void 0&&typeof p!="string")throw new TypeError('"ext" argument must be a string');o(u);var m,d=0,g=-1,x=!0;if(p!==void 0&&p.length>0&&p.length<=u.length){if(p.length===u.length&&p===u)return"";var b=p.length-1,v=-1;for(m=u.length-1;m>=0;--m){var I=u.charCodeAt(m);if(I===47){if(!x){d=m+1;break}}else v===-1&&(x=!1,v=m+1),b>=0&&(I===p.charCodeAt(b)?--b==-1&&(g=m):(b=-1,g=v))}return d===g?g=v:g===-1&&(g=u.length),u.slice(d,g)}for(m=u.length-1;m>=0;--m)if(u.charCodeAt(m)===47){if(!x){d=m+1;break}}else g===-1&&(x=!1,g=m+1);return g===-1?"":u.slice(d,g)},extname:function(u){o(u);for(var p=-1,m=0,d=-1,g=!0,x=0,b=u.length-1;b>=0;--b){var v=u.charCodeAt(b);if(v!==47)d===-1&&(g=!1,d=b+1),v===46?p===-1?p=b:x!==1&&(x=1):p!==-1&&(x=-1);else if(!g){m=b+1;break}}return p===-1||d===-1||x===0||x===1&&p===d-1&&p===m+1?"":u.slice(p,d)},format:function(u){if(u===null||typeof u!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof u);return function(p,m){var d=m.dir||m.root,g=m.base||(m.name||"")+(m.ext||"");return d?d===m.root?d+g:d+"/"+g:g}(0,u)},parse:function(u){o(u);var p={root:"",dir:"",base:"",ext:"",name:""};if(u.length===0)return p;var m,d=u.charCodeAt(0),g=d===47;g?(p.root="/",m=1):m=0;for(var x=-1,b=0,v=-1,I=!0,F=u.length-1,V=0;F>=m;--F)if((d=u.charCodeAt(F))!==47)v===-1&&(I=!1,v=F+1),d===46?x===-1?x=F:V!==1&&(V=1):x!==-1&&(V=-1);else if(!I){b=F+1;break}return x===-1||v===-1||V===0||V===1&&x===v-1&&x===b+1?v!==-1&&(p.base=p.name=b===0&&g?u.slice(1,v):u.slice(b,v)):(b===0&&g?(p.name=u.slice(1,x),p.base=u.slice(1,v)):(p.name=u.slice(b,x),p.base=u.slice(b,v)),p.ext=u.slice(x,v)),b>0?p.dir=u.slice(0,b-1):g&&(p.dir="/"),p},sep:"/",delimiter:":",win32:null,posix:null};l.posix=l,i.exports=l}},e={};function r(i){var o=e[i];if(o!==void 0)return o.exports;var s=e[i]={exports:{}};return t[i](s,s.exports,r),s.exports}r.d=(i,o)=>{for(var s in o)r.o(o,s)&&!r.o(i,s)&&Object.defineProperty(i,s,{enumerable:!0,get:o[s]})},r.o=(i,o)=>Object.prototype.hasOwnProperty.call(i,o),r.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})};var n={};(()=>{let i;r.r(n),r.d(n,{URI:()=>g,Utils:()=>U}),typeof process=="object"?i=process.platform==="win32":typeof navigator=="object"&&(i=navigator.userAgent.indexOf("Windows")>=0);let o=/^\w[\w\d+.-]*$/,s=/^\//,l=/^\/\//;function u(N,D){if(!N.scheme&&D)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${N.authority}", path: "${N.path}", query: "${N.query}", fragment: "${N.fragment}"}`);if(N.scheme&&!o.test(N.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(N.path){if(N.authority){if(!s.test(N.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(l.test(N.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}let p="",m="/",d=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class g{static isUri(D){return D instanceof g||!!D&&typeof D.authority=="string"&&typeof D.fragment=="string"&&typeof D.path=="string"&&typeof D.query=="string"&&typeof D.scheme=="string"&&typeof D.fsPath=="string"&&typeof D.with=="function"&&typeof D.toString=="function"}scheme;authority;path;query;fragment;constructor(D,z,K,Y,X,ne=!1){typeof D=="object"?(this.scheme=D.scheme||p,this.authority=D.authority||p,this.path=D.path||p,this.query=D.query||p,this.fragment=D.fragment||p):(this.scheme=function(xe,ie){return xe||ie?xe:"file"}(D,ne),this.authority=z||p,this.path=function(xe,ie){switch(xe){case"https":case"http":case"file":ie?ie[0]!==m&&(ie=m+ie):ie=m}return ie}(this.scheme,K||p),this.query=Y||p,this.fragment=X||p,u(this,ne))}get fsPath(){return V(this,!1)}with(D){if(!D)return this;let{scheme:z,authority:K,path:Y,query:X,fragment:ne}=D;return z===void 0?z=this.scheme:z===null&&(z=p),K===void 0?K=this.authority:K===null&&(K=p),Y===void 0?Y=this.path:Y===null&&(Y=p),X===void 0?X=this.query:X===null&&(X=p),ne===void 0?ne=this.fragment:ne===null&&(ne=p),z===this.scheme&&K===this.authority&&Y===this.path&&X===this.query&&ne===this.fragment?this:new b(z,K,Y,X,ne)}static parse(D,z=!1){let K=d.exec(D);return K?new b(K[2]||p,le(K[4]||p),le(K[5]||p),le(K[7]||p),le(K[9]||p),z):new b(p,p,p,p,p)}static file(D){let z=p;if(i&&(D=D.replace(/\\/g,m)),D[0]===m&&D[1]===m){let K=D.indexOf(m,2);K===-1?(z=D.substring(2),D=m):(z=D.substring(2,K),D=D.substring(K)||m)}return new b("file",z,D,p,p)}static from(D){let z=new b(D.scheme,D.authority,D.path,D.query,D.fragment);return u(z,!0),z}toString(D=!1){return Z(this,D)}toJSON(){return this}static revive(D){if(D){if(D instanceof g)return D;{let z=new b(D);return z._formatted=D.external,z._fsPath=D._sep===x?D.fsPath:null,z}}return D}}let x=i?1:void 0;class b extends g{_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=V(this,!1)),this._fsPath}toString(D=!1){return D?Z(this,!0):(this._formatted||(this._formatted=Z(this,!1)),this._formatted)}toJSON(){let D={$mid:1};return this._fsPath&&(D.fsPath=this._fsPath,D._sep=x),this._formatted&&(D.external=this._formatted),this.path&&(D.path=this.path),this.scheme&&(D.scheme=this.scheme),this.authority&&(D.authority=this.authority),this.query&&(D.query=this.query),this.fragment&&(D.fragment=this.fragment),D}}let v={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function I(N,D,z){let K,Y=-1;for(let X=0;X<N.length;X++){let ne=N.charCodeAt(X);if(ne>=97&&ne<=122||ne>=65&&ne<=90||ne>=48&&ne<=57||ne===45||ne===46||ne===95||ne===126||D&&ne===47||z&&ne===91||z&&ne===93||z&&ne===58)Y!==-1&&(K+=encodeURIComponent(N.substring(Y,X)),Y=-1),K!==void 0&&(K+=N.charAt(X));else{K===void 0&&(K=N.substr(0,X));let xe=v[ne];xe!==void 0?(Y!==-1&&(K+=encodeURIComponent(N.substring(Y,X)),Y=-1),K+=xe):Y===-1&&(Y=X)}}return Y!==-1&&(K+=encodeURIComponent(N.substring(Y))),K!==void 0?K:N}function F(N){let D;for(let z=0;z<N.length;z++){let K=N.charCodeAt(z);K===35||K===63?(D===void 0&&(D=N.substr(0,z)),D+=v[K]):D!==void 0&&(D+=N[z])}return D!==void 0?D:N}function V(N,D){let z;return z=N.authority&&N.path.length>1&&N.scheme==="file"?`//${N.authority}${N.path}`:N.path.charCodeAt(0)===47&&(N.path.charCodeAt(1)>=65&&N.path.charCodeAt(1)<=90||N.path.charCodeAt(1)>=97&&N.path.charCodeAt(1)<=122)&&N.path.charCodeAt(2)===58?D?N.path.substr(1):N.path[1].toLowerCase()+N.path.substr(2):N.path,i&&(z=z.replace(/\//g,"\\")),z}function Z(N,D){let z=D?F:I,K="",{scheme:Y,authority:X,path:ne,query:xe,fragment:ie}=N;if(Y&&(K+=Y,K+=":"),(X||Y==="file")&&(K+=m,K+=m),X){let Ae=X.indexOf("@");if(Ae!==-1){let gr=X.substr(0,Ae);X=X.substr(Ae+1),Ae=gr.lastIndexOf(":"),Ae===-1?K+=z(gr,!1,!1):(K+=z(gr.substr(0,Ae),!1,!1),K+=":",K+=z(gr.substr(Ae+1),!1,!0)),K+="@"}X=X.toLowerCase(),Ae=X.lastIndexOf(":"),Ae===-1?K+=z(X,!1,!0):(K+=z(X.substr(0,Ae),!1,!0),K+=X.substr(Ae))}if(ne){if(ne.length>=3&&ne.charCodeAt(0)===47&&ne.charCodeAt(2)===58){let Ae=ne.charCodeAt(1);Ae>=65&&Ae<=90&&(ne=`/${String.fromCharCode(Ae+32)}:${ne.substr(3)}`)}else if(ne.length>=2&&ne.charCodeAt(1)===58){let Ae=ne.charCodeAt(0);Ae>=65&&Ae<=90&&(ne=`${String.fromCharCode(Ae+32)}:${ne.substr(2)}`)}K+=z(ne,!0,!1)}return xe&&(K+="?",K+=z(xe,!1,!1)),ie&&(K+="#",K+=D?ie:I(ie,!1,!1)),K}function oe(N){try{return decodeURIComponent(N)}catch{return N.length>3?N.substr(0,3)+oe(N.substr(3)):N}}let ae=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function le(N){return N.match(ae)?N.replace(ae,D=>oe(D)):N}var st=r(470);let Lt=st.posix||st,pt="/";var U;(function(N){N.joinPath=function(D,...z){return D.with({path:Lt.join(D.path,...z)})},N.resolvePath=function(D,...z){let K=D.path,Y=!1;K[0]!==pt&&(K=pt+K,Y=!0);let X=Lt.resolve(K,...z);return Y&&X[0]===pt&&!D.authority&&(X=X.substring(1)),D.with({path:X})},N.dirname=function(D){if(D.path.length===0||D.path===pt)return D;let z=Lt.dirname(D.path);return z.length===1&&z.charCodeAt(0)===46&&(z=""),D.with({path:z})},N.basename=function(D){return Lt.basename(D.path)},N.extname=function(D){return Lt.extname(D.path)}})(U||(U={}))})(),NI=n})();var{URI:LI,Utils:BUe}=NI;var iC=br(ZI(),1);var Eu=t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>65536)throw new TypeError("pattern is too long")};var ZZ={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},Ru=t=>t.replace(/[[\]\\-]/g,"\\$&"),YZ=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),YI=t=>t.join(""),XI=(t,e)=>{let r=e;if(t.charAt(r)!=="[")throw new Error("not in a brace expression");let n=[],i=[],o=r+1,s=!1,l=!1,u=!1,p=!1,m=r,d="";e:for(;o<t.length;){let v=t.charAt(o);if((v==="!"||v==="^")&&o===r+1){p=!0,o++;continue}if(v==="]"&&s&&!u){m=o+1;break}if(s=!0,v==="\\"&&!u){u=!0,o++;continue}if(v==="["&&!u){for(let[I,[F,V,Z]]of Object.entries(ZZ))if(t.startsWith(I,o)){if(d)return["$.",!1,t.length-r,!0];o+=I.length,Z?i.push(F):n.push(F),l=l||V;continue e}}if(u=!1,d){v>d?n.push(Ru(d)+"-"+Ru(v)):v===d&&n.push(Ru(v)),d="",o++;continue}if(t.startsWith("-]",o+1)){n.push(Ru(v+"-")),o+=2;continue}if(t.startsWith("-",o+1)){d=v,o+=2;continue}n.push(Ru(v)),o++}if(m<o)return["",!1,0,!1];if(!n.length&&!i.length)return["$.",!1,t.length-r,!0];if(i.length===0&&n.length===1&&/^\\?.$/.test(n[0])&&!p){let v=n[0].length===2?n[0].slice(-1):n[0];return[YZ(v),!1,m-r,!1]}let g="["+(p?"^":"")+YI(n)+"]",x="["+(p?"":"^")+YI(i)+"]";return[n.length&&i.length?"("+g+"|"+x+")":n.length?g:x,l,m-r,!0]};var Bn=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");var XZ=new Set(["!","?","+","*","@"]),JI=t=>XZ.has(t),JZ="(?!(?:^|/)\\.\\.?(?:$|/))",py="(?!\\.)",eY=new Set(["[","."]),tY=new Set(["..","."]),rY=new Set("().*{}+?[]^$\\!"),nY=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),vb="[^/]",eC=vb+"*?",tC=vb+"+?",yc=class t{type;#e;#t;#o=!1;#n=[];#a;#S;#l;#p=!1;#s;#c;#i=!1;constructor(e,r,n={}){this.type=e,e&&(this.#t=!0),this.#a=r,this.#e=this.#a?this.#a.#e:this,this.#s=this.#e===this?n:this.#e.#s,this.#l=this.#e===this?[]:this.#e.#l,e==="!"&&!this.#e.#p&&this.#l.push(this),this.#S=this.#a?this.#a.#n.length:0}get hasMagic(){if(this.#t!==void 0)return this.#t;for(let e of this.#n)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#t=!0;return this.#t}toString(){return this.#c!==void 0?this.#c:this.type?this.#c=this.type+"("+this.#n.map(e=>String(e)).join("|")+")":this.#c=this.#n.map(e=>String(e)).join("")}#g(){if(this!==this.#e)throw new Error("should only call on root");if(this.#p)return this;this.toString(),this.#p=!0;let e;for(;e=this.#l.pop();){if(e.type!=="!")continue;let r=e,n=r.#a;for(;n;){for(let i=r.#S+1;!n.type&&i<n.#n.length;i++)for(let o of e.#n){if(typeof o=="string")throw new Error("string part in extglob AST??");o.copyIn(n.#n[i])}r=n,n=r.#a}}return this}push(...e){for(let r of e)if(r!==""){if(typeof r!="string"&&!(r instanceof t&&r.#a===this))throw new Error("invalid part: "+r);this.#n.push(r)}}toJSON(){let e=this.type===null?this.#n.slice().map(r=>typeof r=="string"?r:r.toJSON()):[this.type,...this.#n.map(r=>r.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#p&&this.#a?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#a?.isStart())return!1;if(this.#S===0)return!0;let e=this.#a;for(let r=0;r<this.#S;r++){let n=e.#n[r];if(!(n instanceof t&&n.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#a?.type==="!")return!0;if(!this.#a?.isEnd())return!1;if(!this.type)return this.#a?.isEnd();let e=this.#a?this.#a.#n.length:0;return this.#S===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let r=new t(this.type,e);for(let n of this.#n)r.copyIn(n);return r}static#y(e,r,n,i){let o=!1,s=!1,l=-1,u=!1;if(r.type===null){let x=n,b="";for(;x<e.length;){let v=e.charAt(x++);if(o||v==="\\"){o=!o,b+=v;continue}if(s){x===l+1?(v==="^"||v==="!")&&(u=!0):v==="]"&&!(x===l+2&&u)&&(s=!1),b+=v;continue}else if(v==="["){s=!0,l=x,u=!1,b+=v;continue}if(!i.noext&&JI(v)&&e.charAt(x)==="("){r.push(b),b="";let I=new t(v,r);x=t.#y(e,I,x,i),r.push(I);continue}b+=v}return r.push(b),x}let p=n+1,m=new t(null,r),d=[],g="";for(;p<e.length;){let x=e.charAt(p++);if(o||x==="\\"){o=!o,g+=x;continue}if(s){p===l+1?(x==="^"||x==="!")&&(u=!0):x==="]"&&!(p===l+2&&u)&&(s=!1),g+=x;continue}else if(x==="["){s=!0,l=p,u=!1,g+=x;continue}if(JI(x)&&e.charAt(p)==="("){m.push(g),g="";let b=new t(x,m);m.push(b),p=t.#y(e,b,p,i);continue}if(x==="|"){m.push(g),g="",d.push(m),m=new t(null,r);continue}if(x===")")return g===""&&r.#n.length===0&&(r.#i=!0),m.push(g),g="",r.push(...d,m),p;g+=x}return r.type=null,r.#t=void 0,r.#n=[e.substring(n-1)],p}static fromGlob(e,r={}){let n=new t(null,void 0,r);return t.#y(e,n,0,r),n}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[r,n,i,o]=this.toRegExpSource();if(!(i||this.#t||this.#s.nocase&&!this.#s.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return n;let l=(this.#s.nocase?"i":"")+(o?"u":"");return Object.assign(new RegExp(`^${r}$`,l),{_src:r,_glob:e})}get options(){return this.#s}toRegExpSource(e){let r=e??!!this.#s.dot;if(this.#e===this&&this.#g(),!this.type){let u=this.isStart()&&this.isEnd(),p=this.#n.map(x=>{let[b,v,I,F]=typeof x=="string"?t.#f(x,this.#t,u):x.toRegExpSource(e);return this.#t=this.#t||I,this.#o=this.#o||F,b}).join(""),m="";if(this.isStart()&&typeof this.#n[0]=="string"&&!(this.#n.length===1&&tY.has(this.#n[0]))){let b=eY,v=r&&b.has(p.charAt(0))||p.startsWith("\\.")&&b.has(p.charAt(2))||p.startsWith("\\.\\.")&&b.has(p.charAt(4)),I=!r&&!e&&b.has(p.charAt(0));m=v?JZ:I?py:""}let d="";return this.isEnd()&&this.#e.#p&&this.#a?.type==="!"&&(d="(?:$|\\/)"),[m+p+d,Bn(p),this.#t=!!this.#t,this.#o]}let n=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",o=this.#m(r);if(this.isStart()&&this.isEnd()&&!o&&this.type!=="!"){let u=this.toString();return this.#n=[u],this.type=null,this.#t=void 0,[u,Bn(this.toString()),!1,!1]}let s=!n||e||r||!py?"":this.#m(!0);s===o&&(s=""),s&&(o=`(?:${o})(?:${s})*?`);let l="";if(this.type==="!"&&this.#i)l=(this.isStart()&&!r?py:"")+tC;else{let u=this.type==="!"?"))"+(this.isStart()&&!r&&!e?py:"")+eC+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&s?")":this.type==="*"&&s?")?":`)${this.type}`;l=i+o+u}return[l,Bn(o),this.#t=!!this.#t,this.#o]}#m(e){return this.#n.map(r=>{if(typeof r=="string")throw new Error("string type in extglob ast??");let[n,i,o,s]=r.toRegExpSource(e);return this.#o=this.#o||s,n}).filter(r=>!(this.isStart()&&this.isEnd())||!!r).join("|")}static#f(e,r,n=!1){let i=!1,o="",s=!1;for(let l=0;l<e.length;l++){let u=e.charAt(l);if(i){i=!1,o+=(rY.has(u)?"\\":"")+u;continue}if(u==="\\"){l===e.length-1?o+="\\\\":i=!0;continue}if(u==="["){let[p,m,d,g]=XI(e,l);if(d){o+=p,s=s||m,l+=d-1,r=r||g;continue}}if(u==="*"){n&&e==="*"?o+=tC:o+=eC,r=!0;continue}if(u==="?"){o+=vb,r=!0;continue}o+=nY(u)}return[o,Bn(e),!!r,s]}};var xc=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&");var dr=(t,e,r={})=>(Eu(e),!r.nocomment&&e.charAt(0)==="#"?!1:new Xr(e,r).match(t)),iY=/^\*+([^+@!?\*\[\(]*)$/,oY=t=>e=>!e.startsWith(".")&&e.endsWith(t),aY=t=>e=>e.endsWith(t),sY=t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),cY=t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),lY=/^\*+\.\*+$/,uY=t=>!t.startsWith(".")&&t.includes("."),pY=t=>t!=="."&&t!==".."&&t.includes("."),fY=/^\.\*+$/,mY=t=>t!=="."&&t!==".."&&t.startsWith("."),dY=/^\*+$/,hY=t=>t.length!==0&&!t.startsWith("."),gY=t=>t.length!==0&&t!=="."&&t!=="..",yY=/^\?+([^+@!?\*\[\(]*)?$/,xY=([t,e=""])=>{let r=oC([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},TY=([t,e=""])=>{let r=aC([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},SY=([t,e=""])=>{let r=aC([t]);return e?n=>r(n)&&n.endsWith(e):r},vY=([t,e=""])=>{let r=oC([t]);return e?n=>r(n)&&n.endsWith(e):r},oC=([t])=>{let e=t.length;return r=>r.length===e&&!r.startsWith(".")},aC=([t])=>{let e=t.length;return r=>r.length===e&&r!=="."&&r!==".."},sC=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",rC={win32:{sep:"\\"},posix:{sep:"/"}},bY=sC==="win32"?rC.win32.sep:rC.posix.sep;dr.sep=bY;var qt=Symbol("globstar **");dr.GLOBSTAR=qt;var wY="[^/]",_Y=wY+"*?",EY="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",RY="(?:(?!(?:\\/|^)\\.).)*?",kY=(t,e={})=>r=>dr(r,t,e);dr.filter=kY;var vn=(t,e={})=>Object.assign({},t,e),PY=t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return dr;let e=dr;return Object.assign((n,i,o={})=>e(n,i,vn(t,o)),{Minimatch:class extends e.Minimatch{constructor(i,o={}){super(i,vn(t,o))}static defaults(i){return e.defaults(vn(t,i)).Minimatch}},AST:class extends e.AST{constructor(i,o,s={}){super(i,o,vn(t,s))}static fromGlob(i,o={}){return e.AST.fromGlob(i,vn(t,o))}},unescape:(n,i={})=>e.unescape(n,vn(t,i)),escape:(n,i={})=>e.escape(n,vn(t,i)),filter:(n,i={})=>e.filter(n,vn(t,i)),defaults:n=>e.defaults(vn(t,n)),makeRe:(n,i={})=>e.makeRe(n,vn(t,i)),braceExpand:(n,i={})=>e.braceExpand(n,vn(t,i)),match:(n,i,o={})=>e.match(n,i,vn(t,o)),sep:e.sep,GLOBSTAR:qt})};dr.defaults=PY;var cC=(t,e={})=>(Eu(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:(0,iC.default)(t));dr.braceExpand=cC;var AY=(t,e={})=>new Xr(t,e).makeRe();dr.makeRe=AY;var MY=(t,e,r={})=>{let n=new Xr(e,r);return t=t.filter(i=>n.match(i)),n.options.nonull&&!t.length&&t.push(e),t};dr.match=MY;var nC=/[?*]|[+@!]\(.*?\)|\[|\]/,DY=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Xr=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,r={}){Eu(e),r=r||{},this.options=r,this.pattern=e,this.platform=r.platform||sC,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!r.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!r.nonegate,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=r.windowsNoMagicRoot!==void 0?r.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let r of e)if(typeof r!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],r.debug&&(this.debug=(...o)=>console.error(...o)),this.debug(this.pattern,this.globSet);let n=this.globSet.map(o=>this.slashSplit(o));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let i=this.globParts.map((o,s,l)=>{if(this.isWindows&&this.windowsNoMagicRoot){let u=o[0]===""&&o[1]===""&&(o[2]==="?"||!nC.test(o[2]))&&!nC.test(o[3]),p=/^[a-z]:/i.test(o[0]);if(u)return[...o.slice(0,4),...o.slice(4).map(m=>this.parse(m))];if(p)return[o[0],...o.slice(1).map(m=>this.parse(m))]}return o.map(u=>this.parse(u))});if(this.debug(this.pattern,i),this.set=i.filter(o=>o.indexOf(!1)===-1),this.isWindows)for(let o=0;o<this.set.length;o++){let s=this.set[o];s[0]===""&&s[1]===""&&this.globParts[o][2]==="?"&&typeof s[3]=="string"&&/^[a-z]:$/i.test(s[3])&&(s[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let n=0;n<e.length;n++)for(let i=0;i<e[n].length;i++)e[n][i]==="**"&&(e[n][i]="*");let{optimizationLevel:r=1}=this.options;return r>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):r>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(r=>{let n=-1;for(;(n=r.indexOf("**",n+1))!==-1;){let i=n;for(;r[i+1]==="**";)i++;i!==n&&r.splice(n,i-n)}return r})}levelOneOptimize(e){return e.map(r=>(r=r.reduce((n,i)=>{let o=n[n.length-1];return i==="**"&&o==="**"?n:i===".."&&o&&o!==".."&&o!=="."&&o!=="**"?(n.pop(),n):(n.push(i),n)},[]),r.length===0?[""]:r))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let r=!1;do{if(r=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let o=e[i];i===1&&o===""&&e[0]===""||(o==="."||o==="")&&(r=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(r=!0,e.pop())}let n=0;for(;(n=e.indexOf("..",n+1))!==-1;){let i=e[n-1];i&&i!=="."&&i!==".."&&i!=="**"&&(r=!0,e.splice(n-1,2),n-=2)}}while(r);return e.length===0?[""]:e}firstPhasePreProcess(e){let r=!1;do{r=!1;for(let n of e){let i=-1;for(;(i=n.indexOf("**",i+1))!==-1;){let s=i;for(;n[s+1]==="**";)s++;s>i&&n.splice(i+1,s-i);let l=n[i+1],u=n[i+2],p=n[i+3];if(l!==".."||!u||u==="."||u===".."||!p||p==="."||p==="..")continue;r=!0,n.splice(i,1);let m=n.slice(0);m[i]="**",e.push(m),i--}if(!this.preserveMultipleSlashes){for(let s=1;s<n.length-1;s++){let l=n[s];s===1&&l===""&&n[0]===""||(l==="."||l==="")&&(r=!0,n.splice(s,1),s--)}n[0]==="."&&n.length===2&&(n[1]==="."||n[1]==="")&&(r=!0,n.pop())}let o=0;for(;(o=n.indexOf("..",o+1))!==-1;){let s=n[o-1];if(s&&s!=="."&&s!==".."&&s!=="**"){r=!0;let u=o===1&&n[o+1]==="**"?["."]:[];n.splice(o-1,2,...u),n.length===0&&n.push(""),o-=2}}}}while(r);return e}secondPhasePreProcess(e){for(let r=0;r<e.length-1;r++)for(let n=r+1;n<e.length;n++){let i=this.partsMatch(e[r],e[n],!this.preserveMultipleSlashes);if(i){e[r]=[],e[n]=i;break}}return e.filter(r=>r.length)}partsMatch(e,r,n=!1){let i=0,o=0,s=[],l="";for(;i<e.length&&o<r.length;)if(e[i]===r[o])s.push(l==="b"?r[o]:e[i]),i++,o++;else if(n&&e[i]==="**"&&r[o]===e[i+1])s.push(e[i]),i++;else if(n&&r[o]==="**"&&e[i]===r[o+1])s.push(r[o]),o++;else if(e[i]==="*"&&r[o]&&(this.options.dot||!r[o].startsWith("."))&&r[o]!=="**"){if(l==="b")return!1;l="a",s.push(e[i]),i++,o++}else if(r[o]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(l==="a")return!1;l="b",s.push(r[o]),i++,o++}else return!1;return e.length===r.length&&s}parseNegate(){if(this.nonegate)return;let e=this.pattern,r=!1,n=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)r=!r,n++;n&&(this.pattern=e.slice(n)),this.negate=r}matchOne(e,r,n=!1){let i=this.options;if(this.isWindows){let v=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),I=!v&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),F=typeof r[0]=="string"&&/^[a-z]:$/i.test(r[0]),V=!F&&r[0]===""&&r[1]===""&&r[2]==="?"&&typeof r[3]=="string"&&/^[a-z]:$/i.test(r[3]),Z=I?3:v?0:void 0,oe=V?3:F?0:void 0;if(typeof Z=="number"&&typeof oe=="number"){let[ae,le]=[e[Z],r[oe]];ae.toLowerCase()===le.toLowerCase()&&(r[oe]=ae,oe>Z?r=r.slice(oe):Z>oe&&(e=e.slice(Z)))}}let{optimizationLevel:o=1}=this.options;o>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var s=0,l=0,u=e.length,p=r.length;s<u&&l<p;s++,l++){this.debug("matchOne loop");var m=r[l],d=e[s];if(this.debug(r,m,d),m===!1)return!1;if(m===qt){this.debug("GLOBSTAR",[r,m,d]);var g=s,x=l+1;if(x===p){for(this.debug("** at the end");s<u;s++)if(e[s]==="."||e[s]===".."||!i.dot&&e[s].charAt(0)===".")return!1;return!0}for(;g<u;){var b=e[g];if(this.debug(`
globstar while`,e,g,r,x,b),this.matchOne(e.slice(g),r.slice(x),n))return this.debug("globstar found match!",g,u,b),!0;if(b==="."||b===".."||!i.dot&&b.charAt(0)==="."){this.debug("dot detected!",e,g,r,x);break}this.debug("globstar swallow a segment, and continue"),g++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,g,r,x),g===u))}let v;if(typeof m=="string"?(v=d===m,this.debug("string match",m,d,v)):(v=m.test(d),this.debug("pattern match",m,d,v)),!v)return!1}if(s===u&&l===p)return!0;if(s===u)return n;if(l===p)return s===u-1&&e[s]==="";throw new Error("wtf?")}braceExpand(){return cC(this.pattern,this.options)}parse(e){Eu(e);let r=this.options;if(e==="**")return qt;if(e==="")return"";let n,i=null;(n=e.match(dY))?i=r.dot?gY:hY:(n=e.match(iY))?i=(r.nocase?r.dot?cY:sY:r.dot?aY:oY)(n[1]):(n=e.match(yY))?i=(r.nocase?r.dot?TY:xY:r.dot?SY:vY)(n):(n=e.match(lY))?i=r.dot?pY:uY:(n=e.match(fY))&&(i=mY);let o=yc.fromGlob(e,this.options).toMMPattern();return i&&typeof o=="object"&&Reflect.defineProperty(o,"test",{value:i}),o}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let r=this.options,n=r.noglobstar?_Y:r.dot?EY:RY,i=new Set(r.nocase?["i"]:[]),o=e.map(u=>{let p=u.map(m=>{if(m instanceof RegExp)for(let d of m.flags.split(""))i.add(d);return typeof m=="string"?DY(m):m===qt?qt:m._src});return p.forEach((m,d)=>{let g=p[d+1],x=p[d-1];m!==qt||x===qt||(x===void 0?g!==void 0&&g!==qt?p[d+1]="(?:\\/|"+n+"\\/)?"+g:p[d]=n:g===void 0?p[d-1]=x+"(?:\\/|"+n+")?":g!==qt&&(p[d-1]=x+"(?:\\/|\\/"+n+"\\/)"+g,p[d+1]=qt))}),p.filter(m=>m!==qt).join("/")}).join("|"),[s,l]=e.length>1?["(?:",")"]:["",""];o="^"+s+o+l+"$",this.negate&&(o="^(?!"+o+").+$");try{this.regexp=new RegExp(o,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;let n=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let o=this.set;this.debug(this.pattern,"set",o);let s=i[i.length-1];if(!s)for(let l=i.length-2;!s&&l>=0;l--)s=i[l];for(let l=0;l<o.length;l++){let u=o[l],p=i;if(n.matchBase&&u.length===1&&(p=[s]),this.matchOne(p,u,r))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return dr.defaults(e).Minimatch}};dr.AST=yc;dr.Minimatch=Xr;dr.escape=xc;dr.unescape=Bn;var FC=require("node:url");var Tc=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,uC=new Set,bb=typeof process=="object"&&process?process:{},pC=(t,e,r,n)=>{typeof bb.emitWarning=="function"?bb.emitWarning(t,e,r,n):console.error(`[${r}] ${e}: ${t}`)},fy=globalThis.AbortController,lC=globalThis.AbortSignal;if(typeof fy>"u"){lC=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(n,i){this._onabort.push(i)}},fy=class{constructor(){e()}signal=new lC;abort(n){if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(let i of this.signal._onabort)i(n);this.signal.onabort?.(n)}}};let t=bb.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{t&&(t=!1,pC("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var FY=t=>!uC.has(t),uHe=Symbol("type"),Io=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),fC=t=>Io(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?Sc:null:null,Sc=class extends Array{constructor(e){super(e),this.fill(0)}},wb=class t{heap;length;static#e=!1;static create(e){let r=fC(e);if(!r)return[];t.#e=!0;let n=new t(e,r);return t.#e=!1,n}constructor(e,r){if(!t.#e)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},ku=class t{#e;#t;#o;#n;#a;#S;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#l;#p;#s;#c;#i;#g;#y;#m;#f;#w;#h;#_;#E;#T;#v;#b;#d;static unsafeExposeInternals(e){return{starts:e.#E,ttls:e.#T,sizes:e.#_,keyMap:e.#s,keyList:e.#c,valList:e.#i,next:e.#g,prev:e.#y,get head(){return e.#m},get tail(){return e.#f},free:e.#w,isBackgroundFetch:r=>e.#u(r),backgroundFetch:(r,n,i,o)=>e.#U(r,n,i,o),moveToTail:r=>e.#V(r),indexes:r=>e.#k(r),rindexes:r=>e.#P(r),isStale:r=>e.#x(r)}}get max(){return this.#e}get maxSize(){return this.#t}get calculatedSize(){return this.#p}get size(){return this.#l}get fetchMethod(){return this.#a}get memoMethod(){return this.#S}get dispose(){return this.#o}get disposeAfter(){return this.#n}constructor(e){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:s,updateAgeOnHas:l,allowStale:u,dispose:p,disposeAfter:m,noDisposeOnSet:d,noUpdateTTL:g,maxSize:x=0,maxEntrySize:b=0,sizeCalculation:v,fetchMethod:I,memoMethod:F,noDeleteOnFetchRejection:V,noDeleteOnStaleGet:Z,allowStaleOnFetchRejection:oe,allowStaleOnFetchAbort:ae,ignoreFetchAbort:le}=e;if(r!==0&&!Io(r))throw new TypeError("max option must be a nonnegative integer");let st=r?fC(r):Array;if(!st)throw new Error("invalid max value: "+r);if(this.#e=r,this.#t=x,this.maxEntrySize=b||this.#t,this.sizeCalculation=v,this.sizeCalculation){if(!this.#t&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(F!==void 0&&typeof F!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#S=F,I!==void 0&&typeof I!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#a=I,this.#b=!!I,this.#s=new Map,this.#c=new Array(r).fill(void 0),this.#i=new Array(r).fill(void 0),this.#g=new st(r),this.#y=new st(r),this.#m=0,this.#f=0,this.#w=wb.create(r),this.#l=0,this.#p=0,typeof p=="function"&&(this.#o=p),typeof m=="function"?(this.#n=m,this.#h=[]):(this.#n=void 0,this.#h=void 0),this.#v=!!this.#o,this.#d=!!this.#n,this.noDisposeOnSet=!!d,this.noUpdateTTL=!!g,this.noDeleteOnFetchRejection=!!V,this.allowStaleOnFetchRejection=!!oe,this.allowStaleOnFetchAbort=!!ae,this.ignoreFetchAbort=!!le,this.maxEntrySize!==0){if(this.#t!==0&&!Io(this.#t))throw new TypeError("maxSize must be a positive integer if specified");if(!Io(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#M()}if(this.allowStale=!!u,this.noDeleteOnStaleGet=!!Z,this.updateAgeOnGet=!!s,this.updateAgeOnHas=!!l,this.ttlResolution=Io(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=n||0,this.ttl){if(!Io(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#A()}if(this.#e===0&&this.ttl===0&&this.#t===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#e&&!this.#t){let Lt="LRU_CACHE_UNBOUNDED";FY(Lt)&&(uC.add(Lt),pC("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",Lt,t))}}getRemainingTTL(e){return this.#s.has(e)?1/0:0}#A(){let e=new Sc(this.#e),r=new Sc(this.#e);this.#T=e,this.#E=r,this.#F=(o,s,l=Tc.now())=>{if(r[o]=s!==0?l:0,e[o]=s,s!==0&&this.ttlAutopurge){let u=setTimeout(()=>{this.#x(o)&&this.#D(this.#c[o],"expire")},s+1);u.unref&&u.unref()}},this.#R=o=>{r[o]=e[o]!==0?Tc.now():0},this.#r=(o,s)=>{if(e[s]){let l=e[s],u=r[s];if(!l||!u)return;o.ttl=l,o.start=u,o.now=n||i();let p=o.now-u;o.remainingTTL=l-p}};let n=0,i=()=>{let o=Tc.now();if(this.ttlResolution>0){n=o;let s=setTimeout(()=>n=0,this.ttlResolution);s.unref&&s.unref()}return o};this.getRemainingTTL=o=>{let s=this.#s.get(o);if(s===void 0)return 0;let l=e[s],u=r[s];if(!l||!u)return 1/0;let p=(n||i())-u;return l-p},this.#x=o=>{let s=r[o],l=e[o];return!!l&&!!s&&(n||i())-s>l}}#R=()=>{};#r=()=>{};#F=()=>{};#x=()=>!1;#M(){let e=new Sc(this.#e);this.#p=0,this.#_=e,this.#I=r=>{this.#p-=e[r],e[r]=0},this.#O=(r,n,i,o)=>{if(this.#u(n))return 0;if(!Io(i))if(o){if(typeof o!="function")throw new TypeError("sizeCalculation must be a function");if(i=o(n,r),!Io(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#C=(r,n,i)=>{if(e[r]=n,this.#t){let o=this.#t-e[r];for(;this.#p>o;)this.#L(!0)}this.#p+=e[r],i&&(i.entrySize=n,i.totalCalculatedSize=this.#p)}}#I=e=>{};#C=(e,r,n)=>{};#O=(e,r,n,i)=>{if(n||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#k({allowStale:e=this.allowStale}={}){if(this.#l)for(let r=this.#f;!(!this.#N(r)||((e||!this.#x(r))&&(yield r),r===this.#m));)r=this.#y[r]}*#P({allowStale:e=this.allowStale}={}){if(this.#l)for(let r=this.#m;!(!this.#N(r)||((e||!this.#x(r))&&(yield r),r===this.#f));)r=this.#g[r]}#N(e){return e!==void 0&&this.#s.get(this.#c[e])===e}*entries(){for(let e of this.#k())this.#i[e]!==void 0&&this.#c[e]!==void 0&&!this.#u(this.#i[e])&&(yield[this.#c[e],this.#i[e]])}*rentries(){for(let e of this.#P())this.#i[e]!==void 0&&this.#c[e]!==void 0&&!this.#u(this.#i[e])&&(yield[this.#c[e],this.#i[e]])}*keys(){for(let e of this.#k()){let r=this.#c[e];r!==void 0&&!this.#u(this.#i[e])&&(yield r)}}*rkeys(){for(let e of this.#P()){let r=this.#c[e];r!==void 0&&!this.#u(this.#i[e])&&(yield r)}}*values(){for(let e of this.#k())this.#i[e]!==void 0&&!this.#u(this.#i[e])&&(yield this.#i[e])}*rvalues(){for(let e of this.#P())this.#i[e]!==void 0&&!this.#u(this.#i[e])&&(yield this.#i[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,r={}){for(let n of this.#k()){let i=this.#i[n],o=this.#u(i)?i.__staleWhileFetching:i;if(o!==void 0&&e(o,this.#c[n],this))return this.get(this.#c[n],r)}}forEach(e,r=this){for(let n of this.#k()){let i=this.#i[n],o=this.#u(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#c[n],this)}}rforEach(e,r=this){for(let n of this.#P()){let i=this.#i[n],o=this.#u(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#c[n],this)}}purgeStale(){let e=!1;for(let r of this.#P({allowStale:!0}))this.#x(r)&&(this.#D(this.#c[r],"expire"),e=!0);return e}info(e){let r=this.#s.get(e);if(r===void 0)return;let n=this.#i[r],i=this.#u(n)?n.__staleWhileFetching:n;if(i===void 0)return;let o={value:i};if(this.#T&&this.#E){let s=this.#T[r],l=this.#E[r];if(s&&l){let u=s-(Tc.now()-l);o.ttl=u,o.start=Date.now()}}return this.#_&&(o.size=this.#_[r]),o}dump(){let e=[];for(let r of this.#k({allowStale:!0})){let n=this.#c[r],i=this.#i[r],o=this.#u(i)?i.__staleWhileFetching:i;if(o===void 0||n===void 0)continue;let s={value:o};if(this.#T&&this.#E){s.ttl=this.#T[r];let l=Tc.now()-this.#E[r];s.start=Math.floor(Date.now()-l)}this.#_&&(s.size=this.#_[r]),e.unshift([n,s])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let i=Date.now()-n.start;n.start=Tc.now()-i}this.set(r,n.value,n)}}set(e,r,n={}){if(r===void 0)return this.delete(e),this;let{ttl:i=this.ttl,start:o,noDisposeOnSet:s=this.noDisposeOnSet,sizeCalculation:l=this.sizeCalculation,status:u}=n,{noUpdateTTL:p=this.noUpdateTTL}=n,m=this.#O(e,r,n.size||0,l);if(this.maxEntrySize&&m>this.maxEntrySize)return u&&(u.set="miss",u.maxEntrySizeExceeded=!0),this.#D(e,"set"),this;let d=this.#l===0?void 0:this.#s.get(e);if(d===void 0)d=this.#l===0?this.#f:this.#w.length!==0?this.#w.pop():this.#l===this.#e?this.#L(!1):this.#l,this.#c[d]=e,this.#i[d]=r,this.#s.set(e,d),this.#g[this.#f]=d,this.#y[d]=this.#f,this.#f=d,this.#l++,this.#C(d,m,u),u&&(u.set="add"),p=!1;else{this.#V(d);let g=this.#i[d];if(r!==g){if(this.#b&&this.#u(g)){g.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:x}=g;x!==void 0&&!s&&(this.#v&&this.#o?.(x,e,"set"),this.#d&&this.#h?.push([x,e,"set"]))}else s||(this.#v&&this.#o?.(g,e,"set"),this.#d&&this.#h?.push([g,e,"set"]));if(this.#I(d),this.#C(d,m,u),this.#i[d]=r,u){u.set="replace";let x=g&&this.#u(g)?g.__staleWhileFetching:g;x!==void 0&&(u.oldValue=x)}}else u&&(u.set="update")}if(i!==0&&!this.#T&&this.#A(),this.#T&&(p||this.#F(d,i,o),u&&this.#r(u,d)),!s&&this.#d&&this.#h){let g=this.#h,x;for(;x=g?.shift();)this.#n?.(...x)}return this}pop(){try{for(;this.#l;){let e=this.#i[this.#m];if(this.#L(!0),this.#u(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#d&&this.#h){let e=this.#h,r;for(;r=e?.shift();)this.#n?.(...r)}}}#L(e){let r=this.#m,n=this.#c[r],i=this.#i[r];return this.#b&&this.#u(i)?i.__abortController.abort(new Error("evicted")):(this.#v||this.#d)&&(this.#v&&this.#o?.(i,n,"evict"),this.#d&&this.#h?.push([i,n,"evict"])),this.#I(r),e&&(this.#c[r]=void 0,this.#i[r]=void 0,this.#w.push(r)),this.#l===1?(this.#m=this.#f=0,this.#w.length=0):this.#m=this.#g[r],this.#s.delete(n),this.#l--,r}has(e,r={}){let{updateAgeOnHas:n=this.updateAgeOnHas,status:i}=r,o=this.#s.get(e);if(o!==void 0){let s=this.#i[o];if(this.#u(s)&&s.__staleWhileFetching===void 0)return!1;if(this.#x(o))i&&(i.has="stale",this.#r(i,o));else return n&&this.#R(o),i&&(i.has="hit",this.#r(i,o)),!0}else i&&(i.has="miss");return!1}peek(e,r={}){let{allowStale:n=this.allowStale}=r,i=this.#s.get(e);if(i===void 0||!n&&this.#x(i))return;let o=this.#i[i];return this.#u(o)?o.__staleWhileFetching:o}#U(e,r,n,i){let o=r===void 0?void 0:this.#i[r];if(this.#u(o))return o;let s=new fy,{signal:l}=n;l?.addEventListener("abort",()=>s.abort(l.reason),{signal:s.signal});let u={signal:s.signal,options:n,context:i},p=(v,I=!1)=>{let{aborted:F}=s.signal,V=n.ignoreFetchAbort&&v!==void 0;if(n.status&&(F&&!I?(n.status.fetchAborted=!0,n.status.fetchError=s.signal.reason,V&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),F&&!V&&!I)return d(s.signal.reason);let Z=x;return this.#i[r]===x&&(v===void 0?Z.__staleWhileFetching?this.#i[r]=Z.__staleWhileFetching:this.#D(e,"fetch"):(n.status&&(n.status.fetchUpdated=!0),this.set(e,v,u.options))),v},m=v=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=v),d(v)),d=v=>{let{aborted:I}=s.signal,F=I&&n.allowStaleOnFetchAbort,V=F||n.allowStaleOnFetchRejection,Z=V||n.noDeleteOnFetchRejection,oe=x;if(this.#i[r]===x&&(!Z||oe.__staleWhileFetching===void 0?this.#D(e,"fetch"):F||(this.#i[r]=oe.__staleWhileFetching)),V)return n.status&&oe.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),oe.__staleWhileFetching;if(oe.__returned===oe)throw v},g=(v,I)=>{let F=this.#a?.(e,o,u);F&&F instanceof Promise&&F.then(V=>v(V===void 0?void 0:V),I),s.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(v(void 0),n.allowStaleOnFetchAbort&&(v=V=>p(V,!0)))})};n.status&&(n.status.fetchDispatched=!0);let x=new Promise(g).then(p,m),b=Object.assign(x,{__abortController:s,__staleWhileFetching:o,__returned:void 0});return r===void 0?(this.set(e,b,{...u.options,status:void 0}),r=this.#s.get(e)):this.#i[r]=b,b}#u(e){if(!this.#b)return!1;let r=e;return!!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof fy}async fetch(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:s=this.ttl,noDisposeOnSet:l=this.noDisposeOnSet,size:u=0,sizeCalculation:p=this.sizeCalculation,noUpdateTTL:m=this.noUpdateTTL,noDeleteOnFetchRejection:d=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:g=this.allowStaleOnFetchRejection,ignoreFetchAbort:x=this.ignoreFetchAbort,allowStaleOnFetchAbort:b=this.allowStaleOnFetchAbort,context:v,forceRefresh:I=!1,status:F,signal:V}=r;if(!this.#b)return F&&(F.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,status:F});let Z={allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,ttl:s,noDisposeOnSet:l,size:u,sizeCalculation:p,noUpdateTTL:m,noDeleteOnFetchRejection:d,allowStaleOnFetchRejection:g,allowStaleOnFetchAbort:b,ignoreFetchAbort:x,status:F,signal:V},oe=this.#s.get(e);if(oe===void 0){F&&(F.fetch="miss");let ae=this.#U(e,oe,Z,v);return ae.__returned=ae}else{let ae=this.#i[oe];if(this.#u(ae)){let U=n&&ae.__staleWhileFetching!==void 0;return F&&(F.fetch="inflight",U&&(F.returnedStale=!0)),U?ae.__staleWhileFetching:ae.__returned=ae}let le=this.#x(oe);if(!I&&!le)return F&&(F.fetch="hit"),this.#V(oe),i&&this.#R(oe),F&&this.#r(F,oe),ae;let st=this.#U(e,oe,Z,v),pt=st.__staleWhileFetching!==void 0&&n;return F&&(F.fetch=le?"stale":"refresh",pt&&le&&(F.returnedStale=!0)),pt?st.__staleWhileFetching:st.__returned=st}}async forceFetch(e,r={}){let n=await this.fetch(e,r);if(n===void 0)throw new Error("fetch() returned undefined");return n}memo(e,r={}){let n=this.#S;if(!n)throw new Error("no memoMethod provided to constructor");let{context:i,forceRefresh:o,...s}=r,l=this.get(e,s);if(!o&&l!==void 0)return l;let u=n(e,l,{options:s,context:i});return this.set(e,u,s),u}get(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:s}=r,l=this.#s.get(e);if(l!==void 0){let u=this.#i[l],p=this.#u(u);return s&&this.#r(s,l),this.#x(l)?(s&&(s.get="stale"),p?(s&&n&&u.__staleWhileFetching!==void 0&&(s.returnedStale=!0),n?u.__staleWhileFetching:void 0):(o||this.#D(e,"expire"),s&&n&&(s.returnedStale=!0),n?u:void 0)):(s&&(s.get="hit"),p?u.__staleWhileFetching:(this.#V(l),i&&this.#R(l),u))}else s&&(s.get="miss")}#H(e,r){this.#y[r]=e,this.#g[e]=r}#V(e){e!==this.#f&&(e===this.#m?this.#m=this.#g[e]:this.#H(this.#y[e],this.#g[e]),this.#H(this.#f,e),this.#f=e)}delete(e){return this.#D(e,"delete")}#D(e,r){let n=!1;if(this.#l!==0){let i=this.#s.get(e);if(i!==void 0)if(n=!0,this.#l===1)this.#B(r);else{this.#I(i);let o=this.#i[i];if(this.#u(o)?o.__abortController.abort(new Error("deleted")):(this.#v||this.#d)&&(this.#v&&this.#o?.(o,e,r),this.#d&&this.#h?.push([o,e,r])),this.#s.delete(e),this.#c[i]=void 0,this.#i[i]=void 0,i===this.#f)this.#f=this.#y[i];else if(i===this.#m)this.#m=this.#g[i];else{let s=this.#y[i];this.#g[s]=this.#g[i];let l=this.#g[i];this.#y[l]=this.#y[i]}this.#l--,this.#w.push(i)}}if(this.#d&&this.#h?.length){let i=this.#h,o;for(;o=i?.shift();)this.#n?.(...o)}return n}clear(){return this.#B("delete")}#B(e){for(let r of this.#P({allowStale:!0})){let n=this.#i[r];if(this.#u(n))n.__abortController.abort(new Error("deleted"));else{let i=this.#c[r];this.#v&&this.#o?.(n,i,e),this.#d&&this.#h?.push([n,i,e])}}if(this.#s.clear(),this.#i.fill(void 0),this.#c.fill(void 0),this.#T&&this.#E&&(this.#T.fill(0),this.#E.fill(0)),this.#_&&this.#_.fill(0),this.#m=0,this.#f=0,this.#w.length=0,this.#p=0,this.#l=0,this.#d&&this.#h){let r=this.#h,n;for(;n=r?.shift();)this.#n?.(...n)}}};var wc=require("node:path"),bC=require("node:url"),fi=require("fs"),WY=br(require("node:fs"),1),No=require("node:fs/promises");var Ty=require("node:events"),Mb=br(require("node:stream"),1),yC=require("node:string_decoder"),mC=typeof process=="object"&&process?process:{stdout:null,stderr:null},IY=t=>!!t&&typeof t=="object"&&(t instanceof Oo||t instanceof Mb.default||CY(t)||OY(t)),CY=t=>!!t&&typeof t=="object"&&t instanceof Ty.EventEmitter&&typeof t.pipe=="function"&&t.pipe!==Mb.default.Writable.prototype.pipe,OY=t=>!!t&&typeof t=="object"&&t instanceof Ty.EventEmitter&&typeof t.write=="function"&&typeof t.end=="function",Bi=Symbol("EOF"),Wi=Symbol("maybeEmitEnd"),Co=Symbol("emittedEnd"),my=Symbol("emittingEnd"),Pu=Symbol("emittedError"),dy=Symbol("closed"),dC=Symbol("read"),hy=Symbol("flush"),hC=Symbol("flushChunk"),Wn=Symbol("encoding"),vc=Symbol("decoder"),Ct=Symbol("flowing"),Au=Symbol("paused"),bc=Symbol("resume"),Ot=Symbol("buffer"),hr=Symbol("pipes"),Nt=Symbol("bufferLength"),_b=Symbol("bufferPush"),gy=Symbol("bufferShift"),tr=Symbol("objectMode"),Tt=Symbol("destroyed"),Eb=Symbol("error"),Rb=Symbol("emitData"),gC=Symbol("emitEnd"),kb=Symbol("emitEnd2"),ui=Symbol("async"),Pb=Symbol("abort"),yy=Symbol("aborted"),Mu=Symbol("signal"),Ia=Symbol("dataListeners"),Jr=Symbol("discarded"),Du=t=>Promise.resolve().then(t),NY=t=>t(),LY=t=>t==="end"||t==="finish"||t==="prefinish",UY=t=>t instanceof ArrayBuffer||!!t&&typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,HY=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),xy=class{src;dest;opts;ondrain;constructor(e,r,n){this.src=e,this.dest=r,this.opts=n,this.ondrain=()=>e[bc](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(e){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},Ab=class extends xy{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,r,n){super(e,r,n),this.proxyErrors=i=>r.emit("error",i),e.on("error",this.proxyErrors)}},VY=t=>!!t.objectMode,BY=t=>!t.objectMode&&!!t.encoding&&t.encoding!=="buffer",Oo=class extends Ty.EventEmitter{[Ct]=!1;[Au]=!1;[hr]=[];[Ot]=[];[tr];[Wn];[ui];[vc];[Bi]=!1;[Co]=!1;[my]=!1;[dy]=!1;[Pu]=null;[Nt]=0;[Tt]=!1;[Mu];[yy]=!1;[Ia]=0;[Jr]=!1;writable=!0;readable=!0;constructor(...e){let r=e[0]||{};if(super(),r.objectMode&&typeof r.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");VY(r)?(this[tr]=!0,this[Wn]=null):BY(r)?(this[Wn]=r.encoding,this[tr]=!1):(this[tr]=!1,this[Wn]=null),this[ui]=!!r.async,this[vc]=this[Wn]?new yC.StringDecoder(this[Wn]):null,r&&r.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[Ot]}),r&&r.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[hr]});let{signal:n}=r;n&&(this[Mu]=n,n.aborted?this[Pb]():n.addEventListener("abort",()=>this[Pb]()))}get bufferLength(){return this[Nt]}get encoding(){return this[Wn]}set encoding(e){throw new Error("Encoding must be set at instantiation time")}setEncoding(e){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[tr]}set objectMode(e){throw new Error("objectMode must be set at instantiation time")}get async(){return this[ui]}set async(e){this[ui]=this[ui]||!!e}[Pb](){this[yy]=!0,this.emit("abort",this[Mu]?.reason),this.destroy(this[Mu]?.reason)}get aborted(){return this[yy]}set aborted(e){}write(e,r,n){if(this[yy])return!1;if(this[Bi])throw new Error("write after end");if(this[Tt])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof r=="function"&&(n=r,r="utf8"),r||(r="utf8");let i=this[ui]?Du:NY;if(!this[tr]&&!Buffer.isBuffer(e)){if(HY(e))e=Buffer.from(e.buffer,e.byteOffset,e.byteLength);else if(UY(e))e=Buffer.from(e);else if(typeof e!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[tr]?(this[Ct]&&this[Nt]!==0&&this[hy](!0),this[Ct]?this.emit("data",e):this[_b](e),this[Nt]!==0&&this.emit("readable"),n&&i(n),this[Ct]):e.length?(typeof e=="string"&&!(r===this[Wn]&&!this[vc]?.lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[Wn]&&(e=this[vc].write(e)),this[Ct]&&this[Nt]!==0&&this[hy](!0),this[Ct]?this.emit("data",e):this[_b](e),this[Nt]!==0&&this.emit("readable"),n&&i(n),this[Ct]):(this[Nt]!==0&&this.emit("readable"),n&&i(n),this[Ct])}read(e){if(this[Tt])return null;if(this[Jr]=!1,this[Nt]===0||e===0||e&&e>this[Nt])return this[Wi](),null;this[tr]&&(e=null),this[Ot].length>1&&!this[tr]&&(this[Ot]=[this[Wn]?this[Ot].join(""):Buffer.concat(this[Ot],this[Nt])]);let r=this[dC](e||null,this[Ot][0]);return this[Wi](),r}[dC](e,r){if(this[tr])this[gy]();else{let n=r;e===n.length||e===null?this[gy]():typeof n=="string"?(this[Ot][0]=n.slice(e),r=n.slice(0,e),this[Nt]-=e):(this[Ot][0]=n.subarray(e),r=n.subarray(0,e),this[Nt]-=e)}return this.emit("data",r),!this[Ot].length&&!this[Bi]&&this.emit("drain"),r}end(e,r,n){return typeof e=="function"&&(n=e,e=void 0),typeof r=="function"&&(n=r,r="utf8"),e!==void 0&&this.write(e,r),n&&this.once("end",n),this[Bi]=!0,this.writable=!1,(this[Ct]||!this[Au])&&this[Wi](),this}[bc](){this[Tt]||(!this[Ia]&&!this[hr].length&&(this[Jr]=!0),this[Au]=!1,this[Ct]=!0,this.emit("resume"),this[Ot].length?this[hy]():this[Bi]?this[Wi]():this.emit("drain"))}resume(){return this[bc]()}pause(){this[Ct]=!1,this[Au]=!0,this[Jr]=!1}get destroyed(){return this[Tt]}get flowing(){return this[Ct]}get paused(){return this[Au]}[_b](e){this[tr]?this[Nt]+=1:this[Nt]+=e.length,this[Ot].push(e)}[gy](){return this[tr]?this[Nt]-=1:this[Nt]-=this[Ot][0].length,this[Ot].shift()}[hy](e=!1){do;while(this[hC](this[gy]())&&this[Ot].length);!e&&!this[Ot].length&&!this[Bi]&&this.emit("drain")}[hC](e){return this.emit("data",e),this[Ct]}pipe(e,r){if(this[Tt])return e;this[Jr]=!1;let n=this[Co];return r=r||{},e===mC.stdout||e===mC.stderr?r.end=!1:r.end=r.end!==!1,r.proxyErrors=!!r.proxyErrors,n?r.end&&e.end():(this[hr].push(r.proxyErrors?new Ab(this,e,r):new xy(this,e,r)),this[ui]?Du(()=>this[bc]()):this[bc]()),e}unpipe(e){let r=this[hr].find(n=>n.dest===e);r&&(this[hr].length===1?(this[Ct]&&this[Ia]===0&&(this[Ct]=!1),this[hr]=[]):this[hr].splice(this[hr].indexOf(r),1),r.unpipe())}addListener(e,r){return this.on(e,r)}on(e,r){let n=super.on(e,r);if(e==="data")this[Jr]=!1,this[Ia]++,!this[hr].length&&!this[Ct]&&this[bc]();else if(e==="readable"&&this[Nt]!==0)super.emit("readable");else if(LY(e)&&this[Co])super.emit(e),this.removeAllListeners(e);else if(e==="error"&&this[Pu]){let i=r;this[ui]?Du(()=>i.call(this,this[Pu])):i.call(this,this[Pu])}return n}removeListener(e,r){return this.off(e,r)}off(e,r){let n=super.off(e,r);return e==="data"&&(this[Ia]=this.listeners("data").length,this[Ia]===0&&!this[Jr]&&!this[hr].length&&(this[Ct]=!1)),n}removeAllListeners(e){let r=super.removeAllListeners(e);return(e==="data"||e===void 0)&&(this[Ia]=0,!this[Jr]&&!this[hr].length&&(this[Ct]=!1)),r}get emittedEnd(){return this[Co]}[Wi](){!this[my]&&!this[Co]&&!this[Tt]&&this[Ot].length===0&&this[Bi]&&(this[my]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[dy]&&this.emit("close"),this[my]=!1)}emit(e,...r){let n=r[0];if(e!=="error"&&e!=="close"&&e!==Tt&&this[Tt])return!1;if(e==="data")return!this[tr]&&!n?!1:this[ui]?(Du(()=>this[Rb](n)),!0):this[Rb](n);if(e==="end")return this[gC]();if(e==="close"){if(this[dy]=!0,!this[Co]&&!this[Tt])return!1;let o=super.emit("close");return this.removeAllListeners("close"),o}else if(e==="error"){this[Pu]=n,super.emit(Eb,n);let o=!this[Mu]||this.listeners("error").length?super.emit("error",n):!1;return this[Wi](),o}else if(e==="resume"){let o=super.emit("resume");return this[Wi](),o}else if(e==="finish"||e==="prefinish"){let o=super.emit(e);return this.removeAllListeners(e),o}let i=super.emit(e,...r);return this[Wi](),i}[Rb](e){for(let n of this[hr])n.dest.write(e)===!1&&this.pause();let r=this[Jr]?!1:super.emit("data",e);return this[Wi](),r}[gC](){return this[Co]?!1:(this[Co]=!0,this.readable=!1,this[ui]?(Du(()=>this[kb]()),!0):this[kb]())}[kb](){if(this[vc]){let r=this[vc].end();if(r){for(let n of this[hr])n.dest.write(r);this[Jr]||super.emit("data",r)}}for(let r of this[hr])r.end();let e=super.emit("end");return this.removeAllListeners("end"),e}async collect(){let e=Object.assign([],{dataLength:0});this[tr]||(e.dataLength=0);let r=this.promise();return this.on("data",n=>{e.push(n),this[tr]||(e.dataLength+=n.length)}),await r,e}async concat(){if(this[tr])throw new Error("cannot concat in objectMode");let e=await this.collect();return this[Wn]?e.join(""):Buffer.concat(e,e.dataLength)}async promise(){return new Promise((e,r)=>{this.on(Tt,()=>r(new Error("stream destroyed"))),this.on("error",n=>r(n)),this.on("end",()=>e())})}[Symbol.asyncIterator](){this[Jr]=!1;let e=!1,r=async()=>(this.pause(),e=!0,{value:void 0,done:!0});return{next:()=>{if(e)return r();let i=this.read();if(i!==null)return Promise.resolve({done:!1,value:i});if(this[Bi])return r();let o,s,l=d=>{this.off("data",u),this.off("end",p),this.off(Tt,m),r(),s(d)},u=d=>{this.off("error",l),this.off("end",p),this.off(Tt,m),this.pause(),o({value:d,done:!!this[Bi]})},p=()=>{this.off("error",l),this.off("data",u),this.off(Tt,m),r(),o({done:!0,value:void 0})},m=()=>l(new Error("stream destroyed"));return new Promise((d,g)=>{s=g,o=d,this.once(Tt,m),this.once("error",l),this.once("end",p),this.once("data",u)})},throw:r,return:r,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[Jr]=!1;let e=!1,r=()=>(this.pause(),this.off(Eb,r),this.off(Tt,r),this.off("end",r),e=!0,{done:!0,value:void 0}),n=()=>{if(e)return r();let i=this.read();return i===null?r():{done:!1,value:i}};return this.once("end",r),this.once(Eb,r),this.once(Tt,r),{next:n,throw:r,return:r,[Symbol.iterator](){return this}}}destroy(e){if(this[Tt])return e?this.emit("error",e):this.emit(Tt),this;this[Tt]=!0,this[Jr]=!0,this[Ot].length=0,this[Nt]=0;let r=this;return typeof r.close=="function"&&!this[dy]&&r.close(),e?this.emit("error",e):this.emit(Tt),this}static get isStream(){return IY}};var $Y=fi.realpathSync.native,Iu={lstatSync:fi.lstatSync,readdir:fi.readdir,readdirSync:fi.readdirSync,readlinkSync:fi.readlinkSync,realpathSync:$Y,promises:{lstat:No.lstat,readdir:No.readdir,readlink:No.readlink,realpath:No.realpath}},wC=t=>!t||t===Iu||t===WY?Iu:{...Iu,...t,promises:{...Iu.promises,...t.promises||{}}},_C=/^\\\\\?\\([a-z]:)\\?$/i,jY=t=>t.replace(/\//g,"\\").replace(_C,"$1\\"),qY=/[\\\/]/,wn=0,EC=1,RC=2,pi=4,kC=6,PC=8,Ca=10,AC=12,bn=15,Fu=~bn,Db=16,xC=32,Cu=64,$n=128,Sy=256,by=512,TC=Cu|$n|by,zY=1023,Fb=t=>t.isFile()?PC:t.isDirectory()?pi:t.isSymbolicLink()?Ca:t.isCharacterDevice()?RC:t.isBlockDevice()?kC:t.isSocket()?AC:t.isFIFO()?EC:wn,SC=new Map,Ou=t=>{let e=SC.get(t);if(e)return e;let r=t.normalize("NFKD");return SC.set(t,r),r},vC=new Map,vy=t=>{let e=vC.get(t);if(e)return e;let r=Ou(t.toLowerCase());return vC.set(t,r),r},wy=class extends ku{constructor(){super({max:256})}},Ib=class extends ku{constructor(e=16*1024){super({maxSize:e,sizeCalculation:r=>r.length+1})}},MC=Symbol("PathScurry setAsCwd"),rr=class{name;root;roots;parent;nocase;isCWD=!1;#e;#t;get dev(){return this.#t}#o;get mode(){return this.#o}#n;get nlink(){return this.#n}#a;get uid(){return this.#a}#S;get gid(){return this.#S}#l;get rdev(){return this.#l}#p;get blksize(){return this.#p}#s;get ino(){return this.#s}#c;get size(){return this.#c}#i;get blocks(){return this.#i}#g;get atimeMs(){return this.#g}#y;get mtimeMs(){return this.#y}#m;get ctimeMs(){return this.#m}#f;get birthtimeMs(){return this.#f}#w;get atime(){return this.#w}#h;get mtime(){return this.#h}#_;get ctime(){return this.#_}#E;get birthtime(){return this.#E}#T;#v;#b;#d;#A;#R;#r;#F;#x;#M;get parentPath(){return(this.parent||this).fullpath()}get path(){return this.parentPath}constructor(e,r=wn,n,i,o,s,l){this.name=e,this.#T=o?vy(e):Ou(e),this.#r=r&zY,this.nocase=o,this.roots=i,this.root=n||this,this.#F=s,this.#b=l.fullpath,this.#A=l.relative,this.#R=l.relativePosix,this.parent=l.parent,this.parent?this.#e=this.parent.#e:this.#e=wC(l.fs)}depth(){return this.#v!==void 0?this.#v:this.parent?this.#v=this.parent.depth()+1:this.#v=0}childrenCache(){return this.#F}resolve(e){if(!e)return this;let r=this.getRootString(e),i=e.substring(r.length).split(this.splitSep);return r?this.getRoot(r).#I(i):this.#I(i)}#I(e){let r=this;for(let n of e)r=r.child(n);return r}children(){let e=this.#F.get(this);if(e)return e;let r=Object.assign([],{provisional:0});return this.#F.set(this,r),this.#r&=~Db,r}child(e,r){if(e===""||e===".")return this;if(e==="..")return this.parent||this;let n=this.children(),i=this.nocase?vy(e):Ou(e);for(let u of n)if(u.#T===i)return u;let o=this.parent?this.sep:"",s=this.#b?this.#b+o+e:void 0,l=this.newChild(e,wn,{...r,parent:this,fullpath:s});return this.canReaddir()||(l.#r|=$n),n.push(l),l}relative(){if(this.isCWD)return"";if(this.#A!==void 0)return this.#A;let e=this.name,r=this.parent;if(!r)return this.#A=this.name;let n=r.relative();return n+(!n||!r.parent?"":this.sep)+e}relativePosix(){if(this.sep==="/")return this.relative();if(this.isCWD)return"";if(this.#R!==void 0)return this.#R;let e=this.name,r=this.parent;if(!r)return this.#R=this.fullpathPosix();let n=r.relativePosix();return n+(!n||!r.parent?"":"/")+e}fullpath(){if(this.#b!==void 0)return this.#b;let e=this.name,r=this.parent;if(!r)return this.#b=this.name;let i=r.fullpath()+(r.parent?this.sep:"")+e;return this.#b=i}fullpathPosix(){if(this.#d!==void 0)return this.#d;if(this.sep==="/")return this.#d=this.fullpath();if(!this.parent){let i=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(i)?this.#d=`//?/${i}`:this.#d=i}let e=this.parent,r=e.fullpathPosix(),n=r+(!r||!e.parent?"":"/")+this.name;return this.#d=n}isUnknown(){return(this.#r&bn)===wn}isType(e){return this[`is${e}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#r&bn)===PC}isDirectory(){return(this.#r&bn)===pi}isCharacterDevice(){return(this.#r&bn)===RC}isBlockDevice(){return(this.#r&bn)===kC}isFIFO(){return(this.#r&bn)===EC}isSocket(){return(this.#r&bn)===AC}isSymbolicLink(){return(this.#r&Ca)===Ca}lstatCached(){return this.#r&xC?this:void 0}readlinkCached(){return this.#x}realpathCached(){return this.#M}readdirCached(){let e=this.children();return e.slice(0,e.provisional)}canReadlink(){if(this.#x)return!0;if(!this.parent)return!1;let e=this.#r&bn;return!(e!==wn&&e!==Ca||this.#r&Sy||this.#r&$n)}calledReaddir(){return!!(this.#r&Db)}isENOENT(){return!!(this.#r&$n)}isNamed(e){return this.nocase?this.#T===vy(e):this.#T===Ou(e)}async readlink(){let e=this.#x;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=await this.#e.promises.readlink(this.fullpath()),n=(await this.parent.realpath())?.resolve(r);if(n)return this.#x=n}catch(r){this.#u(r.code);return}}readlinkSync(){let e=this.#x;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=this.#e.readlinkSync(this.fullpath()),n=this.parent.realpathSync()?.resolve(r);if(n)return this.#x=n}catch(r){this.#u(r.code);return}}#C(e){this.#r|=Db;for(let r=e.provisional;r<e.length;r++){let n=e[r];n&&n.#O()}}#O(){this.#r&$n||(this.#r=(this.#r|$n)&Fu,this.#k())}#k(){let e=this.children();e.provisional=0;for(let r of e)r.#O()}#P(){this.#r|=by,this.#N()}#N(){if(this.#r&Cu)return;let e=this.#r;(e&bn)===pi&&(e&=Fu),this.#r=e|Cu,this.#k()}#L(e=""){e==="ENOTDIR"||e==="EPERM"?this.#N():e==="ENOENT"?this.#O():this.children().provisional=0}#U(e=""){e==="ENOTDIR"?this.parent.#N():e==="ENOENT"&&this.#O()}#u(e=""){let r=this.#r;r|=Sy,e==="ENOENT"&&(r|=$n),(e==="EINVAL"||e==="UNKNOWN")&&(r&=Fu),this.#r=r,e==="ENOTDIR"&&this.parent&&this.parent.#N()}#H(e,r){return this.#D(e,r)||this.#V(e,r)}#V(e,r){let n=Fb(e),i=this.newChild(e.name,n,{parent:this}),o=i.#r&bn;return o!==pi&&o!==Ca&&o!==wn&&(i.#r|=Cu),r.unshift(i),r.provisional++,i}#D(e,r){for(let n=r.provisional;n<r.length;n++){let i=r[n];if((this.nocase?vy(e.name):Ou(e.name))===i.#T)return this.#B(e,i,n,r)}}#B(e,r,n,i){let o=r.name;return r.#r=r.#r&Fu|Fb(e),o!==e.name&&(r.name=e.name),n!==i.provisional&&(n===i.length-1?i.pop():i.splice(n,1),i.unshift(r)),i.provisional++,r}async lstat(){if((this.#r&$n)===0)try{return this.#q(await this.#e.promises.lstat(this.fullpath())),this}catch(e){this.#U(e.code)}}lstatSync(){if((this.#r&$n)===0)try{return this.#q(this.#e.lstatSync(this.fullpath())),this}catch(e){this.#U(e.code)}}#q(e){let{atime:r,atimeMs:n,birthtime:i,birthtimeMs:o,blksize:s,blocks:l,ctime:u,ctimeMs:p,dev:m,gid:d,ino:g,mode:x,mtime:b,mtimeMs:v,nlink:I,rdev:F,size:V,uid:Z}=e;this.#w=r,this.#g=n,this.#E=i,this.#f=o,this.#p=s,this.#i=l,this.#_=u,this.#m=p,this.#t=m,this.#S=d,this.#s=g,this.#o=x,this.#h=b,this.#y=v,this.#n=I,this.#l=F,this.#c=V,this.#a=Z;let oe=Fb(e);this.#r=this.#r&Fu|oe|xC,oe!==wn&&oe!==pi&&oe!==Ca&&(this.#r|=Cu)}#$=[];#j=!1;#z(e){this.#j=!1;let r=this.#$.slice();this.#$.length=0,r.forEach(n=>n(null,e))}readdirCB(e,r=!1){if(!this.canReaddir()){r?e(null,[]):queueMicrotask(()=>e(null,[]));return}let n=this.children();if(this.calledReaddir()){let o=n.slice(0,n.provisional);r?e(null,o):queueMicrotask(()=>e(null,o));return}if(this.#$.push(e),this.#j)return;this.#j=!0;let i=this.fullpath();this.#e.readdir(i,{withFileTypes:!0},(o,s)=>{if(o)this.#L(o.code),n.provisional=0;else{for(let l of s)this.#H(l,n);this.#C(n)}this.#z(n.slice(0,n.provisional))})}#W;async readdir(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();if(this.#W)await this.#W;else{let n=()=>{};this.#W=new Promise(i=>n=i);try{for(let i of await this.#e.promises.readdir(r,{withFileTypes:!0}))this.#H(i,e);this.#C(e)}catch(i){this.#L(i.code),e.provisional=0}this.#W=void 0,n()}return e.slice(0,e.provisional)}readdirSync(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();try{for(let n of this.#e.readdirSync(r,{withFileTypes:!0}))this.#H(n,e);this.#C(e)}catch(n){this.#L(n.code),e.provisional=0}return e.slice(0,e.provisional)}canReaddir(){if(this.#r&TC)return!1;let e=bn&this.#r;return e===wn||e===pi||e===Ca}shouldWalk(e,r){return(this.#r&pi)===pi&&!(this.#r&TC)&&!e.has(this)&&(!r||r(this))}async realpath(){if(this.#M)return this.#M;if(!((by|Sy|$n)&this.#r))try{let e=await this.#e.promises.realpath(this.fullpath());return this.#M=this.resolve(e)}catch{this.#P()}}realpathSync(){if(this.#M)return this.#M;if(!((by|Sy|$n)&this.#r))try{let e=this.#e.realpathSync(this.fullpath());return this.#M=this.resolve(e)}catch{this.#P()}}[MC](e){if(e===this)return;e.isCWD=!1,this.isCWD=!0;let r=new Set([]),n=[],i=this;for(;i&&i.parent;)r.add(i),i.#A=n.join(this.sep),i.#R=n.join("/"),i=i.parent,n.push("..");for(i=e;i&&i.parent&&!r.has(i);)i.#A=void 0,i.#R=void 0,i=i.parent}},_y=class t extends rr{sep="\\";splitSep=qY;constructor(e,r=wn,n,i,o,s,l){super(e,r,n,i,o,s,l)}newChild(e,r=wn,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}getRootString(e){return wc.win32.parse(e).root}getRoot(e){if(e=jY(e.toUpperCase()),e===this.root.name)return this.root;for(let[r,n]of Object.entries(this.roots))if(this.sameRoot(e,r))return this.roots[e]=n;return this.roots[e]=new _c(e,this).root}sameRoot(e,r=this.root.name){return e=e.toUpperCase().replace(/\//g,"\\").replace(_C,"$1\\"),e===r}},Ey=class t extends rr{splitSep="/";sep="/";constructor(e,r=wn,n,i,o,s,l){super(e,r,n,i,o,s,l)}getRootString(e){return e.startsWith("/")?"/":""}getRoot(e){return this.root}newChild(e,r=wn,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}},Ry=class{root;rootPath;roots;cwd;#e;#t;#o;nocase;#n;constructor(e=process.cwd(),r,n,{nocase:i,childrenCacheSize:o=16*1024,fs:s=Iu}={}){this.#n=wC(s),(e instanceof URL||e.startsWith("file://"))&&(e=(0,bC.fileURLToPath)(e));let l=r.resolve(e);this.roots=Object.create(null),this.rootPath=this.parseRootPath(l),this.#e=new wy,this.#t=new wy,this.#o=new Ib(o);let u=l.substring(this.rootPath.length).split(n);if(u.length===1&&!u[0]&&u.pop(),i===void 0)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=i,this.root=this.newRoot(this.#n),this.roots[this.rootPath]=this.root;let p=this.root,m=u.length-1,d=r.sep,g=this.rootPath,x=!1;for(let b of u){let v=m--;p=p.child(b,{relative:new Array(v).fill("..").join(d),relativePosix:new Array(v).fill("..").join("/"),fullpath:g+=(x?"":d)+b}),x=!0}this.cwd=p}depth(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.depth()}childrenCache(){return this.#o}resolve(...e){let r="";for(let o=e.length-1;o>=0;o--){let s=e[o];if(!(!s||s===".")&&(r=r?`${s}/${r}`:s,this.isAbsolute(s)))break}let n=this.#e.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpath();return this.#e.set(r,i),i}resolvePosix(...e){let r="";for(let o=e.length-1;o>=0;o--){let s=e[o];if(!(!s||s===".")&&(r=r?`${s}/${r}`:s,this.isAbsolute(s)))break}let n=this.#t.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpathPosix();return this.#t.set(r,i),i}relative(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relative()}relativePosix(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relativePosix()}basename(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.name}dirname(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),(e.parent||e).fullpath()}async readdir(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof rr||(r=e,e=this.cwd);let{withFileTypes:n}=r;if(e.canReaddir()){let i=await e.readdir();return n?i:i.map(o=>o.name)}else return[]}readdirSync(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof rr||(r=e,e=this.cwd);let{withFileTypes:n=!0}=r;return e.canReaddir()?n?e.readdirSync():e.readdirSync().map(i=>i.name):[]}async lstat(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstat()}lstatSync(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstatSync()}async readlink(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof rr||(r=e.withFileTypes,e=this.cwd);let n=await e.readlink();return r?n:n?.fullpath()}readlinkSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof rr||(r=e.withFileTypes,e=this.cwd);let n=e.readlinkSync();return r?n:n?.fullpath()}async realpath(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof rr||(r=e.withFileTypes,e=this.cwd);let n=await e.realpath();return r?n:n?.fullpath()}realpathSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof rr||(r=e.withFileTypes,e=this.cwd);let n=e.realpathSync();return r?n:n?.fullpath()}async walk(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof rr||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=[];(!o||o(e))&&l.push(n?e:e.fullpath());let u=new Set,p=(d,g)=>{u.add(d),d.readdirCB((x,b)=>{if(x)return g(x);let v=b.length;if(!v)return g();let I=()=>{--v===0&&g()};for(let F of b)(!o||o(F))&&l.push(n?F:F.fullpath()),i&&F.isSymbolicLink()?F.realpath().then(V=>V?.isUnknown()?V.lstat():V).then(V=>V?.shouldWalk(u,s)?p(V,I):I()):F.shouldWalk(u,s)?p(F,I):I()},!0)},m=e;return new Promise((d,g)=>{p(m,x=>{if(x)return g(x);d(l)})})}walkSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof rr||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=[];(!o||o(e))&&l.push(n?e:e.fullpath());let u=new Set([e]);for(let p of u){let m=p.readdirSync();for(let d of m){(!o||o(d))&&l.push(n?d:d.fullpath());let g=d;if(d.isSymbolicLink()){if(!(i&&(g=d.realpathSync())))continue;g.isUnknown()&&g.lstatSync()}g.shouldWalk(u,s)&&u.add(g)}}return l}[Symbol.asyncIterator](){return this.iterate()}iterate(e=this.cwd,r={}){return typeof e=="string"?e=this.cwd.resolve(e):e instanceof rr||(r=e,e=this.cwd),this.stream(e,r)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof rr||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r;(!o||o(e))&&(yield n?e:e.fullpath());let l=new Set([e]);for(let u of l){let p=u.readdirSync();for(let m of p){(!o||o(m))&&(yield n?m:m.fullpath());let d=m;if(m.isSymbolicLink()){if(!(i&&(d=m.realpathSync())))continue;d.isUnknown()&&d.lstatSync()}d.shouldWalk(l,s)&&l.add(d)}}}stream(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof rr||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=new Oo({objectMode:!0});(!o||o(e))&&l.write(n?e:e.fullpath());let u=new Set,p=[e],m=0,d=()=>{let g=!1;for(;!g;){let x=p.shift();if(!x){m===0&&l.end();return}m++,u.add(x);let b=(I,F,V=!1)=>{if(I)return l.emit("error",I);if(i&&!V){let Z=[];for(let oe of F)oe.isSymbolicLink()&&Z.push(oe.realpath().then(ae=>ae?.isUnknown()?ae.lstat():ae));if(Z.length){Promise.all(Z).then(()=>b(null,F,!0));return}}for(let Z of F)Z&&(!o||o(Z))&&(l.write(n?Z:Z.fullpath())||(g=!0));m--;for(let Z of F){let oe=Z.realpathCached()||Z;oe.shouldWalk(u,s)&&p.push(oe)}g&&!l.flowing?l.once("drain",d):v||d()},v=!0;x.readdirCB(b,!0),v=!1}};return d(),l}streamSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof rr||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=new Oo({objectMode:!0}),u=new Set;(!o||o(e))&&l.write(n?e:e.fullpath());let p=[e],m=0,d=()=>{let g=!1;for(;!g;){let x=p.shift();if(!x){m===0&&l.end();return}m++,u.add(x);let b=x.readdirSync();for(let v of b)(!o||o(v))&&(l.write(n?v:v.fullpath())||(g=!0));m--;for(let v of b){let I=v;if(v.isSymbolicLink()){if(!(i&&(I=v.realpathSync())))continue;I.isUnknown()&&I.lstatSync()}I.shouldWalk(u,s)&&p.push(I)}}g&&!l.flowing&&l.once("drain",d)};return d(),l}chdir(e=this.cwd){let r=this.cwd;this.cwd=typeof e=="string"?this.cwd.resolve(e):e,this.cwd[MC](r)}},_c=class extends Ry{sep="\\";constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,wc.win32,"\\",{...r,nocase:n}),this.nocase=n;for(let i=this.cwd;i;i=i.parent)i.nocase=this.nocase}parseRootPath(e){return wc.win32.parse(e).root.toUpperCase()}newRoot(e){return new _y(this.rootPath,pi,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")||e.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(e)}},Ec=class extends Ry{sep="/";constructor(e=process.cwd(),r={}){let{nocase:n=!1}=r;super(e,wc.posix,"/",{...r,nocase:n}),this.nocase=n}parseRootPath(e){return"/"}newRoot(e){return new Ey(this.rootPath,pi,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")}},Nu=class extends Ec{constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,{...r,nocase:n})}},hHe=process.platform==="win32"?_y:Ey,DC=process.platform==="win32"?_c:process.platform==="darwin"?Nu:Ec;var GY=t=>t.length>=1,KY=t=>t.length>=1,Rc=class t{#e;#t;#o;length;#n;#a;#S;#l;#p;#s;#c=!0;constructor(e,r,n,i){if(!GY(e))throw new TypeError("empty pattern list");if(!KY(r))throw new TypeError("empty glob list");if(r.length!==e.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=e.length,n<0||n>=this.length)throw new TypeError("index out of range");if(this.#e=e,this.#t=r,this.#o=n,this.#n=i,this.#o===0){if(this.isUNC()){let[o,s,l,u,...p]=this.#e,[m,d,g,x,...b]=this.#t;p[0]===""&&(p.shift(),b.shift());let v=[o,s,l,u,""].join("/"),I=[m,d,g,x,""].join("/");this.#e=[v,...p],this.#t=[I,...b],this.length=this.#e.length}else if(this.isDrive()||this.isAbsolute()){let[o,...s]=this.#e,[l,...u]=this.#t;s[0]===""&&(s.shift(),u.shift());let p=o+"/",m=l+"/";this.#e=[p,...s],this.#t=[m,...u],this.length=this.#e.length}}}pattern(){return this.#e[this.#o]}isString(){return typeof this.#e[this.#o]=="string"}isGlobstar(){return this.#e[this.#o]===qt}isRegExp(){return this.#e[this.#o]instanceof RegExp}globString(){return this.#S=this.#S||(this.#o===0?this.isAbsolute()?this.#t[0]+this.#t.slice(1).join("/"):this.#t.join("/"):this.#t.slice(this.#o).join("/"))}hasMore(){return this.length>this.#o+1}rest(){return this.#a!==void 0?this.#a:this.hasMore()?(this.#a=new t(this.#e,this.#t,this.#o+1,this.#n),this.#a.#s=this.#s,this.#a.#p=this.#p,this.#a.#l=this.#l,this.#a):this.#a=null}isUNC(){let e=this.#e;return this.#p!==void 0?this.#p:this.#p=this.#n==="win32"&&this.#o===0&&e[0]===""&&e[1]===""&&typeof e[2]=="string"&&!!e[2]&&typeof e[3]=="string"&&!!e[3]}isDrive(){let e=this.#e;return this.#l!==void 0?this.#l:this.#l=this.#n==="win32"&&this.#o===0&&this.length>1&&typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0])}isAbsolute(){let e=this.#e;return this.#s!==void 0?this.#s:this.#s=e[0]===""&&e.length>1||this.isDrive()||this.isUNC()}root(){let e=this.#e[0];return typeof e=="string"&&this.isAbsolute()&&this.#o===0?e:""}checkFollowGlobstar(){return!(this.#o===0||!this.isGlobstar()||!this.#c)}markFollowGlobstar(){return this.#o===0||!this.isGlobstar()||!this.#c?!1:(this.#c=!1,!0)}};var QY=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",kc=class{relative;relativeChildren;absolute;absoluteChildren;platform;mmopts;constructor(e,{nobrace:r,nocase:n,noext:i,noglobstar:o,platform:s=QY}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[],this.platform=s,this.mmopts={dot:!0,nobrace:r,nocase:n,noext:i,noglobstar:o,optimizationLevel:2,platform:s,nocomment:!0,nonegate:!0};for(let l of e)this.add(l)}add(e){let r=new Xr(e,this.mmopts);for(let n=0;n<r.set.length;n++){let i=r.set[n],o=r.globParts[n];if(!i||!o)throw new Error("invalid pattern object");for(;i[0]==="."&&o[0]===".";)i.shift(),o.shift();let s=new Rc(i,o,0,this.platform),l=new Xr(s.globString(),this.mmopts),u=o[o.length-1]==="**",p=s.isAbsolute();p?this.absolute.push(l):this.relative.push(l),u&&(p?this.absoluteChildren.push(l):this.relativeChildren.push(l))}}ignored(e){let r=e.fullpath(),n=`${r}/`,i=e.relative()||".",o=`${i}/`;for(let s of this.relative)if(s.match(i)||s.match(o))return!0;for(let s of this.absolute)if(s.match(r)||s.match(n))return!0;return!1}childrenIgnored(e){let r=e.fullpath()+"/",n=(e.relative()||".")+"/";for(let i of this.relativeChildren)if(i.match(n))return!0;for(let i of this.absoluteChildren)if(i.match(r))return!0;return!1}};var Cb=class t{store;constructor(e=new Map){this.store=e}copy(){return new t(new Map(this.store))}hasWalked(e,r){return this.store.get(e.fullpath())?.has(r.globString())}storeWalked(e,r){let n=e.fullpath(),i=this.store.get(n);i?i.add(r.globString()):this.store.set(n,new Set([r.globString()]))}},Ob=class{store=new Map;add(e,r,n){let i=(r?2:0)|(n?1:0),o=this.store.get(e);this.store.set(e,o===void 0?i:i&o)}entries(){return[...this.store.entries()].map(([e,r])=>[e,!!(r&2),!!(r&1)])}},Nb=class{store=new Map;add(e,r){if(!e.canReaddir())return;let n=this.store.get(e);n?n.find(i=>i.globString()===r.globString())||n.push(r):this.store.set(e,[r])}get(e){let r=this.store.get(e);if(!r)throw new Error("attempting to walk unknown path");return r}entries(){return this.keys().map(e=>[e,this.store.get(e)])}keys(){return[...this.store.keys()].filter(e=>e.canReaddir())}},Lu=class t{hasWalkedCache;matches=new Ob;subwalks=new Nb;patterns;follow;dot;opts;constructor(e,r){this.opts=e,this.follow=!!e.follow,this.dot=!!e.dot,this.hasWalkedCache=r?r.copy():new Cb}processPatterns(e,r){this.patterns=r;let n=r.map(i=>[e,i]);for(let[i,o]of n){this.hasWalkedCache.storeWalked(i,o);let s=o.root(),l=o.isAbsolute()&&this.opts.absolute!==!1;if(s){i=i.resolve(s==="/"&&this.opts.root!==void 0?this.opts.root:s);let d=o.rest();if(d)o=d;else{this.matches.add(i,!0,!1);continue}}if(i.isENOENT())continue;let u,p,m=!1;for(;typeof(u=o.pattern())=="string"&&(p=o.rest());)i=i.resolve(u),o=p,m=!0;if(u=o.pattern(),p=o.rest(),m){if(this.hasWalkedCache.hasWalked(i,o))continue;this.hasWalkedCache.storeWalked(i,o)}if(typeof u=="string"){let d=u===".."||u===""||u===".";this.matches.add(i.resolve(u),l,d);continue}else if(u===qt){(!i.isSymbolicLink()||this.follow||o.checkFollowGlobstar())&&this.subwalks.add(i,o);let d=p?.pattern(),g=p?.rest();if(!p||(d===""||d===".")&&!g)this.matches.add(i,l,d===""||d===".");else if(d===".."){let x=i.parent||i;g?this.hasWalkedCache.hasWalked(x,g)||this.subwalks.add(x,g):this.matches.add(x,l,!0)}}else u instanceof RegExp&&this.subwalks.add(i,o)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new t(this.opts,this.hasWalkedCache)}filterEntries(e,r){let n=this.subwalks.get(e),i=this.child();for(let o of r)for(let s of n){let l=s.isAbsolute(),u=s.pattern(),p=s.rest();u===qt?i.testGlobstar(o,s,p,l):u instanceof RegExp?i.testRegExp(o,u,p,l):i.testString(o,u,p,l)}return i}testGlobstar(e,r,n,i){if((this.dot||!e.name.startsWith("."))&&(r.hasMore()||this.matches.add(e,i,!1),e.canReaddir()&&(this.follow||!e.isSymbolicLink()?this.subwalks.add(e,r):e.isSymbolicLink()&&(n&&r.checkFollowGlobstar()?this.subwalks.add(e,n):r.markFollowGlobstar()&&this.subwalks.add(e,r)))),n){let o=n.pattern();if(typeof o=="string"&&o!==".."&&o!==""&&o!==".")this.testString(e,o,n.rest(),i);else if(o===".."){let s=e.parent||e;this.subwalks.add(s,n)}else o instanceof RegExp&&this.testRegExp(e,o,n.rest(),i)}}testRegExp(e,r,n,i){r.test(e.name)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}testString(e,r,n,i){e.isNamed(r)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}};var ZY=(t,e)=>typeof t=="string"?new kc([t],e):Array.isArray(t)?new kc(t,e):t,ky=class{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#e=[];#t;#o;signal;maxDepth;includeChildMatches;constructor(e,r,n){if(this.patterns=e,this.path=r,this.opts=n,this.#o=!n.posix&&n.platform==="win32"?"\\":"/",this.includeChildMatches=n.includeChildMatches!==!1,(n.ignore||!this.includeChildMatches)&&(this.#t=ZY(n.ignore??[],n),!this.includeChildMatches&&typeof this.#t.add!="function")){let i="cannot ignore child matches, ignore lacks add() method.";throw new Error(i)}this.maxDepth=n.maxDepth||1/0,n.signal&&(this.signal=n.signal,this.signal.addEventListener("abort",()=>{this.#e.length=0}))}#n(e){return this.seen.has(e)||!!this.#t?.ignored?.(e)}#a(e){return!!this.#t?.childrenIgnored?.(e)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;this.paused=!1;let e;for(;!this.paused&&(e=this.#e.shift());)e()}onResume(e){this.signal?.aborted||(this.paused?this.#e.push(e):e())}async matchCheck(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||await e.realpath(),!n)return;e=n}let o=e.isUnknown()||this.opts.stat?await e.lstat():e;if(this.opts.follow&&this.opts.nodir&&o?.isSymbolicLink()){let s=await o.realpath();s&&(s.isUnknown()||this.opts.stat)&&await s.lstat()}return this.matchCheckTest(o,r)}matchCheckTest(e,r){return e&&(this.maxDepth===1/0||e.depth()<=this.maxDepth)&&(!r||e.canReaddir())&&(!this.opts.nodir||!e.isDirectory())&&(!this.opts.nodir||!this.opts.follow||!e.isSymbolicLink()||!e.realpathCached()?.isDirectory())&&!this.#n(e)?e:void 0}matchCheckSync(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||e.realpathSync(),!n)return;e=n}let o=e.isUnknown()||this.opts.stat?e.lstatSync():e;if(this.opts.follow&&this.opts.nodir&&o?.isSymbolicLink()){let s=o.realpathSync();s&&(s?.isUnknown()||this.opts.stat)&&s.lstatSync()}return this.matchCheckTest(o,r)}matchFinish(e,r){if(this.#n(e))return;if(!this.includeChildMatches&&this.#t?.add){let o=`${e.relativePosix()}/**`;this.#t.add(o)}let n=this.opts.absolute===void 0?r:this.opts.absolute;this.seen.add(e);let i=this.opts.mark&&e.isDirectory()?this.#o:"";if(this.opts.withFileTypes)this.matchEmit(e);else if(n){let o=this.opts.posix?e.fullpathPosix():e.fullpath();this.matchEmit(o+i)}else{let o=this.opts.posix?e.relativePosix():e.relative(),s=this.opts.dotRelative&&!o.startsWith(".."+this.#o)?"."+this.#o:"";this.matchEmit(o?s+o+i:"."+i)}}async match(e,r,n){let i=await this.matchCheck(e,n);i&&this.matchFinish(i,r)}matchSync(e,r,n){let i=this.matchCheckSync(e,n);i&&this.matchFinish(i,r)}walkCB(e,r,n){this.signal?.aborted&&n(),this.walkCB2(e,r,new Lu(this.opts),n)}walkCB2(e,r,n,i){if(this.#a(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2(e,r,n,i));return}n.processPatterns(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,u,p]of n.matches.entries())this.#n(l)||(o++,this.match(l,u,p).then(()=>s()));for(let l of n.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;o++;let u=l.readdirCached();l.calledReaddir()?this.walkCB3(l,u,n,s):l.readdirCB((p,m)=>this.walkCB3(l,m,n,s),!0)}s()}walkCB3(e,r,n,i){n=n.filterEntries(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,u,p]of n.matches.entries())this.#n(l)||(o++,this.match(l,u,p).then(()=>s()));for(let[l,u]of n.subwalks.entries())o++,this.walkCB2(l,u,n.child(),s);s()}walkCBSync(e,r,n){this.signal?.aborted&&n(),this.walkCB2Sync(e,r,new Lu(this.opts),n)}walkCB2Sync(e,r,n,i){if(this.#a(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2Sync(e,r,n,i));return}n.processPatterns(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,u,p]of n.matches.entries())this.#n(l)||this.matchSync(l,u,p);for(let l of n.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;o++;let u=l.readdirSync();this.walkCB3Sync(l,u,n,s)}s()}walkCB3Sync(e,r,n,i){n=n.filterEntries(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,u,p]of n.matches.entries())this.#n(l)||this.matchSync(l,u,p);for(let[l,u]of n.subwalks.entries())o++,this.walkCB2Sync(l,u,n.child(),s);s()}},Uu=class extends ky{matches=new Set;constructor(e,r,n){super(e,r,n)}matchEmit(e){this.matches.add(e)}async walk(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise((e,r)=>{this.walkCB(this.path,this.patterns,()=>{this.signal?.aborted?r(this.signal.reason):e(this.matches)})}),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>{if(this.signal?.aborted)throw this.signal.reason}),this.matches}},Hu=class extends ky{results;constructor(e,r,n){super(e,r,n),this.results=new Oo({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(e){this.results.write(e),this.results.flowing||this.pause()}stream(){let e=this.path;return e.isUnknown()?e.lstat().then(()=>{this.walkCB(e,this.patterns,()=>this.results.end())}):this.walkCB(e,this.patterns,()=>this.results.end()),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}};var YY=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",jn=class{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;includeChildMatches;opts;patterns;constructor(e,r){if(!r)throw new TypeError("glob options required");if(this.withFileTypes=!!r.withFileTypes,this.signal=r.signal,this.follow=!!r.follow,this.dot=!!r.dot,this.dotRelative=!!r.dotRelative,this.nodir=!!r.nodir,this.mark=!!r.mark,r.cwd?(r.cwd instanceof URL||r.cwd.startsWith("file://"))&&(r.cwd=(0,FC.fileURLToPath)(r.cwd)):this.cwd="",this.cwd=r.cwd||"",this.root=r.root,this.magicalBraces=!!r.magicalBraces,this.nobrace=!!r.nobrace,this.noext=!!r.noext,this.realpath=!!r.realpath,this.absolute=r.absolute,this.includeChildMatches=r.includeChildMatches!==!1,this.noglobstar=!!r.noglobstar,this.matchBase=!!r.matchBase,this.maxDepth=typeof r.maxDepth=="number"?r.maxDepth:1/0,this.stat=!!r.stat,this.ignore=r.ignore,this.withFileTypes&&this.absolute!==void 0)throw new Error("cannot set absolute and withFileTypes:true");if(typeof e=="string"&&(e=[e]),this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(e=e.map(u=>u.replace(/\\/g,"/"))),this.matchBase){if(r.noglobstar)throw new TypeError("base matching requires globstar");e=e.map(u=>u.includes("/")?u:`./**/${u}`)}if(this.pattern=e,this.platform=r.platform||YY,this.opts={...r,platform:this.platform},r.scurry){if(this.scurry=r.scurry,r.nocase!==void 0&&r.nocase!==r.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{let u=r.platform==="win32"?_c:r.platform==="darwin"?Nu:r.platform?Ec:DC;this.scurry=new u(this.cwd,{nocase:r.nocase,fs:r.fs})}this.nocase=this.scurry.nocase;let n=this.platform==="darwin"||this.platform==="win32",i={...r,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:n,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},o=this.pattern.map(u=>new Xr(u,i)),[s,l]=o.reduce((u,p)=>(u[0].push(...p.set),u[1].push(...p.globParts),u),[[],[]]);this.patterns=s.map((u,p)=>{let m=l[p];if(!m)throw new Error("invalid pattern object");return new Rc(u,m,0,this.platform)})}async walk(){return[...await new Uu(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walk()]}walkSync(){return[...new Uu(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walkSync()]}stream(){return new Hu(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).stream()}streamSync(){return new Hu(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}};var Lb=(t,e={})=>{Array.isArray(t)||(t=[t]);for(let r of t)if(new Xr(r,e).hasMagic())return!0;return!1};function Py(t,e={}){return new jn(t,e).streamSync()}function CC(t,e={}){return new jn(t,e).stream()}function OC(t,e={}){return new jn(t,e).walkSync()}async function IC(t,e={}){return new jn(t,e).walk()}function Ay(t,e={}){return new jn(t,e).iterateSync()}function NC(t,e={}){return new jn(t,e).iterate()}var XY=Py,JY=Object.assign(CC,{sync:Py}),eX=Ay,tX=Object.assign(NC,{sync:Ay}),rX=Object.assign(OC,{stream:Py,iterate:Ay}),Ub=Object.assign(IC,{glob:IC,globSync:OC,sync:rX,globStream:CC,stream:JY,globStreamSync:Py,streamSync:XY,globIterate:NC,iterate:tX,globIterateSync:Ay,iterateSync:eX,Glob:jn,hasMagic:Lb,escape:xc,unescape:Bn});Ub.glob=Ub;function LC(){let t=process.env.CURSORLESS_MODE;switch(t){case void 0:case"production":return"production";case"development":return"development";case"test":return"test";default:throw new Error(`Unexpected value for environment variable CURSORLESS_MODE: ${t}`)}}var GC=Object.defineProperty,oX=Object.getOwnPropertyNames,O=(t,e)=>GC(t,"name",{value:e,configurable:!0}),aX=(t,e)=>function(){return e||(0,t[oX(t)[0]])((e={exports:{}}).exports,e),e.exports},tw=(t,e)=>{for(var r in e)GC(t,r,{get:e[r],enumerable:!0})},sX=aX({"(disabled):util"(){}}),My={};tw(My,{addChainableMethod:()=>mw,addLengthGuard:()=>ju,addMethod:()=>uw,addProperty:()=>lw,checkError:()=>en,compareByInspect:()=>Cy,eql:()=>S1,expectTypes:()=>t1,flag:()=>ke,getActual:()=>Hy,getMessage:()=>iw,getName:()=>By,getOperator:()=>yw,getOwnEnumerableProperties:()=>gw,getOwnEnumerablePropertySymbols:()=>hw,getPathInfo:()=>cw,hasProperty:()=>Vy,inspect:()=>Ve,isNaN:()=>Oy,isProxyEnabled:()=>$u,isRegExp:()=>Ny,objDisplay:()=>Oa,overwriteChainableMethod:()=>dw,overwriteMethod:()=>fw,overwriteProperty:()=>pw,proxify:()=>Dc,test:()=>rw,transferFlags:()=>qn,type:()=>Je});var en={};tw(en,{compatibleConstructor:()=>ZC,compatibleInstance:()=>QC,compatibleMessage:()=>YC,getConstructorName:()=>XC,getMessage:()=>JC});function Uy(t){return t instanceof Error||Object.prototype.toString.call(t)==="[object Error]"}O(Uy,"isErrorInstance");function KC(t){return Object.prototype.toString.call(t)==="[object RegExp]"}O(KC,"isRegExp");function QC(t,e){return Uy(e)&&t===e}O(QC,"compatibleInstance");function ZC(t,e){return Uy(e)?t.constructor===e.constructor||t instanceof e.constructor:(typeof e=="object"||typeof e=="function")&&e.prototype?t.constructor===e||t instanceof e:!1}O(ZC,"compatibleConstructor");function YC(t,e){let r=typeof t=="string"?t:t.message;return KC(e)?e.test(r):typeof e=="string"?r.indexOf(e)!==-1:!1}O(YC,"compatibleMessage");function XC(t){let e=t;return Uy(t)?e=t.constructor.name:typeof t=="function"&&(e=t.name,e===""&&(e=new t().name||e)),e}O(XC,"getConstructorName");function JC(t){let e="";return t&&t.message?e=t.message:typeof t=="string"&&(e=t),e}O(JC,"getMessage");function ke(t,e,r){var n=t.__flags||(t.__flags=Object.create(null));if(arguments.length===3)n[e]=r;else return n[e]}O(ke,"flag");function rw(t,e){var r=ke(t,"negate"),n=e[0];return r?!n:n}O(rw,"test");function Je(t){if(typeof t>"u")return"undefined";if(t===null)return"null";let e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}O(Je,"type");var cX="captureStackTrace"in Error,Ke=class e1 extends Error{static{O(this,"AssertionError")}message;get name(){return"AssertionError"}get ok(){return!1}constructor(e="Unspecified AssertionError",r,n){super(e),this.message=e,cX&&Error.captureStackTrace(this,n||e1);for(let i in r)i in this||(this[i]=r[i])}toJSON(e){return{...this,name:this.name,message:this.message,ok:!1,stack:e!==!1?this.stack:void 0}}};function t1(t,e){var r=ke(t,"message"),n=ke(t,"ssfi");r=r?r+": ":"",t=ke(t,"object"),e=e.map(function(s){return s.toLowerCase()}),e.sort();var i=e.map(function(s,l){var u=~["a","e","i","o","u"].indexOf(s.charAt(0))?"an":"a",p=e.length>1&&l===e.length-1?"or ":"";return p+u+" "+s}).join(", "),o=Je(t).toLowerCase();if(!e.some(function(s){return o===s}))throw new Ke(r+"object tested must be "+i+", but "+o+" given",void 0,n)}O(t1,"expectTypes");function Hy(t,e){return e.length>4?e[4]:t._obj}O(Hy,"getActual");var UC={bold:["1","22"],dim:["2","22"],italic:["3","23"],underline:["4","24"],inverse:["7","27"],hidden:["8","28"],strike:["9","29"],black:["30","39"],red:["31","39"],green:["32","39"],yellow:["33","39"],blue:["34","39"],magenta:["35","39"],cyan:["36","39"],white:["37","39"],brightblack:["30;1","39"],brightred:["31;1","39"],brightgreen:["32;1","39"],brightyellow:["33;1","39"],brightblue:["34;1","39"],brightmagenta:["35;1","39"],brightcyan:["36;1","39"],brightwhite:["37;1","39"],grey:["90","39"]},lX={special:"cyan",number:"yellow",bigint:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",symbol:"green",date:"magenta",regexp:"red"},Ac="\u2026";function r1(t,e){let r=UC[lX[e]]||UC[e]||"";return r?`\x1B[${r[0]}m${String(t)}\x1B[${r[1]}m`:String(t)}O(r1,"colorise");function n1({showHidden:t=!1,depth:e=2,colors:r=!1,customInspect:n=!0,showProxy:i=!1,maxArrayLength:o=1/0,breakLength:s=1/0,seen:l=[],truncate:u=1/0,stylize:p=String}={},m){let d={showHidden:!!t,depth:Number(e),colors:!!r,customInspect:!!n,showProxy:!!i,maxArrayLength:Number(o),breakLength:Number(s),truncate:Number(u),seen:l,inspect:m,stylize:p};return d.colors&&(d.stylize=r1),d}O(n1,"normaliseOptions");function $i(t,e,r=Ac){t=String(t);let n=r.length,i=t.length;return n>e&&i>n?r:i>e&&i>n?`${t.slice(0,e-n)}${r}`:t}O($i,"truncate");function _n(t,e,r,n=", "){r=r||e.inspect;let i=t.length;if(i===0)return"";let o=e.truncate,s="",l="",u="";for(let p=0;p<i;p+=1){let m=p+1===t.length,d=p+2===t.length;u=`${Ac}(${t.length-p})`;let g=t[p];e.truncate=o-s.length-(m?0:n.length);let x=l||r(g,e)+(m?"":n),b=s.length+x.length,v=b+u.length;if(m&&b>o&&s.length+u.length<=o||!m&&!d&&v>o||(l=m?"":r(t[p+1],e)+(d?"":n),!m&&d&&v>o&&b+l.length>o))break;if(s+=x,!m&&!d&&b+l.length>=o){u=`${Ac}(${t.length-p-1})`;break}u=""}return`${s}${u}`}O(_n,"inspectList");function i1(t){return t.match(/^[a-zA-Z_][a-zA-Z_0-9]*$/)?t:JSON.stringify(t).replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'")}O(i1,"quoteComplexKey");function Mc([t,e],r){return r.truncate-=2,typeof t=="string"?t=i1(t):typeof t!="number"&&(t=`[${r.inspect(t,r)}]`),r.truncate-=t.length,e=r.inspect(e,r),`${t}: ${e}`}O(Mc,"inspectProperty");function o1(t,e){let r=Object.keys(t).slice(t.length);if(!t.length&&!r.length)return"[]";e.truncate-=4;let n=_n(t,e);e.truncate-=n.length;let i="";return r.length&&(i=_n(r.map(o=>[o,t[o]]),e,Mc)),`[ ${n}${i?`, ${i}`:""} ]`}O(o1,"inspectArray");var uX=O(t=>typeof Buffer=="function"&&t instanceof Buffer?"Buffer":t[Symbol.toStringTag]?t[Symbol.toStringTag]:t.constructor.name,"getArrayName");function mi(t,e){let r=uX(t);e.truncate-=r.length+4;let n=Object.keys(t).slice(t.length);if(!t.length&&!n.length)return`${r}[]`;let i="";for(let s=0;s<t.length;s++){let l=`${e.stylize($i(t[s],e.truncate),"number")}${s===t.length-1?"":", "}`;if(e.truncate-=l.length,t[s]!==t.length&&e.truncate<=3){i+=`${Ac}(${t.length-t[s]+1})`;break}i+=l}let o="";return n.length&&(o=_n(n.map(s=>[s,t[s]]),e,Mc)),`${r}[ ${i}${o?`, ${o}`:""} ]`}O(mi,"inspectTypedArray");function a1(t,e){let r=t.toJSON();if(r===null)return"Invalid Date";let n=r.split("T"),i=n[0];return e.stylize(`${i}T${$i(n[1],e.truncate-i.length-1)}`,"date")}O(a1,"inspectDate");function Bb(t,e){let r=t[Symbol.toStringTag]||"Function",n=t.name;return n?e.stylize(`[${r} ${$i(n,e.truncate-11)}]`,"special"):e.stylize(`[${r}]`,"special")}O(Bb,"inspectFunction");function s1([t,e],r){return r.truncate-=4,t=r.inspect(t,r),r.truncate-=t.length,e=r.inspect(e,r),`${t} => ${e}`}O(s1,"inspectMapEntry");function c1(t){let e=[];return t.forEach((r,n)=>{e.push([n,r])}),e}O(c1,"mapToEntries");function l1(t,e){return t.size-1<=0?"Map{}":(e.truncate-=7,`Map{ ${_n(c1(t),e,s1)} }`)}O(l1,"inspectMap");var pX=Number.isNaN||(t=>t!==t);function Wb(t,e){return pX(t)?e.stylize("NaN","number"):t===1/0?e.stylize("Infinity","number"):t===-1/0?e.stylize("-Infinity","number"):t===0?e.stylize(1/t===1/0?"+0":"-0","number"):e.stylize($i(String(t),e.truncate),"number")}O(Wb,"inspectNumber");function $b(t,e){let r=$i(t.toString(),e.truncate-1);return r!==Ac&&(r+="n"),e.stylize(r,"bigint")}O($b,"inspectBigInt");function u1(t,e){let r=t.toString().split("/")[2],n=e.truncate-(2+r.length),i=t.source;return e.stylize(`/${$i(i,n)}/${r}`,"regexp")}O(u1,"inspectRegExp");function p1(t){let e=[];return t.forEach(r=>{e.push(r)}),e}O(p1,"arrayFromSet");function f1(t,e){return t.size===0?"Set{}":(e.truncate-=7,`Set{ ${_n(p1(t),e)} }`)}O(f1,"inspectSet");var HC=new RegExp("['\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]","g"),fX={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"},mX=16,dX=4;function m1(t){return fX[t]||`\\u${`0000${t.charCodeAt(0).toString(mX)}`.slice(-dX)}`}O(m1,"escape");function jb(t,e){return HC.test(t)&&(t=t.replace(HC,m1)),e.stylize(`'${$i(t,e.truncate-2)}'`,"string")}O(jb,"inspectString");function qb(t){return"description"in Symbol.prototype?t.description?`Symbol(${t.description})`:"Symbol()":t.toString()}O(qb,"inspectSymbol");var d1=O(()=>"Promise{\u2026}","getPromiseValue");try{let{getPromiseDetails:t,kPending:e,kRejected:r}=process.binding("util");Array.isArray(t(Promise.resolve()))&&(d1=O((n,i)=>{let[o,s]=t(n);return o===e?"Promise{<pending>}":`Promise${o===r?"!":""}{${i.inspect(s,i)}}`},"getPromiseValue"))}catch{}var hX=d1;function Bu(t,e){let r=Object.getOwnPropertyNames(t),n=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[];if(r.length===0&&n.length===0)return"{}";if(e.truncate-=4,e.seen=e.seen||[],e.seen.indexOf(t)>=0)return"[Circular]";e.seen.push(t);let i=_n(r.map(l=>[l,t[l]]),e,Mc),o=_n(n.map(l=>[l,t[l]]),e,Mc);e.seen.pop();let s="";return i&&o&&(s=", "),`{ ${i}${s}${o} }`}O(Bu,"inspectObject");var Hb=typeof Symbol<"u"&&Symbol.toStringTag?Symbol.toStringTag:!1;function h1(t,e){let r="";return Hb&&Hb in t&&(r=t[Hb]),r=r||t.constructor.name,(!r||r==="_class")&&(r="<Anonymous Class>"),e.truncate-=r.length,`${r}${Bu(t,e)}`}O(h1,"inspectClass");function g1(t,e){return t.length===0?"Arguments[]":(e.truncate-=13,`Arguments[ ${_n(t,e)} ]`)}O(g1,"inspectArguments");var gX=["stack","line","column","name","message","fileName","lineNumber","columnNumber","number","description"];function y1(t,e){let r=Object.getOwnPropertyNames(t).filter(s=>gX.indexOf(s)===-1),n=t.name;e.truncate-=n.length;let i="";typeof t.message=="string"?i=$i(t.message,e.truncate):r.unshift("message"),i=i?`: ${i}`:"",e.truncate-=i.length+5;let o=_n(r.map(s=>[s,t[s]]),e,Mc);return`${n}${i}${o?` { ${o} }`:""}`}O(y1,"inspectObject");function x1([t,e],r){return r.truncate-=3,e?`${r.stylize(String(t),"yellow")}=${r.stylize(`"${e}"`,"string")}`:`${r.stylize(String(t),"yellow")}`}O(x1,"inspectAttribute");function Dy(t,e){return _n(t,e,nw,`
`)}O(Dy,"inspectHTMLCollection");function nw(t,e){let r=t.getAttributeNames(),n=t.tagName.toLowerCase(),i=e.stylize(`<${n}`,"special"),o=e.stylize(">","special"),s=e.stylize(`</${n}>`,"special");e.truncate-=n.length*2+5;let l="";r.length>0&&(l+=" ",l+=_n(r.map(m=>[m,t.getAttribute(m)]),e,x1," ")),e.truncate-=l.length;let u=e.truncate,p=Dy(t.children,e);return p&&p.length>u&&(p=`${Ac}(${t.children.length})`),`${i}${l}${o}${p}${s}`}O(nw,"inspectHTML");var yX=typeof Symbol=="function"&&typeof Symbol.for=="function",Vb=yX?Symbol.for("chai/inspect"):"@@chai/inspect",Pc=!1;try{let t=sX();Pc=t.inspect?t.inspect.custom:!1}catch{Pc=!1}var VC=new WeakMap,BC={},WC={undefined:(t,e)=>e.stylize("undefined","undefined"),null:(t,e)=>e.stylize("null","null"),boolean:(t,e)=>e.stylize(String(t),"boolean"),Boolean:(t,e)=>e.stylize(String(t),"boolean"),number:Wb,Number:Wb,bigint:$b,BigInt:$b,string:jb,String:jb,function:Bb,Function:Bb,symbol:qb,Symbol:qb,Array:o1,Date:a1,Map:l1,Set:f1,RegExp:u1,Promise:hX,WeakSet:(t,e)=>e.stylize("WeakSet{\u2026}","special"),WeakMap:(t,e)=>e.stylize("WeakMap{\u2026}","special"),Arguments:g1,Int8Array:mi,Uint8Array:mi,Uint8ClampedArray:mi,Int16Array:mi,Uint16Array:mi,Int32Array:mi,Uint32Array:mi,Float32Array:mi,Float64Array:mi,Generator:()=>"",DataView:()=>"",ArrayBuffer:()=>"",Error:y1,HTMLCollection:Dy,NodeList:Dy},xX=O((t,e,r)=>Vb in t&&typeof t[Vb]=="function"?t[Vb](e):Pc&&Pc in t&&typeof t[Pc]=="function"?t[Pc](e.depth,e):"inspect"in t&&typeof t.inspect=="function"?t.inspect(e.depth,e):"constructor"in t&&VC.has(t.constructor)?VC.get(t.constructor)(t,e):BC[r]?BC[r](t,e):"","inspectCustom"),TX=Object.prototype.toString;function Fy(t,e={}){let r=n1(e,Fy),{customInspect:n}=r,i=t===null?"null":typeof t;if(i==="object"&&(i=TX.call(t).slice(8,-1)),i in WC)return WC[i](t,r);if(n&&t){let s=xX(t,r,i);if(s)return typeof s=="string"?s:Fy(s,r)}let o=t?Object.getPrototypeOf(t):!1;return o===Object.prototype||o===null?Bu(t,r):t&&typeof HTMLElement=="function"&&t instanceof HTMLElement?nw(t,r):"constructor"in t?t.constructor!==Object?h1(t,r):Bu(t,r):t===Object(t)?Bu(t,r):r.stylize(String(t),i)}O(Fy,"inspect");var Ir={includeStack:!1,showDiff:!0,truncateThreshold:40,useProxy:!0,proxyExcludedKeys:["then","catch","inspect","toJSON"],deepEqual:null};function Ve(t,e,r,n){var i={colors:n,depth:typeof r>"u"?2:r,showHidden:e,truncate:Ir.truncateThreshold?Ir.truncateThreshold:1/0};return Fy(t,i)}O(Ve,"inspect");function Oa(t){var e=Ve(t),r=Object.prototype.toString.call(t);if(Ir.truncateThreshold&&e.length>=Ir.truncateThreshold){if(r==="[object Function]")return!t.name||t.name===""?"[Function]":"[Function: "+t.name+"]";if(r==="[object Array]")return"[ Array("+t.length+") ]";if(r==="[object Object]"){var n=Object.keys(t),i=n.length>2?n.splice(0,2).join(", ")+", ...":n.join(", ");return"{ Object ("+i+") }"}else return e}else return e}O(Oa,"objDisplay");function iw(t,e){var r=ke(t,"negate"),n=ke(t,"object"),i=e[3],o=Hy(t,e),s=r?e[2]:e[1],l=ke(t,"message");return typeof s=="function"&&(s=s()),s=s||"",s=s.replace(/#\{this\}/g,function(){return Oa(n)}).replace(/#\{act\}/g,function(){return Oa(o)}).replace(/#\{exp\}/g,function(){return Oa(i)}),l?l+": "+s:s}O(iw,"getMessage");function qn(t,e,r){var n=t.__flags||(t.__flags=Object.create(null));e.__flags||(e.__flags=Object.create(null)),r=arguments.length===3?r:!0;for(var i in n)(r||i!=="object"&&i!=="ssfi"&&i!=="lockSsfi"&&i!="message")&&(e.__flags[i]=n[i])}O(qn,"transferFlags");function zb(t){if(typeof t>"u")return"undefined";if(t===null)return"null";let e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}O(zb,"type");function ow(){this._key="chai/deep-eql__"+Math.random()+Date.now()}O(ow,"FakeMap");ow.prototype={get:O(function(e){return e[this._key]},"get"),set:O(function(e,r){Object.isExtensible(e)&&Object.defineProperty(e,this._key,{value:r,configurable:!0})},"set")};var T1=typeof WeakMap=="function"?WeakMap:ow;function Gb(t,e,r){if(!r||Na(t)||Na(e))return null;var n=r.get(t);if(n){var i=n.get(e);if(typeof i=="boolean")return i}return null}O(Gb,"memoizeCompare");function Vu(t,e,r,n){if(!(!r||Na(t)||Na(e))){var i=r.get(t);i?i.set(e,n):(i=new T1,i.set(e,n),r.set(t,i))}}O(Vu,"memoizeSet");var S1=Wu;function Wu(t,e,r){if(r&&r.comparator)return Kb(t,e,r);var n=aw(t,e);return n!==null?n:Kb(t,e,r)}O(Wu,"deepEqual");function aw(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e?!0:Na(t)||Na(e)?!1:null}O(aw,"simpleEqual");function Kb(t,e,r){r=r||{},r.memoize=r.memoize===!1?!1:r.memoize||new T1;var n=r&&r.comparator,i=Gb(t,e,r.memoize);if(i!==null)return i;var o=Gb(e,t,r.memoize);if(o!==null)return o;if(n){var s=n(t,e);if(s===!1||s===!0)return Vu(t,e,r.memoize,s),s;var l=aw(t,e);if(l!==null)return l}var u=zb(t);if(u!==zb(e))return Vu(t,e,r.memoize,!1),!1;Vu(t,e,r.memoize,!0);var p=v1(t,e,u,r);return Vu(t,e,r.memoize,p),p}O(Kb,"extensiveDeepEqual");function v1(t,e,r,n){switch(r){case"String":case"Number":case"Boolean":case"Date":return Wu(t.valueOf(),e.valueOf());case"Promise":case"Symbol":case"function":case"WeakMap":case"WeakSet":return t===e;case"Error":return sw(t,e,["name","message","code"],n);case"Arguments":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"Array":return Lo(t,e,n);case"RegExp":return b1(t,e);case"Generator":return w1(t,e,n);case"DataView":return Lo(new Uint8Array(t.buffer),new Uint8Array(e.buffer),n);case"ArrayBuffer":return Lo(new Uint8Array(t),new Uint8Array(e),n);case"Set":return Qb(t,e,n);case"Map":return Qb(t,e,n);case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.Instant":case"Temporal.ZonedDateTime":case"Temporal.PlainYearMonth":case"Temporal.PlainMonthDay":return t.equals(e);case"Temporal.Duration":return t.total("nanoseconds")===e.total("nanoseconds");case"Temporal.TimeZone":case"Temporal.Calendar":return t.toString()===e.toString();default:return E1(t,e,n)}}O(v1,"extensiveDeepEqualByType");function b1(t,e){return t.toString()===e.toString()}O(b1,"regexpEqual");function Qb(t,e,r){if(t.size!==e.size)return!1;if(t.size===0)return!0;var n=[],i=[];return t.forEach(O(function(s,l){n.push([s,l])},"gatherEntries")),e.forEach(O(function(s,l){i.push([s,l])},"gatherEntries")),Lo(n.sort(),i.sort(),r)}O(Qb,"entriesEqual");function Lo(t,e,r){var n=t.length;if(n!==e.length)return!1;if(n===0)return!0;for(var i=-1;++i<n;)if(Wu(t[i],e[i],r)===!1)return!1;return!0}O(Lo,"iterableEqual");function w1(t,e,r){return Lo(Iy(t),Iy(e),r)}O(w1,"generatorEqual");function _1(t){return typeof Symbol<"u"&&typeof t=="object"&&typeof Symbol.iterator<"u"&&typeof t[Symbol.iterator]=="function"}O(_1,"hasIteratorFunction");function Zb(t){if(_1(t))try{return Iy(t[Symbol.iterator]())}catch{return[]}return[]}O(Zb,"getIteratorEntries");function Iy(t){for(var e=t.next(),r=[e.value];e.done===!1;)e=t.next(),r.push(e.value);return r}O(Iy,"getGeneratorEntries");function Yb(t){var e=[];for(var r in t)e.push(r);return e}O(Yb,"getEnumerableKeys");function Xb(t){for(var e=[],r=Object.getOwnPropertySymbols(t),n=0;n<r.length;n+=1){var i=r[n];Object.getOwnPropertyDescriptor(t,i).enumerable&&e.push(i)}return e}O(Xb,"getEnumerableSymbols");function sw(t,e,r,n){var i=r.length;if(i===0)return!0;for(var o=0;o<i;o+=1)if(Wu(t[r[o]],e[r[o]],n)===!1)return!1;return!0}O(sw,"keysEqual");function E1(t,e,r){var n=Yb(t),i=Yb(e),o=Xb(t),s=Xb(e);if(n=n.concat(o),i=i.concat(s),n.length&&n.length===i.length)return Lo(Jb(n).sort(),Jb(i).sort())===!1?!1:sw(t,e,n,r);var l=Zb(t),u=Zb(e);return l.length&&l.length===u.length?(l.sort(),u.sort(),Lo(l,u,r)):n.length===0&&l.length===0&&i.length===0&&u.length===0}O(E1,"objectEqual");function Na(t){return t===null||typeof t!="object"}O(Na,"isPrimitive");function Jb(t){return t.map(O(function(r){return typeof r=="symbol"?r.toString():r},"mapSymbol"))}O(Jb,"mapSymbols");function Vy(t,e){return typeof t>"u"||t===null?!1:e in Object(t)}O(Vy,"hasProperty");function R1(t){return t.replace(/([^\\])\[/g,"$1.[").match(/(\\\.|[^.]+?)+/g).map(n=>{if(n==="constructor"||n==="__proto__"||n==="prototype")return{};let o=/^\[(\d+)\]$/.exec(n),s=null;return o?s={i:parseFloat(o[1])}:s={p:n.replace(/\\([.[\]])/g,"$1")},s})}O(R1,"parsePath");function ew(t,e,r){let n=t,i=null;r=typeof r>"u"?e.length:r;for(let o=0;o<r;o++){let s=e[o];n&&(typeof s.p>"u"?n=n[s.i]:n=n[s.p],o===r-1&&(i=n))}return i}O(ew,"internalGetPathValue");function cw(t,e){let r=R1(e),n=r[r.length-1],i={parent:r.length>1?ew(t,r,r.length-1):t,name:n.p||n.i,value:ew(t,r)};return i.exists=Vy(i.parent,i.name),i}O(cw,"getPathInfo");function _(t,e,r,n){return ke(this,"ssfi",r||_),ke(this,"lockSsfi",n),ke(this,"object",t),ke(this,"message",e),ke(this,"eql",Ir.deepEqual||S1),Dc(this)}O(_,"Assertion");Object.defineProperty(_,"includeStack",{get:function(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),Ir.includeStack},set:function(t){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),Ir.includeStack=t}});Object.defineProperty(_,"showDiff",{get:function(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),Ir.showDiff},set:function(t){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),Ir.showDiff=t}});_.addProperty=function(t,e){lw(this.prototype,t,e)};_.addMethod=function(t,e){uw(this.prototype,t,e)};_.addChainableMethod=function(t,e,r){mw(this.prototype,t,e,r)};_.overwriteProperty=function(t,e){pw(this.prototype,t,e)};_.overwriteMethod=function(t,e){fw(this.prototype,t,e)};_.overwriteChainableMethod=function(t,e,r){dw(this.prototype,t,e,r)};_.prototype.assert=function(t,e,r,n,i,o){var s=rw(this,arguments);if(o!==!1&&(o=!0),n===void 0&&i===void 0&&(o=!1),Ir.showDiff!==!0&&(o=!1),!s){e=iw(this,arguments);var l=Hy(this,arguments),u={actual:l,expected:n,showDiff:o},p=yw(this,arguments);throw p&&(u.operator=p),new Ke(e,u,Ir.includeStack?this.assert:ke(this,"ssfi"))}};Object.defineProperty(_.prototype,"_obj",{get:function(){return ke(this,"object")},set:function(t){ke(this,"object",t)}});function $u(){return Ir.useProxy&&typeof Proxy<"u"&&typeof Reflect<"u"}O($u,"isProxyEnabled");function lw(t,e,r){r=r===void 0?function(){}:r,Object.defineProperty(t,e,{get:O(function n(){!$u()&&!ke(this,"lockSsfi")&&ke(this,"ssfi",n);var i=r.call(this);if(i!==void 0)return i;var o=new _;return qn(this,o),o},"propertyGetter"),configurable:!0})}O(lw,"addProperty");var SX=Object.getOwnPropertyDescriptor(function(){},"length");function ju(t,e,r){return SX.configurable&&Object.defineProperty(t,"length",{get:function(){throw Error(r?"Invalid Chai property: "+e+'.length. Due to a compatibility issue, "length" cannot directly follow "'+e+'". Use "'+e+'.lengthOf" instead.':"Invalid Chai property: "+e+'.length. See docs for proper usage of "'+e+'".')}}),t}O(ju,"addLengthGuard");function k1(t){var e=Object.getOwnPropertyNames(t);function r(i){e.indexOf(i)===-1&&e.push(i)}O(r,"addProperty");for(var n=Object.getPrototypeOf(t);n!==null;)Object.getOwnPropertyNames(n).forEach(r),n=Object.getPrototypeOf(n);return e}O(k1,"getProperties");var $C=["__flags","__methods","_obj","assert"];function Dc(t,e){return $u()?new Proxy(t,{get:O(function r(n,i){if(typeof i=="string"&&Ir.proxyExcludedKeys.indexOf(i)===-1&&!Reflect.has(n,i)){if(e)throw Error("Invalid Chai property: "+e+"."+i+'. See docs for proper usage of "'+e+'".');var o=null,s=4;throw k1(n).forEach(function(l){if(!Object.prototype.hasOwnProperty(l)&&$C.indexOf(l)===-1){var u=P1(i,l,s);u<s&&(o=l,s=u)}}),Error(o!==null?"Invalid Chai property: "+i+'. Did you mean "'+o+'"?':"Invalid Chai property: "+i)}return $C.indexOf(i)===-1&&!ke(n,"lockSsfi")&&ke(n,"ssfi",r),Reflect.get(n,i)},"proxyGetter")}):t}O(Dc,"proxify");function P1(t,e,r){if(Math.abs(t.length-e.length)>=r)return r;for(var n=[],i=0;i<=t.length;i++)n[i]=Array(e.length+1).fill(0),n[i][0]=i;for(var o=0;o<e.length;o++)n[0][o]=o;for(var i=1;i<=t.length;i++)for(var s=t.charCodeAt(i-1),o=1;o<=e.length;o++){if(Math.abs(i-o)>=r){n[i][o]=r;continue}n[i][o]=Math.min(n[i-1][o]+1,n[i][o-1]+1,n[i-1][o-1]+(s===e.charCodeAt(o-1)?0:1))}return n[t.length][e.length]}O(P1,"stringDistanceCapped");function uw(t,e,r){var n=O(function(){ke(this,"lockSsfi")||ke(this,"ssfi",n);var i=r.apply(this,arguments);if(i!==void 0)return i;var o=new _;return qn(this,o),o},"methodWrapper");ju(n,e,!1),t[e]=Dc(n,e)}O(uw,"addMethod");function pw(t,e,r){var n=Object.getOwnPropertyDescriptor(t,e),i=O(function(){},"_super");n&&typeof n.get=="function"&&(i=n.get),Object.defineProperty(t,e,{get:O(function o(){!$u()&&!ke(this,"lockSsfi")&&ke(this,"ssfi",o);var s=ke(this,"lockSsfi");ke(this,"lockSsfi",!0);var l=r(i).call(this);if(ke(this,"lockSsfi",s),l!==void 0)return l;var u=new _;return qn(this,u),u},"overwritingPropertyGetter"),configurable:!0})}O(pw,"overwriteProperty");function fw(t,e,r){var n=t[e],i=O(function(){throw new Error(e+" is not a function")},"_super");n&&typeof n=="function"&&(i=n);var o=O(function(){ke(this,"lockSsfi")||ke(this,"ssfi",o);var s=ke(this,"lockSsfi");ke(this,"lockSsfi",!0);var l=r(i).apply(this,arguments);if(ke(this,"lockSsfi",s),l!==void 0)return l;var u=new _;return qn(this,u),u},"overwritingMethodWrapper");ju(o,e,!1),t[e]=Dc(o,e)}O(fw,"overwriteMethod");var vX=typeof Object.setPrototypeOf=="function",jC=O(function(){},"testFn"),bX=Object.getOwnPropertyNames(jC).filter(function(t){var e=Object.getOwnPropertyDescriptor(jC,t);return typeof e!="object"?!0:!e.configurable}),wX=Function.prototype.call,_X=Function.prototype.apply;function mw(t,e,r,n){typeof n!="function"&&(n=O(function(){},"chainingBehavior"));var i={method:r,chainingBehavior:n};t.__methods||(t.__methods={}),t.__methods[e]=i,Object.defineProperty(t,e,{get:O(function(){i.chainingBehavior.call(this);var s=O(function(){ke(this,"lockSsfi")||ke(this,"ssfi",s);var p=i.method.apply(this,arguments);if(p!==void 0)return p;var m=new _;return qn(this,m),m},"chainableMethodWrapper");if(ju(s,e,!0),vX){var l=Object.create(this);l.call=wX,l.apply=_X,Object.setPrototypeOf(s,l)}else{var u=Object.getOwnPropertyNames(t);u.forEach(function(p){if(bX.indexOf(p)===-1){var m=Object.getOwnPropertyDescriptor(t,p);Object.defineProperty(s,p,m)}})}return qn(this,s),Dc(s)},"chainableMethodGetter"),configurable:!0})}O(mw,"addChainableMethod");function dw(t,e,r,n){var i=t.__methods[e],o=i.chainingBehavior;i.chainingBehavior=O(function(){var u=n(o).call(this);if(u!==void 0)return u;var p=new _;return qn(this,p),p},"overwritingChainableMethodGetter");var s=i.method;i.method=O(function(){var u=r(s).apply(this,arguments);if(u!==void 0)return u;var p=new _;return qn(this,p),p},"overwritingChainableMethodWrapper")}O(dw,"overwriteChainableMethod");function Cy(t,e){return Ve(t)<Ve(e)?-1:1}O(Cy,"compareByInspect");function hw(t){return typeof Object.getOwnPropertySymbols!="function"?[]:Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})}O(hw,"getOwnEnumerablePropertySymbols");function gw(t){return Object.keys(t).concat(hw(t))}O(gw,"getOwnEnumerableProperties");function A1(t){return t!==t}O(A1,"_isNaN");var Oy=Number.isNaN||A1;function M1(t){var e=Je(t),r=["Array","Object","Function"];return r.indexOf(e)!==-1}O(M1,"isObjectType");function yw(t,e){var r=ke(t,"operator"),n=ke(t,"negate"),i=e[3],o=n?e[2]:e[1];if(r)return r;if(typeof o=="function"&&(o=o()),o=o||"",!!o&&!/\shave\s/.test(o)){var s=M1(i);return/\snot\s/.test(o)?s?"notDeepStrictEqual":"notStrictEqual":s?"deepStrictEqual":"strictEqual"}}O(yw,"getOperator");function By(t){return t.name}O(By,"getName");function Ny(t){return Object.prototype.toString.call(t)==="[object RegExp]"}O(Ny,"isRegExp");var{flag:A}=My;["to","be","been","is","and","has","have","with","that","which","at","of","same","but","does","still","also"].forEach(function(t){_.addProperty(t)});_.addProperty("not",function(){A(this,"negate",!0)});_.addProperty("deep",function(){A(this,"deep",!0)});_.addProperty("nested",function(){A(this,"nested",!0)});_.addProperty("own",function(){A(this,"own",!0)});_.addProperty("ordered",function(){A(this,"ordered",!0)});_.addProperty("any",function(){A(this,"any",!0),A(this,"all",!1)});_.addProperty("all",function(){A(this,"all",!0),A(this,"any",!1)});var qC={function:["function","asyncfunction","generatorfunction","asyncgeneratorfunction"],asyncfunction:["asyncfunction","asyncgeneratorfunction"],generatorfunction:["generatorfunction","asyncgeneratorfunction"],asyncgeneratorfunction:["asyncgeneratorfunction"]};function xw(t,e){e&&A(this,"message",e),t=t.toLowerCase();var r=A(this,"object"),n=~["a","e","i","o","u"].indexOf(t.charAt(0))?"an ":"a ";let i=Je(r).toLowerCase();qC.function.includes(t)?this.assert(qC[t].includes(i),"expected #{this} to be "+n+t,"expected #{this} not to be "+n+t):this.assert(t===i,"expected #{this} to be "+n+t,"expected #{this} not to be "+n+t)}O(xw,"an");_.addChainableMethod("an",xw);_.addChainableMethod("a",xw);function D1(t,e){return Oy(t)&&Oy(e)||t===e}O(D1,"SameValueZero");function qu(){A(this,"contains",!0)}O(qu,"includeChainingBehavior");function zu(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=Je(r).toLowerCase(),i=A(this,"message"),o=A(this,"negate"),s=A(this,"ssfi"),l=A(this,"deep"),u=l?"deep ":"",p=l?A(this,"eql"):D1;i=i?i+": ":"";var m=!1;switch(n){case"string":m=r.indexOf(t)!==-1;break;case"weakset":if(l)throw new Ke(i+"unable to use .deep.include with WeakSet",void 0,s);m=r.has(t);break;case"map":r.forEach(function(b){m=m||p(b,t)});break;case"set":l?r.forEach(function(b){m=m||p(b,t)}):m=r.has(t);break;case"array":l?m=r.some(function(b){return p(b,t)}):m=r.indexOf(t)!==-1;break;default:if(t!==Object(t))throw new Ke(i+"the given combination of arguments ("+n+" and "+Je(t).toLowerCase()+") is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a "+Je(t).toLowerCase(),void 0,s);var d=Object.keys(t),g=null,x=0;if(d.forEach(function(b){var v=new _(r);if(qn(this,v,!0),A(v,"lockSsfi",!0),!o||d.length===1){v.property(b,t[b]);return}try{v.property(b,t[b])}catch(I){if(!en.compatibleConstructor(I,Ke))throw I;g===null&&(g=I),x++}},this),o&&d.length>1&&x===d.length)throw g;return}this.assert(m,"expected #{this} to "+u+"include "+Ve(t),"expected #{this} to not "+u+"include "+Ve(t))}O(zu,"include");_.addChainableMethod("include",zu,qu);_.addChainableMethod("contain",zu,qu);_.addChainableMethod("contains",zu,qu);_.addChainableMethod("includes",zu,qu);_.addProperty("ok",function(){this.assert(A(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")});_.addProperty("true",function(){this.assert(A(this,"object")===!0,"expected #{this} to be true","expected #{this} to be false",!A(this,"negate"))});_.addProperty("callable",function(){let t=A(this,"object"),e=A(this,"ssfi"),r=A(this,"message"),n=r?`${r}: `:"",i=A(this,"negate"),o=i?`${n}expected ${Ve(t)} not to be a callable function`:`${n}expected ${Ve(t)} to be a callable function`,s=["Function","AsyncFunction","GeneratorFunction","AsyncGeneratorFunction"].includes(Je(t));if(s&&i||!s&&!i)throw new Ke(o,void 0,e)});_.addProperty("false",function(){this.assert(A(this,"object")===!1,"expected #{this} to be false","expected #{this} to be true",!!A(this,"negate"))});_.addProperty("null",function(){this.assert(A(this,"object")===null,"expected #{this} to be null","expected #{this} not to be null")});_.addProperty("undefined",function(){this.assert(A(this,"object")===void 0,"expected #{this} to be undefined","expected #{this} not to be undefined")});_.addProperty("NaN",function(){this.assert(Oy(A(this,"object")),"expected #{this} to be NaN","expected #{this} not to be NaN")});function Tw(){var t=A(this,"object");this.assert(t!=null,"expected #{this} to exist","expected #{this} to not exist")}O(Tw,"assertExist");_.addProperty("exist",Tw);_.addProperty("exists",Tw);_.addProperty("empty",function(){var t=A(this,"object"),e=A(this,"ssfi"),r=A(this,"message"),n;switch(r=r?r+": ":"",Je(t).toLowerCase()){case"array":case"string":n=t.length;break;case"map":case"set":n=t.size;break;case"weakmap":case"weakset":throw new Ke(r+".empty was passed a weak collection",void 0,e);case"function":var i=r+".empty was passed a function "+By(t);throw new Ke(i.trim(),void 0,e);default:if(t!==Object(t))throw new Ke(r+".empty was passed non-string primitive "+Ve(t),void 0,e);n=Object.keys(t).length}this.assert(n===0,"expected #{this} to be empty","expected #{this} not to be empty")});function Sw(){var t=A(this,"object"),e=Je(t);this.assert(e==="Arguments","expected #{this} to be arguments but got "+e,"expected #{this} to not be arguments")}O(Sw,"checkArguments");_.addProperty("arguments",Sw);_.addProperty("Arguments",Sw);function Wy(t,e){e&&A(this,"message",e);var r=A(this,"object");if(A(this,"deep")){var n=A(this,"lockSsfi");A(this,"lockSsfi",!0),this.eql(t),A(this,"lockSsfi",n)}else this.assert(t===r,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",t,this._obj,!0)}O(Wy,"assertEqual");_.addMethod("equal",Wy);_.addMethod("equals",Wy);_.addMethod("eq",Wy);function vw(t,e){e&&A(this,"message",e);var r=A(this,"eql");this.assert(r(t,A(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",t,this._obj,!0)}O(vw,"assertEql");_.addMethod("eql",vw);_.addMethod("eqls",vw);function $y(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=A(this,"doLength"),i=A(this,"message"),o=i?i+": ":"",s=A(this,"ssfi"),l=Je(r).toLowerCase(),u=Je(t).toLowerCase(),p,m=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&u!=="date")p=o+"the argument to above must be a date";else if(u!=="number"&&(n||l==="number"))p=o+"the argument to above must be a number";else if(!n&&l!=="date"&&l!=="number"){var d=l==="string"?"'"+r+"'":r;p=o+"expected "+d+" to be a number or a date"}else m=!1;if(m)throw new Ke(p,void 0,s);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x>t,"expected #{this} to have a "+g+" above #{exp} but got #{act}","expected #{this} to not have a "+g+" above #{exp}",t,x)}else this.assert(r>t,"expected #{this} to be above #{exp}","expected #{this} to be at most #{exp}",t)}O($y,"assertAbove");_.addMethod("above",$y);_.addMethod("gt",$y);_.addMethod("greaterThan",$y);function jy(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=A(this,"doLength"),i=A(this,"message"),o=i?i+": ":"",s=A(this,"ssfi"),l=Je(r).toLowerCase(),u=Je(t).toLowerCase(),p,m=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&u!=="date")p=o+"the argument to least must be a date";else if(u!=="number"&&(n||l==="number"))p=o+"the argument to least must be a number";else if(!n&&l!=="date"&&l!=="number"){var d=l==="string"?"'"+r+"'":r;p=o+"expected "+d+" to be a number or a date"}else m=!1;if(m)throw new Ke(p,void 0,s);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x>=t,"expected #{this} to have a "+g+" at least #{exp} but got #{act}","expected #{this} to have a "+g+" below #{exp}",t,x)}else this.assert(r>=t,"expected #{this} to be at least #{exp}","expected #{this} to be below #{exp}",t)}O(jy,"assertLeast");_.addMethod("least",jy);_.addMethod("gte",jy);_.addMethod("greaterThanOrEqual",jy);function qy(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=A(this,"doLength"),i=A(this,"message"),o=i?i+": ":"",s=A(this,"ssfi"),l=Je(r).toLowerCase(),u=Je(t).toLowerCase(),p,m=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&u!=="date")p=o+"the argument to below must be a date";else if(u!=="number"&&(n||l==="number"))p=o+"the argument to below must be a number";else if(!n&&l!=="date"&&l!=="number"){var d=l==="string"?"'"+r+"'":r;p=o+"expected "+d+" to be a number or a date"}else m=!1;if(m)throw new Ke(p,void 0,s);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x<t,"expected #{this} to have a "+g+" below #{exp} but got #{act}","expected #{this} to not have a "+g+" below #{exp}",t,x)}else this.assert(r<t,"expected #{this} to be below #{exp}","expected #{this} to be at least #{exp}",t)}O(qy,"assertBelow");_.addMethod("below",qy);_.addMethod("lt",qy);_.addMethod("lessThan",qy);function zy(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=A(this,"doLength"),i=A(this,"message"),o=i?i+": ":"",s=A(this,"ssfi"),l=Je(r).toLowerCase(),u=Je(t).toLowerCase(),p,m=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&u!=="date")p=o+"the argument to most must be a date";else if(u!=="number"&&(n||l==="number"))p=o+"the argument to most must be a number";else if(!n&&l!=="date"&&l!=="number"){var d=l==="string"?"'"+r+"'":r;p=o+"expected "+d+" to be a number or a date"}else m=!1;if(m)throw new Ke(p,void 0,s);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x<=t,"expected #{this} to have a "+g+" at most #{exp} but got #{act}","expected #{this} to have a "+g+" above #{exp}",t,x)}else this.assert(r<=t,"expected #{this} to be at most #{exp}","expected #{this} to be above #{exp}",t)}O(zy,"assertMost");_.addMethod("most",zy);_.addMethod("lte",zy);_.addMethod("lessThanOrEqual",zy);_.addMethod("within",function(t,e,r){r&&A(this,"message",r);var n=A(this,"object"),i=A(this,"doLength"),o=A(this,"message"),s=o?o+": ":"",l=A(this,"ssfi"),u=Je(n).toLowerCase(),p=Je(t).toLowerCase(),m=Je(e).toLowerCase(),d,g=!0,x=p==="date"&&m==="date"?t.toISOString()+".."+e.toISOString():t+".."+e;if(i&&u!=="map"&&u!=="set"&&new _(n,o,l,!0).to.have.property("length"),!i&&u==="date"&&(p!=="date"||m!=="date"))d=s+"the arguments to within must be dates";else if((p!=="number"||m!=="number")&&(i||u==="number"))d=s+"the arguments to within must be numbers";else if(!i&&u!=="date"&&u!=="number"){var b=u==="string"?"'"+n+"'":n;d=s+"expected "+b+" to be a number or a date"}else g=!1;if(g)throw new Ke(d,void 0,l);if(i){var v="length",I;u==="map"||u==="set"?(v="size",I=n.size):I=n.length,this.assert(I>=t&&I<=e,"expected #{this} to have a "+v+" within "+x,"expected #{this} to not have a "+v+" within "+x)}else this.assert(n>=t&&n<=e,"expected #{this} to be within "+x,"expected #{this} to not be within "+x)});function bw(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=A(this,"ssfi"),i=A(this,"message");try{var o=r instanceof t}catch(l){throw l instanceof TypeError?(i=i?i+": ":"",new Ke(i+"The instanceof assertion needs a constructor but "+Je(t)+" was given.",void 0,n)):l}var s=By(t);s==null&&(s="an unnamed constructor"),this.assert(o,"expected #{this} to be an instance of "+s,"expected #{this} to not be an instance of "+s)}O(bw,"assertInstanceOf");_.addMethod("instanceof",bw);_.addMethod("instanceOf",bw);function ww(t,e,r){r&&A(this,"message",r);var n=A(this,"nested"),i=A(this,"own"),o=A(this,"message"),s=A(this,"object"),l=A(this,"ssfi"),u=typeof t;if(o=o?o+": ":"",n){if(u!=="string")throw new Ke(o+"the argument to property must be a string when using nested syntax",void 0,l)}else if(u!=="string"&&u!=="number"&&u!=="symbol")throw new Ke(o+"the argument to property must be a string, number, or symbol",void 0,l);if(n&&i)throw new Ke(o+'The "nested" and "own" flags cannot be combined.',void 0,l);if(s==null)throw new Ke(o+"Target cannot be null or undefined.",void 0,l);var p=A(this,"deep"),m=A(this,"negate"),d=n?cw(s,t):null,g=n?d.value:s[t],x=p?A(this,"eql"):(I,F)=>I===F,b="";p&&(b+="deep "),i&&(b+="own "),n&&(b+="nested "),b+="property ";var v;i?v=Object.prototype.hasOwnProperty.call(s,t):n?v=d.exists:v=Vy(s,t),(!m||arguments.length===1)&&this.assert(v,"expected #{this} to have "+b+Ve(t),"expected #{this} to not have "+b+Ve(t)),arguments.length>1&&this.assert(v&&x(e,g),"expected #{this} to have "+b+Ve(t)+" of #{exp}, but got #{act}","expected #{this} to not have "+b+Ve(t)+" of #{act}",e,g),A(this,"object",g)}O(ww,"assertProperty");_.addMethod("property",ww);function _w(t,e,r){A(this,"own",!0),ww.apply(this,arguments)}O(_w,"assertOwnProperty");_.addMethod("ownProperty",_w);_.addMethod("haveOwnProperty",_w);function Ew(t,e,r){typeof e=="string"&&(r=e,e=null),r&&A(this,"message",r);var n=A(this,"object"),i=Object.getOwnPropertyDescriptor(Object(n),t),o=A(this,"eql");i&&e?this.assert(o(e,i),"expected the own property descriptor for "+Ve(t)+" on #{this} to match "+Ve(e)+", got "+Ve(i),"expected the own property descriptor for "+Ve(t)+" on #{this} to not match "+Ve(e),e,i,!0):this.assert(i,"expected #{this} to have an own property descriptor for "+Ve(t),"expected #{this} to not have an own property descriptor for "+Ve(t)),A(this,"object",i)}O(Ew,"assertOwnPropertyDescriptor");_.addMethod("ownPropertyDescriptor",Ew);_.addMethod("haveOwnPropertyDescriptor",Ew);function Rw(){A(this,"doLength",!0)}O(Rw,"assertLengthChain");function kw(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=Je(r).toLowerCase(),i=A(this,"message"),o=A(this,"ssfi"),s="length",l;switch(n){case"map":case"set":s="size",l=r.size;break;default:new _(r,i,o,!0).to.have.property("length"),l=r.length}this.assert(l==t,"expected #{this} to have a "+s+" of #{exp} but got #{act}","expected #{this} to not have a "+s+" of #{act}",t,l)}O(kw,"assertLength");_.addChainableMethod("length",kw,Rw);_.addChainableMethod("lengthOf",kw,Rw);function Pw(t,e){e&&A(this,"message",e);var r=A(this,"object");this.assert(t.exec(r),"expected #{this} to match "+t,"expected #{this} not to match "+t)}O(Pw,"assertMatch");_.addMethod("match",Pw);_.addMethod("matches",Pw);_.addMethod("string",function(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=A(this,"message"),i=A(this,"ssfi");new _(r,n,i,!0).is.a("string"),this.assert(~r.indexOf(t),"expected #{this} to contain "+Ve(t),"expected #{this} to not contain "+Ve(t))});function Aw(t){var e=A(this,"object"),r=Je(e),n=Je(t),i=A(this,"ssfi"),o=A(this,"deep"),s,l="",u,p=!0,m=A(this,"message");m=m?m+": ":"";var d=m+"when testing keys against an object or an array you must give a single Array|Object|String argument or multiple String arguments";if(r==="Map"||r==="Set")l=o?"deeply ":"",u=[],e.forEach(function(V,Z){u.push(Z)}),n!=="Array"&&(t=Array.prototype.slice.call(arguments));else{switch(u=gw(e),n){case"Array":if(arguments.length>1)throw new Ke(d,void 0,i);break;case"Object":if(arguments.length>1)throw new Ke(d,void 0,i);t=Object.keys(t);break;default:t=Array.prototype.slice.call(arguments)}t=t.map(function(V){return typeof V=="symbol"?V:String(V)})}if(!t.length)throw new Ke(m+"keys required",void 0,i);var g=t.length,x=A(this,"any"),b=A(this,"all"),v=t,I=o?A(this,"eql"):(V,Z)=>V===Z;if(!x&&!b&&(b=!0),x&&(p=v.some(function(V){return u.some(function(Z){return I(V,Z)})})),b&&(p=v.every(function(V){return u.some(function(Z){return I(V,Z)})}),A(this,"contains")||(p=p&&t.length==u.length)),g>1){t=t.map(function(V){return Ve(V)});var F=t.pop();b&&(s=t.join(", ")+", and "+F),x&&(s=t.join(", ")+", or "+F)}else s=Ve(t[0]);s=(g>1?"keys ":"key ")+s,s=(A(this,"contains")?"contain ":"have ")+s,this.assert(p,"expected #{this} to "+l+s,"expected #{this} to not "+l+s,v.slice(0).sort(Cy),u.sort(Cy),!0)}O(Aw,"assertKeys");_.addMethod("keys",Aw);_.addMethod("key",Aw);function Gy(t,e,r){r&&A(this,"message",r);var n=A(this,"object"),i=A(this,"ssfi"),o=A(this,"message"),s=A(this,"negate")||!1;new _(n,o,i,!0).is.a("function"),(Ny(t)||typeof t=="string")&&(e=t,t=null);let l,u=!1;try{n()}catch(V){u=!0,l=V}var p=t===void 0&&e===void 0,m=!!(t&&e),d=!1,g=!1;if(p||!p&&!s){var x="an error";t instanceof Error?x="#{exp}":t&&(x=en.getConstructorName(t));let V=l;if(l instanceof Error)V=l.toString();else if(typeof l=="string")V=l;else if(l&&(typeof l=="object"||typeof l=="function"))try{V=en.getConstructorName(l)}catch{}this.assert(u,"expected #{this} to throw "+x,"expected #{this} to not throw an error but #{act} was thrown",t&&t.toString(),V)}if(t&&l){if(t instanceof Error){var b=en.compatibleInstance(l,t);b===s&&(m&&s?d=!0:this.assert(s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l&&!s?" but #{act} was thrown":""),t.toString(),l.toString()))}var v=en.compatibleConstructor(l,t);v===s&&(m&&s?d=!0:this.assert(s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&en.getConstructorName(t),l instanceof Error?l.toString():l&&en.getConstructorName(l)))}if(l&&e!==void 0&&e!==null){var I="including";Ny(e)&&(I="matching");var F=en.compatibleMessage(l,e);F===s&&(m&&s?g=!0:this.assert(s,"expected #{this} to throw error "+I+" #{exp} but got #{act}","expected #{this} to throw error not "+I+" #{exp}",e,en.getMessage(l)))}d&&g&&this.assert(s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&en.getConstructorName(t),l instanceof Error?l.toString():l&&en.getConstructorName(l)),A(this,"object",l)}O(Gy,"assertThrows");_.addMethod("throw",Gy);_.addMethod("throws",Gy);_.addMethod("Throw",Gy);function Mw(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=A(this,"itself"),i=typeof r=="function"&&!n?r.prototype[t]:r[t];this.assert(typeof i=="function","expected #{this} to respond to "+Ve(t),"expected #{this} to not respond to "+Ve(t))}O(Mw,"respondTo");_.addMethod("respondTo",Mw);_.addMethod("respondsTo",Mw);_.addProperty("itself",function(){A(this,"itself",!0)});function Dw(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=t(r);this.assert(n,"expected #{this} to satisfy "+Oa(t),"expected #{this} to not satisfy"+Oa(t),!A(this,"negate"),n)}O(Dw,"satisfy");_.addMethod("satisfy",Dw);_.addMethod("satisfies",Dw);function Fw(t,e,r){r&&A(this,"message",r);var n=A(this,"object"),i=A(this,"message"),o=A(this,"ssfi");if(new _(n,i,o,!0).is.a("number"),typeof t!="number"||typeof e!="number"){i=i?i+": ":"";var s=e===void 0?", and a delta is required":"";throw new Ke(i+"the arguments to closeTo or approximately must be numbers"+s,void 0,o)}this.assert(Math.abs(n-t)<=e,"expected #{this} to be close to "+t+" +/- "+e,"expected #{this} not to be close to "+t+" +/- "+e)}O(Fw,"closeTo");_.addMethod("closeTo",Fw);_.addMethod("approximately",Fw);function F1(t,e,r,n,i){let o=Array.from(e),s=Array.from(t);if(!n){if(s.length!==o.length)return!1;o=o.slice()}return s.every(function(l,u){if(i)return r?r(l,o[u]):l===o[u];if(!r){var p=o.indexOf(l);return p===-1?!1:(n||o.splice(p,1),!0)}return o.some(function(m,d){return r(l,m)?(n||o.splice(d,1),!0):!1})})}O(F1,"isSubsetOf");_.addMethod("members",function(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=A(this,"message"),i=A(this,"ssfi");new _(r,n,i,!0).to.be.iterable,new _(t,n,i,!0).to.be.iterable;var o=A(this,"contains"),s=A(this,"ordered"),l,u,p;o?(l=s?"an ordered superset":"a superset",u="expected #{this} to be "+l+" of #{exp}",p="expected #{this} to not be "+l+" of #{exp}"):(l=s?"ordered members":"members",u="expected #{this} to have the same "+l+" as #{exp}",p="expected #{this} to not have the same "+l+" as #{exp}");var m=A(this,"deep")?A(this,"eql"):void 0;this.assert(F1(t,r,m,o,s),u,p,t,r,!0)});_.addProperty("iterable",function(t){t&&A(this,"message",t);var e=A(this,"object");this.assert(e!=null&&e[Symbol.iterator],"expected #{this} to be an iterable","expected #{this} to not be an iterable",e)});function I1(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=A(this,"message"),i=A(this,"ssfi"),o=A(this,"contains"),s=A(this,"deep"),l=A(this,"eql");new _(t,n,i,!0).to.be.an("array"),o?this.assert(t.some(function(u){return r.indexOf(u)>-1}),"expected #{this} to contain one of #{exp}","expected #{this} to not contain one of #{exp}",t,r):s?this.assert(t.some(function(u){return l(r,u)}),"expected #{this} to deeply equal one of #{exp}","expected #{this} to deeply equal one of #{exp}",t,r):this.assert(t.indexOf(r)>-1,"expected #{this} to be one of #{exp}","expected #{this} to not be one of #{exp}",t,r)}O(I1,"oneOf");_.addMethod("oneOf",I1);function Iw(t,e,r){r&&A(this,"message",r);var n=A(this,"object"),i=A(this,"message"),o=A(this,"ssfi");new _(n,i,o,!0).is.a("function");var s;e?(new _(t,i,o,!0).to.have.property(e),s=t[e]):(new _(t,i,o,!0).is.a("function"),s=t()),n();var l=e==null?t():t[e],u=e==null?s:"."+e;A(this,"deltaMsgObj",u),A(this,"initialDeltaValue",s),A(this,"finalDeltaValue",l),A(this,"deltaBehavior","change"),A(this,"realDelta",l!==s),this.assert(s!==l,"expected "+u+" to change","expected "+u+" to not change")}O(Iw,"assertChanges");_.addMethod("change",Iw);_.addMethod("changes",Iw);function Cw(t,e,r){r&&A(this,"message",r);var n=A(this,"object"),i=A(this,"message"),o=A(this,"ssfi");new _(n,i,o,!0).is.a("function");var s;e?(new _(t,i,o,!0).to.have.property(e),s=t[e]):(new _(t,i,o,!0).is.a("function"),s=t()),new _(s,i,o,!0).is.a("number"),n();var l=e==null?t():t[e],u=e==null?s:"."+e;A(this,"deltaMsgObj",u),A(this,"initialDeltaValue",s),A(this,"finalDeltaValue",l),A(this,"deltaBehavior","increase"),A(this,"realDelta",l-s),this.assert(l-s>0,"expected "+u+" to increase","expected "+u+" to not increase")}O(Cw,"assertIncreases");_.addMethod("increase",Cw);_.addMethod("increases",Cw);function Ow(t,e,r){r&&A(this,"message",r);var n=A(this,"object"),i=A(this,"message"),o=A(this,"ssfi");new _(n,i,o,!0).is.a("function");var s;e?(new _(t,i,o,!0).to.have.property(e),s=t[e]):(new _(t,i,o,!0).is.a("function"),s=t()),new _(s,i,o,!0).is.a("number"),n();var l=e==null?t():t[e],u=e==null?s:"."+e;A(this,"deltaMsgObj",u),A(this,"initialDeltaValue",s),A(this,"finalDeltaValue",l),A(this,"deltaBehavior","decrease"),A(this,"realDelta",s-l),this.assert(l-s<0,"expected "+u+" to decrease","expected "+u+" to not decrease")}O(Ow,"assertDecreases");_.addMethod("decrease",Ow);_.addMethod("decreases",Ow);function C1(t,e){e&&A(this,"message",e);var r=A(this,"deltaMsgObj"),n=A(this,"initialDeltaValue"),i=A(this,"finalDeltaValue"),o=A(this,"deltaBehavior"),s=A(this,"realDelta"),l;o==="change"?l=Math.abs(i-n)===Math.abs(t):l=s===Math.abs(t),this.assert(l,"expected "+r+" to "+o+" by "+t,"expected "+r+" to not "+o+" by "+t)}O(C1,"assertDelta");_.addMethod("by",C1);_.addProperty("extensible",function(){var t=A(this,"object"),e=t===Object(t)&&Object.isExtensible(t);this.assert(e,"expected #{this} to be extensible","expected #{this} to not be extensible")});_.addProperty("sealed",function(){var t=A(this,"object"),e=t===Object(t)?Object.isSealed(t):!0;this.assert(e,"expected #{this} to be sealed","expected #{this} to not be sealed")});_.addProperty("frozen",function(){var t=A(this,"object"),e=t===Object(t)?Object.isFrozen(t):!0;this.assert(e,"expected #{this} to be frozen","expected #{this} to not be frozen")});_.addProperty("finite",function(t){var e=A(this,"object");this.assert(typeof e=="number"&&isFinite(e),"expected #{this} to be a finite number","expected #{this} to not be a finite number")});function Ly(t,e){return new _(t,e)}O(Ly,"expect");Ly.fail=function(t,e,r,n){throw arguments.length<2&&(r=t,t=void 0),r=r||"expect.fail()",new Ke(r,{actual:t,expected:e,operator:n},Ly.fail)};var O1={};tw(O1,{Should:()=>RX,should:()=>EX});function Nw(){function t(){return this instanceof String||this instanceof Number||this instanceof Boolean||typeof Symbol=="function"&&this instanceof Symbol||typeof BigInt=="function"&&this instanceof BigInt?new _(this.valueOf(),null,t):new _(this,null,t)}O(t,"shouldGetter");function e(n){Object.defineProperty(this,"should",{value:n,enumerable:!0,configurable:!0,writable:!0})}O(e,"shouldSetter"),Object.defineProperty(Object.prototype,"should",{set:e,get:t,configurable:!0});var r={};return r.fail=function(n,i,o,s){throw arguments.length<2&&(o=n,n=void 0),o=o||"should.fail()",new Ke(o,{actual:n,expected:i,operator:s},r.fail)},r.equal=function(n,i,o){new _(n,o).to.equal(i)},r.Throw=function(n,i,o,s){new _(n,s).to.Throw(i,o)},r.exist=function(n,i){new _(n,i).to.exist},r.not={},r.not.equal=function(n,i,o){new _(n,o).to.not.equal(i)},r.not.Throw=function(n,i,o,s){new _(n,s).to.not.Throw(i,o)},r.not.exist=function(n,i){new _(n,i).to.not.exist},r.throw=r.Throw,r.not.throw=r.not.Throw,r}O(Nw,"loadShould");var EX=Nw,RX=Nw;function w(t,e){var r=new _(null,null,w,!0);r.assert(t,e,"[ negation message unavailable ]")}O(w,"assert");w.fail=function(t,e,r,n){throw arguments.length<2&&(r=t,t=void 0),r=r||"assert.fail()",new Ke(r,{actual:t,expected:e,operator:n},w.fail)};w.isOk=function(t,e){new _(t,e,w.isOk,!0).is.ok};w.isNotOk=function(t,e){new _(t,e,w.isNotOk,!0).is.not.ok};w.equal=function(t,e,r){var n=new _(t,r,w.equal,!0);n.assert(e==ke(n,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",e,t,!0)};w.notEqual=function(t,e,r){var n=new _(t,r,w.notEqual,!0);n.assert(e!=ke(n,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",e,t,!0)};w.strictEqual=function(t,e,r){new _(t,r,w.strictEqual,!0).to.equal(e)};w.notStrictEqual=function(t,e,r){new _(t,r,w.notStrictEqual,!0).to.not.equal(e)};w.deepEqual=w.deepStrictEqual=function(t,e,r){new _(t,r,w.deepEqual,!0).to.eql(e)};w.notDeepEqual=function(t,e,r){new _(t,r,w.notDeepEqual,!0).to.not.eql(e)};w.isAbove=function(t,e,r){new _(t,r,w.isAbove,!0).to.be.above(e)};w.isAtLeast=function(t,e,r){new _(t,r,w.isAtLeast,!0).to.be.least(e)};w.isBelow=function(t,e,r){new _(t,r,w.isBelow,!0).to.be.below(e)};w.isAtMost=function(t,e,r){new _(t,r,w.isAtMost,!0).to.be.most(e)};w.isTrue=function(t,e){new _(t,e,w.isTrue,!0).is.true};w.isNotTrue=function(t,e){new _(t,e,w.isNotTrue,!0).to.not.equal(!0)};w.isFalse=function(t,e){new _(t,e,w.isFalse,!0).is.false};w.isNotFalse=function(t,e){new _(t,e,w.isNotFalse,!0).to.not.equal(!1)};w.isNull=function(t,e){new _(t,e,w.isNull,!0).to.equal(null)};w.isNotNull=function(t,e){new _(t,e,w.isNotNull,!0).to.not.equal(null)};w.isNaN=function(t,e){new _(t,e,w.isNaN,!0).to.be.NaN};w.isNotNaN=function(t,e){new _(t,e,w.isNotNaN,!0).not.to.be.NaN};w.exists=function(t,e){new _(t,e,w.exists,!0).to.exist};w.notExists=function(t,e){new _(t,e,w.notExists,!0).to.not.exist};w.isUndefined=function(t,e){new _(t,e,w.isUndefined,!0).to.equal(void 0)};w.isDefined=function(t,e){new _(t,e,w.isDefined,!0).to.not.equal(void 0)};w.isCallable=function(t,e){new _(t,e,w.isCallable,!0).is.callable};w.isNotCallable=function(t,e){new _(t,e,w.isNotCallable,!0).is.not.callable};w.isObject=function(t,e){new _(t,e,w.isObject,!0).to.be.a("object")};w.isNotObject=function(t,e){new _(t,e,w.isNotObject,!0).to.not.be.a("object")};w.isArray=function(t,e){new _(t,e,w.isArray,!0).to.be.an("array")};w.isNotArray=function(t,e){new _(t,e,w.isNotArray,!0).to.not.be.an("array")};w.isString=function(t,e){new _(t,e,w.isString,!0).to.be.a("string")};w.isNotString=function(t,e){new _(t,e,w.isNotString,!0).to.not.be.a("string")};w.isNumber=function(t,e){new _(t,e,w.isNumber,!0).to.be.a("number")};w.isNotNumber=function(t,e){new _(t,e,w.isNotNumber,!0).to.not.be.a("number")};w.isFinite=function(t,e){new _(t,e,w.isFinite,!0).to.be.finite};w.isBoolean=function(t,e){new _(t,e,w.isBoolean,!0).to.be.a("boolean")};w.isNotBoolean=function(t,e){new _(t,e,w.isNotBoolean,!0).to.not.be.a("boolean")};w.typeOf=function(t,e,r){new _(t,r,w.typeOf,!0).to.be.a(e)};w.notTypeOf=function(t,e,r){new _(t,r,w.notTypeOf,!0).to.not.be.a(e)};w.instanceOf=function(t,e,r){new _(t,r,w.instanceOf,!0).to.be.instanceOf(e)};w.notInstanceOf=function(t,e,r){new _(t,r,w.notInstanceOf,!0).to.not.be.instanceOf(e)};w.include=function(t,e,r){new _(t,r,w.include,!0).include(e)};w.notInclude=function(t,e,r){new _(t,r,w.notInclude,!0).not.include(e)};w.deepInclude=function(t,e,r){new _(t,r,w.deepInclude,!0).deep.include(e)};w.notDeepInclude=function(t,e,r){new _(t,r,w.notDeepInclude,!0).not.deep.include(e)};w.nestedInclude=function(t,e,r){new _(t,r,w.nestedInclude,!0).nested.include(e)};w.notNestedInclude=function(t,e,r){new _(t,r,w.notNestedInclude,!0).not.nested.include(e)};w.deepNestedInclude=function(t,e,r){new _(t,r,w.deepNestedInclude,!0).deep.nested.include(e)};w.notDeepNestedInclude=function(t,e,r){new _(t,r,w.notDeepNestedInclude,!0).not.deep.nested.include(e)};w.ownInclude=function(t,e,r){new _(t,r,w.ownInclude,!0).own.include(e)};w.notOwnInclude=function(t,e,r){new _(t,r,w.notOwnInclude,!0).not.own.include(e)};w.deepOwnInclude=function(t,e,r){new _(t,r,w.deepOwnInclude,!0).deep.own.include(e)};w.notDeepOwnInclude=function(t,e,r){new _(t,r,w.notDeepOwnInclude,!0).not.deep.own.include(e)};w.match=function(t,e,r){new _(t,r,w.match,!0).to.match(e)};w.notMatch=function(t,e,r){new _(t,r,w.notMatch,!0).to.not.match(e)};w.property=function(t,e,r){new _(t,r,w.property,!0).to.have.property(e)};w.notProperty=function(t,e,r){new _(t,r,w.notProperty,!0).to.not.have.property(e)};w.propertyVal=function(t,e,r,n){new _(t,n,w.propertyVal,!0).to.have.property(e,r)};w.notPropertyVal=function(t,e,r,n){new _(t,n,w.notPropertyVal,!0).to.not.have.property(e,r)};w.deepPropertyVal=function(t,e,r,n){new _(t,n,w.deepPropertyVal,!0).to.have.deep.property(e,r)};w.notDeepPropertyVal=function(t,e,r,n){new _(t,n,w.notDeepPropertyVal,!0).to.not.have.deep.property(e,r)};w.ownProperty=function(t,e,r){new _(t,r,w.ownProperty,!0).to.have.own.property(e)};w.notOwnProperty=function(t,e,r){new _(t,r,w.notOwnProperty,!0).to.not.have.own.property(e)};w.ownPropertyVal=function(t,e,r,n){new _(t,n,w.ownPropertyVal,!0).to.have.own.property(e,r)};w.notOwnPropertyVal=function(t,e,r,n){new _(t,n,w.notOwnPropertyVal,!0).to.not.have.own.property(e,r)};w.deepOwnPropertyVal=function(t,e,r,n){new _(t,n,w.deepOwnPropertyVal,!0).to.have.deep.own.property(e,r)};w.notDeepOwnPropertyVal=function(t,e,r,n){new _(t,n,w.notDeepOwnPropertyVal,!0).to.not.have.deep.own.property(e,r)};w.nestedProperty=function(t,e,r){new _(t,r,w.nestedProperty,!0).to.have.nested.property(e)};w.notNestedProperty=function(t,e,r){new _(t,r,w.notNestedProperty,!0).to.not.have.nested.property(e)};w.nestedPropertyVal=function(t,e,r,n){new _(t,n,w.nestedPropertyVal,!0).to.have.nested.property(e,r)};w.notNestedPropertyVal=function(t,e,r,n){new _(t,n,w.notNestedPropertyVal,!0).to.not.have.nested.property(e,r)};w.deepNestedPropertyVal=function(t,e,r,n){new _(t,n,w.deepNestedPropertyVal,!0).to.have.deep.nested.property(e,r)};w.notDeepNestedPropertyVal=function(t,e,r,n){new _(t,n,w.notDeepNestedPropertyVal,!0).to.not.have.deep.nested.property(e,r)};w.lengthOf=function(t,e,r){new _(t,r,w.lengthOf,!0).to.have.lengthOf(e)};w.hasAnyKeys=function(t,e,r){new _(t,r,w.hasAnyKeys,!0).to.have.any.keys(e)};w.hasAllKeys=function(t,e,r){new _(t,r,w.hasAllKeys,!0).to.have.all.keys(e)};w.containsAllKeys=function(t,e,r){new _(t,r,w.containsAllKeys,!0).to.contain.all.keys(e)};w.doesNotHaveAnyKeys=function(t,e,r){new _(t,r,w.doesNotHaveAnyKeys,!0).to.not.have.any.keys(e)};w.doesNotHaveAllKeys=function(t,e,r){new _(t,r,w.doesNotHaveAllKeys,!0).to.not.have.all.keys(e)};w.hasAnyDeepKeys=function(t,e,r){new _(t,r,w.hasAnyDeepKeys,!0).to.have.any.deep.keys(e)};w.hasAllDeepKeys=function(t,e,r){new _(t,r,w.hasAllDeepKeys,!0).to.have.all.deep.keys(e)};w.containsAllDeepKeys=function(t,e,r){new _(t,r,w.containsAllDeepKeys,!0).to.contain.all.deep.keys(e)};w.doesNotHaveAnyDeepKeys=function(t,e,r){new _(t,r,w.doesNotHaveAnyDeepKeys,!0).to.not.have.any.deep.keys(e)};w.doesNotHaveAllDeepKeys=function(t,e,r){new _(t,r,w.doesNotHaveAllDeepKeys,!0).to.not.have.all.deep.keys(e)};w.throws=function(t,e,r,n){(typeof e=="string"||e instanceof RegExp)&&(r=e,e=null);var i=new _(t,n,w.throws,!0).to.throw(e,r);return ke(i,"object")};w.doesNotThrow=function(t,e,r,n){(typeof e=="string"||e instanceof RegExp)&&(r=e,e=null),new _(t,n,w.doesNotThrow,!0).to.not.throw(e,r)};w.operator=function(t,e,r,n){var i;switch(e){case"==":i=t==r;break;case"===":i=t===r;break;case">":i=t>r;break;case">=":i=t>=r;break;case"<":i=t<r;break;case"<=":i=t<=r;break;case"!=":i=t!=r;break;case"!==":i=t!==r;break;default:throw n=n&&n+": ",new Ke(n+'Invalid operator "'+e+'"',void 0,w.operator)}var o=new _(i,n,w.operator,!0);o.assert(ke(o,"object")===!0,"expected "+Ve(t)+" to be "+e+" "+Ve(r),"expected "+Ve(t)+" to not be "+e+" "+Ve(r))};w.closeTo=function(t,e,r,n){new _(t,n,w.closeTo,!0).to.be.closeTo(e,r)};w.approximately=function(t,e,r,n){new _(t,n,w.approximately,!0).to.be.approximately(e,r)};w.sameMembers=function(t,e,r){new _(t,r,w.sameMembers,!0).to.have.same.members(e)};w.notSameMembers=function(t,e,r){new _(t,r,w.notSameMembers,!0).to.not.have.same.members(e)};w.sameDeepMembers=function(t,e,r){new _(t,r,w.sameDeepMembers,!0).to.have.same.deep.members(e)};w.notSameDeepMembers=function(t,e,r){new _(t,r,w.notSameDeepMembers,!0).to.not.have.same.deep.members(e)};w.sameOrderedMembers=function(t,e,r){new _(t,r,w.sameOrderedMembers,!0).to.have.same.ordered.members(e)};w.notSameOrderedMembers=function(t,e,r){new _(t,r,w.notSameOrderedMembers,!0).to.not.have.same.ordered.members(e)};w.sameDeepOrderedMembers=function(t,e,r){new _(t,r,w.sameDeepOrderedMembers,!0).to.have.same.deep.ordered.members(e)};w.notSameDeepOrderedMembers=function(t,e,r){new _(t,r,w.notSameDeepOrderedMembers,!0).to.not.have.same.deep.ordered.members(e)};w.includeMembers=function(t,e,r){new _(t,r,w.includeMembers,!0).to.include.members(e)};w.notIncludeMembers=function(t,e,r){new _(t,r,w.notIncludeMembers,!0).to.not.include.members(e)};w.includeDeepMembers=function(t,e,r){new _(t,r,w.includeDeepMembers,!0).to.include.deep.members(e)};w.notIncludeDeepMembers=function(t,e,r){new _(t,r,w.notIncludeDeepMembers,!0).to.not.include.deep.members(e)};w.includeOrderedMembers=function(t,e,r){new _(t,r,w.includeOrderedMembers,!0).to.include.ordered.members(e)};w.notIncludeOrderedMembers=function(t,e,r){new _(t,r,w.notIncludeOrderedMembers,!0).to.not.include.ordered.members(e)};w.includeDeepOrderedMembers=function(t,e,r){new _(t,r,w.includeDeepOrderedMembers,!0).to.include.deep.ordered.members(e)};w.notIncludeDeepOrderedMembers=function(t,e,r){new _(t,r,w.notIncludeDeepOrderedMembers,!0).to.not.include.deep.ordered.members(e)};w.oneOf=function(t,e,r){new _(t,r,w.oneOf,!0).to.be.oneOf(e)};w.isIterable=function(t,e){if(t==null||!t[Symbol.iterator])throw e=e?`${e} expected ${Ve(t)} to be an iterable`:`expected ${Ve(t)} to be an iterable`,new Ke(e,void 0,w.isIterable)};w.changes=function(t,e,r,n){arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,w.changes,!0).to.change(e,r)};w.changesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,w.changesBy,!0).to.change(e,r).by(n)};w.doesNotChange=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,w.doesNotChange,!0).to.not.change(e,r)};w.changesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,w.changesButNotBy,!0).to.change(e,r).but.not.by(n)};w.increases=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,w.increases,!0).to.increase(e,r)};w.increasesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,w.increasesBy,!0).to.increase(e,r).by(n)};w.doesNotIncrease=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,w.doesNotIncrease,!0).to.not.increase(e,r)};w.increasesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,w.increasesButNotBy,!0).to.increase(e,r).but.not.by(n)};w.decreases=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,w.decreases,!0).to.decrease(e,r)};w.decreasesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,w.decreasesBy,!0).to.decrease(e,r).by(n)};w.doesNotDecrease=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,w.doesNotDecrease,!0).to.not.decrease(e,r)};w.doesNotDecreaseBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);return new _(t,i,w.doesNotDecreaseBy,!0).to.not.decrease(e,r).by(n)};w.decreasesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,w.decreasesButNotBy,!0).to.decrease(e,r).but.not.by(n)};w.ifError=function(t){if(t)throw t};w.isExtensible=function(t,e){new _(t,e,w.isExtensible,!0).to.be.extensible};w.isNotExtensible=function(t,e){new _(t,e,w.isNotExtensible,!0).to.not.be.extensible};w.isSealed=function(t,e){new _(t,e,w.isSealed,!0).to.be.sealed};w.isNotSealed=function(t,e){new _(t,e,w.isNotSealed,!0).to.not.be.sealed};w.isFrozen=function(t,e){new _(t,e,w.isFrozen,!0).to.be.frozen};w.isNotFrozen=function(t,e){new _(t,e,w.isNotFrozen,!0).to.not.be.frozen};w.isEmpty=function(t,e){new _(t,e,w.isEmpty,!0).to.be.empty};w.isNotEmpty=function(t,e){new _(t,e,w.isNotEmpty,!0).to.not.be.empty};O(function t(e,r){return w[r]=w[e],t},"alias")("isOk","ok")("isNotOk","notOk")("throws","throw")("throws","Throw")("isExtensible","extensible")("isNotExtensible","notExtensible")("isSealed","sealed")("isNotSealed","notSealed")("isFrozen","frozen")("isNotFrozen","notFrozen")("isEmpty","empty")("isNotEmpty","notEmpty")("isCallable","isFunction")("isNotCallable","isNotFunction");var zC=[];function kX(t){let e={AssertionError:Ke,util:My,config:Ir,expect:Ly,assert:w,Assertion:_,...O1};return~zC.indexOf(t)||(t(e,My),zC.push(t)),e}O(kX,"use");var Gu=class{constructor(e,r,n){this._lineNumber=e,this._text=r,this._isLastLine=n}get lineNumber(){return this._lineNumber}get text(){return this._text}get range(){return new q(this._lineNumber,0,this._lineNumber,this._text.length)}get rangeIncludingLineBreak(){return this._isLastLine?this.range:new q(this._lineNumber,0,this._lineNumber+1,0)}get rangeTrimmed(){let e=/^(\s*)/.exec(this._text)[1].length;if(e===this._text.length)return;let r=this.text.trimEnd().length;return new q(this._lineNumber,e,this._lineNumber,r)}get isEmptyOrWhitespace(){return this.rangeTrimmed==null}};var N1=br(require("node:path"),1),Ky=class{get uri(){return this._uri}get filename(){return N1.default.basename(this._uri.path)}get languageId(){return this._languageId}get version(){return this._version}get lineCount(){return this._lineCount}get range(){let{end:e}=this.lineAt(this.lineCount-1).range;return new q(0,0,e.line,e.character)}get eol(){return this._eol===`
`?"LF":"CRLF"}constructor(e,r,n,i,o){this._uri=e,this._languageId=r,this._version=n,this._eol=i,this._lines=o,this._lineCount=o.length,this._lineStarts=null,this._cachedTextValue=null}update(e){this._lines=e,this._lineCount=e.length,this._lineStarts=null,this._cachedTextValue=null}lineAt(e){let r;if(e instanceof fe?r=e.line:typeof e=="number"&&(r=e),typeof r!="number"||r<0||Math.floor(r)!==r)throw new Error("Illegal value for `line`");return r=Math.min(r,this._lines.length-1),new Gu(r,this._lines[r],r===this._lines.length-1)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.line-1)+e.character}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();let r=this._lineStarts.getIndexOf(e),n=this._lines[r.index].length;return new fe(r.index,Math.min(r.remainder,n))}getText(e){if(e===void 0)return this._cachedTextValue==null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue;if(e=this._validateRange(e),e.isEmpty)return"";if(e.isSingleLine)return this._lines[e.start.line].substring(e.start.character,e.end.character);let r=this._eol,n=e.start.line,i=e.end.line,o=[];o.push(this._lines[n].substring(e.start.character));for(let s=n+1;s<i;s++)o.push(this._lines[s]);return o.push(this._lines[i].substring(0,e.end.character)),o.join(r)}_validateRange(e){if(!(e instanceof q))throw new Error("Invalid argument");let r=this._validatePosition(e.start),n=this._validatePosition(e.end);return r===e.start&&n===e.end?e:new q(r.line,r.character,n.line,n.character)}_validatePosition(e){if(!(e instanceof fe))throw new Error("Invalid argument");if(this._lines.length===0)return e.with(0,0);let{line:r,character:n}=e,i=!1;if(r<0)r=0,n=0,i=!0;else if(r>=this._lines.length)r=this._lines.length-1,n=this._lines[r].length,i=!0;else{let o=this._lines[r].length;n<0?(n=0,i=!0):n>o&&(n=o,i=!0)}return i?new fe(r,n):e}_ensureLineStarts(){if(!this._lineStarts){let e=this._eol.length,r=this._lines.length,n=new Uint32Array(r);for(let i=0;i<r;i++)n[i]=this._lines[i].length+e;this._lineStarts=new Lw(n)}}};function MX(t){if(t<0)return 0;let e=4294967295;return t>e?e:t|0}var Lw=class{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}getCount(){return this.values.length}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=MX(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let r=this.prefixSumValidIndex[0]+1;r===0&&(this.prefixSum[0]=this.values[0],r++),e>=this.values.length&&(e=this.values.length-1);for(let n=r;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let r=0,n=this.values.length-1,i=0,o=0,s=0;for(;r<=n;)if(i=r+(n-r)/2|0,o=this.prefixSum[i],s=o-this.values[i],e<s)n=i-1;else if(e>=o)r=i+1;else break;return new Uw(i,e-s)}},Uw=class{constructor(e,r){this.index=e;this.remainder=r;this._prefixSumIndexOfResultBrand=void 0;this.index=e,this.remainder=r}};var Qy=class{constructor(e){this.client=e;this.cursorlessVersion="0.0.0";this.workspaceFolders=void 0;this.disposables=[];this.quickPickReturnValue=void 0;this.onDidCloseTextDocument=Ku;this.onDidChangeActiveTextEditor=Ku;this.onDidChangeVisibleTextEditors=Ku;this.onDidChangeTextEditorSelection=Ku;this.onDidChangeTextEditorVisibleRanges=Ku;this.configuration=new vu,this.keyValueStore=new bu,this.messages=new wu,this.clipboard=new Tu(this.client),this.capabilities=new cy,this.editorMap=new Map,this.documentMap=new Map,this.activeWindow=void 0,this.activeBuffer=void 0}async init(){let e=await vI(this.client);this.assetsRoot_=Hw.default.join(e,"assets"),this.cursorlessNeovimPath=Hw.default.join(e,"node","cursorless-neovim")}async showQuickPick(e,r){throw Error("showQuickPick Not implemented")}async setHighlightRanges(e,r,n){throw Error("setHighlightRanges Not implemented")}async flashRanges(e){console.debug("flashRanges Not implemented")}get assetsRoot(){if(this.assetsRoot_==null)throw Error("Field `assetsRoot` has not yet been mocked");return this.assetsRoot_}get runMode(){return LC()}get activeTextEditor(){return this.getActiveTextEditor()}get activeEditableTextEditor(){return this.getActiveTextEditor()}getActiveTextEditor(){let e=this.activeWindow?this.getTextEditor(this.activeWindow):void 0;return e===void 0&&console.debug("getActiveTextEditor: editor is undefined"),e}getTextEditor(e){for(let[r,n]of this.editorMap)if(r.id===e.id)return n}getTextDocument(e){for(let[r,n]of this.documentMap)if(r.id===e.id)return n}get visibleTextEditors(){return Array.from(this.editorMap.values())}get visibleNotebookEditors(){return[]}getEditableTextEditor(e){return e}async findInDocument(e,r){throw Error("findInDocument Not implemented")}async findInWorkspace(e){throw Error("findInWorkspace Not implemented")}async openTextDocument(e){throw Error("openTextDocument Not implemented")}async openUntitledTextDocument(e){throw Error("openUntitledTextDocument Not implemented")}async showInputBox(e){throw Error("TextDocumentChangeEvent Not implemented")}async executeCommand(e,...r){throw new Error("executeCommand Method not implemented.")}onDidChangeTextDocument(e){return DI(e)}onDidOpenTextDocument(e,r,n){return FI(e,r,n)}async updateTextEditor(e=!1){let r=await this.client.window,n=await r.buffer,i=await n.lines,o=i;i.length>=30&&(o=i.slice(0,15).concat(["..."]).concat(i.slice(-15))),console.debug(`updateTextEditor(): window:${r.id}, buffer:${n.id}, lines=${JSON.stringify(o)}`);let s,l;e?(s=[],l=[]):(s=await ay(r,this.client),l=await SI(r,this.client,i));let u=this.toNeovimEditor(r,n,i,l,s);return Yr().emitEvent("onDidOpenTextDocument",u.document),u}toNeovimEditor(e,r,n,i,o){let s=this.getTextDocument(r),l=this.getTextEditor(e);return s?(console.debug(`toNeovimEditor(): updating document: buffer=${r.id}`),s.update(n)):(console.debug(`toNeovimEditor(): creating new document: buffer=${r.id}`),s=new Ky(LI.parse(`neovim://${r.id}`),"plaintext",1,`
`,n),this.documentMap.set(r,s)),l?(console.debug(`toNeovimEditor(): updating editor: window=${e.id}`),l.updateDocument(i,o,s)):(console.debug(`toNeovimEditor(): creating new editor: window=${e.id}`),l=new uy(EA(),this.client,this,e,s,i,o),this.editorMap.set(e,l)),this.activeBuffer=r,this.activeWindow=e,this.activeTextEditor}handleCommandError(e){RI(this.client,e.message)}disposeOnExit(...e){return this.disposables.push(...e),()=>(0,L1.pull)(this.disposables,...e)}};function Ku(){return{dispose(){}}}var Zy=class{constructor(e){this.client=e;this.signals={prePhrase:{getVersion:async()=>null}}}async getFocusedElementType(){let e=await this.client.mode;return e.mode==="t"||e.mode==="nt"?"terminal":"textEditor"}};var FX=BigInt(1e9);function U1(t,e=BigInt(1e6)){return Number(t*e/FX)/Number(e)}async function Yy(t,e=[],r=[],n,i,o,s,l){let u={documentContents:n.document.getText(),selections:n.selections.map(Kk)};o!=null&&(u.marks=o),l!=null&&(u.metadata=l),e.includes("clipboard")||(u.clipboard=await i.clipboard.readText()),e.includes("visibleRanges")||(u.visibleRanges=n.visibleRanges.map(ul));for(let p of vs){let m=t?.get(p),d=`${p}Mark`;m!=null&&!e.includes(d)&&(u[d]=m.map(g=>g.toPlainObject()))}if(r.includes("timeOffsetSeconds")){let p=s?.startTimestamp;if(p==null)throw new Error("No start timestamp provided but time offset was requested");let m=process.hrtime.bigint()-p;u.timeOffsetSeconds=U1(m)}return u}var IX=br(Fl(),1);function H1(t,e,r,n,i,o,s,l){return{commandServerApi:t,ide:i,neovimIDE:n,injectIde:s,scopeProvider:o,takeSnapshot(u,p,m,d,g){return Yy(e,u,p,m,d,g,void 0,void 0)},setStoredTarget(u,p,m){e.set(p,m?.map(d=>gI(u,d)))},hatTokenMap:r,runIntegrationTests:l}}async function V1(t,e,r,n){let i={[TT]:async(...o)=>{(await t.mode).mode==="t"&&_I(t);try{await e.updateTextEditor();let l=await r.runCommandSafe(...o),u=Wf(o);if(await n.getFocusedElementType()==="terminal"&&aa(u)){let m=l;"fallback"in m&&m.fallback.action==="insert"&&EI(t)}return l}catch(l){if(e.runMode!=="test"){let u=l;console.error(u.stack),e.handleCommandError(u)}throw l}},"cursorless.repeatPreviousCommand":Fe,"cursorless.showCheatsheet":Fe,"cursorless.internal.updateCheatsheetDefaults":Fe,"cursorless.recordTestCase":Fe,"cursorless.recordOneTestCaseThenPause":Fe,"cursorless.pauseRecording":Fe,"cursorless.resumeRecording":Fe,"cursorless.takeSnapshot":Fe,"cursorless.recordScopeTests.showUnimplementedFacets":Fe,"cursorless.recordScopeTests.saveActiveDocument":Fe,"cursorless.showQuickPick":Fe,"cursorless.showDocumentation":Fe,"cursorless.showInstallationDependencies":Fe,"cursorless.migrateSnippets":Fe,"cursorless.private.logQuickActions":Fe,"cursorless.toggleDecorations":Fe,"cursorless.recomputeDecorationStyles":Fe,"cursorless.showScopeVisualizer":Fe,"cursorless.hideScopeVisualizer":Fe,"cursorless.analyzeCommandHistory":Fe,"cursorless.keyboard.escape":Fe,"cursorless.keyboard.targeted.targetHat":Fe,"cursorless.keyboard.targeted.targetScope":Fe,"cursorless.keyboard.targeted.targetSelection":Fe,"cursorless.keyboard.targeted.clearTarget":Fe,"cursorless.keyboard.targeted.runActionOnTarget":Fe,"cursorless.keyboard.modal.modeOn":Fe,"cursorless.keyboard.modal.modeOff":Fe,"cursorless.keyboard.modal.modeToggle":Fe,"cursorless.keyboard.undoTarget":Fe,"cursorless.keyboard.redoTarget":Fe,"cursorless.tutorial.start":Fe,"cursorless.tutorial.next":Fe,"cursorless.tutorial.previous":Fe,"cursorless.tutorial.restart":Fe,"cursorless.tutorial.resume":Fe,"cursorless.tutorial.list":Fe,"cursorless.documentationOpened":Fe};Object.entries(i).map(([o,s])=>Yr().registerCommand(o,s))}async function Fe(...t){console.debug(`dummyCommandHandler(): args=${t}`)}async function B1(t){let e=t.nvim,r=new Qy(e);await r.init();let n=r.runMode==="production"?r:new Mf(r,new kf,r.runMode==="test",void 0),i=new $p,o=new Zy(e),s=r.runMode==="test"?i:o,{commandApi:l,storedTargets:u,hatTokenMap:p,scopeProvider:m,injectIde:d,runIntegrationTests:g}=await hI({ide:n,commandServerApi:s});await V1(e,r,l,s);let x={testHelpers:r.runMode==="test"?H1(i,u,p,r,n,m,d,g):void 0};Yr().registerExtensionApi(xI,x),console.log("activate(): Cursorless extension loaded")}function W1(t){t.setOptions({dev:!1}),t.registerFunction("CursorlessLoadExtension",async()=>await CX(t),{sync:!1})}async function CX(t){console.log("==============================================================================================="),console.log("loadExtension(cursorless-neovim): start"),await B1(t),console.log("loadExtension(cursorless-neovim): done")}
/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)

itertools/dist/index.js:
  (* istanbul ignore else -- @preserve *)
  (* istanbul ignore if -- @preserve *)

chai/chai.js:
  (*!
   * Chai - flag utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - test utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - expectTypes utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getActual utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - message composition utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - transferFlags utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * http://chaijs.com
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - isProxyEnabled helper
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addLengthGuard utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getProperties utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - proxify utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addChainingMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteChainableMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - compareByInspect utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getOwnEnumerablePropertySymbols utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getOwnEnumerableProperties utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - isNaN utility
   * Copyright(c) 2012-2015 Sakthipriyan Vairamani <thechargingvolcano@gmail.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*! Bundled license information:
  
  deep-eql/index.js:
    (*!
     * deep-eql
     * Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>
     * MIT Licensed
     *)
    (*!
     * Check to see if the MemoizeMap has recorded a result of the two operands
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {MemoizeMap} memoizeMap
     * @returns {Boolean|null} result
    *)
    (*!
     * Set the result of the equality into the MemoizeMap
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {MemoizeMap} memoizeMap
     * @param {Boolean} result
    *)
    (*!
     * Primary Export
     *)
    (*!
     * The main logic of the `deepEqual` function.
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Object} [options] (optional) Additional options
     * @param {Array} [options.comparator] (optional) Override default algorithm, determining custom equality.
     * @param {Array} [options.memoize] (optional) Provide a custom memoization object which will cache the results of
        complex objects for a speed boost. By passing `false` you can disable memoization, but this will cause circular
        references to blow the stack.
     * @return {Boolean} equal match
    *)
    (*!
     * Compare two Regular Expressions for equality.
     *
     * @param {RegExp} leftHandOperand
     * @param {RegExp} rightHandOperand
     * @return {Boolean} result
     *)
    (*!
     * Compare two Sets/Maps for equality. Faster than other equality functions.
     *
     * @param {Set} leftHandOperand
     * @param {Set} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Simple equality for flat iterable objects such as Arrays, TypedArrays or Node.js buffers.
     *
     * @param {Iterable} leftHandOperand
     * @param {Iterable} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Simple equality for generator objects such as those returned by generator functions.
     *
     * @param {Iterable} leftHandOperand
     * @param {Iterable} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Determine if the given object has an @@iterator function.
     *
     * @param {Object} target
     * @return {Boolean} `true` if the object has an @@iterator function.
     *)
    (*!
     * Gets all iterator entries from the given Object. If the Object has no @@iterator function, returns an empty array.
     * This will consume the iterator - which could have side effects depending on the @@iterator implementation.
     *
     * @param {Object} target
     * @returns {Array} an array of entries from the @@iterator function
     *)
    (*!
     * Gets all entries from a Generator. This will consume the generator - which could have side effects.
     *
     * @param {Generator} target
     * @returns {Array} an array of entries from the Generator.
     *)
    (*!
     * Gets all own and inherited enumerable keys from a target.
     *
     * @param {Object} target
     * @returns {Array} an array of own and inherited enumerable keys from the target.
     *)
    (*!
     * Determines if two objects have matching values, given a set of keys. Defers to deepEqual for the equality check of
     * each key. If any value of the given key is not equal, the function will return false (early).
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Array} keys An array of keys to compare the values of leftHandOperand and rightHandOperand against
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Recursively check the equality of two Objects. Once basic sameness has been established it will defer to `deepEqual`
     * for each enumerable key in the object.
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Returns true if the argument is a primitive.
     *
     * This intentionally returns true for all objects that can be compared by reference,
     * including functions and symbols.
     *
     * @param {Mixed} value
     * @return {Boolean} result
     *)
  *)
*/
