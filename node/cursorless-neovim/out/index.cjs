"use strict";var PV=Object.create;var Tp=Object.defineProperty;var MV=Object.getOwnPropertyDescriptor;var AV=Object.getOwnPropertyNames;var DV=Object.getPrototypeOf,IV=Object.prototype.hasOwnProperty;var ot=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),FV=(t,e)=>{for(var r in e)Tp(t,r,{get:e[r],enumerable:!0})},hE=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of AV(e))!IV.call(t,i)&&i!==r&&Tp(t,i,{get:()=>e[i],enumerable:!(n=MV(e,i))||n.enumerable});return t};var fr=(t,e,r)=>(r=t!=null?PV(DV(t)):{},hE(e||!t||!t.__esModule?Tp(r,"default",{value:t,enumerable:!0}):r,t)),CV=t=>hE(Tp({},"__esModule",{value:!0}),t);var NS=ot(CS=>{"use strict";Object.defineProperty(CS,"__esModule",{value:!0});CS.default=m4;var f4=d4(require("crypto"));function d4(t){return t&&t.__esModule?t:{default:t}}var Nf=new Uint8Array(256),Cf=Nf.length;function m4(){return Cf>Nf.length-16&&(f4.default.randomFillSync(Nf),Cf=0),Nf.slice(Cf,Cf+=16)}});var cP=ot(Of=>{"use strict";Object.defineProperty(Of,"__esModule",{value:!0});Of.default=void 0;var h4=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;Of.default=h4});var sl=ot(Lf=>{"use strict";Object.defineProperty(Lf,"__esModule",{value:!0});Lf.default=void 0;var g4=y4(cP());function y4(t){return t&&t.__esModule?t:{default:t}}function x4(t){return typeof t=="string"&&g4.default.test(t)}var S4=x4;Lf.default=S4});var ll=ot(cl=>{"use strict";Object.defineProperty(cl,"__esModule",{value:!0});cl.default=void 0;cl.unsafeStringify=lP;var T4=v4(sl());function v4(t){return t&&t.__esModule?t:{default:t}}var Ct=[];for(let t=0;t<256;++t)Ct.push((t+256).toString(16).slice(1));function lP(t,e=0){return Ct[t[e+0]]+Ct[t[e+1]]+Ct[t[e+2]]+Ct[t[e+3]]+"-"+Ct[t[e+4]]+Ct[t[e+5]]+"-"+Ct[t[e+6]]+Ct[t[e+7]]+"-"+Ct[t[e+8]]+Ct[t[e+9]]+"-"+Ct[t[e+10]]+Ct[t[e+11]]+Ct[t[e+12]]+Ct[t[e+13]]+Ct[t[e+14]]+Ct[t[e+15]]}function b4(t,e=0){let r=lP(t,e);if(!(0,T4.default)(r))throw TypeError("Stringified UUID is invalid");return r}var w4=b4;cl.default=w4});var pP=ot(Uf=>{"use strict";Object.defineProperty(Uf,"__esModule",{value:!0});Uf.default=void 0;var _4=R4(NS()),E4=ll();function R4(t){return t&&t.__esModule?t:{default:t}}var uP,OS,LS=0,US=0;function k4(t,e,r){let n=e&&r||0,i=e||new Array(16);t=t||{};let o=t.node||uP,s=t.clockseq!==void 0?t.clockseq:OS;if(o==null||s==null){let g=t.random||(t.rng||_4.default)();o==null&&(o=uP=[g[0]|1,g[1],g[2],g[3],g[4],g[5]]),s==null&&(s=OS=(g[6]<<8|g[7])&16383)}let l=t.msecs!==void 0?t.msecs:Date.now(),u=t.nsecs!==void 0?t.nsecs:US+1,p=l-LS+(u-US)/1e4;if(p<0&&t.clockseq===void 0&&(s=s+1&16383),(p<0||l>LS)&&t.nsecs===void 0&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");LS=l,US=u,OS=s,l+=122192928e5;let d=((l&268435455)*1e4+u)%4294967296;i[n++]=d>>>24&255,i[n++]=d>>>16&255,i[n++]=d>>>8&255,i[n++]=d&255;let m=l/4294967296*1e4&268435455;i[n++]=m>>>8&255,i[n++]=m&255,i[n++]=m>>>24&15|16,i[n++]=m>>>16&255,i[n++]=s>>>8|128,i[n++]=s&255;for(let g=0;g<6;++g)i[n+g]=o[g];return e||(0,E4.unsafeStringify)(i)}var P4=k4;Uf.default=P4});var BS=ot(Bf=>{"use strict";Object.defineProperty(Bf,"__esModule",{value:!0});Bf.default=void 0;var M4=A4(sl());function A4(t){return t&&t.__esModule?t:{default:t}}function D4(t){if(!(0,M4.default)(t))throw TypeError("Invalid UUID");let e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}var I4=D4;Bf.default=I4});var VS=ot(jo=>{"use strict";Object.defineProperty(jo,"__esModule",{value:!0});jo.URL=jo.DNS=void 0;jo.default=L4;var F4=ll(),C4=N4(BS());function N4(t){return t&&t.__esModule?t:{default:t}}function O4(t){t=unescape(encodeURIComponent(t));let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}var fP="6ba7b810-9dad-11d1-80b4-00c04fd430c8";jo.DNS=fP;var dP="6ba7b811-9dad-11d1-80b4-00c04fd430c8";jo.URL=dP;function L4(t,e,r){function n(i,o,s,l){var u;if(typeof i=="string"&&(i=O4(i)),typeof o=="string"&&(o=(0,C4.default)(o)),((u=o)===null||u===void 0?void 0:u.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let p=new Uint8Array(16+i.length);if(p.set(o),p.set(i,o.length),p=r(p),p[6]=p[6]&15|e,p[8]=p[8]&63|128,s){l=l||0;for(let d=0;d<16;++d)s[l+d]=p[d];return s}return(0,F4.unsafeStringify)(p)}try{n.name=t}catch{}return n.DNS=fP,n.URL=dP,n}});var mP=ot(Vf=>{"use strict";Object.defineProperty(Vf,"__esModule",{value:!0});Vf.default=void 0;var U4=B4(require("crypto"));function B4(t){return t&&t.__esModule?t:{default:t}}function V4(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),U4.default.createHash("md5").update(t).digest()}var W4=V4;Vf.default=W4});var gP=ot(Wf=>{"use strict";Object.defineProperty(Wf,"__esModule",{value:!0});Wf.default=void 0;var H4=hP(VS()),$4=hP(mP());function hP(t){return t&&t.__esModule?t:{default:t}}var j4=(0,H4.default)("v3",48,$4.default),q4=j4;Wf.default=q4});var yP=ot(Hf=>{"use strict";Object.defineProperty(Hf,"__esModule",{value:!0});Hf.default=void 0;var z4=G4(require("crypto"));function G4(t){return t&&t.__esModule?t:{default:t}}var K4={randomUUID:z4.default.randomUUID};Hf.default=K4});var TP=ot($f=>{"use strict";Object.defineProperty($f,"__esModule",{value:!0});$f.default=void 0;var xP=SP(yP()),Z4=SP(NS()),Q4=ll();function SP(t){return t&&t.__esModule?t:{default:t}}function Y4(t,e,r){if(xP.default.randomUUID&&!e&&!t)return xP.default.randomUUID();t=t||{};let n=t.random||(t.rng||Z4.default)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return(0,Q4.unsafeStringify)(n)}var X4=Y4;$f.default=X4});var vP=ot(jf=>{"use strict";Object.defineProperty(jf,"__esModule",{value:!0});jf.default=void 0;var J4=e6(require("crypto"));function e6(t){return t&&t.__esModule?t:{default:t}}function t6(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),J4.default.createHash("sha1").update(t).digest()}var r6=t6;jf.default=r6});var wP=ot(qf=>{"use strict";Object.defineProperty(qf,"__esModule",{value:!0});qf.default=void 0;var n6=bP(VS()),i6=bP(vP());function bP(t){return t&&t.__esModule?t:{default:t}}var o6=(0,n6.default)("v5",80,i6.default),a6=o6;qf.default=a6});var _P=ot(zf=>{"use strict";Object.defineProperty(zf,"__esModule",{value:!0});zf.default=void 0;var s6="00000000-0000-0000-0000-000000000000";zf.default=s6});var EP=ot(Gf=>{"use strict";Object.defineProperty(Gf,"__esModule",{value:!0});Gf.default=void 0;var c6=l6(sl());function l6(t){return t&&t.__esModule?t:{default:t}}function u6(t){if(!(0,c6.default)(t))throw TypeError("Invalid UUID");return parseInt(t.slice(14,15),16)}var p6=u6;Gf.default=p6});var RP=ot(kn=>{"use strict";Object.defineProperty(kn,"__esModule",{value:!0});Object.defineProperty(kn,"NIL",{enumerable:!0,get:function(){return g6.default}});Object.defineProperty(kn,"parse",{enumerable:!0,get:function(){return T6.default}});Object.defineProperty(kn,"stringify",{enumerable:!0,get:function(){return S6.default}});Object.defineProperty(kn,"v1",{enumerable:!0,get:function(){return f6.default}});Object.defineProperty(kn,"v3",{enumerable:!0,get:function(){return d6.default}});Object.defineProperty(kn,"v4",{enumerable:!0,get:function(){return m6.default}});Object.defineProperty(kn,"v5",{enumerable:!0,get:function(){return h6.default}});Object.defineProperty(kn,"validate",{enumerable:!0,get:function(){return x6.default}});Object.defineProperty(kn,"version",{enumerable:!0,get:function(){return y6.default}});var f6=wi(pP()),d6=wi(gP()),m6=wi(TP()),h6=wi(wP()),g6=wi(_P()),y6=wi(EP()),x6=wi(sl()),S6=wi(ll()),T6=wi(BS());function wi(t){return t&&t.__esModule?t:{default:t}}});var AP=ot((MP,Zf)=>{(function(t,e){typeof Zf=="object"&&Zf.exports?Zf.exports=e():t.nearley=e()})(MP,function(){function t(u,p,d){return this.id=++t.highestId,this.name=u,this.symbols=p,this.postprocess=d,this}t.highestId=0,t.prototype.toString=function(u){var p=typeof u>"u"?this.symbols.map(l).join(" "):this.symbols.slice(0,u).map(l).join(" ")+" \u25CF "+this.symbols.slice(u).map(l).join(" ");return this.name+" \u2192 "+p};function e(u,p,d,m){this.rule=u,this.dot=p,this.reference=d,this.data=[],this.wantedBy=m,this.isComplete=this.dot===u.symbols.length}e.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},e.prototype.nextState=function(u){var p=new e(this.rule,this.dot+1,this.reference,this.wantedBy);return p.left=this,p.right=u,p.isComplete&&(p.data=p.build(),p.right=void 0),p},e.prototype.build=function(){var u=[],p=this;do u.push(p.right.data),p=p.left;while(p.left);return u.reverse(),u},e.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,o.fail))};function r(u,p){this.grammar=u,this.index=p,this.states=[],this.wants={},this.scannable=[],this.completed={}}r.prototype.process=function(u){for(var p=this.states,d=this.wants,m=this.completed,g=0;g<p.length;g++){var x=p[g];if(x.isComplete){if(x.finish(),x.data!==o.fail){for(var v=x.wantedBy,b=v.length;b--;){var I=v[b];this.complete(I,x)}if(x.reference===this.index){var M=x.rule.name;(this.completed[M]=this.completed[M]||[]).push(x)}}}else{var M=x.rule.symbols[x.dot];if(typeof M!="string"){this.scannable.push(x);continue}if(d[M]){if(d[M].push(x),m.hasOwnProperty(M))for(var U=m[M],b=0;b<U.length;b++){var Q=U[b];this.complete(x,Q)}}else d[M]=[x],this.predict(M)}}},r.prototype.predict=function(u){for(var p=this.grammar.byName[u]||[],d=0;d<p.length;d++){var m=p[d],g=this.wants[u],x=new e(m,0,this.index,g);this.states.push(x)}},r.prototype.complete=function(u,p){var d=u.nextState(p);this.states.push(d)};function n(u,p){this.rules=u,this.start=p||this.rules[0].name;var d=this.byName={};this.rules.forEach(function(m){d.hasOwnProperty(m.name)||(d[m.name]=[]),d[m.name].push(m)})}n.fromCompiled=function(m,p){var d=m.Lexer;m.ParserStart&&(p=m.ParserStart,m=m.ParserRules);var m=m.map(function(x){return new t(x.name,x.symbols,x.postprocess)}),g=new n(m,p);return g.lexer=d,g};function i(){this.reset("")}i.prototype.reset=function(u,p){this.buffer=u,this.index=0,this.line=p?p.line:1,this.lastLineBreak=p?-p.col:0},i.prototype.next=function(){if(this.index<this.buffer.length){var u=this.buffer[this.index++];return u===`
`&&(this.line+=1,this.lastLineBreak=this.index),{value:u}}},i.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},i.prototype.formatError=function(u,p){var d=this.buffer;if(typeof d=="string"){var m=d.split(`
`).slice(Math.max(0,this.line-5),this.line),g=d.indexOf(`
`,this.index);g===-1&&(g=d.length);var x=this.index-this.lastLineBreak,v=String(this.line).length;return p+=" at line "+this.line+" col "+x+`:

`,p+=m.map(function(I,M){return b(this.line-m.length+M+1,v)+" "+I},this).join(`
`),p+=`
`+b("",v+x)+`^
`,p}else return p+" at index "+(this.index-1);function b(I,M){var U=String(I);return Array(M-U.length+1).join(" ")+U}};function o(u,p,d){if(u instanceof n)var m=u,d=p;else var m=n.fromCompiled(u,p);this.grammar=m,this.options={keepHistory:!1,lexer:m.lexer||new i};for(var g in d||{})this.options[g]=d[g];this.lexer=this.options.lexer,this.lexerState=void 0;var x=new r(m,0),v=this.table=[x];x.wants[m.start]=[],x.predict(m.start),x.process(),this.current=0}o.fail={},o.prototype.feed=function(u){var p=this.lexer;p.reset(u,this.lexerState);for(var d;;){try{if(d=p.next(),!d)break}catch(de){var v=new r(this.grammar,this.current+1);this.table.push(v);var m=new Error(this.reportLexerError(de));throw m.offset=this.current,m.token=de.token,m}var g=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var x=this.current+1,v=new r(this.grammar,x);this.table.push(v);for(var b=d.text!==void 0?d.text:d.value,I=p.constructor===i?d.value:p.transform?.(d)??d,M=g.scannable,U=M.length;U--;){var Q=M[U],ne=Q.rule.symbols[Q.dot];if(ne.test?ne.test(I):ne.type?ne.type===d.type:ne.literal===b){var he=Q.nextState({data:I,token:d,isToken:!0,reference:x-1});v.states.push(he)}}if(v.process(),v.states.length===0){var m=new Error(this.reportError(d));throw m.offset=this.current,m.token=d,m}this.options.keepHistory&&(g.lexerState=p.save()),this.current++}return g&&(this.lexerState=p.save()),this.results=this.finish(),this},o.prototype.reportLexerError=function(u){var p,d,m=u.token;return m?(p="input "+JSON.stringify(m.text[0])+" (lexer error)",d=this.lexer.formatError(m,"Syntax error")):(p="input (lexer error)",d=u.message),this.reportErrorCommon(d,p)},o.prototype.reportError=function(u){var p=(u.type?u.type+" token: ":"")+JSON.stringify(u.value!==void 0?u.value:u),d=this.lexer.formatError(u,"Syntax error");return this.reportErrorCommon(d,p)},o.prototype.reportErrorCommon=function(u,p){var d=[];d.push(u);var m=this.table.length-2,g=this.table[m],x=g.states.filter(function(b){var I=b.rule.symbols[b.dot];return I&&typeof I!="string"});if(x.length===0)d.push("Unexpected "+p+`. I did not expect any more input. Here is the state of my parse table:
`),this.displayStateStack(g.states,d);else{d.push("Unexpected "+p+`. Instead, I was expecting to see one of the following:
`);var v=x.map(function(b){return this.buildFirstStateStack(b,[])||[b]},this);v.forEach(function(b){var I=b[0],M=I.rule.symbols[I.dot],U=this.getSymbolDisplay(M);d.push("A "+U+" based on:"),this.displayStateStack(b,d)},this)}return d.push(""),d.join(`
`)},o.prototype.displayStateStack=function(u,p){for(var d,m=0,g=0;g<u.length;g++){var x=u[g],v=x.rule.toString(x.dot);v===d?m++:(m>0&&p.push("    ^ "+m+" more lines identical to this"),m=0,p.push("    "+v)),d=v}},o.prototype.getSymbolDisplay=function(u){return s(u)},o.prototype.buildFirstStateStack=function(u,p){if(p.indexOf(u)!==-1)return null;if(u.wantedBy.length===0)return[u];var d=u.wantedBy[0],m=[u].concat(p),g=this.buildFirstStateStack(d,m);return g===null?null:[u].concat(g)},o.prototype.save=function(){var u=this.table[this.current];return u.lexerState=this.lexerState,u},o.prototype.restore=function(u){var p=u.index;this.current=p,this.table[p]=u,this.table.splice(p+1),this.lexerState=u.lexerState,this.results=this.finish()},o.prototype.rewind=function(u){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[u])},o.prototype.finish=function(){var u=[],p=this.grammar.start,d=this.table[this.table.length-1];return d.states.forEach(function(m){m.rule.name===p&&m.dot===m.rule.symbols.length&&m.reference===0&&m.data!==o.fail&&u.push(m)}),u.map(function(m){return m.data})};function s(u){var p=typeof u;if(p==="string")return u;if(p==="object"){if(u.literal)return JSON.stringify(u.literal);if(u instanceof RegExp)return"character matching "+u;if(u.type)return u.type+" token";if(u.test)return"token matching "+String(u.test);throw new Error("Unknown symbol type: "+u)}}function l(u){var p=typeof u;if(p==="string")return u;if(p==="object"){if(u.literal)return JSON.stringify(u.literal);if(u instanceof RegExp)return u.toString();if(u.type)return"%"+u.type;if(u.test)return"<"+String(u.test)+">";throw new Error("Unknown symbol type: "+u)}}return{Parser:o,Grammar:n,Rule:t}})});var OP=ot((NP,Xf)=>{(function(t,e){typeof define=="function"&&define.amd?define([],e):typeof Xf=="object"&&Xf.exports?Xf.exports=e():t.moo=e()})(NP,function(){"use strict";var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,r=typeof new RegExp().sticky=="boolean";function n(O){return O&&e.call(O)==="[object RegExp]"}function i(O){return O&&typeof O=="object"&&!n(O)&&!Array.isArray(O)}function o(O){return O.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function s(O){var N=new RegExp("|"+O);return N.exec("").length-1}function l(O){return"("+O+")"}function u(O){if(!O.length)return"(?!)";var N=O.map(function(D){return"(?:"+D+")"}).join("|");return"(?:"+N+")"}function p(O){if(typeof O=="string")return"(?:"+o(O)+")";if(n(O)){if(O.ignoreCase)throw new Error("RegExp /i flag not allowed");if(O.global)throw new Error("RegExp /g flag is implied");if(O.sticky)throw new Error("RegExp /y flag is implied");if(O.multiline)throw new Error("RegExp /m flag is implied");return O.source}else throw new Error("Not a pattern: "+O)}function d(O,N){return O.length>N?O:Array(N-O.length+1).join(" ")+O}function m(O,N){for(var D=O.length,$=0;;){var q=O.lastIndexOf(`
`,D-1);if(q===-1||($++,D=q,$===N)||D===0)break}var K=$<N?0:D+1;return O.substring(K).split(`
`)}function g(O){for(var N=Object.getOwnPropertyNames(O),D=[],$=0;$<N.length;$++){var q=N[$],K=O[q],Z=[].concat(K);if(q==="include"){for(var te=0;te<Z.length;te++)D.push({include:Z[te]});continue}var me=[];Z.forEach(function(re){i(re)?(me.length&&D.push(v(q,me)),D.push(v(q,re)),me=[]):me.push(re)}),me.length&&D.push(v(q,me))}return D}function x(O){for(var N=[],D=0;D<O.length;D++){var $=O[D];if($.include){for(var q=[].concat($.include),K=0;K<q.length;K++)N.push({include:q[K]});continue}if(!$.type)throw new Error("Rule has no type: "+JSON.stringify($));N.push(v($.type,$))}return N}function v(O,N){if(i(N)||(N={match:N}),N.include)throw new Error("Matching rules cannot also include states");var D={defaultType:O,lineBreaks:!!N.error||!!N.fallback,pop:!1,next:null,push:null,error:!1,fallback:!1,value:null,type:null,shouldThrow:!1};for(var $ in N)t.call(N,$)&&(D[$]=N[$]);if(typeof D.type=="string"&&O!==D.type)throw new Error("Type transform cannot be a string (type '"+D.type+"' for token '"+O+"')");var q=D.match;return D.match=Array.isArray(q)?q:q?[q]:[],D.match.sort(function(K,Z){return n(K)&&n(Z)?0:n(Z)?-1:n(K)?1:Z.length-K.length}),D}function b(O){return Array.isArray(O)?x(O):g(O)}var I=v("error",{lineBreaks:!0,shouldThrow:!0});function M(O,N){for(var D=null,$=Object.create(null),q=!0,K=null,Z=[],te=[],me=0;me<O.length;me++)O[me].fallback&&(q=!1);for(var me=0;me<O.length;me++){var re=O[me];if(re.include)throw new Error("Inheritance is not allowed in stateless lexers");if(re.error||re.fallback){if(D)throw!re.fallback==!D.fallback?new Error("Multiple "+(re.fallback?"fallback":"error")+" rules not allowed (for token '"+re.defaultType+"')"):new Error("fallback and error are mutually exclusive (for token '"+re.defaultType+"')");D=re}var ke=re.match.slice();if(q)for(;ke.length&&typeof ke[0]=="string"&&ke[0].length===1;){var ar=ke.shift();$[ar.charCodeAt(0)]=re}if(re.pop||re.push||re.next){if(!N)throw new Error("State-switching options are not allowed in stateless lexers (for token '"+re.defaultType+"')");if(re.fallback)throw new Error("State-switching options are not allowed on fallback tokens (for token '"+re.defaultType+"')")}if(ke.length!==0){q=!1,Z.push(re);for(var oi=0;oi<ke.length;oi++){var sr=ke[oi];if(n(sr)){if(K===null)K=sr.unicode;else if(K!==sr.unicode&&re.fallback===!1)throw new Error("If one rule is /u then all must be")}}var yn=u(ke.map(p)),kr=new RegExp(yn);if(kr.test(""))throw new Error("RegExp matches empty string: "+kr);var xn=s(yn);if(xn>0)throw new Error("RegExp has capture groups: "+kr+`
Use (?: \u2026 ) instead`);if(!re.lineBreaks&&kr.test(`
`))throw new Error("Rule should declare lineBreaks: "+kr);te.push(l(yn))}}var zr=D&&D.fallback,vo=r&&!zr?"ym":"gm",ai=r||zr?"":"|";K===!0&&(vo+="u");var Sa=new RegExp(u(te)+ai,vo);return{regexp:Sa,groups:Z,fast:$,error:D||I}}function U(O){var N=M(b(O));return new de({start:N},"start")}function Q(O,N,D){var $=O&&(O.push||O.next);if($&&!D[$])throw new Error("Missing state '"+$+"' (in token '"+O.defaultType+"' of state '"+N+"')");if(O&&O.pop&&+O.pop!=1)throw new Error("pop must be 1 (in token '"+O.defaultType+"' of state '"+N+"')")}function ne(O,N){var D=O.$all?b(O.$all):[];delete O.$all;var $=Object.getOwnPropertyNames(O);N||(N=$[0]);for(var q=Object.create(null),K=0;K<$.length;K++){var Z=$[K];q[Z]=b(O[Z]).concat(D)}for(var K=0;K<$.length;K++)for(var Z=$[K],te=q[Z],me=Object.create(null),re=0;re<te.length;re++){var ke=te[re];if(ke.include){var ar=[re,1];if(ke.include!==Z&&!me[ke.include]){me[ke.include]=!0;var oi=q[ke.include];if(!oi)throw new Error("Cannot include nonexistent state '"+ke.include+"' (in state '"+Z+"')");for(var sr=0;sr<oi.length;sr++){var yn=oi[sr];te.indexOf(yn)===-1&&ar.push(yn)}}te.splice.apply(te,ar),re--}}for(var kr=Object.create(null),K=0;K<$.length;K++){var Z=$[K];kr[Z]=M(q[Z],!0)}for(var K=0;K<$.length;K++){for(var xn=$[K],zr=kr[xn],vo=zr.groups,re=0;re<vo.length;re++)Q(vo[re],xn,kr);for(var ai=Object.getOwnPropertyNames(zr.fast),re=0;re<ai.length;re++)Q(zr.fast[ai[re]],xn,kr)}return new de(kr,N)}function he(O){for(var N=typeof Map<"u",D=N?new Map:Object.create(null),$=Object.getOwnPropertyNames(O),q=0;q<$.length;q++){var K=$[q],Z=O[K],te=Array.isArray(Z)?Z:[Z];te.forEach(function(me){if(typeof me!="string")throw new Error("keyword must be string (in keyword '"+K+"')");N?D.set(me,K):D[me]=K})}return function(me){return N?D.get(me):D[me]}}var de=function(O,N){this.startState=N,this.states=O,this.buffer="",this.stack=[],this.reset()};de.prototype.reset=function(O,N){return this.buffer=O||"",this.index=0,this.line=N?N.line:1,this.col=N?N.col:1,this.queuedToken=N?N.queuedToken:null,this.queuedText=N?N.queuedText:"",this.queuedThrow=N?N.queuedThrow:null,this.setState(N?N.state:this.startState),this.stack=N&&N.stack?N.stack.slice():[],this},de.prototype.save=function(){return{line:this.line,col:this.col,state:this.state,stack:this.stack.slice(),queuedToken:this.queuedToken,queuedText:this.queuedText,queuedThrow:this.queuedThrow}},de.prototype.setState=function(O){if(!(!O||this.state===O)){this.state=O;var N=this.states[O];this.groups=N.groups,this.error=N.error,this.re=N.regexp,this.fast=N.fast}},de.prototype.popState=function(){this.setState(this.stack.pop())},de.prototype.pushState=function(O){this.stack.push(this.state),this.setState(O)};var dt=r?function(O,N){return O.exec(N)}:function(O,N){var D=O.exec(N);return D[0].length===0?null:D};de.prototype._getGroup=function(O){for(var N=this.groups.length,D=0;D<N;D++)if(O[D+1]!==void 0)return this.groups[D];throw new Error("Cannot find token type for matched text")};function Dt(){return this.value}if(de.prototype.next=function(){var O=this.index;if(this.queuedGroup){var N=this._token(this.queuedGroup,this.queuedText,O);return this.queuedGroup=null,this.queuedText="",N}var D=this.buffer;if(O!==D.length){var Z=this.fast[D.charCodeAt(O)];if(Z)return this._token(Z,D.charAt(O),O);var $=this.re;$.lastIndex=O;var q=dt($,D),K=this.error;if(q==null)return this._token(K,D.slice(O,D.length),O);var Z=this._getGroup(q),te=q[0];return K.fallback&&q.index!==O?(this.queuedGroup=Z,this.queuedText=te,this._token(K,D.slice(O,q.index),O)):this._token(Z,te,O)}},de.prototype._token=function(O,N,D){var $=0;if(O.lineBreaks){var q=/\n/g,K=1;if(N===`
`)$=1;else for(;q.exec(N);)$++,K=q.lastIndex}var Z={type:typeof O.type=="function"&&O.type(N)||O.defaultType,value:typeof O.value=="function"?O.value(N):N,text:N,toString:Dt,offset:D,lineBreaks:$,line:this.line,col:this.col},te=N.length;if(this.index+=te,this.line+=$,$!==0?this.col=te-K+1:this.col+=te,O.shouldThrow){var me=new Error(this.formatError(Z,"invalid syntax"));throw me}return O.pop?this.popState():O.push?this.pushState(O.push):O.next&&this.setState(O.next),Z},typeof Symbol<"u"&&Symbol.iterator){var nt=function(O){this.lexer=O};nt.prototype.next=function(){var O=this.lexer.next();return{value:O,done:!O}},nt.prototype[Symbol.iterator]=function(){return this},de.prototype[Symbol.iterator]=function(){return new nt(this)}}return de.prototype.formatError=function(O,N){if(O==null)var D=this.buffer.slice(this.index),O={text:D,offset:this.index,lineBreaks:D.indexOf(`
`)===-1?0:1,line:this.line,col:this.col};var $=2,q=Math.max(O.line-$,1),K=O.line+$,Z=String(K).length,te=m(this.buffer,this.line-O.line+$+1).slice(0,5),me=[];me.push(N+" at line "+O.line+" col "+O.col+":"),me.push("");for(var re=0;re<te.length;re++){var ke=te[re],ar=q+re;me.push(d(String(ar),Z)+"  "+ke),ar===O.line&&me.push(d("",Z+O.col+1)+"^")}return me.join(`
`)},de.prototype.clone=function(){return new de(this.states,this.state)},de.prototype.has=function(O){return!0},{compile:U,states:ne,error:Object.freeze({error:!0}),fallback:Object.freeze({fallback:!0}),keywords:he}})});var gl=ot((Kn,kM)=>{"use strict";Object.defineProperty(Kn,"__esModule",{value:!0});function Mn(t){return typeof t=="object"&&!("toString"in t)?Object.prototype.toString.call(t).slice(8,-1):t}var O5=typeof process=="object"&&process.env.NODE_ENV==="production";function ln(t,e){if(!t)throw O5?new Error("Invariant failed"):new Error(e())}Kn.invariant=ln;var sT=Object.prototype.hasOwnProperty,L5=Array.prototype.splice,U5=Object.prototype.toString;function zo(t){return U5.call(t).slice(8,-1)}var Md=Object.assign||function(t,e){return cT(e).forEach(function(r){sT.call(e,r)&&(t[r]=e[r])}),t},cT=typeof Object.getOwnPropertySymbols=="function"?function(t){return Object.keys(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.keys(t)};function ao(t){return Array.isArray(t)?Md(t.constructor(t.length),t):zo(t)==="Map"?new Map(t):zo(t)==="Set"?new Set(t):t&&typeof t=="object"?Md(Object.create(Object.getPrototypeOf(t)),t):t}var EM=function(){function t(){this.commands=Md({},B5),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(e,r){return e===r},this.update.newContext=function(){return new t().update}}return Object.defineProperty(t.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(e){this.update.isEquals=e},enumerable:!0,configurable:!0}),t.prototype.extend=function(e,r){this.commands[e]=r},t.prototype.update=function(e,r){var n=this,i=typeof r=="function"?{$apply:r}:r;Array.isArray(e)&&Array.isArray(i)||ln(!Array.isArray(i),function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."}),ln(typeof i=="object"&&i!==null,function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the "+("following commands: "+Object.keys(n.commands).join(", ")+".")});var o=e;return cT(i).forEach(function(s){if(sT.call(n.commands,s)){var l=e===o;o=n.commands[s](i[s],o,i,e),l&&n.isEquals(o,e)&&(o=e)}else{var u=zo(e)==="Map"?n.update(e.get(s),i[s]):n.update(e[s],i[s]),p=zo(o)==="Map"?o.get(s):o[s];(!n.isEquals(u,p)||typeof u>"u"&&!sT.call(e,s))&&(o===e&&(o=ao(e)),zo(o)==="Map"?o.set(s,u):o[s]=u)}}),o},t}();Kn.Context=EM;var B5={$push:function(t,e,r){return wM(e,r,"$push"),t.length?e.concat(t):e},$unshift:function(t,e,r){return wM(e,r,"$unshift"),t.length?t.concat(e):e},$splice:function(t,e,r,n){return V5(e,r),t.forEach(function(i){RM(i),e===n&&i.length&&(e=ao(n)),L5.apply(e,i)}),e},$set:function(t,e,r){return H5(r),t},$toggle:function(t,e){hl(t,"$toggle");var r=t.length?ao(e):e;return t.forEach(function(n){r[n]=!e[n]}),r},$unset:function(t,e,r,n){return hl(t,"$unset"),t.forEach(function(i){Object.hasOwnProperty.call(e,i)&&(e===n&&(e=ao(n)),delete e[i])}),e},$add:function(t,e,r,n){return _M(e,"$add"),hl(t,"$add"),zo(e)==="Map"?t.forEach(function(i){var o=i[0],s=i[1];e===n&&e.get(o)!==s&&(e=ao(n)),e.set(o,s)}):t.forEach(function(i){e===n&&!e.has(i)&&(e=ao(n)),e.add(i)}),e},$remove:function(t,e,r,n){return _M(e,"$remove"),hl(t,"$remove"),t.forEach(function(i){e===n&&e.has(i)&&(e=ao(n)),e.delete(i)}),e},$merge:function(t,e,r,n){return $5(e,t),cT(t).forEach(function(i){t[i]!==e[i]&&(e===n&&(e=ao(n)),e[i]=t[i])}),e},$apply:function(t,e){return W5(t),t(e)}},lT=new EM;Kn.isEquals=lT.update.isEquals;Kn.extend=lT.extend;Kn.default=lT.update;Kn.default.default=kM.exports=Md(Kn.default,Kn);function wM(t,e,r){ln(Array.isArray(t),function(){return"update(): expected target of "+Mn(r)+" to be an array; got "+Mn(t)+"."}),hl(e[r],r)}function hl(t,e){ln(Array.isArray(t),function(){return"update(): expected spec of "+Mn(e)+" to be an array; got "+Mn(t)+". Did you forget to wrap your parameter in an array?"})}function V5(t,e){ln(Array.isArray(t),function(){return"Expected $splice target to be an array; got "+Mn(t)}),RM(e.$splice)}function RM(t){ln(Array.isArray(t),function(){return"update(): expected spec of $splice to be an array of arrays; got "+Mn(t)+". Did you forget to wrap your parameters in an array?"})}function W5(t){ln(typeof t=="function",function(){return"update(): expected spec of $apply to be a function; got "+Mn(t)+"."})}function H5(t){ln(Object.keys(t).length===1,function(){return"Cannot have more than one key in an object with $set"})}function $5(t,e){ln(e&&typeof e=="object",function(){return"update(): $merge expects a spec of type 'object'; got "+Mn(e)}),ln(t&&typeof t=="object",function(){return"update(): $merge expects a target of type 'object'; got "+Mn(t)})}function _M(t,e){var r=zo(t);ln(r==="Map"||r==="Set",function(){return"update(): "+Mn(e)+" expects a target of type Set or Map; got "+Mn(r)})}});var hv=ot((Xs,tu)=>{(function(){var t,e="4.17.21",r=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",i="Expected a function",o="Invalid `variable` option passed into `_.template`",s="__lodash_hash_undefined__",l=500,u="__lodash_placeholder__",p=1,d=2,m=4,g=1,x=2,v=1,b=2,I=4,M=8,U=16,Q=32,ne=64,he=128,de=256,dt=512,Dt=30,nt="...",O=800,N=16,D=1,$=2,q=3,K=1/0,Z=9007199254740991,te=17976931348623157e292,me=NaN,re=4294967295,ke=re-1,ar=re>>>1,oi=[["ary",he],["bind",v],["bindKey",b],["curry",M],["curryRight",U],["flip",dt],["partial",Q],["partialRight",ne],["rearg",de]],sr="[object Arguments]",yn="[object Array]",kr="[object AsyncFunction]",xn="[object Boolean]",zr="[object Date]",vo="[object DOMException]",ai="[object Error]",Sa="[object Function]",Ub="[object GeneratorFunction]",Sn="[object Map]",dc="[object Number]",qF="[object Null]",si="[object Object]",Bb="[object Promise]",zF="[object Proxy]",mc="[object RegExp]",Tn="[object Set]",hc="[object String]",Du="[object Symbol]",GF="[object Undefined]",gc="[object WeakMap]",KF="[object WeakSet]",yc="[object ArrayBuffer]",Ta="[object DataView]",fy="[object Float32Array]",dy="[object Float64Array]",my="[object Int8Array]",hy="[object Int16Array]",gy="[object Int32Array]",yy="[object Uint8Array]",xy="[object Uint8ClampedArray]",Sy="[object Uint16Array]",Ty="[object Uint32Array]",ZF=/\b__p \+= '';/g,QF=/\b(__p \+=) '' \+/g,YF=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Vb=/&(?:amp|lt|gt|quot|#39);/g,Wb=/[&<>"']/g,XF=RegExp(Vb.source),JF=RegExp(Wb.source),eC=/<%-([\s\S]+?)%>/g,tC=/<%([\s\S]+?)%>/g,Hb=/<%=([\s\S]+?)%>/g,rC=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,nC=/^\w*$/,iC=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,vy=/[\\^$.*+?()[\]{}|]/g,oC=RegExp(vy.source),by=/^\s+/,aC=/\s/,sC=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,cC=/\{\n\/\* \[wrapped with (.+)\] \*/,lC=/,? & /,uC=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,pC=/[()=,{}\[\]\/\s]/,fC=/\\(\\)?/g,dC=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,$b=/\w*$/,mC=/^[-+]0x[0-9a-f]+$/i,hC=/^0b[01]+$/i,gC=/^\[object .+?Constructor\]$/,yC=/^0o[0-7]+$/i,xC=/^(?:0|[1-9]\d*)$/,SC=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Iu=/($^)/,TC=/['\n\r\u2028\u2029\\]/g,Fu="\\ud800-\\udfff",vC="\\u0300-\\u036f",bC="\\ufe20-\\ufe2f",wC="\\u20d0-\\u20ff",jb=vC+bC+wC,qb="\\u2700-\\u27bf",zb="a-z\\xdf-\\xf6\\xf8-\\xff",_C="\\xac\\xb1\\xd7\\xf7",EC="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",RC="\\u2000-\\u206f",kC=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Gb="A-Z\\xc0-\\xd6\\xd8-\\xde",Kb="\\ufe0e\\ufe0f",Zb=_C+EC+RC+kC,wy="['\u2019]",PC="["+Fu+"]",Qb="["+Zb+"]",Cu="["+jb+"]",Yb="\\d+",MC="["+qb+"]",Xb="["+zb+"]",Jb="[^"+Fu+Zb+Yb+qb+zb+Gb+"]",_y="\\ud83c[\\udffb-\\udfff]",AC="(?:"+Cu+"|"+_y+")",ew="[^"+Fu+"]",Ey="(?:\\ud83c[\\udde6-\\uddff]){2}",Ry="[\\ud800-\\udbff][\\udc00-\\udfff]",va="["+Gb+"]",tw="\\u200d",rw="(?:"+Xb+"|"+Jb+")",DC="(?:"+va+"|"+Jb+")",nw="(?:"+wy+"(?:d|ll|m|re|s|t|ve))?",iw="(?:"+wy+"(?:D|LL|M|RE|S|T|VE))?",ow=AC+"?",aw="["+Kb+"]?",IC="(?:"+tw+"(?:"+[ew,Ey,Ry].join("|")+")"+aw+ow+")*",FC="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",CC="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",sw=aw+ow+IC,NC="(?:"+[MC,Ey,Ry].join("|")+")"+sw,OC="(?:"+[ew+Cu+"?",Cu,Ey,Ry,PC].join("|")+")",LC=RegExp(wy,"g"),UC=RegExp(Cu,"g"),ky=RegExp(_y+"(?="+_y+")|"+OC+sw,"g"),BC=RegExp([va+"?"+Xb+"+"+nw+"(?="+[Qb,va,"$"].join("|")+")",DC+"+"+iw+"(?="+[Qb,va+rw,"$"].join("|")+")",va+"?"+rw+"+"+nw,va+"+"+iw,CC,FC,Yb,NC].join("|"),"g"),VC=RegExp("["+tw+Fu+jb+Kb+"]"),WC=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,HC=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],$C=-1,Ye={};Ye[fy]=Ye[dy]=Ye[my]=Ye[hy]=Ye[gy]=Ye[yy]=Ye[xy]=Ye[Sy]=Ye[Ty]=!0,Ye[sr]=Ye[yn]=Ye[yc]=Ye[xn]=Ye[Ta]=Ye[zr]=Ye[ai]=Ye[Sa]=Ye[Sn]=Ye[dc]=Ye[si]=Ye[mc]=Ye[Tn]=Ye[hc]=Ye[gc]=!1;var Ze={};Ze[sr]=Ze[yn]=Ze[yc]=Ze[Ta]=Ze[xn]=Ze[zr]=Ze[fy]=Ze[dy]=Ze[my]=Ze[hy]=Ze[gy]=Ze[Sn]=Ze[dc]=Ze[si]=Ze[mc]=Ze[Tn]=Ze[hc]=Ze[Du]=Ze[yy]=Ze[xy]=Ze[Sy]=Ze[Ty]=!0,Ze[ai]=Ze[Sa]=Ze[gc]=!1;var jC={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},qC={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},zC={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},GC={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},KC=parseFloat,ZC=parseInt,cw=typeof global=="object"&&global&&global.Object===Object&&global,QC=typeof self=="object"&&self&&self.Object===Object&&self,vt=cw||QC||Function("return this")(),Py=typeof Xs=="object"&&Xs&&!Xs.nodeType&&Xs,bo=Py&&typeof tu=="object"&&tu&&!tu.nodeType&&tu,lw=bo&&bo.exports===Py,My=lw&&cw.process,Gr=function(){try{var k=bo&&bo.require&&bo.require("util").types;return k||My&&My.binding&&My.binding("util")}catch{}}(),uw=Gr&&Gr.isArrayBuffer,pw=Gr&&Gr.isDate,fw=Gr&&Gr.isMap,dw=Gr&&Gr.isRegExp,mw=Gr&&Gr.isSet,hw=Gr&&Gr.isTypedArray;function Pr(k,B,L){switch(L.length){case 0:return k.call(B);case 1:return k.call(B,L[0]);case 2:return k.call(B,L[0],L[1]);case 3:return k.call(B,L[0],L[1],L[2])}return k.apply(B,L)}function YC(k,B,L,J){for(var ye=-1,Oe=k==null?0:k.length;++ye<Oe;){var gt=k[ye];B(J,gt,L(gt),k)}return J}function Kr(k,B){for(var L=-1,J=k==null?0:k.length;++L<J&&B(k[L],L,k)!==!1;);return k}function XC(k,B){for(var L=k==null?0:k.length;L--&&B(k[L],L,k)!==!1;);return k}function gw(k,B){for(var L=-1,J=k==null?0:k.length;++L<J;)if(!B(k[L],L,k))return!1;return!0}function Ni(k,B){for(var L=-1,J=k==null?0:k.length,ye=0,Oe=[];++L<J;){var gt=k[L];B(gt,L,k)&&(Oe[ye++]=gt)}return Oe}function Nu(k,B){var L=k==null?0:k.length;return!!L&&ba(k,B,0)>-1}function Ay(k,B,L){for(var J=-1,ye=k==null?0:k.length;++J<ye;)if(L(B,k[J]))return!0;return!1}function Je(k,B){for(var L=-1,J=k==null?0:k.length,ye=Array(J);++L<J;)ye[L]=B(k[L],L,k);return ye}function Oi(k,B){for(var L=-1,J=B.length,ye=k.length;++L<J;)k[ye+L]=B[L];return k}function Dy(k,B,L,J){var ye=-1,Oe=k==null?0:k.length;for(J&&Oe&&(L=k[++ye]);++ye<Oe;)L=B(L,k[ye],ye,k);return L}function JC(k,B,L,J){var ye=k==null?0:k.length;for(J&&ye&&(L=k[--ye]);ye--;)L=B(L,k[ye],ye,k);return L}function Iy(k,B){for(var L=-1,J=k==null?0:k.length;++L<J;)if(B(k[L],L,k))return!0;return!1}var eN=Fy("length");function tN(k){return k.split("")}function rN(k){return k.match(uC)||[]}function yw(k,B,L){var J;return L(k,function(ye,Oe,gt){if(B(ye,Oe,gt))return J=Oe,!1}),J}function Ou(k,B,L,J){for(var ye=k.length,Oe=L+(J?1:-1);J?Oe--:++Oe<ye;)if(B(k[Oe],Oe,k))return Oe;return-1}function ba(k,B,L){return B===B?mN(k,B,L):Ou(k,xw,L)}function nN(k,B,L,J){for(var ye=L-1,Oe=k.length;++ye<Oe;)if(J(k[ye],B))return ye;return-1}function xw(k){return k!==k}function Sw(k,B){var L=k==null?0:k.length;return L?Ny(k,B)/L:me}function Fy(k){return function(B){return B==null?t:B[k]}}function Cy(k){return function(B){return k==null?t:k[B]}}function Tw(k,B,L,J,ye){return ye(k,function(Oe,gt,ze){L=J?(J=!1,Oe):B(L,Oe,gt,ze)}),L}function iN(k,B){var L=k.length;for(k.sort(B);L--;)k[L]=k[L].value;return k}function Ny(k,B){for(var L,J=-1,ye=k.length;++J<ye;){var Oe=B(k[J]);Oe!==t&&(L=L===t?Oe:L+Oe)}return L}function Oy(k,B){for(var L=-1,J=Array(k);++L<k;)J[L]=B(L);return J}function oN(k,B){return Je(B,function(L){return[L,k[L]]})}function vw(k){return k&&k.slice(0,Ew(k)+1).replace(by,"")}function Mr(k){return function(B){return k(B)}}function Ly(k,B){return Je(B,function(L){return k[L]})}function xc(k,B){return k.has(B)}function bw(k,B){for(var L=-1,J=k.length;++L<J&&ba(B,k[L],0)>-1;);return L}function ww(k,B){for(var L=k.length;L--&&ba(B,k[L],0)>-1;);return L}function aN(k,B){for(var L=k.length,J=0;L--;)k[L]===B&&++J;return J}var sN=Cy(jC),cN=Cy(qC);function lN(k){return"\\"+GC[k]}function uN(k,B){return k==null?t:k[B]}function wa(k){return VC.test(k)}function pN(k){return WC.test(k)}function fN(k){for(var B,L=[];!(B=k.next()).done;)L.push(B.value);return L}function Uy(k){var B=-1,L=Array(k.size);return k.forEach(function(J,ye){L[++B]=[ye,J]}),L}function _w(k,B){return function(L){return k(B(L))}}function Li(k,B){for(var L=-1,J=k.length,ye=0,Oe=[];++L<J;){var gt=k[L];(gt===B||gt===u)&&(k[L]=u,Oe[ye++]=L)}return Oe}function Lu(k){var B=-1,L=Array(k.size);return k.forEach(function(J){L[++B]=J}),L}function dN(k){var B=-1,L=Array(k.size);return k.forEach(function(J){L[++B]=[J,J]}),L}function mN(k,B,L){for(var J=L-1,ye=k.length;++J<ye;)if(k[J]===B)return J;return-1}function hN(k,B,L){for(var J=L+1;J--;)if(k[J]===B)return J;return J}function _a(k){return wa(k)?yN(k):eN(k)}function vn(k){return wa(k)?xN(k):tN(k)}function Ew(k){for(var B=k.length;B--&&aC.test(k.charAt(B)););return B}var gN=Cy(zC);function yN(k){for(var B=ky.lastIndex=0;ky.test(k);)++B;return B}function xN(k){return k.match(ky)||[]}function SN(k){return k.match(BC)||[]}var TN=function k(B){B=B==null?vt:Ui.defaults(vt.Object(),B,Ui.pick(vt,HC));var L=B.Array,J=B.Date,ye=B.Error,Oe=B.Function,gt=B.Math,ze=B.Object,By=B.RegExp,vN=B.String,Zr=B.TypeError,Uu=L.prototype,bN=Oe.prototype,Ea=ze.prototype,Bu=B["__core-js_shared__"],Vu=bN.toString,$e=Ea.hasOwnProperty,wN=0,Rw=function(){var a=/[^.]+$/.exec(Bu&&Bu.keys&&Bu.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),Wu=Ea.toString,_N=Vu.call(ze),EN=vt._,RN=By("^"+Vu.call($e).replace(vy,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Hu=lw?B.Buffer:t,Bi=B.Symbol,$u=B.Uint8Array,kw=Hu?Hu.allocUnsafe:t,ju=_w(ze.getPrototypeOf,ze),Pw=ze.create,Mw=Ea.propertyIsEnumerable,qu=Uu.splice,Aw=Bi?Bi.isConcatSpreadable:t,Sc=Bi?Bi.iterator:t,wo=Bi?Bi.toStringTag:t,zu=function(){try{var a=Po(ze,"defineProperty");return a({},"",{}),a}catch{}}(),kN=B.clearTimeout!==vt.clearTimeout&&B.clearTimeout,PN=J&&J.now!==vt.Date.now&&J.now,MN=B.setTimeout!==vt.setTimeout&&B.setTimeout,Gu=gt.ceil,Ku=gt.floor,Vy=ze.getOwnPropertySymbols,AN=Hu?Hu.isBuffer:t,Dw=B.isFinite,DN=Uu.join,IN=_w(ze.keys,ze),yt=gt.max,Lt=gt.min,FN=J.now,CN=B.parseInt,Iw=gt.random,NN=Uu.reverse,Wy=Po(B,"DataView"),Tc=Po(B,"Map"),Hy=Po(B,"Promise"),Ra=Po(B,"Set"),vc=Po(B,"WeakMap"),bc=Po(ze,"create"),Zu=vc&&new vc,ka={},ON=Mo(Wy),LN=Mo(Tc),UN=Mo(Hy),BN=Mo(Ra),VN=Mo(vc),Qu=Bi?Bi.prototype:t,wc=Qu?Qu.valueOf:t,Fw=Qu?Qu.toString:t;function S(a){if(it(a)&&!Se(a)&&!(a instanceof De)){if(a instanceof Qr)return a;if($e.call(a,"__wrapped__"))return C_(a)}return new Qr(a)}var Pa=function(){function a(){}return function(c){if(!et(c))return{};if(Pw)return Pw(c);a.prototype=c;var f=new a;return a.prototype=t,f}}();function Yu(){}function Qr(a,c){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=t}S.templateSettings={escape:eC,evaluate:tC,interpolate:Hb,variable:"",imports:{_:S}},S.prototype=Yu.prototype,S.prototype.constructor=S,Qr.prototype=Pa(Yu.prototype),Qr.prototype.constructor=Qr;function De(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=re,this.__views__=[]}function WN(){var a=new De(this.__wrapped__);return a.__actions__=cr(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=cr(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=cr(this.__views__),a}function HN(){if(this.__filtered__){var a=new De(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a}function $N(){var a=this.__wrapped__.value(),c=this.__dir__,f=Se(a),h=c<0,y=f?a.length:0,T=tL(0,y,this.__views__),E=T.start,R=T.end,A=R-E,V=h?R:E-1,W=this.__iteratees__,j=W.length,Y=0,ie=Lt(A,this.__takeCount__);if(!f||!h&&y==A&&ie==A)return n_(a,this.__actions__);var ue=[];e:for(;A--&&Y<ie;){V+=c;for(var Re=-1,pe=a[V];++Re<j;){var Ae=W[Re],Fe=Ae.iteratee,Ir=Ae.type,Zt=Fe(pe);if(Ir==$)pe=Zt;else if(!Zt){if(Ir==D)continue e;break e}}ue[Y++]=pe}return ue}De.prototype=Pa(Yu.prototype),De.prototype.constructor=De;function _o(a){var c=-1,f=a==null?0:a.length;for(this.clear();++c<f;){var h=a[c];this.set(h[0],h[1])}}function jN(){this.__data__=bc?bc(null):{},this.size=0}function qN(a){var c=this.has(a)&&delete this.__data__[a];return this.size-=c?1:0,c}function zN(a){var c=this.__data__;if(bc){var f=c[a];return f===s?t:f}return $e.call(c,a)?c[a]:t}function GN(a){var c=this.__data__;return bc?c[a]!==t:$e.call(c,a)}function KN(a,c){var f=this.__data__;return this.size+=this.has(a)?0:1,f[a]=bc&&c===t?s:c,this}_o.prototype.clear=jN,_o.prototype.delete=qN,_o.prototype.get=zN,_o.prototype.has=GN,_o.prototype.set=KN;function ci(a){var c=-1,f=a==null?0:a.length;for(this.clear();++c<f;){var h=a[c];this.set(h[0],h[1])}}function ZN(){this.__data__=[],this.size=0}function QN(a){var c=this.__data__,f=Xu(c,a);if(f<0)return!1;var h=c.length-1;return f==h?c.pop():qu.call(c,f,1),--this.size,!0}function YN(a){var c=this.__data__,f=Xu(c,a);return f<0?t:c[f][1]}function XN(a){return Xu(this.__data__,a)>-1}function JN(a,c){var f=this.__data__,h=Xu(f,a);return h<0?(++this.size,f.push([a,c])):f[h][1]=c,this}ci.prototype.clear=ZN,ci.prototype.delete=QN,ci.prototype.get=YN,ci.prototype.has=XN,ci.prototype.set=JN;function li(a){var c=-1,f=a==null?0:a.length;for(this.clear();++c<f;){var h=a[c];this.set(h[0],h[1])}}function eO(){this.size=0,this.__data__={hash:new _o,map:new(Tc||ci),string:new _o}}function tO(a){var c=up(this,a).delete(a);return this.size-=c?1:0,c}function rO(a){return up(this,a).get(a)}function nO(a){return up(this,a).has(a)}function iO(a,c){var f=up(this,a),h=f.size;return f.set(a,c),this.size+=f.size==h?0:1,this}li.prototype.clear=eO,li.prototype.delete=tO,li.prototype.get=rO,li.prototype.has=nO,li.prototype.set=iO;function Eo(a){var c=-1,f=a==null?0:a.length;for(this.__data__=new li;++c<f;)this.add(a[c])}function oO(a){return this.__data__.set(a,s),this}function aO(a){return this.__data__.has(a)}Eo.prototype.add=Eo.prototype.push=oO,Eo.prototype.has=aO;function bn(a){var c=this.__data__=new ci(a);this.size=c.size}function sO(){this.__data__=new ci,this.size=0}function cO(a){var c=this.__data__,f=c.delete(a);return this.size=c.size,f}function lO(a){return this.__data__.get(a)}function uO(a){return this.__data__.has(a)}function pO(a,c){var f=this.__data__;if(f instanceof ci){var h=f.__data__;if(!Tc||h.length<r-1)return h.push([a,c]),this.size=++f.size,this;f=this.__data__=new li(h)}return f.set(a,c),this.size=f.size,this}bn.prototype.clear=sO,bn.prototype.delete=cO,bn.prototype.get=lO,bn.prototype.has=uO,bn.prototype.set=pO;function Cw(a,c){var f=Se(a),h=!f&&Ao(a),y=!f&&!h&&ji(a),T=!f&&!h&&!y&&Ia(a),E=f||h||y||T,R=E?Oy(a.length,vN):[],A=R.length;for(var V in a)(c||$e.call(a,V))&&!(E&&(V=="length"||y&&(V=="offset"||V=="parent")||T&&(V=="buffer"||V=="byteLength"||V=="byteOffset")||di(V,A)))&&R.push(V);return R}function Nw(a){var c=a.length;return c?a[Jy(0,c-1)]:t}function fO(a,c){return pp(cr(a),Ro(c,0,a.length))}function dO(a){return pp(cr(a))}function $y(a,c,f){(f!==t&&!wn(a[c],f)||f===t&&!(c in a))&&ui(a,c,f)}function _c(a,c,f){var h=a[c];(!($e.call(a,c)&&wn(h,f))||f===t&&!(c in a))&&ui(a,c,f)}function Xu(a,c){for(var f=a.length;f--;)if(wn(a[f][0],c))return f;return-1}function mO(a,c,f,h){return Vi(a,function(y,T,E){c(h,y,f(y),E)}),h}function Ow(a,c){return a&&Bn(c,bt(c),a)}function hO(a,c){return a&&Bn(c,ur(c),a)}function ui(a,c,f){c=="__proto__"&&zu?zu(a,c,{configurable:!0,enumerable:!0,value:f,writable:!0}):a[c]=f}function jy(a,c){for(var f=-1,h=c.length,y=L(h),T=a==null;++f<h;)y[f]=T?t:_x(a,c[f]);return y}function Ro(a,c,f){return a===a&&(f!==t&&(a=a<=f?a:f),c!==t&&(a=a>=c?a:c)),a}function Yr(a,c,f,h,y,T){var E,R=c&p,A=c&d,V=c&m;if(f&&(E=y?f(a,h,y,T):f(a)),E!==t)return E;if(!et(a))return a;var W=Se(a);if(W){if(E=nL(a),!R)return cr(a,E)}else{var j=Ut(a),Y=j==Sa||j==Ub;if(ji(a))return a_(a,R);if(j==si||j==sr||Y&&!y){if(E=A||Y?{}:E_(a),!R)return A?zO(a,hO(E,a)):qO(a,Ow(E,a))}else{if(!Ze[j])return y?a:{};E=iL(a,j,R)}}T||(T=new bn);var ie=T.get(a);if(ie)return ie;T.set(a,E),eE(a)?a.forEach(function(pe){E.add(Yr(pe,c,f,pe,a,T))}):X_(a)&&a.forEach(function(pe,Ae){E.set(Ae,Yr(pe,c,f,Ae,a,T))});var ue=V?A?ux:lx:A?ur:bt,Re=W?t:ue(a);return Kr(Re||a,function(pe,Ae){Re&&(Ae=pe,pe=a[Ae]),_c(E,Ae,Yr(pe,c,f,Ae,a,T))}),E}function gO(a){var c=bt(a);return function(f){return Lw(f,a,c)}}function Lw(a,c,f){var h=f.length;if(a==null)return!h;for(a=ze(a);h--;){var y=f[h],T=c[y],E=a[y];if(E===t&&!(y in a)||!T(E))return!1}return!0}function Uw(a,c,f){if(typeof a!="function")throw new Zr(i);return Dc(function(){a.apply(t,f)},c)}function Ec(a,c,f,h){var y=-1,T=Nu,E=!0,R=a.length,A=[],V=c.length;if(!R)return A;f&&(c=Je(c,Mr(f))),h?(T=Ay,E=!1):c.length>=r&&(T=xc,E=!1,c=new Eo(c));e:for(;++y<R;){var W=a[y],j=f==null?W:f(W);if(W=h||W!==0?W:0,E&&j===j){for(var Y=V;Y--;)if(c[Y]===j)continue e;A.push(W)}else T(c,j,h)||A.push(W)}return A}var Vi=p_(Un),Bw=p_(zy,!0);function yO(a,c){var f=!0;return Vi(a,function(h,y,T){return f=!!c(h,y,T),f}),f}function Ju(a,c,f){for(var h=-1,y=a.length;++h<y;){var T=a[h],E=c(T);if(E!=null&&(R===t?E===E&&!Dr(E):f(E,R)))var R=E,A=T}return A}function xO(a,c,f,h){var y=a.length;for(f=we(f),f<0&&(f=-f>y?0:y+f),h=h===t||h>y?y:we(h),h<0&&(h+=y),h=f>h?0:rE(h);f<h;)a[f++]=c;return a}function Vw(a,c){var f=[];return Vi(a,function(h,y,T){c(h,y,T)&&f.push(h)}),f}function It(a,c,f,h,y){var T=-1,E=a.length;for(f||(f=aL),y||(y=[]);++T<E;){var R=a[T];c>0&&f(R)?c>1?It(R,c-1,f,h,y):Oi(y,R):h||(y[y.length]=R)}return y}var qy=f_(),Ww=f_(!0);function Un(a,c){return a&&qy(a,c,bt)}function zy(a,c){return a&&Ww(a,c,bt)}function ep(a,c){return Ni(c,function(f){return mi(a[f])})}function ko(a,c){c=Hi(c,a);for(var f=0,h=c.length;a!=null&&f<h;)a=a[Vn(c[f++])];return f&&f==h?a:t}function Hw(a,c,f){var h=c(a);return Se(a)?h:Oi(h,f(a))}function Gt(a){return a==null?a===t?GF:qF:wo&&wo in ze(a)?eL(a):dL(a)}function Gy(a,c){return a>c}function SO(a,c){return a!=null&&$e.call(a,c)}function TO(a,c){return a!=null&&c in ze(a)}function vO(a,c,f){return a>=Lt(c,f)&&a<yt(c,f)}function Ky(a,c,f){for(var h=f?Ay:Nu,y=a[0].length,T=a.length,E=T,R=L(T),A=1/0,V=[];E--;){var W=a[E];E&&c&&(W=Je(W,Mr(c))),A=Lt(W.length,A),R[E]=!f&&(c||y>=120&&W.length>=120)?new Eo(E&&W):t}W=a[0];var j=-1,Y=R[0];e:for(;++j<y&&V.length<A;){var ie=W[j],ue=c?c(ie):ie;if(ie=f||ie!==0?ie:0,!(Y?xc(Y,ue):h(V,ue,f))){for(E=T;--E;){var Re=R[E];if(!(Re?xc(Re,ue):h(a[E],ue,f)))continue e}Y&&Y.push(ue),V.push(ie)}}return V}function bO(a,c,f,h){return Un(a,function(y,T,E){c(h,f(y),T,E)}),h}function Rc(a,c,f){c=Hi(c,a),a=M_(a,c);var h=a==null?a:a[Vn(Jr(c))];return h==null?t:Pr(h,a,f)}function $w(a){return it(a)&&Gt(a)==sr}function wO(a){return it(a)&&Gt(a)==yc}function _O(a){return it(a)&&Gt(a)==zr}function kc(a,c,f,h,y){return a===c?!0:a==null||c==null||!it(a)&&!it(c)?a!==a&&c!==c:EO(a,c,f,h,kc,y)}function EO(a,c,f,h,y,T){var E=Se(a),R=Se(c),A=E?yn:Ut(a),V=R?yn:Ut(c);A=A==sr?si:A,V=V==sr?si:V;var W=A==si,j=V==si,Y=A==V;if(Y&&ji(a)){if(!ji(c))return!1;E=!0,W=!1}if(Y&&!W)return T||(T=new bn),E||Ia(a)?b_(a,c,f,h,y,T):XO(a,c,A,f,h,y,T);if(!(f&g)){var ie=W&&$e.call(a,"__wrapped__"),ue=j&&$e.call(c,"__wrapped__");if(ie||ue){var Re=ie?a.value():a,pe=ue?c.value():c;return T||(T=new bn),y(Re,pe,f,h,T)}}return Y?(T||(T=new bn),JO(a,c,f,h,y,T)):!1}function RO(a){return it(a)&&Ut(a)==Sn}function Zy(a,c,f,h){var y=f.length,T=y,E=!h;if(a==null)return!T;for(a=ze(a);y--;){var R=f[y];if(E&&R[2]?R[1]!==a[R[0]]:!(R[0]in a))return!1}for(;++y<T;){R=f[y];var A=R[0],V=a[A],W=R[1];if(E&&R[2]){if(V===t&&!(A in a))return!1}else{var j=new bn;if(h)var Y=h(V,W,A,a,c,j);if(!(Y===t?kc(W,V,g|x,h,j):Y))return!1}}return!0}function jw(a){if(!et(a)||cL(a))return!1;var c=mi(a)?RN:gC;return c.test(Mo(a))}function kO(a){return it(a)&&Gt(a)==mc}function PO(a){return it(a)&&Ut(a)==Tn}function MO(a){return it(a)&&yp(a.length)&&!!Ye[Gt(a)]}function qw(a){return typeof a=="function"?a:a==null?pr:typeof a=="object"?Se(a)?Kw(a[0],a[1]):Gw(a):dE(a)}function Qy(a){if(!Ac(a))return IN(a);var c=[];for(var f in ze(a))$e.call(a,f)&&f!="constructor"&&c.push(f);return c}function AO(a){if(!et(a))return fL(a);var c=Ac(a),f=[];for(var h in a)h=="constructor"&&(c||!$e.call(a,h))||f.push(h);return f}function Yy(a,c){return a<c}function zw(a,c){var f=-1,h=lr(a)?L(a.length):[];return Vi(a,function(y,T,E){h[++f]=c(y,T,E)}),h}function Gw(a){var c=fx(a);return c.length==1&&c[0][2]?k_(c[0][0],c[0][1]):function(f){return f===a||Zy(f,a,c)}}function Kw(a,c){return mx(a)&&R_(c)?k_(Vn(a),c):function(f){var h=_x(f,a);return h===t&&h===c?Ex(f,a):kc(c,h,g|x)}}function tp(a,c,f,h,y){a!==c&&qy(c,function(T,E){if(y||(y=new bn),et(T))DO(a,c,E,f,tp,h,y);else{var R=h?h(gx(a,E),T,E+"",a,c,y):t;R===t&&(R=T),$y(a,E,R)}},ur)}function DO(a,c,f,h,y,T,E){var R=gx(a,f),A=gx(c,f),V=E.get(A);if(V){$y(a,f,V);return}var W=T?T(R,A,f+"",a,c,E):t,j=W===t;if(j){var Y=Se(A),ie=!Y&&ji(A),ue=!Y&&!ie&&Ia(A);W=A,Y||ie||ue?Se(R)?W=R:st(R)?W=cr(R):ie?(j=!1,W=a_(A,!0)):ue?(j=!1,W=s_(A,!0)):W=[]:Ic(A)||Ao(A)?(W=R,Ao(R)?W=nE(R):(!et(R)||mi(R))&&(W=E_(A))):j=!1}j&&(E.set(A,W),y(W,A,h,T,E),E.delete(A)),$y(a,f,W)}function Zw(a,c){var f=a.length;if(f)return c+=c<0?f:0,di(c,f)?a[c]:t}function Qw(a,c,f){c.length?c=Je(c,function(T){return Se(T)?function(E){return ko(E,T.length===1?T[0]:T)}:T}):c=[pr];var h=-1;c=Je(c,Mr(le()));var y=zw(a,function(T,E,R){var A=Je(c,function(V){return V(T)});return{criteria:A,index:++h,value:T}});return iN(y,function(T,E){return jO(T,E,f)})}function IO(a,c){return Yw(a,c,function(f,h){return Ex(a,h)})}function Yw(a,c,f){for(var h=-1,y=c.length,T={};++h<y;){var E=c[h],R=ko(a,E);f(R,E)&&Pc(T,Hi(E,a),R)}return T}function FO(a){return function(c){return ko(c,a)}}function Xy(a,c,f,h){var y=h?nN:ba,T=-1,E=c.length,R=a;for(a===c&&(c=cr(c)),f&&(R=Je(a,Mr(f)));++T<E;)for(var A=0,V=c[T],W=f?f(V):V;(A=y(R,W,A,h))>-1;)R!==a&&qu.call(R,A,1),qu.call(a,A,1);return a}function Xw(a,c){for(var f=a?c.length:0,h=f-1;f--;){var y=c[f];if(f==h||y!==T){var T=y;di(y)?qu.call(a,y,1):rx(a,y)}}return a}function Jy(a,c){return a+Ku(Iw()*(c-a+1))}function CO(a,c,f,h){for(var y=-1,T=yt(Gu((c-a)/(f||1)),0),E=L(T);T--;)E[h?T:++y]=a,a+=f;return E}function ex(a,c){var f="";if(!a||c<1||c>Z)return f;do c%2&&(f+=a),c=Ku(c/2),c&&(a+=a);while(c);return f}function Pe(a,c){return yx(P_(a,c,pr),a+"")}function NO(a){return Nw(Fa(a))}function OO(a,c){var f=Fa(a);return pp(f,Ro(c,0,f.length))}function Pc(a,c,f,h){if(!et(a))return a;c=Hi(c,a);for(var y=-1,T=c.length,E=T-1,R=a;R!=null&&++y<T;){var A=Vn(c[y]),V=f;if(A==="__proto__"||A==="constructor"||A==="prototype")return a;if(y!=E){var W=R[A];V=h?h(W,A,R):t,V===t&&(V=et(W)?W:di(c[y+1])?[]:{})}_c(R,A,V),R=R[A]}return a}var Jw=Zu?function(a,c){return Zu.set(a,c),a}:pr,LO=zu?function(a,c){return zu(a,"toString",{configurable:!0,enumerable:!1,value:kx(c),writable:!0})}:pr;function UO(a){return pp(Fa(a))}function Xr(a,c,f){var h=-1,y=a.length;c<0&&(c=-c>y?0:y+c),f=f>y?y:f,f<0&&(f+=y),y=c>f?0:f-c>>>0,c>>>=0;for(var T=L(y);++h<y;)T[h]=a[h+c];return T}function BO(a,c){var f;return Vi(a,function(h,y,T){return f=c(h,y,T),!f}),!!f}function rp(a,c,f){var h=0,y=a==null?h:a.length;if(typeof c=="number"&&c===c&&y<=ar){for(;h<y;){var T=h+y>>>1,E=a[T];E!==null&&!Dr(E)&&(f?E<=c:E<c)?h=T+1:y=T}return y}return tx(a,c,pr,f)}function tx(a,c,f,h){var y=0,T=a==null?0:a.length;if(T===0)return 0;c=f(c);for(var E=c!==c,R=c===null,A=Dr(c),V=c===t;y<T;){var W=Ku((y+T)/2),j=f(a[W]),Y=j!==t,ie=j===null,ue=j===j,Re=Dr(j);if(E)var pe=h||ue;else V?pe=ue&&(h||Y):R?pe=ue&&Y&&(h||!ie):A?pe=ue&&Y&&!ie&&(h||!Re):ie||Re?pe=!1:pe=h?j<=c:j<c;pe?y=W+1:T=W}return Lt(T,ke)}function e_(a,c){for(var f=-1,h=a.length,y=0,T=[];++f<h;){var E=a[f],R=c?c(E):E;if(!f||!wn(R,A)){var A=R;T[y++]=E===0?0:E}}return T}function t_(a){return typeof a=="number"?a:Dr(a)?me:+a}function Ar(a){if(typeof a=="string")return a;if(Se(a))return Je(a,Ar)+"";if(Dr(a))return Fw?Fw.call(a):"";var c=a+"";return c=="0"&&1/a==-K?"-0":c}function Wi(a,c,f){var h=-1,y=Nu,T=a.length,E=!0,R=[],A=R;if(f)E=!1,y=Ay;else if(T>=r){var V=c?null:QO(a);if(V)return Lu(V);E=!1,y=xc,A=new Eo}else A=c?[]:R;e:for(;++h<T;){var W=a[h],j=c?c(W):W;if(W=f||W!==0?W:0,E&&j===j){for(var Y=A.length;Y--;)if(A[Y]===j)continue e;c&&A.push(j),R.push(W)}else y(A,j,f)||(A!==R&&A.push(j),R.push(W))}return R}function rx(a,c){return c=Hi(c,a),a=M_(a,c),a==null||delete a[Vn(Jr(c))]}function r_(a,c,f,h){return Pc(a,c,f(ko(a,c)),h)}function np(a,c,f,h){for(var y=a.length,T=h?y:-1;(h?T--:++T<y)&&c(a[T],T,a););return f?Xr(a,h?0:T,h?T+1:y):Xr(a,h?T+1:0,h?y:T)}function n_(a,c){var f=a;return f instanceof De&&(f=f.value()),Dy(c,function(h,y){return y.func.apply(y.thisArg,Oi([h],y.args))},f)}function nx(a,c,f){var h=a.length;if(h<2)return h?Wi(a[0]):[];for(var y=-1,T=L(h);++y<h;)for(var E=a[y],R=-1;++R<h;)R!=y&&(T[y]=Ec(T[y]||E,a[R],c,f));return Wi(It(T,1),c,f)}function i_(a,c,f){for(var h=-1,y=a.length,T=c.length,E={};++h<y;){var R=h<T?c[h]:t;f(E,a[h],R)}return E}function ix(a){return st(a)?a:[]}function ox(a){return typeof a=="function"?a:pr}function Hi(a,c){return Se(a)?a:mx(a,c)?[a]:F_(Ve(a))}var VO=Pe;function $i(a,c,f){var h=a.length;return f=f===t?h:f,!c&&f>=h?a:Xr(a,c,f)}var o_=kN||function(a){return vt.clearTimeout(a)};function a_(a,c){if(c)return a.slice();var f=a.length,h=kw?kw(f):new a.constructor(f);return a.copy(h),h}function ax(a){var c=new a.constructor(a.byteLength);return new $u(c).set(new $u(a)),c}function WO(a,c){var f=c?ax(a.buffer):a.buffer;return new a.constructor(f,a.byteOffset,a.byteLength)}function HO(a){var c=new a.constructor(a.source,$b.exec(a));return c.lastIndex=a.lastIndex,c}function $O(a){return wc?ze(wc.call(a)):{}}function s_(a,c){var f=c?ax(a.buffer):a.buffer;return new a.constructor(f,a.byteOffset,a.length)}function c_(a,c){if(a!==c){var f=a!==t,h=a===null,y=a===a,T=Dr(a),E=c!==t,R=c===null,A=c===c,V=Dr(c);if(!R&&!V&&!T&&a>c||T&&E&&A&&!R&&!V||h&&E&&A||!f&&A||!y)return 1;if(!h&&!T&&!V&&a<c||V&&f&&y&&!h&&!T||R&&f&&y||!E&&y||!A)return-1}return 0}function jO(a,c,f){for(var h=-1,y=a.criteria,T=c.criteria,E=y.length,R=f.length;++h<E;){var A=c_(y[h],T[h]);if(A){if(h>=R)return A;var V=f[h];return A*(V=="desc"?-1:1)}}return a.index-c.index}function l_(a,c,f,h){for(var y=-1,T=a.length,E=f.length,R=-1,A=c.length,V=yt(T-E,0),W=L(A+V),j=!h;++R<A;)W[R]=c[R];for(;++y<E;)(j||y<T)&&(W[f[y]]=a[y]);for(;V--;)W[R++]=a[y++];return W}function u_(a,c,f,h){for(var y=-1,T=a.length,E=-1,R=f.length,A=-1,V=c.length,W=yt(T-R,0),j=L(W+V),Y=!h;++y<W;)j[y]=a[y];for(var ie=y;++A<V;)j[ie+A]=c[A];for(;++E<R;)(Y||y<T)&&(j[ie+f[E]]=a[y++]);return j}function cr(a,c){var f=-1,h=a.length;for(c||(c=L(h));++f<h;)c[f]=a[f];return c}function Bn(a,c,f,h){var y=!f;f||(f={});for(var T=-1,E=c.length;++T<E;){var R=c[T],A=h?h(f[R],a[R],R,f,a):t;A===t&&(A=a[R]),y?ui(f,R,A):_c(f,R,A)}return f}function qO(a,c){return Bn(a,dx(a),c)}function zO(a,c){return Bn(a,w_(a),c)}function ip(a,c){return function(f,h){var y=Se(f)?YC:mO,T=c?c():{};return y(f,a,le(h,2),T)}}function Ma(a){return Pe(function(c,f){var h=-1,y=f.length,T=y>1?f[y-1]:t,E=y>2?f[2]:t;for(T=a.length>3&&typeof T=="function"?(y--,T):t,E&&Kt(f[0],f[1],E)&&(T=y<3?t:T,y=1),c=ze(c);++h<y;){var R=f[h];R&&a(c,R,h,T)}return c})}function p_(a,c){return function(f,h){if(f==null)return f;if(!lr(f))return a(f,h);for(var y=f.length,T=c?y:-1,E=ze(f);(c?T--:++T<y)&&h(E[T],T,E)!==!1;);return f}}function f_(a){return function(c,f,h){for(var y=-1,T=ze(c),E=h(c),R=E.length;R--;){var A=E[a?R:++y];if(f(T[A],A,T)===!1)break}return c}}function GO(a,c,f){var h=c&v,y=Mc(a);function T(){var E=this&&this!==vt&&this instanceof T?y:a;return E.apply(h?f:this,arguments)}return T}function d_(a){return function(c){c=Ve(c);var f=wa(c)?vn(c):t,h=f?f[0]:c.charAt(0),y=f?$i(f,1).join(""):c.slice(1);return h[a]()+y}}function Aa(a){return function(c){return Dy(pE(uE(c).replace(LC,"")),a,"")}}function Mc(a){return function(){var c=arguments;switch(c.length){case 0:return new a;case 1:return new a(c[0]);case 2:return new a(c[0],c[1]);case 3:return new a(c[0],c[1],c[2]);case 4:return new a(c[0],c[1],c[2],c[3]);case 5:return new a(c[0],c[1],c[2],c[3],c[4]);case 6:return new a(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new a(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var f=Pa(a.prototype),h=a.apply(f,c);return et(h)?h:f}}function KO(a,c,f){var h=Mc(a);function y(){for(var T=arguments.length,E=L(T),R=T,A=Da(y);R--;)E[R]=arguments[R];var V=T<3&&E[0]!==A&&E[T-1]!==A?[]:Li(E,A);if(T-=V.length,T<f)return x_(a,c,op,y.placeholder,t,E,V,t,t,f-T);var W=this&&this!==vt&&this instanceof y?h:a;return Pr(W,this,E)}return y}function m_(a){return function(c,f,h){var y=ze(c);if(!lr(c)){var T=le(f,3);c=bt(c),f=function(R){return T(y[R],R,y)}}var E=a(c,f,h);return E>-1?y[T?c[E]:E]:t}}function h_(a){return fi(function(c){var f=c.length,h=f,y=Qr.prototype.thru;for(a&&c.reverse();h--;){var T=c[h];if(typeof T!="function")throw new Zr(i);if(y&&!E&&lp(T)=="wrapper")var E=new Qr([],!0)}for(h=E?h:f;++h<f;){T=c[h];var R=lp(T),A=R=="wrapper"?px(T):t;A&&hx(A[0])&&A[1]==(he|M|Q|de)&&!A[4].length&&A[9]==1?E=E[lp(A[0])].apply(E,A[3]):E=T.length==1&&hx(T)?E[R]():E.thru(T)}return function(){var V=arguments,W=V[0];if(E&&V.length==1&&Se(W))return E.plant(W).value();for(var j=0,Y=f?c[j].apply(this,V):W;++j<f;)Y=c[j].call(this,Y);return Y}})}function op(a,c,f,h,y,T,E,R,A,V){var W=c&he,j=c&v,Y=c&b,ie=c&(M|U),ue=c&dt,Re=Y?t:Mc(a);function pe(){for(var Ae=arguments.length,Fe=L(Ae),Ir=Ae;Ir--;)Fe[Ir]=arguments[Ir];if(ie)var Zt=Da(pe),Fr=aN(Fe,Zt);if(h&&(Fe=l_(Fe,h,y,ie)),T&&(Fe=u_(Fe,T,E,ie)),Ae-=Fr,ie&&Ae<V){var ct=Li(Fe,Zt);return x_(a,c,op,pe.placeholder,f,Fe,ct,R,A,V-Ae)}var _n=j?f:this,gi=Y?_n[a]:a;return Ae=Fe.length,R?Fe=mL(Fe,R):ue&&Ae>1&&Fe.reverse(),W&&A<Ae&&(Fe.length=A),this&&this!==vt&&this instanceof pe&&(gi=Re||Mc(gi)),gi.apply(_n,Fe)}return pe}function g_(a,c){return function(f,h){return bO(f,a,c(h),{})}}function ap(a,c){return function(f,h){var y;if(f===t&&h===t)return c;if(f!==t&&(y=f),h!==t){if(y===t)return h;typeof f=="string"||typeof h=="string"?(f=Ar(f),h=Ar(h)):(f=t_(f),h=t_(h)),y=a(f,h)}return y}}function sx(a){return fi(function(c){return c=Je(c,Mr(le())),Pe(function(f){var h=this;return a(c,function(y){return Pr(y,h,f)})})})}function sp(a,c){c=c===t?" ":Ar(c);var f=c.length;if(f<2)return f?ex(c,a):c;var h=ex(c,Gu(a/_a(c)));return wa(c)?$i(vn(h),0,a).join(""):h.slice(0,a)}function ZO(a,c,f,h){var y=c&v,T=Mc(a);function E(){for(var R=-1,A=arguments.length,V=-1,W=h.length,j=L(W+A),Y=this&&this!==vt&&this instanceof E?T:a;++V<W;)j[V]=h[V];for(;A--;)j[V++]=arguments[++R];return Pr(Y,y?f:this,j)}return E}function y_(a){return function(c,f,h){return h&&typeof h!="number"&&Kt(c,f,h)&&(f=h=t),c=hi(c),f===t?(f=c,c=0):f=hi(f),h=h===t?c<f?1:-1:hi(h),CO(c,f,h,a)}}function cp(a){return function(c,f){return typeof c=="string"&&typeof f=="string"||(c=en(c),f=en(f)),a(c,f)}}function x_(a,c,f,h,y,T,E,R,A,V){var W=c&M,j=W?E:t,Y=W?t:E,ie=W?T:t,ue=W?t:T;c|=W?Q:ne,c&=~(W?ne:Q),c&I||(c&=~(v|b));var Re=[a,c,y,ie,j,ue,Y,R,A,V],pe=f.apply(t,Re);return hx(a)&&A_(pe,Re),pe.placeholder=h,D_(pe,a,c)}function cx(a){var c=gt[a];return function(f,h){if(f=en(f),h=h==null?0:Lt(we(h),292),h&&Dw(f)){var y=(Ve(f)+"e").split("e"),T=c(y[0]+"e"+(+y[1]+h));return y=(Ve(T)+"e").split("e"),+(y[0]+"e"+(+y[1]-h))}return c(f)}}var QO=Ra&&1/Lu(new Ra([,-0]))[1]==K?function(a){return new Ra(a)}:Ax;function S_(a){return function(c){var f=Ut(c);return f==Sn?Uy(c):f==Tn?dN(c):oN(c,a(c))}}function pi(a,c,f,h,y,T,E,R){var A=c&b;if(!A&&typeof a!="function")throw new Zr(i);var V=h?h.length:0;if(V||(c&=~(Q|ne),h=y=t),E=E===t?E:yt(we(E),0),R=R===t?R:we(R),V-=y?y.length:0,c&ne){var W=h,j=y;h=y=t}var Y=A?t:px(a),ie=[a,c,f,h,y,W,j,T,E,R];if(Y&&pL(ie,Y),a=ie[0],c=ie[1],f=ie[2],h=ie[3],y=ie[4],R=ie[9]=ie[9]===t?A?0:a.length:yt(ie[9]-V,0),!R&&c&(M|U)&&(c&=~(M|U)),!c||c==v)var ue=GO(a,c,f);else c==M||c==U?ue=KO(a,c,R):(c==Q||c==(v|Q))&&!y.length?ue=ZO(a,c,f,h):ue=op.apply(t,ie);var Re=Y?Jw:A_;return D_(Re(ue,ie),a,c)}function T_(a,c,f,h){return a===t||wn(a,Ea[f])&&!$e.call(h,f)?c:a}function v_(a,c,f,h,y,T){return et(a)&&et(c)&&(T.set(c,a),tp(a,c,t,v_,T),T.delete(c)),a}function YO(a){return Ic(a)?t:a}function b_(a,c,f,h,y,T){var E=f&g,R=a.length,A=c.length;if(R!=A&&!(E&&A>R))return!1;var V=T.get(a),W=T.get(c);if(V&&W)return V==c&&W==a;var j=-1,Y=!0,ie=f&x?new Eo:t;for(T.set(a,c),T.set(c,a);++j<R;){var ue=a[j],Re=c[j];if(h)var pe=E?h(Re,ue,j,c,a,T):h(ue,Re,j,a,c,T);if(pe!==t){if(pe)continue;Y=!1;break}if(ie){if(!Iy(c,function(Ae,Fe){if(!xc(ie,Fe)&&(ue===Ae||y(ue,Ae,f,h,T)))return ie.push(Fe)})){Y=!1;break}}else if(!(ue===Re||y(ue,Re,f,h,T))){Y=!1;break}}return T.delete(a),T.delete(c),Y}function XO(a,c,f,h,y,T,E){switch(f){case Ta:if(a.byteLength!=c.byteLength||a.byteOffset!=c.byteOffset)return!1;a=a.buffer,c=c.buffer;case yc:return!(a.byteLength!=c.byteLength||!T(new $u(a),new $u(c)));case xn:case zr:case dc:return wn(+a,+c);case ai:return a.name==c.name&&a.message==c.message;case mc:case hc:return a==c+"";case Sn:var R=Uy;case Tn:var A=h&g;if(R||(R=Lu),a.size!=c.size&&!A)return!1;var V=E.get(a);if(V)return V==c;h|=x,E.set(a,c);var W=b_(R(a),R(c),h,y,T,E);return E.delete(a),W;case Du:if(wc)return wc.call(a)==wc.call(c)}return!1}function JO(a,c,f,h,y,T){var E=f&g,R=lx(a),A=R.length,V=lx(c),W=V.length;if(A!=W&&!E)return!1;for(var j=A;j--;){var Y=R[j];if(!(E?Y in c:$e.call(c,Y)))return!1}var ie=T.get(a),ue=T.get(c);if(ie&&ue)return ie==c&&ue==a;var Re=!0;T.set(a,c),T.set(c,a);for(var pe=E;++j<A;){Y=R[j];var Ae=a[Y],Fe=c[Y];if(h)var Ir=E?h(Fe,Ae,Y,c,a,T):h(Ae,Fe,Y,a,c,T);if(!(Ir===t?Ae===Fe||y(Ae,Fe,f,h,T):Ir)){Re=!1;break}pe||(pe=Y=="constructor")}if(Re&&!pe){var Zt=a.constructor,Fr=c.constructor;Zt!=Fr&&"constructor"in a&&"constructor"in c&&!(typeof Zt=="function"&&Zt instanceof Zt&&typeof Fr=="function"&&Fr instanceof Fr)&&(Re=!1)}return T.delete(a),T.delete(c),Re}function fi(a){return yx(P_(a,t,L_),a+"")}function lx(a){return Hw(a,bt,dx)}function ux(a){return Hw(a,ur,w_)}var px=Zu?function(a){return Zu.get(a)}:Ax;function lp(a){for(var c=a.name+"",f=ka[c],h=$e.call(ka,c)?f.length:0;h--;){var y=f[h],T=y.func;if(T==null||T==a)return y.name}return c}function Da(a){var c=$e.call(S,"placeholder")?S:a;return c.placeholder}function le(){var a=S.iteratee||Px;return a=a===Px?qw:a,arguments.length?a(arguments[0],arguments[1]):a}function up(a,c){var f=a.__data__;return sL(c)?f[typeof c=="string"?"string":"hash"]:f.map}function fx(a){for(var c=bt(a),f=c.length;f--;){var h=c[f],y=a[h];c[f]=[h,y,R_(y)]}return c}function Po(a,c){var f=uN(a,c);return jw(f)?f:t}function eL(a){var c=$e.call(a,wo),f=a[wo];try{a[wo]=t;var h=!0}catch{}var y=Wu.call(a);return h&&(c?a[wo]=f:delete a[wo]),y}var dx=Vy?function(a){return a==null?[]:(a=ze(a),Ni(Vy(a),function(c){return Mw.call(a,c)}))}:Dx,w_=Vy?function(a){for(var c=[];a;)Oi(c,dx(a)),a=ju(a);return c}:Dx,Ut=Gt;(Wy&&Ut(new Wy(new ArrayBuffer(1)))!=Ta||Tc&&Ut(new Tc)!=Sn||Hy&&Ut(Hy.resolve())!=Bb||Ra&&Ut(new Ra)!=Tn||vc&&Ut(new vc)!=gc)&&(Ut=function(a){var c=Gt(a),f=c==si?a.constructor:t,h=f?Mo(f):"";if(h)switch(h){case ON:return Ta;case LN:return Sn;case UN:return Bb;case BN:return Tn;case VN:return gc}return c});function tL(a,c,f){for(var h=-1,y=f.length;++h<y;){var T=f[h],E=T.size;switch(T.type){case"drop":a+=E;break;case"dropRight":c-=E;break;case"take":c=Lt(c,a+E);break;case"takeRight":a=yt(a,c-E);break}}return{start:a,end:c}}function rL(a){var c=a.match(cC);return c?c[1].split(lC):[]}function __(a,c,f){c=Hi(c,a);for(var h=-1,y=c.length,T=!1;++h<y;){var E=Vn(c[h]);if(!(T=a!=null&&f(a,E)))break;a=a[E]}return T||++h!=y?T:(y=a==null?0:a.length,!!y&&yp(y)&&di(E,y)&&(Se(a)||Ao(a)))}function nL(a){var c=a.length,f=new a.constructor(c);return c&&typeof a[0]=="string"&&$e.call(a,"index")&&(f.index=a.index,f.input=a.input),f}function E_(a){return typeof a.constructor=="function"&&!Ac(a)?Pa(ju(a)):{}}function iL(a,c,f){var h=a.constructor;switch(c){case yc:return ax(a);case xn:case zr:return new h(+a);case Ta:return WO(a,f);case fy:case dy:case my:case hy:case gy:case yy:case xy:case Sy:case Ty:return s_(a,f);case Sn:return new h;case dc:case hc:return new h(a);case mc:return HO(a);case Tn:return new h;case Du:return $O(a)}}function oL(a,c){var f=c.length;if(!f)return a;var h=f-1;return c[h]=(f>1?"& ":"")+c[h],c=c.join(f>2?", ":" "),a.replace(sC,`{
/* [wrapped with `+c+`] */
`)}function aL(a){return Se(a)||Ao(a)||!!(Aw&&a&&a[Aw])}function di(a,c){var f=typeof a;return c=c??Z,!!c&&(f=="number"||f!="symbol"&&xC.test(a))&&a>-1&&a%1==0&&a<c}function Kt(a,c,f){if(!et(f))return!1;var h=typeof c;return(h=="number"?lr(f)&&di(c,f.length):h=="string"&&c in f)?wn(f[c],a):!1}function mx(a,c){if(Se(a))return!1;var f=typeof a;return f=="number"||f=="symbol"||f=="boolean"||a==null||Dr(a)?!0:nC.test(a)||!rC.test(a)||c!=null&&a in ze(c)}function sL(a){var c=typeof a;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?a!=="__proto__":a===null}function hx(a){var c=lp(a),f=S[c];if(typeof f!="function"||!(c in De.prototype))return!1;if(a===f)return!0;var h=px(f);return!!h&&a===h[0]}function cL(a){return!!Rw&&Rw in a}var lL=Bu?mi:Ix;function Ac(a){var c=a&&a.constructor,f=typeof c=="function"&&c.prototype||Ea;return a===f}function R_(a){return a===a&&!et(a)}function k_(a,c){return function(f){return f==null?!1:f[a]===c&&(c!==t||a in ze(f))}}function uL(a){var c=hp(a,function(h){return f.size===l&&f.clear(),h}),f=c.cache;return c}function pL(a,c){var f=a[1],h=c[1],y=f|h,T=y<(v|b|he),E=h==he&&f==M||h==he&&f==de&&a[7].length<=c[8]||h==(he|de)&&c[7].length<=c[8]&&f==M;if(!(T||E))return a;h&v&&(a[2]=c[2],y|=f&v?0:I);var R=c[3];if(R){var A=a[3];a[3]=A?l_(A,R,c[4]):R,a[4]=A?Li(a[3],u):c[4]}return R=c[5],R&&(A=a[5],a[5]=A?u_(A,R,c[6]):R,a[6]=A?Li(a[5],u):c[6]),R=c[7],R&&(a[7]=R),h&he&&(a[8]=a[8]==null?c[8]:Lt(a[8],c[8])),a[9]==null&&(a[9]=c[9]),a[0]=c[0],a[1]=y,a}function fL(a){var c=[];if(a!=null)for(var f in ze(a))c.push(f);return c}function dL(a){return Wu.call(a)}function P_(a,c,f){return c=yt(c===t?a.length-1:c,0),function(){for(var h=arguments,y=-1,T=yt(h.length-c,0),E=L(T);++y<T;)E[y]=h[c+y];y=-1;for(var R=L(c+1);++y<c;)R[y]=h[y];return R[c]=f(E),Pr(a,this,R)}}function M_(a,c){return c.length<2?a:ko(a,Xr(c,0,-1))}function mL(a,c){for(var f=a.length,h=Lt(c.length,f),y=cr(a);h--;){var T=c[h];a[h]=di(T,f)?y[T]:t}return a}function gx(a,c){if(!(c==="constructor"&&typeof a[c]=="function")&&c!="__proto__")return a[c]}var A_=I_(Jw),Dc=MN||function(a,c){return vt.setTimeout(a,c)},yx=I_(LO);function D_(a,c,f){var h=c+"";return yx(a,oL(h,hL(rL(h),f)))}function I_(a){var c=0,f=0;return function(){var h=FN(),y=N-(h-f);if(f=h,y>0){if(++c>=O)return arguments[0]}else c=0;return a.apply(t,arguments)}}function pp(a,c){var f=-1,h=a.length,y=h-1;for(c=c===t?h:c;++f<c;){var T=Jy(f,y),E=a[T];a[T]=a[f],a[f]=E}return a.length=c,a}var F_=uL(function(a){var c=[];return a.charCodeAt(0)===46&&c.push(""),a.replace(iC,function(f,h,y,T){c.push(y?T.replace(fC,"$1"):h||f)}),c});function Vn(a){if(typeof a=="string"||Dr(a))return a;var c=a+"";return c=="0"&&1/a==-K?"-0":c}function Mo(a){if(a!=null){try{return Vu.call(a)}catch{}try{return a+""}catch{}}return""}function hL(a,c){return Kr(oi,function(f){var h="_."+f[0];c&f[1]&&!Nu(a,h)&&a.push(h)}),a.sort()}function C_(a){if(a instanceof De)return a.clone();var c=new Qr(a.__wrapped__,a.__chain__);return c.__actions__=cr(a.__actions__),c.__index__=a.__index__,c.__values__=a.__values__,c}function gL(a,c,f){(f?Kt(a,c,f):c===t)?c=1:c=yt(we(c),0);var h=a==null?0:a.length;if(!h||c<1)return[];for(var y=0,T=0,E=L(Gu(h/c));y<h;)E[T++]=Xr(a,y,y+=c);return E}function yL(a){for(var c=-1,f=a==null?0:a.length,h=0,y=[];++c<f;){var T=a[c];T&&(y[h++]=T)}return y}function xL(){var a=arguments.length;if(!a)return[];for(var c=L(a-1),f=arguments[0],h=a;h--;)c[h-1]=arguments[h];return Oi(Se(f)?cr(f):[f],It(c,1))}var SL=Pe(function(a,c){return st(a)?Ec(a,It(c,1,st,!0)):[]}),TL=Pe(function(a,c){var f=Jr(c);return st(f)&&(f=t),st(a)?Ec(a,It(c,1,st,!0),le(f,2)):[]}),vL=Pe(function(a,c){var f=Jr(c);return st(f)&&(f=t),st(a)?Ec(a,It(c,1,st,!0),t,f):[]});function bL(a,c,f){var h=a==null?0:a.length;return h?(c=f||c===t?1:we(c),Xr(a,c<0?0:c,h)):[]}function wL(a,c,f){var h=a==null?0:a.length;return h?(c=f||c===t?1:we(c),c=h-c,Xr(a,0,c<0?0:c)):[]}function _L(a,c){return a&&a.length?np(a,le(c,3),!0,!0):[]}function EL(a,c){return a&&a.length?np(a,le(c,3),!0):[]}function RL(a,c,f,h){var y=a==null?0:a.length;return y?(f&&typeof f!="number"&&Kt(a,c,f)&&(f=0,h=y),xO(a,c,f,h)):[]}function N_(a,c,f){var h=a==null?0:a.length;if(!h)return-1;var y=f==null?0:we(f);return y<0&&(y=yt(h+y,0)),Ou(a,le(c,3),y)}function O_(a,c,f){var h=a==null?0:a.length;if(!h)return-1;var y=h-1;return f!==t&&(y=we(f),y=f<0?yt(h+y,0):Lt(y,h-1)),Ou(a,le(c,3),y,!0)}function L_(a){var c=a==null?0:a.length;return c?It(a,1):[]}function kL(a){var c=a==null?0:a.length;return c?It(a,K):[]}function PL(a,c){var f=a==null?0:a.length;return f?(c=c===t?1:we(c),It(a,c)):[]}function ML(a){for(var c=-1,f=a==null?0:a.length,h={};++c<f;){var y=a[c];h[y[0]]=y[1]}return h}function U_(a){return a&&a.length?a[0]:t}function AL(a,c,f){var h=a==null?0:a.length;if(!h)return-1;var y=f==null?0:we(f);return y<0&&(y=yt(h+y,0)),ba(a,c,y)}function DL(a){var c=a==null?0:a.length;return c?Xr(a,0,-1):[]}var IL=Pe(function(a){var c=Je(a,ix);return c.length&&c[0]===a[0]?Ky(c):[]}),FL=Pe(function(a){var c=Jr(a),f=Je(a,ix);return c===Jr(f)?c=t:f.pop(),f.length&&f[0]===a[0]?Ky(f,le(c,2)):[]}),CL=Pe(function(a){var c=Jr(a),f=Je(a,ix);return c=typeof c=="function"?c:t,c&&f.pop(),f.length&&f[0]===a[0]?Ky(f,t,c):[]});function NL(a,c){return a==null?"":DN.call(a,c)}function Jr(a){var c=a==null?0:a.length;return c?a[c-1]:t}function OL(a,c,f){var h=a==null?0:a.length;if(!h)return-1;var y=h;return f!==t&&(y=we(f),y=y<0?yt(h+y,0):Lt(y,h-1)),c===c?hN(a,c,y):Ou(a,xw,y,!0)}function LL(a,c){return a&&a.length?Zw(a,we(c)):t}var UL=Pe(B_);function B_(a,c){return a&&a.length&&c&&c.length?Xy(a,c):a}function BL(a,c,f){return a&&a.length&&c&&c.length?Xy(a,c,le(f,2)):a}function VL(a,c,f){return a&&a.length&&c&&c.length?Xy(a,c,t,f):a}var WL=fi(function(a,c){var f=a==null?0:a.length,h=jy(a,c);return Xw(a,Je(c,function(y){return di(y,f)?+y:y}).sort(c_)),h});function HL(a,c){var f=[];if(!(a&&a.length))return f;var h=-1,y=[],T=a.length;for(c=le(c,3);++h<T;){var E=a[h];c(E,h,a)&&(f.push(E),y.push(h))}return Xw(a,y),f}function xx(a){return a==null?a:NN.call(a)}function $L(a,c,f){var h=a==null?0:a.length;return h?(f&&typeof f!="number"&&Kt(a,c,f)?(c=0,f=h):(c=c==null?0:we(c),f=f===t?h:we(f)),Xr(a,c,f)):[]}function jL(a,c){return rp(a,c)}function qL(a,c,f){return tx(a,c,le(f,2))}function zL(a,c){var f=a==null?0:a.length;if(f){var h=rp(a,c);if(h<f&&wn(a[h],c))return h}return-1}function GL(a,c){return rp(a,c,!0)}function KL(a,c,f){return tx(a,c,le(f,2),!0)}function ZL(a,c){var f=a==null?0:a.length;if(f){var h=rp(a,c,!0)-1;if(wn(a[h],c))return h}return-1}function QL(a){return a&&a.length?e_(a):[]}function YL(a,c){return a&&a.length?e_(a,le(c,2)):[]}function XL(a){var c=a==null?0:a.length;return c?Xr(a,1,c):[]}function JL(a,c,f){return a&&a.length?(c=f||c===t?1:we(c),Xr(a,0,c<0?0:c)):[]}function eU(a,c,f){var h=a==null?0:a.length;return h?(c=f||c===t?1:we(c),c=h-c,Xr(a,c<0?0:c,h)):[]}function tU(a,c){return a&&a.length?np(a,le(c,3),!1,!0):[]}function rU(a,c){return a&&a.length?np(a,le(c,3)):[]}var nU=Pe(function(a){return Wi(It(a,1,st,!0))}),iU=Pe(function(a){var c=Jr(a);return st(c)&&(c=t),Wi(It(a,1,st,!0),le(c,2))}),oU=Pe(function(a){var c=Jr(a);return c=typeof c=="function"?c:t,Wi(It(a,1,st,!0),t,c)});function aU(a){return a&&a.length?Wi(a):[]}function sU(a,c){return a&&a.length?Wi(a,le(c,2)):[]}function cU(a,c){return c=typeof c=="function"?c:t,a&&a.length?Wi(a,t,c):[]}function Sx(a){if(!(a&&a.length))return[];var c=0;return a=Ni(a,function(f){if(st(f))return c=yt(f.length,c),!0}),Oy(c,function(f){return Je(a,Fy(f))})}function V_(a,c){if(!(a&&a.length))return[];var f=Sx(a);return c==null?f:Je(f,function(h){return Pr(c,t,h)})}var lU=Pe(function(a,c){return st(a)?Ec(a,c):[]}),uU=Pe(function(a){return nx(Ni(a,st))}),pU=Pe(function(a){var c=Jr(a);return st(c)&&(c=t),nx(Ni(a,st),le(c,2))}),fU=Pe(function(a){var c=Jr(a);return c=typeof c=="function"?c:t,nx(Ni(a,st),t,c)}),dU=Pe(Sx);function mU(a,c){return i_(a||[],c||[],_c)}function hU(a,c){return i_(a||[],c||[],Pc)}var gU=Pe(function(a){var c=a.length,f=c>1?a[c-1]:t;return f=typeof f=="function"?(a.pop(),f):t,V_(a,f)});function W_(a){var c=S(a);return c.__chain__=!0,c}function yU(a,c){return c(a),a}function fp(a,c){return c(a)}var xU=fi(function(a){var c=a.length,f=c?a[0]:0,h=this.__wrapped__,y=function(T){return jy(T,a)};return c>1||this.__actions__.length||!(h instanceof De)||!di(f)?this.thru(y):(h=h.slice(f,+f+(c?1:0)),h.__actions__.push({func:fp,args:[y],thisArg:t}),new Qr(h,this.__chain__).thru(function(T){return c&&!T.length&&T.push(t),T}))});function SU(){return W_(this)}function TU(){return new Qr(this.value(),this.__chain__)}function vU(){this.__values__===t&&(this.__values__=tE(this.value()));var a=this.__index__>=this.__values__.length,c=a?t:this.__values__[this.__index__++];return{done:a,value:c}}function bU(){return this}function wU(a){for(var c,f=this;f instanceof Yu;){var h=C_(f);h.__index__=0,h.__values__=t,c?y.__wrapped__=h:c=h;var y=h;f=f.__wrapped__}return y.__wrapped__=a,c}function _U(){var a=this.__wrapped__;if(a instanceof De){var c=a;return this.__actions__.length&&(c=new De(this)),c=c.reverse(),c.__actions__.push({func:fp,args:[xx],thisArg:t}),new Qr(c,this.__chain__)}return this.thru(xx)}function EU(){return n_(this.__wrapped__,this.__actions__)}var RU=ip(function(a,c,f){$e.call(a,f)?++a[f]:ui(a,f,1)});function kU(a,c,f){var h=Se(a)?gw:yO;return f&&Kt(a,c,f)&&(c=t),h(a,le(c,3))}function PU(a,c){var f=Se(a)?Ni:Vw;return f(a,le(c,3))}var MU=m_(N_),AU=m_(O_);function DU(a,c){return It(dp(a,c),1)}function IU(a,c){return It(dp(a,c),K)}function FU(a,c,f){return f=f===t?1:we(f),It(dp(a,c),f)}function H_(a,c){var f=Se(a)?Kr:Vi;return f(a,le(c,3))}function $_(a,c){var f=Se(a)?XC:Bw;return f(a,le(c,3))}var CU=ip(function(a,c,f){$e.call(a,f)?a[f].push(c):ui(a,f,[c])});function NU(a,c,f,h){a=lr(a)?a:Fa(a),f=f&&!h?we(f):0;var y=a.length;return f<0&&(f=yt(y+f,0)),xp(a)?f<=y&&a.indexOf(c,f)>-1:!!y&&ba(a,c,f)>-1}var OU=Pe(function(a,c,f){var h=-1,y=typeof c=="function",T=lr(a)?L(a.length):[];return Vi(a,function(E){T[++h]=y?Pr(c,E,f):Rc(E,c,f)}),T}),LU=ip(function(a,c,f){ui(a,f,c)});function dp(a,c){var f=Se(a)?Je:zw;return f(a,le(c,3))}function UU(a,c,f,h){return a==null?[]:(Se(c)||(c=c==null?[]:[c]),f=h?t:f,Se(f)||(f=f==null?[]:[f]),Qw(a,c,f))}var BU=ip(function(a,c,f){a[f?0:1].push(c)},function(){return[[],[]]});function VU(a,c,f){var h=Se(a)?Dy:Tw,y=arguments.length<3;return h(a,le(c,4),f,y,Vi)}function WU(a,c,f){var h=Se(a)?JC:Tw,y=arguments.length<3;return h(a,le(c,4),f,y,Bw)}function HU(a,c){var f=Se(a)?Ni:Vw;return f(a,gp(le(c,3)))}function $U(a){var c=Se(a)?Nw:NO;return c(a)}function jU(a,c,f){(f?Kt(a,c,f):c===t)?c=1:c=we(c);var h=Se(a)?fO:OO;return h(a,c)}function qU(a){var c=Se(a)?dO:UO;return c(a)}function zU(a){if(a==null)return 0;if(lr(a))return xp(a)?_a(a):a.length;var c=Ut(a);return c==Sn||c==Tn?a.size:Qy(a).length}function GU(a,c,f){var h=Se(a)?Iy:BO;return f&&Kt(a,c,f)&&(c=t),h(a,le(c,3))}var KU=Pe(function(a,c){if(a==null)return[];var f=c.length;return f>1&&Kt(a,c[0],c[1])?c=[]:f>2&&Kt(c[0],c[1],c[2])&&(c=[c[0]]),Qw(a,It(c,1),[])}),mp=PN||function(){return vt.Date.now()};function ZU(a,c){if(typeof c!="function")throw new Zr(i);return a=we(a),function(){if(--a<1)return c.apply(this,arguments)}}function j_(a,c,f){return c=f?t:c,c=a&&c==null?a.length:c,pi(a,he,t,t,t,t,c)}function q_(a,c){var f;if(typeof c!="function")throw new Zr(i);return a=we(a),function(){return--a>0&&(f=c.apply(this,arguments)),a<=1&&(c=t),f}}var Tx=Pe(function(a,c,f){var h=v;if(f.length){var y=Li(f,Da(Tx));h|=Q}return pi(a,h,c,f,y)}),z_=Pe(function(a,c,f){var h=v|b;if(f.length){var y=Li(f,Da(z_));h|=Q}return pi(c,h,a,f,y)});function G_(a,c,f){c=f?t:c;var h=pi(a,M,t,t,t,t,t,c);return h.placeholder=G_.placeholder,h}function K_(a,c,f){c=f?t:c;var h=pi(a,U,t,t,t,t,t,c);return h.placeholder=K_.placeholder,h}function Z_(a,c,f){var h,y,T,E,R,A,V=0,W=!1,j=!1,Y=!0;if(typeof a!="function")throw new Zr(i);c=en(c)||0,et(f)&&(W=!!f.leading,j="maxWait"in f,T=j?yt(en(f.maxWait)||0,c):T,Y="trailing"in f?!!f.trailing:Y);function ie(ct){var _n=h,gi=y;return h=y=t,V=ct,E=a.apply(gi,_n),E}function ue(ct){return V=ct,R=Dc(Ae,c),W?ie(ct):E}function Re(ct){var _n=ct-A,gi=ct-V,mE=c-_n;return j?Lt(mE,T-gi):mE}function pe(ct){var _n=ct-A,gi=ct-V;return A===t||_n>=c||_n<0||j&&gi>=T}function Ae(){var ct=mp();if(pe(ct))return Fe(ct);R=Dc(Ae,Re(ct))}function Fe(ct){return R=t,Y&&h?ie(ct):(h=y=t,E)}function Ir(){R!==t&&o_(R),V=0,h=A=y=R=t}function Zt(){return R===t?E:Fe(mp())}function Fr(){var ct=mp(),_n=pe(ct);if(h=arguments,y=this,A=ct,_n){if(R===t)return ue(A);if(j)return o_(R),R=Dc(Ae,c),ie(A)}return R===t&&(R=Dc(Ae,c)),E}return Fr.cancel=Ir,Fr.flush=Zt,Fr}var QU=Pe(function(a,c){return Uw(a,1,c)}),YU=Pe(function(a,c,f){return Uw(a,en(c)||0,f)});function XU(a){return pi(a,dt)}function hp(a,c){if(typeof a!="function"||c!=null&&typeof c!="function")throw new Zr(i);var f=function(){var h=arguments,y=c?c.apply(this,h):h[0],T=f.cache;if(T.has(y))return T.get(y);var E=a.apply(this,h);return f.cache=T.set(y,E)||T,E};return f.cache=new(hp.Cache||li),f}hp.Cache=li;function gp(a){if(typeof a!="function")throw new Zr(i);return function(){var c=arguments;switch(c.length){case 0:return!a.call(this);case 1:return!a.call(this,c[0]);case 2:return!a.call(this,c[0],c[1]);case 3:return!a.call(this,c[0],c[1],c[2])}return!a.apply(this,c)}}function JU(a){return q_(2,a)}var e2=VO(function(a,c){c=c.length==1&&Se(c[0])?Je(c[0],Mr(le())):Je(It(c,1),Mr(le()));var f=c.length;return Pe(function(h){for(var y=-1,T=Lt(h.length,f);++y<T;)h[y]=c[y].call(this,h[y]);return Pr(a,this,h)})}),vx=Pe(function(a,c){var f=Li(c,Da(vx));return pi(a,Q,t,c,f)}),Q_=Pe(function(a,c){var f=Li(c,Da(Q_));return pi(a,ne,t,c,f)}),t2=fi(function(a,c){return pi(a,de,t,t,t,c)});function r2(a,c){if(typeof a!="function")throw new Zr(i);return c=c===t?c:we(c),Pe(a,c)}function n2(a,c){if(typeof a!="function")throw new Zr(i);return c=c==null?0:yt(we(c),0),Pe(function(f){var h=f[c],y=$i(f,0,c);return h&&Oi(y,h),Pr(a,this,y)})}function i2(a,c,f){var h=!0,y=!0;if(typeof a!="function")throw new Zr(i);return et(f)&&(h="leading"in f?!!f.leading:h,y="trailing"in f?!!f.trailing:y),Z_(a,c,{leading:h,maxWait:c,trailing:y})}function o2(a){return j_(a,1)}function a2(a,c){return vx(ox(c),a)}function s2(){if(!arguments.length)return[];var a=arguments[0];return Se(a)?a:[a]}function c2(a){return Yr(a,m)}function l2(a,c){return c=typeof c=="function"?c:t,Yr(a,m,c)}function u2(a){return Yr(a,p|m)}function p2(a,c){return c=typeof c=="function"?c:t,Yr(a,p|m,c)}function f2(a,c){return c==null||Lw(a,c,bt(c))}function wn(a,c){return a===c||a!==a&&c!==c}var d2=cp(Gy),m2=cp(function(a,c){return a>=c}),Ao=$w(function(){return arguments}())?$w:function(a){return it(a)&&$e.call(a,"callee")&&!Mw.call(a,"callee")},Se=L.isArray,h2=uw?Mr(uw):wO;function lr(a){return a!=null&&yp(a.length)&&!mi(a)}function st(a){return it(a)&&lr(a)}function g2(a){return a===!0||a===!1||it(a)&&Gt(a)==xn}var ji=AN||Ix,y2=pw?Mr(pw):_O;function x2(a){return it(a)&&a.nodeType===1&&!Ic(a)}function S2(a){if(a==null)return!0;if(lr(a)&&(Se(a)||typeof a=="string"||typeof a.splice=="function"||ji(a)||Ia(a)||Ao(a)))return!a.length;var c=Ut(a);if(c==Sn||c==Tn)return!a.size;if(Ac(a))return!Qy(a).length;for(var f in a)if($e.call(a,f))return!1;return!0}function T2(a,c){return kc(a,c)}function v2(a,c,f){f=typeof f=="function"?f:t;var h=f?f(a,c):t;return h===t?kc(a,c,t,f):!!h}function bx(a){if(!it(a))return!1;var c=Gt(a);return c==ai||c==vo||typeof a.message=="string"&&typeof a.name=="string"&&!Ic(a)}function b2(a){return typeof a=="number"&&Dw(a)}function mi(a){if(!et(a))return!1;var c=Gt(a);return c==Sa||c==Ub||c==kr||c==zF}function Y_(a){return typeof a=="number"&&a==we(a)}function yp(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=Z}function et(a){var c=typeof a;return a!=null&&(c=="object"||c=="function")}function it(a){return a!=null&&typeof a=="object"}var X_=fw?Mr(fw):RO;function w2(a,c){return a===c||Zy(a,c,fx(c))}function _2(a,c,f){return f=typeof f=="function"?f:t,Zy(a,c,fx(c),f)}function E2(a){return J_(a)&&a!=+a}function R2(a){if(lL(a))throw new ye(n);return jw(a)}function k2(a){return a===null}function P2(a){return a==null}function J_(a){return typeof a=="number"||it(a)&&Gt(a)==dc}function Ic(a){if(!it(a)||Gt(a)!=si)return!1;var c=ju(a);if(c===null)return!0;var f=$e.call(c,"constructor")&&c.constructor;return typeof f=="function"&&f instanceof f&&Vu.call(f)==_N}var wx=dw?Mr(dw):kO;function M2(a){return Y_(a)&&a>=-Z&&a<=Z}var eE=mw?Mr(mw):PO;function xp(a){return typeof a=="string"||!Se(a)&&it(a)&&Gt(a)==hc}function Dr(a){return typeof a=="symbol"||it(a)&&Gt(a)==Du}var Ia=hw?Mr(hw):MO;function A2(a){return a===t}function D2(a){return it(a)&&Ut(a)==gc}function I2(a){return it(a)&&Gt(a)==KF}var F2=cp(Yy),C2=cp(function(a,c){return a<=c});function tE(a){if(!a)return[];if(lr(a))return xp(a)?vn(a):cr(a);if(Sc&&a[Sc])return fN(a[Sc]());var c=Ut(a),f=c==Sn?Uy:c==Tn?Lu:Fa;return f(a)}function hi(a){if(!a)return a===0?a:0;if(a=en(a),a===K||a===-K){var c=a<0?-1:1;return c*te}return a===a?a:0}function we(a){var c=hi(a),f=c%1;return c===c?f?c-f:c:0}function rE(a){return a?Ro(we(a),0,re):0}function en(a){if(typeof a=="number")return a;if(Dr(a))return me;if(et(a)){var c=typeof a.valueOf=="function"?a.valueOf():a;a=et(c)?c+"":c}if(typeof a!="string")return a===0?a:+a;a=vw(a);var f=hC.test(a);return f||yC.test(a)?ZC(a.slice(2),f?2:8):mC.test(a)?me:+a}function nE(a){return Bn(a,ur(a))}function N2(a){return a?Ro(we(a),-Z,Z):a===0?a:0}function Ve(a){return a==null?"":Ar(a)}var O2=Ma(function(a,c){if(Ac(c)||lr(c)){Bn(c,bt(c),a);return}for(var f in c)$e.call(c,f)&&_c(a,f,c[f])}),iE=Ma(function(a,c){Bn(c,ur(c),a)}),Sp=Ma(function(a,c,f,h){Bn(c,ur(c),a,h)}),L2=Ma(function(a,c,f,h){Bn(c,bt(c),a,h)}),U2=fi(jy);function B2(a,c){var f=Pa(a);return c==null?f:Ow(f,c)}var V2=Pe(function(a,c){a=ze(a);var f=-1,h=c.length,y=h>2?c[2]:t;for(y&&Kt(c[0],c[1],y)&&(h=1);++f<h;)for(var T=c[f],E=ur(T),R=-1,A=E.length;++R<A;){var V=E[R],W=a[V];(W===t||wn(W,Ea[V])&&!$e.call(a,V))&&(a[V]=T[V])}return a}),W2=Pe(function(a){return a.push(t,v_),Pr(oE,t,a)});function H2(a,c){return yw(a,le(c,3),Un)}function $2(a,c){return yw(a,le(c,3),zy)}function j2(a,c){return a==null?a:qy(a,le(c,3),ur)}function q2(a,c){return a==null?a:Ww(a,le(c,3),ur)}function z2(a,c){return a&&Un(a,le(c,3))}function G2(a,c){return a&&zy(a,le(c,3))}function K2(a){return a==null?[]:ep(a,bt(a))}function Z2(a){return a==null?[]:ep(a,ur(a))}function _x(a,c,f){var h=a==null?t:ko(a,c);return h===t?f:h}function Q2(a,c){return a!=null&&__(a,c,SO)}function Ex(a,c){return a!=null&&__(a,c,TO)}var Y2=g_(function(a,c,f){c!=null&&typeof c.toString!="function"&&(c=Wu.call(c)),a[c]=f},kx(pr)),X2=g_(function(a,c,f){c!=null&&typeof c.toString!="function"&&(c=Wu.call(c)),$e.call(a,c)?a[c].push(f):a[c]=[f]},le),J2=Pe(Rc);function bt(a){return lr(a)?Cw(a):Qy(a)}function ur(a){return lr(a)?Cw(a,!0):AO(a)}function eB(a,c){var f={};return c=le(c,3),Un(a,function(h,y,T){ui(f,c(h,y,T),h)}),f}function tB(a,c){var f={};return c=le(c,3),Un(a,function(h,y,T){ui(f,y,c(h,y,T))}),f}var rB=Ma(function(a,c,f){tp(a,c,f)}),oE=Ma(function(a,c,f,h){tp(a,c,f,h)}),nB=fi(function(a,c){var f={};if(a==null)return f;var h=!1;c=Je(c,function(T){return T=Hi(T,a),h||(h=T.length>1),T}),Bn(a,ux(a),f),h&&(f=Yr(f,p|d|m,YO));for(var y=c.length;y--;)rx(f,c[y]);return f});function iB(a,c){return aE(a,gp(le(c)))}var oB=fi(function(a,c){return a==null?{}:IO(a,c)});function aE(a,c){if(a==null)return{};var f=Je(ux(a),function(h){return[h]});return c=le(c),Yw(a,f,function(h,y){return c(h,y[0])})}function aB(a,c,f){c=Hi(c,a);var h=-1,y=c.length;for(y||(y=1,a=t);++h<y;){var T=a==null?t:a[Vn(c[h])];T===t&&(h=y,T=f),a=mi(T)?T.call(a):T}return a}function sB(a,c,f){return a==null?a:Pc(a,c,f)}function cB(a,c,f,h){return h=typeof h=="function"?h:t,a==null?a:Pc(a,c,f,h)}var sE=S_(bt),cE=S_(ur);function lB(a,c,f){var h=Se(a),y=h||ji(a)||Ia(a);if(c=le(c,4),f==null){var T=a&&a.constructor;y?f=h?new T:[]:et(a)?f=mi(T)?Pa(ju(a)):{}:f={}}return(y?Kr:Un)(a,function(E,R,A){return c(f,E,R,A)}),f}function uB(a,c){return a==null?!0:rx(a,c)}function pB(a,c,f){return a==null?a:r_(a,c,ox(f))}function fB(a,c,f,h){return h=typeof h=="function"?h:t,a==null?a:r_(a,c,ox(f),h)}function Fa(a){return a==null?[]:Ly(a,bt(a))}function dB(a){return a==null?[]:Ly(a,ur(a))}function mB(a,c,f){return f===t&&(f=c,c=t),f!==t&&(f=en(f),f=f===f?f:0),c!==t&&(c=en(c),c=c===c?c:0),Ro(en(a),c,f)}function hB(a,c,f){return c=hi(c),f===t?(f=c,c=0):f=hi(f),a=en(a),vO(a,c,f)}function gB(a,c,f){if(f&&typeof f!="boolean"&&Kt(a,c,f)&&(c=f=t),f===t&&(typeof c=="boolean"?(f=c,c=t):typeof a=="boolean"&&(f=a,a=t)),a===t&&c===t?(a=0,c=1):(a=hi(a),c===t?(c=a,a=0):c=hi(c)),a>c){var h=a;a=c,c=h}if(f||a%1||c%1){var y=Iw();return Lt(a+y*(c-a+KC("1e-"+((y+"").length-1))),c)}return Jy(a,c)}var yB=Aa(function(a,c,f){return c=c.toLowerCase(),a+(f?lE(c):c)});function lE(a){return Rx(Ve(a).toLowerCase())}function uE(a){return a=Ve(a),a&&a.replace(SC,sN).replace(UC,"")}function xB(a,c,f){a=Ve(a),c=Ar(c);var h=a.length;f=f===t?h:Ro(we(f),0,h);var y=f;return f-=c.length,f>=0&&a.slice(f,y)==c}function SB(a){return a=Ve(a),a&&JF.test(a)?a.replace(Wb,cN):a}function TB(a){return a=Ve(a),a&&oC.test(a)?a.replace(vy,"\\$&"):a}var vB=Aa(function(a,c,f){return a+(f?"-":"")+c.toLowerCase()}),bB=Aa(function(a,c,f){return a+(f?" ":"")+c.toLowerCase()}),wB=d_("toLowerCase");function _B(a,c,f){a=Ve(a),c=we(c);var h=c?_a(a):0;if(!c||h>=c)return a;var y=(c-h)/2;return sp(Ku(y),f)+a+sp(Gu(y),f)}function EB(a,c,f){a=Ve(a),c=we(c);var h=c?_a(a):0;return c&&h<c?a+sp(c-h,f):a}function RB(a,c,f){a=Ve(a),c=we(c);var h=c?_a(a):0;return c&&h<c?sp(c-h,f)+a:a}function kB(a,c,f){return f||c==null?c=0:c&&(c=+c),CN(Ve(a).replace(by,""),c||0)}function PB(a,c,f){return(f?Kt(a,c,f):c===t)?c=1:c=we(c),ex(Ve(a),c)}function MB(){var a=arguments,c=Ve(a[0]);return a.length<3?c:c.replace(a[1],a[2])}var AB=Aa(function(a,c,f){return a+(f?"_":"")+c.toLowerCase()});function DB(a,c,f){return f&&typeof f!="number"&&Kt(a,c,f)&&(c=f=t),f=f===t?re:f>>>0,f?(a=Ve(a),a&&(typeof c=="string"||c!=null&&!wx(c))&&(c=Ar(c),!c&&wa(a))?$i(vn(a),0,f):a.split(c,f)):[]}var IB=Aa(function(a,c,f){return a+(f?" ":"")+Rx(c)});function FB(a,c,f){return a=Ve(a),f=f==null?0:Ro(we(f),0,a.length),c=Ar(c),a.slice(f,f+c.length)==c}function CB(a,c,f){var h=S.templateSettings;f&&Kt(a,c,f)&&(c=t),a=Ve(a),c=Sp({},c,h,T_);var y=Sp({},c.imports,h.imports,T_),T=bt(y),E=Ly(y,T),R,A,V=0,W=c.interpolate||Iu,j="__p += '",Y=By((c.escape||Iu).source+"|"+W.source+"|"+(W===Hb?dC:Iu).source+"|"+(c.evaluate||Iu).source+"|$","g"),ie="//# sourceURL="+($e.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++$C+"]")+`
`;a.replace(Y,function(pe,Ae,Fe,Ir,Zt,Fr){return Fe||(Fe=Ir),j+=a.slice(V,Fr).replace(TC,lN),Ae&&(R=!0,j+=`' +
__e(`+Ae+`) +
'`),Zt&&(A=!0,j+=`';
`+Zt+`;
__p += '`),Fe&&(j+=`' +
((__t = (`+Fe+`)) == null ? '' : __t) +
'`),V=Fr+pe.length,pe}),j+=`';
`;var ue=$e.call(c,"variable")&&c.variable;if(!ue)j=`with (obj) {
`+j+`
}
`;else if(pC.test(ue))throw new ye(o);j=(A?j.replace(ZF,""):j).replace(QF,"$1").replace(YF,"$1;"),j="function("+(ue||"obj")+`) {
`+(ue?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(R?", __e = _.escape":"")+(A?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+j+`return __p
}`;var Re=fE(function(){return Oe(T,ie+"return "+j).apply(t,E)});if(Re.source=j,bx(Re))throw Re;return Re}function NB(a){return Ve(a).toLowerCase()}function OB(a){return Ve(a).toUpperCase()}function LB(a,c,f){if(a=Ve(a),a&&(f||c===t))return vw(a);if(!a||!(c=Ar(c)))return a;var h=vn(a),y=vn(c),T=bw(h,y),E=ww(h,y)+1;return $i(h,T,E).join("")}function UB(a,c,f){if(a=Ve(a),a&&(f||c===t))return a.slice(0,Ew(a)+1);if(!a||!(c=Ar(c)))return a;var h=vn(a),y=ww(h,vn(c))+1;return $i(h,0,y).join("")}function BB(a,c,f){if(a=Ve(a),a&&(f||c===t))return a.replace(by,"");if(!a||!(c=Ar(c)))return a;var h=vn(a),y=bw(h,vn(c));return $i(h,y).join("")}function VB(a,c){var f=Dt,h=nt;if(et(c)){var y="separator"in c?c.separator:y;f="length"in c?we(c.length):f,h="omission"in c?Ar(c.omission):h}a=Ve(a);var T=a.length;if(wa(a)){var E=vn(a);T=E.length}if(f>=T)return a;var R=f-_a(h);if(R<1)return h;var A=E?$i(E,0,R).join(""):a.slice(0,R);if(y===t)return A+h;if(E&&(R+=A.length-R),wx(y)){if(a.slice(R).search(y)){var V,W=A;for(y.global||(y=By(y.source,Ve($b.exec(y))+"g")),y.lastIndex=0;V=y.exec(W);)var j=V.index;A=A.slice(0,j===t?R:j)}}else if(a.indexOf(Ar(y),R)!=R){var Y=A.lastIndexOf(y);Y>-1&&(A=A.slice(0,Y))}return A+h}function WB(a){return a=Ve(a),a&&XF.test(a)?a.replace(Vb,gN):a}var HB=Aa(function(a,c,f){return a+(f?" ":"")+c.toUpperCase()}),Rx=d_("toUpperCase");function pE(a,c,f){return a=Ve(a),c=f?t:c,c===t?pN(a)?SN(a):rN(a):a.match(c)||[]}var fE=Pe(function(a,c){try{return Pr(a,t,c)}catch(f){return bx(f)?f:new ye(f)}}),$B=fi(function(a,c){return Kr(c,function(f){f=Vn(f),ui(a,f,Tx(a[f],a))}),a});function jB(a){var c=a==null?0:a.length,f=le();return a=c?Je(a,function(h){if(typeof h[1]!="function")throw new Zr(i);return[f(h[0]),h[1]]}):[],Pe(function(h){for(var y=-1;++y<c;){var T=a[y];if(Pr(T[0],this,h))return Pr(T[1],this,h)}})}function qB(a){return gO(Yr(a,p))}function kx(a){return function(){return a}}function zB(a,c){return a==null||a!==a?c:a}var GB=h_(),KB=h_(!0);function pr(a){return a}function Px(a){return qw(typeof a=="function"?a:Yr(a,p))}function ZB(a){return Gw(Yr(a,p))}function QB(a,c){return Kw(a,Yr(c,p))}var YB=Pe(function(a,c){return function(f){return Rc(f,a,c)}}),XB=Pe(function(a,c){return function(f){return Rc(a,f,c)}});function Mx(a,c,f){var h=bt(c),y=ep(c,h);f==null&&!(et(c)&&(y.length||!h.length))&&(f=c,c=a,a=this,y=ep(c,bt(c)));var T=!(et(f)&&"chain"in f)||!!f.chain,E=mi(a);return Kr(y,function(R){var A=c[R];a[R]=A,E&&(a.prototype[R]=function(){var V=this.__chain__;if(T||V){var W=a(this.__wrapped__),j=W.__actions__=cr(this.__actions__);return j.push({func:A,args:arguments,thisArg:a}),W.__chain__=V,W}return A.apply(a,Oi([this.value()],arguments))})}),a}function JB(){return vt._===this&&(vt._=EN),this}function Ax(){}function eV(a){return a=we(a),Pe(function(c){return Zw(c,a)})}var tV=sx(Je),rV=sx(gw),nV=sx(Iy);function dE(a){return mx(a)?Fy(Vn(a)):FO(a)}function iV(a){return function(c){return a==null?t:ko(a,c)}}var oV=y_(),aV=y_(!0);function Dx(){return[]}function Ix(){return!1}function sV(){return{}}function cV(){return""}function lV(){return!0}function uV(a,c){if(a=we(a),a<1||a>Z)return[];var f=re,h=Lt(a,re);c=le(c),a-=re;for(var y=Oy(h,c);++f<a;)c(f);return y}function pV(a){return Se(a)?Je(a,Vn):Dr(a)?[a]:cr(F_(Ve(a)))}function fV(a){var c=++wN;return Ve(a)+c}var dV=ap(function(a,c){return a+c},0),mV=cx("ceil"),hV=ap(function(a,c){return a/c},1),gV=cx("floor");function yV(a){return a&&a.length?Ju(a,pr,Gy):t}function xV(a,c){return a&&a.length?Ju(a,le(c,2),Gy):t}function SV(a){return Sw(a,pr)}function TV(a,c){return Sw(a,le(c,2))}function vV(a){return a&&a.length?Ju(a,pr,Yy):t}function bV(a,c){return a&&a.length?Ju(a,le(c,2),Yy):t}var wV=ap(function(a,c){return a*c},1),_V=cx("round"),EV=ap(function(a,c){return a-c},0);function RV(a){return a&&a.length?Ny(a,pr):0}function kV(a,c){return a&&a.length?Ny(a,le(c,2)):0}return S.after=ZU,S.ary=j_,S.assign=O2,S.assignIn=iE,S.assignInWith=Sp,S.assignWith=L2,S.at=U2,S.before=q_,S.bind=Tx,S.bindAll=$B,S.bindKey=z_,S.castArray=s2,S.chain=W_,S.chunk=gL,S.compact=yL,S.concat=xL,S.cond=jB,S.conforms=qB,S.constant=kx,S.countBy=RU,S.create=B2,S.curry=G_,S.curryRight=K_,S.debounce=Z_,S.defaults=V2,S.defaultsDeep=W2,S.defer=QU,S.delay=YU,S.difference=SL,S.differenceBy=TL,S.differenceWith=vL,S.drop=bL,S.dropRight=wL,S.dropRightWhile=_L,S.dropWhile=EL,S.fill=RL,S.filter=PU,S.flatMap=DU,S.flatMapDeep=IU,S.flatMapDepth=FU,S.flatten=L_,S.flattenDeep=kL,S.flattenDepth=PL,S.flip=XU,S.flow=GB,S.flowRight=KB,S.fromPairs=ML,S.functions=K2,S.functionsIn=Z2,S.groupBy=CU,S.initial=DL,S.intersection=IL,S.intersectionBy=FL,S.intersectionWith=CL,S.invert=Y2,S.invertBy=X2,S.invokeMap=OU,S.iteratee=Px,S.keyBy=LU,S.keys=bt,S.keysIn=ur,S.map=dp,S.mapKeys=eB,S.mapValues=tB,S.matches=ZB,S.matchesProperty=QB,S.memoize=hp,S.merge=rB,S.mergeWith=oE,S.method=YB,S.methodOf=XB,S.mixin=Mx,S.negate=gp,S.nthArg=eV,S.omit=nB,S.omitBy=iB,S.once=JU,S.orderBy=UU,S.over=tV,S.overArgs=e2,S.overEvery=rV,S.overSome=nV,S.partial=vx,S.partialRight=Q_,S.partition=BU,S.pick=oB,S.pickBy=aE,S.property=dE,S.propertyOf=iV,S.pull=UL,S.pullAll=B_,S.pullAllBy=BL,S.pullAllWith=VL,S.pullAt=WL,S.range=oV,S.rangeRight=aV,S.rearg=t2,S.reject=HU,S.remove=HL,S.rest=r2,S.reverse=xx,S.sampleSize=jU,S.set=sB,S.setWith=cB,S.shuffle=qU,S.slice=$L,S.sortBy=KU,S.sortedUniq=QL,S.sortedUniqBy=YL,S.split=DB,S.spread=n2,S.tail=XL,S.take=JL,S.takeRight=eU,S.takeRightWhile=tU,S.takeWhile=rU,S.tap=yU,S.throttle=i2,S.thru=fp,S.toArray=tE,S.toPairs=sE,S.toPairsIn=cE,S.toPath=pV,S.toPlainObject=nE,S.transform=lB,S.unary=o2,S.union=nU,S.unionBy=iU,S.unionWith=oU,S.uniq=aU,S.uniqBy=sU,S.uniqWith=cU,S.unset=uB,S.unzip=Sx,S.unzipWith=V_,S.update=pB,S.updateWith=fB,S.values=Fa,S.valuesIn=dB,S.without=lU,S.words=pE,S.wrap=a2,S.xor=uU,S.xorBy=pU,S.xorWith=fU,S.zip=dU,S.zipObject=mU,S.zipObjectDeep=hU,S.zipWith=gU,S.entries=sE,S.entriesIn=cE,S.extend=iE,S.extendWith=Sp,Mx(S,S),S.add=dV,S.attempt=fE,S.camelCase=yB,S.capitalize=lE,S.ceil=mV,S.clamp=mB,S.clone=c2,S.cloneDeep=u2,S.cloneDeepWith=p2,S.cloneWith=l2,S.conformsTo=f2,S.deburr=uE,S.defaultTo=zB,S.divide=hV,S.endsWith=xB,S.eq=wn,S.escape=SB,S.escapeRegExp=TB,S.every=kU,S.find=MU,S.findIndex=N_,S.findKey=H2,S.findLast=AU,S.findLastIndex=O_,S.findLastKey=$2,S.floor=gV,S.forEach=H_,S.forEachRight=$_,S.forIn=j2,S.forInRight=q2,S.forOwn=z2,S.forOwnRight=G2,S.get=_x,S.gt=d2,S.gte=m2,S.has=Q2,S.hasIn=Ex,S.head=U_,S.identity=pr,S.includes=NU,S.indexOf=AL,S.inRange=hB,S.invoke=J2,S.isArguments=Ao,S.isArray=Se,S.isArrayBuffer=h2,S.isArrayLike=lr,S.isArrayLikeObject=st,S.isBoolean=g2,S.isBuffer=ji,S.isDate=y2,S.isElement=x2,S.isEmpty=S2,S.isEqual=T2,S.isEqualWith=v2,S.isError=bx,S.isFinite=b2,S.isFunction=mi,S.isInteger=Y_,S.isLength=yp,S.isMap=X_,S.isMatch=w2,S.isMatchWith=_2,S.isNaN=E2,S.isNative=R2,S.isNil=P2,S.isNull=k2,S.isNumber=J_,S.isObject=et,S.isObjectLike=it,S.isPlainObject=Ic,S.isRegExp=wx,S.isSafeInteger=M2,S.isSet=eE,S.isString=xp,S.isSymbol=Dr,S.isTypedArray=Ia,S.isUndefined=A2,S.isWeakMap=D2,S.isWeakSet=I2,S.join=NL,S.kebabCase=vB,S.last=Jr,S.lastIndexOf=OL,S.lowerCase=bB,S.lowerFirst=wB,S.lt=F2,S.lte=C2,S.max=yV,S.maxBy=xV,S.mean=SV,S.meanBy=TV,S.min=vV,S.minBy=bV,S.stubArray=Dx,S.stubFalse=Ix,S.stubObject=sV,S.stubString=cV,S.stubTrue=lV,S.multiply=wV,S.nth=LL,S.noConflict=JB,S.noop=Ax,S.now=mp,S.pad=_B,S.padEnd=EB,S.padStart=RB,S.parseInt=kB,S.random=gB,S.reduce=VU,S.reduceRight=WU,S.repeat=PB,S.replace=MB,S.result=aB,S.round=_V,S.runInContext=k,S.sample=$U,S.size=zU,S.snakeCase=AB,S.some=GU,S.sortedIndex=jL,S.sortedIndexBy=qL,S.sortedIndexOf=zL,S.sortedLastIndex=GL,S.sortedLastIndexBy=KL,S.sortedLastIndexOf=ZL,S.startCase=IB,S.startsWith=FB,S.subtract=EV,S.sum=RV,S.sumBy=kV,S.template=CB,S.times=uV,S.toFinite=hi,S.toInteger=we,S.toLength=rE,S.toLower=NB,S.toNumber=en,S.toSafeInteger=N2,S.toString=Ve,S.toUpper=OB,S.trim=LB,S.trimEnd=UB,S.trimStart=BB,S.truncate=VB,S.unescape=WB,S.uniqueId=fV,S.upperCase=HB,S.upperFirst=Rx,S.each=H_,S.eachRight=$_,S.first=U_,Mx(S,function(){var a={};return Un(S,function(c,f){$e.call(S.prototype,f)||(a[f]=c)}),a}(),{chain:!1}),S.VERSION=e,Kr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){S[a].placeholder=S}),Kr(["drop","take"],function(a,c){De.prototype[a]=function(f){f=f===t?1:yt(we(f),0);var h=this.__filtered__&&!c?new De(this):this.clone();return h.__filtered__?h.__takeCount__=Lt(f,h.__takeCount__):h.__views__.push({size:Lt(f,re),type:a+(h.__dir__<0?"Right":"")}),h},De.prototype[a+"Right"]=function(f){return this.reverse()[a](f).reverse()}}),Kr(["filter","map","takeWhile"],function(a,c){var f=c+1,h=f==D||f==q;De.prototype[a]=function(y){var T=this.clone();return T.__iteratees__.push({iteratee:le(y,3),type:f}),T.__filtered__=T.__filtered__||h,T}}),Kr(["head","last"],function(a,c){var f="take"+(c?"Right":"");De.prototype[a]=function(){return this[f](1).value()[0]}}),Kr(["initial","tail"],function(a,c){var f="drop"+(c?"":"Right");De.prototype[a]=function(){return this.__filtered__?new De(this):this[f](1)}}),De.prototype.compact=function(){return this.filter(pr)},De.prototype.find=function(a){return this.filter(a).head()},De.prototype.findLast=function(a){return this.reverse().find(a)},De.prototype.invokeMap=Pe(function(a,c){return typeof a=="function"?new De(this):this.map(function(f){return Rc(f,a,c)})}),De.prototype.reject=function(a){return this.filter(gp(le(a)))},De.prototype.slice=function(a,c){a=we(a);var f=this;return f.__filtered__&&(a>0||c<0)?new De(f):(a<0?f=f.takeRight(-a):a&&(f=f.drop(a)),c!==t&&(c=we(c),f=c<0?f.dropRight(-c):f.take(c-a)),f)},De.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},De.prototype.toArray=function(){return this.take(re)},Un(De.prototype,function(a,c){var f=/^(?:filter|find|map|reject)|While$/.test(c),h=/^(?:head|last)$/.test(c),y=S[h?"take"+(c=="last"?"Right":""):c],T=h||/^find/.test(c);y&&(S.prototype[c]=function(){var E=this.__wrapped__,R=h?[1]:arguments,A=E instanceof De,V=R[0],W=A||Se(E),j=function(Ae){var Fe=y.apply(S,Oi([Ae],R));return h&&Y?Fe[0]:Fe};W&&f&&typeof V=="function"&&V.length!=1&&(A=W=!1);var Y=this.__chain__,ie=!!this.__actions__.length,ue=T&&!Y,Re=A&&!ie;if(!T&&W){E=Re?E:new De(this);var pe=a.apply(E,R);return pe.__actions__.push({func:fp,args:[j],thisArg:t}),new Qr(pe,Y)}return ue&&Re?a.apply(this,R):(pe=this.thru(j),ue?h?pe.value()[0]:pe.value():pe)})}),Kr(["pop","push","shift","sort","splice","unshift"],function(a){var c=Uu[a],f=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",h=/^(?:pop|shift)$/.test(a);S.prototype[a]=function(){var y=arguments;if(h&&!this.__chain__){var T=this.value();return c.apply(Se(T)?T:[],y)}return this[f](function(E){return c.apply(Se(E)?E:[],y)})}}),Un(De.prototype,function(a,c){var f=S[c];if(f){var h=f.name+"";$e.call(ka,h)||(ka[h]=[]),ka[h].push({name:c,func:f})}}),ka[op(t,b).name]=[{name:"wrapper",func:t}],De.prototype.clone=WN,De.prototype.reverse=HN,De.prototype.value=$N,S.prototype.at=xU,S.prototype.chain=SU,S.prototype.commit=TU,S.prototype.next=vU,S.prototype.plant=wU,S.prototype.reverse=_U,S.prototype.toJSON=S.prototype.valueOf=S.prototype.value=EU,S.prototype.first=S.prototype.head,Sc&&(S.prototype[Sc]=bU),S},Ui=TN();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(vt._=Ui,define(function(){return Ui})):bo?((bo.exports=Ui)._=Ui,Py._=Ui):vt._=Ui}).call(Xs)});var qI=ot((LBe,jI)=>{"use strict";jI.exports=HI;function HI(t,e,r){t instanceof RegExp&&(t=WI(t,r)),e instanceof RegExp&&(e=WI(e,r));var n=$I(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}function WI(t,e){var r=e.match(t);return r?r[0]:null}HI.range=$I;function $I(t,e,r){var n,i,o,s,l,u=r.indexOf(t),p=r.indexOf(e,u+1),d=u;if(u>=0&&p>0){if(t===e)return[u,p];for(n=[],o=r.length;d>=0&&!l;)d==u?(n.push(d),u=r.indexOf(t,d+1)):n.length==1?l=[n.pop(),p]:(i=n.pop(),i<o&&(o=i,s=p),p=r.indexOf(e,d+1)),d=u<p&&u>=0?u:p;n.length&&(l=[o,s])}return l}});var JI=ot((UBe,XI)=>{var zI=qI();XI.exports=jZ;var GI="\0SLASH"+Math.random()+"\0",KI="\0OPEN"+Math.random()+"\0",xv="\0CLOSE"+Math.random()+"\0",ZI="\0COMMA"+Math.random()+"\0",QI="\0PERIOD"+Math.random()+"\0";function yv(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function HZ(t){return t.split("\\\\").join(GI).split("\\{").join(KI).split("\\}").join(xv).split("\\,").join(ZI).split("\\.").join(QI)}function $Z(t){return t.split(GI).join("\\").split(KI).join("{").split(xv).join("}").split(ZI).join(",").split(QI).join(".")}function YI(t){if(!t)return[""];var e=[],r=zI("{","}",t);if(!r)return t.split(",");var n=r.pre,i=r.body,o=r.post,s=n.split(",");s[s.length-1]+="{"+i+"}";var l=YI(o);return o.length&&(s[s.length-1]+=l.shift(),s.push.apply(s,l)),e.push.apply(e,s),e}function jZ(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),ou(HZ(t),!0).map($Z)):[]}function qZ(t){return"{"+t+"}"}function zZ(t){return/^-?0\d/.test(t)}function GZ(t,e){return t<=e}function KZ(t,e){return t>=e}function ou(t,e){var r=[],n=zI("{","}",t);if(!n)return[t];var i=n.pre,o=n.post.length?ou(n.post,!1):[""];if(/\$$/.test(n.pre))for(var s=0;s<o.length;s++){var l=i+"{"+n.body+"}"+o[s];r.push(l)}else{var u=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),p=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),d=u||p,m=n.body.indexOf(",")>=0;if(!d&&!m)return n.post.match(/,.*\}/)?(t=n.pre+"{"+n.body+xv+n.post,ou(t)):[t];var g;if(d)g=n.body.split(/\.\./);else if(g=YI(n.body),g.length===1&&(g=ou(g[0],!1).map(qZ),g.length===1))return o.map(function(O){return n.pre+g[0]+O});var x;if(d){var v=yv(g[0]),b=yv(g[1]),I=Math.max(g[0].length,g[1].length),M=g.length==3?Math.abs(yv(g[2])):1,U=GZ,Q=b<v;Q&&(M*=-1,U=KZ);var ne=g.some(zZ);x=[];for(var he=v;U(he,b);he+=M){var de;if(p)de=String.fromCharCode(he),de==="\\"&&(de="");else if(de=String(he),ne){var dt=I-de.length;if(dt>0){var Dt=new Array(dt+1).join("0");he<0?de="-"+Dt+de.slice(1):de=Dt+de}}x.push(de)}}else{x=[];for(var nt=0;nt<g.length;nt++)x.push.apply(x,ou(g[nt],!1))}for(var nt=0;nt<x.length;nt++)for(var s=0;s<o.length;s++){var l=i+x[nt]+o[s];(!e||d||l)&&r.push(l)}}return r}});var CY={};FV(CY,{default:()=>jF});module.exports=CV(CY);var Fx="cursorless.command",vp=class{constructor(e){this.baseTitle=e}get title(){return`Cursorless: ${this.baseTitle}`}},lt=class extends vp{constructor(){super(...arguments);this.isVisible=!1}},mt=class extends vp{constructor(){super(...arguments);this.isVisible=!0}};var OY={"cursorless.toggleDecorations":new mt("Toggle decorations"),"cursorless.recomputeDecorationStyles":new mt("Recompute decoration styles"),"cursorless.recordTestCase":new mt("Record test case"),"cursorless.recordOneTestCaseThenPause":new mt("Record one test case, then pause"),"cursorless.pauseRecording":new mt("Pause test case recording"),"cursorless.resumeRecording":new mt("Resume test case recording"),"cursorless.recordScopeTests.showUnimplementedFacets":new mt("Bulk record unimplemented scope facets"),"cursorless.recordScopeTests.saveActiveDocument":new mt("Bulk save scope tests for the active document"),"cursorless.showDocumentation":new mt("Show documentation"),"cursorless.showScopeVisualizer":new mt("Show the scope visualizer"),"cursorless.hideScopeVisualizer":new mt("Hide the scope visualizer"),"cursorless.analyzeCommandHistory":new mt("Analyze collected command history"),"cursorless.tutorial.start":new lt("Start a tutorial"),"cursorless.tutorial.next":new mt("Tutorial next"),"cursorless.tutorial.previous":new mt("Tutorial previous"),"cursorless.tutorial.restart":new mt("Tutorial restart"),"cursorless.tutorial.resume":new mt("Tutorial resume"),"cursorless.tutorial.list":new mt("Tutorial list"),"cursorless.documentationOpened":new lt("Used by talon to notify us that the docs have been opened; for use with tutorial"),"cursorless.command":new lt("The core cursorless command"),"cursorless.repeatPreviousCommand":new mt("Repeat the previous Cursorless command"),"cursorless.showQuickPick":new lt("Pop up a quick pick of all cursorless commands"),"cursorless.showCheatsheet":new lt("Display the cursorless cheatsheet"),"cursorless.internal.updateCheatsheetDefaults":new lt("Update the default values of the cheatsheet payload used on the website and for local development. Be sure to run this on stock community and cursorless."),"cursorless.private.logQuickActions":new lt("Log the quick actions available at the current cursor position"),"cursorless.takeSnapshot":new lt("Take a snapshot of the current editor state"),"cursorless.keyboard.escape":new lt("Should be mapped to the escape key when using cursorless keyboard. By default, exits modal keyboard mode, but changes behaviour when Cursorless is expecting a continuation keystroke.  For example, when you type a color and Cursorless is waiting for a character, it cancels the color and switches back to modal mode."),"cursorless.keyboard.targeted.targetHat":new lt("Sets the keyboard target to the given hat"),"cursorless.keyboard.targeted.targetScope":new lt("Sets the keyboard target to the scope containing the current target"),"cursorless.keyboard.targeted.targetSelection":new lt("Sets the keyboard target to the current selection"),"cursorless.keyboard.targeted.clearTarget":new lt("Clears the current keyboard target"),"cursorless.keyboard.targeted.runActionOnTarget":new lt("Run the given action on the current keyboard target"),"cursorless.keyboard.modal.modeOn":new lt("Turn on the cursorless modal mode"),"cursorless.keyboard.modal.modeOff":new lt("Turn off the cursorless modal mode"),"cursorless.keyboard.modal.modeToggle":new lt("Toggle the cursorless modal mode"),"cursorless.keyboard.undoTarget":new lt("Undo keyboard targeting changes"),"cursorless.keyboard.redoTarget":new lt("Redo keyboard targeting changes")};var bp=class{constructor(e,r){this.callback=e;this.debounceDelayMs=r;this.timeoutHandle=null;this.run=this.run.bind(this)}run(){this.timeoutHandle!=null&&clearTimeout(this.timeoutHandle),this.timeoutHandle=setTimeout(()=>{this.callback(),this.timeoutHandle=null},this.debounceDelayMs)}dispose(){this.timeoutHandle!=null&&clearTimeout(this.timeoutHandle)}};var wp=class extends Error{constructor(e){super(`Language '${e}' is not implemented yet; See https://www.cursorless.org/docs/contributing/adding-a-new-language/`),this.name="UnsupportedLanguageError"}};var _p=class extends Error{constructor(){super("Cursorless Talon version is ahead of Cursorless VSCode extension version. Please update Cursorless VSCode.")}},wt=class extends Error{constructor(e){super(`Couldn't find containing ${e}.`),this.name="NoContainingScopeError"}};var Ep=class{constructor(){this.signals={prePhrase:{getVersion:async()=>null}}}async getFocusedElementType(){return this.focusedElementType}setFocusedElementType(e){this.focusedElementType=e}};var NV=typeof global=="object"&&global&&global.Object===Object&&global,Rp=NV;var OV=typeof self=="object"&&self&&self.Object===Object&&self,LV=Rp||OV||Function("return this")(),_t=LV;var UV=_t.Symbol,Qt=UV;var gE=Object.prototype,BV=gE.hasOwnProperty,VV=gE.toString,Fc=Qt?Qt.toStringTag:void 0;function WV(t){var e=BV.call(t,Fc),r=t[Fc];try{t[Fc]=void 0;var n=!0}catch{}var i=VV.call(t);return n&&(e?t[Fc]=r:delete t[Fc]),i}var yE=WV;var HV=Object.prototype,$V=HV.toString;function jV(t){return $V.call(t)}var xE=jV;var qV="[object Null]",zV="[object Undefined]",SE=Qt?Qt.toStringTag:void 0;function GV(t){return t==null?t===void 0?zV:qV:SE&&SE in Object(t)?yE(t):xE(t)}var En=GV;function KV(t){return t!=null&&typeof t=="object"}var Yt=KV;var ZV="[object Symbol]";function QV(t){return typeof t=="symbol"||Yt(t)&&En(t)==ZV}var Bt=QV;function YV(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var tn=YV;var XV=Array.isArray,Le=XV;var JV=1/0,TE=Qt?Qt.prototype:void 0,vE=TE?TE.toString:void 0;function bE(t){if(typeof t=="string")return t;if(Le(t))return tn(t,bE)+"";if(Bt(t))return vE?vE.call(t):"";var e=t+"";return e=="0"&&1/t==-JV?"-0":e}var wE=bE;var eW=/\s/;function tW(t){for(var e=t.length;e--&&eW.test(t.charAt(e)););return e}var _E=tW;var rW=/^\s+/;function nW(t){return t&&t.slice(0,_E(t)+1).replace(rW,"")}var EE=nW;function iW(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Cr=iW;var RE=NaN,oW=/^[-+]0x[0-9a-f]+$/i,aW=/^0b[01]+$/i,sW=/^0o[0-7]+$/i,cW=parseInt;function lW(t){if(typeof t=="number")return t;if(Bt(t))return RE;if(Cr(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Cr(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=EE(t);var r=aW.test(t);return r||sW.test(t)?cW(t.slice(2),r?2:8):oW.test(t)?RE:+t}var kE=lW;var PE=1/0,uW=17976931348623157e292;function pW(t){if(!t)return t===0?t:0;if(t=kE(t),t===PE||t===-PE){var e=t<0?-1:1;return e*uW}return t===t?t:0}var Ca=pW;function fW(t){var e=Ca(t),r=e%1;return e===e?r?e-r:e:0}var kp=fW;function dW(t){return t}var Vt=dW;var mW="[object AsyncFunction]",hW="[object Function]",gW="[object GeneratorFunction]",yW="[object Proxy]";function xW(t){if(!Cr(t))return!1;var e=En(t);return e==hW||e==gW||e==mW||e==yW}var Pp=xW;var SW=_t["__core-js_shared__"],Mp=SW;var ME=function(){var t=/[^.]+$/.exec(Mp&&Mp.keys&&Mp.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function TW(t){return!!ME&&ME in t}var AE=TW;var vW=Function.prototype,bW=vW.toString;function wW(t){if(t!=null){try{return bW.call(t)}catch{}try{return t+""}catch{}}return""}var yi=wW;var _W=/[\\^$.*+?()[\]{}|]/g,EW=/^\[object .+?Constructor\]$/,RW=Function.prototype,kW=Object.prototype,PW=RW.toString,MW=kW.hasOwnProperty,AW=RegExp("^"+PW.call(MW).replace(_W,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function DW(t){if(!Cr(t)||AE(t))return!1;var e=Pp(t)?AW:EW;return e.test(yi(t))}var DE=DW;function IW(t,e){return t?.[e]}var IE=IW;function FW(t,e){var r=IE(t,e);return DE(r)?r:void 0}var dr=FW;var CW=dr(_t,"WeakMap"),Do=CW;var NW=Do&&new Do,Cx=NW;var FE=Object.create,OW=function(){function t(){}return function(e){if(!Cr(e))return{};if(FE)return FE(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),Ap=OW;function LW(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var CE=LW;function UW(){}var Na=UW;var BW=4294967295;function Dp(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=BW,this.__views__=[]}Dp.prototype=Ap(Na.prototype);Dp.prototype.constructor=Dp;var Oa=Dp;function VW(){}var Ip=VW;var WW=Cx?function(t){return Cx.get(t)}:Ip,Fp=WW;var HW={},Nx=HW;var $W=Object.prototype,jW=$W.hasOwnProperty;function qW(t){for(var e=t.name+"",r=Nx[e],n=jW.call(Nx,e)?r.length:0;n--;){var i=r[n],o=i.func;if(o==null||o==t)return i.name}return e}var La=qW;function Cp(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}Cp.prototype=Ap(Na.prototype);Cp.prototype.constructor=Cp;var qi=Cp;function zW(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var zi=zW;function GW(t){if(t instanceof Oa)return t.clone();var e=new qi(t.__wrapped__,t.__chain__);return e.__actions__=zi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var NE=GW;var KW=Object.prototype,ZW=KW.hasOwnProperty;function Np(t){if(Yt(t)&&!Le(t)&&!(t instanceof Oa)){if(t instanceof qi)return t;if(ZW.call(t,"__wrapped__"))return NE(t)}return new qi(t)}Np.prototype=Na.prototype;Np.prototype.constructor=Np;var OE=Np;function QW(t){var e=La(t),r=OE[e];if(typeof r!="function"||!(e in Oa.prototype))return!1;if(t===r)return!0;var n=Fp(r);return!!n&&t===n[0]}var Ox=QW;var YW=800,XW=16,JW=Date.now;function eH(t){var e=0,r=0;return function(){var n=JW(),i=XW-(n-r);if(r=n,i>0){if(++e>=YW)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var LE=eH;function tH(t){return function(){return t}}var UE=tH;var rH=function(){try{var t=dr(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Ua=rH;var nH=Ua?function(t,e){return Ua(t,"toString",{configurable:!0,enumerable:!1,value:UE(e),writable:!0})}:Vt,BE=nH;var iH=LE(BE),Op=iH;function oH(t,e,r,n){for(var i=t.length,o=r+(n?1:-1);n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}var Lp=oH;function aH(t){return t!==t}var VE=aH;function sH(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}var WE=sH;function cH(t,e,r){return e===e?WE(t,e,r):Lp(t,VE,r)}var Up=cH;function lH(t,e){var r=t==null?0:t.length;return!!r&&Up(t,e,0)>-1}var HE=lH;var uH=9007199254740991,pH=/^(?:0|[1-9]\d*)$/;function fH(t,e){var r=typeof t;return e=e??uH,!!e&&(r=="number"||r!="symbol"&&pH.test(t))&&t>-1&&t%1==0&&t<e}var Ba=fH;function dH(t,e,r){e=="__proto__"&&Ua?Ua(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var $E=dH;function mH(t,e){return t===e||t!==t&&e!==e}var Va=mH;var jE=Math.max;function hH(t,e,r){return e=jE(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,o=jE(n.length-e,0),s=Array(o);++i<o;)s[i]=n[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=n[i];return l[e]=r(s),CE(t,this,l)}}var Bp=hH;function gH(t,e){return Op(Bp(t,e,Vt),t+"")}var Wa=gH;var yH=9007199254740991;function xH(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=yH}var Ha=xH;function SH(t){return t!=null&&Ha(t.length)&&!Pp(t)}var rn=SH;function TH(t,e,r){if(!Cr(r))return!1;var n=typeof e;return(n=="number"?rn(r)&&Ba(e,r.length):n=="string"&&e in r)?Va(r[e],t):!1}var Io=TH;var vH=Object.prototype;function bH(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||vH;return t===r}var qE=bH;function wH(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var Vp=wH;var _H="[object Arguments]";function EH(t){return Yt(t)&&En(t)==_H}var Lx=EH;var zE=Object.prototype,RH=zE.hasOwnProperty,kH=zE.propertyIsEnumerable,PH=Lx(function(){return arguments}())?Lx:function(t){return Yt(t)&&RH.call(t,"callee")&&!kH.call(t,"callee")},$a=PH;function MH(){return!1}var GE=MH;var QE=typeof exports=="object"&&exports&&!exports.nodeType&&exports,KE=QE&&typeof module=="object"&&module&&!module.nodeType&&module,AH=KE&&KE.exports===QE,ZE=AH?_t.Buffer:void 0,DH=ZE?ZE.isBuffer:void 0,IH=DH||GE,Cc=IH;var FH="[object Arguments]",CH="[object Array]",NH="[object Boolean]",OH="[object Date]",LH="[object Error]",UH="[object Function]",BH="[object Map]",VH="[object Number]",WH="[object Object]",HH="[object RegExp]",$H="[object Set]",jH="[object String]",qH="[object WeakMap]",zH="[object ArrayBuffer]",GH="[object DataView]",KH="[object Float32Array]",ZH="[object Float64Array]",QH="[object Int8Array]",YH="[object Int16Array]",XH="[object Int32Array]",JH="[object Uint8Array]",e$="[object Uint8ClampedArray]",t$="[object Uint16Array]",r$="[object Uint32Array]",Xe={};Xe[KH]=Xe[ZH]=Xe[QH]=Xe[YH]=Xe[XH]=Xe[JH]=Xe[e$]=Xe[t$]=Xe[r$]=!0;Xe[FH]=Xe[CH]=Xe[zH]=Xe[NH]=Xe[GH]=Xe[OH]=Xe[LH]=Xe[UH]=Xe[BH]=Xe[VH]=Xe[WH]=Xe[HH]=Xe[$H]=Xe[jH]=Xe[qH]=!1;function n$(t){return Yt(t)&&Ha(t.length)&&!!Xe[En(t)]}var YE=n$;function i$(t){return function(e){return t(e)}}var ja=i$;var XE=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Nc=XE&&typeof module=="object"&&module&&!module.nodeType&&module,o$=Nc&&Nc.exports===XE,Ux=o$&&Rp.process,a$=function(){try{var t=Nc&&Nc.require&&Nc.require("util").types;return t||Ux&&Ux.binding&&Ux.binding("util")}catch{}}(),Bx=a$;var JE=Bx&&Bx.isTypedArray,s$=JE?ja(JE):YE,Wp=s$;var c$=Object.prototype,l$=c$.hasOwnProperty;function u$(t,e){var r=Le(t),n=!r&&$a(t),i=!r&&!n&&Cc(t),o=!r&&!n&&!i&&Wp(t),s=r||n||i||o,l=s?Vp(t.length,String):[],u=l.length;for(var p in t)(e||l$.call(t,p))&&!(s&&(p=="length"||i&&(p=="offset"||p=="parent")||o&&(p=="buffer"||p=="byteLength"||p=="byteOffset")||Ba(p,u)))&&l.push(p);return l}var e0=u$;function p$(t,e){return function(r){return t(e(r))}}var t0=p$;var f$=t0(Object.keys,Object),r0=f$;var d$=Object.prototype,m$=d$.hasOwnProperty;function h$(t){if(!qE(t))return r0(t);var e=[];for(var r in Object(t))m$.call(t,r)&&r!="constructor"&&e.push(r);return e}var n0=h$;function g$(t){return rn(t)?e0(t):n0(t)}var Wn=g$;var y$=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,x$=/^\w*$/;function S$(t,e){if(Le(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||Bt(t)?!0:x$.test(t)||!y$.test(t)||e!=null&&t in Object(e)}var qa=S$;var T$=dr(Object,"create"),xi=T$;function v$(){this.__data__=xi?xi(null):{},this.size=0}var i0=v$;function b$(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var o0=b$;var w$="__lodash_hash_undefined__",_$=Object.prototype,E$=_$.hasOwnProperty;function R$(t){var e=this.__data__;if(xi){var r=e[t];return r===w$?void 0:r}return E$.call(e,t)?e[t]:void 0}var a0=R$;var k$=Object.prototype,P$=k$.hasOwnProperty;function M$(t){var e=this.__data__;return xi?e[t]!==void 0:P$.call(e,t)}var s0=M$;var A$="__lodash_hash_undefined__";function D$(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=xi&&e===void 0?A$:e,this}var c0=D$;function za(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}za.prototype.clear=i0;za.prototype.delete=o0;za.prototype.get=a0;za.prototype.has=s0;za.prototype.set=c0;var Vx=za;function I$(){this.__data__=[],this.size=0}var l0=I$;function F$(t,e){for(var r=t.length;r--;)if(Va(t[r][0],e))return r;return-1}var Gi=F$;var C$=Array.prototype,N$=C$.splice;function O$(t){var e=this.__data__,r=Gi(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():N$.call(e,r,1),--this.size,!0}var u0=O$;function L$(t){var e=this.__data__,r=Gi(e,t);return r<0?void 0:e[r][1]}var p0=L$;function U$(t){return Gi(this.__data__,t)>-1}var f0=U$;function B$(t,e){var r=this.__data__,n=Gi(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var d0=B$;function Ga(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Ga.prototype.clear=l0;Ga.prototype.delete=u0;Ga.prototype.get=p0;Ga.prototype.has=f0;Ga.prototype.set=d0;var Ki=Ga;var V$=dr(_t,"Map"),Zi=V$;function W$(){this.size=0,this.__data__={hash:new Vx,map:new(Zi||Ki),string:new Vx}}var m0=W$;function H$(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var h0=H$;function $$(t,e){var r=t.__data__;return h0(e)?r[typeof e=="string"?"string":"hash"]:r.map}var Qi=$$;function j$(t){var e=Qi(this,t).delete(t);return this.size-=e?1:0,e}var g0=j$;function q$(t){return Qi(this,t).get(t)}var y0=q$;function z$(t){return Qi(this,t).has(t)}var x0=z$;function G$(t,e){var r=Qi(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var S0=G$;function Ka(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Ka.prototype.clear=m0;Ka.prototype.delete=g0;Ka.prototype.get=y0;Ka.prototype.has=x0;Ka.prototype.set=S0;var Fo=Ka;var K$="Expected a function";function Wx(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(K$);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=t.apply(this,n);return r.cache=o.set(i,s)||o,s};return r.cache=new(Wx.Cache||Fo),r}Wx.Cache=Fo;var Oc=Wx;var Z$=500;function Q$(t){var e=Oc(t,function(n){return r.size===Z$&&r.clear(),n}),r=e.cache;return e}var T0=Q$;var Y$=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,X$=/\\(\\)?/g,J$=T0(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Y$,function(r,n,i,o){e.push(i?o.replace(X$,"$1"):n||r)}),e}),v0=J$;function e3(t){return t==null?"":wE(t)}var Rn=e3;function t3(t,e){return Le(t)?t:qa(t,e)?[t]:v0(Rn(t))}var Hp=t3;var r3=1/0;function n3(t){if(typeof t=="string"||Bt(t))return t;var e=t+"";return e=="0"&&1/t==-r3?"-0":e}var Yi=n3;function i3(t,e){e=Hp(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[Yi(e[r++])];return r&&r==n?t:void 0}var Za=i3;function o3(t,e,r){var n=t==null?void 0:Za(t,e);return n===void 0?r:n}var Co=o3;function a3(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var Qa=a3;var b0=Qt?Qt.isConcatSpreadable:void 0;function s3(t){return Le(t)||$a(t)||!!(b0&&t&&t[b0])}var w0=s3;function _0(t,e,r,n,i){var o=-1,s=t.length;for(r||(r=w0),i||(i=[]);++o<s;){var l=t[o];e>0&&r(l)?e>1?_0(l,e-1,r,n,i):Qa(i,l):n||(i[i.length]=l)}return i}var Ya=_0;function c3(t){var e=t==null?0:t.length;return e?Ya(t,1):[]}var tt=c3;function l3(t){return Op(Bp(t,void 0,tt),t+"")}var E0=l3;function u3(t){return function(e){return t?.[e]}}var R0=u3;var p3={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},f3=R0(p3),k0=f3;var d3=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,m3="\\u0300-\\u036f",h3="\\ufe20-\\ufe2f",g3="\\u20d0-\\u20ff",y3=m3+h3+g3,x3="["+y3+"]",S3=RegExp(x3,"g");function T3(t){return t=Rn(t),t&&t.replace(d3,k0).replace(S3,"")}var Hx=T3;function v3(){this.__data__=new Ki,this.size=0}var P0=v3;function b3(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var M0=b3;function w3(t){return this.__data__.get(t)}var A0=w3;function _3(t){return this.__data__.has(t)}var D0=_3;var E3=200;function R3(t,e){var r=this.__data__;if(r instanceof Ki){var n=r.__data__;if(!Zi||n.length<E3-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Fo(n)}return r.set(t,e),this.size=r.size,this}var I0=R3;function Xa(t){var e=this.__data__=new Ki(t);this.size=e.size}Xa.prototype.clear=P0;Xa.prototype.delete=M0;Xa.prototype.get=A0;Xa.prototype.has=D0;Xa.prototype.set=I0;var Ja=Xa;function k3(t,e){for(var r=-1,n=t==null?0:t.length,i=0,o=[];++r<n;){var s=t[r];e(s,r,t)&&(o[i++]=s)}return o}var $p=k3;function P3(){return[]}var F0=P3;var M3=Object.prototype,A3=M3.propertyIsEnumerable,C0=Object.getOwnPropertySymbols,D3=C0?function(t){return t==null?[]:(t=Object(t),$p(C0(t),function(e){return A3.call(t,e)}))}:F0,N0=D3;function I3(t,e,r){var n=e(t);return Le(t)?n:Qa(n,r(t))}var O0=I3;function F3(t){return O0(t,Wn,N0)}var $x=F3;var C3=dr(_t,"DataView"),jp=C3;var N3=dr(_t,"Promise"),qp=N3;var O3=dr(_t,"Set"),Xi=O3;var L0="[object Map]",L3="[object Object]",U0="[object Promise]",B0="[object Set]",V0="[object WeakMap]",W0="[object DataView]",U3=yi(jp),B3=yi(Zi),V3=yi(qp),W3=yi(Xi),H3=yi(Do),No=En;(jp&&No(new jp(new ArrayBuffer(1)))!=W0||Zi&&No(new Zi)!=L0||qp&&No(qp.resolve())!=U0||Xi&&No(new Xi)!=B0||Do&&No(new Do)!=V0)&&(No=function(t){var e=En(t),r=e==L3?t.constructor:void 0,n=r?yi(r):"";if(n)switch(n){case U3:return W0;case B3:return L0;case V3:return U0;case W3:return B0;case H3:return V0}return e});var jx=No;var $3=_t.Uint8Array,qx=$3;function j3(){var t=arguments.length;if(!t)return[];for(var e=Array(t-1),r=arguments[0],n=t;n--;)e[n-1]=arguments[n];return Qa(Le(r)?zi(r):[r],Ya(e,1))}var Lc=j3;var q3="__lodash_hash_undefined__";function z3(t){return this.__data__.set(t,q3),this}var H0=z3;function G3(t){return this.__data__.has(t)}var $0=G3;function zp(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new Fo;++e<r;)this.add(t[e])}zp.prototype.add=zp.prototype.push=H0;zp.prototype.has=$0;var Gp=zp;function K3(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var j0=K3;function Z3(t,e){return t.has(e)}var Kp=Z3;var Q3=1,Y3=2;function X3(t,e,r,n,i,o){var s=r&Q3,l=t.length,u=e.length;if(l!=u&&!(s&&u>l))return!1;var p=o.get(t),d=o.get(e);if(p&&d)return p==e&&d==t;var m=-1,g=!0,x=r&Y3?new Gp:void 0;for(o.set(t,e),o.set(e,t);++m<l;){var v=t[m],b=e[m];if(n)var I=s?n(b,v,m,e,t,o):n(v,b,m,t,e,o);if(I!==void 0){if(I)continue;g=!1;break}if(x){if(!j0(e,function(M,U){if(!Kp(x,U)&&(v===M||i(v,M,r,n,o)))return x.push(U)})){g=!1;break}}else if(!(v===b||i(v,b,r,n,o))){g=!1;break}}return o.delete(t),o.delete(e),g}var Zp=X3;function J3(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}var q0=J3;function ej(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var es=ej;var tj=1,rj=2,nj="[object Boolean]",ij="[object Date]",oj="[object Error]",aj="[object Map]",sj="[object Number]",cj="[object RegExp]",lj="[object Set]",uj="[object String]",pj="[object Symbol]",fj="[object ArrayBuffer]",dj="[object DataView]",z0=Qt?Qt.prototype:void 0,zx=z0?z0.valueOf:void 0;function mj(t,e,r,n,i,o,s){switch(r){case dj:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case fj:return!(t.byteLength!=e.byteLength||!o(new qx(t),new qx(e)));case nj:case ij:case sj:return Va(+t,+e);case oj:return t.name==e.name&&t.message==e.message;case cj:case uj:return t==e+"";case aj:var l=q0;case lj:var u=n&tj;if(l||(l=es),t.size!=e.size&&!u)return!1;var p=s.get(t);if(p)return p==e;n|=rj,s.set(t,e);var d=Zp(l(t),l(e),n,i,o,s);return s.delete(t),d;case pj:if(zx)return zx.call(t)==zx.call(e)}return!1}var G0=mj;var hj=1,gj=Object.prototype,yj=gj.hasOwnProperty;function xj(t,e,r,n,i,o){var s=r&hj,l=$x(t),u=l.length,p=$x(e),d=p.length;if(u!=d&&!s)return!1;for(var m=u;m--;){var g=l[m];if(!(s?g in e:yj.call(e,g)))return!1}var x=o.get(t),v=o.get(e);if(x&&v)return x==e&&v==t;var b=!0;o.set(t,e),o.set(e,t);for(var I=s;++m<u;){g=l[m];var M=t[g],U=e[g];if(n)var Q=s?n(U,M,g,e,t,o):n(M,U,g,t,e,o);if(!(Q===void 0?M===U||i(M,U,r,n,o):Q)){b=!1;break}I||(I=g=="constructor")}if(b&&!I){var ne=t.constructor,he=e.constructor;ne!=he&&"constructor"in t&&"constructor"in e&&!(typeof ne=="function"&&ne instanceof ne&&typeof he=="function"&&he instanceof he)&&(b=!1)}return o.delete(t),o.delete(e),b}var K0=xj;var Sj=1,Z0="[object Arguments]",Q0="[object Array]",Qp="[object Object]",Tj=Object.prototype,Y0=Tj.hasOwnProperty;function vj(t,e,r,n,i,o){var s=Le(t),l=Le(e),u=s?Q0:jx(t),p=l?Q0:jx(e);u=u==Z0?Qp:u,p=p==Z0?Qp:p;var d=u==Qp,m=p==Qp,g=u==p;if(g&&Cc(t)){if(!Cc(e))return!1;s=!0,d=!1}if(g&&!d)return o||(o=new Ja),s||Wp(t)?Zp(t,e,r,n,i,o):G0(t,e,u,r,n,i,o);if(!(r&Sj)){var x=d&&Y0.call(t,"__wrapped__"),v=m&&Y0.call(e,"__wrapped__");if(x||v){var b=x?t.value():t,I=v?e.value():e;return o||(o=new Ja),i(b,I,r,n,o)}}return g?(o||(o=new Ja),K0(t,e,r,n,i,o)):!1}var X0=vj;function J0(t,e,r,n,i){return t===e?!0:t==null||e==null||!Yt(t)&&!Yt(e)?t!==t&&e!==e:X0(t,e,r,n,J0,i)}var ts=J0;var bj=1,wj=2;function _j(t,e,r,n){var i=r.length,o=i,s=!n;if(t==null)return!o;for(t=Object(t);i--;){var l=r[i];if(s&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++i<o;){l=r[i];var u=l[0],p=t[u],d=l[1];if(s&&l[2]){if(p===void 0&&!(u in t))return!1}else{var m=new Ja;if(n)var g=n(p,d,u,t,e,m);if(!(g===void 0?ts(d,p,bj|wj,n,m):g))return!1}}return!0}var eR=_j;function Ej(t){return t===t&&!Cr(t)}var Yp=Ej;function Rj(t){for(var e=Wn(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,Yp(i)]}return e}var tR=Rj;function kj(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var Xp=kj;function Pj(t){var e=tR(t);return e.length==1&&e[0][2]?Xp(e[0][0],e[0][1]):function(r){return r===t||eR(r,t,e)}}var rR=Pj;function Mj(t,e){return t!=null&&e in Object(t)}var nR=Mj;function Aj(t,e,r){e=Hp(e,t);for(var n=-1,i=e.length,o=!1;++n<i;){var s=Yi(e[n]);if(!(o=t!=null&&r(t,s)))break;t=t[s]}return o||++n!=i?o:(i=t==null?0:t.length,!!i&&Ha(i)&&Ba(s,i)&&(Le(t)||$a(t)))}var iR=Aj;function Dj(t,e){return t!=null&&iR(t,e,nR)}var oR=Dj;var Ij=1,Fj=2;function Cj(t,e){return qa(t)&&Yp(e)?Xp(Yi(t),e):function(r){var n=Co(r,t);return n===void 0&&n===e?oR(r,t):ts(e,n,Ij|Fj)}}var aR=Cj;function Nj(t){return function(e){return e?.[t]}}var Jp=Nj;function Oj(t){return function(e){return Za(e,t)}}var sR=Oj;function Lj(t){return qa(t)?Jp(Yi(t)):sR(t)}var cR=Lj;function Uj(t){return typeof t=="function"?t:t==null?Vt:typeof t=="object"?Le(t)?aR(t[0],t[1]):rR(t):cR(t)}var mr=Uj;function Bj(t,e,r,n){for(var i=-1,o=t==null?0:t.length;++i<o;){var s=t[i];e(n,s,r(s),t)}return n}var lR=Bj;function Vj(t){return function(e,r,n){for(var i=-1,o=Object(e),s=n(e),l=s.length;l--;){var u=s[t?l:++i];if(r(o[u],u,o)===!1)break}return e}}var uR=Vj;var Wj=uR(),pR=Wj;function Hj(t,e){return t&&pR(t,e,Wn)}var fR=Hj;function $j(t,e){return function(r,n){if(r==null)return r;if(!rn(r))return t(r,n);for(var i=r.length,o=e?i:-1,s=Object(r);(e?o--:++o<i)&&n(s[o],o,s)!==!1;);return r}}var dR=$j;var jj=dR(fR),ef=jj;function qj(t,e,r,n){return ef(t,function(i,o,s){e(n,i,r(i),s)}),n}var mR=qj;function zj(t,e){return function(r,n){var i=Le(r)?lR:mR,o=e?e():{};return i(r,t,mr(n,2),o)}}var hR=zj;function Gj(t){return Yt(t)&&rn(t)}var gR=Gj;function Kj(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}var yR=Kj;function Zj(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var tf=Zj;var xR=/[\\^$.*+?()[\]{}|]/g,Qj=RegExp(xR.source);function Yj(t){return t=Rn(t),t&&Qj.test(t)?t.replace(xR,"\\$&"):t}var Nr=Yj;function Xj(t){return function(e,r,n){var i=Object(e);if(!rn(e)){var o=mr(r,3);e=Wn(e),r=function(l){return o(i[l],l,i)}}var s=t(e,r,n);return s>-1?i[o?e[s]:s]:void 0}}var SR=Xj;var Jj=Math.max,eq=Math.min;function tq(t,e,r){var n=t==null?0:t.length;if(!n)return-1;var i=n-1;return r!==void 0&&(i=kp(r),i=r<0?Jj(n+i,0):eq(i,n-1)),Lp(t,mr(e,3),i,!0)}var Oo=tq;var rq=SR(Oo),Gx=rq;function nq(t,e){var r=-1,n=rn(t)?Array(t.length):[];return ef(t,function(i,o,s){n[++r]=e(i,o,s)}),n}var TR=nq;var iq="Expected a function",oq=8,aq=32,sq=128,cq=256;function lq(t){return E0(function(e){var r=e.length,n=r,i=qi.prototype.thru;for(t&&e.reverse();n--;){var o=e[n];if(typeof o!="function")throw new TypeError(iq);if(i&&!s&&La(o)=="wrapper")var s=new qi([],!0)}for(n=s?n:r;++n<r;){o=e[n];var l=La(o),u=l=="wrapper"?Fp(o):void 0;u&&Ox(u[0])&&u[1]==(sq|oq|aq|cq)&&!u[4].length&&u[9]==1?s=s[La(u[0])].apply(s,u[3]):s=o.length==1&&Ox(o)?s[l]():s.thru(o)}return function(){var p=arguments,d=p[0];if(s&&p.length==1&&Le(d))return s.plant(d).value();for(var m=0,g=r?e[m].apply(this,p):d;++m<r;)g=e[m].call(this,g);return g}})}var vR=lq;var uq=vR(),Kx=uq;var pq=Object.prototype,fq=pq.hasOwnProperty,dq=hR(function(t,e,r){fq.call(t,r)?t[r].push(e):$E(t,r,[e])}),Zx=dq;function mq(t,e){return t>e}var bR=mq;function hq(t,e){return tn(e,function(r){return t[r]})}var wR=hq;function gq(t){return t==null?[]:wR(t,Wn(t))}var _R=gq;function yq(t,e){return ts(t,e)}var Si=yq;function xq(t,e){return t<e}var ER=xq;function Sq(t,e,r){for(var n=-1,i=t.length;++n<i;){var o=t[n],s=e(o);if(s!=null&&(l===void 0?s===s&&!Bt(s):r(s,l)))var l=s,u=o}return u}var rf=Sq;function Tq(t,e){return t&&t.length?rf(t,mr(e,2),bR):void 0}var Qx=Tq;function vq(t,e){for(var r,n=-1,i=t.length;++n<i;){var o=e(t[n]);o!==void 0&&(r=r===void 0?o:r+o)}return r}var RR=vq;function bq(t){return t&&t.length?rf(t,Vt,ER):void 0}var Yx=bq;function wq(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}var kR=wq;function _q(t,e){if(t!==e){var r=t!==void 0,n=t===null,i=t===t,o=Bt(t),s=e!==void 0,l=e===null,u=e===e,p=Bt(e);if(!l&&!p&&!o&&t>e||o&&s&&u&&!l&&!p||n&&s&&u||!r&&u||!i)return 1;if(!n&&!o&&!p&&t<e||p&&r&&i&&!n&&!o||l&&r&&i||!s&&i||!u)return-1}return 0}var PR=_q;function Eq(t,e,r){for(var n=-1,i=t.criteria,o=e.criteria,s=i.length,l=r.length;++n<s;){var u=PR(i[n],o[n]);if(u){if(n>=l)return u;var p=r[n];return u*(p=="desc"?-1:1)}}return t.index-e.index}var MR=Eq;function Rq(t,e,r){e.length?e=tn(e,function(o){return Le(o)?function(s){return Za(s,o.length===1?o[0]:o)}:o}):e=[Vt];var n=-1;e=tn(e,ja(mr));var i=TR(t,function(o,s,l){var u=tn(e,function(p){return p(o)});return{criteria:u,index:++n,value:o}});return kR(i,function(o,s){return MR(o,s,r)})}var AR=Rq;var kq=9007199254740991,Pq=Math.floor;function Mq(t,e){var r="";if(!t||e<1||e>kq)return r;do e%2&&(r+=t),e=Pq(e/2),e&&(t+=t);while(e);return r}var DR=Mq;function Aq(t,e,r,n){for(var i=r-1,o=t.length;++i<o;)if(n(t[i],e))return i;return-1}var IR=Aq;var Dq=Array.prototype,FR=Dq.splice;function Iq(t,e,r,n){var i=n?IR:Up,o=-1,s=e.length,l=t;for(t===e&&(e=zi(e)),r&&(l=tn(t,ja(r)));++o<s;)for(var u=0,p=e[o],d=r?r(p):p;(u=i(l,d,u,n))>-1;)l!==t&&FR.call(l,u,1),FR.call(t,u,1);return t}var CR=Iq;function Fq(t,e){return t&&t.length&&e&&e.length?CR(t,e):t}var NR=Fq;var Cq=Wa(NR),Xt=Cq;var Nq=Math.floor,Oq=Math.random;function Lq(t,e){return t+Nq(Oq()*(e-t+1))}var OR=Lq;var Uq=Math.ceil,Bq=Math.max;function Vq(t,e,r,n){for(var i=-1,o=Bq(Uq((e-t)/(r||1)),0),s=Array(o);o--;)s[n?o:++i]=t,t+=r;return s}var LR=Vq;function Wq(t){return function(e,r,n){return n&&typeof n!="number"&&Io(e,r,n)&&(r=n=void 0),e=Ca(e),r===void 0?(r=e,e=0):r=Ca(r),n=n===void 0?e<r?1:-1:Ca(n),LR(e,r,n,t)}}var UR=Wq;var Hq=UR(),rs=Hq;function $q(t,e,r){return(r?Io(t,e,r):e===void 0)?e=1:e=kp(e),DR(Rn(t),e)}var Xx=$q;function jq(t,e){var r=-1,n=t.length,i=n-1;for(e=e===void 0?n:e;++r<e;){var o=OR(r,i),s=t[o];t[o]=t[r],t[r]=s}return t.length=e,t}var nf=jq;function qq(t){return nf(zi(t))}var BR=qq;function zq(t){return nf(_R(t))}var VR=zq;function Gq(t){var e=Le(t)?BR:VR;return e(t)}var Jx=Gq;var Kq=Wa(function(t,e){if(t==null)return[];var r=e.length;return r>1&&Io(t,e[0],e[1])?e=[]:r>2&&Io(e[0],e[1],e[2])&&(e=[e[0]]),AR(t,Ya(e,1),[])}),eS=Kq;var Zq=4294967295,Qq=Zq-1,Yq=Math.floor,Xq=Math.min;function Jq(t,e,r,n){var i=0,o=t==null?0:t.length;if(o===0)return 0;e=r(e);for(var s=e!==e,l=e===null,u=Bt(e),p=e===void 0;i<o;){var d=Yq((i+o)/2),m=r(t[d]),g=m!==void 0,x=m===null,v=m===m,b=Bt(m);if(s)var I=n||v;else p?I=v&&(n||g):l?I=v&&g&&(n||!x):u?I=v&&g&&!x&&(n||!b):x||b?I=!1:I=n?m<=e:m<e;I?i=d+1:o=d}return Xq(o,Qq)}var WR=Jq;function ez(t,e,r){return WR(t,e,mr(r,2))}var tS=ez;function tz(t,e){return t&&t.length?RR(t,mr(e,2)):0}var of=tz;var rz=1/0,nz=Xi&&1/es(new Xi([,-0]))[1]==rz?function(t){return new Xi(t)}:Ip,HR=nz;var iz=200;function oz(t,e,r){var n=-1,i=HE,o=t.length,s=!0,l=[],u=l;if(r)s=!1,i=yR;else if(o>=iz){var p=e?null:HR(t);if(p)return es(p);s=!1,i=Kp,u=new Gp}else u=e?[]:l;e:for(;++n<o;){var d=t[n],m=e?e(d):d;if(d=r||d!==0?d:0,s&&m===m){for(var g=u.length;g--;)if(u[g]===m)continue e;e&&u.push(m),l.push(d)}else i(u,m,r)||(u!==l&&u.push(m),l.push(d))}return l}var af=oz;function az(t){return t&&t.length?af(t):[]}var Ti=az;function sz(t,e){return e=typeof e=="function"?e:void 0,t&&t.length?af(t,void 0,e):[]}var Uc=sz;var cz=Math.max;function lz(t){if(!(t&&t.length))return[];var e=0;return t=$p(t,function(r){if(gR(r))return e=cz(r.length,e),!0}),Vp(e,function(r){return tn(t,Jp(r))})}var $R=lz;var uz=Wa($R),xt=uz;var sf=class{constructor(){this.commands={clipboardCopy:void 0,toggleLineComment:void 0,indentLine:void 0,outdentLine:void 0,rename:void 0,quickFix:void 0,revealDefinition:void 0,revealTypeDefinition:void 0,showHover:void 0,showDebugHover:void 0,extractVariable:void 0,fold:void 0,highlight:{acceptsLocation:!0},unfold:void 0,showReferences:void 0,insertLineAfter:void 0}}};var Bc=class{constructor(){this.clipboardContents=""}async readText(){return this.clipboardContents}async writeText(e){this.clipboardContents=e}};var Wt=class{constructor(){this.listeners=[];this.notifyListeners=(...e)=>{this.listeners.forEach(r=>r(...e))};this.registerListener=this.registerListener.bind(this)}registerListener(e){return this.listeners.push(e),{dispose:()=>{Xt(this.listeners,e)}}}};var cf={tokenHatSplittingMode:{preserveCase:!1,lettersToPreserve:[],symbolsToPreserve:[]},wordSeparators:["_"],decorationDebounceDelayMs:50,experimental:{snippetsDir:void 0,hatStability:"balanced",keyboardTargetFollowsSelection:!1},commandHistory:!1,debug:!1};var Vc=class{constructor(){this.notifier=new Wt;this.mocks={...cf};this.scopes=[];this.onDidChangeConfiguration=this.notifier.registerListener;this.onDidChangeConfiguration=this.onDidChangeConfiguration.bind(this)}getOwnConfiguration(e,r){if(r!=null){for(let{scope:n,values:i}of this.scopes)if(fz(n,r))return Co(i,e)??Co(this.mocks,e)}return Co(this.mocks,e)}mockConfiguration(e,r){this.mocks[e]=r,this.notifier.notifyListeners()}mockConfigurationScope(e,r,n=!1){this.scopes.push({scope:e,values:r}),n||this.notifier.notifyListeners()}};function fz(t,e){return t.languageId===e.languageId}var lf={hideInferenceWarning:!1,tutorialProgress:{}};var Wc=class{constructor(){this.data={...lf}}get(e){return this.data[e]}set(e,r){return this.data[e]=r,Promise.resolve()}};var Hc=class{async showMessage(e,r,n,...i){}};var uf=class{constructor(){this.configuration=new Vc;this.messages=new Hc;this.globalState=new Wc;this.clipboard=new Bc;this.capabilities=new sf;this.runMode="test";this.cursorlessVersion="0.0.0";this.workspaceFolders=void 0;this.disposables=[];this.quickPickReturnValue=void 0;this.onDidOpenTextDocument=ns;this.onDidCloseTextDocument=ns;this.onDidChangeActiveTextEditor=ns;this.onDidChangeVisibleTextEditors=ns;this.onDidChangeTextEditorSelection=ns;this.onDidChangeTextEditorVisibleRanges=ns}async flashRanges(e){}async setHighlightRanges(e,r,n){}mockAssetsRoot(e){this.assetsRoot_=e}get assetsRoot(){if(this.assetsRoot_==null)throw Error("Field `assetsRoot` has not yet been mocked");return this.assetsRoot_}get activeTextEditor(){throw Error("Not implemented")}get activeEditableTextEditor(){throw Error("Not implemented")}get visibleTextEditors(){throw Error("Not implemented")}getEditableTextEditor(e){throw Error("Not implemented")}findInDocument(e,r){throw Error("Not implemented")}findInWorkspace(e){throw Error("Not implemented")}openTextDocument(e){throw Error("Not implemented")}openUntitledTextDocument(e){throw Error("Not implemented")}setQuickPickReturnValue(e){this.quickPickReturnValue=e}async showQuickPick(e,r){return this.quickPickReturnValue}showInputBox(e){throw Error("Not implemented")}executeCommand(e,...r){throw new Error("Method not implemented.")}onDidChangeTextDocument(e){throw Error("Not implemented")}disposeOnExit(...e){return this.disposables.push(...e),()=>Xt(this.disposables,...e)}exit(){this.disposables.forEach(e=>e.dispose())}};function ns(){return{dispose(){}}}var se=class t{constructor(e,r){this.line=e,this.character=r}isEqual(e){return this.line===e.line&&this.character===e.character}isBefore(e){return this.line<e.line?!0:this.line>e.line?!1:this.character<e.character}isAfter(e){return this.line>e.line?!0:this.line<e.line?!1:this.character>e.character}isBeforeOrEqual(e){return this.isEqual(e)||this.isBefore(e)}isAfterOrEqual(e){return this.isEqual(e)||this.isAfter(e)}compareTo(e){return this.isBefore(e)?-1:this.isAfter(e)?1:0}with(e,r){return new t(e??this.line,r??this.character)}translate(e,r){return new t(this.line+(e??0),this.character+(r??0))}toEmptyRange(){return new H(this,this)}concise(){return`${this.line}:${this.character}`}toString(){return this.concise()}};function jR(t,e,r){return t.positionAt(t.offsetAt(e)+r)}var H=class t{constructor(...e){let[r,n]=e.length===2?e:[new se(e[0],e[1]),new se(e[2],e[3])];r.isBefore(n)?(this.start=r,this.end=n):(this.start=n,this.end=r)}get isEmpty(){return this.start.isEqual(this.end)}get isSingleLine(){return this.start.line===this.end.line}isRangeEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}contains(e){let[r,n]=e instanceof se?[e,e]:[e.start,e.end];return r.isAfterOrEqual(this.start)&&n.isBeforeOrEqual(this.end)}intersection(e){let r=this.start.isAfter(e.start)?this.start:e.start,n=this.end.isBefore(e.end)?this.end:e.end;return r.isBeforeOrEqual(n)?new t(r,n):void 0}union(e){return new t(this.start.isBefore(e.start)?this.start:e.start,this.end.isAfter(e.end)?this.end:e.end)}with(e,r){return new t(e??this.start,r??this.end)}toSelection(e){return e?new ge(this.end,this.start):new ge(this.start,this.end)}concise(){return`${this.start.concise()}-${this.end.concise()}`}toString(){return this.concise()}};function dz(t){let{source:e,flags:r}=t;return new RegExp(`(${e})$`,r.replace("m",""))}function mz(t){let{source:e,flags:r}=t;return new RegExp(`^(${e})`,r.replace("m",""))}function qR(t){let e=new Map;function r(n){let i=e.get(n);return i==null&&(i=t(n),e.set(n,i)),i}return r}var pf=qR(dz),ff=qR(mz);function nn(t,e,r){return e.lastIndex=0,Array.from(t.matchAll(e),r)}function $c(t,e){return t.lastIndex=0,t.test(e)}function zR(t,e){return t.lastIndex=0,e.match(t)}function jc(t,e){return nn(t,e,r=>({index:r.index,text:r[0]}))}var is=class{constructor(e){this.original=e;this.configuration=e.configuration,this.globalState=e.globalState,this.clipboard=e.clipboard,this.messages=e.messages,this.capabilities=e.capabilities}flashRanges(e){return this.original.flashRanges(e)}setHighlightRanges(e,r,n){return this.original.setHighlightRanges(e,r,n)}onDidOpenTextDocument(e,r,n){return this.original.onDidOpenTextDocument(e,r,n)}onDidCloseTextDocument(e,r,n){return this.original.onDidCloseTextDocument(e,r,n)}onDidChangeActiveTextEditor(e,r,n){return this.original.onDidChangeActiveTextEditor(e,r,n)}onDidChangeVisibleTextEditors(e,r,n){return this.original.onDidChangeVisibleTextEditors(e,r,n)}onDidChangeTextEditorSelection(e,r,n){return this.original.onDidChangeTextEditorSelection(e,r,n)}onDidChangeTextEditorVisibleRanges(e,r,n){return this.original.onDidChangeTextEditorVisibleRanges(e,r,n)}get activeTextEditor(){return this.original.activeTextEditor}get activeEditableTextEditor(){return this.original.activeEditableTextEditor}get visibleTextEditors(){return this.original.visibleTextEditors}get cursorlessVersion(){return this.original.cursorlessVersion}get assetsRoot(){return this.original.assetsRoot}get runMode(){return this.original.runMode}get workspaceFolders(){return this.original.workspaceFolders}findInDocument(e,r){return this.original.findInDocument(e,r)}findInWorkspace(e){return this.original.findInWorkspace(e)}openTextDocument(e){return this.original.openTextDocument(e)}openUntitledTextDocument(e){return this.original.openUntitledTextDocument(e)}showQuickPick(e,r){return this.original.showQuickPick(e,r)}showInputBox(e){return this.original.showInputBox(e)}getEditableTextEditor(e){return this.original.getEditableTextEditor(e)}executeCommand(e,...r){return this.original.executeCommand(e,...r)}onDidChangeTextDocument(e){return this.original.onDidChangeTextDocument(e)}disposeOnExit(...e){return this.original.disposeOnExit(...e)}};var df=class extends is{constructor(r,n,i,o){super(r);this.fakeIde=n;this.isSilent=i;this.cursorlessSnippetsDir=o;this.messages=i?n.messages:r.messages,this.configuration=n.configuration,this.globalState=n.globalState,this.initializeConfiguration()}initializeConfiguration(){this.configuration.mockConfigurationScope({languageId:"css"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfigurationScope({languageId:"scss"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfigurationScope({languageId:"shellscript"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfiguration("experimental",{hatStability:this.configuration.getOwnConfiguration("experimental.hatStability"),snippetsDir:this.cursorlessSnippetsDir,keyboardTargetFollowsSelection:!1})}flashRanges(r){return this.isSilent?this.fakeIde.flashRanges(r):super.flashRanges(r)}setHighlightRanges(r,n,i){return this.isSilent?this.fakeIde.setHighlightRanges(r,n,i):super.setHighlightRanges(r,n,i)}async showQuickPick(r,n){return this.isSilent?this.fakeIde.showQuickPick(r,n):super.showQuickPick(r,n)}};function qc(t,e,r,...n){return t.showMessage("warning",e,r,...n)}function ut(t,e,r,...n){return t.showMessage("error",e,r,...n)}var oe=(i=>(i[i.supported=0]="supported",i[i.supportedLegacy=1]="supportedLegacy",i[i.unsupported=2]="unsupported",i[i.notApplicable=3]="notApplicable",i))(oe||{});var{supported:rt,unsupported:eue,notApplicable:GR}=oe,rS={ifStatement:rt,"comment.line":rt,"comment.block":rt,"string.singleLine":rt,"textFragment.comment.line":rt,"textFragment.comment.block":rt,"textFragment.string.singleLine":rt,class:rt,className:rt,namedFunction:rt,"name.function":rt,"name.class":rt,"name.field":rt,functionName:rt,"name.argument.formal":rt,"name.argument.formal.iteration":rt,"name.variable":rt,"value.variable":rt,"name.assignment":rt,"value.assignment":rt,"statement.class":rt,"type.class":rt,"type.field":rt,"value.argument.formal":GR,"value.argument.formal.iteration":GR};var{supported:iue,unsupported:oue,notApplicable:aue}=oe;var{supported:KR,unsupported:pue,notApplicable:fue}=oe,hz={...rS,"value.argument.formal":KR,"value.argument.formal.iteration":KR};var{supported:gue,unsupported:yue,notApplicable:xue}=oe;var{supported:mf,unsupported:gz,notApplicable:bue}=oe,nS={"comment.block":mf,"string.singleLine":mf,"name.iteration.block":mf,"name.iteration.document":mf,"comment.line":gz};var{supported:Rue,unsupported:kue,notApplicable:Pue}=oe;var{supported:Iue,notApplicable:Fue}=oe;var{supported:Lue,notApplicable:Uue}=oe;var{supported:z,unsupported:Hue,notApplicable:on}=oe,iS={list:z,map:z,ifStatement:z,regularExpression:z,switchStatementSubject:z,fieldAccess:z,"textFragment.string.singleLine":z,"textFragment.string.multiLine":z,"textFragment.comment.line":z,"textFragment.comment.block":z,statement:z,"statement.iteration.document":z,"statement.iteration.block":z,class:z,className:z,anonymousFunction:z,namedFunction:z,"namedFunction.iteration.document":z,"namedFunction.method":z,"namedFunction.method.iteration.class":z,"namedFunction.constructor":z,functionName:z,"functionName.iteration.document":z,"functionName.method":z,"functionName.method.iteration.class":z,"functionName.constructor":z,functionCall:z,"functionCall.constructor":z,functionCallee:z,"functionCallee.constructor":z,"argument.actual":z,"argument.actual.iteration":z,"argument.actual.method":z,"argument.actual.method.iteration":z,"argument.actual.constructor":z,"argument.actual.constructor.iteration":z,"argument.formal":z,"argument.formal.iteration":z,"argument.formal.method":z,"argument.formal.method.iteration":z,"argument.formal.constructor":z,"argument.formal.constructor.iteration":z,"comment.line":z,"comment.block":z,"string.singleLine":z,"string.multiLine":z,"branch.if":z,"branch.if.iteration":z,"branch.try":z,"branch.switchCase":z,"branch.switchCase.iteration":z,"branch.ternary":z,"condition.if":z,"condition.while":z,"condition.doWhile":z,"condition.for":z,"condition.ternary":z,"condition.switchCase":z,"name.argument.formal":z,"name.argument.formal.iteration":z,"name.argument.formal.method":z,"name.argument.formal.method.iteration":z,"name.argument.formal.constructor":z,"name.argument.formal.constructor.iteration":z,"name.foreach":z,"name.assignment":z,"name.assignment.pattern":z,"name.variable":z,"name.variable.pattern":z,"name.function":z,"name.method":z,"name.constructor":z,"name.class":z,"name.field":z,"key.mapPair":z,"key.mapPair.iteration":z,"value.argument.formal":z,"value.argument.formal.iteration":z,"value.argument.formal.method":z,"value.argument.formal.method.iteration":z,"value.argument.formal.constructor":z,"value.argument.formal.constructor.iteration":z,"value.mapPair":z,"value.mapPair.iteration":z,"value.assignment":z,"value.variable":z,"value.foreach":z,"value.return":z,"value.return.lambda":z,"value.field":z},oS={element:z,tags:z,startTag:z,endTag:z,attribute:z,"key.attribute":z,"value.attribute":z},yz={...iS,...oS,"type.variable":on,"type.argument.formal":on,"type.argument.formal.iteration":on,"type.argument.formal.method":on,"type.argument.formal.method.iteration":on,"type.argument.formal.constructor":on,"type.argument.formal.constructor.iteration":on,"type.return":on,"type.field":on,"type.foreach":on,"type.interface":on,command:on};var{supported:aS}=oe,zc={"comment.line":aS,"comment.block":aS,map:aS};var{supported:Que,unsupported:Yue,notApplicable:Xue}=oe,xz={...zc};var{supported:npe,unsupported:ipe,notApplicable:ope}=oe,Sz={...zc};var{supported:lpe,unsupported:upe,notApplicable:ppe}=oe;var{supported:hpe,notApplicable:gpe}=oe;var{supported:Tpe,unsupported:vpe,notApplicable:bpe}=oe;var{supported:Rpe,unsupported:kpe,notApplicable:Ppe}=oe;var{supported:Ipe,notApplicable:Fpe}=oe;var{supported:Lpe,unsupported:Upe,notApplicable:Bpe}=oe;var{supported:$pe,unsupported:jpe,notApplicable:qpe}=oe;var{supported:Zpe,unsupported:Qpe,notApplicable:Ype}=oe;var{supported:tfe,unsupported:rfe,notApplicable:nfe}=oe;var{supported:Gc,unsupported:cfe,notApplicable:lfe}=oe,Tz={...nS,"namedFunction.iteration":Gc,"namedFunction.iteration.document":Gc,"functionName.iteration":Gc,"functionName.iteration.document":Gc,"comment.line":Gc};var{supported:dfe}=oe;var{supported:Jt}=oe,sS={...iS,"name.field":Jt,"type.argument.formal":Jt,"type.argument.formal.iteration":Jt,"type.argument.formal.method":Jt,"type.argument.formal.method.iteration":Jt,"type.argument.formal.constructor":Jt,"type.argument.formal.constructor.iteration":Jt,"type.alias":Jt,"type.cast":Jt,"type.field":Jt,"type.interface":Jt,"type.return":Jt,"type.variable":Jt,"value.field":Jt,"value.typeAlias":Jt};var{supported:wfe,unsupported:_fe,notApplicable:Efe}=oe,vz={...sS,...oS};var{supported:Mfe,unsupported:Afe,notApplicable:Dfe}=oe;var{supported:Nfe,unsupported:Ofe,notApplicable:Lfe}=oe;var os=["that","source","instanceReference","keyboard"];var ge=class extends H{get isReversed(){return this.active.isBefore(this.anchor)}constructor(...e){let[r,n]=e.length===2?e:[new se(e[0],e[1]),new se(e[2],e[3])];super(r,n),this.anchor=r,this.active=n}isEqual(e){return this.anchor.isEqual(e.anchor)&&this.active.isEqual(e.active)}concise(){return`${this.anchor.concise()}->${this.active.concise()}`}toString(){return this.concise()}};function QR({line:t,character:e}){return new se(t,e)}function hf({start:t,end:e}){return new H(QR(t),QR(e))}function an(t){return{type:"line",start:t.start.line,end:t.end.line}}function er({start:t,end:e}){return{type:"character",start:t,end:e}}function Kc(t){return{start:gf(t.start),end:gf(t.end)}}function YR(t){return{anchor:gf(t.anchor),active:gf(t.active)}}function gf({line:t,character:e}){return{line:t,character:e}}function hk(t){return typeof t>"u"||t===null}function bz(t){return typeof t=="object"&&t!==null}function wz(t){return Array.isArray(t)?t:hk(t)?[]:[t]}function _z(t,e){var r,n,i,o;if(e)for(o=Object.keys(e),r=0,n=o.length;r<n;r+=1)i=o[r],t[i]=e[i];return t}function Ez(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}function Rz(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var kz=hk,Pz=bz,Mz=wz,Az=Ez,Dz=Rz,Iz=_z,St={isNothing:kz,isObject:Pz,toArray:Mz,repeat:Az,isNegativeZero:Dz,extend:Iz};function gk(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}function Qc(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=gk(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Qc.prototype=Object.create(Error.prototype);Qc.prototype.constructor=Qc;Qc.prototype.toString=function(e){return this.name+": "+gk(this,e)};var hr=Qc;function cS(t,e,r,n,i){var o="",s="",l=Math.floor(i/2)-1;return n-e>l&&(o=" ... ",e=n-l+o.length),r-n>l&&(s=" ...",r=n+l-s.length),{str:o+t.slice(e,r).replace(/\t/g,"\u2192")+s,pos:n-e+o.length}}function lS(t,e){return St.repeat(" ",e-t.length)+t}function Fz(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],o,s=-1;o=r.exec(t.buffer);)i.push(o.index),n.push(o.index+o[0].length),t.position<=o.index&&s<0&&(s=n.length-2);s<0&&(s=n.length-1);var l="",u,p,d=Math.min(t.line+e.linesAfter,i.length).toString().length,m=e.maxLength-(e.indent+d+3);for(u=1;u<=e.linesBefore&&!(s-u<0);u++)p=cS(t.buffer,n[s-u],i[s-u],t.position-(n[s]-n[s-u]),m),l=St.repeat(" ",e.indent)+lS((t.line-u+1).toString(),d)+" | "+p.str+`
`+l;for(p=cS(t.buffer,n[s],i[s],t.position,m),l+=St.repeat(" ",e.indent)+lS((t.line+1).toString(),d)+" | "+p.str+`
`,l+=St.repeat("-",e.indent+d+3+p.pos)+`^
`,u=1;u<=e.linesAfter&&!(s+u>=i.length);u++)p=cS(t.buffer,n[s+u],i[s+u],t.position-(n[s]-n[s+u]),m),l+=St.repeat(" ",e.indent)+lS((t.line+u+1).toString(),d)+" | "+p.str+`
`;return l.replace(/\n$/,"")}var Cz=Fz,Nz=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],Oz=["scalar","sequence","mapping"];function Lz(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}function Uz(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(Nz.indexOf(r)===-1)throw new hr('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=Lz(e.styleAliases||null),Oz.indexOf(this.kind)===-1)throw new hr('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var Ft=Uz;function ek(t,e){var r=[];return t[e].forEach(function(n){var i=r.length;r.forEach(function(o,s){o.tag===n.tag&&o.kind===n.kind&&o.multi===n.multi&&(i=s)}),r[i]=n}),r}function Bz(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}function pS(t){return this.extend(t)}pS.prototype.extend=function(e){var r=[],n=[];if(e instanceof Ft)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new hr("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(o){if(!(o instanceof Ft))throw new hr("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new hr("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new hr("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(o){if(!(o instanceof Ft))throw new hr("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(pS.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=ek(i,"implicit"),i.compiledExplicit=ek(i,"explicit"),i.compiledTypeMap=Bz(i.compiledImplicit,i.compiledExplicit),i};var Vz=pS,Wz=new Ft("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),Hz=new Ft("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),$z=new Ft("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),jz=new Vz({explicit:[Wz,Hz,$z]});function qz(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function zz(){return null}function Gz(t){return t===null}var Kz=new Ft("tag:yaml.org,2002:null",{kind:"scalar",resolve:qz,construct:zz,predicate:Gz,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function Zz(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function Qz(t){return t==="true"||t==="True"||t==="TRUE"}function Yz(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var Xz=new Ft("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Zz,construct:Qz,predicate:Yz,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function Jz(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function eG(t){return 48<=t&&t<=55}function tG(t){return 48<=t&&t<=57}function rG(t){if(t===null)return!1;var e=t.length,r=0,n=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!Jz(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!eG(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!tG(t.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function nG(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}function iG(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!St.isNegativeZero(t)}var oG=new Ft("tag:yaml.org,2002:int",{kind:"scalar",resolve:rG,construct:nG,predicate:iG,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),aG=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function sG(t){return!(t===null||!aG.test(t)||t[t.length-1]==="_")}function cG(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}var lG=/^[-+]?[0-9]+e/;function uG(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(St.isNegativeZero(t))return"-0.0";return r=t.toString(10),lG.test(r)?r.replace("e",".e"):r}function pG(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||St.isNegativeZero(t))}var fG=new Ft("tag:yaml.org,2002:float",{kind:"scalar",resolve:sG,construct:cG,predicate:pG,represent:uG,defaultStyle:"lowercase"}),dG=jz.extend({implicit:[Kz,Xz,oG,fG]}),mG=dG,yk=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),xk=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function hG(t){return t===null?!1:yk.exec(t)!==null||xk.exec(t)!==null}function gG(t){var e,r,n,i,o,s,l,u=0,p=null,d,m,g;if(e=yk.exec(t),e===null&&(e=xk.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(o=+e[4],s=+e[5],l=+e[6],e[7]){for(u=e[7].slice(0,3);u.length<3;)u+="0";u=+u}return e[9]&&(d=+e[10],m=+(e[11]||0),p=(d*60+m)*6e4,e[9]==="-"&&(p=-p)),g=new Date(Date.UTC(r,n,i,o,s,l,u)),p&&g.setTime(g.getTime()-p),g}function yG(t){return t.toISOString()}var xG=new Ft("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:hG,construct:gG,instanceOf:Date,represent:yG});function SG(t){return t==="<<"||t===null}var TG=new Ft("tag:yaml.org,2002:merge",{kind:"scalar",resolve:SG}),gS=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function vG(t){if(t===null)return!1;var e,r,n=0,i=t.length,o=gS;for(r=0;r<i;r++)if(e=o.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}function bG(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,o=gS,s=0,l=[];for(e=0;e<i;e++)e%4===0&&e&&(l.push(s>>16&255),l.push(s>>8&255),l.push(s&255)),s=s<<6|o.indexOf(n.charAt(e));return r=i%4*6,r===0?(l.push(s>>16&255),l.push(s>>8&255),l.push(s&255)):r===18?(l.push(s>>10&255),l.push(s>>2&255)):r===12&&l.push(s>>4&255),new Uint8Array(l)}function wG(t){var e="",r=0,n,i,o=t.length,s=gS;for(n=0;n<o;n++)n%3===0&&n&&(e+=s[r>>18&63],e+=s[r>>12&63],e+=s[r>>6&63],e+=s[r&63]),r=(r<<8)+t[n];return i=o%3,i===0?(e+=s[r>>18&63],e+=s[r>>12&63],e+=s[r>>6&63],e+=s[r&63]):i===2?(e+=s[r>>10&63],e+=s[r>>4&63],e+=s[r<<2&63],e+=s[64]):i===1&&(e+=s[r>>2&63],e+=s[r<<4&63],e+=s[64],e+=s[64]),e}function _G(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var EG=new Ft("tag:yaml.org,2002:binary",{kind:"scalar",resolve:vG,construct:bG,predicate:_G,represent:wG}),RG=Object.prototype.hasOwnProperty,kG=Object.prototype.toString;function PG(t){if(t===null)return!0;var e=[],r,n,i,o,s,l=t;for(r=0,n=l.length;r<n;r+=1){if(i=l[r],s=!1,kG.call(i)!=="[object Object]")return!1;for(o in i)if(RG.call(i,o))if(!s)s=!0;else return!1;if(!s)return!1;if(e.indexOf(o)===-1)e.push(o);else return!1}return!0}function MG(t){return t!==null?t:[]}var AG=new Ft("tag:yaml.org,2002:omap",{kind:"sequence",resolve:PG,construct:MG}),DG=Object.prototype.toString;function IG(t){if(t===null)return!0;var e,r,n,i,o,s=t;for(o=new Array(s.length),e=0,r=s.length;e<r;e+=1){if(n=s[e],DG.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;o[e]=[i[0],n[i[0]]]}return!0}function FG(t){if(t===null)return[];var e,r,n,i,o,s=t;for(o=new Array(s.length),e=0,r=s.length;e<r;e+=1)n=s[e],i=Object.keys(n),o[e]=[i[0],n[i[0]]];return o}var CG=new Ft("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:IG,construct:FG}),NG=Object.prototype.hasOwnProperty;function OG(t){if(t===null)return!0;var e,r=t;for(e in r)if(NG.call(r,e)&&r[e]!==null)return!1;return!0}function LG(t){return t!==null?t:{}}var UG=new Ft("tag:yaml.org,2002:set",{kind:"mapping",resolve:OG,construct:LG}),yS=mG.extend({implicit:[xG,TG],explicit:[EG,AG,CG,UG]}),eo=Object.prototype.hasOwnProperty,yf=1,Sk=2,Tk=3,xf=4,uS=1,BG=2,tk=3,VG=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,WG=/[\x85\u2028\u2029]/,HG=/[,\[\]\{\}]/,vk=/^(?:!|!!|![a-z\-]+!)$/i,bk=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function rk(t){return Object.prototype.toString.call(t)}function Hn(t){return t===10||t===13}function Uo(t){return t===9||t===32}function gr(t){return t===9||t===32||t===10||t===13}function ss(t){return t===44||t===91||t===93||t===123||t===125}function $G(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function jG(t){return t===120?2:t===117?4:t===85?8:0}function qG(t){return 48<=t&&t<=57?t-48:-1}function nk(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}function zG(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var wk=new Array(256),_k=new Array(256);for(Lo=0;Lo<256;Lo++)wk[Lo]=nk(Lo)?1:0,_k[Lo]=nk(Lo);var Lo;function GG(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||yS,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Ek(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=Cz(r),new hr(e,r)}function ae(t,e){throw Ek(t,e)}function Sf(t,e){t.onWarning&&t.onWarning.call(null,Ek(t,e))}var ik={YAML:function(e,r,n){var i,o,s;e.version!==null&&ae(e,"duplication of %YAML directive"),n.length!==1&&ae(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&ae(e,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),s=parseInt(i[2],10),o!==1&&ae(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=s<2,s!==1&&s!==2&&Sf(e,"unsupported YAML version of the document")},TAG:function(e,r,n){var i,o;n.length!==2&&ae(e,"TAG directive accepts exactly two arguments"),i=n[0],o=n[1],vk.test(i)||ae(e,"ill-formed tag handle (first argument) of the TAG directive"),eo.call(e.tagMap,i)&&ae(e,'there is a previously declared suffix for "'+i+'" tag handle'),bk.test(o)||ae(e,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{ae(e,"tag prefix is malformed: "+o)}e.tagMap[i]=o}};function Ji(t,e,r,n){var i,o,s,l;if(e<r){if(l=t.input.slice(e,r),n)for(i=0,o=l.length;i<o;i+=1)s=l.charCodeAt(i),s===9||32<=s&&s<=1114111||ae(t,"expected valid JSON character");else VG.test(l)&&ae(t,"the stream contains non-printable characters");t.result+=l}}function ok(t,e,r,n){var i,o,s,l;for(St.isObject(r)||ae(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),s=0,l=i.length;s<l;s+=1)o=i[s],eo.call(e,o)||(e[o]=r[o],n[o]=!0)}function cs(t,e,r,n,i,o,s,l,u){var p,d;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),p=0,d=i.length;p<d;p+=1)Array.isArray(i[p])&&ae(t,"nested arrays are not supported inside keys"),typeof i=="object"&&rk(i[p])==="[object Object]"&&(i[p]="[object Object]");if(typeof i=="object"&&rk(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(p=0,d=o.length;p<d;p+=1)ok(t,e,o[p],r);else ok(t,e,o,r);else!t.json&&!eo.call(r,i)&&eo.call(e,i)&&(t.line=s||t.line,t.lineStart=l||t.lineStart,t.position=u||t.position,ae(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):e[i]=o,delete r[i];return e}function xS(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):ae(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function ht(t,e,r){for(var n=0,i=t.input.charCodeAt(t.position);i!==0;){for(;Uo(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(Hn(i))for(xS(t),i=t.input.charCodeAt(t.position),n++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return r!==-1&&n!==0&&t.lineIndent<r&&Sf(t,"deficient indentation"),n}function bf(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||gr(r)))}function SS(t,e){e===1?t.result+=" ":e>1&&(t.result+=St.repeat(`
`,e-1))}function KG(t,e,r){var n,i,o,s,l,u,p,d,m=t.kind,g=t.result,x;if(x=t.input.charCodeAt(t.position),gr(x)||ss(x)||x===35||x===38||x===42||x===33||x===124||x===62||x===39||x===34||x===37||x===64||x===96||(x===63||x===45)&&(i=t.input.charCodeAt(t.position+1),gr(i)||r&&ss(i)))return!1;for(t.kind="scalar",t.result="",o=s=t.position,l=!1;x!==0;){if(x===58){if(i=t.input.charCodeAt(t.position+1),gr(i)||r&&ss(i))break}else if(x===35){if(n=t.input.charCodeAt(t.position-1),gr(n))break}else{if(t.position===t.lineStart&&bf(t)||r&&ss(x))break;if(Hn(x))if(u=t.line,p=t.lineStart,d=t.lineIndent,ht(t,!1,-1),t.lineIndent>=e){l=!0,x=t.input.charCodeAt(t.position);continue}else{t.position=s,t.line=u,t.lineStart=p,t.lineIndent=d;break}}l&&(Ji(t,o,s,!1),SS(t,t.line-u),o=s=t.position,l=!1),Uo(x)||(s=t.position+1),x=t.input.charCodeAt(++t.position)}return Ji(t,o,s,!1),t.result?!0:(t.kind=m,t.result=g,!1)}function ZG(t,e){var r,n,i;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(Ji(t,n,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)n=t.position,t.position++,i=t.position;else return!0;else Hn(r)?(Ji(t,n,i,!0),SS(t,ht(t,!1,e)),n=i=t.position):t.position===t.lineStart&&bf(t)?ae(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);ae(t,"unexpected end of the stream within a single quoted scalar")}function QG(t,e){var r,n,i,o,s,l;if(l=t.input.charCodeAt(t.position),l!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(l=t.input.charCodeAt(t.position))!==0;){if(l===34)return Ji(t,r,t.position,!0),t.position++,!0;if(l===92){if(Ji(t,r,t.position,!0),l=t.input.charCodeAt(++t.position),Hn(l))ht(t,!1,e);else if(l<256&&wk[l])t.result+=_k[l],t.position++;else if((s=jG(l))>0){for(i=s,o=0;i>0;i--)l=t.input.charCodeAt(++t.position),(s=$G(l))>=0?o=(o<<4)+s:ae(t,"expected hexadecimal character");t.result+=zG(o),t.position++}else ae(t,"unknown escape sequence");r=n=t.position}else Hn(l)?(Ji(t,r,n,!0),SS(t,ht(t,!1,e)),r=n=t.position):t.position===t.lineStart&&bf(t)?ae(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}ae(t,"unexpected end of the stream within a double quoted scalar")}function YG(t,e){var r=!0,n,i,o,s=t.tag,l,u=t.anchor,p,d,m,g,x,v=Object.create(null),b,I,M,U;if(U=t.input.charCodeAt(t.position),U===91)d=93,x=!1,l=[];else if(U===123)d=125,x=!0,l={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=l),U=t.input.charCodeAt(++t.position);U!==0;){if(ht(t,!0,e),U=t.input.charCodeAt(t.position),U===d)return t.position++,t.tag=s,t.anchor=u,t.kind=x?"mapping":"sequence",t.result=l,!0;r?U===44&&ae(t,"expected the node content, but found ','"):ae(t,"missed comma between flow collection entries"),I=b=M=null,m=g=!1,U===63&&(p=t.input.charCodeAt(t.position+1),gr(p)&&(m=g=!0,t.position++,ht(t,!0,e))),n=t.line,i=t.lineStart,o=t.position,ls(t,e,yf,!1,!0),I=t.tag,b=t.result,ht(t,!0,e),U=t.input.charCodeAt(t.position),(g||t.line===n)&&U===58&&(m=!0,U=t.input.charCodeAt(++t.position),ht(t,!0,e),ls(t,e,yf,!1,!0),M=t.result),x?cs(t,l,v,I,b,M,n,i,o):m?l.push(cs(t,null,v,I,b,M,n,i,o)):l.push(b),ht(t,!0,e),U=t.input.charCodeAt(t.position),U===44?(r=!0,U=t.input.charCodeAt(++t.position)):r=!1}ae(t,"unexpected end of the stream within a flow collection")}function XG(t,e){var r,n,i=uS,o=!1,s=!1,l=e,u=0,p=!1,d,m;if(m=t.input.charCodeAt(t.position),m===124)n=!1;else if(m===62)n=!0;else return!1;for(t.kind="scalar",t.result="";m!==0;)if(m=t.input.charCodeAt(++t.position),m===43||m===45)uS===i?i=m===43?tk:BG:ae(t,"repeat of a chomping mode identifier");else if((d=qG(m))>=0)d===0?ae(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?ae(t,"repeat of an indentation width identifier"):(l=e+d-1,s=!0);else break;if(Uo(m)){do m=t.input.charCodeAt(++t.position);while(Uo(m));if(m===35)do m=t.input.charCodeAt(++t.position);while(!Hn(m)&&m!==0)}for(;m!==0;){for(xS(t),t.lineIndent=0,m=t.input.charCodeAt(t.position);(!s||t.lineIndent<l)&&m===32;)t.lineIndent++,m=t.input.charCodeAt(++t.position);if(!s&&t.lineIndent>l&&(l=t.lineIndent),Hn(m)){u++;continue}if(t.lineIndent<l){i===tk?t.result+=St.repeat(`
`,o?1+u:u):i===uS&&o&&(t.result+=`
`);break}for(n?Uo(m)?(p=!0,t.result+=St.repeat(`
`,o?1+u:u)):p?(p=!1,t.result+=St.repeat(`
`,u+1)):u===0?o&&(t.result+=" "):t.result+=St.repeat(`
`,u):t.result+=St.repeat(`
`,o?1+u:u),o=!0,s=!0,u=0,r=t.position;!Hn(m)&&m!==0;)m=t.input.charCodeAt(++t.position);Ji(t,r,t.position,!1)}return!0}function ak(t,e){var r,n=t.tag,i=t.anchor,o=[],s,l=!1,u;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),u=t.input.charCodeAt(t.position);u!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,ae(t,"tab characters must not be used in indentation")),!(u!==45||(s=t.input.charCodeAt(t.position+1),!gr(s))));){if(l=!0,t.position++,ht(t,!0,-1)&&t.lineIndent<=e){o.push(null),u=t.input.charCodeAt(t.position);continue}if(r=t.line,ls(t,e,Tk,!1,!0),o.push(t.result),ht(t,!0,-1),u=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&u!==0)ae(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return l?(t.tag=n,t.anchor=i,t.kind="sequence",t.result=o,!0):!1}function JG(t,e,r){var n,i,o,s,l,u,p=t.tag,d=t.anchor,m={},g=Object.create(null),x=null,v=null,b=null,I=!1,M=!1,U;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=m),U=t.input.charCodeAt(t.position);U!==0;){if(!I&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,ae(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),o=t.line,(U===63||U===58)&&gr(n))U===63?(I&&(cs(t,m,g,x,v,null,s,l,u),x=v=b=null),M=!0,I=!0,i=!0):I?(I=!1,i=!0):ae(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,U=n;else{if(s=t.line,l=t.lineStart,u=t.position,!ls(t,r,Sk,!1,!0))break;if(t.line===o){for(U=t.input.charCodeAt(t.position);Uo(U);)U=t.input.charCodeAt(++t.position);if(U===58)U=t.input.charCodeAt(++t.position),gr(U)||ae(t,"a whitespace character is expected after the key-value separator within a block mapping"),I&&(cs(t,m,g,x,v,null,s,l,u),x=v=b=null),M=!0,I=!1,i=!1,x=t.tag,v=t.result;else if(M)ae(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=p,t.anchor=d,!0}else if(M)ae(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=p,t.anchor=d,!0}if((t.line===o||t.lineIndent>e)&&(I&&(s=t.line,l=t.lineStart,u=t.position),ls(t,e,xf,!0,i)&&(I?v=t.result:b=t.result),I||(cs(t,m,g,x,v,b,s,l,u),x=v=b=null),ht(t,!0,-1),U=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&U!==0)ae(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return I&&cs(t,m,g,x,v,null,s,l,u),M&&(t.tag=p,t.anchor=d,t.kind="mapping",t.result=m),M}function eK(t){var e,r=!1,n=!1,i,o,s;if(s=t.input.charCodeAt(t.position),s!==33)return!1;if(t.tag!==null&&ae(t,"duplication of a tag property"),s=t.input.charCodeAt(++t.position),s===60?(r=!0,s=t.input.charCodeAt(++t.position)):s===33?(n=!0,i="!!",s=t.input.charCodeAt(++t.position)):i="!",e=t.position,r){do s=t.input.charCodeAt(++t.position);while(s!==0&&s!==62);t.position<t.length?(o=t.input.slice(e,t.position),s=t.input.charCodeAt(++t.position)):ae(t,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!gr(s);)s===33&&(n?ae(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),vk.test(i)||ae(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),s=t.input.charCodeAt(++t.position);o=t.input.slice(e,t.position),HG.test(o)&&ae(t,"tag suffix cannot contain flow indicator characters")}o&&!bk.test(o)&&ae(t,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{ae(t,"tag name is malformed: "+o)}return r?t.tag=o:eo.call(t.tagMap,i)?t.tag=t.tagMap[i]+o:i==="!"?t.tag="!"+o:i==="!!"?t.tag="tag:yaml.org,2002:"+o:ae(t,'undeclared tag handle "'+i+'"'),!0}function tK(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&ae(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!gr(r)&&!ss(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&ae(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function rK(t){var e,r,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!gr(n)&&!ss(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&ae(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),eo.call(t.anchorMap,r)||ae(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],ht(t,!0,-1),!0}function ls(t,e,r,n,i){var o,s,l,u=1,p=!1,d=!1,m,g,x,v,b,I;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=s=l=xf===r||Tk===r,n&&ht(t,!0,-1)&&(p=!0,t.lineIndent>e?u=1:t.lineIndent===e?u=0:t.lineIndent<e&&(u=-1)),u===1)for(;eK(t)||tK(t);)ht(t,!0,-1)?(p=!0,l=o,t.lineIndent>e?u=1:t.lineIndent===e?u=0:t.lineIndent<e&&(u=-1)):l=!1;if(l&&(l=p||i),(u===1||xf===r)&&(yf===r||Sk===r?b=e:b=e+1,I=t.position-t.lineStart,u===1?l&&(ak(t,I)||JG(t,I,b))||YG(t,b)?d=!0:(s&&XG(t,b)||ZG(t,b)||QG(t,b)?d=!0:rK(t)?(d=!0,(t.tag!==null||t.anchor!==null)&&ae(t,"alias node should not have any properties")):KG(t,b,yf===r)&&(d=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):u===0&&(d=l&&ak(t,I))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&ae(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),m=0,g=t.implicitTypes.length;m<g;m+=1)if(v=t.implicitTypes[m],v.resolve(t.result)){t.result=v.construct(t.result),t.tag=v.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(eo.call(t.typeMap[t.kind||"fallback"],t.tag))v=t.typeMap[t.kind||"fallback"][t.tag];else for(v=null,x=t.typeMap.multi[t.kind||"fallback"],m=0,g=x.length;m<g;m+=1)if(t.tag.slice(0,x[m].tag.length)===x[m].tag){v=x[m];break}v||ae(t,"unknown tag !<"+t.tag+">"),t.result!==null&&v.kind!==t.kind&&ae(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+v.kind+'", not "'+t.kind+'"'),v.resolve(t.result,t.tag)?(t.result=v.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):ae(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||d}function nK(t){var e=t.position,r,n,i,o=!1,s;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(s=t.input.charCodeAt(t.position))!==0&&(ht(t,!0,-1),s=t.input.charCodeAt(t.position),!(t.lineIndent>0||s!==37));){for(o=!0,s=t.input.charCodeAt(++t.position),r=t.position;s!==0&&!gr(s);)s=t.input.charCodeAt(++t.position);for(n=t.input.slice(r,t.position),i=[],n.length<1&&ae(t,"directive name must not be less than one character in length");s!==0;){for(;Uo(s);)s=t.input.charCodeAt(++t.position);if(s===35){do s=t.input.charCodeAt(++t.position);while(s!==0&&!Hn(s));break}if(Hn(s))break;for(r=t.position;s!==0&&!gr(s);)s=t.input.charCodeAt(++t.position);i.push(t.input.slice(r,t.position))}s!==0&&xS(t),eo.call(ik,n)?ik[n](t,n,i):Sf(t,'unknown document directive "'+n+'"')}if(ht(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,ht(t,!0,-1)):o&&ae(t,"directives end mark is expected"),ls(t,t.lineIndent-1,xf,!1,!0),ht(t,!0,-1),t.checkLineBreaks&&WG.test(t.input.slice(e,t.position))&&Sf(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&bf(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,ht(t,!0,-1));return}if(t.position<t.length-1)ae(t,"end of the stream or a document separator is expected");else return}function Rk(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new GG(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,ae(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)nK(r);return r.documents}function iK(t,e,r){e!==null&&typeof e=="object"&&typeof r>"u"&&(r=e,e=null);var n=Rk(t,r);if(typeof e!="function")return n;for(var i=0,o=n.length;i<o;i+=1)e(n[i])}function oK(t,e){var r=Rk(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new hr("expected a single document in the stream, but found more")}}var aK=iK,sK=oK,kk={loadAll:aK,load:sK},Pk=Object.prototype.toString,Mk=Object.prototype.hasOwnProperty,TS=65279,cK=9,Yc=10,lK=13,uK=32,pK=33,fK=34,fS=35,dK=37,mK=38,hK=39,gK=42,Ak=44,yK=45,Tf=58,xK=61,SK=62,TK=63,vK=64,Dk=91,Ik=93,bK=96,Fk=123,wK=124,Ck=125,Ht={};Ht[0]="\\0";Ht[7]="\\a";Ht[8]="\\b";Ht[9]="\\t";Ht[10]="\\n";Ht[11]="\\v";Ht[12]="\\f";Ht[13]="\\r";Ht[27]="\\e";Ht[34]='\\"';Ht[92]="\\\\";Ht[133]="\\N";Ht[160]="\\_";Ht[8232]="\\L";Ht[8233]="\\P";var _K=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],EK=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function RK(t,e){var r,n,i,o,s,l,u;if(e===null)return{};for(r={},n=Object.keys(e),i=0,o=n.length;i<o;i+=1)s=n[i],l=String(e[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),u=t.compiledTypeMap.fallback[s],u&&Mk.call(u.styleAliases,l)&&(l=u.styleAliases[l]),r[s]=l;return r}function kK(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else if(t<=4294967295)r="U",n=8;else throw new hr("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+St.repeat("0",n-e.length)+e}var PK=1,Xc=2;function MK(t){this.schema=t.schema||yS,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=St.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=RK(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?Xc:PK,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function sk(t,e){for(var r=St.repeat(" ",e),n=0,i=-1,o="",s,l=t.length;n<l;)i=t.indexOf(`
`,n),i===-1?(s=t.slice(n),n=l):(s=t.slice(n,i+1),n=i+1),s.length&&s!==`
`&&(o+=r),o+=s;return o}function dS(t,e){return`
`+St.repeat(" ",t.indent*e)}function AK(t,e){var r,n,i;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(i=t.implicitTypes[r],i.resolve(e))return!0;return!1}function vf(t){return t===uK||t===cK}function Jc(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==TS||65536<=t&&t<=1114111}function ck(t){return Jc(t)&&t!==TS&&t!==lK&&t!==Yc}function lk(t,e,r){var n=ck(t),i=n&&!vf(t);return(r?n:n&&t!==Ak&&t!==Dk&&t!==Ik&&t!==Fk&&t!==Ck)&&t!==fS&&!(e===Tf&&!i)||ck(e)&&!vf(e)&&t===fS||e===Tf&&i}function DK(t){return Jc(t)&&t!==TS&&!vf(t)&&t!==yK&&t!==TK&&t!==Tf&&t!==Ak&&t!==Dk&&t!==Ik&&t!==Fk&&t!==Ck&&t!==fS&&t!==mK&&t!==gK&&t!==pK&&t!==wK&&t!==xK&&t!==SK&&t!==hK&&t!==fK&&t!==dK&&t!==vK&&t!==bK}function IK(t){return!vf(t)&&t!==Tf}function Zc(t,e){var r=t.charCodeAt(e),n;return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function Nk(t){var e=/^\n* /;return e.test(t)}var Ok=1,mS=2,Lk=3,Uk=4,as=5;function FK(t,e,r,n,i,o,s,l){var u,p=0,d=null,m=!1,g=!1,x=n!==-1,v=-1,b=DK(Zc(t,0))&&IK(Zc(t,t.length-1));if(e||s)for(u=0;u<t.length;p>=65536?u+=2:u++){if(p=Zc(t,u),!Jc(p))return as;b=b&&lk(p,d,l),d=p}else{for(u=0;u<t.length;p>=65536?u+=2:u++){if(p=Zc(t,u),p===Yc)m=!0,x&&(g=g||u-v-1>n&&t[v+1]!==" ",v=u);else if(!Jc(p))return as;b=b&&lk(p,d,l),d=p}g=g||x&&u-v-1>n&&t[v+1]!==" "}return!m&&!g?b&&!s&&!i(t)?Ok:o===Xc?as:mS:r>9&&Nk(t)?as:s?o===Xc?as:mS:g?Uk:Lk}function CK(t,e,r,n,i){t.dump=function(){if(e.length===0)return t.quotingType===Xc?'""':"''";if(!t.noCompatMode&&(_K.indexOf(e)!==-1||EK.test(e)))return t.quotingType===Xc?'"'+e+'"':"'"+e+"'";var o=t.indent*Math.max(1,r),s=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),l=n||t.flowLevel>-1&&r>=t.flowLevel;function u(p){return AK(t,p)}switch(FK(e,l,t.indent,s,u,t.quotingType,t.forceQuotes&&!n,i)){case Ok:return e;case mS:return"'"+e.replace(/'/g,"''")+"'";case Lk:return"|"+uk(e,t.indent)+pk(sk(e,o));case Uk:return">"+uk(e,t.indent)+pk(sk(NK(e,s),o));case as:return'"'+OK(e)+'"';default:throw new hr("impossible error: invalid scalar style")}}()}function uk(t,e){var r=Nk(t)?String(e):"",n=t[t.length-1]===`
`,i=n&&(t[t.length-2]===`
`||t===`
`),o=i?"+":n?"":"-";return r+o+`
`}function pk(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function NK(t,e){for(var r=/(\n+)([^\n]*)/g,n=function(){var p=t.indexOf(`
`);return p=p!==-1?p:t.length,r.lastIndex=p,fk(t.slice(0,p),e)}(),i=t[0]===`
`||t[0]===" ",o,s;s=r.exec(t);){var l=s[1],u=s[2];o=u[0]===" ",n+=l+(!i&&!o&&u!==""?`
`:"")+fk(u,e),i=o}return n}function fk(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,n,i=0,o,s=0,l=0,u="";n=r.exec(t);)l=n.index,l-i>e&&(o=s>i?s:l,u+=`
`+t.slice(i,o),i=o+1),s=l;return u+=`
`,t.length-i>e&&s>i?u+=t.slice(i,s)+`
`+t.slice(s+1):u+=t.slice(i),u.slice(1)}function OK(t){for(var e="",r=0,n,i=0;i<t.length;r>=65536?i+=2:i++)r=Zc(t,i),n=Ht[r],!n&&Jc(r)?(e+=t[i],r>=65536&&(e+=t[i+1])):e+=n||kK(r);return e}function LK(t,e,r){var n="",i=t.tag,o,s,l;for(o=0,s=r.length;o<s;o+=1)l=r[o],t.replacer&&(l=t.replacer.call(r,String(o),l)),(vi(t,e,l,!1,!1)||typeof l>"u"&&vi(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=i,t.dump="["+n+"]"}function dk(t,e,r,n){var i="",o=t.tag,s,l,u;for(s=0,l=r.length;s<l;s+=1)u=r[s],t.replacer&&(u=t.replacer.call(r,String(s),u)),(vi(t,e+1,u,!0,!0,!1,!0)||typeof u>"u"&&vi(t,e+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=dS(t,e)),t.dump&&Yc===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=o,t.dump=i||"[]"}function UK(t,e,r){var n="",i=t.tag,o=Object.keys(r),s,l,u,p,d;for(s=0,l=o.length;s<l;s+=1)d="",n!==""&&(d+=", "),t.condenseFlow&&(d+='"'),u=o[s],p=r[u],t.replacer&&(p=t.replacer.call(r,u,p)),vi(t,e,u,!1,!1)&&(t.dump.length>1024&&(d+="? "),d+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),vi(t,e,p,!1,!1)&&(d+=t.dump,n+=d));t.tag=i,t.dump="{"+n+"}"}function BK(t,e,r,n){var i="",o=t.tag,s=Object.keys(r),l,u,p,d,m,g;if(t.sortKeys===!0)s.sort();else if(typeof t.sortKeys=="function")s.sort(t.sortKeys);else if(t.sortKeys)throw new hr("sortKeys must be a boolean or a function");for(l=0,u=s.length;l<u;l+=1)g="",(!n||i!=="")&&(g+=dS(t,e)),p=s[l],d=r[p],t.replacer&&(d=t.replacer.call(r,p,d)),vi(t,e+1,p,!0,!0,!0)&&(m=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,m&&(t.dump&&Yc===t.dump.charCodeAt(0)?g+="?":g+="? "),g+=t.dump,m&&(g+=dS(t,e)),vi(t,e+1,d,!0,m)&&(t.dump&&Yc===t.dump.charCodeAt(0)?g+=":":g+=": ",g+=t.dump,i+=g));t.tag=o,t.dump=i||"{}"}function mk(t,e,r){var n,i,o,s,l,u;for(i=r?t.explicitTypes:t.implicitTypes,o=0,s=i.length;o<s;o+=1)if(l=i[o],(l.instanceOf||l.predicate)&&(!l.instanceOf||typeof e=="object"&&e instanceof l.instanceOf)&&(!l.predicate||l.predicate(e))){if(r?l.multi&&l.representName?t.tag=l.representName(e):t.tag=l.tag:t.tag="?",l.represent){if(u=t.styleMap[l.tag]||l.defaultStyle,Pk.call(l.represent)==="[object Function]")n=l.represent(e,u);else if(Mk.call(l.represent,u))n=l.represent[u](e,u);else throw new hr("!<"+l.tag+'> tag resolver accepts not "'+u+'" style');t.dump=n}return!0}return!1}function vi(t,e,r,n,i,o,s){t.tag=null,t.dump=r,mk(t,r,!1)||mk(t,r,!0);var l=Pk.call(t.dump),u=n,p;n&&(n=t.flowLevel<0||t.flowLevel>e);var d=l==="[object Object]"||l==="[object Array]",m,g;if(d&&(m=t.duplicates.indexOf(r),g=m!==-1),(t.tag!==null&&t.tag!=="?"||g||t.indent!==2&&e>0)&&(i=!1),g&&t.usedDuplicates[m])t.dump="*ref_"+m;else{if(d&&g&&!t.usedDuplicates[m]&&(t.usedDuplicates[m]=!0),l==="[object Object]")n&&Object.keys(t.dump).length!==0?(BK(t,e,t.dump,i),g&&(t.dump="&ref_"+m+t.dump)):(UK(t,e,t.dump),g&&(t.dump="&ref_"+m+" "+t.dump));else if(l==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!s&&e>0?dk(t,e-1,t.dump,i):dk(t,e,t.dump,i),g&&(t.dump="&ref_"+m+t.dump)):(LK(t,e,t.dump),g&&(t.dump="&ref_"+m+" "+t.dump));else if(l==="[object String]")t.tag!=="?"&&CK(t,t.dump,e,o,u);else{if(l==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new hr("unacceptable kind of an object to dump "+l)}t.tag!==null&&t.tag!=="?"&&(p=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?p="!"+p:p.slice(0,18)==="tag:yaml.org,2002:"?p="!!"+p.slice(18):p="!<"+p+">",t.dump=p+" "+t.dump)}return!0}function VK(t,e){var r=[],n=[],i,o;for(hS(t,r,n),i=0,o=n.length;i<o;i+=1)e.duplicates.push(r[n[i]]);e.usedDuplicates=new Array(o)}function hS(t,e,r){var n,i,o;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(e.push(t),Array.isArray(t))for(i=0,o=t.length;i<o;i+=1)hS(t[i],e,r);else for(n=Object.keys(t),i=0,o=n.length;i<o;i+=1)hS(t[n[i]],e,r)}function WK(t,e){e=e||{};var r=new MK(e);r.noRefs||VK(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),vi(r,0,n,!0,!0)?r.dump+`
`:""}var HK=WK,$K={dump:HK};function vS(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var Bk=Ft;var Vk=yS,jK=kk.load,Qde=kk.loadAll,Wk=$K.dump;var Yde=vS("safeLoad","load"),Xde=vS("safeLoadAll","loadAll"),Jde=vS("safeDump","dump");var wf=class{constructor(e,r){this.data=e;this.opts=r}represent(){let e=Wk(this.data,Object.assign({replacer:KK,schema:zK},this.opts));return e=e.trim(),e.includes(`
`)&&(e=`
`+e),e}},qK=new Bk("!format",{kind:"scalar",resolve:()=>!1,instanceOf:wf,represent:t=>t.represent()}),zK=Vk.extend({implicit:[qK]}),bS=t=>typeof t=="object"&&t!=null;function GK(t){if(bS(t))return Object.values(t).every(e=>!bS(e)&&!Array.isArray(e));if(Array.isArray(t))return t.every(e=>!bS(e)&&!Array.isArray(e))}function KK(t,e){return t===""?e:GK(e)?new wf(e,{flowLevel:0}):e}var wS=["breakLine","clearAndSetSelection","copyToClipboard","cutToClipboard","decrement","deselect","editNewLineAfter","editNewLineBefore","experimental.setInstanceReference","extractVariable","findInDocument","findInWorkspace","foldRegion","followLink","followLinkAside","increment","indentLine","insertCopyAfter","insertCopyBefore","insertEmptyLineAfter","insertEmptyLineBefore","insertEmptyLinesAround","joinLines","outdentLine","randomizeTargets","remove","rename","revealDefinition","revealTypeDefinition","reverseTargets","scrollToBottom","scrollToCenter","scrollToTop","setSelection","setSelectionAfter","setSelectionBefore","showDebugHover","showHover","showQuickFix","showReferences","sortTargets","toggleLineBreakpoint","toggleLineComment","unfoldRegion","private.setKeyboardTarget","private.showParseTree","private.getTargets"],QK=["callAsFunction","editNew","executeCommand","generateSnippet","getText","highlight","insertSnippet","moveToTarget","pasteFromClipboard","replace","replaceWithTarget","rewrapWithPairedDelimiter","swapTargets","wrapWithPairedDelimiter","wrapWithSnippet","parsed"],$k=[...wS,...QK];var YK=["angleBrackets","backtickQuotes","curlyBrackets","doubleQuotes","escapedDoubleQuotes","escapedParentheses","escapedSquareBrackets","escapedSingleQuotes","parentheses","singleQuotes","squareBrackets"],XK=["string","any","collectionBoundary"],_f=[...YK,...XK],Bo=["argumentOrParameter","anonymousFunction","attribute","branch","class","className","collectionItem","collectionKey","comment","private.fieldAccess","functionCall","functionCallee","functionName","ifStatement","instance","list","map","name","namedFunction","regularExpression","statement","string","type","value","condition","section","sectionLevelOne","sectionLevelTwo","sectionLevelThree","sectionLevelFour","sectionLevelFive","sectionLevelSix","selector","private.switchStatementSubject","unit","xmlBothTags","xmlElement","xmlEndTag","xmlStartTag","part","chapter","subSection","subSubSection","namedParagraph","subParagraph","environment","character","word","token","identifier","line","sentence","paragraph","document","nonWhitespaceSequence","boundedNonWhitespaceSequence","url","notebookCell","command","textFragment"];function jk(t){return Bo.includes(t.type)}var qk=["simpleScopeTypeType","complexScopeTypeType","customRegex","pairedDelimiter","action","customAction","grapheme"],el=class extends Error{constructor(e){super(e),this.name="NeedsInitialTalonUpdateError"}},us=class extends Error{constructor(){super("Custom spoken forms are not currently supported in this ide"),this.name="DisabledCustomSpokenFormsError"}};function tl(t){return t.replace(/([A-Z])/g," $1").split(" ").map(e=>e.toLowerCase()).join(" ")}function Vo(t){return t.version>=7}var to=class{constructor(e){this.hashFunction=e;this.map={}}hash(e){return this.hashFunction(e).join("\0")}set(e,r){return this.map[this.hash(e)]=r,this}has(e){return this.hash(e)in this.map}get(e){return this.map[this.hash(e)]}delete(e){return delete this.map[this.hash(e)],this}clear(){return this.map={},this}};var ps=class extends Map{constructor(r){super();this.getDefaultValue=r}get(r){let n=super.get(r);if(n!=null)return n;let i=this.getDefaultValue(r);return this.set(r,i),i}};function zk(...t){return{dispose(){t.forEach(({dispose:e})=>{try{e()}catch(r){console.error(r)}})}}}function rl(t){return typeof t=="string"||t instanceof String}function Ef(t){let[e,...r]=t;return e4(e,r)}function e4(t,e){let r;if(rl(t)){let n=t,[i,o,...s]=e;r={version:0,spokenForm:n,action:i,targets:o,extraArgs:s,usePrePhraseSnapshot:!1}}else r=t;return r}function nl(t,e){let r=new Map;return t.forEach(n=>{let i=e(n),o;r.has(i)?o=r.get(i):(o=[],r.set(i,o)),o.push(n)}),r}function Gk(t){for(let e of t)return!1;return!0}function bi(t){return Object.keys(t)}function il(t,e){return`${t}.${e}`}var Zk={camelCase(t){if(t.length===0)return"";let[e,...r]=t;return e+r.map(Kk).join("")},snakeCase(t){return t.join("_")},upperSnakeCase(t){return t.map(e=>e.toUpperCase()).join("_")},pascalCase(t){return t.map(Kk).join("")}};function Kk(t){return t.length===0?"":t[0].toUpperCase()+t.substr(1)}function Qk(t,e,r){if(t.length<2)return[...t];if(t.length===2)return e(t[0],t[1])?[t[0]]:[...t];let n=[],i=t.reduce((o,s)=>{let l=r(s),u=o.get(l);return u==null?(o.set(l,[s]),o):(o.get(l).push(s),u.length===2&&n.push(l),o)},new Map);return n.length===0?[...t]:(n.forEach(o=>{i.set(o,Uc(i.get(o),e))}),t.flatMap(o=>{let s=r(o),l=i.get(s);if(l==null||l.length===0)return[];let u=l[0];return e(u,o)?(l.shift(),u):[]}))}var rP=Symbol.for("immer-nothing"),Yk=Symbol.for("immer-draftable"),Or=Symbol.for("immer-state"),t4=process.env.NODE_ENV!=="production"?[function(t){return`The plugin for '${t}' has not been loaded into Immer. To enable the plugin, import and call \`enable${t}()\` when initializing your application.`},function(t){return`produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '${t}'`},"This object has been frozen and should not be mutated",function(t){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+t},"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.","Immer forbids circular references","The first or second argument to `produce` must be a function","The third argument to `produce` must be a function or undefined","First argument to `createDraft` must be a plain object, an array, or an immerable object","First argument to `finishDraft` must be a draft returned by `createDraft`",function(t){return`'current' expects a draft, got: ${t}`},"Object.defineProperty() cannot be used on an Immer draft","Object.setPrototypeOf() cannot be used on an Immer draft","Immer only supports deleting array indices","Immer only supports setting array indices and the 'length' property",function(t){return`'original' expects a draft, got: ${t}`}]:[];function yr(t,...e){if(process.env.NODE_ENV!=="production"){let r=t4[t],n=typeof r=="function"?r.apply(null,e):r;throw new Error(`[Immer] ${n}`)}throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var fs=Object.getPrototypeOf;function ds(t){return!!t&&!!t[Or]}function Ho(t){return t?nP(t)||Array.isArray(t)||!!t[Yk]||!!t.constructor?.[Yk]||Af(t)||Df(t):!1}var r4=Object.prototype.constructor.toString();function nP(t){if(!t||typeof t!="object")return!1;let e=fs(t);if(e===null)return!0;let r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===r4}function Rf(t,e){Mf(t)===0?Reflect.ownKeys(t).forEach(r=>{e(r,t[r],t)}):t.forEach((r,n)=>e(n,r,t))}function Mf(t){let e=t[Or];return e?e.type_:Array.isArray(t)?1:Af(t)?2:Df(t)?3:0}function RS(t,e){return Mf(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function iP(t,e,r){let n=Mf(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function n4(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Af(t){return t instanceof Map}function Df(t){return t instanceof Set}function Wo(t){return t.copy_||t.base_}function kS(t,e){if(Af(t))return new Map(t);if(Df(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);if(!e&&nP(t))return fs(t)?{...t}:Object.assign(Object.create(null),t);let r=Object.getOwnPropertyDescriptors(t);delete r[Or];let n=Reflect.ownKeys(r);for(let i=0;i<n.length;i++){let o=n[i],s=r[o];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(r[o]={configurable:!0,writable:!0,enumerable:s.enumerable,value:t[o]})}return Object.create(fs(t),r)}function IS(t,e=!1){return If(t)||ds(t)||!Ho(t)||(Mf(t)>1&&(t.set=t.add=t.clear=t.delete=i4),Object.freeze(t),e&&Object.entries(t).forEach(([r,n])=>IS(n,!0))),t}function i4(){yr(2)}function If(t){return Object.isFrozen(t)}var o4={};function $o(t){let e=o4[t];return e||yr(0,t),e}var ol;function oP(){return ol}function a4(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Xk(t,e){e&&($o("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function PS(t){MS(t),t.drafts_.forEach(s4),t.drafts_=null}function MS(t){t===ol&&(ol=t.parent_)}function Jk(t){return ol=a4(ol,t)}function s4(t){let e=t[Or];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function eP(t,e){e.unfinalizedDrafts_=e.drafts_.length;let r=e.drafts_[0];return t!==void 0&&t!==r?(r[Or].modified_&&(PS(e),yr(4)),Ho(t)&&(t=kf(e,t),e.parent_||Pf(e,t)),e.patches_&&$o("Patches").generateReplacementPatches_(r[Or].base_,t,e.patches_,e.inversePatches_)):t=kf(e,r,[]),PS(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==rP?t:void 0}function kf(t,e,r){if(If(e))return e;let n=e[Or];if(!n)return Rf(e,(i,o)=>tP(t,n,e,i,o,r)),e;if(n.scope_!==t)return e;if(!n.modified_)return Pf(t,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;let i=n.copy_,o=i,s=!1;n.type_===3&&(o=new Set(i),i.clear(),s=!0),Rf(o,(l,u)=>tP(t,n,i,l,u,r,s)),Pf(t,i,!1),r&&t.patches_&&$o("Patches").generatePatches_(n,r,t.patches_,t.inversePatches_)}return n.copy_}function tP(t,e,r,n,i,o,s){if(process.env.NODE_ENV!=="production"&&i===r&&yr(5),ds(i)){let l=o&&e&&e.type_!==3&&!RS(e.assigned_,n)?o.concat(n):void 0,u=kf(t,i,l);if(iP(r,n,u),ds(u))t.canAutoFreeze_=!1;else return}else s&&r.add(i);if(Ho(i)&&!If(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;kf(t,i),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&Pf(t,i)}}function Pf(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&IS(e,r)}function c4(t,e){let r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:oP(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1},i=n,o=FS;r&&(i=[n],o=al);let{revoke:s,proxy:l}=Proxy.revocable(i,o);return n.draft_=l,n.revoke_=s,l}var FS={get(t,e){if(e===Or)return t;let r=Wo(t);if(!RS(r,e))return l4(t,r,e);let n=r[e];return t.finalized_||!Ho(n)?n:n===_S(t.base_,e)?(ES(t),t.copy_[e]=DS(n,t)):n},has(t,e){return e in Wo(t)},ownKeys(t){return Reflect.ownKeys(Wo(t))},set(t,e,r){let n=aP(Wo(t),e);if(n?.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){let i=_S(Wo(t),e),o=i?.[Or];if(o&&o.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(n4(r,i)&&(r!==void 0||RS(t.base_,e)))return!0;ES(t),AS(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return _S(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,ES(t),AS(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){let r=Wo(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){yr(11)},getPrototypeOf(t){return fs(t.base_)},setPrototypeOf(){yr(12)}},al={};Rf(FS,(t,e)=>{al[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});al.deleteProperty=function(t,e){return process.env.NODE_ENV!=="production"&&isNaN(parseInt(e))&&yr(13),al.set.call(this,t,e,void 0)};al.set=function(t,e,r){return process.env.NODE_ENV!=="production"&&e!=="length"&&isNaN(parseInt(e))&&yr(14),FS.set.call(this,t[0],e,r,t[0])};function _S(t,e){let r=t[Or];return(r?Wo(r):t)[e]}function l4(t,e,r){let n=aP(e,r);return n?"value"in n?n.value:n.get?.call(t.draft_):void 0}function aP(t,e){if(!(e in t))return;let r=fs(t);for(;r;){let n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=fs(r)}}function AS(t){t.modified_||(t.modified_=!0,t.parent_&&AS(t.parent_))}function ES(t){t.copy_||(t.copy_=kS(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var u4=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){let o=r;r=e;let s=this;return function(u=o,...p){return s.produce(u,d=>r.call(this,d,...p))}}typeof r!="function"&&yr(6),n!==void 0&&typeof n!="function"&&yr(7);let i;if(Ho(e)){let o=Jk(this),s=DS(e,void 0),l=!0;try{i=r(s),l=!1}finally{l?PS(o):MS(o)}return Xk(o,n),eP(i,o)}else if(!e||typeof e!="object"){if(i=r(e),i===void 0&&(i=e),i===rP&&(i=void 0),this.autoFreeze_&&IS(i,!0),n){let o=[],s=[];$o("Patches").generateReplacementPatches_(e,i,o,s),n(o,s)}return i}else yr(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(s,...l)=>this.produceWithPatches(s,u=>e(u,...l));let n,i;return[this.produce(e,r,(s,l)=>{n=s,i=l}),n,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){Ho(t)||yr(8),ds(t)&&(t=p4(t));let e=Jk(this),r=DS(t,void 0);return r[Or].isManual_=!0,MS(e),r}finishDraft(t,e){let r=t&&t[Or];(!r||!r.isManual_)&&yr(9);let{scope_:n}=r;return Xk(n,e),eP(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){let i=e[r];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}r>-1&&(e=e.slice(r+1));let n=$o("Patches").applyPatches_;return ds(t)?n(t,e):this.produce(t,i=>n(i,e))}};function DS(t,e){let r=Af(t)?$o("MapSet").proxyMap_(t,e):Df(t)?$o("MapSet").proxySet_(t,e):c4(t,e);return(e?e.scope_:oP()).drafts_.push(r),r}function p4(t){return ds(t)||yr(10,t),sP(t)}function sP(t){if(!Ho(t)||If(t))return t;let e=t[Or],r;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=kS(t,e.scope_.immer_.useStrictShallowCopy_)}else r=kS(t,!0);return Rf(r,(n,i)=>{iP(r,n,sP(i))}),e&&(e.finalized_=!1),r}var Lr=new u4,Ff=Lr.produce,Gge=Lr.produceWithPatches.bind(Lr),Kge=Lr.setAutoFreeze.bind(Lr),Zge=Lr.setUseStrictShallowCopy.bind(Lr),Qge=Lr.applyPatches.bind(Lr),Yge=Lr.createDraft.bind(Lr),Xge=Lr.finishDraft.bind(Lr);var $n=fr(RP(),1),yye=$n.default.v1,xye=$n.default.v3,kP=$n.default.v4,Sye=$n.default.v5,Tye=$n.default.NIL,vye=$n.default.version,bye=$n.default.validate,wye=$n.default.stringify,_ye=$n.default.parse;function PP(t,e,r){if(e>=t.length)throw Error(`Expected at least ${e+1} ${r} but received only ${t.length}`);return t[e]}function Kf(t,e){if(Array.isArray(t))return t.map(r=>Kf(r,e));if(typeof t=="object"&&t!=null){if(v6(t))return PP(e,t.index,"placeholder value");let r={};for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=Kf(t[n],e));return r}return t}function v6(t){return typeof t=="object"&&t!=null&&"type"in t&&t.type==="placeholder"}var td=fr(AP(),1);var b6={blue:"blue",green:"green",red:"red",pink:"pink",yellow:"yellow",userColor1:"navy",userColor2:"apricot",default:null},w6={ex:"ex",fox:"fox",wing:"wing",hole:"hole",frame:"frame",curve:"curve",eye:"eye",play:"play",crosshairs:"cross",bolt:"bolt",default:null},Qf={cursor:"this",that:"that",source:"source",nothing:"nothing",keyboard:null,explicit:null,decoratedSymbol:null,lineNumber:null,range:null,target:null},Yf={modulo100:"row",relativeUp:"up",relativeDown:"down"};function DP(t){let e=b6[t];if(e==null)throw Error(`Unknown hat color '${t}'`);return e}function IP(t){let e=w6[t];if(e==null)throw Error(`Unknown hat shape '${t}'`);return e}function WS(t,e){return Object.fromEntries(Object.entries(t).map(([r,n])=>[r,Object.fromEntries(Object.entries(n).map(([i,o])=>[i,e(o,r,i)]))]))}var _6=Object.fromEntries("air bat cap drum each fine gust harp sit jury crunch look made near odd pit quench red sun trap urge vest whale plex yank zip".split(" ").map((t,e)=>[String.fromCharCode(97+e),t])),E6=Object.fromEntries("zero one two three four five six seven eight nine".split(" ").map((t,e)=>[e.toString(),t])),R6={".":"dot",",":"comma",";":"semicolon",":":"colon","!":"bang","*":"asterisk","@":"at sign","&":"ampersand","?":"question","/":"slash","\\":"backslash","-":"dash","=":"equals","+":"plus","~":"tilde",_:"underscore","#":"hash","%":"percent","^":"caret","|":"pipe",$:"dollar","\xA3":"pound","'":"quote",'"':"double quote","`":"back tick","(":"paren",")":"right paren","{":"brace","}":"right brace","[":"square","]":"right square","<":"angle",">":"right angle","\uFFFD":"special"},FP={..._6,...E6,...R6};function ro(...t){return{defaultSpokenForms:t,isDisabledByDefault:!0,isPrivate:!1}}function xr(...t){return{defaultSpokenForms:t,isDisabledByDefault:!0,isPrivate:!0}}var CP={pairedDelimiter:{curlyBrackets:"curly",angleBrackets:"diamond",escapedDoubleQuotes:"escaped quad",escapedSingleQuotes:"escaped twin",escapedParentheses:"escaped round",escapedSquareBrackets:"escaped box",doubleQuotes:"quad",parentheses:"round",backtickQuotes:"skis",squareBrackets:"box",singleQuotes:"twin",any:"pair",string:"string",whitespace:"void",collectionBoundary:xr("collection boundary")},simpleScopeTypeType:{argumentOrParameter:"arg",attribute:"attribute",functionCall:"call",functionCallee:"callee",className:"class name",class:"class",comment:"comment",functionName:"funk name",namedFunction:"funk",ifStatement:"if state",instance:"instance",collectionItem:"item",collectionKey:"key",anonymousFunction:"lambda",list:"list",map:"map",name:"name",regularExpression:"regex",section:"section",sectionLevelOne:ro("one section"),sectionLevelTwo:ro("two section"),sectionLevelThree:ro("three section"),sectionLevelFour:ro("four section"),sectionLevelFive:ro("five section"),sectionLevelSix:ro("six section"),selector:"selector",statement:"state",branch:"branch",type:"type",value:"value",condition:"condition",unit:"unit",xmlElement:"element",xmlBothTags:"tags",xmlStartTag:"start tag",xmlEndTag:"end tag",part:"part",chapter:"chapter",subSection:"subsection",subSubSection:"subsubsection",namedParagraph:"paragraph",subParagraph:"subparagraph",environment:"environment",command:"command",character:"char",word:"sub",token:"token",identifier:"identifier",line:"line",sentence:"sentence",paragraph:"block",document:"file",nonWhitespaceSequence:"paint",boundedNonWhitespaceSequence:"short paint",url:"link",notebookCell:"cell",string:xr("parse tree string"),textFragment:xr("text fragment"),"private.fieldAccess":xr("access"),"private.switchStatementSubject":xr("subject")},complexScopeTypeType:{glyph:"glyph"},surroundingPairForceDirection:{left:"left",right:"right"},simpleModifier:{excludeInterior:"bounds",toRawSelection:"just",leading:"leading",trailing:"trailing",keepContentFilter:"content",keepEmptyFilter:"empty",inferPreviousMark:"its",startOf:"start of",endOf:"end of",interiorOnly:"inside",visible:"visible",extendThroughStartOf:"head",extendThroughEndOf:"tail",everyScope:"every"},modifierExtra:{first:"first",last:"last",previous:"previous",next:"next",forward:"forward",backward:"backward",ancestor:"grand"},customRegex:{},action:{breakLine:"break",scrollToBottom:"bottom",toggleLineBreakpoint:"break point",cutToClipboard:"carve",scrollToCenter:"center",clearAndSetSelection:"change",remove:"chuck",insertCopyBefore:"clone up",insertCopyAfter:"clone",toggleLineComment:"comment",copyToClipboard:"copy",scrollToTop:"crown",outdentLine:"dedent",revealDefinition:"define",editNewLineBefore:"drink",insertEmptyLineBefore:"drop",extractVariable:"extract",insertEmptyLineAfter:"float",foldRegion:"fold",followLink:"follow",followLinkAside:"follow split",deselect:"give",highlight:"highlight",showHover:"hover",increment:"increment",decrement:"decrement",indentLine:"indent",showDebugHover:"inspect",setSelectionAfter:"post",editNewLineAfter:"pour",setSelectionBefore:"pre",insertEmptyLinesAround:"puff",showQuickFix:"quick fix",showReferences:"reference",rename:"rename",reverseTargets:"reverse",findInDocument:"scout",findInWorkspace:"scout all",randomizeTargets:"shuffle",generateSnippet:"snippet make",sortTargets:"sort",setSelection:"take",revealTypeDefinition:"type deaf",unfoldRegion:"unfold",callAsFunction:"call",swapTargets:"swap",replaceWithTarget:"bring",moveToTarget:"move",wrapWithPairedDelimiter:"wrap",wrapWithSnippet:"wrap",rewrapWithPairedDelimiter:"repack",insertSnippet:"snippet",pasteFromClipboard:"paste",joinLines:"join","private.showParseTree":xr("parse tree"),"experimental.setInstanceReference":ro("from"),editNew:xr("edit new"),executeCommand:xr("execute command"),parsed:xr("parsed"),getText:xr("get text"),replace:xr("replace"),"private.getTargets":xr("get targets"),"private.setKeyboardTarget":xr("set keyboard target")},customAction:{},grapheme:FP};var HS=WS(CP,t=>typeof t=="string"?{defaultSpokenForms:[t],isDisabledByDefault:!1,isPrivate:!1}:t),_i=WS(HS,({defaultSpokenForms:t,isDisabledByDefault:e,isPrivate:r})=>({spokenForms:e?[]:t,isCustom:!1,defaultSpokenForms:t,requiresTalonUpdate:!1,isPrivate:r}));var pt={rangeExclusive:"between",rangeInclusive:"past",rangeExcludingStart:null,rangeExcludingEnd:"until",listConnective:"and",swapConnective:"with",sourceDestinationConnective:"to",before:"before",after:"after",verticalRange:"slice",previous:"previous",next:"next",forward:"forward",backward:"backward"};var LP=fr(OP(),1),Jf=class{constructor(e){this.mooLexer=LP.default.compile(e)}reset(e,r){let{mooState:n}=r??{};return this.mooLexer.reset(e,n),this}formatError(e,r){return this.mooLexer.formatError(e,r)}has(e){return this.mooLexer.has(e)}save(){return{mooState:this.mooLexer.save()}}next(){let e=this.mooLexer.next();return this.skipToken(e)?this.next():e}transform({value:e}){return e}skipToken(e){return e?.type==="ws"}};var Ei={};for(let t of wS){let{spokenForms:e}=_i.action[t];for(let r of e)Ei[r]={type:"simpleActionName",value:t}}var k6=["replaceWithTarget","moveToTarget"];for(let t of k6){let{spokenForms:e}=_i.action[t];for(let r of e)Ei[r]={type:"bringMove",value:t}}var P6=["before","after","to"];for(let t of P6){let e=pt[t==="to"?"sourceDestinationConnective":t];Ei[e]={type:"insertionMode",value:t}}for(let t of Bo){let{spokenForms:e}=_i.simpleScopeTypeType[t];for(let r of e)Ei[r]={type:"simpleScopeTypeType",value:t}}for(let t of _f){let{spokenForms:e}=_i.pairedDelimiter[t];for(let r of e)Ei[r]={type:"pairedDelimiter",value:t}}for(let[t,e]of Object.entries(Qf))e!=null&&(Ei[e]={type:"simpleMarkType",value:t});var Ri=new Jf({ws:/[ \t]+/,placeholderTarget:{match:/<target\d*>/,value:t=>t.slice(7,-1)},token:{match:Object.keys(Ei),type:t=>Ei[t].type,value:t=>Ei[t].value}});function UP(t,e){return{name:t,target:e}}function BP(t,e,r){return{name:t,source:e,destination:r}}function ed(t,e){let r={type:"primitive"};return t!=null&&(r.modifiers=t),e!=null&&(r.mark=e),r}function VP(t,e){return{type:"primitive",insertionMode:t,target:e}}function WP(t){return{type:"containingScope",scopeType:t}}function HP(t){return{type:t}}function $P(t){return{type:"surroundingPair",delimiter:t}}function jP(t){return{type:t}}function qP(t){return{type:"target",target:{type:"placeholder",index:t.length===0?0:parseInt(t)-1}}}function $S(t){return t[0]}var M6={Lexer:Ri,ParserRules:[{name:"main",symbols:["action"],postprocess:$S},{name:"action",symbols:[Ri.has("simpleActionName")?{type:"simpleActionName"}:simpleActionName,"target"],postprocess:([t,e])=>UP(t,e)},{name:"action",symbols:[Ri.has("bringMove")?{type:"bringMove"}:bringMove,"target","destination"],postprocess:([t,e,r])=>BP(t,e,r)},{name:"destination",symbols:["primitiveDestination"],postprocess:$S},{name:"destination",symbols:[Ri.has("insertionMode")?{type:"insertionMode"}:insertionMode,"target"],postprocess:([t,e])=>VP(t,e)},{name:"target",symbols:["primitiveTarget"],postprocess:$S},{name:"primitiveTarget$ebnf$1",symbols:["modifier"]},{name:"primitiveTarget$ebnf$1",symbols:["primitiveTarget$ebnf$1","modifier"],postprocess:t=>t[0].concat([t[1]])},{name:"primitiveTarget",symbols:["primitiveTarget$ebnf$1"],postprocess:([t])=>ed(t,void 0)},{name:"primitiveTarget",symbols:["mark"],postprocess:([t])=>ed(void 0,t)},{name:"primitiveTarget$ebnf$2",symbols:["modifier"]},{name:"primitiveTarget$ebnf$2",symbols:["primitiveTarget$ebnf$2","modifier"],postprocess:t=>t[0].concat([t[1]])},{name:"primitiveTarget",symbols:["primitiveTarget$ebnf$2","mark"],postprocess:([t,e])=>ed(t,e)},{name:"modifier",symbols:["containingScopeModifier"],postprocess:([t])=>t},{name:"containingScopeModifier",symbols:["scopeType"],postprocess:([t])=>WP(t)},{name:"scopeType",symbols:[Ri.has("simpleScopeTypeType")?{type:"simpleScopeTypeType"}:simpleScopeTypeType],postprocess:([t])=>HP(t)},{name:"scopeType",symbols:[Ri.has("pairedDelimiter")?{type:"pairedDelimiter"}:pairedDelimiter],postprocess:([t])=>$P(t)},{name:"mark",symbols:[Ri.has("simpleMarkType")?{type:"simpleMarkType"}:simpleMarkType],postprocess:([t])=>jP(t)},{name:"mark",symbols:[Ri.has("placeholderTarget")?{type:"placeholderTarget"}:placeholderTarget],postprocess:([t])=>qP(t)}],ParserStart:"main"},zP=M6;function A6(){return new td.Parser(td.Grammar.fromCompiled(zP))}function GP(t){let e=A6();if(e.feed(t),e.results.length!==1)throw new Error(`Expected exactly one result, got ${e.results.length}`);return e.results[0]}function rd(t,e){let r=GP(t);return Kf(r,e)}function ul(t){switch(t.name){case"callAsFunction":return[t.callee,t.argument];case"replaceWithTarget":case"moveToTarget":return[t.source,...KP(t.destination)];case"swapTargets":return[t.target1,t.target2];case"pasteFromClipboard":case"insertSnippet":case"replace":case"editNew":return KP(t.destination);case"parsed":return ul(rd(t.content,t.arguments));default:return[t.target]}}function KP(t){switch(t.type){case"list":return t.destinations.map(({target:e})=>e);case"primitive":return[t.target];case"implicit":return[]}}function qS(t){return t.flatMap(jS)}function jS(t){switch(t.type){case"primitive":return[t];case"list":return t.elements.flatMap(jS);case"range":return[t.anchor,t.active].flatMap(jS);case"implicit":return[]}}var D6={arrowFunction:"anonymousFunction",dictionary:"map",regex:"regularExpression"},I6={purple:"pink"};function F6(t){t.modifiers?.forEach(e=>{(e.type==="containingScope"||e.type==="everyScope")&&(e.scopeType.type=D6[e.scopeType.type]??e.scopeType.type)})}function C6(t){t.mark?.type==="decoratedSymbol"&&(t.mark.symbolColor=I6[t.mark.symbolColor]??t.mark.symbolColor)}function zS(t){qS(t).forEach(e=>{F6(e),C6(e)})}function ZP(t){return{...t,version:1}}var N6={type:"primitive",mark:{type:"cursor"},selectionType:"token",position:"contents",modifier:{type:"identity"},insideOutsideType:"inside"},O6={type:"primitive",isImplicit:!0},QP=t=>Si(t,N6)?O6:t;function YP(t){let e=t.action;return{spokenForm:t.spokenForm,action:{name:e,args:t.extraArgs},targets:U6(t.targets,e),usePrePhraseSnapshot:t.usePrePhraseSnapshot??!1,version:2}}function L6(t){switch(t.type){case"identity":return[];case"containingScope":{let{includeSiblings:e,scopeType:r,type:n,...i}=t;return[{type:e?"everyScope":"containingScope",scopeType:{type:r},...i}]}case"surroundingPair":{let{delimiterInclusion:e,...r}=t,n={type:"containingScope",scopeType:r};return e==="interiorOnly"||e==="excludeInterior"?n.scopeType.delimiter==="any"?[{type:e}]:[{type:e},n]:[n]}case"subpiece":{let{type:e,pieceType:r,...n}=t;return[{type:"ordinalRange",scopeType:{type:r},...n}]}case"head":return[{type:"extendThroughStartOf"}];case"tail":return[{type:"extendThroughEndOf"}];default:return[t]}}function GS(t,e){let{type:r,isImplicit:n,mark:i,insideOutsideType:o,modifier:s,selectionType:l,position:u}=t,p=[];if(u&&u!=="contents"&&(u==="before"?o==="inside"?p.push({type:"position",position:"start"}):e==="remove"?p.push({type:"leading"}):p.push({type:"position",position:"before"}):o==="inside"?p.push({type:"position",position:"end"}):e==="remove"?p.push({type:"trailing"}):p.push({type:"position",position:"after"})),l)switch(l){case"token":if(s?.type==="subpiece")break;case"line":if(i?.type==="lineNumber")break;default:p.push({type:"containingScope",scopeType:{type:l}})}return s&&p.push(...L6(s)),{type:r,isImplicit:n,modifiers:p.length>0?p:void 0,mark:i?.type==="cursorToken"?void 0:i}}function XP(t,e){switch(t.type){case"list":return{...t,elements:t.elements.map(r=>XP(r,e))};case"range":{let{type:r,rangeType:n,start:i,end:o,excludeStart:s,excludeEnd:l}=t;return{type:r,rangeType:n,anchor:GS(i,e),active:GS(o,e),excludeAnchor:s??!1,excludeActive:l??!1}}case"primitive":return GS(t,e)}}function U6(t,e){return t.map(r=>XP(r,e)).map(r=>r.type==="primitive"?QP(r):r)}function JP(t){return{...t,version:3,targets:t.targets.map(eM)}}function eM(t){switch(t.type){case"list":return{...t,elements:t.elements.map(e=>eM(e))};case"range":{let{anchor:e,active:r,...n}=t;return{anchor:KS(e),active:KS(r),...n}}case"primitive":return KS(t)}}function KS(t){let e=t.modifiers!=null?t.modifiers.map(V6):void 0;if(t.mark?.type==="lineNumber"){let{anchor:r,active:n}=t.mark;if(r.type!==n.type||r.lineNumber<0!=n.lineNumber<0)return{type:"range",anchor:{type:"primitive",mark:fl(r),modifiers:e},active:{type:"primitive",mark:fl(n)},excludeAnchor:!1,excludeActive:!1}}return{...t,mark:t.mark!=null?B6(t.mark):void 0,modifiers:e}}function B6(t){switch(t.type){case"lineNumber":return W6(t);default:return t}}function V6(t){switch(t.type){case"ordinalRange":return H6(t);default:return t}}function W6(t){return Si(t.anchor,t.active)?fl(t.anchor):{type:"range",anchor:fl(t.anchor),active:fl(t.active)}}function H6(t){return t.anchor===t.active?pl(t.scopeType,t.anchor):t.anchor===0&&t.active>t.anchor?pl(t.scopeType,t.anchor,t.active-t.anchor+1):t.anchor<0&&t.active===-1?pl(t.scopeType,t.anchor,-t.anchor):{type:"range",anchor:pl(t.scopeType,t.anchor),active:pl(t.scopeType,t.active),excludeAnchor:t.excludeAnchor,excludeActive:t.excludeActive}}function fl(t){return{type:"lineNumber",lineNumberType:t.type,lineNumber:t.lineNumber}}function pl(t,e,r=1){return{type:"ordinalScope",scopeType:t,start:e,length:r}}function rM(t){return{...t,version:4,targets:t.targets.map(nM)}}function nM(t){switch(t.type){case"primitive":return tM(t);case"range":{let{anchor:e,...r}=t;return{...r,anchor:tM(e)}}case"list":{let{elements:e,...r}=t;return{...r,elements:e.map(nM)}}}}function tM(t){return t.mark==null&&t.modifiers==null||t.isImplicit?{type:"implicit"}:t}function iM(t){return{...t,version:5,action:$6(t.action),targets:t.targets.map(nd)}}function $6(t){switch(t.name){case"wrapWithSnippet":{let[e,r]=j6(t.args[0]);return{name:"wrapWithSnippet",args:[{type:"named",name:e,variableName:r}]}}case"insertSnippet":{let[e,r]=t.args,n={type:"named",name:e};return r!=null&&(n.substitutions=r),{name:"insertSnippet",args:[n]}}default:return t}}function j6(t){let[e,r]=t.split(".");if(e==null||r==null)throw new Error("Snippet location missing '.'");return[e,r]}function nd(t){switch(t.type){case"implicit":return t;case"list":return{...t,elements:t.elements.map(nd)};case"range":return{...t,anchor:nd(t.anchor),active:nd(t.active)};case"primitive":return{...t,mark:t.mark!=null?ZS(t.mark):void 0,modifiers:t.modifiers!=null&&t.modifiers.length>0?t.modifiers.map(QS):void 0}}}function ZS(t){return t.type==="range"?{...t,anchor:ZS(t.anchor),active:ZS(t.active),excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1}:t}function QS(t){return t.type==="range"?{...t,anchor:QS(t.anchor),active:QS(t.active),excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1}:t}var q6={bring:"replaceWithTarget",call:"callAsFunction",clear:"clearAndSetSelection",commentLines:"toggleLineComment",copy:"copyToClipboard",cut:"cutToClipboard",delete:"remove",editNewLineAbove:"editNewLineBefore",editNewLineBelow:"editNewLineAfter",findInFiles:"findInWorkspace",fold:"foldRegion",indentLines:"indentLine",insertEmptyLineAbove:"insertEmptyLineBefore",insertEmptyLineBelow:"insertEmptyLineAfter",insertLineAfter:"editNewLineAfter",insertLineBefore:"editNewLineBefore",move:"moveToTarget",outdentLines:"outdentLine",paste:"pasteFromClipboard",reverse:"reverseTargets",setBreakpoint:"toggleLineBreakpoint",sort:"sortTargets",swap:"swapTargets",unfold:"unfoldRegion",use:"replaceWithTarget",wrap:"wrapWithPairedDelimiter"};function YS(t){let e=q6[t]??t;if(!$k.includes(e))throw new Error(`Unknown action name: ${e}`);return e}function oM(t){return{version:6,spokenForm:t.spokenForm,usePrePhraseSnapshot:t.usePrePhraseSnapshot,action:z6(t.action,t.targets)}}function z6(t,e){let r=YS(t.name);switch(r){case"replaceWithTarget":case"moveToTarget":return{name:r,source:sn(e[0]),destination:dl(e[1])};case"swapTargets":return{name:r,target1:sn(e[0]),target2:sn(e[1])};case"callAsFunction":return{name:r,callee:sn(e[0]),argument:sn(e[1])};case"pasteFromClipboard":return{name:r,destination:dl(e[0])};case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return{name:r,left:t.args[0],right:t.args[1],target:sn(e[0])};case"generateSnippet":return{name:r,snippetName:t.args?.[0],target:sn(e[0])};case"insertSnippet":return{name:r,snippetDescription:t.args[0],destination:dl(e[0])};case"wrapWithSnippet":return{name:r,snippetDescription:t.args[0],target:sn(e[0])};case"executeCommand":return{name:r,commandId:t.args[0],options:t.args?.[1],target:sn(e[0])};case"replace":return{name:r,replaceWith:t.args[0],destination:dl(e[0])};case"highlight":{let n={name:r,target:sn(e[0])};return t.args?.[0]!=null&&(n.highlightId=t.args?.[0]),n}case"editNew":return{name:r,destination:dl(e[0])};case"getText":return{name:r,options:t.args?.[0],target:sn(e[0])};case"parsed":throw Error("Parsed action should not be present in V5");default:return{name:r,target:sn(e[0])}}}function sn(t){switch(t.type){case"list":case"range":case"primitive":return G6(t);case"implicit":return t}}function G6(t){switch(t.type){case"list":return K6(t);case"range":case"primitive":return id(t)}}function K6(t){return{...t,elements:t.elements.map(id)}}function id(t){switch(t.type){case"range":return aM(t);case"primitive":return od(t)}}function aM(t){let{anchor:e,active:r}=t,n={type:"range",anchor:e.type==="implicit"?e:od(e),active:od(r),excludeAnchor:t.excludeAnchor,excludeActive:t.excludeActive};return t.rangeType!=null&&(n.rangeType=t.rangeType),n}function od(t){let e={type:"primitive"},r=e5(t.modifiers);return r!=null&&(e.modifiers=r),t.mark!=null&&(e.mark=t.mark),e}function dl(t){switch(t.type){case"list":return Z6(t);case"range":return Q6(t);case"primitive":return Y6(t);case"implicit":return X6()}}function Z6(t){let e=[],r=[],n,i=()=>{r.length>0&&e.push({type:"primitive",insertionMode:n??"to",target:r.length===1?r[0]:{type:"list",elements:r}})};return t.elements.forEach(o=>{let s=ad(o);s!=null?(i(),r=[id(o)],n=s):r.push(id(o))}),i(),e.length>1?{type:"list",destinations:e}:e[0]}function Q6(t){return{type:"primitive",insertionMode:ad(t.anchor)??"to",target:aM(t)}}function Y6(t){return{type:"primitive",insertionMode:ad(t)??"to",target:od(t)}}function X6(){return{type:"implicit"}}function ad(t){switch(t.type){case"implicit":return"to";case"primitive":return J6(t);case"range":return ad(t.anchor)}}function J6(t){let e=t.modifiers?.find(r=>r.type==="position");if(e!=null){if(t.modifiers.indexOf(e)!==0)throw Error("Position modifier has to be at first index");if(e?.position==="before"||e?.position==="after")return e.position}}function e5(t){let e=[];if(t!=null)for(let r of t)r.type==="position"?r.position==="start"?e.push({type:"startOf"}):r.position==="end"&&e.push({type:"endOf"}):e.push(r);return e.length>0?e:void 0}function sM(t){return{...t,version:7}}function JS(t){let e=t5(t,7),{action:r,usePrePhraseSnapshot:n=!1,spokenForm:i}=e;return{version:7,spokenForm:i,action:Ff(r,o=>{let s=ul(o);zS(s),r.name}),usePrePhraseSnapshot:n}}function t5(t,e){if(t.version>7)throw new _p;for(;t.version<e;)switch(t.version){case 0:t=ZP(t);break;case 1:t=YP(t);break;case 2:t=JP(t);break;case 3:t=rM(t);break;case 4:t=iM(t);break;case 5:t=oM(t);break;case 6:t=sM(t);break;default:throw new Error(`Can't upgrade from unknown version ${t.version}`)}return t}var eT;function sd(t){eT=t}function F(){if(eT==null)throw Error("Tried to access ide before it was injected");return eT}var cd=class{constructor(e){this.maxLength=e;this.stack=[];this.index=void 0}push(e){this.index!=null?this.stack.splice(this.index+1,this.stack.length-this.index-1,e):this.stack.push(e),this.stack.length>this.maxLength&&this.stack.shift(),this.index=this.stack.length-1}undo(){if(this.index!=null&&this.index>0)return this.index--,this.stack[this.index]}redo(){if(this.index!=null&&this.index<this.stack.length-1)return this.index++,this.stack[this.index]}};var r5=25,ld=class{constructor(){this.targetMap=new Map;this.targetHistory=new ps(()=>new cd(r5));this.notifier=new Wt}set(e,r,{history:n=!1}={}){this.targetMap.set(e,r),n&&r!=null&&this.targetHistory.get(e).push(r),this.notifier.notifyListeners(e,r)}get(e){return this.targetMap.get(e)}undo(e){let r=this.targetHistory.get(e).undo();r!=null&&this.set(e,r,{history:!1})}redo(e){let r=this.targetHistory.get(e).redo();r!=null&&this.set(e,r,{history:!1})}onStoredTargets(e){for(let r of os)e(r,this.get(r));return this.notifier.registerListener(e)}};function ms(t,e){return new H(new se(e.start.line,0),t.document.lineAt(e.end).range.end)}function tT(t,e){return e.isEmpty?0:t.document.offsetAt(e.end)-t.document.offsetAt(e.start)}function cM(t,e){let[r,n]=e instanceof se?[e,e]:[e.start,e.end];return t.start.isBefore(r)&&t.end.isAfter(n)}function qo(t,...e){for(let r of e)r!=null&&(t=t.union(r));return t}var ud=class t{constructor(e,r,n){this.target=e;this.insertionMode=r;this.contentRange=i5(e.contentRange,r),this.isBefore=r==="before",this.isLineDelimiter=e.insertionDelimiter.includes(`
`),this.indentationString=n??this.isLineDelimiter?n5(e.editor,e.contentRange):"",this.insertionPrefix=e.prefixRange!=null?e.editor.document.getText(e.prefixRange):void 0}get contentSelection(){return this.contentRange.toSelection(this.target.isReversed)}get editor(){return this.target.editor}get insertionDelimiter(){return this.target.insertionDelimiter}get isRaw(){return this.target.isRaw}withTarget(e){return new t(e,this.insertionMode,this.indentationString)}getEditNewActionType(){return this.insertionMode==="after"&&this.target.contentRange.isSingleLine&&this.insertionDelimiter===`
`&&this.insertionPrefix==null?"insertLineAfter":"edit"}constructChangeEdit(e){return this.insertionMode==="before"||this.insertionMode==="after"?this.constructEditWithDelimiters(e):this.constructEditWithoutDelimiters(e)}constructEditWithDelimiters(e){let r=this.getEditRange(),n=this.getEditText(e),i=o=>this.updateRange(o,e);return{range:r,text:n,isReplace:this.insertionMode==="after",updateRange:i}}constructEditWithoutDelimiters(e){return{range:this.contentRange,text:e,updateRange:r=>r}}getEditRange(){let e=(()=>{let r=this.isBefore?qo(this.target.contentRange,this.target.prefixRange).start:this.target.contentRange.end;if(this.isLineDelimiter){let n=this.editor.document.lineAt(r),i=this.isBefore?n.firstNonWhitespaceCharacterIndex:n.lastNonWhitespaceCharacterIndex;if(r.character===i)return this.isBefore?n.range.start:n.range.end}return r})();return new H(e,e)}getEditText(e){let r=this.indentationString+(this.insertionPrefix??"")+e;return this.isBefore?r+this.insertionDelimiter:this.insertionDelimiter+r}updateRange(e,r){let n=this.editor.document.offsetAt(e.start)+this.indentationString.length+(this.insertionPrefix?.length??0),i=this.isBefore?n:n+this.getLengthOfInsertionDelimiter(),o=i+r.length;return new H(this.editor.document.positionAt(i),this.editor.document.positionAt(o))}getLengthOfInsertionDelimiter(){if(this.editor.document.eol==="CRLF"){let e=this.insertionDelimiter.match(/\n/g);if(e!=null)return this.insertionDelimiter.length+e.length}return this.insertionDelimiter.length}};function n5(t,e){let r=Number.MAX_SAFE_INTEGER,n="";for(let i=e.start.line;i<=e.end.line;++i){let o=t.document.lineAt(i);o.range.isEmpty||o.isEmptyOrWhitespace&&!e.isSingleLine||o.firstNonWhitespaceCharacterIndex<r&&(r=o.firstNonWhitespaceCharacterIndex,n=o.text.slice(0,r))}return n}function i5(t,e){switch(e){case"before":return t.start.toEmptyRange();case"after":return t.end.toEmptyRange();case"to":return t}}function no(t,e,r,n){return ml(t.contentRange,e.contentRange,r,n)}function ml(t,e,r,n){return new H(r?t.start:t.end,n?e.end:e.start)}function hs(t,e,r,n){let i=r?t.contentRange.start:new se(t.contentRange.end.line+1,0),o=n?e.contentRange.end:e.editor.document.lineAt(e.contentRange.start.line-1).range.end;return new H(i,o)}var We=class t{constructor(e){this.isLine=!1;this.isToken=!0;this.hasExplicitScopeType=!0;this.hasExplicitRange=!0;this.isRaw=!1;this.isImplicit=!1;this.isNotebookCell=!1;this.isWord=!1;this.state={editor:e.editor,isReversed:e.isReversed,contentRange:e.contentRange,thatTarget:e.thatTarget}}get editor(){return this.state.editor}get isReversed(){return this.state.isReversed}get thatTarget(){return this.state.thatTarget!=null?this.state.thatTarget.thatTarget:this}get contentText(){return this.editor.document.getText(this.contentRange)}get contentSelection(){return this.contentRange.toSelection(this.isReversed)}get contentRange(){return this.state.contentRange}constructRemovalEdit(){return{range:this.getRemovalRange(),text:"",updateRange:e=>e}}getRemovalHighlightRange(){return this.getRemovalRange()}withThatTarget(e){return this.cloneWith({thatTarget:e})}withContentRange(e){return this.cloneWith({contentRange:e})}getInterior(){}getBoundary(){}cloneWith(e){let r=Object.getPrototypeOf(this).constructor;return new r({...this.getCloneParameters(),...e})}maybeCreateRichRangeTarget(e,r){let{constructor:n}=Object.getPrototypeOf(this);return new n({...this.getCloneParameters(),isReversed:e,contentRange:no(this,r,!0,!0)})}isEqual(e){return e instanceof t&&Si(this.getEqualityParameters(),e.getEqualityParameters())}getEqualityParameters(){let{thatTarget:e,...r}=this.getCloneParameters();return{...r}}toDestination(e){return new ud(this,e)}toPlainObject(){return{type:this.type,contentRange:Kc(this.contentRange),isReversed:this.isReversed,hasExplicitRange:this.hasExplicitRange}}};function pd(t,e){return o5(t,e.start,e.end)}function o5(t,e,r){return{editor:t.editor,selection:a5(t.selection,e,r)}}function a5(t,e,r){return t.isReversed?new ge(r,e):new ge(e,r)}function gs(t,e){let{document:r}=t,n=r.getText(e),i=n.length-n.trimStart().length,o=n.length-n.trimEnd().length,s=r.offsetAt(e.start)+i,l=r.offsetAt(e.end)-o,u=r.positionAt(s),p=r.positionAt(l);return new H(u,p)}function fd(t,e,r,n){return r==null?void 0:new t({editor:e,isReversed:n,contentRange:r})}var Ue=class extends We{constructor(r){super(r);this.type="PlainTarget";this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.isToken=r.isToken??!0,this.insertionDelimiter=r.insertionDelimiter??""}getCloneParameters(){return{...this.state,isToken:this.isToken,insertionDelimiter:this.insertionDelimiter}}};function ys(t,e,r){return fd(Ue,t,e,r)}var dd=class extends We{constructor(r){super(r);this.type="DocumentTarget";this.insertionDelimiter=`
`;this.isLine=!0}getLeadingDelimiterTarget(){}getTrailingDelimiterTarget(){}getRemovalRange(){return this.contentRange}getInterior(){return[new Ue({editor:this.editor,isReversed:this.isReversed,contentRange:gs(this.editor,this.contentRange)})]}getCloneParameters(){return this.state}};var Pn=class t extends We{constructor(){super(...arguments);this.type="LineTarget";this.insertionDelimiter=`
`;this.isLine=!0;this.getRemovalHighlightRange=()=>this.fullLineContentRange}get fullLineContentRange(){return ms(this.editor,this.contentRange)}getLeadingDelimiterTarget(){return ys(this.editor,s5(this.editor,this.fullLineContentRange),this.isReversed)}getTrailingDelimiterTarget(){return ys(this.editor,c5(this.editor,this.fullLineContentRange),this.isReversed)}getRemovalRange(){let r=this.fullLineContentRange,n=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return n==null?r:r.union(n.contentRange)}maybeCreateRichRangeTarget(r,n){return new t({editor:this.editor,isReversed:r,contentRange:hs(this,n,!0,!0)})}getCloneParameters(){return this.state}};function s5(t,e){let{start:r}=e;return r.line>0?new H(t.document.lineAt(r.line-1).range.end,e.start):void 0}function c5(t,e){let{end:r}=e;return r.line+1<t.document.lineCount?new H(e.end,new se(r.line+1,0)):void 0}function rT(t,e,r){return fd(Pn,t,e,r)}var md=class t{constructor(e,r){this.target=e;this.insertionMode=r}get editor(){return this.target.editor}get contentRange(){return this.target.contentRange}get contentSelection(){return this.target.contentSelection}get insertionDelimiter(){return this.target.insertionDelimiter}get isRaw(){return this.target.isRaw}withTarget(e){return new t(e,this.insertionMode)}getEditNewActionType(){throw new Error("Method not implemented.")}constructChangeEdit(e){throw new Error("Method not implemented.")}};var hd=class extends We{constructor(r){super(r);this.type="NotebookCellTarget";this.insertionDelimiter=`
`;this.isNotebookCell=!0;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange}getCloneParameters(){return this.state}toDestination(r){return new md(this,r)}};var gd=class t extends We{constructor(){super(...arguments);this.type="ParagraphTarget";this.insertionDelimiter=`

`;this.isLine=!0}getLeadingDelimiterTarget(){return rT(this.editor,l5(this.editor,this.fullLineContentRange),this.isReversed)}getTrailingDelimiterTarget(){return rT(this.editor,u5(this.editor,this.fullLineContentRange),this.isReversed)}getRemovalRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.contentRange.union(r.contentRange):this.contentRange;return new Pn({contentRange:n,editor:this.editor,isReversed:this.isReversed}).getRemovalRange()}get fullLineContentRange(){return ms(this.editor,this.contentRange)}getRemovalHighlightRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return r!=null?this.fullLineContentRange.union(r.contentRange):this.fullLineContentRange}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,contentRange:hs(this,n,!0,!0)})}getCloneParameters(){return this.state}};function l5(t,e){let{document:r}=t,n=r.lineAt(e.start),i=p5(r,n);if(i!=null)return i.lineNumber+1===n.lineNumber?void 0:new H(new se(i.lineNumber+1,0),r.lineAt(n.lineNumber-1).range.end);if(n.lineNumber>0)return new H(new se(0,0),r.lineAt(n.lineNumber-1).range.end)}function u5(t,e){let{document:r}=t,n=r.lineAt(e.end),i=f5(r,n);if(i!=null)return i.lineNumber-1===n.lineNumber?void 0:new H(new se(n.lineNumber+1,0),r.lineAt(i.lineNumber-1).range.end);if(n.lineNumber<r.lineCount-1)return new H(new se(n.lineNumber+1,0),r.lineAt(r.lineCount-1).range.end)}function p5(t,e){for(;e.lineNumber>0;){let r=t.lineAt(e.lineNumber-1);if(!r.isEmptyOrWhitespace)return r;e=r}return null}function f5(t,e){for(;e.lineNumber+1<t.lineCount;){let r=t.lineAt(e.lineNumber+1);if(!r.isEmptyOrWhitespace)return r;e=r}return null}var io=class extends We{constructor(){super(...arguments);this.type="RawSelectionTarget";this.insertionDelimiter="";this.isRaw=!0;this.isToken=!1;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.getCloneParameters=()=>this.state}};var xs=class t extends We{constructor(r){super({...r,contentRange:gs(r.editor,r.fullInteriorRange)});this.type="InteriorTarget";this.insertionDelimiter=" ";this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.fullInteriorRange;this.fullInteriorRange=r.fullInteriorRange}getCloneParameters(){return{...this.state,fullInteriorRange:this.fullInteriorRange}}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,fullInteriorRange:ml(this.fullInteriorRange,n.fullInteriorRange,!0,!0)})}};function yd(t){let e=qo(t.contentRange,t.prefixRange),r=t.getTrailingDelimiterTarget()??t.getLeadingDelimiterTarget();return r!=null?e.union(r.contentRange):e}var d5=['"',"'","(","[","{","<"],m5=['"',"'",")","]","}",">",",",";",":"];function jn(t){let{editor:e}=t,{start:r}=qo(t.contentRange,t.prefixRange),o=e.document.lineAt(r).text.slice(0,r.character).match(/\s+$/);return o==null?void 0:new Ue({contentRange:new H(r.line,r.character-o[0].length,r.line,r.character),editor:e,isReversed:t.isReversed})}function qn(t){let{editor:e}=t,{end:r}=t.contentRange,o=e.document.lineAt(r).text.slice(r.character).match(/^\s+/);return o==null?void 0:new Ue({contentRange:new H(r.line,r.character,r.line,r.character+o[0].length),editor:e,isReversed:t.isReversed})}function zn(t){let{editor:e}=t,r=qo(t.contentRange,t.prefixRange),{start:n,end:i}=r,o=t.getLeadingDelimiterTarget()?.contentRange??n.toEmptyRange(),s=t.getTrailingDelimiterTarget()?.contentRange??i.toEmptyRange(),l=ms(e,r);return o.union(s).isRangeEqual(l)?l:!s.isEmpty&&(!o.isEmpty||r.start.isEqual(l.start)||d5.includes(h5(e,r)))?r.union(s):!o.isEmpty&&(r.end.isEqual(l.end)||m5.includes(g5(e,r)))?r.union(o):r}function h5(t,e){let{start:r}=e,n=t.document.lineAt(r);return r.isAfter(n.range.start)?t.document.getText(new H(r.translate(void 0,-1),r)):""}function g5(t,e){let{end:r}=e,n=t.document.lineAt(r);return r.isBefore(n.range.end)?t.document.getText(new H(r.translate(void 0,1),r)):""}var oo=class t extends We{constructor(r){super(r);this.type="ScopeTypeTarget";this.scopeTypeType_=r.scopeTypeType,this.removalRange_=r.removalRange,this.interiorRange_=r.interiorRange,this.leadingDelimiterRange_=r.leadingDelimiterRange,this.trailingDelimiterRange_=r.trailingDelimiterRange,this.prefixRange=r.prefixRange,this.insertionDelimiter=r.insertionDelimiter??y5(r.scopeTypeType),this.hasDelimiterRange_=!!this.leadingDelimiterRange_||!!this.trailingDelimiterRange_}getLeadingDelimiterTarget(){if(this.leadingDelimiterRange_!=null)return new Ue({editor:this.editor,isReversed:this.isReversed,contentRange:this.leadingDelimiterRange_});if(!this.hasDelimiterRange_)return jn(this)}getTrailingDelimiterTarget(){if(this.trailingDelimiterRange_!=null)return new Ue({editor:this.editor,isReversed:this.isReversed,contentRange:this.trailingDelimiterRange_});if(!this.hasDelimiterRange_)return qn(this)}getInterior(){return this.interiorRange_==null?super.getInterior():[new xs({editor:this.editor,isReversed:this.isReversed,fullInteriorRange:this.interiorRange_})]}getRemovalRange(){return this.removalRange_!=null?this.removalRange_:this.hasDelimiterRange_?yd(this):zn(this)}maybeCreateRichRangeTarget(r,n){if(this.scopeTypeType_!==n.scopeTypeType_)return null;let i=this.removalRange_!=null||n.removalRange_!=null?ml(this.removalRange_??this.contentRange,n.removalRange_??n.contentRange,!0,!0):void 0;return new t({...this.getCloneParameters(),isReversed:r,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:n.trailingDelimiterRange_,removalRange:i,contentRange:no(this,n,!0,!0)})}getCloneParameters(){return{...this.state,insertionDelimiter:this.insertionDelimiter,prefixRange:this.prefixRange,removalRange:void 0,interiorRange:void 0,scopeTypeType:this.scopeTypeType_,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:this.trailingDelimiterRange_}}};function y5(t){switch(t){case"class":case"namedFunction":case"section":case"sectionLevelOne":case"sectionLevelTwo":case"sectionLevelThree":case"sectionLevelFour":case"sectionLevelFive":case"sectionLevelSix":case"part":case"chapter":case"subSection":case"subSubSection":case"namedParagraph":case"subParagraph":return`

`;case"anonymousFunction":case"statement":case"ifStatement":case"comment":case"xmlElement":case"collectionItem":case"branch":case"environment":return`
`;default:return" "}}var xd=class t extends We{constructor(r){super(r);this.type="SubTokenWordTarget";this.isToken=!1;this.isWord=!0;this.leadingDelimiterRange_=r.leadingDelimiterRange,this.trailingDelimiterRange_=r.trailingDelimiterRange,this.insertionDelimiter=r.insertionDelimiter}getLeadingDelimiterTarget(){return ys(this.editor,this.leadingDelimiterRange_,this.isReversed)}getTrailingDelimiterTarget(){return ys(this.editor,this.trailingDelimiterRange_,this.isReversed)}getRemovalRange(){return yd(this)}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,contentRange:no(this,n,!0,!0),trailingDelimiterRange:n.trailingDelimiterRange_})}getCloneParameters(){return{...this.state,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:this.trailingDelimiterRange_,insertionDelimiter:this.insertionDelimiter}}};var Sr=class extends We{constructor(){super(...arguments);this.type="TokenTarget";this.insertionDelimiter=" "}getLeadingDelimiterTarget(){return jn(this)}getTrailingDelimiterTarget(){return qn(this)}getRemovalRange(){return zn(this)}getCloneParameters(){return this.state}};var Sd=class extends We{constructor(r){super(r);this.type="SurroundingPairTarget";this.insertionDelimiter=" ";this.boundary_=r.boundary,this.interiorRange_=r.interiorRange}getLeadingDelimiterTarget(){return jn(this)}getTrailingDelimiterTarget(){return qn(this)}getRemovalRange(){return zn(this)}getInterior(){return[new xs({editor:this.editor,isReversed:this.isReversed,fullInteriorRange:this.interiorRange_})]}getBoundary(){return this.boundary_.map(r=>new Sr({editor:this.editor,isReversed:this.isReversed,contentRange:r}))}getCloneParameters(){return{...this.state,interiorRange:this.interiorRange_,boundary:this.boundary_}}};var Et=class extends We{constructor(r){super(r);this.type="UntypedTarget";this.insertionDelimiter=" ";this.hasExplicitScopeType=!1;this.hasExplicitRange=r.hasExplicitRange,this.isToken=r.isToken??!0}getLeadingDelimiterTarget(){return jn(this)}getTrailingDelimiterTarget(){return qn(this)}getRemovalRange(){return this.editor.document.getText(this.contentRange).trim().length===0?this.contentRange:zn(this)}maybeCreateRichRangeTarget(){return null}getCloneParameters(){return{...this.state,isToken:this.isToken,hasExplicitRange:this.hasExplicitRange}}};var Td=class extends We{constructor(){super(...arguments);this.type="ImplicitTarget";this.insertionDelimiter="";this.isRaw=!0;this.hasExplicitScopeType=!1;this.isImplicit=!0;this.isToken=!1;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.getCloneParameters=()=>this.state}};var vd=class extends We{constructor(r){let{inputTarget:n,modifiedTarget:i,isHead:o}=r;super({...r,contentRange:lM(n.contentRange,i.contentRange,o)});this.type="HeadTailTarget";this.insertionDelimiter=" ";this.inputTarget=n,this.modifiedTarget=i,this.isHead=o}getLeadingDelimiterTarget(){return jn(this)}getTrailingDelimiterTarget(){return qn(this)}getRemovalRange(){return zn(this)}getInterior(){let r=this.modifiedTarget.getInterior();if(r!=null)return r.map(n=>new Ue({editor:this.editor,contentRange:lM(this.inputTarget.contentRange,n.contentRange,this.isHead),isReversed:this.isReversed}))}getCloneParameters(){return{...this.state,inputTarget:this.inputTarget,modifiedTarget:this.modifiedTarget,isHead:this.isHead}}};function lM(t,e,r){return r?new H(e.start,t.end):new H(t.start,e.end)}function bd(t){return t.activeTextEditor?.selections.map(e=>({selection:e,editor:t.activeTextEditor}))??[]}var Ss=class{run(){return bd(F()).map(e=>new Et({editor:e.editor,isReversed:e.selection.isReversed,contentRange:e.selection,hasExplicitRange:!e.selection.isEmpty,isToken:!1}))}};var Gn=class{constructor(e,r){this.debouncer=new bp(r,e.getOwnConfiguration("decorationDebounceDelayMs")),this.run=this.run.bind(this)}run(){this.debouncer.run()}dispose(){this.debouncer.dispose()}};var wd=class{constructor(e,r){this.ide=e;this.storedTargets=r;this.disposables=[];this.debouncer=new Gn(e.configuration,()=>this.updateKeyboardTarget()),this.disposables.push(e.configuration.onDidChangeConfiguration(()=>this.maybeActivate()),this.debouncer),this.maybeActivate()}maybeActivate(){if(this.ide.configuration.getOwnConfiguration("experimental.keyboardTargetFollowsSelection")){this.selectionWatcherDisposable==null&&(this.selectionWatcherDisposable=this.ide.onDidChangeTextEditorSelection(this.debouncer.run));return}this.selectionWatcherDisposable!=null&&(this.selectionWatcherDisposable.dispose(),this.selectionWatcherDisposable=void 0)}updateKeyboardTarget(){this.ide.activeTextEditor==null||this.storedTargets.get("keyboard")==null||this.storedTargets.set("keyboard",new Ss().run())}dispose(){this.disposables.forEach(e=>e.dispose()),this.selectionWatcherDisposable?.dispose()}};var _d=class{constructor(e){this.ide=e;switch(e.disposeOnExit(this),this.evaluateSetting=this.evaluateSetting.bind(this),this.active=!0,e.runMode){case"development":this.enableDebugLog();break;case"test":this.disableDebugLog();break;case"production":this.evaluateSetting(),this.disposableConfiguration=e.configuration.onDidChangeConfiguration(this.evaluateSetting);break}}log(...e){this.active&&console.log(...e)}dispose(){this.disposableConfiguration&&this.disposableConfiguration.dispose()}enableDebugLog(){this.active=!0}disableDebugLog(){this.active=!1}evaluateSetting(){this.ide.configuration.getOwnConfiguration("debug")?this.enableDebugLog():this.disableDebugLog()}};var x5=["!","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_","`","{","|","}","~","\xA3",'"'],S5=x5.map(Nr).join("|"),T5=["[a-zA-Z0-9]",S5].join("|"),v5=new RegExp(`^(${T5})$`,"u"),b5="[unk]",w5=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}]/gu,Ed=class{constructor(){this.disposables=[];this.algorithmChangeNotifier=new Wt;this.getTokenGraphemes=e=>nn(e,w5,r=>({text:this.normalizeGrapheme(r[0]),tokenStartOffset:r.index,tokenEndOffset:r.index+r[0].length}));this.registerAlgorithmChangeListener=this.algorithmChangeNotifier.registerListener;F().disposeOnExit(this),this.updateTokenHatSplittingMode=this.updateTokenHatSplittingMode.bind(this),this.getTokenGraphemes=this.getTokenGraphemes.bind(this),this.updateTokenHatSplittingMode(),this.disposables.push(F().configuration.onDidChangeConfiguration(this.updateTokenHatSplittingMode))}updateTokenHatSplittingMode(){let{lettersToPreserve:e,symbolsToPreserve:r,...n}=F().configuration.getOwnConfiguration("tokenHatSplittingMode");this.tokenHatSplittingMode={lettersToPreserve:e.map(i=>i.toLowerCase().normalize("NFC")),symbolsToPreserve:r.map(i=>i.normalize("NFC")),...n},this.algorithmChangeNotifier.notifyListeners()}normalizeGrapheme(e){let{preserveCase:r,lettersToPreserve:n,symbolsToPreserve:i}=this.tokenHatSplittingMode,o=e.normalize("NFC");return i.includes(o)||(r||(o=o.toLowerCase()),n.includes(o.toLowerCase()))||(o=Hx(o),v5.test(o)||(o=b5)),o}dispose(){this.disposables.forEach(({dispose:e})=>e())}};function Ts(){return nT==null&&(nT=new Ed),nT}var nT;var uM=({penalty:t})=>-t;function pM(t){return({grapheme:{text:e},style:r})=>{let n=t.get({grapheme:e,hatStyle:r});return n==null?1/0:-n}}function fM(t,e){let r=Oc(n=>Yx(e[n].filter(i=>i>t))??1/0);return({grapheme:{text:n}})=>r(n)}function dM(t){return e=>e.grapheme.text===t?.grapheme&&e.style===t?.hatStyle?1:0}function mM(t){switch(t){case"greedy":return({penalty:e})=>-e;case"balanced":return({penalty:e})=>-(e<2?0:1);case"stable":return e=>0}}function hM(t,e){if(t.length===0)return;let r=t;for(let n of e){if(r.length===1)return r[0];r=_5(r,n)}return r[0]}function _5(t,e){let r=-1/0,n=[];for(let i of t){let o=e(i);o<r||(o>r&&(r=o,n.length=0),n.push(i))}return n}function gM({hatOldTokenRanks:t,graphemeTokenRanks:e},r,n,i,o){return hM(o,[mM(r),dM(i),pM(t),uM,fM(n,e)])}function yM(t,e,r){let n={},i=new to(({grapheme:o,hatStyle:s})=>[o,s]);return t.forEach(({token:o,rank:s})=>{let l=e.get(o);l!=null&&i.set(l,s),r.getTokenGraphemes(o.text).forEach(({text:u})=>{let p;u in n?p=n[u]:(p=[],n[u]=p),p.push(s)})}),{hatOldTokenRanks:i,graphemeTokenRanks:n}}function xM(t,e=[]){return new Map(Kx(tt,Ti)(Lc([e],t.visibleRanges.map(r=>rs(r.start.line,r.end.line+1)))).sort((r,n)=>r-n).map((r,n)=>[r,n]))}function SM(t,e){return(r,n)=>{let i=Math.abs(r.displayLine-t),o=Math.abs(n.displayLine-t);if(i<o)return-1;if(i>o)return 1;let s=Math.abs(r.range.start.character-e),l=Math.abs(n.range.start.character-e);return s-l}}var E5=["-","+","*","/","=","<",">","_","#",".","|","&",":"],R5=["!==","!=","+=","-=","*=","/=","%=","<=",">=","=>","->","??",'"""',"```","/*","*/","<!--","-->"],k5=["\\p{L}","\\p{M}","\\p{N}"],P5="[^\\s\\w]",M5="(?<![.\\d])\\d+\\.\\d+(?![.\\d])";function A5(t){let{fixedTokens:e,repeatableSymbols:r,identifierWordRegexes:n,identifierWordDelimiters:i,numbersRegex:o,singleSymbolsRegex:s}=t,l=r.map(Nr).map(x=>`${x}+`).join("|"),u=e.map(Nr).join("|"),d=`(${n.concat(i.map(Nr)).join("|")})+`,m=`(${n.join("|")})+`,g=[u,o,d,l,s].join("|");return{identifierMatcher:new RegExp(d,"gu"),wordMatcher:new RegExp(m,"gu"),tokenMatcher:new RegExp(g,"gu")}}var iT=new Map;function cn(t){let e=F().configuration.getOwnConfiguration("wordSeparators",{languageId:t}),r=e.join("\0");if(!iT.has(r)){let n={fixedTokens:R5,repeatableSymbols:E5,identifierWordRegexes:k5,identifierWordDelimiters:e,numbersRegex:M5,singleSymbolsRegex:P5};iT.set(r,A5(n))}return iT.get(r)}function TM(t,e,r){return nn(t,cn(e).tokenMatcher,r)}function vM(t,e){let r=t.document.languageId,n=t.document.getText(e),i=t.document.offsetAt(e.start);return TM(n,r,o=>{let s=i+o.index,l=i+o.index+o[0].length,u=new H(t.document.positionAt(s),t.document.positionAt(l));return{editor:t,text:o[0],range:u,offsets:{start:s,end:l}}})}function bM(t,e){return D5(t,e).flatMap(n=>{let i=n.selections[0].active,o=xM(n,[i.line]),s=tt(n.visibleRanges.map(l=>vM(n,l).map(u=>({...u,displayLine:o.get(u.range.start.line)}))));return s.sort(SM(o.get(i.line),i.character)),s.map((l,u)=>({token:l,rank:-u}))})}function D5(t,e){let r;return t==null?r=e:r=[t,...e.filter(n=>n!==t)],r}function oT(t,e,r,n,i,o){let s=I5(r),l=bM(i,o),u=yM(l,s,t),p=Object.keys(e),d=new ps(()=>[...p]);return l.map(({token:m,rank:g})=>{let x=F5(t,m,d,e),v=gM(u,n,g,s.get(m),x);if(v!=null)return d.set(v.grapheme.text,d.get(v.grapheme.text).filter(b=>b!==v.style)),C5(m,v)}).filter(m=>m!=null)}function I5(t){let e=new to(({editor:r,offsets:n})=>[r.id,n.start,n.end]);return t.forEach(r=>e.set(r.token,r)),e}function F5(t,e,r,n){let i=[],o=t.getTokenGraphemes(e.text);for(let s of o)for(let l of r.get(s.text))i.push({grapheme:s,style:l,penalty:n[l].penalty});return i}function C5(t,e){return{hatStyle:e.style,grapheme:e.grapheme.text,token:t,hatRange:new H(t.range.start.translate(void 0,e.grapheme.tokenStartOffset),t.range.start.translate(void 0,e.grapheme.tokenEndOffset))}}var Rd=class{constructor(e,r){this.hats=e;this.context=r;this.disposables=[];F().disposeOnExit(this);let n=new Gn(F().configuration,()=>this.allocateHats());this.disposables.push(this.hats.onDidChangeEnabledHatStyles(n.run),this.hats.onDidChangeIsEnabled(n.run),F().onDidOpenTextDocument(n.run),F().onDidCloseTextDocument(n.run),F().onDidChangeActiveTextEditor(n.run),F().onDidChangeVisibleTextEditors(n.run),F().onDidChangeTextDocument(n.run),F().onDidChangeTextEditorSelection(n.run),F().onDidChangeTextEditorVisibleRanges(n.run),Ts().registerAlgorithmChangeListener(n.run),n)}async allocateHats(e){let r=await this.context.getActiveMap(),n=this.hats.isEnabled?oT(Ts(),this.hats.enabledHatStyles,e??r.tokenHats,F().configuration.getOwnConfiguration("experimental.hatStability"),F().activeTextEditor,F().visibleTextEditors):[];r.setTokenHats(n),await this.hats.setHatRanges(n.map(({hatStyle:i,hatRange:o,token:{editor:s}})=>({editor:s,range:o,styleName:i})))}dispose(){this.disposables.forEach(({dispose:e})=>e())}};var kd=class t{constructor(e){this.rangeUpdater=e;this.isExpired=!1;this.documentTokenLists=new Map;this.deregisterFunctions=[];this.map={};this._tokenHats=[]}get tokenHats(){return this._tokenHats}getDocumentTokenList(e){let r=e.uri.toString(),n=this.documentTokenLists.get(r);return n==null&&(n=[],this.documentTokenLists.set(r,n),this.deregisterFunctions.push(this.rangeUpdater.registerRangeInfoList(e,n))),n}clone(){let e=new t(this.rangeUpdater);return e.setTokenHats(this._tokenHats),e}setTokenHats(e){this.map={},this.documentTokenLists=new Map,this.deregisterFunctions.forEach(n=>n());let r=e.map(n=>{let{hatStyle:i,grapheme:o,token:s}=n,l=this.makeTokenLive(s);return this.map[il(i,o)]=l,{...n,token:l}});this._tokenHats=r}makeTokenLive(e){let{tokenMatcher:r}=cn(e.editor.document.languageId),n={...e,expansionBehavior:{start:{type:"regex",regex:r},end:{type:"regex",regex:r}}};return this.getDocumentTokenList(e.editor.document).push(n),n}getEntries(){return this.checkExpired(),Object.entries(this.map)}getToken(e,r){return this.checkExpired(),this.map[il(e,Ts().normalizeGrapheme(r))]}checkExpired(){if(this.isExpired)throw Error("Map snapshot has expired")}dispose(){this.isExpired=!0,this.deregisterFunctions.forEach(e=>e())}};var N5=6e4,Pd=class{constructor(e,r,n,i){this.debug=r;this.commandServerApi=i;this.prePhraseMapsSnapshotTimestamp=null;this.lastSignalVersion=null;F().disposeOnExit(this),this.activeMap=new kd(e),this.getActiveMap=this.getActiveMap.bind(this),this.allocateHats=this.allocateHats.bind(this),this.hatAllocator=new Rd(n,{getActiveMap:this.getActiveMap})}allocateHats(e){return this.hatAllocator.allocateHats(e)}async getActiveMap(){return await this.maybeTakePrePhraseSnapshot(),this.activeMap}async getReadableMap(e){return await this.maybeTakePrePhraseSnapshot(),e?this.lastSignalVersion==null?(console.error("Pre phrase snapshot requested but no signal was present; please upgrade command client"),this.activeMap):this.prePhraseMapSnapshot==null?(console.error("Navigation map pre-phrase snapshot requested, but no snapshot has been taken"),this.activeMap):performance.now()-this.prePhraseMapsSnapshotTimestamp>N5?(console.error("Navigation map pre-phrase snapshot requested, but snapshot is more than a minute old"),this.activeMap):this.prePhraseMapSnapshot:this.activeMap}dispose(){this.activeMap.dispose(),this.prePhraseMapSnapshot!=null&&this.prePhraseMapSnapshot.dispose()}async maybeTakePrePhraseSnapshot(){let e=await this.commandServerApi.signals.prePhrase.getVersion();e!==this.lastSignalVersion&&(this.debug.log("taking snapshot"),this.lastSignalVersion=e,e!=null&&this.takePrePhraseSnapshot())}takePrePhraseSnapshot(){this.prePhraseMapSnapshot!=null&&this.prePhraseMapSnapshot.dispose(),this.prePhraseMapSnapshot=this.activeMap.clone(),this.prePhraseMapsSnapshotTimestamp=performance.now()}};function aT(t,e,r){let n=t.get(e);return n==null&&(n=r(),t.set(e,n)),n}var uT=fr(gl(),1);function pT(t,e){let{originalOffsets:{start:r,end:n},finalOffsets:{end:i},displacement:o}=t,{offsets:{start:s,end:l}}=e;return(0,uT.invariant)(n>r,()=>"Change range expected to be nonempty"),(0,uT.invariant)(n>=s&&r<=l,()=>"Change range expected to intersect with selection range"),{start:n<=s?s+o:Math.min(s,i),end:n<=l?l+o:Math.min(l,i)}}var PM=fr(gl(),1);function fT(t,e){let{event:{text:r,isReplace:n},finalOffsets:{start:i,end:o}}=t;if((0,PM.invariant)(i===t.originalOffsets.end&&i===e.offsets.start&&i===e.offsets.end,()=>"Selection range and change range expected to be same empty range"),n){let s=e.expansionBehavior.end;switch(s.type){case"closed":return{start:i,end:i};case"open":return{start:i,end:o};case"regex":{let l=r.match(ff(s.regex));return l==null?{start:i,end:i}:{start:i,end:i+l[0].length}}}}else{let s=e.expansionBehavior.start;switch(s.type){case"closed":return{start:o,end:o};case"open":return{start:i,end:o};case"regex":{let l=r.search(pf(s.regex));return l===-1?{start:o,end:o}:{start:i+l,end:o}}}}}var dT=fr(gl(),1);function mT(t,e){let{event:{text:r},originalOffsets:{start:n},displacement:i}=t,{offsets:{start:o,end:s},text:l}=e;if((0,dT.invariant)(s>o,()=>"Selection range expected to be nonempty"),(0,dT.invariant)(n>=o&&n<=s,()=>"Insertion offset expected to intersect with selection range"),n>o&&n<s)return{start:o,end:s+i};if(n===o){let u=e.expansionBehavior.start,p=s+i;switch(u.type){case"closed":return{start:o+i,end:p};case"open":return{start:o,end:p};case"regex":{let d=r+l,m=pf(u.regex),g=d.search(m);for(;g>r.length;)d=d.slice(0,g),g=d.search(m);return g===-1?{start:o,end:p}:{start:o+g,end:p}}}}else{let u=e.expansionBehavior.end,p=o;switch(u.type){case"closed":return{start:p,end:s};case"open":return{start:p,end:s+i};case"regex":{let d=l+r,m=ff(u.regex),g=d.match(m),x=g==null?0:g[0].length;for(;x!==0&&x<l.length;)d=l.slice(x)+r,g=d.match(m),x=g==null?0:x+g[0].length;return x===0?{start:p,end:s}:{start:p,end:o+x}}}}}function MM(t,e,r){let{start:n,end:i}=t.originalOffsets,{start:o,end:s}=e.offsets,l=Math.min(n,o),u="";return o<n&&(u+=e.text.substring(0,n-o)),u+=t.event.text,i<s&&(u+=e.text.substring(s-i,e.text.length)),u.substring(r.start-l,r.end-l)}function AM(t,e){let{document:r,contentChanges:n}=t,i=n.map(o=>{let s=o.text.length-o.rangeLength,l=o.rangeOffset,u=l+o.rangeLength,p=l,d=u+s;return{displacement:s,event:o,originalOffsets:{start:l,end:u},finalOffsets:{start:p,end:d}}});for(let o of e){let s=o.offsets,l=i.map(p=>{let d;return p.originalOffsets.start>s.end?{start:0,end:0}:p.originalOffsets.end<s.start?{start:p.displacement,end:p.displacement}:(p.event.rangeLength===0?o.range.isEmpty?d=fT(p,o):d=mT(p,o):d=pT(p,o),o.text=MM(p,o,d),{start:d.start-s.start,end:d.end-s.end})}),u={start:s.start+of(l,({start:p})=>p),end:s.end+of(l,({end:p})=>p)};o.range=o.range.with(r.positionAt(u.start),r.positionAt(u.end)),o.offsets=u}}var Ad=class{constructor(){this.rangeInfoLists=new Map;this.replaceEditLists=new Map;this.listenForDocumentChanges()}getDocumentRangeInfoLists(e){return aT(this.rangeInfoLists,e.uri.toString(),()=>[])}getDocumentReplaceEditLists(e){return aT(this.replaceEditLists,e.uri.toString(),()=>[])}registerRangeInfoList(e,r){let n=this.getDocumentRangeInfoLists(e);return n.push(r),()=>Xt(n,r)}registerReplaceEditList(e,r){let n=this.getDocumentReplaceEditLists(e);return n.push(r),()=>Xt(n,r)}*documentRangeInfoGenerator(e){let r=this.getDocumentRangeInfoLists(e);for(let n of r)for(let i of n)yield i}listenForDocumentChanges(){this.disposable=F().onDidChangeTextDocument(e=>{let r=this.getDocumentReplaceEditLists(e.document),n={...e,contentChanges:e.contentChanges.map(i=>j5(r,i)?{...i,isReplace:!0}:i)};AM(n,this.documentRangeInfoGenerator(e.document))})}dispose(){this.disposable.dispose()}};function j5(t,e){for(let r of t)for(let n of r)if(n.range.isRangeEqual(e.range)&&n.text===e.text)return!0;return!1}var Dd=class{constructor(){this.signals={prePhrase:{getVersion(){return Promise.resolve(null)}}}}getFocusedElementType(){return Promise.resolve(void 0)}};var Id=class{async allocateHats(){}async getReadableMap(){return{getEntries(){return[]},getToken(){throw new Error("Hat map is disabled")}}}dispose(){}};var Fd=class{onDidChangeDefinition(e){return{dispose:()=>{}}}loadLanguage(e){return Promise.resolve()}get(e){}getNodeAtLocation(e,r){}dispose(){}};var Cd=class{updateUserSnippets(){throw new Error("Snippets are not implemented.")}registerThirdPartySnippets(e,r){throw new Error("Snippets are not implemented.")}getSnippetStrict(e){throw new Error("Snippets are not implemented.")}openNewSnippetFile(e){throw new Error("Snippets are not implemented.")}};var Nd=class{getSpokenFormEntries(){throw new us}onDidChange(){return{dispose:()=>{}}}};var Od=class{getTree(e){throw new Error("Tree sitter not provided")}loadLanguage(e){return Promise.resolve(!1)}getLanguage(e){throw new Error("Tree sitter not provided")}getNodeAtLocation(e,r){throw new Error("Tree sitter not provided")}};var Ge=class extends Error{constructor(r,n=!1,i=!1){super(`No spoken form for: ${r}`);this.reason=r;this.requiresTalonUpdate=n;this.isPrivate=i}};var DM={curlyBrackets:["{","}"],angleBrackets:["<",">"],escapedDoubleQuotes:['\\"','\\"'],escapedSingleQuotes:["\\'","\\'"],escapedParentheses:["\\(","\\)"],escapedSquareBrackets:["\\[","\\]"],doubleQuotes:['"','"'],parentheses:["(",")"],backtickQuotes:["`","`"],squareBrackets:["[","]"],singleQuotes:["'","'"],whitespace:[" "," "],any:null,string:null,collectionBoundary:null};var IM=new to(t=>t);for(let[t,e]of Object.entries(DM))e!=null&&IM.set(e,t);function FM(t,e,r){let n=IM.get([e,r]);if(n==null)throw Error(`Unknown surrounding pair delimiters '${e} ${r}'`);return t.pairedDelimiter[n]}var q5={ifStatement:"if",ifElseStatement:"if else",tryCatchStatement:"try",functionDeclaration:"funk",link:"link"},z5={"ifElseStatement.alternative":"else","functionDeclaration.body":"funk","ifElseStatement.consequence":"if else","ifStatement.consequence":"if","tryCatchStatement.body":"try","link.text":"link"};function CM(t){if(t.type==="custom")throw new Ge("Custom insertion snippet");let e=q5[t.name];if(e==null)throw new Ge(`Named insertion snippet '${t.name}'`);if(t.substitutions!=null){let r=Object.values(t.substitutions);return`${e} ${r.join(" ")}`}return e}function NM(t){if(t.type==="custom")throw new Ge("Custom wrap with snippet");let e=`${t.name}.${t.variableName}`,r=z5[e];if(r==null)throw new Ge(`Named wrap with snippet '${e}'`);return r}function yl(t,e,r){let n=r==="vertical"?`${pt.verticalRange} `:"";if(t&&e)return n+pt.rangeExclusive;if(t)throw new Ge("Range exclude anchor");return e?n+pt.rangeExcludingEnd:r==="vertical"?pt.verticalRange:pt.rangeInclusive}function OM(t){return Object.fromEntries(Object.entries(t).map(([e,r])=>[e,Object.fromEntries(Object.entries(r).map(([n,i])=>[n,{type:"customizable",spokenForms:i,spokenFormType:e,id:n}]))]))}var G5=["zero","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen","twenty","twenty one","twenty two","twenty three","twenty four","twenty five","twenty six","twenty seven","twenty eight","twenty nine","thirty","thirty one","thirty two","thirty three","thirty four","thirty five","thirty six","thirty seven","thirty eight","thirty nine","forty","forty one","forty two","forty three","forty four","forty five","forty six","forty seven","forty eight","forty nine","fifty","fifty one","fifty two","fifty three","fifty four","fifty five","fifty six","fifty seven","fifty eight","fifty nine","sixty","sixty one","sixty two","sixty three","sixty four","sixty five","sixty six","sixty seven","sixty eight","sixty nine","seventy","seventy one","seventy two","seventy three","seventy four","seventy five","seventy six","seventy seven","seventy eight","seventy nine","eighty","eighty one","eighty two","eighty three","eighty four","eighty five","eighty six","eighty seven","eighty eight","eighty nine","ninety","ninety one","ninety two","ninety three","ninety four","ninety five","ninety six","ninety seven","ninety eight","ninety nine"],K5=["zeroth","first","second","third","fourth","fifth","sixth","seventh","eighth","ninth","tenth","eleventh","twelfth","thirteenth","fourteenth","fifteenth","sixteenth","seventeenth","eighteenth","nineteenth","twentieth"];function vs(t){let e=G5[t];if(e==null)throw Error(`Unknown number '${t}'`);return e}function xl(t){let e=K5[t];if(e==null)throw Error(`Unknown ordinal '${t}'`);return e}var Ld=class{constructor(e){this.spokenFormMap=e;this.handleModifier=this.handleModifier.bind(this)}handlePrimitiveTarget(e){let r=[];return e.modifiers!=null&&r.push(e.modifiers.map(this.handleModifier)),e.mark!=null&&r.push(this.handleMark(e.mark)),r}handleModifier(e){switch(e.type){case"cascading":case"modifyIfUntyped":throw new Ge(`Modifier '${e.type}'`);case"containingScope":if(e.ancestorIndex==null||e.ancestorIndex===0)return this.handleScopeType(e.scopeType);if(e.ancestorIndex===1)return[this.spokenFormMap.modifierExtra.ancestor,this.handleScopeType(e.scopeType)];throw new Ge(`Modifier '${e.type}' with ancestor index ${e.ancestorIndex}`);case"everyScope":return[this.spokenFormMap.simpleModifier.everyScope,this.handleScopeType(e.scopeType)];case"extendThroughStartOf":case"extendThroughEndOf":{let r=this.spokenFormMap.simpleModifier[e.type];return e.modifiers!=null?[r,e.modifiers.map(this.handleModifier)]:[r]}case"relativeScope":return e.offset===0?this.handleRelativeScopeInclusive(e):this.handleRelativeScopeExclusive(e);case"ordinalScope":{let r=this.handleScopeType(e.scopeType),n=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.length===1)return e.start===-1?[n,this.spokenFormMap.modifierExtra.last,r]:e.start===0?[n,this.spokenFormMap.modifierExtra.first,r]:e.start<0?[n,xl(Math.abs(e.start)),this.spokenFormMap.modifierExtra.last,r]:[n,xl(e.start+1),r];let i=vs(e.length);if(e.start===0)return[n,this.spokenFormMap.modifierExtra.first,i,Sl(r)];if(e.start===-e.length)return[n,this.spokenFormMap.modifierExtra.last,i,Sl(r)];throw new Ge(`'${e.type}' with count > 1 and offset away from start / end`)}case"range":{if(e.anchor.type==="ordinalScope"&&e.active.type==="ordinalScope"&&e.anchor.length===1&&e.active.length===1&&e.anchor.scopeType.type===e.active.scopeType.type){let r=e.anchor.start===-1?this.spokenFormMap.modifierExtra.last:xl(e.anchor.start+1),n=this.handleModifier(e.active),i=yl(e.excludeAnchor,e.excludeActive);return[r,i,n]}throw Error(`Modifier '${e.type}' is not fully implemented`)}default:return[this.spokenFormMap.simpleModifier[e.type]]}}handleRelativeScopeInclusive(e){let r=this.handleScopeType(e.scopeType),n=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.length===1){let s=e.direction==="forward"?pt.forward:pt.backward;return[n,r,s]}let i=vs(e.length),o=Sl(r);return e.direction==="forward"?[n,i,o]:[n,i,o,pt.backward]}handleRelativeScopeExclusive(e){let r=this.handleScopeType(e.scopeType),n=e.direction==="forward"?pt.next:pt.previous,i=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.offset===1){let o=vs(e.length);if(e.length===1)return[i,n,r];let s=Sl(r);return[i,n,o,s]}if(e.length===1){let o=xl(e.offset);return[i,o,n,r]}throw new Ge(`${e.type} modifier with offset > 1 and length > 1`)}handleScopeType(e){switch(e.type){case"oneOf":throw new Ge(`Scope type '${e.type}'`);case"glyph":return[this.spokenFormMap.complexScopeTypeType.glyph,UM(this.spokenFormMap.grapheme,"grapheme",e.character)];case"surroundingPair":{let r=this.spokenFormMap.pairedDelimiter[e.delimiter];return e.forceDirection!=null?[this.spokenFormMap.surroundingPairForceDirection[e.forceDirection],r]:r}case"customRegex":return this.spokenFormMap.customRegex[e.regex]??{type:"customizable",spokenForms:{spokenForms:[],isCustom:!0,defaultSpokenForms:[],requiresTalonUpdate:!1,isPrivate:!1},spokenFormType:"customRegex",id:e.regex};default:return this.spokenFormMap.simpleScopeTypeType[e.type]}}handleMark(e){switch(e.type){case"decoratedSymbol":{let[r,n]=e.symbolColor.split("-"),i=[];return r!=="default"&&i.push(DP(r)),n!=null&&i.push(IP(n)),i.push(UM(this.spokenFormMap.grapheme,"grapheme",e.character)),i}case"lineNumber":return this.handleLineNumberMark(e);case"range":{if(e.anchor.type==="lineNumber"&&e.active.type==="lineNumber"){let[r,n]=this.handleLineNumberMark(e.anchor),[i,o]=this.handleLineNumberMark(e.active);if(r===i){let s=yl(e.excludeAnchor,e.excludeActive);return[r,n,s,o]}}throw Error(`Mark '${e.type}' is not fully implemented`)}case"explicit":case"keyboard":case"target":throw new Ge(`Mark '${e.type}'`);default:return[Qf[e.type]]}}handleLineNumberMark(e){switch(e.lineNumberType){case"absolute":throw new Ge("Absolute line numbers");case"modulo100":return[Yf.modulo100,vs(e.lineNumber+1)];case"relative":return[e.lineNumber<0?Yf.relativeUp:Yf.relativeDown,vs(Math.abs(e.lineNumber))]}}};function Sl(t){if(typeof t=="string")return LM(t);if(Array.isArray(t)){if(t.length===0)return t;let e=t[t.length-1];return[...t.slice(0,-1),Sl(e)]}return{...t,spokenForms:{...t.spokenForms,spokenForms:t.spokenForms.spokenForms.map(LM)}}}function LM(t){return`${t}s`}function UM(t,e,r){let n=t[r];if(n==null)throw new Ge(`${e} '${r}'`);return n}var bs=class{constructor(e){this.spokenFormMap=OM(e),this.primitiveGenerator=new Ld(this.spokenFormMap)}getSpokenFormForSingleTerm(e,r){return this.componentsToSpokenForm(()=>{let n=this.spokenFormMap[e][r];if(n==null)throw new Ge(`${e} with id ${r}`);return n})}processCommand(e){return this.componentsToSpokenForm(()=>this.handleAction(e.action))}processScopeType(e){return this.componentsToSpokenForm(()=>[this.primitiveGenerator.handleScopeType(e)])}componentsToSpokenForm(e){try{return{type:"success",spokenForms:BM(e())}}catch(r){if(r instanceof Ge)return{type:"error",reason:r.reason,requiresTalonUpdate:r.requiresTalonUpdate,isPrivate:r.isPrivate};throw r}}handleAction(e){switch(e.name){case"editNew":case"getText":case"replace":case"executeCommand":case"parsed":case"private.getTargets":case"private.setKeyboardTarget":throw new Ge(`Action '${e.name}'`);case"replaceWithTarget":case"moveToTarget":return[this.spokenFormMap.action[e.name],this.handleTarget(e.source),this.handleDestination(e.destination)];case"swapTargets":return[this.spokenFormMap.action[e.name],this.handleTarget(e.target1),pt.swapConnective,this.handleTarget(e.target2)];case"callAsFunction":return e.argument.type==="implicit"?[this.spokenFormMap.action[e.name],this.handleTarget(e.callee)]:[this.spokenFormMap.action[e.name],this.handleTarget(e.callee),"on",this.handleTarget(e.argument)];case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return[FM(this.spokenFormMap,e.left,e.right),this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"pasteFromClipboard":return[this.spokenFormMap.action[e.name],this.handleDestination(e.destination)];case"insertSnippet":return[this.spokenFormMap.action[e.name],CM(e.snippetDescription),this.handleDestination(e.destination)];case"generateSnippet":if(e.snippetName!=null)throw new Ge(`${e.name}.snippetName`);return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"wrapWithSnippet":return[NM(e.snippetDescription),this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"highlight":{if(e.highlightId!=null)throw new Ge(`${e.name}.highlightId`);return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)]}default:return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)]}}handleTarget(e){switch(e.type){case"list":if(e.elements.length<2)throw new Ge("List target with < 2 elements");return e.elements.map((r,n)=>n===0?this.handleTarget(r):[pt.listConnective,this.handleTarget(r)]);case"range":{let r=this.handleTarget(e.anchor),n=this.handleTarget(e.active),i=yl(e.excludeAnchor,e.excludeActive,e.rangeType);return[r,i,n]}case"primitive":return this.primitiveGenerator.handlePrimitiveTarget(e);case"implicit":return[]}}handleDestination(e){switch(e.type){case"list":if(e.destinations.length<2)throw new Ge("List destination with < 2 elements");return e.destinations.map((r,n)=>n===0?this.handleDestination(r):[pt.listConnective,this.handleDestination(r)]);case"primitive":return[this.handleInsertionMode(e.insertionMode),this.handleTarget(e.target)];case"implicit":return[]}}handleInsertionMode(e){switch(e){case"to":return pt.sourceDestinationConnective;case"before":return pt.before;case"after":return pt.after}}};function BM(t){if(typeof t=="string")return[t];if(Array.isArray(t))return t.length===0?[""]:VM(t.map(BM)).map(e=>e.filter(r=>r.length!==0).join(" "));if(t.spokenForms.spokenForms.length===0){let e=`${tl(t.spokenFormType)} with id ${t.id}`,r;throw t.spokenForms.isPrivate?r="this is a private spoken form currently only for internal experimentation":t.spokenForms.requiresTalonUpdate?r="please update talon to the latest version (see https://www.cursorless.org/docs/user/updating/)":r="please see https://www.cursorless.org/docs/user/customization/ for more information",new Ge(`${e}; ${r}`,t.spokenForms.requiresTalonUpdate,t.spokenForms.isPrivate)}return t.spokenForms.spokenForms}function VM(t){if(t.length===0)return[];if(t.length===1)return t[0].map(i=>[i]);let[e,...r]=t,n=VM(r);return e.flatMap(i=>n.map(o=>[i,...o]))}var Ud=class{constructor(e){this.talonSpokenForms=e;this.notifier=new Wt;this.spokenFormMap_={..._i};this.onDidChangeCustomSpokenForms=this.notifier.registerListener;this.disposable=e.onDidChange(()=>this.updateSpokenFormMaps().catch(()=>{})),this.customSpokenFormsInitialized=this.updateSpokenFormMaps(),this.customSpokenFormsInitialized.catch(()=>{})}get spokenFormMap(){return this.spokenFormMap_}get needsInitialTalonUpdate(){return this.needsInitialTalonUpdate_}async updateSpokenFormMaps(){let e;try{if(e=await this.talonSpokenForms.getSpokenFormEntries(),e.length===0)throw new Error("Custom spoken forms list empty")}catch(r){if(r instanceof el)this.needsInitialTalonUpdate_=!0;else if(!(r instanceof us)){console.error("Error loading custom spoken forms",r);let n=r.message.replace(/\.$/,"");ut(F().messages,"CustomSpokenForms.updateSpokenFormMaps",`Error loading custom spoken forms: ${n}. Falling back to default spoken forms.`)}throw this.spokenFormMap_={..._i},this.notifier.notifyListeners(),r}for(let r of qk)Z5(this.spokenFormMap_,r,HS[r],Object.fromEntries(e.filter(n=>n.type===r).map(({id:n,spokenForms:i})=>[n,i])));this.notifier.notifyListeners()}getCustomRegexScopeTypes(){return Object.keys(this.spokenFormMap_.customRegex).map(e=>({type:"customRegex",regex:e}))}dispose(){this.disposable.dispose()}};function Z5(t,e,r,n){let i=Array.from(new Set([...Object.keys(r),...Object.keys(n)])),o={};for(let s of i){let{defaultSpokenForms:l=[],isPrivate:u=!1}=r[s]??{},p=n[s];o[s]=p==null?{defaultSpokenForms:l,spokenForms:[],requiresTalonUpdate:!u,isCustom:!1,isPrivate:u}:{defaultSpokenForms:l,spokenForms:p,requiresTalonUpdate:!1,isCustom:!Si(l,p),isPrivate:u}}t[e]=o}var Bd=class{constructor(e){this.customSpokenForms=new Ud(e),this.customSpokenFormsInitialized=this.customSpokenForms.customSpokenFormsInitialized,this.spokenFormGenerator=new bs(this.customSpokenForms.spokenFormMap),this.disposable=this.customSpokenForms.onDidChangeCustomSpokenForms(()=>{this.spokenFormGenerator=new bs(this.customSpokenForms.spokenFormMap)})}onDidChangeCustomSpokenForms(e){return this.customSpokenForms.onDidChangeCustomSpokenForms(e)}commandToSpokenForm(e){return this.spokenFormGenerator.processCommand(e)}scopeTypeToSpokenForm(e){return this.spokenFormGenerator.processScopeType(e)}actionIdToSpokenForm(e){return this.spokenFormGenerator.getSpokenFormForSingleTerm("action",e)}graphemeToSpokenForm(e){return this.spokenFormGenerator.getSpokenFormForSingleTerm("grapheme",e)}getCustomRegexScopeTypes(){return this.customSpokenForms.getCustomRegexScopeTypes()}get needsInitialTalonUpdate(){return this.customSpokenForms.needsInitialTalonUpdate}dispose(){this.disposable.dispose()}};function*Q5(t){for(let e of t)for(let r of e)yield r}function*Tl(t,e){let r=Vd(e),n=t;for(;n-- >0;){let i=r.next();if(!i.done)yield i.value;else return}}function*HM(t){let e=Vd(t),r=e.next();if(r.done)return;let n=r.value;for(let i of e)yield[n,i],n=i}var $_e=Symbol();function*Y5(t=0,e=1){let r=t;for(;;)yield r,r+=e}function*$M(t,e){for(let r of t)e(r)&&(yield r)}function*Nt(t,e){for(let r of t)yield e(r)}function*jM(t,e,r,n=1){let i,o;if(r!==void 0?(i=e,o=r):(i=0,o=e),i<0)throw new Error("start cannot be negative");if(o!==null&&o<0)throw new Error("stop cannot be negative");if(n<=0)throw new Error("step cannot be negative");let s=-1,l=Vd(t),u;for(;;){if(s++,o!==null&&s>=o||(u=l.next(),u.done))return;s<i||(s-i)%n===0&&(yield u.value)}}function*X5(t,e){let r=Vd(t),n;for(;!(n=r.next()).done;){let i=n.value;if(!e(i))return;yield i}}function Vd(t){return t[Symbol.iterator]()}function ws(t,e){return Array.from(Nt(t,e))}function WM(t,e,r){let n=Y5(t,r),i=r>=0?o=>o<e:o=>o>e;return X5(n,i)}function qM(t,e,r=1){return e!==void 0?WM(t,e,r):WM(0,t,r)}function Wd(t,e){return Q5(Nt(t,e))}function Go(t,e,{domain:r},{domain:n}){return t==="forward"?J5(e,r,n):e9(e,r,n)}function J5(t,e,r){let n=e.start.isAfterOrEqual(t),i=r.start.isAfterOrEqual(t);if(n&&i){let s=e.start.compareTo(r.start);return s===0?e.end.compareTo(r.end):s}if(!n&&!i){let s=e.end.compareTo(r.end);return s===0?-e.start.compareTo(r.start):s}if(!n&&i){let s=e.end.compareTo(r.start);return s!==0?s:r.isEmpty?1:-1}let o=e.start.compareTo(r.end);return o!==0?o:e.isEmpty?-1:1}function e9(t,e,r){let n=e.end.isBeforeOrEqual(t),i=r.end.isBeforeOrEqual(t);if(n&&i){let s=-e.end.compareTo(r.end);return s===0?-e.start.compareTo(r.start):s}if(!n&&!i){let s=-e.start.compareTo(r.start);return s===0?e.end.compareTo(r.end):s}if(!n&&i){let s=-e.start.compareTo(r.end);return s!==0?s:r.isEmpty?1:-1}let o=-e.end.compareTo(r.start);return o!==0?o:e.isEmpty?-1:1}function zM(t,e,r,n,i,o){return t9(t,n,i,o)&&(i==null||Go(r,n.includeDescendantScopes?t:e,i,o)<0)}function t9(t,e,r,n){let{containment:i,distalPosition:o,allowAdjacentScopes:s,skipAncestorScopes:l}=e,{domain:u}=n;switch(i){case"disallowed":if(u.contains(t))return!1;break;case"disallowedIfStrict":if(cM(u,t))return!1;break;case"required":if(!u.contains(t))return!1;break}return l&&r!=null&&u.contains(r.domain)?!1:r9(new H(t,o),u,s)}function r9(t,e,r){let n=t.intersection(e);return n==null?!1:!n.isEmpty||r||e.isEmpty}var n9={containment:null,allowAdjacentScopes:!1,skipAncestorScopes:!1,includeDescendantScopes:!1},Tr=class{constructor(){this.includeAdjacentInEvery=!1}*generateScopes(e,r,n,i={}){let o={...n9,...i,distalPosition:i.distalPosition??(n==="forward"?e.document.range.end:e.document.range.start)},s,l=r;for(let u of this.generateScopeCandidates(e,r,n,o))if(zM(r,l,n,o,s,u)&&(yield u,s=u,l=n==="forward"?u.domain.end:u.domain.start),this.canStopEarly(r,n,o,s,u))return}canStopEarly(e,r,n,i,o){let{containment:s,distalPosition:l,skipAncestorScopes:u}=n;if(this.isHierarchical&&!u)return!1;let p=this.isHierarchical&&u?i:o;return p==null?!1:!!(s==="required"&&(r==="forward"?p.domain.end.isAfter(e):p.domain.start.isBefore(e))||(r==="forward"?p.domain.end.isAfterOrEqual(l):p.domain.start.isBeforeOrEqual(l)))}};var vr=class extends Tr{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.scopeType=n;this.languageId=i;this.isHierarchical=!1}get searchScopeType(){return this.iterationScopeType}get searchScopeHandler(){return this._searchScopeHandler==null&&(this._searchScopeHandler=this.scopeHandlerFactory.create(this.searchScopeType,this.languageId)),this._searchScopeHandler}generateScopeCandidates(r,n,i,o){let{containment:s,...l}=o,u=this.searchScopeHandler.generateScopes(r,n,i,{containment:s==="required"?"required":void 0,...l});return Wd(u,p=>this.generateScopesInSearchScope(i,p))}};var Hd=class extends Tr{constructor(r,n){super();this.scopeType={type:"line"};this.iterationScopeType={type:"paragraph"};this.isHierarchical=!1;this.includeAdjacentInEvery=!0}*generateScopeCandidates(r,n,i){if(i==="forward")for(let o=n.line;o<r.document.lineCount;o++)yield GM(r,o);else for(let o=n.line;o>=0;o--)yield GM(r,o)}};function GM(t,e){let{range:r}=t.document.lineAt(e);return{editor:t,domain:r,getTargets:n=>[hT(t,n,r)]}}function hT(t,e,r){return new Pn({editor:t,isReversed:e,contentRange:vl(t,r)})}function vl(t,e){let r=t.document.lineAt(e.start),n=t.document.lineAt(e.end);return new H(r.lineNumber,r.firstNonWhitespaceCharacterIndex,n.lineNumber,n.lastNonWhitespaceCharacterIndex)}function Zn(t,e,r,n){let i=e.document.offsetAt(r.start),o=e.document.getText(r),s=l=>new H(e.document.positionAt(i+l.index),e.document.positionAt(i+l.index+l[0].length));return t.lastIndex=0,n==="forward"?Nt(o.matchAll(t),s):Array.from(o.matchAll(t),s).reverse()}var $d=class extends vr{constructor(){super(...arguments);this.scopeType={type:"identifier"};this.iterationScopeType={type:"line"};this.regex=cn(this.languageId).identifierMatcher}generateScopesInSearchScope(r,{editor:n,domain:i}){return Nt(Zn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new Sr({editor:n,contentRange:o,isReversed:s})]}))}};function jd(t,e,r){let n=t.editor.document.getText(t.domain),i=e.editor.document.getText(e.domain);for(let o of r){let s=$c(o,n),l=$c(o,i);if(s&&!l)return!0;if(l&&!s)return!1}}var i9=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}\p{Z}\p{C}]/gu,o9=/[$]/g,a9=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}]/gu,qd=class extends vr{constructor(){super(...arguments);this.scopeType={type:"character"};this.iterationScopeType={type:"token"}}get searchScopeType(){return{type:"line"}}generateScopesInSearchScope(r,{editor:n,domain:i}){return Nt(Zn(i9,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new Ue({editor:n,contentRange:o,isReversed:s,isToken:!1})]}))}isPreferredOver(r,n){let{identifierMatcher:i}=cn(this.languageId);return jd(r,n,[i,o9,a9])}};var s9=/\p{Lu}?\p{Ll}+|\p{Lu}+(?!\p{Ll})|\p{N}+/gu,zd=class{constructor(e){this.wordRegex=cn(e).wordMatcher}splitIdentifier(e){let r=jc(e,this.wordRegex);return r.length>1?r:jc(e,s9)}};var Gd=class extends vr{constructor(){super(...arguments);this.scopeType={type:"word"};this.iterationScopeType={type:"identifier"};this.wordTokenizer=new zd(this.languageId)}getScopesInSearchScope({editor:r,domain:n}){let{document:i}=r,o=i.offsetAt(n.start),l=this.wordTokenizer.splitIdentifier(i.getText(n)).map(u=>new H(i.positionAt(o+u.index),i.positionAt(o+u.index+u.text.length)));return l.map((u,p)=>({editor:r,domain:u,getTargets:d=>{let m=p>0?l[p-1]:null,g=p+1<l.length?l[p+1]:null;return[c9(d,r,m,u,g)]}}))}generateScopesInSearchScope(r,n){let i=this.getScopesInSearchScope(n);return r==="backward"&&i.reverse(),i}};function c9(t,e,r,n,i){let o=r!=null&&n.start.isAfter(r.end)?new H(r.end,n.start):void 0,s=i!=null&&i.start.isAfter(n.end)?new H(n.end,i.start):void 0,u=o!=null||s!=null?e.document.getText(o??s):"";return new xd({editor:e,isReversed:t,contentRange:n,insertionDelimiter:u,leadingDelimiterRange:o,trailingDelimiterRange:s})}var l9=/[$]/g,Kd=class extends vr{constructor(){super(...arguments);this.scopeType={type:"token"};this.iterationScopeType={type:"line"};this.regex=cn(this.languageId).tokenMatcher}generateScopesInSearchScope(r,{editor:n,domain:i}){return Nt(Zn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new Sr({editor:n,contentRange:o,isReversed:s})]}))}isPreferredOver(r,n){let{identifierMatcher:i}=cn(this.languageId);return jd(r,n,[i,l9])}};var Zd=class extends Tr{constructor(r,n){super();this.scopeType={type:"document"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i){let o=r.document.range;yield{editor:r,domain:o,getTargets:s=>[new dd({editor:r,isReversed:s,contentRange:o})]}}};function KM(t,e,r){let n=[],i=[];for(let o of t)i.length===0||e(i[i.length-1],o)?i.push(o):(n.push(r(i)),i=[o]);return i.length>0&&n.push(r(i)),n}var _s=class extends Tr{constructor(r){super();this.query=r}*generateScopeCandidates(r,n,i,o){let{document:s}=r,l=this.query.matches(s).map(u=>this.matchToScope(r,u)).filter(u=>u!=null).sort((u,p)=>Go(i,n,u,p));yield*KM(l,(u,p)=>u.domain.isRangeEqual(p.domain),u=>u.length===1?u[0]:{...u[0],getTargets(p){let d=Uc(u.flatMap(m=>m.getTargets(p)),(m,g)=>m.isEqual(g));if(d.length>1&&!u.every(m=>m.allowMultiple)){let m="Please use #allow-multiple! predicate in your query to allow multiple matches for this scope type";if(ut(F().messages,"BaseTreeSitterScopeHandler.allow-multiple",m),F().runMode==="test")throw Error(m)}return d}})}};function gT(t,e,r,n){return n?Es(t,`${e}.${r}`,`_.${r}`):Es(t,`${e}.${r}`)??(Es(t,e)!=null?Es(t,`_.${r}`):void 0)}function ki(t,e,r,n){return gT(t,e,r,n)?.range}function Es(t,...e){return t.captures.find(r=>e.some(n=>r.name===n))}var Qd=class extends _s{constructor(r,n){super(r);this.iterateeScopeType=n;this.isHierarchical=!0;this.scopeType=void 0}get iterationScopeType(){throw Error("Not implemented")}matchToScope(r,n){let i=this.iterateeScopeType.type,o=gT(n,i,"iteration",!1);if(o==null)return;let{range:s,allowMultiple:l}=o,u=ki(n,i,"iteration.domain",!1)??s;return{editor:r,domain:u,allowMultiple:l,getTargets:p=>[new Ue({editor:r,isReversed:p,contentRange:s})]}}};var Yd=class extends _s{constructor(r,n){super(r);this.scopeType=n;this.isHierarchical=!0}get iterationScopeType(){return{type:"custom",scopeHandler:new Qd(this.query,this.scopeType)}}matchToScope(r,n){let i=this.scopeType.type,o=Es(n,i);if(o==null)return;let{range:s,allowMultiple:l,insertionDelimiter:u}=o,p=ki(n,i,"domain",!0)??s,d=ki(n,i,"removal",!0),m=ki(n,i,"interior",!0),g=ki(n,i,"prefix",!0)?.with(void 0,s.start),x=ki(n,i,"leading",!0)?.with(void 0,g?.start??s.start),v=ki(n,i,"trailing",!0)?.with(s.end);return{editor:r,domain:p,allowMultiple:l,getTargets:b=>[new oo({scopeTypeType:i,editor:r,isReversed:b,contentRange:s,prefixRange:g,removalRange:d,leadingDelimiterRange:x,trailingDelimiterRange:v,interiorRange:m,insertionDelimiter:u})]}}};function ZM(t){return t.flatMap(e=>{let{value:r,done:n}=e.next();return n?[]:[{iterator:e,value:r}]})}function QM(t,e){return t.flatMap(r=>{let{iterator:n}=r,{value:i}=r,o=!1;for(;!e(i)&&!o;)({value:i,done:o}=n.next());return o?[]:[{iterator:n,value:i}]})}var Xd=class t extends Tr{constructor(r,n,i){super();this.scopeType=r;this.scopeHandlers=n;this.getIterationScopeType=i;this.isHierarchical=!0}static create(r,n,i){let o=n.scopeTypes.map(l=>{let u=r.create(l,i);if(u==null)throw new Error(`No available scope handler for '${l.type}'`);return u}),s=()=>({type:"custom",scopeHandler:new t(void 0,o.map(l=>r.create(l.iterationScopeType,i)),()=>{throw new Error("Not implemented")})});return new t(n,o,s)}get iterationScopeType(){return this.getIterationScopeType()}*generateScopeCandidates(r,n,i,o){let s=this.scopeHandlers.map(u=>u.generateScopes(r,n,i,o)[Symbol.iterator]()),l=ZM(s);for(;l.length>0;){l.sort((p,d)=>Go(i,n,p.value,d.value));let u=l[0].value;yield u,l=QM(l,p=>Go(i,n,u,p)<0)}}};var Jd=class extends Tr{constructor(r,n){super();this.scopeType={type:"paragraph"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i){let{document:o}=r,s=i==="forward"?1:-1,l=i==="forward"?o.lineCount:-1,u=u9(o,n,i),p=r.document.lineAt(n);for(let d=n.line+s;d!==l;d+=s){let m=r.document.lineAt(d);m.isEmptyOrWhitespace?u!=null&&(yield YM(r,u.range.union(p.range)),u=void 0):u==null&&(u=m),p=m}u!=null&&(yield YM(r,u.range.union(p.range)))}};function u9(t,e,r){let n=r==="forward"?-1:1,i=r==="forward"?-1:t.lineCount,o=t.lineAt(e);if(!o.isEmptyOrWhitespace){for(let s=e.line+n;s!==i;s+=n){let l=t.lineAt(s);if(l.isEmptyOrWhitespace)break;o=l}return o}}function YM(t,e){return{editor:t,domain:e,getTargets:r=>[new gd({editor:t,isReversed:r,contentRange:vl(t,e)})]}}function bl(t,e){return e.length>1?e.indexOf(t.slice(-1))>-1:t.slice(-1)===e}function XM(t,e){return t.slice(t.length-e.length)===e}var yT,f9=["al","adj","assn","Ave","BSc","MSc","Cell","Ch","Co","cc","Corp","Dem","Dept","ed","eg","Eq","Eqs","est","est","etc","Ex","ext","Fig","fig","Figs","figs","i.e","ie","Inc","inc","Jan","Feb","Mar","Apr","Jun","Jul","Aug","Sep","Sept","Oct","Nov","Dec","jr","mi","Miss","Mrs","Mr","Ms","Mol","mt","mts","no","Nos","PhD","MD","BA","MA","MM","pl","pop","pp","Prof","Dr","pt","Ref","Refs","Rep","repr","rev","Sec","Secs","Sgt","Col","Gen","Rep","Sen","Gov","Lt","Maj","Capt","St","Sr","sr","Jr","jr","Rev","Sun","Mon","Tu","Tue","Tues","Wed","Th","Thu","Thur","Thurs","Fri","Sat","trans","Univ","Viz","Vol","vs","v"];function JM(t){t?yT=t:yT=f9}function xT(t){return/^[A-Z][a-z].*/.test(t)||em(t)}function eA(t){return xT(t)||/``|"|'/.test(t.substring(0,2))}function tA(t){let e=t.replace(/[-'`~!@#$%^&*()_|+=?;:'",.<>{}[\]\\/]/gi,"");return~yT.indexOf(e)}function rA(t,e){return(t==="a.m."||t==="p.m.")&&e.replace(/\W+/g,"").slice(-3).toLowerCase()==="day"}function ST(t){let e=t.replace(/[()[]{}]/g,"").match(/(.\.)*/);return e&&e[0].length>0}function nA(t){return t.length<=3?!0:xT(t)}function TT(t,e){return e.length>0?t<5&&e[0].length<6&&xT(e[0])?!0:e.filter(function(n){return/[A-Z]/.test(n.charAt(0))}).length>=3:!1}function em(t,e){return e&&(t=t.slice(e-1,e+2)),!isNaN(t)}function iA(t){return t.match(/^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/)}function oA(t){return t.match(/[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/)}function aA(t){let e=0;return((e=t.indexOf("."))>-1||(e=t.indexOf("!"))>-1||(e=t.indexOf("?"))>-1)&&t.charAt(e+1).match(/[a-zA-Z].*/)?[t.slice(0,e),t.slice(e+1)]:!1}function sA(t){return t==="."||t==="!"||t==="?"}var lA=" @~@ ",cA=lA.trim(),m9=new RegExp("\\S",""),h9=new RegExp("\\n+|[-#=_+*]{4,}","g"),g9=new RegExp("\\S+|\\n","g"),y9={newlineBoundaries:!1,preserveWhitespace:!1,abbreviations:void 0};function uA(t,e){if(!t)return[];if(!m9.test(t))return[];let r={...y9,...e};JM(r.abbreviations),r.newlineBoundaries&&(t=t.replace(h9,lA));let n,i;r.preserveWhitespace?(i=t.split(/(<br\s*\/?>|\S+|\n+)/),n=i.filter(function(m,g){return g%2})):n=t.trim().match(g9)??[];let o=0,s=0,l=[],u=[],p=[];if(!n||!n.length)return[];for(let m=0,g=n.length;m<g;m++){if(o++,p.push(n[m]),~n[m].indexOf(",")&&(o=0),sA(n[m])||bl(n[m],"?!")||n[m]===cA){r.newlineBoundaries&&n[m]===cA&&p.pop(),u.push(p),o=0,p=[];continue}if((bl(n[m],'"')||bl(n[m],"\u201D"))&&(n[m]=n[m].slice(0,-1)),bl(n[m],".")){if(m+1<g){if(n[m].length===2&&isNaN(n[m].charAt(0))||tA(n[m]))continue;if(eA(n[m+1])){if(rA(n[m],n[m+1])||TT(o,n.slice(m,6))||em(n[m+1])&&nA(n[m]))continue}else if(XM(n[m],"..")||ST(n[m])||TT(o,n.slice(m,5)))continue}u.push(p),p=[],o=0;continue}(s=n[m].indexOf("."))>-1&&(em(n[m],s)||ST(n[m])||oA(n[m])||iA(n[m]))||(l=aA(n[m]))&&(p.pop(),p.push(l[0]),u.push(p),p=[],o=0,p.push(l[1]))}return p.length&&u.push(p),u=u.filter(function(m){return m.length>0}),u.slice(1).reduce(function(m,g){let x=m[m.length-1];return x.length===1&&/^.{1,2}[.]$/.test(x[0])&&!/[.]/.test(g[0])?(m.pop(),m.push(x.concat(g)),m):(m.push(g),m)},[u[0]]).map(function(m,g){if(r.preserveWhitespace&&!r.newlineBoundaries){let x=m.length*2;return g===0&&(x+=1),i.splice(0,x).join("")}return m.join(" ")})}var x9=/\S*\p{L}/u,pA=/(\r?\n[^\p{L}]*\r?\n)|(?<=[.!?])(\s*\r?\n)/gu,S9={newlineBoundaries:!1,preserveWhitespace:!0},tm=class{*segment(e){let r=uA(e,S9),n=0;for(let i of r){let o=i.split(pA).filter(s=>s!=null);for(let s of o){if(!v9(s)){let l=T9(s,n);l!=null&&(yield l)}n+=s.length}}}};function T9(t,e){let r=zR(x9,t);if(r==null)return;let n=r.index;return n!==0&&(e+=n,t=t.slice(n)),{text:t.trimEnd(),index:e}}function v9(t){return $c(pA,t)}var rm=class extends vr{constructor(){super(...arguments);this.scopeType={type:"sentence"};this.iterationScopeType={type:"paragraph"};this.segmenter=new tm}generateScopesInSearchScope(r,{editor:n,domain:i}){let o=n.document.offsetAt(i.start),s=n.document.getText(i),l=p=>{let d=new H(n.document.positionAt(o+p.index),n.document.positionAt(o+p.index+p.text.length));return{editor:n,domain:d,getTargets:m=>[new Sr({editor:n,contentRange:d,isReversed:m})]}},u=this.segmenter.segment(s);return r==="forward"?Nt(u,l):Array.from(u,l).reverse()}};var Rs=class extends vr{constructor(){super(...arguments);this.iterationScopeType={type:"line"}}generateScopesInSearchScope(r,{editor:n,domain:i}){return Nt(Zn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new Sr({editor:n,contentRange:o,isReversed:s})]}))}},nm=class extends Rs{constructor(){super(...arguments);this.regex=/\S+/g}},im=class extends Rs{constructor(r,n,i){super(r,n,i);this.scopeType=n;this.regex=/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/g}},om=class extends Rs{constructor(r,n,i){super(r,n,i);this.scopeType=n}get regex(){return new RegExp(this.scopeType.regex,"gu")}},am=class extends Rs{constructor(r,n,i){super(r,n,i);this.scopeType=n}get regex(){return new RegExp(Nr(this.scopeType.character),"gui")}};var ks=class{constructor(e){this.languageDefinitions=e;this.create=this.create.bind(this)}create(e,r){switch(e.type){case"character":return new qd(this,e,r);case"word":return new Gd(this,e,r);case"token":return new Kd(this,e,r);case"identifier":return new $d(this,e,r);case"line":return new Hd(e,r);case"sentence":return new rm(this,e,r);case"paragraph":return new Jd(e,r);case"document":return new Zd(e,r);case"oneOf":return Xd.create(this,e,r);case"nonWhitespaceSequence":return new nm(this,e,r);case"url":return new im(this,e,r);case"customRegex":return new om(this,e,r);case"glyph":return new am(this,e,r);case"custom":return e.scopeHandler;case"instance":throw Error("Unexpected scope type 'instance'");default:return this.languageDefinitions.get(r)?.getScopeHandler(e)}}};function un(t,e){return new H(t.row,t.column,e.row,e.column)}function vT(t){return new se(t.row,t.column)}function so(t){return new H(t.startPosition.row,t.startPosition.column,t.endPosition.row,t.endPosition.column)}function fA(t,e){return new ge(t.startPosition.row,t.startPosition.column,e.endPosition.row,e.endPosition.column)}function Qn(t,e){return{selection:new ge(new se(e.startPosition.row,e.startPosition.column),new se(e.endPosition.row,e.endPosition.column)),context:{}}}function dA(t,e,r){let n=b9(e,r);return mA(t,e,n)}function b9(t,e){let r=t,n=t.nextSibling;for(;n!=null&&e(n)==null;)r=n,n=n.nextSibling;return r}function mA(t,e,r){let n=e.startIndex<r.startIndex,i=n?e:r,o=n?r:e;return{selection:new ge(new se(i.startPosition.row,i.startPosition.column),new se(o.endPosition.row,o.endPosition.column)),context:{}}}function hA(){return Ko(t=>t.type===","||t.type==="("||t.type===")"||t.type==="["||t.type==="]"||t.type===">"||t.type==="<"||t.type==="}"||t.type==="{",", ")}function gA(t,e){let r=e.startIndex,n=e.endIndex;return e.text.startsWith("(")&&e.text.endsWith(")")?(r+=1,n-=1):e.text.endsWith(";")&&(n-=1),{selection:new ge(t.document.positionAt(r),t.document.positionAt(n)),context:{}}}function yA(...t){return function(e,r){let n=r.previousSibling,i=n?.previousSibling,o;return n&&(t.includes(n.type)?i?o=un(i.endPosition,r.startPosition):o=un(n.startPosition,r.startPosition):o=un(n.endPosition,r.startPosition)),{...Qn(e,r),context:{leadingDelimiterRange:o}}}}function Yn(t=[],e=[],{includeUnnamedChildren:r=!1}={}){return function(n,i){if(t.length>0&&e.length>0)throw new Error("Cannot have both exclusions and inclusions.");let o=r?i.children:i.namedChildren,s=new Set(t),l=new Set(e);return o=o.filter(u=>s.size>0?!s.has(u.type):l.size>0?l.has(u.type):!0),mA(n,o[0],o[o.length-1])}}function xA(...t){return function(e,r){let n=r.nextSibling,i=n?.nextSibling,o;return n&&(t.includes(n.type)?i?o=un(r.endPosition,i.startPosition):o=un(r.endPosition,n.endPosition):o=un(r.endPosition,n.startPosition)),{...Qn(e,r),context:{trailingDelimiterRange:o}}}}function w9(t,e){let r=t.nextSibling;for(;r!=null;){if(!e(r))return r;r=r.nextSibling}return r}function _9(t,e){let r=t.previousSibling;for(;r!=null;){if(!e(r))return r;r=r.previousSibling}return r}function Ko(t,e,r=Vt,n=Vt){return(i,o)=>{let s,l,u=r(o),p=n(o),d=_9(u,t),m=w9(p,t);d!=null&&(s=un(d.endPosition,u.startPosition)),m!=null&&(l=un(p.endPosition,m.startPosition));let g=E9(i,s,l,e);return{selection:new ge(new se(u.startPosition.row,u.startPosition.column),new se(p.endPosition.row,p.endPosition.column)),context:{containingListDelimiter:g,leadingDelimiterRange:s,trailingDelimiterRange:l}}}}function E9(t,e,r,n){let{document:i}=t,o=[r!=null?i.getText(r):n,e!=null?i.getText(e):n];return Qx(o,"length")}function SA(t,e){if(t.length===1)return!0;let r=!1,n=t.filter(({name:u})=>u.endsWith(".start")).map(({range:{end:u}})=>u).sort((u,p)=>u.compareTo(p)).at(-1),i=t.filter(({name:u})=>u.endsWith(".end")).map(({range:{start:u}})=>u).sort((u,p)=>u.compareTo(p)).at(0);n!=null&&i!=null&&n.isAfter(i)&&(ut(e,"TreeSitterQuery.checkCaptures.badOrder",`Start capture must be before end capture: ${t}`),r=!0);let o=t.filter(({name:u})=>u.endsWith(".start")).length,s=t.filter(({name:u})=>u.endsWith(".end")).length,l=t.length-o-s;return l>0&&(o>0||s>0)&&(ut(e,"TreeSitterQuery.checkCaptures.mixRegularStartEnd",`Please do not mix regular captures and start/end captures: ${t.map(({name:u,range:p})=>u+" "+p.toString())}`),r=!0),l>1&&(ut(e,"TreeSitterQuery.checkCaptures.duplicate",`A capture with the same name may only appear once in a single pattern: ${t.map(({name:u,range:p})=>u+" "+p.toString())}`),r=!0),!r}var Ne;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{let o={};for(let s of i)o[s]=s;return o},t.getValidEnumValues=i=>{let o=t.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),s={};for(let l of o)s[l]=i[l];return t.objectValues(s)},t.objectValues=i=>t.objectKeys(i).map(function(o){return i[o]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let o=[];for(let s in i)Object.prototype.hasOwnProperty.call(i,s)&&o.push(s);return o},t.find=(i,o)=>{for(let s of i)if(o(s))return s},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,o=" | "){return i.map(s=>typeof s=="string"?`'${s}'`:s).join(o)}t.joinValues=n,t.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(Ne||(Ne={}));var wT;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(wT||(wT={}));var X=Ne.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),co=t=>{switch(typeof t){case"undefined":return X.undefined;case"string":return X.string;case"number":return isNaN(t)?X.nan:X.number;case"boolean":return X.boolean;case"function":return X.function;case"bigint":return X.bigint;case"symbol":return X.symbol;case"object":return Array.isArray(t)?X.array:t===null?X.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?X.promise:typeof Map<"u"&&t instanceof Map?X.map:typeof Set<"u"&&t instanceof Set?X.set:typeof Date<"u"&&t instanceof Date?X.date:X.object;default:return X.unknown}},G=Ne.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),R9=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),Ur=class extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let r=e||function(o){return o.message},n={_errors:[]},i=o=>{for(let s of o.issues)if(s.code==="invalid_union")s.unionErrors.map(i);else if(s.code==="invalid_return_type")i(s.returnTypeError);else if(s.code==="invalid_arguments")i(s.argumentsError);else if(s.path.length===0)n._errors.push(r(s));else{let l=n,u=0;for(;u<s.path.length;){let p=s.path[u];u===s.path.length-1?(l[p]=l[p]||{_errors:[]},l[p]._errors.push(r(s))):l[p]=l[p]||{_errors:[]},l=l[p],u++}}};return i(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ne.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};Ur.create=t=>new Ur(t);var wl=(t,e)=>{let r;switch(t.code){case G.invalid_type:t.received===X.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case G.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,Ne.jsonStringifyReplacer)}`;break;case G.unrecognized_keys:r=`Unrecognized key(s) in object: ${Ne.joinValues(t.keys,", ")}`;break;case G.invalid_union:r="Invalid input";break;case G.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Ne.joinValues(t.options)}`;break;case G.invalid_enum_value:r=`Invalid enum value. Expected ${Ne.joinValues(t.options)}, received '${t.received}'`;break;case G.invalid_arguments:r="Invalid function arguments";break;case G.invalid_return_type:r="Invalid function return type";break;case G.invalid_date:r="Invalid date";break;case G.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:Ne.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case G.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case G.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case G.custom:r="Invalid input";break;case G.invalid_intersection_types:r="Intersection results could not be merged";break;case G.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case G.not_finite:r="Number must be finite";break;default:r=e.defaultError,Ne.assertNever(t)}return{message:r}},bA=wl;function k9(t){bA=t}function cm(){return bA}var lm=t=>{let{data:e,path:r,errorMaps:n,issueData:i}=t,o=[...r,...i.path||[]],s={...i,path:o},l="",u=n.filter(p=>!!p).slice().reverse();for(let p of u)l=p(s,{data:e,defaultError:l}).message;return{...i,path:o,message:i.message||l}},P9=[];function ee(t,e){let r=lm({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,cm(),wl].filter(n=>!!n)});t.common.issues.push(r)}var $t=class t{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let i of r){if(i.status==="aborted")return xe;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let i of r)n.push({key:await i.key,value:await i.value});return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let i of r){let{key:o,value:s}=i;if(o.status==="aborted"||s.status==="aborted")return xe;o.status==="dirty"&&e.dirty(),s.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof s.value<"u"||i.alwaysSet)&&(n[o.value]=s.value)}return{status:e.value,value:n}}},xe=Object.freeze({status:"aborted"}),wA=t=>({status:"dirty",value:t}),tr=t=>({status:"valid",value:t}),_T=t=>t.status==="aborted",ET=t=>t.status==="dirty",_l=t=>t.status==="valid",um=t=>typeof Promise<"u"&&t instanceof Promise,ce;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(ce||(ce={}));var pn=class{constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},TA=(t,e)=>{if(_l(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new Ur(t.common.issues);return this._error=r,this._error}}};function ve(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(s,l)=>s.code!=="invalid_type"?{message:l.defaultError}:typeof l.data>"u"?{message:n??l.defaultError}:{message:r??l.defaultError},description:i}}var be=class{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return co(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:co(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new $t,ctx:{common:e.parent.common,data:e.data,parsedType:co(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(um(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;let i={common:{issues:[],async:(n=r?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:co(e)},o=this._parseSync({data:e,path:i.path,parent:i});return TA(i,o)}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:co(e)},i=this._parse({data:e,path:n.path,parent:n}),o=await(um(i)?i:Promise.resolve(i));return TA(n,o)}refine(e,r){let n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,o)=>{let s=e(i),l=()=>o.addIssue({code:G.custom,...n(i)});return typeof Promise<"u"&&s instanceof Promise?s.then(u=>u?!0:(l(),!1)):s?!0:(l(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new Br({schema:this,typeName:fe.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return An.create(this,this._def)}nullable(){return Ai.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Mi.create(this,this._def)}promise(){return po.create(this,this._def)}or(e){return ta.create([this,e],this._def)}and(e){return ra.create(this,e,this._def)}transform(e){return new Br({...ve(this._def),schema:this,typeName:fe.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new sa({...ve(this._def),innerType:this,defaultValue:r,typeName:fe.ZodDefault})}brand(){return new mm({typeName:fe.ZodBranded,type:this,...ve(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new Fs({...ve(this._def),innerType:this,catchValue:r,typeName:fe.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return El.create(this,e)}readonly(){return Ns.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},M9=/^c[^\s-]{8,}$/i,A9=/^[a-z][a-z0-9]*$/,D9=/^[0-9A-HJKMNP-TV-Z]{26}$/,I9=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,F9=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,C9="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",bT,N9=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,O9=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,L9=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function U9(t,e){return!!((e==="v4"||!e)&&N9.test(t)||(e==="v6"||!e)&&O9.test(t))}var lo=class t extends be{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==X.string){let o=this._getOrReturnCtx(e);return ee(o,{code:G.invalid_type,expected:X.string,received:o.parsedType}),xe}let n=new $t,i;for(let o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(i=this._getOrReturnCtx(e,i),ee(i,{code:G.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="max")e.data.length>o.value&&(i=this._getOrReturnCtx(e,i),ee(i,{code:G.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="length"){let s=e.data.length>o.value,l=e.data.length<o.value;(s||l)&&(i=this._getOrReturnCtx(e,i),s?ee(i,{code:G.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):l&&ee(i,{code:G.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),n.dirty())}else if(o.kind==="email")F9.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"email",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="emoji")bT||(bT=new RegExp(C9,"u")),bT.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"emoji",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="uuid")I9.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"uuid",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid")M9.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"cuid",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid2")A9.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"cuid2",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="ulid")D9.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"ulid",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),ee(i,{validation:"url",code:G.invalid_string,message:o.message}),n.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"regex",code:G.invalid_string,message:o.message}),n.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(e,i),ee(i,{code:G.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),n.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(i=this._getOrReturnCtx(e,i),ee(i,{code:G.invalid_string,validation:{startsWith:o.value},message:o.message}),n.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(i=this._getOrReturnCtx(e,i),ee(i,{code:G.invalid_string,validation:{endsWith:o.value},message:o.message}),n.dirty()):o.kind==="datetime"?L9(o).test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{code:G.invalid_string,validation:"datetime",message:o.message}),n.dirty()):o.kind==="ip"?U9(e.data,o.version)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"ip",code:G.invalid_string,message:o.message}),n.dirty()):Ne.assertNever(o);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(i=>e.test(i),{validation:r,code:G.invalid_string,...ce.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ce.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ce.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ce.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ce.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ce.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ce.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ce.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ce.errToObj(e)})}datetime(e){var r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,...ce.errToObj(e?.message)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...ce.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...ce.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...ce.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...ce.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...ce.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...ce.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...ce.errToObj(r)})}nonempty(e){return this.min(1,ce.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};lo.create=t=>{var e;return new lo({checks:[],typeName:fe.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...ve(t)})};function B9(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,o=parseInt(t.toFixed(i).replace(".","")),s=parseInt(e.toFixed(i).replace(".",""));return o%s/Math.pow(10,i)}var Zo=class t extends be{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==X.number){let o=this._getOrReturnCtx(e);return ee(o,{code:G.invalid_type,expected:X.number,received:o.parsedType}),xe}let n,i=new $t;for(let o of this._def.checks)o.kind==="int"?Ne.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),ee(n,{code:G.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),ee(n,{code:G.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),ee(n,{code:G.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?B9(e.data,o.value)!==0&&(n=this._getOrReturnCtx(e,n),ee(n,{code:G.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),ee(n,{code:G.not_finite,message:o.message}),i.dirty()):Ne.assertNever(o);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,ce.toString(r))}gt(e,r){return this.setLimit("min",e,!1,ce.toString(r))}lte(e,r){return this.setLimit("max",e,!0,ce.toString(r))}lt(e,r){return this.setLimit("max",e,!1,ce.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:ce.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ce.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ce.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ce.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ce.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ce.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:ce.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:ce.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ce.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ce.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Ne.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};Zo.create=t=>new Zo({checks:[],typeName:fe.ZodNumber,coerce:t?.coerce||!1,...ve(t)});var Qo=class t extends be{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==X.bigint){let o=this._getOrReturnCtx(e);return ee(o,{code:G.invalid_type,expected:X.bigint,received:o.parsedType}),xe}let n,i=new $t;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),ee(n,{code:G.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),ee(n,{code:G.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),ee(n,{code:G.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):Ne.assertNever(o);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,ce.toString(r))}gt(e,r){return this.setLimit("min",e,!1,ce.toString(r))}lte(e,r){return this.setLimit("max",e,!0,ce.toString(r))}lt(e,r){return this.setLimit("max",e,!1,ce.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:ce.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ce.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ce.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ce.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ce.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:ce.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};Qo.create=t=>{var e;return new Qo({checks:[],typeName:fe.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...ve(t)})};var Yo=class extends be{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==X.boolean){let n=this._getOrReturnCtx(e);return ee(n,{code:G.invalid_type,expected:X.boolean,received:n.parsedType}),xe}return tr(e.data)}};Yo.create=t=>new Yo({typeName:fe.ZodBoolean,coerce:t?.coerce||!1,...ve(t)});var Xo=class t extends be{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==X.date){let o=this._getOrReturnCtx(e);return ee(o,{code:G.invalid_type,expected:X.date,received:o.parsedType}),xe}if(isNaN(e.data.getTime())){let o=this._getOrReturnCtx(e);return ee(o,{code:G.invalid_date}),xe}let n=new $t,i;for(let o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(i=this._getOrReturnCtx(e,i),ee(i,{code:G.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),n.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(i=this._getOrReturnCtx(e,i),ee(i,{code:G.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),n.dirty()):Ne.assertNever(o);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:ce.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:ce.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};Xo.create=t=>new Xo({checks:[],coerce:t?.coerce||!1,typeName:fe.ZodDate,...ve(t)});var Ms=class extends be{_parse(e){if(this._getType(e)!==X.symbol){let n=this._getOrReturnCtx(e);return ee(n,{code:G.invalid_type,expected:X.symbol,received:n.parsedType}),xe}return tr(e.data)}};Ms.create=t=>new Ms({typeName:fe.ZodSymbol,...ve(t)});var Jo=class extends be{_parse(e){if(this._getType(e)!==X.undefined){let n=this._getOrReturnCtx(e);return ee(n,{code:G.invalid_type,expected:X.undefined,received:n.parsedType}),xe}return tr(e.data)}};Jo.create=t=>new Jo({typeName:fe.ZodUndefined,...ve(t)});var ea=class extends be{_parse(e){if(this._getType(e)!==X.null){let n=this._getOrReturnCtx(e);return ee(n,{code:G.invalid_type,expected:X.null,received:n.parsedType}),xe}return tr(e.data)}};ea.create=t=>new ea({typeName:fe.ZodNull,...ve(t)});var uo=class extends be{constructor(){super(...arguments),this._any=!0}_parse(e){return tr(e.data)}};uo.create=t=>new uo({typeName:fe.ZodAny,...ve(t)});var Pi=class extends be{constructor(){super(...arguments),this._unknown=!0}_parse(e){return tr(e.data)}};Pi.create=t=>new Pi({typeName:fe.ZodUnknown,...ve(t)});var Dn=class extends be{_parse(e){let r=this._getOrReturnCtx(e);return ee(r,{code:G.invalid_type,expected:X.never,received:r.parsedType}),xe}};Dn.create=t=>new Dn({typeName:fe.ZodNever,...ve(t)});var As=class extends be{_parse(e){if(this._getType(e)!==X.undefined){let n=this._getOrReturnCtx(e);return ee(n,{code:G.invalid_type,expected:X.void,received:n.parsedType}),xe}return tr(e.data)}};As.create=t=>new As({typeName:fe.ZodVoid,...ve(t)});var Mi=class t extends be{_parse(e){let{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==X.array)return ee(r,{code:G.invalid_type,expected:X.array,received:r.parsedType}),xe;if(i.exactLength!==null){let s=r.data.length>i.exactLength.value,l=r.data.length<i.exactLength.value;(s||l)&&(ee(r,{code:s?G.too_big:G.too_small,minimum:l?i.exactLength.value:void 0,maximum:s?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(ee(r,{code:G.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(ee(r,{code:G.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((s,l)=>i.type._parseAsync(new pn(r,s,r.path,l)))).then(s=>$t.mergeArray(n,s));let o=[...r.data].map((s,l)=>i.type._parseSync(new pn(r,s,r.path,l)));return $t.mergeArray(n,o)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:ce.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:ce.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:ce.toString(r)}})}nonempty(e){return this.min(1,e)}};Mi.create=(t,e)=>new Mi({type:t,minLength:null,maxLength:null,exactLength:null,typeName:fe.ZodArray,...ve(e)});function Ps(t){if(t instanceof br){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=An.create(Ps(n))}return new br({...t._def,shape:()=>e})}else return t instanceof Mi?new Mi({...t._def,type:Ps(t.element)}):t instanceof An?An.create(Ps(t.unwrap())):t instanceof Ai?Ai.create(Ps(t.unwrap())):t instanceof Xn?Xn.create(t.items.map(e=>Ps(e))):t}var br=class t extends be{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=Ne.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==X.object){let p=this._getOrReturnCtx(e);return ee(p,{code:G.invalid_type,expected:X.object,received:p.parsedType}),xe}let{status:n,ctx:i}=this._processInputParams(e),{shape:o,keys:s}=this._getCached(),l=[];if(!(this._def.catchall instanceof Dn&&this._def.unknownKeys==="strip"))for(let p in i.data)s.includes(p)||l.push(p);let u=[];for(let p of s){let d=o[p],m=i.data[p];u.push({key:{status:"valid",value:p},value:d._parse(new pn(i,m,i.path,p)),alwaysSet:p in i.data})}if(this._def.catchall instanceof Dn){let p=this._def.unknownKeys;if(p==="passthrough")for(let d of l)u.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(p==="strict")l.length>0&&(ee(i,{code:G.unrecognized_keys,keys:l}),n.dirty());else if(p!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let p=this._def.catchall;for(let d of l){let m=i.data[d];u.push({key:{status:"valid",value:d},value:p._parse(new pn(i,m,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let p=[];for(let d of u){let m=await d.key;p.push({key:m,value:await d.value,alwaysSet:d.alwaysSet})}return p}).then(p=>$t.mergeObjectSync(n,p)):$t.mergeObjectSync(n,u)}get shape(){return this._def.shape()}strict(e){return ce.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var i,o,s,l;let u=(s=(o=(i=this._def).errorMap)===null||o===void 0?void 0:o.call(i,r,n).message)!==null&&s!==void 0?s:n.defaultError;return r.code==="unrecognized_keys"?{message:(l=ce.errToObj(e).message)!==null&&l!==void 0?l:u}:{message:u}}}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:fe.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};return Ne.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new t({...this._def,shape:()=>r})}omit(e){let r={};return Ne.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new t({...this._def,shape:()=>r})}deepPartial(){return Ps(this)}partial(e){let r={};return Ne.objectKeys(this.shape).forEach(n=>{let i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}),new t({...this._def,shape:()=>r})}required(e){let r={};return Ne.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let o=this.shape[n];for(;o instanceof An;)o=o._def.innerType;r[n]=o}}),new t({...this._def,shape:()=>r})}keyof(){return _A(Ne.objectKeys(this.shape))}};br.create=(t,e)=>new br({shape:()=>t,unknownKeys:"strip",catchall:Dn.create(),typeName:fe.ZodObject,...ve(e)});br.strictCreate=(t,e)=>new br({shape:()=>t,unknownKeys:"strict",catchall:Dn.create(),typeName:fe.ZodObject,...ve(e)});br.lazycreate=(t,e)=>new br({shape:t,unknownKeys:"strip",catchall:Dn.create(),typeName:fe.ZodObject,...ve(e)});var ta=class extends be{_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function i(o){for(let l of o)if(l.result.status==="valid")return l.result;for(let l of o)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;let s=o.map(l=>new Ur(l.ctx.common.issues));return ee(r,{code:G.invalid_union,unionErrors:s}),xe}if(r.common.async)return Promise.all(n.map(async o=>{let s={...r,common:{...r.common,issues:[]},parent:null};return{result:await o._parseAsync({data:r.data,path:r.path,parent:s}),ctx:s}})).then(i);{let o,s=[];for(let u of n){let p={...r,common:{...r.common,issues:[]},parent:null},d=u._parseSync({data:r.data,path:r.path,parent:p});if(d.status==="valid")return d;d.status==="dirty"&&!o&&(o={result:d,ctx:p}),p.common.issues.length&&s.push(p.common.issues)}if(o)return r.common.issues.push(...o.ctx.common.issues),o.result;let l=s.map(u=>new Ur(u));return ee(r,{code:G.invalid_union,unionErrors:l}),xe}}get options(){return this._def.options}};ta.create=(t,e)=>new ta({options:t,typeName:fe.ZodUnion,...ve(e)});var sm=t=>t instanceof na?sm(t.schema):t instanceof Br?sm(t.innerType()):t instanceof ia?[t.value]:t instanceof oa?t.options:t instanceof aa?Object.keys(t.enum):t instanceof sa?sm(t._def.innerType):t instanceof Jo?[void 0]:t instanceof ea?[null]:null,pm=class t extends be{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==X.object)return ee(r,{code:G.invalid_type,expected:X.object,received:r.parsedType}),xe;let n=this.discriminator,i=r.data[n],o=this.optionsMap.get(i);return o?r.common.async?o._parseAsync({data:r.data,path:r.path,parent:r}):o._parseSync({data:r.data,path:r.path,parent:r}):(ee(r,{code:G.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),xe)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let i=new Map;for(let o of r){let s=sm(o.shape[e]);if(!s)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let l of s){if(i.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);i.set(l,o)}}return new t({typeName:fe.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...ve(n)})}};function RT(t,e){let r=co(t),n=co(e);if(t===e)return{valid:!0,data:t};if(r===X.object&&n===X.object){let i=Ne.objectKeys(e),o=Ne.objectKeys(t).filter(l=>i.indexOf(l)!==-1),s={...t,...e};for(let l of o){let u=RT(t[l],e[l]);if(!u.valid)return{valid:!1};s[l]=u.data}return{valid:!0,data:s}}else if(r===X.array&&n===X.array){if(t.length!==e.length)return{valid:!1};let i=[];for(let o=0;o<t.length;o++){let s=t[o],l=e[o],u=RT(s,l);if(!u.valid)return{valid:!1};i.push(u.data)}return{valid:!0,data:i}}else return r===X.date&&n===X.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var ra=class extends be{_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=(o,s)=>{if(_T(o)||_T(s))return xe;let l=RT(o.value,s.value);return l.valid?((ET(o)||ET(s))&&r.dirty(),{status:r.value,value:l.data}):(ee(n,{code:G.invalid_intersection_types}),xe)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([o,s])=>i(o,s)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};ra.create=(t,e,r)=>new ra({left:t,right:e,typeName:fe.ZodIntersection,...ve(r)});var Xn=class t extends be{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==X.array)return ee(n,{code:G.invalid_type,expected:X.array,received:n.parsedType}),xe;if(n.data.length<this._def.items.length)return ee(n,{code:G.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),xe;!this._def.rest&&n.data.length>this._def.items.length&&(ee(n,{code:G.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let o=[...n.data].map((s,l)=>{let u=this._def.items[l]||this._def.rest;return u?u._parse(new pn(n,s,n.path,l)):null}).filter(s=>!!s);return n.common.async?Promise.all(o).then(s=>$t.mergeArray(r,s)):$t.mergeArray(r,o)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};Xn.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Xn({items:t,typeName:fe.ZodTuple,rest:null,...ve(e)})};var fm=class t extends be{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==X.object)return ee(n,{code:G.invalid_type,expected:X.object,received:n.parsedType}),xe;let i=[],o=this._def.keyType,s=this._def.valueType;for(let l in n.data)i.push({key:o._parse(new pn(n,l,n.path,l)),value:s._parse(new pn(n,n.data[l],n.path,l))});return n.common.async?$t.mergeObjectAsync(r,i):$t.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof be?new t({keyType:e,valueType:r,typeName:fe.ZodRecord,...ve(n)}):new t({keyType:lo.create(),valueType:e,typeName:fe.ZodRecord,...ve(r)})}},Ds=class extends be{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==X.map)return ee(n,{code:G.invalid_type,expected:X.map,received:n.parsedType}),xe;let i=this._def.keyType,o=this._def.valueType,s=[...n.data.entries()].map(([l,u],p)=>({key:i._parse(new pn(n,l,n.path,[p,"key"])),value:o._parse(new pn(n,u,n.path,[p,"value"]))}));if(n.common.async){let l=new Map;return Promise.resolve().then(async()=>{for(let u of s){let p=await u.key,d=await u.value;if(p.status==="aborted"||d.status==="aborted")return xe;(p.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(p.value,d.value)}return{status:r.value,value:l}})}else{let l=new Map;for(let u of s){let p=u.key,d=u.value;if(p.status==="aborted"||d.status==="aborted")return xe;(p.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(p.value,d.value)}return{status:r.value,value:l}}}};Ds.create=(t,e,r)=>new Ds({valueType:e,keyType:t,typeName:fe.ZodMap,...ve(r)});var Is=class t extends be{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==X.set)return ee(n,{code:G.invalid_type,expected:X.set,received:n.parsedType}),xe;let i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(ee(n,{code:G.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(ee(n,{code:G.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());let o=this._def.valueType;function s(u){let p=new Set;for(let d of u){if(d.status==="aborted")return xe;d.status==="dirty"&&r.dirty(),p.add(d.value)}return{status:r.value,value:p}}let l=[...n.data.values()].map((u,p)=>o._parse(new pn(n,u,n.path,p)));return n.common.async?Promise.all(l).then(u=>s(u)):s(l)}min(e,r){return new t({...this._def,minSize:{value:e,message:ce.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:ce.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};Is.create=(t,e)=>new Is({valueType:t,minSize:null,maxSize:null,typeName:fe.ZodSet,...ve(e)});var dm=class t extends be{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==X.function)return ee(r,{code:G.invalid_type,expected:X.function,received:r.parsedType}),xe;function n(l,u){return lm({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,cm(),wl].filter(p=>!!p),issueData:{code:G.invalid_arguments,argumentsError:u}})}function i(l,u){return lm({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,cm(),wl].filter(p=>!!p),issueData:{code:G.invalid_return_type,returnTypeError:u}})}let o={errorMap:r.common.contextualErrorMap},s=r.data;if(this._def.returns instanceof po){let l=this;return tr(async function(...u){let p=new Ur([]),d=await l._def.args.parseAsync(u,o).catch(x=>{throw p.addIssue(n(u,x)),p}),m=await Reflect.apply(s,this,d);return await l._def.returns._def.type.parseAsync(m,o).catch(x=>{throw p.addIssue(i(m,x)),p})})}else{let l=this;return tr(function(...u){let p=l._def.args.safeParse(u,o);if(!p.success)throw new Ur([n(u,p.error)]);let d=Reflect.apply(s,this,p.data),m=l._def.returns.safeParse(d,o);if(!m.success)throw new Ur([i(d,m.error)]);return m.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:Xn.create(e).rest(Pi.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||Xn.create([]).rest(Pi.create()),returns:r||Pi.create(),typeName:fe.ZodFunction,...ve(n)})}},na=class extends be{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};na.create=(t,e)=>new na({getter:t,typeName:fe.ZodLazy,...ve(e)});var ia=class extends be{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return ee(r,{received:r.data,code:G.invalid_literal,expected:this._def.value}),xe}return{status:"valid",value:e.data}}get value(){return this._def.value}};ia.create=(t,e)=>new ia({value:t,typeName:fe.ZodLiteral,...ve(e)});function _A(t,e){return new oa({values:t,typeName:fe.ZodEnum,...ve(e)})}var oa=class t extends be{_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return ee(r,{expected:Ne.joinValues(n),received:r.parsedType,code:G.invalid_type}),xe}if(this._def.values.indexOf(e.data)===-1){let r=this._getOrReturnCtx(e),n=this._def.values;return ee(r,{received:r.data,code:G.invalid_enum_value,options:n}),xe}return tr(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e){return t.create(e)}exclude(e){return t.create(this.options.filter(r=>!e.includes(r)))}};oa.create=_A;var aa=class extends be{_parse(e){let r=Ne.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==X.string&&n.parsedType!==X.number){let i=Ne.objectValues(r);return ee(n,{expected:Ne.joinValues(i),received:n.parsedType,code:G.invalid_type}),xe}if(r.indexOf(e.data)===-1){let i=Ne.objectValues(r);return ee(n,{received:n.data,code:G.invalid_enum_value,options:i}),xe}return tr(e.data)}get enum(){return this._def.values}};aa.create=(t,e)=>new aa({values:t,typeName:fe.ZodNativeEnum,...ve(e)});var po=class extends be{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==X.promise&&r.common.async===!1)return ee(r,{code:G.invalid_type,expected:X.promise,received:r.parsedType}),xe;let n=r.parsedType===X.promise?r.data:Promise.resolve(r.data);return tr(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}};po.create=(t,e)=>new po({type:t,typeName:fe.ZodPromise,...ve(e)});var Br=class extends be{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===fe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,o={addIssue:s=>{ee(n,s),s.fatal?r.abort():r.dirty()},get path(){return n.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){let s=i.transform(n.data,o);return n.common.issues.length?{status:"dirty",value:n.data}:n.common.async?Promise.resolve(s).then(l=>this._def.schema._parseAsync({data:l,path:n.path,parent:n})):this._def.schema._parseSync({data:s,path:n.path,parent:n})}if(i.type==="refinement"){let s=l=>{let u=i.refinement(l,o);if(n.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){let l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?xe:(l.status==="dirty"&&r.dirty(),s(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?xe:(l.status==="dirty"&&r.dirty(),s(l.value).then(()=>({status:r.value,value:l.value}))))}if(i.type==="transform")if(n.common.async===!1){let s=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!_l(s))return s;let l=i.transform(s.value,o);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(s=>_l(s)?Promise.resolve(i.transform(s.value,o)).then(l=>({status:r.value,value:l})):s);Ne.assertNever(i)}};Br.create=(t,e,r)=>new Br({schema:t,typeName:fe.ZodEffects,effect:e,...ve(r)});Br.createWithPreprocess=(t,e,r)=>new Br({schema:e,effect:{type:"preprocess",transform:t},typeName:fe.ZodEffects,...ve(r)});var An=class extends be{_parse(e){return this._getType(e)===X.undefined?tr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};An.create=(t,e)=>new An({innerType:t,typeName:fe.ZodOptional,...ve(e)});var Ai=class extends be{_parse(e){return this._getType(e)===X.null?tr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Ai.create=(t,e)=>new Ai({innerType:t,typeName:fe.ZodNullable,...ve(e)});var sa=class extends be{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===X.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};sa.create=(t,e)=>new sa({innerType:t,typeName:fe.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...ve(e)});var Fs=class extends be{_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return um(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Ur(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ur(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};Fs.create=(t,e)=>new Fs({innerType:t,typeName:fe.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...ve(e)});var Cs=class extends be{_parse(e){if(this._getType(e)!==X.nan){let n=this._getOrReturnCtx(e);return ee(n,{code:G.invalid_type,expected:X.nan,received:n.parsedType}),xe}return{status:"valid",value:e.data}}};Cs.create=t=>new Cs({typeName:fe.ZodNaN,...ve(t)});var V9=Symbol("zod_brand"),mm=class extends be{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},El=class t extends be{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let o=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?xe:o.status==="dirty"?(r.dirty(),wA(o.value)):this._def.out._parseAsync({data:o.value,path:n.path,parent:n})})();{let i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?xe:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:fe.ZodPipeline})}},Ns=class extends be{_parse(e){let r=this._def.innerType._parse(e);return _l(r)&&(r.value=Object.freeze(r.value)),r}};Ns.create=(t,e)=>new Ns({innerType:t,typeName:fe.ZodReadonly,...ve(e)});var EA=(t,e={},r)=>t?uo.create().superRefine((n,i)=>{var o,s;if(!t(n)){let l=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,u=(s=(o=l.fatal)!==null&&o!==void 0?o:r)!==null&&s!==void 0?s:!0,p=typeof l=="string"?{message:l}:l;i.addIssue({code:"custom",...p,fatal:u})}}):uo.create(),W9={object:br.lazycreate},fe;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(fe||(fe={}));var H9=(t,e={message:`Input not instance of ${t.name}`})=>EA(r=>r instanceof t,e),RA=lo.create,kA=Zo.create,$9=Cs.create,j9=Qo.create,PA=Yo.create,q9=Xo.create,z9=Ms.create,G9=Jo.create,K9=ea.create,Z9=uo.create,Q9=Pi.create,Y9=Dn.create,X9=As.create,J9=Mi.create,e8=br.create,t8=br.strictCreate,r8=ta.create,n8=pm.create,i8=ra.create,o8=Xn.create,a8=fm.create,s8=Ds.create,c8=Is.create,l8=dm.create,u8=na.create,p8=ia.create,f8=oa.create,d8=aa.create,m8=po.create,vA=Br.create,h8=An.create,g8=Ai.create,y8=Br.createWithPreprocess,x8=El.create,S8=()=>RA().optional(),T8=()=>kA().optional(),v8=()=>PA().optional(),b8={string:t=>lo.create({...t,coerce:!0}),number:t=>Zo.create({...t,coerce:!0}),boolean:t=>Yo.create({...t,coerce:!0}),bigint:t=>Qo.create({...t,coerce:!0}),date:t=>Xo.create({...t,coerce:!0})},w8=xe,He=Object.freeze({__proto__:null,defaultErrorMap:wl,setErrorMap:k9,getErrorMap:cm,makeIssue:lm,EMPTY_PATH:P9,addIssueToContext:ee,ParseStatus:$t,INVALID:xe,DIRTY:wA,OK:tr,isAborted:_T,isDirty:ET,isValid:_l,isAsync:um,get util(){return Ne},get objectUtil(){return wT},ZodParsedType:X,getParsedType:co,ZodType:be,ZodString:lo,ZodNumber:Zo,ZodBigInt:Qo,ZodBoolean:Yo,ZodDate:Xo,ZodSymbol:Ms,ZodUndefined:Jo,ZodNull:ea,ZodAny:uo,ZodUnknown:Pi,ZodNever:Dn,ZodVoid:As,ZodArray:Mi,ZodObject:br,ZodUnion:ta,ZodDiscriminatedUnion:pm,ZodIntersection:ra,ZodTuple:Xn,ZodRecord:fm,ZodMap:Ds,ZodSet:Is,ZodFunction:dm,ZodLazy:na,ZodLiteral:ia,ZodEnum:oa,ZodNativeEnum:aa,ZodPromise:po,ZodEffects:Br,ZodTransformer:Br,ZodOptional:An,ZodNullable:Ai,ZodDefault:sa,ZodCatch:Fs,ZodNaN:Cs,BRAND:V9,ZodBranded:mm,ZodPipeline:El,ZodReadonly:Ns,custom:EA,Schema:be,ZodSchema:be,late:W9,get ZodFirstPartyTypeKind(){return fe},coerce:b8,any:Z9,array:J9,bigint:j9,boolean:PA,date:q9,discriminatedUnion:n8,effect:vA,enum:f8,function:l8,instanceof:H9,intersection:i8,lazy:u8,literal:p8,map:s8,nan:$9,nativeEnum:d8,never:Y9,null:K9,nullable:g8,number:kA,object:e8,oboolean:v8,onumber:T8,optional:h8,ostring:S8,pipeline:x8,preprocess:y8,promise:m8,record:a8,set:c8,strictObject:t8,string:RA,symbol:z9,transformer:vA,tuple:o8,undefined:G9,union:r8,unknown:Q9,void:X9,NEVER:w8,ZodIssueCode:G,quotelessJson:R9,ZodError:Ur});function MA(t){let e=t.operands.map(kT).join(" ");return`(#${t.operator} ${e})`}function kT(t){return t.type==="capture"?`@${t.name}`:t.value}function AA(t,e){return e.errors.filter(r=>!(r.code==="invalid_type"&&r.path.length===2&&(r.path[1]==="name"||r.path[1]==="value"))).map(r=>_8(t,r))}function _8(t,e){if(e.path.length===0)return e.code==="too_small"?"Too few arguments":e.code==="too_big"?"Too many arguments":e.message;let r=e.message;e.code==="invalid_literal"&&e.path[1]==="type"&&(r=e.expected==="capture"?"Capture names must be prefixed with @":"Expected string, but received capture");let n=e.path[0],i=kT(t[n]);return`Error on argument ${n} (\`${i}\`): ${r}`}var rr=class{allowMissingNode(){return!1}createPredicate(e){let r=this.schema.safeParse(e);return r.success?{success:!0,predicate:n=>{try{let i=this.constructAcceptArgs(r.data,n);return this.run(...i)}catch(i){if(i instanceof hm&&this.allowMissingNode())return!0;throw i}}}:{success:!1,errors:AA(e,r.error)}}constructAcceptArgs(e,r){return e.map(n=>{if(n.type==="capture"){let i=r.captures.find(o=>o.name===n.name);if(i==null)throw new hm(n.name);return i}else return n.value})}},hm=class extends Error{constructor(e){super(`Could not find capture ${e}`)}};var PT=He.object({type:He.literal("string"),value:He.string()}),_e={node:He.object({type:He.literal("capture"),name:He.string()}),string:PT,integer:PT.transform((t,e)=>{let r=parseInt(t.value);return isNaN(r)?(e.addIssue({code:He.ZodIssueCode.custom,message:"Expected an integer"}),He.NEVER):{type:"integer",value:r}}),boolean:PT.transform((t,e)=>t.value==="true"?{type:"boolean",value:!0}:t.value==="false"?{type:"boolean",value:!1}:(e.addIssue({code:He.ZodIssueCode.custom,message:"Expected true or false"}),He.NEVER))};var MT=class extends rr{constructor(){super(...arguments);this.name="not-type?";this.schema=He.tuple([_e.node,_e.string]).rest(_e.string)}run({node:r},...n){return!n.includes(r.type)}},AT=class extends rr{constructor(){super(...arguments);this.name="not-parent-type?";this.schema=He.tuple([_e.node,_e.string]).rest(_e.string)}run({node:r},...n){return r.parent==null||!n.includes(r.parent.type)}},DT=class extends rr{constructor(){super(...arguments);this.name="is-nth-child?";this.schema=He.tuple([_e.node,_e.integer])}run({node:r},n){return r.parent?.children.findIndex(i=>i.id===r.id)===n}},IT=class extends rr{constructor(){super(...arguments);this.name="has-multiple-children-of-type?";this.schema=He.tuple([_e.node,_e.string])}run({node:r},n){return r.children.filter(o=>o.type===n).length>1}},FT=class extends rr{constructor(){super(...arguments);this.name="child-range!";this.schema=He.union([He.tuple([_e.node,_e.integer]),He.tuple([_e.node,_e.integer,_e.integer]),He.tuple([_e.node,_e.integer,_e.integer,_e.boolean]),He.tuple([_e.node,_e.integer,_e.integer,_e.boolean,_e.boolean])])}run(r,n,i,o,s){let{node:{children:l}}=r;n=n<0?l.length+n:n,i=i??-1,i=i<0?l.length+i:i;let u=l[n],p=l[i];return r.range=un(o?u.endPosition:u.startPosition,s?p.startPosition:p.endPosition),!0}},CT=class extends rr{constructor(){super(...arguments);this.name="character-range!";this.schema=He.union([He.tuple([_e.node,_e.integer]),He.tuple([_e.node,_e.integer,_e.integer])])}run(r,n,i){return r.range=new H(r.range.start.translate(void 0,n),r.range.end.translate(void 0,i??0)),!0}},NT=class extends rr{constructor(){super(...arguments);this.name="shrink-to-match!";this.schema=He.tuple([_e.node,_e.string])}run(r,n){let{document:i,range:o}=r,l=i.getText(o).match(new RegExp(n,"ds"));if(l?.index==null)throw Error(`No match for pattern '${n}'`);let[u,p]=l.indices?.groups?.keep??l.indices[0],d=i.offsetAt(o.start);return r.range=new H(i.positionAt(d+u),i.positionAt(d+p)),!0}},OT=class extends rr{constructor(){super(...arguments);this.name="trim-end!";this.schema=He.tuple([_e.node])}run(r){let{document:n,range:i}=r,o=n.getText(i),s=o.length-o.trimEnd().length;return r.range=new H(i.start,jR(n,i.end,-s)),!0}},LT=class extends rr{constructor(){super(...arguments);this.name="allow-multiple!";this.schema=He.tuple([_e.node])}allowMissingNode(){return!0}run(r){return r.allowMultiple=!0,!0}},UT=class extends rr{constructor(){super(...arguments);this.name="log!";this.schema=He.tuple([_e.node])}run(r){return console.log(`#log!: ${r.name}@${r.range}`),!0}},BT=class extends rr{constructor(){super(...arguments);this.name="insertion-delimiter!";this.schema=He.tuple([_e.node,_e.string])}run(r,n){return r.insertionDelimiter=n,!0}},VT=class extends rr{constructor(){super(...arguments);this.name="single-or-multi-line-delimiter!";this.schema=He.tuple([_e.node,_e.node,_e.string,_e.string])}run(r,n,i,o){return r.insertionDelimiter=n.range.isSingleLine?i:o,!0}},DA=[new UT,new MT,new OT,new AT,new DT,new FT,new CT,new NT,new LT,new BT,new VT,new IT];function IA(t){let e=[],r=[];return t.forEach((n,i)=>{let o=[];n.forEach((s,l)=>{let u=DA.find(({name:d})=>d===s.operator);if(u==null){e.push({patternIdx:i,predicateIdx:l,error:`Unknown predicate operator "${s.operator}"`});return}let p=u.createPredicate(s.operands);if(!p.success){e.push(...p.errors.map(d=>({patternIdx:i,predicateIdx:l,error:d})));return}o.push(p.predicate)}),r.push(o)}),{errors:e,predicates:r}}function FA(t){return t.map(e=>e.name.endsWith(".startOf")?{...e,name:e.name.replace(/\.startOf$/,""),range:e.range.start.toEmptyRange()}:e.name.endsWith(".endOf")?{...e,name:e.name.replace(/\.endOf$/,""),range:e.range.end.toEmptyRange()}:e)}var Rl=class t{constructor(e,r,n){this.treeSitter=e;this.query=r;this.patternPredicates=n}static create(e,r,n){let{errors:i,predicates:o}=IA(n.predicates);if(i.length>0){for(let s of i){let l=[`language ${e}`,`pattern ${s.patternIdx}`,`predicate \`${MA(n.predicates[s.patternIdx][s.predicateIdx])}\``].join(", ");ut(F().messages,"TreeSitterQuery.parsePredicates",`Error parsing predicate for ${l}: ${s.error}`)}if(F().runMode==="test")throw new Error("Invalid predicates")}return new t(r,n,o)}matches(e,r,n){return this.query.matches(this.treeSitter.getTree(e).rootNode,{startPosition:r==null?void 0:NA(r),endPosition:n==null?void 0:NA(n)}).map(({pattern:i,captures:o})=>({patternIdx:i,captures:o.map(({name:s,node:l})=>({name:s,node:l,document:e,range:so(l),insertionDelimiter:void 0,allowMultiple:!1}))})).filter(i=>this.patternPredicates[i.patternIdx].every(o=>o(i))).map(i=>{let o=Object.entries(Zx(i.captures,({name:s})=>CA(s))).map(([s,l])=>{if(l=FA(l),!SA(l,F().messages)&&F().runMode==="test")throw new Error("Invalid captures");return{name:s,range:l.map(({range:p})=>p).reduce((p,d)=>d.union(p)),allowMultiple:l.some(p=>p.allowMultiple),insertionDelimiter:l.find(p=>p.insertionDelimiter!=null)?.insertionDelimiter}});return{...i,captures:o}})}get captureNames(){return Ti(this.query.captureNames.map(CA))}};function CA(t){return t.replace(/(\.(start|end))?(\.(startOf|endOf))?$/,"")}function NA(t){return{row:t.line,column:t.character}}var LA="_",E8=[LA,...Bo],R8=["prefix","leading","trailing"],k8=["startOf","endOf"],P8=["domain","removal","interior","iteration","iteration.domain"],OA=["start","end","start.startOf","start.endOf","end.startOf","end.endOf"],ca=new Set;for(let t of E8){if(t!==LA){ca.add(t);for(let e of OA)ca.add(`${t}.${e}`)}for(let e of R8){ca.add(`${t}.${e}`);for(let r of k8)ca.add(`${t}.${e}.${r}`)}for(let e of P8){ca.add(`${t}.${e}`);for(let r of OA)ca.add(`${t}.${e}.${r}`)}}var M8=new RegExp("^(?!;;).*@([\\w.]*)","gm");function UA(t,e){let r=e.matchAll(M8),n=[];for(let o of r){let s=o[1];if(!(s.length>1&&!s.includes(".")&&s.startsWith("_"))&&!ca.has(s)){let l=o.input.slice(0,o.index).split(`
`).length;n.push(`${t}(${l}) invalid capture '@${s}'.`)}}if(n.length===0)return;let i=n.join(`
`);if(ut(F().messages,"validateQueryCaptures.invalidCaptureName",i),F().runMode==="test")throw new Error(i)}var gm=class t{constructor(e){this.query=e}static async create(e,r,n,i){let o=await A8(e,r,`${i}.scm`);if(o==null||!await n.loadLanguage(i))return;let s=n.getLanguage(i).query(o),l=Rl.create(i,n,s);return new t(l)}getScopeHandler(e){if(this.query.captureNames.includes(e.type))return new Yd(this.query,e)}};async function A8(t,e,r){let n={[r]:null},i=t.runMode!=="production";for(;Object.values(n).some(o=>o==null);)for(let[o,s]of Object.entries(n)){if(s!=null)continue;let l=await e.readQuery(o);if(l==null){if(o===r)return;if(ut(t.messages,"LanguageDefinition.readQueryFileAndImports.queryNotFound",`Could not find imported query file ${o}`),t.runMode==="test")throw new Error("Invalid import statement");l=""}i&&UA(o,l),n[o]=l,nn(l,/^[^\S\r\n]*;;?[^\S\r\n]*(?:import|include)[^\S\r\n]+['"]?([\w|/\\.]+)['"]?[^\S\r\n]*$/gm,u=>{let p=u[1];i&&D8(t,o,p,u[0]),n[p]=n[p]??null})}return Object.values(n).join(`
`)}function D8(t,e,r,n){let i=!1;/[/\\]/g.test(r)&&(ut(t.messages,"LanguageDefinition.readQueryFileAndImports.invalidImport",`Invalid import statement in ${e}: "${n}". Relative import paths not supported`),i=!0);let o=`;; import ${r}`;if(n!==o&&(ut(t.messages,"LanguageDefinition.readQueryFileAndImports.malformedImport",`Malformed import statement in ${e}: "${n}". Import statements must be of the form "${o}"`),i=!0),i&&t.runMode==="test")throw new Error("Invalid import statement")}var BA=Symbol("LANGUAGE_UNDEFINED"),ym=class t{constructor(e,r,n){this.ide=e;this.treeSitter=r;this.treeSitterQueryProvider=n;this.notifier=new Wt;this.languageDefinitions=new Map;this.disposables=[];this.onDidChangeDefinition=this.notifier.registerListener;e.onDidOpenTextDocument(i=>{this.loadLanguage(i.languageId)}),e.onDidChangeVisibleTextEditors(i=>{i.forEach(({document:o})=>this.loadLanguage(o.languageId))}),this.disposables.push(n.onChanges(()=>this.reloadLanguageDefinitions()))}static async create(e,r,n){let i=new t(e,r,n);return await i.loadAllLanguages(),i}async loadAllLanguages(){let e=this.ide.visibleTextEditors.map(({document:r})=>r.languageId);try{await Promise.all(e.map(r=>this.loadLanguage(r)))}catch(r){if(ut(this.ide.messages,"Failed to load language definitions",Rn(r)),this.ide.runMode==="test")throw r}}async loadLanguage(e){if(this.languageDefinitions.has(e))return;let r=await gm.create(this.ide,this.treeSitterQueryProvider,this.treeSitter,e)??BA;this.languageDefinitions.set(e,r)}async reloadLanguageDefinitions(){this.languageDefinitions.clear(),await this.loadAllLanguages(),this.notifier.notifyListeners()}get(e){let r=this.languageDefinitions.get(e);if(r==null)throw new Error("Expected language definition entry is missing for languageId "+e);return r===BA?void 0:r}getNodeAtLocation(e,r){return this.treeSitter.getNodeAtLocation(e,r)}dispose(){this.disposables.forEach(e=>e.dispose())}};var xm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}get nestedStages(){return this.nestedStages_==null&&(this.nestedStages_=this.modifier.modifiers.map(this.modifierStageFactory.create)),this.nestedStages_}run(e){for(let r of this.nestedStages)try{return r.run(e)}catch{continue}throw new Error("No modifier could be applied")}};var Os=class{constructor(e,r){this.modifierStageFactory=e;this.nestedModifier=r;this.suppressErrors=!1}run(e){if(this.shouldModify(e))try{return this.nestedStage.run(e).map(r=>r.withThatTarget(e))}catch(r){if(!this.suppressErrors)throw r}return[e]}get nestedStage(){return this.nestedStage_==null&&(this.nestedStage_=this.modifierStageFactory.create(this.nestedModifier)),this.nestedStage_}},Ls=class extends Os{constructor(e,r){super(e,r.modifier)}shouldModify(e){return!e.hasExplicitScopeType}},kl=class extends Os{constructor(r,n,i){super(r,n);this.modificationCondition=i}shouldModify(r){return this.modificationCondition(r)}},Sm=class extends Os{shouldModify(e){return!e.hasExplicitScopeType&&!e.isImplicit}},Us=class extends Os{constructor(r){super(r,{type:"containingScope",scopeType:{type:"token"}});this.suppressErrors=!0}shouldModify(r){return!r.hasExplicitScopeType&&!r.hasExplicitRange&&r.contentRange.isEmpty}};function VA(t,e){return Object.getPrototypeOf(t).constructor===Object.getPrototypeOf(e).constructor}function Bs(t,e,r,n,i){if(n&&i&&VA(e,r)){let o=e.maybeCreateRichRangeTarget(t,r);if(o!=null)return o}return e.isLine&&r.isLine?new Pn({editor:e.editor,isReversed:t,contentRange:hs(e,r,n,i)}):new Et({editor:e.editor,isReversed:t,hasExplicitRange:!0,contentRange:no(e,r,n,i),isToken:n&&i&&e.isToken&&r.isToken})}function Tm(t,e,r){if(e===r)return e.getTargets(t);let n=e.getTargets(t),i=r.getTargets(t);if(n.length!==1||i.length!==1)throw Error("Scope range targets must be single-target");let[o]=n,[s]=i,l=s.contentRange.start.isAfterOrEqual(o.contentRange.start),[u,p]=l?[o,s]:[s,o];return[Bs(t,u,p,!0,!0)]}function vm(t,e,r,n){let i=Array.from(t.generateScopes(e,r,"forward",{containment:"required",allowAdjacentScopes:!0,skipAncestorScopes:!0}));switch(i.length){case 0:return;case 1:return i[0];case 2:{let[o,s]=i;return n==="forward"?s:n==="backward"||(t.isPreferredOver?.(o,s)??!1)?o:s}default:throw new Error("Expected no more than 2 scope candidates")}}function Vs(t,e,r=0){let{isReversed:n,editor:i,contentRange:{start:o,end:s}}=t;if(s.isEqual(o)){let p=vm(e,i,o);return p==null||(r>0&&(p=WT(e,i,p.domain.end,"forward",r,!0)),p==null)?void 0:p.getTargets(n)}let l=WT(e,i,o,"forward",r);if(l==null)return;if(l.domain.contains(s))return l.getTargets(n);let u=WT(e,i,s,"backward",r);if(u!=null)return Tm(n,l,u)}function WT(t,e,r,n,i,o=!1){let s=0;for(let l of t.generateScopes(e,r,n,{containment:"required",allowAdjacentScopes:o})){if(s===i)return l;s+=1}}var bm=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let{scopeType:r,ancestorIndex:n=0}=this.modifier,i=this.scopeHandlerFactory.create(r,e.editor.document.languageId);if(i==null)return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e);let o=Vs(e,i,n);if(o==null){if(r.type==="collectionItem")return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e);throw new wt(this.modifier.scopeType.type)}return o}};var wm=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let{scopeType:r}=this.modifier,{editor:n,isReversed:i}=e,o=this.scopeHandlerFactory.create(r,n.document.languageId);if(o==null)return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e);let s;if(e.hasExplicitRange&&(s=WA(o,n,e.contentRange),s.length===1&&s[0].domain.contains(e.contentRange)&&(s=void 0)),s==null)try{s=this.getDefaultIterationRange(o,this.scopeHandlerFactory,e).flatMap(l=>WA(o,n,l))}catch(l){if(!(l instanceof wt))throw l;s=[]}if(s.length===0){if(r.type==="collectionItem")return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e);throw new wt(r.type)}return s.flatMap(l=>l.getTargets(i))}getDefaultIterationRange(e,r,n){let i=r.create(e.iterationScopeType,n.editor.document.languageId);if(i==null)throw Error("Could not find iteration scope handler");let o=Vs(n,i);if(o==null)throw new wt(`iteration scope for ${e.scopeType.type}`);return o.map(s=>s.contentRange)}};function WA(t,e,{start:r,end:n}){return Array.from(t.generateScopes(e,r,"forward",{distalPosition:n,skipAncestorScopes:!0,allowAdjacentScopes:t.includeAdjacentInEvery}))}var _m=class{constructor(e){this.modifier=e}run(e){return e.contentText.trim()!==""?[e]:[]}},Em=class{constructor(e){this.modifier=e}run(e){return e.contentText.trim()===""?[e]:[]}};var Rm=class{run(){return bd(F()).map(e=>new Td({editor:e.editor,isReversed:e.selection.isReversed,contentRange:e.selection}))}};var km=class{constructor(e,r){this.modifierStageFactory=e;this.markStageFactory=r}run(e,{actionFinalStages:r=[],noAutomaticTokenExpansion:n=!1}={}){return new HT(this.modifierStageFactory,this.markStageFactory,e,{actionFinalStages:r,noAutomaticTokenExpansion:n}).run()}},HT=class{constructor(e,r,n,i){this.modifierStageFactory=e;this.markStageFactory=r;this.target=n;this.opts=i}run(){return I8(this.processTarget(this.target))}processTarget(e){switch(e.type){case"list":return e.elements.flatMap(r=>this.processTarget(r));case"range":return this.processRangeTarget(e);case"primitive":case"implicit":return this.processPrimitiveTarget(e)}}processRangeTarget(e){let r=this.processPrimitiveTarget(e.anchor),n=this.processPrimitiveTarget(e.active);return xt(r,n).flatMap(([i,o])=>{if(i==null||o==null)throw new Error("AnchorTargets and activeTargets lengths don't match");switch(e.rangeType){case"continuous":return this.processContinuousRangeTarget(i,o,e);case"vertical":return F8(i,o,e.excludeAnchor,e.excludeActive)}})}processContinuousRangeTarget(e,r,{excludeAnchor:n,excludeActive:i,exclusionScopeType:o}){if(o==null)return[fo(e,r,n,i)];let s=qT(e,r);return[fo(n?HA(this.modifierStageFactory,e,o,s?"backward":"forward"):e,i?HA(this.modifierStageFactory,r,o,s?"forward":"backward"):r,!1,!1)]}processPrimitiveTarget(e){let r,n;e.type==="implicit"?(r=new Rm,n=[]):(r=this.markStageFactory.create(e.mark),n=$T(this.modifierStageFactory,e.modifiers));let i=r.run(),o=[...n,...this.opts.actionFinalStages,...this.opts.noAutomaticTokenExpansion?[]:[new Us(this.modifierStageFactory)]];return jT(o,i)}};function $T(t,e){return e.map(t.create).reverse()}function jT(t,e){return t.forEach(r=>{e=e.flatMap(n=>r.run(n))}),e}function HA(t,e,r,n){return t.create({type:"relativeScope",scopeType:r,direction:n,length:1,offset:1}).run(e)[0]}function qT(t,e){return t.contentRange.start.isAfter(e.contentRange.start)?!0:t.contentRange.start.isBefore(e.contentRange.start)?!1:t.contentRange.end.isAfter(e.contentRange.end)}function I8(t){return Qk(t,(e,r)=>e.isEqual(r),e=>e.contentRange.concise())}function $A(t,e){if(t.editor!==e.editor)throw new Error("Cannot form range between targets in different editors")}function fo(t,e,r=!1,n=!1){$A(t,e);let i=qT(t,e);return Bs(i,i?e:t,i?t:e,!(i?n:r),!(i?r:n))}function F8(t,e,r,n){$A(t,e);let i=qT(t,e),o=i?-1:1,l=(i?t.contentRange.start:t.contentRange.end).line+(r?o:0),p=(i?e.contentRange.start:e.contentRange.end).line-(n?o:0),d=[];for(let m=l;;m+=o){let g=new H(m,t.contentRange.start.character,m,t.contentRange.end.character);if(d.push(new Ue({editor:t.editor,isReversed:t.isReversed,contentRange:g,insertionDelimiter:t.insertionDelimiter})),m===p)return d}}var Pm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=this.modifier.modifiers??[{type:"containingScope",scopeType:{type:"line"}}],n=$T(this.modifierStageFactory,r);return jT(n,[e]).map(o=>{let s=this.modifier.type==="extendThroughStartOf";return new vd({editor:e.editor,isReversed:s,inputTarget:e,modifiedTarget:o,isHead:s})})}};var Di=class extends Error{constructor(){super("Scope index out of range"),this.name="OutOfRangeError"}};function jA(t,e,r){return zT(t,e,r),t.slice(e,r+1)}function zT(t,e,r){if(e<0||r>=t.length)throw new Di}var Ws=class{constructor(e,r,n){this.modifierStageFactory=e;this.storedTargets=r;this.modifier=n}run(e){let r=new Us(this.modifierStageFactory).run(e)[0];switch(this.modifier.type){case"everyScope":return this.handleEveryScope(r);case"ordinalScope":return this.handleOrdinalScope(r,this.modifier);case"relativeScope":return this.handleRelativeScope(r,this.modifier);default:throw Error(`${this.modifier.type} instance scope not supported`)}}handleEveryScope(e){return Array.from(Wd(this.getEveryRanges(e),([r,n])=>this.getTargetIterable(e,r,n,"forward")))}handleOrdinalScope(e,{start:r,length:n}){return this.getEveryRanges(e).flatMap(([i,o])=>qA(this.getTargetIterable(e,i,o,r>=0?"forward":"backward"),r>=0?r:-(n+r),n))}handleRelativeScope(e,{direction:r,offset:n,length:i}){return(this.storedTargets.get("instanceReference")??[e]).flatMap(s=>{let{editor:l}=s,u=r==="forward"?new H(n===0?s.contentRange.start:s.contentRange.end,l.document.range.end):new H(l.document.range.start,n===0?s.contentRange.end:s.contentRange.start);return qA(this.getTargetIterable(e,l,u,r),n===0?0:n-1,i)})}getEveryRanges({editor:e}){return this.storedTargets.get("instanceReference")?.map(({editor:r,contentRange:n})=>[r,n])??[[e,e.document.range]]}getTargetIterable(e,r,n,i){let o=Nt(Zn(new RegExp(Nr(e.contentText),"g"),r,n,i),l=>new Ue({contentRange:l,editor:r,isReversed:!1,isToken:!1})),s=C8(e);if(s!=null){let l=this.modifierStageFactory.create({type:"containingScope",scopeType:s});return $M(Nt(o,u=>{try{let p=l.run(u);return p.length===1&&p[0].contentRange.isRangeEqual(u.contentRange)?p[0]:null}catch{return null}}),u=>u!=null)}return o}};function C8(t){return t.isLine?{type:"line"}:t.isToken?{type:"token"}:t.isWord?{type:"word"}:null}function qA(t,e,r){Array.from(Tl(e,t));let n=Array.from(Tl(r,t));if(n.length<r)throw new Di;return n}var Mm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r;this.containingSurroundingPairIfNoInteriorStage=N8(this.modifierStageFactory)}run(e){return this.containingSurroundingPairIfNoInteriorStage.run(e).flatMap(r=>r.getInterior())}},Am=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r;this.containingSurroundingPairIfNoBoundaryStage=GT(this.modifierStageFactory)}run(e){return this.containingSurroundingPairIfNoBoundaryStage.run(e).flatMap(r=>r.getBoundary())}};function N8(t){return new kl(t,{type:"containingScope",scopeType:{type:"surroundingPair",delimiter:"any"}},e=>e.getInterior()==null)}function GT(t){return new kl(t,{type:"containingScope",scopeType:{type:"surroundingPair",delimiter:"any"}},e=>e.getBoundary()==null)}var QT=t=>e=>t(e)?e:null;function zA(t){return e=>{let r=e;for(;r!=null;){let n=t(r);if(n!=null)return n;r=r.previousSibling}return null}}function GA(...t){return e=>{let r=e;for(let n of t)if(r=n(r),r==null)return null;return r}}function KA(t,...e){return r=>{let n=r,i=[],o=[...e].reverse();for(let s of o){if(n==null||(n=s(n),n==null))return null;i.push(n),n=n.parent??null}return i.reverse()[t]}}var la=(...t)=>QT(e=>t.includes(e.type)),KT=t=>new se(t.row,t.column),ZA=(...t)=>{let e=["(","{","[","<"],r=[")","}","]",">"],n=e.concat(r),i=(s,l)=>s!=null&&l.includes(s.type),o=s=>s!=null&&!i(s,n);return(s,l)=>{let u,{start:p,end:d}=l;if(i(s.parent,t))return i(s,e)?u=s.nextNamedSibling:i(s,r)?u=s.previousNamedSibling:s.type===","?u=d.isBeforeOrEqual(KT(s.startPosition))?s.previousNamedSibling:s.nextNamedSibling:u=s,o(u)?u:null;if(i(s,t)){let m=[...s.children],g=m.find(({startPosition:v})=>KT(v).isAfterOrEqual(d))??null;if(o(g))return g;m.reverse();let x=m.find(({endPosition:v})=>KT(v).isBeforeOrEqual(p))??null;if(o(x))return x}return null}};function Me(...t){let e=O8(t);return r=>{for(let n of e){let i=L8(r,n);if(i!=null)return i}return null}}function O8(t){return t.map(e=>e.split(".").map(r=>new ZT(r)))}function L8(t,e){let r=U8(t,e);!r&&e.length>1&&(r=B8(t,e));let n=null,i;return r!=null&&([n,i]=r),n!=null&&i!=null&&i.fields!=null&&i.fields.forEach(o=>{n=(o.isIndex?n?.namedChild(o.value):n?.childForFieldName(o.value))??null}),n}function U8(t,e){let r=null,n=t;for(let i=e.length-1;i>-1;--i){let o=e[i];if(n==null||!o.typeEquals(n)){if(o.isOptional)continue;return null}(!r||!r[1].isImportant)&&(r=[n,o]),n=n.parent}return r}function B8(t,e){let r=null,n=t;for(let i=0;i<e.length;++i){let o=e[i];if(n==null||!o.typeEquals(n)){if(o.isOptional)continue;return null}if((!r||o.isImportant)&&(r=[n,o]),i+1<e.length){let s=n.namedChildren.filter(l=>e[i+1].typeEquals(l));n=s.length===1?s[0]:null}}return r}var ZT=class{constructor(e){this.anyType=!1;this.notType=!1;this.type=e.match(/^[\w*~]+/)[0],this.type==="*"?this.anyType=!0:this.type.startsWith("~")&&(this.type=this.type.slice(1),this.notType=!0),this.isImportant=e.indexOf("!")>-1,this.isOptional=e.indexOf("?")>-1,this.fields=[...e.matchAll(/(?<=\[).+?(?=\])/g)].map(r=>r[0]).map(r=>/\d+/.test(r)?{isIndex:!0,value:Number(r)}:{isIndex:!1,value:r})}typeEquals(e){return this.anyType?!0:this.notType?this.type!==e.type:this.type===e.type}};function Te(t,e=Qn){return function(r,n){let i=t(n,r.selection);return i!=null?[{node:i,selection:e(r.editor,i)}]:null}}function Jn(t,e=Qn){let r=GA(...t);return function(n,i){let o=r(i);return o==null?null:[{node:o,selection:e(n.editor,o)}]}}function Hs(t,e=0,r=Qn){return Te(KA(e,...t),r)}function Tt(...t){return Te(Me(...t))}function ei(...t){return Te(ZA(...t),hA())}function $s(...t){return Te(Me(...t),gA)}function nr(t,e=[]){return Te(Me(...t),yA(...e))}function Vr(t,e=[]){return Te(Me(...t),xA(...e))}function Ke(...t){return(e,r)=>{for(let n of t){let i=n(e,r);if(i!=null)return i}return null}}function QA(t){return(e,r)=>{throw new Error(`Node type '${t}' not supported`)}}function Rt(t){return Object.freeze(Object.fromEntries(bi(t).map(e=>{let r=t[e];return Array.isArray(r)?[e,Tt(...r)]:typeof r=="string"?[e,Tt(r)]:[e,r]})))}function YA(t,e){let r=t.walk();r.gotoFirstChild();let n=[],i=!0;for(;i;)r.currentFieldName===e&&n.push(r.currentNode),i=r.gotoNextSibling();return n}function V8(t,e=!0){let r=e?[t]:[];for(let n=t.parent;n!=null;n=n.parent)r.push(n);return r}function XA(t){return V8(t).some(e=>e.type==="ERROR")}function W8(t,e){return XT(t,r=>Math.floor(r/2)*2+e)}function Dm(t){return W8(Me("map_lit"),t)}function XT(t,e){return r=>{let n=r.parent;if(n==null||t(n)==null)return null;let i=Pl(n),o=i.findIndex(({id:l})=>l===r.id);if(o===-1)return null;let s=e(o);return s===-1?null:i[s]}}function H8(){return XT(t=>t,t=>t)}var Pl=t=>YA(t,"value"),YT="~quoting_lit.list_lit!",eD=Me(YT);function JT(...t){return e=>{let r=eD(e);if(r==null)return null;let n=Pl(r)[0];return t.includes(n?.text)?r:null}}function $8(...t){return Te(JT(...t))}var tD=JT("defn","defmacro"),JA=Jn([tD,t=>Pl(t)[1]]),rD=JT("if","if-let","when","when-let"),j8=Te(rD),q8={collectionKey:Te(Dm(0)),collectionItem:Ke(Te(Dm(0),Ko(t=>t.type==="{"||t.type==="}",", ",Vt,Dm(1))),Te(H8())),value:Te(Dm(1)),argumentOrParameter:Te(XT(Me(YT),t=>t!==0?t:-1)),functionCall:YT,functionCallee:Jn([eD,t=>Pl(t)[0]]),namedFunction:Te(tD),functionName:JA,name:JA,anonymousFunction:Ke($8("fn"),Tt("anon_fn_lit")),ifStatement:j8,condition:Jn([rD,t=>Pl(t)[1]])},nD=Rt(q8);var z8=["array_creation_expression","implicit_array_creation_expression","implicit_stack_alloc_array_creation_expression","stack_alloc_array_creation_expression"],G8=["implicit_object_creation_expression"],iD=t=>t.children.find(e=>e.type==="initializer_expression")??null,K8=t=>t.childForFieldName("initializer"),Z8=(t,e)=>Ko(r=>r.type===","||r.type===t||r.type===e,", "),Q8={map:Ke(Jn([la(...G8),iD]),Jn([la("object_creation_expression"),K8])),collectionKey:Jn([la("assignment_expression"),t=>t.childForFieldName("left")]),value:nr(["variable_declaration?.variable_declarator[1][0]!","assignment_expression[right]"],["assignment_operator"]),list:Ke(Jn([la(...z8),iD]),Jn([la("object_creation_expression"),t=>t.childForFieldName("initializer")]))},Y8={...Q8,argumentOrParameter:Te(QT(t=>t.parent?.type==="argument_list"||t.type==="parameter"),Z8("(",")")),type:Vr(["*[type]"]),name:["variable_declaration?.variable_declarator.identifier!","assignment_expression[left]","*[name]"]},oD=Rt(Y8);var aD=["command","displayed_equation","inline_formula","math_set","block_comment","package_include","class_include","latex_include","biblatex_include","bibtex_include","graphics_include","svg_include","inkscape_include","verbatim_include","import_include","caption","citation","label_definition","label_reference","label_reference_range","label_number","new_command_definition","old_command_definition","let_command_definition","environment_definition","glossary_entry_definition","glossary_entry_reference","acronym_definition","acronym_reference","theorem_definition","color_definition","color_set_definition","color_reference","tikz_library_import"],X8=["curly_group","curly_group_text","curly_group_text_list","curly_group_path","curly_group_path_list","curly_group_command_name","curly_group_key_value","curly_group_glob_pattern","curly_group_impl","brack_group","brack_group_text","brack_group_argc","brack_group_key_value","mixed_group"],cD=["subparagraph","paragraph","subsubsection","subsection","section","chapter","part"],sD=cD.map(t=>`${t}[text]`),J8=cD.map(t=>`${t}[command]`);function ev(t,e){return{selection:new ge(t.document.positionAt(e.startIndex+1),t.document.positionAt(e.endIndex-1)),context:{removalRange:new ge(t.document.positionAt(e.startIndex),t.document.positionAt(e.endIndex))}}}function e7(t,e){let r=e.startIndex,n=e.endIndex,i=e.nextNamedSibling;return i!=null&&i.isNamed&&(n=i.endIndex),{selection:new ge(t.document.positionAt(r),t.document.positionAt(n)),context:{}}}function t7(t,e){let r=e.startIndex,n=e.childForFieldName("label");if(n==null){let i=e.childForFieldName("command");i!=null&&(r=i.endIndex+1)}else r=n.endIndex+1;return{selection:new ge(t.document.positionAt(r),t.document.positionAt(e.endIndex)),context:{leadingDelimiterRange:new H(t.document.positionAt(e.startIndex),t.document.positionAt(r-1))}}}var r7={argumentOrParameter:Ke(Hs([Me(...aD),Me(...X8)],1,ev),Te(Me("begin[name]","end[name]",...sD),ev)),functionCall:Ke(Te(Me(...aD,"begin","end")),Te(Me(...J8),e7)),name:Ke(Te(Me(...sD),ev),Tt("begin[name][text]","end[name][text]")),collectionItem:Te(Me("enum_item"),t7)},lD=Rt(r7);var uD=["atx_h1_marker","atx_h2_marker","atx_h3_marker","atx_h4_marker","atx_h5_marker","atx_h6_marker"];function n7(t){let e=uD.indexOf(t);return r=>r.type==="atx_heading"&&uD.indexOf(r.firstNamedChild?.type)<=e?r:null}function i7(t,e){let r=n7(e.firstNamedChild?.type),{context:n,selection:i}=dA(t,e,r);return{context:n,selection:gs(t,i).toSelection(i.isReversed)}}function ua(...t){let e=Me(...t);return Te(zA(e),i7)}var o7={section:ua("atx_heading"),sectionLevelOne:ua("atx_heading.atx_h1_marker"),sectionLevelTwo:ua("atx_heading.atx_h2_marker"),sectionLevelThree:ua("atx_heading.atx_h3_marker"),sectionLevelFour:ua("atx_heading.atx_h4_marker"),sectionLevelFive:ua("atx_heading.atx_h5_marker"),sectionLevelSix:ua("atx_heading.atx_h6_marker")},pD=Rt(o7);var a7=["=","+=","-=","*=","/=","%=","**=","&=","|=","^=","<<=",">>=",".=","??="];function s7(t,e){let r=so(e),n=r,i=so(e.previousSibling),o=so(e.nextSibling.nextSibling),s=r.with(i.start,o.start);return{selection:new ge(n.start,n.end),context:{removalRange:s}}}var c7={type:Ke(Vr(["~cast_expression[type]"]),Te(Me("cast_expression[type]"),s7)),value:nr(["array_element_initializer[1]","assignment_expression[right]","augmented_assignment_expression[right]","return_statement[0]","yield_expression[0]"],a7.concat(["=>"])),collectionKey:Vr(["array_element_initializer[0]"],["=>"]),argumentOrParameter:ei("arguments","formal_parameters")},fD=Rt(c7);var l7=["alias","begin_block","end_block","if_modifier","rescue_modifier","undef","unless_modifier","until_modifier","while_modifier"],u7=["array","assignment","begin","binary","break","call","case","case_match","chained_string","character","class","class_variable","complex","conditional","constant","delimited_symbol","element_reference","false","float","for","global_variable","hash","heredoc_beginning","identifier","if","instance_variable","integer","lambda","method","module","next","nil","operator_assignment","parenthesized_statements","range","rational","redo","regex","retry","return","scope_resolution","self","simple_symbol","singleton_class","singleton_method","string","string_array","subshell","super","symbol_array","true","unary","unless","until","while","yield"],p7=["begin_block","begin","block_body","block","body_statement","do_block","do","else","end_block","ensure","heredoc_beginning","interpolation","lambda","method","parenthesized_statements","program","singleton_class","singleton_method","then"],f7=["hash"],d7=["array","string_array","symbol_array"],m7=["=","+=","-=","*=","**=","/=","||=","|=","&&=","&=","%=",">>=","<<=","^="],h7=[":","=>"];function g7(t){if(t.type!=="call")return null;let e=t.childForFieldName("receiver"),r=t.childForFieldName("method"),n=t.childForFieldName("block");return e?.text==="Proc"&&r?.text==="new"||e==null&&r?.text==="lambda"?t:n}var y7={statement:Ke(Tt(...l7),Hs([Me(...p7),Me(...u7)],1)),anonymousFunction:Ke(Tt("lambda","do_block"),Te(g7)),condition:$s("*[condition]"),argumentOrParameter:ei("lambda_parameters","method_parameters","block_parameters","argument_list"),collectionKey:Vr(["pair[key]"],[":"]),value:nr(["pair[value]","assignment[right]","operator_assignment[right]","return.argument_list!"],m7.concat(h7)),collectionItem:ei(...f7,...d7)},dD=Rt(y7);function tv(){let t=Yn(["else_clause"],[],{includeUnnamedChildren:!0});return function(e,r){let n=t(e,r),i=r.parent;if(i?.type!=="else_clause"){let s=r.childForFieldName("alternative");if(s==null)return n;let{selection:l}=n;return{selection:l,context:{removalRange:new ge(l.start,vT(s.namedChild(0).startPosition))}}}let{selection:o}=n;return{selection:new ge(vT(i.child(0).startPosition),o.end),context:{}}}}function mD(t){let e=tv();return function(r,n){return n.namedChild(0).type===t?e(r,n.namedChild(0)):Qn(r,n)}}var hD=["associated_type","attribute_item","const_item","empty_statement","enum_item","extern_crate_declaration","foreign_mod_item","impl_item","inner_attribute_item","let_declaration","macro_definition","macro_invocation","function_item","function_signature_item","mod_item","static_item","struct_item","trait_item","type_item","union_item","use_declaration","expression_statement"],x7=["source_file","block","declaration_list"];function S7(t){return t.parent?.type==="impl_item"&&t.parent?.childForFieldName("type")?.equals(t)?t:null}function T7(t,e){return{selection:fA(e.children[1],e.lastNamedChild),context:{leadingDelimiterRange:un(e.children[0].startPosition,e.children[1].startPosition)}}}function v7(t){if(t.type!=="block")return null;let{lastNamedChild:e}=t;if(e==null)return null;if(e.type==="expression_statement"){let r=e.child(0);return r.type==="return_expression"?r.child(1):null}return hD.includes(e.type)?null:e.type==="return_expression"?e.child(1):e}var b7={statement:Hs([Me(...x7),Me(...hD)],1),condition:Ke(Tt("while_expression[condition]","if_expression[condition]"),Te(Me("while_let_expression","if_let_expression"),Yn(["while","if","block"],[],{includeUnnamedChildren:!0})),nr(["*.match_pattern![condition]"],["if"])),collectionItem:ei("array_expression","tuple_expression","tuple_type"),type:Ke(nr(["let_declaration[type]","parameter[type]","field_declaration[type]","const_item[type]"],[":"]),Te(Me("constrained_type_parameter[bounds]","where_predicate[bounds]"),T7),nr(["function_item[return_type]"],["->"]),Te(S7),Tt("struct_item","trait_item","impl_item","array_type[element]")),argumentOrParameter:ei("arguments","parameters","meta_arguments","type_parameters","ordered_field_declaration_list"),collectionKey:Ke(Vr(["field_initializer[name]","field_pattern[name]"],[":"])),name:Ke(Tt("let_declaration.identifier!","parameter.identifier!","function_item[name]","struct_item[name]","enum_item[name]","enum_variant[name]","trait_item[name]","const_item[name]","meta_item.identifier!","let_declaration[pattern]","constrained_type_parameter[left]","where_predicate[left]","field_declaration[name]"),Vr(["field_initializer[name]","field_pattern[name]"],[":"])),value:Ke(nr(["let_declaration[value]"],["="]),nr(["field_initializer[value]","field_pattern[pattern]"],[":"]),Tt("meta_item[value]","const_item[value]"),Te(v7)),attribute:Vr(["mutable_specifier","attribute_item"]),branch:Ke(Tt("match_arm"),Te(Me("else_clause"),mD("if_expression")),Te(Me("if_expression"),tv()))},gD=Rt(b7);var w7={argumentOrParameter:ei("arguments","parameters","class_parameters","bindings"),branch:Te(Me("case_clause"),Yn([],[],{includeUnnamedChildren:!0})),type:nr(["upper_bound[type]","lower_bound[type]","view_bound[type]","context_bound[type]","val_definition[type]","val_declaration[type]","var_definition[type]","var_declaration[type]","type_definition","extends_clause[type]","class_parameter[type]","parameter[type]","function_definition[return_type]","typed_pattern[type]","binding[type]"],[":"]),value:nr(["*[value]","*[default_value]","type_definition[type]"],["="]),condition:$s("*[condition]")},yD=Rt(w7);var _7=["apply_statement","at_rule","charset_statement","debug_statement","each_statement","error_statement","for_statement","forward_statement","function_statement","if_statement","import_statement","include_statement","keyframes_statement","media_statement","mixin_statement","namespace_statement","placeholder","rule_set","supports_statement","use_statement","warn_statement","while_statement"];function SD(t){return[",","(",")"].includes(t.type)||TD(t)}function TD(t){return t.type==="plain_value"&&t.text==="at"}function xD(t){return e=>{(TD(e)||e.type===",")&&(e=e.previousSibling);let r=t(e);for(;r&&!SD(r);)e=r,r=t(r);return e}}function E7(t,e){return e.type!=="declaration"?null:e.descendantsOfType("unit").map(r=>({node:r,selection:Qn(t.editor,r)}))}var R7={condition:$s("condition"),statement:Ke(Tt(..._7),Te(Me("attribute_selector"),Yn([],["attribute_name","string_value"]))),argumentOrParameter:Ke(Te(Me("arguments.*!","parameters.*!"),Ko(t=>SD(t),", ",xD(t=>t.previousSibling),xD(t=>t.nextSibling)))),collectionKey:Vr(["declaration.property_name!"],[":"]),value:Ke(Te(Me("declaration"),Yn(["property_name","variable_name"])),Te(Me("include_statement","namespace_statement"),Yn()),Tt("return_statement.*!","import_statement.*!","attribute_selector.plain_value!","attribute_selector.string_value!","parameter.default_value!")),unit:Ke(Tt("integer_value.unit!"),E7)},rv=Rt(R7);function vD(t,e,r){let n=Ml[t];if(n==null)throw new wp(t);let i=n[e];return i==null?QA(e):r?k7(i):i}var Ml={clojure:nD,csharp:oD,css:rv,latex:lD,markdown:pD,php:fD,ruby:dD,rust:gD,scala:yD,scss:rv};function k7(t){return(e,r)=>{let n=t(e,r);return n==null?null:(n=n.flatMap(i=>P7(i.node,pd(e,i.selection.selection),t)),n.length>0?n:null)}}function P7(t,e,r){let n=t.parent;for(;n!=null;){let i=n.namedChildren.flatMap(o=>r(e,o)).filter(o=>o!=null);if(i.length>0)return i;n=n.parent}return[]}var js=class{constructor(e,r){this.languageDefinitions=e;this.modifier=r}run(e){let r=vD(e.editor.document.languageId,this.modifier.scopeType.type,this.modifier.type==="everyScope"),n=this.languageDefinitions.getNodeAtLocation(e.editor.document,e.contentRange);if(n==null)throw new wt(this.modifier.scopeType.type);let i=M7(n,r,{editor:e.editor,selection:new ge(e.contentRange.start,e.contentRange.end)});if(i==null)throw new wt(this.modifier.scopeType.type);return i.map(o=>{let{containingListDelimiter:s,leadingDelimiterRange:l,trailingDelimiterRange:u,removalRange:p,interiorRange:d}=o.context;if(p!=null&&(l!=null||u!=null))throw Error("Removal range is mutually exclusive with leading or trailing delimiter range");let{editor:m,selection:g}=o.selection;return new oo({scopeTypeType:this.modifier.scopeType.type,editor:m,isReversed:e.isReversed,contentRange:g,removalRange:p,interiorRange:d,insertionDelimiter:s,leadingDelimiterRange:l,trailingDelimiterRange:u})})}};function M7(t,e,r){let n=t;for(;n!=null;){let i=e(r,n);if(i!=null)return i.map(o=>o.selection).map(o=>({selection:pd(r,o.selection),context:o.context}));n=n.parent}return null}var Im=Object.freeze({angleBrackets:[["</","<"],[">","/>"]],backtickQuotes:["`","`"],curlyBrackets:[["{","${"],"}"],doubleQuotes:['"','"'],escapedDoubleQuotes:['\\"','\\"'],escapedParentheses:["\\(","\\)"],escapedSquareBrackets:["\\[","\\]"],escapedSingleQuotes:["\\'","\\'"],parentheses:[["(","$("],")"],singleQuotes:["'","'"],squareBrackets:["[","]"]}),bD={nix:{singleQuotes:["''","''"]},lua:{doubleQuotes:[['"',"[["],['"',"]]"]]},python:{singleQuotes:["string_start","string_end"],doubleQuotes:["string_start","string_end"]}},YMe=Object.fromEntries(Object.values(Im)),wD={any:bi(Im),string:["singleQuotes","doubleQuotes","backtickQuotes"],collectionBoundary:["parentheses","squareBrackets","curlyBrackets","angleBrackets"]};function _D(t){return t!=null&&t in bD?{...Im,...bD[t]}:Im}function Fm(t,e,r){let n=new H(t.positionAt(e+r.leftDelimiter.end),t.positionAt(e+r.rightDelimiter.start)),i=[new H(t.positionAt(e+r.leftDelimiter.start),t.positionAt(e+r.leftDelimiter.end)),new H(t.positionAt(e+r.rightDelimiter.start),t.positionAt(e+r.rightDelimiter.end))];return{contentRange:new ge(t.positionAt(e+r.leftDelimiter.start),t.positionAt(e+r.rightDelimiter.end)),boundary:i,interiorRange:n}}function ED(t,e,r,n){let i=Cm(t,e,()=>r,n).next();return i.done?null:i.value}function*Cm(t,e,r,n){let i=n?{left:1,right:-1,unknown:-1}:{left:-1,right:1,unknown:-1},o={},s=r(),l=n?rs(e,t.length,1):rs(e,-1,-1);for(let u of l){let p=t[u],{delimiterInfo:d}=p,m=d?.delimiter;if(m==null||!s.includes(m))continue;let g=i[d.side],x=(o[m]??0)+g;x===-1?(yield p,s=r(),o[m]=0):o[m]=x}}function RD(t,e,r,n){let{side:i,delimiter:o}=r;for(let s of A7(i,n)){let l=ED(t,s==="right"?e+1:e-1,[o],s==="right");if(l!=null)return l}return null}function A7(t,e){if(e!=null)return[e];switch(t){case"left":return["right"];case"right":return["left"];case"unknown":return["right","left"]}}function Nm(t,e){let r=t.offsets.start<e.offsets.start,n=r?t:e,i=r?e:t;return{leftDelimiter:n.offsets,rightDelimiter:i.offsets}}function kD(t,e){return t.start<=e.start&&t.end>=e.end}function PD(t,e,r,n,i=!1){let o=[t+1,t];for(let s of o){let l=e[s];if(l!=null&&kD(l.offsets,r)){let{delimiterInfo:u}=l;if(u!=null){let p=RD(e,s,u,n.forceDirection);if(p!=null){let d=Nm(l,p);if(!n.requireStrongContainment||d.leftDelimiter.start<r.start&&d.rightDelimiter.end>r.end)return d}else if(i)return null}}}return null}function MD(t,e,r,n,i){let o=r,s=[],l=Cm(e,t,()=>o,!0),u=Cm(e,t-1,()=>s,!1);for(;;){let p=l.next();if(p.done)return null;let d=p.value;s=[d.delimiterInfo.delimiter];let m=u.next();if(m.done)return null;let g=m.value;if(g.offsets.start<=n.start){if(i.requireStrongContainment&&!(g.offsets.end<=n.start&&d.offsets.start>=n.end))continue;return Nm(g,d)}}}function Om(t,e,r,n,i=!1){let o=tS(e,{offsets:n},"offsets.end"),s=PD(o,e,n,t,i);return s??MD(o,e,r,n,t)}function Lm(t,e){let r=_D(t);return e.flatMap(n=>{let[i,o]=r[n],s=rl(i)?[i]:i,l=rl(o)?[o]:o;return Ti(Lc(s,l)).map(p=>{let d=s.includes(p),m=l.includes(p);return{text:p,side:d&&!m?"left":m&&!d?"right":"unknown",delimiter:n}})})}function DD(t,e,r,n,i){let o=t.document,s=Lm(o.languageId,n),l=Object.fromEntries(s.map(d=>[d.text,d])),u={start:o.offsetAt(e.start),end:o.offsetAt(e.end)},p={delimiterTextToDelimiterInfoMap:l,individualDelimiters:s,delimiters:n,selectionOffsets:u,scopeType:i};for(let d=r;d!=null;d=d.parent){if(!so(d).contains(e))continue;let m=D7(p,d);if(m!=null)return Fm(o,0,m)}return null}function D7(t,e){let{delimiterTextToDelimiterInfoMap:r,individualDelimiters:n,delimiters:i,selectionOffsets:o,scopeType:s}=t,u=e.descendantsOfType(n.map(({text:p})=>p)).filter(p=>!(p.text===""&&p.hasError)).map(p=>({offsets:{start:p.startIndex,end:p.endIndex},get delimiterInfo(){let d=r[p.type];if(d.delimiter==="angleBrackets"&&AD(p)!==d.side&&!XA(p))return;let m=d.side==="unknown"&&s.forceDirection==null?AD(p):d.side;return{...d,side:m}}}));return Om(s,u,i,o,e.parent!=null)}function AD(t){return t.parent?.firstChild?.equals(t)?"left":t.parent?.lastChild?.equals(t)?"right":"unknown"}var I7=200,F7=5e4,C7=3;function Um(t,e,r,n,i){let o=t.document,s=r??o.range,l=Lm(void 0,n),u=Object.fromEntries(l.map(x=>[x.text,x])),p=N7(l),d={start:o.offsetAt(s.start),end:o.offsetAt(s.end)},m={start:o.offsetAt(e.start),end:o.offsetAt(e.end)},g={scopeType:i,delimiterRegex:p,delimiters:n,delimiterTextToDelimiterInfoMap:u};for(let x=I7;x<F7;x*=C7){let v={start:Math.max(d.start,m.end-x/2),end:Math.min(d.end,m.end+x/2)},b=new H(o.positionAt(v.start),o.positionAt(v.end));if(!b.contains(e))continue;let I={start:m.start-v.start,end:m.end-v.start},M=O7(g,o.getText(b),I,v.start===d.start,v.end===d.end);if(M!=null)return Fm(o,v.start,M);if(b.contains(s))break}return null}function N7(t){let e=Ti(t.map(({text:r})=>r)).map(Nr).join("|");return new RegExp(`(?<!\\\\)(${e})`,"gu")}function O7(t,e,r,n,i){let{scopeType:o,delimiterTextToDelimiterInfoMap:s,delimiterRegex:l,delimiters:u}=t,{forceDirection:p}=o,d=nn(e,l,(g,x)=>{let v=g.index,b=g[0],I=!1,M;return{offsets:{start:v,end:v+b.length},get delimiterInfo(){if(I)return M;let U=s[b],Q=U.side==="unknown"&&p==null?L7(e,d,x,U?.delimiter,v):U.side,ne={...U,side:Q};return I=!0,M=ne,ne}}}),m=Om(o,d,u,r,!n||!i);return m==null||!n&&m.leftDelimiter.start===0||!i&&m.rightDelimiter.end===e.length-1?null:m}function L7(t,e,r,n,i){let o=r===0?null:Gx(e,s=>s.delimiterInfo?.delimiter===n,r-1);return o==null||t.substring(o.offsets.end,i).includes(`
`)?"left":o.delimiterInfo.side==="left"?"right":"left"}function pa(t,e,r){let n=U7(t,e,r);return n==null?null:new Sd({...n,editor:e.editor,isReversed:e.isReversed})}function U7(t,e,r){let{editor:n,contentRange:i}=e,o=t.get(e.editor.document.languageId),s=n.document,l=wD[r.delimiter]??[r.delimiter],u;try{if(u=t.getNodeAtLocation(s,i),u==null||FD(u))return Um(n,i,null,l,r)}catch(d){if(d.name==="UnsupportedLanguageError")return Um(n,i,null,l,r);throw d}let p=(()=>{let d=o?.getScopeHandler({type:"textFragment"});return d!=null?Vs(e,d,0)?.[0].contentRange:s.range})();if(p!=null){let d=Um(n,i,p,l,r);if(d!=null)return d}return DD(n,i,u,l,r)}function FD(t,e=!1){return ID(t)||e&&t.children.some(ID)?!0:t.parent!=null?FD(t.parent,!0):!1}function ID(t){return t.type==="ERROR"}function ND(t,e){let r=OD(t,e);for(;r!=null;){if(B7(t,e,r))return{range:r.getInterior()[0].contentRange,boundary:nv(r)};r=V7(t,e.editor,r)}return{range:vl(e.editor,e.contentRange)}}function B7(t,e,r){let{contentRange:n}=e;if(n.isEmpty){let[o,s]=nv(r),l=n.start;if(l.isEqual(o.start)||l.isEqual(s.end))return!1;let u=e.editor.document.lineAt(l);if(l.isEqual(o.end)&&CD(u,l.character)||l.isEqual(s.start)&&CD(u,l.character-1))return!1}else{if(n.isRangeEqual(r.contentRange))return!1;let[o,s]=nv(r);if(n.isRangeEqual(o)||n.isRangeEqual(s))return!1}let i=W7(t,r);return!(i!=null&&r.contentRange.start.isBeforeOrEqual(i.contentRange.start))}function nv(t){return t.getBoundary().map(e=>e.contentRange)}function CD(t,e){return e<t.range.start.character||e>=t.range.end.character||t.text[e].trim()===""}function V7(t,e,r){let n=e.document.offsetAt(r.contentRange.start);if(n===0)return null;let i=e.document.positionAt(n-1);return OD(t,new Ue({editor:e,contentRange:new H(i,i),isReversed:!1}))}function OD(t,e){return pa(t,e,{type:"surroundingPair",delimiter:"collectionBoundary",requireStrongContainment:!0})}function W7(t,e){return pa(t,e,{type:"surroundingPair",delimiter:"string",requireStrongContainment:!0})}function LD(t,e,r){let{document:n}=t,o=n.getText(e).split(/([,(){}<>[\]"'`])|(?<!\\)(\\"|\\'|\\`)/g).filter(p=>p!=null&&p.length>0),s=H7(o),l=[],u=n.offsetAt(e.start);return s.forEach(p=>{if(p.trim().length===0){u+=p.length;return}if(p===UD)l.push({type:"separator",range:new H(n.positionAt(u),n.positionAt(u+p.length))});else{let d=u+(p.length-p.trimStart().length);l.push({type:"item",range:new H(n.positionAt(d),n.positionAt(d+p.trim().length))})}u+=p.length}),r!=null?[{type:"boundary",range:r[0]},...l,{type:"boundary",range:r[1]}]:l}function H7(t){let e=[],r=0,n=null,i=null,o=-1;return t.forEach((s,l)=>{r>0?s===i?--r:s===n&&++r:(iv[s]!=null&&t.indexOf(iv[s],l+1)>-1&&(n=s,i=iv[s],r=1),o<0&&(o=l));let u=s===UD&&r===0;if(u||l===t.length-1){let p=u?l:l+1;e.push(t.slice(o,p).join("")),o=-1,u&&e.push(s)}}),e}var UD=",",iv={"(":")","{":"}","<":">","[":"]",'"':'"',"'":"'","`":"`"};var Bm=class{constructor(e,r){this.languageDefinitions=e;this.modifier=r}run(e){try{return new js(this.languageDefinitions,this.modifier).run(e)}catch{}return this.modifier.type==="everyScope"?this.getEveryTarget(this.languageDefinitions,e):[this.getSingleTarget(this.languageDefinitions,e)]}getEveryTarget(e,r){let n=VD(e,r),i=r.hasExplicitRange?BD(r,n):n;if(i.length===0)throw new wt(this.modifier.scopeType.type);return i.map(o=>this.itemInfoToTarget(r,o))}getSingleTarget(e,r){let n=VD(e,r),i=BD(r,n);if(i.length===0)throw new wt(this.modifier.scopeType.type);let o=i[0],s=i[i.length-1],l={contentRange:o.contentRange.union(s.contentRange),domain:o.domain.union(s.domain),leadingDelimiterRange:o.leadingDelimiterRange,trailingDelimiterRange:s.trailingDelimiterRange},u=l.leadingDelimiterRange!=null&&l.trailingDelimiterRange!=null&&tT(r.editor,l.leadingDelimiterRange)>tT(r.editor,l.trailingDelimiterRange)?l.contentRange.union(l.leadingDelimiterRange):void 0;return this.itemInfoToTarget(r,l,u)}itemInfoToTarget(e,r,n){let i=$7(r.leadingDelimiterRange,r.trailingDelimiterRange);return new oo({scopeTypeType:this.modifier.scopeType.type,editor:e.editor,isReversed:e.isReversed,contentRange:r.contentRange,insertionDelimiter:i,leadingDelimiterRange:r.leadingDelimiterRange,trailingDelimiterRange:r.trailingDelimiterRange,removalRange:n})}};function $7(t,e){return t!=null&&!t.isSingleLine||e!=null&&!e.isSingleLine?`,
`:", "}function BD(t,e){return e.filter(r=>r.domain.intersection(t.contentRange)!=null)}function VD(t,e){let{range:r,boundary:n}=ND(t,e);return j7(e.editor,r,n)}function j7(t,e,r){let n=LD(t,e,r),i=[];return n.forEach((o,s)=>{if(o.type==="separator"||o.type==="boundary")return;let l=(()=>{if(n[s-2]?.type==="item")return new H(n[s-2].range.end,o.range.start);if(n[s-1]?.type==="separator")return new H(n[s-1].range.start,o.range.start)})(),u=(()=>{if(n[s+2]?.type==="item")return new H(o.range.end,n[s+2].range.start);if(n[s+1]?.type==="separator")return new H(o.range.end,n[s+1].range.end)})(),p=n[s-1]?.type==="boundary"||n[s-1]?.type==="separator"?n[s-1].range.end:o.range.start,d=n[s+1]?.type==="boundary"||n[s+1]?.type==="separator"?n[s+1].range.start:o.range.end;i.push({contentRange:o.range,leadingDelimiterRange:l,trailingDelimiterRange:u,domain:new H(p,d)})}),i}var qs={type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:{type:"line"}}},ov={type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:{type:"token"}}};var Vm=class extends Error{constructor(e){super(`Target has no ${e} delimiter.`),this.name="NoDelimiterError"}},Wm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){return this.modifierStageFactory.create(ov).run(e).map(r=>{let n=r.getLeadingDelimiterTarget();if(n==null)throw new Vm("leading");return n})}},Hm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){return this.modifierStageFactory.create(ov).run(e).map(r=>{let n=r.getTrailingDelimiterTarget();if(n==null)throw new Vm("trailing");return n})}};function $m(t,e,r,n){return zT(e,r,n),r===n?e[r]:Bs(t,e[r],e[n],!0,!0)}function jm(t,e,r){return t.create({type:"everyScope",scopeType:r}).run(e)}var qm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=jm(this.modifierStageFactory,e,this.modifier.scopeType),n=this.modifier.start+(this.modifier.start<0?r.length:0),i=n+this.modifier.length-1;return this.modifier.isEvery?jA(r,n,i):[$m(e.isReversed,r,n,i)]}};var zm=class{run(e){let r={editor:e.editor,isReversed:e.isReversed,contentRange:this.getContentRange(e.contentRange)};return[e.isRaw?new io(r):new Ue({...r,isToken:!1})]}},Gm=class extends zm{getContentRange(e){return e.start.toEmptyRange()}},Km=class extends zm{getContentRange(e){return e.end.toEmptyRange()}};var Zm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=this.modifierStageFactory.create(this.modifier.anchor),n=this.modifierStageFactory.create(this.modifier.active),i=r.run(e),o=n.run(e);if(i.length!==1||o.length!==1)throw new Error("Expected single anchor and active target");return[fo(i[0],o[0],this.modifier.excludeAnchor,this.modifier.excludeActive)]}};var Qm=class{constructor(e){this.modifier=e}run(e){return[new io({editor:e.editor,contentRange:e.contentRange,isReversed:e.isReversed})]}};var Ym=class extends Error{constructor(e,r,n){super(`Requested ${e} ${n}s, but ${r} are already selected.`),this.name="TooFewScopesError"}};function WD(t,e,r){let n=jm(t,K7(r),e.scopeType),i=G7(r.contentRange,n);return q7(e,r,n,i)}function q7(t,e,r,n){let i=t.direction==="forward",o=z7(t,e.contentRange,r,i,n),s=i?o+t.length-1:o-t.length+1,l=Math.min(o,s),u=Math.max(o,s);return[$m(e.isReversed,r,l,u)]}function z7(t,e,r,n,i){let o=t.offset===0;if(i==null){let u=n?r.findIndex(p=>p.contentRange.start.isAfter(e.start)):Oo(r,p=>p.contentRange.start.isBefore(e.start));if(u===-1)throw new Di;return o?u:n?u+t.offset-1:u-t.offset+1}let s=i.start,l=i.end;if(o){let u=l-s+1;if(u>t.length)throw new Ym(t.length,u,t.scopeType.type);return n?s:l}return n?l+t.offset:s-t.offset}function G7(t,e){let r=e.map((i,o)=>({index:o,intersection:i.contentRange.intersection(t)})).filter(i=>i.intersection!=null);if(t.isEmpty){if(r.length===0)return;let i=r.at(-1).index;return{start:i,end:i}}let n=r.filter(i=>!i.intersection.isEmpty).map(i=>i.index);if(n.length!==0)return{start:n[0],end:n.at(-1)}}function K7(t){return new Et({editor:t.editor,isReversed:t.isReversed,contentRange:t.contentRange,hasExplicitRange:!1})}var Xm=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let r=this.scopeHandlerFactory.create(this.modifier.scopeType,e.editor.document.languageId);if(r==null)return WD(this.modifierStageFactory,this.modifier,e);let n=Array.from(this.modifier.offset===0?Z7(r,e,this.modifier):Q7(r,e,this.modifier));if(n.length<this.modifier.length)throw new Di;let{isReversed:i}=e;return this.modifier.isEvery?n.flatMap(o=>o.getTargets(i)):Tm(i,n[0],n[n.length-1])}};function Z7(t,e,r){let{editor:n,contentRange:i}=e,{length:o,direction:s}=r,l=vm(t,n,s==="forward"?i.start:i.end,s)?.domain;if(l==null)throw new wt(r.scopeType.type);return Tl(o,t.generateScopes(n,s==="forward"?l.start:l.end,s,{skipAncestorScopes:!0}))}function Q7(t,e,r){let{editor:n,contentRange:i}=e,{length:o,direction:s,offset:l}=r,u=s==="forward"?i.end:i.start,p=i.isEmpty?"disallowed":"disallowedIfStrict";return jM(t.generateScopes(n,u,s,{containment:p,skipAncestorScopes:!0}),l-1,l+o-1)}var Jm=class{constructor(e,r){this.languageDefinitions=e;this.modifier=r}run(e){if(this.modifier.type==="everyScope")throw Error(`Unsupported every scope ${this.modifier.scopeType.type}`);return Y7(this.languageDefinitions,this.modifier,e)}};function Y7(t,e,r){let n=pa(t,r,e.scopeType);if(n==null)throw new Error("Couldn't find containing pair");return[n]}var eh=class{constructor(e){this.modifier=e}run(e){return e.editor.visibleRanges.map(r=>new Ue({editor:e.editor,isReversed:e.isReversed,contentRange:r}))}};var th=class{constructor(e,r,n){this.languageDefinitions=e;this.modifierStageFactory=r;this.modifier=n}run(e){let n=this.modifierStageFactory.create({type:this.modifier.type,scopeType:{type:"nonWhitespaceSequence"}}).run(e),i=pa(this.languageDefinitions,e,{type:"surroundingPair",delimiter:"any",requireStrongContainment:!0});if(i==null)return n;let o=n.flatMap(s=>{let l=s.contentRange.intersection(i.getInterior()[0].contentRange);return l==null||l.isEmpty?[]:[new Sr({editor:e.editor,isReversed:e.isReversed,contentRange:l})]});if(o.length===0)throw new wt(this.modifier.scopeType.type);return o}};var rh=class{constructor(e){this.modifier=e}run(e){if(this.modifier.type==="everyScope")throw new Error(`Every ${this.modifier.type} not yet implemented`);return[new hd({editor:e.editor,isReversed:e.isReversed,contentRange:e.contentRange})]}};var zs=class{constructor(e,r,n){this.languageDefinitions=e;this.storedTargets=r;this.scopeHandlerFactory=n;this.create=this.create.bind(this)}create(e){switch(e.type){case"startOf":return new Gm;case"endOf":return new Km;case"extendThroughStartOf":case"extendThroughEndOf":return new Pm(this,e);case"toRawSelection":return new Qm(e);case"interiorOnly":return new Mm(this,e);case"excludeInterior":return new Am(this,e);case"leading":return new Wm(this,e);case"trailing":return new Hm(this,e);case"visible":return new eh(e);case"containingScope":return new bm(this,this.scopeHandlerFactory,e);case"everyScope":return e.scopeType.type==="instance"?new Ws(this,this.storedTargets,e):new wm(this,this.scopeHandlerFactory,e);case"ordinalScope":return e.scopeType.type==="instance"?new Ws(this,this.storedTargets,e):new qm(this,e);case"relativeScope":return e.scopeType.type==="instance"?new Ws(this,this.storedTargets,e):new Xm(this,this.scopeHandlerFactory,e);case"keepContentFilter":return new _m(e);case"keepEmptyFilter":return new Em(e);case"cascading":return new xm(this,e);case"modifyIfUntyped":return new Ls(this,e);case"range":return new Zm(this,e);case"inferPreviousMark":throw Error(`Unexpected modifier '${e.type}'; it should have been removed during inference`)}}getLegacyScopeStage(e){switch(e.scopeType.type){case"notebookCell":return new rh(e);case"boundedNonWhitespaceSequence":return new th(this.languageDefinitions,this,e);case"collectionItem":return new Bm(this.languageDefinitions,e);case"surroundingPair":return new Jm(this.languageDefinitions,e);default:return new js(this.languageDefinitions,e)}}};async function HD(t,e,r){let n=t.registerReplaceEditList(e.document,r.filter(o=>o.isReplace)),i=await e.edit(r);return n(),i}async function Be({rangeUpdater:t,editor:e,selections:r,preserveCursorSelections:n,...i}){let o=bi(r),s=o.map(p=>{let d=r[p],m=X7(d);return $D(e.document,m.selections,m.behavior)});n||s.push($D(e.document,e.selections,1));let l=await("edits"in i?tZ(t,e,i.edits,s):jD(t,i.callback,e.document,s));return n||await e.setSelections(l.pop()),Object.fromEntries(o.map((p,d)=>[p,l[d]]))}function $D(t,e,r){return e.map(n=>J7(t,n,n instanceof ge?!n.isReversed:!0,r))}function X7(t){return"selections"in t?t:{selections:t,behavior:1}}function J7(t,e,r,n){return{range:e,isForward:r,expansionBehavior:{start:{type:n===1||n===3?"closed":"open"},end:{type:n===1||n===2?"closed":"open"}},offsets:{start:t.offsetAt(e.start),end:t.offsetAt(e.end)},text:t.getText(e)}}function eZ(t){return t.map(e=>e.map(({range:{start:r,end:n},isForward:i})=>i?new ge(r,n):new ge(n,r)))}async function jD(t,e,r,n){let i=t.registerRangeInfoList(r,tt(n));return await e(),i(),eZ(n)}async function tZ(t,e,r,n){return await jD(t,async()=>{if(!await HD(t,e,r))throw new Error("Could not apply edits")},e.document,n)}function wr(t){if(t.length===0)throw new Error("Require at least one target with this action");let e=t.map(r=>r.editor);if(new Set(e).size>1)throw new Error("Can only have one editor with this action");return e[0]}function _r(t){if(t.length!==1)throw new Error("Can only have one target with this action");return t[0]}async function da(t,e,r){return Promise.all(av(t,e).map(([n,i])=>r(n,i)))}async function at(t,e){return da(t,r=>r.editor,e)}async function qD(t,e){let r=av(t,i=>i.editor),n=[];for(let[i,o]of r)n.push(await e(i,o));return n}function zD(t){return av(t,e=>e.editor)}function av(t,e){let n=nl(t,i=>e(i).document.uri);return Array.from(n.values(),i=>[e(i[0]),i])}function nh(t){return t.contentRange}function fn(t,e){return e!=null?xt(t,e).map(([n,i])=>({editor:n.editor,selection:n?.isReversed?new ge(i.end,i.start):new ge(i.start,i.end)})):t.map(n=>({editor:n.editor,selection:n.contentSelection}))}function GD(t){let e=t.contentRange;return t.isLine?an(e):er(e)}function je(t,e,r,n=nh){return t.flashRanges(e.map(i=>{let o=n(i);return o==null?null:{editor:i.editor,range:i.isLine?an(o):er(o),style:r}}).filter(i=>i!=null))}var ih=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e){return await je(F(),e,"pendingModification0"),{thatSelections:tt(await at(e,async(n,i)=>{let o=i.map(({contentRange:p})=>p),s=rZ(n,o),l=F().getEditableTextEditor(n),{contentRanges:u}=await Be({rangeUpdater:this.rangeUpdater,editor:l,edits:s,selections:{contentRanges:o}});return xt(i,u).map(([p,d])=>({editor:p.editor,selection:d.toSelection(p.isReversed)}))}))}}};function rZ(t,e){let{document:r}=t,n=[];for(let i of e){let o=i.start,s=r.lineAt(o),l=s.text.slice(0,s.firstNonWhitespaceCharacterIndex),u=s.text.slice(0,o.character).search(/\s+$/),p=u>-1?new H(new se(s.lineNumber,u),o):o.toEmptyRange();n.push({range:p,text:`
`+l,isReplace:!p.isEmpty})}return n}function oh(t){return t.length<2?t:zD(t).flatMap(([e,r])=>{if(r.length<2)return r;let n=[...r];n.sort((o,s)=>o.contentRange.start.compareTo(s.contentRange.start));let i=!0;for(;i;)[n,i]=nZ(n);return n})}function nZ(t){if(t.length<2)return[t,!1];let e=[],r=[];return t.forEach(n=>{r.length&&!iZ(r[r.length-1],n)?(e.push(KD(r)),r=[n]):r.push(n)}),e.push(KD(r)),[e,e.length!==t.length]}function KD(t){if(t.length===1)return t[0];let e=t[0],r=t[t.length-1];return fo(e,r)}function iZ(t,e){return!!t.getRemovalRange().intersection(e.getRemovalRange())}var Al=class{constructor(e,r){this.rangeUpdater=e;this.type=r}async decorateTargets(e,r){await Promise.all([je(F(),e,this.decoration.sourceStyle,this.decoration.getSourceRangeCallback),je(F(),r,this.decoration.destinationStyle)])}getEditsBringMove(e,r){let n=[],i=[],o=e.length!==r.length&&r.length===1;return e.forEach((s,l)=>{let u=r[l];if((s==null||u==null)&&!o)throw new Error("Targets must have same number of args");if(u!=null){let p;o?p=e.map((d,m)=>{let g=d.contentText,x=(u.isRaw?null:u.insertionDelimiter)??(d.isRaw?null:d.insertionDelimiter);return m>0&&x!=null?x+g:g}).join(""):p=s.contentText,i.push({edit:u.constructChangeEdit(p),editor:u.editor,originalTarget:u.target,isSource:!1})}else u=r[0];n.includes(s)||(n.push(s),this.type==="bring"&&i.push({edit:s.toDestination("to").constructChangeEdit(u.target.contentText),editor:s.editor,originalTarget:s,isSource:!0}))}),this.type==="move"&&oh(n).forEach(s=>{i.push({edit:s.constructRemovalEdit(),editor:s.editor,originalTarget:s,isSource:!0})}),i}async performEditsAndComputeThatMark(e){return tt(await da(e,r=>r.editor,async(r,n)=>{let i=this.type!=="bring"?n:n.filter(({isSource:x})=>!x),o=this.type==="swap"?[]:n.filter(({isSource:x})=>x),s=this.type==="swap"?n:n.filter(({isSource:x})=>!x),l=o.map(({edit:x})=>x.range),u=s.map(({edit:x})=>x.range),p=F().getEditableTextEditor(r),{sourceEditRanges:d,destinationEditRanges:m}=await Be({rangeUpdater:this.rangeUpdater,editor:p,edits:i.map(({edit:x})=>x),selections:{sourceEditRanges:l,destinationEditRanges:{selections:u,behavior:0}}}),g=[...this.getMarks(o,d),...this.getMarks(s,m)];return g.sort((x,v)=>n.findIndex(b=>b.originalTarget===x.target)-n.findIndex(b=>b.originalTarget===v.target)),g}))}getMarks(e,r){return e.map((n,i)=>{let o=r[i],s=n.edit.updateRange(o),l=n.originalTarget;return{editor:n.editor,selection:s.toSelection(l.isReversed),isSource:n.isSource,target:l}})}async decorateThatMark(e){let r=n=>e.find(i=>i.target===n).selection;return Promise.all([je(F(),e.filter(({isSource:n})=>n).map(({target:n})=>n),this.decoration.sourceStyle,r),je(F(),e.filter(({isSource:n})=>!n).map(({target:n})=>n),this.decoration.destinationStyle,r)])}calculateMarksBringMove(e){return{thatMark:e.filter(({isSource:r})=>!r),sourceMark:e.filter(({isSource:r})=>r)}}};function ZD(t,e){return t.length===1?Array(e.length).fill(t[0]):t}var ah=class extends Al{constructor(r){super(r,"bring");this.decoration={sourceStyle:"referenced",destinationStyle:"pendingModification0",getSourceRangeCallback:nh};this.run=this.run.bind(this)}async run(r,n){r=ZD(r,n),await this.decorateTargets(r,n.map(u=>u.target));let i=this.getEditsBringMove(r,n),o=await this.performEditsAndComputeThatMark(i),{thatMark:s,sourceMark:l}=this.calculateMarksBringMove(o);return await this.decorateThatMark(s),{thatSelections:s,sourceSelections:l}}},sh=class extends Al{constructor(r){super(r,"move");this.decoration={sourceStyle:"pendingDelete",destinationStyle:"pendingModification0",getSourceRangeCallback:oZ};this.run=this.run.bind(this)}async run(r,n){r=ZD(r,n),await this.decorateTargets(r,n.map(u=>u.target));let i=this.getEditsBringMove(r,n),o=await this.performEditsAndComputeThatMark(i),{thatMark:s,sourceMark:l}=this.calculateMarksBringMove(o);return await this.decorateThatMark(s),{thatSelections:s,sourceSelections:l}}},ch=class extends Al{constructor(r){super(r,"swap");this.decoration={sourceStyle:"pendingModification1",destinationStyle:"pendingModification0",getSourceRangeCallback:nh};this.run=this.run.bind(this)}async run(r,n){await this.decorateTargets(r,n);let i=this.getEditsSwap(r,n),o=await this.performEditsAndComputeThatMark(i);return await this.decorateThatMark(o),{thatSelections:o,sourceSelections:[]}}getEditsSwap(r,n){let i=[];return r.forEach((o,s)=>{let l=n[s];if(o==null||l==null)throw new Error("Targets must have same number of args");i.push({edit:l.toDestination("to").constructChangeEdit(o.contentText),editor:l.editor,originalTarget:l,isSource:!1}),i.push({edit:o.toDestination("to").constructChangeEdit(l.contentText),editor:o.editor,originalTarget:o,isSource:!0})}),i}};function oZ(t){return t.getRemovalHighlightRange()}var Dl=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e,r){_r(e);let{returnValue:n}=await this.actions.getText.run(e,{showDecorations:!1}),{thatSelections:i}=await this.actions.wrapWithPairedDelimiter.run(r,n[0]+"(",")");return{thatSelections:i}}};var Il=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){let r=wr(e),n=e.map(o=>new Ue({editor:o.editor,isReversed:o.isReversed,contentRange:o.contentRange})),{thatTargets:i}=await this.actions.remove.run(n);return i!=null&&await F().getEditableTextEditor(r).setSelections(i.map(({contentSelection:o})=>o),{focusEditor:!0}),{thatTargets:i}}};var lh=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){await F().flashRanges(e.flatMap(i=>{let{editor:o,contentRange:s}=i,l=i.getRemovalHighlightRange();return i.isLine?[{editor:o,range:er(s),style:"referenced"},{editor:o,range:an(l),style:"pendingDelete"}]:[{editor:o,range:er(s),style:"referenced"},...aZ(s,l).map(u=>({editor:o,range:er(u),style:"pendingDelete"}))]}));let r={showDecorations:!1};await this.actions.copyToClipboard.run(e,r);let{thatTargets:n}=await this.actions.remove.run(e,r);return{thatTargets:n}}};function aZ(t,e){let{start:r,end:n}=t,{start:i,end:o}=e,s=[];return i.isBefore(r)&&s.push(new H(i,r)),o.isAfter(n)&&s.push(new H(n,o)),s}var Fl=class{constructor(){this.run=this.run.bind(this)}async run(e){return await at(e,async(r,n)=>{let i=r.selections.filter(o=>!n.some(s=>{let l=s.contentRange.intersection(o);return l&&(!l.isEmpty||o.isEmpty)}));if(i.length===0)throw new sv;await F().getEditableTextEditor(r).setSelections(i)}),{thatTargets:e}}},sv=class extends Error{constructor(){super("Can't deselect every selection. At least one is required"),this.name="SelectionRequiredError"}};async function QD(t,e,r,n){let i=r.destinations.map((v,b)=>{if(n||v.getEditNewActionType()==="edit")return{destination:v,index:b}}).filter(v=>!!v);if(i.length===0)return r;let o=i.map(v=>v.destination.constructChangeEdit("")),s=r.cursorRanges.map((v,b)=>({range:v,index:b})).filter(({range:v})=>v!=null),l=s.map(({index:v})=>v),u=s.map(({range:v})=>v),p=o.map(v=>v.range),{thatRanges:d,cursorRanges:m,editRanges:g}=await Be({rangeUpdater:t,editor:e,edits:o,preserveCursorSelections:!0,selections:{thatRanges:r.thatRanges,cursorRanges:u,editRanges:{selections:p,behavior:0}}}),x=[...r.cursorRanges];return xt(l,m).forEach(([v,b])=>{x[v]=b}),i.forEach((v,b)=>{let M=o[b].updateRange(g[b]);x[v.index]=M}),{destinations:r.destinations,thatRanges:d,cursorRanges:x}}async function YD({acceptsLocation:t},e,r,n){let i=n.destinations.map((m,g)=>{if(m.getEditNewActionType()==="insertLineAfter")return{destination:m,index:g}}).filter(m=>!!m);if(i.length===0)return n;let o=i.map(({destination:m})=>m.contentRange),s=n.destinations.map(({contentRange:m})=>m),l=async()=>{t?await r.insertLineAfter(o):(await r.setSelections(o.map(m=>m.toSelection(!1))),await r.focus(),await r.insertLineAfter())},{targetRanges:u,thatRanges:p}=await Be({rangeUpdater:e,editor:r,callback:l,preserveCursorSelections:!0,selections:{targetRanges:s,thatRanges:n.thatRanges}}),d=[...n.cursorRanges];return i.forEach((m,g)=>{d[m.index]=r.selections[g]}),{destinations:n.destinations.map((m,g)=>m.withTarget(m.target.withContentRange(u[g]))),thatRanges:p,cursorRanges:d}}async function XD(t,e){let r=_r(e),n=F().getEditableTextEditor(r.editor),i=r.insertionMode==="before";if(r.insertionMode==="to")throw Error(`Unsupported insertion mode '${r.insertionMode}' for notebookcapell`);await t.setSelection.run([r.target]);let o=l=>l;i?o=await n.editNewNotebookCellAbove():await n.editNewNotebookCellBelow();let s=fn([r.target.thatTarget]);return s[0].selection=o(s[0].selection),{thatSelections:s}}var uh=class{constructor(e,r){this.rangeUpdater=e;this.actions=r;this.run=this.run.bind(this)}async run(e){if(e.some(({target:l})=>l.isNotebookCell))return XD(this.actions,e);let r=F().getEditableTextEditor(wr(e)),n={destinations:e,thatRanges:e.map(({target:l})=>l.thatTarget.contentRange),cursorRanges:new Array(e.length).fill(void 0)},i=F().capabilities.commands.insertLineAfter,o=i!=null;o&&(n=await YD(i,this.rangeUpdater,r,n)),n=await QD(this.rangeUpdater,r,n,!o);let s=n.destinations.map((l,u)=>n.cursorRanges[u].toSelection(l.target.isReversed));return await r.setSelections(s,{focusEditor:!0}),{thatSelections:fn(n.destinations.map(l=>l.target),n.thatRanges)}}};var ph=class{constructor(e,r){this.actions=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(qs)]}run(e){return this.actions.editNew.run(e.map(r=>r.toDestination(this.insertionMode)))}},fh=class extends ph{constructor(){super(...arguments);this.insertionMode="before"}},dh=class extends ph{constructor(){super(...arguments);this.insertionMode="after"}};var mh=t=>new Et({editor:t.editor,isReversed:t.selection.isReversed,contentRange:t.selection,hasExplicitRange:!0});var Gs=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e,r){r.showDecorations&&await je(F(),e,"referenced"),r.ensureSingleEditor&&wr(e),r.ensureSingleTarget&&_r(e);let n=F().activeEditableTextEditor,i=r.setSelection?qD:at,o=tt(await i(e,(s,l)=>this.runForEditor(r,s,l)));return r.setSelection&&r.restoreSelection&&n!=null&&!n.isActive&&await n.focus(),{thatTargets:o}}async runForEditor(e,r,n){let i=F().getEditableTextEditor(r),o=r.selections,s=r.document.version,l=n.map(d=>d.contentSelection);e.setSelection&&await i.setSelections(l,{focusEditor:!0,revealRange:!1});let{originalSelections:u,targetSelections:p}=await Be({rangeUpdater:this.rangeUpdater,editor:i,callback:()=>e.callback(i,n),preserveCursorSelections:!0,selections:{originalSelections:o,targetSelections:l}});return e.setSelection&&e.restoreSelection&&await i.setSelections(u),r.document.version===s?n:p.map(d=>mh({editor:r,selection:d}))}};var Cl=class{constructor(e){this.callbackAction=new Gs(e),this.run=this.run.bind(this)}async run(e,r,{commandArgs:n,ensureSingleEditor:i,ensureSingleTarget:o,restoreSelection:s,showDecorations:l}={}){let u=n??[];return this.callbackAction.run(e,{callback:()=>F().executeCommand(r,...u),setSelection:!0,ensureSingleEditor:i??!1,ensureSingleTarget:o??!1,restoreSelection:s??!0,showDecorations:l??!0})}};var hh=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){_r(e);let{returnValue:r,thatTargets:n}=await this.actions.getText.run(e),[i]=r,o;return i.length>200?(o=i.substring(0,200),qc(F().messages,"truncatedSearchText","Search text is longer than 200 characters; truncating")):o=i,await this.find(o),{thatTargets:n}}},gh=class extends hh{find(e){return F().findInDocument(e)}},yh=class extends hh{find(e){return F().findInWorkspace(e)}};var Ks=class{constructor(e){this.options=e;this.run=this.run.bind(this)}async run(e){let r=_r(e);return await je(F(),e,"referenced"),await F().getEditableTextEditor(r.editor).openLink(r.contentRange,this.options),{thatSelections:fn(e)}}};var Nl=class{constructor(){this.substitutions=[]}addSubstitution(e,r=!1){let n=sZ(10);return this.substitutions.push({to:e,randomId:n,isQuoted:r}),n}makeSubstitutions(e){return this.substitutions.forEach(({to:r,randomId:n,isQuoted:i})=>{let o=i?`"${n}"`:n;e=e.split(o).join(r)}),e}};function sZ(t){let e="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=r.length;for(let i=0;i<t;i++)e+=r.charAt(Math.floor(Math.random()*n));return e}function JD(t,e){let r=[],n=0,i=null,[o,...s]=t.split(/\r?\n/);return[{text:e+o,startIndex:e.length},...s.map(u=>({text:u,startIndex:0}))].forEach(({text:u,startIndex:p})=>{let d=u.match(/^\s*/)?.[0]??"",m=d.length;i!=null&&(d.length>i.length?n++:d.length<i.length&&n--),i=d;let g=Math.max(m,p),x=Xx("	",n),v=u.slice(g);r.push(x+v)}),r}function eI(t,e){let r=eS(e,o=>o.offsets.start),n="",i=0;for(let o of r)n+=t.slice(i,o.offsets.start)+o.text,i=o.offsets.end;return n+=t.slice(i),n}var Zs=class{constructor(e){this.snippets=e;this.run=this.run.bind(this)}async run(e,r){let n=_r(e),i=n.editor;if(je(F(),e,"referenced"),r==null&&(r=await F().showInputBox({prompt:"Name of snippet",placeHolder:"helloWorld"})),r==null)return{};let o=1,s=i.document.offsetAt(n.contentRange.start),l=i.selections.filter(M=>n.contentRange.contains(M)).map((M,U)=>({offsets:{start:i.document.offsetAt(M.start)-s,end:i.document.offsetAt(M.end)-s},defaultName:`variable${U+1}`,placeholderIndex:o++})),u=new Nl,p=i.document.getText(new H(n.contentRange.start.with(void 0,0),n.contentRange.start)),d=i.document.getText(n.contentRange),m=eI(d,[...nn(d,/\$|\\/g,M=>({offsets:{start:M.index,end:M.index+M[0].length},text:M[0]==="\\"?`\\${M[0]}`:`\\\\${M[0]}`})),...l.map(({offsets:M,defaultName:U,placeholderIndex:Q})=>({offsets:M,text:u.addSubstitution(["\\$","${",Q,":",U,"}"].join(""))}))]),g=JD(m,p),x=({placeholderIndex:M})=>{let U="$"+M,Q=u.addSubstitution("{$"+o+++"}",!0);return[U,Q]},v={[r]:{definitions:[{scope:{langIds:[i.document.languageId]},body:g}],description:"$"+o++,variables:l.length===0?void 0:Object.fromEntries(l.map(x))}},b=u.makeSubstitutions(JSON.stringify(v,null,2)),I=F().getEditableTextEditor(i);return F().runMode==="test"?await I.setSelections([i.document.range.toSelection(!1)]):await this.snippets.openNewSnippetFile(r),await I.insertSnippet(b),{thatSelections:e.map(({editor:M,contentSelection:U})=>({editor:M,selection:U}))}}};var Ol=class{constructor(){this.run=this.run.bind(this)}async run(e){return{returnValue:e.map(({contentRange:r})=>({contentRange:r})),thatTargets:e}}};var Ll=class{constructor(){this.run=this.run.bind(this)}async run(e,{showDecorations:r=!0,ensureSingleTarget:n=!1}={}){return r&&await je(F(),e,"referenced"),n&&_r(e),{returnValue:e.map(i=>i.contentText),thatTargets:e}}};var Ul=class{constructor(){this.run=this.run.bind(this)}async run(e,r){if(F().capabilities.commands.highlight==null)throw Error("The highlight action is not supported by your ide");return e.length===0?await Promise.all(F().visibleTextEditors.map(n=>F().setHighlightRanges(r,n,[]))):await at(e,(n,i)=>F().setHighlightRanges(r,n,i.map(GD))),{thatTargets:e}}};var xh=class{constructor(e,r,n){this.rangeUpdater=e;this.modifierStageFactory=r;this.isBefore=n;this.getFinalStages=()=>[this.modifierStageFactory.create(qs)];this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e){let r=tt(await at(e,this.runForEditor));return await F().flashRanges(r.flatMap(n=>n.thatMark.map(i=>({editor:i.editor,range:er(i.selection),style:"justAdded"})))),{sourceSelections:r.flatMap(({sourceMark:n})=>n),thatSelections:r.flatMap(({thatMark:n})=>n)}}async runForEditor(e,r){let n=this.isBefore?"after":"before",i=r.flatMap(g=>g.toDestination(n).constructChangeEdit(g.contentText)),o=r.map(({contentSelection:g})=>g),s=i.map(({range:g})=>g),l=F().getEditableTextEditor(e),{contentSelections:u,editRanges:p}=await Be({rangeUpdater:this.rangeUpdater,editor:l,edits:i,selections:{contentSelections:o,editRanges:{selections:s,behavior:0}}}),d=xt(i,p).map(([g,x])=>g.updateRange(x)),m=e.selections[0];return u.some(g=>g.intersection(m)!=null)&&await l.revealRange(m),{sourceMark:fn(r,d),thatMark:fn(r,u)}}},Sh=class extends xh{constructor(e,r){super(e,r,!0)}},Th=class extends xh{constructor(e,r){super(e,r,!1)}};var Bl=class{constructor(e,r,n){this.rangeUpdater=e;this.insertAbove=r;this.insertBelow=n;this.run=this.run.bind(this)}getRanges(e){let r=e.flatMap(n=>{let i=[];return this.insertAbove&&i.push(n.contentRange.start.line),this.insertBelow&&i.push(n.contentRange.end.line+1),i});return r=[...new Set(r)],r.map(n=>new H(n,0,n,0))}getEdits(e){return e.map(r=>({range:r,text:`
`}))}async run(e){let r=tt(await at(e,async(i,o)=>{let s=this.getRanges(o),l=this.getEdits(s),u=o.map(g=>g.thatTarget.contentSelection),p=F().getEditableTextEditor(i),{contentSelections:d,ranges:m}=await Be({rangeUpdater:this.rangeUpdater,editor:p,edits:l,selections:{contentSelections:u,ranges:s}});return{thatMark:d.map(g=>({editor:i,selection:g})),lineSelections:m.map((g,x)=>({editor:i,range:s[x].start.line<i.document.lineCount-1?new H(g.start.translate(-1,void 0),g.end.translate(-1,void 0)):g}))}}));return await F().flashRanges(r.flatMap(i=>i.lineSelections.map(({editor:o,range:s})=>({editor:o,range:an(s),style:"justAdded"})))),{thatSelections:r.flatMap(i=>i.thatMark)}}},vh=class extends Bl{constructor(e){super(e,!0,!0)}},bh=class extends Bl{constructor(e){super(e,!0,!1)}},wh=class extends Bl{constructor(e){super(e,!1,!0)}};var cv=class t{constructor(){this.value="";this.pos=0}static{this._table={36:0,58:1,44:2,123:3,125:4,92:5,47:6,124:7,43:11,45:12,63:13}}static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return e===95||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};let e=this.pos,r=0,n=this.value.charCodeAt(e),i;if(i=t._table[n],typeof i=="number")return this.pos+=1,{type:i,pos:e,len:1};if(t.isDigitCharacter(n)){i=8;do r+=1,n=this.value.charCodeAt(e+r);while(t.isDigitCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}if(t.isVariableCharacter(n)){i=9;do n=this.value.charCodeAt(e+ ++r);while(t.isVariableCharacter(n)||t.isDigitCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}i=10;do r+=1,n=this.value.charCodeAt(e+r);while(!isNaN(n)&&typeof t._table[n]>"u"&&!t.isDigitCharacter(n)&&!t.isVariableCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}},mo=class{constructor(){this._children=[]}appendChild(e){return e instanceof Er&&this._children[this._children.length-1]instanceof Er?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,r){let{parent:n}=e,i=n.children.indexOf(e),o=n.children.slice(0);o.splice(i,1,...r),n._children=o,function s(l,u){for(let p of l)p.parent=u,s(p.children,p)}(r,n)}get children(){return this._children}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof Rh)return e;e=e.parent}}toString(){return this.children.reduce((e,r)=>e+r.toString(),"")}len(){return 0}},Er=class t extends mo{constructor(r){super();this.value=r}static escape(r){return r.replace(/\$|}|\\/g,"\\$&")}toString(){return this.value}toTextmateString(){return t.escape(this.value)}len(){return this.value.length}clone(){return new t(this.value)}},_h=class extends mo{},Wr=class t extends _h{constructor(r){super();this.index=r}static compareByIndex(r,n){return r.index===n.index?0:r.isFinalTabstop?1:n.isFinalTabstop||r.index<n.index?-1:r.index>n.index?1:0}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof Eh?this._children[0]:void 0}toTextmateString(){let r="";return this.transform&&(r=this.transform.toTextmateString()),this.children.length===0&&!this.transform?`$${this.index}`:this.children.length===0?`\${${this.index}${r}}`:this.choice?`\${${this.index}|${this.choice.toTextmateString()}|${r}}`:`\${${this.index}:${this.children.map(n=>n.toTextmateString()).join("")}${r}}`}clone(){let r=new t(this.index);return this.transform&&(r.transform=this.transform.clone()),r._children=this.children.map(n=>n.clone()),r}},Eh=class t extends mo{constructor(){super(...arguments);this.options=[]}appendChild(r){return r instanceof Er&&(r.parent=this,this.options.push(r)),this}toString(){return this.options[0].value}toTextmateString(){return this.options.map(r=>r.value.replace(/\||,|\\/g,"\\$&")).join(",")}len(){return this.options[0].len()}clone(){let r=new t;return this.options.forEach(r.appendChild,r),r}},lv=class t extends mo{constructor(){super(...arguments);this.regexp=new RegExp("")}resolve(r){let n=this,i=!1,o=r.replace(this.regexp,function(){return i=!0,n._replace(Array.prototype.slice.call(arguments,0,-2))});return!i&&this._children.some(s=>s instanceof In&&!!s.elseValue)&&(o=this._replace([])),o}_replace(r){let n="";for(let i of this._children)if(i instanceof In){let o=r[i.index]||"";o=i.resolve(o),n+=o}else n+=i.toString();return n}toString(){return""}toTextmateString(){return`/${this.regexp.source}/${this.children.map(r=>r.toTextmateString())}/${(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")}`}clone(){let r=new t;return r.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),r._children=this.children.map(n=>n.clone()),r}},In=class t extends mo{constructor(r,n,i,o){super();this.index=r;this.shorthandName=n;this.ifValue=i;this.elseValue=o}resolve(r){return this.shorthandName==="upcase"?r?r.toLocaleUpperCase():"":this.shorthandName==="downcase"?r?r.toLocaleLowerCase():"":this.shorthandName==="capitalize"?r?r[0].toLocaleUpperCase()+r.substr(1):"":this.shorthandName==="pascalcase"?r?this._toPascalCase(r):"":this.shorthandName==="camelcase"?r?this._toCamelCase(r):"":r&&typeof this.ifValue=="string"?this.ifValue:!r&&typeof this.elseValue=="string"?this.elseValue:r||""}_toPascalCase(r){let n=r.match(/[a-z0-9]+/gi);return n?n.map(i=>i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()).join(""):r}_toCamelCase(r){let n=r.match(/[a-z0-9]+/gi);return n?n.map((i,o)=>o===0?i.toLowerCase():i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()).join(""):r}toTextmateString(){let r="${";return r+=this.index,this.shorthandName?r+=`:/${this.shorthandName}`:this.ifValue&&this.elseValue?r+=`:?${this.ifValue}:${this.elseValue}`:this.ifValue?r+=`:+${this.ifValue}`:this.elseValue&&(r+=`:-${this.elseValue}`),r+="}",r}clone(){return new t(this.index,this.shorthandName,this.ifValue,this.elseValue)}},ho=class t extends _h{constructor(r){super();this.name=r}resolve(r){let n=r.resolve(this);return this.transform&&(n=this.transform.resolve(n||"")),n!==void 0?(this._children=[new Er(n)],!0):!1}toTextmateString(){let r="";return this.transform&&(r=this.transform.toTextmateString()),this.children.length===0?`\${${this.name}${r}}`:`\${${this.name}:${this.children.map(n=>n.toTextmateString()).join("")}${r}}`}clone(){let r=new t(this.name);return this.transform&&(r.transform=this.transform.clone()),r._children=this.children.map(n=>n.clone()),r}};function tI(t,e){let r=[...t];for(;r.length>0;){let n=r.shift();if(!e(n))break;r.unshift(...n.children)}}var Rh=class t extends mo{get placeholderInfo(){if(!this._placeholders){let e=[],r;this.walk(function(n){return n instanceof Wr&&(e.push(n),r=!r||r.index<n.index?n:r),!0}),this._placeholders={all:e,last:r}}return this._placeholders}get placeholders(){let{all:e}=this.placeholderInfo;return e}offset(e){let r=0,n=!1;return this.walk(i=>i===e?(n=!0,!1):(r+=i.len(),!0)),n?r:-1}fullLen(e){let r=0;return tI([e],n=>(r+=n.len(),!0)),r}enclosingPlaceholders(e){let r=[],{parent:n}=e;for(;n;)n instanceof Wr&&r.push(n),n=n.parent;return r}resolveVariables(e){return this.walk(r=>(r instanceof ho&&r.resolve(e)&&(this._placeholders=void 0),!0)),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,r){return this._placeholders=void 0,super.replace(e,r)}toTextmateString(){return this.children.reduce((e,r)=>e+r.toTextmateString(),"")}clone(){let e=new t;return this._children=this.children.map(r=>r.clone()),e}walk(e){tI(this.children,e)}},Qs=class{constructor(){this._scanner=new cv;this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}text(e){return this.parse(e).toString()}parse(e,r,n){this._scanner.text(e),this._token=this._scanner.next();let i=new Rh;for(;this._parse(i););let o=new Map,s=[],l=0;i.walk(u=>(u instanceof Wr&&(l+=1,u.isFinalTabstop?o.set(0,void 0):!o.has(u.index)&&u.children.length>0?o.set(u.index,u.children):s.push(u)),!0));for(let u of s){let p=o.get(u.index);if(p){let d=new Wr(u.index);d.transform=u.transform;for(let m of p)d.appendChild(m.clone());i.replace(u,[d])}}return n||(n=l>0&&r),!o.has(0)&&n&&i.appendChild(new Wr(0)),i}_accept(e,r){if(e===void 0||this._token.type===e){let n=r?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),n}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){let r=this._token;for(;this._token.type!==e;){if(this._token.type===14)return!1;if(this._token.type===5){let i=this._scanner.next();if(i.type!==0&&i.type!==4&&i.type!==5)return!1}this._token=this._scanner.next()}let n=this._scanner.value.substring(r.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),n}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let r;return(r=this._accept(5,!0))?(r=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||r,e.appendChild(new Er(r)),!0):!1}_parseTabstopOrVariableName(e){let r,n=this._token;return this._accept(0)&&(r=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(r)?new Wr(Number(r)):new ho(r)),!0):this._backTo(n)}_parseComplexPlaceholder(e){let r,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(r=this._accept(8,!0))))return this._backTo(n);let o=new Wr(Number(r));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new Er("${"+r+":")),o.children.forEach(e.appendChild,e),!0}else if(o.index>0&&this._accept(7)){let s=new Eh;for(;;){if(this._parseChoiceElement(s)){if(this._accept(2))continue;if(this._accept(7)&&(o.appendChild(s),this._accept(4)))return e.appendChild(o),!0}return this._backTo(n),!1}}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseChoiceElement(e){let r=this._token,n=[];for(;!(this._token.type===2||this._token.type===7);){let i;if((i=this._accept(5,!0))?i=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||i:i=this._accept(void 0,!0),!i)return this._backTo(r),!1;n.push(i)}return n.length===0?(this._backTo(r),!1):(e.appendChild(new Er(n.join(""))),!0)}_parseComplexVariable(e){let r,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(r=this._accept(9,!0))))return this._backTo(n);let o=new ho(r);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new Er("${"+r+":")),o.children.forEach(e.appendChild,e),!0}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseTransform(e){let r=new lv,n="",i="";for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(6,!0)||o,n+=o;continue}if(this._token.type!==14){n+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(5,!0)||this._accept(6,!0)||o,r.appendChild(new Er(o));continue}if(!(this._parseFormatString(r)||this._parseAnything(r)))return!1}for(;!this._accept(4);){if(this._token.type!==14){i+=this._accept(void 0,!0);continue}return!1}try{r.regexp=new RegExp(n,i)}catch{return!1}return e.transform=r,!0}_parseFormatString(e){let r=this._token;if(!this._accept(0))return!1;let n=!1;this._accept(3)&&(n=!0);let i=this._accept(8,!0);if(i)if(n){if(this._accept(4))return e.appendChild(new In(Number(i))),!0;if(!this._accept(1))return this._backTo(r),!1}else return e.appendChild(new In(Number(i))),!0;else return this._backTo(r),!1;if(this._accept(6)){let o=this._accept(9,!0);return!o||!this._accept(4)?(this._backTo(r),!1):(e.appendChild(new In(Number(i),o)),!0)}else if(this._accept(11)){let o=this._until(4);if(o)return e.appendChild(new In(Number(i),void 0,o,void 0)),!0}else if(this._accept(12)){let o=this._until(4);if(o)return e.appendChild(new In(Number(i),void 0,void 0,o)),!0}else if(this._accept(13)){let o=this._until(1);if(o){let s=this._until(4);if(s)return e.appendChild(new In(Number(i),void 0,o,s)),!0}}else{let o=this._until(4);if(o)return e.appendChild(new In(Number(i),void 0,void 0,o)),!0}return this._backTo(r),!1}_parseAnything(e){return this._token.type!==14?(e.appendChild(new Er(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}};var rI=Object.freeze({CURRENT_YEAR:!0,CURRENT_YEAR_SHORT:!0,CURRENT_MONTH:!0,CURRENT_DATE:!0,CURRENT_HOUR:!0,CURRENT_MINUTE:!0,CURRENT_SECOND:!0,CURRENT_DAY_NAME:!0,CURRENT_DAY_NAME_SHORT:!0,CURRENT_MONTH_NAME:!0,CURRENT_MONTH_NAME_SHORT:!0,CURRENT_SECONDS_UNIX:!0,SELECTION:!0,CLIPBOARD:!0,TM_SELECTED_TEXT:!0,TM_CURRENT_LINE:!0,TM_CURRENT_WORD:!0,TM_LINE_INDEX:!0,TM_LINE_NUMBER:!0,TM_FILENAME:!0,TM_FILENAME_BASE:!0,TM_DIRECTORY:!0,TM_FILEPATH:!0,RELATIVE_FILEPATH:!0,BLOCK_COMMENT_START:!0,BLOCK_COMMENT_END:!0,LINE_COMMENT:!0,WORKSPACE_NAME:!0,WORKSPACE_FOLDER:!0,RANDOM:!0,RANDOM_HEX:!0,UUID:!0});function kh(t,e,r){let n=cZ(t)+1,i={};t.walk(o=>{if(o instanceof ho){if(o.name===e)o.name="TM_SELECTED_TEXT";else if(r!=null&&Object.prototype.hasOwnProperty.call(r,o.name))o.parent.replace(o,[new Er(r[o.name])]);else if(!rI[o.name]){let s;o.name in i?s=i[o.name]:(s=n++,i[o.name]=s);let l=new Wr(s);o.children.forEach(u=>l.appendChild(u)),o.parent.replace(o,[l])}}else o instanceof Wr&&o.index.toString()===e&&o.parent.replace(o,[new ho("TM_SELECTED_TEXT")]);return!0})}function cZ(t){let e=0;return t.walk(r=>(r instanceof Wr&&(e=Math.max(e,r.index)),!0)),e}function Ph(t,e,r){let n=e.map(o=>lZ(t,o,r)),i=n[0];if(!n.every(o=>o===i))throw new Error("Multiple snippet definitions match the given context");if(i===-1)throw new Error("Couldn't find matching snippet definition");return r[i]}function lZ(t,e,r){let n=e.editor.document.languageId;return r.findIndex(({scope:i})=>{if(i==null)return!0;let{langIds:o,scopeTypes:s,excludeDescendantScopeTypes:l}=i;if(o!=null&&!o.includes(n))return!1;if(s!=null){let u=s.concat(l??[]),p,d;for(let m of u)try{let g=t.create({type:"containingScope",scopeType:{type:m}}).run(e)[0];e.contentRange.isRangeEqual(g.contentRange)&&(g=t.create({type:"containingScope",scopeType:{type:m},ancestorIndex:1}).run(e)[0]),(p==null||p.contentRange.contains(g.contentRange))&&(p=g,d=m)}catch{continue}return p!=null&&!(l??[]).includes(d)}return!0})}var Vl=class{constructor(e,r,n,i){this.rangeUpdater=e;this.snippets=r;this.actions=n;this.modifierStageFactory=i;this.snippetParser=new Qs;this.run=this.run.bind(this)}getFinalStages(e){let r=this.getScopeTypes(e);return r.length===0?[]:[new Sm(this.modifierStageFactory,{type:"cascading",modifiers:r.map(n=>({type:"containingScope",scopeType:n}))})]}getScopeTypes(e){if(e.type==="named"){let{name:r}=e,i=this.snippets.getSnippetStrict(r).insertionScopeTypes;return i==null?[]:i.map(o=>({type:o}))}else return e.scopeTypes??[]}getSnippetInfo(e,r){if(e.type==="named"){let{name:n}=e,i=this.snippets.getSnippetStrict(n),o=Ph(this.modifierStageFactory,r,i.definitions);return{body:o.body.join(`
`),formatSubstitutions(s){return s==null?void 0:uZ(i,o,s)}}}else return{body:e.body,formatSubstitutions(n){return n}}}async run(e,r){let n=F().getEditableTextEditor(wr(e));await this.actions.editNew.run(e);let{body:i,formatSubstitutions:o}=this.getSnippetInfo(r,n.selections.map(p=>new Et({editor:n,contentRange:p,isReversed:!1,hasExplicitRange:!0}))),s=this.snippetParser.parse(i);kh(s,null,o(r.substitutions));let l=s.toTextmateString(),{editorSelections:u}=await Be({rangeUpdater:this.rangeUpdater,editor:n,callback:()=>n.insertSnippet(l),preserveCursorSelections:!0,selections:{editorSelections:{selections:n.selections,behavior:0}}});return{thatSelections:u.map(p=>({editor:n,selection:p}))}}};function uZ(t,e,r){return Object.fromEntries(Object.entries(r).map(([n,i])=>{let o=(e.variables??{})[n]?.formatter??(t.variables??{})[n]?.formatter;if(o==null)return[n,i];let s=Zk[o];if(s==null)throw new Error(`Couldn't find formatter ${o} for variable ${n}`);return[n,s(i.split(" "))]}))}var Wl=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e){return await je(F(),e,"pendingModification0"),{thatSelections:tt(await at(e,async(n,i)=>{let o=i.map(({contentRange:l})=>l),{contentRanges:s}=await Be({rangeUpdater:this.rangeUpdater,editor:F().getEditableTextEditor(n),edits:pZ(n,o),selections:{contentRanges:o}});return xt(i,s).map(([l,u])=>({editor:l.editor,selection:u.toSelection(l.isReversed)}))}))}}};function pZ(t,e){let{document:r}=t,n=[];for(let i of e){let o=i.start.line,s=i.isSingleLine?o+1:i.end.line,l=ws(qM(o,s+1),u=>r.lineAt(u));for(let[u,p]of HM(l))n.push({range:new H(u.range.end.line,u.lastNonWhitespaceCharacterIndex,p.range.start.line,p.firstNonWhitespaceCharacterIndex),text:p.isEmptyOrWhitespace?"":" ",isReplace:!0})}return n}var Mh=class{constructor(e,r){this.rangeUpdater=e;this.actions=r}async run(e){let r=F().getEditableTextEditor(wr(e)),n=F().activeEditableTextEditor,i=async()=>{await this.actions.editNew.run(e)},{cursorSelections:o}=await Be({rangeUpdater:this.rangeUpdater,editor:r,preserveCursorSelections:!0,callback:i,selections:{cursorSelections:r.selections}}),{originalCursorSelections:s,editorSelections:l}=await Be({rangeUpdater:this.rangeUpdater,editor:r,callback:()=>r.clipboardPaste(),selections:{originalCursorSelections:o,editorSelections:{selections:r.selections,behavior:0}}});return await r.setSelections(s),n!=null&&!n.isActive&&await n.focus(),await F().flashRanges(l.map(u=>({editor:r,range:er(u),style:"justAdded"}))),{thatSelections:l.map(u=>({editor:r,selection:u}))}}};var Hl=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e,{showDecorations:r=!0}={}){return e=oh(e),r&&await je(F(),e,"pendingDelete",i=>i.getRemovalHighlightRange()),{thatTargets:tt(await at(e,this.runForEditor))}}async runForEditor(e,r){let n=r.map(s=>s.constructRemovalEdit()),i=F().getEditableTextEditor(e),{editRanges:o}=await Be({rangeUpdater:this.rangeUpdater,editor:i,edits:n,selections:{editRanges:n.map(({range:s})=>s)}});return xt(r,o).map(([s,l])=>new io({editor:s.editor,isReversed:s.isReversed,contentRange:l}))}};var $l=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}getTexts(e,r){if(Array.isArray(r))return r.length===1?Array(e.length).fill(r[0]):r;let n=[];for(let i=0;i<e.length;++i)n[i]=(r.start+i).toString();return n}async run(e,r){await je(F(),e.map(l=>l.target),"pendingModification0");let n=this.getTexts(e,r);if(e.length!==n.length)throw new Error("Targets and texts must have same length");let i=xt(e,n).map(([l,u])=>({editor:l.editor,target:l.target,edit:l.constructChangeEdit(u)})),o=[],s=[];return await da(i,l=>l.editor,async(l,u)=>{let p=u.map(({edit:g})=>g),{contentSelections:d,editRanges:m}=await Be({rangeUpdater:this.rangeUpdater,editor:F().getEditableTextEditor(l),edits:p,selections:{contentSelections:u.map(({target:g})=>g.contentSelection),editRanges:{selections:p.map(({range:g})=>g),behavior:0}}});for(let[g,x]of xt(u,d))o.push(g.target.withContentRange(x));for(let[g,x]of xt(u,m))s.push({editor:l,selection:g.edit.updateRange(x).toSelection(!1)})}),{sourceTargets:o,thatSelections:s}}};var jl=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.getFinalStages=()=>[GT(this.modifierStageFactory)];this.run=this.run.bind(this)}async run(e,r,n){let i=e.flatMap(s=>{let l=s.getBoundary();if(l.length!==2)throw Error("Target must have an opening and closing delimiter");return l});await je(F(),i,"pendingModification0");let o=await at(i,async(s,l)=>{let u=l.map((m,g)=>({editor:s,range:m.contentRange,text:g%2===0?r:n})),{sourceRanges:p,thatRanges:d}=await Be({rangeUpdater:this.rangeUpdater,editor:F().getEditableTextEditor(s),edits:u,selections:{sourceRanges:e.map(m=>m.thatTarget.contentRange),thatRanges:e.map(m=>m.contentRange)}});return{sourceMark:fn(e,p),thatMark:fn(e,d)}});return{sourceSelections:o.flatMap(({sourceMark:s})=>s),thatSelections:o.flatMap(({thatMark:s})=>s)}}};var ql=class{constructor(e){this.at=e;this.run=this.run.bind(this)}async run(e){let r=nl(e,s=>s.editor),n=Array.from(r,([s,l])=>({lineNumber:fZ(l,this.at),editor:s})),i=F().activeEditableTextEditor;for(let s of n)await F().getEditableTextEditor(s.editor).revealLine(s.lineNumber,this.at);i!=null&&!i.isActive&&await i.focus();let o=e.filter(s=>{let l=s.editor.visibleRanges,u=l[0].start.line,p=l[l.length-1].end.line;return s.contentRange.start.line>u||s.contentRange.end.line<p||s.contentRange.start.line===u&&s.contentRange.end.line===p});return await F().flashRanges(o.map(s=>({editor:s.editor,range:an(s.contentRange),style:"referenced"}))),{thatTargets:e}}},Ah=class extends ql{constructor(){super("top")}},Dh=class extends ql{constructor(){super("center")}},Ih=class extends ql{constructor(){super("bottom")}};function fZ(t,e){let r=Number.MAX_SAFE_INTEGER,n=0;return t.forEach(i=>{r=Math.min(r,i.contentRange.start.line),n=Math.max(n,i.contentRange.end.line)}),e==="top"?r:e==="bottom"?n:Math.floor((r+n)/2)}var Ys=class{constructor(){this.run=this.run.bind(this)}getSelection(e){return e.contentSelection}async run(e){let r=wr(e),n=e.map(this.getSelection);return await F().getEditableTextEditor(r).setSelections(n,{focusEditor:!0}),{thatTargets:e}}},Fh=class extends Ys{getSelection(e){return new ge(e.contentRange.start,e.contentRange.start)}},Ch=class extends Ys{getSelection(e){return new ge(e.contentRange.end,e.contentRange.end)}};var zl=class{constructor(e){this.key=e;this.noAutomaticTokenExpansion=!0;this.run=this.run.bind(this)}async run(e){return{thatTargets:e,[`${this.key}Targets`]:e}}};var Gl=class{constructor(e){this.treeSitter=e;this.run=this.run.bind(this)}async run(e){await je(F(),e,"referenced");let r=["# Cursorless parse tree"];for(let n of e){let{editor:i,contentRange:o}=n,s=this.treeSitter.getTree(i.document);r.push(dZ(i.document,s,o))}return F().openUntitledTextDocument({language:"markdown",content:r.join(`

`)}),{thatTargets:e}}};function dZ(t,e,r){let n=[],i=[];return nI(n,i,r,e.walk(),0),[`## ${t.filename} [${r}]
`,`\`\`\`${t.languageId}`,t.getText(r),"```","","```scm",...i,"```","","```js",...n,"```",""].join(`
`)}function nI(t,e,r,n,i){for(;;){let o=new H(n.startPosition.row,n.startPosition.column,n.endPosition.row,n.endPosition.column);if(r.intersection(o)!=null){let s="  ".repeat(i),l=mZ(n),u=s+l;if(n.nodeIsNamed)t.push(`${u}${n.nodeType} [${o}]`),e.push(`${u}(${n.nodeType}`),n.gotoFirstChild()?(nI(t,e,r,n,i+1),n.gotoParent(),e.push(`${s})`)):e[e.length-1]+=")";else{let p=`"${n.nodeType}"`;t.push(`${u}${p} [${o}]`),e.push(`${u}${p}`)}}if(!n.gotoNextSibling())return}}function mZ(t){let e=t.currentFieldName;return e!=null?`${e}: `:""}var jt=class{constructor(e){this.ensureSingleEditor=!1;this.ensureSingleTarget=!1;this.restoreSelection=!0;this.showDecorations=!0;this.callbackAction=new Gs(e),this.run=this.run.bind(this)}async run(e,{showDecorations:r}={}){let n=F().capabilities.commands[this.command];if(n==null)throw Error(`Action ${this.command} is not supported by your ide`);let{acceptsLocation:i}=n;return this.callbackAction.run(e,{callback:(o,s)=>hZ(o,i?s.map(l=>l.contentRange):void 0,this.command),setSelection:!i,ensureSingleEditor:this.ensureSingleEditor,ensureSingleTarget:this.ensureSingleTarget,restoreSelection:this.restoreSelection,showDecorations:r??this.showDecorations})}},Nh=class extends jt{constructor(){super(...arguments);this.command="clipboardCopy";this.ensureSingleEditor=!0}},Oh=class extends jt{constructor(){super(...arguments);this.command="toggleLineComment"}},Lh=class extends jt{constructor(){super(...arguments);this.command="indentLine"}},Uh=class extends jt{constructor(){super(...arguments);this.command="outdentLine"}},Bh=class extends jt{constructor(){super(...arguments);this.command="fold"}},Vh=class extends jt{constructor(){super(...arguments);this.command="unfold"}},Wh=class extends jt{constructor(){super(...arguments);this.command="rename";this.ensureSingleTarget=!0}},Hh=class extends jt{constructor(){super(...arguments);this.command="showReferences";this.ensureSingleTarget=!0}},$h=class extends jt{constructor(){super(...arguments);this.command="quickFix";this.ensureSingleTarget=!0}},jh=class extends jt{constructor(){super(...arguments);this.command="revealDefinition";this.ensureSingleTarget=!0;this.restoreSelection=!1}},qh=class extends jt{constructor(){super(...arguments);this.command="revealTypeDefinition";this.ensureSingleTarget=!0;this.restoreSelection=!1}},zh=class extends jt{constructor(){super(...arguments);this.command="showHover";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Gh=class extends jt{constructor(){super(...arguments);this.command="showDebugHover";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Kh=class extends jt{constructor(){super(...arguments);this.command="extractVariable";this.ensureSingleTarget=!0;this.restoreSelection=!1}};function hZ(t,e,r){switch(r){case"toggleLineComment":return t.toggleLineComment(e);case"indentLine":return t.indentLine(e);case"outdentLine":return t.outdentLine(e);case"clipboardCopy":return t.clipboardCopy(e);case"fold":return t.fold(e);case"unfold":return t.unfold(e);case"insertLineAfter":return t.insertLineAfter(e);case"rename":return t.rename(e?.[0]);case"showReferences":return t.showReferences(e?.[0]);case"quickFix":return t.quickFix(e?.[0]);case"revealDefinition":return t.revealDefinition(e?.[0]);case"revealTypeDefinition":return t.revealTypeDefinition(e?.[0]);case"showHover":return t.showHover(e?.[0]);case"showDebugHover":return t.showDebugHover(e?.[0]);case"extractVariable":return t.extractVariable(e?.[0]);case"highlight":throw Error("Highlight command not supported as simple action")}}var Kl=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){e.length<2&&qc(F().messages,"tooFewTargets",'This action works on multiple targets, e.g. "sort every line block" instead of "sort block".');let r=e.slice().sort((s,l)=>s.contentRange.start.compareTo(l.contentRange.start)),{returnValue:n}=await this.actions.getText.run(r,{showDecorations:!1}),i=this.sortTexts(n),{thatSelections:o}=await this.actions.replace.run(r.map(s=>s.toDestination("to")),i);return{thatSelections:o}}},Zh=class extends Kl{sortTexts(e){return e.sort((r,n)=>r.localeCompare(n,void 0,{numeric:!0,caseFirst:"upper"}))}},Qh=class extends Kl{sortTexts(e){return e.reverse()}},Yh=class extends Kl{sortTexts(e){return Jx(e)}};var Zl=class{constructor(e){this.modifierStageFactory=e;this.getFinalStages=()=>[this.modifierStageFactory.create(qs)];this.run=this.run.bind(this)}async run(e){let r=e.map(({thatTarget:n})=>n);return await je(F(),r,"referenced"),await at(e,async(n,i)=>{let o=i.map(s=>{let l=s.contentRange;return s.isLine?{type:"line",startLine:l.start.line,endLine:l.end.line}:{type:"inline",range:l}});await F().getEditableTextEditor(n).toggleBreakpoint(o)}),{thatTargets:e}}};var Ql=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e,r,n){let i=await at(e,async(o,s)=>{let l=s.map(b=>({start:new ge(b.contentRange.start,b.contentRange.start),end:new ge(b.contentRange.end,b.contentRange.end)})),u=l.flatMap(({start:b,end:I})=>[{text:r,range:b},{text:n,range:I,isReplace:!0}]),p=s.map(b=>b.contentSelection),{boundariesStartSelections:d,boundariesEndSelections:m,sourceSelections:g,thatSelections:x}=await Be({rangeUpdater:this.rangeUpdater,editor:F().getEditableTextEditor(o),edits:u,selections:{boundariesStartSelections:{selections:l.map(({start:b})=>b),behavior:2},boundariesEndSelections:{selections:l.map(({end:b})=>b),behavior:3},sourceSelections:{selections:p,behavior:1},thatSelections:{selections:p,behavior:0}}}),v=[...d,...m];return await F().flashRanges(v.map(b=>({editor:o,range:er(b),style:"justAdded"}))),{sourceMark:g.map(b=>({editor:o,selection:b})),thatMark:x.map(b=>({editor:o,selection:b}))}});return{sourceSelections:i.flatMap(({sourceMark:o})=>o),thatSelections:i.flatMap(({thatMark:o})=>o)}}};var Yl=class{constructor(e,r,n){this.rangeUpdater=e;this.snippets=r;this.modifierStageFactory=n;this.snippetParser=new Qs;this.run=this.run.bind(this)}getFinalStages(e){let r=this.getScopeType(e);return r==null?[]:[new Ls(this.modifierStageFactory,{type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:r}})]}getScopeType(e){if(e.type==="named"){let{name:r,variableName:n}=e,s=(this.snippets.getSnippetStrict(r).variables??{})[n]?.wrapperScopeType;return s==null?void 0:{type:s}}else return e.scopeType}getBody(e,r){if(e.type==="named"){let{name:n}=e,i=this.snippets.getSnippetStrict(n);return Ph(this.modifierStageFactory,r,i.definitions).body.join(`
`)}else return e.body}async run(e,r){let n=F().getEditableTextEditor(wr(e)),i=this.getBody(r,e),o=this.snippetParser.parse(i);kh(o,r.variableName);let s=o.toTextmateString();await je(F(),e,"pendingModification0");let l=e.map(d=>d.contentSelection),u=()=>n.insertSnippet(s,l),{targetSelections:p}=await Be({rangeUpdater:this.rangeUpdater,editor:n,callback:u,preserveCursorSelections:!0,selections:{targetSelections:l}});return{thatSelections:p.map(d=>({editor:n,selection:d}))}}};var gZ=/-?\d+(\.\d+)?/g,Xh=class{constructor(e,r){this.actions=e;this.isIncrement=r;this.run=this.run.bind(this)}async run(e){let r=[];return await da(e,n=>n.editor,async(n,i)=>{let o=await this.runOnEditor(n,i);r.push(...o)}),{thatSelections:r}}async runOnEditor(e,r){let{document:n}=e,i=[],o=[];for(let l of r){let u=n.offsetAt(l.contentRange.start),p=l.contentText,d=jc(p,gZ);for(let m of d)i.push(yZ(e,u,m)),o.push(xZ(this.isIncrement,m.text))}let{thatSelections:s}=await this.actions.replace.run(i,o);return s}},Jh=class extends Xh{constructor(e){super(e,!0)}},eg=class extends Xh{constructor(e){super(e,!1)}};function yZ(t,e,r){return new Ue({editor:t,isReversed:!1,contentRange:new H(t.document.positionAt(e+r.index),t.document.positionAt(e+r.index+r.text.length))}).toDestination("to")}function xZ(t,e){return e.includes(".")?TZ(t,e).toString():SZ(t,e).toString()}function SZ(t,e){let r=parseInt(e),n=1;return r+(t?n:-n)}function TZ(t,e){let r=parseFloat(e),i=Math.abs(r)<=1?.1:1,o=r+(t?i:-i);return parseFloat(o.toPrecision(15))/1}var tg=class{constructor(e,r,n,i){this.treeSitter=e;this.snippets=r;this.rangeUpdater=n;this.modifierStageFactory=i;this.callAsFunction=new Dl(this);this.clearAndSetSelection=new Il(this);this.copyToClipboard=new Nh(this.rangeUpdater);this.cutToClipboard=new lh(this);this.decrement=new eg(this);this.deselect=new Fl;this.editNew=new uh(this.rangeUpdater,this);this.editNewLineAfter=new dh(this,this.modifierStageFactory);this.editNewLineBefore=new fh(this,this.modifierStageFactory);this.executeCommand=new Cl(this.rangeUpdater);this.extractVariable=new Kh(this.rangeUpdater);this.findInDocument=new gh(this);this.findInWorkspace=new yh(this);this.foldRegion=new Bh(this.rangeUpdater);this.followLink=new Ks({openAside:!1});this.followLinkAside=new Ks({openAside:!0});this.generateSnippet=new Zs(this.snippets);this.getText=new Ll;this.highlight=new Ul;this.increment=new Jh(this);this.indentLine=new Lh(this.rangeUpdater);this.insertCopyAfter=new Th(this.rangeUpdater,this.modifierStageFactory);this.insertCopyBefore=new Sh(this.rangeUpdater,this.modifierStageFactory);this.insertEmptyLineAfter=new wh(this.rangeUpdater);this.insertEmptyLineBefore=new bh(this.rangeUpdater);this.insertEmptyLinesAround=new vh(this.rangeUpdater);this.insertSnippet=new Vl(this.rangeUpdater,this.snippets,this,this.modifierStageFactory);this.joinLines=new Wl(this.rangeUpdater);this.breakLine=new ih(this.rangeUpdater);this.moveToTarget=new sh(this.rangeUpdater);this.outdentLine=new Uh(this.rangeUpdater);this.pasteFromClipboard=new Mh(this.rangeUpdater,this);this.randomizeTargets=new Yh(this);this.remove=new Hl(this.rangeUpdater);this.rename=new Wh(this.rangeUpdater);this.replace=new $l(this.rangeUpdater);this.replaceWithTarget=new ah(this.rangeUpdater);this.revealDefinition=new jh(this.rangeUpdater);this.revealTypeDefinition=new qh(this.rangeUpdater);this.reverseTargets=new Qh(this);this.rewrapWithPairedDelimiter=new jl(this.rangeUpdater,this.modifierStageFactory);this.scrollToBottom=new Ih;this.scrollToCenter=new Dh;this.scrollToTop=new Ah;this["private.setKeyboardTarget"]=new zl("keyboard");this["experimental.setInstanceReference"]=new zl("instanceReference");this.setSelection=new Ys;this.setSelectionAfter=new Ch;this.setSelectionBefore=new Fh;this.showDebugHover=new Gh(this.rangeUpdater);this.showHover=new zh(this.rangeUpdater);this.showQuickFix=new $h(this.rangeUpdater);this.showReferences=new Hh(this.rangeUpdater);this.sortTargets=new Zh(this);this.swapTargets=new ch(this.rangeUpdater);this.toggleLineBreakpoint=new Zl(this.modifierStageFactory);this.toggleLineComment=new Oh(this.rangeUpdater);this.unfoldRegion=new Vh(this.rangeUpdater);this.wrapWithPairedDelimiter=new Ql(this.rangeUpdater);this.wrapWithSnippet=new Yl(this.rangeUpdater,this.snippets,this.modifierStageFactory);this["private.showParseTree"]=new Gl(this.treeSitter);this["private.getTargets"]=new Ol}};async function iI(t,e,r){let n=await t.getFocusedElementType();if(n==null||n==="textEditor")return null;let i=r.action;switch(i.name){case"replace":return rg(i.destination)&&Array.isArray(i.replaceWith)?{action:"insert",modifiers:ng(i.destination),text:i.replaceWith.join(`
`)}:null;case"replaceWithTarget":return rg(i.destination)?{action:"insert",modifiers:ng(i.destination),text:await uv(e,i.source)}:null;case"moveToTarget":if(rg(i.destination)){let o=await uv(e,i.source);return await vZ(e,i.source),{action:"insert",modifiers:ng(i.destination),text:o}}return null;case"callAsFunction":return ig(i.argument)?{action:i.name,modifiers:og(i.argument),callee:await uv(e,i.callee)}:null;case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return ig(i.target)?{action:i.name,modifiers:og(i.target),left:i.left,right:i.right}:null;case"pasteFromClipboard":return rg(i.destination)?{action:i.name,modifiers:ng(i.destination)}:null;case"swapTargets":case"editNew":case"insertSnippet":case"generateSnippet":case"wrapWithSnippet":case"parsed":return null;default:return ig(i.target)?{action:i.name,modifiers:og(i.target)}:null}}function rg(t){return t.type==="implicit"?!0:t.type==="primitive"?t.insertionMode==="to"&&ig(t.target):!1}function ig(t){return t.type==="implicit"?!0:t.type==="primitive"?t.mark==null||t.mark.type==="cursor":!1}function ng(t){return t.type==="primitive"?og(t.target):[]}function og(t){if(t.type==="primitive"){if(t.modifiers!=null&&t.modifiers.length>0)return t.modifiers;if(t.mark?.type==="cursor")return[{type:"containingTokenIfEmpty"}]}return[]}async function uv(t,e){return(await t({name:"getText",target:e})).returnValue.join(`
`)}async function vZ(t,e){await t({name:"remove",target:e})}function oI(t,e){let{anchor:r,rangeType:n,active:i}=t;if(r.type!=="primitive"||n!=="continuous")return t;let o=r.modifiers.map((s,l)=>[s,l]);for(let[s,l]of o.reverse())for(let u of bZ){let p=u.accept(s);if(p.accepted){let[d,m]=[r.modifiers.slice(0,l+1),r.modifiers.slice(l+1)],g={...t,anchor:m.length===0&&e?{type:"implicit"}:{type:"primitive",mark:r.mark,modifiers:m},active:Ff(i,x=>{x.modifiers=x.modifiers.slice(Oo(x.modifiers,v=>u.accept(v).accepted)+1)})};return g=p.transformTarget?.(g)??g,{type:"primitive",mark:{type:"target",target:g},modifiers:d}}}return t}var bZ=[{accept(t){return t.type==="everyScope"&&t.scopeType.type!=="instance"?{accepted:!0,transformTarget(e){return{...e,exclusionScopeType:t.scopeType}}}:{accepted:!1}}},{accept(t){return{accepted:(t.type==="everyScope"||t.type==="relativeScope"||t.type==="ordinalScope")&&t.scopeType.type==="instance"}}}];function fv(t,e){switch(t.type){case"list":return wZ(t,e);case"range":return aI(t,e);case"primitive":return ag(t,e);case"implicit":return t}}function wZ(t,e){return{...t,elements:t.elements.map((r,n)=>{let i=e.concat(t.elements.slice(0,n));switch(r.type){case"range":return aI(r,i);case"primitive":return ag(r,i)}})}}function aI(t,e){let r=_Z(t,e),n=t.anchor.type==="implicit"||t.anchor.mark==null;return oI(r,n)}function _Z(t,e){return{type:"range",rangeType:t.rangeType??"continuous",excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1,anchor:t.anchor.type==="implicit"?t.anchor:ag(t.anchor,e),active:ag(t.active,e.concat(t.anchor))}}function ag(t,e){let r=pv(t.mark??(EZ(t)?PZ(e):null)??{type:"cursor"}),n=sI(t)??MZ(e)??AZ(e)??[];return{type:t.type,mark:r,modifiers:n}}function EZ(t){return t.modifiers?.some(e=>e.type==="inferPreviousMark")??!1}function sI(t){let e=t.modifiers?.filter(r=>r.type!=="inferPreviousMark")??[];return e.length!==0?e:void 0}function RZ(t){if(kZ(t))return[{type:"containingScope",scopeType:{type:"line"}}]}function kZ(t){let e=r=>r?.type==="lineNumber";return e(t.mark)?!0:t.mark?.type==="range"?e(t.mark.anchor)&&e(t.mark.active):!1}function PZ(t){return Xl(t,e=>e.mark)}function MZ(t){return Xl(t,sI)}function AZ(t){return Xl(t,RZ)}function Xl(t,e){for(let r=t.length-1;r>-1;--r){let n=t[r];switch(n.type){case"primitive":{let i=e(n);if(i!=null)return i;break}case"range":{let i=Xl([n.anchor],e);if(i!=null)return i;break}case"list":{let i=Xl(n.elements,e);if(i!=null)return i;break}}}}function pv(t){switch(t.type){case"range":return{...t,anchor:pv(t.anchor),active:pv(t.active)};case"target":return{type:"target",target:fv(t.target,[])};default:return t}}var sg=class{constructor(e,r,n,i,o){this.commandServerApi=e;this.debug=r;this.storedTargets=n;this.pipelineRunner=i;this.actions=o;this.finalStages=[];this.runAction=this.runAction.bind(this),this.inferenceContext=new dv(this.debug)}async run(e){if(Vo(e)){let p=await iI(this.commandServerApi,this.runAction,e);if(p!=null)return{fallback:p}}let{returnValue:r,thatSelections:n,thatTargets:i,sourceSelections:o,sourceTargets:s,instanceReferenceTargets:l,keyboardTargets:u}=await this.runAction(e.action);return this.storedTargets.set("that",cI(i,n)),this.storedTargets.set("source",cI(s,o)),this.storedTargets.set("instanceReference",l),this.storedTargets.set("keyboard",u,{history:!0}),{returnValue:r}}runAction(e){switch(this.inferenceContext.reset(),this.finalStages=[],e.name){case"replaceWithTarget":return this.actions.replaceWithTarget.run(this.getTargets(e.source),this.getDestinations(e.destination));case"moveToTarget":return this.actions.moveToTarget.run(this.getTargets(e.source),this.getDestinations(e.destination));case"swapTargets":return this.actions.swapTargets.run(this.getTargets(e.target1),this.getTargets(e.target2));case"callAsFunction":return this.actions.callAsFunction.run(this.getTargets(e.callee),this.getTargets(e.argument));case"wrapWithPairedDelimiter":return this.actions.wrapWithPairedDelimiter.run(this.getTargets(e.target),e.left,e.right);case"rewrapWithPairedDelimiter":return this.finalStages=this.actions.rewrapWithPairedDelimiter.getFinalStages(),this.actions.rewrapWithPairedDelimiter.run(this.getTargets(e.target),e.left,e.right);case"pasteFromClipboard":return this.actions.pasteFromClipboard.run(this.getDestinations(e.destination));case"executeCommand":return this.actions.executeCommand.run(this.getTargets(e.target),e.commandId,e.options);case"replace":return this.actions.replace.run(this.getDestinations(e.destination),e.replaceWith);case"highlight":return this.actions.highlight.run(this.getTargets(e.target),e.highlightId);case"generateSnippet":return this.actions.generateSnippet.run(this.getTargets(e.target),e.snippetName);case"insertSnippet":return this.finalStages=this.actions.insertSnippet.getFinalStages(e.snippetDescription),this.actions.insertSnippet.run(this.getDestinations(e.destination),e.snippetDescription);case"wrapWithSnippet":return this.finalStages=this.actions.wrapWithSnippet.getFinalStages(e.snippetDescription),this.actions.wrapWithSnippet.run(this.getTargets(e.target),e.snippetDescription);case"editNew":return this.actions.editNew.run(this.getDestinations(e.destination));case"getText":return this.actions.getText.run(this.getTargets(e.target),e.options);case"parsed":return this.runAction(rd(e.content,e.arguments));default:{let r=this.actions[e.name];return this.finalStages=r.getFinalStages?.()??[],this.noAutomaticTokenExpansion=r.noAutomaticTokenExpansion??!1,r.run(this.getTargets(e.target))}}}getTargets(e){let r=this.inferenceContext.run(e);return this.pipelineRunner.run(r,{actionFinalStages:this.finalStages,noAutomaticTokenExpansion:this.noAutomaticTokenExpansion})}getDestinations(e){switch(e.type){case"list":return e.destinations.flatMap(r=>this.getDestinations(r));case"primitive":return this.getTargets(e.target).map(r=>r.toDestination(e.insertionMode));case"implicit":return this.getTargets({type:"implicit"}).map(r=>r.toDestination("to"))}}},dv=class{constructor(e){this.debug=e;this.previousTargets=[]}run(e){let r=fv(e,this.previousTargets);return this.debug.active&&(this.debug.log("Full target:"),this.debug.log(JSON.stringify(r,null,2))),this.previousTargets.push(e),r}reset(){this.previousTargets=[]}};function cI(t,e){if(t!=null&&e!=null)throw Error("Actions may only return full targets or selections for that mark");return e!=null?e.map(mh):t}var cg=class{constructor(e,r){this.readableHatMap=e;this.mark=r}run(){let e=this.readableHatMap.getToken(this.mark.symbolColor,this.mark.character);if(e==null)throw new Error(`Couldn't find mark ${this.mark.symbolColor} '${this.mark.character}'`);return[new Et({editor:e.editor,contentRange:e.range,isReversed:!1,hasExplicitRange:!1})]}};var lg=class{constructor(e){this.mark=e}run(){let{editorId:e,range:{start:r,end:n}}=this.mark,i=F().visibleTextEditors.find(s=>s.id===e);if(i==null)throw new Error(`Couldn't find editor '${e}'`);let o=new H(r.line,r.character,n.line,n.character);return[new Et({editor:i,contentRange:o,isReversed:!1,hasExplicitRange:!1})]}};var ug=class{constructor(e){this.mark=e}run(){let e=F().activeTextEditor;if(e==null)return[];let r=DZ(e,this.mark.lineNumberType,this.mark.lineNumber),n=e.document.lineAt(r).range;return[hT(e,!1,n)]}},DZ=(t,e,r)=>{switch(e){case"absolute":return r;case"relative":return t.selections[0].active.line+r;case"modulo100":{let i=t.visibleRanges[0].start.line,o=t.visibleRanges[t.visibleRanges.length-1].end.line,s=Math.floor(i/100)*100,l=[],u=[],p=s+r;for(;p<=o;)p>=i&&(t.visibleRanges.find(m=>p>=m.start.line&&p<=m.end.line)?l.push(p):u.push(p)),p+=100;if(l.length===1)return l[0];if(l.length+u.length>1)throw new Error("Multiple lines matching");if(u.length===1)return u[0];throw new Error("Line is not in viewport")}}};var pg=class{constructor(e){this.mark=e}run(){return[]}};var fg=class{constructor(e,r){this.markStageFactory=e;this.mark=r}run(){let e=this.markStageFactory.create(this.mark.anchor),r=this.markStageFactory.create(this.mark.active),n=e.run(),i=r.run();if(n.length!==1||i.length!==1)throw new Error("Expected single anchor and active target");return[fo(n[0],i[0],this.mark.excludeAnchor,this.mark.excludeActive)]}};var dg=class{constructor(e,r){this.storedTargets=e;this.key=r}run(){let e=this.storedTargets.get(this.key);if(e==null||e.length===0)throw Error(`No available ${this.key} marks`);return e}};var mg=class{constructor(e,r){this.targetPipelineRunner=e;this.mark=r}run(){return this.targetPipelineRunner.run(this.mark.target)}};var hg=class{constructor(e,r){this.readableHatMap=e;this.storedTargets=r;this.create=this.create.bind(this)}setPipelineRunner(e){this.targetPipelineRunner=e}create(e){switch(e.type){case"cursor":return new Ss;case"that":case"source":case"keyboard":return new dg(this.storedTargets,e.type);case"decoratedSymbol":return new cg(this.readableHatMap,e);case"lineNumber":return new ug(e);case"range":return new fg(this,e);case"nothing":return new pg(e);case"target":return new mg(this.targetPipelineRunner,e);case"explicit":return new lg(e)}}};async function lI(t,e,r,n,i,o,s,l,u,p){r.active&&(r.log("command:"),r.log(JSON.stringify(p,null,2)));let d=JS(p),m=await n.getReadableMap(d.usePrePhraseSnapshot),g=FZ(t,e,s,r,o,m,i,l);for(let v of u)g=v.wrapCommandRunner(m,g);let x=await g.run(d);return await IZ(p,x)}async function IZ(t,e){if(Vo(t))return e;if("returnValue"in e)return e.returnValue}function FZ(t,e,r,n,i,o,s,l){let u=new zs(r,i,new ks(r)),p=new hg(o,i),d=new km(u,p);return p.setPipelineRunner(d),new sg(e,n,i,d,new tg(t,s,l,u))}var uI=["clojure","csharp","css","latex","markdown","php","ruby","rust","scala","scss"];async function pI(t,e){await CZ(t,e)}async function CZ(t,e){let r=[];for(let n of uI)await t.loadLanguage(n),await e.loadLanguage(n),bi(Ml[n]??{}).map(i=>{e.get(n)?.getScopeHandler({type:i})!=null&&r.push(`Scope '${i}' defined as both legacy and new for language ${n}`)});if(r.length>0)throw Error(r.join(`
`))}function fI(t){return jk(t)?tl(t.type).replace("."," "):t.type==="surroundingPair"?`Matching pair of ${tl(t.delimiter)}`:t.type==="customRegex"?`Regex \`${t.regex}\``:"Unknown scope type"}var gg=class{constructor(e){this.customSpokenFormGenerator=e;this.listeners=[];this.disposable=e.onDidChangeCustomSpokenForms(()=>this.onChange()),this.onDidChangeScopeInfo=this.onDidChangeScopeInfo.bind(this),this.getScopeTypeInfo=this.getScopeTypeInfo.bind(this),this.updateScopeTypeInfos()}onDidChangeScopeInfo(e){return e(this.getScopeTypeInfos()),this.listeners.push(e),{dispose:()=>{Xt(this.listeners,e)}}}async onChange(){this.updateScopeTypeInfos(),this.listeners.forEach(e=>e(this.scopeInfos))}updateScopeTypeInfos(){let e=[...Bo.filter(r=>r!=="instance").map(r=>({type:r})),..._f.map(r=>({type:"surroundingPair",delimiter:r})),...this.customSpokenFormGenerator.getCustomRegexScopeTypes()];this.scopeInfos=e.map(r=>this.getScopeTypeInfo(r))}getScopeTypeInfos(){return this.scopeInfos}getScopeTypeInfo(e){return{scopeType:e,spokenForm:this.customSpokenFormGenerator.scopeTypeToSpokenForm(e),humanReadableName:fI(e),isLanguageSpecific:NZ(e)}}dispose(){this.disposable.dispose()}};function NZ(t){switch(t.type){case"string":case"argumentOrParameter":case"anonymousFunction":case"attribute":case"branch":case"class":case"className":case"collectionItem":case"collectionKey":case"command":case"comment":case"private.fieldAccess":case"functionCall":case"functionCallee":case"functionName":case"ifStatement":case"instance":case"list":case"map":case"name":case"namedFunction":case"regularExpression":case"statement":case"type":case"value":case"condition":case"section":case"sectionLevelOne":case"sectionLevelTwo":case"sectionLevelThree":case"sectionLevelFour":case"sectionLevelFive":case"sectionLevelSix":case"selector":case"private.switchStatementSubject":case"unit":case"xmlBothTags":case"xmlElement":case"xmlEndTag":case"xmlStartTag":case"part":case"chapter":case"subSection":case"subSubSection":case"namedParagraph":case"subParagraph":case"environment":case"textFragment":return!0;case"character":case"word":case"token":case"identifier":case"line":case"sentence":case"paragraph":case"document":case"nonWhitespaceSequence":case"boundedNonWhitespaceSequence":case"url":case"notebookCell":case"surroundingPair":case"customRegex":case"glyph":return!1;case"oneOf":throw Error(`Can't decide whether scope type ${JSON.stringify(t,void 0,3)} is language-specific`)}}function mv(t,e,r){if(!r)return t.document.range;let n=t.visibleRanges.reduce((s,l)=>s.union(l));n=t.document.range.intersection(n.with(n.start.translate(-10),n.end.translate(10)));let i=tf(Array.from(e.generateScopes(t,n.start,"forward",{containment:"required"})))?.domain??n,o=tf(Array.from(e.generateScopes(t,n.end,"forward",{containment:"required"})))?.domain??n;return i.union(o)}function ma(t){return{contentRange:t.contentRange,removalRange:t.getRemovalRange(),removalHighlightRange:t.isLine?an(t.getRemovalHighlightRange()):er(t.getRemovalHighlightRange()),leadingDelimiter:dI(t.getLeadingDelimiterTarget()),trailingDelimiter:dI(t.getTrailingDelimiterTarget()),interior:t.getInterior()?.map(ma),boundary:t.getBoundary()?.map(ma),insertionDelimiter:t.insertionDelimiter}}function dI(t){return t!=null?ma(t):void 0}function mI(t,e,r,n,i){return ws(e.generateScopes(t,n.start,"forward",{includeDescendantScopes:!0,distalPosition:n.end}),o=>({domain:o.domain,ranges:o.getTargets(!1).map(s=>({range:s.contentRange,targets:i?OZ(r,s).map(ma):void 0}))}))}function OZ(t,e){try{return t.run(e)}catch(r){if(r.name==="NoContainingScopeError")return[];throw r}}function hI(t,e,r){return ws(e.generateScopes(t,r.start,"forward",{includeDescendantScopes:!0,distalPosition:r.end}),n=>({domain:n.domain,targets:n.getTargets(!1).map(ma)}))}var yg=class{constructor(e,r){this.scopeHandlerFactory=e;this.modifierStageFactory=r;this.provideScopeRanges=this.provideScopeRanges.bind(this),this.provideIterationScopeRanges=this.provideIterationScopeRanges.bind(this)}provideScopeRanges(e,{scopeType:r,visibleOnly:n}){let i=this.scopeHandlerFactory.create(r,e.document.languageId);return i==null?[]:hI(e,i,mv(e,i,n))}provideIterationScopeRanges(e,{scopeType:r,visibleOnly:n,includeNestedTargets:i}){let{languageId:o}=e.document,s=this.scopeHandlerFactory.create(r,o);if(s==null)return[];let l=this.scopeHandlerFactory.create(s.iterationScopeType,o);return l==null?[]:mI(e,l,this.modifierStageFactory.create({type:"everyScope",scopeType:r}),mv(e,s,n),i)}};var xg=class{constructor(e,r){this.scopeRangeProvider=r;this.disposables=[];this.listeners=[];this.onChange=this.onChange.bind(this),this.onDidChangeScopeRanges=this.onDidChangeScopeRanges.bind(this),this.onDidChangeIterationScopeRanges=this.onDidChangeIterationScopeRanges.bind(this);let n=new Gn(F().configuration,()=>this.onChange());this.disposables.push(F().onDidChangeVisibleTextEditors(n.run),F().onDidOpenTextDocument(n.run),F().onDidCloseTextDocument(n.run),F().onDidChangeTextDocument(n.run),F().onDidChangeTextEditorVisibleRanges(n.run),e.onDidChangeDefinition(this.onChange),n)}onDidChangeScopeRanges(e,r){let n=()=>{F().visibleTextEditors.forEach(i=>{let o;try{o=this.scopeRangeProvider.provideScopeRanges(i,r)}catch(s){if(ut(F().messages,"ScopeRangeWatcher.provide",s.message),o=[],F().runMode==="test")throw s}e(i,o)})};return this.listeners.push(n),n(),{dispose:()=>{Xt(this.listeners,n)}}}onDidChangeIterationScopeRanges(e,r){let n=()=>{F().visibleTextEditors.forEach(i=>{e(i,this.scopeRangeProvider.provideIterationScopeRanges(i,r))})};return this.listeners.push(n),n(),{dispose:()=>{Xt(this.listeners,n)}}}onChange(){this.listeners.forEach(e=>e())}dispose(){this.disposables.forEach(({dispose:e})=>{try{e()}catch{}})}};var Sg=class{constructor(e){this.scopeHandlerFactory=e;this.getScopeSupport=this.getScopeSupport.bind(this),this.getIterationScopeSupport=this.getIterationScopeSupport.bind(this)}getScopeSupport(e,r){let{languageId:n}=e.document,i=this.scopeHandlerFactory.create(r,n);return i==null?yI(n,r):gI(e,i)?0:1}getIterationScopeSupport(e,r){let{languageId:n}=e.document,i=this.scopeHandlerFactory.create(r,n);if(i==null)return yI(n,r);let o=this.scopeHandlerFactory.create(i.iterationScopeType,n);return o==null?3:gI(e,o)?0:1}};function gI(t,e){return!Gk(e.generateScopes(t,new se(0,0),"forward"))}function yI(t,e){switch(e.type){case"boundedNonWhitespaceSequence":case"surroundingPair":return 2;case"notebookCell":return 3;default:return Ml[t]?.[e.type]!=null?2:3}}var Tg=class{constructor(e,r,n){this.scopeSupportChecker=r;this.scopeInfoProvider=n;this.listeners=[];this.onChange=this.onChange.bind(this),this.onDidChangeScopeSupport=this.onDidChangeScopeSupport.bind(this);let i=new Gn(F().configuration,()=>this.onChange());this.disposable=zk(F().onDidOpenTextDocument(i.run),F().onDidCloseTextDocument(i.run),F().onDidChangeActiveTextEditor(i.run),F().onDidChangeTextDocument(i.run),e.onDidChangeDefinition(i.run),this.scopeInfoProvider.onDidChangeScopeInfo(this.onChange),i)}onDidChangeScopeSupport(e){return e(this.getSupportLevels()),this.listeners.push(e),{dispose:()=>{Xt(this.listeners,e)}}}onChange(){if(this.listeners.length===0)return;let e=this.getSupportLevels();this.listeners.forEach(r=>r(e))}getSupportLevels(){let e=F().activeTextEditor,r=e==null?()=>3:o=>this.scopeSupportChecker.getScopeSupport(e,o),n=e==null?()=>3:o=>this.scopeSupportChecker.getIterationScopeSupport(e,o);return this.scopeInfoProvider.getScopeTypeInfos().map(o=>({...o,support:r(o.scopeType),iterationScopeSupport:n(o.scopeType)}))}dispose(){this.disposable.dispose()}};async function xI({ide:t,hats:e,treeSitterQueryProvider:r,treeSitter:n=new Od,commandServerApi:i=new Dd,talonSpokenForms:o=new Nd,snippets:s=new Cd}){sd(t);let l=new _d(t),u=new Ad,p=new ld,d=new wd(t,p),m=new Bd(o),g=e!=null?new Pd(u,l,e,i):new Id;g.allocateHats();let x=r?await ym.create(t,n,r):new Fd;t.disposeOnExit(u,x,g,l,d);let v=[],b,I=M=>(b=M,lI(n,i,l,g,s,p,x,u,v,M));return{commandApi:{runCommand(M){return I(M)},runCommandSafe(...M){return I(Ef(M))},repeatPreviousCommand(){if(b==null)throw new Error("No previous command");return I(b)}},scopeProvider:UZ(x,p,m),customSpokenFormGenerator:m,storedTargets:p,hatTokenMap:g,injectIde:sd,runIntegrationTests:()=>pI(n,x),addCommandRunnerDecorator:M=>{v.push(M)}}}function UZ(t,e,r){let n=new ks(t),i=new yg(n,new zs(t,e,n)),o=new xg(t,i),s=new Sg(n),l=new gg(r),u=new Tg(t,s,l);return{provideScopeRanges:i.provideScopeRanges,provideIterationScopeRanges:i.provideIterationScopeRanges,onDidChangeScopeRanges:o.onDidChangeScopeRanges,onDidChangeIterationScopeRanges:o.onDidChangeIterationScopeRanges,getScopeSupport:s.getScopeSupport,getIterationScopeSupport:s.getIterationScopeSupport,onDidChangeScopeSupport:u.onDidChangeScopeSupport,getScopeInfo:l.getScopeTypeInfo,onDidChangeScopeInfo:l.onDidChangeScopeInfo}}function SI(t,e){switch(e.type){case"UntypedTarget":return new Et({editor:t,isReversed:e.isReversed,contentRange:hf(e.contentRange),hasExplicitRange:e.hasExplicitRange});case"LineTarget":return new Pn({editor:t,isReversed:e.isReversed,contentRange:hf(e.contentRange)});default:throw Error(`Unsupported target type ${e.type}`)}}var R2e=Symbol("unused");var Jl=class{constructor(e){this.position=e}},k2e={$0:new Jl(0),$1:new Jl(1),$2:new Jl(2)};var TI=require("node:events"),vg=class{constructor(){this.apis=new Map,this.commands=new Map,this.eventEmitter=new TI.EventEmitter}registerExtensionApi(e,r){this.apis.set(e,r)}getExtensionApi(e){return this.apis.get(e)}registerCommand(e,r){this.commands.set(e,r)}async executeCommand(e,...r){return await this.commands.get(e)(...r)}onEvent(e,r){return this.eventEmitter.on(e,r)}emitEvent(e,...r){return this.eventEmitter.emit(e,...r)}};function Hr(){return global._neovimRegistry==null&&(global._neovimRegistry=new vg),global._neovimRegistry}var vI="pokey.cursorless";async function bg(t,e){let r='return require("cursorless").buffer_get_selection()',[n,i,o,s,l]=await e.executeLua(r,[]),u;return l===!0?u=[new ge(new se(o-1,s-1),new se(n-1,i-1))]:u=[new ge(new se(n-1,i-1),new se(o-1,s-1))],console.debug(`bufferGetSelections(): selections=(${u[0].start.line}, ${u[0].start.character}), (${u[0].end.line}, ${u[0].end.character}) neovim=(${n},${i}),(${o},${s}),reverse=${l}`),u}async function bI(t,e){if(e.length!==1)throw new Error("bufferSetSelections() only supports one selection");let r=`return require("cursorless").select_range(${e[0].start.line+1}, ${e[0].start.character}, ${e[0].end.line+1}, ${e[0].end.character})`;console.debug(`bufferSetSelections() selections=(${e[0].start.line},${e[0].start.character}),(${e[0].end.line},${e[0].end.character}) luaCode="${r}"`),await t.executeLua(r,[])}async function wI(t,e,r){let n='return require("cursorless").window_get_visible_lines()',[i,o]=await e.executeLua(n,[]),s=new H(new se(i-1,0),new se(o-1,r[o-1].length-1));return console.debug(`windowGetVisibleRanges(): range=(${s.start.line}, ${s.start.character}), (${s.end.line}, ${s.end.character})`),[s]}async function _I(t){return await t.executeLua('return require("cursorless.utils").cursorless_nvim_path()',[])}async function wg(t,e){await e.callFunction("setreg",["*",t])}async function EI(t){return await t.callFunction("getreg",["*"])}async function RI(t){await t.executeLua('return require("cursorless.utils").paste()',[])}async function kI(t){await t.executeLua('return require("cursorless.utils").mode_switch_nt()',[])}async function PI(t){await t.executeLua('return require("cursorless.utils").mode_switch_t()',[])}async function MI(t,e){let r=`vim.notify("${e}")`;await t.executeLua(r,[])}var BZ={clipboardCopy:{acceptsLocation:!1},toggleLineComment:void 0,indentLine:void 0,outdentLine:void 0,rename:void 0,quickFix:void 0,revealDefinition:void 0,revealTypeDefinition:void 0,showHover:void 0,showDebugHover:void 0,extractVariable:void 0,fold:void 0,highlight:{acceptsLocation:!0},unfold:void 0,showReferences:void 0,insertLineAfter:void 0},_g=class{constructor(){this.commands=BZ}};var eu=class{constructor(e){this.client=e}async readText(){return await EI(this.client)}async writeText(e){return await wg(e,this.client)}};var Eg=fr(hv(),1);var ru=class{constructor(){this.notifier=new Wt;this.mocks={...cf};this.scopes=[];this.onDidChangeConfiguration=this.notifier.registerListener;this.onDidChangeConfiguration=this.onDidChangeConfiguration.bind(this)}getOwnConfiguration(e,r){if(r!=null){for(let{scope:n,values:i}of this.scopes)if(VZ(n,r))return(0,Eg.get)(i,e)??(0,Eg.get)(this.mocks,e)}return(0,Eg.get)(this.mocks,e)}mockConfiguration(e,r){this.mocks[e]=r,this.notifier.notifyListeners()}mockConfigurationScope(e,r,n=!1){this.scopes.push({scope:e,values:r}),n||this.notifier.notifyListeners()}};function VZ(t,e){return t.languageId===e.languageId}async function gv(t,e,r,n){console.debug("neovimEdit() [unsorted]:");for(let s of n)console.debug(`	range=${JSON.stringify(s.range)}, text='${s.text}', isReplace=${s.isReplace}`);n.sort((s,l)=>(AI(s)||DI(s))&&(AI(l)||DI(l))?1:s.range.start.line===l.range.start.line?l.range.start.character-s.range.start.character:l.range.start.line-s.range.start.line),console.debug("neovimEdit() [sorted]:");for(let s of n)console.debug(`	range=${JSON.stringify(s.range)}, text='${s.text}', isReplace=${s.isReplace}`);let i=e.getTextDocument(await t.window.buffer),o=[];for(let s of n)o.push({range:s.range,rangeOffset:i.offsetAt(s.range.start),rangeLength:i.offsetAt(s.range.end)-i.offsetAt(s.range.start),text:s.text});Hr().emitEvent("onDidChangeTextDocument",{document:i,contentChanges:o});for(let s of n){let{range:l,text:u,isReplace:p}=s;u===""?await II(t,l):l.isEmpty&&!p?await FI(t,l.start,u):await WZ(t,l,u)}return await e.updateTextEditor(),!0}async function II(t,e){console.debug(`neovimDelete(): range=${JSON.stringify(e)}`);let r=await t.window.buffer,n=(await r.getLines({start:e.end.line,end:e.end.line+1,strictIndexing:!0}))[0],i=n.slice(e.end.character);if(e.start.line===e.end.line){let l=n.slice(0,e.start.character)+i;await r.setLines(l,{start:e.start.line,end:e.start.line+1,strictIndexing:!0});return}if(e.start.character===0){await r.setLines(i,{start:e.start.line,end:e.end.line+1,strictIndexing:!0});return}let o=(await r.getLines({start:e.start.line,end:e.start.line+1,strictIndexing:!0}))[0],s=o.slice(0,e.start.character);if(e.start.character<=o.length){await r.setLines(s+i,{start:e.start.line,end:e.end.line+1,strictIndexing:!0});return}await r.setLines([s,i],{start:e.start.line,end:e.end.line+1,strictIndexing:!0})}async function FI(t,e,r){console.debug(`neovimInsert(): position=${JSON.stringify(e)}, text='${r}'`);let n=r.replace(/(?:\r\n|\r|\n)/g,`
`).split(`
`),i=await t.window.buffer,o=(await i.getLines({start:e.line,end:e.line+1,strictIndexing:!0}))[0],s=o.slice(0,e.character),l=o.slice(e.character);if(n.length===1){let d=s+n[0]+l;await i.setLines(d,{start:e.line,end:e.line+1,strictIndexing:!0});return}let u=s+n[0],p=n[n.length-1]+l;await i.setLines([u,...n.slice(1,n.length-1),p],{start:e.line,end:e.line+1,strictIndexing:!0})}async function WZ(t,e,r){console.debug(`neovimReplace(): range=${JSON.stringify(e)}, text='${r}'`),await II(t,e),await FI(t,e.start,r)}function AI(t){return t.range.isEmpty&&!t.isReplace}function DI(t){return t.text!==""&&!!(!t.range.isEmpty||t.isReplace)}function CI(t){return Hr().onEvent("onDidChangeTextDocument",t),OI()}function NI(t,e,r){return Hr().onEvent("onDidOpenTextDocument",t),OI()}function OI(){return{dispose(){}}}var nu=class{constructor(){this.data={...lf}}get(e){return this.data[e]}set(e,r){return this.data[e]=r,Promise.resolve()}};var BF=fr(hv(),1);var iu=class{async showMessage(e,r,n,...i){}};async function LI(t,e){let r=e.activeTextEditor,n=await t.window,i=await bg(n,t),o=r.document.getText(i[0]);await wg(o,t)}async function UI(t,e){await RI(t)}var Rg=class{constructor(e,r,n,i,o,s,l){this.id=e;this.client=r;this.neovimIDE=n;this.window=i;this._document=o,this._selections=l,this._visibleRanges=s}get document(){return this._document}updateDocument(e,r,n,i){if(n)this._document=n;else if(i)this._document.update(i);else throw Error("updateDocument(): invalid arguments");return this._selections=r,this._visibleRanges=e,this._document}get selections(){return this._selections}async setSelections(e){this._selections=e,await bI(this.client,e)}get visibleRanges(){return this._visibleRanges}get options(){throw Error("get options Not implemented")}set options(e){throw Error("set options Not implemented")}get isActive(){return!0}isEqual(e){return this.id===e.id}async revealRange(e){}revealLine(e,r){throw Error("revealLine Not implemented")}async edit(e){return await gv(this.client,this.neovimIDE,this.window,e)}focus(){return Promise.resolve()}editNewNotebookCellAbove(){throw Error("editNewNotebookCellAbove Not implemented")}editNewNotebookCellBelow(){throw Error("editNewNotebookCellBelow Not implemented")}openLink(e,r){throw Error("openLink Not implemented")}fold(e){throw Error("fold Not implemented")}unfold(e){throw Error("unfold Not implemented")}toggleBreakpoint(e){throw Error("toggleBreakpoint Not implemented")}async toggleLineComment(e){throw Error("toggleLineComment Not implemented")}async clipboardCopy(e){await LI(this.client,this.neovimIDE)}async clipboardPaste(e){await UI(this.client,this.neovimIDE)}async indentLine(e){throw Error("indentLine Not implemented")}async outdentLine(e){throw Error("outdentLine Not implemented")}async insertLineAfter(e){throw Error("insertLineAfter Not implemented")}insertSnippet(e,r){throw Error("insertSnippet Not implemented")}async rename(e){throw Error("rename Not implemented")}async showReferences(e){throw Error("showReferences Not implemented")}async quickFix(e){throw Error("quickFix Not implemented")}async revealDefinition(e){throw Error("revealDefinition Not implemented")}async revealTypeDefinition(e){throw Error("revealTypeDefinition Not implemented")}async showHover(e){throw Error("showHover Not implemented")}async showDebugHover(e){throw Error("showDebugHover Not implemented")}async extractVariable(e){throw Error("extractVariable Not implemented")}};var Lb=fr(require("path"),1);var BI;(()=>{"use strict";var t={470:i=>{function o(u){if(typeof u!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(u))}function s(u,p){for(var d,m="",g=0,x=-1,v=0,b=0;b<=u.length;++b){if(b<u.length)d=u.charCodeAt(b);else{if(d===47)break;d=47}if(d===47){if(!(x===b-1||v===1))if(x!==b-1&&v===2){if(m.length<2||g!==2||m.charCodeAt(m.length-1)!==46||m.charCodeAt(m.length-2)!==46){if(m.length>2){var I=m.lastIndexOf("/");if(I!==m.length-1){I===-1?(m="",g=0):g=(m=m.slice(0,I)).length-1-m.lastIndexOf("/"),x=b,v=0;continue}}else if(m.length===2||m.length===1){m="",g=0,x=b,v=0;continue}}p&&(m.length>0?m+="/..":m="..",g=2)}else m.length>0?m+="/"+u.slice(x+1,b):m=u.slice(x+1,b),g=b-x-1;x=b,v=0}else d===46&&v!==-1?++v:v=-1}return m}var l={resolve:function(){for(var u,p="",d=!1,m=arguments.length-1;m>=-1&&!d;m--){var g;m>=0?g=arguments[m]:(u===void 0&&(u=process.cwd()),g=u),o(g),g.length!==0&&(p=g+"/"+p,d=g.charCodeAt(0)===47)}return p=s(p,!d),d?p.length>0?"/"+p:"/":p.length>0?p:"."},normalize:function(u){if(o(u),u.length===0)return".";var p=u.charCodeAt(0)===47,d=u.charCodeAt(u.length-1)===47;return(u=s(u,!p)).length!==0||p||(u="."),u.length>0&&d&&(u+="/"),p?"/"+u:u},isAbsolute:function(u){return o(u),u.length>0&&u.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var u,p=0;p<arguments.length;++p){var d=arguments[p];o(d),d.length>0&&(u===void 0?u=d:u+="/"+d)}return u===void 0?".":l.normalize(u)},relative:function(u,p){if(o(u),o(p),u===p||(u=l.resolve(u))===(p=l.resolve(p)))return"";for(var d=1;d<u.length&&u.charCodeAt(d)===47;++d);for(var m=u.length,g=m-d,x=1;x<p.length&&p.charCodeAt(x)===47;++x);for(var v=p.length-x,b=g<v?g:v,I=-1,M=0;M<=b;++M){if(M===b){if(v>b){if(p.charCodeAt(x+M)===47)return p.slice(x+M+1);if(M===0)return p.slice(x+M)}else g>b&&(u.charCodeAt(d+M)===47?I=M:M===0&&(I=0));break}var U=u.charCodeAt(d+M);if(U!==p.charCodeAt(x+M))break;U===47&&(I=M)}var Q="";for(M=d+I+1;M<=m;++M)M!==m&&u.charCodeAt(M)!==47||(Q.length===0?Q+="..":Q+="/..");return Q.length>0?Q+p.slice(x+I):(x+=I,p.charCodeAt(x)===47&&++x,p.slice(x))},_makeLong:function(u){return u},dirname:function(u){if(o(u),u.length===0)return".";for(var p=u.charCodeAt(0),d=p===47,m=-1,g=!0,x=u.length-1;x>=1;--x)if((p=u.charCodeAt(x))===47){if(!g){m=x;break}}else g=!1;return m===-1?d?"/":".":d&&m===1?"//":u.slice(0,m)},basename:function(u,p){if(p!==void 0&&typeof p!="string")throw new TypeError('"ext" argument must be a string');o(u);var d,m=0,g=-1,x=!0;if(p!==void 0&&p.length>0&&p.length<=u.length){if(p.length===u.length&&p===u)return"";var v=p.length-1,b=-1;for(d=u.length-1;d>=0;--d){var I=u.charCodeAt(d);if(I===47){if(!x){m=d+1;break}}else b===-1&&(x=!1,b=d+1),v>=0&&(I===p.charCodeAt(v)?--v==-1&&(g=d):(v=-1,g=b))}return m===g?g=b:g===-1&&(g=u.length),u.slice(m,g)}for(d=u.length-1;d>=0;--d)if(u.charCodeAt(d)===47){if(!x){m=d+1;break}}else g===-1&&(x=!1,g=d+1);return g===-1?"":u.slice(m,g)},extname:function(u){o(u);for(var p=-1,d=0,m=-1,g=!0,x=0,v=u.length-1;v>=0;--v){var b=u.charCodeAt(v);if(b!==47)m===-1&&(g=!1,m=v+1),b===46?p===-1?p=v:x!==1&&(x=1):p!==-1&&(x=-1);else if(!g){d=v+1;break}}return p===-1||m===-1||x===0||x===1&&p===m-1&&p===d+1?"":u.slice(p,m)},format:function(u){if(u===null||typeof u!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof u);return function(p,d){var m=d.dir||d.root,g=d.base||(d.name||"")+(d.ext||"");return m?m===d.root?m+g:m+"/"+g:g}(0,u)},parse:function(u){o(u);var p={root:"",dir:"",base:"",ext:"",name:""};if(u.length===0)return p;var d,m=u.charCodeAt(0),g=m===47;g?(p.root="/",d=1):d=0;for(var x=-1,v=0,b=-1,I=!0,M=u.length-1,U=0;M>=d;--M)if((m=u.charCodeAt(M))!==47)b===-1&&(I=!1,b=M+1),m===46?x===-1?x=M:U!==1&&(U=1):x!==-1&&(U=-1);else if(!I){v=M+1;break}return x===-1||b===-1||U===0||U===1&&x===b-1&&x===v+1?b!==-1&&(p.base=p.name=v===0&&g?u.slice(1,b):u.slice(v,b)):(v===0&&g?(p.name=u.slice(1,x),p.base=u.slice(1,b)):(p.name=u.slice(v,x),p.base=u.slice(v,b)),p.ext=u.slice(x,b)),v>0?p.dir=u.slice(0,v-1):g&&(p.dir="/"),p},sep:"/",delimiter:":",win32:null,posix:null};l.posix=l,i.exports=l}},e={};function r(i){var o=e[i];if(o!==void 0)return o.exports;var s=e[i]={exports:{}};return t[i](s,s.exports,r),s.exports}r.d=(i,o)=>{for(var s in o)r.o(o,s)&&!r.o(i,s)&&Object.defineProperty(i,s,{enumerable:!0,get:o[s]})},r.o=(i,o)=>Object.prototype.hasOwnProperty.call(i,o),r.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})};var n={};(()=>{let i;r.r(n),r.d(n,{URI:()=>g,Utils:()=>O}),typeof process=="object"?i=process.platform==="win32":typeof navigator=="object"&&(i=navigator.userAgent.indexOf("Windows")>=0);let o=/^\w[\w\d+.-]*$/,s=/^\//,l=/^\/\//;function u(N,D){if(!N.scheme&&D)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${N.authority}", path: "${N.path}", query: "${N.query}", fragment: "${N.fragment}"}`);if(N.scheme&&!o.test(N.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(N.path){if(N.authority){if(!s.test(N.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(l.test(N.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}let p="",d="/",m=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class g{static isUri(D){return D instanceof g||!!D&&typeof D.authority=="string"&&typeof D.fragment=="string"&&typeof D.path=="string"&&typeof D.query=="string"&&typeof D.scheme=="string"&&typeof D.fsPath=="string"&&typeof D.with=="function"&&typeof D.toString=="function"}scheme;authority;path;query;fragment;constructor(D,$,q,K,Z,te=!1){typeof D=="object"?(this.scheme=D.scheme||p,this.authority=D.authority||p,this.path=D.path||p,this.query=D.query||p,this.fragment=D.fragment||p):(this.scheme=function(me,re){return me||re?me:"file"}(D,te),this.authority=$||p,this.path=function(me,re){switch(me){case"https":case"http":case"file":re?re[0]!==d&&(re=d+re):re=d}return re}(this.scheme,q||p),this.query=K||p,this.fragment=Z||p,u(this,te))}get fsPath(){return U(this,!1)}with(D){if(!D)return this;let{scheme:$,authority:q,path:K,query:Z,fragment:te}=D;return $===void 0?$=this.scheme:$===null&&($=p),q===void 0?q=this.authority:q===null&&(q=p),K===void 0?K=this.path:K===null&&(K=p),Z===void 0?Z=this.query:Z===null&&(Z=p),te===void 0?te=this.fragment:te===null&&(te=p),$===this.scheme&&q===this.authority&&K===this.path&&Z===this.query&&te===this.fragment?this:new v($,q,K,Z,te)}static parse(D,$=!1){let q=m.exec(D);return q?new v(q[2]||p,de(q[4]||p),de(q[5]||p),de(q[7]||p),de(q[9]||p),$):new v(p,p,p,p,p)}static file(D){let $=p;if(i&&(D=D.replace(/\\/g,d)),D[0]===d&&D[1]===d){let q=D.indexOf(d,2);q===-1?($=D.substring(2),D=d):($=D.substring(2,q),D=D.substring(q)||d)}return new v("file",$,D,p,p)}static from(D){let $=new v(D.scheme,D.authority,D.path,D.query,D.fragment);return u($,!0),$}toString(D=!1){return Q(this,D)}toJSON(){return this}static revive(D){if(D){if(D instanceof g)return D;{let $=new v(D);return $._formatted=D.external,$._fsPath=D._sep===x?D.fsPath:null,$}}return D}}let x=i?1:void 0;class v extends g{_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=U(this,!1)),this._fsPath}toString(D=!1){return D?Q(this,!0):(this._formatted||(this._formatted=Q(this,!1)),this._formatted)}toJSON(){let D={$mid:1};return this._fsPath&&(D.fsPath=this._fsPath,D._sep=x),this._formatted&&(D.external=this._formatted),this.path&&(D.path=this.path),this.scheme&&(D.scheme=this.scheme),this.authority&&(D.authority=this.authority),this.query&&(D.query=this.query),this.fragment&&(D.fragment=this.fragment),D}}let b={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function I(N,D,$){let q,K=-1;for(let Z=0;Z<N.length;Z++){let te=N.charCodeAt(Z);if(te>=97&&te<=122||te>=65&&te<=90||te>=48&&te<=57||te===45||te===46||te===95||te===126||D&&te===47||$&&te===91||$&&te===93||$&&te===58)K!==-1&&(q+=encodeURIComponent(N.substring(K,Z)),K=-1),q!==void 0&&(q+=N.charAt(Z));else{q===void 0&&(q=N.substr(0,Z));let me=b[te];me!==void 0?(K!==-1&&(q+=encodeURIComponent(N.substring(K,Z)),K=-1),q+=me):K===-1&&(K=Z)}}return K!==-1&&(q+=encodeURIComponent(N.substring(K))),q!==void 0?q:N}function M(N){let D;for(let $=0;$<N.length;$++){let q=N.charCodeAt($);q===35||q===63?(D===void 0&&(D=N.substr(0,$)),D+=b[q]):D!==void 0&&(D+=N[$])}return D!==void 0?D:N}function U(N,D){let $;return $=N.authority&&N.path.length>1&&N.scheme==="file"?`//${N.authority}${N.path}`:N.path.charCodeAt(0)===47&&(N.path.charCodeAt(1)>=65&&N.path.charCodeAt(1)<=90||N.path.charCodeAt(1)>=97&&N.path.charCodeAt(1)<=122)&&N.path.charCodeAt(2)===58?D?N.path.substr(1):N.path[1].toLowerCase()+N.path.substr(2):N.path,i&&($=$.replace(/\//g,"\\")),$}function Q(N,D){let $=D?M:I,q="",{scheme:K,authority:Z,path:te,query:me,fragment:re}=N;if(K&&(q+=K,q+=":"),(Z||K==="file")&&(q+=d,q+=d),Z){let ke=Z.indexOf("@");if(ke!==-1){let ar=Z.substr(0,ke);Z=Z.substr(ke+1),ke=ar.lastIndexOf(":"),ke===-1?q+=$(ar,!1,!1):(q+=$(ar.substr(0,ke),!1,!1),q+=":",q+=$(ar.substr(ke+1),!1,!0)),q+="@"}Z=Z.toLowerCase(),ke=Z.lastIndexOf(":"),ke===-1?q+=$(Z,!1,!0):(q+=$(Z.substr(0,ke),!1,!0),q+=Z.substr(ke))}if(te){if(te.length>=3&&te.charCodeAt(0)===47&&te.charCodeAt(2)===58){let ke=te.charCodeAt(1);ke>=65&&ke<=90&&(te=`/${String.fromCharCode(ke+32)}:${te.substr(3)}`)}else if(te.length>=2&&te.charCodeAt(1)===58){let ke=te.charCodeAt(0);ke>=65&&ke<=90&&(te=`${String.fromCharCode(ke+32)}:${te.substr(2)}`)}q+=$(te,!0,!1)}return me&&(q+="?",q+=$(me,!1,!1)),re&&(q+="#",q+=D?re:I(re,!1,!1)),q}function ne(N){try{return decodeURIComponent(N)}catch{return N.length>3?N.substr(0,3)+ne(N.substr(3)):N}}let he=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function de(N){return N.match(he)?N.replace(he,D=>ne(D)):N}var dt=r(470);let Dt=dt.posix||dt,nt="/";var O;(function(N){N.joinPath=function(D,...$){return D.with({path:Dt.join(D.path,...$)})},N.resolvePath=function(D,...$){let q=D.path,K=!1;q[0]!==nt&&(q=nt+q,K=!0);let Z=Dt.resolve(q,...$);return K&&Z[0]===nt&&!D.authority&&(Z=Z.substring(1)),D.with({path:Z})},N.dirname=function(D){if(D.path.length===0||D.path===nt)return D;let $=Dt.dirname(D.path);return $.length===1&&$.charCodeAt(0)===46&&($=""),D.with({path:$})},N.basename=function(D){return Dt.basename(D.path)},N.extname=function(D){return Dt.extname(D.path)}})(O||(O={}))})(),BI=n})();var{URI:VI,Utils:NBe}=BI;var s1=fr(JI(),1);var au=t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>65536)throw new TypeError("pattern is too long")};var ZZ={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},su=t=>t.replace(/[[\]\\-]/g,"\\$&"),QZ=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),e1=t=>t.join(""),t1=(t,e)=>{let r=e;if(t.charAt(r)!=="[")throw new Error("not in a brace expression");let n=[],i=[],o=r+1,s=!1,l=!1,u=!1,p=!1,d=r,m="";e:for(;o<t.length;){let b=t.charAt(o);if((b==="!"||b==="^")&&o===r+1){p=!0,o++;continue}if(b==="]"&&s&&!u){d=o+1;break}if(s=!0,b==="\\"&&!u){u=!0,o++;continue}if(b==="["&&!u){for(let[I,[M,U,Q]]of Object.entries(ZZ))if(t.startsWith(I,o)){if(m)return["$.",!1,t.length-r,!0];o+=I.length,Q?i.push(M):n.push(M),l=l||U;continue e}}if(u=!1,m){b>m?n.push(su(m)+"-"+su(b)):b===m&&n.push(su(b)),m="",o++;continue}if(t.startsWith("-]",o+1)){n.push(su(b+"-")),o+=2;continue}if(t.startsWith("-",o+1)){m=b,o+=2;continue}n.push(su(b)),o++}if(d<o)return["",!1,0,!1];if(!n.length&&!i.length)return["$.",!1,t.length-r,!0];if(i.length===0&&n.length===1&&/^\\?.$/.test(n[0])&&!p){let b=n[0].length===2?n[0].slice(-1):n[0];return[QZ(b),!1,d-r,!1]}let g="["+(p?"^":"")+e1(n)+"]",x="["+(p?"":"^")+e1(i)+"]";return[n.length&&i.length?"("+g+"|"+x+")":n.length?g:x,l,d-r,!0]};var Fn=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");var YZ=new Set(["!","?","+","*","@"]),r1=t=>YZ.has(t),XZ="(?!(?:^|/)\\.\\.?(?:$|/))",kg="(?!\\.)",JZ=new Set(["[","."]),eQ=new Set(["..","."]),tQ=new Set("().*{}+?[]^$\\!"),rQ=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Sv="[^/]",n1=Sv+"*?",i1=Sv+"+?",Js=class t{type;#e;#r;#o=!1;#n=[];#a;#T;#l;#p=!1;#c;#s;#i=!1;constructor(e,r,n={}){this.type=e,e&&(this.#r=!0),this.#a=r,this.#e=this.#a?this.#a.#e:this,this.#c=this.#e===this?n:this.#e.#c,this.#l=this.#e===this?[]:this.#e.#l,e==="!"&&!this.#e.#p&&this.#l.push(this),this.#T=this.#a?this.#a.#n.length:0}get hasMagic(){if(this.#r!==void 0)return this.#r;for(let e of this.#n)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#r=!0;return this.#r}toString(){return this.#s!==void 0?this.#s:this.type?this.#s=this.type+"("+this.#n.map(e=>String(e)).join("|")+")":this.#s=this.#n.map(e=>String(e)).join("")}#g(){if(this!==this.#e)throw new Error("should only call on root");if(this.#p)return this;this.toString(),this.#p=!0;let e;for(;e=this.#l.pop();){if(e.type!=="!")continue;let r=e,n=r.#a;for(;n;){for(let i=r.#T+1;!n.type&&i<n.#n.length;i++)for(let o of e.#n){if(typeof o=="string")throw new Error("string part in extglob AST??");o.copyIn(n.#n[i])}r=n,n=r.#a}}return this}push(...e){for(let r of e)if(r!==""){if(typeof r!="string"&&!(r instanceof t&&r.#a===this))throw new Error("invalid part: "+r);this.#n.push(r)}}toJSON(){let e=this.type===null?this.#n.slice().map(r=>typeof r=="string"?r:r.toJSON()):[this.type,...this.#n.map(r=>r.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#p&&this.#a?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#a?.isStart())return!1;if(this.#T===0)return!0;let e=this.#a;for(let r=0;r<this.#T;r++){let n=e.#n[r];if(!(n instanceof t&&n.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#a?.type==="!")return!0;if(!this.#a?.isEnd())return!1;if(!this.type)return this.#a?.isEnd();let e=this.#a?this.#a.#n.length:0;return this.#T===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let r=new t(this.type,e);for(let n of this.#n)r.copyIn(n);return r}static#y(e,r,n,i){let o=!1,s=!1,l=-1,u=!1;if(r.type===null){let x=n,v="";for(;x<e.length;){let b=e.charAt(x++);if(o||b==="\\"){o=!o,v+=b;continue}if(s){x===l+1?(b==="^"||b==="!")&&(u=!0):b==="]"&&!(x===l+2&&u)&&(s=!1),v+=b;continue}else if(b==="["){s=!0,l=x,u=!1,v+=b;continue}if(!i.noext&&r1(b)&&e.charAt(x)==="("){r.push(v),v="";let I=new t(b,r);x=t.#y(e,I,x,i),r.push(I);continue}v+=b}return r.push(v),x}let p=n+1,d=new t(null,r),m=[],g="";for(;p<e.length;){let x=e.charAt(p++);if(o||x==="\\"){o=!o,g+=x;continue}if(s){p===l+1?(x==="^"||x==="!")&&(u=!0):x==="]"&&!(p===l+2&&u)&&(s=!1),g+=x;continue}else if(x==="["){s=!0,l=p,u=!1,g+=x;continue}if(r1(x)&&e.charAt(p)==="("){d.push(g),g="";let v=new t(x,d);d.push(v),p=t.#y(e,v,p,i);continue}if(x==="|"){d.push(g),g="",m.push(d),d=new t(null,r);continue}if(x===")")return g===""&&r.#n.length===0&&(r.#i=!0),d.push(g),g="",r.push(...m,d),p;g+=x}return r.type=null,r.#r=void 0,r.#n=[e.substring(n-1)],p}static fromGlob(e,r={}){let n=new t(null,void 0,r);return t.#y(e,n,0,r),n}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[r,n,i,o]=this.toRegExpSource();if(!(i||this.#r||this.#c.nocase&&!this.#c.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return n;let l=(this.#c.nocase?"i":"")+(o?"u":"");return Object.assign(new RegExp(`^${r}$`,l),{_src:r,_glob:e})}toRegExpSource(e){let r=e??!!this.#c.dot;if(this.#e===this&&this.#g(),!this.type){let u=this.isStart()&&this.isEnd(),p=this.#n.map(x=>{let[v,b,I,M]=typeof x=="string"?t.#f(x,this.#r,u):x.toRegExpSource(e);return this.#r=this.#r||I,this.#o=this.#o||M,v}).join(""),d="";if(this.isStart()&&typeof this.#n[0]=="string"&&!(this.#n.length===1&&eQ.has(this.#n[0]))){let v=JZ,b=r&&v.has(p.charAt(0))||p.startsWith("\\.")&&v.has(p.charAt(2))||p.startsWith("\\.\\.")&&v.has(p.charAt(4)),I=!r&&!e&&v.has(p.charAt(0));d=b?XZ:I?kg:""}let m="";return this.isEnd()&&this.#e.#p&&this.#a?.type==="!"&&(m="(?:$|\\/)"),[d+p+m,Fn(p),this.#r=!!this.#r,this.#o]}let n=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",o=this.#d(r);if(this.isStart()&&this.isEnd()&&!o&&this.type!=="!"){let u=this.toString();return this.#n=[u],this.type=null,this.#r=void 0,[u,Fn(this.toString()),!1,!1]}let s=!n||e||r||!kg?"":this.#d(!0);s===o&&(s=""),s&&(o=`(?:${o})(?:${s})*?`);let l="";if(this.type==="!"&&this.#i)l=(this.isStart()&&!r?kg:"")+i1;else{let u=this.type==="!"?"))"+(this.isStart()&&!r&&!e?kg:"")+n1+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&s?")":this.type==="*"&&s?")?":`)${this.type}`;l=i+o+u}return[l,Fn(o),this.#r=!!this.#r,this.#o]}#d(e){return this.#n.map(r=>{if(typeof r=="string")throw new Error("string type in extglob ast??");let[n,i,o,s]=r.toRegExpSource(e);return this.#o=this.#o||s,n}).filter(r=>!(this.isStart()&&this.isEnd())||!!r).join("|")}static#f(e,r,n=!1){let i=!1,o="",s=!1;for(let l=0;l<e.length;l++){let u=e.charAt(l);if(i){i=!1,o+=(tQ.has(u)?"\\":"")+u;continue}if(u==="\\"){l===e.length-1?o+="\\\\":i=!0;continue}if(u==="["){let[p,d,m,g]=t1(e,l);if(m){o+=p,s=s||d,l+=m-1,r=r||g;continue}}if(u==="*"){n&&e==="*"?o+=i1:o+=n1,r=!0;continue}if(u==="?"){o+=Sv,r=!0;continue}o+=rQ(u)}return[o,Fn(e),!!r,s]}};var ec=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&");var ir=(t,e,r={})=>(au(e),!r.nocomment&&e.charAt(0)==="#"?!1:new $r(e,r).match(t)),nQ=/^\*+([^+@!?\*\[\(]*)$/,iQ=t=>e=>!e.startsWith(".")&&e.endsWith(t),oQ=t=>e=>e.endsWith(t),aQ=t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),sQ=t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),cQ=/^\*+\.\*+$/,lQ=t=>!t.startsWith(".")&&t.includes("."),uQ=t=>t!=="."&&t!==".."&&t.includes("."),pQ=/^\.\*+$/,fQ=t=>t!=="."&&t!==".."&&t.startsWith("."),dQ=/^\*+$/,mQ=t=>t.length!==0&&!t.startsWith("."),hQ=t=>t.length!==0&&t!=="."&&t!=="..",gQ=/^\?+([^+@!?\*\[\(]*)?$/,yQ=([t,e=""])=>{let r=c1([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},xQ=([t,e=""])=>{let r=l1([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},SQ=([t,e=""])=>{let r=l1([t]);return e?n=>r(n)&&n.endsWith(e):r},TQ=([t,e=""])=>{let r=c1([t]);return e?n=>r(n)&&n.endsWith(e):r},c1=([t])=>{let e=t.length;return r=>r.length===e&&!r.startsWith(".")},l1=([t])=>{let e=t.length;return r=>r.length===e&&r!=="."&&r!==".."},u1=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",o1={win32:{sep:"\\"},posix:{sep:"/"}},vQ=u1==="win32"?o1.win32.sep:o1.posix.sep;ir.sep=vQ;var Ot=Symbol("globstar **");ir.GLOBSTAR=Ot;var bQ="[^/]",wQ=bQ+"*?",_Q="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",EQ="(?:(?!(?:\\/|^)\\.).)*?",RQ=(t,e={})=>r=>ir(r,t,e);ir.filter=RQ;var dn=(t,e={})=>Object.assign({},t,e),kQ=t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return ir;let e=ir;return Object.assign((n,i,o={})=>e(n,i,dn(t,o)),{Minimatch:class extends e.Minimatch{constructor(i,o={}){super(i,dn(t,o))}static defaults(i){return e.defaults(dn(t,i)).Minimatch}},AST:class extends e.AST{constructor(i,o,s={}){super(i,o,dn(t,s))}static fromGlob(i,o={}){return e.AST.fromGlob(i,dn(t,o))}},unescape:(n,i={})=>e.unescape(n,dn(t,i)),escape:(n,i={})=>e.escape(n,dn(t,i)),filter:(n,i={})=>e.filter(n,dn(t,i)),defaults:n=>e.defaults(dn(t,n)),makeRe:(n,i={})=>e.makeRe(n,dn(t,i)),braceExpand:(n,i={})=>e.braceExpand(n,dn(t,i)),match:(n,i,o={})=>e.match(n,i,dn(t,o)),sep:e.sep,GLOBSTAR:Ot})};ir.defaults=kQ;var p1=(t,e={})=>(au(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:(0,s1.default)(t));ir.braceExpand=p1;var PQ=(t,e={})=>new $r(t,e).makeRe();ir.makeRe=PQ;var MQ=(t,e,r={})=>{let n=new $r(e,r);return t=t.filter(i=>n.match(i)),n.options.nonull&&!t.length&&t.push(e),t};ir.match=MQ;var a1=/[?*]|[+@!]\(.*?\)|\[|\]/,AQ=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),$r=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,r={}){au(e),r=r||{},this.options=r,this.pattern=e,this.platform=r.platform||u1,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!r.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!r.nonegate,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=r.windowsNoMagicRoot!==void 0?r.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let r of e)if(typeof r!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],r.debug&&(this.debug=(...o)=>console.error(...o)),this.debug(this.pattern,this.globSet);let n=this.globSet.map(o=>this.slashSplit(o));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let i=this.globParts.map((o,s,l)=>{if(this.isWindows&&this.windowsNoMagicRoot){let u=o[0]===""&&o[1]===""&&(o[2]==="?"||!a1.test(o[2]))&&!a1.test(o[3]),p=/^[a-z]:/i.test(o[0]);if(u)return[...o.slice(0,4),...o.slice(4).map(d=>this.parse(d))];if(p)return[o[0],...o.slice(1).map(d=>this.parse(d))]}return o.map(u=>this.parse(u))});if(this.debug(this.pattern,i),this.set=i.filter(o=>o.indexOf(!1)===-1),this.isWindows)for(let o=0;o<this.set.length;o++){let s=this.set[o];s[0]===""&&s[1]===""&&this.globParts[o][2]==="?"&&typeof s[3]=="string"&&/^[a-z]:$/i.test(s[3])&&(s[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let n=0;n<e.length;n++)for(let i=0;i<e[n].length;i++)e[n][i]==="**"&&(e[n][i]="*");let{optimizationLevel:r=1}=this.options;return r>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):r>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(r=>{let n=-1;for(;(n=r.indexOf("**",n+1))!==-1;){let i=n;for(;r[i+1]==="**";)i++;i!==n&&r.splice(n,i-n)}return r})}levelOneOptimize(e){return e.map(r=>(r=r.reduce((n,i)=>{let o=n[n.length-1];return i==="**"&&o==="**"?n:i===".."&&o&&o!==".."&&o!=="."&&o!=="**"?(n.pop(),n):(n.push(i),n)},[]),r.length===0?[""]:r))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let r=!1;do{if(r=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let o=e[i];i===1&&o===""&&e[0]===""||(o==="."||o==="")&&(r=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(r=!0,e.pop())}let n=0;for(;(n=e.indexOf("..",n+1))!==-1;){let i=e[n-1];i&&i!=="."&&i!==".."&&i!=="**"&&(r=!0,e.splice(n-1,2),n-=2)}}while(r);return e.length===0?[""]:e}firstPhasePreProcess(e){let r=!1;do{r=!1;for(let n of e){let i=-1;for(;(i=n.indexOf("**",i+1))!==-1;){let s=i;for(;n[s+1]==="**";)s++;s>i&&n.splice(i+1,s-i);let l=n[i+1],u=n[i+2],p=n[i+3];if(l!==".."||!u||u==="."||u===".."||!p||p==="."||p==="..")continue;r=!0,n.splice(i,1);let d=n.slice(0);d[i]="**",e.push(d),i--}if(!this.preserveMultipleSlashes){for(let s=1;s<n.length-1;s++){let l=n[s];s===1&&l===""&&n[0]===""||(l==="."||l==="")&&(r=!0,n.splice(s,1),s--)}n[0]==="."&&n.length===2&&(n[1]==="."||n[1]==="")&&(r=!0,n.pop())}let o=0;for(;(o=n.indexOf("..",o+1))!==-1;){let s=n[o-1];if(s&&s!=="."&&s!==".."&&s!=="**"){r=!0;let u=o===1&&n[o+1]==="**"?["."]:[];n.splice(o-1,2,...u),n.length===0&&n.push(""),o-=2}}}}while(r);return e}secondPhasePreProcess(e){for(let r=0;r<e.length-1;r++)for(let n=r+1;n<e.length;n++){let i=this.partsMatch(e[r],e[n],!this.preserveMultipleSlashes);i&&(e[r]=i,e[n]=[])}return e.filter(r=>r.length)}partsMatch(e,r,n=!1){let i=0,o=0,s=[],l="";for(;i<e.length&&o<r.length;)if(e[i]===r[o])s.push(l==="b"?r[o]:e[i]),i++,o++;else if(n&&e[i]==="**"&&r[o]===e[i+1])s.push(e[i]),i++;else if(n&&r[o]==="**"&&e[i]===r[o+1])s.push(r[o]),o++;else if(e[i]==="*"&&r[o]&&(this.options.dot||!r[o].startsWith("."))&&r[o]!=="**"){if(l==="b")return!1;l="a",s.push(e[i]),i++,o++}else if(r[o]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(l==="a")return!1;l="b",s.push(r[o]),i++,o++}else return!1;return e.length===r.length&&s}parseNegate(){if(this.nonegate)return;let e=this.pattern,r=!1,n=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)r=!r,n++;n&&(this.pattern=e.slice(n)),this.negate=r}matchOne(e,r,n=!1){let i=this.options;if(this.isWindows){let b=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),I=!b&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),M=typeof r[0]=="string"&&/^[a-z]:$/i.test(r[0]),U=!M&&r[0]===""&&r[1]===""&&r[2]==="?"&&typeof r[3]=="string"&&/^[a-z]:$/i.test(r[3]),Q=I?3:b?0:void 0,ne=U?3:M?0:void 0;if(typeof Q=="number"&&typeof ne=="number"){let[he,de]=[e[Q],r[ne]];he.toLowerCase()===de.toLowerCase()&&(r[ne]=he,ne>Q?r=r.slice(ne):Q>ne&&(e=e.slice(Q)))}}let{optimizationLevel:o=1}=this.options;o>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var s=0,l=0,u=e.length,p=r.length;s<u&&l<p;s++,l++){this.debug("matchOne loop");var d=r[l],m=e[s];if(this.debug(r,d,m),d===!1)return!1;if(d===Ot){this.debug("GLOBSTAR",[r,d,m]);var g=s,x=l+1;if(x===p){for(this.debug("** at the end");s<u;s++)if(e[s]==="."||e[s]===".."||!i.dot&&e[s].charAt(0)===".")return!1;return!0}for(;g<u;){var v=e[g];if(this.debug(`
globstar while`,e,g,r,x,v),this.matchOne(e.slice(g),r.slice(x),n))return this.debug("globstar found match!",g,u,v),!0;if(v==="."||v===".."||!i.dot&&v.charAt(0)==="."){this.debug("dot detected!",e,g,r,x);break}this.debug("globstar swallow a segment, and continue"),g++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,g,r,x),g===u))}let b;if(typeof d=="string"?(b=m===d,this.debug("string match",d,m,b)):(b=d.test(m),this.debug("pattern match",d,m,b)),!b)return!1}if(s===u&&l===p)return!0;if(s===u)return n;if(l===p)return s===u-1&&e[s]==="";throw new Error("wtf?")}braceExpand(){return p1(this.pattern,this.options)}parse(e){au(e);let r=this.options;if(e==="**")return Ot;if(e==="")return"";let n,i=null;(n=e.match(dQ))?i=r.dot?hQ:mQ:(n=e.match(nQ))?i=(r.nocase?r.dot?sQ:aQ:r.dot?oQ:iQ)(n[1]):(n=e.match(gQ))?i=(r.nocase?r.dot?xQ:yQ:r.dot?SQ:TQ)(n):(n=e.match(cQ))?i=r.dot?uQ:lQ:(n=e.match(pQ))&&(i=fQ);let o=Js.fromGlob(e,this.options).toMMPattern();return i?Object.assign(o,{test:i}):o}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let r=this.options,n=r.noglobstar?wQ:r.dot?_Q:EQ,i=new Set(r.nocase?["i"]:[]),o=e.map(u=>{let p=u.map(d=>{if(d instanceof RegExp)for(let m of d.flags.split(""))i.add(m);return typeof d=="string"?AQ(d):d===Ot?Ot:d._src});return p.forEach((d,m)=>{let g=p[m+1],x=p[m-1];d!==Ot||x===Ot||(x===void 0?g!==void 0&&g!==Ot?p[m+1]="(?:\\/|"+n+"\\/)?"+g:p[m]=n:g===void 0?p[m-1]=x+"(?:\\/|"+n+")?":g!==Ot&&(p[m-1]=x+"(?:\\/|\\/"+n+"\\/)"+g,p[m+1]=Ot))}),p.filter(d=>d!==Ot).join("/")}).join("|"),[s,l]=e.length>1?["(?:",")"]:["",""];o="^"+s+o+l+"$",this.negate&&(o="^(?!"+o+").+$");try{this.regexp=new RegExp(o,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;let n=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let o=this.set;this.debug(this.pattern,"set",o);let s=i[i.length-1];if(!s)for(let l=i.length-2;!s&&l>=0;l--)s=i[l];for(let l=0;l<o.length;l++){let u=o[l],p=i;if(n.matchBase&&u.length===1&&(p=[s]),this.matchOne(p,u,r))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return ir.defaults(e).Minimatch}};ir.AST=Js;ir.Minimatch=$r;ir.escape=ec;ir.unescape=Fn;var tc=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,d1=new Set,Tv=typeof process=="object"&&process?process:{},m1=(t,e,r,n)=>{typeof Tv.emitWarning=="function"?Tv.emitWarning(t,e,r,n):console.error(`[${r}] ${e}: ${t}`)},Pg=globalThis.AbortController,f1=globalThis.AbortSignal;if(typeof Pg>"u"){f1=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(n,i){this._onabort.push(i)}},Pg=class{constructor(){e()}signal=new f1;abort(n){if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(let i of this.signal._onabort)i(n);this.signal.onabort?.(n)}}};let t=Tv.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{t&&(t=!1,m1("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var DQ=t=>!d1.has(t),iVe=Symbol("type"),go=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),h1=t=>go(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?rc:null:null,rc=class extends Array{constructor(e){super(e),this.fill(0)}},vv=class t{heap;length;static#e=!1;static create(e){let r=h1(e);if(!r)return[];t.#e=!0;let n=new t(e,r);return t.#e=!1,n}constructor(e,r){if(!t.#e)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},cu=class t{#e;#r;#o;#n;#a;#T;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#l;#p;#c;#s;#i;#g;#y;#d;#f;#w;#h;#_;#E;#S;#v;#b;#m;static unsafeExposeInternals(e){return{starts:e.#E,ttls:e.#S,sizes:e.#_,keyMap:e.#c,keyList:e.#s,valList:e.#i,next:e.#g,prev:e.#y,get head(){return e.#d},get tail(){return e.#f},free:e.#w,isBackgroundFetch:r=>e.#u(r),backgroundFetch:(r,n,i,o)=>e.#U(r,n,i,o),moveToTail:r=>e.#V(r),indexes:r=>e.#k(r),rindexes:r=>e.#P(r),isStale:r=>e.#x(r)}}get max(){return this.#e}get maxSize(){return this.#r}get calculatedSize(){return this.#p}get size(){return this.#l}get fetchMethod(){return this.#a}get memoMethod(){return this.#T}get dispose(){return this.#o}get disposeAfter(){return this.#n}constructor(e){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:s,updateAgeOnHas:l,allowStale:u,dispose:p,disposeAfter:d,noDisposeOnSet:m,noUpdateTTL:g,maxSize:x=0,maxEntrySize:v=0,sizeCalculation:b,fetchMethod:I,memoMethod:M,noDeleteOnFetchRejection:U,noDeleteOnStaleGet:Q,allowStaleOnFetchRejection:ne,allowStaleOnFetchAbort:he,ignoreFetchAbort:de}=e;if(r!==0&&!go(r))throw new TypeError("max option must be a nonnegative integer");let dt=r?h1(r):Array;if(!dt)throw new Error("invalid max value: "+r);if(this.#e=r,this.#r=x,this.maxEntrySize=v||this.#r,this.sizeCalculation=b,this.sizeCalculation){if(!this.#r&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(M!==void 0&&typeof M!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#T=M,I!==void 0&&typeof I!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#a=I,this.#b=!!I,this.#c=new Map,this.#s=new Array(r).fill(void 0),this.#i=new Array(r).fill(void 0),this.#g=new dt(r),this.#y=new dt(r),this.#d=0,this.#f=0,this.#w=vv.create(r),this.#l=0,this.#p=0,typeof p=="function"&&(this.#o=p),typeof d=="function"?(this.#n=d,this.#h=[]):(this.#n=void 0,this.#h=void 0),this.#v=!!this.#o,this.#m=!!this.#n,this.noDisposeOnSet=!!m,this.noUpdateTTL=!!g,this.noDeleteOnFetchRejection=!!U,this.allowStaleOnFetchRejection=!!ne,this.allowStaleOnFetchAbort=!!he,this.ignoreFetchAbort=!!de,this.maxEntrySize!==0){if(this.#r!==0&&!go(this.#r))throw new TypeError("maxSize must be a positive integer if specified");if(!go(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#A()}if(this.allowStale=!!u,this.noDeleteOnStaleGet=!!Q,this.updateAgeOnGet=!!s,this.updateAgeOnHas=!!l,this.ttlResolution=go(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=n||0,this.ttl){if(!go(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#M()}if(this.#e===0&&this.ttl===0&&this.#r===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#e&&!this.#r){let Dt="LRU_CACHE_UNBOUNDED";DQ(Dt)&&(d1.add(Dt),m1("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",Dt,t))}}getRemainingTTL(e){return this.#c.has(e)?1/0:0}#M(){let e=new rc(this.#e),r=new rc(this.#e);this.#S=e,this.#E=r,this.#I=(o,s,l=tc.now())=>{if(r[o]=s!==0?l:0,e[o]=s,s!==0&&this.ttlAutopurge){let u=setTimeout(()=>{this.#x(o)&&this.#D(this.#s[o],"expire")},s+1);u.unref&&u.unref()}},this.#R=o=>{r[o]=e[o]!==0?tc.now():0},this.#t=(o,s)=>{if(e[s]){let l=e[s],u=r[s];if(!l||!u)return;o.ttl=l,o.start=u,o.now=n||i();let p=o.now-u;o.remainingTTL=l-p}};let n=0,i=()=>{let o=tc.now();if(this.ttlResolution>0){n=o;let s=setTimeout(()=>n=0,this.ttlResolution);s.unref&&s.unref()}return o};this.getRemainingTTL=o=>{let s=this.#c.get(o);if(s===void 0)return 0;let l=e[s],u=r[s];if(!l||!u)return 1/0;let p=(n||i())-u;return l-p},this.#x=o=>{let s=r[o],l=e[o];return!!l&&!!s&&(n||i())-s>l}}#R=()=>{};#t=()=>{};#I=()=>{};#x=()=>!1;#A(){let e=new rc(this.#e);this.#p=0,this.#_=e,this.#F=r=>{this.#p-=e[r],e[r]=0},this.#N=(r,n,i,o)=>{if(this.#u(n))return 0;if(!go(i))if(o){if(typeof o!="function")throw new TypeError("sizeCalculation must be a function");if(i=o(n,r),!go(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#C=(r,n,i)=>{if(e[r]=n,this.#r){let o=this.#r-e[r];for(;this.#p>o;)this.#L(!0)}this.#p+=e[r],i&&(i.entrySize=n,i.totalCalculatedSize=this.#p)}}#F=e=>{};#C=(e,r,n)=>{};#N=(e,r,n,i)=>{if(n||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#k({allowStale:e=this.allowStale}={}){if(this.#l)for(let r=this.#f;!(!this.#O(r)||((e||!this.#x(r))&&(yield r),r===this.#d));)r=this.#y[r]}*#P({allowStale:e=this.allowStale}={}){if(this.#l)for(let r=this.#d;!(!this.#O(r)||((e||!this.#x(r))&&(yield r),r===this.#f));)r=this.#g[r]}#O(e){return e!==void 0&&this.#c.get(this.#s[e])===e}*entries(){for(let e of this.#k())this.#i[e]!==void 0&&this.#s[e]!==void 0&&!this.#u(this.#i[e])&&(yield[this.#s[e],this.#i[e]])}*rentries(){for(let e of this.#P())this.#i[e]!==void 0&&this.#s[e]!==void 0&&!this.#u(this.#i[e])&&(yield[this.#s[e],this.#i[e]])}*keys(){for(let e of this.#k()){let r=this.#s[e];r!==void 0&&!this.#u(this.#i[e])&&(yield r)}}*rkeys(){for(let e of this.#P()){let r=this.#s[e];r!==void 0&&!this.#u(this.#i[e])&&(yield r)}}*values(){for(let e of this.#k())this.#i[e]!==void 0&&!this.#u(this.#i[e])&&(yield this.#i[e])}*rvalues(){for(let e of this.#P())this.#i[e]!==void 0&&!this.#u(this.#i[e])&&(yield this.#i[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,r={}){for(let n of this.#k()){let i=this.#i[n],o=this.#u(i)?i.__staleWhileFetching:i;if(o!==void 0&&e(o,this.#s[n],this))return this.get(this.#s[n],r)}}forEach(e,r=this){for(let n of this.#k()){let i=this.#i[n],o=this.#u(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#s[n],this)}}rforEach(e,r=this){for(let n of this.#P()){let i=this.#i[n],o=this.#u(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#s[n],this)}}purgeStale(){let e=!1;for(let r of this.#P({allowStale:!0}))this.#x(r)&&(this.#D(this.#s[r],"expire"),e=!0);return e}info(e){let r=this.#c.get(e);if(r===void 0)return;let n=this.#i[r],i=this.#u(n)?n.__staleWhileFetching:n;if(i===void 0)return;let o={value:i};if(this.#S&&this.#E){let s=this.#S[r],l=this.#E[r];if(s&&l){let u=s-(tc.now()-l);o.ttl=u,o.start=Date.now()}}return this.#_&&(o.size=this.#_[r]),o}dump(){let e=[];for(let r of this.#k({allowStale:!0})){let n=this.#s[r],i=this.#i[r],o=this.#u(i)?i.__staleWhileFetching:i;if(o===void 0||n===void 0)continue;let s={value:o};if(this.#S&&this.#E){s.ttl=this.#S[r];let l=tc.now()-this.#E[r];s.start=Math.floor(Date.now()-l)}this.#_&&(s.size=this.#_[r]),e.unshift([n,s])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let i=Date.now()-n.start;n.start=tc.now()-i}this.set(r,n.value,n)}}set(e,r,n={}){if(r===void 0)return this.delete(e),this;let{ttl:i=this.ttl,start:o,noDisposeOnSet:s=this.noDisposeOnSet,sizeCalculation:l=this.sizeCalculation,status:u}=n,{noUpdateTTL:p=this.noUpdateTTL}=n,d=this.#N(e,r,n.size||0,l);if(this.maxEntrySize&&d>this.maxEntrySize)return u&&(u.set="miss",u.maxEntrySizeExceeded=!0),this.#D(e,"set"),this;let m=this.#l===0?void 0:this.#c.get(e);if(m===void 0)m=this.#l===0?this.#f:this.#w.length!==0?this.#w.pop():this.#l===this.#e?this.#L(!1):this.#l,this.#s[m]=e,this.#i[m]=r,this.#c.set(e,m),this.#g[this.#f]=m,this.#y[m]=this.#f,this.#f=m,this.#l++,this.#C(m,d,u),u&&(u.set="add"),p=!1;else{this.#V(m);let g=this.#i[m];if(r!==g){if(this.#b&&this.#u(g)){g.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:x}=g;x!==void 0&&!s&&(this.#v&&this.#o?.(x,e,"set"),this.#m&&this.#h?.push([x,e,"set"]))}else s||(this.#v&&this.#o?.(g,e,"set"),this.#m&&this.#h?.push([g,e,"set"]));if(this.#F(m),this.#C(m,d,u),this.#i[m]=r,u){u.set="replace";let x=g&&this.#u(g)?g.__staleWhileFetching:g;x!==void 0&&(u.oldValue=x)}}else u&&(u.set="update")}if(i!==0&&!this.#S&&this.#M(),this.#S&&(p||this.#I(m,i,o),u&&this.#t(u,m)),!s&&this.#m&&this.#h){let g=this.#h,x;for(;x=g?.shift();)this.#n?.(...x)}return this}pop(){try{for(;this.#l;){let e=this.#i[this.#d];if(this.#L(!0),this.#u(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#m&&this.#h){let e=this.#h,r;for(;r=e?.shift();)this.#n?.(...r)}}}#L(e){let r=this.#d,n=this.#s[r],i=this.#i[r];return this.#b&&this.#u(i)?i.__abortController.abort(new Error("evicted")):(this.#v||this.#m)&&(this.#v&&this.#o?.(i,n,"evict"),this.#m&&this.#h?.push([i,n,"evict"])),this.#F(r),e&&(this.#s[r]=void 0,this.#i[r]=void 0,this.#w.push(r)),this.#l===1?(this.#d=this.#f=0,this.#w.length=0):this.#d=this.#g[r],this.#c.delete(n),this.#l--,r}has(e,r={}){let{updateAgeOnHas:n=this.updateAgeOnHas,status:i}=r,o=this.#c.get(e);if(o!==void 0){let s=this.#i[o];if(this.#u(s)&&s.__staleWhileFetching===void 0)return!1;if(this.#x(o))i&&(i.has="stale",this.#t(i,o));else return n&&this.#R(o),i&&(i.has="hit",this.#t(i,o)),!0}else i&&(i.has="miss");return!1}peek(e,r={}){let{allowStale:n=this.allowStale}=r,i=this.#c.get(e);if(i===void 0||!n&&this.#x(i))return;let o=this.#i[i];return this.#u(o)?o.__staleWhileFetching:o}#U(e,r,n,i){let o=r===void 0?void 0:this.#i[r];if(this.#u(o))return o;let s=new Pg,{signal:l}=n;l?.addEventListener("abort",()=>s.abort(l.reason),{signal:s.signal});let u={signal:s.signal,options:n,context:i},p=(b,I=!1)=>{let{aborted:M}=s.signal,U=n.ignoreFetchAbort&&b!==void 0;if(n.status&&(M&&!I?(n.status.fetchAborted=!0,n.status.fetchError=s.signal.reason,U&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),M&&!U&&!I)return m(s.signal.reason);let Q=x;return this.#i[r]===x&&(b===void 0?Q.__staleWhileFetching?this.#i[r]=Q.__staleWhileFetching:this.#D(e,"fetch"):(n.status&&(n.status.fetchUpdated=!0),this.set(e,b,u.options))),b},d=b=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=b),m(b)),m=b=>{let{aborted:I}=s.signal,M=I&&n.allowStaleOnFetchAbort,U=M||n.allowStaleOnFetchRejection,Q=U||n.noDeleteOnFetchRejection,ne=x;if(this.#i[r]===x&&(!Q||ne.__staleWhileFetching===void 0?this.#D(e,"fetch"):M||(this.#i[r]=ne.__staleWhileFetching)),U)return n.status&&ne.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),ne.__staleWhileFetching;if(ne.__returned===ne)throw b},g=(b,I)=>{let M=this.#a?.(e,o,u);M&&M instanceof Promise&&M.then(U=>b(U===void 0?void 0:U),I),s.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(b(void 0),n.allowStaleOnFetchAbort&&(b=U=>p(U,!0)))})};n.status&&(n.status.fetchDispatched=!0);let x=new Promise(g).then(p,d),v=Object.assign(x,{__abortController:s,__staleWhileFetching:o,__returned:void 0});return r===void 0?(this.set(e,v,{...u.options,status:void 0}),r=this.#c.get(e)):this.#i[r]=v,v}#u(e){if(!this.#b)return!1;let r=e;return!!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof Pg}async fetch(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:s=this.ttl,noDisposeOnSet:l=this.noDisposeOnSet,size:u=0,sizeCalculation:p=this.sizeCalculation,noUpdateTTL:d=this.noUpdateTTL,noDeleteOnFetchRejection:m=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:g=this.allowStaleOnFetchRejection,ignoreFetchAbort:x=this.ignoreFetchAbort,allowStaleOnFetchAbort:v=this.allowStaleOnFetchAbort,context:b,forceRefresh:I=!1,status:M,signal:U}=r;if(!this.#b)return M&&(M.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,status:M});let Q={allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,ttl:s,noDisposeOnSet:l,size:u,sizeCalculation:p,noUpdateTTL:d,noDeleteOnFetchRejection:m,allowStaleOnFetchRejection:g,allowStaleOnFetchAbort:v,ignoreFetchAbort:x,status:M,signal:U},ne=this.#c.get(e);if(ne===void 0){M&&(M.fetch="miss");let he=this.#U(e,ne,Q,b);return he.__returned=he}else{let he=this.#i[ne];if(this.#u(he)){let O=n&&he.__staleWhileFetching!==void 0;return M&&(M.fetch="inflight",O&&(M.returnedStale=!0)),O?he.__staleWhileFetching:he.__returned=he}let de=this.#x(ne);if(!I&&!de)return M&&(M.fetch="hit"),this.#V(ne),i&&this.#R(ne),M&&this.#t(M,ne),he;let dt=this.#U(e,ne,Q,b),nt=dt.__staleWhileFetching!==void 0&&n;return M&&(M.fetch=de?"stale":"refresh",nt&&de&&(M.returnedStale=!0)),nt?dt.__staleWhileFetching:dt.__returned=dt}}async forceFetch(e,r={}){let n=await this.fetch(e,r);if(n===void 0)throw new Error("fetch() returned undefined");return n}memo(e,r={}){let n=this.#T;if(!n)throw new Error("no memoMethod provided to constructor");let{context:i,forceRefresh:o,...s}=r,l=this.get(e,s);if(!o&&l!==void 0)return l;let u=n(e,l,{options:s,context:i});return this.set(e,u,s),u}get(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:s}=r,l=this.#c.get(e);if(l!==void 0){let u=this.#i[l],p=this.#u(u);return s&&this.#t(s,l),this.#x(l)?(s&&(s.get="stale"),p?(s&&n&&u.__staleWhileFetching!==void 0&&(s.returnedStale=!0),n?u.__staleWhileFetching:void 0):(o||this.#D(e,"expire"),s&&n&&(s.returnedStale=!0),n?u:void 0)):(s&&(s.get="hit"),p?u.__staleWhileFetching:(this.#V(l),i&&this.#R(l),u))}else s&&(s.get="miss")}#B(e,r){this.#y[r]=e,this.#g[e]=r}#V(e){e!==this.#f&&(e===this.#d?this.#d=this.#g[e]:this.#B(this.#y[e],this.#g[e]),this.#B(this.#f,e),this.#f=e)}delete(e){return this.#D(e,"delete")}#D(e,r){let n=!1;if(this.#l!==0){let i=this.#c.get(e);if(i!==void 0)if(n=!0,this.#l===1)this.#W(r);else{this.#F(i);let o=this.#i[i];if(this.#u(o)?o.__abortController.abort(new Error("deleted")):(this.#v||this.#m)&&(this.#v&&this.#o?.(o,e,r),this.#m&&this.#h?.push([o,e,r])),this.#c.delete(e),this.#s[i]=void 0,this.#i[i]=void 0,i===this.#f)this.#f=this.#y[i];else if(i===this.#d)this.#d=this.#g[i];else{let s=this.#y[i];this.#g[s]=this.#g[i];let l=this.#g[i];this.#y[l]=this.#y[i]}this.#l--,this.#w.push(i)}}if(this.#m&&this.#h?.length){let i=this.#h,o;for(;o=i?.shift();)this.#n?.(...o)}return n}clear(){return this.#W("delete")}#W(e){for(let r of this.#P({allowStale:!0})){let n=this.#i[r];if(this.#u(n))n.__abortController.abort(new Error("deleted"));else{let i=this.#s[r];this.#v&&this.#o?.(n,i,e),this.#m&&this.#h?.push([n,i,e])}}if(this.#c.clear(),this.#i.fill(void 0),this.#s.fill(void 0),this.#S&&this.#E&&(this.#S.fill(0),this.#E.fill(0)),this.#_&&this.#_.fill(0),this.#d=0,this.#f=0,this.#w.length=0,this.#p=0,this.#l=0,this.#m&&this.#h){let r=this.#h,n;for(;n=r?.shift();)this.#n?.(...n)}}};var oc=require("path"),E1=require("url"),WQ=fr(require("fs"),1),ni=require("fs"),So=require("fs/promises");var Ng=require("events"),Pv=fr(require("stream"),1),T1=require("string_decoder"),g1=typeof process=="object"&&process?process:{stdout:null,stderr:null},IQ=t=>!!t&&typeof t=="object"&&(t instanceof xo||t instanceof Pv.default||FQ(t)||CQ(t)),FQ=t=>!!t&&typeof t=="object"&&t instanceof Ng.EventEmitter&&typeof t.pipe=="function"&&t.pipe!==Pv.default.Writable.prototype.pipe,CQ=t=>!!t&&typeof t=="object"&&t instanceof Ng.EventEmitter&&typeof t.write=="function"&&typeof t.end=="function",Ii=Symbol("EOF"),Fi=Symbol("maybeEmitEnd"),yo=Symbol("emittedEnd"),Mg=Symbol("emittingEnd"),lu=Symbol("emittedError"),Ag=Symbol("closed"),y1=Symbol("read"),Dg=Symbol("flush"),x1=Symbol("flushChunk"),Cn=Symbol("encoding"),nc=Symbol("decoder"),Pt=Symbol("flowing"),uu=Symbol("paused"),ic=Symbol("resume"),Mt=Symbol("buffer"),or=Symbol("pipes"),At=Symbol("bufferLength"),bv=Symbol("bufferPush"),Ig=Symbol("bufferShift"),qt=Symbol("objectMode"),ft=Symbol("destroyed"),wv=Symbol("error"),_v=Symbol("emitData"),S1=Symbol("emitEnd"),Ev=Symbol("emitEnd2"),ti=Symbol("async"),Rv=Symbol("abort"),Fg=Symbol("aborted"),pu=Symbol("signal"),ha=Symbol("dataListeners"),jr=Symbol("discarded"),fu=t=>Promise.resolve().then(t),NQ=t=>t(),OQ=t=>t==="end"||t==="finish"||t==="prefinish",LQ=t=>t instanceof ArrayBuffer||!!t&&typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,UQ=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),Cg=class{src;dest;opts;ondrain;constructor(e,r,n){this.src=e,this.dest=r,this.opts=n,this.ondrain=()=>e[ic](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(e){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},kv=class extends Cg{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,r,n){super(e,r,n),this.proxyErrors=i=>r.emit("error",i),e.on("error",this.proxyErrors)}},BQ=t=>!!t.objectMode,VQ=t=>!t.objectMode&&!!t.encoding&&t.encoding!=="buffer",xo=class extends Ng.EventEmitter{[Pt]=!1;[uu]=!1;[or]=[];[Mt]=[];[qt];[Cn];[ti];[nc];[Ii]=!1;[yo]=!1;[Mg]=!1;[Ag]=!1;[lu]=null;[At]=0;[ft]=!1;[pu];[Fg]=!1;[ha]=0;[jr]=!1;writable=!0;readable=!0;constructor(...e){let r=e[0]||{};if(super(),r.objectMode&&typeof r.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");BQ(r)?(this[qt]=!0,this[Cn]=null):VQ(r)?(this[Cn]=r.encoding,this[qt]=!1):(this[qt]=!1,this[Cn]=null),this[ti]=!!r.async,this[nc]=this[Cn]?new T1.StringDecoder(this[Cn]):null,r&&r.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[Mt]}),r&&r.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[or]});let{signal:n}=r;n&&(this[pu]=n,n.aborted?this[Rv]():n.addEventListener("abort",()=>this[Rv]()))}get bufferLength(){return this[At]}get encoding(){return this[Cn]}set encoding(e){throw new Error("Encoding must be set at instantiation time")}setEncoding(e){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[qt]}set objectMode(e){throw new Error("objectMode must be set at instantiation time")}get async(){return this[ti]}set async(e){this[ti]=this[ti]||!!e}[Rv](){this[Fg]=!0,this.emit("abort",this[pu]?.reason),this.destroy(this[pu]?.reason)}get aborted(){return this[Fg]}set aborted(e){}write(e,r,n){if(this[Fg])return!1;if(this[Ii])throw new Error("write after end");if(this[ft])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof r=="function"&&(n=r,r="utf8"),r||(r="utf8");let i=this[ti]?fu:NQ;if(!this[qt]&&!Buffer.isBuffer(e)){if(UQ(e))e=Buffer.from(e.buffer,e.byteOffset,e.byteLength);else if(LQ(e))e=Buffer.from(e);else if(typeof e!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[qt]?(this[Pt]&&this[At]!==0&&this[Dg](!0),this[Pt]?this.emit("data",e):this[bv](e),this[At]!==0&&this.emit("readable"),n&&i(n),this[Pt]):e.length?(typeof e=="string"&&!(r===this[Cn]&&!this[nc]?.lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[Cn]&&(e=this[nc].write(e)),this[Pt]&&this[At]!==0&&this[Dg](!0),this[Pt]?this.emit("data",e):this[bv](e),this[At]!==0&&this.emit("readable"),n&&i(n),this[Pt]):(this[At]!==0&&this.emit("readable"),n&&i(n),this[Pt])}read(e){if(this[ft])return null;if(this[jr]=!1,this[At]===0||e===0||e&&e>this[At])return this[Fi](),null;this[qt]&&(e=null),this[Mt].length>1&&!this[qt]&&(this[Mt]=[this[Cn]?this[Mt].join(""):Buffer.concat(this[Mt],this[At])]);let r=this[y1](e||null,this[Mt][0]);return this[Fi](),r}[y1](e,r){if(this[qt])this[Ig]();else{let n=r;e===n.length||e===null?this[Ig]():typeof n=="string"?(this[Mt][0]=n.slice(e),r=n.slice(0,e),this[At]-=e):(this[Mt][0]=n.subarray(e),r=n.subarray(0,e),this[At]-=e)}return this.emit("data",r),!this[Mt].length&&!this[Ii]&&this.emit("drain"),r}end(e,r,n){return typeof e=="function"&&(n=e,e=void 0),typeof r=="function"&&(n=r,r="utf8"),e!==void 0&&this.write(e,r),n&&this.once("end",n),this[Ii]=!0,this.writable=!1,(this[Pt]||!this[uu])&&this[Fi](),this}[ic](){this[ft]||(!this[ha]&&!this[or].length&&(this[jr]=!0),this[uu]=!1,this[Pt]=!0,this.emit("resume"),this[Mt].length?this[Dg]():this[Ii]?this[Fi]():this.emit("drain"))}resume(){return this[ic]()}pause(){this[Pt]=!1,this[uu]=!0,this[jr]=!1}get destroyed(){return this[ft]}get flowing(){return this[Pt]}get paused(){return this[uu]}[bv](e){this[qt]?this[At]+=1:this[At]+=e.length,this[Mt].push(e)}[Ig](){return this[qt]?this[At]-=1:this[At]-=this[Mt][0].length,this[Mt].shift()}[Dg](e=!1){do;while(this[x1](this[Ig]())&&this[Mt].length);!e&&!this[Mt].length&&!this[Ii]&&this.emit("drain")}[x1](e){return this.emit("data",e),this[Pt]}pipe(e,r){if(this[ft])return e;this[jr]=!1;let n=this[yo];return r=r||{},e===g1.stdout||e===g1.stderr?r.end=!1:r.end=r.end!==!1,r.proxyErrors=!!r.proxyErrors,n?r.end&&e.end():(this[or].push(r.proxyErrors?new kv(this,e,r):new Cg(this,e,r)),this[ti]?fu(()=>this[ic]()):this[ic]()),e}unpipe(e){let r=this[or].find(n=>n.dest===e);r&&(this[or].length===1?(this[Pt]&&this[ha]===0&&(this[Pt]=!1),this[or]=[]):this[or].splice(this[or].indexOf(r),1),r.unpipe())}addListener(e,r){return this.on(e,r)}on(e,r){let n=super.on(e,r);if(e==="data")this[jr]=!1,this[ha]++,!this[or].length&&!this[Pt]&&this[ic]();else if(e==="readable"&&this[At]!==0)super.emit("readable");else if(OQ(e)&&this[yo])super.emit(e),this.removeAllListeners(e);else if(e==="error"&&this[lu]){let i=r;this[ti]?fu(()=>i.call(this,this[lu])):i.call(this,this[lu])}return n}removeListener(e,r){return this.off(e,r)}off(e,r){let n=super.off(e,r);return e==="data"&&(this[ha]=this.listeners("data").length,this[ha]===0&&!this[jr]&&!this[or].length&&(this[Pt]=!1)),n}removeAllListeners(e){let r=super.removeAllListeners(e);return(e==="data"||e===void 0)&&(this[ha]=0,!this[jr]&&!this[or].length&&(this[Pt]=!1)),r}get emittedEnd(){return this[yo]}[Fi](){!this[Mg]&&!this[yo]&&!this[ft]&&this[Mt].length===0&&this[Ii]&&(this[Mg]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[Ag]&&this.emit("close"),this[Mg]=!1)}emit(e,...r){let n=r[0];if(e!=="error"&&e!=="close"&&e!==ft&&this[ft])return!1;if(e==="data")return!this[qt]&&!n?!1:this[ti]?(fu(()=>this[_v](n)),!0):this[_v](n);if(e==="end")return this[S1]();if(e==="close"){if(this[Ag]=!0,!this[yo]&&!this[ft])return!1;let o=super.emit("close");return this.removeAllListeners("close"),o}else if(e==="error"){this[lu]=n,super.emit(wv,n);let o=!this[pu]||this.listeners("error").length?super.emit("error",n):!1;return this[Fi](),o}else if(e==="resume"){let o=super.emit("resume");return this[Fi](),o}else if(e==="finish"||e==="prefinish"){let o=super.emit(e);return this.removeAllListeners(e),o}let i=super.emit(e,...r);return this[Fi](),i}[_v](e){for(let n of this[or])n.dest.write(e)===!1&&this.pause();let r=this[jr]?!1:super.emit("data",e);return this[Fi](),r}[S1](){return this[yo]?!1:(this[yo]=!0,this.readable=!1,this[ti]?(fu(()=>this[Ev]()),!0):this[Ev]())}[Ev](){if(this[nc]){let r=this[nc].end();if(r){for(let n of this[or])n.dest.write(r);this[jr]||super.emit("data",r)}}for(let r of this[or])r.end();let e=super.emit("end");return this.removeAllListeners("end"),e}async collect(){let e=Object.assign([],{dataLength:0});this[qt]||(e.dataLength=0);let r=this.promise();return this.on("data",n=>{e.push(n),this[qt]||(e.dataLength+=n.length)}),await r,e}async concat(){if(this[qt])throw new Error("cannot concat in objectMode");let e=await this.collect();return this[Cn]?e.join(""):Buffer.concat(e,e.dataLength)}async promise(){return new Promise((e,r)=>{this.on(ft,()=>r(new Error("stream destroyed"))),this.on("error",n=>r(n)),this.on("end",()=>e())})}[Symbol.asyncIterator](){this[jr]=!1;let e=!1,r=async()=>(this.pause(),e=!0,{value:void 0,done:!0});return{next:()=>{if(e)return r();let i=this.read();if(i!==null)return Promise.resolve({done:!1,value:i});if(this[Ii])return r();let o,s,l=m=>{this.off("data",u),this.off("end",p),this.off(ft,d),r(),s(m)},u=m=>{this.off("error",l),this.off("end",p),this.off(ft,d),this.pause(),o({value:m,done:!!this[Ii]})},p=()=>{this.off("error",l),this.off("data",u),this.off(ft,d),r(),o({done:!0,value:void 0})},d=()=>l(new Error("stream destroyed"));return new Promise((m,g)=>{s=g,o=m,this.once(ft,d),this.once("error",l),this.once("end",p),this.once("data",u)})},throw:r,return:r,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[jr]=!1;let e=!1,r=()=>(this.pause(),this.off(wv,r),this.off(ft,r),this.off("end",r),e=!0,{done:!0,value:void 0}),n=()=>{if(e)return r();let i=this.read();return i===null?r():{done:!1,value:i}};return this.once("end",r),this.once(wv,r),this.once(ft,r),{next:n,throw:r,return:r,[Symbol.iterator](){return this}}}destroy(e){if(this[ft])return e?this.emit("error",e):this.emit(ft),this;this[ft]=!0,this[jr]=!0,this[Mt].length=0,this[At]=0;let r=this;return typeof r.close=="function"&&!this[Ag]&&r.close(),e?this.emit("error",e):this.emit(ft),this}static get isStream(){return IQ}};var HQ=ni.realpathSync.native,mu={lstatSync:ni.lstatSync,readdir:ni.readdir,readdirSync:ni.readdirSync,readlinkSync:ni.readlinkSync,realpathSync:HQ,promises:{lstat:So.lstat,readdir:So.readdir,readlink:So.readlink,realpath:So.realpath}},R1=t=>!t||t===mu||t===WQ?mu:{...mu,...t,promises:{...mu.promises,...t.promises||{}}},k1=/^\\\\\?\\([a-z]:)\\?$/i,$Q=t=>t.replace(/\//g,"\\").replace(k1,"$1\\"),jQ=/[\\\/]/,hn=0,P1=1,M1=2,ri=4,A1=6,D1=8,ga=10,I1=12,mn=15,du=~mn,Mv=16,v1=32,hu=64,Nn=128,Og=256,Ug=512,b1=hu|Nn|Ug,qQ=1023,Av=t=>t.isFile()?D1:t.isDirectory()?ri:t.isSymbolicLink()?ga:t.isCharacterDevice()?M1:t.isBlockDevice()?A1:t.isSocket()?I1:t.isFIFO()?P1:hn,w1=new Map,gu=t=>{let e=w1.get(t);if(e)return e;let r=t.normalize("NFKD");return w1.set(t,r),r},_1=new Map,Lg=t=>{let e=_1.get(t);if(e)return e;let r=gu(t.toLowerCase());return _1.set(t,r),r},Bg=class extends cu{constructor(){super({max:256})}},Dv=class extends cu{constructor(e=16*1024){super({maxSize:e,sizeCalculation:r=>r.length+1})}},F1=Symbol("PathScurry setAsCwd"),zt=class{name;root;roots;parent;nocase;#e;#r;get dev(){return this.#r}#o;get mode(){return this.#o}#n;get nlink(){return this.#n}#a;get uid(){return this.#a}#T;get gid(){return this.#T}#l;get rdev(){return this.#l}#p;get blksize(){return this.#p}#c;get ino(){return this.#c}#s;get size(){return this.#s}#i;get blocks(){return this.#i}#g;get atimeMs(){return this.#g}#y;get mtimeMs(){return this.#y}#d;get ctimeMs(){return this.#d}#f;get birthtimeMs(){return this.#f}#w;get atime(){return this.#w}#h;get mtime(){return this.#h}#_;get ctime(){return this.#_}#E;get birthtime(){return this.#E}#S;#v;#b;#m;#M;#R;#t;#I;#x;#A;get path(){return(this.parent||this).fullpath()}constructor(e,r=hn,n,i,o,s,l){this.name=e,this.#S=o?Lg(e):gu(e),this.#t=r&qQ,this.nocase=o,this.roots=i,this.root=n||this,this.#I=s,this.#b=l.fullpath,this.#M=l.relative,this.#R=l.relativePosix,this.parent=l.parent,this.parent?this.#e=this.parent.#e:this.#e=R1(l.fs)}depth(){return this.#v!==void 0?this.#v:this.parent?this.#v=this.parent.depth()+1:this.#v=0}childrenCache(){return this.#I}resolve(e){if(!e)return this;let r=this.getRootString(e),i=e.substring(r.length).split(this.splitSep);return r?this.getRoot(r).#F(i):this.#F(i)}#F(e){let r=this;for(let n of e)r=r.child(n);return r}children(){let e=this.#I.get(this);if(e)return e;let r=Object.assign([],{provisional:0});return this.#I.set(this,r),this.#t&=~Mv,r}child(e,r){if(e===""||e===".")return this;if(e==="..")return this.parent||this;let n=this.children(),i=this.nocase?Lg(e):gu(e);for(let u of n)if(u.#S===i)return u;let o=this.parent?this.sep:"",s=this.#b?this.#b+o+e:void 0,l=this.newChild(e,hn,{...r,parent:this,fullpath:s});return this.canReaddir()||(l.#t|=Nn),n.push(l),l}relative(){if(this.#M!==void 0)return this.#M;let e=this.name,r=this.parent;if(!r)return this.#M=this.name;let n=r.relative();return n+(!n||!r.parent?"":this.sep)+e}relativePosix(){if(this.sep==="/")return this.relative();if(this.#R!==void 0)return this.#R;let e=this.name,r=this.parent;if(!r)return this.#R=this.fullpathPosix();let n=r.relativePosix();return n+(!n||!r.parent?"":"/")+e}fullpath(){if(this.#b!==void 0)return this.#b;let e=this.name,r=this.parent;if(!r)return this.#b=this.name;let i=r.fullpath()+(r.parent?this.sep:"")+e;return this.#b=i}fullpathPosix(){if(this.#m!==void 0)return this.#m;if(this.sep==="/")return this.#m=this.fullpath();if(!this.parent){let i=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(i)?this.#m=`//?/${i}`:this.#m=i}let e=this.parent,r=e.fullpathPosix(),n=r+(!r||!e.parent?"":"/")+this.name;return this.#m=n}isUnknown(){return(this.#t&mn)===hn}isType(e){return this[`is${e}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#t&mn)===D1}isDirectory(){return(this.#t&mn)===ri}isCharacterDevice(){return(this.#t&mn)===M1}isBlockDevice(){return(this.#t&mn)===A1}isFIFO(){return(this.#t&mn)===P1}isSocket(){return(this.#t&mn)===I1}isSymbolicLink(){return(this.#t&ga)===ga}lstatCached(){return this.#t&v1?this:void 0}readlinkCached(){return this.#x}realpathCached(){return this.#A}readdirCached(){let e=this.children();return e.slice(0,e.provisional)}canReadlink(){if(this.#x)return!0;if(!this.parent)return!1;let e=this.#t&mn;return!(e!==hn&&e!==ga||this.#t&Og||this.#t&Nn)}calledReaddir(){return!!(this.#t&Mv)}isENOENT(){return!!(this.#t&Nn)}isNamed(e){return this.nocase?this.#S===Lg(e):this.#S===gu(e)}async readlink(){let e=this.#x;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=await this.#e.promises.readlink(this.fullpath()),n=this.parent.resolve(r);if(n)return this.#x=n}catch(r){this.#u(r.code);return}}readlinkSync(){let e=this.#x;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=this.#e.readlinkSync(this.fullpath()),n=this.parent.resolve(r);if(n)return this.#x=n}catch(r){this.#u(r.code);return}}#C(e){this.#t|=Mv;for(let r=e.provisional;r<e.length;r++)e[r].#N()}#N(){this.#t&Nn||(this.#t=(this.#t|Nn)&du,this.#k())}#k(){let e=this.children();e.provisional=0;for(let r of e)r.#N()}#P(){this.#t|=Ug,this.#O()}#O(){if(this.#t&hu)return;let e=this.#t;(e&mn)===ri&&(e&=du),this.#t=e|hu,this.#k()}#L(e=""){e==="ENOTDIR"||e==="EPERM"?this.#O():e==="ENOENT"?this.#N():this.children().provisional=0}#U(e=""){e==="ENOTDIR"?this.parent.#O():e==="ENOENT"&&this.#N()}#u(e=""){let r=this.#t;r|=Og,e==="ENOENT"&&(r|=Nn),(e==="EINVAL"||e==="UNKNOWN")&&(r&=du),this.#t=r,e==="ENOTDIR"&&this.parent&&this.parent.#O()}#B(e,r){return this.#D(e,r)||this.#V(e,r)}#V(e,r){let n=Av(e),i=this.newChild(e.name,n,{parent:this}),o=i.#t&mn;return o!==ri&&o!==ga&&o!==hn&&(i.#t|=hu),r.unshift(i),r.provisional++,i}#D(e,r){for(let n=r.provisional;n<r.length;n++){let i=r[n];if((this.nocase?Lg(e.name):gu(e.name))===i.#S)return this.#W(e,i,n,r)}}#W(e,r,n,i){let o=r.name;return r.#t=r.#t&du|Av(e),o!==e.name&&(r.name=e.name),n!==i.provisional&&(n===i.length-1?i.pop():i.splice(n,1),i.unshift(r)),i.provisional++,r}async lstat(){if(!(this.#t&Nn))try{return this.#q(await this.#e.promises.lstat(this.fullpath())),this}catch(e){this.#U(e.code)}}lstatSync(){if(!(this.#t&Nn))try{return this.#q(this.#e.lstatSync(this.fullpath())),this}catch(e){this.#U(e.code)}}#q(e){let{atime:r,atimeMs:n,birthtime:i,birthtimeMs:o,blksize:s,blocks:l,ctime:u,ctimeMs:p,dev:d,gid:m,ino:g,mode:x,mtime:v,mtimeMs:b,nlink:I,rdev:M,size:U,uid:Q}=e;this.#w=r,this.#g=n,this.#E=i,this.#f=o,this.#p=s,this.#i=l,this.#_=u,this.#d=p,this.#r=d,this.#T=m,this.#c=g,this.#o=x,this.#h=v,this.#y=b,this.#n=I,this.#l=M,this.#s=U,this.#a=Q;let ne=Av(e);this.#t=this.#t&du|ne|v1,ne!==hn&&ne!==ri&&ne!==ga&&(this.#t|=hu)}#$=[];#j=!1;#z(e){this.#j=!1;let r=this.#$.slice();this.#$.length=0,r.forEach(n=>n(null,e))}readdirCB(e,r=!1){if(!this.canReaddir()){r?e(null,[]):queueMicrotask(()=>e(null,[]));return}let n=this.children();if(this.calledReaddir()){let o=n.slice(0,n.provisional);r?e(null,o):queueMicrotask(()=>e(null,o));return}if(this.#$.push(e),this.#j)return;this.#j=!0;let i=this.fullpath();this.#e.readdir(i,{withFileTypes:!0},(o,s)=>{if(o)this.#L(o.code),n.provisional=0;else{for(let l of s)this.#B(l,n);this.#C(n)}this.#z(n.slice(0,n.provisional))})}#H;async readdir(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();if(this.#H)await this.#H;else{let n=()=>{};this.#H=new Promise(i=>n=i);try{for(let i of await this.#e.promises.readdir(r,{withFileTypes:!0}))this.#B(i,e);this.#C(e)}catch(i){this.#L(i.code),e.provisional=0}this.#H=void 0,n()}return e.slice(0,e.provisional)}readdirSync(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();try{for(let n of this.#e.readdirSync(r,{withFileTypes:!0}))this.#B(n,e);this.#C(e)}catch(n){this.#L(n.code),e.provisional=0}return e.slice(0,e.provisional)}canReaddir(){if(this.#t&b1)return!1;let e=mn&this.#t;return e===hn||e===ri||e===ga}shouldWalk(e,r){return(this.#t&ri)===ri&&!(this.#t&b1)&&!e.has(this)&&(!r||r(this))}async realpath(){if(this.#A)return this.#A;if(!((Ug|Og|Nn)&this.#t))try{let e=await this.#e.promises.realpath(this.fullpath());return this.#A=this.resolve(e)}catch{this.#P()}}realpathSync(){if(this.#A)return this.#A;if(!((Ug|Og|Nn)&this.#t))try{let e=this.#e.realpathSync(this.fullpath());return this.#A=this.resolve(e)}catch{this.#P()}}[F1](e){if(e===this)return;let r=new Set([]),n=[],i=this;for(;i&&i.parent;)r.add(i),i.#M=n.join(this.sep),i.#R=n.join("/"),i=i.parent,n.push("..");for(i=e;i&&i.parent&&!r.has(i);)i.#M=void 0,i.#R=void 0,i=i.parent}},Vg=class t extends zt{sep="\\";splitSep=jQ;constructor(e,r=hn,n,i,o,s,l){super(e,r,n,i,o,s,l)}newChild(e,r=hn,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}getRootString(e){return oc.win32.parse(e).root}getRoot(e){if(e=$Q(e.toUpperCase()),e===this.root.name)return this.root;for(let[r,n]of Object.entries(this.roots))if(this.sameRoot(e,r))return this.roots[e]=n;return this.roots[e]=new ac(e,this).root}sameRoot(e,r=this.root.name){return e=e.toUpperCase().replace(/\//g,"\\").replace(k1,"$1\\"),e===r}},Wg=class t extends zt{splitSep="/";sep="/";constructor(e,r=hn,n,i,o,s,l){super(e,r,n,i,o,s,l)}getRootString(e){return e.startsWith("/")?"/":""}getRoot(e){return this.root}newChild(e,r=hn,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}},Hg=class{root;rootPath;roots;cwd;#e;#r;#o;nocase;#n;constructor(e=process.cwd(),r,n,{nocase:i,childrenCacheSize:o=16*1024,fs:s=mu}={}){this.#n=R1(s),(e instanceof URL||e.startsWith("file://"))&&(e=(0,E1.fileURLToPath)(e));let l=r.resolve(e);this.roots=Object.create(null),this.rootPath=this.parseRootPath(l),this.#e=new Bg,this.#r=new Bg,this.#o=new Dv(o);let u=l.substring(this.rootPath.length).split(n);if(u.length===1&&!u[0]&&u.pop(),i===void 0)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=i,this.root=this.newRoot(this.#n),this.roots[this.rootPath]=this.root;let p=this.root,d=u.length-1,m=r.sep,g=this.rootPath,x=!1;for(let v of u){let b=d--;p=p.child(v,{relative:new Array(b).fill("..").join(m),relativePosix:new Array(b).fill("..").join("/"),fullpath:g+=(x?"":m)+v}),x=!0}this.cwd=p}depth(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.depth()}childrenCache(){return this.#o}resolve(...e){let r="";for(let o=e.length-1;o>=0;o--){let s=e[o];if(!(!s||s===".")&&(r=r?`${s}/${r}`:s,this.isAbsolute(s)))break}let n=this.#e.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpath();return this.#e.set(r,i),i}resolvePosix(...e){let r="";for(let o=e.length-1;o>=0;o--){let s=e[o];if(!(!s||s===".")&&(r=r?`${s}/${r}`:s,this.isAbsolute(s)))break}let n=this.#r.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpathPosix();return this.#r.set(r,i),i}relative(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relative()}relativePosix(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relativePosix()}basename(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.name}dirname(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),(e.parent||e).fullpath()}async readdir(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof zt||(r=e,e=this.cwd);let{withFileTypes:n}=r;if(e.canReaddir()){let i=await e.readdir();return n?i:i.map(o=>o.name)}else return[]}readdirSync(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof zt||(r=e,e=this.cwd);let{withFileTypes:n=!0}=r;return e.canReaddir()?n?e.readdirSync():e.readdirSync().map(i=>i.name):[]}async lstat(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstat()}lstatSync(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstatSync()}async readlink(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof zt||(r=e.withFileTypes,e=this.cwd);let n=await e.readlink();return r?n:n?.fullpath()}readlinkSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof zt||(r=e.withFileTypes,e=this.cwd);let n=e.readlinkSync();return r?n:n?.fullpath()}async realpath(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof zt||(r=e.withFileTypes,e=this.cwd);let n=await e.realpath();return r?n:n?.fullpath()}realpathSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof zt||(r=e.withFileTypes,e=this.cwd);let n=e.realpathSync();return r?n:n?.fullpath()}async walk(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof zt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=[];(!o||o(e))&&l.push(n?e:e.fullpath());let u=new Set,p=(m,g)=>{u.add(m),m.readdirCB((x,v)=>{if(x)return g(x);let b=v.length;if(!b)return g();let I=()=>{--b===0&&g()};for(let M of v)(!o||o(M))&&l.push(n?M:M.fullpath()),i&&M.isSymbolicLink()?M.realpath().then(U=>U?.isUnknown()?U.lstat():U).then(U=>U?.shouldWalk(u,s)?p(U,I):I()):M.shouldWalk(u,s)?p(M,I):I()},!0)},d=e;return new Promise((m,g)=>{p(d,x=>{if(x)return g(x);m(l)})})}walkSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof zt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=[];(!o||o(e))&&l.push(n?e:e.fullpath());let u=new Set([e]);for(let p of u){let d=p.readdirSync();for(let m of d){(!o||o(m))&&l.push(n?m:m.fullpath());let g=m;if(m.isSymbolicLink()){if(!(i&&(g=m.realpathSync())))continue;g.isUnknown()&&g.lstatSync()}g.shouldWalk(u,s)&&u.add(g)}}return l}[Symbol.asyncIterator](){return this.iterate()}iterate(e=this.cwd,r={}){return typeof e=="string"?e=this.cwd.resolve(e):e instanceof zt||(r=e,e=this.cwd),this.stream(e,r)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof zt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r;(!o||o(e))&&(yield n?e:e.fullpath());let l=new Set([e]);for(let u of l){let p=u.readdirSync();for(let d of p){(!o||o(d))&&(yield n?d:d.fullpath());let m=d;if(d.isSymbolicLink()){if(!(i&&(m=d.realpathSync())))continue;m.isUnknown()&&m.lstatSync()}m.shouldWalk(l,s)&&l.add(m)}}}stream(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof zt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=new xo({objectMode:!0});(!o||o(e))&&l.write(n?e:e.fullpath());let u=new Set,p=[e],d=0,m=()=>{let g=!1;for(;!g;){let x=p.shift();if(!x){d===0&&l.end();return}d++,u.add(x);let v=(I,M,U=!1)=>{if(I)return l.emit("error",I);if(i&&!U){let Q=[];for(let ne of M)ne.isSymbolicLink()&&Q.push(ne.realpath().then(he=>he?.isUnknown()?he.lstat():he));if(Q.length){Promise.all(Q).then(()=>v(null,M,!0));return}}for(let Q of M)Q&&(!o||o(Q))&&(l.write(n?Q:Q.fullpath())||(g=!0));d--;for(let Q of M){let ne=Q.realpathCached()||Q;ne.shouldWalk(u,s)&&p.push(ne)}g&&!l.flowing?l.once("drain",m):b||m()},b=!0;x.readdirCB(v,!0),b=!1}};return m(),l}streamSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof zt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=new xo({objectMode:!0}),u=new Set;(!o||o(e))&&l.write(n?e:e.fullpath());let p=[e],d=0,m=()=>{let g=!1;for(;!g;){let x=p.shift();if(!x){d===0&&l.end();return}d++,u.add(x);let v=x.readdirSync();for(let b of v)(!o||o(b))&&(l.write(n?b:b.fullpath())||(g=!0));d--;for(let b of v){let I=b;if(b.isSymbolicLink()){if(!(i&&(I=b.realpathSync())))continue;I.isUnknown()&&I.lstatSync()}I.shouldWalk(u,s)&&p.push(I)}}g&&!l.flowing&&l.once("drain",m)};return m(),l}chdir(e=this.cwd){let r=this.cwd;this.cwd=typeof e=="string"?this.cwd.resolve(e):e,this.cwd[F1](r)}},ac=class extends Hg{sep="\\";constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,oc.win32,"\\",{...r,nocase:n}),this.nocase=n;for(let i=this.cwd;i;i=i.parent)i.nocase=this.nocase}parseRootPath(e){return oc.win32.parse(e).root.toUpperCase()}newRoot(e){return new Vg(this.rootPath,ri,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")||e.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(e)}},sc=class extends Hg{sep="/";constructor(e=process.cwd(),r={}){let{nocase:n=!1}=r;super(e,oc.posix,"/",{...r,nocase:n}),this.nocase=n}parseRootPath(e){return"/"}newRoot(e){return new Wg(this.rootPath,ri,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")}},yu=class extends sc{constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,{...r,nocase:n})}},lVe=process.platform==="win32"?Vg:Wg,C1=process.platform==="win32"?ac:process.platform==="darwin"?yu:sc;var N1=require("url");var zQ=t=>t.length>=1,GQ=t=>t.length>=1,cc=class t{#e;#r;#o;length;#n;#a;#T;#l;#p;#c;#s=!0;constructor(e,r,n,i){if(!zQ(e))throw new TypeError("empty pattern list");if(!GQ(r))throw new TypeError("empty glob list");if(r.length!==e.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=e.length,n<0||n>=this.length)throw new TypeError("index out of range");if(this.#e=e,this.#r=r,this.#o=n,this.#n=i,this.#o===0){if(this.isUNC()){let[o,s,l,u,...p]=this.#e,[d,m,g,x,...v]=this.#r;p[0]===""&&(p.shift(),v.shift());let b=[o,s,l,u,""].join("/"),I=[d,m,g,x,""].join("/");this.#e=[b,...p],this.#r=[I,...v],this.length=this.#e.length}else if(this.isDrive()||this.isAbsolute()){let[o,...s]=this.#e,[l,...u]=this.#r;s[0]===""&&(s.shift(),u.shift());let p=o+"/",d=l+"/";this.#e=[p,...s],this.#r=[d,...u],this.length=this.#e.length}}}pattern(){return this.#e[this.#o]}isString(){return typeof this.#e[this.#o]=="string"}isGlobstar(){return this.#e[this.#o]===Ot}isRegExp(){return this.#e[this.#o]instanceof RegExp}globString(){return this.#T=this.#T||(this.#o===0?this.isAbsolute()?this.#r[0]+this.#r.slice(1).join("/"):this.#r.join("/"):this.#r.slice(this.#o).join("/"))}hasMore(){return this.length>this.#o+1}rest(){return this.#a!==void 0?this.#a:this.hasMore()?(this.#a=new t(this.#e,this.#r,this.#o+1,this.#n),this.#a.#c=this.#c,this.#a.#p=this.#p,this.#a.#l=this.#l,this.#a):this.#a=null}isUNC(){let e=this.#e;return this.#p!==void 0?this.#p:this.#p=this.#n==="win32"&&this.#o===0&&e[0]===""&&e[1]===""&&typeof e[2]=="string"&&!!e[2]&&typeof e[3]=="string"&&!!e[3]}isDrive(){let e=this.#e;return this.#l!==void 0?this.#l:this.#l=this.#n==="win32"&&this.#o===0&&this.length>1&&typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0])}isAbsolute(){let e=this.#e;return this.#c!==void 0?this.#c:this.#c=e[0]===""&&e.length>1||this.isDrive()||this.isUNC()}root(){let e=this.#e[0];return typeof e=="string"&&this.isAbsolute()&&this.#o===0?e:""}checkFollowGlobstar(){return!(this.#o===0||!this.isGlobstar()||!this.#s)}markFollowGlobstar(){return this.#o===0||!this.isGlobstar()||!this.#s?!1:(this.#s=!1,!0)}};var KQ=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",xu=class{relative;relativeChildren;absolute;absoluteChildren;constructor(e,{nobrace:r,nocase:n,noext:i,noglobstar:o,platform:s=KQ}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[];let l={dot:!0,nobrace:r,nocase:n,noext:i,noglobstar:o,optimizationLevel:2,platform:s,nocomment:!0,nonegate:!0};for(let u of e){let p=new $r(u,l);for(let d=0;d<p.set.length;d++){let m=p.set[d],g=p.globParts[d];if(!m||!g)throw new Error("invalid pattern object");let x=new cc(m,g,0,s),v=new $r(x.globString(),l),b=g[g.length-1]==="**",I=x.isAbsolute();I?this.absolute.push(v):this.relative.push(v),b&&(I?this.absoluteChildren.push(v):this.relativeChildren.push(v))}}}ignored(e){let r=e.fullpath(),n=`${r}/`,i=e.relative()||".",o=`${i}/`;for(let s of this.relative)if(s.match(i)||s.match(o))return!0;for(let s of this.absolute)if(s.match(r)||s.match(n))return!0;return!1}childrenIgnored(e){let r=e.fullpath()+"/",n=(e.relative()||".")+"/";for(let i of this.relativeChildren)if(i.match(n))return!0;for(let i of this.absoluteChildren)if(i.match(r))return!0;return!1}};var Iv=class t{store;constructor(e=new Map){this.store=e}copy(){return new t(new Map(this.store))}hasWalked(e,r){return this.store.get(e.fullpath())?.has(r.globString())}storeWalked(e,r){let n=e.fullpath(),i=this.store.get(n);i?i.add(r.globString()):this.store.set(n,new Set([r.globString()]))}},Fv=class{store=new Map;add(e,r,n){let i=(r?2:0)|(n?1:0),o=this.store.get(e);this.store.set(e,o===void 0?i:i&o)}entries(){return[...this.store.entries()].map(([e,r])=>[e,!!(r&2),!!(r&1)])}},Cv=class{store=new Map;add(e,r){if(!e.canReaddir())return;let n=this.store.get(e);n?n.find(i=>i.globString()===r.globString())||n.push(r):this.store.set(e,[r])}get(e){let r=this.store.get(e);if(!r)throw new Error("attempting to walk unknown path");return r}entries(){return this.keys().map(e=>[e,this.store.get(e)])}keys(){return[...this.store.keys()].filter(e=>e.canReaddir())}},Su=class t{hasWalkedCache;matches=new Fv;subwalks=new Cv;patterns;follow;dot;opts;constructor(e,r){this.opts=e,this.follow=!!e.follow,this.dot=!!e.dot,this.hasWalkedCache=r?r.copy():new Iv}processPatterns(e,r){this.patterns=r;let n=r.map(i=>[e,i]);for(let[i,o]of n){this.hasWalkedCache.storeWalked(i,o);let s=o.root(),l=o.isAbsolute()&&this.opts.absolute!==!1;if(s){i=i.resolve(s==="/"&&this.opts.root!==void 0?this.opts.root:s);let m=o.rest();if(m)o=m;else{this.matches.add(i,!0,!1);continue}}if(i.isENOENT())continue;let u,p,d=!1;for(;typeof(u=o.pattern())=="string"&&(p=o.rest());)i=i.resolve(u),o=p,d=!0;if(u=o.pattern(),p=o.rest(),d){if(this.hasWalkedCache.hasWalked(i,o))continue;this.hasWalkedCache.storeWalked(i,o)}if(typeof u=="string"){let m=u===".."||u===""||u===".";this.matches.add(i.resolve(u),l,m);continue}else if(u===Ot){(!i.isSymbolicLink()||this.follow||o.checkFollowGlobstar())&&this.subwalks.add(i,o);let m=p?.pattern(),g=p?.rest();if(!p||(m===""||m===".")&&!g)this.matches.add(i,l,m===""||m===".");else if(m===".."){let x=i.parent||i;g?this.hasWalkedCache.hasWalked(x,g)||this.subwalks.add(x,g):this.matches.add(x,l,!0)}}else u instanceof RegExp&&this.subwalks.add(i,o)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new t(this.opts,this.hasWalkedCache)}filterEntries(e,r){let n=this.subwalks.get(e),i=this.child();for(let o of r)for(let s of n){let l=s.isAbsolute(),u=s.pattern(),p=s.rest();u===Ot?i.testGlobstar(o,s,p,l):u instanceof RegExp?i.testRegExp(o,u,p,l):i.testString(o,u,p,l)}return i}testGlobstar(e,r,n,i){if((this.dot||!e.name.startsWith("."))&&(r.hasMore()||this.matches.add(e,i,!1),e.canReaddir()&&(this.follow||!e.isSymbolicLink()?this.subwalks.add(e,r):e.isSymbolicLink()&&(n&&r.checkFollowGlobstar()?this.subwalks.add(e,n):r.markFollowGlobstar()&&this.subwalks.add(e,r)))),n){let o=n.pattern();if(typeof o=="string"&&o!==".."&&o!==""&&o!==".")this.testString(e,o,n.rest(),i);else if(o===".."){let s=e.parent||e;this.subwalks.add(s,n)}else o instanceof RegExp&&this.testRegExp(e,o,n.rest(),i)}}testRegExp(e,r,n,i){r.test(e.name)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}testString(e,r,n,i){e.isNamed(r)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}};var ZQ=(t,e)=>typeof t=="string"?new xu([t],e):Array.isArray(t)?new xu(t,e):t,$g=class{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#e=[];#r;#o;signal;maxDepth;constructor(e,r,n){this.patterns=e,this.path=r,this.opts=n,this.#o=!n.posix&&n.platform==="win32"?"\\":"/",n.ignore&&(this.#r=ZQ(n.ignore,n)),this.maxDepth=n.maxDepth||1/0,n.signal&&(this.signal=n.signal,this.signal.addEventListener("abort",()=>{this.#e.length=0}))}#n(e){return this.seen.has(e)||!!this.#r?.ignored?.(e)}#a(e){return!!this.#r?.childrenIgnored?.(e)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;this.paused=!1;let e;for(;!this.paused&&(e=this.#e.shift());)e()}onResume(e){this.signal?.aborted||(this.paused?this.#e.push(e):e())}async matchCheck(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||await e.realpath(),!n)return;e=n}let i=e.isUnknown()||this.opts.stat;return this.matchCheckTest(i?await e.lstat():e,r)}matchCheckTest(e,r){return e&&(this.maxDepth===1/0||e.depth()<=this.maxDepth)&&(!r||e.canReaddir())&&(!this.opts.nodir||!e.isDirectory())&&!this.#n(e)?e:void 0}matchCheckSync(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||e.realpathSync(),!n)return;e=n}let i=e.isUnknown()||this.opts.stat;return this.matchCheckTest(i?e.lstatSync():e,r)}matchFinish(e,r){if(this.#n(e))return;let n=this.opts.absolute===void 0?r:this.opts.absolute;this.seen.add(e);let i=this.opts.mark&&e.isDirectory()?this.#o:"";if(this.opts.withFileTypes)this.matchEmit(e);else if(n){let o=this.opts.posix?e.fullpathPosix():e.fullpath();this.matchEmit(o+i)}else{let o=this.opts.posix?e.relativePosix():e.relative(),s=this.opts.dotRelative&&!o.startsWith(".."+this.#o)?"."+this.#o:"";this.matchEmit(o?s+o+i:"."+i)}}async match(e,r,n){let i=await this.matchCheck(e,n);i&&this.matchFinish(i,r)}matchSync(e,r,n){let i=this.matchCheckSync(e,n);i&&this.matchFinish(i,r)}walkCB(e,r,n){this.signal?.aborted&&n(),this.walkCB2(e,r,new Su(this.opts),n)}walkCB2(e,r,n,i){if(this.#a(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2(e,r,n,i));return}n.processPatterns(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,u,p]of n.matches.entries())this.#n(l)||(o++,this.match(l,u,p).then(()=>s()));for(let l of n.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;o++;let u=l.readdirCached();l.calledReaddir()?this.walkCB3(l,u,n,s):l.readdirCB((p,d)=>this.walkCB3(l,d,n,s),!0)}s()}walkCB3(e,r,n,i){n=n.filterEntries(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,u,p]of n.matches.entries())this.#n(l)||(o++,this.match(l,u,p).then(()=>s()));for(let[l,u]of n.subwalks.entries())o++,this.walkCB2(l,u,n.child(),s);s()}walkCBSync(e,r,n){this.signal?.aborted&&n(),this.walkCB2Sync(e,r,new Su(this.opts),n)}walkCB2Sync(e,r,n,i){if(this.#a(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2Sync(e,r,n,i));return}n.processPatterns(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,u,p]of n.matches.entries())this.#n(l)||this.matchSync(l,u,p);for(let l of n.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;o++;let u=l.readdirSync();this.walkCB3Sync(l,u,n,s)}s()}walkCB3Sync(e,r,n,i){n=n.filterEntries(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,u,p]of n.matches.entries())this.#n(l)||this.matchSync(l,u,p);for(let[l,u]of n.subwalks.entries())o++,this.walkCB2Sync(l,u,n.child(),s);s()}},Tu=class extends $g{matches;constructor(e,r,n){super(e,r,n),this.matches=new Set}matchEmit(e){this.matches.add(e)}async walk(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise((e,r)=>{this.walkCB(this.path,this.patterns,()=>{this.signal?.aborted?r(this.signal.reason):e(this.matches)})}),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>{if(this.signal?.aborted)throw this.signal.reason}),this.matches}},vu=class extends $g{results;constructor(e,r,n){super(e,r,n),this.results=new xo({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(e){this.results.write(e),this.results.flowing||this.pause()}stream(){let e=this.path;return e.isUnknown()?e.lstat().then(()=>{this.walkCB(e,this.patterns,()=>this.results.end())}):this.walkCB(e,this.patterns,()=>this.results.end()),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}};var QQ=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",On=class{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;opts;patterns;constructor(e,r){if(!r)throw new TypeError("glob options required");if(this.withFileTypes=!!r.withFileTypes,this.signal=r.signal,this.follow=!!r.follow,this.dot=!!r.dot,this.dotRelative=!!r.dotRelative,this.nodir=!!r.nodir,this.mark=!!r.mark,r.cwd?(r.cwd instanceof URL||r.cwd.startsWith("file://"))&&(r.cwd=(0,N1.fileURLToPath)(r.cwd)):this.cwd="",this.cwd=r.cwd||"",this.root=r.root,this.magicalBraces=!!r.magicalBraces,this.nobrace=!!r.nobrace,this.noext=!!r.noext,this.realpath=!!r.realpath,this.absolute=r.absolute,this.noglobstar=!!r.noglobstar,this.matchBase=!!r.matchBase,this.maxDepth=typeof r.maxDepth=="number"?r.maxDepth:1/0,this.stat=!!r.stat,this.ignore=r.ignore,this.withFileTypes&&this.absolute!==void 0)throw new Error("cannot set absolute and withFileTypes:true");if(typeof e=="string"&&(e=[e]),this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(e=e.map(u=>u.replace(/\\/g,"/"))),this.matchBase){if(r.noglobstar)throw new TypeError("base matching requires globstar");e=e.map(u=>u.includes("/")?u:`./**/${u}`)}if(this.pattern=e,this.platform=r.platform||QQ,this.opts={...r,platform:this.platform},r.scurry){if(this.scurry=r.scurry,r.nocase!==void 0&&r.nocase!==r.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{let u=r.platform==="win32"?ac:r.platform==="darwin"?yu:r.platform?sc:C1;this.scurry=new u(this.cwd,{nocase:r.nocase,fs:r.fs})}this.nocase=this.scurry.nocase;let n=this.platform==="darwin"||this.platform==="win32",i={...r,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:n,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},o=this.pattern.map(u=>new $r(u,i)),[s,l]=o.reduce((u,p)=>(u[0].push(...p.set),u[1].push(...p.globParts),u),[[],[]]);this.patterns=s.map((u,p)=>{let d=l[p];if(!d)throw new Error("invalid pattern object");return new cc(u,d,0,this.platform)})}async walk(){return[...await new Tu(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase}).walk()]}walkSync(){return[...new Tu(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase}).walkSync()]}stream(){return new vu(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase}).stream()}streamSync(){return new vu(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}};var Nv=(t,e={})=>{Array.isArray(t)||(t=[t]);for(let r of t)if(new $r(r,e).hasMagic())return!0;return!1};function jg(t,e={}){return new On(t,e).streamSync()}function L1(t,e={}){return new On(t,e).stream()}function U1(t,e={}){return new On(t,e).walkSync()}async function O1(t,e={}){return new On(t,e).walk()}function qg(t,e={}){return new On(t,e).iterateSync()}function B1(t,e={}){return new On(t,e).iterate()}var YQ=jg,XQ=Object.assign(L1,{sync:jg}),JQ=qg,eY=Object.assign(B1,{sync:qg}),tY=Object.assign(U1,{stream:jg,iterate:qg}),Ov=Object.assign(O1,{glob:O1,globSync:U1,sync:tY,globStream:L1,stream:XQ,globStreamSync:jg,streamSync:YQ,globIterate:B1,iterate:eY,globIterateSync:qg,iterateSync:JQ,Glob:On,hasMagic:Nv,escape:ec,unescape:Fn});Ov.glob=Ov;function V1(){let t=process.env.CURSORLESS_MODE;switch(t){case void 0:case"production":return"production";case"development":return"development";case"test":return"test";default:throw new Error(`Unexpected value for environment variable CURSORLESS_MODE: ${t}`)}}var Q1=Object.defineProperty,iY=Object.getOwnPropertyNames,C=(t,e)=>Q1(t,"name",{value:e,configurable:!0}),oY=(t,e)=>function(){return e||(0,t[iY(t)[0]])((e={exports:{}}).exports,e),e.exports},Jv=(t,e)=>{for(var r in e)Q1(t,r,{get:e[r],enumerable:!0})},aY=oY({"(disabled):util"(){}}),zg={};Jv(zg,{addChainableMethod:()=>pb,addLengthGuard:()=>Ru,addMethod:()=>cb,addProperty:()=>sb,checkError:()=>qr,compareByInspect:()=>Qg,eql:()=>bF,expectTypes:()=>nF,flag:()=>Ee,getActual:()=>Jg,getMessage:()=>rb,getName:()=>ty,getOperator:()=>hb,getOwnEnumerableProperties:()=>mb,getOwnEnumerablePropertySymbols:()=>db,getPathInfo:()=>ab,hasProperty:()=>ey,inspect:()=>Ce,isNaN:()=>Yg,isProxyEnabled:()=>Eu,objDisplay:()=>ya,overwriteChainableMethod:()=>fb,overwriteMethod:()=>ub,overwriteProperty:()=>lb,proxify:()=>fc,test:()=>eb,transferFlags:()=>Ln,type:()=>Qe});var qr={};Jv(qr,{compatibleConstructor:()=>X1,compatibleInstance:()=>Y1,compatibleMessage:()=>J1,getConstructorName:()=>eF,getMessage:()=>tF});function Y1(t,e){return e instanceof Error&&t===e}C(Y1,"compatibleInstance");function X1(t,e){return e instanceof Error?t.constructor===e.constructor||t instanceof e.constructor:e.prototype instanceof Error||e===Error?t.constructor===e||t instanceof e:!1}C(X1,"compatibleConstructor");function J1(t,e){let r=typeof t=="string"?t:t.message;return e instanceof RegExp?e.test(r):typeof e=="string"?r.indexOf(e)!==-1:!1}C(J1,"compatibleMessage");function eF(t){let e=t;return t instanceof Error?e=t.constructor.name:typeof t=="function"&&(e=t.name,e===""&&(e=new t().name||e)),e}C(eF,"getConstructorName");function tF(t){let e="";return t&&t.message?e=t.message:typeof t=="string"&&(e=t),e}C(tF,"getMessage");function Ee(t,e,r){var n=t.__flags||(t.__flags=Object.create(null));if(arguments.length===3)n[e]=r;else return n[e]}C(Ee,"flag");function eb(t,e){var r=Ee(t,"negate"),n=e[0];return r?!n:n}C(eb,"test");function Qe(t){if(typeof t>"u")return"undefined";if(t===null)return"null";let e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}C(Qe,"type");var sY="captureStackTrace"in Error,qe=class rF extends Error{static{C(this,"AssertionError")}message;get name(){return"AssertionError"}get ok(){return!1}constructor(e="Unspecified AssertionError",r,n){super(e),this.message=e,sY&&Error.captureStackTrace(this,n||rF);for(let i in r)i in this||(this[i]=r[i])}toJSON(e){return{...this,name:this.name,message:this.message,ok:!1,stack:e!==!1?this.stack:void 0}}};function nF(t,e){var r=Ee(t,"message"),n=Ee(t,"ssfi");r=r?r+": ":"",t=Ee(t,"object"),e=e.map(function(s){return s.toLowerCase()}),e.sort();var i=e.map(function(s,l){var u=~["a","e","i","o","u"].indexOf(s.charAt(0))?"an":"a",p=e.length>1&&l===e.length-1?"or ":"";return p+u+" "+s}).join(", "),o=Qe(t).toLowerCase();if(!e.some(function(s){return o===s}))throw new qe(r+"object tested must be "+i+", but "+o+" given",void 0,n)}C(nF,"expectTypes");function Jg(t,e){return e.length>4?e[4]:t._obj}C(Jg,"getActual");var W1={bold:["1","22"],dim:["2","22"],italic:["3","23"],underline:["4","24"],inverse:["7","27"],hidden:["8","28"],strike:["9","29"],black:["30","39"],red:["31","39"],green:["32","39"],yellow:["33","39"],blue:["34","39"],magenta:["35","39"],cyan:["36","39"],white:["37","39"],brightblack:["30;1","39"],brightred:["31;1","39"],brightgreen:["32;1","39"],brightyellow:["33;1","39"],brightblue:["34;1","39"],brightmagenta:["35;1","39"],brightcyan:["36;1","39"],brightwhite:["37;1","39"],grey:["90","39"]},cY={special:"cyan",number:"yellow",bigint:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",symbol:"green",date:"magenta",regexp:"red"},uc="\u2026";function iF(t,e){let r=W1[cY[e]]||W1[e]||"";return r?`\x1B[${r[0]}m${String(t)}\x1B[${r[1]}m`:String(t)}C(iF,"colorise");function oF({showHidden:t=!1,depth:e=2,colors:r=!1,customInspect:n=!0,showProxy:i=!1,maxArrayLength:o=1/0,breakLength:s=1/0,seen:l=[],truncate:u=1/0,stylize:p=String}={},d){let m={showHidden:!!t,depth:Number(e),colors:!!r,customInspect:!!n,showProxy:!!i,maxArrayLength:Number(o),breakLength:Number(s),truncate:Number(u),seen:l,inspect:d,stylize:p};return m.colors&&(m.stylize=iF),m}C(oF,"normaliseOptions");function Ci(t,e,r=uc){t=String(t);let n=r.length,i=t.length;return n>e&&i>n?r:i>e&&i>n?`${t.slice(0,e-n)}${r}`:t}C(Ci,"truncate");function gn(t,e,r,n=", "){r=r||e.inspect;let i=t.length;if(i===0)return"";let o=e.truncate,s="",l="",u="";for(let p=0;p<i;p+=1){let d=p+1===t.length,m=p+2===t.length;u=`${uc}(${t.length-p})`;let g=t[p];e.truncate=o-s.length-(d?0:n.length);let x=l||r(g,e)+(d?"":n),v=s.length+x.length,b=v+u.length;if(d&&v>o&&s.length+u.length<=o||!d&&!m&&b>o||(l=d?"":r(t[p+1],e)+(m?"":n),!d&&m&&b>o&&v+l.length>o))break;if(s+=x,!d&&!m&&v+l.length>=o){u=`${uc}(${t.length-p-1})`;break}u=""}return`${s}${u}`}C(gn,"inspectList");function aF(t){return t.match(/^[a-zA-Z_][a-zA-Z_0-9]*$/)?t:JSON.stringify(t).replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'")}C(aF,"quoteComplexKey");function pc([t,e],r){return r.truncate-=2,typeof t=="string"?t=aF(t):typeof t!="number"&&(t=`[${r.inspect(t,r)}]`),r.truncate-=t.length,e=r.inspect(e,r),`${t}: ${e}`}C(pc,"inspectProperty");function sF(t,e){let r=Object.keys(t).slice(t.length);if(!t.length&&!r.length)return"[]";e.truncate-=4;let n=gn(t,e);e.truncate-=n.length;let i="";return r.length&&(i=gn(r.map(o=>[o,t[o]]),e,pc)),`[ ${n}${i?`, ${i}`:""} ]`}C(sF,"inspectArray");var lY=C(t=>typeof Buffer=="function"&&t instanceof Buffer?"Buffer":t[Symbol.toStringTag]?t[Symbol.toStringTag]:t.constructor.name,"getArrayName");function ii(t,e){let r=lY(t);e.truncate-=r.length+4;let n=Object.keys(t).slice(t.length);if(!t.length&&!n.length)return`${r}[]`;let i="";for(let s=0;s<t.length;s++){let l=`${e.stylize(Ci(t[s],e.truncate),"number")}${s===t.length-1?"":", "}`;if(e.truncate-=l.length,t[s]!==t.length&&e.truncate<=3){i+=`${uc}(${t.length-t[s]+1})`;break}i+=l}let o="";return n.length&&(o=gn(n.map(s=>[s,t[s]]),e,pc)),`${r}[ ${i}${o?`, ${o}`:""} ]`}C(ii,"inspectTypedArray");function cF(t,e){let r=t.toJSON();if(r===null)return"Invalid Date";let n=r.split("T"),i=n[0];return e.stylize(`${i}T${Ci(n[1],e.truncate-i.length-1)}`,"date")}C(cF,"inspectDate");function Bv(t,e){let r=t[Symbol.toStringTag]||"Function",n=t.name;return n?e.stylize(`[${r} ${Ci(n,e.truncate-11)}]`,"special"):e.stylize(`[${r}]`,"special")}C(Bv,"inspectFunction");function lF([t,e],r){return r.truncate-=4,t=r.inspect(t,r),r.truncate-=t.length,e=r.inspect(e,r),`${t} => ${e}`}C(lF,"inspectMapEntry");function uF(t){let e=[];return t.forEach((r,n)=>{e.push([n,r])}),e}C(uF,"mapToEntries");function pF(t,e){return t.size-1<=0?"Map{}":(e.truncate-=7,`Map{ ${gn(uF(t),e,lF)} }`)}C(pF,"inspectMap");var uY=Number.isNaN||(t=>t!==t);function Vv(t,e){return uY(t)?e.stylize("NaN","number"):t===1/0?e.stylize("Infinity","number"):t===-1/0?e.stylize("-Infinity","number"):t===0?e.stylize(1/t===1/0?"+0":"-0","number"):e.stylize(Ci(String(t),e.truncate),"number")}C(Vv,"inspectNumber");function Wv(t,e){let r=Ci(t.toString(),e.truncate-1);return r!==uc&&(r+="n"),e.stylize(r,"bigint")}C(Wv,"inspectBigInt");function fF(t,e){let r=t.toString().split("/")[2],n=e.truncate-(2+r.length),i=t.source;return e.stylize(`/${Ci(i,n)}/${r}`,"regexp")}C(fF,"inspectRegExp");function dF(t){let e=[];return t.forEach(r=>{e.push(r)}),e}C(dF,"arrayFromSet");function mF(t,e){return t.size===0?"Set{}":(e.truncate-=7,`Set{ ${gn(dF(t),e)} }`)}C(mF,"inspectSet");var H1=new RegExp("['\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]","g"),pY={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"},fY=16,dY=4;function hF(t){return pY[t]||`\\u${`0000${t.charCodeAt(0).toString(fY)}`.slice(-dY)}`}C(hF,"escape");function Hv(t,e){return H1.test(t)&&(t=t.replace(H1,hF)),e.stylize(`'${Ci(t,e.truncate-2)}'`,"string")}C(Hv,"inspectString");function $v(t){return"description"in Symbol.prototype?t.description?`Symbol(${t.description})`:"Symbol()":t.toString()}C($v,"inspectSymbol");var gF=C(()=>"Promise{\u2026}","getPromiseValue");try{let{getPromiseDetails:t,kPending:e,kRejected:r}=process.binding("util");Array.isArray(t(Promise.resolve()))&&(gF=C((n,i)=>{let[o,s]=t(n);return o===e?"Promise{<pending>}":`Promise${o===r?"!":""}{${i.inspect(s,i)}}`},"getPromiseValue"))}catch{}var mY=gF;function wu(t,e){let r=Object.getOwnPropertyNames(t),n=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[];if(r.length===0&&n.length===0)return"{}";if(e.truncate-=4,e.seen=e.seen||[],e.seen.indexOf(t)>=0)return"[Circular]";e.seen.push(t);let i=gn(r.map(l=>[l,t[l]]),e,pc),o=gn(n.map(l=>[l,t[l]]),e,pc);e.seen.pop();let s="";return i&&o&&(s=", "),`{ ${i}${s}${o} }`}C(wu,"inspectObject");var Lv=typeof Symbol<"u"&&Symbol.toStringTag?Symbol.toStringTag:!1;function yF(t,e){let r="";return Lv&&Lv in t&&(r=t[Lv]),r=r||t.constructor.name,(!r||r==="_class")&&(r="<Anonymous Class>"),e.truncate-=r.length,`${r}${wu(t,e)}`}C(yF,"inspectClass");function xF(t,e){return t.length===0?"Arguments[]":(e.truncate-=13,`Arguments[ ${gn(t,e)} ]`)}C(xF,"inspectArguments");var hY=["stack","line","column","name","message","fileName","lineNumber","columnNumber","number","description"];function SF(t,e){let r=Object.getOwnPropertyNames(t).filter(s=>hY.indexOf(s)===-1),n=t.name;e.truncate-=n.length;let i="";typeof t.message=="string"?i=Ci(t.message,e.truncate):r.unshift("message"),i=i?`: ${i}`:"",e.truncate-=i.length+5;let o=gn(r.map(s=>[s,t[s]]),e,pc);return`${n}${i}${o?` { ${o} }`:""}`}C(SF,"inspectObject");function TF([t,e],r){return r.truncate-=3,e?`${r.stylize(String(t),"yellow")}=${r.stylize(`"${e}"`,"string")}`:`${r.stylize(String(t),"yellow")}`}C(TF,"inspectAttribute");function Gg(t,e){return gn(t,e,tb,`
`)}C(Gg,"inspectHTMLCollection");function tb(t,e){let r=t.getAttributeNames(),n=t.tagName.toLowerCase(),i=e.stylize(`<${n}`,"special"),o=e.stylize(">","special"),s=e.stylize(`</${n}>`,"special");e.truncate-=n.length*2+5;let l="";r.length>0&&(l+=" ",l+=gn(r.map(d=>[d,t.getAttribute(d)]),e,TF," ")),e.truncate-=l.length;let u=e.truncate,p=Gg(t.children,e);return p&&p.length>u&&(p=`${uc}(${t.children.length})`),`${i}${l}${o}${p}${s}`}C(tb,"inspectHTML");var gY=typeof Symbol=="function"&&typeof Symbol.for=="function",Uv=gY?Symbol.for("chai/inspect"):"@@chai/inspect",lc=!1;try{let t=aY();lc=t.inspect?t.inspect.custom:!1}catch{lc=!1}var $1=new WeakMap,j1={},q1={undefined:(t,e)=>e.stylize("undefined","undefined"),null:(t,e)=>e.stylize("null","null"),boolean:(t,e)=>e.stylize(String(t),"boolean"),Boolean:(t,e)=>e.stylize(String(t),"boolean"),number:Vv,Number:Vv,bigint:Wv,BigInt:Wv,string:Hv,String:Hv,function:Bv,Function:Bv,symbol:$v,Symbol:$v,Array:sF,Date:cF,Map:pF,Set:mF,RegExp:fF,Promise:mY,WeakSet:(t,e)=>e.stylize("WeakSet{\u2026}","special"),WeakMap:(t,e)=>e.stylize("WeakMap{\u2026}","special"),Arguments:xF,Int8Array:ii,Uint8Array:ii,Uint8ClampedArray:ii,Int16Array:ii,Uint16Array:ii,Int32Array:ii,Uint32Array:ii,Float32Array:ii,Float64Array:ii,Generator:()=>"",DataView:()=>"",ArrayBuffer:()=>"",Error:SF,HTMLCollection:Gg,NodeList:Gg},yY=C((t,e,r)=>Uv in t&&typeof t[Uv]=="function"?t[Uv](e):lc&&lc in t&&typeof t[lc]=="function"?t[lc](e.depth,e):"inspect"in t&&typeof t.inspect=="function"?t.inspect(e.depth,e):"constructor"in t&&$1.has(t.constructor)?$1.get(t.constructor)(t,e):j1[r]?j1[r](t,e):"","inspectCustom"),xY=Object.prototype.toString;function Kg(t,e={}){let r=oF(e,Kg),{customInspect:n}=r,i=t===null?"null":typeof t;if(i==="object"&&(i=xY.call(t).slice(8,-1)),i in q1)return q1[i](t,r);if(n&&t){let s=yY(t,r,i);if(s)return typeof s=="string"?s:Kg(s,r)}let o=t?Object.getPrototypeOf(t):!1;return o===Object.prototype||o===null?wu(t,r):t&&typeof HTMLElement=="function"&&t instanceof HTMLElement?tb(t,r):"constructor"in t?t.constructor!==Object?yF(t,r):wu(t,r):t===Object(t)?wu(t,r):r.stylize(String(t),i)}C(Kg,"inspect");var Rr={includeStack:!1,showDiff:!0,truncateThreshold:40,useProxy:!0,proxyExcludedKeys:["then","catch","inspect","toJSON"],deepEqual:null};function Ce(t,e,r,n){var i={colors:n,depth:typeof r>"u"?2:r,showHidden:e,truncate:Rr.truncateThreshold?Rr.truncateThreshold:1/0};return Kg(t,i)}C(Ce,"inspect");function ya(t){var e=Ce(t),r=Object.prototype.toString.call(t);if(Rr.truncateThreshold&&e.length>=Rr.truncateThreshold){if(r==="[object Function]")return!t.name||t.name===""?"[Function]":"[Function: "+t.name+"]";if(r==="[object Array]")return"[ Array("+t.length+") ]";if(r==="[object Object]"){var n=Object.keys(t),i=n.length>2?n.splice(0,2).join(", ")+", ...":n.join(", ");return"{ Object ("+i+") }"}else return e}else return e}C(ya,"objDisplay");function rb(t,e){var r=Ee(t,"negate"),n=Ee(t,"object"),i=e[3],o=Jg(t,e),s=r?e[2]:e[1],l=Ee(t,"message");return typeof s=="function"&&(s=s()),s=s||"",s=s.replace(/#\{this\}/g,function(){return ya(n)}).replace(/#\{act\}/g,function(){return ya(o)}).replace(/#\{exp\}/g,function(){return ya(i)}),l?l+": "+s:s}C(rb,"getMessage");function Ln(t,e,r){var n=t.__flags||(t.__flags=Object.create(null));e.__flags||(e.__flags=Object.create(null)),r=arguments.length===3?r:!0;for(var i in n)(r||i!=="object"&&i!=="ssfi"&&i!=="lockSsfi"&&i!="message")&&(e.__flags[i]=n[i])}C(Ln,"transferFlags");function jv(t){if(typeof t>"u")return"undefined";if(t===null)return"null";let e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}C(jv,"type");function nb(){this._key="chai/deep-eql__"+Math.random()+Date.now()}C(nb,"FakeMap");nb.prototype={get:C(function(e){return e[this._key]},"get"),set:C(function(e,r){Object.isExtensible(e)&&Object.defineProperty(e,this._key,{value:r,configurable:!0})},"set")};var vF=typeof WeakMap=="function"?WeakMap:nb;function qv(t,e,r){if(!r||xa(t)||xa(e))return null;var n=r.get(t);if(n){var i=n.get(e);if(typeof i=="boolean")return i}return null}C(qv,"memoizeCompare");function bu(t,e,r,n){if(!(!r||xa(t)||xa(e))){var i=r.get(t);i?i.set(e,n):(i=new vF,i.set(e,n),r.set(t,i))}}C(bu,"memoizeSet");var bF=_u;function _u(t,e,r){if(r&&r.comparator)return zv(t,e,r);var n=ib(t,e);return n!==null?n:zv(t,e,r)}C(_u,"deepEqual");function ib(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e?!0:xa(t)||xa(e)?!1:null}C(ib,"simpleEqual");function zv(t,e,r){r=r||{},r.memoize=r.memoize===!1?!1:r.memoize||new vF;var n=r&&r.comparator,i=qv(t,e,r.memoize);if(i!==null)return i;var o=qv(e,t,r.memoize);if(o!==null)return o;if(n){var s=n(t,e);if(s===!1||s===!0)return bu(t,e,r.memoize,s),s;var l=ib(t,e);if(l!==null)return l}var u=jv(t);if(u!==jv(e))return bu(t,e,r.memoize,!1),!1;bu(t,e,r.memoize,!0);var p=wF(t,e,u,r);return bu(t,e,r.memoize,p),p}C(zv,"extensiveDeepEqual");function wF(t,e,r,n){switch(r){case"String":case"Number":case"Boolean":case"Date":return _u(t.valueOf(),e.valueOf());case"Promise":case"Symbol":case"function":case"WeakMap":case"WeakSet":return t===e;case"Error":return ob(t,e,["name","message","code"],n);case"Arguments":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"Array":return To(t,e,n);case"RegExp":return _F(t,e);case"Generator":return EF(t,e,n);case"DataView":return To(new Uint8Array(t.buffer),new Uint8Array(e.buffer),n);case"ArrayBuffer":return To(new Uint8Array(t),new Uint8Array(e),n);case"Set":return Gv(t,e,n);case"Map":return Gv(t,e,n);case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.Instant":case"Temporal.ZonedDateTime":case"Temporal.PlainYearMonth":case"Temporal.PlainMonthDay":return t.equals(e);case"Temporal.Duration":return t.total("nanoseconds")===e.total("nanoseconds");case"Temporal.TimeZone":case"Temporal.Calendar":return t.toString()===e.toString();default:return kF(t,e,n)}}C(wF,"extensiveDeepEqualByType");function _F(t,e){return t.toString()===e.toString()}C(_F,"regexpEqual");function Gv(t,e,r){if(t.size!==e.size)return!1;if(t.size===0)return!0;var n=[],i=[];return t.forEach(C(function(s,l){n.push([s,l])},"gatherEntries")),e.forEach(C(function(s,l){i.push([s,l])},"gatherEntries")),To(n.sort(),i.sort(),r)}C(Gv,"entriesEqual");function To(t,e,r){var n=t.length;if(n!==e.length)return!1;if(n===0)return!0;for(var i=-1;++i<n;)if(_u(t[i],e[i],r)===!1)return!1;return!0}C(To,"iterableEqual");function EF(t,e,r){return To(Zg(t),Zg(e),r)}C(EF,"generatorEqual");function RF(t){return typeof Symbol<"u"&&typeof t=="object"&&typeof Symbol.iterator<"u"&&typeof t[Symbol.iterator]=="function"}C(RF,"hasIteratorFunction");function Kv(t){if(RF(t))try{return Zg(t[Symbol.iterator]())}catch{return[]}return[]}C(Kv,"getIteratorEntries");function Zg(t){for(var e=t.next(),r=[e.value];e.done===!1;)e=t.next(),r.push(e.value);return r}C(Zg,"getGeneratorEntries");function Zv(t){var e=[];for(var r in t)e.push(r);return e}C(Zv,"getEnumerableKeys");function Qv(t){for(var e=[],r=Object.getOwnPropertySymbols(t),n=0;n<r.length;n+=1){var i=r[n];Object.getOwnPropertyDescriptor(t,i).enumerable&&e.push(i)}return e}C(Qv,"getEnumerableSymbols");function ob(t,e,r,n){var i=r.length;if(i===0)return!0;for(var o=0;o<i;o+=1)if(_u(t[r[o]],e[r[o]],n)===!1)return!1;return!0}C(ob,"keysEqual");function kF(t,e,r){var n=Zv(t),i=Zv(e),o=Qv(t),s=Qv(e);if(n=n.concat(o),i=i.concat(s),n.length&&n.length===i.length)return To(Yv(n).sort(),Yv(i).sort())===!1?!1:ob(t,e,n,r);var l=Kv(t),u=Kv(e);return l.length&&l.length===u.length?(l.sort(),u.sort(),To(l,u,r)):n.length===0&&l.length===0&&i.length===0&&u.length===0}C(kF,"objectEqual");function xa(t){return t===null||typeof t!="object"}C(xa,"isPrimitive");function Yv(t){return t.map(C(function(r){return typeof r=="symbol"?r.toString():r},"mapSymbol"))}C(Yv,"mapSymbols");function ey(t,e){return typeof t>"u"||t===null?!1:e in Object(t)}C(ey,"hasProperty");function PF(t){return t.replace(/([^\\])\[/g,"$1.[").match(/(\\\.|[^.]+?)+/g).map(n=>{if(n==="constructor"||n==="__proto__"||n==="prototype")return{};let o=/^\[(\d+)\]$/.exec(n),s=null;return o?s={i:parseFloat(o[1])}:s={p:n.replace(/\\([.[\]])/g,"$1")},s})}C(PF,"parsePath");function Xv(t,e,r){let n=t,i=null;r=typeof r>"u"?e.length:r;for(let o=0;o<r;o++){let s=e[o];n&&(typeof s.p>"u"?n=n[s.i]:n=n[s.p],o===r-1&&(i=n))}return i}C(Xv,"internalGetPathValue");function ab(t,e){let r=PF(e),n=r[r.length-1],i={parent:r.length>1?Xv(t,r,r.length-1):t,name:n.p||n.i,value:Xv(t,r)};return i.exists=ey(i.parent,i.name),i}C(ab,"getPathInfo");function _(t,e,r,n){return Ee(this,"ssfi",r||_),Ee(this,"lockSsfi",n),Ee(this,"object",t),Ee(this,"message",e),Ee(this,"eql",Rr.deepEqual||bF),fc(this)}C(_,"Assertion");Object.defineProperty(_,"includeStack",{get:function(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),Rr.includeStack},set:function(t){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),Rr.includeStack=t}});Object.defineProperty(_,"showDiff",{get:function(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),Rr.showDiff},set:function(t){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),Rr.showDiff=t}});_.addProperty=function(t,e){sb(this.prototype,t,e)};_.addMethod=function(t,e){cb(this.prototype,t,e)};_.addChainableMethod=function(t,e,r){pb(this.prototype,t,e,r)};_.overwriteProperty=function(t,e){lb(this.prototype,t,e)};_.overwriteMethod=function(t,e){ub(this.prototype,t,e)};_.overwriteChainableMethod=function(t,e,r){fb(this.prototype,t,e,r)};_.prototype.assert=function(t,e,r,n,i,o){var s=eb(this,arguments);if(o!==!1&&(o=!0),n===void 0&&i===void 0&&(o=!1),Rr.showDiff!==!0&&(o=!1),!s){e=rb(this,arguments);var l=Jg(this,arguments),u={actual:l,expected:n,showDiff:o},p=hb(this,arguments);throw p&&(u.operator=p),new qe(e,u,Rr.includeStack?this.assert:Ee(this,"ssfi"))}};Object.defineProperty(_.prototype,"_obj",{get:function(){return Ee(this,"object")},set:function(t){Ee(this,"object",t)}});function Eu(){return Rr.useProxy&&typeof Proxy<"u"&&typeof Reflect<"u"}C(Eu,"isProxyEnabled");function sb(t,e,r){r=r===void 0?function(){}:r,Object.defineProperty(t,e,{get:C(function n(){!Eu()&&!Ee(this,"lockSsfi")&&Ee(this,"ssfi",n);var i=r.call(this);if(i!==void 0)return i;var o=new _;return Ln(this,o),o},"propertyGetter"),configurable:!0})}C(sb,"addProperty");var SY=Object.getOwnPropertyDescriptor(function(){},"length");function Ru(t,e,r){return SY.configurable&&Object.defineProperty(t,"length",{get:function(){throw Error(r?"Invalid Chai property: "+e+'.length. Due to a compatibility issue, "length" cannot directly follow "'+e+'". Use "'+e+'.lengthOf" instead.':"Invalid Chai property: "+e+'.length. See docs for proper usage of "'+e+'".')}}),t}C(Ru,"addLengthGuard");function MF(t){var e=Object.getOwnPropertyNames(t);function r(i){e.indexOf(i)===-1&&e.push(i)}C(r,"addProperty");for(var n=Object.getPrototypeOf(t);n!==null;)Object.getOwnPropertyNames(n).forEach(r),n=Object.getPrototypeOf(n);return e}C(MF,"getProperties");var z1=["__flags","__methods","_obj","assert"];function fc(t,e){return Eu()?new Proxy(t,{get:C(function r(n,i){if(typeof i=="string"&&Rr.proxyExcludedKeys.indexOf(i)===-1&&!Reflect.has(n,i)){if(e)throw Error("Invalid Chai property: "+e+"."+i+'. See docs for proper usage of "'+e+'".');var o=null,s=4;throw MF(n).forEach(function(l){if(!Object.prototype.hasOwnProperty(l)&&z1.indexOf(l)===-1){var u=AF(i,l,s);u<s&&(o=l,s=u)}}),Error(o!==null?"Invalid Chai property: "+i+'. Did you mean "'+o+'"?':"Invalid Chai property: "+i)}return z1.indexOf(i)===-1&&!Ee(n,"lockSsfi")&&Ee(n,"ssfi",r),Reflect.get(n,i)},"proxyGetter")}):t}C(fc,"proxify");function AF(t,e,r){if(Math.abs(t.length-e.length)>=r)return r;for(var n=[],i=0;i<=t.length;i++)n[i]=Array(e.length+1).fill(0),n[i][0]=i;for(var o=0;o<e.length;o++)n[0][o]=o;for(var i=1;i<=t.length;i++)for(var s=t.charCodeAt(i-1),o=1;o<=e.length;o++){if(Math.abs(i-o)>=r){n[i][o]=r;continue}n[i][o]=Math.min(n[i-1][o]+1,n[i][o-1]+1,n[i-1][o-1]+(s===e.charCodeAt(o-1)?0:1))}return n[t.length][e.length]}C(AF,"stringDistanceCapped");function cb(t,e,r){var n=C(function(){Ee(this,"lockSsfi")||Ee(this,"ssfi",n);var i=r.apply(this,arguments);if(i!==void 0)return i;var o=new _;return Ln(this,o),o},"methodWrapper");Ru(n,e,!1),t[e]=fc(n,e)}C(cb,"addMethod");function lb(t,e,r){var n=Object.getOwnPropertyDescriptor(t,e),i=C(function(){},"_super");n&&typeof n.get=="function"&&(i=n.get),Object.defineProperty(t,e,{get:C(function o(){!Eu()&&!Ee(this,"lockSsfi")&&Ee(this,"ssfi",o);var s=Ee(this,"lockSsfi");Ee(this,"lockSsfi",!0);var l=r(i).call(this);if(Ee(this,"lockSsfi",s),l!==void 0)return l;var u=new _;return Ln(this,u),u},"overwritingPropertyGetter"),configurable:!0})}C(lb,"overwriteProperty");function ub(t,e,r){var n=t[e],i=C(function(){throw new Error(e+" is not a function")},"_super");n&&typeof n=="function"&&(i=n);var o=C(function(){Ee(this,"lockSsfi")||Ee(this,"ssfi",o);var s=Ee(this,"lockSsfi");Ee(this,"lockSsfi",!0);var l=r(i).apply(this,arguments);if(Ee(this,"lockSsfi",s),l!==void 0)return l;var u=new _;return Ln(this,u),u},"overwritingMethodWrapper");Ru(o,e,!1),t[e]=fc(o,e)}C(ub,"overwriteMethod");var TY=typeof Object.setPrototypeOf=="function",G1=C(function(){},"testFn"),vY=Object.getOwnPropertyNames(G1).filter(function(t){var e=Object.getOwnPropertyDescriptor(G1,t);return typeof e!="object"?!0:!e.configurable}),bY=Function.prototype.call,wY=Function.prototype.apply;function pb(t,e,r,n){typeof n!="function"&&(n=C(function(){},"chainingBehavior"));var i={method:r,chainingBehavior:n};t.__methods||(t.__methods={}),t.__methods[e]=i,Object.defineProperty(t,e,{get:C(function(){i.chainingBehavior.call(this);var s=C(function(){Ee(this,"lockSsfi")||Ee(this,"ssfi",s);var p=i.method.apply(this,arguments);if(p!==void 0)return p;var d=new _;return Ln(this,d),d},"chainableMethodWrapper");if(Ru(s,e,!0),TY){var l=Object.create(this);l.call=bY,l.apply=wY,Object.setPrototypeOf(s,l)}else{var u=Object.getOwnPropertyNames(t);u.forEach(function(p){if(vY.indexOf(p)===-1){var d=Object.getOwnPropertyDescriptor(t,p);Object.defineProperty(s,p,d)}})}return Ln(this,s),fc(s)},"chainableMethodGetter"),configurable:!0})}C(pb,"addChainableMethod");function fb(t,e,r,n){var i=t.__methods[e],o=i.chainingBehavior;i.chainingBehavior=C(function(){var u=n(o).call(this);if(u!==void 0)return u;var p=new _;return Ln(this,p),p},"overwritingChainableMethodGetter");var s=i.method;i.method=C(function(){var u=r(s).apply(this,arguments);if(u!==void 0)return u;var p=new _;return Ln(this,p),p},"overwritingChainableMethodWrapper")}C(fb,"overwriteChainableMethod");function Qg(t,e){return Ce(t)<Ce(e)?-1:1}C(Qg,"compareByInspect");function db(t){return typeof Object.getOwnPropertySymbols!="function"?[]:Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})}C(db,"getOwnEnumerablePropertySymbols");function mb(t){return Object.keys(t).concat(db(t))}C(mb,"getOwnEnumerableProperties");function DF(t){return t!==t}C(DF,"_isNaN");var Yg=Number.isNaN||DF;function IF(t){var e=Qe(t),r=["Array","Object","Function"];return r.indexOf(e)!==-1}C(IF,"isObjectType");function hb(t,e){var r=Ee(t,"operator"),n=Ee(t,"negate"),i=e[3],o=n?e[2]:e[1];if(r)return r;if(typeof o=="function"&&(o=o()),o=o||"",!!o&&!/\shave\s/.test(o)){var s=IF(i);return/\snot\s/.test(o)?s?"notDeepStrictEqual":"notStrictEqual":s?"deepStrictEqual":"strictEqual"}}C(hb,"getOperator");function ty(t){return t.name}C(ty,"getName");var{flag:P}=zg;["to","be","been","is","and","has","have","with","that","which","at","of","same","but","does","still","also"].forEach(function(t){_.addProperty(t)});_.addProperty("not",function(){P(this,"negate",!0)});_.addProperty("deep",function(){P(this,"deep",!0)});_.addProperty("nested",function(){P(this,"nested",!0)});_.addProperty("own",function(){P(this,"own",!0)});_.addProperty("ordered",function(){P(this,"ordered",!0)});_.addProperty("any",function(){P(this,"any",!0),P(this,"all",!1)});_.addProperty("all",function(){P(this,"all",!0),P(this,"any",!1)});var K1={function:["function","asyncfunction","generatorfunction","asyncgeneratorfunction"],asyncfunction:["asyncfunction","asyncgeneratorfunction"],generatorfunction:["generatorfunction","asyncgeneratorfunction"],asyncgeneratorfunction:["asyncgeneratorfunction"]};function gb(t,e){e&&P(this,"message",e),t=t.toLowerCase();var r=P(this,"object"),n=~["a","e","i","o","u"].indexOf(t.charAt(0))?"an ":"a ";let i=Qe(r).toLowerCase();K1.function.includes(t)?this.assert(K1[t].includes(i),"expected #{this} to be "+n+t,"expected #{this} not to be "+n+t):this.assert(t===i,"expected #{this} to be "+n+t,"expected #{this} not to be "+n+t)}C(gb,"an");_.addChainableMethod("an",gb);_.addChainableMethod("a",gb);function FF(t,e){return Yg(t)&&Yg(e)||t===e}C(FF,"SameValueZero");function ku(){P(this,"contains",!0)}C(ku,"includeChainingBehavior");function Pu(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=Qe(r).toLowerCase(),i=P(this,"message"),o=P(this,"negate"),s=P(this,"ssfi"),l=P(this,"deep"),u=l?"deep ":"",p=l?P(this,"eql"):FF;i=i?i+": ":"";var d=!1;switch(n){case"string":d=r.indexOf(t)!==-1;break;case"weakset":if(l)throw new qe(i+"unable to use .deep.include with WeakSet",void 0,s);d=r.has(t);break;case"map":r.forEach(function(v){d=d||p(v,t)});break;case"set":l?r.forEach(function(v){d=d||p(v,t)}):d=r.has(t);break;case"array":l?d=r.some(function(v){return p(v,t)}):d=r.indexOf(t)!==-1;break;default:if(t!==Object(t))throw new qe(i+"the given combination of arguments ("+n+" and "+Qe(t).toLowerCase()+") is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a "+Qe(t).toLowerCase(),void 0,s);var m=Object.keys(t),g=null,x=0;if(m.forEach(function(v){var b=new _(r);if(Ln(this,b,!0),P(b,"lockSsfi",!0),!o||m.length===1){b.property(v,t[v]);return}try{b.property(v,t[v])}catch(I){if(!qr.compatibleConstructor(I,qe))throw I;g===null&&(g=I),x++}},this),o&&m.length>1&&x===m.length)throw g;return}this.assert(d,"expected #{this} to "+u+"include "+Ce(t),"expected #{this} to not "+u+"include "+Ce(t))}C(Pu,"include");_.addChainableMethod("include",Pu,ku);_.addChainableMethod("contain",Pu,ku);_.addChainableMethod("contains",Pu,ku);_.addChainableMethod("includes",Pu,ku);_.addProperty("ok",function(){this.assert(P(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")});_.addProperty("true",function(){this.assert(P(this,"object")===!0,"expected #{this} to be true","expected #{this} to be false",!P(this,"negate"))});_.addProperty("callable",function(){let t=P(this,"object"),e=P(this,"ssfi"),r=P(this,"message"),n=r?`${r}: `:"",i=P(this,"negate"),o=i?`${n}expected ${Ce(t)} not to be a callable function`:`${n}expected ${Ce(t)} to be a callable function`,s=["Function","AsyncFunction","GeneratorFunction","AsyncGeneratorFunction"].includes(Qe(t));if(s&&i||!s&&!i)throw new qe(o,void 0,e)});_.addProperty("false",function(){this.assert(P(this,"object")===!1,"expected #{this} to be false","expected #{this} to be true",!!P(this,"negate"))});_.addProperty("null",function(){this.assert(P(this,"object")===null,"expected #{this} to be null","expected #{this} not to be null")});_.addProperty("undefined",function(){this.assert(P(this,"object")===void 0,"expected #{this} to be undefined","expected #{this} not to be undefined")});_.addProperty("NaN",function(){this.assert(Yg(P(this,"object")),"expected #{this} to be NaN","expected #{this} not to be NaN")});function yb(){var t=P(this,"object");this.assert(t!=null,"expected #{this} to exist","expected #{this} to not exist")}C(yb,"assertExist");_.addProperty("exist",yb);_.addProperty("exists",yb);_.addProperty("empty",function(){var t=P(this,"object"),e=P(this,"ssfi"),r=P(this,"message"),n;switch(r=r?r+": ":"",Qe(t).toLowerCase()){case"array":case"string":n=t.length;break;case"map":case"set":n=t.size;break;case"weakmap":case"weakset":throw new qe(r+".empty was passed a weak collection",void 0,e);case"function":var i=r+".empty was passed a function "+ty(t);throw new qe(i.trim(),void 0,e);default:if(t!==Object(t))throw new qe(r+".empty was passed non-string primitive "+Ce(t),void 0,e);n=Object.keys(t).length}this.assert(n===0,"expected #{this} to be empty","expected #{this} not to be empty")});function xb(){var t=P(this,"object"),e=Qe(t);this.assert(e==="Arguments","expected #{this} to be arguments but got "+e,"expected #{this} to not be arguments")}C(xb,"checkArguments");_.addProperty("arguments",xb);_.addProperty("Arguments",xb);function ry(t,e){e&&P(this,"message",e);var r=P(this,"object");if(P(this,"deep")){var n=P(this,"lockSsfi");P(this,"lockSsfi",!0),this.eql(t),P(this,"lockSsfi",n)}else this.assert(t===r,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",t,this._obj,!0)}C(ry,"assertEqual");_.addMethod("equal",ry);_.addMethod("equals",ry);_.addMethod("eq",ry);function Sb(t,e){e&&P(this,"message",e);var r=P(this,"eql");this.assert(r(t,P(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",t,this._obj,!0)}C(Sb,"assertEql");_.addMethod("eql",Sb);_.addMethod("eqls",Sb);function ny(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"doLength"),i=P(this,"message"),o=i?i+": ":"",s=P(this,"ssfi"),l=Qe(r).toLowerCase(),u=Qe(t).toLowerCase(),p,d=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&u!=="date")p=o+"the argument to above must be a date";else if(u!=="number"&&(n||l==="number"))p=o+"the argument to above must be a number";else if(!n&&l!=="date"&&l!=="number"){var m=l==="string"?"'"+r+"'":r;p=o+"expected "+m+" to be a number or a date"}else d=!1;if(d)throw new qe(p,void 0,s);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x>t,"expected #{this} to have a "+g+" above #{exp} but got #{act}","expected #{this} to not have a "+g+" above #{exp}",t,x)}else this.assert(r>t,"expected #{this} to be above #{exp}","expected #{this} to be at most #{exp}",t)}C(ny,"assertAbove");_.addMethod("above",ny);_.addMethod("gt",ny);_.addMethod("greaterThan",ny);function iy(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"doLength"),i=P(this,"message"),o=i?i+": ":"",s=P(this,"ssfi"),l=Qe(r).toLowerCase(),u=Qe(t).toLowerCase(),p,d=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&u!=="date")p=o+"the argument to least must be a date";else if(u!=="number"&&(n||l==="number"))p=o+"the argument to least must be a number";else if(!n&&l!=="date"&&l!=="number"){var m=l==="string"?"'"+r+"'":r;p=o+"expected "+m+" to be a number or a date"}else d=!1;if(d)throw new qe(p,void 0,s);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x>=t,"expected #{this} to have a "+g+" at least #{exp} but got #{act}","expected #{this} to have a "+g+" below #{exp}",t,x)}else this.assert(r>=t,"expected #{this} to be at least #{exp}","expected #{this} to be below #{exp}",t)}C(iy,"assertLeast");_.addMethod("least",iy);_.addMethod("gte",iy);_.addMethod("greaterThanOrEqual",iy);function oy(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"doLength"),i=P(this,"message"),o=i?i+": ":"",s=P(this,"ssfi"),l=Qe(r).toLowerCase(),u=Qe(t).toLowerCase(),p,d=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&u!=="date")p=o+"the argument to below must be a date";else if(u!=="number"&&(n||l==="number"))p=o+"the argument to below must be a number";else if(!n&&l!=="date"&&l!=="number"){var m=l==="string"?"'"+r+"'":r;p=o+"expected "+m+" to be a number or a date"}else d=!1;if(d)throw new qe(p,void 0,s);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x<t,"expected #{this} to have a "+g+" below #{exp} but got #{act}","expected #{this} to not have a "+g+" below #{exp}",t,x)}else this.assert(r<t,"expected #{this} to be below #{exp}","expected #{this} to be at least #{exp}",t)}C(oy,"assertBelow");_.addMethod("below",oy);_.addMethod("lt",oy);_.addMethod("lessThan",oy);function ay(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"doLength"),i=P(this,"message"),o=i?i+": ":"",s=P(this,"ssfi"),l=Qe(r).toLowerCase(),u=Qe(t).toLowerCase(),p,d=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&u!=="date")p=o+"the argument to most must be a date";else if(u!=="number"&&(n||l==="number"))p=o+"the argument to most must be a number";else if(!n&&l!=="date"&&l!=="number"){var m=l==="string"?"'"+r+"'":r;p=o+"expected "+m+" to be a number or a date"}else d=!1;if(d)throw new qe(p,void 0,s);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x<=t,"expected #{this} to have a "+g+" at most #{exp} but got #{act}","expected #{this} to have a "+g+" above #{exp}",t,x)}else this.assert(r<=t,"expected #{this} to be at most #{exp}","expected #{this} to be above #{exp}",t)}C(ay,"assertMost");_.addMethod("most",ay);_.addMethod("lte",ay);_.addMethod("lessThanOrEqual",ay);_.addMethod("within",function(t,e,r){r&&P(this,"message",r);var n=P(this,"object"),i=P(this,"doLength"),o=P(this,"message"),s=o?o+": ":"",l=P(this,"ssfi"),u=Qe(n).toLowerCase(),p=Qe(t).toLowerCase(),d=Qe(e).toLowerCase(),m,g=!0,x=p==="date"&&d==="date"?t.toISOString()+".."+e.toISOString():t+".."+e;if(i&&u!=="map"&&u!=="set"&&new _(n,o,l,!0).to.have.property("length"),!i&&u==="date"&&(p!=="date"||d!=="date"))m=s+"the arguments to within must be dates";else if((p!=="number"||d!=="number")&&(i||u==="number"))m=s+"the arguments to within must be numbers";else if(!i&&u!=="date"&&u!=="number"){var v=u==="string"?"'"+n+"'":n;m=s+"expected "+v+" to be a number or a date"}else g=!1;if(g)throw new qe(m,void 0,l);if(i){var b="length",I;u==="map"||u==="set"?(b="size",I=n.size):I=n.length,this.assert(I>=t&&I<=e,"expected #{this} to have a "+b+" within "+x,"expected #{this} to not have a "+b+" within "+x)}else this.assert(n>=t&&n<=e,"expected #{this} to be within "+x,"expected #{this} to not be within "+x)});function Tb(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"ssfi"),i=P(this,"message");try{var o=r instanceof t}catch(l){throw l instanceof TypeError?(i=i?i+": ":"",new qe(i+"The instanceof assertion needs a constructor but "+Qe(t)+" was given.",void 0,n)):l}var s=ty(t);s==null&&(s="an unnamed constructor"),this.assert(o,"expected #{this} to be an instance of "+s,"expected #{this} to not be an instance of "+s)}C(Tb,"assertInstanceOf");_.addMethod("instanceof",Tb);_.addMethod("instanceOf",Tb);function vb(t,e,r){r&&P(this,"message",r);var n=P(this,"nested"),i=P(this,"own"),o=P(this,"message"),s=P(this,"object"),l=P(this,"ssfi"),u=typeof t;if(o=o?o+": ":"",n){if(u!=="string")throw new qe(o+"the argument to property must be a string when using nested syntax",void 0,l)}else if(u!=="string"&&u!=="number"&&u!=="symbol")throw new qe(o+"the argument to property must be a string, number, or symbol",void 0,l);if(n&&i)throw new qe(o+'The "nested" and "own" flags cannot be combined.',void 0,l);if(s==null)throw new qe(o+"Target cannot be null or undefined.",void 0,l);var p=P(this,"deep"),d=P(this,"negate"),m=n?ab(s,t):null,g=n?m.value:s[t],x=p?P(this,"eql"):(I,M)=>I===M,v="";p&&(v+="deep "),i&&(v+="own "),n&&(v+="nested "),v+="property ";var b;i?b=Object.prototype.hasOwnProperty.call(s,t):n?b=m.exists:b=ey(s,t),(!d||arguments.length===1)&&this.assert(b,"expected #{this} to have "+v+Ce(t),"expected #{this} to not have "+v+Ce(t)),arguments.length>1&&this.assert(b&&x(e,g),"expected #{this} to have "+v+Ce(t)+" of #{exp}, but got #{act}","expected #{this} to not have "+v+Ce(t)+" of #{act}",e,g),P(this,"object",g)}C(vb,"assertProperty");_.addMethod("property",vb);function bb(t,e,r){P(this,"own",!0),vb.apply(this,arguments)}C(bb,"assertOwnProperty");_.addMethod("ownProperty",bb);_.addMethod("haveOwnProperty",bb);function wb(t,e,r){typeof e=="string"&&(r=e,e=null),r&&P(this,"message",r);var n=P(this,"object"),i=Object.getOwnPropertyDescriptor(Object(n),t),o=P(this,"eql");i&&e?this.assert(o(e,i),"expected the own property descriptor for "+Ce(t)+" on #{this} to match "+Ce(e)+", got "+Ce(i),"expected the own property descriptor for "+Ce(t)+" on #{this} to not match "+Ce(e),e,i,!0):this.assert(i,"expected #{this} to have an own property descriptor for "+Ce(t),"expected #{this} to not have an own property descriptor for "+Ce(t)),P(this,"object",i)}C(wb,"assertOwnPropertyDescriptor");_.addMethod("ownPropertyDescriptor",wb);_.addMethod("haveOwnPropertyDescriptor",wb);function _b(){P(this,"doLength",!0)}C(_b,"assertLengthChain");function Eb(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=Qe(r).toLowerCase(),i=P(this,"message"),o=P(this,"ssfi"),s="length",l;switch(n){case"map":case"set":s="size",l=r.size;break;default:new _(r,i,o,!0).to.have.property("length"),l=r.length}this.assert(l==t,"expected #{this} to have a "+s+" of #{exp} but got #{act}","expected #{this} to not have a "+s+" of #{act}",t,l)}C(Eb,"assertLength");_.addChainableMethod("length",Eb,_b);_.addChainableMethod("lengthOf",Eb,_b);function Rb(t,e){e&&P(this,"message",e);var r=P(this,"object");this.assert(t.exec(r),"expected #{this} to match "+t,"expected #{this} not to match "+t)}C(Rb,"assertMatch");_.addMethod("match",Rb);_.addMethod("matches",Rb);_.addMethod("string",function(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"message"),i=P(this,"ssfi");new _(r,n,i,!0).is.a("string"),this.assert(~r.indexOf(t),"expected #{this} to contain "+Ce(t),"expected #{this} to not contain "+Ce(t))});function kb(t){var e=P(this,"object"),r=Qe(e),n=Qe(t),i=P(this,"ssfi"),o=P(this,"deep"),s,l="",u,p=!0,d=P(this,"message");d=d?d+": ":"";var m=d+"when testing keys against an object or an array you must give a single Array|Object|String argument or multiple String arguments";if(r==="Map"||r==="Set")l=o?"deeply ":"",u=[],e.forEach(function(U,Q){u.push(Q)}),n!=="Array"&&(t=Array.prototype.slice.call(arguments));else{switch(u=mb(e),n){case"Array":if(arguments.length>1)throw new qe(m,void 0,i);break;case"Object":if(arguments.length>1)throw new qe(m,void 0,i);t=Object.keys(t);break;default:t=Array.prototype.slice.call(arguments)}t=t.map(function(U){return typeof U=="symbol"?U:String(U)})}if(!t.length)throw new qe(d+"keys required",void 0,i);var g=t.length,x=P(this,"any"),v=P(this,"all"),b=t,I=o?P(this,"eql"):(U,Q)=>U===Q;if(!x&&!v&&(v=!0),x&&(p=b.some(function(U){return u.some(function(Q){return I(U,Q)})})),v&&(p=b.every(function(U){return u.some(function(Q){return I(U,Q)})}),P(this,"contains")||(p=p&&t.length==u.length)),g>1){t=t.map(function(U){return Ce(U)});var M=t.pop();v&&(s=t.join(", ")+", and "+M),x&&(s=t.join(", ")+", or "+M)}else s=Ce(t[0]);s=(g>1?"keys ":"key ")+s,s=(P(this,"contains")?"contain ":"have ")+s,this.assert(p,"expected #{this} to "+l+s,"expected #{this} to not "+l+s,b.slice(0).sort(Qg),u.sort(Qg),!0)}C(kb,"assertKeys");_.addMethod("keys",kb);_.addMethod("key",kb);function sy(t,e,r){r&&P(this,"message",r);var n=P(this,"object"),i=P(this,"ssfi"),o=P(this,"message"),s=P(this,"negate")||!1;new _(n,o,i,!0).is.a("function"),(t instanceof RegExp||typeof t=="string")&&(e=t,t=null);var l;try{n()}catch(M){l=M}var u=t===void 0&&e===void 0,p=!!(t&&e),d=!1,m=!1;if(u||!u&&!s){var g="an error";t instanceof Error?g="#{exp}":t&&(g=qr.getConstructorName(t)),this.assert(l,"expected #{this} to throw "+g,"expected #{this} to not throw an error but #{act} was thrown",t&&t.toString(),l instanceof Error?l.toString():typeof l=="string"?l:l&&qr.getConstructorName(l))}if(t&&l){if(t instanceof Error){var x=qr.compatibleInstance(l,t);x===s&&(p&&s?d=!0:this.assert(s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l&&!s?" but #{act} was thrown":""),t.toString(),l.toString()))}var v=qr.compatibleConstructor(l,t);v===s&&(p&&s?d=!0:this.assert(s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&qr.getConstructorName(t),l instanceof Error?l.toString():l&&qr.getConstructorName(l)))}if(l&&e!==void 0&&e!==null){var b="including";e instanceof RegExp&&(b="matching");var I=qr.compatibleMessage(l,e);I===s&&(p&&s?m=!0:this.assert(s,"expected #{this} to throw error "+b+" #{exp} but got #{act}","expected #{this} to throw error not "+b+" #{exp}",e,qr.getMessage(l)))}d&&m&&this.assert(s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&qr.getConstructorName(t),l instanceof Error?l.toString():l&&qr.getConstructorName(l)),P(this,"object",l)}C(sy,"assertThrows");_.addMethod("throw",sy);_.addMethod("throws",sy);_.addMethod("Throw",sy);function Pb(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"itself"),i=typeof r=="function"&&!n?r.prototype[t]:r[t];this.assert(typeof i=="function","expected #{this} to respond to "+Ce(t),"expected #{this} to not respond to "+Ce(t))}C(Pb,"respondTo");_.addMethod("respondTo",Pb);_.addMethod("respondsTo",Pb);_.addProperty("itself",function(){P(this,"itself",!0)});function Mb(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=t(r);this.assert(n,"expected #{this} to satisfy "+ya(t),"expected #{this} to not satisfy"+ya(t),!P(this,"negate"),n)}C(Mb,"satisfy");_.addMethod("satisfy",Mb);_.addMethod("satisfies",Mb);function Ab(t,e,r){r&&P(this,"message",r);var n=P(this,"object"),i=P(this,"message"),o=P(this,"ssfi");if(new _(n,i,o,!0).is.a("number"),typeof t!="number"||typeof e!="number"){i=i?i+": ":"";var s=e===void 0?", and a delta is required":"";throw new qe(i+"the arguments to closeTo or approximately must be numbers"+s,void 0,o)}this.assert(Math.abs(n-t)<=e,"expected #{this} to be close to "+t+" +/- "+e,"expected #{this} not to be close to "+t+" +/- "+e)}C(Ab,"closeTo");_.addMethod("closeTo",Ab);_.addMethod("approximately",Ab);function CF(t,e,r,n,i){let o=Array.from(e),s=Array.from(t);if(!n){if(s.length!==o.length)return!1;o=o.slice()}return s.every(function(l,u){if(i)return r?r(l,o[u]):l===o[u];if(!r){var p=o.indexOf(l);return p===-1?!1:(n||o.splice(p,1),!0)}return o.some(function(d,m){return r(l,d)?(n||o.splice(m,1),!0):!1})})}C(CF,"isSubsetOf");_.addMethod("members",function(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"message"),i=P(this,"ssfi");new _(r,n,i,!0).to.be.iterable,new _(t,n,i,!0).to.be.iterable;var o=P(this,"contains"),s=P(this,"ordered"),l,u,p;o?(l=s?"an ordered superset":"a superset",u="expected #{this} to be "+l+" of #{exp}",p="expected #{this} to not be "+l+" of #{exp}"):(l=s?"ordered members":"members",u="expected #{this} to have the same "+l+" as #{exp}",p="expected #{this} to not have the same "+l+" as #{exp}");var d=P(this,"deep")?P(this,"eql"):void 0;this.assert(CF(t,r,d,o,s),u,p,t,r,!0)});_.addProperty("iterable",function(t){t&&P(this,"message",t);var e=P(this,"object");this.assert(e!=null&&e[Symbol.iterator],"expected #{this} to be an iterable","expected #{this} to not be an iterable",e)});function NF(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"message"),i=P(this,"ssfi"),o=P(this,"contains"),s=P(this,"deep"),l=P(this,"eql");new _(t,n,i,!0).to.be.an("array"),o?this.assert(t.some(function(u){return r.indexOf(u)>-1}),"expected #{this} to contain one of #{exp}","expected #{this} to not contain one of #{exp}",t,r):s?this.assert(t.some(function(u){return l(r,u)}),"expected #{this} to deeply equal one of #{exp}","expected #{this} to deeply equal one of #{exp}",t,r):this.assert(t.indexOf(r)>-1,"expected #{this} to be one of #{exp}","expected #{this} to not be one of #{exp}",t,r)}C(NF,"oneOf");_.addMethod("oneOf",NF);function Db(t,e,r){r&&P(this,"message",r);var n=P(this,"object"),i=P(this,"message"),o=P(this,"ssfi");new _(n,i,o,!0).is.a("function");var s;e?(new _(t,i,o,!0).to.have.property(e),s=t[e]):(new _(t,i,o,!0).is.a("function"),s=t()),n();var l=e==null?t():t[e],u=e==null?s:"."+e;P(this,"deltaMsgObj",u),P(this,"initialDeltaValue",s),P(this,"finalDeltaValue",l),P(this,"deltaBehavior","change"),P(this,"realDelta",l!==s),this.assert(s!==l,"expected "+u+" to change","expected "+u+" to not change")}C(Db,"assertChanges");_.addMethod("change",Db);_.addMethod("changes",Db);function Ib(t,e,r){r&&P(this,"message",r);var n=P(this,"object"),i=P(this,"message"),o=P(this,"ssfi");new _(n,i,o,!0).is.a("function");var s;e?(new _(t,i,o,!0).to.have.property(e),s=t[e]):(new _(t,i,o,!0).is.a("function"),s=t()),new _(s,i,o,!0).is.a("number"),n();var l=e==null?t():t[e],u=e==null?s:"."+e;P(this,"deltaMsgObj",u),P(this,"initialDeltaValue",s),P(this,"finalDeltaValue",l),P(this,"deltaBehavior","increase"),P(this,"realDelta",l-s),this.assert(l-s>0,"expected "+u+" to increase","expected "+u+" to not increase")}C(Ib,"assertIncreases");_.addMethod("increase",Ib);_.addMethod("increases",Ib);function Fb(t,e,r){r&&P(this,"message",r);var n=P(this,"object"),i=P(this,"message"),o=P(this,"ssfi");new _(n,i,o,!0).is.a("function");var s;e?(new _(t,i,o,!0).to.have.property(e),s=t[e]):(new _(t,i,o,!0).is.a("function"),s=t()),new _(s,i,o,!0).is.a("number"),n();var l=e==null?t():t[e],u=e==null?s:"."+e;P(this,"deltaMsgObj",u),P(this,"initialDeltaValue",s),P(this,"finalDeltaValue",l),P(this,"deltaBehavior","decrease"),P(this,"realDelta",s-l),this.assert(l-s<0,"expected "+u+" to decrease","expected "+u+" to not decrease")}C(Fb,"assertDecreases");_.addMethod("decrease",Fb);_.addMethod("decreases",Fb);function OF(t,e){e&&P(this,"message",e);var r=P(this,"deltaMsgObj"),n=P(this,"initialDeltaValue"),i=P(this,"finalDeltaValue"),o=P(this,"deltaBehavior"),s=P(this,"realDelta"),l;o==="change"?l=Math.abs(i-n)===Math.abs(t):l=s===Math.abs(t),this.assert(l,"expected "+r+" to "+o+" by "+t,"expected "+r+" to not "+o+" by "+t)}C(OF,"assertDelta");_.addMethod("by",OF);_.addProperty("extensible",function(){var t=P(this,"object"),e=t===Object(t)&&Object.isExtensible(t);this.assert(e,"expected #{this} to be extensible","expected #{this} to not be extensible")});_.addProperty("sealed",function(){var t=P(this,"object"),e=t===Object(t)?Object.isSealed(t):!0;this.assert(e,"expected #{this} to be sealed","expected #{this} to not be sealed")});_.addProperty("frozen",function(){var t=P(this,"object"),e=t===Object(t)?Object.isFrozen(t):!0;this.assert(e,"expected #{this} to be frozen","expected #{this} to not be frozen")});_.addProperty("finite",function(t){var e=P(this,"object");this.assert(typeof e=="number"&&isFinite(e),"expected #{this} to be a finite number","expected #{this} to not be a finite number")});function Xg(t,e){return new _(t,e)}C(Xg,"expect");Xg.fail=function(t,e,r,n){throw arguments.length<2&&(r=t,t=void 0),r=r||"expect.fail()",new qe(r,{actual:t,expected:e,operator:n},Xg.fail)};var LF={};Jv(LF,{Should:()=>EY,should:()=>_Y});function Cb(){function t(){return this instanceof String||this instanceof Number||this instanceof Boolean||typeof Symbol=="function"&&this instanceof Symbol||typeof BigInt=="function"&&this instanceof BigInt?new _(this.valueOf(),null,t):new _(this,null,t)}C(t,"shouldGetter");function e(n){Object.defineProperty(this,"should",{value:n,enumerable:!0,configurable:!0,writable:!0})}C(e,"shouldSetter"),Object.defineProperty(Object.prototype,"should",{set:e,get:t,configurable:!0});var r={};return r.fail=function(n,i,o,s){throw arguments.length<2&&(o=n,n=void 0),o=o||"should.fail()",new qe(o,{actual:n,expected:i,operator:s},r.fail)},r.equal=function(n,i,o){new _(n,o).to.equal(i)},r.Throw=function(n,i,o,s){new _(n,s).to.Throw(i,o)},r.exist=function(n,i){new _(n,i).to.exist},r.not={},r.not.equal=function(n,i,o){new _(n,o).to.not.equal(i)},r.not.Throw=function(n,i,o,s){new _(n,s).to.not.Throw(i,o)},r.not.exist=function(n,i){new _(n,i).to.not.exist},r.throw=r.Throw,r.not.throw=r.not.Throw,r}C(Cb,"loadShould");var _Y=Cb,EY=Cb;function w(t,e){var r=new _(null,null,w,!0);r.assert(t,e,"[ negation message unavailable ]")}C(w,"assert");w.fail=function(t,e,r,n){throw arguments.length<2&&(r=t,t=void 0),r=r||"assert.fail()",new qe(r,{actual:t,expected:e,operator:n},w.fail)};w.isOk=function(t,e){new _(t,e,w.isOk,!0).is.ok};w.isNotOk=function(t,e){new _(t,e,w.isNotOk,!0).is.not.ok};w.equal=function(t,e,r){var n=new _(t,r,w.equal,!0);n.assert(e==Ee(n,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",e,t,!0)};w.notEqual=function(t,e,r){var n=new _(t,r,w.notEqual,!0);n.assert(e!=Ee(n,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",e,t,!0)};w.strictEqual=function(t,e,r){new _(t,r,w.strictEqual,!0).to.equal(e)};w.notStrictEqual=function(t,e,r){new _(t,r,w.notStrictEqual,!0).to.not.equal(e)};w.deepEqual=w.deepStrictEqual=function(t,e,r){new _(t,r,w.deepEqual,!0).to.eql(e)};w.notDeepEqual=function(t,e,r){new _(t,r,w.notDeepEqual,!0).to.not.eql(e)};w.isAbove=function(t,e,r){new _(t,r,w.isAbove,!0).to.be.above(e)};w.isAtLeast=function(t,e,r){new _(t,r,w.isAtLeast,!0).to.be.least(e)};w.isBelow=function(t,e,r){new _(t,r,w.isBelow,!0).to.be.below(e)};w.isAtMost=function(t,e,r){new _(t,r,w.isAtMost,!0).to.be.most(e)};w.isTrue=function(t,e){new _(t,e,w.isTrue,!0).is.true};w.isNotTrue=function(t,e){new _(t,e,w.isNotTrue,!0).to.not.equal(!0)};w.isFalse=function(t,e){new _(t,e,w.isFalse,!0).is.false};w.isNotFalse=function(t,e){new _(t,e,w.isNotFalse,!0).to.not.equal(!1)};w.isNull=function(t,e){new _(t,e,w.isNull,!0).to.equal(null)};w.isNotNull=function(t,e){new _(t,e,w.isNotNull,!0).to.not.equal(null)};w.isNaN=function(t,e){new _(t,e,w.isNaN,!0).to.be.NaN};w.isNotNaN=function(t,e){new _(t,e,w.isNotNaN,!0).not.to.be.NaN};w.exists=function(t,e){new _(t,e,w.exists,!0).to.exist};w.notExists=function(t,e){new _(t,e,w.notExists,!0).to.not.exist};w.isUndefined=function(t,e){new _(t,e,w.isUndefined,!0).to.equal(void 0)};w.isDefined=function(t,e){new _(t,e,w.isDefined,!0).to.not.equal(void 0)};w.isCallable=function(t,e){new _(t,e,w.isCallable,!0).is.callable};w.isNotCallable=function(t,e){new _(t,e,w.isNotCallable,!0).is.not.callable};w.isObject=function(t,e){new _(t,e,w.isObject,!0).to.be.a("object")};w.isNotObject=function(t,e){new _(t,e,w.isNotObject,!0).to.not.be.a("object")};w.isArray=function(t,e){new _(t,e,w.isArray,!0).to.be.an("array")};w.isNotArray=function(t,e){new _(t,e,w.isNotArray,!0).to.not.be.an("array")};w.isString=function(t,e){new _(t,e,w.isString,!0).to.be.a("string")};w.isNotString=function(t,e){new _(t,e,w.isNotString,!0).to.not.be.a("string")};w.isNumber=function(t,e){new _(t,e,w.isNumber,!0).to.be.a("number")};w.isNotNumber=function(t,e){new _(t,e,w.isNotNumber,!0).to.not.be.a("number")};w.isFinite=function(t,e){new _(t,e,w.isFinite,!0).to.be.finite};w.isBoolean=function(t,e){new _(t,e,w.isBoolean,!0).to.be.a("boolean")};w.isNotBoolean=function(t,e){new _(t,e,w.isNotBoolean,!0).to.not.be.a("boolean")};w.typeOf=function(t,e,r){new _(t,r,w.typeOf,!0).to.be.a(e)};w.notTypeOf=function(t,e,r){new _(t,r,w.notTypeOf,!0).to.not.be.a(e)};w.instanceOf=function(t,e,r){new _(t,r,w.instanceOf,!0).to.be.instanceOf(e)};w.notInstanceOf=function(t,e,r){new _(t,r,w.notInstanceOf,!0).to.not.be.instanceOf(e)};w.include=function(t,e,r){new _(t,r,w.include,!0).include(e)};w.notInclude=function(t,e,r){new _(t,r,w.notInclude,!0).not.include(e)};w.deepInclude=function(t,e,r){new _(t,r,w.deepInclude,!0).deep.include(e)};w.notDeepInclude=function(t,e,r){new _(t,r,w.notDeepInclude,!0).not.deep.include(e)};w.nestedInclude=function(t,e,r){new _(t,r,w.nestedInclude,!0).nested.include(e)};w.notNestedInclude=function(t,e,r){new _(t,r,w.notNestedInclude,!0).not.nested.include(e)};w.deepNestedInclude=function(t,e,r){new _(t,r,w.deepNestedInclude,!0).deep.nested.include(e)};w.notDeepNestedInclude=function(t,e,r){new _(t,r,w.notDeepNestedInclude,!0).not.deep.nested.include(e)};w.ownInclude=function(t,e,r){new _(t,r,w.ownInclude,!0).own.include(e)};w.notOwnInclude=function(t,e,r){new _(t,r,w.notOwnInclude,!0).not.own.include(e)};w.deepOwnInclude=function(t,e,r){new _(t,r,w.deepOwnInclude,!0).deep.own.include(e)};w.notDeepOwnInclude=function(t,e,r){new _(t,r,w.notDeepOwnInclude,!0).not.deep.own.include(e)};w.match=function(t,e,r){new _(t,r,w.match,!0).to.match(e)};w.notMatch=function(t,e,r){new _(t,r,w.notMatch,!0).to.not.match(e)};w.property=function(t,e,r){new _(t,r,w.property,!0).to.have.property(e)};w.notProperty=function(t,e,r){new _(t,r,w.notProperty,!0).to.not.have.property(e)};w.propertyVal=function(t,e,r,n){new _(t,n,w.propertyVal,!0).to.have.property(e,r)};w.notPropertyVal=function(t,e,r,n){new _(t,n,w.notPropertyVal,!0).to.not.have.property(e,r)};w.deepPropertyVal=function(t,e,r,n){new _(t,n,w.deepPropertyVal,!0).to.have.deep.property(e,r)};w.notDeepPropertyVal=function(t,e,r,n){new _(t,n,w.notDeepPropertyVal,!0).to.not.have.deep.property(e,r)};w.ownProperty=function(t,e,r){new _(t,r,w.ownProperty,!0).to.have.own.property(e)};w.notOwnProperty=function(t,e,r){new _(t,r,w.notOwnProperty,!0).to.not.have.own.property(e)};w.ownPropertyVal=function(t,e,r,n){new _(t,n,w.ownPropertyVal,!0).to.have.own.property(e,r)};w.notOwnPropertyVal=function(t,e,r,n){new _(t,n,w.notOwnPropertyVal,!0).to.not.have.own.property(e,r)};w.deepOwnPropertyVal=function(t,e,r,n){new _(t,n,w.deepOwnPropertyVal,!0).to.have.deep.own.property(e,r)};w.notDeepOwnPropertyVal=function(t,e,r,n){new _(t,n,w.notDeepOwnPropertyVal,!0).to.not.have.deep.own.property(e,r)};w.nestedProperty=function(t,e,r){new _(t,r,w.nestedProperty,!0).to.have.nested.property(e)};w.notNestedProperty=function(t,e,r){new _(t,r,w.notNestedProperty,!0).to.not.have.nested.property(e)};w.nestedPropertyVal=function(t,e,r,n){new _(t,n,w.nestedPropertyVal,!0).to.have.nested.property(e,r)};w.notNestedPropertyVal=function(t,e,r,n){new _(t,n,w.notNestedPropertyVal,!0).to.not.have.nested.property(e,r)};w.deepNestedPropertyVal=function(t,e,r,n){new _(t,n,w.deepNestedPropertyVal,!0).to.have.deep.nested.property(e,r)};w.notDeepNestedPropertyVal=function(t,e,r,n){new _(t,n,w.notDeepNestedPropertyVal,!0).to.not.have.deep.nested.property(e,r)};w.lengthOf=function(t,e,r){new _(t,r,w.lengthOf,!0).to.have.lengthOf(e)};w.hasAnyKeys=function(t,e,r){new _(t,r,w.hasAnyKeys,!0).to.have.any.keys(e)};w.hasAllKeys=function(t,e,r){new _(t,r,w.hasAllKeys,!0).to.have.all.keys(e)};w.containsAllKeys=function(t,e,r){new _(t,r,w.containsAllKeys,!0).to.contain.all.keys(e)};w.doesNotHaveAnyKeys=function(t,e,r){new _(t,r,w.doesNotHaveAnyKeys,!0).to.not.have.any.keys(e)};w.doesNotHaveAllKeys=function(t,e,r){new _(t,r,w.doesNotHaveAllKeys,!0).to.not.have.all.keys(e)};w.hasAnyDeepKeys=function(t,e,r){new _(t,r,w.hasAnyDeepKeys,!0).to.have.any.deep.keys(e)};w.hasAllDeepKeys=function(t,e,r){new _(t,r,w.hasAllDeepKeys,!0).to.have.all.deep.keys(e)};w.containsAllDeepKeys=function(t,e,r){new _(t,r,w.containsAllDeepKeys,!0).to.contain.all.deep.keys(e)};w.doesNotHaveAnyDeepKeys=function(t,e,r){new _(t,r,w.doesNotHaveAnyDeepKeys,!0).to.not.have.any.deep.keys(e)};w.doesNotHaveAllDeepKeys=function(t,e,r){new _(t,r,w.doesNotHaveAllDeepKeys,!0).to.not.have.all.deep.keys(e)};w.throws=function(t,e,r,n){(typeof e=="string"||e instanceof RegExp)&&(r=e,e=null);var i=new _(t,n,w.throws,!0).to.throw(e,r);return Ee(i,"object")};w.doesNotThrow=function(t,e,r,n){(typeof e=="string"||e instanceof RegExp)&&(r=e,e=null),new _(t,n,w.doesNotThrow,!0).to.not.throw(e,r)};w.operator=function(t,e,r,n){var i;switch(e){case"==":i=t==r;break;case"===":i=t===r;break;case">":i=t>r;break;case">=":i=t>=r;break;case"<":i=t<r;break;case"<=":i=t<=r;break;case"!=":i=t!=r;break;case"!==":i=t!==r;break;default:throw n=n&&n+": ",new qe(n+'Invalid operator "'+e+'"',void 0,w.operator)}var o=new _(i,n,w.operator,!0);o.assert(Ee(o,"object")===!0,"expected "+Ce(t)+" to be "+e+" "+Ce(r),"expected "+Ce(t)+" to not be "+e+" "+Ce(r))};w.closeTo=function(t,e,r,n){new _(t,n,w.closeTo,!0).to.be.closeTo(e,r)};w.approximately=function(t,e,r,n){new _(t,n,w.approximately,!0).to.be.approximately(e,r)};w.sameMembers=function(t,e,r){new _(t,r,w.sameMembers,!0).to.have.same.members(e)};w.notSameMembers=function(t,e,r){new _(t,r,w.notSameMembers,!0).to.not.have.same.members(e)};w.sameDeepMembers=function(t,e,r){new _(t,r,w.sameDeepMembers,!0).to.have.same.deep.members(e)};w.notSameDeepMembers=function(t,e,r){new _(t,r,w.notSameDeepMembers,!0).to.not.have.same.deep.members(e)};w.sameOrderedMembers=function(t,e,r){new _(t,r,w.sameOrderedMembers,!0).to.have.same.ordered.members(e)};w.notSameOrderedMembers=function(t,e,r){new _(t,r,w.notSameOrderedMembers,!0).to.not.have.same.ordered.members(e)};w.sameDeepOrderedMembers=function(t,e,r){new _(t,r,w.sameDeepOrderedMembers,!0).to.have.same.deep.ordered.members(e)};w.notSameDeepOrderedMembers=function(t,e,r){new _(t,r,w.notSameDeepOrderedMembers,!0).to.not.have.same.deep.ordered.members(e)};w.includeMembers=function(t,e,r){new _(t,r,w.includeMembers,!0).to.include.members(e)};w.notIncludeMembers=function(t,e,r){new _(t,r,w.notIncludeMembers,!0).to.not.include.members(e)};w.includeDeepMembers=function(t,e,r){new _(t,r,w.includeDeepMembers,!0).to.include.deep.members(e)};w.notIncludeDeepMembers=function(t,e,r){new _(t,r,w.notIncludeDeepMembers,!0).to.not.include.deep.members(e)};w.includeOrderedMembers=function(t,e,r){new _(t,r,w.includeOrderedMembers,!0).to.include.ordered.members(e)};w.notIncludeOrderedMembers=function(t,e,r){new _(t,r,w.notIncludeOrderedMembers,!0).to.not.include.ordered.members(e)};w.includeDeepOrderedMembers=function(t,e,r){new _(t,r,w.includeDeepOrderedMembers,!0).to.include.deep.ordered.members(e)};w.notIncludeDeepOrderedMembers=function(t,e,r){new _(t,r,w.notIncludeDeepOrderedMembers,!0).to.not.include.deep.ordered.members(e)};w.oneOf=function(t,e,r){new _(t,r,w.oneOf,!0).to.be.oneOf(e)};w.isIterable=function(t,e){if(t==null||!t[Symbol.iterator])throw e=e?`${e} expected ${Ce(t)} to be an iterable`:`expected ${Ce(t)} to be an iterable`,new qe(e,void 0,w.isIterable)};w.changes=function(t,e,r,n){arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,w.changes,!0).to.change(e,r)};w.changesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,w.changesBy,!0).to.change(e,r).by(n)};w.doesNotChange=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,w.doesNotChange,!0).to.not.change(e,r)};w.changesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,w.changesButNotBy,!0).to.change(e,r).but.not.by(n)};w.increases=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,w.increases,!0).to.increase(e,r)};w.increasesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,w.increasesBy,!0).to.increase(e,r).by(n)};w.doesNotIncrease=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,w.doesNotIncrease,!0).to.not.increase(e,r)};w.increasesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,w.increasesButNotBy,!0).to.increase(e,r).but.not.by(n)};w.decreases=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,w.decreases,!0).to.decrease(e,r)};w.decreasesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,w.decreasesBy,!0).to.decrease(e,r).by(n)};w.doesNotDecrease=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,w.doesNotDecrease,!0).to.not.decrease(e,r)};w.doesNotDecreaseBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);return new _(t,i,w.doesNotDecreaseBy,!0).to.not.decrease(e,r).by(n)};w.decreasesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,w.decreasesButNotBy,!0).to.decrease(e,r).but.not.by(n)};w.ifError=function(t){if(t)throw t};w.isExtensible=function(t,e){new _(t,e,w.isExtensible,!0).to.be.extensible};w.isNotExtensible=function(t,e){new _(t,e,w.isNotExtensible,!0).to.not.be.extensible};w.isSealed=function(t,e){new _(t,e,w.isSealed,!0).to.be.sealed};w.isNotSealed=function(t,e){new _(t,e,w.isNotSealed,!0).to.not.be.sealed};w.isFrozen=function(t,e){new _(t,e,w.isFrozen,!0).to.be.frozen};w.isNotFrozen=function(t,e){new _(t,e,w.isNotFrozen,!0).to.not.be.frozen};w.isEmpty=function(t,e){new _(t,e,w.isEmpty,!0).to.be.empty};w.isNotEmpty=function(t,e){new _(t,e,w.isNotEmpty,!0).to.not.be.empty};C(function t(e,r){return w[r]=w[e],t},"alias")("isOk","ok")("isNotOk","notOk")("throws","throw")("throws","Throw")("isExtensible","extensible")("isNotExtensible","notExtensible")("isSealed","sealed")("isNotSealed","notSealed")("isFrozen","frozen")("isNotFrozen","notFrozen")("isEmpty","empty")("isNotEmpty","notEmpty")("isCallable","isFunction")("isNotCallable","isNotFunction");var Z1=[];function RY(t){let e={AssertionError:qe,util:zg,config:Rr,expect:Xg,assert:w,Assertion:_,...LF};return~Z1.indexOf(t)||(t(e,zg),Z1.push(t)),e}C(RY,"use");var Mu=class{constructor(e,r,n){this._lineNumber=e,this._text=r,this._isLastLine=n}get lineNumber(){return this._lineNumber}get text(){return this._text}get range(){return new H(this._lineNumber,0,this._lineNumber,this._text.length)}get rangeIncludingLineBreak(){return this._isLastLine?this.range:new H(this._lineNumber,0,this._lineNumber+1,0)}get firstNonWhitespaceCharacterIndex(){return/^(\s*)/.exec(this._text)[1].length}get lastNonWhitespaceCharacterIndex(){return this.text.trimEnd().length}get isEmptyOrWhitespace(){return this.firstNonWhitespaceCharacterIndex===this._text.length}};var UF=fr(require("node:path"),1),cy=class{get uri(){return this._uri}get filename(){return UF.default.basename(this._uri.path)}get languageId(){return this._languageId}get version(){return this._version}get lineCount(){return this._lineCount}get range(){let{end:e}=this.lineAt(this.lineCount-1).range;return new H(0,0,e.line,e.character)}get eol(){return this._eol===`
`?"LF":"CRLF"}constructor(e,r,n,i,o){this._uri=e,this._languageId=r,this._version=n,this._eol=i,this._lines=o,this._lineCount=o.length,this._lineStarts=null,this._cachedTextValue=null}update(e){this._lines=e,this._lineCount=e.length,this._lineStarts=null,this._cachedTextValue=null}lineAt(e){let r;if(e instanceof se?r=e.line:typeof e=="number"&&(r=e),typeof r!="number"||r<0||Math.floor(r)!==r)throw new Error("Illegal value for `line`");return r=Math.min(r,this._lines.length-1),new Mu(r,this._lines[r],r===this._lines.length-1)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.line-1)+e.character}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();let r=this._lineStarts.getIndexOf(e),n=this._lines[r.index].length;return new se(r.index,Math.min(r.remainder,n))}getText(e){if(e===void 0)return this._cachedTextValue==null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue;if(e=this._validateRange(e),e.isEmpty)return"";if(e.isSingleLine)return this._lines[e.start.line].substring(e.start.character,e.end.character);let r=this._eol,n=e.start.line,i=e.end.line,o=[];o.push(this._lines[n].substring(e.start.character));for(let s=n+1;s<i;s++)o.push(this._lines[s]);return o.push(this._lines[i].substring(0,e.end.character)),o.join(r)}_validateRange(e){if(!(e instanceof H))throw new Error("Invalid argument");let r=this._validatePosition(e.start),n=this._validatePosition(e.end);return r===e.start&&n===e.end?e:new H(r.line,r.character,n.line,n.character)}_validatePosition(e){if(!(e instanceof se))throw new Error("Invalid argument");if(this._lines.length===0)return e.with(0,0);let{line:r,character:n}=e,i=!1;if(r<0)r=0,n=0,i=!0;else if(r>=this._lines.length)r=this._lines.length-1,n=this._lines[r].length,i=!0;else{let o=this._lines[r].length;n<0?(n=0,i=!0):n>o&&(n=o,i=!0)}return i?new se(r,n):e}_ensureLineStarts(){if(!this._lineStarts){let e=this._eol.length,r=this._lines.length,n=new Uint32Array(r);for(let i=0;i<r;i++)n[i]=this._lines[i].length+e;this._lineStarts=new Nb(n)}}};function MY(t){if(t<0)return 0;let e=4294967295;return t>e?e:t|0}var Nb=class{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}getCount(){return this.values.length}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=MY(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let r=this.prefixSumValidIndex[0]+1;r===0&&(this.prefixSum[0]=this.values[0],r++),e>=this.values.length&&(e=this.values.length-1);for(let n=r;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let r=0,n=this.values.length-1,i=0,o=0,s=0;for(;r<=n;)if(i=r+(n-r)/2|0,o=this.prefixSum[i],s=o-this.values[i],e<s)n=i-1;else if(e>=o)r=i+1;else break;return new Ob(i,e-s)}},Ob=class{constructor(e,r){this.index=e;this.remainder=r;this._prefixSumIndexOfResultBrand=void 0;this.index=e,this.remainder=r}};var ly=class{constructor(e){this.client=e;this.cursorlessVersion="0.0.0";this.workspaceFolders=void 0;this.disposables=[];this.quickPickReturnValue=void 0;this.onDidCloseTextDocument=Au;this.onDidChangeActiveTextEditor=Au;this.onDidChangeVisibleTextEditors=Au;this.onDidChangeTextEditorSelection=Au;this.onDidChangeTextEditorVisibleRanges=Au;this.configuration=new ru,this.globalState=new nu,this.messages=new iu,this.clipboard=new eu(this.client),this.capabilities=new _g,this.editorMap=new Map,this.documentMap=new Map,this.activeWindow=void 0,this.activeBuffer=void 0}async init(){let e=await _I(this.client);this.assetsRoot_=Lb.default.join(e,"assets"),this.cursorlessNeovimPath=Lb.default.join(e,"node","cursorless-neovim")}async showQuickPick(e,r){throw Error("showQuickPick Not implemented")}async setHighlightRanges(e,r,n){throw Error("setHighlightRanges Not implemented")}async flashRanges(e){console.debug("flashRanges Not implemented")}get assetsRoot(){if(this.assetsRoot_==null)throw Error("Field `assetsRoot` has not yet been mocked");return this.assetsRoot_}get runMode(){return V1()}get activeTextEditor(){return this.getActiveTextEditor()}get activeEditableTextEditor(){return this.getActiveTextEditor()}getActiveTextEditor(){let e=this.activeWindow?this.getTextEditor(this.activeWindow):void 0;return e===void 0&&console.debug("getActiveTextEditor: editor is undefined"),e}getTextEditor(e){for(let[r,n]of this.editorMap)if(r.id===e.id)return n}getTextDocument(e){for(let[r,n]of this.documentMap)if(r.id===e.id)return n}get visibleTextEditors(){return Array.from(this.editorMap.values())}getEditableTextEditor(e){return e}async findInDocument(e,r){throw Error("findInDocument Not implemented")}async findInWorkspace(e){throw Error("findInWorkspace Not implemented")}async openTextDocument(e){throw Error("openTextDocument Not implemented")}async openUntitledTextDocument(e){throw Error("openUntitledTextDocument Not implemented")}async showInputBox(e){throw Error("TextDocumentChangeEvent Not implemented")}async executeCommand(e,...r){throw new Error("executeCommand Method not implemented.")}onDidChangeTextDocument(e){return CI(e)}onDidOpenTextDocument(e,r,n){return NI(e,r,n)}async updateTextEditor(e=!1){let r=await this.client.window,n=await r.buffer,i=await n.lines,o=i;i.length>=30&&(o=i.slice(0,15).concat(["..."]).concat(i.slice(-15))),console.debug(`updateTextEditor(): window:${r.id}, buffer:${n.id}, lines=${JSON.stringify(o)}`);let s,l;e?(s=[],l=[]):(s=await bg(r,this.client),l=await wI(r,this.client,i));let u=this.toNeovimEditor(r,n,i,l,s);return Hr().emitEvent("onDidOpenTextDocument",u.document),u}toNeovimEditor(e,r,n,i,o){let s=this.getTextDocument(r),l=this.getTextEditor(e);return s?(console.debug(`toNeovimEditor(): updating document: buffer=${r.id}`),s.update(n)):(console.debug(`toNeovimEditor(): creating new document: buffer=${r.id}`),s=new cy(VI.parse(`neovim://${r.id}`),"plaintext",1,`
`,n),this.documentMap.set(r,s)),l?(console.debug(`toNeovimEditor(): updating editor: window=${e.id}`),l.updateDocument(i,o,s)):(console.debug(`toNeovimEditor(): creating new editor: window=${e.id}`),l=new Rg(kP(),this.client,this,e,s,i,o),this.editorMap.set(e,l)),this.activeBuffer=r,this.activeWindow=e,this.activeTextEditor}handleCommandError(e){MI(this.client,e.message)}disposeOnExit(...e){return this.disposables.push(...e),()=>(0,BF.pull)(this.disposables,...e)}};function Au(){return{dispose(){}}}var uy=class{constructor(e){this.client=e;this.signals={prePhrase:{getVersion:async()=>null}}}async getFocusedElementType(){let e=await this.client.mode;return e.mode==="t"||e.mode==="nt"?"terminal":"textEditor"}};var DY=BigInt(1e9);function VF(t,e=BigInt(1e6)){return Number(t*e/DY)/Number(e)}async function py(t,e=[],r=[],n,i,o,s,l){let u={documentContents:n.document.getText(),selections:n.selections.map(YR)};o!=null&&(u.marks=o),l!=null&&(u.metadata=l),e.includes("clipboard")||(u.clipboard=await i.clipboard.readText()),e.includes("visibleRanges")||(u.visibleRanges=n.visibleRanges.map(Kc));for(let p of os){let d=t?.get(p),m=`${p}Mark`;d!=null&&!e.includes(m)&&(u[m]=d.map(g=>g.toPlainObject()))}if(r.includes("timeOffsetSeconds")){let p=s?.startTimestamp;if(p==null)throw new Error("No start timestamp provided but time offset was requested");let d=process.hrtime.bigint()-p;u.timeOffsetSeconds=VF(d)}return u}var IY=fr(gl(),1);function WF(t,e,r,n,i,o,s,l){return{commandServerApi:t,ide:i,neovimIDE:n,injectIde:s,scopeProvider:o,takeSnapshot(u,p,d,m,g){return py(e,u,p,d,m,g,void 0,void 0)},setStoredTarget(u,p,d){e.set(p,d?.map(m=>SI(u,m)))},hatTokenMap:r,runIntegrationTests:l}}async function HF(t,e,r,n){let i={[Fx]:async(...o)=>{(await t.mode).mode==="t"&&kI(t);try{await e.updateTextEditor();let l=await r.runCommandSafe(...o),u=Ef(o);if(await n.getFocusedElementType()==="terminal"&&Vo(u)){let d=l;"fallback"in d&&d.fallback.action==="insert"&&PI(t)}return l}catch(l){if(e.runMode!=="test"){let u=l;console.error(u.stack),e.handleCommandError(u)}throw l}},"cursorless.repeatPreviousCommand":Ie,"cursorless.showCheatsheet":Ie,"cursorless.internal.updateCheatsheetDefaults":Ie,"cursorless.recordTestCase":Ie,"cursorless.recordOneTestCaseThenPause":Ie,"cursorless.pauseRecording":Ie,"cursorless.resumeRecording":Ie,"cursorless.takeSnapshot":Ie,"cursorless.recordScopeTests.showUnimplementedFacets":Ie,"cursorless.recordScopeTests.saveActiveDocument":Ie,"cursorless.showQuickPick":Ie,"cursorless.showDocumentation":Ie,"cursorless.private.logQuickActions":Ie,"cursorless.toggleDecorations":Ie,"cursorless.recomputeDecorationStyles":Ie,"cursorless.showScopeVisualizer":Ie,"cursorless.hideScopeVisualizer":Ie,"cursorless.analyzeCommandHistory":Ie,"cursorless.keyboard.escape":Ie,"cursorless.keyboard.targeted.targetHat":Ie,"cursorless.keyboard.targeted.targetScope":Ie,"cursorless.keyboard.targeted.targetSelection":Ie,"cursorless.keyboard.targeted.clearTarget":Ie,"cursorless.keyboard.targeted.runActionOnTarget":Ie,"cursorless.keyboard.modal.modeOn":Ie,"cursorless.keyboard.modal.modeOff":Ie,"cursorless.keyboard.modal.modeToggle":Ie,"cursorless.keyboard.undoTarget":Ie,"cursorless.keyboard.redoTarget":Ie,"cursorless.tutorial.start":Ie,"cursorless.tutorial.next":Ie,"cursorless.tutorial.previous":Ie,"cursorless.tutorial.restart":Ie,"cursorless.tutorial.resume":Ie,"cursorless.tutorial.list":Ie,"cursorless.documentationOpened":Ie};Object.entries(i).map(([o,s])=>Hr().registerCommand(o,s))}async function Ie(...t){console.debug(`dummyCommandHandler(): args=${t}`)}async function $F(t){let e=t.nvim,r=new ly(e);await r.init();let n=r.runMode==="production"?r:new df(r,new uf,r.runMode==="test",void 0),i=new Ep,o=new uy(e),s=r.runMode==="test"?i:o,{commandApi:l,storedTargets:u,hatTokenMap:p,scopeProvider:d,injectIde:m,runIntegrationTests:g}=await xI({ide:n,commandServerApi:s});await HF(e,r,l,s);let x={testHelpers:r.runMode==="test"?WF(i,u,p,r,n,d,m,g):void 0};Hr().registerExtensionApi(vI,x),console.log("activate(): Cursorless extension loaded")}function jF(t){t.setOptions({dev:!1}),t.registerFunction("CursorlessLoadExtension",async()=>await FY(t),{sync:!1})}async function FY(t){console.log("==============================================================================================="),console.log("loadExtension(cursorless-neovim): start"),await $F(t),console.log("loadExtension(cursorless-neovim): done")}
/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)

itertools/dist/index.js:
  (* istanbul ignore else -- @preserve *)
  (* istanbul ignore if -- @preserve *)

chai/chai.js:
  (*!
   * Chai - flag utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - test utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - expectTypes utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getActual utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - message composition utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - transferFlags utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * http://chaijs.com
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - isProxyEnabled helper
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addLengthGuard utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getProperties utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - proxify utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addChainingMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteChainableMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - compareByInspect utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getOwnEnumerablePropertySymbols utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getOwnEnumerableProperties utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - isNaN utility
   * Copyright(c) 2012-2015 Sakthipriyan Vairamani <thechargingvolcano@gmail.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*! Bundled license information:
  
  deep-eql/index.js:
    (*!
     * deep-eql
     * Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>
     * MIT Licensed
     *)
    (*!
     * Check to see if the MemoizeMap has recorded a result of the two operands
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {MemoizeMap} memoizeMap
     * @returns {Boolean|null} result
    *)
    (*!
     * Set the result of the equality into the MemoizeMap
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {MemoizeMap} memoizeMap
     * @param {Boolean} result
    *)
    (*!
     * Primary Export
     *)
    (*!
     * The main logic of the `deepEqual` function.
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Object} [options] (optional) Additional options
     * @param {Array} [options.comparator] (optional) Override default algorithm, determining custom equality.
     * @param {Array} [options.memoize] (optional) Provide a custom memoization object which will cache the results of
        complex objects for a speed boost. By passing `false` you can disable memoization, but this will cause circular
        references to blow the stack.
     * @return {Boolean} equal match
    *)
    (*!
     * Compare two Regular Expressions for equality.
     *
     * @param {RegExp} leftHandOperand
     * @param {RegExp} rightHandOperand
     * @return {Boolean} result
     *)
    (*!
     * Compare two Sets/Maps for equality. Faster than other equality functions.
     *
     * @param {Set} leftHandOperand
     * @param {Set} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Simple equality for flat iterable objects such as Arrays, TypedArrays or Node.js buffers.
     *
     * @param {Iterable} leftHandOperand
     * @param {Iterable} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Simple equality for generator objects such as those returned by generator functions.
     *
     * @param {Iterable} leftHandOperand
     * @param {Iterable} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Determine if the given object has an @@iterator function.
     *
     * @param {Object} target
     * @return {Boolean} `true` if the object has an @@iterator function.
     *)
    (*!
     * Gets all iterator entries from the given Object. If the Object has no @@iterator function, returns an empty array.
     * This will consume the iterator - which could have side effects depending on the @@iterator implementation.
     *
     * @param {Object} target
     * @returns {Array} an array of entries from the @@iterator function
     *)
    (*!
     * Gets all entries from a Generator. This will consume the generator - which could have side effects.
     *
     * @param {Generator} target
     * @returns {Array} an array of entries from the Generator.
     *)
    (*!
     * Gets all own and inherited enumerable keys from a target.
     *
     * @param {Object} target
     * @returns {Array} an array of own and inherited enumerable keys from the target.
     *)
    (*!
     * Determines if two objects have matching values, given a set of keys. Defers to deepEqual for the equality check of
     * each key. If any value of the given key is not equal, the function will return false (early).
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Array} keys An array of keys to compare the values of leftHandOperand and rightHandOperand against
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Recursively check the equality of two Objects. Once basic sameness has been established it will defer to `deepEqual`
     * for each enumerable key in the object.
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Returns true if the argument is a primitive.
     *
     * This intentionally returns true for all objects that can be compared by reference,
     * including functions and symbols.
     *
     * @param {Mixed} value
     * @return {Boolean} result
     *)
  *)
*/
