"use strict";var wB=Object.create;var Lu=Object.defineProperty;var _B=Object.getOwnPropertyDescriptor;var EB=Object.getOwnPropertyNames;var RB=Object.getPrototypeOf,kB=Object.prototype.hasOwnProperty;var Ye=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),PB=(t,e)=>{for(var r in e)Lu(t,r,{get:e[r],enumerable:!0})},hE=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of EB(e))!kB.call(t,i)&&i!==r&&Lu(t,i,{get:()=>e[i],enumerable:!(n=_B(e,i))||n.enumerable});return t};var br=(t,e,r)=>(r=t!=null?wB(RB(t)):{},hE(e||!t||!t.__esModule?Lu(r,"default",{value:t,enumerable:!0}):r,t)),AB=t=>hE(Lu({},"__esModule",{value:!0}),t);var tA=Ye(Zf=>{"use strict";Object.defineProperty(Zf,"__esModule",{value:!0});Zf.default=void 0;var oye=Zf.default="ffffffff-ffff-ffff-ffff-ffffffffffff"});var rA=Ye(Yf=>{"use strict";Object.defineProperty(Yf,"__esModule",{value:!0});Yf.default=void 0;var sye=Yf.default="00000000-0000-0000-0000-000000000000"});var nA=Ye(Xf=>{"use strict";Object.defineProperty(Xf,"__esModule",{value:!0});Xf.default=void 0;var lye=Xf.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i});var bl=Ye(Jf=>{"use strict";Object.defineProperty(Jf,"__esModule",{value:!0});Jf.default=void 0;var z4=G4(nA());function G4(t){return t&&t.__esModule?t:{default:t}}function K4(t){return typeof t=="string"&&z4.default.test(t)}var uye=Jf.default=K4});var wl=Ye(em=>{"use strict";Object.defineProperty(em,"__esModule",{value:!0});em.default=void 0;var Q4=Z4(bl());function Z4(t){return t&&t.__esModule?t:{default:t}}function Y4(t){if(!(0,Q4.default)(t))throw TypeError("Invalid UUID");let e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}var mye=em.default=Y4});var Fi=Ye(_l=>{"use strict";Object.defineProperty(_l,"__esModule",{value:!0});_l.default=void 0;_l.unsafeStringify=iA;var X4=J4(bl());function J4(t){return t&&t.__esModule?t:{default:t}}var Vt=[];for(let t=0;t<256;++t)Vt.push((t+256).toString(16).slice(1));function iA(t,e=0){return(Vt[t[e+0]]+Vt[t[e+1]]+Vt[t[e+2]]+Vt[t[e+3]]+"-"+Vt[t[e+4]]+Vt[t[e+5]]+"-"+Vt[t[e+6]]+Vt[t[e+7]]+"-"+Vt[t[e+8]]+Vt[t[e+9]]+"-"+Vt[t[e+10]]+Vt[t[e+11]]+Vt[t[e+12]]+Vt[t[e+13]]+Vt[t[e+14]]+Vt[t[e+15]]).toLowerCase()}function e6(t,e=0){let r=iA(t,e);if(!(0,X4.default)(r))throw TypeError("Stringified UUID is invalid");return r}var hye=_l.default=e6});var nm=Ye(SS=>{"use strict";Object.defineProperty(SS,"__esModule",{value:!0});SS.default=n6;var t6=r6(require("node:crypto"));function r6(t){return t&&t.__esModule?t:{default:t}}var rm=new Uint8Array(256),tm=rm.length;function n6(){return tm>rm.length-16&&(t6.default.randomFillSync(rm),tm=0),rm.slice(tm,tm+=16)}});var _S=Ye(om=>{"use strict";Object.defineProperty(om,"__esModule",{value:!0});om.default=void 0;var i6=a6(nm()),o6=Fi();function a6(t){return t&&t.__esModule?t:{default:t}}var vS,im,bS=0,wS=0;function s6(t,e,r){let n=e&&r||0,i=e||new Array(16);t=t||{};let o=t.node,s=t.clockseq;if(t._v6||(o||(o=vS),s==null&&(s=im)),o==null||s==null){let g=t.random||(t.rng||i6.default)();o==null&&(o=[g[0],g[1],g[2],g[3],g[4],g[5]],!vS&&!t._v6&&(o[0]|=1,vS=o)),s==null&&(s=(g[6]<<8|g[7])&16383,im===void 0&&!t._v6&&(im=s))}let l=t.msecs!==void 0?t.msecs:Date.now(),p=t.nsecs!==void 0?t.nsecs:wS+1,u=l-bS+(p-wS)/1e4;if(u<0&&t.clockseq===void 0&&(s=s+1&16383),(u<0||l>bS)&&t.nsecs===void 0&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");bS=l,wS=p,im=s,l+=122192928e5;let m=((l&268435455)*1e4+p)%4294967296;i[n++]=m>>>24&255,i[n++]=m>>>16&255,i[n++]=m>>>8&255,i[n++]=m&255;let d=l/4294967296*1e4&268435455;i[n++]=d>>>8&255,i[n++]=d&255,i[n++]=d>>>24&15|16,i[n++]=d>>>16&255,i[n++]=s>>>8|128,i[n++]=s&255;for(let g=0;g<6;++g)i[n+g]=o[g];return e||(0,o6.unsafeStringify)(i)}var xye=om.default=s6});var RS=Ye(ES=>{"use strict";Object.defineProperty(ES,"__esModule",{value:!0});ES.default=u6;var c6=p6(wl()),l6=Fi();function p6(t){return t&&t.__esModule?t:{default:t}}function u6(t){let e=typeof t=="string"?(0,c6.default)(t):t,r=f6(e);return typeof t=="string"?(0,l6.unsafeStringify)(r):r}function f6(t,e=!1){return Uint8Array.of((t[6]&15)<<4|t[7]>>4&15,(t[7]&15)<<4|(t[4]&240)>>4,(t[4]&15)<<4|(t[5]&240)>>4,(t[5]&15)<<4|(t[0]&240)>>4,(t[0]&15)<<4|(t[1]&240)>>4,(t[1]&15)<<4|(t[2]&240)>>4,96|t[2]&15,t[3],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}});var kS=Ye(pa=>{"use strict";Object.defineProperty(pa,"__esModule",{value:!0});pa.URL=pa.DNS=void 0;pa.default=T6;var m6=Fi(),d6=h6(wl());function h6(t){return t&&t.__esModule?t:{default:t}}function g6(t){t=unescape(encodeURIComponent(t));let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}var y6=pa.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",x6=pa.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function T6(t,e,r){function n(i,o,s,l){var p;if(typeof i=="string"&&(i=g6(i)),typeof o=="string"&&(o=(0,d6.default)(o)),((p=o)===null||p===void 0?void 0:p.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+i.length);if(u.set(o),u.set(i,o.length),u=r(u),u[6]=u[6]&15|e,u[8]=u[8]&63|128,s){l=l||0;for(let m=0;m<16;++m)s[l+m]=u[m];return s}return(0,m6.unsafeStringify)(u)}try{n.name=t}catch{}return n.DNS=y6,n.URL=x6,n}});var oA=Ye(am=>{"use strict";Object.defineProperty(am,"__esModule",{value:!0});am.default=void 0;var S6=v6(require("node:crypto"));function v6(t){return t&&t.__esModule?t:{default:t}}function b6(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),S6.default.createHash("md5").update(t).digest()}var bye=am.default=b6});var sA=Ye(sm=>{"use strict";Object.defineProperty(sm,"__esModule",{value:!0});sm.default=void 0;var w6=aA(kS()),_6=aA(oA());function aA(t){return t&&t.__esModule?t:{default:t}}var E6=(0,w6.default)("v3",48,_6.default),_ye=sm.default=E6});var cA=Ye(cm=>{"use strict";Object.defineProperty(cm,"__esModule",{value:!0});cm.default=void 0;var R6=k6(require("node:crypto"));function k6(t){return t&&t.__esModule?t:{default:t}}var Rye=cm.default={randomUUID:R6.default.randomUUID}});var uA=Ye(lm=>{"use strict";Object.defineProperty(lm,"__esModule",{value:!0});lm.default=void 0;var lA=pA(cA()),P6=pA(nm()),A6=Fi();function pA(t){return t&&t.__esModule?t:{default:t}}function M6(t,e,r){if(lA.default.randomUUID&&!e&&!t)return lA.default.randomUUID();t=t||{};let n=t.random||(t.rng||P6.default)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return(0,A6.unsafeStringify)(n)}var Pye=lm.default=M6});var fA=Ye(pm=>{"use strict";Object.defineProperty(pm,"__esModule",{value:!0});pm.default=void 0;var D6=F6(require("node:crypto"));function F6(t){return t&&t.__esModule?t:{default:t}}function I6(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),D6.default.createHash("sha1").update(t).digest()}var Mye=pm.default=I6});var dA=Ye(um=>{"use strict";Object.defineProperty(um,"__esModule",{value:!0});um.default=void 0;var C6=mA(kS()),N6=mA(fA());function mA(t){return t&&t.__esModule?t:{default:t}}var O6=(0,C6.default)("v5",80,N6.default),Fye=um.default=O6});var gA=Ye(PS=>{"use strict";Object.defineProperty(PS,"__esModule",{value:!0});PS.default=V6;var L6=Fi(),U6=hA(_S()),H6=hA(RS());function hA(t){return t&&t.__esModule?t:{default:t}}function V6(t={},e,r=0){let n=(0,U6.default)({...t,_v6:!0},new Uint8Array(16));if(n=(0,H6.default)(n),e){for(let i=0;i<16;i++)e[r+i]=n[i];return e}return(0,L6.unsafeStringify)(n)}});var yA=Ye(AS=>{"use strict";Object.defineProperty(AS,"__esModule",{value:!0});AS.default=j6;var B6=$6(wl()),W6=Fi();function $6(t){return t&&t.__esModule?t:{default:t}}function j6(t){let e=typeof t=="string"?(0,B6.default)(t):t,r=q6(e);return typeof t=="string"?(0,W6.unsafeStringify)(r):r}function q6(t){return Uint8Array.of((t[3]&15)<<4|t[4]>>4&15,(t[4]&15)<<4|(t[5]&240)>>4,(t[5]&15)<<4|t[6]&15,t[7],(t[1]&15)<<4|(t[2]&240)>>4,(t[2]&15)<<4|(t[3]&240)>>4,16|(t[0]&240)>>4,(t[0]&15)<<4|(t[1]&240)>>4,t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}});var SA=Ye(fm=>{"use strict";Object.defineProperty(fm,"__esModule",{value:!0});fm.default=void 0;var z6=K6(nm()),G6=Fi();function K6(t){return t&&t.__esModule?t:{default:t}}var xA=null,TA=null,On=0;function Q6(t,e,r){t=t||{};let n=e&&r||0,i=e||new Uint8Array(16),o=t.random||(t.rng||z6.default)(),s=t.msecs!==void 0?t.msecs:Date.now(),l=t.seq!==void 0?t.seq:null,p=TA,u=xA;return s>On&&t.msecs===void 0&&(On=s,l!==null&&(p=null,u=null)),l!==null&&(l>2147483647&&(l=2147483647),p=l>>>19&4095,u=l&524287),(p===null||u===null)&&(p=o[6]&127,p=p<<8|o[7],u=o[8]&63,u=u<<8|o[9],u=u<<5|o[10]>>>3),s+1e4>On&&l===null?++u>524287&&(u=0,++p>4095&&(p=0,On++)):On=s,TA=p,xA=u,i[n++]=On/1099511627776&255,i[n++]=On/4294967296&255,i[n++]=On/16777216&255,i[n++]=On/65536&255,i[n++]=On/256&255,i[n++]=On&255,i[n++]=p>>>4&15|112,i[n++]=p&255,i[n++]=u>>>13&63|128,i[n++]=u>>>5&255,i[n++]=u<<3&255|o[10]&7,i[n++]=o[11],i[n++]=o[12],i[n++]=o[13],i[n++]=o[14],i[n++]=o[15],e||(0,G6.unsafeStringify)(i)}var Oye=fm.default=Q6});var vA=Ye(mm=>{"use strict";Object.defineProperty(mm,"__esModule",{value:!0});mm.default=void 0;var Z6=Y6(bl());function Y6(t){return t&&t.__esModule?t:{default:t}}function X6(t){if(!(0,Z6.default)(t))throw TypeError("Invalid UUID");return parseInt(t.slice(14,15),16)}var Uye=mm.default=X6});var bA=Ye(Zt=>{"use strict";Object.defineProperty(Zt,"__esModule",{value:!0});Object.defineProperty(Zt,"MAX",{enumerable:!0,get:function(){return J6.default}});Object.defineProperty(Zt,"NIL",{enumerable:!0,get:function(){return e9.default}});Object.defineProperty(Zt,"parse",{enumerable:!0,get:function(){return t9.default}});Object.defineProperty(Zt,"stringify",{enumerable:!0,get:function(){return r9.default}});Object.defineProperty(Zt,"v1",{enumerable:!0,get:function(){return n9.default}});Object.defineProperty(Zt,"v1ToV6",{enumerable:!0,get:function(){return i9.default}});Object.defineProperty(Zt,"v3",{enumerable:!0,get:function(){return o9.default}});Object.defineProperty(Zt,"v4",{enumerable:!0,get:function(){return a9.default}});Object.defineProperty(Zt,"v5",{enumerable:!0,get:function(){return s9.default}});Object.defineProperty(Zt,"v6",{enumerable:!0,get:function(){return c9.default}});Object.defineProperty(Zt,"v6ToV1",{enumerable:!0,get:function(){return l9.default}});Object.defineProperty(Zt,"v7",{enumerable:!0,get:function(){return p9.default}});Object.defineProperty(Zt,"validate",{enumerable:!0,get:function(){return u9.default}});Object.defineProperty(Zt,"version",{enumerable:!0,get:function(){return f9.default}});var J6=Ar(tA()),e9=Ar(rA()),t9=Ar(wl()),r9=Ar(Fi()),n9=Ar(_S()),i9=Ar(RS()),o9=Ar(sA()),a9=Ar(uA()),s9=Ar(dA()),c9=Ar(gA()),l9=Ar(yA()),p9=Ar(SA()),u9=Ar(bl()),f9=Ar(vA());function Ar(t){return t&&t.__esModule?t:{default:t}}});var RA=Ye((EA,hm)=>{(function(t,e){typeof hm=="object"&&hm.exports?hm.exports=e():t.nearley=e()})(EA,function(){function t(p,u,m){return this.id=++t.highestId,this.name=p,this.symbols=u,this.postprocess=m,this}t.highestId=0,t.prototype.toString=function(p){var u=typeof p>"u"?this.symbols.map(l).join(" "):this.symbols.slice(0,p).map(l).join(" ")+" \u25CF "+this.symbols.slice(p).map(l).join(" ");return this.name+" \u2192 "+u};function e(p,u,m,d){this.rule=p,this.dot=u,this.reference=m,this.data=[],this.wantedBy=d,this.isComplete=this.dot===p.symbols.length}e.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},e.prototype.nextState=function(p){var u=new e(this.rule,this.dot+1,this.reference,this.wantedBy);return u.left=this,u.right=p,u.isComplete&&(u.data=u.build(),u.right=void 0),u},e.prototype.build=function(){var p=[],u=this;do p.push(u.right.data),u=u.left;while(u.left);return p.reverse(),p},e.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,o.fail))};function r(p,u){this.grammar=p,this.index=u,this.states=[],this.wants={},this.scannable=[],this.completed={}}r.prototype.process=function(p){for(var u=this.states,m=this.wants,d=this.completed,g=0;g<u.length;g++){var x=u[g];if(x.isComplete){if(x.finish(),x.data!==o.fail){for(var b=x.wantedBy,v=b.length;v--;){var I=b[v];this.complete(I,x)}if(x.reference===this.index){var F=x.rule.name;(this.completed[F]=this.completed[F]||[]).push(x)}}}else{var F=x.rule.symbols[x.dot];if(typeof F!="string"){this.scannable.push(x);continue}if(m[F]){if(m[F].push(x),d.hasOwnProperty(F))for(var V=d[F],v=0;v<V.length;v++){var Z=V[v];this.complete(x,Z)}}else m[F]=[x],this.predict(F)}}},r.prototype.predict=function(p){for(var u=this.grammar.byName[p]||[],m=0;m<u.length;m++){var d=u[m],g=this.wants[p],x=new e(d,0,this.index,g);this.states.push(x)}},r.prototype.complete=function(p,u){var m=p.nextState(u);this.states.push(m)};function n(p,u){this.rules=p,this.start=u||this.rules[0].name;var m=this.byName={};this.rules.forEach(function(d){m.hasOwnProperty(d.name)||(m[d.name]=[]),m[d.name].push(d)})}n.fromCompiled=function(d,u){var m=d.Lexer;d.ParserStart&&(u=d.ParserStart,d=d.ParserRules);var d=d.map(function(x){return new t(x.name,x.symbols,x.postprocess)}),g=new n(d,u);return g.lexer=m,g};function i(){this.reset("")}i.prototype.reset=function(p,u){this.buffer=p,this.index=0,this.line=u?u.line:1,this.lastLineBreak=u?-u.col:0},i.prototype.next=function(){if(this.index<this.buffer.length){var p=this.buffer[this.index++];return p===`
`&&(this.line+=1,this.lastLineBreak=this.index),{value:p}}},i.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},i.prototype.formatError=function(p,u){var m=this.buffer;if(typeof m=="string"){var d=m.split(`
`).slice(Math.max(0,this.line-5),this.line),g=m.indexOf(`
`,this.index);g===-1&&(g=m.length);var x=this.index-this.lastLineBreak,b=String(this.line).length;return u+=" at line "+this.line+" col "+x+`:

`,u+=d.map(function(I,F){return v(this.line-d.length+F+1,b)+" "+I},this).join(`
`),u+=`
`+v("",b+x)+`^
`,u}else return u+" at index "+(this.index-1);function v(I,F){var V=String(I);return Array(F-V.length+1).join(" ")+V}};function o(p,u,m){if(p instanceof n)var d=p,m=u;else var d=n.fromCompiled(p,u);this.grammar=d,this.options={keepHistory:!1,lexer:d.lexer||new i};for(var g in m||{})this.options[g]=m[g];this.lexer=this.options.lexer,this.lexerState=void 0;var x=new r(d,0),b=this.table=[x];x.wants[d.start]=[],x.predict(d.start),x.process(),this.current=0}o.fail={},o.prototype.feed=function(p){var u=this.lexer;u.reset(p,this.lexerState);for(var m;;){try{if(m=u.next(),!m)break}catch(le){var b=new r(this.grammar,this.current+1);this.table.push(b);var d=new Error(this.reportLexerError(le));throw d.offset=this.current,d.token=le.token,d}var g=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var x=this.current+1,b=new r(this.grammar,x);this.table.push(b);for(var v=m.text!==void 0?m.text:m.value,I=u.constructor===i?m.value:u.transform?.(m)??m,F=g.scannable,V=F.length;V--;){var Z=F[V],oe=Z.rule.symbols[Z.dot];if(oe.test?oe.test(I):oe.type?oe.type===m.type:oe.literal===v){var ae=Z.nextState({data:I,token:m,isToken:!0,reference:x-1});b.states.push(ae)}}if(b.process(),b.states.length===0){var d=new Error(this.reportError(m));throw d.offset=this.current,d.token=m,d}this.options.keepHistory&&(g.lexerState=u.save()),this.current++}return g&&(this.lexerState=u.save()),this.results=this.finish(),this},o.prototype.reportLexerError=function(p){var u,m,d=p.token;return d?(u="input "+JSON.stringify(d.text[0])+" (lexer error)",m=this.lexer.formatError(d,"Syntax error")):(u="input (lexer error)",m=p.message),this.reportErrorCommon(m,u)},o.prototype.reportError=function(p){var u=(p.type?p.type+" token: ":"")+JSON.stringify(p.value!==void 0?p.value:p),m=this.lexer.formatError(p,"Syntax error");return this.reportErrorCommon(m,u)},o.prototype.reportErrorCommon=function(p,u){var m=[];m.push(p);var d=this.table.length-2,g=this.table[d],x=g.states.filter(function(v){var I=v.rule.symbols[v.dot];return I&&typeof I!="string"});if(x.length===0)m.push("Unexpected "+u+`. I did not expect any more input. Here is the state of my parse table:
`),this.displayStateStack(g.states,m);else{m.push("Unexpected "+u+`. Instead, I was expecting to see one of the following:
`);var b=x.map(function(v){return this.buildFirstStateStack(v,[])||[v]},this);b.forEach(function(v){var I=v[0],F=I.rule.symbols[I.dot],V=this.getSymbolDisplay(F);m.push("A "+V+" based on:"),this.displayStateStack(v,m)},this)}return m.push(""),m.join(`
`)},o.prototype.displayStateStack=function(p,u){for(var m,d=0,g=0;g<p.length;g++){var x=p[g],b=x.rule.toString(x.dot);b===m?d++:(d>0&&u.push("    ^ "+d+" more lines identical to this"),d=0,u.push("    "+b)),m=b}},o.prototype.getSymbolDisplay=function(p){return s(p)},o.prototype.buildFirstStateStack=function(p,u){if(u.indexOf(p)!==-1)return null;if(p.wantedBy.length===0)return[p];var m=p.wantedBy[0],d=[p].concat(u),g=this.buildFirstStateStack(m,d);return g===null?null:[p].concat(g)},o.prototype.save=function(){var p=this.table[this.current];return p.lexerState=this.lexerState,p},o.prototype.restore=function(p){var u=p.index;this.current=u,this.table[u]=p,this.table.splice(u+1),this.lexerState=p.lexerState,this.results=this.finish()},o.prototype.rewind=function(p){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[p])},o.prototype.finish=function(){var p=[],u=this.grammar.start,m=this.table[this.table.length-1];return m.states.forEach(function(d){d.rule.name===u&&d.dot===d.rule.symbols.length&&d.reference===0&&d.data!==o.fail&&p.push(d)}),p.map(function(d){return d.data})};function s(p){var u=typeof p;if(u==="string")return p;if(u==="object"){if(p.literal)return JSON.stringify(p.literal);if(p instanceof RegExp)return"character matching "+p;if(p.type)return p.type+" token";if(p.test)return"token matching "+String(p.test);throw new Error("Unknown symbol type: "+p)}}function l(p){var u=typeof p;if(u==="string")return p;if(u==="object"){if(p.literal)return JSON.stringify(p.literal);if(p instanceof RegExp)return p.toString();if(p.type)return"%"+p.type;if(p.test)return"<"+String(p.test)+">";throw new Error("Unknown symbol type: "+p)}}return{Parser:o,Grammar:n,Rule:t}})});var FA=Ye((DA,xm)=>{(function(t,e){typeof define=="function"&&define.amd?define([],e):typeof xm=="object"&&xm.exports?xm.exports=e():t.moo=e()})(DA,function(){"use strict";var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,r=typeof new RegExp().sticky=="boolean";function n(L){return L&&e.call(L)==="[object RegExp]"}function i(L){return L&&typeof L=="object"&&!n(L)&&!Array.isArray(L)}function o(L){return L.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function s(L){var O=new RegExp("|"+L);return O.exec("").length-1}function l(L){return"("+L+")"}function p(L){if(!L.length)return"(?!)";var O=L.map(function(D){return"(?:"+D+")"}).join("|");return"(?:"+O+")"}function u(L){if(typeof L=="string")return"(?:"+o(L)+")";if(n(L)){if(L.ignoreCase)throw new Error("RegExp /i flag not allowed");if(L.global)throw new Error("RegExp /g flag is implied");if(L.sticky)throw new Error("RegExp /y flag is implied");if(L.multiline)throw new Error("RegExp /m flag is implied");return L.source}else throw new Error("Not a pattern: "+L)}function m(L,O){return L.length>O?L:Array(O-L.length+1).join(" ")+L}function d(L,O){for(var D=L.length,q=0;;){var K=L.lastIndexOf(`
`,D-1);if(K===-1||(q++,D=K,q===O)||D===0)break}var Y=q<O?0:D+1;return L.substring(Y).split(`
`)}function g(L){for(var O=Object.getOwnPropertyNames(L),D=[],q=0;q<O.length;q++){var K=O[q],Y=L[K],X=[].concat(Y);if(K==="include"){for(var ne=0;ne<X.length;ne++)D.push({include:X[ne]});continue}var ye=[];X.forEach(function(ie){i(ie)?(ye.length&&D.push(b(K,ye)),D.push(b(K,ie)),ye=[]):ye.push(ie)}),ye.length&&D.push(b(K,ye))}return D}function x(L){for(var O=[],D=0;D<L.length;D++){var q=L[D];if(q.include){for(var K=[].concat(q.include),Y=0;Y<K.length;Y++)O.push({include:K[Y]});continue}if(!q.type)throw new Error("Rule has no type: "+JSON.stringify(q));O.push(b(q.type,q))}return O}function b(L,O){if(i(O)||(O={match:O}),O.include)throw new Error("Matching rules cannot also include states");var D={defaultType:L,lineBreaks:!!O.error||!!O.fallback,pop:!1,next:null,push:null,error:!1,fallback:!1,value:null,type:null,shouldThrow:!1};for(var q in O)t.call(O,q)&&(D[q]=O[q]);if(typeof D.type=="string"&&L!==D.type)throw new Error("Type transform cannot be a string (type '"+D.type+"' for token '"+L+"')");var K=D.match;return D.match=Array.isArray(K)?K:K?[K]:[],D.match.sort(function(Y,X){return n(Y)&&n(X)?0:n(X)?-1:n(Y)?1:X.length-Y.length}),D}function v(L){return Array.isArray(L)?x(L):g(L)}var I=b("error",{lineBreaks:!0,shouldThrow:!0});function F(L,O){for(var D=null,q=Object.create(null),K=!0,Y=null,X=[],ne=[],ye=0;ye<L.length;ye++)L[ye].fallback&&(K=!1);for(var ye=0;ye<L.length;ye++){var ie=L[ye];if(ie.include)throw new Error("Inheritance is not allowed in stateless lexers");if(ie.error||ie.fallback){if(D)throw!ie.fallback==!D.fallback?new Error("Multiple "+(ie.fallback?"fallback":"error")+" rules not allowed (for token '"+ie.defaultType+"')"):new Error("fallback and error are mutually exclusive (for token '"+ie.defaultType+"')");D=ie}var Pe=ie.match.slice();if(K)for(;Pe.length&&typeof Pe[0]=="string"&&Pe[0].length===1;){var gr=Pe.shift();q[gr.charCodeAt(0)]=ie}if(ie.pop||ie.push||ie.next){if(!O)throw new Error("State-switching options are not allowed in stateless lexers (for token '"+ie.defaultType+"')");if(ie.fallback)throw new Error("State-switching options are not allowed on fallback tokens (for token '"+ie.defaultType+"')")}if(Pe.length!==0){K=!1,X.push(ie);for(var hi=0;hi<Pe.length;hi++){var yr=Pe[hi];if(n(yr)){if(Y===null)Y=yr.unicode;else if(Y!==yr.unicode&&ie.fallback===!1)throw new Error("If one rule is /u then all must be")}}var Rn=p(Pe.map(u)),Nr=new RegExp(Rn);if(Nr.test(""))throw new Error("RegExp matches empty string: "+Nr);var kn=s(Rn);if(kn>0)throw new Error("RegExp has capture groups: "+Nr+`
Use (?: \u2026 ) instead`);if(!ie.lineBreaks&&Nr.test(`
`))throw new Error("Rule should declare lineBreaks: "+Nr);ne.push(l(Rn))}}var rn=D&&D.fallback,Lo=r&&!rn?"ym":"gm",gi=r||rn?"":"|";Y===!0&&(Lo+="u");var Oa=new RegExp(p(ne)+gi,Lo);return{regexp:Oa,groups:X,fast:q,error:D||I}}function V(L){var O=F(v(L));return new le({start:O},"start")}function Z(L,O,D){var q=L&&(L.push||L.next);if(q&&!D[q])throw new Error("Missing state '"+q+"' (in token '"+L.defaultType+"' of state '"+O+"')");if(L&&L.pop&&+L.pop!=1)throw new Error("pop must be 1 (in token '"+L.defaultType+"' of state '"+O+"')")}function oe(L,O){var D=L.$all?v(L.$all):[];delete L.$all;var q=Object.getOwnPropertyNames(L);O||(O=q[0]);for(var K=Object.create(null),Y=0;Y<q.length;Y++){var X=q[Y];K[X]=v(L[X]).concat(D)}for(var Y=0;Y<q.length;Y++)for(var X=q[Y],ne=K[X],ye=Object.create(null),ie=0;ie<ne.length;ie++){var Pe=ne[ie];if(Pe.include){var gr=[ie,1];if(Pe.include!==X&&!ye[Pe.include]){ye[Pe.include]=!0;var hi=K[Pe.include];if(!hi)throw new Error("Cannot include nonexistent state '"+Pe.include+"' (in state '"+X+"')");for(var yr=0;yr<hi.length;yr++){var Rn=hi[yr];ne.indexOf(Rn)===-1&&gr.push(Rn)}}ne.splice.apply(ne,gr),ie--}}for(var Nr=Object.create(null),Y=0;Y<q.length;Y++){var X=q[Y];Nr[X]=F(K[X],!0)}for(var Y=0;Y<q.length;Y++){for(var kn=q[Y],rn=Nr[kn],Lo=rn.groups,ie=0;ie<Lo.length;ie++)Z(Lo[ie],kn,Nr);for(var gi=Object.getOwnPropertyNames(rn.fast),ie=0;ie<gi.length;ie++)Z(rn.fast[gi[ie]],kn,Nr)}return new le(Nr,O)}function ae(L){for(var O=typeof Map<"u",D=O?new Map:Object.create(null),q=Object.getOwnPropertyNames(L),K=0;K<q.length;K++){var Y=q[K],X=L[Y],ne=Array.isArray(X)?X:[X];ne.forEach(function(ye){if(typeof ye!="string")throw new Error("keyword must be string (in keyword '"+Y+"')");O?D.set(ye,Y):D[ye]=Y})}return function(ye){return O?D.get(ye):D[ye]}}var le=function(L,O){this.startState=O,this.states=L,this.buffer="",this.stack=[],this.reset()};le.prototype.reset=function(L,O){return this.buffer=L||"",this.index=0,this.line=O?O.line:1,this.col=O?O.col:1,this.queuedToken=O?O.queuedToken:null,this.queuedText=O?O.queuedText:"",this.queuedThrow=O?O.queuedThrow:null,this.setState(O?O.state:this.startState),this.stack=O&&O.stack?O.stack.slice():[],this},le.prototype.save=function(){return{line:this.line,col:this.col,state:this.state,stack:this.stack.slice(),queuedToken:this.queuedToken,queuedText:this.queuedText,queuedThrow:this.queuedThrow}},le.prototype.setState=function(L){if(!(!L||this.state===L)){this.state=L;var O=this.states[L];this.groups=O.groups,this.error=O.error,this.re=O.regexp,this.fast=O.fast}},le.prototype.popState=function(){this.setState(this.stack.pop())},le.prototype.pushState=function(L){this.stack.push(this.state),this.setState(L)};var st=r?function(L,O){return L.exec(O)}:function(L,O){var D=L.exec(O);return D[0].length===0?null:D};le.prototype._getGroup=function(L){for(var O=this.groups.length,D=0;D<O;D++)if(L[D+1]!==void 0)return this.groups[D];throw new Error("Cannot find token type for matched text")};function Lt(){return this.value}if(le.prototype.next=function(){var L=this.index;if(this.queuedGroup){var O=this._token(this.queuedGroup,this.queuedText,L);return this.queuedGroup=null,this.queuedText="",O}var D=this.buffer;if(L!==D.length){var X=this.fast[D.charCodeAt(L)];if(X)return this._token(X,D.charAt(L),L);var q=this.re;q.lastIndex=L;var K=st(q,D),Y=this.error;if(K==null)return this._token(Y,D.slice(L,D.length),L);var X=this._getGroup(K),ne=K[0];return Y.fallback&&K.index!==L?(this.queuedGroup=X,this.queuedText=ne,this._token(Y,D.slice(L,K.index),L)):this._token(X,ne,L)}},le.prototype._token=function(L,O,D){var q=0;if(L.lineBreaks){var K=/\n/g,Y=1;if(O===`
`)q=1;else for(;K.exec(O);)q++,Y=K.lastIndex}var X={type:typeof L.type=="function"&&L.type(O)||L.defaultType,value:typeof L.value=="function"?L.value(O):O,text:O,toString:Lt,offset:D,lineBreaks:q,line:this.line,col:this.col},ne=O.length;if(this.index+=ne,this.line+=q,q!==0?this.col=ne-Y+1:this.col+=ne,L.shouldThrow){var ye=new Error(this.formatError(X,"invalid syntax"));throw ye}return L.pop?this.popState():L.push?this.pushState(L.push):L.next&&this.setState(L.next),X},typeof Symbol<"u"&&Symbol.iterator){var ut=function(L){this.lexer=L};ut.prototype.next=function(){var L=this.lexer.next();return{value:L,done:!L}},ut.prototype[Symbol.iterator]=function(){return this},le.prototype[Symbol.iterator]=function(){return new ut(this)}}return le.prototype.formatError=function(L,O){if(L==null)var D=this.buffer.slice(this.index),L={text:D,offset:this.index,lineBreaks:D.indexOf(`
`)===-1?0:1,line:this.line,col:this.col};var q=2,K=Math.max(L.line-q,1),Y=L.line+q,X=String(Y).length,ne=d(this.buffer,this.line-L.line+q+1).slice(0,5),ye=[];ye.push(O+" at line "+L.line+" col "+L.col+":"),ye.push("");for(var ie=0;ie<ne.length;ie++){var Pe=ne[ie],gr=K+ie;ye.push(m(String(gr),X)+"  "+Pe),gr===L.line&&ye.push(m("",X+L.col+1)+"^")}return ye.join(`
`)},le.prototype.clone=function(){return new le(this.states,this.state)},le.prototype.has=function(L){return!0},{compile:V,states:oe,error:Object.freeze({error:!0}),fallback:Object.freeze({fallback:!0}),keywords:ae}})});var Dl=Ye((ti,RM)=>{"use strict";Object.defineProperty(ti,"__esModule",{value:!0});function Ln(t){return typeof t=="object"&&!("toString"in t)?Object.prototype.toString.call(t).slice(8,-1):t}var C5=typeof process=="object"&&process.env.NODE_ENV==="production";function xn(t,e){if(!t)throw C5?new Error("Invariant failed"):new Error(e())}ti.invariant=xn;var JS=Object.prototype.hasOwnProperty,N5=Array.prototype.splice,O5=Object.prototype.toString;function ma(t){return O5.call(t).slice(8,-1)}var Km=Object.assign||function(t,e){return ev(e).forEach(function(r){JS.call(e,r)&&(t[r]=e[r])}),t},ev=typeof Object.getOwnPropertySymbols=="function"?function(t){return Object.keys(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.keys(t)};function So(t){return Array.isArray(t)?Km(t.constructor(t.length),t):ma(t)==="Map"?new Map(t):ma(t)==="Set"?new Set(t):t&&typeof t=="object"?Km(Object.create(Object.getPrototypeOf(t)),t):t}var _M=function(){function t(){this.commands=Km({},L5),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(e,r){return e===r},this.update.newContext=function(){return new t().update}}return Object.defineProperty(t.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(e){this.update.isEquals=e},enumerable:!0,configurable:!0}),t.prototype.extend=function(e,r){this.commands[e]=r},t.prototype.update=function(e,r){var n=this,i=typeof r=="function"?{$apply:r}:r;Array.isArray(e)&&Array.isArray(i)||xn(!Array.isArray(i),function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."}),xn(typeof i=="object"&&i!==null,function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the "+("following commands: "+Object.keys(n.commands).join(", ")+".")});var o=e;return ev(i).forEach(function(s){if(JS.call(n.commands,s)){var l=e===o;o=n.commands[s](i[s],o,i,e),l&&n.isEquals(o,e)&&(o=e)}else{var p=ma(e)==="Map"?n.update(e.get(s),i[s]):n.update(e[s],i[s]),u=ma(o)==="Map"?o.get(s):o[s];(!n.isEquals(p,u)||typeof p>"u"&&!JS.call(e,s))&&(o===e&&(o=So(e)),ma(o)==="Map"?o.set(s,p):o[s]=p)}}),o},t}();ti.Context=_M;var L5={$push:function(t,e,r){return bM(e,r,"$push"),t.length?e.concat(t):e},$unshift:function(t,e,r){return bM(e,r,"$unshift"),t.length?t.concat(e):e},$splice:function(t,e,r,n){return U5(e,r),t.forEach(function(i){EM(i),e===n&&i.length&&(e=So(n)),N5.apply(e,i)}),e},$set:function(t,e,r){return V5(r),t},$toggle:function(t,e){Ml(t,"$toggle");var r=t.length?So(e):e;return t.forEach(function(n){r[n]=!e[n]}),r},$unset:function(t,e,r,n){return Ml(t,"$unset"),t.forEach(function(i){Object.hasOwnProperty.call(e,i)&&(e===n&&(e=So(n)),delete e[i])}),e},$add:function(t,e,r,n){return wM(e,"$add"),Ml(t,"$add"),ma(e)==="Map"?t.forEach(function(i){var o=i[0],s=i[1];e===n&&e.get(o)!==s&&(e=So(n)),e.set(o,s)}):t.forEach(function(i){e===n&&!e.has(i)&&(e=So(n)),e.add(i)}),e},$remove:function(t,e,r,n){return wM(e,"$remove"),Ml(t,"$remove"),t.forEach(function(i){e===n&&e.has(i)&&(e=So(n)),e.delete(i)}),e},$merge:function(t,e,r,n){return B5(e,t),ev(t).forEach(function(i){t[i]!==e[i]&&(e===n&&(e=So(n)),e[i]=t[i])}),e},$apply:function(t,e){return H5(t),t(e)}},tv=new _M;ti.isEquals=tv.update.isEquals;ti.extend=tv.extend;ti.default=tv.update;ti.default.default=RM.exports=Km(ti.default,ti);function bM(t,e,r){xn(Array.isArray(t),function(){return"update(): expected target of "+Ln(r)+" to be an array; got "+Ln(t)+"."}),Ml(e[r],r)}function Ml(t,e){xn(Array.isArray(t),function(){return"update(): expected spec of "+Ln(e)+" to be an array; got "+Ln(t)+". Did you forget to wrap your parameter in an array?"})}function U5(t,e){xn(Array.isArray(t),function(){return"Expected $splice target to be an array; got "+Ln(t)}),EM(e.$splice)}function EM(t){xn(Array.isArray(t),function(){return"update(): expected spec of $splice to be an array of arrays; got "+Ln(t)+". Did you forget to wrap your parameters in an array?"})}function H5(t){xn(typeof t=="function",function(){return"update(): expected spec of $apply to be a function; got "+Ln(t)+"."})}function V5(t){xn(Object.keys(t).length===1,function(){return"Cannot have more than one key in an object with $set"})}function B5(t,e){xn(e&&typeof e=="object",function(){return"update(): $merge expects a spec of type 'object'; got "+Ln(e)}),xn(t&&typeof t=="object",function(){return"update(): $merge expects a target of type 'object'; got "+Ln(t)})}function wM(t,e){var r=ma(t);xn(r==="Map"||r==="Set",function(){return"update(): "+Ln(e)+" expects a target of type Set or Map; got "+Ln(r)})}});var hb=Ye((hc,Tp)=>{(function(){var t,e="4.17.21",r=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",i="Expected a function",o="Invalid `variable` option passed into `_.template`",s="__lodash_hash_undefined__",l=500,p="__lodash_placeholder__",u=1,m=2,d=4,g=1,x=2,b=1,v=2,I=4,F=8,V=16,Z=32,oe=64,ae=128,le=256,st=512,Lt=30,ut="...",L=800,O=16,D=1,q=2,K=3,Y=1/0,X=9007199254740991,ne=17976931348623157e292,ye=NaN,ie=4294967295,Pe=ie-1,gr=ie>>>1,hi=[["ary",ae],["bind",b],["bindKey",v],["curry",F],["curryRight",V],["flip",st],["partial",Z],["partialRight",oe],["rearg",le]],yr="[object Arguments]",Rn="[object Array]",Nr="[object AsyncFunction]",kn="[object Boolean]",rn="[object Date]",Lo="[object DOMException]",gi="[object Error]",Oa="[object Function]",Uw="[object GeneratorFunction]",Pn="[object Map]",Dc="[object Number]",V1="[object Null]",yi="[object Object]",Hw="[object Promise]",B1="[object Proxy]",Fc="[object RegExp]",An="[object Set]",Ic="[object String]",Kp="[object Symbol]",W1="[object Undefined]",Cc="[object WeakMap]",$1="[object WeakSet]",Nc="[object ArrayBuffer]",La="[object DataView]",Xy="[object Float32Array]",Jy="[object Float64Array]",ex="[object Int8Array]",tx="[object Int16Array]",rx="[object Int32Array]",nx="[object Uint8Array]",ix="[object Uint8ClampedArray]",ox="[object Uint16Array]",ax="[object Uint32Array]",j1=/\b__p \+= '';/g,q1=/\b(__p \+=) '' \+/g,z1=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Vw=/&(?:amp|lt|gt|quot|#39);/g,Bw=/[&<>"']/g,G1=RegExp(Vw.source),K1=RegExp(Bw.source),Q1=/<%-([\s\S]+?)%>/g,Z1=/<%([\s\S]+?)%>/g,Ww=/<%=([\s\S]+?)%>/g,Y1=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,X1=/^\w*$/,J1=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,sx=/[\\^$.*+?()[\]{}|]/g,eN=RegExp(sx.source),cx=/^\s+/,tN=/\s/,rN=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,nN=/\{\n\/\* \[wrapped with (.+)\] \*/,iN=/,? & /,oN=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,aN=/[()=,{}\[\]\/\s]/,sN=/\\(\\)?/g,cN=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,$w=/\w*$/,lN=/^[-+]0x[0-9a-f]+$/i,pN=/^0b[01]+$/i,uN=/^\[object .+?Constructor\]$/,fN=/^0o[0-7]+$/i,mN=/^(?:0|[1-9]\d*)$/,dN=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Qp=/($^)/,hN=/['\n\r\u2028\u2029\\]/g,Zp="\\ud800-\\udfff",gN="\\u0300-\\u036f",yN="\\ufe20-\\ufe2f",xN="\\u20d0-\\u20ff",jw=gN+yN+xN,qw="\\u2700-\\u27bf",zw="a-z\\xdf-\\xf6\\xf8-\\xff",TN="\\xac\\xb1\\xd7\\xf7",SN="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",vN="\\u2000-\\u206f",bN=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Gw="A-Z\\xc0-\\xd6\\xd8-\\xde",Kw="\\ufe0e\\ufe0f",Qw=TN+SN+vN+bN,lx="['\u2019]",wN="["+Zp+"]",Zw="["+Qw+"]",Yp="["+jw+"]",Yw="\\d+",_N="["+qw+"]",Xw="["+zw+"]",Jw="[^"+Zp+Qw+Yw+qw+zw+Gw+"]",px="\\ud83c[\\udffb-\\udfff]",EN="(?:"+Yp+"|"+px+")",e_="[^"+Zp+"]",ux="(?:\\ud83c[\\udde6-\\uddff]){2}",fx="[\\ud800-\\udbff][\\udc00-\\udfff]",Ua="["+Gw+"]",t_="\\u200d",r_="(?:"+Xw+"|"+Jw+")",RN="(?:"+Ua+"|"+Jw+")",n_="(?:"+lx+"(?:d|ll|m|re|s|t|ve))?",i_="(?:"+lx+"(?:D|LL|M|RE|S|T|VE))?",o_=EN+"?",a_="["+Kw+"]?",kN="(?:"+t_+"(?:"+[e_,ux,fx].join("|")+")"+a_+o_+")*",PN="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",AN="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",s_=a_+o_+kN,MN="(?:"+[_N,ux,fx].join("|")+")"+s_,DN="(?:"+[e_+Yp+"?",Yp,ux,fx,wN].join("|")+")",FN=RegExp(lx,"g"),IN=RegExp(Yp,"g"),mx=RegExp(px+"(?="+px+")|"+DN+s_,"g"),CN=RegExp([Ua+"?"+Xw+"+"+n_+"(?="+[Zw,Ua,"$"].join("|")+")",RN+"+"+i_+"(?="+[Zw,Ua+r_,"$"].join("|")+")",Ua+"?"+r_+"+"+n_,Ua+"+"+i_,AN,PN,Yw,MN].join("|"),"g"),NN=RegExp("["+t_+Zp+jw+Kw+"]"),ON=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,LN=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],UN=-1,et={};et[Xy]=et[Jy]=et[ex]=et[tx]=et[rx]=et[nx]=et[ix]=et[ox]=et[ax]=!0,et[yr]=et[Rn]=et[Nc]=et[kn]=et[La]=et[rn]=et[gi]=et[Oa]=et[Pn]=et[Dc]=et[yi]=et[Fc]=et[An]=et[Ic]=et[Cc]=!1;var Xe={};Xe[yr]=Xe[Rn]=Xe[Nc]=Xe[La]=Xe[kn]=Xe[rn]=Xe[Xy]=Xe[Jy]=Xe[ex]=Xe[tx]=Xe[rx]=Xe[Pn]=Xe[Dc]=Xe[yi]=Xe[Fc]=Xe[An]=Xe[Ic]=Xe[Kp]=Xe[nx]=Xe[ix]=Xe[ox]=Xe[ax]=!0,Xe[gi]=Xe[Oa]=Xe[Cc]=!1;var HN={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},VN={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},BN={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},WN={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},$N=parseFloat,jN=parseInt,c_=typeof global=="object"&&global&&global.Object===Object&&global,qN=typeof self=="object"&&self&&self.Object===Object&&self,Mt=c_||qN||Function("return this")(),dx=typeof hc=="object"&&hc&&!hc.nodeType&&hc,Uo=dx&&typeof Tp=="object"&&Tp&&!Tp.nodeType&&Tp,l_=Uo&&Uo.exports===dx,hx=l_&&c_.process,nn=function(){try{var P=Uo&&Uo.require&&Uo.require("util").types;return P||hx&&hx.binding&&hx.binding("util")}catch{}}(),p_=nn&&nn.isArrayBuffer,u_=nn&&nn.isDate,f_=nn&&nn.isMap,m_=nn&&nn.isRegExp,d_=nn&&nn.isSet,h_=nn&&nn.isTypedArray;function Or(P,B,U){switch(U.length){case 0:return P.call(B);case 1:return P.call(B,U[0]);case 2:return P.call(B,U[0],U[1]);case 3:return P.call(B,U[0],U[1],U[2])}return P.apply(B,U)}function zN(P,B,U,re){for(var Te=-1,We=P==null?0:P.length;++Te<We;){var Et=P[Te];B(re,Et,U(Et),P)}return re}function on(P,B){for(var U=-1,re=P==null?0:P.length;++U<re&&B(P[U],U,P)!==!1;);return P}function GN(P,B){for(var U=P==null?0:P.length;U--&&B(P[U],U,P)!==!1;);return P}function g_(P,B){for(var U=-1,re=P==null?0:P.length;++U<re;)if(!B(P[U],U,P))return!1;return!0}function ji(P,B){for(var U=-1,re=P==null?0:P.length,Te=0,We=[];++U<re;){var Et=P[U];B(Et,U,P)&&(We[Te++]=Et)}return We}function Xp(P,B){var U=P==null?0:P.length;return!!U&&Ha(P,B,0)>-1}function gx(P,B,U){for(var re=-1,Te=P==null?0:P.length;++re<Te;)if(U(B,P[re]))return!0;return!1}function nt(P,B){for(var U=-1,re=P==null?0:P.length,Te=Array(re);++U<re;)Te[U]=B(P[U],U,P);return Te}function qi(P,B){for(var U=-1,re=B.length,Te=P.length;++U<re;)P[Te+U]=B[U];return P}function yx(P,B,U,re){var Te=-1,We=P==null?0:P.length;for(re&&We&&(U=P[++Te]);++Te<We;)U=B(U,P[Te],Te,P);return U}function KN(P,B,U,re){var Te=P==null?0:P.length;for(re&&Te&&(U=P[--Te]);Te--;)U=B(U,P[Te],Te,P);return U}function xx(P,B){for(var U=-1,re=P==null?0:P.length;++U<re;)if(B(P[U],U,P))return!0;return!1}var QN=Tx("length");function ZN(P){return P.split("")}function YN(P){return P.match(oN)||[]}function y_(P,B,U){var re;return U(P,function(Te,We,Et){if(B(Te,We,Et))return re=We,!1}),re}function Jp(P,B,U,re){for(var Te=P.length,We=U+(re?1:-1);re?We--:++We<Te;)if(B(P[We],We,P))return We;return-1}function Ha(P,B,U){return B===B?lO(P,B,U):Jp(P,x_,U)}function XN(P,B,U,re){for(var Te=U-1,We=P.length;++Te<We;)if(re(P[Te],B))return Te;return-1}function x_(P){return P!==P}function T_(P,B){var U=P==null?0:P.length;return U?vx(P,B)/U:ye}function Tx(P){return function(B){return B==null?t:B[P]}}function Sx(P){return function(B){return P==null?t:P[B]}}function S_(P,B,U,re,Te){return Te(P,function(We,Et,Ze){U=re?(re=!1,We):B(U,We,Et,Ze)}),U}function JN(P,B){var U=P.length;for(P.sort(B);U--;)P[U]=P[U].value;return P}function vx(P,B){for(var U,re=-1,Te=P.length;++re<Te;){var We=B(P[re]);We!==t&&(U=U===t?We:U+We)}return U}function bx(P,B){for(var U=-1,re=Array(P);++U<P;)re[U]=B(U);return re}function eO(P,B){return nt(B,function(U){return[U,P[U]]})}function v_(P){return P&&P.slice(0,E_(P)+1).replace(cx,"")}function Lr(P){return function(B){return P(B)}}function wx(P,B){return nt(B,function(U){return P[U]})}function Oc(P,B){return P.has(B)}function b_(P,B){for(var U=-1,re=P.length;++U<re&&Ha(B,P[U],0)>-1;);return U}function w_(P,B){for(var U=P.length;U--&&Ha(B,P[U],0)>-1;);return U}function tO(P,B){for(var U=P.length,re=0;U--;)P[U]===B&&++re;return re}var rO=Sx(HN),nO=Sx(VN);function iO(P){return"\\"+WN[P]}function oO(P,B){return P==null?t:P[B]}function Va(P){return NN.test(P)}function aO(P){return ON.test(P)}function sO(P){for(var B,U=[];!(B=P.next()).done;)U.push(B.value);return U}function _x(P){var B=-1,U=Array(P.size);return P.forEach(function(re,Te){U[++B]=[Te,re]}),U}function __(P,B){return function(U){return P(B(U))}}function zi(P,B){for(var U=-1,re=P.length,Te=0,We=[];++U<re;){var Et=P[U];(Et===B||Et===p)&&(P[U]=p,We[Te++]=U)}return We}function eu(P){var B=-1,U=Array(P.size);return P.forEach(function(re){U[++B]=re}),U}function cO(P){var B=-1,U=Array(P.size);return P.forEach(function(re){U[++B]=[re,re]}),U}function lO(P,B,U){for(var re=U-1,Te=P.length;++re<Te;)if(P[re]===B)return re;return-1}function pO(P,B,U){for(var re=U+1;re--;)if(P[re]===B)return re;return re}function Ba(P){return Va(P)?fO(P):QN(P)}function Mn(P){return Va(P)?mO(P):ZN(P)}function E_(P){for(var B=P.length;B--&&tN.test(P.charAt(B)););return B}var uO=Sx(BN);function fO(P){for(var B=mx.lastIndex=0;mx.test(P);)++B;return B}function mO(P){return P.match(mx)||[]}function dO(P){return P.match(CN)||[]}var hO=function P(B){B=B==null?Mt:Gi.defaults(Mt.Object(),B,Gi.pick(Mt,LN));var U=B.Array,re=B.Date,Te=B.Error,We=B.Function,Et=B.Math,Ze=B.Object,Ex=B.RegExp,gO=B.String,an=B.TypeError,tu=U.prototype,yO=We.prototype,Wa=Ze.prototype,ru=B["__core-js_shared__"],nu=yO.toString,qe=Wa.hasOwnProperty,xO=0,R_=function(){var a=/[^.]+$/.exec(ru&&ru.keys&&ru.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),iu=Wa.toString,TO=nu.call(Ze),SO=Mt._,vO=Ex("^"+nu.call(qe).replace(sx,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ou=l_?B.Buffer:t,Ki=B.Symbol,au=B.Uint8Array,k_=ou?ou.allocUnsafe:t,su=__(Ze.getPrototypeOf,Ze),P_=Ze.create,A_=Wa.propertyIsEnumerable,cu=tu.splice,M_=Ki?Ki.isConcatSpreadable:t,Lc=Ki?Ki.iterator:t,Ho=Ki?Ki.toStringTag:t,lu=function(){try{var a=jo(Ze,"defineProperty");return a({},"",{}),a}catch{}}(),bO=B.clearTimeout!==Mt.clearTimeout&&B.clearTimeout,wO=re&&re.now!==Mt.Date.now&&re.now,_O=B.setTimeout!==Mt.setTimeout&&B.setTimeout,pu=Et.ceil,uu=Et.floor,Rx=Ze.getOwnPropertySymbols,EO=ou?ou.isBuffer:t,D_=B.isFinite,RO=tu.join,kO=__(Ze.keys,Ze),Rt=Et.max,qt=Et.min,PO=re.now,AO=B.parseInt,F_=Et.random,MO=tu.reverse,kx=jo(B,"DataView"),Uc=jo(B,"Map"),Px=jo(B,"Promise"),$a=jo(B,"Set"),Hc=jo(B,"WeakMap"),Vc=jo(Ze,"create"),fu=Hc&&new Hc,ja={},DO=qo(kx),FO=qo(Uc),IO=qo(Px),CO=qo($a),NO=qo(Hc),mu=Ki?Ki.prototype:t,Bc=mu?mu.valueOf:t,I_=mu?mu.toString:t;function T(a){if(ft(a)&&!ve(a)&&!(a instanceof Ce)){if(a instanceof sn)return a;if(qe.call(a,"__wrapped__"))return C0(a)}return new sn(a)}var qa=function(){function a(){}return function(c){if(!ct(c))return{};if(P_)return P_(c);a.prototype=c;var f=new a;return a.prototype=t,f}}();function du(){}function sn(a,c){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=t}T.templateSettings={escape:Q1,evaluate:Z1,interpolate:Ww,variable:"",imports:{_:T}},T.prototype=du.prototype,T.prototype.constructor=T,sn.prototype=qa(du.prototype),sn.prototype.constructor=sn;function Ce(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ie,this.__views__=[]}function OO(){var a=new Ce(this.__wrapped__);return a.__actions__=xr(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=xr(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=xr(this.__views__),a}function LO(){if(this.__filtered__){var a=new Ce(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a}function UO(){var a=this.__wrapped__.value(),c=this.__dir__,f=ve(a),h=c<0,y=f?a.length:0,S=ZL(0,y,this.__views__),E=S.start,R=S.end,M=R-E,W=h?R:E-1,$=this.__iteratees__,G=$.length,J=0,se=qt(M,this.__takeCount__);if(!f||!h&&y==M&&se==M)return n0(a,this.__actions__);var de=[];e:for(;M--&&J<se;){W+=c;for(var ke=-1,he=a[W];++ke<G;){var Fe=$[ke],Ne=Fe.iteratee,Vr=Fe.type,or=Ne(he);if(Vr==q)he=or;else if(!or){if(Vr==D)continue e;break e}}de[J++]=he}return de}Ce.prototype=qa(du.prototype),Ce.prototype.constructor=Ce;function Vo(a){var c=-1,f=a==null?0:a.length;for(this.clear();++c<f;){var h=a[c];this.set(h[0],h[1])}}function HO(){this.__data__=Vc?Vc(null):{},this.size=0}function VO(a){var c=this.has(a)&&delete this.__data__[a];return this.size-=c?1:0,c}function BO(a){var c=this.__data__;if(Vc){var f=c[a];return f===s?t:f}return qe.call(c,a)?c[a]:t}function WO(a){var c=this.__data__;return Vc?c[a]!==t:qe.call(c,a)}function $O(a,c){var f=this.__data__;return this.size+=this.has(a)?0:1,f[a]=Vc&&c===t?s:c,this}Vo.prototype.clear=HO,Vo.prototype.delete=VO,Vo.prototype.get=BO,Vo.prototype.has=WO,Vo.prototype.set=$O;function xi(a){var c=-1,f=a==null?0:a.length;for(this.clear();++c<f;){var h=a[c];this.set(h[0],h[1])}}function jO(){this.__data__=[],this.size=0}function qO(a){var c=this.__data__,f=hu(c,a);if(f<0)return!1;var h=c.length-1;return f==h?c.pop():cu.call(c,f,1),--this.size,!0}function zO(a){var c=this.__data__,f=hu(c,a);return f<0?t:c[f][1]}function GO(a){return hu(this.__data__,a)>-1}function KO(a,c){var f=this.__data__,h=hu(f,a);return h<0?(++this.size,f.push([a,c])):f[h][1]=c,this}xi.prototype.clear=jO,xi.prototype.delete=qO,xi.prototype.get=zO,xi.prototype.has=GO,xi.prototype.set=KO;function Ti(a){var c=-1,f=a==null?0:a.length;for(this.clear();++c<f;){var h=a[c];this.set(h[0],h[1])}}function QO(){this.size=0,this.__data__={hash:new Vo,map:new(Uc||xi),string:new Vo}}function ZO(a){var c=ku(this,a).delete(a);return this.size-=c?1:0,c}function YO(a){return ku(this,a).get(a)}function XO(a){return ku(this,a).has(a)}function JO(a,c){var f=ku(this,a),h=f.size;return f.set(a,c),this.size+=f.size==h?0:1,this}Ti.prototype.clear=QO,Ti.prototype.delete=ZO,Ti.prototype.get=YO,Ti.prototype.has=XO,Ti.prototype.set=JO;function Bo(a){var c=-1,f=a==null?0:a.length;for(this.__data__=new Ti;++c<f;)this.add(a[c])}function eL(a){return this.__data__.set(a,s),this}function tL(a){return this.__data__.has(a)}Bo.prototype.add=Bo.prototype.push=eL,Bo.prototype.has=tL;function Dn(a){var c=this.__data__=new xi(a);this.size=c.size}function rL(){this.__data__=new xi,this.size=0}function nL(a){var c=this.__data__,f=c.delete(a);return this.size=c.size,f}function iL(a){return this.__data__.get(a)}function oL(a){return this.__data__.has(a)}function aL(a,c){var f=this.__data__;if(f instanceof xi){var h=f.__data__;if(!Uc||h.length<r-1)return h.push([a,c]),this.size=++f.size,this;f=this.__data__=new Ti(h)}return f.set(a,c),this.size=f.size,this}Dn.prototype.clear=rL,Dn.prototype.delete=nL,Dn.prototype.get=iL,Dn.prototype.has=oL,Dn.prototype.set=aL;function C_(a,c){var f=ve(a),h=!f&&zo(a),y=!f&&!h&&Ji(a),S=!f&&!h&&!y&&Qa(a),E=f||h||y||S,R=E?bx(a.length,gO):[],M=R.length;for(var W in a)(c||qe.call(a,W))&&!(E&&(W=="length"||y&&(W=="offset"||W=="parent")||S&&(W=="buffer"||W=="byteLength"||W=="byteOffset")||wi(W,M)))&&R.push(W);return R}function N_(a){var c=a.length;return c?a[Hx(0,c-1)]:t}function sL(a,c){return Pu(xr(a),Wo(c,0,a.length))}function cL(a){return Pu(xr(a))}function Ax(a,c,f){(f!==t&&!Fn(a[c],f)||f===t&&!(c in a))&&Si(a,c,f)}function Wc(a,c,f){var h=a[c];(!(qe.call(a,c)&&Fn(h,f))||f===t&&!(c in a))&&Si(a,c,f)}function hu(a,c){for(var f=a.length;f--;)if(Fn(a[f][0],c))return f;return-1}function lL(a,c,f,h){return Qi(a,function(y,S,E){c(h,y,f(y),E)}),h}function O_(a,c){return a&&Kn(c,Dt(c),a)}function pL(a,c){return a&&Kn(c,Sr(c),a)}function Si(a,c,f){c=="__proto__"&&lu?lu(a,c,{configurable:!0,enumerable:!0,value:f,writable:!0}):a[c]=f}function Mx(a,c){for(var f=-1,h=c.length,y=U(h),S=a==null;++f<h;)y[f]=S?t:pT(a,c[f]);return y}function Wo(a,c,f){return a===a&&(f!==t&&(a=a<=f?a:f),c!==t&&(a=a>=c?a:c)),a}function cn(a,c,f,h,y,S){var E,R=c&u,M=c&m,W=c&d;if(f&&(E=y?f(a,h,y,S):f(a)),E!==t)return E;if(!ct(a))return a;var $=ve(a);if($){if(E=XL(a),!R)return xr(a,E)}else{var G=zt(a),J=G==Oa||G==Uw;if(Ji(a))return a0(a,R);if(G==yi||G==yr||J&&!y){if(E=M||J?{}:E0(a),!R)return M?BL(a,pL(E,a)):VL(a,O_(E,a))}else{if(!Xe[G])return y?a:{};E=JL(a,G,R)}}S||(S=new Dn);var se=S.get(a);if(se)return se;S.set(a,E),eE(a)?a.forEach(function(he){E.add(cn(he,c,f,he,a,S))}):X0(a)&&a.forEach(function(he,Fe){E.set(Fe,cn(he,c,f,Fe,a,S))});var de=W?M?Zx:Qx:M?Sr:Dt,ke=$?t:de(a);return on(ke||a,function(he,Fe){ke&&(Fe=he,he=a[Fe]),Wc(E,Fe,cn(he,c,f,Fe,a,S))}),E}function uL(a){var c=Dt(a);return function(f){return L_(f,a,c)}}function L_(a,c,f){var h=f.length;if(a==null)return!h;for(a=Ze(a);h--;){var y=f[h],S=c[y],E=a[y];if(E===t&&!(y in a)||!S(E))return!1}return!0}function U_(a,c,f){if(typeof a!="function")throw new an(i);return Qc(function(){a.apply(t,f)},c)}function $c(a,c,f,h){var y=-1,S=Xp,E=!0,R=a.length,M=[],W=c.length;if(!R)return M;f&&(c=nt(c,Lr(f))),h?(S=gx,E=!1):c.length>=r&&(S=Oc,E=!1,c=new Bo(c));e:for(;++y<R;){var $=a[y],G=f==null?$:f($);if($=h||$!==0?$:0,E&&G===G){for(var J=W;J--;)if(c[J]===G)continue e;M.push($)}else S(c,G,h)||M.push($)}return M}var Qi=u0(Gn),H_=u0(Fx,!0);function fL(a,c){var f=!0;return Qi(a,function(h,y,S){return f=!!c(h,y,S),f}),f}function gu(a,c,f){for(var h=-1,y=a.length;++h<y;){var S=a[h],E=c(S);if(E!=null&&(R===t?E===E&&!Hr(E):f(E,R)))var R=E,M=S}return M}function mL(a,c,f,h){var y=a.length;for(f=_e(f),f<0&&(f=-f>y?0:y+f),h=h===t||h>y?y:_e(h),h<0&&(h+=y),h=f>h?0:rE(h);f<h;)a[f++]=c;return a}function V_(a,c){var f=[];return Qi(a,function(h,y,S){c(h,y,S)&&f.push(h)}),f}function Ut(a,c,f,h,y){var S=-1,E=a.length;for(f||(f=tU),y||(y=[]);++S<E;){var R=a[S];c>0&&f(R)?c>1?Ut(R,c-1,f,h,y):qi(y,R):h||(y[y.length]=R)}return y}var Dx=f0(),B_=f0(!0);function Gn(a,c){return a&&Dx(a,c,Dt)}function Fx(a,c){return a&&B_(a,c,Dt)}function yu(a,c){return ji(c,function(f){return _i(a[f])})}function $o(a,c){c=Yi(c,a);for(var f=0,h=c.length;a!=null&&f<h;)a=a[Qn(c[f++])];return f&&f==h?a:t}function W_(a,c,f){var h=c(a);return ve(a)?h:qi(h,f(a))}function nr(a){return a==null?a===t?W1:V1:Ho&&Ho in Ze(a)?QL(a):cU(a)}function Ix(a,c){return a>c}function dL(a,c){return a!=null&&qe.call(a,c)}function hL(a,c){return a!=null&&c in Ze(a)}function gL(a,c,f){return a>=qt(c,f)&&a<Rt(c,f)}function Cx(a,c,f){for(var h=f?gx:Xp,y=a[0].length,S=a.length,E=S,R=U(S),M=1/0,W=[];E--;){var $=a[E];E&&c&&($=nt($,Lr(c))),M=qt($.length,M),R[E]=!f&&(c||y>=120&&$.length>=120)?new Bo(E&&$):t}$=a[0];var G=-1,J=R[0];e:for(;++G<y&&W.length<M;){var se=$[G],de=c?c(se):se;if(se=f||se!==0?se:0,!(J?Oc(J,de):h(W,de,f))){for(E=S;--E;){var ke=R[E];if(!(ke?Oc(ke,de):h(a[E],de,f)))continue e}J&&J.push(de),W.push(se)}}return W}function yL(a,c,f,h){return Gn(a,function(y,S,E){c(h,f(y),S,E)}),h}function jc(a,c,f){c=Yi(c,a),a=A0(a,c);var h=a==null?a:a[Qn(pn(c))];return h==null?t:Or(h,a,f)}function $_(a){return ft(a)&&nr(a)==yr}function xL(a){return ft(a)&&nr(a)==Nc}function TL(a){return ft(a)&&nr(a)==rn}function qc(a,c,f,h,y){return a===c?!0:a==null||c==null||!ft(a)&&!ft(c)?a!==a&&c!==c:SL(a,c,f,h,qc,y)}function SL(a,c,f,h,y,S){var E=ve(a),R=ve(c),M=E?Rn:zt(a),W=R?Rn:zt(c);M=M==yr?yi:M,W=W==yr?yi:W;var $=M==yi,G=W==yi,J=M==W;if(J&&Ji(a)){if(!Ji(c))return!1;E=!0,$=!1}if(J&&!$)return S||(S=new Dn),E||Qa(a)?b0(a,c,f,h,y,S):GL(a,c,M,f,h,y,S);if(!(f&g)){var se=$&&qe.call(a,"__wrapped__"),de=G&&qe.call(c,"__wrapped__");if(se||de){var ke=se?a.value():a,he=de?c.value():c;return S||(S=new Dn),y(ke,he,f,h,S)}}return J?(S||(S=new Dn),KL(a,c,f,h,y,S)):!1}function vL(a){return ft(a)&&zt(a)==Pn}function Nx(a,c,f,h){var y=f.length,S=y,E=!h;if(a==null)return!S;for(a=Ze(a);y--;){var R=f[y];if(E&&R[2]?R[1]!==a[R[0]]:!(R[0]in a))return!1}for(;++y<S;){R=f[y];var M=R[0],W=a[M],$=R[1];if(E&&R[2]){if(W===t&&!(M in a))return!1}else{var G=new Dn;if(h)var J=h(W,$,M,a,c,G);if(!(J===t?qc($,W,g|x,h,G):J))return!1}}return!0}function j_(a){if(!ct(a)||nU(a))return!1;var c=_i(a)?vO:uN;return c.test(qo(a))}function bL(a){return ft(a)&&nr(a)==Fc}function wL(a){return ft(a)&&zt(a)==An}function _L(a){return ft(a)&&Cu(a.length)&&!!et[nr(a)]}function q_(a){return typeof a=="function"?a:a==null?vr:typeof a=="object"?ve(a)?K_(a[0],a[1]):G_(a):mE(a)}function Ox(a){if(!Kc(a))return kO(a);var c=[];for(var f in Ze(a))qe.call(a,f)&&f!="constructor"&&c.push(f);return c}function EL(a){if(!ct(a))return sU(a);var c=Kc(a),f=[];for(var h in a)h=="constructor"&&(c||!qe.call(a,h))||f.push(h);return f}function Lx(a,c){return a<c}function z_(a,c){var f=-1,h=Tr(a)?U(a.length):[];return Qi(a,function(y,S,E){h[++f]=c(y,S,E)}),h}function G_(a){var c=Xx(a);return c.length==1&&c[0][2]?k0(c[0][0],c[0][1]):function(f){return f===a||Nx(f,a,c)}}function K_(a,c){return eT(a)&&R0(c)?k0(Qn(a),c):function(f){var h=pT(f,a);return h===t&&h===c?uT(f,a):qc(c,h,g|x)}}function xu(a,c,f,h,y){a!==c&&Dx(c,function(S,E){if(y||(y=new Dn),ct(S))RL(a,c,E,f,xu,h,y);else{var R=h?h(rT(a,E),S,E+"",a,c,y):t;R===t&&(R=S),Ax(a,E,R)}},Sr)}function RL(a,c,f,h,y,S,E){var R=rT(a,f),M=rT(c,f),W=E.get(M);if(W){Ax(a,f,W);return}var $=S?S(R,M,f+"",a,c,E):t,G=$===t;if(G){var J=ve(M),se=!J&&Ji(M),de=!J&&!se&&Qa(M);$=M,J||se||de?ve(R)?$=R:gt(R)?$=xr(R):se?(G=!1,$=a0(M,!0)):de?(G=!1,$=s0(M,!0)):$=[]:Zc(M)||zo(M)?($=R,zo(R)?$=nE(R):(!ct(R)||_i(R))&&($=E0(M))):G=!1}G&&(E.set(M,$),y($,M,h,S,E),E.delete(M)),Ax(a,f,$)}function Q_(a,c){var f=a.length;if(f)return c+=c<0?f:0,wi(c,f)?a[c]:t}function Z_(a,c,f){c.length?c=nt(c,function(S){return ve(S)?function(E){return $o(E,S.length===1?S[0]:S)}:S}):c=[vr];var h=-1;c=nt(c,Lr(me()));var y=z_(a,function(S,E,R){var M=nt(c,function(W){return W(S)});return{criteria:M,index:++h,value:S}});return JN(y,function(S,E){return HL(S,E,f)})}function kL(a,c){return Y_(a,c,function(f,h){return uT(a,h)})}function Y_(a,c,f){for(var h=-1,y=c.length,S={};++h<y;){var E=c[h],R=$o(a,E);f(R,E)&&zc(S,Yi(E,a),R)}return S}function PL(a){return function(c){return $o(c,a)}}function Ux(a,c,f,h){var y=h?XN:Ha,S=-1,E=c.length,R=a;for(a===c&&(c=xr(c)),f&&(R=nt(a,Lr(f)));++S<E;)for(var M=0,W=c[S],$=f?f(W):W;(M=y(R,$,M,h))>-1;)R!==a&&cu.call(R,M,1),cu.call(a,M,1);return a}function X_(a,c){for(var f=a?c.length:0,h=f-1;f--;){var y=c[f];if(f==h||y!==S){var S=y;wi(y)?cu.call(a,y,1):Wx(a,y)}}return a}function Hx(a,c){return a+uu(F_()*(c-a+1))}function AL(a,c,f,h){for(var y=-1,S=Rt(pu((c-a)/(f||1)),0),E=U(S);S--;)E[h?S:++y]=a,a+=f;return E}function Vx(a,c){var f="";if(!a||c<1||c>X)return f;do c%2&&(f+=a),c=uu(c/2),c&&(a+=a);while(c);return f}function Ae(a,c){return nT(P0(a,c,vr),a+"")}function ML(a){return N_(Za(a))}function DL(a,c){var f=Za(a);return Pu(f,Wo(c,0,f.length))}function zc(a,c,f,h){if(!ct(a))return a;c=Yi(c,a);for(var y=-1,S=c.length,E=S-1,R=a;R!=null&&++y<S;){var M=Qn(c[y]),W=f;if(M==="__proto__"||M==="constructor"||M==="prototype")return a;if(y!=E){var $=R[M];W=h?h($,M,R):t,W===t&&(W=ct($)?$:wi(c[y+1])?[]:{})}Wc(R,M,W),R=R[M]}return a}var J_=fu?function(a,c){return fu.set(a,c),a}:vr,FL=lu?function(a,c){return lu(a,"toString",{configurable:!0,enumerable:!1,value:mT(c),writable:!0})}:vr;function IL(a){return Pu(Za(a))}function ln(a,c,f){var h=-1,y=a.length;c<0&&(c=-c>y?0:y+c),f=f>y?y:f,f<0&&(f+=y),y=c>f?0:f-c>>>0,c>>>=0;for(var S=U(y);++h<y;)S[h]=a[h+c];return S}function CL(a,c){var f;return Qi(a,function(h,y,S){return f=c(h,y,S),!f}),!!f}function Tu(a,c,f){var h=0,y=a==null?h:a.length;if(typeof c=="number"&&c===c&&y<=gr){for(;h<y;){var S=h+y>>>1,E=a[S];E!==null&&!Hr(E)&&(f?E<=c:E<c)?h=S+1:y=S}return y}return Bx(a,c,vr,f)}function Bx(a,c,f,h){var y=0,S=a==null?0:a.length;if(S===0)return 0;c=f(c);for(var E=c!==c,R=c===null,M=Hr(c),W=c===t;y<S;){var $=uu((y+S)/2),G=f(a[$]),J=G!==t,se=G===null,de=G===G,ke=Hr(G);if(E)var he=h||de;else W?he=de&&(h||J):R?he=de&&J&&(h||!se):M?he=de&&J&&!se&&(h||!ke):se||ke?he=!1:he=h?G<=c:G<c;he?y=$+1:S=$}return qt(S,Pe)}function e0(a,c){for(var f=-1,h=a.length,y=0,S=[];++f<h;){var E=a[f],R=c?c(E):E;if(!f||!Fn(R,M)){var M=R;S[y++]=E===0?0:E}}return S}function t0(a){return typeof a=="number"?a:Hr(a)?ye:+a}function Ur(a){if(typeof a=="string")return a;if(ve(a))return nt(a,Ur)+"";if(Hr(a))return I_?I_.call(a):"";var c=a+"";return c=="0"&&1/a==-Y?"-0":c}function Zi(a,c,f){var h=-1,y=Xp,S=a.length,E=!0,R=[],M=R;if(f)E=!1,y=gx;else if(S>=r){var W=c?null:qL(a);if(W)return eu(W);E=!1,y=Oc,M=new Bo}else M=c?[]:R;e:for(;++h<S;){var $=a[h],G=c?c($):$;if($=f||$!==0?$:0,E&&G===G){for(var J=M.length;J--;)if(M[J]===G)continue e;c&&M.push(G),R.push($)}else y(M,G,f)||(M!==R&&M.push(G),R.push($))}return R}function Wx(a,c){return c=Yi(c,a),a=A0(a,c),a==null||delete a[Qn(pn(c))]}function r0(a,c,f,h){return zc(a,c,f($o(a,c)),h)}function Su(a,c,f,h){for(var y=a.length,S=h?y:-1;(h?S--:++S<y)&&c(a[S],S,a););return f?ln(a,h?0:S,h?S+1:y):ln(a,h?S+1:0,h?y:S)}function n0(a,c){var f=a;return f instanceof Ce&&(f=f.value()),yx(c,function(h,y){return y.func.apply(y.thisArg,qi([h],y.args))},f)}function $x(a,c,f){var h=a.length;if(h<2)return h?Zi(a[0]):[];for(var y=-1,S=U(h);++y<h;)for(var E=a[y],R=-1;++R<h;)R!=y&&(S[y]=$c(S[y]||E,a[R],c,f));return Zi(Ut(S,1),c,f)}function i0(a,c,f){for(var h=-1,y=a.length,S=c.length,E={};++h<y;){var R=h<S?c[h]:t;f(E,a[h],R)}return E}function jx(a){return gt(a)?a:[]}function qx(a){return typeof a=="function"?a:vr}function Yi(a,c){return ve(a)?a:eT(a,c)?[a]:I0(je(a))}var NL=Ae;function Xi(a,c,f){var h=a.length;return f=f===t?h:f,!c&&f>=h?a:ln(a,c,f)}var o0=bO||function(a){return Mt.clearTimeout(a)};function a0(a,c){if(c)return a.slice();var f=a.length,h=k_?k_(f):new a.constructor(f);return a.copy(h),h}function zx(a){var c=new a.constructor(a.byteLength);return new au(c).set(new au(a)),c}function OL(a,c){var f=c?zx(a.buffer):a.buffer;return new a.constructor(f,a.byteOffset,a.byteLength)}function LL(a){var c=new a.constructor(a.source,$w.exec(a));return c.lastIndex=a.lastIndex,c}function UL(a){return Bc?Ze(Bc.call(a)):{}}function s0(a,c){var f=c?zx(a.buffer):a.buffer;return new a.constructor(f,a.byteOffset,a.length)}function c0(a,c){if(a!==c){var f=a!==t,h=a===null,y=a===a,S=Hr(a),E=c!==t,R=c===null,M=c===c,W=Hr(c);if(!R&&!W&&!S&&a>c||S&&E&&M&&!R&&!W||h&&E&&M||!f&&M||!y)return 1;if(!h&&!S&&!W&&a<c||W&&f&&y&&!h&&!S||R&&f&&y||!E&&y||!M)return-1}return 0}function HL(a,c,f){for(var h=-1,y=a.criteria,S=c.criteria,E=y.length,R=f.length;++h<E;){var M=c0(y[h],S[h]);if(M){if(h>=R)return M;var W=f[h];return M*(W=="desc"?-1:1)}}return a.index-c.index}function l0(a,c,f,h){for(var y=-1,S=a.length,E=f.length,R=-1,M=c.length,W=Rt(S-E,0),$=U(M+W),G=!h;++R<M;)$[R]=c[R];for(;++y<E;)(G||y<S)&&($[f[y]]=a[y]);for(;W--;)$[R++]=a[y++];return $}function p0(a,c,f,h){for(var y=-1,S=a.length,E=-1,R=f.length,M=-1,W=c.length,$=Rt(S-R,0),G=U($+W),J=!h;++y<$;)G[y]=a[y];for(var se=y;++M<W;)G[se+M]=c[M];for(;++E<R;)(J||y<S)&&(G[se+f[E]]=a[y++]);return G}function xr(a,c){var f=-1,h=a.length;for(c||(c=U(h));++f<h;)c[f]=a[f];return c}function Kn(a,c,f,h){var y=!f;f||(f={});for(var S=-1,E=c.length;++S<E;){var R=c[S],M=h?h(f[R],a[R],R,f,a):t;M===t&&(M=a[R]),y?Si(f,R,M):Wc(f,R,M)}return f}function VL(a,c){return Kn(a,Jx(a),c)}function BL(a,c){return Kn(a,w0(a),c)}function vu(a,c){return function(f,h){var y=ve(f)?zN:lL,S=c?c():{};return y(f,a,me(h,2),S)}}function za(a){return Ae(function(c,f){var h=-1,y=f.length,S=y>1?f[y-1]:t,E=y>2?f[2]:t;for(S=a.length>3&&typeof S=="function"?(y--,S):t,E&&ir(f[0],f[1],E)&&(S=y<3?t:S,y=1),c=Ze(c);++h<y;){var R=f[h];R&&a(c,R,h,S)}return c})}function u0(a,c){return function(f,h){if(f==null)return f;if(!Tr(f))return a(f,h);for(var y=f.length,S=c?y:-1,E=Ze(f);(c?S--:++S<y)&&h(E[S],S,E)!==!1;);return f}}function f0(a){return function(c,f,h){for(var y=-1,S=Ze(c),E=h(c),R=E.length;R--;){var M=E[a?R:++y];if(f(S[M],M,S)===!1)break}return c}}function WL(a,c,f){var h=c&b,y=Gc(a);function S(){var E=this&&this!==Mt&&this instanceof S?y:a;return E.apply(h?f:this,arguments)}return S}function m0(a){return function(c){c=je(c);var f=Va(c)?Mn(c):t,h=f?f[0]:c.charAt(0),y=f?Xi(f,1).join(""):c.slice(1);return h[a]()+y}}function Ga(a){return function(c){return yx(uE(pE(c).replace(FN,"")),a,"")}}function Gc(a){return function(){var c=arguments;switch(c.length){case 0:return new a;case 1:return new a(c[0]);case 2:return new a(c[0],c[1]);case 3:return new a(c[0],c[1],c[2]);case 4:return new a(c[0],c[1],c[2],c[3]);case 5:return new a(c[0],c[1],c[2],c[3],c[4]);case 6:return new a(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new a(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var f=qa(a.prototype),h=a.apply(f,c);return ct(h)?h:f}}function $L(a,c,f){var h=Gc(a);function y(){for(var S=arguments.length,E=U(S),R=S,M=Ka(y);R--;)E[R]=arguments[R];var W=S<3&&E[0]!==M&&E[S-1]!==M?[]:zi(E,M);if(S-=W.length,S<f)return x0(a,c,bu,y.placeholder,t,E,W,t,t,f-S);var $=this&&this!==Mt&&this instanceof y?h:a;return Or($,this,E)}return y}function d0(a){return function(c,f,h){var y=Ze(c);if(!Tr(c)){var S=me(f,3);c=Dt(c),f=function(R){return S(y[R],R,y)}}var E=a(c,f,h);return E>-1?y[S?c[E]:E]:t}}function h0(a){return bi(function(c){var f=c.length,h=f,y=sn.prototype.thru;for(a&&c.reverse();h--;){var S=c[h];if(typeof S!="function")throw new an(i);if(y&&!E&&Ru(S)=="wrapper")var E=new sn([],!0)}for(h=E?h:f;++h<f;){S=c[h];var R=Ru(S),M=R=="wrapper"?Yx(S):t;M&&tT(M[0])&&M[1]==(ae|F|Z|le)&&!M[4].length&&M[9]==1?E=E[Ru(M[0])].apply(E,M[3]):E=S.length==1&&tT(S)?E[R]():E.thru(S)}return function(){var W=arguments,$=W[0];if(E&&W.length==1&&ve($))return E.plant($).value();for(var G=0,J=f?c[G].apply(this,W):$;++G<f;)J=c[G].call(this,J);return J}})}function bu(a,c,f,h,y,S,E,R,M,W){var $=c&ae,G=c&b,J=c&v,se=c&(F|V),de=c&st,ke=J?t:Gc(a);function he(){for(var Fe=arguments.length,Ne=U(Fe),Vr=Fe;Vr--;)Ne[Vr]=arguments[Vr];if(se)var or=Ka(he),Br=tO(Ne,or);if(h&&(Ne=l0(Ne,h,y,se)),S&&(Ne=p0(Ne,S,E,se)),Fe-=Br,se&&Fe<W){var yt=zi(Ne,or);return x0(a,c,bu,he.placeholder,f,Ne,yt,R,M,W-Fe)}var In=G?f:this,Ri=J?In[a]:a;return Fe=Ne.length,R?Ne=lU(Ne,R):de&&Fe>1&&Ne.reverse(),$&&M<Fe&&(Ne.length=M),this&&this!==Mt&&this instanceof he&&(Ri=ke||Gc(Ri)),Ri.apply(In,Ne)}return he}function g0(a,c){return function(f,h){return yL(f,a,c(h),{})}}function wu(a,c){return function(f,h){var y;if(f===t&&h===t)return c;if(f!==t&&(y=f),h!==t){if(y===t)return h;typeof f=="string"||typeof h=="string"?(f=Ur(f),h=Ur(h)):(f=t0(f),h=t0(h)),y=a(f,h)}return y}}function Gx(a){return bi(function(c){return c=nt(c,Lr(me())),Ae(function(f){var h=this;return a(c,function(y){return Or(y,h,f)})})})}function _u(a,c){c=c===t?" ":Ur(c);var f=c.length;if(f<2)return f?Vx(c,a):c;var h=Vx(c,pu(a/Ba(c)));return Va(c)?Xi(Mn(h),0,a).join(""):h.slice(0,a)}function jL(a,c,f,h){var y=c&b,S=Gc(a);function E(){for(var R=-1,M=arguments.length,W=-1,$=h.length,G=U($+M),J=this&&this!==Mt&&this instanceof E?S:a;++W<$;)G[W]=h[W];for(;M--;)G[W++]=arguments[++R];return Or(J,y?f:this,G)}return E}function y0(a){return function(c,f,h){return h&&typeof h!="number"&&ir(c,f,h)&&(f=h=t),c=Ei(c),f===t?(f=c,c=0):f=Ei(f),h=h===t?c<f?1:-1:Ei(h),AL(c,f,h,a)}}function Eu(a){return function(c,f){return typeof c=="string"&&typeof f=="string"||(c=un(c),f=un(f)),a(c,f)}}function x0(a,c,f,h,y,S,E,R,M,W){var $=c&F,G=$?E:t,J=$?t:E,se=$?S:t,de=$?t:S;c|=$?Z:oe,c&=~($?oe:Z),c&I||(c&=~(b|v));var ke=[a,c,y,se,G,de,J,R,M,W],he=f.apply(t,ke);return tT(a)&&M0(he,ke),he.placeholder=h,D0(he,a,c)}function Kx(a){var c=Et[a];return function(f,h){if(f=un(f),h=h==null?0:qt(_e(h),292),h&&D_(f)){var y=(je(f)+"e").split("e"),S=c(y[0]+"e"+(+y[1]+h));return y=(je(S)+"e").split("e"),+(y[0]+"e"+(+y[1]-h))}return c(f)}}var qL=$a&&1/eu(new $a([,-0]))[1]==Y?function(a){return new $a(a)}:gT;function T0(a){return function(c){var f=zt(c);return f==Pn?_x(c):f==An?cO(c):eO(c,a(c))}}function vi(a,c,f,h,y,S,E,R){var M=c&v;if(!M&&typeof a!="function")throw new an(i);var W=h?h.length:0;if(W||(c&=~(Z|oe),h=y=t),E=E===t?E:Rt(_e(E),0),R=R===t?R:_e(R),W-=y?y.length:0,c&oe){var $=h,G=y;h=y=t}var J=M?t:Yx(a),se=[a,c,f,h,y,$,G,S,E,R];if(J&&aU(se,J),a=se[0],c=se[1],f=se[2],h=se[3],y=se[4],R=se[9]=se[9]===t?M?0:a.length:Rt(se[9]-W,0),!R&&c&(F|V)&&(c&=~(F|V)),!c||c==b)var de=WL(a,c,f);else c==F||c==V?de=$L(a,c,R):(c==Z||c==(b|Z))&&!y.length?de=jL(a,c,f,h):de=bu.apply(t,se);var ke=J?J_:M0;return D0(ke(de,se),a,c)}function S0(a,c,f,h){return a===t||Fn(a,Wa[f])&&!qe.call(h,f)?c:a}function v0(a,c,f,h,y,S){return ct(a)&&ct(c)&&(S.set(c,a),xu(a,c,t,v0,S),S.delete(c)),a}function zL(a){return Zc(a)?t:a}function b0(a,c,f,h,y,S){var E=f&g,R=a.length,M=c.length;if(R!=M&&!(E&&M>R))return!1;var W=S.get(a),$=S.get(c);if(W&&$)return W==c&&$==a;var G=-1,J=!0,se=f&x?new Bo:t;for(S.set(a,c),S.set(c,a);++G<R;){var de=a[G],ke=c[G];if(h)var he=E?h(ke,de,G,c,a,S):h(de,ke,G,a,c,S);if(he!==t){if(he)continue;J=!1;break}if(se){if(!xx(c,function(Fe,Ne){if(!Oc(se,Ne)&&(de===Fe||y(de,Fe,f,h,S)))return se.push(Ne)})){J=!1;break}}else if(!(de===ke||y(de,ke,f,h,S))){J=!1;break}}return S.delete(a),S.delete(c),J}function GL(a,c,f,h,y,S,E){switch(f){case La:if(a.byteLength!=c.byteLength||a.byteOffset!=c.byteOffset)return!1;a=a.buffer,c=c.buffer;case Nc:return!(a.byteLength!=c.byteLength||!S(new au(a),new au(c)));case kn:case rn:case Dc:return Fn(+a,+c);case gi:return a.name==c.name&&a.message==c.message;case Fc:case Ic:return a==c+"";case Pn:var R=_x;case An:var M=h&g;if(R||(R=eu),a.size!=c.size&&!M)return!1;var W=E.get(a);if(W)return W==c;h|=x,E.set(a,c);var $=b0(R(a),R(c),h,y,S,E);return E.delete(a),$;case Kp:if(Bc)return Bc.call(a)==Bc.call(c)}return!1}function KL(a,c,f,h,y,S){var E=f&g,R=Qx(a),M=R.length,W=Qx(c),$=W.length;if(M!=$&&!E)return!1;for(var G=M;G--;){var J=R[G];if(!(E?J in c:qe.call(c,J)))return!1}var se=S.get(a),de=S.get(c);if(se&&de)return se==c&&de==a;var ke=!0;S.set(a,c),S.set(c,a);for(var he=E;++G<M;){J=R[G];var Fe=a[J],Ne=c[J];if(h)var Vr=E?h(Ne,Fe,J,c,a,S):h(Fe,Ne,J,a,c,S);if(!(Vr===t?Fe===Ne||y(Fe,Ne,f,h,S):Vr)){ke=!1;break}he||(he=J=="constructor")}if(ke&&!he){var or=a.constructor,Br=c.constructor;or!=Br&&"constructor"in a&&"constructor"in c&&!(typeof or=="function"&&or instanceof or&&typeof Br=="function"&&Br instanceof Br)&&(ke=!1)}return S.delete(a),S.delete(c),ke}function bi(a){return nT(P0(a,t,L0),a+"")}function Qx(a){return W_(a,Dt,Jx)}function Zx(a){return W_(a,Sr,w0)}var Yx=fu?function(a){return fu.get(a)}:gT;function Ru(a){for(var c=a.name+"",f=ja[c],h=qe.call(ja,c)?f.length:0;h--;){var y=f[h],S=y.func;if(S==null||S==a)return y.name}return c}function Ka(a){var c=qe.call(T,"placeholder")?T:a;return c.placeholder}function me(){var a=T.iteratee||dT;return a=a===dT?q_:a,arguments.length?a(arguments[0],arguments[1]):a}function ku(a,c){var f=a.__data__;return rU(c)?f[typeof c=="string"?"string":"hash"]:f.map}function Xx(a){for(var c=Dt(a),f=c.length;f--;){var h=c[f],y=a[h];c[f]=[h,y,R0(y)]}return c}function jo(a,c){var f=oO(a,c);return j_(f)?f:t}function QL(a){var c=qe.call(a,Ho),f=a[Ho];try{a[Ho]=t;var h=!0}catch{}var y=iu.call(a);return h&&(c?a[Ho]=f:delete a[Ho]),y}var Jx=Rx?function(a){return a==null?[]:(a=Ze(a),ji(Rx(a),function(c){return A_.call(a,c)}))}:yT,w0=Rx?function(a){for(var c=[];a;)qi(c,Jx(a)),a=su(a);return c}:yT,zt=nr;(kx&&zt(new kx(new ArrayBuffer(1)))!=La||Uc&&zt(new Uc)!=Pn||Px&&zt(Px.resolve())!=Hw||$a&&zt(new $a)!=An||Hc&&zt(new Hc)!=Cc)&&(zt=function(a){var c=nr(a),f=c==yi?a.constructor:t,h=f?qo(f):"";if(h)switch(h){case DO:return La;case FO:return Pn;case IO:return Hw;case CO:return An;case NO:return Cc}return c});function ZL(a,c,f){for(var h=-1,y=f.length;++h<y;){var S=f[h],E=S.size;switch(S.type){case"drop":a+=E;break;case"dropRight":c-=E;break;case"take":c=qt(c,a+E);break;case"takeRight":a=Rt(a,c-E);break}}return{start:a,end:c}}function YL(a){var c=a.match(nN);return c?c[1].split(iN):[]}function _0(a,c,f){c=Yi(c,a);for(var h=-1,y=c.length,S=!1;++h<y;){var E=Qn(c[h]);if(!(S=a!=null&&f(a,E)))break;a=a[E]}return S||++h!=y?S:(y=a==null?0:a.length,!!y&&Cu(y)&&wi(E,y)&&(ve(a)||zo(a)))}function XL(a){var c=a.length,f=new a.constructor(c);return c&&typeof a[0]=="string"&&qe.call(a,"index")&&(f.index=a.index,f.input=a.input),f}function E0(a){return typeof a.constructor=="function"&&!Kc(a)?qa(su(a)):{}}function JL(a,c,f){var h=a.constructor;switch(c){case Nc:return zx(a);case kn:case rn:return new h(+a);case La:return OL(a,f);case Xy:case Jy:case ex:case tx:case rx:case nx:case ix:case ox:case ax:return s0(a,f);case Pn:return new h;case Dc:case Ic:return new h(a);case Fc:return LL(a);case An:return new h;case Kp:return UL(a)}}function eU(a,c){var f=c.length;if(!f)return a;var h=f-1;return c[h]=(f>1?"& ":"")+c[h],c=c.join(f>2?", ":" "),a.replace(rN,`{
/* [wrapped with `+c+`] */
`)}function tU(a){return ve(a)||zo(a)||!!(M_&&a&&a[M_])}function wi(a,c){var f=typeof a;return c=c??X,!!c&&(f=="number"||f!="symbol"&&mN.test(a))&&a>-1&&a%1==0&&a<c}function ir(a,c,f){if(!ct(f))return!1;var h=typeof c;return(h=="number"?Tr(f)&&wi(c,f.length):h=="string"&&c in f)?Fn(f[c],a):!1}function eT(a,c){if(ve(a))return!1;var f=typeof a;return f=="number"||f=="symbol"||f=="boolean"||a==null||Hr(a)?!0:X1.test(a)||!Y1.test(a)||c!=null&&a in Ze(c)}function rU(a){var c=typeof a;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?a!=="__proto__":a===null}function tT(a){var c=Ru(a),f=T[c];if(typeof f!="function"||!(c in Ce.prototype))return!1;if(a===f)return!0;var h=Yx(f);return!!h&&a===h[0]}function nU(a){return!!R_&&R_ in a}var iU=ru?_i:xT;function Kc(a){var c=a&&a.constructor,f=typeof c=="function"&&c.prototype||Wa;return a===f}function R0(a){return a===a&&!ct(a)}function k0(a,c){return function(f){return f==null?!1:f[a]===c&&(c!==t||a in Ze(f))}}function oU(a){var c=Fu(a,function(h){return f.size===l&&f.clear(),h}),f=c.cache;return c}function aU(a,c){var f=a[1],h=c[1],y=f|h,S=y<(b|v|ae),E=h==ae&&f==F||h==ae&&f==le&&a[7].length<=c[8]||h==(ae|le)&&c[7].length<=c[8]&&f==F;if(!(S||E))return a;h&b&&(a[2]=c[2],y|=f&b?0:I);var R=c[3];if(R){var M=a[3];a[3]=M?l0(M,R,c[4]):R,a[4]=M?zi(a[3],p):c[4]}return R=c[5],R&&(M=a[5],a[5]=M?p0(M,R,c[6]):R,a[6]=M?zi(a[5],p):c[6]),R=c[7],R&&(a[7]=R),h&ae&&(a[8]=a[8]==null?c[8]:qt(a[8],c[8])),a[9]==null&&(a[9]=c[9]),a[0]=c[0],a[1]=y,a}function sU(a){var c=[];if(a!=null)for(var f in Ze(a))c.push(f);return c}function cU(a){return iu.call(a)}function P0(a,c,f){return c=Rt(c===t?a.length-1:c,0),function(){for(var h=arguments,y=-1,S=Rt(h.length-c,0),E=U(S);++y<S;)E[y]=h[c+y];y=-1;for(var R=U(c+1);++y<c;)R[y]=h[y];return R[c]=f(E),Or(a,this,R)}}function A0(a,c){return c.length<2?a:$o(a,ln(c,0,-1))}function lU(a,c){for(var f=a.length,h=qt(c.length,f),y=xr(a);h--;){var S=c[h];a[h]=wi(S,f)?y[S]:t}return a}function rT(a,c){if(!(c==="constructor"&&typeof a[c]=="function")&&c!="__proto__")return a[c]}var M0=F0(J_),Qc=_O||function(a,c){return Mt.setTimeout(a,c)},nT=F0(FL);function D0(a,c,f){var h=c+"";return nT(a,eU(h,pU(YL(h),f)))}function F0(a){var c=0,f=0;return function(){var h=PO(),y=O-(h-f);if(f=h,y>0){if(++c>=L)return arguments[0]}else c=0;return a.apply(t,arguments)}}function Pu(a,c){var f=-1,h=a.length,y=h-1;for(c=c===t?h:c;++f<c;){var S=Hx(f,y),E=a[S];a[S]=a[f],a[f]=E}return a.length=c,a}var I0=oU(function(a){var c=[];return a.charCodeAt(0)===46&&c.push(""),a.replace(J1,function(f,h,y,S){c.push(y?S.replace(sN,"$1"):h||f)}),c});function Qn(a){if(typeof a=="string"||Hr(a))return a;var c=a+"";return c=="0"&&1/a==-Y?"-0":c}function qo(a){if(a!=null){try{return nu.call(a)}catch{}try{return a+""}catch{}}return""}function pU(a,c){return on(hi,function(f){var h="_."+f[0];c&f[1]&&!Xp(a,h)&&a.push(h)}),a.sort()}function C0(a){if(a instanceof Ce)return a.clone();var c=new sn(a.__wrapped__,a.__chain__);return c.__actions__=xr(a.__actions__),c.__index__=a.__index__,c.__values__=a.__values__,c}function uU(a,c,f){(f?ir(a,c,f):c===t)?c=1:c=Rt(_e(c),0);var h=a==null?0:a.length;if(!h||c<1)return[];for(var y=0,S=0,E=U(pu(h/c));y<h;)E[S++]=ln(a,y,y+=c);return E}function fU(a){for(var c=-1,f=a==null?0:a.length,h=0,y=[];++c<f;){var S=a[c];S&&(y[h++]=S)}return y}function mU(){var a=arguments.length;if(!a)return[];for(var c=U(a-1),f=arguments[0],h=a;h--;)c[h-1]=arguments[h];return qi(ve(f)?xr(f):[f],Ut(c,1))}var dU=Ae(function(a,c){return gt(a)?$c(a,Ut(c,1,gt,!0)):[]}),hU=Ae(function(a,c){var f=pn(c);return gt(f)&&(f=t),gt(a)?$c(a,Ut(c,1,gt,!0),me(f,2)):[]}),gU=Ae(function(a,c){var f=pn(c);return gt(f)&&(f=t),gt(a)?$c(a,Ut(c,1,gt,!0),t,f):[]});function yU(a,c,f){var h=a==null?0:a.length;return h?(c=f||c===t?1:_e(c),ln(a,c<0?0:c,h)):[]}function xU(a,c,f){var h=a==null?0:a.length;return h?(c=f||c===t?1:_e(c),c=h-c,ln(a,0,c<0?0:c)):[]}function TU(a,c){return a&&a.length?Su(a,me(c,3),!0,!0):[]}function SU(a,c){return a&&a.length?Su(a,me(c,3),!0):[]}function vU(a,c,f,h){var y=a==null?0:a.length;return y?(f&&typeof f!="number"&&ir(a,c,f)&&(f=0,h=y),mL(a,c,f,h)):[]}function N0(a,c,f){var h=a==null?0:a.length;if(!h)return-1;var y=f==null?0:_e(f);return y<0&&(y=Rt(h+y,0)),Jp(a,me(c,3),y)}function O0(a,c,f){var h=a==null?0:a.length;if(!h)return-1;var y=h-1;return f!==t&&(y=_e(f),y=f<0?Rt(h+y,0):qt(y,h-1)),Jp(a,me(c,3),y,!0)}function L0(a){var c=a==null?0:a.length;return c?Ut(a,1):[]}function bU(a){var c=a==null?0:a.length;return c?Ut(a,Y):[]}function wU(a,c){var f=a==null?0:a.length;return f?(c=c===t?1:_e(c),Ut(a,c)):[]}function _U(a){for(var c=-1,f=a==null?0:a.length,h={};++c<f;){var y=a[c];h[y[0]]=y[1]}return h}function U0(a){return a&&a.length?a[0]:t}function EU(a,c,f){var h=a==null?0:a.length;if(!h)return-1;var y=f==null?0:_e(f);return y<0&&(y=Rt(h+y,0)),Ha(a,c,y)}function RU(a){var c=a==null?0:a.length;return c?ln(a,0,-1):[]}var kU=Ae(function(a){var c=nt(a,jx);return c.length&&c[0]===a[0]?Cx(c):[]}),PU=Ae(function(a){var c=pn(a),f=nt(a,jx);return c===pn(f)?c=t:f.pop(),f.length&&f[0]===a[0]?Cx(f,me(c,2)):[]}),AU=Ae(function(a){var c=pn(a),f=nt(a,jx);return c=typeof c=="function"?c:t,c&&f.pop(),f.length&&f[0]===a[0]?Cx(f,t,c):[]});function MU(a,c){return a==null?"":RO.call(a,c)}function pn(a){var c=a==null?0:a.length;return c?a[c-1]:t}function DU(a,c,f){var h=a==null?0:a.length;if(!h)return-1;var y=h;return f!==t&&(y=_e(f),y=y<0?Rt(h+y,0):qt(y,h-1)),c===c?pO(a,c,y):Jp(a,x_,y,!0)}function FU(a,c){return a&&a.length?Q_(a,_e(c)):t}var IU=Ae(H0);function H0(a,c){return a&&a.length&&c&&c.length?Ux(a,c):a}function CU(a,c,f){return a&&a.length&&c&&c.length?Ux(a,c,me(f,2)):a}function NU(a,c,f){return a&&a.length&&c&&c.length?Ux(a,c,t,f):a}var OU=bi(function(a,c){var f=a==null?0:a.length,h=Mx(a,c);return X_(a,nt(c,function(y){return wi(y,f)?+y:y}).sort(c0)),h});function LU(a,c){var f=[];if(!(a&&a.length))return f;var h=-1,y=[],S=a.length;for(c=me(c,3);++h<S;){var E=a[h];c(E,h,a)&&(f.push(E),y.push(h))}return X_(a,y),f}function iT(a){return a==null?a:MO.call(a)}function UU(a,c,f){var h=a==null?0:a.length;return h?(f&&typeof f!="number"&&ir(a,c,f)?(c=0,f=h):(c=c==null?0:_e(c),f=f===t?h:_e(f)),ln(a,c,f)):[]}function HU(a,c){return Tu(a,c)}function VU(a,c,f){return Bx(a,c,me(f,2))}function BU(a,c){var f=a==null?0:a.length;if(f){var h=Tu(a,c);if(h<f&&Fn(a[h],c))return h}return-1}function WU(a,c){return Tu(a,c,!0)}function $U(a,c,f){return Bx(a,c,me(f,2),!0)}function jU(a,c){var f=a==null?0:a.length;if(f){var h=Tu(a,c,!0)-1;if(Fn(a[h],c))return h}return-1}function qU(a){return a&&a.length?e0(a):[]}function zU(a,c){return a&&a.length?e0(a,me(c,2)):[]}function GU(a){var c=a==null?0:a.length;return c?ln(a,1,c):[]}function KU(a,c,f){return a&&a.length?(c=f||c===t?1:_e(c),ln(a,0,c<0?0:c)):[]}function QU(a,c,f){var h=a==null?0:a.length;return h?(c=f||c===t?1:_e(c),c=h-c,ln(a,c<0?0:c,h)):[]}function ZU(a,c){return a&&a.length?Su(a,me(c,3),!1,!0):[]}function YU(a,c){return a&&a.length?Su(a,me(c,3)):[]}var XU=Ae(function(a){return Zi(Ut(a,1,gt,!0))}),JU=Ae(function(a){var c=pn(a);return gt(c)&&(c=t),Zi(Ut(a,1,gt,!0),me(c,2))}),eH=Ae(function(a){var c=pn(a);return c=typeof c=="function"?c:t,Zi(Ut(a,1,gt,!0),t,c)});function tH(a){return a&&a.length?Zi(a):[]}function rH(a,c){return a&&a.length?Zi(a,me(c,2)):[]}function nH(a,c){return c=typeof c=="function"?c:t,a&&a.length?Zi(a,t,c):[]}function oT(a){if(!(a&&a.length))return[];var c=0;return a=ji(a,function(f){if(gt(f))return c=Rt(f.length,c),!0}),bx(c,function(f){return nt(a,Tx(f))})}function V0(a,c){if(!(a&&a.length))return[];var f=oT(a);return c==null?f:nt(f,function(h){return Or(c,t,h)})}var iH=Ae(function(a,c){return gt(a)?$c(a,c):[]}),oH=Ae(function(a){return $x(ji(a,gt))}),aH=Ae(function(a){var c=pn(a);return gt(c)&&(c=t),$x(ji(a,gt),me(c,2))}),sH=Ae(function(a){var c=pn(a);return c=typeof c=="function"?c:t,$x(ji(a,gt),t,c)}),cH=Ae(oT);function lH(a,c){return i0(a||[],c||[],Wc)}function pH(a,c){return i0(a||[],c||[],zc)}var uH=Ae(function(a){var c=a.length,f=c>1?a[c-1]:t;return f=typeof f=="function"?(a.pop(),f):t,V0(a,f)});function B0(a){var c=T(a);return c.__chain__=!0,c}function fH(a,c){return c(a),a}function Au(a,c){return c(a)}var mH=bi(function(a){var c=a.length,f=c?a[0]:0,h=this.__wrapped__,y=function(S){return Mx(S,a)};return c>1||this.__actions__.length||!(h instanceof Ce)||!wi(f)?this.thru(y):(h=h.slice(f,+f+(c?1:0)),h.__actions__.push({func:Au,args:[y],thisArg:t}),new sn(h,this.__chain__).thru(function(S){return c&&!S.length&&S.push(t),S}))});function dH(){return B0(this)}function hH(){return new sn(this.value(),this.__chain__)}function gH(){this.__values__===t&&(this.__values__=tE(this.value()));var a=this.__index__>=this.__values__.length,c=a?t:this.__values__[this.__index__++];return{done:a,value:c}}function yH(){return this}function xH(a){for(var c,f=this;f instanceof du;){var h=C0(f);h.__index__=0,h.__values__=t,c?y.__wrapped__=h:c=h;var y=h;f=f.__wrapped__}return y.__wrapped__=a,c}function TH(){var a=this.__wrapped__;if(a instanceof Ce){var c=a;return this.__actions__.length&&(c=new Ce(this)),c=c.reverse(),c.__actions__.push({func:Au,args:[iT],thisArg:t}),new sn(c,this.__chain__)}return this.thru(iT)}function SH(){return n0(this.__wrapped__,this.__actions__)}var vH=vu(function(a,c,f){qe.call(a,f)?++a[f]:Si(a,f,1)});function bH(a,c,f){var h=ve(a)?g_:fL;return f&&ir(a,c,f)&&(c=t),h(a,me(c,3))}function wH(a,c){var f=ve(a)?ji:V_;return f(a,me(c,3))}var _H=d0(N0),EH=d0(O0);function RH(a,c){return Ut(Mu(a,c),1)}function kH(a,c){return Ut(Mu(a,c),Y)}function PH(a,c,f){return f=f===t?1:_e(f),Ut(Mu(a,c),f)}function W0(a,c){var f=ve(a)?on:Qi;return f(a,me(c,3))}function $0(a,c){var f=ve(a)?GN:H_;return f(a,me(c,3))}var AH=vu(function(a,c,f){qe.call(a,f)?a[f].push(c):Si(a,f,[c])});function MH(a,c,f,h){a=Tr(a)?a:Za(a),f=f&&!h?_e(f):0;var y=a.length;return f<0&&(f=Rt(y+f,0)),Nu(a)?f<=y&&a.indexOf(c,f)>-1:!!y&&Ha(a,c,f)>-1}var DH=Ae(function(a,c,f){var h=-1,y=typeof c=="function",S=Tr(a)?U(a.length):[];return Qi(a,function(E){S[++h]=y?Or(c,E,f):jc(E,c,f)}),S}),FH=vu(function(a,c,f){Si(a,f,c)});function Mu(a,c){var f=ve(a)?nt:z_;return f(a,me(c,3))}function IH(a,c,f,h){return a==null?[]:(ve(c)||(c=c==null?[]:[c]),f=h?t:f,ve(f)||(f=f==null?[]:[f]),Z_(a,c,f))}var CH=vu(function(a,c,f){a[f?0:1].push(c)},function(){return[[],[]]});function NH(a,c,f){var h=ve(a)?yx:S_,y=arguments.length<3;return h(a,me(c,4),f,y,Qi)}function OH(a,c,f){var h=ve(a)?KN:S_,y=arguments.length<3;return h(a,me(c,4),f,y,H_)}function LH(a,c){var f=ve(a)?ji:V_;return f(a,Iu(me(c,3)))}function UH(a){var c=ve(a)?N_:ML;return c(a)}function HH(a,c,f){(f?ir(a,c,f):c===t)?c=1:c=_e(c);var h=ve(a)?sL:DL;return h(a,c)}function VH(a){var c=ve(a)?cL:IL;return c(a)}function BH(a){if(a==null)return 0;if(Tr(a))return Nu(a)?Ba(a):a.length;var c=zt(a);return c==Pn||c==An?a.size:Ox(a).length}function WH(a,c,f){var h=ve(a)?xx:CL;return f&&ir(a,c,f)&&(c=t),h(a,me(c,3))}var $H=Ae(function(a,c){if(a==null)return[];var f=c.length;return f>1&&ir(a,c[0],c[1])?c=[]:f>2&&ir(c[0],c[1],c[2])&&(c=[c[0]]),Z_(a,Ut(c,1),[])}),Du=wO||function(){return Mt.Date.now()};function jH(a,c){if(typeof c!="function")throw new an(i);return a=_e(a),function(){if(--a<1)return c.apply(this,arguments)}}function j0(a,c,f){return c=f?t:c,c=a&&c==null?a.length:c,vi(a,ae,t,t,t,t,c)}function q0(a,c){var f;if(typeof c!="function")throw new an(i);return a=_e(a),function(){return--a>0&&(f=c.apply(this,arguments)),a<=1&&(c=t),f}}var aT=Ae(function(a,c,f){var h=b;if(f.length){var y=zi(f,Ka(aT));h|=Z}return vi(a,h,c,f,y)}),z0=Ae(function(a,c,f){var h=b|v;if(f.length){var y=zi(f,Ka(z0));h|=Z}return vi(c,h,a,f,y)});function G0(a,c,f){c=f?t:c;var h=vi(a,F,t,t,t,t,t,c);return h.placeholder=G0.placeholder,h}function K0(a,c,f){c=f?t:c;var h=vi(a,V,t,t,t,t,t,c);return h.placeholder=K0.placeholder,h}function Q0(a,c,f){var h,y,S,E,R,M,W=0,$=!1,G=!1,J=!0;if(typeof a!="function")throw new an(i);c=un(c)||0,ct(f)&&($=!!f.leading,G="maxWait"in f,S=G?Rt(un(f.maxWait)||0,c):S,J="trailing"in f?!!f.trailing:J);function se(yt){var In=h,Ri=y;return h=y=t,W=yt,E=a.apply(Ri,In),E}function de(yt){return W=yt,R=Qc(Fe,c),$?se(yt):E}function ke(yt){var In=yt-M,Ri=yt-W,dE=c-In;return G?qt(dE,S-Ri):dE}function he(yt){var In=yt-M,Ri=yt-W;return M===t||In>=c||In<0||G&&Ri>=S}function Fe(){var yt=Du();if(he(yt))return Ne(yt);R=Qc(Fe,ke(yt))}function Ne(yt){return R=t,J&&h?se(yt):(h=y=t,E)}function Vr(){R!==t&&o0(R),W=0,h=M=y=R=t}function or(){return R===t?E:Ne(Du())}function Br(){var yt=Du(),In=he(yt);if(h=arguments,y=this,M=yt,In){if(R===t)return de(M);if(G)return o0(R),R=Qc(Fe,c),se(M)}return R===t&&(R=Qc(Fe,c)),E}return Br.cancel=Vr,Br.flush=or,Br}var qH=Ae(function(a,c){return U_(a,1,c)}),zH=Ae(function(a,c,f){return U_(a,un(c)||0,f)});function GH(a){return vi(a,st)}function Fu(a,c){if(typeof a!="function"||c!=null&&typeof c!="function")throw new an(i);var f=function(){var h=arguments,y=c?c.apply(this,h):h[0],S=f.cache;if(S.has(y))return S.get(y);var E=a.apply(this,h);return f.cache=S.set(y,E)||S,E};return f.cache=new(Fu.Cache||Ti),f}Fu.Cache=Ti;function Iu(a){if(typeof a!="function")throw new an(i);return function(){var c=arguments;switch(c.length){case 0:return!a.call(this);case 1:return!a.call(this,c[0]);case 2:return!a.call(this,c[0],c[1]);case 3:return!a.call(this,c[0],c[1],c[2])}return!a.apply(this,c)}}function KH(a){return q0(2,a)}var QH=NL(function(a,c){c=c.length==1&&ve(c[0])?nt(c[0],Lr(me())):nt(Ut(c,1),Lr(me()));var f=c.length;return Ae(function(h){for(var y=-1,S=qt(h.length,f);++y<S;)h[y]=c[y].call(this,h[y]);return Or(a,this,h)})}),sT=Ae(function(a,c){var f=zi(c,Ka(sT));return vi(a,Z,t,c,f)}),Z0=Ae(function(a,c){var f=zi(c,Ka(Z0));return vi(a,oe,t,c,f)}),ZH=bi(function(a,c){return vi(a,le,t,t,t,c)});function YH(a,c){if(typeof a!="function")throw new an(i);return c=c===t?c:_e(c),Ae(a,c)}function XH(a,c){if(typeof a!="function")throw new an(i);return c=c==null?0:Rt(_e(c),0),Ae(function(f){var h=f[c],y=Xi(f,0,c);return h&&qi(y,h),Or(a,this,y)})}function JH(a,c,f){var h=!0,y=!0;if(typeof a!="function")throw new an(i);return ct(f)&&(h="leading"in f?!!f.leading:h,y="trailing"in f?!!f.trailing:y),Q0(a,c,{leading:h,maxWait:c,trailing:y})}function e2(a){return j0(a,1)}function t2(a,c){return sT(qx(c),a)}function r2(){if(!arguments.length)return[];var a=arguments[0];return ve(a)?a:[a]}function n2(a){return cn(a,d)}function i2(a,c){return c=typeof c=="function"?c:t,cn(a,d,c)}function o2(a){return cn(a,u|d)}function a2(a,c){return c=typeof c=="function"?c:t,cn(a,u|d,c)}function s2(a,c){return c==null||L_(a,c,Dt(c))}function Fn(a,c){return a===c||a!==a&&c!==c}var c2=Eu(Ix),l2=Eu(function(a,c){return a>=c}),zo=$_(function(){return arguments}())?$_:function(a){return ft(a)&&qe.call(a,"callee")&&!A_.call(a,"callee")},ve=U.isArray,p2=p_?Lr(p_):xL;function Tr(a){return a!=null&&Cu(a.length)&&!_i(a)}function gt(a){return ft(a)&&Tr(a)}function u2(a){return a===!0||a===!1||ft(a)&&nr(a)==kn}var Ji=EO||xT,f2=u_?Lr(u_):TL;function m2(a){return ft(a)&&a.nodeType===1&&!Zc(a)}function d2(a){if(a==null)return!0;if(Tr(a)&&(ve(a)||typeof a=="string"||typeof a.splice=="function"||Ji(a)||Qa(a)||zo(a)))return!a.length;var c=zt(a);if(c==Pn||c==An)return!a.size;if(Kc(a))return!Ox(a).length;for(var f in a)if(qe.call(a,f))return!1;return!0}function h2(a,c){return qc(a,c)}function g2(a,c,f){f=typeof f=="function"?f:t;var h=f?f(a,c):t;return h===t?qc(a,c,t,f):!!h}function cT(a){if(!ft(a))return!1;var c=nr(a);return c==gi||c==Lo||typeof a.message=="string"&&typeof a.name=="string"&&!Zc(a)}function y2(a){return typeof a=="number"&&D_(a)}function _i(a){if(!ct(a))return!1;var c=nr(a);return c==Oa||c==Uw||c==Nr||c==B1}function Y0(a){return typeof a=="number"&&a==_e(a)}function Cu(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=X}function ct(a){var c=typeof a;return a!=null&&(c=="object"||c=="function")}function ft(a){return a!=null&&typeof a=="object"}var X0=f_?Lr(f_):vL;function x2(a,c){return a===c||Nx(a,c,Xx(c))}function T2(a,c,f){return f=typeof f=="function"?f:t,Nx(a,c,Xx(c),f)}function S2(a){return J0(a)&&a!=+a}function v2(a){if(iU(a))throw new Te(n);return j_(a)}function b2(a){return a===null}function w2(a){return a==null}function J0(a){return typeof a=="number"||ft(a)&&nr(a)==Dc}function Zc(a){if(!ft(a)||nr(a)!=yi)return!1;var c=su(a);if(c===null)return!0;var f=qe.call(c,"constructor")&&c.constructor;return typeof f=="function"&&f instanceof f&&nu.call(f)==TO}var lT=m_?Lr(m_):bL;function _2(a){return Y0(a)&&a>=-X&&a<=X}var eE=d_?Lr(d_):wL;function Nu(a){return typeof a=="string"||!ve(a)&&ft(a)&&nr(a)==Ic}function Hr(a){return typeof a=="symbol"||ft(a)&&nr(a)==Kp}var Qa=h_?Lr(h_):_L;function E2(a){return a===t}function R2(a){return ft(a)&&zt(a)==Cc}function k2(a){return ft(a)&&nr(a)==$1}var P2=Eu(Lx),A2=Eu(function(a,c){return a<=c});function tE(a){if(!a)return[];if(Tr(a))return Nu(a)?Mn(a):xr(a);if(Lc&&a[Lc])return sO(a[Lc]());var c=zt(a),f=c==Pn?_x:c==An?eu:Za;return f(a)}function Ei(a){if(!a)return a===0?a:0;if(a=un(a),a===Y||a===-Y){var c=a<0?-1:1;return c*ne}return a===a?a:0}function _e(a){var c=Ei(a),f=c%1;return c===c?f?c-f:c:0}function rE(a){return a?Wo(_e(a),0,ie):0}function un(a){if(typeof a=="number")return a;if(Hr(a))return ye;if(ct(a)){var c=typeof a.valueOf=="function"?a.valueOf():a;a=ct(c)?c+"":c}if(typeof a!="string")return a===0?a:+a;a=v_(a);var f=pN.test(a);return f||fN.test(a)?jN(a.slice(2),f?2:8):lN.test(a)?ye:+a}function nE(a){return Kn(a,Sr(a))}function M2(a){return a?Wo(_e(a),-X,X):a===0?a:0}function je(a){return a==null?"":Ur(a)}var D2=za(function(a,c){if(Kc(c)||Tr(c)){Kn(c,Dt(c),a);return}for(var f in c)qe.call(c,f)&&Wc(a,f,c[f])}),iE=za(function(a,c){Kn(c,Sr(c),a)}),Ou=za(function(a,c,f,h){Kn(c,Sr(c),a,h)}),F2=za(function(a,c,f,h){Kn(c,Dt(c),a,h)}),I2=bi(Mx);function C2(a,c){var f=qa(a);return c==null?f:O_(f,c)}var N2=Ae(function(a,c){a=Ze(a);var f=-1,h=c.length,y=h>2?c[2]:t;for(y&&ir(c[0],c[1],y)&&(h=1);++f<h;)for(var S=c[f],E=Sr(S),R=-1,M=E.length;++R<M;){var W=E[R],$=a[W];($===t||Fn($,Wa[W])&&!qe.call(a,W))&&(a[W]=S[W])}return a}),O2=Ae(function(a){return a.push(t,v0),Or(oE,t,a)});function L2(a,c){return y_(a,me(c,3),Gn)}function U2(a,c){return y_(a,me(c,3),Fx)}function H2(a,c){return a==null?a:Dx(a,me(c,3),Sr)}function V2(a,c){return a==null?a:B_(a,me(c,3),Sr)}function B2(a,c){return a&&Gn(a,me(c,3))}function W2(a,c){return a&&Fx(a,me(c,3))}function $2(a){return a==null?[]:yu(a,Dt(a))}function j2(a){return a==null?[]:yu(a,Sr(a))}function pT(a,c,f){var h=a==null?t:$o(a,c);return h===t?f:h}function q2(a,c){return a!=null&&_0(a,c,dL)}function uT(a,c){return a!=null&&_0(a,c,hL)}var z2=g0(function(a,c,f){c!=null&&typeof c.toString!="function"&&(c=iu.call(c)),a[c]=f},mT(vr)),G2=g0(function(a,c,f){c!=null&&typeof c.toString!="function"&&(c=iu.call(c)),qe.call(a,c)?a[c].push(f):a[c]=[f]},me),K2=Ae(jc);function Dt(a){return Tr(a)?C_(a):Ox(a)}function Sr(a){return Tr(a)?C_(a,!0):EL(a)}function Q2(a,c){var f={};return c=me(c,3),Gn(a,function(h,y,S){Si(f,c(h,y,S),h)}),f}function Z2(a,c){var f={};return c=me(c,3),Gn(a,function(h,y,S){Si(f,y,c(h,y,S))}),f}var Y2=za(function(a,c,f){xu(a,c,f)}),oE=za(function(a,c,f,h){xu(a,c,f,h)}),X2=bi(function(a,c){var f={};if(a==null)return f;var h=!1;c=nt(c,function(S){return S=Yi(S,a),h||(h=S.length>1),S}),Kn(a,Zx(a),f),h&&(f=cn(f,u|m|d,zL));for(var y=c.length;y--;)Wx(f,c[y]);return f});function J2(a,c){return aE(a,Iu(me(c)))}var eV=bi(function(a,c){return a==null?{}:kL(a,c)});function aE(a,c){if(a==null)return{};var f=nt(Zx(a),function(h){return[h]});return c=me(c),Y_(a,f,function(h,y){return c(h,y[0])})}function tV(a,c,f){c=Yi(c,a);var h=-1,y=c.length;for(y||(y=1,a=t);++h<y;){var S=a==null?t:a[Qn(c[h])];S===t&&(h=y,S=f),a=_i(S)?S.call(a):S}return a}function rV(a,c,f){return a==null?a:zc(a,c,f)}function nV(a,c,f,h){return h=typeof h=="function"?h:t,a==null?a:zc(a,c,f,h)}var sE=T0(Dt),cE=T0(Sr);function iV(a,c,f){var h=ve(a),y=h||Ji(a)||Qa(a);if(c=me(c,4),f==null){var S=a&&a.constructor;y?f=h?new S:[]:ct(a)?f=_i(S)?qa(su(a)):{}:f={}}return(y?on:Gn)(a,function(E,R,M){return c(f,E,R,M)}),f}function oV(a,c){return a==null?!0:Wx(a,c)}function aV(a,c,f){return a==null?a:r0(a,c,qx(f))}function sV(a,c,f,h){return h=typeof h=="function"?h:t,a==null?a:r0(a,c,qx(f),h)}function Za(a){return a==null?[]:wx(a,Dt(a))}function cV(a){return a==null?[]:wx(a,Sr(a))}function lV(a,c,f){return f===t&&(f=c,c=t),f!==t&&(f=un(f),f=f===f?f:0),c!==t&&(c=un(c),c=c===c?c:0),Wo(un(a),c,f)}function pV(a,c,f){return c=Ei(c),f===t?(f=c,c=0):f=Ei(f),a=un(a),gL(a,c,f)}function uV(a,c,f){if(f&&typeof f!="boolean"&&ir(a,c,f)&&(c=f=t),f===t&&(typeof c=="boolean"?(f=c,c=t):typeof a=="boolean"&&(f=a,a=t)),a===t&&c===t?(a=0,c=1):(a=Ei(a),c===t?(c=a,a=0):c=Ei(c)),a>c){var h=a;a=c,c=h}if(f||a%1||c%1){var y=F_();return qt(a+y*(c-a+$N("1e-"+((y+"").length-1))),c)}return Hx(a,c)}var fV=Ga(function(a,c,f){return c=c.toLowerCase(),a+(f?lE(c):c)});function lE(a){return fT(je(a).toLowerCase())}function pE(a){return a=je(a),a&&a.replace(dN,rO).replace(IN,"")}function mV(a,c,f){a=je(a),c=Ur(c);var h=a.length;f=f===t?h:Wo(_e(f),0,h);var y=f;return f-=c.length,f>=0&&a.slice(f,y)==c}function dV(a){return a=je(a),a&&K1.test(a)?a.replace(Bw,nO):a}function hV(a){return a=je(a),a&&eN.test(a)?a.replace(sx,"\\$&"):a}var gV=Ga(function(a,c,f){return a+(f?"-":"")+c.toLowerCase()}),yV=Ga(function(a,c,f){return a+(f?" ":"")+c.toLowerCase()}),xV=m0("toLowerCase");function TV(a,c,f){a=je(a),c=_e(c);var h=c?Ba(a):0;if(!c||h>=c)return a;var y=(c-h)/2;return _u(uu(y),f)+a+_u(pu(y),f)}function SV(a,c,f){a=je(a),c=_e(c);var h=c?Ba(a):0;return c&&h<c?a+_u(c-h,f):a}function vV(a,c,f){a=je(a),c=_e(c);var h=c?Ba(a):0;return c&&h<c?_u(c-h,f)+a:a}function bV(a,c,f){return f||c==null?c=0:c&&(c=+c),AO(je(a).replace(cx,""),c||0)}function wV(a,c,f){return(f?ir(a,c,f):c===t)?c=1:c=_e(c),Vx(je(a),c)}function _V(){var a=arguments,c=je(a[0]);return a.length<3?c:c.replace(a[1],a[2])}var EV=Ga(function(a,c,f){return a+(f?"_":"")+c.toLowerCase()});function RV(a,c,f){return f&&typeof f!="number"&&ir(a,c,f)&&(c=f=t),f=f===t?ie:f>>>0,f?(a=je(a),a&&(typeof c=="string"||c!=null&&!lT(c))&&(c=Ur(c),!c&&Va(a))?Xi(Mn(a),0,f):a.split(c,f)):[]}var kV=Ga(function(a,c,f){return a+(f?" ":"")+fT(c)});function PV(a,c,f){return a=je(a),f=f==null?0:Wo(_e(f),0,a.length),c=Ur(c),a.slice(f,f+c.length)==c}function AV(a,c,f){var h=T.templateSettings;f&&ir(a,c,f)&&(c=t),a=je(a),c=Ou({},c,h,S0);var y=Ou({},c.imports,h.imports,S0),S=Dt(y),E=wx(y,S),R,M,W=0,$=c.interpolate||Qp,G="__p += '",J=Ex((c.escape||Qp).source+"|"+$.source+"|"+($===Ww?cN:Qp).source+"|"+(c.evaluate||Qp).source+"|$","g"),se="//# sourceURL="+(qe.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++UN+"]")+`
`;a.replace(J,function(he,Fe,Ne,Vr,or,Br){return Ne||(Ne=Vr),G+=a.slice(W,Br).replace(hN,iO),Fe&&(R=!0,G+=`' +
__e(`+Fe+`) +
'`),or&&(M=!0,G+=`';
`+or+`;
__p += '`),Ne&&(G+=`' +
((__t = (`+Ne+`)) == null ? '' : __t) +
'`),W=Br+he.length,he}),G+=`';
`;var de=qe.call(c,"variable")&&c.variable;if(!de)G=`with (obj) {
`+G+`
}
`;else if(aN.test(de))throw new Te(o);G=(M?G.replace(j1,""):G).replace(q1,"$1").replace(z1,"$1;"),G="function("+(de||"obj")+`) {
`+(de?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(R?", __e = _.escape":"")+(M?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+G+`return __p
}`;var ke=fE(function(){return We(S,se+"return "+G).apply(t,E)});if(ke.source=G,cT(ke))throw ke;return ke}function MV(a){return je(a).toLowerCase()}function DV(a){return je(a).toUpperCase()}function FV(a,c,f){if(a=je(a),a&&(f||c===t))return v_(a);if(!a||!(c=Ur(c)))return a;var h=Mn(a),y=Mn(c),S=b_(h,y),E=w_(h,y)+1;return Xi(h,S,E).join("")}function IV(a,c,f){if(a=je(a),a&&(f||c===t))return a.slice(0,E_(a)+1);if(!a||!(c=Ur(c)))return a;var h=Mn(a),y=w_(h,Mn(c))+1;return Xi(h,0,y).join("")}function CV(a,c,f){if(a=je(a),a&&(f||c===t))return a.replace(cx,"");if(!a||!(c=Ur(c)))return a;var h=Mn(a),y=b_(h,Mn(c));return Xi(h,y).join("")}function NV(a,c){var f=Lt,h=ut;if(ct(c)){var y="separator"in c?c.separator:y;f="length"in c?_e(c.length):f,h="omission"in c?Ur(c.omission):h}a=je(a);var S=a.length;if(Va(a)){var E=Mn(a);S=E.length}if(f>=S)return a;var R=f-Ba(h);if(R<1)return h;var M=E?Xi(E,0,R).join(""):a.slice(0,R);if(y===t)return M+h;if(E&&(R+=M.length-R),lT(y)){if(a.slice(R).search(y)){var W,$=M;for(y.global||(y=Ex(y.source,je($w.exec(y))+"g")),y.lastIndex=0;W=y.exec($);)var G=W.index;M=M.slice(0,G===t?R:G)}}else if(a.indexOf(Ur(y),R)!=R){var J=M.lastIndexOf(y);J>-1&&(M=M.slice(0,J))}return M+h}function OV(a){return a=je(a),a&&G1.test(a)?a.replace(Vw,uO):a}var LV=Ga(function(a,c,f){return a+(f?" ":"")+c.toUpperCase()}),fT=m0("toUpperCase");function uE(a,c,f){return a=je(a),c=f?t:c,c===t?aO(a)?dO(a):YN(a):a.match(c)||[]}var fE=Ae(function(a,c){try{return Or(a,t,c)}catch(f){return cT(f)?f:new Te(f)}}),UV=bi(function(a,c){return on(c,function(f){f=Qn(f),Si(a,f,aT(a[f],a))}),a});function HV(a){var c=a==null?0:a.length,f=me();return a=c?nt(a,function(h){if(typeof h[1]!="function")throw new an(i);return[f(h[0]),h[1]]}):[],Ae(function(h){for(var y=-1;++y<c;){var S=a[y];if(Or(S[0],this,h))return Or(S[1],this,h)}})}function VV(a){return uL(cn(a,u))}function mT(a){return function(){return a}}function BV(a,c){return a==null||a!==a?c:a}var WV=h0(),$V=h0(!0);function vr(a){return a}function dT(a){return q_(typeof a=="function"?a:cn(a,u))}function jV(a){return G_(cn(a,u))}function qV(a,c){return K_(a,cn(c,u))}var zV=Ae(function(a,c){return function(f){return jc(f,a,c)}}),GV=Ae(function(a,c){return function(f){return jc(a,f,c)}});function hT(a,c,f){var h=Dt(c),y=yu(c,h);f==null&&!(ct(c)&&(y.length||!h.length))&&(f=c,c=a,a=this,y=yu(c,Dt(c)));var S=!(ct(f)&&"chain"in f)||!!f.chain,E=_i(a);return on(y,function(R){var M=c[R];a[R]=M,E&&(a.prototype[R]=function(){var W=this.__chain__;if(S||W){var $=a(this.__wrapped__),G=$.__actions__=xr(this.__actions__);return G.push({func:M,args:arguments,thisArg:a}),$.__chain__=W,$}return M.apply(a,qi([this.value()],arguments))})}),a}function KV(){return Mt._===this&&(Mt._=SO),this}function gT(){}function QV(a){return a=_e(a),Ae(function(c){return Q_(c,a)})}var ZV=Gx(nt),YV=Gx(g_),XV=Gx(xx);function mE(a){return eT(a)?Tx(Qn(a)):PL(a)}function JV(a){return function(c){return a==null?t:$o(a,c)}}var eB=y0(),tB=y0(!0);function yT(){return[]}function xT(){return!1}function rB(){return{}}function nB(){return""}function iB(){return!0}function oB(a,c){if(a=_e(a),a<1||a>X)return[];var f=ie,h=qt(a,ie);c=me(c),a-=ie;for(var y=bx(h,c);++f<a;)c(f);return y}function aB(a){return ve(a)?nt(a,Qn):Hr(a)?[a]:xr(I0(je(a)))}function sB(a){var c=++xO;return je(a)+c}var cB=wu(function(a,c){return a+c},0),lB=Kx("ceil"),pB=wu(function(a,c){return a/c},1),uB=Kx("floor");function fB(a){return a&&a.length?gu(a,vr,Ix):t}function mB(a,c){return a&&a.length?gu(a,me(c,2),Ix):t}function dB(a){return T_(a,vr)}function hB(a,c){return T_(a,me(c,2))}function gB(a){return a&&a.length?gu(a,vr,Lx):t}function yB(a,c){return a&&a.length?gu(a,me(c,2),Lx):t}var xB=wu(function(a,c){return a*c},1),TB=Kx("round"),SB=wu(function(a,c){return a-c},0);function vB(a){return a&&a.length?vx(a,vr):0}function bB(a,c){return a&&a.length?vx(a,me(c,2)):0}return T.after=jH,T.ary=j0,T.assign=D2,T.assignIn=iE,T.assignInWith=Ou,T.assignWith=F2,T.at=I2,T.before=q0,T.bind=aT,T.bindAll=UV,T.bindKey=z0,T.castArray=r2,T.chain=B0,T.chunk=uU,T.compact=fU,T.concat=mU,T.cond=HV,T.conforms=VV,T.constant=mT,T.countBy=vH,T.create=C2,T.curry=G0,T.curryRight=K0,T.debounce=Q0,T.defaults=N2,T.defaultsDeep=O2,T.defer=qH,T.delay=zH,T.difference=dU,T.differenceBy=hU,T.differenceWith=gU,T.drop=yU,T.dropRight=xU,T.dropRightWhile=TU,T.dropWhile=SU,T.fill=vU,T.filter=wH,T.flatMap=RH,T.flatMapDeep=kH,T.flatMapDepth=PH,T.flatten=L0,T.flattenDeep=bU,T.flattenDepth=wU,T.flip=GH,T.flow=WV,T.flowRight=$V,T.fromPairs=_U,T.functions=$2,T.functionsIn=j2,T.groupBy=AH,T.initial=RU,T.intersection=kU,T.intersectionBy=PU,T.intersectionWith=AU,T.invert=z2,T.invertBy=G2,T.invokeMap=DH,T.iteratee=dT,T.keyBy=FH,T.keys=Dt,T.keysIn=Sr,T.map=Mu,T.mapKeys=Q2,T.mapValues=Z2,T.matches=jV,T.matchesProperty=qV,T.memoize=Fu,T.merge=Y2,T.mergeWith=oE,T.method=zV,T.methodOf=GV,T.mixin=hT,T.negate=Iu,T.nthArg=QV,T.omit=X2,T.omitBy=J2,T.once=KH,T.orderBy=IH,T.over=ZV,T.overArgs=QH,T.overEvery=YV,T.overSome=XV,T.partial=sT,T.partialRight=Z0,T.partition=CH,T.pick=eV,T.pickBy=aE,T.property=mE,T.propertyOf=JV,T.pull=IU,T.pullAll=H0,T.pullAllBy=CU,T.pullAllWith=NU,T.pullAt=OU,T.range=eB,T.rangeRight=tB,T.rearg=ZH,T.reject=LH,T.remove=LU,T.rest=YH,T.reverse=iT,T.sampleSize=HH,T.set=rV,T.setWith=nV,T.shuffle=VH,T.slice=UU,T.sortBy=$H,T.sortedUniq=qU,T.sortedUniqBy=zU,T.split=RV,T.spread=XH,T.tail=GU,T.take=KU,T.takeRight=QU,T.takeRightWhile=ZU,T.takeWhile=YU,T.tap=fH,T.throttle=JH,T.thru=Au,T.toArray=tE,T.toPairs=sE,T.toPairsIn=cE,T.toPath=aB,T.toPlainObject=nE,T.transform=iV,T.unary=e2,T.union=XU,T.unionBy=JU,T.unionWith=eH,T.uniq=tH,T.uniqBy=rH,T.uniqWith=nH,T.unset=oV,T.unzip=oT,T.unzipWith=V0,T.update=aV,T.updateWith=sV,T.values=Za,T.valuesIn=cV,T.without=iH,T.words=uE,T.wrap=t2,T.xor=oH,T.xorBy=aH,T.xorWith=sH,T.zip=cH,T.zipObject=lH,T.zipObjectDeep=pH,T.zipWith=uH,T.entries=sE,T.entriesIn=cE,T.extend=iE,T.extendWith=Ou,hT(T,T),T.add=cB,T.attempt=fE,T.camelCase=fV,T.capitalize=lE,T.ceil=lB,T.clamp=lV,T.clone=n2,T.cloneDeep=o2,T.cloneDeepWith=a2,T.cloneWith=i2,T.conformsTo=s2,T.deburr=pE,T.defaultTo=BV,T.divide=pB,T.endsWith=mV,T.eq=Fn,T.escape=dV,T.escapeRegExp=hV,T.every=bH,T.find=_H,T.findIndex=N0,T.findKey=L2,T.findLast=EH,T.findLastIndex=O0,T.findLastKey=U2,T.floor=uB,T.forEach=W0,T.forEachRight=$0,T.forIn=H2,T.forInRight=V2,T.forOwn=B2,T.forOwnRight=W2,T.get=pT,T.gt=c2,T.gte=l2,T.has=q2,T.hasIn=uT,T.head=U0,T.identity=vr,T.includes=MH,T.indexOf=EU,T.inRange=pV,T.invoke=K2,T.isArguments=zo,T.isArray=ve,T.isArrayBuffer=p2,T.isArrayLike=Tr,T.isArrayLikeObject=gt,T.isBoolean=u2,T.isBuffer=Ji,T.isDate=f2,T.isElement=m2,T.isEmpty=d2,T.isEqual=h2,T.isEqualWith=g2,T.isError=cT,T.isFinite=y2,T.isFunction=_i,T.isInteger=Y0,T.isLength=Cu,T.isMap=X0,T.isMatch=x2,T.isMatchWith=T2,T.isNaN=S2,T.isNative=v2,T.isNil=w2,T.isNull=b2,T.isNumber=J0,T.isObject=ct,T.isObjectLike=ft,T.isPlainObject=Zc,T.isRegExp=lT,T.isSafeInteger=_2,T.isSet=eE,T.isString=Nu,T.isSymbol=Hr,T.isTypedArray=Qa,T.isUndefined=E2,T.isWeakMap=R2,T.isWeakSet=k2,T.join=MU,T.kebabCase=gV,T.last=pn,T.lastIndexOf=DU,T.lowerCase=yV,T.lowerFirst=xV,T.lt=P2,T.lte=A2,T.max=fB,T.maxBy=mB,T.mean=dB,T.meanBy=hB,T.min=gB,T.minBy=yB,T.stubArray=yT,T.stubFalse=xT,T.stubObject=rB,T.stubString=nB,T.stubTrue=iB,T.multiply=xB,T.nth=FU,T.noConflict=KV,T.noop=gT,T.now=Du,T.pad=TV,T.padEnd=SV,T.padStart=vV,T.parseInt=bV,T.random=uV,T.reduce=NH,T.reduceRight=OH,T.repeat=wV,T.replace=_V,T.result=tV,T.round=TB,T.runInContext=P,T.sample=UH,T.size=BH,T.snakeCase=EV,T.some=WH,T.sortedIndex=HU,T.sortedIndexBy=VU,T.sortedIndexOf=BU,T.sortedLastIndex=WU,T.sortedLastIndexBy=$U,T.sortedLastIndexOf=jU,T.startCase=kV,T.startsWith=PV,T.subtract=SB,T.sum=vB,T.sumBy=bB,T.template=AV,T.times=oB,T.toFinite=Ei,T.toInteger=_e,T.toLength=rE,T.toLower=MV,T.toNumber=un,T.toSafeInteger=M2,T.toString=je,T.toUpper=DV,T.trim=FV,T.trimEnd=IV,T.trimStart=CV,T.truncate=NV,T.unescape=OV,T.uniqueId=sB,T.upperCase=LV,T.upperFirst=fT,T.each=W0,T.eachRight=$0,T.first=U0,hT(T,function(){var a={};return Gn(T,function(c,f){qe.call(T.prototype,f)||(a[f]=c)}),a}(),{chain:!1}),T.VERSION=e,on(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){T[a].placeholder=T}),on(["drop","take"],function(a,c){Ce.prototype[a]=function(f){f=f===t?1:Rt(_e(f),0);var h=this.__filtered__&&!c?new Ce(this):this.clone();return h.__filtered__?h.__takeCount__=qt(f,h.__takeCount__):h.__views__.push({size:qt(f,ie),type:a+(h.__dir__<0?"Right":"")}),h},Ce.prototype[a+"Right"]=function(f){return this.reverse()[a](f).reverse()}}),on(["filter","map","takeWhile"],function(a,c){var f=c+1,h=f==D||f==K;Ce.prototype[a]=function(y){var S=this.clone();return S.__iteratees__.push({iteratee:me(y,3),type:f}),S.__filtered__=S.__filtered__||h,S}}),on(["head","last"],function(a,c){var f="take"+(c?"Right":"");Ce.prototype[a]=function(){return this[f](1).value()[0]}}),on(["initial","tail"],function(a,c){var f="drop"+(c?"":"Right");Ce.prototype[a]=function(){return this.__filtered__?new Ce(this):this[f](1)}}),Ce.prototype.compact=function(){return this.filter(vr)},Ce.prototype.find=function(a){return this.filter(a).head()},Ce.prototype.findLast=function(a){return this.reverse().find(a)},Ce.prototype.invokeMap=Ae(function(a,c){return typeof a=="function"?new Ce(this):this.map(function(f){return jc(f,a,c)})}),Ce.prototype.reject=function(a){return this.filter(Iu(me(a)))},Ce.prototype.slice=function(a,c){a=_e(a);var f=this;return f.__filtered__&&(a>0||c<0)?new Ce(f):(a<0?f=f.takeRight(-a):a&&(f=f.drop(a)),c!==t&&(c=_e(c),f=c<0?f.dropRight(-c):f.take(c-a)),f)},Ce.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},Ce.prototype.toArray=function(){return this.take(ie)},Gn(Ce.prototype,function(a,c){var f=/^(?:filter|find|map|reject)|While$/.test(c),h=/^(?:head|last)$/.test(c),y=T[h?"take"+(c=="last"?"Right":""):c],S=h||/^find/.test(c);y&&(T.prototype[c]=function(){var E=this.__wrapped__,R=h?[1]:arguments,M=E instanceof Ce,W=R[0],$=M||ve(E),G=function(Fe){var Ne=y.apply(T,qi([Fe],R));return h&&J?Ne[0]:Ne};$&&f&&typeof W=="function"&&W.length!=1&&(M=$=!1);var J=this.__chain__,se=!!this.__actions__.length,de=S&&!J,ke=M&&!se;if(!S&&$){E=ke?E:new Ce(this);var he=a.apply(E,R);return he.__actions__.push({func:Au,args:[G],thisArg:t}),new sn(he,J)}return de&&ke?a.apply(this,R):(he=this.thru(G),de?h?he.value()[0]:he.value():he)})}),on(["pop","push","shift","sort","splice","unshift"],function(a){var c=tu[a],f=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",h=/^(?:pop|shift)$/.test(a);T.prototype[a]=function(){var y=arguments;if(h&&!this.__chain__){var S=this.value();return c.apply(ve(S)?S:[],y)}return this[f](function(E){return c.apply(ve(E)?E:[],y)})}}),Gn(Ce.prototype,function(a,c){var f=T[c];if(f){var h=f.name+"";qe.call(ja,h)||(ja[h]=[]),ja[h].push({name:c,func:f})}}),ja[bu(t,v).name]=[{name:"wrapper",func:t}],Ce.prototype.clone=OO,Ce.prototype.reverse=LO,Ce.prototype.value=UO,T.prototype.at=mH,T.prototype.chain=dH,T.prototype.commit=hH,T.prototype.next=gH,T.prototype.plant=xH,T.prototype.reverse=TH,T.prototype.toJSON=T.prototype.valueOf=T.prototype.value=SH,T.prototype.first=T.prototype.head,Lc&&(T.prototype[Lc]=yH),T},Gi=hO();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Mt._=Gi,define(function(){return Gi})):Uo?((Uo.exports=Gi)._=Gi,dx._=Gi):Mt._=Gi}).call(hc)});var HI=Ye((HUe,UI)=>{"use strict";UI.exports=OI;function OI(t,e,r){t instanceof RegExp&&(t=NI(t,r)),e instanceof RegExp&&(e=NI(e,r));var n=LI(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}function NI(t,e){var r=e.match(t);return r?r[0]:null}OI.range=LI;function LI(t,e,r){var n,i,o,s,l,p=r.indexOf(t),u=r.indexOf(e,p+1),m=p;if(p>=0&&u>0){if(t===e)return[p,u];for(n=[],o=r.length;m>=0&&!l;)m==p?(n.push(m),p=r.indexOf(t,m+1)):n.length==1?l=[n.pop(),u]:(i=n.pop(),i<o&&(o=i,s=u),u=r.indexOf(e,m+1)),m=p<u&&p>=0?p:u;n.length&&(l=[o,s])}return l}});var GI=Ye((VUe,zI)=>{var VI=HI();zI.exports=WZ;var BI="\0SLASH"+Math.random()+"\0",WI="\0OPEN"+Math.random()+"\0",xb="\0CLOSE"+Math.random()+"\0",$I="\0COMMA"+Math.random()+"\0",jI="\0PERIOD"+Math.random()+"\0";function yb(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function VZ(t){return t.split("\\\\").join(BI).split("\\{").join(WI).split("\\}").join(xb).split("\\,").join($I).split("\\.").join(jI)}function BZ(t){return t.split(BI).join("\\").split(WI).join("{").split(xb).join("}").split($I).join(",").split(jI).join(".")}function qI(t){if(!t)return[""];var e=[],r=VI("{","}",t);if(!r)return t.split(",");var n=r.pre,i=r.body,o=r.post,s=n.split(",");s[s.length-1]+="{"+i+"}";var l=qI(o);return o.length&&(s[s.length-1]+=l.shift(),s.push.apply(s,l)),e.push.apply(e,s),e}function WZ(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),wp(VZ(t),!0).map(BZ)):[]}function $Z(t){return"{"+t+"}"}function jZ(t){return/^-?0\d/.test(t)}function qZ(t,e){return t<=e}function zZ(t,e){return t>=e}function wp(t,e){var r=[],n=VI("{","}",t);if(!n)return[t];var i=n.pre,o=n.post.length?wp(n.post,!1):[""];if(/\$$/.test(n.pre))for(var s=0;s<o.length;s++){var l=i+"{"+n.body+"}"+o[s];r.push(l)}else{var p=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),u=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),m=p||u,d=n.body.indexOf(",")>=0;if(!m&&!d)return n.post.match(/,.*\}/)?(t=n.pre+"{"+n.body+xb+n.post,wp(t)):[t];var g;if(m)g=n.body.split(/\.\./);else if(g=qI(n.body),g.length===1&&(g=wp(g[0],!1).map($Z),g.length===1))return o.map(function(L){return n.pre+g[0]+L});var x;if(m){var b=yb(g[0]),v=yb(g[1]),I=Math.max(g[0].length,g[1].length),F=g.length==3?Math.abs(yb(g[2])):1,V=qZ,Z=v<b;Z&&(F*=-1,V=zZ);var oe=g.some(jZ);x=[];for(var ae=b;V(ae,v);ae+=F){var le;if(u)le=String.fromCharCode(ae),le==="\\"&&(le="");else if(le=String(ae),oe){var st=I-le.length;if(st>0){var Lt=new Array(st+1).join("0");ae<0?le="-"+Lt+le.slice(1):le=Lt+le}}x.push(le)}}else{x=[];for(var ut=0;ut<g.length;ut++)x.push.apply(x,wp(g[ut],!1))}for(var ut=0;ut<x.length;ut++)for(var s=0;s<o.length;s++){var l=i+x[ut]+o[s];(!e||m||l)&&r.push(l)}}return r}});var FX={};PB(FX,{default:()=>H1});module.exports=AB(FX);var TT="cursorless.command",Uu=class{constructor(e){this.baseTitle=e}get title(){return`Cursorless: ${this.baseTitle}`}},mt=class extends Uu{constructor(){super(...arguments);this.isVisible=!1}},xt=class extends Uu{constructor(){super(...arguments);this.isVisible=!0}};var CX={"cursorless.toggleDecorations":new xt("Toggle decorations"),"cursorless.recomputeDecorationStyles":new xt("Recompute decoration styles"),"cursorless.recordTestCase":new xt("Record test case"),"cursorless.recordOneTestCaseThenPause":new xt("Record one test case, then pause"),"cursorless.pauseRecording":new xt("Pause test case recording"),"cursorless.resumeRecording":new xt("Resume test case recording"),"cursorless.recordScopeTests.showUnimplementedFacets":new xt("Bulk record unimplemented scope facets"),"cursorless.recordScopeTests.saveActiveDocument":new xt("Bulk save scope tests for the active document"),"cursorless.showDocumentation":new xt("Show documentation"),"cursorless.showInstallationDependencies":new xt("Show installation dependencies"),"cursorless.showScopeVisualizer":new xt("Show the scope visualizer"),"cursorless.hideScopeVisualizer":new xt("Hide the scope visualizer"),"cursorless.analyzeCommandHistory":new xt("Analyze collected command history"),"cursorless.tutorial.start":new mt("Start a tutorial"),"cursorless.tutorial.next":new xt("Tutorial next"),"cursorless.tutorial.previous":new xt("Tutorial previous"),"cursorless.tutorial.restart":new xt("Tutorial restart"),"cursorless.tutorial.resume":new xt("Tutorial resume"),"cursorless.tutorial.list":new xt("Tutorial list"),"cursorless.documentationOpened":new mt("Used by talon to notify us that the docs have been opened; for use with tutorial"),"cursorless.command":new mt("The core cursorless command"),"cursorless.repeatPreviousCommand":new xt("Repeat the previous Cursorless command"),"cursorless.showQuickPick":new mt("Pop up a quick pick of all cursorless commands"),"cursorless.showCheatsheet":new mt("Display the cursorless cheatsheet"),"cursorless.internal.updateCheatsheetDefaults":new mt("Update the default values of the cheatsheet payload used on the website and for local development. Be sure to run this on stock community and cursorless."),"cursorless.private.logQuickActions":new mt("Log the quick actions available at the current cursor position"),"cursorless.takeSnapshot":new mt("Take a snapshot of the current editor state"),"cursorless.keyboard.escape":new mt("Should be mapped to the escape key when using cursorless keyboard. By default, exits modal keyboard mode, but changes behaviour when Cursorless is expecting a continuation keystroke.  For example, when you type a color and Cursorless is waiting for a character, it cancels the color and switches back to modal mode."),"cursorless.keyboard.targeted.targetHat":new mt("Sets the keyboard target to the given hat"),"cursorless.keyboard.targeted.targetScope":new mt("Sets the keyboard target to the scope containing the current target"),"cursorless.keyboard.targeted.targetSelection":new mt("Sets the keyboard target to the current selection"),"cursorless.keyboard.targeted.clearTarget":new mt("Clears the current keyboard target"),"cursorless.keyboard.targeted.runActionOnTarget":new mt("Run the given action on the current keyboard target"),"cursorless.keyboard.modal.modeOn":new mt("Turn on the cursorless modal mode"),"cursorless.keyboard.modal.modeOff":new mt("Turn off the cursorless modal mode"),"cursorless.keyboard.modal.modeToggle":new mt("Toggle the cursorless modal mode"),"cursorless.keyboard.undoTarget":new mt("Undo keyboard targeting changes"),"cursorless.keyboard.redoTarget":new mt("Redo keyboard targeting changes"),"cursorless.migrateSnippets":new mt("Migrate snippets from the old Cursorless format to the new community format")};var Hu=class{constructor(e,r){this.callback=e;this.debounceDelayMs=r;this.timeoutHandle=null;this.run=this.run.bind(this)}run(){this.timeoutHandle!=null&&clearTimeout(this.timeoutHandle),this.timeoutHandle=setTimeout(()=>{this.callback(),this.timeoutHandle=null},this.debounceDelayMs)}dispose(){this.timeoutHandle!=null&&clearTimeout(this.timeoutHandle)}};var Vu=class extends Error{constructor(e){super(`Language '${e}' is not implemented yet; See https://www.cursorless.org/docs/contributing/adding-a-new-language/`),this.name="UnsupportedLanguageError"}};var Bu=class extends Error{constructor(){super("Cursorless Talon version is ahead of Cursorless VSCode extension version. Please update Cursorless VSCode.")}},dt=class extends Error{constructor(e){super(`Couldn't find containing ${e}.`),this.name="NoContainingScopeError"}};var Wu=class{constructor(){this.signals={prePhrase:{getVersion:async()=>null}}}async getFocusedElementType(){return this.focusedElementType}setFocusedElementType(e){this.focusedElementType=e}};var MB=typeof global=="object"&&global&&global.Object===Object&&global,$u=MB;var DB=typeof self=="object"&&self&&self.Object===Object&&self,FB=$u||DB||Function("return this")(),Ft=FB;var IB=Ft.Symbol,ar=IB;var gE=Object.prototype,CB=gE.hasOwnProperty,NB=gE.toString,Yc=ar?ar.toStringTag:void 0;function OB(t){var e=CB.call(t,Yc),r=t[Yc];try{t[Yc]=void 0;var n=!0}catch{}var i=NB.call(t);return n&&(e?t[Yc]=r:delete t[Yc]),i}var yE=OB;var LB=Object.prototype,UB=LB.toString;function HB(t){return UB.call(t)}var xE=HB;var VB="[object Null]",BB="[object Undefined]",TE=ar?ar.toStringTag:void 0;function WB(t){return t==null?t===void 0?BB:VB:TE&&TE in Object(t)?yE(t):xE(t)}var Cn=WB;function $B(t){return t!=null&&typeof t=="object"}var sr=$B;var jB="[object Symbol]";function qB(t){return typeof t=="symbol"||sr(t)&&Cn(t)==jB}var Wr=qB;function zB(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var fn=zB;var GB=Array.isArray,ze=GB;var KB=1/0,SE=ar?ar.prototype:void 0,vE=SE?SE.toString:void 0;function bE(t){if(typeof t=="string")return t;if(ze(t))return fn(t,bE)+"";if(Wr(t))return vE?vE.call(t):"";var e=t+"";return e=="0"&&1/t==-KB?"-0":e}var wE=bE;var QB=/\s/;function ZB(t){for(var e=t.length;e--&&QB.test(t.charAt(e)););return e}var _E=ZB;var YB=/^\s+/;function XB(t){return t&&t.slice(0,_E(t)+1).replace(YB,"")}var EE=XB;function JB(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var $r=JB;var RE=NaN,eW=/^[-+]0x[0-9a-f]+$/i,tW=/^0b[01]+$/i,rW=/^0o[0-7]+$/i,nW=parseInt;function iW(t){if(typeof t=="number")return t;if(Wr(t))return RE;if($r(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=$r(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=EE(t);var r=tW.test(t);return r||rW.test(t)?nW(t.slice(2),r?2:8):eW.test(t)?RE:+t}var kE=iW;var PE=1/0,oW=17976931348623157e292;function aW(t){if(!t)return t===0?t:0;if(t=kE(t),t===PE||t===-PE){var e=t<0?-1:1;return e*oW}return t===t?t:0}var Ya=aW;function sW(t){var e=Ya(t),r=e%1;return e===e?r?e-r:e:0}var ju=sW;function cW(t){return t}var wr=cW;var lW="[object AsyncFunction]",pW="[object Function]",uW="[object GeneratorFunction]",fW="[object Proxy]";function mW(t){if(!$r(t))return!1;var e=Cn(t);return e==pW||e==uW||e==lW||e==fW}var qu=mW;var dW=Ft["__core-js_shared__"],zu=dW;var AE=function(){var t=/[^.]+$/.exec(zu&&zu.keys&&zu.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function hW(t){return!!AE&&AE in t}var ME=hW;var gW=Function.prototype,yW=gW.toString;function xW(t){if(t!=null){try{return yW.call(t)}catch{}try{return t+""}catch{}}return""}var ki=xW;var TW=/[\\^$.*+?()[\]{}|]/g,SW=/^\[object .+?Constructor\]$/,vW=Function.prototype,bW=Object.prototype,wW=vW.toString,_W=bW.hasOwnProperty,EW=RegExp("^"+wW.call(_W).replace(TW,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function RW(t){if(!$r(t)||ME(t))return!1;var e=qu(t)?EW:SW;return e.test(ki(t))}var DE=RW;function kW(t,e){return t?.[e]}var FE=kW;function PW(t,e){var r=FE(t,e);return DE(r)?r:void 0}var _r=PW;var AW=_r(Ft,"WeakMap"),Go=AW;var MW=Go&&new Go,ST=MW;var IE=Object.create,DW=function(){function t(){}return function(e){if(!$r(e))return{};if(IE)return IE(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),Gu=DW;function FW(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var CE=FW;function IW(){}var Xa=IW;var CW=4294967295;function Ku(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=CW,this.__views__=[]}Ku.prototype=Gu(Xa.prototype);Ku.prototype.constructor=Ku;var Ja=Ku;function NW(){}var Qu=NW;var OW=ST?function(t){return ST.get(t)}:Qu,Zu=OW;var LW={},vT=LW;var UW=Object.prototype,HW=UW.hasOwnProperty;function VW(t){for(var e=t.name+"",r=vT[e],n=HW.call(vT,e)?r.length:0;n--;){var i=r[n],o=i.func;if(o==null||o==t)return i.name}return e}var es=VW;function Yu(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}Yu.prototype=Gu(Xa.prototype);Yu.prototype.constructor=Yu;var eo=Yu;function BW(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var to=BW;function WW(t){if(t instanceof Ja)return t.clone();var e=new eo(t.__wrapped__,t.__chain__);return e.__actions__=to(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var NE=WW;var $W=Object.prototype,jW=$W.hasOwnProperty;function Xu(t){if(sr(t)&&!ze(t)&&!(t instanceof Ja)){if(t instanceof eo)return t;if(jW.call(t,"__wrapped__"))return NE(t)}return new eo(t)}Xu.prototype=Xa.prototype;Xu.prototype.constructor=Xu;var OE=Xu;function qW(t){var e=es(t),r=OE[e];if(typeof r!="function"||!(e in Ja.prototype))return!1;if(t===r)return!0;var n=Zu(r);return!!n&&t===n[0]}var bT=qW;var zW=800,GW=16,KW=Date.now;function QW(t){var e=0,r=0;return function(){var n=KW(),i=GW-(n-r);if(r=n,i>0){if(++e>=zW)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var LE=QW;function ZW(t){return function(){return t}}var UE=ZW;var YW=function(){try{var t=_r(Object,"defineProperty");return t({},"",{}),t}catch{}}(),wT=YW;var XW=wT?function(t,e){return wT(t,"toString",{configurable:!0,enumerable:!1,value:UE(e),writable:!0})}:wr,HE=XW;var JW=LE(HE),Ju=JW;function e$(t,e,r,n){for(var i=t.length,o=r+(n?1:-1);n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}var ef=e$;function t$(t){return t!==t}var VE=t$;function r$(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}var BE=r$;function n$(t,e,r){return e===e?BE(t,e,r):ef(t,VE,r)}var tf=n$;function i$(t,e){var r=t==null?0:t.length;return!!r&&tf(t,e,0)>-1}var WE=i$;var o$=9007199254740991,a$=/^(?:0|[1-9]\d*)$/;function s$(t,e){var r=typeof t;return e=e??o$,!!e&&(r=="number"||r!="symbol"&&a$.test(t))&&t>-1&&t%1==0&&t<e}var ts=s$;function c$(t,e){return t===e||t!==t&&e!==e}var rs=c$;var $E=Math.max;function l$(t,e,r){return e=$E(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,o=$E(n.length-e,0),s=Array(o);++i<o;)s[i]=n[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=n[i];return l[e]=r(s),CE(t,this,l)}}var rf=l$;function p$(t,e){return Ju(rf(t,e,wr),t+"")}var ns=p$;var u$=9007199254740991;function f$(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=u$}var is=f$;function m$(t){return t!=null&&is(t.length)&&!qu(t)}var Zn=m$;function d$(t,e,r){if(!$r(r))return!1;var n=typeof e;return(n=="number"?Zn(r)&&ts(e,r.length):n=="string"&&e in r)?rs(r[e],t):!1}var Ko=d$;var h$=Object.prototype;function g$(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||h$;return t===r}var jE=g$;function y$(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var nf=y$;var x$="[object Arguments]";function T$(t){return sr(t)&&Cn(t)==x$}var _T=T$;var qE=Object.prototype,S$=qE.hasOwnProperty,v$=qE.propertyIsEnumerable,b$=_T(function(){return arguments}())?_T:function(t){return sr(t)&&S$.call(t,"callee")&&!v$.call(t,"callee")},os=b$;function w$(){return!1}var zE=w$;var QE=typeof exports=="object"&&exports&&!exports.nodeType&&exports,GE=QE&&typeof module=="object"&&module&&!module.nodeType&&module,_$=GE&&GE.exports===QE,KE=_$?Ft.Buffer:void 0,E$=KE?KE.isBuffer:void 0,R$=E$||zE,Xc=R$;var k$="[object Arguments]",P$="[object Array]",A$="[object Boolean]",M$="[object Date]",D$="[object Error]",F$="[object Function]",I$="[object Map]",C$="[object Number]",N$="[object Object]",O$="[object RegExp]",L$="[object Set]",U$="[object String]",H$="[object WeakMap]",V$="[object ArrayBuffer]",B$="[object DataView]",W$="[object Float32Array]",$$="[object Float64Array]",j$="[object Int8Array]",q$="[object Int16Array]",z$="[object Int32Array]",G$="[object Uint8Array]",K$="[object Uint8ClampedArray]",Q$="[object Uint16Array]",Z$="[object Uint32Array]",tt={};tt[W$]=tt[$$]=tt[j$]=tt[q$]=tt[z$]=tt[G$]=tt[K$]=tt[Q$]=tt[Z$]=!0;tt[k$]=tt[P$]=tt[V$]=tt[A$]=tt[B$]=tt[M$]=tt[D$]=tt[F$]=tt[I$]=tt[C$]=tt[N$]=tt[O$]=tt[L$]=tt[U$]=tt[H$]=!1;function Y$(t){return sr(t)&&is(t.length)&&!!tt[Cn(t)]}var ZE=Y$;function X$(t){return function(e){return t(e)}}var as=X$;var YE=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Jc=YE&&typeof module=="object"&&module&&!module.nodeType&&module,J$=Jc&&Jc.exports===YE,ET=J$&&$u.process,ej=function(){try{var t=Jc&&Jc.require&&Jc.require("util").types;return t||ET&&ET.binding&&ET.binding("util")}catch{}}(),RT=ej;var XE=RT&&RT.isTypedArray,tj=XE?as(XE):ZE,of=tj;var rj=Object.prototype,nj=rj.hasOwnProperty;function ij(t,e){var r=ze(t),n=!r&&os(t),i=!r&&!n&&Xc(t),o=!r&&!n&&!i&&of(t),s=r||n||i||o,l=s?nf(t.length,String):[],p=l.length;for(var u in t)(e||nj.call(t,u))&&!(s&&(u=="length"||i&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||ts(u,p)))&&l.push(u);return l}var JE=ij;function oj(t,e){return function(r){return t(e(r))}}var eR=oj;var aj=eR(Object.keys,Object),tR=aj;var sj=Object.prototype,cj=sj.hasOwnProperty;function lj(t){if(!jE(t))return tR(t);var e=[];for(var r in Object(t))cj.call(t,r)&&r!="constructor"&&e.push(r);return e}var rR=lj;function pj(t){return Zn(t)?JE(t):rR(t)}var ro=pj;var uj=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,fj=/^\w*$/;function mj(t,e){if(ze(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||Wr(t)?!0:fj.test(t)||!uj.test(t)||e!=null&&t in Object(e)}var ss=mj;var dj=_r(Object,"create"),Pi=dj;function hj(){this.__data__=Pi?Pi(null):{},this.size=0}var nR=hj;function gj(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var iR=gj;var yj="__lodash_hash_undefined__",xj=Object.prototype,Tj=xj.hasOwnProperty;function Sj(t){var e=this.__data__;if(Pi){var r=e[t];return r===yj?void 0:r}return Tj.call(e,t)?e[t]:void 0}var oR=Sj;var vj=Object.prototype,bj=vj.hasOwnProperty;function wj(t){var e=this.__data__;return Pi?e[t]!==void 0:bj.call(e,t)}var aR=wj;var _j="__lodash_hash_undefined__";function Ej(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Pi&&e===void 0?_j:e,this}var sR=Ej;function cs(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}cs.prototype.clear=nR;cs.prototype.delete=iR;cs.prototype.get=oR;cs.prototype.has=aR;cs.prototype.set=sR;var kT=cs;function Rj(){this.__data__=[],this.size=0}var cR=Rj;function kj(t,e){for(var r=t.length;r--;)if(rs(t[r][0],e))return r;return-1}var no=kj;var Pj=Array.prototype,Aj=Pj.splice;function Mj(t){var e=this.__data__,r=no(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():Aj.call(e,r,1),--this.size,!0}var lR=Mj;function Dj(t){var e=this.__data__,r=no(e,t);return r<0?void 0:e[r][1]}var pR=Dj;function Fj(t){return no(this.__data__,t)>-1}var uR=Fj;function Ij(t,e){var r=this.__data__,n=no(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var fR=Ij;function ls(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ls.prototype.clear=cR;ls.prototype.delete=lR;ls.prototype.get=pR;ls.prototype.has=uR;ls.prototype.set=fR;var io=ls;var Cj=_r(Ft,"Map"),oo=Cj;function Nj(){this.size=0,this.__data__={hash:new kT,map:new(oo||io),string:new kT}}var mR=Nj;function Oj(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var dR=Oj;function Lj(t,e){var r=t.__data__;return dR(e)?r[typeof e=="string"?"string":"hash"]:r.map}var ao=Lj;function Uj(t){var e=ao(this,t).delete(t);return this.size-=e?1:0,e}var hR=Uj;function Hj(t){return ao(this,t).get(t)}var gR=Hj;function Vj(t){return ao(this,t).has(t)}var yR=Vj;function Bj(t,e){var r=ao(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var xR=Bj;function ps(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ps.prototype.clear=mR;ps.prototype.delete=hR;ps.prototype.get=gR;ps.prototype.has=yR;ps.prototype.set=xR;var Qo=ps;var Wj="Expected a function";function PT(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Wj);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=t.apply(this,n);return r.cache=o.set(i,s)||o,s};return r.cache=new(PT.Cache||Qo),r}PT.Cache=Qo;var el=PT;var $j=500;function jj(t){var e=el(t,function(n){return r.size===$j&&r.clear(),n}),r=e.cache;return e}var TR=jj;var qj=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,zj=/\\(\\)?/g,Gj=TR(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(qj,function(r,n,i,o){e.push(i?o.replace(zj,"$1"):n||r)}),e}),SR=Gj;function Kj(t){return t==null?"":wE(t)}var Nn=Kj;function Qj(t,e){return ze(t)?t:ss(t,e)?[t]:SR(Nn(t))}var af=Qj;var Zj=1/0;function Yj(t){if(typeof t=="string"||Wr(t))return t;var e=t+"";return e=="0"&&1/t==-Zj?"-0":e}var so=Yj;function Xj(t,e){e=af(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[so(e[r++])];return r&&r==n?t:void 0}var us=Xj;function Jj(t,e,r){var n=t==null?void 0:us(t,e);return n===void 0?r:n}var Zo=Jj;function eq(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var fs=eq;var vR=ar?ar.isConcatSpreadable:void 0;function tq(t){return ze(t)||os(t)||!!(vR&&t&&t[vR])}var bR=tq;function wR(t,e,r,n,i){var o=-1,s=t.length;for(r||(r=bR),i||(i=[]);++o<s;){var l=t[o];e>0&&r(l)?e>1?wR(l,e-1,r,n,i):fs(i,l):n||(i[i.length]=l)}return i}var ms=wR;function rq(t){var e=t==null?0:t.length;return e?ms(t,1):[]}var rt=rq;function nq(t){return Ju(rf(t,void 0,rt),t+"")}var _R=nq;function iq(t){return function(e){return t?.[e]}}var ER=iq;var oq={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},aq=ER(oq),RR=aq;var sq=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,cq="\\u0300-\\u036f",lq="\\ufe20-\\ufe2f",pq="\\u20d0-\\u20ff",uq=cq+lq+pq,fq="["+uq+"]",mq=RegExp(fq,"g");function dq(t){return t=Nn(t),t&&t.replace(sq,RR).replace(mq,"")}var AT=dq;function hq(){this.__data__=new io,this.size=0}var kR=hq;function gq(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var PR=gq;function yq(t){return this.__data__.get(t)}var AR=yq;function xq(t){return this.__data__.has(t)}var MR=xq;var Tq=200;function Sq(t,e){var r=this.__data__;if(r instanceof io){var n=r.__data__;if(!oo||n.length<Tq-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Qo(n)}return r.set(t,e),this.size=r.size,this}var DR=Sq;function ds(t){var e=this.__data__=new io(t);this.size=e.size}ds.prototype.clear=kR;ds.prototype.delete=PR;ds.prototype.get=AR;ds.prototype.has=MR;ds.prototype.set=DR;var hs=ds;function vq(t,e){for(var r=-1,n=t==null?0:t.length,i=0,o=[];++r<n;){var s=t[r];e(s,r,t)&&(o[i++]=s)}return o}var sf=vq;function bq(){return[]}var FR=bq;var wq=Object.prototype,_q=wq.propertyIsEnumerable,IR=Object.getOwnPropertySymbols,Eq=IR?function(t){return t==null?[]:(t=Object(t),sf(IR(t),function(e){return _q.call(t,e)}))}:FR,CR=Eq;function Rq(t,e,r){var n=e(t);return ze(t)?n:fs(n,r(t))}var NR=Rq;function kq(t){return NR(t,ro,CR)}var MT=kq;var Pq=_r(Ft,"DataView"),cf=Pq;var Aq=_r(Ft,"Promise"),lf=Aq;var Mq=_r(Ft,"Set"),co=Mq;var OR="[object Map]",Dq="[object Object]",LR="[object Promise]",UR="[object Set]",HR="[object WeakMap]",VR="[object DataView]",Fq=ki(cf),Iq=ki(oo),Cq=ki(lf),Nq=ki(co),Oq=ki(Go),Yo=Cn;(cf&&Yo(new cf(new ArrayBuffer(1)))!=VR||oo&&Yo(new oo)!=OR||lf&&Yo(lf.resolve())!=LR||co&&Yo(new co)!=UR||Go&&Yo(new Go)!=HR)&&(Yo=function(t){var e=Cn(t),r=e==Dq?t.constructor:void 0,n=r?ki(r):"";if(n)switch(n){case Fq:return VR;case Iq:return OR;case Cq:return LR;case Nq:return UR;case Oq:return HR}return e});var DT=Yo;var Lq=Ft.Uint8Array,FT=Lq;function Uq(){var t=arguments.length;if(!t)return[];for(var e=Array(t-1),r=arguments[0],n=t;n--;)e[n-1]=arguments[n];return fs(ze(r)?to(r):[r],ms(e,1))}var tl=Uq;var Hq="__lodash_hash_undefined__";function Vq(t){return this.__data__.set(t,Hq),this}var BR=Vq;function Bq(t){return this.__data__.has(t)}var WR=Bq;function pf(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new Qo;++e<r;)this.add(t[e])}pf.prototype.add=pf.prototype.push=BR;pf.prototype.has=WR;var uf=pf;function Wq(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var $R=Wq;function $q(t,e){return t.has(e)}var ff=$q;var jq=1,qq=2;function zq(t,e,r,n,i,o){var s=r&jq,l=t.length,p=e.length;if(l!=p&&!(s&&p>l))return!1;var u=o.get(t),m=o.get(e);if(u&&m)return u==e&&m==t;var d=-1,g=!0,x=r&qq?new uf:void 0;for(o.set(t,e),o.set(e,t);++d<l;){var b=t[d],v=e[d];if(n)var I=s?n(v,b,d,e,t,o):n(b,v,d,t,e,o);if(I!==void 0){if(I)continue;g=!1;break}if(x){if(!$R(e,function(F,V){if(!ff(x,V)&&(b===F||i(b,F,r,n,o)))return x.push(V)})){g=!1;break}}else if(!(b===v||i(b,v,r,n,o))){g=!1;break}}return o.delete(t),o.delete(e),g}var mf=zq;function Gq(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}var jR=Gq;function Kq(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var gs=Kq;var Qq=1,Zq=2,Yq="[object Boolean]",Xq="[object Date]",Jq="[object Error]",e3="[object Map]",t3="[object Number]",r3="[object RegExp]",n3="[object Set]",i3="[object String]",o3="[object Symbol]",a3="[object ArrayBuffer]",s3="[object DataView]",qR=ar?ar.prototype:void 0,IT=qR?qR.valueOf:void 0;function c3(t,e,r,n,i,o,s){switch(r){case s3:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case a3:return!(t.byteLength!=e.byteLength||!o(new FT(t),new FT(e)));case Yq:case Xq:case t3:return rs(+t,+e);case Jq:return t.name==e.name&&t.message==e.message;case r3:case i3:return t==e+"";case e3:var l=jR;case n3:var p=n&Qq;if(l||(l=gs),t.size!=e.size&&!p)return!1;var u=s.get(t);if(u)return u==e;n|=Zq,s.set(t,e);var m=mf(l(t),l(e),n,i,o,s);return s.delete(t),m;case o3:if(IT)return IT.call(t)==IT.call(e)}return!1}var zR=c3;var l3=1,p3=Object.prototype,u3=p3.hasOwnProperty;function f3(t,e,r,n,i,o){var s=r&l3,l=MT(t),p=l.length,u=MT(e),m=u.length;if(p!=m&&!s)return!1;for(var d=p;d--;){var g=l[d];if(!(s?g in e:u3.call(e,g)))return!1}var x=o.get(t),b=o.get(e);if(x&&b)return x==e&&b==t;var v=!0;o.set(t,e),o.set(e,t);for(var I=s;++d<p;){g=l[d];var F=t[g],V=e[g];if(n)var Z=s?n(V,F,g,e,t,o):n(F,V,g,t,e,o);if(!(Z===void 0?F===V||i(F,V,r,n,o):Z)){v=!1;break}I||(I=g=="constructor")}if(v&&!I){var oe=t.constructor,ae=e.constructor;oe!=ae&&"constructor"in t&&"constructor"in e&&!(typeof oe=="function"&&oe instanceof oe&&typeof ae=="function"&&ae instanceof ae)&&(v=!1)}return o.delete(t),o.delete(e),v}var GR=f3;var m3=1,KR="[object Arguments]",QR="[object Array]",df="[object Object]",d3=Object.prototype,ZR=d3.hasOwnProperty;function h3(t,e,r,n,i,o){var s=ze(t),l=ze(e),p=s?QR:DT(t),u=l?QR:DT(e);p=p==KR?df:p,u=u==KR?df:u;var m=p==df,d=u==df,g=p==u;if(g&&Xc(t)){if(!Xc(e))return!1;s=!0,m=!1}if(g&&!m)return o||(o=new hs),s||of(t)?mf(t,e,r,n,i,o):zR(t,e,p,r,n,i,o);if(!(r&m3)){var x=m&&ZR.call(t,"__wrapped__"),b=d&&ZR.call(e,"__wrapped__");if(x||b){var v=x?t.value():t,I=b?e.value():e;return o||(o=new hs),i(v,I,r,n,o)}}return g?(o||(o=new hs),GR(t,e,r,n,i,o)):!1}var YR=h3;function XR(t,e,r,n,i){return t===e?!0:t==null||e==null||!sr(t)&&!sr(e)?t!==t&&e!==e:YR(t,e,r,n,XR,i)}var ys=XR;var g3=1,y3=2;function x3(t,e,r,n){var i=r.length,o=i,s=!n;if(t==null)return!o;for(t=Object(t);i--;){var l=r[i];if(s&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++i<o;){l=r[i];var p=l[0],u=t[p],m=l[1];if(s&&l[2]){if(u===void 0&&!(p in t))return!1}else{var d=new hs;if(n)var g=n(u,m,p,t,e,d);if(!(g===void 0?ys(m,u,g3|y3,n,d):g))return!1}}return!0}var JR=x3;function T3(t){return t===t&&!$r(t)}var hf=T3;function S3(t){for(var e=ro(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,hf(i)]}return e}var ek=S3;function v3(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var gf=v3;function b3(t){var e=ek(t);return e.length==1&&e[0][2]?gf(e[0][0],e[0][1]):function(r){return r===t||JR(r,t,e)}}var tk=b3;function w3(t,e){return t!=null&&e in Object(t)}var rk=w3;function _3(t,e,r){e=af(e,t);for(var n=-1,i=e.length,o=!1;++n<i;){var s=so(e[n]);if(!(o=t!=null&&r(t,s)))break;t=t[s]}return o||++n!=i?o:(i=t==null?0:t.length,!!i&&is(i)&&ts(s,i)&&(ze(t)||os(t)))}var nk=_3;function E3(t,e){return t!=null&&nk(t,e,rk)}var ik=E3;var R3=1,k3=2;function P3(t,e){return ss(t)&&hf(e)?gf(so(t),e):function(r){var n=Zo(r,t);return n===void 0&&n===e?ik(r,t):ys(e,n,R3|k3)}}var ok=P3;function A3(t){return function(e){return e?.[t]}}var yf=A3;function M3(t){return function(e){return us(e,t)}}var ak=M3;function D3(t){return ss(t)?yf(so(t)):ak(t)}var sk=D3;function F3(t){return typeof t=="function"?t:t==null?wr:typeof t=="object"?ze(t)?ok(t[0],t[1]):tk(t):sk(t)}var lo=F3;function I3(t){return function(e,r,n){for(var i=-1,o=Object(e),s=n(e),l=s.length;l--;){var p=s[t?l:++i];if(r(o[p],p,o)===!1)break}return e}}var ck=I3;var C3=ck(),lk=C3;function N3(t,e){return t&&lk(t,e,ro)}var pk=N3;function O3(t,e){return function(r,n){if(r==null)return r;if(!Zn(r))return t(r,n);for(var i=r.length,o=e?i:-1,s=Object(r);(e?o--:++o<i)&&n(s[o],o,s)!==!1;);return r}}var uk=O3;var L3=uk(pk),fk=L3;function U3(t){return sr(t)&&Zn(t)}var mk=U3;function H3(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}var dk=H3;function V3(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var xf=V3;var hk=/[\\^$.*+?()[\]{}|]/g,B3=RegExp(hk.source);function W3(t){return t=Nn(t),t&&B3.test(t)?t.replace(hk,"\\$&"):t}var jr=W3;var $3=Math.max,j3=Math.min;function q3(t,e,r){var n=t==null?0:t.length;if(!n)return-1;var i=n-1;return r!==void 0&&(i=ju(r),i=r<0?$3(n+i,0):j3(i,n-1)),ef(t,lo(e,3),i,!0)}var Xo=q3;function z3(t,e){var r=-1,n=Zn(t)?Array(t.length):[];return fk(t,function(i,o,s){n[++r]=e(i,o,s)}),n}var gk=z3;var G3="Expected a function",K3=8,Q3=32,Z3=128,Y3=256;function X3(t){return _R(function(e){var r=e.length,n=r,i=eo.prototype.thru;for(t&&e.reverse();n--;){var o=e[n];if(typeof o!="function")throw new TypeError(G3);if(i&&!s&&es(o)=="wrapper")var s=new eo([],!0)}for(n=s?n:r;++n<r;){o=e[n];var l=es(o),p=l=="wrapper"?Zu(o):void 0;p&&bT(p[0])&&p[1]==(Z3|K3|Q3|Y3)&&!p[4].length&&p[9]==1?s=s[es(p[0])].apply(s,p[3]):s=o.length==1&&bT(o)?s[l]():s.thru(o)}return function(){var u=arguments,m=u[0];if(s&&u.length==1&&ze(m))return s.plant(m).value();for(var d=0,g=r?e[d].apply(this,u):m;++d<r;)g=e[d].call(this,g);return g}})}var yk=X3;var J3=yk(),CT=J3;function ez(t,e){return t>e}var xk=ez;function tz(t,e){return fn(e,function(r){return t[r]})}var Tk=tz;function rz(t){return t==null?[]:Tk(t,ro(t))}var Sk=rz;function nz(t,e){return ys(t,e)}var Ai=nz;function iz(t,e){return t<e}var vk=iz;function oz(t,e,r){for(var n=-1,i=t.length;++n<i;){var o=t[n],s=e(o);if(s!=null&&(l===void 0?s===s&&!Wr(s):r(s,l)))var l=s,p=o}return p}var Tf=oz;function az(t,e){return t&&t.length?Tf(t,lo(e,2),xk):void 0}var NT=az;function sz(t,e){for(var r,n=-1,i=t.length;++n<i;){var o=e(t[n]);o!==void 0&&(r=r===void 0?o:r+o)}return r}var bk=sz;function cz(t){return t&&t.length?Tf(t,wr,vk):void 0}var OT=cz;function lz(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}var wk=lz;function pz(t,e){if(t!==e){var r=t!==void 0,n=t===null,i=t===t,o=Wr(t),s=e!==void 0,l=e===null,p=e===e,u=Wr(e);if(!l&&!u&&!o&&t>e||o&&s&&p&&!l&&!u||n&&s&&p||!r&&p||!i)return 1;if(!n&&!o&&!u&&t<e||u&&r&&i&&!n&&!o||l&&r&&i||!s&&i||!p)return-1}return 0}var _k=pz;function uz(t,e,r){for(var n=-1,i=t.criteria,o=e.criteria,s=i.length,l=r.length;++n<s;){var p=_k(i[n],o[n]);if(p){if(n>=l)return p;var u=r[n];return p*(u=="desc"?-1:1)}}return t.index-e.index}var Ek=uz;function fz(t,e,r){e.length?e=fn(e,function(o){return ze(o)?function(s){return us(s,o.length===1?o[0]:o)}:o}):e=[wr];var n=-1;e=fn(e,as(lo));var i=gk(t,function(o,s,l){var p=fn(e,function(u){return u(o)});return{criteria:p,index:++n,value:o}});return wk(i,function(o,s){return Ek(o,s,r)})}var Rk=fz;var mz=9007199254740991,dz=Math.floor;function hz(t,e){var r="";if(!t||e<1||e>mz)return r;do e%2&&(r+=t),e=dz(e/2),e&&(t+=t);while(e);return r}var kk=hz;function gz(t,e,r,n){for(var i=r-1,o=t.length;++i<o;)if(n(t[i],e))return i;return-1}var Pk=gz;var yz=Array.prototype,Ak=yz.splice;function xz(t,e,r,n){var i=n?Pk:tf,o=-1,s=e.length,l=t;for(t===e&&(e=to(e)),r&&(l=fn(t,as(r)));++o<s;)for(var p=0,u=e[o],m=r?r(u):u;(p=i(l,m,p,n))>-1;)l!==t&&Ak.call(l,p,1),Ak.call(t,p,1);return t}var Mk=xz;function Tz(t,e){return t&&t.length&&e&&e.length?Mk(t,e):t}var Dk=Tz;var Sz=ns(Dk),cr=Sz;var vz=Math.floor,bz=Math.random;function wz(t,e){return t+vz(bz()*(e-t+1))}var Fk=wz;var _z=Math.ceil,Ez=Math.max;function Rz(t,e,r,n){for(var i=-1,o=Ez(_z((e-t)/(r||1)),0),s=Array(o);o--;)s[n?o:++i]=t,t+=r;return s}var Ik=Rz;function kz(t){return function(e,r,n){return n&&typeof n!="number"&&Ko(e,r,n)&&(r=n=void 0),e=Ya(e),r===void 0?(r=e,e=0):r=Ya(r),n=n===void 0?e<r?1:-1:Ya(n),Ik(e,r,n,t)}}var Ck=kz;var Pz=Ck(),LT=Pz;function Az(t,e,r){return(r?Ko(t,e,r):e===void 0)?e=1:e=ju(e),kk(Nn(t),e)}var UT=Az;function Mz(t,e){var r=-1,n=t.length,i=n-1;for(e=e===void 0?n:e;++r<e;){var o=Fk(r,i),s=t[o];t[o]=t[r],t[r]=s}return t.length=e,t}var Sf=Mz;function Dz(t){return Sf(to(t))}var Nk=Dz;function Fz(t){return Sf(Sk(t))}var Ok=Fz;function Iz(t){var e=ze(t)?Nk:Ok;return e(t)}var HT=Iz;var Cz=ns(function(t,e){if(t==null)return[];var r=e.length;return r>1&&Ko(t,e[0],e[1])?e=[]:r>2&&Ko(e[0],e[1],e[2])&&(e=[e[0]]),Rk(t,ms(e,1),[])}),VT=Cz;function Nz(t,e){return t&&t.length?bk(t,lo(e,2)):0}var vf=Nz;var Oz=1/0,Lz=co&&1/gs(new co([,-0]))[1]==Oz?function(t){return new co(t)}:Qu,Lk=Lz;var Uz=200;function Hz(t,e,r){var n=-1,i=WE,o=t.length,s=!0,l=[],p=l;if(r)s=!1,i=dk;else if(o>=Uz){var u=e?null:Lk(t);if(u)return gs(u);s=!1,i=ff,p=new uf}else p=e?[]:l;e:for(;++n<o;){var m=t[n],d=e?e(m):m;if(m=r||m!==0?m:0,s&&d===d){for(var g=p.length;g--;)if(p[g]===d)continue e;e&&p.push(d),l.push(m)}else i(p,d,r)||(p!==l&&p.push(d),l.push(m))}return l}var bf=Hz;function Vz(t){return t&&t.length?bf(t):[]}var Jo=Vz;function Bz(t,e){return e=typeof e=="function"?e:void 0,t&&t.length?bf(t,void 0,e):[]}var rl=Bz;var Wz=Math.max;function $z(t){if(!(t&&t.length))return[];var e=0;return t=sf(t,function(r){if(mk(r))return e=Wz(r.length,e),!0}),nf(e,function(r){return fn(t,yf(r))})}var Uk=$z;var jz=ns(Uk),kt=jz;var wf=class{constructor(){this.commands={clipboardPaste:void 0,clipboardCopy:void 0,toggleLineComment:void 0,indentLine:void 0,outdentLine:void 0,rename:void 0,quickFix:void 0,revealDefinition:void 0,revealTypeDefinition:void 0,showHover:void 0,showDebugHover:void 0,extractVariable:void 0,fold:void 0,highlight:{acceptsLocation:!0},unfold:void 0,showReferences:void 0,insertLineAfter:void 0,gitAccept:void 0,gitRevert:void 0,gitStage:void 0,gitUnstage:void 0}}};var nl=class{constructor(){this.clipboardContents=""}async readText(){return this.clipboardContents}async writeText(e){this.clipboardContents=e}};var Gt=class{constructor(){this.listeners=[];this.notifyListeners=(...e)=>{this.listeners.forEach(r=>r(...e))};this.registerListener=this.registerListener.bind(this)}registerListener(e){return this.listeners.push(e),{dispose:()=>{cr(this.listeners,e)}}}};var _f={tokenHatSplittingMode:{preserveCase:!1,lettersToPreserve:[],symbolsToPreserve:[]},wordSeparators:["_"],decorationDebounceDelayMs:50,experimental:{snippetsDir:void 0,hatStability:"balanced",keyboardTargetFollowsSelection:!1},commandHistory:!1,debug:!1};var il=class{constructor(){this.notifier=new Gt;this.mocks={..._f};this.scopes=[];this.onDidChangeConfiguration=this.notifier.registerListener;this.onDidChangeConfiguration=this.onDidChangeConfiguration.bind(this)}getOwnConfiguration(e,r){if(r!=null){for(let{scope:n,values:i}of this.scopes)if(zz(n,r))return Zo(i,e)??Zo(this.mocks,e)}return Zo(this.mocks,e)}mockConfiguration(e,r){this.mocks[e]=r,this.notifier.notifyListeners()}mockConfigurationScope(e,r,n=!1){this.scopes.push({scope:e,values:r}),n||this.notifier.notifyListeners()}};function zz(t,e){return t.languageId===e.languageId}var Ef={hideInferenceWarning:!1,tutorialProgress:{}};var ol=class{constructor(){this.data={...Ef}}get(e){return this.data[e]}set(e,r){return this.data[e]=r,Promise.resolve()}};var al=class{async showMessage(e,r,n,...i){}};var Rf=class{constructor(){this.configuration=new il;this.messages=new al;this.keyValueStore=new ol;this.clipboard=new nl;this.capabilities=new wf;this.runMode="test";this.cursorlessVersion="0.0.0";this.workspaceFolders=void 0;this.disposables=[];this.quickPickReturnValue=void 0;this.onDidOpenTextDocument=xs;this.onDidCloseTextDocument=xs;this.onDidChangeActiveTextEditor=xs;this.onDidChangeVisibleTextEditors=xs;this.onDidChangeTextEditorSelection=xs;this.onDidChangeTextEditorVisibleRanges=xs}async flashRanges(e){}async setHighlightRanges(e,r,n){}mockAssetsRoot(e){this.assetsRoot_=e}get assetsRoot(){if(this.assetsRoot_==null)throw Error("Field `assetsRoot` has not yet been mocked");return this.assetsRoot_}get activeTextEditor(){throw Error("Not implemented")}get activeEditableTextEditor(){throw Error("Not implemented")}get visibleTextEditors(){throw Error("Not implemented")}get visibleNotebookEditors(){throw Error("Not implemented")}getEditableTextEditor(e){throw Error("Not implemented")}findInDocument(e,r){throw Error("Not implemented")}findInWorkspace(e){throw Error("Not implemented")}openTextDocument(e){throw Error("Not implemented")}openUntitledTextDocument(e){throw Error("Not implemented")}setQuickPickReturnValue(e){this.quickPickReturnValue=e}async showQuickPick(e,r){return this.quickPickReturnValue}showInputBox(e){throw Error("Not implemented")}executeCommand(e,...r){throw new Error("Method not implemented.")}onDidChangeTextDocument(e){throw Error("Not implemented")}disposeOnExit(...e){return this.disposables.push(...e),()=>cr(this.disposables,...e)}exit(){this.disposables.forEach(e=>e.dispose())}};function xs(){return{dispose(){}}}var fe=class t{constructor(e,r){this.line=e,this.character=r}isEqual(e){return this.line===e.line&&this.character===e.character}isBefore(e){return this.line<e.line?!0:this.line>e.line?!1:this.character<e.character}isAfter(e){return this.line>e.line?!0:this.line<e.line?!1:this.character>e.character}isBeforeOrEqual(e){return this.isEqual(e)||this.isBefore(e)}isAfterOrEqual(e){return this.isEqual(e)||this.isAfter(e)}compareTo(e){return this.isBefore(e)?-1:this.isAfter(e)?1:0}with(e,r){return new t(e??this.line,r??this.character)}translate(e,r){return new t(this.line+(e??0),this.character+(r??0))}toEmptyRange(){return new j(this,this)}concise(){return`${this.line}:${this.character}`}conciseOneBased(){return`${this.line+1}:${this.character+1}`}toString(){return this.concise()}};function Hk(t,e,r){return t.positionAt(t.offsetAt(e)+r)}var j=class t{constructor(...e){let[r,n]=e.length===2?e:[new fe(e[0],e[1]),new fe(e[2],e[3])];r.isBefore(n)?(this.start=r,this.end=n):(this.start=n,this.end=r)}get isEmpty(){return this.start.isEqual(this.end)}get isSingleLine(){return this.start.line===this.end.line}isRangeEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}contains(e){let[r,n]=e instanceof fe?[e,e]:[e.start,e.end];return r.isAfterOrEqual(this.start)&&n.isBeforeOrEqual(this.end)}intersection(e){let r=this.start.isAfter(e.start)?this.start:e.start,n=this.end.isBefore(e.end)?this.end:e.end;return r.isBeforeOrEqual(n)?new t(r,n):void 0}union(e){return new t(this.start.isBefore(e.start)?this.start:e.start,this.end.isAfter(e.end)?this.end:e.end)}with(e,r){return new t(e??this.start,r??this.end)}toSelection(e){return e?new Ee(this.end,this.start):new Ee(this.start,this.end)}concise(){return`${this.start.concise()}-${this.end.concise()}`}conciseOneBased(){return`${this.start.conciseOneBased()}-${this.end.conciseOneBased()}`}toString(){return`${this.start.concise()}-${this.end.concise()}`}};function Gz(t){let{source:e,flags:r}=t;return new RegExp(`(${e})$`,r.replace("m",""))}function Kz(t){let{source:e,flags:r}=t;return new RegExp(`^(${e})`,r.replace("m",""))}function Vk(t){let e=new Map;function r(n){let i=e.get(n);return i==null&&(i=t(n),e.set(n,i)),i}return r}var kf=Vk(Gz),Pf=Vk(Kz);function BT(t,e){return e.lastIndex=0,t.matchAll(e)}function mn(t,e,r){return Array.from(BT(t,e),r)}function ea(t,e){return t.lastIndex=0,t.test(e)}function Bk(t,e){return t.lastIndex=0,e.match(t)}function sl(t,e){return mn(t,e,r=>({index:r.index,text:r[0]}))}var Ts=class{constructor(e){this.original=e;this.configuration=e.configuration,this.keyValueStore=e.keyValueStore,this.clipboard=e.clipboard,this.messages=e.messages,this.capabilities=e.capabilities}flashRanges(e){return this.original.flashRanges(e)}setHighlightRanges(e,r,n){return this.original.setHighlightRanges(e,r,n)}onDidOpenTextDocument(e,r,n){return this.original.onDidOpenTextDocument(e,r,n)}onDidCloseTextDocument(e,r,n){return this.original.onDidCloseTextDocument(e,r,n)}onDidChangeActiveTextEditor(e,r,n){return this.original.onDidChangeActiveTextEditor(e,r,n)}onDidChangeVisibleTextEditors(e,r,n){return this.original.onDidChangeVisibleTextEditors(e,r,n)}onDidChangeTextEditorSelection(e,r,n){return this.original.onDidChangeTextEditorSelection(e,r,n)}onDidChangeTextEditorVisibleRanges(e,r,n){return this.original.onDidChangeTextEditorVisibleRanges(e,r,n)}get activeTextEditor(){return this.original.activeTextEditor}get activeEditableTextEditor(){return this.original.activeEditableTextEditor}get visibleTextEditors(){return this.original.visibleTextEditors}get visibleNotebookEditors(){return this.original.visibleNotebookEditors}get cursorlessVersion(){return this.original.cursorlessVersion}get assetsRoot(){return this.original.assetsRoot}get runMode(){return this.original.runMode}get workspaceFolders(){return this.original.workspaceFolders}findInDocument(e,r){return this.original.findInDocument(e,r)}findInWorkspace(e){return this.original.findInWorkspace(e)}openTextDocument(e){return this.original.openTextDocument(e)}openUntitledTextDocument(e){return this.original.openUntitledTextDocument(e)}showQuickPick(e,r){return this.original.showQuickPick(e,r)}showInputBox(e){return this.original.showInputBox(e)}getEditableTextEditor(e){return this.original.getEditableTextEditor(e)}executeCommand(e,...r){return this.original.executeCommand(e,...r)}onDidChangeTextDocument(e){return this.original.onDidChangeTextDocument(e)}disposeOnExit(...e){return this.original.disposeOnExit(...e)}};var Af=class extends Ts{constructor(r,n,i,o){super(r);this.fakeIde=n;this.isSilent=i;this.cursorlessSnippetsDir=o;this.messages=i?n.messages:r.messages,this.configuration=n.configuration,this.keyValueStore=n.keyValueStore,this.initializeConfiguration()}initializeConfiguration(){this.configuration.mockConfigurationScope({languageId:"css"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfigurationScope({languageId:"scss"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfigurationScope({languageId:"shellscript"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfiguration("experimental",{hatStability:this.configuration.getOwnConfiguration("experimental.hatStability"),snippetsDir:this.cursorlessSnippetsDir,keyboardTargetFollowsSelection:!1})}flashRanges(r){return this.isSilent?this.fakeIde.flashRanges(r):super.flashRanges(r)}setHighlightRanges(r,n,i){return this.isSilent?this.fakeIde.setHighlightRanges(r,n,i):super.setHighlightRanges(r,n,i)}async showQuickPick(r,n){return this.isSilent?this.fakeIde.showQuickPick(r,n):super.showQuickPick(r,n)}};function ta(t,e,r,...n){return t.showMessage("warning",e,r,...n)}function lt(t,e,r,...n){return t.showMessage("error",e,r,...n)}var ce=(i=>(i[i.supported=0]="supported",i[i.supportedLegacy=1]="supportedLegacy",i[i.unsupported=2]="unsupported",i[i.notApplicable=3]="notApplicable",i))(ce||{});var{supported:it,unsupported:hpe,notApplicable:Wk}=ce,WT={ifStatement:it,disqualifyDelimiter:it,"comment.line":it,"comment.block":it,"string.singleLine":it,"textFragment.comment.line":it,"textFragment.comment.block":it,"textFragment.string.singleLine":it,class:it,className:it,namedFunction:it,"name.function":it,"name.class":it,"name.field":it,functionName:it,"name.argument.formal":it,"name.argument.formal.iteration":it,"name.variable":it,"value.variable":it,"name.assignment":it,"value.assignment":it,"statement.class":it,"type.class":it,"type.field":it,"value.argument.formal":Wk,"value.argument.formal.iteration":Wk};var{supported:xpe,unsupported:Tpe,notApplicable:Spe}=ce;var{supported:$k,unsupported:_pe,notApplicable:Epe}=ce,Qz={...WT,"value.argument.formal":$k,"value.argument.formal.iteration":$k};var{supported:Ppe,unsupported:Ape,notApplicable:Mpe}=ce;var{supported:vt,notApplicable:H}=ce,$T={"comment.block":vt,"string.singleLine":vt,disqualifyDelimiter:vt,map:vt,functionCall:vt,functionCallee:vt,"argument.actual":vt,"argument.actual.iteration":vt,"name.iteration.document":vt,"name.iteration.block":vt,"textFragment.comment.block":vt,"textFragment.string.singleLine":vt,"key.mapPair":vt,"key.mapPair.iteration":vt,"value.mapPair":vt,"value.mapPair.iteration":vt,"collectionItem.unenclosed":vt,"collectionItem.unenclosed.iteration":vt,statement:vt,"statement.iteration.document":vt,anonymousFunction:H,"argument.actual.constructor.iteration":H,"argument.actual.constructor":H,"argument.actual.method.iteration":H,"argument.actual.method":H,"argument.formal.constructor.iteration":H,"argument.formal.constructor":H,"argument.formal.iteration":H,"argument.formal.method.iteration":H,"argument.formal.method":H,"argument.formal":H,attribute:H,"branch.if.iteration":H,"branch.if":H,"branch.loop":H,"branch.switchCase.iteration":H,"branch.switchCase":H,"branch.ternary":H,"branch.try.iteration":H,"branch.try":H,"class.iteration.block":H,"class.iteration.document":H,class:H,"className.iteration.block":H,"className.iteration.document":H,className:H,command:H,"comment.line":H,"condition.doWhile":H,"condition.for":H,"condition.if":H,"condition.switchCase.iteration":H,"condition.switchCase":H,"condition.ternary":H,"condition.while":H,element:H,endTag:H,environment:H,fieldAccess:H,"functionCall.constructor":H,"functionCallee.constructor":H,"functionName.constructor":H,"functionName.iteration.block":H,"functionName.iteration.document":H,"functionName.method.iteration.class":H,"functionName.method":H,functionName:H,ifStatement:H,"interior.cell":H,"interior.class":H,"interior.command":H,"interior.element":H,"interior.function":H,"interior.if":H,"interior.lambda":H,"interior.loop":H,"interior.resource":H,"interior.switchCase":H,"interior.ternary":H,"interior.try":H,"key.attribute":H,list:H,"name.argument.actual.iteration":H,"name.argument.actual":H,"name.argument.formal.constructor.iteration":H,"name.argument.formal.constructor":H,"name.argument.formal.iteration":H,"name.argument.formal.method.iteration":H,"name.argument.formal.method":H,"name.argument.formal":H,"name.assignment.pattern":H,"name.assignment":H,"name.class":H,"name.constructor":H,"name.field":H,"name.foreach":H,"name.function":H,"name.method":H,"name.resource.iteration":H,"name.resource":H,"name.variable.pattern":H,"name.variable":H,"namedFunction.constructor":H,"namedFunction.iteration.block":H,"namedFunction.iteration.document":H,"namedFunction.method.iteration.class":H,"namedFunction.method":H,namedFunction:H,notebookCell:H,pairDelimiter:H,regularExpression:H,"section.iteration.document":H,"section.iteration.parent":H,section:H,startTag:H,"statement.iteration.block":H,"statement.class":H,"string.multiLine":H,switchStatementSubject:H,tags:H,"textFragment.comment.line":H,"textFragment.element":H,"textFragment.string.multiLine":H,"type.alias":H,"type.argument.formal.constructor.iteration":H,"type.argument.formal.constructor":H,"type.argument.formal.iteration":H,"type.argument.formal.method.iteration":H,"type.argument.formal.method":H,"type.argument.formal":H,"type.cast":H,"type.class":H,"type.enum":H,"type.field.iteration":H,"type.field":H,"type.foreach":H,"type.interface":H,"type.return":H,"type.typeArgument.iteration":H,"type.typeArgument":H,"type.variable":H,"value.argument.actual.iteration":H,"value.argument.actual":H,"value.argument.formal.constructor.iteration":H,"value.argument.formal.constructor":H,"value.argument.formal.iteration":H,"value.argument.formal.method.iteration":H,"value.argument.formal.method":H,"value.argument.formal":H,"value.assignment":H,"value.attribute":H,"value.field":H,"value.foreach":H,"value.resource.iteration":H,"value.resource":H,"value.return.lambda":H,"value.return":H,"value.typeAlias":H,"value.variable.pattern":H,"value.variable":H,"value.yield":H};var{supported:Npe,unsupported:Ope,notApplicable:Lpe}=ce;var{supported:Vpe,unsupported:Bpe,notApplicable:Wpe}=ce;var{supported:qpe,notApplicable:zpe}=ce;var{supported:Qpe,unsupported:Zpe,notApplicable:Ype}=ce;var{supported:z,unsupported:ht,notApplicable:Ve}=ce,jT={list:z,map:z,regularExpression:z,switchStatementSubject:z,fieldAccess:z,disqualifyDelimiter:z,pairDelimiter:z,"collectionItem.unenclosed":z,"textFragment.string.singleLine":z,"textFragment.string.multiLine":z,"textFragment.comment.line":z,"textFragment.comment.block":z,ifStatement:z,statement:z,"statement.iteration.document":z,"statement.iteration.block":z,"statement.class":z,class:z,className:z,anonymousFunction:z,namedFunction:z,"namedFunction.iteration.document":z,"namedFunction.method":z,"namedFunction.method.iteration.class":z,"namedFunction.constructor":z,functionName:z,"functionName.iteration.document":z,"functionName.method":z,"functionName.method.iteration.class":z,"functionName.constructor":z,functionCall:z,"functionCall.constructor":z,functionCallee:z,"functionCallee.constructor":z,"argument.actual":z,"argument.actual.iteration":z,"argument.actual.method":z,"argument.actual.method.iteration":z,"argument.actual.constructor":z,"argument.actual.constructor.iteration":z,"argument.formal":z,"argument.formal.iteration":z,"argument.formal.method":z,"argument.formal.method.iteration":z,"argument.formal.constructor":z,"argument.formal.constructor.iteration":z,"comment.line":z,"comment.block":z,"string.singleLine":z,"string.multiLine":z,"branch.if":z,"branch.if.iteration":z,"branch.try":z,"branch.try.iteration":z,"branch.switchCase":z,"branch.switchCase.iteration":z,"branch.ternary":z,"condition.if":z,"condition.while":z,"condition.doWhile":z,"condition.for":z,"condition.ternary":z,"condition.switchCase":z,"condition.switchCase.iteration":z,"name.argument.formal":z,"name.argument.formal.iteration":z,"name.argument.formal.method":z,"name.argument.formal.method.iteration":z,"name.argument.formal.constructor":z,"name.argument.formal.constructor.iteration":z,"name.foreach":z,"name.assignment":z,"name.assignment.pattern":z,"name.variable":z,"name.variable.pattern":z,"name.function":z,"name.method":z,"name.constructor":z,"name.class":z,"name.field":z,"name.iteration.document":z,"key.mapPair":z,"key.mapPair.iteration":z,"value.argument.formal":z,"value.argument.formal.iteration":z,"value.argument.formal.method":z,"value.argument.formal.method.iteration":z,"value.argument.formal.constructor":z,"value.argument.formal.constructor.iteration":z,"value.mapPair":z,"value.mapPair.iteration":z,"value.assignment":z,"value.variable":z,"value.variable.pattern":z,"value.foreach":z,"value.return":z,"value.return.lambda":z,"value.field":z,"value.yield":z,"collectionItem.unenclosed.iteration":ht,"branch.loop":ht,"namedFunction.iteration.block":ht,"functionName.iteration.block":ht,"class.iteration.block":ht,"class.iteration.document":ht,"className.iteration.block":ht,"className.iteration.document":ht,"name.iteration.block":ht,"name.resource":ht,"name.resource.iteration":ht,"value.resource":ht,"value.resource.iteration":ht,"interior.class":ht,"interior.function":ht,"interior.if":ht,"interior.lambda":ht,"interior.loop":ht,"interior.switchCase":ht,"interior.ternary":ht,"interior.try":ht,"interior.resource":ht,"interior.cell":Ve,"interior.command":Ve,"name.argument.actual.iteration":Ve,"name.argument.actual":Ve,"value.argument.actual":Ve,"value.argument.actual.iteration":Ve,"section.iteration.document":Ve,"section.iteration.parent":Ve,"textFragment.element":Ve,command:Ve,environment:Ve,notebookCell:Ve,section:Ve},qT={element:z,tags:z,startTag:z,endTag:z,attribute:z,"key.attribute":z,"value.attribute":z,"interior.element":z},zT={...jT,...qT,"value.typeAlias":Ve,"type.alias":Ve,"type.argument.formal.constructor.iteration":Ve,"type.argument.formal.constructor":Ve,"type.argument.formal.iteration":Ve,"type.argument.formal.method.iteration":Ve,"type.argument.formal.method":Ve,"type.argument.formal":Ve,"type.cast":Ve,"type.class":Ve,"type.enum":Ve,"type.field.iteration":Ve,"type.field":Ve,"type.foreach":Ve,"type.interface":Ve,"type.return":Ve,"type.typeArgument.iteration":Ve,"type.typeArgument":Ve,"type.variable":Ve};var{supported:Zz,unsupported:nue,notApplicable:iue}=ce,Yz={...zT,"textFragment.element":Zz};var{supported:dn,notApplicable:N}=ce,cl={list:dn,map:dn,"string.singleLine":dn,"key.mapPair.iteration":dn,"key.mapPair":dn,"value.mapPair.iteration":dn,"value.mapPair":dn,"comment.block":dn,"comment.line":dn,"textFragment.comment.block":dn,"textFragment.comment.line":dn,"textFragment.string.singleLine":dn,anonymousFunction:N,"argument.actual":N,"argument.actual.constructor":N,"argument.actual.constructor.iteration":N,"argument.actual.iteration":N,"argument.actual.method":N,"argument.actual.method.iteration":N,"argument.formal":N,"argument.formal.constructor":N,"argument.formal.constructor.iteration":N,"argument.formal.iteration":N,"argument.formal.method":N,"argument.formal.method.iteration":N,attribute:N,"branch.if":N,"branch.if.iteration":N,"branch.loop":N,"branch.switchCase":N,"branch.switchCase.iteration":N,"branch.ternary":N,"branch.try":N,"branch.try.iteration":N,class:N,"class.iteration.block":N,"class.iteration.document":N,className:N,"className.iteration.block":N,"className.iteration.document":N,"collectionItem.unenclosed":N,"collectionItem.unenclosed.iteration":N,command:N,"condition.doWhile":N,"condition.for":N,"condition.if":N,"condition.switchCase":N,"condition.switchCase.iteration":N,"condition.ternary":N,"condition.while":N,disqualifyDelimiter:N,element:N,endTag:N,environment:N,fieldAccess:N,functionCall:N,"functionCall.constructor":N,functionCallee:N,"functionCallee.constructor":N,functionName:N,"functionName.constructor":N,"functionName.iteration.block":N,"functionName.iteration.document":N,"functionName.method":N,"functionName.method.iteration.class":N,ifStatement:N,"interior.cell":N,"interior.class":N,"interior.command":N,"interior.element":N,"interior.function":N,"interior.if":N,"interior.lambda":N,"interior.loop":N,"interior.resource":N,"interior.switchCase":N,"interior.ternary":N,"interior.try":N,"key.attribute":N,"name.argument.actual":N,"name.argument.actual.iteration":N,"name.argument.formal":N,"name.argument.formal.constructor":N,"name.argument.formal.constructor.iteration":N,"name.argument.formal.iteration":N,"name.argument.formal.method":N,"name.argument.formal.method.iteration":N,"name.assignment":N,"name.assignment.pattern":N,"name.class":N,"name.constructor":N,"name.field":N,"name.foreach":N,"name.function":N,"name.iteration.block":N,"name.iteration.document":N,"name.method":N,"name.resource":N,"name.resource.iteration":N,"name.variable":N,"name.variable.pattern":N,namedFunction:N,"namedFunction.constructor":N,"namedFunction.iteration.block":N,"namedFunction.iteration.document":N,"namedFunction.method":N,"namedFunction.method.iteration.class":N,notebookCell:N,pairDelimiter:N,regularExpression:N,section:N,"section.iteration.document":N,"section.iteration.parent":N,startTag:N,statement:N,"statement.class":N,"statement.iteration.block":N,"statement.iteration.document":N,"string.multiLine":N,switchStatementSubject:N,tags:N,"textFragment.element":N,"textFragment.string.multiLine":N,"type.alias":N,"type.argument.formal":N,"type.argument.formal.constructor":N,"type.argument.formal.constructor.iteration":N,"type.argument.formal.iteration":N,"type.argument.formal.method":N,"type.argument.formal.method.iteration":N,"type.cast":N,"type.class":N,"type.enum":N,"type.field":N,"type.field.iteration":N,"type.foreach":N,"type.interface":N,"type.return":N,"type.typeArgument":N,"type.typeArgument.iteration":N,"type.variable":N,"value.argument.actual":N,"value.argument.actual.iteration":N,"value.argument.formal":N,"value.argument.formal.constructor":N,"value.argument.formal.constructor.iteration":N,"value.argument.formal.iteration":N,"value.argument.formal.method":N,"value.argument.formal.method.iteration":N,"value.assignment":N,"value.attribute":N,"value.field":N,"value.foreach":N,"value.resource":N,"value.resource.iteration":N,"value.return":N,"value.return.lambda":N,"value.typeAlias":N,"value.variable":N,"value.variable.pattern":N,"value.yield":N};var{supported:pue,unsupported:uue,notApplicable:fue}=ce,Xz={...cl};var{supported:gue,unsupported:yue,notApplicable:xue}=ce,Jz={...cl};var{supported:vue,unsupported:bue,notApplicable:wue}=ce;var{supported:Rue,notApplicable:kue}=ce;var{supported:Mue,unsupported:Due,notApplicable:Fue}=ce;var{supported:Nue,unsupported:Oue,notApplicable:Lue}=ce;var{supported:Vue,unsupported:Bue,notApplicable:Wue}=ce;var{supported:que,unsupported:zue,notApplicable:Gue}=ce;var{supported:Zue,unsupported:Yue,notApplicable:Xue}=ce;var{supported:tfe,unsupported:rfe,notApplicable:nfe}=ce;var{supported:afe,notApplicable:sfe}=ce;var{supported:Kt,unsupported:Mf}=ce,eG={...$T,"comment.line":Kt,"condition.if":Kt,namedFunction:Kt,"namedFunction.iteration.block":Kt,"namedFunction.iteration.document":Kt,functionName:Kt,"functionName.iteration.block":Kt,"functionName.iteration.document":Kt,"name.argument.formal":Kt,"name.argument.formal.iteration":Kt,"name.function":Kt,"value.argument.formal":Kt,"value.argument.formal.iteration":Kt,"value.return":Kt,ifStatement:Kt,"textFragment.comment.line":Kt,"branch.if":Mf,"branch.if.iteration":Mf,"interior.function":Mf,"interior.if":Mf};var{supported:mfe,unsupported:dfe,notApplicable:hfe}=ce;var{supported:Er}=ce,GT={...jT,"type.argument.formal":Er,"type.argument.formal.iteration":Er,"type.argument.formal.method":Er,"type.argument.formal.method.iteration":Er,"type.argument.formal.constructor":Er,"type.argument.formal.constructor.iteration":Er,"type.alias":Er,"type.cast":Er,"type.field":Er,"type.interface":Er,"type.enum":Er,"type.return":Er,"type.variable":Er,"value.typeAlias":Er};var{supported:wfe,unsupported:_fe,notApplicable:Efe}=ce,tG={...GT,...qT};var{supported:Pfe,notApplicable:Afe}=ce;var{supported:Ffe,unsupported:Ife,notApplicable:Cfe}=ce;var Ss=["that","source","instanceReference","keyboard"];var Ee=class extends j{get isReversed(){return this.active.isBefore(this.anchor)}constructor(...e){let[r,n]=e.length===2?e:[new fe(e[0],e[1]),new fe(e[2],e[3])];super(r,n),this.anchor=r,this.active=n}isEqual(e){return this.anchor.isEqual(e.anchor)&&this.active.isEqual(e.active)}concise(){return`${this.anchor.concise()}->${this.active.concise()}`}conciseOneBased(){return`${this.start.conciseOneBased()}->${this.end.conciseOneBased()}`}toString(){return this.concise()}};function qk({line:t,character:e}){return new fe(t,e)}function Df({start:t,end:e}){return new j(qk(t),qk(e))}function qr({start:t,end:e}){return{type:"line",start:t.line,end:e.line}}function lr({start:t,end:e}){return{type:"character",start:t,end:e}}function ll(t){return{start:Ff(t.start),end:Ff(t.end)}}function zk(t){return{anchor:Ff(t.anchor),active:Ff(t.active)}}function Ff({line:t,character:e}){return{line:t,character:e}}function pP(t){return typeof t>"u"||t===null}function rG(t){return typeof t=="object"&&t!==null}function nG(t){return Array.isArray(t)?t:pP(t)?[]:[t]}function iG(t,e){var r,n,i,o;if(e)for(o=Object.keys(e),r=0,n=o.length;r<n;r+=1)i=o[r],t[i]=e[i];return t}function oG(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}function aG(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var sG=pP,cG=rG,lG=nG,pG=oG,uG=aG,fG=iG,Pt={isNothing:sG,isObject:cG,toArray:lG,repeat:pG,isNegativeZero:uG,extend:fG};function uP(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}function ul(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=uP(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}ul.prototype=Object.create(Error.prototype);ul.prototype.constructor=ul;ul.prototype.toString=function(e){return this.name+": "+uP(this,e)};var Rr=ul;function KT(t,e,r,n,i){var o="",s="",l=Math.floor(i/2)-1;return n-e>l&&(o=" ... ",e=n-l+o.length),r-n>l&&(s=" ...",r=n+l-s.length),{str:o+t.slice(e,r).replace(/\t/g,"\u2192")+s,pos:n-e+o.length}}function QT(t,e){return Pt.repeat(" ",e-t.length)+t}function mG(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],o,s=-1;o=r.exec(t.buffer);)i.push(o.index),n.push(o.index+o[0].length),t.position<=o.index&&s<0&&(s=n.length-2);s<0&&(s=n.length-1);var l="",p,u,m=Math.min(t.line+e.linesAfter,i.length).toString().length,d=e.maxLength-(e.indent+m+3);for(p=1;p<=e.linesBefore&&!(s-p<0);p++)u=KT(t.buffer,n[s-p],i[s-p],t.position-(n[s]-n[s-p]),d),l=Pt.repeat(" ",e.indent)+QT((t.line-p+1).toString(),m)+" | "+u.str+`
`+l;for(u=KT(t.buffer,n[s],i[s],t.position,d),l+=Pt.repeat(" ",e.indent)+QT((t.line+1).toString(),m)+" | "+u.str+`
`,l+=Pt.repeat("-",e.indent+m+3+u.pos)+`^
`,p=1;p<=e.linesAfter&&!(s+p>=i.length);p++)u=KT(t.buffer,n[s+p],i[s+p],t.position-(n[s]-n[s+p]),d),l+=Pt.repeat(" ",e.indent)+QT((t.line+p+1).toString(),m)+" | "+u.str+`
`;return l.replace(/\n$/,"")}var dG=mG,hG=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],gG=["scalar","sequence","mapping"];function yG(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}function xG(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(hG.indexOf(r)===-1)throw new Rr('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=yG(e.styleAliases||null),gG.indexOf(this.kind)===-1)throw new Rr('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var Ht=xG;function Qk(t,e){var r=[];return t[e].forEach(function(n){var i=r.length;r.forEach(function(o,s){o.tag===n.tag&&o.kind===n.kind&&o.multi===n.multi&&(i=s)}),r[i]=n}),r}function TG(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}function YT(t){return this.extend(t)}YT.prototype.extend=function(e){var r=[],n=[];if(e instanceof Ht)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new Rr("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(o){if(!(o instanceof Ht))throw new Rr("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new Rr("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new Rr("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(o){if(!(o instanceof Ht))throw new Rr("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(YT.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=Qk(i,"implicit"),i.compiledExplicit=Qk(i,"explicit"),i.compiledTypeMap=TG(i.compiledImplicit,i.compiledExplicit),i};var SG=YT,vG=new Ht("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),bG=new Ht("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),wG=new Ht("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),_G=new SG({explicit:[vG,bG,wG]});function EG(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function RG(){return null}function kG(t){return t===null}var PG=new Ht("tag:yaml.org,2002:null",{kind:"scalar",resolve:EG,construct:RG,predicate:kG,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function AG(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function MG(t){return t==="true"||t==="True"||t==="TRUE"}function DG(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var FG=new Ht("tag:yaml.org,2002:bool",{kind:"scalar",resolve:AG,construct:MG,predicate:DG,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function IG(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function CG(t){return 48<=t&&t<=55}function NG(t){return 48<=t&&t<=57}function OG(t){if(t===null)return!1;var e=t.length,r=0,n=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!IG(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!CG(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!NG(t.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function LG(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}function UG(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!Pt.isNegativeZero(t)}var HG=new Ht("tag:yaml.org,2002:int",{kind:"scalar",resolve:OG,construct:LG,predicate:UG,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),VG=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function BG(t){return!(t===null||!VG.test(t)||t[t.length-1]==="_")}function WG(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}var $G=/^[-+]?[0-9]+e/;function jG(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Pt.isNegativeZero(t))return"-0.0";return r=t.toString(10),$G.test(r)?r.replace("e",".e"):r}function qG(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||Pt.isNegativeZero(t))}var zG=new Ht("tag:yaml.org,2002:float",{kind:"scalar",resolve:BG,construct:WG,predicate:qG,represent:jG,defaultStyle:"lowercase"}),GG=_G.extend({implicit:[PG,FG,HG,zG]}),KG=GG,fP=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),mP=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function QG(t){return t===null?!1:fP.exec(t)!==null||mP.exec(t)!==null}function ZG(t){var e,r,n,i,o,s,l,p=0,u=null,m,d,g;if(e=fP.exec(t),e===null&&(e=mP.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(o=+e[4],s=+e[5],l=+e[6],e[7]){for(p=e[7].slice(0,3);p.length<3;)p+="0";p=+p}return e[9]&&(m=+e[10],d=+(e[11]||0),u=(m*60+d)*6e4,e[9]==="-"&&(u=-u)),g=new Date(Date.UTC(r,n,i,o,s,l,p)),u&&g.setTime(g.getTime()-u),g}function YG(t){return t.toISOString()}var XG=new Ht("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:QG,construct:ZG,instanceOf:Date,represent:YG});function JG(t){return t==="<<"||t===null}var eK=new Ht("tag:yaml.org,2002:merge",{kind:"scalar",resolve:JG}),rS=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function tK(t){if(t===null)return!1;var e,r,n=0,i=t.length,o=rS;for(r=0;r<i;r++)if(e=o.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}function rK(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,o=rS,s=0,l=[];for(e=0;e<i;e++)e%4===0&&e&&(l.push(s>>16&255),l.push(s>>8&255),l.push(s&255)),s=s<<6|o.indexOf(n.charAt(e));return r=i%4*6,r===0?(l.push(s>>16&255),l.push(s>>8&255),l.push(s&255)):r===18?(l.push(s>>10&255),l.push(s>>2&255)):r===12&&l.push(s>>4&255),new Uint8Array(l)}function nK(t){var e="",r=0,n,i,o=t.length,s=rS;for(n=0;n<o;n++)n%3===0&&n&&(e+=s[r>>18&63],e+=s[r>>12&63],e+=s[r>>6&63],e+=s[r&63]),r=(r<<8)+t[n];return i=o%3,i===0?(e+=s[r>>18&63],e+=s[r>>12&63],e+=s[r>>6&63],e+=s[r&63]):i===2?(e+=s[r>>10&63],e+=s[r>>4&63],e+=s[r<<2&63],e+=s[64]):i===1&&(e+=s[r>>2&63],e+=s[r<<4&63],e+=s[64],e+=s[64]),e}function iK(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var oK=new Ht("tag:yaml.org,2002:binary",{kind:"scalar",resolve:tK,construct:rK,predicate:iK,represent:nK}),aK=Object.prototype.hasOwnProperty,sK=Object.prototype.toString;function cK(t){if(t===null)return!0;var e=[],r,n,i,o,s,l=t;for(r=0,n=l.length;r<n;r+=1){if(i=l[r],s=!1,sK.call(i)!=="[object Object]")return!1;for(o in i)if(aK.call(i,o))if(!s)s=!0;else return!1;if(!s)return!1;if(e.indexOf(o)===-1)e.push(o);else return!1}return!0}function lK(t){return t!==null?t:[]}var pK=new Ht("tag:yaml.org,2002:omap",{kind:"sequence",resolve:cK,construct:lK}),uK=Object.prototype.toString;function fK(t){if(t===null)return!0;var e,r,n,i,o,s=t;for(o=new Array(s.length),e=0,r=s.length;e<r;e+=1){if(n=s[e],uK.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;o[e]=[i[0],n[i[0]]]}return!0}function mK(t){if(t===null)return[];var e,r,n,i,o,s=t;for(o=new Array(s.length),e=0,r=s.length;e<r;e+=1)n=s[e],i=Object.keys(n),o[e]=[i[0],n[i[0]]];return o}var dK=new Ht("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:fK,construct:mK}),hK=Object.prototype.hasOwnProperty;function gK(t){if(t===null)return!0;var e,r=t;for(e in r)if(hK.call(r,e)&&r[e]!==null)return!1;return!0}function yK(t){return t!==null?t:{}}var xK=new Ht("tag:yaml.org,2002:set",{kind:"mapping",resolve:gK,construct:yK}),nS=KG.extend({implicit:[XG,eK],explicit:[oK,pK,dK,xK]}),uo=Object.prototype.hasOwnProperty,If=1,dP=2,hP=3,Cf=4,ZT=1,TK=2,Zk=3,SK=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,vK=/[\x85\u2028\u2029]/,bK=/[,\[\]\{\}]/,gP=/^(?:!|!!|![a-z\-]+!)$/i,yP=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Yk(t){return Object.prototype.toString.call(t)}function Yn(t){return t===10||t===13}function na(t){return t===9||t===32}function kr(t){return t===9||t===32||t===10||t===13}function bs(t){return t===44||t===91||t===93||t===123||t===125}function wK(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function _K(t){return t===120?2:t===117?4:t===85?8:0}function EK(t){return 48<=t&&t<=57?t-48:-1}function Xk(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}function RK(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var xP=new Array(256),TP=new Array(256);for(ra=0;ra<256;ra++)xP[ra]=Xk(ra)?1:0,TP[ra]=Xk(ra);var ra;function kK(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||nS,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function SP(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=dG(r),new Rr(e,r)}function ue(t,e){throw SP(t,e)}function Nf(t,e){t.onWarning&&t.onWarning.call(null,SP(t,e))}var Jk={YAML:function(e,r,n){var i,o,s;e.version!==null&&ue(e,"duplication of %YAML directive"),n.length!==1&&ue(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&ue(e,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),s=parseInt(i[2],10),o!==1&&ue(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=s<2,s!==1&&s!==2&&Nf(e,"unsupported YAML version of the document")},TAG:function(e,r,n){var i,o;n.length!==2&&ue(e,"TAG directive accepts exactly two arguments"),i=n[0],o=n[1],gP.test(i)||ue(e,"ill-formed tag handle (first argument) of the TAG directive"),uo.call(e.tagMap,i)&&ue(e,'there is a previously declared suffix for "'+i+'" tag handle'),yP.test(o)||ue(e,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{ue(e,"tag prefix is malformed: "+o)}e.tagMap[i]=o}};function po(t,e,r,n){var i,o,s,l;if(e<r){if(l=t.input.slice(e,r),n)for(i=0,o=l.length;i<o;i+=1)s=l.charCodeAt(i),s===9||32<=s&&s<=1114111||ue(t,"expected valid JSON character");else SK.test(l)&&ue(t,"the stream contains non-printable characters");t.result+=l}}function eP(t,e,r,n){var i,o,s,l;for(Pt.isObject(r)||ue(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),s=0,l=i.length;s<l;s+=1)o=i[s],uo.call(e,o)||(e[o]=r[o],n[o]=!0)}function ws(t,e,r,n,i,o,s,l,p){var u,m;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),u=0,m=i.length;u<m;u+=1)Array.isArray(i[u])&&ue(t,"nested arrays are not supported inside keys"),typeof i=="object"&&Yk(i[u])==="[object Object]"&&(i[u]="[object Object]");if(typeof i=="object"&&Yk(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(u=0,m=o.length;u<m;u+=1)eP(t,e,o[u],r);else eP(t,e,o,r);else!t.json&&!uo.call(r,i)&&uo.call(e,i)&&(t.line=s||t.line,t.lineStart=l||t.lineStart,t.position=p||t.position,ue(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):e[i]=o,delete r[i];return e}function iS(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):ue(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function bt(t,e,r){for(var n=0,i=t.input.charCodeAt(t.position);i!==0;){for(;na(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(Yn(i))for(iS(t),i=t.input.charCodeAt(t.position),n++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return r!==-1&&n!==0&&t.lineIndent<r&&Nf(t,"deficient indentation"),n}function Uf(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||kr(r)))}function oS(t,e){e===1?t.result+=" ":e>1&&(t.result+=Pt.repeat(`
`,e-1))}function PK(t,e,r){var n,i,o,s,l,p,u,m,d=t.kind,g=t.result,x;if(x=t.input.charCodeAt(t.position),kr(x)||bs(x)||x===35||x===38||x===42||x===33||x===124||x===62||x===39||x===34||x===37||x===64||x===96||(x===63||x===45)&&(i=t.input.charCodeAt(t.position+1),kr(i)||r&&bs(i)))return!1;for(t.kind="scalar",t.result="",o=s=t.position,l=!1;x!==0;){if(x===58){if(i=t.input.charCodeAt(t.position+1),kr(i)||r&&bs(i))break}else if(x===35){if(n=t.input.charCodeAt(t.position-1),kr(n))break}else{if(t.position===t.lineStart&&Uf(t)||r&&bs(x))break;if(Yn(x))if(p=t.line,u=t.lineStart,m=t.lineIndent,bt(t,!1,-1),t.lineIndent>=e){l=!0,x=t.input.charCodeAt(t.position);continue}else{t.position=s,t.line=p,t.lineStart=u,t.lineIndent=m;break}}l&&(po(t,o,s,!1),oS(t,t.line-p),o=s=t.position,l=!1),na(x)||(s=t.position+1),x=t.input.charCodeAt(++t.position)}return po(t,o,s,!1),t.result?!0:(t.kind=d,t.result=g,!1)}function AK(t,e){var r,n,i;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(po(t,n,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)n=t.position,t.position++,i=t.position;else return!0;else Yn(r)?(po(t,n,i,!0),oS(t,bt(t,!1,e)),n=i=t.position):t.position===t.lineStart&&Uf(t)?ue(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);ue(t,"unexpected end of the stream within a single quoted scalar")}function MK(t,e){var r,n,i,o,s,l;if(l=t.input.charCodeAt(t.position),l!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(l=t.input.charCodeAt(t.position))!==0;){if(l===34)return po(t,r,t.position,!0),t.position++,!0;if(l===92){if(po(t,r,t.position,!0),l=t.input.charCodeAt(++t.position),Yn(l))bt(t,!1,e);else if(l<256&&xP[l])t.result+=TP[l],t.position++;else if((s=_K(l))>0){for(i=s,o=0;i>0;i--)l=t.input.charCodeAt(++t.position),(s=wK(l))>=0?o=(o<<4)+s:ue(t,"expected hexadecimal character");t.result+=RK(o),t.position++}else ue(t,"unknown escape sequence");r=n=t.position}else Yn(l)?(po(t,r,n,!0),oS(t,bt(t,!1,e)),r=n=t.position):t.position===t.lineStart&&Uf(t)?ue(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}ue(t,"unexpected end of the stream within a double quoted scalar")}function DK(t,e){var r=!0,n,i,o,s=t.tag,l,p=t.anchor,u,m,d,g,x,b=Object.create(null),v,I,F,V;if(V=t.input.charCodeAt(t.position),V===91)m=93,x=!1,l=[];else if(V===123)m=125,x=!0,l={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=l),V=t.input.charCodeAt(++t.position);V!==0;){if(bt(t,!0,e),V=t.input.charCodeAt(t.position),V===m)return t.position++,t.tag=s,t.anchor=p,t.kind=x?"mapping":"sequence",t.result=l,!0;r?V===44&&ue(t,"expected the node content, but found ','"):ue(t,"missed comma between flow collection entries"),I=v=F=null,d=g=!1,V===63&&(u=t.input.charCodeAt(t.position+1),kr(u)&&(d=g=!0,t.position++,bt(t,!0,e))),n=t.line,i=t.lineStart,o=t.position,_s(t,e,If,!1,!0),I=t.tag,v=t.result,bt(t,!0,e),V=t.input.charCodeAt(t.position),(g||t.line===n)&&V===58&&(d=!0,V=t.input.charCodeAt(++t.position),bt(t,!0,e),_s(t,e,If,!1,!0),F=t.result),x?ws(t,l,b,I,v,F,n,i,o):d?l.push(ws(t,null,b,I,v,F,n,i,o)):l.push(v),bt(t,!0,e),V=t.input.charCodeAt(t.position),V===44?(r=!0,V=t.input.charCodeAt(++t.position)):r=!1}ue(t,"unexpected end of the stream within a flow collection")}function FK(t,e){var r,n,i=ZT,o=!1,s=!1,l=e,p=0,u=!1,m,d;if(d=t.input.charCodeAt(t.position),d===124)n=!1;else if(d===62)n=!0;else return!1;for(t.kind="scalar",t.result="";d!==0;)if(d=t.input.charCodeAt(++t.position),d===43||d===45)ZT===i?i=d===43?Zk:TK:ue(t,"repeat of a chomping mode identifier");else if((m=EK(d))>=0)m===0?ue(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?ue(t,"repeat of an indentation width identifier"):(l=e+m-1,s=!0);else break;if(na(d)){do d=t.input.charCodeAt(++t.position);while(na(d));if(d===35)do d=t.input.charCodeAt(++t.position);while(!Yn(d)&&d!==0)}for(;d!==0;){for(iS(t),t.lineIndent=0,d=t.input.charCodeAt(t.position);(!s||t.lineIndent<l)&&d===32;)t.lineIndent++,d=t.input.charCodeAt(++t.position);if(!s&&t.lineIndent>l&&(l=t.lineIndent),Yn(d)){p++;continue}if(t.lineIndent<l){i===Zk?t.result+=Pt.repeat(`
`,o?1+p:p):i===ZT&&o&&(t.result+=`
`);break}for(n?na(d)?(u=!0,t.result+=Pt.repeat(`
`,o?1+p:p)):u?(u=!1,t.result+=Pt.repeat(`
`,p+1)):p===0?o&&(t.result+=" "):t.result+=Pt.repeat(`
`,p):t.result+=Pt.repeat(`
`,o?1+p:p),o=!0,s=!0,p=0,r=t.position;!Yn(d)&&d!==0;)d=t.input.charCodeAt(++t.position);po(t,r,t.position,!1)}return!0}function tP(t,e){var r,n=t.tag,i=t.anchor,o=[],s,l=!1,p;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),p=t.input.charCodeAt(t.position);p!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,ue(t,"tab characters must not be used in indentation")),!(p!==45||(s=t.input.charCodeAt(t.position+1),!kr(s))));){if(l=!0,t.position++,bt(t,!0,-1)&&t.lineIndent<=e){o.push(null),p=t.input.charCodeAt(t.position);continue}if(r=t.line,_s(t,e,hP,!1,!0),o.push(t.result),bt(t,!0,-1),p=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&p!==0)ue(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return l?(t.tag=n,t.anchor=i,t.kind="sequence",t.result=o,!0):!1}function IK(t,e,r){var n,i,o,s,l,p,u=t.tag,m=t.anchor,d={},g=Object.create(null),x=null,b=null,v=null,I=!1,F=!1,V;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=d),V=t.input.charCodeAt(t.position);V!==0;){if(!I&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,ue(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),o=t.line,(V===63||V===58)&&kr(n))V===63?(I&&(ws(t,d,g,x,b,null,s,l,p),x=b=v=null),F=!0,I=!0,i=!0):I?(I=!1,i=!0):ue(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,V=n;else{if(s=t.line,l=t.lineStart,p=t.position,!_s(t,r,dP,!1,!0))break;if(t.line===o){for(V=t.input.charCodeAt(t.position);na(V);)V=t.input.charCodeAt(++t.position);if(V===58)V=t.input.charCodeAt(++t.position),kr(V)||ue(t,"a whitespace character is expected after the key-value separator within a block mapping"),I&&(ws(t,d,g,x,b,null,s,l,p),x=b=v=null),F=!0,I=!1,i=!1,x=t.tag,b=t.result;else if(F)ue(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=u,t.anchor=m,!0}else if(F)ue(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=u,t.anchor=m,!0}if((t.line===o||t.lineIndent>e)&&(I&&(s=t.line,l=t.lineStart,p=t.position),_s(t,e,Cf,!0,i)&&(I?b=t.result:v=t.result),I||(ws(t,d,g,x,b,v,s,l,p),x=b=v=null),bt(t,!0,-1),V=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&V!==0)ue(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return I&&ws(t,d,g,x,b,null,s,l,p),F&&(t.tag=u,t.anchor=m,t.kind="mapping",t.result=d),F}function CK(t){var e,r=!1,n=!1,i,o,s;if(s=t.input.charCodeAt(t.position),s!==33)return!1;if(t.tag!==null&&ue(t,"duplication of a tag property"),s=t.input.charCodeAt(++t.position),s===60?(r=!0,s=t.input.charCodeAt(++t.position)):s===33?(n=!0,i="!!",s=t.input.charCodeAt(++t.position)):i="!",e=t.position,r){do s=t.input.charCodeAt(++t.position);while(s!==0&&s!==62);t.position<t.length?(o=t.input.slice(e,t.position),s=t.input.charCodeAt(++t.position)):ue(t,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!kr(s);)s===33&&(n?ue(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),gP.test(i)||ue(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),s=t.input.charCodeAt(++t.position);o=t.input.slice(e,t.position),bK.test(o)&&ue(t,"tag suffix cannot contain flow indicator characters")}o&&!yP.test(o)&&ue(t,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{ue(t,"tag name is malformed: "+o)}return r?t.tag=o:uo.call(t.tagMap,i)?t.tag=t.tagMap[i]+o:i==="!"?t.tag="!"+o:i==="!!"?t.tag="tag:yaml.org,2002:"+o:ue(t,'undeclared tag handle "'+i+'"'),!0}function NK(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&ue(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!kr(r)&&!bs(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&ue(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function OK(t){var e,r,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!kr(n)&&!bs(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&ue(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),uo.call(t.anchorMap,r)||ue(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],bt(t,!0,-1),!0}function _s(t,e,r,n,i){var o,s,l,p=1,u=!1,m=!1,d,g,x,b,v,I;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=s=l=Cf===r||hP===r,n&&bt(t,!0,-1)&&(u=!0,t.lineIndent>e?p=1:t.lineIndent===e?p=0:t.lineIndent<e&&(p=-1)),p===1)for(;CK(t)||NK(t);)bt(t,!0,-1)?(u=!0,l=o,t.lineIndent>e?p=1:t.lineIndent===e?p=0:t.lineIndent<e&&(p=-1)):l=!1;if(l&&(l=u||i),(p===1||Cf===r)&&(If===r||dP===r?v=e:v=e+1,I=t.position-t.lineStart,p===1?l&&(tP(t,I)||IK(t,I,v))||DK(t,v)?m=!0:(s&&FK(t,v)||AK(t,v)||MK(t,v)?m=!0:OK(t)?(m=!0,(t.tag!==null||t.anchor!==null)&&ue(t,"alias node should not have any properties")):PK(t,v,If===r)&&(m=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):p===0&&(m=l&&tP(t,I))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&ue(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),d=0,g=t.implicitTypes.length;d<g;d+=1)if(b=t.implicitTypes[d],b.resolve(t.result)){t.result=b.construct(t.result),t.tag=b.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(uo.call(t.typeMap[t.kind||"fallback"],t.tag))b=t.typeMap[t.kind||"fallback"][t.tag];else for(b=null,x=t.typeMap.multi[t.kind||"fallback"],d=0,g=x.length;d<g;d+=1)if(t.tag.slice(0,x[d].tag.length)===x[d].tag){b=x[d];break}b||ue(t,"unknown tag !<"+t.tag+">"),t.result!==null&&b.kind!==t.kind&&ue(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+b.kind+'", not "'+t.kind+'"'),b.resolve(t.result,t.tag)?(t.result=b.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):ue(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||m}function LK(t){var e=t.position,r,n,i,o=!1,s;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(s=t.input.charCodeAt(t.position))!==0&&(bt(t,!0,-1),s=t.input.charCodeAt(t.position),!(t.lineIndent>0||s!==37));){for(o=!0,s=t.input.charCodeAt(++t.position),r=t.position;s!==0&&!kr(s);)s=t.input.charCodeAt(++t.position);for(n=t.input.slice(r,t.position),i=[],n.length<1&&ue(t,"directive name must not be less than one character in length");s!==0;){for(;na(s);)s=t.input.charCodeAt(++t.position);if(s===35){do s=t.input.charCodeAt(++t.position);while(s!==0&&!Yn(s));break}if(Yn(s))break;for(r=t.position;s!==0&&!kr(s);)s=t.input.charCodeAt(++t.position);i.push(t.input.slice(r,t.position))}s!==0&&iS(t),uo.call(Jk,n)?Jk[n](t,n,i):Nf(t,'unknown document directive "'+n+'"')}if(bt(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,bt(t,!0,-1)):o&&ue(t,"directives end mark is expected"),_s(t,t.lineIndent-1,Cf,!1,!0),bt(t,!0,-1),t.checkLineBreaks&&vK.test(t.input.slice(e,t.position))&&Nf(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&Uf(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,bt(t,!0,-1));return}if(t.position<t.length-1)ue(t,"end of the stream or a document separator is expected");else return}function vP(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new kK(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,ue(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)LK(r);return r.documents}function UK(t,e,r){e!==null&&typeof e=="object"&&typeof r>"u"&&(r=e,e=null);var n=vP(t,r);if(typeof e!="function")return n;for(var i=0,o=n.length;i<o;i+=1)e(n[i])}function HK(t,e){var r=vP(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new Rr("expected a single document in the stream, but found more")}}var VK=UK,BK=HK,bP={loadAll:VK,load:BK},wP=Object.prototype.toString,_P=Object.prototype.hasOwnProperty,aS=65279,WK=9,fl=10,$K=13,jK=32,qK=33,zK=34,XT=35,GK=37,KK=38,QK=39,ZK=42,EP=44,YK=45,Of=58,XK=61,JK=62,e4=63,t4=64,RP=91,kP=93,r4=96,PP=123,n4=124,AP=125,Qt={};Qt[0]="\\0";Qt[7]="\\a";Qt[8]="\\b";Qt[9]="\\t";Qt[10]="\\n";Qt[11]="\\v";Qt[12]="\\f";Qt[13]="\\r";Qt[27]="\\e";Qt[34]='\\"';Qt[92]="\\\\";Qt[133]="\\N";Qt[160]="\\_";Qt[8232]="\\L";Qt[8233]="\\P";var i4=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],o4=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function a4(t,e){var r,n,i,o,s,l,p;if(e===null)return{};for(r={},n=Object.keys(e),i=0,o=n.length;i<o;i+=1)s=n[i],l=String(e[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),p=t.compiledTypeMap.fallback[s],p&&_P.call(p.styleAliases,l)&&(l=p.styleAliases[l]),r[s]=l;return r}function s4(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else if(t<=4294967295)r="U",n=8;else throw new Rr("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+Pt.repeat("0",n-e.length)+e}var c4=1,ml=2;function l4(t){this.schema=t.schema||nS,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=Pt.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=a4(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?ml:c4,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function rP(t,e){for(var r=Pt.repeat(" ",e),n=0,i=-1,o="",s,l=t.length;n<l;)i=t.indexOf(`
`,n),i===-1?(s=t.slice(n),n=l):(s=t.slice(n,i+1),n=i+1),s.length&&s!==`
`&&(o+=r),o+=s;return o}function JT(t,e){return`
`+Pt.repeat(" ",t.indent*e)}function p4(t,e){var r,n,i;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(i=t.implicitTypes[r],i.resolve(e))return!0;return!1}function Lf(t){return t===jK||t===WK}function dl(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==aS||65536<=t&&t<=1114111}function nP(t){return dl(t)&&t!==aS&&t!==$K&&t!==fl}function iP(t,e,r){var n=nP(t),i=n&&!Lf(t);return(r?n:n&&t!==EP&&t!==RP&&t!==kP&&t!==PP&&t!==AP)&&t!==XT&&!(e===Of&&!i)||nP(e)&&!Lf(e)&&t===XT||e===Of&&i}function u4(t){return dl(t)&&t!==aS&&!Lf(t)&&t!==YK&&t!==e4&&t!==Of&&t!==EP&&t!==RP&&t!==kP&&t!==PP&&t!==AP&&t!==XT&&t!==KK&&t!==ZK&&t!==qK&&t!==n4&&t!==XK&&t!==JK&&t!==QK&&t!==zK&&t!==GK&&t!==t4&&t!==r4}function f4(t){return!Lf(t)&&t!==Of}function pl(t,e){var r=t.charCodeAt(e),n;return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function MP(t){var e=/^\n* /;return e.test(t)}var DP=1,eS=2,FP=3,IP=4,vs=5;function m4(t,e,r,n,i,o,s,l){var p,u=0,m=null,d=!1,g=!1,x=n!==-1,b=-1,v=u4(pl(t,0))&&f4(pl(t,t.length-1));if(e||s)for(p=0;p<t.length;u>=65536?p+=2:p++){if(u=pl(t,p),!dl(u))return vs;v=v&&iP(u,m,l),m=u}else{for(p=0;p<t.length;u>=65536?p+=2:p++){if(u=pl(t,p),u===fl)d=!0,x&&(g=g||p-b-1>n&&t[b+1]!==" ",b=p);else if(!dl(u))return vs;v=v&&iP(u,m,l),m=u}g=g||x&&p-b-1>n&&t[b+1]!==" "}return!d&&!g?v&&!s&&!i(t)?DP:o===ml?vs:eS:r>9&&MP(t)?vs:s?o===ml?vs:eS:g?IP:FP}function d4(t,e,r,n,i){t.dump=function(){if(e.length===0)return t.quotingType===ml?'""':"''";if(!t.noCompatMode&&(i4.indexOf(e)!==-1||o4.test(e)))return t.quotingType===ml?'"'+e+'"':"'"+e+"'";var o=t.indent*Math.max(1,r),s=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),l=n||t.flowLevel>-1&&r>=t.flowLevel;function p(u){return p4(t,u)}switch(m4(e,l,t.indent,s,p,t.quotingType,t.forceQuotes&&!n,i)){case DP:return e;case eS:return"'"+e.replace(/'/g,"''")+"'";case FP:return"|"+oP(e,t.indent)+aP(rP(e,o));case IP:return">"+oP(e,t.indent)+aP(rP(h4(e,s),o));case vs:return'"'+g4(e)+'"';default:throw new Rr("impossible error: invalid scalar style")}}()}function oP(t,e){var r=MP(t)?String(e):"",n=t[t.length-1]===`
`,i=n&&(t[t.length-2]===`
`||t===`
`),o=i?"+":n?"":"-";return r+o+`
`}function aP(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function h4(t,e){for(var r=/(\n+)([^\n]*)/g,n=function(){var u=t.indexOf(`
`);return u=u!==-1?u:t.length,r.lastIndex=u,sP(t.slice(0,u),e)}(),i=t[0]===`
`||t[0]===" ",o,s;s=r.exec(t);){var l=s[1],p=s[2];o=p[0]===" ",n+=l+(!i&&!o&&p!==""?`
`:"")+sP(p,e),i=o}return n}function sP(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,n,i=0,o,s=0,l=0,p="";n=r.exec(t);)l=n.index,l-i>e&&(o=s>i?s:l,p+=`
`+t.slice(i,o),i=o+1),s=l;return p+=`
`,t.length-i>e&&s>i?p+=t.slice(i,s)+`
`+t.slice(s+1):p+=t.slice(i),p.slice(1)}function g4(t){for(var e="",r=0,n,i=0;i<t.length;r>=65536?i+=2:i++)r=pl(t,i),n=Qt[r],!n&&dl(r)?(e+=t[i],r>=65536&&(e+=t[i+1])):e+=n||s4(r);return e}function y4(t,e,r){var n="",i=t.tag,o,s,l;for(o=0,s=r.length;o<s;o+=1)l=r[o],t.replacer&&(l=t.replacer.call(r,String(o),l)),(Mi(t,e,l,!1,!1)||typeof l>"u"&&Mi(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=i,t.dump="["+n+"]"}function cP(t,e,r,n){var i="",o=t.tag,s,l,p;for(s=0,l=r.length;s<l;s+=1)p=r[s],t.replacer&&(p=t.replacer.call(r,String(s),p)),(Mi(t,e+1,p,!0,!0,!1,!0)||typeof p>"u"&&Mi(t,e+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=JT(t,e)),t.dump&&fl===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=o,t.dump=i||"[]"}function x4(t,e,r){var n="",i=t.tag,o=Object.keys(r),s,l,p,u,m;for(s=0,l=o.length;s<l;s+=1)m="",n!==""&&(m+=", "),t.condenseFlow&&(m+='"'),p=o[s],u=r[p],t.replacer&&(u=t.replacer.call(r,p,u)),Mi(t,e,p,!1,!1)&&(t.dump.length>1024&&(m+="? "),m+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),Mi(t,e,u,!1,!1)&&(m+=t.dump,n+=m));t.tag=i,t.dump="{"+n+"}"}function T4(t,e,r,n){var i="",o=t.tag,s=Object.keys(r),l,p,u,m,d,g;if(t.sortKeys===!0)s.sort();else if(typeof t.sortKeys=="function")s.sort(t.sortKeys);else if(t.sortKeys)throw new Rr("sortKeys must be a boolean or a function");for(l=0,p=s.length;l<p;l+=1)g="",(!n||i!=="")&&(g+=JT(t,e)),u=s[l],m=r[u],t.replacer&&(m=t.replacer.call(r,u,m)),Mi(t,e+1,u,!0,!0,!0)&&(d=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,d&&(t.dump&&fl===t.dump.charCodeAt(0)?g+="?":g+="? "),g+=t.dump,d&&(g+=JT(t,e)),Mi(t,e+1,m,!0,d)&&(t.dump&&fl===t.dump.charCodeAt(0)?g+=":":g+=": ",g+=t.dump,i+=g));t.tag=o,t.dump=i||"{}"}function lP(t,e,r){var n,i,o,s,l,p;for(i=r?t.explicitTypes:t.implicitTypes,o=0,s=i.length;o<s;o+=1)if(l=i[o],(l.instanceOf||l.predicate)&&(!l.instanceOf||typeof e=="object"&&e instanceof l.instanceOf)&&(!l.predicate||l.predicate(e))){if(r?l.multi&&l.representName?t.tag=l.representName(e):t.tag=l.tag:t.tag="?",l.represent){if(p=t.styleMap[l.tag]||l.defaultStyle,wP.call(l.represent)==="[object Function]")n=l.represent(e,p);else if(_P.call(l.represent,p))n=l.represent[p](e,p);else throw new Rr("!<"+l.tag+'> tag resolver accepts not "'+p+'" style');t.dump=n}return!0}return!1}function Mi(t,e,r,n,i,o,s){t.tag=null,t.dump=r,lP(t,r,!1)||lP(t,r,!0);var l=wP.call(t.dump),p=n,u;n&&(n=t.flowLevel<0||t.flowLevel>e);var m=l==="[object Object]"||l==="[object Array]",d,g;if(m&&(d=t.duplicates.indexOf(r),g=d!==-1),(t.tag!==null&&t.tag!=="?"||g||t.indent!==2&&e>0)&&(i=!1),g&&t.usedDuplicates[d])t.dump="*ref_"+d;else{if(m&&g&&!t.usedDuplicates[d]&&(t.usedDuplicates[d]=!0),l==="[object Object]")n&&Object.keys(t.dump).length!==0?(T4(t,e,t.dump,i),g&&(t.dump="&ref_"+d+t.dump)):(x4(t,e,t.dump),g&&(t.dump="&ref_"+d+" "+t.dump));else if(l==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!s&&e>0?cP(t,e-1,t.dump,i):cP(t,e,t.dump,i),g&&(t.dump="&ref_"+d+t.dump)):(y4(t,e,t.dump),g&&(t.dump="&ref_"+d+" "+t.dump));else if(l==="[object String]")t.tag!=="?"&&d4(t,t.dump,e,o,p);else{if(l==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new Rr("unacceptable kind of an object to dump "+l)}t.tag!==null&&t.tag!=="?"&&(u=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?u="!"+u:u.slice(0,18)==="tag:yaml.org,2002:"?u="!!"+u.slice(18):u="!<"+u+">",t.dump=u+" "+t.dump)}return!0}function S4(t,e){var r=[],n=[],i,o;for(tS(t,r,n),i=0,o=n.length;i<o;i+=1)e.duplicates.push(r[n[i]]);e.usedDuplicates=new Array(o)}function tS(t,e,r){var n,i,o;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(e.push(t),Array.isArray(t))for(i=0,o=t.length;i<o;i+=1)tS(t[i],e,r);else for(n=Object.keys(t),i=0,o=n.length;i<o;i+=1)tS(t[n[i]],e,r)}function v4(t,e){e=e||{};var r=new l4(e);r.noRefs||S4(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),Mi(r,0,n,!0,!0)?r.dump+`
`:""}var b4=v4,w4={dump:b4};function sS(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var CP=Ht;var NP=nS,_4=bP.load,Zme=bP.loadAll,OP=w4.dump;var Yme=sS("safeLoad","load"),Xme=sS("safeLoadAll","loadAll"),Jme=sS("safeDump","dump");var Hf=class{constructor(e,r){this.data=e;this.opts=r}represent(){let e=OP(this.data,Object.assign({replacer:P4,schema:R4},this.opts));return e=e.trim(),e.includes(`
`)&&(e=`
`+e),e}},E4=new CP("!format",{kind:"scalar",resolve:()=>!1,instanceOf:Hf,represent:t=>t.represent()}),R4=NP.extend({implicit:[E4]}),cS=t=>typeof t=="object"&&t!=null;function k4(t){if(cS(t))return Object.values(t).every(e=>!cS(e)&&!Array.isArray(e));if(Array.isArray(t))return t.every(e=>!cS(e)&&!Array.isArray(e))}function P4(t,e){return t===""?e:k4(e)?new Hf(e,{flowLevel:0}):e}var lS=["addSelection","addSelectionAfter","addSelectionBefore","breakLine","clearAndSetSelection","copyToClipboard","cutToClipboard","decrement","deselect","editNewLineAfter","editNewLineBefore","experimental.setInstanceReference","extractVariable","findInDocument","findInWorkspace","flashTargets","foldRegion","followLink","followLinkAside","gitAccept","gitRevert","gitStage","gitUnstage","increment","indentLine","insertCopyAfter","insertCopyBefore","insertEmptyLineAfter","insertEmptyLineBefore","insertEmptyLinesAround","joinLines","outdentLine","randomizeTargets","remove","rename","revealDefinition","revealTypeDefinition","reverseTargets","scrollToBottom","scrollToCenter","scrollToTop","setSelection","setSelectionAfter","setSelectionBefore","showDebugHover","showHover","showQuickFix","showReferences","sortTargets","toggleLineBreakpoint","toggleLineComment","unfoldRegion","private.getTargets","private.setKeyboardTarget","private.showParseTree"],M4=["callAsFunction","editNew","executeCommand","generateSnippet","getText","highlight","insertSnippet","moveToTarget","pasteFromClipboard","replace","replaceWithTarget","rewrapWithPairedDelimiter","swapTargets","wrapWithPairedDelimiter","wrapWithSnippet","parsed"],UP=[...lS,...M4];var D4=["angleBrackets","backtickQuotes","curlyBrackets","doubleQuotes","escapedDoubleQuotes","escapedParentheses","escapedSingleQuotes","escapedSquareBrackets","parentheses","singleQuotes","squareBrackets","tripleBacktickQuotes","tripleDoubleQuotes","tripleSingleQuotes"],F4=["string","any","collectionBoundary"],Vf=[...D4,...F4],ia=["argumentOrParameter","anonymousFunction","attribute","branch","class","className","collectionItem","collectionKey","comment","private.fieldAccess","functionCall","functionCallee","functionName","ifStatement","instance","list","map","name","namedFunction","regularExpression","statement","string","type","value","condition","section","sectionLevelOne","sectionLevelTwo","sectionLevelThree","sectionLevelFour","sectionLevelFive","sectionLevelSix","selector","private.switchStatementSubject","unit","xmlBothTags","xmlElement","xmlEndTag","xmlStartTag","part","chapter","subSection","subSubSection","namedParagraph","subParagraph","environment","character","word","token","identifier","line","sentence","paragraph","boundedParagraph","document","nonWhitespaceSequence","boundedNonWhitespaceSequence","url","notebookCell","command","textFragment","disqualifyDelimiter","pairDelimiter"];function HP(t){return ia.includes(t.type)}var VP=["simpleScopeTypeType","complexScopeTypeType","customRegex","pairedDelimiter","action","customAction","grapheme"],hl=class extends Error{constructor(e){super(e),this.name="NeedsInitialTalonUpdateError"}},Es=class extends Error{constructor(){super("Custom spoken forms are not currently supported in this ide"),this.name="DisabledCustomSpokenFormsError"}};function gl(t){return t.replace(/([A-Z])/g," $1").split(" ").map(e=>e.toLowerCase()).join(" ")}function oa(t){return t.version>=7}var fo=class{constructor(e){this.hashFunction=e;this.map={}}hash(e){return this.hashFunction(e).join("\0")}set(e,r){return this.map[this.hash(e)]=r,this}has(e){return this.hash(e)in this.map}get(e){return this.map[this.hash(e)]}delete(e){return delete this.map[this.hash(e)],this}clear(){return this.map={},this}};var Rs=class extends Map{constructor(r){super();this.getDefaultValue=r}get(r){let n=super.get(r);if(n!=null)return n;let i=this.getDefaultValue(r);return this.set(r,i),i}};function BP(...t){return{dispose(){t.forEach(({dispose:e})=>{try{e()}catch(r){console.error(r)}})}}}function yl(t){return typeof t=="string"||t instanceof String}function Bf(t){let[e,...r]=t;return C4(e,r)}function C4(t,e){let r;if(yl(t)){let n=t,[i,o,...s]=e;r={version:0,spokenForm:n,action:i,targets:o,extraArgs:s,usePrePhraseSnapshot:!1}}else r=t;return r}function xl(t,e){let r=new Map;return t.forEach(n=>{let i=e(n),o;r.has(i)?o=r.get(i):(o=[],r.set(i,o)),o.push(n)}),r}function WP(t){for(let e of t)return!1;return!0}function Di(t){return Object.keys(t)}function Tl(t,e){return`${t}.${e}`}function $P(t,e,r){if(t.length<2)return[...t];if(t.length===2)return e(t[0],t[1])?[t[0]]:[...t];let n=[],i=t.reduce((o,s)=>{let l=r(s),p=o.get(l);return p==null?(o.set(l,[s]),o):(o.get(l).push(s),p.length===2&&n.push(l),o)},new Map);return n.length===0?[...t]:(n.forEach(o=>{i.set(o,rl(i.get(o),e))}),t.flatMap(o=>{let s=r(o),l=i.get(s);if(l==null||l.length===0)return[];let p=l[0];return e(p,o)?(l.shift(),p):[]}))}function aa(t,e){if(t.length!==e.length)throw new Error("Lists must have the same length");return t.map((r,n)=>[r,e[n]])}var QP=Symbol.for("immer-nothing"),jP=Symbol.for("immer-draftable"),zr=Symbol.for("immer-state"),N4=process.env.NODE_ENV!=="production"?[function(t){return`The plugin for '${t}' has not been loaded into Immer. To enable the plugin, import and call \`enable${t}()\` when initializing your application.`},function(t){return`produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '${t}'`},"This object has been frozen and should not be mutated",function(t){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+t},"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.","Immer forbids circular references","The first or second argument to `produce` must be a function","The third argument to `produce` must be a function or undefined","First argument to `createDraft` must be a plain object, an array, or an immerable object","First argument to `finishDraft` must be a draft returned by `createDraft`",function(t){return`'current' expects a draft, got: ${t}`},"Object.defineProperty() cannot be used on an Immer draft","Object.setPrototypeOf() cannot be used on an Immer draft","Immer only supports deleting array indices","Immer only supports setting array indices and the 'length' property",function(t){return`'original' expects a draft, got: ${t}`}]:[];function Pr(t,...e){if(process.env.NODE_ENV!=="production"){let r=N4[t],n=typeof r=="function"?r.apply(null,e):r;throw new Error(`[Immer] ${n}`)}throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var ks=Object.getPrototypeOf;function Ps(t){return!!t&&!!t[zr]}function ca(t){return t?ZP(t)||Array.isArray(t)||!!t[jP]||!!t.constructor?.[jP]||zf(t)||Gf(t):!1}var O4=Object.prototype.constructor.toString();function ZP(t){if(!t||typeof t!="object")return!1;let e=ks(t);if(e===null)return!0;let r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===O4}function Wf(t,e){qf(t)===0?Reflect.ownKeys(t).forEach(r=>{e(r,t[r],t)}):t.forEach((r,n)=>e(n,r,t))}function qf(t){let e=t[zr];return e?e.type_:Array.isArray(t)?1:zf(t)?2:Gf(t)?3:0}function fS(t,e){return qf(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function YP(t,e,r){let n=qf(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function L4(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function zf(t){return t instanceof Map}function Gf(t){return t instanceof Set}function sa(t){return t.copy_||t.base_}function mS(t,e){if(zf(t))return new Map(t);if(Gf(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);let r=ZP(t);if(e===!0||e==="class_only"&&!r){let n=Object.getOwnPropertyDescriptors(t);delete n[zr];let i=Reflect.ownKeys(n);for(let o=0;o<i.length;o++){let s=i[o],l=n[s];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[s]={configurable:!0,writable:!0,enumerable:l.enumerable,value:t[s]})}return Object.create(ks(t),n)}else{let n=ks(t);if(n!==null&&r)return{...t};let i=Object.create(n);return Object.assign(i,t)}}function xS(t,e=!1){return Kf(t)||Ps(t)||!ca(t)||(qf(t)>1&&(t.set=t.add=t.clear=t.delete=U4),Object.freeze(t),e&&Object.entries(t).forEach(([r,n])=>xS(n,!0))),t}function U4(){Pr(2)}function Kf(t){return Object.isFrozen(t)}var H4={};function la(t){let e=H4[t];return e||Pr(0,t),e}var Sl;function XP(){return Sl}function V4(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function qP(t,e){e&&(la("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function dS(t){hS(t),t.drafts_.forEach(B4),t.drafts_=null}function hS(t){t===Sl&&(Sl=t.parent_)}function zP(t){return Sl=V4(Sl,t)}function B4(t){let e=t[zr];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function GP(t,e){e.unfinalizedDrafts_=e.drafts_.length;let r=e.drafts_[0];return t!==void 0&&t!==r?(r[zr].modified_&&(dS(e),Pr(4)),ca(t)&&(t=$f(e,t),e.parent_||jf(e,t)),e.patches_&&la("Patches").generateReplacementPatches_(r[zr].base_,t,e.patches_,e.inversePatches_)):t=$f(e,r,[]),dS(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==QP?t:void 0}function $f(t,e,r){if(Kf(e))return e;let n=e[zr];if(!n)return Wf(e,(i,o)=>KP(t,n,e,i,o,r)),e;if(n.scope_!==t)return e;if(!n.modified_)return jf(t,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;let i=n.copy_,o=i,s=!1;n.type_===3&&(o=new Set(i),i.clear(),s=!0),Wf(o,(l,p)=>KP(t,n,i,l,p,r,s)),jf(t,i,!1),r&&t.patches_&&la("Patches").generatePatches_(n,r,t.patches_,t.inversePatches_)}return n.copy_}function KP(t,e,r,n,i,o,s){if(process.env.NODE_ENV!=="production"&&i===r&&Pr(5),Ps(i)){let l=o&&e&&e.type_!==3&&!fS(e.assigned_,n)?o.concat(n):void 0,p=$f(t,i,l);if(YP(r,n,p),Ps(p))t.canAutoFreeze_=!1;else return}else s&&r.add(i);if(ca(i)&&!Kf(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;$f(t,i),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&jf(t,i)}}function jf(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&xS(e,r)}function W4(t,e){let r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:XP(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1},i=n,o=TS;r&&(i=[n],o=vl);let{revoke:s,proxy:l}=Proxy.revocable(i,o);return n.draft_=l,n.revoke_=s,l}var TS={get(t,e){if(e===zr)return t;let r=sa(t);if(!fS(r,e))return $4(t,r,e);let n=r[e];return t.finalized_||!ca(n)?n:n===pS(t.base_,e)?(uS(t),t.copy_[e]=yS(n,t)):n},has(t,e){return e in sa(t)},ownKeys(t){return Reflect.ownKeys(sa(t))},set(t,e,r){let n=JP(sa(t),e);if(n?.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){let i=pS(sa(t),e),o=i?.[zr];if(o&&o.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(L4(r,i)&&(r!==void 0||fS(t.base_,e)))return!0;uS(t),gS(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return pS(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,uS(t),gS(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){let r=sa(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){Pr(11)},getPrototypeOf(t){return ks(t.base_)},setPrototypeOf(){Pr(12)}},vl={};Wf(TS,(t,e)=>{vl[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});vl.deleteProperty=function(t,e){return process.env.NODE_ENV!=="production"&&isNaN(parseInt(e))&&Pr(13),vl.set.call(this,t,e,void 0)};vl.set=function(t,e,r){return process.env.NODE_ENV!=="production"&&e!=="length"&&isNaN(parseInt(e))&&Pr(14),TS.set.call(this,t[0],e,r,t[0])};function pS(t,e){let r=t[zr];return(r?sa(r):t)[e]}function $4(t,e,r){let n=JP(e,r);return n?"value"in n?n.value:n.get?.call(t.draft_):void 0}function JP(t,e){if(!(e in t))return;let r=ks(t);for(;r;){let n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=ks(r)}}function gS(t){t.modified_||(t.modified_=!0,t.parent_&&gS(t.parent_))}function uS(t){t.copy_||(t.copy_=mS(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var j4=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){let o=r;r=e;let s=this;return function(p=o,...u){return s.produce(p,m=>r.call(this,m,...u))}}typeof r!="function"&&Pr(6),n!==void 0&&typeof n!="function"&&Pr(7);let i;if(ca(e)){let o=zP(this),s=yS(e,void 0),l=!0;try{i=r(s),l=!1}finally{l?dS(o):hS(o)}return qP(o,n),GP(i,o)}else if(!e||typeof e!="object"){if(i=r(e),i===void 0&&(i=e),i===QP&&(i=void 0),this.autoFreeze_&&xS(i,!0),n){let o=[],s=[];la("Patches").generateReplacementPatches_(e,i,o,s),n(o,s)}return i}else Pr(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(s,...l)=>this.produceWithPatches(s,p=>e(p,...l));let n,i;return[this.produce(e,r,(s,l)=>{n=s,i=l}),n,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){ca(t)||Pr(8),Ps(t)&&(t=q4(t));let e=zP(this),r=yS(t,void 0);return r[zr].isManual_=!0,hS(e),r}finishDraft(t,e){let r=t&&t[zr];(!r||!r.isManual_)&&Pr(9);let{scope_:n}=r;return qP(n,e),GP(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){let i=e[r];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}r>-1&&(e=e.slice(r+1));let n=la("Patches").applyPatches_;return Ps(t)?n(t,e):this.produce(t,i=>n(i,e))}};function yS(t,e){let r=zf(t)?la("MapSet").proxyMap_(t,e):Gf(t)?la("MapSet").proxySet_(t,e):W4(t,e);return(e?e.scope_:XP()).drafts_.push(r),r}function q4(t){return Ps(t)||Pr(10,t),eA(t)}function eA(t){if(!ca(t)||Kf(t))return t;let e=t[zr],r;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=mS(t,e.scope_.immer_.useStrictShallowCopy_)}else r=mS(t,!0);return Wf(r,(n,i)=>{YP(r,n,eA(i))}),e&&(e.finalized_=!1),r}var Gr=new j4,Qf=Gr.produce,Yge=Gr.produceWithPatches.bind(Gr),Xge=Gr.setAutoFreeze.bind(Gr),Jge=Gr.setUseStrictShallowCopy.bind(Gr),eye=Gr.applyPatches.bind(Gr),tye=Gr.createDraft.bind(Gr),rye=Gr.finishDraft.bind(Gr);var pr=br(bA(),1),Bye=pr.default.v1,Wye=pr.default.v1ToV6,$ye=pr.default.v3,wA=pr.default.v4,jye=pr.default.v5,qye=pr.default.v6,zye=pr.default.v6ToV1,Gye=pr.default.v7,Kye=pr.default.NIL,Qye=pr.default.MAX,Zye=pr.default.version,Yye=pr.default.validate,Xye=pr.default.stringify,Jye=pr.default.parse;function _A(t,e,r){if(e>=t.length)throw Error(`Expected at least ${e+1} ${r} but received only ${t.length}`);return t[e]}function dm(t,e){if(Array.isArray(t))return t.map(r=>dm(r,e));if(typeof t=="object"&&t!=null){if(m9(t))return _A(e,t.index,"placeholder value");let r={};for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=dm(t[n],e));return r}return t}function m9(t){return typeof t=="object"&&t!=null&&"type"in t&&t.type==="placeholder"}var vm=br(RA(),1);var d9={blue:"blue",green:"green",red:"red",pink:"pink",yellow:"yellow",userColor1:"navy",userColor2:"apricot",default:null},h9={ex:"ex",fox:"fox",wing:"wing",hole:"hole",frame:"frame",curve:"curve",eye:"eye",play:"play",crosshairs:"cross",bolt:"bolt",default:null},gm={cursor:"this",that:"that",source:"source",nothing:"nothing",keyboard:null,explicit:null,decoratedSymbol:null,lineNumber:null,range:null,target:null},ym={modulo100:"row",relativeUp:"up",relativeDown:"down"};function kA(t){let e=d9[t];if(e==null)throw Error(`Unknown hat color '${t}'`);return e}function PA(t){let e=h9[t];if(e==null)throw Error(`Unknown hat shape '${t}'`);return e}function MS(t,e){return Object.fromEntries(Object.entries(t).map(([r,n])=>[r,Object.fromEntries(Object.entries(n).map(([i,o])=>[i,e(o,r,i)]))]))}var g9=Object.fromEntries("air bat cap drum each fine gust harp sit jury crunch look made near odd pit quench red sun trap urge vest whale plex yank zip".split(" ").map((t,e)=>[String.fromCharCode(97+e),t])),y9=Object.fromEntries("zero one two three four five six seven eight nine".split(" ").map((t,e)=>[e.toString(),t])),x9={".":"dot",",":"comma",";":"semicolon",":":"colon","!":"bang","*":"asterisk","@":"at sign","&":"ampersand","?":"question","/":"slash","\\":"backslash","-":"dash","=":"equals","+":"plus","~":"tilde",_:"underscore","#":"hash","%":"percent","^":"caret","|":"pipe",$:"dollar","\xA3":"pound","'":"quote",'"':"double quote","`":"back tick","(":"paren",")":"right paren","{":"brace","}":"right brace","[":"square","]":"right square","<":"angle",">":"right angle","\uFFFD":"special"},AA={...g9,...y9,...x9};function mo(...t){return{defaultSpokenForms:t,isDisabledByDefault:!0,isPrivate:!1}}function At(...t){return{defaultSpokenForms:t,isDisabledByDefault:!0,isPrivate:!0}}var MA={pairedDelimiter:{curlyBrackets:"curly",angleBrackets:"diamond",escapedDoubleQuotes:"escaped quad",escapedSingleQuotes:"escaped twin",escapedParentheses:"escaped round",escapedSquareBrackets:"escaped box",doubleQuotes:"quad",parentheses:"round",backtickQuotes:"skis",squareBrackets:"box",singleQuotes:"twin",tripleDoubleQuotes:At("triple quad"),tripleSingleQuotes:At("triple twin"),tripleBacktickQuotes:At("triple skis"),any:"pair",string:"string",whitespace:"void",collectionBoundary:At("collection boundary")},simpleScopeTypeType:{argumentOrParameter:"arg",attribute:"attribute",functionCall:"call",functionCallee:"callee",className:"class name",class:"class",comment:"comment",functionName:"funk name",namedFunction:"funk",ifStatement:"if state",instance:"instance",collectionItem:"item",collectionKey:"key",anonymousFunction:"lambda",list:"list",map:"map",name:"name",regularExpression:"regex",section:"section",sectionLevelOne:mo("one section"),sectionLevelTwo:mo("two section"),sectionLevelThree:mo("three section"),sectionLevelFour:mo("four section"),sectionLevelFive:mo("five section"),sectionLevelSix:mo("six section"),selector:"selector",statement:"state",branch:"branch",type:"type",value:"value",condition:"condition",unit:"unit",xmlElement:"element",xmlBothTags:"tags",xmlStartTag:"start tag",xmlEndTag:"end tag",part:"part",chapter:"chapter",subSection:"subsection",subSubSection:"subsubsection",namedParagraph:"paragraph",subParagraph:"subparagraph",environment:"environment",command:"command",character:"char",word:"sub",token:"token",identifier:"identifier",line:"line",sentence:"sentence",paragraph:"block",boundedParagraph:"short block",document:"file",nonWhitespaceSequence:"paint",boundedNonWhitespaceSequence:"short paint",url:"link",notebookCell:"cell",string:At("parse tree string"),textFragment:At("text fragment"),disqualifyDelimiter:At("disqualify delimiter"),pairDelimiter:At("pair delimiter"),"private.fieldAccess":At("access"),"private.switchStatementSubject":At("subject")},complexScopeTypeType:{glyph:"glyph"},surroundingPairForceDirection:{left:"left",right:"right"},simpleModifier:{excludeInterior:"bounds",toRawSelection:"just",leading:"leading",trailing:"trailing",keepContentFilter:"content",keepEmptyFilter:"empty",inferPreviousMark:"its",startOf:"start of",endOf:"end of",interiorOnly:"inside",visible:"visible",extendThroughStartOf:"head",extendThroughEndOf:"tail",everyScope:"every"},modifierExtra:{first:"first",last:"last",previous:"previous",next:"next",forward:"forward",backward:"backward",ancestor:"grand"},customRegex:{},action:{addSelection:"append",addSelectionAfter:"append post",addSelectionBefore:"append pre",breakLine:"break",scrollToBottom:"bottom",toggleLineBreakpoint:"break point",cutToClipboard:"carve",scrollToCenter:"center",clearAndSetSelection:"change",remove:"chuck",insertCopyBefore:"clone up",insertCopyAfter:"clone",toggleLineComment:"comment",copyToClipboard:"copy",scrollToTop:"crown",outdentLine:"dedent",revealDefinition:"define",editNewLineBefore:"drink",insertEmptyLineBefore:"drop",extractVariable:"extract",insertEmptyLineAfter:"float",foldRegion:"fold",followLink:"follow",followLinkAside:"follow split",flashTargets:"flash",deselect:"give",highlight:"highlight",showHover:"hover",increment:"increment",decrement:"decrement",indentLine:"indent",showDebugHover:"inspect",setSelectionAfter:"post",editNewLineAfter:"pour",setSelectionBefore:"pre",insertEmptyLinesAround:"puff",showQuickFix:"quick fix",showReferences:"reference",rename:"rename",reverseTargets:"reverse",findInDocument:"scout",findInWorkspace:"scout all",randomizeTargets:"shuffle",generateSnippet:"snippet make",sortTargets:"sort",setSelection:"take",revealTypeDefinition:"type deaf",unfoldRegion:"unfold",callAsFunction:"call",swapTargets:"swap",replaceWithTarget:"bring",moveToTarget:"move",wrapWithPairedDelimiter:"wrap",wrapWithSnippet:"wrap",rewrapWithPairedDelimiter:"repack",insertSnippet:"snippet",pasteFromClipboard:"paste",joinLines:"join",gitAccept:"git accept",gitRevert:"git revert",gitStage:"git stage",gitUnstage:"git unstage","private.showParseTree":At("parse tree"),"experimental.setInstanceReference":mo("from"),editNew:At("edit new"),executeCommand:At("execute command"),parsed:At("parsed"),getText:At("get text"),replace:At("replace"),"private.getTargets":At("get targets"),"private.setKeyboardTarget":At("set keyboard target")},customAction:{},grapheme:AA};var DS=MS(MA,t=>typeof t=="string"?{defaultSpokenForms:[t],isDisabledByDefault:!1,isPrivate:!1}:t),Ii=MS(DS,({defaultSpokenForms:t,isDisabledByDefault:e,isPrivate:r})=>({spokenForms:e?[]:t,isCustom:!1,defaultSpokenForms:t,requiresTalonUpdate:!1,isPrivate:r}));var Tt={rangeExclusive:"between",rangeInclusive:"past",rangeExcludingStart:null,rangeExcludingEnd:"until",listConnective:"and",swapConnective:"with",sourceDestinationConnective:"to",before:"before",after:"after",verticalRange:"slice",previous:"previous",next:"next",forward:"forward",backward:"backward"};var IA=br(FA(),1),Tm=class{constructor(e){this.mooLexer=IA.default.compile(e)}reset(e,r){let{mooState:n}=r??{};return this.mooLexer.reset(e,n),this}formatError(e,r){return this.mooLexer.formatError(e,r)}has(e){return this.mooLexer.has(e)}save(){return{mooState:this.mooLexer.save()}}next(){let e=this.mooLexer.next();return this.skipToken(e)?this.next():e}transform({value:e}){return e}skipToken(e){return e?.type==="ws"}};var Ci={};for(let t of lS){let{spokenForms:e}=Ii.action[t];for(let r of e)Ci[r]={type:"simpleActionName",value:t}}var T9=["replaceWithTarget","moveToTarget"];for(let t of T9){let{spokenForms:e}=Ii.action[t];for(let r of e)Ci[r]={type:"bringMove",value:t}}var S9=["before","after","to"];for(let t of S9){let e=Tt[t==="to"?"sourceDestinationConnective":t];Ci[e]={type:"insertionMode",value:t}}for(let t of ia){let{spokenForms:e}=Ii.simpleScopeTypeType[t];for(let r of e)Ci[r]={type:"simpleScopeTypeType",value:t}}for(let t of Vf){let{spokenForms:e}=Ii.pairedDelimiter[t];for(let r of e)Ci[r]={type:"pairedDelimiter",value:t}}for(let[t,e]of Object.entries(gm))e!=null&&(Ci[e]={type:"simpleMarkType",value:t});var Ni=new Tm({ws:/[ \t]+/,placeholderTarget:{match:/<target\d*>/,value:t=>t.slice(7,-1)},token:{match:Object.keys(Ci),type:t=>Ci[t].type,value:t=>Ci[t].value}});function CA(t,e){return{name:t,target:e}}function NA(t,e,r){return{name:t,source:e,destination:r}}function Sm(t,e){let r={type:"primitive"};return t!=null&&(r.modifiers=t),e!=null&&(r.mark=e),r}function OA(t,e){return{type:"primitive",insertionMode:t,target:e}}function LA(t){return{type:"containingScope",scopeType:t}}function UA(t){return{type:t}}function HA(t){return{type:"surroundingPair",delimiter:t}}function VA(t){return{type:t}}function BA(t){return{type:"target",target:{type:"placeholder",index:t.length===0?0:parseInt(t)-1}}}function FS(t){return t[0]}var v9={Lexer:Ni,ParserRules:[{name:"main",symbols:["action"],postprocess:FS},{name:"action",symbols:[Ni.has("simpleActionName")?{type:"simpleActionName"}:simpleActionName,"target"],postprocess:([t,e])=>CA(t,e)},{name:"action",symbols:[Ni.has("bringMove")?{type:"bringMove"}:bringMove,"target","destination"],postprocess:([t,e,r])=>NA(t,e,r)},{name:"destination",symbols:["primitiveDestination"],postprocess:FS},{name:"destination",symbols:[Ni.has("insertionMode")?{type:"insertionMode"}:insertionMode,"target"],postprocess:([t,e])=>OA(t,e)},{name:"target",symbols:["primitiveTarget"],postprocess:FS},{name:"primitiveTarget$ebnf$1",symbols:["modifier"]},{name:"primitiveTarget$ebnf$1",symbols:["primitiveTarget$ebnf$1","modifier"],postprocess:t=>t[0].concat([t[1]])},{name:"primitiveTarget",symbols:["primitiveTarget$ebnf$1"],postprocess:([t])=>Sm(t,void 0)},{name:"primitiveTarget",symbols:["mark"],postprocess:([t])=>Sm(void 0,t)},{name:"primitiveTarget$ebnf$2",symbols:["modifier"]},{name:"primitiveTarget$ebnf$2",symbols:["primitiveTarget$ebnf$2","modifier"],postprocess:t=>t[0].concat([t[1]])},{name:"primitiveTarget",symbols:["primitiveTarget$ebnf$2","mark"],postprocess:([t,e])=>Sm(t,e)},{name:"modifier",symbols:["containingScopeModifier"],postprocess:([t])=>t},{name:"containingScopeModifier",symbols:["scopeType"],postprocess:([t])=>LA(t)},{name:"scopeType",symbols:[Ni.has("simpleScopeTypeType")?{type:"simpleScopeTypeType"}:simpleScopeTypeType],postprocess:([t])=>UA(t)},{name:"scopeType",symbols:[Ni.has("pairedDelimiter")?{type:"pairedDelimiter"}:pairedDelimiter],postprocess:([t])=>HA(t)},{name:"mark",symbols:[Ni.has("simpleMarkType")?{type:"simpleMarkType"}:simpleMarkType],postprocess:([t])=>VA(t)},{name:"mark",symbols:[Ni.has("placeholderTarget")?{type:"placeholderTarget"}:placeholderTarget],postprocess:([t])=>BA(t)}],ParserStart:"main"},WA=v9;function b9(){return new vm.Parser(vm.Grammar.fromCompiled(WA))}function $A(t){let e=b9();if(e.feed(t),e.results.length!==1)throw new Error(`Expected exactly one result, got ${e.results.length}`);return e.results[0]}function bm(t,e){let r=$A(t);return dm(r,e)}function El(t){switch(t.name){case"callAsFunction":return[t.callee,t.argument];case"replaceWithTarget":case"moveToTarget":return[t.source,...jA(t.destination)];case"swapTargets":return[t.target1,t.target2];case"pasteFromClipboard":case"insertSnippet":case"replace":case"editNew":return jA(t.destination);case"parsed":return El(bm(t.content,t.arguments));default:return[t.target]}}function jA(t){switch(t.type){case"list":return t.destinations.map(({target:e})=>e);case"primitive":return[t.target];case"implicit":return[]}}function CS(t){return t.flatMap(IS)}function IS(t){switch(t.type){case"primitive":return[t];case"list":return t.elements.flatMap(IS);case"range":return[t.anchor,t.active].flatMap(IS);case"implicit":return[]}}var w9={arrowFunction:"anonymousFunction",dictionary:"map",regex:"regularExpression"},_9={purple:"pink"};function E9(t){t.modifiers?.forEach(e=>{(e.type==="containingScope"||e.type==="everyScope")&&(e.scopeType.type=w9[e.scopeType.type]??e.scopeType.type)})}function R9(t){t.mark?.type==="decoratedSymbol"&&(t.mark.symbolColor=_9[t.mark.symbolColor]??t.mark.symbolColor)}function NS(t){CS(t).forEach(e=>{E9(e),R9(e)})}function qA(t){return{...t,version:1}}var k9={type:"primitive",mark:{type:"cursor"},selectionType:"token",position:"contents",modifier:{type:"identity"},insideOutsideType:"inside"},P9={type:"primitive",isImplicit:!0},zA=t=>Ai(t,k9)?P9:t;function GA(t){let e=t.action;return{spokenForm:t.spokenForm,action:{name:e,args:t.extraArgs},targets:M9(t.targets,e),usePrePhraseSnapshot:t.usePrePhraseSnapshot??!1,version:2}}function A9(t){switch(t.type){case"identity":return[];case"containingScope":{let{includeSiblings:e,scopeType:r,type:n,...i}=t;return[{type:e?"everyScope":"containingScope",scopeType:{type:r},...i}]}case"surroundingPair":{let{delimiterInclusion:e,...r}=t,n={type:"containingScope",scopeType:r};return e==="interiorOnly"||e==="excludeInterior"?n.scopeType.delimiter==="any"?[{type:e}]:[{type:e},n]:[n]}case"subpiece":{let{type:e,pieceType:r,...n}=t;return[{type:"ordinalRange",scopeType:{type:r},...n}]}case"head":return[{type:"extendThroughStartOf"}];case"tail":return[{type:"extendThroughEndOf"}];default:return[t]}}function OS(t,e){let{type:r,isImplicit:n,mark:i,insideOutsideType:o,modifier:s,selectionType:l,position:p}=t,u=[];if(p&&p!=="contents"&&(p==="before"?o==="inside"?u.push({type:"position",position:"start"}):e==="remove"?u.push({type:"leading"}):u.push({type:"position",position:"before"}):o==="inside"?u.push({type:"position",position:"end"}):e==="remove"?u.push({type:"trailing"}):u.push({type:"position",position:"after"})),l)switch(l){case"token":if(s?.type==="subpiece")break;case"line":if(i?.type==="lineNumber")break;default:u.push({type:"containingScope",scopeType:{type:l}})}return s&&u.push(...A9(s)),{type:r,isImplicit:n,modifiers:u.length>0?u:void 0,mark:i?.type==="cursorToken"?void 0:i}}function KA(t,e){switch(t.type){case"list":return{...t,elements:t.elements.map(r=>KA(r,e))};case"range":{let{type:r,rangeType:n,start:i,end:o,excludeStart:s,excludeEnd:l}=t;return{type:r,rangeType:n,anchor:OS(i,e),active:OS(o,e),excludeAnchor:s??!1,excludeActive:l??!1}}case"primitive":return OS(t,e)}}function M9(t,e){return t.map(r=>KA(r,e)).map(r=>r.type==="primitive"?zA(r):r)}function QA(t){return{...t,version:3,targets:t.targets.map(ZA)}}function ZA(t){switch(t.type){case"list":return{...t,elements:t.elements.map(e=>ZA(e))};case"range":{let{anchor:e,active:r,...n}=t;return{anchor:LS(e),active:LS(r),...n}}case"primitive":return LS(t)}}function LS(t){let e=t.modifiers!=null?t.modifiers.map(F9):void 0;if(t.mark?.type==="lineNumber"){let{anchor:r,active:n}=t.mark;if(r.type!==n.type||r.lineNumber<0!=n.lineNumber<0)return{type:"range",anchor:{type:"primitive",mark:kl(r),modifiers:e},active:{type:"primitive",mark:kl(n)},excludeAnchor:!1,excludeActive:!1}}return{...t,mark:t.mark!=null?D9(t.mark):void 0,modifiers:e}}function D9(t){switch(t.type){case"lineNumber":return I9(t);default:return t}}function F9(t){switch(t.type){case"ordinalRange":return C9(t);default:return t}}function I9(t){return Ai(t.anchor,t.active)?kl(t.anchor):{type:"range",anchor:kl(t.anchor),active:kl(t.active)}}function C9(t){return t.anchor===t.active?Rl(t.scopeType,t.anchor):t.anchor===0&&t.active>t.anchor?Rl(t.scopeType,t.anchor,t.active-t.anchor+1):t.anchor<0&&t.active===-1?Rl(t.scopeType,t.anchor,-t.anchor):{type:"range",anchor:Rl(t.scopeType,t.anchor),active:Rl(t.scopeType,t.active),excludeAnchor:t.excludeAnchor,excludeActive:t.excludeActive}}function kl(t){return{type:"lineNumber",lineNumberType:t.type,lineNumber:t.lineNumber}}function Rl(t,e,r=1){return{type:"ordinalScope",scopeType:t,start:e,length:r}}function XA(t){return{...t,version:4,targets:t.targets.map(JA)}}function JA(t){switch(t.type){case"primitive":return YA(t);case"range":{let{anchor:e,...r}=t;return{...r,anchor:YA(e)}}case"list":{let{elements:e,...r}=t;return{...r,elements:e.map(JA)}}}}function YA(t){return t.mark==null&&t.modifiers==null||t.isImplicit?{type:"implicit"}:t}function eM(t){return{...t,version:5,action:N9(t.action),targets:t.targets.map(wm)}}function N9(t){switch(t.name){case"wrapWithSnippet":{let[e,r]=O9(t.args[0]);return{name:"wrapWithSnippet",args:[{type:"named",name:e,variableName:r}]}}case"insertSnippet":{let[e,r]=t.args,n={type:"named",name:e};return r!=null&&(n.substitutions=r),{name:"insertSnippet",args:[n]}}default:return t}}function O9(t){let[e,r]=t.split(".");if(e==null||r==null)throw new Error("Snippet location missing '.'");return[e,r]}function wm(t){switch(t.type){case"implicit":return t;case"list":return{...t,elements:t.elements.map(wm)};case"range":return{...t,anchor:wm(t.anchor),active:wm(t.active)};case"primitive":return{...t,mark:t.mark!=null?US(t.mark):void 0,modifiers:t.modifiers!=null&&t.modifiers.length>0?t.modifiers.map(HS):void 0}}}function US(t){return t.type==="range"?{...t,anchor:US(t.anchor),active:US(t.active),excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1}:t}function HS(t){return t.type==="range"?{...t,anchor:HS(t.anchor),active:HS(t.active),excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1}:t}var L9={bring:"replaceWithTarget",call:"callAsFunction",clear:"clearAndSetSelection",commentLines:"toggleLineComment",copy:"copyToClipboard",cut:"cutToClipboard",delete:"remove",editNewLineAbove:"editNewLineBefore",editNewLineBelow:"editNewLineAfter",findInFiles:"findInWorkspace",fold:"foldRegion",indentLines:"indentLine",insertEmptyLineAbove:"insertEmptyLineBefore",insertEmptyLineBelow:"insertEmptyLineAfter",insertLineAfter:"editNewLineAfter",insertLineBefore:"editNewLineBefore",move:"moveToTarget",outdentLines:"outdentLine",paste:"pasteFromClipboard",reverse:"reverseTargets",setBreakpoint:"toggleLineBreakpoint",sort:"sortTargets",swap:"swapTargets",unfold:"unfoldRegion",use:"replaceWithTarget",wrap:"wrapWithPairedDelimiter"};function VS(t){let e=L9[t]??t;if(!UP.includes(e))throw new Error(`Unknown action name: ${e}`);return e}function tM(t){return{version:6,spokenForm:t.spokenForm,usePrePhraseSnapshot:t.usePrePhraseSnapshot,action:U9(t.action,t.targets)}}function U9(t,e){let r=VS(t.name);switch(r){case"replaceWithTarget":case"moveToTarget":return{name:r,source:hn(e[0]),destination:Pl(e[1])};case"swapTargets":return{name:r,target1:hn(e[0]),target2:hn(e[1])};case"callAsFunction":return{name:r,callee:hn(e[0]),argument:hn(e[1])};case"pasteFromClipboard":return{name:r,destination:Pl(e[0])};case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return{name:r,left:t.args[0],right:t.args[1],target:hn(e[0])};case"generateSnippet":return{name:r,snippetName:t.args?.[0],target:hn(e[0])};case"insertSnippet":return{name:r,snippetDescription:t.args[0],destination:Pl(e[0])};case"wrapWithSnippet":return{name:r,snippetDescription:t.args[0],target:hn(e[0])};case"executeCommand":return{name:r,commandId:t.args[0],options:t.args?.[1],target:hn(e[0])};case"replace":return{name:r,replaceWith:t.args[0],destination:Pl(e[0])};case"highlight":{let n={name:r,target:hn(e[0])};return t.args?.[0]!=null&&(n.highlightId=t.args?.[0]),n}case"editNew":return{name:r,destination:Pl(e[0])};case"getText":return{name:r,options:t.args?.[0],target:hn(e[0])};case"parsed":throw Error("Parsed action should not be present in V5");default:return{name:r,target:hn(e[0])}}}function hn(t){switch(t.type){case"list":case"range":case"primitive":return H9(t);case"implicit":return t}}function H9(t){switch(t.type){case"list":return V9(t);case"range":case"primitive":return _m(t)}}function V9(t){return{...t,elements:t.elements.map(_m)}}function _m(t){switch(t.type){case"range":return rM(t);case"primitive":return Em(t)}}function rM(t){let{anchor:e,active:r}=t,n={type:"range",anchor:e.type==="implicit"?e:Em(e),active:Em(r),excludeAnchor:t.excludeAnchor,excludeActive:t.excludeActive};return t.rangeType!=null&&(n.rangeType=t.rangeType),n}function Em(t){let e={type:"primitive"},r=z9(t.modifiers);return r!=null&&(e.modifiers=r),t.mark!=null&&(e.mark=t.mark),e}function Pl(t){switch(t.type){case"list":return B9(t);case"range":return W9(t);case"primitive":return $9(t);case"implicit":return j9()}}function B9(t){let e=[],r=[],n,i=()=>{r.length>0&&e.push({type:"primitive",insertionMode:n??"to",target:r.length===1?r[0]:{type:"list",elements:r}})};return t.elements.forEach(o=>{let s=Rm(o);s!=null?(i(),r=[_m(o)],n=s):r.push(_m(o))}),i(),e.length>1?{type:"list",destinations:e}:e[0]}function W9(t){return{type:"primitive",insertionMode:Rm(t.anchor)??"to",target:rM(t)}}function $9(t){return{type:"primitive",insertionMode:Rm(t)??"to",target:Em(t)}}function j9(){return{type:"implicit"}}function Rm(t){switch(t.type){case"implicit":return"to";case"primitive":return q9(t);case"range":return Rm(t.anchor)}}function q9(t){let e=t.modifiers?.find(r=>r.type==="position");if(e!=null){if(t.modifiers.indexOf(e)!==0)throw Error("Position modifier has to be at first index");if(e?.position==="before"||e?.position==="after")return e.position}}function z9(t){let e=[];if(t!=null)for(let r of t)r.type==="position"?r.position==="start"?e.push({type:"startOf"}):r.position==="end"&&e.push({type:"endOf"}):e.push(r);return e.length>0?e:void 0}function nM(t){return{...t,version:7}}function WS(t){let e=G9(t,7),{action:r,usePrePhraseSnapshot:n=!1,spokenForm:i}=e;return{version:7,spokenForm:i,action:Qf(r,o=>{let s=El(o);NS(s),r.name}),usePrePhraseSnapshot:n}}function G9(t,e){if(t.version>7)throw new Bu;for(;t.version<e;)switch(t.version){case 0:t=qA(t);break;case 1:t=GA(t);break;case 2:t=QA(t);break;case 3:t=XA(t);break;case 4:t=eM(t);break;case 5:t=tM(t);break;case 6:t=nM(t);break;default:throw new Error(`Can't upgrade from unknown version ${t.version}`)}return t}var $S;function km(t){$S=t}function k(){if($S==null)throw Error("Tried to access ide before it was injected");return $S}var Pm=class{constructor(e){this.maxLength=e;this.stack=[];this.index=void 0}push(e){this.index!=null?this.stack.splice(this.index+1,this.stack.length-this.index-1,e):this.stack.push(e),this.stack.length>this.maxLength&&this.stack.shift(),this.index=this.stack.length-1}undo(){if(this.index!=null&&this.index>0)return this.index--,this.stack[this.index]}redo(){if(this.index!=null&&this.index<this.stack.length-1)return this.index++,this.stack[this.index]}};var K9=25,Am=class{constructor(){this.targetMap=new Map;this.targetHistory=new Rs(()=>new Pm(K9));this.notifier=new Gt}set(e,r,{history:n=!1}={}){this.targetMap.set(e,r),n&&r!=null&&this.targetHistory.get(e).push(r),this.notifier.notifyListeners(e,r)}get(e){return this.targetMap.get(e)}undo(e){let r=this.targetHistory.get(e).undo();r!=null&&this.set(e,r,{history:!1})}redo(e){let r=this.targetHistory.get(e).redo();r!=null&&this.set(e,r,{history:!1})}onStoredTargets(e){for(let r of Ss)e(r,this.get(r));return this.notifier.registerListener(e)}};function wt(t){if(t.length===0)throw new Error("Require at least one target with this action");let e=t.map(r=>r.editor);if(new Set(e).size>1)throw new Error("Can only have one editor with this action");return e[0]}function Mr(t){if(t.length!==1)throw new Error("Can only have one target with this action");return t[0]}async function Oi(t,e,r){return Promise.all(jS(t,e).map(([n,i])=>r(n,i)))}async function ot(t,e){return Oi(t,r=>r.editor,e)}async function iM(t,e){let r=jS(t,i=>i.editor),n=[];for(let[i,o]of r)n.push(await e(i,o));return n}function oM(t){return jS(t,e=>e.editor)}function jS(t,e){let n=xl(t,i=>e(i).document.uri);return Array.from(n.values(),i=>[e(i[0]),i])}function gn(t,e){return e!=null?kt(t,e).map(([n,i])=>({editor:n.editor,selection:n?.isReversed?new Ee(i.end,i.start):new Ee(i.start,i.end)})):t.map(n=>({editor:n.editor,selection:n.contentSelection}))}function yn(t,e){return t.textualType==="line"?qr(e):lr(e)}function Q9(t){return yn(t,t.contentRange)}function Ie(t,e,r,n=Q9){return t.flashRanges(e.map(i=>({editor:i.editor,range:n(i),style:r})))}function ho(t,e){return new j(new fe(e.start.line,0),t.document.lineAt(e.end).range.end)}function qS(t,e){return e.isEmpty?0:t.document.offsetAt(e.end)-t.document.offsetAt(e.start)}function aM(t,e){let[r,n]=e instanceof fe?[e,e]:[e.start,e.end];return t.start.isBefore(r)&&t.end.isAfter(n)}function Li(t,...e){for(let r of e)r!=null&&(t=t.union(r));return t}var Mm=class t{constructor(e,r,n){this.target=e;this.insertionMode=r;this.contentRange=Y9(e.contentRange,r),this.isBefore=r==="before",this.isLineDelimiter=e.insertionDelimiter.includes(`
`),this.indentationString=n??this.isLineDelimiter?Z9(e.editor,e.contentRange):"",this.insertionPrefix=e.prefixRange!=null?e.editor.document.getText(e.prefixRange):void 0}get contentSelection(){return this.contentRange.toSelection(this.target.isReversed)}get editor(){return this.target.editor}get insertionDelimiter(){return this.target.insertionDelimiter}get isRaw(){return this.target.isRaw}withTarget(e){return new t(e,this.insertionMode,this.indentationString)}getEditNewActionType(){return this.insertionMode==="after"&&this.target.contentRange.isSingleLine&&this.insertionDelimiter===`
`&&this.insertionPrefix==null?"insertLineAfter":"edit"}constructChangeEdit(e,r=!1){return this.insertionMode==="before"||this.insertionMode==="after"?this.constructEditWithDelimiters(e,r):this.constructEditWithoutDelimiters(e)}constructEditWithDelimiters(e,r){let n=this.getEditRange(),i=this.getEditText(e,r),o=s=>this.updateRange(s,e,r);return{range:n,text:i,isReplace:this.insertionMode==="after",updateRange:o}}constructEditWithoutDelimiters(e){return{range:this.contentRange,text:e,updateRange:r=>r}}getEditRange(){let e=(()=>{let r=this.isBefore?Li(this.target.contentRange,this.target.prefixRange).start:this.target.contentRange.end;if(this.isLineDelimiter){let n=this.editor.document.lineAt(r),i=this.isBefore?n.rangeTrimmed?.start??n.range.start:n.rangeTrimmed?.end??n.range.end;if(r.isEqual(i))return this.isBefore?n.range.start:n.range.end}return r})();return new j(e,e)}getEditText(e,r){let i=(r?"":this.indentationString)+(this.insertionPrefix??"")+e;return this.isBefore?i+this.insertionDelimiter:this.insertionDelimiter+i}updateRange(e,r,n){let i=this.editor.document.offsetAt(e.start)+(n?0:this.indentationString.length)+(this.insertionPrefix?.length??0),o=this.isBefore?i:i+this.getLengthOfInsertionDelimiter(),s=o+r.length;return new j(this.editor.document.positionAt(o),this.editor.document.positionAt(s))}getLengthOfInsertionDelimiter(){if(this.editor.document.eol==="CRLF"){let e=this.insertionDelimiter.match(/\n/g);if(e!=null)return this.insertionDelimiter.length+e.length}return this.insertionDelimiter.length}};function Z9(t,e){let r=Number.MAX_SAFE_INTEGER,n="";for(let i=e.start.line;i<=e.end.line;++i){let o=t.document.lineAt(i);if(o.range.isEmpty||o.isEmptyOrWhitespace&&!e.isSingleLine)continue;let s=o.rangeTrimmed?.start??o.range.end;s.character<r&&(r=s.character,n=o.text.slice(0,r))}return n}function Y9(t,e){switch(e){case"before":return t.start.toEmptyRange();case"after":return t.end.toEmptyRange();case"to":return t}}function As(t,e,r,n){return X9(t.contentRange,e.contentRange,r,n)}function X9(t,e,r,n){return new j(r?t.start:t.end,n?e.end:e.start)}function Ms(t,e,r,n){let i=r?t.contentRange.start:new fe(t.contentRange.end.line+1,0),o=n?e.contentRange.end:e.editor.document.lineAt(e.contentRange.start.line-1).range.end;return new j(i,o)}var Be=class t{constructor(e){this.hasExplicitScopeType=!0;this.hasExplicitRange=!0;this.isRaw=!1;this.isImplicit=!1;this.isNotebookCell=!1;this.textualType="token";this.state={editor:e.editor,isReversed:e.isReversed,contentRange:e.contentRange,thatTarget:e.thatTarget}}get editor(){return this.state.editor}get isReversed(){return this.state.isReversed}get thatTarget(){return this.state.thatTarget!=null?this.state.thatTarget.thatTarget:this}get contentText(){return this.editor.document.getText(this.contentRange)}get contentSelection(){return this.contentRange.toSelection(this.isReversed)}get contentRange(){return this.state.contentRange}constructRemovalEdit(){return{range:this.getRemovalRange(),text:"",updateRange:e=>e}}getRemovalHighlightRange(){return yn(this,this.getRemovalRange())}withThatTarget(e){return this.cloneWith({thatTarget:e})}withContentRange(e){return this.cloneWith({contentRange:e})}getInterior(){}getBoundary(){}cloneWith(e){let r=Object.getPrototypeOf(this).constructor;return new r({...this.getCloneParameters(),...e})}maybeCreateRichRangeTarget(e,r){let{constructor:n}=Object.getPrototypeOf(this);return new n({...this.getCloneParameters(),isReversed:e,contentRange:As(this,r,!0,!0)})}isEqual(e){return e instanceof t&&Ai(this.getEqualityParameters(),e.getEqualityParameters())}getEqualityParameters(){let{thatTarget:e,...r}=this.getCloneParameters();return{...r}}toDestination(e){return new Mm(this,e)}toPlainObject(){return{type:this.type,contentRange:ll(this.contentRange),isReversed:this.isReversed,hasExplicitRange:this.hasExplicitRange}}};function Dm(t,e){return J9(t,e.start,e.end)}function J9(t,e,r){return{editor:t.editor,selection:e5(t.selection,e,r)}}function e5(t,e,r){return t.isReversed?new Ee(r,e):new Ee(e,r)}function ua(t,e){let{document:r}=t,n=r.getText(e),i=n.length-n.trimStart().length,o=n.length-n.trimEnd().length,s=r.offsetAt(e.start)+i,l=r.offsetAt(e.end)-o,p=r.positionAt(s),u=r.positionAt(l);return new j(p,u)}function Fm(t,e,r,n){return r==null?void 0:new t({editor:e,isReversed:n,contentRange:r})}var $e=class extends Be{constructor(r){super(r);this.type="PlainTarget";this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.textualType=r.textualType??"token",this.insertionDelimiter=r.insertionDelimiter??""}getCloneParameters(){return{...this.state,textualType:this.textualType,insertionDelimiter:this.insertionDelimiter}}};function Ds(t,e,r){return Fm($e,t,e,r)}var Im=class extends Be{constructor(r){super(r);this.type="DocumentTarget";this.textualType="line";this.insertionDelimiter=`
`}getInterior(){return[new $e({editor:this.editor,isReversed:this.isReversed,contentRange:ua(this.editor,this.contentRange)})]}getRemovalRange(){return this.contentRange}getLeadingDelimiterTarget(){}getTrailingDelimiterTarget(){}getCloneParameters(){return this.state}};var ur=class t extends Be{constructor(){super(...arguments);this.type="LineTarget";this.textualType="line";this.insertionDelimiter=`
`;this.getRemovalHighlightRange=()=>qr(this.fullLineContentRange)}get fullLineContentRange(){return ho(this.editor,this.contentRange)}getLeadingDelimiterTarget(){return Ds(this.editor,t5(this.editor,this.fullLineContentRange),this.isReversed)}getTrailingDelimiterTarget(){return Ds(this.editor,r5(this.editor,this.fullLineContentRange),this.isReversed)}getRemovalRange(){let r=this.fullLineContentRange,n=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return n==null?r:r.union(n.contentRange)}maybeCreateRichRangeTarget(r,n){return new t({editor:this.editor,isReversed:r,contentRange:Ms(this,n,!0,!0)})}getCloneParameters(){return this.state}};function t5(t,e){let{start:r}=e;return r.line>0?new j(t.document.lineAt(r.line-1).range.end,e.start):void 0}function r5(t,e){let{end:r}=e;return r.line+1<t.document.lineCount?new j(e.end,new fe(r.line+1,0)):void 0}function zS(t,e,r){return Fm(ur,t,e,r)}var Cm=class t{constructor(e,r){this.target=e;this.insertionMode=r}get editor(){return this.target.editor}get contentRange(){return this.target.contentRange}get contentSelection(){return this.target.contentSelection}get insertionDelimiter(){return this.target.insertionDelimiter}get isRaw(){return this.target.isRaw}withTarget(e){return new t(e,this.insertionMode)}getEditNewActionType(){throw new Error("Method not implemented.")}constructChangeEdit(e){throw new Error("Method not implemented.")}};var Nm=class extends Be{constructor(r){super(r);this.type="NotebookCellTarget";this.insertionDelimiter=`
`;this.isNotebookCell=!0;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange}getCloneParameters(){return this.state}toDestination(r){return new Cm(this,r)}};var go=class t extends Be{constructor(){super(...arguments);this.type="ParagraphTarget";this.textualType="line";this.insertionDelimiter=`

`}getLeadingDelimiterTarget(){return zS(this.editor,n5(this.editor,this.fullLineContentRange),this.isReversed)}getTrailingDelimiterTarget(){return zS(this.editor,i5(this.editor,this.fullLineContentRange),this.isReversed)}getRemovalRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.contentRange.union(r.contentRange):this.contentRange;return new ur({contentRange:n,editor:this.editor,isReversed:this.isReversed}).getRemovalRange()}get fullLineContentRange(){return ho(this.editor,this.contentRange)}getRemovalHighlightRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.fullLineContentRange.union(r.contentRange):this.fullLineContentRange;return qr(n)}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,contentRange:Ms(this,n,!0,!0)})}getCloneParameters(){return this.state}};function n5(t,e){let{document:r}=t,n=r.lineAt(e.start),i=o5(r,n);if(i!=null)return i.lineNumber+1===n.lineNumber?void 0:new j(new fe(i.lineNumber+1,0),r.lineAt(n.lineNumber-1).range.end);if(n.lineNumber>0)return new j(new fe(0,0),r.lineAt(n.lineNumber-1).range.end)}function i5(t,e){let{document:r}=t,n=r.lineAt(e.end),i=a5(r,n);if(i!=null)return i.lineNumber-1===n.lineNumber?void 0:new j(new fe(n.lineNumber+1,0),r.lineAt(i.lineNumber-1).range.end);if(n.lineNumber<r.lineCount-1)return new j(new fe(n.lineNumber+1,0),r.lineAt(r.lineCount-1).range.end)}function o5(t,e){for(;e.lineNumber>0;){let r=t.lineAt(e.lineNumber-1);if(!r.isEmptyOrWhitespace)return r;e=r}return null}function a5(t,e){for(;e.lineNumber+1<t.lineCount;){let r=t.lineAt(e.lineNumber+1);if(!r.isEmptyOrWhitespace)return r;e=r}return null}var yo=class extends Be{constructor(){super(...arguments);this.type="RawSelectionTarget";this.textualType="character";this.insertionDelimiter="";this.isRaw=!0;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.getCloneParameters=()=>this.state}};function Al(t){let e=Li(t.contentRange,t.prefixRange),r=t.getTrailingDelimiterTarget()??t.getLeadingDelimiterTarget();return r!=null?e.union(r.contentRange):e}var s5=['"',"'","(","[","{","<"],c5=['"',"'",")","]","}",">",",",";",":"];function Xn(t){let{editor:e}=t,{start:r}=Li(t.contentRange,t.prefixRange),o=e.document.lineAt(r).text.slice(0,r.character).match(/\s+$/);return o==null?void 0:new $e({contentRange:new j(r.line,r.character-o[0].length,r.line,r.character),editor:e,isReversed:t.isReversed})}function Jn(t){let{editor:e}=t,{end:r}=t.contentRange,o=e.document.lineAt(r).text.slice(r.character).match(/^\s+/);return o==null?void 0:new $e({contentRange:new j(r.line,r.character,r.line,r.character+o[0].length),editor:e,isReversed:t.isReversed})}function xo(t){let{editor:e}=t,r=Li(t.contentRange,t.prefixRange),{start:n,end:i}=r,o=t.getLeadingDelimiterTarget()?.contentRange??n.toEmptyRange(),s=t.getTrailingDelimiterTarget()?.contentRange??i.toEmptyRange(),l=ho(e,r);return o.union(s).isRangeEqual(l)?l:!s.isEmpty&&(!o.isEmpty||r.start.isEqual(l.start)||s5.includes(l5(e,r)))?r.union(s):!o.isEmpty&&(r.end.isEqual(l.end)||c5.includes(p5(e,r)))?r.union(o):r}function l5(t,e){let{start:r}=e,n=t.document.lineAt(r);return r.isAfter(n.range.start)?t.document.getText(new j(r.translate(void 0,-1),r)):""}function p5(t,e){let{end:r}=e,n=t.document.lineAt(r);return r.isBefore(n.range.end)?t.document.getText(new j(r.translate(void 0,1),r)):""}var Yt=class extends Be{constructor(){super(...arguments);this.type="TokenTarget";this.textualType="token";this.insertionDelimiter=" "}getLeadingDelimiterTarget(){return Xn(this)}getTrailingDelimiterTarget(){return Jn(this)}getRemovalRange(){return xo(this)}getCloneParameters(){return this.state}};function GS(t){let{editor:e,isReversed:r}=t,{document:n}=e,i=Li(t.contentRange,t.prefixRange);return u5(n,i)?f5(n,i)?new go({editor:e,isReversed:r,contentRange:i}):new ur({editor:e,isReversed:r,contentRange:i}):new Yt({editor:e,isReversed:r,contentRange:i})}function u5(t,e){let r=t.lineAt(e.start).rangeTrimmed?.start,n=t.lineAt(e.end).rangeTrimmed?.end;return r!=null&&n!=null&&r.isEqual(e.start)&&n.isEqual(e.end)}function f5(t,e){let{start:r,end:n}=e;return(r.line===0||t.lineAt(r.line-1).isEmptyOrWhitespace)&&(n.line===t.lineCount-1||t.lineAt(n.line+1).isEmptyOrWhitespace)}var To=class t extends Be{constructor(r){super(r);this.type="ScopeTypeTarget";this.scopeTypeType_=r.scopeTypeType,this.removalRange_=r.removalRange,this.leadingDelimiterRange_=r.leadingDelimiterRange,this.trailingDelimiterRange_=r.trailingDelimiterRange,this.prefixRange=r.prefixRange,this.insertionDelimiter=r.insertionDelimiter??m5(r.scopeTypeType),this.hasDelimiterRange_=!!this.leadingDelimiterRange_||!!this.trailingDelimiterRange_}getLeadingDelimiterTarget(){if(this.leadingDelimiterRange_!=null)return new $e({editor:this.editor,isReversed:this.isReversed,contentRange:this.leadingDelimiterRange_});if(!this.hasDelimiterRange_)return Xn(this)}getTrailingDelimiterTarget(){if(this.trailingDelimiterRange_!=null)return new $e({editor:this.editor,isReversed:this.isReversed,contentRange:this.trailingDelimiterRange_});if(!this.hasDelimiterRange_)return Jn(this)}getRemovalRange(){return this.removalRange_!=null?this.removalRange_:this.hasDelimiterRange_?Al(this):GS(this).getRemovalRange()}getRemovalHighlightRange(){return this.removalRange_!=null?yn(this,this.removalRange_):this.hasDelimiterRange_?yn(this,Al(this)):GS(this).getRemovalHighlightRange()}maybeCreateRichRangeTarget(r,n){if(this.scopeTypeType_!==n.scopeTypeType_)return null;let i=this.removalRange_!=null||n.removalRange_!=null?(this.removalRange_??this.contentRange).union(n.removalRange_??n.contentRange):void 0;return new t({...this.getCloneParameters(),isReversed:r,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:n.trailingDelimiterRange_,removalRange:i,contentRange:this.contentRange.union(n.contentRange)})}getCloneParameters(){return{...this.state,insertionDelimiter:this.insertionDelimiter,prefixRange:this.prefixRange,removalRange:void 0,interiorRange:void 0,scopeTypeType:this.scopeTypeType_,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:this.trailingDelimiterRange_}}};function m5(t){switch(t){case"class":case"namedFunction":case"section":case"sectionLevelOne":case"sectionLevelTwo":case"sectionLevelThree":case"sectionLevelFour":case"sectionLevelFive":case"sectionLevelSix":case"part":case"chapter":case"subSection":case"subSubSection":case"namedParagraph":case"subParagraph":return`

`;case"anonymousFunction":case"statement":case"ifStatement":case"comment":case"xmlElement":case"collectionItem":case"branch":case"environment":return`
`;default:return" "}}var Om=class t extends Be{constructor(r){super(r);this.type="SubTokenWordTarget";this.textualType="word";this.leadingDelimiterRange_=r.leadingDelimiterRange,this.trailingDelimiterRange_=r.trailingDelimiterRange,this.insertionDelimiter=r.insertionDelimiter}getLeadingDelimiterTarget(){return Ds(this.editor,this.leadingDelimiterRange_,this.isReversed)}getTrailingDelimiterTarget(){return Ds(this.editor,this.trailingDelimiterRange_,this.isReversed)}getRemovalRange(){return Al(this)}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,contentRange:As(this,n,!0,!0),trailingDelimiterRange:n.trailingDelimiterRange_})}getCloneParameters(){return{...this.state,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:this.trailingDelimiterRange_,insertionDelimiter:this.insertionDelimiter}}};var Fs=class t extends Be{constructor(r){super({...r,contentRange:ua(r.editor,r.fullInteriorRange)});this.type="InteriorTarget";this.insertionDelimiter=" ";this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.fullInteriorRange;this.fullInteriorRange=r.fullInteriorRange}getCloneParameters(){return{...this.state,fullInteriorRange:this.fullInteriorRange}}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,fullInteriorRange:this.fullInteriorRange.union(n.fullInteriorRange)})}};var Lm=class extends Be{constructor(r){super(r);this.type="SurroundingPairTarget";this.insertionDelimiter=" ";this.boundary_=r.boundary,this.interiorRange_=r.interiorRange}getLeadingDelimiterTarget(){return Xn(this)}getTrailingDelimiterTarget(){return Jn(this)}getRemovalRange(){return xo(this)}getInterior(){return[new Fs({editor:this.editor,isReversed:this.isReversed,fullInteriorRange:this.interiorRange_})]}getBoundary(){return this.boundary_.map(r=>new Yt({editor:this.editor,isReversed:this.isReversed,contentRange:r}))}getCloneParameters(){return{...this.state,interiorRange:this.interiorRange_,boundary:this.boundary_}}};var It=class extends Be{constructor(r){super(r);this.type="UntypedTarget";this.insertionDelimiter=" ";this.hasExplicitScopeType=!1;this.hasExplicitRange=r.hasExplicitRange,this.textualType=r.textualType??"token"}getLeadingDelimiterTarget(){return Xn(this)}getTrailingDelimiterTarget(){return Jn(this)}getRemovalRange(){return this.editor.document.getText(this.contentRange).trim().length===0?this.contentRange:xo(this)}maybeCreateRichRangeTarget(){return null}getCloneParameters(){return{...this.state,textualType:this.textualType,hasExplicitRange:this.hasExplicitRange}}};var Um=class extends Be{constructor(){super(...arguments);this.type="ImplicitTarget";this.textualType="character";this.insertionDelimiter="";this.isRaw=!0;this.hasExplicitScopeType=!1;this.isImplicit=!0;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.getCloneParameters=()=>this.state}};var Hm=class extends Be{constructor(r){let{inputTarget:n,modifiedTarget:i,isHead:o}=r;super({...r,contentRange:sM(n.contentRange,i.contentRange,o)});this.type="HeadTailTarget";this.insertionDelimiter=" ";this.inputTarget=n,this.modifiedTarget=i,this.isHead=o}getLeadingDelimiterTarget(){return Xn(this)}getTrailingDelimiterTarget(){return Jn(this)}getRemovalRange(){return xo(this)}getInterior(){let r=this.modifiedTarget.getInterior();if(r!=null)return r.map(n=>new $e({editor:this.editor,contentRange:sM(this.inputTarget.contentRange,n.contentRange,this.isHead),isReversed:this.isReversed}))}getCloneParameters(){return{...this.state,inputTarget:this.inputTarget,modifiedTarget:this.modifiedTarget,isHead:this.isHead}}};function sM(t,e,r){return r?new j(e.start,t.end):new j(t.start,e.end)}var Vm=class t extends Be{constructor(r){super({...r,contentRange:d5(r.paragraphTarget.contentRange,r.containingInterior.contentRange)});this.type="BoundedParagraphTarget";this.textualType="line";this.insertionDelimiter=`

`;this.containingInterior=r.containingInterior,this.paragraphTarget=r.paragraphTarget,this.startLineGap=this.contentRange.start.line-this.containingInterior.fullInteriorRange.start.line,this.endLineGap=this.containingInterior.fullInteriorRange.end.line-this.contentRange.end.line}getLeadingDelimiterTarget(){return this.startLineGap>1?this.paragraphTarget.getLeadingDelimiterTarget():void 0}getTrailingDelimiterTarget(){return this.endLineGap>1?this.paragraphTarget.getTrailingDelimiterTarget():void 0}getRemovalRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.contentRange.union(r.contentRange):this.contentRange;return this.startLineGap<=0||this.endLineGap<=0?n:new ur({contentRange:n,editor:this.editor,isReversed:this.isReversed}).getRemovalRange()}get fullLineContentRange(){return ho(this.editor,this.contentRange)}getRemovalHighlightRange(){let r=(()=>{if(this.startLineGap<1||this.endLineGap<1)return this.getRemovalRange();let n=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return n!=null?this.fullLineContentRange.union(n.contentRange):this.fullLineContentRange})();return qr(r)}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,containingInterior:this.containingInterior.maybeCreateRichRangeTarget(r,n.containingInterior),paragraphTarget:this.paragraphTarget.maybeCreateRichRangeTarget(r,n.paragraphTarget)})}getCloneParameters(){return{...this.state,paragraphTarget:this.paragraphTarget,containingInterior:this.containingInterior}}};function d5(t,e){let r=t.intersection(e);if(r==null||r.isEmpty)throw new Error("Ranges do not intersect");return r}function Bm(t){return t.activeTextEditor?.selections.map(e=>({selection:e,editor:t.activeTextEditor}))??[]}var Is=class{run(){return Bm(k()).map(e=>new It({editor:e.editor,isReversed:e.selection.isReversed,contentRange:e.selection,hasExplicitRange:!e.selection.isEmpty,textualType:"character"}))}};var ei=class{constructor(e,r){this.debouncer=new Hu(r,e.getOwnConfiguration("decorationDebounceDelayMs")),this.run=this.run.bind(this)}run(){this.debouncer.run()}dispose(){this.debouncer.dispose()}};var Wm=class{constructor(e,r){this.ide=e;this.storedTargets=r;this.disposables=[];this.debouncer=new ei(e.configuration,()=>this.updateKeyboardTarget()),this.disposables.push(e.configuration.onDidChangeConfiguration(()=>this.maybeActivate()),this.debouncer),this.maybeActivate()}maybeActivate(){if(this.ide.configuration.getOwnConfiguration("experimental.keyboardTargetFollowsSelection")){this.selectionWatcherDisposable==null&&(this.selectionWatcherDisposable=this.ide.onDidChangeTextEditorSelection(this.debouncer.run));return}this.selectionWatcherDisposable!=null&&(this.selectionWatcherDisposable.dispose(),this.selectionWatcherDisposable=void 0)}updateKeyboardTarget(){this.ide.activeTextEditor==null||this.storedTargets.get("keyboard")==null||this.storedTargets.set("keyboard",new Is().run())}dispose(){this.disposables.forEach(e=>e.dispose()),this.selectionWatcherDisposable?.dispose()}};var $m=class{constructor(e){this.ide=e;switch(e.disposeOnExit(this),this.evaluateSetting=this.evaluateSetting.bind(this),this.active=!0,e.runMode){case"development":this.enableDebugLog();break;case"test":this.disableDebugLog();break;case"production":this.evaluateSetting(),this.disposableConfiguration=e.configuration.onDidChangeConfiguration(this.evaluateSetting);break}}log(...e){this.active&&console.log(...e)}dispose(){this.disposableConfiguration&&this.disposableConfiguration.dispose()}enableDebugLog(){this.active=!0}disableDebugLog(){this.active=!1}evaluateSetting(){this.ide.configuration.getOwnConfiguration("debug")?this.enableDebugLog():this.disableDebugLog()}};var h5=["!","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_","`","{","|","}","~","\xA3",'"'],g5=h5.map(jr).join("|"),y5=["[a-zA-Z0-9]",g5].join("|"),x5=new RegExp(`^(${y5})$`,"u"),T5="[unk]",S5=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}]/gu,jm=class{constructor(){this.disposables=[];this.algorithmChangeNotifier=new Gt;this.getTokenGraphemes=e=>mn(e,S5,r=>({text:this.normalizeGrapheme(r[0]),tokenStartOffset:r.index,tokenEndOffset:r.index+r[0].length}));this.registerAlgorithmChangeListener=this.algorithmChangeNotifier.registerListener;k().disposeOnExit(this),this.updateTokenHatSplittingMode=this.updateTokenHatSplittingMode.bind(this),this.getTokenGraphemes=this.getTokenGraphemes.bind(this),this.updateTokenHatSplittingMode(),this.disposables.push(k().configuration.onDidChangeConfiguration(this.updateTokenHatSplittingMode))}updateTokenHatSplittingMode(){let{lettersToPreserve:e,symbolsToPreserve:r,...n}=k().configuration.getOwnConfiguration("tokenHatSplittingMode");this.tokenHatSplittingMode={lettersToPreserve:e.map(i=>i.toLowerCase().normalize("NFC")),symbolsToPreserve:r.map(i=>i.normalize("NFC")),...n},this.algorithmChangeNotifier.notifyListeners()}normalizeGrapheme(e){let{preserveCase:r,lettersToPreserve:n,symbolsToPreserve:i}=this.tokenHatSplittingMode,o=e.normalize("NFC");return i.includes(o)||(r||(o=o.toLowerCase()),n.includes(o.toLowerCase()))||(o=AT(o),x5.test(o)||(o=T5)),o}dispose(){this.disposables.forEach(({dispose:e})=>e())}};function fa(){return KS==null&&(KS=new jm),KS}var KS;var v5=["-","+","*","/","=","<",">","_","#",".","|","&",":"],b5=["!==","!=","+=","-=","*=","/=","%=","<=",">=","=>","->","??",'"""',"```","/*","*/","<!--","-->"],w5=["\\p{L}","\\p{M}","\\p{N}"],_5="[^\\s\\w]",E5="(?<![.\\d])\\d+\\.\\d+(?![.\\d])";function R5(t){let{fixedTokens:e,repeatableSymbols:r,identifierWordRegexes:n,identifierWordDelimiters:i,numbersRegex:o,singleSymbolsRegex:s}=t,l=r.map(jr).map(x=>`${x}+`).join("|"),p=e.map(jr).join("|"),m=`(${n.concat(i.map(jr)).join("|")})+`,d=`(${n.join("|")})+`,g=[p,o,m,l,s].join("|");return{identifierMatcher:new RegExp(m,"gu"),wordMatcher:new RegExp(d,"gu"),tokenMatcher:new RegExp(g,"gu")}}var QS=new Map;function Dr(t){let e=k().configuration.getOwnConfiguration("wordSeparators",{languageId:t}),r=e.join("\0");if(!QS.has(r)){let n={fixedTokens:b5,repeatableSymbols:v5,identifierWordRegexes:w5,identifierWordDelimiters:e,numbersRegex:E5,singleSymbolsRegex:_5};QS.set(r,R5(n))}return QS.get(r)}function cM(t,e,r){return mn(t,Dr(e).tokenMatcher,r)}var k5=/\p{Lu}?\p{Ll}+|\p{Lu}+(?!\p{Ll})|\p{N}+/gu,Cs=class{constructor(e){this.wordRegex=Dr(e).wordMatcher}splitIdentifier(e){let r=sl(e,this.wordRegex);return r.length>1?r:sl(e,k5)}};var lM=({penalty:t})=>-t,pM=({isFirstLetter:t})=>t?-1:0;function uM(t){return({grapheme:{text:e},style:r})=>{let n=t.get({grapheme:e,hatStyle:r});return n==null?1/0:-n}}function fM(t,e){let r=el(n=>OT(e[n].filter(i=>i>t))??1/0);return({grapheme:{text:n}})=>r(n)}function ZS(t){return e=>e.grapheme.text===t?.grapheme&&e.style===t?.hatStyle?1:0}function mM(t){switch(t){case"greedy":return({penalty:e})=>-e;case"balanced":return({penalty:e})=>-(e<2?0:1);case"stable":return e=>0}}function dM(t,e){if(t.length===0)return;let r=t;for(let n of e){if(r.length===1)return r[0];r=P5(r,n)}return r[0]}function P5(t,e){let r=-1/0,n=[];for(let i of t){let o=e(i);o<r||(o>r&&(r=o,n.length=0),n.push(i))}return n}function hM({hatOldTokenRanks:t,graphemeTokenRanks:e},r,n,i,o,s){return dM(s,[ZS(i),mM(r),ZS(o),uM(t),lM,pM,fM(n,e)])}function gM(t,e,r){let n={},i=new fo(({grapheme:o,hatStyle:s})=>[o,s]);return t.forEach(({token:o,rank:s})=>{let l=e.get(o);l!=null&&i.set(l,s),r.getTokenGraphemes(o.text).forEach(({text:p})=>{let u;p in n?u=n[p]:(u=[],n[p]=u),u.push(s)})}),{hatOldTokenRanks:i,graphemeTokenRanks:n}}function yM(t,e=[]){return new Map(CT(rt,Jo)(tl([e],t.visibleRanges.map(r=>LT(r.start.line,r.end.line+1)))).sort((r,n)=>r-n).map((r,n)=>[r,n]))}function xM(t,e){return(r,n)=>{let i=Math.abs(r.displayLine-t),o=Math.abs(n.displayLine-t);if(i<o)return-1;if(i>o)return 1;let s=Math.abs(r.range.start.character-e),l=Math.abs(n.range.start.character-e);return s-l}}function TM(t,e){let r=t.document.languageId,n=t.document.getText(e),i=t.document.offsetAt(e.start);return cM(n,r,o=>{let s=i+o.index,l=i+o.index+o[0].length,p=new j(t.document.positionAt(s),t.document.positionAt(l));return{editor:t,text:o[0],range:p,offsets:{start:s,end:l}}})}function SM(t,e,r){let i=M5(t,e).flatMap(o=>{let s=o.selections[0].active,l=yM(o,[s.line]),p=rt(o.visibleRanges.map(u=>TM(o,u).map(m=>({...m,displayLine:l.get(m.range.start.line)}))));return p.sort(xM(l.get(s.line),s.character)),p});return A5(r,i).map((o,s)=>({token:o,rank:-s}))}function A5(t,e){return t==null?e:e.sort((r,n)=>{let i=t.has(r),o=t.has(n);return i&&!o?-1:!i&&o?1:0})}function M5(t,e){let r;return t==null?r=e:r=[t,...e.filter(n=>n!==t)],r}function YS({tokenGraphemeSplitter:t,enabledHatStyles:e,forceTokenHats:r,oldTokenHats:n,hatStability:i,activeTextEditor:o,visibleTextEditors:s}){let l=r==null?void 0:vM(r),p=vM(n),u=SM(o,s,l),m=gM(u,p,t),d=Object.keys(e),g=new Rs(()=>[...d]);return u.map(({token:x,rank:b})=>{let v=D5(t,x,g,e),I=hM(m,i,b,l?.get(x),p.get(x),v);if(I!=null)return g.set(I.grapheme.text,g.get(I.grapheme.text).filter(F=>F!==I.style)),F5(x,I)}).filter(x=>x!=null)}function vM(t){let e=new fo(({editor:r,offsets:n})=>[r.id,n.start,n.end]);return t.forEach(r=>e.set(r.token,r)),e}function D5(t,e,r,n){let i=[],o=t.getTokenGraphemes(e.text),s=new Set(new Cs(e.editor.document.languageId).splitIdentifier(e.text).map(l=>l.index));for(let l of o){let p=s.has(l.tokenStartOffset);for(let u of r.get(l.text))i.push({grapheme:l,style:u,penalty:n[u].penalty,isFirstLetter:p})}return i}function F5(t,e){return{hatStyle:e.style,grapheme:e.grapheme.text,token:t,hatRange:new j(t.range.start.translate(void 0,e.grapheme.tokenStartOffset),t.range.start.translate(void 0,e.grapheme.tokenEndOffset))}}var qm=class{constructor(e,r){this.hats=e;this.context=r;this.disposables=[];k().disposeOnExit(this);let n=new ei(k().configuration,()=>this.allocateHats());this.disposables.push(this.hats.onDidChangeEnabledHatStyles(n.run),this.hats.onDidChangeIsEnabled(n.run),k().onDidOpenTextDocument(n.run),k().onDidCloseTextDocument(n.run),k().onDidChangeActiveTextEditor(n.run),k().onDidChangeVisibleTextEditors(n.run),k().onDidChangeTextDocument(n.run),k().onDidChangeTextEditorSelection(n.run),k().onDidChangeTextEditorVisibleRanges(n.run),fa().registerAlgorithmChangeListener(n.run),n)}async allocateHats(e){let r=await this.context.getActiveMap();e=e?.map(i=>({...i,grapheme:fa().normalizeGrapheme(i.grapheme)}));let n=this.hats.isEnabled?YS({tokenGraphemeSplitter:fa(),enabledHatStyles:this.hats.enabledHatStyles,forceTokenHats:e,oldTokenHats:r.tokenHats,hatStability:k().configuration.getOwnConfiguration("experimental.hatStability"),activeTextEditor:k().activeTextEditor,visibleTextEditors:k().visibleTextEditors}):[];r.setTokenHats(n),await this.hats.setHatRanges(n.map(({hatStyle:i,hatRange:o,token:{editor:s}})=>({editor:s,range:o,styleName:i})))}dispose(){this.disposables.forEach(({dispose:e})=>e())}};var zm=class t{constructor(e){this.rangeUpdater=e;this.isExpired=!1;this.documentTokenLists=new Map;this.deregisterFunctions=[];this.map={};this._tokenHats=[]}get tokenHats(){return this._tokenHats}getDocumentTokenList(e){let r=e.uri.toString(),n=this.documentTokenLists.get(r);return n==null&&(n=[],this.documentTokenLists.set(r,n),this.deregisterFunctions.push(this.rangeUpdater.registerRangeInfoList(e,n))),n}clone(){let e=new t(this.rangeUpdater);return e.setTokenHats(this._tokenHats),e}setTokenHats(e){this.map={},this.documentTokenLists=new Map,this.deregisterFunctions.forEach(n=>n());let r=e.map(n=>{let{hatStyle:i,grapheme:o,token:s}=n,l=this.makeTokenLive(s);return this.map[Tl(i,o)]=l,{...n,token:l}});this._tokenHats=r}makeTokenLive(e){let{tokenMatcher:r}=Dr(e.editor.document.languageId),n={...e,expansionBehavior:{start:{type:"regex",regex:r},end:{type:"regex",regex:r}}};return this.getDocumentTokenList(e.editor.document).push(n),n}getEntries(){return this.checkExpired(),Object.entries(this.map)}getToken(e,r){return this.checkExpired(),this.map[Tl(e,fa().normalizeGrapheme(r))]}checkExpired(){if(this.isExpired)throw Error("Map snapshot has expired")}dispose(){this.isExpired=!0,this.deregisterFunctions.forEach(e=>e())}};var I5=6e4,Gm=class{constructor(e,r,n,i){this.debug=r;this.commandServerApi=i;this.prePhraseMapsSnapshotTimestamp=null;this.lastSignalVersion=null;k().disposeOnExit(this),this.activeMap=new zm(e),this.getActiveMap=this.getActiveMap.bind(this),this.allocateHats=this.allocateHats.bind(this),this.hatAllocator=new qm(n,{getActiveMap:this.getActiveMap})}allocateHats(e){return this.hatAllocator.allocateHats(e)}async getActiveMap(){return await this.maybeTakePrePhraseSnapshot(),this.activeMap}async getReadableMap(e){return await this.maybeTakePrePhraseSnapshot(),e?this.lastSignalVersion==null?(console.error("Pre phrase snapshot requested but no signal was present; please upgrade command client"),this.activeMap):this.prePhraseMapSnapshot==null?(console.error("Navigation map pre-phrase snapshot requested, but no snapshot has been taken"),this.activeMap):performance.now()-this.prePhraseMapsSnapshotTimestamp>I5?(console.error("Navigation map pre-phrase snapshot requested, but snapshot is more than a minute old"),this.activeMap):this.prePhraseMapSnapshot:this.activeMap}dispose(){this.activeMap.dispose(),this.prePhraseMapSnapshot!=null&&this.prePhraseMapSnapshot.dispose()}async maybeTakePrePhraseSnapshot(){let e=await this.commandServerApi.signals.prePhrase.getVersion();e!==this.lastSignalVersion&&(this.debug.log("taking snapshot"),this.lastSignalVersion=e,e!=null&&this.takePrePhraseSnapshot())}takePrePhraseSnapshot(){this.prePhraseMapSnapshot!=null&&this.prePhraseMapSnapshot.dispose(),this.prePhraseMapSnapshot=this.activeMap.clone(),this.prePhraseMapsSnapshotTimestamp=performance.now()}};function XS(t,e,r){let n=t.get(e);return n==null&&(n=r(),t.set(e,n)),n}var rv=br(Dl(),1);function nv(t,e){let{originalOffsets:{start:r,end:n},finalOffsets:{end:i},displacement:o}=t,{offsets:{start:s,end:l}}=e;return(0,rv.invariant)(n>r,()=>"Change range expected to be nonempty"),(0,rv.invariant)(n>=s&&r<=l,()=>"Change range expected to intersect with selection range"),{start:n<=s?s+o:Math.min(s,i),end:n<=l?l+o:Math.min(l,i)}}var kM=br(Dl(),1);function iv(t,e){let{event:{text:r,isReplace:n},finalOffsets:{start:i,end:o}}=t;if((0,kM.invariant)(i===t.originalOffsets.end&&i===e.offsets.start&&i===e.offsets.end,()=>"Selection range and change range expected to be same empty range"),n){let s=e.expansionBehavior.end;switch(s.type){case"closed":return{start:i,end:i};case"open":return{start:i,end:o};case"regex":{let l=r.match(Pf(s.regex));return l==null?{start:i,end:i}:{start:i,end:i+l[0].length}}}}else{let s=e.expansionBehavior.start;switch(s.type){case"closed":return{start:o,end:o};case"open":return{start:i,end:o};case"regex":{let l=r.search(kf(s.regex));return l===-1?{start:o,end:o}:{start:i+l,end:o}}}}}var ov=br(Dl(),1);function av(t,e){let{event:{text:r},originalOffsets:{start:n},displacement:i}=t,{offsets:{start:o,end:s},text:l}=e;if((0,ov.invariant)(s>o,()=>"Selection range expected to be nonempty"),(0,ov.invariant)(n>=o&&n<=s,()=>"Insertion offset expected to intersect with selection range"),n>o&&n<s)return{start:o,end:s+i};if(n===o){let p=e.expansionBehavior.start,u=s+i;switch(p.type){case"closed":return{start:o+i,end:u};case"open":return{start:o,end:u};case"regex":{let m=r+l,d=kf(p.regex),g=m.search(d);for(;g>r.length;)m=m.slice(0,g),g=m.search(d);return g===-1?{start:o,end:u}:{start:o+g,end:u}}}}else{let p=e.expansionBehavior.end,u=o;switch(p.type){case"closed":return{start:u,end:s};case"open":return{start:u,end:s+i};case"regex":{let m=l+r,d=Pf(p.regex),g=m.match(d),x=g==null?0:g[0].length;for(;x!==0&&x<l.length;)m=l.slice(x)+r,g=m.match(d),x=g==null?0:x+g[0].length;return x===0?{start:u,end:s}:{start:u,end:o+x}}}}}function PM(t,e,r){let{start:n,end:i}=t.originalOffsets,{start:o,end:s}=e.offsets,l=Math.min(n,o),p="";return o<n&&(p+=e.text.substring(0,n-o)),p+=t.event.text,i<s&&(p+=e.text.substring(s-i,e.text.length)),p.substring(r.start-l,r.end-l)}function AM(t,e){let{document:r,contentChanges:n}=t,i=n.map(o=>{let s=o.text.length-o.rangeLength,l=o.rangeOffset,p=l+o.rangeLength,u=l,m=p+s;return{displacement:s,event:o,originalOffsets:{start:l,end:p},finalOffsets:{start:u,end:m}}});for(let o of e){let s=o.offsets,l=i.map(u=>{let m;return u.originalOffsets.start>s.end?{start:0,end:0}:u.originalOffsets.end<s.start?{start:u.displacement,end:u.displacement}:(u.event.rangeLength===0?o.range.isEmpty?m=iv(u,o):m=av(u,o):m=nv(u,o),o.text=PM(u,o,m),{start:m.start-s.start,end:m.end-s.end})}),p={start:s.start+vf(l,({start:u})=>u),end:s.end+vf(l,({end:u})=>u)};o.range=o.range.with(r.positionAt(p.start),r.positionAt(p.end)),o.offsets=p}}var Qm=class{constructor(){this.rangeInfoLists=new Map;this.replaceEditLists=new Map;this.listenForDocumentChanges()}getDocumentRangeInfoLists(e){return XS(this.rangeInfoLists,e.uri.toString(),()=>[])}getDocumentReplaceEditLists(e){return XS(this.replaceEditLists,e.uri.toString(),()=>[])}registerRangeInfoList(e,r){let n=this.getDocumentRangeInfoLists(e);return n.push(r),()=>cr(n,r)}registerReplaceEditList(e,r){let n=this.getDocumentReplaceEditLists(e);return n.push(r),()=>cr(n,r)}*documentRangeInfoGenerator(e){let r=this.getDocumentRangeInfoLists(e);for(let n of r)for(let i of n)yield i}listenForDocumentChanges(){this.disposable=k().onDidChangeTextDocument(e=>{let r=this.getDocumentReplaceEditLists(e.document),n={...e,contentChanges:e.contentChanges.map(i=>W5(r,i)?{...i,isReplace:!0}:i)};AM(n,this.documentRangeInfoGenerator(e.document))})}dispose(){this.disposable.dispose()}};function W5(t,e){for(let r of t)for(let n of r)if(n.range.isRangeEqual(e.range)&&n.text===e.text)return!0;return!1}var Zm=class{constructor(){this.signals={prePhrase:{getVersion(){return Promise.resolve(null)}}}}getFocusedElementType(){return Promise.resolve(void 0)}};var Ym=class{async allocateHats(){}async getReadableMap(){return{getEntries(){return[]},getToken(){throw new Error("Hat map is disabled")}}}dispose(){}};var Xm=class{onDidChangeDefinition(e){return{dispose:()=>{}}}loadLanguage(e){return Promise.resolve()}get(e){}getNodeAtLocation(e,r){}dispose(){}};var Jm=class{getSnippetStrict(e){throw new Error("Snippets are not implemented.")}openNewSnippetFile(e,r){throw new Error("Snippets are not implemented.")}};var ed=class{getSpokenFormEntries(){throw new Es}onDidChange(){return{dispose:()=>{}}}};var td=class{getTree(e){throw new Error("Tree sitter not provided")}loadLanguage(e){return Promise.resolve(!1)}getLanguage(e){throw new Error("Tree sitter not provided")}getNodeAtLocation(e,r){throw new Error("Tree sitter not provided")}};var at=class extends Error{constructor(r,n=!1,i=!1){super(`No spoken form for: ${r}`);this.reason=r;this.requiresTalonUpdate=n;this.isPrivate=i}};var MM={curlyBrackets:["{","}"],angleBrackets:["<",">"],escapedDoubleQuotes:['\\"','\\"'],escapedSingleQuotes:["\\'","\\'"],escapedParentheses:["\\(","\\)"],escapedSquareBrackets:["\\[","\\]"],doubleQuotes:['"','"'],parentheses:["(",")"],backtickQuotes:["`","`"],squareBrackets:["[","]"],singleQuotes:["'","'"],tripleBacktickQuotes:["```","```"],tripleDoubleQuotes:['"""','"""'],tripleSingleQuotes:["'''","'''"],whitespace:[" "," "],any:null,string:null,collectionBoundary:null};var DM=new fo(t=>t);for(let[t,e]of Object.entries(MM))e!=null&&DM.set(e,t);function FM(t,e,r){let n=DM.get([e,r]);if(n==null)throw Error(`Unknown surrounding pair delimiters '${e} ${r}'`);return t.pairedDelimiter[n]}function IM(t){throw new at(`${t.type} insertion snippet`)}function CM(t){throw new at(`${t.type} wrap with snippet`)}function Fl(t,e,r){let n=r==="vertical"?`${Tt.verticalRange} `:"";if(t&&e)return n+Tt.rangeExclusive;if(t)throw new at("Range exclude anchor");return e?n+Tt.rangeExcludingEnd:r==="vertical"?Tt.verticalRange:Tt.rangeInclusive}function NM(t){return Object.fromEntries(Object.entries(t).map(([e,r])=>[e,Object.fromEntries(Object.entries(r).map(([n,i])=>[n,{type:"customizable",spokenForms:i,spokenFormType:e,id:n}]))]))}var $5=["zero","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen","twenty","twenty one","twenty two","twenty three","twenty four","twenty five","twenty six","twenty seven","twenty eight","twenty nine","thirty","thirty one","thirty two","thirty three","thirty four","thirty five","thirty six","thirty seven","thirty eight","thirty nine","forty","forty one","forty two","forty three","forty four","forty five","forty six","forty seven","forty eight","forty nine","fifty","fifty one","fifty two","fifty three","fifty four","fifty five","fifty six","fifty seven","fifty eight","fifty nine","sixty","sixty one","sixty two","sixty three","sixty four","sixty five","sixty six","sixty seven","sixty eight","sixty nine","seventy","seventy one","seventy two","seventy three","seventy four","seventy five","seventy six","seventy seven","seventy eight","seventy nine","eighty","eighty one","eighty two","eighty three","eighty four","eighty five","eighty six","eighty seven","eighty eight","eighty nine","ninety","ninety one","ninety two","ninety three","ninety four","ninety five","ninety six","ninety seven","ninety eight","ninety nine"],j5=["zeroth","first","second","third","fourth","fifth","sixth","seventh","eighth","ninth","tenth","eleventh","twelfth","thirteenth","fourteenth","fifteenth","sixteenth","seventeenth","eighteenth","nineteenth","twentieth"];function Ns(t){let e=$5[t];if(e==null)throw Error(`Unknown number '${t}'`);return e}function Il(t){let e=j5[t];if(e==null)throw Error(`Unknown ordinal '${t}'`);return e}var rd=class{constructor(e){this.spokenFormMap=e;this.handleModifier=this.handleModifier.bind(this)}handlePrimitiveTarget(e){let r=[];return e.modifiers!=null&&r.push(e.modifiers.map(this.handleModifier)),e.mark!=null&&r.push(this.handleMark(e.mark)),r}handleModifier(e){switch(e.type){case"cascading":case"modifyIfUntyped":case"preferredScope":throw new at(`Modifier '${e.type}'`);case"containingScope":return e.ancestorIndex==null||e.ancestorIndex===0?this.handleScopeType(e.scopeType):[new Array(e.ancestorIndex).fill(this.spokenFormMap.modifierExtra.ancestor),this.handleScopeType(e.scopeType)];case"everyScope":return[this.spokenFormMap.simpleModifier.everyScope,this.handleScopeType(e.scopeType)];case"extendThroughStartOf":case"extendThroughEndOf":{let r=this.spokenFormMap.simpleModifier[e.type];return e.modifiers!=null?[r,e.modifiers.map(this.handleModifier)]:[r]}case"relativeScope":return e.offset===0?this.handleRelativeScopeInclusive(e):this.handleRelativeScopeExclusive(e);case"ordinalScope":{let r=this.handleScopeType(e.scopeType),n=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.length===1)return e.start===-1?[n,this.spokenFormMap.modifierExtra.last,r]:e.start===0?[n,this.spokenFormMap.modifierExtra.first,r]:e.start<0?[n,Il(Math.abs(e.start)),this.spokenFormMap.modifierExtra.last,r]:[n,Il(e.start+1),r];let i=Ns(e.length);if(e.start===0)return[n,this.spokenFormMap.modifierExtra.first,i,Cl(r)];if(e.start===-e.length)return[n,this.spokenFormMap.modifierExtra.last,i,Cl(r)];throw new at(`'${e.type}' with count > 1 and offset away from start / end`)}case"range":{if(e.anchor.type==="ordinalScope"&&e.active.type==="ordinalScope"&&e.anchor.length===1&&e.active.length===1&&e.anchor.scopeType.type===e.active.scopeType.type){let r=e.anchor.start===-1?this.spokenFormMap.modifierExtra.last:Il(e.anchor.start+1),n=this.handleModifier(e.active),i=Fl(e.excludeAnchor,e.excludeActive);return[r,i,n]}throw Error(`Modifier '${e.type}' is not fully implemented`)}default:return[this.spokenFormMap.simpleModifier[e.type]]}}handleRelativeScopeInclusive(e){let r=this.handleScopeType(e.scopeType),n=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.length===1){let s=e.direction==="forward"?Tt.forward:Tt.backward;return[n,r,s]}let i=Ns(e.length),o=Cl(r);return e.direction==="forward"?[n,i,o]:[n,i,o,Tt.backward]}handleRelativeScopeExclusive(e){let r=this.handleScopeType(e.scopeType),n=e.direction==="forward"?Tt.next:Tt.previous,i=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.offset===1){let o=Ns(e.length);if(e.length===1)return[i,n,r];let s=Cl(r);return[i,n,o,s]}if(e.length===1){let o=Il(e.offset);return[i,o,n,r]}throw new at(`${e.type} modifier with offset > 1 and length > 1`)}handleScopeType(e){switch(e.type){case"oneOf":case"surroundingPairInterior":throw new at(`Scope type '${e.type}'`);case"glyph":return[this.spokenFormMap.complexScopeTypeType.glyph,LM(this.spokenFormMap.grapheme,"grapheme",e.character)];case"surroundingPair":{let r=this.spokenFormMap.pairedDelimiter[e.delimiter];return e.forceDirection!=null?[this.spokenFormMap.surroundingPairForceDirection[e.forceDirection],r]:r}case"customRegex":return this.spokenFormMap.customRegex[e.regex]??{type:"customizable",spokenForms:{spokenForms:[],isCustom:!0,defaultSpokenForms:[],requiresTalonUpdate:!1,isPrivate:!1},spokenFormType:"customRegex",id:e.regex};case"interior":return this.spokenFormMap.simpleModifier.interiorOnly;default:return this.spokenFormMap.simpleScopeTypeType[e.type]}}handleMark(e){switch(e.type){case"decoratedSymbol":{let[r,n]=e.symbolColor.split("-"),i=[];return r!=="default"&&i.push(kA(r)),n!=null&&i.push(PA(n)),i.push(LM(this.spokenFormMap.grapheme,"grapheme",e.character)),i}case"lineNumber":return this.handleLineNumberMark(e);case"range":{if(e.anchor.type==="lineNumber"&&e.active.type==="lineNumber"){let[r,n]=this.handleLineNumberMark(e.anchor),[i,o]=this.handleLineNumberMark(e.active);if(r===i){let s=Fl(e.excludeAnchor,e.excludeActive);return[r,n,s,o]}}throw Error(`Mark '${e.type}' is not fully implemented`)}case"explicit":case"keyboard":case"target":throw new at(`Mark '${e.type}'`);default:return[gm[e.type]]}}handleLineNumberMark(e){switch(e.lineNumberType){case"absolute":throw new at("Absolute line numbers");case"modulo100":return[ym.modulo100,Ns(e.lineNumber+1)];case"relative":return[e.lineNumber<0?ym.relativeUp:ym.relativeDown,Ns(Math.abs(e.lineNumber))]}}};function Cl(t){if(typeof t=="string")return OM(t);if(Array.isArray(t)){if(t.length===0)return t;let e=t[t.length-1];return[...t.slice(0,-1),Cl(e)]}return{...t,spokenForms:{...t.spokenForms,spokenForms:t.spokenForms.spokenForms.map(OM)}}}function OM(t){return`${t}s`}function LM(t,e,r){let n=t[r];if(n==null)throw new at(`${e} '${r}'`);return n}var Os=class{constructor(e){this.spokenFormMap=NM(e),this.primitiveGenerator=new rd(this.spokenFormMap)}getSpokenFormForSingleTerm(e,r){return this.componentsToSpokenForm(()=>{let n=this.spokenFormMap[e][r];if(n==null)throw new at(`${e} with id ${r}`);return n})}processCommand(e){return this.componentsToSpokenForm(()=>this.handleAction(e.action))}processScopeType(e){return this.componentsToSpokenForm(()=>[this.primitiveGenerator.handleScopeType(e)])}componentsToSpokenForm(e){try{return{type:"success",spokenForms:UM(e())}}catch(r){if(r instanceof at)return{type:"error",reason:r.reason,requiresTalonUpdate:r.requiresTalonUpdate,isPrivate:r.isPrivate};throw r}}handleAction(e){switch(e.name){case"editNew":case"getText":case"replace":case"executeCommand":case"parsed":case"private.getTargets":case"private.setKeyboardTarget":throw new at(`Action '${e.name}'`);case"replaceWithTarget":case"moveToTarget":return[this.spokenFormMap.action[e.name],this.handleTarget(e.source),this.handleDestination(e.destination)];case"swapTargets":return[this.spokenFormMap.action[e.name],this.handleTarget(e.target1),Tt.swapConnective,this.handleTarget(e.target2)];case"callAsFunction":return e.argument.type==="implicit"?[this.spokenFormMap.action[e.name],this.handleTarget(e.callee)]:[this.spokenFormMap.action[e.name],this.handleTarget(e.callee),"on",this.handleTarget(e.argument)];case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return[FM(this.spokenFormMap,e.left,e.right),this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"pasteFromClipboard":return[this.spokenFormMap.action[e.name],this.handleDestination(e.destination)];case"insertSnippet":return[this.spokenFormMap.action[e.name],IM(e.snippetDescription),this.handleDestination(e.destination)];case"generateSnippet":if(e.snippetName!=null)throw new at(`${e.name}.snippetName`);return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"wrapWithSnippet":return[CM(e.snippetDescription),this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"highlight":{if(e.highlightId!=null)throw new at(`${e.name}.highlightId`);return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)]}default:return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)]}}handleTarget(e){switch(e.type){case"list":if(e.elements.length<2)throw new at("List target with < 2 elements");return e.elements.map((r,n)=>n===0?this.handleTarget(r):[Tt.listConnective,this.handleTarget(r)]);case"range":{let r=this.handleTarget(e.anchor),n=this.handleTarget(e.active),i=Fl(e.excludeAnchor,e.excludeActive,e.rangeType);return[r,i,n]}case"primitive":return this.primitiveGenerator.handlePrimitiveTarget(e);case"implicit":return[]}}handleDestination(e){switch(e.type){case"list":if(e.destinations.length<2)throw new at("List destination with < 2 elements");return e.destinations.map((r,n)=>n===0?this.handleDestination(r):[Tt.listConnective,this.handleDestination(r)]);case"primitive":return[this.handleInsertionMode(e.insertionMode),this.handleTarget(e.target)];case"implicit":return[]}}handleInsertionMode(e){switch(e){case"to":return Tt.sourceDestinationConnective;case"before":return Tt.before;case"after":return Tt.after}}};function UM(t){if(typeof t=="string")return[t];if(Array.isArray(t))return t.length===0?[""]:HM(t.map(UM)).map(e=>e.filter(r=>r.length!==0).join(" "));if(t.spokenForms.spokenForms.length===0){let e=`${gl(t.spokenFormType)} with id ${t.id}`,r;throw t.spokenForms.isPrivate?r="this is a private spoken form currently only for internal experimentation":t.spokenForms.requiresTalonUpdate?r="please update talon to the latest version (see https://www.cursorless.org/docs/user/updating/)":r="please see https://www.cursorless.org/docs/user/customization/ for more information",new at(`${e}; ${r}`,t.spokenForms.requiresTalonUpdate,t.spokenForms.isPrivate)}return t.spokenForms.spokenForms}function HM(t){if(t.length===0)return[];if(t.length===1)return t[0].map(i=>[i]);let[e,...r]=t,n=HM(r);return e.flatMap(i=>n.map(o=>[i,...o]))}var nd=class{constructor(e){this.talonSpokenForms=e;this.notifier=new Gt;this.spokenFormMap_={...Ii};this.onDidChangeCustomSpokenForms=this.notifier.registerListener;this.disposable=e.onDidChange(()=>this.updateSpokenFormMaps().catch(()=>{})),this.customSpokenFormsInitialized=this.updateSpokenFormMaps(),this.customSpokenFormsInitialized.catch(()=>{})}get spokenFormMap(){return this.spokenFormMap_}get needsInitialTalonUpdate(){return this.needsInitialTalonUpdate_}async updateSpokenFormMaps(){let e;try{if(e=await this.talonSpokenForms.getSpokenFormEntries(),e.length===0)throw new Error("Custom spoken forms list empty")}catch(r){if(r instanceof hl)this.needsInitialTalonUpdate_=!0;else if(!(r instanceof Es)){console.error("Error loading custom spoken forms",r);let n=r.message.replace(/\.$/,"");lt(k().messages,"CustomSpokenForms.updateSpokenFormMaps",`Error loading custom spoken forms: ${n}. Falling back to default spoken forms.`)}throw this.spokenFormMap_={...Ii},this.notifier.notifyListeners(),r}for(let r of VP)q5(this.spokenFormMap_,r,DS[r],Object.fromEntries(e.filter(n=>n.type===r).map(({id:n,spokenForms:i})=>[n,i])));this.notifier.notifyListeners()}getCustomRegexScopeTypes(){return Object.keys(this.spokenFormMap_.customRegex).map(e=>({type:"customRegex",regex:e}))}dispose(){this.disposable.dispose()}};function q5(t,e,r,n){let i=Array.from(new Set([...Object.keys(r),...Object.keys(n)])),o={};for(let s of i){let{defaultSpokenForms:l=[],isPrivate:p=!1}=r[s]??{},u=n[s];o[s]=u==null?{defaultSpokenForms:l,spokenForms:[],requiresTalonUpdate:!p,isCustom:!1,isPrivate:p}:{defaultSpokenForms:l,spokenForms:u,requiresTalonUpdate:!1,isCustom:!Ai(l,u),isPrivate:p}}t[e]=o}var id=class{constructor(e){this.customSpokenForms=new nd(e),this.customSpokenFormsInitialized=this.customSpokenForms.customSpokenFormsInitialized,this.spokenFormGenerator=new Os(this.customSpokenForms.spokenFormMap),this.disposable=this.customSpokenForms.onDidChangeCustomSpokenForms(()=>{this.spokenFormGenerator=new Os(this.customSpokenForms.spokenFormMap)})}onDidChangeCustomSpokenForms(e){return this.customSpokenForms.onDidChangeCustomSpokenForms(e)}commandToSpokenForm(e){return this.spokenFormGenerator.processCommand(e)}scopeTypeToSpokenForm(e){return this.spokenFormGenerator.processScopeType(e)}actionIdToSpokenForm(e){return this.spokenFormGenerator.getSpokenFormForSingleTerm("action",e)}graphemeToSpokenForm(e){return this.spokenFormGenerator.getSpokenFormForSingleTerm("grapheme",e)}getCustomRegexScopeTypes(){return this.customSpokenForms.getCustomRegexScopeTypes()}get needsInitialTalonUpdate(){return this.customSpokenForms.needsInitialTalonUpdate}dispose(){this.disposable.dispose()}};function*z5(t){for(let e of t)for(let r of e)yield r}function*Nl(t,e){let r=ad(e),n=t;for(;n-- >0;){let i=r.next();if(!i.done)yield i.value;else return}}function*sv(t){let e=ad(t),r=e.next();if(r.done)return;let n=r.value;for(let i of e)yield[n,i],n=i}var i_e=Symbol();function*G5(t=0,e=1){let r=t;for(;;)yield r,r+=e}function*od(t,e){for(let r of t)e(r)&&(yield r)}function*Bt(t,e){for(let r of t)yield e(r)}function*BM(t,e,r,n=1){let i,o;if(r!==void 0?(i=e,o=r):(i=0,o=e),i<0)throw new Error("start cannot be negative");if(o!==null&&o<0)throw new Error("stop cannot be negative");if(n<=0)throw new Error("step cannot be negative");let s=-1,l=ad(t),p;for(;;){if(s++,o!==null&&s>=o||(p=l.next(),p.done))return;s<i||(s-i)%n===0&&(yield p.value)}}function*K5(t,e){let r=ad(t),n;for(;!(n=r.next()).done;){let i=n.value;if(!e(i))return;yield i}}function ad(t){return t[Symbol.iterator]()}function Ls(t,e){return Array.from(Bt(t,e))}function VM(t,e,r){let n=G5(t,r),i=r>=0?o=>o<e:o=>o>e;return K5(n,i)}function WM(t,e,r=1){return e!==void 0?VM(t,e,r):VM(0,t,r)}function sd(t,e){return z5(Bt(t,e))}function Kr(t,e,{domain:r},{domain:n}){return t==="forward"?Q5(e,r,n):Z5(e,r,n)}function Q5(t,e,r){let n=e.start.isAfterOrEqual(t),i=r.start.isAfterOrEqual(t);if(n&&i){let s=e.start.compareTo(r.start);return s===0?e.end.compareTo(r.end):s}if(!n&&!i){let s=e.end.compareTo(r.end);return s===0?-e.start.compareTo(r.start):s}if(!n&&i){let s=e.end.compareTo(r.start);return s!==0?s:r.isEmpty?1:-1}let o=e.start.compareTo(r.end);return o!==0?o:e.isEmpty?-1:1}function Z5(t,e,r){let n=e.end.isBeforeOrEqual(t),i=r.end.isBeforeOrEqual(t);if(n&&i){let s=-e.end.compareTo(r.end);return s===0?-e.start.compareTo(r.start):s}if(!n&&!i){let s=-e.start.compareTo(r.start);return s===0?e.end.compareTo(r.end):s}if(!n&&i){let s=-e.start.compareTo(r.end);return s!==0?s:r.isEmpty?1:-1}let o=-e.end.compareTo(r.start);return o!==0?o:e.isEmpty?-1:1}function $M(t,e,r,n,i,o){return Y5(t,n,i,o)&&(i==null||Kr(r,n.includeDescendantScopes?t:e,i,o)<0)}function Y5(t,e,r,n){let{containment:i,distalPosition:o,allowAdjacentScopes:s,skipAncestorScopes:l}=e,{domain:p}=n;switch(i){case"disallowed":if(p.contains(t))return!1;break;case"disallowedIfStrict":if(aM(p,t))return!1;break;case"required":if(!p.contains(t))return!1;break}return l&&r!=null&&p.contains(r.domain)?!1:X5(new j(t,o),p,s)}function X5(t,e,r){let n=t.intersection(e);return n==null?!1:!n.isEmpty||r||e.isEmpty}var J5={containment:null,allowAdjacentScopes:!1,skipAncestorScopes:!1,includeDescendantScopes:!1},Oe=class{constructor(){this.includeAdjacentInEvery=!1}*generateScopes(e,r,n,i={}){let o={...J5,...i,distalPosition:i.distalPosition??(n==="forward"?e.document.range.end:e.document.range.start)},s,l=r;for(let p of this.generateScopeCandidates(e,r,n,o))if($M(r,l,n,o,s,p)&&(yield p,s=p,l=n==="forward"?p.domain.end:p.domain.start),this.canStopEarly(r,n,o,s,p))return}canStopEarly(e,r,n,i,o){let{containment:s,distalPosition:l,skipAncestorScopes:p}=n;if(this.isHierarchical&&!p)return!1;let u=this.isHierarchical&&p?i:o;return u==null?!1:!!(s==="required"&&(r==="forward"?u.domain.end.isAfter(e):u.domain.start.isBefore(e))||(r==="forward"?u.domain.end.isAfterOrEqual(l):u.domain.start.isBeforeOrEqual(l)))}};var Fr=class extends Oe{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.scopeType=n;this.languageId=i;this.isHierarchical=!1}get searchScopeType(){return this.iterationScopeType}get searchScopeHandler(){return this._searchScopeHandler==null&&(this._searchScopeHandler=this.scopeHandlerFactory.create(this.searchScopeType,this.languageId)),this._searchScopeHandler}generateScopeCandidates(r,n,i,o){let{containment:s,...l}=o,p=this.searchScopeHandler.generateScopes(r,n,i,{containment:s==="required"?"required":void 0,...l});return sd(p,u=>this.generateScopesInSearchScope(i,u))}};var cd=class extends Oe{constructor(r,n){super();this.scopeType={type:"line"};this.iterationScopeType={type:"paragraph"};this.isHierarchical=!1;this.includeAdjacentInEvery=!0}*generateScopeCandidates(r,n,i){if(i==="forward")for(let o=n.line;o<r.document.lineCount;o++)yield jM(r,o);else for(let o=n.line;o>=0;o--)yield jM(r,o)}};function jM(t,e){let{range:r}=t.document.lineAt(e);return{editor:t,domain:r,getTargets:n=>[cv(t,n,r)]}}function cv(t,e,r){return new ur({editor:t,isReversed:e,contentRange:lv(t,r)})}function lv(t,e){let r=t.document.lineAt(e.start),n=t.document.lineAt(e.end);return new j(r.rangeTrimmed?.start??r.range.start,n.rangeTrimmed?.end??n.range.end)}function Tn(t,e,r,n){let i=e.document.offsetAt(r.start),o=e.document.getText(r),s=l=>new j(e.document.positionAt(i+l.index),e.document.positionAt(i+l.index+l[0].length));return t.lastIndex=0,n==="forward"?Bt(o.matchAll(t),s):Array.from(o.matchAll(t),s).reverse()}var ld=class extends Fr{constructor(){super(...arguments);this.scopeType={type:"identifier"};this.iterationScopeType={type:"line"};this.regex=Dr(this.languageId).identifierMatcher}generateScopesInSearchScope(r,{editor:n,domain:i}){return Bt(Tn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new Yt({editor:n,contentRange:o,isReversed:s})]}))}};function pd(t,e,r){let n=t.editor.document.getText(t.domain),i=e.editor.document.getText(e.domain);for(let o of r){let s=ea(o,n),l=ea(o,i);if(s&&!l)return!0;if(l&&!s)return!1}}var e8=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}\p{Z}\p{C}]/gu,t8=/[$]/g,r8=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}]/gu,ud=class extends Fr{constructor(){super(...arguments);this.scopeType={type:"character"};this.iterationScopeType={type:"token"}}get searchScopeType(){return{type:"line"}}generateScopesInSearchScope(r,{editor:n,domain:i}){return Bt(Tn(e8,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new $e({editor:n,contentRange:o,isReversed:s,textualType:"character"})]}))}isPreferredOver(r,n){let{identifierMatcher:i}=Dr(this.languageId);return pd(r,n,[i,t8,r8])}};var fd=class extends Fr{constructor(){super(...arguments);this.scopeType={type:"word"};this.iterationScopeType={type:"identifier"};this.wordTokenizer=new Cs(this.languageId)}getScopesInSearchScope({editor:r,domain:n}){let{document:i}=r,o=i.offsetAt(n.start),l=this.wordTokenizer.splitIdentifier(i.getText(n)).map(p=>new j(i.positionAt(o+p.index),i.positionAt(o+p.index+p.text.length)));return l.map((p,u)=>({editor:r,domain:p,getTargets:m=>{let d=u>0?l[u-1]:null,g=u+1<l.length?l[u+1]:null;return[n8(m,r,d,p,g)]}}))}generateScopesInSearchScope(r,n){let i=this.getScopesInSearchScope(n);return r==="backward"&&i.reverse(),i}};function n8(t,e,r,n,i){let o=r!=null&&n.start.isAfter(r.end)?new j(r.end,n.start):void 0,s=i!=null&&i.start.isAfter(n.end)?new j(n.end,i.start):void 0,p=o!=null||s!=null?e.document.getText(o??s):"";return new Om({editor:e,isReversed:t,contentRange:n,insertionDelimiter:p,leadingDelimiterRange:o,trailingDelimiterRange:s})}var i8=/[$]/g,md=class extends Fr{constructor(){super(...arguments);this.scopeType={type:"token"};this.iterationScopeType={type:"line"};this.regex=Dr(this.languageId).tokenMatcher}generateScopesInSearchScope(r,{editor:n,domain:i}){return Bt(Tn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new Yt({editor:n,contentRange:o,isReversed:s})]}))}isPreferredOver(r,n){let{identifierMatcher:i}=Dr(this.languageId);return pd(r,n,[i,i8])}};var dd=class extends Oe{constructor(r,n){super();this.scopeType={type:"document"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i){let o=r.document.range;yield{editor:r,domain:o,getTargets:s=>[new Im({editor:r,isReversed:s,contentRange:o})]}}};function hd(t,e,r,n,i){if(!t&&n!=null&&i!=null&&qS(e,n)>qS(e,i))return r.union(n)}function Us(t){return t.containment==null&&t.skipAncestorScopes}function qM(t,e,r,{containment:n,distalPosition:i,allowAdjacentScopes:o}){let{start:s,end:l}=o8(t.offsetAt(e),t.offsetAt(i),r,n,o);return{start:t.positionAt(s),end:t.positionAt(l)}}function o8(t,e,r,n,i){let o=i?1:0;if(n==="required")return r==="forward"?{start:t-o,end:t+1}:{start:t-1,end:t+o};let s=n==="disallowed"?1:-o;return r==="forward"?{start:t+s,end:e+o}:{start:e-o,end:t-s}}function zM(t,e,r){let n=[],i=[];for(let o of t)i.length===0||e(i[i.length-1],o)?i.push(o):(n.push(r(i)),i=[o]);return i.length>0&&n.push(r(i)),n}var Hs=class extends Oe{constructor(r){super();this.query=r}*generateScopeCandidates(r,n,i,o){let{document:s}=r,l=Us(o),{start:p,end:u}=qM(s,n,i,o),m=this.query.matches(s,p,u).map(d=>this.matchToScope(r,d,l)).filter(d=>d!=null).sort((d,g)=>Kr(i,n,d,g));yield*zM(m,(d,g)=>d.domain.isRangeEqual(g.domain),d=>d.length===1?d[0]:{...d[0],getTargets(g){let x=rl(d.flatMap(b=>b.getTargets(g)),(b,v)=>b.isEqual(v));if(x.length>1&&!d.every(b=>b.allowMultiple)){let b="Please use #allow-multiple! predicate in your query to allow multiple matches for this scope type";if(lt(k().messages,"BaseTreeSitterScopeHandler.allow-multiple",b),k().runMode==="test")throw Error(b)}return x}})}};function pv(t,e,r,n){return n?Vs(t,`${e}.${r}`,`_.${r}`):Vs(t,`${e}.${r}`)??(Vs(t,e)!=null?Vs(t,`_.${r}`):void 0)}function vo(t,e,r,n){return pv(t,e,r,n)?.range}function Vs(t,...e){return t.captures.find(r=>e.some(n=>r.name===n))}var gd=class extends Hs{constructor(r,n){super(r);this.iterateeScopeType=n;this.isHierarchical=!0;this.scopeType=void 0}get iterationScopeType(){throw Error("Not implemented")}matchToScope(r,n,i){let o=this.iterateeScopeType.type,s=pv(n,o,"iteration",!1);if(s==null)return;let{range:l,allowMultiple:p}=s,u=vo(n,o,"iteration.domain",!1)??l;return{editor:r,domain:u,allowMultiple:p,getTargets:m=>[new $e({editor:r,isReversed:m,contentRange:l})]}}};var yd=class extends Hs{constructor(r,n){super(r);this.scopeType=n;this.isHierarchical=!0}get iterationScopeType(){return{type:"custom",scopeHandler:new gd(this.query,this.scopeType)}}matchToScope(r,n,i){let o=this.scopeType.type,s=Vs(n,o);if(s==null)return;let{range:l,allowMultiple:p,insertionDelimiter:u}=s,m=vo(n,o,"domain",!0)??l,d=vo(n,o,"prefix",!0)?.with(void 0,l.start),g=vo(n,o,"leading",!0)?.with(void 0,d?.start??l.start),x=vo(n,o,"trailing",!0)?.with(l.end),b=vo(n,o,"removal",!0);return b==null&&(o==="collectionItem"||o==="argumentOrParameter")&&(b=hd(i,r,l,g,x)),{editor:r,domain:m,allowMultiple:p,getTargets:v=>[new To({scopeTypeType:o,editor:r,isReversed:v,contentRange:l,prefixRange:d,removalRange:b,leadingDelimiterRange:g,trailingDelimiterRange:x,insertionDelimiter:u})]}}};function GM(t){return t.flatMap((e,r)=>{let{value:n,done:i}=e.next();return i?[]:[{iterator:e,value:n,index:r}]})}function KM(t,e){return t.flatMap(r=>{let{iterator:n,index:i}=r,{value:o}=r,s=!1;for(;!s&&!e(o);)({value:o,done:s}=n.next());return s?[]:[{iterator:n,value:o,index:i}]})}var ri=class t extends Oe{constructor(r,n){super();this.scopeHandlers=r;this.getIterationScopeHandler=n;this.isHierarchical=!0;this.scopeType=void 0}static create(r,n,i){let o=n.scopeTypes.map(s=>r.create(s,i));return this.createFromScopeHandlers(r,i,o)}static createFromScopeHandlers(r,n,i){let o=()=>new t(i.map(s=>r.create(s.iterationScopeType,n)),()=>{throw new Error("Not implemented")});return new t(i,o)}get iterationScopeType(){return this.iterationScopeHandler==null&&(this.iterationScopeHandler=this.getIterationScopeHandler()),{type:"custom",scopeHandler:this.iterationScopeHandler}}*generateScopeCandidates(r,n,i,o){if(this.iterationScopeHandler?.lastYieldedIndex!=null){let p=this.iterationScopeHandler.lastYieldedIndex;yield*this.scopeHandlers[p].generateScopes(r,n,i,o);return}let s=this.scopeHandlers.map(p=>p.generateScopes(r,n,i,o)[Symbol.iterator]()),l=GM(s);for(;l.length>0;){l.sort((m,d)=>Kr(i,n,m.value,d.value));let p=l[0],u=p.value;this.lastYieldedIndex=p.index,yield u,l=KM(l,m=>Kr(i,n,u,m)<0)}}};var xd=class extends Oe{constructor(r,n){super();this.scopeType={type:"paragraph"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i){let{document:o}=r,s=i==="forward"?1:-1,l=i==="forward"?o.lineCount:-1,p=a8(o,n,i),u=r.document.lineAt(n);for(let m=n.line+s;m!==l;m+=s){let d=r.document.lineAt(m);d.isEmptyOrWhitespace?p!=null&&(yield QM(r,p.range.union(u.range)),p=void 0):p==null&&(p=d),u=d}p!=null&&(yield QM(r,p.range.union(u.range)))}};function a8(t,e,r){let n=r==="forward"?-1:1,i=r==="forward"?-1:t.lineCount,o=t.lineAt(e);if(!o.isEmptyOrWhitespace){for(let s=e.line+n;s!==i;s+=n){let l=t.lineAt(s);if(l.isEmptyOrWhitespace)break;o=l}return o}}function QM(t,e){return{editor:t,domain:e,getTargets:r=>[new go({editor:t,isReversed:r,contentRange:lv(t,e)})]}}function Ol(t,e){return e.length>1?e.indexOf(t.slice(-1))>-1:t.slice(-1)===e}function ZM(t,e){return t.slice(t.length-e.length)===e}var uv,c8=["al","adj","assn","Ave","BSc","MSc","Cell","Ch","Co","cc","Corp","Dem","Dept","ed","eg","Eq","Eqs","est","est","etc","Ex","ext","Fig","fig","Figs","figs","i.e","ie","Inc","inc","Jan","Feb","Mar","Apr","Jun","Jul","Aug","Sep","Sept","Oct","Nov","Dec","jr","mi","Miss","Mrs","Mr","Ms","Mol","mt","mts","no","Nos","PhD","MD","BA","MA","MM","pl","pop","pp","Prof","Dr","pt","Ref","Refs","Rep","repr","rev","Sec","Secs","Sgt","Col","Gen","Rep","Sen","Gov","Lt","Maj","Capt","St","Sr","sr","Jr","jr","Rev","Sun","Mon","Tu","Tue","Tues","Wed","Th","Thu","Thur","Thurs","Fri","Sat","trans","Univ","Viz","Vol","vs","v"];function YM(t){t?uv=t:uv=c8}function fv(t){return/^[A-Z][a-z].*/.test(t)||Td(t)}function XM(t){return fv(t)||/``|"|'/.test(t.substring(0,2))}function JM(t){let e=t.replace(/[-'`~!@#$%^&*()_|+=?;:'",.<>{}[\]\\/]/gi,"");return~uv.indexOf(e)}function eD(t,e){return(t==="a.m."||t==="p.m.")&&e.replace(/\W+/g,"").slice(-3).toLowerCase()==="day"}function mv(t){let e=t.replace(/[()[]{}]/g,"").match(/(.\.)*/);return e&&e[0].length>0}function tD(t){return t.length<=3?!0:fv(t)}function dv(t,e){return e.length>0?t<5&&e[0].length<6&&fv(e[0])?!0:e.filter(function(n){return/[A-Z]/.test(n.charAt(0))}).length>=3:!1}function Td(t,e){return e&&(t=t.slice(e-1,e+2)),!isNaN(t)}function rD(t){return t.match(/^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/)}function nD(t){return t.match(/[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/)}function iD(t){let e=0;return((e=t.indexOf("."))>-1||(e=t.indexOf("!"))>-1||(e=t.indexOf("?"))>-1)&&t.charAt(e+1).match(/[a-zA-Z].*/)?[t.slice(0,e),t.slice(e+1)]:!1}function oD(t){return t==="."||t==="!"||t==="?"}var sD=" @~@ ",aD=sD.trim(),p8=new RegExp("\\S",""),u8=new RegExp("\\n+|[-#=_+*]{4,}","g"),f8=new RegExp("\\S+|\\n","g"),m8={newlineBoundaries:!1,preserveWhitespace:!1,abbreviations:void 0};function cD(t,e){if(!t)return[];if(!p8.test(t))return[];let r={...m8,...e};YM(r.abbreviations),r.newlineBoundaries&&(t=t.replace(u8,sD));let n,i;r.preserveWhitespace?(i=t.split(/(<br\s*\/?>|\S+|\n+)/),n=i.filter(function(d,g){return g%2})):n=t.trim().match(f8)??[];let o=0,s=0,l=[],p=[],u=[];if(!n||!n.length)return[];for(let d=0,g=n.length;d<g;d++){if(o++,u.push(n[d]),~n[d].indexOf(",")&&(o=0),oD(n[d])||Ol(n[d],"?!")||n[d]===aD){r.newlineBoundaries&&n[d]===aD&&u.pop(),p.push(u),o=0,u=[];continue}if((Ol(n[d],'"')||Ol(n[d],"\u201D"))&&(n[d]=n[d].slice(0,-1)),Ol(n[d],".")){if(d+1<g){if(n[d].length===2&&isNaN(n[d].charAt(0))||JM(n[d]))continue;if(XM(n[d+1])){if(eD(n[d],n[d+1])||dv(o,n.slice(d,6))||Td(n[d+1])&&tD(n[d]))continue}else if(ZM(n[d],"..")||mv(n[d])||dv(o,n.slice(d,5)))continue}p.push(u),u=[],o=0;continue}(s=n[d].indexOf("."))>-1&&(Td(n[d],s)||mv(n[d])||nD(n[d])||rD(n[d]))||(l=iD(n[d]))&&(u.pop(),u.push(l[0]),p.push(u),u=[],o=0,u.push(l[1]))}return u.length&&p.push(u),p=p.filter(function(d){return d.length>0}),p.slice(1).reduce(function(d,g){let x=d[d.length-1];return x.length===1&&/^.{1,2}[.]$/.test(x[0])&&!/[.]/.test(g[0])?(d.pop(),d.push(x.concat(g)),d):(d.push(g),d)},[p[0]]).map(function(d,g){if(r.preserveWhitespace&&!r.newlineBoundaries){let x=d.length*2;return g===0&&(x+=1),i.splice(0,x).join("")}return d.join(" ")})}var d8=/\S*\p{L}/u,lD=/(\r?\n[^\p{L}]*\r?\n)|(?<=[.!?])(\s*\r?\n)/gu,h8={newlineBoundaries:!1,preserveWhitespace:!0},Sd=class{*segment(e){let r=cD(e,h8),n=0;for(let i of r){let o=i.split(lD).filter(s=>s!=null);for(let s of o){if(!y8(s)){let l=g8(s,n);l!=null&&(yield l)}n+=s.length}}}};function g8(t,e){let r=Bk(d8,t);if(r==null)return;let n=r.index;return n!==0&&(e+=n,t=t.slice(n)),{text:t.trimEnd(),index:e}}function y8(t){return ea(lD,t)}var vd=class extends Fr{constructor(){super(...arguments);this.scopeType={type:"sentence"};this.iterationScopeType={type:"paragraph"};this.segmenter=new Sd}generateScopesInSearchScope(r,{editor:n,domain:i}){let o=n.document.offsetAt(i.start),s=n.document.getText(i),l=u=>{let m=new j(n.document.positionAt(o+u.index),n.document.positionAt(o+u.index+u.text.length));return{editor:n,domain:m,getTargets:d=>[new Yt({editor:n,contentRange:m,isReversed:d})]}},p=this.segmenter.segment(s);return r==="forward"?Bt(p,l):Array.from(p,l).reverse()}};var Bs=class extends Fr{constructor(){super(...arguments);this.iterationScopeType={type:"line"}}generateScopesInSearchScope(r,{editor:n,domain:i}){return Bt(Tn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new Yt({editor:n,contentRange:o,isReversed:s})]}))}},bd=class extends Bs{constructor(){super(...arguments);this.regex=/\S+/g}},wd=class extends Bs{constructor(r,n,i){super(r,n,i);this.scopeType=n;this.regex=/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/g}},_d=class extends Bs{constructor(r,n,i){super(r,n,i);this.scopeType=n}get regex(){return new RegExp(this.scopeType.regex,this.scopeType.flags??"gu")}},Ed=class extends Bs{constructor(r,n,i){super(r,n,i);this.scopeType=n}get regex(){return new RegExp(jr(this.scopeType.character),"gui")}};var Rd=class extends Oe{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.languageId=n;this.targetScopeType=i;this.isHierarchical=!0;this.targetScopeHandler=this.scopeHandlerFactory.create(this.targetScopeType,this.languageId),this.surroundingPairInteriorScopeHandler=this.scopeHandlerFactory.create({type:"surroundingPairInterior",delimiter:"any"},this.languageId)}get iterationScopeType(){switch(this.targetScopeHandler.iterationScopeType.type){case"custom":case"fallback":case"conditional":throw Error(`Iteration scope type can't be '${this.targetScopeHandler.iterationScopeType.type}' for BoundedBaseScopeHandler`)}return{type:"oneOf",scopeTypes:[this.targetScopeHandler.iterationScopeType,{type:"surroundingPairInterior",delimiter:"any"}]}}*generateScopeCandidates(r,n,i,o){let s=this.targetScopeHandler.generateScopes(r,n,i,{...o,containment:o.containment!=="disallowed"?o.containment:void 0}),l=Array.from(this.surroundingPairInteriorScopeHandler.generateScopes(r,n,i,{...o,containment:Us(o)?"required":o.containment}));for(let p of s){let u=[];for(let m of l){let d=p.domain.intersection(m.domain);d!=null&&!d.isEmpty&&u.push({editor:r,domain:d,getTargets:g=>[this.getTargets(pD(p,g),pD(m,g))]})}u.push(p),u.sort((m,d)=>Kr(i,n,m,d)),yield*u}}};function pD(t,e){let r=t.getTargets(e);if(r.length!==1)throw Error(`Expected one target but got ${r.length}`);return r[0]}var kd=class extends Rd{constructor(r,n,i){super(r,i,{type:"nonWhitespaceSequence"});this.scopeType={type:"boundedNonWhitespaceSequence"}}getTargets(r,n){let i=r.contentRange.intersection(n.contentRange);if(i==null||i.isEmpty)throw Error("Expected non empty intersection");return new Yt({editor:r.editor,isReversed:r.isReversed,contentRange:i})}},Pd=class extends Rd{constructor(r,n,i){super(r,i,{type:"paragraph"});this.scopeType={type:"boundedParagraph"}}getTargets(r,n){if(!(r instanceof go))throw Error("Expected ParagraphTarget");return new Vm({editor:r.editor,isReversed:r.isReversed,paragraphTarget:r,containingInterior:n})}};var ni=class{constructor(e){this.items=e;this.index=0}add(e){this.items.push(e)}contains(e){return this.advance(e)}getContaining(e){if(this.advance(e))return this.items[this.index]}advance(e){for(;this.index<this.items.length;){let r=this.items[this.index].range;if(r.contains(e))return!0;if(e.end.isBeforeOrEqual(r.start))return!1;this.index++}return!1}};var Ws=class{constructor(e){this.children=x8(e)}getSmallestContaining(e){return this.children.getContaining(e)?.getSmallestContaining(e)}};function x8(t){let e=[],r=[];for(let n of t){let i=new hv(n);for(;r.length>0&&!r[r.length-1].range.contains(n.range);)r.pop();let o=r[r.length-1];o!=null?o.children.add(i):e.push(i),r.push(i)}return new ni(e)}var hv=class{constructor(e){this.item=e;this.children=new ni([])}get range(){return this.item.range}getSmallestContaining(e){return this.children.getContaining(e)?.getSmallestContaining(e)??this.item}};var T8=",",gv=new RegExp(T8,"g");function uD(t){let e=t.getText();return mn(e,gv,r=>new j(t.positionAt(r.index),t.positionAt(r.index+r[0].length)))}var fD={type:"fallback",scopeTypes:[{type:"surroundingPairInterior",delimiter:"collectionBoundary"},{type:"conditional",scopeType:{type:"line"},predicate:t=>{let e=t.editor.document.getText(t.domain);return ea(gv,e)}}]};function yv(t,e,r,n,i,o){let s=i!=null?new j(i.end,n.start):void 0,l=o!=null?new j(n.end,o.start):void 0,p=hd(t,e,n,s,l),u=r.isSingleLine?", ":`,
`;return{editor:e,domain:n,getTargets(m){return[new To({scopeTypeType:"collectionItem",editor:e,isReversed:m,contentRange:n,insertionDelimiter:u,leadingDelimiterRange:s,trailingDelimiterRange:l,removalRange:p})]}}}function xv(t,e,r,n){let i=t.create({type:"surroundingPairInterior",delimiter:n},e);return Array.from(i.generateScopes(r,new fe(0,0),"forward",{containment:void 0,skipAncestorScopes:!1,includeDescendantScopes:!0}),o=>({range:o.domain}))}var Ad=class extends Oe{constructor(r,n){super();this.scopeHandlerFactory=r;this.languageId=n;this.scopeType={type:"collectionItem"};this.isHierarchical=!0}get iterationScopeType(){return fD}*generateScopeCandidates(r,n,i,o){let s=Us(o),l=uD(r.document),p=xv(this.scopeHandlerFactory,this.languageId,r,"collectionBoundary"),u=new Ws(p),m=xv(this.scopeHandlerFactory,this.languageId,r,"string"),d=new ni(m),g=[],x=new Set,b=[];for(let v of l){if(d.contains(v))continue;let I;for(;b.length>0;){let Z=b[b.length-1];if(Z.iterationRange.contains(v)){I=Z;break}this.addScopes(g,Z),b.pop()}let F=u.getSmallestContaining(v)?.range,V=F??r.document.lineAt(v.start.line).range;if(I!=null&&I.iterationRange.isRangeEqual(V)){I.delimiters.push(v);continue}F!=null&&x.add(F),b.push({editor:r,isEveryScope:s,iterationRange:V,delimiters:[v]})}for(let v of b)this.addScopes(g,v);for(let v of p)if(!x.has(v.range)&&!v.range.isEmpty){let I=ua(r,v.range);I.isEmpty||g.push(yv(s,r,v.range,I))}g.sort((v,I)=>Kr(i,n,v,I)),yield*g}addScopes(r,n){let{editor:i,iterationRange:o,isEveryScope:s,delimiters:l}=n;if(l.length===0)return;let p=[];for(let d=0;d<l.length;++d){let g=l[d],x=l[d-1]?.end??o.start;p.push(new j(x,g.start))}let u=l[l.length-1];p.push(new j(u.end,o.end));let m=p.map(d=>ua(i,d));for(let d=0;d<m.length;++d)d===m.length-1&&i.document.getText(m[d]).trim()===""||r.push(yv(s,i,o,m[d],m[d-1],m[d+1]))}};var Md=class extends Oe{constructor(r,n,i){super();this.scopeType={type:"collectionItem"};this.isHierarchical=!0;this.scopeHandler=(()=>{let o=new Ad(r,i),s=n.get(i)?.getScopeHandler(this.scopeType);return s==null?o:ri.createFromScopeHandlers(r,i,[s,o])})()}get iterationScopeType(){return this.scopeHandler.iterationScopeType}generateScopeCandidates(r,n,i,o){return this.scopeHandler.generateScopes(r,n,i,o)}};var Dd=class extends Oe{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.conditionalScopeType=n;this.languageId=i;this.scopeType=void 0;this.isHierarchical=!0}get iterationScopeType(){throw new dt("Iteration scope for ConditionalScopeHandler")}generateScopeCandidates(r,n,i,o){let s=this.scopeHandlerFactory.create(this.conditionalScopeType.scopeType,this.languageId);return od(s.generateScopes(r,n,i,o),this.conditionalScopeType.predicate)}};var $s=class t extends Oe{constructor(r){super();this.scopeHandlers=r;this.scopeType=void 0;this.isHierarchical=!0}static create(r,n,i){let o=n.scopeTypes.map(s=>r.create(s,i));return this.createFromScopeHandlers(o)}static createFromScopeHandlers(r){return new t(r)}get iterationScopeType(){throw new dt("Iteration scope for FallbackScopeHandler")}*generateScopeCandidates(r,n,i,o){for(let s of this.scopeHandlers)yield*s.generateScopes(r,n,i,o)}};var Fd=class extends Oe{constructor(){super();this.scopeType={type:"notebookCell"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i,o){let s=S8(r,n,i,o);for(let l of s)yield b8(l)}};function S8(t,e,r,n){let i=v8(t);if(i==null)return[];let{notebook:o,cell:s}=i;return n.containment==="required"?[s]:n.containment==="disallowed"||n.containment==="disallowedIfStrict"?r==="forward"?o.cells.slice(s.index+1):o.cells.slice(0,s.index).reverse():n.distalPosition!=null&&new j(e,n.distalPosition).isRangeEqual(t.document.range)?o.cells:r==="forward"?o.cells.slice(s.index):o.cells.slice(0,s.index+1).reverse()}function v8(t){let e=t.document.uri.toString();for(let r of k().visibleNotebookEditors)for(let n of r.cells)if(n.document.uri.toString()===e)return{notebook:r,cell:n}}function b8(t){let e=w8(t),r=e.document.range;return{editor:e,domain:r,getTargets:n=>[new Nm({editor:e,isReversed:n,contentRange:r})]}}function w8(t){let e=t.document.uri.toString();for(let r of k().visibleTextEditors)if(r.document.uri.toString()===e)return r;throw new Error("Editor not found notebook cell")}var Id=class extends Oe{constructor(r,n,i,o){super();this.scopeType={type:"notebookCell"};this.isHierarchical=!1;this.scopeHandler=(()=>{let s=new Fd,l=n.get(o)?.getScopeHandler(this.scopeType);return l==null?s:ri.createFromScopeHandlers(r,o,[l,s])})()}get iterationScopeType(){return this.scopeHandler.iterationScopeType}generateScopeCandidates(r,n,i,o){return this.scopeHandler.generateScopes(r,n,i,o)}};var Cd=class extends Oe{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.scopeType=n;this.languageId=i;this.isHierarchical=!0;this.surroundingPairScopeHandler=this.scopeHandlerFactory.create({type:"surroundingPair",delimiter:this.scopeType.delimiter,requireStrongContainment:!0},this.languageId)}get iterationScopeType(){return this.surroundingPairScopeHandler.iterationScopeType}*generateScopeCandidates(r,n,i,o){let s=this.surroundingPairScopeHandler.generateScopes(r,n,i,o);for(let l of s)yield{editor:r,domain:l.domain,getTargets(p){return l.getTargets(p).flatMap(u=>u.getInterior())}}}};function mD(t,{openingDelimiterRange:e,closingDelimiterRange:r},n){let i=e.union(r),o=new j(e.end,r.start);return{editor:t,domain:n?o:i,getTargets:s=>[new Lm({editor:t,isReversed:s,contentRange:i,interiorRange:o,boundary:[e,r]})]}}function dD(t){let e=Jo(t.map(({text:r})=>r)).map(jr).join("|");return new RegExp(`(?<!\\\\)(${e})`,"gu")}function gD(t,e,r){if(r.length===0)return[];let n=t?.getCapturesMap(e)??{},i=new ni(Tv(n.disqualifyDelimiter)),o=new ni(Tv(n.pairDelimiter)),s=new Ws(Tv(n.textFragment)),l=Object.fromEntries(r.map(m=>[m.text,m])),p=BT(e.getText(),dD(r)),u=[];for(let m of p){let d=m[0],g=new j(e.positionAt(m.index),e.positionAt(m.index+d.length));hD(i.getContaining(g))==null&&u.push({delimiterInfo:l[d],textFragmentRange:s.getSmallestContaining(g)?.range,range:hD(o.getContaining(g))?.range??g})}return u}function hD(t){return t!=null&&!t.hasError()?t:void 0}function Tv(t){return t==null?[]:(t.sort((e,r)=>e.range.start.compareTo(r.range.start)),t)}var Nd=Object.freeze({angleBrackets:[["</","<"],[">","/>"]],curlyBrackets:[["{","${"],"}"],tripleBacktickQuotes:[[],[]],tripleDoubleQuotes:[[],[]],tripleSingleQuotes:[[],[]],doubleQuotes:['"','"',{isSingleLine:!0}],escapedDoubleQuotes:['\\"','\\"',{isSingleLine:!0}],escapedParentheses:["\\(","\\)"],escapedSquareBrackets:["\\[","\\]"],escapedSingleQuotes:["\\'","\\'",{isSingleLine:!0}],parentheses:[["(","$("],")"],backtickQuotes:["`","`"],singleQuotes:["'","'",{isSingleLine:!0}],squareBrackets:["[","]"]}),yD={nix:{singleQuotes:["''","''"]},lua:{doubleQuotes:[['"',"[["],['"',"]]"]]},python:{tripleSingleQuotes:["'''","'''"],tripleDoubleQuotes:['"""','"""']},markdown:{tripleBacktickQuotes:["```","```"]},ruby:{tripleDoubleQuotes:["%Q(",")"]}},lRe=Object.fromEntries(Object.values(Nd)),xD={any:Di(Nd),string:["tripleDoubleQuotes","tripleSingleQuotes","tripleBacktickQuotes","doubleQuotes","singleQuotes","backtickQuotes"],collectionBoundary:["parentheses","squareBrackets","curlyBrackets","angleBrackets"]};function TD(t){return t!=null&&t in yD?{...Nd,...yD[t]}:Nd}function SD(t,e){let r=xD[t]??[t];return _8(e,r)}function _8(t,e){let r=TD(t);return e.flatMap(n=>{let[i,o,s]=r[n],{isSingleLine:l=!1}=s??{},p=yl(i)?[i]:i,u=yl(o)?[o]:o;return Jo(tl(p,u)).map(d=>{let g=p.includes(d),x=u.includes(d);return{text:d,side:g&&!x?"left":!g&&x?"right":"unknown",delimiterName:n,isSingleLine:l}})})}function vD(t){let e=[],r=[];for(let n of t){let{delimiterInfo:{delimiterName:i,side:o,isSingleLine:s},textFragmentRange:l,range:p}=n;if(o==="left")r.push(n);else{let u=Xo(r,d=>d.delimiterInfo.delimiterName===i&&E8(d.textFragmentRange,l)&&R8(s,d.range,p));if(u===-1){o==="unknown"&&r.push(n);continue}let m=r[u];r.length=u,e.push({delimiterName:i,openingDelimiterRange:m.range,closingDelimiterRange:p})}}return e}function E8(t,e){return t==null||e==null?t===e:t.isRangeEqual(e)}function R8(t,e,r){return!t||e.start.line===r.start.line}var Od=class extends Oe{constructor(r,n,i){super();this.languageDefinitions=r;this.scopeType=n;this.languageId=i;this.iterationScopeType={type:"line"};this.isHierarchical=!0}*generateScopeCandidates(r,n,i,o){if(this.scopeType.forceDirection!=null){lt(k().messages,"deprecatedForceDirection","forceDirection is deprecated. If this is important to you please file an issue on the cursorless repo.");return}let s=gD(this.languageDefinitions.get(this.languageId),r.document,SD(this.scopeType.delimiter,this.languageId)),l=vD(s);l=k8(i,o,n,l),yield*l.map(p=>mD(r,p,this.scopeType.requireStrongContainment??!1)).sort((p,u)=>Kr(i,n,p,u))}};function k8(t,e,r,n){return t==="forward"&&e.containment==="required"&&e.allowAdjacentScopes&&e.skipAncestorScopes?n.filter((i,o)=>!(i.closingDelimiterRange.end.isEqual(r)&&n[o+1]?.closingDelimiterRange.start.isEqual(r))):n}var Ld=class extends Oe{constructor(r,n,i,o){super();this.scopeHandlerFactory=r;this.languageDefinitions=n;this.scopeType=i;this.languageId=o;this.isHierarchical=!0}get iterationScopeType(){throw new dt("Iteration scope for InteriorScopeHandler")}*generateScopeCandidates(r,n,i,o){let s=new j(n,o.distalPosition),l=this.getScopeHandler();if(l==null)return;let p=l.generateScopes(r,n,i,o);for(let u of p)this.shouldYield(s,u)&&(yield P8(u))}getScopeHandler(){let r=this.languageDefinitions.get(this.languageId)?.getScopeHandler(this.scopeType),n=this.scopeHandlerFactory.create({type:"surroundingPair",delimiter:"any"},this.languageId);return this.scopeType.explicitScopeType?r==null?n:$s.createFromScopeHandlers([r,n]):r==null?n:ri.createFromScopeHandlers(this.scopeHandlerFactory,this.languageId,[r,n])}shouldYield(r,n){return!this.scopeType.explicitScopeType||r.contains(n.domain)}};function P8(t){return{editor:t.editor,domain:t.domain,getTargets(e){return t.getTargets(e).flatMap(A8)}}}function A8(t){let e=t.getInterior();return e??[new Fs({editor:t.editor,isReversed:t.isReversed,fullInteriorRange:t.contentRange})]}var js=class{constructor(e){this.languageDefinitions=e;this.maybeCreate=this.maybeCreate.bind(this),this.create=this.create.bind(this)}maybeCreate(e,r){switch(e.type){case"character":return new ud(this,e,r);case"word":return new fd(this,e,r);case"token":return new md(this,e,r);case"identifier":return new ld(this,e,r);case"line":return new cd(e,r);case"sentence":return new vd(this,e,r);case"paragraph":return new xd(e,r);case"boundedParagraph":return new Pd(this,e,r);case"document":return new dd(e,r);case"nonWhitespaceSequence":return new bd(this,e,r);case"boundedNonWhitespaceSequence":return new kd(this,e,r);case"url":return new wd(this,e,r);case"customRegex":return new _d(this,e,r);case"glyph":return new Ed(this,e,r);case"collectionItem":return new Md(this,this.languageDefinitions,r);case"surroundingPair":return new Od(this.languageDefinitions,e,r);case"surroundingPairInterior":return new Cd(this,e,r);case"notebookCell":return new Id(this,this.languageDefinitions,e,r);case"interior":return new Ld(this,this.languageDefinitions,e,r);case"custom":return e.scopeHandler;case"oneOf":return ri.create(this,e,r);case"fallback":return $s.create(this,e,r);case"conditional":return new Dd(this,e,r);case"instance":throw Error("Unexpected scope type 'instance'");default:return this.languageDefinitions.get(r)?.getScopeHandler(e)}}create(e,r){let n=this.maybeCreate(e,r);if(n==null)throw new Error(`Couldn't create scope handler for '${e.type}'`);return n}};function Qr(t,e){return new j(t.row,t.column,e.row,e.column)}function Sv(t){return new fe(t.row,t.column)}function bD(t){return new j(t.startPosition.row,t.startPosition.column,t.endPosition.row,t.endPosition.column)}function wD(t,e){return new Ee(t.startPosition.row,t.startPosition.column,e.endPosition.row,e.endPosition.column)}function bo(t,e){return{selection:new Ee(new fe(e.startPosition.row,e.startPosition.column),new fe(e.endPosition.row,e.endPosition.column)),context:{}}}function M8(t,e,r){let n=e.startIndex<r.startIndex,i=n?e:r,o=n?r:e;return{selection:new Ee(new fe(i.startPosition.row,i.startPosition.column),new fe(o.endPosition.row,o.endPosition.column)),context:{}}}function _D(){return I8(t=>t.type===","||t.type==="("||t.type===")"||t.type==="["||t.type==="]"||t.type===">"||t.type==="<"||t.type==="}"||t.type==="{",", ")}function ED(t,e){let r=e.startIndex,n=e.endIndex;return e.text.startsWith("(")&&e.text.endsWith(")")?(r+=1,n-=1):e.text.endsWith(";")&&(n-=1),{selection:new Ee(t.document.positionAt(r),t.document.positionAt(n)),context:{}}}function RD(...t){return function(e,r){let n=r.previousSibling,i=n?.previousSibling,o;return n&&(t.includes(n.type)?i?o=Qr(i.endPosition,r.startPosition):o=Qr(n.startPosition,r.startPosition):o=Qr(n.endPosition,r.startPosition)),{...bo(e,r),context:{leadingDelimiterRange:o}}}}function qs(t=[],e=[],{includeUnnamedChildren:r=!1}={}){return function(n,i){if(t.length>0&&e.length>0)throw new Error("Cannot have both exclusions and inclusions.");let o=r?i.children:i.namedChildren,s=new Set(t),l=new Set(e);return o=o.filter(p=>s.size>0?!s.has(p.type):l.size>0?l.has(p.type):!0),M8(n,o[0],o[o.length-1])}}function kD(...t){return function(e,r){let n=r.nextSibling,i=n?.nextSibling,o;return n&&(t.includes(n.type)?i?o=Qr(r.endPosition,i.startPosition):o=Qr(r.endPosition,n.endPosition):o=Qr(r.endPosition,n.startPosition)),{...bo(e,r),context:{trailingDelimiterRange:o}}}}function D8(t,e){let r=t.nextSibling;for(;r!=null;){if(!e(r))return r;r=r.nextSibling}return r}function F8(t,e){let r=t.previousSibling;for(;r!=null;){if(!e(r))return r;r=r.previousSibling}return r}function I8(t,e,r=wr,n=wr){return(i,o)=>{let s,l,p=r(o),u=n(o),m=F8(p,t),d=D8(u,t);m!=null&&(s=Qr(m.endPosition,p.startPosition)),d!=null&&(l=Qr(u.endPosition,d.startPosition));let g=C8(i,s,l,e);return{selection:new Ee(new fe(p.startPosition.row,p.startPosition.column),new fe(u.endPosition.row,u.endPosition.column)),context:{containingListDelimiter:g,leadingDelimiterRange:s,trailingDelimiterRange:l}}}}function C8(t,e,r,n){let{document:i}=t,o=[r!=null?i.getText(r):n,e!=null?i.getText(e):n];return NT(o,"length")}function PD(t,e){if(t.length===1)return!0;let r=!1,n=t.filter(({name:p})=>p.endsWith(".start")).map(({range:{end:p}})=>p).sort((p,u)=>p.compareTo(u)).at(-1),i=t.filter(({name:p})=>p.endsWith(".end")).map(({range:{start:p}})=>p).sort((p,u)=>p.compareTo(u)).at(0);n!=null&&i!=null&&n.isAfter(i)&&(lt(e,"TreeSitterQuery.checkCaptures.badOrder",`Start capture must be before end capture: ${t}`),r=!0);let o=t.filter(({name:p})=>p.endsWith(".start")).length,s=t.filter(({name:p})=>p.endsWith(".end")).length,l=t.length-o-s;return l>0&&(o>0||s>0)&&(lt(e,"TreeSitterQuery.checkCaptures.mixRegularStartEnd",`Please do not mix regular captures and start/end captures: ${t.map(({name:p,range:u})=>p+" "+u.toString())}`),r=!0),l>1&&(lt(e,"TreeSitterQuery.checkCaptures.duplicate",`A capture with the same name may only appear once in a single pattern: ${t.map(({name:p,range:u})=>p+" "+u.toString())}`),r=!0),!r}function AD(t){let e=t;for(;e!=null;){if(e.hasError)return!0;e=e.parent}return!1}function vv(t){return t.replace(/(\.(start|end))?(\.(startOf|endOf))?$/,"")}var Le;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{let o={};for(let s of i)o[s]=s;return o},t.getValidEnumValues=i=>{let o=t.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),s={};for(let l of o)s[l]=i[l];return t.objectValues(s)},t.objectValues=i=>t.objectKeys(i).map(function(o){return i[o]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let o=[];for(let s in i)Object.prototype.hasOwnProperty.call(i,s)&&o.push(s);return o},t.find=(i,o)=>{for(let s of i)if(o(s))return s},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,o=" | "){return i.map(s=>typeof s=="string"?`'${s}'`:s).join(o)}t.joinValues=n,t.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(Le||(Le={}));var wv;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(wv||(wv={}));var te=Le.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),wo=t=>{switch(typeof t){case"undefined":return te.undefined;case"string":return te.string;case"number":return isNaN(t)?te.nan:te.number;case"boolean":return te.boolean;case"function":return te.function;case"bigint":return te.bigint;case"symbol":return te.symbol;case"object":return Array.isArray(t)?te.array:t===null?te.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?te.promise:typeof Map<"u"&&t instanceof Map?te.map:typeof Set<"u"&&t instanceof Set?te.set:typeof Date<"u"&&t instanceof Date?te.date:te.object;default:return te.unknown}},Q=Le.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),N8=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),Zr=class t extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let r=e||function(o){return o.message},n={_errors:[]},i=o=>{for(let s of o.issues)if(s.code==="invalid_union")s.unionErrors.map(i);else if(s.code==="invalid_return_type")i(s.returnTypeError);else if(s.code==="invalid_arguments")i(s.argumentsError);else if(s.path.length===0)n._errors.push(r(s));else{let l=n,p=0;for(;p<s.path.length;){let u=s.path[p];p===s.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(r(s))):l[u]=l[u]||{_errors:[]},l=l[u],p++}}};return i(this),n}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Le.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};Zr.create=t=>new Zr(t);var Ks=(t,e)=>{let r;switch(t.code){case Q.invalid_type:t.received===te.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case Q.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,Le.jsonStringifyReplacer)}`;break;case Q.unrecognized_keys:r=`Unrecognized key(s) in object: ${Le.joinValues(t.keys,", ")}`;break;case Q.invalid_union:r="Invalid input";break;case Q.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Le.joinValues(t.options)}`;break;case Q.invalid_enum_value:r=`Invalid enum value. Expected ${Le.joinValues(t.options)}, received '${t.received}'`;break;case Q.invalid_arguments:r="Invalid function arguments";break;case Q.invalid_return_type:r="Invalid function return type";break;case Q.invalid_date:r="Invalid date";break;case Q.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:Le.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case Q.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case Q.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case Q.custom:r="Invalid input";break;case Q.invalid_intersection_types:r="Intersection results could not be merged";break;case Q.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case Q.not_finite:r="Number must be finite";break;default:r=e.defaultError,Le.assertNever(t)}return{message:r}},FD=Ks;function O8(t){FD=t}function Ud(){return FD}var Hd=t=>{let{data:e,path:r,errorMaps:n,issueData:i}=t,o=[...r,...i.path||[]],s={...i,path:o};if(i.message!==void 0)return{...i,path:o,message:i.message};let l="",p=n.filter(u=>!!u).slice().reverse();for(let u of p)l=u(s,{data:e,defaultError:l}).message;return{...i,path:o,message:l}},L8=[];function ee(t,e){let r=Ud(),n=Hd({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===Ks?void 0:Ks].filter(i=>!!i)});t.common.issues.push(n)}var Xt=class t{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let i of r){if(i.status==="aborted")return xe;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let i of r){let o=await i.key,s=await i.value;n.push({key:o,value:s})}return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let i of r){let{key:o,value:s}=i;if(o.status==="aborted"||s.status==="aborted")return xe;o.status==="dirty"&&e.dirty(),s.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof s.value<"u"||i.alwaysSet)&&(n[o.value]=s.value)}return{status:e.value,value:n}}},xe=Object.freeze({status:"aborted"}),Gs=t=>({status:"dirty",value:t}),fr=t=>({status:"valid",value:t}),_v=t=>t.status==="aborted",Ev=t=>t.status==="dirty",Hl=t=>t.status==="valid",Vl=t=>typeof Promise<"u"&&t instanceof Promise;function Vd(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function ID(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}var pe;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(pe||(pe={}));var Ll,Ul,vn=class{constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},MD=(t,e)=>{if(Hl(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new Zr(t.common.issues);return this._error=r,this._error}}};function be(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(s,l)=>{var p,u;let{message:m}=t;return s.code==="invalid_enum_value"?{message:m??l.defaultError}:typeof l.data>"u"?{message:(p=m??n)!==null&&p!==void 0?p:l.defaultError}:s.code!=="invalid_type"?{message:l.defaultError}:{message:(u=m??r)!==null&&u!==void 0?u:l.defaultError}},description:i}}var we=class{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return wo(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:wo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Xt,ctx:{common:e.parent.common,data:e.data,parsedType:wo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(Vl(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;let i={common:{issues:[],async:(n=r?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:wo(e)},o=this._parseSync({data:e,path:i.path,parent:i});return MD(i,o)}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:wo(e)},i=this._parse({data:e,path:n.path,parent:n}),o=await(Vl(i)?i:Promise.resolve(i));return MD(n,o)}refine(e,r){let n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,o)=>{let s=e(i),l=()=>o.addIssue({code:Q.custom,...n(i)});return typeof Promise<"u"&&s instanceof Promise?s.then(p=>p?!0:(l(),!1)):s?!0:(l(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new Yr({schema:this,typeName:ge.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Sn.create(this,this._def)}nullable(){return oi.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Vi.create(this,this._def)}promise(){return Ro.create(this,this._def)}or(e){return Sa.create([this,e],this._def)}and(e){return va.create(this,e,this._def)}transform(e){return new Yr({...be(this._def),schema:this,typeName:ge.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new Ra({...be(this._def),innerType:this,defaultValue:r,typeName:ge.ZodDefault})}brand(){return new Bl({typeName:ge.ZodBranded,type:this,...be(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new ka({...be(this._def),innerType:this,catchValue:r,typeName:ge.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return Wl.create(this,e)}readonly(){return Pa.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},U8=/^c[^\s-]{8,}$/i,H8=/^[0-9a-z]+$/,V8=/^[0-9A-HJKMNP-TV-Z]{26}$/,B8=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,W8=/^[a-z0-9_-]{21}$/i,$8=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,j8=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,q8="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",bv,z8=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,G8=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,K8=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,CD="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Q8=new RegExp(`^${CD}$`);function ND(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function Z8(t){return new RegExp(`^${ND(t)}$`)}function OD(t){let e=`${CD}T${ND(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function Y8(t,e){return!!((e==="v4"||!e)&&z8.test(t)||(e==="v6"||!e)&&G8.test(t))}var _o=class t extends we{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==te.string){let o=this._getOrReturnCtx(e);return ee(o,{code:Q.invalid_type,expected:te.string,received:o.parsedType}),xe}let n=new Xt,i;for(let o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(i=this._getOrReturnCtx(e,i),ee(i,{code:Q.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="max")e.data.length>o.value&&(i=this._getOrReturnCtx(e,i),ee(i,{code:Q.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="length"){let s=e.data.length>o.value,l=e.data.length<o.value;(s||l)&&(i=this._getOrReturnCtx(e,i),s?ee(i,{code:Q.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):l&&ee(i,{code:Q.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),n.dirty())}else if(o.kind==="email")j8.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"email",code:Q.invalid_string,message:o.message}),n.dirty());else if(o.kind==="emoji")bv||(bv=new RegExp(q8,"u")),bv.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"emoji",code:Q.invalid_string,message:o.message}),n.dirty());else if(o.kind==="uuid")B8.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"uuid",code:Q.invalid_string,message:o.message}),n.dirty());else if(o.kind==="nanoid")W8.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"nanoid",code:Q.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid")U8.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"cuid",code:Q.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid2")H8.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"cuid2",code:Q.invalid_string,message:o.message}),n.dirty());else if(o.kind==="ulid")V8.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"ulid",code:Q.invalid_string,message:o.message}),n.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),ee(i,{validation:"url",code:Q.invalid_string,message:o.message}),n.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"regex",code:Q.invalid_string,message:o.message}),n.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(e,i),ee(i,{code:Q.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),n.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(i=this._getOrReturnCtx(e,i),ee(i,{code:Q.invalid_string,validation:{startsWith:o.value},message:o.message}),n.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(i=this._getOrReturnCtx(e,i),ee(i,{code:Q.invalid_string,validation:{endsWith:o.value},message:o.message}),n.dirty()):o.kind==="datetime"?OD(o).test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{code:Q.invalid_string,validation:"datetime",message:o.message}),n.dirty()):o.kind==="date"?Q8.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{code:Q.invalid_string,validation:"date",message:o.message}),n.dirty()):o.kind==="time"?Z8(o).test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{code:Q.invalid_string,validation:"time",message:o.message}),n.dirty()):o.kind==="duration"?$8.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"duration",code:Q.invalid_string,message:o.message}),n.dirty()):o.kind==="ip"?Y8(e.data,o.version)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"ip",code:Q.invalid_string,message:o.message}),n.dirty()):o.kind==="base64"?K8.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"base64",code:Q.invalid_string,message:o.message}),n.dirty()):Le.assertNever(o);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(i=>e.test(i),{validation:r,code:Q.invalid_string,...pe.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...pe.errToObj(e)})}url(e){return this._addCheck({kind:"url",...pe.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...pe.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...pe.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...pe.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...pe.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...pe.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...pe.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...pe.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...pe.errToObj(e)})}datetime(e){var r,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,local:(n=e?.local)!==null&&n!==void 0?n:!1,...pe.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...pe.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...pe.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...pe.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...pe.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...pe.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...pe.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...pe.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...pe.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...pe.errToObj(r)})}nonempty(e){return this.min(1,pe.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};_o.create=t=>{var e;return new _o({checks:[],typeName:ge.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...be(t)})};function X8(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,o=parseInt(t.toFixed(i).replace(".","")),s=parseInt(e.toFixed(i).replace(".",""));return o%s/Math.pow(10,i)}var da=class t extends we{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==te.number){let o=this._getOrReturnCtx(e);return ee(o,{code:Q.invalid_type,expected:te.number,received:o.parsedType}),xe}let n,i=new Xt;for(let o of this._def.checks)o.kind==="int"?Le.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),ee(n,{code:Q.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),ee(n,{code:Q.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),ee(n,{code:Q.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?X8(e.data,o.value)!==0&&(n=this._getOrReturnCtx(e,n),ee(n,{code:Q.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),ee(n,{code:Q.not_finite,message:o.message}),i.dirty()):Le.assertNever(o);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,pe.toString(r))}gt(e,r){return this.setLimit("min",e,!1,pe.toString(r))}lte(e,r){return this.setLimit("max",e,!0,pe.toString(r))}lt(e,r){return this.setLimit("max",e,!1,pe.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:pe.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:pe.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:pe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:pe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:pe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:pe.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:pe.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:pe.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:pe.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:pe.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Le.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};da.create=t=>new da({checks:[],typeName:ge.ZodNumber,coerce:t?.coerce||!1,...be(t)});var ha=class t extends we{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==te.bigint){let o=this._getOrReturnCtx(e);return ee(o,{code:Q.invalid_type,expected:te.bigint,received:o.parsedType}),xe}let n,i=new Xt;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),ee(n,{code:Q.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),ee(n,{code:Q.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),ee(n,{code:Q.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):Le.assertNever(o);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,pe.toString(r))}gt(e,r){return this.setLimit("min",e,!1,pe.toString(r))}lte(e,r){return this.setLimit("max",e,!0,pe.toString(r))}lt(e,r){return this.setLimit("max",e,!1,pe.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:pe.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:pe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:pe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:pe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:pe.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:pe.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};ha.create=t=>{var e;return new ha({checks:[],typeName:ge.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...be(t)})};var ga=class extends we{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==te.boolean){let n=this._getOrReturnCtx(e);return ee(n,{code:Q.invalid_type,expected:te.boolean,received:n.parsedType}),xe}return fr(e.data)}};ga.create=t=>new ga({typeName:ge.ZodBoolean,coerce:t?.coerce||!1,...be(t)});var ya=class t extends we{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==te.date){let o=this._getOrReturnCtx(e);return ee(o,{code:Q.invalid_type,expected:te.date,received:o.parsedType}),xe}if(isNaN(e.data.getTime())){let o=this._getOrReturnCtx(e);return ee(o,{code:Q.invalid_date}),xe}let n=new Xt,i;for(let o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(i=this._getOrReturnCtx(e,i),ee(i,{code:Q.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),n.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(i=this._getOrReturnCtx(e,i),ee(i,{code:Q.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),n.dirty()):Le.assertNever(o);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:pe.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:pe.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};ya.create=t=>new ya({checks:[],coerce:t?.coerce||!1,typeName:ge.ZodDate,...be(t)});var Qs=class extends we{_parse(e){if(this._getType(e)!==te.symbol){let n=this._getOrReturnCtx(e);return ee(n,{code:Q.invalid_type,expected:te.symbol,received:n.parsedType}),xe}return fr(e.data)}};Qs.create=t=>new Qs({typeName:ge.ZodSymbol,...be(t)});var xa=class extends we{_parse(e){if(this._getType(e)!==te.undefined){let n=this._getOrReturnCtx(e);return ee(n,{code:Q.invalid_type,expected:te.undefined,received:n.parsedType}),xe}return fr(e.data)}};xa.create=t=>new xa({typeName:ge.ZodUndefined,...be(t)});var Ta=class extends we{_parse(e){if(this._getType(e)!==te.null){let n=this._getOrReturnCtx(e);return ee(n,{code:Q.invalid_type,expected:te.null,received:n.parsedType}),xe}return fr(e.data)}};Ta.create=t=>new Ta({typeName:ge.ZodNull,...be(t)});var Eo=class extends we{constructor(){super(...arguments),this._any=!0}_parse(e){return fr(e.data)}};Eo.create=t=>new Eo({typeName:ge.ZodAny,...be(t)});var Hi=class extends we{constructor(){super(...arguments),this._unknown=!0}_parse(e){return fr(e.data)}};Hi.create=t=>new Hi({typeName:ge.ZodUnknown,...be(t)});var Un=class extends we{_parse(e){let r=this._getOrReturnCtx(e);return ee(r,{code:Q.invalid_type,expected:te.never,received:r.parsedType}),xe}};Un.create=t=>new Un({typeName:ge.ZodNever,...be(t)});var Zs=class extends we{_parse(e){if(this._getType(e)!==te.undefined){let n=this._getOrReturnCtx(e);return ee(n,{code:Q.invalid_type,expected:te.void,received:n.parsedType}),xe}return fr(e.data)}};Zs.create=t=>new Zs({typeName:ge.ZodVoid,...be(t)});var Vi=class t extends we{_parse(e){let{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==te.array)return ee(r,{code:Q.invalid_type,expected:te.array,received:r.parsedType}),xe;if(i.exactLength!==null){let s=r.data.length>i.exactLength.value,l=r.data.length<i.exactLength.value;(s||l)&&(ee(r,{code:s?Q.too_big:Q.too_small,minimum:l?i.exactLength.value:void 0,maximum:s?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(ee(r,{code:Q.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(ee(r,{code:Q.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((s,l)=>i.type._parseAsync(new vn(r,s,r.path,l)))).then(s=>Xt.mergeArray(n,s));let o=[...r.data].map((s,l)=>i.type._parseSync(new vn(r,s,r.path,l)));return Xt.mergeArray(n,o)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:pe.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:pe.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:pe.toString(r)}})}nonempty(e){return this.min(1,e)}};Vi.create=(t,e)=>new Vi({type:t,minLength:null,maxLength:null,exactLength:null,typeName:ge.ZodArray,...be(e)});function zs(t){if(t instanceof Ir){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=Sn.create(zs(n))}return new Ir({...t._def,shape:()=>e})}else return t instanceof Vi?new Vi({...t._def,type:zs(t.element)}):t instanceof Sn?Sn.create(zs(t.unwrap())):t instanceof oi?oi.create(zs(t.unwrap())):t instanceof ii?ii.create(t.items.map(e=>zs(e))):t}var Ir=class t extends we{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=Le.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==te.object){let u=this._getOrReturnCtx(e);return ee(u,{code:Q.invalid_type,expected:te.object,received:u.parsedType}),xe}let{status:n,ctx:i}=this._processInputParams(e),{shape:o,keys:s}=this._getCached(),l=[];if(!(this._def.catchall instanceof Un&&this._def.unknownKeys==="strip"))for(let u in i.data)s.includes(u)||l.push(u);let p=[];for(let u of s){let m=o[u],d=i.data[u];p.push({key:{status:"valid",value:u},value:m._parse(new vn(i,d,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof Un){let u=this._def.unknownKeys;if(u==="passthrough")for(let m of l)p.push({key:{status:"valid",value:m},value:{status:"valid",value:i.data[m]}});else if(u==="strict")l.length>0&&(ee(i,{code:Q.unrecognized_keys,keys:l}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let u=this._def.catchall;for(let m of l){let d=i.data[m];p.push({key:{status:"valid",value:m},value:u._parse(new vn(i,d,i.path,m)),alwaysSet:m in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let u=[];for(let m of p){let d=await m.key,g=await m.value;u.push({key:d,value:g,alwaysSet:m.alwaysSet})}return u}).then(u=>Xt.mergeObjectSync(n,u)):Xt.mergeObjectSync(n,p)}get shape(){return this._def.shape()}strict(e){return pe.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var i,o,s,l;let p=(s=(o=(i=this._def).errorMap)===null||o===void 0?void 0:o.call(i,r,n).message)!==null&&s!==void 0?s:n.defaultError;return r.code==="unrecognized_keys"?{message:(l=pe.errToObj(e).message)!==null&&l!==void 0?l:p}:{message:p}}}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ge.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};return Le.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new t({...this._def,shape:()=>r})}omit(e){let r={};return Le.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new t({...this._def,shape:()=>r})}deepPartial(){return zs(this)}partial(e){let r={};return Le.objectKeys(this.shape).forEach(n=>{let i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}),new t({...this._def,shape:()=>r})}required(e){let r={};return Le.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let o=this.shape[n];for(;o instanceof Sn;)o=o._def.innerType;r[n]=o}}),new t({...this._def,shape:()=>r})}keyof(){return LD(Le.objectKeys(this.shape))}};Ir.create=(t,e)=>new Ir({shape:()=>t,unknownKeys:"strip",catchall:Un.create(),typeName:ge.ZodObject,...be(e)});Ir.strictCreate=(t,e)=>new Ir({shape:()=>t,unknownKeys:"strict",catchall:Un.create(),typeName:ge.ZodObject,...be(e)});Ir.lazycreate=(t,e)=>new Ir({shape:t,unknownKeys:"strip",catchall:Un.create(),typeName:ge.ZodObject,...be(e)});var Sa=class extends we{_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function i(o){for(let l of o)if(l.result.status==="valid")return l.result;for(let l of o)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;let s=o.map(l=>new Zr(l.ctx.common.issues));return ee(r,{code:Q.invalid_union,unionErrors:s}),xe}if(r.common.async)return Promise.all(n.map(async o=>{let s={...r,common:{...r.common,issues:[]},parent:null};return{result:await o._parseAsync({data:r.data,path:r.path,parent:s}),ctx:s}})).then(i);{let o,s=[];for(let p of n){let u={...r,common:{...r.common,issues:[]},parent:null},m=p._parseSync({data:r.data,path:r.path,parent:u});if(m.status==="valid")return m;m.status==="dirty"&&!o&&(o={result:m,ctx:u}),u.common.issues.length&&s.push(u.common.issues)}if(o)return r.common.issues.push(...o.ctx.common.issues),o.result;let l=s.map(p=>new Zr(p));return ee(r,{code:Q.invalid_union,unionErrors:l}),xe}}get options(){return this._def.options}};Sa.create=(t,e)=>new Sa({options:t,typeName:ge.ZodUnion,...be(e)});var Ui=t=>t instanceof ba?Ui(t.schema):t instanceof Yr?Ui(t.innerType()):t instanceof wa?[t.value]:t instanceof _a?t.options:t instanceof Ea?Le.objectValues(t.enum):t instanceof Ra?Ui(t._def.innerType):t instanceof xa?[void 0]:t instanceof Ta?[null]:t instanceof Sn?[void 0,...Ui(t.unwrap())]:t instanceof oi?[null,...Ui(t.unwrap())]:t instanceof Bl||t instanceof Pa?Ui(t.unwrap()):t instanceof ka?Ui(t._def.innerType):[],Bd=class t extends we{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==te.object)return ee(r,{code:Q.invalid_type,expected:te.object,received:r.parsedType}),xe;let n=this.discriminator,i=r.data[n],o=this.optionsMap.get(i);return o?r.common.async?o._parseAsync({data:r.data,path:r.path,parent:r}):o._parseSync({data:r.data,path:r.path,parent:r}):(ee(r,{code:Q.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),xe)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let i=new Map;for(let o of r){let s=Ui(o.shape[e]);if(!s.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let l of s){if(i.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);i.set(l,o)}}return new t({typeName:ge.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...be(n)})}};function Rv(t,e){let r=wo(t),n=wo(e);if(t===e)return{valid:!0,data:t};if(r===te.object&&n===te.object){let i=Le.objectKeys(e),o=Le.objectKeys(t).filter(l=>i.indexOf(l)!==-1),s={...t,...e};for(let l of o){let p=Rv(t[l],e[l]);if(!p.valid)return{valid:!1};s[l]=p.data}return{valid:!0,data:s}}else if(r===te.array&&n===te.array){if(t.length!==e.length)return{valid:!1};let i=[];for(let o=0;o<t.length;o++){let s=t[o],l=e[o],p=Rv(s,l);if(!p.valid)return{valid:!1};i.push(p.data)}return{valid:!0,data:i}}else return r===te.date&&n===te.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var va=class extends we{_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=(o,s)=>{if(_v(o)||_v(s))return xe;let l=Rv(o.value,s.value);return l.valid?((Ev(o)||Ev(s))&&r.dirty(),{status:r.value,value:l.data}):(ee(n,{code:Q.invalid_intersection_types}),xe)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([o,s])=>i(o,s)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};va.create=(t,e,r)=>new va({left:t,right:e,typeName:ge.ZodIntersection,...be(r)});var ii=class t extends we{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==te.array)return ee(n,{code:Q.invalid_type,expected:te.array,received:n.parsedType}),xe;if(n.data.length<this._def.items.length)return ee(n,{code:Q.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),xe;!this._def.rest&&n.data.length>this._def.items.length&&(ee(n,{code:Q.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let o=[...n.data].map((s,l)=>{let p=this._def.items[l]||this._def.rest;return p?p._parse(new vn(n,s,n.path,l)):null}).filter(s=>!!s);return n.common.async?Promise.all(o).then(s=>Xt.mergeArray(r,s)):Xt.mergeArray(r,o)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};ii.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ii({items:t,typeName:ge.ZodTuple,rest:null,...be(e)})};var Wd=class t extends we{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==te.object)return ee(n,{code:Q.invalid_type,expected:te.object,received:n.parsedType}),xe;let i=[],o=this._def.keyType,s=this._def.valueType;for(let l in n.data)i.push({key:o._parse(new vn(n,l,n.path,l)),value:s._parse(new vn(n,n.data[l],n.path,l)),alwaysSet:l in n.data});return n.common.async?Xt.mergeObjectAsync(r,i):Xt.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof we?new t({keyType:e,valueType:r,typeName:ge.ZodRecord,...be(n)}):new t({keyType:_o.create(),valueType:e,typeName:ge.ZodRecord,...be(r)})}},Ys=class extends we{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==te.map)return ee(n,{code:Q.invalid_type,expected:te.map,received:n.parsedType}),xe;let i=this._def.keyType,o=this._def.valueType,s=[...n.data.entries()].map(([l,p],u)=>({key:i._parse(new vn(n,l,n.path,[u,"key"])),value:o._parse(new vn(n,p,n.path,[u,"value"]))}));if(n.common.async){let l=new Map;return Promise.resolve().then(async()=>{for(let p of s){let u=await p.key,m=await p.value;if(u.status==="aborted"||m.status==="aborted")return xe;(u.status==="dirty"||m.status==="dirty")&&r.dirty(),l.set(u.value,m.value)}return{status:r.value,value:l}})}else{let l=new Map;for(let p of s){let u=p.key,m=p.value;if(u.status==="aborted"||m.status==="aborted")return xe;(u.status==="dirty"||m.status==="dirty")&&r.dirty(),l.set(u.value,m.value)}return{status:r.value,value:l}}}};Ys.create=(t,e,r)=>new Ys({valueType:e,keyType:t,typeName:ge.ZodMap,...be(r)});var Xs=class t extends we{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==te.set)return ee(n,{code:Q.invalid_type,expected:te.set,received:n.parsedType}),xe;let i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(ee(n,{code:Q.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(ee(n,{code:Q.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());let o=this._def.valueType;function s(p){let u=new Set;for(let m of p){if(m.status==="aborted")return xe;m.status==="dirty"&&r.dirty(),u.add(m.value)}return{status:r.value,value:u}}let l=[...n.data.values()].map((p,u)=>o._parse(new vn(n,p,n.path,u)));return n.common.async?Promise.all(l).then(p=>s(p)):s(l)}min(e,r){return new t({...this._def,minSize:{value:e,message:pe.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:pe.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};Xs.create=(t,e)=>new Xs({valueType:t,minSize:null,maxSize:null,typeName:ge.ZodSet,...be(e)});var $d=class t extends we{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==te.function)return ee(r,{code:Q.invalid_type,expected:te.function,received:r.parsedType}),xe;function n(l,p){return Hd({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Ud(),Ks].filter(u=>!!u),issueData:{code:Q.invalid_arguments,argumentsError:p}})}function i(l,p){return Hd({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Ud(),Ks].filter(u=>!!u),issueData:{code:Q.invalid_return_type,returnTypeError:p}})}let o={errorMap:r.common.contextualErrorMap},s=r.data;if(this._def.returns instanceof Ro){let l=this;return fr(async function(...p){let u=new Zr([]),m=await l._def.args.parseAsync(p,o).catch(x=>{throw u.addIssue(n(p,x)),u}),d=await Reflect.apply(s,this,m);return await l._def.returns._def.type.parseAsync(d,o).catch(x=>{throw u.addIssue(i(d,x)),u})})}else{let l=this;return fr(function(...p){let u=l._def.args.safeParse(p,o);if(!u.success)throw new Zr([n(p,u.error)]);let m=Reflect.apply(s,this,u.data),d=l._def.returns.safeParse(m,o);if(!d.success)throw new Zr([i(m,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:ii.create(e).rest(Hi.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||ii.create([]).rest(Hi.create()),returns:r||Hi.create(),typeName:ge.ZodFunction,...be(n)})}},ba=class extends we{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};ba.create=(t,e)=>new ba({getter:t,typeName:ge.ZodLazy,...be(e)});var wa=class extends we{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return ee(r,{received:r.data,code:Q.invalid_literal,expected:this._def.value}),xe}return{status:"valid",value:e.data}}get value(){return this._def.value}};wa.create=(t,e)=>new wa({value:t,typeName:ge.ZodLiteral,...be(e)});function LD(t,e){return new _a({values:t,typeName:ge.ZodEnum,...be(e)})}var _a=class t extends we{constructor(){super(...arguments),Ll.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return ee(r,{expected:Le.joinValues(n),received:r.parsedType,code:Q.invalid_type}),xe}if(Vd(this,Ll,"f")||ID(this,Ll,new Set(this._def.values),"f"),!Vd(this,Ll,"f").has(e.data)){let r=this._getOrReturnCtx(e),n=this._def.values;return ee(r,{received:r.data,code:Q.invalid_enum_value,options:n}),xe}return fr(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}};Ll=new WeakMap;_a.create=LD;var Ea=class extends we{constructor(){super(...arguments),Ul.set(this,void 0)}_parse(e){let r=Le.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==te.string&&n.parsedType!==te.number){let i=Le.objectValues(r);return ee(n,{expected:Le.joinValues(i),received:n.parsedType,code:Q.invalid_type}),xe}if(Vd(this,Ul,"f")||ID(this,Ul,new Set(Le.getValidEnumValues(this._def.values)),"f"),!Vd(this,Ul,"f").has(e.data)){let i=Le.objectValues(r);return ee(n,{received:n.data,code:Q.invalid_enum_value,options:i}),xe}return fr(e.data)}get enum(){return this._def.values}};Ul=new WeakMap;Ea.create=(t,e)=>new Ea({values:t,typeName:ge.ZodNativeEnum,...be(e)});var Ro=class extends we{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==te.promise&&r.common.async===!1)return ee(r,{code:Q.invalid_type,expected:te.promise,received:r.parsedType}),xe;let n=r.parsedType===te.promise?r.data:Promise.resolve(r.data);return fr(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}};Ro.create=(t,e)=>new Ro({type:t,typeName:ge.ZodPromise,...be(e)});var Yr=class extends we{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ge.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,o={addIssue:s=>{ee(n,s),s.fatal?r.abort():r.dirty()},get path(){return n.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){let s=i.transform(n.data,o);if(n.common.async)return Promise.resolve(s).then(async l=>{if(r.value==="aborted")return xe;let p=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return p.status==="aborted"?xe:p.status==="dirty"||r.value==="dirty"?Gs(p.value):p});{if(r.value==="aborted")return xe;let l=this._def.schema._parseSync({data:s,path:n.path,parent:n});return l.status==="aborted"?xe:l.status==="dirty"||r.value==="dirty"?Gs(l.value):l}}if(i.type==="refinement"){let s=l=>{let p=i.refinement(l,o);if(n.common.async)return Promise.resolve(p);if(p instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){let l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?xe:(l.status==="dirty"&&r.dirty(),s(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?xe:(l.status==="dirty"&&r.dirty(),s(l.value).then(()=>({status:r.value,value:l.value}))))}if(i.type==="transform")if(n.common.async===!1){let s=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Hl(s))return s;let l=i.transform(s.value,o);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(s=>Hl(s)?Promise.resolve(i.transform(s.value,o)).then(l=>({status:r.value,value:l})):s);Le.assertNever(i)}};Yr.create=(t,e,r)=>new Yr({schema:t,typeName:ge.ZodEffects,effect:e,...be(r)});Yr.createWithPreprocess=(t,e,r)=>new Yr({schema:e,effect:{type:"preprocess",transform:t},typeName:ge.ZodEffects,...be(r)});var Sn=class extends we{_parse(e){return this._getType(e)===te.undefined?fr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Sn.create=(t,e)=>new Sn({innerType:t,typeName:ge.ZodOptional,...be(e)});var oi=class extends we{_parse(e){return this._getType(e)===te.null?fr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};oi.create=(t,e)=>new oi({innerType:t,typeName:ge.ZodNullable,...be(e)});var Ra=class extends we{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===te.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};Ra.create=(t,e)=>new Ra({innerType:t,typeName:ge.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...be(e)});var ka=class extends we{_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Vl(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Zr(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Zr(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};ka.create=(t,e)=>new ka({innerType:t,typeName:ge.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...be(e)});var Js=class extends we{_parse(e){if(this._getType(e)!==te.nan){let n=this._getOrReturnCtx(e);return ee(n,{code:Q.invalid_type,expected:te.nan,received:n.parsedType}),xe}return{status:"valid",value:e.data}}};Js.create=t=>new Js({typeName:ge.ZodNaN,...be(t)});var J8=Symbol("zod_brand"),Bl=class extends we{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},Wl=class t extends we{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let o=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?xe:o.status==="dirty"?(r.dirty(),Gs(o.value)):this._def.out._parseAsync({data:o.value,path:n.path,parent:n})})();{let i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?xe:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:ge.ZodPipeline})}},Pa=class extends we{_parse(e){let r=this._def.innerType._parse(e),n=i=>(Hl(i)&&(i.value=Object.freeze(i.value)),i);return Vl(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}};Pa.create=(t,e)=>new Pa({innerType:t,typeName:ge.ZodReadonly,...be(e)});function UD(t,e={},r){return t?Eo.create().superRefine((n,i)=>{var o,s;if(!t(n)){let l=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,p=(s=(o=l.fatal)!==null&&o!==void 0?o:r)!==null&&s!==void 0?s:!0,u=typeof l=="string"?{message:l}:l;i.addIssue({code:"custom",...u,fatal:p})}}):Eo.create()}var e7={object:Ir.lazycreate},ge;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(ge||(ge={}));var t7=(t,e={message:`Input not instance of ${t.name}`})=>UD(r=>r instanceof t,e),HD=_o.create,VD=da.create,r7=Js.create,n7=ha.create,BD=ga.create,i7=ya.create,o7=Qs.create,a7=xa.create,s7=Ta.create,c7=Eo.create,l7=Hi.create,p7=Un.create,u7=Zs.create,f7=Vi.create,m7=Ir.create,d7=Ir.strictCreate,h7=Sa.create,g7=Bd.create,y7=va.create,x7=ii.create,T7=Wd.create,S7=Ys.create,v7=Xs.create,b7=$d.create,w7=ba.create,_7=wa.create,E7=_a.create,R7=Ea.create,k7=Ro.create,DD=Yr.create,P7=Sn.create,A7=oi.create,M7=Yr.createWithPreprocess,D7=Wl.create,F7=()=>HD().optional(),I7=()=>VD().optional(),C7=()=>BD().optional(),N7={string:t=>_o.create({...t,coerce:!0}),number:t=>da.create({...t,coerce:!0}),boolean:t=>ga.create({...t,coerce:!0}),bigint:t=>ha.create({...t,coerce:!0}),date:t=>ya.create({...t,coerce:!0})},O7=xe,Ue=Object.freeze({__proto__:null,defaultErrorMap:Ks,setErrorMap:O8,getErrorMap:Ud,makeIssue:Hd,EMPTY_PATH:L8,addIssueToContext:ee,ParseStatus:Xt,INVALID:xe,DIRTY:Gs,OK:fr,isAborted:_v,isDirty:Ev,isValid:Hl,isAsync:Vl,get util(){return Le},get objectUtil(){return wv},ZodParsedType:te,getParsedType:wo,ZodType:we,datetimeRegex:OD,ZodString:_o,ZodNumber:da,ZodBigInt:ha,ZodBoolean:ga,ZodDate:ya,ZodSymbol:Qs,ZodUndefined:xa,ZodNull:Ta,ZodAny:Eo,ZodUnknown:Hi,ZodNever:Un,ZodVoid:Zs,ZodArray:Vi,ZodObject:Ir,ZodUnion:Sa,ZodDiscriminatedUnion:Bd,ZodIntersection:va,ZodTuple:ii,ZodRecord:Wd,ZodMap:Ys,ZodSet:Xs,ZodFunction:$d,ZodLazy:ba,ZodLiteral:wa,ZodEnum:_a,ZodNativeEnum:Ea,ZodPromise:Ro,ZodEffects:Yr,ZodTransformer:Yr,ZodOptional:Sn,ZodNullable:oi,ZodDefault:Ra,ZodCatch:ka,ZodNaN:Js,BRAND:J8,ZodBranded:Bl,ZodPipeline:Wl,ZodReadonly:Pa,custom:UD,Schema:we,ZodSchema:we,late:e7,get ZodFirstPartyTypeKind(){return ge},coerce:N7,any:c7,array:f7,bigint:n7,boolean:BD,date:i7,discriminatedUnion:g7,effect:DD,enum:E7,function:b7,instanceof:t7,intersection:y7,lazy:w7,literal:_7,map:S7,nan:r7,nativeEnum:R7,never:p7,null:s7,nullable:A7,number:VD,object:m7,oboolean:C7,onumber:I7,optional:P7,ostring:F7,pipeline:D7,preprocess:M7,promise:k7,record:T7,set:v7,strictObject:d7,string:HD,symbol:o7,transformer:DD,tuple:x7,undefined:a7,union:h7,unknown:l7,void:u7,NEVER:O7,ZodIssueCode:Q,quotelessJson:N8,ZodError:Zr});function WD(t){let e=t.operands.map(kv).join(" ");return`(#${t.operator} ${e})`}function kv(t){return t.type==="capture"?`@${t.name}`:t.value}function $D(t,e){return e.errors.filter(r=>!(r.code==="invalid_type"&&r.path.length===2&&(r.path[1]==="name"||r.path[1]==="value"))).map(r=>L7(t,r))}function L7(t,e){if(e.path.length===0)return e.code==="too_small"?"Too few arguments":e.code==="too_big"?"Too many arguments":e.message;let r=e.message;e.code==="invalid_literal"&&e.path[1]==="type"&&(r=e.expected==="capture"?"Capture names must be prefixed with @":"Expected string, but received capture");let n=e.path[0],i=kv(t[n]);return`Error on argument ${n} (\`${i}\`): ${r}`}var Jt=class{allowMissingNode(){return!1}createPredicate(e){let r=this.schema.safeParse(e);return r.success?{success:!0,predicate:n=>{try{let i=this.constructAcceptArgs(r.data,n);return this.run(...i)}catch(i){if(i instanceof jd&&this.allowMissingNode())return!0;throw i}}}:{success:!1,errors:$D(e,r.error)}}constructAcceptArgs(e,r){return e.map(n=>{if(n.type==="capture"){let i=r.captures.find(o=>o.name===n.name);if(i==null)throw new jd(n.name);return i}else return n.value})}},jd=class extends Error{constructor(e){super(`Could not find capture ${e}`)}};var Pv=Ue.object({type:Ue.literal("string"),value:Ue.string()}),Se={node:Ue.object({type:Ue.literal("capture"),name:Ue.string()}),string:Pv,integer:Pv.transform((t,e)=>{let r=parseInt(t.value);return isNaN(r)?(e.addIssue({code:Ue.ZodIssueCode.custom,message:"Expected an integer"}),Ue.NEVER):{type:"integer",value:r}}),boolean:Pv.transform((t,e)=>t.value==="true"?{type:"boolean",value:!0}:t.value==="false"?{type:"boolean",value:!1}:(e.addIssue({code:Ue.ZodIssueCode.custom,message:"Expected true or false"}),Ue.NEVER))};var Av=class extends Jt{constructor(){super(...arguments);this.name="not-type?";this.schema=Ue.tuple([Se.node,Se.string]).rest(Se.string)}run({node:r},...n){return!n.includes(r.type)}},Mv=class extends Jt{constructor(){super(...arguments);this.name="not-parent-type?";this.schema=Ue.tuple([Se.node,Se.string]).rest(Se.string)}run({node:r},...n){return r.parent==null||!n.includes(r.parent.type)}},Dv=class extends Jt{constructor(){super(...arguments);this.name="is-nth-child?";this.schema=Ue.tuple([Se.node,Se.integer])}run({node:r},n){return r.parent?.children.findIndex(i=>i.id===r.id)===n}},Fv=class extends Jt{constructor(){super(...arguments);this.name="has-multiple-children-of-type?";this.schema=Ue.tuple([Se.node,Se.string])}run({node:r},n){return r.children.filter(o=>o.type===n).length>1}},Iv=class extends Jt{constructor(){super(...arguments);this.name="child-range!";this.schema=Ue.union([Ue.tuple([Se.node,Se.integer]),Ue.tuple([Se.node,Se.integer,Se.integer]),Ue.tuple([Se.node,Se.integer,Se.integer,Se.boolean]),Ue.tuple([Se.node,Se.integer,Se.integer,Se.boolean,Se.boolean])])}run(r,n,i,o,s){let{node:{children:l}}=r;n=n<0?l.length+n:n,i=i??-1,i=i<0?l.length+i:i;let p=l[n],u=l[i];return r.range=Qr(o?p.endPosition:p.startPosition,s?u.startPosition:u.endPosition),!0}},Cv=class extends Jt{constructor(){super(...arguments);this.name="character-range!";this.schema=Ue.union([Ue.tuple([Se.node,Se.integer]),Ue.tuple([Se.node,Se.integer,Se.integer])])}run(r,n,i){return r.range=new j(r.range.start.translate(void 0,n),r.range.end.translate(void 0,i??0)),!0}},Nv=class extends Jt{constructor(){super(...arguments);this.name="shrink-to-match!";this.schema=Ue.tuple([Se.node,Se.string])}run(r,n){let{document:i,range:o}=r,l=i.getText(o).match(new RegExp(n,"ds"));if(l?.index==null)throw Error(`No match for pattern '${n}'`);let[p,u]=l.indices?.groups?.keep??l.indices[0],m=i.offsetAt(o.start);return r.range=new j(i.positionAt(m+p),i.positionAt(m+u)),!0}},Ov=class extends Jt{constructor(){super(...arguments);this.name="grow-to-named-siblings!";this.schema=Ue.union([Ue.tuple([Se.node]),Ue.tuple([Se.node,Se.string])])}run(r,n){let{node:i,range:o,document:s}=r;if(i.parent==null)throw Error("Node has no parent");let{children:l}=i.parent,p=l.findIndex(m=>m.id===i.id),u=null;if(p===-1)throw Error("Node not found in parent");for(let m=p+1;m<l.length;++m){let d=l[m];if(!d.isNamed)break;let g=Qr(d.startPosition,d.endPosition);if(n!=null&&n===s.getText(g))break;u=g.end}return u!=null&&(r.range=new j(o.start,u)),!0}},Lv=class extends Jt{constructor(){super(...arguments);this.name="trim-end!";this.schema=Ue.tuple([Se.node])}run(r){let{document:n,range:i}=r,o=n.getText(i),s=o.length-o.trimEnd().length;return s>0&&(r.range=new j(i.start,Hk(n,i.end,-s))),!0}},Uv=class extends Jt{constructor(){super(...arguments);this.name="allow-multiple!";this.schema=Ue.tuple([Se.node])}allowMissingNode(){return!0}run(r){return r.allowMultiple=!0,!0}},Hv=class extends Jt{constructor(){super(...arguments);this.name="log!";this.schema=Ue.tuple([Se.node])}run(r){return console.log(`#log!: ${r.name}@${r.range}`),!0}},Vv=class extends Jt{constructor(){super(...arguments);this.name="insertion-delimiter!";this.schema=Ue.tuple([Se.node,Se.string])}run(r,n){return r.insertionDelimiter=n,!0}},Bv=class extends Jt{constructor(){super(...arguments);this.name="single-or-multi-line-delimiter!";this.schema=Ue.tuple([Se.node,Se.node,Se.string,Se.string])}run(r,n,i,o){return r.insertionDelimiter=n.range.isSingleLine?i:o,!0}},jD=[new Hv,new Av,new Lv,new Mv,new Dv,new Iv,new Cv,new Nv,new Ov,new Uv,new Vv,new Bv,new Fv];function qD(t){let e=[],r=[];return t.forEach((n,i)=>{let o=[];n.forEach((s,l)=>{let p=jD.find(({name:m})=>m===s.operator);if(p==null){e.push({patternIdx:i,predicateIdx:l,error:`Unknown predicate operator "${s.operator}"`});return}let u=p.createPredicate(s.operands);if(!u.success){e.push(...u.errors.map(m=>({patternIdx:i,predicateIdx:l,error:m})));return}o.push(u.predicate)}),r.push(o)}),{errors:e,predicates:r}}function zD(t,e){let{errors:r,predicates:n}=qD(e.predicates);if(r.length>0){for(let i of r){let o=[`language ${t}`,`pattern ${i.patternIdx}`,`predicate \`${WD(e.predicates[i.patternIdx][i.predicateIdx])}\``].join(", ");lt(k().messages,"TreeSitterQuery.parsePredicates",`Error parsing predicate for ${o}: ${i.error}`)}if(k().runMode==="test")throw new Error("Invalid predicates")}return n}function Wv(t){return{row:t.line,column:t.character}}function GD(t){return t.map(e=>({...e,range:$v(e),name:U7(e)}))}function $v(t){return t.name.endsWith(".startOf")?t.range.start.toEmptyRange():t.name.endsWith(".endOf")?t.range.end.toEmptyRange():t.range}function U7(t){return t.name.endsWith(".startOf")?t.name.slice(0,-8):t.name.endsWith(".endOf")?t.name.slice(0,-6):t.name}var jv=class{constructor(){this.documentVersion=-1;this.documentUri="";this.documentLanguageId="";this.matches=[]}clear(){this.documentUri="",this.documentVersion=-1,this.documentLanguageId="",this.startPosition=void 0,this.endPosition=void 0,this.matches=[]}isValid(e,r,n){return this.documentVersion===e.version&&this.documentUri===e.uri.toString()&&this.documentLanguageId===e.languageId&&KD(this.startPosition,r)&&KD(this.endPosition,n)}update(e,r,n,i){this.documentVersion=e.version,this.documentUri=e.uri.toString(),this.documentLanguageId=e.languageId,this.startPosition=r,this.endPosition=n,this.matches=i}get(){return this.matches}};function KD(t,e){return t==null||e==null?t===e:t.isEqual(e)}var Aa=new jv;var $l=class t{constructor(e,r,n){this.treeSitter=e;this.query=r;this.patternPredicates=n;this.shouldCheckCaptures=k().runMode!=="production"}static create(e,r,n){let i=zD(e,n);return new t(r,n,i)}hasCapture(e){return this.query.captureNames.some(r=>vv(r)===e)}matches(e,r,n){if(!Aa.isValid(e,r,n)){let i=this.getAllMatches(e,r,n);Aa.update(e,r,n,i)}return Aa.get()}getAllMatches(e,r,n){let i=this.getTreeMatches(e,r,n),o=[];for(let s of i){let l=this.createMutableQueryMatch(e,s);this.runPredicates(l)&&o.push(this.createQueryMatch(l))}return o}getTreeMatches(e,r,n){let{rootNode:i}=this.treeSitter.getTree(e);return this.query.matches(i,{startPosition:r!=null?Wv(r):void 0,endPosition:n!=null?Wv(n):void 0})}createMutableQueryMatch(e,r){return{patternIdx:r.pattern,captures:r.captures.map(({name:n,node:i})=>({name:n,node:i,document:e,range:bD(i),insertionDelimiter:void 0,allowMultiple:!1,hasError:()=>AD(i)}))}}runPredicates(e){for(let r of this.patternPredicates[e.patternIdx])if(!r(e))return!1;return!0}createQueryMatch(e){let r=[],n=new Map;for(let i of e.captures){let o=vv(i.name),s=$v(i),l=n.get(o);if(l==null){let p=[i],u={...i,name:o,range:s,hasError:()=>p.some(m=>m.hasError())};r.push(u),n.set(o,{acc:u,captures:p})}else l.acc.range=l.acc.range.union(s),l.acc.allowMultiple=l.acc.allowMultiple||i.allowMultiple,l.acc.insertionDelimiter=l.acc.insertionDelimiter??i.insertionDelimiter,l.captures.push(i)}return this.shouldCheckCaptures&&this.checkCaptures(Array.from(n.values())),{captures:r}}checkCaptures(e){for(let r of e)if(!PD(GD(r.captures),k().messages)&&k().runMode==="test")throw new Error("Invalid captures")}};var ZD="_",H7=[ZD,"interior",...ia],V7=["prefix","leading","trailing"],B7=["startOf","endOf","start.startOf","start.endOf","end.startOf","end.endOf"],W7=["domain","removal","iteration","iteration.domain"],QD=["start","end","start.startOf","start.endOf","end.startOf","end.endOf"],Ma=new Set;for(let t of H7){if(t!==ZD){Ma.add(t);for(let e of QD)Ma.add(`${t}.${e}`)}for(let e of V7){Ma.add(`${t}.${e}`);for(let r of B7)Ma.add(`${t}.${e}.${r}`)}for(let e of W7){Ma.add(`${t}.${e}`);for(let r of QD)Ma.add(`${t}.${e}.${r}`)}}var $7=/^(?!;;).*(?<!"\w*)@([\w.]*)/gm;function YD(t,e){let r=e.matchAll($7),n=[];for(let o of r){let s=o[1];if(!(s.length>1&&!s.includes(".")&&s.startsWith("_"))&&!Ma.has(s)){let l=o.input.slice(0,o.index).split(`
`).length;n.push(`${t}(${l}) invalid capture '@${s}'.`)}}if(n.length===0)return;let i=n.join(`
`);if(lt(k().messages,"validateQueryCaptures.invalidCaptureName",i),k().runMode==="test")throw new Error(i)}var qd=class t{constructor(e){this.query=e}static async create(e,r,n,i){let o=await j7(e,r,`${i}.scm`);if(o==null||!await n.loadLanguage(i))return;let s=n.getLanguage(i).query(o),l=$l.create(i,n,s);return new t(l)}getScopeHandler(e){if(this.query.hasCapture(e.type))return new yd(this.query,e)}getCapturesMap(e){let r=this.query.matches(e),n={};for(let i of r)for(let o of i.captures){let s=o.name;n[s]==null&&(n[s]=[]),n[s].push(o)}return n}};async function j7(t,e,r){let n={[r]:null},i=t.runMode!=="production";for(;Object.values(n).some(o=>o==null);)for(let[o,s]of Object.entries(n)){if(s!=null)continue;let l=await e.readQuery(o);if(l==null){if(o===r)return;if(lt(t.messages,"LanguageDefinition.readQueryFileAndImports.queryNotFound",`Could not find imported query file ${o}`),t.runMode==="test")throw new Error("Invalid import statement");l=""}i&&YD(o,l),n[o]=l,mn(l,/^[^\S\r\n]*;;?[^\S\r\n]*(?:import|include)[^\S\r\n]+['"]?([\w|/\\.]+)['"]?[^\S\r\n]*$/gm,p=>{let u=p[1];i&&q7(t,o,u,p[0]),n[u]=n[u]??null})}return Object.values(n).join(`
`)}function q7(t,e,r,n){let i=!1;/[/\\]/g.test(r)&&(lt(t.messages,"LanguageDefinition.readQueryFileAndImports.invalidImport",`Invalid import statement in ${e}: "${n}". Relative import paths not supported`),i=!0);let o=`;; import ${r}`;if(n!==o&&(lt(t.messages,"LanguageDefinition.readQueryFileAndImports.malformedImport",`Malformed import statement in ${e}: "${n}". Import statements must be of the form "${o}"`),i=!0),i&&t.runMode==="test")throw new Error("Invalid import statement")}var XD=Symbol("LANGUAGE_UNDEFINED"),zd=class t{constructor(e,r,n){this.ide=e;this.treeSitter=r;this.treeSitterQueryProvider=n;this.notifier=new Gt;this.languageDefinitions=new Map;this.disposables=[];this.onDidChangeDefinition=this.notifier.registerListener;let i=e.runMode==="test";e.onDidOpenTextDocument(o=>{i&&Aa.clear(),this.loadLanguage(o.languageId)}),e.onDidChangeVisibleTextEditors(o=>{o.forEach(({document:s})=>this.loadLanguage(s.languageId))}),this.disposables.push(n.onChanges(()=>this.reloadLanguageDefinitions()))}static async create(e,r,n){let i=new t(e,r,n);return await i.loadAllLanguages(),i}async loadAllLanguages(){let e=this.ide.visibleTextEditors.map(({document:r})=>r.languageId);try{await Promise.all(e.map(r=>this.loadLanguage(r)))}catch(r){if(lt(this.ide.messages,"Failed to load language definitions",Nn(r)),this.ide.runMode==="test")throw r}}async loadLanguage(e){if(this.languageDefinitions.has(e))return;let r=await qd.create(this.ide,this.treeSitterQueryProvider,this.treeSitter,e)??XD;this.languageDefinitions.set(e,r)}async reloadLanguageDefinitions(){this.languageDefinitions.clear(),await this.loadAllLanguages(),Aa.clear(),this.notifier.notifyListeners()}get(e){let r=this.languageDefinitions.get(e);if(r==null)throw new Error("Expected language definition entry is missing for languageId "+e);return r===XD?void 0:r}getNodeAtLocation(e,r){return this.treeSitter.getNodeAtLocation(e,r)}dispose(){this.disposables.forEach(e=>e.dispose())}};var Gd=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}get nestedStages(){return this.nestedStages_==null&&(this.nestedStages_=this.modifier.modifiers.map(this.modifierStageFactory.create)),this.nestedStages_}run(e){for(let r of this.nestedStages)try{return r.run(e)}catch{continue}throw new Error("No modifier could be applied")}};var ec=class{constructor(e,r){this.modifierStageFactory=e;this.nestedModifier=r;this.suppressErrors=!1}run(e){if(this.shouldModify(e))try{return this.nestedStage.run(e).map(r=>r.withThatTarget(e))}catch(r){if(!this.suppressErrors)throw r}return[e]}get nestedStage(){return this.nestedStage_==null&&(this.nestedStage_=this.modifierStageFactory.create(this.nestedModifier)),this.nestedStage_}},ko=class extends ec{constructor(e,r){super(e,r.modifier)}shouldModify(e){return!e.hasExplicitScopeType}},Kd=class extends ec{constructor(r,n,i){super(r,n);this.modificationCondition=i}shouldModify(r){return this.modificationCondition(r)}},tc=class extends ec{shouldModify(e){return!e.hasExplicitScopeType&&!e.isImplicit}},rc=class extends ec{constructor(r){super(r,{type:"containingScope",scopeType:{type:"token"}});this.suppressErrors=!0}shouldModify(r){return!r.hasExplicitScopeType&&!r.hasExplicitRange&&r.contentRange.isEmpty}};function JD(t,e){return Object.getPrototypeOf(t).constructor===Object.getPrototypeOf(e).constructor}function nc(t,e,r,n,i){if(e.editor!==r.editor)throw Error("Continuous targets must be in the same editor");if(n&&i&&JD(e,r)){let o=e.maybeCreateRichRangeTarget(t,r);if(o!=null)return o}return e.textualType==="line"&&r.textualType==="line"?new ur({editor:e.editor,isReversed:t,contentRange:Ms(e,r,n,i)}):new It({editor:e.editor,isReversed:t,hasExplicitRange:!0,contentRange:As(e,r,n,i),textualType:n&&i&&e.textualType==="token"&&r.textualType==="token"?"token":"character"})}function Qd(t,e,r){if(e===r)return e.getTargets(t);let n=e.getTargets(t),i=r.getTargets(t);if(n.length!==1||i.length!==1)throw Error("Scope range targets must be single-target");let[o]=n,[s]=i,l=s.contentRange.start.isAfterOrEqual(o.contentRange.start),[p,u]=l?[o,s]:[s,o];return[nc(t,p,u,!0,!0)]}function Zd(t,e,r,n){let i=Array.from(t.generateScopes(e,r,"forward",{containment:"required",allowAdjacentScopes:!0,skipAncestorScopes:!0}));switch(i.length){case 0:return;case 1:return i[0];case 2:{let[o,s]=i;return n==="forward"?s:n==="backward"||(t.isPreferredOver?.(o,s)??!1)?o:s}default:throw new Error("Expected no more than 2 scope candidates")}}function Yd(t,e,r=0){let{isReversed:n,editor:i,contentRange:{start:o,end:s}}=t;if(s.isEqual(o)){let u=Zd(e,i,o);return u==null||(r>0&&(u=qv(e,i,u.domain.end,"forward",r,!0)),u==null)?void 0:u.getTargets(n)}let l=qv(e,i,o,"forward",r);if(l==null)return;if(l.domain.contains(s))return l.getTargets(n);let p=qv(e,i,s,"backward",r);if(p!=null)return Qd(n,l,p)}function qv(t,e,r,n,i,o=!1){let s=0;for(let l of t.generateScopes(e,r,n,{containment:"required",allowAdjacentScopes:o})){if(s===i)return l;s+=1}}var ic=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let{scopeType:r,ancestorIndex:n=0}=this.modifier,i=this.scopeHandlerFactory.maybeCreate(r,e.editor.document.languageId);if(i==null)return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e);let o=Yd(e,i,n);if(o==null)throw new dt(r.type);return o}};var Xd=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let{scopeType:r}=this.modifier,{editor:n,isReversed:i}=e,o=this.scopeHandlerFactory.maybeCreate(r,n.document.languageId);if(o==null)return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e);let s;if(e.hasExplicitRange&&(s=eF(o,n,e.contentRange),s.length===1&&s[0].domain.contains(e.contentRange)&&!e.hasExplicitScopeType&&(s=void 0)),s==null&&(s=this.getDefaultIterationRange(o,this.scopeHandlerFactory,e).flatMap(l=>eF(o,n,l))),s.length===0)throw new dt(r.type);return s.flatMap(l=>l.getTargets(i))}getDefaultIterationRange(e,r,n){let i=r.maybeCreate(e.iterationScopeType,n.editor.document.languageId);if(i==null)throw Error("Could not find iteration scope handler");let o=Yd(n,i);if(o==null)throw new dt(`iteration scope for ${e.scopeType.type}`);return o.map(s=>s.contentRange)}};function eF(t,e,{start:r,end:n}){return Array.from(t.generateScopes(e,r,"forward",{distalPosition:n,skipAncestorScopes:!0,allowAdjacentScopes:t.includeAdjacentInEvery}))}var Jd=class{constructor(e){this.modifier=e}run(e){return e.contentText.trim()!==""?[e]:[]}},eh=class{constructor(e){this.modifier=e}run(e){return e.contentText.trim()===""?[e]:[]}};var th=class{run(){return Bm(k()).map(e=>new Um({editor:e.editor,isReversed:e.selection.isReversed,contentRange:e.selection}))}};var rh=class{constructor(e,r){this.modifierStageFactory=e;this.markStageFactory=r}run(e,{actionFinalStages:r=[],noAutomaticTokenExpansion:n=!1}={}){return new zv(this.modifierStageFactory,this.markStageFactory,e,{actionFinalStages:r,noAutomaticTokenExpansion:n}).run()}},zv=class{constructor(e,r,n,i){this.modifierStageFactory=e;this.markStageFactory=r;this.target=n;this.opts=i}run(){return G7(this.processTarget(this.target))}processTarget(e){switch(e.type){case"list":return e.elements.flatMap(r=>this.processTarget(r));case"range":return this.processRangeTarget(e);case"primitive":case"implicit":return this.processPrimitiveTarget(e)}}processRangeTarget(e){let r=this.processPrimitiveTarget(e.anchor),n=this.processPrimitiveTarget(e.active);return kt(r,n).flatMap(([i,o])=>{if(i==null||o==null)throw new Error("AnchorTargets and activeTargets lengths don't match");switch(e.rangeType){case"continuous":return this.processContinuousRangeTarget(i,o,e);case"vertical":return K7(i,o,e.excludeAnchor,e.excludeActive)}})}processContinuousRangeTarget(e,r,{excludeAnchor:n,excludeActive:i,exclusionScopeType:o}){if(o==null)return[Po(e,r,n,i)];let s=Qv(e,r);return[Po(n?tF(this.modifierStageFactory,e,o,s?"backward":"forward"):e,i?tF(this.modifierStageFactory,r,o,s?"forward":"backward"):r,!1,!1)]}processPrimitiveTarget(e){let r,n,i=!1;e.type==="implicit"?(r=new th,n=[]):(r=this.markStageFactory.create(e.mark),n=Gv(this.modifierStageFactory,e.modifiers),i=z7(e));let o=r.run(),[s,l]=this.getPreAndPostStages(i),p=[...s,...n,...this.opts.actionFinalStages,...l];return Kv(p,o)}getPreAndPostStages(e){if(this.opts.noAutomaticTokenExpansion)return[[],[]];let r=new rc(this.modifierStageFactory);return e?[[r],[]]:[[],[r]]}};function z7(t){return t.modifiers.length>0&&t.modifiers.every(({type:e})=>e==="startOf"||e==="endOf")}function Gv(t,e){return e.map(t.create).reverse()}function Kv(t,e){return t.forEach(r=>{e=e.flatMap(n=>r.run(n))}),e}function tF(t,e,r,n){return t.create({type:"relativeScope",scopeType:r,direction:n,length:1,offset:1}).run(e)[0]}function Qv(t,e){return t.contentRange.start.isAfter(e.contentRange.start)?!0:t.contentRange.start.isBefore(e.contentRange.start)?!1:t.contentRange.end.isAfter(e.contentRange.end)}function G7(t){return $P(t,(e,r)=>e.isEqual(r),e=>e.contentRange.concise())}function rF(t,e){if(t.editor!==e.editor)throw new Error("Cannot form range between targets in different editors")}function Po(t,e,r=!1,n=!1){rF(t,e);let i=Qv(t,e);return nc(i,i?e:t,i?t:e,!(i?n:r),!(i?r:n))}function K7(t,e,r,n){rF(t,e);let i=Qv(t,e),o=i?-1:1,l=(i?t.contentRange.start:t.contentRange.end).line+(r?o:0),u=(i?e.contentRange.start:e.contentRange.end).line-(n?o:0),m=[];for(let d=l;;d+=o){let g=new j(d,t.contentRange.start.character,d,t.contentRange.end.character);if(m.push(new $e({editor:t.editor,isReversed:t.isReversed,contentRange:g,insertionDelimiter:t.insertionDelimiter})),d===u)return m}}var nh=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=this.getModifierStages(),n=Kv(r,[e]),i=this.modifier.type==="extendThroughStartOf";return n.map(o=>new Hm({editor:e.editor,isReversed:i,inputTarget:e,modifiedTarget:o,isHead:i}))}getModifierStages(){return this.modifier.modifiers!=null?Gv(this.modifierStageFactory,this.modifier.modifiers):[new Zv(this.modifierStageFactory,this.modifier)]}},Zv=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=this.getContainingLine(e),n=this.getContainingPairInterior(e),i=n!=null?r.contentRange.intersection(n.contentRange):null;return i==null||i.isEmpty?[r]:[new $e({editor:e.editor,isReversed:e.isReversed,contentRange:i})]}getContainingPairInterior(e){try{return this.getContaining(e,{type:"surroundingPairInterior",delimiter:"any"})[0]}catch(r){if(r instanceof dt)return;throw r}}getContainingLine(e){return this.getContaining(e,{type:"line"})[0]}getContaining(e,r){return this.modifierStageFactory.create({type:"containingScope",scopeType:r}).run(e)}};var ai=class extends Error{constructor(e,r){let n=r!=null?` #${r+1}`:"";super(`Scope '${e.type}'${n} is out of range`),this.name="OutOfRangeError"}};function nF(t,e,r,n){return Yv(t,e,r,n),e.slice(r,n+1)}function Yv(t,e,r,n){if(r<0||r>=e.length)throw new ai(t,r);if(n<0||n>=e.length)throw new ai(t,n)}var oc=class{constructor(e,r,n){this.modifierStageFactory=e;this.storedTargets=r;this.modifier=n}run(e){let r=new rc(this.modifierStageFactory).run(e)[0];switch(this.modifier.type){case"everyScope":return this.handleEveryScope(r);case"ordinalScope":return this.handleOrdinalScope(r,this.modifier);case"relativeScope":return this.handleRelativeScope(r,this.modifier);default:throw Error(`${this.modifier.type} instance scope not supported`)}}handleEveryScope(e){return Array.from(sd(this.getEveryRanges(e),([r,n])=>this.getTargetIterable(e,r,n,"forward")))}handleOrdinalScope(e,{start:r,length:n,scopeType:i}){return this.getEveryRanges(e).flatMap(([o,s])=>iF(i,this.getTargetIterable(e,o,s,r>=0?"forward":"backward"),r>=0?r:-(n+r),n))}handleRelativeScope(e,{direction:r,offset:n,length:i,scopeType:o}){return(this.storedTargets.get("instanceReference")??[e]).flatMap(l=>{let{editor:p}=l,u=r==="forward"?new j(n===0?l.contentRange.start:l.contentRange.end,p.document.range.end):new j(p.document.range.start,n===0?l.contentRange.end:l.contentRange.start);return iF(o,this.getTargetIterable(e,p,u,r),n===0?0:n-1,i)})}getEveryRanges({editor:e}){return this.storedTargets.get("instanceReference")?.map(({editor:r,contentRange:n})=>[r,n])??[[e,e.document.range]]}getTargetIterable(e,r,n,i){let o=Bt(Tn(new RegExp(jr(e.contentText),"g"),r,n,i),l=>new $e({contentRange:l,editor:r,isReversed:!1,textualType:"character"})),s=Q7(e);if(s!=null){let l=this.modifierStageFactory.create({type:"containingScope",scopeType:s});return od(Bt(o,p=>{try{let u=l.run(p);return u.length===1&&u[0].contentRange.isRangeEqual(p.contentRange)?u[0]:null}catch{return null}}),p=>p!=null)}return o}};function Q7(t){switch(t.textualType){case"line":case"token":case"word":return{type:t.textualType};default:return null}}function iF(t,e,r,n){Array.from(Nl(r,e));let i=Array.from(Nl(n,e));if(i.length<n)throw new ai(t,r+n-1);return i}var ih=class{constructor(e,r){this.modifierHandlerFactory=e;this.modifier=r}run(e){let r=e.getInterior();return r??this.modifierHandlerFactory.create({type:"containingScope",scopeType:{type:"interior",explicitScopeType:e.hasExplicitScopeType}}).run(e)}},oh=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r;this.containingSurroundingPairIfNoBoundaryStage=Xv(this.modifierStageFactory)}run(e){return this.containingSurroundingPairIfNoBoundaryStage.run(e).flatMap(r=>r.getBoundary())}};function Xv(t){return new Kd(t,{type:"containingScope",scopeType:{type:"surroundingPair",delimiter:"any"}},e=>e.getBoundary()==null)}var si={type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:{type:"line"}}},Jv={type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:{type:"token"}}};var ah=class extends Error{constructor(e){super(`Target has no ${e} delimiter.`),this.name="NoDelimiterError"}},sh=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){return this.modifierStageFactory.create(Jv).run(e).map(r=>{let n=r.getLeadingDelimiterTarget();if(n==null)throw new ah("leading");return n})}},ch=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){return this.modifierStageFactory.create(Jv).run(e).map(r=>{let n=r.getTrailingDelimiterTarget();if(n==null)throw new ah("trailing");return n})}};function lh(t,e,r,n,i){return Yv(t,r,n,i),n===i?r[n]:nc(e,r[n],r[i],!0,!0)}function ph(t,e,r){return t.create({type:"everyScope",scopeType:r}).run(e)}var uh=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=ph(this.modifierStageFactory,e,this.modifier.scopeType),n=this.modifier.start+(this.modifier.start<0?r.length:0),i=n+this.modifier.length-1;return this.modifier.isEvery?nF(this.modifier.scopeType,r,n,i):[lh(this.modifier.scopeType,e.isReversed,r,n,i)]}};var fh=class{run(e){let r={editor:e.editor,isReversed:e.isReversed,contentRange:this.getContentRange(e.contentRange)};return[e.isRaw?new yo(r):new $e({...r,textualType:"character"})]}},mh=class extends fh{getContentRange(e){return e.start.toEmptyRange()}},dh=class extends fh{getContentRange(e){return e.end.toEmptyRange()}};var hh=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let{scopeType:r}=this.modifier,n=new ic(this.modifierStageFactory,this.scopeHandlerFactory,{type:"containingScope",scopeType:r});try{return n.run(e)}catch(s){if(!(s instanceof dt))throw s}let i=this.scopeHandlerFactory.create(this.modifier.scopeType,e.editor.document.languageId),o=Z7(e,i);if(o==null)throw Error(`No scopes found for scope type: ${r.type}`);return o}};function Z7(t,e){let r=e.generateScopes(t.editor,t.contentRange.start,"backward"),n=e.generateScopes(t.editor,t.contentRange.end,"forward"),{active:i}=t.contentSelection,o=oF(r,i),s=oF(n,i),l=o.distance<s.distance?o.scope:s.scope;return l?.getTargets(t.isReversed)}function oF(t,e){let r,n=1/0;for(let i of t){let o=Math.min(aF(e,i.domain.start),aF(e,i.domain.end));if(o<n)r=i,n=o;else break}return{scope:r,distance:n}}function aF(t,e){return Math.abs(t.line-e.line)*1e4+Math.abs(t.character-e.character)}var gh=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=this.modifierStageFactory.create(this.modifier.anchor),n=this.modifierStageFactory.create(this.modifier.active),i=r.run(e),o=n.run(e);if(i.length!==1||o.length!==1)throw new Error("Expected single anchor and active target");return[Po(i[0],o[0],this.modifier.excludeAnchor,this.modifier.excludeActive)]}};var yh=class{constructor(e){this.modifier=e}run(e){return[new yo({editor:e.editor,contentRange:e.contentRange,isReversed:e.isReversed})]}};var xh=class extends Error{constructor(e,r,n){super(`Requested ${e} ${n}s, but ${r} are already selected.`),this.name="TooFewScopesError"}};function sF(t,e,r){let n=ph(t,eQ(r),e.scopeType),i=J7(r.contentRange,n);return Y7(e,r,n,i)}function Y7(t,e,r,n){let i=t.direction==="forward",o=X7(t,e.contentRange,r,i,n),s=i?o+t.length-1:o-t.length+1,l=Math.min(o,s),p=Math.max(o,s);return[lh(t.scopeType,e.isReversed,r,l,p)]}function X7(t,e,r,n,i){let o=t.offset===0;if(i==null){let p=n?r.findIndex(u=>u.contentRange.start.isAfter(e.start)):Xo(r,u=>u.contentRange.start.isBefore(e.start));if(p===-1)throw new ai(t.scopeType);return o?p:n?p+t.offset-1:p-t.offset+1}let s=i.start,l=i.end;if(o){let p=l-s+1;if(p>t.length)throw new xh(t.length,p,t.scopeType.type);return n?s:l}return n?l+t.offset:s-t.offset}function J7(t,e){let r=e.map((i,o)=>({index:o,intersection:i.contentRange.intersection(t)})).filter(i=>i.intersection!=null);if(t.isEmpty){if(r.length===0)return;let i=r.at(-1).index;return{start:i,end:i}}let n=r.filter(i=>!i.intersection.isEmpty).map(i=>i.index);if(n.length!==0)return{start:n[0],end:n.at(-1)}}function eQ(t){return new It({editor:t.editor,isReversed:t.isReversed,contentRange:t.contentRange,hasExplicitRange:!1})}var Th=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let r=this.scopeHandlerFactory.maybeCreate(this.modifier.scopeType,e.editor.document.languageId);if(r==null)return sF(this.modifierStageFactory,this.modifier,e);let n=Array.from(this.modifier.offset===0?tQ(r,e,this.modifier):rQ(r,e,this.modifier));if(n.length<this.modifier.length)throw new ai(this.modifier.scopeType,this.modifier.offset+this.modifier.length-1);let{isReversed:i}=e;return this.modifier.isEvery?n.flatMap(o=>o.getTargets(i)):Qd(i,n[0],n[n.length-1])}};function tQ(t,e,r){let{editor:n,contentRange:i}=e,{length:o,direction:s}=r,l=Zd(t,n,s==="forward"?i.start:i.end,s)?.domain;if(l==null)throw new dt(r.scopeType.type);return Nl(o,t.generateScopes(n,s==="forward"?l.start:l.end,s,{skipAncestorScopes:!0}))}function rQ(t,e,r){let{editor:n,contentRange:i}=e,{length:o,direction:s,offset:l}=r,p=s==="forward"?i.end:i.start,u=i.isEmpty?"disallowed":"disallowedIfStrict";return BM(t.generateScopes(n,p,s,{containment:u,skipAncestorScopes:!0}),l-1,l+o-1)}var Sh=class{constructor(e){this.modifier=e}run(e){return e.editor.visibleRanges.map(r=>new $e({editor:e.editor,isReversed:e.isReversed,contentRange:r}))}};function cF(...t){return e=>{let r=e;for(let n of t)if(r=n(r),r==null)return null;return r}}function lF(t,...e){return r=>{let n=r,i=[],o=[...e].reverse();for(let s of o){if(n==null||(n=s(n),n==null))return null;i.push(n),n=n.parent??null}return i.reverse()[t]}}var eb=t=>new fe(t.row,t.column),pF=(...t)=>{let e=["(","{","[","<"],r=[")","}","]",">"],n=e.concat(r),i=(s,l)=>s!=null&&l.includes(s.type),o=s=>s!=null&&!i(s,n);return(s,l)=>{let p,{start:u,end:m}=l;if(i(s.parent,t))return i(s,e)?p=s.nextNamedSibling:i(s,r)?p=s.previousNamedSibling:s.type===","?p=m.isBeforeOrEqual(eb(s.startPosition))?s.previousNamedSibling:s.nextNamedSibling:p=s,o(p)?p:null;if(i(s,t)){let d=[...s.children],g=d.find(({startPosition:b})=>eb(b).isAfterOrEqual(m))??null;if(o(g))return g;d.reverse();let x=d.find(({endPosition:b})=>eb(b).isBeforeOrEqual(u))??null;if(o(x))return x}return null}};function Qe(...t){let e=nQ(t);return r=>{for(let n of e){let i=iQ(r,n);if(i!=null)return i}return null}}function nQ(t){return t.map(e=>e.split(".").map(r=>new tb(r)))}function iQ(t,e){let r=oQ(t,e);!r&&e.length>1&&(r=aQ(t,e));let n=null,i;return r!=null&&([n,i]=r),n!=null&&i!=null&&i.fields!=null&&i.fields.forEach(o=>{n=(o.isIndex?n?.namedChild(o.value):n?.childForFieldName(o.value))??null}),n}function oQ(t,e){let r=null,n=t;for(let i=e.length-1;i>-1;--i){let o=e[i];if(n==null||!o.typeEquals(n)){if(o.isOptional)continue;return null}(!r||!r[1].isImportant)&&(r=[n,o]),n=n.parent}return r}function aQ(t,e){let r=null,n=t;for(let i=0;i<e.length;++i){let o=e[i];if(n==null||!o.typeEquals(n)){if(o.isOptional)continue;return null}if((!r||o.isImportant)&&(r=[n,o]),i+1<e.length){let s=n.namedChildren.filter(l=>e[i+1].typeEquals(l));n=s.length===1?s[0]:null}}return r}var tb=class{constructor(e){this.anyType=!1;this.notType=!1;this.type=e.match(/^[\w*~]+/)[0],this.type==="*"?this.anyType=!0:this.type.startsWith("~")&&(this.type=this.type.slice(1),this.notType=!0),this.isImportant=e.indexOf("!")>-1,this.isOptional=e.indexOf("?")>-1,this.fields=[...e.matchAll(/(?<=\[).+?(?=\])/g)].map(r=>r[0]).map(r=>/\d+/.test(r)?{isIndex:!0,value:Number(r)}:{isIndex:!1,value:r})}typeEquals(e){return this.anyType?!0:this.notType?this.type!==e.type:this.type===e.type}};function Ge(t,e=bo){return function(r,n){let i=t(n,r.selection);return i!=null?[{node:i,selection:e(r.editor,i)}]:null}}function vh(t,e=bo){let r=cF(...t);return function(n,i){let o=r(i);return o==null?null:[{node:o,selection:e(n.editor,o)}]}}function ac(t,e=0,r=bo){return Ge(lF(e,...t),r)}function mr(...t){return Ge(Qe(...t))}function sc(...t){return Ge(pF(...t),_D())}function bh(...t){return Ge(Qe(...t),ED)}function Hn(t,e=[]){return Ge(Qe(...t),RD(...e))}function cc(t,e=[]){return Ge(Qe(...t),kD(...e))}function er(...t){return(e,r)=>{for(let n of t){let i=n(e,r);if(i!=null)return i}return null}}function uF(t){return(e,r)=>{throw new Error(`Node type '${t}' not supported`)}}function ci(t){return Object.freeze(Object.fromEntries(Di(t).map(e=>{let r=t[e];return Array.isArray(r)?[e,mr(...r)]:typeof r=="string"?[e,mr(r)]:[e,r]})))}function fF(t,e){let r=t.walk();r.gotoFirstChild();let n=[],i=!0;for(;i;)r.currentFieldName===e&&n.push(r.currentNode),i=r.gotoNextSibling();return n}function sQ(t,e){return hF(t,r=>Math.floor(r/2)*2+e)}function mF(t){return sQ(Qe("map_lit"),t)}function hF(t,e){return r=>{let n=r.parent;if(n==null||t(n)==null)return null;let i=jl(n),o=i.findIndex(({id:l})=>l===r.id);if(o===-1)return null;let s=e(o);return s===-1?null:i[s]}}var jl=t=>fF(t,"value"),rb="~quoting_lit.list_lit!",gF=Qe(rb);function nb(...t){return e=>{let r=gF(e);if(r==null)return null;let n=jl(r)[0];return t.includes(n?.text)?r:null}}function cQ(...t){return Ge(nb(...t))}var yF=nb("defn","defmacro"),dF=vh([yF,t=>jl(t)[1]]),xF=nb("if","if-let","when","when-let"),lQ=Ge(xF),pQ={collectionKey:Ge(mF(0)),value:Ge(mF(1)),argumentOrParameter:Ge(hF(Qe(rb),t=>t!==0?t:-1)),functionCall:rb,functionCallee:vh([gF,t=>jl(t)[0]]),namedFunction:Ge(yF),functionName:dF,name:dF,anonymousFunction:er(cQ("fn"),mr("anon_fn_lit")),ifStatement:lQ,condition:vh([xF,t=>jl(t)[1]])},TF=ci(pQ);var SF=["command","displayed_equation","inline_formula","math_set","block_comment","package_include","class_include","latex_include","biblatex_include","bibtex_include","graphics_include","svg_include","inkscape_include","verbatim_include","import_include","caption","citation","label_definition","label_reference","label_reference_range","label_number","new_command_definition","old_command_definition","let_command_definition","environment_definition","glossary_entry_definition","glossary_entry_reference","acronym_definition","acronym_reference","theorem_definition","color_definition","color_set_definition","color_reference","tikz_library_import"],uQ=["curly_group","curly_group_text","curly_group_text_list","curly_group_path","curly_group_path_list","curly_group_command_name","curly_group_key_value","curly_group_glob_pattern","curly_group_impl","brack_group","brack_group_text","brack_group_argc","brack_group_key_value","mixed_group"],bF=["subparagraph","paragraph","subsubsection","subsection","section","chapter","part"],vF=bF.map(t=>`${t}[text]`),fQ=bF.map(t=>`${t}[command]`);function ib(t,e){return{selection:new Ee(t.document.positionAt(e.startIndex+1),t.document.positionAt(e.endIndex-1)),context:{removalRange:new Ee(t.document.positionAt(e.startIndex),t.document.positionAt(e.endIndex))}}}function mQ(t,e){let r=e.startIndex,n=e.endIndex,i=e.nextNamedSibling;return i!=null&&i.isNamed&&(n=i.endIndex),{selection:new Ee(t.document.positionAt(r),t.document.positionAt(n)),context:{}}}var dQ={argumentOrParameter:er(ac([Qe(...SF),Qe(...uQ)],1,ib),Ge(Qe("begin[name]","end[name]",...vF),ib)),functionCall:er(Ge(Qe(...SF,"begin","end")),Ge(Qe(...fQ),mQ)),name:er(Ge(Qe(...vF),ib),mr("begin[name][text]","end[name][text]"))},wF=ci(dQ);var hQ=["alias","begin_block","end_block","if_modifier","rescue_modifier","undef","unless_modifier","until_modifier","while_modifier"],gQ=["array","assignment","begin","binary","break","call","case","case_match","chained_string","character","class","class_variable","complex","conditional","constant","delimited_symbol","element_reference","false","float","for","global_variable","hash","heredoc_beginning","identifier","if","instance_variable","integer","lambda","method","module","next","nil","operator_assignment","parenthesized_statements","range","rational","redo","regex","retry","return","scope_resolution","self","simple_symbol","singleton_class","singleton_method","string","string_array","subshell","super","symbol_array","true","unary","unless","until","while","yield"],yQ=["begin_block","begin","block_body","block","body_statement","do_block","do","else","end_block","ensure","heredoc_beginning","interpolation","lambda","method","parenthesized_statements","program","singleton_class","singleton_method","then"],xQ=["=","+=","-=","*=","**=","/=","||=","|=","&&=","&=","%=",">>=","<<=","^="],TQ=[":","=>"];function SQ(t){if(t.type!=="call")return null;let e=t.childForFieldName("receiver"),r=t.childForFieldName("method"),n=t.childForFieldName("block");return e?.text==="Proc"&&r?.text==="new"||e==null&&r?.text==="lambda"?t:n}var vQ={statement:er(mr(...hQ),ac([Qe(...yQ),Qe(...gQ)],1)),anonymousFunction:er(mr("lambda","do_block"),Ge(SQ)),condition:bh("*[condition]"),argumentOrParameter:sc("lambda_parameters","method_parameters","block_parameters","argument_list"),collectionKey:cc(["pair[key]"],[":"]),value:Hn(["pair[value]","assignment[right]","operator_assignment[right]","return.argument_list!"],xQ.concat(TQ))},_F=ci(vQ);function ob(){let t=qs(["else_clause"],[],{includeUnnamedChildren:!0});return function(e,r){let n=t(e,r),i=r.parent;if(i?.type!=="else_clause"){let s=r.childForFieldName("alternative");if(s==null)return n;let{selection:l}=n;return{selection:l,context:{removalRange:new Ee(l.start,Sv(s.namedChild(0).startPosition))}}}let{selection:o}=n;return{selection:new Ee(Sv(i.child(0).startPosition),o.end),context:{}}}}function EF(t){let e=ob();return function(r,n){return n.namedChild(0).type===t?e(r,n.namedChild(0)):bo(r,n)}}var RF=["associated_type","attribute_item","const_item","empty_statement","enum_item","extern_crate_declaration","foreign_mod_item","impl_item","inner_attribute_item","let_declaration","macro_definition","macro_invocation","function_item","function_signature_item","mod_item","static_item","struct_item","trait_item","type_item","union_item","use_declaration","expression_statement"],bQ=["source_file","block","declaration_list"];function wQ(t){return t.parent?.type==="impl_item"&&t.parent?.childForFieldName("type")?.equals(t)?t:null}function _Q(t,e){return{selection:wD(e.children[1],e.lastNamedChild),context:{leadingDelimiterRange:Qr(e.children[0].startPosition,e.children[1].startPosition)}}}function EQ(t){if(t.type!=="block")return null;let{lastNamedChild:e}=t;if(e==null)return null;if(e.type==="expression_statement"){let r=e.child(0);return r.type==="return_expression"?r.child(1):null}return RF.includes(e.type)?null:e.type==="return_expression"?e.child(1):e}var RQ={statement:ac([Qe(...bQ),Qe(...RF)],1),condition:er(mr("while_expression[condition]","if_expression[condition]"),Ge(Qe("while_let_expression","if_let_expression"),qs(["while","if","block"],[],{includeUnnamedChildren:!0})),Hn(["*.match_pattern![condition]"],["if"])),type:er(Hn(["let_declaration[type]","parameter[type]","field_declaration[type]","const_item[type]"],[":"]),Ge(Qe("constrained_type_parameter[bounds]","where_predicate[bounds]"),_Q),Hn(["function_item[return_type]"],["->"]),Ge(wQ),mr("struct_item","trait_item","impl_item","array_type[element]")),argumentOrParameter:sc("arguments","parameters","meta_arguments","type_parameters","ordered_field_declaration_list"),collectionKey:er(cc(["field_initializer[name]","field_pattern[name]"],[":"])),name:er(mr("let_declaration.identifier!","parameter.identifier!","function_item[name]","struct_item[name]","enum_item[name]","enum_variant[name]","trait_item[name]","const_item[name]","meta_item.identifier!","let_declaration[pattern]","constrained_type_parameter[left]","where_predicate[left]","field_declaration[name]"),cc(["field_initializer[name]","field_pattern[name]"],[":"])),value:er(Hn(["let_declaration[value]"],["="]),Hn(["field_initializer[value]","field_pattern[pattern]"],[":"]),mr("meta_item[value]","const_item[value]"),Ge(EQ)),attribute:cc(["mutable_specifier","attribute_item"]),branch:er(mr("match_arm"),Ge(Qe("else_clause"),EF("if_expression")),Ge(Qe("if_expression"),ob()))},kF=ci(RQ);var kQ={argumentOrParameter:sc("arguments","parameters","class_parameters","bindings"),branch:Ge(Qe("case_clause"),qs([],[],{includeUnnamedChildren:!0})),type:Hn(["upper_bound[type]","lower_bound[type]","view_bound[type]","context_bound[type]","val_definition[type]","val_declaration[type]","var_definition[type]","var_declaration[type]","type_definition","extends_clause[type]","class_parameter[type]","parameter[type]","function_definition[return_type]","typed_pattern[type]","binding[type]"],[":"]),value:Hn(["*[value]","*[default_value]","type_definition[type]"],["="]),condition:bh("*[condition]")},PF=ci(kQ);function AF(t,e,r){let n=ql[t];if(n==null)throw new Vu(t);let i=n[e];return i==null?uF(e):r?PQ(i):i}var ql={clojure:TF,latex:wF,ruby:_F,rust:kF,scala:PF};function PQ(t){return(e,r)=>{let n=t(e,r);return n==null?null:(n=n.flatMap(i=>AQ(i.node,Dm(e,i.selection.selection),t)),n.length>0?n:null)}}function AQ(t,e,r){let n=t.parent;for(;n!=null;){let i=n.namedChildren.flatMap(o=>r(e,o)).filter(o=>o!=null);if(i.length>0)return i;n=n.parent}return[]}var wh=class{constructor(e,r){this.languageDefinitions=e;this.modifier=r}run(e){let r=AF(e.editor.document.languageId,this.modifier.scopeType.type,this.modifier.type==="everyScope"),n=this.languageDefinitions.getNodeAtLocation(e.editor.document,e.contentRange);if(n==null)throw new dt(this.modifier.scopeType.type);let i=MQ(n,r,{editor:e.editor,selection:new Ee(e.contentRange.start,e.contentRange.end)});if(i==null)throw new dt(this.modifier.scopeType.type);return i.map(o=>{let{containingListDelimiter:s,leadingDelimiterRange:l,trailingDelimiterRange:p,removalRange:u}=o.context;if(u!=null&&(l!=null||p!=null))throw Error("Removal range is mutually exclusive with leading or trailing delimiter range");let{editor:m,selection:d}=o.selection;return new To({scopeTypeType:this.modifier.scopeType.type,editor:m,isReversed:e.isReversed,contentRange:d,removalRange:u,insertionDelimiter:s,leadingDelimiterRange:l,trailingDelimiterRange:p})})}};function MQ(t,e,r){let n=t;for(;n!=null;){let i=e(r,n);if(i!=null)return i.map(o=>o.selection).map(o=>({selection:Dm(r,o.selection),context:o.context}));n=n.parent}return null}var lc=class{constructor(e,r,n){this.languageDefinitions=e;this.storedTargets=r;this.scopeHandlerFactory=n;this.create=this.create.bind(this)}create(e){switch(e.type){case"startOf":return new mh;case"endOf":return new dh;case"extendThroughStartOf":case"extendThroughEndOf":return new nh(this,e);case"toRawSelection":return new yh(e);case"interiorOnly":return new ih(this,e);case"excludeInterior":return new oh(this,e);case"leading":return new sh(this,e);case"trailing":return new ch(this,e);case"visible":return new Sh(e);case"containingScope":return new ic(this,this.scopeHandlerFactory,e);case"preferredScope":return new hh(this,this.scopeHandlerFactory,e);case"everyScope":return e.scopeType.type==="instance"?new oc(this,this.storedTargets,e):new Xd(this,this.scopeHandlerFactory,e);case"ordinalScope":return e.scopeType.type==="instance"?new oc(this,this.storedTargets,e):new uh(this,e);case"relativeScope":return e.scopeType.type==="instance"?new oc(this,this.storedTargets,e):new Th(this,this.scopeHandlerFactory,e);case"keepContentFilter":return new Jd(e);case"keepEmptyFilter":return new eh(e);case"cascading":return new Gd(this,e);case"modifyIfUntyped":return new ko(this,e);case"range":return new gh(this,e);case"inferPreviousMark":throw Error(`Unexpected modifier '${e.type}'; it should have been removed during inference`);default:{let r=e,{type:n}=e;throw new Error(`Unknown modifier: ${n}`)}}}getLegacyScopeStage(e){switch(e.scopeType.type){default:return new wh(this.languageDefinitions,e)}}};async function MF(t,e,r){let n=t.registerReplaceEditList(e.document,r.filter(o=>o.isReplace)),i=await e.edit(r);return n(),i}async function Me({rangeUpdater:t,editor:e,selections:r,preserveCursorSelections:n,...i}){let o=Di(r),s=o.map(u=>{let m=r[u],d=DQ(m);return DF(e.document,d.selections,d.behavior)});n||s.push(DF(e.document,e.selections,1));let l=await("edits"in i?CQ(t,e,i.edits,s):FF(t,i.callback,e.document,s));return n||await e.setSelections(l.pop()),Object.fromEntries(o.map((u,m)=>[u,l[m]]))}function DF(t,e,r){return e.map(n=>FQ(t,n,n instanceof Ee?!n.isReversed:!0,r))}function DQ(t){return"selections"in t?t:{selections:t,behavior:1}}function FQ(t,e,r,n){return{range:e,isForward:r,expansionBehavior:{start:{type:n===1||n===3?"closed":"open"},end:{type:n===1||n===2?"closed":"open"}},offsets:{start:t.offsetAt(e.start),end:t.offsetAt(e.end)},text:t.getText(e)}}function IQ(t){return t.map(e=>e.map(({range:{start:r,end:n},isForward:i})=>i?new Ee(r,n):new Ee(n,r)))}async function FF(t,e,r,n){let i=t.registerRangeInfoList(r,rt(n));return await e(),i(),IQ(n)}async function CQ(t,e,r,n){return await FF(t,async()=>{if(!await MF(t,e,r))throw new Error("Could not apply edits")},e.document,n)}var _h=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e){return await Ie(k(),e,"pendingModification0"),{thatSelections:rt(await ot(e,async(n,i)=>{let o=i.map(({contentRange:u})=>u),s=NQ(n,o),l=k().getEditableTextEditor(n),{contentRanges:p}=await Me({rangeUpdater:this.rangeUpdater,editor:l,edits:s,selections:{contentRanges:o}});return kt(i,p).map(([u,m])=>({editor:u.editor,selection:m.toSelection(u.isReversed)}))}))}}};function NQ(t,e){let{document:r}=t,n=[];for(let i of e){let o=i.start,s=r.lineAt(o),l=s.text.slice(0,s.rangeTrimmed?.start?.character??s.range.start.character),p=s.text.slice(0,o.character).search(/\s+$/),u=p>-1?new j(new fe(s.lineNumber,p),o):o.toEmptyRange();n.push({range:u,text:`
`+l,isReplace:!u.isEmpty})}return n}function Eh(t){return t.length<2?t:oM(t).flatMap(([e,r])=>{if(r.length<2)return r;let n=[...r];n.sort((o,s)=>o.contentRange.start.compareTo(s.contentRange.start));let i=!0;for(;i;)[n,i]=OQ(n);return n})}function OQ(t){if(t.length<2)return[t,!1];let e=[],r=[];return t.forEach(n=>{r.length&&!LQ(r[r.length-1],n)?(e.push(IF(r)),r=[n]):r.push(n)}),e.push(IF(r)),[e,e.length!==t.length]}function IF(t){if(t.length===1)return t[0];let e=t[0],r=t[t.length-1];return Po(e,r)}function LQ(t,e){return!!t.getRemovalRange().intersection(e.getRemovalRange())}var zl=class{constructor(e,r){this.rangeUpdater=e;this.type=r}async decorateTargets(e,r){await Promise.all([Ie(k(),e,this.decoration.sourceStyle,this.decoration.getSourceRangeCallback),Ie(k(),r,this.decoration.destinationStyle)])}getEditsBringMove(e,r){let n=[],i=[],o=e.length!==r.length&&r.length===1;return e.forEach((s,l)=>{let p=r[l];if((s==null||p==null)&&!o)throw new Error("Targets must have same number of args");if(p!=null){let u;o?u=e.map((m,d)=>{let g=m.contentText,x=(p.isRaw?null:p.insertionDelimiter)??(m.isRaw?null:m.insertionDelimiter);return d>0&&x!=null?x+g:g}).join(""):u=s.contentText,i.push({edit:p.constructChangeEdit(u),editor:p.editor,originalTarget:p.target,isSource:!1})}else p=r[0];n.includes(s)||(n.push(s),this.type==="bring"&&i.push({edit:s.toDestination("to").constructChangeEdit(p.target.contentText),editor:s.editor,originalTarget:s,isSource:!0}))}),this.type==="move"&&Eh(n).forEach(s=>{i.push({edit:s.constructRemovalEdit(),editor:s.editor,originalTarget:s,isSource:!0})}),i}async performEditsAndComputeThatMark(e){return rt(await Oi(e,r=>r.editor,async(r,n)=>{let i=this.type!=="bring"?n:n.filter(({isSource:x})=>!x),o=this.type==="swap"?[]:n.filter(({isSource:x})=>x),s=this.type==="swap"?n:n.filter(({isSource:x})=>!x),l=o.map(({edit:x})=>x.range),p=s.map(({edit:x})=>x.range),u=k().getEditableTextEditor(r),{sourceEditRanges:m,destinationEditRanges:d}=await Me({rangeUpdater:this.rangeUpdater,editor:u,edits:i.map(({edit:x})=>x),selections:{sourceEditRanges:l,destinationEditRanges:{selections:p,behavior:0}}}),g=[...this.getMarks(o,m),...this.getMarks(s,d)];return g.sort((x,b)=>n.findIndex(v=>v.originalTarget===x.target)-n.findIndex(v=>v.originalTarget===b.target)),g}))}getMarks(e,r){return e.map((n,i)=>{let o=r[i],s=n.edit.updateRange(o),l=n.originalTarget;return{editor:n.editor,selection:s.toSelection(l.isReversed),isSource:n.isSource,target:l}})}async decorateThatMark(e){let r=n=>yn(n,e.find(i=>i.target===n).selection);return Promise.all([Ie(k(),e.filter(({isSource:n})=>n).map(({target:n})=>n),this.decoration.sourceStyle,r),Ie(k(),e.filter(({isSource:n})=>!n).map(({target:n})=>n),this.decoration.destinationStyle,r)])}calculateMarksBringMove(e){return{thatMark:e.filter(({isSource:r})=>!r),sourceMark:e.filter(({isSource:r})=>r)}}};function CF(t,e){return t.length===1?Array(e.length).fill(t[0]):t}var Rh=class extends zl{constructor(r){super(r,"bring");this.decoration={sourceStyle:"referenced",destinationStyle:"pendingModification0"};this.run=this.run.bind(this)}async run(r,n){r=CF(r,n),await this.decorateTargets(r,n.map(p=>p.target));let i=this.getEditsBringMove(r,n),o=await this.performEditsAndComputeThatMark(i),{thatMark:s,sourceMark:l}=this.calculateMarksBringMove(o);return await this.decorateThatMark(s),{thatSelections:s,sourceSelections:l}}},kh=class extends zl{constructor(r){super(r,"move");this.decoration={sourceStyle:"pendingDelete",destinationStyle:"pendingModification0",getSourceRangeCallback:UQ};this.run=this.run.bind(this)}async run(r,n){r=CF(r,n),await this.decorateTargets(r,n.map(p=>p.target));let i=this.getEditsBringMove(r,n),o=await this.performEditsAndComputeThatMark(i),{thatMark:s,sourceMark:l}=this.calculateMarksBringMove(o);return await this.decorateThatMark(s),{thatSelections:s,sourceSelections:l}}},Ph=class extends zl{constructor(r){super(r,"swap");this.decoration={sourceStyle:"pendingModification1",destinationStyle:"pendingModification0"};this.run=this.run.bind(this)}async run(r,n){await this.decorateTargets(r,n);let i=this.getEditsSwap(r,n),o=await this.performEditsAndComputeThatMark(i);return await this.decorateThatMark(o),{thatSelections:o,sourceSelections:[]}}getEditsSwap(r,n){let i=[];return r.forEach((o,s)=>{let l=n[s];if(o==null||l==null)throw new Error("Targets must have same number of args");i.push({edit:l.toDestination("to").constructChangeEdit(o.contentText),editor:l.editor,originalTarget:l,isSource:!1}),i.push({edit:o.toDestination("to").constructChangeEdit(l.contentText),editor:o.editor,originalTarget:o,isSource:!0})}),i}};function UQ(t){return t.getRemovalHighlightRange()}var Gl=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e,r){Mr(e);let{returnValue:n}=await this.actions.getText.run(e,{showDecorations:!1}),{thatSelections:i}=await this.actions.wrapWithPairedDelimiter.run(r,n[0]+"(",")");return{thatSelections:i}}};var Kl=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){let r=wt(e),n=e.map(o=>new $e({editor:o.editor,isReversed:o.isReversed,contentRange:o.contentRange})),{thatTargets:i}=await this.actions.remove.run(n);return i!=null&&await k().getEditableTextEditor(r).setSelections(i.map(({contentSelection:o})=>o),{focusEditor:!0}),{thatTargets:i}}};var pc=t=>new It({editor:t.editor,isReversed:t.selection.isReversed,contentRange:t.selection,hasExplicitRange:!0});var uc=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e,r){r.showDecorations&&await Ie(k(),e,"referenced"),r.ensureSingleEditor&&wt(e),r.ensureSingleTarget&&Mr(e);let n=k().activeEditableTextEditor,i=r.setSelection?iM:ot,o=rt(await i(e,(s,l)=>this.runForEditor(r,s,l)));return r.setSelection&&r.restoreSelection&&n!=null&&!n.isActive&&await n.focus(),{thatTargets:o}}async runForEditor(e,r,n){let i=k().getEditableTextEditor(r),o=r.selections,s=r.document.version,l=n.map(m=>m.contentSelection);e.setSelection&&await i.setSelections(l,{focusEditor:!0,revealRange:!1});let{originalSelections:p,targetSelections:u}=await Me({rangeUpdater:this.rangeUpdater,editor:i,callback:()=>e.callback(i,n),preserveCursorSelections:!0,selections:{originalSelections:o,targetSelections:l}});return e.setSelection&&e.restoreSelection&&await i.setSelections(p),r.document.version===s?n:u.map(m=>pc({editor:r,selection:m}))}};var _t=class{constructor(e){this.ensureSingleEditor=!1;this.ensureSingleTarget=!1;this.restoreSelection=!0;this.showDecorations=!0;this.callbackAction=new uc(e),this.run=this.run.bind(this)}async run(e,{showDecorations:r}={}){let n=k().capabilities.commands[this.command];if(n==null)throw Error(`Action ${this.command} is not supported by your ide`);let{acceptsLocation:i}=n;return this.callbackAction.run(e,{callback:(o,s)=>HQ(o,i?s.map(l=>l.contentRange):void 0,this.command),setSelection:!i,ensureSingleEditor:this.ensureSingleEditor,ensureSingleTarget:this.ensureSingleTarget,restoreSelection:this.restoreSelection,showDecorations:r??this.showDecorations})}},Ah=class extends _t{constructor(){super(...arguments);this.command="clipboardCopy";this.ensureSingleEditor=!0}},Mh=class extends _t{constructor(){super(...arguments);this.command="toggleLineComment"}},Dh=class extends _t{constructor(){super(...arguments);this.command="indentLine"}},Fh=class extends _t{constructor(){super(...arguments);this.command="outdentLine"}},Ih=class extends _t{constructor(){super(...arguments);this.command="fold"}},Ch=class extends _t{constructor(){super(...arguments);this.command="unfold"}},Nh=class extends _t{constructor(){super(...arguments);this.command="rename";this.ensureSingleTarget=!0}},Oh=class extends _t{constructor(){super(...arguments);this.command="showReferences";this.ensureSingleTarget=!0}},Lh=class extends _t{constructor(){super(...arguments);this.command="quickFix";this.ensureSingleTarget=!0}},Uh=class extends _t{constructor(){super(...arguments);this.command="revealDefinition";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Hh=class extends _t{constructor(){super(...arguments);this.command="revealTypeDefinition";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Vh=class extends _t{constructor(){super(...arguments);this.command="showHover";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Bh=class extends _t{constructor(){super(...arguments);this.command="showDebugHover";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Wh=class extends _t{constructor(){super(...arguments);this.command="extractVariable";this.ensureSingleTarget=!0;this.restoreSelection=!1}},$h=class extends _t{constructor(){super(...arguments);this.command="gitAccept";this.ensureSingleTarget=!0}},jh=class extends _t{constructor(){super(...arguments);this.command="gitRevert";this.ensureSingleTarget=!0}},qh=class extends _t{constructor(){super(...arguments);this.command="gitStage";this.ensureSingleTarget=!0}},zh=class extends _t{constructor(){super(...arguments);this.command="gitUnstage";this.ensureSingleTarget=!0}};function HQ(t,e,r){switch(r){case"toggleLineComment":return t.toggleLineComment(e);case"indentLine":return t.indentLine(e);case"outdentLine":return t.outdentLine(e);case"clipboardCopy":return t.clipboardCopy(e);case"fold":return t.fold(e);case"unfold":return t.unfold(e);case"insertLineAfter":return t.insertLineAfter(e);case"rename":return t.rename(e?.[0]);case"showReferences":return t.showReferences(e?.[0]);case"quickFix":return t.quickFix(e?.[0]);case"revealDefinition":return t.revealDefinition(e?.[0]);case"revealTypeDefinition":return t.revealTypeDefinition(e?.[0]);case"showHover":return t.showHover(e?.[0]);case"showDebugHover":return t.showDebugHover(e?.[0]);case"extractVariable":return t.extractVariable(e?.[0]);case"gitAccept":return t.gitAccept(e?.[0]);case"gitRevert":return t.gitRevert(e?.[0]);case"gitStage":return t.gitStage(e?.[0]);case"gitUnstage":return t.gitUnstage(e?.[0]);case"highlight":throw Error("Highlight command not supported as simple action")}}var Gh=class{constructor(e,r){this.actions=e;this.rangeUpdater=r;this.run=this.run.bind(this)}async run(e,r={showDecorations:!0}){if(k().capabilities.commands.clipboardCopy!=null)return new Ah(this.rangeUpdater).run(e,r);r.showDecorations&&await Ie(k(),e,"referenced");let n=e.map(i=>i.contentText).join(`
`);return await k().clipboard.writeText(n),{thatTargets:e}}};var Kh=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){await k().flashRanges(e.flatMap(VQ));let r={showDecorations:!1};await this.actions.copyToClipboard.run(e,r);let{thatTargets:n}=await this.actions.remove.run(e,r);return{thatTargets:n}}};function VQ(t){let{editor:e,contentRange:r}=t,n=t.getRemovalHighlightRange(),i=[{editor:e,range:lr(r),style:"referenced"}];return n.type==="line"?i.push({editor:e,range:n,style:"pendingDelete"}):i.push(...BQ(r,n).map(o=>({editor:e,range:lr(o),style:"pendingDelete"}))),i}function BQ(t,e){let{start:r,end:n}=t,{start:i,end:o}=e,s=[];return i.isBefore(r)&&s.push(new j(i,r)),o.isAfter(n)&&s.push(new j(n,o)),s}var Ql=class{constructor(){this.run=this.run.bind(this)}async run(e){return await ot(e,async(r,n)=>{let i=r.selections.filter(o=>!n.some(s=>{let l=s.contentRange.intersection(o);return l&&(!l.isEmpty||o.isEmpty)}));if(i.length===0)throw new ab;await k().getEditableTextEditor(r).setSelections(i)}),{thatTargets:e}}},ab=class extends Error{constructor(){super("Can't deselect every selection. At least one is required"),this.name="SelectionRequiredError"}};async function NF(t,e,r,n){let i=r.destinations.map((b,v)=>{if(n||r.actionTypes[v]==="edit")return{destination:b,index:v}}).filter(b=>!!b);if(i.length===0)return r;let o=i.map(b=>b.destination.constructChangeEdit("")),s=r.cursorRanges.map((b,v)=>({range:b,index:v})).filter(({range:b})=>b!=null),l=s.map(({index:b})=>b),p=s.map(({range:b})=>b),u=o.map(b=>b.range),{thatRanges:m,cursorRanges:d,editRanges:g}=await Me({rangeUpdater:t,editor:e,edits:o,preserveCursorSelections:!0,selections:{thatRanges:r.thatRanges,cursorRanges:p,editRanges:{selections:u,behavior:0}}}),x=[...r.cursorRanges];return kt(l,d).forEach(([b,v])=>{x[b]=v}),i.forEach((b,v)=>{let F=o[v].updateRange(g[v]);x[b.index]=F}),{destinations:r.destinations,actionTypes:r.actionTypes,thatRanges:m,cursorRanges:x}}async function OF({acceptsLocation:t},e,r,n){let i=n.destinations.map((d,g)=>{if(n.actionTypes[g]==="insertLineAfter")return{destination:d,index:g}}).filter(d=>!!d);if(i.length===0)return n;let o=i.map(({destination:d})=>d.contentRange),s=n.destinations.map(({contentRange:d})=>d),l=async()=>{t?await r.insertLineAfter(o):(await r.setSelections(o.map(d=>d.toSelection(!1))),await r.focus(),await r.insertLineAfter())},{targetRanges:p,thatRanges:u}=await Me({rangeUpdater:e,editor:r,callback:l,preserveCursorSelections:!0,selections:{targetRanges:s,thatRanges:n.thatRanges}}),m=[...n.cursorRanges];return i.forEach((d,g)=>{m[d.index]=r.selections[g]}),{destinations:n.destinations.map((d,g)=>d.withTarget(d.target.withContentRange(p[g]))),actionTypes:n.actionTypes,thatRanges:u,cursorRanges:m}}async function LF(t,e){let r=Mr(e),n=k().getEditableTextEditor(r.editor),i=r.insertionMode==="before";if(r.insertionMode==="to")throw Error(`Unsupported insertion mode '${r.insertionMode}' for notebookcapell`);return await t.setSelection.run([r.target]),i?await n.editNewNotebookCellAbove():await n.editNewNotebookCellBelow(),{thatSelections:gn([r.target.thatTarget])}}var Qh=class{constructor(e,r){this.rangeUpdater=e;this.actions=r;this.run=this.run.bind(this)}async run(e){if(e.some(({target:l})=>l.isNotebookCell))return LF(this.actions,e);let r=k().getEditableTextEditor(wt(e)),n={destinations:e,actionTypes:e.map(l=>l.getEditNewActionType()),thatRanges:e.map(({target:l})=>l.thatTarget.contentRange),cursorRanges:new Array(e.length).fill(void 0)},i=k().capabilities.commands.insertLineAfter,o=i!=null;o&&(n=await OF(i,this.rangeUpdater,r,n)),n=await NF(this.rangeUpdater,r,n,!o);let s=n.destinations.map((l,p)=>{let u=n.cursorRanges[p];if(u==null)throw Error("Cursor range is undefined for destination");return u.toSelection(l.target.isReversed)});return await r.setSelections(s,{focusEditor:!0}),{thatSelections:gn(n.destinations.map(l=>l.target),n.thatRanges)}}};var Zh=class{constructor(e,r){this.actions=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(si)]}run(e){return this.actions.editNew.run(e.map(r=>r.toDestination(this.insertionMode)))}},Yh=class extends Zh{constructor(){super(...arguments);this.insertionMode="before"}},Xh=class extends Zh{constructor(){super(...arguments);this.insertionMode="after"}};var Zl=class{constructor(e){this.callbackAction=new uc(e),this.run=this.run.bind(this)}async run(e,r,{commandArgs:n,ensureSingleEditor:i,ensureSingleTarget:o,restoreSelection:s,showDecorations:l}={}){let p=n??[];return this.callbackAction.run(e,{callback:()=>k().executeCommand(r,...p),setSelection:!0,ensureSingleEditor:i??!1,ensureSingleTarget:o??!1,restoreSelection:s??!0,showDecorations:l??!0})}};var Jh=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){Mr(e);let{returnValue:r,thatTargets:n}=await this.actions.getText.run(e),[i]=r,o;return i.length>200?(o=i.substring(0,200),ta(k().messages,"truncatedSearchText","Search text is longer than 200 characters; truncating")):o=i,await this.find(o),{thatTargets:n}}},eg=class extends Jh{find(e){return k().findInDocument(e)}},tg=class extends Jh{find(e){return k().findInWorkspace(e)}};var rg=class{constructor(){this.run=this.run.bind(this)}async run(e){return await Ie(k(),e,"referenced"),{thatTargets:e}}};var fc=class{constructor(e){this.options=e;this.run=this.run.bind(this)}async run(e){let r=Mr(e);return await Ie(k(),e,"referenced"),await k().getEditableTextEditor(r.editor).openLink(r.contentRange,this.options),{thatSelections:gn(e)}}};function UF(t){let e=t.split(/^---$/m),r={snippets:[]};for(let n of e){let i=n.match(/^-$/m),o=i!=null?n.slice(0,i.index):n,s=i!=null?n.slice(i.index+i[0].length):null,l=s?qQ(s):null,p=WQ(o);if(l!=null){p==null&&(p={variables:[]});let{variables:u,...m}=p;r.snippets.push({...m,body:l,variables:u})}else if(p!=null){if(r.header!=null||r.snippets.length!==0)throw Error("Header snippet must be first in file");r.header=p}}return r}function WQ(t){let e={variables:[]},r=$Q(t);if(Object.keys(r).length===0)return;let n={};for(let[i,o]of Object.entries(r))switch(i){case"name":e.name=o;break;case"description":e.description=o;break;case"phrase":e.phrases=Yl(o);break;case"insertionScope":e.insertionScopes=Yl(o);break;case"language":e.languages=Yl(o);break;default:if(!i.startsWith("$"))throw Error(`Invalid key '${i}'`);n[i]=o}return e.variables=jQ(n),e}function $Q(t){let e=t.split(/\r?\n/).map(n=>n.trim()).filter(Boolean),r={};for(let n of e){let i=n.split(":");if(i.length!==2)throw Error(`Invalid line '${n}'`);let o=i[0].trim(),s=i[1].trim();if(o.length===0||s.length===0)throw Error(`Invalid line '${n}'`);if(r[o]!=null)throw Error(`Duplicate key '${o}' in '${t}'`);r[o]=s}return r}function jQ(t){let e={},r=n=>(e[n]==null&&(e[n]={name:n}),e[n]);for(let[n,i]of Object.entries(t)){let o=n.split(".");if(o.length!==2)throw Error(`Invalid variable key '${n}'`);let s=o[0].slice(1);switch(o[1]){case"insertionFormatter":r(s).insertionFormatters=Yl(i);break;case"wrapperPhrase":r(s).wrapperPhrases=Yl(i);break;case"wrapperScope":r(s).wrapperScope=i;break;default:throw Error(`Invalid variable key '${n}'`)}}return Object.values(e)}function qQ(t){let e=t.match(/^[ \t]*\S/m);if(e?.index!=null)return t.slice(e.index).trimEnd().split(/\r?\n/).map(r=>r.trimEnd())}function Yl(t){return t.split("|").map(e=>e.trim())}function VF(t){let e=[];t.header!=null&&e.push(HF(t.header)),e.push(...t.snippets.map(HF));let r=e.filter(Boolean).join(`
---

`);return r?r+`
---
`:""}function HF(t){let e=[Ao("name",t.name),Ao("description",t.description),Ao("language",t.languages),Ao("phrase",t.phrases),Ao("insertionScope",t.insertionScopes)].filter(Boolean);return t.variables.length>0&&(e.length>0&&e.push(""),e.push(...zQ(t.variables))),"body"in t&&e.push("-",...t.body),e.join(`
`)}function zQ(t){let e=[...t];return e.sort(GQ),e.flatMap(r=>[Ao(`$${r.name}.insertionFormatter`,r.insertionFormatters),Ao(`$${r.name}.wrapperPhrase`,r.wrapperPhrases),Ao(`$${r.name}.wrapperScope`,r.wrapperScope)]).filter(Boolean)}function Ao(t,e){return e==null?"":Array.isArray(e)?`${t}: ${e.join(" | ")}`:`${t}: ${e}`}function GQ(t,e){return t.name==="0"?1:e.name==="0"?-1:t.name.localeCompare(e.name)}function BF(t,e){let r=[],n=0,i=null,[o,...s]=t.split(/\r?\n/);return[{text:e+o,startIndex:e.length},...s.map(p=>({text:p,startIndex:0}))].forEach(({text:p,startIndex:u})=>{let m=p.match(/^\s*/)?.[0]??"",d=m.length;i!=null&&(m.length>i.length?n++:m.length<i.length&&n--),i=m;let g=Math.max(d,u),x=UT("	",n),b=p.slice(g);r.push(x+b)}),r}function WF(t,e){let r=VT(e,o=>o.offsets.start),n="",i=0;for(let o of r)n+=t.slice(i,o.offsets.start)+o.text,i=o.offsets.end;return n+=t.slice(i),n}var mc=class{constructor(e){this.snippets=e;this.run=this.run.bind(this)}async run(e,r,n){if(r==null)throw new Error("Directory argument is required for GenerateSnippet action. Please update Cursorless Talon");let i=Mr(e),o=i.editor;if(Ie(k(),e,"referenced"),n==null&&(n=await k().showInputBox({prompt:"Name of snippet",placeHolder:"helloWorld"}),!n))return{};let s=o.document.offsetAt(i.contentRange.start),l=QQ(o,i.contentRange),p=l.map((ae,le)=>({offsets:{start:o.document.offsetAt(ae.start)-s,end:o.document.offsetAt(ae.end)-s},name:le===l.length-1?"0":`${le+1}`})),u=o.document.getText(new j(i.contentRange.start.with(void 0,0),i.contentRange.start)),m=o.document.getText(i.contentRange),d=WF(m,[...mn(m,/\$|\\/g,ae=>({offsets:{start:ae.index,end:ae.index+ae[0].length},text:`\\${ae[0]}`})),...p.map(({offsets:ae,name:le})=>({offsets:ae,text:`$${le}`}))]),g=BF(d,u),x,b={snippets:[]};k().runMode==="test"?x=k().getEditableTextEditor(o):(x=k().getEditableTextEditor(await this.snippets.openNewSnippetFile(n,r)),b=UF(x.document.getText())),await x.setSelections([x.document.range.toSelection(!1)]);let v=1,{header:I}=b,F=b.header?.phrases!=null?void 0:[`${sb}${v++}`],V=ae=>{let le=I?.variables?.some(st=>st.name===ae.name&&st.wrapperPhrases!=null);return{name:ae.name,wrapperPhrases:le?void 0:[`${sb}${v++}`]}},Z={name:I?.name===n?void 0:n,phrases:F,languages:KQ(o,I),body:g,variables:p.map(V)};b.snippets.push(Z);let oe=VF(b).replace(/\$/g,"\\$").replaceAll(sb,"$");return await x.insertSnippet(oe),{thatSelections:e.map(({editor:ae,contentSelection:le})=>({editor:ae,selection:le}))}}};function KQ(t,e){if(!e?.languages?.includes(t.document.languageId))return[t.document.languageId]}function QQ(t,e){let r=t.selections.filter(n=>e.contains(n));return r.sort((n,i)=>n.start.compareTo(i.start)),r}var sb="PLACEHOLDER_VFA77zcbLD6wXNmfMAay";var Xl=class{constructor(){this.run=this.run.bind(this)}async run(e){return{returnValue:e.map(({contentRange:r})=>({contentRange:r})),thatTargets:e}}};var Jl=class{constructor(){this.run=this.run.bind(this)}async run(e,{showDecorations:r=!0,ensureSingleTarget:n=!1}={}){return r&&await Ie(k(),e,"referenced"),n&&Mr(e),{returnValue:e.map(i=>i.contentText),thatTargets:e}}};var ep=class{constructor(){this.run=this.run.bind(this)}async run(e,r){if(k().capabilities.commands.highlight==null)throw Error("The highlight action is not supported by your ide");return e.length===0?await Promise.all(k().visibleTextEditors.map(n=>k().setHighlightRanges(r,n,[]))):await ot(e,(n,i)=>k().setHighlightRanges(r,n,i.map(o=>yn(o,o.contentRange)))),{thatTargets:e}}};var ng=class{constructor(e,r){this.rangeUpdater=e;this.isIndent=r;this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e){return this.hasCapability()?this.runSimpleCommandAction(e):(await Ie(k(),e,"pendingModification0"),{thatTargets:rt(await ot(e,this.runForEditor))})}hasCapability(){return this.isIndent?k().capabilities.commands.indentLine!=null:k().capabilities.commands.outdentLine!=null}runSimpleCommandAction(e){return(this.isIndent?new Dh(this.rangeUpdater):new Fh(this.rangeUpdater)).run(e)}async runForEditor(e,r){let n=this.isIndent?ZQ(e,r):YQ(e,r),{targetSelections:i}=await Me({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(e),edits:n,selections:{targetSelections:r.map(({contentSelection:o})=>o)}});return kt(r,i).map(([o,s])=>pc({editor:e,selection:s.toSelection(o.isReversed)}))}},ig=class extends ng{constructor(e){super(e,!0)}},og=class extends ng{constructor(e){super(e,!1)}};function ZQ(t,e){let{document:r}=t,n=$F(e),i=XQ(t);return n.map(o=>({range:r.lineAt(o).range.start.toEmptyRange(),text:i}))}function YQ(t,e){let{document:r}=t,n=$F(e),i=JQ(t);return n.map(o=>{let s=r.lineAt(o),l=s.text.match(i),{start:p}=s.range,u=p.translate(void 0,l?.[0].length);return{range:new j(p,u),text:""}})}function $F(t){let e=new Set;for(let r of t){let{start:n,end:i}=r.contentRange;for(let o=n.line;o<=i.line;++o)e.add(o)}return[...e]}function XQ(t){if(t.options.insertSpaces){let e=jF(t);return" ".repeat(e)}return"	"}function JQ(t){if(t.options.insertSpaces){let e=jF(t);return new RegExp(`^[ ]{1,${e}}`)}return/^\t/}function jF(t){return typeof t.options.tabSize=="number"?t.options.tabSize:4}var ag=class{constructor(e,r,n){this.rangeUpdater=e;this.modifierStageFactory=r;this.isBefore=n;this.getFinalStages=()=>[this.modifierStageFactory.create(si)];this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e){let r=rt(await ot(e,this.runForEditor));return await k().flashRanges(r.flatMap(n=>n.thatMark.map(i=>({editor:i.editor,range:lr(i.selection),style:"justAdded"})))),{sourceSelections:r.flatMap(({sourceMark:n})=>n),thatSelections:r.flatMap(({thatMark:n})=>n)}}async runForEditor(e,r){let n=this.isBefore?"after":"before",i=r.flatMap(g=>g.toDestination(n).constructChangeEdit(g.contentText)),o=r.map(({contentSelection:g})=>g),s=i.map(({range:g})=>g),l=k().getEditableTextEditor(e),{contentSelections:p,editRanges:u}=await Me({rangeUpdater:this.rangeUpdater,editor:l,edits:i,selections:{contentSelections:o,editRanges:{selections:s,behavior:0}}}),m=kt(i,u).map(([g,x])=>g.updateRange(x)),d=e.selections[0];return p.some(g=>g.intersection(d)!=null)&&await l.revealRange(d),{sourceMark:gn(r,m),thatMark:gn(r,p)}}},sg=class extends ag{constructor(e,r){super(e,r,!0)}},cg=class extends ag{constructor(e,r){super(e,r,!1)}};var tp=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(si)]}async run(e){let r=await ot(e,async(i,o)=>{let s=this.getEdits(o),l=o.map(m=>m.thatTarget.contentSelection),{contentSelections:p,editRanges:u}=await Me({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(i),edits:s,selections:{contentSelections:l,editRanges:{selections:s.map(m=>m.range),behavior:0}}});return{thatMark:p.map(m=>({editor:i,selection:m})),flashRanges:aa(s,u).map(([m,d])=>({editor:i,range:m.isLine?m.updateRange(d):d,isLine:m.isLine}))}});return await k().flashRanges(r.flatMap(i=>i.flashRanges.map(({editor:o,range:s,isLine:l})=>({editor:o,range:l?qr(s):lr(s),style:"justAdded"})))),{thatSelections:r.flatMap(i=>i.thatMark)}}},lg=class extends tp{constructor(e,r){super(e,r)}getEdits(e){return e.flatMap(r=>[fg(r,"before"),fg(r,"after")])}},pg=class extends tp{constructor(e,r){super(e,r)}getEdits(e){return e.map(r=>fg(r,"before"))}},ug=class extends tp{constructor(e,r){super(e,r)}getEdits(e){return e.map(r=>fg(r,"after"))}};function fg(t,e){return{...t.toDestination(e).constructChangeEdit("",!0),isLine:t.textualType==="line"}}function zF(t,e){return eZ(qF(t),qF(e))}function qF(t){if(t.languages!=null)return{langIds:t.languages}}function eZ(t,e){if(t==null&&e==null)return 0;if(t==null)return-1;if(e==null)return 1;if(t.langIds==null&&e.langIds!=null)return-1;if(e.langIds==null&&t.langIds!=null)return 1;let r=tZ(t.scopeTypes,e.scopeTypes);return r!==0?r:t.langIds==null?0:e.langIds.length-t.langIds.length}function tZ(t,e){return t==null&&e!=null?-1:e==null&&t!=null?1:0}function dc(t,e){if(t.type==="named")throw new Error("Cursorless snippets are deprecated. Please use community snippets. Update to latest cursorless-talon and say 'cursorless migrate snippets'.");if(t.type==="custom")return t;let r=nZ(t.snippets,e);r.sort(zF);let n=r[0];if(n==null){let i=rZ(t.snippets);throw new Error(`No snippet available for language '${e}'. Available languages: ${i}`)}return n}function rZ(t){let e=new Set(t.flatMap(r=>r.languages??[]));return Array.from(e).sort().join(", ")}function nZ(t,e){return t.filter(r=>r.languages==null?!0:r.languages.includes(e))}var cb=class t{constructor(){this.value="";this.pos=0}static{this._table={36:0,58:1,44:2,123:3,125:4,92:5,47:6,124:7,43:11,45:12,63:13}}static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return e===95||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};let e=this.pos,r=0,n=this.value.charCodeAt(e),i;if(i=t._table[n],typeof i=="number")return this.pos+=1,{type:i,pos:e,len:1};if(t.isDigitCharacter(n)){i=8;do r+=1,n=this.value.charCodeAt(e+r);while(t.isDigitCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}if(t.isVariableCharacter(n)){i=9;do n=this.value.charCodeAt(e+ ++r);while(t.isVariableCharacter(n)||t.isDigitCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}i=10;do r+=1,n=this.value.charCodeAt(e+r);while(!isNaN(n)&&typeof t._table[n]>"u"&&!t.isDigitCharacter(n)&&!t.isVariableCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}},Mo=class{constructor(){this._children=[]}appendChild(e){return e instanceof Wt&&this._children[this._children.length-1]instanceof Wt?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,r){let{parent:n}=e,i=n.children.indexOf(e),o=n.children.slice(0);o.splice(i,1,...r),n._children=o,function s(l,p){for(let u of l)u.parent=p,s(u.children,u)}(r,n)}get children(){return this._children}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof hg)return e;e=e.parent}}toString(){return this.children.reduce((e,r)=>e+r.toString(),"")}len(){return 0}},Wt=class t extends Mo{constructor(r){super();this.value=r}static escape(r){return r.replace(/\$|}|\\/g,"\\$&")}toString(){return this.value}toTextmateString(){return t.escape(this.value)}len(){return this.value.length}clone(){return new t(this.value)}},mg=class extends Mo{},$t=class t extends mg{constructor(r){super();this.index=r}static compareByIndex(r,n){return r.index===n.index?0:r.isFinalTabstop?1:n.isFinalTabstop||r.index<n.index?-1:r.index>n.index?1:0}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof dg?this._children[0]:void 0}toTextmateString(){let r="";return this.transform&&(r=this.transform.toTextmateString()),this.children.length===0&&!this.transform?`$${this.index}`:this.children.length===0?`\${${this.index}${r}}`:this.choice?`\${${this.index}|${this.choice.toTextmateString()}|${r}}`:`\${${this.index}:${this.children.map(n=>n.toTextmateString()).join("")}${r}}`}clone(){let r=new t(this.index);return this.transform&&(r.transform=this.transform.clone()),r._children=this.children.map(n=>n.clone()),r}},dg=class t extends Mo{constructor(){super(...arguments);this.options=[]}appendChild(r){return r instanceof Wt&&(r.parent=this,this.options.push(r)),this}toString(){return this.options[0].value}toTextmateString(){return this.options.map(r=>r.value.replace(/\||,|\\/g,"\\$&")).join(",")}len(){return this.options[0].len()}clone(){let r=new t;return this.options.forEach(r.appendChild,r),r}},lb=class t extends Mo{constructor(){super(...arguments);this.regexp=new RegExp("")}resolve(r){let n=this,i=!1,o=r.replace(this.regexp,function(){return i=!0,n._replace(Array.prototype.slice.call(arguments,0,-2))});return!i&&this._children.some(s=>s instanceof Vn&&!!s.elseValue)&&(o=this._replace([])),o}_replace(r){let n="";for(let i of this._children)if(i instanceof Vn){let o=r[i.index]||"";o=i.resolve(o),n+=o}else n+=i.toString();return n}toString(){return""}toTextmateString(){return`/${this.regexp.source}/${this.children.map(r=>r.toTextmateString())}/${(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")}`}clone(){let r=new t;return r.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),r._children=this.children.map(n=>n.clone()),r}},Vn=class t extends Mo{constructor(r,n,i,o){super();this.index=r;this.shorthandName=n;this.ifValue=i;this.elseValue=o}resolve(r){return this.shorthandName==="upcase"?r?r.toLocaleUpperCase():"":this.shorthandName==="downcase"?r?r.toLocaleLowerCase():"":this.shorthandName==="capitalize"?r?r[0].toLocaleUpperCase()+r.substr(1):"":this.shorthandName==="pascalcase"?r?this._toPascalCase(r):"":this.shorthandName==="camelcase"?r?this._toCamelCase(r):"":r&&typeof this.ifValue=="string"?this.ifValue:!r&&typeof this.elseValue=="string"?this.elseValue:r||""}_toPascalCase(r){let n=r.match(/[a-z0-9]+/gi);return n?n.map(i=>i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()).join(""):r}_toCamelCase(r){let n=r.match(/[a-z0-9]+/gi);return n?n.map((i,o)=>o===0?i.toLowerCase():i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()).join(""):r}toTextmateString(){let r="${";return r+=this.index,this.shorthandName?r+=`:/${this.shorthandName}`:this.ifValue&&this.elseValue?r+=`:?${this.ifValue}:${this.elseValue}`:this.ifValue?r+=`:+${this.ifValue}`:this.elseValue&&(r+=`:-${this.elseValue}`),r+="}",r}clone(){return new t(this.index,this.shorthandName,this.ifValue,this.elseValue)}},Bn=class t extends mg{constructor(r){super();this.name=r}resolve(r){let n=r.resolve(this);return this.transform&&(n=this.transform.resolve(n||"")),n!==void 0?(this._children=[new Wt(n)],!0):!1}toTextmateString(){let r="";return this.transform&&(r=this.transform.toTextmateString()),this.children.length===0?`\${${this.name}${r}}`:`\${${this.name}:${this.children.map(n=>n.toTextmateString()).join("")}${r}}`}clone(){let r=new t(this.name);return this.transform&&(r.transform=this.transform.clone()),r._children=this.children.map(n=>n.clone()),r}};function GF(t,e){let r=[...t];for(;r.length>0;){let n=r.shift();if(!e(n))break;r.unshift(...n.children)}}var hg=class t extends Mo{get placeholderInfo(){if(!this._placeholders){let e=[],r;this.walk(function(n){return n instanceof $t&&(e.push(n),r=!r||r.index<n.index?n:r),!0}),this._placeholders={all:e,last:r}}return this._placeholders}get placeholders(){let{all:e}=this.placeholderInfo;return e}offset(e){let r=0,n=!1;return this.walk(i=>i===e?(n=!0,!1):(r+=i.len(),!0)),n?r:-1}fullLen(e){let r=0;return GF([e],n=>(r+=n.len(),!0)),r}enclosingPlaceholders(e){let r=[],{parent:n}=e;for(;n;)n instanceof $t&&r.push(n),n=n.parent;return r}resolveVariables(e){return this.walk(r=>(r instanceof Bn&&r.resolve(e)&&(this._placeholders=void 0),!0)),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,r){return this._placeholders=void 0,super.replace(e,r)}toTextmateString(){return this.children.reduce((e,r)=>e+r.toTextmateString(),"")}clone(){let e=new t;return this._children=this.children.map(r=>r.clone()),e}walk(e){GF(this.children,e)}},pi=class{constructor(){this._scanner=new cb;this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}text(e){return this.parse(e).toString()}parse(e,r,n){this._scanner.text(e),this._token=this._scanner.next();let i=new hg;for(;this._parse(i););let o=new Map,s=[],l=0;i.walk(p=>(p instanceof $t&&(l+=1,p.isFinalTabstop?o.set(0,void 0):!o.has(p.index)&&p.children.length>0?o.set(p.index,p.children):s.push(p)),!0));for(let p of s){let u=o.get(p.index);if(u){let m=new $t(p.index);m.transform=p.transform;for(let d of u)m.appendChild(d.clone());i.replace(p,[m])}}return n||(n=l>0&&r),!o.has(0)&&n&&i.appendChild(new $t(0)),i}_accept(e,r){if(e===void 0||this._token.type===e){let n=r?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),n}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){let r=this._token;for(;this._token.type!==e;){if(this._token.type===14)return!1;if(this._token.type===5){let i=this._scanner.next();if(i.type!==0&&i.type!==4&&i.type!==5)return!1}this._token=this._scanner.next()}let n=this._scanner.value.substring(r.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),n}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let r;return(r=this._accept(5,!0))?(r=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||r,e.appendChild(new Wt(r)),!0):!1}_parseTabstopOrVariableName(e){let r,n=this._token;return this._accept(0)&&(r=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(r)?new $t(Number(r)):new Bn(r)),!0):this._backTo(n)}_parseComplexPlaceholder(e){let r,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(r=this._accept(8,!0))))return this._backTo(n);let o=new $t(Number(r));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new Wt("${"+r+":")),o.children.forEach(e.appendChild,e),!0}else if(o.index>0&&this._accept(7)){let s=new dg;for(;;){if(this._parseChoiceElement(s)){if(this._accept(2))continue;if(this._accept(7)&&(o.appendChild(s),this._accept(4)))return e.appendChild(o),!0}return this._backTo(n),!1}}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseChoiceElement(e){let r=this._token,n=[];for(;!(this._token.type===2||this._token.type===7);){let i;if((i=this._accept(5,!0))?i=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||i:i=this._accept(void 0,!0),!i)return this._backTo(r),!1;n.push(i)}return n.length===0?(this._backTo(r),!1):(e.appendChild(new Wt(n.join(""))),!0)}_parseComplexVariable(e){let r,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(r=this._accept(9,!0))))return this._backTo(n);let o=new Bn(r);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new Wt("${"+r+":")),o.children.forEach(e.appendChild,e),!0}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseTransform(e){let r=new lb,n="",i="";for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(6,!0)||o,n+=o;continue}if(this._token.type!==14){n+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(5,!0)||this._accept(6,!0)||o,r.appendChild(new Wt(o));continue}if(!(this._parseFormatString(r)||this._parseAnything(r)))return!1}for(;!this._accept(4);){if(this._token.type!==14){i+=this._accept(void 0,!0);continue}return!1}try{r.regexp=new RegExp(n,i)}catch{return!1}return e.transform=r,!0}_parseFormatString(e){let r=this._token;if(!this._accept(0))return!1;let n=!1;this._accept(3)&&(n=!0);let i=this._accept(8,!0);if(i)if(n){if(this._accept(4))return e.appendChild(new Vn(Number(i))),!0;if(!this._accept(1))return this._backTo(r),!1}else return e.appendChild(new Vn(Number(i))),!0;else return this._backTo(r),!1;if(this._accept(6)){let o=this._accept(9,!0);return!o||!this._accept(4)?(this._backTo(r),!1):(e.appendChild(new Vn(Number(i),o)),!0)}else if(this._accept(11)){let o=this._until(4);if(o)return e.appendChild(new Vn(Number(i),void 0,o,void 0)),!0}else if(this._accept(12)){let o=this._until(4);if(o)return e.appendChild(new Vn(Number(i),void 0,void 0,o)),!0}else if(this._accept(13)){let o=this._until(1);if(o){let s=this._until(4);if(s)return e.appendChild(new Vn(Number(i),void 0,o,s)),!0}}else{let o=this._until(4);if(o)return e.appendChild(new Vn(Number(i),void 0,void 0,o)),!0}return this._backTo(r),!1}_parseAnything(e){return this._token.type!==14?(e.appendChild(new Wt(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}};var gg=Object.freeze({CURRENT_YEAR:!0,CURRENT_YEAR_SHORT:!0,CURRENT_MONTH:!0,CURRENT_DATE:!0,CURRENT_HOUR:!0,CURRENT_MINUTE:!0,CURRENT_SECOND:!0,CURRENT_DAY_NAME:!0,CURRENT_DAY_NAME_SHORT:!0,CURRENT_MONTH_NAME:!0,CURRENT_MONTH_NAME_SHORT:!0,CURRENT_SECONDS_UNIX:!0,SELECTION:!0,CLIPBOARD:!0,TM_SELECTED_TEXT:!0,TM_CURRENT_LINE:!0,TM_CURRENT_WORD:!0,TM_LINE_INDEX:!0,TM_LINE_NUMBER:!0,TM_FILENAME:!0,TM_FILENAME_BASE:!0,TM_DIRECTORY:!0,TM_FILEPATH:!0,RELATIVE_FILEPATH:!0,BLOCK_COMMENT_START:!0,BLOCK_COMMENT_END:!0,LINE_COMMENT:!0,WORKSPACE_NAME:!0,WORKSPACE_FOLDER:!0,RANDOM:!0,RANDOM_HEX:!0,UUID:!0});function yg(t,e,r){let n=iZ(t)+1,i={};t.walk(o=>{if(o instanceof Bn){if(o.name===e)o.name="TM_SELECTED_TEXT";else if(r!=null&&Object.prototype.hasOwnProperty.call(r,o.name))o.parent.replace(o,[new Wt(r[o.name])]);else if(!gg[o.name]){let s;o.name in i?s=i[o.name]:(s=n++,i[o.name]=s);let l=new $t(s);o.children.forEach(p=>l.appendChild(p)),o.parent.replace(o,[l])}}else o instanceof $t&&(o.index.toString()===e?o.parent.replace(o,[new Bn("TM_SELECTED_TEXT")]):r!=null&&Object.prototype.hasOwnProperty.call(r,o.index)&&o.parent.replace(o,[new Wt(r[o.index])]));return!0})}function iZ(t){let e=0;return t.walk(r=>(r instanceof $t&&(e=Math.max(e,r.index)),!0)),e}function xg(t,e,r){let n=oZ(t)+1,i={};t.walk(o=>{if(o instanceof Bn){if(o.name===e)o.name="TM_SELECTED_TEXT";else if(r!=null&&Object.prototype.hasOwnProperty.call(r,o.name))o.parent.replace(o,[new Wt(r[o.name])]);else if(!gg[o.name]){let s;o.name in i?s=i[o.name]:(s=n++,i[o.name]=s);let l=new $t(s);o.children.forEach(p=>l.appendChild(p)),o.parent.replace(o,[l])}}else o instanceof $t&&o.index.toString()===e&&o.parent.replace(o,[new Bn("TM_SELECTED_TEXT")]);return!0})}function oZ(t){let e=0;return t.walk(r=>(r instanceof $t&&(e=Math.max(e,r.index)),!0)),e}function Tg(t,e,r){let n=e.map(o=>aZ(t,o,r)),i=n[0];if(!n.every(o=>o===i))throw new Error("Multiple snippet definitions match the given context");if(i===-1)throw new Error("Couldn't find matching snippet definition");return r[i]}function aZ(t,e,r){let n=e.editor.document.languageId;return r.findIndex(({scope:i})=>{if(i==null)return!0;let{langIds:o,scopeTypes:s,excludeDescendantScopeTypes:l}=i;if(o!=null&&!o.includes(n))return!1;if(s!=null){let p=s.concat(l??[]),u,m;for(let d of p)try{let g=t.create({type:"containingScope",scopeType:{type:d}}).run(e)[0];e.contentRange.isRangeEqual(g.contentRange)&&(g=t.create({type:"containingScope",scopeType:{type:d},ancestorIndex:1}).run(e)[0]),(u==null||u.contentRange.contains(g.contentRange))&&(u=g,m=d)}catch{continue}return m==null?!1:u!=null&&!(l??[]).includes(m)}return!0})}var KF=!1;function Sg(){KF||(ta(k().messages,"legacySnippets","Talon community snippets are now fully supported in Cursorless! Cursorless's experimental snippets are now deprecated, but in most cases we can help you migrate automatically. Update cursorless-talon and say 'cursorless migrate snippets'."),KF=!0)}var ZF={camelCase(t){if(t.length===0)return"";let[e,...r]=t;return e+r.map(QF).join("")},snakeCase(t){return t.join("_")},upperSnakeCase(t){return t.map(e=>e.toUpperCase()).join("_")},pascalCase(t){return t.map(QF).join("")}};function QF(t){return t.length===0?"":t[0].toUpperCase()+t.substr(1)}var rp=class{constructor(e,r,n,i){this.rangeUpdater=e;this.snippets=r;this.actions=n;this.modifierStageFactory=i;this.snippetParser=new pi;this.run=this.run.bind(this)}getFinalStages(e){let r=this.getScopeTypes(e);return r.length===0?[]:[new tc(this.modifierStageFactory,{type:"cascading",modifiers:r.map(n=>({type:"containingScope",scopeType:n}))})]}getScopeTypes(e){let{name:r}=e,i=this.snippets.getSnippetStrict(r).insertionScopeTypes;return i==null?[]:i.map(o=>({type:o}))}getSnippetInfo(e,r){let{name:n}=e,i=this.snippets.getSnippetStrict(n),o=Tg(this.modifierStageFactory,r,i.definitions);return{body:o.body.join(`
`),formatSubstitutions(s){return s==null?void 0:sZ(i,o,s)}}}async run(e,r){Sg();let n=k().getEditableTextEditor(wt(e));await this.actions.editNew.run(e);let{body:i,formatSubstitutions:o}=this.getSnippetInfo(r,n.selections.map(u=>new It({editor:n,contentRange:u,isReversed:!1,hasExplicitRange:!0}))),s=this.snippetParser.parse(i);xg(s,null,o(r.substitutions));let l=s.toTextmateString(),{editorSelections:p}=await Me({rangeUpdater:this.rangeUpdater,editor:n,callback:()=>n.insertSnippet(l),preserveCursorSelections:!0,selections:{editorSelections:{selections:n.selections,behavior:0}}});return{thatSelections:p.map(u=>({editor:n,selection:u}))}}};function sZ(t,e,r){return Object.fromEntries(Object.entries(r).map(([n,i])=>{let o=(e.variables??{})[n]?.formatter??(t.variables??{})[n]?.formatter;if(o==null)return[n,i];let s=ZF[o];if(s==null)throw new Error(`Couldn't find formatter ${o} for variable ${n}`);return[n,s(i.split(" "))]}))}var np=class{constructor(e,r,n,i){this.rangeUpdater=e;this.snippets=r;this.actions=n;this.modifierStageFactory=i;this.snippetParser=new pi;this.run=this.run.bind(this)}getFinalStages(e,r){if(r.type==="named")return this.legacy().getFinalStages(r);let n=wt(e),o=dc(r,n.document.languageId).scopeTypes??[];return o.length===0?[]:[new tc(this.modifierStageFactory,{type:"cascading",modifiers:o.map(s=>({type:"containingScope",scopeType:s}))})]}async run(e,r){if(r.type==="named")return this.legacy().run(e,r);let n=k().getEditableTextEditor(wt(e)),i=dc(r,n.document.languageId),o=this.snippetParser.parse(i.body),s=i.substitutions??r.substitutions;yg(o,null,s);let l=o.toTextmateString();await this.actions.editNew.run(e);let{editorSelections:p}=await Me({rangeUpdater:this.rangeUpdater,editor:n,callback:()=>n.insertSnippet(l),preserveCursorSelections:!0,selections:{editorSelections:{selections:n.selections,behavior:0}}});return{thatSelections:p.map(u=>({editor:n,selection:u}))}}legacy(){return new rp(this.rangeUpdater,this.snippets,this.actions,this.modifierStageFactory)}};var ip=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(si)]}async run(e){return await Ie(k(),e.map(({thatTarget:n})=>n),"pendingModification0"),{thatSelections:rt(await ot(e,async(n,i)=>{let{thatRanges:o}=await Me({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(n),edits:cZ(n,i),selections:{thatRanges:i.map(({contentRange:s})=>s)}});return aa(i,o).map(([s,l])=>({editor:n,selection:l.toSelection(s.isReversed)}))}))}}};function cZ(t,e){let r=[];for(let n of e){let i=n.textualType==="token"?lZ(n):pZ(n);r.push(...i)}return r}function lZ(t){let{editor:e,contentRange:r}=t,n=Dr(e.document.languageId).tokenMatcher,i=Tn(n,e,r,"forward");return Array.from(sv(i)).map(([o,s])=>({range:new j(o.end,s.start),text:"",isReplace:!0}))}function pZ(t){let{document:e}=t.editor,r=t.contentRange,n=r.start.line,i=r.isSingleLine?Math.min(n+1,e.lineCount-1):r.end.line,o=Ls(WM(n,i+1),s=>e.lineAt(s));return Array.from(sv(o)).map(([s,l])=>({range:new j(s.rangeTrimmed?.end??s.range.end,l.rangeTrimmed?.start??l.range.start),text:l.isEmptyOrWhitespace?"":" ",isReplace:!0}))}var vg=class{constructor(e,r){this.rangeUpdater=e;this.actions=r;this.run=this.run.bind(this)}async run(e){let r=k().getEditableTextEditor(wt(e)),n=k().activeEditableTextEditor,i=async()=>{await this.actions.editNew.run(e)},{cursorSelections:o}=await Me({rangeUpdater:this.rangeUpdater,editor:r,preserveCursorSelections:!0,callback:i,selections:{cursorSelections:r.selections}}),{originalCursorSelections:s,editorSelections:l}=await Me({rangeUpdater:this.rangeUpdater,editor:r,callback:()=>r.clipboardPaste(),selections:{originalCursorSelections:o,editorSelections:{selections:r.selections,behavior:0}}});return await r.setSelections(s),n!=null&&!n.isActive&&await n.focus(),await k().flashRanges(l.map(p=>({editor:r,range:lr(p),style:"justAdded"}))),{thatSelections:l.map(p=>({editor:r,selection:p}))}}};var bg=class{constructor(e){this.rangeUpdater=e;this.runForEditor=this.runForEditor.bind(this)}async run(e){let r=await k().clipboard.readText(),n=r.split(/\r?\n/g),i=e.length===n.length?aa(e,n).map(([s,l])=>({destination:s,text:l})):e.map(s=>({destination:s,text:r}));return{thatSelections:rt(await Oi(i,({destination:s})=>s.editor,this.runForEditor))}}async runForEditor(e,r){let n=r.map(({destination:s,text:l})=>s.constructChangeEdit(l)),{editSelections:i}=await Me({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(e),edits:n,selections:{editSelections:{selections:n.map(({range:s})=>s),behavior:0}}}),o=aa(n,i).map(([s,l])=>s.updateRange(l).toSelection(l.isReversed));return await k().flashRanges(o.map(s=>({editor:e,range:lr(s),style:"justAdded"}))),o.map(s=>({editor:e,selection:s}))}};var wg=class{constructor(e,r){this.run=this.run.bind(this),this.runner=k().capabilities.commands.clipboardPaste!=null?new vg(e,r):new bg(e)}run(e){return this.runner.run(e)}};var op=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e,{showDecorations:r=!0}={}){return e=Eh(e),r&&await Ie(k(),e,"pendingDelete",i=>i.getRemovalHighlightRange()),{thatTargets:rt(await ot(e,this.runForEditor))}}async runForEditor(e,r){let n=r.map(s=>s.constructRemovalEdit()),i=k().getEditableTextEditor(e),{editRanges:o}=await Me({rangeUpdater:this.rangeUpdater,editor:i,edits:n,selections:{editRanges:n.map(({range:s})=>s)}});return kt(r,o).map(([s,l])=>new yo({editor:s.editor,isReversed:s.isReversed,contentRange:l}))}};var ap=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}getTexts(e,r){if(Array.isArray(r))return r.length===1?Array(e.length).fill(r[0]):r;let n=[];for(let i=0;i<e.length;++i)n[i]=(r.start+i).toString();return n}async run(e,r){await Ie(k(),e.map(l=>l.target),"pendingModification0");let n=this.getTexts(e,r);if(e.length!==n.length)throw new Error("Targets and texts must have same length");let i=kt(e,n).map(([l,p])=>({editor:l.editor,target:l.target,edit:l.constructChangeEdit(p)})),o=[],s=[];return await Oi(i,l=>l.editor,async(l,p)=>{let u=p.map(({edit:g})=>g),{contentSelections:m,editRanges:d}=await Me({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(l),edits:u,selections:{contentSelections:p.map(({target:g})=>g.contentSelection),editRanges:{selections:u.map(({range:g})=>g),behavior:0}}});for(let[g,x]of kt(p,m))o.push(g.target.withContentRange(x));for(let[g,x]of kt(p,d))s.push({editor:l,selection:g.edit.updateRange(x).toSelection(!1)})}),{sourceTargets:o,thatSelections:s}}};var sp=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.getFinalStages=()=>[Xv(this.modifierStageFactory)];this.run=this.run.bind(this)}async run(e,r,n){let i=e.flatMap(s=>{let l=s.getBoundary();if(l.length!==2)throw Error("Target must have an opening and closing delimiter");return l});await Ie(k(),i,"pendingModification0");let o=await ot(i,async(s,l)=>{let p=l.map((d,g)=>({editor:s,range:d.contentRange,text:g%2===0?r:n})),{sourceRanges:u,thatRanges:m}=await Me({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(s),edits:p,selections:{sourceRanges:e.map(d=>d.thatTarget.contentRange),thatRanges:e.map(d=>d.contentRange)}});return{sourceMark:gn(e,u),thatMark:gn(e,m)}});return{sourceSelections:o.flatMap(({sourceMark:s})=>s),thatSelections:o.flatMap(({thatMark:s})=>s)}}};var cp=class{constructor(e){this.at=e;this.run=this.run.bind(this)}async run(e){let r=xl(e,s=>s.editor),n=Array.from(r,([s,l])=>({lineNumber:uZ(l,this.at),editor:s})),i=k().activeEditableTextEditor;for(let s of n)await k().getEditableTextEditor(s.editor).revealLine(s.lineNumber,this.at);i!=null&&!i.isActive&&await i.focus();let o=e.filter(s=>{let l=s.editor.visibleRanges,p=l[0].start.line,u=l[l.length-1].end.line;return s.contentRange.start.line>p||s.contentRange.end.line<u||s.contentRange.start.line===p&&s.contentRange.end.line===u});return await k().flashRanges(o.map(s=>({editor:s.editor,range:qr(s.contentRange),style:"referenced"}))),{thatTargets:e}}},_g=class extends cp{constructor(){super("top")}},Eg=class extends cp{constructor(){super("center")}},Rg=class extends cp{constructor(){super("bottom")}};function uZ(t,e){let r=Number.MAX_SAFE_INTEGER,n=0;return t.forEach(i=>{r=Math.min(r,i.contentRange.start.line),n=Math.max(n,i.contentRange.end.line)}),e==="top"?r:e==="bottom"?n:Math.floor((r+n)/2)}var Do=class{constructor(e,r){this.selectionMode=e;this.rangeMode=r;this.run=this.run.bind(this)}async run(e){let r=wt(e),n=this.getSelections(e),i=this.selectionMode==="add"?r.selections.concat(n):n,o=this.selectionMode==="set"&&i.length===1&&i[0].isEmpty;return await k().getEditableTextEditor(r).setSelections(i,{focusEditor:!0,highlightWord:o}),{thatTargets:e}}getSelections(e){switch(this.rangeMode){case"content":return e.map(r=>r.contentSelection);case"before":return e.map(r=>new Ee(r.contentRange.start,r.contentRange.start));case"after":return e.map(r=>new Ee(r.contentRange.end,r.contentRange.end))}}},kg=class extends Do{constructor(){super("set","content")}},Pg=class extends Do{constructor(){super("set","before")}},Ag=class extends Do{constructor(){super("set","after")}},Mg=class extends Do{constructor(){super("add","content")}},Dg=class extends Do{constructor(){super("add","before")}},Fg=class extends Do{constructor(){super("add","after")}};var lp=class{constructor(e){this.key=e;this.noAutomaticTokenExpansion=!0;this.run=this.run.bind(this)}async run(e){return{thatTargets:e,[`${this.key}Targets`]:e}}};var pp=class{constructor(e){this.treeSitter=e;this.run=this.run.bind(this)}async run(e){await Ie(k(),e,"referenced");let r=["# Cursorless parse tree"];for(let n of e){let{editor:i,contentRange:o}=n,s=this.treeSitter.getTree(i.document);r.push(fZ(i.document,s,o))}return k().openUntitledTextDocument({language:"markdown",content:r.join(`

`)}),{thatTargets:e}}};function fZ(t,e,r){let n=[],i=[];return YF(n,i,r,e.walk(),0),[`## ${t.filename} [${r}]
`,`\`\`\`${t.languageId}`,t.getText(r),"```","","```scm",...i,"```","","```js",...n,"```",""].join(`
`)}function YF(t,e,r,n,i){for(;;){let o=new j(n.startPosition.row,n.startPosition.column,n.endPosition.row,n.endPosition.column);if(r.intersection(o)!=null){let s="  ".repeat(i),l=mZ(n),p=s+l;if(n.nodeIsNamed)t.push(`${p}${n.nodeType} [${o}]`),e.push(`${p}(${n.nodeType}`),n.gotoFirstChild()?(YF(t,e,r,n,i+1),n.gotoParent(),e.push(`${s})`)):e[e.length-1]+=")";else{let u=`"${n.nodeType}"`;t.push(`${p}${u} [${o}]`),e.push(`${p}${u}`)}}if(!n.gotoNextSibling())return}}function mZ(t){let e=t.currentFieldName;return e!=null?`${e}: `:""}var up=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){e.length<2&&ta(k().messages,"tooFewTargets",'This action works on multiple targets, e.g. "sort every line block" instead of "sort block".');let r=e.slice().sort((s,l)=>s.contentRange.start.compareTo(l.contentRange.start)),{returnValue:n}=await this.actions.getText.run(r,{showDecorations:!1}),i=this.sortTexts(n),{thatSelections:o}=await this.actions.replace.run(r.map(s=>s.toDestination("to")),i);return{thatSelections:o}}},Ig=class extends up{sortTexts(e){return e.sort((r,n)=>r.localeCompare(n,void 0,{numeric:!0,caseFirst:"upper"}))}},Cg=class extends up{sortTexts(e){return e.reverse()}},Ng=class extends up{sortTexts(e){return HT(e)}};var fp=class{constructor(e){this.modifierStageFactory=e;this.getFinalStages=()=>[this.modifierStageFactory.create(si)];this.run=this.run.bind(this)}async run(e){let r=e.map(({thatTarget:n})=>n);return await Ie(k(),r,"referenced"),await ot(e,async(n,i)=>{let o=i.map(s=>yn(s,s.contentRange));await k().getEditableTextEditor(n).toggleBreakpoint(o)}),{thatTargets:e}}};var mp=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e,r,n){let i=await ot(e,async(o,s)=>{let l=s.map(v=>({start:new Ee(v.contentRange.start,v.contentRange.start),end:new Ee(v.contentRange.end,v.contentRange.end)})),p=l.flatMap(({start:v,end:I})=>[{text:r,range:v},{text:n,range:I,isReplace:!0}]),u=s.map(v=>v.contentSelection),{boundariesStartSelections:m,boundariesEndSelections:d,sourceSelections:g,thatSelections:x}=await Me({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(o),edits:p,selections:{boundariesStartSelections:{selections:l.map(({start:v})=>v),behavior:2},boundariesEndSelections:{selections:l.map(({end:v})=>v),behavior:3},sourceSelections:{selections:u,behavior:1},thatSelections:{selections:u,behavior:0}}}),b=[...m,...d];return await k().flashRanges(b.map(v=>({editor:o,range:lr(v),style:"justAdded"}))),{sourceMark:g.map(v=>({editor:o,selection:v})),thatMark:x.map(v=>({editor:o,selection:v}))}});return{sourceSelections:i.flatMap(({sourceMark:o})=>o),thatSelections:i.flatMap(({thatMark:o})=>o)}}};var dp=class{constructor(e,r,n){this.rangeUpdater=e;this.snippets=r;this.modifierStageFactory=n;this.snippetParser=new pi;this.run=this.run.bind(this)}getFinalStages(e){let r=this.getScopeType(e);return r==null?[]:[new ko(this.modifierStageFactory,{type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:r}})]}getScopeType(e){let{name:r,variableName:n}=e,s=(this.snippets.getSnippetStrict(r).variables??{})[n]?.wrapperScopeType;return s==null?void 0:{type:s}}getBody(e,r){let{name:n}=e,i=this.snippets.getSnippetStrict(n);return Tg(this.modifierStageFactory,r,i.definitions).body.join(`
`)}async run(e,r){Sg();let n=k().getEditableTextEditor(wt(e)),i=this.getBody(r,e),o=this.snippetParser.parse(i);xg(o,r.variableName);let s=o.toTextmateString();await Ie(k(),e,"pendingModification0");let l=e.map(m=>m.contentSelection),p=()=>n.insertSnippet(s,l),{targetSelections:u}=await Me({rangeUpdater:this.rangeUpdater,editor:n,callback:p,preserveCursorSelections:!0,selections:{targetSelections:l}});return{thatSelections:u.map(m=>({editor:n,selection:m}))}}};var hp=class{constructor(e,r,n){this.rangeUpdater=e;this.snippets=r;this.modifierStageFactory=n;this.snippetParser=new pi;this.run=this.run.bind(this)}getFinalStages(e,r){if(r.type==="named")return this.legacy().getFinalStages(r);let n=wt(e),i=dc(r,n.document.languageId);return i.scopeType==null?[]:[new ko(this.modifierStageFactory,{type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:i.scopeType}})]}async run(e,r){if(r.type==="named")return this.legacy().run(e,r);let n=k().getEditableTextEditor(wt(e)),i=dc(r,n.document.languageId),o=this.snippetParser.parse(i.body);yg(o,i.variableName);let s=o.toTextmateString();await Ie(k(),e,"pendingModification0");let l=e.map(u=>u.contentSelection),{targetSelections:p}=await Me({rangeUpdater:this.rangeUpdater,editor:n,callback:()=>n.insertSnippet(s,l),preserveCursorSelections:!0,selections:{targetSelections:l}});return{thatSelections:p.map(u=>({editor:n,selection:u}))}}legacy(){return new dp(this.rangeUpdater,this.snippets,this.modifierStageFactory)}};var dZ=/-?\d+(\.\d+)?/g,Og=class{constructor(e,r){this.actions=e;this.isIncrement=r;this.run=this.run.bind(this)}async run(e){let r=[];return await Oi(e,n=>n.editor,async(n,i)=>{let o=await this.runOnEditor(n,i);r.push(...o)}),{thatSelections:r}}async runOnEditor(e,r){let{document:n}=e,i=[],o=[];for(let l of r){let p=n.offsetAt(l.contentRange.start),u=l.contentText,m=sl(u,dZ);for(let d of m)i.push(hZ(e,p,d)),o.push(gZ(this.isIncrement,d.text))}let{thatSelections:s}=await this.actions.replace.run(i,o);return s}},Lg=class extends Og{constructor(e){super(e,!0)}},Ug=class extends Og{constructor(e){super(e,!1)}};function hZ(t,e,r){return new $e({editor:t,isReversed:!1,contentRange:new j(t.document.positionAt(e+r.index),t.document.positionAt(e+r.index+r.text.length))}).toDestination("to")}function gZ(t,e){return e.includes(".")?xZ(t,e).toString():yZ(t,e).toString()}function yZ(t,e){let r=parseInt(e),n=1;return r+(t?n:-n)}function xZ(t,e){let r=parseFloat(e),i=Math.abs(r)<=1?.1:1,o=r+(t?i:-i);return parseFloat(o.toPrecision(15))/1}var Hg=class{constructor(e,r,n,i){this.addSelection=new Mg,this.addSelectionBefore=new Dg,this.addSelectionAfter=new Fg,this.callAsFunction=new Gl(this),this.clearAndSetSelection=new Kl(this),this.copyToClipboard=new Gh(this,n),this.cutToClipboard=new Kh(this),this.decrement=new Ug(this),this.deselect=new Ql,this.editNew=new Qh(n,this),this.editNewLineAfter=new Xh(this,i),this.editNewLineBefore=new Yh(this,i),this.executeCommand=new Zl(n),this.extractVariable=new Wh(n),this.findInDocument=new eg(this),this.findInWorkspace=new tg(this),this.flashTargets=new rg,this.foldRegion=new Ih(n),this.followLink=new fc({openAside:!1}),this.followLinkAside=new fc({openAside:!0}),this.generateSnippet=new mc(r),this.getText=new Jl,this.gitAccept=new $h(n),this.gitRevert=new jh(n),this.gitStage=new qh(n),this.gitUnstage=new zh(n),this.highlight=new ep,this.increment=new Lg(this),this.indentLine=new ig(n),this.insertCopyAfter=new cg(n,i),this.insertCopyBefore=new sg(n,i),this.insertEmptyLineAfter=new ug(n,i),this.insertEmptyLineBefore=new pg(n,i),this.insertEmptyLinesAround=new lg(n,i),this.insertSnippet=new np(n,r,this,i),this.joinLines=new ip(n,i),this.breakLine=new _h(n),this.moveToTarget=new kh(n),this.outdentLine=new og(n),this.pasteFromClipboard=new wg(n,this),this.randomizeTargets=new Ng(this),this.remove=new op(n),this.rename=new Nh(n),this.replace=new ap(n),this.replaceWithTarget=new Rh(n),this.revealDefinition=new Uh(n),this.revealTypeDefinition=new Hh(n),this.reverseTargets=new Cg(this),this.rewrapWithPairedDelimiter=new sp(n,i),this.scrollToBottom=new Rg,this.scrollToCenter=new Eg,this.scrollToTop=new _g,this.setSelection=new kg,this.setSelectionAfter=new Ag,this.setSelectionBefore=new Pg,this.showDebugHover=new Bh(n),this.showHover=new Vh(n),this.showQuickFix=new Lh(n),this.showReferences=new Oh(n),this.sortTargets=new Ig(this),this.swapTargets=new Ph(n),this.toggleLineBreakpoint=new fp(i),this.toggleLineComment=new Mh(n),this.unfoldRegion=new Ch(n),this.wrapWithPairedDelimiter=new mp(n),this.wrapWithSnippet=new hp(n,r,i),this["experimental.setInstanceReference"]=new lp("instanceReference"),this["private.showParseTree"]=new pp(e),this["private.getTargets"]=new Xl,this["private.setKeyboardTarget"]=new lp("keyboard")}};async function XF(t,e,r){let n=await t.getFocusedElementType();if(n==null||n==="textEditor")return null;let i=r.action;switch(i.name){case"replace":return Vg(i.destination)&&Array.isArray(i.replaceWith)?{action:"insert",modifiers:Bg(i.destination),text:i.replaceWith.join(`
`)}:null;case"replaceWithTarget":return Vg(i.destination)?{action:"insert",modifiers:Bg(i.destination),text:await pb(e,i.source)}:null;case"moveToTarget":if(Vg(i.destination)){let o=await pb(e,i.source);return await TZ(e,i.source),{action:"insert",modifiers:Bg(i.destination),text:o}}return null;case"callAsFunction":return Wg(i.argument)?{action:i.name,modifiers:$g(i.argument),callee:await pb(e,i.callee)}:null;case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return Wg(i.target)?{action:i.name,modifiers:$g(i.target),left:i.left,right:i.right}:null;case"pasteFromClipboard":return Vg(i.destination)?{action:i.name,modifiers:Bg(i.destination)}:null;case"swapTargets":case"editNew":case"insertSnippet":case"generateSnippet":case"wrapWithSnippet":case"parsed":return null;default:return Wg(i.target)?{action:i.name,modifiers:$g(i.target)}:null}}function Vg(t){return t.type==="implicit"?!0:t.type==="primitive"?t.insertionMode==="to"&&Wg(t.target):!1}function Wg(t){return t.type==="implicit"?!0:t.type==="primitive"?t.mark==null||t.mark.type==="cursor":!1}function Bg(t){return t.type==="primitive"?$g(t.target):[]}function $g(t){return t.type==="primitive"&&t.modifiers!=null&&t.modifiers.length>0?t.modifiers:[]}async function pb(t,e){return(await t({name:"getText",target:e})).returnValue.join(`
`)}async function TZ(t,e){await t({name:"remove",target:e})}function JF(t,e){let{anchor:r,rangeType:n,active:i}=t;if(r.type!=="primitive"||n!=="continuous")return t;let o=r.modifiers.map((s,l)=>[s,l]);for(let[s,l]of o.reverse())for(let p of SZ){let u=p.accept(s);if(u.accepted){let[m,d]=[r.modifiers.slice(0,l+1),r.modifiers.slice(l+1)],g={...t,anchor:d.length===0&&e?{type:"implicit"}:{type:"primitive",mark:r.mark,modifiers:d},active:Qf(i,x=>{x.modifiers=x.modifiers.slice(Xo(x.modifiers,b=>p.accept(b).accepted)+1)})};return g=u.transformTarget?.(g)??g,{type:"primitive",mark:{type:"target",target:g},modifiers:m}}}return t}var SZ=[{accept(t){return t.type==="everyScope"&&t.scopeType.type!=="instance"?{accepted:!0,transformTarget(e){return{...e,exclusionScopeType:t.scopeType}}}:{accepted:!1}}},{accept(t){return{accepted:(t.type==="everyScope"||t.type==="relativeScope"||t.type==="ordinalScope")&&t.scopeType.type==="instance"}}}];function fb(t,e){switch(t.type){case"list":return vZ(t,e);case"range":return eI(t,e);case"primitive":return jg(t,e);case"implicit":return t}}function vZ(t,e){return{...t,elements:t.elements.map((r,n)=>{let i=e.concat(t.elements.slice(0,n));switch(r.type){case"range":return eI(r,i);case"primitive":return jg(r,i)}})}}function eI(t,e){let r=bZ(t,e),n=t.anchor.type==="implicit"||t.anchor.mark==null;return JF(r,n)}function bZ(t,e){return{type:"range",rangeType:t.rangeType??"continuous",excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1,anchor:t.anchor.type==="implicit"?t.anchor:jg(t.anchor,e),active:jg(t.active,e.concat(t.anchor))}}function jg(t,e){let r=ub(t.mark??(wZ(t)?RZ(e):null)??{type:"cursor"}),n=tI(t)??kZ(e)??PZ(e)??[];return{type:t.type,mark:r,modifiers:n}}function wZ(t){return t.modifiers?.some(e=>e.type==="inferPreviousMark")??!1}function tI(t){let e=t.modifiers?.filter(r=>r.type!=="inferPreviousMark")??[];return e.length!==0?e:void 0}function _Z(t){if(EZ(t))return[{type:"containingScope",scopeType:{type:"line"}}]}function EZ(t){let e=r=>r?.type==="lineNumber";return e(t.mark)?!0:t.mark?.type==="range"?e(t.mark.anchor)&&e(t.mark.active):!1}function RZ(t){return gp(t,e=>e.mark)}function kZ(t){return gp(t,tI)}function PZ(t){return gp(t,_Z)}function gp(t,e){for(let r=t.length-1;r>-1;--r){let n=t[r];switch(n.type){case"primitive":{let i=e(n);if(i!=null)return i;break}case"range":{let i=gp([n.anchor],e);if(i!=null)return i;break}case"list":{let i=gp(n.elements,e);if(i!=null)return i;break}}}}function ub(t){switch(t.type){case"range":return{...t,anchor:ub(t.anchor),active:ub(t.active)};case"target":return{type:"target",target:fb(t.target,[])};default:return t}}var qg=class{constructor(e,r,n,i,o){this.commandServerApi=e;this.debug=r;this.storedTargets=n;this.pipelineRunner=i;this.actions=o;this.finalStages=[];this.runAction=this.runAction.bind(this),this.inferenceContext=new mb(this.debug)}async run(e){if(oa(e)){let u=await XF(this.commandServerApi,this.runAction,e);if(u!=null)return{fallback:u}}let{returnValue:r,thatSelections:n,thatTargets:i,sourceSelections:o,sourceTargets:s,instanceReferenceTargets:l,keyboardTargets:p}=await this.runAction(e.action);return this.storedTargets.set("that",rI(i,n)),this.storedTargets.set("source",rI(s,o)),this.storedTargets.set("instanceReference",l),this.storedTargets.set("keyboard",p,{history:!0}),{returnValue:r}}runAction(e){switch(this.inferenceContext.reset(),this.finalStages=[],e.name){case"replaceWithTarget":return this.actions.replaceWithTarget.run(this.getTargets(e.source),this.getDestinations(e.destination));case"moveToTarget":return this.actions.moveToTarget.run(this.getTargets(e.source),this.getDestinations(e.destination));case"swapTargets":return this.actions.swapTargets.run(this.getTargets(e.target1),this.getTargets(e.target2));case"callAsFunction":return this.actions.callAsFunction.run(this.getTargets(e.callee),this.getTargets(e.argument));case"wrapWithPairedDelimiter":return this.actions.wrapWithPairedDelimiter.run(this.getTargets(e.target),e.left,e.right);case"rewrapWithPairedDelimiter":return this.finalStages=this.actions.rewrapWithPairedDelimiter.getFinalStages(),this.actions.rewrapWithPairedDelimiter.run(this.getTargets(e.target),e.left,e.right);case"pasteFromClipboard":return this.actions.pasteFromClipboard.run(this.getDestinations(e.destination));case"executeCommand":return this.actions.executeCommand.run(this.getTargets(e.target),e.commandId,e.options);case"replace":return this.actions.replace.run(this.getDestinations(e.destination),e.replaceWith);case"highlight":return this.actions.highlight.run(this.getTargets(e.target),e.highlightId);case"generateSnippet":return this.actions.generateSnippet.run(this.getTargets(e.target),e.directory,e.snippetName);case"insertSnippet":return this.finalStages=this.actions.insertSnippet.getFinalStages(this.getDestinations(e.destination),e.snippetDescription),this.actions.insertSnippet.run(this.getDestinations(e.destination),e.snippetDescription);case"wrapWithSnippet":return this.finalStages=this.actions.wrapWithSnippet.getFinalStages(this.getTargets(e.target),e.snippetDescription),this.actions.wrapWithSnippet.run(this.getTargets(e.target),e.snippetDescription);case"editNew":return this.actions.editNew.run(this.getDestinations(e.destination));case"getText":return this.actions.getText.run(this.getTargets(e.target),e.options);case"parsed":return this.runAction(bm(e.content,e.arguments));default:{let r=this.actions[e.name];if(r==null)throw new Error(`Unknown action: ${e.name}`);return this.finalStages=r.getFinalStages?.()??[],this.noAutomaticTokenExpansion=r.noAutomaticTokenExpansion??!1,r.run(this.getTargets(e.target))}}}getTargets(e){let r=this.inferenceContext.run(e);return this.pipelineRunner.run(r,{actionFinalStages:this.finalStages,noAutomaticTokenExpansion:this.noAutomaticTokenExpansion})}getDestinations(e){switch(e.type){case"list":return e.destinations.flatMap(r=>this.getDestinations(r));case"primitive":return this.getTargets(e.target).map(r=>r.toDestination(e.insertionMode));case"implicit":return this.getTargets({type:"implicit"}).map(r=>r.toDestination("to"))}}},mb=class{constructor(e){this.debug=e;this.previousTargets=[]}run(e){let r=fb(e,this.previousTargets);return this.debug.active&&(this.debug.log("Full target:"),this.debug.log(JSON.stringify(r,null,2))),this.previousTargets.push(e),r}reset(){this.previousTargets=[]}};function rI(t,e){if(t!=null&&e!=null)throw Error("Actions may only return full targets or selections for that mark");return e!=null?e.map(pc):t}var zg=class{constructor(e,r){this.readableHatMap=e;this.mark=r}run(){let e=this.readableHatMap.getToken(this.mark.symbolColor,this.mark.character);if(e==null)throw new Error(`Couldn't find mark ${this.mark.symbolColor} '${this.mark.character}'`);return[new It({editor:e.editor,contentRange:e.range,isReversed:!1,hasExplicitRange:!1})]}};var Gg=class{constructor(e){this.mark=e}run(){let{editorId:e,range:{start:r,end:n}}=this.mark,i=k().visibleTextEditors.find(s=>s.id===e);if(i==null)throw new Error(`Couldn't find editor '${e}'`);let o=new j(r.line,r.character,n.line,n.character);return[new It({editor:i,contentRange:o,isReversed:!1,hasExplicitRange:!1})]}};var Kg=class{constructor(e){this.mark=e}run(){let e=k().activeTextEditor;if(e==null)return[];let r=AZ(e,this.mark.lineNumberType,this.mark.lineNumber),n=e.document.lineAt(r).range;return[cv(e,!1,n)]}},AZ=(t,e,r)=>{switch(e){case"absolute":return r;case"relative":return t.selections[0].active.line+r;case"modulo100":{let i=t.visibleRanges[0].start.line,o=t.visibleRanges[t.visibleRanges.length-1].end.line,s=Math.floor(i/100)*100,l=[],p=[],u=s+r;for(;u<=o;)u>=i&&(t.visibleRanges.find(d=>u>=d.start.line&&u<=d.end.line)?l.push(u):p.push(u)),u+=100;if(l.length===1)return l[0];if(l.length+p.length>1)throw new Error("Multiple lines matching");if(p.length===1)return p[0];throw new Error("Line is not in viewport")}}};var Qg=class{constructor(e){this.mark=e}run(){return[]}};var Zg=class{constructor(e,r){this.markStageFactory=e;this.mark=r}run(){let e=this.markStageFactory.create(this.mark.anchor),r=this.markStageFactory.create(this.mark.active),n=e.run(),i=r.run();if(n.length!==1||i.length!==1)throw new Error("Expected single anchor and active target");return[Po(n[0],i[0],this.mark.excludeAnchor,this.mark.excludeActive)]}};var Yg=class{constructor(e,r){this.storedTargets=e;this.key=r}run(){let e=this.storedTargets.get(this.key);if(e==null||e.length===0)throw Error(`No available ${this.key} marks`);return e}};var Xg=class{constructor(e,r){this.targetPipelineRunner=e;this.mark=r}run(){return this.targetPipelineRunner.run(this.mark.target)}};var Jg=class{constructor(e,r){this.readableHatMap=e;this.storedTargets=r;this.create=this.create.bind(this)}setPipelineRunner(e){this.targetPipelineRunner=e}create(e){switch(e.type){case"cursor":return new Is;case"that":case"source":case"keyboard":return new Yg(this.storedTargets,e.type);case"decoratedSymbol":return new zg(this.readableHatMap,e);case"lineNumber":return new Kg(e);case"range":return new Zg(this,e);case"nothing":return new Qg(e);case"target":return new Xg(this.targetPipelineRunner,e);case"explicit":return new Gg(e);default:{let r=e,{type:n}=e;throw new Error(`Unknown mark: ${n}`)}}}};async function nI(t,e,r,n,i,o,s,l,p,u){r.active&&(r.log("command:"),r.log(JSON.stringify(u,null,2)));let m=WS(u),d=await n.getReadableMap(m.usePrePhraseSnapshot),g=DZ(t,e,s,r,o,d,i,l);for(let b of p)g=b.wrapCommandRunner(d,g);let x=await g.run(m);return await MZ(u,x)}async function MZ(t,e){if(oa(t))return e;if("returnValue"in e)return e.returnValue}function DZ(t,e,r,n,i,o,s,l){let p=new lc(r,i,new js(r)),u=new Jg(o,i),m=new rh(p,u);return u.setPipelineRunner(m),new qg(e,n,i,m,new Hg(t,s,l,p))}var iI=["clojure","latex","ruby","rust","scala"];async function oI(t,e){await FZ(t,e)}async function FZ(t,e){let r=[];for(let n of iI)await t.loadLanguage(n),await e.loadLanguage(n),Di(ql[n]??{}).map(i=>{e.get(n)?.getScopeHandler({type:i})!=null&&r.push(`Scope '${i}' defined as both legacy and new for language ${n}`)});if(r.length>0)throw Error(r.join(`
`))}function aI(t){return HP(t)?gl(t.type).replace("."," "):t.type==="surroundingPair"?`Matching pair of ${gl(t.delimiter)}`:t.type==="customRegex"?`Regex \`${t.regex}\``:"Unknown scope type"}var ey=class{constructor(e){this.customSpokenFormGenerator=e;this.listeners=[];this.disposable=e.onDidChangeCustomSpokenForms(()=>this.onChange()),this.onDidChangeScopeInfo=this.onDidChangeScopeInfo.bind(this),this.getScopeTypeInfo=this.getScopeTypeInfo.bind(this),this.updateScopeTypeInfos()}onDidChangeScopeInfo(e){return e(this.getScopeTypeInfos()),this.listeners.push(e),{dispose:()=>{cr(this.listeners,e)}}}async onChange(){this.updateScopeTypeInfos(),this.listeners.forEach(e=>e(this.scopeInfos))}updateScopeTypeInfos(){let e=[...ia.filter(r=>r!=="instance").map(r=>({type:r})),...Vf.map(r=>({type:"surroundingPair",delimiter:r})),...this.customSpokenFormGenerator.getCustomRegexScopeTypes()];this.scopeInfos=e.map(r=>this.getScopeTypeInfo(r))}getScopeTypeInfos(){return this.scopeInfos}getScopeTypeInfo(e){return{scopeType:e,spokenForm:this.customSpokenFormGenerator.scopeTypeToSpokenForm(e),humanReadableName:aI(e),isLanguageSpecific:IZ(e)}}dispose(){this.disposable.dispose()}};function IZ(t){switch(t.type){case"string":case"argumentOrParameter":case"anonymousFunction":case"attribute":case"branch":case"class":case"className":case"collectionItem":case"collectionKey":case"command":case"comment":case"private.fieldAccess":case"functionCall":case"functionCallee":case"functionName":case"ifStatement":case"instance":case"interior":case"list":case"map":case"name":case"namedFunction":case"regularExpression":case"statement":case"type":case"value":case"condition":case"section":case"sectionLevelOne":case"sectionLevelTwo":case"sectionLevelThree":case"sectionLevelFour":case"sectionLevelFive":case"sectionLevelSix":case"selector":case"private.switchStatementSubject":case"unit":case"xmlBothTags":case"xmlElement":case"xmlEndTag":case"xmlStartTag":case"part":case"chapter":case"subSection":case"subSubSection":case"namedParagraph":case"subParagraph":case"environment":case"textFragment":case"disqualifyDelimiter":case"pairDelimiter":return!0;case"character":case"word":case"token":case"identifier":case"line":case"sentence":case"paragraph":case"boundedParagraph":case"document":case"nonWhitespaceSequence":case"boundedNonWhitespaceSequence":case"url":case"notebookCell":case"surroundingPair":case"surroundingPairInterior":case"customRegex":case"glyph":return!1;case"oneOf":throw Error(`Can't decide whether scope type ${JSON.stringify(t,void 0,3)} is language-specific`)}}function db(t,e,r){if(!r)return t.document.range;let n=t.visibleRanges.reduce((s,l)=>s.union(l));n=t.document.range.intersection(n.with(n.start.translate(-10),n.end.translate(10)));let i=xf(Array.from(e.generateScopes(t,n.start,"forward",{containment:"required"})))?.domain??n,o=xf(Array.from(e.generateScopes(t,n.end,"forward",{containment:"required"})))?.domain??n;return i.union(o)}function Da(t){return{contentRange:t.contentRange,removalRange:t.getRemovalRange(),removalHighlightRange:t.getRemovalHighlightRange(),leadingDelimiter:sI(t.getLeadingDelimiterTarget()),trailingDelimiter:sI(t.getTrailingDelimiterTarget()),interior:t.getInterior()?.map(Da),boundary:t.getBoundary()?.map(Da),insertionDelimiter:t.insertionDelimiter}}function sI(t){return t!=null?Da(t):void 0}function cI(t,e,r,n,i){return Ls(e.generateScopes(t,n.start,"forward",{includeDescendantScopes:!0,distalPosition:n.end}),o=>({domain:o.domain,ranges:o.getTargets(!1).map(s=>({range:s.contentRange,targets:i?CZ(r,s).map(Da):void 0}))}))}function CZ(t,e){try{return t.run(e)}catch(r){if(r.name==="NoContainingScopeError")return[];throw r}}function lI(t,e,r){return Ls(e.generateScopes(t,r.start,"forward",{includeDescendantScopes:!0,distalPosition:r.end}),n=>({domain:n.domain,targets:n.getTargets(!1).map(Da)}))}var ty=class{constructor(e,r){this.scopeHandlerFactory=e;this.modifierStageFactory=r;this.provideScopeRanges=this.provideScopeRanges.bind(this),this.provideIterationScopeRanges=this.provideIterationScopeRanges.bind(this)}provideScopeRanges(e,{scopeType:r,visibleOnly:n}){let i=this.scopeHandlerFactory.maybeCreate(r,e.document.languageId);return i==null?[]:lI(e,i,db(e,i,n))}provideIterationScopeRanges(e,{scopeType:r,visibleOnly:n,includeNestedTargets:i}){let{languageId:o}=e.document,s=this.scopeHandlerFactory.maybeCreate(r,o);if(s==null)return[];let l=this.scopeHandlerFactory.maybeCreate(s.iterationScopeType,o);return l==null?[]:cI(e,l,this.modifierStageFactory.create({type:"everyScope",scopeType:r}),db(e,s,n),i)}};var ry=class{constructor(e,r){this.scopeRangeProvider=r;this.disposables=[];this.listeners=[];this.onChange=this.onChange.bind(this),this.onDidChangeScopeRanges=this.onDidChangeScopeRanges.bind(this),this.onDidChangeIterationScopeRanges=this.onDidChangeIterationScopeRanges.bind(this);let n=new ei(k().configuration,()=>this.onChange());this.disposables.push(k().onDidChangeVisibleTextEditors(n.run),k().onDidOpenTextDocument(n.run),k().onDidCloseTextDocument(n.run),k().onDidChangeTextDocument(n.run),k().onDidChangeTextEditorVisibleRanges(n.run),e.onDidChangeDefinition(this.onChange),n)}onDidChangeScopeRanges(e,r){let n=()=>{k().visibleTextEditors.forEach(i=>{let o;try{o=this.scopeRangeProvider.provideScopeRanges(i,r)}catch(s){if(lt(k().messages,"ScopeRangeWatcher.provide",s.message),o=[],k().runMode==="test")throw s}e(i,o)})};return this.listeners.push(n),n(),{dispose:()=>{cr(this.listeners,n)}}}onDidChangeIterationScopeRanges(e,r){let n=()=>{k().visibleTextEditors.forEach(i=>{e(i,this.scopeRangeProvider.provideIterationScopeRanges(i,r))})};return this.listeners.push(n),n(),{dispose:()=>{cr(this.listeners,n)}}}onChange(){this.listeners.forEach(e=>e())}dispose(){this.disposables.forEach(({dispose:e})=>{try{e()}catch{}})}};var ny=class{constructor(e){this.scopeHandlerFactory=e;this.getScopeSupport=this.getScopeSupport.bind(this),this.getIterationScopeSupport=this.getIterationScopeSupport.bind(this)}getScopeSupport(e,r){let{languageId:n}=e.document,i=this.scopeHandlerFactory.maybeCreate(r,n);return i==null?uI(n,r):pI(e,i)?0:1}getIterationScopeSupport(e,r){let{languageId:n}=e.document,i=this.scopeHandlerFactory.maybeCreate(r,n);if(i==null)return uI(n,r);let o=this.scopeHandlerFactory.maybeCreate(i.iterationScopeType,n);return o==null?3:pI(e,o)?0:1}};function pI(t,e){return!WP(e.generateScopes(t,new fe(0,0),"forward"))}function uI(t,e){switch(e.type){case"notebookCell":return 3;default:return ql[t]?.[e.type]!=null?2:3}}var iy=class{constructor(e,r,n){this.scopeSupportChecker=r;this.scopeInfoProvider=n;this.listeners=[];this.onChange=this.onChange.bind(this),this.onDidChangeScopeSupport=this.onDidChangeScopeSupport.bind(this);let i=new ei(k().configuration,()=>this.onChange());this.disposable=BP(k().onDidOpenTextDocument(i.run),k().onDidCloseTextDocument(i.run),k().onDidChangeActiveTextEditor(i.run),k().onDidChangeTextDocument(i.run),e.onDidChangeDefinition(i.run),this.scopeInfoProvider.onDidChangeScopeInfo(this.onChange),i)}onDidChangeScopeSupport(e){return e(this.getSupportLevels()),this.listeners.push(e),{dispose:()=>{cr(this.listeners,e)}}}onChange(){if(this.listeners.length===0)return;let e=this.getSupportLevels();this.listeners.forEach(r=>r(e))}getSupportLevels(){let e=k().activeTextEditor,r=e==null?()=>3:o=>this.scopeSupportChecker.getScopeSupport(e,o),n=e==null?()=>3:o=>this.scopeSupportChecker.getIterationScopeSupport(e,o);return this.scopeInfoProvider.getScopeTypeInfos().map(o=>({...o,support:r(o.scopeType),iterationScopeSupport:n(o.scopeType)}))}dispose(){this.disposable.dispose()}};async function fI({ide:t,hats:e,treeSitterQueryProvider:r,treeSitter:n=new td,commandServerApi:i=new Zm,talonSpokenForms:o=new ed,snippets:s=new Jm}){km(t);let l=new $m(t),p=new Qm,u=new Am,m=new Wm(t,u),d=new id(o),g=e!=null?new Gm(p,l,e,i):new Ym;g.allocateHats();let x=r?await zd.create(t,n,r):new Xm;t.disposeOnExit(p,x,g,l,m);let b=[],v,I=F=>(v=F,nI(n,i,l,g,s,u,x,p,b,F));return{commandApi:{runCommand(F){return I(F)},runCommandSafe(...F){return I(Bf(F))},repeatPreviousCommand(){if(v==null)throw new Error("No previous command");return I(v)}},scopeProvider:OZ(x,u,d),customSpokenFormGenerator:d,storedTargets:u,hatTokenMap:g,injectIde:km,runIntegrationTests:()=>oI(n,x),addCommandRunnerDecorator:F=>{b.push(F)}}}function OZ(t,e,r){let n=new js(t),i=new ty(n,new lc(t,e,n)),o=new ry(t,i),s=new ny(n),l=new ey(r),p=new iy(t,s,l);return{provideScopeRanges:i.provideScopeRanges,provideIterationScopeRanges:i.provideIterationScopeRanges,onDidChangeScopeRanges:o.onDidChangeScopeRanges,onDidChangeIterationScopeRanges:o.onDidChangeIterationScopeRanges,getScopeSupport:s.getScopeSupport,getIterationScopeSupport:s.getIterationScopeSupport,onDidChangeScopeSupport:p.onDidChangeScopeSupport,getScopeInfo:l.getScopeTypeInfo,onDidChangeScopeInfo:l.onDidChangeScopeInfo}}function mI(t,e){switch(e.type){case"UntypedTarget":return new It({editor:t,isReversed:e.isReversed,contentRange:Df(e.contentRange),hasExplicitRange:e.hasExplicitRange});case"LineTarget":return new ur({editor:t,isReversed:e.isReversed,contentRange:Df(e.contentRange)});default:throw Error(`Unsupported target type ${e.type}`)}}var ULe=Symbol("unused");var yp=class{constructor(e){this.position=e}},HLe={$0:new yp(0),$1:new yp(1),$2:new yp(2)};var dI=require("node:events"),oy=class{constructor(){this.apis=new Map,this.commands=new Map,this.eventEmitter=new dI.EventEmitter}registerExtensionApi(e,r){this.apis.set(e,r)}getExtensionApi(e){return this.apis.get(e)}registerCommand(e,r){this.commands.set(e,r)}async executeCommand(e,...r){return await this.commands.get(e)(...r)}onEvent(e,r){return this.eventEmitter.on(e,r)}emitEvent(e,...r){return this.eventEmitter.emit(e,...r)}};function Xr(){return global._neovimRegistry==null&&(global._neovimRegistry=new oy),global._neovimRegistry}var hI="pokey.cursorless";async function ay(t,e){let r='return require("cursorless").buffer_get_selection()',[n,i,o,s,l]=await e.executeLua(r,[]),p;return l===!0?p=[new Ee(new fe(o-1,s-1),new fe(n-1,i-1))]:p=[new Ee(new fe(n-1,i-1),new fe(o-1,s-1))],console.debug(`bufferGetSelections(): selections=(${p[0].start.line}, ${p[0].start.character}), (${p[0].end.line}, ${p[0].end.character}) neovim=(${n},${i}),(${o},${s}),reverse=${l}`),p}async function gI(t,e){if(e.length!==1)throw new Error("bufferSetSelections() only supports one selection");let r=`return require("cursorless").select_range(${e[0].start.line+1}, ${e[0].start.character}, ${e[0].end.line+1}, ${e[0].end.character})`;console.debug(`bufferSetSelections() selections=(${e[0].start.line},${e[0].start.character}),(${e[0].end.line},${e[0].end.character}) luaCode="${r}"`),await t.executeLua(r,[])}async function yI(t,e,r){let n='return require("cursorless").window_get_visible_lines()',[i,o]=await e.executeLua(n,[]),s=new j(new fe(i-1,0),new fe(o-1,r[o-1].length-1));return console.debug(`windowGetVisibleRanges(): range=(${s.start.line}, ${s.start.character}), (${s.end.line}, ${s.end.character})`),[s]}async function xI(t){return await t.executeLua('return require("cursorless.utils").cursorless_nvim_path()',[])}async function sy(t,e){await e.callFunction("setreg",["*",t])}async function TI(t){return await t.callFunction("getreg",["*"])}async function SI(t){await t.executeLua('return require("cursorless.utils").paste()',[])}async function vI(t){await t.executeLua('return require("cursorless.utils").mode_switch_nt()',[])}async function bI(t){await t.executeLua('return require("cursorless.utils").mode_switch_t()',[])}async function wI(t,e){let r=`vim.notify("${e}")`;await t.executeLua(r,[])}var LZ={clipboardCopy:{acceptsLocation:!1},clipboardPaste:!0,toggleLineComment:void 0,indentLine:void 0,outdentLine:void 0,rename:void 0,quickFix:void 0,revealDefinition:void 0,revealTypeDefinition:void 0,showHover:void 0,showDebugHover:void 0,extractVariable:void 0,fold:void 0,highlight:{acceptsLocation:!0},unfold:void 0,showReferences:void 0,insertLineAfter:void 0,gitAccept:void 0,gitRevert:void 0,gitStage:void 0,gitUnstage:void 0},cy=class{constructor(){this.commands=LZ}};var xp=class{constructor(e){this.client=e}async readText(){return await TI(this.client)}async writeText(e){return await sy(e,this.client)}};var ly=br(hb(),1);var Sp=class{constructor(){this.notifier=new Gt;this.mocks={..._f};this.scopes=[];this.onDidChangeConfiguration=this.notifier.registerListener;this.onDidChangeConfiguration=this.onDidChangeConfiguration.bind(this)}getOwnConfiguration(e,r){if(r!=null){for(let{scope:n,values:i}of this.scopes)if(UZ(n,r))return(0,ly.get)(i,e)??(0,ly.get)(this.mocks,e)}return(0,ly.get)(this.mocks,e)}mockConfiguration(e,r){this.mocks[e]=r,this.notifier.notifyListeners()}mockConfigurationScope(e,r,n=!1){this.scopes.push({scope:e,values:r}),n||this.notifier.notifyListeners()}};function UZ(t,e){return t.languageId===e.languageId}async function gb(t,e,r,n){console.debug("neovimEdit() [unsorted]:");for(let s of n)console.debug(`	range=${JSON.stringify(s.range)}, text='${s.text}', isReplace=${s.isReplace}`);n.sort((s,l)=>(_I(s)||EI(s))&&(_I(l)||EI(l))?1:s.range.start.line===l.range.start.line?l.range.start.character-s.range.start.character:l.range.start.line-s.range.start.line),console.debug("neovimEdit() [sorted]:");for(let s of n)console.debug(`	range=${JSON.stringify(s.range)}, text='${s.text}', isReplace=${s.isReplace}`);let i=e.getTextDocument(await t.window.buffer),o=[];for(let s of n)o.push({range:s.range,rangeOffset:i.offsetAt(s.range.start),rangeLength:i.offsetAt(s.range.end)-i.offsetAt(s.range.start),text:s.text});Xr().emitEvent("onDidChangeTextDocument",{document:i,contentChanges:o});for(let s of n){let{range:l,text:p,isReplace:u}=s;p===""?await RI(t,l):l.isEmpty&&!u?await kI(t,l.start,p):await HZ(t,l,p)}return await e.updateTextEditor(),!0}async function RI(t,e){console.debug(`neovimDelete(): range=${JSON.stringify(e)}`);let r=await t.window.buffer,n=(await r.getLines({start:e.end.line,end:e.end.line+1,strictIndexing:!0}))[0],i=n.slice(e.end.character);if(e.start.line===e.end.line){let l=n.slice(0,e.start.character)+i;await r.setLines(l,{start:e.start.line,end:e.start.line+1,strictIndexing:!0});return}if(e.start.character===0){await r.setLines(i,{start:e.start.line,end:e.end.line+1,strictIndexing:!0});return}let o=(await r.getLines({start:e.start.line,end:e.start.line+1,strictIndexing:!0}))[0],s=o.slice(0,e.start.character);if(e.start.character<=o.length){await r.setLines(s+i,{start:e.start.line,end:e.end.line+1,strictIndexing:!0});return}await r.setLines([s,i],{start:e.start.line,end:e.end.line+1,strictIndexing:!0})}async function kI(t,e,r){console.debug(`neovimInsert(): position=${JSON.stringify(e)}, text='${r}'`);let n=r.replace(/(?:\r\n|\r|\n)/g,`
`).split(`
`),i=await t.window.buffer,o=(await i.getLines({start:e.line,end:e.line+1,strictIndexing:!0}))[0],s=o.slice(0,e.character),l=o.slice(e.character);if(n.length===1){let m=s+n[0]+l;await i.setLines(m,{start:e.line,end:e.line+1,strictIndexing:!0});return}let p=s+n[0],u=n[n.length-1]+l;await i.setLines([p,...n.slice(1,n.length-1),u],{start:e.line,end:e.line+1,strictIndexing:!0})}async function HZ(t,e,r){console.debug(`neovimReplace(): range=${JSON.stringify(e)}, text='${r}'`),await RI(t,e),await kI(t,e.start,r)}function _I(t){return t.range.isEmpty&&!t.isReplace}function EI(t){return t.text!==""&&!!(!t.range.isEmpty||t.isReplace)}function PI(t){return Xr().onEvent("onDidChangeTextDocument",t),MI()}function AI(t,e,r){return Xr().onEvent("onDidOpenTextDocument",t),MI()}function MI(){return{dispose(){}}}var vp=class{constructor(){this.data={...Ef}}get(e){return this.data[e]}set(e,r){return this.data[e]=r,Promise.resolve()}};var C1=br(hb(),1);var bp=class{async showMessage(e,r,n,...i){}};async function DI(t,e){let r=e.activeTextEditor,n=await t.window,i=await ay(n,t),o=r.document.getText(i[0]);await sy(o,t)}async function FI(t,e){await SI(t)}var py=class{constructor(e,r,n,i,o,s,l){this.id=e;this.client=r;this.neovimIDE=n;this.window=i;this._document=o,this._selections=l,this._visibleRanges=s}get document(){return this._document}updateDocument(e,r,n,i){if(n)this._document=n;else if(i)this._document.update(i);else throw Error("updateDocument(): invalid arguments");return this._selections=r,this._visibleRanges=e,this._document}get selections(){return this._selections}async setSelections(e){this._selections=e,await gI(this.client,e)}get visibleRanges(){return this._visibleRanges}get options(){throw Error("get options Not implemented")}set options(e){throw Error("set options Not implemented")}get isActive(){return!0}isEqual(e){return this.id===e.id}async revealRange(e){}revealLine(e,r){throw Error("revealLine Not implemented")}async edit(e){return await gb(this.client,this.neovimIDE,this.window,e)}focus(){return Promise.resolve()}editNewNotebookCellAbove(){throw Error("editNewNotebookCellAbove Not implemented")}editNewNotebookCellBelow(){throw Error("editNewNotebookCellBelow Not implemented")}openLink(e,r){throw Error("openLink Not implemented")}fold(e){throw Error("fold Not implemented")}unfold(e){throw Error("unfold Not implemented")}toggleBreakpoint(e){throw Error("toggleBreakpoint Not implemented")}async toggleLineComment(e){throw Error("toggleLineComment Not implemented")}async clipboardCopy(e){await DI(this.client,this.neovimIDE)}async clipboardPaste(){await FI(this.client,this.neovimIDE)}async indentLine(e){throw Error("indentLine Not implemented")}async outdentLine(e){throw Error("outdentLine Not implemented")}async insertLineAfter(e){throw Error("insertLineAfter Not implemented")}insertSnippet(e,r){throw Error("insertSnippet Not implemented")}async rename(e){throw Error("rename Not implemented")}async showReferences(e){throw Error("showReferences Not implemented")}async quickFix(e){throw Error("quickFix Not implemented")}async revealDefinition(e){throw Error("revealDefinition Not implemented")}async revealTypeDefinition(e){throw Error("revealTypeDefinition Not implemented")}async showHover(e){throw Error("showHover Not implemented")}async showDebugHover(e){throw Error("showDebugHover Not implemented")}async extractVariable(e){throw Error("extractVariable Not implemented")}async gitAccept(e){throw Error("gitAccept Not implemented")}async gitRevert(e){throw Error("gitRevert Not implemented")}async gitStage(e){throw Error("gitStage Not implemented")}async gitUnstage(e){throw Error("gitUnstage Not implemented")}};var Lw=br(require("path"),1);var II;(()=>{"use strict";var t={470:i=>{function o(p){if(typeof p!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(p))}function s(p,u){for(var m,d="",g=0,x=-1,b=0,v=0;v<=p.length;++v){if(v<p.length)m=p.charCodeAt(v);else{if(m===47)break;m=47}if(m===47){if(!(x===v-1||b===1))if(x!==v-1&&b===2){if(d.length<2||g!==2||d.charCodeAt(d.length-1)!==46||d.charCodeAt(d.length-2)!==46){if(d.length>2){var I=d.lastIndexOf("/");if(I!==d.length-1){I===-1?(d="",g=0):g=(d=d.slice(0,I)).length-1-d.lastIndexOf("/"),x=v,b=0;continue}}else if(d.length===2||d.length===1){d="",g=0,x=v,b=0;continue}}u&&(d.length>0?d+="/..":d="..",g=2)}else d.length>0?d+="/"+p.slice(x+1,v):d=p.slice(x+1,v),g=v-x-1;x=v,b=0}else m===46&&b!==-1?++b:b=-1}return d}var l={resolve:function(){for(var p,u="",m=!1,d=arguments.length-1;d>=-1&&!m;d--){var g;d>=0?g=arguments[d]:(p===void 0&&(p=process.cwd()),g=p),o(g),g.length!==0&&(u=g+"/"+u,m=g.charCodeAt(0)===47)}return u=s(u,!m),m?u.length>0?"/"+u:"/":u.length>0?u:"."},normalize:function(p){if(o(p),p.length===0)return".";var u=p.charCodeAt(0)===47,m=p.charCodeAt(p.length-1)===47;return(p=s(p,!u)).length!==0||u||(p="."),p.length>0&&m&&(p+="/"),u?"/"+p:p},isAbsolute:function(p){return o(p),p.length>0&&p.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var p,u=0;u<arguments.length;++u){var m=arguments[u];o(m),m.length>0&&(p===void 0?p=m:p+="/"+m)}return p===void 0?".":l.normalize(p)},relative:function(p,u){if(o(p),o(u),p===u||(p=l.resolve(p))===(u=l.resolve(u)))return"";for(var m=1;m<p.length&&p.charCodeAt(m)===47;++m);for(var d=p.length,g=d-m,x=1;x<u.length&&u.charCodeAt(x)===47;++x);for(var b=u.length-x,v=g<b?g:b,I=-1,F=0;F<=v;++F){if(F===v){if(b>v){if(u.charCodeAt(x+F)===47)return u.slice(x+F+1);if(F===0)return u.slice(x+F)}else g>v&&(p.charCodeAt(m+F)===47?I=F:F===0&&(I=0));break}var V=p.charCodeAt(m+F);if(V!==u.charCodeAt(x+F))break;V===47&&(I=F)}var Z="";for(F=m+I+1;F<=d;++F)F!==d&&p.charCodeAt(F)!==47||(Z.length===0?Z+="..":Z+="/..");return Z.length>0?Z+u.slice(x+I):(x+=I,u.charCodeAt(x)===47&&++x,u.slice(x))},_makeLong:function(p){return p},dirname:function(p){if(o(p),p.length===0)return".";for(var u=p.charCodeAt(0),m=u===47,d=-1,g=!0,x=p.length-1;x>=1;--x)if((u=p.charCodeAt(x))===47){if(!g){d=x;break}}else g=!1;return d===-1?m?"/":".":m&&d===1?"//":p.slice(0,d)},basename:function(p,u){if(u!==void 0&&typeof u!="string")throw new TypeError('"ext" argument must be a string');o(p);var m,d=0,g=-1,x=!0;if(u!==void 0&&u.length>0&&u.length<=p.length){if(u.length===p.length&&u===p)return"";var b=u.length-1,v=-1;for(m=p.length-1;m>=0;--m){var I=p.charCodeAt(m);if(I===47){if(!x){d=m+1;break}}else v===-1&&(x=!1,v=m+1),b>=0&&(I===u.charCodeAt(b)?--b==-1&&(g=m):(b=-1,g=v))}return d===g?g=v:g===-1&&(g=p.length),p.slice(d,g)}for(m=p.length-1;m>=0;--m)if(p.charCodeAt(m)===47){if(!x){d=m+1;break}}else g===-1&&(x=!1,g=m+1);return g===-1?"":p.slice(d,g)},extname:function(p){o(p);for(var u=-1,m=0,d=-1,g=!0,x=0,b=p.length-1;b>=0;--b){var v=p.charCodeAt(b);if(v!==47)d===-1&&(g=!1,d=b+1),v===46?u===-1?u=b:x!==1&&(x=1):u!==-1&&(x=-1);else if(!g){m=b+1;break}}return u===-1||d===-1||x===0||x===1&&u===d-1&&u===m+1?"":p.slice(u,d)},format:function(p){if(p===null||typeof p!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof p);return function(u,m){var d=m.dir||m.root,g=m.base||(m.name||"")+(m.ext||"");return d?d===m.root?d+g:d+"/"+g:g}(0,p)},parse:function(p){o(p);var u={root:"",dir:"",base:"",ext:"",name:""};if(p.length===0)return u;var m,d=p.charCodeAt(0),g=d===47;g?(u.root="/",m=1):m=0;for(var x=-1,b=0,v=-1,I=!0,F=p.length-1,V=0;F>=m;--F)if((d=p.charCodeAt(F))!==47)v===-1&&(I=!1,v=F+1),d===46?x===-1?x=F:V!==1&&(V=1):x!==-1&&(V=-1);else if(!I){b=F+1;break}return x===-1||v===-1||V===0||V===1&&x===v-1&&x===b+1?v!==-1&&(u.base=u.name=b===0&&g?p.slice(1,v):p.slice(b,v)):(b===0&&g?(u.name=p.slice(1,x),u.base=p.slice(1,v)):(u.name=p.slice(b,x),u.base=p.slice(b,v)),u.ext=p.slice(x,v)),b>0?u.dir=p.slice(0,b-1):g&&(u.dir="/"),u},sep:"/",delimiter:":",win32:null,posix:null};l.posix=l,i.exports=l}},e={};function r(i){var o=e[i];if(o!==void 0)return o.exports;var s=e[i]={exports:{}};return t[i](s,s.exports,r),s.exports}r.d=(i,o)=>{for(var s in o)r.o(o,s)&&!r.o(i,s)&&Object.defineProperty(i,s,{enumerable:!0,get:o[s]})},r.o=(i,o)=>Object.prototype.hasOwnProperty.call(i,o),r.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})};var n={};(()=>{let i;r.r(n),r.d(n,{URI:()=>g,Utils:()=>L}),typeof process=="object"?i=process.platform==="win32":typeof navigator=="object"&&(i=navigator.userAgent.indexOf("Windows")>=0);let o=/^\w[\w\d+.-]*$/,s=/^\//,l=/^\/\//;function p(O,D){if(!O.scheme&&D)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${O.authority}", path: "${O.path}", query: "${O.query}", fragment: "${O.fragment}"}`);if(O.scheme&&!o.test(O.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(O.path){if(O.authority){if(!s.test(O.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(l.test(O.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}let u="",m="/",d=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class g{static isUri(D){return D instanceof g||!!D&&typeof D.authority=="string"&&typeof D.fragment=="string"&&typeof D.path=="string"&&typeof D.query=="string"&&typeof D.scheme=="string"&&typeof D.fsPath=="string"&&typeof D.with=="function"&&typeof D.toString=="function"}scheme;authority;path;query;fragment;constructor(D,q,K,Y,X,ne=!1){typeof D=="object"?(this.scheme=D.scheme||u,this.authority=D.authority||u,this.path=D.path||u,this.query=D.query||u,this.fragment=D.fragment||u):(this.scheme=function(ye,ie){return ye||ie?ye:"file"}(D,ne),this.authority=q||u,this.path=function(ye,ie){switch(ye){case"https":case"http":case"file":ie?ie[0]!==m&&(ie=m+ie):ie=m}return ie}(this.scheme,K||u),this.query=Y||u,this.fragment=X||u,p(this,ne))}get fsPath(){return V(this,!1)}with(D){if(!D)return this;let{scheme:q,authority:K,path:Y,query:X,fragment:ne}=D;return q===void 0?q=this.scheme:q===null&&(q=u),K===void 0?K=this.authority:K===null&&(K=u),Y===void 0?Y=this.path:Y===null&&(Y=u),X===void 0?X=this.query:X===null&&(X=u),ne===void 0?ne=this.fragment:ne===null&&(ne=u),q===this.scheme&&K===this.authority&&Y===this.path&&X===this.query&&ne===this.fragment?this:new b(q,K,Y,X,ne)}static parse(D,q=!1){let K=d.exec(D);return K?new b(K[2]||u,le(K[4]||u),le(K[5]||u),le(K[7]||u),le(K[9]||u),q):new b(u,u,u,u,u)}static file(D){let q=u;if(i&&(D=D.replace(/\\/g,m)),D[0]===m&&D[1]===m){let K=D.indexOf(m,2);K===-1?(q=D.substring(2),D=m):(q=D.substring(2,K),D=D.substring(K)||m)}return new b("file",q,D,u,u)}static from(D){let q=new b(D.scheme,D.authority,D.path,D.query,D.fragment);return p(q,!0),q}toString(D=!1){return Z(this,D)}toJSON(){return this}static revive(D){if(D){if(D instanceof g)return D;{let q=new b(D);return q._formatted=D.external,q._fsPath=D._sep===x?D.fsPath:null,q}}return D}}let x=i?1:void 0;class b extends g{_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=V(this,!1)),this._fsPath}toString(D=!1){return D?Z(this,!0):(this._formatted||(this._formatted=Z(this,!1)),this._formatted)}toJSON(){let D={$mid:1};return this._fsPath&&(D.fsPath=this._fsPath,D._sep=x),this._formatted&&(D.external=this._formatted),this.path&&(D.path=this.path),this.scheme&&(D.scheme=this.scheme),this.authority&&(D.authority=this.authority),this.query&&(D.query=this.query),this.fragment&&(D.fragment=this.fragment),D}}let v={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function I(O,D,q){let K,Y=-1;for(let X=0;X<O.length;X++){let ne=O.charCodeAt(X);if(ne>=97&&ne<=122||ne>=65&&ne<=90||ne>=48&&ne<=57||ne===45||ne===46||ne===95||ne===126||D&&ne===47||q&&ne===91||q&&ne===93||q&&ne===58)Y!==-1&&(K+=encodeURIComponent(O.substring(Y,X)),Y=-1),K!==void 0&&(K+=O.charAt(X));else{K===void 0&&(K=O.substr(0,X));let ye=v[ne];ye!==void 0?(Y!==-1&&(K+=encodeURIComponent(O.substring(Y,X)),Y=-1),K+=ye):Y===-1&&(Y=X)}}return Y!==-1&&(K+=encodeURIComponent(O.substring(Y))),K!==void 0?K:O}function F(O){let D;for(let q=0;q<O.length;q++){let K=O.charCodeAt(q);K===35||K===63?(D===void 0&&(D=O.substr(0,q)),D+=v[K]):D!==void 0&&(D+=O[q])}return D!==void 0?D:O}function V(O,D){let q;return q=O.authority&&O.path.length>1&&O.scheme==="file"?`//${O.authority}${O.path}`:O.path.charCodeAt(0)===47&&(O.path.charCodeAt(1)>=65&&O.path.charCodeAt(1)<=90||O.path.charCodeAt(1)>=97&&O.path.charCodeAt(1)<=122)&&O.path.charCodeAt(2)===58?D?O.path.substr(1):O.path[1].toLowerCase()+O.path.substr(2):O.path,i&&(q=q.replace(/\//g,"\\")),q}function Z(O,D){let q=D?F:I,K="",{scheme:Y,authority:X,path:ne,query:ye,fragment:ie}=O;if(Y&&(K+=Y,K+=":"),(X||Y==="file")&&(K+=m,K+=m),X){let Pe=X.indexOf("@");if(Pe!==-1){let gr=X.substr(0,Pe);X=X.substr(Pe+1),Pe=gr.lastIndexOf(":"),Pe===-1?K+=q(gr,!1,!1):(K+=q(gr.substr(0,Pe),!1,!1),K+=":",K+=q(gr.substr(Pe+1),!1,!0)),K+="@"}X=X.toLowerCase(),Pe=X.lastIndexOf(":"),Pe===-1?K+=q(X,!1,!0):(K+=q(X.substr(0,Pe),!1,!0),K+=X.substr(Pe))}if(ne){if(ne.length>=3&&ne.charCodeAt(0)===47&&ne.charCodeAt(2)===58){let Pe=ne.charCodeAt(1);Pe>=65&&Pe<=90&&(ne=`/${String.fromCharCode(Pe+32)}:${ne.substr(3)}`)}else if(ne.length>=2&&ne.charCodeAt(1)===58){let Pe=ne.charCodeAt(0);Pe>=65&&Pe<=90&&(ne=`${String.fromCharCode(Pe+32)}:${ne.substr(2)}`)}K+=q(ne,!0,!1)}return ye&&(K+="?",K+=q(ye,!1,!1)),ie&&(K+="#",K+=D?ie:I(ie,!1,!1)),K}function oe(O){try{return decodeURIComponent(O)}catch{return O.length>3?O.substr(0,3)+oe(O.substr(3)):O}}let ae=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function le(O){return O.match(ae)?O.replace(ae,D=>oe(D)):O}var st=r(470);let Lt=st.posix||st,ut="/";var L;(function(O){O.joinPath=function(D,...q){return D.with({path:Lt.join(D.path,...q)})},O.resolvePath=function(D,...q){let K=D.path,Y=!1;K[0]!==ut&&(K=ut+K,Y=!0);let X=Lt.resolve(K,...q);return Y&&X[0]===ut&&!D.authority&&(X=X.substring(1)),D.with({path:X})},O.dirname=function(D){if(D.path.length===0||D.path===ut)return D;let q=Lt.dirname(D.path);return q.length===1&&q.charCodeAt(0)===46&&(q=""),D.with({path:q})},O.basename=function(D){return Lt.basename(D.path)},O.extname=function(D){return Lt.extname(D.path)}})(L||(L={}))})(),II=n})();var{URI:CI,Utils:LUe}=II;var tC=br(GI(),1);var _p=t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>65536)throw new TypeError("pattern is too long")};var GZ={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},Ep=t=>t.replace(/[[\]\\-]/g,"\\$&"),KZ=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),KI=t=>t.join(""),QI=(t,e)=>{let r=e;if(t.charAt(r)!=="[")throw new Error("not in a brace expression");let n=[],i=[],o=r+1,s=!1,l=!1,p=!1,u=!1,m=r,d="";e:for(;o<t.length;){let v=t.charAt(o);if((v==="!"||v==="^")&&o===r+1){u=!0,o++;continue}if(v==="]"&&s&&!p){m=o+1;break}if(s=!0,v==="\\"&&!p){p=!0,o++;continue}if(v==="["&&!p){for(let[I,[F,V,Z]]of Object.entries(GZ))if(t.startsWith(I,o)){if(d)return["$.",!1,t.length-r,!0];o+=I.length,Z?i.push(F):n.push(F),l=l||V;continue e}}if(p=!1,d){v>d?n.push(Ep(d)+"-"+Ep(v)):v===d&&n.push(Ep(v)),d="",o++;continue}if(t.startsWith("-]",o+1)){n.push(Ep(v+"-")),o+=2;continue}if(t.startsWith("-",o+1)){d=v,o+=2;continue}n.push(Ep(v)),o++}if(m<o)return["",!1,0,!1];if(!n.length&&!i.length)return["$.",!1,t.length-r,!0];if(i.length===0&&n.length===1&&/^\\?.$/.test(n[0])&&!u){let v=n[0].length===2?n[0].slice(-1):n[0];return[KZ(v),!1,m-r,!1]}let g="["+(u?"^":"")+KI(n)+"]",x="["+(u?"":"^")+KI(i)+"]";return[n.length&&i.length?"("+g+"|"+x+")":n.length?g:x,l,m-r,!0]};var Wn=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");var QZ=new Set(["!","?","+","*","@"]),ZI=t=>QZ.has(t),ZZ="(?!(?:^|/)\\.\\.?(?:$|/))",uy="(?!\\.)",YZ=new Set(["[","."]),XZ=new Set(["..","."]),JZ=new Set("().*{}+?[]^$\\!"),eY=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Tb="[^/]",YI=Tb+"*?",XI=Tb+"+?",gc=class t{type;#e;#t;#o=!1;#n=[];#a;#S;#l;#u=!1;#s;#c;#i=!1;constructor(e,r,n={}){this.type=e,e&&(this.#t=!0),this.#a=r,this.#e=this.#a?this.#a.#e:this,this.#s=this.#e===this?n:this.#e.#s,this.#l=this.#e===this?[]:this.#e.#l,e==="!"&&!this.#e.#u&&this.#l.push(this),this.#S=this.#a?this.#a.#n.length:0}get hasMagic(){if(this.#t!==void 0)return this.#t;for(let e of this.#n)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#t=!0;return this.#t}toString(){return this.#c!==void 0?this.#c:this.type?this.#c=this.type+"("+this.#n.map(e=>String(e)).join("|")+")":this.#c=this.#n.map(e=>String(e)).join("")}#g(){if(this!==this.#e)throw new Error("should only call on root");if(this.#u)return this;this.toString(),this.#u=!0;let e;for(;e=this.#l.pop();){if(e.type!=="!")continue;let r=e,n=r.#a;for(;n;){for(let i=r.#S+1;!n.type&&i<n.#n.length;i++)for(let o of e.#n){if(typeof o=="string")throw new Error("string part in extglob AST??");o.copyIn(n.#n[i])}r=n,n=r.#a}}return this}push(...e){for(let r of e)if(r!==""){if(typeof r!="string"&&!(r instanceof t&&r.#a===this))throw new Error("invalid part: "+r);this.#n.push(r)}}toJSON(){let e=this.type===null?this.#n.slice().map(r=>typeof r=="string"?r:r.toJSON()):[this.type,...this.#n.map(r=>r.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#u&&this.#a?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#a?.isStart())return!1;if(this.#S===0)return!0;let e=this.#a;for(let r=0;r<this.#S;r++){let n=e.#n[r];if(!(n instanceof t&&n.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#a?.type==="!")return!0;if(!this.#a?.isEnd())return!1;if(!this.type)return this.#a?.isEnd();let e=this.#a?this.#a.#n.length:0;return this.#S===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let r=new t(this.type,e);for(let n of this.#n)r.copyIn(n);return r}static#y(e,r,n,i){let o=!1,s=!1,l=-1,p=!1;if(r.type===null){let x=n,b="";for(;x<e.length;){let v=e.charAt(x++);if(o||v==="\\"){o=!o,b+=v;continue}if(s){x===l+1?(v==="^"||v==="!")&&(p=!0):v==="]"&&!(x===l+2&&p)&&(s=!1),b+=v;continue}else if(v==="["){s=!0,l=x,p=!1,b+=v;continue}if(!i.noext&&ZI(v)&&e.charAt(x)==="("){r.push(b),b="";let I=new t(v,r);x=t.#y(e,I,x,i),r.push(I);continue}b+=v}return r.push(b),x}let u=n+1,m=new t(null,r),d=[],g="";for(;u<e.length;){let x=e.charAt(u++);if(o||x==="\\"){o=!o,g+=x;continue}if(s){u===l+1?(x==="^"||x==="!")&&(p=!0):x==="]"&&!(u===l+2&&p)&&(s=!1),g+=x;continue}else if(x==="["){s=!0,l=u,p=!1,g+=x;continue}if(ZI(x)&&e.charAt(u)==="("){m.push(g),g="";let b=new t(x,m);m.push(b),u=t.#y(e,b,u,i);continue}if(x==="|"){m.push(g),g="",d.push(m),m=new t(null,r);continue}if(x===")")return g===""&&r.#n.length===0&&(r.#i=!0),m.push(g),g="",r.push(...d,m),u;g+=x}return r.type=null,r.#t=void 0,r.#n=[e.substring(n-1)],u}static fromGlob(e,r={}){let n=new t(null,void 0,r);return t.#y(e,n,0,r),n}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[r,n,i,o]=this.toRegExpSource();if(!(i||this.#t||this.#s.nocase&&!this.#s.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return n;let l=(this.#s.nocase?"i":"")+(o?"u":"");return Object.assign(new RegExp(`^${r}$`,l),{_src:r,_glob:e})}get options(){return this.#s}toRegExpSource(e){let r=e??!!this.#s.dot;if(this.#e===this&&this.#g(),!this.type){let p=this.isStart()&&this.isEnd(),u=this.#n.map(x=>{let[b,v,I,F]=typeof x=="string"?t.#f(x,this.#t,p):x.toRegExpSource(e);return this.#t=this.#t||I,this.#o=this.#o||F,b}).join(""),m="";if(this.isStart()&&typeof this.#n[0]=="string"&&!(this.#n.length===1&&XZ.has(this.#n[0]))){let b=YZ,v=r&&b.has(u.charAt(0))||u.startsWith("\\.")&&b.has(u.charAt(2))||u.startsWith("\\.\\.")&&b.has(u.charAt(4)),I=!r&&!e&&b.has(u.charAt(0));m=v?ZZ:I?uy:""}let d="";return this.isEnd()&&this.#e.#u&&this.#a?.type==="!"&&(d="(?:$|\\/)"),[m+u+d,Wn(u),this.#t=!!this.#t,this.#o]}let n=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",o=this.#m(r);if(this.isStart()&&this.isEnd()&&!o&&this.type!=="!"){let p=this.toString();return this.#n=[p],this.type=null,this.#t=void 0,[p,Wn(this.toString()),!1,!1]}let s=!n||e||r||!uy?"":this.#m(!0);s===o&&(s=""),s&&(o=`(?:${o})(?:${s})*?`);let l="";if(this.type==="!"&&this.#i)l=(this.isStart()&&!r?uy:"")+XI;else{let p=this.type==="!"?"))"+(this.isStart()&&!r&&!e?uy:"")+YI+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&s?")":this.type==="*"&&s?")?":`)${this.type}`;l=i+o+p}return[l,Wn(o),this.#t=!!this.#t,this.#o]}#m(e){return this.#n.map(r=>{if(typeof r=="string")throw new Error("string type in extglob ast??");let[n,i,o,s]=r.toRegExpSource(e);return this.#o=this.#o||s,n}).filter(r=>!(this.isStart()&&this.isEnd())||!!r).join("|")}static#f(e,r,n=!1){let i=!1,o="",s=!1;for(let l=0;l<e.length;l++){let p=e.charAt(l);if(i){i=!1,o+=(JZ.has(p)?"\\":"")+p;continue}if(p==="\\"){l===e.length-1?o+="\\\\":i=!0;continue}if(p==="["){let[u,m,d,g]=QI(e,l);if(d){o+=u,s=s||m,l+=d-1,r=r||g;continue}}if(p==="*"){n&&e==="*"?o+=XI:o+=YI,r=!0;continue}if(p==="?"){o+=Tb,r=!0;continue}o+=eY(p)}return[o,Wn(e),!!r,s]}};var yc=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&");var dr=(t,e,r={})=>(_p(e),!r.nocomment&&e.charAt(0)==="#"?!1:new Jr(e,r).match(t)),tY=/^\*+([^+@!?\*\[\(]*)$/,rY=t=>e=>!e.startsWith(".")&&e.endsWith(t),nY=t=>e=>e.endsWith(t),iY=t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),oY=t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),aY=/^\*+\.\*+$/,sY=t=>!t.startsWith(".")&&t.includes("."),cY=t=>t!=="."&&t!==".."&&t.includes("."),lY=/^\.\*+$/,pY=t=>t!=="."&&t!==".."&&t.startsWith("."),uY=/^\*+$/,fY=t=>t.length!==0&&!t.startsWith("."),mY=t=>t.length!==0&&t!=="."&&t!=="..",dY=/^\?+([^+@!?\*\[\(]*)?$/,hY=([t,e=""])=>{let r=rC([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},gY=([t,e=""])=>{let r=nC([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},yY=([t,e=""])=>{let r=nC([t]);return e?n=>r(n)&&n.endsWith(e):r},xY=([t,e=""])=>{let r=rC([t]);return e?n=>r(n)&&n.endsWith(e):r},rC=([t])=>{let e=t.length;return r=>r.length===e&&!r.startsWith(".")},nC=([t])=>{let e=t.length;return r=>r.length===e&&r!=="."&&r!==".."},iC=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",JI={win32:{sep:"\\"},posix:{sep:"/"}},TY=iC==="win32"?JI.win32.sep:JI.posix.sep;dr.sep=TY;var jt=Symbol("globstar **");dr.GLOBSTAR=jt;var SY="[^/]",vY=SY+"*?",bY="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",wY="(?:(?!(?:\\/|^)\\.).)*?",_Y=(t,e={})=>r=>dr(r,t,e);dr.filter=_Y;var bn=(t,e={})=>Object.assign({},t,e),EY=t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return dr;let e=dr;return Object.assign((n,i,o={})=>e(n,i,bn(t,o)),{Minimatch:class extends e.Minimatch{constructor(i,o={}){super(i,bn(t,o))}static defaults(i){return e.defaults(bn(t,i)).Minimatch}},AST:class extends e.AST{constructor(i,o,s={}){super(i,o,bn(t,s))}static fromGlob(i,o={}){return e.AST.fromGlob(i,bn(t,o))}},unescape:(n,i={})=>e.unescape(n,bn(t,i)),escape:(n,i={})=>e.escape(n,bn(t,i)),filter:(n,i={})=>e.filter(n,bn(t,i)),defaults:n=>e.defaults(bn(t,n)),makeRe:(n,i={})=>e.makeRe(n,bn(t,i)),braceExpand:(n,i={})=>e.braceExpand(n,bn(t,i)),match:(n,i,o={})=>e.match(n,i,bn(t,o)),sep:e.sep,GLOBSTAR:jt})};dr.defaults=EY;var oC=(t,e={})=>(_p(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:(0,tC.default)(t));dr.braceExpand=oC;var RY=(t,e={})=>new Jr(t,e).makeRe();dr.makeRe=RY;var kY=(t,e,r={})=>{let n=new Jr(e,r);return t=t.filter(i=>n.match(i)),n.options.nonull&&!t.length&&t.push(e),t};dr.match=kY;var eC=/[?*]|[+@!]\(.*?\)|\[|\]/,PY=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Jr=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,r={}){_p(e),r=r||{},this.options=r,this.pattern=e,this.platform=r.platform||iC,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!r.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!r.nonegate,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=r.windowsNoMagicRoot!==void 0?r.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let r of e)if(typeof r!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],r.debug&&(this.debug=(...o)=>console.error(...o)),this.debug(this.pattern,this.globSet);let n=this.globSet.map(o=>this.slashSplit(o));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let i=this.globParts.map((o,s,l)=>{if(this.isWindows&&this.windowsNoMagicRoot){let p=o[0]===""&&o[1]===""&&(o[2]==="?"||!eC.test(o[2]))&&!eC.test(o[3]),u=/^[a-z]:/i.test(o[0]);if(p)return[...o.slice(0,4),...o.slice(4).map(m=>this.parse(m))];if(u)return[o[0],...o.slice(1).map(m=>this.parse(m))]}return o.map(p=>this.parse(p))});if(this.debug(this.pattern,i),this.set=i.filter(o=>o.indexOf(!1)===-1),this.isWindows)for(let o=0;o<this.set.length;o++){let s=this.set[o];s[0]===""&&s[1]===""&&this.globParts[o][2]==="?"&&typeof s[3]=="string"&&/^[a-z]:$/i.test(s[3])&&(s[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let n=0;n<e.length;n++)for(let i=0;i<e[n].length;i++)e[n][i]==="**"&&(e[n][i]="*");let{optimizationLevel:r=1}=this.options;return r>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):r>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(r=>{let n=-1;for(;(n=r.indexOf("**",n+1))!==-1;){let i=n;for(;r[i+1]==="**";)i++;i!==n&&r.splice(n,i-n)}return r})}levelOneOptimize(e){return e.map(r=>(r=r.reduce((n,i)=>{let o=n[n.length-1];return i==="**"&&o==="**"?n:i===".."&&o&&o!==".."&&o!=="."&&o!=="**"?(n.pop(),n):(n.push(i),n)},[]),r.length===0?[""]:r))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let r=!1;do{if(r=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let o=e[i];i===1&&o===""&&e[0]===""||(o==="."||o==="")&&(r=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(r=!0,e.pop())}let n=0;for(;(n=e.indexOf("..",n+1))!==-1;){let i=e[n-1];i&&i!=="."&&i!==".."&&i!=="**"&&(r=!0,e.splice(n-1,2),n-=2)}}while(r);return e.length===0?[""]:e}firstPhasePreProcess(e){let r=!1;do{r=!1;for(let n of e){let i=-1;for(;(i=n.indexOf("**",i+1))!==-1;){let s=i;for(;n[s+1]==="**";)s++;s>i&&n.splice(i+1,s-i);let l=n[i+1],p=n[i+2],u=n[i+3];if(l!==".."||!p||p==="."||p===".."||!u||u==="."||u==="..")continue;r=!0,n.splice(i,1);let m=n.slice(0);m[i]="**",e.push(m),i--}if(!this.preserveMultipleSlashes){for(let s=1;s<n.length-1;s++){let l=n[s];s===1&&l===""&&n[0]===""||(l==="."||l==="")&&(r=!0,n.splice(s,1),s--)}n[0]==="."&&n.length===2&&(n[1]==="."||n[1]==="")&&(r=!0,n.pop())}let o=0;for(;(o=n.indexOf("..",o+1))!==-1;){let s=n[o-1];if(s&&s!=="."&&s!==".."&&s!=="**"){r=!0;let p=o===1&&n[o+1]==="**"?["."]:[];n.splice(o-1,2,...p),n.length===0&&n.push(""),o-=2}}}}while(r);return e}secondPhasePreProcess(e){for(let r=0;r<e.length-1;r++)for(let n=r+1;n<e.length;n++){let i=this.partsMatch(e[r],e[n],!this.preserveMultipleSlashes);if(i){e[r]=[],e[n]=i;break}}return e.filter(r=>r.length)}partsMatch(e,r,n=!1){let i=0,o=0,s=[],l="";for(;i<e.length&&o<r.length;)if(e[i]===r[o])s.push(l==="b"?r[o]:e[i]),i++,o++;else if(n&&e[i]==="**"&&r[o]===e[i+1])s.push(e[i]),i++;else if(n&&r[o]==="**"&&e[i]===r[o+1])s.push(r[o]),o++;else if(e[i]==="*"&&r[o]&&(this.options.dot||!r[o].startsWith("."))&&r[o]!=="**"){if(l==="b")return!1;l="a",s.push(e[i]),i++,o++}else if(r[o]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(l==="a")return!1;l="b",s.push(r[o]),i++,o++}else return!1;return e.length===r.length&&s}parseNegate(){if(this.nonegate)return;let e=this.pattern,r=!1,n=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)r=!r,n++;n&&(this.pattern=e.slice(n)),this.negate=r}matchOne(e,r,n=!1){let i=this.options;if(this.isWindows){let v=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),I=!v&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),F=typeof r[0]=="string"&&/^[a-z]:$/i.test(r[0]),V=!F&&r[0]===""&&r[1]===""&&r[2]==="?"&&typeof r[3]=="string"&&/^[a-z]:$/i.test(r[3]),Z=I?3:v?0:void 0,oe=V?3:F?0:void 0;if(typeof Z=="number"&&typeof oe=="number"){let[ae,le]=[e[Z],r[oe]];ae.toLowerCase()===le.toLowerCase()&&(r[oe]=ae,oe>Z?r=r.slice(oe):Z>oe&&(e=e.slice(Z)))}}let{optimizationLevel:o=1}=this.options;o>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var s=0,l=0,p=e.length,u=r.length;s<p&&l<u;s++,l++){this.debug("matchOne loop");var m=r[l],d=e[s];if(this.debug(r,m,d),m===!1)return!1;if(m===jt){this.debug("GLOBSTAR",[r,m,d]);var g=s,x=l+1;if(x===u){for(this.debug("** at the end");s<p;s++)if(e[s]==="."||e[s]===".."||!i.dot&&e[s].charAt(0)===".")return!1;return!0}for(;g<p;){var b=e[g];if(this.debug(`
globstar while`,e,g,r,x,b),this.matchOne(e.slice(g),r.slice(x),n))return this.debug("globstar found match!",g,p,b),!0;if(b==="."||b===".."||!i.dot&&b.charAt(0)==="."){this.debug("dot detected!",e,g,r,x);break}this.debug("globstar swallow a segment, and continue"),g++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,g,r,x),g===p))}let v;if(typeof m=="string"?(v=d===m,this.debug("string match",m,d,v)):(v=m.test(d),this.debug("pattern match",m,d,v)),!v)return!1}if(s===p&&l===u)return!0;if(s===p)return n;if(l===u)return s===p-1&&e[s]==="";throw new Error("wtf?")}braceExpand(){return oC(this.pattern,this.options)}parse(e){_p(e);let r=this.options;if(e==="**")return jt;if(e==="")return"";let n,i=null;(n=e.match(uY))?i=r.dot?mY:fY:(n=e.match(tY))?i=(r.nocase?r.dot?oY:iY:r.dot?nY:rY)(n[1]):(n=e.match(dY))?i=(r.nocase?r.dot?gY:hY:r.dot?yY:xY)(n):(n=e.match(aY))?i=r.dot?cY:sY:(n=e.match(lY))&&(i=pY);let o=gc.fromGlob(e,this.options).toMMPattern();return i&&typeof o=="object"&&Reflect.defineProperty(o,"test",{value:i}),o}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let r=this.options,n=r.noglobstar?vY:r.dot?bY:wY,i=new Set(r.nocase?["i"]:[]),o=e.map(p=>{let u=p.map(m=>{if(m instanceof RegExp)for(let d of m.flags.split(""))i.add(d);return typeof m=="string"?PY(m):m===jt?jt:m._src});return u.forEach((m,d)=>{let g=u[d+1],x=u[d-1];m!==jt||x===jt||(x===void 0?g!==void 0&&g!==jt?u[d+1]="(?:\\/|"+n+"\\/)?"+g:u[d]=n:g===void 0?u[d-1]=x+"(?:\\/|"+n+")?":g!==jt&&(u[d-1]=x+"(?:\\/|\\/"+n+"\\/)"+g,u[d+1]=jt))}),u.filter(m=>m!==jt).join("/")}).join("|"),[s,l]=e.length>1?["(?:",")"]:["",""];o="^"+s+o+l+"$",this.negate&&(o="^(?!"+o+").+$");try{this.regexp=new RegExp(o,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;let n=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let o=this.set;this.debug(this.pattern,"set",o);let s=i[i.length-1];if(!s)for(let l=i.length-2;!s&&l>=0;l--)s=i[l];for(let l=0;l<o.length;l++){let p=o[l],u=i;if(n.matchBase&&p.length===1&&(u=[s]),this.matchOne(u,p,r))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return dr.defaults(e).Minimatch}};dr.AST=gc;dr.Minimatch=Jr;dr.escape=yc;dr.unescape=Wn;var AC=require("node:url");var xc=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,sC=new Set,Sb=typeof process=="object"&&process?process:{},cC=(t,e,r,n)=>{typeof Sb.emitWarning=="function"?Sb.emitWarning(t,e,r,n):console.error(`[${r}] ${e}: ${t}`)},fy=globalThis.AbortController,aC=globalThis.AbortSignal;if(typeof fy>"u"){aC=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(n,i){this._onabort.push(i)}},fy=class{constructor(){e()}signal=new aC;abort(n){if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(let i of this.signal._onabort)i(n);this.signal.onabort?.(n)}}};let t=Sb.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{t&&(t=!1,cC("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var AY=t=>!sC.has(t),aHe=Symbol("type"),Fo=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),lC=t=>Fo(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?Tc:null:null,Tc=class extends Array{constructor(e){super(e),this.fill(0)}},vb=class t{heap;length;static#e=!1;static create(e){let r=lC(e);if(!r)return[];t.#e=!0;let n=new t(e,r);return t.#e=!1,n}constructor(e,r){if(!t.#e)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},Rp=class t{#e;#t;#o;#n;#a;#S;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#l;#u;#s;#c;#i;#g;#y;#m;#f;#w;#h;#_;#E;#T;#v;#b;#d;static unsafeExposeInternals(e){return{starts:e.#E,ttls:e.#T,sizes:e.#_,keyMap:e.#s,keyList:e.#c,valList:e.#i,next:e.#g,prev:e.#y,get head(){return e.#m},get tail(){return e.#f},free:e.#w,isBackgroundFetch:r=>e.#p(r),backgroundFetch:(r,n,i,o)=>e.#U(r,n,i,o),moveToTail:r=>e.#V(r),indexes:r=>e.#k(r),rindexes:r=>e.#P(r),isStale:r=>e.#x(r)}}get max(){return this.#e}get maxSize(){return this.#t}get calculatedSize(){return this.#u}get size(){return this.#l}get fetchMethod(){return this.#a}get memoMethod(){return this.#S}get dispose(){return this.#o}get disposeAfter(){return this.#n}constructor(e){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:s,updateAgeOnHas:l,allowStale:p,dispose:u,disposeAfter:m,noDisposeOnSet:d,noUpdateTTL:g,maxSize:x=0,maxEntrySize:b=0,sizeCalculation:v,fetchMethod:I,memoMethod:F,noDeleteOnFetchRejection:V,noDeleteOnStaleGet:Z,allowStaleOnFetchRejection:oe,allowStaleOnFetchAbort:ae,ignoreFetchAbort:le}=e;if(r!==0&&!Fo(r))throw new TypeError("max option must be a nonnegative integer");let st=r?lC(r):Array;if(!st)throw new Error("invalid max value: "+r);if(this.#e=r,this.#t=x,this.maxEntrySize=b||this.#t,this.sizeCalculation=v,this.sizeCalculation){if(!this.#t&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(F!==void 0&&typeof F!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#S=F,I!==void 0&&typeof I!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#a=I,this.#b=!!I,this.#s=new Map,this.#c=new Array(r).fill(void 0),this.#i=new Array(r).fill(void 0),this.#g=new st(r),this.#y=new st(r),this.#m=0,this.#f=0,this.#w=vb.create(r),this.#l=0,this.#u=0,typeof u=="function"&&(this.#o=u),typeof m=="function"?(this.#n=m,this.#h=[]):(this.#n=void 0,this.#h=void 0),this.#v=!!this.#o,this.#d=!!this.#n,this.noDisposeOnSet=!!d,this.noUpdateTTL=!!g,this.noDeleteOnFetchRejection=!!V,this.allowStaleOnFetchRejection=!!oe,this.allowStaleOnFetchAbort=!!ae,this.ignoreFetchAbort=!!le,this.maxEntrySize!==0){if(this.#t!==0&&!Fo(this.#t))throw new TypeError("maxSize must be a positive integer if specified");if(!Fo(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#M()}if(this.allowStale=!!p,this.noDeleteOnStaleGet=!!Z,this.updateAgeOnGet=!!s,this.updateAgeOnHas=!!l,this.ttlResolution=Fo(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=n||0,this.ttl){if(!Fo(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#A()}if(this.#e===0&&this.ttl===0&&this.#t===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#e&&!this.#t){let Lt="LRU_CACHE_UNBOUNDED";AY(Lt)&&(sC.add(Lt),cC("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",Lt,t))}}getRemainingTTL(e){return this.#s.has(e)?1/0:0}#A(){let e=new Tc(this.#e),r=new Tc(this.#e);this.#T=e,this.#E=r,this.#F=(o,s,l=xc.now())=>{if(r[o]=s!==0?l:0,e[o]=s,s!==0&&this.ttlAutopurge){let p=setTimeout(()=>{this.#x(o)&&this.#D(this.#c[o],"expire")},s+1);p.unref&&p.unref()}},this.#R=o=>{r[o]=e[o]!==0?xc.now():0},this.#r=(o,s)=>{if(e[s]){let l=e[s],p=r[s];if(!l||!p)return;o.ttl=l,o.start=p,o.now=n||i();let u=o.now-p;o.remainingTTL=l-u}};let n=0,i=()=>{let o=xc.now();if(this.ttlResolution>0){n=o;let s=setTimeout(()=>n=0,this.ttlResolution);s.unref&&s.unref()}return o};this.getRemainingTTL=o=>{let s=this.#s.get(o);if(s===void 0)return 0;let l=e[s],p=r[s];if(!l||!p)return 1/0;let u=(n||i())-p;return l-u},this.#x=o=>{let s=r[o],l=e[o];return!!l&&!!s&&(n||i())-s>l}}#R=()=>{};#r=()=>{};#F=()=>{};#x=()=>!1;#M(){let e=new Tc(this.#e);this.#u=0,this.#_=e,this.#I=r=>{this.#u-=e[r],e[r]=0},this.#N=(r,n,i,o)=>{if(this.#p(n))return 0;if(!Fo(i))if(o){if(typeof o!="function")throw new TypeError("sizeCalculation must be a function");if(i=o(n,r),!Fo(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#C=(r,n,i)=>{if(e[r]=n,this.#t){let o=this.#t-e[r];for(;this.#u>o;)this.#L(!0)}this.#u+=e[r],i&&(i.entrySize=n,i.totalCalculatedSize=this.#u)}}#I=e=>{};#C=(e,r,n)=>{};#N=(e,r,n,i)=>{if(n||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#k({allowStale:e=this.allowStale}={}){if(this.#l)for(let r=this.#f;!(!this.#O(r)||((e||!this.#x(r))&&(yield r),r===this.#m));)r=this.#y[r]}*#P({allowStale:e=this.allowStale}={}){if(this.#l)for(let r=this.#m;!(!this.#O(r)||((e||!this.#x(r))&&(yield r),r===this.#f));)r=this.#g[r]}#O(e){return e!==void 0&&this.#s.get(this.#c[e])===e}*entries(){for(let e of this.#k())this.#i[e]!==void 0&&this.#c[e]!==void 0&&!this.#p(this.#i[e])&&(yield[this.#c[e],this.#i[e]])}*rentries(){for(let e of this.#P())this.#i[e]!==void 0&&this.#c[e]!==void 0&&!this.#p(this.#i[e])&&(yield[this.#c[e],this.#i[e]])}*keys(){for(let e of this.#k()){let r=this.#c[e];r!==void 0&&!this.#p(this.#i[e])&&(yield r)}}*rkeys(){for(let e of this.#P()){let r=this.#c[e];r!==void 0&&!this.#p(this.#i[e])&&(yield r)}}*values(){for(let e of this.#k())this.#i[e]!==void 0&&!this.#p(this.#i[e])&&(yield this.#i[e])}*rvalues(){for(let e of this.#P())this.#i[e]!==void 0&&!this.#p(this.#i[e])&&(yield this.#i[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,r={}){for(let n of this.#k()){let i=this.#i[n],o=this.#p(i)?i.__staleWhileFetching:i;if(o!==void 0&&e(o,this.#c[n],this))return this.get(this.#c[n],r)}}forEach(e,r=this){for(let n of this.#k()){let i=this.#i[n],o=this.#p(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#c[n],this)}}rforEach(e,r=this){for(let n of this.#P()){let i=this.#i[n],o=this.#p(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#c[n],this)}}purgeStale(){let e=!1;for(let r of this.#P({allowStale:!0}))this.#x(r)&&(this.#D(this.#c[r],"expire"),e=!0);return e}info(e){let r=this.#s.get(e);if(r===void 0)return;let n=this.#i[r],i=this.#p(n)?n.__staleWhileFetching:n;if(i===void 0)return;let o={value:i};if(this.#T&&this.#E){let s=this.#T[r],l=this.#E[r];if(s&&l){let p=s-(xc.now()-l);o.ttl=p,o.start=Date.now()}}return this.#_&&(o.size=this.#_[r]),o}dump(){let e=[];for(let r of this.#k({allowStale:!0})){let n=this.#c[r],i=this.#i[r],o=this.#p(i)?i.__staleWhileFetching:i;if(o===void 0||n===void 0)continue;let s={value:o};if(this.#T&&this.#E){s.ttl=this.#T[r];let l=xc.now()-this.#E[r];s.start=Math.floor(Date.now()-l)}this.#_&&(s.size=this.#_[r]),e.unshift([n,s])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let i=Date.now()-n.start;n.start=xc.now()-i}this.set(r,n.value,n)}}set(e,r,n={}){if(r===void 0)return this.delete(e),this;let{ttl:i=this.ttl,start:o,noDisposeOnSet:s=this.noDisposeOnSet,sizeCalculation:l=this.sizeCalculation,status:p}=n,{noUpdateTTL:u=this.noUpdateTTL}=n,m=this.#N(e,r,n.size||0,l);if(this.maxEntrySize&&m>this.maxEntrySize)return p&&(p.set="miss",p.maxEntrySizeExceeded=!0),this.#D(e,"set"),this;let d=this.#l===0?void 0:this.#s.get(e);if(d===void 0)d=this.#l===0?this.#f:this.#w.length!==0?this.#w.pop():this.#l===this.#e?this.#L(!1):this.#l,this.#c[d]=e,this.#i[d]=r,this.#s.set(e,d),this.#g[this.#f]=d,this.#y[d]=this.#f,this.#f=d,this.#l++,this.#C(d,m,p),p&&(p.set="add"),u=!1;else{this.#V(d);let g=this.#i[d];if(r!==g){if(this.#b&&this.#p(g)){g.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:x}=g;x!==void 0&&!s&&(this.#v&&this.#o?.(x,e,"set"),this.#d&&this.#h?.push([x,e,"set"]))}else s||(this.#v&&this.#o?.(g,e,"set"),this.#d&&this.#h?.push([g,e,"set"]));if(this.#I(d),this.#C(d,m,p),this.#i[d]=r,p){p.set="replace";let x=g&&this.#p(g)?g.__staleWhileFetching:g;x!==void 0&&(p.oldValue=x)}}else p&&(p.set="update")}if(i!==0&&!this.#T&&this.#A(),this.#T&&(u||this.#F(d,i,o),p&&this.#r(p,d)),!s&&this.#d&&this.#h){let g=this.#h,x;for(;x=g?.shift();)this.#n?.(...x)}return this}pop(){try{for(;this.#l;){let e=this.#i[this.#m];if(this.#L(!0),this.#p(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#d&&this.#h){let e=this.#h,r;for(;r=e?.shift();)this.#n?.(...r)}}}#L(e){let r=this.#m,n=this.#c[r],i=this.#i[r];return this.#b&&this.#p(i)?i.__abortController.abort(new Error("evicted")):(this.#v||this.#d)&&(this.#v&&this.#o?.(i,n,"evict"),this.#d&&this.#h?.push([i,n,"evict"])),this.#I(r),e&&(this.#c[r]=void 0,this.#i[r]=void 0,this.#w.push(r)),this.#l===1?(this.#m=this.#f=0,this.#w.length=0):this.#m=this.#g[r],this.#s.delete(n),this.#l--,r}has(e,r={}){let{updateAgeOnHas:n=this.updateAgeOnHas,status:i}=r,o=this.#s.get(e);if(o!==void 0){let s=this.#i[o];if(this.#p(s)&&s.__staleWhileFetching===void 0)return!1;if(this.#x(o))i&&(i.has="stale",this.#r(i,o));else return n&&this.#R(o),i&&(i.has="hit",this.#r(i,o)),!0}else i&&(i.has="miss");return!1}peek(e,r={}){let{allowStale:n=this.allowStale}=r,i=this.#s.get(e);if(i===void 0||!n&&this.#x(i))return;let o=this.#i[i];return this.#p(o)?o.__staleWhileFetching:o}#U(e,r,n,i){let o=r===void 0?void 0:this.#i[r];if(this.#p(o))return o;let s=new fy,{signal:l}=n;l?.addEventListener("abort",()=>s.abort(l.reason),{signal:s.signal});let p={signal:s.signal,options:n,context:i},u=(v,I=!1)=>{let{aborted:F}=s.signal,V=n.ignoreFetchAbort&&v!==void 0;if(n.status&&(F&&!I?(n.status.fetchAborted=!0,n.status.fetchError=s.signal.reason,V&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),F&&!V&&!I)return d(s.signal.reason);let Z=x;return this.#i[r]===x&&(v===void 0?Z.__staleWhileFetching?this.#i[r]=Z.__staleWhileFetching:this.#D(e,"fetch"):(n.status&&(n.status.fetchUpdated=!0),this.set(e,v,p.options))),v},m=v=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=v),d(v)),d=v=>{let{aborted:I}=s.signal,F=I&&n.allowStaleOnFetchAbort,V=F||n.allowStaleOnFetchRejection,Z=V||n.noDeleteOnFetchRejection,oe=x;if(this.#i[r]===x&&(!Z||oe.__staleWhileFetching===void 0?this.#D(e,"fetch"):F||(this.#i[r]=oe.__staleWhileFetching)),V)return n.status&&oe.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),oe.__staleWhileFetching;if(oe.__returned===oe)throw v},g=(v,I)=>{let F=this.#a?.(e,o,p);F&&F instanceof Promise&&F.then(V=>v(V===void 0?void 0:V),I),s.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(v(void 0),n.allowStaleOnFetchAbort&&(v=V=>u(V,!0)))})};n.status&&(n.status.fetchDispatched=!0);let x=new Promise(g).then(u,m),b=Object.assign(x,{__abortController:s,__staleWhileFetching:o,__returned:void 0});return r===void 0?(this.set(e,b,{...p.options,status:void 0}),r=this.#s.get(e)):this.#i[r]=b,b}#p(e){if(!this.#b)return!1;let r=e;return!!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof fy}async fetch(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:s=this.ttl,noDisposeOnSet:l=this.noDisposeOnSet,size:p=0,sizeCalculation:u=this.sizeCalculation,noUpdateTTL:m=this.noUpdateTTL,noDeleteOnFetchRejection:d=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:g=this.allowStaleOnFetchRejection,ignoreFetchAbort:x=this.ignoreFetchAbort,allowStaleOnFetchAbort:b=this.allowStaleOnFetchAbort,context:v,forceRefresh:I=!1,status:F,signal:V}=r;if(!this.#b)return F&&(F.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,status:F});let Z={allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,ttl:s,noDisposeOnSet:l,size:p,sizeCalculation:u,noUpdateTTL:m,noDeleteOnFetchRejection:d,allowStaleOnFetchRejection:g,allowStaleOnFetchAbort:b,ignoreFetchAbort:x,status:F,signal:V},oe=this.#s.get(e);if(oe===void 0){F&&(F.fetch="miss");let ae=this.#U(e,oe,Z,v);return ae.__returned=ae}else{let ae=this.#i[oe];if(this.#p(ae)){let L=n&&ae.__staleWhileFetching!==void 0;return F&&(F.fetch="inflight",L&&(F.returnedStale=!0)),L?ae.__staleWhileFetching:ae.__returned=ae}let le=this.#x(oe);if(!I&&!le)return F&&(F.fetch="hit"),this.#V(oe),i&&this.#R(oe),F&&this.#r(F,oe),ae;let st=this.#U(e,oe,Z,v),ut=st.__staleWhileFetching!==void 0&&n;return F&&(F.fetch=le?"stale":"refresh",ut&&le&&(F.returnedStale=!0)),ut?st.__staleWhileFetching:st.__returned=st}}async forceFetch(e,r={}){let n=await this.fetch(e,r);if(n===void 0)throw new Error("fetch() returned undefined");return n}memo(e,r={}){let n=this.#S;if(!n)throw new Error("no memoMethod provided to constructor");let{context:i,forceRefresh:o,...s}=r,l=this.get(e,s);if(!o&&l!==void 0)return l;let p=n(e,l,{options:s,context:i});return this.set(e,p,s),p}get(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:s}=r,l=this.#s.get(e);if(l!==void 0){let p=this.#i[l],u=this.#p(p);return s&&this.#r(s,l),this.#x(l)?(s&&(s.get="stale"),u?(s&&n&&p.__staleWhileFetching!==void 0&&(s.returnedStale=!0),n?p.__staleWhileFetching:void 0):(o||this.#D(e,"expire"),s&&n&&(s.returnedStale=!0),n?p:void 0)):(s&&(s.get="hit"),u?p.__staleWhileFetching:(this.#V(l),i&&this.#R(l),p))}else s&&(s.get="miss")}#H(e,r){this.#y[r]=e,this.#g[e]=r}#V(e){e!==this.#f&&(e===this.#m?this.#m=this.#g[e]:this.#H(this.#y[e],this.#g[e]),this.#H(this.#f,e),this.#f=e)}delete(e){return this.#D(e,"delete")}#D(e,r){let n=!1;if(this.#l!==0){let i=this.#s.get(e);if(i!==void 0)if(n=!0,this.#l===1)this.#B(r);else{this.#I(i);let o=this.#i[i];if(this.#p(o)?o.__abortController.abort(new Error("deleted")):(this.#v||this.#d)&&(this.#v&&this.#o?.(o,e,r),this.#d&&this.#h?.push([o,e,r])),this.#s.delete(e),this.#c[i]=void 0,this.#i[i]=void 0,i===this.#f)this.#f=this.#y[i];else if(i===this.#m)this.#m=this.#g[i];else{let s=this.#y[i];this.#g[s]=this.#g[i];let l=this.#g[i];this.#y[l]=this.#y[i]}this.#l--,this.#w.push(i)}}if(this.#d&&this.#h?.length){let i=this.#h,o;for(;o=i?.shift();)this.#n?.(...o)}return n}clear(){return this.#B("delete")}#B(e){for(let r of this.#P({allowStale:!0})){let n=this.#i[r];if(this.#p(n))n.__abortController.abort(new Error("deleted"));else{let i=this.#c[r];this.#v&&this.#o?.(n,i,e),this.#d&&this.#h?.push([n,i,e])}}if(this.#s.clear(),this.#i.fill(void 0),this.#c.fill(void 0),this.#T&&this.#E&&(this.#T.fill(0),this.#E.fill(0)),this.#_&&this.#_.fill(0),this.#m=0,this.#f=0,this.#w.length=0,this.#u=0,this.#l=0,this.#d&&this.#h){let r=this.#h,n;for(;n=r?.shift();)this.#n?.(...n)}}};var bc=require("node:path"),TC=require("node:url"),mi=require("fs"),HY=br(require("node:fs"),1),No=require("node:fs/promises");var Ty=require("node:events"),Pb=br(require("node:stream"),1),dC=require("node:string_decoder"),pC=typeof process=="object"&&process?process:{stdout:null,stderr:null},MY=t=>!!t&&typeof t=="object"&&(t instanceof Co||t instanceof Pb.default||DY(t)||FY(t)),DY=t=>!!t&&typeof t=="object"&&t instanceof Ty.EventEmitter&&typeof t.pipe=="function"&&t.pipe!==Pb.default.Writable.prototype.pipe,FY=t=>!!t&&typeof t=="object"&&t instanceof Ty.EventEmitter&&typeof t.write=="function"&&typeof t.end=="function",Bi=Symbol("EOF"),Wi=Symbol("maybeEmitEnd"),Io=Symbol("emittedEnd"),my=Symbol("emittingEnd"),kp=Symbol("emittedError"),dy=Symbol("closed"),uC=Symbol("read"),hy=Symbol("flush"),fC=Symbol("flushChunk"),$n=Symbol("encoding"),Sc=Symbol("decoder"),Ct=Symbol("flowing"),Pp=Symbol("paused"),vc=Symbol("resume"),Nt=Symbol("buffer"),hr=Symbol("pipes"),Ot=Symbol("bufferLength"),bb=Symbol("bufferPush"),gy=Symbol("bufferShift"),tr=Symbol("objectMode"),St=Symbol("destroyed"),wb=Symbol("error"),_b=Symbol("emitData"),mC=Symbol("emitEnd"),Eb=Symbol("emitEnd2"),ui=Symbol("async"),Rb=Symbol("abort"),yy=Symbol("aborted"),Ap=Symbol("signal"),Fa=Symbol("dataListeners"),en=Symbol("discarded"),Mp=t=>Promise.resolve().then(t),IY=t=>t(),CY=t=>t==="end"||t==="finish"||t==="prefinish",NY=t=>t instanceof ArrayBuffer||!!t&&typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,OY=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),xy=class{src;dest;opts;ondrain;constructor(e,r,n){this.src=e,this.dest=r,this.opts=n,this.ondrain=()=>e[vc](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(e){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},kb=class extends xy{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,r,n){super(e,r,n),this.proxyErrors=i=>r.emit("error",i),e.on("error",this.proxyErrors)}},LY=t=>!!t.objectMode,UY=t=>!t.objectMode&&!!t.encoding&&t.encoding!=="buffer",Co=class extends Ty.EventEmitter{[Ct]=!1;[Pp]=!1;[hr]=[];[Nt]=[];[tr];[$n];[ui];[Sc];[Bi]=!1;[Io]=!1;[my]=!1;[dy]=!1;[kp]=null;[Ot]=0;[St]=!1;[Ap];[yy]=!1;[Fa]=0;[en]=!1;writable=!0;readable=!0;constructor(...e){let r=e[0]||{};if(super(),r.objectMode&&typeof r.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");LY(r)?(this[tr]=!0,this[$n]=null):UY(r)?(this[$n]=r.encoding,this[tr]=!1):(this[tr]=!1,this[$n]=null),this[ui]=!!r.async,this[Sc]=this[$n]?new dC.StringDecoder(this[$n]):null,r&&r.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[Nt]}),r&&r.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[hr]});let{signal:n}=r;n&&(this[Ap]=n,n.aborted?this[Rb]():n.addEventListener("abort",()=>this[Rb]()))}get bufferLength(){return this[Ot]}get encoding(){return this[$n]}set encoding(e){throw new Error("Encoding must be set at instantiation time")}setEncoding(e){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[tr]}set objectMode(e){throw new Error("objectMode must be set at instantiation time")}get async(){return this[ui]}set async(e){this[ui]=this[ui]||!!e}[Rb](){this[yy]=!0,this.emit("abort",this[Ap]?.reason),this.destroy(this[Ap]?.reason)}get aborted(){return this[yy]}set aborted(e){}write(e,r,n){if(this[yy])return!1;if(this[Bi])throw new Error("write after end");if(this[St])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof r=="function"&&(n=r,r="utf8"),r||(r="utf8");let i=this[ui]?Mp:IY;if(!this[tr]&&!Buffer.isBuffer(e)){if(OY(e))e=Buffer.from(e.buffer,e.byteOffset,e.byteLength);else if(NY(e))e=Buffer.from(e);else if(typeof e!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[tr]?(this[Ct]&&this[Ot]!==0&&this[hy](!0),this[Ct]?this.emit("data",e):this[bb](e),this[Ot]!==0&&this.emit("readable"),n&&i(n),this[Ct]):e.length?(typeof e=="string"&&!(r===this[$n]&&!this[Sc]?.lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[$n]&&(e=this[Sc].write(e)),this[Ct]&&this[Ot]!==0&&this[hy](!0),this[Ct]?this.emit("data",e):this[bb](e),this[Ot]!==0&&this.emit("readable"),n&&i(n),this[Ct]):(this[Ot]!==0&&this.emit("readable"),n&&i(n),this[Ct])}read(e){if(this[St])return null;if(this[en]=!1,this[Ot]===0||e===0||e&&e>this[Ot])return this[Wi](),null;this[tr]&&(e=null),this[Nt].length>1&&!this[tr]&&(this[Nt]=[this[$n]?this[Nt].join(""):Buffer.concat(this[Nt],this[Ot])]);let r=this[uC](e||null,this[Nt][0]);return this[Wi](),r}[uC](e,r){if(this[tr])this[gy]();else{let n=r;e===n.length||e===null?this[gy]():typeof n=="string"?(this[Nt][0]=n.slice(e),r=n.slice(0,e),this[Ot]-=e):(this[Nt][0]=n.subarray(e),r=n.subarray(0,e),this[Ot]-=e)}return this.emit("data",r),!this[Nt].length&&!this[Bi]&&this.emit("drain"),r}end(e,r,n){return typeof e=="function"&&(n=e,e=void 0),typeof r=="function"&&(n=r,r="utf8"),e!==void 0&&this.write(e,r),n&&this.once("end",n),this[Bi]=!0,this.writable=!1,(this[Ct]||!this[Pp])&&this[Wi](),this}[vc](){this[St]||(!this[Fa]&&!this[hr].length&&(this[en]=!0),this[Pp]=!1,this[Ct]=!0,this.emit("resume"),this[Nt].length?this[hy]():this[Bi]?this[Wi]():this.emit("drain"))}resume(){return this[vc]()}pause(){this[Ct]=!1,this[Pp]=!0,this[en]=!1}get destroyed(){return this[St]}get flowing(){return this[Ct]}get paused(){return this[Pp]}[bb](e){this[tr]?this[Ot]+=1:this[Ot]+=e.length,this[Nt].push(e)}[gy](){return this[tr]?this[Ot]-=1:this[Ot]-=this[Nt][0].length,this[Nt].shift()}[hy](e=!1){do;while(this[fC](this[gy]())&&this[Nt].length);!e&&!this[Nt].length&&!this[Bi]&&this.emit("drain")}[fC](e){return this.emit("data",e),this[Ct]}pipe(e,r){if(this[St])return e;this[en]=!1;let n=this[Io];return r=r||{},e===pC.stdout||e===pC.stderr?r.end=!1:r.end=r.end!==!1,r.proxyErrors=!!r.proxyErrors,n?r.end&&e.end():(this[hr].push(r.proxyErrors?new kb(this,e,r):new xy(this,e,r)),this[ui]?Mp(()=>this[vc]()):this[vc]()),e}unpipe(e){let r=this[hr].find(n=>n.dest===e);r&&(this[hr].length===1?(this[Ct]&&this[Fa]===0&&(this[Ct]=!1),this[hr]=[]):this[hr].splice(this[hr].indexOf(r),1),r.unpipe())}addListener(e,r){return this.on(e,r)}on(e,r){let n=super.on(e,r);if(e==="data")this[en]=!1,this[Fa]++,!this[hr].length&&!this[Ct]&&this[vc]();else if(e==="readable"&&this[Ot]!==0)super.emit("readable");else if(CY(e)&&this[Io])super.emit(e),this.removeAllListeners(e);else if(e==="error"&&this[kp]){let i=r;this[ui]?Mp(()=>i.call(this,this[kp])):i.call(this,this[kp])}return n}removeListener(e,r){return this.off(e,r)}off(e,r){let n=super.off(e,r);return e==="data"&&(this[Fa]=this.listeners("data").length,this[Fa]===0&&!this[en]&&!this[hr].length&&(this[Ct]=!1)),n}removeAllListeners(e){let r=super.removeAllListeners(e);return(e==="data"||e===void 0)&&(this[Fa]=0,!this[en]&&!this[hr].length&&(this[Ct]=!1)),r}get emittedEnd(){return this[Io]}[Wi](){!this[my]&&!this[Io]&&!this[St]&&this[Nt].length===0&&this[Bi]&&(this[my]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[dy]&&this.emit("close"),this[my]=!1)}emit(e,...r){let n=r[0];if(e!=="error"&&e!=="close"&&e!==St&&this[St])return!1;if(e==="data")return!this[tr]&&!n?!1:this[ui]?(Mp(()=>this[_b](n)),!0):this[_b](n);if(e==="end")return this[mC]();if(e==="close"){if(this[dy]=!0,!this[Io]&&!this[St])return!1;let o=super.emit("close");return this.removeAllListeners("close"),o}else if(e==="error"){this[kp]=n,super.emit(wb,n);let o=!this[Ap]||this.listeners("error").length?super.emit("error",n):!1;return this[Wi](),o}else if(e==="resume"){let o=super.emit("resume");return this[Wi](),o}else if(e==="finish"||e==="prefinish"){let o=super.emit(e);return this.removeAllListeners(e),o}let i=super.emit(e,...r);return this[Wi](),i}[_b](e){for(let n of this[hr])n.dest.write(e)===!1&&this.pause();let r=this[en]?!1:super.emit("data",e);return this[Wi](),r}[mC](){return this[Io]?!1:(this[Io]=!0,this.readable=!1,this[ui]?(Mp(()=>this[Eb]()),!0):this[Eb]())}[Eb](){if(this[Sc]){let r=this[Sc].end();if(r){for(let n of this[hr])n.dest.write(r);this[en]||super.emit("data",r)}}for(let r of this[hr])r.end();let e=super.emit("end");return this.removeAllListeners("end"),e}async collect(){let e=Object.assign([],{dataLength:0});this[tr]||(e.dataLength=0);let r=this.promise();return this.on("data",n=>{e.push(n),this[tr]||(e.dataLength+=n.length)}),await r,e}async concat(){if(this[tr])throw new Error("cannot concat in objectMode");let e=await this.collect();return this[$n]?e.join(""):Buffer.concat(e,e.dataLength)}async promise(){return new Promise((e,r)=>{this.on(St,()=>r(new Error("stream destroyed"))),this.on("error",n=>r(n)),this.on("end",()=>e())})}[Symbol.asyncIterator](){this[en]=!1;let e=!1,r=async()=>(this.pause(),e=!0,{value:void 0,done:!0});return{next:()=>{if(e)return r();let i=this.read();if(i!==null)return Promise.resolve({done:!1,value:i});if(this[Bi])return r();let o,s,l=d=>{this.off("data",p),this.off("end",u),this.off(St,m),r(),s(d)},p=d=>{this.off("error",l),this.off("end",u),this.off(St,m),this.pause(),o({value:d,done:!!this[Bi]})},u=()=>{this.off("error",l),this.off("data",p),this.off(St,m),r(),o({done:!0,value:void 0})},m=()=>l(new Error("stream destroyed"));return new Promise((d,g)=>{s=g,o=d,this.once(St,m),this.once("error",l),this.once("end",u),this.once("data",p)})},throw:r,return:r,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[en]=!1;let e=!1,r=()=>(this.pause(),this.off(wb,r),this.off(St,r),this.off("end",r),e=!0,{done:!0,value:void 0}),n=()=>{if(e)return r();let i=this.read();return i===null?r():{done:!1,value:i}};return this.once("end",r),this.once(wb,r),this.once(St,r),{next:n,throw:r,return:r,[Symbol.iterator](){return this}}}destroy(e){if(this[St])return e?this.emit("error",e):this.emit(St),this;this[St]=!0,this[en]=!0,this[Nt].length=0,this[Ot]=0;let r=this;return typeof r.close=="function"&&!this[dy]&&r.close(),e?this.emit("error",e):this.emit(St),this}static get isStream(){return MY}};var VY=mi.realpathSync.native,Fp={lstatSync:mi.lstatSync,readdir:mi.readdir,readdirSync:mi.readdirSync,readlinkSync:mi.readlinkSync,realpathSync:VY,promises:{lstat:No.lstat,readdir:No.readdir,readlink:No.readlink,realpath:No.realpath}},SC=t=>!t||t===Fp||t===HY?Fp:{...Fp,...t,promises:{...Fp.promises,...t.promises||{}}},vC=/^\\\\\?\\([a-z]:)\\?$/i,BY=t=>t.replace(/\//g,"\\").replace(vC,"$1\\"),WY=/[\\\/]/,_n=0,bC=1,wC=2,fi=4,_C=6,EC=8,Ia=10,RC=12,wn=15,Dp=~wn,Ab=16,hC=32,Ip=64,jn=128,Sy=256,by=512,gC=Ip|jn|by,$Y=1023,Mb=t=>t.isFile()?EC:t.isDirectory()?fi:t.isSymbolicLink()?Ia:t.isCharacterDevice()?wC:t.isBlockDevice()?_C:t.isSocket()?RC:t.isFIFO()?bC:_n,yC=new Map,Cp=t=>{let e=yC.get(t);if(e)return e;let r=t.normalize("NFKD");return yC.set(t,r),r},xC=new Map,vy=t=>{let e=xC.get(t);if(e)return e;let r=Cp(t.toLowerCase());return xC.set(t,r),r},wy=class extends Rp{constructor(){super({max:256})}},Db=class extends Rp{constructor(e=16*1024){super({maxSize:e,sizeCalculation:r=>r.length+1})}},kC=Symbol("PathScurry setAsCwd"),rr=class{name;root;roots;parent;nocase;isCWD=!1;#e;#t;get dev(){return this.#t}#o;get mode(){return this.#o}#n;get nlink(){return this.#n}#a;get uid(){return this.#a}#S;get gid(){return this.#S}#l;get rdev(){return this.#l}#u;get blksize(){return this.#u}#s;get ino(){return this.#s}#c;get size(){return this.#c}#i;get blocks(){return this.#i}#g;get atimeMs(){return this.#g}#y;get mtimeMs(){return this.#y}#m;get ctimeMs(){return this.#m}#f;get birthtimeMs(){return this.#f}#w;get atime(){return this.#w}#h;get mtime(){return this.#h}#_;get ctime(){return this.#_}#E;get birthtime(){return this.#E}#T;#v;#b;#d;#A;#R;#r;#F;#x;#M;get parentPath(){return(this.parent||this).fullpath()}get path(){return this.parentPath}constructor(e,r=_n,n,i,o,s,l){this.name=e,this.#T=o?vy(e):Cp(e),this.#r=r&$Y,this.nocase=o,this.roots=i,this.root=n||this,this.#F=s,this.#b=l.fullpath,this.#A=l.relative,this.#R=l.relativePosix,this.parent=l.parent,this.parent?this.#e=this.parent.#e:this.#e=SC(l.fs)}depth(){return this.#v!==void 0?this.#v:this.parent?this.#v=this.parent.depth()+1:this.#v=0}childrenCache(){return this.#F}resolve(e){if(!e)return this;let r=this.getRootString(e),i=e.substring(r.length).split(this.splitSep);return r?this.getRoot(r).#I(i):this.#I(i)}#I(e){let r=this;for(let n of e)r=r.child(n);return r}children(){let e=this.#F.get(this);if(e)return e;let r=Object.assign([],{provisional:0});return this.#F.set(this,r),this.#r&=~Ab,r}child(e,r){if(e===""||e===".")return this;if(e==="..")return this.parent||this;let n=this.children(),i=this.nocase?vy(e):Cp(e);for(let p of n)if(p.#T===i)return p;let o=this.parent?this.sep:"",s=this.#b?this.#b+o+e:void 0,l=this.newChild(e,_n,{...r,parent:this,fullpath:s});return this.canReaddir()||(l.#r|=jn),n.push(l),l}relative(){if(this.isCWD)return"";if(this.#A!==void 0)return this.#A;let e=this.name,r=this.parent;if(!r)return this.#A=this.name;let n=r.relative();return n+(!n||!r.parent?"":this.sep)+e}relativePosix(){if(this.sep==="/")return this.relative();if(this.isCWD)return"";if(this.#R!==void 0)return this.#R;let e=this.name,r=this.parent;if(!r)return this.#R=this.fullpathPosix();let n=r.relativePosix();return n+(!n||!r.parent?"":"/")+e}fullpath(){if(this.#b!==void 0)return this.#b;let e=this.name,r=this.parent;if(!r)return this.#b=this.name;let i=r.fullpath()+(r.parent?this.sep:"")+e;return this.#b=i}fullpathPosix(){if(this.#d!==void 0)return this.#d;if(this.sep==="/")return this.#d=this.fullpath();if(!this.parent){let i=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(i)?this.#d=`//?/${i}`:this.#d=i}let e=this.parent,r=e.fullpathPosix(),n=r+(!r||!e.parent?"":"/")+this.name;return this.#d=n}isUnknown(){return(this.#r&wn)===_n}isType(e){return this[`is${e}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#r&wn)===EC}isDirectory(){return(this.#r&wn)===fi}isCharacterDevice(){return(this.#r&wn)===wC}isBlockDevice(){return(this.#r&wn)===_C}isFIFO(){return(this.#r&wn)===bC}isSocket(){return(this.#r&wn)===RC}isSymbolicLink(){return(this.#r&Ia)===Ia}lstatCached(){return this.#r&hC?this:void 0}readlinkCached(){return this.#x}realpathCached(){return this.#M}readdirCached(){let e=this.children();return e.slice(0,e.provisional)}canReadlink(){if(this.#x)return!0;if(!this.parent)return!1;let e=this.#r&wn;return!(e!==_n&&e!==Ia||this.#r&Sy||this.#r&jn)}calledReaddir(){return!!(this.#r&Ab)}isENOENT(){return!!(this.#r&jn)}isNamed(e){return this.nocase?this.#T===vy(e):this.#T===Cp(e)}async readlink(){let e=this.#x;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=await this.#e.promises.readlink(this.fullpath()),n=(await this.parent.realpath())?.resolve(r);if(n)return this.#x=n}catch(r){this.#p(r.code);return}}readlinkSync(){let e=this.#x;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=this.#e.readlinkSync(this.fullpath()),n=this.parent.realpathSync()?.resolve(r);if(n)return this.#x=n}catch(r){this.#p(r.code);return}}#C(e){this.#r|=Ab;for(let r=e.provisional;r<e.length;r++){let n=e[r];n&&n.#N()}}#N(){this.#r&jn||(this.#r=(this.#r|jn)&Dp,this.#k())}#k(){let e=this.children();e.provisional=0;for(let r of e)r.#N()}#P(){this.#r|=by,this.#O()}#O(){if(this.#r&Ip)return;let e=this.#r;(e&wn)===fi&&(e&=Dp),this.#r=e|Ip,this.#k()}#L(e=""){e==="ENOTDIR"||e==="EPERM"?this.#O():e==="ENOENT"?this.#N():this.children().provisional=0}#U(e=""){e==="ENOTDIR"?this.parent.#O():e==="ENOENT"&&this.#N()}#p(e=""){let r=this.#r;r|=Sy,e==="ENOENT"&&(r|=jn),(e==="EINVAL"||e==="UNKNOWN")&&(r&=Dp),this.#r=r,e==="ENOTDIR"&&this.parent&&this.parent.#O()}#H(e,r){return this.#D(e,r)||this.#V(e,r)}#V(e,r){let n=Mb(e),i=this.newChild(e.name,n,{parent:this}),o=i.#r&wn;return o!==fi&&o!==Ia&&o!==_n&&(i.#r|=Ip),r.unshift(i),r.provisional++,i}#D(e,r){for(let n=r.provisional;n<r.length;n++){let i=r[n];if((this.nocase?vy(e.name):Cp(e.name))===i.#T)return this.#B(e,i,n,r)}}#B(e,r,n,i){let o=r.name;return r.#r=r.#r&Dp|Mb(e),o!==e.name&&(r.name=e.name),n!==i.provisional&&(n===i.length-1?i.pop():i.splice(n,1),i.unshift(r)),i.provisional++,r}async lstat(){if((this.#r&jn)===0)try{return this.#q(await this.#e.promises.lstat(this.fullpath())),this}catch(e){this.#U(e.code)}}lstatSync(){if((this.#r&jn)===0)try{return this.#q(this.#e.lstatSync(this.fullpath())),this}catch(e){this.#U(e.code)}}#q(e){let{atime:r,atimeMs:n,birthtime:i,birthtimeMs:o,blksize:s,blocks:l,ctime:p,ctimeMs:u,dev:m,gid:d,ino:g,mode:x,mtime:b,mtimeMs:v,nlink:I,rdev:F,size:V,uid:Z}=e;this.#w=r,this.#g=n,this.#E=i,this.#f=o,this.#u=s,this.#i=l,this.#_=p,this.#m=u,this.#t=m,this.#S=d,this.#s=g,this.#o=x,this.#h=b,this.#y=v,this.#n=I,this.#l=F,this.#c=V,this.#a=Z;let oe=Mb(e);this.#r=this.#r&Dp|oe|hC,oe!==_n&&oe!==fi&&oe!==Ia&&(this.#r|=Ip)}#$=[];#j=!1;#z(e){this.#j=!1;let r=this.#$.slice();this.#$.length=0,r.forEach(n=>n(null,e))}readdirCB(e,r=!1){if(!this.canReaddir()){r?e(null,[]):queueMicrotask(()=>e(null,[]));return}let n=this.children();if(this.calledReaddir()){let o=n.slice(0,n.provisional);r?e(null,o):queueMicrotask(()=>e(null,o));return}if(this.#$.push(e),this.#j)return;this.#j=!0;let i=this.fullpath();this.#e.readdir(i,{withFileTypes:!0},(o,s)=>{if(o)this.#L(o.code),n.provisional=0;else{for(let l of s)this.#H(l,n);this.#C(n)}this.#z(n.slice(0,n.provisional))})}#W;async readdir(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();if(this.#W)await this.#W;else{let n=()=>{};this.#W=new Promise(i=>n=i);try{for(let i of await this.#e.promises.readdir(r,{withFileTypes:!0}))this.#H(i,e);this.#C(e)}catch(i){this.#L(i.code),e.provisional=0}this.#W=void 0,n()}return e.slice(0,e.provisional)}readdirSync(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();try{for(let n of this.#e.readdirSync(r,{withFileTypes:!0}))this.#H(n,e);this.#C(e)}catch(n){this.#L(n.code),e.provisional=0}return e.slice(0,e.provisional)}canReaddir(){if(this.#r&gC)return!1;let e=wn&this.#r;return e===_n||e===fi||e===Ia}shouldWalk(e,r){return(this.#r&fi)===fi&&!(this.#r&gC)&&!e.has(this)&&(!r||r(this))}async realpath(){if(this.#M)return this.#M;if(!((by|Sy|jn)&this.#r))try{let e=await this.#e.promises.realpath(this.fullpath());return this.#M=this.resolve(e)}catch{this.#P()}}realpathSync(){if(this.#M)return this.#M;if(!((by|Sy|jn)&this.#r))try{let e=this.#e.realpathSync(this.fullpath());return this.#M=this.resolve(e)}catch{this.#P()}}[kC](e){if(e===this)return;e.isCWD=!1,this.isCWD=!0;let r=new Set([]),n=[],i=this;for(;i&&i.parent;)r.add(i),i.#A=n.join(this.sep),i.#R=n.join("/"),i=i.parent,n.push("..");for(i=e;i&&i.parent&&!r.has(i);)i.#A=void 0,i.#R=void 0,i=i.parent}},_y=class t extends rr{sep="\\";splitSep=WY;constructor(e,r=_n,n,i,o,s,l){super(e,r,n,i,o,s,l)}newChild(e,r=_n,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}getRootString(e){return bc.win32.parse(e).root}getRoot(e){if(e=BY(e.toUpperCase()),e===this.root.name)return this.root;for(let[r,n]of Object.entries(this.roots))if(this.sameRoot(e,r))return this.roots[e]=n;return this.roots[e]=new wc(e,this).root}sameRoot(e,r=this.root.name){return e=e.toUpperCase().replace(/\//g,"\\").replace(vC,"$1\\"),e===r}},Ey=class t extends rr{splitSep="/";sep="/";constructor(e,r=_n,n,i,o,s,l){super(e,r,n,i,o,s,l)}getRootString(e){return e.startsWith("/")?"/":""}getRoot(e){return this.root}newChild(e,r=_n,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}},Ry=class{root;rootPath;roots;cwd;#e;#t;#o;nocase;#n;constructor(e=process.cwd(),r,n,{nocase:i,childrenCacheSize:o=16*1024,fs:s=Fp}={}){this.#n=SC(s),(e instanceof URL||e.startsWith("file://"))&&(e=(0,TC.fileURLToPath)(e));let l=r.resolve(e);this.roots=Object.create(null),this.rootPath=this.parseRootPath(l),this.#e=new wy,this.#t=new wy,this.#o=new Db(o);let p=l.substring(this.rootPath.length).split(n);if(p.length===1&&!p[0]&&p.pop(),i===void 0)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=i,this.root=this.newRoot(this.#n),this.roots[this.rootPath]=this.root;let u=this.root,m=p.length-1,d=r.sep,g=this.rootPath,x=!1;for(let b of p){let v=m--;u=u.child(b,{relative:new Array(v).fill("..").join(d),relativePosix:new Array(v).fill("..").join("/"),fullpath:g+=(x?"":d)+b}),x=!0}this.cwd=u}depth(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.depth()}childrenCache(){return this.#o}resolve(...e){let r="";for(let o=e.length-1;o>=0;o--){let s=e[o];if(!(!s||s===".")&&(r=r?`${s}/${r}`:s,this.isAbsolute(s)))break}let n=this.#e.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpath();return this.#e.set(r,i),i}resolvePosix(...e){let r="";for(let o=e.length-1;o>=0;o--){let s=e[o];if(!(!s||s===".")&&(r=r?`${s}/${r}`:s,this.isAbsolute(s)))break}let n=this.#t.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpathPosix();return this.#t.set(r,i),i}relative(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relative()}relativePosix(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relativePosix()}basename(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.name}dirname(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),(e.parent||e).fullpath()}async readdir(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof rr||(r=e,e=this.cwd);let{withFileTypes:n}=r;if(e.canReaddir()){let i=await e.readdir();return n?i:i.map(o=>o.name)}else return[]}readdirSync(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof rr||(r=e,e=this.cwd);let{withFileTypes:n=!0}=r;return e.canReaddir()?n?e.readdirSync():e.readdirSync().map(i=>i.name):[]}async lstat(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstat()}lstatSync(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstatSync()}async readlink(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof rr||(r=e.withFileTypes,e=this.cwd);let n=await e.readlink();return r?n:n?.fullpath()}readlinkSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof rr||(r=e.withFileTypes,e=this.cwd);let n=e.readlinkSync();return r?n:n?.fullpath()}async realpath(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof rr||(r=e.withFileTypes,e=this.cwd);let n=await e.realpath();return r?n:n?.fullpath()}realpathSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof rr||(r=e.withFileTypes,e=this.cwd);let n=e.realpathSync();return r?n:n?.fullpath()}async walk(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof rr||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=[];(!o||o(e))&&l.push(n?e:e.fullpath());let p=new Set,u=(d,g)=>{p.add(d),d.readdirCB((x,b)=>{if(x)return g(x);let v=b.length;if(!v)return g();let I=()=>{--v===0&&g()};for(let F of b)(!o||o(F))&&l.push(n?F:F.fullpath()),i&&F.isSymbolicLink()?F.realpath().then(V=>V?.isUnknown()?V.lstat():V).then(V=>V?.shouldWalk(p,s)?u(V,I):I()):F.shouldWalk(p,s)?u(F,I):I()},!0)},m=e;return new Promise((d,g)=>{u(m,x=>{if(x)return g(x);d(l)})})}walkSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof rr||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=[];(!o||o(e))&&l.push(n?e:e.fullpath());let p=new Set([e]);for(let u of p){let m=u.readdirSync();for(let d of m){(!o||o(d))&&l.push(n?d:d.fullpath());let g=d;if(d.isSymbolicLink()){if(!(i&&(g=d.realpathSync())))continue;g.isUnknown()&&g.lstatSync()}g.shouldWalk(p,s)&&p.add(g)}}return l}[Symbol.asyncIterator](){return this.iterate()}iterate(e=this.cwd,r={}){return typeof e=="string"?e=this.cwd.resolve(e):e instanceof rr||(r=e,e=this.cwd),this.stream(e,r)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof rr||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r;(!o||o(e))&&(yield n?e:e.fullpath());let l=new Set([e]);for(let p of l){let u=p.readdirSync();for(let m of u){(!o||o(m))&&(yield n?m:m.fullpath());let d=m;if(m.isSymbolicLink()){if(!(i&&(d=m.realpathSync())))continue;d.isUnknown()&&d.lstatSync()}d.shouldWalk(l,s)&&l.add(d)}}}stream(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof rr||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=new Co({objectMode:!0});(!o||o(e))&&l.write(n?e:e.fullpath());let p=new Set,u=[e],m=0,d=()=>{let g=!1;for(;!g;){let x=u.shift();if(!x){m===0&&l.end();return}m++,p.add(x);let b=(I,F,V=!1)=>{if(I)return l.emit("error",I);if(i&&!V){let Z=[];for(let oe of F)oe.isSymbolicLink()&&Z.push(oe.realpath().then(ae=>ae?.isUnknown()?ae.lstat():ae));if(Z.length){Promise.all(Z).then(()=>b(null,F,!0));return}}for(let Z of F)Z&&(!o||o(Z))&&(l.write(n?Z:Z.fullpath())||(g=!0));m--;for(let Z of F){let oe=Z.realpathCached()||Z;oe.shouldWalk(p,s)&&u.push(oe)}g&&!l.flowing?l.once("drain",d):v||d()},v=!0;x.readdirCB(b,!0),v=!1}};return d(),l}streamSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof rr||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=new Co({objectMode:!0}),p=new Set;(!o||o(e))&&l.write(n?e:e.fullpath());let u=[e],m=0,d=()=>{let g=!1;for(;!g;){let x=u.shift();if(!x){m===0&&l.end();return}m++,p.add(x);let b=x.readdirSync();for(let v of b)(!o||o(v))&&(l.write(n?v:v.fullpath())||(g=!0));m--;for(let v of b){let I=v;if(v.isSymbolicLink()){if(!(i&&(I=v.realpathSync())))continue;I.isUnknown()&&I.lstatSync()}I.shouldWalk(p,s)&&u.push(I)}}g&&!l.flowing&&l.once("drain",d)};return d(),l}chdir(e=this.cwd){let r=this.cwd;this.cwd=typeof e=="string"?this.cwd.resolve(e):e,this.cwd[kC](r)}},wc=class extends Ry{sep="\\";constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,bc.win32,"\\",{...r,nocase:n}),this.nocase=n;for(let i=this.cwd;i;i=i.parent)i.nocase=this.nocase}parseRootPath(e){return bc.win32.parse(e).root.toUpperCase()}newRoot(e){return new _y(this.rootPath,fi,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")||e.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(e)}},_c=class extends Ry{sep="/";constructor(e=process.cwd(),r={}){let{nocase:n=!1}=r;super(e,bc.posix,"/",{...r,nocase:n}),this.nocase=n}parseRootPath(e){return"/"}newRoot(e){return new Ey(this.rootPath,fi,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")}},Np=class extends _c{constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,{...r,nocase:n})}},uHe=process.platform==="win32"?_y:Ey,PC=process.platform==="win32"?wc:process.platform==="darwin"?Np:_c;var jY=t=>t.length>=1,qY=t=>t.length>=1,Ec=class t{#e;#t;#o;length;#n;#a;#S;#l;#u;#s;#c=!0;constructor(e,r,n,i){if(!jY(e))throw new TypeError("empty pattern list");if(!qY(r))throw new TypeError("empty glob list");if(r.length!==e.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=e.length,n<0||n>=this.length)throw new TypeError("index out of range");if(this.#e=e,this.#t=r,this.#o=n,this.#n=i,this.#o===0){if(this.isUNC()){let[o,s,l,p,...u]=this.#e,[m,d,g,x,...b]=this.#t;u[0]===""&&(u.shift(),b.shift());let v=[o,s,l,p,""].join("/"),I=[m,d,g,x,""].join("/");this.#e=[v,...u],this.#t=[I,...b],this.length=this.#e.length}else if(this.isDrive()||this.isAbsolute()){let[o,...s]=this.#e,[l,...p]=this.#t;s[0]===""&&(s.shift(),p.shift());let u=o+"/",m=l+"/";this.#e=[u,...s],this.#t=[m,...p],this.length=this.#e.length}}}pattern(){return this.#e[this.#o]}isString(){return typeof this.#e[this.#o]=="string"}isGlobstar(){return this.#e[this.#o]===jt}isRegExp(){return this.#e[this.#o]instanceof RegExp}globString(){return this.#S=this.#S||(this.#o===0?this.isAbsolute()?this.#t[0]+this.#t.slice(1).join("/"):this.#t.join("/"):this.#t.slice(this.#o).join("/"))}hasMore(){return this.length>this.#o+1}rest(){return this.#a!==void 0?this.#a:this.hasMore()?(this.#a=new t(this.#e,this.#t,this.#o+1,this.#n),this.#a.#s=this.#s,this.#a.#u=this.#u,this.#a.#l=this.#l,this.#a):this.#a=null}isUNC(){let e=this.#e;return this.#u!==void 0?this.#u:this.#u=this.#n==="win32"&&this.#o===0&&e[0]===""&&e[1]===""&&typeof e[2]=="string"&&!!e[2]&&typeof e[3]=="string"&&!!e[3]}isDrive(){let e=this.#e;return this.#l!==void 0?this.#l:this.#l=this.#n==="win32"&&this.#o===0&&this.length>1&&typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0])}isAbsolute(){let e=this.#e;return this.#s!==void 0?this.#s:this.#s=e[0]===""&&e.length>1||this.isDrive()||this.isUNC()}root(){let e=this.#e[0];return typeof e=="string"&&this.isAbsolute()&&this.#o===0?e:""}checkFollowGlobstar(){return!(this.#o===0||!this.isGlobstar()||!this.#c)}markFollowGlobstar(){return this.#o===0||!this.isGlobstar()||!this.#c?!1:(this.#c=!1,!0)}};var zY=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",Rc=class{relative;relativeChildren;absolute;absoluteChildren;platform;mmopts;constructor(e,{nobrace:r,nocase:n,noext:i,noglobstar:o,platform:s=zY}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[],this.platform=s,this.mmopts={dot:!0,nobrace:r,nocase:n,noext:i,noglobstar:o,optimizationLevel:2,platform:s,nocomment:!0,nonegate:!0};for(let l of e)this.add(l)}add(e){let r=new Jr(e,this.mmopts);for(let n=0;n<r.set.length;n++){let i=r.set[n],o=r.globParts[n];if(!i||!o)throw new Error("invalid pattern object");for(;i[0]==="."&&o[0]===".";)i.shift(),o.shift();let s=new Ec(i,o,0,this.platform),l=new Jr(s.globString(),this.mmopts),p=o[o.length-1]==="**",u=s.isAbsolute();u?this.absolute.push(l):this.relative.push(l),p&&(u?this.absoluteChildren.push(l):this.relativeChildren.push(l))}}ignored(e){let r=e.fullpath(),n=`${r}/`,i=e.relative()||".",o=`${i}/`;for(let s of this.relative)if(s.match(i)||s.match(o))return!0;for(let s of this.absolute)if(s.match(r)||s.match(n))return!0;return!1}childrenIgnored(e){let r=e.fullpath()+"/",n=(e.relative()||".")+"/";for(let i of this.relativeChildren)if(i.match(n))return!0;for(let i of this.absoluteChildren)if(i.match(r))return!0;return!1}};var Fb=class t{store;constructor(e=new Map){this.store=e}copy(){return new t(new Map(this.store))}hasWalked(e,r){return this.store.get(e.fullpath())?.has(r.globString())}storeWalked(e,r){let n=e.fullpath(),i=this.store.get(n);i?i.add(r.globString()):this.store.set(n,new Set([r.globString()]))}},Ib=class{store=new Map;add(e,r,n){let i=(r?2:0)|(n?1:0),o=this.store.get(e);this.store.set(e,o===void 0?i:i&o)}entries(){return[...this.store.entries()].map(([e,r])=>[e,!!(r&2),!!(r&1)])}},Cb=class{store=new Map;add(e,r){if(!e.canReaddir())return;let n=this.store.get(e);n?n.find(i=>i.globString()===r.globString())||n.push(r):this.store.set(e,[r])}get(e){let r=this.store.get(e);if(!r)throw new Error("attempting to walk unknown path");return r}entries(){return this.keys().map(e=>[e,this.store.get(e)])}keys(){return[...this.store.keys()].filter(e=>e.canReaddir())}},Op=class t{hasWalkedCache;matches=new Ib;subwalks=new Cb;patterns;follow;dot;opts;constructor(e,r){this.opts=e,this.follow=!!e.follow,this.dot=!!e.dot,this.hasWalkedCache=r?r.copy():new Fb}processPatterns(e,r){this.patterns=r;let n=r.map(i=>[e,i]);for(let[i,o]of n){this.hasWalkedCache.storeWalked(i,o);let s=o.root(),l=o.isAbsolute()&&this.opts.absolute!==!1;if(s){i=i.resolve(s==="/"&&this.opts.root!==void 0?this.opts.root:s);let d=o.rest();if(d)o=d;else{this.matches.add(i,!0,!1);continue}}if(i.isENOENT())continue;let p,u,m=!1;for(;typeof(p=o.pattern())=="string"&&(u=o.rest());)i=i.resolve(p),o=u,m=!0;if(p=o.pattern(),u=o.rest(),m){if(this.hasWalkedCache.hasWalked(i,o))continue;this.hasWalkedCache.storeWalked(i,o)}if(typeof p=="string"){let d=p===".."||p===""||p===".";this.matches.add(i.resolve(p),l,d);continue}else if(p===jt){(!i.isSymbolicLink()||this.follow||o.checkFollowGlobstar())&&this.subwalks.add(i,o);let d=u?.pattern(),g=u?.rest();if(!u||(d===""||d===".")&&!g)this.matches.add(i,l,d===""||d===".");else if(d===".."){let x=i.parent||i;g?this.hasWalkedCache.hasWalked(x,g)||this.subwalks.add(x,g):this.matches.add(x,l,!0)}}else p instanceof RegExp&&this.subwalks.add(i,o)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new t(this.opts,this.hasWalkedCache)}filterEntries(e,r){let n=this.subwalks.get(e),i=this.child();for(let o of r)for(let s of n){let l=s.isAbsolute(),p=s.pattern(),u=s.rest();p===jt?i.testGlobstar(o,s,u,l):p instanceof RegExp?i.testRegExp(o,p,u,l):i.testString(o,p,u,l)}return i}testGlobstar(e,r,n,i){if((this.dot||!e.name.startsWith("."))&&(r.hasMore()||this.matches.add(e,i,!1),e.canReaddir()&&(this.follow||!e.isSymbolicLink()?this.subwalks.add(e,r):e.isSymbolicLink()&&(n&&r.checkFollowGlobstar()?this.subwalks.add(e,n):r.markFollowGlobstar()&&this.subwalks.add(e,r)))),n){let o=n.pattern();if(typeof o=="string"&&o!==".."&&o!==""&&o!==".")this.testString(e,o,n.rest(),i);else if(o===".."){let s=e.parent||e;this.subwalks.add(s,n)}else o instanceof RegExp&&this.testRegExp(e,o,n.rest(),i)}}testRegExp(e,r,n,i){r.test(e.name)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}testString(e,r,n,i){e.isNamed(r)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}};var GY=(t,e)=>typeof t=="string"?new Rc([t],e):Array.isArray(t)?new Rc(t,e):t,ky=class{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#e=[];#t;#o;signal;maxDepth;includeChildMatches;constructor(e,r,n){if(this.patterns=e,this.path=r,this.opts=n,this.#o=!n.posix&&n.platform==="win32"?"\\":"/",this.includeChildMatches=n.includeChildMatches!==!1,(n.ignore||!this.includeChildMatches)&&(this.#t=GY(n.ignore??[],n),!this.includeChildMatches&&typeof this.#t.add!="function")){let i="cannot ignore child matches, ignore lacks add() method.";throw new Error(i)}this.maxDepth=n.maxDepth||1/0,n.signal&&(this.signal=n.signal,this.signal.addEventListener("abort",()=>{this.#e.length=0}))}#n(e){return this.seen.has(e)||!!this.#t?.ignored?.(e)}#a(e){return!!this.#t?.childrenIgnored?.(e)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;this.paused=!1;let e;for(;!this.paused&&(e=this.#e.shift());)e()}onResume(e){this.signal?.aborted||(this.paused?this.#e.push(e):e())}async matchCheck(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||await e.realpath(),!n)return;e=n}let o=e.isUnknown()||this.opts.stat?await e.lstat():e;if(this.opts.follow&&this.opts.nodir&&o?.isSymbolicLink()){let s=await o.realpath();s&&(s.isUnknown()||this.opts.stat)&&await s.lstat()}return this.matchCheckTest(o,r)}matchCheckTest(e,r){return e&&(this.maxDepth===1/0||e.depth()<=this.maxDepth)&&(!r||e.canReaddir())&&(!this.opts.nodir||!e.isDirectory())&&(!this.opts.nodir||!this.opts.follow||!e.isSymbolicLink()||!e.realpathCached()?.isDirectory())&&!this.#n(e)?e:void 0}matchCheckSync(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||e.realpathSync(),!n)return;e=n}let o=e.isUnknown()||this.opts.stat?e.lstatSync():e;if(this.opts.follow&&this.opts.nodir&&o?.isSymbolicLink()){let s=o.realpathSync();s&&(s?.isUnknown()||this.opts.stat)&&s.lstatSync()}return this.matchCheckTest(o,r)}matchFinish(e,r){if(this.#n(e))return;if(!this.includeChildMatches&&this.#t?.add){let o=`${e.relativePosix()}/**`;this.#t.add(o)}let n=this.opts.absolute===void 0?r:this.opts.absolute;this.seen.add(e);let i=this.opts.mark&&e.isDirectory()?this.#o:"";if(this.opts.withFileTypes)this.matchEmit(e);else if(n){let o=this.opts.posix?e.fullpathPosix():e.fullpath();this.matchEmit(o+i)}else{let o=this.opts.posix?e.relativePosix():e.relative(),s=this.opts.dotRelative&&!o.startsWith(".."+this.#o)?"."+this.#o:"";this.matchEmit(o?s+o+i:"."+i)}}async match(e,r,n){let i=await this.matchCheck(e,n);i&&this.matchFinish(i,r)}matchSync(e,r,n){let i=this.matchCheckSync(e,n);i&&this.matchFinish(i,r)}walkCB(e,r,n){this.signal?.aborted&&n(),this.walkCB2(e,r,new Op(this.opts),n)}walkCB2(e,r,n,i){if(this.#a(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2(e,r,n,i));return}n.processPatterns(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,p,u]of n.matches.entries())this.#n(l)||(o++,this.match(l,p,u).then(()=>s()));for(let l of n.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;o++;let p=l.readdirCached();l.calledReaddir()?this.walkCB3(l,p,n,s):l.readdirCB((u,m)=>this.walkCB3(l,m,n,s),!0)}s()}walkCB3(e,r,n,i){n=n.filterEntries(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,p,u]of n.matches.entries())this.#n(l)||(o++,this.match(l,p,u).then(()=>s()));for(let[l,p]of n.subwalks.entries())o++,this.walkCB2(l,p,n.child(),s);s()}walkCBSync(e,r,n){this.signal?.aborted&&n(),this.walkCB2Sync(e,r,new Op(this.opts),n)}walkCB2Sync(e,r,n,i){if(this.#a(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2Sync(e,r,n,i));return}n.processPatterns(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,p,u]of n.matches.entries())this.#n(l)||this.matchSync(l,p,u);for(let l of n.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;o++;let p=l.readdirSync();this.walkCB3Sync(l,p,n,s)}s()}walkCB3Sync(e,r,n,i){n=n.filterEntries(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,p,u]of n.matches.entries())this.#n(l)||this.matchSync(l,p,u);for(let[l,p]of n.subwalks.entries())o++,this.walkCB2Sync(l,p,n.child(),s);s()}},Lp=class extends ky{matches=new Set;constructor(e,r,n){super(e,r,n)}matchEmit(e){this.matches.add(e)}async walk(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise((e,r)=>{this.walkCB(this.path,this.patterns,()=>{this.signal?.aborted?r(this.signal.reason):e(this.matches)})}),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>{if(this.signal?.aborted)throw this.signal.reason}),this.matches}},Up=class extends ky{results;constructor(e,r,n){super(e,r,n),this.results=new Co({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(e){this.results.write(e),this.results.flowing||this.pause()}stream(){let e=this.path;return e.isUnknown()?e.lstat().then(()=>{this.walkCB(e,this.patterns,()=>this.results.end())}):this.walkCB(e,this.patterns,()=>this.results.end()),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}};var KY=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",qn=class{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;includeChildMatches;opts;patterns;constructor(e,r){if(!r)throw new TypeError("glob options required");if(this.withFileTypes=!!r.withFileTypes,this.signal=r.signal,this.follow=!!r.follow,this.dot=!!r.dot,this.dotRelative=!!r.dotRelative,this.nodir=!!r.nodir,this.mark=!!r.mark,r.cwd?(r.cwd instanceof URL||r.cwd.startsWith("file://"))&&(r.cwd=(0,AC.fileURLToPath)(r.cwd)):this.cwd="",this.cwd=r.cwd||"",this.root=r.root,this.magicalBraces=!!r.magicalBraces,this.nobrace=!!r.nobrace,this.noext=!!r.noext,this.realpath=!!r.realpath,this.absolute=r.absolute,this.includeChildMatches=r.includeChildMatches!==!1,this.noglobstar=!!r.noglobstar,this.matchBase=!!r.matchBase,this.maxDepth=typeof r.maxDepth=="number"?r.maxDepth:1/0,this.stat=!!r.stat,this.ignore=r.ignore,this.withFileTypes&&this.absolute!==void 0)throw new Error("cannot set absolute and withFileTypes:true");if(typeof e=="string"&&(e=[e]),this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(e=e.map(p=>p.replace(/\\/g,"/"))),this.matchBase){if(r.noglobstar)throw new TypeError("base matching requires globstar");e=e.map(p=>p.includes("/")?p:`./**/${p}`)}if(this.pattern=e,this.platform=r.platform||KY,this.opts={...r,platform:this.platform},r.scurry){if(this.scurry=r.scurry,r.nocase!==void 0&&r.nocase!==r.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{let p=r.platform==="win32"?wc:r.platform==="darwin"?Np:r.platform?_c:PC;this.scurry=new p(this.cwd,{nocase:r.nocase,fs:r.fs})}this.nocase=this.scurry.nocase;let n=this.platform==="darwin"||this.platform==="win32",i={...r,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:n,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},o=this.pattern.map(p=>new Jr(p,i)),[s,l]=o.reduce((p,u)=>(p[0].push(...u.set),p[1].push(...u.globParts),p),[[],[]]);this.patterns=s.map((p,u)=>{let m=l[u];if(!m)throw new Error("invalid pattern object");return new Ec(p,m,0,this.platform)})}async walk(){return[...await new Lp(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walk()]}walkSync(){return[...new Lp(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walkSync()]}stream(){return new Up(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).stream()}streamSync(){return new Up(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}};var Nb=(t,e={})=>{Array.isArray(t)||(t=[t]);for(let r of t)if(new Jr(r,e).hasMagic())return!0;return!1};function Py(t,e={}){return new qn(t,e).streamSync()}function DC(t,e={}){return new qn(t,e).stream()}function FC(t,e={}){return new qn(t,e).walkSync()}async function MC(t,e={}){return new qn(t,e).walk()}function Ay(t,e={}){return new qn(t,e).iterateSync()}function IC(t,e={}){return new qn(t,e).iterate()}var QY=Py,ZY=Object.assign(DC,{sync:Py}),YY=Ay,XY=Object.assign(IC,{sync:Ay}),JY=Object.assign(FC,{stream:Py,iterate:Ay}),Ob=Object.assign(MC,{glob:MC,globSync:FC,sync:JY,globStream:DC,stream:ZY,globStreamSync:Py,streamSync:QY,globIterate:IC,iterate:XY,globIterateSync:Ay,iterateSync:YY,Glob:qn,hasMagic:Nb,escape:yc,unescape:Wn});Ob.glob=Ob;function CC(){let t=process.env.CURSORLESS_MODE;switch(t){case void 0:case"production":return"production";case"development":return"development";case"test":return"test";default:throw new Error(`Unexpected value for environment variable CURSORLESS_MODE: ${t}`)}}var jC=Object.defineProperty,rX=Object.getOwnPropertyNames,C=(t,e)=>jC(t,"name",{value:e,configurable:!0}),nX=(t,e)=>function(){return e||(0,t[rX(t)[0]])((e={exports:{}}).exports,e),e.exports},Jb=(t,e)=>{for(var r in e)jC(t,r,{get:e[r],enumerable:!0})},iX=nX({"(disabled):util"(){}}),My={};Jb(My,{addChainableMethod:()=>uw,addLengthGuard:()=>$p,addMethod:()=>cw,addProperty:()=>sw,checkError:()=>tn,compareByInspect:()=>Cy,eql:()=>y1,expectTypes:()=>XC,flag:()=>Re,getActual:()=>Hy,getMessage:()=>rw,getName:()=>By,getOperator:()=>hw,getOwnEnumerableProperties:()=>dw,getOwnEnumerablePropertySymbols:()=>mw,getPathInfo:()=>aw,hasProperty:()=>Vy,inspect:()=>He,isNaN:()=>Ny,isProxyEnabled:()=>Wp,isRegExp:()=>Oy,objDisplay:()=>Ca,overwriteChainableMethod:()=>fw,overwriteMethod:()=>pw,overwriteProperty:()=>lw,proxify:()=>Mc,test:()=>ew,transferFlags:()=>zn,type:()=>Je});var tn={};Jb(tn,{compatibleConstructor:()=>GC,compatibleInstance:()=>zC,compatibleMessage:()=>KC,getConstructorName:()=>QC,getMessage:()=>ZC});function Uy(t){return t instanceof Error||Object.prototype.toString.call(t)==="[object Error]"}C(Uy,"isErrorInstance");function qC(t){return Object.prototype.toString.call(t)==="[object RegExp]"}C(qC,"isRegExp");function zC(t,e){return Uy(e)&&t===e}C(zC,"compatibleInstance");function GC(t,e){return Uy(e)?t.constructor===e.constructor||t instanceof e.constructor:(typeof e=="object"||typeof e=="function")&&e.prototype?t.constructor===e||t instanceof e:!1}C(GC,"compatibleConstructor");function KC(t,e){let r=typeof t=="string"?t:t.message;return qC(e)?e.test(r):typeof e=="string"?r.indexOf(e)!==-1:!1}C(KC,"compatibleMessage");function QC(t){let e=t;return Uy(t)?e=t.constructor.name:typeof t=="function"&&(e=t.name,e===""&&(e=new t().name||e)),e}C(QC,"getConstructorName");function ZC(t){let e="";return t&&t.message?e=t.message:typeof t=="string"&&(e=t),e}C(ZC,"getMessage");function Re(t,e,r){var n=t.__flags||(t.__flags=Object.create(null));if(arguments.length===3)n[e]=r;else return n[e]}C(Re,"flag");function ew(t,e){var r=Re(t,"negate"),n=e[0];return r?!n:n}C(ew,"test");function Je(t){if(typeof t>"u")return"undefined";if(t===null)return"null";let e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}C(Je,"type");var oX="captureStackTrace"in Error,Ke=class YC extends Error{static{C(this,"AssertionError")}message;get name(){return"AssertionError"}get ok(){return!1}constructor(e="Unspecified AssertionError",r,n){super(e),this.message=e,oX&&Error.captureStackTrace(this,n||YC);for(let i in r)i in this||(this[i]=r[i])}toJSON(e){return{...this,name:this.name,message:this.message,ok:!1,stack:e!==!1?this.stack:void 0}}};function XC(t,e){var r=Re(t,"message"),n=Re(t,"ssfi");r=r?r+": ":"",t=Re(t,"object"),e=e.map(function(s){return s.toLowerCase()}),e.sort();var i=e.map(function(s,l){var p=~["a","e","i","o","u"].indexOf(s.charAt(0))?"an":"a",u=e.length>1&&l===e.length-1?"or ":"";return u+p+" "+s}).join(", "),o=Je(t).toLowerCase();if(!e.some(function(s){return o===s}))throw new Ke(r+"object tested must be "+i+", but "+o+" given",void 0,n)}C(XC,"expectTypes");function Hy(t,e){return e.length>4?e[4]:t._obj}C(Hy,"getActual");var NC={bold:["1","22"],dim:["2","22"],italic:["3","23"],underline:["4","24"],inverse:["7","27"],hidden:["8","28"],strike:["9","29"],black:["30","39"],red:["31","39"],green:["32","39"],yellow:["33","39"],blue:["34","39"],magenta:["35","39"],cyan:["36","39"],white:["37","39"],brightblack:["30;1","39"],brightred:["31;1","39"],brightgreen:["32;1","39"],brightyellow:["33;1","39"],brightblue:["34;1","39"],brightmagenta:["35;1","39"],brightcyan:["36;1","39"],brightwhite:["37;1","39"],grey:["90","39"]},aX={special:"cyan",number:"yellow",bigint:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",symbol:"green",date:"magenta",regexp:"red"},Pc="\u2026";function JC(t,e){let r=NC[aX[e]]||NC[e]||"";return r?`\x1B[${r[0]}m${String(t)}\x1B[${r[1]}m`:String(t)}C(JC,"colorise");function e1({showHidden:t=!1,depth:e=2,colors:r=!1,customInspect:n=!0,showProxy:i=!1,maxArrayLength:o=1/0,breakLength:s=1/0,seen:l=[],truncate:p=1/0,stylize:u=String}={},m){let d={showHidden:!!t,depth:Number(e),colors:!!r,customInspect:!!n,showProxy:!!i,maxArrayLength:Number(o),breakLength:Number(s),truncate:Number(p),seen:l,inspect:m,stylize:u};return d.colors&&(d.stylize=JC),d}C(e1,"normaliseOptions");function $i(t,e,r=Pc){t=String(t);let n=r.length,i=t.length;return n>e&&i>n?r:i>e&&i>n?`${t.slice(0,e-n)}${r}`:t}C($i,"truncate");function En(t,e,r,n=", "){r=r||e.inspect;let i=t.length;if(i===0)return"";let o=e.truncate,s="",l="",p="";for(let u=0;u<i;u+=1){let m=u+1===t.length,d=u+2===t.length;p=`${Pc}(${t.length-u})`;let g=t[u];e.truncate=o-s.length-(m?0:n.length);let x=l||r(g,e)+(m?"":n),b=s.length+x.length,v=b+p.length;if(m&&b>o&&s.length+p.length<=o||!m&&!d&&v>o||(l=m?"":r(t[u+1],e)+(d?"":n),!m&&d&&v>o&&b+l.length>o))break;if(s+=x,!m&&!d&&b+l.length>=o){p=`${Pc}(${t.length-u-1})`;break}p=""}return`${s}${p}`}C(En,"inspectList");function t1(t){return t.match(/^[a-zA-Z_][a-zA-Z_0-9]*$/)?t:JSON.stringify(t).replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'")}C(t1,"quoteComplexKey");function Ac([t,e],r){return r.truncate-=2,typeof t=="string"?t=t1(t):typeof t!="number"&&(t=`[${r.inspect(t,r)}]`),r.truncate-=t.length,e=r.inspect(e,r),`${t}: ${e}`}C(Ac,"inspectProperty");function r1(t,e){let r=Object.keys(t).slice(t.length);if(!t.length&&!r.length)return"[]";e.truncate-=4;let n=En(t,e);e.truncate-=n.length;let i="";return r.length&&(i=En(r.map(o=>[o,t[o]]),e,Ac)),`[ ${n}${i?`, ${i}`:""} ]`}C(r1,"inspectArray");var sX=C(t=>typeof Buffer=="function"&&t instanceof Buffer?"Buffer":t[Symbol.toStringTag]?t[Symbol.toStringTag]:t.constructor.name,"getArrayName");function di(t,e){let r=sX(t);e.truncate-=r.length+4;let n=Object.keys(t).slice(t.length);if(!t.length&&!n.length)return`${r}[]`;let i="";for(let s=0;s<t.length;s++){let l=`${e.stylize($i(t[s],e.truncate),"number")}${s===t.length-1?"":", "}`;if(e.truncate-=l.length,t[s]!==t.length&&e.truncate<=3){i+=`${Pc}(${t.length-t[s]+1})`;break}i+=l}let o="";return n.length&&(o=En(n.map(s=>[s,t[s]]),e,Ac)),`${r}[ ${i}${o?`, ${o}`:""} ]`}C(di,"inspectTypedArray");function n1(t,e){let r=t.toJSON();if(r===null)return"Invalid Date";let n=r.split("T"),i=n[0];return e.stylize(`${i}T${$i(n[1],e.truncate-i.length-1)}`,"date")}C(n1,"inspectDate");function Hb(t,e){let r=t[Symbol.toStringTag]||"Function",n=t.name;return n?e.stylize(`[${r} ${$i(n,e.truncate-11)}]`,"special"):e.stylize(`[${r}]`,"special")}C(Hb,"inspectFunction");function i1([t,e],r){return r.truncate-=4,t=r.inspect(t,r),r.truncate-=t.length,e=r.inspect(e,r),`${t} => ${e}`}C(i1,"inspectMapEntry");function o1(t){let e=[];return t.forEach((r,n)=>{e.push([n,r])}),e}C(o1,"mapToEntries");function a1(t,e){return t.size-1<=0?"Map{}":(e.truncate-=7,`Map{ ${En(o1(t),e,i1)} }`)}C(a1,"inspectMap");var cX=Number.isNaN||(t=>t!==t);function Vb(t,e){return cX(t)?e.stylize("NaN","number"):t===1/0?e.stylize("Infinity","number"):t===-1/0?e.stylize("-Infinity","number"):t===0?e.stylize(1/t===1/0?"+0":"-0","number"):e.stylize($i(String(t),e.truncate),"number")}C(Vb,"inspectNumber");function Bb(t,e){let r=$i(t.toString(),e.truncate-1);return r!==Pc&&(r+="n"),e.stylize(r,"bigint")}C(Bb,"inspectBigInt");function s1(t,e){let r=t.toString().split("/")[2],n=e.truncate-(2+r.length),i=t.source;return e.stylize(`/${$i(i,n)}/${r}`,"regexp")}C(s1,"inspectRegExp");function c1(t){let e=[];return t.forEach(r=>{e.push(r)}),e}C(c1,"arrayFromSet");function l1(t,e){return t.size===0?"Set{}":(e.truncate-=7,`Set{ ${En(c1(t),e)} }`)}C(l1,"inspectSet");var OC=new RegExp("['\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]","g"),lX={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"},pX=16,uX=4;function p1(t){return lX[t]||`\\u${`0000${t.charCodeAt(0).toString(pX)}`.slice(-uX)}`}C(p1,"escape");function Wb(t,e){return OC.test(t)&&(t=t.replace(OC,p1)),e.stylize(`'${$i(t,e.truncate-2)}'`,"string")}C(Wb,"inspectString");function $b(t){return"description"in Symbol.prototype?t.description?`Symbol(${t.description})`:"Symbol()":t.toString()}C($b,"inspectSymbol");var u1=C(()=>"Promise{\u2026}","getPromiseValue");try{let{getPromiseDetails:t,kPending:e,kRejected:r}=process.binding("util");Array.isArray(t(Promise.resolve()))&&(u1=C((n,i)=>{let[o,s]=t(n);return o===e?"Promise{<pending>}":`Promise${o===r?"!":""}{${i.inspect(s,i)}}`},"getPromiseValue"))}catch{}var fX=u1;function Vp(t,e){let r=Object.getOwnPropertyNames(t),n=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[];if(r.length===0&&n.length===0)return"{}";if(e.truncate-=4,e.seen=e.seen||[],e.seen.indexOf(t)>=0)return"[Circular]";e.seen.push(t);let i=En(r.map(l=>[l,t[l]]),e,Ac),o=En(n.map(l=>[l,t[l]]),e,Ac);e.seen.pop();let s="";return i&&o&&(s=", "),`{ ${i}${s}${o} }`}C(Vp,"inspectObject");var Lb=typeof Symbol<"u"&&Symbol.toStringTag?Symbol.toStringTag:!1;function f1(t,e){let r="";return Lb&&Lb in t&&(r=t[Lb]),r=r||t.constructor.name,(!r||r==="_class")&&(r="<Anonymous Class>"),e.truncate-=r.length,`${r}${Vp(t,e)}`}C(f1,"inspectClass");function m1(t,e){return t.length===0?"Arguments[]":(e.truncate-=13,`Arguments[ ${En(t,e)} ]`)}C(m1,"inspectArguments");var mX=["stack","line","column","name","message","fileName","lineNumber","columnNumber","number","description"];function d1(t,e){let r=Object.getOwnPropertyNames(t).filter(s=>mX.indexOf(s)===-1),n=t.name;e.truncate-=n.length;let i="";typeof t.message=="string"?i=$i(t.message,e.truncate):r.unshift("message"),i=i?`: ${i}`:"",e.truncate-=i.length+5;let o=En(r.map(s=>[s,t[s]]),e,Ac);return`${n}${i}${o?` { ${o} }`:""}`}C(d1,"inspectObject");function h1([t,e],r){return r.truncate-=3,e?`${r.stylize(String(t),"yellow")}=${r.stylize(`"${e}"`,"string")}`:`${r.stylize(String(t),"yellow")}`}C(h1,"inspectAttribute");function Dy(t,e){return En(t,e,tw,`
`)}C(Dy,"inspectHTMLCollection");function tw(t,e){let r=t.getAttributeNames(),n=t.tagName.toLowerCase(),i=e.stylize(`<${n}`,"special"),o=e.stylize(">","special"),s=e.stylize(`</${n}>`,"special");e.truncate-=n.length*2+5;let l="";r.length>0&&(l+=" ",l+=En(r.map(m=>[m,t.getAttribute(m)]),e,h1," ")),e.truncate-=l.length;let p=e.truncate,u=Dy(t.children,e);return u&&u.length>p&&(u=`${Pc}(${t.children.length})`),`${i}${l}${o}${u}${s}`}C(tw,"inspectHTML");var dX=typeof Symbol=="function"&&typeof Symbol.for=="function",Ub=dX?Symbol.for("chai/inspect"):"@@chai/inspect",kc=!1;try{let t=iX();kc=t.inspect?t.inspect.custom:!1}catch{kc=!1}var LC=new WeakMap,UC={},HC={undefined:(t,e)=>e.stylize("undefined","undefined"),null:(t,e)=>e.stylize("null","null"),boolean:(t,e)=>e.stylize(String(t),"boolean"),Boolean:(t,e)=>e.stylize(String(t),"boolean"),number:Vb,Number:Vb,bigint:Bb,BigInt:Bb,string:Wb,String:Wb,function:Hb,Function:Hb,symbol:$b,Symbol:$b,Array:r1,Date:n1,Map:a1,Set:l1,RegExp:s1,Promise:fX,WeakSet:(t,e)=>e.stylize("WeakSet{\u2026}","special"),WeakMap:(t,e)=>e.stylize("WeakMap{\u2026}","special"),Arguments:m1,Int8Array:di,Uint8Array:di,Uint8ClampedArray:di,Int16Array:di,Uint16Array:di,Int32Array:di,Uint32Array:di,Float32Array:di,Float64Array:di,Generator:()=>"",DataView:()=>"",ArrayBuffer:()=>"",Error:d1,HTMLCollection:Dy,NodeList:Dy},hX=C((t,e,r)=>Ub in t&&typeof t[Ub]=="function"?t[Ub](e):kc&&kc in t&&typeof t[kc]=="function"?t[kc](e.depth,e):"inspect"in t&&typeof t.inspect=="function"?t.inspect(e.depth,e):"constructor"in t&&LC.has(t.constructor)?LC.get(t.constructor)(t,e):UC[r]?UC[r](t,e):"","inspectCustom"),gX=Object.prototype.toString;function Fy(t,e={}){let r=e1(e,Fy),{customInspect:n}=r,i=t===null?"null":typeof t;if(i==="object"&&(i=gX.call(t).slice(8,-1)),i in HC)return HC[i](t,r);if(n&&t){let s=hX(t,r,i);if(s)return typeof s=="string"?s:Fy(s,r)}let o=t?Object.getPrototypeOf(t):!1;return o===Object.prototype||o===null?Vp(t,r):t&&typeof HTMLElement=="function"&&t instanceof HTMLElement?tw(t,r):"constructor"in t?t.constructor!==Object?f1(t,r):Vp(t,r):t===Object(t)?Vp(t,r):r.stylize(String(t),i)}C(Fy,"inspect");var Cr={includeStack:!1,showDiff:!0,truncateThreshold:40,useProxy:!0,proxyExcludedKeys:["then","catch","inspect","toJSON"],deepEqual:null};function He(t,e,r,n){var i={colors:n,depth:typeof r>"u"?2:r,showHidden:e,truncate:Cr.truncateThreshold?Cr.truncateThreshold:1/0};return Fy(t,i)}C(He,"inspect");function Ca(t){var e=He(t),r=Object.prototype.toString.call(t);if(Cr.truncateThreshold&&e.length>=Cr.truncateThreshold){if(r==="[object Function]")return!t.name||t.name===""?"[Function]":"[Function: "+t.name+"]";if(r==="[object Array]")return"[ Array("+t.length+") ]";if(r==="[object Object]"){var n=Object.keys(t),i=n.length>2?n.splice(0,2).join(", ")+", ...":n.join(", ");return"{ Object ("+i+") }"}else return e}else return e}C(Ca,"objDisplay");function rw(t,e){var r=Re(t,"negate"),n=Re(t,"object"),i=e[3],o=Hy(t,e),s=r?e[2]:e[1],l=Re(t,"message");return typeof s=="function"&&(s=s()),s=s||"",s=s.replace(/#\{this\}/g,function(){return Ca(n)}).replace(/#\{act\}/g,function(){return Ca(o)}).replace(/#\{exp\}/g,function(){return Ca(i)}),l?l+": "+s:s}C(rw,"getMessage");function zn(t,e,r){var n=t.__flags||(t.__flags=Object.create(null));e.__flags||(e.__flags=Object.create(null)),r=arguments.length===3?r:!0;for(var i in n)(r||i!=="object"&&i!=="ssfi"&&i!=="lockSsfi"&&i!="message")&&(e.__flags[i]=n[i])}C(zn,"transferFlags");function jb(t){if(typeof t>"u")return"undefined";if(t===null)return"null";let e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}C(jb,"type");function nw(){this._key="chai/deep-eql__"+Math.random()+Date.now()}C(nw,"FakeMap");nw.prototype={get:C(function(e){return e[this._key]},"get"),set:C(function(e,r){Object.isExtensible(e)&&Object.defineProperty(e,this._key,{value:r,configurable:!0})},"set")};var g1=typeof WeakMap=="function"?WeakMap:nw;function qb(t,e,r){if(!r||Na(t)||Na(e))return null;var n=r.get(t);if(n){var i=n.get(e);if(typeof i=="boolean")return i}return null}C(qb,"memoizeCompare");function Hp(t,e,r,n){if(!(!r||Na(t)||Na(e))){var i=r.get(t);i?i.set(e,n):(i=new g1,i.set(e,n),r.set(t,i))}}C(Hp,"memoizeSet");var y1=Bp;function Bp(t,e,r){if(r&&r.comparator)return zb(t,e,r);var n=iw(t,e);return n!==null?n:zb(t,e,r)}C(Bp,"deepEqual");function iw(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e?!0:Na(t)||Na(e)?!1:null}C(iw,"simpleEqual");function zb(t,e,r){r=r||{},r.memoize=r.memoize===!1?!1:r.memoize||new g1;var n=r&&r.comparator,i=qb(t,e,r.memoize);if(i!==null)return i;var o=qb(e,t,r.memoize);if(o!==null)return o;if(n){var s=n(t,e);if(s===!1||s===!0)return Hp(t,e,r.memoize,s),s;var l=iw(t,e);if(l!==null)return l}var p=jb(t);if(p!==jb(e))return Hp(t,e,r.memoize,!1),!1;Hp(t,e,r.memoize,!0);var u=x1(t,e,p,r);return Hp(t,e,r.memoize,u),u}C(zb,"extensiveDeepEqual");function x1(t,e,r,n){switch(r){case"String":case"Number":case"Boolean":case"Date":return Bp(t.valueOf(),e.valueOf());case"Promise":case"Symbol":case"function":case"WeakMap":case"WeakSet":return t===e;case"Error":return ow(t,e,["name","message","code"],n);case"Arguments":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"Array":return Oo(t,e,n);case"RegExp":return T1(t,e);case"Generator":return S1(t,e,n);case"DataView":return Oo(new Uint8Array(t.buffer),new Uint8Array(e.buffer),n);case"ArrayBuffer":return Oo(new Uint8Array(t),new Uint8Array(e),n);case"Set":return Gb(t,e,n);case"Map":return Gb(t,e,n);case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.Instant":case"Temporal.ZonedDateTime":case"Temporal.PlainYearMonth":case"Temporal.PlainMonthDay":return t.equals(e);case"Temporal.Duration":return t.total("nanoseconds")===e.total("nanoseconds");case"Temporal.TimeZone":case"Temporal.Calendar":return t.toString()===e.toString();default:return b1(t,e,n)}}C(x1,"extensiveDeepEqualByType");function T1(t,e){return t.toString()===e.toString()}C(T1,"regexpEqual");function Gb(t,e,r){if(t.size!==e.size)return!1;if(t.size===0)return!0;var n=[],i=[];return t.forEach(C(function(s,l){n.push([s,l])},"gatherEntries")),e.forEach(C(function(s,l){i.push([s,l])},"gatherEntries")),Oo(n.sort(),i.sort(),r)}C(Gb,"entriesEqual");function Oo(t,e,r){var n=t.length;if(n!==e.length)return!1;if(n===0)return!0;for(var i=-1;++i<n;)if(Bp(t[i],e[i],r)===!1)return!1;return!0}C(Oo,"iterableEqual");function S1(t,e,r){return Oo(Iy(t),Iy(e),r)}C(S1,"generatorEqual");function v1(t){return typeof Symbol<"u"&&typeof t=="object"&&typeof Symbol.iterator<"u"&&typeof t[Symbol.iterator]=="function"}C(v1,"hasIteratorFunction");function Kb(t){if(v1(t))try{return Iy(t[Symbol.iterator]())}catch{return[]}return[]}C(Kb,"getIteratorEntries");function Iy(t){for(var e=t.next(),r=[e.value];e.done===!1;)e=t.next(),r.push(e.value);return r}C(Iy,"getGeneratorEntries");function Qb(t){var e=[];for(var r in t)e.push(r);return e}C(Qb,"getEnumerableKeys");function Zb(t){for(var e=[],r=Object.getOwnPropertySymbols(t),n=0;n<r.length;n+=1){var i=r[n];Object.getOwnPropertyDescriptor(t,i).enumerable&&e.push(i)}return e}C(Zb,"getEnumerableSymbols");function ow(t,e,r,n){var i=r.length;if(i===0)return!0;for(var o=0;o<i;o+=1)if(Bp(t[r[o]],e[r[o]],n)===!1)return!1;return!0}C(ow,"keysEqual");function b1(t,e,r){var n=Qb(t),i=Qb(e),o=Zb(t),s=Zb(e);if(n=n.concat(o),i=i.concat(s),n.length&&n.length===i.length)return Oo(Yb(n).sort(),Yb(i).sort())===!1?!1:ow(t,e,n,r);var l=Kb(t),p=Kb(e);return l.length&&l.length===p.length?(l.sort(),p.sort(),Oo(l,p,r)):n.length===0&&l.length===0&&i.length===0&&p.length===0}C(b1,"objectEqual");function Na(t){return t===null||typeof t!="object"}C(Na,"isPrimitive");function Yb(t){return t.map(C(function(r){return typeof r=="symbol"?r.toString():r},"mapSymbol"))}C(Yb,"mapSymbols");function Vy(t,e){return typeof t>"u"||t===null?!1:e in Object(t)}C(Vy,"hasProperty");function w1(t){return t.replace(/([^\\])\[/g,"$1.[").match(/(\\\.|[^.]+?)+/g).map(n=>{if(n==="constructor"||n==="__proto__"||n==="prototype")return{};let o=/^\[(\d+)\]$/.exec(n),s=null;return o?s={i:parseFloat(o[1])}:s={p:n.replace(/\\([.[\]])/g,"$1")},s})}C(w1,"parsePath");function Xb(t,e,r){let n=t,i=null;r=typeof r>"u"?e.length:r;for(let o=0;o<r;o++){let s=e[o];n&&(typeof s.p>"u"?n=n[s.i]:n=n[s.p],o===r-1&&(i=n))}return i}C(Xb,"internalGetPathValue");function aw(t,e){let r=w1(e),n=r[r.length-1],i={parent:r.length>1?Xb(t,r,r.length-1):t,name:n.p||n.i,value:Xb(t,r)};return i.exists=Vy(i.parent,i.name),i}C(aw,"getPathInfo");function _(t,e,r,n){return Re(this,"ssfi",r||_),Re(this,"lockSsfi",n),Re(this,"object",t),Re(this,"message",e),Re(this,"eql",Cr.deepEqual||y1),Mc(this)}C(_,"Assertion");Object.defineProperty(_,"includeStack",{get:function(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),Cr.includeStack},set:function(t){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),Cr.includeStack=t}});Object.defineProperty(_,"showDiff",{get:function(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),Cr.showDiff},set:function(t){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),Cr.showDiff=t}});_.addProperty=function(t,e){sw(this.prototype,t,e)};_.addMethod=function(t,e){cw(this.prototype,t,e)};_.addChainableMethod=function(t,e,r){uw(this.prototype,t,e,r)};_.overwriteProperty=function(t,e){lw(this.prototype,t,e)};_.overwriteMethod=function(t,e){pw(this.prototype,t,e)};_.overwriteChainableMethod=function(t,e,r){fw(this.prototype,t,e,r)};_.prototype.assert=function(t,e,r,n,i,o){var s=ew(this,arguments);if(o!==!1&&(o=!0),n===void 0&&i===void 0&&(o=!1),Cr.showDiff!==!0&&(o=!1),!s){e=rw(this,arguments);var l=Hy(this,arguments),p={actual:l,expected:n,showDiff:o},u=hw(this,arguments);throw u&&(p.operator=u),new Ke(e,p,Cr.includeStack?this.assert:Re(this,"ssfi"))}};Object.defineProperty(_.prototype,"_obj",{get:function(){return Re(this,"object")},set:function(t){Re(this,"object",t)}});function Wp(){return Cr.useProxy&&typeof Proxy<"u"&&typeof Reflect<"u"}C(Wp,"isProxyEnabled");function sw(t,e,r){r=r===void 0?function(){}:r,Object.defineProperty(t,e,{get:C(function n(){!Wp()&&!Re(this,"lockSsfi")&&Re(this,"ssfi",n);var i=r.call(this);if(i!==void 0)return i;var o=new _;return zn(this,o),o},"propertyGetter"),configurable:!0})}C(sw,"addProperty");var yX=Object.getOwnPropertyDescriptor(function(){},"length");function $p(t,e,r){return yX.configurable&&Object.defineProperty(t,"length",{get:function(){throw Error(r?"Invalid Chai property: "+e+'.length. Due to a compatibility issue, "length" cannot directly follow "'+e+'". Use "'+e+'.lengthOf" instead.':"Invalid Chai property: "+e+'.length. See docs for proper usage of "'+e+'".')}}),t}C($p,"addLengthGuard");function _1(t){var e=Object.getOwnPropertyNames(t);function r(i){e.indexOf(i)===-1&&e.push(i)}C(r,"addProperty");for(var n=Object.getPrototypeOf(t);n!==null;)Object.getOwnPropertyNames(n).forEach(r),n=Object.getPrototypeOf(n);return e}C(_1,"getProperties");var VC=["__flags","__methods","_obj","assert"];function Mc(t,e){return Wp()?new Proxy(t,{get:C(function r(n,i){if(typeof i=="string"&&Cr.proxyExcludedKeys.indexOf(i)===-1&&!Reflect.has(n,i)){if(e)throw Error("Invalid Chai property: "+e+"."+i+'. See docs for proper usage of "'+e+'".');var o=null,s=4;throw _1(n).forEach(function(l){if(!Object.prototype.hasOwnProperty(l)&&VC.indexOf(l)===-1){var p=E1(i,l,s);p<s&&(o=l,s=p)}}),Error(o!==null?"Invalid Chai property: "+i+'. Did you mean "'+o+'"?':"Invalid Chai property: "+i)}return VC.indexOf(i)===-1&&!Re(n,"lockSsfi")&&Re(n,"ssfi",r),Reflect.get(n,i)},"proxyGetter")}):t}C(Mc,"proxify");function E1(t,e,r){if(Math.abs(t.length-e.length)>=r)return r;for(var n=[],i=0;i<=t.length;i++)n[i]=Array(e.length+1).fill(0),n[i][0]=i;for(var o=0;o<e.length;o++)n[0][o]=o;for(var i=1;i<=t.length;i++)for(var s=t.charCodeAt(i-1),o=1;o<=e.length;o++){if(Math.abs(i-o)>=r){n[i][o]=r;continue}n[i][o]=Math.min(n[i-1][o]+1,n[i][o-1]+1,n[i-1][o-1]+(s===e.charCodeAt(o-1)?0:1))}return n[t.length][e.length]}C(E1,"stringDistanceCapped");function cw(t,e,r){var n=C(function(){Re(this,"lockSsfi")||Re(this,"ssfi",n);var i=r.apply(this,arguments);if(i!==void 0)return i;var o=new _;return zn(this,o),o},"methodWrapper");$p(n,e,!1),t[e]=Mc(n,e)}C(cw,"addMethod");function lw(t,e,r){var n=Object.getOwnPropertyDescriptor(t,e),i=C(function(){},"_super");n&&typeof n.get=="function"&&(i=n.get),Object.defineProperty(t,e,{get:C(function o(){!Wp()&&!Re(this,"lockSsfi")&&Re(this,"ssfi",o);var s=Re(this,"lockSsfi");Re(this,"lockSsfi",!0);var l=r(i).call(this);if(Re(this,"lockSsfi",s),l!==void 0)return l;var p=new _;return zn(this,p),p},"overwritingPropertyGetter"),configurable:!0})}C(lw,"overwriteProperty");function pw(t,e,r){var n=t[e],i=C(function(){throw new Error(e+" is not a function")},"_super");n&&typeof n=="function"&&(i=n);var o=C(function(){Re(this,"lockSsfi")||Re(this,"ssfi",o);var s=Re(this,"lockSsfi");Re(this,"lockSsfi",!0);var l=r(i).apply(this,arguments);if(Re(this,"lockSsfi",s),l!==void 0)return l;var p=new _;return zn(this,p),p},"overwritingMethodWrapper");$p(o,e,!1),t[e]=Mc(o,e)}C(pw,"overwriteMethod");var xX=typeof Object.setPrototypeOf=="function",BC=C(function(){},"testFn"),TX=Object.getOwnPropertyNames(BC).filter(function(t){var e=Object.getOwnPropertyDescriptor(BC,t);return typeof e!="object"?!0:!e.configurable}),SX=Function.prototype.call,vX=Function.prototype.apply;function uw(t,e,r,n){typeof n!="function"&&(n=C(function(){},"chainingBehavior"));var i={method:r,chainingBehavior:n};t.__methods||(t.__methods={}),t.__methods[e]=i,Object.defineProperty(t,e,{get:C(function(){i.chainingBehavior.call(this);var s=C(function(){Re(this,"lockSsfi")||Re(this,"ssfi",s);var u=i.method.apply(this,arguments);if(u!==void 0)return u;var m=new _;return zn(this,m),m},"chainableMethodWrapper");if($p(s,e,!0),xX){var l=Object.create(this);l.call=SX,l.apply=vX,Object.setPrototypeOf(s,l)}else{var p=Object.getOwnPropertyNames(t);p.forEach(function(u){if(TX.indexOf(u)===-1){var m=Object.getOwnPropertyDescriptor(t,u);Object.defineProperty(s,u,m)}})}return zn(this,s),Mc(s)},"chainableMethodGetter"),configurable:!0})}C(uw,"addChainableMethod");function fw(t,e,r,n){var i=t.__methods[e],o=i.chainingBehavior;i.chainingBehavior=C(function(){var p=n(o).call(this);if(p!==void 0)return p;var u=new _;return zn(this,u),u},"overwritingChainableMethodGetter");var s=i.method;i.method=C(function(){var p=r(s).apply(this,arguments);if(p!==void 0)return p;var u=new _;return zn(this,u),u},"overwritingChainableMethodWrapper")}C(fw,"overwriteChainableMethod");function Cy(t,e){return He(t)<He(e)?-1:1}C(Cy,"compareByInspect");function mw(t){return typeof Object.getOwnPropertySymbols!="function"?[]:Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})}C(mw,"getOwnEnumerablePropertySymbols");function dw(t){return Object.keys(t).concat(mw(t))}C(dw,"getOwnEnumerableProperties");function R1(t){return t!==t}C(R1,"_isNaN");var Ny=Number.isNaN||R1;function k1(t){var e=Je(t),r=["Array","Object","Function"];return r.indexOf(e)!==-1}C(k1,"isObjectType");function hw(t,e){var r=Re(t,"operator"),n=Re(t,"negate"),i=e[3],o=n?e[2]:e[1];if(r)return r;if(typeof o=="function"&&(o=o()),o=o||"",!!o&&!/\shave\s/.test(o)){var s=k1(i);return/\snot\s/.test(o)?s?"notDeepStrictEqual":"notStrictEqual":s?"deepStrictEqual":"strictEqual"}}C(hw,"getOperator");function By(t){return t.name}C(By,"getName");function Oy(t){return Object.prototype.toString.call(t)==="[object RegExp]"}C(Oy,"isRegExp");var{flag:A}=My;["to","be","been","is","and","has","have","with","that","which","at","of","same","but","does","still","also"].forEach(function(t){_.addProperty(t)});_.addProperty("not",function(){A(this,"negate",!0)});_.addProperty("deep",function(){A(this,"deep",!0)});_.addProperty("nested",function(){A(this,"nested",!0)});_.addProperty("own",function(){A(this,"own",!0)});_.addProperty("ordered",function(){A(this,"ordered",!0)});_.addProperty("any",function(){A(this,"any",!0),A(this,"all",!1)});_.addProperty("all",function(){A(this,"all",!0),A(this,"any",!1)});var WC={function:["function","asyncfunction","generatorfunction","asyncgeneratorfunction"],asyncfunction:["asyncfunction","asyncgeneratorfunction"],generatorfunction:["generatorfunction","asyncgeneratorfunction"],asyncgeneratorfunction:["asyncgeneratorfunction"]};function gw(t,e){e&&A(this,"message",e),t=t.toLowerCase();var r=A(this,"object"),n=~["a","e","i","o","u"].indexOf(t.charAt(0))?"an ":"a ";let i=Je(r).toLowerCase();WC.function.includes(t)?this.assert(WC[t].includes(i),"expected #{this} to be "+n+t,"expected #{this} not to be "+n+t):this.assert(t===i,"expected #{this} to be "+n+t,"expected #{this} not to be "+n+t)}C(gw,"an");_.addChainableMethod("an",gw);_.addChainableMethod("a",gw);function P1(t,e){return Ny(t)&&Ny(e)||t===e}C(P1,"SameValueZero");function jp(){A(this,"contains",!0)}C(jp,"includeChainingBehavior");function qp(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=Je(r).toLowerCase(),i=A(this,"message"),o=A(this,"negate"),s=A(this,"ssfi"),l=A(this,"deep"),p=l?"deep ":"",u=l?A(this,"eql"):P1;i=i?i+": ":"";var m=!1;switch(n){case"string":m=r.indexOf(t)!==-1;break;case"weakset":if(l)throw new Ke(i+"unable to use .deep.include with WeakSet",void 0,s);m=r.has(t);break;case"map":r.forEach(function(b){m=m||u(b,t)});break;case"set":l?r.forEach(function(b){m=m||u(b,t)}):m=r.has(t);break;case"array":l?m=r.some(function(b){return u(b,t)}):m=r.indexOf(t)!==-1;break;default:if(t!==Object(t))throw new Ke(i+"the given combination of arguments ("+n+" and "+Je(t).toLowerCase()+") is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a "+Je(t).toLowerCase(),void 0,s);var d=Object.keys(t),g=null,x=0;if(d.forEach(function(b){var v=new _(r);if(zn(this,v,!0),A(v,"lockSsfi",!0),!o||d.length===1){v.property(b,t[b]);return}try{v.property(b,t[b])}catch(I){if(!tn.compatibleConstructor(I,Ke))throw I;g===null&&(g=I),x++}},this),o&&d.length>1&&x===d.length)throw g;return}this.assert(m,"expected #{this} to "+p+"include "+He(t),"expected #{this} to not "+p+"include "+He(t))}C(qp,"include");_.addChainableMethod("include",qp,jp);_.addChainableMethod("contain",qp,jp);_.addChainableMethod("contains",qp,jp);_.addChainableMethod("includes",qp,jp);_.addProperty("ok",function(){this.assert(A(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")});_.addProperty("true",function(){this.assert(A(this,"object")===!0,"expected #{this} to be true","expected #{this} to be false",!A(this,"negate"))});_.addProperty("callable",function(){let t=A(this,"object"),e=A(this,"ssfi"),r=A(this,"message"),n=r?`${r}: `:"",i=A(this,"negate"),o=i?`${n}expected ${He(t)} not to be a callable function`:`${n}expected ${He(t)} to be a callable function`,s=["Function","AsyncFunction","GeneratorFunction","AsyncGeneratorFunction"].includes(Je(t));if(s&&i||!s&&!i)throw new Ke(o,void 0,e)});_.addProperty("false",function(){this.assert(A(this,"object")===!1,"expected #{this} to be false","expected #{this} to be true",!!A(this,"negate"))});_.addProperty("null",function(){this.assert(A(this,"object")===null,"expected #{this} to be null","expected #{this} not to be null")});_.addProperty("undefined",function(){this.assert(A(this,"object")===void 0,"expected #{this} to be undefined","expected #{this} not to be undefined")});_.addProperty("NaN",function(){this.assert(Ny(A(this,"object")),"expected #{this} to be NaN","expected #{this} not to be NaN")});function yw(){var t=A(this,"object");this.assert(t!=null,"expected #{this} to exist","expected #{this} to not exist")}C(yw,"assertExist");_.addProperty("exist",yw);_.addProperty("exists",yw);_.addProperty("empty",function(){var t=A(this,"object"),e=A(this,"ssfi"),r=A(this,"message"),n;switch(r=r?r+": ":"",Je(t).toLowerCase()){case"array":case"string":n=t.length;break;case"map":case"set":n=t.size;break;case"weakmap":case"weakset":throw new Ke(r+".empty was passed a weak collection",void 0,e);case"function":var i=r+".empty was passed a function "+By(t);throw new Ke(i.trim(),void 0,e);default:if(t!==Object(t))throw new Ke(r+".empty was passed non-string primitive "+He(t),void 0,e);n=Object.keys(t).length}this.assert(n===0,"expected #{this} to be empty","expected #{this} not to be empty")});function xw(){var t=A(this,"object"),e=Je(t);this.assert(e==="Arguments","expected #{this} to be arguments but got "+e,"expected #{this} to not be arguments")}C(xw,"checkArguments");_.addProperty("arguments",xw);_.addProperty("Arguments",xw);function Wy(t,e){e&&A(this,"message",e);var r=A(this,"object");if(A(this,"deep")){var n=A(this,"lockSsfi");A(this,"lockSsfi",!0),this.eql(t),A(this,"lockSsfi",n)}else this.assert(t===r,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",t,this._obj,!0)}C(Wy,"assertEqual");_.addMethod("equal",Wy);_.addMethod("equals",Wy);_.addMethod("eq",Wy);function Tw(t,e){e&&A(this,"message",e);var r=A(this,"eql");this.assert(r(t,A(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",t,this._obj,!0)}C(Tw,"assertEql");_.addMethod("eql",Tw);_.addMethod("eqls",Tw);function $y(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=A(this,"doLength"),i=A(this,"message"),o=i?i+": ":"",s=A(this,"ssfi"),l=Je(r).toLowerCase(),p=Je(t).toLowerCase(),u,m=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&p!=="date")u=o+"the argument to above must be a date";else if(p!=="number"&&(n||l==="number"))u=o+"the argument to above must be a number";else if(!n&&l!=="date"&&l!=="number"){var d=l==="string"?"'"+r+"'":r;u=o+"expected "+d+" to be a number or a date"}else m=!1;if(m)throw new Ke(u,void 0,s);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x>t,"expected #{this} to have a "+g+" above #{exp} but got #{act}","expected #{this} to not have a "+g+" above #{exp}",t,x)}else this.assert(r>t,"expected #{this} to be above #{exp}","expected #{this} to be at most #{exp}",t)}C($y,"assertAbove");_.addMethod("above",$y);_.addMethod("gt",$y);_.addMethod("greaterThan",$y);function jy(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=A(this,"doLength"),i=A(this,"message"),o=i?i+": ":"",s=A(this,"ssfi"),l=Je(r).toLowerCase(),p=Je(t).toLowerCase(),u,m=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&p!=="date")u=o+"the argument to least must be a date";else if(p!=="number"&&(n||l==="number"))u=o+"the argument to least must be a number";else if(!n&&l!=="date"&&l!=="number"){var d=l==="string"?"'"+r+"'":r;u=o+"expected "+d+" to be a number or a date"}else m=!1;if(m)throw new Ke(u,void 0,s);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x>=t,"expected #{this} to have a "+g+" at least #{exp} but got #{act}","expected #{this} to have a "+g+" below #{exp}",t,x)}else this.assert(r>=t,"expected #{this} to be at least #{exp}","expected #{this} to be below #{exp}",t)}C(jy,"assertLeast");_.addMethod("least",jy);_.addMethod("gte",jy);_.addMethod("greaterThanOrEqual",jy);function qy(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=A(this,"doLength"),i=A(this,"message"),o=i?i+": ":"",s=A(this,"ssfi"),l=Je(r).toLowerCase(),p=Je(t).toLowerCase(),u,m=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&p!=="date")u=o+"the argument to below must be a date";else if(p!=="number"&&(n||l==="number"))u=o+"the argument to below must be a number";else if(!n&&l!=="date"&&l!=="number"){var d=l==="string"?"'"+r+"'":r;u=o+"expected "+d+" to be a number or a date"}else m=!1;if(m)throw new Ke(u,void 0,s);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x<t,"expected #{this} to have a "+g+" below #{exp} but got #{act}","expected #{this} to not have a "+g+" below #{exp}",t,x)}else this.assert(r<t,"expected #{this} to be below #{exp}","expected #{this} to be at least #{exp}",t)}C(qy,"assertBelow");_.addMethod("below",qy);_.addMethod("lt",qy);_.addMethod("lessThan",qy);function zy(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=A(this,"doLength"),i=A(this,"message"),o=i?i+": ":"",s=A(this,"ssfi"),l=Je(r).toLowerCase(),p=Je(t).toLowerCase(),u,m=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&p!=="date")u=o+"the argument to most must be a date";else if(p!=="number"&&(n||l==="number"))u=o+"the argument to most must be a number";else if(!n&&l!=="date"&&l!=="number"){var d=l==="string"?"'"+r+"'":r;u=o+"expected "+d+" to be a number or a date"}else m=!1;if(m)throw new Ke(u,void 0,s);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x<=t,"expected #{this} to have a "+g+" at most #{exp} but got #{act}","expected #{this} to have a "+g+" above #{exp}",t,x)}else this.assert(r<=t,"expected #{this} to be at most #{exp}","expected #{this} to be above #{exp}",t)}C(zy,"assertMost");_.addMethod("most",zy);_.addMethod("lte",zy);_.addMethod("lessThanOrEqual",zy);_.addMethod("within",function(t,e,r){r&&A(this,"message",r);var n=A(this,"object"),i=A(this,"doLength"),o=A(this,"message"),s=o?o+": ":"",l=A(this,"ssfi"),p=Je(n).toLowerCase(),u=Je(t).toLowerCase(),m=Je(e).toLowerCase(),d,g=!0,x=u==="date"&&m==="date"?t.toISOString()+".."+e.toISOString():t+".."+e;if(i&&p!=="map"&&p!=="set"&&new _(n,o,l,!0).to.have.property("length"),!i&&p==="date"&&(u!=="date"||m!=="date"))d=s+"the arguments to within must be dates";else if((u!=="number"||m!=="number")&&(i||p==="number"))d=s+"the arguments to within must be numbers";else if(!i&&p!=="date"&&p!=="number"){var b=p==="string"?"'"+n+"'":n;d=s+"expected "+b+" to be a number or a date"}else g=!1;if(g)throw new Ke(d,void 0,l);if(i){var v="length",I;p==="map"||p==="set"?(v="size",I=n.size):I=n.length,this.assert(I>=t&&I<=e,"expected #{this} to have a "+v+" within "+x,"expected #{this} to not have a "+v+" within "+x)}else this.assert(n>=t&&n<=e,"expected #{this} to be within "+x,"expected #{this} to not be within "+x)});function Sw(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=A(this,"ssfi"),i=A(this,"message");try{var o=r instanceof t}catch(l){throw l instanceof TypeError?(i=i?i+": ":"",new Ke(i+"The instanceof assertion needs a constructor but "+Je(t)+" was given.",void 0,n)):l}var s=By(t);s==null&&(s="an unnamed constructor"),this.assert(o,"expected #{this} to be an instance of "+s,"expected #{this} to not be an instance of "+s)}C(Sw,"assertInstanceOf");_.addMethod("instanceof",Sw);_.addMethod("instanceOf",Sw);function vw(t,e,r){r&&A(this,"message",r);var n=A(this,"nested"),i=A(this,"own"),o=A(this,"message"),s=A(this,"object"),l=A(this,"ssfi"),p=typeof t;if(o=o?o+": ":"",n){if(p!=="string")throw new Ke(o+"the argument to property must be a string when using nested syntax",void 0,l)}else if(p!=="string"&&p!=="number"&&p!=="symbol")throw new Ke(o+"the argument to property must be a string, number, or symbol",void 0,l);if(n&&i)throw new Ke(o+'The "nested" and "own" flags cannot be combined.',void 0,l);if(s==null)throw new Ke(o+"Target cannot be null or undefined.",void 0,l);var u=A(this,"deep"),m=A(this,"negate"),d=n?aw(s,t):null,g=n?d.value:s[t],x=u?A(this,"eql"):(I,F)=>I===F,b="";u&&(b+="deep "),i&&(b+="own "),n&&(b+="nested "),b+="property ";var v;i?v=Object.prototype.hasOwnProperty.call(s,t):n?v=d.exists:v=Vy(s,t),(!m||arguments.length===1)&&this.assert(v,"expected #{this} to have "+b+He(t),"expected #{this} to not have "+b+He(t)),arguments.length>1&&this.assert(v&&x(e,g),"expected #{this} to have "+b+He(t)+" of #{exp}, but got #{act}","expected #{this} to not have "+b+He(t)+" of #{act}",e,g),A(this,"object",g)}C(vw,"assertProperty");_.addMethod("property",vw);function bw(t,e,r){A(this,"own",!0),vw.apply(this,arguments)}C(bw,"assertOwnProperty");_.addMethod("ownProperty",bw);_.addMethod("haveOwnProperty",bw);function ww(t,e,r){typeof e=="string"&&(r=e,e=null),r&&A(this,"message",r);var n=A(this,"object"),i=Object.getOwnPropertyDescriptor(Object(n),t),o=A(this,"eql");i&&e?this.assert(o(e,i),"expected the own property descriptor for "+He(t)+" on #{this} to match "+He(e)+", got "+He(i),"expected the own property descriptor for "+He(t)+" on #{this} to not match "+He(e),e,i,!0):this.assert(i,"expected #{this} to have an own property descriptor for "+He(t),"expected #{this} to not have an own property descriptor for "+He(t)),A(this,"object",i)}C(ww,"assertOwnPropertyDescriptor");_.addMethod("ownPropertyDescriptor",ww);_.addMethod("haveOwnPropertyDescriptor",ww);function _w(){A(this,"doLength",!0)}C(_w,"assertLengthChain");function Ew(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=Je(r).toLowerCase(),i=A(this,"message"),o=A(this,"ssfi"),s="length",l;switch(n){case"map":case"set":s="size",l=r.size;break;default:new _(r,i,o,!0).to.have.property("length"),l=r.length}this.assert(l==t,"expected #{this} to have a "+s+" of #{exp} but got #{act}","expected #{this} to not have a "+s+" of #{act}",t,l)}C(Ew,"assertLength");_.addChainableMethod("length",Ew,_w);_.addChainableMethod("lengthOf",Ew,_w);function Rw(t,e){e&&A(this,"message",e);var r=A(this,"object");this.assert(t.exec(r),"expected #{this} to match "+t,"expected #{this} not to match "+t)}C(Rw,"assertMatch");_.addMethod("match",Rw);_.addMethod("matches",Rw);_.addMethod("string",function(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=A(this,"message"),i=A(this,"ssfi");new _(r,n,i,!0).is.a("string"),this.assert(~r.indexOf(t),"expected #{this} to contain "+He(t),"expected #{this} to not contain "+He(t))});function kw(t){var e=A(this,"object"),r=Je(e),n=Je(t),i=A(this,"ssfi"),o=A(this,"deep"),s,l="",p,u=!0,m=A(this,"message");m=m?m+": ":"";var d=m+"when testing keys against an object or an array you must give a single Array|Object|String argument or multiple String arguments";if(r==="Map"||r==="Set")l=o?"deeply ":"",p=[],e.forEach(function(V,Z){p.push(Z)}),n!=="Array"&&(t=Array.prototype.slice.call(arguments));else{switch(p=dw(e),n){case"Array":if(arguments.length>1)throw new Ke(d,void 0,i);break;case"Object":if(arguments.length>1)throw new Ke(d,void 0,i);t=Object.keys(t);break;default:t=Array.prototype.slice.call(arguments)}t=t.map(function(V){return typeof V=="symbol"?V:String(V)})}if(!t.length)throw new Ke(m+"keys required",void 0,i);var g=t.length,x=A(this,"any"),b=A(this,"all"),v=t,I=o?A(this,"eql"):(V,Z)=>V===Z;if(!x&&!b&&(b=!0),x&&(u=v.some(function(V){return p.some(function(Z){return I(V,Z)})})),b&&(u=v.every(function(V){return p.some(function(Z){return I(V,Z)})}),A(this,"contains")||(u=u&&t.length==p.length)),g>1){t=t.map(function(V){return He(V)});var F=t.pop();b&&(s=t.join(", ")+", and "+F),x&&(s=t.join(", ")+", or "+F)}else s=He(t[0]);s=(g>1?"keys ":"key ")+s,s=(A(this,"contains")?"contain ":"have ")+s,this.assert(u,"expected #{this} to "+l+s,"expected #{this} to not "+l+s,v.slice(0).sort(Cy),p.sort(Cy),!0)}C(kw,"assertKeys");_.addMethod("keys",kw);_.addMethod("key",kw);function Gy(t,e,r){r&&A(this,"message",r);var n=A(this,"object"),i=A(this,"ssfi"),o=A(this,"message"),s=A(this,"negate")||!1;new _(n,o,i,!0).is.a("function"),(Oy(t)||typeof t=="string")&&(e=t,t=null);let l,p=!1;try{n()}catch(V){p=!0,l=V}var u=t===void 0&&e===void 0,m=!!(t&&e),d=!1,g=!1;if(u||!u&&!s){var x="an error";t instanceof Error?x="#{exp}":t&&(x=tn.getConstructorName(t));let V=l;if(l instanceof Error)V=l.toString();else if(typeof l=="string")V=l;else if(l&&(typeof l=="object"||typeof l=="function"))try{V=tn.getConstructorName(l)}catch{}this.assert(p,"expected #{this} to throw "+x,"expected #{this} to not throw an error but #{act} was thrown",t&&t.toString(),V)}if(t&&l){if(t instanceof Error){var b=tn.compatibleInstance(l,t);b===s&&(m&&s?d=!0:this.assert(s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l&&!s?" but #{act} was thrown":""),t.toString(),l.toString()))}var v=tn.compatibleConstructor(l,t);v===s&&(m&&s?d=!0:this.assert(s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&tn.getConstructorName(t),l instanceof Error?l.toString():l&&tn.getConstructorName(l)))}if(l&&e!==void 0&&e!==null){var I="including";Oy(e)&&(I="matching");var F=tn.compatibleMessage(l,e);F===s&&(m&&s?g=!0:this.assert(s,"expected #{this} to throw error "+I+" #{exp} but got #{act}","expected #{this} to throw error not "+I+" #{exp}",e,tn.getMessage(l)))}d&&g&&this.assert(s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&tn.getConstructorName(t),l instanceof Error?l.toString():l&&tn.getConstructorName(l)),A(this,"object",l)}C(Gy,"assertThrows");_.addMethod("throw",Gy);_.addMethod("throws",Gy);_.addMethod("Throw",Gy);function Pw(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=A(this,"itself"),i=typeof r=="function"&&!n?r.prototype[t]:r[t];this.assert(typeof i=="function","expected #{this} to respond to "+He(t),"expected #{this} to not respond to "+He(t))}C(Pw,"respondTo");_.addMethod("respondTo",Pw);_.addMethod("respondsTo",Pw);_.addProperty("itself",function(){A(this,"itself",!0)});function Aw(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=t(r);this.assert(n,"expected #{this} to satisfy "+Ca(t),"expected #{this} to not satisfy"+Ca(t),!A(this,"negate"),n)}C(Aw,"satisfy");_.addMethod("satisfy",Aw);_.addMethod("satisfies",Aw);function Mw(t,e,r){r&&A(this,"message",r);var n=A(this,"object"),i=A(this,"message"),o=A(this,"ssfi");if(new _(n,i,o,!0).is.a("number"),typeof t!="number"||typeof e!="number"){i=i?i+": ":"";var s=e===void 0?", and a delta is required":"";throw new Ke(i+"the arguments to closeTo or approximately must be numbers"+s,void 0,o)}this.assert(Math.abs(n-t)<=e,"expected #{this} to be close to "+t+" +/- "+e,"expected #{this} not to be close to "+t+" +/- "+e)}C(Mw,"closeTo");_.addMethod("closeTo",Mw);_.addMethod("approximately",Mw);function A1(t,e,r,n,i){let o=Array.from(e),s=Array.from(t);if(!n){if(s.length!==o.length)return!1;o=o.slice()}return s.every(function(l,p){if(i)return r?r(l,o[p]):l===o[p];if(!r){var u=o.indexOf(l);return u===-1?!1:(n||o.splice(u,1),!0)}return o.some(function(m,d){return r(l,m)?(n||o.splice(d,1),!0):!1})})}C(A1,"isSubsetOf");_.addMethod("members",function(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=A(this,"message"),i=A(this,"ssfi");new _(r,n,i,!0).to.be.iterable,new _(t,n,i,!0).to.be.iterable;var o=A(this,"contains"),s=A(this,"ordered"),l,p,u;o?(l=s?"an ordered superset":"a superset",p="expected #{this} to be "+l+" of #{exp}",u="expected #{this} to not be "+l+" of #{exp}"):(l=s?"ordered members":"members",p="expected #{this} to have the same "+l+" as #{exp}",u="expected #{this} to not have the same "+l+" as #{exp}");var m=A(this,"deep")?A(this,"eql"):void 0;this.assert(A1(t,r,m,o,s),p,u,t,r,!0)});_.addProperty("iterable",function(t){t&&A(this,"message",t);var e=A(this,"object");this.assert(e!=null&&e[Symbol.iterator],"expected #{this} to be an iterable","expected #{this} to not be an iterable",e)});function M1(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=A(this,"message"),i=A(this,"ssfi"),o=A(this,"contains"),s=A(this,"deep"),l=A(this,"eql");new _(t,n,i,!0).to.be.an("array"),o?this.assert(t.some(function(p){return r.indexOf(p)>-1}),"expected #{this} to contain one of #{exp}","expected #{this} to not contain one of #{exp}",t,r):s?this.assert(t.some(function(p){return l(r,p)}),"expected #{this} to deeply equal one of #{exp}","expected #{this} to deeply equal one of #{exp}",t,r):this.assert(t.indexOf(r)>-1,"expected #{this} to be one of #{exp}","expected #{this} to not be one of #{exp}",t,r)}C(M1,"oneOf");_.addMethod("oneOf",M1);function Dw(t,e,r){r&&A(this,"message",r);var n=A(this,"object"),i=A(this,"message"),o=A(this,"ssfi");new _(n,i,o,!0).is.a("function");var s;e?(new _(t,i,o,!0).to.have.property(e),s=t[e]):(new _(t,i,o,!0).is.a("function"),s=t()),n();var l=e==null?t():t[e],p=e==null?s:"."+e;A(this,"deltaMsgObj",p),A(this,"initialDeltaValue",s),A(this,"finalDeltaValue",l),A(this,"deltaBehavior","change"),A(this,"realDelta",l!==s),this.assert(s!==l,"expected "+p+" to change","expected "+p+" to not change")}C(Dw,"assertChanges");_.addMethod("change",Dw);_.addMethod("changes",Dw);function Fw(t,e,r){r&&A(this,"message",r);var n=A(this,"object"),i=A(this,"message"),o=A(this,"ssfi");new _(n,i,o,!0).is.a("function");var s;e?(new _(t,i,o,!0).to.have.property(e),s=t[e]):(new _(t,i,o,!0).is.a("function"),s=t()),new _(s,i,o,!0).is.a("number"),n();var l=e==null?t():t[e],p=e==null?s:"."+e;A(this,"deltaMsgObj",p),A(this,"initialDeltaValue",s),A(this,"finalDeltaValue",l),A(this,"deltaBehavior","increase"),A(this,"realDelta",l-s),this.assert(l-s>0,"expected "+p+" to increase","expected "+p+" to not increase")}C(Fw,"assertIncreases");_.addMethod("increase",Fw);_.addMethod("increases",Fw);function Iw(t,e,r){r&&A(this,"message",r);var n=A(this,"object"),i=A(this,"message"),o=A(this,"ssfi");new _(n,i,o,!0).is.a("function");var s;e?(new _(t,i,o,!0).to.have.property(e),s=t[e]):(new _(t,i,o,!0).is.a("function"),s=t()),new _(s,i,o,!0).is.a("number"),n();var l=e==null?t():t[e],p=e==null?s:"."+e;A(this,"deltaMsgObj",p),A(this,"initialDeltaValue",s),A(this,"finalDeltaValue",l),A(this,"deltaBehavior","decrease"),A(this,"realDelta",s-l),this.assert(l-s<0,"expected "+p+" to decrease","expected "+p+" to not decrease")}C(Iw,"assertDecreases");_.addMethod("decrease",Iw);_.addMethod("decreases",Iw);function D1(t,e){e&&A(this,"message",e);var r=A(this,"deltaMsgObj"),n=A(this,"initialDeltaValue"),i=A(this,"finalDeltaValue"),o=A(this,"deltaBehavior"),s=A(this,"realDelta"),l;o==="change"?l=Math.abs(i-n)===Math.abs(t):l=s===Math.abs(t),this.assert(l,"expected "+r+" to "+o+" by "+t,"expected "+r+" to not "+o+" by "+t)}C(D1,"assertDelta");_.addMethod("by",D1);_.addProperty("extensible",function(){var t=A(this,"object"),e=t===Object(t)&&Object.isExtensible(t);this.assert(e,"expected #{this} to be extensible","expected #{this} to not be extensible")});_.addProperty("sealed",function(){var t=A(this,"object"),e=t===Object(t)?Object.isSealed(t):!0;this.assert(e,"expected #{this} to be sealed","expected #{this} to not be sealed")});_.addProperty("frozen",function(){var t=A(this,"object"),e=t===Object(t)?Object.isFrozen(t):!0;this.assert(e,"expected #{this} to be frozen","expected #{this} to not be frozen")});_.addProperty("finite",function(t){var e=A(this,"object");this.assert(typeof e=="number"&&isFinite(e),"expected #{this} to be a finite number","expected #{this} to not be a finite number")});function Ly(t,e){return new _(t,e)}C(Ly,"expect");Ly.fail=function(t,e,r,n){throw arguments.length<2&&(r=t,t=void 0),r=r||"expect.fail()",new Ke(r,{actual:t,expected:e,operator:n},Ly.fail)};var F1={};Jb(F1,{Should:()=>wX,should:()=>bX});function Cw(){function t(){return this instanceof String||this instanceof Number||this instanceof Boolean||typeof Symbol=="function"&&this instanceof Symbol||typeof BigInt=="function"&&this instanceof BigInt?new _(this.valueOf(),null,t):new _(this,null,t)}C(t,"shouldGetter");function e(n){Object.defineProperty(this,"should",{value:n,enumerable:!0,configurable:!0,writable:!0})}C(e,"shouldSetter"),Object.defineProperty(Object.prototype,"should",{set:e,get:t,configurable:!0});var r={};return r.fail=function(n,i,o,s){throw arguments.length<2&&(o=n,n=void 0),o=o||"should.fail()",new Ke(o,{actual:n,expected:i,operator:s},r.fail)},r.equal=function(n,i,o){new _(n,o).to.equal(i)},r.Throw=function(n,i,o,s){new _(n,s).to.Throw(i,o)},r.exist=function(n,i){new _(n,i).to.exist},r.not={},r.not.equal=function(n,i,o){new _(n,o).to.not.equal(i)},r.not.Throw=function(n,i,o,s){new _(n,s).to.not.Throw(i,o)},r.not.exist=function(n,i){new _(n,i).to.not.exist},r.throw=r.Throw,r.not.throw=r.not.Throw,r}C(Cw,"loadShould");var bX=Cw,wX=Cw;function w(t,e){var r=new _(null,null,w,!0);r.assert(t,e,"[ negation message unavailable ]")}C(w,"assert");w.fail=function(t,e,r,n){throw arguments.length<2&&(r=t,t=void 0),r=r||"assert.fail()",new Ke(r,{actual:t,expected:e,operator:n},w.fail)};w.isOk=function(t,e){new _(t,e,w.isOk,!0).is.ok};w.isNotOk=function(t,e){new _(t,e,w.isNotOk,!0).is.not.ok};w.equal=function(t,e,r){var n=new _(t,r,w.equal,!0);n.assert(e==Re(n,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",e,t,!0)};w.notEqual=function(t,e,r){var n=new _(t,r,w.notEqual,!0);n.assert(e!=Re(n,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",e,t,!0)};w.strictEqual=function(t,e,r){new _(t,r,w.strictEqual,!0).to.equal(e)};w.notStrictEqual=function(t,e,r){new _(t,r,w.notStrictEqual,!0).to.not.equal(e)};w.deepEqual=w.deepStrictEqual=function(t,e,r){new _(t,r,w.deepEqual,!0).to.eql(e)};w.notDeepEqual=function(t,e,r){new _(t,r,w.notDeepEqual,!0).to.not.eql(e)};w.isAbove=function(t,e,r){new _(t,r,w.isAbove,!0).to.be.above(e)};w.isAtLeast=function(t,e,r){new _(t,r,w.isAtLeast,!0).to.be.least(e)};w.isBelow=function(t,e,r){new _(t,r,w.isBelow,!0).to.be.below(e)};w.isAtMost=function(t,e,r){new _(t,r,w.isAtMost,!0).to.be.most(e)};w.isTrue=function(t,e){new _(t,e,w.isTrue,!0).is.true};w.isNotTrue=function(t,e){new _(t,e,w.isNotTrue,!0).to.not.equal(!0)};w.isFalse=function(t,e){new _(t,e,w.isFalse,!0).is.false};w.isNotFalse=function(t,e){new _(t,e,w.isNotFalse,!0).to.not.equal(!1)};w.isNull=function(t,e){new _(t,e,w.isNull,!0).to.equal(null)};w.isNotNull=function(t,e){new _(t,e,w.isNotNull,!0).to.not.equal(null)};w.isNaN=function(t,e){new _(t,e,w.isNaN,!0).to.be.NaN};w.isNotNaN=function(t,e){new _(t,e,w.isNotNaN,!0).not.to.be.NaN};w.exists=function(t,e){new _(t,e,w.exists,!0).to.exist};w.notExists=function(t,e){new _(t,e,w.notExists,!0).to.not.exist};w.isUndefined=function(t,e){new _(t,e,w.isUndefined,!0).to.equal(void 0)};w.isDefined=function(t,e){new _(t,e,w.isDefined,!0).to.not.equal(void 0)};w.isCallable=function(t,e){new _(t,e,w.isCallable,!0).is.callable};w.isNotCallable=function(t,e){new _(t,e,w.isNotCallable,!0).is.not.callable};w.isObject=function(t,e){new _(t,e,w.isObject,!0).to.be.a("object")};w.isNotObject=function(t,e){new _(t,e,w.isNotObject,!0).to.not.be.a("object")};w.isArray=function(t,e){new _(t,e,w.isArray,!0).to.be.an("array")};w.isNotArray=function(t,e){new _(t,e,w.isNotArray,!0).to.not.be.an("array")};w.isString=function(t,e){new _(t,e,w.isString,!0).to.be.a("string")};w.isNotString=function(t,e){new _(t,e,w.isNotString,!0).to.not.be.a("string")};w.isNumber=function(t,e){new _(t,e,w.isNumber,!0).to.be.a("number")};w.isNotNumber=function(t,e){new _(t,e,w.isNotNumber,!0).to.not.be.a("number")};w.isFinite=function(t,e){new _(t,e,w.isFinite,!0).to.be.finite};w.isBoolean=function(t,e){new _(t,e,w.isBoolean,!0).to.be.a("boolean")};w.isNotBoolean=function(t,e){new _(t,e,w.isNotBoolean,!0).to.not.be.a("boolean")};w.typeOf=function(t,e,r){new _(t,r,w.typeOf,!0).to.be.a(e)};w.notTypeOf=function(t,e,r){new _(t,r,w.notTypeOf,!0).to.not.be.a(e)};w.instanceOf=function(t,e,r){new _(t,r,w.instanceOf,!0).to.be.instanceOf(e)};w.notInstanceOf=function(t,e,r){new _(t,r,w.notInstanceOf,!0).to.not.be.instanceOf(e)};w.include=function(t,e,r){new _(t,r,w.include,!0).include(e)};w.notInclude=function(t,e,r){new _(t,r,w.notInclude,!0).not.include(e)};w.deepInclude=function(t,e,r){new _(t,r,w.deepInclude,!0).deep.include(e)};w.notDeepInclude=function(t,e,r){new _(t,r,w.notDeepInclude,!0).not.deep.include(e)};w.nestedInclude=function(t,e,r){new _(t,r,w.nestedInclude,!0).nested.include(e)};w.notNestedInclude=function(t,e,r){new _(t,r,w.notNestedInclude,!0).not.nested.include(e)};w.deepNestedInclude=function(t,e,r){new _(t,r,w.deepNestedInclude,!0).deep.nested.include(e)};w.notDeepNestedInclude=function(t,e,r){new _(t,r,w.notDeepNestedInclude,!0).not.deep.nested.include(e)};w.ownInclude=function(t,e,r){new _(t,r,w.ownInclude,!0).own.include(e)};w.notOwnInclude=function(t,e,r){new _(t,r,w.notOwnInclude,!0).not.own.include(e)};w.deepOwnInclude=function(t,e,r){new _(t,r,w.deepOwnInclude,!0).deep.own.include(e)};w.notDeepOwnInclude=function(t,e,r){new _(t,r,w.notDeepOwnInclude,!0).not.deep.own.include(e)};w.match=function(t,e,r){new _(t,r,w.match,!0).to.match(e)};w.notMatch=function(t,e,r){new _(t,r,w.notMatch,!0).to.not.match(e)};w.property=function(t,e,r){new _(t,r,w.property,!0).to.have.property(e)};w.notProperty=function(t,e,r){new _(t,r,w.notProperty,!0).to.not.have.property(e)};w.propertyVal=function(t,e,r,n){new _(t,n,w.propertyVal,!0).to.have.property(e,r)};w.notPropertyVal=function(t,e,r,n){new _(t,n,w.notPropertyVal,!0).to.not.have.property(e,r)};w.deepPropertyVal=function(t,e,r,n){new _(t,n,w.deepPropertyVal,!0).to.have.deep.property(e,r)};w.notDeepPropertyVal=function(t,e,r,n){new _(t,n,w.notDeepPropertyVal,!0).to.not.have.deep.property(e,r)};w.ownProperty=function(t,e,r){new _(t,r,w.ownProperty,!0).to.have.own.property(e)};w.notOwnProperty=function(t,e,r){new _(t,r,w.notOwnProperty,!0).to.not.have.own.property(e)};w.ownPropertyVal=function(t,e,r,n){new _(t,n,w.ownPropertyVal,!0).to.have.own.property(e,r)};w.notOwnPropertyVal=function(t,e,r,n){new _(t,n,w.notOwnPropertyVal,!0).to.not.have.own.property(e,r)};w.deepOwnPropertyVal=function(t,e,r,n){new _(t,n,w.deepOwnPropertyVal,!0).to.have.deep.own.property(e,r)};w.notDeepOwnPropertyVal=function(t,e,r,n){new _(t,n,w.notDeepOwnPropertyVal,!0).to.not.have.deep.own.property(e,r)};w.nestedProperty=function(t,e,r){new _(t,r,w.nestedProperty,!0).to.have.nested.property(e)};w.notNestedProperty=function(t,e,r){new _(t,r,w.notNestedProperty,!0).to.not.have.nested.property(e)};w.nestedPropertyVal=function(t,e,r,n){new _(t,n,w.nestedPropertyVal,!0).to.have.nested.property(e,r)};w.notNestedPropertyVal=function(t,e,r,n){new _(t,n,w.notNestedPropertyVal,!0).to.not.have.nested.property(e,r)};w.deepNestedPropertyVal=function(t,e,r,n){new _(t,n,w.deepNestedPropertyVal,!0).to.have.deep.nested.property(e,r)};w.notDeepNestedPropertyVal=function(t,e,r,n){new _(t,n,w.notDeepNestedPropertyVal,!0).to.not.have.deep.nested.property(e,r)};w.lengthOf=function(t,e,r){new _(t,r,w.lengthOf,!0).to.have.lengthOf(e)};w.hasAnyKeys=function(t,e,r){new _(t,r,w.hasAnyKeys,!0).to.have.any.keys(e)};w.hasAllKeys=function(t,e,r){new _(t,r,w.hasAllKeys,!0).to.have.all.keys(e)};w.containsAllKeys=function(t,e,r){new _(t,r,w.containsAllKeys,!0).to.contain.all.keys(e)};w.doesNotHaveAnyKeys=function(t,e,r){new _(t,r,w.doesNotHaveAnyKeys,!0).to.not.have.any.keys(e)};w.doesNotHaveAllKeys=function(t,e,r){new _(t,r,w.doesNotHaveAllKeys,!0).to.not.have.all.keys(e)};w.hasAnyDeepKeys=function(t,e,r){new _(t,r,w.hasAnyDeepKeys,!0).to.have.any.deep.keys(e)};w.hasAllDeepKeys=function(t,e,r){new _(t,r,w.hasAllDeepKeys,!0).to.have.all.deep.keys(e)};w.containsAllDeepKeys=function(t,e,r){new _(t,r,w.containsAllDeepKeys,!0).to.contain.all.deep.keys(e)};w.doesNotHaveAnyDeepKeys=function(t,e,r){new _(t,r,w.doesNotHaveAnyDeepKeys,!0).to.not.have.any.deep.keys(e)};w.doesNotHaveAllDeepKeys=function(t,e,r){new _(t,r,w.doesNotHaveAllDeepKeys,!0).to.not.have.all.deep.keys(e)};w.throws=function(t,e,r,n){(typeof e=="string"||e instanceof RegExp)&&(r=e,e=null);var i=new _(t,n,w.throws,!0).to.throw(e,r);return Re(i,"object")};w.doesNotThrow=function(t,e,r,n){(typeof e=="string"||e instanceof RegExp)&&(r=e,e=null),new _(t,n,w.doesNotThrow,!0).to.not.throw(e,r)};w.operator=function(t,e,r,n){var i;switch(e){case"==":i=t==r;break;case"===":i=t===r;break;case">":i=t>r;break;case">=":i=t>=r;break;case"<":i=t<r;break;case"<=":i=t<=r;break;case"!=":i=t!=r;break;case"!==":i=t!==r;break;default:throw n=n&&n+": ",new Ke(n+'Invalid operator "'+e+'"',void 0,w.operator)}var o=new _(i,n,w.operator,!0);o.assert(Re(o,"object")===!0,"expected "+He(t)+" to be "+e+" "+He(r),"expected "+He(t)+" to not be "+e+" "+He(r))};w.closeTo=function(t,e,r,n){new _(t,n,w.closeTo,!0).to.be.closeTo(e,r)};w.approximately=function(t,e,r,n){new _(t,n,w.approximately,!0).to.be.approximately(e,r)};w.sameMembers=function(t,e,r){new _(t,r,w.sameMembers,!0).to.have.same.members(e)};w.notSameMembers=function(t,e,r){new _(t,r,w.notSameMembers,!0).to.not.have.same.members(e)};w.sameDeepMembers=function(t,e,r){new _(t,r,w.sameDeepMembers,!0).to.have.same.deep.members(e)};w.notSameDeepMembers=function(t,e,r){new _(t,r,w.notSameDeepMembers,!0).to.not.have.same.deep.members(e)};w.sameOrderedMembers=function(t,e,r){new _(t,r,w.sameOrderedMembers,!0).to.have.same.ordered.members(e)};w.notSameOrderedMembers=function(t,e,r){new _(t,r,w.notSameOrderedMembers,!0).to.not.have.same.ordered.members(e)};w.sameDeepOrderedMembers=function(t,e,r){new _(t,r,w.sameDeepOrderedMembers,!0).to.have.same.deep.ordered.members(e)};w.notSameDeepOrderedMembers=function(t,e,r){new _(t,r,w.notSameDeepOrderedMembers,!0).to.not.have.same.deep.ordered.members(e)};w.includeMembers=function(t,e,r){new _(t,r,w.includeMembers,!0).to.include.members(e)};w.notIncludeMembers=function(t,e,r){new _(t,r,w.notIncludeMembers,!0).to.not.include.members(e)};w.includeDeepMembers=function(t,e,r){new _(t,r,w.includeDeepMembers,!0).to.include.deep.members(e)};w.notIncludeDeepMembers=function(t,e,r){new _(t,r,w.notIncludeDeepMembers,!0).to.not.include.deep.members(e)};w.includeOrderedMembers=function(t,e,r){new _(t,r,w.includeOrderedMembers,!0).to.include.ordered.members(e)};w.notIncludeOrderedMembers=function(t,e,r){new _(t,r,w.notIncludeOrderedMembers,!0).to.not.include.ordered.members(e)};w.includeDeepOrderedMembers=function(t,e,r){new _(t,r,w.includeDeepOrderedMembers,!0).to.include.deep.ordered.members(e)};w.notIncludeDeepOrderedMembers=function(t,e,r){new _(t,r,w.notIncludeDeepOrderedMembers,!0).to.not.include.deep.ordered.members(e)};w.oneOf=function(t,e,r){new _(t,r,w.oneOf,!0).to.be.oneOf(e)};w.isIterable=function(t,e){if(t==null||!t[Symbol.iterator])throw e=e?`${e} expected ${He(t)} to be an iterable`:`expected ${He(t)} to be an iterable`,new Ke(e,void 0,w.isIterable)};w.changes=function(t,e,r,n){arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,w.changes,!0).to.change(e,r)};w.changesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,w.changesBy,!0).to.change(e,r).by(n)};w.doesNotChange=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,w.doesNotChange,!0).to.not.change(e,r)};w.changesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,w.changesButNotBy,!0).to.change(e,r).but.not.by(n)};w.increases=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,w.increases,!0).to.increase(e,r)};w.increasesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,w.increasesBy,!0).to.increase(e,r).by(n)};w.doesNotIncrease=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,w.doesNotIncrease,!0).to.not.increase(e,r)};w.increasesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,w.increasesButNotBy,!0).to.increase(e,r).but.not.by(n)};w.decreases=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,w.decreases,!0).to.decrease(e,r)};w.decreasesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,w.decreasesBy,!0).to.decrease(e,r).by(n)};w.doesNotDecrease=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,w.doesNotDecrease,!0).to.not.decrease(e,r)};w.doesNotDecreaseBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);return new _(t,i,w.doesNotDecreaseBy,!0).to.not.decrease(e,r).by(n)};w.decreasesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,w.decreasesButNotBy,!0).to.decrease(e,r).but.not.by(n)};w.ifError=function(t){if(t)throw t};w.isExtensible=function(t,e){new _(t,e,w.isExtensible,!0).to.be.extensible};w.isNotExtensible=function(t,e){new _(t,e,w.isNotExtensible,!0).to.not.be.extensible};w.isSealed=function(t,e){new _(t,e,w.isSealed,!0).to.be.sealed};w.isNotSealed=function(t,e){new _(t,e,w.isNotSealed,!0).to.not.be.sealed};w.isFrozen=function(t,e){new _(t,e,w.isFrozen,!0).to.be.frozen};w.isNotFrozen=function(t,e){new _(t,e,w.isNotFrozen,!0).to.not.be.frozen};w.isEmpty=function(t,e){new _(t,e,w.isEmpty,!0).to.be.empty};w.isNotEmpty=function(t,e){new _(t,e,w.isNotEmpty,!0).to.not.be.empty};C(function t(e,r){return w[r]=w[e],t},"alias")("isOk","ok")("isNotOk","notOk")("throws","throw")("throws","Throw")("isExtensible","extensible")("isNotExtensible","notExtensible")("isSealed","sealed")("isNotSealed","notSealed")("isFrozen","frozen")("isNotFrozen","notFrozen")("isEmpty","empty")("isNotEmpty","notEmpty")("isCallable","isFunction")("isNotCallable","isNotFunction");var $C=[];function _X(t){let e={AssertionError:Ke,util:My,config:Cr,expect:Ly,assert:w,Assertion:_,...F1};return~$C.indexOf(t)||(t(e,My),$C.push(t)),e}C(_X,"use");var zp=class{constructor(e,r,n){this._lineNumber=e,this._text=r,this._isLastLine=n}get lineNumber(){return this._lineNumber}get text(){return this._text}get range(){return new j(this._lineNumber,0,this._lineNumber,this._text.length)}get rangeIncludingLineBreak(){return this._isLastLine?this.range:new j(this._lineNumber,0,this._lineNumber+1,0)}get rangeTrimmed(){let e=/^(\s*)/.exec(this._text)[1].length;if(e===this._text.length)return;let r=this.text.trimEnd().length;return new j(this._lineNumber,e,this._lineNumber,r)}get isEmptyOrWhitespace(){return this.rangeTrimmed==null}};var I1=br(require("node:path"),1),Ky=class{get uri(){return this._uri}get filename(){return I1.default.basename(this._uri.path)}get languageId(){return this._languageId}get version(){return this._version}get lineCount(){return this._lineCount}get range(){let{end:e}=this.lineAt(this.lineCount-1).range;return new j(0,0,e.line,e.character)}get eol(){return this._eol===`
`?"LF":"CRLF"}constructor(e,r,n,i,o){this._uri=e,this._languageId=r,this._version=n,this._eol=i,this._lines=o,this._lineCount=o.length,this._lineStarts=null,this._cachedTextValue=null}update(e){this._lines=e,this._lineCount=e.length,this._lineStarts=null,this._cachedTextValue=null}lineAt(e){let r;if(e instanceof fe?r=e.line:typeof e=="number"&&(r=e),typeof r!="number"||r<0||Math.floor(r)!==r)throw new Error("Illegal value for `line`");return r=Math.min(r,this._lines.length-1),new zp(r,this._lines[r],r===this._lines.length-1)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.line-1)+e.character}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();let r=this._lineStarts.getIndexOf(e),n=this._lines[r.index].length;return new fe(r.index,Math.min(r.remainder,n))}getText(e){if(e===void 0)return this._cachedTextValue==null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue;if(e=this._validateRange(e),e.isEmpty)return"";if(e.isSingleLine)return this._lines[e.start.line].substring(e.start.character,e.end.character);let r=this._eol,n=e.start.line,i=e.end.line,o=[];o.push(this._lines[n].substring(e.start.character));for(let s=n+1;s<i;s++)o.push(this._lines[s]);return o.push(this._lines[i].substring(0,e.end.character)),o.join(r)}_validateRange(e){if(!(e instanceof j))throw new Error("Invalid argument");let r=this._validatePosition(e.start),n=this._validatePosition(e.end);return r===e.start&&n===e.end?e:new j(r.line,r.character,n.line,n.character)}_validatePosition(e){if(!(e instanceof fe))throw new Error("Invalid argument");if(this._lines.length===0)return e.with(0,0);let{line:r,character:n}=e,i=!1;if(r<0)r=0,n=0,i=!0;else if(r>=this._lines.length)r=this._lines.length-1,n=this._lines[r].length,i=!0;else{let o=this._lines[r].length;n<0?(n=0,i=!0):n>o&&(n=o,i=!0)}return i?new fe(r,n):e}_ensureLineStarts(){if(!this._lineStarts){let e=this._eol.length,r=this._lines.length,n=new Uint32Array(r);for(let i=0;i<r;i++)n[i]=this._lines[i].length+e;this._lineStarts=new Nw(n)}}};function kX(t){if(t<0)return 0;let e=4294967295;return t>e?e:t|0}var Nw=class{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}getCount(){return this.values.length}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=kX(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let r=this.prefixSumValidIndex[0]+1;r===0&&(this.prefixSum[0]=this.values[0],r++),e>=this.values.length&&(e=this.values.length-1);for(let n=r;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let r=0,n=this.values.length-1,i=0,o=0,s=0;for(;r<=n;)if(i=r+(n-r)/2|0,o=this.prefixSum[i],s=o-this.values[i],e<s)n=i-1;else if(e>=o)r=i+1;else break;return new Ow(i,e-s)}},Ow=class{constructor(e,r){this.index=e;this.remainder=r;this._prefixSumIndexOfResultBrand=void 0;this.index=e,this.remainder=r}};var Qy=class{constructor(e){this.client=e;this.cursorlessVersion="0.0.0";this.workspaceFolders=void 0;this.disposables=[];this.quickPickReturnValue=void 0;this.onDidCloseTextDocument=Gp;this.onDidChangeActiveTextEditor=Gp;this.onDidChangeVisibleTextEditors=Gp;this.onDidChangeTextEditorSelection=Gp;this.onDidChangeTextEditorVisibleRanges=Gp;this.configuration=new Sp,this.keyValueStore=new vp,this.messages=new bp,this.clipboard=new xp(this.client),this.capabilities=new cy,this.editorMap=new Map,this.documentMap=new Map,this.activeWindow=void 0,this.activeBuffer=void 0}async init(){let e=await xI(this.client);this.assetsRoot_=Lw.default.join(e,"assets"),this.cursorlessNeovimPath=Lw.default.join(e,"node","cursorless-neovim")}async showQuickPick(e,r){throw Error("showQuickPick Not implemented")}async setHighlightRanges(e,r,n){throw Error("setHighlightRanges Not implemented")}async flashRanges(e){console.debug("flashRanges Not implemented")}get assetsRoot(){if(this.assetsRoot_==null)throw Error("Field `assetsRoot` has not yet been mocked");return this.assetsRoot_}get runMode(){return CC()}get activeTextEditor(){return this.getActiveTextEditor()}get activeEditableTextEditor(){return this.getActiveTextEditor()}getActiveTextEditor(){let e=this.activeWindow?this.getTextEditor(this.activeWindow):void 0;return e===void 0&&console.debug("getActiveTextEditor: editor is undefined"),e}getTextEditor(e){for(let[r,n]of this.editorMap)if(r.id===e.id)return n}getTextDocument(e){for(let[r,n]of this.documentMap)if(r.id===e.id)return n}get visibleTextEditors(){return Array.from(this.editorMap.values())}get visibleNotebookEditors(){return[]}getEditableTextEditor(e){return e}async findInDocument(e,r){throw Error("findInDocument Not implemented")}async findInWorkspace(e){throw Error("findInWorkspace Not implemented")}async openTextDocument(e){throw Error("openTextDocument Not implemented")}async openUntitledTextDocument(e){throw Error("openUntitledTextDocument Not implemented")}async showInputBox(e){throw Error("TextDocumentChangeEvent Not implemented")}async executeCommand(e,...r){throw new Error("executeCommand Method not implemented.")}onDidChangeTextDocument(e){return PI(e)}onDidOpenTextDocument(e,r,n){return AI(e,r,n)}async updateTextEditor(e=!1){let r=await this.client.window,n=await r.buffer,i=await n.lines,o=i;i.length>=30&&(o=i.slice(0,15).concat(["..."]).concat(i.slice(-15))),console.debug(`updateTextEditor(): window:${r.id}, buffer:${n.id}, lines=${JSON.stringify(o)}`);let s,l;e?(s=[],l=[]):(s=await ay(r,this.client),l=await yI(r,this.client,i));let p=this.toNeovimEditor(r,n,i,l,s);return Xr().emitEvent("onDidOpenTextDocument",p.document),p}toNeovimEditor(e,r,n,i,o){let s=this.getTextDocument(r),l=this.getTextEditor(e);return s?(console.debug(`toNeovimEditor(): updating document: buffer=${r.id}`),s.update(n)):(console.debug(`toNeovimEditor(): creating new document: buffer=${r.id}`),s=new Ky(CI.parse(`neovim://${r.id}`),"plaintext",1,`
`,n),this.documentMap.set(r,s)),l?(console.debug(`toNeovimEditor(): updating editor: window=${e.id}`),l.updateDocument(i,o,s)):(console.debug(`toNeovimEditor(): creating new editor: window=${e.id}`),l=new py(wA(),this.client,this,e,s,i,o),this.editorMap.set(e,l)),this.activeBuffer=r,this.activeWindow=e,this.activeTextEditor}handleCommandError(e){wI(this.client,e.message)}disposeOnExit(...e){return this.disposables.push(...e),()=>(0,C1.pull)(this.disposables,...e)}};function Gp(){return{dispose(){}}}var Zy=class{constructor(e){this.client=e;this.signals={prePhrase:{getVersion:async()=>null}}}async getFocusedElementType(){let e=await this.client.mode;return e.mode==="t"||e.mode==="nt"?"terminal":"textEditor"}};var AX=BigInt(1e9);function N1(t,e=BigInt(1e6)){return Number(t*e/AX)/Number(e)}async function Yy(t,e=[],r=[],n,i,o,s,l){let p={documentContents:n.document.getText(),selections:n.selections.map(zk)};o!=null&&(p.marks=o),l!=null&&(p.metadata=l),e.includes("clipboard")||(p.clipboard=await i.clipboard.readText()),e.includes("visibleRanges")||(p.visibleRanges=n.visibleRanges.map(ll));for(let u of Ss){let m=t?.get(u),d=`${u}Mark`;m!=null&&!e.includes(d)&&(p[d]=m.map(g=>g.toPlainObject()))}if(r.includes("timeOffsetSeconds")){let u=s?.startTimestamp;if(u==null)throw new Error("No start timestamp provided but time offset was requested");let m=process.hrtime.bigint()-u;p.timeOffsetSeconds=N1(m)}return p}var MX=br(Dl(),1);function O1(t,e,r,n,i,o,s,l){return{commandServerApi:t,ide:i,neovimIDE:n,injectIde:s,scopeProvider:o,takeSnapshot(p,u,m,d,g){return Yy(e,p,u,m,d,g,void 0,void 0)},setStoredTarget(p,u,m){e.set(u,m?.map(d=>mI(p,d)))},hatTokenMap:r,runIntegrationTests:l}}async function L1(t,e,r,n){let i={[TT]:async(...o)=>{(await t.mode).mode==="t"&&vI(t);try{await e.updateTextEditor();let l=await r.runCommandSafe(...o),p=Bf(o);if(await n.getFocusedElementType()==="terminal"&&oa(p)){let m=l;"fallback"in m&&m.fallback.action==="insert"&&bI(t)}return l}catch(l){if(e.runMode!=="test"){let p=l;console.error(p.stack),e.handleCommandError(p)}throw l}},"cursorless.repeatPreviousCommand":De,"cursorless.showCheatsheet":De,"cursorless.internal.updateCheatsheetDefaults":De,"cursorless.recordTestCase":De,"cursorless.recordOneTestCaseThenPause":De,"cursorless.pauseRecording":De,"cursorless.resumeRecording":De,"cursorless.takeSnapshot":De,"cursorless.recordScopeTests.showUnimplementedFacets":De,"cursorless.recordScopeTests.saveActiveDocument":De,"cursorless.showQuickPick":De,"cursorless.showDocumentation":De,"cursorless.showInstallationDependencies":De,"cursorless.migrateSnippets":De,"cursorless.private.logQuickActions":De,"cursorless.toggleDecorations":De,"cursorless.recomputeDecorationStyles":De,"cursorless.showScopeVisualizer":De,"cursorless.hideScopeVisualizer":De,"cursorless.analyzeCommandHistory":De,"cursorless.keyboard.escape":De,"cursorless.keyboard.targeted.targetHat":De,"cursorless.keyboard.targeted.targetScope":De,"cursorless.keyboard.targeted.targetSelection":De,"cursorless.keyboard.targeted.clearTarget":De,"cursorless.keyboard.targeted.runActionOnTarget":De,"cursorless.keyboard.modal.modeOn":De,"cursorless.keyboard.modal.modeOff":De,"cursorless.keyboard.modal.modeToggle":De,"cursorless.keyboard.undoTarget":De,"cursorless.keyboard.redoTarget":De,"cursorless.tutorial.start":De,"cursorless.tutorial.next":De,"cursorless.tutorial.previous":De,"cursorless.tutorial.restart":De,"cursorless.tutorial.resume":De,"cursorless.tutorial.list":De,"cursorless.documentationOpened":De};Object.entries(i).map(([o,s])=>Xr().registerCommand(o,s))}async function De(...t){console.debug(`dummyCommandHandler(): args=${t}`)}async function U1(t){let e=t.nvim,r=new Qy(e);await r.init();let n=r.runMode==="production"?r:new Af(r,new Rf,r.runMode==="test",void 0),i=new Wu,o=new Zy(e),s=r.runMode==="test"?i:o,{commandApi:l,storedTargets:p,hatTokenMap:u,scopeProvider:m,injectIde:d,runIntegrationTests:g}=await fI({ide:n,commandServerApi:s});await L1(e,r,l,s);let x={testHelpers:r.runMode==="test"?O1(i,p,u,r,n,m,d,g):void 0};Xr().registerExtensionApi(hI,x),console.log("activate(): Cursorless extension loaded")}function H1(t){t.setOptions({dev:!1}),t.registerFunction("CursorlessLoadExtension",async()=>await DX(t),{sync:!1})}async function DX(t){console.log("==============================================================================================="),console.log("loadExtension(cursorless-neovim): start"),await U1(t),console.log("loadExtension(cursorless-neovim): done")}
/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)

itertools/dist/index.js:
  (* istanbul ignore else -- @preserve *)
  (* istanbul ignore if -- @preserve *)

chai/chai.js:
  (*!
   * Chai - flag utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - test utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - expectTypes utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getActual utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - message composition utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - transferFlags utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * http://chaijs.com
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - isProxyEnabled helper
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addLengthGuard utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getProperties utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - proxify utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addChainingMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteChainableMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - compareByInspect utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getOwnEnumerablePropertySymbols utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getOwnEnumerableProperties utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - isNaN utility
   * Copyright(c) 2012-2015 Sakthipriyan Vairamani <thechargingvolcano@gmail.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*! Bundled license information:
  
  deep-eql/index.js:
    (*!
     * deep-eql
     * Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>
     * MIT Licensed
     *)
    (*!
     * Check to see if the MemoizeMap has recorded a result of the two operands
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {MemoizeMap} memoizeMap
     * @returns {Boolean|null} result
    *)
    (*!
     * Set the result of the equality into the MemoizeMap
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {MemoizeMap} memoizeMap
     * @param {Boolean} result
    *)
    (*!
     * Primary Export
     *)
    (*!
     * The main logic of the `deepEqual` function.
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Object} [options] (optional) Additional options
     * @param {Array} [options.comparator] (optional) Override default algorithm, determining custom equality.
     * @param {Array} [options.memoize] (optional) Provide a custom memoization object which will cache the results of
        complex objects for a speed boost. By passing `false` you can disable memoization, but this will cause circular
        references to blow the stack.
     * @return {Boolean} equal match
    *)
    (*!
     * Compare two Regular Expressions for equality.
     *
     * @param {RegExp} leftHandOperand
     * @param {RegExp} rightHandOperand
     * @return {Boolean} result
     *)
    (*!
     * Compare two Sets/Maps for equality. Faster than other equality functions.
     *
     * @param {Set} leftHandOperand
     * @param {Set} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Simple equality for flat iterable objects such as Arrays, TypedArrays or Node.js buffers.
     *
     * @param {Iterable} leftHandOperand
     * @param {Iterable} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Simple equality for generator objects such as those returned by generator functions.
     *
     * @param {Iterable} leftHandOperand
     * @param {Iterable} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Determine if the given object has an @@iterator function.
     *
     * @param {Object} target
     * @return {Boolean} `true` if the object has an @@iterator function.
     *)
    (*!
     * Gets all iterator entries from the given Object. If the Object has no @@iterator function, returns an empty array.
     * This will consume the iterator - which could have side effects depending on the @@iterator implementation.
     *
     * @param {Object} target
     * @returns {Array} an array of entries from the @@iterator function
     *)
    (*!
     * Gets all entries from a Generator. This will consume the generator - which could have side effects.
     *
     * @param {Generator} target
     * @returns {Array} an array of entries from the Generator.
     *)
    (*!
     * Gets all own and inherited enumerable keys from a target.
     *
     * @param {Object} target
     * @returns {Array} an array of own and inherited enumerable keys from the target.
     *)
    (*!
     * Determines if two objects have matching values, given a set of keys. Defers to deepEqual for the equality check of
     * each key. If any value of the given key is not equal, the function will return false (early).
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Array} keys An array of keys to compare the values of leftHandOperand and rightHandOperand against
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Recursively check the equality of two Objects. Once basic sameness has been established it will defer to `deepEqual`
     * for each enumerable key in the object.
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Returns true if the argument is a primitive.
     *
     * This intentionally returns true for all objects that can be compared by reference,
     * including functions and symbols.
     *
     * @param {Mixed} value
     * @return {Boolean} result
     *)
  *)
*/
