"use strict";var dB=Object.create;var kp=Object.defineProperty;var gB=Object.getOwnPropertyDescriptor;var hB=Object.getOwnPropertyNames;var yB=Object.getPrototypeOf,TB=Object.prototype.hasOwnProperty;var Ya=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),U_=(t,e)=>{for(var r in e)kp(t,r,{get:e[r],enumerable:!0})},H_=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of hB(e))!TB.call(t,i)&&i!==r&&kp(t,i,{get:()=>e[i],enumerable:!(n=gB(e,i))||n.enumerable});return t};var Hr=(t,e,r)=>(r=t!=null?dB(yB(t)):{},H_(e||!t||!t.__esModule?kp(r,"default",{value:t,enumerable:!0}):r,t)),xB=t=>H_(kp({},"__esModule",{value:!0}),t);var PA=Ya((AA,Wm)=>{(function(t,e){typeof Wm=="object"&&Wm.exports?Wm.exports=e():t.nearley=e()})(AA,function(){function t(u,m,d){return this.id=++t.highestId,this.name=u,this.symbols=m,this.postprocess=d,this}t.highestId=0,t.prototype.toString=function(u){var m=typeof u>"u"?this.symbols.map(l).join(" "):this.symbols.slice(0,u).map(l).join(" ")+" \u25CF "+this.symbols.slice(u).map(l).join(" ");return this.name+" \u2192 "+m};function e(u,m,d,g){this.rule=u,this.dot=m,this.reference=d,this.data=[],this.wantedBy=g,this.isComplete=this.dot===u.symbols.length}e.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},e.prototype.nextState=function(u){var m=new e(this.rule,this.dot+1,this.reference,this.wantedBy);return m.left=this,m.right=u,m.isComplete&&(m.data=m.build(),m.right=void 0),m},e.prototype.build=function(){var u=[],m=this;do u.push(m.right.data),m=m.left;while(m.left);return u.reverse(),u},e.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,o.fail))};function r(u,m){this.grammar=u,this.index=m,this.states=[],this.wants={},this.scannable=[],this.completed={}}r.prototype.process=function(u){for(var m=this.states,d=this.wants,g=this.completed,y=0;y<m.length;y++){var x=m[y];if(x.isComplete){if(x.finish(),x.data!==o.fail){for(var w=x.wantedBy,E=w.length;E--;){var U=w[E];this.complete(U,x)}if(x.reference===this.index){var V=x.rule.name;(this.completed[V]=this.completed[V]||[]).push(x)}}}else{var V=x.rule.symbols[x.dot];if(typeof V!="string"){this.scannable.push(x);continue}if(d[V]){if(d[V].push(x),g.hasOwnProperty(V))for(var z=g[V],E=0;E<z.length;E++){var ie=z[E];this.complete(x,ie)}}else d[V]=[x],this.predict(V)}}},r.prototype.predict=function(u){for(var m=this.grammar.byName[u]||[],d=0;d<m.length;d++){var g=m[d],y=this.wants[u],x=new e(g,0,this.index,y);this.states.push(x)}},r.prototype.complete=function(u,m){var d=u.nextState(m);this.states.push(d)};function n(u,m){this.rules=u,this.start=m||this.rules[0].name;var d=this.byName={};this.rules.forEach(function(g){d.hasOwnProperty(g.name)||(d[g.name]=[]),d[g.name].push(g)})}n.fromCompiled=function(g,m){var d=g.Lexer;g.ParserStart&&(m=g.ParserStart,g=g.ParserRules);var g=g.map(function(x){return new t(x.name,x.symbols,x.postprocess)}),y=new n(g,m);return y.lexer=d,y};function i(){this.reset("")}i.prototype.reset=function(u,m){this.buffer=u,this.index=0,this.line=m?m.line:1,this.lastLineBreak=m?-m.col:0},i.prototype.next=function(){if(this.index<this.buffer.length){var u=this.buffer[this.index++];return u===`
`&&(this.line+=1,this.lastLineBreak=this.index),{value:u}}},i.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},i.prototype.formatError=function(u,m){var d=this.buffer;if(typeof d=="string"){var g=d.split(`
`).slice(Math.max(0,this.line-5),this.line),y=d.indexOf(`
`,this.index);y===-1&&(y=d.length);var x=this.index-this.lastLineBreak,w=String(this.line).length;return m+=" at line "+this.line+" col "+x+`:

`,m+=g.map(function(U,V){return E(this.line-g.length+V+1,w)+" "+U},this).join(`
`),m+=`
`+E("",w+x)+`^
`,m}else return m+" at index "+(this.index-1);function E(U,V){var z=String(U);return Array(V-z.length+1).join(" ")+z}};function o(u,m,d){if(u instanceof n)var g=u,d=m;else var g=n.fromCompiled(u,m);this.grammar=g,this.options={keepHistory:!1,lexer:g.lexer||new i};for(var y in d||{})this.options[y]=d[y];this.lexer=this.options.lexer,this.lexerState=void 0;var x=new r(g,0),w=this.table=[x];x.wants[g.start]=[],x.predict(g.start),x.process(),this.current=0}o.fail={},o.prototype.feed=function(u){var m=this.lexer;m.reset(u,this.lexerState);for(var d;;){try{if(d=m.next(),!d)break}catch(ge){var w=new r(this.grammar,this.current+1);this.table.push(w);var g=new Error(this.reportLexerError(ge));throw g.offset=this.current,g.token=ge.token,g}var y=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var x=this.current+1,w=new r(this.grammar,x);this.table.push(w);for(var E=d.text!==void 0?d.text:d.value,U=m.constructor===i?d.value:m.transform?.(d)??d,V=y.scannable,z=V.length;z--;){var ie=V[z],le=ie.rule.symbols[ie.dot];if(le.test?le.test(U):le.type?le.type===d.type:le.literal===E){var ue=ie.nextState({data:U,token:d,isToken:!0,reference:x-1});w.states.push(ue)}}if(w.process(),w.states.length===0){var g=new Error(this.reportError(d));throw g.offset=this.current,g.token=d,g}this.options.keepHistory&&(y.lexerState=m.save()),this.current++}return y&&(this.lexerState=m.save()),this.results=this.finish(),this},o.prototype.reportLexerError=function(u){var m,d,g=u.token;return g?(m="input "+JSON.stringify(g.text[0])+" (lexer error)",d=this.lexer.formatError(g,"Syntax error")):(m="input (lexer error)",d=u.message),this.reportErrorCommon(d,m)},o.prototype.reportError=function(u){var m=(u.type?u.type+" token: ":"")+JSON.stringify(u.value!==void 0?u.value:u),d=this.lexer.formatError(u,"Syntax error");return this.reportErrorCommon(d,m)},o.prototype.reportErrorCommon=function(u,m){var d=[];d.push(u);var g=this.table.length-2,y=this.table[g],x=y.states.filter(function(E){var U=E.rule.symbols[E.dot];return U&&typeof U!="string"});if(x.length===0)d.push("Unexpected "+m+`. I did not expect any more input. Here is the state of my parse table:
`),this.displayStateStack(y.states,d);else{d.push("Unexpected "+m+`. Instead, I was expecting to see one of the following:
`);var w=x.map(function(E){return this.buildFirstStateStack(E,[])||[E]},this);w.forEach(function(E){var U=E[0],V=U.rule.symbols[U.dot],z=this.getSymbolDisplay(V);d.push("A "+z+" based on:"),this.displayStateStack(E,d)},this)}return d.push(""),d.join(`
`)},o.prototype.displayStateStack=function(u,m){for(var d,g=0,y=0;y<u.length;y++){var x=u[y],w=x.rule.toString(x.dot);w===d?g++:(g>0&&m.push("    ^ "+g+" more lines identical to this"),g=0,m.push("    "+w)),d=w}},o.prototype.getSymbolDisplay=function(u){return s(u)},o.prototype.buildFirstStateStack=function(u,m){if(m.indexOf(u)!==-1)return null;if(u.wantedBy.length===0)return[u];var d=u.wantedBy[0],g=[u].concat(m),y=this.buildFirstStateStack(d,g);return y===null?null:[u].concat(y)},o.prototype.save=function(){var u=this.table[this.current];return u.lexerState=this.lexerState,u},o.prototype.restore=function(u){var m=u.index;this.current=m,this.table[m]=u,this.table.splice(m+1),this.lexerState=u.lexerState,this.results=this.finish()},o.prototype.rewind=function(u){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[u])},o.prototype.finish=function(){var u=[],m=this.grammar.start,d=this.table[this.table.length-1];return d.states.forEach(function(g){g.rule.name===m&&g.dot===g.rule.symbols.length&&g.reference===0&&g.data!==o.fail&&u.push(g)}),u.map(function(g){return g.data})};function s(u){var m=typeof u;if(m==="string")return u;if(m==="object"){if(u.literal)return JSON.stringify(u.literal);if(u instanceof RegExp)return"character matching "+u;if(u.type)return u.type+" token";if(u.test)return"token matching "+String(u.test);throw new Error("Unknown symbol type: "+u)}}function l(u){var m=typeof u;if(m==="string")return u;if(m==="object"){if(u.literal)return JSON.stringify(u.literal);if(u instanceof RegExp)return u.toString();if(u.type)return"%"+u.type;if(u.test)return"<"+String(u.test)+">";throw new Error("Unknown symbol type: "+u)}}return{Parser:o,Grammar:n,Rule:t}})});var CA=Ya((IA,zm)=>{(function(t,e){typeof define=="function"&&define.amd?define([],e):typeof zm=="object"&&zm.exports?zm.exports=e():t.moo=e()})(IA,function(){"use strict";var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,r=typeof new RegExp().sticky=="boolean";function n(H){return H&&e.call(H)==="[object RegExp]"}function i(H){return H&&typeof H=="object"&&!n(H)&&!Array.isArray(H)}function o(H){return H.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function s(H){var C=new RegExp("|"+H);return C.exec("").length-1}function l(H){return"("+H+")"}function u(H){if(!H.length)return"(?!)";var C=H.map(function(A){return"(?:"+A+")"}).join("|");return"(?:"+C+")"}function m(H){if(typeof H=="string")return"(?:"+o(H)+")";if(n(H)){if(H.ignoreCase)throw new Error("RegExp /i flag not allowed");if(H.global)throw new Error("RegExp /g flag is implied");if(H.sticky)throw new Error("RegExp /y flag is implied");if(H.multiline)throw new Error("RegExp /m flag is implied");return H.source}else throw new Error("Not a pattern: "+H)}function d(H,C){return H.length>C?H:Array(C-H.length+1).join(" ")+H}function g(H,C){for(var A=H.length,q=0;;){var Z=H.lastIndexOf(`
`,A-1);if(Z===-1||(q++,A=Z,q===C)||A===0)break}var F=q<C?0:A+1;return H.substring(F).split(`
`)}function y(H){for(var C=Object.getOwnPropertyNames(H),A=[],q=0;q<C.length;q++){var Z=C[q],F=H[Z],N=[].concat(F);if(Z==="include"){for(var j=0;j<N.length;j++)A.push({include:N[j]});continue}var X=[];N.forEach(function(Q){i(Q)?(X.length&&A.push(w(Z,X)),A.push(w(Z,Q)),X=[]):X.push(Q)}),X.length&&A.push(w(Z,X))}return A}function x(H){for(var C=[],A=0;A<H.length;A++){var q=H[A];if(q.include){for(var Z=[].concat(q.include),F=0;F<Z.length;F++)C.push({include:Z[F]});continue}if(!q.type)throw new Error("Rule has no type: "+JSON.stringify(q));C.push(w(q.type,q))}return C}function w(H,C){if(i(C)||(C={match:C}),C.include)throw new Error("Matching rules cannot also include states");var A={defaultType:H,lineBreaks:!!C.error||!!C.fallback,pop:!1,next:null,push:null,error:!1,fallback:!1,value:null,type:null,shouldThrow:!1};for(var q in C)t.call(C,q)&&(A[q]=C[q]);if(typeof A.type=="string"&&H!==A.type)throw new Error("Type transform cannot be a string (type '"+A.type+"' for token '"+H+"')");var Z=A.match;return A.match=Array.isArray(Z)?Z:Z?[Z]:[],A.match.sort(function(F,N){return n(F)&&n(N)?0:n(N)?-1:n(F)?1:N.length-F.length}),A}function E(H){return Array.isArray(H)?x(H):y(H)}var U=w("error",{lineBreaks:!0,shouldThrow:!0});function V(H,C){for(var A=null,q=Object.create(null),Z=!0,F=null,N=[],j=[],X=0;X<H.length;X++)H[X].fallback&&(Z=!1);for(var X=0;X<H.length;X++){var Q=H[X];if(Q.include)throw new Error("Inheritance is not allowed in stateless lexers");if(Q.error||Q.fallback){if(A)throw!Q.fallback==!A.fallback?new Error("Multiple "+(Q.fallback?"fallback":"error")+" rules not allowed (for token '"+Q.defaultType+"')"):new Error("fallback and error are mutually exclusive (for token '"+Q.defaultType+"')");A=Q}var re=Q.match.slice();if(Z)for(;re.length&&typeof re[0]=="string"&&re[0].length===1;){var we=re.shift();q[we.charCodeAt(0)]=Q}if(Q.pop||Q.push||Q.next){if(!C)throw new Error("State-switching options are not allowed in stateless lexers (for token '"+Q.defaultType+"')");if(Q.fallback)throw new Error("State-switching options are not allowed on fallback tokens (for token '"+Q.defaultType+"')")}if(re.length!==0){Z=!1,N.push(Q);for(var _e=0;_e<re.length;_e++){var Qe=re[_e];if(n(Qe)){if(F===null)F=Qe.unicode;else if(F!==Qe.unicode&&Q.fallback===!1)throw new Error("If one rule is /u then all must be")}}var Ue=u(re.map(m)),ht=new RegExp(Ue);if(ht.test(""))throw new Error("RegExp matches empty string: "+ht);var $t=s(Ue);if($t>0)throw new Error("RegExp has capture groups: "+ht+`
Use (?: \u2026 ) instead`);if(!Q.lineBreaks&&ht.test(`
`))throw new Error("Rule should declare lineBreaks: "+ht);j.push(l(Ue))}}var Xr=A&&A.fallback,Fo=r&&!Xr?"ym":"gm",fi=r||Xr?"":"|";F===!0&&(Fo+="u");var Ca=new RegExp(u(j)+fi,Fo);return{regexp:Ca,groups:N,fast:q,error:A||U}}function z(H){var C=V(E(H));return new ge({start:C},"start")}function ie(H,C,A){var q=H&&(H.push||H.next);if(q&&!A[q])throw new Error("Missing state '"+q+"' (in token '"+H.defaultType+"' of state '"+C+"')");if(H&&H.pop&&+H.pop!=1)throw new Error("pop must be 1 (in token '"+H.defaultType+"' of state '"+C+"')")}function le(H,C){var A=H.$all?E(H.$all):[];delete H.$all;var q=Object.getOwnPropertyNames(H);C||(C=q[0]);for(var Z=Object.create(null),F=0;F<q.length;F++){var N=q[F];Z[N]=E(H[N]).concat(A)}for(var F=0;F<q.length;F++)for(var N=q[F],j=Z[N],X=Object.create(null),Q=0;Q<j.length;Q++){var re=j[Q];if(re.include){var we=[Q,1];if(re.include!==N&&!X[re.include]){X[re.include]=!0;var _e=Z[re.include];if(!_e)throw new Error("Cannot include nonexistent state '"+re.include+"' (in state '"+N+"')");for(var Qe=0;Qe<_e.length;Qe++){var Ue=_e[Qe];j.indexOf(Ue)===-1&&we.push(Ue)}}j.splice.apply(j,we),Q--}}for(var ht=Object.create(null),F=0;F<q.length;F++){var N=q[F];ht[N]=V(Z[N],!0)}for(var F=0;F<q.length;F++){for(var $t=q[F],Xr=ht[$t],Fo=Xr.groups,Q=0;Q<Fo.length;Q++)ie(Fo[Q],$t,ht);for(var fi=Object.getOwnPropertyNames(Xr.fast),Q=0;Q<fi.length;Q++)ie(Xr.fast[fi[Q]],$t,ht)}return new ge(ht,C)}function ue(H){for(var C=typeof Map<"u",A=C?new Map:Object.create(null),q=Object.getOwnPropertyNames(H),Z=0;Z<q.length;Z++){var F=q[Z],N=H[F],j=Array.isArray(N)?N:[N];j.forEach(function(X){if(typeof X!="string")throw new Error("keyword must be string (in keyword '"+F+"')");C?A.set(X,F):A[X]=F})}return function(X){return C?A.get(X):A[X]}}var ge=function(H,C){this.startState=C,this.states=H,this.buffer="",this.stack=[],this.reset()};ge.prototype.reset=function(H,C){return this.buffer=H||"",this.index=0,this.line=C?C.line:1,this.col=C?C.col:1,this.queuedToken=C?C.queuedToken:null,this.queuedText=C?C.queuedText:"",this.queuedThrow=C?C.queuedThrow:null,this.setState(C?C.state:this.startState),this.stack=C&&C.stack?C.stack.slice():[],this},ge.prototype.save=function(){return{line:this.line,col:this.col,state:this.state,stack:this.stack.slice(),queuedToken:this.queuedToken,queuedText:this.queuedText,queuedThrow:this.queuedThrow}},ge.prototype.setState=function(H){if(!(!H||this.state===H)){this.state=H;var C=this.states[H];this.groups=C.groups,this.error=C.error,this.re=C.regexp,this.fast=C.fast}},ge.prototype.popState=function(){this.setState(this.stack.pop())},ge.prototype.pushState=function(H){this.stack.push(this.state),this.setState(H)};var ut=r?function(H,C){return H.exec(C)}:function(H,C){var A=H.exec(C);return A[0].length===0?null:A};ge.prototype._getGroup=function(H){for(var C=this.groups.length,A=0;A<C;A++)if(H[A+1]!==void 0)return this.groups[A];throw new Error("Cannot find token type for matched text")};function Wt(){return this.value}if(ge.prototype.next=function(){var H=this.index;if(this.queuedGroup){var C=this._token(this.queuedGroup,this.queuedText,H);return this.queuedGroup=null,this.queuedText="",C}var A=this.buffer;if(H!==A.length){var N=this.fast[A.charCodeAt(H)];if(N)return this._token(N,A.charAt(H),H);var q=this.re;q.lastIndex=H;var Z=ut(q,A),F=this.error;if(Z==null)return this._token(F,A.slice(H,A.length),H);var N=this._getGroup(Z),j=Z[0];return F.fallback&&Z.index!==H?(this.queuedGroup=N,this.queuedText=j,this._token(F,A.slice(H,Z.index),H)):this._token(N,j,H)}},ge.prototype._token=function(H,C,A){var q=0;if(H.lineBreaks){var Z=/\n/g,F=1;if(C===`
`)q=1;else for(;Z.exec(C);)q++,F=Z.lastIndex}var N={type:typeof H.type=="function"&&H.type(C)||H.defaultType,value:typeof H.value=="function"?H.value(C):C,text:C,toString:Wt,offset:A,lineBreaks:q,line:this.line,col:this.col},j=C.length;if(this.index+=j,this.line+=q,q!==0?this.col=j-F+1:this.col+=j,H.shouldThrow){var X=new Error(this.formatError(N,"invalid syntax"));throw X}return H.pop?this.popState():H.push?this.pushState(H.push):H.next&&this.setState(H.next),N},typeof Symbol<"u"&&Symbol.iterator){var gt=function(H){this.lexer=H};gt.prototype.next=function(){var H=this.lexer.next();return{value:H,done:!H}},gt.prototype[Symbol.iterator]=function(){return this},ge.prototype[Symbol.iterator]=function(){return new gt(this)}}return ge.prototype.formatError=function(H,C){if(H==null)var A=this.buffer.slice(this.index),H={text:A,offset:this.index,lineBreaks:A.indexOf(`
`)===-1?0:1,line:this.line,col:this.col};var q=2,Z=Math.max(H.line-q,1),F=H.line+q,N=String(F).length,j=g(this.buffer,this.line-H.line+q+1).slice(0,5),X=[];X.push(C+" at line "+H.line+" col "+H.col+":"),X.push("");for(var Q=0;Q<j.length;Q++){var re=j[Q],we=Z+Q;X.push(d(String(we),N)+"  "+re),we===H.line&&X.push(d("",N+H.col+1)+"^")}return X.join(`
`)},ge.prototype.clone=function(){return new ge(this.states,this.state)},ge.prototype.has=function(H){return!0},{compile:z,states:le,error:Object.freeze({error:!0}),fallback:Object.freeze({fallback:!0}),keywords:ue}})});var _l=Ya((Jn,MP)=>{"use strict";Object.defineProperty(Jn,"__esModule",{value:!0});function In(t){return typeof t=="object"&&!("toString"in t)?Object.prototype.toString.call(t).slice(8,-1):t}var o9=typeof process=="object"&&process.env.NODE_ENV==="production";function dn(t,e){if(!t)throw o9?new Error("Invariant failed"):new Error(e())}Jn.invariant=dn;var SS=Object.prototype.hasOwnProperty,a9=Array.prototype.splice,s9=Object.prototype.toString;function la(t){return s9.call(t).slice(8,-1)}var bf=Object.assign||function(t,e){return vS(e).forEach(function(r){SS.call(e,r)&&(t[r]=e[r])}),t},vS=typeof Object.getOwnPropertySymbols=="function"?function(t){return Object.keys(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.keys(t)};function ho(t){return Array.isArray(t)?bf(t.constructor(t.length),t):la(t)==="Map"?new Map(t):la(t)==="Set"?new Set(t):t&&typeof t=="object"?bf(Object.create(Object.getPrototypeOf(t)),t):t}var AP=function(){function t(){this.commands=bf({},c9),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(e,r){return e===r},this.update.newContext=function(){return new t().update}}return Object.defineProperty(t.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(e){this.update.isEquals=e},enumerable:!0,configurable:!0}),t.prototype.extend=function(e,r){this.commands[e]=r},t.prototype.update=function(e,r){var n=this,i=typeof r=="function"?{$apply:r}:r;Array.isArray(e)&&Array.isArray(i)||dn(!Array.isArray(i),function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."}),dn(typeof i=="object"&&i!==null,function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the "+("following commands: "+Object.keys(n.commands).join(", ")+".")});var o=e;return vS(i).forEach(function(s){if(SS.call(n.commands,s)){var l=e===o;o=n.commands[s](i[s],o,i,e),l&&n.isEquals(o,e)&&(o=e)}else{var u=la(e)==="Map"?n.update(e.get(s),i[s]):n.update(e[s],i[s]),m=la(o)==="Map"?o.get(s):o[s];(!n.isEquals(u,m)||typeof u>"u"&&!SS.call(e,s))&&(o===e&&(o=ho(e)),la(o)==="Map"?o.set(s,u):o[s]=u)}}),o},t}();Jn.Context=AP;var c9={$push:function(t,e,r){return RP(e,r,"$push"),t.length?e.concat(t):e},$unshift:function(t,e,r){return RP(e,r,"$unshift"),t.length?t.concat(e):e},$splice:function(t,e,r,n){return l9(e,r),t.forEach(function(i){PP(i),e===n&&i.length&&(e=ho(n)),a9.apply(e,i)}),e},$set:function(t,e,r){return p9(r),t},$toggle:function(t,e){El(t,"$toggle");var r=t.length?ho(e):e;return t.forEach(function(n){r[n]=!e[n]}),r},$unset:function(t,e,r,n){return El(t,"$unset"),t.forEach(function(i){Object.hasOwnProperty.call(e,i)&&(e===n&&(e=ho(n)),delete e[i])}),e},$add:function(t,e,r,n){return kP(e,"$add"),El(t,"$add"),la(e)==="Map"?t.forEach(function(i){var o=i[0],s=i[1];e===n&&e.get(o)!==s&&(e=ho(n)),e.set(o,s)}):t.forEach(function(i){e===n&&!e.has(i)&&(e=ho(n)),e.add(i)}),e},$remove:function(t,e,r,n){return kP(e,"$remove"),El(t,"$remove"),t.forEach(function(i){e===n&&e.has(i)&&(e=ho(n)),e.delete(i)}),e},$merge:function(t,e,r,n){return m9(e,t),vS(t).forEach(function(i){t[i]!==e[i]&&(e===n&&(e=ho(n)),e[i]=t[i])}),e},$apply:function(t,e){return u9(t),t(e)}},bS=new AP;Jn.isEquals=bS.update.isEquals;Jn.extend=bS.extend;Jn.default=bS.update;Jn.default.default=MP.exports=bf(Jn.default,Jn);function RP(t,e,r){dn(Array.isArray(t),function(){return"update(): expected target of "+In(r)+" to be an array; got "+In(t)+"."}),El(e[r],r)}function El(t,e){dn(Array.isArray(t),function(){return"update(): expected spec of "+In(e)+" to be an array; got "+In(t)+". Did you forget to wrap your parameter in an array?"})}function l9(t,e){dn(Array.isArray(t),function(){return"Expected $splice target to be an array; got "+In(t)}),PP(e.$splice)}function PP(t){dn(Array.isArray(t),function(){return"update(): expected spec of $splice to be an array of arrays; got "+In(t)+". Did you forget to wrap your parameters in an array?"})}function u9(t){dn(typeof t=="function",function(){return"update(): expected spec of $apply to be a function; got "+In(t)+"."})}function p9(t){dn(Object.keys(t).length===1,function(){return"Cannot have more than one key in an object with $set"})}function m9(t,e){dn(e&&typeof e=="object",function(){return"update(): $merge expects a spec of type 'object'; got "+In(e)}),dn(t&&typeof t=="object",function(){return"update(): $merge expects a target of type 'object'; got "+In(t)})}function kP(t,e){var r=la(t);dn(r==="Map"||r==="Set",function(){return"update(): "+In(e)+" expects a target of type Set or Map; got "+In(r)})}});var Uv=Ya((mc,lu)=>{(function(){var t,e="4.17.21",r=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",i="Expected a function",o="Invalid `variable` option passed into `_.template`",s="__lodash_hash_undefined__",l=500,u="__lodash_placeholder__",m=1,d=2,g=4,y=1,x=2,w=1,E=2,U=4,V=8,z=16,ie=32,le=64,ue=128,ge=256,ut=512,Wt=30,gt="...",H=800,C=16,A=1,q=2,Z=3,F=1/0,N=9007199254740991,j=17976931348623157e292,X=NaN,Q=4294967295,re=Q-1,we=Q>>>1,_e=[["ary",ue],["bind",w],["bindKey",E],["curry",V],["curryRight",z],["flip",ut],["partial",ie],["partialRight",le],["rearg",ge]],Qe="[object Arguments]",Ue="[object Array]",ht="[object AsyncFunction]",$t="[object Boolean]",Xr="[object Date]",Fo="[object DOMException]",fi="[object Error]",Ca="[object Function]",sw="[object GeneratorFunction]",En="[object Map]",Ac="[object Number]",DI="[object Null]",di="[object Object]",cw="[object Promise]",LI="[object Proxy]",Pc="[object RegExp]",_n="[object Set]",Mc="[object String]",Uu="[object Symbol]",FI="[object Undefined]",Dc="[object WeakMap]",II="[object WeakSet]",Lc="[object ArrayBuffer]",Oa="[object DataView]",Ry="[object Float32Array]",ky="[object Float64Array]",Ay="[object Int8Array]",Py="[object Int16Array]",My="[object Int32Array]",Dy="[object Uint8Array]",Ly="[object Uint8ClampedArray]",Fy="[object Uint16Array]",Iy="[object Uint32Array]",CI=/\b__p \+= '';/g,OI=/\b(__p \+=) '' \+/g,NI=/(__e\(.*?\)|\b__t\)) \+\n'';/g,lw=/&(?:amp|lt|gt|quot|#39);/g,uw=/[&<>"']/g,UI=RegExp(lw.source),HI=RegExp(uw.source),BI=/<%-([\s\S]+?)%>/g,VI=/<%([\s\S]+?)%>/g,pw=/<%=([\s\S]+?)%>/g,WI=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$I=/^\w*$/,jI=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Cy=/[\\^$.*+?()[\]{}|]/g,zI=RegExp(Cy.source),Oy=/^\s+/,qI=/\s/,GI=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,KI=/\{\n\/\* \[wrapped with (.+)\] \*/,QI=/,? & /,YI=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ZI=/[()=,{}\[\]\/\s]/,XI=/\\(\\)?/g,JI=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,mw=/\w*$/,eC=/^[-+]0x[0-9a-f]+$/i,tC=/^0b[01]+$/i,rC=/^\[object .+?Constructor\]$/,nC=/^0o[0-7]+$/i,iC=/^(?:0|[1-9]\d*)$/,oC=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Hu=/($^)/,aC=/['\n\r\u2028\u2029\\]/g,Bu="\\ud800-\\udfff",sC="\\u0300-\\u036f",cC="\\ufe20-\\ufe2f",lC="\\u20d0-\\u20ff",fw=sC+cC+lC,dw="\\u2700-\\u27bf",gw="a-z\\xdf-\\xf6\\xf8-\\xff",uC="\\xac\\xb1\\xd7\\xf7",pC="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",mC="\\u2000-\\u206f",fC=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",hw="A-Z\\xc0-\\xd6\\xd8-\\xde",yw="\\ufe0e\\ufe0f",Tw=uC+pC+mC+fC,Ny="['\u2019]",dC="["+Bu+"]",xw="["+Tw+"]",Vu="["+fw+"]",Sw="\\d+",gC="["+dw+"]",vw="["+gw+"]",bw="[^"+Bu+Tw+Sw+dw+gw+hw+"]",Uy="\\ud83c[\\udffb-\\udfff]",hC="(?:"+Vu+"|"+Uy+")",ww="[^"+Bu+"]",Hy="(?:\\ud83c[\\udde6-\\uddff]){2}",By="[\\ud800-\\udbff][\\udc00-\\udfff]",Na="["+hw+"]",Ew="\\u200d",_w="(?:"+vw+"|"+bw+")",yC="(?:"+Na+"|"+bw+")",Rw="(?:"+Ny+"(?:d|ll|m|re|s|t|ve))?",kw="(?:"+Ny+"(?:D|LL|M|RE|S|T|VE))?",Aw=hC+"?",Pw="["+yw+"]?",TC="(?:"+Ew+"(?:"+[ww,Hy,By].join("|")+")"+Pw+Aw+")*",xC="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",SC="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Mw=Pw+Aw+TC,vC="(?:"+[gC,Hy,By].join("|")+")"+Mw,bC="(?:"+[ww+Vu+"?",Vu,Hy,By,dC].join("|")+")",wC=RegExp(Ny,"g"),EC=RegExp(Vu,"g"),Vy=RegExp(Uy+"(?="+Uy+")|"+bC+Mw,"g"),_C=RegExp([Na+"?"+vw+"+"+Rw+"(?="+[xw,Na,"$"].join("|")+")",yC+"+"+kw+"(?="+[xw,Na+_w,"$"].join("|")+")",Na+"?"+_w+"+"+Rw,Na+"+"+kw,SC,xC,Sw,vC].join("|"),"g"),RC=RegExp("["+Ew+Bu+fw+yw+"]"),kC=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,AC=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],PC=-1,it={};it[Ry]=it[ky]=it[Ay]=it[Py]=it[My]=it[Dy]=it[Ly]=it[Fy]=it[Iy]=!0,it[Qe]=it[Ue]=it[Lc]=it[$t]=it[Oa]=it[Xr]=it[fi]=it[Ca]=it[En]=it[Ac]=it[di]=it[Pc]=it[_n]=it[Mc]=it[Dc]=!1;var nt={};nt[Qe]=nt[Ue]=nt[Lc]=nt[Oa]=nt[$t]=nt[Xr]=nt[Ry]=nt[ky]=nt[Ay]=nt[Py]=nt[My]=nt[En]=nt[Ac]=nt[di]=nt[Pc]=nt[_n]=nt[Mc]=nt[Uu]=nt[Dy]=nt[Ly]=nt[Fy]=nt[Iy]=!0,nt[fi]=nt[Ca]=nt[Dc]=!1;var MC={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},DC={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},LC={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},FC={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},IC=parseFloat,CC=parseInt,Dw=typeof global=="object"&&global&&global.Object===Object&&global,OC=typeof self=="object"&&self&&self.Object===Object&&self,It=Dw||OC||Function("return this")(),Wy=typeof mc=="object"&&mc&&!mc.nodeType&&mc,Io=Wy&&typeof lu=="object"&&lu&&!lu.nodeType&&lu,Lw=Io&&Io.exports===Wy,$y=Lw&&Dw.process,Jr=function(){try{var P=Io&&Io.require&&Io.require("util").types;return P||$y&&$y.binding&&$y.binding("util")}catch{}}(),Fw=Jr&&Jr.isArrayBuffer,Iw=Jr&&Jr.isDate,Cw=Jr&&Jr.isMap,Ow=Jr&&Jr.isRegExp,Nw=Jr&&Jr.isSet,Uw=Jr&&Jr.isTypedArray;function Fr(P,$,B){switch(B.length){case 0:return P.call($);case 1:return P.call($,B[0]);case 2:return P.call($,B[0],B[1]);case 3:return P.call($,B[0],B[1],B[2])}return P.apply($,B)}function NC(P,$,B,ce){for(var Re=-1,Ye=P==null?0:P.length;++Re<Ye;){var Pt=P[Re];$(ce,Pt,B(Pt),P)}return ce}function en(P,$){for(var B=-1,ce=P==null?0:P.length;++B<ce&&$(P[B],B,P)!==!1;);return P}function UC(P,$){for(var B=P==null?0:P.length;B--&&$(P[B],B,P)!==!1;);return P}function Hw(P,$){for(var B=-1,ce=P==null?0:P.length;++B<ce;)if(!$(P[B],B,P))return!1;return!0}function Hi(P,$){for(var B=-1,ce=P==null?0:P.length,Re=0,Ye=[];++B<ce;){var Pt=P[B];$(Pt,B,P)&&(Ye[Re++]=Pt)}return Ye}function Wu(P,$){var B=P==null?0:P.length;return!!B&&Ua(P,$,0)>-1}function jy(P,$,B){for(var ce=-1,Re=P==null?0:P.length;++ce<Re;)if(B($,P[ce]))return!0;return!1}function st(P,$){for(var B=-1,ce=P==null?0:P.length,Re=Array(ce);++B<ce;)Re[B]=$(P[B],B,P);return Re}function Bi(P,$){for(var B=-1,ce=$.length,Re=P.length;++B<ce;)P[Re+B]=$[B];return P}function zy(P,$,B,ce){var Re=-1,Ye=P==null?0:P.length;for(ce&&Ye&&(B=P[++Re]);++Re<Ye;)B=$(B,P[Re],Re,P);return B}function HC(P,$,B,ce){var Re=P==null?0:P.length;for(ce&&Re&&(B=P[--Re]);Re--;)B=$(B,P[Re],Re,P);return B}function qy(P,$){for(var B=-1,ce=P==null?0:P.length;++B<ce;)if($(P[B],B,P))return!0;return!1}var BC=Gy("length");function VC(P){return P.split("")}function WC(P){return P.match(YI)||[]}function Bw(P,$,B){var ce;return B(P,function(Re,Ye,Pt){if($(Re,Ye,Pt))return ce=Ye,!1}),ce}function $u(P,$,B,ce){for(var Re=P.length,Ye=B+(ce?1:-1);ce?Ye--:++Ye<Re;)if($(P[Ye],Ye,P))return Ye;return-1}function Ua(P,$,B){return $===$?e1(P,$,B):$u(P,Vw,B)}function $C(P,$,B,ce){for(var Re=B-1,Ye=P.length;++Re<Ye;)if(ce(P[Re],$))return Re;return-1}function Vw(P){return P!==P}function Ww(P,$){var B=P==null?0:P.length;return B?Qy(P,$)/B:X}function Gy(P){return function($){return $==null?t:$[P]}}function Ky(P){return function($){return P==null?t:P[$]}}function $w(P,$,B,ce,Re){return Re(P,function(Ye,Pt,rt){B=ce?(ce=!1,Ye):$(B,Ye,Pt,rt)}),B}function jC(P,$){var B=P.length;for(P.sort($);B--;)P[B]=P[B].value;return P}function Qy(P,$){for(var B,ce=-1,Re=P.length;++ce<Re;){var Ye=$(P[ce]);Ye!==t&&(B=B===t?Ye:B+Ye)}return B}function Yy(P,$){for(var B=-1,ce=Array(P);++B<P;)ce[B]=$(B);return ce}function zC(P,$){return st($,function(B){return[B,P[B]]})}function jw(P){return P&&P.slice(0,Kw(P)+1).replace(Oy,"")}function Ir(P){return function($){return P($)}}function Zy(P,$){return st($,function(B){return P[B]})}function Fc(P,$){return P.has($)}function zw(P,$){for(var B=-1,ce=P.length;++B<ce&&Ua($,P[B],0)>-1;);return B}function qw(P,$){for(var B=P.length;B--&&Ua($,P[B],0)>-1;);return B}function qC(P,$){for(var B=P.length,ce=0;B--;)P[B]===$&&++ce;return ce}var GC=Ky(MC),KC=Ky(DC);function QC(P){return"\\"+FC[P]}function YC(P,$){return P==null?t:P[$]}function Ha(P){return RC.test(P)}function ZC(P){return kC.test(P)}function XC(P){for(var $,B=[];!($=P.next()).done;)B.push($.value);return B}function Xy(P){var $=-1,B=Array(P.size);return P.forEach(function(ce,Re){B[++$]=[Re,ce]}),B}function Gw(P,$){return function(B){return P($(B))}}function Vi(P,$){for(var B=-1,ce=P.length,Re=0,Ye=[];++B<ce;){var Pt=P[B];(Pt===$||Pt===u)&&(P[B]=u,Ye[Re++]=B)}return Ye}function ju(P){var $=-1,B=Array(P.size);return P.forEach(function(ce){B[++$]=ce}),B}function JC(P){var $=-1,B=Array(P.size);return P.forEach(function(ce){B[++$]=[ce,ce]}),B}function e1(P,$,B){for(var ce=B-1,Re=P.length;++ce<Re;)if(P[ce]===$)return ce;return-1}function t1(P,$,B){for(var ce=B+1;ce--;)if(P[ce]===$)return ce;return ce}function Ba(P){return Ha(P)?n1(P):BC(P)}function Rn(P){return Ha(P)?i1(P):VC(P)}function Kw(P){for(var $=P.length;$--&&qI.test(P.charAt($)););return $}var r1=Ky(LC);function n1(P){for(var $=Vy.lastIndex=0;Vy.test(P);)++$;return $}function i1(P){return P.match(Vy)||[]}function o1(P){return P.match(_C)||[]}var a1=function P($){$=$==null?It:Wi.defaults(It.Object(),$,Wi.pick(It,AC));var B=$.Array,ce=$.Date,Re=$.Error,Ye=$.Function,Pt=$.Math,rt=$.Object,Jy=$.RegExp,s1=$.String,tn=$.TypeError,zu=B.prototype,c1=Ye.prototype,Va=rt.prototype,qu=$["__core-js_shared__"],Gu=c1.toString,Je=Va.hasOwnProperty,l1=0,Qw=function(){var a=/[^.]+$/.exec(qu&&qu.keys&&qu.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),Ku=Va.toString,u1=Gu.call(rt),p1=It._,m1=Jy("^"+Gu.call(Je).replace(Cy,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Qu=Lw?$.Buffer:t,$i=$.Symbol,Yu=$.Uint8Array,Yw=Qu?Qu.allocUnsafe:t,Zu=Gw(rt.getPrototypeOf,rt),Zw=rt.create,Xw=Va.propertyIsEnumerable,Xu=zu.splice,Jw=$i?$i.isConcatSpreadable:t,Ic=$i?$i.iterator:t,Co=$i?$i.toStringTag:t,Ju=function(){try{var a=Bo(rt,"defineProperty");return a({},"",{}),a}catch{}}(),f1=$.clearTimeout!==It.clearTimeout&&$.clearTimeout,d1=ce&&ce.now!==It.Date.now&&ce.now,g1=$.setTimeout!==It.setTimeout&&$.setTimeout,ep=Pt.ceil,tp=Pt.floor,eT=rt.getOwnPropertySymbols,h1=Qu?Qu.isBuffer:t,eE=$.isFinite,y1=zu.join,T1=Gw(rt.keys,rt),Mt=Pt.max,Jt=Pt.min,x1=ce.now,S1=$.parseInt,tE=Pt.random,v1=zu.reverse,tT=Bo($,"DataView"),Cc=Bo($,"Map"),rT=Bo($,"Promise"),Wa=Bo($,"Set"),Oc=Bo($,"WeakMap"),Nc=Bo(rt,"create"),rp=Oc&&new Oc,$a={},b1=Vo(tT),w1=Vo(Cc),E1=Vo(rT),_1=Vo(Wa),R1=Vo(Oc),np=$i?$i.prototype:t,Uc=np?np.valueOf:t,rE=np?np.toString:t;function T(a){if(yt(a)&&!ke(a)&&!(a instanceof We)){if(a instanceof rn)return a;if(Je.call(a,"__wrapped__"))return n_(a)}return new rn(a)}var ja=function(){function a(){}return function(c){if(!pt(c))return{};if(Zw)return Zw(c);a.prototype=c;var p=new a;return a.prototype=t,p}}();function ip(){}function rn(a,c){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=t}T.templateSettings={escape:BI,evaluate:VI,interpolate:pw,variable:"",imports:{_:T}},T.prototype=ip.prototype,T.prototype.constructor=T,rn.prototype=ja(ip.prototype),rn.prototype.constructor=rn;function We(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Q,this.__views__=[]}function k1(){var a=new We(this.__wrapped__);return a.__actions__=xr(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=xr(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=xr(this.__views__),a}function A1(){if(this.__filtered__){var a=new We(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a}function P1(){var a=this.__wrapped__.value(),c=this.__dir__,p=ke(a),f=c<0,h=p?a.length:0,S=VO(0,h,this.__views__),_=S.start,R=S.end,D=R-_,G=f?R:_-1,K=this.__iteratees__,ee=K.length,oe=0,de=Jt(D,this.__takeCount__);if(!p||!f&&h==D&&de==D)return RE(a,this.__actions__);var ve=[];e:for(;D--&&oe<de;){G+=c;for(var Fe=-1,be=a[G];++Fe<ee;){var He=K[Fe],je=He.iteratee,Nr=He.type,ur=je(be);if(Nr==q)be=ur;else if(!ur){if(Nr==A)continue e;break e}}ve[oe++]=be}return ve}We.prototype=ja(ip.prototype),We.prototype.constructor=We;function Oo(a){var c=-1,p=a==null?0:a.length;for(this.clear();++c<p;){var f=a[c];this.set(f[0],f[1])}}function M1(){this.__data__=Nc?Nc(null):{},this.size=0}function D1(a){var c=this.has(a)&&delete this.__data__[a];return this.size-=c?1:0,c}function L1(a){var c=this.__data__;if(Nc){var p=c[a];return p===s?t:p}return Je.call(c,a)?c[a]:t}function F1(a){var c=this.__data__;return Nc?c[a]!==t:Je.call(c,a)}function I1(a,c){var p=this.__data__;return this.size+=this.has(a)?0:1,p[a]=Nc&&c===t?s:c,this}Oo.prototype.clear=M1,Oo.prototype.delete=D1,Oo.prototype.get=L1,Oo.prototype.has=F1,Oo.prototype.set=I1;function gi(a){var c=-1,p=a==null?0:a.length;for(this.clear();++c<p;){var f=a[c];this.set(f[0],f[1])}}function C1(){this.__data__=[],this.size=0}function O1(a){var c=this.__data__,p=op(c,a);if(p<0)return!1;var f=c.length-1;return p==f?c.pop():Xu.call(c,p,1),--this.size,!0}function N1(a){var c=this.__data__,p=op(c,a);return p<0?t:c[p][1]}function U1(a){return op(this.__data__,a)>-1}function H1(a,c){var p=this.__data__,f=op(p,a);return f<0?(++this.size,p.push([a,c])):p[f][1]=c,this}gi.prototype.clear=C1,gi.prototype.delete=O1,gi.prototype.get=N1,gi.prototype.has=U1,gi.prototype.set=H1;function hi(a){var c=-1,p=a==null?0:a.length;for(this.clear();++c<p;){var f=a[c];this.set(f[0],f[1])}}function B1(){this.size=0,this.__data__={hash:new Oo,map:new(Cc||gi),string:new Oo}}function V1(a){var c=yp(this,a).delete(a);return this.size-=c?1:0,c}function W1(a){return yp(this,a).get(a)}function $1(a){return yp(this,a).has(a)}function j1(a,c){var p=yp(this,a),f=p.size;return p.set(a,c),this.size+=p.size==f?0:1,this}hi.prototype.clear=B1,hi.prototype.delete=V1,hi.prototype.get=W1,hi.prototype.has=$1,hi.prototype.set=j1;function No(a){var c=-1,p=a==null?0:a.length;for(this.__data__=new hi;++c<p;)this.add(a[c])}function z1(a){return this.__data__.set(a,s),this}function q1(a){return this.__data__.has(a)}No.prototype.add=No.prototype.push=z1,No.prototype.has=q1;function kn(a){var c=this.__data__=new gi(a);this.size=c.size}function G1(){this.__data__=new gi,this.size=0}function K1(a){var c=this.__data__,p=c.delete(a);return this.size=c.size,p}function Q1(a){return this.__data__.get(a)}function Y1(a){return this.__data__.has(a)}function Z1(a,c){var p=this.__data__;if(p instanceof gi){var f=p.__data__;if(!Cc||f.length<r-1)return f.push([a,c]),this.size=++p.size,this;p=this.__data__=new hi(f)}return p.set(a,c),this.size=p.size,this}kn.prototype.clear=G1,kn.prototype.delete=K1,kn.prototype.get=Q1,kn.prototype.has=Y1,kn.prototype.set=Z1;function nE(a,c){var p=ke(a),f=!p&&Wo(a),h=!p&&!f&&Ki(a),S=!p&&!f&&!h&&Ka(a),_=p||f||h||S,R=_?Yy(a.length,s1):[],D=R.length;for(var G in a)(c||Je.call(a,G))&&!(_&&(G=="length"||h&&(G=="offset"||G=="parent")||S&&(G=="buffer"||G=="byteLength"||G=="byteOffset")||Si(G,D)))&&R.push(G);return R}function iE(a){var c=a.length;return c?a[fT(0,c-1)]:t}function X1(a,c){return Tp(xr(a),Uo(c,0,a.length))}function J1(a){return Tp(xr(a))}function nT(a,c,p){(p!==t&&!An(a[c],p)||p===t&&!(c in a))&&yi(a,c,p)}function Hc(a,c,p){var f=a[c];(!(Je.call(a,c)&&An(f,p))||p===t&&!(c in a))&&yi(a,c,p)}function op(a,c){for(var p=a.length;p--;)if(An(a[p][0],c))return p;return-1}function eO(a,c,p,f){return ji(a,function(h,S,_){c(f,h,p(h),_)}),f}function oE(a,c){return a&&zn(c,Ct(c),a)}function tO(a,c){return a&&zn(c,vr(c),a)}function yi(a,c,p){c=="__proto__"&&Ju?Ju(a,c,{configurable:!0,enumerable:!0,value:p,writable:!0}):a[c]=p}function iT(a,c){for(var p=-1,f=c.length,h=B(f),S=a==null;++p<f;)h[p]=S?t:UT(a,c[p]);return h}function Uo(a,c,p){return a===a&&(p!==t&&(a=a<=p?a:p),c!==t&&(a=a>=c?a:c)),a}function nn(a,c,p,f,h,S){var _,R=c&m,D=c&d,G=c&g;if(p&&(_=h?p(a,f,h,S):p(a)),_!==t)return _;if(!pt(a))return a;var K=ke(a);if(K){if(_=$O(a),!R)return xr(a,_)}else{var ee=er(a),oe=ee==Ca||ee==sw;if(Ki(a))return PE(a,R);if(ee==di||ee==Qe||oe&&!h){if(_=D||oe?{}:KE(a),!R)return D?LO(a,tO(_,a)):DO(a,oE(_,a))}else{if(!nt[ee])return h?a:{};_=jO(a,ee,R)}}S||(S=new kn);var de=S.get(a);if(de)return de;S.set(a,_),w_(a)?a.forEach(function(be){_.add(nn(be,c,p,be,a,S))}):v_(a)&&a.forEach(function(be,He){_.set(He,nn(be,c,p,He,a,S))});var ve=G?D?ET:wT:D?vr:Ct,Fe=K?t:ve(a);return en(Fe||a,function(be,He){Fe&&(He=be,be=a[He]),Hc(_,He,nn(be,c,p,He,a,S))}),_}function rO(a){var c=Ct(a);return function(p){return aE(p,a,c)}}function aE(a,c,p){var f=p.length;if(a==null)return!f;for(a=rt(a);f--;){var h=p[f],S=c[h],_=a[h];if(_===t&&!(h in a)||!S(_))return!1}return!0}function sE(a,c,p){if(typeof a!="function")throw new tn(i);return qc(function(){a.apply(t,p)},c)}function Bc(a,c,p,f){var h=-1,S=Wu,_=!0,R=a.length,D=[],G=c.length;if(!R)return D;p&&(c=st(c,Ir(p))),f?(S=jy,_=!1):c.length>=r&&(S=Fc,_=!1,c=new No(c));e:for(;++h<R;){var K=a[h],ee=p==null?K:p(K);if(K=f||K!==0?K:0,_&&ee===ee){for(var oe=G;oe--;)if(c[oe]===ee)continue e;D.push(K)}else S(c,ee,f)||D.push(K)}return D}var ji=IE(jn),cE=IE(aT,!0);function nO(a,c){var p=!0;return ji(a,function(f,h,S){return p=!!c(f,h,S),p}),p}function ap(a,c,p){for(var f=-1,h=a.length;++f<h;){var S=a[f],_=c(S);if(_!=null&&(R===t?_===_&&!Or(_):p(_,R)))var R=_,D=S}return D}function iO(a,c,p,f){var h=a.length;for(p=De(p),p<0&&(p=-p>h?0:h+p),f=f===t||f>h?h:De(f),f<0&&(f+=h),f=p>f?0:__(f);p<f;)a[p++]=c;return a}function lE(a,c){var p=[];return ji(a,function(f,h,S){c(f,h,S)&&p.push(f)}),p}function jt(a,c,p,f,h){var S=-1,_=a.length;for(p||(p=qO),h||(h=[]);++S<_;){var R=a[S];c>0&&p(R)?c>1?jt(R,c-1,p,f,h):Bi(h,R):f||(h[h.length]=R)}return h}var oT=CE(),uE=CE(!0);function jn(a,c){return a&&oT(a,c,Ct)}function aT(a,c){return a&&uE(a,c,Ct)}function sp(a,c){return Hi(c,function(p){return vi(a[p])})}function Ho(a,c){c=qi(c,a);for(var p=0,f=c.length;a!=null&&p<f;)a=a[qn(c[p++])];return p&&p==f?a:t}function pE(a,c,p){var f=c(a);return ke(a)?f:Bi(f,p(a))}function cr(a){return a==null?a===t?FI:DI:Co&&Co in rt(a)?BO(a):JO(a)}function sT(a,c){return a>c}function oO(a,c){return a!=null&&Je.call(a,c)}function aO(a,c){return a!=null&&c in rt(a)}function sO(a,c,p){return a>=Jt(c,p)&&a<Mt(c,p)}function cT(a,c,p){for(var f=p?jy:Wu,h=a[0].length,S=a.length,_=S,R=B(S),D=1/0,G=[];_--;){var K=a[_];_&&c&&(K=st(K,Ir(c))),D=Jt(K.length,D),R[_]=!p&&(c||h>=120&&K.length>=120)?new No(_&&K):t}K=a[0];var ee=-1,oe=R[0];e:for(;++ee<h&&G.length<D;){var de=K[ee],ve=c?c(de):de;if(de=p||de!==0?de:0,!(oe?Fc(oe,ve):f(G,ve,p))){for(_=S;--_;){var Fe=R[_];if(!(Fe?Fc(Fe,ve):f(a[_],ve,p)))continue e}oe&&oe.push(ve),G.push(de)}}return G}function cO(a,c,p,f){return jn(a,function(h,S,_){c(f,p(h),S,_)}),f}function Vc(a,c,p){c=qi(c,a),a=XE(a,c);var f=a==null?a:a[qn(an(c))];return f==null?t:Fr(f,a,p)}function mE(a){return yt(a)&&cr(a)==Qe}function lO(a){return yt(a)&&cr(a)==Lc}function uO(a){return yt(a)&&cr(a)==Xr}function Wc(a,c,p,f,h){return a===c?!0:a==null||c==null||!yt(a)&&!yt(c)?a!==a&&c!==c:pO(a,c,p,f,Wc,h)}function pO(a,c,p,f,h,S){var _=ke(a),R=ke(c),D=_?Ue:er(a),G=R?Ue:er(c);D=D==Qe?di:D,G=G==Qe?di:G;var K=D==di,ee=G==di,oe=D==G;if(oe&&Ki(a)){if(!Ki(c))return!1;_=!0,K=!1}if(oe&&!K)return S||(S=new kn),_||Ka(a)?zE(a,c,p,f,h,S):UO(a,c,D,p,f,h,S);if(!(p&y)){var de=K&&Je.call(a,"__wrapped__"),ve=ee&&Je.call(c,"__wrapped__");if(de||ve){var Fe=de?a.value():a,be=ve?c.value():c;return S||(S=new kn),h(Fe,be,p,f,S)}}return oe?(S||(S=new kn),HO(a,c,p,f,h,S)):!1}function mO(a){return yt(a)&&er(a)==En}function lT(a,c,p,f){var h=p.length,S=h,_=!f;if(a==null)return!S;for(a=rt(a);h--;){var R=p[h];if(_&&R[2]?R[1]!==a[R[0]]:!(R[0]in a))return!1}for(;++h<S;){R=p[h];var D=R[0],G=a[D],K=R[1];if(_&&R[2]){if(G===t&&!(D in a))return!1}else{var ee=new kn;if(f)var oe=f(G,K,D,a,c,ee);if(!(oe===t?Wc(K,G,y|x,f,ee):oe))return!1}}return!0}function fE(a){if(!pt(a)||KO(a))return!1;var c=vi(a)?m1:rC;return c.test(Vo(a))}function fO(a){return yt(a)&&cr(a)==Pc}function dO(a){return yt(a)&&er(a)==_n}function gO(a){return yt(a)&&Ep(a.length)&&!!it[cr(a)]}function dE(a){return typeof a=="function"?a:a==null?br:typeof a=="object"?ke(a)?yE(a[0],a[1]):hE(a):O_(a)}function uT(a){if(!zc(a))return T1(a);var c=[];for(var p in rt(a))Je.call(a,p)&&p!="constructor"&&c.push(p);return c}function hO(a){if(!pt(a))return XO(a);var c=zc(a),p=[];for(var f in a)f=="constructor"&&(c||!Je.call(a,f))||p.push(f);return p}function pT(a,c){return a<c}function gE(a,c){var p=-1,f=Sr(a)?B(a.length):[];return ji(a,function(h,S,_){f[++p]=c(h,S,_)}),f}function hE(a){var c=RT(a);return c.length==1&&c[0][2]?YE(c[0][0],c[0][1]):function(p){return p===a||lT(p,a,c)}}function yE(a,c){return AT(a)&&QE(c)?YE(qn(a),c):function(p){var f=UT(p,a);return f===t&&f===c?HT(p,a):Wc(c,f,y|x)}}function cp(a,c,p,f,h){a!==c&&oT(c,function(S,_){if(h||(h=new kn),pt(S))yO(a,c,_,p,cp,f,h);else{var R=f?f(MT(a,_),S,_+"",a,c,h):t;R===t&&(R=S),nT(a,_,R)}},vr)}function yO(a,c,p,f,h,S,_){var R=MT(a,p),D=MT(c,p),G=_.get(D);if(G){nT(a,p,G);return}var K=S?S(R,D,p+"",a,c,_):t,ee=K===t;if(ee){var oe=ke(D),de=!oe&&Ki(D),ve=!oe&&!de&&Ka(D);K=D,oe||de||ve?ke(R)?K=R:vt(R)?K=xr(R):de?(ee=!1,K=PE(D,!0)):ve?(ee=!1,K=ME(D,!0)):K=[]:Gc(D)||Wo(D)?(K=R,Wo(R)?K=R_(R):(!pt(R)||vi(R))&&(K=KE(D))):ee=!1}ee&&(_.set(D,K),h(K,D,f,S,_),_.delete(D)),nT(a,p,K)}function TE(a,c){var p=a.length;if(p)return c+=c<0?p:0,Si(c,p)?a[c]:t}function xE(a,c,p){c.length?c=st(c,function(S){return ke(S)?function(_){return Ho(_,S.length===1?S[0]:S)}:S}):c=[br];var f=-1;c=st(c,Ir(xe()));var h=gE(a,function(S,_,R){var D=st(c,function(G){return G(S)});return{criteria:D,index:++f,value:S}});return jC(h,function(S,_){return MO(S,_,p)})}function TO(a,c){return SE(a,c,function(p,f){return HT(a,f)})}function SE(a,c,p){for(var f=-1,h=c.length,S={};++f<h;){var _=c[f],R=Ho(a,_);p(R,_)&&$c(S,qi(_,a),R)}return S}function xO(a){return function(c){return Ho(c,a)}}function mT(a,c,p,f){var h=f?$C:Ua,S=-1,_=c.length,R=a;for(a===c&&(c=xr(c)),p&&(R=st(a,Ir(p)));++S<_;)for(var D=0,G=c[S],K=p?p(G):G;(D=h(R,K,D,f))>-1;)R!==a&&Xu.call(R,D,1),Xu.call(a,D,1);return a}function vE(a,c){for(var p=a?c.length:0,f=p-1;p--;){var h=c[p];if(p==f||h!==S){var S=h;Si(h)?Xu.call(a,h,1):hT(a,h)}}return a}function fT(a,c){return a+tp(tE()*(c-a+1))}function SO(a,c,p,f){for(var h=-1,S=Mt(ep((c-a)/(p||1)),0),_=B(S);S--;)_[f?S:++h]=a,a+=p;return _}function dT(a,c){var p="";if(!a||c<1||c>N)return p;do c%2&&(p+=a),c=tp(c/2),c&&(a+=a);while(c);return p}function Ce(a,c){return DT(ZE(a,c,br),a+"")}function vO(a){return iE(Qa(a))}function bO(a,c){var p=Qa(a);return Tp(p,Uo(c,0,p.length))}function $c(a,c,p,f){if(!pt(a))return a;c=qi(c,a);for(var h=-1,S=c.length,_=S-1,R=a;R!=null&&++h<S;){var D=qn(c[h]),G=p;if(D==="__proto__"||D==="constructor"||D==="prototype")return a;if(h!=_){var K=R[D];G=f?f(K,D,R):t,G===t&&(G=pt(K)?K:Si(c[h+1])?[]:{})}Hc(R,D,G),R=R[D]}return a}var bE=rp?function(a,c){return rp.set(a,c),a}:br,wO=Ju?function(a,c){return Ju(a,"toString",{configurable:!0,enumerable:!1,value:VT(c),writable:!0})}:br;function EO(a){return Tp(Qa(a))}function on(a,c,p){var f=-1,h=a.length;c<0&&(c=-c>h?0:h+c),p=p>h?h:p,p<0&&(p+=h),h=c>p?0:p-c>>>0,c>>>=0;for(var S=B(h);++f<h;)S[f]=a[f+c];return S}function _O(a,c){var p;return ji(a,function(f,h,S){return p=c(f,h,S),!p}),!!p}function lp(a,c,p){var f=0,h=a==null?f:a.length;if(typeof c=="number"&&c===c&&h<=we){for(;f<h;){var S=f+h>>>1,_=a[S];_!==null&&!Or(_)&&(p?_<=c:_<c)?f=S+1:h=S}return h}return gT(a,c,br,p)}function gT(a,c,p,f){var h=0,S=a==null?0:a.length;if(S===0)return 0;c=p(c);for(var _=c!==c,R=c===null,D=Or(c),G=c===t;h<S;){var K=tp((h+S)/2),ee=p(a[K]),oe=ee!==t,de=ee===null,ve=ee===ee,Fe=Or(ee);if(_)var be=f||ve;else G?be=ve&&(f||oe):R?be=ve&&oe&&(f||!de):D?be=ve&&oe&&!de&&(f||!Fe):de||Fe?be=!1:be=f?ee<=c:ee<c;be?h=K+1:S=K}return Jt(S,re)}function wE(a,c){for(var p=-1,f=a.length,h=0,S=[];++p<f;){var _=a[p],R=c?c(_):_;if(!p||!An(R,D)){var D=R;S[h++]=_===0?0:_}}return S}function EE(a){return typeof a=="number"?a:Or(a)?X:+a}function Cr(a){if(typeof a=="string")return a;if(ke(a))return st(a,Cr)+"";if(Or(a))return rE?rE.call(a):"";var c=a+"";return c=="0"&&1/a==-F?"-0":c}function zi(a,c,p){var f=-1,h=Wu,S=a.length,_=!0,R=[],D=R;if(p)_=!1,h=jy;else if(S>=r){var G=c?null:OO(a);if(G)return ju(G);_=!1,h=Fc,D=new No}else D=c?[]:R;e:for(;++f<S;){var K=a[f],ee=c?c(K):K;if(K=p||K!==0?K:0,_&&ee===ee){for(var oe=D.length;oe--;)if(D[oe]===ee)continue e;c&&D.push(ee),R.push(K)}else h(D,ee,p)||(D!==R&&D.push(ee),R.push(K))}return R}function hT(a,c){return c=qi(c,a),a=XE(a,c),a==null||delete a[qn(an(c))]}function _E(a,c,p,f){return $c(a,c,p(Ho(a,c)),f)}function up(a,c,p,f){for(var h=a.length,S=f?h:-1;(f?S--:++S<h)&&c(a[S],S,a););return p?on(a,f?0:S,f?S+1:h):on(a,f?S+1:0,f?h:S)}function RE(a,c){var p=a;return p instanceof We&&(p=p.value()),zy(c,function(f,h){return h.func.apply(h.thisArg,Bi([f],h.args))},p)}function yT(a,c,p){var f=a.length;if(f<2)return f?zi(a[0]):[];for(var h=-1,S=B(f);++h<f;)for(var _=a[h],R=-1;++R<f;)R!=h&&(S[h]=Bc(S[h]||_,a[R],c,p));return zi(jt(S,1),c,p)}function kE(a,c,p){for(var f=-1,h=a.length,S=c.length,_={};++f<h;){var R=f<S?c[f]:t;p(_,a[f],R)}return _}function TT(a){return vt(a)?a:[]}function xT(a){return typeof a=="function"?a:br}function qi(a,c){return ke(a)?a:AT(a,c)?[a]:r_(Xe(a))}var RO=Ce;function Gi(a,c,p){var f=a.length;return p=p===t?f:p,!c&&p>=f?a:on(a,c,p)}var AE=f1||function(a){return It.clearTimeout(a)};function PE(a,c){if(c)return a.slice();var p=a.length,f=Yw?Yw(p):new a.constructor(p);return a.copy(f),f}function ST(a){var c=new a.constructor(a.byteLength);return new Yu(c).set(new Yu(a)),c}function kO(a,c){var p=c?ST(a.buffer):a.buffer;return new a.constructor(p,a.byteOffset,a.byteLength)}function AO(a){var c=new a.constructor(a.source,mw.exec(a));return c.lastIndex=a.lastIndex,c}function PO(a){return Uc?rt(Uc.call(a)):{}}function ME(a,c){var p=c?ST(a.buffer):a.buffer;return new a.constructor(p,a.byteOffset,a.length)}function DE(a,c){if(a!==c){var p=a!==t,f=a===null,h=a===a,S=Or(a),_=c!==t,R=c===null,D=c===c,G=Or(c);if(!R&&!G&&!S&&a>c||S&&_&&D&&!R&&!G||f&&_&&D||!p&&D||!h)return 1;if(!f&&!S&&!G&&a<c||G&&p&&h&&!f&&!S||R&&p&&h||!_&&h||!D)return-1}return 0}function MO(a,c,p){for(var f=-1,h=a.criteria,S=c.criteria,_=h.length,R=p.length;++f<_;){var D=DE(h[f],S[f]);if(D){if(f>=R)return D;var G=p[f];return D*(G=="desc"?-1:1)}}return a.index-c.index}function LE(a,c,p,f){for(var h=-1,S=a.length,_=p.length,R=-1,D=c.length,G=Mt(S-_,0),K=B(D+G),ee=!f;++R<D;)K[R]=c[R];for(;++h<_;)(ee||h<S)&&(K[p[h]]=a[h]);for(;G--;)K[R++]=a[h++];return K}function FE(a,c,p,f){for(var h=-1,S=a.length,_=-1,R=p.length,D=-1,G=c.length,K=Mt(S-R,0),ee=B(K+G),oe=!f;++h<K;)ee[h]=a[h];for(var de=h;++D<G;)ee[de+D]=c[D];for(;++_<R;)(oe||h<S)&&(ee[de+p[_]]=a[h++]);return ee}function xr(a,c){var p=-1,f=a.length;for(c||(c=B(f));++p<f;)c[p]=a[p];return c}function zn(a,c,p,f){var h=!p;p||(p={});for(var S=-1,_=c.length;++S<_;){var R=c[S],D=f?f(p[R],a[R],R,p,a):t;D===t&&(D=a[R]),h?yi(p,R,D):Hc(p,R,D)}return p}function DO(a,c){return zn(a,kT(a),c)}function LO(a,c){return zn(a,qE(a),c)}function pp(a,c){return function(p,f){var h=ke(p)?NC:eO,S=c?c():{};return h(p,a,xe(f,2),S)}}function za(a){return Ce(function(c,p){var f=-1,h=p.length,S=h>1?p[h-1]:t,_=h>2?p[2]:t;for(S=a.length>3&&typeof S=="function"?(h--,S):t,_&&lr(p[0],p[1],_)&&(S=h<3?t:S,h=1),c=rt(c);++f<h;){var R=p[f];R&&a(c,R,f,S)}return c})}function IE(a,c){return function(p,f){if(p==null)return p;if(!Sr(p))return a(p,f);for(var h=p.length,S=c?h:-1,_=rt(p);(c?S--:++S<h)&&f(_[S],S,_)!==!1;);return p}}function CE(a){return function(c,p,f){for(var h=-1,S=rt(c),_=f(c),R=_.length;R--;){var D=_[a?R:++h];if(p(S[D],D,S)===!1)break}return c}}function FO(a,c,p){var f=c&w,h=jc(a);function S(){var _=this&&this!==It&&this instanceof S?h:a;return _.apply(f?p:this,arguments)}return S}function OE(a){return function(c){c=Xe(c);var p=Ha(c)?Rn(c):t,f=p?p[0]:c.charAt(0),h=p?Gi(p,1).join(""):c.slice(1);return f[a]()+h}}function qa(a){return function(c){return zy(I_(F_(c).replace(wC,"")),a,"")}}function jc(a){return function(){var c=arguments;switch(c.length){case 0:return new a;case 1:return new a(c[0]);case 2:return new a(c[0],c[1]);case 3:return new a(c[0],c[1],c[2]);case 4:return new a(c[0],c[1],c[2],c[3]);case 5:return new a(c[0],c[1],c[2],c[3],c[4]);case 6:return new a(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new a(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var p=ja(a.prototype),f=a.apply(p,c);return pt(f)?f:p}}function IO(a,c,p){var f=jc(a);function h(){for(var S=arguments.length,_=B(S),R=S,D=Ga(h);R--;)_[R]=arguments[R];var G=S<3&&_[0]!==D&&_[S-1]!==D?[]:Vi(_,D);if(S-=G.length,S<p)return VE(a,c,mp,h.placeholder,t,_,G,t,t,p-S);var K=this&&this!==It&&this instanceof h?f:a;return Fr(K,this,_)}return h}function NE(a){return function(c,p,f){var h=rt(c);if(!Sr(c)){var S=xe(p,3);c=Ct(c),p=function(R){return S(h[R],R,h)}}var _=a(c,p,f);return _>-1?h[S?c[_]:_]:t}}function UE(a){return xi(function(c){var p=c.length,f=p,h=rn.prototype.thru;for(a&&c.reverse();f--;){var S=c[f];if(typeof S!="function")throw new tn(i);if(h&&!_&&hp(S)=="wrapper")var _=new rn([],!0)}for(f=_?f:p;++f<p;){S=c[f];var R=hp(S),D=R=="wrapper"?_T(S):t;D&&PT(D[0])&&D[1]==(ue|V|ie|ge)&&!D[4].length&&D[9]==1?_=_[hp(D[0])].apply(_,D[3]):_=S.length==1&&PT(S)?_[R]():_.thru(S)}return function(){var G=arguments,K=G[0];if(_&&G.length==1&&ke(K))return _.plant(K).value();for(var ee=0,oe=p?c[ee].apply(this,G):K;++ee<p;)oe=c[ee].call(this,oe);return oe}})}function mp(a,c,p,f,h,S,_,R,D,G){var K=c&ue,ee=c&w,oe=c&E,de=c&(V|z),ve=c&ut,Fe=oe?t:jc(a);function be(){for(var He=arguments.length,je=B(He),Nr=He;Nr--;)je[Nr]=arguments[Nr];if(de)var ur=Ga(be),Ur=qC(je,ur);if(f&&(je=LE(je,f,h,de)),S&&(je=FE(je,S,_,de)),He-=Ur,de&&He<G){var bt=Vi(je,ur);return VE(a,c,mp,be.placeholder,p,je,bt,R,D,G-He)}var Pn=ee?p:this,wi=oe?Pn[a]:a;return He=je.length,R?je=eN(je,R):ve&&He>1&&je.reverse(),K&&D<He&&(je.length=D),this&&this!==It&&this instanceof be&&(wi=Fe||jc(wi)),wi.apply(Pn,je)}return be}function HE(a,c){return function(p,f){return cO(p,a,c(f),{})}}function fp(a,c){return function(p,f){var h;if(p===t&&f===t)return c;if(p!==t&&(h=p),f!==t){if(h===t)return f;typeof p=="string"||typeof f=="string"?(p=Cr(p),f=Cr(f)):(p=EE(p),f=EE(f)),h=a(p,f)}return h}}function vT(a){return xi(function(c){return c=st(c,Ir(xe())),Ce(function(p){var f=this;return a(c,function(h){return Fr(h,f,p)})})})}function dp(a,c){c=c===t?" ":Cr(c);var p=c.length;if(p<2)return p?dT(c,a):c;var f=dT(c,ep(a/Ba(c)));return Ha(c)?Gi(Rn(f),0,a).join(""):f.slice(0,a)}function CO(a,c,p,f){var h=c&w,S=jc(a);function _(){for(var R=-1,D=arguments.length,G=-1,K=f.length,ee=B(K+D),oe=this&&this!==It&&this instanceof _?S:a;++G<K;)ee[G]=f[G];for(;D--;)ee[G++]=arguments[++R];return Fr(oe,h?p:this,ee)}return _}function BE(a){return function(c,p,f){return f&&typeof f!="number"&&lr(c,p,f)&&(p=f=t),c=bi(c),p===t?(p=c,c=0):p=bi(p),f=f===t?c<p?1:-1:bi(f),SO(c,p,f,a)}}function gp(a){return function(c,p){return typeof c=="string"&&typeof p=="string"||(c=sn(c),p=sn(p)),a(c,p)}}function VE(a,c,p,f,h,S,_,R,D,G){var K=c&V,ee=K?_:t,oe=K?t:_,de=K?S:t,ve=K?t:S;c|=K?ie:le,c&=~(K?le:ie),c&U||(c&=~(w|E));var Fe=[a,c,h,de,ee,ve,oe,R,D,G],be=p.apply(t,Fe);return PT(a)&&JE(be,Fe),be.placeholder=f,e_(be,a,c)}function bT(a){var c=Pt[a];return function(p,f){if(p=sn(p),f=f==null?0:Jt(De(f),292),f&&eE(p)){var h=(Xe(p)+"e").split("e"),S=c(h[0]+"e"+(+h[1]+f));return h=(Xe(S)+"e").split("e"),+(h[0]+"e"+(+h[1]-f))}return c(p)}}var OO=Wa&&1/ju(new Wa([,-0]))[1]==F?function(a){return new Wa(a)}:jT;function WE(a){return function(c){var p=er(c);return p==En?Xy(c):p==_n?JC(c):zC(c,a(c))}}function Ti(a,c,p,f,h,S,_,R){var D=c&E;if(!D&&typeof a!="function")throw new tn(i);var G=f?f.length:0;if(G||(c&=~(ie|le),f=h=t),_=_===t?_:Mt(De(_),0),R=R===t?R:De(R),G-=h?h.length:0,c&le){var K=f,ee=h;f=h=t}var oe=D?t:_T(a),de=[a,c,p,f,h,K,ee,S,_,R];if(oe&&ZO(de,oe),a=de[0],c=de[1],p=de[2],f=de[3],h=de[4],R=de[9]=de[9]===t?D?0:a.length:Mt(de[9]-G,0),!R&&c&(V|z)&&(c&=~(V|z)),!c||c==w)var ve=FO(a,c,p);else c==V||c==z?ve=IO(a,c,R):(c==ie||c==(w|ie))&&!h.length?ve=CO(a,c,p,f):ve=mp.apply(t,de);var Fe=oe?bE:JE;return e_(Fe(ve,de),a,c)}function $E(a,c,p,f){return a===t||An(a,Va[p])&&!Je.call(f,p)?c:a}function jE(a,c,p,f,h,S){return pt(a)&&pt(c)&&(S.set(c,a),cp(a,c,t,jE,S),S.delete(c)),a}function NO(a){return Gc(a)?t:a}function zE(a,c,p,f,h,S){var _=p&y,R=a.length,D=c.length;if(R!=D&&!(_&&D>R))return!1;var G=S.get(a),K=S.get(c);if(G&&K)return G==c&&K==a;var ee=-1,oe=!0,de=p&x?new No:t;for(S.set(a,c),S.set(c,a);++ee<R;){var ve=a[ee],Fe=c[ee];if(f)var be=_?f(Fe,ve,ee,c,a,S):f(ve,Fe,ee,a,c,S);if(be!==t){if(be)continue;oe=!1;break}if(de){if(!qy(c,function(He,je){if(!Fc(de,je)&&(ve===He||h(ve,He,p,f,S)))return de.push(je)})){oe=!1;break}}else if(!(ve===Fe||h(ve,Fe,p,f,S))){oe=!1;break}}return S.delete(a),S.delete(c),oe}function UO(a,c,p,f,h,S,_){switch(p){case Oa:if(a.byteLength!=c.byteLength||a.byteOffset!=c.byteOffset)return!1;a=a.buffer,c=c.buffer;case Lc:return!(a.byteLength!=c.byteLength||!S(new Yu(a),new Yu(c)));case $t:case Xr:case Ac:return An(+a,+c);case fi:return a.name==c.name&&a.message==c.message;case Pc:case Mc:return a==c+"";case En:var R=Xy;case _n:var D=f&y;if(R||(R=ju),a.size!=c.size&&!D)return!1;var G=_.get(a);if(G)return G==c;f|=x,_.set(a,c);var K=zE(R(a),R(c),f,h,S,_);return _.delete(a),K;case Uu:if(Uc)return Uc.call(a)==Uc.call(c)}return!1}function HO(a,c,p,f,h,S){var _=p&y,R=wT(a),D=R.length,G=wT(c),K=G.length;if(D!=K&&!_)return!1;for(var ee=D;ee--;){var oe=R[ee];if(!(_?oe in c:Je.call(c,oe)))return!1}var de=S.get(a),ve=S.get(c);if(de&&ve)return de==c&&ve==a;var Fe=!0;S.set(a,c),S.set(c,a);for(var be=_;++ee<D;){oe=R[ee];var He=a[oe],je=c[oe];if(f)var Nr=_?f(je,He,oe,c,a,S):f(He,je,oe,a,c,S);if(!(Nr===t?He===je||h(He,je,p,f,S):Nr)){Fe=!1;break}be||(be=oe=="constructor")}if(Fe&&!be){var ur=a.constructor,Ur=c.constructor;ur!=Ur&&"constructor"in a&&"constructor"in c&&!(typeof ur=="function"&&ur instanceof ur&&typeof Ur=="function"&&Ur instanceof Ur)&&(Fe=!1)}return S.delete(a),S.delete(c),Fe}function xi(a){return DT(ZE(a,t,a_),a+"")}function wT(a){return pE(a,Ct,kT)}function ET(a){return pE(a,vr,qE)}var _T=rp?function(a){return rp.get(a)}:jT;function hp(a){for(var c=a.name+"",p=$a[c],f=Je.call($a,c)?p.length:0;f--;){var h=p[f],S=h.func;if(S==null||S==a)return h.name}return c}function Ga(a){var c=Je.call(T,"placeholder")?T:a;return c.placeholder}function xe(){var a=T.iteratee||WT;return a=a===WT?dE:a,arguments.length?a(arguments[0],arguments[1]):a}function yp(a,c){var p=a.__data__;return GO(c)?p[typeof c=="string"?"string":"hash"]:p.map}function RT(a){for(var c=Ct(a),p=c.length;p--;){var f=c[p],h=a[f];c[p]=[f,h,QE(h)]}return c}function Bo(a,c){var p=YC(a,c);return fE(p)?p:t}function BO(a){var c=Je.call(a,Co),p=a[Co];try{a[Co]=t;var f=!0}catch{}var h=Ku.call(a);return f&&(c?a[Co]=p:delete a[Co]),h}var kT=eT?function(a){return a==null?[]:(a=rt(a),Hi(eT(a),function(c){return Xw.call(a,c)}))}:zT,qE=eT?function(a){for(var c=[];a;)Bi(c,kT(a)),a=Zu(a);return c}:zT,er=cr;(tT&&er(new tT(new ArrayBuffer(1)))!=Oa||Cc&&er(new Cc)!=En||rT&&er(rT.resolve())!=cw||Wa&&er(new Wa)!=_n||Oc&&er(new Oc)!=Dc)&&(er=function(a){var c=cr(a),p=c==di?a.constructor:t,f=p?Vo(p):"";if(f)switch(f){case b1:return Oa;case w1:return En;case E1:return cw;case _1:return _n;case R1:return Dc}return c});function VO(a,c,p){for(var f=-1,h=p.length;++f<h;){var S=p[f],_=S.size;switch(S.type){case"drop":a+=_;break;case"dropRight":c-=_;break;case"take":c=Jt(c,a+_);break;case"takeRight":a=Mt(a,c-_);break}}return{start:a,end:c}}function WO(a){var c=a.match(KI);return c?c[1].split(QI):[]}function GE(a,c,p){c=qi(c,a);for(var f=-1,h=c.length,S=!1;++f<h;){var _=qn(c[f]);if(!(S=a!=null&&p(a,_)))break;a=a[_]}return S||++f!=h?S:(h=a==null?0:a.length,!!h&&Ep(h)&&Si(_,h)&&(ke(a)||Wo(a)))}function $O(a){var c=a.length,p=new a.constructor(c);return c&&typeof a[0]=="string"&&Je.call(a,"index")&&(p.index=a.index,p.input=a.input),p}function KE(a){return typeof a.constructor=="function"&&!zc(a)?ja(Zu(a)):{}}function jO(a,c,p){var f=a.constructor;switch(c){case Lc:return ST(a);case $t:case Xr:return new f(+a);case Oa:return kO(a,p);case Ry:case ky:case Ay:case Py:case My:case Dy:case Ly:case Fy:case Iy:return ME(a,p);case En:return new f;case Ac:case Mc:return new f(a);case Pc:return AO(a);case _n:return new f;case Uu:return PO(a)}}function zO(a,c){var p=c.length;if(!p)return a;var f=p-1;return c[f]=(p>1?"& ":"")+c[f],c=c.join(p>2?", ":" "),a.replace(GI,`{
/* [wrapped with `+c+`] */
`)}function qO(a){return ke(a)||Wo(a)||!!(Jw&&a&&a[Jw])}function Si(a,c){var p=typeof a;return c=c??N,!!c&&(p=="number"||p!="symbol"&&iC.test(a))&&a>-1&&a%1==0&&a<c}function lr(a,c,p){if(!pt(p))return!1;var f=typeof c;return(f=="number"?Sr(p)&&Si(c,p.length):f=="string"&&c in p)?An(p[c],a):!1}function AT(a,c){if(ke(a))return!1;var p=typeof a;return p=="number"||p=="symbol"||p=="boolean"||a==null||Or(a)?!0:$I.test(a)||!WI.test(a)||c!=null&&a in rt(c)}function GO(a){var c=typeof a;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?a!=="__proto__":a===null}function PT(a){var c=hp(a),p=T[c];if(typeof p!="function"||!(c in We.prototype))return!1;if(a===p)return!0;var f=_T(p);return!!f&&a===f[0]}function KO(a){return!!Qw&&Qw in a}var QO=qu?vi:qT;function zc(a){var c=a&&a.constructor,p=typeof c=="function"&&c.prototype||Va;return a===p}function QE(a){return a===a&&!pt(a)}function YE(a,c){return function(p){return p==null?!1:p[a]===c&&(c!==t||a in rt(p))}}function YO(a){var c=bp(a,function(f){return p.size===l&&p.clear(),f}),p=c.cache;return c}function ZO(a,c){var p=a[1],f=c[1],h=p|f,S=h<(w|E|ue),_=f==ue&&p==V||f==ue&&p==ge&&a[7].length<=c[8]||f==(ue|ge)&&c[7].length<=c[8]&&p==V;if(!(S||_))return a;f&w&&(a[2]=c[2],h|=p&w?0:U);var R=c[3];if(R){var D=a[3];a[3]=D?LE(D,R,c[4]):R,a[4]=D?Vi(a[3],u):c[4]}return R=c[5],R&&(D=a[5],a[5]=D?FE(D,R,c[6]):R,a[6]=D?Vi(a[5],u):c[6]),R=c[7],R&&(a[7]=R),f&ue&&(a[8]=a[8]==null?c[8]:Jt(a[8],c[8])),a[9]==null&&(a[9]=c[9]),a[0]=c[0],a[1]=h,a}function XO(a){var c=[];if(a!=null)for(var p in rt(a))c.push(p);return c}function JO(a){return Ku.call(a)}function ZE(a,c,p){return c=Mt(c===t?a.length-1:c,0),function(){for(var f=arguments,h=-1,S=Mt(f.length-c,0),_=B(S);++h<S;)_[h]=f[c+h];h=-1;for(var R=B(c+1);++h<c;)R[h]=f[h];return R[c]=p(_),Fr(a,this,R)}}function XE(a,c){return c.length<2?a:Ho(a,on(c,0,-1))}function eN(a,c){for(var p=a.length,f=Jt(c.length,p),h=xr(a);f--;){var S=c[f];a[f]=Si(S,p)?h[S]:t}return a}function MT(a,c){if(!(c==="constructor"&&typeof a[c]=="function")&&c!="__proto__")return a[c]}var JE=t_(bE),qc=g1||function(a,c){return It.setTimeout(a,c)},DT=t_(wO);function e_(a,c,p){var f=c+"";return DT(a,zO(f,tN(WO(f),p)))}function t_(a){var c=0,p=0;return function(){var f=x1(),h=C-(f-p);if(p=f,h>0){if(++c>=H)return arguments[0]}else c=0;return a.apply(t,arguments)}}function Tp(a,c){var p=-1,f=a.length,h=f-1;for(c=c===t?f:c;++p<c;){var S=fT(p,h),_=a[S];a[S]=a[p],a[p]=_}return a.length=c,a}var r_=YO(function(a){var c=[];return a.charCodeAt(0)===46&&c.push(""),a.replace(jI,function(p,f,h,S){c.push(h?S.replace(XI,"$1"):f||p)}),c});function qn(a){if(typeof a=="string"||Or(a))return a;var c=a+"";return c=="0"&&1/a==-F?"-0":c}function Vo(a){if(a!=null){try{return Gu.call(a)}catch{}try{return a+""}catch{}}return""}function tN(a,c){return en(_e,function(p){var f="_."+p[0];c&p[1]&&!Wu(a,f)&&a.push(f)}),a.sort()}function n_(a){if(a instanceof We)return a.clone();var c=new rn(a.__wrapped__,a.__chain__);return c.__actions__=xr(a.__actions__),c.__index__=a.__index__,c.__values__=a.__values__,c}function rN(a,c,p){(p?lr(a,c,p):c===t)?c=1:c=Mt(De(c),0);var f=a==null?0:a.length;if(!f||c<1)return[];for(var h=0,S=0,_=B(ep(f/c));h<f;)_[S++]=on(a,h,h+=c);return _}function nN(a){for(var c=-1,p=a==null?0:a.length,f=0,h=[];++c<p;){var S=a[c];S&&(h[f++]=S)}return h}function iN(){var a=arguments.length;if(!a)return[];for(var c=B(a-1),p=arguments[0],f=a;f--;)c[f-1]=arguments[f];return Bi(ke(p)?xr(p):[p],jt(c,1))}var oN=Ce(function(a,c){return vt(a)?Bc(a,jt(c,1,vt,!0)):[]}),aN=Ce(function(a,c){var p=an(c);return vt(p)&&(p=t),vt(a)?Bc(a,jt(c,1,vt,!0),xe(p,2)):[]}),sN=Ce(function(a,c){var p=an(c);return vt(p)&&(p=t),vt(a)?Bc(a,jt(c,1,vt,!0),t,p):[]});function cN(a,c,p){var f=a==null?0:a.length;return f?(c=p||c===t?1:De(c),on(a,c<0?0:c,f)):[]}function lN(a,c,p){var f=a==null?0:a.length;return f?(c=p||c===t?1:De(c),c=f-c,on(a,0,c<0?0:c)):[]}function uN(a,c){return a&&a.length?up(a,xe(c,3),!0,!0):[]}function pN(a,c){return a&&a.length?up(a,xe(c,3),!0):[]}function mN(a,c,p,f){var h=a==null?0:a.length;return h?(p&&typeof p!="number"&&lr(a,c,p)&&(p=0,f=h),iO(a,c,p,f)):[]}function i_(a,c,p){var f=a==null?0:a.length;if(!f)return-1;var h=p==null?0:De(p);return h<0&&(h=Mt(f+h,0)),$u(a,xe(c,3),h)}function o_(a,c,p){var f=a==null?0:a.length;if(!f)return-1;var h=f-1;return p!==t&&(h=De(p),h=p<0?Mt(f+h,0):Jt(h,f-1)),$u(a,xe(c,3),h,!0)}function a_(a){var c=a==null?0:a.length;return c?jt(a,1):[]}function fN(a){var c=a==null?0:a.length;return c?jt(a,F):[]}function dN(a,c){var p=a==null?0:a.length;return p?(c=c===t?1:De(c),jt(a,c)):[]}function gN(a){for(var c=-1,p=a==null?0:a.length,f={};++c<p;){var h=a[c];f[h[0]]=h[1]}return f}function s_(a){return a&&a.length?a[0]:t}function hN(a,c,p){var f=a==null?0:a.length;if(!f)return-1;var h=p==null?0:De(p);return h<0&&(h=Mt(f+h,0)),Ua(a,c,h)}function yN(a){var c=a==null?0:a.length;return c?on(a,0,-1):[]}var TN=Ce(function(a){var c=st(a,TT);return c.length&&c[0]===a[0]?cT(c):[]}),xN=Ce(function(a){var c=an(a),p=st(a,TT);return c===an(p)?c=t:p.pop(),p.length&&p[0]===a[0]?cT(p,xe(c,2)):[]}),SN=Ce(function(a){var c=an(a),p=st(a,TT);return c=typeof c=="function"?c:t,c&&p.pop(),p.length&&p[0]===a[0]?cT(p,t,c):[]});function vN(a,c){return a==null?"":y1.call(a,c)}function an(a){var c=a==null?0:a.length;return c?a[c-1]:t}function bN(a,c,p){var f=a==null?0:a.length;if(!f)return-1;var h=f;return p!==t&&(h=De(p),h=h<0?Mt(f+h,0):Jt(h,f-1)),c===c?t1(a,c,h):$u(a,Vw,h,!0)}function wN(a,c){return a&&a.length?TE(a,De(c)):t}var EN=Ce(c_);function c_(a,c){return a&&a.length&&c&&c.length?mT(a,c):a}function _N(a,c,p){return a&&a.length&&c&&c.length?mT(a,c,xe(p,2)):a}function RN(a,c,p){return a&&a.length&&c&&c.length?mT(a,c,t,p):a}var kN=xi(function(a,c){var p=a==null?0:a.length,f=iT(a,c);return vE(a,st(c,function(h){return Si(h,p)?+h:h}).sort(DE)),f});function AN(a,c){var p=[];if(!(a&&a.length))return p;var f=-1,h=[],S=a.length;for(c=xe(c,3);++f<S;){var _=a[f];c(_,f,a)&&(p.push(_),h.push(f))}return vE(a,h),p}function LT(a){return a==null?a:v1.call(a)}function PN(a,c,p){var f=a==null?0:a.length;return f?(p&&typeof p!="number"&&lr(a,c,p)?(c=0,p=f):(c=c==null?0:De(c),p=p===t?f:De(p)),on(a,c,p)):[]}function MN(a,c){return lp(a,c)}function DN(a,c,p){return gT(a,c,xe(p,2))}function LN(a,c){var p=a==null?0:a.length;if(p){var f=lp(a,c);if(f<p&&An(a[f],c))return f}return-1}function FN(a,c){return lp(a,c,!0)}function IN(a,c,p){return gT(a,c,xe(p,2),!0)}function CN(a,c){var p=a==null?0:a.length;if(p){var f=lp(a,c,!0)-1;if(An(a[f],c))return f}return-1}function ON(a){return a&&a.length?wE(a):[]}function NN(a,c){return a&&a.length?wE(a,xe(c,2)):[]}function UN(a){var c=a==null?0:a.length;return c?on(a,1,c):[]}function HN(a,c,p){return a&&a.length?(c=p||c===t?1:De(c),on(a,0,c<0?0:c)):[]}function BN(a,c,p){var f=a==null?0:a.length;return f?(c=p||c===t?1:De(c),c=f-c,on(a,c<0?0:c,f)):[]}function VN(a,c){return a&&a.length?up(a,xe(c,3),!1,!0):[]}function WN(a,c){return a&&a.length?up(a,xe(c,3)):[]}var $N=Ce(function(a){return zi(jt(a,1,vt,!0))}),jN=Ce(function(a){var c=an(a);return vt(c)&&(c=t),zi(jt(a,1,vt,!0),xe(c,2))}),zN=Ce(function(a){var c=an(a);return c=typeof c=="function"?c:t,zi(jt(a,1,vt,!0),t,c)});function qN(a){return a&&a.length?zi(a):[]}function GN(a,c){return a&&a.length?zi(a,xe(c,2)):[]}function KN(a,c){return c=typeof c=="function"?c:t,a&&a.length?zi(a,t,c):[]}function FT(a){if(!(a&&a.length))return[];var c=0;return a=Hi(a,function(p){if(vt(p))return c=Mt(p.length,c),!0}),Yy(c,function(p){return st(a,Gy(p))})}function l_(a,c){if(!(a&&a.length))return[];var p=FT(a);return c==null?p:st(p,function(f){return Fr(c,t,f)})}var QN=Ce(function(a,c){return vt(a)?Bc(a,c):[]}),YN=Ce(function(a){return yT(Hi(a,vt))}),ZN=Ce(function(a){var c=an(a);return vt(c)&&(c=t),yT(Hi(a,vt),xe(c,2))}),XN=Ce(function(a){var c=an(a);return c=typeof c=="function"?c:t,yT(Hi(a,vt),t,c)}),JN=Ce(FT);function eU(a,c){return kE(a||[],c||[],Hc)}function tU(a,c){return kE(a||[],c||[],$c)}var rU=Ce(function(a){var c=a.length,p=c>1?a[c-1]:t;return p=typeof p=="function"?(a.pop(),p):t,l_(a,p)});function u_(a){var c=T(a);return c.__chain__=!0,c}function nU(a,c){return c(a),a}function xp(a,c){return c(a)}var iU=xi(function(a){var c=a.length,p=c?a[0]:0,f=this.__wrapped__,h=function(S){return iT(S,a)};return c>1||this.__actions__.length||!(f instanceof We)||!Si(p)?this.thru(h):(f=f.slice(p,+p+(c?1:0)),f.__actions__.push({func:xp,args:[h],thisArg:t}),new rn(f,this.__chain__).thru(function(S){return c&&!S.length&&S.push(t),S}))});function oU(){return u_(this)}function aU(){return new rn(this.value(),this.__chain__)}function sU(){this.__values__===t&&(this.__values__=E_(this.value()));var a=this.__index__>=this.__values__.length,c=a?t:this.__values__[this.__index__++];return{done:a,value:c}}function cU(){return this}function lU(a){for(var c,p=this;p instanceof ip;){var f=n_(p);f.__index__=0,f.__values__=t,c?h.__wrapped__=f:c=f;var h=f;p=p.__wrapped__}return h.__wrapped__=a,c}function uU(){var a=this.__wrapped__;if(a instanceof We){var c=a;return this.__actions__.length&&(c=new We(this)),c=c.reverse(),c.__actions__.push({func:xp,args:[LT],thisArg:t}),new rn(c,this.__chain__)}return this.thru(LT)}function pU(){return RE(this.__wrapped__,this.__actions__)}var mU=pp(function(a,c,p){Je.call(a,p)?++a[p]:yi(a,p,1)});function fU(a,c,p){var f=ke(a)?Hw:nO;return p&&lr(a,c,p)&&(c=t),f(a,xe(c,3))}function dU(a,c){var p=ke(a)?Hi:lE;return p(a,xe(c,3))}var gU=NE(i_),hU=NE(o_);function yU(a,c){return jt(Sp(a,c),1)}function TU(a,c){return jt(Sp(a,c),F)}function xU(a,c,p){return p=p===t?1:De(p),jt(Sp(a,c),p)}function p_(a,c){var p=ke(a)?en:ji;return p(a,xe(c,3))}function m_(a,c){var p=ke(a)?UC:cE;return p(a,xe(c,3))}var SU=pp(function(a,c,p){Je.call(a,p)?a[p].push(c):yi(a,p,[c])});function vU(a,c,p,f){a=Sr(a)?a:Qa(a),p=p&&!f?De(p):0;var h=a.length;return p<0&&(p=Mt(h+p,0)),_p(a)?p<=h&&a.indexOf(c,p)>-1:!!h&&Ua(a,c,p)>-1}var bU=Ce(function(a,c,p){var f=-1,h=typeof c=="function",S=Sr(a)?B(a.length):[];return ji(a,function(_){S[++f]=h?Fr(c,_,p):Vc(_,c,p)}),S}),wU=pp(function(a,c,p){yi(a,p,c)});function Sp(a,c){var p=ke(a)?st:gE;return p(a,xe(c,3))}function EU(a,c,p,f){return a==null?[]:(ke(c)||(c=c==null?[]:[c]),p=f?t:p,ke(p)||(p=p==null?[]:[p]),xE(a,c,p))}var _U=pp(function(a,c,p){a[p?0:1].push(c)},function(){return[[],[]]});function RU(a,c,p){var f=ke(a)?zy:$w,h=arguments.length<3;return f(a,xe(c,4),p,h,ji)}function kU(a,c,p){var f=ke(a)?HC:$w,h=arguments.length<3;return f(a,xe(c,4),p,h,cE)}function AU(a,c){var p=ke(a)?Hi:lE;return p(a,wp(xe(c,3)))}function PU(a){var c=ke(a)?iE:vO;return c(a)}function MU(a,c,p){(p?lr(a,c,p):c===t)?c=1:c=De(c);var f=ke(a)?X1:bO;return f(a,c)}function DU(a){var c=ke(a)?J1:EO;return c(a)}function LU(a){if(a==null)return 0;if(Sr(a))return _p(a)?Ba(a):a.length;var c=er(a);return c==En||c==_n?a.size:uT(a).length}function FU(a,c,p){var f=ke(a)?qy:_O;return p&&lr(a,c,p)&&(c=t),f(a,xe(c,3))}var IU=Ce(function(a,c){if(a==null)return[];var p=c.length;return p>1&&lr(a,c[0],c[1])?c=[]:p>2&&lr(c[0],c[1],c[2])&&(c=[c[0]]),xE(a,jt(c,1),[])}),vp=d1||function(){return It.Date.now()};function CU(a,c){if(typeof c!="function")throw new tn(i);return a=De(a),function(){if(--a<1)return c.apply(this,arguments)}}function f_(a,c,p){return c=p?t:c,c=a&&c==null?a.length:c,Ti(a,ue,t,t,t,t,c)}function d_(a,c){var p;if(typeof c!="function")throw new tn(i);return a=De(a),function(){return--a>0&&(p=c.apply(this,arguments)),a<=1&&(c=t),p}}var IT=Ce(function(a,c,p){var f=w;if(p.length){var h=Vi(p,Ga(IT));f|=ie}return Ti(a,f,c,p,h)}),g_=Ce(function(a,c,p){var f=w|E;if(p.length){var h=Vi(p,Ga(g_));f|=ie}return Ti(c,f,a,p,h)});function h_(a,c,p){c=p?t:c;var f=Ti(a,V,t,t,t,t,t,c);return f.placeholder=h_.placeholder,f}function y_(a,c,p){c=p?t:c;var f=Ti(a,z,t,t,t,t,t,c);return f.placeholder=y_.placeholder,f}function T_(a,c,p){var f,h,S,_,R,D,G=0,K=!1,ee=!1,oe=!0;if(typeof a!="function")throw new tn(i);c=sn(c)||0,pt(p)&&(K=!!p.leading,ee="maxWait"in p,S=ee?Mt(sn(p.maxWait)||0,c):S,oe="trailing"in p?!!p.trailing:oe);function de(bt){var Pn=f,wi=h;return f=h=t,G=bt,_=a.apply(wi,Pn),_}function ve(bt){return G=bt,R=qc(He,c),K?de(bt):_}function Fe(bt){var Pn=bt-D,wi=bt-G,N_=c-Pn;return ee?Jt(N_,S-wi):N_}function be(bt){var Pn=bt-D,wi=bt-G;return D===t||Pn>=c||Pn<0||ee&&wi>=S}function He(){var bt=vp();if(be(bt))return je(bt);R=qc(He,Fe(bt))}function je(bt){return R=t,oe&&f?de(bt):(f=h=t,_)}function Nr(){R!==t&&AE(R),G=0,f=D=h=R=t}function ur(){return R===t?_:je(vp())}function Ur(){var bt=vp(),Pn=be(bt);if(f=arguments,h=this,D=bt,Pn){if(R===t)return ve(D);if(ee)return AE(R),R=qc(He,c),de(D)}return R===t&&(R=qc(He,c)),_}return Ur.cancel=Nr,Ur.flush=ur,Ur}var OU=Ce(function(a,c){return sE(a,1,c)}),NU=Ce(function(a,c,p){return sE(a,sn(c)||0,p)});function UU(a){return Ti(a,ut)}function bp(a,c){if(typeof a!="function"||c!=null&&typeof c!="function")throw new tn(i);var p=function(){var f=arguments,h=c?c.apply(this,f):f[0],S=p.cache;if(S.has(h))return S.get(h);var _=a.apply(this,f);return p.cache=S.set(h,_)||S,_};return p.cache=new(bp.Cache||hi),p}bp.Cache=hi;function wp(a){if(typeof a!="function")throw new tn(i);return function(){var c=arguments;switch(c.length){case 0:return!a.call(this);case 1:return!a.call(this,c[0]);case 2:return!a.call(this,c[0],c[1]);case 3:return!a.call(this,c[0],c[1],c[2])}return!a.apply(this,c)}}function HU(a){return d_(2,a)}var BU=RO(function(a,c){c=c.length==1&&ke(c[0])?st(c[0],Ir(xe())):st(jt(c,1),Ir(xe()));var p=c.length;return Ce(function(f){for(var h=-1,S=Jt(f.length,p);++h<S;)f[h]=c[h].call(this,f[h]);return Fr(a,this,f)})}),CT=Ce(function(a,c){var p=Vi(c,Ga(CT));return Ti(a,ie,t,c,p)}),x_=Ce(function(a,c){var p=Vi(c,Ga(x_));return Ti(a,le,t,c,p)}),VU=xi(function(a,c){return Ti(a,ge,t,t,t,c)});function WU(a,c){if(typeof a!="function")throw new tn(i);return c=c===t?c:De(c),Ce(a,c)}function $U(a,c){if(typeof a!="function")throw new tn(i);return c=c==null?0:Mt(De(c),0),Ce(function(p){var f=p[c],h=Gi(p,0,c);return f&&Bi(h,f),Fr(a,this,h)})}function jU(a,c,p){var f=!0,h=!0;if(typeof a!="function")throw new tn(i);return pt(p)&&(f="leading"in p?!!p.leading:f,h="trailing"in p?!!p.trailing:h),T_(a,c,{leading:f,maxWait:c,trailing:h})}function zU(a){return f_(a,1)}function qU(a,c){return CT(xT(c),a)}function GU(){if(!arguments.length)return[];var a=arguments[0];return ke(a)?a:[a]}function KU(a){return nn(a,g)}function QU(a,c){return c=typeof c=="function"?c:t,nn(a,g,c)}function YU(a){return nn(a,m|g)}function ZU(a,c){return c=typeof c=="function"?c:t,nn(a,m|g,c)}function XU(a,c){return c==null||aE(a,c,Ct(c))}function An(a,c){return a===c||a!==a&&c!==c}var JU=gp(sT),eH=gp(function(a,c){return a>=c}),Wo=mE(function(){return arguments}())?mE:function(a){return yt(a)&&Je.call(a,"callee")&&!Xw.call(a,"callee")},ke=B.isArray,tH=Fw?Ir(Fw):lO;function Sr(a){return a!=null&&Ep(a.length)&&!vi(a)}function vt(a){return yt(a)&&Sr(a)}function rH(a){return a===!0||a===!1||yt(a)&&cr(a)==$t}var Ki=h1||qT,nH=Iw?Ir(Iw):uO;function iH(a){return yt(a)&&a.nodeType===1&&!Gc(a)}function oH(a){if(a==null)return!0;if(Sr(a)&&(ke(a)||typeof a=="string"||typeof a.splice=="function"||Ki(a)||Ka(a)||Wo(a)))return!a.length;var c=er(a);if(c==En||c==_n)return!a.size;if(zc(a))return!uT(a).length;for(var p in a)if(Je.call(a,p))return!1;return!0}function aH(a,c){return Wc(a,c)}function sH(a,c,p){p=typeof p=="function"?p:t;var f=p?p(a,c):t;return f===t?Wc(a,c,t,p):!!f}function OT(a){if(!yt(a))return!1;var c=cr(a);return c==fi||c==Fo||typeof a.message=="string"&&typeof a.name=="string"&&!Gc(a)}function cH(a){return typeof a=="number"&&eE(a)}function vi(a){if(!pt(a))return!1;var c=cr(a);return c==Ca||c==sw||c==ht||c==LI}function S_(a){return typeof a=="number"&&a==De(a)}function Ep(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=N}function pt(a){var c=typeof a;return a!=null&&(c=="object"||c=="function")}function yt(a){return a!=null&&typeof a=="object"}var v_=Cw?Ir(Cw):mO;function lH(a,c){return a===c||lT(a,c,RT(c))}function uH(a,c,p){return p=typeof p=="function"?p:t,lT(a,c,RT(c),p)}function pH(a){return b_(a)&&a!=+a}function mH(a){if(QO(a))throw new Re(n);return fE(a)}function fH(a){return a===null}function dH(a){return a==null}function b_(a){return typeof a=="number"||yt(a)&&cr(a)==Ac}function Gc(a){if(!yt(a)||cr(a)!=di)return!1;var c=Zu(a);if(c===null)return!0;var p=Je.call(c,"constructor")&&c.constructor;return typeof p=="function"&&p instanceof p&&Gu.call(p)==u1}var NT=Ow?Ir(Ow):fO;function gH(a){return S_(a)&&a>=-N&&a<=N}var w_=Nw?Ir(Nw):dO;function _p(a){return typeof a=="string"||!ke(a)&&yt(a)&&cr(a)==Mc}function Or(a){return typeof a=="symbol"||yt(a)&&cr(a)==Uu}var Ka=Uw?Ir(Uw):gO;function hH(a){return a===t}function yH(a){return yt(a)&&er(a)==Dc}function TH(a){return yt(a)&&cr(a)==II}var xH=gp(pT),SH=gp(function(a,c){return a<=c});function E_(a){if(!a)return[];if(Sr(a))return _p(a)?Rn(a):xr(a);if(Ic&&a[Ic])return XC(a[Ic]());var c=er(a),p=c==En?Xy:c==_n?ju:Qa;return p(a)}function bi(a){if(!a)return a===0?a:0;if(a=sn(a),a===F||a===-F){var c=a<0?-1:1;return c*j}return a===a?a:0}function De(a){var c=bi(a),p=c%1;return c===c?p?c-p:c:0}function __(a){return a?Uo(De(a),0,Q):0}function sn(a){if(typeof a=="number")return a;if(Or(a))return X;if(pt(a)){var c=typeof a.valueOf=="function"?a.valueOf():a;a=pt(c)?c+"":c}if(typeof a!="string")return a===0?a:+a;a=jw(a);var p=tC.test(a);return p||nC.test(a)?CC(a.slice(2),p?2:8):eC.test(a)?X:+a}function R_(a){return zn(a,vr(a))}function vH(a){return a?Uo(De(a),-N,N):a===0?a:0}function Xe(a){return a==null?"":Cr(a)}var bH=za(function(a,c){if(zc(c)||Sr(c)){zn(c,Ct(c),a);return}for(var p in c)Je.call(c,p)&&Hc(a,p,c[p])}),k_=za(function(a,c){zn(c,vr(c),a)}),Rp=za(function(a,c,p,f){zn(c,vr(c),a,f)}),wH=za(function(a,c,p,f){zn(c,Ct(c),a,f)}),EH=xi(iT);function _H(a,c){var p=ja(a);return c==null?p:oE(p,c)}var RH=Ce(function(a,c){a=rt(a);var p=-1,f=c.length,h=f>2?c[2]:t;for(h&&lr(c[0],c[1],h)&&(f=1);++p<f;)for(var S=c[p],_=vr(S),R=-1,D=_.length;++R<D;){var G=_[R],K=a[G];(K===t||An(K,Va[G])&&!Je.call(a,G))&&(a[G]=S[G])}return a}),kH=Ce(function(a){return a.push(t,jE),Fr(A_,t,a)});function AH(a,c){return Bw(a,xe(c,3),jn)}function PH(a,c){return Bw(a,xe(c,3),aT)}function MH(a,c){return a==null?a:oT(a,xe(c,3),vr)}function DH(a,c){return a==null?a:uE(a,xe(c,3),vr)}function LH(a,c){return a&&jn(a,xe(c,3))}function FH(a,c){return a&&aT(a,xe(c,3))}function IH(a){return a==null?[]:sp(a,Ct(a))}function CH(a){return a==null?[]:sp(a,vr(a))}function UT(a,c,p){var f=a==null?t:Ho(a,c);return f===t?p:f}function OH(a,c){return a!=null&&GE(a,c,oO)}function HT(a,c){return a!=null&&GE(a,c,aO)}var NH=HE(function(a,c,p){c!=null&&typeof c.toString!="function"&&(c=Ku.call(c)),a[c]=p},VT(br)),UH=HE(function(a,c,p){c!=null&&typeof c.toString!="function"&&(c=Ku.call(c)),Je.call(a,c)?a[c].push(p):a[c]=[p]},xe),HH=Ce(Vc);function Ct(a){return Sr(a)?nE(a):uT(a)}function vr(a){return Sr(a)?nE(a,!0):hO(a)}function BH(a,c){var p={};return c=xe(c,3),jn(a,function(f,h,S){yi(p,c(f,h,S),f)}),p}function VH(a,c){var p={};return c=xe(c,3),jn(a,function(f,h,S){yi(p,h,c(f,h,S))}),p}var WH=za(function(a,c,p){cp(a,c,p)}),A_=za(function(a,c,p,f){cp(a,c,p,f)}),$H=xi(function(a,c){var p={};if(a==null)return p;var f=!1;c=st(c,function(S){return S=qi(S,a),f||(f=S.length>1),S}),zn(a,ET(a),p),f&&(p=nn(p,m|d|g,NO));for(var h=c.length;h--;)hT(p,c[h]);return p});function jH(a,c){return P_(a,wp(xe(c)))}var zH=xi(function(a,c){return a==null?{}:TO(a,c)});function P_(a,c){if(a==null)return{};var p=st(ET(a),function(f){return[f]});return c=xe(c),SE(a,p,function(f,h){return c(f,h[0])})}function qH(a,c,p){c=qi(c,a);var f=-1,h=c.length;for(h||(h=1,a=t);++f<h;){var S=a==null?t:a[qn(c[f])];S===t&&(f=h,S=p),a=vi(S)?S.call(a):S}return a}function GH(a,c,p){return a==null?a:$c(a,c,p)}function KH(a,c,p,f){return f=typeof f=="function"?f:t,a==null?a:$c(a,c,p,f)}var M_=WE(Ct),D_=WE(vr);function QH(a,c,p){var f=ke(a),h=f||Ki(a)||Ka(a);if(c=xe(c,4),p==null){var S=a&&a.constructor;h?p=f?new S:[]:pt(a)?p=vi(S)?ja(Zu(a)):{}:p={}}return(h?en:jn)(a,function(_,R,D){return c(p,_,R,D)}),p}function YH(a,c){return a==null?!0:hT(a,c)}function ZH(a,c,p){return a==null?a:_E(a,c,xT(p))}function XH(a,c,p,f){return f=typeof f=="function"?f:t,a==null?a:_E(a,c,xT(p),f)}function Qa(a){return a==null?[]:Zy(a,Ct(a))}function JH(a){return a==null?[]:Zy(a,vr(a))}function e2(a,c,p){return p===t&&(p=c,c=t),p!==t&&(p=sn(p),p=p===p?p:0),c!==t&&(c=sn(c),c=c===c?c:0),Uo(sn(a),c,p)}function t2(a,c,p){return c=bi(c),p===t?(p=c,c=0):p=bi(p),a=sn(a),sO(a,c,p)}function r2(a,c,p){if(p&&typeof p!="boolean"&&lr(a,c,p)&&(c=p=t),p===t&&(typeof c=="boolean"?(p=c,c=t):typeof a=="boolean"&&(p=a,a=t)),a===t&&c===t?(a=0,c=1):(a=bi(a),c===t?(c=a,a=0):c=bi(c)),a>c){var f=a;a=c,c=f}if(p||a%1||c%1){var h=tE();return Jt(a+h*(c-a+IC("1e-"+((h+"").length-1))),c)}return fT(a,c)}var n2=qa(function(a,c,p){return c=c.toLowerCase(),a+(p?L_(c):c)});function L_(a){return BT(Xe(a).toLowerCase())}function F_(a){return a=Xe(a),a&&a.replace(oC,GC).replace(EC,"")}function i2(a,c,p){a=Xe(a),c=Cr(c);var f=a.length;p=p===t?f:Uo(De(p),0,f);var h=p;return p-=c.length,p>=0&&a.slice(p,h)==c}function o2(a){return a=Xe(a),a&&HI.test(a)?a.replace(uw,KC):a}function a2(a){return a=Xe(a),a&&zI.test(a)?a.replace(Cy,"\\$&"):a}var s2=qa(function(a,c,p){return a+(p?"-":"")+c.toLowerCase()}),c2=qa(function(a,c,p){return a+(p?" ":"")+c.toLowerCase()}),l2=OE("toLowerCase");function u2(a,c,p){a=Xe(a),c=De(c);var f=c?Ba(a):0;if(!c||f>=c)return a;var h=(c-f)/2;return dp(tp(h),p)+a+dp(ep(h),p)}function p2(a,c,p){a=Xe(a),c=De(c);var f=c?Ba(a):0;return c&&f<c?a+dp(c-f,p):a}function m2(a,c,p){a=Xe(a),c=De(c);var f=c?Ba(a):0;return c&&f<c?dp(c-f,p)+a:a}function f2(a,c,p){return p||c==null?c=0:c&&(c=+c),S1(Xe(a).replace(Oy,""),c||0)}function d2(a,c,p){return(p?lr(a,c,p):c===t)?c=1:c=De(c),dT(Xe(a),c)}function g2(){var a=arguments,c=Xe(a[0]);return a.length<3?c:c.replace(a[1],a[2])}var h2=qa(function(a,c,p){return a+(p?"_":"")+c.toLowerCase()});function y2(a,c,p){return p&&typeof p!="number"&&lr(a,c,p)&&(c=p=t),p=p===t?Q:p>>>0,p?(a=Xe(a),a&&(typeof c=="string"||c!=null&&!NT(c))&&(c=Cr(c),!c&&Ha(a))?Gi(Rn(a),0,p):a.split(c,p)):[]}var T2=qa(function(a,c,p){return a+(p?" ":"")+BT(c)});function x2(a,c,p){return a=Xe(a),p=p==null?0:Uo(De(p),0,a.length),c=Cr(c),a.slice(p,p+c.length)==c}function S2(a,c,p){var f=T.templateSettings;p&&lr(a,c,p)&&(c=t),a=Xe(a),c=Rp({},c,f,$E);var h=Rp({},c.imports,f.imports,$E),S=Ct(h),_=Zy(h,S),R,D,G=0,K=c.interpolate||Hu,ee="__p += '",oe=Jy((c.escape||Hu).source+"|"+K.source+"|"+(K===pw?JI:Hu).source+"|"+(c.evaluate||Hu).source+"|$","g"),de="//# sourceURL="+(Je.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++PC+"]")+`
`;a.replace(oe,function(be,He,je,Nr,ur,Ur){return je||(je=Nr),ee+=a.slice(G,Ur).replace(aC,QC),He&&(R=!0,ee+=`' +
__e(`+He+`) +
'`),ur&&(D=!0,ee+=`';
`+ur+`;
__p += '`),je&&(ee+=`' +
((__t = (`+je+`)) == null ? '' : __t) +
'`),G=Ur+be.length,be}),ee+=`';
`;var ve=Je.call(c,"variable")&&c.variable;if(!ve)ee=`with (obj) {
`+ee+`
}
`;else if(ZI.test(ve))throw new Re(o);ee=(D?ee.replace(CI,""):ee).replace(OI,"$1").replace(NI,"$1;"),ee="function("+(ve||"obj")+`) {
`+(ve?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(R?", __e = _.escape":"")+(D?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ee+`return __p
}`;var Fe=C_(function(){return Ye(S,de+"return "+ee).apply(t,_)});if(Fe.source=ee,OT(Fe))throw Fe;return Fe}function v2(a){return Xe(a).toLowerCase()}function b2(a){return Xe(a).toUpperCase()}function w2(a,c,p){if(a=Xe(a),a&&(p||c===t))return jw(a);if(!a||!(c=Cr(c)))return a;var f=Rn(a),h=Rn(c),S=zw(f,h),_=qw(f,h)+1;return Gi(f,S,_).join("")}function E2(a,c,p){if(a=Xe(a),a&&(p||c===t))return a.slice(0,Kw(a)+1);if(!a||!(c=Cr(c)))return a;var f=Rn(a),h=qw(f,Rn(c))+1;return Gi(f,0,h).join("")}function _2(a,c,p){if(a=Xe(a),a&&(p||c===t))return a.replace(Oy,"");if(!a||!(c=Cr(c)))return a;var f=Rn(a),h=zw(f,Rn(c));return Gi(f,h).join("")}function R2(a,c){var p=Wt,f=gt;if(pt(c)){var h="separator"in c?c.separator:h;p="length"in c?De(c.length):p,f="omission"in c?Cr(c.omission):f}a=Xe(a);var S=a.length;if(Ha(a)){var _=Rn(a);S=_.length}if(p>=S)return a;var R=p-Ba(f);if(R<1)return f;var D=_?Gi(_,0,R).join(""):a.slice(0,R);if(h===t)return D+f;if(_&&(R+=D.length-R),NT(h)){if(a.slice(R).search(h)){var G,K=D;for(h.global||(h=Jy(h.source,Xe(mw.exec(h))+"g")),h.lastIndex=0;G=h.exec(K);)var ee=G.index;D=D.slice(0,ee===t?R:ee)}}else if(a.indexOf(Cr(h),R)!=R){var oe=D.lastIndexOf(h);oe>-1&&(D=D.slice(0,oe))}return D+f}function k2(a){return a=Xe(a),a&&UI.test(a)?a.replace(lw,r1):a}var A2=qa(function(a,c,p){return a+(p?" ":"")+c.toUpperCase()}),BT=OE("toUpperCase");function I_(a,c,p){return a=Xe(a),c=p?t:c,c===t?ZC(a)?o1(a):WC(a):a.match(c)||[]}var C_=Ce(function(a,c){try{return Fr(a,t,c)}catch(p){return OT(p)?p:new Re(p)}}),P2=xi(function(a,c){return en(c,function(p){p=qn(p),yi(a,p,IT(a[p],a))}),a});function M2(a){var c=a==null?0:a.length,p=xe();return a=c?st(a,function(f){if(typeof f[1]!="function")throw new tn(i);return[p(f[0]),f[1]]}):[],Ce(function(f){for(var h=-1;++h<c;){var S=a[h];if(Fr(S[0],this,f))return Fr(S[1],this,f)}})}function D2(a){return rO(nn(a,m))}function VT(a){return function(){return a}}function L2(a,c){return a==null||a!==a?c:a}var F2=UE(),I2=UE(!0);function br(a){return a}function WT(a){return dE(typeof a=="function"?a:nn(a,m))}function C2(a){return hE(nn(a,m))}function O2(a,c){return yE(a,nn(c,m))}var N2=Ce(function(a,c){return function(p){return Vc(p,a,c)}}),U2=Ce(function(a,c){return function(p){return Vc(a,p,c)}});function $T(a,c,p){var f=Ct(c),h=sp(c,f);p==null&&!(pt(c)&&(h.length||!f.length))&&(p=c,c=a,a=this,h=sp(c,Ct(c)));var S=!(pt(p)&&"chain"in p)||!!p.chain,_=vi(a);return en(h,function(R){var D=c[R];a[R]=D,_&&(a.prototype[R]=function(){var G=this.__chain__;if(S||G){var K=a(this.__wrapped__),ee=K.__actions__=xr(this.__actions__);return ee.push({func:D,args:arguments,thisArg:a}),K.__chain__=G,K}return D.apply(a,Bi([this.value()],arguments))})}),a}function H2(){return It._===this&&(It._=p1),this}function jT(){}function B2(a){return a=De(a),Ce(function(c){return TE(c,a)})}var V2=vT(st),W2=vT(Hw),$2=vT(qy);function O_(a){return AT(a)?Gy(qn(a)):xO(a)}function j2(a){return function(c){return a==null?t:Ho(a,c)}}var z2=BE(),q2=BE(!0);function zT(){return[]}function qT(){return!1}function G2(){return{}}function K2(){return""}function Q2(){return!0}function Y2(a,c){if(a=De(a),a<1||a>N)return[];var p=Q,f=Jt(a,Q);c=xe(c),a-=Q;for(var h=Yy(f,c);++p<a;)c(p);return h}function Z2(a){return ke(a)?st(a,qn):Or(a)?[a]:xr(r_(Xe(a)))}function X2(a){var c=++l1;return Xe(a)+c}var J2=fp(function(a,c){return a+c},0),eB=bT("ceil"),tB=fp(function(a,c){return a/c},1),rB=bT("floor");function nB(a){return a&&a.length?ap(a,br,sT):t}function iB(a,c){return a&&a.length?ap(a,xe(c,2),sT):t}function oB(a){return Ww(a,br)}function aB(a,c){return Ww(a,xe(c,2))}function sB(a){return a&&a.length?ap(a,br,pT):t}function cB(a,c){return a&&a.length?ap(a,xe(c,2),pT):t}var lB=fp(function(a,c){return a*c},1),uB=bT("round"),pB=fp(function(a,c){return a-c},0);function mB(a){return a&&a.length?Qy(a,br):0}function fB(a,c){return a&&a.length?Qy(a,xe(c,2)):0}return T.after=CU,T.ary=f_,T.assign=bH,T.assignIn=k_,T.assignInWith=Rp,T.assignWith=wH,T.at=EH,T.before=d_,T.bind=IT,T.bindAll=P2,T.bindKey=g_,T.castArray=GU,T.chain=u_,T.chunk=rN,T.compact=nN,T.concat=iN,T.cond=M2,T.conforms=D2,T.constant=VT,T.countBy=mU,T.create=_H,T.curry=h_,T.curryRight=y_,T.debounce=T_,T.defaults=RH,T.defaultsDeep=kH,T.defer=OU,T.delay=NU,T.difference=oN,T.differenceBy=aN,T.differenceWith=sN,T.drop=cN,T.dropRight=lN,T.dropRightWhile=uN,T.dropWhile=pN,T.fill=mN,T.filter=dU,T.flatMap=yU,T.flatMapDeep=TU,T.flatMapDepth=xU,T.flatten=a_,T.flattenDeep=fN,T.flattenDepth=dN,T.flip=UU,T.flow=F2,T.flowRight=I2,T.fromPairs=gN,T.functions=IH,T.functionsIn=CH,T.groupBy=SU,T.initial=yN,T.intersection=TN,T.intersectionBy=xN,T.intersectionWith=SN,T.invert=NH,T.invertBy=UH,T.invokeMap=bU,T.iteratee=WT,T.keyBy=wU,T.keys=Ct,T.keysIn=vr,T.map=Sp,T.mapKeys=BH,T.mapValues=VH,T.matches=C2,T.matchesProperty=O2,T.memoize=bp,T.merge=WH,T.mergeWith=A_,T.method=N2,T.methodOf=U2,T.mixin=$T,T.negate=wp,T.nthArg=B2,T.omit=$H,T.omitBy=jH,T.once=HU,T.orderBy=EU,T.over=V2,T.overArgs=BU,T.overEvery=W2,T.overSome=$2,T.partial=CT,T.partialRight=x_,T.partition=_U,T.pick=zH,T.pickBy=P_,T.property=O_,T.propertyOf=j2,T.pull=EN,T.pullAll=c_,T.pullAllBy=_N,T.pullAllWith=RN,T.pullAt=kN,T.range=z2,T.rangeRight=q2,T.rearg=VU,T.reject=AU,T.remove=AN,T.rest=WU,T.reverse=LT,T.sampleSize=MU,T.set=GH,T.setWith=KH,T.shuffle=DU,T.slice=PN,T.sortBy=IU,T.sortedUniq=ON,T.sortedUniqBy=NN,T.split=y2,T.spread=$U,T.tail=UN,T.take=HN,T.takeRight=BN,T.takeRightWhile=VN,T.takeWhile=WN,T.tap=nU,T.throttle=jU,T.thru=xp,T.toArray=E_,T.toPairs=M_,T.toPairsIn=D_,T.toPath=Z2,T.toPlainObject=R_,T.transform=QH,T.unary=zU,T.union=$N,T.unionBy=jN,T.unionWith=zN,T.uniq=qN,T.uniqBy=GN,T.uniqWith=KN,T.unset=YH,T.unzip=FT,T.unzipWith=l_,T.update=ZH,T.updateWith=XH,T.values=Qa,T.valuesIn=JH,T.without=QN,T.words=I_,T.wrap=qU,T.xor=YN,T.xorBy=ZN,T.xorWith=XN,T.zip=JN,T.zipObject=eU,T.zipObjectDeep=tU,T.zipWith=rU,T.entries=M_,T.entriesIn=D_,T.extend=k_,T.extendWith=Rp,$T(T,T),T.add=J2,T.attempt=C_,T.camelCase=n2,T.capitalize=L_,T.ceil=eB,T.clamp=e2,T.clone=KU,T.cloneDeep=YU,T.cloneDeepWith=ZU,T.cloneWith=QU,T.conformsTo=XU,T.deburr=F_,T.defaultTo=L2,T.divide=tB,T.endsWith=i2,T.eq=An,T.escape=o2,T.escapeRegExp=a2,T.every=fU,T.find=gU,T.findIndex=i_,T.findKey=AH,T.findLast=hU,T.findLastIndex=o_,T.findLastKey=PH,T.floor=rB,T.forEach=p_,T.forEachRight=m_,T.forIn=MH,T.forInRight=DH,T.forOwn=LH,T.forOwnRight=FH,T.get=UT,T.gt=JU,T.gte=eH,T.has=OH,T.hasIn=HT,T.head=s_,T.identity=br,T.includes=vU,T.indexOf=hN,T.inRange=t2,T.invoke=HH,T.isArguments=Wo,T.isArray=ke,T.isArrayBuffer=tH,T.isArrayLike=Sr,T.isArrayLikeObject=vt,T.isBoolean=rH,T.isBuffer=Ki,T.isDate=nH,T.isElement=iH,T.isEmpty=oH,T.isEqual=aH,T.isEqualWith=sH,T.isError=OT,T.isFinite=cH,T.isFunction=vi,T.isInteger=S_,T.isLength=Ep,T.isMap=v_,T.isMatch=lH,T.isMatchWith=uH,T.isNaN=pH,T.isNative=mH,T.isNil=dH,T.isNull=fH,T.isNumber=b_,T.isObject=pt,T.isObjectLike=yt,T.isPlainObject=Gc,T.isRegExp=NT,T.isSafeInteger=gH,T.isSet=w_,T.isString=_p,T.isSymbol=Or,T.isTypedArray=Ka,T.isUndefined=hH,T.isWeakMap=yH,T.isWeakSet=TH,T.join=vN,T.kebabCase=s2,T.last=an,T.lastIndexOf=bN,T.lowerCase=c2,T.lowerFirst=l2,T.lt=xH,T.lte=SH,T.max=nB,T.maxBy=iB,T.mean=oB,T.meanBy=aB,T.min=sB,T.minBy=cB,T.stubArray=zT,T.stubFalse=qT,T.stubObject=G2,T.stubString=K2,T.stubTrue=Q2,T.multiply=lB,T.nth=wN,T.noConflict=H2,T.noop=jT,T.now=vp,T.pad=u2,T.padEnd=p2,T.padStart=m2,T.parseInt=f2,T.random=r2,T.reduce=RU,T.reduceRight=kU,T.repeat=d2,T.replace=g2,T.result=qH,T.round=uB,T.runInContext=P,T.sample=PU,T.size=LU,T.snakeCase=h2,T.some=FU,T.sortedIndex=MN,T.sortedIndexBy=DN,T.sortedIndexOf=LN,T.sortedLastIndex=FN,T.sortedLastIndexBy=IN,T.sortedLastIndexOf=CN,T.startCase=T2,T.startsWith=x2,T.subtract=pB,T.sum=mB,T.sumBy=fB,T.template=S2,T.times=Y2,T.toFinite=bi,T.toInteger=De,T.toLength=__,T.toLower=v2,T.toNumber=sn,T.toSafeInteger=vH,T.toString=Xe,T.toUpper=b2,T.trim=w2,T.trimEnd=E2,T.trimStart=_2,T.truncate=R2,T.unescape=k2,T.uniqueId=X2,T.upperCase=A2,T.upperFirst=BT,T.each=p_,T.eachRight=m_,T.first=s_,$T(T,function(){var a={};return jn(T,function(c,p){Je.call(T.prototype,p)||(a[p]=c)}),a}(),{chain:!1}),T.VERSION=e,en(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){T[a].placeholder=T}),en(["drop","take"],function(a,c){We.prototype[a]=function(p){p=p===t?1:Mt(De(p),0);var f=this.__filtered__&&!c?new We(this):this.clone();return f.__filtered__?f.__takeCount__=Jt(p,f.__takeCount__):f.__views__.push({size:Jt(p,Q),type:a+(f.__dir__<0?"Right":"")}),f},We.prototype[a+"Right"]=function(p){return this.reverse()[a](p).reverse()}}),en(["filter","map","takeWhile"],function(a,c){var p=c+1,f=p==A||p==Z;We.prototype[a]=function(h){var S=this.clone();return S.__iteratees__.push({iteratee:xe(h,3),type:p}),S.__filtered__=S.__filtered__||f,S}}),en(["head","last"],function(a,c){var p="take"+(c?"Right":"");We.prototype[a]=function(){return this[p](1).value()[0]}}),en(["initial","tail"],function(a,c){var p="drop"+(c?"":"Right");We.prototype[a]=function(){return this.__filtered__?new We(this):this[p](1)}}),We.prototype.compact=function(){return this.filter(br)},We.prototype.find=function(a){return this.filter(a).head()},We.prototype.findLast=function(a){return this.reverse().find(a)},We.prototype.invokeMap=Ce(function(a,c){return typeof a=="function"?new We(this):this.map(function(p){return Vc(p,a,c)})}),We.prototype.reject=function(a){return this.filter(wp(xe(a)))},We.prototype.slice=function(a,c){a=De(a);var p=this;return p.__filtered__&&(a>0||c<0)?new We(p):(a<0?p=p.takeRight(-a):a&&(p=p.drop(a)),c!==t&&(c=De(c),p=c<0?p.dropRight(-c):p.take(c-a)),p)},We.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},We.prototype.toArray=function(){return this.take(Q)},jn(We.prototype,function(a,c){var p=/^(?:filter|find|map|reject)|While$/.test(c),f=/^(?:head|last)$/.test(c),h=T[f?"take"+(c=="last"?"Right":""):c],S=f||/^find/.test(c);h&&(T.prototype[c]=function(){var _=this.__wrapped__,R=f?[1]:arguments,D=_ instanceof We,G=R[0],K=D||ke(_),ee=function(He){var je=h.apply(T,Bi([He],R));return f&&oe?je[0]:je};K&&p&&typeof G=="function"&&G.length!=1&&(D=K=!1);var oe=this.__chain__,de=!!this.__actions__.length,ve=S&&!oe,Fe=D&&!de;if(!S&&K){_=Fe?_:new We(this);var be=a.apply(_,R);return be.__actions__.push({func:xp,args:[ee],thisArg:t}),new rn(be,oe)}return ve&&Fe?a.apply(this,R):(be=this.thru(ee),ve?f?be.value()[0]:be.value():be)})}),en(["pop","push","shift","sort","splice","unshift"],function(a){var c=zu[a],p=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",f=/^(?:pop|shift)$/.test(a);T.prototype[a]=function(){var h=arguments;if(f&&!this.__chain__){var S=this.value();return c.apply(ke(S)?S:[],h)}return this[p](function(_){return c.apply(ke(_)?_:[],h)})}}),jn(We.prototype,function(a,c){var p=T[c];if(p){var f=p.name+"";Je.call($a,f)||($a[f]=[]),$a[f].push({name:c,func:p})}}),$a[mp(t,E).name]=[{name:"wrapper",func:t}],We.prototype.clone=k1,We.prototype.reverse=A1,We.prototype.value=P1,T.prototype.at=iU,T.prototype.chain=oU,T.prototype.commit=aU,T.prototype.next=sU,T.prototype.plant=lU,T.prototype.reverse=uU,T.prototype.toJSON=T.prototype.valueOf=T.prototype.value=pU,T.prototype.first=T.prototype.head,Ic&&(T.prototype[Ic]=cU),T},Wi=a1();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(It._=Wi,define(function(){return Wi})):Io?((Io.exports=Wi)._=Wi,Wy._=Wi):It._=Wi}).call(mc)});var PL=Ya((L1e,AL)=>{"use strict";AL.exports=RL;function RL(t,e,r){t instanceof RegExp&&(t=_L(t,r)),e instanceof RegExp&&(e=_L(e,r));var n=kL(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}function _L(t,e){var r=e.match(t);return r?r[0]:null}RL.range=kL;function kL(t,e,r){var n,i,o,s,l,u=r.indexOf(t),m=r.indexOf(e,u+1),d=u;if(u>=0&&m>0){if(t===e)return[u,m];for(n=[],o=r.length;d>=0&&!l;)d==u?(n.push(d),u=r.indexOf(t,d+1)):n.length==1?l=[n.pop(),m]:(i=n.pop(),i<o&&(o=i,s=m),m=r.indexOf(e,d+1)),d=u<m&&u>=0?u:m;n.length&&(l=[o,s])}return l}});var NL=Ya((F1e,OL)=>{var ML=PL();OL.exports=o7;var DL="\0SLASH"+Math.random()+"\0",LL="\0OPEN"+Math.random()+"\0",Vv="\0CLOSE"+Math.random()+"\0",FL="\0COMMA"+Math.random()+"\0",IL="\0PERIOD"+Math.random()+"\0";function Bv(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function n7(t){return t.split("\\\\").join(DL).split("\\{").join(LL).split("\\}").join(Vv).split("\\,").join(FL).split("\\.").join(IL)}function i7(t){return t.split(DL).join("\\").split(LL).join("{").split(Vv).join("}").split(FL).join(",").split(IL).join(".")}function CL(t){if(!t)return[""];var e=[],r=ML("{","}",t);if(!r)return t.split(",");var n=r.pre,i=r.body,o=r.post,s=n.split(",");s[s.length-1]+="{"+i+"}";var l=CL(o);return o.length&&(s[s.length-1]+=l.shift(),s.push.apply(s,l)),e.push.apply(e,s),e}function o7(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),fu(n7(t),!0).map(i7)):[]}function a7(t){return"{"+t+"}"}function s7(t){return/^-?0\d/.test(t)}function c7(t,e){return t<=e}function l7(t,e){return t>=e}function fu(t,e){var r=[],n=ML("{","}",t);if(!n)return[t];var i=n.pre,o=n.post.length?fu(n.post,!1):[""];if(/\$$/.test(n.pre))for(var s=0;s<o.length;s++){var l=i+"{"+n.body+"}"+o[s];r.push(l)}else{var u=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),m=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),d=u||m,g=n.body.indexOf(",")>=0;if(!d&&!g)return n.post.match(/,.*\}/)?(t=n.pre+"{"+n.body+Vv+n.post,fu(t)):[t];var y;if(d)y=n.body.split(/\.\./);else if(y=CL(n.body),y.length===1&&(y=fu(y[0],!1).map(a7),y.length===1))return o.map(function(H){return n.pre+y[0]+H});var x;if(d){var w=Bv(y[0]),E=Bv(y[1]),U=Math.max(y[0].length,y[1].length),V=y.length==3?Math.abs(Bv(y[2])):1,z=c7,ie=E<w;ie&&(V*=-1,z=l7);var le=y.some(s7);x=[];for(var ue=w;z(ue,E);ue+=V){var ge;if(m)ge=String.fromCharCode(ue),ge==="\\"&&(ge="");else if(ge=String(ue),le){var ut=U-ge.length;if(ut>0){var Wt=new Array(ut+1).join("0");ue<0?ge="-"+Wt+ge.slice(1):ge=Wt+ge}}x.push(ge)}}else{x=[];for(var gt=0;gt<y.length;gt++)x.push.apply(x,fu(y[gt],!1))}for(var gt=0;gt<x.length;gt++)for(var s=0;s<o.length;s++){var l=i+x[gt]+o[s];(!e||d||l)&&r.push(l)}}return r}});var Q8={};U_(Q8,{default:()=>MI});module.exports=xB(Q8);var GT="cursorless.command",Ap=class{constructor(e){this.baseTitle=e}get title(){return`Cursorless: ${this.baseTitle}`}},Tt=class extends Ap{constructor(){super(...arguments);this.isVisible=!1}},wt=class extends Ap{constructor(){super(...arguments);this.isVisible=!0}};var Z8={"cursorless.toggleDecorations":new wt("Toggle decorations"),"cursorless.recomputeDecorationStyles":new wt("Recompute decoration styles"),"cursorless.recordTestCase":new wt("Record test case"),"cursorless.recordOneTestCaseThenPause":new wt("Record one test case, then pause"),"cursorless.pauseRecording":new wt("Pause test case recording"),"cursorless.resumeRecording":new wt("Resume test case recording"),"cursorless.recordScopeTests.showUnimplementedFacets":new wt("Bulk record unimplemented scope facets"),"cursorless.recordScopeTests.saveActiveDocument":new wt("Bulk save scope tests for the active document"),"cursorless.showDocumentation":new wt("Show documentation"),"cursorless.showInstallationDependencies":new wt("Show installation dependencies"),"cursorless.showScopeVisualizer":new wt("Show the scope visualizer"),"cursorless.hideScopeVisualizer":new wt("Hide the scope visualizer"),"cursorless.analyzeCommandHistory":new wt("Analyze collected command history"),"cursorless.tutorial.start":new Tt("Start a tutorial"),"cursorless.tutorial.next":new wt("Tutorial next"),"cursorless.tutorial.previous":new wt("Tutorial previous"),"cursorless.tutorial.restart":new wt("Tutorial restart"),"cursorless.tutorial.resume":new wt("Tutorial resume"),"cursorless.tutorial.list":new wt("Tutorial list"),"cursorless.documentationOpened":new Tt("Used by talon to notify us that the docs have been opened; for use with tutorial"),"cursorless.command":new Tt("The core cursorless command"),"cursorless.repeatPreviousCommand":new wt("Repeat the previous Cursorless command"),"cursorless.showQuickPick":new Tt("Pop up a quick pick of all cursorless commands"),"cursorless.showCheatsheet":new Tt("Display the cursorless cheatsheet"),"cursorless.internal.updateCheatsheetDefaults":new Tt("Update the default values of the cheatsheet payload used on the website and for local development. Be sure to run this on stock community and cursorless."),"cursorless.private.logQuickActions":new Tt("Log the quick actions available at the current cursor position"),"cursorless.takeSnapshot":new Tt("Take a snapshot of the current editor state"),"cursorless.keyboard.escape":new Tt("Should be mapped to the escape key when using cursorless keyboard. By default, exits modal keyboard mode, but changes behaviour when Cursorless is expecting a continuation keystroke.  For example, when you type a color and Cursorless is waiting for a character, it cancels the color and switches back to modal mode."),"cursorless.keyboard.targeted.targetHat":new Tt("Sets the keyboard target to the given hat"),"cursorless.keyboard.targeted.targetScope":new Tt("Sets the keyboard target to the scope containing the current target"),"cursorless.keyboard.targeted.targetSelection":new Tt("Sets the keyboard target to the current selection"),"cursorless.keyboard.targeted.clearTarget":new Tt("Clears the current keyboard target"),"cursorless.keyboard.targeted.runActionOnTarget":new Tt("Run the given action on the current keyboard target"),"cursorless.keyboard.modal.modeOn":new Tt("Turn on the cursorless modal mode"),"cursorless.keyboard.modal.modeOff":new Tt("Turn off the cursorless modal mode"),"cursorless.keyboard.modal.modeToggle":new Tt("Toggle the cursorless modal mode"),"cursorless.keyboard.undoTarget":new Tt("Undo keyboard targeting changes"),"cursorless.keyboard.redoTarget":new Tt("Redo keyboard targeting changes"),"cursorless.migrateSnippets":new Tt("Migrate snippets from the old Cursorless format to the new community format")};var Pp=class{constructor(e,r){this.callback=e;this.debounceDelayMs=r;this.timeoutHandle=null;this.run=this.run.bind(this)}run(){this.timeoutHandle!=null&&clearTimeout(this.timeoutHandle),this.timeoutHandle=setTimeout(()=>{this.callback(),this.timeoutHandle=null},this.debounceDelayMs)}dispose(){this.timeoutHandle!=null&&clearTimeout(this.timeoutHandle)}};var Mp=class extends Error{constructor(e){super(`Language '${e}' is not implemented yet; See https://www.cursorless.org/docs/contributing/adding-a-new-language/`),this.name="UnsupportedLanguageError"}};var Dp=class extends Error{constructor(){super("Cursorless Talon version is ahead of Cursorless VSCode extension version. Please update Cursorless VSCode.")}},xt=class extends Error{constructor(e){super(`Couldn't find containing ${e}.`),this.name="NoContainingScopeError"}};var Lp=class{constructor(){this.signals={prePhrase:{getVersion:async()=>null}}}async getFocusedElementType(){return this.focusedElementType}setFocusedElementType(e){this.focusedElementType=e}};var SB=typeof global=="object"&&global&&global.Object===Object&&global,Fp=SB;var vB=typeof self=="object"&&self&&self.Object===Object&&self,bB=Fp||vB||Function("return this")(),Ot=bB;var wB=Ot.Symbol,pr=wB;var B_=Object.prototype,EB=B_.hasOwnProperty,_B=B_.toString,Kc=pr?pr.toStringTag:void 0;function RB(t){var e=EB.call(t,Kc),r=t[Kc];try{t[Kc]=void 0;var n=!0}catch{}var i=_B.call(t);return n&&(e?t[Kc]=r:delete t[Kc]),i}var V_=RB;var kB=Object.prototype,AB=kB.toString;function PB(t){return AB.call(t)}var W_=PB;var MB="[object Null]",DB="[object Undefined]",$_=pr?pr.toStringTag:void 0;function LB(t){return t==null?t===void 0?DB:MB:$_&&$_ in Object(t)?V_(t):W_(t)}var Mn=LB;function FB(t){return t!=null&&typeof t=="object"}var mr=FB;var IB="[object Symbol]";function CB(t){return typeof t=="symbol"||mr(t)&&Mn(t)==IB}var Br=CB;function OB(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var cn=OB;var NB=Array.isArray,et=NB;var UB=1/0,j_=pr?pr.prototype:void 0,z_=j_?j_.toString:void 0;function q_(t){if(typeof t=="string")return t;if(et(t))return cn(t,q_)+"";if(Br(t))return z_?z_.call(t):"";var e=t+"";return e=="0"&&1/t==-UB?"-0":e}var G_=q_;var HB=/\s/;function BB(t){for(var e=t.length;e--&&HB.test(t.charAt(e)););return e}var K_=BB;var VB=/^\s+/;function WB(t){return t&&t.slice(0,K_(t)+1).replace(VB,"")}var Q_=WB;function $B(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Vr=$B;var Y_=NaN,jB=/^[-+]0x[0-9a-f]+$/i,zB=/^0b[01]+$/i,qB=/^0o[0-7]+$/i,GB=parseInt;function KB(t){if(typeof t=="number")return t;if(Br(t))return Y_;if(Vr(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Vr(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Q_(t);var r=zB.test(t);return r||qB.test(t)?GB(t.slice(2),r?2:8):jB.test(t)?Y_:+t}var Z_=KB;var X_=1/0,QB=17976931348623157e292;function YB(t){if(!t)return t===0?t:0;if(t=Z_(t),t===X_||t===-X_){var e=t<0?-1:1;return e*QB}return t===t?t:0}var Za=YB;function ZB(t){var e=Za(t),r=e%1;return e===e?r?e-r:e:0}var Ip=ZB;function XB(t){return t}var wr=XB;var JB="[object AsyncFunction]",eV="[object Function]",tV="[object GeneratorFunction]",rV="[object Proxy]";function nV(t){if(!Vr(t))return!1;var e=Mn(t);return e==eV||e==tV||e==JB||e==rV}var Cp=nV;var iV=Ot["__core-js_shared__"],Op=iV;var J_=function(){var t=/[^.]+$/.exec(Op&&Op.keys&&Op.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function oV(t){return!!J_&&J_ in t}var e0=oV;var aV=Function.prototype,sV=aV.toString;function cV(t){if(t!=null){try{return sV.call(t)}catch{}try{return t+""}catch{}}return""}var Ei=cV;var lV=/[\\^$.*+?()[\]{}|]/g,uV=/^\[object .+?Constructor\]$/,pV=Function.prototype,mV=Object.prototype,fV=pV.toString,dV=mV.hasOwnProperty,gV=RegExp("^"+fV.call(dV).replace(lV,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function hV(t){if(!Vr(t)||e0(t))return!1;var e=Cp(t)?gV:uV;return e.test(Ei(t))}var t0=hV;function yV(t,e){return t?.[e]}var r0=yV;function TV(t,e){var r=r0(t,e);return t0(r)?r:void 0}var Er=TV;var xV=Er(Ot,"WeakMap"),$o=xV;var SV=$o&&new $o,KT=SV;var n0=Object.create,vV=function(){function t(){}return function(e){if(!Vr(e))return{};if(n0)return n0(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),Np=vV;function bV(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var i0=bV;function wV(){}var Xa=wV;var EV=4294967295;function Up(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=EV,this.__views__=[]}Up.prototype=Np(Xa.prototype);Up.prototype.constructor=Up;var Ja=Up;function _V(){}var Hp=_V;var RV=KT?function(t){return KT.get(t)}:Hp,Bp=RV;var kV={},QT=kV;var AV=Object.prototype,PV=AV.hasOwnProperty;function MV(t){for(var e=t.name+"",r=QT[e],n=PV.call(QT,e)?r.length:0;n--;){var i=r[n],o=i.func;if(o==null||o==t)return i.name}return e}var es=MV;function Vp(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}Vp.prototype=Np(Xa.prototype);Vp.prototype.constructor=Vp;var Qi=Vp;function DV(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var Yi=DV;function LV(t){if(t instanceof Ja)return t.clone();var e=new Qi(t.__wrapped__,t.__chain__);return e.__actions__=Yi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var o0=LV;var FV=Object.prototype,IV=FV.hasOwnProperty;function Wp(t){if(mr(t)&&!et(t)&&!(t instanceof Ja)){if(t instanceof Qi)return t;if(IV.call(t,"__wrapped__"))return o0(t)}return new Qi(t)}Wp.prototype=Xa.prototype;Wp.prototype.constructor=Wp;var a0=Wp;function CV(t){var e=es(t),r=a0[e];if(typeof r!="function"||!(e in Ja.prototype))return!1;if(t===r)return!0;var n=Bp(r);return!!n&&t===n[0]}var YT=CV;var OV=800,NV=16,UV=Date.now;function HV(t){var e=0,r=0;return function(){var n=UV(),i=NV-(n-r);if(r=n,i>0){if(++e>=OV)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var s0=HV;function BV(t){return function(){return t}}var c0=BV;var VV=function(){try{var t=Er(Object,"defineProperty");return t({},"",{}),t}catch{}}(),ZT=VV;var WV=ZT?function(t,e){return ZT(t,"toString",{configurable:!0,enumerable:!1,value:c0(e),writable:!0})}:wr,l0=WV;var $V=s0(l0),$p=$V;function jV(t,e,r,n){for(var i=t.length,o=r+(n?1:-1);n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}var jp=jV;function zV(t){return t!==t}var u0=zV;function qV(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}var p0=qV;function GV(t,e,r){return e===e?p0(t,e,r):jp(t,u0,r)}var zp=GV;function KV(t,e){var r=t==null?0:t.length;return!!r&&zp(t,e,0)>-1}var m0=KV;var QV=9007199254740991,YV=/^(?:0|[1-9]\d*)$/;function ZV(t,e){var r=typeof t;return e=e??QV,!!e&&(r=="number"||r!="symbol"&&YV.test(t))&&t>-1&&t%1==0&&t<e}var ts=ZV;function XV(t,e){return t===e||t!==t&&e!==e}var rs=XV;var f0=Math.max;function JV(t,e,r){return e=f0(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,o=f0(n.length-e,0),s=Array(o);++i<o;)s[i]=n[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=n[i];return l[e]=r(s),i0(t,this,l)}}var qp=JV;function eW(t,e){return $p(qp(t,e,wr),t+"")}var ns=eW;var tW=9007199254740991;function rW(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=tW}var is=rW;function nW(t){return t!=null&&is(t.length)&&!Cp(t)}var Gn=nW;function iW(t,e,r){if(!Vr(r))return!1;var n=typeof e;return(n=="number"?Gn(r)&&ts(e,r.length):n=="string"&&e in r)?rs(r[e],t):!1}var jo=iW;var oW=Object.prototype;function aW(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||oW;return t===r}var d0=aW;function sW(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var Gp=sW;var cW="[object Arguments]";function lW(t){return mr(t)&&Mn(t)==cW}var XT=lW;var g0=Object.prototype,uW=g0.hasOwnProperty,pW=g0.propertyIsEnumerable,mW=XT(function(){return arguments}())?XT:function(t){return mr(t)&&uW.call(t,"callee")&&!pW.call(t,"callee")},os=mW;function fW(){return!1}var h0=fW;var x0=typeof exports=="object"&&exports&&!exports.nodeType&&exports,y0=x0&&typeof module=="object"&&module&&!module.nodeType&&module,dW=y0&&y0.exports===x0,T0=dW?Ot.Buffer:void 0,gW=T0?T0.isBuffer:void 0,hW=gW||h0,Qc=hW;var yW="[object Arguments]",TW="[object Array]",xW="[object Boolean]",SW="[object Date]",vW="[object Error]",bW="[object Function]",wW="[object Map]",EW="[object Number]",_W="[object Object]",RW="[object RegExp]",kW="[object Set]",AW="[object String]",PW="[object WeakMap]",MW="[object ArrayBuffer]",DW="[object DataView]",LW="[object Float32Array]",FW="[object Float64Array]",IW="[object Int8Array]",CW="[object Int16Array]",OW="[object Int32Array]",NW="[object Uint8Array]",UW="[object Uint8ClampedArray]",HW="[object Uint16Array]",BW="[object Uint32Array]",ot={};ot[LW]=ot[FW]=ot[IW]=ot[CW]=ot[OW]=ot[NW]=ot[UW]=ot[HW]=ot[BW]=!0;ot[yW]=ot[TW]=ot[MW]=ot[xW]=ot[DW]=ot[SW]=ot[vW]=ot[bW]=ot[wW]=ot[EW]=ot[_W]=ot[RW]=ot[kW]=ot[AW]=ot[PW]=!1;function VW(t){return mr(t)&&is(t.length)&&!!ot[Mn(t)]}var S0=VW;function WW(t){return function(e){return t(e)}}var as=WW;var v0=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Yc=v0&&typeof module=="object"&&module&&!module.nodeType&&module,$W=Yc&&Yc.exports===v0,JT=$W&&Fp.process,jW=function(){try{var t=Yc&&Yc.require&&Yc.require("util").types;return t||JT&&JT.binding&&JT.binding("util")}catch{}}(),ex=jW;var b0=ex&&ex.isTypedArray,zW=b0?as(b0):S0,Kp=zW;var qW=Object.prototype,GW=qW.hasOwnProperty;function KW(t,e){var r=et(t),n=!r&&os(t),i=!r&&!n&&Qc(t),o=!r&&!n&&!i&&Kp(t),s=r||n||i||o,l=s?Gp(t.length,String):[],u=l.length;for(var m in t)(e||GW.call(t,m))&&!(s&&(m=="length"||i&&(m=="offset"||m=="parent")||o&&(m=="buffer"||m=="byteLength"||m=="byteOffset")||ts(m,u)))&&l.push(m);return l}var w0=KW;function QW(t,e){return function(r){return t(e(r))}}var E0=QW;var YW=E0(Object.keys,Object),_0=YW;var ZW=Object.prototype,XW=ZW.hasOwnProperty;function JW(t){if(!d0(t))return _0(t);var e=[];for(var r in Object(t))XW.call(t,r)&&r!="constructor"&&e.push(r);return e}var R0=JW;function e$(t){return Gn(t)?w0(t):R0(t)}var Zi=e$;var t$=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r$=/^\w*$/;function n$(t,e){if(et(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||Br(t)?!0:r$.test(t)||!t$.test(t)||e!=null&&t in Object(e)}var ss=n$;var i$=Er(Object,"create"),_i=i$;function o$(){this.__data__=_i?_i(null):{},this.size=0}var k0=o$;function a$(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var A0=a$;var s$="__lodash_hash_undefined__",c$=Object.prototype,l$=c$.hasOwnProperty;function u$(t){var e=this.__data__;if(_i){var r=e[t];return r===s$?void 0:r}return l$.call(e,t)?e[t]:void 0}var P0=u$;var p$=Object.prototype,m$=p$.hasOwnProperty;function f$(t){var e=this.__data__;return _i?e[t]!==void 0:m$.call(e,t)}var M0=f$;var d$="__lodash_hash_undefined__";function g$(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=_i&&e===void 0?d$:e,this}var D0=g$;function cs(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}cs.prototype.clear=k0;cs.prototype.delete=A0;cs.prototype.get=P0;cs.prototype.has=M0;cs.prototype.set=D0;var tx=cs;function h$(){this.__data__=[],this.size=0}var L0=h$;function y$(t,e){for(var r=t.length;r--;)if(rs(t[r][0],e))return r;return-1}var Xi=y$;var T$=Array.prototype,x$=T$.splice;function S$(t){var e=this.__data__,r=Xi(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():x$.call(e,r,1),--this.size,!0}var F0=S$;function v$(t){var e=this.__data__,r=Xi(e,t);return r<0?void 0:e[r][1]}var I0=v$;function b$(t){return Xi(this.__data__,t)>-1}var C0=b$;function w$(t,e){var r=this.__data__,n=Xi(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var O0=w$;function ls(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ls.prototype.clear=L0;ls.prototype.delete=F0;ls.prototype.get=I0;ls.prototype.has=C0;ls.prototype.set=O0;var Ji=ls;var E$=Er(Ot,"Map"),eo=E$;function _$(){this.size=0,this.__data__={hash:new tx,map:new(eo||Ji),string:new tx}}var N0=_$;function R$(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var U0=R$;function k$(t,e){var r=t.__data__;return U0(e)?r[typeof e=="string"?"string":"hash"]:r.map}var to=k$;function A$(t){var e=to(this,t).delete(t);return this.size-=e?1:0,e}var H0=A$;function P$(t){return to(this,t).get(t)}var B0=P$;function M$(t){return to(this,t).has(t)}var V0=M$;function D$(t,e){var r=to(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var W0=D$;function us(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}us.prototype.clear=N0;us.prototype.delete=H0;us.prototype.get=B0;us.prototype.has=V0;us.prototype.set=W0;var zo=us;var L$="Expected a function";function rx(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(L$);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=t.apply(this,n);return r.cache=o.set(i,s)||o,s};return r.cache=new(rx.Cache||zo),r}rx.Cache=zo;var Zc=rx;var F$=500;function I$(t){var e=Zc(t,function(n){return r.size===F$&&r.clear(),n}),r=e.cache;return e}var $0=I$;var C$=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,O$=/\\(\\)?/g,N$=$0(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(C$,function(r,n,i,o){e.push(i?o.replace(O$,"$1"):n||r)}),e}),j0=N$;function U$(t){return t==null?"":G_(t)}var Dn=U$;function H$(t,e){return et(t)?t:ss(t,e)?[t]:j0(Dn(t))}var Qp=H$;var B$=1/0;function V$(t){if(typeof t=="string"||Br(t))return t;var e=t+"";return e=="0"&&1/t==-B$?"-0":e}var ro=V$;function W$(t,e){e=Qp(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[ro(e[r++])];return r&&r==n?t:void 0}var ps=W$;function $$(t,e,r){var n=t==null?void 0:ps(t,e);return n===void 0?r:n}var qo=$$;function j$(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var ms=j$;var z0=pr?pr.isConcatSpreadable:void 0;function z$(t){return et(t)||os(t)||!!(z0&&t&&t[z0])}var q0=z$;function G0(t,e,r,n,i){var o=-1,s=t.length;for(r||(r=q0),i||(i=[]);++o<s;){var l=t[o];e>0&&r(l)?e>1?G0(l,e-1,r,n,i):ms(i,l):n||(i[i.length]=l)}return i}var fs=G0;function q$(t){var e=t==null?0:t.length;return e?fs(t,1):[]}var at=q$;function G$(t){return $p(qp(t,void 0,at),t+"")}var K0=G$;function K$(t){return function(e){return t?.[e]}}var Q0=K$;var Q$={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Y$=Q0(Q$),Y0=Y$;var Z$=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,X$="\\u0300-\\u036f",J$="\\ufe20-\\ufe2f",ej="\\u20d0-\\u20ff",tj=X$+J$+ej,rj="["+tj+"]",nj=RegExp(rj,"g");function ij(t){return t=Dn(t),t&&t.replace(Z$,Y0).replace(nj,"")}var nx=ij;function oj(){this.__data__=new Ji,this.size=0}var Z0=oj;function aj(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var X0=aj;function sj(t){return this.__data__.get(t)}var J0=sj;function cj(t){return this.__data__.has(t)}var eR=cj;var lj=200;function uj(t,e){var r=this.__data__;if(r instanceof Ji){var n=r.__data__;if(!eo||n.length<lj-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new zo(n)}return r.set(t,e),this.size=r.size,this}var tR=uj;function ds(t){var e=this.__data__=new Ji(t);this.size=e.size}ds.prototype.clear=Z0;ds.prototype.delete=X0;ds.prototype.get=J0;ds.prototype.has=eR;ds.prototype.set=tR;var gs=ds;function pj(t,e){for(var r=-1,n=t==null?0:t.length,i=0,o=[];++r<n;){var s=t[r];e(s,r,t)&&(o[i++]=s)}return o}var Yp=pj;function mj(){return[]}var rR=mj;var fj=Object.prototype,dj=fj.propertyIsEnumerable,nR=Object.getOwnPropertySymbols,gj=nR?function(t){return t==null?[]:(t=Object(t),Yp(nR(t),function(e){return dj.call(t,e)}))}:rR,iR=gj;function hj(t,e,r){var n=e(t);return et(t)?n:ms(n,r(t))}var oR=hj;function yj(t){return oR(t,Zi,iR)}var ix=yj;var Tj=Er(Ot,"DataView"),Zp=Tj;var xj=Er(Ot,"Promise"),Xp=xj;var Sj=Er(Ot,"Set"),no=Sj;var aR="[object Map]",vj="[object Object]",sR="[object Promise]",cR="[object Set]",lR="[object WeakMap]",uR="[object DataView]",bj=Ei(Zp),wj=Ei(eo),Ej=Ei(Xp),_j=Ei(no),Rj=Ei($o),Go=Mn;(Zp&&Go(new Zp(new ArrayBuffer(1)))!=uR||eo&&Go(new eo)!=aR||Xp&&Go(Xp.resolve())!=sR||no&&Go(new no)!=cR||$o&&Go(new $o)!=lR)&&(Go=function(t){var e=Mn(t),r=e==vj?t.constructor:void 0,n=r?Ei(r):"";if(n)switch(n){case bj:return uR;case wj:return aR;case Ej:return sR;case _j:return cR;case Rj:return lR}return e});var ox=Go;var kj=Ot.Uint8Array,ax=kj;function Aj(){var t=arguments.length;if(!t)return[];for(var e=Array(t-1),r=arguments[0],n=t;n--;)e[n-1]=arguments[n];return ms(et(r)?Yi(r):[r],fs(e,1))}var Xc=Aj;var Pj="__lodash_hash_undefined__";function Mj(t){return this.__data__.set(t,Pj),this}var pR=Mj;function Dj(t){return this.__data__.has(t)}var mR=Dj;function Jp(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new zo;++e<r;)this.add(t[e])}Jp.prototype.add=Jp.prototype.push=pR;Jp.prototype.has=mR;var em=Jp;function Lj(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var fR=Lj;function Fj(t,e){return t.has(e)}var tm=Fj;var Ij=1,Cj=2;function Oj(t,e,r,n,i,o){var s=r&Ij,l=t.length,u=e.length;if(l!=u&&!(s&&u>l))return!1;var m=o.get(t),d=o.get(e);if(m&&d)return m==e&&d==t;var g=-1,y=!0,x=r&Cj?new em:void 0;for(o.set(t,e),o.set(e,t);++g<l;){var w=t[g],E=e[g];if(n)var U=s?n(E,w,g,e,t,o):n(w,E,g,t,e,o);if(U!==void 0){if(U)continue;y=!1;break}if(x){if(!fR(e,function(V,z){if(!tm(x,z)&&(w===V||i(w,V,r,n,o)))return x.push(z)})){y=!1;break}}else if(!(w===E||i(w,E,r,n,o))){y=!1;break}}return o.delete(t),o.delete(e),y}var rm=Oj;function Nj(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}var dR=Nj;function Uj(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var hs=Uj;var Hj=1,Bj=2,Vj="[object Boolean]",Wj="[object Date]",$j="[object Error]",jj="[object Map]",zj="[object Number]",qj="[object RegExp]",Gj="[object Set]",Kj="[object String]",Qj="[object Symbol]",Yj="[object ArrayBuffer]",Zj="[object DataView]",gR=pr?pr.prototype:void 0,sx=gR?gR.valueOf:void 0;function Xj(t,e,r,n,i,o,s){switch(r){case Zj:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Yj:return!(t.byteLength!=e.byteLength||!o(new ax(t),new ax(e)));case Vj:case Wj:case zj:return rs(+t,+e);case $j:return t.name==e.name&&t.message==e.message;case qj:case Kj:return t==e+"";case jj:var l=dR;case Gj:var u=n&Hj;if(l||(l=hs),t.size!=e.size&&!u)return!1;var m=s.get(t);if(m)return m==e;n|=Bj,s.set(t,e);var d=rm(l(t),l(e),n,i,o,s);return s.delete(t),d;case Qj:if(sx)return sx.call(t)==sx.call(e)}return!1}var hR=Xj;var Jj=1,e3=Object.prototype,t3=e3.hasOwnProperty;function r3(t,e,r,n,i,o){var s=r&Jj,l=ix(t),u=l.length,m=ix(e),d=m.length;if(u!=d&&!s)return!1;for(var g=u;g--;){var y=l[g];if(!(s?y in e:t3.call(e,y)))return!1}var x=o.get(t),w=o.get(e);if(x&&w)return x==e&&w==t;var E=!0;o.set(t,e),o.set(e,t);for(var U=s;++g<u;){y=l[g];var V=t[y],z=e[y];if(n)var ie=s?n(z,V,y,e,t,o):n(V,z,y,t,e,o);if(!(ie===void 0?V===z||i(V,z,r,n,o):ie)){E=!1;break}U||(U=y=="constructor")}if(E&&!U){var le=t.constructor,ue=e.constructor;le!=ue&&"constructor"in t&&"constructor"in e&&!(typeof le=="function"&&le instanceof le&&typeof ue=="function"&&ue instanceof ue)&&(E=!1)}return o.delete(t),o.delete(e),E}var yR=r3;var n3=1,TR="[object Arguments]",xR="[object Array]",nm="[object Object]",i3=Object.prototype,SR=i3.hasOwnProperty;function o3(t,e,r,n,i,o){var s=et(t),l=et(e),u=s?xR:ox(t),m=l?xR:ox(e);u=u==TR?nm:u,m=m==TR?nm:m;var d=u==nm,g=m==nm,y=u==m;if(y&&Qc(t)){if(!Qc(e))return!1;s=!0,d=!1}if(y&&!d)return o||(o=new gs),s||Kp(t)?rm(t,e,r,n,i,o):hR(t,e,u,r,n,i,o);if(!(r&n3)){var x=d&&SR.call(t,"__wrapped__"),w=g&&SR.call(e,"__wrapped__");if(x||w){var E=x?t.value():t,U=w?e.value():e;return o||(o=new gs),i(E,U,r,n,o)}}return y?(o||(o=new gs),yR(t,e,r,n,i,o)):!1}var vR=o3;function bR(t,e,r,n,i){return t===e?!0:t==null||e==null||!mr(t)&&!mr(e)?t!==t&&e!==e:vR(t,e,r,n,bR,i)}var ys=bR;var a3=1,s3=2;function c3(t,e,r,n){var i=r.length,o=i,s=!n;if(t==null)return!o;for(t=Object(t);i--;){var l=r[i];if(s&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++i<o;){l=r[i];var u=l[0],m=t[u],d=l[1];if(s&&l[2]){if(m===void 0&&!(u in t))return!1}else{var g=new gs;if(n)var y=n(m,d,u,t,e,g);if(!(y===void 0?ys(d,m,a3|s3,n,g):y))return!1}}return!0}var wR=c3;function l3(t){return t===t&&!Vr(t)}var im=l3;function u3(t){for(var e=Zi(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,im(i)]}return e}var ER=u3;function p3(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var om=p3;function m3(t){var e=ER(t);return e.length==1&&e[0][2]?om(e[0][0],e[0][1]):function(r){return r===t||wR(r,t,e)}}var _R=m3;function f3(t,e){return t!=null&&e in Object(t)}var RR=f3;function d3(t,e,r){e=Qp(e,t);for(var n=-1,i=e.length,o=!1;++n<i;){var s=ro(e[n]);if(!(o=t!=null&&r(t,s)))break;t=t[s]}return o||++n!=i?o:(i=t==null?0:t.length,!!i&&is(i)&&ts(s,i)&&(et(t)||os(t)))}var kR=d3;function g3(t,e){return t!=null&&kR(t,e,RR)}var AR=g3;var h3=1,y3=2;function T3(t,e){return ss(t)&&im(e)?om(ro(t),e):function(r){var n=qo(r,t);return n===void 0&&n===e?AR(r,t):ys(e,n,h3|y3)}}var PR=T3;function x3(t){return function(e){return e?.[t]}}var am=x3;function S3(t){return function(e){return ps(e,t)}}var MR=S3;function v3(t){return ss(t)?am(ro(t)):MR(t)}var DR=v3;function b3(t){return typeof t=="function"?t:t==null?wr:typeof t=="object"?et(t)?PR(t[0],t[1]):_R(t):DR(t)}var io=b3;function w3(t){return function(e,r,n){for(var i=-1,o=Object(e),s=n(e),l=s.length;l--;){var u=s[t?l:++i];if(r(o[u],u,o)===!1)break}return e}}var LR=w3;var E3=LR(),FR=E3;function _3(t,e){return t&&FR(t,e,Zi)}var IR=_3;function R3(t,e){return function(r,n){if(r==null)return r;if(!Gn(r))return t(r,n);for(var i=r.length,o=e?i:-1,s=Object(r);(e?o--:++o<i)&&n(s[o],o,s)!==!1;);return r}}var CR=R3;var k3=CR(IR),OR=k3;function A3(t){return mr(t)&&Gn(t)}var NR=A3;function P3(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}var UR=P3;function M3(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var sm=M3;var HR=/[\\^$.*+?()[\]{}|]/g,D3=RegExp(HR.source);function L3(t){return t=Dn(t),t&&D3.test(t)?t.replace(HR,"\\$&"):t}var Wr=L3;var F3=Math.max,I3=Math.min;function C3(t,e,r){var n=t==null?0:t.length;if(!n)return-1;var i=n-1;return r!==void 0&&(i=Ip(r),i=r<0?F3(n+i,0):I3(i,n-1)),jp(t,io(e,3),i,!0)}var Ko=C3;function O3(t,e){var r=-1,n=Gn(t)?Array(t.length):[];return OR(t,function(i,o,s){n[++r]=e(i,o,s)}),n}var BR=O3;var N3="Expected a function",U3=8,H3=32,B3=128,V3=256;function W3(t){return K0(function(e){var r=e.length,n=r,i=Qi.prototype.thru;for(t&&e.reverse();n--;){var o=e[n];if(typeof o!="function")throw new TypeError(N3);if(i&&!s&&es(o)=="wrapper")var s=new Qi([],!0)}for(n=s?n:r;++n<r;){o=e[n];var l=es(o),u=l=="wrapper"?Bp(o):void 0;u&&YT(u[0])&&u[1]==(B3|U3|H3|V3)&&!u[4].length&&u[9]==1?s=s[es(u[0])].apply(s,u[3]):s=o.length==1&&YT(o)?s[l]():s.thru(o)}return function(){var m=arguments,d=m[0];if(s&&m.length==1&&et(d))return s.plant(d).value();for(var g=0,y=r?e[g].apply(this,m):d;++g<r;)y=e[g].call(this,y);return y}})}var VR=W3;var $3=VR(),cx=$3;function j3(t,e){return t>e}var WR=j3;function z3(t,e){return cn(e,function(r){return t[r]})}var $R=z3;function q3(t){return t==null?[]:$R(t,Zi(t))}var jR=q3;function G3(t,e){return ys(t,e)}var Ri=G3;function K3(t,e){return t<e}var zR=K3;function Q3(t,e,r){for(var n=-1,i=t.length;++n<i;){var o=t[n],s=e(o);if(s!=null&&(l===void 0?s===s&&!Br(s):r(s,l)))var l=s,u=o}return u}var cm=Q3;function Y3(t,e){return t&&t.length?cm(t,io(e,2),WR):void 0}var lx=Y3;function Z3(t,e){for(var r,n=-1,i=t.length;++n<i;){var o=e(t[n]);o!==void 0&&(r=r===void 0?o:r+o)}return r}var qR=Z3;function X3(t){return t&&t.length?cm(t,wr,zR):void 0}var ux=X3;function J3(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}var GR=J3;function ez(t,e){if(t!==e){var r=t!==void 0,n=t===null,i=t===t,o=Br(t),s=e!==void 0,l=e===null,u=e===e,m=Br(e);if(!l&&!m&&!o&&t>e||o&&s&&u&&!l&&!m||n&&s&&u||!r&&u||!i)return 1;if(!n&&!o&&!m&&t<e||m&&r&&i&&!n&&!o||l&&r&&i||!s&&i||!u)return-1}return 0}var KR=ez;function tz(t,e,r){for(var n=-1,i=t.criteria,o=e.criteria,s=i.length,l=r.length;++n<s;){var u=KR(i[n],o[n]);if(u){if(n>=l)return u;var m=r[n];return u*(m=="desc"?-1:1)}}return t.index-e.index}var QR=tz;function rz(t,e,r){e.length?e=cn(e,function(o){return et(o)?function(s){return ps(s,o.length===1?o[0]:o)}:o}):e=[wr];var n=-1;e=cn(e,as(io));var i=BR(t,function(o,s,l){var u=cn(e,function(m){return m(o)});return{criteria:u,index:++n,value:o}});return GR(i,function(o,s){return QR(o,s,r)})}var YR=rz;var nz=9007199254740991,iz=Math.floor;function oz(t,e){var r="";if(!t||e<1||e>nz)return r;do e%2&&(r+=t),e=iz(e/2),e&&(t+=t);while(e);return r}var ZR=oz;function az(t,e,r,n){for(var i=r-1,o=t.length;++i<o;)if(n(t[i],e))return i;return-1}var XR=az;var sz=Array.prototype,JR=sz.splice;function cz(t,e,r,n){var i=n?XR:zp,o=-1,s=e.length,l=t;for(t===e&&(e=Yi(e)),r&&(l=cn(t,as(r)));++o<s;)for(var u=0,m=e[o],d=r?r(m):m;(u=i(l,d,u,n))>-1;)l!==t&&JR.call(l,u,1),JR.call(t,u,1);return t}var ek=cz;function lz(t,e){return t&&t.length&&e&&e.length?ek(t,e):t}var tk=lz;var uz=ns(tk),fr=uz;var pz=Math.floor,mz=Math.random;function fz(t,e){return t+pz(mz()*(e-t+1))}var rk=fz;var dz=Math.ceil,gz=Math.max;function hz(t,e,r,n){for(var i=-1,o=gz(dz((e-t)/(r||1)),0),s=Array(o);o--;)s[n?o:++i]=t,t+=r;return s}var nk=hz;function yz(t){return function(e,r,n){return n&&typeof n!="number"&&jo(e,r,n)&&(r=n=void 0),e=Za(e),r===void 0?(r=e,e=0):r=Za(r),n=n===void 0?e<r?1:-1:Za(n),nk(e,r,n,t)}}var ik=yz;var Tz=ik(),px=Tz;function xz(t,e,r){return(r?jo(t,e,r):e===void 0)?e=1:e=Ip(e),ZR(Dn(t),e)}var mx=xz;function Sz(t,e){var r=-1,n=t.length,i=n-1;for(e=e===void 0?n:e;++r<e;){var o=rk(r,i),s=t[o];t[o]=t[r],t[r]=s}return t.length=e,t}var lm=Sz;function vz(t){return lm(Yi(t))}var ok=vz;function bz(t){return lm(jR(t))}var ak=bz;function wz(t){var e=et(t)?ok:ak;return e(t)}var fx=wz;var Ez=ns(function(t,e){if(t==null)return[];var r=e.length;return r>1&&jo(t,e[0],e[1])?e=[]:r>2&&jo(e[0],e[1],e[2])&&(e=[e[0]]),YR(t,fs(e,1),[])}),dx=Ez;function _z(t,e){return t&&t.length?qR(t,io(e,2)):0}var um=_z;var Rz=1/0,kz=no&&1/hs(new no([,-0]))[1]==Rz?function(t){return new no(t)}:Hp,sk=kz;var Az=200;function Pz(t,e,r){var n=-1,i=m0,o=t.length,s=!0,l=[],u=l;if(r)s=!1,i=UR;else if(o>=Az){var m=e?null:sk(t);if(m)return hs(m);s=!1,i=tm,u=new em}else u=e?[]:l;e:for(;++n<o;){var d=t[n],g=e?e(d):d;if(d=r||d!==0?d:0,s&&g===g){for(var y=u.length;y--;)if(u[y]===g)continue e;e&&u.push(g),l.push(d)}else i(u,g,r)||(u!==l&&u.push(g),l.push(d))}return l}var pm=Pz;function Mz(t){return t&&t.length?pm(t):[]}var Qo=Mz;function Dz(t,e){return e=typeof e=="function"?e:void 0,t&&t.length?pm(t,void 0,e):[]}var Jc=Dz;var Lz=Math.max;function Fz(t){if(!(t&&t.length))return[];var e=0;return t=Yp(t,function(r){if(NR(r))return e=Lz(r.length,e),!0}),Gp(e,function(r){return cn(t,am(r))})}var ck=Fz;var Iz=ns(ck),Dt=Iz;var mm=class{constructor(){this.commands={clipboardPaste:void 0,clipboardCopy:void 0,toggleLineComment:void 0,indentLine:void 0,outdentLine:void 0,rename:void 0,quickFix:void 0,revealDefinition:void 0,revealTypeDefinition:void 0,showHover:void 0,showDebugHover:void 0,extractVariable:void 0,fold:void 0,highlight:{acceptsLocation:!0},unfold:void 0,showReferences:void 0,insertLineAfter:void 0,gitAccept:void 0,gitRevert:void 0,gitStage:void 0,gitUnstage:void 0}}};var el=class{constructor(){this.clipboardContents=""}async readText(){return this.clipboardContents}async writeText(e){this.clipboardContents=e}};var tr=class{constructor(){this.listeners=[];this.notifyListeners=(...e)=>{this.listeners.forEach(r=>r(...e))};this.registerListener=this.registerListener.bind(this)}registerListener(e){return this.listeners.push(e),{dispose:()=>{fr(this.listeners,e)}}}};var fm={tokenHatSplittingMode:{preserveCase:!1,lettersToPreserve:[],symbolsToPreserve:[]},wordSeparators:["_"],decorationDebounceDelayMs:50,experimental:{snippetsDir:void 0,hatStability:"balanced",keyboardTargetFollowsSelection:!1},commandHistory:!1,debug:!1};var tl=class{constructor(){this.notifier=new tr;this.mocks={...fm};this.scopes=[];this.onDidChangeConfiguration=this.notifier.registerListener;this.onDidChangeConfiguration=this.onDidChangeConfiguration.bind(this)}getOwnConfiguration(e,r){if(r!=null){for(let{scope:n,values:i}of this.scopes)if(Oz(n,r))return qo(i,e)??qo(this.mocks,e)}return qo(this.mocks,e)}mockConfiguration(e,r){this.mocks[e]=r,this.notifier.notifyListeners()}mockConfigurationScope(e,r,n=!1){this.scopes.push({scope:e,values:r}),n||this.notifier.notifyListeners()}};function Oz(t,e){return t.languageId===e.languageId}var dm={hideInferenceWarning:!1,tutorialProgress:{}};var rl=class{constructor(){this.data={...dm}}get(e){return this.data[e]}set(e,r){return this.data[e]=r,Promise.resolve()}};var nl=class{async showMessage(e,r,n,...i){}};var gm=class{constructor(){this.configuration=new tl;this.messages=new nl;this.keyValueStore=new rl;this.clipboard=new el;this.capabilities=new mm;this.runMode="test";this.cursorlessVersion="0.0.0";this.workspaceFolders=void 0;this.disposables=[];this.quickPickReturnValue=void 0;this.onDidOpenTextDocument=Ts;this.onDidCloseTextDocument=Ts;this.onDidChangeActiveTextEditor=Ts;this.onDidChangeVisibleTextEditors=Ts;this.onDidChangeTextEditorSelection=Ts;this.onDidChangeTextEditorVisibleRanges=Ts}async flashRanges(e){}async setHighlightRanges(e,r,n){}mockAssetsRoot(e){this.assetsRoot_=e}get assetsRoot(){if(this.assetsRoot_==null)throw Error("Field `assetsRoot` has not yet been mocked");return this.assetsRoot_}get activeTextEditor(){throw Error("Not implemented")}get activeEditableTextEditor(){throw Error("Not implemented")}get visibleTextEditors(){throw Error("Not implemented")}get visibleNotebookEditors(){throw Error("Not implemented")}getEditableTextEditor(e){throw Error("Not implemented")}findInDocument(e,r){throw Error("Not implemented")}findInWorkspace(e){throw Error("Not implemented")}openTextDocument(e){throw Error("Not implemented")}openUntitledTextDocument(e){throw Error("Not implemented")}setQuickPickReturnValue(e){this.quickPickReturnValue=e}async showQuickPick(e,r){return this.quickPickReturnValue}showInputBox(e){throw Error("Not implemented")}executeCommand(e,...r){throw new Error("Method not implemented.")}onDidChangeTextDocument(e){throw Error("Not implemented")}disposeOnExit(...e){return this.disposables.push(...e),()=>fr(this.disposables,...e)}exit(){this.disposables.forEach(e=>e.dispose())}};function Ts(){return{dispose(){}}}var ye=class t{constructor(e,r){this.line=e,this.character=r}isEqual(e){return this.line===e.line&&this.character===e.character}isBefore(e){return this.line<e.line?!0:this.line>e.line?!1:this.character<e.character}isAfter(e){return this.line>e.line?!0:this.line<e.line?!1:this.character>e.character}isBeforeOrEqual(e){return this.isEqual(e)||this.isBefore(e)}isAfterOrEqual(e){return this.isEqual(e)||this.isAfter(e)}compareTo(e){return this.isBefore(e)?-1:this.isAfter(e)?1:0}with(e,r){return new t(e??this.line,r??this.character)}translate(e,r){return new t(this.line+(e??0),this.character+(r??0))}toEmptyRange(){return new Y(this,this)}concise(){return`${this.line}:${this.character}`}conciseOneBased(){return`${this.line+1}:${this.character+1}`}toString(){return this.concise()}};function lk(t,e,r){return t.positionAt(t.offsetAt(e)+r)}var Y=class t{constructor(...e){let[r,n]=e.length===2?e:[new ye(e[0],e[1]),new ye(e[2],e[3])];r.isBefore(n)?(this.start=r,this.end=n):(this.start=n,this.end=r)}get isEmpty(){return this.start.isEqual(this.end)}get isSingleLine(){return this.start.line===this.end.line}isRangeEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}contains(e){let[r,n]=e instanceof ye?[e,e]:[e.start,e.end];return r.isAfterOrEqual(this.start)&&n.isBeforeOrEqual(this.end)}intersection(e){let r=this.start.isAfter(e.start)?this.start:e.start,n=this.end.isBefore(e.end)?this.end:e.end;return r.isBeforeOrEqual(n)?new t(r,n):void 0}union(e){return new t(this.start.isBefore(e.start)?this.start:e.start,this.end.isAfter(e.end)?this.end:e.end)}with(e,r){return new t(e??this.start,r??this.end)}toSelection(e){return e?new $e(this.end,this.start):new $e(this.start,this.end)}concise(){return`${this.start.concise()}-${this.end.concise()}`}conciseOneBased(){return`${this.start.conciseOneBased()}-${this.end.conciseOneBased()}`}toString(){return`${this.start.concise()}-${this.end.concise()}`}};function Nz(t){let{source:e,flags:r}=t;return new RegExp(`(${e})$`,r.replace("m",""))}function Uz(t){let{source:e,flags:r}=t;return new RegExp(`^(${e})`,r.replace("m",""))}function uk(t){let e=new Map;function r(n){let i=e.get(n);return i==null&&(i=t(n),e.set(n,i)),i}return r}var hm=uk(Nz),ym=uk(Uz);function gx(t,e){return e.lastIndex=0,t.matchAll(e)}function ln(t,e,r){return Array.from(gx(t,e),r)}function Yo(t,e){return t.lastIndex=0,t.test(e)}function pk(t,e){return t.lastIndex=0,e.match(t)}function il(t,e){return ln(t,e,r=>({index:r.index,text:r[0]}))}var xs=class{constructor(e){this.original=e;this.configuration=e.configuration,this.keyValueStore=e.keyValueStore,this.clipboard=e.clipboard,this.messages=e.messages,this.capabilities=e.capabilities}flashRanges(e){return this.original.flashRanges(e)}setHighlightRanges(e,r,n){return this.original.setHighlightRanges(e,r,n)}onDidOpenTextDocument(e,r,n){return this.original.onDidOpenTextDocument(e,r,n)}onDidCloseTextDocument(e,r,n){return this.original.onDidCloseTextDocument(e,r,n)}onDidChangeActiveTextEditor(e,r,n){return this.original.onDidChangeActiveTextEditor(e,r,n)}onDidChangeVisibleTextEditors(e,r,n){return this.original.onDidChangeVisibleTextEditors(e,r,n)}onDidChangeTextEditorSelection(e,r,n){return this.original.onDidChangeTextEditorSelection(e,r,n)}onDidChangeTextEditorVisibleRanges(e,r,n){return this.original.onDidChangeTextEditorVisibleRanges(e,r,n)}get activeTextEditor(){return this.original.activeTextEditor}get activeEditableTextEditor(){return this.original.activeEditableTextEditor}get visibleTextEditors(){return this.original.visibleTextEditors}get visibleNotebookEditors(){return this.original.visibleNotebookEditors}get cursorlessVersion(){return this.original.cursorlessVersion}get assetsRoot(){return this.original.assetsRoot}get runMode(){return this.original.runMode}get workspaceFolders(){return this.original.workspaceFolders}findInDocument(e,r){return this.original.findInDocument(e,r)}findInWorkspace(e){return this.original.findInWorkspace(e)}openTextDocument(e){return this.original.openTextDocument(e)}openUntitledTextDocument(e){return this.original.openUntitledTextDocument(e)}showQuickPick(e,r){return this.original.showQuickPick(e,r)}showInputBox(e){return this.original.showInputBox(e)}getEditableTextEditor(e){return this.original.getEditableTextEditor(e)}executeCommand(e,...r){return this.original.executeCommand(e,...r)}onDidChangeTextDocument(e){return this.original.onDidChangeTextDocument(e)}disposeOnExit(...e){return this.original.disposeOnExit(...e)}};var Tm=class extends xs{constructor(r,n,i,o){super(r);this.fakeIde=n;this.isSilent=i;this.cursorlessSnippetsDir=o;this.messages=i?n.messages:r.messages,this.configuration=n.configuration,this.keyValueStore=n.keyValueStore,this.initializeConfiguration()}initializeConfiguration(){this.configuration.mockConfigurationScope({languageId:"css"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfigurationScope({languageId:"scss"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfigurationScope({languageId:"shellscript"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfiguration("experimental",{hatStability:this.configuration.getOwnConfiguration("experimental.hatStability"),snippetsDir:this.cursorlessSnippetsDir,keyboardTargetFollowsSelection:!1})}flashRanges(r){return this.isSilent?this.fakeIde.flashRanges(r):super.flashRanges(r)}setHighlightRanges(r,n,i){return this.isSilent?this.fakeIde.setHighlightRanges(r,n,i):super.setHighlightRanges(r,n,i)}async showQuickPick(r,n){return this.isSilent?this.fakeIde.showQuickPick(r,n):super.showQuickPick(r,n)}};function Zo(t,e,r,...n){return t.showMessage("warning",e,r,...n)}function mt(t,e,r,...n){return t.showMessage("error",e,r,...n)}var pe=(i=>(i[i.supported=0]="supported",i[i.supportedLegacy=1]="supportedLegacy",i[i.unsupported=2]="unsupported",i[i.notApplicable=3]="notApplicable",i))(pe||{});var{supported:ae,unsupported:Xo,notApplicable:J}=pe,hx={list:ae,disqualifyDelimiter:ae,switchStatementSubject:ae,ifStatement:ae,statement:ae,"statement.class":ae,"statement.iteration.document":ae,"statement.iteration.block":ae,class:ae,"class.iteration.document":ae,className:ae,"className.iteration.document":ae,"collectionItem.unenclosed":ae,"collectionItem.unenclosed.iteration":ae,namedFunction:ae,functionName:ae,"functionName.iteration.document":ae,"namedFunction.iteration.document":ae,functionCall:ae,functionCallee:ae,"argument.actual":ae,"argument.actual.iteration":ae,"argument.actual.method":ae,"argument.actual.method.iteration":ae,"argument.formal":ae,"argument.formal.iteration":ae,"argumentList.actual.empty":ae,"argumentList.actual.singleLine":ae,"argumentList.actual.multiLine":ae,"argumentList.actual.method.empty":ae,"argumentList.actual.method.singleLine":ae,"argumentList.actual.method.multiLine":ae,"argumentList.formal.empty":ae,"argumentList.formal.singleLine":ae,"argumentList.formal.multiLine":ae,"branch.if":ae,"branch.if.iteration":ae,"branch.switchCase":ae,"branch.switchCase.iteration":ae,"branch.ternary":ae,"branch.loop":ae,"comment.line":ae,"comment.block":ae,"string.singleLine":ae,"textFragment.comment.line":ae,"textFragment.comment.block":ae,"textFragment.string.singleLine":ae,"condition.if":ae,"condition.while":ae,"condition.doWhile":ae,"condition.for":ae,"condition.ternary":ae,"condition.switchCase":ae,"condition.switchCase.iteration":ae,"name.assignment":ae,"name.variable":ae,"name.function":ae,"name.class":ae,"name.field":ae,"name.iteration.block":ae,"name.iteration.document":ae,"name.argument.formal":ae,"name.argument.formal.iteration":ae,"value.assignment":ae,"value.variable":ae,"value.return":ae,"type.variable":ae,"type.argument.formal":ae,"type.argument.formal.iteration":ae,"type.field":ae,"type.field.iteration":ae,"type.enum":ae,"type.cast":ae,"type.class":ae,"type.return":ae,"interior.class":Xo,"interior.function":Xo,"interior.if":Xo,"interior.switchCase":Xo,"interior.ternary":Xo,"interior.loop":Xo,fieldAccess:Xo,element:J,tags:J,startTag:J,endTag:J,"interior.element":J,"textFragment.element":J,"interior.resource":J,"type.resource":J,"type.resource.iteration":J,"name.resource":J,"name.resource.iteration":J,"value.resource":J,"value.resource.iteration":J,map:J,"key.mapPair":J,"key.mapPair.iteration":J,"value.mapPair":J,"value.mapPair.iteration":J,"name.argument.actual":J,"name.argument.actual.iteration":J,"value.argument.actual":J,"value.argument.actual.iteration":J,"string.multiLine":J,"textFragment.string.multiLine":J,section:J,"section.iteration.document":J,"section.iteration.parent":J,"name.assignment.pattern":J,"name.variable.pattern":J,"value.variable.pattern":J,command:J,"interior.command":J,"type.alias":J,"value.typeAlias":J,notebookCell:J,"interior.cell":J,"class.iteration.block":J,"className.iteration.block":J,"functionName.iteration.block":J,"namedFunction.iteration.block":J,"branch.try":J,"branch.try.iteration":J,"interior.try":J,"key.attribute":J,"type.interface":J,"value.attribute":J,"value.yield":J,"value.field":J,environment:J,pairDelimiter:J,regularExpression:J},Hz={...hx,attribute:J,"argument.formal.lambda.iteration":J,"argument.formal.lambda":J,"argumentList.formal.lambda.empty":J,"argumentList.formal.lambda.multiLine":J,"argumentList.formal.lambda.singleLine":J,"interior.lambda":J,"value.return.lambda":J,anonymousFunction:J,"argument.actual.constructor.iteration":J,"argument.actual.constructor":J,"argument.formal.constructor.iteration":J,"argument.formal.constructor":J,"argumentList.actual.constructor.empty":J,"argumentList.actual.constructor.multiLine":J,"argumentList.actual.constructor.singleLine":J,"argumentList.formal.constructor.empty":J,"argumentList.formal.constructor.multiLine":J,"argumentList.formal.constructor.singleLine":J,"functionCall.constructor":J,"functionCallee.constructor":J,"functionName.constructor":J,"name.argument.formal.constructor.iteration":J,"name.argument.formal.constructor":J,"name.constructor":J,"namedFunction.constructor":J,"type.argument.formal.constructor.iteration":J,"type.argument.formal.constructor":J,"value.argument.formal.constructor.iteration":J,"value.argument.formal.constructor":J,"argument.formal.method.iteration":J,"argument.formal.method":J,"argumentList.formal.method.empty":J,"argumentList.formal.method.multiLine":J,"argumentList.formal.method.singleLine":J,"functionName.method.iteration.class":J,"functionName.method":J,"name.argument.formal.method.iteration":J,"name.argument.formal.method":J,"name.method":J,"namedFunction.method.iteration.class":J,"namedFunction.method":J,"type.argument.formal.method.iteration":J,"type.argument.formal.method":J,"value.argument.formal.method.iteration":J,"value.argument.formal.method":J,"name.foreach":J,"type.foreach":J,"value.foreach":J,"value.argument.formal":J,"value.argument.formal.iteration":J,"type.typeArgument":J,"type.typeArgument.iteration":J};var{supported:Ise,unsupported:Cse,notApplicable:Ose}=pe;var{supported:Te,unsupported:mk}=pe,Bz={...hx,attribute:Te,anonymousFunction:Te,"branch.try":Te,"branch.try.iteration":Te,"argument.actual.constructor":Te,"argument.actual.constructor.iteration":Te,"argument.formal.method":Te,"argument.formal.method.iteration":Te,"argument.formal.constructor":Te,"argument.formal.constructor.iteration":Te,"argument.formal.lambda":Te,"argument.formal.lambda.iteration":Te,"argumentList.actual.constructor.empty":Te,"argumentList.actual.constructor.singleLine":Te,"argumentList.actual.constructor.multiLine":Te,"argumentList.formal.constructor.empty":Te,"argumentList.formal.constructor.singleLine":Te,"argumentList.formal.constructor.multiLine":Te,"argumentList.formal.lambda.empty":Te,"argumentList.formal.lambda.singleLine":Te,"argumentList.formal.lambda.multiLine":Te,"argumentList.formal.method.empty":Te,"argumentList.formal.method.singleLine":Te,"argumentList.formal.method.multiLine":Te,"functionCall.constructor":Te,"functionCallee.constructor":Te,"functionName.constructor":Te,"functionName.method":Te,"functionName.method.iteration.class":Te,"namedFunction.method":Te,"namedFunction.method.iteration.class":Te,"namedFunction.constructor":Te,"name.argument.formal.method":Te,"name.argument.formal.method.iteration":Te,"name.argument.formal.constructor":Te,"name.argument.formal.constructor.iteration":Te,"name.constructor":Te,"name.foreach":Te,"name.method":Te,"value.argument.formal":Te,"value.argument.formal.iteration":Te,"value.argument.formal.method":Te,"value.argument.formal.method.iteration":Te,"value.argument.formal.constructor":Te,"value.argument.formal.constructor.iteration":Te,"value.foreach":Te,"value.return.lambda":Te,"value.field":Te,"type.argument.formal.method":Te,"type.argument.formal.method.iteration":Te,"type.argument.formal.constructor":Te,"type.argument.formal.constructor.iteration":Te,"type.foreach":Te,"type.typeArgument":Te,"type.typeArgument.iteration":Te,"interior.lambda":mk,"interior.try":mk};var{supported:Wse,unsupported:$se,notApplicable:jse}=pe;var{supported:ft,notApplicable:I}=pe,yx={"comment.block":ft,"string.singleLine":ft,disqualifyDelimiter:ft,map:ft,functionCall:ft,functionCallee:ft,"argument.actual":ft,"argument.actual.iteration":ft,"argumentList.actual.empty":ft,"argumentList.actual.singleLine":ft,"argumentList.actual.multiLine":ft,"name.iteration.document":ft,"name.iteration.block":ft,"textFragment.comment.block":ft,"textFragment.string.singleLine":ft,"key.mapPair":ft,"key.mapPair.iteration":ft,"value.mapPair":ft,"value.mapPair.iteration":ft,"collectionItem.unenclosed":ft,"collectionItem.unenclosed.iteration":ft,statement:ft,"statement.iteration.document":ft,anonymousFunction:I,"argument.actual.constructor.iteration":I,"argument.actual.constructor":I,"argument.actual.method.iteration":I,"argument.actual.method":I,"argument.formal.constructor.iteration":I,"argument.formal.constructor":I,"argument.formal.iteration":I,"argument.formal.method.iteration":I,"argument.formal.method":I,"argument.formal":I,"argument.formal.lambda":I,"argument.formal.lambda.iteration":I,"argumentList.actual.method.empty":I,"argumentList.actual.method.singleLine":I,"argumentList.actual.method.multiLine":I,"argumentList.actual.constructor.empty":I,"argumentList.actual.constructor.singleLine":I,"argumentList.actual.constructor.multiLine":I,"argumentList.formal.empty":I,"argumentList.formal.singleLine":I,"argumentList.formal.multiLine":I,"argumentList.formal.lambda.empty":I,"argumentList.formal.lambda.singleLine":I,"argumentList.formal.lambda.multiLine":I,"argumentList.formal.method.empty":I,"argumentList.formal.method.singleLine":I,"argumentList.formal.method.multiLine":I,"argumentList.formal.constructor.empty":I,"argumentList.formal.constructor.singleLine":I,"argumentList.formal.constructor.multiLine":I,attribute:I,"branch.if.iteration":I,"branch.if":I,"branch.loop":I,"branch.switchCase.iteration":I,"branch.switchCase":I,"branch.ternary":I,"branch.try.iteration":I,"branch.try":I,"class.iteration.block":I,"class.iteration.document":I,class:I,"className.iteration.block":I,"className.iteration.document":I,className:I,command:I,"comment.line":I,"condition.doWhile":I,"condition.for":I,"condition.if":I,"condition.switchCase.iteration":I,"condition.switchCase":I,"condition.ternary":I,"condition.while":I,element:I,endTag:I,environment:I,fieldAccess:I,"functionCall.constructor":I,"functionCallee.constructor":I,"functionName.constructor":I,"functionName.iteration.block":I,"functionName.iteration.document":I,"functionName.method.iteration.class":I,"functionName.method":I,functionName:I,ifStatement:I,"interior.cell":I,"interior.class":I,"interior.command":I,"interior.element":I,"interior.function":I,"interior.if":I,"interior.lambda":I,"interior.loop":I,"interior.resource":I,"interior.switchCase":I,"interior.ternary":I,"interior.try":I,"key.attribute":I,list:I,"name.argument.actual.iteration":I,"name.argument.actual":I,"name.argument.formal.constructor.iteration":I,"name.argument.formal.constructor":I,"name.argument.formal.iteration":I,"name.argument.formal.method.iteration":I,"name.argument.formal.method":I,"name.argument.formal":I,"name.assignment.pattern":I,"name.assignment":I,"name.class":I,"name.constructor":I,"name.field":I,"name.foreach":I,"name.function":I,"name.method":I,"name.resource.iteration":I,"name.resource":I,"name.variable.pattern":I,"name.variable":I,"namedFunction.constructor":I,"namedFunction.iteration.block":I,"namedFunction.iteration.document":I,"namedFunction.method.iteration.class":I,"namedFunction.method":I,namedFunction:I,notebookCell:I,pairDelimiter:I,regularExpression:I,"section.iteration.document":I,"section.iteration.parent":I,section:I,startTag:I,"statement.iteration.block":I,"statement.class":I,"string.multiLine":I,switchStatementSubject:I,tags:I,"textFragment.comment.line":I,"textFragment.element":I,"textFragment.string.multiLine":I,"type.alias":I,"type.argument.formal.constructor.iteration":I,"type.argument.formal.constructor":I,"type.argument.formal.iteration":I,"type.argument.formal.method.iteration":I,"type.argument.formal.method":I,"type.argument.formal":I,"type.cast":I,"type.class":I,"type.enum":I,"type.field.iteration":I,"type.field":I,"type.foreach":I,"type.interface":I,"type.resource":I,"type.resource.iteration":I,"type.return":I,"type.typeArgument.iteration":I,"type.typeArgument":I,"type.variable":I,"value.argument.actual.iteration":I,"value.argument.actual":I,"value.argument.formal.constructor.iteration":I,"value.argument.formal.constructor":I,"value.argument.formal.iteration":I,"value.argument.formal.method.iteration":I,"value.argument.formal.method":I,"value.argument.formal":I,"value.assignment":I,"value.attribute":I,"value.field":I,"value.foreach":I,"value.resource.iteration":I,"value.resource":I,"value.return.lambda":I,"value.return":I,"value.typeAlias":I,"value.variable.pattern":I,"value.variable":I,"value.yield":I};var{supported:Qse,unsupported:Yse,notApplicable:Zse}=pe;var{supported:ece,unsupported:tce,notApplicable:rce}=pe;var{supported:oce,notApplicable:ace}=pe;var{supported:lce,unsupported:uce,notApplicable:pce}=pe;var{supported:W,unsupported:oo,notApplicable:Ae}=pe,Tx={list:W,map:W,regularExpression:W,switchStatementSubject:W,fieldAccess:W,disqualifyDelimiter:W,pairDelimiter:W,"collectionItem.unenclosed":W,"collectionItem.unenclosed.iteration":W,"textFragment.string.singleLine":W,"textFragment.string.multiLine":W,"textFragment.comment.line":W,"textFragment.comment.block":W,ifStatement:W,statement:W,"statement.iteration.document":W,"statement.iteration.block":W,"statement.class":W,class:W,"class.iteration.document":W,className:W,"className.iteration.document":W,anonymousFunction:W,namedFunction:W,"namedFunction.iteration.document":W,"namedFunction.method":W,"namedFunction.method.iteration.class":W,"namedFunction.constructor":W,functionName:W,"functionName.iteration.document":W,"functionName.method":W,"functionName.method.iteration.class":W,"functionName.constructor":W,functionCall:W,"functionCall.constructor":W,functionCallee:W,"functionCallee.constructor":W,"argument.actual":W,"argument.actual.iteration":W,"argument.actual.method":W,"argument.actual.method.iteration":W,"argument.actual.constructor":W,"argument.actual.constructor.iteration":W,"argument.formal":W,"argument.formal.iteration":W,"argument.formal.method":W,"argument.formal.method.iteration":W,"argument.formal.constructor":W,"argument.formal.constructor.iteration":W,"argument.formal.lambda":W,"argument.formal.lambda.iteration":W,"argumentList.actual.empty":W,"argumentList.actual.singleLine":W,"argumentList.actual.multiLine":W,"argumentList.actual.method.empty":W,"argumentList.actual.method.singleLine":W,"argumentList.actual.method.multiLine":W,"argumentList.actual.constructor.empty":W,"argumentList.actual.constructor.singleLine":W,"argumentList.actual.constructor.multiLine":W,"argumentList.formal.empty":W,"argumentList.formal.singleLine":W,"argumentList.formal.multiLine":W,"argumentList.formal.lambda.empty":W,"argumentList.formal.lambda.singleLine":W,"argumentList.formal.lambda.multiLine":W,"argumentList.formal.method.empty":W,"argumentList.formal.method.singleLine":W,"argumentList.formal.method.multiLine":W,"argumentList.formal.constructor.empty":W,"argumentList.formal.constructor.singleLine":W,"argumentList.formal.constructor.multiLine":W,"comment.line":W,"comment.block":W,"string.singleLine":W,"string.multiLine":W,"branch.if":W,"branch.if.iteration":W,"branch.try":W,"branch.try.iteration":W,"branch.switchCase":W,"branch.switchCase.iteration":W,"branch.ternary":W,"branch.loop":W,"condition.if":W,"condition.while":W,"condition.doWhile":W,"condition.for":W,"condition.ternary":W,"condition.switchCase":W,"condition.switchCase.iteration":W,"name.argument.formal":W,"name.argument.formal.iteration":W,"name.argument.formal.method":W,"name.argument.formal.method.iteration":W,"name.argument.formal.constructor":W,"name.argument.formal.constructor.iteration":W,"name.foreach":W,"name.assignment":W,"name.assignment.pattern":W,"name.variable":W,"name.variable.pattern":W,"name.function":W,"name.method":W,"name.constructor":W,"name.class":W,"name.field":W,"name.iteration.document":W,"name.iteration.block":W,"key.mapPair":W,"key.mapPair.iteration":W,"value.argument.formal":W,"value.argument.formal.iteration":W,"value.argument.formal.method":W,"value.argument.formal.method.iteration":W,"value.argument.formal.constructor":W,"value.argument.formal.constructor.iteration":W,"value.mapPair":W,"value.mapPair.iteration":W,"value.assignment":W,"value.variable":W,"value.variable.pattern":W,"value.foreach":W,"value.return":W,"value.return.lambda":W,"value.field":W,"value.yield":W,"type.class":W,"interior.class":oo,"interior.function":oo,"interior.if":oo,"interior.lambda":oo,"interior.loop":oo,"interior.switchCase":oo,"interior.ternary":oo,"interior.try":oo,"class.iteration.block":Ae,"className.iteration.block":Ae,"functionName.iteration.block":Ae,"interior.cell":Ae,"interior.command":Ae,"interior.resource":Ae,"name.argument.actual.iteration":Ae,"name.argument.actual":Ae,"name.resource.iteration":Ae,"name.resource":Ae,"namedFunction.iteration.block":Ae,"section.iteration.document":Ae,"section.iteration.parent":Ae,"textFragment.element":Ae,"type.resource.iteration":Ae,"type.resource":Ae,"value.argument.actual.iteration":Ae,"value.argument.actual":Ae,"value.resource.iteration":Ae,"value.resource":Ae,command:Ae,environment:Ae,notebookCell:Ae,section:Ae},xx={element:W,tags:W,startTag:W,endTag:W,attribute:W,"key.attribute":W,"value.attribute":W,"interior.element":W},Sx={...Tx,...xx,"value.typeAlias":Ae,"type.alias":Ae,"type.argument.formal.constructor.iteration":Ae,"type.argument.formal.constructor":Ae,"type.argument.formal.iteration":Ae,"type.argument.formal.method.iteration":Ae,"type.argument.formal.method":Ae,"type.argument.formal":Ae,"type.cast":Ae,"type.enum":Ae,"type.field.iteration":Ae,"type.field":Ae,"type.foreach":Ae,"type.interface":Ae,"type.return":Ae,"type.typeArgument.iteration":Ae,"type.typeArgument":Ae,"type.variable":Ae};var{supported:Vz,unsupported:yce,notApplicable:Tce}=pe,Wz={...Sx,"textFragment.element":Vz};var{supported:un,notApplicable:L}=pe,ol={list:un,map:un,"string.singleLine":un,"key.mapPair.iteration":un,"key.mapPair":un,"value.mapPair.iteration":un,"value.mapPair":un,"comment.block":un,"comment.line":un,"textFragment.comment.block":un,"textFragment.comment.line":un,"textFragment.string.singleLine":un,anonymousFunction:L,"argument.actual":L,"argument.actual.constructor":L,"argument.actual.constructor.iteration":L,"argument.actual.iteration":L,"argument.actual.method":L,"argument.actual.method.iteration":L,"argument.formal":L,"argument.formal.constructor":L,"argument.formal.constructor.iteration":L,"argument.formal.iteration":L,"argument.formal.method":L,"argument.formal.method.iteration":L,"argument.formal.lambda":L,"argument.formal.lambda.iteration":L,"argumentList.actual.empty":L,"argumentList.actual.singleLine":L,"argumentList.actual.multiLine":L,"argumentList.actual.method.empty":L,"argumentList.actual.method.singleLine":L,"argumentList.actual.method.multiLine":L,"argumentList.actual.constructor.empty":L,"argumentList.actual.constructor.singleLine":L,"argumentList.actual.constructor.multiLine":L,"argumentList.formal.empty":L,"argumentList.formal.singleLine":L,"argumentList.formal.multiLine":L,"argumentList.formal.lambda.empty":L,"argumentList.formal.lambda.singleLine":L,"argumentList.formal.lambda.multiLine":L,"argumentList.formal.method.empty":L,"argumentList.formal.method.singleLine":L,"argumentList.formal.method.multiLine":L,"argumentList.formal.constructor.empty":L,"argumentList.formal.constructor.singleLine":L,"argumentList.formal.constructor.multiLine":L,attribute:L,"branch.if":L,"branch.if.iteration":L,"branch.loop":L,"branch.switchCase":L,"branch.switchCase.iteration":L,"branch.ternary":L,"branch.try":L,"branch.try.iteration":L,class:L,"class.iteration.block":L,"class.iteration.document":L,className:L,"className.iteration.block":L,"className.iteration.document":L,"collectionItem.unenclosed":L,"collectionItem.unenclosed.iteration":L,command:L,"condition.doWhile":L,"condition.for":L,"condition.if":L,"condition.switchCase":L,"condition.switchCase.iteration":L,"condition.ternary":L,"condition.while":L,disqualifyDelimiter:L,element:L,endTag:L,environment:L,fieldAccess:L,functionCall:L,"functionCall.constructor":L,functionCallee:L,"functionCallee.constructor":L,functionName:L,"functionName.constructor":L,"functionName.iteration.block":L,"functionName.iteration.document":L,"functionName.method":L,"functionName.method.iteration.class":L,ifStatement:L,"interior.cell":L,"interior.class":L,"interior.command":L,"interior.element":L,"interior.function":L,"interior.if":L,"interior.lambda":L,"interior.loop":L,"interior.resource":L,"interior.switchCase":L,"interior.ternary":L,"interior.try":L,"key.attribute":L,"name.argument.actual":L,"name.argument.actual.iteration":L,"name.argument.formal":L,"name.argument.formal.constructor":L,"name.argument.formal.constructor.iteration":L,"name.argument.formal.iteration":L,"name.argument.formal.method":L,"name.argument.formal.method.iteration":L,"name.assignment":L,"name.assignment.pattern":L,"name.class":L,"name.constructor":L,"name.field":L,"name.foreach":L,"name.function":L,"name.iteration.block":L,"name.iteration.document":L,"name.method":L,"name.resource":L,"name.resource.iteration":L,"name.variable":L,"name.variable.pattern":L,namedFunction:L,"namedFunction.constructor":L,"namedFunction.iteration.block":L,"namedFunction.iteration.document":L,"namedFunction.method":L,"namedFunction.method.iteration.class":L,notebookCell:L,pairDelimiter:L,regularExpression:L,section:L,"section.iteration.document":L,"section.iteration.parent":L,startTag:L,statement:L,"statement.class":L,"statement.iteration.block":L,"statement.iteration.document":L,"string.multiLine":L,switchStatementSubject:L,tags:L,"textFragment.element":L,"textFragment.string.multiLine":L,"type.alias":L,"type.argument.formal":L,"type.argument.formal.constructor":L,"type.argument.formal.constructor.iteration":L,"type.argument.formal.iteration":L,"type.argument.formal.method":L,"type.argument.formal.method.iteration":L,"type.cast":L,"type.class":L,"type.enum":L,"type.field":L,"type.field.iteration":L,"type.foreach":L,"type.interface":L,"type.resource":L,"type.resource.iteration":L,"type.return":L,"type.typeArgument":L,"type.typeArgument.iteration":L,"type.variable":L,"value.argument.actual":L,"value.argument.actual.iteration":L,"value.argument.formal":L,"value.argument.formal.constructor":L,"value.argument.formal.constructor.iteration":L,"value.argument.formal.iteration":L,"value.argument.formal.method":L,"value.argument.formal.method.iteration":L,"value.assignment":L,"value.attribute":L,"value.field":L,"value.foreach":L,"value.resource":L,"value.resource.iteration":L,"value.return":L,"value.return.lambda":L,"value.typeAlias":L,"value.variable":L,"value.variable.pattern":L,"value.yield":L};var{supported:Ece,unsupported:_ce,notApplicable:Rce}=pe,$z={...ol};var{supported:Mce,unsupported:Dce,notApplicable:Lce}=pe,jz={...ol};var{supported:Cce,unsupported:Oce,notApplicable:Nce}=pe;var{supported:Bce,notApplicable:Vce}=pe;var{supported:jce,notApplicable:zce}=pe;var{supported:Kce,unsupported:Qce,notApplicable:Yce}=pe;var{supported:Jce,notApplicable:ele}=pe;var{supported:nle,unsupported:ile,notApplicable:ole}=pe;var{supported:cle,unsupported:lle,notApplicable:ule}=pe;var{supported:fle,unsupported:dle,notApplicable:gle}=pe;var{supported:Tle,unsupported:xle,notApplicable:Sle}=pe;var{supported:wle,notApplicable:Ele}=pe;var{supported:rr,unsupported:xm}=pe,zz={...yx,"comment.line":rr,"condition.if":rr,namedFunction:rr,"namedFunction.iteration.block":rr,"namedFunction.iteration.document":rr,functionName:rr,"functionName.iteration.block":rr,"functionName.iteration.document":rr,"name.argument.formal":rr,"name.argument.formal.iteration":rr,"name.function":rr,"value.argument.formal":rr,"value.argument.formal.iteration":rr,"value.return":rr,ifStatement:rr,"textFragment.comment.line":rr,"branch.if":xm,"branch.if.iteration":xm,"interior.function":xm,"interior.if":xm};var{supported:Mle,unsupported:Dle,notApplicable:Lle}=pe;var{supported:zt,notApplicable:ki}=pe,vx={...Tx,"type.argument.formal":zt,"type.argument.formal.iteration":zt,"type.argument.formal.method":zt,"type.argument.formal.method.iteration":zt,"type.argument.formal.constructor":zt,"type.argument.formal.constructor.iteration":zt,"type.alias":zt,"type.cast":zt,"type.field":zt,"type.field.iteration":zt,"type.interface":zt,"type.enum":zt,"type.return":zt,"type.variable":zt,"type.typeArgument":zt,"type.typeArgument.iteration":zt,"value.typeAlias":zt,element:ki,tags:ki,startTag:ki,endTag:ki,attribute:ki,"key.attribute":ki,"value.attribute":ki,"type.foreach":ki,"interior.element":ki};var{supported:Ble,unsupported:Vle,notApplicable:Wle}=pe,qz={...vx,...xx};var{supported:zle,notApplicable:qle}=pe;var{supported:Qle,unsupported:Yle,notApplicable:Zle}=pe;var Ss=["that","source","instanceReference","keyboard"];var $e=class extends Y{get isReversed(){return this.active.isBefore(this.anchor)}constructor(...e){let[r,n]=e.length===2?e:[new ye(e[0],e[1]),new ye(e[2],e[3])];super(r,n),this.anchor=r,this.active=n}isEqual(e){return this.anchor.isEqual(e.anchor)&&this.active.isEqual(e.active)}concise(){return`${this.anchor.concise()}->${this.active.concise()}`}conciseOneBased(){return`${this.start.conciseOneBased()}->${this.end.conciseOneBased()}`}toString(){return this.concise()}};function dk({line:t,character:e}){return new ye(t,e)}function Sm({start:t,end:e}){return new Y(dk(t),dk(e))}function $r({start:t,end:e}){return{type:"line",start:t.line,end:e.line}}function dr({start:t,end:e}){return{type:"character",start:t,end:e}}function al(t){return{start:vm(t.start),end:vm(t.end)}}function gk(t){return{anchor:vm(t.anchor),active:vm(t.active)}}function vm({line:t,character:e}){return{line:t,character:e}}function Fk(t){return typeof t>"u"||t===null}function Gz(t){return typeof t=="object"&&t!==null}function Kz(t){return Array.isArray(t)?t:Fk(t)?[]:[t]}function Qz(t,e){var r,n,i,o;if(e)for(o=Object.keys(e),r=0,n=o.length;r<n;r+=1)i=o[r],t[i]=e[i];return t}function Yz(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}function Zz(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var Xz=Fk,Jz=Gz,eq=Kz,tq=Yz,rq=Zz,nq=Qz,Lt={isNothing:Xz,isObject:Jz,toArray:eq,repeat:tq,isNegativeZero:rq,extend:nq};function Ik(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}function cl(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=Ik(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}cl.prototype=Object.create(Error.prototype);cl.prototype.constructor=cl;cl.prototype.toString=function(e){return this.name+": "+Ik(this,e)};var _r=cl;function bx(t,e,r,n,i){var o="",s="",l=Math.floor(i/2)-1;return n-e>l&&(o=" ... ",e=n-l+o.length),r-n>l&&(s=" ...",r=n+l-s.length),{str:o+t.slice(e,r).replace(/\t/g,"\u2192")+s,pos:n-e+o.length}}function wx(t,e){return Lt.repeat(" ",e-t.length)+t}function iq(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],o,s=-1;o=r.exec(t.buffer);)i.push(o.index),n.push(o.index+o[0].length),t.position<=o.index&&s<0&&(s=n.length-2);s<0&&(s=n.length-1);var l="",u,m,d=Math.min(t.line+e.linesAfter,i.length).toString().length,g=e.maxLength-(e.indent+d+3);for(u=1;u<=e.linesBefore&&!(s-u<0);u++)m=bx(t.buffer,n[s-u],i[s-u],t.position-(n[s]-n[s-u]),g),l=Lt.repeat(" ",e.indent)+wx((t.line-u+1).toString(),d)+" | "+m.str+`
`+l;for(m=bx(t.buffer,n[s],i[s],t.position,g),l+=Lt.repeat(" ",e.indent)+wx((t.line+1).toString(),d)+" | "+m.str+`
`,l+=Lt.repeat("-",e.indent+d+3+m.pos)+`^
`,u=1;u<=e.linesAfter&&!(s+u>=i.length);u++)m=bx(t.buffer,n[s+u],i[s+u],t.position-(n[s]-n[s+u]),g),l+=Lt.repeat(" ",e.indent)+wx((t.line+u+1).toString(),d)+" | "+m.str+`
`;return l.replace(/\n$/,"")}var oq=iq,aq=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],sq=["scalar","sequence","mapping"];function cq(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}function lq(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(aq.indexOf(r)===-1)throw new _r('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=cq(e.styleAliases||null),sq.indexOf(this.kind)===-1)throw new _r('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var qt=lq;function Tk(t,e){var r=[];return t[e].forEach(function(n){var i=r.length;r.forEach(function(o,s){o.tag===n.tag&&o.kind===n.kind&&o.multi===n.multi&&(i=s)}),r[i]=n}),r}function uq(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}function _x(t){return this.extend(t)}_x.prototype.extend=function(e){var r=[],n=[];if(e instanceof qt)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new _r("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(o){if(!(o instanceof qt))throw new _r("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new _r("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new _r("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(o){if(!(o instanceof qt))throw new _r("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(_x.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=Tk(i,"implicit"),i.compiledExplicit=Tk(i,"explicit"),i.compiledTypeMap=uq(i.compiledImplicit,i.compiledExplicit),i};var pq=_x,mq=new qt("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),fq=new qt("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),dq=new qt("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),gq=new pq({explicit:[mq,fq,dq]});function hq(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function yq(){return null}function Tq(t){return t===null}var xq=new qt("tag:yaml.org,2002:null",{kind:"scalar",resolve:hq,construct:yq,predicate:Tq,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function Sq(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function vq(t){return t==="true"||t==="True"||t==="TRUE"}function bq(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var wq=new qt("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Sq,construct:vq,predicate:bq,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function Eq(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function _q(t){return 48<=t&&t<=55}function Rq(t){return 48<=t&&t<=57}function kq(t){if(t===null)return!1;var e=t.length,r=0,n=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!Eq(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!_q(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!Rq(t.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function Aq(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}function Pq(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!Lt.isNegativeZero(t)}var Mq=new qt("tag:yaml.org,2002:int",{kind:"scalar",resolve:kq,construct:Aq,predicate:Pq,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Dq=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Lq(t){return!(t===null||!Dq.test(t)||t[t.length-1]==="_")}function Fq(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}var Iq=/^[-+]?[0-9]+e/;function Cq(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Lt.isNegativeZero(t))return"-0.0";return r=t.toString(10),Iq.test(r)?r.replace("e",".e"):r}function Oq(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||Lt.isNegativeZero(t))}var Nq=new qt("tag:yaml.org,2002:float",{kind:"scalar",resolve:Lq,construct:Fq,predicate:Oq,represent:Cq,defaultStyle:"lowercase"}),Uq=gq.extend({implicit:[xq,wq,Mq,Nq]}),Hq=Uq,Ck=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Ok=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function Bq(t){return t===null?!1:Ck.exec(t)!==null||Ok.exec(t)!==null}function Vq(t){var e,r,n,i,o,s,l,u=0,m=null,d,g,y;if(e=Ck.exec(t),e===null&&(e=Ok.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(o=+e[4],s=+e[5],l=+e[6],e[7]){for(u=e[7].slice(0,3);u.length<3;)u+="0";u=+u}return e[9]&&(d=+e[10],g=+(e[11]||0),m=(d*60+g)*6e4,e[9]==="-"&&(m=-m)),y=new Date(Date.UTC(r,n,i,o,s,l,u)),m&&y.setTime(y.getTime()-m),y}function Wq(t){return t.toISOString()}var $q=new qt("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:Bq,construct:Vq,instanceOf:Date,represent:Wq});function jq(t){return t==="<<"||t===null}var zq=new qt("tag:yaml.org,2002:merge",{kind:"scalar",resolve:jq}),Mx=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function qq(t){if(t===null)return!1;var e,r,n=0,i=t.length,o=Mx;for(r=0;r<i;r++)if(e=o.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}function Gq(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,o=Mx,s=0,l=[];for(e=0;e<i;e++)e%4===0&&e&&(l.push(s>>16&255),l.push(s>>8&255),l.push(s&255)),s=s<<6|o.indexOf(n.charAt(e));return r=i%4*6,r===0?(l.push(s>>16&255),l.push(s>>8&255),l.push(s&255)):r===18?(l.push(s>>10&255),l.push(s>>2&255)):r===12&&l.push(s>>4&255),new Uint8Array(l)}function Kq(t){var e="",r=0,n,i,o=t.length,s=Mx;for(n=0;n<o;n++)n%3===0&&n&&(e+=s[r>>18&63],e+=s[r>>12&63],e+=s[r>>6&63],e+=s[r&63]),r=(r<<8)+t[n];return i=o%3,i===0?(e+=s[r>>18&63],e+=s[r>>12&63],e+=s[r>>6&63],e+=s[r&63]):i===2?(e+=s[r>>10&63],e+=s[r>>4&63],e+=s[r<<2&63],e+=s[64]):i===1&&(e+=s[r>>2&63],e+=s[r<<4&63],e+=s[64],e+=s[64]),e}function Qq(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var Yq=new qt("tag:yaml.org,2002:binary",{kind:"scalar",resolve:qq,construct:Gq,predicate:Qq,represent:Kq}),Zq=Object.prototype.hasOwnProperty,Xq=Object.prototype.toString;function Jq(t){if(t===null)return!0;var e=[],r,n,i,o,s,l=t;for(r=0,n=l.length;r<n;r+=1){if(i=l[r],s=!1,Xq.call(i)!=="[object Object]")return!1;for(o in i)if(Zq.call(i,o))if(!s)s=!0;else return!1;if(!s)return!1;if(e.indexOf(o)===-1)e.push(o);else return!1}return!0}function eG(t){return t!==null?t:[]}var tG=new qt("tag:yaml.org,2002:omap",{kind:"sequence",resolve:Jq,construct:eG}),rG=Object.prototype.toString;function nG(t){if(t===null)return!0;var e,r,n,i,o,s=t;for(o=new Array(s.length),e=0,r=s.length;e<r;e+=1){if(n=s[e],rG.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;o[e]=[i[0],n[i[0]]]}return!0}function iG(t){if(t===null)return[];var e,r,n,i,o,s=t;for(o=new Array(s.length),e=0,r=s.length;e<r;e+=1)n=s[e],i=Object.keys(n),o[e]=[i[0],n[i[0]]];return o}var oG=new qt("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:nG,construct:iG}),aG=Object.prototype.hasOwnProperty;function sG(t){if(t===null)return!0;var e,r=t;for(e in r)if(aG.call(r,e)&&r[e]!==null)return!1;return!0}function cG(t){return t!==null?t:{}}var lG=new qt("tag:yaml.org,2002:set",{kind:"mapping",resolve:sG,construct:cG}),Dx=Hq.extend({implicit:[$q,zq],explicit:[Yq,tG,oG,lG]}),so=Object.prototype.hasOwnProperty,bm=1,Nk=2,Uk=3,wm=4,Ex=1,uG=2,xk=3,pG=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,mG=/[\x85\u2028\u2029]/,fG=/[,\[\]\{\}]/,Hk=/^(?:!|!!|![a-z\-]+!)$/i,Bk=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Sk(t){return Object.prototype.toString.call(t)}function Kn(t){return t===10||t===13}function ea(t){return t===9||t===32}function Rr(t){return t===9||t===32||t===10||t===13}function bs(t){return t===44||t===91||t===93||t===123||t===125}function dG(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function gG(t){return t===120?2:t===117?4:t===85?8:0}function hG(t){return 48<=t&&t<=57?t-48:-1}function vk(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}function yG(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var Vk=new Array(256),Wk=new Array(256);for(Jo=0;Jo<256;Jo++)Vk[Jo]=vk(Jo)?1:0,Wk[Jo]=vk(Jo);var Jo;function TG(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||Dx,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function $k(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=oq(r),new _r(e,r)}function he(t,e){throw $k(t,e)}function Em(t,e){t.onWarning&&t.onWarning.call(null,$k(t,e))}var bk={YAML:function(e,r,n){var i,o,s;e.version!==null&&he(e,"duplication of %YAML directive"),n.length!==1&&he(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&he(e,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),s=parseInt(i[2],10),o!==1&&he(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=s<2,s!==1&&s!==2&&Em(e,"unsupported YAML version of the document")},TAG:function(e,r,n){var i,o;n.length!==2&&he(e,"TAG directive accepts exactly two arguments"),i=n[0],o=n[1],Hk.test(i)||he(e,"ill-formed tag handle (first argument) of the TAG directive"),so.call(e.tagMap,i)&&he(e,'there is a previously declared suffix for "'+i+'" tag handle'),Bk.test(o)||he(e,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{he(e,"tag prefix is malformed: "+o)}e.tagMap[i]=o}};function ao(t,e,r,n){var i,o,s,l;if(e<r){if(l=t.input.slice(e,r),n)for(i=0,o=l.length;i<o;i+=1)s=l.charCodeAt(i),s===9||32<=s&&s<=1114111||he(t,"expected valid JSON character");else pG.test(l)&&he(t,"the stream contains non-printable characters");t.result+=l}}function wk(t,e,r,n){var i,o,s,l;for(Lt.isObject(r)||he(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),s=0,l=i.length;s<l;s+=1)o=i[s],so.call(e,o)||(e[o]=r[o],n[o]=!0)}function ws(t,e,r,n,i,o,s,l,u){var m,d;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),m=0,d=i.length;m<d;m+=1)Array.isArray(i[m])&&he(t,"nested arrays are not supported inside keys"),typeof i=="object"&&Sk(i[m])==="[object Object]"&&(i[m]="[object Object]");if(typeof i=="object"&&Sk(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(m=0,d=o.length;m<d;m+=1)wk(t,e,o[m],r);else wk(t,e,o,r);else!t.json&&!so.call(r,i)&&so.call(e,i)&&(t.line=s||t.line,t.lineStart=l||t.lineStart,t.position=u||t.position,he(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):e[i]=o,delete r[i];return e}function Lx(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):he(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function Rt(t,e,r){for(var n=0,i=t.input.charCodeAt(t.position);i!==0;){for(;ea(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(Kn(i))for(Lx(t),i=t.input.charCodeAt(t.position),n++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return r!==-1&&n!==0&&t.lineIndent<r&&Em(t,"deficient indentation"),n}function km(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||Rr(r)))}function Fx(t,e){e===1?t.result+=" ":e>1&&(t.result+=Lt.repeat(`
`,e-1))}function xG(t,e,r){var n,i,o,s,l,u,m,d,g=t.kind,y=t.result,x;if(x=t.input.charCodeAt(t.position),Rr(x)||bs(x)||x===35||x===38||x===42||x===33||x===124||x===62||x===39||x===34||x===37||x===64||x===96||(x===63||x===45)&&(i=t.input.charCodeAt(t.position+1),Rr(i)||r&&bs(i)))return!1;for(t.kind="scalar",t.result="",o=s=t.position,l=!1;x!==0;){if(x===58){if(i=t.input.charCodeAt(t.position+1),Rr(i)||r&&bs(i))break}else if(x===35){if(n=t.input.charCodeAt(t.position-1),Rr(n))break}else{if(t.position===t.lineStart&&km(t)||r&&bs(x))break;if(Kn(x))if(u=t.line,m=t.lineStart,d=t.lineIndent,Rt(t,!1,-1),t.lineIndent>=e){l=!0,x=t.input.charCodeAt(t.position);continue}else{t.position=s,t.line=u,t.lineStart=m,t.lineIndent=d;break}}l&&(ao(t,o,s,!1),Fx(t,t.line-u),o=s=t.position,l=!1),ea(x)||(s=t.position+1),x=t.input.charCodeAt(++t.position)}return ao(t,o,s,!1),t.result?!0:(t.kind=g,t.result=y,!1)}function SG(t,e){var r,n,i;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(ao(t,n,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)n=t.position,t.position++,i=t.position;else return!0;else Kn(r)?(ao(t,n,i,!0),Fx(t,Rt(t,!1,e)),n=i=t.position):t.position===t.lineStart&&km(t)?he(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);he(t,"unexpected end of the stream within a single quoted scalar")}function vG(t,e){var r,n,i,o,s,l;if(l=t.input.charCodeAt(t.position),l!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(l=t.input.charCodeAt(t.position))!==0;){if(l===34)return ao(t,r,t.position,!0),t.position++,!0;if(l===92){if(ao(t,r,t.position,!0),l=t.input.charCodeAt(++t.position),Kn(l))Rt(t,!1,e);else if(l<256&&Vk[l])t.result+=Wk[l],t.position++;else if((s=gG(l))>0){for(i=s,o=0;i>0;i--)l=t.input.charCodeAt(++t.position),(s=dG(l))>=0?o=(o<<4)+s:he(t,"expected hexadecimal character");t.result+=yG(o),t.position++}else he(t,"unknown escape sequence");r=n=t.position}else Kn(l)?(ao(t,r,n,!0),Fx(t,Rt(t,!1,e)),r=n=t.position):t.position===t.lineStart&&km(t)?he(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}he(t,"unexpected end of the stream within a double quoted scalar")}function bG(t,e){var r=!0,n,i,o,s=t.tag,l,u=t.anchor,m,d,g,y,x,w=Object.create(null),E,U,V,z;if(z=t.input.charCodeAt(t.position),z===91)d=93,x=!1,l=[];else if(z===123)d=125,x=!0,l={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=l),z=t.input.charCodeAt(++t.position);z!==0;){if(Rt(t,!0,e),z=t.input.charCodeAt(t.position),z===d)return t.position++,t.tag=s,t.anchor=u,t.kind=x?"mapping":"sequence",t.result=l,!0;r?z===44&&he(t,"expected the node content, but found ','"):he(t,"missed comma between flow collection entries"),U=E=V=null,g=y=!1,z===63&&(m=t.input.charCodeAt(t.position+1),Rr(m)&&(g=y=!0,t.position++,Rt(t,!0,e))),n=t.line,i=t.lineStart,o=t.position,Es(t,e,bm,!1,!0),U=t.tag,E=t.result,Rt(t,!0,e),z=t.input.charCodeAt(t.position),(y||t.line===n)&&z===58&&(g=!0,z=t.input.charCodeAt(++t.position),Rt(t,!0,e),Es(t,e,bm,!1,!0),V=t.result),x?ws(t,l,w,U,E,V,n,i,o):g?l.push(ws(t,null,w,U,E,V,n,i,o)):l.push(E),Rt(t,!0,e),z=t.input.charCodeAt(t.position),z===44?(r=!0,z=t.input.charCodeAt(++t.position)):r=!1}he(t,"unexpected end of the stream within a flow collection")}function wG(t,e){var r,n,i=Ex,o=!1,s=!1,l=e,u=0,m=!1,d,g;if(g=t.input.charCodeAt(t.position),g===124)n=!1;else if(g===62)n=!0;else return!1;for(t.kind="scalar",t.result="";g!==0;)if(g=t.input.charCodeAt(++t.position),g===43||g===45)Ex===i?i=g===43?xk:uG:he(t,"repeat of a chomping mode identifier");else if((d=hG(g))>=0)d===0?he(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?he(t,"repeat of an indentation width identifier"):(l=e+d-1,s=!0);else break;if(ea(g)){do g=t.input.charCodeAt(++t.position);while(ea(g));if(g===35)do g=t.input.charCodeAt(++t.position);while(!Kn(g)&&g!==0)}for(;g!==0;){for(Lx(t),t.lineIndent=0,g=t.input.charCodeAt(t.position);(!s||t.lineIndent<l)&&g===32;)t.lineIndent++,g=t.input.charCodeAt(++t.position);if(!s&&t.lineIndent>l&&(l=t.lineIndent),Kn(g)){u++;continue}if(t.lineIndent<l){i===xk?t.result+=Lt.repeat(`
`,o?1+u:u):i===Ex&&o&&(t.result+=`
`);break}for(n?ea(g)?(m=!0,t.result+=Lt.repeat(`
`,o?1+u:u)):m?(m=!1,t.result+=Lt.repeat(`
`,u+1)):u===0?o&&(t.result+=" "):t.result+=Lt.repeat(`
`,u):t.result+=Lt.repeat(`
`,o?1+u:u),o=!0,s=!0,u=0,r=t.position;!Kn(g)&&g!==0;)g=t.input.charCodeAt(++t.position);ao(t,r,t.position,!1)}return!0}function Ek(t,e){var r,n=t.tag,i=t.anchor,o=[],s,l=!1,u;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),u=t.input.charCodeAt(t.position);u!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,he(t,"tab characters must not be used in indentation")),!(u!==45||(s=t.input.charCodeAt(t.position+1),!Rr(s))));){if(l=!0,t.position++,Rt(t,!0,-1)&&t.lineIndent<=e){o.push(null),u=t.input.charCodeAt(t.position);continue}if(r=t.line,Es(t,e,Uk,!1,!0),o.push(t.result),Rt(t,!0,-1),u=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&u!==0)he(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return l?(t.tag=n,t.anchor=i,t.kind="sequence",t.result=o,!0):!1}function EG(t,e,r){var n,i,o,s,l,u,m=t.tag,d=t.anchor,g={},y=Object.create(null),x=null,w=null,E=null,U=!1,V=!1,z;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=g),z=t.input.charCodeAt(t.position);z!==0;){if(!U&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,he(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),o=t.line,(z===63||z===58)&&Rr(n))z===63?(U&&(ws(t,g,y,x,w,null,s,l,u),x=w=E=null),V=!0,U=!0,i=!0):U?(U=!1,i=!0):he(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,z=n;else{if(s=t.line,l=t.lineStart,u=t.position,!Es(t,r,Nk,!1,!0))break;if(t.line===o){for(z=t.input.charCodeAt(t.position);ea(z);)z=t.input.charCodeAt(++t.position);if(z===58)z=t.input.charCodeAt(++t.position),Rr(z)||he(t,"a whitespace character is expected after the key-value separator within a block mapping"),U&&(ws(t,g,y,x,w,null,s,l,u),x=w=E=null),V=!0,U=!1,i=!1,x=t.tag,w=t.result;else if(V)he(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=m,t.anchor=d,!0}else if(V)he(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=m,t.anchor=d,!0}if((t.line===o||t.lineIndent>e)&&(U&&(s=t.line,l=t.lineStart,u=t.position),Es(t,e,wm,!0,i)&&(U?w=t.result:E=t.result),U||(ws(t,g,y,x,w,E,s,l,u),x=w=E=null),Rt(t,!0,-1),z=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&z!==0)he(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return U&&ws(t,g,y,x,w,null,s,l,u),V&&(t.tag=m,t.anchor=d,t.kind="mapping",t.result=g),V}function _G(t){var e,r=!1,n=!1,i,o,s;if(s=t.input.charCodeAt(t.position),s!==33)return!1;if(t.tag!==null&&he(t,"duplication of a tag property"),s=t.input.charCodeAt(++t.position),s===60?(r=!0,s=t.input.charCodeAt(++t.position)):s===33?(n=!0,i="!!",s=t.input.charCodeAt(++t.position)):i="!",e=t.position,r){do s=t.input.charCodeAt(++t.position);while(s!==0&&s!==62);t.position<t.length?(o=t.input.slice(e,t.position),s=t.input.charCodeAt(++t.position)):he(t,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!Rr(s);)s===33&&(n?he(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),Hk.test(i)||he(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),s=t.input.charCodeAt(++t.position);o=t.input.slice(e,t.position),fG.test(o)&&he(t,"tag suffix cannot contain flow indicator characters")}o&&!Bk.test(o)&&he(t,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{he(t,"tag name is malformed: "+o)}return r?t.tag=o:so.call(t.tagMap,i)?t.tag=t.tagMap[i]+o:i==="!"?t.tag="!"+o:i==="!!"?t.tag="tag:yaml.org,2002:"+o:he(t,'undeclared tag handle "'+i+'"'),!0}function RG(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&he(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!Rr(r)&&!bs(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&he(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function kG(t){var e,r,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!Rr(n)&&!bs(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&he(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),so.call(t.anchorMap,r)||he(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],Rt(t,!0,-1),!0}function Es(t,e,r,n,i){var o,s,l,u=1,m=!1,d=!1,g,y,x,w,E,U;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=s=l=wm===r||Uk===r,n&&Rt(t,!0,-1)&&(m=!0,t.lineIndent>e?u=1:t.lineIndent===e?u=0:t.lineIndent<e&&(u=-1)),u===1)for(;_G(t)||RG(t);)Rt(t,!0,-1)?(m=!0,l=o,t.lineIndent>e?u=1:t.lineIndent===e?u=0:t.lineIndent<e&&(u=-1)):l=!1;if(l&&(l=m||i),(u===1||wm===r)&&(bm===r||Nk===r?E=e:E=e+1,U=t.position-t.lineStart,u===1?l&&(Ek(t,U)||EG(t,U,E))||bG(t,E)?d=!0:(s&&wG(t,E)||SG(t,E)||vG(t,E)?d=!0:kG(t)?(d=!0,(t.tag!==null||t.anchor!==null)&&he(t,"alias node should not have any properties")):xG(t,E,bm===r)&&(d=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):u===0&&(d=l&&Ek(t,U))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&he(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),g=0,y=t.implicitTypes.length;g<y;g+=1)if(w=t.implicitTypes[g],w.resolve(t.result)){t.result=w.construct(t.result),t.tag=w.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(so.call(t.typeMap[t.kind||"fallback"],t.tag))w=t.typeMap[t.kind||"fallback"][t.tag];else for(w=null,x=t.typeMap.multi[t.kind||"fallback"],g=0,y=x.length;g<y;g+=1)if(t.tag.slice(0,x[g].tag.length)===x[g].tag){w=x[g];break}w||he(t,"unknown tag !<"+t.tag+">"),t.result!==null&&w.kind!==t.kind&&he(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+w.kind+'", not "'+t.kind+'"'),w.resolve(t.result,t.tag)?(t.result=w.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):he(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||d}function AG(t){var e=t.position,r,n,i,o=!1,s;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(s=t.input.charCodeAt(t.position))!==0&&(Rt(t,!0,-1),s=t.input.charCodeAt(t.position),!(t.lineIndent>0||s!==37));){for(o=!0,s=t.input.charCodeAt(++t.position),r=t.position;s!==0&&!Rr(s);)s=t.input.charCodeAt(++t.position);for(n=t.input.slice(r,t.position),i=[],n.length<1&&he(t,"directive name must not be less than one character in length");s!==0;){for(;ea(s);)s=t.input.charCodeAt(++t.position);if(s===35){do s=t.input.charCodeAt(++t.position);while(s!==0&&!Kn(s));break}if(Kn(s))break;for(r=t.position;s!==0&&!Rr(s);)s=t.input.charCodeAt(++t.position);i.push(t.input.slice(r,t.position))}s!==0&&Lx(t),so.call(bk,n)?bk[n](t,n,i):Em(t,'unknown document directive "'+n+'"')}if(Rt(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,Rt(t,!0,-1)):o&&he(t,"directives end mark is expected"),Es(t,t.lineIndent-1,wm,!1,!0),Rt(t,!0,-1),t.checkLineBreaks&&mG.test(t.input.slice(e,t.position))&&Em(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&km(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,Rt(t,!0,-1));return}if(t.position<t.length-1)he(t,"end of the stream or a document separator is expected");else return}function jk(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new TG(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,he(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)AG(r);return r.documents}function PG(t,e,r){e!==null&&typeof e=="object"&&typeof r>"u"&&(r=e,e=null);var n=jk(t,r);if(typeof e!="function")return n;for(var i=0,o=n.length;i<o;i+=1)e(n[i])}function MG(t,e){var r=jk(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new _r("expected a single document in the stream, but found more")}}var DG=PG,LG=MG,zk={loadAll:DG,load:LG},qk=Object.prototype.toString,Gk=Object.prototype.hasOwnProperty,Ix=65279,FG=9,ll=10,IG=13,CG=32,OG=33,NG=34,Rx=35,UG=37,HG=38,BG=39,VG=42,Kk=44,WG=45,_m=58,$G=61,jG=62,zG=63,qG=64,Qk=91,Yk=93,GG=96,Zk=123,KG=124,Xk=125,nr={};nr[0]="\\0";nr[7]="\\a";nr[8]="\\b";nr[9]="\\t";nr[10]="\\n";nr[11]="\\v";nr[12]="\\f";nr[13]="\\r";nr[27]="\\e";nr[34]='\\"';nr[92]="\\\\";nr[133]="\\N";nr[160]="\\_";nr[8232]="\\L";nr[8233]="\\P";var QG=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],YG=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function ZG(t,e){var r,n,i,o,s,l,u;if(e===null)return{};for(r={},n=Object.keys(e),i=0,o=n.length;i<o;i+=1)s=n[i],l=String(e[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),u=t.compiledTypeMap.fallback[s],u&&Gk.call(u.styleAliases,l)&&(l=u.styleAliases[l]),r[s]=l;return r}function XG(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else if(t<=4294967295)r="U",n=8;else throw new _r("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+Lt.repeat("0",n-e.length)+e}var JG=1,ul=2;function eK(t){this.schema=t.schema||Dx,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=Lt.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=ZG(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?ul:JG,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function _k(t,e){for(var r=Lt.repeat(" ",e),n=0,i=-1,o="",s,l=t.length;n<l;)i=t.indexOf(`
`,n),i===-1?(s=t.slice(n),n=l):(s=t.slice(n,i+1),n=i+1),s.length&&s!==`
`&&(o+=r),o+=s;return o}function kx(t,e){return`
`+Lt.repeat(" ",t.indent*e)}function tK(t,e){var r,n,i;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(i=t.implicitTypes[r],i.resolve(e))return!0;return!1}function Rm(t){return t===CG||t===FG}function pl(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==Ix||65536<=t&&t<=1114111}function Rk(t){return pl(t)&&t!==Ix&&t!==IG&&t!==ll}function kk(t,e,r){var n=Rk(t),i=n&&!Rm(t);return(r?n:n&&t!==Kk&&t!==Qk&&t!==Yk&&t!==Zk&&t!==Xk)&&t!==Rx&&!(e===_m&&!i)||Rk(e)&&!Rm(e)&&t===Rx||e===_m&&i}function rK(t){return pl(t)&&t!==Ix&&!Rm(t)&&t!==WG&&t!==zG&&t!==_m&&t!==Kk&&t!==Qk&&t!==Yk&&t!==Zk&&t!==Xk&&t!==Rx&&t!==HG&&t!==VG&&t!==OG&&t!==KG&&t!==$G&&t!==jG&&t!==BG&&t!==NG&&t!==UG&&t!==qG&&t!==GG}function nK(t){return!Rm(t)&&t!==_m}function sl(t,e){var r=t.charCodeAt(e),n;return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function Jk(t){var e=/^\n* /;return e.test(t)}var eA=1,Ax=2,tA=3,rA=4,vs=5;function iK(t,e,r,n,i,o,s,l){var u,m=0,d=null,g=!1,y=!1,x=n!==-1,w=-1,E=rK(sl(t,0))&&nK(sl(t,t.length-1));if(e||s)for(u=0;u<t.length;m>=65536?u+=2:u++){if(m=sl(t,u),!pl(m))return vs;E=E&&kk(m,d,l),d=m}else{for(u=0;u<t.length;m>=65536?u+=2:u++){if(m=sl(t,u),m===ll)g=!0,x&&(y=y||u-w-1>n&&t[w+1]!==" ",w=u);else if(!pl(m))return vs;E=E&&kk(m,d,l),d=m}y=y||x&&u-w-1>n&&t[w+1]!==" "}return!g&&!y?E&&!s&&!i(t)?eA:o===ul?vs:Ax:r>9&&Jk(t)?vs:s?o===ul?vs:Ax:y?rA:tA}function oK(t,e,r,n,i){t.dump=function(){if(e.length===0)return t.quotingType===ul?'""':"''";if(!t.noCompatMode&&(QG.indexOf(e)!==-1||YG.test(e)))return t.quotingType===ul?'"'+e+'"':"'"+e+"'";var o=t.indent*Math.max(1,r),s=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),l=n||t.flowLevel>-1&&r>=t.flowLevel;function u(m){return tK(t,m)}switch(iK(e,l,t.indent,s,u,t.quotingType,t.forceQuotes&&!n,i)){case eA:return e;case Ax:return"'"+e.replace(/'/g,"''")+"'";case tA:return"|"+Ak(e,t.indent)+Pk(_k(e,o));case rA:return">"+Ak(e,t.indent)+Pk(_k(aK(e,s),o));case vs:return'"'+sK(e)+'"';default:throw new _r("impossible error: invalid scalar style")}}()}function Ak(t,e){var r=Jk(t)?String(e):"",n=t[t.length-1]===`
`,i=n&&(t[t.length-2]===`
`||t===`
`),o=i?"+":n?"":"-";return r+o+`
`}function Pk(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function aK(t,e){for(var r=/(\n+)([^\n]*)/g,n=function(){var m=t.indexOf(`
`);return m=m!==-1?m:t.length,r.lastIndex=m,Mk(t.slice(0,m),e)}(),i=t[0]===`
`||t[0]===" ",o,s;s=r.exec(t);){var l=s[1],u=s[2];o=u[0]===" ",n+=l+(!i&&!o&&u!==""?`
`:"")+Mk(u,e),i=o}return n}function Mk(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,n,i=0,o,s=0,l=0,u="";n=r.exec(t);)l=n.index,l-i>e&&(o=s>i?s:l,u+=`
`+t.slice(i,o),i=o+1),s=l;return u+=`
`,t.length-i>e&&s>i?u+=t.slice(i,s)+`
`+t.slice(s+1):u+=t.slice(i),u.slice(1)}function sK(t){for(var e="",r=0,n,i=0;i<t.length;r>=65536?i+=2:i++)r=sl(t,i),n=nr[r],!n&&pl(r)?(e+=t[i],r>=65536&&(e+=t[i+1])):e+=n||XG(r);return e}function cK(t,e,r){var n="",i=t.tag,o,s,l;for(o=0,s=r.length;o<s;o+=1)l=r[o],t.replacer&&(l=t.replacer.call(r,String(o),l)),(Ai(t,e,l,!1,!1)||typeof l>"u"&&Ai(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=i,t.dump="["+n+"]"}function Dk(t,e,r,n){var i="",o=t.tag,s,l,u;for(s=0,l=r.length;s<l;s+=1)u=r[s],t.replacer&&(u=t.replacer.call(r,String(s),u)),(Ai(t,e+1,u,!0,!0,!1,!0)||typeof u>"u"&&Ai(t,e+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=kx(t,e)),t.dump&&ll===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=o,t.dump=i||"[]"}function lK(t,e,r){var n="",i=t.tag,o=Object.keys(r),s,l,u,m,d;for(s=0,l=o.length;s<l;s+=1)d="",n!==""&&(d+=", "),t.condenseFlow&&(d+='"'),u=o[s],m=r[u],t.replacer&&(m=t.replacer.call(r,u,m)),Ai(t,e,u,!1,!1)&&(t.dump.length>1024&&(d+="? "),d+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),Ai(t,e,m,!1,!1)&&(d+=t.dump,n+=d));t.tag=i,t.dump="{"+n+"}"}function uK(t,e,r,n){var i="",o=t.tag,s=Object.keys(r),l,u,m,d,g,y;if(t.sortKeys===!0)s.sort();else if(typeof t.sortKeys=="function")s.sort(t.sortKeys);else if(t.sortKeys)throw new _r("sortKeys must be a boolean or a function");for(l=0,u=s.length;l<u;l+=1)y="",(!n||i!=="")&&(y+=kx(t,e)),m=s[l],d=r[m],t.replacer&&(d=t.replacer.call(r,m,d)),Ai(t,e+1,m,!0,!0,!0)&&(g=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,g&&(t.dump&&ll===t.dump.charCodeAt(0)?y+="?":y+="? "),y+=t.dump,g&&(y+=kx(t,e)),Ai(t,e+1,d,!0,g)&&(t.dump&&ll===t.dump.charCodeAt(0)?y+=":":y+=": ",y+=t.dump,i+=y));t.tag=o,t.dump=i||"{}"}function Lk(t,e,r){var n,i,o,s,l,u;for(i=r?t.explicitTypes:t.implicitTypes,o=0,s=i.length;o<s;o+=1)if(l=i[o],(l.instanceOf||l.predicate)&&(!l.instanceOf||typeof e=="object"&&e instanceof l.instanceOf)&&(!l.predicate||l.predicate(e))){if(r?l.multi&&l.representName?t.tag=l.representName(e):t.tag=l.tag:t.tag="?",l.represent){if(u=t.styleMap[l.tag]||l.defaultStyle,qk.call(l.represent)==="[object Function]")n=l.represent(e,u);else if(Gk.call(l.represent,u))n=l.represent[u](e,u);else throw new _r("!<"+l.tag+'> tag resolver accepts not "'+u+'" style');t.dump=n}return!0}return!1}function Ai(t,e,r,n,i,o,s){t.tag=null,t.dump=r,Lk(t,r,!1)||Lk(t,r,!0);var l=qk.call(t.dump),u=n,m;n&&(n=t.flowLevel<0||t.flowLevel>e);var d=l==="[object Object]"||l==="[object Array]",g,y;if(d&&(g=t.duplicates.indexOf(r),y=g!==-1),(t.tag!==null&&t.tag!=="?"||y||t.indent!==2&&e>0)&&(i=!1),y&&t.usedDuplicates[g])t.dump="*ref_"+g;else{if(d&&y&&!t.usedDuplicates[g]&&(t.usedDuplicates[g]=!0),l==="[object Object]")n&&Object.keys(t.dump).length!==0?(uK(t,e,t.dump,i),y&&(t.dump="&ref_"+g+t.dump)):(lK(t,e,t.dump),y&&(t.dump="&ref_"+g+" "+t.dump));else if(l==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!s&&e>0?Dk(t,e-1,t.dump,i):Dk(t,e,t.dump,i),y&&(t.dump="&ref_"+g+t.dump)):(cK(t,e,t.dump),y&&(t.dump="&ref_"+g+" "+t.dump));else if(l==="[object String]")t.tag!=="?"&&oK(t,t.dump,e,o,u);else{if(l==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new _r("unacceptable kind of an object to dump "+l)}t.tag!==null&&t.tag!=="?"&&(m=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?m="!"+m:m.slice(0,18)==="tag:yaml.org,2002:"?m="!!"+m.slice(18):m="!<"+m+">",t.dump=m+" "+t.dump)}return!0}function pK(t,e){var r=[],n=[],i,o;for(Px(t,r,n),i=0,o=n.length;i<o;i+=1)e.duplicates.push(r[n[i]]);e.usedDuplicates=new Array(o)}function Px(t,e,r){var n,i,o;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(e.push(t),Array.isArray(t))for(i=0,o=t.length;i<o;i+=1)Px(t[i],e,r);else for(n=Object.keys(t),i=0,o=n.length;i<o;i+=1)Px(t[n[i]],e,r)}function mK(t,e){e=e||{};var r=new eK(e);r.noRefs||pK(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),Ai(r,0,n,!0,!0)?r.dump+`
`:""}var fK=mK,dK={dump:fK};function Cx(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var nA=qt;var iA=Dx,gK=zk.load,gpe=zk.loadAll,oA=dK.dump;var hpe=Cx("safeLoad","load"),ype=Cx("safeLoadAll","loadAll"),Tpe=Cx("safeDump","dump");var Am=class{constructor(e,r){this.data=e;this.opts=r}represent(){let e=oA(this.data,Object.assign({replacer:xK,schema:yK},this.opts));return e=e.trim(),e.includes(`
`)&&(e=`
`+e),e}},hK=new nA("!format",{kind:"scalar",resolve:()=>!1,instanceOf:Am,represent:t=>t.represent()}),yK=iA.extend({implicit:[hK]}),Ox=t=>typeof t=="object"&&t!=null;function TK(t){if(Ox(t))return Object.values(t).every(e=>!Ox(e)&&!Array.isArray(e));if(Array.isArray(t))return t.every(e=>!Ox(e)&&!Array.isArray(e))}function xK(t,e){return t===""?e:TK(e)?new Am(e,{flowLevel:0}):e}var Nx=["addSelection","addSelectionAfter","addSelectionBefore","breakLine","clearAndSetSelection","copyToClipboard","cutToClipboard","decrement","deselect","editNewLineAfter","editNewLineBefore","experimental.setInstanceReference","extractVariable","findInDocument","findInWorkspace","flashTargets","foldRegion","followLink","followLinkAside","gitAccept","gitRevert","gitStage","gitUnstage","increment","indentLine","insertCopyAfter","insertCopyBefore","insertEmptyLineAfter","insertEmptyLineBefore","insertEmptyLinesAround","joinLines","outdentLine","randomizeTargets","remove","rename","revealDefinition","revealTypeDefinition","reverseTargets","scrollToBottom","scrollToCenter","scrollToTop","setSelection","setSelectionAfter","setSelectionBefore","showDebugHover","showHover","showQuickFix","showReferences","sortTargets","toggleLineBreakpoint","toggleLineComment","unfoldRegion","private.getTargets","private.setKeyboardTarget","private.showParseTree"],vK=["callAsFunction","editNew","executeCommand","generateSnippet","getText","highlight","insertSnippet","moveToTarget","pasteFromClipboard","replace","replaceWithTarget","rewrapWithPairedDelimiter","swapTargets","wrapWithPairedDelimiter","wrapWithSnippet","parsed"],sA=[...Nx,...vK];var bK=["angleBrackets","backtickQuotes","curlyBrackets","doubleQuotes","escapedDoubleQuotes","escapedParentheses","escapedSingleQuotes","escapedSquareBrackets","parentheses","singleQuotes","squareBrackets","tripleBacktickQuotes","tripleDoubleQuotes","tripleSingleQuotes"],wK=["string","any","collectionBoundary"],Pm=[...bK,...wK],ta=["argumentOrParameter","argumentList","anonymousFunction","attribute","branch","class","className","collectionItem","collectionKey","comment","private.fieldAccess","functionCall","functionCallee","functionName","ifStatement","instance","list","map","name","namedFunction","regularExpression","statement","string","type","value","condition","section","sectionLevelOne","sectionLevelTwo","sectionLevelThree","sectionLevelFour","sectionLevelFive","sectionLevelSix","selector","private.switchStatementSubject","unit","xmlBothTags","xmlElement","xmlEndTag","xmlStartTag","part","chapter","subSection","subSubSection","namedParagraph","subParagraph","environment","character","word","token","identifier","line","sentence","paragraph","boundedParagraph","document","nonWhitespaceSequence","boundedNonWhitespaceSequence","url","notebookCell","command","textFragment","disqualifyDelimiter","pairDelimiter"];function cA(t){return ta.includes(t.type)}var lA=["simpleScopeTypeType","complexScopeTypeType","customRegex","pairedDelimiter","action","customAction","grapheme"],ml=class extends Error{constructor(e){super(e),this.name="NeedsInitialTalonUpdateError"}},_s=class extends Error{constructor(){super("Custom spoken forms are not currently supported in this ide"),this.name="DisabledCustomSpokenFormsError"}};function fl(t){return t.replace(/([A-Z])/g," $1").split(" ").map(e=>e.toLowerCase()).join(" ")}function ra(t){return t.version>=7}var co=class{constructor(e){this.hashFunction=e;this.map={}}hash(e){return this.hashFunction(e).join("\0")}set(e,r){return this.map[this.hash(e)]=r,this}has(e){return this.hash(e)in this.map}get(e){return this.map[this.hash(e)]}delete(e){return delete this.map[this.hash(e)],this}clear(){return this.map={},this}};var Rs=class extends Map{constructor(r){super();this.getDefaultValue=r}get(r){let n=super.get(r);if(n!=null)return n;let i=this.getDefaultValue(r);return this.set(r,i),i}};function uA(...t){return{dispose(){t.forEach(({dispose:e})=>{try{e()}catch(r){console.error(r)}})}}}function dl(t){return typeof t=="string"||t instanceof String}function Mm(t){let[e,...r]=t;return _K(e,r)}function _K(t,e){let r;if(dl(t)){let n=t,[i,o,...s]=e;r={version:0,spokenForm:n,action:i,targets:o,extraArgs:s,usePrePhraseSnapshot:!1}}else r=t;return r}function gl(t,e){let r=new Map;return t.forEach(n=>{let i=e(n),o;r.has(i)?o=r.get(i):(o=[],r.set(i,o)),o.push(n)}),r}function pA(t){for(let e of t)return!1;return!0}function Pi(t){return Object.keys(t)}function hl(t,e){return`${t}.${e}`}function mA(t,e,r){if(t.length<2)return[...t];if(t.length===2)return e(t[0],t[1])?[t[0]]:[...t];let n=[],i=t.reduce((o,s)=>{let l=r(s),u=o.get(l);return u==null?(o.set(l,[s]),o):(o.get(l).push(s),u.length===2&&n.push(l),o)},new Map);return n.length===0?[...t]:(n.forEach(o=>{i.set(o,Jc(i.get(o),e))}),t.flatMap(o=>{let s=r(o),l=i.get(s);if(l==null||l.length===0)return[];let u=l[0];return e(u,o)?(l.shift(),u):[]}))}function na(t,e){if(t.length!==e.length)throw new Error("Lists must have the same length");return t.map((r,n)=>[r,e[n]])}var TA=Symbol.for("immer-nothing"),fA=Symbol.for("immer-draftable"),jr=Symbol.for("immer-state"),RK=process.env.NODE_ENV!=="production"?[function(t){return`The plugin for '${t}' has not been loaded into Immer. To enable the plugin, import and call \`enable${t}()\` when initializing your application.`},function(t){return`produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '${t}'`},"This object has been frozen and should not be mutated",function(t){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+t},"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.","Immer forbids circular references","The first or second argument to `produce` must be a function","The third argument to `produce` must be a function or undefined","First argument to `createDraft` must be a plain object, an array, or an immerable object","First argument to `finishDraft` must be a draft returned by `createDraft`",function(t){return`'current' expects a draft, got: ${t}`},"Object.defineProperty() cannot be used on an Immer draft","Object.setPrototypeOf() cannot be used on an Immer draft","Immer only supports deleting array indices","Immer only supports setting array indices and the 'length' property",function(t){return`'original' expects a draft, got: ${t}`}]:[];function kr(t,...e){if(process.env.NODE_ENV!=="production"){let r=RK[t],n=typeof r=="function"?r.apply(null,e):r;throw new Error(`[Immer] ${n}`)}throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var ks=Object.getPrototypeOf;function As(t){return!!t&&!!t[jr]}function oa(t){return t?xA(t)||Array.isArray(t)||!!t[fA]||!!t.constructor?.[fA]||Cm(t)||Om(t):!1}var kK=Object.prototype.constructor.toString();function xA(t){if(!t||typeof t!="object")return!1;let e=ks(t);if(e===null)return!0;let r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===kK}function Dm(t,e){Im(t)===0?Reflect.ownKeys(t).forEach(r=>{e(r,t[r],t)}):t.forEach((r,n)=>e(n,r,t))}function Im(t){let e=t[jr];return e?e.type_:Array.isArray(t)?1:Cm(t)?2:Om(t)?3:0}function Bx(t,e){return Im(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function SA(t,e,r){let n=Im(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function AK(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Cm(t){return t instanceof Map}function Om(t){return t instanceof Set}function ia(t){return t.copy_||t.base_}function Vx(t,e){if(Cm(t))return new Map(t);if(Om(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);let r=xA(t);if(e===!0||e==="class_only"&&!r){let n=Object.getOwnPropertyDescriptors(t);delete n[jr];let i=Reflect.ownKeys(n);for(let o=0;o<i.length;o++){let s=i[o],l=n[s];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[s]={configurable:!0,writable:!0,enumerable:l.enumerable,value:t[s]})}return Object.create(ks(t),n)}else{let n=ks(t);if(n!==null&&r)return{...t};let i=Object.create(n);return Object.assign(i,t)}}function qx(t,e=!1){return Nm(t)||As(t)||!oa(t)||(Im(t)>1&&(t.set=t.add=t.clear=t.delete=PK),Object.freeze(t),e&&Object.entries(t).forEach(([r,n])=>qx(n,!0))),t}function PK(){kr(2)}function Nm(t){return Object.isFrozen(t)}var MK={};function aa(t){let e=MK[t];return e||kr(0,t),e}var yl;function vA(){return yl}function DK(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function dA(t,e){e&&(aa("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function Wx(t){$x(t),t.drafts_.forEach(LK),t.drafts_=null}function $x(t){t===yl&&(yl=t.parent_)}function gA(t){return yl=DK(yl,t)}function LK(t){let e=t[jr];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function hA(t,e){e.unfinalizedDrafts_=e.drafts_.length;let r=e.drafts_[0];return t!==void 0&&t!==r?(r[jr].modified_&&(Wx(e),kr(4)),oa(t)&&(t=Lm(e,t),e.parent_||Fm(e,t)),e.patches_&&aa("Patches").generateReplacementPatches_(r[jr].base_,t,e.patches_,e.inversePatches_)):t=Lm(e,r,[]),Wx(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==TA?t:void 0}function Lm(t,e,r){if(Nm(e))return e;let n=e[jr];if(!n)return Dm(e,(i,o)=>yA(t,n,e,i,o,r)),e;if(n.scope_!==t)return e;if(!n.modified_)return Fm(t,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;let i=n.copy_,o=i,s=!1;n.type_===3&&(o=new Set(i),i.clear(),s=!0),Dm(o,(l,u)=>yA(t,n,i,l,u,r,s)),Fm(t,i,!1),r&&t.patches_&&aa("Patches").generatePatches_(n,r,t.patches_,t.inversePatches_)}return n.copy_}function yA(t,e,r,n,i,o,s){if(process.env.NODE_ENV!=="production"&&i===r&&kr(5),As(i)){let l=o&&e&&e.type_!==3&&!Bx(e.assigned_,n)?o.concat(n):void 0,u=Lm(t,i,l);if(SA(r,n,u),As(u))t.canAutoFreeze_=!1;else return}else s&&r.add(i);if(oa(i)&&!Nm(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;Lm(t,i),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&Fm(t,i)}}function Fm(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&qx(e,r)}function FK(t,e){let r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:vA(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1},i=n,o=Gx;r&&(i=[n],o=Tl);let{revoke:s,proxy:l}=Proxy.revocable(i,o);return n.draft_=l,n.revoke_=s,l}var Gx={get(t,e){if(e===jr)return t;let r=ia(t);if(!Bx(r,e))return IK(t,r,e);let n=r[e];return t.finalized_||!oa(n)?n:n===Ux(t.base_,e)?(Hx(t),t.copy_[e]=zx(n,t)):n},has(t,e){return e in ia(t)},ownKeys(t){return Reflect.ownKeys(ia(t))},set(t,e,r){let n=bA(ia(t),e);if(n?.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){let i=Ux(ia(t),e),o=i?.[jr];if(o&&o.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(AK(r,i)&&(r!==void 0||Bx(t.base_,e)))return!0;Hx(t),jx(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return Ux(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,Hx(t),jx(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){let r=ia(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){kr(11)},getPrototypeOf(t){return ks(t.base_)},setPrototypeOf(){kr(12)}},Tl={};Dm(Gx,(t,e)=>{Tl[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Tl.deleteProperty=function(t,e){return process.env.NODE_ENV!=="production"&&isNaN(parseInt(e))&&kr(13),Tl.set.call(this,t,e,void 0)};Tl.set=function(t,e,r){return process.env.NODE_ENV!=="production"&&e!=="length"&&isNaN(parseInt(e))&&kr(14),Gx.set.call(this,t[0],e,r,t[0])};function Ux(t,e){let r=t[jr];return(r?ia(r):t)[e]}function IK(t,e,r){let n=bA(e,r);return n?"value"in n?n.value:n.get?.call(t.draft_):void 0}function bA(t,e){if(!(e in t))return;let r=ks(t);for(;r;){let n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=ks(r)}}function jx(t){t.modified_||(t.modified_=!0,t.parent_&&jx(t.parent_))}function Hx(t){t.copy_||(t.copy_=Vx(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var CK=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){let o=r;r=e;let s=this;return function(u=o,...m){return s.produce(u,d=>r.call(this,d,...m))}}typeof r!="function"&&kr(6),n!==void 0&&typeof n!="function"&&kr(7);let i;if(oa(e)){let o=gA(this),s=zx(e,void 0),l=!0;try{i=r(s),l=!1}finally{l?Wx(o):$x(o)}return dA(o,n),hA(i,o)}else if(!e||typeof e!="object"){if(i=r(e),i===void 0&&(i=e),i===TA&&(i=void 0),this.autoFreeze_&&qx(i,!0),n){let o=[],s=[];aa("Patches").generateReplacementPatches_(e,i,o,s),n(o,s)}return i}else kr(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(s,...l)=>this.produceWithPatches(s,u=>e(u,...l));let n,i;return[this.produce(e,r,(s,l)=>{n=s,i=l}),n,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){oa(t)||kr(8),As(t)&&(t=OK(t));let e=gA(this),r=zx(t,void 0);return r[jr].isManual_=!0,$x(e),r}finishDraft(t,e){let r=t&&t[jr];(!r||!r.isManual_)&&kr(9);let{scope_:n}=r;return dA(n,e),hA(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){let i=e[r];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}r>-1&&(e=e.slice(r+1));let n=aa("Patches").applyPatches_;return As(t)?n(t,e):this.produce(t,i=>n(i,e))}};function zx(t,e){let r=Cm(t)?aa("MapSet").proxyMap_(t,e):Om(t)?aa("MapSet").proxySet_(t,e):FK(t,e);return(e?e.scope_:vA()).drafts_.push(r),r}function OK(t){return As(t)||kr(10,t),wA(t)}function wA(t){if(!oa(t)||Nm(t))return t;let e=t[jr],r;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=Vx(t,e.scope_.immer_.useStrictShallowCopy_)}else r=Vx(t,!0);return Dm(r,(n,i)=>{SA(r,n,wA(i))}),e&&(e.finalized_=!1),r}var zr=new CK,Um=zr.produce,Tde=zr.produceWithPatches.bind(zr),xde=zr.setAutoFreeze.bind(zr),Sde=zr.setUseStrictShallowCopy.bind(zr),vde=zr.applyPatches.bind(zr),bde=zr.createDraft.bind(zr),wde=zr.finishDraft.bind(zr);var Gt=[];for(let t=0;t<256;++t)Gt.push((t+256).toString(16).slice(1));function EA(t,e=0){return(Gt[t[e+0]]+Gt[t[e+1]]+Gt[t[e+2]]+Gt[t[e+3]]+"-"+Gt[t[e+4]]+Gt[t[e+5]]+"-"+Gt[t[e+6]]+Gt[t[e+7]]+"-"+Gt[t[e+8]]+Gt[t[e+9]]+"-"+Gt[t[e+10]]+Gt[t[e+11]]+Gt[t[e+12]]+Gt[t[e+13]]+Gt[t[e+14]]+Gt[t[e+15]]).toLowerCase()}var _A=require("crypto"),Bm=new Uint8Array(256),Hm=Bm.length;function Kx(){return Hm>Bm.length-16&&((0,_A.randomFillSync)(Bm),Hm=0),Bm.slice(Hm,Hm+=16)}var RA=require("crypto"),Qx={randomUUID:RA.randomUUID};function NK(t,e,r){if(Qx.randomUUID&&!e&&!t)return Qx.randomUUID();t=t||{};let n=t.random??t.rng?.()??Kx();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){if(r=r||0,r<0||r+16>e.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let i=0;i<16;++i)e[r+i]=n[i];return e}return EA(n)}var Yx=NK;function kA(t,e,r){if(e>=t.length)throw Error(`Expected at least ${e+1} ${r} but received only ${t.length}`);return t[e]}function Vm(t,e){if(Array.isArray(t))return t.map(r=>Vm(r,e));if(typeof t=="object"&&t!=null){if(UK(t))return kA(e,t.index,"placeholder value");let r={};for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=Vm(t[n],e));return r}return t}function UK(t){return typeof t=="object"&&t!=null&&"type"in t&&t.type==="placeholder"}var Km=Hr(PA(),1);var HK={blue:"blue",green:"green",red:"red",pink:"pink",yellow:"yellow",userColor1:"navy",userColor2:"apricot",default:null},BK={ex:"ex",fox:"fox",wing:"wing",hole:"hole",frame:"frame",curve:"curve",eye:"eye",play:"play",crosshairs:"cross",bolt:"bolt",default:null},$m={cursor:"this",that:"that",source:"source",nothing:"nothing",keyboard:null,explicit:null,decoratedSymbol:null,lineNumber:null,range:null,target:null},jm={modulo100:"row",relativeUp:"up",relativeDown:"down"};function MA(t){let e=HK[t];if(e==null)throw Error(`Unknown hat color '${t}'`);return e}function DA(t){let e=BK[t];if(e==null)throw Error(`Unknown hat shape '${t}'`);return e}function Zx(t,e){return Object.fromEntries(Object.entries(t).map(([r,n])=>[r,Object.fromEntries(Object.entries(n).map(([i,o])=>[i,e(o,r,i)]))]))}var VK=Object.fromEntries("air bat cap drum each fine gust harp sit jury crunch look made near odd pit quench red sun trap urge vest whale plex yank zip".split(" ").map((t,e)=>[String.fromCharCode(97+e),t])),WK=Object.fromEntries("zero one two three four five six seven eight nine".split(" ").map((t,e)=>[e.toString(),t])),$K={".":"dot",",":"comma",";":"semicolon",":":"colon","!":"bang","*":"asterisk","@":"at sign","&":"ampersand","?":"question","/":"slash","\\":"backslash","-":"dash","=":"equals","+":"plus","~":"tilde",_:"underscore","#":"hash","%":"percent","^":"caret","|":"pipe",$:"dollar","\xA3":"pound","'":"quote",'"':"double quote","`":"back tick","(":"paren",")":"right paren","{":"brace","}":"right brace","[":"square","]":"right square","<":"angle",">":"right angle","\uFFFD":"special"},LA={...VK,...WK,...$K};function lo(...t){return{defaultSpokenForms:t,isDisabledByDefault:!0,isPrivate:!1}}function Ft(...t){return{defaultSpokenForms:t,isDisabledByDefault:!0,isPrivate:!0}}var FA={pairedDelimiter:{curlyBrackets:"curly",angleBrackets:"diamond",escapedDoubleQuotes:"escaped quad",escapedSingleQuotes:"escaped twin",escapedParentheses:"escaped round",escapedSquareBrackets:"escaped box",doubleQuotes:"quad",parentheses:"round",backtickQuotes:"skis",squareBrackets:"box",singleQuotes:"twin",tripleDoubleQuotes:Ft("triple quad"),tripleSingleQuotes:Ft("triple twin"),tripleBacktickQuotes:Ft("triple skis"),any:"pair",string:"string",whitespace:"void",collectionBoundary:Ft("collection boundary")},simpleScopeTypeType:{argumentOrParameter:"arg",argumentList:"arg list",attribute:"attribute",functionCall:"call",functionCallee:"callee",className:"class name",class:"class",comment:"comment",functionName:"funk name",namedFunction:"funk",ifStatement:"if state",instance:"instance",collectionItem:"item",collectionKey:"key",anonymousFunction:"lambda",list:"list",map:"map",name:"name",regularExpression:"regex",section:"section",sectionLevelOne:lo("one section"),sectionLevelTwo:lo("two section"),sectionLevelThree:lo("three section"),sectionLevelFour:lo("four section"),sectionLevelFive:lo("five section"),sectionLevelSix:lo("six section"),selector:"selector",statement:"state",branch:"branch",type:"type",value:"value",condition:"condition",unit:"unit",xmlElement:"element",xmlBothTags:"tags",xmlStartTag:"start tag",xmlEndTag:"end tag",part:"part",chapter:"chapter",subSection:"subsection",subSubSection:"subsubsection",namedParagraph:"paragraph",subParagraph:"subparagraph",environment:"environment",command:"command",character:"char",word:"sub",token:"token",identifier:"identifier",line:"line",sentence:"sentence",paragraph:"block",boundedParagraph:"short block",document:"file",nonWhitespaceSequence:"paint",boundedNonWhitespaceSequence:"short paint",url:"link",notebookCell:"cell",string:Ft("parse tree string"),textFragment:Ft("text fragment"),disqualifyDelimiter:Ft("disqualify delimiter"),pairDelimiter:Ft("pair delimiter"),"private.fieldAccess":Ft("access"),"private.switchStatementSubject":Ft("subject")},complexScopeTypeType:{glyph:"glyph"},surroundingPairForceDirection:{left:"left",right:"right"},simpleModifier:{excludeInterior:"bounds",toRawSelection:"just",leading:"leading",trailing:"trailing",keepContentFilter:"content",keepEmptyFilter:"empty",inferPreviousMark:"its",startOf:"start of",endOf:"end of",interiorOnly:"inside",visible:"visible",extendThroughStartOf:"head",extendThroughEndOf:"tail",everyScope:"every"},modifierExtra:{first:"first",last:"last",previous:"previous",next:"next",forward:"forward",backward:"backward",ancestor:"grand"},customRegex:{},action:{addSelection:"append",addSelectionAfter:"append post",addSelectionBefore:"append pre",breakLine:"break",scrollToBottom:"bottom",toggleLineBreakpoint:"break point",cutToClipboard:"carve",scrollToCenter:"center",clearAndSetSelection:"change",remove:"chuck",insertCopyBefore:"clone up",insertCopyAfter:"clone",toggleLineComment:"comment",copyToClipboard:"copy",scrollToTop:"crown",outdentLine:"dedent",revealDefinition:"define",editNewLineBefore:"drink",insertEmptyLineBefore:"drop",extractVariable:"extract",insertEmptyLineAfter:"float",foldRegion:"fold",followLink:"follow",followLinkAside:"follow split",flashTargets:"flash",deselect:"give",highlight:"highlight",showHover:"hover",increment:"increment",decrement:"decrement",indentLine:"indent",showDebugHover:"inspect",setSelectionAfter:"post",editNewLineAfter:"pour",setSelectionBefore:"pre",insertEmptyLinesAround:"puff",showQuickFix:"quick fix",showReferences:"reference",rename:"rename",reverseTargets:"reverse",findInDocument:"scout",findInWorkspace:"scout all",randomizeTargets:"shuffle",generateSnippet:"snippet make",sortTargets:"sort",setSelection:"take",revealTypeDefinition:"type deaf",unfoldRegion:"unfold",callAsFunction:"call",swapTargets:"swap",replaceWithTarget:"bring",moveToTarget:"move",wrapWithPairedDelimiter:"wrap",wrapWithSnippet:"wrap",rewrapWithPairedDelimiter:"repack",insertSnippet:"snippet",pasteFromClipboard:"paste",joinLines:"join",gitAccept:"git accept",gitRevert:"git revert",gitStage:"git stage",gitUnstage:"git unstage","private.showParseTree":Ft("parse tree"),"experimental.setInstanceReference":lo("from"),editNew:Ft("edit new"),executeCommand:Ft("execute command"),parsed:Ft("parsed"),getText:Ft("get text"),replace:Ft("replace"),"private.getTargets":Ft("get targets"),"private.setKeyboardTarget":Ft("set keyboard target")},customAction:{},grapheme:LA};var Xx=Zx(FA,t=>typeof t=="string"?{defaultSpokenForms:[t],isDisabledByDefault:!1,isPrivate:!1}:t),Ln=Zx(Xx,({defaultSpokenForms:t,isDisabledByDefault:e,isPrivate:r})=>({spokenForms:e?[]:t,isCustom:!1,defaultSpokenForms:t,requiresTalonUpdate:!1,isPrivate:r}));var Et={rangeExclusive:"between",rangeInclusive:"past",rangeExcludingStart:null,rangeExcludingEnd:"until",listConnective:"and",swapConnective:"with",sourceDestinationConnective:"to",before:"before",after:"after",verticalRange:"slice",previous:"previous",next:"next",forward:"forward",backward:"backward"};var OA=Hr(CA(),1),qm=class{constructor(e){this.mooLexer=OA.default.compile(e)}reset(e,r){let{mooState:n}=r??{};return this.mooLexer.reset(e,n),this}formatError(e,r){return this.mooLexer.formatError(e,r)}has(e){return this.mooLexer.has(e)}save(){return{mooState:this.mooLexer.save()}}next(){let e=this.mooLexer.next();return this.skipToken(e)?this.next():e}transform({value:e}){return e}skipToken(e){return e?.type==="ws"}};var Fn={};for(let t of Nx){let{spokenForms:e}=Ln.action[t];for(let r of e)Fn[r]={type:"simpleActionName",value:t}}var jK=["replaceWithTarget","moveToTarget"];for(let t of jK){let{spokenForms:e}=Ln.action[t];for(let r of e)Fn[r]={type:"bringMove",value:t}}var zK=["before","after","to"];for(let t of zK){let e=Et[t==="to"?"sourceDestinationConnective":t];Fn[e]={type:"insertionMode",value:t}}for(let t of ta){let{spokenForms:e}=Ln.simpleScopeTypeType[t];for(let r of e)Fn[r]={type:"simpleScopeTypeType",value:t}}for(let t of Pm){let{spokenForms:e}=Ln.pairedDelimiter[t];for(let r of e)Fn[r]={type:"pairedDelimiter",value:t}}for(let[t,e]of Object.entries($m))e!=null&&(Fn[e]={type:"simpleMarkType",value:t});Ln.modifierExtra.next.spokenForms.forEach(t=>{Fn[t]={type:"direction",value:"forward"}});Ln.modifierExtra.previous.spokenForms.forEach(t=>{Fn[t]={type:"direction",value:"backward"}});var Qn=new qm({ws:/[ \t]+/,placeholderTarget:{match:/<target\d*>/,value:t=>t.slice(7,-1)},token:{match:Object.keys(Fn),type:t=>Fn[t].type,value:t=>Fn[t].value}});function NA(t,e){return{name:t,target:e}}function UA(t,e,r){return{name:t,source:e,destination:r}}function Gm(t,e){let r={type:"primitive"};return t!=null&&(r.modifiers=t),e!=null&&(r.mark=e),r}function HA(t,e){return{type:"primitive",insertionMode:t,target:e}}function BA(t){return{type:"containingScope",scopeType:t}}function VA(t,e){return{type:"relativeScope",scopeType:t,offset:1,length:1,direction:e}}function WA(t){return{type:t}}function $A(t){return{type:"surroundingPair",delimiter:t}}function jA(t){return{type:t}}function zA(t){return{type:"target",target:{type:"placeholder",index:t.length===0?0:parseInt(t)-1}}}function Jx(t){return t[0]}var qK={Lexer:Qn,ParserRules:[{name:"main",symbols:["action"],postprocess:Jx},{name:"action",symbols:[Qn.has("simpleActionName")?{type:"simpleActionName"}:simpleActionName,"target"],postprocess:([t,e])=>NA(t,e)},{name:"action",symbols:[Qn.has("bringMove")?{type:"bringMove"}:bringMove,"target","destination"],postprocess:([t,e,r])=>UA(t,e,r)},{name:"destination",symbols:["primitiveDestination"],postprocess:Jx},{name:"destination",symbols:[Qn.has("insertionMode")?{type:"insertionMode"}:insertionMode,"target"],postprocess:([t,e])=>HA(t,e)},{name:"target",symbols:["primitiveTarget"],postprocess:Jx},{name:"primitiveTarget$ebnf$1",symbols:["modifier"]},{name:"primitiveTarget$ebnf$1",symbols:["primitiveTarget$ebnf$1","modifier"],postprocess:t=>t[0].concat([t[1]])},{name:"primitiveTarget",symbols:["primitiveTarget$ebnf$1"],postprocess:([t])=>Gm(t,void 0)},{name:"primitiveTarget",symbols:["mark"],postprocess:([t])=>Gm(void 0,t)},{name:"primitiveTarget$ebnf$2",symbols:["modifier"]},{name:"primitiveTarget$ebnf$2",symbols:["primitiveTarget$ebnf$2","modifier"],postprocess:t=>t[0].concat([t[1]])},{name:"primitiveTarget",symbols:["primitiveTarget$ebnf$2","mark"],postprocess:([t,e])=>Gm(t,e)},{name:"modifier",symbols:["scopeType"],postprocess:([t])=>BA(t)},{name:"modifier",symbols:[Qn.has("direction")?{type:"direction"}:direction,"scopeType"],postprocess:([t,e])=>VA(e,t)},{name:"scopeType",symbols:[Qn.has("simpleScopeTypeType")?{type:"simpleScopeTypeType"}:simpleScopeTypeType],postprocess:([t])=>WA(t)},{name:"scopeType",symbols:[Qn.has("pairedDelimiter")?{type:"pairedDelimiter"}:pairedDelimiter],postprocess:([t])=>$A(t)},{name:"mark",symbols:[Qn.has("simpleMarkType")?{type:"simpleMarkType"}:simpleMarkType],postprocess:([t])=>jA(t)},{name:"mark",symbols:[Qn.has("placeholderTarget")?{type:"placeholderTarget"}:placeholderTarget],postprocess:([t])=>zA(t)}],ParserStart:"main"},qA=qK;function GK(){return new Km.Parser(Km.Grammar.fromCompiled(qA))}function GA(t){let e=GK();if(e.feed(t),e.results.length!==1)throw new Error(`Expected exactly one result, got ${e.results.length}`);return e.results[0]}function Qm(t,e){let r=GA(t);return Vm(r,e)}function xl(t){switch(t.name){case"callAsFunction":return[t.callee,t.argument];case"replaceWithTarget":case"moveToTarget":return[t.source,...KA(t.destination)];case"swapTargets":return[t.target1,t.target2];case"pasteFromClipboard":case"insertSnippet":case"replace":case"editNew":return KA(t.destination);case"parsed":return xl(Qm(t.content,t.arguments));default:return[t.target]}}function KA(t){switch(t.type){case"list":return t.destinations.map(({target:e})=>e);case"primitive":return[t.target];case"implicit":return[]}}function tS(t){return t.flatMap(eS)}function eS(t){switch(t.type){case"primitive":return[t];case"list":return t.elements.flatMap(eS);case"range":return[t.anchor,t.active].flatMap(eS);case"implicit":return[]}}var KK={arrowFunction:"anonymousFunction",dictionary:"map",regex:"regularExpression"},QK={purple:"pink"};function YK(t){t.modifiers?.forEach(e=>{(e.type==="containingScope"||e.type==="everyScope")&&(e.scopeType.type=KK[e.scopeType.type]??e.scopeType.type)})}function ZK(t){t.mark?.type==="decoratedSymbol"&&(t.mark.symbolColor=QK[t.mark.symbolColor]??t.mark.symbolColor)}function rS(t){tS(t).forEach(e=>{YK(e),ZK(e)})}function QA(t){return{...t,version:1}}var XK={type:"primitive",mark:{type:"cursor"},selectionType:"token",position:"contents",modifier:{type:"identity"},insideOutsideType:"inside"},JK={type:"primitive",isImplicit:!0},YA=t=>Ri(t,XK)?JK:t;function ZA(t){let e=t.action;return{spokenForm:t.spokenForm,action:{name:e,args:t.extraArgs},targets:t4(t.targets,e),usePrePhraseSnapshot:t.usePrePhraseSnapshot??!1,version:2}}function e4(t){switch(t.type){case"identity":return[];case"containingScope":{let{includeSiblings:e,scopeType:r,type:n,...i}=t;return[{type:e?"everyScope":"containingScope",scopeType:{type:r},...i}]}case"surroundingPair":{let{delimiterInclusion:e,...r}=t,n={type:"containingScope",scopeType:r};return e==="interiorOnly"||e==="excludeInterior"?n.scopeType.delimiter==="any"?[{type:e}]:[{type:e},n]:[n]}case"subpiece":{let{type:e,pieceType:r,...n}=t;return[{type:"ordinalRange",scopeType:{type:r},...n}]}case"head":return[{type:"extendThroughStartOf"}];case"tail":return[{type:"extendThroughEndOf"}];default:return[t]}}function nS(t,e){let{type:r,isImplicit:n,mark:i,insideOutsideType:o,modifier:s,selectionType:l,position:u}=t,m=[];if(u&&u!=="contents"&&(u==="before"?o==="inside"?m.push({type:"position",position:"start"}):e==="remove"?m.push({type:"leading"}):m.push({type:"position",position:"before"}):o==="inside"?m.push({type:"position",position:"end"}):e==="remove"?m.push({type:"trailing"}):m.push({type:"position",position:"after"})),l)switch(l){case"token":if(s?.type==="subpiece")break;case"line":if(i?.type==="lineNumber")break;default:m.push({type:"containingScope",scopeType:{type:l}})}return s&&m.push(...e4(s)),{type:r,isImplicit:n,modifiers:m.length>0?m:void 0,mark:i?.type==="cursorToken"?void 0:i}}function XA(t,e){switch(t.type){case"list":return{...t,elements:t.elements.map(r=>XA(r,e))};case"range":{let{type:r,rangeType:n,start:i,end:o,excludeStart:s,excludeEnd:l}=t;return{type:r,rangeType:n,anchor:nS(i,e),active:nS(o,e),excludeAnchor:s??!1,excludeActive:l??!1}}case"primitive":return nS(t,e)}}function t4(t,e){return t.map(r=>XA(r,e)).map(r=>r.type==="primitive"?YA(r):r)}function JA(t){return{...t,version:3,targets:t.targets.map(eP)}}function eP(t){switch(t.type){case"list":return{...t,elements:t.elements.map(e=>eP(e))};case"range":{let{anchor:e,active:r,...n}=t;return{anchor:iS(e),active:iS(r),...n}}case"primitive":return iS(t)}}function iS(t){let e=t.modifiers!=null?t.modifiers.map(n4):void 0;if(t.mark?.type==="lineNumber"){let{anchor:r,active:n}=t.mark;if(r.type!==n.type||r.lineNumber<0!=n.lineNumber<0)return{type:"range",anchor:{type:"primitive",mark:vl(r),modifiers:e},active:{type:"primitive",mark:vl(n)},excludeAnchor:!1,excludeActive:!1}}return{...t,mark:t.mark!=null?r4(t.mark):void 0,modifiers:e}}function r4(t){switch(t.type){case"lineNumber":return i4(t);default:return t}}function n4(t){switch(t.type){case"ordinalRange":return o4(t);default:return t}}function i4(t){return Ri(t.anchor,t.active)?vl(t.anchor):{type:"range",anchor:vl(t.anchor),active:vl(t.active)}}function o4(t){return t.anchor===t.active?Sl(t.scopeType,t.anchor):t.anchor===0&&t.active>t.anchor?Sl(t.scopeType,t.anchor,t.active-t.anchor+1):t.anchor<0&&t.active===-1?Sl(t.scopeType,t.anchor,-t.anchor):{type:"range",anchor:Sl(t.scopeType,t.anchor),active:Sl(t.scopeType,t.active),excludeAnchor:t.excludeAnchor,excludeActive:t.excludeActive}}function vl(t){return{type:"lineNumber",lineNumberType:t.type,lineNumber:t.lineNumber}}function Sl(t,e,r=1){return{type:"ordinalScope",scopeType:t,start:e,length:r}}function rP(t){return{...t,version:4,targets:t.targets.map(nP)}}function nP(t){switch(t.type){case"primitive":return tP(t);case"range":{let{anchor:e,...r}=t;return{...r,anchor:tP(e)}}case"list":{let{elements:e,...r}=t;return{...r,elements:e.map(nP)}}}}function tP(t){return t.mark==null&&t.modifiers==null||t.isImplicit?{type:"implicit"}:t}function iP(t){return{...t,version:5,action:a4(t.action),targets:t.targets.map(Ym)}}function a4(t){switch(t.name){case"wrapWithSnippet":{let[e,r]=s4(t.args[0]);return{name:"wrapWithSnippet",args:[{type:"named",name:e,variableName:r}]}}case"insertSnippet":{let[e,r]=t.args,n={type:"named",name:e};return r!=null&&(n.substitutions=r),{name:"insertSnippet",args:[n]}}default:return t}}function s4(t){let[e,r]=t.split(".");if(e==null||r==null)throw new Error("Snippet location missing '.'");return[e,r]}function Ym(t){switch(t.type){case"implicit":return t;case"list":return{...t,elements:t.elements.map(Ym)};case"range":return{...t,anchor:Ym(t.anchor),active:Ym(t.active)};case"primitive":return{...t,mark:t.mark!=null?oS(t.mark):void 0,modifiers:t.modifiers!=null&&t.modifiers.length>0?t.modifiers.map(aS):void 0}}}function oS(t){return t.type==="range"?{...t,anchor:oS(t.anchor),active:oS(t.active),excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1}:t}function aS(t){return t.type==="range"?{...t,anchor:aS(t.anchor),active:aS(t.active),excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1}:t}var c4={bring:"replaceWithTarget",call:"callAsFunction",clear:"clearAndSetSelection",commentLines:"toggleLineComment",copy:"copyToClipboard",cut:"cutToClipboard",delete:"remove",editNewLineAbove:"editNewLineBefore",editNewLineBelow:"editNewLineAfter",findInFiles:"findInWorkspace",fold:"foldRegion",indentLines:"indentLine",insertEmptyLineAbove:"insertEmptyLineBefore",insertEmptyLineBelow:"insertEmptyLineAfter",insertLineAfter:"editNewLineAfter",insertLineBefore:"editNewLineBefore",move:"moveToTarget",outdentLines:"outdentLine",paste:"pasteFromClipboard",reverse:"reverseTargets",setBreakpoint:"toggleLineBreakpoint",sort:"sortTargets",swap:"swapTargets",unfold:"unfoldRegion",use:"replaceWithTarget",wrap:"wrapWithPairedDelimiter"};function sS(t){let e=c4[t]??t;if(!sA.includes(e))throw new Error(`Unknown action name: ${e}`);return e}function oP(t){return{version:6,spokenForm:t.spokenForm,usePrePhraseSnapshot:t.usePrePhraseSnapshot,action:l4(t.action,t.targets)}}function l4(t,e){let r=sS(t.name);switch(r){case"replaceWithTarget":case"moveToTarget":return{name:r,source:pn(e[0]),destination:bl(e[1])};case"swapTargets":return{name:r,target1:pn(e[0]),target2:pn(e[1])};case"callAsFunction":return{name:r,callee:pn(e[0]),argument:pn(e[1])};case"pasteFromClipboard":return{name:r,destination:bl(e[0])};case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return{name:r,left:t.args[0],right:t.args[1],target:pn(e[0])};case"generateSnippet":return{name:r,snippetName:t.args?.[0],target:pn(e[0])};case"insertSnippet":return{name:r,snippetDescription:t.args[0],destination:bl(e[0])};case"wrapWithSnippet":return{name:r,snippetDescription:t.args[0],target:pn(e[0])};case"executeCommand":return{name:r,commandId:t.args[0],options:t.args?.[1],target:pn(e[0])};case"replace":return{name:r,replaceWith:t.args[0],destination:bl(e[0])};case"highlight":{let n={name:r,target:pn(e[0])};return t.args?.[0]!=null&&(n.highlightId=t.args?.[0]),n}case"editNew":return{name:r,destination:bl(e[0])};case"getText":return{name:r,options:t.args?.[0],target:pn(e[0])};case"parsed":throw Error("Parsed action should not be present in V5");default:return{name:r,target:pn(e[0])}}}function pn(t){switch(t.type){case"list":case"range":case"primitive":return u4(t);case"implicit":return t}}function u4(t){switch(t.type){case"list":return p4(t);case"range":case"primitive":return Zm(t)}}function p4(t){return{...t,elements:t.elements.map(Zm)}}function Zm(t){switch(t.type){case"range":return aP(t);case"primitive":return Xm(t)}}function aP(t){let{anchor:e,active:r}=t,n={type:"range",anchor:e.type==="implicit"?e:Xm(e),active:Xm(r),excludeAnchor:t.excludeAnchor,excludeActive:t.excludeActive};return t.rangeType!=null&&(n.rangeType=t.rangeType),n}function Xm(t){let e={type:"primitive"},r=y4(t.modifiers);return r!=null&&(e.modifiers=r),t.mark!=null&&(e.mark=t.mark),e}function bl(t){switch(t.type){case"list":return m4(t);case"range":return f4(t);case"primitive":return d4(t);case"implicit":return g4()}}function m4(t){let e=[],r=[],n,i=()=>{r.length>0&&e.push({type:"primitive",insertionMode:n??"to",target:r.length===1?r[0]:{type:"list",elements:r}})};return t.elements.forEach(o=>{let s=Jm(o);s!=null?(i(),r=[Zm(o)],n=s):r.push(Zm(o))}),i(),e.length>1?{type:"list",destinations:e}:e[0]}function f4(t){return{type:"primitive",insertionMode:Jm(t.anchor)??"to",target:aP(t)}}function d4(t){return{type:"primitive",insertionMode:Jm(t)??"to",target:Xm(t)}}function g4(){return{type:"implicit"}}function Jm(t){switch(t.type){case"implicit":return"to";case"primitive":return h4(t);case"range":return Jm(t.anchor)}}function h4(t){let e=t.modifiers?.find(r=>r.type==="position");if(e!=null){if(t.modifiers.indexOf(e)!==0)throw Error("Position modifier has to be at first index");if(e?.position==="before"||e?.position==="after")return e.position}}function y4(t){let e=[];if(t!=null)for(let r of t)r.type==="position"?r.position==="start"?e.push({type:"startOf"}):r.position==="end"&&e.push({type:"endOf"}):e.push(r);return e.length>0?e:void 0}function sP(t){return{...t,version:7}}function lS(t){let e=T4(t,7),{action:r,usePrePhraseSnapshot:n=!1,spokenForm:i}=e;return{version:7,spokenForm:i,action:Um(r,o=>{let s=xl(o);rS(s),r.name}),usePrePhraseSnapshot:n}}function T4(t,e){if(t.version>7)throw new Dp;for(;t.version<e;)switch(t.version){case 0:t=QA(t);break;case 1:t=ZA(t);break;case 2:t=JA(t);break;case 3:t=rP(t);break;case 4:t=iP(t);break;case 5:t=oP(t);break;case 6:t=sP(t);break;default:throw new Error(`Can't upgrade from unknown version ${t.version}`)}return t}var uS;function ef(t){uS=t}function k(){if(uS==null)throw Error("Tried to access ide before it was injected");return uS}var tf=class{constructor(e){this.maxLength=e;this.stack=[];this.index=void 0}push(e){this.index!=null?this.stack.splice(this.index+1,this.stack.length-this.index-1,e):this.stack.push(e),this.stack.length>this.maxLength&&this.stack.shift(),this.index=this.stack.length-1}undo(){if(this.index!=null&&this.index>0)return this.index--,this.stack[this.index]}redo(){if(this.index!=null&&this.index<this.stack.length-1)return this.index++,this.stack[this.index]}};var x4=25,rf=class{constructor(){this.targetMap=new Map;this.targetHistory=new Rs(()=>new tf(x4));this.notifier=new tr}set(e,r,{history:n=!1}={}){this.targetMap.set(e,r),n&&r!=null&&this.targetHistory.get(e).push(r),this.notifier.notifyListeners(e,r)}get(e){return this.targetMap.get(e)}undo(e){let r=this.targetHistory.get(e).undo();r!=null&&this.set(e,r,{history:!1})}redo(e){let r=this.targetHistory.get(e).redo();r!=null&&this.set(e,r,{history:!1})}onStoredTargets(e){for(let r of Ss)e(r,this.get(r));return this.notifier.registerListener(e)}};function kt(t){if(t.length===0)throw new Error("Require at least one target with this action");let e=t.map(r=>r.editor);if(new Set(e).size>1)throw new Error("Can only have one editor with this action");return e[0]}function Ar(t){if(t.length!==1)throw new Error("Can only have one target with this action");return t[0]}async function Mi(t,e,r){return Promise.all(pS(t,e).map(([n,i])=>r(n,i)))}async function ct(t,e){return Mi(t,r=>r.editor,e)}async function cP(t,e){let r=pS(t,i=>i.editor),n=[];for(let[i,o]of r)n.push(await e(i,o));return n}function lP(t){return pS(t,e=>e.editor)}function pS(t,e){let n=gl(t,i=>e(i).document.uri);return Array.from(n.values(),i=>[e(i[0]),i])}function mn(t,e){return e!=null?Dt(t,e).map(([n,i])=>({editor:n.editor,selection:n?.isReversed?new $e(i.end,i.start):new $e(i.start,i.end)})):t.map(n=>({editor:n.editor,selection:n.contentSelection}))}function fn(t,e){return t.textualType==="line"?$r(e):dr(e)}function S4(t){return fn(t,t.contentRange)}function Be(t,e,r,n=S4){return t.flashRanges(e.map(i=>({editor:i.editor,range:n(i),style:r})))}function uo(t,e){return new Y(new ye(e.start.line,0),t.document.lineAt(e.end).range.end)}function mS(t,e){return e.isEmpty?0:t.document.offsetAt(e.end)-t.document.offsetAt(e.start)}function uP(t,e){let[r,n]=e instanceof ye?[e,e]:[e.start,e.end];return t.start.isBefore(r)&&t.end.isAfter(n)}function Di(t,...e){for(let r of e)r!=null&&(t=t.union(r));return t}var nf=class t{constructor(e,r,n){this.target=e;this.insertionMode=r;this.contentRange=b4(e.contentRange,r),this.isBefore=r==="before",this.isLineDelimiter=e.insertionDelimiter.includes(`
`),this.indentationString=n??this.isLineDelimiter?v4(e.editor,e.contentRange):"",this.insertionPrefix=e.prefixRange!=null?e.editor.document.getText(e.prefixRange):void 0}get contentSelection(){return this.contentRange.toSelection(this.target.isReversed)}get editor(){return this.target.editor}get insertionDelimiter(){return this.target.insertionDelimiter}get isRaw(){return this.target.isRaw}withTarget(e){return new t(e,this.insertionMode,this.indentationString)}getEditNewActionType(){return this.insertionMode==="after"&&this.target.contentRange.isSingleLine&&this.insertionDelimiter===`
`&&this.insertionPrefix==null?"insertLineAfter":"edit"}constructChangeEdit(e,r=!1){return this.insertionMode==="before"||this.insertionMode==="after"?this.constructEditWithDelimiters(e,r):this.constructEditWithoutDelimiters(e)}constructEditWithDelimiters(e,r){let n=this.getEditRange(),i=this.getEditText(e,r),o=s=>this.updateRange(s,e,r);return{range:n,text:i,isReplace:this.insertionMode==="after",updateRange:o}}constructEditWithoutDelimiters(e){return{range:this.contentRange,text:e,updateRange:r=>r}}getEditRange(){let e=(()=>{let r=this.isBefore?Di(this.target.contentRange,this.target.prefixRange).start:this.target.contentRange.end;if(this.isLineDelimiter){let n=this.editor.document.lineAt(r),i=this.isBefore?n.rangeTrimmed?.start??n.range.start:n.rangeTrimmed?.end??n.range.end;if(r.isEqual(i))return this.isBefore?n.range.start:n.range.end}return r})();return new Y(e,e)}getEditText(e,r){let i=(r?"":this.indentationString)+(this.insertionPrefix??"")+e;return this.isBefore?i+this.insertionDelimiter:this.insertionDelimiter+i}updateRange(e,r,n){let i=this.editor.document.offsetAt(e.start)+(n?0:this.indentationString.length)+(this.insertionPrefix?.length??0),o=this.isBefore?i:i+this.getLengthOfInsertionDelimiter(),s=o+r.length;return new Y(this.editor.document.positionAt(o),this.editor.document.positionAt(s))}getLengthOfInsertionDelimiter(){if(this.editor.document.eol==="CRLF"){let e=this.insertionDelimiter.match(/\n/g);if(e!=null)return this.insertionDelimiter.length+e.length}return this.insertionDelimiter.length}};function v4(t,e){let r=Number.MAX_SAFE_INTEGER,n="";for(let i=e.start.line;i<=e.end.line;++i){let o=t.document.lineAt(i);if(o.range.isEmpty||o.isEmptyOrWhitespace&&!e.isSingleLine)continue;let s=o.rangeTrimmed?.start??o.range.end;s.character<r&&(r=s.character,n=o.text.slice(0,r))}return n}function b4(t,e){switch(e){case"before":return t.start.toEmptyRange();case"after":return t.end.toEmptyRange();case"to":return t}}function Ps(t,e,r,n){return w4(t.contentRange,e.contentRange,r,n)}function w4(t,e,r,n){return new Y(r?t.start:t.end,n?e.end:e.start)}function Ms(t,e,r,n){let i=r?t.contentRange.start:new ye(t.contentRange.end.line+1,0),o=n?e.contentRange.end:e.editor.document.lineAt(e.contentRange.start.line-1).range.end;return new Y(i,o)}var Ge=class t{constructor(e){this.hasExplicitScopeType=!0;this.hasExplicitRange=!0;this.isRaw=!1;this.isImplicit=!1;this.isNotebookCell=!1;this.textualType="token";this.state={editor:e.editor,isReversed:e.isReversed,contentRange:e.contentRange,thatTarget:e.thatTarget}}get editor(){return this.state.editor}get isReversed(){return this.state.isReversed}get thatTarget(){return this.state.thatTarget!=null?this.state.thatTarget.thatTarget:this}get contentText(){return this.editor.document.getText(this.contentRange)}get contentSelection(){return this.contentRange.toSelection(this.isReversed)}get contentRange(){return this.state.contentRange}constructRemovalEdit(){return{range:this.getRemovalRange(),text:"",updateRange:e=>e}}getRemovalHighlightRange(){return fn(this,this.getRemovalRange())}withThatTarget(e){return this.cloneWith({thatTarget:e})}withContentRange(e){return this.cloneWith({contentRange:e})}getInterior(){}getBoundary(){}cloneWith(e){let r=Object.getPrototypeOf(this).constructor;return new r({...this.getCloneParameters(),...e})}maybeCreateRichRangeTarget(e,r){let{constructor:n}=Object.getPrototypeOf(this);return new n({...this.getCloneParameters(),isReversed:e,contentRange:Ps(this,r,!0,!0)})}isEqual(e){return e instanceof t&&Ri(this.getEqualityParameters(),e.getEqualityParameters())}getEqualityParameters(){let{thatTarget:e,...r}=this.getCloneParameters();return{...r}}toDestination(e){return new nf(this,e)}toPlainObject(){return{type:this.type,contentRange:al(this.contentRange),isReversed:this.isReversed,hasExplicitRange:this.hasExplicitRange}}};function of(t,e){return E4(t,e.start,e.end)}function E4(t,e,r){return{editor:t.editor,selection:_4(t.selection,e,r)}}function _4(t,e,r){return t.isReversed?new $e(r,e):new $e(e,r)}function sa(t,e){let{document:r}=t,n=r.getText(e),i=n.length-n.trimStart().length,o=n.length-n.trimEnd().length,s=r.offsetAt(e.start)+i,l=r.offsetAt(e.end)-o,u=r.positionAt(s),m=r.positionAt(l);return new Y(u,m)}function af(t,e,r,n){return r==null?void 0:new t({editor:e,isReversed:n,contentRange:r})}var Ze=class extends Ge{constructor(r){super(r);this.type="PlainTarget";this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.textualType=r.textualType??"token",this.insertionDelimiter=r.insertionDelimiter??""}getCloneParameters(){return{...this.state,textualType:this.textualType,insertionDelimiter:this.insertionDelimiter}}};function Ds(t,e,r){return af(Ze,t,e,r)}var sf=class extends Ge{constructor(r){super(r);this.type="DocumentTarget";this.textualType="line";this.insertionDelimiter=`

`}getInterior(){return[new Ze({editor:this.editor,isReversed:this.isReversed,contentRange:sa(this.editor,this.contentRange)})]}getRemovalRange(){return this.contentRange}getLeadingDelimiterTarget(){}getTrailingDelimiterTarget(){}getCloneParameters(){return this.state}};var gr=class t extends Ge{constructor(){super(...arguments);this.type="LineTarget";this.textualType="line";this.insertionDelimiter=`
`;this.getRemovalHighlightRange=()=>$r(this.fullLineContentRange)}get fullLineContentRange(){return uo(this.editor,this.contentRange)}getLeadingDelimiterTarget(){return Ds(this.editor,R4(this.editor,this.fullLineContentRange),this.isReversed)}getTrailingDelimiterTarget(){return Ds(this.editor,k4(this.editor,this.fullLineContentRange),this.isReversed)}getRemovalRange(){let r=this.fullLineContentRange,n=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return n==null?r:r.union(n.contentRange)}maybeCreateRichRangeTarget(r,n){return new t({editor:this.editor,isReversed:r,contentRange:Ms(this,n,!0,!0)})}getCloneParameters(){return this.state}};function R4(t,e){let{start:r}=e;return r.line>0?new Y(t.document.lineAt(r.line-1).range.end,e.start):void 0}function k4(t,e){let{end:r}=e;return r.line+1<t.document.lineCount?new Y(e.end,new ye(r.line+1,0)):void 0}function fS(t,e,r){return af(gr,t,e,r)}var cf=class t{constructor(e,r){this.target=e;this.insertionMode=r}get editor(){return this.target.editor}get contentRange(){return this.target.contentRange}get contentSelection(){return this.target.contentSelection}get insertionDelimiter(){return this.target.insertionDelimiter}get isRaw(){return this.target.isRaw}withTarget(e){return new t(e,this.insertionMode)}getEditNewActionType(){throw new Error("Method not implemented.")}constructChangeEdit(e){throw new Error("Method not implemented.")}};var lf=class extends Ge{constructor(r){super(r);this.type="NotebookCellTarget";this.insertionDelimiter=`
`;this.isNotebookCell=!0;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange}getCloneParameters(){return this.state}toDestination(r){return new cf(this,r)}};var po=class t extends Ge{constructor(){super(...arguments);this.type="ParagraphTarget";this.textualType="line";this.insertionDelimiter=`

`}getLeadingDelimiterTarget(){return fS(this.editor,A4(this.editor,this.fullLineContentRange),this.isReversed)}getTrailingDelimiterTarget(){return fS(this.editor,P4(this.editor,this.fullLineContentRange),this.isReversed)}getRemovalRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.contentRange.union(r.contentRange):this.contentRange;return new gr({contentRange:n,editor:this.editor,isReversed:this.isReversed}).getRemovalRange()}get fullLineContentRange(){return uo(this.editor,this.contentRange)}getRemovalHighlightRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.fullLineContentRange.union(r.contentRange):this.fullLineContentRange;return $r(n)}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,contentRange:Ms(this,n,!0,!0)})}getCloneParameters(){return this.state}};function A4(t,e){let{document:r}=t,n=r.lineAt(e.start),i=M4(r,n);if(i!=null)return i.lineNumber+1===n.lineNumber?void 0:new Y(new ye(i.lineNumber+1,0),r.lineAt(n.lineNumber-1).range.end);if(n.lineNumber>0)return new Y(new ye(0,0),r.lineAt(n.lineNumber-1).range.end)}function P4(t,e){let{document:r}=t,n=r.lineAt(e.end),i=D4(r,n);if(i!=null)return i.lineNumber-1===n.lineNumber?void 0:new Y(new ye(n.lineNumber+1,0),r.lineAt(i.lineNumber-1).range.end);if(n.lineNumber<r.lineCount-1)return new Y(new ye(n.lineNumber+1,0),r.lineAt(r.lineCount-1).range.end)}function M4(t,e){for(;e.lineNumber>0;){let r=t.lineAt(e.lineNumber-1);if(!r.isEmptyOrWhitespace)return r;e=r}return null}function D4(t,e){for(;e.lineNumber+1<t.lineCount;){let r=t.lineAt(e.lineNumber+1);if(!r.isEmptyOrWhitespace)return r;e=r}return null}var mo=class extends Ge{constructor(){super(...arguments);this.type="RawSelectionTarget";this.textualType="character";this.insertionDelimiter="";this.isRaw=!0;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.getCloneParameters=()=>this.state}};function wl(t){let e=Di(t.contentRange,t.prefixRange),r=t.getTrailingDelimiterTarget()??t.getLeadingDelimiterTarget();return r!=null?e.union(r.contentRange):e}var L4=['"',"'","(","[","{","<"],F4=['"',"'",")","]","}",">",",",";",":"];function Yn(t){let{editor:e}=t,{start:r}=Di(t.contentRange,t.prefixRange),o=e.document.lineAt(r).text.slice(0,r.character).match(/\s+$/);return o==null?void 0:new Ze({contentRange:new Y(r.line,r.character-o[0].length,r.line,r.character),editor:e,isReversed:t.isReversed})}function Zn(t){let{editor:e}=t,{end:r}=t.contentRange,o=e.document.lineAt(r).text.slice(r.character).match(/^\s+/);return o==null?void 0:new Ze({contentRange:new Y(r.line,r.character,r.line,r.character+o[0].length),editor:e,isReversed:t.isReversed})}function fo(t){let{editor:e}=t,r=Di(t.contentRange,t.prefixRange),{start:n,end:i}=r,o=t.getLeadingDelimiterTarget()?.contentRange??n.toEmptyRange(),s=t.getTrailingDelimiterTarget()?.contentRange??i.toEmptyRange(),l=uo(e,r);return o.union(s).isRangeEqual(l)?l:!s.isEmpty&&(!o.isEmpty||r.start.isEqual(l.start)||L4.includes(I4(e,r)))?r.union(s):!o.isEmpty&&(r.end.isEqual(l.end)||F4.includes(C4(e,r)))?r.union(o):r}function I4(t,e){let{start:r}=e,n=t.document.lineAt(r);return r.isAfter(n.range.start)?t.document.getText(new Y(r.translate(void 0,-1),r)):""}function C4(t,e){let{end:r}=e,n=t.document.lineAt(r);return r.isBefore(n.range.end)?t.document.getText(new Y(r.translate(void 0,1),r)):""}var ir=class extends Ge{constructor(){super(...arguments);this.type="TokenTarget";this.textualType="token";this.insertionDelimiter=" "}getLeadingDelimiterTarget(){return Yn(this)}getTrailingDelimiterTarget(){return Zn(this)}getRemovalRange(){return fo(this)}getCloneParameters(){return this.state}};function dS(t){let{editor:e,isReversed:r}=t,{document:n}=e,i=Di(t.contentRange,t.prefixRange);return O4(n,i)?N4(n,i)?new po({editor:e,isReversed:r,contentRange:i}):new gr({editor:e,isReversed:r,contentRange:i}):new ir({editor:e,isReversed:r,contentRange:i})}function O4(t,e){let r=t.lineAt(e.start).rangeTrimmed?.start,n=t.lineAt(e.end).rangeTrimmed?.end;return r!=null&&n!=null&&r.isEqual(e.start)&&n.isEqual(e.end)}function N4(t,e){let{start:r,end:n}=e;return(r.line===0||t.lineAt(r.line-1).isEmptyOrWhitespace)&&(n.line===t.lineCount-1||t.lineAt(n.line+1).isEmptyOrWhitespace)}var go=class t extends Ge{constructor(r){super(r);this.type="ScopeTypeTarget";this.scopeTypeType_=r.scopeTypeType,this.removalRange_=r.removalRange,this.leadingDelimiterRange_=r.leadingDelimiterRange,this.trailingDelimiterRange_=r.trailingDelimiterRange,this.prefixRange=r.prefixRange,this.insertionDelimiter=r.insertionDelimiter??U4(r.scopeTypeType),this.hasDelimiterRange_=!!this.leadingDelimiterRange_||!!this.trailingDelimiterRange_}getLeadingDelimiterTarget(){if(this.leadingDelimiterRange_!=null)return new Ze({editor:this.editor,isReversed:this.isReversed,contentRange:this.leadingDelimiterRange_});if(!this.hasDelimiterRange_)return Yn(this)}getTrailingDelimiterTarget(){if(this.trailingDelimiterRange_!=null)return new Ze({editor:this.editor,isReversed:this.isReversed,contentRange:this.trailingDelimiterRange_});if(!this.hasDelimiterRange_)return Zn(this)}getRemovalRange(){return this.removalRange_!=null?this.removalRange_:this.hasDelimiterRange_?wl(this):dS(this).getRemovalRange()}getRemovalHighlightRange(){return this.removalRange_!=null?fn(this,this.removalRange_):this.hasDelimiterRange_?fn(this,wl(this)):dS(this).getRemovalHighlightRange()}maybeCreateRichRangeTarget(r,n){if(this.scopeTypeType_!==n.scopeTypeType_)return null;let i=this.removalRange_!=null||n.removalRange_!=null?(this.removalRange_??this.contentRange).union(n.removalRange_??n.contentRange):void 0;return new t({...this.getCloneParameters(),isReversed:r,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:n.trailingDelimiterRange_,removalRange:i,contentRange:this.contentRange.union(n.contentRange)})}getCloneParameters(){return{...this.state,insertionDelimiter:this.insertionDelimiter,prefixRange:this.prefixRange,removalRange:void 0,interiorRange:void 0,scopeTypeType:this.scopeTypeType_,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:this.trailingDelimiterRange_}}};function U4(t){switch(t){case"class":case"namedFunction":case"section":case"sectionLevelOne":case"sectionLevelTwo":case"sectionLevelThree":case"sectionLevelFour":case"sectionLevelFive":case"sectionLevelSix":case"part":case"chapter":case"subSection":case"subSubSection":case"namedParagraph":case"subParagraph":return`

`;case"anonymousFunction":case"statement":case"ifStatement":case"comment":case"xmlElement":case"collectionItem":case"branch":case"environment":return`
`;default:return" "}}var uf=class t extends Ge{constructor(r){super(r);this.type="SubTokenWordTarget";this.textualType="word";this.leadingDelimiterRange_=r.leadingDelimiterRange,this.trailingDelimiterRange_=r.trailingDelimiterRange,this.insertionDelimiter=r.insertionDelimiter}getLeadingDelimiterTarget(){return Ds(this.editor,this.leadingDelimiterRange_,this.isReversed)}getTrailingDelimiterTarget(){return Ds(this.editor,this.trailingDelimiterRange_,this.isReversed)}getRemovalRange(){return wl(this)}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,contentRange:Ps(this,n,!0,!0),trailingDelimiterRange:n.trailingDelimiterRange_})}getCloneParameters(){return{...this.state,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:this.trailingDelimiterRange_,insertionDelimiter:this.insertionDelimiter}}};var Ls=class t extends Ge{constructor(r){super({...r,contentRange:sa(r.editor,r.fullInteriorRange)});this.type="InteriorTarget";this.insertionDelimiter=" ";this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.fullInteriorRange;this.fullInteriorRange=r.fullInteriorRange}getCloneParameters(){return{...this.state,fullInteriorRange:this.fullInteriorRange}}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,fullInteriorRange:this.fullInteriorRange.union(n.fullInteriorRange)})}};var pf=class extends Ge{constructor(r){super(r);this.type="SurroundingPairTarget";this.insertionDelimiter=" ";this.boundary_=r.boundary,this.interiorRange_=r.interiorRange}getLeadingDelimiterTarget(){return Yn(this)}getTrailingDelimiterTarget(){return Zn(this)}getRemovalRange(){return fo(this)}getInterior(){return[new Ls({editor:this.editor,isReversed:this.isReversed,fullInteriorRange:this.interiorRange_})]}getBoundary(){return this.boundary_.map(r=>new ir({editor:this.editor,isReversed:this.isReversed,contentRange:r}))}getCloneParameters(){return{...this.state,interiorRange:this.interiorRange_,boundary:this.boundary_}}};var Nt=class extends Ge{constructor(r){super(r);this.type="UntypedTarget";this.insertionDelimiter=" ";this.hasExplicitScopeType=!1;this.hasExplicitRange=r.hasExplicitRange,this.textualType=r.textualType??"token"}getLeadingDelimiterTarget(){return Yn(this)}getTrailingDelimiterTarget(){return Zn(this)}getRemovalRange(){return this.editor.document.getText(this.contentRange).trim().length===0?this.contentRange:fo(this)}maybeCreateRichRangeTarget(){return null}getCloneParameters(){return{...this.state,textualType:this.textualType,hasExplicitRange:this.hasExplicitRange}}};var mf=class extends Ge{constructor(){super(...arguments);this.type="ImplicitTarget";this.textualType="character";this.insertionDelimiter="";this.isRaw=!0;this.hasExplicitScopeType=!1;this.isImplicit=!0;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.getCloneParameters=()=>this.state}};var ff=class extends Ge{constructor(r){let{inputTarget:n,modifiedTarget:i,isHead:o}=r;super({...r,contentRange:pP(n.contentRange,i.contentRange,o)});this.type="HeadTailTarget";this.insertionDelimiter=" ";this.inputTarget=n,this.modifiedTarget=i,this.isHead=o}getLeadingDelimiterTarget(){return Yn(this)}getTrailingDelimiterTarget(){return Zn(this)}getRemovalRange(){return fo(this)}getInterior(){let r=this.modifiedTarget.getInterior();if(r!=null)return r.map(n=>new Ze({editor:this.editor,contentRange:pP(this.inputTarget.contentRange,n.contentRange,this.isHead),isReversed:this.isReversed}))}getCloneParameters(){return{...this.state,inputTarget:this.inputTarget,modifiedTarget:this.modifiedTarget,isHead:this.isHead}}};function pP(t,e,r){return r?new Y(e.start,t.end):new Y(t.start,e.end)}var df=class t extends Ge{constructor(r){super({...r,contentRange:H4(r.paragraphTarget.contentRange,r.containingInterior.contentRange)});this.type="BoundedParagraphTarget";this.textualType="line";this.insertionDelimiter=`

`;this.containingInterior=r.containingInterior,this.paragraphTarget=r.paragraphTarget,this.startLineGap=this.contentRange.start.line-this.containingInterior.fullInteriorRange.start.line,this.endLineGap=this.containingInterior.fullInteriorRange.end.line-this.contentRange.end.line}getLeadingDelimiterTarget(){return this.startLineGap>1?this.paragraphTarget.getLeadingDelimiterTarget():void 0}getTrailingDelimiterTarget(){return this.endLineGap>1?this.paragraphTarget.getTrailingDelimiterTarget():void 0}getRemovalRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.contentRange.union(r.contentRange):this.contentRange;return this.startLineGap<=0||this.endLineGap<=0?n:new gr({contentRange:n,editor:this.editor,isReversed:this.isReversed}).getRemovalRange()}get fullLineContentRange(){return uo(this.editor,this.contentRange)}getRemovalHighlightRange(){let r=(()=>{if(this.startLineGap<1||this.endLineGap<1)return this.getRemovalRange();let n=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return n!=null?this.fullLineContentRange.union(n.contentRange):this.fullLineContentRange})();return $r(r)}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,containingInterior:this.containingInterior.maybeCreateRichRangeTarget(r,n.containingInterior),paragraphTarget:this.paragraphTarget.maybeCreateRichRangeTarget(r,n.paragraphTarget)})}getCloneParameters(){return{...this.state,paragraphTarget:this.paragraphTarget,containingInterior:this.containingInterior}}};function H4(t,e){let r=t.intersection(e);if(r==null||r.isEmpty)throw new Error("Ranges do not intersect");return r}function gf(t){return t.activeTextEditor?.selections.map(e=>({selection:e,editor:t.activeTextEditor}))??[]}var Fs=class{run(){return gf(k()).map(e=>new Nt({editor:e.editor,isReversed:e.selection.isReversed,contentRange:e.selection,hasExplicitRange:!e.selection.isEmpty,textualType:"character"}))}};var Xn=class{constructor(e,r){this.debouncer=new Pp(r,e.getOwnConfiguration("decorationDebounceDelayMs")),this.run=this.run.bind(this)}run(){this.debouncer.run()}dispose(){this.debouncer.dispose()}};var hf=class{constructor(e,r){this.ide=e;this.storedTargets=r;this.disposables=[];this.debouncer=new Xn(e.configuration,()=>this.updateKeyboardTarget()),this.disposables.push(e.configuration.onDidChangeConfiguration(()=>this.maybeActivate()),this.debouncer),this.maybeActivate()}maybeActivate(){if(this.ide.configuration.getOwnConfiguration("experimental.keyboardTargetFollowsSelection")){this.selectionWatcherDisposable==null&&(this.selectionWatcherDisposable=this.ide.onDidChangeTextEditorSelection(this.debouncer.run));return}this.selectionWatcherDisposable!=null&&(this.selectionWatcherDisposable.dispose(),this.selectionWatcherDisposable=void 0)}updateKeyboardTarget(){this.ide.activeTextEditor==null||this.storedTargets.get("keyboard")==null||this.storedTargets.set("keyboard",new Fs().run())}dispose(){this.disposables.forEach(e=>e.dispose()),this.selectionWatcherDisposable?.dispose()}};var yf=class{constructor(e){this.ide=e;switch(e.disposeOnExit(this),this.evaluateSetting=this.evaluateSetting.bind(this),this.active=!0,e.runMode){case"development":this.enableDebugLog();break;case"test":this.disableDebugLog();break;case"production":this.evaluateSetting(),this.disposableConfiguration=e.configuration.onDidChangeConfiguration(this.evaluateSetting);break}}log(...e){this.active&&console.log(...e)}dispose(){this.disposableConfiguration&&this.disposableConfiguration.dispose()}enableDebugLog(){this.active=!0}disableDebugLog(){this.active=!1}evaluateSetting(){this.ide.configuration.getOwnConfiguration("debug")?this.enableDebugLog():this.disableDebugLog()}};var B4=["!","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_","`","{","|","}","~","\xA3",'"'],V4=B4.map(Wr).join("|"),W4=["[a-zA-Z0-9]",V4].join("|"),$4=new RegExp(`^(${W4})$`,"u"),j4="[unk]",z4=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}]/gu,Tf=class{constructor(){this.disposables=[];this.algorithmChangeNotifier=new tr;this.getTokenGraphemes=e=>ln(e,z4,r=>({text:this.normalizeGrapheme(r[0]),tokenStartOffset:r.index,tokenEndOffset:r.index+r[0].length}));this.registerAlgorithmChangeListener=this.algorithmChangeNotifier.registerListener;k().disposeOnExit(this),this.updateTokenHatSplittingMode=this.updateTokenHatSplittingMode.bind(this),this.getTokenGraphemes=this.getTokenGraphemes.bind(this),this.updateTokenHatSplittingMode(),this.disposables.push(k().configuration.onDidChangeConfiguration(this.updateTokenHatSplittingMode))}updateTokenHatSplittingMode(){let{lettersToPreserve:e,symbolsToPreserve:r,...n}=k().configuration.getOwnConfiguration("tokenHatSplittingMode");this.tokenHatSplittingMode={lettersToPreserve:e.map(i=>i.toLowerCase().normalize("NFC")),symbolsToPreserve:r.map(i=>i.normalize("NFC")),...n},this.algorithmChangeNotifier.notifyListeners()}normalizeGrapheme(e){let{preserveCase:r,lettersToPreserve:n,symbolsToPreserve:i}=this.tokenHatSplittingMode,o=e.normalize("NFC");return i.includes(o)||(r||(o=o.toLowerCase()),n.includes(o.toLowerCase()))||(o=nx(o),$4.test(o)||(o=j4)),o}dispose(){this.disposables.forEach(({dispose:e})=>e())}};function ca(){return gS==null&&(gS=new Tf),gS}var gS;var q4=["-","+","*","/","=","<",">","_","#",".","|","&",":"],G4=["!==","!=","+=","-=","*=","/=","%=","<=",">=","=>","->","??",'"""',"```","/*","*/","<!--","-->"],K4=["\\p{L}","\\p{M}","\\p{N}"],Q4="[^\\s\\w]",Y4="(?<![.\\d])\\d+\\.\\d+(?![.\\d])";function Z4(t){let{fixedTokens:e,repeatableSymbols:r,identifierWordRegexes:n,identifierWordDelimiters:i,numbersRegex:o,singleSymbolsRegex:s}=t,l=r.map(Wr).map(x=>`${x}+`).join("|"),u=e.map(Wr).join("|"),d=`(${n.concat(i.map(Wr)).join("|")})+`,g=`(${n.join("|")})+`,y=[u,o,d,l,s].join("|");return{identifierMatcher:new RegExp(d,"gu"),wordMatcher:new RegExp(g,"gu"),tokenMatcher:new RegExp(y,"gu")}}var hS=new Map;function Pr(t){let e=k().configuration.getOwnConfiguration("wordSeparators",{languageId:t}),r=e.join("\0");if(!hS.has(r)){let n={fixedTokens:G4,repeatableSymbols:q4,identifierWordRegexes:K4,identifierWordDelimiters:e,numbersRegex:Y4,singleSymbolsRegex:Q4};hS.set(r,Z4(n))}return hS.get(r)}function mP(t,e,r){return ln(t,Pr(e).tokenMatcher,r)}var X4=/\p{Lu}?\p{Ll}+|\p{Lu}+(?!\p{Ll})|\p{N}+/gu,Is=class{constructor(e){this.wordRegex=Pr(e).wordMatcher}splitIdentifier(e){let r=il(e,this.wordRegex);return r.length>1?r:il(e,X4)}};var fP=({penalty:t})=>-t,dP=({isFirstLetter:t})=>t?-1:0;function gP(t){return({grapheme:{text:e},style:r})=>{let n=t.get({grapheme:e,hatStyle:r});return n==null?1/0:-n}}function hP(t,e){let r=Zc(n=>ux(e[n].filter(i=>i>t))??1/0);return({grapheme:{text:n}})=>r(n)}function yS(t){return e=>e.grapheme.text===t?.grapheme&&e.style===t?.hatStyle?1:0}function yP(t){switch(t){case"greedy":return({penalty:e})=>-e;case"balanced":return({penalty:e})=>-(e<2?0:1);case"stable":return e=>0}}function TP(t,e){if(t.length===0)return;let r=t;for(let n of e){if(r.length===1)return r[0];r=J4(r,n)}return r[0]}function J4(t,e){let r=-1/0,n=[];for(let i of t){let o=e(i);o<r||(o>r&&(r=o,n.length=0),n.push(i))}return n}function xP({hatOldTokenRanks:t,graphemeTokenRanks:e},r,n,i,o,s){return TP(s,[yS(i),yP(r),yS(o),gP(t),fP,dP,hP(n,e)])}function SP(t,e,r){let n={},i=new co(({grapheme:o,hatStyle:s})=>[o,s]);return t.forEach(({token:o,rank:s})=>{let l=e.get(o);l!=null&&i.set(l,s),r.getTokenGraphemes(o.text).forEach(({text:u})=>{let m;u in n?m=n[u]:(m=[],n[u]=m),m.push(s)})}),{hatOldTokenRanks:i,graphemeTokenRanks:n}}function vP(t,e=[]){return new Map(cx(at,Qo)(Xc([e],t.visibleRanges.map(r=>px(r.start.line,r.end.line+1)))).sort((r,n)=>r-n).map((r,n)=>[r,n]))}function bP(t,e){return(r,n)=>{let i=Math.abs(r.displayLine-t),o=Math.abs(n.displayLine-t);if(i<o)return-1;if(i>o)return 1;let s=Math.abs(r.range.start.character-e),l=Math.abs(n.range.start.character-e);return s-l}}function wP(t,e){let r=t.document.languageId,n=t.document.getText(e),i=t.document.offsetAt(e.start);return mP(n,r,o=>{let s=i+o.index,l=i+o.index+o[0].length,u=new Y(t.document.positionAt(s),t.document.positionAt(l));return{editor:t,text:o[0],range:u,offsets:{start:s,end:l}}})}function EP(t,e,r){let i=t9(t,e).flatMap(o=>{let s=o.selections[0].active,l=vP(o,[s.line]),u=at(o.visibleRanges.map(m=>wP(o,m).map(d=>({...d,displayLine:l.get(d.range.start.line)}))));return u.sort(bP(l.get(s.line),s.character)),u});return e9(r,i).map((o,s)=>({token:o,rank:-s}))}function e9(t,e){return t==null?e:e.sort((r,n)=>{let i=t.has(r),o=t.has(n);return i&&!o?-1:!i&&o?1:0})}function t9(t,e){let r;return t==null?r=e:r=[t,...e.filter(n=>n!==t)],r}function TS({tokenGraphemeSplitter:t,enabledHatStyles:e,forceTokenHats:r,oldTokenHats:n,hatStability:i,activeTextEditor:o,visibleTextEditors:s}){let l=r==null?void 0:_P(r),u=_P(n),m=EP(o,s,l),d=SP(m,u,t),g=Object.keys(e),y=new Rs(()=>[...g]);return m.map(({token:x,rank:w})=>{let E=r9(t,x,y,e),U=xP(d,i,w,l?.get(x),u.get(x),E);if(U!=null)return y.set(U.grapheme.text,y.get(U.grapheme.text).filter(V=>V!==U.style)),n9(x,U)}).filter(x=>x!=null)}function _P(t){let e=new co(({editor:r,offsets:n})=>[r.id,n.start,n.end]);return t.forEach(r=>e.set(r.token,r)),e}function r9(t,e,r,n){let i=[],o=t.getTokenGraphemes(e.text),s=new Set(new Is(e.editor.document.languageId).splitIdentifier(e.text).map(l=>l.index));for(let l of o){let u=s.has(l.tokenStartOffset);for(let m of r.get(l.text))i.push({grapheme:l,style:m,penalty:n[m].penalty,isFirstLetter:u})}return i}function n9(t,e){return{hatStyle:e.style,grapheme:e.grapheme.text,token:t,hatRange:new Y(t.range.start.translate(void 0,e.grapheme.tokenStartOffset),t.range.start.translate(void 0,e.grapheme.tokenEndOffset))}}var xf=class{constructor(e,r){this.hats=e;this.context=r;this.disposables=[];k().disposeOnExit(this);let n=new Xn(k().configuration,()=>this.allocateHats());this.disposables.push(this.hats.onDidChangeEnabledHatStyles(n.run),this.hats.onDidChangeIsEnabled(n.run),k().onDidOpenTextDocument(n.run),k().onDidCloseTextDocument(n.run),k().onDidChangeActiveTextEditor(n.run),k().onDidChangeVisibleTextEditors(n.run),k().onDidChangeTextDocument(n.run),k().onDidChangeTextEditorSelection(n.run),k().onDidChangeTextEditorVisibleRanges(n.run),ca().registerAlgorithmChangeListener(n.run),n)}async allocateHats(e){let r=await this.context.getActiveMap();e=e?.map(i=>({...i,grapheme:ca().normalizeGrapheme(i.grapheme)}));let n=this.hats.isEnabled?TS({tokenGraphemeSplitter:ca(),enabledHatStyles:this.hats.enabledHatStyles,forceTokenHats:e,oldTokenHats:r.tokenHats,hatStability:k().configuration.getOwnConfiguration("experimental.hatStability"),activeTextEditor:k().activeTextEditor,visibleTextEditors:k().visibleTextEditors}):[];r.setTokenHats(n),await this.hats.setHatRanges(n.map(({hatStyle:i,hatRange:o,token:{editor:s}})=>({editor:s,range:o,styleName:i})))}dispose(){this.disposables.forEach(({dispose:e})=>e())}};var Sf=class t{constructor(e){this.rangeUpdater=e;this.isExpired=!1;this.documentTokenLists=new Map;this.deregisterFunctions=[];this.map={};this._tokenHats=[]}get tokenHats(){return this._tokenHats}getDocumentTokenList(e){let r=e.uri.toString(),n=this.documentTokenLists.get(r);return n==null&&(n=[],this.documentTokenLists.set(r,n),this.deregisterFunctions.push(this.rangeUpdater.registerRangeInfoList(e,n))),n}clone(){let e=new t(this.rangeUpdater);return e.setTokenHats(this._tokenHats),e}setTokenHats(e){this.map={},this.documentTokenLists=new Map,this.deregisterFunctions.forEach(n=>n());let r=e.map(n=>{let{hatStyle:i,grapheme:o,token:s}=n,l=this.makeTokenLive(s);return this.map[hl(i,o)]=l,{...n,token:l}});this._tokenHats=r}makeTokenLive(e){let{tokenMatcher:r}=Pr(e.editor.document.languageId),n={...e,expansionBehavior:{start:{type:"regex",regex:r},end:{type:"regex",regex:r}}};return this.getDocumentTokenList(e.editor.document).push(n),n}getEntries(){return this.checkExpired(),Object.entries(this.map)}getToken(e,r){return this.checkExpired(),this.map[hl(e,ca().normalizeGrapheme(r))]}checkExpired(){if(this.isExpired)throw Error("Map snapshot has expired")}dispose(){this.isExpired=!0,this.deregisterFunctions.forEach(e=>e())}};var i9=6e4,vf=class{constructor(e,r,n,i){this.debug=r;this.commandServerApi=i;this.prePhraseMapsSnapshotTimestamp=null;this.lastSignalVersion=null;k().disposeOnExit(this),this.activeMap=new Sf(e),this.getActiveMap=this.getActiveMap.bind(this),this.allocateHats=this.allocateHats.bind(this),this.hatAllocator=new xf(n,{getActiveMap:this.getActiveMap})}allocateHats(e){return this.hatAllocator.allocateHats(e)}async getActiveMap(){return await this.maybeTakePrePhraseSnapshot(),this.activeMap}async getReadableMap(e){return await this.maybeTakePrePhraseSnapshot(),e?this.lastSignalVersion==null?(console.error("Pre phrase snapshot requested but no signal was present; please upgrade command client"),this.activeMap):this.prePhraseMapSnapshot==null?(console.error("Navigation map pre-phrase snapshot requested, but no snapshot has been taken"),this.activeMap):performance.now()-this.prePhraseMapsSnapshotTimestamp>i9?(console.error("Navigation map pre-phrase snapshot requested, but snapshot is more than a minute old"),this.activeMap):this.prePhraseMapSnapshot:this.activeMap}dispose(){this.activeMap.dispose(),this.prePhraseMapSnapshot!=null&&this.prePhraseMapSnapshot.dispose()}async maybeTakePrePhraseSnapshot(){let e=await this.commandServerApi.signals.prePhrase.getVersion();e!==this.lastSignalVersion&&(this.debug.log("taking snapshot"),this.lastSignalVersion=e,e!=null&&this.takePrePhraseSnapshot())}takePrePhraseSnapshot(){this.prePhraseMapSnapshot!=null&&this.prePhraseMapSnapshot.dispose(),this.prePhraseMapSnapshot=this.activeMap.clone(),this.prePhraseMapsSnapshotTimestamp=performance.now()}};function xS(t,e,r){let n=t.get(e);return n==null&&(n=r(),t.set(e,n)),n}var wS=Hr(_l(),1);function ES(t,e){let{originalOffsets:{start:r,end:n},finalOffsets:{end:i},displacement:o}=t,{offsets:{start:s,end:l}}=e;return(0,wS.invariant)(n>r,()=>"Change range expected to be nonempty"),(0,wS.invariant)(n>=s&&r<=l,()=>"Change range expected to intersect with selection range"),{start:n<=s?s+o:Math.min(s,i),end:n<=l?l+o:Math.min(l,i)}}var DP=Hr(_l(),1);function _S(t,e){let{event:{text:r,isReplace:n},finalOffsets:{start:i,end:o}}=t;if((0,DP.invariant)(i===t.originalOffsets.end&&i===e.offsets.start&&i===e.offsets.end,()=>"Selection range and change range expected to be same empty range"),n){let s=e.expansionBehavior.end;switch(s.type){case"closed":return{start:i,end:i};case"open":return{start:i,end:o};case"regex":{let l=r.match(ym(s.regex));return l==null?{start:i,end:i}:{start:i,end:i+l[0].length}}}}else{let s=e.expansionBehavior.start;switch(s.type){case"closed":return{start:o,end:o};case"open":return{start:i,end:o};case"regex":{let l=r.search(hm(s.regex));return l===-1?{start:o,end:o}:{start:i+l,end:o}}}}}var RS=Hr(_l(),1);function kS(t,e){let{event:{text:r},originalOffsets:{start:n},displacement:i}=t,{offsets:{start:o,end:s},text:l}=e;if((0,RS.invariant)(s>o,()=>"Selection range expected to be nonempty"),(0,RS.invariant)(n>=o&&n<=s,()=>"Insertion offset expected to intersect with selection range"),n>o&&n<s)return{start:o,end:s+i};if(n===o){let u=e.expansionBehavior.start,m=s+i;switch(u.type){case"closed":return{start:o+i,end:m};case"open":return{start:o,end:m};case"regex":{let d=r+l,g=hm(u.regex),y=d.search(g);for(;y>r.length;)d=d.slice(0,y),y=d.search(g);return y===-1?{start:o,end:m}:{start:o+y,end:m}}}}else{let u=e.expansionBehavior.end,m=o;switch(u.type){case"closed":return{start:m,end:s};case"open":return{start:m,end:s+i};case"regex":{let d=l+r,g=ym(u.regex),y=d.match(g),x=y==null?0:y[0].length;for(;x!==0&&x<l.length;)d=l.slice(x)+r,y=d.match(g),x=y==null?0:x+y[0].length;return x===0?{start:m,end:s}:{start:m,end:o+x}}}}}function LP(t,e,r){let{start:n,end:i}=t.originalOffsets,{start:o,end:s}=e.offsets,l=Math.min(n,o),u="";return o<n&&(u+=e.text.substring(0,n-o)),u+=t.event.text,i<s&&(u+=e.text.substring(s-i,e.text.length)),u.substring(r.start-l,r.end-l)}function FP(t,e){let{document:r,contentChanges:n}=t,i=n.map(o=>{let s=o.text.length-o.rangeLength,l=o.rangeOffset,u=l+o.rangeLength,m=l,d=u+s;return{displacement:s,event:o,originalOffsets:{start:l,end:u},finalOffsets:{start:m,end:d}}});for(let o of e){let s=o.offsets,l=i.map(m=>{let d;return m.originalOffsets.start>s.end?{start:0,end:0}:m.originalOffsets.end<s.start?{start:m.displacement,end:m.displacement}:(m.event.rangeLength===0?o.range.isEmpty?d=_S(m,o):d=kS(m,o):d=ES(m,o),o.text=LP(m,o,d),{start:d.start-s.start,end:d.end-s.end})}),u={start:s.start+um(l,({start:m})=>m),end:s.end+um(l,({end:m})=>m)};o.range=o.range.with(r.positionAt(u.start),r.positionAt(u.end)),o.offsets=u}}var wf=class{constructor(){this.rangeInfoLists=new Map;this.replaceEditLists=new Map;this.listenForDocumentChanges()}getDocumentRangeInfoLists(e){return xS(this.rangeInfoLists,e.uri.toString(),()=>[])}getDocumentReplaceEditLists(e){return xS(this.replaceEditLists,e.uri.toString(),()=>[])}registerRangeInfoList(e,r){let n=this.getDocumentRangeInfoLists(e);return n.push(r),()=>fr(n,r)}registerReplaceEditList(e,r){let n=this.getDocumentReplaceEditLists(e);return n.push(r),()=>fr(n,r)}*documentRangeInfoGenerator(e){let r=this.getDocumentRangeInfoLists(e);for(let n of r)for(let i of n)yield i}listenForDocumentChanges(){this.disposable=k().onDidChangeTextDocument(e=>{let r=this.getDocumentReplaceEditLists(e.document),n={...e,contentChanges:e.contentChanges.map(i=>f9(r,i)?{...i,isReplace:!0}:i)};FP(n,this.documentRangeInfoGenerator(e.document))})}dispose(){this.disposable.dispose()}};function f9(t,e){for(let r of t)for(let n of r)if(n.range.isRangeEqual(e.range)&&n.text===e.text)return!0;return!1}var Ef=class{constructor(){this.signals={prePhrase:{getVersion(){return Promise.resolve(null)}}}}getFocusedElementType(){return Promise.resolve(void 0)}};var _f=class{async allocateHats(){}async getReadableMap(){return{getEntries(){return[]},getToken(){throw new Error("Hat map is disabled")}}}dispose(){}};var Rf=class{onDidChangeDefinition(e){return{dispose:()=>{}}}loadLanguage(e){return Promise.resolve()}get(e){}getNodeAtLocation(e,r){}dispose(){}};var kf=class{getSnippetStrict(e){throw new Error("Snippets are not implemented.")}openNewSnippetFile(e,r){throw new Error("Snippets are not implemented.")}};var Af=class{getSpokenFormEntries(){throw new _s}onDidChange(){return{dispose:()=>{}}}};var Pf=class{getTree(e){throw new Error("Tree sitter not provided")}loadLanguage(e){return Promise.resolve(!1)}getNodeAtLocation(e,r){throw new Error("Tree sitter not provided")}createQuery(e,r){throw new Error("Tree sitter not provided")}};var lt=class extends Error{constructor(r,n=!1,i=!1){super(`No spoken form for: ${r}`);this.reason=r;this.requiresTalonUpdate=n;this.isPrivate=i}};var IP={curlyBrackets:["{","}"],angleBrackets:["<",">"],escapedDoubleQuotes:['\\"','\\"'],escapedSingleQuotes:["\\'","\\'"],escapedParentheses:["\\(","\\)"],escapedSquareBrackets:["\\[","\\]"],doubleQuotes:['"','"'],parentheses:["(",")"],backtickQuotes:["`","`"],squareBrackets:["[","]"],singleQuotes:["'","'"],tripleBacktickQuotes:["```","```"],tripleDoubleQuotes:['"""','"""'],tripleSingleQuotes:["'''","'''"],whitespace:[" "," "],any:null,string:null,collectionBoundary:null};var CP=new co(t=>t);for(let[t,e]of Object.entries(IP))e!=null&&CP.set(e,t);function OP(t,e,r){let n=CP.get([e,r]);if(n==null)throw Error(`Unknown surrounding pair delimiters '${e} ${r}'`);return t.pairedDelimiter[n]}function NP(t){throw new lt(`${t.type} insertion snippet`)}function UP(t){throw new lt(`${t.type} wrap with snippet`)}function Rl(t,e,r){let n=r==="vertical"?`${Et.verticalRange} `:"";if(t&&e)return n+Et.rangeExclusive;if(t)throw new lt("Range exclude anchor");return e?n+Et.rangeExcludingEnd:r==="vertical"?Et.verticalRange:Et.rangeInclusive}function HP(t){return Object.fromEntries(Object.entries(t).map(([e,r])=>[e,Object.fromEntries(Object.entries(r).map(([n,i])=>[n,{type:"customizable",spokenForms:i,spokenFormType:e,id:n}]))]))}var d9=["zero","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen","twenty","twenty one","twenty two","twenty three","twenty four","twenty five","twenty six","twenty seven","twenty eight","twenty nine","thirty","thirty one","thirty two","thirty three","thirty four","thirty five","thirty six","thirty seven","thirty eight","thirty nine","forty","forty one","forty two","forty three","forty four","forty five","forty six","forty seven","forty eight","forty nine","fifty","fifty one","fifty two","fifty three","fifty four","fifty five","fifty six","fifty seven","fifty eight","fifty nine","sixty","sixty one","sixty two","sixty three","sixty four","sixty five","sixty six","sixty seven","sixty eight","sixty nine","seventy","seventy one","seventy two","seventy three","seventy four","seventy five","seventy six","seventy seven","seventy eight","seventy nine","eighty","eighty one","eighty two","eighty three","eighty four","eighty five","eighty six","eighty seven","eighty eight","eighty nine","ninety","ninety one","ninety two","ninety three","ninety four","ninety five","ninety six","ninety seven","ninety eight","ninety nine"],g9=["zeroth","first","second","third","fourth","fifth","sixth","seventh","eighth","ninth","tenth","eleventh","twelfth","thirteenth","fourteenth","fifteenth","sixteenth","seventeenth","eighteenth","nineteenth","twentieth"];function Cs(t){let e=d9[t];if(e==null)throw Error(`Unknown number '${t}'`);return e}function kl(t){let e=g9[t];if(e==null)throw Error(`Unknown ordinal '${t}'`);return e}var Mf=class{constructor(e){this.spokenFormMap=e;this.handleModifier=this.handleModifier.bind(this)}handlePrimitiveTarget(e){let r=[];return e.modifiers!=null&&r.push(e.modifiers.map(this.handleModifier)),e.mark!=null&&r.push(this.handleMark(e.mark)),r}handleModifier(e){switch(e.type){case"cascading":case"modifyIfUntyped":case"preferredScope":throw new lt(`Modifier '${e.type}'`);case"containingScope":return e.ancestorIndex==null||e.ancestorIndex===0?this.handleScopeType(e.scopeType):[new Array(e.ancestorIndex).fill(this.spokenFormMap.modifierExtra.ancestor),this.handleScopeType(e.scopeType)];case"everyScope":return[this.spokenFormMap.simpleModifier.everyScope,this.handleScopeType(e.scopeType)];case"extendThroughStartOf":case"extendThroughEndOf":{let r=this.spokenFormMap.simpleModifier[e.type];return e.modifiers!=null?[r,e.modifiers.map(this.handleModifier)]:[r]}case"relativeScope":return e.offset===0?this.handleRelativeScopeInclusive(e):this.handleRelativeScopeExclusive(e);case"ordinalScope":{let r=this.handleScopeType(e.scopeType),n=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.length===1)return e.start===-1?[n,this.spokenFormMap.modifierExtra.last,r]:e.start===0?[n,this.spokenFormMap.modifierExtra.first,r]:e.start<0?[n,kl(Math.abs(e.start)),this.spokenFormMap.modifierExtra.last,r]:[n,kl(e.start+1),r];let i=Cs(e.length);if(e.start===0)return[n,this.spokenFormMap.modifierExtra.first,i,Al(r)];if(e.start===-e.length)return[n,this.spokenFormMap.modifierExtra.last,i,Al(r)];throw new lt(`'${e.type}' with count > 1 and offset away from start / end`)}case"range":{if(e.anchor.type==="ordinalScope"&&e.active.type==="ordinalScope"&&e.anchor.length===1&&e.active.length===1&&e.anchor.scopeType.type===e.active.scopeType.type){let r=e.anchor.start===-1?this.spokenFormMap.modifierExtra.last:kl(e.anchor.start+1),n=this.handleModifier(e.active),i=Rl(e.excludeAnchor,e.excludeActive);return[r,i,n]}throw Error(`Modifier '${e.type}' is not fully implemented`)}default:return[this.spokenFormMap.simpleModifier[e.type]]}}handleRelativeScopeInclusive(e){let r=this.handleScopeType(e.scopeType),n=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.length===1){let s=e.direction==="forward"?Et.forward:Et.backward;return[n,r,s]}let i=Cs(e.length),o=Al(r);return e.direction==="forward"?[n,i,o]:[n,i,o,Et.backward]}handleRelativeScopeExclusive(e){let r=this.handleScopeType(e.scopeType),n=e.direction==="forward"?Et.next:Et.previous,i=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.offset===1){let o=Cs(e.length);if(e.length===1)return[i,n,r];let s=Al(r);return[i,n,o,s]}if(e.length===1){let o=kl(e.offset);return[i,o,n,r]}throw new lt(`${e.type} modifier with offset > 1 and length > 1`)}handleScopeType(e){switch(e.type){case"oneOf":case"surroundingPairInterior":throw new lt(`Scope type '${e.type}'`);case"glyph":return[this.spokenFormMap.complexScopeTypeType.glyph,VP(this.spokenFormMap.grapheme,"grapheme",e.character)];case"surroundingPair":{let r=this.spokenFormMap.pairedDelimiter[e.delimiter];return e.forceDirection!=null?[this.spokenFormMap.surroundingPairForceDirection[e.forceDirection],r]:r}case"customRegex":return this.spokenFormMap.customRegex[e.regex]??{type:"customizable",spokenForms:{spokenForms:[],isCustom:!0,defaultSpokenForms:[],requiresTalonUpdate:!1,isPrivate:!1},spokenFormType:"customRegex",id:e.regex};case"interior":return this.spokenFormMap.simpleModifier.interiorOnly;default:return this.spokenFormMap.simpleScopeTypeType[e.type]}}handleMark(e){switch(e.type){case"decoratedSymbol":{let[r,n]=e.symbolColor.split("-"),i=[];return r!=="default"&&i.push(MA(r)),n!=null&&i.push(DA(n)),i.push(VP(this.spokenFormMap.grapheme,"grapheme",e.character)),i}case"lineNumber":return this.handleLineNumberMark(e);case"range":{if(e.anchor.type==="lineNumber"&&e.active.type==="lineNumber"){let[r,n]=this.handleLineNumberMark(e.anchor),[i,o]=this.handleLineNumberMark(e.active);if(r===i){let s=Rl(e.excludeAnchor,e.excludeActive);return[r,n,s,o]}}throw Error(`Mark '${e.type}' is not fully implemented`)}case"explicit":case"keyboard":case"target":throw new lt(`Mark '${e.type}'`);default:return[$m[e.type]]}}handleLineNumberMark(e){switch(e.lineNumberType){case"absolute":throw new lt("Absolute line numbers");case"modulo100":return[jm.modulo100,Cs(e.lineNumber+1)];case"relative":return[e.lineNumber<0?jm.relativeUp:jm.relativeDown,Cs(Math.abs(e.lineNumber))]}}};function Al(t){if(typeof t=="string")return BP(t);if(Array.isArray(t)){if(t.length===0)return t;let e=t[t.length-1];return[...t.slice(0,-1),Al(e)]}return{...t,spokenForms:{...t.spokenForms,spokenForms:t.spokenForms.spokenForms.map(BP)}}}function BP(t){return`${t}s`}function VP(t,e,r){let n=t[r];if(n==null)throw new lt(`${e} '${r}'`);return n}var Os=class{constructor(e){this.spokenFormMap=HP(e),this.primitiveGenerator=new Mf(this.spokenFormMap)}getSpokenFormForSingleTerm(e,r){return this.componentsToSpokenForm(()=>{let n=this.spokenFormMap[e][r];if(n==null)throw new lt(`${e} with id ${r}`);return n})}processCommand(e){return this.componentsToSpokenForm(()=>this.handleAction(e.action))}processScopeType(e){return this.componentsToSpokenForm(()=>[this.primitiveGenerator.handleScopeType(e)])}componentsToSpokenForm(e){try{return{type:"success",spokenForms:WP(e())}}catch(r){if(r instanceof lt)return{type:"error",reason:r.reason,requiresTalonUpdate:r.requiresTalonUpdate,isPrivate:r.isPrivate};throw r}}handleAction(e){switch(e.name){case"editNew":case"getText":case"replace":case"executeCommand":case"parsed":case"private.getTargets":case"private.setKeyboardTarget":throw new lt(`Action '${e.name}'`);case"replaceWithTarget":case"moveToTarget":return[this.spokenFormMap.action[e.name],this.handleTarget(e.source),this.handleDestination(e.destination)];case"swapTargets":return[this.spokenFormMap.action[e.name],this.handleTarget(e.target1),Et.swapConnective,this.handleTarget(e.target2)];case"callAsFunction":return e.argument.type==="implicit"?[this.spokenFormMap.action[e.name],this.handleTarget(e.callee)]:[this.spokenFormMap.action[e.name],this.handleTarget(e.callee),"on",this.handleTarget(e.argument)];case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return[OP(this.spokenFormMap,e.left,e.right),this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"pasteFromClipboard":return[this.spokenFormMap.action[e.name],this.handleDestination(e.destination)];case"insertSnippet":return[this.spokenFormMap.action[e.name],NP(e.snippetDescription),this.handleDestination(e.destination)];case"generateSnippet":if(e.snippetName!=null)throw new lt(`${e.name}.snippetName`);return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"wrapWithSnippet":return[UP(e.snippetDescription),this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"highlight":{if(e.highlightId!=null)throw new lt(`${e.name}.highlightId`);return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)]}default:return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)]}}handleTarget(e){switch(e.type){case"list":if(e.elements.length<2)throw new lt("List target with < 2 elements");return e.elements.map((r,n)=>n===0?this.handleTarget(r):[Et.listConnective,this.handleTarget(r)]);case"range":{let r=this.handleTarget(e.anchor),n=this.handleTarget(e.active),i=Rl(e.excludeAnchor,e.excludeActive,e.rangeType);return[r,i,n]}case"primitive":return this.primitiveGenerator.handlePrimitiveTarget(e);case"implicit":return[]}}handleDestination(e){switch(e.type){case"list":if(e.destinations.length<2)throw new lt("List destination with < 2 elements");return e.destinations.map((r,n)=>n===0?this.handleDestination(r):[Et.listConnective,this.handleDestination(r)]);case"primitive":return[this.handleInsertionMode(e.insertionMode),this.handleTarget(e.target)];case"implicit":return[]}}handleInsertionMode(e){switch(e){case"to":return Et.sourceDestinationConnective;case"before":return Et.before;case"after":return Et.after}}};function WP(t){if(typeof t=="string")return[t];if(Array.isArray(t))return t.length===0?[""]:$P(t.map(WP)).map(e=>e.filter(r=>r.length!==0).join(" "));if(t.spokenForms.spokenForms.length===0){let e=`${fl(t.spokenFormType)} with id ${t.id}`,r;throw t.spokenForms.isPrivate?r="this is a private spoken form currently only for internal experimentation":t.spokenForms.requiresTalonUpdate?r="please update talon to the latest version (see https://www.cursorless.org/docs/user/updating/)":r="please see https://www.cursorless.org/docs/user/customization/ for more information",new lt(`${e}; ${r}`,t.spokenForms.requiresTalonUpdate,t.spokenForms.isPrivate)}return t.spokenForms.spokenForms}function $P(t){if(t.length===0)return[];if(t.length===1)return t[0].map(i=>[i]);let[e,...r]=t,n=$P(r);return e.flatMap(i=>n.map(o=>[i,...o]))}var Df=class{constructor(e){this.talonSpokenForms=e;this.notifier=new tr;this.spokenFormMap_={...Ln};this.onDidChangeCustomSpokenForms=this.notifier.registerListener;this.disposable=e.onDidChange(()=>this.updateSpokenFormMaps()),this.customSpokenFormsInitialized=this.updateSpokenFormMaps()}get spokenFormMap(){return this.spokenFormMap_}get needsInitialTalonUpdate(){return this.needsInitialTalonUpdate_}async updateSpokenFormMaps(){let e;try{if(e=await this.talonSpokenForms.getSpokenFormEntries(),e.length===0)throw new Error("Custom spoken forms list empty")}catch(r){if(r instanceof ml)this.needsInitialTalonUpdate_=!0;else if(!(r instanceof _s)){console.error("Error loading custom spoken forms",r);let n=r.message.replace(/\.$/,"");mt(k().messages,"CustomSpokenForms.updateSpokenFormMaps",`Error loading custom spoken forms: ${n}. Falling back to default spoken forms.`)}this.spokenFormMap_={...Ln},this.notifier.notifyListeners();return}for(let r of lA)h9(this.spokenFormMap_,r,Xx[r],Object.fromEntries(e.filter(n=>n.type===r).map(({id:n,spokenForms:i})=>[n,i])));this.notifier.notifyListeners()}getCustomRegexScopeTypes(){return Object.keys(this.spokenFormMap_.customRegex).map(e=>({type:"customRegex",regex:e}))}dispose(){this.disposable.dispose()}};function h9(t,e,r,n){let i=Array.from(new Set([...Object.keys(r),...Object.keys(n)])),o={};for(let s of i){let{defaultSpokenForms:l=[],isPrivate:u=!1}=r[s]??{},m=n[s];o[s]=m==null?{defaultSpokenForms:l,spokenForms:[],requiresTalonUpdate:!u,isCustom:!1,isPrivate:u}:{defaultSpokenForms:l,spokenForms:m,requiresTalonUpdate:!1,isCustom:!Ri(l,m),isPrivate:u}}t[e]=o}var Lf=class{constructor(e){this.customSpokenForms=new Df(e),this.customSpokenFormsInitialized=this.customSpokenForms.customSpokenFormsInitialized,this.spokenFormGenerator=new Os(this.customSpokenForms.spokenFormMap),this.disposable=this.customSpokenForms.onDidChangeCustomSpokenForms(()=>{this.spokenFormGenerator=new Os(this.customSpokenForms.spokenFormMap)})}onDidChangeCustomSpokenForms(e){return this.customSpokenForms.onDidChangeCustomSpokenForms(e)}commandToSpokenForm(e){return this.spokenFormGenerator.processCommand(e)}scopeTypeToSpokenForm(e){return this.spokenFormGenerator.processScopeType(e)}actionIdToSpokenForm(e){return this.spokenFormGenerator.getSpokenFormForSingleTerm("action",e)}graphemeToSpokenForm(e){return this.spokenFormGenerator.getSpokenFormForSingleTerm("grapheme",e)}getCustomRegexScopeTypes(){return this.customSpokenForms.getCustomRegexScopeTypes()}get needsInitialTalonUpdate(){return this.customSpokenForms.needsInitialTalonUpdate}dispose(){this.disposable.dispose()}};function*y9(t){for(let e of t)for(let r of e)yield r}function*Pl(t,e){let r=If(e),n=t;for(;n-- >0;){let i=r.next();if(!i.done)yield i.value;else return}}function*AS(t){let e=If(t),r=e.next();if(r.done)return;let n=r.value;for(let i of e)yield[n,i],n=i}var USe=Symbol();function*T9(t=0,e=1){let r=t;for(;;)yield r,r+=e}function*Ff(t,e){let r=0;for(let n of t)e(n,r++)&&(yield n)}function*Kt(t,e){for(let r of t)yield e(r)}function*zP(t,e,r,n=1){let i,o;if(r!==void 0?(i=e,o=r):(i=0,o=e),i<0)throw new Error("start cannot be negative");if(o!==null&&o<0)throw new Error("stop cannot be negative");if(n<=0)throw new Error("step cannot be negative");let s=-1,l=If(t),u;for(;;){if(s++,o!==null&&s>=o||(u=l.next(),u.done))return;s<i||(s-i)%n===0&&(yield u.value)}}function*x9(t,e){let r=0,n=If(t),i;for(;!(i=n.next()).done;){let o=i.value;if(!e(o,r++))return;yield o}}function If(t){return t[Symbol.iterator]()}function Ns(t,e){return Array.from(Kt(t,e))}function jP(t,e,r){let n=T9(t,r),i=r>=0?o=>o<e:o=>o>e;return x9(n,i)}function qP(t,e,r=1){return e!==void 0?jP(t,e,r):jP(0,t,r)}function Cf(t,e){return y9(Kt(t,e))}function qr(t,e,{domain:r},{domain:n}){return t==="forward"?S9(e,r,n):v9(e,r,n)}function S9(t,e,r){let n=e.start.isAfterOrEqual(t),i=r.start.isAfterOrEqual(t);if(n&&i){let s=e.start.compareTo(r.start);return s===0?e.end.compareTo(r.end):s}if(!n&&!i){let s=e.end.compareTo(r.end);return s===0?-e.start.compareTo(r.start):s}if(!n&&i){let s=e.end.compareTo(r.start);return s!==0?s:r.isEmpty?1:-1}let o=e.start.compareTo(r.end);return o!==0?o:e.isEmpty?-1:1}function v9(t,e,r){let n=e.end.isBeforeOrEqual(t),i=r.end.isBeforeOrEqual(t);if(n&&i){let s=-e.end.compareTo(r.end);return s===0?-e.start.compareTo(r.start):s}if(!n&&!i){let s=-e.start.compareTo(r.start);return s===0?e.end.compareTo(r.end):s}if(!n&&i){let s=-e.start.compareTo(r.end);return s!==0?s:r.isEmpty?1:-1}let o=-e.end.compareTo(r.start);return o!==0?o:e.isEmpty?-1:1}function GP(t,e,r,n,i,o){return b9(t,n,i,o)&&(i==null||qr(r,n.includeDescendantScopes?t:e,i,o)<0)}function b9(t,e,r,n){let{containment:i,distalPosition:o,allowAdjacentScopes:s,skipAncestorScopes:l}=e,{domain:u}=n;switch(i){case"disallowed":if(u.contains(t))return!1;break;case"disallowedIfStrict":if(uP(u,t))return!1;break;case"required":if(!u.contains(t))return!1;break}return l&&r!=null&&u.contains(r.domain)?!1:w9(new Y(t,o),u,s)}function w9(t,e,r){let n=t.intersection(e);return n==null?!1:!n.isEmpty||r||e.isEmpty}var E9={containment:null,allowAdjacentScopes:!1,skipAncestorScopes:!1,includeDescendantScopes:!1},ze=class{constructor(){this.includeAdjacentInEvery=!1}*generateScopes(e,r,n,i={}){let o={...E9,...i,distalPosition:i.distalPosition??(n==="forward"?e.document.range.end:e.document.range.start)},s,l=r;for(let u of this.generateScopeCandidates(e,r,n,o))if(GP(r,l,n,o,s,u)&&(yield u,s=u,l=n==="forward"?u.domain.end:u.domain.start),this.canStopEarly(r,n,o,s,u))return}canStopEarly(e,r,n,i,o){let{containment:s,distalPosition:l,skipAncestorScopes:u}=n;if(this.isHierarchical&&!u)return!1;let m=this.isHierarchical&&u?i:o;return m==null?!1:!!(s==="required"&&(r==="forward"?m.domain.end.isAfter(e):m.domain.start.isBefore(e))||(r==="forward"?m.domain.end.isAfterOrEqual(l):m.domain.start.isBeforeOrEqual(l)))}};var Mr=class extends ze{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.scopeType=n;this.languageId=i;this.isHierarchical=!1}get searchScopeType(){return this.iterationScopeType}get searchScopeHandler(){return this._searchScopeHandler==null&&(this._searchScopeHandler=this.scopeHandlerFactory.create(this.searchScopeType,this.languageId)),this._searchScopeHandler}generateScopeCandidates(r,n,i,o){let{containment:s,...l}=o,u=this.searchScopeHandler.generateScopes(r,n,i,{containment:s==="required"?"required":void 0,...l});return Cf(u,m=>this.generateScopesInSearchScope(i,m))}};var Of=class extends ze{constructor(r,n){super();this.scopeType={type:"line"};this.iterationScopeType={type:"paragraph"};this.isHierarchical=!1;this.includeAdjacentInEvery=!0}*generateScopeCandidates(r,n,i){if(i==="forward")for(let o=n.line;o<r.document.lineCount;o++)yield KP(r,o);else for(let o=n.line;o>=0;o--)yield KP(r,o)}};function KP(t,e){let{range:r}=t.document.lineAt(e);return{editor:t,domain:r,getTargets:n=>[PS(t,n,r)]}}function PS(t,e,r){return new gr({editor:t,isReversed:e,contentRange:MS(t,r)})}function MS(t,e){let r=t.document.lineAt(e.start),n=t.document.lineAt(e.end);return new Y(r.rangeTrimmed?.start??r.range.start,n.rangeTrimmed?.end??n.range.end)}function gn(t,e,r,n){let i=e.document.offsetAt(r.start),o=e.document.getText(r),s=l=>new Y(e.document.positionAt(i+l.index),e.document.positionAt(i+l.index+l[0].length));return t.lastIndex=0,n==="forward"?Kt(o.matchAll(t),s):Array.from(o.matchAll(t),s).reverse()}var Nf=class extends Mr{constructor(){super(...arguments);this.scopeType={type:"identifier"};this.iterationScopeType={type:"line"};this.regex=Pr(this.languageId).identifierMatcher}generateScopesInSearchScope(r,{editor:n,domain:i}){return Kt(gn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new ir({editor:n,contentRange:o,isReversed:s})]}))}};function Uf(t,e,r){let n=t.editor.document.getText(t.domain),i=e.editor.document.getText(e.domain);for(let o of r){let s=Yo(o,n),l=Yo(o,i);if(s&&!l)return!0;if(l&&!s)return!1}}var _9=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}\p{Z}\p{C}]/gu,R9=/[$]/g,k9=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}]/gu,Hf=class extends Mr{constructor(){super(...arguments);this.scopeType={type:"character"};this.iterationScopeType={type:"token"}}get searchScopeType(){return{type:"line"}}generateScopesInSearchScope(r,{editor:n,domain:i}){return Kt(gn(_9,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new Ze({editor:n,contentRange:o,isReversed:s,textualType:"character"})]}))}isPreferredOver(r,n){let{identifierMatcher:i}=Pr(this.languageId);return Uf(r,n,[i,R9,k9])}};var Bf=class extends Mr{constructor(){super(...arguments);this.scopeType={type:"word"};this.iterationScopeType={type:"identifier"};this.wordTokenizer=new Is(this.languageId)}getScopesInSearchScope({editor:r,domain:n}){let{document:i}=r,o=i.offsetAt(n.start),l=this.wordTokenizer.splitIdentifier(i.getText(n)).map(u=>new Y(i.positionAt(o+u.index),i.positionAt(o+u.index+u.text.length)));return l.map((u,m)=>({editor:r,domain:u,getTargets:d=>{let g=m>0?l[m-1]:null,y=m+1<l.length?l[m+1]:null;return[A9(d,r,g,u,y)]}}))}generateScopesInSearchScope(r,n){let i=this.getScopesInSearchScope(n);return r==="backward"&&i.reverse(),i}};function A9(t,e,r,n,i){let o=r!=null&&n.start.isAfter(r.end)?new Y(r.end,n.start):void 0,s=i!=null&&i.start.isAfter(n.end)?new Y(n.end,i.start):void 0,u=o!=null||s!=null?e.document.getText(o??s):"";return new uf({editor:e,isReversed:t,contentRange:n,insertionDelimiter:u,leadingDelimiterRange:o,trailingDelimiterRange:s})}var P9=/[$]/g,Vf=class extends Mr{constructor(){super(...arguments);this.scopeType={type:"token"};this.iterationScopeType={type:"line"};this.regex=Pr(this.languageId).tokenMatcher}generateScopesInSearchScope(r,{editor:n,domain:i}){return Kt(gn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new ir({editor:n,contentRange:o,isReversed:s})]}))}isPreferredOver(r,n){let{identifierMatcher:i}=Pr(this.languageId);return Uf(r,n,[i,P9])}};var Wf=class extends ze{constructor(r,n){super();this.scopeType={type:"document"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i){let o=r.document.range;yield{editor:r,domain:o,getTargets:s=>[new sf({editor:r,isReversed:s,contentRange:o})]}}};function $f(t,e,r,n,i){if(!t&&n!=null&&i!=null&&mS(e,n)>mS(e,i))return r.union(n)}function Us(t){return t.containment==null&&t.skipAncestorScopes}function QP(t,e,r,{containment:n,distalPosition:i,allowAdjacentScopes:o}){let{start:s,end:l}=M9(t.offsetAt(e),t.offsetAt(i),r,n,o);return{start:t.positionAt(s),end:t.positionAt(l)}}function M9(t,e,r,n,i){let o=i?1:0;if(n==="required")return r==="forward"?{start:t-o,end:t+1}:{start:t-1,end:t+o};let s=n==="disallowed"?1:-o;return r==="forward"?{start:t+s,end:e+o}:{start:e-o,end:t-s}}function YP(t,e,r){let n=[],i=[];for(let o of t)i.length===0||e(i[i.length-1],o)?i.push(o):(n.push(r(i)),i=[o]);return i.length>0&&n.push(r(i)),n}var Hs=class extends ze{constructor(r){super();this.query=r}*generateScopeCandidates(r,n,i,o){let{document:s}=r,l=Us(o),{start:u,end:m}=QP(s,n,i,o),d=this.query.matches(s,u,m).map(g=>this.matchToScope(r,g,l)).filter(g=>g!=null).sort((g,y)=>qr(i,n,g,y));yield*YP(d,(g,y)=>g.domain.isRangeEqual(y.domain),g=>g.length===1?g[0]:{...g[0],getTargets(y){let x=Jc(g.flatMap(w=>w.getTargets(y)),(w,E)=>w.isEqual(E));if(x.length>1&&!g.every(w=>w.allowMultiple)){let w="Please use #allow-multiple! predicate in your query to allow multiple matches for this scope type";if(mt(k().messages,"BaseTreeSitterScopeHandler.allow-multiple",w),k().runMode==="test")throw Error(w)}return x}})}};function DS(t,e,r,n){return n?Bs(t,`${e}.${r}`,`_.${r}`):Bs(t,`${e}.${r}`)??(Bs(t,e)!=null?Bs(t,`_.${r}`):void 0)}function yo(t,e,r,n){return DS(t,e,r,n)?.range}function Bs(t,...e){return t.captures.find(r=>e.some(n=>r.name===n))}var jf=class extends Hs{constructor(r,n){super(r);this.iterateeScopeType=n;this.isHierarchical=!0;this.scopeType=void 0}get iterationScopeType(){throw Error("Not implemented")}matchToScope(r,n,i){let o=this.iterateeScopeType.type,s=DS(n,o,"iteration",!1);if(s==null)return;let{range:l,allowMultiple:u}=s,m=yo(n,o,"iteration.domain",!1)??l;return{editor:r,domain:m,allowMultiple:u,getTargets:d=>[new Ze({editor:r,isReversed:d,contentRange:l})]}}};var zf=class extends Hs{constructor(r,n){super(r);this.scopeType=n;this.isHierarchical=!0}get iterationScopeType(){return{type:"custom",scopeHandler:new jf(this.query,this.scopeType)}}matchToScope(r,n,i){let o=this.scopeType.type,s=Bs(n,o);if(s==null)return;let{range:l,allowMultiple:u,insertionDelimiter:m}=s,d=yo(n,o,"domain",!0)??l,g=yo(n,o,"prefix",!0)?.with(void 0,l.start),y=yo(n,o,"leading",!0)?.with(void 0,g?.start??l.start),x=yo(n,o,"trailing",!0)?.with(l.end),w=yo(n,o,"removal",!0);return w==null&&(o==="collectionItem"||o==="argumentOrParameter")&&(w=$f(i,r,l,y,x)),{editor:r,domain:d,allowMultiple:u,getTargets:E=>[new go({scopeTypeType:o,editor:r,isReversed:E,contentRange:l,prefixRange:g,removalRange:w,leadingDelimiterRange:y,trailingDelimiterRange:x,insertionDelimiter:m})]}}};function ZP(t){return t.flatMap((e,r)=>{let{value:n,done:i}=e.next();return i?[]:[{iterator:e,value:n,index:r}]})}function XP(t,e){return t.flatMap(r=>{let{iterator:n,index:i}=r,{value:o}=r,s=!1;for(;!s&&!e(o);)({value:o,done:s}=n.next());return s?[]:[{iterator:n,value:o,index:i}]})}var ei=class t extends ze{constructor(r,n){super();this.scopeHandlers=r;this.getIterationScopeHandler=n;this.isHierarchical=!0;this.scopeType=void 0}static create(r,n,i){let o=n.scopeTypes.map(s=>r.create(s,i));return this.createFromScopeHandlers(r,i,o)}static createFromScopeHandlers(r,n,i){let o=()=>new t(i.map(s=>r.create(s.iterationScopeType,n)),()=>{throw new Error("Not implemented")});return new t(i,o)}get iterationScopeType(){return this.iterationScopeHandler==null&&(this.iterationScopeHandler=this.getIterationScopeHandler()),{type:"custom",scopeHandler:this.iterationScopeHandler}}*generateScopeCandidates(r,n,i,o){if(this.iterationScopeHandler?.lastYieldedIndex!=null){let u=this.iterationScopeHandler.lastYieldedIndex;yield*this.scopeHandlers[u].generateScopes(r,n,i,o);return}let s=this.scopeHandlers.map(u=>u.generateScopes(r,n,i,o)[Symbol.iterator]()),l=ZP(s);for(;l.length>0;){l.sort((d,g)=>qr(i,n,d.value,g.value));let u=l[0],m=u.value;this.lastYieldedIndex=u.index,yield m,l=XP(l,d=>qr(i,n,m,d)<0)}}};var qf=class extends ze{constructor(r,n){super();this.scopeType={type:"paragraph"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i){let{document:o}=r,s=i==="forward"?1:-1,l=i==="forward"?o.lineCount:-1,u=D9(o,n,i),m=r.document.lineAt(n);for(let d=n.line+s;d!==l;d+=s){let g=r.document.lineAt(d);g.isEmptyOrWhitespace?u!=null&&(yield JP(r,u.range.union(m.range)),u=void 0):u==null&&(u=g),m=g}u!=null&&(yield JP(r,u.range.union(m.range)))}};function D9(t,e,r){let n=r==="forward"?-1:1,i=r==="forward"?-1:t.lineCount,o=t.lineAt(e);if(!o.isEmptyOrWhitespace){for(let s=e.line+n;s!==i;s+=n){let l=t.lineAt(s);if(l.isEmptyOrWhitespace)break;o=l}return o}}function JP(t,e){return{editor:t,domain:e,getTargets:r=>[new po({editor:t,isReversed:r,contentRange:MS(t,e)})]}}function Ml(t,e){return e.length>1?e.indexOf(t.slice(-1))>-1:t.slice(-1)===e}function eM(t,e){return t.slice(t.length-e.length)===e}var LS,F9=["al","adj","assn","Ave","BSc","MSc","Cell","Ch","Co","cc","Corp","Dem","Dept","ed","eg","Eq","Eqs","est","est","etc","Ex","ext","Fig","fig","Figs","figs","i.e","ie","Inc","inc","Jan","Feb","Mar","Apr","Jun","Jul","Aug","Sep","Sept","Oct","Nov","Dec","jr","mi","Miss","Mrs","Mr","Ms","Mol","mt","mts","no","Nos","PhD","MD","BA","MA","MM","pl","pop","pp","Prof","Dr","pt","Ref","Refs","Rep","repr","rev","Sec","Secs","Sgt","Col","Gen","Rep","Sen","Gov","Lt","Maj","Capt","St","Sr","sr","Jr","jr","Rev","Sun","Mon","Tu","Tue","Tues","Wed","Th","Thu","Thur","Thurs","Fri","Sat","trans","Univ","Viz","Vol","vs","v"];function tM(t){t?LS=t:LS=F9}function FS(t){return/^[A-Z][a-z].*/.test(t)||Gf(t)}function rM(t){return FS(t)||/``|"|'/.test(t.substring(0,2))}function nM(t){let e=t.replace(/[-'`~!@#$%^&*()_|+=?;:'",.<>{}[\]\\/]/gi,"");return~LS.indexOf(e)}function iM(t,e){return(t==="a.m."||t==="p.m.")&&e.replace(/\W+/g,"").slice(-3).toLowerCase()==="day"}function IS(t){let e=t.replace(/[()[]{}]/g,"").match(/(.\.)*/);return e&&e[0].length>0}function oM(t){return t.length<=3?!0:FS(t)}function CS(t,e){return e.length>0?t<5&&e[0].length<6&&FS(e[0])?!0:e.filter(function(n){return/[A-Z]/.test(n.charAt(0))}).length>=3:!1}function Gf(t,e){return e&&(t=t.slice(e-1,e+2)),!isNaN(t)}function aM(t){return t.match(/^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/)}function sM(t){return t.match(/[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/)}function cM(t){let e=0;return((e=t.indexOf("."))>-1||(e=t.indexOf("!"))>-1||(e=t.indexOf("?"))>-1)&&t.charAt(e+1).match(/[a-zA-Z].*/)?[t.slice(0,e),t.slice(e+1)]:!1}function lM(t){return t==="."||t==="!"||t==="?"}var pM=" @~@ ",uM=pM.trim(),C9=new RegExp("\\S",""),O9=new RegExp("\\n+|[-#=_+*]{4,}","g"),N9=new RegExp("\\S+|\\n","g"),U9={newlineBoundaries:!1,preserveWhitespace:!1,abbreviations:void 0};function mM(t,e){if(!t)return[];if(!C9.test(t))return[];let r={...U9,...e};tM(r.abbreviations),r.newlineBoundaries&&(t=t.replace(O9,pM));let n,i;r.preserveWhitespace?(i=t.split(/(<br\s*\/?>|\S+|\n+)/),n=i.filter(function(g,y){return y%2})):n=t.trim().match(N9)??[];let o=0,s=0,l=[],u=[],m=[];if(!n||!n.length)return[];for(let g=0,y=n.length;g<y;g++){if(o++,m.push(n[g]),~n[g].indexOf(",")&&(o=0),lM(n[g])||Ml(n[g],"?!")||n[g]===uM){r.newlineBoundaries&&n[g]===uM&&m.pop(),u.push(m),o=0,m=[];continue}if((Ml(n[g],'"')||Ml(n[g],"\u201D"))&&(n[g]=n[g].slice(0,-1)),Ml(n[g],".")){if(g+1<y){if(n[g].length===2&&isNaN(n[g].charAt(0))||nM(n[g]))continue;if(rM(n[g+1])){if(iM(n[g],n[g+1])||CS(o,n.slice(g,6))||Gf(n[g+1])&&oM(n[g]))continue}else if(eM(n[g],"..")||IS(n[g])||CS(o,n.slice(g,5)))continue}u.push(m),m=[],o=0;continue}(s=n[g].indexOf("."))>-1&&(Gf(n[g],s)||IS(n[g])||sM(n[g])||aM(n[g]))||(l=cM(n[g]))&&(m.pop(),m.push(l[0]),u.push(m),m=[],o=0,m.push(l[1]))}return m.length&&u.push(m),u=u.filter(function(g){return g.length>0}),u.slice(1).reduce(function(g,y){let x=g[g.length-1];return x.length===1&&/^.{1,2}[.]$/.test(x[0])&&!/[.]/.test(y[0])?(g.pop(),g.push(x.concat(y)),g):(g.push(y),g)},[u[0]]).map(function(g,y){if(r.preserveWhitespace&&!r.newlineBoundaries){let x=g.length*2;return y===0&&(x+=1),i.splice(0,x).join("")}return g.join(" ")})}var H9=/\S*\p{L}/u,fM=/(\r?\n[^\p{L}]*\r?\n)|(?<=[.!?])(\s*\r?\n)/gu,B9={newlineBoundaries:!1,preserveWhitespace:!0},Kf=class{*segment(e){let r=mM(e,B9),n=0;for(let i of r){let o=i.split(fM).filter(s=>s!=null);for(let s of o){if(!W9(s)){let l=V9(s,n);l!=null&&(yield l)}n+=s.length}}}};function V9(t,e){let r=pk(H9,t);if(r==null)return;let n=r.index;return n!==0&&(e+=n,t=t.slice(n)),{text:t.trimEnd(),index:e}}function W9(t){return Yo(fM,t)}var Qf=class extends Mr{constructor(){super(...arguments);this.scopeType={type:"sentence"};this.iterationScopeType={type:"paragraph"};this.segmenter=new Kf}generateScopesInSearchScope(r,{editor:n,domain:i}){let o=n.document.offsetAt(i.start),s=n.document.getText(i),l=m=>{let d=new Y(n.document.positionAt(o+m.index),n.document.positionAt(o+m.index+m.text.length));return{editor:n,domain:d,getTargets:g=>[new ir({editor:n,contentRange:d,isReversed:g})]}},u=this.segmenter.segment(s);return r==="forward"?Kt(u,l):Array.from(u,l).reverse()}};var Vs=class extends Mr{constructor(){super(...arguments);this.iterationScopeType={type:"line"}}generateScopesInSearchScope(r,{editor:n,domain:i}){return Kt(gn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new ir({editor:n,contentRange:o,isReversed:s})]}))}},Yf=class extends Vs{constructor(){super(...arguments);this.regex=/\S+/g}},Zf=class extends Vs{constructor(r,n,i){super(r,n,i);this.scopeType=n;this.regex=/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/g}},Xf=class extends Vs{constructor(r,n,i){super(r,n,i);this.scopeType=n}get regex(){return new RegExp(this.scopeType.regex,this.scopeType.flags??"gu")}},Jf=class extends Vs{constructor(r,n,i){super(r,n,i);this.scopeType=n}get regex(){return new RegExp(Wr(this.scopeType.character),"gui")}};var ed=class extends ze{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.languageId=n;this.targetScopeType=i;this.isHierarchical=!0;this.targetScopeHandler=this.scopeHandlerFactory.create(this.targetScopeType,this.languageId),this.surroundingPairInteriorScopeHandler=this.scopeHandlerFactory.create({type:"surroundingPairInterior",delimiter:"any"},this.languageId)}get iterationScopeType(){switch(this.targetScopeHandler.iterationScopeType.type){case"custom":case"fallback":case"conditional":throw Error(`Iteration scope type can't be '${this.targetScopeHandler.iterationScopeType.type}' for BoundedBaseScopeHandler`)}return{type:"oneOf",scopeTypes:[this.targetScopeHandler.iterationScopeType,{type:"surroundingPairInterior",delimiter:"any"}]}}*generateScopeCandidates(r,n,i,o){let s=this.targetScopeHandler.generateScopes(r,n,i,{...o,containment:o.containment!=="disallowed"?o.containment:void 0}),l=Array.from(this.surroundingPairInteriorScopeHandler.generateScopes(r,n,i,{...o,containment:Us(o)?"required":o.containment}));for(let u of s){let m=[];for(let d of l){let g=u.domain.intersection(d.domain);g!=null&&!g.isEmpty&&m.push({editor:r,domain:g,getTargets:y=>[this.getTargets(dM(u,y),dM(d,y))]})}m.push(u),m.sort((d,g)=>qr(i,n,d,g)),yield*m}}};function dM(t,e){let r=t.getTargets(e);if(r.length!==1)throw Error(`Expected one target but got ${r.length}`);return r[0]}var td=class extends ed{constructor(r,n,i){super(r,i,{type:"nonWhitespaceSequence"});this.scopeType={type:"boundedNonWhitespaceSequence"}}getTargets(r,n){let i=r.contentRange.intersection(n.contentRange);if(i==null||i.isEmpty)throw Error("Expected non empty intersection");return new ir({editor:r.editor,isReversed:r.isReversed,contentRange:i})}},rd=class extends ed{constructor(r,n,i){super(r,i,{type:"paragraph"});this.scopeType={type:"boundedParagraph"}}getTargets(r,n){if(!(r instanceof po))throw Error("Expected ParagraphTarget");return new df({editor:r.editor,isReversed:r.isReversed,paragraphTarget:r,containingInterior:n})}};var ti=class{constructor(e){this.items=e;this.index=0}add(e){this.items.push(e)}contains(e){return this.advance(e)}getContaining(e){if(this.advance(e))return this.items[this.index]}advance(e){for(;this.index<this.items.length;){let r=this.items[this.index].range;if(r.contains(e))return!0;if(e.end.isBeforeOrEqual(r.start))return!1;this.index++}return!1}};var Ws=class{constructor(e){this.children=$9(e)}getSmallestContaining(e){return this.children.getContaining(e)?.getSmallestContaining(e)}};function $9(t){let e=[],r=[];for(let n of t){let i=new OS(n);for(;r.length>0&&!r[r.length-1].range.contains(n.range);)r.pop();let o=r[r.length-1];o!=null?o.children.add(i):e.push(i),r.push(i)}return new ti(e)}var OS=class{constructor(e){this.item=e;this.children=new ti([])}get range(){return this.item.range}getSmallestContaining(e){return this.children.getContaining(e)?.getSmallestContaining(e)??this.item}};var j9=",",NS=new RegExp(j9,"g");function gM(t){let e=t.getText();return ln(e,NS,r=>new Y(t.positionAt(r.index),t.positionAt(r.index+r[0].length)))}var hM={type:"fallback",scopeTypes:[{type:"surroundingPairInterior",delimiter:"collectionBoundary"},{type:"conditional",scopeType:{type:"line"},predicate:t=>{let e=t.editor.document.getText(t.domain);return Yo(NS,e)}}]};function US(t,e,r,n,i,o){let s=i!=null?new Y(i.end,n.start):void 0,l=o!=null?new Y(n.end,o.start):void 0,u=$f(t,e,n,s,l),m=r.isSingleLine?", ":`,
`;return{editor:e,domain:n,getTargets(d){return[new go({scopeTypeType:"collectionItem",editor:e,isReversed:d,contentRange:n,insertionDelimiter:m,leadingDelimiterRange:s,trailingDelimiterRange:l,removalRange:u})]}}}function HS(t,e,r,n){let i=t.create({type:"surroundingPairInterior",delimiter:n},e);return Array.from(i.generateScopes(r,new ye(0,0),"forward",{containment:void 0,skipAncestorScopes:!1,includeDescendantScopes:!0}),o=>({range:o.domain}))}var nd=class extends ze{constructor(r,n){super();this.scopeHandlerFactory=r;this.languageId=n;this.scopeType={type:"collectionItem"};this.isHierarchical=!0}get iterationScopeType(){return hM}*generateScopeCandidates(r,n,i,o){let s=Us(o),l=gM(r.document),u=HS(this.scopeHandlerFactory,this.languageId,r,"collectionBoundary"),m=new Ws(u),d=HS(this.scopeHandlerFactory,this.languageId,r,"string"),g=new ti(d),y=[],x=new Set,w=[];for(let E of l){if(g.contains(E))continue;let U;for(;w.length>0;){let ie=w[w.length-1];if(ie.iterationRange.contains(E)){U=ie;break}this.addScopes(y,ie),w.pop()}let V=m.getSmallestContaining(E)?.range,z=V??r.document.lineAt(E.start.line).range;if(U!=null&&U.iterationRange.isRangeEqual(z)){U.delimiters.push(E);continue}V!=null&&x.add(V),w.push({editor:r,isEveryScope:s,iterationRange:z,delimiters:[E]})}for(let E of w)this.addScopes(y,E);for(let E of u)if(!x.has(E.range)&&!E.range.isEmpty){let U=sa(r,E.range);U.isEmpty||y.push(US(s,r,E.range,U))}y.sort((E,U)=>qr(i,n,E,U)),yield*y}addScopes(r,n){let{editor:i,iterationRange:o,isEveryScope:s,delimiters:l}=n;if(l.length===0)return;let u=[];for(let g=0;g<l.length;++g){let y=l[g],x=l[g-1]?.end??o.start;u.push(new Y(x,y.start))}let m=l[l.length-1];u.push(new Y(m.end,o.end));let d=u.map(g=>sa(i,g));for(let g=0;g<d.length;++g)g===d.length-1&&i.document.getText(d[g]).trim()===""||r.push(US(s,i,o,d[g],d[g-1],d[g+1]))}};var id=class extends ze{constructor(r,n,i){super();this.scopeType={type:"collectionItem"};this.isHierarchical=!0;this.scopeHandler=(()=>{let o=new nd(r,i),s=n.get(i)?.getScopeHandler(this.scopeType);return s==null?o:ei.createFromScopeHandlers(r,i,[s,o])})()}get iterationScopeType(){return this.scopeHandler.iterationScopeType}generateScopeCandidates(r,n,i,o){return this.scopeHandler.generateScopes(r,n,i,o)}};var od=class extends ze{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.conditionalScopeType=n;this.languageId=i;this.scopeType=void 0;this.isHierarchical=!0}get iterationScopeType(){throw new xt("Iteration scope for ConditionalScopeHandler")}generateScopeCandidates(r,n,i,o){let s=this.scopeHandlerFactory.create(this.conditionalScopeType.scopeType,this.languageId);return Ff(s.generateScopes(r,n,i,o),this.conditionalScopeType.predicate)}};var $s=class t extends ze{constructor(r){super();this.scopeHandlers=r;this.scopeType=void 0;this.isHierarchical=!0}static create(r,n,i){let o=n.scopeTypes.map(s=>r.create(s,i));return this.createFromScopeHandlers(o)}static createFromScopeHandlers(r){return new t(r)}get iterationScopeType(){throw new xt("Iteration scope for FallbackScopeHandler")}*generateScopeCandidates(r,n,i,o){for(let s of this.scopeHandlers)yield*s.generateScopes(r,n,i,o)}};var ad=class extends ze{constructor(){super();this.scopeType={type:"notebookCell"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i,o){let s=z9(r,n,i,o);for(let l of s)yield G9(l)}};function z9(t,e,r,n){let i=q9(t);if(i==null)return[];let{notebook:o,cell:s}=i;return n.containment==="required"?[s]:n.containment==="disallowed"||n.containment==="disallowedIfStrict"?r==="forward"?o.cells.slice(s.index+1):o.cells.slice(0,s.index).reverse():n.distalPosition!=null&&new Y(e,n.distalPosition).isRangeEqual(t.document.range)?o.cells:r==="forward"?o.cells.slice(s.index):o.cells.slice(0,s.index+1).reverse()}function q9(t){let e=t.document.uri.toString();for(let r of k().visibleNotebookEditors)for(let n of r.cells)if(n.document.uri.toString()===e)return{notebook:r,cell:n}}function G9(t){let e=K9(t),r=e.document.range;return{editor:e,domain:r,getTargets:n=>[new lf({editor:e,isReversed:n,contentRange:r})]}}function K9(t){let e=t.document.uri.toString();for(let r of k().visibleTextEditors)if(r.document.uri.toString()===e)return r;throw new Error("Editor not found notebook cell")}var sd=class extends ze{constructor(r,n,i,o){super();this.scopeType={type:"notebookCell"};this.isHierarchical=!1;this.scopeHandler=(()=>{let s=new ad,l=n.get(o)?.getScopeHandler(this.scopeType);return l==null?s:ei.createFromScopeHandlers(r,o,[l,s])})()}get iterationScopeType(){return this.scopeHandler.iterationScopeType}generateScopeCandidates(r,n,i,o){return this.scopeHandler.generateScopes(r,n,i,o)}};var cd=class extends ze{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.scopeType=n;this.languageId=i;this.isHierarchical=!0;this.surroundingPairScopeHandler=this.scopeHandlerFactory.create({type:"surroundingPair",delimiter:this.scopeType.delimiter,requireStrongContainment:!0},this.languageId)}get iterationScopeType(){return this.surroundingPairScopeHandler.iterationScopeType}*generateScopeCandidates(r,n,i,o){let s=this.surroundingPairScopeHandler.generateScopes(r,n,i,o);for(let l of s)yield{editor:r,domain:l.domain,getTargets(u){return l.getTargets(u).flatMap(m=>m.getInterior())}}}};function yM(t,{openingDelimiterRange:e,closingDelimiterRange:r},n){let i=e.union(r),o=new Y(e.end,r.start);return{editor:t,domain:n?o:i,getTargets:s=>[new pf({editor:t,isReversed:s,contentRange:i,interiorRange:o,boundary:[e,r]})]}}function TM(t){let e=Qo(t.map(({text:r})=>r)).map(Wr).join("|");return new RegExp(`(?<!\\\\)(${e})`,"gu")}function SM(t,e,r){if(r.length===0)return[];let n=t?.getCapturesMap(e)??{},i=new ti(BS(n.disqualifyDelimiter)),o=new ti(BS(n.pairDelimiter)),s=new Ws(BS(n.textFragment)),l=Object.fromEntries(r.map(d=>[d.text,d])),u=gx(e.getText(),TM(r)),m=[];for(let d of u){let g=d[0],y=new Y(e.positionAt(d.index),e.positionAt(d.index+g.length));xM(i.getContaining(y))==null&&m.push({delimiterInfo:l[g],textFragmentRange:s.getSmallestContaining(y)?.range,range:xM(o.getContaining(y))?.range??y})}return m}function xM(t){return t!=null&&!t.hasError()?t:void 0}function BS(t){return t==null?[]:(t.sort((e,r)=>e.range.start.compareTo(r.range.start)),t)}var ld=Object.freeze({angleBrackets:[["</","<"],[">","/>"]],curlyBrackets:[["{","${"],"}"],tripleBacktickQuotes:[[],[]],tripleDoubleQuotes:[[],[]],tripleSingleQuotes:[[],[]],doubleQuotes:['"','"',{isSingleLine:!0}],escapedDoubleQuotes:['\\"','\\"',{isSingleLine:!0}],escapedParentheses:["\\(","\\)"],escapedSquareBrackets:["\\[","\\]"],escapedSingleQuotes:["\\'","\\'",{isSingleLine:!0}],parentheses:[["(","$("],")"],backtickQuotes:["`","`"],singleQuotes:["'","'",{isSingleLine:!0}],squareBrackets:["[","]"]}),vM={nix:{singleQuotes:["''","''"]},lua:{doubleQuotes:[['"',"[["],['"',"]]"]]},python:{tripleSingleQuotes:["'''","'''"],tripleDoubleQuotes:['"""','"""']},markdown:{tripleBacktickQuotes:["```","```"]},ruby:{tripleDoubleQuotes:["%Q(",")"]},csharp:{doubleQuotes:[['@"','"'],['"','"']]}},$we=Object.fromEntries(Object.values(ld)),bM={any:Pi(ld),string:["tripleDoubleQuotes","tripleSingleQuotes","tripleBacktickQuotes","doubleQuotes","singleQuotes","backtickQuotes"],collectionBoundary:["parentheses","squareBrackets","curlyBrackets","angleBrackets"]};function wM(t){return t!=null&&t in vM?{...ld,...vM[t]}:ld}function EM(t,e){let r=bM[t]??[t];return Q9(e,r)}function Q9(t,e){let r=wM(t);return e.flatMap(n=>{let[i,o,s]=r[n],{isSingleLine:l=!1}=s??{},u=dl(i)?[i]:i,m=dl(o)?[o]:o;return Qo(Xc(u,m)).map(g=>{let y=u.includes(g),x=m.includes(g);return{text:g,side:y&&!x?"left":!y&&x?"right":"unknown",delimiterName:n,isSingleLine:l}})})}function _M(t){let e=[],r=[];for(let n of t){let{delimiterInfo:{delimiterName:i,side:o,isSingleLine:s},textFragmentRange:l,range:u}=n;if(o==="left")r.push(n);else{let m=Ko(r,g=>g.delimiterInfo.delimiterName===i&&Y9(g.textFragmentRange,l)&&Z9(s,g.range,u));if(m===-1){o==="unknown"&&r.push(n);continue}let d=r[m];r.length=m,e.push({delimiterName:i,openingDelimiterRange:d.range,closingDelimiterRange:u})}}return e}function Y9(t,e){return t==null||e==null?t===e:t.isRangeEqual(e)}function Z9(t,e,r){return!t||e.start.line===r.start.line}var ud=class extends ze{constructor(r,n,i){super();this.languageDefinitions=r;this.scopeType=n;this.languageId=i;this.iterationScopeType={type:"line"};this.isHierarchical=!0}*generateScopeCandidates(r,n,i,o){if(this.scopeType.forceDirection!=null){mt(k().messages,"deprecatedForceDirection","forceDirection is deprecated. If this is important to you please file an issue on the cursorless repo.");return}let s=SM(this.languageDefinitions.get(this.languageId),r.document,EM(this.scopeType.delimiter,this.languageId)),l=_M(s);l=X9(i,o,n,l),yield*l.map(u=>yM(r,u,this.scopeType.requireStrongContainment??!1)).sort((u,m)=>qr(i,n,u,m))}};function X9(t,e,r,n){return t==="forward"&&e.containment==="required"&&e.allowAdjacentScopes&&e.skipAncestorScopes?n.filter((i,o)=>!(i.closingDelimiterRange.end.isEqual(r)&&n[o+1]?.closingDelimiterRange.start.isEqual(r))):n}var pd=class extends ze{constructor(r,n,i,o){super();this.scopeHandlerFactory=r;this.languageDefinitions=n;this.scopeType=i;this.languageId=o;this.isHierarchical=!0}get iterationScopeType(){throw new xt("Iteration scope for InteriorScopeHandler")}*generateScopeCandidates(r,n,i,o){let s=new Y(n,o.distalPosition),l=this.getScopeHandler();if(l==null)return;let u=l.generateScopes(r,n,i,o);for(let m of u)this.shouldYield(s,m)&&(yield J9(m))}getScopeHandler(){let r=this.languageDefinitions.get(this.languageId)?.getScopeHandler(this.scopeType),n=this.scopeHandlerFactory.create({type:"surroundingPair",delimiter:"any"},this.languageId);return this.scopeType.explicitScopeType?r==null?n:$s.createFromScopeHandlers([r,n]):r==null?n:ei.createFromScopeHandlers(this.scopeHandlerFactory,this.languageId,[r,n])}shouldYield(r,n){return!this.scopeType.explicitScopeType||r.contains(n.domain)}};function J9(t){return{editor:t.editor,domain:t.domain,getTargets(e){return t.getTargets(e).flatMap(e6)}}}function e6(t){let e=t.getInterior();return e??[new Ls({editor:t.editor,isReversed:t.isReversed,fullInteriorRange:t.contentRange})]}var js=class{constructor(e){this.languageDefinitions=e;this.maybeCreate=this.maybeCreate.bind(this),this.create=this.create.bind(this)}maybeCreate(e,r){switch(e.type){case"character":return new Hf(this,e,r);case"word":return new Bf(this,e,r);case"token":return new Vf(this,e,r);case"identifier":return new Nf(this,e,r);case"line":return new Of(e,r);case"sentence":return new Qf(this,e,r);case"paragraph":return new qf(e,r);case"boundedParagraph":return new rd(this,e,r);case"document":return new Wf(e,r);case"nonWhitespaceSequence":return new Yf(this,e,r);case"boundedNonWhitespaceSequence":return new td(this,e,r);case"url":return new Zf(this,e,r);case"customRegex":return new Xf(this,e,r);case"glyph":return new Jf(this,e,r);case"collectionItem":return new id(this,this.languageDefinitions,r);case"surroundingPair":return new ud(this.languageDefinitions,e,r);case"surroundingPairInterior":return new cd(this,e,r);case"notebookCell":return new sd(this,this.languageDefinitions,e,r);case"interior":return new pd(this,this.languageDefinitions,e,r);case"custom":return e.scopeHandler;case"oneOf":return ei.create(this,e,r);case"fallback":return $s.create(this,e,r);case"conditional":return new od(this,e,r);case"instance":throw Error("Unexpected scope type 'instance'");default:return this.languageDefinitions.get(r)?.getScopeHandler(e)}}create(e,r){let n=this.maybeCreate(e,r);if(n==null)throw new Error(`Couldn't create scope handler for '${e.type}'`);return n}};function Gr(t,e){return new Y(t.row,t.column,e.row,e.column)}function VS(t){return new ye(t.row,t.column)}function RM(t){return new Y(t.startPosition.row,t.startPosition.column,t.endPosition.row,t.endPosition.column)}function kM(t,e){return new $e(t.startPosition.row,t.startPosition.column,e.endPosition.row,e.endPosition.column)}function ua(t,e){return{selection:new $e(new ye(e.startPosition.row,e.startPosition.column),new ye(e.endPosition.row,e.endPosition.column)),context:{}}}function t6(t,e,r){let n=e.startIndex<r.startIndex,i=n?e:r,o=n?r:e;return{selection:new $e(new ye(i.startPosition.row,i.startPosition.column),new ye(o.endPosition.row,o.endPosition.column)),context:{}}}function AM(){return i6(t=>t.type===","||t.type==="("||t.type===")"||t.type==="["||t.type==="]"||t.type===">"||t.type==="<"||t.type==="}"||t.type==="{",", ")}function PM(...t){return function(e,r){let n=r.previousSibling,i=n?.previousSibling,o;return n&&(t.includes(n.type)?i?o=Gr(i.endPosition,r.startPosition):o=Gr(n.startPosition,r.startPosition):o=Gr(n.endPosition,r.startPosition)),{...ua(e,r),context:{leadingDelimiterRange:o}}}}function md(t=[],e=[],{includeUnnamedChildren:r=!1}={}){return function(n,i){if(t.length>0&&e.length>0)throw new Error("Cannot have both exclusions and inclusions.");let o=r?i.children:i.namedChildren,s=new Set(t),l=new Set(e);return o=o.filter(u=>s.size>0?!s.has(u.type):l.size>0?l.has(u.type):!0),t6(n,o[0],o[o.length-1])}}function MM(...t){return function(e,r){let n=r.nextSibling,i=n?.nextSibling,o;return n&&(t.includes(n.type)?i?o=Gr(r.endPosition,i.startPosition):o=Gr(r.endPosition,n.endPosition):o=Gr(r.endPosition,n.startPosition)),{...ua(e,r),context:{trailingDelimiterRange:o}}}}function r6(t,e){let r=t.nextSibling;for(;r!=null;){if(!e(r))return r;r=r.nextSibling}return r}function n6(t,e){let r=t.previousSibling;for(;r!=null;){if(!e(r))return r;r=r.previousSibling}return r}function i6(t,e,r=wr,n=wr){return(i,o)=>{let s,l,u=r(o),m=n(o),d=n6(u,t),g=r6(m,t);d!=null&&(s=Gr(d.endPosition,u.startPosition)),g!=null&&(l=Gr(m.endPosition,g.startPosition));let y=o6(i,s,l,e);return{selection:new $e(new ye(u.startPosition.row,u.startPosition.column),new ye(m.endPosition.row,m.endPosition.column)),context:{containingListDelimiter:y,leadingDelimiterRange:s,trailingDelimiterRange:l}}}}function o6(t,e,r,n){let{document:i}=t,o=[r!=null?i.getText(r):n,e!=null?i.getText(e):n];return lx(o,"length")}function DM(t,e){if(t.length===1)return!0;let r=!1,n=t.filter(({name:u})=>u.endsWith(".start")).map(({range:{end:u}})=>u).sort((u,m)=>u.compareTo(m)).at(-1),i=t.filter(({name:u})=>u.endsWith(".end")).map(({range:{start:u}})=>u).sort((u,m)=>u.compareTo(m)).at(0);n!=null&&i!=null&&n.isAfter(i)&&(mt(e,"TreeSitterQuery.checkCaptures.badOrder",`Start capture must be before end capture: ${t.map(u=>u.name)}`),r=!0);let o=t.filter(({name:u})=>u.endsWith(".start")).length,s=t.filter(({name:u})=>u.endsWith(".end")).length,l=t.length-o-s;return l>0&&(o>0||s>0)&&(mt(e,"TreeSitterQuery.checkCaptures.mixRegularStartEnd",`Please do not mix regular captures and start/end captures: ${t.map(({name:u,range:m})=>u+" "+m.toString())}`),r=!0),l>1&&(mt(e,"TreeSitterQuery.checkCaptures.duplicate",`A capture with the same name may only appear once in a single pattern: ${t.map(({name:u,range:m})=>u+" "+m.toString())}`),r=!0),!r}function LM(t){if(t.hasError)return!0;let e=t.parent;for(;e!=null;){if(e.isError)return!0;if(e.hasError)return!1;if(e.previousSibling?.isError||e.nextSibling?.isError)return!0;e=e.parent}return!1}function WS(t){return t.replace(/(\.(start|end))?(\.(startOf|endOf))?$/,"")}var Le={};U_(Le,{BRAND:()=>D6,DIRTY:()=>pa,EMPTY_PATH:()=>l6,INVALID:()=>Se,NEVER:()=>g5,OK:()=>or,ParseStatus:()=>Qt,Schema:()=>Ie,ZodAny:()=>So,ZodArray:()=>Ci,ZodBigInt:()=>fa,ZodBoolean:()=>da,ZodBranded:()=>Ll,ZodCatch:()=>_a,ZodDate:()=>ga,ZodDefault:()=>Ea,ZodDiscriminatedUnion:()=>gd,ZodEffects:()=>Tn,ZodEnum:()=>ba,ZodError:()=>Dr,ZodFirstPartyTypeKind:()=>Ee,ZodFunction:()=>yd,ZodIntersection:()=>xa,ZodIssueCode:()=>te,ZodLazy:()=>Sa,ZodLiteral:()=>va,ZodMap:()=>Ys,ZodNaN:()=>Xs,ZodNativeEnum:()=>wa,ZodNever:()=>Cn,ZodNull:()=>ya,ZodNullable:()=>ii,ZodNumber:()=>ma,ZodObject:()=>Lr,ZodOptional:()=>hn,ZodParsedType:()=>se,ZodPipeline:()=>Fl,ZodPromise:()=>vo,ZodReadonly:()=>Ra,ZodRecord:()=>hd,ZodSchema:()=>Ie,ZodSet:()=>Zs,ZodString:()=>xo,ZodSymbol:()=>Ks,ZodTransformer:()=>Tn,ZodTuple:()=>ni,ZodType:()=>Ie,ZodUndefined:()=>ha,ZodUnion:()=>Ta,ZodUnknown:()=>Ii,ZodVoid:()=>Qs,addIssueToContext:()=>ne,any:()=>B6,array:()=>j6,bigint:()=>C6,boolean:()=>$M,coerce:()=>d5,custom:()=>BM,date:()=>O6,datetimeRegex:()=>UM,defaultErrorMap:()=>Li,discriminatedUnion:()=>K6,effect:()=>a5,enum:()=>n5,function:()=>e5,getErrorMap:()=>zs,getParsedType:()=>ri,instanceof:()=>F6,intersection:()=>Q6,isAborted:()=>fd,isAsync:()=>qs,isDirty:()=>dd,isValid:()=>To,late:()=>L6,lazy:()=>t5,literal:()=>r5,makeIssue:()=>Dl,map:()=>X6,nan:()=>I6,nativeEnum:()=>i5,never:()=>W6,null:()=>H6,nullable:()=>c5,number:()=>WM,object:()=>z6,objectUtil:()=>$S,oboolean:()=>f5,onumber:()=>m5,optional:()=>s5,ostring:()=>p5,pipeline:()=>u5,preprocess:()=>l5,promise:()=>o5,quotelessJson:()=>a6,record:()=>Z6,set:()=>J6,setErrorMap:()=>c6,strictObject:()=>q6,string:()=>VM,symbol:()=>N6,transformer:()=>a5,tuple:()=>Y6,undefined:()=>U6,union:()=>G6,unknown:()=>V6,util:()=>Ve,void:()=>$6});var Ve;(function(t){t.assertEqual=i=>{};function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{let o={};for(let s of i)o[s]=s;return o},t.getValidEnumValues=i=>{let o=t.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),s={};for(let l of o)s[l]=i[l];return t.objectValues(s)},t.objectValues=i=>t.objectKeys(i).map(function(o){return i[o]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let o=[];for(let s in i)Object.prototype.hasOwnProperty.call(i,s)&&o.push(s);return o},t.find=(i,o)=>{for(let s of i)if(o(s))return s},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function n(i,o=" | "){return i.map(s=>typeof s=="string"?`'${s}'`:s).join(o)}t.joinValues=n,t.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(Ve||(Ve={}));var $S;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})($S||($S={}));var se=Ve.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ri=t=>{switch(typeof t){case"undefined":return se.undefined;case"string":return se.string;case"number":return Number.isNaN(t)?se.nan:se.number;case"boolean":return se.boolean;case"function":return se.function;case"bigint":return se.bigint;case"symbol":return se.symbol;case"object":return Array.isArray(t)?se.array:t===null?se.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?se.promise:typeof Map<"u"&&t instanceof Map?se.map:typeof Set<"u"&&t instanceof Set?se.set:typeof Date<"u"&&t instanceof Date?se.date:se.object;default:return se.unknown}};var te=Ve.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),a6=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),Dr=class t extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){let r=e||function(o){return o.message},n={_errors:[]},i=o=>{for(let s of o.issues)if(s.code==="invalid_union")s.unionErrors.map(i);else if(s.code==="invalid_return_type")i(s.returnTypeError);else if(s.code==="invalid_arguments")i(s.argumentsError);else if(s.path.length===0)n._errors.push(r(s));else{let l=n,u=0;for(;u<s.path.length;){let m=s.path[u];u===s.path.length-1?(l[m]=l[m]||{_errors:[]},l[m]._errors.push(r(s))):l[m]=l[m]||{_errors:[]},l=l[m],u++}}};return i(this),n}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ve.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};Dr.create=t=>new Dr(t);var s6=(t,e)=>{let r;switch(t.code){case te.invalid_type:t.received===se.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case te.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,Ve.jsonStringifyReplacer)}`;break;case te.unrecognized_keys:r=`Unrecognized key(s) in object: ${Ve.joinValues(t.keys,", ")}`;break;case te.invalid_union:r="Invalid input";break;case te.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Ve.joinValues(t.options)}`;break;case te.invalid_enum_value:r=`Invalid enum value. Expected ${Ve.joinValues(t.options)}, received '${t.received}'`;break;case te.invalid_arguments:r="Invalid function arguments";break;case te.invalid_return_type:r="Invalid function return type";break;case te.invalid_date:r="Invalid date";break;case te.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:Ve.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case te.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case te.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case te.custom:r="Invalid input";break;case te.invalid_intersection_types:r="Intersection results could not be merged";break;case te.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case te.not_finite:r="Number must be finite";break;default:r=e.defaultError,Ve.assertNever(t)}return{message:r}},Li=s6;var FM=Li;function c6(t){FM=t}function zs(){return FM}var Dl=t=>{let{data:e,path:r,errorMaps:n,issueData:i}=t,o=[...r,...i.path||[]],s={...i,path:o};if(i.message!==void 0)return{...i,path:o,message:i.message};let l="",u=n.filter(m=>!!m).slice().reverse();for(let m of u)l=m(s,{data:e,defaultError:l}).message;return{...i,path:o,message:l}},l6=[];function ne(t,e){let r=zs(),n=Dl({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===Li?void 0:Li].filter(i=>!!i)});t.common.issues.push(n)}var Qt=class t{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let i of r){if(i.status==="aborted")return Se;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let i of r){let o=await i.key,s=await i.value;n.push({key:o,value:s})}return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let i of r){let{key:o,value:s}=i;if(o.status==="aborted"||s.status==="aborted")return Se;o.status==="dirty"&&e.dirty(),s.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof s.value<"u"||i.alwaysSet)&&(n[o.value]=s.value)}return{status:e.value,value:n}}},Se=Object.freeze({status:"aborted"}),pa=t=>({status:"dirty",value:t}),or=t=>({status:"valid",value:t}),fd=t=>t.status==="aborted",dd=t=>t.status==="dirty",To=t=>t.status==="valid",qs=t=>typeof Promise<"u"&&t instanceof Promise;var fe;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(fe||(fe={}));var yn=class{constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},IM=(t,e)=>{if(To(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new Dr(t.common.issues);return this._error=r,this._error}}};function Pe(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(s,l)=>{let{message:u}=t;return s.code==="invalid_enum_value"?{message:u??l.defaultError}:typeof l.data>"u"?{message:u??n??l.defaultError}:s.code!=="invalid_type"?{message:l.defaultError}:{message:u??r??l.defaultError}},description:i}}var Ie=class{get description(){return this._def.description}_getType(e){return ri(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:ri(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Qt,ctx:{common:e.parent.common,data:e.data,parsedType:ri(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(qs(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){let n={common:{issues:[],async:r?.async??!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ri(e)},i=this._parseSync({data:e,path:n.path,parent:n});return IM(n,i)}"~validate"(e){let r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ri(e)};if(!this["~standard"].async)try{let n=this._parseSync({data:e,path:[],parent:r});return To(n)?{value:n.value}:{issues:r.common.issues}}catch(n){n?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then(n=>To(n)?{value:n.value}:{issues:r.common.issues})}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ri(e)},i=this._parse({data:e,path:n.path,parent:n}),o=await(qs(i)?i:Promise.resolve(i));return IM(n,o)}refine(e,r){let n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,o)=>{let s=e(i),l=()=>o.addIssue({code:te.custom,...n(i)});return typeof Promise<"u"&&s instanceof Promise?s.then(u=>u?!0:(l(),!1)):s?!0:(l(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new Tn({schema:this,typeName:Ee.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return hn.create(this,this._def)}nullable(){return ii.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ci.create(this)}promise(){return vo.create(this,this._def)}or(e){return Ta.create([this,e],this._def)}and(e){return xa.create(this,e,this._def)}transform(e){return new Tn({...Pe(this._def),schema:this,typeName:Ee.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new Ea({...Pe(this._def),innerType:this,defaultValue:r,typeName:Ee.ZodDefault})}brand(){return new Ll({typeName:Ee.ZodBranded,type:this,...Pe(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new _a({...Pe(this._def),innerType:this,catchValue:r,typeName:Ee.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return Fl.create(this,e)}readonly(){return Ra.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},u6=/^c[^\s-]{8,}$/i,p6=/^[0-9a-z]+$/,m6=/^[0-9A-HJKMNP-TV-Z]{26}$/i,f6=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,d6=/^[a-z0-9_-]{21}$/i,g6=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,h6=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,y6=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,T6="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",jS,x6=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,S6=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,v6=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,b6=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,w6=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,E6=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,OM="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",_6=new RegExp(`^${OM}$`);function NM(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);let r=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${r}`}function R6(t){return new RegExp(`^${NM(t)}$`)}function UM(t){let e=`${OM}T${NM(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function k6(t,e){return!!((e==="v4"||!e)&&x6.test(t)||(e==="v6"||!e)&&v6.test(t))}function A6(t,e){if(!g6.test(t))return!1;try{let[r]=t.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));return!(typeof i!="object"||i===null||"typ"in i&&i?.typ!=="JWT"||!i.alg||e&&i.alg!==e)}catch{return!1}}function P6(t,e){return!!((e==="v4"||!e)&&S6.test(t)||(e==="v6"||!e)&&b6.test(t))}var xo=class t extends Ie{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==se.string){let o=this._getOrReturnCtx(e);return ne(o,{code:te.invalid_type,expected:se.string,received:o.parsedType}),Se}let n=new Qt,i;for(let o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(i=this._getOrReturnCtx(e,i),ne(i,{code:te.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="max")e.data.length>o.value&&(i=this._getOrReturnCtx(e,i),ne(i,{code:te.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="length"){let s=e.data.length>o.value,l=e.data.length<o.value;(s||l)&&(i=this._getOrReturnCtx(e,i),s?ne(i,{code:te.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):l&&ne(i,{code:te.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),n.dirty())}else if(o.kind==="email")y6.test(e.data)||(i=this._getOrReturnCtx(e,i),ne(i,{validation:"email",code:te.invalid_string,message:o.message}),n.dirty());else if(o.kind==="emoji")jS||(jS=new RegExp(T6,"u")),jS.test(e.data)||(i=this._getOrReturnCtx(e,i),ne(i,{validation:"emoji",code:te.invalid_string,message:o.message}),n.dirty());else if(o.kind==="uuid")f6.test(e.data)||(i=this._getOrReturnCtx(e,i),ne(i,{validation:"uuid",code:te.invalid_string,message:o.message}),n.dirty());else if(o.kind==="nanoid")d6.test(e.data)||(i=this._getOrReturnCtx(e,i),ne(i,{validation:"nanoid",code:te.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid")u6.test(e.data)||(i=this._getOrReturnCtx(e,i),ne(i,{validation:"cuid",code:te.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid2")p6.test(e.data)||(i=this._getOrReturnCtx(e,i),ne(i,{validation:"cuid2",code:te.invalid_string,message:o.message}),n.dirty());else if(o.kind==="ulid")m6.test(e.data)||(i=this._getOrReturnCtx(e,i),ne(i,{validation:"ulid",code:te.invalid_string,message:o.message}),n.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),ne(i,{validation:"url",code:te.invalid_string,message:o.message}),n.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),ne(i,{validation:"regex",code:te.invalid_string,message:o.message}),n.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(e,i),ne(i,{code:te.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),n.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(i=this._getOrReturnCtx(e,i),ne(i,{code:te.invalid_string,validation:{startsWith:o.value},message:o.message}),n.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(i=this._getOrReturnCtx(e,i),ne(i,{code:te.invalid_string,validation:{endsWith:o.value},message:o.message}),n.dirty()):o.kind==="datetime"?UM(o).test(e.data)||(i=this._getOrReturnCtx(e,i),ne(i,{code:te.invalid_string,validation:"datetime",message:o.message}),n.dirty()):o.kind==="date"?_6.test(e.data)||(i=this._getOrReturnCtx(e,i),ne(i,{code:te.invalid_string,validation:"date",message:o.message}),n.dirty()):o.kind==="time"?R6(o).test(e.data)||(i=this._getOrReturnCtx(e,i),ne(i,{code:te.invalid_string,validation:"time",message:o.message}),n.dirty()):o.kind==="duration"?h6.test(e.data)||(i=this._getOrReturnCtx(e,i),ne(i,{validation:"duration",code:te.invalid_string,message:o.message}),n.dirty()):o.kind==="ip"?k6(e.data,o.version)||(i=this._getOrReturnCtx(e,i),ne(i,{validation:"ip",code:te.invalid_string,message:o.message}),n.dirty()):o.kind==="jwt"?A6(e.data,o.alg)||(i=this._getOrReturnCtx(e,i),ne(i,{validation:"jwt",code:te.invalid_string,message:o.message}),n.dirty()):o.kind==="cidr"?P6(e.data,o.version)||(i=this._getOrReturnCtx(e,i),ne(i,{validation:"cidr",code:te.invalid_string,message:o.message}),n.dirty()):o.kind==="base64"?w6.test(e.data)||(i=this._getOrReturnCtx(e,i),ne(i,{validation:"base64",code:te.invalid_string,message:o.message}),n.dirty()):o.kind==="base64url"?E6.test(e.data)||(i=this._getOrReturnCtx(e,i),ne(i,{validation:"base64url",code:te.invalid_string,message:o.message}),n.dirty()):Ve.assertNever(o);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(i=>e.test(i),{validation:r,code:te.invalid_string,...fe.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...fe.errToObj(e)})}url(e){return this._addCheck({kind:"url",...fe.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...fe.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...fe.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...fe.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...fe.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...fe.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...fe.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...fe.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...fe.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...fe.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...fe.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...fe.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...fe.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...fe.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...fe.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...fe.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...fe.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...fe.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...fe.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...fe.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...fe.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...fe.errToObj(r)})}nonempty(e){return this.min(1,fe.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};xo.create=t=>new xo({checks:[],typeName:Ee.ZodString,coerce:t?.coerce??!1,...Pe(t)});function M6(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,o=Number.parseInt(t.toFixed(i).replace(".","")),s=Number.parseInt(e.toFixed(i).replace(".",""));return o%s/10**i}var ma=class t extends Ie{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==se.number){let o=this._getOrReturnCtx(e);return ne(o,{code:te.invalid_type,expected:se.number,received:o.parsedType}),Se}let n,i=new Qt;for(let o of this._def.checks)o.kind==="int"?Ve.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),ne(n,{code:te.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),ne(n,{code:te.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),ne(n,{code:te.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?M6(e.data,o.value)!==0&&(n=this._getOrReturnCtx(e,n),ne(n,{code:te.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),ne(n,{code:te.not_finite,message:o.message}),i.dirty()):Ve.assertNever(o);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,fe.toString(r))}gt(e,r){return this.setLimit("min",e,!1,fe.toString(r))}lte(e,r){return this.setLimit("max",e,!0,fe.toString(r))}lt(e,r){return this.setLimit("max",e,!1,fe.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:fe.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:fe.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:fe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:fe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:fe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:fe.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:fe.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:fe.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:fe.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:fe.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Ve.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};ma.create=t=>new ma({checks:[],typeName:Ee.ZodNumber,coerce:t?.coerce||!1,...Pe(t)});var fa=class t extends Ie{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==se.bigint)return this._getInvalidInput(e);let n,i=new Qt;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),ne(n,{code:te.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),ne(n,{code:te.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),ne(n,{code:te.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):Ve.assertNever(o);return{status:i.value,value:e.data}}_getInvalidInput(e){let r=this._getOrReturnCtx(e);return ne(r,{code:te.invalid_type,expected:se.bigint,received:r.parsedType}),Se}gte(e,r){return this.setLimit("min",e,!0,fe.toString(r))}gt(e,r){return this.setLimit("min",e,!1,fe.toString(r))}lte(e,r){return this.setLimit("max",e,!0,fe.toString(r))}lt(e,r){return this.setLimit("max",e,!1,fe.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:fe.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:fe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:fe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:fe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:fe.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:fe.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};fa.create=t=>new fa({checks:[],typeName:Ee.ZodBigInt,coerce:t?.coerce??!1,...Pe(t)});var da=class extends Ie{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==se.boolean){let n=this._getOrReturnCtx(e);return ne(n,{code:te.invalid_type,expected:se.boolean,received:n.parsedType}),Se}return or(e.data)}};da.create=t=>new da({typeName:Ee.ZodBoolean,coerce:t?.coerce||!1,...Pe(t)});var ga=class t extends Ie{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==se.date){let o=this._getOrReturnCtx(e);return ne(o,{code:te.invalid_type,expected:se.date,received:o.parsedType}),Se}if(Number.isNaN(e.data.getTime())){let o=this._getOrReturnCtx(e);return ne(o,{code:te.invalid_date}),Se}let n=new Qt,i;for(let o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(i=this._getOrReturnCtx(e,i),ne(i,{code:te.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),n.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(i=this._getOrReturnCtx(e,i),ne(i,{code:te.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),n.dirty()):Ve.assertNever(o);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:fe.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:fe.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};ga.create=t=>new ga({checks:[],coerce:t?.coerce||!1,typeName:Ee.ZodDate,...Pe(t)});var Ks=class extends Ie{_parse(e){if(this._getType(e)!==se.symbol){let n=this._getOrReturnCtx(e);return ne(n,{code:te.invalid_type,expected:se.symbol,received:n.parsedType}),Se}return or(e.data)}};Ks.create=t=>new Ks({typeName:Ee.ZodSymbol,...Pe(t)});var ha=class extends Ie{_parse(e){if(this._getType(e)!==se.undefined){let n=this._getOrReturnCtx(e);return ne(n,{code:te.invalid_type,expected:se.undefined,received:n.parsedType}),Se}return or(e.data)}};ha.create=t=>new ha({typeName:Ee.ZodUndefined,...Pe(t)});var ya=class extends Ie{_parse(e){if(this._getType(e)!==se.null){let n=this._getOrReturnCtx(e);return ne(n,{code:te.invalid_type,expected:se.null,received:n.parsedType}),Se}return or(e.data)}};ya.create=t=>new ya({typeName:Ee.ZodNull,...Pe(t)});var So=class extends Ie{constructor(){super(...arguments),this._any=!0}_parse(e){return or(e.data)}};So.create=t=>new So({typeName:Ee.ZodAny,...Pe(t)});var Ii=class extends Ie{constructor(){super(...arguments),this._unknown=!0}_parse(e){return or(e.data)}};Ii.create=t=>new Ii({typeName:Ee.ZodUnknown,...Pe(t)});var Cn=class extends Ie{_parse(e){let r=this._getOrReturnCtx(e);return ne(r,{code:te.invalid_type,expected:se.never,received:r.parsedType}),Se}};Cn.create=t=>new Cn({typeName:Ee.ZodNever,...Pe(t)});var Qs=class extends Ie{_parse(e){if(this._getType(e)!==se.undefined){let n=this._getOrReturnCtx(e);return ne(n,{code:te.invalid_type,expected:se.void,received:n.parsedType}),Se}return or(e.data)}};Qs.create=t=>new Qs({typeName:Ee.ZodVoid,...Pe(t)});var Ci=class t extends Ie{_parse(e){let{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==se.array)return ne(r,{code:te.invalid_type,expected:se.array,received:r.parsedType}),Se;if(i.exactLength!==null){let s=r.data.length>i.exactLength.value,l=r.data.length<i.exactLength.value;(s||l)&&(ne(r,{code:s?te.too_big:te.too_small,minimum:l?i.exactLength.value:void 0,maximum:s?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(ne(r,{code:te.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(ne(r,{code:te.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((s,l)=>i.type._parseAsync(new yn(r,s,r.path,l)))).then(s=>Qt.mergeArray(n,s));let o=[...r.data].map((s,l)=>i.type._parseSync(new yn(r,s,r.path,l)));return Qt.mergeArray(n,o)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:fe.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:fe.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:fe.toString(r)}})}nonempty(e){return this.min(1,e)}};Ci.create=(t,e)=>new Ci({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Ee.ZodArray,...Pe(e)});function Gs(t){if(t instanceof Lr){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=hn.create(Gs(n))}return new Lr({...t._def,shape:()=>e})}else return t instanceof Ci?new Ci({...t._def,type:Gs(t.element)}):t instanceof hn?hn.create(Gs(t.unwrap())):t instanceof ii?ii.create(Gs(t.unwrap())):t instanceof ni?ni.create(t.items.map(e=>Gs(e))):t}var Lr=class t extends Ie{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=Ve.objectKeys(e);return this._cached={shape:e,keys:r},this._cached}_parse(e){if(this._getType(e)!==se.object){let m=this._getOrReturnCtx(e);return ne(m,{code:te.invalid_type,expected:se.object,received:m.parsedType}),Se}let{status:n,ctx:i}=this._processInputParams(e),{shape:o,keys:s}=this._getCached(),l=[];if(!(this._def.catchall instanceof Cn&&this._def.unknownKeys==="strip"))for(let m in i.data)s.includes(m)||l.push(m);let u=[];for(let m of s){let d=o[m],g=i.data[m];u.push({key:{status:"valid",value:m},value:d._parse(new yn(i,g,i.path,m)),alwaysSet:m in i.data})}if(this._def.catchall instanceof Cn){let m=this._def.unknownKeys;if(m==="passthrough")for(let d of l)u.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(m==="strict")l.length>0&&(ne(i,{code:te.unrecognized_keys,keys:l}),n.dirty());else if(m!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let m=this._def.catchall;for(let d of l){let g=i.data[d];u.push({key:{status:"valid",value:d},value:m._parse(new yn(i,g,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let m=[];for(let d of u){let g=await d.key,y=await d.value;m.push({key:g,value:y,alwaysSet:d.alwaysSet})}return m}).then(m=>Qt.mergeObjectSync(n,m)):Qt.mergeObjectSync(n,u)}get shape(){return this._def.shape()}strict(e){return fe.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{let i=this._def.errorMap?.(r,n).message??n.defaultError;return r.code==="unrecognized_keys"?{message:fe.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Ee.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};for(let n of Ve.objectKeys(e))e[n]&&this.shape[n]&&(r[n]=this.shape[n]);return new t({...this._def,shape:()=>r})}omit(e){let r={};for(let n of Ve.objectKeys(this.shape))e[n]||(r[n]=this.shape[n]);return new t({...this._def,shape:()=>r})}deepPartial(){return Gs(this)}partial(e){let r={};for(let n of Ve.objectKeys(this.shape)){let i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}return new t({...this._def,shape:()=>r})}required(e){let r={};for(let n of Ve.objectKeys(this.shape))if(e&&!e[n])r[n]=this.shape[n];else{let o=this.shape[n];for(;o instanceof hn;)o=o._def.innerType;r[n]=o}return new t({...this._def,shape:()=>r})}keyof(){return HM(Ve.objectKeys(this.shape))}};Lr.create=(t,e)=>new Lr({shape:()=>t,unknownKeys:"strip",catchall:Cn.create(),typeName:Ee.ZodObject,...Pe(e)});Lr.strictCreate=(t,e)=>new Lr({shape:()=>t,unknownKeys:"strict",catchall:Cn.create(),typeName:Ee.ZodObject,...Pe(e)});Lr.lazycreate=(t,e)=>new Lr({shape:t,unknownKeys:"strip",catchall:Cn.create(),typeName:Ee.ZodObject,...Pe(e)});var Ta=class extends Ie{_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function i(o){for(let l of o)if(l.result.status==="valid")return l.result;for(let l of o)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;let s=o.map(l=>new Dr(l.ctx.common.issues));return ne(r,{code:te.invalid_union,unionErrors:s}),Se}if(r.common.async)return Promise.all(n.map(async o=>{let s={...r,common:{...r.common,issues:[]},parent:null};return{result:await o._parseAsync({data:r.data,path:r.path,parent:s}),ctx:s}})).then(i);{let o,s=[];for(let u of n){let m={...r,common:{...r.common,issues:[]},parent:null},d=u._parseSync({data:r.data,path:r.path,parent:m});if(d.status==="valid")return d;d.status==="dirty"&&!o&&(o={result:d,ctx:m}),m.common.issues.length&&s.push(m.common.issues)}if(o)return r.common.issues.push(...o.ctx.common.issues),o.result;let l=s.map(u=>new Dr(u));return ne(r,{code:te.invalid_union,unionErrors:l}),Se}}get options(){return this._def.options}};Ta.create=(t,e)=>new Ta({options:t,typeName:Ee.ZodUnion,...Pe(e)});var Fi=t=>t instanceof Sa?Fi(t.schema):t instanceof Tn?Fi(t.innerType()):t instanceof va?[t.value]:t instanceof ba?t.options:t instanceof wa?Ve.objectValues(t.enum):t instanceof Ea?Fi(t._def.innerType):t instanceof ha?[void 0]:t instanceof ya?[null]:t instanceof hn?[void 0,...Fi(t.unwrap())]:t instanceof ii?[null,...Fi(t.unwrap())]:t instanceof Ll||t instanceof Ra?Fi(t.unwrap()):t instanceof _a?Fi(t._def.innerType):[],gd=class t extends Ie{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==se.object)return ne(r,{code:te.invalid_type,expected:se.object,received:r.parsedType}),Se;let n=this.discriminator,i=r.data[n],o=this.optionsMap.get(i);return o?r.common.async?o._parseAsync({data:r.data,path:r.path,parent:r}):o._parseSync({data:r.data,path:r.path,parent:r}):(ne(r,{code:te.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Se)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let i=new Map;for(let o of r){let s=Fi(o.shape[e]);if(!s.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let l of s){if(i.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);i.set(l,o)}}return new t({typeName:Ee.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...Pe(n)})}};function zS(t,e){let r=ri(t),n=ri(e);if(t===e)return{valid:!0,data:t};if(r===se.object&&n===se.object){let i=Ve.objectKeys(e),o=Ve.objectKeys(t).filter(l=>i.indexOf(l)!==-1),s={...t,...e};for(let l of o){let u=zS(t[l],e[l]);if(!u.valid)return{valid:!1};s[l]=u.data}return{valid:!0,data:s}}else if(r===se.array&&n===se.array){if(t.length!==e.length)return{valid:!1};let i=[];for(let o=0;o<t.length;o++){let s=t[o],l=e[o],u=zS(s,l);if(!u.valid)return{valid:!1};i.push(u.data)}return{valid:!0,data:i}}else return r===se.date&&n===se.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var xa=class extends Ie{_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=(o,s)=>{if(fd(o)||fd(s))return Se;let l=zS(o.value,s.value);return l.valid?((dd(o)||dd(s))&&r.dirty(),{status:r.value,value:l.data}):(ne(n,{code:te.invalid_intersection_types}),Se)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([o,s])=>i(o,s)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};xa.create=(t,e,r)=>new xa({left:t,right:e,typeName:Ee.ZodIntersection,...Pe(r)});var ni=class t extends Ie{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==se.array)return ne(n,{code:te.invalid_type,expected:se.array,received:n.parsedType}),Se;if(n.data.length<this._def.items.length)return ne(n,{code:te.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Se;!this._def.rest&&n.data.length>this._def.items.length&&(ne(n,{code:te.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let o=[...n.data].map((s,l)=>{let u=this._def.items[l]||this._def.rest;return u?u._parse(new yn(n,s,n.path,l)):null}).filter(s=>!!s);return n.common.async?Promise.all(o).then(s=>Qt.mergeArray(r,s)):Qt.mergeArray(r,o)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};ni.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ni({items:t,typeName:Ee.ZodTuple,rest:null,...Pe(e)})};var hd=class t extends Ie{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==se.object)return ne(n,{code:te.invalid_type,expected:se.object,received:n.parsedType}),Se;let i=[],o=this._def.keyType,s=this._def.valueType;for(let l in n.data)i.push({key:o._parse(new yn(n,l,n.path,l)),value:s._parse(new yn(n,n.data[l],n.path,l)),alwaysSet:l in n.data});return n.common.async?Qt.mergeObjectAsync(r,i):Qt.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof Ie?new t({keyType:e,valueType:r,typeName:Ee.ZodRecord,...Pe(n)}):new t({keyType:xo.create(),valueType:e,typeName:Ee.ZodRecord,...Pe(r)})}},Ys=class extends Ie{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==se.map)return ne(n,{code:te.invalid_type,expected:se.map,received:n.parsedType}),Se;let i=this._def.keyType,o=this._def.valueType,s=[...n.data.entries()].map(([l,u],m)=>({key:i._parse(new yn(n,l,n.path,[m,"key"])),value:o._parse(new yn(n,u,n.path,[m,"value"]))}));if(n.common.async){let l=new Map;return Promise.resolve().then(async()=>{for(let u of s){let m=await u.key,d=await u.value;if(m.status==="aborted"||d.status==="aborted")return Se;(m.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(m.value,d.value)}return{status:r.value,value:l}})}else{let l=new Map;for(let u of s){let m=u.key,d=u.value;if(m.status==="aborted"||d.status==="aborted")return Se;(m.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(m.value,d.value)}return{status:r.value,value:l}}}};Ys.create=(t,e,r)=>new Ys({valueType:e,keyType:t,typeName:Ee.ZodMap,...Pe(r)});var Zs=class t extends Ie{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==se.set)return ne(n,{code:te.invalid_type,expected:se.set,received:n.parsedType}),Se;let i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(ne(n,{code:te.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(ne(n,{code:te.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());let o=this._def.valueType;function s(u){let m=new Set;for(let d of u){if(d.status==="aborted")return Se;d.status==="dirty"&&r.dirty(),m.add(d.value)}return{status:r.value,value:m}}let l=[...n.data.values()].map((u,m)=>o._parse(new yn(n,u,n.path,m)));return n.common.async?Promise.all(l).then(u=>s(u)):s(l)}min(e,r){return new t({...this._def,minSize:{value:e,message:fe.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:fe.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};Zs.create=(t,e)=>new Zs({valueType:t,minSize:null,maxSize:null,typeName:Ee.ZodSet,...Pe(e)});var yd=class t extends Ie{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==se.function)return ne(r,{code:te.invalid_type,expected:se.function,received:r.parsedType}),Se;function n(l,u){return Dl({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,zs(),Li].filter(m=>!!m),issueData:{code:te.invalid_arguments,argumentsError:u}})}function i(l,u){return Dl({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,zs(),Li].filter(m=>!!m),issueData:{code:te.invalid_return_type,returnTypeError:u}})}let o={errorMap:r.common.contextualErrorMap},s=r.data;if(this._def.returns instanceof vo){let l=this;return or(async function(...u){let m=new Dr([]),d=await l._def.args.parseAsync(u,o).catch(x=>{throw m.addIssue(n(u,x)),m}),g=await Reflect.apply(s,this,d);return await l._def.returns._def.type.parseAsync(g,o).catch(x=>{throw m.addIssue(i(g,x)),m})})}else{let l=this;return or(function(...u){let m=l._def.args.safeParse(u,o);if(!m.success)throw new Dr([n(u,m.error)]);let d=Reflect.apply(s,this,m.data),g=l._def.returns.safeParse(d,o);if(!g.success)throw new Dr([i(d,g.error)]);return g.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:ni.create(e).rest(Ii.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||ni.create([]).rest(Ii.create()),returns:r||Ii.create(),typeName:Ee.ZodFunction,...Pe(n)})}},Sa=class extends Ie{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};Sa.create=(t,e)=>new Sa({getter:t,typeName:Ee.ZodLazy,...Pe(e)});var va=class extends Ie{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return ne(r,{received:r.data,code:te.invalid_literal,expected:this._def.value}),Se}return{status:"valid",value:e.data}}get value(){return this._def.value}};va.create=(t,e)=>new va({value:t,typeName:Ee.ZodLiteral,...Pe(e)});function HM(t,e){return new ba({values:t,typeName:Ee.ZodEnum,...Pe(e)})}var ba=class t extends Ie{_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return ne(r,{expected:Ve.joinValues(n),received:r.parsedType,code:te.invalid_type}),Se}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let r=this._getOrReturnCtx(e),n=this._def.values;return ne(r,{received:r.data,code:te.invalid_enum_value,options:n}),Se}return or(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}};ba.create=HM;var wa=class extends Ie{_parse(e){let r=Ve.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==se.string&&n.parsedType!==se.number){let i=Ve.objectValues(r);return ne(n,{expected:Ve.joinValues(i),received:n.parsedType,code:te.invalid_type}),Se}if(this._cache||(this._cache=new Set(Ve.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let i=Ve.objectValues(r);return ne(n,{received:n.data,code:te.invalid_enum_value,options:i}),Se}return or(e.data)}get enum(){return this._def.values}};wa.create=(t,e)=>new wa({values:t,typeName:Ee.ZodNativeEnum,...Pe(e)});var vo=class extends Ie{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==se.promise&&r.common.async===!1)return ne(r,{code:te.invalid_type,expected:se.promise,received:r.parsedType}),Se;let n=r.parsedType===se.promise?r.data:Promise.resolve(r.data);return or(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}};vo.create=(t,e)=>new vo({type:t,typeName:Ee.ZodPromise,...Pe(e)});var Tn=class extends Ie{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ee.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,o={addIssue:s=>{ne(n,s),s.fatal?r.abort():r.dirty()},get path(){return n.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){let s=i.transform(n.data,o);if(n.common.async)return Promise.resolve(s).then(async l=>{if(r.value==="aborted")return Se;let u=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return u.status==="aborted"?Se:u.status==="dirty"?pa(u.value):r.value==="dirty"?pa(u.value):u});{if(r.value==="aborted")return Se;let l=this._def.schema._parseSync({data:s,path:n.path,parent:n});return l.status==="aborted"?Se:l.status==="dirty"?pa(l.value):r.value==="dirty"?pa(l.value):l}}if(i.type==="refinement"){let s=l=>{let u=i.refinement(l,o);if(n.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){let l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?Se:(l.status==="dirty"&&r.dirty(),s(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?Se:(l.status==="dirty"&&r.dirty(),s(l.value).then(()=>({status:r.value,value:l.value}))))}if(i.type==="transform")if(n.common.async===!1){let s=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!To(s))return Se;let l=i.transform(s.value,o);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(s=>To(s)?Promise.resolve(i.transform(s.value,o)).then(l=>({status:r.value,value:l})):Se);Ve.assertNever(i)}};Tn.create=(t,e,r)=>new Tn({schema:t,typeName:Ee.ZodEffects,effect:e,...Pe(r)});Tn.createWithPreprocess=(t,e,r)=>new Tn({schema:e,effect:{type:"preprocess",transform:t},typeName:Ee.ZodEffects,...Pe(r)});var hn=class extends Ie{_parse(e){return this._getType(e)===se.undefined?or(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};hn.create=(t,e)=>new hn({innerType:t,typeName:Ee.ZodOptional,...Pe(e)});var ii=class extends Ie{_parse(e){return this._getType(e)===se.null?or(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};ii.create=(t,e)=>new ii({innerType:t,typeName:Ee.ZodNullable,...Pe(e)});var Ea=class extends Ie{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===se.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};Ea.create=(t,e)=>new Ea({innerType:t,typeName:Ee.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Pe(e)});var _a=class extends Ie{_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return qs(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Dr(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Dr(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};_a.create=(t,e)=>new _a({innerType:t,typeName:Ee.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Pe(e)});var Xs=class extends Ie{_parse(e){if(this._getType(e)!==se.nan){let n=this._getOrReturnCtx(e);return ne(n,{code:te.invalid_type,expected:se.nan,received:n.parsedType}),Se}return{status:"valid",value:e.data}}};Xs.create=t=>new Xs({typeName:Ee.ZodNaN,...Pe(t)});var D6=Symbol("zod_brand"),Ll=class extends Ie{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},Fl=class t extends Ie{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let o=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?Se:o.status==="dirty"?(r.dirty(),pa(o.value)):this._def.out._parseAsync({data:o.value,path:n.path,parent:n})})();{let i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?Se:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:Ee.ZodPipeline})}},Ra=class extends Ie{_parse(e){let r=this._def.innerType._parse(e),n=i=>(To(i)&&(i.value=Object.freeze(i.value)),i);return qs(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}};Ra.create=(t,e)=>new Ra({innerType:t,typeName:Ee.ZodReadonly,...Pe(e)});function CM(t,e){let r=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof r=="string"?{message:r}:r}function BM(t,e={},r){return t?So.create().superRefine((n,i)=>{let o=t(n);if(o instanceof Promise)return o.then(s=>{if(!s){let l=CM(e,n),u=l.fatal??r??!0;i.addIssue({code:"custom",...l,fatal:u})}});if(!o){let s=CM(e,n),l=s.fatal??r??!0;i.addIssue({code:"custom",...s,fatal:l})}}):So.create()}var L6={object:Lr.lazycreate},Ee;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Ee||(Ee={}));var F6=(t,e={message:`Input not instance of ${t.name}`})=>BM(r=>r instanceof t,e),VM=xo.create,WM=ma.create,I6=Xs.create,C6=fa.create,$M=da.create,O6=ga.create,N6=Ks.create,U6=ha.create,H6=ya.create,B6=So.create,V6=Ii.create,W6=Cn.create,$6=Qs.create,j6=Ci.create,z6=Lr.create,q6=Lr.strictCreate,G6=Ta.create,K6=gd.create,Q6=xa.create,Y6=ni.create,Z6=hd.create,X6=Ys.create,J6=Zs.create,e5=yd.create,t5=Sa.create,r5=va.create,n5=ba.create,i5=wa.create,o5=vo.create,a5=Tn.create,s5=hn.create,c5=ii.create,l5=Tn.createWithPreprocess,u5=Fl.create,p5=()=>VM().optional(),m5=()=>WM().optional(),f5=()=>$M().optional(),d5={string:t=>xo.create({...t,coerce:!0}),number:t=>ma.create({...t,coerce:!0}),boolean:t=>da.create({...t,coerce:!0}),bigint:t=>fa.create({...t,coerce:!0}),date:t=>ga.create({...t,coerce:!0})};var g5=Se;function jM(t){let e=t.operands.map(qS).join(" ");return`(#${t.operator} ${e})`}function qS(t){return t.type==="capture"?`@${t.name}`:t.value}function zM(t,e){return e.errors.filter(r=>!(r.code==="invalid_type"&&r.path.length===2&&(r.path[1]==="name"||r.path[1]==="value"))).map(r=>h5(t,r))}function h5(t,e){if(e.path.length===0)return e.code==="too_small"?"Too few arguments":e.code==="too_big"?"Too many arguments":e.message;let r=e.message;e.code==="invalid_literal"&&e.path[1]==="type"&&(r=e.expected==="capture"?"Capture names must be prefixed with @":"Expected string, but received capture");let n=e.path[0],i=qS(t[n]);return`Error on argument ${n} (\`${i}\`): ${r}`}var St=class{allowMissingNode(){return!1}createPredicate(e){let r=this.schema.safeParse(e);return r.success?{success:!0,predicate:n=>{try{let i=this.constructAcceptArgs(r.data,n);return this.run(...i)}catch(i){if(i instanceof Td&&this.allowMissingNode())return!0;throw i}}}:{success:!1,errors:zM(e,r.error)}}constructAcceptArgs(e,r){return e.map(n=>{if(n.type==="capture"){let i=r.captures.find(o=>o.name===n.name);if(i==null)throw new Td(n.name);return i}else return n.value})}},Td=class extends Error{constructor(e){super(`Could not find capture ${e}`)}};function GS(t,e){if(t.parent==null)throw Error("Node has no parent");let r=t.parent.walk(),n=r.gotoFirstChild(),i=!0;for(;n;){if(r.currentFieldName===e){if(r.currentNode.id===t.id)return i;i=!i}n=r.gotoNextSibling()}throw Error(`Node not found in parent for field: ${e}`)}var KS=Le.object({type:Le.literal("string"),value:Le.string()}),me={node:Le.object({type:Le.literal("capture"),name:Le.string()}),string:KS,integer:KS.transform((t,e)=>{let r=parseInt(t.value);return isNaN(r)?(e.addIssue({code:Le.ZodIssueCode.custom,message:"Expected an integer"}),Le.NEVER):{type:"integer",value:r}}),boolean:KS.transform((t,e)=>t.value==="true"?{type:"boolean",value:!0}:t.value==="false"?{type:"boolean",value:!1}:(e.addIssue({code:Le.ZodIssueCode.custom,message:"Expected true or false"}),Le.NEVER))};var QS=class extends St{constructor(){super(...arguments);this.name="even?";this.schema=Le.tuple([me.node,me.string])}run({node:r},n){return GS(r,n)}},YS=class extends St{constructor(){super(...arguments);this.name="odd?";this.schema=Le.tuple([me.node,me.string])}run({node:r},n){return!GS(r,n)}},ZS=class extends St{constructor(){super(...arguments);this.name="text?";this.schema=Le.tuple([me.node,me.string]).rest(me.string)}run({document:r,range:n},...i){return i.includes(r.getText(n))}},XS=class extends St{constructor(){super(...arguments);this.name="type?";this.schema=Le.tuple([me.node,me.string]).rest(me.string)}run({node:r},...n){return n.includes(r.type)}},JS=class extends St{constructor(){super(...arguments);this.name="not-type?";this.schema=Le.tuple([me.node,me.string]).rest(me.string)}run({node:r},...n){return!n.includes(r.type)}},ev=class extends St{constructor(){super(...arguments);this.name="not-parent-type?";this.schema=Le.tuple([me.node,me.string]).rest(me.string)}run({node:r},...n){return r.parent==null||!n.includes(r.parent.type)}},tv=class extends St{constructor(){super(...arguments);this.name="is-nth-child?";this.schema=Le.tuple([me.node,me.integer])}run({node:r},n){return r.parent?.children.findIndex(i=>i.id===r.id)===n}},rv=class extends St{constructor(){super(...arguments);this.name="has-multiple-children-of-type?";this.schema=Le.tuple([me.node,me.string])}run({node:r},n){return r.children.filter(o=>o.type===n).length>1}},nv=class extends St{constructor(){super(...arguments);this.name="child-range!";this.schema=Le.union([Le.tuple([me.node,me.integer]),Le.tuple([me.node,me.integer,me.integer]),Le.tuple([me.node,me.integer,me.integer,me.boolean]),Le.tuple([me.node,me.integer,me.integer,me.boolean,me.boolean])])}run(r,n,i,o,s){let{node:{children:l}}=r;n=n<0?l.length+n:n,i=i??-1,i=i<0?l.length+i:i;let u=l[n],m=l[i];return r.range=Gr(o?u.endPosition:u.startPosition,s?m.startPosition:m.endPosition),!0}},iv=class extends St{constructor(){super(...arguments);this.name="character-range!";this.schema=Le.union([Le.tuple([me.node,me.integer]),Le.tuple([me.node,me.integer,me.integer])])}run(r,n,i){return r.range=new Y(r.range.start.translate(void 0,n),r.range.end.translate(void 0,i??0)),!0}},ov=class extends St{constructor(){super(...arguments);this.name="shrink-to-match!";this.schema=Le.tuple([me.node,me.string])}run(r,n){let{document:i,range:o}=r,l=i.getText(o).match(new RegExp(n,"ds"));if(l?.index==null)throw Error(`No match for pattern '${n}'`);let[u,m]=l.indices?.groups?.keep??l.indices[0],d=i.offsetAt(o.start);return r.range=new Y(i.positionAt(d+u),i.positionAt(d+m)),!0}},av=class extends St{constructor(){super(...arguments);this.name="grow-to-named-siblings!";this.schema=Le.union([Le.tuple([me.node]),Le.tuple([me.node,me.string])])}run(r,n){let{node:i,range:o,document:s}=r;if(i.parent==null)throw Error("Node has no parent");let{children:l}=i.parent,u=l.findIndex(d=>d.id===i.id),m=null;if(u===-1)throw Error("Node not found in parent");for(let d=u+1;d<l.length;++d){let g=l[d];if(!g.isNamed)break;let y=Gr(g.startPosition,g.endPosition);if(n!=null&&n===s.getText(y))break;m=y.end}return m!=null&&(r.range=new Y(o.start,m)),!0}},sv=class extends St{constructor(){super(...arguments);this.name="trim-end!";this.schema=Le.tuple([me.node])}run(r){let{document:n,range:i}=r,o=n.getText(i),s=o.length-o.trimEnd().length;return s>0&&(r.range=new Y(i.start,lk(n,i.end,-s))),!0}},cv=class extends St{constructor(){super(...arguments);this.name="document-range!";this.schema=Le.tuple([me.node]).rest(me.node)}run(...r){for(let n of r)n.range=n.document.range;return!0}},lv=class extends St{constructor(){super(...arguments);this.name="allow-multiple!";this.schema=Le.tuple([me.node]).rest(me.node)}allowMissingNode(){return!0}run(...r){for(let n of r)n.allowMultiple=!0;return!0}},uv=class extends St{constructor(){super(...arguments);this.name="log!";this.schema=Le.tuple([me.node])}run(r){return console.log(`#log!: ${r.name}@${r.range}`),!0}},pv=class extends St{constructor(){super(...arguments);this.name="insertion-delimiter!";this.schema=Le.tuple([me.node,me.string])}run(r,n){return r.insertionDelimiter=n,!0}},mv=class extends St{constructor(){super(...arguments);this.name="single-or-multi-line-delimiter!";this.schema=Le.tuple([me.node,me.node,me.string,me.string])}run(r,n,i,o){return r.insertionDelimiter=n.range.isSingleLine?i:o,!0}},fv=class extends St{constructor(){super(...arguments);this.name="empty-single-multi-delimiter!";this.schema=Le.tuple([me.node,me.node,me.string,me.string,me.string])}run(r,n,i,o,s){let l=!n.node.children.some(u=>u.isNamed);return r.insertionDelimiter=l?i:n.range.isSingleLine?o:s,!0}},qM=[new uv,new QS,new YS,new ZS,new XS,new JS,new sv,new cv,new ev,new tv,new nv,new iv,new ov,new av,new lv,new pv,new mv,new fv,new rv];function GM(t){let e=[],r=[];return t.forEach((n,i)=>{let o=[];n.forEach((s,l)=>{let u=qM.find(({name:d})=>d===s.operator);if(u==null){e.push({patternIdx:i,predicateIdx:l,error:`Unknown predicate operator "${s.operator}"`});return}let m=u.createPredicate(s.operands);if(!m.success){e.push(...m.errors.map(d=>({patternIdx:i,predicateIdx:l,error:d})));return}o.push(m.predicate)}),r.push(o)}),{errors:e,predicates:r}}function KM(t,e){let{errors:r,predicates:n}=GM(e.predicates);if(r.length>0){for(let i of r){let o=[`language ${t}`,`pattern ${i.patternIdx}`,`predicate \`${jM(e.predicates[i.patternIdx][i.predicateIdx])}\``].join(", ");mt(k().messages,"TreeSitterQuery.parsePredicates",`Error parsing predicate for ${o}: ${i.error}`)}if(k().runMode==="test")throw new Error("Invalid predicates")}return n}function dv(t){return{row:t.line,column:t.character}}function QM(t){return t.map(e=>({...e,range:gv(e),name:y5(e)}))}function gv(t){return t.name.endsWith(".startOf")?t.range.start.toEmptyRange():t.name.endsWith(".endOf")?t.range.end.toEmptyRange():t.range}function y5(t){return t.name.endsWith(".startOf")?t.name.slice(0,-8):t.name.endsWith(".endOf")?t.name.slice(0,-6):t.name}var hv=class{constructor(){this.documentVersion=-1;this.documentUri="";this.documentLanguageId="";this.matches=[]}clear(){this.documentUri="",this.documentVersion=-1,this.documentLanguageId="",this.startPosition=void 0,this.endPosition=void 0,this.matches=[]}isValid(e,r,n){return this.documentVersion===e.version&&this.documentUri===e.uri.toString()&&this.documentLanguageId===e.languageId&&YM(this.startPosition,r)&&YM(this.endPosition,n)}update(e,r,n,i){this.documentVersion=e.version,this.documentUri=e.uri.toString(),this.documentLanguageId=e.languageId,this.startPosition=r,this.endPosition=n,this.matches=i}get(){return this.matches}};function YM(t,e){return t==null||e==null?t===e:t.isEqual(e)}var ka=new hv;var Il=class t{constructor(e,r,n){this.treeSitter=e;this.query=r;this.patternPredicates=n;this.shouldCheckCaptures=k().runMode!=="production"}static create(e,r,n){let i=KM(e,n);return new t(r,n,i)}hasCapture(e){return this.query.captureNames.some(r=>WS(r)===e)}matches(e,r,n){if(!ka.isValid(e,r,n)){let i=this.getAllMatches(e,r,n);ka.update(e,r,n,i)}return ka.get()}getAllMatches(e,r,n){let i=this.getTreeMatches(e,r,n),o=[];for(let s of i){let l=this.createMutableQueryMatch(e,s);this.runPredicates(l)&&o.push(this.createQueryMatch(l))}return o}getTreeMatches(e,r,n){let{rootNode:i}=this.treeSitter.getTree(e);return this.query.matches(i,{startPosition:r!=null?dv(r):void 0,endPosition:n!=null?dv(n):void 0})}createMutableQueryMatch(e,r){return{patternIdx:r.pattern,captures:r.captures.map(({name:n,node:i})=>({name:n,node:i,document:e,range:RM(i),insertionDelimiter:void 0,allowMultiple:!1,hasError:()=>LM(i)}))}}runPredicates(e){for(let r of this.patternPredicates[e.patternIdx])if(!r(e))return!1;return!0}createQueryMatch(e){let r=[],n=new Map;for(let i of e.captures){let o=WS(i.name),s=gv(i),l=n.get(o);if(l==null){let u=[i],m={...i,name:o,range:s,hasError:()=>u.some(d=>d.hasError())};r.push(m),n.set(o,{acc:m,captures:u})}else l.acc.range=l.acc.range.union(s),l.acc.allowMultiple=l.acc.allowMultiple||i.allowMultiple,l.acc.insertionDelimiter=l.acc.insertionDelimiter??i.insertionDelimiter,l.captures.push(i)}return this.shouldCheckCaptures&&this.checkCaptures(Array.from(n.values())),{captures:r}}checkCaptures(e){for(let r of e)if(!DM(QM(r.captures),k().messages)&&k().runMode==="test")throw new Error("Invalid captures")}};var XM="_",T5=[XM,"interior",...ta],x5=["prefix","leading","trailing"],S5=["startOf","endOf","start.startOf","start.endOf","end.startOf","end.endOf"],v5=["domain","removal","iteration","iteration.domain"],ZM=["start","end","start.startOf","start.endOf","end.startOf","end.endOf"],Aa=new Set;for(let t of T5){if(t!==XM){Aa.add(t);for(let e of ZM)Aa.add(`${t}.${e}`)}for(let e of x5){Aa.add(`${t}.${e}`);for(let r of S5)Aa.add(`${t}.${e}.${r}`)}for(let e of v5){Aa.add(`${t}.${e}`);for(let r of ZM)Aa.add(`${t}.${e}.${r}`)}}var b5=/^(?!;;).*(?<!"\w*)@([\w.]*)/gm;function JM(t,e){let r=e.matchAll(b5),n=[];for(let o of r){let s=o[1];if(!(s.length>1&&!s.includes(".")&&s.startsWith("_"))&&!Aa.has(s)){let l=o.input.slice(0,o.index).split(`
`).length;n.push(`${t}(${l}) invalid capture '@${s}'.`)}}if(n.length===0)return;let i=n.join(`
`);if(mt(k().messages,"validateQueryCaptures.invalidCaptureName",i),k().runMode==="test")throw new Error(i)}var xd=class t{constructor(e){this.query=e}static async create(e,r,n,i){let o=await w5(e,r,`${i}.scm`);if(o==null||!await n.loadLanguage(i))return;let s=n.createQuery(i,o);if(s==null)throw Error(`Could not create Tree sitter query for language ${i}`);let l=Il.create(i,n,s);return new t(l)}getScopeHandler(e){if(this.query.hasCapture(e.type))return new zf(this.query,e)}getCapturesMap(e){let r=this.query.matches(e),n={};for(let i of r)for(let o of i.captures){let s=o.name;n[s]==null&&(n[s]=[]),n[s].push(o)}return n}};async function w5(t,e,r){let n={[r]:null},i=t.runMode!=="production";for(;Object.values(n).some(o=>o==null);)for(let[o,s]of Object.entries(n)){if(s!=null)continue;let l=await e.readQuery(o);if(l==null){if(o===r)return;if(mt(t.messages,"LanguageDefinition.readQueryFileAndImports.queryNotFound",`Could not find imported query file ${o}`),t.runMode==="test")throw new Error("Invalid import statement");l=""}i&&JM(o,l),n[o]=l,ln(l,/^[^\S\r\n]*;;?[^\S\r\n]*(?:import|include)[^\S\r\n]+['"]?([\w|/\\.]+)['"]?[^\S\r\n]*$/gm,u=>{let m=u[1];i&&E5(t,o,m,u[0]),n[m]=n[m]??null})}return Object.values(n).join(`
`)}function E5(t,e,r,n){let i=!1;/[/\\]/g.test(r)&&(mt(t.messages,"LanguageDefinition.readQueryFileAndImports.invalidImport",`Invalid import statement in ${e}: "${n}". Relative import paths not supported`),i=!0);let o=`;; import ${r}`;if(n!==o&&(mt(t.messages,"LanguageDefinition.readQueryFileAndImports.malformedImport",`Malformed import statement in ${e}: "${n}". Import statements must be of the form "${o}"`),i=!0),i&&t.runMode==="test")throw new Error("Invalid import statement")}var eD=Symbol("LANGUAGE_UNDEFINED"),Sd=class t{constructor(e,r,n){this.ide=e;this.treeSitter=r;this.treeSitterQueryProvider=n;this.notifier=new tr;this.languageDefinitions=new Map;this.disposables=[];this.onDidChangeDefinition=this.notifier.registerListener;let i=e.runMode==="test";e.onDidOpenTextDocument(o=>{i&&ka.clear(),this.loadLanguage(o.languageId)}),e.onDidChangeVisibleTextEditors(o=>{o.forEach(({document:s})=>this.loadLanguage(s.languageId))}),this.disposables.push(n.onChanges(()=>this.reloadLanguageDefinitions()))}static async create(e,r,n){let i=new t(e,r,n);return await i.loadAllLanguages(),i}async loadAllLanguages(){let e=this.ide.visibleTextEditors.map(({document:r})=>r.languageId);try{await Promise.all(e.map(r=>this.loadLanguage(r)))}catch(r){if(mt(this.ide.messages,"Failed to load language definitions",Dn(r)),this.ide.runMode==="test")throw r}}async loadLanguage(e){if(this.languageDefinitions.has(e))return;let r=await xd.create(this.ide,this.treeSitterQueryProvider,this.treeSitter,e)??eD;this.languageDefinitions.set(e,r)}async reloadLanguageDefinitions(){this.languageDefinitions.clear(),await this.loadAllLanguages(),ka.clear(),this.notifier.notifyListeners()}get(e){let r=this.languageDefinitions.get(e);if(r==null)throw new Error("Expected language definition entry is missing for languageId "+e);return r===eD?void 0:r}getNodeAtLocation(e,r){return this.treeSitter.getNodeAtLocation(e,r)}dispose(){this.disposables.forEach(e=>e.dispose())}};var vd=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}get nestedStages(){return this.nestedStages_==null&&(this.nestedStages_=this.modifier.modifiers.map(this.modifierStageFactory.create)),this.nestedStages_}run(e,r){for(let n of this.nestedStages)try{return n.run(e,r)}catch{continue}throw new Error("No modifier could be applied")}};var Js=class{constructor(e,r){this.modifierStageFactory=e;this.nestedModifier=r;this.suppressErrors=!1}run(e,r){if(this.shouldModify(e))try{return this.nestedStage.run(e,r).map(n=>n.withThatTarget(e))}catch(n){if(!this.suppressErrors)throw n}return[e]}get nestedStage(){return this.nestedStage_==null&&(this.nestedStage_=this.modifierStageFactory.create(this.nestedModifier)),this.nestedStage_}},bo=class extends Js{constructor(e,r){super(e,r.modifier)}shouldModify(e){return!e.hasExplicitScopeType}},bd=class extends Js{constructor(r,n,i){super(r,n);this.modificationCondition=i}shouldModify(r){return this.modificationCondition(r)}},ec=class extends Js{shouldModify(e){return!e.hasExplicitScopeType&&!e.isImplicit}},tc=class extends Js{constructor(r){super(r,{type:"containingScope",scopeType:{type:"token"}});this.suppressErrors=!0}shouldModify(r){return!r.hasExplicitScopeType&&!r.hasExplicitRange&&r.contentRange.isEmpty}};function tD(t,e){return Object.getPrototypeOf(t).constructor===Object.getPrototypeOf(e).constructor}function rc(t,e,r,n,i){if(e.editor!==r.editor)throw Error("Continuous targets must be in the same editor");if(n&&i&&tD(e,r)){let o=e.maybeCreateRichRangeTarget(t,r);if(o!=null)return o}return e.textualType==="line"&&r.textualType==="line"?new gr({editor:e.editor,isReversed:t,contentRange:Ms(e,r,n,i)}):new Nt({editor:e.editor,isReversed:t,hasExplicitRange:!0,contentRange:Ps(e,r,n,i),textualType:n&&i&&e.textualType==="token"&&r.textualType==="token"?"token":"character"})}function wd(t,e,r){if(e===r)return e.getTargets(t);let n=e.getTargets(t),i=r.getTargets(t);if(n.length!==1||i.length!==1)throw Error("Scope range targets must be single-target");let[o]=n,[s]=i,l=s.contentRange.start.isAfterOrEqual(o.contentRange.start),[u,m]=l?[o,s]:[s,o];return[rc(t,u,m,!0,!0)]}function Ed(t,e,r,n){let i=Array.from(t.generateScopes(e,r,"forward",{containment:"required",allowAdjacentScopes:!0,skipAncestorScopes:!0}));switch(i.length){case 0:return;case 1:return i[0];case 2:{let[o,s]=i;return n==="forward"?s:n==="backward"||(t.isPreferredOver?.(o,s)??!1)?o:s}default:throw new Error("Expected no more than 2 scope candidates")}}function _d(t,e,r=0){let{isReversed:n,editor:i,contentRange:{start:o,end:s}}=t;if(s.isEqual(o)){let m=Ed(e,i,o);return m==null||(r>0&&(m=yv(e,i,m.domain.end,"forward",r,!0)),m==null)?void 0:m.getTargets(n)}let l=yv(e,i,o,"forward",r);if(l==null)return;if(l.domain.contains(s))return l.getTargets(n);let u=yv(e,i,s,"backward",r);if(u!=null)return wd(n,l,u)}function yv(t,e,r,n,i,o=!1){let s=0;for(let l of t.generateScopes(e,r,n,{containment:"required",allowAdjacentScopes:o})){if(s===i)return l;s+=1}}var nc=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e,r){let{scopeType:n,ancestorIndex:i=0}=this.modifier,o=this.scopeHandlerFactory.maybeCreate(n,e.editor.document.languageId);if(o==null)return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e,r);let s=_d(e,o,i);if(s==null)throw new xt(n.type);return s}};var Rd=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e,r){let{scopeType:n}=this.modifier,{editor:i,isReversed:o}=e,s=this.scopeHandlerFactory.maybeCreate(n,i.document.languageId);if(s==null)return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e,r);let l;if(e.hasExplicitRange&&(l=rD(s,i,e.contentRange),l.length===1&&l[0].domain.contains(e.contentRange)&&!e.hasExplicitScopeType&&!r.multipleTargets&&(l=void 0)),l==null&&(l=this.getDefaultIterationRange(s,this.scopeHandlerFactory,e).flatMap(u=>rD(s,i,u))),l.length===0)throw new xt(n.type);return l.flatMap(u=>u.getTargets(o))}getDefaultIterationRange(e,r,n){let i=r.maybeCreate(e.iterationScopeType,n.editor.document.languageId);if(i==null)throw Error("Could not find iteration scope handler");let o=_d(n,i);if(o==null)throw new xt(`iteration scope for ${e.scopeType.type}`);return o.map(s=>s.contentRange)}};function rD(t,e,{start:r,end:n}){return Array.from(t.generateScopes(e,r,"forward",{distalPosition:n,skipAncestorScopes:!0,allowAdjacentScopes:t.includeAdjacentInEvery}))}var kd=class{constructor(e){this.modifier=e}run(e){return e.contentText.trim()!==""?[e]:[]}},Ad=class{constructor(e){this.modifier=e}run(e){return e.contentText.trim()===""?[e]:[]}};var Pd=class{run(){return gf(k()).map(e=>new mf({editor:e.editor,isReversed:e.selection.isReversed,contentRange:e.selection}))}};var Md=class{constructor(e,r){this.modifierStageFactory=e;this.markStageFactory=r}run(e,{actionFinalStages:r=[],noAutomaticTokenExpansion:n=!1}={}){return new Tv(this.modifierStageFactory,this.markStageFactory,e,{actionFinalStages:r,noAutomaticTokenExpansion:n}).run()}},Tv=class{constructor(e,r,n,i){this.modifierStageFactory=e;this.markStageFactory=r;this.target=n;this.opts=i}run(){return R5(this.processTarget(this.target))}processTarget(e){switch(e.type){case"list":return e.elements.flatMap(r=>this.processTarget(r));case"range":return this.processRangeTarget(e);case"primitive":case"implicit":return this.processPrimitiveTarget(e)}}processRangeTarget(e){let r=this.processPrimitiveTarget(e.anchor),n=this.processPrimitiveTarget(e.active);return Dt(r,n).flatMap(([i,o])=>{if(i==null||o==null)throw new Error("AnchorTargets and activeTargets lengths don't match");switch(e.rangeType){case"continuous":return this.processContinuousRangeTarget(i,o,e);case"vertical":return k5(i,o,e.excludeAnchor,e.excludeActive)}})}processContinuousRangeTarget(e,r,{excludeAnchor:n,excludeActive:i,exclusionScopeType:o}){if(o==null)return[wo(e,r,n,i)];let s=vv(e,r);return[wo(n?nD(this.modifierStageFactory,e,o,s?"backward":"forward"):e,i?nD(this.modifierStageFactory,r,o,s?"forward":"backward"):r,!1,!1)]}processPrimitiveTarget(e){let r,n,i=!1;e.type==="implicit"?(r=new Pd,n=[]):(r=this.markStageFactory.create(e.mark),n=xv(this.modifierStageFactory,e.modifiers),i=_5(e));let o=r.run(),[s,l]=this.getPreAndPostStages(i),u=[...s,...n,...this.opts.actionFinalStages,...l];return Sv(u,o)}getPreAndPostStages(e){if(this.opts.noAutomaticTokenExpansion)return[[],[]];let r=new tc(this.modifierStageFactory);return e?[[r],[]]:[[],[r]]}};function _5(t){return t.modifiers.length>0&&t.modifiers.every(({type:e})=>e==="startOf"||e==="endOf")}function xv(t,e){return e.map(t.create).reverse()}function Sv(t,e){return t.forEach(r=>{let n={multipleTargets:e.length>1};e=e.flatMap(i=>r.run(i,n))}),e}function nD(t,e,r,n){let i={multipleTargets:!1};return t.create({type:"relativeScope",scopeType:r,direction:n,length:1,offset:1}).run(e,i)[0]}function vv(t,e){return t.contentRange.start.isAfter(e.contentRange.start)?!0:t.contentRange.start.isBefore(e.contentRange.start)?!1:t.contentRange.end.isAfter(e.contentRange.end)}function R5(t){return mA(t,(e,r)=>e.isEqual(r),e=>e.contentRange.concise())}function iD(t,e){if(t.editor!==e.editor)throw new Error("Cannot form range between targets in different editors")}function wo(t,e,r=!1,n=!1){iD(t,e);let i=vv(t,e);return rc(i,i?e:t,i?t:e,!(i?n:r),!(i?r:n))}function k5(t,e,r,n){iD(t,e);let i=vv(t,e),o=i?-1:1,l=(i?t.contentRange.start:t.contentRange.end).line+(r?o:0),m=(i?e.contentRange.start:e.contentRange.end).line-(n?o:0),d=[];for(let g=l;;g+=o){let y=new Y(g,t.contentRange.start.character,g,t.contentRange.end.character);if(d.push(new Ze({editor:t.editor,isReversed:t.isReversed,contentRange:y,insertionDelimiter:t.insertionDelimiter})),g===m)return d}}var Dd=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=this.getModifierStages(),n=Sv(r,[e]),i=this.modifier.type==="extendThroughStartOf";return n.map(o=>new ff({editor:e.editor,isReversed:i,inputTarget:e,modifiedTarget:o,isHead:i}))}getModifierStages(){return this.modifier.modifiers!=null?xv(this.modifierStageFactory,this.modifier.modifiers):[new bv(this.modifierStageFactory,this.modifier)]}},bv=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e,r){let n=this.getContainingLine(e,r),i=this.getContainingPairInterior(e,r),o=i!=null?n.contentRange.intersection(i.contentRange):null;return o==null||o.isEmpty?[n]:[new Ze({editor:e.editor,isReversed:e.isReversed,contentRange:o})]}getContainingPairInterior(e,r){try{return this.getContaining(e,r,{type:"surroundingPairInterior",delimiter:"any"})[0]}catch(n){if(n instanceof xt)return;throw n}}getContainingLine(e,r){return this.getContaining(e,r,{type:"line"})[0]}getContaining(e,r,n){return this.modifierStageFactory.create({type:"containingScope",scopeType:n}).run(e,r)}};var oi=class extends Error{constructor(e,r){let n=r!=null?` #${r+1}`:"";super(`Scope '${e.type}'${n} is out of range`),this.name="OutOfRangeError"}};function oD(t,e,r,n){return wv(t,e,r,n),e.slice(r,n+1)}function wv(t,e,r,n){if(r<0||r>=e.length)throw new oi(t,r);if(n<0||n>=e.length)throw new oi(t,n)}var ic=class{constructor(e,r,n){this.modifierStageFactory=e;this.storedTargets=r;this.modifier=n}run(e,r){let n=new tc(this.modifierStageFactory).run(e,r)[0];switch(this.modifier.type){case"everyScope":return this.handleEveryScope(n,r);case"ordinalScope":return this.handleOrdinalScope(n,r,this.modifier);case"relativeScope":return this.handleRelativeScope(n,r,this.modifier);default:throw Error(`${this.modifier.type} instance scope not supported`)}}handleEveryScope(e,r){return Array.from(Cf(this.getEveryRanges(e),([n,i])=>this.getTargetIterable(e,r,n,i,"forward")))}handleOrdinalScope(e,r,{start:n,length:i,scopeType:o}){return this.getEveryRanges(e).flatMap(([s,l])=>aD(o,this.getTargetIterable(e,r,s,l,n>=0?"forward":"backward"),n>=0?n:-(i+n),i))}handleRelativeScope(e,r,{direction:n,offset:i,length:o,scopeType:s}){return(this.storedTargets.get("instanceReference")??[e]).flatMap(u=>{let{editor:m}=u,d=n==="forward"?new Y(i===0?u.contentRange.start:u.contentRange.end,m.document.range.end):new Y(m.document.range.start,i===0?u.contentRange.end:u.contentRange.start);return aD(s,this.getTargetIterable(e,r,m,d,n),i===0?0:i-1,o)})}getEveryRanges({editor:e}){return this.storedTargets.get("instanceReference")?.map(({editor:r,contentRange:n})=>[r,n])??[[e,e.document.range]]}getTargetIterable(e,r,n,i,o){let s=Kt(gn(new RegExp(Wr(e.contentText),"g"),n,i,o),u=>new Ze({contentRange:u,editor:n,isReversed:!1,textualType:"character"})),l=A5(e);if(l!=null){let u=this.modifierStageFactory.create({type:"containingScope",scopeType:l});return Ff(Kt(s,m=>{try{let d=u.run(m,r);return d.length===1&&d[0].contentRange.isRangeEqual(m.contentRange)?d[0]:null}catch{return null}}),m=>m!=null)}return s}};function A5(t){switch(t.textualType){case"line":case"token":case"word":return{type:t.textualType};default:return null}}function aD(t,e,r,n){Array.from(Pl(r,e));let i=Array.from(Pl(n,e));if(i.length<n)throw new oi(t,r+n-1);return i}var Ld=class{constructor(e,r){this.modifierHandlerFactory=e;this.modifier=r}run(e,r){let n=e.getInterior();return n??this.modifierHandlerFactory.create({type:"containingScope",scopeType:{type:"interior",explicitScopeType:e.hasExplicitScopeType}}).run(e,r)}},Fd=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r;this.containingSurroundingPairIfNoBoundaryStage=Ev(this.modifierStageFactory)}run(e,r){return this.containingSurroundingPairIfNoBoundaryStage.run(e,r).flatMap(n=>n.getBoundary())}};function Ev(t){return new bd(t,{type:"containingScope",scopeType:{type:"surroundingPair",delimiter:"any"}},e=>e.getBoundary()==null)}var ai={type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:{type:"line"}}},_v={type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:{type:"token"}}};var Id=class extends Error{constructor(e){super(`Target has no ${e} delimiter.`),this.name="NoDelimiterError"}},Cd=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e,r){return this.modifierStageFactory.create(_v).run(e,r).map(n=>{let i=n.getLeadingDelimiterTarget();if(i==null)throw new Id("leading");return i})}},Od=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e,r){return this.modifierStageFactory.create(_v).run(e,r).map(n=>{let i=n.getTrailingDelimiterTarget();if(i==null)throw new Id("trailing");return i})}};function Nd(t,e,r,n,i){return wv(t,r,n,i),n===i?r[n]:rc(e,r[n],r[i],!0,!0)}function Ud(t,e,r,n){return t.create({type:"everyScope",scopeType:n}).run(e,r)}var Hd=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e,r){let n=Ud(this.modifierStageFactory,e,r,this.modifier.scopeType),i=this.modifier.start+(this.modifier.start<0?n.length:0),o=i+this.modifier.length-1;return this.modifier.isEvery?oD(this.modifier.scopeType,n,i,o):[Nd(this.modifier.scopeType,e.isReversed,n,i,o)]}};var Bd=class{run(e){let r={editor:e.editor,isReversed:e.isReversed,contentRange:this.getContentRange(e.contentRange)};return[e.isRaw?new mo(r):new Ze({...r,textualType:"character"})]}},Vd=class extends Bd{getContentRange(e){return e.start.toEmptyRange()}},Wd=class extends Bd{getContentRange(e){return e.end.toEmptyRange()}};var $d=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e,r){let{scopeType:n}=this.modifier,i=new nc(this.modifierStageFactory,this.scopeHandlerFactory,{type:"containingScope",scopeType:n});try{return i.run(e,r)}catch(l){if(!(l instanceof xt))throw l}let o=this.scopeHandlerFactory.create(this.modifier.scopeType,e.editor.document.languageId),s=P5(e,o);if(s==null)throw Error(`No scopes found for scope type: ${n.type}`);return s}};function P5(t,e){let r=e.generateScopes(t.editor,t.contentRange.start,"backward"),n=e.generateScopes(t.editor,t.contentRange.end,"forward"),{active:i}=t.contentSelection,o=sD(r,i),s=sD(n,i),l=o.distance<s.distance?o.scope:s.scope;return l?.getTargets(t.isReversed)}function sD(t,e){let r,n=1/0;for(let i of t){let o=Math.min(cD(e,i.domain.start),cD(e,i.domain.end));if(o<n)r=i,n=o;else break}return{scope:r,distance:n}}function cD(t,e){return Math.abs(t.line-e.line)*1e4+Math.abs(t.character-e.character)}var jd=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e,r){let n=this.modifierStageFactory.create(this.modifier.anchor),i=this.modifierStageFactory.create(this.modifier.active),o=n.run(e,r),s=i.run(e,r);if(o.length!==1||s.length!==1)throw new Error("Expected single anchor and active target");return[wo(o[0],s[0],this.modifier.excludeAnchor,this.modifier.excludeActive)]}};var zd=class{constructor(e){this.modifier=e}run(e){return[new mo({editor:e.editor,contentRange:e.contentRange,isReversed:e.isReversed})]}};var qd=class extends Error{constructor(e,r,n){super(`Requested ${e} ${n}s, but ${r} are already selected.`),this.name="TooFewScopesError"}};function lD(t,e,r,n){let i=Ud(t,F5(r),n,e.scopeType),o=L5(r.contentRange,i);return M5(e,r,i,o)}function M5(t,e,r,n){let i=t.direction==="forward",o=D5(t,e.contentRange,r,i,n),s=i?o+t.length-1:o-t.length+1,l=Math.min(o,s),u=Math.max(o,s);return[Nd(t.scopeType,e.isReversed,r,l,u)]}function D5(t,e,r,n,i){let o=t.offset===0;if(i==null){let u=n?r.findIndex(m=>m.contentRange.start.isAfter(e.start)):Ko(r,m=>m.contentRange.start.isBefore(e.start));if(u===-1)throw new oi(t.scopeType);return o?u:n?u+t.offset-1:u-t.offset+1}let s=i.start,l=i.end;if(o){let u=l-s+1;if(u>t.length)throw new qd(t.length,u,t.scopeType.type);return n?s:l}return n?l+t.offset:s-t.offset}function L5(t,e){let r=e.map((i,o)=>({index:o,intersection:i.contentRange.intersection(t)})).filter(i=>i.intersection!=null);if(t.isEmpty){if(r.length===0)return;let i=r.at(-1).index;return{start:i,end:i}}let n=r.filter(i=>!i.intersection.isEmpty).map(i=>i.index);if(n.length!==0)return{start:n[0],end:n.at(-1)}}function F5(t){return new Nt({editor:t.editor,isReversed:t.isReversed,contentRange:t.contentRange,hasExplicitRange:!1})}var Gd=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e,r){let n=this.scopeHandlerFactory.maybeCreate(this.modifier.scopeType,e.editor.document.languageId);if(n==null)return lD(this.modifierStageFactory,this.modifier,e,r);let i=Array.from(this.modifier.offset===0?I5(n,e,this.modifier):C5(n,e,this.modifier));if(i.length<this.modifier.length)throw new oi(this.modifier.scopeType,this.modifier.offset+this.modifier.length-1);let{isReversed:o}=e;return this.modifier.isEvery?i.flatMap(s=>s.getTargets(o)):wd(o,i[0],i[i.length-1])}};function I5(t,e,r){let{editor:n,contentRange:i}=e,{length:o,direction:s}=r,l=Ed(t,n,s==="forward"?i.start:i.end,s)?.domain;if(l==null)throw new xt(r.scopeType.type);return Pl(o,t.generateScopes(n,s==="forward"?l.start:l.end,s,{skipAncestorScopes:!0}))}function C5(t,e,r){let{editor:n,contentRange:i}=e,{length:o,direction:s,offset:l}=r,u=s==="forward"?i.end:i.start,m=i.isEmpty?"disallowed":"disallowedIfStrict";return zP(t.generateScopes(n,u,s,{containment:m,skipAncestorScopes:!0}),l-1,l+o-1)}var Kd=class{constructor(e){this.modifier=e}run(e){return e.editor.visibleRanges.map(r=>new Ze({editor:e.editor,isReversed:e.isReversed,contentRange:r}))}};function uD(t,...e){return r=>{let n=r,i=[],o=[...e].reverse();for(let s of o){if(n==null||(n=s(n),n==null))return null;i.push(n),n=n.parent??null}return i.reverse()[t]}}var Rv=t=>new ye(t.row,t.column),pD=(...t)=>{let e=["(","{","[","<"],r=[")","}","]",">"],n=e.concat(r),i=(s,l)=>s!=null&&l.includes(s.type),o=s=>s!=null&&!i(s,n);return(s,l)=>{let u,{start:m,end:d}=l;if(i(s.parent,t))return i(s,e)?u=s.nextNamedSibling:i(s,r)?u=s.previousNamedSibling:s.type===","?u=d.isBeforeOrEqual(Rv(s.startPosition))?s.previousNamedSibling:s.nextNamedSibling:u=s,o(u)?u:null;if(i(s,t)){let g=[...s.children],y=g.find(({startPosition:w})=>Rv(w).isAfterOrEqual(d))??null;if(o(y))return y;g.reverse();let x=g.find(({endPosition:w})=>Rv(w).isBeforeOrEqual(m))??null;if(o(x))return x}return null}};function On(...t){let e=O5(t);return r=>{for(let n of e){let i=N5(r,n);if(i!=null)return i}return null}}function O5(t){return t.map(e=>e.split(".").map(r=>new kv(r)))}function N5(t,e){let r=U5(t,e);!r&&e.length>1&&(r=H5(t,e));let n=null,i;return r!=null&&([n,i]=r),n!=null&&i!=null&&i.fields!=null&&i.fields.forEach(o=>{n=(o.isIndex?n?.namedChild(o.value):n?.childForFieldName(o.value))??null}),n}function U5(t,e){let r=null,n=t;for(let i=e.length-1;i>-1;--i){let o=e[i];if(n==null||!o.typeEquals(n)){if(o.isOptional)continue;return null}(!r||!r[1].isImportant)&&(r=[n,o]),n=n.parent}return r}function H5(t,e){let r=null,n=t;for(let i=0;i<e.length;++i){let o=e[i];if(n==null||!o.typeEquals(n)){if(o.isOptional)continue;return null}if((!r||o.isImportant)&&(r=[n,o]),i+1<e.length){let s=n.namedChildren.filter(l=>e[i+1].typeEquals(l));n=s.length===1?s[0]:null}}return r}var kv=class{constructor(e){this.anyType=!1;this.notType=!1;this.type=e.match(/^[\w*~]+/)[0],this.type==="*"?this.anyType=!0:this.type.startsWith("~")&&(this.type=this.type.slice(1),this.notType=!0),this.isImportant=e.indexOf("!")>-1,this.isOptional=e.indexOf("?")>-1,this.fields=[...e.matchAll(/(?<=\[).+?(?=\])/g)].map(r=>r[0]).map(r=>/\d+/.test(r)?{isIndex:!0,value:Number(r)}:{isIndex:!1,value:r})}typeEquals(e){return this.anyType?!0:this.notType?this.type!==e.type:this.type===e.type}};function xn(t,e=ua){return function(r,n){let i=t(n,r.selection);return i!=null?[{node:i,selection:e(r.editor,i)}]:null}}function mD(t,e=0,r=ua){return xn(uD(e,...t),r)}function Eo(...t){return xn(On(...t))}function fD(...t){return xn(pD(...t),AM())}function oc(t,e=[]){return xn(On(...t),PM(...e))}function Qd(t,e=[]){return xn(On(...t),MM(...e))}function Pa(...t){return(e,r)=>{for(let n of t){let i=n(e,r);if(i!=null)return i}return null}}function dD(t){return(e,r)=>{throw new Error(`Node type '${t}' not supported`)}}function gD(t){return Object.freeze(Object.fromEntries(Pi(t).map(e=>{let r=t[e];return Array.isArray(r)?[e,Eo(...r)]:typeof r=="string"?[e,Eo(r)]:[e,r]})))}function Av(){let t=md(["else_clause"],[],{includeUnnamedChildren:!0});return function(e,r){let n=t(e,r),i=r.parent;if(i?.type!=="else_clause"){let s=r.childForFieldName("alternative");if(s==null)return n;let{selection:l}=n;return{selection:l,context:{removalRange:new $e(l.start,VS(s.namedChild(0).startPosition))}}}let{selection:o}=n;return{selection:new $e(VS(i.child(0).startPosition),o.end),context:{}}}}function hD(t){let e=Av();return function(r,n){return n.namedChild(0).type===t?e(r,n.namedChild(0)):ua(r,n)}}var yD=["associated_type","attribute_item","const_item","empty_statement","enum_item","extern_crate_declaration","foreign_mod_item","impl_item","inner_attribute_item","let_declaration","macro_definition","macro_invocation","function_item","function_signature_item","mod_item","static_item","struct_item","trait_item","type_item","union_item","use_declaration","expression_statement"],B5=["source_file","block","declaration_list"];function V5(t){return t.parent?.type==="impl_item"&&t.parent?.childForFieldName("type")?.equals(t)?t:null}function W5(t,e){return{selection:kM(e.children[1],e.lastNamedChild),context:{leadingDelimiterRange:Gr(e.children[0].startPosition,e.children[1].startPosition)}}}function $5(t){if(t.type!=="block")return null;let{lastNamedChild:e}=t;if(e==null)return null;if(e.type==="expression_statement"){let r=e.child(0);return r.type==="return_expression"?r.child(1):null}return yD.includes(e.type)?null:e.type==="return_expression"?e.child(1):e}var j5={statement:mD([On(...B5),On(...yD)],1),condition:Pa(Eo("while_expression[condition]","if_expression[condition]"),xn(On("while_let_expression","if_let_expression"),md(["while","if","block"],[],{includeUnnamedChildren:!0})),oc(["*.match_pattern![condition]"],["if"])),type:Pa(oc(["let_declaration[type]","parameter[type]","field_declaration[type]","const_item[type]"],[":"]),xn(On("constrained_type_parameter[bounds]","where_predicate[bounds]"),W5),oc(["function_item[return_type]"],["->"]),xn(V5),Eo("struct_item","trait_item","impl_item","array_type[element]")),argumentOrParameter:fD("arguments","parameters","meta_arguments","type_parameters","ordered_field_declaration_list"),collectionKey:Pa(Qd(["field_initializer[name]","field_pattern[name]"],[":"])),name:Pa(Eo("let_declaration.identifier!","parameter.identifier!","function_item[name]","struct_item[name]","enum_item[name]","enum_variant[name]","trait_item[name]","const_item[name]","meta_item.identifier!","let_declaration[pattern]","constrained_type_parameter[left]","where_predicate[left]","field_declaration[name]"),Qd(["field_initializer[name]","field_pattern[name]"],[":"])),value:Pa(oc(["let_declaration[value]"],["="]),oc(["field_initializer[value]","field_pattern[pattern]"],[":"]),Eo("meta_item[value]","const_item[value]"),xn($5)),attribute:Qd(["mutable_specifier","attribute_item"]),branch:Pa(Eo("match_arm"),xn(On("else_clause"),hD("if_expression")),xn(On("if_expression"),Av()))},TD=gD(j5);function xD(t,e,r){let n=Cl[t];if(n==null)throw new Mp(t);let i=n[e];return i==null?dD(e):r?z5(i):i}var Cl={rust:TD};function z5(t){return(e,r)=>{let n=t(e,r);return n==null?null:(n=n.flatMap(i=>q5(i.node,of(e,i.selection.selection),t)),n.length>0?n:null)}}function q5(t,e,r){let n=t.parent;for(;n!=null;){let i=n.namedChildren.flatMap(o=>r(e,o)).filter(o=>o!=null);if(i.length>0)return i;n=n.parent}return[]}var Yd=class{constructor(e,r){this.languageDefinitions=e;this.modifier=r}run(e){let r=xD(e.editor.document.languageId,this.modifier.scopeType.type,this.modifier.type==="everyScope"),n=this.languageDefinitions.getNodeAtLocation(e.editor.document,e.contentRange);if(n==null)throw new xt(this.modifier.scopeType.type);let i=G5(n,r,{editor:e.editor,selection:new $e(e.contentRange.start,e.contentRange.end)});if(i==null)throw new xt(this.modifier.scopeType.type);return i.map(o=>{let{containingListDelimiter:s,leadingDelimiterRange:l,trailingDelimiterRange:u,removalRange:m}=o.context;if(m!=null&&(l!=null||u!=null))throw Error("Removal range is mutually exclusive with leading or trailing delimiter range");let{editor:d,selection:g}=o.selection;return new go({scopeTypeType:this.modifier.scopeType.type,editor:d,isReversed:e.isReversed,contentRange:g,removalRange:m,insertionDelimiter:s,leadingDelimiterRange:l,trailingDelimiterRange:u})})}};function G5(t,e,r){let n=t;for(;n!=null;){let i=e(r,n);if(i!=null)return i.map(o=>o.selection).map(o=>({selection:of(r,o.selection),context:o.context}));n=n.parent}return null}var ac=class{constructor(e,r,n){this.languageDefinitions=e;this.storedTargets=r;this.scopeHandlerFactory=n;this.create=this.create.bind(this)}create(e){switch(e.type){case"startOf":return new Vd;case"endOf":return new Wd;case"extendThroughStartOf":case"extendThroughEndOf":return new Dd(this,e);case"toRawSelection":return new zd(e);case"interiorOnly":return new Ld(this,e);case"excludeInterior":return new Fd(this,e);case"leading":return new Cd(this,e);case"trailing":return new Od(this,e);case"visible":return new Kd(e);case"containingScope":return new nc(this,this.scopeHandlerFactory,e);case"preferredScope":return new $d(this,this.scopeHandlerFactory,e);case"everyScope":return e.scopeType.type==="instance"?new ic(this,this.storedTargets,e):new Rd(this,this.scopeHandlerFactory,e);case"ordinalScope":return e.scopeType.type==="instance"?new ic(this,this.storedTargets,e):new Hd(this,e);case"relativeScope":return e.scopeType.type==="instance"?new ic(this,this.storedTargets,e):new Gd(this,this.scopeHandlerFactory,e);case"keepContentFilter":return new kd(e);case"keepEmptyFilter":return new Ad(e);case"cascading":return new vd(this,e);case"modifyIfUntyped":return new bo(this,e);case"range":return new jd(this,e);case"inferPreviousMark":throw Error(`Unexpected modifier '${e.type}'; it should have been removed during inference`);default:{let r=e,{type:n}=e;throw new Error(`Unknown modifier: ${n}`)}}}getLegacyScopeStage(e){switch(e.scopeType.type){default:return new Yd(this.languageDefinitions,e)}}};async function SD(t,e,r){let n=t.registerReplaceEditList(e.document,r.filter(o=>o.isReplace)),i=await e.edit(r);return n(),i}async function Oe({rangeUpdater:t,editor:e,selections:r,preserveCursorSelections:n,...i}){let o=Pi(r),s=o.map(m=>{let d=r[m],g=K5(d);return vD(e.document,g.selections,g.behavior)});n||s.push(vD(e.document,e.selections,1));let l=await("edits"in i?Z5(t,e,i.edits,s):bD(t,i.callback,e.document,s));return n||await e.setSelections(l.pop()),Object.fromEntries(o.map((m,d)=>[m,l[d]]))}function vD(t,e,r){return e.map(n=>Q5(t,n,n instanceof $e?!n.isReversed:!0,r))}function K5(t){return"selections"in t?t:{selections:t,behavior:1}}function Q5(t,e,r,n){return{range:e,isForward:r,expansionBehavior:{start:{type:n===1||n===3?"closed":"open"},end:{type:n===1||n===2?"closed":"open"}},offsets:{start:t.offsetAt(e.start),end:t.offsetAt(e.end)},text:t.getText(e)}}function Y5(t){return t.map(e=>e.map(({range:{start:r,end:n},isForward:i})=>i?new $e(r,n):new $e(n,r)))}async function bD(t,e,r,n){let i=t.registerRangeInfoList(r,at(n));return await e(),i(),Y5(n)}async function Z5(t,e,r,n){return await bD(t,async()=>{if(!await SD(t,e,r))throw new Error("Could not apply edits")},e.document,n)}var Zd=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e){return await Be(k(),e,"pendingModification0"),{thatSelections:at(await ct(e,async(n,i)=>{let o=i.map(({contentRange:m})=>m),s=X5(n,o),l=k().getEditableTextEditor(n),{contentRanges:u}=await Oe({rangeUpdater:this.rangeUpdater,editor:l,edits:s,selections:{contentRanges:o}});return Dt(i,u).map(([m,d])=>({editor:m.editor,selection:d.toSelection(m.isReversed)}))}))}}};function X5(t,e){let{document:r}=t,n=[];for(let i of e){let o=i.start,s=r.lineAt(o),l=s.text.slice(0,s.rangeTrimmed?.start?.character??s.range.start.character),u=s.text.slice(0,o.character).search(/\s+$/),m=u>-1?new Y(new ye(s.lineNumber,u),o):o.toEmptyRange();n.push({range:m,text:`
`+l,isReplace:!m.isEmpty})}return n}function Xd(t){return t.length<2?t:lP(t).flatMap(([e,r])=>{if(r.length<2)return r;let n=[...r];n.sort((o,s)=>o.contentRange.start.compareTo(s.contentRange.start));let i=!0;for(;i;)[n,i]=J5(n);return n})}function J5(t){if(t.length<2)return[t,!1];let e=[],r=[];return t.forEach(n=>{r.length&&!eQ(r[r.length-1],n)?(e.push(wD(r)),r=[n]):r.push(n)}),e.push(wD(r)),[e,e.length!==t.length]}function wD(t){if(t.length===1)return t[0];let e=t[0],r=t[t.length-1];return wo(e,r)}function eQ(t,e){return!!t.getRemovalRange().intersection(e.getRemovalRange())}var Ol=class{constructor(e,r){this.rangeUpdater=e;this.type=r}async decorateTargets(e,r){await Promise.all([Be(k(),e,this.decoration.sourceStyle,this.decoration.getSourceRangeCallback),Be(k(),r,this.decoration.destinationStyle)])}getEditsBringMove(e,r){let n=[],i=[],o=e.length!==r.length&&r.length===1;return e.forEach((s,l)=>{let u=r[l];if((s==null||u==null)&&!o)throw new Error("Targets must have same number of args");if(u!=null){let m;o?m=e.map((d,g)=>{let y=d.contentText,x=(u.isRaw?null:u.insertionDelimiter)??(d.isRaw?null:d.insertionDelimiter);return g>0&&x!=null?x+y:y}).join(""):m=s.contentText,i.push({edit:u.constructChangeEdit(m),editor:u.editor,originalTarget:u.target,isSource:!1})}else u=r[0];n.includes(s)||(n.push(s),this.type==="bring"&&i.push({edit:s.toDestination("to").constructChangeEdit(u.target.contentText),editor:s.editor,originalTarget:s,isSource:!0}))}),this.type==="move"&&Xd(n).forEach(s=>{i.push({edit:s.constructRemovalEdit(),editor:s.editor,originalTarget:s,isSource:!0})}),i}async performEditsAndComputeThatMark(e){return at(await Mi(e,r=>r.editor,async(r,n)=>{let i=this.type!=="bring"?n:n.filter(({isSource:x})=>!x),o=this.type==="swap"?[]:n.filter(({isSource:x})=>x),s=this.type==="swap"?n:n.filter(({isSource:x})=>!x),l=o.map(({edit:x})=>x.range),u=s.map(({edit:x})=>x.range),m=k().getEditableTextEditor(r),{sourceEditRanges:d,destinationEditRanges:g}=await Oe({rangeUpdater:this.rangeUpdater,editor:m,edits:i.map(({edit:x})=>x),selections:{sourceEditRanges:l,destinationEditRanges:{selections:u,behavior:0}}}),y=[...this.getMarks(o,d),...this.getMarks(s,g)];return y.sort((x,w)=>n.findIndex(E=>E.originalTarget===x.target)-n.findIndex(E=>E.originalTarget===w.target)),y}))}getMarks(e,r){return e.map((n,i)=>{let o=r[i],s=n.edit.updateRange(o),l=n.originalTarget;return{editor:n.editor,selection:s.toSelection(l.isReversed),isSource:n.isSource,target:l}})}async decorateThatMark(e){let r=n=>fn(n,e.find(i=>i.target===n).selection);return Promise.all([Be(k(),e.filter(({isSource:n})=>n).map(({target:n})=>n),this.decoration.sourceStyle,r),Be(k(),e.filter(({isSource:n})=>!n).map(({target:n})=>n),this.decoration.destinationStyle,r)])}calculateMarksBringMove(e){return{thatMark:e.filter(({isSource:r})=>!r),sourceMark:e.filter(({isSource:r})=>r)}}};function ED(t,e){return t.length===1?Array(e.length).fill(t[0]):t}var Jd=class extends Ol{constructor(r){super(r,"bring");this.decoration={sourceStyle:"referenced",destinationStyle:"pendingModification0"};this.run=this.run.bind(this)}async run(r,n){r=ED(r,n),await this.decorateTargets(r,n.map(u=>u.target));let i=this.getEditsBringMove(r,n),o=await this.performEditsAndComputeThatMark(i),{thatMark:s,sourceMark:l}=this.calculateMarksBringMove(o);return await this.decorateThatMark(s),{thatSelections:s,sourceSelections:l}}},eg=class extends Ol{constructor(r){super(r,"move");this.decoration={sourceStyle:"pendingDelete",destinationStyle:"pendingModification0",getSourceRangeCallback:tQ};this.run=this.run.bind(this)}async run(r,n){r=ED(r,n),await this.decorateTargets(r,n.map(u=>u.target));let i=this.getEditsBringMove(r,n),o=await this.performEditsAndComputeThatMark(i),{thatMark:s,sourceMark:l}=this.calculateMarksBringMove(o);return await this.decorateThatMark(s),{thatSelections:s,sourceSelections:l}}},tg=class extends Ol{constructor(r){super(r,"swap");this.decoration={sourceStyle:"pendingModification1",destinationStyle:"pendingModification0"};this.run=this.run.bind(this)}async run(r,n){await this.decorateTargets(r,n);let i=this.getEditsSwap(r,n),o=await this.performEditsAndComputeThatMark(i);return await this.decorateThatMark(o),{thatSelections:o,sourceSelections:[]}}getEditsSwap(r,n){let i=[];return r.forEach((o,s)=>{let l=n[s];if(o==null||l==null)throw new Error("Targets must have same number of args");i.push({edit:l.toDestination("to").constructChangeEdit(o.contentText),editor:l.editor,originalTarget:l,isSource:!1}),i.push({edit:o.toDestination("to").constructChangeEdit(l.contentText),editor:o.editor,originalTarget:o,isSource:!0})}),i}};function tQ(t){return t.getRemovalHighlightRange()}var Nl=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e,r){Ar(e);let{returnValue:n}=await this.actions.getText.run(e,{showDecorations:!1}),{thatSelections:i}=await this.actions.wrapWithPairedDelimiter.run(r,n[0]+"(",")");return{thatSelections:i}}};var Ul=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){let r=kt(e),n=e.map(o=>new Ze({editor:o.editor,isReversed:o.isReversed,contentRange:o.contentRange})),{thatTargets:i}=await this.actions.remove.run(n);return i!=null&&await k().getEditableTextEditor(r).setSelections(i.map(({contentSelection:o})=>o),{focusEditor:!0}),{thatTargets:i}}};var sc=t=>new Nt({editor:t.editor,isReversed:t.selection.isReversed,contentRange:t.selection,hasExplicitRange:!0});var cc=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e,r){r.showDecorations&&await Be(k(),e,"referenced"),r.ensureSingleEditor&&kt(e),r.ensureSingleTarget&&Ar(e);let n=k().activeEditableTextEditor,i=r.setSelection?cP:ct,o=at(await i(e,(s,l)=>this.runForEditor(r,s,l)));return r.setSelection&&r.restoreSelection&&n!=null&&!n.isActive&&await n.focus(),{thatTargets:o}}async runForEditor(e,r,n){let i=k().getEditableTextEditor(r),o=r.selections,s=r.document.version,l=n.map(d=>d.contentSelection);e.setSelection&&await i.setSelections(l,{focusEditor:!0,revealRange:!1});let{originalSelections:u,targetSelections:m}=await Oe({rangeUpdater:this.rangeUpdater,editor:i,callback:()=>e.callback(i,n),preserveCursorSelections:!0,selections:{originalSelections:o,targetSelections:l}});return e.setSelection&&e.restoreSelection&&await i.setSelections(u),r.document.version===s?n:m.map(d=>sc({editor:r,selection:d}))}};var At=class{constructor(e){this.ensureSingleEditor=!1;this.ensureSingleTarget=!1;this.restoreSelection=!0;this.showDecorations=!0;this.callbackAction=new cc(e),this.run=this.run.bind(this)}async run(e,{showDecorations:r}={}){let n=k().capabilities.commands[this.command];if(n==null)throw Error(`Action ${this.command} is not supported by your ide`);let{acceptsLocation:i}=n;return this.callbackAction.run(e,{callback:(o,s)=>rQ(o,i?s.map(l=>l.contentRange):void 0,this.command),setSelection:!i,ensureSingleEditor:this.ensureSingleEditor,ensureSingleTarget:this.ensureSingleTarget,restoreSelection:this.restoreSelection,showDecorations:r??this.showDecorations})}},rg=class extends At{constructor(){super(...arguments);this.command="clipboardCopy";this.ensureSingleEditor=!0}},ng=class extends At{constructor(){super(...arguments);this.command="toggleLineComment"}},ig=class extends At{constructor(){super(...arguments);this.command="indentLine"}},og=class extends At{constructor(){super(...arguments);this.command="outdentLine"}},ag=class extends At{constructor(){super(...arguments);this.command="fold"}},sg=class extends At{constructor(){super(...arguments);this.command="unfold"}},cg=class extends At{constructor(){super(...arguments);this.command="rename";this.ensureSingleTarget=!0}},lg=class extends At{constructor(){super(...arguments);this.command="showReferences";this.ensureSingleTarget=!0}},ug=class extends At{constructor(){super(...arguments);this.command="quickFix";this.ensureSingleTarget=!0}},pg=class extends At{constructor(){super(...arguments);this.command="revealDefinition";this.ensureSingleTarget=!0;this.restoreSelection=!1}},mg=class extends At{constructor(){super(...arguments);this.command="revealTypeDefinition";this.ensureSingleTarget=!0;this.restoreSelection=!1}},fg=class extends At{constructor(){super(...arguments);this.command="showHover";this.ensureSingleTarget=!0;this.restoreSelection=!1}},dg=class extends At{constructor(){super(...arguments);this.command="showDebugHover";this.ensureSingleTarget=!0;this.restoreSelection=!1}},gg=class extends At{constructor(){super(...arguments);this.command="extractVariable";this.ensureSingleTarget=!0;this.restoreSelection=!1}},hg=class extends At{constructor(){super(...arguments);this.command="gitAccept";this.ensureSingleTarget=!0}},yg=class extends At{constructor(){super(...arguments);this.command="gitRevert";this.ensureSingleTarget=!0}},Tg=class extends At{constructor(){super(...arguments);this.command="gitStage";this.ensureSingleTarget=!0}},xg=class extends At{constructor(){super(...arguments);this.command="gitUnstage";this.ensureSingleTarget=!0}};function rQ(t,e,r){switch(r){case"toggleLineComment":return t.toggleLineComment(e);case"indentLine":return t.indentLine(e);case"outdentLine":return t.outdentLine(e);case"clipboardCopy":return t.clipboardCopy(e);case"fold":return t.fold(e);case"unfold":return t.unfold(e);case"insertLineAfter":return t.insertLineAfter(e);case"rename":return t.rename(e?.[0]);case"showReferences":return t.showReferences(e?.[0]);case"quickFix":return t.quickFix(e?.[0]);case"revealDefinition":return t.revealDefinition(e?.[0]);case"revealTypeDefinition":return t.revealTypeDefinition(e?.[0]);case"showHover":return t.showHover(e?.[0]);case"showDebugHover":return t.showDebugHover(e?.[0]);case"extractVariable":return t.extractVariable(e?.[0]);case"gitAccept":return t.gitAccept(e?.[0]);case"gitRevert":return t.gitRevert(e?.[0]);case"gitStage":return t.gitStage(e?.[0]);case"gitUnstage":return t.gitUnstage(e?.[0]);case"highlight":throw Error("Highlight command not supported as simple action")}}var Sg=class{constructor(e,r){this.actions=e;this.rangeUpdater=r;this.run=this.run.bind(this)}async run(e,r={showDecorations:!0}){if(k().capabilities.commands.clipboardCopy!=null)return new rg(this.rangeUpdater).run(e,r);r.showDecorations&&await Be(k(),e,"referenced");let n=e.map(i=>i.contentText).join(`
`);return await k().clipboard.writeText(n),{thatTargets:e}}};var vg=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){await k().flashRanges(e.flatMap(nQ));let r={showDecorations:!1};await this.actions.copyToClipboard.run(e,r);let{thatTargets:n}=await this.actions.remove.run(e,r);return{thatTargets:n}}};function nQ(t){let{editor:e,contentRange:r}=t,n=t.getRemovalHighlightRange(),i=[{editor:e,range:dr(r),style:"referenced"}];return n.type==="line"?i.push({editor:e,range:n,style:"pendingDelete"}):i.push(...iQ(r,n).map(o=>({editor:e,range:dr(o),style:"pendingDelete"}))),i}function iQ(t,e){let{start:r,end:n}=t,{start:i,end:o}=e,s=[];return i.isBefore(r)&&s.push(new Y(i,r)),o.isAfter(n)&&s.push(new Y(n,o)),s}var Hl=class{constructor(){this.run=this.run.bind(this)}async run(e){return await ct(e,async(r,n)=>{let i=r.selections.filter(o=>!n.some(s=>{let l=s.contentRange.intersection(o);return l&&(!l.isEmpty||o.isEmpty)}));if(i.length===0)throw new Pv;await k().getEditableTextEditor(r).setSelections(i)}),{thatTargets:e}}},Pv=class extends Error{constructor(){super("Can't deselect every selection. At least one is required"),this.name="SelectionRequiredError"}};async function _D(t,e,r,n){let i=r.destinations.map((w,E)=>{if(n||r.actionTypes[E]==="edit")return{destination:w,index:E}}).filter(w=>!!w);if(i.length===0)return r;let o=i.map(w=>w.destination.constructChangeEdit("")),s=r.cursorRanges.map((w,E)=>({range:w,index:E})).filter(({range:w})=>w!=null),l=s.map(({index:w})=>w),u=s.map(({range:w})=>w),m=o.map(w=>w.range),{thatRanges:d,cursorRanges:g,editRanges:y}=await Oe({rangeUpdater:t,editor:e,edits:o,preserveCursorSelections:!0,selections:{thatRanges:r.thatRanges,cursorRanges:u,editRanges:{selections:m,behavior:0}}}),x=[...r.cursorRanges];return Dt(l,g).forEach(([w,E])=>{x[w]=E}),i.forEach((w,E)=>{let V=o[E].updateRange(y[E]);x[w.index]=V}),{destinations:r.destinations,actionTypes:r.actionTypes,thatRanges:d,cursorRanges:x}}async function RD({acceptsLocation:t},e,r,n){let i=n.destinations.map((g,y)=>{if(n.actionTypes[y]==="insertLineAfter")return{destination:g,index:y}}).filter(g=>!!g);if(i.length===0)return n;let o=i.map(({destination:g})=>g.contentRange),s=n.destinations.map(({contentRange:g})=>g),l=async()=>{t?await r.insertLineAfter(o):(await r.setSelections(o.map(g=>g.toSelection(!1))),await r.focus(),await r.insertLineAfter())},{targetRanges:u,thatRanges:m}=await Oe({rangeUpdater:e,editor:r,callback:l,preserveCursorSelections:!0,selections:{targetRanges:s,thatRanges:n.thatRanges}}),d=[...n.cursorRanges];return i.forEach((g,y)=>{d[g.index]=r.selections[y]}),{destinations:n.destinations.map((g,y)=>g.withTarget(g.target.withContentRange(u[y]))),actionTypes:n.actionTypes,thatRanges:m,cursorRanges:d}}async function kD(t,e){let r=Ar(e),n=k().getEditableTextEditor(r.editor),i=r.insertionMode==="before";if(r.insertionMode==="to")throw Error(`Unsupported insertion mode '${r.insertionMode}' for notebookcapell`);return await t.setSelection.run([r.target]),i?await n.editNewNotebookCellAbove():await n.editNewNotebookCellBelow(),{thatSelections:mn([r.target.thatTarget])}}var bg=class{constructor(e,r){this.rangeUpdater=e;this.actions=r;this.run=this.run.bind(this)}async run(e){if(e.some(({target:l})=>l.isNotebookCell))return kD(this.actions,e);let r=k().getEditableTextEditor(kt(e)),n={destinations:e,actionTypes:e.map(l=>l.getEditNewActionType()),thatRanges:e.map(({target:l})=>l.thatTarget.contentRange),cursorRanges:new Array(e.length).fill(void 0)},i=k().capabilities.commands.insertLineAfter,o=i!=null;o&&(n=await RD(i,this.rangeUpdater,r,n)),n=await _D(this.rangeUpdater,r,n,!o);let s=n.destinations.map((l,u)=>{let m=n.cursorRanges[u];if(m==null)throw Error("Cursor range is undefined for destination");return m.toSelection(l.target.isReversed)});return await r.setSelections(s,{focusEditor:!0}),{thatSelections:mn(n.destinations.map(l=>l.target),n.thatRanges)}}};var wg=class{constructor(e,r){this.actions=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(ai)]}run(e){return this.actions.editNew.run(e.map(r=>r.toDestination(this.insertionMode)))}},Eg=class extends wg{constructor(){super(...arguments);this.insertionMode="before"}},_g=class extends wg{constructor(){super(...arguments);this.insertionMode="after"}};var Bl=class{constructor(e){this.callbackAction=new cc(e),this.run=this.run.bind(this)}async run(e,r,{commandArgs:n,ensureSingleEditor:i,ensureSingleTarget:o,restoreSelection:s,showDecorations:l}={}){let u=n??[];return this.callbackAction.run(e,{callback:()=>k().executeCommand(r,...u),setSelection:!0,ensureSingleEditor:i??!1,ensureSingleTarget:o??!1,restoreSelection:s??!0,showDecorations:l??!0})}};var Rg=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){Ar(e);let{returnValue:r,thatTargets:n}=await this.actions.getText.run(e),[i]=r,o;return i.length>200?(o=i.substring(0,200),Zo(k().messages,"truncatedSearchText","Search text is longer than 200 characters; truncating")):o=i,await this.find(o),{thatTargets:n}}},kg=class extends Rg{find(e){return k().findInDocument(e)}},Ag=class extends Rg{find(e){return k().findInWorkspace(e)}};var Pg=class{constructor(){this.run=this.run.bind(this)}async run(e){return await Be(k(),e,"referenced"),{thatTargets:e}}};var lc=class{constructor(e){this.options=e;this.run=this.run.bind(this)}async run(e){let r=Ar(e);return await Be(k(),e,"referenced"),await k().getEditableTextEditor(r.editor).openLink(r.contentRange,this.options),{thatSelections:mn(e)}}};function AD(t){let e=t.split(/^---$/m),r={snippets:[]};for(let n of e){let i=n.match(/^-$/m),o=i!=null?n.slice(0,i.index):n,s=i!=null?n.slice(i.index+i[0].length):null,l=s?cQ(s):null,u=oQ(o);if(l!=null){u==null&&(u={variables:[]});let{variables:m,...d}=u;r.snippets.push({...d,body:l,variables:m})}else if(u!=null){if(r.header!=null||r.snippets.length!==0)throw Error("Header snippet must be first in file");r.header=u}}return r}function oQ(t){let e={variables:[]},r=aQ(t);if(Object.keys(r).length===0)return;let n={};for(let[i,o]of Object.entries(r))switch(i){case"name":e.name=o;break;case"description":e.description=o;break;case"phrase":e.phrases=Vl(o);break;case"insertionScope":e.insertionScopes=Vl(o);break;case"language":e.languages=Vl(o);break;default:if(!i.startsWith("$"))throw Error(`Invalid key '${i}'`);n[i]=o}return e.variables=sQ(n),e}function aQ(t){let e=t.split(/\r?\n/).map(n=>n.trim()).filter(Boolean),r={};for(let n of e){let i=n.split(":");if(i.length!==2)throw Error(`Invalid line '${n}'`);let o=i[0].trim(),s=i[1].trim();if(o.length===0||s.length===0)throw Error(`Invalid line '${n}'`);if(r[o]!=null)throw Error(`Duplicate key '${o}' in '${t}'`);r[o]=s}return r}function sQ(t){let e={},r=n=>(e[n]==null&&(e[n]={name:n}),e[n]);for(let[n,i]of Object.entries(t)){let o=n.split(".");if(o.length!==2)throw Error(`Invalid variable key '${n}'`);let s=o[0].slice(1);switch(o[1]){case"insertionFormatter":r(s).insertionFormatters=Vl(i);break;case"wrapperPhrase":r(s).wrapperPhrases=Vl(i);break;case"wrapperScope":r(s).wrapperScope=i;break;default:throw Error(`Invalid variable key '${n}'`)}}return Object.values(e)}function cQ(t){let e=t.match(/^[ \t]*\S/m);if(e?.index!=null)return t.slice(e.index).trimEnd().split(/\r?\n/).map(r=>r.trimEnd())}function Vl(t){return t.split("|").map(e=>e.trim())}function MD(t){let e=[];t.header!=null&&e.push(PD(t.header)),e.push(...t.snippets.map(PD));let r=e.filter(Boolean).join(`
---

`);return r?r+`
---
`:""}function PD(t){let e=[_o("name",t.name),_o("description",t.description),_o("language",t.languages),_o("phrase",t.phrases),_o("insertionScope",t.insertionScopes)].filter(Boolean);return t.variables.length>0&&(e.length>0&&e.push(""),e.push(...lQ(t.variables))),"body"in t&&e.push("-",...t.body),e.join(`
`)}function lQ(t){let e=[...t];return e.sort(uQ),e.flatMap(r=>[_o(`$${r.name}.insertionFormatter`,r.insertionFormatters),_o(`$${r.name}.wrapperPhrase`,r.wrapperPhrases),_o(`$${r.name}.wrapperScope`,r.wrapperScope)]).filter(Boolean)}function _o(t,e){return e==null?"":Array.isArray(e)?`${t}: ${e.join(" | ")}`:`${t}: ${e}`}function uQ(t,e){return t.name==="0"?1:e.name==="0"?-1:t.name.localeCompare(e.name)}function DD(t,e){let r=[],n=0,i=null,[o,...s]=t.split(/\r?\n/);return[{text:e+o,startIndex:e.length},...s.map(u=>({text:u,startIndex:0}))].forEach(({text:u,startIndex:m})=>{let d=u.match(/^\s*/)?.[0]??"",g=d.length;i!=null&&(d.length>i.length?n++:d.length<i.length&&n--),i=d;let y=Math.max(g,m),x=mx("	",n),w=u.slice(y);r.push(x+w)}),r}function LD(t,e){let r=dx(e,o=>o.offsets.start),n="",i=0;for(let o of r)n+=t.slice(i,o.offsets.start)+o.text,i=o.offsets.end;return n+=t.slice(i),n}var uc=class{constructor(e){this.snippets=e;this.run=this.run.bind(this)}async run(e,r,n){if(r==null)throw new Error("Directory argument is required for GenerateSnippet action. Please update Cursorless Talon");let i=Ar(e),o=i.editor;if(Be(k(),e,"referenced"),n==null&&(n=await k().showInputBox({prompt:"Name of snippet",placeHolder:"helloWorld"}),!n))return{};let s=o.document.offsetAt(i.contentRange.start),l=mQ(o,i.contentRange),u=l.map((ue,ge)=>({offsets:{start:o.document.offsetAt(ue.start)-s,end:o.document.offsetAt(ue.end)-s},name:ge===l.length-1?"0":`${ge+1}`})),m=o.document.getText(new Y(i.contentRange.start.with(void 0,0),i.contentRange.start)),d=o.document.getText(i.contentRange),g=LD(d,[...ln(d,/\$|\\/g,ue=>({offsets:{start:ue.index,end:ue.index+ue[0].length},text:`\\${ue[0]}`})),...u.map(({offsets:ue,name:ge})=>({offsets:ue,text:`$${ge}`}))]),y=DD(g,m),x,w={snippets:[]};k().runMode==="test"?x=k().getEditableTextEditor(o):(x=k().getEditableTextEditor(await this.snippets.openNewSnippetFile(n,r)),w=AD(x.document.getText())),await x.setSelections([x.document.range.toSelection(!1)]);let E=1,{header:U}=w,V=w.header?.phrases!=null?void 0:[`${Mv}${E++}`],z=ue=>{let ge=U?.variables?.some(ut=>ut.name===ue.name&&ut.wrapperPhrases!=null);return{name:ue.name,wrapperPhrases:ge?void 0:[`${Mv}${E++}`]}},ie={name:U?.name===n?void 0:n,phrases:V,languages:pQ(o,U),body:y,variables:u.map(z)};w.snippets.push(ie);let le=MD(w).replace(/\$/g,"\\$").replaceAll(Mv,"$");return await x.insertSnippet(le),{thatSelections:e.map(({editor:ue,contentSelection:ge})=>({editor:ue,selection:ge}))}}};function pQ(t,e){if(!e?.languages?.includes(t.document.languageId))return[t.document.languageId]}function mQ(t,e){let r=t.selections.filter(n=>e.contains(n));return r.sort((n,i)=>n.start.compareTo(i.start)),r}var Mv="PLACEHOLDER_VFA77zcbLD6wXNmfMAay";var Wl=class{constructor(){this.run=this.run.bind(this)}async run(e){return{returnValue:e.map(({contentRange:r})=>({contentRange:r})),thatTargets:e}}};var $l=class{constructor(){this.run=this.run.bind(this)}async run(e,{showDecorations:r=!0,ensureSingleTarget:n=!1}={}){return r&&await Be(k(),e,"referenced"),n&&Ar(e),{returnValue:e.map(i=>i.contentText),thatTargets:e}}};var jl=class{constructor(){this.run=this.run.bind(this)}async run(e,r){if(k().capabilities.commands.highlight==null)throw Error("The highlight action is not supported by your ide");return e.length===0?await Promise.all(k().visibleTextEditors.map(n=>k().setHighlightRanges(r,n,[]))):await ct(e,(n,i)=>k().setHighlightRanges(r,n,i.map(o=>fn(o,o.contentRange)))),{thatTargets:e}}};var Mg=class{constructor(e,r){this.rangeUpdater=e;this.isIndent=r;this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e){return this.hasCapability()?this.runSimpleCommandAction(e):(await Be(k(),e,"pendingModification0"),{thatTargets:at(await ct(e,this.runForEditor))})}hasCapability(){return this.isIndent?k().capabilities.commands.indentLine!=null:k().capabilities.commands.outdentLine!=null}runSimpleCommandAction(e){return(this.isIndent?new ig(this.rangeUpdater):new og(this.rangeUpdater)).run(e)}async runForEditor(e,r){let n=this.isIndent?fQ(e,r):dQ(e,r),{targetSelections:i}=await Oe({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(e),edits:n,selections:{targetSelections:r.map(({contentSelection:o})=>o)}});return Dt(r,i).map(([o,s])=>sc({editor:e,selection:s.toSelection(o.isReversed)}))}},Dg=class extends Mg{constructor(e){super(e,!0)}},Lg=class extends Mg{constructor(e){super(e,!1)}};function fQ(t,e){let{document:r}=t,n=FD(e),i=gQ(t);return n.map(o=>({range:r.lineAt(o).range.start.toEmptyRange(),text:i}))}function dQ(t,e){let{document:r}=t,n=FD(e),i=hQ(t);return n.map(o=>{let s=r.lineAt(o),l=s.text.match(i),{start:u}=s.range,m=u.translate(void 0,l?.[0].length);return{range:new Y(u,m),text:""}})}function FD(t){let e=new Set;for(let r of t){let{start:n,end:i}=r.contentRange;for(let o=n.line;o<=i.line;++o)e.add(o)}return[...e]}function gQ(t){if(t.options.insertSpaces){let e=ID(t);return" ".repeat(e)}return"	"}function hQ(t){if(t.options.insertSpaces){let e=ID(t);return new RegExp(`^[ ]{1,${e}}`)}return/^\t/}function ID(t){return typeof t.options.tabSize=="number"?t.options.tabSize:4}var Fg=class{constructor(e,r,n){this.rangeUpdater=e;this.modifierStageFactory=r;this.isBefore=n;this.getFinalStages=()=>[this.modifierStageFactory.create(ai)];this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e){let r=at(await ct(e,this.runForEditor));return await k().flashRanges(r.flatMap(n=>n.thatMark.map(i=>({editor:i.editor,range:dr(i.selection),style:"justAdded"})))),{sourceSelections:r.flatMap(({sourceMark:n})=>n),thatSelections:r.flatMap(({thatMark:n})=>n)}}async runForEditor(e,r){let n=this.isBefore?"after":"before",i=r.flatMap(y=>y.toDestination(n).constructChangeEdit(y.contentText)),o=r.map(({contentSelection:y})=>y),s=i.map(({range:y})=>y),l=k().getEditableTextEditor(e),{contentSelections:u,editRanges:m}=await Oe({rangeUpdater:this.rangeUpdater,editor:l,edits:i,selections:{contentSelections:o,editRanges:{selections:s,behavior:0}}}),d=Dt(i,m).map(([y,x])=>y.updateRange(x)),g=e.selections[0];return u.some(y=>y.intersection(g)!=null)&&await l.revealRange(g),{sourceMark:mn(r,d),thatMark:mn(r,u)}}},Ig=class extends Fg{constructor(e,r){super(e,r,!0)}},Cg=class extends Fg{constructor(e,r){super(e,r,!1)}};var zl=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(ai)]}async run(e){let r=await ct(e,async(i,o)=>{let s=this.getEdits(o),l=o.map(d=>d.thatTarget.contentSelection),{contentSelections:u,editRanges:m}=await Oe({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(i),edits:s,selections:{contentSelections:l,editRanges:{selections:s.map(d=>d.range),behavior:0}}});return{thatMark:u.map(d=>({editor:i,selection:d})),flashRanges:na(s,m).map(([d,g])=>({editor:i,range:d.isLine?d.updateRange(g):g,isLine:d.isLine}))}});return await k().flashRanges(r.flatMap(i=>i.flashRanges.map(({editor:o,range:s,isLine:l})=>({editor:o,range:l?$r(s):dr(s),style:"justAdded"})))),{thatSelections:r.flatMap(i=>i.thatMark)}}},Og=class extends zl{constructor(e,r){super(e,r)}getEdits(e){return e.flatMap(r=>[Hg(r,"before"),Hg(r,"after")])}},Ng=class extends zl{constructor(e,r){super(e,r)}getEdits(e){return e.map(r=>Hg(r,"before"))}},Ug=class extends zl{constructor(e,r){super(e,r)}getEdits(e){return e.map(r=>Hg(r,"after"))}};function Hg(t,e){return{...t.toDestination(e).constructChangeEdit("",!0),isLine:t.textualType==="line"}}function OD(t,e){return yQ(CD(t),CD(e))}function CD(t){if(t.languages!=null)return{langIds:t.languages}}function yQ(t,e){if(t==null&&e==null)return 0;if(t==null)return-1;if(e==null)return 1;if(t.langIds==null&&e.langIds!=null)return-1;if(e.langIds==null&&t.langIds!=null)return 1;let r=TQ(t.scopeTypes,e.scopeTypes);return r!==0?r:t.langIds==null?0:e.langIds.length-t.langIds.length}function TQ(t,e){return t==null&&e!=null?-1:e==null&&t!=null?1:0}function pc(t,e){if(t.type==="named")throw new Error("Cursorless snippets are deprecated. Please use community snippets. Update to latest cursorless-talon and say 'cursorless migrate snippets'.");if(t.type==="custom")return t;let r=SQ(t.snippets,e);r.sort(OD);let n=r[0];if(n==null){let i=xQ(t.snippets);throw new Error(`No snippet available for language '${e}'. Available languages: ${i}`)}return n}function xQ(t){let e=new Set(t.flatMap(r=>r.languages??[]));return Array.from(e).sort().join(", ")}function SQ(t,e){return t.filter(r=>r.languages==null?!0:r.languages.includes(e))}var Dv=class t{constructor(){this.value="";this.pos=0}static{this._table={36:0,58:1,44:2,123:3,125:4,92:5,47:6,124:7,43:11,45:12,63:13}}static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return e===95||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};let e=this.pos,r=0,n=this.value.charCodeAt(e),i;if(i=t._table[n],typeof i=="number")return this.pos+=1,{type:i,pos:e,len:1};if(t.isDigitCharacter(n)){i=8;do r+=1,n=this.value.charCodeAt(e+r);while(t.isDigitCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}if(t.isVariableCharacter(n)){i=9;do n=this.value.charCodeAt(e+ ++r);while(t.isVariableCharacter(n)||t.isDigitCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}i=10;do r+=1,n=this.value.charCodeAt(e+r);while(!isNaN(n)&&typeof t._table[n]>"u"&&!t.isDigitCharacter(n)&&!t.isVariableCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}},Ro=class{constructor(){this._children=[]}appendChild(e){return e instanceof Yt&&this._children[this._children.length-1]instanceof Yt?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,r){let{parent:n}=e,i=n.children.indexOf(e),o=n.children.slice(0);o.splice(i,1,...r),n._children=o,function s(l,u){for(let m of l)m.parent=u,s(m.children,m)}(r,n)}get children(){return this._children}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof Wg)return e;e=e.parent}}toString(){return this.children.reduce((e,r)=>e+r.toString(),"")}len(){return 0}},Yt=class t extends Ro{constructor(r){super();this.value=r}static escape(r){return r.replace(/\$|}|\\/g,"\\$&")}toString(){return this.value}toTextmateString(){return t.escape(this.value)}len(){return this.value.length}clone(){return new t(this.value)}},Bg=class extends Ro{},Zt=class t extends Bg{constructor(r){super();this.index=r}static compareByIndex(r,n){return r.index===n.index?0:r.isFinalTabstop?1:n.isFinalTabstop||r.index<n.index?-1:r.index>n.index?1:0}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof Vg?this._children[0]:void 0}toTextmateString(){let r="";return this.transform&&(r=this.transform.toTextmateString()),this.children.length===0&&!this.transform?`$${this.index}`:this.children.length===0?`\${${this.index}${r}}`:this.choice?`\${${this.index}|${this.choice.toTextmateString()}|${r}}`:`\${${this.index}:${this.children.map(n=>n.toTextmateString()).join("")}${r}}`}clone(){let r=new t(this.index);return this.transform&&(r.transform=this.transform.clone()),r._children=this.children.map(n=>n.clone()),r}},Vg=class t extends Ro{constructor(){super(...arguments);this.options=[]}appendChild(r){return r instanceof Yt&&(r.parent=this,this.options.push(r)),this}toString(){return this.options[0].value}toTextmateString(){return this.options.map(r=>r.value.replace(/\||,|\\/g,"\\$&")).join(",")}len(){return this.options[0].len()}clone(){let r=new t;return this.options.forEach(r.appendChild,r),r}},Lv=class t extends Ro{constructor(){super(...arguments);this.regexp=new RegExp("")}resolve(r){let n=this,i=!1,o=r.replace(this.regexp,function(){return i=!0,n._replace(Array.prototype.slice.call(arguments,0,-2))});return!i&&this._children.some(s=>s instanceof Nn&&!!s.elseValue)&&(o=this._replace([])),o}_replace(r){let n="";for(let i of this._children)if(i instanceof Nn){let o=r[i.index]||"";o=i.resolve(o),n+=o}else n+=i.toString();return n}toString(){return""}toTextmateString(){return`/${this.regexp.source}/${this.children.map(r=>r.toTextmateString())}/${(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")}`}clone(){let r=new t;return r.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),r._children=this.children.map(n=>n.clone()),r}},Nn=class t extends Ro{constructor(r,n,i,o){super();this.index=r;this.shorthandName=n;this.ifValue=i;this.elseValue=o}resolve(r){return this.shorthandName==="upcase"?r?r.toLocaleUpperCase():"":this.shorthandName==="downcase"?r?r.toLocaleLowerCase():"":this.shorthandName==="capitalize"?r?r[0].toLocaleUpperCase()+r.substr(1):"":this.shorthandName==="pascalcase"?r?this._toPascalCase(r):"":this.shorthandName==="camelcase"?r?this._toCamelCase(r):"":r&&typeof this.ifValue=="string"?this.ifValue:!r&&typeof this.elseValue=="string"?this.elseValue:r||""}_toPascalCase(r){let n=r.match(/[a-z0-9]+/gi);return n?n.map(i=>i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()).join(""):r}_toCamelCase(r){let n=r.match(/[a-z0-9]+/gi);return n?n.map((i,o)=>o===0?i.toLowerCase():i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()).join(""):r}toTextmateString(){let r="${";return r+=this.index,this.shorthandName?r+=`:/${this.shorthandName}`:this.ifValue&&this.elseValue?r+=`:?${this.ifValue}:${this.elseValue}`:this.ifValue?r+=`:+${this.ifValue}`:this.elseValue&&(r+=`:-${this.elseValue}`),r+="}",r}clone(){return new t(this.index,this.shorthandName,this.ifValue,this.elseValue)}},Un=class t extends Bg{constructor(r){super();this.name=r}resolve(r){let n=r.resolve(this);return this.transform&&(n=this.transform.resolve(n||"")),n!==void 0?(this._children=[new Yt(n)],!0):!1}toTextmateString(){let r="";return this.transform&&(r=this.transform.toTextmateString()),this.children.length===0?`\${${this.name}${r}}`:`\${${this.name}:${this.children.map(n=>n.toTextmateString()).join("")}${r}}`}clone(){let r=new t(this.name);return this.transform&&(r.transform=this.transform.clone()),r._children=this.children.map(n=>n.clone()),r}};function ND(t,e){let r=[...t];for(;r.length>0;){let n=r.shift();if(!e(n))break;r.unshift(...n.children)}}var Wg=class t extends Ro{get placeholderInfo(){if(!this._placeholders){let e=[],r;this.walk(function(n){return n instanceof Zt&&(e.push(n),r=!r||r.index<n.index?n:r),!0}),this._placeholders={all:e,last:r}}return this._placeholders}get placeholders(){let{all:e}=this.placeholderInfo;return e}offset(e){let r=0,n=!1;return this.walk(i=>i===e?(n=!0,!1):(r+=i.len(),!0)),n?r:-1}fullLen(e){let r=0;return ND([e],n=>(r+=n.len(),!0)),r}enclosingPlaceholders(e){let r=[],{parent:n}=e;for(;n;)n instanceof Zt&&r.push(n),n=n.parent;return r}resolveVariables(e){return this.walk(r=>(r instanceof Un&&r.resolve(e)&&(this._placeholders=void 0),!0)),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,r){return this._placeholders=void 0,super.replace(e,r)}toTextmateString(){return this.children.reduce((e,r)=>e+r.toTextmateString(),"")}clone(){let e=new t;return this._children=this.children.map(r=>r.clone()),e}walk(e){ND(this.children,e)}},ci=class{constructor(){this._scanner=new Dv;this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}text(e){return this.parse(e).toString()}parse(e,r,n){this._scanner.text(e),this._token=this._scanner.next();let i=new Wg;for(;this._parse(i););let o=new Map,s=[],l=0;i.walk(u=>(u instanceof Zt&&(l+=1,u.isFinalTabstop?o.set(0,void 0):!o.has(u.index)&&u.children.length>0?o.set(u.index,u.children):s.push(u)),!0));for(let u of s){let m=o.get(u.index);if(m){let d=new Zt(u.index);d.transform=u.transform;for(let g of m)d.appendChild(g.clone());i.replace(u,[d])}}return n||(n=l>0&&r),!o.has(0)&&n&&i.appendChild(new Zt(0)),i}_accept(e,r){if(e===void 0||this._token.type===e){let n=r?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),n}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){let r=this._token;for(;this._token.type!==e;){if(this._token.type===14)return!1;if(this._token.type===5){let i=this._scanner.next();if(i.type!==0&&i.type!==4&&i.type!==5)return!1}this._token=this._scanner.next()}let n=this._scanner.value.substring(r.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),n}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let r;return(r=this._accept(5,!0))?(r=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||r,e.appendChild(new Yt(r)),!0):!1}_parseTabstopOrVariableName(e){let r,n=this._token;return this._accept(0)&&(r=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(r)?new Zt(Number(r)):new Un(r)),!0):this._backTo(n)}_parseComplexPlaceholder(e){let r,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(r=this._accept(8,!0))))return this._backTo(n);let o=new Zt(Number(r));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new Yt("${"+r+":")),o.children.forEach(e.appendChild,e),!0}else if(o.index>0&&this._accept(7)){let s=new Vg;for(;;){if(this._parseChoiceElement(s)){if(this._accept(2))continue;if(this._accept(7)&&(o.appendChild(s),this._accept(4)))return e.appendChild(o),!0}return this._backTo(n),!1}}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseChoiceElement(e){let r=this._token,n=[];for(;!(this._token.type===2||this._token.type===7);){let i;if((i=this._accept(5,!0))?i=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||i:i=this._accept(void 0,!0),!i)return this._backTo(r),!1;n.push(i)}return n.length===0?(this._backTo(r),!1):(e.appendChild(new Yt(n.join(""))),!0)}_parseComplexVariable(e){let r,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(r=this._accept(9,!0))))return this._backTo(n);let o=new Un(r);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new Yt("${"+r+":")),o.children.forEach(e.appendChild,e),!0}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseTransform(e){let r=new Lv,n="",i="";for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(6,!0)||o,n+=o;continue}if(this._token.type!==14){n+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(5,!0)||this._accept(6,!0)||o,r.appendChild(new Yt(o));continue}if(!(this._parseFormatString(r)||this._parseAnything(r)))return!1}for(;!this._accept(4);){if(this._token.type!==14){i+=this._accept(void 0,!0);continue}return!1}try{r.regexp=new RegExp(n,i)}catch{return!1}return e.transform=r,!0}_parseFormatString(e){let r=this._token;if(!this._accept(0))return!1;let n=!1;this._accept(3)&&(n=!0);let i=this._accept(8,!0);if(i)if(n){if(this._accept(4))return e.appendChild(new Nn(Number(i))),!0;if(!this._accept(1))return this._backTo(r),!1}else return e.appendChild(new Nn(Number(i))),!0;else return this._backTo(r),!1;if(this._accept(6)){let o=this._accept(9,!0);return!o||!this._accept(4)?(this._backTo(r),!1):(e.appendChild(new Nn(Number(i),o)),!0)}else if(this._accept(11)){let o=this._until(4);if(o)return e.appendChild(new Nn(Number(i),void 0,o,void 0)),!0}else if(this._accept(12)){let o=this._until(4);if(o)return e.appendChild(new Nn(Number(i),void 0,void 0,o)),!0}else if(this._accept(13)){let o=this._until(1);if(o){let s=this._until(4);if(s)return e.appendChild(new Nn(Number(i),void 0,o,s)),!0}}else{let o=this._until(4);if(o)return e.appendChild(new Nn(Number(i),void 0,void 0,o)),!0}return this._backTo(r),!1}_parseAnything(e){return this._token.type!==14?(e.appendChild(new Yt(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}};var $g=Object.freeze({CURRENT_YEAR:!0,CURRENT_YEAR_SHORT:!0,CURRENT_MONTH:!0,CURRENT_DATE:!0,CURRENT_HOUR:!0,CURRENT_MINUTE:!0,CURRENT_SECOND:!0,CURRENT_DAY_NAME:!0,CURRENT_DAY_NAME_SHORT:!0,CURRENT_MONTH_NAME:!0,CURRENT_MONTH_NAME_SHORT:!0,CURRENT_SECONDS_UNIX:!0,SELECTION:!0,CLIPBOARD:!0,TM_SELECTED_TEXT:!0,TM_CURRENT_LINE:!0,TM_CURRENT_WORD:!0,TM_LINE_INDEX:!0,TM_LINE_NUMBER:!0,TM_FILENAME:!0,TM_FILENAME_BASE:!0,TM_DIRECTORY:!0,TM_FILEPATH:!0,RELATIVE_FILEPATH:!0,BLOCK_COMMENT_START:!0,BLOCK_COMMENT_END:!0,LINE_COMMENT:!0,WORKSPACE_NAME:!0,WORKSPACE_FOLDER:!0,RANDOM:!0,RANDOM_HEX:!0,UUID:!0});function jg(t,e,r){let n=vQ(t)+1,i={};t.walk(o=>{if(o instanceof Un){if(o.name===e)o.name="TM_SELECTED_TEXT";else if(r!=null&&Object.prototype.hasOwnProperty.call(r,o.name))o.parent.replace(o,[new Yt(r[o.name])]);else if(!$g[o.name]){let s;o.name in i?s=i[o.name]:(s=n++,i[o.name]=s);let l=new Zt(s);o.children.forEach(u=>l.appendChild(u)),o.parent.replace(o,[l])}}else o instanceof Zt&&(o.index.toString()===e?o.parent.replace(o,[new Un("TM_SELECTED_TEXT")]):r!=null&&Object.prototype.hasOwnProperty.call(r,o.index)&&o.parent.replace(o,[new Yt(r[o.index])]));return!0})}function vQ(t){let e=0;return t.walk(r=>(r instanceof Zt&&(e=Math.max(e,r.index)),!0)),e}function zg(t,e,r){let n=bQ(t)+1,i={};t.walk(o=>{if(o instanceof Un){if(o.name===e)o.name="TM_SELECTED_TEXT";else if(r!=null&&Object.prototype.hasOwnProperty.call(r,o.name))o.parent.replace(o,[new Yt(r[o.name])]);else if(!$g[o.name]){let s;o.name in i?s=i[o.name]:(s=n++,i[o.name]=s);let l=new Zt(s);o.children.forEach(u=>l.appendChild(u)),o.parent.replace(o,[l])}}else o instanceof Zt&&o.index.toString()===e&&o.parent.replace(o,[new Un("TM_SELECTED_TEXT")]);return!0})}function bQ(t){let e=0;return t.walk(r=>(r instanceof Zt&&(e=Math.max(e,r.index)),!0)),e}function qg(t,e,r){let n=e.map(o=>wQ(t,o,r)),i=n[0];if(!n.every(o=>o===i))throw new Error("Multiple snippet definitions match the given context");if(i===-1)throw new Error("Couldn't find matching snippet definition");return r[i]}function wQ(t,e,r){let n=e.editor.document.languageId,i={multipleTargets:!1};return r.findIndex(({scope:o})=>{if(o==null)return!0;let{langIds:s,scopeTypes:l,excludeDescendantScopeTypes:u}=o;if(s!=null&&!s.includes(n))return!1;if(l!=null){let m=l.concat(u??[]),d,g;for(let y of m)try{let x=t.create({type:"containingScope",scopeType:{type:y}}).run(e,i)[0];e.contentRange.isRangeEqual(x.contentRange)&&(x=t.create({type:"containingScope",scopeType:{type:y},ancestorIndex:1}).run(e,i)[0]),(d==null||d.contentRange.contains(x.contentRange))&&(d=x,g=y)}catch{continue}return g==null?!1:d!=null&&!(u??[]).includes(g)}return!0})}var UD=!1;function Gg(){UD||(Zo(k().messages,"legacySnippets","Talon community snippets are now fully supported in Cursorless! Cursorless's experimental snippets are now deprecated, but in most cases we can help you migrate automatically. Update cursorless-talon and say 'cursorless migrate snippets'."),UD=!0)}var BD={camelCase(t){if(t.length===0)return"";let[e,...r]=t;return e+r.map(HD).join("")},snakeCase(t){return t.join("_")},upperSnakeCase(t){return t.map(e=>e.toUpperCase()).join("_")},pascalCase(t){return t.map(HD).join("")}};function HD(t){return t.length===0?"":t[0].toUpperCase()+t.substr(1)}var ql=class{constructor(e,r,n,i){this.rangeUpdater=e;this.snippets=r;this.actions=n;this.modifierStageFactory=i;this.snippetParser=new ci;this.run=this.run.bind(this)}getFinalStages(e){let r=this.getScopeTypes(e);return r.length===0?[]:[new ec(this.modifierStageFactory,{type:"cascading",modifiers:r.map(n=>({type:"containingScope",scopeType:n}))})]}getScopeTypes(e){let{name:r}=e,i=this.snippets.getSnippetStrict(r).insertionScopeTypes;return i==null?[]:i.map(o=>({type:o}))}getSnippetInfo(e,r){let{name:n}=e,i=this.snippets.getSnippetStrict(n),o=qg(this.modifierStageFactory,r,i.definitions);return{body:o.body.join(`
`),formatSubstitutions(s){return s==null?void 0:EQ(i,o,s)}}}async run(e,r){Gg();let n=k().getEditableTextEditor(kt(e));await this.actions.editNew.run(e);let{body:i,formatSubstitutions:o}=this.getSnippetInfo(r,n.selections.map(m=>new Nt({editor:n,contentRange:m,isReversed:!1,hasExplicitRange:!0}))),s=this.snippetParser.parse(i);zg(s,null,o(r.substitutions));let l=s.toTextmateString(),{editorSelections:u}=await Oe({rangeUpdater:this.rangeUpdater,editor:n,callback:()=>n.insertSnippet(l),preserveCursorSelections:!0,selections:{editorSelections:{selections:n.selections,behavior:0}}});return{thatSelections:u.map(m=>({editor:n,selection:m}))}}};function EQ(t,e,r){return Object.fromEntries(Object.entries(r).map(([n,i])=>{let o=(e.variables??{})[n]?.formatter??(t.variables??{})[n]?.formatter;if(o==null)return[n,i];let s=BD[o];if(s==null)throw new Error(`Couldn't find formatter ${o} for variable ${n}`);return[n,s(i.split(" "))]}))}var Gl=class{constructor(e,r,n,i){this.rangeUpdater=e;this.snippets=r;this.actions=n;this.modifierStageFactory=i;this.snippetParser=new ci;this.run=this.run.bind(this)}getFinalStages(e,r){if(r.type==="named")return this.legacy().getFinalStages(r);let n=kt(e),o=pc(r,n.document.languageId).scopeTypes??[];return o.length===0?[]:[new ec(this.modifierStageFactory,{type:"cascading",modifiers:o.map(s=>({type:"containingScope",scopeType:s}))})]}async run(e,r){if(r.type==="named")return this.legacy().run(e,r);let n=k().getEditableTextEditor(kt(e)),i=pc(r,n.document.languageId),o=this.snippetParser.parse(i.body),s=i.substitutions??r.substitutions;jg(o,null,s);let l=o.toTextmateString();await this.actions.editNew.run(e);let{editorSelections:u}=await Oe({rangeUpdater:this.rangeUpdater,editor:n,callback:()=>n.insertSnippet(l),preserveCursorSelections:!0,selections:{editorSelections:{selections:n.selections,behavior:0}}});return{thatSelections:u.map(m=>({editor:n,selection:m}))}}legacy(){return new ql(this.rangeUpdater,this.snippets,this.actions,this.modifierStageFactory)}};var Kl=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(ai)]}async run(e){return await Be(k(),e.map(({thatTarget:n})=>n),"pendingModification0"),{thatSelections:at(await ct(e,async(n,i)=>{let{thatRanges:o}=await Oe({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(n),edits:_Q(n,i),selections:{thatRanges:i.map(({contentRange:s})=>s)}});return na(i,o).map(([s,l])=>({editor:n,selection:l.toSelection(s.isReversed)}))}))}}};function _Q(t,e){let r=[];for(let n of e){let i=n.textualType==="token"?RQ(n):kQ(n);r.push(...i)}return r}function RQ(t){let{editor:e,contentRange:r}=t,n=Pr(e.document.languageId).tokenMatcher,i=gn(n,e,r,"forward");return Array.from(AS(i)).map(([o,s])=>({range:new Y(o.end,s.start),text:"",isReplace:!0}))}function kQ(t){let{document:e}=t.editor,r=t.contentRange,n=r.start.line,i=r.isSingleLine?Math.min(n+1,e.lineCount-1):r.end.line,o=Ns(qP(n,i+1),s=>e.lineAt(s));return Array.from(AS(o)).map(([s,l])=>({range:new Y(s.rangeTrimmed?.end??s.range.end,l.rangeTrimmed?.start??l.range.start),text:l.isEmptyOrWhitespace?"":" ",isReplace:!0}))}var Kg=class{constructor(e,r){this.rangeUpdater=e;this.actions=r;this.run=this.run.bind(this)}async run(e){let r=k().getEditableTextEditor(kt(e)),n=k().activeEditableTextEditor,i=async()=>{await this.actions.editNew.run(e)},{cursorSelections:o}=await Oe({rangeUpdater:this.rangeUpdater,editor:r,preserveCursorSelections:!0,callback:i,selections:{cursorSelections:r.selections}}),{originalCursorSelections:s,editorSelections:l}=await Oe({rangeUpdater:this.rangeUpdater,editor:r,callback:()=>r.clipboardPaste(),selections:{originalCursorSelections:o,editorSelections:{selections:r.selections,behavior:0}}});return await r.setSelections(s),n!=null&&!n.isActive&&await n.focus(),await k().flashRanges(l.map(u=>({editor:r,range:dr(u),style:"justAdded"}))),{thatSelections:l.map(u=>({editor:r,selection:u}))}}};var Qg=class{constructor(e){this.rangeUpdater=e;this.runForEditor=this.runForEditor.bind(this)}async run(e){let r=await k().clipboard.readText(),n=r.split(/\r?\n/g),i=e.length===n.length?na(e,n).map(([s,l])=>({destination:s,text:l})):e.map(s=>({destination:s,text:r}));return{thatSelections:at(await Mi(i,({destination:s})=>s.editor,this.runForEditor))}}async runForEditor(e,r){let n=r.map(({destination:s,text:l})=>s.constructChangeEdit(l)),{editSelections:i}=await Oe({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(e),edits:n,selections:{editSelections:{selections:n.map(({range:s})=>s),behavior:0}}}),o=na(n,i).map(([s,l])=>s.updateRange(l).toSelection(l.isReversed));return await k().flashRanges(o.map(s=>({editor:e,range:dr(s),style:"justAdded"}))),o.map(s=>({editor:e,selection:s}))}};var Yg=class{constructor(e,r){this.run=this.run.bind(this),this.runner=k().capabilities.commands.clipboardPaste!=null?new Kg(e,r):new Qg(e)}run(e){return this.runner.run(e)}};var Ql=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e,{showDecorations:r=!0}={}){return e=Xd(e),r&&await Be(k(),e,"pendingDelete",i=>i.getRemovalHighlightRange()),{thatTargets:at(await ct(e,this.runForEditor))}}async runForEditor(e,r){let n=r.map(s=>s.constructRemovalEdit()),i=k().getEditableTextEditor(e),{editRanges:o}=await Oe({rangeUpdater:this.rangeUpdater,editor:i,edits:n,selections:{editRanges:n.map(({range:s})=>s)}});return Dt(r,o).map(([s,l])=>new mo({editor:s.editor,isReversed:s.isReversed,contentRange:l}))}};var Yl=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}getTexts(e,r){if(Array.isArray(r))return r.length===1?Array(e.length).fill(r[0]):r;let n=[];for(let i=0;i<e.length;++i)n[i]=(r.start+i).toString();return n}async run(e,r){await Be(k(),e.map(l=>l.target),"pendingModification0");let n=this.getTexts(e,r);if(e.length!==n.length)throw new Error("Targets and texts must have same length");let i=Dt(e,n).map(([l,u])=>({editor:l.editor,target:l.target,edit:l.constructChangeEdit(u)})),o=[],s=[];return await Mi(i,l=>l.editor,async(l,u)=>{let m=u.map(({edit:y})=>y),{contentSelections:d,editRanges:g}=await Oe({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(l),edits:m,selections:{contentSelections:u.map(({target:y})=>y.contentSelection),editRanges:{selections:m.map(({range:y})=>y),behavior:0}}});for(let[y,x]of Dt(u,d))o.push(y.target.withContentRange(x));for(let[y,x]of Dt(u,g))s.push({editor:l,selection:y.edit.updateRange(x).toSelection(!1)})}),{sourceTargets:o,thatSelections:s}}};var Zl=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.getFinalStages=()=>[Ev(this.modifierStageFactory)];this.run=this.run.bind(this)}async run(e,r,n){let i=e.flatMap(s=>{let l=s.getBoundary();if(l.length!==2)throw Error("Target must have an opening and closing delimiter");return l});await Be(k(),i,"pendingModification0");let o=await ct(i,async(s,l)=>{let u=l.map((g,y)=>({editor:s,range:g.contentRange,text:y%2===0?r:n})),{sourceRanges:m,thatRanges:d}=await Oe({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(s),edits:u,selections:{sourceRanges:e.map(g=>g.thatTarget.contentRange),thatRanges:e.map(g=>g.contentRange)}});return{sourceMark:mn(e,m),thatMark:mn(e,d)}});return{sourceSelections:o.flatMap(({sourceMark:s})=>s),thatSelections:o.flatMap(({thatMark:s})=>s)}}};var Xl=class{constructor(e){this.at=e;this.run=this.run.bind(this)}async run(e){let r=gl(e,s=>s.editor),n=Array.from(r,([s,l])=>({lineNumber:AQ(l,this.at),editor:s})),i=k().activeEditableTextEditor;for(let s of n)await k().getEditableTextEditor(s.editor).revealLine(s.lineNumber,this.at);i!=null&&!i.isActive&&await i.focus();let o=e.filter(s=>{let l=s.editor.visibleRanges,u=l[0].start.line,m=l[l.length-1].end.line;return s.contentRange.start.line>u||s.contentRange.end.line<m||s.contentRange.start.line===u&&s.contentRange.end.line===m});return await k().flashRanges(o.map(s=>({editor:s.editor,range:$r(s.contentRange),style:"referenced"}))),{thatTargets:e}}},Zg=class extends Xl{constructor(){super("top")}},Xg=class extends Xl{constructor(){super("center")}},Jg=class extends Xl{constructor(){super("bottom")}};function AQ(t,e){let r=Number.MAX_SAFE_INTEGER,n=0;return t.forEach(i=>{r=Math.min(r,i.contentRange.start.line),n=Math.max(n,i.contentRange.end.line)}),e==="top"?r:e==="bottom"?n:Math.floor((r+n)/2)}var ko=class{constructor(e,r){this.selectionMode=e;this.rangeMode=r;this.run=this.run.bind(this)}async run(e){let r=kt(e),n=this.getSelections(e),i=this.selectionMode==="add"?r.selections.concat(n):n,o=this.selectionMode==="set"&&i.length===1&&i[0].isEmpty;return await k().getEditableTextEditor(r).setSelections(i,{focusEditor:!0,highlightWord:o}),{thatTargets:e}}getSelections(e){switch(this.rangeMode){case"content":return e.map(r=>r.contentSelection);case"before":return e.map(r=>new $e(r.contentRange.start,r.contentRange.start));case"after":return e.map(r=>new $e(r.contentRange.end,r.contentRange.end))}}},eh=class extends ko{constructor(){super("set","content")}},th=class extends ko{constructor(){super("set","before")}},rh=class extends ko{constructor(){super("set","after")}},nh=class extends ko{constructor(){super("add","content")}},ih=class extends ko{constructor(){super("add","before")}},oh=class extends ko{constructor(){super("add","after")}};var Jl=class{constructor(e){this.key=e;this.noAutomaticTokenExpansion=!0;this.run=this.run.bind(this)}async run(e){return{thatTargets:e,[`${this.key}Targets`]:e}}};var eu=class{constructor(e){this.treeSitter=e;this.run=this.run.bind(this)}async run(e){await Be(k(),e,"referenced");let r=["# Cursorless parse tree"];for(let n of e){let{editor:i,contentRange:o}=n,s=this.treeSitter.getTree(i.document);r.push(PQ(i.document,s,o))}return k().openUntitledTextDocument({language:"markdown",content:r.join(`

`)}),{thatTargets:e}}};function PQ(t,e,r){let n=[],i=[];return VD(n,i,r,e.walk(),0),[`## ${t.filename} [${r}]
`,`\`\`\`${t.languageId}`,t.getText(r),"```","","```scm",...i,"```","","```js",...n,"```",""].join(`
`)}function VD(t,e,r,n,i){for(;;){let o=new Y(n.startPosition.row,n.startPosition.column,n.endPosition.row,n.endPosition.column);if(r.intersection(o)!=null){let s="  ".repeat(i),l=MQ(n),u=s+l;if(n.nodeIsNamed)t.push(`${u}${n.nodeType} [${o}]`),e.push(`${u}(${n.nodeType}`),n.gotoFirstChild()?(VD(t,e,r,n,i+1),n.gotoParent(),e.push(`${s})`)):e[e.length-1]+=")";else{let m=`"${n.nodeType}"`;t.push(`${u}${m} [${o}]`),e.push(`${u}${m}`)}}if(!n.gotoNextSibling())return}}function MQ(t){let e=t.currentFieldName;return e!=null?`${e}: `:""}var tu=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){e.length<2&&Zo(k().messages,"tooFewTargets",'This action works on multiple targets, e.g. "sort every line block" instead of "sort block".');let r=e.slice().sort((s,l)=>s.contentRange.start.compareTo(l.contentRange.start)),{returnValue:n}=await this.actions.getText.run(r,{showDecorations:!1}),i=this.sortTexts(n),{thatSelections:o}=await this.actions.replace.run(r.map(s=>s.toDestination("to")),i);return{thatSelections:o}}},ah=class extends tu{sortTexts(e){return e.sort((r,n)=>r.localeCompare(n,void 0,{numeric:!0,caseFirst:"upper"}))}},sh=class extends tu{sortTexts(e){return e.reverse()}},ch=class extends tu{sortTexts(e){return fx(e)}};var ru=class{constructor(e){this.modifierStageFactory=e;this.getFinalStages=()=>[this.modifierStageFactory.create(ai)];this.run=this.run.bind(this)}async run(e){let r=e.map(({thatTarget:n})=>n);return await Be(k(),r,"referenced"),await ct(e,async(n,i)=>{let o=i.map(s=>fn(s,s.contentRange));await k().getEditableTextEditor(n).toggleBreakpoint(o)}),{thatTargets:e}}};var nu=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e,r,n){let i=await ct(e,async(o,s)=>{let l=s.map(E=>({start:new $e(E.contentRange.start,E.contentRange.start),end:new $e(E.contentRange.end,E.contentRange.end)})),u=l.flatMap(({start:E,end:U})=>[{text:r,range:E},{text:n,range:U,isReplace:!0}]),m=s.map(E=>E.contentSelection),{boundariesStartSelections:d,boundariesEndSelections:g,sourceSelections:y,thatSelections:x}=await Oe({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(o),edits:u,selections:{boundariesStartSelections:{selections:l.map(({start:E})=>E),behavior:2},boundariesEndSelections:{selections:l.map(({end:E})=>E),behavior:3},sourceSelections:{selections:m,behavior:1},thatSelections:{selections:m,behavior:0}}}),w=[...d,...g];return await k().flashRanges(w.map(E=>({editor:o,range:dr(E),style:"justAdded"}))),{sourceMark:y.map(E=>({editor:o,selection:E})),thatMark:x.map(E=>({editor:o,selection:E}))}});return{sourceSelections:i.flatMap(({sourceMark:o})=>o),thatSelections:i.flatMap(({thatMark:o})=>o)}}};var iu=class{constructor(e,r,n){this.rangeUpdater=e;this.snippets=r;this.modifierStageFactory=n;this.snippetParser=new ci;this.run=this.run.bind(this)}getFinalStages(e){let r=this.getScopeType(e);return r==null?[]:[new bo(this.modifierStageFactory,{type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:r}})]}getScopeType(e){let{name:r,variableName:n}=e,s=(this.snippets.getSnippetStrict(r).variables??{})[n]?.wrapperScopeType;return s==null?void 0:{type:s}}getBody(e,r){let{name:n}=e,i=this.snippets.getSnippetStrict(n);return qg(this.modifierStageFactory,r,i.definitions).body.join(`
`)}async run(e,r){Gg();let n=k().getEditableTextEditor(kt(e)),i=this.getBody(r,e),o=this.snippetParser.parse(i);zg(o,r.variableName);let s=o.toTextmateString();await Be(k(),e,"pendingModification0");let l=e.map(d=>d.contentSelection),u=()=>n.insertSnippet(s,l),{targetSelections:m}=await Oe({rangeUpdater:this.rangeUpdater,editor:n,callback:u,preserveCursorSelections:!0,selections:{targetSelections:l}});return{thatSelections:m.map(d=>({editor:n,selection:d}))}}};var ou=class{constructor(e,r,n){this.rangeUpdater=e;this.snippets=r;this.modifierStageFactory=n;this.snippetParser=new ci;this.run=this.run.bind(this)}getFinalStages(e,r){if(r.type==="named")return this.legacy().getFinalStages(r);let n=kt(e),i=pc(r,n.document.languageId);return i.scopeType==null?[]:[new bo(this.modifierStageFactory,{type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:i.scopeType}})]}async run(e,r){if(r.type==="named")return this.legacy().run(e,r);let n=k().getEditableTextEditor(kt(e)),i=pc(r,n.document.languageId),o=this.snippetParser.parse(i.body);jg(o,i.variableName);let s=o.toTextmateString();await Be(k(),e,"pendingModification0");let l=e.map(m=>m.contentSelection),{targetSelections:u}=await Oe({rangeUpdater:this.rangeUpdater,editor:n,callback:()=>n.insertSnippet(s,l),preserveCursorSelections:!0,selections:{targetSelections:l}});return{thatSelections:u.map(m=>({editor:n,selection:m}))}}legacy(){return new iu(this.rangeUpdater,this.snippets,this.modifierStageFactory)}};var DQ=/-?\d+(\.\d+)?/g,lh=class{constructor(e,r){this.actions=e;this.isIncrement=r;this.run=this.run.bind(this)}async run(e){let r=[];return await Mi(e,n=>n.editor,async(n,i)=>{let o=await this.runOnEditor(n,i);r.push(...o)}),{thatSelections:r}}async runOnEditor(e,r){let{document:n}=e,i=[],o=[];for(let l of r){let u=n.offsetAt(l.contentRange.start),m=l.contentText,d=il(m,DQ);for(let g of d)i.push(LQ(e,u,g)),o.push(FQ(this.isIncrement,g.text))}let{thatSelections:s}=await this.actions.replace.run(i,o);return s}},uh=class extends lh{constructor(e){super(e,!0)}},ph=class extends lh{constructor(e){super(e,!1)}};function LQ(t,e,r){return new Ze({editor:t,isReversed:!1,contentRange:new Y(t.document.positionAt(e+r.index),t.document.positionAt(e+r.index+r.text.length))}).toDestination("to")}function FQ(t,e){return e.includes(".")?CQ(t,e).toString():IQ(t,e).toString()}function IQ(t,e){let r=parseInt(e),n=1;return r+(t?n:-n)}function CQ(t,e){let r=parseFloat(e),i=Math.abs(r)<=1?.1:1,o=r+(t?i:-i);return parseFloat(o.toPrecision(15))/1}var mh=class{constructor(e,r,n,i){this.addSelection=new nh,this.addSelectionBefore=new ih,this.addSelectionAfter=new oh,this.callAsFunction=new Nl(this),this.clearAndSetSelection=new Ul(this),this.copyToClipboard=new Sg(this,n),this.cutToClipboard=new vg(this),this.decrement=new ph(this),this.deselect=new Hl,this.editNew=new bg(n,this),this.editNewLineAfter=new _g(this,i),this.editNewLineBefore=new Eg(this,i),this.executeCommand=new Bl(n),this.extractVariable=new gg(n),this.findInDocument=new kg(this),this.findInWorkspace=new Ag(this),this.flashTargets=new Pg,this.foldRegion=new ag(n),this.followLink=new lc({openAside:!1}),this.followLinkAside=new lc({openAside:!0}),this.generateSnippet=new uc(r),this.getText=new $l,this.gitAccept=new hg(n),this.gitRevert=new yg(n),this.gitStage=new Tg(n),this.gitUnstage=new xg(n),this.highlight=new jl,this.increment=new uh(this),this.indentLine=new Dg(n),this.insertCopyAfter=new Cg(n,i),this.insertCopyBefore=new Ig(n,i),this.insertEmptyLineAfter=new Ug(n,i),this.insertEmptyLineBefore=new Ng(n,i),this.insertEmptyLinesAround=new Og(n,i),this.insertSnippet=new Gl(n,r,this,i),this.joinLines=new Kl(n,i),this.breakLine=new Zd(n),this.moveToTarget=new eg(n),this.outdentLine=new Lg(n),this.pasteFromClipboard=new Yg(n,this),this.randomizeTargets=new ch(this),this.remove=new Ql(n),this.rename=new cg(n),this.replace=new Yl(n),this.replaceWithTarget=new Jd(n),this.revealDefinition=new pg(n),this.revealTypeDefinition=new mg(n),this.reverseTargets=new sh(this),this.rewrapWithPairedDelimiter=new Zl(n,i),this.scrollToBottom=new Jg,this.scrollToCenter=new Xg,this.scrollToTop=new Zg,this.setSelection=new eh,this.setSelectionAfter=new rh,this.setSelectionBefore=new th,this.showDebugHover=new dg(n),this.showHover=new fg(n),this.showQuickFix=new ug(n),this.showReferences=new lg(n),this.sortTargets=new ah(this),this.swapTargets=new tg(n),this.toggleLineBreakpoint=new ru(i),this.toggleLineComment=new ng(n),this.unfoldRegion=new sg(n),this.wrapWithPairedDelimiter=new nu(n),this.wrapWithSnippet=new ou(n,r,i),this["experimental.setInstanceReference"]=new Jl("instanceReference"),this["private.showParseTree"]=new eu(e),this["private.getTargets"]=new Wl,this["private.setKeyboardTarget"]=new Jl("keyboard")}};async function WD(t,e,r){let n=await t.getFocusedElementType();if(n==null||n==="textEditor")return null;let i=r.action;switch(i.name){case"replace":return fh(i.destination)&&Array.isArray(i.replaceWith)?{action:"insert",modifiers:dh(i.destination),text:i.replaceWith.join(`
`)}:null;case"replaceWithTarget":return fh(i.destination)?{action:"insert",modifiers:dh(i.destination),text:await Fv(e,i.source)}:null;case"moveToTarget":if(fh(i.destination)){let o=await Fv(e,i.source);return await OQ(e,i.source),{action:"insert",modifiers:dh(i.destination),text:o}}return null;case"callAsFunction":return gh(i.argument)?{action:i.name,modifiers:hh(i.argument),callee:await Fv(e,i.callee)}:null;case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return gh(i.target)?{action:i.name,modifiers:hh(i.target),left:i.left,right:i.right}:null;case"pasteFromClipboard":return fh(i.destination)?{action:i.name,modifiers:dh(i.destination)}:null;case"swapTargets":case"editNew":case"insertSnippet":case"generateSnippet":case"wrapWithSnippet":case"parsed":return null;default:return gh(i.target)?{action:i.name,modifiers:hh(i.target)}:null}}function fh(t){return t.type==="implicit"?!0:t.type==="primitive"?t.insertionMode==="to"&&gh(t.target):!1}function gh(t){return t.type==="implicit"?!0:t.type==="primitive"?t.mark==null||t.mark.type==="cursor":!1}function dh(t){return t.type==="primitive"?hh(t.target):[]}function hh(t){return t.type==="primitive"&&t.modifiers!=null&&t.modifiers.length>0?t.modifiers:[]}async function Fv(t,e){return(await t({name:"getText",target:e})).returnValue.join(`
`)}async function OQ(t,e){await t({name:"remove",target:e})}function $D(t,e){let{anchor:r,rangeType:n,active:i}=t;if(r.type!=="primitive"||n!=="continuous")return t;let o=r.modifiers.map((s,l)=>[s,l]);for(let[s,l]of o.reverse())for(let u of NQ){let m=u.accept(s);if(m.accepted){let[d,g]=[r.modifiers.slice(0,l+1),r.modifiers.slice(l+1)],y={...t,anchor:g.length===0&&e?{type:"implicit"}:{type:"primitive",mark:r.mark,modifiers:g},active:Um(i,x=>{x.modifiers=x.modifiers.slice(Ko(x.modifiers,w=>u.accept(w).accepted)+1)})};return y=m.transformTarget?.(y)??y,{type:"primitive",mark:{type:"target",target:y},modifiers:d}}}return t}var NQ=[{accept(t){return t.type==="everyScope"&&t.scopeType.type!=="instance"?{accepted:!0,transformTarget(e){return{...e,exclusionScopeType:t.scopeType}}}:{accepted:!1}}},{accept(t){return{accepted:(t.type==="everyScope"||t.type==="relativeScope"||t.type==="ordinalScope")&&t.scopeType.type==="instance"}}}];function Cv(t,e){switch(t.type){case"list":return UQ(t,e);case"range":return jD(t,e);case"primitive":return yh(t,e);case"implicit":return t}}function UQ(t,e){return{...t,elements:t.elements.map((r,n)=>{let i=e.concat(t.elements.slice(0,n));switch(r.type){case"range":return jD(r,i);case"primitive":return yh(r,i)}})}}function jD(t,e){let r=HQ(t,e),n=t.anchor.type==="implicit"||t.anchor.mark==null;return $D(r,n)}function HQ(t,e){return{type:"range",rangeType:t.rangeType??"continuous",excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1,anchor:t.anchor.type==="implicit"?t.anchor:yh(t.anchor,e),active:yh(t.active,e.concat(t.anchor))}}function yh(t,e){let r=Iv(t.mark??(BQ(t)?$Q(e):null)??{type:"cursor"}),n=zD(t)??jQ(e)??zQ(e)??[];return{type:t.type,mark:r,modifiers:n}}function BQ(t){return t.modifiers?.some(e=>e.type==="inferPreviousMark")??!1}function zD(t){let e=t.modifiers?.filter(r=>r.type!=="inferPreviousMark")??[];return e.length!==0?e:void 0}function VQ(t){if(WQ(t))return[{type:"containingScope",scopeType:{type:"line"}}]}function WQ(t){let e=r=>r?.type==="lineNumber";return e(t.mark)?!0:t.mark?.type==="range"?e(t.mark.anchor)&&e(t.mark.active):!1}function $Q(t){return au(t,e=>e.mark)}function jQ(t){return au(t,zD)}function zQ(t){return au(t,VQ)}function au(t,e){for(let r=t.length-1;r>-1;--r){let n=t[r];switch(n.type){case"primitive":{let i=e(n);if(i!=null)return i;break}case"range":{let i=au([n.anchor],e);if(i!=null)return i;break}case"list":{let i=au(n.elements,e);if(i!=null)return i;break}}}}function Iv(t){switch(t.type){case"range":return{...t,anchor:Iv(t.anchor),active:Iv(t.active)};case"target":return{type:"target",target:Cv(t.target,[])};default:return t}}var Th=class{constructor(e,r,n,i,o){this.commandServerApi=e;this.debug=r;this.storedTargets=n;this.pipelineRunner=i;this.actions=o;this.finalStages=[];this.runAction=this.runAction.bind(this),this.inferenceContext=new Ov(this.debug)}async run(e){if(ra(e)){let m=await WD(this.commandServerApi,this.runAction,e);if(m!=null)return{fallback:m}}let{returnValue:r,thatSelections:n,thatTargets:i,sourceSelections:o,sourceTargets:s,instanceReferenceTargets:l,keyboardTargets:u}=await this.runAction(e.action);return this.storedTargets.set("that",qD(i,n)),this.storedTargets.set("source",qD(s,o)),this.storedTargets.set("instanceReference",l),this.storedTargets.set("keyboard",u,{history:!0}),{returnValue:r}}runAction(e){switch(this.inferenceContext.reset(),this.finalStages=[],e.name){case"replaceWithTarget":return this.actions.replaceWithTarget.run(this.getTargets(e.source),this.getDestinations(e.destination));case"moveToTarget":return this.actions.moveToTarget.run(this.getTargets(e.source),this.getDestinations(e.destination));case"swapTargets":return this.actions.swapTargets.run(this.getTargets(e.target1),this.getTargets(e.target2));case"callAsFunction":return this.actions.callAsFunction.run(this.getTargets(e.callee),this.getTargets(e.argument));case"wrapWithPairedDelimiter":return this.actions.wrapWithPairedDelimiter.run(this.getTargets(e.target),e.left,e.right);case"rewrapWithPairedDelimiter":return this.finalStages=this.actions.rewrapWithPairedDelimiter.getFinalStages(),this.actions.rewrapWithPairedDelimiter.run(this.getTargets(e.target),e.left,e.right);case"pasteFromClipboard":return this.actions.pasteFromClipboard.run(this.getDestinations(e.destination));case"executeCommand":return this.actions.executeCommand.run(this.getTargets(e.target),e.commandId,e.options);case"replace":return this.actions.replace.run(this.getDestinations(e.destination),e.replaceWith);case"highlight":return this.actions.highlight.run(this.getTargets(e.target),e.highlightId);case"generateSnippet":return this.actions.generateSnippet.run(this.getTargets(e.target),e.directory,e.snippetName);case"insertSnippet":return this.finalStages=this.actions.insertSnippet.getFinalStages(this.getDestinations(e.destination),e.snippetDescription),this.actions.insertSnippet.run(this.getDestinations(e.destination),e.snippetDescription);case"wrapWithSnippet":return this.finalStages=this.actions.wrapWithSnippet.getFinalStages(this.getTargets(e.target),e.snippetDescription),this.actions.wrapWithSnippet.run(this.getTargets(e.target),e.snippetDescription);case"editNew":return this.actions.editNew.run(this.getDestinations(e.destination));case"getText":return this.actions.getText.run(this.getTargets(e.target),e.options);case"parsed":return this.runAction(Qm(e.content,e.arguments));default:{let r=this.actions[e.name];if(r==null)throw new Error(`Unknown action: ${e.name}`);return this.finalStages=r.getFinalStages?.()??[],this.noAutomaticTokenExpansion=r.noAutomaticTokenExpansion??!1,r.run(this.getTargets(e.target))}}}getTargets(e){let r=this.inferenceContext.run(e);return this.pipelineRunner.run(r,{actionFinalStages:this.finalStages,noAutomaticTokenExpansion:this.noAutomaticTokenExpansion})}getDestinations(e){switch(e.type){case"list":return e.destinations.flatMap(r=>this.getDestinations(r));case"primitive":return this.getTargets(e.target).map(r=>r.toDestination(e.insertionMode));case"implicit":return this.getTargets({type:"implicit"}).map(r=>r.toDestination("to"))}}},Ov=class{constructor(e){this.debug=e;this.previousTargets=[]}run(e){let r=Cv(e,this.previousTargets);return this.debug.active&&(this.debug.log("Full target:"),this.debug.log(JSON.stringify(r,null,2))),this.previousTargets.push(e),r}reset(){this.previousTargets=[]}};function qD(t,e){if(t!=null&&e!=null)throw Error("Actions may only return full targets or selections for that mark");return e!=null?e.map(sc):t}var xh=class{constructor(e,r){this.readableHatMap=e;this.mark=r}run(){let e=this.readableHatMap.getToken(this.mark.symbolColor,this.mark.character);if(e==null)throw new Error(`Couldn't find mark ${this.mark.symbolColor} '${this.mark.character}'`);return[new Nt({editor:e.editor,contentRange:e.range,isReversed:!1,hasExplicitRange:!1})]}};var Sh=class{constructor(e){this.mark=e}run(){let{editorId:e,range:{start:r,end:n}}=this.mark,i=k().visibleTextEditors.find(s=>s.id===e);if(i==null)throw new Error(`Couldn't find editor '${e}'`);let o=new Y(r.line,r.character,n.line,n.character);return[new Nt({editor:i,contentRange:o,isReversed:!1,hasExplicitRange:!1})]}};var vh=class{constructor(e){this.mark=e}run(){let e=k().activeTextEditor;if(e==null)return[];let r=qQ(e,this.mark.lineNumberType,this.mark.lineNumber),n=e.document.lineAt(r).range;return[PS(e,!1,n)]}},qQ=(t,e,r)=>{switch(e){case"absolute":return r;case"relative":return t.selections[0].active.line+r;case"modulo100":{let i=t.visibleRanges[0].start.line,o=t.visibleRanges[t.visibleRanges.length-1].end.line,s=Math.floor(i/100)*100,l=[],u=[],m=s+r;for(;m<=o;)m>=i&&(t.visibleRanges.find(g=>m>=g.start.line&&m<=g.end.line)?l.push(m):u.push(m)),m+=100;if(l.length===1)return l[0];if(l.length+u.length>1)throw new Error("Multiple lines matching");if(u.length===1)return u[0];throw new Error("Line is not in viewport")}}};var bh=class{constructor(e){this.mark=e}run(){return[]}};var wh=class{constructor(e,r){this.markStageFactory=e;this.mark=r}run(){let e=this.markStageFactory.create(this.mark.anchor),r=this.markStageFactory.create(this.mark.active),n=e.run(),i=r.run();if(n.length!==1||i.length!==1)throw new Error("Expected single anchor and active target");return[wo(n[0],i[0],this.mark.excludeAnchor,this.mark.excludeActive)]}};var Eh=class{constructor(e,r){this.storedTargets=e;this.key=r}run(){let e=this.storedTargets.get(this.key);if(e==null||e.length===0)throw Error(`No available ${this.key} marks`);return e}};var _h=class{constructor(e,r){this.targetPipelineRunner=e;this.mark=r}run(){return this.targetPipelineRunner.run(this.mark.target)}};var Rh=class{constructor(e,r){this.readableHatMap=e;this.storedTargets=r;this.create=this.create.bind(this)}setPipelineRunner(e){this.targetPipelineRunner=e}create(e){switch(e.type){case"cursor":return new Fs;case"that":case"source":case"keyboard":return new Eh(this.storedTargets,e.type);case"decoratedSymbol":return new xh(this.readableHatMap,e);case"lineNumber":return new vh(e);case"range":return new wh(this,e);case"nothing":return new bh(e);case"target":return new _h(this.targetPipelineRunner,e);case"explicit":return new Sh(e);default:{let r=e,{type:n}=e;throw new Error(`Unknown mark: ${n}`)}}}};async function GD(t,e,r,n,i,o,s,l,u,m){r.active&&(r.log("command:"),r.log(JSON.stringify(m,null,2)));let d=lS(m),g=await n.getReadableMap(d.usePrePhraseSnapshot),y=KQ(t,e,s,r,o,g,i,l);for(let w of u)y=w.wrapCommandRunner(g,y);let x=await y.run(d);return await GQ(m,x)}async function GQ(t,e){if(ra(t))return e;if("returnValue"in e)return e.returnValue}function KQ(t,e,r,n,i,o,s,l){let u=new ac(r,i,new js(r)),m=new Rh(o,i),d=new Md(u,m);return m.setPipelineRunner(d),new Th(e,n,i,d,new mh(t,s,l,u))}var KD=["rust"];async function QD(t,e){await QQ(t,e)}async function QQ(t,e){let r=[];for(let n of KD)await t.loadLanguage(n),await e.loadLanguage(n),Pi(Cl[n]??{}).map(i=>{e.get(n)?.getScopeHandler({type:i})!=null&&r.push(`Scope '${i}' defined as both legacy and new for language ${n}`)});if(r.length>0)throw Error(r.join(`
`))}function YD(t){return cA(t)?fl(t.type).replace("."," "):t.type==="surroundingPair"?`Matching pair of ${fl(t.delimiter)}`:t.type==="customRegex"?`Regex \`${t.regex}\``:"Unknown scope type"}var kh=class{constructor(e){this.customSpokenFormGenerator=e;this.listeners=[];this.disposable=e.onDidChangeCustomSpokenForms(()=>this.onChange()),this.onDidChangeScopeInfo=this.onDidChangeScopeInfo.bind(this),this.getScopeTypeInfo=this.getScopeTypeInfo.bind(this),this.updateScopeTypeInfos()}onDidChangeScopeInfo(e){return e(this.getScopeTypeInfos()),this.listeners.push(e),{dispose:()=>{fr(this.listeners,e)}}}async onChange(){this.updateScopeTypeInfos(),this.listeners.forEach(e=>e(this.scopeInfos))}updateScopeTypeInfos(){let e=[...ta.filter(r=>r!=="instance").map(r=>({type:r})),...Pm.map(r=>({type:"surroundingPair",delimiter:r})),...this.customSpokenFormGenerator.getCustomRegexScopeTypes()];this.scopeInfos=e.map(r=>this.getScopeTypeInfo(r))}getScopeTypeInfos(){return this.scopeInfos}getScopeTypeInfo(e){return{scopeType:e,spokenForm:this.customSpokenFormGenerator.scopeTypeToSpokenForm(e),humanReadableName:YD(e),isLanguageSpecific:YQ(e)}}dispose(){this.disposable.dispose()}};function YQ(t){switch(t.type){case"string":case"argumentOrParameter":case"argumentList":case"anonymousFunction":case"attribute":case"branch":case"class":case"className":case"collectionItem":case"collectionKey":case"command":case"comment":case"private.fieldAccess":case"functionCall":case"functionCallee":case"functionName":case"ifStatement":case"instance":case"interior":case"list":case"map":case"name":case"namedFunction":case"regularExpression":case"statement":case"type":case"value":case"condition":case"section":case"sectionLevelOne":case"sectionLevelTwo":case"sectionLevelThree":case"sectionLevelFour":case"sectionLevelFive":case"sectionLevelSix":case"selector":case"private.switchStatementSubject":case"unit":case"xmlBothTags":case"xmlElement":case"xmlEndTag":case"xmlStartTag":case"part":case"chapter":case"subSection":case"subSubSection":case"namedParagraph":case"subParagraph":case"environment":case"textFragment":case"disqualifyDelimiter":case"pairDelimiter":return!0;case"character":case"word":case"token":case"identifier":case"line":case"sentence":case"paragraph":case"boundedParagraph":case"document":case"nonWhitespaceSequence":case"boundedNonWhitespaceSequence":case"url":case"notebookCell":case"surroundingPair":case"surroundingPairInterior":case"customRegex":case"glyph":return!1;case"oneOf":throw Error(`Can't decide whether scope type ${JSON.stringify(t,void 0,3)} is language-specific`)}}function Nv(t,e,r){if(!r)return t.document.range;let n=t.visibleRanges.reduce((s,l)=>s.union(l));n=t.document.range.intersection(n.with(n.start.translate(-10),n.end.translate(10)));let i=sm(Array.from(e.generateScopes(t,n.start,"forward",{containment:"required"})))?.domain??n,o=sm(Array.from(e.generateScopes(t,n.end,"forward",{containment:"required"})))?.domain??n;return i.union(o)}function Ma(t){return{contentRange:t.contentRange,removalRange:t.getRemovalRange(),removalHighlightRange:t.getRemovalHighlightRange(),leadingDelimiter:ZD(t.getLeadingDelimiterTarget()),trailingDelimiter:ZD(t.getTrailingDelimiterTarget()),interior:t.getInterior()?.map(Ma),boundary:t.getBoundary()?.map(Ma),insertionDelimiter:t.insertionDelimiter}}function ZD(t){return t!=null?Ma(t):void 0}function XD(t,e,r,n,i){let o={multipleTargets:!0};return Ns(e.generateScopes(t,n.start,"forward",{includeDescendantScopes:!0,distalPosition:n.end}),s=>({domain:s.domain,ranges:s.getTargets(!1).map(l=>({range:l.contentRange,targets:i?ZQ(r,l,o).map(Ma):void 0}))}))}function ZQ(t,e,r){try{return t.run(e,r)}catch(n){if(n.name==="NoContainingScopeError")return[];throw n}}function JD(t,e,r){return Ns(e.generateScopes(t,r.start,"forward",{includeDescendantScopes:!0,distalPosition:r.end}),n=>({domain:n.domain,targets:n.getTargets(!1).map(Ma)}))}var Ah=class{constructor(e,r){this.scopeHandlerFactory=e;this.modifierStageFactory=r;this.provideScopeRanges=this.provideScopeRanges.bind(this),this.provideIterationScopeRanges=this.provideIterationScopeRanges.bind(this)}provideScopeRanges(e,{scopeType:r,visibleOnly:n}){let i=this.scopeHandlerFactory.maybeCreate(r,e.document.languageId);return i==null?[]:JD(e,i,Nv(e,i,n))}provideIterationScopeRanges(e,{scopeType:r,visibleOnly:n,includeNestedTargets:i}){let{languageId:o}=e.document,s=this.scopeHandlerFactory.maybeCreate(r,o);if(s==null)return[];let l=this.scopeHandlerFactory.maybeCreate(s.iterationScopeType,o);return l==null?[]:XD(e,l,this.modifierStageFactory.create({type:"everyScope",scopeType:r}),Nv(e,s,n),i)}};var Ph=class{constructor(e,r){this.scopeRangeProvider=r;this.disposables=[];this.listeners=[];this.onChange=this.onChange.bind(this),this.onDidChangeScopeRanges=this.onDidChangeScopeRanges.bind(this),this.onDidChangeIterationScopeRanges=this.onDidChangeIterationScopeRanges.bind(this);let n=new Xn(k().configuration,()=>this.onChange());this.disposables.push(k().onDidChangeVisibleTextEditors(n.run),k().onDidOpenTextDocument(n.run),k().onDidCloseTextDocument(n.run),k().onDidChangeTextDocument(n.run),k().onDidChangeTextEditorVisibleRanges(n.run),e.onDidChangeDefinition(this.onChange),n)}onDidChangeScopeRanges(e,r){let n=()=>{k().visibleTextEditors.forEach(i=>{let o;try{o=this.scopeRangeProvider.provideScopeRanges(i,r)}catch(s){if(mt(k().messages,"ScopeRangeWatcher.provide",s.message),o=[],k().runMode==="test")throw s}e(i,o)})};return this.listeners.push(n),n(),{dispose:()=>{fr(this.listeners,n)}}}onDidChangeIterationScopeRanges(e,r){let n=()=>{k().visibleTextEditors.forEach(i=>{e(i,this.scopeRangeProvider.provideIterationScopeRanges(i,r))})};return this.listeners.push(n),n(),{dispose:()=>{fr(this.listeners,n)}}}onChange(){this.listeners.forEach(e=>e())}dispose(){this.disposables.forEach(({dispose:e})=>{try{e()}catch{}})}};var Mh=class{constructor(e){this.scopeHandlerFactory=e;this.getScopeSupport=this.getScopeSupport.bind(this),this.getIterationScopeSupport=this.getIterationScopeSupport.bind(this)}getScopeSupport(e,r){let{languageId:n}=e.document,i=this.scopeHandlerFactory.maybeCreate(r,n);return i==null?tL(n,r):eL(e,i)?0:1}getIterationScopeSupport(e,r){let{languageId:n}=e.document,i=this.scopeHandlerFactory.maybeCreate(r,n);if(i==null)return tL(n,r);let o=this.scopeHandlerFactory.maybeCreate(i.iterationScopeType,n);return o==null?3:eL(e,o)?0:1}};function eL(t,e){return!pA(e.generateScopes(t,new ye(0,0),"forward"))}function tL(t,e){switch(e.type){case"notebookCell":return 3;default:return Cl[t]?.[e.type]!=null?2:3}}var Dh=class{constructor(e,r,n){this.scopeSupportChecker=r;this.scopeInfoProvider=n;this.listeners=[];this.onChange=this.onChange.bind(this),this.onDidChangeScopeSupport=this.onDidChangeScopeSupport.bind(this);let i=new Xn(k().configuration,()=>this.onChange());this.disposable=uA(k().onDidOpenTextDocument(i.run),k().onDidCloseTextDocument(i.run),k().onDidChangeActiveTextEditor(i.run),k().onDidChangeTextDocument(i.run),e.onDidChangeDefinition(i.run),this.scopeInfoProvider.onDidChangeScopeInfo(this.onChange),i)}onDidChangeScopeSupport(e){return e(this.getSupportLevels()),this.listeners.push(e),{dispose:()=>{fr(this.listeners,e)}}}onChange(){if(this.listeners.length===0)return;let e=this.getSupportLevels();this.listeners.forEach(r=>r(e))}getSupportLevels(){let e=k().activeTextEditor,r=e==null?()=>3:o=>this.scopeSupportChecker.getScopeSupport(e,o),n=e==null?()=>3:o=>this.scopeSupportChecker.getIterationScopeSupport(e,o);return this.scopeInfoProvider.getScopeTypeInfos().map(o=>({...o,support:r(o.scopeType),iterationScopeSupport:n(o.scopeType)}))}dispose(){this.disposable.dispose()}};async function rL({ide:t,hats:e,treeSitterQueryProvider:r,treeSitter:n=new Pf,commandServerApi:i=new Ef,talonSpokenForms:o=new Af,snippets:s=new kf}){ef(t);let l=new yf(t),u=new wf,m=new rf,d=new hf(t,m),g=new Lf(o),y=e!=null?new vf(u,l,e,i):new _f;y.allocateHats();let x=r?await Sd.create(t,n,r):new Rf;t.disposeOnExit(u,x,y,l,d);let w=[],E,U=V=>(E=V,GD(n,i,l,y,s,m,x,u,w,V));return{commandApi:{runCommand(V){return U(V)},runCommandSafe(...V){return U(Mm(V))},repeatPreviousCommand(){if(E==null)throw new Error("No previous command");return U(E)}},scopeProvider:JQ(x,m,g),customSpokenFormGenerator:g,storedTargets:m,hatTokenMap:y,injectIde:ef,runIntegrationTests:()=>QD(n,x),addCommandRunnerDecorator:V=>{w.push(V)}}}function JQ(t,e,r){let n=new js(t),i=new Ah(n,new ac(t,e,n)),o=new Ph(t,i),s=new Mh(n),l=new kh(r),u=new Dh(t,s,l);return{provideScopeRanges:i.provideScopeRanges,provideIterationScopeRanges:i.provideIterationScopeRanges,onDidChangeScopeRanges:o.onDidChangeScopeRanges,onDidChangeIterationScopeRanges:o.onDidChangeIterationScopeRanges,getScopeSupport:s.getScopeSupport,getIterationScopeSupport:s.getIterationScopeSupport,onDidChangeScopeSupport:u.onDidChangeScopeSupport,getScopeInfo:l.getScopeTypeInfo,onDidChangeScopeInfo:l.onDidChangeScopeInfo}}function nL(t,e){switch(e.type){case"UntypedTarget":return new Nt({editor:t,isReversed:e.isReversed,contentRange:Sm(e.contentRange),hasExplicitRange:e.hasExplicitRange});case"LineTarget":return new gr({editor:t,isReversed:e.isReversed,contentRange:Sm(e.contentRange)});default:throw Error(`Unsupported target type ${e.type}`)}}var DCe=Symbol("unused");var su=class{constructor(e){this.position=e}},LCe={$0:new su(0),$1:new su(1),$2:new su(2)};var iL=require("node:events"),Lh=class{constructor(){this.apis=new Map,this.commands=new Map,this.eventEmitter=new iL.EventEmitter}registerExtensionApi(e,r){this.apis.set(e,r)}getExtensionApi(e){return this.apis.get(e)}registerCommand(e,r){this.commands.set(e,r)}async executeCommand(e,...r){return await this.commands.get(e)(...r)}onEvent(e,r){return this.eventEmitter.on(e,r)}emitEvent(e,...r){return this.eventEmitter.emit(e,...r)}};function Kr(){return global._neovimRegistry==null&&(global._neovimRegistry=new Lh),global._neovimRegistry}var oL="pokey.cursorless";async function Fh(t,e){let r='return require("cursorless").buffer_get_selection()',[n,i,o,s,l]=await e.executeLua(r,[]),u;return l===!0?u=[new $e(new ye(o-1,s-1),new ye(n-1,i-1))]:u=[new $e(new ye(n-1,i-1),new ye(o-1,s-1))],console.debug(`bufferGetSelections(): selections=(${u[0].start.line}, ${u[0].start.character}), (${u[0].end.line}, ${u[0].end.character}) neovim=(${n},${i}),(${o},${s}),reverse=${l}`),u}async function aL(t,e){if(e.length!==1)throw new Error("bufferSetSelections() only supports one selection");let r=`return require("cursorless").select_range(${e[0].start.line+1}, ${e[0].start.character}, ${e[0].end.line+1}, ${e[0].end.character})`;console.debug(`bufferSetSelections() selections=(${e[0].start.line},${e[0].start.character}),(${e[0].end.line},${e[0].end.character}) luaCode="${r}"`),await t.executeLua(r,[])}async function sL(t,e,r){let n='return require("cursorless").window_get_visible_lines()',[i,o]=await e.executeLua(n,[]),s=new Y(new ye(i-1,0),new ye(o-1,r[o-1].length-1));return console.debug(`windowGetVisibleRanges(): range=(${s.start.line}, ${s.start.character}), (${s.end.line}, ${s.end.character})`),[s]}async function cL(t){return await t.executeLua('return require("cursorless.utils").cursorless_nvim_path()',[])}async function Ih(t,e){await e.callFunction("setreg",["*",t])}async function lL(t){return await t.callFunction("getreg",["*"])}async function uL(t){await t.executeLua('return require("cursorless.utils").paste()',[])}async function pL(t){await t.executeLua('return require("cursorless.utils").mode_switch_nt()',[])}async function mL(t){await t.executeLua('return require("cursorless.utils").mode_switch_t()',[])}async function fL(t,e){let r=`vim.notify("${e}")`;await t.executeLua(r,[])}var e7={clipboardCopy:{acceptsLocation:!1},clipboardPaste:!0,toggleLineComment:void 0,indentLine:void 0,outdentLine:void 0,rename:void 0,quickFix:void 0,revealDefinition:void 0,revealTypeDefinition:void 0,showHover:void 0,showDebugHover:void 0,extractVariable:void 0,fold:void 0,highlight:{acceptsLocation:!0},unfold:void 0,showReferences:void 0,insertLineAfter:void 0,gitAccept:void 0,gitRevert:void 0,gitStage:void 0,gitUnstage:void 0},Ch=class{constructor(){this.commands=e7}};var cu=class{constructor(e){this.client=e}async readText(){return await lL(this.client)}async writeText(e){return await Ih(e,this.client)}};var Oh=Hr(Uv(),1);var uu=class{constructor(){this.notifier=new tr;this.mocks={...fm};this.scopes=[];this.onDidChangeConfiguration=this.notifier.registerListener;this.onDidChangeConfiguration=this.onDidChangeConfiguration.bind(this)}getOwnConfiguration(e,r){if(r!=null){for(let{scope:n,values:i}of this.scopes)if(t7(n,r))return(0,Oh.get)(i,e)??(0,Oh.get)(this.mocks,e)}return(0,Oh.get)(this.mocks,e)}mockConfiguration(e,r){this.mocks[e]=r,this.notifier.notifyListeners()}mockConfigurationScope(e,r,n=!1){this.scopes.push({scope:e,values:r}),n||this.notifier.notifyListeners()}};function t7(t,e){return t.languageId===e.languageId}async function Hv(t,e,r,n){console.debug("neovimEdit() [unsorted]:");for(let s of n)console.debug(`	range=${JSON.stringify(s.range)}, text='${s.text}', isReplace=${s.isReplace}`);n.sort((s,l)=>(dL(s)||gL(s))&&(dL(l)||gL(l))?1:s.range.start.line===l.range.start.line?l.range.start.character-s.range.start.character:l.range.start.line-s.range.start.line),console.debug("neovimEdit() [sorted]:");for(let s of n)console.debug(`	range=${JSON.stringify(s.range)}, text='${s.text}', isReplace=${s.isReplace}`);let i=e.getTextDocument(await t.window.buffer),o=[];for(let s of n)o.push({range:s.range,rangeOffset:i.offsetAt(s.range.start),rangeLength:i.offsetAt(s.range.end)-i.offsetAt(s.range.start),text:s.text});Kr().emitEvent("onDidChangeTextDocument",{document:i,contentChanges:o});for(let s of n){let{range:l,text:u,isReplace:m}=s;u===""?await hL(t,l):l.isEmpty&&!m?await yL(t,l.start,u):await r7(t,l,u)}return await e.updateTextEditor(),!0}async function hL(t,e){console.debug(`neovimDelete(): range=${JSON.stringify(e)}`);let r=await t.window.buffer,n=(await r.getLines({start:e.end.line,end:e.end.line+1,strictIndexing:!0}))[0],i=n.slice(e.end.character);if(e.start.line===e.end.line){let l=n.slice(0,e.start.character)+i;await r.setLines(l,{start:e.start.line,end:e.start.line+1,strictIndexing:!0});return}if(e.start.character===0){await r.setLines(i,{start:e.start.line,end:e.end.line+1,strictIndexing:!0});return}let o=(await r.getLines({start:e.start.line,end:e.start.line+1,strictIndexing:!0}))[0],s=o.slice(0,e.start.character);if(e.start.character<=o.length){await r.setLines(s+i,{start:e.start.line,end:e.end.line+1,strictIndexing:!0});return}await r.setLines([s,i],{start:e.start.line,end:e.end.line+1,strictIndexing:!0})}async function yL(t,e,r){console.debug(`neovimInsert(): position=${JSON.stringify(e)}, text='${r}'`);let n=r.replace(/(?:\r\n|\r|\n)/g,`
`).split(`
`),i=await t.window.buffer,o=(await i.getLines({start:e.line,end:e.line+1,strictIndexing:!0}))[0],s=o.slice(0,e.character),l=o.slice(e.character);if(n.length===1){let d=s+n[0]+l;await i.setLines(d,{start:e.line,end:e.line+1,strictIndexing:!0});return}let u=s+n[0],m=n[n.length-1]+l;await i.setLines([u,...n.slice(1,n.length-1),m],{start:e.line,end:e.line+1,strictIndexing:!0})}async function r7(t,e,r){console.debug(`neovimReplace(): range=${JSON.stringify(e)}, text='${r}'`),await hL(t,e),await yL(t,e.start,r)}function dL(t){return t.range.isEmpty&&!t.isReplace}function gL(t){return t.text!==""&&!!(!t.range.isEmpty||t.isReplace)}function TL(t){return Kr().onEvent("onDidChangeTextDocument",t),SL()}function xL(t,e,r){return Kr().onEvent("onDidOpenTextDocument",t),SL()}function SL(){return{dispose(){}}}var pu=class{constructor(){this.data={...dm}}get(e){return this.data[e]}set(e,r){return this.data[e]=r,Promise.resolve()}};var _I=Hr(Uv(),1);var mu=class{async showMessage(e,r,n,...i){}};async function vL(t,e){let r=e.activeTextEditor,n=await t.window,i=await Fh(n,t),o=r.document.getText(i[0]);await Ih(o,t)}async function bL(t,e){await uL(t)}var Nh=class{constructor(e,r,n,i,o,s,l){this.id=e;this.client=r;this.neovimIDE=n;this.window=i;this._document=o,this._selections=l,this._visibleRanges=s}get document(){return this._document}updateDocument(e,r,n,i){if(n)this._document=n;else if(i)this._document.update(i);else throw Error("updateDocument(): invalid arguments");return this._selections=r,this._visibleRanges=e,this._document}get selections(){return this._selections}async setSelections(e){this._selections=e,await aL(this.client,e)}get visibleRanges(){return this._visibleRanges}get options(){throw Error("get options Not implemented")}set options(e){throw Error("set options Not implemented")}get isActive(){return!0}isEqual(e){return this.id===e.id}async revealRange(e){}revealLine(e,r){throw Error("revealLine Not implemented")}async edit(e){return await Hv(this.client,this.neovimIDE,this.window,e)}focus(){return Promise.resolve()}editNewNotebookCellAbove(){throw Error("editNewNotebookCellAbove Not implemented")}editNewNotebookCellBelow(){throw Error("editNewNotebookCellBelow Not implemented")}openLink(e,r){throw Error("openLink Not implemented")}fold(e){throw Error("fold Not implemented")}unfold(e){throw Error("unfold Not implemented")}toggleBreakpoint(e){throw Error("toggleBreakpoint Not implemented")}async toggleLineComment(e){throw Error("toggleLineComment Not implemented")}async clipboardCopy(e){await vL(this.client,this.neovimIDE)}async clipboardPaste(){await bL(this.client,this.neovimIDE)}async indentLine(e){throw Error("indentLine Not implemented")}async outdentLine(e){throw Error("outdentLine Not implemented")}async insertLineAfter(e){throw Error("insertLineAfter Not implemented")}insertSnippet(e,r){throw Error("insertSnippet Not implemented")}async rename(e){throw Error("rename Not implemented")}async showReferences(e){throw Error("showReferences Not implemented")}async quickFix(e){throw Error("quickFix Not implemented")}async revealDefinition(e){throw Error("revealDefinition Not implemented")}async revealTypeDefinition(e){throw Error("revealTypeDefinition Not implemented")}async showHover(e){throw Error("showHover Not implemented")}async showDebugHover(e){throw Error("showDebugHover Not implemented")}async extractVariable(e){throw Error("extractVariable Not implemented")}async gitAccept(e){throw Error("gitAccept Not implemented")}async gitRevert(e){throw Error("gitRevert Not implemented")}async gitStage(e){throw Error("gitStage Not implemented")}async gitUnstage(e){throw Error("gitUnstage Not implemented")}};var aw=Hr(require("path"),1);var wL;(()=>{"use strict";var t={975:C=>{function A(F){if(typeof F!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(F))}function q(F,N){for(var j,X="",Q=0,re=-1,we=0,_e=0;_e<=F.length;++_e){if(_e<F.length)j=F.charCodeAt(_e);else{if(j===47)break;j=47}if(j===47){if(!(re===_e-1||we===1))if(re!==_e-1&&we===2){if(X.length<2||Q!==2||X.charCodeAt(X.length-1)!==46||X.charCodeAt(X.length-2)!==46){if(X.length>2){var Qe=X.lastIndexOf("/");if(Qe!==X.length-1){Qe===-1?(X="",Q=0):Q=(X=X.slice(0,Qe)).length-1-X.lastIndexOf("/"),re=_e,we=0;continue}}else if(X.length===2||X.length===1){X="",Q=0,re=_e,we=0;continue}}N&&(X.length>0?X+="/..":X="..",Q=2)}else X.length>0?X+="/"+F.slice(re+1,_e):X=F.slice(re+1,_e),Q=_e-re-1;re=_e,we=0}else j===46&&we!==-1?++we:we=-1}return X}var Z={resolve:function(){for(var F,N="",j=!1,X=arguments.length-1;X>=-1&&!j;X--){var Q;X>=0?Q=arguments[X]:(F===void 0&&(F=process.cwd()),Q=F),A(Q),Q.length!==0&&(N=Q+"/"+N,j=Q.charCodeAt(0)===47)}return N=q(N,!j),j?N.length>0?"/"+N:"/":N.length>0?N:"."},normalize:function(F){if(A(F),F.length===0)return".";var N=F.charCodeAt(0)===47,j=F.charCodeAt(F.length-1)===47;return(F=q(F,!N)).length!==0||N||(F="."),F.length>0&&j&&(F+="/"),N?"/"+F:F},isAbsolute:function(F){return A(F),F.length>0&&F.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var F,N=0;N<arguments.length;++N){var j=arguments[N];A(j),j.length>0&&(F===void 0?F=j:F+="/"+j)}return F===void 0?".":Z.normalize(F)},relative:function(F,N){if(A(F),A(N),F===N||(F=Z.resolve(F))===(N=Z.resolve(N)))return"";for(var j=1;j<F.length&&F.charCodeAt(j)===47;++j);for(var X=F.length,Q=X-j,re=1;re<N.length&&N.charCodeAt(re)===47;++re);for(var we=N.length-re,_e=Q<we?Q:we,Qe=-1,Ue=0;Ue<=_e;++Ue){if(Ue===_e){if(we>_e){if(N.charCodeAt(re+Ue)===47)return N.slice(re+Ue+1);if(Ue===0)return N.slice(re+Ue)}else Q>_e&&(F.charCodeAt(j+Ue)===47?Qe=Ue:Ue===0&&(Qe=0));break}var ht=F.charCodeAt(j+Ue);if(ht!==N.charCodeAt(re+Ue))break;ht===47&&(Qe=Ue)}var $t="";for(Ue=j+Qe+1;Ue<=X;++Ue)Ue!==X&&F.charCodeAt(Ue)!==47||($t.length===0?$t+="..":$t+="/..");return $t.length>0?$t+N.slice(re+Qe):(re+=Qe,N.charCodeAt(re)===47&&++re,N.slice(re))},_makeLong:function(F){return F},dirname:function(F){if(A(F),F.length===0)return".";for(var N=F.charCodeAt(0),j=N===47,X=-1,Q=!0,re=F.length-1;re>=1;--re)if((N=F.charCodeAt(re))===47){if(!Q){X=re;break}}else Q=!1;return X===-1?j?"/":".":j&&X===1?"//":F.slice(0,X)},basename:function(F,N){if(N!==void 0&&typeof N!="string")throw new TypeError('"ext" argument must be a string');A(F);var j,X=0,Q=-1,re=!0;if(N!==void 0&&N.length>0&&N.length<=F.length){if(N.length===F.length&&N===F)return"";var we=N.length-1,_e=-1;for(j=F.length-1;j>=0;--j){var Qe=F.charCodeAt(j);if(Qe===47){if(!re){X=j+1;break}}else _e===-1&&(re=!1,_e=j+1),we>=0&&(Qe===N.charCodeAt(we)?--we==-1&&(Q=j):(we=-1,Q=_e))}return X===Q?Q=_e:Q===-1&&(Q=F.length),F.slice(X,Q)}for(j=F.length-1;j>=0;--j)if(F.charCodeAt(j)===47){if(!re){X=j+1;break}}else Q===-1&&(re=!1,Q=j+1);return Q===-1?"":F.slice(X,Q)},extname:function(F){A(F);for(var N=-1,j=0,X=-1,Q=!0,re=0,we=F.length-1;we>=0;--we){var _e=F.charCodeAt(we);if(_e!==47)X===-1&&(Q=!1,X=we+1),_e===46?N===-1?N=we:re!==1&&(re=1):N!==-1&&(re=-1);else if(!Q){j=we+1;break}}return N===-1||X===-1||re===0||re===1&&N===X-1&&N===j+1?"":F.slice(N,X)},format:function(F){if(F===null||typeof F!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof F);return function(N,j){var X=j.dir||j.root,Q=j.base||(j.name||"")+(j.ext||"");return X?X===j.root?X+Q:X+"/"+Q:Q}(0,F)},parse:function(F){A(F);var N={root:"",dir:"",base:"",ext:"",name:""};if(F.length===0)return N;var j,X=F.charCodeAt(0),Q=X===47;Q?(N.root="/",j=1):j=0;for(var re=-1,we=0,_e=-1,Qe=!0,Ue=F.length-1,ht=0;Ue>=j;--Ue)if((X=F.charCodeAt(Ue))!==47)_e===-1&&(Qe=!1,_e=Ue+1),X===46?re===-1?re=Ue:ht!==1&&(ht=1):re!==-1&&(ht=-1);else if(!Qe){we=Ue+1;break}return re===-1||_e===-1||ht===0||ht===1&&re===_e-1&&re===we+1?_e!==-1&&(N.base=N.name=we===0&&Q?F.slice(1,_e):F.slice(we,_e)):(we===0&&Q?(N.name=F.slice(1,re),N.base=F.slice(1,_e)):(N.name=F.slice(we,re),N.base=F.slice(we,_e)),N.ext=F.slice(re,_e)),we>0?N.dir=F.slice(0,we-1):Q&&(N.dir="/"),N},sep:"/",delimiter:":",win32:null,posix:null};Z.posix=Z,C.exports=Z}},e={};function r(C){var A=e[C];if(A!==void 0)return A.exports;var q=e[C]={exports:{}};return t[C](q,q.exports,r),q.exports}r.d=(C,A)=>{for(var q in A)r.o(A,q)&&!r.o(C,q)&&Object.defineProperty(C,q,{enumerable:!0,get:A[q]})},r.o=(C,A)=>Object.prototype.hasOwnProperty.call(C,A),r.r=C=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(C,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(C,"__esModule",{value:!0})};var n={};let i;r.r(n),r.d(n,{URI:()=>y,Utils:()=>H}),typeof process=="object"?i=process.platform==="win32":typeof navigator=="object"&&(i=navigator.userAgent.indexOf("Windows")>=0);let o=/^\w[\w\d+.-]*$/,s=/^\//,l=/^\/\//;function u(C,A){if(!C.scheme&&A)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${C.authority}", path: "${C.path}", query: "${C.query}", fragment: "${C.fragment}"}`);if(C.scheme&&!o.test(C.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(C.path){if(C.authority){if(!s.test(C.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(l.test(C.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}let m="",d="/",g=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class y{static isUri(A){return A instanceof y||!!A&&typeof A.authority=="string"&&typeof A.fragment=="string"&&typeof A.path=="string"&&typeof A.query=="string"&&typeof A.scheme=="string"&&typeof A.fsPath=="string"&&typeof A.with=="function"&&typeof A.toString=="function"}scheme;authority;path;query;fragment;constructor(A,q,Z,F,N,j=!1){typeof A=="object"?(this.scheme=A.scheme||m,this.authority=A.authority||m,this.path=A.path||m,this.query=A.query||m,this.fragment=A.fragment||m):(this.scheme=function(X,Q){return X||Q?X:"file"}(A,j),this.authority=q||m,this.path=function(X,Q){switch(X){case"https":case"http":case"file":Q?Q[0]!==d&&(Q=d+Q):Q=d}return Q}(this.scheme,Z||m),this.query=F||m,this.fragment=N||m,u(this,j))}get fsPath(){return z(this,!1)}with(A){if(!A)return this;let{scheme:q,authority:Z,path:F,query:N,fragment:j}=A;return q===void 0?q=this.scheme:q===null&&(q=m),Z===void 0?Z=this.authority:Z===null&&(Z=m),F===void 0?F=this.path:F===null&&(F=m),N===void 0?N=this.query:N===null&&(N=m),j===void 0?j=this.fragment:j===null&&(j=m),q===this.scheme&&Z===this.authority&&F===this.path&&N===this.query&&j===this.fragment?this:new w(q,Z,F,N,j)}static parse(A,q=!1){let Z=g.exec(A);return Z?new w(Z[2]||m,ge(Z[4]||m),ge(Z[5]||m),ge(Z[7]||m),ge(Z[9]||m),q):new w(m,m,m,m,m)}static file(A){let q=m;if(i&&(A=A.replace(/\\/g,d)),A[0]===d&&A[1]===d){let Z=A.indexOf(d,2);Z===-1?(q=A.substring(2),A=d):(q=A.substring(2,Z),A=A.substring(Z)||d)}return new w("file",q,A,m,m)}static from(A){let q=new w(A.scheme,A.authority,A.path,A.query,A.fragment);return u(q,!0),q}toString(A=!1){return ie(this,A)}toJSON(){return this}static revive(A){if(A){if(A instanceof y)return A;{let q=new w(A);return q._formatted=A.external,q._fsPath=A._sep===x?A.fsPath:null,q}}return A}}let x=i?1:void 0;class w extends y{_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=z(this,!1)),this._fsPath}toString(A=!1){return A?ie(this,!0):(this._formatted||(this._formatted=ie(this,!1)),this._formatted)}toJSON(){let A={$mid:1};return this._fsPath&&(A.fsPath=this._fsPath,A._sep=x),this._formatted&&(A.external=this._formatted),this.path&&(A.path=this.path),this.scheme&&(A.scheme=this.scheme),this.authority&&(A.authority=this.authority),this.query&&(A.query=this.query),this.fragment&&(A.fragment=this.fragment),A}}let E={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function U(C,A,q){let Z,F=-1;for(let N=0;N<C.length;N++){let j=C.charCodeAt(N);if(j>=97&&j<=122||j>=65&&j<=90||j>=48&&j<=57||j===45||j===46||j===95||j===126||A&&j===47||q&&j===91||q&&j===93||q&&j===58)F!==-1&&(Z+=encodeURIComponent(C.substring(F,N)),F=-1),Z!==void 0&&(Z+=C.charAt(N));else{Z===void 0&&(Z=C.substr(0,N));let X=E[j];X!==void 0?(F!==-1&&(Z+=encodeURIComponent(C.substring(F,N)),F=-1),Z+=X):F===-1&&(F=N)}}return F!==-1&&(Z+=encodeURIComponent(C.substring(F))),Z!==void 0?Z:C}function V(C){let A;for(let q=0;q<C.length;q++){let Z=C.charCodeAt(q);Z===35||Z===63?(A===void 0&&(A=C.substr(0,q)),A+=E[Z]):A!==void 0&&(A+=C[q])}return A!==void 0?A:C}function z(C,A){let q;return q=C.authority&&C.path.length>1&&C.scheme==="file"?`//${C.authority}${C.path}`:C.path.charCodeAt(0)===47&&(C.path.charCodeAt(1)>=65&&C.path.charCodeAt(1)<=90||C.path.charCodeAt(1)>=97&&C.path.charCodeAt(1)<=122)&&C.path.charCodeAt(2)===58?A?C.path.substr(1):C.path[1].toLowerCase()+C.path.substr(2):C.path,i&&(q=q.replace(/\//g,"\\")),q}function ie(C,A){let q=A?V:U,Z="",{scheme:F,authority:N,path:j,query:X,fragment:Q}=C;if(F&&(Z+=F,Z+=":"),(N||F==="file")&&(Z+=d,Z+=d),N){let re=N.indexOf("@");if(re!==-1){let we=N.substr(0,re);N=N.substr(re+1),re=we.lastIndexOf(":"),re===-1?Z+=q(we,!1,!1):(Z+=q(we.substr(0,re),!1,!1),Z+=":",Z+=q(we.substr(re+1),!1,!0)),Z+="@"}N=N.toLowerCase(),re=N.lastIndexOf(":"),re===-1?Z+=q(N,!1,!0):(Z+=q(N.substr(0,re),!1,!0),Z+=N.substr(re))}if(j){if(j.length>=3&&j.charCodeAt(0)===47&&j.charCodeAt(2)===58){let re=j.charCodeAt(1);re>=65&&re<=90&&(j=`/${String.fromCharCode(re+32)}:${j.substr(3)}`)}else if(j.length>=2&&j.charCodeAt(1)===58){let re=j.charCodeAt(0);re>=65&&re<=90&&(j=`${String.fromCharCode(re+32)}:${j.substr(2)}`)}Z+=q(j,!0,!1)}return X&&(Z+="?",Z+=q(X,!1,!1)),Q&&(Z+="#",Z+=A?Q:U(Q,!1,!1)),Z}function le(C){try{return decodeURIComponent(C)}catch{return C.length>3?C.substr(0,3)+le(C.substr(3)):C}}let ue=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function ge(C){return C.match(ue)?C.replace(ue,A=>le(A)):C}var ut=r(975);let Wt=ut.posix||ut,gt="/";var H;(function(C){C.joinPath=function(A,...q){return A.with({path:Wt.join(A.path,...q)})},C.resolvePath=function(A,...q){let Z=A.path,F=!1;Z[0]!==gt&&(Z=gt+Z,F=!0);let N=Wt.resolve(Z,...q);return F&&N[0]===gt&&!A.authority&&(N=N.substring(1)),A.with({path:N})},C.dirname=function(A){if(A.path.length===0||A.path===gt)return A;let q=Wt.dirname(A.path);return q.length===1&&q.charCodeAt(0)===46&&(q=""),A.with({path:q})},C.basename=function(A){return Wt.basename(A.path)},C.extname=function(A){return Wt.extname(A.path)}})(H||(H={})),wL=n})();var{URI:EL,Utils:M1e}=wL;var zL=Hr(NL(),1);var du=t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>65536)throw new TypeError("pattern is too long")};var u7={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},gu=t=>t.replace(/[[\]\\-]/g,"\\$&"),p7=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),UL=t=>t.join(""),HL=(t,e)=>{let r=e;if(t.charAt(r)!=="[")throw new Error("not in a brace expression");let n=[],i=[],o=r+1,s=!1,l=!1,u=!1,m=!1,d=r,g="";e:for(;o<t.length;){let E=t.charAt(o);if((E==="!"||E==="^")&&o===r+1){m=!0,o++;continue}if(E==="]"&&s&&!u){d=o+1;break}if(s=!0,E==="\\"&&!u){u=!0,o++;continue}if(E==="["&&!u){for(let[U,[V,z,ie]]of Object.entries(u7))if(t.startsWith(U,o)){if(g)return["$.",!1,t.length-r,!0];o+=U.length,ie?i.push(V):n.push(V),l=l||z;continue e}}if(u=!1,g){E>g?n.push(gu(g)+"-"+gu(E)):E===g&&n.push(gu(E)),g="",o++;continue}if(t.startsWith("-]",o+1)){n.push(gu(E+"-")),o+=2;continue}if(t.startsWith("-",o+1)){g=E,o+=2;continue}n.push(gu(E)),o++}if(d<o)return["",!1,0,!1];if(!n.length&&!i.length)return["$.",!1,t.length-r,!0];if(i.length===0&&n.length===1&&/^\\?.$/.test(n[0])&&!m){let E=n[0].length===2?n[0].slice(-1):n[0];return[p7(E),!1,d-r,!1]}let y="["+(m?"^":"")+UL(n)+"]",x="["+(m?"":"^")+UL(i)+"]";return[n.length&&i.length?"("+y+"|"+x+")":n.length?y:x,l,d-r,!0]};var Hn=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");var m7=new Set(["!","?","+","*","@"]),BL=t=>m7.has(t),f7="(?!(?:^|/)\\.\\.?(?:$|/))",Uh="(?!\\.)",d7=new Set(["[","."]),g7=new Set(["..","."]),h7=new Set("().*{}+?[]^$\\!"),y7=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Wv="[^/]",VL=Wv+"*?",WL=Wv+"+?",fc=class t{type;#e;#t;#o=!1;#n=[];#a;#S;#l;#p=!1;#s;#c;#i=!1;constructor(e,r,n={}){this.type=e,e&&(this.#t=!0),this.#a=r,this.#e=this.#a?this.#a.#e:this,this.#s=this.#e===this?n:this.#e.#s,this.#l=this.#e===this?[]:this.#e.#l,e==="!"&&!this.#e.#p&&this.#l.push(this),this.#S=this.#a?this.#a.#n.length:0}get hasMagic(){if(this.#t!==void 0)return this.#t;for(let e of this.#n)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#t=!0;return this.#t}toString(){return this.#c!==void 0?this.#c:this.type?this.#c=this.type+"("+this.#n.map(e=>String(e)).join("|")+")":this.#c=this.#n.map(e=>String(e)).join("")}#h(){if(this!==this.#e)throw new Error("should only call on root");if(this.#p)return this;this.toString(),this.#p=!0;let e;for(;e=this.#l.pop();){if(e.type!=="!")continue;let r=e,n=r.#a;for(;n;){for(let i=r.#S+1;!n.type&&i<n.#n.length;i++)for(let o of e.#n){if(typeof o=="string")throw new Error("string part in extglob AST??");o.copyIn(n.#n[i])}r=n,n=r.#a}}return this}push(...e){for(let r of e)if(r!==""){if(typeof r!="string"&&!(r instanceof t&&r.#a===this))throw new Error("invalid part: "+r);this.#n.push(r)}}toJSON(){let e=this.type===null?this.#n.slice().map(r=>typeof r=="string"?r:r.toJSON()):[this.type,...this.#n.map(r=>r.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#p&&this.#a?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#a?.isStart())return!1;if(this.#S===0)return!0;let e=this.#a;for(let r=0;r<this.#S;r++){let n=e.#n[r];if(!(n instanceof t&&n.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#a?.type==="!")return!0;if(!this.#a?.isEnd())return!1;if(!this.type)return this.#a?.isEnd();let e=this.#a?this.#a.#n.length:0;return this.#S===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let r=new t(this.type,e);for(let n of this.#n)r.copyIn(n);return r}static#y(e,r,n,i){let o=!1,s=!1,l=-1,u=!1;if(r.type===null){let x=n,w="";for(;x<e.length;){let E=e.charAt(x++);if(o||E==="\\"){o=!o,w+=E;continue}if(s){x===l+1?(E==="^"||E==="!")&&(u=!0):E==="]"&&!(x===l+2&&u)&&(s=!1),w+=E;continue}else if(E==="["){s=!0,l=x,u=!1,w+=E;continue}if(!i.noext&&BL(E)&&e.charAt(x)==="("){r.push(w),w="";let U=new t(E,r);x=t.#y(e,U,x,i),r.push(U);continue}w+=E}return r.push(w),x}let m=n+1,d=new t(null,r),g=[],y="";for(;m<e.length;){let x=e.charAt(m++);if(o||x==="\\"){o=!o,y+=x;continue}if(s){m===l+1?(x==="^"||x==="!")&&(u=!0):x==="]"&&!(m===l+2&&u)&&(s=!1),y+=x;continue}else if(x==="["){s=!0,l=m,u=!1,y+=x;continue}if(BL(x)&&e.charAt(m)==="("){d.push(y),y="";let w=new t(x,d);d.push(w),m=t.#y(e,w,m,i);continue}if(x==="|"){d.push(y),y="",g.push(d),d=new t(null,r);continue}if(x===")")return y===""&&r.#n.length===0&&(r.#i=!0),d.push(y),y="",r.push(...g,d),m;y+=x}return r.type=null,r.#t=void 0,r.#n=[e.substring(n-1)],m}static fromGlob(e,r={}){let n=new t(null,void 0,r);return t.#y(e,n,0,r),n}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[r,n,i,o]=this.toRegExpSource();if(!(i||this.#t||this.#s.nocase&&!this.#s.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return n;let l=(this.#s.nocase?"i":"")+(o?"u":"");return Object.assign(new RegExp(`^${r}$`,l),{_src:r,_glob:e})}get options(){return this.#s}toRegExpSource(e){let r=e??!!this.#s.dot;if(this.#e===this&&this.#h(),!this.type){let u=this.isStart()&&this.isEnd(),m=this.#n.map(x=>{let[w,E,U,V]=typeof x=="string"?t.#m(x,this.#t,u):x.toRegExpSource(e);return this.#t=this.#t||U,this.#o=this.#o||V,w}).join(""),d="";if(this.isStart()&&typeof this.#n[0]=="string"&&!(this.#n.length===1&&g7.has(this.#n[0]))){let w=d7,E=r&&w.has(m.charAt(0))||m.startsWith("\\.")&&w.has(m.charAt(2))||m.startsWith("\\.\\.")&&w.has(m.charAt(4)),U=!r&&!e&&w.has(m.charAt(0));d=E?f7:U?Uh:""}let g="";return this.isEnd()&&this.#e.#p&&this.#a?.type==="!"&&(g="(?:$|\\/)"),[d+m+g,Hn(m),this.#t=!!this.#t,this.#o]}let n=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",o=this.#f(r);if(this.isStart()&&this.isEnd()&&!o&&this.type!=="!"){let u=this.toString();return this.#n=[u],this.type=null,this.#t=void 0,[u,Hn(this.toString()),!1,!1]}let s=!n||e||r||!Uh?"":this.#f(!0);s===o&&(s=""),s&&(o=`(?:${o})(?:${s})*?`);let l="";if(this.type==="!"&&this.#i)l=(this.isStart()&&!r?Uh:"")+WL;else{let u=this.type==="!"?"))"+(this.isStart()&&!r&&!e?Uh:"")+VL+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&s?")":this.type==="*"&&s?")?":`)${this.type}`;l=i+o+u}return[l,Hn(o),this.#t=!!this.#t,this.#o]}#f(e){return this.#n.map(r=>{if(typeof r=="string")throw new Error("string type in extglob ast??");let[n,i,o,s]=r.toRegExpSource(e);return this.#o=this.#o||s,n}).filter(r=>!(this.isStart()&&this.isEnd())||!!r).join("|")}static#m(e,r,n=!1){let i=!1,o="",s=!1;for(let l=0;l<e.length;l++){let u=e.charAt(l);if(i){i=!1,o+=(h7.has(u)?"\\":"")+u;continue}if(u==="\\"){l===e.length-1?o+="\\\\":i=!0;continue}if(u==="["){let[m,d,g,y]=HL(e,l);if(g){o+=m,s=s||d,l+=g-1,r=r||y;continue}}if(u==="*"){n&&e==="*"?o+=WL:o+=VL,r=!0;continue}if(u==="?"){o+=Wv,r=!0;continue}o+=y7(u)}return[o,Hn(e),!!r,s]}};var dc=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&");var hr=(t,e,r={})=>(du(e),!r.nocomment&&e.charAt(0)==="#"?!1:new Qr(e,r).match(t)),T7=/^\*+([^+@!?\*\[\(]*)$/,x7=t=>e=>!e.startsWith(".")&&e.endsWith(t),S7=t=>e=>e.endsWith(t),v7=t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),b7=t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),w7=/^\*+\.\*+$/,E7=t=>!t.startsWith(".")&&t.includes("."),_7=t=>t!=="."&&t!==".."&&t.includes("."),R7=/^\.\*+$/,k7=t=>t!=="."&&t!==".."&&t.startsWith("."),A7=/^\*+$/,P7=t=>t.length!==0&&!t.startsWith("."),M7=t=>t.length!==0&&t!=="."&&t!=="..",D7=/^\?+([^+@!?\*\[\(]*)?$/,L7=([t,e=""])=>{let r=qL([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},F7=([t,e=""])=>{let r=GL([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},I7=([t,e=""])=>{let r=GL([t]);return e?n=>r(n)&&n.endsWith(e):r},C7=([t,e=""])=>{let r=qL([t]);return e?n=>r(n)&&n.endsWith(e):r},qL=([t])=>{let e=t.length;return r=>r.length===e&&!r.startsWith(".")},GL=([t])=>{let e=t.length;return r=>r.length===e&&r!=="."&&r!==".."},KL=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",$L={win32:{sep:"\\"},posix:{sep:"/"}},O7=KL==="win32"?$L.win32.sep:$L.posix.sep;hr.sep=O7;var Xt=Symbol("globstar **");hr.GLOBSTAR=Xt;var N7="[^/]",U7=N7+"*?",H7="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",B7="(?:(?!(?:\\/|^)\\.).)*?",V7=(t,e={})=>r=>hr(r,t,e);hr.filter=V7;var Sn=(t,e={})=>Object.assign({},t,e),W7=t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return hr;let e=hr;return Object.assign((n,i,o={})=>e(n,i,Sn(t,o)),{Minimatch:class extends e.Minimatch{constructor(i,o={}){super(i,Sn(t,o))}static defaults(i){return e.defaults(Sn(t,i)).Minimatch}},AST:class extends e.AST{constructor(i,o,s={}){super(i,o,Sn(t,s))}static fromGlob(i,o={}){return e.AST.fromGlob(i,Sn(t,o))}},unescape:(n,i={})=>e.unescape(n,Sn(t,i)),escape:(n,i={})=>e.escape(n,Sn(t,i)),filter:(n,i={})=>e.filter(n,Sn(t,i)),defaults:n=>e.defaults(Sn(t,n)),makeRe:(n,i={})=>e.makeRe(n,Sn(t,i)),braceExpand:(n,i={})=>e.braceExpand(n,Sn(t,i)),match:(n,i,o={})=>e.match(n,i,Sn(t,o)),sep:e.sep,GLOBSTAR:Xt})};hr.defaults=W7;var QL=(t,e={})=>(du(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:(0,zL.default)(t));hr.braceExpand=QL;var $7=(t,e={})=>new Qr(t,e).makeRe();hr.makeRe=$7;var j7=(t,e,r={})=>{let n=new Qr(e,r);return t=t.filter(i=>n.match(i)),n.options.nonull&&!t.length&&t.push(e),t};hr.match=j7;var jL=/[?*]|[+@!]\(.*?\)|\[|\]/,z7=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Qr=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,r={}){du(e),r=r||{},this.options=r,this.pattern=e,this.platform=r.platform||KL,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!r.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!r.nonegate,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=r.windowsNoMagicRoot!==void 0?r.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let r of e)if(typeof r!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],r.debug&&(this.debug=(...o)=>console.error(...o)),this.debug(this.pattern,this.globSet);let n=this.globSet.map(o=>this.slashSplit(o));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let i=this.globParts.map((o,s,l)=>{if(this.isWindows&&this.windowsNoMagicRoot){let u=o[0]===""&&o[1]===""&&(o[2]==="?"||!jL.test(o[2]))&&!jL.test(o[3]),m=/^[a-z]:/i.test(o[0]);if(u)return[...o.slice(0,4),...o.slice(4).map(d=>this.parse(d))];if(m)return[o[0],...o.slice(1).map(d=>this.parse(d))]}return o.map(u=>this.parse(u))});if(this.debug(this.pattern,i),this.set=i.filter(o=>o.indexOf(!1)===-1),this.isWindows)for(let o=0;o<this.set.length;o++){let s=this.set[o];s[0]===""&&s[1]===""&&this.globParts[o][2]==="?"&&typeof s[3]=="string"&&/^[a-z]:$/i.test(s[3])&&(s[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let n=0;n<e.length;n++)for(let i=0;i<e[n].length;i++)e[n][i]==="**"&&(e[n][i]="*");let{optimizationLevel:r=1}=this.options;return r>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):r>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(r=>{let n=-1;for(;(n=r.indexOf("**",n+1))!==-1;){let i=n;for(;r[i+1]==="**";)i++;i!==n&&r.splice(n,i-n)}return r})}levelOneOptimize(e){return e.map(r=>(r=r.reduce((n,i)=>{let o=n[n.length-1];return i==="**"&&o==="**"?n:i===".."&&o&&o!==".."&&o!=="."&&o!=="**"?(n.pop(),n):(n.push(i),n)},[]),r.length===0?[""]:r))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let r=!1;do{if(r=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let o=e[i];i===1&&o===""&&e[0]===""||(o==="."||o==="")&&(r=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(r=!0,e.pop())}let n=0;for(;(n=e.indexOf("..",n+1))!==-1;){let i=e[n-1];i&&i!=="."&&i!==".."&&i!=="**"&&(r=!0,e.splice(n-1,2),n-=2)}}while(r);return e.length===0?[""]:e}firstPhasePreProcess(e){let r=!1;do{r=!1;for(let n of e){let i=-1;for(;(i=n.indexOf("**",i+1))!==-1;){let s=i;for(;n[s+1]==="**";)s++;s>i&&n.splice(i+1,s-i);let l=n[i+1],u=n[i+2],m=n[i+3];if(l!==".."||!u||u==="."||u===".."||!m||m==="."||m==="..")continue;r=!0,n.splice(i,1);let d=n.slice(0);d[i]="**",e.push(d),i--}if(!this.preserveMultipleSlashes){for(let s=1;s<n.length-1;s++){let l=n[s];s===1&&l===""&&n[0]===""||(l==="."||l==="")&&(r=!0,n.splice(s,1),s--)}n[0]==="."&&n.length===2&&(n[1]==="."||n[1]==="")&&(r=!0,n.pop())}let o=0;for(;(o=n.indexOf("..",o+1))!==-1;){let s=n[o-1];if(s&&s!=="."&&s!==".."&&s!=="**"){r=!0;let u=o===1&&n[o+1]==="**"?["."]:[];n.splice(o-1,2,...u),n.length===0&&n.push(""),o-=2}}}}while(r);return e}secondPhasePreProcess(e){for(let r=0;r<e.length-1;r++)for(let n=r+1;n<e.length;n++){let i=this.partsMatch(e[r],e[n],!this.preserveMultipleSlashes);if(i){e[r]=[],e[n]=i;break}}return e.filter(r=>r.length)}partsMatch(e,r,n=!1){let i=0,o=0,s=[],l="";for(;i<e.length&&o<r.length;)if(e[i]===r[o])s.push(l==="b"?r[o]:e[i]),i++,o++;else if(n&&e[i]==="**"&&r[o]===e[i+1])s.push(e[i]),i++;else if(n&&r[o]==="**"&&e[i]===r[o+1])s.push(r[o]),o++;else if(e[i]==="*"&&r[o]&&(this.options.dot||!r[o].startsWith("."))&&r[o]!=="**"){if(l==="b")return!1;l="a",s.push(e[i]),i++,o++}else if(r[o]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(l==="a")return!1;l="b",s.push(r[o]),i++,o++}else return!1;return e.length===r.length&&s}parseNegate(){if(this.nonegate)return;let e=this.pattern,r=!1,n=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)r=!r,n++;n&&(this.pattern=e.slice(n)),this.negate=r}matchOne(e,r,n=!1){let i=this.options;if(this.isWindows){let E=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),U=!E&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),V=typeof r[0]=="string"&&/^[a-z]:$/i.test(r[0]),z=!V&&r[0]===""&&r[1]===""&&r[2]==="?"&&typeof r[3]=="string"&&/^[a-z]:$/i.test(r[3]),ie=U?3:E?0:void 0,le=z?3:V?0:void 0;if(typeof ie=="number"&&typeof le=="number"){let[ue,ge]=[e[ie],r[le]];ue.toLowerCase()===ge.toLowerCase()&&(r[le]=ue,le>ie?r=r.slice(le):ie>le&&(e=e.slice(ie)))}}let{optimizationLevel:o=1}=this.options;o>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var s=0,l=0,u=e.length,m=r.length;s<u&&l<m;s++,l++){this.debug("matchOne loop");var d=r[l],g=e[s];if(this.debug(r,d,g),d===!1)return!1;if(d===Xt){this.debug("GLOBSTAR",[r,d,g]);var y=s,x=l+1;if(x===m){for(this.debug("** at the end");s<u;s++)if(e[s]==="."||e[s]===".."||!i.dot&&e[s].charAt(0)===".")return!1;return!0}for(;y<u;){var w=e[y];if(this.debug(`
globstar while`,e,y,r,x,w),this.matchOne(e.slice(y),r.slice(x),n))return this.debug("globstar found match!",y,u,w),!0;if(w==="."||w===".."||!i.dot&&w.charAt(0)==="."){this.debug("dot detected!",e,y,r,x);break}this.debug("globstar swallow a segment, and continue"),y++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,y,r,x),y===u))}let E;if(typeof d=="string"?(E=g===d,this.debug("string match",d,g,E)):(E=d.test(g),this.debug("pattern match",d,g,E)),!E)return!1}if(s===u&&l===m)return!0;if(s===u)return n;if(l===m)return s===u-1&&e[s]==="";throw new Error("wtf?")}braceExpand(){return QL(this.pattern,this.options)}parse(e){du(e);let r=this.options;if(e==="**")return Xt;if(e==="")return"";let n,i=null;(n=e.match(A7))?i=r.dot?M7:P7:(n=e.match(T7))?i=(r.nocase?r.dot?b7:v7:r.dot?S7:x7)(n[1]):(n=e.match(D7))?i=(r.nocase?r.dot?F7:L7:r.dot?I7:C7)(n):(n=e.match(w7))?i=r.dot?_7:E7:(n=e.match(R7))&&(i=k7);let o=fc.fromGlob(e,this.options).toMMPattern();return i&&typeof o=="object"&&Reflect.defineProperty(o,"test",{value:i}),o}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let r=this.options,n=r.noglobstar?U7:r.dot?H7:B7,i=new Set(r.nocase?["i"]:[]),o=e.map(u=>{let m=u.map(d=>{if(d instanceof RegExp)for(let g of d.flags.split(""))i.add(g);return typeof d=="string"?z7(d):d===Xt?Xt:d._src});return m.forEach((d,g)=>{let y=m[g+1],x=m[g-1];d!==Xt||x===Xt||(x===void 0?y!==void 0&&y!==Xt?m[g+1]="(?:\\/|"+n+"\\/)?"+y:m[g]=n:y===void 0?m[g-1]=x+"(?:\\/|"+n+")?":y!==Xt&&(m[g-1]=x+"(?:\\/|\\/"+n+"\\/)"+y,m[g+1]=Xt))}),m.filter(d=>d!==Xt).join("/")}).join("|"),[s,l]=e.length>1?["(?:",")"]:["",""];o="^"+s+o+l+"$",this.negate&&(o="^(?!"+o+").+$");try{this.regexp=new RegExp(o,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;let n=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let o=this.set;this.debug(this.pattern,"set",o);let s=i[i.length-1];if(!s)for(let l=i.length-2;!s&&l>=0;l--)s=i[l];for(let l=0;l<o.length;l++){let u=o[l],m=i;if(n.matchBase&&u.length===1&&(m=[s]),this.matchOne(m,u,r))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return hr.defaults(e).Minimatch}};hr.AST=fc;hr.Minimatch=Qr;hr.escape=dc;hr.unescape=Hn;var xF=require("node:url");var gc=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,ZL=new Set,$v=typeof process=="object"&&process?process:{},XL=(t,e,r,n)=>{typeof $v.emitWarning=="function"?$v.emitWarning(t,e,r,n):console.error(`[${r}] ${e}: ${t}`)},Hh=globalThis.AbortController,YL=globalThis.AbortSignal;if(typeof Hh>"u"){YL=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(n,i){this._onabort.push(i)}},Hh=class{constructor(){e()}signal=new YL;abort(n){if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(let i of this.signal._onabort)i(n);this.signal.onabort?.(n)}}};let t=$v.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{t&&(t=!1,XL("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var q7=t=>!ZL.has(t),J1e=Symbol("type"),Ao=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),JL=t=>Ao(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?hc:null:null,hc=class extends Array{constructor(e){super(e),this.fill(0)}},jv=class t{heap;length;static#e=!1;static create(e){let r=JL(e);if(!r)return[];t.#e=!0;let n=new t(e,r);return t.#e=!1,n}constructor(e,r){if(!t.#e)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},hu=class t{#e;#t;#o;#n;#a;#S;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#l;#p;#s;#c;#i;#h;#y;#f;#m;#w;#g;#E;#_;#x;#v;#b;#d;static unsafeExposeInternals(e){return{starts:e.#_,ttls:e.#x,sizes:e.#E,keyMap:e.#s,keyList:e.#c,valList:e.#i,next:e.#h,prev:e.#y,get head(){return e.#f},get tail(){return e.#m},free:e.#w,isBackgroundFetch:r=>e.#u(r),backgroundFetch:(r,n,i,o)=>e.#U(r,n,i,o),moveToTail:r=>e.#B(r),indexes:r=>e.#k(r),rindexes:r=>e.#A(r),isStale:r=>e.#T(r)}}get max(){return this.#e}get maxSize(){return this.#t}get calculatedSize(){return this.#p}get size(){return this.#l}get fetchMethod(){return this.#a}get memoMethod(){return this.#S}get dispose(){return this.#o}get disposeAfter(){return this.#n}constructor(e){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:s,updateAgeOnHas:l,allowStale:u,dispose:m,disposeAfter:d,noDisposeOnSet:g,noUpdateTTL:y,maxSize:x=0,maxEntrySize:w=0,sizeCalculation:E,fetchMethod:U,memoMethod:V,noDeleteOnFetchRejection:z,noDeleteOnStaleGet:ie,allowStaleOnFetchRejection:le,allowStaleOnFetchAbort:ue,ignoreFetchAbort:ge}=e;if(r!==0&&!Ao(r))throw new TypeError("max option must be a nonnegative integer");let ut=r?JL(r):Array;if(!ut)throw new Error("invalid max value: "+r);if(this.#e=r,this.#t=x,this.maxEntrySize=w||this.#t,this.sizeCalculation=E,this.sizeCalculation){if(!this.#t&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(V!==void 0&&typeof V!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#S=V,U!==void 0&&typeof U!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#a=U,this.#b=!!U,this.#s=new Map,this.#c=new Array(r).fill(void 0),this.#i=new Array(r).fill(void 0),this.#h=new ut(r),this.#y=new ut(r),this.#f=0,this.#m=0,this.#w=jv.create(r),this.#l=0,this.#p=0,typeof m=="function"&&(this.#o=m),typeof d=="function"?(this.#n=d,this.#g=[]):(this.#n=void 0,this.#g=void 0),this.#v=!!this.#o,this.#d=!!this.#n,this.noDisposeOnSet=!!g,this.noUpdateTTL=!!y,this.noDeleteOnFetchRejection=!!z,this.allowStaleOnFetchRejection=!!le,this.allowStaleOnFetchAbort=!!ue,this.ignoreFetchAbort=!!ge,this.maxEntrySize!==0){if(this.#t!==0&&!Ao(this.#t))throw new TypeError("maxSize must be a positive integer if specified");if(!Ao(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#M()}if(this.allowStale=!!u,this.noDeleteOnStaleGet=!!ie,this.updateAgeOnGet=!!s,this.updateAgeOnHas=!!l,this.ttlResolution=Ao(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=n||0,this.ttl){if(!Ao(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#P()}if(this.#e===0&&this.ttl===0&&this.#t===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#e&&!this.#t){let Wt="LRU_CACHE_UNBOUNDED";q7(Wt)&&(ZL.add(Wt),XL("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",Wt,t))}}getRemainingTTL(e){return this.#s.has(e)?1/0:0}#P(){let e=new hc(this.#e),r=new hc(this.#e);this.#x=e,this.#_=r,this.#L=(o,s,l=gc.now())=>{if(r[o]=s!==0?l:0,e[o]=s,s!==0&&this.ttlAutopurge){let u=setTimeout(()=>{this.#T(o)&&this.#D(this.#c[o],"expire")},s+1);u.unref&&u.unref()}},this.#R=o=>{r[o]=e[o]!==0?gc.now():0},this.#r=(o,s)=>{if(e[s]){let l=e[s],u=r[s];if(!l||!u)return;o.ttl=l,o.start=u,o.now=n||i();let m=o.now-u;o.remainingTTL=l-m}};let n=0,i=()=>{let o=gc.now();if(this.ttlResolution>0){n=o;let s=setTimeout(()=>n=0,this.ttlResolution);s.unref&&s.unref()}return o};this.getRemainingTTL=o=>{let s=this.#s.get(o);if(s===void 0)return 0;let l=e[s],u=r[s];if(!l||!u)return 1/0;let m=(n||i())-u;return l-m},this.#T=o=>{let s=r[o],l=e[o];return!!l&&!!s&&(n||i())-s>l}}#R=()=>{};#r=()=>{};#L=()=>{};#T=()=>!1;#M(){let e=new hc(this.#e);this.#p=0,this.#E=e,this.#F=r=>{this.#p-=e[r],e[r]=0},this.#C=(r,n,i,o)=>{if(this.#u(n))return 0;if(!Ao(i))if(o){if(typeof o!="function")throw new TypeError("sizeCalculation must be a function");if(i=o(n,r),!Ao(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#I=(r,n,i)=>{if(e[r]=n,this.#t){let o=this.#t-e[r];for(;this.#p>o;)this.#N(!0)}this.#p+=e[r],i&&(i.entrySize=n,i.totalCalculatedSize=this.#p)}}#F=e=>{};#I=(e,r,n)=>{};#C=(e,r,n,i)=>{if(n||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#k({allowStale:e=this.allowStale}={}){if(this.#l)for(let r=this.#m;!(!this.#O(r)||((e||!this.#T(r))&&(yield r),r===this.#f));)r=this.#y[r]}*#A({allowStale:e=this.allowStale}={}){if(this.#l)for(let r=this.#f;!(!this.#O(r)||((e||!this.#T(r))&&(yield r),r===this.#m));)r=this.#h[r]}#O(e){return e!==void 0&&this.#s.get(this.#c[e])===e}*entries(){for(let e of this.#k())this.#i[e]!==void 0&&this.#c[e]!==void 0&&!this.#u(this.#i[e])&&(yield[this.#c[e],this.#i[e]])}*rentries(){for(let e of this.#A())this.#i[e]!==void 0&&this.#c[e]!==void 0&&!this.#u(this.#i[e])&&(yield[this.#c[e],this.#i[e]])}*keys(){for(let e of this.#k()){let r=this.#c[e];r!==void 0&&!this.#u(this.#i[e])&&(yield r)}}*rkeys(){for(let e of this.#A()){let r=this.#c[e];r!==void 0&&!this.#u(this.#i[e])&&(yield r)}}*values(){for(let e of this.#k())this.#i[e]!==void 0&&!this.#u(this.#i[e])&&(yield this.#i[e])}*rvalues(){for(let e of this.#A())this.#i[e]!==void 0&&!this.#u(this.#i[e])&&(yield this.#i[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,r={}){for(let n of this.#k()){let i=this.#i[n],o=this.#u(i)?i.__staleWhileFetching:i;if(o!==void 0&&e(o,this.#c[n],this))return this.get(this.#c[n],r)}}forEach(e,r=this){for(let n of this.#k()){let i=this.#i[n],o=this.#u(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#c[n],this)}}rforEach(e,r=this){for(let n of this.#A()){let i=this.#i[n],o=this.#u(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#c[n],this)}}purgeStale(){let e=!1;for(let r of this.#A({allowStale:!0}))this.#T(r)&&(this.#D(this.#c[r],"expire"),e=!0);return e}info(e){let r=this.#s.get(e);if(r===void 0)return;let n=this.#i[r],i=this.#u(n)?n.__staleWhileFetching:n;if(i===void 0)return;let o={value:i};if(this.#x&&this.#_){let s=this.#x[r],l=this.#_[r];if(s&&l){let u=s-(gc.now()-l);o.ttl=u,o.start=Date.now()}}return this.#E&&(o.size=this.#E[r]),o}dump(){let e=[];for(let r of this.#k({allowStale:!0})){let n=this.#c[r],i=this.#i[r],o=this.#u(i)?i.__staleWhileFetching:i;if(o===void 0||n===void 0)continue;let s={value:o};if(this.#x&&this.#_){s.ttl=this.#x[r];let l=gc.now()-this.#_[r];s.start=Math.floor(Date.now()-l)}this.#E&&(s.size=this.#E[r]),e.unshift([n,s])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let i=Date.now()-n.start;n.start=gc.now()-i}this.set(r,n.value,n)}}set(e,r,n={}){if(r===void 0)return this.delete(e),this;let{ttl:i=this.ttl,start:o,noDisposeOnSet:s=this.noDisposeOnSet,sizeCalculation:l=this.sizeCalculation,status:u}=n,{noUpdateTTL:m=this.noUpdateTTL}=n,d=this.#C(e,r,n.size||0,l);if(this.maxEntrySize&&d>this.maxEntrySize)return u&&(u.set="miss",u.maxEntrySizeExceeded=!0),this.#D(e,"set"),this;let g=this.#l===0?void 0:this.#s.get(e);if(g===void 0)g=this.#l===0?this.#m:this.#w.length!==0?this.#w.pop():this.#l===this.#e?this.#N(!1):this.#l,this.#c[g]=e,this.#i[g]=r,this.#s.set(e,g),this.#h[this.#m]=g,this.#y[g]=this.#m,this.#m=g,this.#l++,this.#I(g,d,u),u&&(u.set="add"),m=!1;else{this.#B(g);let y=this.#i[g];if(r!==y){if(this.#b&&this.#u(y)){y.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:x}=y;x!==void 0&&!s&&(this.#v&&this.#o?.(x,e,"set"),this.#d&&this.#g?.push([x,e,"set"]))}else s||(this.#v&&this.#o?.(y,e,"set"),this.#d&&this.#g?.push([y,e,"set"]));if(this.#F(g),this.#I(g,d,u),this.#i[g]=r,u){u.set="replace";let x=y&&this.#u(y)?y.__staleWhileFetching:y;x!==void 0&&(u.oldValue=x)}}else u&&(u.set="update")}if(i!==0&&!this.#x&&this.#P(),this.#x&&(m||this.#L(g,i,o),u&&this.#r(u,g)),!s&&this.#d&&this.#g){let y=this.#g,x;for(;x=y?.shift();)this.#n?.(...x)}return this}pop(){try{for(;this.#l;){let e=this.#i[this.#f];if(this.#N(!0),this.#u(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#d&&this.#g){let e=this.#g,r;for(;r=e?.shift();)this.#n?.(...r)}}}#N(e){let r=this.#f,n=this.#c[r],i=this.#i[r];return this.#b&&this.#u(i)?i.__abortController.abort(new Error("evicted")):(this.#v||this.#d)&&(this.#v&&this.#o?.(i,n,"evict"),this.#d&&this.#g?.push([i,n,"evict"])),this.#F(r),e&&(this.#c[r]=void 0,this.#i[r]=void 0,this.#w.push(r)),this.#l===1?(this.#f=this.#m=0,this.#w.length=0):this.#f=this.#h[r],this.#s.delete(n),this.#l--,r}has(e,r={}){let{updateAgeOnHas:n=this.updateAgeOnHas,status:i}=r,o=this.#s.get(e);if(o!==void 0){let s=this.#i[o];if(this.#u(s)&&s.__staleWhileFetching===void 0)return!1;if(this.#T(o))i&&(i.has="stale",this.#r(i,o));else return n&&this.#R(o),i&&(i.has="hit",this.#r(i,o)),!0}else i&&(i.has="miss");return!1}peek(e,r={}){let{allowStale:n=this.allowStale}=r,i=this.#s.get(e);if(i===void 0||!n&&this.#T(i))return;let o=this.#i[i];return this.#u(o)?o.__staleWhileFetching:o}#U(e,r,n,i){let o=r===void 0?void 0:this.#i[r];if(this.#u(o))return o;let s=new Hh,{signal:l}=n;l?.addEventListener("abort",()=>s.abort(l.reason),{signal:s.signal});let u={signal:s.signal,options:n,context:i},m=(E,U=!1)=>{let{aborted:V}=s.signal,z=n.ignoreFetchAbort&&E!==void 0;if(n.status&&(V&&!U?(n.status.fetchAborted=!0,n.status.fetchError=s.signal.reason,z&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),V&&!z&&!U)return g(s.signal.reason);let ie=x;return this.#i[r]===x&&(E===void 0?ie.__staleWhileFetching?this.#i[r]=ie.__staleWhileFetching:this.#D(e,"fetch"):(n.status&&(n.status.fetchUpdated=!0),this.set(e,E,u.options))),E},d=E=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=E),g(E)),g=E=>{let{aborted:U}=s.signal,V=U&&n.allowStaleOnFetchAbort,z=V||n.allowStaleOnFetchRejection,ie=z||n.noDeleteOnFetchRejection,le=x;if(this.#i[r]===x&&(!ie||le.__staleWhileFetching===void 0?this.#D(e,"fetch"):V||(this.#i[r]=le.__staleWhileFetching)),z)return n.status&&le.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),le.__staleWhileFetching;if(le.__returned===le)throw E},y=(E,U)=>{let V=this.#a?.(e,o,u);V&&V instanceof Promise&&V.then(z=>E(z===void 0?void 0:z),U),s.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(E(void 0),n.allowStaleOnFetchAbort&&(E=z=>m(z,!0)))})};n.status&&(n.status.fetchDispatched=!0);let x=new Promise(y).then(m,d),w=Object.assign(x,{__abortController:s,__staleWhileFetching:o,__returned:void 0});return r===void 0?(this.set(e,w,{...u.options,status:void 0}),r=this.#s.get(e)):this.#i[r]=w,w}#u(e){if(!this.#b)return!1;let r=e;return!!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof Hh}async fetch(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:s=this.ttl,noDisposeOnSet:l=this.noDisposeOnSet,size:u=0,sizeCalculation:m=this.sizeCalculation,noUpdateTTL:d=this.noUpdateTTL,noDeleteOnFetchRejection:g=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:y=this.allowStaleOnFetchRejection,ignoreFetchAbort:x=this.ignoreFetchAbort,allowStaleOnFetchAbort:w=this.allowStaleOnFetchAbort,context:E,forceRefresh:U=!1,status:V,signal:z}=r;if(!this.#b)return V&&(V.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,status:V});let ie={allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,ttl:s,noDisposeOnSet:l,size:u,sizeCalculation:m,noUpdateTTL:d,noDeleteOnFetchRejection:g,allowStaleOnFetchRejection:y,allowStaleOnFetchAbort:w,ignoreFetchAbort:x,status:V,signal:z},le=this.#s.get(e);if(le===void 0){V&&(V.fetch="miss");let ue=this.#U(e,le,ie,E);return ue.__returned=ue}else{let ue=this.#i[le];if(this.#u(ue)){let H=n&&ue.__staleWhileFetching!==void 0;return V&&(V.fetch="inflight",H&&(V.returnedStale=!0)),H?ue.__staleWhileFetching:ue.__returned=ue}let ge=this.#T(le);if(!U&&!ge)return V&&(V.fetch="hit"),this.#B(le),i&&this.#R(le),V&&this.#r(V,le),ue;let ut=this.#U(e,le,ie,E),gt=ut.__staleWhileFetching!==void 0&&n;return V&&(V.fetch=ge?"stale":"refresh",gt&&ge&&(V.returnedStale=!0)),gt?ut.__staleWhileFetching:ut.__returned=ut}}async forceFetch(e,r={}){let n=await this.fetch(e,r);if(n===void 0)throw new Error("fetch() returned undefined");return n}memo(e,r={}){let n=this.#S;if(!n)throw new Error("no memoMethod provided to constructor");let{context:i,forceRefresh:o,...s}=r,l=this.get(e,s);if(!o&&l!==void 0)return l;let u=n(e,l,{options:s,context:i});return this.set(e,u,s),u}get(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:s}=r,l=this.#s.get(e);if(l!==void 0){let u=this.#i[l],m=this.#u(u);return s&&this.#r(s,l),this.#T(l)?(s&&(s.get="stale"),m?(s&&n&&u.__staleWhileFetching!==void 0&&(s.returnedStale=!0),n?u.__staleWhileFetching:void 0):(o||this.#D(e,"expire"),s&&n&&(s.returnedStale=!0),n?u:void 0)):(s&&(s.get="hit"),m?u.__staleWhileFetching:(this.#B(l),i&&this.#R(l),u))}else s&&(s.get="miss")}#H(e,r){this.#y[r]=e,this.#h[e]=r}#B(e){e!==this.#m&&(e===this.#f?this.#f=this.#h[e]:this.#H(this.#y[e],this.#h[e]),this.#H(this.#m,e),this.#m=e)}delete(e){return this.#D(e,"delete")}#D(e,r){let n=!1;if(this.#l!==0){let i=this.#s.get(e);if(i!==void 0)if(n=!0,this.#l===1)this.#V(r);else{this.#F(i);let o=this.#i[i];if(this.#u(o)?o.__abortController.abort(new Error("deleted")):(this.#v||this.#d)&&(this.#v&&this.#o?.(o,e,r),this.#d&&this.#g?.push([o,e,r])),this.#s.delete(e),this.#c[i]=void 0,this.#i[i]=void 0,i===this.#m)this.#m=this.#y[i];else if(i===this.#f)this.#f=this.#h[i];else{let s=this.#y[i];this.#h[s]=this.#h[i];let l=this.#h[i];this.#y[l]=this.#y[i]}this.#l--,this.#w.push(i)}}if(this.#d&&this.#g?.length){let i=this.#g,o;for(;o=i?.shift();)this.#n?.(...o)}return n}clear(){return this.#V("delete")}#V(e){for(let r of this.#A({allowStale:!0})){let n=this.#i[r];if(this.#u(n))n.__abortController.abort(new Error("deleted"));else{let i=this.#c[r];this.#v&&this.#o?.(n,i,e),this.#d&&this.#g?.push([n,i,e])}}if(this.#s.clear(),this.#i.fill(void 0),this.#c.fill(void 0),this.#x&&this.#_&&(this.#x.fill(0),this.#_.fill(0)),this.#E&&this.#E.fill(0),this.#f=0,this.#m=0,this.#w.length=0,this.#p=0,this.#l=0,this.#d&&this.#g){let r=this.#g,n;for(;n=r?.shift();)this.#n?.(...n)}}};var xc=require("node:path"),lF=require("node:url"),pi=require("fs"),r8=Hr(require("node:fs"),1),Do=require("node:fs/promises");var qh=require("node:events"),Zv=Hr(require("node:stream"),1),iF=require("node:string_decoder"),eF=typeof process=="object"&&process?process:{stdout:null,stderr:null},G7=t=>!!t&&typeof t=="object"&&(t instanceof Mo||t instanceof Zv.default||K7(t)||Q7(t)),K7=t=>!!t&&typeof t=="object"&&t instanceof qh.EventEmitter&&typeof t.pipe=="function"&&t.pipe!==Zv.default.Writable.prototype.pipe,Q7=t=>!!t&&typeof t=="object"&&t instanceof qh.EventEmitter&&typeof t.write=="function"&&typeof t.end=="function",Oi=Symbol("EOF"),Ni=Symbol("maybeEmitEnd"),Po=Symbol("emittedEnd"),Bh=Symbol("emittingEnd"),yu=Symbol("emittedError"),Vh=Symbol("closed"),tF=Symbol("read"),Wh=Symbol("flush"),rF=Symbol("flushChunk"),Bn=Symbol("encoding"),yc=Symbol("decoder"),Ut=Symbol("flowing"),Tu=Symbol("paused"),Tc=Symbol("resume"),Ht=Symbol("buffer"),yr=Symbol("pipes"),Bt=Symbol("bufferLength"),zv=Symbol("bufferPush"),$h=Symbol("bufferShift"),ar=Symbol("objectMode"),_t=Symbol("destroyed"),qv=Symbol("error"),Gv=Symbol("emitData"),nF=Symbol("emitEnd"),Kv=Symbol("emitEnd2"),li=Symbol("async"),Qv=Symbol("abort"),jh=Symbol("aborted"),xu=Symbol("signal"),Da=Symbol("dataListeners"),Yr=Symbol("discarded"),Su=t=>Promise.resolve().then(t),Y7=t=>t(),Z7=t=>t==="end"||t==="finish"||t==="prefinish",X7=t=>t instanceof ArrayBuffer||!!t&&typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,J7=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),zh=class{src;dest;opts;ondrain;constructor(e,r,n){this.src=e,this.dest=r,this.opts=n,this.ondrain=()=>e[Tc](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(e){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},Yv=class extends zh{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,r,n){super(e,r,n),this.proxyErrors=i=>r.emit("error",i),e.on("error",this.proxyErrors)}},e8=t=>!!t.objectMode,t8=t=>!t.objectMode&&!!t.encoding&&t.encoding!=="buffer",Mo=class extends qh.EventEmitter{[Ut]=!1;[Tu]=!1;[yr]=[];[Ht]=[];[ar];[Bn];[li];[yc];[Oi]=!1;[Po]=!1;[Bh]=!1;[Vh]=!1;[yu]=null;[Bt]=0;[_t]=!1;[xu];[jh]=!1;[Da]=0;[Yr]=!1;writable=!0;readable=!0;constructor(...e){let r=e[0]||{};if(super(),r.objectMode&&typeof r.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");e8(r)?(this[ar]=!0,this[Bn]=null):t8(r)?(this[Bn]=r.encoding,this[ar]=!1):(this[ar]=!1,this[Bn]=null),this[li]=!!r.async,this[yc]=this[Bn]?new iF.StringDecoder(this[Bn]):null,r&&r.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[Ht]}),r&&r.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[yr]});let{signal:n}=r;n&&(this[xu]=n,n.aborted?this[Qv]():n.addEventListener("abort",()=>this[Qv]()))}get bufferLength(){return this[Bt]}get encoding(){return this[Bn]}set encoding(e){throw new Error("Encoding must be set at instantiation time")}setEncoding(e){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[ar]}set objectMode(e){throw new Error("objectMode must be set at instantiation time")}get async(){return this[li]}set async(e){this[li]=this[li]||!!e}[Qv](){this[jh]=!0,this.emit("abort",this[xu]?.reason),this.destroy(this[xu]?.reason)}get aborted(){return this[jh]}set aborted(e){}write(e,r,n){if(this[jh])return!1;if(this[Oi])throw new Error("write after end");if(this[_t])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof r=="function"&&(n=r,r="utf8"),r||(r="utf8");let i=this[li]?Su:Y7;if(!this[ar]&&!Buffer.isBuffer(e)){if(J7(e))e=Buffer.from(e.buffer,e.byteOffset,e.byteLength);else if(X7(e))e=Buffer.from(e);else if(typeof e!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[ar]?(this[Ut]&&this[Bt]!==0&&this[Wh](!0),this[Ut]?this.emit("data",e):this[zv](e),this[Bt]!==0&&this.emit("readable"),n&&i(n),this[Ut]):e.length?(typeof e=="string"&&!(r===this[Bn]&&!this[yc]?.lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[Bn]&&(e=this[yc].write(e)),this[Ut]&&this[Bt]!==0&&this[Wh](!0),this[Ut]?this.emit("data",e):this[zv](e),this[Bt]!==0&&this.emit("readable"),n&&i(n),this[Ut]):(this[Bt]!==0&&this.emit("readable"),n&&i(n),this[Ut])}read(e){if(this[_t])return null;if(this[Yr]=!1,this[Bt]===0||e===0||e&&e>this[Bt])return this[Ni](),null;this[ar]&&(e=null),this[Ht].length>1&&!this[ar]&&(this[Ht]=[this[Bn]?this[Ht].join(""):Buffer.concat(this[Ht],this[Bt])]);let r=this[tF](e||null,this[Ht][0]);return this[Ni](),r}[tF](e,r){if(this[ar])this[$h]();else{let n=r;e===n.length||e===null?this[$h]():typeof n=="string"?(this[Ht][0]=n.slice(e),r=n.slice(0,e),this[Bt]-=e):(this[Ht][0]=n.subarray(e),r=n.subarray(0,e),this[Bt]-=e)}return this.emit("data",r),!this[Ht].length&&!this[Oi]&&this.emit("drain"),r}end(e,r,n){return typeof e=="function"&&(n=e,e=void 0),typeof r=="function"&&(n=r,r="utf8"),e!==void 0&&this.write(e,r),n&&this.once("end",n),this[Oi]=!0,this.writable=!1,(this[Ut]||!this[Tu])&&this[Ni](),this}[Tc](){this[_t]||(!this[Da]&&!this[yr].length&&(this[Yr]=!0),this[Tu]=!1,this[Ut]=!0,this.emit("resume"),this[Ht].length?this[Wh]():this[Oi]?this[Ni]():this.emit("drain"))}resume(){return this[Tc]()}pause(){this[Ut]=!1,this[Tu]=!0,this[Yr]=!1}get destroyed(){return this[_t]}get flowing(){return this[Ut]}get paused(){return this[Tu]}[zv](e){this[ar]?this[Bt]+=1:this[Bt]+=e.length,this[Ht].push(e)}[$h](){return this[ar]?this[Bt]-=1:this[Bt]-=this[Ht][0].length,this[Ht].shift()}[Wh](e=!1){do;while(this[rF](this[$h]())&&this[Ht].length);!e&&!this[Ht].length&&!this[Oi]&&this.emit("drain")}[rF](e){return this.emit("data",e),this[Ut]}pipe(e,r){if(this[_t])return e;this[Yr]=!1;let n=this[Po];return r=r||{},e===eF.stdout||e===eF.stderr?r.end=!1:r.end=r.end!==!1,r.proxyErrors=!!r.proxyErrors,n?r.end&&e.end():(this[yr].push(r.proxyErrors?new Yv(this,e,r):new zh(this,e,r)),this[li]?Su(()=>this[Tc]()):this[Tc]()),e}unpipe(e){let r=this[yr].find(n=>n.dest===e);r&&(this[yr].length===1?(this[Ut]&&this[Da]===0&&(this[Ut]=!1),this[yr]=[]):this[yr].splice(this[yr].indexOf(r),1),r.unpipe())}addListener(e,r){return this.on(e,r)}on(e,r){let n=super.on(e,r);if(e==="data")this[Yr]=!1,this[Da]++,!this[yr].length&&!this[Ut]&&this[Tc]();else if(e==="readable"&&this[Bt]!==0)super.emit("readable");else if(Z7(e)&&this[Po])super.emit(e),this.removeAllListeners(e);else if(e==="error"&&this[yu]){let i=r;this[li]?Su(()=>i.call(this,this[yu])):i.call(this,this[yu])}return n}removeListener(e,r){return this.off(e,r)}off(e,r){let n=super.off(e,r);return e==="data"&&(this[Da]=this.listeners("data").length,this[Da]===0&&!this[Yr]&&!this[yr].length&&(this[Ut]=!1)),n}removeAllListeners(e){let r=super.removeAllListeners(e);return(e==="data"||e===void 0)&&(this[Da]=0,!this[Yr]&&!this[yr].length&&(this[Ut]=!1)),r}get emittedEnd(){return this[Po]}[Ni](){!this[Bh]&&!this[Po]&&!this[_t]&&this[Ht].length===0&&this[Oi]&&(this[Bh]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[Vh]&&this.emit("close"),this[Bh]=!1)}emit(e,...r){let n=r[0];if(e!=="error"&&e!=="close"&&e!==_t&&this[_t])return!1;if(e==="data")return!this[ar]&&!n?!1:this[li]?(Su(()=>this[Gv](n)),!0):this[Gv](n);if(e==="end")return this[nF]();if(e==="close"){if(this[Vh]=!0,!this[Po]&&!this[_t])return!1;let o=super.emit("close");return this.removeAllListeners("close"),o}else if(e==="error"){this[yu]=n,super.emit(qv,n);let o=!this[xu]||this.listeners("error").length?super.emit("error",n):!1;return this[Ni](),o}else if(e==="resume"){let o=super.emit("resume");return this[Ni](),o}else if(e==="finish"||e==="prefinish"){let o=super.emit(e);return this.removeAllListeners(e),o}let i=super.emit(e,...r);return this[Ni](),i}[Gv](e){for(let n of this[yr])n.dest.write(e)===!1&&this.pause();let r=this[Yr]?!1:super.emit("data",e);return this[Ni](),r}[nF](){return this[Po]?!1:(this[Po]=!0,this.readable=!1,this[li]?(Su(()=>this[Kv]()),!0):this[Kv]())}[Kv](){if(this[yc]){let r=this[yc].end();if(r){for(let n of this[yr])n.dest.write(r);this[Yr]||super.emit("data",r)}}for(let r of this[yr])r.end();let e=super.emit("end");return this.removeAllListeners("end"),e}async collect(){let e=Object.assign([],{dataLength:0});this[ar]||(e.dataLength=0);let r=this.promise();return this.on("data",n=>{e.push(n),this[ar]||(e.dataLength+=n.length)}),await r,e}async concat(){if(this[ar])throw new Error("cannot concat in objectMode");let e=await this.collect();return this[Bn]?e.join(""):Buffer.concat(e,e.dataLength)}async promise(){return new Promise((e,r)=>{this.on(_t,()=>r(new Error("stream destroyed"))),this.on("error",n=>r(n)),this.on("end",()=>e())})}[Symbol.asyncIterator](){this[Yr]=!1;let e=!1,r=async()=>(this.pause(),e=!0,{value:void 0,done:!0});return{next:()=>{if(e)return r();let i=this.read();if(i!==null)return Promise.resolve({done:!1,value:i});if(this[Oi])return r();let o,s,l=g=>{this.off("data",u),this.off("end",m),this.off(_t,d),r(),s(g)},u=g=>{this.off("error",l),this.off("end",m),this.off(_t,d),this.pause(),o({value:g,done:!!this[Oi]})},m=()=>{this.off("error",l),this.off("data",u),this.off(_t,d),r(),o({done:!0,value:void 0})},d=()=>l(new Error("stream destroyed"));return new Promise((g,y)=>{s=y,o=g,this.once(_t,d),this.once("error",l),this.once("end",m),this.once("data",u)})},throw:r,return:r,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[Yr]=!1;let e=!1,r=()=>(this.pause(),this.off(qv,r),this.off(_t,r),this.off("end",r),e=!0,{done:!0,value:void 0}),n=()=>{if(e)return r();let i=this.read();return i===null?r():{done:!1,value:i}};return this.once("end",r),this.once(qv,r),this.once(_t,r),{next:n,throw:r,return:r,[Symbol.iterator](){return this}}}destroy(e){if(this[_t])return e?this.emit("error",e):this.emit(_t),this;this[_t]=!0,this[Yr]=!0,this[Ht].length=0,this[Bt]=0;let r=this;return typeof r.close=="function"&&!this[Vh]&&r.close(),e?this.emit("error",e):this.emit(_t),this}static get isStream(){return G7}};var n8=pi.realpathSync.native,bu={lstatSync:pi.lstatSync,readdir:pi.readdir,readdirSync:pi.readdirSync,readlinkSync:pi.readlinkSync,realpathSync:n8,promises:{lstat:Do.lstat,readdir:Do.readdir,readlink:Do.readlink,realpath:Do.realpath}},uF=t=>!t||t===bu||t===r8?bu:{...bu,...t,promises:{...bu.promises,...t.promises||{}}},pF=/^\\\\\?\\([a-z]:)\\?$/i,i8=t=>t.replace(/\//g,"\\").replace(pF,"$1\\"),o8=/[\\\/]/,bn=0,mF=1,fF=2,ui=4,dF=6,gF=8,La=10,hF=12,vn=15,vu=~vn,Xv=16,oF=32,wu=64,Vn=128,Gh=256,Qh=512,aF=wu|Vn|Qh,a8=1023,Jv=t=>t.isFile()?gF:t.isDirectory()?ui:t.isSymbolicLink()?La:t.isCharacterDevice()?fF:t.isBlockDevice()?dF:t.isSocket()?hF:t.isFIFO()?mF:bn,sF=new Map,Eu=t=>{let e=sF.get(t);if(e)return e;let r=t.normalize("NFKD");return sF.set(t,r),r},cF=new Map,Kh=t=>{let e=cF.get(t);if(e)return e;let r=Eu(t.toLowerCase());return cF.set(t,r),r},Yh=class extends hu{constructor(){super({max:256})}},eb=class extends hu{constructor(e=16*1024){super({maxSize:e,sizeCalculation:r=>r.length+1})}},yF=Symbol("PathScurry setAsCwd"),sr=class{name;root;roots;parent;nocase;isCWD=!1;#e;#t;get dev(){return this.#t}#o;get mode(){return this.#o}#n;get nlink(){return this.#n}#a;get uid(){return this.#a}#S;get gid(){return this.#S}#l;get rdev(){return this.#l}#p;get blksize(){return this.#p}#s;get ino(){return this.#s}#c;get size(){return this.#c}#i;get blocks(){return this.#i}#h;get atimeMs(){return this.#h}#y;get mtimeMs(){return this.#y}#f;get ctimeMs(){return this.#f}#m;get birthtimeMs(){return this.#m}#w;get atime(){return this.#w}#g;get mtime(){return this.#g}#E;get ctime(){return this.#E}#_;get birthtime(){return this.#_}#x;#v;#b;#d;#P;#R;#r;#L;#T;#M;get parentPath(){return(this.parent||this).fullpath()}get path(){return this.parentPath}constructor(e,r=bn,n,i,o,s,l){this.name=e,this.#x=o?Kh(e):Eu(e),this.#r=r&a8,this.nocase=o,this.roots=i,this.root=n||this,this.#L=s,this.#b=l.fullpath,this.#P=l.relative,this.#R=l.relativePosix,this.parent=l.parent,this.parent?this.#e=this.parent.#e:this.#e=uF(l.fs)}depth(){return this.#v!==void 0?this.#v:this.parent?this.#v=this.parent.depth()+1:this.#v=0}childrenCache(){return this.#L}resolve(e){if(!e)return this;let r=this.getRootString(e),i=e.substring(r.length).split(this.splitSep);return r?this.getRoot(r).#F(i):this.#F(i)}#F(e){let r=this;for(let n of e)r=r.child(n);return r}children(){let e=this.#L.get(this);if(e)return e;let r=Object.assign([],{provisional:0});return this.#L.set(this,r),this.#r&=~Xv,r}child(e,r){if(e===""||e===".")return this;if(e==="..")return this.parent||this;let n=this.children(),i=this.nocase?Kh(e):Eu(e);for(let u of n)if(u.#x===i)return u;let o=this.parent?this.sep:"",s=this.#b?this.#b+o+e:void 0,l=this.newChild(e,bn,{...r,parent:this,fullpath:s});return this.canReaddir()||(l.#r|=Vn),n.push(l),l}relative(){if(this.isCWD)return"";if(this.#P!==void 0)return this.#P;let e=this.name,r=this.parent;if(!r)return this.#P=this.name;let n=r.relative();return n+(!n||!r.parent?"":this.sep)+e}relativePosix(){if(this.sep==="/")return this.relative();if(this.isCWD)return"";if(this.#R!==void 0)return this.#R;let e=this.name,r=this.parent;if(!r)return this.#R=this.fullpathPosix();let n=r.relativePosix();return n+(!n||!r.parent?"":"/")+e}fullpath(){if(this.#b!==void 0)return this.#b;let e=this.name,r=this.parent;if(!r)return this.#b=this.name;let i=r.fullpath()+(r.parent?this.sep:"")+e;return this.#b=i}fullpathPosix(){if(this.#d!==void 0)return this.#d;if(this.sep==="/")return this.#d=this.fullpath();if(!this.parent){let i=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(i)?this.#d=`//?/${i}`:this.#d=i}let e=this.parent,r=e.fullpathPosix(),n=r+(!r||!e.parent?"":"/")+this.name;return this.#d=n}isUnknown(){return(this.#r&vn)===bn}isType(e){return this[`is${e}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#r&vn)===gF}isDirectory(){return(this.#r&vn)===ui}isCharacterDevice(){return(this.#r&vn)===fF}isBlockDevice(){return(this.#r&vn)===dF}isFIFO(){return(this.#r&vn)===mF}isSocket(){return(this.#r&vn)===hF}isSymbolicLink(){return(this.#r&La)===La}lstatCached(){return this.#r&oF?this:void 0}readlinkCached(){return this.#T}realpathCached(){return this.#M}readdirCached(){let e=this.children();return e.slice(0,e.provisional)}canReadlink(){if(this.#T)return!0;if(!this.parent)return!1;let e=this.#r&vn;return!(e!==bn&&e!==La||this.#r&Gh||this.#r&Vn)}calledReaddir(){return!!(this.#r&Xv)}isENOENT(){return!!(this.#r&Vn)}isNamed(e){return this.nocase?this.#x===Kh(e):this.#x===Eu(e)}async readlink(){let e=this.#T;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=await this.#e.promises.readlink(this.fullpath()),n=(await this.parent.realpath())?.resolve(r);if(n)return this.#T=n}catch(r){this.#u(r.code);return}}readlinkSync(){let e=this.#T;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=this.#e.readlinkSync(this.fullpath()),n=this.parent.realpathSync()?.resolve(r);if(n)return this.#T=n}catch(r){this.#u(r.code);return}}#I(e){this.#r|=Xv;for(let r=e.provisional;r<e.length;r++){let n=e[r];n&&n.#C()}}#C(){this.#r&Vn||(this.#r=(this.#r|Vn)&vu,this.#k())}#k(){let e=this.children();e.provisional=0;for(let r of e)r.#C()}#A(){this.#r|=Qh,this.#O()}#O(){if(this.#r&wu)return;let e=this.#r;(e&vn)===ui&&(e&=vu),this.#r=e|wu,this.#k()}#N(e=""){e==="ENOTDIR"||e==="EPERM"?this.#O():e==="ENOENT"?this.#C():this.children().provisional=0}#U(e=""){e==="ENOTDIR"?this.parent.#O():e==="ENOENT"&&this.#C()}#u(e=""){let r=this.#r;r|=Gh,e==="ENOENT"&&(r|=Vn),(e==="EINVAL"||e==="UNKNOWN")&&(r&=vu),this.#r=r,e==="ENOTDIR"&&this.parent&&this.parent.#O()}#H(e,r){return this.#D(e,r)||this.#B(e,r)}#B(e,r){let n=Jv(e),i=this.newChild(e.name,n,{parent:this}),o=i.#r&vn;return o!==ui&&o!==La&&o!==bn&&(i.#r|=wu),r.unshift(i),r.provisional++,i}#D(e,r){for(let n=r.provisional;n<r.length;n++){let i=r[n];if((this.nocase?Kh(e.name):Eu(e.name))===i.#x)return this.#V(e,i,n,r)}}#V(e,r,n,i){let o=r.name;return r.#r=r.#r&vu|Jv(e),o!==e.name&&(r.name=e.name),n!==i.provisional&&(n===i.length-1?i.pop():i.splice(n,1),i.unshift(r)),i.provisional++,r}async lstat(){if((this.#r&Vn)===0)try{return this.#z(await this.#e.promises.lstat(this.fullpath())),this}catch(e){this.#U(e.code)}}lstatSync(){if((this.#r&Vn)===0)try{return this.#z(this.#e.lstatSync(this.fullpath())),this}catch(e){this.#U(e.code)}}#z(e){let{atime:r,atimeMs:n,birthtime:i,birthtimeMs:o,blksize:s,blocks:l,ctime:u,ctimeMs:m,dev:d,gid:g,ino:y,mode:x,mtime:w,mtimeMs:E,nlink:U,rdev:V,size:z,uid:ie}=e;this.#w=r,this.#h=n,this.#_=i,this.#m=o,this.#p=s,this.#i=l,this.#E=u,this.#f=m,this.#t=d,this.#S=g,this.#s=y,this.#o=x,this.#g=w,this.#y=E,this.#n=U,this.#l=V,this.#c=z,this.#a=ie;let le=Jv(e);this.#r=this.#r&vu|le|oF,le!==bn&&le!==ui&&le!==La&&(this.#r|=wu)}#$=[];#j=!1;#q(e){this.#j=!1;let r=this.#$.slice();this.#$.length=0,r.forEach(n=>n(null,e))}readdirCB(e,r=!1){if(!this.canReaddir()){r?e(null,[]):queueMicrotask(()=>e(null,[]));return}let n=this.children();if(this.calledReaddir()){let o=n.slice(0,n.provisional);r?e(null,o):queueMicrotask(()=>e(null,o));return}if(this.#$.push(e),this.#j)return;this.#j=!0;let i=this.fullpath();this.#e.readdir(i,{withFileTypes:!0},(o,s)=>{if(o)this.#N(o.code),n.provisional=0;else{for(let l of s)this.#H(l,n);this.#I(n)}this.#q(n.slice(0,n.provisional))})}#W;async readdir(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();if(this.#W)await this.#W;else{let n=()=>{};this.#W=new Promise(i=>n=i);try{for(let i of await this.#e.promises.readdir(r,{withFileTypes:!0}))this.#H(i,e);this.#I(e)}catch(i){this.#N(i.code),e.provisional=0}this.#W=void 0,n()}return e.slice(0,e.provisional)}readdirSync(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();try{for(let n of this.#e.readdirSync(r,{withFileTypes:!0}))this.#H(n,e);this.#I(e)}catch(n){this.#N(n.code),e.provisional=0}return e.slice(0,e.provisional)}canReaddir(){if(this.#r&aF)return!1;let e=vn&this.#r;return e===bn||e===ui||e===La}shouldWalk(e,r){return(this.#r&ui)===ui&&!(this.#r&aF)&&!e.has(this)&&(!r||r(this))}async realpath(){if(this.#M)return this.#M;if(!((Qh|Gh|Vn)&this.#r))try{let e=await this.#e.promises.realpath(this.fullpath());return this.#M=this.resolve(e)}catch{this.#A()}}realpathSync(){if(this.#M)return this.#M;if(!((Qh|Gh|Vn)&this.#r))try{let e=this.#e.realpathSync(this.fullpath());return this.#M=this.resolve(e)}catch{this.#A()}}[yF](e){if(e===this)return;e.isCWD=!1,this.isCWD=!0;let r=new Set([]),n=[],i=this;for(;i&&i.parent;)r.add(i),i.#P=n.join(this.sep),i.#R=n.join("/"),i=i.parent,n.push("..");for(i=e;i&&i.parent&&!r.has(i);)i.#P=void 0,i.#R=void 0,i=i.parent}},Zh=class t extends sr{sep="\\";splitSep=o8;constructor(e,r=bn,n,i,o,s,l){super(e,r,n,i,o,s,l)}newChild(e,r=bn,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}getRootString(e){return xc.win32.parse(e).root}getRoot(e){if(e=i8(e.toUpperCase()),e===this.root.name)return this.root;for(let[r,n]of Object.entries(this.roots))if(this.sameRoot(e,r))return this.roots[e]=n;return this.roots[e]=new Sc(e,this).root}sameRoot(e,r=this.root.name){return e=e.toUpperCase().replace(/\//g,"\\").replace(pF,"$1\\"),e===r}},Xh=class t extends sr{splitSep="/";sep="/";constructor(e,r=bn,n,i,o,s,l){super(e,r,n,i,o,s,l)}getRootString(e){return e.startsWith("/")?"/":""}getRoot(e){return this.root}newChild(e,r=bn,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}},Jh=class{root;rootPath;roots;cwd;#e;#t;#o;nocase;#n;constructor(e=process.cwd(),r,n,{nocase:i,childrenCacheSize:o=16*1024,fs:s=bu}={}){this.#n=uF(s),(e instanceof URL||e.startsWith("file://"))&&(e=(0,lF.fileURLToPath)(e));let l=r.resolve(e);this.roots=Object.create(null),this.rootPath=this.parseRootPath(l),this.#e=new Yh,this.#t=new Yh,this.#o=new eb(o);let u=l.substring(this.rootPath.length).split(n);if(u.length===1&&!u[0]&&u.pop(),i===void 0)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=i,this.root=this.newRoot(this.#n),this.roots[this.rootPath]=this.root;let m=this.root,d=u.length-1,g=r.sep,y=this.rootPath,x=!1;for(let w of u){let E=d--;m=m.child(w,{relative:new Array(E).fill("..").join(g),relativePosix:new Array(E).fill("..").join("/"),fullpath:y+=(x?"":g)+w}),x=!0}this.cwd=m}depth(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.depth()}childrenCache(){return this.#o}resolve(...e){let r="";for(let o=e.length-1;o>=0;o--){let s=e[o];if(!(!s||s===".")&&(r=r?`${s}/${r}`:s,this.isAbsolute(s)))break}let n=this.#e.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpath();return this.#e.set(r,i),i}resolvePosix(...e){let r="";for(let o=e.length-1;o>=0;o--){let s=e[o];if(!(!s||s===".")&&(r=r?`${s}/${r}`:s,this.isAbsolute(s)))break}let n=this.#t.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpathPosix();return this.#t.set(r,i),i}relative(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relative()}relativePosix(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relativePosix()}basename(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.name}dirname(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),(e.parent||e).fullpath()}async readdir(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof sr||(r=e,e=this.cwd);let{withFileTypes:n}=r;if(e.canReaddir()){let i=await e.readdir();return n?i:i.map(o=>o.name)}else return[]}readdirSync(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof sr||(r=e,e=this.cwd);let{withFileTypes:n=!0}=r;return e.canReaddir()?n?e.readdirSync():e.readdirSync().map(i=>i.name):[]}async lstat(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstat()}lstatSync(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstatSync()}async readlink(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof sr||(r=e.withFileTypes,e=this.cwd);let n=await e.readlink();return r?n:n?.fullpath()}readlinkSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof sr||(r=e.withFileTypes,e=this.cwd);let n=e.readlinkSync();return r?n:n?.fullpath()}async realpath(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof sr||(r=e.withFileTypes,e=this.cwd);let n=await e.realpath();return r?n:n?.fullpath()}realpathSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof sr||(r=e.withFileTypes,e=this.cwd);let n=e.realpathSync();return r?n:n?.fullpath()}async walk(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof sr||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=[];(!o||o(e))&&l.push(n?e:e.fullpath());let u=new Set,m=(g,y)=>{u.add(g),g.readdirCB((x,w)=>{if(x)return y(x);let E=w.length;if(!E)return y();let U=()=>{--E===0&&y()};for(let V of w)(!o||o(V))&&l.push(n?V:V.fullpath()),i&&V.isSymbolicLink()?V.realpath().then(z=>z?.isUnknown()?z.lstat():z).then(z=>z?.shouldWalk(u,s)?m(z,U):U()):V.shouldWalk(u,s)?m(V,U):U()},!0)},d=e;return new Promise((g,y)=>{m(d,x=>{if(x)return y(x);g(l)})})}walkSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof sr||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=[];(!o||o(e))&&l.push(n?e:e.fullpath());let u=new Set([e]);for(let m of u){let d=m.readdirSync();for(let g of d){(!o||o(g))&&l.push(n?g:g.fullpath());let y=g;if(g.isSymbolicLink()){if(!(i&&(y=g.realpathSync())))continue;y.isUnknown()&&y.lstatSync()}y.shouldWalk(u,s)&&u.add(y)}}return l}[Symbol.asyncIterator](){return this.iterate()}iterate(e=this.cwd,r={}){return typeof e=="string"?e=this.cwd.resolve(e):e instanceof sr||(r=e,e=this.cwd),this.stream(e,r)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof sr||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r;(!o||o(e))&&(yield n?e:e.fullpath());let l=new Set([e]);for(let u of l){let m=u.readdirSync();for(let d of m){(!o||o(d))&&(yield n?d:d.fullpath());let g=d;if(d.isSymbolicLink()){if(!(i&&(g=d.realpathSync())))continue;g.isUnknown()&&g.lstatSync()}g.shouldWalk(l,s)&&l.add(g)}}}stream(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof sr||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=new Mo({objectMode:!0});(!o||o(e))&&l.write(n?e:e.fullpath());let u=new Set,m=[e],d=0,g=()=>{let y=!1;for(;!y;){let x=m.shift();if(!x){d===0&&l.end();return}d++,u.add(x);let w=(U,V,z=!1)=>{if(U)return l.emit("error",U);if(i&&!z){let ie=[];for(let le of V)le.isSymbolicLink()&&ie.push(le.realpath().then(ue=>ue?.isUnknown()?ue.lstat():ue));if(ie.length){Promise.all(ie).then(()=>w(null,V,!0));return}}for(let ie of V)ie&&(!o||o(ie))&&(l.write(n?ie:ie.fullpath())||(y=!0));d--;for(let ie of V){let le=ie.realpathCached()||ie;le.shouldWalk(u,s)&&m.push(le)}y&&!l.flowing?l.once("drain",g):E||g()},E=!0;x.readdirCB(w,!0),E=!1}};return g(),l}streamSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof sr||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=new Mo({objectMode:!0}),u=new Set;(!o||o(e))&&l.write(n?e:e.fullpath());let m=[e],d=0,g=()=>{let y=!1;for(;!y;){let x=m.shift();if(!x){d===0&&l.end();return}d++,u.add(x);let w=x.readdirSync();for(let E of w)(!o||o(E))&&(l.write(n?E:E.fullpath())||(y=!0));d--;for(let E of w){let U=E;if(E.isSymbolicLink()){if(!(i&&(U=E.realpathSync())))continue;U.isUnknown()&&U.lstatSync()}U.shouldWalk(u,s)&&m.push(U)}}y&&!l.flowing&&l.once("drain",g)};return g(),l}chdir(e=this.cwd){let r=this.cwd;this.cwd=typeof e=="string"?this.cwd.resolve(e):e,this.cwd[yF](r)}},Sc=class extends Jh{sep="\\";constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,xc.win32,"\\",{...r,nocase:n}),this.nocase=n;for(let i=this.cwd;i;i=i.parent)i.nocase=this.nocase}parseRootPath(e){return xc.win32.parse(e).root.toUpperCase()}newRoot(e){return new Zh(this.rootPath,ui,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")||e.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(e)}},vc=class extends Jh{sep="/";constructor(e=process.cwd(),r={}){let{nocase:n=!1}=r;super(e,xc.posix,"/",{...r,nocase:n}),this.nocase=n}parseRootPath(e){return"/"}newRoot(e){return new Xh(this.rootPath,ui,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")}},_u=class extends vc{constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,{...r,nocase:n})}},iOe=process.platform==="win32"?Zh:Xh,TF=process.platform==="win32"?Sc:process.platform==="darwin"?_u:vc;var s8=t=>t.length>=1,c8=t=>t.length>=1,bc=class t{#e;#t;#o;length;#n;#a;#S;#l;#p;#s;#c=!0;constructor(e,r,n,i){if(!s8(e))throw new TypeError("empty pattern list");if(!c8(r))throw new TypeError("empty glob list");if(r.length!==e.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=e.length,n<0||n>=this.length)throw new TypeError("index out of range");if(this.#e=e,this.#t=r,this.#o=n,this.#n=i,this.#o===0){if(this.isUNC()){let[o,s,l,u,...m]=this.#e,[d,g,y,x,...w]=this.#t;m[0]===""&&(m.shift(),w.shift());let E=[o,s,l,u,""].join("/"),U=[d,g,y,x,""].join("/");this.#e=[E,...m],this.#t=[U,...w],this.length=this.#e.length}else if(this.isDrive()||this.isAbsolute()){let[o,...s]=this.#e,[l,...u]=this.#t;s[0]===""&&(s.shift(),u.shift());let m=o+"/",d=l+"/";this.#e=[m,...s],this.#t=[d,...u],this.length=this.#e.length}}}pattern(){return this.#e[this.#o]}isString(){return typeof this.#e[this.#o]=="string"}isGlobstar(){return this.#e[this.#o]===Xt}isRegExp(){return this.#e[this.#o]instanceof RegExp}globString(){return this.#S=this.#S||(this.#o===0?this.isAbsolute()?this.#t[0]+this.#t.slice(1).join("/"):this.#t.join("/"):this.#t.slice(this.#o).join("/"))}hasMore(){return this.length>this.#o+1}rest(){return this.#a!==void 0?this.#a:this.hasMore()?(this.#a=new t(this.#e,this.#t,this.#o+1,this.#n),this.#a.#s=this.#s,this.#a.#p=this.#p,this.#a.#l=this.#l,this.#a):this.#a=null}isUNC(){let e=this.#e;return this.#p!==void 0?this.#p:this.#p=this.#n==="win32"&&this.#o===0&&e[0]===""&&e[1]===""&&typeof e[2]=="string"&&!!e[2]&&typeof e[3]=="string"&&!!e[3]}isDrive(){let e=this.#e;return this.#l!==void 0?this.#l:this.#l=this.#n==="win32"&&this.#o===0&&this.length>1&&typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0])}isAbsolute(){let e=this.#e;return this.#s!==void 0?this.#s:this.#s=e[0]===""&&e.length>1||this.isDrive()||this.isUNC()}root(){let e=this.#e[0];return typeof e=="string"&&this.isAbsolute()&&this.#o===0?e:""}checkFollowGlobstar(){return!(this.#o===0||!this.isGlobstar()||!this.#c)}markFollowGlobstar(){return this.#o===0||!this.isGlobstar()||!this.#c?!1:(this.#c=!1,!0)}};var l8=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",wc=class{relative;relativeChildren;absolute;absoluteChildren;platform;mmopts;constructor(e,{nobrace:r,nocase:n,noext:i,noglobstar:o,platform:s=l8}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[],this.platform=s,this.mmopts={dot:!0,nobrace:r,nocase:n,noext:i,noglobstar:o,optimizationLevel:2,platform:s,nocomment:!0,nonegate:!0};for(let l of e)this.add(l)}add(e){let r=new Qr(e,this.mmopts);for(let n=0;n<r.set.length;n++){let i=r.set[n],o=r.globParts[n];if(!i||!o)throw new Error("invalid pattern object");for(;i[0]==="."&&o[0]===".";)i.shift(),o.shift();let s=new bc(i,o,0,this.platform),l=new Qr(s.globString(),this.mmopts),u=o[o.length-1]==="**",m=s.isAbsolute();m?this.absolute.push(l):this.relative.push(l),u&&(m?this.absoluteChildren.push(l):this.relativeChildren.push(l))}}ignored(e){let r=e.fullpath(),n=`${r}/`,i=e.relative()||".",o=`${i}/`;for(let s of this.relative)if(s.match(i)||s.match(o))return!0;for(let s of this.absolute)if(s.match(r)||s.match(n))return!0;return!1}childrenIgnored(e){let r=e.fullpath()+"/",n=(e.relative()||".")+"/";for(let i of this.relativeChildren)if(i.match(n))return!0;for(let i of this.absoluteChildren)if(i.match(r))return!0;return!1}};var tb=class t{store;constructor(e=new Map){this.store=e}copy(){return new t(new Map(this.store))}hasWalked(e,r){return this.store.get(e.fullpath())?.has(r.globString())}storeWalked(e,r){let n=e.fullpath(),i=this.store.get(n);i?i.add(r.globString()):this.store.set(n,new Set([r.globString()]))}},rb=class{store=new Map;add(e,r,n){let i=(r?2:0)|(n?1:0),o=this.store.get(e);this.store.set(e,o===void 0?i:i&o)}entries(){return[...this.store.entries()].map(([e,r])=>[e,!!(r&2),!!(r&1)])}},nb=class{store=new Map;add(e,r){if(!e.canReaddir())return;let n=this.store.get(e);n?n.find(i=>i.globString()===r.globString())||n.push(r):this.store.set(e,[r])}get(e){let r=this.store.get(e);if(!r)throw new Error("attempting to walk unknown path");return r}entries(){return this.keys().map(e=>[e,this.store.get(e)])}keys(){return[...this.store.keys()].filter(e=>e.canReaddir())}},Ru=class t{hasWalkedCache;matches=new rb;subwalks=new nb;patterns;follow;dot;opts;constructor(e,r){this.opts=e,this.follow=!!e.follow,this.dot=!!e.dot,this.hasWalkedCache=r?r.copy():new tb}processPatterns(e,r){this.patterns=r;let n=r.map(i=>[e,i]);for(let[i,o]of n){this.hasWalkedCache.storeWalked(i,o);let s=o.root(),l=o.isAbsolute()&&this.opts.absolute!==!1;if(s){i=i.resolve(s==="/"&&this.opts.root!==void 0?this.opts.root:s);let g=o.rest();if(g)o=g;else{this.matches.add(i,!0,!1);continue}}if(i.isENOENT())continue;let u,m,d=!1;for(;typeof(u=o.pattern())=="string"&&(m=o.rest());)i=i.resolve(u),o=m,d=!0;if(u=o.pattern(),m=o.rest(),d){if(this.hasWalkedCache.hasWalked(i,o))continue;this.hasWalkedCache.storeWalked(i,o)}if(typeof u=="string"){let g=u===".."||u===""||u===".";this.matches.add(i.resolve(u),l,g);continue}else if(u===Xt){(!i.isSymbolicLink()||this.follow||o.checkFollowGlobstar())&&this.subwalks.add(i,o);let g=m?.pattern(),y=m?.rest();if(!m||(g===""||g===".")&&!y)this.matches.add(i,l,g===""||g===".");else if(g===".."){let x=i.parent||i;y?this.hasWalkedCache.hasWalked(x,y)||this.subwalks.add(x,y):this.matches.add(x,l,!0)}}else u instanceof RegExp&&this.subwalks.add(i,o)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new t(this.opts,this.hasWalkedCache)}filterEntries(e,r){let n=this.subwalks.get(e),i=this.child();for(let o of r)for(let s of n){let l=s.isAbsolute(),u=s.pattern(),m=s.rest();u===Xt?i.testGlobstar(o,s,m,l):u instanceof RegExp?i.testRegExp(o,u,m,l):i.testString(o,u,m,l)}return i}testGlobstar(e,r,n,i){if((this.dot||!e.name.startsWith("."))&&(r.hasMore()||this.matches.add(e,i,!1),e.canReaddir()&&(this.follow||!e.isSymbolicLink()?this.subwalks.add(e,r):e.isSymbolicLink()&&(n&&r.checkFollowGlobstar()?this.subwalks.add(e,n):r.markFollowGlobstar()&&this.subwalks.add(e,r)))),n){let o=n.pattern();if(typeof o=="string"&&o!==".."&&o!==""&&o!==".")this.testString(e,o,n.rest(),i);else if(o===".."){let s=e.parent||e;this.subwalks.add(s,n)}else o instanceof RegExp&&this.testRegExp(e,o,n.rest(),i)}}testRegExp(e,r,n,i){r.test(e.name)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}testString(e,r,n,i){e.isNamed(r)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}};var u8=(t,e)=>typeof t=="string"?new wc([t],e):Array.isArray(t)?new wc(t,e):t,ey=class{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#e=[];#t;#o;signal;maxDepth;includeChildMatches;constructor(e,r,n){if(this.patterns=e,this.path=r,this.opts=n,this.#o=!n.posix&&n.platform==="win32"?"\\":"/",this.includeChildMatches=n.includeChildMatches!==!1,(n.ignore||!this.includeChildMatches)&&(this.#t=u8(n.ignore??[],n),!this.includeChildMatches&&typeof this.#t.add!="function")){let i="cannot ignore child matches, ignore lacks add() method.";throw new Error(i)}this.maxDepth=n.maxDepth||1/0,n.signal&&(this.signal=n.signal,this.signal.addEventListener("abort",()=>{this.#e.length=0}))}#n(e){return this.seen.has(e)||!!this.#t?.ignored?.(e)}#a(e){return!!this.#t?.childrenIgnored?.(e)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;this.paused=!1;let e;for(;!this.paused&&(e=this.#e.shift());)e()}onResume(e){this.signal?.aborted||(this.paused?this.#e.push(e):e())}async matchCheck(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||await e.realpath(),!n)return;e=n}let o=e.isUnknown()||this.opts.stat?await e.lstat():e;if(this.opts.follow&&this.opts.nodir&&o?.isSymbolicLink()){let s=await o.realpath();s&&(s.isUnknown()||this.opts.stat)&&await s.lstat()}return this.matchCheckTest(o,r)}matchCheckTest(e,r){return e&&(this.maxDepth===1/0||e.depth()<=this.maxDepth)&&(!r||e.canReaddir())&&(!this.opts.nodir||!e.isDirectory())&&(!this.opts.nodir||!this.opts.follow||!e.isSymbolicLink()||!e.realpathCached()?.isDirectory())&&!this.#n(e)?e:void 0}matchCheckSync(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||e.realpathSync(),!n)return;e=n}let o=e.isUnknown()||this.opts.stat?e.lstatSync():e;if(this.opts.follow&&this.opts.nodir&&o?.isSymbolicLink()){let s=o.realpathSync();s&&(s?.isUnknown()||this.opts.stat)&&s.lstatSync()}return this.matchCheckTest(o,r)}matchFinish(e,r){if(this.#n(e))return;if(!this.includeChildMatches&&this.#t?.add){let o=`${e.relativePosix()}/**`;this.#t.add(o)}let n=this.opts.absolute===void 0?r:this.opts.absolute;this.seen.add(e);let i=this.opts.mark&&e.isDirectory()?this.#o:"";if(this.opts.withFileTypes)this.matchEmit(e);else if(n){let o=this.opts.posix?e.fullpathPosix():e.fullpath();this.matchEmit(o+i)}else{let o=this.opts.posix?e.relativePosix():e.relative(),s=this.opts.dotRelative&&!o.startsWith(".."+this.#o)?"."+this.#o:"";this.matchEmit(o?s+o+i:"."+i)}}async match(e,r,n){let i=await this.matchCheck(e,n);i&&this.matchFinish(i,r)}matchSync(e,r,n){let i=this.matchCheckSync(e,n);i&&this.matchFinish(i,r)}walkCB(e,r,n){this.signal?.aborted&&n(),this.walkCB2(e,r,new Ru(this.opts),n)}walkCB2(e,r,n,i){if(this.#a(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2(e,r,n,i));return}n.processPatterns(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,u,m]of n.matches.entries())this.#n(l)||(o++,this.match(l,u,m).then(()=>s()));for(let l of n.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;o++;let u=l.readdirCached();l.calledReaddir()?this.walkCB3(l,u,n,s):l.readdirCB((m,d)=>this.walkCB3(l,d,n,s),!0)}s()}walkCB3(e,r,n,i){n=n.filterEntries(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,u,m]of n.matches.entries())this.#n(l)||(o++,this.match(l,u,m).then(()=>s()));for(let[l,u]of n.subwalks.entries())o++,this.walkCB2(l,u,n.child(),s);s()}walkCBSync(e,r,n){this.signal?.aborted&&n(),this.walkCB2Sync(e,r,new Ru(this.opts),n)}walkCB2Sync(e,r,n,i){if(this.#a(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2Sync(e,r,n,i));return}n.processPatterns(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,u,m]of n.matches.entries())this.#n(l)||this.matchSync(l,u,m);for(let l of n.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;o++;let u=l.readdirSync();this.walkCB3Sync(l,u,n,s)}s()}walkCB3Sync(e,r,n,i){n=n.filterEntries(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,u,m]of n.matches.entries())this.#n(l)||this.matchSync(l,u,m);for(let[l,u]of n.subwalks.entries())o++,this.walkCB2Sync(l,u,n.child(),s);s()}},ku=class extends ey{matches=new Set;constructor(e,r,n){super(e,r,n)}matchEmit(e){this.matches.add(e)}async walk(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise((e,r)=>{this.walkCB(this.path,this.patterns,()=>{this.signal?.aborted?r(this.signal.reason):e(this.matches)})}),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>{if(this.signal?.aborted)throw this.signal.reason}),this.matches}},Au=class extends ey{results;constructor(e,r,n){super(e,r,n),this.results=new Mo({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(e){this.results.write(e),this.results.flowing||this.pause()}stream(){let e=this.path;return e.isUnknown()?e.lstat().then(()=>{this.walkCB(e,this.patterns,()=>this.results.end())}):this.walkCB(e,this.patterns,()=>this.results.end()),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}};var p8=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",Wn=class{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;includeChildMatches;opts;patterns;constructor(e,r){if(!r)throw new TypeError("glob options required");if(this.withFileTypes=!!r.withFileTypes,this.signal=r.signal,this.follow=!!r.follow,this.dot=!!r.dot,this.dotRelative=!!r.dotRelative,this.nodir=!!r.nodir,this.mark=!!r.mark,r.cwd?(r.cwd instanceof URL||r.cwd.startsWith("file://"))&&(r.cwd=(0,xF.fileURLToPath)(r.cwd)):this.cwd="",this.cwd=r.cwd||"",this.root=r.root,this.magicalBraces=!!r.magicalBraces,this.nobrace=!!r.nobrace,this.noext=!!r.noext,this.realpath=!!r.realpath,this.absolute=r.absolute,this.includeChildMatches=r.includeChildMatches!==!1,this.noglobstar=!!r.noglobstar,this.matchBase=!!r.matchBase,this.maxDepth=typeof r.maxDepth=="number"?r.maxDepth:1/0,this.stat=!!r.stat,this.ignore=r.ignore,this.withFileTypes&&this.absolute!==void 0)throw new Error("cannot set absolute and withFileTypes:true");if(typeof e=="string"&&(e=[e]),this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(e=e.map(u=>u.replace(/\\/g,"/"))),this.matchBase){if(r.noglobstar)throw new TypeError("base matching requires globstar");e=e.map(u=>u.includes("/")?u:`./**/${u}`)}if(this.pattern=e,this.platform=r.platform||p8,this.opts={...r,platform:this.platform},r.scurry){if(this.scurry=r.scurry,r.nocase!==void 0&&r.nocase!==r.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{let u=r.platform==="win32"?Sc:r.platform==="darwin"?_u:r.platform?vc:TF;this.scurry=new u(this.cwd,{nocase:r.nocase,fs:r.fs})}this.nocase=this.scurry.nocase;let n=this.platform==="darwin"||this.platform==="win32",i={...r,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:n,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},o=this.pattern.map(u=>new Qr(u,i)),[s,l]=o.reduce((u,m)=>(u[0].push(...m.set),u[1].push(...m.globParts),u),[[],[]]);this.patterns=s.map((u,m)=>{let d=l[m];if(!d)throw new Error("invalid pattern object");return new bc(u,d,0,this.platform)})}async walk(){return[...await new ku(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walk()]}walkSync(){return[...new ku(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walkSync()]}stream(){return new Au(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).stream()}streamSync(){return new Au(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}};var ib=(t,e={})=>{Array.isArray(t)||(t=[t]);for(let r of t)if(new Qr(r,e).hasMagic())return!0;return!1};function ty(t,e={}){return new Wn(t,e).streamSync()}function vF(t,e={}){return new Wn(t,e).stream()}function bF(t,e={}){return new Wn(t,e).walkSync()}async function SF(t,e={}){return new Wn(t,e).walk()}function ry(t,e={}){return new Wn(t,e).iterateSync()}function wF(t,e={}){return new Wn(t,e).iterate()}var m8=ty,f8=Object.assign(vF,{sync:ty}),d8=ry,g8=Object.assign(wF,{sync:ry}),h8=Object.assign(bF,{stream:ty,iterate:ry}),ob=Object.assign(SF,{glob:SF,globSync:bF,sync:h8,globStream:vF,stream:f8,globStreamSync:ty,streamSync:m8,globIterate:wF,iterate:g8,globIterateSync:ry,iterateSync:d8,Glob:Wn,hasMagic:ib,escape:dc,unescape:Hn});ob.glob=ob;function EF(){let t=process.env.CURSORLESS_MODE;switch(t){case void 0:case"production":return"production";case"development":return"development";case"test":return"test";default:throw new Error(`Unexpected value for environment variable CURSORLESS_MODE: ${t}`)}}var IF=Object.defineProperty,x8=Object.getOwnPropertyNames,O=(t,e)=>IF(t,"name",{value:e,configurable:!0}),S8=(t,e)=>function(){return e||(0,t[x8(t)[0]])((e={exports:{}}).exports,e),e.exports},bb=(t,e)=>{for(var r in e)IF(t,r,{get:e[r],enumerable:!0})},v8=S8({"(disabled):util"(){}}),ny={};bb(ny,{addChainableMethod:()=>Ib,addLengthGuard:()=>Fu,addMethod:()=>Db,addProperty:()=>Mb,checkError:()=>Zr,compareByInspect:()=>sy,eql:()=>cI,expectTypes:()=>WF,flag:()=>Me,getActual:()=>fy,getMessage:()=>_b,getName:()=>gy,getOperator:()=>Ub,getOwnEnumerableProperties:()=>Nb,getOwnEnumerablePropertySymbols:()=>Ob,getPathInfo:()=>Pb,hasProperty:()=>dy,inspect:()=>qe,isNaN:()=>cy,isNumeric:()=>Vt,isProxyEnabled:()=>Lu,isRegExp:()=>ly,objDisplay:()=>Fa,overwriteChainableMethod:()=>Cb,overwriteMethod:()=>Fb,overwriteProperty:()=>Lb,proxify:()=>kc,test:()=>wb,transferFlags:()=>$n,type:()=>tt});var Zr={};bb(Zr,{compatibleConstructor:()=>NF,compatibleInstance:()=>OF,compatibleMessage:()=>UF,getConstructorName:()=>HF,getMessage:()=>BF});function my(t){return t instanceof Error||Object.prototype.toString.call(t)==="[object Error]"}O(my,"isErrorInstance");function CF(t){return Object.prototype.toString.call(t)==="[object RegExp]"}O(CF,"isRegExp");function OF(t,e){return my(e)&&t===e}O(OF,"compatibleInstance");function NF(t,e){return my(e)?t.constructor===e.constructor||t instanceof e.constructor:(typeof e=="object"||typeof e=="function")&&e.prototype?t.constructor===e||t instanceof e:!1}O(NF,"compatibleConstructor");function UF(t,e){let r=typeof t=="string"?t:t.message;return CF(e)?e.test(r):typeof e=="string"?r.indexOf(e)!==-1:!1}O(UF,"compatibleMessage");function HF(t){let e=t;return my(t)?e=t.constructor.name:typeof t=="function"&&(e=t.name,e===""&&(e=new t().name||e)),e}O(HF,"getConstructorName");function BF(t){let e="";return t&&t.message?e=t.message:typeof t=="string"&&(e=t),e}O(BF,"getMessage");function Me(t,e,r){var n=t.__flags||(t.__flags=Object.create(null));if(arguments.length===3)n[e]=r;else return n[e]}O(Me,"flag");function wb(t,e){var r=Me(t,"negate"),n=e[0];return r?!n:n}O(wb,"test");function tt(t){if(typeof t>"u")return"undefined";if(t===null)return"null";let e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}O(tt,"type");var b8="captureStackTrace"in Error,Ke=class VF extends Error{static{O(this,"AssertionError")}message;get name(){return"AssertionError"}get ok(){return!1}constructor(e="Unspecified AssertionError",r,n){super(e),this.message=e,b8&&Error.captureStackTrace(this,n||VF);for(let i in r)i in this||(this[i]=r[i])}toJSON(e){return{...this,name:this.name,message:this.message,ok:!1,stack:e!==!1?this.stack:void 0}}};function WF(t,e){var r=Me(t,"message"),n=Me(t,"ssfi");r=r?r+": ":"",t=Me(t,"object"),e=e.map(function(s){return s.toLowerCase()}),e.sort();var i=e.map(function(s,l){var u=~["a","e","i","o","u"].indexOf(s.charAt(0))?"an":"a",m=e.length>1&&l===e.length-1?"or ":"";return m+u+" "+s}).join(", "),o=tt(t).toLowerCase();if(!e.some(function(s){return o===s}))throw new Ke(r+"object tested must be "+i+", but "+o+" given",void 0,n)}O(WF,"expectTypes");function fy(t,e){return e.length>4?e[4]:t._obj}O(fy,"getActual");var _F={bold:["1","22"],dim:["2","22"],italic:["3","23"],underline:["4","24"],inverse:["7","27"],hidden:["8","28"],strike:["9","29"],black:["30","39"],red:["31","39"],green:["32","39"],yellow:["33","39"],blue:["34","39"],magenta:["35","39"],cyan:["36","39"],white:["37","39"],brightblack:["30;1","39"],brightred:["31;1","39"],brightgreen:["32;1","39"],brightyellow:["33;1","39"],brightblue:["34;1","39"],brightmagenta:["35;1","39"],brightcyan:["36;1","39"],brightwhite:["37;1","39"],grey:["90","39"]},w8={special:"cyan",number:"yellow",bigint:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",symbol:"green",date:"magenta",regexp:"red"},_c="\u2026";function $F(t,e){let r=_F[w8[e]]||_F[e]||"";return r?`\x1B[${r[0]}m${String(t)}\x1B[${r[1]}m`:String(t)}O($F,"colorise");function jF({showHidden:t=!1,depth:e=2,colors:r=!1,customInspect:n=!0,showProxy:i=!1,maxArrayLength:o=1/0,breakLength:s=1/0,seen:l=[],truncate:u=1/0,stylize:m=String}={},d){let g={showHidden:!!t,depth:Number(e),colors:!!r,customInspect:!!n,showProxy:!!i,maxArrayLength:Number(o),breakLength:Number(s),truncate:Number(u),seen:l,inspect:d,stylize:m};return g.colors&&(g.stylize=$F),g}O(jF,"normaliseOptions");function zF(t){return t>="\uD800"&&t<="\uDBFF"}O(zF,"isHighSurrogate");function Ui(t,e,r=_c){t=String(t);let n=r.length,i=t.length;if(n>e&&i>n)return r;if(i>e&&i>n){let o=e-n;return o>0&&zF(t[o-1])&&(o=o-1),`${t.slice(0,o)}${r}`}return t}O(Ui,"truncate");function wn(t,e,r,n=", "){r=r||e.inspect;let i=t.length;if(i===0)return"";let o=e.truncate,s="",l="",u="";for(let m=0;m<i;m+=1){let d=m+1===t.length,g=m+2===t.length;u=`${_c}(${t.length-m})`;let y=t[m];e.truncate=o-s.length-(d?0:n.length);let x=l||r(y,e)+(d?"":n),w=s.length+x.length,E=w+u.length;if(d&&w>o&&s.length+u.length<=o||!d&&!g&&E>o||(l=d?"":r(t[m+1],e)+(g?"":n),!d&&g&&E>o&&w+l.length>o))break;if(s+=x,!d&&!g&&w+l.length>=o){u=`${_c}(${t.length-m-1})`;break}u=""}return`${s}${u}`}O(wn,"inspectList");function qF(t){return t.match(/^[a-zA-Z_][a-zA-Z_0-9]*$/)?t:JSON.stringify(t).replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'")}O(qF,"quoteComplexKey");function Rc([t,e],r){return r.truncate-=2,typeof t=="string"?t=qF(t):typeof t!="number"&&(t=`[${r.inspect(t,r)}]`),r.truncate-=t.length,e=r.inspect(e,r),`${t}: ${e}`}O(Rc,"inspectProperty");function GF(t,e){let r=Object.keys(t).slice(t.length);if(!t.length&&!r.length)return"[]";e.truncate-=4;let n=wn(t,e);e.truncate-=n.length;let i="";return r.length&&(i=wn(r.map(o=>[o,t[o]]),e,Rc)),`[ ${n}${i?`, ${i}`:""} ]`}O(GF,"inspectArray");var E8=O(t=>typeof Buffer=="function"&&t instanceof Buffer?"Buffer":t[Symbol.toStringTag]?t[Symbol.toStringTag]:t.constructor.name,"getArrayName");function mi(t,e){let r=E8(t);e.truncate-=r.length+4;let n=Object.keys(t).slice(t.length);if(!t.length&&!n.length)return`${r}[]`;let i="";for(let s=0;s<t.length;s++){let l=`${e.stylize(Ui(t[s],e.truncate),"number")}${s===t.length-1?"":", "}`;if(e.truncate-=l.length,t[s]!==t.length&&e.truncate<=3){i+=`${_c}(${t.length-t[s]+1})`;break}i+=l}let o="";return n.length&&(o=wn(n.map(s=>[s,t[s]]),e,Rc)),`${r}[ ${i}${o?`, ${o}`:""} ]`}O(mi,"inspectTypedArray");function KF(t,e){let r=t.toJSON();if(r===null)return"Invalid Date";let n=r.split("T"),i=n[0];return e.stylize(`${i}T${Ui(n[1],e.truncate-i.length-1)}`,"date")}O(KF,"inspectDate");function cb(t,e){let r=t[Symbol.toStringTag]||"Function",n=t.name;return n?e.stylize(`[${r} ${Ui(n,e.truncate-11)}]`,"special"):e.stylize(`[${r}]`,"special")}O(cb,"inspectFunction");function QF([t,e],r){return r.truncate-=4,t=r.inspect(t,r),r.truncate-=t.length,e=r.inspect(e,r),`${t} => ${e}`}O(QF,"inspectMapEntry");function YF(t){let e=[];return t.forEach((r,n)=>{e.push([n,r])}),e}O(YF,"mapToEntries");function ZF(t,e){return t.size-1<=0?"Map{}":(e.truncate-=7,`Map{ ${wn(YF(t),e,QF)} }`)}O(ZF,"inspectMap");var _8=Number.isNaN||(t=>t!==t);function lb(t,e){return _8(t)?e.stylize("NaN","number"):t===1/0?e.stylize("Infinity","number"):t===-1/0?e.stylize("-Infinity","number"):t===0?e.stylize(1/t===1/0?"+0":"-0","number"):e.stylize(Ui(String(t),e.truncate),"number")}O(lb,"inspectNumber");function ub(t,e){let r=Ui(t.toString(),e.truncate-1);return r!==_c&&(r+="n"),e.stylize(r,"bigint")}O(ub,"inspectBigInt");function XF(t,e){let r=t.toString().split("/")[2],n=e.truncate-(2+r.length),i=t.source;return e.stylize(`/${Ui(i,n)}/${r}`,"regexp")}O(XF,"inspectRegExp");function JF(t){let e=[];return t.forEach(r=>{e.push(r)}),e}O(JF,"arrayFromSet");function eI(t,e){return t.size===0?"Set{}":(e.truncate-=7,`Set{ ${wn(JF(t),e)} }`)}O(eI,"inspectSet");var RF=new RegExp("['\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]","g"),R8={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"},k8=16,A8=4;function tI(t){return R8[t]||`\\u${`0000${t.charCodeAt(0).toString(k8)}`.slice(-A8)}`}O(tI,"escape");function pb(t,e){return RF.test(t)&&(t=t.replace(RF,tI)),e.stylize(`'${Ui(t,e.truncate-2)}'`,"string")}O(pb,"inspectString");function mb(t){return"description"in Symbol.prototype?t.description?`Symbol(${t.description})`:"Symbol()":t.toString()}O(mb,"inspectSymbol");var rI=O(()=>"Promise{\u2026}","getPromiseValue");try{let{getPromiseDetails:t,kPending:e,kRejected:r}=process.binding("util");Array.isArray(t(Promise.resolve()))&&(rI=O((n,i)=>{let[o,s]=t(n);return o===e?"Promise{<pending>}":`Promise${o===r?"!":""}{${i.inspect(s,i)}}`},"getPromiseValue"))}catch{}var P8=rI;function Mu(t,e){let r=Object.getOwnPropertyNames(t),n=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[];if(r.length===0&&n.length===0)return"{}";if(e.truncate-=4,e.seen=e.seen||[],e.seen.includes(t))return"[Circular]";e.seen.push(t);let i=wn(r.map(l=>[l,t[l]]),e,Rc),o=wn(n.map(l=>[l,t[l]]),e,Rc);e.seen.pop();let s="";return i&&o&&(s=", "),`{ ${i}${s}${o} }`}O(Mu,"inspectObject");var ab=typeof Symbol<"u"&&Symbol.toStringTag?Symbol.toStringTag:!1;function nI(t,e){let r="";return ab&&ab in t&&(r=t[ab]),r=r||t.constructor.name,(!r||r==="_class")&&(r="<Anonymous Class>"),e.truncate-=r.length,`${r}${Mu(t,e)}`}O(nI,"inspectClass");function iI(t,e){return t.length===0?"Arguments[]":(e.truncate-=13,`Arguments[ ${wn(t,e)} ]`)}O(iI,"inspectArguments");var M8=["stack","line","column","name","message","fileName","lineNumber","columnNumber","number","description","cause"];function oI(t,e){let r=Object.getOwnPropertyNames(t).filter(s=>M8.indexOf(s)===-1),n=t.name;e.truncate-=n.length;let i="";if(typeof t.message=="string"?i=Ui(t.message,e.truncate):r.unshift("message"),i=i?`: ${i}`:"",e.truncate-=i.length+5,e.seen=e.seen||[],e.seen.includes(t))return"[Circular]";e.seen.push(t);let o=wn(r.map(s=>[s,t[s]]),e,Rc);return`${n}${i}${o?` { ${o} }`:""}`}O(oI,"inspectObject");function aI([t,e],r){return r.truncate-=3,e?`${r.stylize(String(t),"yellow")}=${r.stylize(`"${e}"`,"string")}`:`${r.stylize(String(t),"yellow")}`}O(aI,"inspectAttribute");function iy(t,e){return wn(t,e,Eb,`
`)}O(iy,"inspectHTMLCollection");function Eb(t,e){let r=t.getAttributeNames(),n=t.tagName.toLowerCase(),i=e.stylize(`<${n}`,"special"),o=e.stylize(">","special"),s=e.stylize(`</${n}>`,"special");e.truncate-=n.length*2+5;let l="";r.length>0&&(l+=" ",l+=wn(r.map(d=>[d,t.getAttribute(d)]),e,aI," ")),e.truncate-=l.length;let u=e.truncate,m=iy(t.children,e);return m&&m.length>u&&(m=`${_c}(${t.children.length})`),`${i}${l}${o}${m}${s}`}O(Eb,"inspectHTML");var D8=typeof Symbol=="function"&&typeof Symbol.for=="function",sb=D8?Symbol.for("chai/inspect"):"@@chai/inspect",Ec=!1;try{let t=v8();Ec=t.inspect?t.inspect.custom:!1}catch{Ec=!1}var kF=new WeakMap,AF={},PF={undefined:(t,e)=>e.stylize("undefined","undefined"),null:(t,e)=>e.stylize("null","null"),boolean:(t,e)=>e.stylize(String(t),"boolean"),Boolean:(t,e)=>e.stylize(String(t),"boolean"),number:lb,Number:lb,bigint:ub,BigInt:ub,string:pb,String:pb,function:cb,Function:cb,symbol:mb,Symbol:mb,Array:GF,Date:KF,Map:ZF,Set:eI,RegExp:XF,Promise:P8,WeakSet:(t,e)=>e.stylize("WeakSet{\u2026}","special"),WeakMap:(t,e)=>e.stylize("WeakMap{\u2026}","special"),Arguments:iI,Int8Array:mi,Uint8Array:mi,Uint8ClampedArray:mi,Int16Array:mi,Uint16Array:mi,Int32Array:mi,Uint32Array:mi,Float32Array:mi,Float64Array:mi,Generator:()=>"",DataView:()=>"",ArrayBuffer:()=>"",Error:oI,HTMLCollection:iy,NodeList:iy},L8=O((t,e,r)=>sb in t&&typeof t[sb]=="function"?t[sb](e):Ec&&Ec in t&&typeof t[Ec]=="function"?t[Ec](e.depth,e):"inspect"in t&&typeof t.inspect=="function"?t.inspect(e.depth,e):"constructor"in t&&kF.has(t.constructor)?kF.get(t.constructor)(t,e):AF[r]?AF[r](t,e):"","inspectCustom"),F8=Object.prototype.toString;function oy(t,e={}){let r=jF(e,oy),{customInspect:n}=r,i=t===null?"null":typeof t;if(i==="object"&&(i=F8.call(t).slice(8,-1)),i in PF)return PF[i](t,r);if(n&&t){let s=L8(t,r,i);if(s)return typeof s=="string"?s:oy(s,r)}let o=t?Object.getPrototypeOf(t):!1;return o===Object.prototype||o===null?Mu(t,r):t&&typeof HTMLElement=="function"&&t instanceof HTMLElement?Eb(t,r):"constructor"in t?t.constructor!==Object?nI(t,r):Mu(t,r):t===Object(t)?Mu(t,r):r.stylize(String(t),i)}O(oy,"inspect");var Tr={includeStack:!1,showDiff:!0,truncateThreshold:40,useProxy:!0,proxyExcludedKeys:["then","catch","inspect","toJSON"],deepEqual:null};function qe(t,e,r,n){var i={colors:n,depth:typeof r>"u"?2:r,showHidden:e,truncate:Tr.truncateThreshold?Tr.truncateThreshold:1/0};return oy(t,i)}O(qe,"inspect");function Fa(t){var e=qe(t),r=Object.prototype.toString.call(t);if(Tr.truncateThreshold&&e.length>=Tr.truncateThreshold){if(r==="[object Function]")return!t.name||t.name===""?"[Function]":"[Function: "+t.name+"]";if(r==="[object Array]")return"[ Array("+t.length+") ]";if(r==="[object Object]"){var n=Object.keys(t),i=n.length>2?n.splice(0,2).join(", ")+", ...":n.join(", ");return"{ Object ("+i+") }"}else return e}else return e}O(Fa,"objDisplay");function _b(t,e){var r=Me(t,"negate"),n=Me(t,"object"),i=e[3],o=fy(t,e),s=r?e[2]:e[1],l=Me(t,"message");return typeof s=="function"&&(s=s()),s=s||"",s=s.replace(/#\{this\}/g,function(){return Fa(n)}).replace(/#\{act\}/g,function(){return Fa(o)}).replace(/#\{exp\}/g,function(){return Fa(i)}),l?l+": "+s:s}O(_b,"getMessage");function $n(t,e,r){var n=t.__flags||(t.__flags=Object.create(null));e.__flags||(e.__flags=Object.create(null)),r=arguments.length===3?r:!0;for(var i in n)(r||i!=="object"&&i!=="ssfi"&&i!=="lockSsfi"&&i!="message")&&(e.__flags[i]=n[i])}O($n,"transferFlags");function fb(t){if(typeof t>"u")return"undefined";if(t===null)return"null";let e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}O(fb,"type");function Rb(){this._key="chai/deep-eql__"+Math.random()+Date.now()}O(Rb,"FakeMap");Rb.prototype={get:O(function(e){return e[this._key]},"get"),set:O(function(e,r){Object.isExtensible(e)&&Object.defineProperty(e,this._key,{value:r,configurable:!0})},"set")};var sI=typeof WeakMap=="function"?WeakMap:Rb;function db(t,e,r){if(!r||Ia(t)||Ia(e))return null;var n=r.get(t);if(n){var i=n.get(e);if(typeof i=="boolean")return i}return null}O(db,"memoizeCompare");function Pu(t,e,r,n){if(!(!r||Ia(t)||Ia(e))){var i=r.get(t);i?i.set(e,n):(i=new sI,i.set(e,n),r.set(t,i))}}O(Pu,"memoizeSet");var cI=Du;function Du(t,e,r){if(r&&r.comparator)return gb(t,e,r);var n=kb(t,e);return n!==null?n:gb(t,e,r)}O(Du,"deepEqual");function kb(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e?!0:Ia(t)||Ia(e)?!1:null}O(kb,"simpleEqual");function gb(t,e,r){r=r||{},r.memoize=r.memoize===!1?!1:r.memoize||new sI;var n=r&&r.comparator,i=db(t,e,r.memoize);if(i!==null)return i;var o=db(e,t,r.memoize);if(o!==null)return o;if(n){var s=n(t,e);if(s===!1||s===!0)return Pu(t,e,r.memoize,s),s;var l=kb(t,e);if(l!==null)return l}var u=fb(t);if(u!==fb(e))return Pu(t,e,r.memoize,!1),!1;Pu(t,e,r.memoize,!0);var m=lI(t,e,u,r);return Pu(t,e,r.memoize,m),m}O(gb,"extensiveDeepEqual");function lI(t,e,r,n){switch(r){case"String":case"Number":case"Boolean":case"Date":return Du(t.valueOf(),e.valueOf());case"Promise":case"Symbol":case"function":case"WeakMap":case"WeakSet":return t===e;case"Error":return Ab(t,e,["name","message","code"],n);case"Arguments":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"Array":return Lo(t,e,n);case"RegExp":return uI(t,e);case"Generator":return pI(t,e,n);case"DataView":return Lo(new Uint8Array(t.buffer),new Uint8Array(e.buffer),n);case"ArrayBuffer":return Lo(new Uint8Array(t),new Uint8Array(e),n);case"Set":return hb(t,e,n);case"Map":return hb(t,e,n);case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.Instant":case"Temporal.ZonedDateTime":case"Temporal.PlainYearMonth":case"Temporal.PlainMonthDay":return t.equals(e);case"Temporal.Duration":return t.total("nanoseconds")===e.total("nanoseconds");case"Temporal.TimeZone":case"Temporal.Calendar":return t.toString()===e.toString();default:return fI(t,e,n)}}O(lI,"extensiveDeepEqualByType");function uI(t,e){return t.toString()===e.toString()}O(uI,"regexpEqual");function hb(t,e,r){try{if(t.size!==e.size)return!1;if(t.size===0)return!0}catch{return!1}var n=[],i=[];return t.forEach(O(function(s,l){n.push([s,l])},"gatherEntries")),e.forEach(O(function(s,l){i.push([s,l])},"gatherEntries")),Lo(n.sort(),i.sort(),r)}O(hb,"entriesEqual");function Lo(t,e,r){var n=t.length;if(n!==e.length)return!1;if(n===0)return!0;for(var i=-1;++i<n;)if(Du(t[i],e[i],r)===!1)return!1;return!0}O(Lo,"iterableEqual");function pI(t,e,r){return Lo(ay(t),ay(e),r)}O(pI,"generatorEqual");function mI(t){return typeof Symbol<"u"&&typeof t=="object"&&typeof Symbol.iterator<"u"&&typeof t[Symbol.iterator]=="function"}O(mI,"hasIteratorFunction");function yb(t){if(mI(t))try{return ay(t[Symbol.iterator]())}catch{return[]}return[]}O(yb,"getIteratorEntries");function ay(t){for(var e=t.next(),r=[e.value];e.done===!1;)e=t.next(),r.push(e.value);return r}O(ay,"getGeneratorEntries");function Tb(t){var e=[];for(var r in t)e.push(r);return e}O(Tb,"getEnumerableKeys");function xb(t){for(var e=[],r=Object.getOwnPropertySymbols(t),n=0;n<r.length;n+=1){var i=r[n];Object.getOwnPropertyDescriptor(t,i).enumerable&&e.push(i)}return e}O(xb,"getEnumerableSymbols");function Ab(t,e,r,n){var i=r.length;if(i===0)return!0;for(var o=0;o<i;o+=1)if(Du(t[r[o]],e[r[o]],n)===!1)return!1;return!0}O(Ab,"keysEqual");function fI(t,e,r){var n=Tb(t),i=Tb(e),o=xb(t),s=xb(e);if(n=n.concat(o),i=i.concat(s),n.length&&n.length===i.length)return Lo(Sb(n).sort(),Sb(i).sort())===!1?!1:Ab(t,e,n,r);var l=yb(t),u=yb(e);return l.length&&l.length===u.length?(l.sort(),u.sort(),Lo(l,u,r)):n.length===0&&l.length===0&&i.length===0&&u.length===0}O(fI,"objectEqual");function Ia(t){return t===null||typeof t!="object"}O(Ia,"isPrimitive");function Sb(t){return t.map(O(function(r){return typeof r=="symbol"?r.toString():r},"mapSymbol"))}O(Sb,"mapSymbols");function dy(t,e){return typeof t>"u"||t===null?!1:e in Object(t)}O(dy,"hasProperty");function dI(t){return t.replace(/([^\\])\[/g,"$1.[").match(/(\\\.|[^.]+?)+/g).map(n=>{if(n==="constructor"||n==="__proto__"||n==="prototype")return{};let o=/^\[(\d+)\]$/.exec(n),s=null;return o?s={i:parseFloat(o[1])}:s={p:n.replace(/\\([.[\]])/g,"$1")},s})}O(dI,"parsePath");function vb(t,e,r){let n=t,i=null;r=typeof r>"u"?e.length:r;for(let o=0;o<r;o++){let s=e[o];n&&(typeof s.p>"u"?n=n[s.i]:n=n[s.p],o===r-1&&(i=n))}return i}O(vb,"internalGetPathValue");function Pb(t,e){let r=dI(e),n=r[r.length-1],i={parent:r.length>1?vb(t,r,r.length-1):t,name:n.p||n.i,value:vb(t,r)};return i.exists=dy(i.parent,i.name),i}O(Pb,"getPathInfo");function b(t,e,r,n){return Me(this,"ssfi",r||b),Me(this,"lockSsfi",n),Me(this,"object",t),Me(this,"message",e),Me(this,"eql",Tr.deepEqual||cI),kc(this)}O(b,"Assertion");Object.defineProperty(b,"includeStack",{get:function(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),Tr.includeStack},set:function(t){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),Tr.includeStack=t}});Object.defineProperty(b,"showDiff",{get:function(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),Tr.showDiff},set:function(t){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),Tr.showDiff=t}});b.addProperty=function(t,e){Mb(this.prototype,t,e)};b.addMethod=function(t,e){Db(this.prototype,t,e)};b.addChainableMethod=function(t,e,r){Ib(this.prototype,t,e,r)};b.overwriteProperty=function(t,e){Lb(this.prototype,t,e)};b.overwriteMethod=function(t,e){Fb(this.prototype,t,e)};b.overwriteChainableMethod=function(t,e,r){Cb(this.prototype,t,e,r)};b.prototype.assert=function(t,e,r,n,i,o){var s=wb(this,arguments);if(o!==!1&&(o=!0),n===void 0&&i===void 0&&(o=!1),Tr.showDiff!==!0&&(o=!1),!s){e=_b(this,arguments);var l=fy(this,arguments),u={actual:l,expected:n,showDiff:o},m=Ub(this,arguments);throw m&&(u.operator=m),new Ke(e,u,Tr.includeStack?this.assert:Me(this,"ssfi"))}};Object.defineProperty(b.prototype,"_obj",{get:function(){return Me(this,"object")},set:function(t){Me(this,"object",t)}});function Lu(){return Tr.useProxy&&typeof Proxy<"u"&&typeof Reflect<"u"}O(Lu,"isProxyEnabled");function Mb(t,e,r){r=r===void 0?function(){}:r,Object.defineProperty(t,e,{get:O(function n(){!Lu()&&!Me(this,"lockSsfi")&&Me(this,"ssfi",n);var i=r.call(this);if(i!==void 0)return i;var o=new b;return $n(this,o),o},"propertyGetter"),configurable:!0})}O(Mb,"addProperty");var I8=Object.getOwnPropertyDescriptor(function(){},"length");function Fu(t,e,r){return I8.configurable&&Object.defineProperty(t,"length",{get:function(){throw Error(r?"Invalid Chai property: "+e+'.length. Due to a compatibility issue, "length" cannot directly follow "'+e+'". Use "'+e+'.lengthOf" instead.':"Invalid Chai property: "+e+'.length. See docs for proper usage of "'+e+'".')}}),t}O(Fu,"addLengthGuard");function gI(t){var e=Object.getOwnPropertyNames(t);function r(i){e.indexOf(i)===-1&&e.push(i)}O(r,"addProperty");for(var n=Object.getPrototypeOf(t);n!==null;)Object.getOwnPropertyNames(n).forEach(r),n=Object.getPrototypeOf(n);return e}O(gI,"getProperties");var MF=["__flags","__methods","_obj","assert"];function kc(t,e){return Lu()?new Proxy(t,{get:O(function r(n,i){if(typeof i=="string"&&Tr.proxyExcludedKeys.indexOf(i)===-1&&!Reflect.has(n,i)){if(e)throw Error("Invalid Chai property: "+e+"."+i+'. See docs for proper usage of "'+e+'".');var o=null,s=4;throw gI(n).forEach(function(l){if(!Object.prototype.hasOwnProperty(l)&&MF.indexOf(l)===-1){var u=hI(i,l,s);u<s&&(o=l,s=u)}}),Error(o!==null?"Invalid Chai property: "+i+'. Did you mean "'+o+'"?':"Invalid Chai property: "+i)}return MF.indexOf(i)===-1&&!Me(n,"lockSsfi")&&Me(n,"ssfi",r),Reflect.get(n,i)},"proxyGetter")}):t}O(kc,"proxify");function hI(t,e,r){if(Math.abs(t.length-e.length)>=r)return r;var n=[];for(let o=0;o<=t.length;o++)n[o]=Array(e.length+1).fill(0),n[o][0]=o;for(let o=0;o<e.length;o++)n[0][o]=o;for(let o=1;o<=t.length;o++){var i=t.charCodeAt(o-1);for(let s=1;s<=e.length;s++){if(Math.abs(o-s)>=r){n[o][s]=r;continue}n[o][s]=Math.min(n[o-1][s]+1,n[o][s-1]+1,n[o-1][s-1]+(i===e.charCodeAt(s-1)?0:1))}}return n[t.length][e.length]}O(hI,"stringDistanceCapped");function Db(t,e,r){var n=O(function(){Me(this,"lockSsfi")||Me(this,"ssfi",n);var i=r.apply(this,arguments);if(i!==void 0)return i;var o=new b;return $n(this,o),o},"methodWrapper");Fu(n,e,!1),t[e]=kc(n,e)}O(Db,"addMethod");function Lb(t,e,r){var n=Object.getOwnPropertyDescriptor(t,e),i=O(function(){},"_super");n&&typeof n.get=="function"&&(i=n.get),Object.defineProperty(t,e,{get:O(function o(){!Lu()&&!Me(this,"lockSsfi")&&Me(this,"ssfi",o);var s=Me(this,"lockSsfi");Me(this,"lockSsfi",!0);var l=r(i).call(this);if(Me(this,"lockSsfi",s),l!==void 0)return l;var u=new b;return $n(this,u),u},"overwritingPropertyGetter"),configurable:!0})}O(Lb,"overwriteProperty");function Fb(t,e,r){var n=t[e],i=O(function(){throw new Error(e+" is not a function")},"_super");n&&typeof n=="function"&&(i=n);var o=O(function(){Me(this,"lockSsfi")||Me(this,"ssfi",o);var s=Me(this,"lockSsfi");Me(this,"lockSsfi",!0);var l=r(i).apply(this,arguments);if(Me(this,"lockSsfi",s),l!==void 0)return l;var u=new b;return $n(this,u),u},"overwritingMethodWrapper");Fu(o,e,!1),t[e]=kc(o,e)}O(Fb,"overwriteMethod");var C8=typeof Object.setPrototypeOf=="function",DF=O(function(){},"testFn"),O8=Object.getOwnPropertyNames(DF).filter(function(t){var e=Object.getOwnPropertyDescriptor(DF,t);return typeof e!="object"?!0:!e.configurable}),N8=Function.prototype.call,U8=Function.prototype.apply;function Ib(t,e,r,n){typeof n!="function"&&(n=O(function(){},"chainingBehavior"));var i={method:r,chainingBehavior:n};t.__methods||(t.__methods={}),t.__methods[e]=i,Object.defineProperty(t,e,{get:O(function(){i.chainingBehavior.call(this);var s=O(function(){Me(this,"lockSsfi")||Me(this,"ssfi",s);var m=i.method.apply(this,arguments);if(m!==void 0)return m;var d=new b;return $n(this,d),d},"chainableMethodWrapper");if(Fu(s,e,!0),C8){var l=Object.create(this);l.call=N8,l.apply=U8,Object.setPrototypeOf(s,l)}else{var u=Object.getOwnPropertyNames(t);u.forEach(function(m){if(O8.indexOf(m)===-1){var d=Object.getOwnPropertyDescriptor(t,m);Object.defineProperty(s,m,d)}})}return $n(this,s),kc(s)},"chainableMethodGetter"),configurable:!0})}O(Ib,"addChainableMethod");function Cb(t,e,r,n){var i=t.__methods[e],o=i.chainingBehavior;i.chainingBehavior=O(function(){var u=n(o).call(this);if(u!==void 0)return u;var m=new b;return $n(this,m),m},"overwritingChainableMethodGetter");var s=i.method;i.method=O(function(){var u=r(s).apply(this,arguments);if(u!==void 0)return u;var m=new b;return $n(this,m),m},"overwritingChainableMethodWrapper")}O(Cb,"overwriteChainableMethod");function sy(t,e){return qe(t)<qe(e)?-1:1}O(sy,"compareByInspect");function Ob(t){return typeof Object.getOwnPropertySymbols!="function"?[]:Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})}O(Ob,"getOwnEnumerablePropertySymbols");function Nb(t){return Object.keys(t).concat(Ob(t))}O(Nb,"getOwnEnumerableProperties");var cy=Number.isNaN;function yI(t){var e=tt(t),r=["Array","Object","Function"];return r.indexOf(e)!==-1}O(yI,"isObjectType");function Ub(t,e){var r=Me(t,"operator"),n=Me(t,"negate"),i=e[3],o=n?e[2]:e[1];if(r)return r;if(typeof o=="function"&&(o=o()),o=o||"",!!o&&!/\shave\s/.test(o)){var s=yI(i);return/\snot\s/.test(o)?s?"notDeepStrictEqual":"notStrictEqual":s?"deepStrictEqual":"strictEqual"}}O(Ub,"getOperator");function gy(t){return t.name}O(gy,"getName");function ly(t){return Object.prototype.toString.call(t)==="[object RegExp]"}O(ly,"isRegExp");function Vt(t){return["Number","BigInt"].includes(tt(t))}O(Vt,"isNumeric");var{flag:M}=ny;["to","be","been","is","and","has","have","with","that","which","at","of","same","but","does","still","also"].forEach(function(t){b.addProperty(t)});b.addProperty("not",function(){M(this,"negate",!0)});b.addProperty("deep",function(){M(this,"deep",!0)});b.addProperty("nested",function(){M(this,"nested",!0)});b.addProperty("own",function(){M(this,"own",!0)});b.addProperty("ordered",function(){M(this,"ordered",!0)});b.addProperty("any",function(){M(this,"any",!0),M(this,"all",!1)});b.addProperty("all",function(){M(this,"all",!0),M(this,"any",!1)});var LF={function:["function","asyncfunction","generatorfunction","asyncgeneratorfunction"],asyncfunction:["asyncfunction","asyncgeneratorfunction"],generatorfunction:["generatorfunction","asyncgeneratorfunction"],asyncgeneratorfunction:["asyncgeneratorfunction"]};function Hb(t,e){e&&M(this,"message",e),t=t.toLowerCase();var r=M(this,"object"),n=~["a","e","i","o","u"].indexOf(t.charAt(0))?"an ":"a ";let i=tt(r).toLowerCase();LF.function.includes(t)?this.assert(LF[t].includes(i),"expected #{this} to be "+n+t,"expected #{this} not to be "+n+t):this.assert(t===i,"expected #{this} to be "+n+t,"expected #{this} not to be "+n+t)}O(Hb,"an");b.addChainableMethod("an",Hb);b.addChainableMethod("a",Hb);function TI(t,e){return cy(t)&&cy(e)||t===e}O(TI,"SameValueZero");function Iu(){M(this,"contains",!0)}O(Iu,"includeChainingBehavior");function Cu(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=tt(r).toLowerCase(),i=M(this,"message"),o=M(this,"negate"),s=M(this,"ssfi"),l=M(this,"deep"),u=l?"deep ":"",m=l?M(this,"eql"):TI;i=i?i+": ":"";var d=!1;switch(n){case"string":d=r.indexOf(t)!==-1;break;case"weakset":if(l)throw new Ke(i+"unable to use .deep.include with WeakSet",void 0,s);d=r.has(t);break;case"map":r.forEach(function(w){d=d||m(w,t)});break;case"set":l?r.forEach(function(w){d=d||m(w,t)}):d=r.has(t);break;case"array":l?d=r.some(function(w){return m(w,t)}):d=r.indexOf(t)!==-1;break;default:if(t!==Object(t))throw new Ke(i+"the given combination of arguments ("+n+" and "+tt(t).toLowerCase()+") is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a "+tt(t).toLowerCase(),void 0,s);var g=Object.keys(t),y=null,x=0;if(g.forEach(function(w){var E=new b(r);if($n(this,E,!0),M(E,"lockSsfi",!0),!o||g.length===1){E.property(w,t[w]);return}try{E.property(w,t[w])}catch(U){if(!Zr.compatibleConstructor(U,Ke))throw U;y===null&&(y=U),x++}},this),o&&g.length>1&&x===g.length)throw y;return}this.assert(d,"expected #{this} to "+u+"include "+qe(t),"expected #{this} to not "+u+"include "+qe(t))}O(Cu,"include");b.addChainableMethod("include",Cu,Iu);b.addChainableMethod("contain",Cu,Iu);b.addChainableMethod("contains",Cu,Iu);b.addChainableMethod("includes",Cu,Iu);b.addProperty("ok",function(){this.assert(M(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")});b.addProperty("true",function(){this.assert(M(this,"object")===!0,"expected #{this} to be true","expected #{this} to be false",!M(this,"negate"))});b.addProperty("numeric",function(){let t=M(this,"object");this.assert(["Number","BigInt"].includes(tt(t)),"expected #{this} to be numeric","expected #{this} to not be numeric",!M(this,"negate"))});b.addProperty("callable",function(){let t=M(this,"object"),e=M(this,"ssfi"),r=M(this,"message"),n=r?`${r}: `:"",i=M(this,"negate"),o=i?`${n}expected ${qe(t)} not to be a callable function`:`${n}expected ${qe(t)} to be a callable function`,s=["Function","AsyncFunction","GeneratorFunction","AsyncGeneratorFunction"].includes(tt(t));if(s&&i||!s&&!i)throw new Ke(o,void 0,e)});b.addProperty("false",function(){this.assert(M(this,"object")===!1,"expected #{this} to be false","expected #{this} to be true",!!M(this,"negate"))});b.addProperty("null",function(){this.assert(M(this,"object")===null,"expected #{this} to be null","expected #{this} not to be null")});b.addProperty("undefined",function(){this.assert(M(this,"object")===void 0,"expected #{this} to be undefined","expected #{this} not to be undefined")});b.addProperty("NaN",function(){this.assert(cy(M(this,"object")),"expected #{this} to be NaN","expected #{this} not to be NaN")});function Bb(){var t=M(this,"object");this.assert(t!=null,"expected #{this} to exist","expected #{this} to not exist")}O(Bb,"assertExist");b.addProperty("exist",Bb);b.addProperty("exists",Bb);b.addProperty("empty",function(){var t=M(this,"object"),e=M(this,"ssfi"),r=M(this,"message"),n;switch(r=r?r+": ":"",tt(t).toLowerCase()){case"array":case"string":n=t.length;break;case"map":case"set":n=t.size;break;case"weakmap":case"weakset":throw new Ke(r+".empty was passed a weak collection",void 0,e);case"function":var i=r+".empty was passed a function "+gy(t);throw new Ke(i.trim(),void 0,e);default:if(t!==Object(t))throw new Ke(r+".empty was passed non-string primitive "+qe(t),void 0,e);n=Object.keys(t).length}this.assert(n===0,"expected #{this} to be empty","expected #{this} not to be empty")});function Vb(){var t=M(this,"object"),e=tt(t);this.assert(e==="Arguments","expected #{this} to be arguments but got "+e,"expected #{this} to not be arguments")}O(Vb,"checkArguments");b.addProperty("arguments",Vb);b.addProperty("Arguments",Vb);function hy(t,e){e&&M(this,"message",e);var r=M(this,"object");if(M(this,"deep")){var n=M(this,"lockSsfi");M(this,"lockSsfi",!0),this.eql(t),M(this,"lockSsfi",n)}else this.assert(t===r,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",t,this._obj,!0)}O(hy,"assertEqual");b.addMethod("equal",hy);b.addMethod("equals",hy);b.addMethod("eq",hy);function Wb(t,e){e&&M(this,"message",e);var r=M(this,"eql");this.assert(r(t,M(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",t,this._obj,!0)}O(Wb,"assertEql");b.addMethod("eql",Wb);b.addMethod("eqls",Wb);function yy(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"doLength"),i=M(this,"message"),o=i?i+": ":"",s=M(this,"ssfi"),l=tt(r).toLowerCase(),u=tt(t).toLowerCase();if(n&&l!=="map"&&l!=="set"&&new b(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&u!=="date")throw new Ke(o+"the argument to above must be a date",void 0,s);if(!Vt(t)&&(n||Vt(r)))throw new Ke(o+"the argument to above must be a number",void 0,s);if(!n&&l!=="date"&&!Vt(r)){var m=l==="string"?"'"+r+"'":r;throw new Ke(o+"expected "+m+" to be a number or a date",void 0,s)}if(n){var d="length",g;l==="map"||l==="set"?(d="size",g=r.size):g=r.length,this.assert(g>t,"expected #{this} to have a "+d+" above #{exp} but got #{act}","expected #{this} to not have a "+d+" above #{exp}",t,g)}else this.assert(r>t,"expected #{this} to be above #{exp}","expected #{this} to be at most #{exp}",t)}O(yy,"assertAbove");b.addMethod("above",yy);b.addMethod("gt",yy);b.addMethod("greaterThan",yy);function Ty(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"doLength"),i=M(this,"message"),o=i?i+": ":"",s=M(this,"ssfi"),l=tt(r).toLowerCase(),u=tt(t).toLowerCase(),m,d=!0;if(n&&l!=="map"&&l!=="set"&&new b(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&u!=="date")m=o+"the argument to least must be a date";else if(!Vt(t)&&(n||Vt(r)))m=o+"the argument to least must be a number";else if(!n&&l!=="date"&&!Vt(r)){var g=l==="string"?"'"+r+"'":r;m=o+"expected "+g+" to be a number or a date"}else d=!1;if(d)throw new Ke(m,void 0,s);if(n){var y="length",x;l==="map"||l==="set"?(y="size",x=r.size):x=r.length,this.assert(x>=t,"expected #{this} to have a "+y+" at least #{exp} but got #{act}","expected #{this} to have a "+y+" below #{exp}",t,x)}else this.assert(r>=t,"expected #{this} to be at least #{exp}","expected #{this} to be below #{exp}",t)}O(Ty,"assertLeast");b.addMethod("least",Ty);b.addMethod("gte",Ty);b.addMethod("greaterThanOrEqual",Ty);function xy(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"doLength"),i=M(this,"message"),o=i?i+": ":"",s=M(this,"ssfi"),l=tt(r).toLowerCase(),u=tt(t).toLowerCase(),m,d=!0;if(n&&l!=="map"&&l!=="set"&&new b(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&u!=="date")m=o+"the argument to below must be a date";else if(!Vt(t)&&(n||Vt(r)))m=o+"the argument to below must be a number";else if(!n&&l!=="date"&&!Vt(r)){var g=l==="string"?"'"+r+"'":r;m=o+"expected "+g+" to be a number or a date"}else d=!1;if(d)throw new Ke(m,void 0,s);if(n){var y="length",x;l==="map"||l==="set"?(y="size",x=r.size):x=r.length,this.assert(x<t,"expected #{this} to have a "+y+" below #{exp} but got #{act}","expected #{this} to not have a "+y+" below #{exp}",t,x)}else this.assert(r<t,"expected #{this} to be below #{exp}","expected #{this} to be at least #{exp}",t)}O(xy,"assertBelow");b.addMethod("below",xy);b.addMethod("lt",xy);b.addMethod("lessThan",xy);function Sy(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"doLength"),i=M(this,"message"),o=i?i+": ":"",s=M(this,"ssfi"),l=tt(r).toLowerCase(),u=tt(t).toLowerCase(),m,d=!0;if(n&&l!=="map"&&l!=="set"&&new b(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&u!=="date")m=o+"the argument to most must be a date";else if(!Vt(t)&&(n||Vt(r)))m=o+"the argument to most must be a number";else if(!n&&l!=="date"&&!Vt(r)){var g=l==="string"?"'"+r+"'":r;m=o+"expected "+g+" to be a number or a date"}else d=!1;if(d)throw new Ke(m,void 0,s);if(n){var y="length",x;l==="map"||l==="set"?(y="size",x=r.size):x=r.length,this.assert(x<=t,"expected #{this} to have a "+y+" at most #{exp} but got #{act}","expected #{this} to have a "+y+" above #{exp}",t,x)}else this.assert(r<=t,"expected #{this} to be at most #{exp}","expected #{this} to be above #{exp}",t)}O(Sy,"assertMost");b.addMethod("most",Sy);b.addMethod("lte",Sy);b.addMethod("lessThanOrEqual",Sy);b.addMethod("within",function(t,e,r){r&&M(this,"message",r);var n=M(this,"object"),i=M(this,"doLength"),o=M(this,"message"),s=o?o+": ":"",l=M(this,"ssfi"),u=tt(n).toLowerCase(),m=tt(t).toLowerCase(),d=tt(e).toLowerCase(),g,y=!0,x=m==="date"&&d==="date"?t.toISOString()+".."+e.toISOString():t+".."+e;if(i&&u!=="map"&&u!=="set"&&new b(n,o,l,!0).to.have.property("length"),!i&&u==="date"&&(m!=="date"||d!=="date"))g=s+"the arguments to within must be dates";else if((!Vt(t)||!Vt(e))&&(i||Vt(n)))g=s+"the arguments to within must be numbers";else if(!i&&u!=="date"&&!Vt(n)){var w=u==="string"?"'"+n+"'":n;g=s+"expected "+w+" to be a number or a date"}else y=!1;if(y)throw new Ke(g,void 0,l);if(i){var E="length",U;u==="map"||u==="set"?(E="size",U=n.size):U=n.length,this.assert(U>=t&&U<=e,"expected #{this} to have a "+E+" within "+x,"expected #{this} to not have a "+E+" within "+x)}else this.assert(n>=t&&n<=e,"expected #{this} to be within "+x,"expected #{this} to not be within "+x)});function $b(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"ssfi"),i=M(this,"message");try{var o=r instanceof t}catch(l){throw l instanceof TypeError?(i=i?i+": ":"",new Ke(i+"The instanceof assertion needs a constructor but "+tt(t)+" was given.",void 0,n)):l}var s=gy(t);s==null&&(s="an unnamed constructor"),this.assert(o,"expected #{this} to be an instance of "+s,"expected #{this} to not be an instance of "+s)}O($b,"assertInstanceOf");b.addMethod("instanceof",$b);b.addMethod("instanceOf",$b);function jb(t,e,r){r&&M(this,"message",r);var n=M(this,"nested"),i=M(this,"own"),o=M(this,"message"),s=M(this,"object"),l=M(this,"ssfi"),u=typeof t;if(o=o?o+": ":"",n){if(u!=="string")throw new Ke(o+"the argument to property must be a string when using nested syntax",void 0,l)}else if(u!=="string"&&u!=="number"&&u!=="symbol")throw new Ke(o+"the argument to property must be a string, number, or symbol",void 0,l);if(n&&i)throw new Ke(o+'The "nested" and "own" flags cannot be combined.',void 0,l);if(s==null)throw new Ke(o+"Target cannot be null or undefined.",void 0,l);var m=M(this,"deep"),d=M(this,"negate"),g=n?Pb(s,t):null,y=n?g.value:s[t],x=m?M(this,"eql"):(U,V)=>U===V,w="";m&&(w+="deep "),i&&(w+="own "),n&&(w+="nested "),w+="property ";var E;i?E=Object.prototype.hasOwnProperty.call(s,t):n?E=g.exists:E=dy(s,t),(!d||arguments.length===1)&&this.assert(E,"expected #{this} to have "+w+qe(t),"expected #{this} to not have "+w+qe(t)),arguments.length>1&&this.assert(E&&x(e,y),"expected #{this} to have "+w+qe(t)+" of #{exp}, but got #{act}","expected #{this} to not have "+w+qe(t)+" of #{act}",e,y),M(this,"object",y)}O(jb,"assertProperty");b.addMethod("property",jb);function zb(t,e,r){M(this,"own",!0),jb.apply(this,arguments)}O(zb,"assertOwnProperty");b.addMethod("ownProperty",zb);b.addMethod("haveOwnProperty",zb);function qb(t,e,r){typeof e=="string"&&(r=e,e=null),r&&M(this,"message",r);var n=M(this,"object"),i=Object.getOwnPropertyDescriptor(Object(n),t),o=M(this,"eql");i&&e?this.assert(o(e,i),"expected the own property descriptor for "+qe(t)+" on #{this} to match "+qe(e)+", got "+qe(i),"expected the own property descriptor for "+qe(t)+" on #{this} to not match "+qe(e),e,i,!0):this.assert(i,"expected #{this} to have an own property descriptor for "+qe(t),"expected #{this} to not have an own property descriptor for "+qe(t)),M(this,"object",i)}O(qb,"assertOwnPropertyDescriptor");b.addMethod("ownPropertyDescriptor",qb);b.addMethod("haveOwnPropertyDescriptor",qb);function Gb(){M(this,"doLength",!0)}O(Gb,"assertLengthChain");function Kb(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=tt(r).toLowerCase(),i=M(this,"message"),o=M(this,"ssfi"),s="length",l;switch(n){case"map":case"set":s="size",l=r.size;break;default:new b(r,i,o,!0).to.have.property("length"),l=r.length}this.assert(l==t,"expected #{this} to have a "+s+" of #{exp} but got #{act}","expected #{this} to not have a "+s+" of #{act}",t,l)}O(Kb,"assertLength");b.addChainableMethod("length",Kb,Gb);b.addChainableMethod("lengthOf",Kb,Gb);function Qb(t,e){e&&M(this,"message",e);var r=M(this,"object");this.assert(t.exec(r),"expected #{this} to match "+t,"expected #{this} not to match "+t)}O(Qb,"assertMatch");b.addMethod("match",Qb);b.addMethod("matches",Qb);b.addMethod("string",function(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"message"),i=M(this,"ssfi");new b(r,n,i,!0).is.a("string"),this.assert(~r.indexOf(t),"expected #{this} to contain "+qe(t),"expected #{this} to not contain "+qe(t))});function Yb(t){var e=M(this,"object"),r=tt(e),n=tt(t),i=M(this,"ssfi"),o=M(this,"deep"),s,l="",u,m=!0,d=M(this,"message");d=d?d+": ":"";var g=d+"when testing keys against an object or an array you must give a single Array|Object|String argument or multiple String arguments";if(r==="Map"||r==="Set")l=o?"deeply ":"",u=[],e.forEach(function(z,ie){u.push(ie)}),n!=="Array"&&(t=Array.prototype.slice.call(arguments));else{switch(u=Nb(e),n){case"Array":if(arguments.length>1)throw new Ke(g,void 0,i);break;case"Object":if(arguments.length>1)throw new Ke(g,void 0,i);t=Object.keys(t);break;default:t=Array.prototype.slice.call(arguments)}t=t.map(function(z){return typeof z=="symbol"?z:String(z)})}if(!t.length)throw new Ke(d+"keys required",void 0,i);var y=t.length,x=M(this,"any"),w=M(this,"all"),E=t,U=o?M(this,"eql"):(z,ie)=>z===ie;if(!x&&!w&&(w=!0),x&&(m=E.some(function(z){return u.some(function(ie){return U(z,ie)})})),w&&(m=E.every(function(z){return u.some(function(ie){return U(z,ie)})}),M(this,"contains")||(m=m&&t.length==u.length)),y>1){t=t.map(function(z){return qe(z)});var V=t.pop();w&&(s=t.join(", ")+", and "+V),x&&(s=t.join(", ")+", or "+V)}else s=qe(t[0]);s=(y>1?"keys ":"key ")+s,s=(M(this,"contains")?"contain ":"have ")+s,this.assert(m,"expected #{this} to "+l+s,"expected #{this} to not "+l+s,E.slice(0).sort(sy),u.sort(sy),!0)}O(Yb,"assertKeys");b.addMethod("keys",Yb);b.addMethod("key",Yb);function vy(t,e,r){r&&M(this,"message",r);var n=M(this,"object"),i=M(this,"ssfi"),o=M(this,"message"),s=M(this,"negate")||!1;new b(n,o,i,!0).is.a("function"),(ly(t)||typeof t=="string")&&(e=t,t=null);let l,u=!1;try{n()}catch(z){u=!0,l=z}var m=t===void 0&&e===void 0,d=!!(t&&e),g=!1,y=!1;if(m||!m&&!s){var x="an error";t instanceof Error?x="#{exp}":t&&(x=Zr.getConstructorName(t));let z=l;if(l instanceof Error)z=l.toString();else if(typeof l=="string")z=l;else if(l&&(typeof l=="object"||typeof l=="function"))try{z=Zr.getConstructorName(l)}catch{}this.assert(u,"expected #{this} to throw "+x,"expected #{this} to not throw an error but #{act} was thrown",t&&t.toString(),z)}if(t&&l){if(t instanceof Error){var w=Zr.compatibleInstance(l,t);w===s&&(d&&s?g=!0:this.assert(s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l&&!s?" but #{act} was thrown":""),t.toString(),l.toString()))}var E=Zr.compatibleConstructor(l,t);E===s&&(d&&s?g=!0:this.assert(s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&Zr.getConstructorName(t),l instanceof Error?l.toString():l&&Zr.getConstructorName(l)))}if(l&&e!==void 0&&e!==null){var U="including";ly(e)&&(U="matching");var V=Zr.compatibleMessage(l,e);V===s&&(d&&s?y=!0:this.assert(s,"expected #{this} to throw error "+U+" #{exp} but got #{act}","expected #{this} to throw error not "+U+" #{exp}",e,Zr.getMessage(l)))}g&&y&&this.assert(s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&Zr.getConstructorName(t),l instanceof Error?l.toString():l&&Zr.getConstructorName(l)),M(this,"object",l)}O(vy,"assertThrows");b.addMethod("throw",vy);b.addMethod("throws",vy);b.addMethod("Throw",vy);function Zb(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"itself"),i=typeof r=="function"&&!n?r.prototype[t]:r[t];this.assert(typeof i=="function","expected #{this} to respond to "+qe(t),"expected #{this} to not respond to "+qe(t))}O(Zb,"respondTo");b.addMethod("respondTo",Zb);b.addMethod("respondsTo",Zb);b.addProperty("itself",function(){M(this,"itself",!0)});function Xb(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=t(r);this.assert(n,"expected #{this} to satisfy "+Fa(t),"expected #{this} to not satisfy"+Fa(t),!M(this,"negate"),n)}O(Xb,"satisfy");b.addMethod("satisfy",Xb);b.addMethod("satisfies",Xb);function Jb(t,e,r){r&&M(this,"message",r);var n=M(this,"object"),i=M(this,"message"),o=M(this,"ssfi");new b(n,i,o,!0).is.numeric;let s="A `delta` value is required for `closeTo`";if(e==null)throw new Ke(i?`${i}: ${s}`:s,void 0,o);if(new b(e,i,o,!0).is.numeric,s="A `expected` value is required for `closeTo`",t==null)throw new Ke(i?`${i}: ${s}`:s,void 0,o);new b(t,i,o,!0).is.numeric;let l=O(m=>m<0n?-m:m,"abs"),u=O(m=>parseFloat(parseFloat(m).toPrecision(12)),"strip");this.assert(u(l(n-t))<=e,"expected #{this} to be close to "+t+" +/- "+e,"expected #{this} not to be close to "+t+" +/- "+e)}O(Jb,"closeTo");b.addMethod("closeTo",Jb);b.addMethod("approximately",Jb);function xI(t,e,r,n,i){let o=Array.from(e),s=Array.from(t);if(!n){if(s.length!==o.length)return!1;o=o.slice()}return s.every(function(l,u){if(i)return r?r(l,o[u]):l===o[u];if(!r){var m=o.indexOf(l);return m===-1?!1:(n||o.splice(m,1),!0)}return o.some(function(d,g){return r(l,d)?(n||o.splice(g,1),!0):!1})})}O(xI,"isSubsetOf");b.addMethod("members",function(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"message"),i=M(this,"ssfi");new b(r,n,i,!0).to.be.iterable,new b(t,n,i,!0).to.be.iterable;var o=M(this,"contains"),s=M(this,"ordered"),l,u,m;o?(l=s?"an ordered superset":"a superset",u="expected #{this} to be "+l+" of #{exp}",m="expected #{this} to not be "+l+" of #{exp}"):(l=s?"ordered members":"members",u="expected #{this} to have the same "+l+" as #{exp}",m="expected #{this} to not have the same "+l+" as #{exp}");var d=M(this,"deep")?M(this,"eql"):void 0;this.assert(xI(t,r,d,o,s),u,m,t,r,!0)});b.addProperty("iterable",function(t){t&&M(this,"message",t);var e=M(this,"object");this.assert(e!=null&&e[Symbol.iterator],"expected #{this} to be an iterable","expected #{this} to not be an iterable",e)});function SI(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"message"),i=M(this,"ssfi"),o=M(this,"contains"),s=M(this,"deep"),l=M(this,"eql");new b(t,n,i,!0).to.be.an("array"),o?this.assert(t.some(function(u){return r.indexOf(u)>-1}),"expected #{this} to contain one of #{exp}","expected #{this} to not contain one of #{exp}",t,r):s?this.assert(t.some(function(u){return l(r,u)}),"expected #{this} to deeply equal one of #{exp}","expected #{this} to deeply equal one of #{exp}",t,r):this.assert(t.indexOf(r)>-1,"expected #{this} to be one of #{exp}","expected #{this} to not be one of #{exp}",t,r)}O(SI,"oneOf");b.addMethod("oneOf",SI);function ew(t,e,r){r&&M(this,"message",r);var n=M(this,"object"),i=M(this,"message"),o=M(this,"ssfi");new b(n,i,o,!0).is.a("function");var s;e?(new b(t,i,o,!0).to.have.property(e),s=t[e]):(new b(t,i,o,!0).is.a("function"),s=t()),n();var l=e==null?t():t[e],u=e==null?s:"."+e;M(this,"deltaMsgObj",u),M(this,"initialDeltaValue",s),M(this,"finalDeltaValue",l),M(this,"deltaBehavior","change"),M(this,"realDelta",l!==s),this.assert(s!==l,"expected "+u+" to change","expected "+u+" to not change")}O(ew,"assertChanges");b.addMethod("change",ew);b.addMethod("changes",ew);function tw(t,e,r){r&&M(this,"message",r);var n=M(this,"object"),i=M(this,"message"),o=M(this,"ssfi");new b(n,i,o,!0).is.a("function");var s;e?(new b(t,i,o,!0).to.have.property(e),s=t[e]):(new b(t,i,o,!0).is.a("function"),s=t()),new b(s,i,o,!0).is.a("number"),n();var l=e==null?t():t[e],u=e==null?s:"."+e;M(this,"deltaMsgObj",u),M(this,"initialDeltaValue",s),M(this,"finalDeltaValue",l),M(this,"deltaBehavior","increase"),M(this,"realDelta",l-s),this.assert(l-s>0,"expected "+u+" to increase","expected "+u+" to not increase")}O(tw,"assertIncreases");b.addMethod("increase",tw);b.addMethod("increases",tw);function rw(t,e,r){r&&M(this,"message",r);var n=M(this,"object"),i=M(this,"message"),o=M(this,"ssfi");new b(n,i,o,!0).is.a("function");var s;e?(new b(t,i,o,!0).to.have.property(e),s=t[e]):(new b(t,i,o,!0).is.a("function"),s=t()),new b(s,i,o,!0).is.a("number"),n();var l=e==null?t():t[e],u=e==null?s:"."+e;M(this,"deltaMsgObj",u),M(this,"initialDeltaValue",s),M(this,"finalDeltaValue",l),M(this,"deltaBehavior","decrease"),M(this,"realDelta",s-l),this.assert(l-s<0,"expected "+u+" to decrease","expected "+u+" to not decrease")}O(rw,"assertDecreases");b.addMethod("decrease",rw);b.addMethod("decreases",rw);function vI(t,e){e&&M(this,"message",e);var r=M(this,"deltaMsgObj"),n=M(this,"initialDeltaValue"),i=M(this,"finalDeltaValue"),o=M(this,"deltaBehavior"),s=M(this,"realDelta"),l;o==="change"?l=Math.abs(i-n)===Math.abs(t):l=s===Math.abs(t),this.assert(l,"expected "+r+" to "+o+" by "+t,"expected "+r+" to not "+o+" by "+t)}O(vI,"assertDelta");b.addMethod("by",vI);b.addProperty("extensible",function(){var t=M(this,"object"),e=t===Object(t)&&Object.isExtensible(t);this.assert(e,"expected #{this} to be extensible","expected #{this} to not be extensible")});b.addProperty("sealed",function(){var t=M(this,"object"),e=t===Object(t)?Object.isSealed(t):!0;this.assert(e,"expected #{this} to be sealed","expected #{this} to not be sealed")});b.addProperty("frozen",function(){var t=M(this,"object"),e=t===Object(t)?Object.isFrozen(t):!0;this.assert(e,"expected #{this} to be frozen","expected #{this} to not be frozen")});b.addProperty("finite",function(t){var e=M(this,"object");this.assert(typeof e=="number"&&isFinite(e),"expected #{this} to be a finite number","expected #{this} to not be a finite number")});function uy(t,e){return t===e?!0:typeof e!=typeof t?!1:typeof t!="object"||t===null?t===e:e?Array.isArray(t)?Array.isArray(e)?t.every(function(r){return e.some(function(n){return uy(r,n)})}):!1:t instanceof Date?e instanceof Date?t.getTime()===e.getTime():!1:Object.keys(t).every(function(r){var n=t[r],i=e[r];return typeof n=="object"&&n!==null&&i!==null?uy(n,i):typeof n=="function"?n(i):i===n}):!1}O(uy,"compareSubset");b.addMethod("containSubset",function(t){let e=Me(this,"object"),r=Tr.showDiff;this.assert(uy(t,e),"expected #{act} to contain subset #{exp}","expected #{act} to not contain subset #{exp}",t,e,r)});function py(t,e){return new b(t,e)}O(py,"expect");py.fail=function(t,e,r,n){throw arguments.length<2&&(r=t,t=void 0),r=r||"expect.fail()",new Ke(r,{actual:t,expected:e,operator:n},py.fail)};var bI={};bb(bI,{Should:()=>B8,should:()=>H8});function nw(){function t(){return this instanceof String||this instanceof Number||this instanceof Boolean||typeof Symbol=="function"&&this instanceof Symbol||typeof BigInt=="function"&&this instanceof BigInt?new b(this.valueOf(),null,t):new b(this,null,t)}O(t,"shouldGetter");function e(n){Object.defineProperty(this,"should",{value:n,enumerable:!0,configurable:!0,writable:!0})}O(e,"shouldSetter"),Object.defineProperty(Object.prototype,"should",{set:e,get:t,configurable:!0});var r={};return r.fail=function(n,i,o,s){throw arguments.length<2&&(o=n,n=void 0),o=o||"should.fail()",new Ke(o,{actual:n,expected:i,operator:s},r.fail)},r.equal=function(n,i,o){new b(n,o).to.equal(i)},r.Throw=function(n,i,o,s){new b(n,s).to.Throw(i,o)},r.exist=function(n,i){new b(n,i).to.exist},r.not={},r.not.equal=function(n,i,o){new b(n,o).to.not.equal(i)},r.not.Throw=function(n,i,o,s){new b(n,s).to.not.Throw(i,o)},r.not.exist=function(n,i){new b(n,i).to.not.exist},r.throw=r.Throw,r.not.throw=r.not.Throw,r}O(nw,"loadShould");var H8=nw,B8=nw;function v(t,e){var r=new b(null,null,v,!0);r.assert(t,e,"[ negation message unavailable ]")}O(v,"assert");v.fail=function(t,e,r,n){throw arguments.length<2&&(r=t,t=void 0),r=r||"assert.fail()",new Ke(r,{actual:t,expected:e,operator:n},v.fail)};v.isOk=function(t,e){new b(t,e,v.isOk,!0).is.ok};v.isNotOk=function(t,e){new b(t,e,v.isNotOk,!0).is.not.ok};v.equal=function(t,e,r){var n=new b(t,r,v.equal,!0);n.assert(e==Me(n,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",e,t,!0)};v.notEqual=function(t,e,r){var n=new b(t,r,v.notEqual,!0);n.assert(e!=Me(n,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",e,t,!0)};v.strictEqual=function(t,e,r){new b(t,r,v.strictEqual,!0).to.equal(e)};v.notStrictEqual=function(t,e,r){new b(t,r,v.notStrictEqual,!0).to.not.equal(e)};v.deepEqual=v.deepStrictEqual=function(t,e,r){new b(t,r,v.deepEqual,!0).to.eql(e)};v.notDeepEqual=function(t,e,r){new b(t,r,v.notDeepEqual,!0).to.not.eql(e)};v.isAbove=function(t,e,r){new b(t,r,v.isAbove,!0).to.be.above(e)};v.isAtLeast=function(t,e,r){new b(t,r,v.isAtLeast,!0).to.be.least(e)};v.isBelow=function(t,e,r){new b(t,r,v.isBelow,!0).to.be.below(e)};v.isAtMost=function(t,e,r){new b(t,r,v.isAtMost,!0).to.be.most(e)};v.isTrue=function(t,e){new b(t,e,v.isTrue,!0).is.true};v.isNotTrue=function(t,e){new b(t,e,v.isNotTrue,!0).to.not.equal(!0)};v.isFalse=function(t,e){new b(t,e,v.isFalse,!0).is.false};v.isNotFalse=function(t,e){new b(t,e,v.isNotFalse,!0).to.not.equal(!1)};v.isNull=function(t,e){new b(t,e,v.isNull,!0).to.equal(null)};v.isNotNull=function(t,e){new b(t,e,v.isNotNull,!0).to.not.equal(null)};v.isNaN=function(t,e){new b(t,e,v.isNaN,!0).to.be.NaN};v.isNotNaN=function(t,e){new b(t,e,v.isNotNaN,!0).not.to.be.NaN};v.exists=function(t,e){new b(t,e,v.exists,!0).to.exist};v.notExists=function(t,e){new b(t,e,v.notExists,!0).to.not.exist};v.isUndefined=function(t,e){new b(t,e,v.isUndefined,!0).to.equal(void 0)};v.isDefined=function(t,e){new b(t,e,v.isDefined,!0).to.not.equal(void 0)};v.isCallable=function(t,e){new b(t,e,v.isCallable,!0).is.callable};v.isNotCallable=function(t,e){new b(t,e,v.isNotCallable,!0).is.not.callable};v.isObject=function(t,e){new b(t,e,v.isObject,!0).to.be.a("object")};v.isNotObject=function(t,e){new b(t,e,v.isNotObject,!0).to.not.be.a("object")};v.isArray=function(t,e){new b(t,e,v.isArray,!0).to.be.an("array")};v.isNotArray=function(t,e){new b(t,e,v.isNotArray,!0).to.not.be.an("array")};v.isString=function(t,e){new b(t,e,v.isString,!0).to.be.a("string")};v.isNotString=function(t,e){new b(t,e,v.isNotString,!0).to.not.be.a("string")};v.isNumber=function(t,e){new b(t,e,v.isNumber,!0).to.be.a("number")};v.isNotNumber=function(t,e){new b(t,e,v.isNotNumber,!0).to.not.be.a("number")};v.isNumeric=function(t,e){new b(t,e,v.isNumeric,!0).is.numeric};v.isNotNumeric=function(t,e){new b(t,e,v.isNotNumeric,!0).is.not.numeric};v.isFinite=function(t,e){new b(t,e,v.isFinite,!0).to.be.finite};v.isBoolean=function(t,e){new b(t,e,v.isBoolean,!0).to.be.a("boolean")};v.isNotBoolean=function(t,e){new b(t,e,v.isNotBoolean,!0).to.not.be.a("boolean")};v.typeOf=function(t,e,r){new b(t,r,v.typeOf,!0).to.be.a(e)};v.notTypeOf=function(t,e,r){new b(t,r,v.notTypeOf,!0).to.not.be.a(e)};v.instanceOf=function(t,e,r){new b(t,r,v.instanceOf,!0).to.be.instanceOf(e)};v.notInstanceOf=function(t,e,r){new b(t,r,v.notInstanceOf,!0).to.not.be.instanceOf(e)};v.include=function(t,e,r){new b(t,r,v.include,!0).include(e)};v.notInclude=function(t,e,r){new b(t,r,v.notInclude,!0).not.include(e)};v.deepInclude=function(t,e,r){new b(t,r,v.deepInclude,!0).deep.include(e)};v.notDeepInclude=function(t,e,r){new b(t,r,v.notDeepInclude,!0).not.deep.include(e)};v.nestedInclude=function(t,e,r){new b(t,r,v.nestedInclude,!0).nested.include(e)};v.notNestedInclude=function(t,e,r){new b(t,r,v.notNestedInclude,!0).not.nested.include(e)};v.deepNestedInclude=function(t,e,r){new b(t,r,v.deepNestedInclude,!0).deep.nested.include(e)};v.notDeepNestedInclude=function(t,e,r){new b(t,r,v.notDeepNestedInclude,!0).not.deep.nested.include(e)};v.ownInclude=function(t,e,r){new b(t,r,v.ownInclude,!0).own.include(e)};v.notOwnInclude=function(t,e,r){new b(t,r,v.notOwnInclude,!0).not.own.include(e)};v.deepOwnInclude=function(t,e,r){new b(t,r,v.deepOwnInclude,!0).deep.own.include(e)};v.notDeepOwnInclude=function(t,e,r){new b(t,r,v.notDeepOwnInclude,!0).not.deep.own.include(e)};v.match=function(t,e,r){new b(t,r,v.match,!0).to.match(e)};v.notMatch=function(t,e,r){new b(t,r,v.notMatch,!0).to.not.match(e)};v.property=function(t,e,r){new b(t,r,v.property,!0).to.have.property(e)};v.notProperty=function(t,e,r){new b(t,r,v.notProperty,!0).to.not.have.property(e)};v.propertyVal=function(t,e,r,n){new b(t,n,v.propertyVal,!0).to.have.property(e,r)};v.notPropertyVal=function(t,e,r,n){new b(t,n,v.notPropertyVal,!0).to.not.have.property(e,r)};v.deepPropertyVal=function(t,e,r,n){new b(t,n,v.deepPropertyVal,!0).to.have.deep.property(e,r)};v.notDeepPropertyVal=function(t,e,r,n){new b(t,n,v.notDeepPropertyVal,!0).to.not.have.deep.property(e,r)};v.ownProperty=function(t,e,r){new b(t,r,v.ownProperty,!0).to.have.own.property(e)};v.notOwnProperty=function(t,e,r){new b(t,r,v.notOwnProperty,!0).to.not.have.own.property(e)};v.ownPropertyVal=function(t,e,r,n){new b(t,n,v.ownPropertyVal,!0).to.have.own.property(e,r)};v.notOwnPropertyVal=function(t,e,r,n){new b(t,n,v.notOwnPropertyVal,!0).to.not.have.own.property(e,r)};v.deepOwnPropertyVal=function(t,e,r,n){new b(t,n,v.deepOwnPropertyVal,!0).to.have.deep.own.property(e,r)};v.notDeepOwnPropertyVal=function(t,e,r,n){new b(t,n,v.notDeepOwnPropertyVal,!0).to.not.have.deep.own.property(e,r)};v.nestedProperty=function(t,e,r){new b(t,r,v.nestedProperty,!0).to.have.nested.property(e)};v.notNestedProperty=function(t,e,r){new b(t,r,v.notNestedProperty,!0).to.not.have.nested.property(e)};v.nestedPropertyVal=function(t,e,r,n){new b(t,n,v.nestedPropertyVal,!0).to.have.nested.property(e,r)};v.notNestedPropertyVal=function(t,e,r,n){new b(t,n,v.notNestedPropertyVal,!0).to.not.have.nested.property(e,r)};v.deepNestedPropertyVal=function(t,e,r,n){new b(t,n,v.deepNestedPropertyVal,!0).to.have.deep.nested.property(e,r)};v.notDeepNestedPropertyVal=function(t,e,r,n){new b(t,n,v.notDeepNestedPropertyVal,!0).to.not.have.deep.nested.property(e,r)};v.lengthOf=function(t,e,r){new b(t,r,v.lengthOf,!0).to.have.lengthOf(e)};v.hasAnyKeys=function(t,e,r){new b(t,r,v.hasAnyKeys,!0).to.have.any.keys(e)};v.hasAllKeys=function(t,e,r){new b(t,r,v.hasAllKeys,!0).to.have.all.keys(e)};v.containsAllKeys=function(t,e,r){new b(t,r,v.containsAllKeys,!0).to.contain.all.keys(e)};v.doesNotHaveAnyKeys=function(t,e,r){new b(t,r,v.doesNotHaveAnyKeys,!0).to.not.have.any.keys(e)};v.doesNotHaveAllKeys=function(t,e,r){new b(t,r,v.doesNotHaveAllKeys,!0).to.not.have.all.keys(e)};v.hasAnyDeepKeys=function(t,e,r){new b(t,r,v.hasAnyDeepKeys,!0).to.have.any.deep.keys(e)};v.hasAllDeepKeys=function(t,e,r){new b(t,r,v.hasAllDeepKeys,!0).to.have.all.deep.keys(e)};v.containsAllDeepKeys=function(t,e,r){new b(t,r,v.containsAllDeepKeys,!0).to.contain.all.deep.keys(e)};v.doesNotHaveAnyDeepKeys=function(t,e,r){new b(t,r,v.doesNotHaveAnyDeepKeys,!0).to.not.have.any.deep.keys(e)};v.doesNotHaveAllDeepKeys=function(t,e,r){new b(t,r,v.doesNotHaveAllDeepKeys,!0).to.not.have.all.deep.keys(e)};v.throws=function(t,e,r,n){(typeof e=="string"||e instanceof RegExp)&&(r=e,e=null);var i=new b(t,n,v.throws,!0).to.throw(e,r);return Me(i,"object")};v.doesNotThrow=function(t,e,r,n){(typeof e=="string"||e instanceof RegExp)&&(r=e,e=null),new b(t,n,v.doesNotThrow,!0).to.not.throw(e,r)};v.operator=function(t,e,r,n){var i;switch(e){case"==":i=t==r;break;case"===":i=t===r;break;case">":i=t>r;break;case">=":i=t>=r;break;case"<":i=t<r;break;case"<=":i=t<=r;break;case"!=":i=t!=r;break;case"!==":i=t!==r;break;default:throw n=n&&n+": ",new Ke(n+'Invalid operator "'+e+'"',void 0,v.operator)}var o=new b(i,n,v.operator,!0);o.assert(Me(o,"object")===!0,"expected "+qe(t)+" to be "+e+" "+qe(r),"expected "+qe(t)+" to not be "+e+" "+qe(r))};v.closeTo=function(t,e,r,n){new b(t,n,v.closeTo,!0).to.be.closeTo(e,r)};v.approximately=function(t,e,r,n){new b(t,n,v.approximately,!0).to.be.approximately(e,r)};v.sameMembers=function(t,e,r){new b(t,r,v.sameMembers,!0).to.have.same.members(e)};v.notSameMembers=function(t,e,r){new b(t,r,v.notSameMembers,!0).to.not.have.same.members(e)};v.sameDeepMembers=function(t,e,r){new b(t,r,v.sameDeepMembers,!0).to.have.same.deep.members(e)};v.notSameDeepMembers=function(t,e,r){new b(t,r,v.notSameDeepMembers,!0).to.not.have.same.deep.members(e)};v.sameOrderedMembers=function(t,e,r){new b(t,r,v.sameOrderedMembers,!0).to.have.same.ordered.members(e)};v.notSameOrderedMembers=function(t,e,r){new b(t,r,v.notSameOrderedMembers,!0).to.not.have.same.ordered.members(e)};v.sameDeepOrderedMembers=function(t,e,r){new b(t,r,v.sameDeepOrderedMembers,!0).to.have.same.deep.ordered.members(e)};v.notSameDeepOrderedMembers=function(t,e,r){new b(t,r,v.notSameDeepOrderedMembers,!0).to.not.have.same.deep.ordered.members(e)};v.includeMembers=function(t,e,r){new b(t,r,v.includeMembers,!0).to.include.members(e)};v.notIncludeMembers=function(t,e,r){new b(t,r,v.notIncludeMembers,!0).to.not.include.members(e)};v.includeDeepMembers=function(t,e,r){new b(t,r,v.includeDeepMembers,!0).to.include.deep.members(e)};v.notIncludeDeepMembers=function(t,e,r){new b(t,r,v.notIncludeDeepMembers,!0).to.not.include.deep.members(e)};v.includeOrderedMembers=function(t,e,r){new b(t,r,v.includeOrderedMembers,!0).to.include.ordered.members(e)};v.notIncludeOrderedMembers=function(t,e,r){new b(t,r,v.notIncludeOrderedMembers,!0).to.not.include.ordered.members(e)};v.includeDeepOrderedMembers=function(t,e,r){new b(t,r,v.includeDeepOrderedMembers,!0).to.include.deep.ordered.members(e)};v.notIncludeDeepOrderedMembers=function(t,e,r){new b(t,r,v.notIncludeDeepOrderedMembers,!0).to.not.include.deep.ordered.members(e)};v.oneOf=function(t,e,r){new b(t,r,v.oneOf,!0).to.be.oneOf(e)};v.isIterable=function(t,e){if(t==null||!t[Symbol.iterator])throw e=e?`${e} expected ${qe(t)} to be an iterable`:`expected ${qe(t)} to be an iterable`,new Ke(e,void 0,v.isIterable)};v.changes=function(t,e,r,n){arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.changes,!0).to.change(e,r)};v.changesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.changesBy,!0).to.change(e,r).by(n)};v.doesNotChange=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.doesNotChange,!0).to.not.change(e,r)};v.changesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.changesButNotBy,!0).to.change(e,r).but.not.by(n)};v.increases=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.increases,!0).to.increase(e,r)};v.increasesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.increasesBy,!0).to.increase(e,r).by(n)};v.doesNotIncrease=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.doesNotIncrease,!0).to.not.increase(e,r)};v.increasesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.increasesButNotBy,!0).to.increase(e,r).but.not.by(n)};v.decreases=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.decreases,!0).to.decrease(e,r)};v.decreasesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.decreasesBy,!0).to.decrease(e,r).by(n)};v.doesNotDecrease=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.doesNotDecrease,!0).to.not.decrease(e,r)};v.doesNotDecreaseBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);return new b(t,i,v.doesNotDecreaseBy,!0).to.not.decrease(e,r).by(n)};v.decreasesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.decreasesButNotBy,!0).to.decrease(e,r).but.not.by(n)};v.ifError=function(t){if(t)throw t};v.isExtensible=function(t,e){new b(t,e,v.isExtensible,!0).to.be.extensible};v.isNotExtensible=function(t,e){new b(t,e,v.isNotExtensible,!0).to.not.be.extensible};v.isSealed=function(t,e){new b(t,e,v.isSealed,!0).to.be.sealed};v.isNotSealed=function(t,e){new b(t,e,v.isNotSealed,!0).to.not.be.sealed};v.isFrozen=function(t,e){new b(t,e,v.isFrozen,!0).to.be.frozen};v.isNotFrozen=function(t,e){new b(t,e,v.isNotFrozen,!0).to.not.be.frozen};v.isEmpty=function(t,e){new b(t,e,v.isEmpty,!0).to.be.empty};v.isNotEmpty=function(t,e){new b(t,e,v.isNotEmpty,!0).to.not.be.empty};v.containsSubset=function(t,e,r){new b(t,r).to.containSubset(e)};v.doesNotContainSubset=function(t,e,r){new b(t,r).to.not.containSubset(e)};var V8=[["isOk","ok"],["isNotOk","notOk"],["throws","throw"],["throws","Throw"],["isExtensible","extensible"],["isNotExtensible","notExtensible"],["isSealed","sealed"],["isNotSealed","notSealed"],["isFrozen","frozen"],["isNotFrozen","notFrozen"],["isEmpty","empty"],["isNotEmpty","notEmpty"],["isCallable","isFunction"],["isNotCallable","isNotFunction"],["containsSubset","containSubset"]];for(let[t,e]of V8)v[e]=v[t];var FF=[];function wI(t){let e={use:wI,AssertionError:Ke,util:ny,config:Tr,expect:py,assert:v,Assertion:b,...bI};return~FF.indexOf(t)||(t(e,ny),FF.push(t)),e}O(wI,"use");var Ou=class{constructor(e,r,n){this._lineNumber=e,this._text=r,this._isLastLine=n}get lineNumber(){return this._lineNumber}get text(){return this._text}get range(){return new Y(this._lineNumber,0,this._lineNumber,this._text.length)}get rangeIncludingLineBreak(){return this._isLastLine?this.range:new Y(this._lineNumber,0,this._lineNumber+1,0)}get rangeTrimmed(){let e=/^(\s*)/.exec(this._text)[1].length;if(e===this._text.length)return;let r=this.text.trimEnd().length;return new Y(this._lineNumber,e,this._lineNumber,r)}get isEmptyOrWhitespace(){return this.rangeTrimmed==null}};var EI=Hr(require("node:path"),1),by=class{get uri(){return this._uri}get filename(){return EI.default.basename(this._uri.path)}get languageId(){return this._languageId}get version(){return this._version}get lineCount(){return this._lineCount}get range(){let{end:e}=this.lineAt(this.lineCount-1).range;return new Y(0,0,e.line,e.character)}get eol(){return this._eol===`
`?"LF":"CRLF"}constructor(e,r,n,i,o){this._uri=e,this._languageId=r,this._version=n,this._eol=i,this._lines=o,this._lineCount=o.length,this._lineStarts=null,this._cachedTextValue=null}update(e){this._lines=e,this._lineCount=e.length,this._lineStarts=null,this._cachedTextValue=null}lineAt(e){let r;if(e instanceof ye?r=e.line:typeof e=="number"&&(r=e),typeof r!="number"||r<0||Math.floor(r)!==r)throw new Error("Illegal value for `line`");return r=Math.min(r,this._lines.length-1),new Ou(r,this._lines[r],r===this._lines.length-1)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.line-1)+e.character}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();let r=this._lineStarts.getIndexOf(e),n=this._lines[r.index].length;return new ye(r.index,Math.min(r.remainder,n))}getText(e){if(e===void 0)return this._cachedTextValue==null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue;if(e=this._validateRange(e),e.isEmpty)return"";if(e.isSingleLine)return this._lines[e.start.line].substring(e.start.character,e.end.character);let r=this._eol,n=e.start.line,i=e.end.line,o=[];o.push(this._lines[n].substring(e.start.character));for(let s=n+1;s<i;s++)o.push(this._lines[s]);return o.push(this._lines[i].substring(0,e.end.character)),o.join(r)}_validateRange(e){if(!(e instanceof Y))throw new Error("Invalid argument");let r=this._validatePosition(e.start),n=this._validatePosition(e.end);return r===e.start&&n===e.end?e:new Y(r.line,r.character,n.line,n.character)}_validatePosition(e){if(!(e instanceof ye))throw new Error("Invalid argument");if(this._lines.length===0)return e.with(0,0);let{line:r,character:n}=e,i=!1;if(r<0)r=0,n=0,i=!0;else if(r>=this._lines.length)r=this._lines.length-1,n=this._lines[r].length,i=!0;else{let o=this._lines[r].length;n<0?(n=0,i=!0):n>o&&(n=o,i=!0)}return i?new ye(r,n):e}_ensureLineStarts(){if(!this._lineStarts){let e=this._eol.length,r=this._lines.length,n=new Uint32Array(r);for(let i=0;i<r;i++)n[i]=this._lines[i].length+e;this._lineStarts=new iw(n)}}};function j8(t){if(t<0)return 0;let e=4294967295;return t>e?e:t|0}var iw=class{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}getCount(){return this.values.length}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=j8(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let r=this.prefixSumValidIndex[0]+1;r===0&&(this.prefixSum[0]=this.values[0],r++),e>=this.values.length&&(e=this.values.length-1);for(let n=r;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let r=0,n=this.values.length-1,i=0,o=0,s=0;for(;r<=n;)if(i=r+(n-r)/2|0,o=this.prefixSum[i],s=o-this.values[i],e<s)n=i-1;else if(e>=o)r=i+1;else break;return new ow(i,e-s)}},ow=class{constructor(e,r){this.index=e;this.remainder=r;this._prefixSumIndexOfResultBrand=void 0;this.index=e,this.remainder=r}};var wy=class{constructor(e){this.client=e;this.cursorlessVersion="0.0.0";this.workspaceFolders=void 0;this.disposables=[];this.quickPickReturnValue=void 0;this.onDidCloseTextDocument=Nu;this.onDidChangeActiveTextEditor=Nu;this.onDidChangeVisibleTextEditors=Nu;this.onDidChangeTextEditorSelection=Nu;this.onDidChangeTextEditorVisibleRanges=Nu;this.configuration=new uu,this.keyValueStore=new pu,this.messages=new mu,this.clipboard=new cu(this.client),this.capabilities=new Ch,this.editorMap=new Map,this.documentMap=new Map,this.activeWindow=void 0,this.activeBuffer=void 0}async init(){let e=await cL(this.client);this.assetsRoot_=aw.default.join(e,"assets"),this.cursorlessNeovimPath=aw.default.join(e,"node","cursorless-neovim")}async showQuickPick(e,r){throw Error("showQuickPick Not implemented")}async setHighlightRanges(e,r,n){throw Error("setHighlightRanges Not implemented")}async flashRanges(e){console.debug("flashRanges Not implemented")}get assetsRoot(){if(this.assetsRoot_==null)throw Error("Field `assetsRoot` has not yet been mocked");return this.assetsRoot_}get runMode(){return EF()}get activeTextEditor(){return this.getActiveTextEditor()}get activeEditableTextEditor(){return this.getActiveTextEditor()}getActiveTextEditor(){let e=this.activeWindow?this.getTextEditor(this.activeWindow):void 0;return e===void 0&&console.debug("getActiveTextEditor: editor is undefined"),e}getTextEditor(e){for(let[r,n]of this.editorMap)if(r.id===e.id)return n}getTextDocument(e){for(let[r,n]of this.documentMap)if(r.id===e.id)return n}get visibleTextEditors(){return Array.from(this.editorMap.values())}get visibleNotebookEditors(){return[]}getEditableTextEditor(e){return e}async findInDocument(e,r){throw Error("findInDocument Not implemented")}async findInWorkspace(e){throw Error("findInWorkspace Not implemented")}async openTextDocument(e){throw Error("openTextDocument Not implemented")}async openUntitledTextDocument(e){throw Error("openUntitledTextDocument Not implemented")}async showInputBox(e){throw Error("TextDocumentChangeEvent Not implemented")}async executeCommand(e,...r){throw new Error("executeCommand Method not implemented.")}onDidChangeTextDocument(e){return TL(e)}onDidOpenTextDocument(e,r,n){return xL(e,r,n)}async updateTextEditor(e=!1){let r=await this.client.window,n=await r.buffer,i=await n.lines,o=i;i.length>=30&&(o=i.slice(0,15).concat(["..."]).concat(i.slice(-15))),console.debug(`updateTextEditor(): window:${r.id}, buffer:${n.id}, lines=${JSON.stringify(o)}`);let s,l;e?(s=[],l=[]):(s=await Fh(r,this.client),l=await sL(r,this.client,i));let u=this.toNeovimEditor(r,n,i,l,s);return Kr().emitEvent("onDidOpenTextDocument",u.document),u}toNeovimEditor(e,r,n,i,o){let s=this.getTextDocument(r),l=this.getTextEditor(e);return s?(console.debug(`toNeovimEditor(): updating document: buffer=${r.id}`),s.update(n)):(console.debug(`toNeovimEditor(): creating new document: buffer=${r.id}`),s=new by(EL.parse(`neovim://${r.id}`),"plaintext",1,`
`,n),this.documentMap.set(r,s)),l?(console.debug(`toNeovimEditor(): updating editor: window=${e.id}`),l.updateDocument(i,o,s)):(console.debug(`toNeovimEditor(): creating new editor: window=${e.id}`),l=new Nh(Yx(),this.client,this,e,s,i,o),this.editorMap.set(e,l)),this.activeBuffer=r,this.activeWindow=e,this.activeTextEditor}handleCommandError(e){fL(this.client,e.message)}disposeOnExit(...e){return this.disposables.push(...e),()=>(0,_I.pull)(this.disposables,...e)}};function Nu(){return{dispose(){}}}var Ey=class{constructor(e){this.client=e;this.signals={prePhrase:{getVersion:async()=>null}}}async getFocusedElementType(){let e=await this.client.mode;return e.mode==="t"||e.mode==="nt"?"terminal":"textEditor"}};var q8=BigInt(1e9);function RI(t,e=BigInt(1e6)){return Number(t*e/q8)/Number(e)}async function _y(t,e=[],r=[],n,i,o,s,l){let u={documentContents:n.document.getText(),selections:n.selections.map(gk)};o!=null&&(u.marks=o),l!=null&&(u.metadata=l),e.includes("clipboard")||(u.clipboard=await i.clipboard.readText()),e.includes("visibleRanges")||(u.visibleRanges=n.visibleRanges.map(al));for(let m of Ss){let d=t?.get(m),g=`${m}Mark`;d!=null&&!e.includes(g)&&(u[g]=d.map(y=>y.toPlainObject()))}if(r.includes("timeOffsetSeconds")){let m=s?.startTimestamp;if(m==null)throw new Error("No start timestamp provided but time offset was requested");let d=process.hrtime.bigint()-m;u.timeOffsetSeconds=RI(d)}return u}var G8=Hr(_l(),1);function kI(t,e,r,n,i,o,s,l){return{commandServerApi:t,ide:i,neovimIDE:n,injectIde:s,scopeProvider:o,takeSnapshot(u,m,d,g,y){return _y(e,u,m,d,g,y,void 0,void 0)},setStoredTarget(u,m,d){e.set(m,d?.map(g=>nL(u,g)))},hatTokenMap:r,runIntegrationTests:l}}async function AI(t,e,r,n){let i={[GT]:async(...o)=>{(await t.mode).mode==="t"&&pL(t);try{await e.updateTextEditor();let l=await r.runCommandSafe(...o),u=Mm(o);if(await n.getFocusedElementType()==="terminal"&&ra(u)){let d=l;"fallback"in d&&d.fallback.action==="insert"&&mL(t)}return l}catch(l){if(e.runMode!=="test"){let u=l;console.error(u.stack),e.handleCommandError(u)}throw l}},"cursorless.repeatPreviousCommand":Ne,"cursorless.showCheatsheet":Ne,"cursorless.internal.updateCheatsheetDefaults":Ne,"cursorless.recordTestCase":Ne,"cursorless.recordOneTestCaseThenPause":Ne,"cursorless.pauseRecording":Ne,"cursorless.resumeRecording":Ne,"cursorless.takeSnapshot":Ne,"cursorless.recordScopeTests.showUnimplementedFacets":Ne,"cursorless.recordScopeTests.saveActiveDocument":Ne,"cursorless.showQuickPick":Ne,"cursorless.showDocumentation":Ne,"cursorless.showInstallationDependencies":Ne,"cursorless.migrateSnippets":Ne,"cursorless.private.logQuickActions":Ne,"cursorless.toggleDecorations":Ne,"cursorless.recomputeDecorationStyles":Ne,"cursorless.showScopeVisualizer":Ne,"cursorless.hideScopeVisualizer":Ne,"cursorless.analyzeCommandHistory":Ne,"cursorless.keyboard.escape":Ne,"cursorless.keyboard.targeted.targetHat":Ne,"cursorless.keyboard.targeted.targetScope":Ne,"cursorless.keyboard.targeted.targetSelection":Ne,"cursorless.keyboard.targeted.clearTarget":Ne,"cursorless.keyboard.targeted.runActionOnTarget":Ne,"cursorless.keyboard.modal.modeOn":Ne,"cursorless.keyboard.modal.modeOff":Ne,"cursorless.keyboard.modal.modeToggle":Ne,"cursorless.keyboard.undoTarget":Ne,"cursorless.keyboard.redoTarget":Ne,"cursorless.tutorial.start":Ne,"cursorless.tutorial.next":Ne,"cursorless.tutorial.previous":Ne,"cursorless.tutorial.restart":Ne,"cursorless.tutorial.resume":Ne,"cursorless.tutorial.list":Ne,"cursorless.documentationOpened":Ne};Object.entries(i).map(([o,s])=>Kr().registerCommand(o,s))}async function Ne(...t){console.debug(`dummyCommandHandler(): args=${t}`)}async function PI(t){let e=t.nvim,r=new wy(e);await r.init();let n=r.runMode==="production"?r:new Tm(r,new gm,r.runMode==="test",void 0),i=new Lp,o=new Ey(e),s=r.runMode==="test"?i:o,{commandApi:l,storedTargets:u,hatTokenMap:m,scopeProvider:d,injectIde:g,runIntegrationTests:y}=await rL({ide:n,commandServerApi:s});await AI(e,r,l,s);let x={testHelpers:r.runMode==="test"?kI(i,u,m,r,n,d,g,y):void 0};Kr().registerExtensionApi(oL,x),console.log("activate(): Cursorless extension loaded")}function MI(t){t.setOptions({dev:!1}),t.registerFunction("CursorlessLoadExtension",async()=>await K8(t),{sync:!1})}async function K8(t){console.log("==============================================================================================="),console.log("loadExtension(cursorless-neovim): start"),await PI(t),console.log("loadExtension(cursorless-neovim): done")}
/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)

itertools/dist/index.js:
  (* istanbul ignore else -- @preserve *)
  (* istanbul ignore if -- @preserve *)

chai/chai.js:
  (*!
   * Chai - flag utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - test utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - expectTypes utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getActual utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - message composition utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - transferFlags utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * http://chaijs.com
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - isProxyEnabled helper
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addLengthGuard utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getProperties utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - proxify utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addChainingMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteChainableMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - compareByInspect utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getOwnEnumerablePropertySymbols utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getOwnEnumerableProperties utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - isNaN utility
   * Copyright(c) 2012-2015 Sakthipriyan Vairamani <thechargingvolcano@gmail.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*! Bundled license information:
  
  deep-eql/index.js:
    (*!
     * deep-eql
     * Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>
     * MIT Licensed
     *)
    (*!
     * Check to see if the MemoizeMap has recorded a result of the two operands
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {MemoizeMap} memoizeMap
     * @returns {Boolean|null} result
    *)
    (*!
     * Set the result of the equality into the MemoizeMap
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {MemoizeMap} memoizeMap
     * @param {Boolean} result
    *)
    (*!
     * Primary Export
     *)
    (*!
     * The main logic of the `deepEqual` function.
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Object} [options] (optional) Additional options
     * @param {Array} [options.comparator] (optional) Override default algorithm, determining custom equality.
     * @param {Array} [options.memoize] (optional) Provide a custom memoization object which will cache the results of
        complex objects for a speed boost. By passing `false` you can disable memoization, but this will cause circular
        references to blow the stack.
     * @return {Boolean} equal match
    *)
    (*!
     * Compare two Regular Expressions for equality.
     *
     * @param {RegExp} leftHandOperand
     * @param {RegExp} rightHandOperand
     * @return {Boolean} result
     *)
    (*!
     * Compare two Sets/Maps for equality. Faster than other equality functions.
     *
     * @param {Set} leftHandOperand
     * @param {Set} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Simple equality for flat iterable objects such as Arrays, TypedArrays or Node.js buffers.
     *
     * @param {Iterable} leftHandOperand
     * @param {Iterable} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Simple equality for generator objects such as those returned by generator functions.
     *
     * @param {Iterable} leftHandOperand
     * @param {Iterable} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Determine if the given object has an @@iterator function.
     *
     * @param {Object} target
     * @return {Boolean} `true` if the object has an @@iterator function.
     *)
    (*!
     * Gets all iterator entries from the given Object. If the Object has no @@iterator function, returns an empty array.
     * This will consume the iterator - which could have side effects depending on the @@iterator implementation.
     *
     * @param {Object} target
     * @returns {Array} an array of entries from the @@iterator function
     *)
    (*!
     * Gets all entries from a Generator. This will consume the generator - which could have side effects.
     *
     * @param {Generator} target
     * @returns {Array} an array of entries from the Generator.
     *)
    (*!
     * Gets all own and inherited enumerable keys from a target.
     *
     * @param {Object} target
     * @returns {Array} an array of own and inherited enumerable keys from the target.
     *)
    (*!
     * Determines if two objects have matching values, given a set of keys. Defers to deepEqual for the equality check of
     * each key. If any value of the given key is not equal, the function will return false (early).
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Array} keys An array of keys to compare the values of leftHandOperand and rightHandOperand against
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Recursively check the equality of two Objects. Once basic sameness has been established it will defer to `deepEqual`
     * for each enumerable key in the object.
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Returns true if the argument is a primitive.
     *
     * This intentionally returns true for all objects that can be compared by reference,
     * including functions and symbols.
     *
     * @param {Mixed} value
     * @return {Boolean} result
     *)
  *)
*/
