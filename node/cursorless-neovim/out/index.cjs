"use strict";var YB=Object.create;var ku=Object.defineProperty;var XB=Object.getOwnPropertyDescriptor;var JB=Object.getOwnPropertyNames;var eH=Object.getPrototypeOf,tH=Object.prototype.hasOwnProperty;var Ge=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),rH=(t,e)=>{for(var r in e)ku(t,r,{get:e[r],enumerable:!0})},V0=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of JB(e))!tH.call(t,i)&&i!==r&&ku(t,i,{get:()=>e[i],enumerable:!(n=XB(e,i))||n.enumerable});return t};var dr=(t,e,r)=>(r=t!=null?YB(eH(t)):{},V0(e||!t||!t.__esModule?ku(r,"default",{value:t,enumerable:!0}):r,t)),nH=t=>V0(ku({},"__esModule",{value:!0}),t);var AP=Ge(Bf=>{"use strict";Object.defineProperty(Bf,"__esModule",{value:!0});Bf.default=void 0;var Oge=Bf.default="ffffffff-ffff-ffff-ffff-ffffffffffff"});var DP=Ge(Hf=>{"use strict";Object.defineProperty(Hf,"__esModule",{value:!0});Hf.default=void 0;var Lge=Hf.default="00000000-0000-0000-0000-000000000000"});var IP=Ge(Wf=>{"use strict";Object.defineProperty(Wf,"__esModule",{value:!0});Wf.default=void 0;var Vge=Wf.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i});var pl=Ge($f=>{"use strict";Object.defineProperty($f,"__esModule",{value:!0});$f.default=void 0;var k4=P4(IP());function P4(t){return t&&t.__esModule?t:{default:t}}function M4(t){return typeof t=="string"&&k4.default.test(t)}var Hge=$f.default=M4});var ul=Ge(jf=>{"use strict";Object.defineProperty(jf,"__esModule",{value:!0});jf.default=void 0;var A4=D4(pl());function D4(t){return t&&t.__esModule?t:{default:t}}function I4(t){if(!(0,A4.default)(t))throw TypeError("Invalid UUID");let e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}var $ge=jf.default=I4});var _i=Ge(fl=>{"use strict";Object.defineProperty(fl,"__esModule",{value:!0});fl.default=void 0;fl.unsafeStringify=FP;var F4=C4(pl());function C4(t){return t&&t.__esModule?t:{default:t}}var Ot=[];for(let t=0;t<256;++t)Ot.push((t+256).toString(16).slice(1));function FP(t,e=0){return(Ot[t[e+0]]+Ot[t[e+1]]+Ot[t[e+2]]+Ot[t[e+3]]+"-"+Ot[t[e+4]]+Ot[t[e+5]]+"-"+Ot[t[e+6]]+Ot[t[e+7]]+"-"+Ot[t[e+8]]+Ot[t[e+9]]+"-"+Ot[t[e+10]]+Ot[t[e+11]]+Ot[t[e+12]]+Ot[t[e+13]]+Ot[t[e+14]]+Ot[t[e+15]]).toLowerCase()}function O4(t,e=0){let r=FP(t,e);if(!(0,F4.default)(r))throw TypeError("Stringified UUID is invalid");return r}var qge=fl.default=O4});var Gf=Ge(XT=>{"use strict";Object.defineProperty(XT,"__esModule",{value:!0});XT.default=U4;var N4=L4(require("node:crypto"));function L4(t){return t&&t.__esModule?t:{default:t}}var zf=new Uint8Array(256),qf=zf.length;function U4(){return qf>zf.length-16&&(N4.default.randomFillSync(zf),qf=0),zf.slice(qf,qf+=16)}});var rS=Ge(Qf=>{"use strict";Object.defineProperty(Qf,"__esModule",{value:!0});Qf.default=void 0;var V4=H4(Gf()),B4=_i();function H4(t){return t&&t.__esModule?t:{default:t}}var JT,Kf,eS=0,tS=0;function W4(t,e,r){let n=e&&r||0,i=e||new Array(16);t=t||{};let o=t.node,a=t.clockseq;if(t._v6||(o||(o=JT),a==null&&(a=Kf)),o==null||a==null){let g=t.random||(t.rng||V4.default)();o==null&&(o=[g[0],g[1],g[2],g[3],g[4],g[5]],!JT&&!t._v6&&(o[0]|=1,JT=o)),a==null&&(a=(g[6]<<8|g[7])&16383,Kf===void 0&&!t._v6&&(Kf=a))}let l=t.msecs!==void 0?t.msecs:Date.now(),p=t.nsecs!==void 0?t.nsecs:tS+1,u=l-eS+(p-tS)/1e4;if(u<0&&t.clockseq===void 0&&(a=a+1&16383),(u<0||l>eS)&&t.nsecs===void 0&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");eS=l,tS=p,Kf=a,l+=122192928e5;let d=((l&268435455)*1e4+p)%4294967296;i[n++]=d>>>24&255,i[n++]=d>>>16&255,i[n++]=d>>>8&255,i[n++]=d&255;let h=l/4294967296*1e4&268435455;i[n++]=h>>>8&255,i[n++]=h&255,i[n++]=h>>>24&15|16,i[n++]=h>>>16&255,i[n++]=a>>>8|128,i[n++]=a&255;for(let g=0;g<6;++g)i[n+g]=o[g];return e||(0,B4.unsafeStringify)(i)}var Kge=Qf.default=W4});var iS=Ge(nS=>{"use strict";Object.defineProperty(nS,"__esModule",{value:!0});nS.default=z4;var $4=q4(ul()),j4=_i();function q4(t){return t&&t.__esModule?t:{default:t}}function z4(t){let e=typeof t=="string"?(0,$4.default)(t):t,r=G4(e);return typeof t=="string"?(0,j4.unsafeStringify)(r):r}function G4(t,e=!1){return Uint8Array.of((t[6]&15)<<4|t[7]>>4&15,(t[7]&15)<<4|(t[4]&240)>>4,(t[4]&15)<<4|(t[5]&240)>>4,(t[5]&15)<<4|(t[0]&240)>>4,(t[0]&15)<<4|(t[1]&240)>>4,(t[1]&15)<<4|(t[2]&240)>>4,96|t[2]&15,t[3],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}});var oS=Ge(Yo=>{"use strict";Object.defineProperty(Yo,"__esModule",{value:!0});Yo.URL=Yo.DNS=void 0;Yo.default=e6;var K4=_i(),Q4=Z4(ul());function Z4(t){return t&&t.__esModule?t:{default:t}}function Y4(t){t=unescape(encodeURIComponent(t));let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}var X4=Yo.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",J4=Yo.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function e6(t,e,r){function n(i,o,a,l){var p;if(typeof i=="string"&&(i=Y4(i)),typeof o=="string"&&(o=(0,Q4.default)(o)),((p=o)===null||p===void 0?void 0:p.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+i.length);if(u.set(o),u.set(i,o.length),u=r(u),u[6]=u[6]&15|e,u[8]=u[8]&63|128,a){l=l||0;for(let d=0;d<16;++d)a[l+d]=u[d];return a}return(0,K4.unsafeStringify)(u)}try{n.name=t}catch{}return n.DNS=X4,n.URL=J4,n}});var CP=Ge(Zf=>{"use strict";Object.defineProperty(Zf,"__esModule",{value:!0});Zf.default=void 0;var t6=r6(require("node:crypto"));function r6(t){return t&&t.__esModule?t:{default:t}}function n6(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),t6.default.createHash("md5").update(t).digest()}var Xge=Zf.default=n6});var NP=Ge(Yf=>{"use strict";Object.defineProperty(Yf,"__esModule",{value:!0});Yf.default=void 0;var i6=OP(oS()),o6=OP(CP());function OP(t){return t&&t.__esModule?t:{default:t}}var s6=(0,i6.default)("v3",48,o6.default),eye=Yf.default=s6});var LP=Ge(Xf=>{"use strict";Object.defineProperty(Xf,"__esModule",{value:!0});Xf.default=void 0;var a6=c6(require("node:crypto"));function c6(t){return t&&t.__esModule?t:{default:t}}var rye=Xf.default={randomUUID:a6.default.randomUUID}});var BP=Ge(Jf=>{"use strict";Object.defineProperty(Jf,"__esModule",{value:!0});Jf.default=void 0;var UP=VP(LP()),l6=VP(Gf()),p6=_i();function VP(t){return t&&t.__esModule?t:{default:t}}function u6(t,e,r){if(UP.default.randomUUID&&!e&&!t)return UP.default.randomUUID();t=t||{};let n=t.random||(t.rng||l6.default)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return(0,p6.unsafeStringify)(n)}var iye=Jf.default=u6});var HP=Ge(ed=>{"use strict";Object.defineProperty(ed,"__esModule",{value:!0});ed.default=void 0;var f6=d6(require("node:crypto"));function d6(t){return t&&t.__esModule?t:{default:t}}function m6(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),f6.default.createHash("sha1").update(t).digest()}var sye=ed.default=m6});var $P=Ge(td=>{"use strict";Object.defineProperty(td,"__esModule",{value:!0});td.default=void 0;var h6=WP(oS()),g6=WP(HP());function WP(t){return t&&t.__esModule?t:{default:t}}var y6=(0,h6.default)("v5",80,g6.default),cye=td.default=y6});var qP=Ge(sS=>{"use strict";Object.defineProperty(sS,"__esModule",{value:!0});sS.default=v6;var x6=_i(),T6=jP(rS()),S6=jP(iS());function jP(t){return t&&t.__esModule?t:{default:t}}function v6(t={},e,r=0){let n=(0,T6.default)({...t,_v6:!0},new Uint8Array(16));if(n=(0,S6.default)(n),e){for(let i=0;i<16;i++)e[r+i]=n[i];return e}return(0,x6.unsafeStringify)(n)}});var zP=Ge(aS=>{"use strict";Object.defineProperty(aS,"__esModule",{value:!0});aS.default=E6;var b6=_6(ul()),w6=_i();function _6(t){return t&&t.__esModule?t:{default:t}}function E6(t){let e=typeof t=="string"?(0,b6.default)(t):t,r=R6(e);return typeof t=="string"?(0,w6.unsafeStringify)(r):r}function R6(t){return Uint8Array.of((t[3]&15)<<4|t[4]>>4&15,(t[4]&15)<<4|(t[5]&240)>>4,(t[5]&15)<<4|t[6]&15,t[7],(t[1]&15)<<4|(t[2]&240)>>4,(t[2]&15)<<4|(t[3]&240)>>4,16|(t[0]&240)>>4,(t[0]&15)<<4|(t[1]&240)>>4,t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}});var QP=Ge(rd=>{"use strict";Object.defineProperty(rd,"__esModule",{value:!0});rd.default=void 0;var k6=M6(Gf()),P6=_i();function M6(t){return t&&t.__esModule?t:{default:t}}var GP=null,KP=null,Pn=0;function A6(t,e,r){t=t||{};let n=e&&r||0,i=e||new Uint8Array(16),o=t.random||(t.rng||k6.default)(),a=t.msecs!==void 0?t.msecs:Date.now(),l=t.seq!==void 0?t.seq:null,p=KP,u=GP;return a>Pn&&t.msecs===void 0&&(Pn=a,l!==null&&(p=null,u=null)),l!==null&&(l>2147483647&&(l=2147483647),p=l>>>19&4095,u=l&524287),(p===null||u===null)&&(p=o[6]&127,p=p<<8|o[7],u=o[8]&63,u=u<<8|o[9],u=u<<5|o[10]>>>3),a+1e4>Pn&&l===null?++u>524287&&(u=0,++p>4095&&(p=0,Pn++)):Pn=a,KP=p,GP=u,i[n++]=Pn/1099511627776&255,i[n++]=Pn/4294967296&255,i[n++]=Pn/16777216&255,i[n++]=Pn/65536&255,i[n++]=Pn/256&255,i[n++]=Pn&255,i[n++]=p>>>4&15|112,i[n++]=p&255,i[n++]=u>>>13&63|128,i[n++]=u>>>5&255,i[n++]=u<<3&255|o[10]&7,i[n++]=o[11],i[n++]=o[12],i[n++]=o[13],i[n++]=o[14],i[n++]=o[15],e||(0,P6.unsafeStringify)(i)}var fye=rd.default=A6});var ZP=Ge(nd=>{"use strict";Object.defineProperty(nd,"__esModule",{value:!0});nd.default=void 0;var D6=I6(pl());function I6(t){return t&&t.__esModule?t:{default:t}}function F6(t){if(!(0,D6.default)(t))throw TypeError("Invalid UUID");return parseInt(t.slice(14,15),16)}var mye=nd.default=F6});var YP=Ge(jt=>{"use strict";Object.defineProperty(jt,"__esModule",{value:!0});Object.defineProperty(jt,"MAX",{enumerable:!0,get:function(){return C6.default}});Object.defineProperty(jt,"NIL",{enumerable:!0,get:function(){return O6.default}});Object.defineProperty(jt,"parse",{enumerable:!0,get:function(){return N6.default}});Object.defineProperty(jt,"stringify",{enumerable:!0,get:function(){return L6.default}});Object.defineProperty(jt,"v1",{enumerable:!0,get:function(){return U6.default}});Object.defineProperty(jt,"v1ToV6",{enumerable:!0,get:function(){return V6.default}});Object.defineProperty(jt,"v3",{enumerable:!0,get:function(){return B6.default}});Object.defineProperty(jt,"v4",{enumerable:!0,get:function(){return H6.default}});Object.defineProperty(jt,"v5",{enumerable:!0,get:function(){return W6.default}});Object.defineProperty(jt,"v6",{enumerable:!0,get:function(){return $6.default}});Object.defineProperty(jt,"v6ToV1",{enumerable:!0,get:function(){return j6.default}});Object.defineProperty(jt,"v7",{enumerable:!0,get:function(){return q6.default}});Object.defineProperty(jt,"validate",{enumerable:!0,get:function(){return z6.default}});Object.defineProperty(jt,"version",{enumerable:!0,get:function(){return G6.default}});var C6=xr(AP()),O6=xr(DP()),N6=xr(ul()),L6=xr(_i()),U6=xr(rS()),V6=xr(iS()),B6=xr(NP()),H6=xr(BP()),W6=xr($P()),$6=xr(qP()),j6=xr(zP()),q6=xr(QP()),z6=xr(pl()),G6=xr(ZP());function xr(t){return t&&t.__esModule?t:{default:t}}});var tM=Ge((eM,od)=>{(function(t,e){typeof od=="object"&&od.exports?od.exports=e():t.nearley=e()})(eM,function(){function t(p,u,d){return this.id=++t.highestId,this.name=p,this.symbols=u,this.postprocess=d,this}t.highestId=0,t.prototype.toString=function(p){var u=typeof p>"u"?this.symbols.map(l).join(" "):this.symbols.slice(0,p).map(l).join(" ")+" \u25CF "+this.symbols.slice(p).map(l).join(" ");return this.name+" \u2192 "+u};function e(p,u,d,h){this.rule=p,this.dot=u,this.reference=d,this.data=[],this.wantedBy=h,this.isComplete=this.dot===p.symbols.length}e.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},e.prototype.nextState=function(p){var u=new e(this.rule,this.dot+1,this.reference,this.wantedBy);return u.left=this,u.right=p,u.isComplete&&(u.data=u.build(),u.right=void 0),u},e.prototype.build=function(){var p=[],u=this;do p.push(u.right.data),u=u.left;while(u.left);return p.reverse(),p},e.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,o.fail))};function r(p,u){this.grammar=p,this.index=u,this.states=[],this.wants={},this.scannable=[],this.completed={}}r.prototype.process=function(p){for(var u=this.states,d=this.wants,h=this.completed,g=0;g<u.length;g++){var x=u[g];if(x.isComplete){if(x.finish(),x.data!==o.fail){for(var _=x.wantedBy,w=_.length;w--;){var C=_[w];this.complete(C,x)}if(x.reference===this.index){var M=x.rule.name;(this.completed[M]=this.completed[M]||[]).push(x)}}}else{var M=x.rule.symbols[x.dot];if(typeof M!="string"){this.scannable.push(x);continue}if(d[M]){if(d[M].push(x),h.hasOwnProperty(M))for(var U=h[M],w=0;w<U.length;w++){var Z=U[w];this.complete(x,Z)}}else d[M]=[x],this.predict(M)}}},r.prototype.predict=function(p){for(var u=this.grammar.byName[p]||[],d=0;d<u.length;d++){var h=u[d],g=this.wants[p],x=new e(h,0,this.index,g);this.states.push(x)}},r.prototype.complete=function(p,u){var d=p.nextState(u);this.states.push(d)};function n(p,u){this.rules=p,this.start=u||this.rules[0].name;var d=this.byName={};this.rules.forEach(function(h){d.hasOwnProperty(h.name)||(d[h.name]=[]),d[h.name].push(h)})}n.fromCompiled=function(h,u){var d=h.Lexer;h.ParserStart&&(u=h.ParserStart,h=h.ParserRules);var h=h.map(function(x){return new t(x.name,x.symbols,x.postprocess)}),g=new n(h,u);return g.lexer=d,g};function i(){this.reset("")}i.prototype.reset=function(p,u){this.buffer=p,this.index=0,this.line=u?u.line:1,this.lastLineBreak=u?-u.col:0},i.prototype.next=function(){if(this.index<this.buffer.length){var p=this.buffer[this.index++];return p===`
`&&(this.line+=1,this.lastLineBreak=this.index),{value:p}}},i.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},i.prototype.formatError=function(p,u){var d=this.buffer;if(typeof d=="string"){var h=d.split(`
`).slice(Math.max(0,this.line-5),this.line),g=d.indexOf(`
`,this.index);g===-1&&(g=d.length);var x=this.index-this.lastLineBreak,_=String(this.line).length;return u+=" at line "+this.line+" col "+x+`:

`,u+=h.map(function(C,M){return w(this.line-h.length+M+1,_)+" "+C},this).join(`
`),u+=`
`+w("",_+x)+`^
`,u}else return u+" at index "+(this.index-1);function w(C,M){var U=String(C);return Array(M-U.length+1).join(" ")+U}};function o(p,u,d){if(p instanceof n)var h=p,d=u;else var h=n.fromCompiled(p,u);this.grammar=h,this.options={keepHistory:!1,lexer:h.lexer||new i};for(var g in d||{})this.options[g]=d[g];this.lexer=this.options.lexer,this.lexerState=void 0;var x=new r(h,0),_=this.table=[x];x.wants[h.start]=[],x.predict(h.start),x.process(),this.current=0}o.fail={},o.prototype.feed=function(p){var u=this.lexer;u.reset(p,this.lexerState);for(var d;;){try{if(d=u.next(),!d)break}catch(de){var _=new r(this.grammar,this.current+1);this.table.push(_);var h=new Error(this.reportLexerError(de));throw h.offset=this.current,h.token=de.token,h}var g=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var x=this.current+1,_=new r(this.grammar,x);this.table.push(_);for(var w=d.text!==void 0?d.text:d.value,C=u.constructor===i?d.value:u.transform?.(d)??d,M=g.scannable,U=M.length;U--;){var Z=M[U],ne=Z.rule.symbols[Z.dot];if(ne.test?ne.test(C):ne.type?ne.type===d.type:ne.literal===w){var ge=Z.nextState({data:C,token:d,isToken:!0,reference:x-1});_.states.push(ge)}}if(_.process(),_.states.length===0){var h=new Error(this.reportError(d));throw h.offset=this.current,h.token=d,h}this.options.keepHistory&&(g.lexerState=u.save()),this.current++}return g&&(this.lexerState=u.save()),this.results=this.finish(),this},o.prototype.reportLexerError=function(p){var u,d,h=p.token;return h?(u="input "+JSON.stringify(h.text[0])+" (lexer error)",d=this.lexer.formatError(h,"Syntax error")):(u="input (lexer error)",d=p.message),this.reportErrorCommon(d,u)},o.prototype.reportError=function(p){var u=(p.type?p.type+" token: ":"")+JSON.stringify(p.value!==void 0?p.value:p),d=this.lexer.formatError(p,"Syntax error");return this.reportErrorCommon(d,u)},o.prototype.reportErrorCommon=function(p,u){var d=[];d.push(p);var h=this.table.length-2,g=this.table[h],x=g.states.filter(function(w){var C=w.rule.symbols[w.dot];return C&&typeof C!="string"});if(x.length===0)d.push("Unexpected "+u+`. I did not expect any more input. Here is the state of my parse table:
`),this.displayStateStack(g.states,d);else{d.push("Unexpected "+u+`. Instead, I was expecting to see one of the following:
`);var _=x.map(function(w){return this.buildFirstStateStack(w,[])||[w]},this);_.forEach(function(w){var C=w[0],M=C.rule.symbols[C.dot],U=this.getSymbolDisplay(M);d.push("A "+U+" based on:"),this.displayStateStack(w,d)},this)}return d.push(""),d.join(`
`)},o.prototype.displayStateStack=function(p,u){for(var d,h=0,g=0;g<p.length;g++){var x=p[g],_=x.rule.toString(x.dot);_===d?h++:(h>0&&u.push("    ^ "+h+" more lines identical to this"),h=0,u.push("    "+_)),d=_}},o.prototype.getSymbolDisplay=function(p){return a(p)},o.prototype.buildFirstStateStack=function(p,u){if(u.indexOf(p)!==-1)return null;if(p.wantedBy.length===0)return[p];var d=p.wantedBy[0],h=[p].concat(u),g=this.buildFirstStateStack(d,h);return g===null?null:[p].concat(g)},o.prototype.save=function(){var p=this.table[this.current];return p.lexerState=this.lexerState,p},o.prototype.restore=function(p){var u=p.index;this.current=u,this.table[u]=p,this.table.splice(u+1),this.lexerState=p.lexerState,this.results=this.finish()},o.prototype.rewind=function(p){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[p])},o.prototype.finish=function(){var p=[],u=this.grammar.start,d=this.table[this.table.length-1];return d.states.forEach(function(h){h.rule.name===u&&h.dot===h.rule.symbols.length&&h.reference===0&&h.data!==o.fail&&p.push(h)}),p.map(function(h){return h.data})};function a(p){var u=typeof p;if(u==="string")return p;if(u==="object"){if(p.literal)return JSON.stringify(p.literal);if(p instanceof RegExp)return"character matching "+p;if(p.type)return p.type+" token";if(p.test)return"token matching "+String(p.test);throw new Error("Unknown symbol type: "+p)}}function l(p){var u=typeof p;if(u==="string")return p;if(u==="object"){if(p.literal)return JSON.stringify(p.literal);if(p instanceof RegExp)return p.toString();if(p.type)return"%"+p.type;if(p.test)return"<"+String(p.test)+">";throw new Error("Unknown symbol type: "+p)}}return{Parser:o,Grammar:n,Rule:t}})});var aM=Ge((sM,cd)=>{(function(t,e){typeof define=="function"&&define.amd?define([],e):typeof cd=="object"&&cd.exports?cd.exports=e():t.moo=e()})(sM,function(){"use strict";var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,r=typeof new RegExp().sticky=="boolean";function n(N){return N&&e.call(N)==="[object RegExp]"}function i(N){return N&&typeof N=="object"&&!n(N)&&!Array.isArray(N)}function o(N){return N.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function a(N){var O=new RegExp("|"+N);return O.exec("").length-1}function l(N){return"("+N+")"}function p(N){if(!N.length)return"(?!)";var O=N.map(function(I){return"(?:"+I+")"}).join("|");return"(?:"+O+")"}function u(N){if(typeof N=="string")return"(?:"+o(N)+")";if(n(N)){if(N.ignoreCase)throw new Error("RegExp /i flag not allowed");if(N.global)throw new Error("RegExp /g flag is implied");if(N.sticky)throw new Error("RegExp /y flag is implied");if(N.multiline)throw new Error("RegExp /m flag is implied");return N.source}else throw new Error("Not a pattern: "+N)}function d(N,O){return N.length>O?N:Array(O-N.length+1).join(" ")+N}function h(N,O){for(var I=N.length,$=0;;){var q=N.lastIndexOf(`
`,I-1);if(q===-1||($++,I=q,$===O)||I===0)break}var K=$<O?0:I+1;return N.substring(K).split(`
`)}function g(N){for(var O=Object.getOwnPropertyNames(N),I=[],$=0;$<O.length;$++){var q=O[$],K=N[q],Q=[].concat(K);if(q==="include"){for(var te=0;te<Q.length;te++)I.push({include:Q[te]});continue}var me=[];Q.forEach(function(re){i(re)?(me.length&&I.push(_(q,me)),I.push(_(q,re)),me=[]):me.push(re)}),me.length&&I.push(_(q,me))}return I}function x(N){for(var O=[],I=0;I<N.length;I++){var $=N[I];if($.include){for(var q=[].concat($.include),K=0;K<q.length;K++)O.push({include:q[K]});continue}if(!$.type)throw new Error("Rule has no type: "+JSON.stringify($));O.push(_($.type,$))}return O}function _(N,O){if(i(O)||(O={match:O}),O.include)throw new Error("Matching rules cannot also include states");var I={defaultType:N,lineBreaks:!!O.error||!!O.fallback,pop:!1,next:null,push:null,error:!1,fallback:!1,value:null,type:null,shouldThrow:!1};for(var $ in O)t.call(O,$)&&(I[$]=O[$]);if(typeof I.type=="string"&&N!==I.type)throw new Error("Type transform cannot be a string (type '"+I.type+"' for token '"+N+"')");var q=I.match;return I.match=Array.isArray(q)?q:q?[q]:[],I.match.sort(function(K,Q){return n(K)&&n(Q)?0:n(Q)?-1:n(K)?1:Q.length-K.length}),I}function w(N){return Array.isArray(N)?x(N):g(N)}var C=_("error",{lineBreaks:!0,shouldThrow:!0});function M(N,O){for(var I=null,$=Object.create(null),q=!0,K=null,Q=[],te=[],me=0;me<N.length;me++)N[me].fallback&&(q=!1);for(var me=0;me<N.length;me++){var re=N[me];if(re.include)throw new Error("Inheritance is not allowed in stateless lexers");if(re.error||re.fallback){if(I)throw!re.fallback==!I.fallback?new Error("Multiple "+(re.fallback?"fallback":"error")+" rules not allowed (for token '"+re.defaultType+"')"):new Error("fallback and error are mutually exclusive (for token '"+re.defaultType+"')");I=re}var Re=re.match.slice();if(q)for(;Re.length&&typeof Re[0]=="string"&&Re[0].length===1;){var ar=Re.shift();$[ar.charCodeAt(0)]=re}if(re.pop||re.push||re.next){if(!O)throw new Error("State-switching options are not allowed in stateless lexers (for token '"+re.defaultType+"')");if(re.fallback)throw new Error("State-switching options are not allowed on fallback tokens (for token '"+re.defaultType+"')")}if(Re.length!==0){q=!1,Q.push(re);for(var si=0;si<Re.length;si++){var cr=Re[si];if(n(cr)){if(K===null)K=cr.unicode;else if(K!==cr.unicode&&re.fallback===!1)throw new Error("If one rule is /u then all must be")}}var xn=p(Re.map(u)),kr=new RegExp(xn);if(kr.test(""))throw new Error("RegExp matches empty string: "+kr);var Tn=a(xn);if(Tn>0)throw new Error("RegExp has capture groups: "+kr+`
Use (?: \u2026 ) instead`);if(!re.lineBreaks&&kr.test(`
`))throw new Error("Rule should declare lineBreaks: "+kr);te.push(l(xn))}}var Gr=I&&I.fallback,Po=r&&!Gr?"ym":"gm",ai=r||Gr?"":"|";K===!0&&(Po+="u");var ws=new RegExp(p(te)+ai,Po);return{regexp:ws,groups:Q,fast:$,error:I||C}}function U(N){var O=M(w(N));return new de({start:O},"start")}function Z(N,O,I){var $=N&&(N.push||N.next);if($&&!I[$])throw new Error("Missing state '"+$+"' (in token '"+N.defaultType+"' of state '"+O+"')");if(N&&N.pop&&+N.pop!=1)throw new Error("pop must be 1 (in token '"+N.defaultType+"' of state '"+O+"')")}function ne(N,O){var I=N.$all?w(N.$all):[];delete N.$all;var $=Object.getOwnPropertyNames(N);O||(O=$[0]);for(var q=Object.create(null),K=0;K<$.length;K++){var Q=$[K];q[Q]=w(N[Q]).concat(I)}for(var K=0;K<$.length;K++)for(var Q=$[K],te=q[Q],me=Object.create(null),re=0;re<te.length;re++){var Re=te[re];if(Re.include){var ar=[re,1];if(Re.include!==Q&&!me[Re.include]){me[Re.include]=!0;var si=q[Re.include];if(!si)throw new Error("Cannot include nonexistent state '"+Re.include+"' (in state '"+Q+"')");for(var cr=0;cr<si.length;cr++){var xn=si[cr];te.indexOf(xn)===-1&&ar.push(xn)}}te.splice.apply(te,ar),re--}}for(var kr=Object.create(null),K=0;K<$.length;K++){var Q=$[K];kr[Q]=M(q[Q],!0)}for(var K=0;K<$.length;K++){for(var Tn=$[K],Gr=kr[Tn],Po=Gr.groups,re=0;re<Po.length;re++)Z(Po[re],Tn,kr);for(var ai=Object.getOwnPropertyNames(Gr.fast),re=0;re<ai.length;re++)Z(Gr.fast[ai[re]],Tn,kr)}return new de(kr,O)}function ge(N){for(var O=typeof Map<"u",I=O?new Map:Object.create(null),$=Object.getOwnPropertyNames(N),q=0;q<$.length;q++){var K=$[q],Q=N[K],te=Array.isArray(Q)?Q:[Q];te.forEach(function(me){if(typeof me!="string")throw new Error("keyword must be string (in keyword '"+K+"')");O?I.set(me,K):I[me]=K})}return function(me){return O?I.get(me):I[me]}}var de=function(N,O){this.startState=O,this.states=N,this.buffer="",this.stack=[],this.reset()};de.prototype.reset=function(N,O){return this.buffer=N||"",this.index=0,this.line=O?O.line:1,this.col=O?O.col:1,this.queuedToken=O?O.queuedToken:null,this.queuedText=O?O.queuedText:"",this.queuedThrow=O?O.queuedThrow:null,this.setState(O?O.state:this.startState),this.stack=O&&O.stack?O.stack.slice():[],this},de.prototype.save=function(){return{line:this.line,col:this.col,state:this.state,stack:this.stack.slice(),queuedToken:this.queuedToken,queuedText:this.queuedText,queuedThrow:this.queuedThrow}},de.prototype.setState=function(N){if(!(!N||this.state===N)){this.state=N;var O=this.states[N];this.groups=O.groups,this.error=O.error,this.re=O.regexp,this.fast=O.fast}},de.prototype.popState=function(){this.setState(this.stack.pop())},de.prototype.pushState=function(N){this.stack.push(this.state),this.setState(N)};var mt=r?function(N,O){return N.exec(O)}:function(N,O){var I=N.exec(O);return I[0].length===0?null:I};de.prototype._getGroup=function(N){for(var O=this.groups.length,I=0;I<O;I++)if(N[I+1]!==void 0)return this.groups[I];throw new Error("Cannot find token type for matched text")};function It(){return this.value}if(de.prototype.next=function(){var N=this.index;if(this.queuedGroup){var O=this._token(this.queuedGroup,this.queuedText,N);return this.queuedGroup=null,this.queuedText="",O}var I=this.buffer;if(N!==I.length){var Q=this.fast[I.charCodeAt(N)];if(Q)return this._token(Q,I.charAt(N),N);var $=this.re;$.lastIndex=N;var q=mt($,I),K=this.error;if(q==null)return this._token(K,I.slice(N,I.length),N);var Q=this._getGroup(q),te=q[0];return K.fallback&&q.index!==N?(this.queuedGroup=Q,this.queuedText=te,this._token(K,I.slice(N,q.index),N)):this._token(Q,te,N)}},de.prototype._token=function(N,O,I){var $=0;if(N.lineBreaks){var q=/\n/g,K=1;if(O===`
`)$=1;else for(;q.exec(O);)$++,K=q.lastIndex}var Q={type:typeof N.type=="function"&&N.type(O)||N.defaultType,value:typeof N.value=="function"?N.value(O):O,text:O,toString:It,offset:I,lineBreaks:$,line:this.line,col:this.col},te=O.length;if(this.index+=te,this.line+=$,$!==0?this.col=te-K+1:this.col+=te,N.shouldThrow){var me=new Error(this.formatError(Q,"invalid syntax"));throw me}return N.pop?this.popState():N.push?this.pushState(N.push):N.next&&this.setState(N.next),Q},typeof Symbol<"u"&&Symbol.iterator){var ot=function(N){this.lexer=N};ot.prototype.next=function(){var N=this.lexer.next();return{value:N,done:!N}},ot.prototype[Symbol.iterator]=function(){return this},de.prototype[Symbol.iterator]=function(){return new ot(this)}}return de.prototype.formatError=function(N,O){if(N==null)var I=this.buffer.slice(this.index),N={text:I,offset:this.index,lineBreaks:I.indexOf(`
`)===-1?0:1,line:this.line,col:this.col};var $=2,q=Math.max(N.line-$,1),K=N.line+$,Q=String(K).length,te=h(this.buffer,this.line-N.line+$+1).slice(0,5),me=[];me.push(O+" at line "+N.line+" col "+N.col+":"),me.push("");for(var re=0;re<te.length;re++){var Re=te[re],ar=q+re;me.push(d(String(ar),Q)+"  "+Re),ar===N.line&&me.push(d("",Q+N.col+1)+"^")}return me.join(`
`)},de.prototype.clone=function(){return new de(this.states,this.state)},de.prototype.has=function(N){return!0},{compile:U,states:ne,error:Object.freeze({error:!0}),fallback:Object.freeze({fallback:!0}),keywords:ge}})});var Tl=Ge((Zn,XM)=>{"use strict";Object.defineProperty(Zn,"__esModule",{value:!0});function Mn(t){return typeof t=="object"&&!("toString"in t)?Object.prototype.toString.call(t).slice(8,-1):t}var p5=typeof process=="object"&&process.env.NODE_ENV==="production";function an(t,e){if(!t)throw p5?new Error("Invariant failed"):new Error(e())}Zn.invariant=an;var MS=Object.prototype.hasOwnProperty,u5=Array.prototype.splice,f5=Object.prototype.toString;function es(t){return f5.call(t).slice(8,-1)}var Bd=Object.assign||function(t,e){return AS(e).forEach(function(r){MS.call(e,r)&&(t[r]=e[r])}),t},AS=typeof Object.getOwnPropertySymbols=="function"?function(t){return Object.keys(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.keys(t)};function fo(t){return Array.isArray(t)?Bd(t.constructor(t.length),t):es(t)==="Map"?new Map(t):es(t)==="Set"?new Set(t):t&&typeof t=="object"?Bd(Object.create(Object.getPrototypeOf(t)),t):t}var ZM=function(){function t(){this.commands=Bd({},d5),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(e,r){return e===r},this.update.newContext=function(){return new t().update}}return Object.defineProperty(t.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(e){this.update.isEquals=e},enumerable:!0,configurable:!0}),t.prototype.extend=function(e,r){this.commands[e]=r},t.prototype.update=function(e,r){var n=this,i=typeof r=="function"?{$apply:r}:r;Array.isArray(e)&&Array.isArray(i)||an(!Array.isArray(i),function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."}),an(typeof i=="object"&&i!==null,function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the "+("following commands: "+Object.keys(n.commands).join(", ")+".")});var o=e;return AS(i).forEach(function(a){if(MS.call(n.commands,a)){var l=e===o;o=n.commands[a](i[a],o,i,e),l&&n.isEquals(o,e)&&(o=e)}else{var p=es(e)==="Map"?n.update(e.get(a),i[a]):n.update(e[a],i[a]),u=es(o)==="Map"?o.get(a):o[a];(!n.isEquals(p,u)||typeof p>"u"&&!MS.call(e,a))&&(o===e&&(o=fo(e)),es(o)==="Map"?o.set(a,p):o[a]=p)}}),o},t}();Zn.Context=ZM;var d5={$push:function(t,e,r){return KM(e,r,"$push"),t.length?e.concat(t):e},$unshift:function(t,e,r){return KM(e,r,"$unshift"),t.length?t.concat(e):e},$splice:function(t,e,r,n){return m5(e,r),t.forEach(function(i){YM(i),e===n&&i.length&&(e=fo(n)),u5.apply(e,i)}),e},$set:function(t,e,r){return g5(r),t},$toggle:function(t,e){xl(t,"$toggle");var r=t.length?fo(e):e;return t.forEach(function(n){r[n]=!e[n]}),r},$unset:function(t,e,r,n){return xl(t,"$unset"),t.forEach(function(i){Object.hasOwnProperty.call(e,i)&&(e===n&&(e=fo(n)),delete e[i])}),e},$add:function(t,e,r,n){return QM(e,"$add"),xl(t,"$add"),es(e)==="Map"?t.forEach(function(i){var o=i[0],a=i[1];e===n&&e.get(o)!==a&&(e=fo(n)),e.set(o,a)}):t.forEach(function(i){e===n&&!e.has(i)&&(e=fo(n)),e.add(i)}),e},$remove:function(t,e,r,n){return QM(e,"$remove"),xl(t,"$remove"),t.forEach(function(i){e===n&&e.has(i)&&(e=fo(n)),e.delete(i)}),e},$merge:function(t,e,r,n){return y5(e,t),AS(t).forEach(function(i){t[i]!==e[i]&&(e===n&&(e=fo(n)),e[i]=t[i])}),e},$apply:function(t,e){return h5(t),t(e)}},DS=new ZM;Zn.isEquals=DS.update.isEquals;Zn.extend=DS.extend;Zn.default=DS.update;Zn.default.default=XM.exports=Bd(Zn.default,Zn);function KM(t,e,r){an(Array.isArray(t),function(){return"update(): expected target of "+Mn(r)+" to be an array; got "+Mn(t)+"."}),xl(e[r],r)}function xl(t,e){an(Array.isArray(t),function(){return"update(): expected spec of "+Mn(e)+" to be an array; got "+Mn(t)+". Did you forget to wrap your parameter in an array?"})}function m5(t,e){an(Array.isArray(t),function(){return"Expected $splice target to be an array; got "+Mn(t)}),YM(e.$splice)}function YM(t){an(Array.isArray(t),function(){return"update(): expected spec of $splice to be an array of arrays; got "+Mn(t)+". Did you forget to wrap your parameters in an array?"})}function h5(t){an(typeof t=="function",function(){return"update(): expected spec of $apply to be a function; got "+Mn(t)+"."})}function g5(t){an(Object.keys(t).length===1,function(){return"Cannot have more than one key in an object with $set"})}function y5(t,e){an(e&&typeof e=="object",function(){return"update(): $merge expects a spec of type 'object'; got "+Mn(e)}),an(t&&typeof t=="object",function(){return"update(): $merge expects a target of type 'object'; got "+Mn(t)})}function QM(t,e){var r=es(t);an(r==="Map"||r==="Set",function(){return"update(): "+Mn(e)+" expects a target of type Set or Map; got "+Mn(r)})}});var Vv=Ge((Ja,lp)=>{(function(){var t,e="4.17.21",r=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",i="Expected a function",o="Invalid `variable` option passed into `_.template`",a="__lodash_hash_undefined__",l=500,p="__lodash_placeholder__",u=1,d=2,h=4,g=1,x=2,_=1,w=2,C=4,M=8,U=16,Z=32,ne=64,ge=128,de=256,mt=512,It=30,ot="...",N=800,O=16,I=1,$=2,q=3,K=1/0,Q=9007199254740991,te=17976931348623157e292,me=NaN,re=4294967295,Re=re-1,ar=re>>>1,si=[["ary",ge],["bind",_],["bindKey",w],["curry",M],["curryRight",U],["flip",mt],["partial",Z],["partialRight",ne],["rearg",de]],cr="[object Arguments]",xn="[object Array]",kr="[object AsyncFunction]",Tn="[object Boolean]",Gr="[object Date]",Po="[object DOMException]",ai="[object Error]",ws="[object Function]",cw="[object GeneratorFunction]",Sn="[object Map]",hc="[object Number]",mC="[object Null]",ci="[object Object]",lw="[object Promise]",hC="[object Proxy]",gc="[object RegExp]",vn="[object Set]",yc="[object String]",Up="[object Symbol]",gC="[object Undefined]",xc="[object WeakMap]",yC="[object WeakSet]",Tc="[object ArrayBuffer]",_s="[object DataView]",Ay="[object Float32Array]",Dy="[object Float64Array]",Iy="[object Int8Array]",Fy="[object Int16Array]",Cy="[object Int32Array]",Oy="[object Uint8Array]",Ny="[object Uint8ClampedArray]",Ly="[object Uint16Array]",Uy="[object Uint32Array]",xC=/\b__p \+= '';/g,TC=/\b(__p \+=) '' \+/g,SC=/(__e\(.*?\)|\b__t\)) \+\n'';/g,pw=/&(?:amp|lt|gt|quot|#39);/g,uw=/[&<>"']/g,vC=RegExp(pw.source),bC=RegExp(uw.source),wC=/<%-([\s\S]+?)%>/g,_C=/<%([\s\S]+?)%>/g,fw=/<%=([\s\S]+?)%>/g,EC=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,RC=/^\w*$/,kC=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Vy=/[\\^$.*+?()[\]{}|]/g,PC=RegExp(Vy.source),By=/^\s+/,MC=/\s/,AC=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,DC=/\{\n\/\* \[wrapped with (.+)\] \*/,IC=/,? & /,FC=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,CC=/[()=,{}\[\]\/\s]/,OC=/\\(\\)?/g,NC=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,dw=/\w*$/,LC=/^[-+]0x[0-9a-f]+$/i,UC=/^0b[01]+$/i,VC=/^\[object .+?Constructor\]$/,BC=/^0o[0-7]+$/i,HC=/^(?:0|[1-9]\d*)$/,WC=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Vp=/($^)/,$C=/['\n\r\u2028\u2029\\]/g,Bp="\\ud800-\\udfff",jC="\\u0300-\\u036f",qC="\\ufe20-\\ufe2f",zC="\\u20d0-\\u20ff",mw=jC+qC+zC,hw="\\u2700-\\u27bf",gw="a-z\\xdf-\\xf6\\xf8-\\xff",GC="\\xac\\xb1\\xd7\\xf7",KC="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",QC="\\u2000-\\u206f",ZC=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",yw="A-Z\\xc0-\\xd6\\xd8-\\xde",xw="\\ufe0e\\ufe0f",Tw=GC+KC+QC+ZC,Hy="['\u2019]",YC="["+Bp+"]",Sw="["+Tw+"]",Hp="["+mw+"]",vw="\\d+",XC="["+hw+"]",bw="["+gw+"]",ww="[^"+Bp+Tw+vw+hw+gw+yw+"]",Wy="\\ud83c[\\udffb-\\udfff]",JC="(?:"+Hp+"|"+Wy+")",_w="[^"+Bp+"]",$y="(?:\\ud83c[\\udde6-\\uddff]){2}",jy="[\\ud800-\\udbff][\\udc00-\\udfff]",Es="["+yw+"]",Ew="\\u200d",Rw="(?:"+bw+"|"+ww+")",eO="(?:"+Es+"|"+ww+")",kw="(?:"+Hy+"(?:d|ll|m|re|s|t|ve))?",Pw="(?:"+Hy+"(?:D|LL|M|RE|S|T|VE))?",Mw=JC+"?",Aw="["+xw+"]?",tO="(?:"+Ew+"(?:"+[_w,$y,jy].join("|")+")"+Aw+Mw+")*",rO="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",nO="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Dw=Aw+Mw+tO,iO="(?:"+[XC,$y,jy].join("|")+")"+Dw,oO="(?:"+[_w+Hp+"?",Hp,$y,jy,YC].join("|")+")",sO=RegExp(Hy,"g"),aO=RegExp(Hp,"g"),qy=RegExp(Wy+"(?="+Wy+")|"+oO+Dw,"g"),cO=RegExp([Es+"?"+bw+"+"+kw+"(?="+[Sw,Es,"$"].join("|")+")",eO+"+"+Pw+"(?="+[Sw,Es+Rw,"$"].join("|")+")",Es+"?"+Rw+"+"+kw,Es+"+"+Pw,nO,rO,vw,iO].join("|"),"g"),lO=RegExp("["+Ew+Bp+mw+xw+"]"),pO=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,uO=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],fO=-1,Ye={};Ye[Ay]=Ye[Dy]=Ye[Iy]=Ye[Fy]=Ye[Cy]=Ye[Oy]=Ye[Ny]=Ye[Ly]=Ye[Uy]=!0,Ye[cr]=Ye[xn]=Ye[Tc]=Ye[Tn]=Ye[_s]=Ye[Gr]=Ye[ai]=Ye[ws]=Ye[Sn]=Ye[hc]=Ye[ci]=Ye[gc]=Ye[vn]=Ye[yc]=Ye[xc]=!1;var Qe={};Qe[cr]=Qe[xn]=Qe[Tc]=Qe[_s]=Qe[Tn]=Qe[Gr]=Qe[Ay]=Qe[Dy]=Qe[Iy]=Qe[Fy]=Qe[Cy]=Qe[Sn]=Qe[hc]=Qe[ci]=Qe[gc]=Qe[vn]=Qe[yc]=Qe[Up]=Qe[Oy]=Qe[Ny]=Qe[Ly]=Qe[Uy]=!0,Qe[ai]=Qe[ws]=Qe[xc]=!1;var dO={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},mO={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},hO={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},gO={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},yO=parseFloat,xO=parseInt,Iw=typeof global=="object"&&global&&global.Object===Object&&global,TO=typeof self=="object"&&self&&self.Object===Object&&self,_t=Iw||TO||Function("return this")(),zy=typeof Ja=="object"&&Ja&&!Ja.nodeType&&Ja,Mo=zy&&typeof lp=="object"&&lp&&!lp.nodeType&&lp,Fw=Mo&&Mo.exports===zy,Gy=Fw&&Iw.process,Kr=function(){try{var k=Mo&&Mo.require&&Mo.require("util").types;return k||Gy&&Gy.binding&&Gy.binding("util")}catch{}}(),Cw=Kr&&Kr.isArrayBuffer,Ow=Kr&&Kr.isDate,Nw=Kr&&Kr.isMap,Lw=Kr&&Kr.isRegExp,Uw=Kr&&Kr.isSet,Vw=Kr&&Kr.isTypedArray;function Pr(k,V,L){switch(L.length){case 0:return k.call(V);case 1:return k.call(V,L[0]);case 2:return k.call(V,L[0],L[1]);case 3:return k.call(V,L[0],L[1],L[2])}return k.apply(V,L)}function SO(k,V,L,ee){for(var ye=-1,Ve=k==null?0:k.length;++ye<Ve;){var xt=k[ye];V(ee,xt,L(xt),k)}return ee}function Qr(k,V){for(var L=-1,ee=k==null?0:k.length;++L<ee&&V(k[L],L,k)!==!1;);return k}function vO(k,V){for(var L=k==null?0:k.length;L--&&V(k[L],L,k)!==!1;);return k}function Bw(k,V){for(var L=-1,ee=k==null?0:k.length;++L<ee;)if(!V(k[L],L,k))return!1;return!0}function Ui(k,V){for(var L=-1,ee=k==null?0:k.length,ye=0,Ve=[];++L<ee;){var xt=k[L];V(xt,L,k)&&(Ve[ye++]=xt)}return Ve}function Wp(k,V){var L=k==null?0:k.length;return!!L&&Rs(k,V,0)>-1}function Ky(k,V,L){for(var ee=-1,ye=k==null?0:k.length;++ee<ye;)if(L(V,k[ee]))return!0;return!1}function et(k,V){for(var L=-1,ee=k==null?0:k.length,ye=Array(ee);++L<ee;)ye[L]=V(k[L],L,k);return ye}function Vi(k,V){for(var L=-1,ee=V.length,ye=k.length;++L<ee;)k[ye+L]=V[L];return k}function Qy(k,V,L,ee){var ye=-1,Ve=k==null?0:k.length;for(ee&&Ve&&(L=k[++ye]);++ye<Ve;)L=V(L,k[ye],ye,k);return L}function bO(k,V,L,ee){var ye=k==null?0:k.length;for(ee&&ye&&(L=k[--ye]);ye--;)L=V(L,k[ye],ye,k);return L}function Zy(k,V){for(var L=-1,ee=k==null?0:k.length;++L<ee;)if(V(k[L],L,k))return!0;return!1}var wO=Yy("length");function _O(k){return k.split("")}function EO(k){return k.match(FC)||[]}function Hw(k,V,L){var ee;return L(k,function(ye,Ve,xt){if(V(ye,Ve,xt))return ee=Ve,!1}),ee}function $p(k,V,L,ee){for(var ye=k.length,Ve=L+(ee?1:-1);ee?Ve--:++Ve<ye;)if(V(k[Ve],Ve,k))return Ve;return-1}function Rs(k,V,L){return V===V?LO(k,V,L):$p(k,Ww,L)}function RO(k,V,L,ee){for(var ye=L-1,Ve=k.length;++ye<Ve;)if(ee(k[ye],V))return ye;return-1}function Ww(k){return k!==k}function $w(k,V){var L=k==null?0:k.length;return L?Jy(k,V)/L:me}function Yy(k){return function(V){return V==null?t:V[k]}}function Xy(k){return function(V){return k==null?t:k[V]}}function jw(k,V,L,ee,ye){return ye(k,function(Ve,xt,ze){L=ee?(ee=!1,Ve):V(L,Ve,xt,ze)}),L}function kO(k,V){var L=k.length;for(k.sort(V);L--;)k[L]=k[L].value;return k}function Jy(k,V){for(var L,ee=-1,ye=k.length;++ee<ye;){var Ve=V(k[ee]);Ve!==t&&(L=L===t?Ve:L+Ve)}return L}function ex(k,V){for(var L=-1,ee=Array(k);++L<k;)ee[L]=V(L);return ee}function PO(k,V){return et(V,function(L){return[L,k[L]]})}function qw(k){return k&&k.slice(0,Qw(k)+1).replace(By,"")}function Mr(k){return function(V){return k(V)}}function tx(k,V){return et(V,function(L){return k[L]})}function Sc(k,V){return k.has(V)}function zw(k,V){for(var L=-1,ee=k.length;++L<ee&&Rs(V,k[L],0)>-1;);return L}function Gw(k,V){for(var L=k.length;L--&&Rs(V,k[L],0)>-1;);return L}function MO(k,V){for(var L=k.length,ee=0;L--;)k[L]===V&&++ee;return ee}var AO=Xy(dO),DO=Xy(mO);function IO(k){return"\\"+gO[k]}function FO(k,V){return k==null?t:k[V]}function ks(k){return lO.test(k)}function CO(k){return pO.test(k)}function OO(k){for(var V,L=[];!(V=k.next()).done;)L.push(V.value);return L}function rx(k){var V=-1,L=Array(k.size);return k.forEach(function(ee,ye){L[++V]=[ye,ee]}),L}function Kw(k,V){return function(L){return k(V(L))}}function Bi(k,V){for(var L=-1,ee=k.length,ye=0,Ve=[];++L<ee;){var xt=k[L];(xt===V||xt===p)&&(k[L]=p,Ve[ye++]=L)}return Ve}function jp(k){var V=-1,L=Array(k.size);return k.forEach(function(ee){L[++V]=ee}),L}function NO(k){var V=-1,L=Array(k.size);return k.forEach(function(ee){L[++V]=[ee,ee]}),L}function LO(k,V,L){for(var ee=L-1,ye=k.length;++ee<ye;)if(k[ee]===V)return ee;return-1}function UO(k,V,L){for(var ee=L+1;ee--;)if(k[ee]===V)return ee;return ee}function Ps(k){return ks(k)?BO(k):wO(k)}function bn(k){return ks(k)?HO(k):_O(k)}function Qw(k){for(var V=k.length;V--&&MC.test(k.charAt(V)););return V}var VO=Xy(hO);function BO(k){for(var V=qy.lastIndex=0;qy.test(k);)++V;return V}function HO(k){return k.match(qy)||[]}function WO(k){return k.match(cO)||[]}var $O=function k(V){V=V==null?_t:Hi.defaults(_t.Object(),V,Hi.pick(_t,uO));var L=V.Array,ee=V.Date,ye=V.Error,Ve=V.Function,xt=V.Math,ze=V.Object,nx=V.RegExp,jO=V.String,Zr=V.TypeError,qp=L.prototype,qO=Ve.prototype,Ms=ze.prototype,zp=V["__core-js_shared__"],Gp=qO.toString,je=Ms.hasOwnProperty,zO=0,Zw=function(){var s=/[^.]+$/.exec(zp&&zp.keys&&zp.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),Kp=Ms.toString,GO=Gp.call(ze),KO=_t._,QO=nx("^"+Gp.call(je).replace(Vy,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Qp=Fw?V.Buffer:t,Wi=V.Symbol,Zp=V.Uint8Array,Yw=Qp?Qp.allocUnsafe:t,Yp=Kw(ze.getPrototypeOf,ze),Xw=ze.create,Jw=Ms.propertyIsEnumerable,Xp=qp.splice,e_=Wi?Wi.isConcatSpreadable:t,vc=Wi?Wi.iterator:t,Ao=Wi?Wi.toStringTag:t,Jp=function(){try{var s=Oo(ze,"defineProperty");return s({},"",{}),s}catch{}}(),ZO=V.clearTimeout!==_t.clearTimeout&&V.clearTimeout,YO=ee&&ee.now!==_t.Date.now&&ee.now,XO=V.setTimeout!==_t.setTimeout&&V.setTimeout,eu=xt.ceil,tu=xt.floor,ix=ze.getOwnPropertySymbols,JO=Qp?Qp.isBuffer:t,t_=V.isFinite,eN=qp.join,tN=Kw(ze.keys,ze),Tt=xt.max,Vt=xt.min,rN=ee.now,nN=V.parseInt,r_=xt.random,iN=qp.reverse,ox=Oo(V,"DataView"),bc=Oo(V,"Map"),sx=Oo(V,"Promise"),As=Oo(V,"Set"),wc=Oo(V,"WeakMap"),_c=Oo(ze,"create"),ru=wc&&new wc,Ds={},oN=No(ox),sN=No(bc),aN=No(sx),cN=No(As),lN=No(wc),nu=Wi?Wi.prototype:t,Ec=nu?nu.valueOf:t,n_=nu?nu.toString:t;function T(s){if(st(s)&&!xe(s)&&!(s instanceof Ae)){if(s instanceof Yr)return s;if(je.call(s,"__wrapped__"))return i0(s)}return new Yr(s)}var Is=function(){function s(){}return function(c){if(!nt(c))return{};if(Xw)return Xw(c);s.prototype=c;var f=new s;return s.prototype=t,f}}();function iu(){}function Yr(s,c){this.__wrapped__=s,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=t}T.templateSettings={escape:wC,evaluate:_C,interpolate:fw,variable:"",imports:{_:T}},T.prototype=iu.prototype,T.prototype.constructor=T,Yr.prototype=Is(iu.prototype),Yr.prototype.constructor=Yr;function Ae(s){this.__wrapped__=s,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=re,this.__views__=[]}function pN(){var s=new Ae(this.__wrapped__);return s.__actions__=lr(this.__actions__),s.__dir__=this.__dir__,s.__filtered__=this.__filtered__,s.__iteratees__=lr(this.__iteratees__),s.__takeCount__=this.__takeCount__,s.__views__=lr(this.__views__),s}function uN(){if(this.__filtered__){var s=new Ae(this);s.__dir__=-1,s.__filtered__=!0}else s=this.clone(),s.__dir__*=-1;return s}function fN(){var s=this.__wrapped__.value(),c=this.__dir__,f=xe(s),m=c<0,y=f?s.length:0,S=_L(0,y,this.__views__),E=S.start,R=S.end,A=R-E,B=m?R:E-1,H=this.__iteratees__,j=H.length,Y=0,ie=Vt(A,this.__takeCount__);if(!f||!m&&y==A&&ie==A)return k_(s,this.__actions__);var pe=[];e:for(;A--&&Y<ie;){B+=c;for(var Ee=-1,ue=s[B];++Ee<j;){var Pe=H[Ee],Ie=Pe.iteratee,Ir=Pe.type,Yt=Ie(ue);if(Ir==$)ue=Yt;else if(!Yt){if(Ir==I)continue e;break e}}pe[Y++]=ue}return pe}Ae.prototype=Is(iu.prototype),Ae.prototype.constructor=Ae;function Do(s){var c=-1,f=s==null?0:s.length;for(this.clear();++c<f;){var m=s[c];this.set(m[0],m[1])}}function dN(){this.__data__=_c?_c(null):{},this.size=0}function mN(s){var c=this.has(s)&&delete this.__data__[s];return this.size-=c?1:0,c}function hN(s){var c=this.__data__;if(_c){var f=c[s];return f===a?t:f}return je.call(c,s)?c[s]:t}function gN(s){var c=this.__data__;return _c?c[s]!==t:je.call(c,s)}function yN(s,c){var f=this.__data__;return this.size+=this.has(s)?0:1,f[s]=_c&&c===t?a:c,this}Do.prototype.clear=dN,Do.prototype.delete=mN,Do.prototype.get=hN,Do.prototype.has=gN,Do.prototype.set=yN;function li(s){var c=-1,f=s==null?0:s.length;for(this.clear();++c<f;){var m=s[c];this.set(m[0],m[1])}}function xN(){this.__data__=[],this.size=0}function TN(s){var c=this.__data__,f=ou(c,s);if(f<0)return!1;var m=c.length-1;return f==m?c.pop():Xp.call(c,f,1),--this.size,!0}function SN(s){var c=this.__data__,f=ou(c,s);return f<0?t:c[f][1]}function vN(s){return ou(this.__data__,s)>-1}function bN(s,c){var f=this.__data__,m=ou(f,s);return m<0?(++this.size,f.push([s,c])):f[m][1]=c,this}li.prototype.clear=xN,li.prototype.delete=TN,li.prototype.get=SN,li.prototype.has=vN,li.prototype.set=bN;function pi(s){var c=-1,f=s==null?0:s.length;for(this.clear();++c<f;){var m=s[c];this.set(m[0],m[1])}}function wN(){this.size=0,this.__data__={hash:new Do,map:new(bc||li),string:new Do}}function _N(s){var c=yu(this,s).delete(s);return this.size-=c?1:0,c}function EN(s){return yu(this,s).get(s)}function RN(s){return yu(this,s).has(s)}function kN(s,c){var f=yu(this,s),m=f.size;return f.set(s,c),this.size+=f.size==m?0:1,this}pi.prototype.clear=wN,pi.prototype.delete=_N,pi.prototype.get=EN,pi.prototype.has=RN,pi.prototype.set=kN;function Io(s){var c=-1,f=s==null?0:s.length;for(this.__data__=new pi;++c<f;)this.add(s[c])}function PN(s){return this.__data__.set(s,a),this}function MN(s){return this.__data__.has(s)}Io.prototype.add=Io.prototype.push=PN,Io.prototype.has=MN;function wn(s){var c=this.__data__=new li(s);this.size=c.size}function AN(){this.__data__=new li,this.size=0}function DN(s){var c=this.__data__,f=c.delete(s);return this.size=c.size,f}function IN(s){return this.__data__.get(s)}function FN(s){return this.__data__.has(s)}function CN(s,c){var f=this.__data__;if(f instanceof li){var m=f.__data__;if(!bc||m.length<r-1)return m.push([s,c]),this.size=++f.size,this;f=this.__data__=new pi(m)}return f.set(s,c),this.size=f.size,this}wn.prototype.clear=AN,wn.prototype.delete=DN,wn.prototype.get=IN,wn.prototype.has=FN,wn.prototype.set=CN;function i_(s,c){var f=xe(s),m=!f&&Lo(s),y=!f&&!m&&Gi(s),S=!f&&!m&&!y&&Ns(s),E=f||m||y||S,R=E?ex(s.length,jO):[],A=R.length;for(var B in s)(c||je.call(s,B))&&!(E&&(B=="length"||y&&(B=="offset"||B=="parent")||S&&(B=="buffer"||B=="byteLength"||B=="byteOffset")||mi(B,A)))&&R.push(B);return R}function o_(s){var c=s.length;return c?s[yx(0,c-1)]:t}function ON(s,c){return xu(lr(s),Fo(c,0,s.length))}function NN(s){return xu(lr(s))}function ax(s,c,f){(f!==t&&!_n(s[c],f)||f===t&&!(c in s))&&ui(s,c,f)}function Rc(s,c,f){var m=s[c];(!(je.call(s,c)&&_n(m,f))||f===t&&!(c in s))&&ui(s,c,f)}function ou(s,c){for(var f=s.length;f--;)if(_n(s[f][0],c))return f;return-1}function LN(s,c,f,m){return $i(s,function(y,S,E){c(m,y,f(y),E)}),m}function s_(s,c){return s&&Bn(c,Et(c),s)}function UN(s,c){return s&&Bn(c,ur(c),s)}function ui(s,c,f){c=="__proto__"&&Jp?Jp(s,c,{configurable:!0,enumerable:!0,value:f,writable:!0}):s[c]=f}function cx(s,c){for(var f=-1,m=c.length,y=L(m),S=s==null;++f<m;)y[f]=S?t:Wx(s,c[f]);return y}function Fo(s,c,f){return s===s&&(f!==t&&(s=s<=f?s:f),c!==t&&(s=s>=c?s:c)),s}function Xr(s,c,f,m,y,S){var E,R=c&u,A=c&d,B=c&h;if(f&&(E=y?f(s,m,y,S):f(s)),E!==t)return E;if(!nt(s))return s;var H=xe(s);if(H){if(E=RL(s),!R)return lr(s,E)}else{var j=Bt(s),Y=j==ws||j==cw;if(Gi(s))return A_(s,R);if(j==ci||j==cr||Y&&!y){if(E=A||Y?{}:Q_(s),!R)return A?hL(s,UN(E,s)):mL(s,s_(E,s))}else{if(!Qe[j])return y?s:{};E=kL(s,j,R)}}S||(S=new wn);var ie=S.get(s);if(ie)return ie;S.set(s,E),_0(s)?s.forEach(function(ue){E.add(Xr(ue,c,f,ue,s,S))}):b0(s)&&s.forEach(function(ue,Pe){E.set(Pe,Xr(ue,c,f,Pe,s,S))});var pe=B?A?Px:kx:A?ur:Et,Ee=H?t:pe(s);return Qr(Ee||s,function(ue,Pe){Ee&&(Pe=ue,ue=s[Pe]),Rc(E,Pe,Xr(ue,c,f,Pe,s,S))}),E}function VN(s){var c=Et(s);return function(f){return a_(f,s,c)}}function a_(s,c,f){var m=f.length;if(s==null)return!m;for(s=ze(s);m--;){var y=f[m],S=c[y],E=s[y];if(E===t&&!(y in s)||!S(E))return!1}return!0}function c_(s,c,f){if(typeof s!="function")throw new Zr(i);return Fc(function(){s.apply(t,f)},c)}function kc(s,c,f,m){var y=-1,S=Wp,E=!0,R=s.length,A=[],B=c.length;if(!R)return A;f&&(c=et(c,Mr(f))),m?(S=Ky,E=!1):c.length>=r&&(S=Sc,E=!1,c=new Io(c));e:for(;++y<R;){var H=s[y],j=f==null?H:f(H);if(H=m||H!==0?H:0,E&&j===j){for(var Y=B;Y--;)if(c[Y]===j)continue e;A.push(H)}else S(c,j,m)||A.push(H)}return A}var $i=O_(Vn),l_=O_(px,!0);function BN(s,c){var f=!0;return $i(s,function(m,y,S){return f=!!c(m,y,S),f}),f}function su(s,c,f){for(var m=-1,y=s.length;++m<y;){var S=s[m],E=c(S);if(E!=null&&(R===t?E===E&&!Dr(E):f(E,R)))var R=E,A=S}return A}function HN(s,c,f,m){var y=s.length;for(f=be(f),f<0&&(f=-f>y?0:y+f),m=m===t||m>y?y:be(m),m<0&&(m+=y),m=f>m?0:R0(m);f<m;)s[f++]=c;return s}function p_(s,c){var f=[];return $i(s,function(m,y,S){c(m,y,S)&&f.push(m)}),f}function Ft(s,c,f,m,y){var S=-1,E=s.length;for(f||(f=ML),y||(y=[]);++S<E;){var R=s[S];c>0&&f(R)?c>1?Ft(R,c-1,f,m,y):Vi(y,R):m||(y[y.length]=R)}return y}var lx=N_(),u_=N_(!0);function Vn(s,c){return s&&lx(s,c,Et)}function px(s,c){return s&&u_(s,c,Et)}function au(s,c){return Ui(c,function(f){return hi(s[f])})}function Co(s,c){c=qi(c,s);for(var f=0,m=c.length;s!=null&&f<m;)s=s[Hn(c[f++])];return f&&f==m?s:t}function f_(s,c,f){var m=c(s);return xe(s)?m:Vi(m,f(s))}function Qt(s){return s==null?s===t?gC:mC:Ao&&Ao in ze(s)?wL(s):NL(s)}function ux(s,c){return s>c}function WN(s,c){return s!=null&&je.call(s,c)}function $N(s,c){return s!=null&&c in ze(s)}function jN(s,c,f){return s>=Vt(c,f)&&s<Tt(c,f)}function fx(s,c,f){for(var m=f?Ky:Wp,y=s[0].length,S=s.length,E=S,R=L(S),A=1/0,B=[];E--;){var H=s[E];E&&c&&(H=et(H,Mr(c))),A=Vt(H.length,A),R[E]=!f&&(c||y>=120&&H.length>=120)?new Io(E&&H):t}H=s[0];var j=-1,Y=R[0];e:for(;++j<y&&B.length<A;){var ie=H[j],pe=c?c(ie):ie;if(ie=f||ie!==0?ie:0,!(Y?Sc(Y,pe):m(B,pe,f))){for(E=S;--E;){var Ee=R[E];if(!(Ee?Sc(Ee,pe):m(s[E],pe,f)))continue e}Y&&Y.push(pe),B.push(ie)}}return B}function qN(s,c,f,m){return Vn(s,function(y,S,E){c(m,f(y),S,E)}),m}function Pc(s,c,f){c=qi(c,s),s=J_(s,c);var m=s==null?s:s[Hn(en(c))];return m==null?t:Pr(m,s,f)}function d_(s){return st(s)&&Qt(s)==cr}function zN(s){return st(s)&&Qt(s)==Tc}function GN(s){return st(s)&&Qt(s)==Gr}function Mc(s,c,f,m,y){return s===c?!0:s==null||c==null||!st(s)&&!st(c)?s!==s&&c!==c:KN(s,c,f,m,Mc,y)}function KN(s,c,f,m,y,S){var E=xe(s),R=xe(c),A=E?xn:Bt(s),B=R?xn:Bt(c);A=A==cr?ci:A,B=B==cr?ci:B;var H=A==ci,j=B==ci,Y=A==B;if(Y&&Gi(s)){if(!Gi(c))return!1;E=!0,H=!1}if(Y&&!H)return S||(S=new wn),E||Ns(s)?z_(s,c,f,m,y,S):vL(s,c,A,f,m,y,S);if(!(f&g)){var ie=H&&je.call(s,"__wrapped__"),pe=j&&je.call(c,"__wrapped__");if(ie||pe){var Ee=ie?s.value():s,ue=pe?c.value():c;return S||(S=new wn),y(Ee,ue,f,m,S)}}return Y?(S||(S=new wn),bL(s,c,f,m,y,S)):!1}function QN(s){return st(s)&&Bt(s)==Sn}function dx(s,c,f,m){var y=f.length,S=y,E=!m;if(s==null)return!S;for(s=ze(s);y--;){var R=f[y];if(E&&R[2]?R[1]!==s[R[0]]:!(R[0]in s))return!1}for(;++y<S;){R=f[y];var A=R[0],B=s[A],H=R[1];if(E&&R[2]){if(B===t&&!(A in s))return!1}else{var j=new wn;if(m)var Y=m(B,H,A,s,c,j);if(!(Y===t?Mc(H,B,g|x,m,j):Y))return!1}}return!0}function m_(s){if(!nt(s)||DL(s))return!1;var c=hi(s)?QO:VC;return c.test(No(s))}function ZN(s){return st(s)&&Qt(s)==gc}function YN(s){return st(s)&&Bt(s)==vn}function XN(s){return st(s)&&_u(s.length)&&!!Ye[Qt(s)]}function h_(s){return typeof s=="function"?s:s==null?fr:typeof s=="object"?xe(s)?x_(s[0],s[1]):y_(s):L0(s)}function mx(s){if(!Ic(s))return tN(s);var c=[];for(var f in ze(s))je.call(s,f)&&f!="constructor"&&c.push(f);return c}function JN(s){if(!nt(s))return OL(s);var c=Ic(s),f=[];for(var m in s)m=="constructor"&&(c||!je.call(s,m))||f.push(m);return f}function hx(s,c){return s<c}function g_(s,c){var f=-1,m=pr(s)?L(s.length):[];return $i(s,function(y,S,E){m[++f]=c(y,S,E)}),m}function y_(s){var c=Ax(s);return c.length==1&&c[0][2]?Y_(c[0][0],c[0][1]):function(f){return f===s||dx(f,s,c)}}function x_(s,c){return Ix(s)&&Z_(c)?Y_(Hn(s),c):function(f){var m=Wx(f,s);return m===t&&m===c?$x(f,s):Mc(c,m,g|x)}}function cu(s,c,f,m,y){s!==c&&lx(c,function(S,E){if(y||(y=new wn),nt(S))eL(s,c,E,f,cu,m,y);else{var R=m?m(Cx(s,E),S,E+"",s,c,y):t;R===t&&(R=S),ax(s,E,R)}},ur)}function eL(s,c,f,m,y,S,E){var R=Cx(s,f),A=Cx(c,f),B=E.get(A);if(B){ax(s,f,B);return}var H=S?S(R,A,f+"",s,c,E):t,j=H===t;if(j){var Y=xe(A),ie=!Y&&Gi(A),pe=!Y&&!ie&&Ns(A);H=A,Y||ie||pe?xe(R)?H=R:ct(R)?H=lr(R):ie?(j=!1,H=A_(A,!0)):pe?(j=!1,H=D_(A,!0)):H=[]:Cc(A)||Lo(A)?(H=R,Lo(R)?H=k0(R):(!nt(R)||hi(R))&&(H=Q_(A))):j=!1}j&&(E.set(A,H),y(H,A,m,S,E),E.delete(A)),ax(s,f,H)}function T_(s,c){var f=s.length;if(f)return c+=c<0?f:0,mi(c,f)?s[c]:t}function S_(s,c,f){c.length?c=et(c,function(S){return xe(S)?function(E){return Co(E,S.length===1?S[0]:S)}:S}):c=[fr];var m=-1;c=et(c,Mr(le()));var y=g_(s,function(S,E,R){var A=et(c,function(B){return B(S)});return{criteria:A,index:++m,value:S}});return kO(y,function(S,E){return dL(S,E,f)})}function tL(s,c){return v_(s,c,function(f,m){return $x(s,m)})}function v_(s,c,f){for(var m=-1,y=c.length,S={};++m<y;){var E=c[m],R=Co(s,E);f(R,E)&&Ac(S,qi(E,s),R)}return S}function rL(s){return function(c){return Co(c,s)}}function gx(s,c,f,m){var y=m?RO:Rs,S=-1,E=c.length,R=s;for(s===c&&(c=lr(c)),f&&(R=et(s,Mr(f)));++S<E;)for(var A=0,B=c[S],H=f?f(B):B;(A=y(R,H,A,m))>-1;)R!==s&&Xp.call(R,A,1),Xp.call(s,A,1);return s}function b_(s,c){for(var f=s?c.length:0,m=f-1;f--;){var y=c[f];if(f==m||y!==S){var S=y;mi(y)?Xp.call(s,y,1):Sx(s,y)}}return s}function yx(s,c){return s+tu(r_()*(c-s+1))}function nL(s,c,f,m){for(var y=-1,S=Tt(eu((c-s)/(f||1)),0),E=L(S);S--;)E[m?S:++y]=s,s+=f;return E}function xx(s,c){var f="";if(!s||c<1||c>Q)return f;do c%2&&(f+=s),c=tu(c/2),c&&(s+=s);while(c);return f}function ke(s,c){return Ox(X_(s,c,fr),s+"")}function iL(s){return o_(Ls(s))}function oL(s,c){var f=Ls(s);return xu(f,Fo(c,0,f.length))}function Ac(s,c,f,m){if(!nt(s))return s;c=qi(c,s);for(var y=-1,S=c.length,E=S-1,R=s;R!=null&&++y<S;){var A=Hn(c[y]),B=f;if(A==="__proto__"||A==="constructor"||A==="prototype")return s;if(y!=E){var H=R[A];B=m?m(H,A,R):t,B===t&&(B=nt(H)?H:mi(c[y+1])?[]:{})}Rc(R,A,B),R=R[A]}return s}var w_=ru?function(s,c){return ru.set(s,c),s}:fr,sL=Jp?function(s,c){return Jp(s,"toString",{configurable:!0,enumerable:!1,value:qx(c),writable:!0})}:fr;function aL(s){return xu(Ls(s))}function Jr(s,c,f){var m=-1,y=s.length;c<0&&(c=-c>y?0:y+c),f=f>y?y:f,f<0&&(f+=y),y=c>f?0:f-c>>>0,c>>>=0;for(var S=L(y);++m<y;)S[m]=s[m+c];return S}function cL(s,c){var f;return $i(s,function(m,y,S){return f=c(m,y,S),!f}),!!f}function lu(s,c,f){var m=0,y=s==null?m:s.length;if(typeof c=="number"&&c===c&&y<=ar){for(;m<y;){var S=m+y>>>1,E=s[S];E!==null&&!Dr(E)&&(f?E<=c:E<c)?m=S+1:y=S}return y}return Tx(s,c,fr,f)}function Tx(s,c,f,m){var y=0,S=s==null?0:s.length;if(S===0)return 0;c=f(c);for(var E=c!==c,R=c===null,A=Dr(c),B=c===t;y<S;){var H=tu((y+S)/2),j=f(s[H]),Y=j!==t,ie=j===null,pe=j===j,Ee=Dr(j);if(E)var ue=m||pe;else B?ue=pe&&(m||Y):R?ue=pe&&Y&&(m||!ie):A?ue=pe&&Y&&!ie&&(m||!Ee):ie||Ee?ue=!1:ue=m?j<=c:j<c;ue?y=H+1:S=H}return Vt(S,Re)}function __(s,c){for(var f=-1,m=s.length,y=0,S=[];++f<m;){var E=s[f],R=c?c(E):E;if(!f||!_n(R,A)){var A=R;S[y++]=E===0?0:E}}return S}function E_(s){return typeof s=="number"?s:Dr(s)?me:+s}function Ar(s){if(typeof s=="string")return s;if(xe(s))return et(s,Ar)+"";if(Dr(s))return n_?n_.call(s):"";var c=s+"";return c=="0"&&1/s==-K?"-0":c}function ji(s,c,f){var m=-1,y=Wp,S=s.length,E=!0,R=[],A=R;if(f)E=!1,y=Ky;else if(S>=r){var B=c?null:TL(s);if(B)return jp(B);E=!1,y=Sc,A=new Io}else A=c?[]:R;e:for(;++m<S;){var H=s[m],j=c?c(H):H;if(H=f||H!==0?H:0,E&&j===j){for(var Y=A.length;Y--;)if(A[Y]===j)continue e;c&&A.push(j),R.push(H)}else y(A,j,f)||(A!==R&&A.push(j),R.push(H))}return R}function Sx(s,c){return c=qi(c,s),s=J_(s,c),s==null||delete s[Hn(en(c))]}function R_(s,c,f,m){return Ac(s,c,f(Co(s,c)),m)}function pu(s,c,f,m){for(var y=s.length,S=m?y:-1;(m?S--:++S<y)&&c(s[S],S,s););return f?Jr(s,m?0:S,m?S+1:y):Jr(s,m?S+1:0,m?y:S)}function k_(s,c){var f=s;return f instanceof Ae&&(f=f.value()),Qy(c,function(m,y){return y.func.apply(y.thisArg,Vi([m],y.args))},f)}function vx(s,c,f){var m=s.length;if(m<2)return m?ji(s[0]):[];for(var y=-1,S=L(m);++y<m;)for(var E=s[y],R=-1;++R<m;)R!=y&&(S[y]=kc(S[y]||E,s[R],c,f));return ji(Ft(S,1),c,f)}function P_(s,c,f){for(var m=-1,y=s.length,S=c.length,E={};++m<y;){var R=m<S?c[m]:t;f(E,s[m],R)}return E}function bx(s){return ct(s)?s:[]}function wx(s){return typeof s=="function"?s:fr}function qi(s,c){return xe(s)?s:Ix(s,c)?[s]:n0(We(s))}var lL=ke;function zi(s,c,f){var m=s.length;return f=f===t?m:f,!c&&f>=m?s:Jr(s,c,f)}var M_=ZO||function(s){return _t.clearTimeout(s)};function A_(s,c){if(c)return s.slice();var f=s.length,m=Yw?Yw(f):new s.constructor(f);return s.copy(m),m}function _x(s){var c=new s.constructor(s.byteLength);return new Zp(c).set(new Zp(s)),c}function pL(s,c){var f=c?_x(s.buffer):s.buffer;return new s.constructor(f,s.byteOffset,s.byteLength)}function uL(s){var c=new s.constructor(s.source,dw.exec(s));return c.lastIndex=s.lastIndex,c}function fL(s){return Ec?ze(Ec.call(s)):{}}function D_(s,c){var f=c?_x(s.buffer):s.buffer;return new s.constructor(f,s.byteOffset,s.length)}function I_(s,c){if(s!==c){var f=s!==t,m=s===null,y=s===s,S=Dr(s),E=c!==t,R=c===null,A=c===c,B=Dr(c);if(!R&&!B&&!S&&s>c||S&&E&&A&&!R&&!B||m&&E&&A||!f&&A||!y)return 1;if(!m&&!S&&!B&&s<c||B&&f&&y&&!m&&!S||R&&f&&y||!E&&y||!A)return-1}return 0}function dL(s,c,f){for(var m=-1,y=s.criteria,S=c.criteria,E=y.length,R=f.length;++m<E;){var A=I_(y[m],S[m]);if(A){if(m>=R)return A;var B=f[m];return A*(B=="desc"?-1:1)}}return s.index-c.index}function F_(s,c,f,m){for(var y=-1,S=s.length,E=f.length,R=-1,A=c.length,B=Tt(S-E,0),H=L(A+B),j=!m;++R<A;)H[R]=c[R];for(;++y<E;)(j||y<S)&&(H[f[y]]=s[y]);for(;B--;)H[R++]=s[y++];return H}function C_(s,c,f,m){for(var y=-1,S=s.length,E=-1,R=f.length,A=-1,B=c.length,H=Tt(S-R,0),j=L(H+B),Y=!m;++y<H;)j[y]=s[y];for(var ie=y;++A<B;)j[ie+A]=c[A];for(;++E<R;)(Y||y<S)&&(j[ie+f[E]]=s[y++]);return j}function lr(s,c){var f=-1,m=s.length;for(c||(c=L(m));++f<m;)c[f]=s[f];return c}function Bn(s,c,f,m){var y=!f;f||(f={});for(var S=-1,E=c.length;++S<E;){var R=c[S],A=m?m(f[R],s[R],R,f,s):t;A===t&&(A=s[R]),y?ui(f,R,A):Rc(f,R,A)}return f}function mL(s,c){return Bn(s,Dx(s),c)}function hL(s,c){return Bn(s,G_(s),c)}function uu(s,c){return function(f,m){var y=xe(f)?SO:LN,S=c?c():{};return y(f,s,le(m,2),S)}}function Fs(s){return ke(function(c,f){var m=-1,y=f.length,S=y>1?f[y-1]:t,E=y>2?f[2]:t;for(S=s.length>3&&typeof S=="function"?(y--,S):t,E&&Zt(f[0],f[1],E)&&(S=y<3?t:S,y=1),c=ze(c);++m<y;){var R=f[m];R&&s(c,R,m,S)}return c})}function O_(s,c){return function(f,m){if(f==null)return f;if(!pr(f))return s(f,m);for(var y=f.length,S=c?y:-1,E=ze(f);(c?S--:++S<y)&&m(E[S],S,E)!==!1;);return f}}function N_(s){return function(c,f,m){for(var y=-1,S=ze(c),E=m(c),R=E.length;R--;){var A=E[s?R:++y];if(f(S[A],A,S)===!1)break}return c}}function gL(s,c,f){var m=c&_,y=Dc(s);function S(){var E=this&&this!==_t&&this instanceof S?y:s;return E.apply(m?f:this,arguments)}return S}function L_(s){return function(c){c=We(c);var f=ks(c)?bn(c):t,m=f?f[0]:c.charAt(0),y=f?zi(f,1).join(""):c.slice(1);return m[s]()+y}}function Cs(s){return function(c){return Qy(O0(C0(c).replace(sO,"")),s,"")}}function Dc(s){return function(){var c=arguments;switch(c.length){case 0:return new s;case 1:return new s(c[0]);case 2:return new s(c[0],c[1]);case 3:return new s(c[0],c[1],c[2]);case 4:return new s(c[0],c[1],c[2],c[3]);case 5:return new s(c[0],c[1],c[2],c[3],c[4]);case 6:return new s(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new s(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var f=Is(s.prototype),m=s.apply(f,c);return nt(m)?m:f}}function yL(s,c,f){var m=Dc(s);function y(){for(var S=arguments.length,E=L(S),R=S,A=Os(y);R--;)E[R]=arguments[R];var B=S<3&&E[0]!==A&&E[S-1]!==A?[]:Bi(E,A);if(S-=B.length,S<f)return W_(s,c,fu,y.placeholder,t,E,B,t,t,f-S);var H=this&&this!==_t&&this instanceof y?m:s;return Pr(H,this,E)}return y}function U_(s){return function(c,f,m){var y=ze(c);if(!pr(c)){var S=le(f,3);c=Et(c),f=function(R){return S(y[R],R,y)}}var E=s(c,f,m);return E>-1?y[S?c[E]:E]:t}}function V_(s){return di(function(c){var f=c.length,m=f,y=Yr.prototype.thru;for(s&&c.reverse();m--;){var S=c[m];if(typeof S!="function")throw new Zr(i);if(y&&!E&&gu(S)=="wrapper")var E=new Yr([],!0)}for(m=E?m:f;++m<f;){S=c[m];var R=gu(S),A=R=="wrapper"?Mx(S):t;A&&Fx(A[0])&&A[1]==(ge|M|Z|de)&&!A[4].length&&A[9]==1?E=E[gu(A[0])].apply(E,A[3]):E=S.length==1&&Fx(S)?E[R]():E.thru(S)}return function(){var B=arguments,H=B[0];if(E&&B.length==1&&xe(H))return E.plant(H).value();for(var j=0,Y=f?c[j].apply(this,B):H;++j<f;)Y=c[j].call(this,Y);return Y}})}function fu(s,c,f,m,y,S,E,R,A,B){var H=c&ge,j=c&_,Y=c&w,ie=c&(M|U),pe=c&mt,Ee=Y?t:Dc(s);function ue(){for(var Pe=arguments.length,Ie=L(Pe),Ir=Pe;Ir--;)Ie[Ir]=arguments[Ir];if(ie)var Yt=Os(ue),Fr=MO(Ie,Yt);if(m&&(Ie=F_(Ie,m,y,ie)),S&&(Ie=C_(Ie,S,E,ie)),Pe-=Fr,ie&&Pe<B){var lt=Bi(Ie,Yt);return W_(s,c,fu,ue.placeholder,f,Ie,lt,R,A,B-Pe)}var En=j?f:this,yi=Y?En[s]:s;return Pe=Ie.length,R?Ie=LL(Ie,R):pe&&Pe>1&&Ie.reverse(),H&&A<Pe&&(Ie.length=A),this&&this!==_t&&this instanceof ue&&(yi=Ee||Dc(yi)),yi.apply(En,Ie)}return ue}function B_(s,c){return function(f,m){return qN(f,s,c(m),{})}}function du(s,c){return function(f,m){var y;if(f===t&&m===t)return c;if(f!==t&&(y=f),m!==t){if(y===t)return m;typeof f=="string"||typeof m=="string"?(f=Ar(f),m=Ar(m)):(f=E_(f),m=E_(m)),y=s(f,m)}return y}}function Ex(s){return di(function(c){return c=et(c,Mr(le())),ke(function(f){var m=this;return s(c,function(y){return Pr(y,m,f)})})})}function mu(s,c){c=c===t?" ":Ar(c);var f=c.length;if(f<2)return f?xx(c,s):c;var m=xx(c,eu(s/Ps(c)));return ks(c)?zi(bn(m),0,s).join(""):m.slice(0,s)}function xL(s,c,f,m){var y=c&_,S=Dc(s);function E(){for(var R=-1,A=arguments.length,B=-1,H=m.length,j=L(H+A),Y=this&&this!==_t&&this instanceof E?S:s;++B<H;)j[B]=m[B];for(;A--;)j[B++]=arguments[++R];return Pr(Y,y?f:this,j)}return E}function H_(s){return function(c,f,m){return m&&typeof m!="number"&&Zt(c,f,m)&&(f=m=t),c=gi(c),f===t?(f=c,c=0):f=gi(f),m=m===t?c<f?1:-1:gi(m),nL(c,f,m,s)}}function hu(s){return function(c,f){return typeof c=="string"&&typeof f=="string"||(c=tn(c),f=tn(f)),s(c,f)}}function W_(s,c,f,m,y,S,E,R,A,B){var H=c&M,j=H?E:t,Y=H?t:E,ie=H?S:t,pe=H?t:S;c|=H?Z:ne,c&=~(H?ne:Z),c&C||(c&=~(_|w));var Ee=[s,c,y,ie,j,pe,Y,R,A,B],ue=f.apply(t,Ee);return Fx(s)&&e0(ue,Ee),ue.placeholder=m,t0(ue,s,c)}function Rx(s){var c=xt[s];return function(f,m){if(f=tn(f),m=m==null?0:Vt(be(m),292),m&&t_(f)){var y=(We(f)+"e").split("e"),S=c(y[0]+"e"+(+y[1]+m));return y=(We(S)+"e").split("e"),+(y[0]+"e"+(+y[1]-m))}return c(f)}}var TL=As&&1/jp(new As([,-0]))[1]==K?function(s){return new As(s)}:Kx;function $_(s){return function(c){var f=Bt(c);return f==Sn?rx(c):f==vn?NO(c):PO(c,s(c))}}function fi(s,c,f,m,y,S,E,R){var A=c&w;if(!A&&typeof s!="function")throw new Zr(i);var B=m?m.length:0;if(B||(c&=~(Z|ne),m=y=t),E=E===t?E:Tt(be(E),0),R=R===t?R:be(R),B-=y?y.length:0,c&ne){var H=m,j=y;m=y=t}var Y=A?t:Mx(s),ie=[s,c,f,m,y,H,j,S,E,R];if(Y&&CL(ie,Y),s=ie[0],c=ie[1],f=ie[2],m=ie[3],y=ie[4],R=ie[9]=ie[9]===t?A?0:s.length:Tt(ie[9]-B,0),!R&&c&(M|U)&&(c&=~(M|U)),!c||c==_)var pe=gL(s,c,f);else c==M||c==U?pe=yL(s,c,R):(c==Z||c==(_|Z))&&!y.length?pe=xL(s,c,f,m):pe=fu.apply(t,ie);var Ee=Y?w_:e0;return t0(Ee(pe,ie),s,c)}function j_(s,c,f,m){return s===t||_n(s,Ms[f])&&!je.call(m,f)?c:s}function q_(s,c,f,m,y,S){return nt(s)&&nt(c)&&(S.set(c,s),cu(s,c,t,q_,S),S.delete(c)),s}function SL(s){return Cc(s)?t:s}function z_(s,c,f,m,y,S){var E=f&g,R=s.length,A=c.length;if(R!=A&&!(E&&A>R))return!1;var B=S.get(s),H=S.get(c);if(B&&H)return B==c&&H==s;var j=-1,Y=!0,ie=f&x?new Io:t;for(S.set(s,c),S.set(c,s);++j<R;){var pe=s[j],Ee=c[j];if(m)var ue=E?m(Ee,pe,j,c,s,S):m(pe,Ee,j,s,c,S);if(ue!==t){if(ue)continue;Y=!1;break}if(ie){if(!Zy(c,function(Pe,Ie){if(!Sc(ie,Ie)&&(pe===Pe||y(pe,Pe,f,m,S)))return ie.push(Ie)})){Y=!1;break}}else if(!(pe===Ee||y(pe,Ee,f,m,S))){Y=!1;break}}return S.delete(s),S.delete(c),Y}function vL(s,c,f,m,y,S,E){switch(f){case _s:if(s.byteLength!=c.byteLength||s.byteOffset!=c.byteOffset)return!1;s=s.buffer,c=c.buffer;case Tc:return!(s.byteLength!=c.byteLength||!S(new Zp(s),new Zp(c)));case Tn:case Gr:case hc:return _n(+s,+c);case ai:return s.name==c.name&&s.message==c.message;case gc:case yc:return s==c+"";case Sn:var R=rx;case vn:var A=m&g;if(R||(R=jp),s.size!=c.size&&!A)return!1;var B=E.get(s);if(B)return B==c;m|=x,E.set(s,c);var H=z_(R(s),R(c),m,y,S,E);return E.delete(s),H;case Up:if(Ec)return Ec.call(s)==Ec.call(c)}return!1}function bL(s,c,f,m,y,S){var E=f&g,R=kx(s),A=R.length,B=kx(c),H=B.length;if(A!=H&&!E)return!1;for(var j=A;j--;){var Y=R[j];if(!(E?Y in c:je.call(c,Y)))return!1}var ie=S.get(s),pe=S.get(c);if(ie&&pe)return ie==c&&pe==s;var Ee=!0;S.set(s,c),S.set(c,s);for(var ue=E;++j<A;){Y=R[j];var Pe=s[Y],Ie=c[Y];if(m)var Ir=E?m(Ie,Pe,Y,c,s,S):m(Pe,Ie,Y,s,c,S);if(!(Ir===t?Pe===Ie||y(Pe,Ie,f,m,S):Ir)){Ee=!1;break}ue||(ue=Y=="constructor")}if(Ee&&!ue){var Yt=s.constructor,Fr=c.constructor;Yt!=Fr&&"constructor"in s&&"constructor"in c&&!(typeof Yt=="function"&&Yt instanceof Yt&&typeof Fr=="function"&&Fr instanceof Fr)&&(Ee=!1)}return S.delete(s),S.delete(c),Ee}function di(s){return Ox(X_(s,t,a0),s+"")}function kx(s){return f_(s,Et,Dx)}function Px(s){return f_(s,ur,G_)}var Mx=ru?function(s){return ru.get(s)}:Kx;function gu(s){for(var c=s.name+"",f=Ds[c],m=je.call(Ds,c)?f.length:0;m--;){var y=f[m],S=y.func;if(S==null||S==s)return y.name}return c}function Os(s){var c=je.call(T,"placeholder")?T:s;return c.placeholder}function le(){var s=T.iteratee||zx;return s=s===zx?h_:s,arguments.length?s(arguments[0],arguments[1]):s}function yu(s,c){var f=s.__data__;return AL(c)?f[typeof c=="string"?"string":"hash"]:f.map}function Ax(s){for(var c=Et(s),f=c.length;f--;){var m=c[f],y=s[m];c[f]=[m,y,Z_(y)]}return c}function Oo(s,c){var f=FO(s,c);return m_(f)?f:t}function wL(s){var c=je.call(s,Ao),f=s[Ao];try{s[Ao]=t;var m=!0}catch{}var y=Kp.call(s);return m&&(c?s[Ao]=f:delete s[Ao]),y}var Dx=ix?function(s){return s==null?[]:(s=ze(s),Ui(ix(s),function(c){return Jw.call(s,c)}))}:Qx,G_=ix?function(s){for(var c=[];s;)Vi(c,Dx(s)),s=Yp(s);return c}:Qx,Bt=Qt;(ox&&Bt(new ox(new ArrayBuffer(1)))!=_s||bc&&Bt(new bc)!=Sn||sx&&Bt(sx.resolve())!=lw||As&&Bt(new As)!=vn||wc&&Bt(new wc)!=xc)&&(Bt=function(s){var c=Qt(s),f=c==ci?s.constructor:t,m=f?No(f):"";if(m)switch(m){case oN:return _s;case sN:return Sn;case aN:return lw;case cN:return vn;case lN:return xc}return c});function _L(s,c,f){for(var m=-1,y=f.length;++m<y;){var S=f[m],E=S.size;switch(S.type){case"drop":s+=E;break;case"dropRight":c-=E;break;case"take":c=Vt(c,s+E);break;case"takeRight":s=Tt(s,c-E);break}}return{start:s,end:c}}function EL(s){var c=s.match(DC);return c?c[1].split(IC):[]}function K_(s,c,f){c=qi(c,s);for(var m=-1,y=c.length,S=!1;++m<y;){var E=Hn(c[m]);if(!(S=s!=null&&f(s,E)))break;s=s[E]}return S||++m!=y?S:(y=s==null?0:s.length,!!y&&_u(y)&&mi(E,y)&&(xe(s)||Lo(s)))}function RL(s){var c=s.length,f=new s.constructor(c);return c&&typeof s[0]=="string"&&je.call(s,"index")&&(f.index=s.index,f.input=s.input),f}function Q_(s){return typeof s.constructor=="function"&&!Ic(s)?Is(Yp(s)):{}}function kL(s,c,f){var m=s.constructor;switch(c){case Tc:return _x(s);case Tn:case Gr:return new m(+s);case _s:return pL(s,f);case Ay:case Dy:case Iy:case Fy:case Cy:case Oy:case Ny:case Ly:case Uy:return D_(s,f);case Sn:return new m;case hc:case yc:return new m(s);case gc:return uL(s);case vn:return new m;case Up:return fL(s)}}function PL(s,c){var f=c.length;if(!f)return s;var m=f-1;return c[m]=(f>1?"& ":"")+c[m],c=c.join(f>2?", ":" "),s.replace(AC,`{
/* [wrapped with `+c+`] */
`)}function ML(s){return xe(s)||Lo(s)||!!(e_&&s&&s[e_])}function mi(s,c){var f=typeof s;return c=c??Q,!!c&&(f=="number"||f!="symbol"&&HC.test(s))&&s>-1&&s%1==0&&s<c}function Zt(s,c,f){if(!nt(f))return!1;var m=typeof c;return(m=="number"?pr(f)&&mi(c,f.length):m=="string"&&c in f)?_n(f[c],s):!1}function Ix(s,c){if(xe(s))return!1;var f=typeof s;return f=="number"||f=="symbol"||f=="boolean"||s==null||Dr(s)?!0:RC.test(s)||!EC.test(s)||c!=null&&s in ze(c)}function AL(s){var c=typeof s;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?s!=="__proto__":s===null}function Fx(s){var c=gu(s),f=T[c];if(typeof f!="function"||!(c in Ae.prototype))return!1;if(s===f)return!0;var m=Mx(f);return!!m&&s===m[0]}function DL(s){return!!Zw&&Zw in s}var IL=zp?hi:Zx;function Ic(s){var c=s&&s.constructor,f=typeof c=="function"&&c.prototype||Ms;return s===f}function Z_(s){return s===s&&!nt(s)}function Y_(s,c){return function(f){return f==null?!1:f[s]===c&&(c!==t||s in ze(f))}}function FL(s){var c=bu(s,function(m){return f.size===l&&f.clear(),m}),f=c.cache;return c}function CL(s,c){var f=s[1],m=c[1],y=f|m,S=y<(_|w|ge),E=m==ge&&f==M||m==ge&&f==de&&s[7].length<=c[8]||m==(ge|de)&&c[7].length<=c[8]&&f==M;if(!(S||E))return s;m&_&&(s[2]=c[2],y|=f&_?0:C);var R=c[3];if(R){var A=s[3];s[3]=A?F_(A,R,c[4]):R,s[4]=A?Bi(s[3],p):c[4]}return R=c[5],R&&(A=s[5],s[5]=A?C_(A,R,c[6]):R,s[6]=A?Bi(s[5],p):c[6]),R=c[7],R&&(s[7]=R),m&ge&&(s[8]=s[8]==null?c[8]:Vt(s[8],c[8])),s[9]==null&&(s[9]=c[9]),s[0]=c[0],s[1]=y,s}function OL(s){var c=[];if(s!=null)for(var f in ze(s))c.push(f);return c}function NL(s){return Kp.call(s)}function X_(s,c,f){return c=Tt(c===t?s.length-1:c,0),function(){for(var m=arguments,y=-1,S=Tt(m.length-c,0),E=L(S);++y<S;)E[y]=m[c+y];y=-1;for(var R=L(c+1);++y<c;)R[y]=m[y];return R[c]=f(E),Pr(s,this,R)}}function J_(s,c){return c.length<2?s:Co(s,Jr(c,0,-1))}function LL(s,c){for(var f=s.length,m=Vt(c.length,f),y=lr(s);m--;){var S=c[m];s[m]=mi(S,f)?y[S]:t}return s}function Cx(s,c){if(!(c==="constructor"&&typeof s[c]=="function")&&c!="__proto__")return s[c]}var e0=r0(w_),Fc=XO||function(s,c){return _t.setTimeout(s,c)},Ox=r0(sL);function t0(s,c,f){var m=c+"";return Ox(s,PL(m,UL(EL(m),f)))}function r0(s){var c=0,f=0;return function(){var m=rN(),y=O-(m-f);if(f=m,y>0){if(++c>=N)return arguments[0]}else c=0;return s.apply(t,arguments)}}function xu(s,c){var f=-1,m=s.length,y=m-1;for(c=c===t?m:c;++f<c;){var S=yx(f,y),E=s[S];s[S]=s[f],s[f]=E}return s.length=c,s}var n0=FL(function(s){var c=[];return s.charCodeAt(0)===46&&c.push(""),s.replace(kC,function(f,m,y,S){c.push(y?S.replace(OC,"$1"):m||f)}),c});function Hn(s){if(typeof s=="string"||Dr(s))return s;var c=s+"";return c=="0"&&1/s==-K?"-0":c}function No(s){if(s!=null){try{return Gp.call(s)}catch{}try{return s+""}catch{}}return""}function UL(s,c){return Qr(si,function(f){var m="_."+f[0];c&f[1]&&!Wp(s,m)&&s.push(m)}),s.sort()}function i0(s){if(s instanceof Ae)return s.clone();var c=new Yr(s.__wrapped__,s.__chain__);return c.__actions__=lr(s.__actions__),c.__index__=s.__index__,c.__values__=s.__values__,c}function VL(s,c,f){(f?Zt(s,c,f):c===t)?c=1:c=Tt(be(c),0);var m=s==null?0:s.length;if(!m||c<1)return[];for(var y=0,S=0,E=L(eu(m/c));y<m;)E[S++]=Jr(s,y,y+=c);return E}function BL(s){for(var c=-1,f=s==null?0:s.length,m=0,y=[];++c<f;){var S=s[c];S&&(y[m++]=S)}return y}function HL(){var s=arguments.length;if(!s)return[];for(var c=L(s-1),f=arguments[0],m=s;m--;)c[m-1]=arguments[m];return Vi(xe(f)?lr(f):[f],Ft(c,1))}var WL=ke(function(s,c){return ct(s)?kc(s,Ft(c,1,ct,!0)):[]}),$L=ke(function(s,c){var f=en(c);return ct(f)&&(f=t),ct(s)?kc(s,Ft(c,1,ct,!0),le(f,2)):[]}),jL=ke(function(s,c){var f=en(c);return ct(f)&&(f=t),ct(s)?kc(s,Ft(c,1,ct,!0),t,f):[]});function qL(s,c,f){var m=s==null?0:s.length;return m?(c=f||c===t?1:be(c),Jr(s,c<0?0:c,m)):[]}function zL(s,c,f){var m=s==null?0:s.length;return m?(c=f||c===t?1:be(c),c=m-c,Jr(s,0,c<0?0:c)):[]}function GL(s,c){return s&&s.length?pu(s,le(c,3),!0,!0):[]}function KL(s,c){return s&&s.length?pu(s,le(c,3),!0):[]}function QL(s,c,f,m){var y=s==null?0:s.length;return y?(f&&typeof f!="number"&&Zt(s,c,f)&&(f=0,m=y),HN(s,c,f,m)):[]}function o0(s,c,f){var m=s==null?0:s.length;if(!m)return-1;var y=f==null?0:be(f);return y<0&&(y=Tt(m+y,0)),$p(s,le(c,3),y)}function s0(s,c,f){var m=s==null?0:s.length;if(!m)return-1;var y=m-1;return f!==t&&(y=be(f),y=f<0?Tt(m+y,0):Vt(y,m-1)),$p(s,le(c,3),y,!0)}function a0(s){var c=s==null?0:s.length;return c?Ft(s,1):[]}function ZL(s){var c=s==null?0:s.length;return c?Ft(s,K):[]}function YL(s,c){var f=s==null?0:s.length;return f?(c=c===t?1:be(c),Ft(s,c)):[]}function XL(s){for(var c=-1,f=s==null?0:s.length,m={};++c<f;){var y=s[c];m[y[0]]=y[1]}return m}function c0(s){return s&&s.length?s[0]:t}function JL(s,c,f){var m=s==null?0:s.length;if(!m)return-1;var y=f==null?0:be(f);return y<0&&(y=Tt(m+y,0)),Rs(s,c,y)}function eU(s){var c=s==null?0:s.length;return c?Jr(s,0,-1):[]}var tU=ke(function(s){var c=et(s,bx);return c.length&&c[0]===s[0]?fx(c):[]}),rU=ke(function(s){var c=en(s),f=et(s,bx);return c===en(f)?c=t:f.pop(),f.length&&f[0]===s[0]?fx(f,le(c,2)):[]}),nU=ke(function(s){var c=en(s),f=et(s,bx);return c=typeof c=="function"?c:t,c&&f.pop(),f.length&&f[0]===s[0]?fx(f,t,c):[]});function iU(s,c){return s==null?"":eN.call(s,c)}function en(s){var c=s==null?0:s.length;return c?s[c-1]:t}function oU(s,c,f){var m=s==null?0:s.length;if(!m)return-1;var y=m;return f!==t&&(y=be(f),y=y<0?Tt(m+y,0):Vt(y,m-1)),c===c?UO(s,c,y):$p(s,Ww,y,!0)}function sU(s,c){return s&&s.length?T_(s,be(c)):t}var aU=ke(l0);function l0(s,c){return s&&s.length&&c&&c.length?gx(s,c):s}function cU(s,c,f){return s&&s.length&&c&&c.length?gx(s,c,le(f,2)):s}function lU(s,c,f){return s&&s.length&&c&&c.length?gx(s,c,t,f):s}var pU=di(function(s,c){var f=s==null?0:s.length,m=cx(s,c);return b_(s,et(c,function(y){return mi(y,f)?+y:y}).sort(I_)),m});function uU(s,c){var f=[];if(!(s&&s.length))return f;var m=-1,y=[],S=s.length;for(c=le(c,3);++m<S;){var E=s[m];c(E,m,s)&&(f.push(E),y.push(m))}return b_(s,y),f}function Nx(s){return s==null?s:iN.call(s)}function fU(s,c,f){var m=s==null?0:s.length;return m?(f&&typeof f!="number"&&Zt(s,c,f)?(c=0,f=m):(c=c==null?0:be(c),f=f===t?m:be(f)),Jr(s,c,f)):[]}function dU(s,c){return lu(s,c)}function mU(s,c,f){return Tx(s,c,le(f,2))}function hU(s,c){var f=s==null?0:s.length;if(f){var m=lu(s,c);if(m<f&&_n(s[m],c))return m}return-1}function gU(s,c){return lu(s,c,!0)}function yU(s,c,f){return Tx(s,c,le(f,2),!0)}function xU(s,c){var f=s==null?0:s.length;if(f){var m=lu(s,c,!0)-1;if(_n(s[m],c))return m}return-1}function TU(s){return s&&s.length?__(s):[]}function SU(s,c){return s&&s.length?__(s,le(c,2)):[]}function vU(s){var c=s==null?0:s.length;return c?Jr(s,1,c):[]}function bU(s,c,f){return s&&s.length?(c=f||c===t?1:be(c),Jr(s,0,c<0?0:c)):[]}function wU(s,c,f){var m=s==null?0:s.length;return m?(c=f||c===t?1:be(c),c=m-c,Jr(s,c<0?0:c,m)):[]}function _U(s,c){return s&&s.length?pu(s,le(c,3),!1,!0):[]}function EU(s,c){return s&&s.length?pu(s,le(c,3)):[]}var RU=ke(function(s){return ji(Ft(s,1,ct,!0))}),kU=ke(function(s){var c=en(s);return ct(c)&&(c=t),ji(Ft(s,1,ct,!0),le(c,2))}),PU=ke(function(s){var c=en(s);return c=typeof c=="function"?c:t,ji(Ft(s,1,ct,!0),t,c)});function MU(s){return s&&s.length?ji(s):[]}function AU(s,c){return s&&s.length?ji(s,le(c,2)):[]}function DU(s,c){return c=typeof c=="function"?c:t,s&&s.length?ji(s,t,c):[]}function Lx(s){if(!(s&&s.length))return[];var c=0;return s=Ui(s,function(f){if(ct(f))return c=Tt(f.length,c),!0}),ex(c,function(f){return et(s,Yy(f))})}function p0(s,c){if(!(s&&s.length))return[];var f=Lx(s);return c==null?f:et(f,function(m){return Pr(c,t,m)})}var IU=ke(function(s,c){return ct(s)?kc(s,c):[]}),FU=ke(function(s){return vx(Ui(s,ct))}),CU=ke(function(s){var c=en(s);return ct(c)&&(c=t),vx(Ui(s,ct),le(c,2))}),OU=ke(function(s){var c=en(s);return c=typeof c=="function"?c:t,vx(Ui(s,ct),t,c)}),NU=ke(Lx);function LU(s,c){return P_(s||[],c||[],Rc)}function UU(s,c){return P_(s||[],c||[],Ac)}var VU=ke(function(s){var c=s.length,f=c>1?s[c-1]:t;return f=typeof f=="function"?(s.pop(),f):t,p0(s,f)});function u0(s){var c=T(s);return c.__chain__=!0,c}function BU(s,c){return c(s),s}function Tu(s,c){return c(s)}var HU=di(function(s){var c=s.length,f=c?s[0]:0,m=this.__wrapped__,y=function(S){return cx(S,s)};return c>1||this.__actions__.length||!(m instanceof Ae)||!mi(f)?this.thru(y):(m=m.slice(f,+f+(c?1:0)),m.__actions__.push({func:Tu,args:[y],thisArg:t}),new Yr(m,this.__chain__).thru(function(S){return c&&!S.length&&S.push(t),S}))});function WU(){return u0(this)}function $U(){return new Yr(this.value(),this.__chain__)}function jU(){this.__values__===t&&(this.__values__=E0(this.value()));var s=this.__index__>=this.__values__.length,c=s?t:this.__values__[this.__index__++];return{done:s,value:c}}function qU(){return this}function zU(s){for(var c,f=this;f instanceof iu;){var m=i0(f);m.__index__=0,m.__values__=t,c?y.__wrapped__=m:c=m;var y=m;f=f.__wrapped__}return y.__wrapped__=s,c}function GU(){var s=this.__wrapped__;if(s instanceof Ae){var c=s;return this.__actions__.length&&(c=new Ae(this)),c=c.reverse(),c.__actions__.push({func:Tu,args:[Nx],thisArg:t}),new Yr(c,this.__chain__)}return this.thru(Nx)}function KU(){return k_(this.__wrapped__,this.__actions__)}var QU=uu(function(s,c,f){je.call(s,f)?++s[f]:ui(s,f,1)});function ZU(s,c,f){var m=xe(s)?Bw:BN;return f&&Zt(s,c,f)&&(c=t),m(s,le(c,3))}function YU(s,c){var f=xe(s)?Ui:p_;return f(s,le(c,3))}var XU=U_(o0),JU=U_(s0);function e2(s,c){return Ft(Su(s,c),1)}function t2(s,c){return Ft(Su(s,c),K)}function r2(s,c,f){return f=f===t?1:be(f),Ft(Su(s,c),f)}function f0(s,c){var f=xe(s)?Qr:$i;return f(s,le(c,3))}function d0(s,c){var f=xe(s)?vO:l_;return f(s,le(c,3))}var n2=uu(function(s,c,f){je.call(s,f)?s[f].push(c):ui(s,f,[c])});function i2(s,c,f,m){s=pr(s)?s:Ls(s),f=f&&!m?be(f):0;var y=s.length;return f<0&&(f=Tt(y+f,0)),Eu(s)?f<=y&&s.indexOf(c,f)>-1:!!y&&Rs(s,c,f)>-1}var o2=ke(function(s,c,f){var m=-1,y=typeof c=="function",S=pr(s)?L(s.length):[];return $i(s,function(E){S[++m]=y?Pr(c,E,f):Pc(E,c,f)}),S}),s2=uu(function(s,c,f){ui(s,f,c)});function Su(s,c){var f=xe(s)?et:g_;return f(s,le(c,3))}function a2(s,c,f,m){return s==null?[]:(xe(c)||(c=c==null?[]:[c]),f=m?t:f,xe(f)||(f=f==null?[]:[f]),S_(s,c,f))}var c2=uu(function(s,c,f){s[f?0:1].push(c)},function(){return[[],[]]});function l2(s,c,f){var m=xe(s)?Qy:jw,y=arguments.length<3;return m(s,le(c,4),f,y,$i)}function p2(s,c,f){var m=xe(s)?bO:jw,y=arguments.length<3;return m(s,le(c,4),f,y,l_)}function u2(s,c){var f=xe(s)?Ui:p_;return f(s,wu(le(c,3)))}function f2(s){var c=xe(s)?o_:iL;return c(s)}function d2(s,c,f){(f?Zt(s,c,f):c===t)?c=1:c=be(c);var m=xe(s)?ON:oL;return m(s,c)}function m2(s){var c=xe(s)?NN:aL;return c(s)}function h2(s){if(s==null)return 0;if(pr(s))return Eu(s)?Ps(s):s.length;var c=Bt(s);return c==Sn||c==vn?s.size:mx(s).length}function g2(s,c,f){var m=xe(s)?Zy:cL;return f&&Zt(s,c,f)&&(c=t),m(s,le(c,3))}var y2=ke(function(s,c){if(s==null)return[];var f=c.length;return f>1&&Zt(s,c[0],c[1])?c=[]:f>2&&Zt(c[0],c[1],c[2])&&(c=[c[0]]),S_(s,Ft(c,1),[])}),vu=YO||function(){return _t.Date.now()};function x2(s,c){if(typeof c!="function")throw new Zr(i);return s=be(s),function(){if(--s<1)return c.apply(this,arguments)}}function m0(s,c,f){return c=f?t:c,c=s&&c==null?s.length:c,fi(s,ge,t,t,t,t,c)}function h0(s,c){var f;if(typeof c!="function")throw new Zr(i);return s=be(s),function(){return--s>0&&(f=c.apply(this,arguments)),s<=1&&(c=t),f}}var Ux=ke(function(s,c,f){var m=_;if(f.length){var y=Bi(f,Os(Ux));m|=Z}return fi(s,m,c,f,y)}),g0=ke(function(s,c,f){var m=_|w;if(f.length){var y=Bi(f,Os(g0));m|=Z}return fi(c,m,s,f,y)});function y0(s,c,f){c=f?t:c;var m=fi(s,M,t,t,t,t,t,c);return m.placeholder=y0.placeholder,m}function x0(s,c,f){c=f?t:c;var m=fi(s,U,t,t,t,t,t,c);return m.placeholder=x0.placeholder,m}function T0(s,c,f){var m,y,S,E,R,A,B=0,H=!1,j=!1,Y=!0;if(typeof s!="function")throw new Zr(i);c=tn(c)||0,nt(f)&&(H=!!f.leading,j="maxWait"in f,S=j?Tt(tn(f.maxWait)||0,c):S,Y="trailing"in f?!!f.trailing:Y);function ie(lt){var En=m,yi=y;return m=y=t,B=lt,E=s.apply(yi,En),E}function pe(lt){return B=lt,R=Fc(Pe,c),H?ie(lt):E}function Ee(lt){var En=lt-A,yi=lt-B,U0=c-En;return j?Vt(U0,S-yi):U0}function ue(lt){var En=lt-A,yi=lt-B;return A===t||En>=c||En<0||j&&yi>=S}function Pe(){var lt=vu();if(ue(lt))return Ie(lt);R=Fc(Pe,Ee(lt))}function Ie(lt){return R=t,Y&&m?ie(lt):(m=y=t,E)}function Ir(){R!==t&&M_(R),B=0,m=A=y=R=t}function Yt(){return R===t?E:Ie(vu())}function Fr(){var lt=vu(),En=ue(lt);if(m=arguments,y=this,A=lt,En){if(R===t)return pe(A);if(j)return M_(R),R=Fc(Pe,c),ie(A)}return R===t&&(R=Fc(Pe,c)),E}return Fr.cancel=Ir,Fr.flush=Yt,Fr}var T2=ke(function(s,c){return c_(s,1,c)}),S2=ke(function(s,c,f){return c_(s,tn(c)||0,f)});function v2(s){return fi(s,mt)}function bu(s,c){if(typeof s!="function"||c!=null&&typeof c!="function")throw new Zr(i);var f=function(){var m=arguments,y=c?c.apply(this,m):m[0],S=f.cache;if(S.has(y))return S.get(y);var E=s.apply(this,m);return f.cache=S.set(y,E)||S,E};return f.cache=new(bu.Cache||pi),f}bu.Cache=pi;function wu(s){if(typeof s!="function")throw new Zr(i);return function(){var c=arguments;switch(c.length){case 0:return!s.call(this);case 1:return!s.call(this,c[0]);case 2:return!s.call(this,c[0],c[1]);case 3:return!s.call(this,c[0],c[1],c[2])}return!s.apply(this,c)}}function b2(s){return h0(2,s)}var w2=lL(function(s,c){c=c.length==1&&xe(c[0])?et(c[0],Mr(le())):et(Ft(c,1),Mr(le()));var f=c.length;return ke(function(m){for(var y=-1,S=Vt(m.length,f);++y<S;)m[y]=c[y].call(this,m[y]);return Pr(s,this,m)})}),Vx=ke(function(s,c){var f=Bi(c,Os(Vx));return fi(s,Z,t,c,f)}),S0=ke(function(s,c){var f=Bi(c,Os(S0));return fi(s,ne,t,c,f)}),_2=di(function(s,c){return fi(s,de,t,t,t,c)});function E2(s,c){if(typeof s!="function")throw new Zr(i);return c=c===t?c:be(c),ke(s,c)}function R2(s,c){if(typeof s!="function")throw new Zr(i);return c=c==null?0:Tt(be(c),0),ke(function(f){var m=f[c],y=zi(f,0,c);return m&&Vi(y,m),Pr(s,this,y)})}function k2(s,c,f){var m=!0,y=!0;if(typeof s!="function")throw new Zr(i);return nt(f)&&(m="leading"in f?!!f.leading:m,y="trailing"in f?!!f.trailing:y),T0(s,c,{leading:m,maxWait:c,trailing:y})}function P2(s){return m0(s,1)}function M2(s,c){return Vx(wx(c),s)}function A2(){if(!arguments.length)return[];var s=arguments[0];return xe(s)?s:[s]}function D2(s){return Xr(s,h)}function I2(s,c){return c=typeof c=="function"?c:t,Xr(s,h,c)}function F2(s){return Xr(s,u|h)}function C2(s,c){return c=typeof c=="function"?c:t,Xr(s,u|h,c)}function O2(s,c){return c==null||a_(s,c,Et(c))}function _n(s,c){return s===c||s!==s&&c!==c}var N2=hu(ux),L2=hu(function(s,c){return s>=c}),Lo=d_(function(){return arguments}())?d_:function(s){return st(s)&&je.call(s,"callee")&&!Jw.call(s,"callee")},xe=L.isArray,U2=Cw?Mr(Cw):zN;function pr(s){return s!=null&&_u(s.length)&&!hi(s)}function ct(s){return st(s)&&pr(s)}function V2(s){return s===!0||s===!1||st(s)&&Qt(s)==Tn}var Gi=JO||Zx,B2=Ow?Mr(Ow):GN;function H2(s){return st(s)&&s.nodeType===1&&!Cc(s)}function W2(s){if(s==null)return!0;if(pr(s)&&(xe(s)||typeof s=="string"||typeof s.splice=="function"||Gi(s)||Ns(s)||Lo(s)))return!s.length;var c=Bt(s);if(c==Sn||c==vn)return!s.size;if(Ic(s))return!mx(s).length;for(var f in s)if(je.call(s,f))return!1;return!0}function $2(s,c){return Mc(s,c)}function j2(s,c,f){f=typeof f=="function"?f:t;var m=f?f(s,c):t;return m===t?Mc(s,c,t,f):!!m}function Bx(s){if(!st(s))return!1;var c=Qt(s);return c==ai||c==Po||typeof s.message=="string"&&typeof s.name=="string"&&!Cc(s)}function q2(s){return typeof s=="number"&&t_(s)}function hi(s){if(!nt(s))return!1;var c=Qt(s);return c==ws||c==cw||c==kr||c==hC}function v0(s){return typeof s=="number"&&s==be(s)}function _u(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=Q}function nt(s){var c=typeof s;return s!=null&&(c=="object"||c=="function")}function st(s){return s!=null&&typeof s=="object"}var b0=Nw?Mr(Nw):QN;function z2(s,c){return s===c||dx(s,c,Ax(c))}function G2(s,c,f){return f=typeof f=="function"?f:t,dx(s,c,Ax(c),f)}function K2(s){return w0(s)&&s!=+s}function Q2(s){if(IL(s))throw new ye(n);return m_(s)}function Z2(s){return s===null}function Y2(s){return s==null}function w0(s){return typeof s=="number"||st(s)&&Qt(s)==hc}function Cc(s){if(!st(s)||Qt(s)!=ci)return!1;var c=Yp(s);if(c===null)return!0;var f=je.call(c,"constructor")&&c.constructor;return typeof f=="function"&&f instanceof f&&Gp.call(f)==GO}var Hx=Lw?Mr(Lw):ZN;function X2(s){return v0(s)&&s>=-Q&&s<=Q}var _0=Uw?Mr(Uw):YN;function Eu(s){return typeof s=="string"||!xe(s)&&st(s)&&Qt(s)==yc}function Dr(s){return typeof s=="symbol"||st(s)&&Qt(s)==Up}var Ns=Vw?Mr(Vw):XN;function J2(s){return s===t}function eV(s){return st(s)&&Bt(s)==xc}function tV(s){return st(s)&&Qt(s)==yC}var rV=hu(hx),nV=hu(function(s,c){return s<=c});function E0(s){if(!s)return[];if(pr(s))return Eu(s)?bn(s):lr(s);if(vc&&s[vc])return OO(s[vc]());var c=Bt(s),f=c==Sn?rx:c==vn?jp:Ls;return f(s)}function gi(s){if(!s)return s===0?s:0;if(s=tn(s),s===K||s===-K){var c=s<0?-1:1;return c*te}return s===s?s:0}function be(s){var c=gi(s),f=c%1;return c===c?f?c-f:c:0}function R0(s){return s?Fo(be(s),0,re):0}function tn(s){if(typeof s=="number")return s;if(Dr(s))return me;if(nt(s)){var c=typeof s.valueOf=="function"?s.valueOf():s;s=nt(c)?c+"":c}if(typeof s!="string")return s===0?s:+s;s=qw(s);var f=UC.test(s);return f||BC.test(s)?xO(s.slice(2),f?2:8):LC.test(s)?me:+s}function k0(s){return Bn(s,ur(s))}function iV(s){return s?Fo(be(s),-Q,Q):s===0?s:0}function We(s){return s==null?"":Ar(s)}var oV=Fs(function(s,c){if(Ic(c)||pr(c)){Bn(c,Et(c),s);return}for(var f in c)je.call(c,f)&&Rc(s,f,c[f])}),P0=Fs(function(s,c){Bn(c,ur(c),s)}),Ru=Fs(function(s,c,f,m){Bn(c,ur(c),s,m)}),sV=Fs(function(s,c,f,m){Bn(c,Et(c),s,m)}),aV=di(cx);function cV(s,c){var f=Is(s);return c==null?f:s_(f,c)}var lV=ke(function(s,c){s=ze(s);var f=-1,m=c.length,y=m>2?c[2]:t;for(y&&Zt(c[0],c[1],y)&&(m=1);++f<m;)for(var S=c[f],E=ur(S),R=-1,A=E.length;++R<A;){var B=E[R],H=s[B];(H===t||_n(H,Ms[B])&&!je.call(s,B))&&(s[B]=S[B])}return s}),pV=ke(function(s){return s.push(t,q_),Pr(M0,t,s)});function uV(s,c){return Hw(s,le(c,3),Vn)}function fV(s,c){return Hw(s,le(c,3),px)}function dV(s,c){return s==null?s:lx(s,le(c,3),ur)}function mV(s,c){return s==null?s:u_(s,le(c,3),ur)}function hV(s,c){return s&&Vn(s,le(c,3))}function gV(s,c){return s&&px(s,le(c,3))}function yV(s){return s==null?[]:au(s,Et(s))}function xV(s){return s==null?[]:au(s,ur(s))}function Wx(s,c,f){var m=s==null?t:Co(s,c);return m===t?f:m}function TV(s,c){return s!=null&&K_(s,c,WN)}function $x(s,c){return s!=null&&K_(s,c,$N)}var SV=B_(function(s,c,f){c!=null&&typeof c.toString!="function"&&(c=Kp.call(c)),s[c]=f},qx(fr)),vV=B_(function(s,c,f){c!=null&&typeof c.toString!="function"&&(c=Kp.call(c)),je.call(s,c)?s[c].push(f):s[c]=[f]},le),bV=ke(Pc);function Et(s){return pr(s)?i_(s):mx(s)}function ur(s){return pr(s)?i_(s,!0):JN(s)}function wV(s,c){var f={};return c=le(c,3),Vn(s,function(m,y,S){ui(f,c(m,y,S),m)}),f}function _V(s,c){var f={};return c=le(c,3),Vn(s,function(m,y,S){ui(f,y,c(m,y,S))}),f}var EV=Fs(function(s,c,f){cu(s,c,f)}),M0=Fs(function(s,c,f,m){cu(s,c,f,m)}),RV=di(function(s,c){var f={};if(s==null)return f;var m=!1;c=et(c,function(S){return S=qi(S,s),m||(m=S.length>1),S}),Bn(s,Px(s),f),m&&(f=Xr(f,u|d|h,SL));for(var y=c.length;y--;)Sx(f,c[y]);return f});function kV(s,c){return A0(s,wu(le(c)))}var PV=di(function(s,c){return s==null?{}:tL(s,c)});function A0(s,c){if(s==null)return{};var f=et(Px(s),function(m){return[m]});return c=le(c),v_(s,f,function(m,y){return c(m,y[0])})}function MV(s,c,f){c=qi(c,s);var m=-1,y=c.length;for(y||(y=1,s=t);++m<y;){var S=s==null?t:s[Hn(c[m])];S===t&&(m=y,S=f),s=hi(S)?S.call(s):S}return s}function AV(s,c,f){return s==null?s:Ac(s,c,f)}function DV(s,c,f,m){return m=typeof m=="function"?m:t,s==null?s:Ac(s,c,f,m)}var D0=$_(Et),I0=$_(ur);function IV(s,c,f){var m=xe(s),y=m||Gi(s)||Ns(s);if(c=le(c,4),f==null){var S=s&&s.constructor;y?f=m?new S:[]:nt(s)?f=hi(S)?Is(Yp(s)):{}:f={}}return(y?Qr:Vn)(s,function(E,R,A){return c(f,E,R,A)}),f}function FV(s,c){return s==null?!0:Sx(s,c)}function CV(s,c,f){return s==null?s:R_(s,c,wx(f))}function OV(s,c,f,m){return m=typeof m=="function"?m:t,s==null?s:R_(s,c,wx(f),m)}function Ls(s){return s==null?[]:tx(s,Et(s))}function NV(s){return s==null?[]:tx(s,ur(s))}function LV(s,c,f){return f===t&&(f=c,c=t),f!==t&&(f=tn(f),f=f===f?f:0),c!==t&&(c=tn(c),c=c===c?c:0),Fo(tn(s),c,f)}function UV(s,c,f){return c=gi(c),f===t?(f=c,c=0):f=gi(f),s=tn(s),jN(s,c,f)}function VV(s,c,f){if(f&&typeof f!="boolean"&&Zt(s,c,f)&&(c=f=t),f===t&&(typeof c=="boolean"?(f=c,c=t):typeof s=="boolean"&&(f=s,s=t)),s===t&&c===t?(s=0,c=1):(s=gi(s),c===t?(c=s,s=0):c=gi(c)),s>c){var m=s;s=c,c=m}if(f||s%1||c%1){var y=r_();return Vt(s+y*(c-s+yO("1e-"+((y+"").length-1))),c)}return yx(s,c)}var BV=Cs(function(s,c,f){return c=c.toLowerCase(),s+(f?F0(c):c)});function F0(s){return jx(We(s).toLowerCase())}function C0(s){return s=We(s),s&&s.replace(WC,AO).replace(aO,"")}function HV(s,c,f){s=We(s),c=Ar(c);var m=s.length;f=f===t?m:Fo(be(f),0,m);var y=f;return f-=c.length,f>=0&&s.slice(f,y)==c}function WV(s){return s=We(s),s&&bC.test(s)?s.replace(uw,DO):s}function $V(s){return s=We(s),s&&PC.test(s)?s.replace(Vy,"\\$&"):s}var jV=Cs(function(s,c,f){return s+(f?"-":"")+c.toLowerCase()}),qV=Cs(function(s,c,f){return s+(f?" ":"")+c.toLowerCase()}),zV=L_("toLowerCase");function GV(s,c,f){s=We(s),c=be(c);var m=c?Ps(s):0;if(!c||m>=c)return s;var y=(c-m)/2;return mu(tu(y),f)+s+mu(eu(y),f)}function KV(s,c,f){s=We(s),c=be(c);var m=c?Ps(s):0;return c&&m<c?s+mu(c-m,f):s}function QV(s,c,f){s=We(s),c=be(c);var m=c?Ps(s):0;return c&&m<c?mu(c-m,f)+s:s}function ZV(s,c,f){return f||c==null?c=0:c&&(c=+c),nN(We(s).replace(By,""),c||0)}function YV(s,c,f){return(f?Zt(s,c,f):c===t)?c=1:c=be(c),xx(We(s),c)}function XV(){var s=arguments,c=We(s[0]);return s.length<3?c:c.replace(s[1],s[2])}var JV=Cs(function(s,c,f){return s+(f?"_":"")+c.toLowerCase()});function eB(s,c,f){return f&&typeof f!="number"&&Zt(s,c,f)&&(c=f=t),f=f===t?re:f>>>0,f?(s=We(s),s&&(typeof c=="string"||c!=null&&!Hx(c))&&(c=Ar(c),!c&&ks(s))?zi(bn(s),0,f):s.split(c,f)):[]}var tB=Cs(function(s,c,f){return s+(f?" ":"")+jx(c)});function rB(s,c,f){return s=We(s),f=f==null?0:Fo(be(f),0,s.length),c=Ar(c),s.slice(f,f+c.length)==c}function nB(s,c,f){var m=T.templateSettings;f&&Zt(s,c,f)&&(c=t),s=We(s),c=Ru({},c,m,j_);var y=Ru({},c.imports,m.imports,j_),S=Et(y),E=tx(y,S),R,A,B=0,H=c.interpolate||Vp,j="__p += '",Y=nx((c.escape||Vp).source+"|"+H.source+"|"+(H===fw?NC:Vp).source+"|"+(c.evaluate||Vp).source+"|$","g"),ie="//# sourceURL="+(je.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++fO+"]")+`
`;s.replace(Y,function(ue,Pe,Ie,Ir,Yt,Fr){return Ie||(Ie=Ir),j+=s.slice(B,Fr).replace($C,IO),Pe&&(R=!0,j+=`' +
__e(`+Pe+`) +
'`),Yt&&(A=!0,j+=`';
`+Yt+`;
__p += '`),Ie&&(j+=`' +
((__t = (`+Ie+`)) == null ? '' : __t) +
'`),B=Fr+ue.length,ue}),j+=`';
`;var pe=je.call(c,"variable")&&c.variable;if(!pe)j=`with (obj) {
`+j+`
}
`;else if(CC.test(pe))throw new ye(o);j=(A?j.replace(xC,""):j).replace(TC,"$1").replace(SC,"$1;"),j="function("+(pe||"obj")+`) {
`+(pe?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(R?", __e = _.escape":"")+(A?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+j+`return __p
}`;var Ee=N0(function(){return Ve(S,ie+"return "+j).apply(t,E)});if(Ee.source=j,Bx(Ee))throw Ee;return Ee}function iB(s){return We(s).toLowerCase()}function oB(s){return We(s).toUpperCase()}function sB(s,c,f){if(s=We(s),s&&(f||c===t))return qw(s);if(!s||!(c=Ar(c)))return s;var m=bn(s),y=bn(c),S=zw(m,y),E=Gw(m,y)+1;return zi(m,S,E).join("")}function aB(s,c,f){if(s=We(s),s&&(f||c===t))return s.slice(0,Qw(s)+1);if(!s||!(c=Ar(c)))return s;var m=bn(s),y=Gw(m,bn(c))+1;return zi(m,0,y).join("")}function cB(s,c,f){if(s=We(s),s&&(f||c===t))return s.replace(By,"");if(!s||!(c=Ar(c)))return s;var m=bn(s),y=zw(m,bn(c));return zi(m,y).join("")}function lB(s,c){var f=It,m=ot;if(nt(c)){var y="separator"in c?c.separator:y;f="length"in c?be(c.length):f,m="omission"in c?Ar(c.omission):m}s=We(s);var S=s.length;if(ks(s)){var E=bn(s);S=E.length}if(f>=S)return s;var R=f-Ps(m);if(R<1)return m;var A=E?zi(E,0,R).join(""):s.slice(0,R);if(y===t)return A+m;if(E&&(R+=A.length-R),Hx(y)){if(s.slice(R).search(y)){var B,H=A;for(y.global||(y=nx(y.source,We(dw.exec(y))+"g")),y.lastIndex=0;B=y.exec(H);)var j=B.index;A=A.slice(0,j===t?R:j)}}else if(s.indexOf(Ar(y),R)!=R){var Y=A.lastIndexOf(y);Y>-1&&(A=A.slice(0,Y))}return A+m}function pB(s){return s=We(s),s&&vC.test(s)?s.replace(pw,VO):s}var uB=Cs(function(s,c,f){return s+(f?" ":"")+c.toUpperCase()}),jx=L_("toUpperCase");function O0(s,c,f){return s=We(s),c=f?t:c,c===t?CO(s)?WO(s):EO(s):s.match(c)||[]}var N0=ke(function(s,c){try{return Pr(s,t,c)}catch(f){return Bx(f)?f:new ye(f)}}),fB=di(function(s,c){return Qr(c,function(f){f=Hn(f),ui(s,f,Ux(s[f],s))}),s});function dB(s){var c=s==null?0:s.length,f=le();return s=c?et(s,function(m){if(typeof m[1]!="function")throw new Zr(i);return[f(m[0]),m[1]]}):[],ke(function(m){for(var y=-1;++y<c;){var S=s[y];if(Pr(S[0],this,m))return Pr(S[1],this,m)}})}function mB(s){return VN(Xr(s,u))}function qx(s){return function(){return s}}function hB(s,c){return s==null||s!==s?c:s}var gB=V_(),yB=V_(!0);function fr(s){return s}function zx(s){return h_(typeof s=="function"?s:Xr(s,u))}function xB(s){return y_(Xr(s,u))}function TB(s,c){return x_(s,Xr(c,u))}var SB=ke(function(s,c){return function(f){return Pc(f,s,c)}}),vB=ke(function(s,c){return function(f){return Pc(s,f,c)}});function Gx(s,c,f){var m=Et(c),y=au(c,m);f==null&&!(nt(c)&&(y.length||!m.length))&&(f=c,c=s,s=this,y=au(c,Et(c)));var S=!(nt(f)&&"chain"in f)||!!f.chain,E=hi(s);return Qr(y,function(R){var A=c[R];s[R]=A,E&&(s.prototype[R]=function(){var B=this.__chain__;if(S||B){var H=s(this.__wrapped__),j=H.__actions__=lr(this.__actions__);return j.push({func:A,args:arguments,thisArg:s}),H.__chain__=B,H}return A.apply(s,Vi([this.value()],arguments))})}),s}function bB(){return _t._===this&&(_t._=KO),this}function Kx(){}function wB(s){return s=be(s),ke(function(c){return T_(c,s)})}var _B=Ex(et),EB=Ex(Bw),RB=Ex(Zy);function L0(s){return Ix(s)?Yy(Hn(s)):rL(s)}function kB(s){return function(c){return s==null?t:Co(s,c)}}var PB=H_(),MB=H_(!0);function Qx(){return[]}function Zx(){return!1}function AB(){return{}}function DB(){return""}function IB(){return!0}function FB(s,c){if(s=be(s),s<1||s>Q)return[];var f=re,m=Vt(s,re);c=le(c),s-=re;for(var y=ex(m,c);++f<s;)c(f);return y}function CB(s){return xe(s)?et(s,Hn):Dr(s)?[s]:lr(n0(We(s)))}function OB(s){var c=++zO;return We(s)+c}var NB=du(function(s,c){return s+c},0),LB=Rx("ceil"),UB=du(function(s,c){return s/c},1),VB=Rx("floor");function BB(s){return s&&s.length?su(s,fr,ux):t}function HB(s,c){return s&&s.length?su(s,le(c,2),ux):t}function WB(s){return $w(s,fr)}function $B(s,c){return $w(s,le(c,2))}function jB(s){return s&&s.length?su(s,fr,hx):t}function qB(s,c){return s&&s.length?su(s,le(c,2),hx):t}var zB=du(function(s,c){return s*c},1),GB=Rx("round"),KB=du(function(s,c){return s-c},0);function QB(s){return s&&s.length?Jy(s,fr):0}function ZB(s,c){return s&&s.length?Jy(s,le(c,2)):0}return T.after=x2,T.ary=m0,T.assign=oV,T.assignIn=P0,T.assignInWith=Ru,T.assignWith=sV,T.at=aV,T.before=h0,T.bind=Ux,T.bindAll=fB,T.bindKey=g0,T.castArray=A2,T.chain=u0,T.chunk=VL,T.compact=BL,T.concat=HL,T.cond=dB,T.conforms=mB,T.constant=qx,T.countBy=QU,T.create=cV,T.curry=y0,T.curryRight=x0,T.debounce=T0,T.defaults=lV,T.defaultsDeep=pV,T.defer=T2,T.delay=S2,T.difference=WL,T.differenceBy=$L,T.differenceWith=jL,T.drop=qL,T.dropRight=zL,T.dropRightWhile=GL,T.dropWhile=KL,T.fill=QL,T.filter=YU,T.flatMap=e2,T.flatMapDeep=t2,T.flatMapDepth=r2,T.flatten=a0,T.flattenDeep=ZL,T.flattenDepth=YL,T.flip=v2,T.flow=gB,T.flowRight=yB,T.fromPairs=XL,T.functions=yV,T.functionsIn=xV,T.groupBy=n2,T.initial=eU,T.intersection=tU,T.intersectionBy=rU,T.intersectionWith=nU,T.invert=SV,T.invertBy=vV,T.invokeMap=o2,T.iteratee=zx,T.keyBy=s2,T.keys=Et,T.keysIn=ur,T.map=Su,T.mapKeys=wV,T.mapValues=_V,T.matches=xB,T.matchesProperty=TB,T.memoize=bu,T.merge=EV,T.mergeWith=M0,T.method=SB,T.methodOf=vB,T.mixin=Gx,T.negate=wu,T.nthArg=wB,T.omit=RV,T.omitBy=kV,T.once=b2,T.orderBy=a2,T.over=_B,T.overArgs=w2,T.overEvery=EB,T.overSome=RB,T.partial=Vx,T.partialRight=S0,T.partition=c2,T.pick=PV,T.pickBy=A0,T.property=L0,T.propertyOf=kB,T.pull=aU,T.pullAll=l0,T.pullAllBy=cU,T.pullAllWith=lU,T.pullAt=pU,T.range=PB,T.rangeRight=MB,T.rearg=_2,T.reject=u2,T.remove=uU,T.rest=E2,T.reverse=Nx,T.sampleSize=d2,T.set=AV,T.setWith=DV,T.shuffle=m2,T.slice=fU,T.sortBy=y2,T.sortedUniq=TU,T.sortedUniqBy=SU,T.split=eB,T.spread=R2,T.tail=vU,T.take=bU,T.takeRight=wU,T.takeRightWhile=_U,T.takeWhile=EU,T.tap=BU,T.throttle=k2,T.thru=Tu,T.toArray=E0,T.toPairs=D0,T.toPairsIn=I0,T.toPath=CB,T.toPlainObject=k0,T.transform=IV,T.unary=P2,T.union=RU,T.unionBy=kU,T.unionWith=PU,T.uniq=MU,T.uniqBy=AU,T.uniqWith=DU,T.unset=FV,T.unzip=Lx,T.unzipWith=p0,T.update=CV,T.updateWith=OV,T.values=Ls,T.valuesIn=NV,T.without=IU,T.words=O0,T.wrap=M2,T.xor=FU,T.xorBy=CU,T.xorWith=OU,T.zip=NU,T.zipObject=LU,T.zipObjectDeep=UU,T.zipWith=VU,T.entries=D0,T.entriesIn=I0,T.extend=P0,T.extendWith=Ru,Gx(T,T),T.add=NB,T.attempt=N0,T.camelCase=BV,T.capitalize=F0,T.ceil=LB,T.clamp=LV,T.clone=D2,T.cloneDeep=F2,T.cloneDeepWith=C2,T.cloneWith=I2,T.conformsTo=O2,T.deburr=C0,T.defaultTo=hB,T.divide=UB,T.endsWith=HV,T.eq=_n,T.escape=WV,T.escapeRegExp=$V,T.every=ZU,T.find=XU,T.findIndex=o0,T.findKey=uV,T.findLast=JU,T.findLastIndex=s0,T.findLastKey=fV,T.floor=VB,T.forEach=f0,T.forEachRight=d0,T.forIn=dV,T.forInRight=mV,T.forOwn=hV,T.forOwnRight=gV,T.get=Wx,T.gt=N2,T.gte=L2,T.has=TV,T.hasIn=$x,T.head=c0,T.identity=fr,T.includes=i2,T.indexOf=JL,T.inRange=UV,T.invoke=bV,T.isArguments=Lo,T.isArray=xe,T.isArrayBuffer=U2,T.isArrayLike=pr,T.isArrayLikeObject=ct,T.isBoolean=V2,T.isBuffer=Gi,T.isDate=B2,T.isElement=H2,T.isEmpty=W2,T.isEqual=$2,T.isEqualWith=j2,T.isError=Bx,T.isFinite=q2,T.isFunction=hi,T.isInteger=v0,T.isLength=_u,T.isMap=b0,T.isMatch=z2,T.isMatchWith=G2,T.isNaN=K2,T.isNative=Q2,T.isNil=Y2,T.isNull=Z2,T.isNumber=w0,T.isObject=nt,T.isObjectLike=st,T.isPlainObject=Cc,T.isRegExp=Hx,T.isSafeInteger=X2,T.isSet=_0,T.isString=Eu,T.isSymbol=Dr,T.isTypedArray=Ns,T.isUndefined=J2,T.isWeakMap=eV,T.isWeakSet=tV,T.join=iU,T.kebabCase=jV,T.last=en,T.lastIndexOf=oU,T.lowerCase=qV,T.lowerFirst=zV,T.lt=rV,T.lte=nV,T.max=BB,T.maxBy=HB,T.mean=WB,T.meanBy=$B,T.min=jB,T.minBy=qB,T.stubArray=Qx,T.stubFalse=Zx,T.stubObject=AB,T.stubString=DB,T.stubTrue=IB,T.multiply=zB,T.nth=sU,T.noConflict=bB,T.noop=Kx,T.now=vu,T.pad=GV,T.padEnd=KV,T.padStart=QV,T.parseInt=ZV,T.random=VV,T.reduce=l2,T.reduceRight=p2,T.repeat=YV,T.replace=XV,T.result=MV,T.round=GB,T.runInContext=k,T.sample=f2,T.size=h2,T.snakeCase=JV,T.some=g2,T.sortedIndex=dU,T.sortedIndexBy=mU,T.sortedIndexOf=hU,T.sortedLastIndex=gU,T.sortedLastIndexBy=yU,T.sortedLastIndexOf=xU,T.startCase=tB,T.startsWith=rB,T.subtract=KB,T.sum=QB,T.sumBy=ZB,T.template=nB,T.times=FB,T.toFinite=gi,T.toInteger=be,T.toLength=R0,T.toLower=iB,T.toNumber=tn,T.toSafeInteger=iV,T.toString=We,T.toUpper=oB,T.trim=sB,T.trimEnd=aB,T.trimStart=cB,T.truncate=lB,T.unescape=pB,T.uniqueId=OB,T.upperCase=uB,T.upperFirst=jx,T.each=f0,T.eachRight=d0,T.first=c0,Gx(T,function(){var s={};return Vn(T,function(c,f){je.call(T.prototype,f)||(s[f]=c)}),s}(),{chain:!1}),T.VERSION=e,Qr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(s){T[s].placeholder=T}),Qr(["drop","take"],function(s,c){Ae.prototype[s]=function(f){f=f===t?1:Tt(be(f),0);var m=this.__filtered__&&!c?new Ae(this):this.clone();return m.__filtered__?m.__takeCount__=Vt(f,m.__takeCount__):m.__views__.push({size:Vt(f,re),type:s+(m.__dir__<0?"Right":"")}),m},Ae.prototype[s+"Right"]=function(f){return this.reverse()[s](f).reverse()}}),Qr(["filter","map","takeWhile"],function(s,c){var f=c+1,m=f==I||f==q;Ae.prototype[s]=function(y){var S=this.clone();return S.__iteratees__.push({iteratee:le(y,3),type:f}),S.__filtered__=S.__filtered__||m,S}}),Qr(["head","last"],function(s,c){var f="take"+(c?"Right":"");Ae.prototype[s]=function(){return this[f](1).value()[0]}}),Qr(["initial","tail"],function(s,c){var f="drop"+(c?"":"Right");Ae.prototype[s]=function(){return this.__filtered__?new Ae(this):this[f](1)}}),Ae.prototype.compact=function(){return this.filter(fr)},Ae.prototype.find=function(s){return this.filter(s).head()},Ae.prototype.findLast=function(s){return this.reverse().find(s)},Ae.prototype.invokeMap=ke(function(s,c){return typeof s=="function"?new Ae(this):this.map(function(f){return Pc(f,s,c)})}),Ae.prototype.reject=function(s){return this.filter(wu(le(s)))},Ae.prototype.slice=function(s,c){s=be(s);var f=this;return f.__filtered__&&(s>0||c<0)?new Ae(f):(s<0?f=f.takeRight(-s):s&&(f=f.drop(s)),c!==t&&(c=be(c),f=c<0?f.dropRight(-c):f.take(c-s)),f)},Ae.prototype.takeRightWhile=function(s){return this.reverse().takeWhile(s).reverse()},Ae.prototype.toArray=function(){return this.take(re)},Vn(Ae.prototype,function(s,c){var f=/^(?:filter|find|map|reject)|While$/.test(c),m=/^(?:head|last)$/.test(c),y=T[m?"take"+(c=="last"?"Right":""):c],S=m||/^find/.test(c);y&&(T.prototype[c]=function(){var E=this.__wrapped__,R=m?[1]:arguments,A=E instanceof Ae,B=R[0],H=A||xe(E),j=function(Pe){var Ie=y.apply(T,Vi([Pe],R));return m&&Y?Ie[0]:Ie};H&&f&&typeof B=="function"&&B.length!=1&&(A=H=!1);var Y=this.__chain__,ie=!!this.__actions__.length,pe=S&&!Y,Ee=A&&!ie;if(!S&&H){E=Ee?E:new Ae(this);var ue=s.apply(E,R);return ue.__actions__.push({func:Tu,args:[j],thisArg:t}),new Yr(ue,Y)}return pe&&Ee?s.apply(this,R):(ue=this.thru(j),pe?m?ue.value()[0]:ue.value():ue)})}),Qr(["pop","push","shift","sort","splice","unshift"],function(s){var c=qp[s],f=/^(?:push|sort|unshift)$/.test(s)?"tap":"thru",m=/^(?:pop|shift)$/.test(s);T.prototype[s]=function(){var y=arguments;if(m&&!this.__chain__){var S=this.value();return c.apply(xe(S)?S:[],y)}return this[f](function(E){return c.apply(xe(E)?E:[],y)})}}),Vn(Ae.prototype,function(s,c){var f=T[c];if(f){var m=f.name+"";je.call(Ds,m)||(Ds[m]=[]),Ds[m].push({name:c,func:f})}}),Ds[fu(t,w).name]=[{name:"wrapper",func:t}],Ae.prototype.clone=pN,Ae.prototype.reverse=uN,Ae.prototype.value=fN,T.prototype.at=HU,T.prototype.chain=WU,T.prototype.commit=$U,T.prototype.next=jU,T.prototype.plant=zU,T.prototype.reverse=GU,T.prototype.toJSON=T.prototype.valueOf=T.prototype.value=KU,T.prototype.first=T.prototype.head,vc&&(T.prototype[vc]=qU),T},Hi=$O();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(_t._=Hi,define(function(){return Hi})):Mo?((Mo.exports=Hi)._=Hi,zy._=Hi):_t._=Hi}).call(Ja)});var d1=Ge((NNe,f1)=>{"use strict";f1.exports=p1;function p1(t,e,r){t instanceof RegExp&&(t=l1(t,r)),e instanceof RegExp&&(e=l1(e,r));var n=u1(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}function l1(t,e){var r=e.match(t);return r?r[0]:null}p1.range=u1;function u1(t,e,r){var n,i,o,a,l,p=r.indexOf(t),u=r.indexOf(e,p+1),d=p;if(p>=0&&u>0){if(t===e)return[p,u];for(n=[],o=r.length;d>=0&&!l;)d==p?(n.push(d),p=r.indexOf(t,d+1)):n.length==1?l=[n.pop(),u]:(i=n.pop(),i<o&&(o=i,a=u),u=r.indexOf(e,d+1)),d=p<u&&p>=0?p:u;n.length&&(l=[o,a])}return l}});var v1=Ge((LNe,S1)=>{var m1=d1();S1.exports=lZ;var h1="\0SLASH"+Math.random()+"\0",g1="\0OPEN"+Math.random()+"\0",Wv="\0CLOSE"+Math.random()+"\0",y1="\0COMMA"+Math.random()+"\0",x1="\0PERIOD"+Math.random()+"\0";function Hv(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function aZ(t){return t.split("\\\\").join(h1).split("\\{").join(g1).split("\\}").join(Wv).split("\\,").join(y1).split("\\.").join(x1)}function cZ(t){return t.split(h1).join("\\").split(g1).join("{").split(Wv).join("}").split(y1).join(",").split(x1).join(".")}function T1(t){if(!t)return[""];var e=[],r=m1("{","}",t);if(!r)return t.split(",");var n=r.pre,i=r.body,o=r.post,a=n.split(",");a[a.length-1]+="{"+i+"}";var l=T1(o);return o.length&&(a[a.length-1]+=l.shift(),a.push.apply(a,l)),e.push.apply(e,a),e}function lZ(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),dp(aZ(t),!0).map(cZ)):[]}function pZ(t){return"{"+t+"}"}function uZ(t){return/^-?0\d/.test(t)}function fZ(t,e){return t<=e}function dZ(t,e){return t>=e}function dp(t,e){var r=[],n=m1("{","}",t);if(!n)return[t];var i=n.pre,o=n.post.length?dp(n.post,!1):[""];if(/\$$/.test(n.pre))for(var a=0;a<o.length;a++){var l=i+"{"+n.body+"}"+o[a];r.push(l)}else{var p=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),u=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),d=p||u,h=n.body.indexOf(",")>=0;if(!d&&!h)return n.post.match(/,.*\}/)?(t=n.pre+"{"+n.body+Wv+n.post,dp(t)):[t];var g;if(d)g=n.body.split(/\.\./);else if(g=T1(n.body),g.length===1&&(g=dp(g[0],!1).map(pZ),g.length===1))return o.map(function(N){return n.pre+g[0]+N});var x;if(d){var _=Hv(g[0]),w=Hv(g[1]),C=Math.max(g[0].length,g[1].length),M=g.length==3?Math.abs(Hv(g[2])):1,U=fZ,Z=w<_;Z&&(M*=-1,U=dZ);var ne=g.some(uZ);x=[];for(var ge=_;U(ge,w);ge+=M){var de;if(u)de=String.fromCharCode(ge),de==="\\"&&(de="");else if(de=String(ge),ne){var mt=C-de.length;if(mt>0){var It=new Array(mt+1).join("0");ge<0?de="-"+It+de.slice(1):de=It+de}}x.push(de)}}else{x=[];for(var ot=0;ot<g.length;ot++)x.push.apply(x,dp(g[ot],!1))}for(var ot=0;ot<x.length;ot++)for(var a=0;a<o.length;a++){var l=i+x[ot]+o[a];(!e||d||l)&&r.push(l)}}return r}});var JY={};rH(JY,{default:()=>dC});module.exports=nH(JY);var Yx="cursorless.command",Pu=class{constructor(e){this.baseTitle=e}get title(){return`Cursorless: ${this.baseTitle}`}},pt=class extends Pu{constructor(){super(...arguments);this.isVisible=!1}},ht=class extends Pu{constructor(){super(...arguments);this.isVisible=!0}};var tX={"cursorless.toggleDecorations":new ht("Toggle decorations"),"cursorless.recomputeDecorationStyles":new ht("Recompute decoration styles"),"cursorless.recordTestCase":new ht("Record test case"),"cursorless.recordOneTestCaseThenPause":new ht("Record one test case, then pause"),"cursorless.pauseRecording":new ht("Pause test case recording"),"cursorless.resumeRecording":new ht("Resume test case recording"),"cursorless.recordScopeTests.showUnimplementedFacets":new ht("Bulk record unimplemented scope facets"),"cursorless.recordScopeTests.saveActiveDocument":new ht("Bulk save scope tests for the active document"),"cursorless.showDocumentation":new ht("Show documentation"),"cursorless.showScopeVisualizer":new ht("Show the scope visualizer"),"cursorless.hideScopeVisualizer":new ht("Hide the scope visualizer"),"cursorless.analyzeCommandHistory":new ht("Analyze collected command history"),"cursorless.tutorial.start":new pt("Start a tutorial"),"cursorless.tutorial.next":new ht("Tutorial next"),"cursorless.tutorial.previous":new ht("Tutorial previous"),"cursorless.tutorial.restart":new ht("Tutorial restart"),"cursorless.tutorial.resume":new ht("Tutorial resume"),"cursorless.tutorial.list":new ht("Tutorial list"),"cursorless.documentationOpened":new pt("Used by talon to notify us that the docs have been opened; for use with tutorial"),"cursorless.command":new pt("The core cursorless command"),"cursorless.repeatPreviousCommand":new ht("Repeat the previous Cursorless command"),"cursorless.showQuickPick":new pt("Pop up a quick pick of all cursorless commands"),"cursorless.showCheatsheet":new pt("Display the cursorless cheatsheet"),"cursorless.internal.updateCheatsheetDefaults":new pt("Update the default values of the cheatsheet payload used on the website and for local development. Be sure to run this on stock community and cursorless."),"cursorless.private.logQuickActions":new pt("Log the quick actions available at the current cursor position"),"cursorless.takeSnapshot":new pt("Take a snapshot of the current editor state"),"cursorless.keyboard.escape":new pt("Should be mapped to the escape key when using cursorless keyboard. By default, exits modal keyboard mode, but changes behaviour when Cursorless is expecting a continuation keystroke.  For example, when you type a color and Cursorless is waiting for a character, it cancels the color and switches back to modal mode."),"cursorless.keyboard.targeted.targetHat":new pt("Sets the keyboard target to the given hat"),"cursorless.keyboard.targeted.targetScope":new pt("Sets the keyboard target to the scope containing the current target"),"cursorless.keyboard.targeted.targetSelection":new pt("Sets the keyboard target to the current selection"),"cursorless.keyboard.targeted.clearTarget":new pt("Clears the current keyboard target"),"cursorless.keyboard.targeted.runActionOnTarget":new pt("Run the given action on the current keyboard target"),"cursorless.keyboard.modal.modeOn":new pt("Turn on the cursorless modal mode"),"cursorless.keyboard.modal.modeOff":new pt("Turn off the cursorless modal mode"),"cursorless.keyboard.modal.modeToggle":new pt("Toggle the cursorless modal mode"),"cursorless.keyboard.undoTarget":new pt("Undo keyboard targeting changes"),"cursorless.keyboard.redoTarget":new pt("Redo keyboard targeting changes")};var Mu=class{constructor(e,r){this.callback=e;this.debounceDelayMs=r;this.timeoutHandle=null;this.run=this.run.bind(this)}run(){this.timeoutHandle!=null&&clearTimeout(this.timeoutHandle),this.timeoutHandle=setTimeout(()=>{this.callback(),this.timeoutHandle=null},this.debounceDelayMs)}dispose(){this.timeoutHandle!=null&&clearTimeout(this.timeoutHandle)}};var Au=class extends Error{constructor(e){super(`Language '${e}' is not implemented yet; See https://www.cursorless.org/docs/contributing/adding-a-new-language/`),this.name="UnsupportedLanguageError"}};var Du=class extends Error{constructor(){super("Cursorless Talon version is ahead of Cursorless VSCode extension version. Please update Cursorless VSCode.")}},Rt=class extends Error{constructor(e){super(`Couldn't find containing ${e}.`),this.name="NoContainingScopeError"}};var Iu=class{constructor(){this.signals={prePhrase:{getVersion:async()=>null}}}async getFocusedElementType(){return this.focusedElementType}setFocusedElementType(e){this.focusedElementType=e}};var iH=typeof global=="object"&&global&&global.Object===Object&&global,Fu=iH;var oH=typeof self=="object"&&self&&self.Object===Object&&self,sH=Fu||oH||Function("return this")(),kt=sH;var aH=kt.Symbol,Xt=aH;var B0=Object.prototype,cH=B0.hasOwnProperty,lH=B0.toString,Oc=Xt?Xt.toStringTag:void 0;function pH(t){var e=cH.call(t,Oc),r=t[Oc];try{t[Oc]=void 0;var n=!0}catch{}var i=lH.call(t);return n&&(e?t[Oc]=r:delete t[Oc]),i}var H0=pH;var uH=Object.prototype,fH=uH.toString;function dH(t){return fH.call(t)}var W0=dH;var mH="[object Null]",hH="[object Undefined]",$0=Xt?Xt.toStringTag:void 0;function gH(t){return t==null?t===void 0?hH:mH:$0&&$0 in Object(t)?H0(t):W0(t)}var Rn=gH;function yH(t){return t!=null&&typeof t=="object"}var Jt=yH;var xH="[object Symbol]";function TH(t){return typeof t=="symbol"||Jt(t)&&Rn(t)==xH}var Cr=TH;function SH(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var rn=SH;var vH=Array.isArray,Be=vH;var bH=1/0,j0=Xt?Xt.prototype:void 0,q0=j0?j0.toString:void 0;function z0(t){if(typeof t=="string")return t;if(Be(t))return rn(t,z0)+"";if(Cr(t))return q0?q0.call(t):"";var e=t+"";return e=="0"&&1/t==-bH?"-0":e}var G0=z0;var wH=/\s/;function _H(t){for(var e=t.length;e--&&wH.test(t.charAt(e)););return e}var K0=_H;var EH=/^\s+/;function RH(t){return t&&t.slice(0,K0(t)+1).replace(EH,"")}var Q0=RH;function kH(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Or=kH;var Z0=NaN,PH=/^[-+]0x[0-9a-f]+$/i,MH=/^0b[01]+$/i,AH=/^0o[0-7]+$/i,DH=parseInt;function IH(t){if(typeof t=="number")return t;if(Cr(t))return Z0;if(Or(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Or(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Q0(t);var r=MH.test(t);return r||AH.test(t)?DH(t.slice(2),r?2:8):PH.test(t)?Z0:+t}var Y0=IH;var X0=1/0,FH=17976931348623157e292;function CH(t){if(!t)return t===0?t:0;if(t=Y0(t),t===X0||t===-X0){var e=t<0?-1:1;return e*FH}return t===t?t:0}var Us=CH;function OH(t){var e=Us(t),r=e%1;return e===e?r?e-r:e:0}var Cu=OH;function NH(t){return t}var Ht=NH;var LH="[object AsyncFunction]",UH="[object Function]",VH="[object GeneratorFunction]",BH="[object Proxy]";function HH(t){if(!Or(t))return!1;var e=Rn(t);return e==UH||e==VH||e==LH||e==BH}var Ou=HH;var WH=kt["__core-js_shared__"],Nu=WH;var J0=function(){var t=/[^.]+$/.exec(Nu&&Nu.keys&&Nu.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function $H(t){return!!J0&&J0 in t}var eE=$H;var jH=Function.prototype,qH=jH.toString;function zH(t){if(t!=null){try{return qH.call(t)}catch{}try{return t+""}catch{}}return""}var xi=zH;var GH=/[\\^$.*+?()[\]{}|]/g,KH=/^\[object .+?Constructor\]$/,QH=Function.prototype,ZH=Object.prototype,YH=QH.toString,XH=ZH.hasOwnProperty,JH=RegExp("^"+YH.call(XH).replace(GH,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function eW(t){if(!Or(t)||eE(t))return!1;var e=Ou(t)?JH:KH;return e.test(xi(t))}var tE=eW;function tW(t,e){return t?.[e]}var rE=tW;function rW(t,e){var r=rE(t,e);return tE(r)?r:void 0}var mr=rW;var nW=mr(kt,"WeakMap"),Uo=nW;var iW=Uo&&new Uo,Xx=iW;var nE=Object.create,oW=function(){function t(){}return function(e){if(!Or(e))return{};if(nE)return nE(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),Lu=oW;function sW(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var iE=sW;function aW(){}var Vs=aW;var cW=4294967295;function Uu(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=cW,this.__views__=[]}Uu.prototype=Lu(Vs.prototype);Uu.prototype.constructor=Uu;var Bs=Uu;function lW(){}var Vu=lW;var pW=Xx?function(t){return Xx.get(t)}:Vu,Bu=pW;var uW={},Jx=uW;var fW=Object.prototype,dW=fW.hasOwnProperty;function mW(t){for(var e=t.name+"",r=Jx[e],n=dW.call(Jx,e)?r.length:0;n--;){var i=r[n],o=i.func;if(o==null||o==t)return i.name}return e}var Hs=mW;function Hu(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}Hu.prototype=Lu(Vs.prototype);Hu.prototype.constructor=Hu;var Ki=Hu;function hW(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var Qi=hW;function gW(t){if(t instanceof Bs)return t.clone();var e=new Ki(t.__wrapped__,t.__chain__);return e.__actions__=Qi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var oE=gW;var yW=Object.prototype,xW=yW.hasOwnProperty;function Wu(t){if(Jt(t)&&!Be(t)&&!(t instanceof Bs)){if(t instanceof Ki)return t;if(xW.call(t,"__wrapped__"))return oE(t)}return new Ki(t)}Wu.prototype=Vs.prototype;Wu.prototype.constructor=Wu;var sE=Wu;function TW(t){var e=Hs(t),r=sE[e];if(typeof r!="function"||!(e in Bs.prototype))return!1;if(t===r)return!0;var n=Bu(r);return!!n&&t===n[0]}var eT=TW;var SW=800,vW=16,bW=Date.now;function wW(t){var e=0,r=0;return function(){var n=bW(),i=vW-(n-r);if(r=n,i>0){if(++e>=SW)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var aE=wW;function _W(t){return function(){return t}}var cE=_W;var EW=function(){try{var t=mr(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Ws=EW;var RW=Ws?function(t,e){return Ws(t,"toString",{configurable:!0,enumerable:!1,value:cE(e),writable:!0})}:Ht,lE=RW;var kW=aE(lE),$u=kW;function PW(t,e,r,n){for(var i=t.length,o=r+(n?1:-1);n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}var ju=PW;function MW(t){return t!==t}var pE=MW;function AW(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}var uE=AW;function DW(t,e,r){return e===e?uE(t,e,r):ju(t,pE,r)}var qu=DW;function IW(t,e){var r=t==null?0:t.length;return!!r&&qu(t,e,0)>-1}var fE=IW;var FW=9007199254740991,CW=/^(?:0|[1-9]\d*)$/;function OW(t,e){var r=typeof t;return e=e??FW,!!e&&(r=="number"||r!="symbol"&&CW.test(t))&&t>-1&&t%1==0&&t<e}var $s=OW;function NW(t,e,r){e=="__proto__"&&Ws?Ws(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var dE=NW;function LW(t,e){return t===e||t!==t&&e!==e}var js=LW;var mE=Math.max;function UW(t,e,r){return e=mE(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,o=mE(n.length-e,0),a=Array(o);++i<o;)a[i]=n[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=n[i];return l[e]=r(a),iE(t,this,l)}}var zu=UW;function VW(t,e){return $u(zu(t,e,Ht),t+"")}var qs=VW;var BW=9007199254740991;function HW(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=BW}var zs=HW;function WW(t){return t!=null&&zs(t.length)&&!Ou(t)}var Wn=WW;function $W(t,e,r){if(!Or(r))return!1;var n=typeof e;return(n=="number"?Wn(r)&&$s(e,r.length):n=="string"&&e in r)?js(r[e],t):!1}var Vo=$W;var jW=Object.prototype;function qW(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||jW;return t===r}var hE=qW;function zW(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var Gu=zW;var GW="[object Arguments]";function KW(t){return Jt(t)&&Rn(t)==GW}var tT=KW;var gE=Object.prototype,QW=gE.hasOwnProperty,ZW=gE.propertyIsEnumerable,YW=tT(function(){return arguments}())?tT:function(t){return Jt(t)&&QW.call(t,"callee")&&!ZW.call(t,"callee")},Gs=YW;function XW(){return!1}var yE=XW;var SE=typeof exports=="object"&&exports&&!exports.nodeType&&exports,xE=SE&&typeof module=="object"&&module&&!module.nodeType&&module,JW=xE&&xE.exports===SE,TE=JW?kt.Buffer:void 0,e$=TE?TE.isBuffer:void 0,t$=e$||yE,Nc=t$;var r$="[object Arguments]",n$="[object Array]",i$="[object Boolean]",o$="[object Date]",s$="[object Error]",a$="[object Function]",c$="[object Map]",l$="[object Number]",p$="[object Object]",u$="[object RegExp]",f$="[object Set]",d$="[object String]",m$="[object WeakMap]",h$="[object ArrayBuffer]",g$="[object DataView]",y$="[object Float32Array]",x$="[object Float64Array]",T$="[object Int8Array]",S$="[object Int16Array]",v$="[object Int32Array]",b$="[object Uint8Array]",w$="[object Uint8ClampedArray]",_$="[object Uint16Array]",E$="[object Uint32Array]",Xe={};Xe[y$]=Xe[x$]=Xe[T$]=Xe[S$]=Xe[v$]=Xe[b$]=Xe[w$]=Xe[_$]=Xe[E$]=!0;Xe[r$]=Xe[n$]=Xe[h$]=Xe[i$]=Xe[g$]=Xe[o$]=Xe[s$]=Xe[a$]=Xe[c$]=Xe[l$]=Xe[p$]=Xe[u$]=Xe[f$]=Xe[d$]=Xe[m$]=!1;function R$(t){return Jt(t)&&zs(t.length)&&!!Xe[Rn(t)]}var vE=R$;function k$(t){return function(e){return t(e)}}var Ks=k$;var bE=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Lc=bE&&typeof module=="object"&&module&&!module.nodeType&&module,P$=Lc&&Lc.exports===bE,rT=P$&&Fu.process,M$=function(){try{var t=Lc&&Lc.require&&Lc.require("util").types;return t||rT&&rT.binding&&rT.binding("util")}catch{}}(),nT=M$;var wE=nT&&nT.isTypedArray,A$=wE?Ks(wE):vE,Ku=A$;var D$=Object.prototype,I$=D$.hasOwnProperty;function F$(t,e){var r=Be(t),n=!r&&Gs(t),i=!r&&!n&&Nc(t),o=!r&&!n&&!i&&Ku(t),a=r||n||i||o,l=a?Gu(t.length,String):[],p=l.length;for(var u in t)(e||I$.call(t,u))&&!(a&&(u=="length"||i&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||$s(u,p)))&&l.push(u);return l}var _E=F$;function C$(t,e){return function(r){return t(e(r))}}var EE=C$;var O$=EE(Object.keys,Object),RE=O$;var N$=Object.prototype,L$=N$.hasOwnProperty;function U$(t){if(!hE(t))return RE(t);var e=[];for(var r in Object(t))L$.call(t,r)&&r!="constructor"&&e.push(r);return e}var kE=U$;function V$(t){return Wn(t)?_E(t):kE(t)}var Zi=V$;var B$=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,H$=/^\w*$/;function W$(t,e){if(Be(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||Cr(t)?!0:H$.test(t)||!B$.test(t)||e!=null&&t in Object(e)}var Qs=W$;var $$=mr(Object,"create"),Ti=$$;function j$(){this.__data__=Ti?Ti(null):{},this.size=0}var PE=j$;function q$(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var ME=q$;var z$="__lodash_hash_undefined__",G$=Object.prototype,K$=G$.hasOwnProperty;function Q$(t){var e=this.__data__;if(Ti){var r=e[t];return r===z$?void 0:r}return K$.call(e,t)?e[t]:void 0}var AE=Q$;var Z$=Object.prototype,Y$=Z$.hasOwnProperty;function X$(t){var e=this.__data__;return Ti?e[t]!==void 0:Y$.call(e,t)}var DE=X$;var J$="__lodash_hash_undefined__";function ej(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Ti&&e===void 0?J$:e,this}var IE=ej;function Zs(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Zs.prototype.clear=PE;Zs.prototype.delete=ME;Zs.prototype.get=AE;Zs.prototype.has=DE;Zs.prototype.set=IE;var iT=Zs;function tj(){this.__data__=[],this.size=0}var FE=tj;function rj(t,e){for(var r=t.length;r--;)if(js(t[r][0],e))return r;return-1}var Yi=rj;var nj=Array.prototype,ij=nj.splice;function oj(t){var e=this.__data__,r=Yi(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():ij.call(e,r,1),--this.size,!0}var CE=oj;function sj(t){var e=this.__data__,r=Yi(e,t);return r<0?void 0:e[r][1]}var OE=sj;function aj(t){return Yi(this.__data__,t)>-1}var NE=aj;function cj(t,e){var r=this.__data__,n=Yi(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var LE=cj;function Ys(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Ys.prototype.clear=FE;Ys.prototype.delete=CE;Ys.prototype.get=OE;Ys.prototype.has=NE;Ys.prototype.set=LE;var Xi=Ys;var lj=mr(kt,"Map"),Ji=lj;function pj(){this.size=0,this.__data__={hash:new iT,map:new(Ji||Xi),string:new iT}}var UE=pj;function uj(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var VE=uj;function fj(t,e){var r=t.__data__;return VE(e)?r[typeof e=="string"?"string":"hash"]:r.map}var eo=fj;function dj(t){var e=eo(this,t).delete(t);return this.size-=e?1:0,e}var BE=dj;function mj(t){return eo(this,t).get(t)}var HE=mj;function hj(t){return eo(this,t).has(t)}var WE=hj;function gj(t,e){var r=eo(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var $E=gj;function Xs(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Xs.prototype.clear=UE;Xs.prototype.delete=BE;Xs.prototype.get=HE;Xs.prototype.has=WE;Xs.prototype.set=$E;var Bo=Xs;var yj="Expected a function";function oT(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(yj);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=t.apply(this,n);return r.cache=o.set(i,a)||o,a};return r.cache=new(oT.Cache||Bo),r}oT.Cache=Bo;var Uc=oT;var xj=500;function Tj(t){var e=Uc(t,function(n){return r.size===xj&&r.clear(),n}),r=e.cache;return e}var jE=Tj;var Sj=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,vj=/\\(\\)?/g,bj=jE(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Sj,function(r,n,i,o){e.push(i?o.replace(vj,"$1"):n||r)}),e}),qE=bj;function wj(t){return t==null?"":G0(t)}var kn=wj;function _j(t,e){return Be(t)?t:Qs(t,e)?[t]:qE(kn(t))}var Qu=_j;var Ej=1/0;function Rj(t){if(typeof t=="string"||Cr(t))return t;var e=t+"";return e=="0"&&1/t==-Ej?"-0":e}var to=Rj;function kj(t,e){e=Qu(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[to(e[r++])];return r&&r==n?t:void 0}var Js=kj;function Pj(t,e,r){var n=t==null?void 0:Js(t,e);return n===void 0?r:n}var Ho=Pj;function Mj(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var ea=Mj;var zE=Xt?Xt.isConcatSpreadable:void 0;function Aj(t){return Be(t)||Gs(t)||!!(zE&&t&&t[zE])}var GE=Aj;function KE(t,e,r,n,i){var o=-1,a=t.length;for(r||(r=GE),i||(i=[]);++o<a;){var l=t[o];e>0&&r(l)?e>1?KE(l,e-1,r,n,i):ea(i,l):n||(i[i.length]=l)}return i}var ta=KE;function Dj(t){var e=t==null?0:t.length;return e?ta(t,1):[]}var Je=Dj;function Ij(t){return $u(zu(t,void 0,Je),t+"")}var QE=Ij;function Fj(t){return function(e){return t?.[e]}}var ZE=Fj;var Cj={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Oj=ZE(Cj),YE=Oj;var Nj=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Lj="\\u0300-\\u036f",Uj="\\ufe20-\\ufe2f",Vj="\\u20d0-\\u20ff",Bj=Lj+Uj+Vj,Hj="["+Bj+"]",Wj=RegExp(Hj,"g");function $j(t){return t=kn(t),t&&t.replace(Nj,YE).replace(Wj,"")}var sT=$j;function jj(){this.__data__=new Xi,this.size=0}var XE=jj;function qj(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var JE=qj;function zj(t){return this.__data__.get(t)}var eR=zj;function Gj(t){return this.__data__.has(t)}var tR=Gj;var Kj=200;function Qj(t,e){var r=this.__data__;if(r instanceof Xi){var n=r.__data__;if(!Ji||n.length<Kj-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Bo(n)}return r.set(t,e),this.size=r.size,this}var rR=Qj;function ra(t){var e=this.__data__=new Xi(t);this.size=e.size}ra.prototype.clear=XE;ra.prototype.delete=JE;ra.prototype.get=eR;ra.prototype.has=tR;ra.prototype.set=rR;var na=ra;function Zj(t,e){for(var r=-1,n=t==null?0:t.length,i=0,o=[];++r<n;){var a=t[r];e(a,r,t)&&(o[i++]=a)}return o}var Zu=Zj;function Yj(){return[]}var nR=Yj;var Xj=Object.prototype,Jj=Xj.propertyIsEnumerable,iR=Object.getOwnPropertySymbols,eq=iR?function(t){return t==null?[]:(t=Object(t),Zu(iR(t),function(e){return Jj.call(t,e)}))}:nR,oR=eq;function tq(t,e,r){var n=e(t);return Be(t)?n:ea(n,r(t))}var sR=tq;function rq(t){return sR(t,Zi,oR)}var aT=rq;var nq=mr(kt,"DataView"),Yu=nq;var iq=mr(kt,"Promise"),Xu=iq;var oq=mr(kt,"Set"),ro=oq;var aR="[object Map]",sq="[object Object]",cR="[object Promise]",lR="[object Set]",pR="[object WeakMap]",uR="[object DataView]",aq=xi(Yu),cq=xi(Ji),lq=xi(Xu),pq=xi(ro),uq=xi(Uo),Wo=Rn;(Yu&&Wo(new Yu(new ArrayBuffer(1)))!=uR||Ji&&Wo(new Ji)!=aR||Xu&&Wo(Xu.resolve())!=cR||ro&&Wo(new ro)!=lR||Uo&&Wo(new Uo)!=pR)&&(Wo=function(t){var e=Rn(t),r=e==sq?t.constructor:void 0,n=r?xi(r):"";if(n)switch(n){case aq:return uR;case cq:return aR;case lq:return cR;case pq:return lR;case uq:return pR}return e});var cT=Wo;var fq=kt.Uint8Array,lT=fq;function dq(){var t=arguments.length;if(!t)return[];for(var e=Array(t-1),r=arguments[0],n=t;n--;)e[n-1]=arguments[n];return ea(Be(r)?Qi(r):[r],ta(e,1))}var Vc=dq;var mq="__lodash_hash_undefined__";function hq(t){return this.__data__.set(t,mq),this}var fR=hq;function gq(t){return this.__data__.has(t)}var dR=gq;function Ju(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new Bo;++e<r;)this.add(t[e])}Ju.prototype.add=Ju.prototype.push=fR;Ju.prototype.has=dR;var ef=Ju;function yq(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var mR=yq;function xq(t,e){return t.has(e)}var tf=xq;var Tq=1,Sq=2;function vq(t,e,r,n,i,o){var a=r&Tq,l=t.length,p=e.length;if(l!=p&&!(a&&p>l))return!1;var u=o.get(t),d=o.get(e);if(u&&d)return u==e&&d==t;var h=-1,g=!0,x=r&Sq?new ef:void 0;for(o.set(t,e),o.set(e,t);++h<l;){var _=t[h],w=e[h];if(n)var C=a?n(w,_,h,e,t,o):n(_,w,h,t,e,o);if(C!==void 0){if(C)continue;g=!1;break}if(x){if(!mR(e,function(M,U){if(!tf(x,U)&&(_===M||i(_,M,r,n,o)))return x.push(U)})){g=!1;break}}else if(!(_===w||i(_,w,r,n,o))){g=!1;break}}return o.delete(t),o.delete(e),g}var rf=vq;function bq(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}var hR=bq;function wq(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var ia=wq;var _q=1,Eq=2,Rq="[object Boolean]",kq="[object Date]",Pq="[object Error]",Mq="[object Map]",Aq="[object Number]",Dq="[object RegExp]",Iq="[object Set]",Fq="[object String]",Cq="[object Symbol]",Oq="[object ArrayBuffer]",Nq="[object DataView]",gR=Xt?Xt.prototype:void 0,pT=gR?gR.valueOf:void 0;function Lq(t,e,r,n,i,o,a){switch(r){case Nq:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Oq:return!(t.byteLength!=e.byteLength||!o(new lT(t),new lT(e)));case Rq:case kq:case Aq:return js(+t,+e);case Pq:return t.name==e.name&&t.message==e.message;case Dq:case Fq:return t==e+"";case Mq:var l=hR;case Iq:var p=n&_q;if(l||(l=ia),t.size!=e.size&&!p)return!1;var u=a.get(t);if(u)return u==e;n|=Eq,a.set(t,e);var d=rf(l(t),l(e),n,i,o,a);return a.delete(t),d;case Cq:if(pT)return pT.call(t)==pT.call(e)}return!1}var yR=Lq;var Uq=1,Vq=Object.prototype,Bq=Vq.hasOwnProperty;function Hq(t,e,r,n,i,o){var a=r&Uq,l=aT(t),p=l.length,u=aT(e),d=u.length;if(p!=d&&!a)return!1;for(var h=p;h--;){var g=l[h];if(!(a?g in e:Bq.call(e,g)))return!1}var x=o.get(t),_=o.get(e);if(x&&_)return x==e&&_==t;var w=!0;o.set(t,e),o.set(e,t);for(var C=a;++h<p;){g=l[h];var M=t[g],U=e[g];if(n)var Z=a?n(U,M,g,e,t,o):n(M,U,g,t,e,o);if(!(Z===void 0?M===U||i(M,U,r,n,o):Z)){w=!1;break}C||(C=g=="constructor")}if(w&&!C){var ne=t.constructor,ge=e.constructor;ne!=ge&&"constructor"in t&&"constructor"in e&&!(typeof ne=="function"&&ne instanceof ne&&typeof ge=="function"&&ge instanceof ge)&&(w=!1)}return o.delete(t),o.delete(e),w}var xR=Hq;var Wq=1,TR="[object Arguments]",SR="[object Array]",nf="[object Object]",$q=Object.prototype,vR=$q.hasOwnProperty;function jq(t,e,r,n,i,o){var a=Be(t),l=Be(e),p=a?SR:cT(t),u=l?SR:cT(e);p=p==TR?nf:p,u=u==TR?nf:u;var d=p==nf,h=u==nf,g=p==u;if(g&&Nc(t)){if(!Nc(e))return!1;a=!0,d=!1}if(g&&!d)return o||(o=new na),a||Ku(t)?rf(t,e,r,n,i,o):yR(t,e,p,r,n,i,o);if(!(r&Wq)){var x=d&&vR.call(t,"__wrapped__"),_=h&&vR.call(e,"__wrapped__");if(x||_){var w=x?t.value():t,C=_?e.value():e;return o||(o=new na),i(w,C,r,n,o)}}return g?(o||(o=new na),xR(t,e,r,n,i,o)):!1}var bR=jq;function wR(t,e,r,n,i){return t===e?!0:t==null||e==null||!Jt(t)&&!Jt(e)?t!==t&&e!==e:bR(t,e,r,n,wR,i)}var oa=wR;var qq=1,zq=2;function Gq(t,e,r,n){var i=r.length,o=i,a=!n;if(t==null)return!o;for(t=Object(t);i--;){var l=r[i];if(a&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++i<o;){l=r[i];var p=l[0],u=t[p],d=l[1];if(a&&l[2]){if(u===void 0&&!(p in t))return!1}else{var h=new na;if(n)var g=n(u,d,p,t,e,h);if(!(g===void 0?oa(d,u,qq|zq,n,h):g))return!1}}return!0}var _R=Gq;function Kq(t){return t===t&&!Or(t)}var of=Kq;function Qq(t){for(var e=Zi(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,of(i)]}return e}var ER=Qq;function Zq(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var sf=Zq;function Yq(t){var e=ER(t);return e.length==1&&e[0][2]?sf(e[0][0],e[0][1]):function(r){return r===t||_R(r,t,e)}}var RR=Yq;function Xq(t,e){return t!=null&&e in Object(t)}var kR=Xq;function Jq(t,e,r){e=Qu(e,t);for(var n=-1,i=e.length,o=!1;++n<i;){var a=to(e[n]);if(!(o=t!=null&&r(t,a)))break;t=t[a]}return o||++n!=i?o:(i=t==null?0:t.length,!!i&&zs(i)&&$s(a,i)&&(Be(t)||Gs(t)))}var PR=Jq;function e3(t,e){return t!=null&&PR(t,e,kR)}var MR=e3;var t3=1,r3=2;function n3(t,e){return Qs(t)&&of(e)?sf(to(t),e):function(r){var n=Ho(r,t);return n===void 0&&n===e?MR(r,t):oa(e,n,t3|r3)}}var AR=n3;function i3(t){return function(e){return e?.[t]}}var af=i3;function o3(t){return function(e){return Js(e,t)}}var DR=o3;function s3(t){return Qs(t)?af(to(t)):DR(t)}var IR=s3;function a3(t){return typeof t=="function"?t:t==null?Ht:typeof t=="object"?Be(t)?AR(t[0],t[1]):RR(t):IR(t)}var $n=a3;function c3(t,e,r,n){for(var i=-1,o=t==null?0:t.length;++i<o;){var a=t[i];e(n,a,r(a),t)}return n}var FR=c3;function l3(t){return function(e,r,n){for(var i=-1,o=Object(e),a=n(e),l=a.length;l--;){var p=a[t?l:++i];if(r(o[p],p,o)===!1)break}return e}}var CR=l3;var p3=CR(),OR=p3;function u3(t,e){return t&&OR(t,e,Zi)}var NR=u3;function f3(t,e){return function(r,n){if(r==null)return r;if(!Wn(r))return t(r,n);for(var i=r.length,o=e?i:-1,a=Object(r);(e?o--:++o<i)&&n(a[o],o,a)!==!1;);return r}}var LR=f3;var d3=LR(NR),cf=d3;function m3(t,e,r,n){return cf(t,function(i,o,a){e(n,i,r(i),a)}),n}var UR=m3;function h3(t,e){return function(r,n){var i=Be(r)?FR:UR,o=e?e():{};return i(r,t,$n(n,2),o)}}var VR=h3;function g3(t){return Jt(t)&&Wn(t)}var BR=g3;function y3(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}var HR=y3;function x3(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var lf=x3;var WR=/[\\^$.*+?()[\]{}|]/g,T3=RegExp(WR.source);function S3(t){return t=kn(t),t&&T3.test(t)?t.replace(WR,"\\$&"):t}var Nr=S3;var v3=Math.max,b3=Math.min;function w3(t,e,r){var n=t==null?0:t.length;if(!n)return-1;var i=n-1;return r!==void 0&&(i=Cu(r),i=r<0?v3(n+i,0):b3(i,n-1)),ju(t,$n(e,3),i,!0)}var Bc=w3;function _3(t,e){var r=-1,n=Wn(t)?Array(t.length):[];return cf(t,function(i,o,a){n[++r]=e(i,o,a)}),n}var $R=_3;var E3="Expected a function",R3=8,k3=32,P3=128,M3=256;function A3(t){return QE(function(e){var r=e.length,n=r,i=Ki.prototype.thru;for(t&&e.reverse();n--;){var o=e[n];if(typeof o!="function")throw new TypeError(E3);if(i&&!a&&Hs(o)=="wrapper")var a=new Ki([],!0)}for(n=a?n:r;++n<r;){o=e[n];var l=Hs(o),p=l=="wrapper"?Bu(o):void 0;p&&eT(p[0])&&p[1]==(P3|R3|k3|M3)&&!p[4].length&&p[9]==1?a=a[Hs(p[0])].apply(a,p[3]):a=o.length==1&&eT(o)?a[l]():a.thru(o)}return function(){var u=arguments,d=u[0];if(a&&u.length==1&&Be(d))return a.plant(d).value();for(var h=0,g=r?e[h].apply(this,u):d;++h<r;)g=e[h].call(this,g);return g}})}var jR=A3;var D3=jR(),uT=D3;var I3=Object.prototype,F3=I3.hasOwnProperty,C3=VR(function(t,e,r){F3.call(t,r)?t[r].push(e):dE(t,r,[e])}),fT=C3;function O3(t,e){return t>e}var qR=O3;function N3(t,e){return rn(e,function(r){return t[r]})}var zR=N3;function L3(t){return t==null?[]:zR(t,Zi(t))}var GR=L3;function U3(t,e){return oa(t,e)}var Si=U3;function V3(t,e){return t<e}var KR=V3;function B3(t,e,r){for(var n=-1,i=t.length;++n<i;){var o=t[n],a=e(o);if(a!=null&&(l===void 0?a===a&&!Cr(a):r(a,l)))var l=a,p=o}return p}var pf=B3;function H3(t,e){return t&&t.length?pf(t,$n(e,2),qR):void 0}var dT=H3;function W3(t,e){for(var r,n=-1,i=t.length;++n<i;){var o=e(t[n]);o!==void 0&&(r=r===void 0?o:r+o)}return r}var QR=W3;function $3(t){return t&&t.length?pf(t,Ht,KR):void 0}var mT=$3;function j3(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}var ZR=j3;function q3(t,e){if(t!==e){var r=t!==void 0,n=t===null,i=t===t,o=Cr(t),a=e!==void 0,l=e===null,p=e===e,u=Cr(e);if(!l&&!u&&!o&&t>e||o&&a&&p&&!l&&!u||n&&a&&p||!r&&p||!i)return 1;if(!n&&!o&&!u&&t<e||u&&r&&i&&!n&&!o||l&&r&&i||!a&&i||!p)return-1}return 0}var YR=q3;function z3(t,e,r){for(var n=-1,i=t.criteria,o=e.criteria,a=i.length,l=r.length;++n<a;){var p=YR(i[n],o[n]);if(p){if(n>=l)return p;var u=r[n];return p*(u=="desc"?-1:1)}}return t.index-e.index}var XR=z3;function G3(t,e,r){e.length?e=rn(e,function(o){return Be(o)?function(a){return Js(a,o.length===1?o[0]:o)}:o}):e=[Ht];var n=-1;e=rn(e,Ks($n));var i=$R(t,function(o,a,l){var p=rn(e,function(u){return u(o)});return{criteria:p,index:++n,value:o}});return ZR(i,function(o,a){return XR(o,a,r)})}var JR=G3;var K3=9007199254740991,Q3=Math.floor;function Z3(t,e){var r="";if(!t||e<1||e>K3)return r;do e%2&&(r+=t),e=Q3(e/2),e&&(t+=t);while(e);return r}var ek=Z3;function Y3(t,e,r,n){for(var i=r-1,o=t.length;++i<o;)if(n(t[i],e))return i;return-1}var tk=Y3;var X3=Array.prototype,rk=X3.splice;function J3(t,e,r,n){var i=n?tk:qu,o=-1,a=e.length,l=t;for(t===e&&(e=Qi(e)),r&&(l=rn(t,Ks(r)));++o<a;)for(var p=0,u=e[o],d=r?r(u):u;(p=i(l,d,p,n))>-1;)l!==t&&rk.call(l,p,1),rk.call(t,p,1);return t}var nk=J3;function ez(t,e){return t&&t.length&&e&&e.length?nk(t,e):t}var ik=ez;var tz=qs(ik),er=tz;var rz=Math.floor,nz=Math.random;function iz(t,e){return t+rz(nz()*(e-t+1))}var ok=iz;var oz=Math.ceil,sz=Math.max;function az(t,e,r,n){for(var i=-1,o=sz(oz((e-t)/(r||1)),0),a=Array(o);o--;)a[n?o:++i]=t,t+=r;return a}var sk=az;function cz(t){return function(e,r,n){return n&&typeof n!="number"&&Vo(e,r,n)&&(r=n=void 0),e=Us(e),r===void 0?(r=e,e=0):r=Us(r),n=n===void 0?e<r?1:-1:Us(n),sk(e,r,n,t)}}var ak=cz;var lz=ak(),hT=lz;function pz(t,e,r){return(r?Vo(t,e,r):e===void 0)?e=1:e=Cu(e),ek(kn(t),e)}var gT=pz;function uz(t,e){var r=-1,n=t.length,i=n-1;for(e=e===void 0?n:e;++r<e;){var o=ok(r,i),a=t[o];t[o]=t[r],t[r]=a}return t.length=e,t}var uf=uz;function fz(t){return uf(Qi(t))}var ck=fz;function dz(t){return uf(GR(t))}var lk=dz;function mz(t){var e=Be(t)?ck:lk;return e(t)}var yT=mz;var hz=qs(function(t,e){if(t==null)return[];var r=e.length;return r>1&&Vo(t,e[0],e[1])?e=[]:r>2&&Vo(e[0],e[1],e[2])&&(e=[e[0]]),JR(t,ta(e,1),[])}),xT=hz;function gz(t,e){return t&&t.length?QR(t,$n(e,2)):0}var ff=gz;var yz=1/0,xz=ro&&1/ia(new ro([,-0]))[1]==yz?function(t){return new ro(t)}:Vu,pk=xz;var Tz=200;function Sz(t,e,r){var n=-1,i=fE,o=t.length,a=!0,l=[],p=l;if(r)a=!1,i=HR;else if(o>=Tz){var u=e?null:pk(t);if(u)return ia(u);a=!1,i=tf,p=new ef}else p=e?[]:l;e:for(;++n<o;){var d=t[n],h=e?e(d):d;if(d=r||d!==0?d:0,a&&h===h){for(var g=p.length;g--;)if(p[g]===h)continue e;e&&p.push(h),l.push(d)}else i(p,h,r)||(p!==l&&p.push(h),l.push(d))}return l}var df=Sz;function vz(t){return t&&t.length?df(t):[]}var vi=vz;function bz(t,e){return e=typeof e=="function"?e:void 0,t&&t.length?df(t,void 0,e):[]}var Hc=bz;var wz=Math.max;function _z(t){if(!(t&&t.length))return[];var e=0;return t=Zu(t,function(r){if(BR(r))return e=wz(r.length,e),!0}),Gu(e,function(r){return rn(t,af(r))})}var uk=_z;var Ez=qs(uk),St=Ez;var mf=class{constructor(){this.commands={clipboardPaste:void 0,clipboardCopy:void 0,toggleLineComment:void 0,indentLine:void 0,outdentLine:void 0,rename:void 0,quickFix:void 0,revealDefinition:void 0,revealTypeDefinition:void 0,showHover:void 0,showDebugHover:void 0,extractVariable:void 0,fold:void 0,highlight:{acceptsLocation:!0},unfold:void 0,showReferences:void 0,insertLineAfter:void 0}}};var Wc=class{constructor(){this.clipboardContents=""}async readText(){return this.clipboardContents}async writeText(e){this.clipboardContents=e}};var Wt=class{constructor(){this.listeners=[];this.notifyListeners=(...e)=>{this.listeners.forEach(r=>r(...e))};this.registerListener=this.registerListener.bind(this)}registerListener(e){return this.listeners.push(e),{dispose:()=>{er(this.listeners,e)}}}};var hf={tokenHatSplittingMode:{preserveCase:!1,lettersToPreserve:[],symbolsToPreserve:[]},wordSeparators:["_"],decorationDebounceDelayMs:50,experimental:{snippetsDir:void 0,hatStability:"balanced",keyboardTargetFollowsSelection:!1},commandHistory:!1,debug:!1};var $c=class{constructor(){this.notifier=new Wt;this.mocks={...hf};this.scopes=[];this.onDidChangeConfiguration=this.notifier.registerListener;this.onDidChangeConfiguration=this.onDidChangeConfiguration.bind(this)}getOwnConfiguration(e,r){if(r!=null){for(let{scope:n,values:i}of this.scopes)if(kz(n,r))return Ho(i,e)??Ho(this.mocks,e)}return Ho(this.mocks,e)}mockConfiguration(e,r){this.mocks[e]=r,this.notifier.notifyListeners()}mockConfigurationScope(e,r,n=!1){this.scopes.push({scope:e,values:r}),n||this.notifier.notifyListeners()}};function kz(t,e){return t.languageId===e.languageId}var gf={hideInferenceWarning:!1,tutorialProgress:{}};var jc=class{constructor(){this.data={...gf}}get(e){return this.data[e]}set(e,r){return this.data[e]=r,Promise.resolve()}};var qc=class{async showMessage(e,r,n,...i){}};var yf=class{constructor(){this.configuration=new $c;this.messages=new qc;this.keyValueStore=new jc;this.clipboard=new Wc;this.capabilities=new mf;this.runMode="test";this.cursorlessVersion="0.0.0";this.workspaceFolders=void 0;this.disposables=[];this.quickPickReturnValue=void 0;this.onDidOpenTextDocument=sa;this.onDidCloseTextDocument=sa;this.onDidChangeActiveTextEditor=sa;this.onDidChangeVisibleTextEditors=sa;this.onDidChangeTextEditorSelection=sa;this.onDidChangeTextEditorVisibleRanges=sa}async flashRanges(e){}async setHighlightRanges(e,r,n){}mockAssetsRoot(e){this.assetsRoot_=e}get assetsRoot(){if(this.assetsRoot_==null)throw Error("Field `assetsRoot` has not yet been mocked");return this.assetsRoot_}get activeTextEditor(){throw Error("Not implemented")}get activeEditableTextEditor(){throw Error("Not implemented")}get visibleTextEditors(){throw Error("Not implemented")}getEditableTextEditor(e){throw Error("Not implemented")}findInDocument(e,r){throw Error("Not implemented")}findInWorkspace(e){throw Error("Not implemented")}openTextDocument(e){throw Error("Not implemented")}openUntitledTextDocument(e){throw Error("Not implemented")}setQuickPickReturnValue(e){this.quickPickReturnValue=e}async showQuickPick(e,r){return this.quickPickReturnValue}showInputBox(e){throw Error("Not implemented")}executeCommand(e,...r){throw new Error("Method not implemented.")}onDidChangeTextDocument(e){throw Error("Not implemented")}disposeOnExit(...e){return this.disposables.push(...e),()=>er(this.disposables,...e)}exit(){this.disposables.forEach(e=>e.dispose())}};function sa(){return{dispose(){}}}var ce=class t{constructor(e,r){this.line=e,this.character=r}isEqual(e){return this.line===e.line&&this.character===e.character}isBefore(e){return this.line<e.line?!0:this.line>e.line?!1:this.character<e.character}isAfter(e){return this.line>e.line?!0:this.line<e.line?!1:this.character>e.character}isBeforeOrEqual(e){return this.isEqual(e)||this.isBefore(e)}isAfterOrEqual(e){return this.isEqual(e)||this.isAfter(e)}compareTo(e){return this.isBefore(e)?-1:this.isAfter(e)?1:0}with(e,r){return new t(e??this.line,r??this.character)}translate(e,r){return new t(this.line+(e??0),this.character+(r??0))}toEmptyRange(){return new W(this,this)}concise(){return`${this.line}:${this.character}`}toString(){return this.concise()}};function fk(t,e,r){return t.positionAt(t.offsetAt(e)+r)}var W=class t{constructor(...e){let[r,n]=e.length===2?e:[new ce(e[0],e[1]),new ce(e[2],e[3])];r.isBefore(n)?(this.start=r,this.end=n):(this.start=n,this.end=r)}get isEmpty(){return this.start.isEqual(this.end)}get isSingleLine(){return this.start.line===this.end.line}isRangeEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}contains(e){let[r,n]=e instanceof ce?[e,e]:[e.start,e.end];return r.isAfterOrEqual(this.start)&&n.isBeforeOrEqual(this.end)}intersection(e){let r=this.start.isAfter(e.start)?this.start:e.start,n=this.end.isBefore(e.end)?this.end:e.end;return r.isBeforeOrEqual(n)?new t(r,n):void 0}union(e){return new t(this.start.isBefore(e.start)?this.start:e.start,this.end.isAfter(e.end)?this.end:e.end)}with(e,r){return new t(e??this.start,r??this.end)}toSelection(e){return e?new Te(this.end,this.start):new Te(this.start,this.end)}concise(){return`${this.start.concise()}-${this.end.concise()}`}toString(){return this.concise()}};function Pz(t){let{source:e,flags:r}=t;return new RegExp(`(${e})$`,r.replace("m",""))}function Mz(t){let{source:e,flags:r}=t;return new RegExp(`^(${e})`,r.replace("m",""))}function dk(t){let e=new Map;function r(n){let i=e.get(n);return i==null&&(i=t(n),e.set(n,i)),i}return r}var xf=dk(Pz),Tf=dk(Mz);function TT(t,e){return e.lastIndex=0,t.matchAll(e)}function jn(t,e,r){return Array.from(TT(t,e),r)}function zc(t,e){return t.lastIndex=0,t.test(e)}function mk(t,e){return t.lastIndex=0,e.match(t)}function Gc(t,e){return jn(t,e,r=>({index:r.index,text:r[0]}))}var aa=class{constructor(e){this.original=e;this.configuration=e.configuration,this.keyValueStore=e.keyValueStore,this.clipboard=e.clipboard,this.messages=e.messages,this.capabilities=e.capabilities}flashRanges(e){return this.original.flashRanges(e)}setHighlightRanges(e,r,n){return this.original.setHighlightRanges(e,r,n)}onDidOpenTextDocument(e,r,n){return this.original.onDidOpenTextDocument(e,r,n)}onDidCloseTextDocument(e,r,n){return this.original.onDidCloseTextDocument(e,r,n)}onDidChangeActiveTextEditor(e,r,n){return this.original.onDidChangeActiveTextEditor(e,r,n)}onDidChangeVisibleTextEditors(e,r,n){return this.original.onDidChangeVisibleTextEditors(e,r,n)}onDidChangeTextEditorSelection(e,r,n){return this.original.onDidChangeTextEditorSelection(e,r,n)}onDidChangeTextEditorVisibleRanges(e,r,n){return this.original.onDidChangeTextEditorVisibleRanges(e,r,n)}get activeTextEditor(){return this.original.activeTextEditor}get activeEditableTextEditor(){return this.original.activeEditableTextEditor}get visibleTextEditors(){return this.original.visibleTextEditors}get cursorlessVersion(){return this.original.cursorlessVersion}get assetsRoot(){return this.original.assetsRoot}get runMode(){return this.original.runMode}get workspaceFolders(){return this.original.workspaceFolders}findInDocument(e,r){return this.original.findInDocument(e,r)}findInWorkspace(e){return this.original.findInWorkspace(e)}openTextDocument(e){return this.original.openTextDocument(e)}openUntitledTextDocument(e){return this.original.openUntitledTextDocument(e)}showQuickPick(e,r){return this.original.showQuickPick(e,r)}showInputBox(e){return this.original.showInputBox(e)}getEditableTextEditor(e){return this.original.getEditableTextEditor(e)}executeCommand(e,...r){return this.original.executeCommand(e,...r)}onDidChangeTextDocument(e){return this.original.onDidChangeTextDocument(e)}disposeOnExit(...e){return this.original.disposeOnExit(...e)}};var Sf=class extends aa{constructor(r,n,i,o){super(r);this.fakeIde=n;this.isSilent=i;this.cursorlessSnippetsDir=o;this.messages=i?n.messages:r.messages,this.configuration=n.configuration,this.keyValueStore=n.keyValueStore,this.initializeConfiguration()}initializeConfiguration(){this.configuration.mockConfigurationScope({languageId:"css"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfigurationScope({languageId:"scss"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfigurationScope({languageId:"shellscript"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfiguration("experimental",{hatStability:this.configuration.getOwnConfiguration("experimental.hatStability"),snippetsDir:this.cursorlessSnippetsDir,keyboardTargetFollowsSelection:!1})}flashRanges(r){return this.isSilent?this.fakeIde.flashRanges(r):super.flashRanges(r)}setHighlightRanges(r,n,i){return this.isSilent?this.fakeIde.setHighlightRanges(r,n,i):super.setHighlightRanges(r,n,i)}async showQuickPick(r,n){return this.isSilent?this.fakeIde.showQuickPick(r,n):super.showQuickPick(r,n)}};function Kc(t,e,r,...n){return t.showMessage("warning",e,r,...n)}function it(t,e,r,...n){return t.showMessage("error",e,r,...n)}var oe=(i=>(i[i.supported=0]="supported",i[i.supportedLegacy=1]="supportedLegacy",i[i.unsupported=2]="unsupported",i[i.notApplicable=3]="notApplicable",i))(oe||{});var{supported:tt,unsupported:Zle,notApplicable:hk}=oe,ST={ifStatement:tt,disqualifyDelimiter:tt,"comment.line":tt,"comment.block":tt,"string.singleLine":tt,"textFragment.comment.line":tt,"textFragment.comment.block":tt,"textFragment.string.singleLine":tt,class:tt,className:tt,namedFunction:tt,"name.function":tt,"name.class":tt,"name.field":tt,functionName:tt,"name.argument.formal":tt,"name.argument.formal.iteration":tt,"name.variable":tt,"value.variable":tt,"name.assignment":tt,"value.assignment":tt,"statement.class":tt,"type.class":tt,"type.field":tt,"value.argument.formal":hk,"value.argument.formal.iteration":hk};var{supported:Jle,unsupported:epe,notApplicable:tpe}=oe;var{supported:gk,unsupported:ope,notApplicable:spe}=oe,Az={...ST,"value.argument.formal":gk,"value.argument.formal.iteration":gk};var{supported:lpe,unsupported:ppe,notApplicable:upe}=oe;var{supported:Qc,unsupported:Dz,notApplicable:mpe}=oe,vT={"comment.block":Qc,"string.singleLine":Qc,"name.iteration.block":Qc,"name.iteration.document":Qc,disqualifyDelimiter:Qc,"comment.line":Dz};var{supported:ype,unsupported:xpe,notApplicable:Tpe}=oe;var{supported:bpe,unsupported:wpe,notApplicable:_pe}=oe;var{supported:kpe,notApplicable:Ppe}=oe;var{supported:Dpe,notApplicable:Ipe}=oe;var{supported:z,unsupported:Ope,notApplicable:nn}=oe,bT={list:z,map:z,ifStatement:z,regularExpression:z,switchStatementSubject:z,fieldAccess:z,disqualifyDelimiter:z,"textFragment.string.singleLine":z,"textFragment.string.multiLine":z,"textFragment.comment.line":z,"textFragment.comment.block":z,statement:z,"statement.iteration.document":z,"statement.iteration.block":z,class:z,className:z,anonymousFunction:z,namedFunction:z,"namedFunction.iteration.document":z,"namedFunction.method":z,"namedFunction.method.iteration.class":z,"namedFunction.constructor":z,functionName:z,"functionName.iteration.document":z,"functionName.method":z,"functionName.method.iteration.class":z,"functionName.constructor":z,functionCall:z,"functionCall.constructor":z,functionCallee:z,"functionCallee.constructor":z,"argument.actual":z,"argument.actual.iteration":z,"argument.actual.method":z,"argument.actual.method.iteration":z,"argument.actual.constructor":z,"argument.actual.constructor.iteration":z,"argument.formal":z,"argument.formal.iteration":z,"argument.formal.method":z,"argument.formal.method.iteration":z,"argument.formal.constructor":z,"argument.formal.constructor.iteration":z,"comment.line":z,"comment.block":z,"string.singleLine":z,"string.multiLine":z,"branch.if":z,"branch.if.iteration":z,"branch.try":z,"branch.switchCase":z,"branch.switchCase.iteration":z,"branch.ternary":z,"condition.if":z,"condition.while":z,"condition.doWhile":z,"condition.for":z,"condition.ternary":z,"condition.switchCase":z,"name.argument.formal":z,"name.argument.formal.iteration":z,"name.argument.formal.method":z,"name.argument.formal.method.iteration":z,"name.argument.formal.constructor":z,"name.argument.formal.constructor.iteration":z,"name.foreach":z,"name.assignment":z,"name.assignment.pattern":z,"name.variable":z,"name.variable.pattern":z,"name.function":z,"name.method":z,"name.constructor":z,"name.class":z,"name.field":z,"key.mapPair":z,"key.mapPair.iteration":z,"value.argument.formal":z,"value.argument.formal.iteration":z,"value.argument.formal.method":z,"value.argument.formal.method.iteration":z,"value.argument.formal.constructor":z,"value.argument.formal.constructor.iteration":z,"value.mapPair":z,"value.mapPair.iteration":z,"value.assignment":z,"value.variable":z,"value.variable.pattern":z,"value.foreach":z,"value.return":z,"value.return.lambda":z,"value.field":z,"collectionItem.unenclosed":z},wT={element:z,tags:z,startTag:z,endTag:z,attribute:z,"key.attribute":z,"value.attribute":z},Iz={...bT,...wT,"type.variable":nn,"type.argument.formal":nn,"type.argument.formal.iteration":nn,"type.argument.formal.method":nn,"type.argument.formal.method.iteration":nn,"type.argument.formal.constructor":nn,"type.argument.formal.constructor.iteration":nn,"type.return":nn,"type.field":nn,"type.foreach":nn,"type.interface":nn,command:nn};var{supported:_T}=oe,Zc={"comment.line":_T,"comment.block":_T,map:_T};var{supported:Hpe,unsupported:Wpe,notApplicable:$pe}=oe,Fz={...Zc};var{supported:Gpe,unsupported:Kpe,notApplicable:Qpe}=oe,Cz={...Zc};var{supported:Xpe,unsupported:Jpe,notApplicable:eue}=oe;var{supported:nue,notApplicable:iue}=oe;var{supported:aue,unsupported:cue,notApplicable:lue}=oe;var{supported:fue,unsupported:due,notApplicable:mue}=oe;var{supported:yue,notApplicable:xue}=oe;var{supported:vue,unsupported:bue,notApplicable:wue}=oe;var{supported:Rue,unsupported:kue,notApplicable:Pue}=oe;var{supported:Due,unsupported:Iue,notApplicable:Fue}=oe;var{supported:Nue,unsupported:Lue,notApplicable:Uue}=oe;var{supported:ca,unsupported:Wue,notApplicable:$ue}=oe,Oz={...vT,"namedFunction.iteration":ca,"namedFunction.iteration.document":ca,"functionName.iteration":ca,"functionName.iteration.document":ca,"comment.line":ca,disqualifyDelimiter:ca};var{supported:zue}=oe;var{supported:tr}=oe,ET={...bT,"name.field":tr,"type.argument.formal":tr,"type.argument.formal.iteration":tr,"type.argument.formal.method":tr,"type.argument.formal.method.iteration":tr,"type.argument.formal.constructor":tr,"type.argument.formal.constructor.iteration":tr,"type.alias":tr,"type.cast":tr,"type.field":tr,"type.interface":tr,"type.return":tr,"type.variable":tr,"value.field":tr,"value.typeAlias":tr};var{supported:efe,unsupported:tfe,notApplicable:rfe}=oe,Nz={...ET,...wT};var{supported:ofe,unsupported:sfe,notApplicable:afe}=oe;var{supported:pfe,unsupported:ufe,notApplicable:ffe}=oe;var la=["that","source","instanceReference","keyboard"];var Te=class extends W{get isReversed(){return this.active.isBefore(this.anchor)}constructor(...e){let[r,n]=e.length===2?e:[new ce(e[0],e[1]),new ce(e[2],e[3])];super(r,n),this.anchor=r,this.active=n}isEqual(e){return this.anchor.isEqual(e.anchor)&&this.active.isEqual(e.active)}concise(){return`${this.anchor.concise()}->${this.active.concise()}`}toString(){return this.concise()}};function xk({line:t,character:e}){return new ce(t,e)}function vf({start:t,end:e}){return new W(xk(t),xk(e))}function on({start:t,end:e}){return{type:"line",start:t.line,end:e.line}}function vt({start:t,end:e}){return{type:"character",start:t,end:e}}function Yc(t){return{start:bf(t.start),end:bf(t.end)}}function Tk(t){return{anchor:bf(t.anchor),active:bf(t.active)}}function bf({line:t,character:e}){return{line:t,character:e}}function Lk(t){return typeof t>"u"||t===null}function Lz(t){return typeof t=="object"&&t!==null}function Uz(t){return Array.isArray(t)?t:Lk(t)?[]:[t]}function Vz(t,e){var r,n,i,o;if(e)for(o=Object.keys(e),r=0,n=o.length;r<n;r+=1)i=o[r],t[i]=e[i];return t}function Bz(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}function Hz(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var Wz=Lk,$z=Lz,jz=Uz,qz=Bz,zz=Hz,Gz=Vz,bt={isNothing:Wz,isObject:$z,toArray:jz,repeat:qz,isNegativeZero:zz,extend:Gz};function Uk(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}function Jc(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=Uk(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Jc.prototype=Object.create(Error.prototype);Jc.prototype.constructor=Jc;Jc.prototype.toString=function(e){return this.name+": "+Uk(this,e)};var hr=Jc;function RT(t,e,r,n,i){var o="",a="",l=Math.floor(i/2)-1;return n-e>l&&(o=" ... ",e=n-l+o.length),r-n>l&&(a=" ...",r=n+l-a.length),{str:o+t.slice(e,r).replace(/\t/g,"\u2192")+a,pos:n-e+o.length}}function kT(t,e){return bt.repeat(" ",e-t.length)+t}function Kz(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],o,a=-1;o=r.exec(t.buffer);)i.push(o.index),n.push(o.index+o[0].length),t.position<=o.index&&a<0&&(a=n.length-2);a<0&&(a=n.length-1);var l="",p,u,d=Math.min(t.line+e.linesAfter,i.length).toString().length,h=e.maxLength-(e.indent+d+3);for(p=1;p<=e.linesBefore&&!(a-p<0);p++)u=RT(t.buffer,n[a-p],i[a-p],t.position-(n[a]-n[a-p]),h),l=bt.repeat(" ",e.indent)+kT((t.line-p+1).toString(),d)+" | "+u.str+`
`+l;for(u=RT(t.buffer,n[a],i[a],t.position,h),l+=bt.repeat(" ",e.indent)+kT((t.line+1).toString(),d)+" | "+u.str+`
`,l+=bt.repeat("-",e.indent+d+3+u.pos)+`^
`,p=1;p<=e.linesAfter&&!(a+p>=i.length);p++)u=RT(t.buffer,n[a+p],i[a+p],t.position-(n[a]-n[a+p]),h),l+=bt.repeat(" ",e.indent)+kT((t.line+p+1).toString(),d)+" | "+u.str+`
`;return l.replace(/\n$/,"")}var Qz=Kz,Zz=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],Yz=["scalar","sequence","mapping"];function Xz(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}function Jz(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(Zz.indexOf(r)===-1)throw new hr('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=Xz(e.styleAliases||null),Yz.indexOf(this.kind)===-1)throw new hr('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var Ct=Jz;function bk(t,e){var r=[];return t[e].forEach(function(n){var i=r.length;r.forEach(function(o,a){o.tag===n.tag&&o.kind===n.kind&&o.multi===n.multi&&(i=a)}),r[i]=n}),r}function eG(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}function MT(t){return this.extend(t)}MT.prototype.extend=function(e){var r=[],n=[];if(e instanceof Ct)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new hr("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(o){if(!(o instanceof Ct))throw new hr("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new hr("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new hr("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(o){if(!(o instanceof Ct))throw new hr("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(MT.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=bk(i,"implicit"),i.compiledExplicit=bk(i,"explicit"),i.compiledTypeMap=eG(i.compiledImplicit,i.compiledExplicit),i};var tG=MT,rG=new Ct("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),nG=new Ct("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),iG=new Ct("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),oG=new tG({explicit:[rG,nG,iG]});function sG(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function aG(){return null}function cG(t){return t===null}var lG=new Ct("tag:yaml.org,2002:null",{kind:"scalar",resolve:sG,construct:aG,predicate:cG,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function pG(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function uG(t){return t==="true"||t==="True"||t==="TRUE"}function fG(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var dG=new Ct("tag:yaml.org,2002:bool",{kind:"scalar",resolve:pG,construct:uG,predicate:fG,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function mG(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function hG(t){return 48<=t&&t<=55}function gG(t){return 48<=t&&t<=57}function yG(t){if(t===null)return!1;var e=t.length,r=0,n=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!mG(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!hG(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!gG(t.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function xG(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}function TG(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!bt.isNegativeZero(t)}var SG=new Ct("tag:yaml.org,2002:int",{kind:"scalar",resolve:yG,construct:xG,predicate:TG,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),vG=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function bG(t){return!(t===null||!vG.test(t)||t[t.length-1]==="_")}function wG(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}var _G=/^[-+]?[0-9]+e/;function EG(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(bt.isNegativeZero(t))return"-0.0";return r=t.toString(10),_G.test(r)?r.replace("e",".e"):r}function RG(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||bt.isNegativeZero(t))}var kG=new Ct("tag:yaml.org,2002:float",{kind:"scalar",resolve:bG,construct:wG,predicate:RG,represent:EG,defaultStyle:"lowercase"}),PG=oG.extend({implicit:[lG,dG,SG,kG]}),MG=PG,Vk=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Bk=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function AG(t){return t===null?!1:Vk.exec(t)!==null||Bk.exec(t)!==null}function DG(t){var e,r,n,i,o,a,l,p=0,u=null,d,h,g;if(e=Vk.exec(t),e===null&&(e=Bk.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(o=+e[4],a=+e[5],l=+e[6],e[7]){for(p=e[7].slice(0,3);p.length<3;)p+="0";p=+p}return e[9]&&(d=+e[10],h=+(e[11]||0),u=(d*60+h)*6e4,e[9]==="-"&&(u=-u)),g=new Date(Date.UTC(r,n,i,o,a,l,p)),u&&g.setTime(g.getTime()-u),g}function IG(t){return t.toISOString()}var FG=new Ct("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:AG,construct:DG,instanceOf:Date,represent:IG});function CG(t){return t==="<<"||t===null}var OG=new Ct("tag:yaml.org,2002:merge",{kind:"scalar",resolve:CG}),CT=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function NG(t){if(t===null)return!1;var e,r,n=0,i=t.length,o=CT;for(r=0;r<i;r++)if(e=o.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}function LG(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,o=CT,a=0,l=[];for(e=0;e<i;e++)e%4===0&&e&&(l.push(a>>16&255),l.push(a>>8&255),l.push(a&255)),a=a<<6|o.indexOf(n.charAt(e));return r=i%4*6,r===0?(l.push(a>>16&255),l.push(a>>8&255),l.push(a&255)):r===18?(l.push(a>>10&255),l.push(a>>2&255)):r===12&&l.push(a>>4&255),new Uint8Array(l)}function UG(t){var e="",r=0,n,i,o=t.length,a=CT;for(n=0;n<o;n++)n%3===0&&n&&(e+=a[r>>18&63],e+=a[r>>12&63],e+=a[r>>6&63],e+=a[r&63]),r=(r<<8)+t[n];return i=o%3,i===0?(e+=a[r>>18&63],e+=a[r>>12&63],e+=a[r>>6&63],e+=a[r&63]):i===2?(e+=a[r>>10&63],e+=a[r>>4&63],e+=a[r<<2&63],e+=a[64]):i===1&&(e+=a[r>>2&63],e+=a[r<<4&63],e+=a[64],e+=a[64]),e}function VG(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var BG=new Ct("tag:yaml.org,2002:binary",{kind:"scalar",resolve:NG,construct:LG,predicate:VG,represent:UG}),HG=Object.prototype.hasOwnProperty,WG=Object.prototype.toString;function $G(t){if(t===null)return!0;var e=[],r,n,i,o,a,l=t;for(r=0,n=l.length;r<n;r+=1){if(i=l[r],a=!1,WG.call(i)!=="[object Object]")return!1;for(o in i)if(HG.call(i,o))if(!a)a=!0;else return!1;if(!a)return!1;if(e.indexOf(o)===-1)e.push(o);else return!1}return!0}function jG(t){return t!==null?t:[]}var qG=new Ct("tag:yaml.org,2002:omap",{kind:"sequence",resolve:$G,construct:jG}),zG=Object.prototype.toString;function GG(t){if(t===null)return!0;var e,r,n,i,o,a=t;for(o=new Array(a.length),e=0,r=a.length;e<r;e+=1){if(n=a[e],zG.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;o[e]=[i[0],n[i[0]]]}return!0}function KG(t){if(t===null)return[];var e,r,n,i,o,a=t;for(o=new Array(a.length),e=0,r=a.length;e<r;e+=1)n=a[e],i=Object.keys(n),o[e]=[i[0],n[i[0]]];return o}var QG=new Ct("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:GG,construct:KG}),ZG=Object.prototype.hasOwnProperty;function YG(t){if(t===null)return!0;var e,r=t;for(e in r)if(ZG.call(r,e)&&r[e]!==null)return!1;return!0}function XG(t){return t!==null?t:{}}var JG=new Ct("tag:yaml.org,2002:set",{kind:"mapping",resolve:YG,construct:XG}),OT=MG.extend({implicit:[FG,OG],explicit:[BG,qG,QG,JG]}),io=Object.prototype.hasOwnProperty,wf=1,Hk=2,Wk=3,_f=4,PT=1,eK=2,wk=3,tK=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,rK=/[\x85\u2028\u2029]/,nK=/[,\[\]\{\}]/,$k=/^(?:!|!!|![a-z\-]+!)$/i,jk=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function _k(t){return Object.prototype.toString.call(t)}function qn(t){return t===10||t===13}function jo(t){return t===9||t===32}function gr(t){return t===9||t===32||t===10||t===13}function ua(t){return t===44||t===91||t===93||t===123||t===125}function iK(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function oK(t){return t===120?2:t===117?4:t===85?8:0}function sK(t){return 48<=t&&t<=57?t-48:-1}function Ek(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}function aK(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var qk=new Array(256),zk=new Array(256);for($o=0;$o<256;$o++)qk[$o]=Ek($o)?1:0,zk[$o]=Ek($o);var $o;function cK(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||OT,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Gk(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=Qz(r),new hr(e,r)}function ae(t,e){throw Gk(t,e)}function Ef(t,e){t.onWarning&&t.onWarning.call(null,Gk(t,e))}var Rk={YAML:function(e,r,n){var i,o,a;e.version!==null&&ae(e,"duplication of %YAML directive"),n.length!==1&&ae(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&ae(e,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),a=parseInt(i[2],10),o!==1&&ae(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=a<2,a!==1&&a!==2&&Ef(e,"unsupported YAML version of the document")},TAG:function(e,r,n){var i,o;n.length!==2&&ae(e,"TAG directive accepts exactly two arguments"),i=n[0],o=n[1],$k.test(i)||ae(e,"ill-formed tag handle (first argument) of the TAG directive"),io.call(e.tagMap,i)&&ae(e,'there is a previously declared suffix for "'+i+'" tag handle'),jk.test(o)||ae(e,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{ae(e,"tag prefix is malformed: "+o)}e.tagMap[i]=o}};function no(t,e,r,n){var i,o,a,l;if(e<r){if(l=t.input.slice(e,r),n)for(i=0,o=l.length;i<o;i+=1)a=l.charCodeAt(i),a===9||32<=a&&a<=1114111||ae(t,"expected valid JSON character");else tK.test(l)&&ae(t,"the stream contains non-printable characters");t.result+=l}}function kk(t,e,r,n){var i,o,a,l;for(bt.isObject(r)||ae(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),a=0,l=i.length;a<l;a+=1)o=i[a],io.call(e,o)||(e[o]=r[o],n[o]=!0)}function fa(t,e,r,n,i,o,a,l,p){var u,d;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),u=0,d=i.length;u<d;u+=1)Array.isArray(i[u])&&ae(t,"nested arrays are not supported inside keys"),typeof i=="object"&&_k(i[u])==="[object Object]"&&(i[u]="[object Object]");if(typeof i=="object"&&_k(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(u=0,d=o.length;u<d;u+=1)kk(t,e,o[u],r);else kk(t,e,o,r);else!t.json&&!io.call(r,i)&&io.call(e,i)&&(t.line=a||t.line,t.lineStart=l||t.lineStart,t.position=p||t.position,ae(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):e[i]=o,delete r[i];return e}function NT(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):ae(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function gt(t,e,r){for(var n=0,i=t.input.charCodeAt(t.position);i!==0;){for(;jo(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(qn(i))for(NT(t),i=t.input.charCodeAt(t.position),n++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return r!==-1&&n!==0&&t.lineIndent<r&&Ef(t,"deficient indentation"),n}function Pf(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||gr(r)))}function LT(t,e){e===1?t.result+=" ":e>1&&(t.result+=bt.repeat(`
`,e-1))}function lK(t,e,r){var n,i,o,a,l,p,u,d,h=t.kind,g=t.result,x;if(x=t.input.charCodeAt(t.position),gr(x)||ua(x)||x===35||x===38||x===42||x===33||x===124||x===62||x===39||x===34||x===37||x===64||x===96||(x===63||x===45)&&(i=t.input.charCodeAt(t.position+1),gr(i)||r&&ua(i)))return!1;for(t.kind="scalar",t.result="",o=a=t.position,l=!1;x!==0;){if(x===58){if(i=t.input.charCodeAt(t.position+1),gr(i)||r&&ua(i))break}else if(x===35){if(n=t.input.charCodeAt(t.position-1),gr(n))break}else{if(t.position===t.lineStart&&Pf(t)||r&&ua(x))break;if(qn(x))if(p=t.line,u=t.lineStart,d=t.lineIndent,gt(t,!1,-1),t.lineIndent>=e){l=!0,x=t.input.charCodeAt(t.position);continue}else{t.position=a,t.line=p,t.lineStart=u,t.lineIndent=d;break}}l&&(no(t,o,a,!1),LT(t,t.line-p),o=a=t.position,l=!1),jo(x)||(a=t.position+1),x=t.input.charCodeAt(++t.position)}return no(t,o,a,!1),t.result?!0:(t.kind=h,t.result=g,!1)}function pK(t,e){var r,n,i;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(no(t,n,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)n=t.position,t.position++,i=t.position;else return!0;else qn(r)?(no(t,n,i,!0),LT(t,gt(t,!1,e)),n=i=t.position):t.position===t.lineStart&&Pf(t)?ae(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);ae(t,"unexpected end of the stream within a single quoted scalar")}function uK(t,e){var r,n,i,o,a,l;if(l=t.input.charCodeAt(t.position),l!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(l=t.input.charCodeAt(t.position))!==0;){if(l===34)return no(t,r,t.position,!0),t.position++,!0;if(l===92){if(no(t,r,t.position,!0),l=t.input.charCodeAt(++t.position),qn(l))gt(t,!1,e);else if(l<256&&qk[l])t.result+=zk[l],t.position++;else if((a=oK(l))>0){for(i=a,o=0;i>0;i--)l=t.input.charCodeAt(++t.position),(a=iK(l))>=0?o=(o<<4)+a:ae(t,"expected hexadecimal character");t.result+=aK(o),t.position++}else ae(t,"unknown escape sequence");r=n=t.position}else qn(l)?(no(t,r,n,!0),LT(t,gt(t,!1,e)),r=n=t.position):t.position===t.lineStart&&Pf(t)?ae(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}ae(t,"unexpected end of the stream within a double quoted scalar")}function fK(t,e){var r=!0,n,i,o,a=t.tag,l,p=t.anchor,u,d,h,g,x,_=Object.create(null),w,C,M,U;if(U=t.input.charCodeAt(t.position),U===91)d=93,x=!1,l=[];else if(U===123)d=125,x=!0,l={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=l),U=t.input.charCodeAt(++t.position);U!==0;){if(gt(t,!0,e),U=t.input.charCodeAt(t.position),U===d)return t.position++,t.tag=a,t.anchor=p,t.kind=x?"mapping":"sequence",t.result=l,!0;r?U===44&&ae(t,"expected the node content, but found ','"):ae(t,"missed comma between flow collection entries"),C=w=M=null,h=g=!1,U===63&&(u=t.input.charCodeAt(t.position+1),gr(u)&&(h=g=!0,t.position++,gt(t,!0,e))),n=t.line,i=t.lineStart,o=t.position,da(t,e,wf,!1,!0),C=t.tag,w=t.result,gt(t,!0,e),U=t.input.charCodeAt(t.position),(g||t.line===n)&&U===58&&(h=!0,U=t.input.charCodeAt(++t.position),gt(t,!0,e),da(t,e,wf,!1,!0),M=t.result),x?fa(t,l,_,C,w,M,n,i,o):h?l.push(fa(t,null,_,C,w,M,n,i,o)):l.push(w),gt(t,!0,e),U=t.input.charCodeAt(t.position),U===44?(r=!0,U=t.input.charCodeAt(++t.position)):r=!1}ae(t,"unexpected end of the stream within a flow collection")}function dK(t,e){var r,n,i=PT,o=!1,a=!1,l=e,p=0,u=!1,d,h;if(h=t.input.charCodeAt(t.position),h===124)n=!1;else if(h===62)n=!0;else return!1;for(t.kind="scalar",t.result="";h!==0;)if(h=t.input.charCodeAt(++t.position),h===43||h===45)PT===i?i=h===43?wk:eK:ae(t,"repeat of a chomping mode identifier");else if((d=sK(h))>=0)d===0?ae(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):a?ae(t,"repeat of an indentation width identifier"):(l=e+d-1,a=!0);else break;if(jo(h)){do h=t.input.charCodeAt(++t.position);while(jo(h));if(h===35)do h=t.input.charCodeAt(++t.position);while(!qn(h)&&h!==0)}for(;h!==0;){for(NT(t),t.lineIndent=0,h=t.input.charCodeAt(t.position);(!a||t.lineIndent<l)&&h===32;)t.lineIndent++,h=t.input.charCodeAt(++t.position);if(!a&&t.lineIndent>l&&(l=t.lineIndent),qn(h)){p++;continue}if(t.lineIndent<l){i===wk?t.result+=bt.repeat(`
`,o?1+p:p):i===PT&&o&&(t.result+=`
`);break}for(n?jo(h)?(u=!0,t.result+=bt.repeat(`
`,o?1+p:p)):u?(u=!1,t.result+=bt.repeat(`
`,p+1)):p===0?o&&(t.result+=" "):t.result+=bt.repeat(`
`,p):t.result+=bt.repeat(`
`,o?1+p:p),o=!0,a=!0,p=0,r=t.position;!qn(h)&&h!==0;)h=t.input.charCodeAt(++t.position);no(t,r,t.position,!1)}return!0}function Pk(t,e){var r,n=t.tag,i=t.anchor,o=[],a,l=!1,p;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),p=t.input.charCodeAt(t.position);p!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,ae(t,"tab characters must not be used in indentation")),!(p!==45||(a=t.input.charCodeAt(t.position+1),!gr(a))));){if(l=!0,t.position++,gt(t,!0,-1)&&t.lineIndent<=e){o.push(null),p=t.input.charCodeAt(t.position);continue}if(r=t.line,da(t,e,Wk,!1,!0),o.push(t.result),gt(t,!0,-1),p=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&p!==0)ae(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return l?(t.tag=n,t.anchor=i,t.kind="sequence",t.result=o,!0):!1}function mK(t,e,r){var n,i,o,a,l,p,u=t.tag,d=t.anchor,h={},g=Object.create(null),x=null,_=null,w=null,C=!1,M=!1,U;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=h),U=t.input.charCodeAt(t.position);U!==0;){if(!C&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,ae(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),o=t.line,(U===63||U===58)&&gr(n))U===63?(C&&(fa(t,h,g,x,_,null,a,l,p),x=_=w=null),M=!0,C=!0,i=!0):C?(C=!1,i=!0):ae(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,U=n;else{if(a=t.line,l=t.lineStart,p=t.position,!da(t,r,Hk,!1,!0))break;if(t.line===o){for(U=t.input.charCodeAt(t.position);jo(U);)U=t.input.charCodeAt(++t.position);if(U===58)U=t.input.charCodeAt(++t.position),gr(U)||ae(t,"a whitespace character is expected after the key-value separator within a block mapping"),C&&(fa(t,h,g,x,_,null,a,l,p),x=_=w=null),M=!0,C=!1,i=!1,x=t.tag,_=t.result;else if(M)ae(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=u,t.anchor=d,!0}else if(M)ae(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=u,t.anchor=d,!0}if((t.line===o||t.lineIndent>e)&&(C&&(a=t.line,l=t.lineStart,p=t.position),da(t,e,_f,!0,i)&&(C?_=t.result:w=t.result),C||(fa(t,h,g,x,_,w,a,l,p),x=_=w=null),gt(t,!0,-1),U=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&U!==0)ae(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return C&&fa(t,h,g,x,_,null,a,l,p),M&&(t.tag=u,t.anchor=d,t.kind="mapping",t.result=h),M}function hK(t){var e,r=!1,n=!1,i,o,a;if(a=t.input.charCodeAt(t.position),a!==33)return!1;if(t.tag!==null&&ae(t,"duplication of a tag property"),a=t.input.charCodeAt(++t.position),a===60?(r=!0,a=t.input.charCodeAt(++t.position)):a===33?(n=!0,i="!!",a=t.input.charCodeAt(++t.position)):i="!",e=t.position,r){do a=t.input.charCodeAt(++t.position);while(a!==0&&a!==62);t.position<t.length?(o=t.input.slice(e,t.position),a=t.input.charCodeAt(++t.position)):ae(t,"unexpected end of the stream within a verbatim tag")}else{for(;a!==0&&!gr(a);)a===33&&(n?ae(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),$k.test(i)||ae(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),a=t.input.charCodeAt(++t.position);o=t.input.slice(e,t.position),nK.test(o)&&ae(t,"tag suffix cannot contain flow indicator characters")}o&&!jk.test(o)&&ae(t,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{ae(t,"tag name is malformed: "+o)}return r?t.tag=o:io.call(t.tagMap,i)?t.tag=t.tagMap[i]+o:i==="!"?t.tag="!"+o:i==="!!"?t.tag="tag:yaml.org,2002:"+o:ae(t,'undeclared tag handle "'+i+'"'),!0}function gK(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&ae(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!gr(r)&&!ua(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&ae(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function yK(t){var e,r,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!gr(n)&&!ua(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&ae(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),io.call(t.anchorMap,r)||ae(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],gt(t,!0,-1),!0}function da(t,e,r,n,i){var o,a,l,p=1,u=!1,d=!1,h,g,x,_,w,C;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=a=l=_f===r||Wk===r,n&&gt(t,!0,-1)&&(u=!0,t.lineIndent>e?p=1:t.lineIndent===e?p=0:t.lineIndent<e&&(p=-1)),p===1)for(;hK(t)||gK(t);)gt(t,!0,-1)?(u=!0,l=o,t.lineIndent>e?p=1:t.lineIndent===e?p=0:t.lineIndent<e&&(p=-1)):l=!1;if(l&&(l=u||i),(p===1||_f===r)&&(wf===r||Hk===r?w=e:w=e+1,C=t.position-t.lineStart,p===1?l&&(Pk(t,C)||mK(t,C,w))||fK(t,w)?d=!0:(a&&dK(t,w)||pK(t,w)||uK(t,w)?d=!0:yK(t)?(d=!0,(t.tag!==null||t.anchor!==null)&&ae(t,"alias node should not have any properties")):lK(t,w,wf===r)&&(d=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):p===0&&(d=l&&Pk(t,C))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&ae(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),h=0,g=t.implicitTypes.length;h<g;h+=1)if(_=t.implicitTypes[h],_.resolve(t.result)){t.result=_.construct(t.result),t.tag=_.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(io.call(t.typeMap[t.kind||"fallback"],t.tag))_=t.typeMap[t.kind||"fallback"][t.tag];else for(_=null,x=t.typeMap.multi[t.kind||"fallback"],h=0,g=x.length;h<g;h+=1)if(t.tag.slice(0,x[h].tag.length)===x[h].tag){_=x[h];break}_||ae(t,"unknown tag !<"+t.tag+">"),t.result!==null&&_.kind!==t.kind&&ae(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+_.kind+'", not "'+t.kind+'"'),_.resolve(t.result,t.tag)?(t.result=_.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):ae(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||d}function xK(t){var e=t.position,r,n,i,o=!1,a;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(a=t.input.charCodeAt(t.position))!==0&&(gt(t,!0,-1),a=t.input.charCodeAt(t.position),!(t.lineIndent>0||a!==37));){for(o=!0,a=t.input.charCodeAt(++t.position),r=t.position;a!==0&&!gr(a);)a=t.input.charCodeAt(++t.position);for(n=t.input.slice(r,t.position),i=[],n.length<1&&ae(t,"directive name must not be less than one character in length");a!==0;){for(;jo(a);)a=t.input.charCodeAt(++t.position);if(a===35){do a=t.input.charCodeAt(++t.position);while(a!==0&&!qn(a));break}if(qn(a))break;for(r=t.position;a!==0&&!gr(a);)a=t.input.charCodeAt(++t.position);i.push(t.input.slice(r,t.position))}a!==0&&NT(t),io.call(Rk,n)?Rk[n](t,n,i):Ef(t,'unknown document directive "'+n+'"')}if(gt(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,gt(t,!0,-1)):o&&ae(t,"directives end mark is expected"),da(t,t.lineIndent-1,_f,!1,!0),gt(t,!0,-1),t.checkLineBreaks&&rK.test(t.input.slice(e,t.position))&&Ef(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&Pf(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,gt(t,!0,-1));return}if(t.position<t.length-1)ae(t,"end of the stream or a document separator is expected");else return}function Kk(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new cK(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,ae(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)xK(r);return r.documents}function TK(t,e,r){e!==null&&typeof e=="object"&&typeof r>"u"&&(r=e,e=null);var n=Kk(t,r);if(typeof e!="function")return n;for(var i=0,o=n.length;i<o;i+=1)e(n[i])}function SK(t,e){var r=Kk(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new hr("expected a single document in the stream, but found more")}}var vK=TK,bK=SK,Qk={loadAll:vK,load:bK},Zk=Object.prototype.toString,Yk=Object.prototype.hasOwnProperty,UT=65279,wK=9,el=10,_K=13,EK=32,RK=33,kK=34,AT=35,PK=37,MK=38,AK=39,DK=42,Xk=44,IK=45,Rf=58,FK=61,CK=62,OK=63,NK=64,Jk=91,eP=93,LK=96,tP=123,UK=124,rP=125,$t={};$t[0]="\\0";$t[7]="\\a";$t[8]="\\b";$t[9]="\\t";$t[10]="\\n";$t[11]="\\v";$t[12]="\\f";$t[13]="\\r";$t[27]="\\e";$t[34]='\\"';$t[92]="\\\\";$t[133]="\\N";$t[160]="\\_";$t[8232]="\\L";$t[8233]="\\P";var VK=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],BK=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function HK(t,e){var r,n,i,o,a,l,p;if(e===null)return{};for(r={},n=Object.keys(e),i=0,o=n.length;i<o;i+=1)a=n[i],l=String(e[a]),a.slice(0,2)==="!!"&&(a="tag:yaml.org,2002:"+a.slice(2)),p=t.compiledTypeMap.fallback[a],p&&Yk.call(p.styleAliases,l)&&(l=p.styleAliases[l]),r[a]=l;return r}function WK(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else if(t<=4294967295)r="U",n=8;else throw new hr("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+bt.repeat("0",n-e.length)+e}var $K=1,tl=2;function jK(t){this.schema=t.schema||OT,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=bt.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=HK(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?tl:$K,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Mk(t,e){for(var r=bt.repeat(" ",e),n=0,i=-1,o="",a,l=t.length;n<l;)i=t.indexOf(`
`,n),i===-1?(a=t.slice(n),n=l):(a=t.slice(n,i+1),n=i+1),a.length&&a!==`
`&&(o+=r),o+=a;return o}function DT(t,e){return`
`+bt.repeat(" ",t.indent*e)}function qK(t,e){var r,n,i;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(i=t.implicitTypes[r],i.resolve(e))return!0;return!1}function kf(t){return t===EK||t===wK}function rl(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==UT||65536<=t&&t<=1114111}function Ak(t){return rl(t)&&t!==UT&&t!==_K&&t!==el}function Dk(t,e,r){var n=Ak(t),i=n&&!kf(t);return(r?n:n&&t!==Xk&&t!==Jk&&t!==eP&&t!==tP&&t!==rP)&&t!==AT&&!(e===Rf&&!i)||Ak(e)&&!kf(e)&&t===AT||e===Rf&&i}function zK(t){return rl(t)&&t!==UT&&!kf(t)&&t!==IK&&t!==OK&&t!==Rf&&t!==Xk&&t!==Jk&&t!==eP&&t!==tP&&t!==rP&&t!==AT&&t!==MK&&t!==DK&&t!==RK&&t!==UK&&t!==FK&&t!==CK&&t!==AK&&t!==kK&&t!==PK&&t!==NK&&t!==LK}function GK(t){return!kf(t)&&t!==Rf}function Xc(t,e){var r=t.charCodeAt(e),n;return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function nP(t){var e=/^\n* /;return e.test(t)}var iP=1,IT=2,oP=3,sP=4,pa=5;function KK(t,e,r,n,i,o,a,l){var p,u=0,d=null,h=!1,g=!1,x=n!==-1,_=-1,w=zK(Xc(t,0))&&GK(Xc(t,t.length-1));if(e||a)for(p=0;p<t.length;u>=65536?p+=2:p++){if(u=Xc(t,p),!rl(u))return pa;w=w&&Dk(u,d,l),d=u}else{for(p=0;p<t.length;u>=65536?p+=2:p++){if(u=Xc(t,p),u===el)h=!0,x&&(g=g||p-_-1>n&&t[_+1]!==" ",_=p);else if(!rl(u))return pa;w=w&&Dk(u,d,l),d=u}g=g||x&&p-_-1>n&&t[_+1]!==" "}return!h&&!g?w&&!a&&!i(t)?iP:o===tl?pa:IT:r>9&&nP(t)?pa:a?o===tl?pa:IT:g?sP:oP}function QK(t,e,r,n,i){t.dump=function(){if(e.length===0)return t.quotingType===tl?'""':"''";if(!t.noCompatMode&&(VK.indexOf(e)!==-1||BK.test(e)))return t.quotingType===tl?'"'+e+'"':"'"+e+"'";var o=t.indent*Math.max(1,r),a=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),l=n||t.flowLevel>-1&&r>=t.flowLevel;function p(u){return qK(t,u)}switch(KK(e,l,t.indent,a,p,t.quotingType,t.forceQuotes&&!n,i)){case iP:return e;case IT:return"'"+e.replace(/'/g,"''")+"'";case oP:return"|"+Ik(e,t.indent)+Fk(Mk(e,o));case sP:return">"+Ik(e,t.indent)+Fk(Mk(ZK(e,a),o));case pa:return'"'+YK(e)+'"';default:throw new hr("impossible error: invalid scalar style")}}()}function Ik(t,e){var r=nP(t)?String(e):"",n=t[t.length-1]===`
`,i=n&&(t[t.length-2]===`
`||t===`
`),o=i?"+":n?"":"-";return r+o+`
`}function Fk(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function ZK(t,e){for(var r=/(\n+)([^\n]*)/g,n=function(){var u=t.indexOf(`
`);return u=u!==-1?u:t.length,r.lastIndex=u,Ck(t.slice(0,u),e)}(),i=t[0]===`
`||t[0]===" ",o,a;a=r.exec(t);){var l=a[1],p=a[2];o=p[0]===" ",n+=l+(!i&&!o&&p!==""?`
`:"")+Ck(p,e),i=o}return n}function Ck(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,n,i=0,o,a=0,l=0,p="";n=r.exec(t);)l=n.index,l-i>e&&(o=a>i?a:l,p+=`
`+t.slice(i,o),i=o+1),a=l;return p+=`
`,t.length-i>e&&a>i?p+=t.slice(i,a)+`
`+t.slice(a+1):p+=t.slice(i),p.slice(1)}function YK(t){for(var e="",r=0,n,i=0;i<t.length;r>=65536?i+=2:i++)r=Xc(t,i),n=$t[r],!n&&rl(r)?(e+=t[i],r>=65536&&(e+=t[i+1])):e+=n||WK(r);return e}function XK(t,e,r){var n="",i=t.tag,o,a,l;for(o=0,a=r.length;o<a;o+=1)l=r[o],t.replacer&&(l=t.replacer.call(r,String(o),l)),(bi(t,e,l,!1,!1)||typeof l>"u"&&bi(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=i,t.dump="["+n+"]"}function Ok(t,e,r,n){var i="",o=t.tag,a,l,p;for(a=0,l=r.length;a<l;a+=1)p=r[a],t.replacer&&(p=t.replacer.call(r,String(a),p)),(bi(t,e+1,p,!0,!0,!1,!0)||typeof p>"u"&&bi(t,e+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=DT(t,e)),t.dump&&el===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=o,t.dump=i||"[]"}function JK(t,e,r){var n="",i=t.tag,o=Object.keys(r),a,l,p,u,d;for(a=0,l=o.length;a<l;a+=1)d="",n!==""&&(d+=", "),t.condenseFlow&&(d+='"'),p=o[a],u=r[p],t.replacer&&(u=t.replacer.call(r,p,u)),bi(t,e,p,!1,!1)&&(t.dump.length>1024&&(d+="? "),d+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),bi(t,e,u,!1,!1)&&(d+=t.dump,n+=d));t.tag=i,t.dump="{"+n+"}"}function e4(t,e,r,n){var i="",o=t.tag,a=Object.keys(r),l,p,u,d,h,g;if(t.sortKeys===!0)a.sort();else if(typeof t.sortKeys=="function")a.sort(t.sortKeys);else if(t.sortKeys)throw new hr("sortKeys must be a boolean or a function");for(l=0,p=a.length;l<p;l+=1)g="",(!n||i!=="")&&(g+=DT(t,e)),u=a[l],d=r[u],t.replacer&&(d=t.replacer.call(r,u,d)),bi(t,e+1,u,!0,!0,!0)&&(h=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,h&&(t.dump&&el===t.dump.charCodeAt(0)?g+="?":g+="? "),g+=t.dump,h&&(g+=DT(t,e)),bi(t,e+1,d,!0,h)&&(t.dump&&el===t.dump.charCodeAt(0)?g+=":":g+=": ",g+=t.dump,i+=g));t.tag=o,t.dump=i||"{}"}function Nk(t,e,r){var n,i,o,a,l,p;for(i=r?t.explicitTypes:t.implicitTypes,o=0,a=i.length;o<a;o+=1)if(l=i[o],(l.instanceOf||l.predicate)&&(!l.instanceOf||typeof e=="object"&&e instanceof l.instanceOf)&&(!l.predicate||l.predicate(e))){if(r?l.multi&&l.representName?t.tag=l.representName(e):t.tag=l.tag:t.tag="?",l.represent){if(p=t.styleMap[l.tag]||l.defaultStyle,Zk.call(l.represent)==="[object Function]")n=l.represent(e,p);else if(Yk.call(l.represent,p))n=l.represent[p](e,p);else throw new hr("!<"+l.tag+'> tag resolver accepts not "'+p+'" style');t.dump=n}return!0}return!1}function bi(t,e,r,n,i,o,a){t.tag=null,t.dump=r,Nk(t,r,!1)||Nk(t,r,!0);var l=Zk.call(t.dump),p=n,u;n&&(n=t.flowLevel<0||t.flowLevel>e);var d=l==="[object Object]"||l==="[object Array]",h,g;if(d&&(h=t.duplicates.indexOf(r),g=h!==-1),(t.tag!==null&&t.tag!=="?"||g||t.indent!==2&&e>0)&&(i=!1),g&&t.usedDuplicates[h])t.dump="*ref_"+h;else{if(d&&g&&!t.usedDuplicates[h]&&(t.usedDuplicates[h]=!0),l==="[object Object]")n&&Object.keys(t.dump).length!==0?(e4(t,e,t.dump,i),g&&(t.dump="&ref_"+h+t.dump)):(JK(t,e,t.dump),g&&(t.dump="&ref_"+h+" "+t.dump));else if(l==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!a&&e>0?Ok(t,e-1,t.dump,i):Ok(t,e,t.dump,i),g&&(t.dump="&ref_"+h+t.dump)):(XK(t,e,t.dump),g&&(t.dump="&ref_"+h+" "+t.dump));else if(l==="[object String]")t.tag!=="?"&&QK(t,t.dump,e,o,p);else{if(l==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new hr("unacceptable kind of an object to dump "+l)}t.tag!==null&&t.tag!=="?"&&(u=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?u="!"+u:u.slice(0,18)==="tag:yaml.org,2002:"?u="!!"+u.slice(18):u="!<"+u+">",t.dump=u+" "+t.dump)}return!0}function t4(t,e){var r=[],n=[],i,o;for(FT(t,r,n),i=0,o=n.length;i<o;i+=1)e.duplicates.push(r[n[i]]);e.usedDuplicates=new Array(o)}function FT(t,e,r){var n,i,o;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(e.push(t),Array.isArray(t))for(i=0,o=t.length;i<o;i+=1)FT(t[i],e,r);else for(n=Object.keys(t),i=0,o=n.length;i<o;i+=1)FT(t[n[i]],e,r)}function r4(t,e){e=e||{};var r=new jK(e);r.noRefs||t4(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),bi(r,0,n,!0,!0)?r.dump+`
`:""}var n4=r4,i4={dump:n4};function VT(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var aP=Ct;var cP=OT,o4=Qk.load,kde=Qk.loadAll,lP=i4.dump;var Pde=VT("safeLoad","load"),Mde=VT("safeLoadAll","loadAll"),Ade=VT("safeDump","dump");var Mf=class{constructor(e,r){this.data=e;this.opts=r}represent(){let e=lP(this.data,Object.assign({replacer:l4,schema:a4},this.opts));return e=e.trim(),e.includes(`
`)&&(e=`
`+e),e}},s4=new aP("!format",{kind:"scalar",resolve:()=>!1,instanceOf:Mf,represent:t=>t.represent()}),a4=cP.extend({implicit:[s4]}),BT=t=>typeof t=="object"&&t!=null;function c4(t){if(BT(t))return Object.values(t).every(e=>!BT(e)&&!Array.isArray(e));if(Array.isArray(t))return t.every(e=>!BT(e)&&!Array.isArray(e))}function l4(t,e){return t===""?e:c4(e)?new Mf(e,{flowLevel:0}):e}var HT=["breakLine","clearAndSetSelection","copyToClipboard","cutToClipboard","decrement","deselect","editNewLineAfter","editNewLineBefore","experimental.setInstanceReference","extractVariable","findInDocument","findInWorkspace","foldRegion","followLink","followLinkAside","increment","indentLine","insertCopyAfter","insertCopyBefore","insertEmptyLineAfter","insertEmptyLineBefore","insertEmptyLinesAround","joinLines","outdentLine","randomizeTargets","remove","rename","revealDefinition","revealTypeDefinition","reverseTargets","scrollToBottom","scrollToCenter","scrollToTop","setSelection","setSelectionAfter","setSelectionBefore","showDebugHover","showHover","showQuickFix","showReferences","sortTargets","toggleLineBreakpoint","toggleLineComment","unfoldRegion","private.setKeyboardTarget","private.showParseTree","private.getTargets"],u4=["callAsFunction","editNew","executeCommand","generateSnippet","getText","highlight","insertSnippet","moveToTarget","pasteFromClipboard","replace","replaceWithTarget","rewrapWithPairedDelimiter","swapTargets","wrapWithPairedDelimiter","wrapWithSnippet","parsed"],uP=[...HT,...u4];var f4=["angleBrackets","backtickQuotes","curlyBrackets","doubleQuotes","escapedDoubleQuotes","escapedParentheses","escapedSingleQuotes","escapedSquareBrackets","parentheses","singleQuotes","squareBrackets","tripleDoubleQuotes","tripleSingleQuotes"],d4=["string","any","collectionBoundary"],Af=[...f4,...d4],qo=["argumentOrParameter","anonymousFunction","attribute","branch","class","className","collectionItem","collectionKey","comment","private.fieldAccess","functionCall","functionCallee","functionName","ifStatement","instance","list","map","name","namedFunction","regularExpression","statement","string","type","value","condition","section","sectionLevelOne","sectionLevelTwo","sectionLevelThree","sectionLevelFour","sectionLevelFive","sectionLevelSix","selector","private.switchStatementSubject","unit","xmlBothTags","xmlElement","xmlEndTag","xmlStartTag","part","chapter","subSection","subSubSection","namedParagraph","subParagraph","environment","character","word","token","identifier","line","sentence","paragraph","boundedParagraph","document","nonWhitespaceSequence","boundedNonWhitespaceSequence","url","notebookCell","command","textFragment","disqualifyDelimiter"];function fP(t){return qo.includes(t.type)}var dP=["simpleScopeTypeType","complexScopeTypeType","customRegex","pairedDelimiter","action","customAction","grapheme"],nl=class extends Error{constructor(e){super(e),this.name="NeedsInitialTalonUpdateError"}},ma=class extends Error{constructor(){super("Custom spoken forms are not currently supported in this ide"),this.name="DisabledCustomSpokenFormsError"}};function il(t){return t.replace(/([A-Z])/g," $1").split(" ").map(e=>e.toLowerCase()).join(" ")}function zo(t){return t.version>=7}var oo=class{constructor(e){this.hashFunction=e;this.map={}}hash(e){return this.hashFunction(e).join("\0")}set(e,r){return this.map[this.hash(e)]=r,this}has(e){return this.hash(e)in this.map}get(e){return this.map[this.hash(e)]}delete(e){return delete this.map[this.hash(e)],this}clear(){return this.map={},this}};var so=class extends Map{constructor(r){super();this.getDefaultValue=r}get(r){let n=super.get(r);if(n!=null)return n;let i=this.getDefaultValue(r);return this.set(r,i),i}};function mP(...t){return{dispose(){t.forEach(({dispose:e})=>{try{e()}catch(r){console.error(r)}})}}}function ol(t){return typeof t=="string"||t instanceof String}function Df(t){let[e,...r]=t;return h4(e,r)}function h4(t,e){let r;if(ol(t)){let n=t,[i,o,...a]=e;r={version:0,spokenForm:n,action:i,targets:o,extraArgs:a,usePrePhraseSnapshot:!1}}else r=t;return r}function sl(t,e){let r=new Map;return t.forEach(n=>{let i=e(n),o;r.has(i)?o=r.get(i):(o=[],r.set(i,o)),o.push(n)}),r}function hP(t){for(let e of t)return!1;return!0}function wi(t){return Object.keys(t)}function al(t,e){return`${t}.${e}`}var yP={camelCase(t){if(t.length===0)return"";let[e,...r]=t;return e+r.map(gP).join("")},snakeCase(t){return t.join("_")},upperSnakeCase(t){return t.map(e=>e.toUpperCase()).join("_")},pascalCase(t){return t.map(gP).join("")}};function gP(t){return t.length===0?"":t[0].toUpperCase()+t.substr(1)}function xP(t,e,r){if(t.length<2)return[...t];if(t.length===2)return e(t[0],t[1])?[t[0]]:[...t];let n=[],i=t.reduce((o,a)=>{let l=r(a),p=o.get(l);return p==null?(o.set(l,[a]),o):(o.get(l).push(a),p.length===2&&n.push(l),o)},new Map);return n.length===0?[...t]:(n.forEach(o=>{i.set(o,Hc(i.get(o),e))}),t.flatMap(o=>{let a=r(o),l=i.get(a);if(l==null||l.length===0)return[];let p=l[0];return e(p,o)?(l.shift(),p):[]}))}function Go(t,e){if(t.length!==e.length)throw new Error("Lists must have the same length");return t.map((r,n)=>[r,e[n]])}var _P=Symbol.for("immer-nothing"),TP=Symbol.for("immer-draftable"),Lr=Symbol.for("immer-state"),g4=process.env.NODE_ENV!=="production"?[function(t){return`The plugin for '${t}' has not been loaded into Immer. To enable the plugin, import and call \`enable${t}()\` when initializing your application.`},function(t){return`produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '${t}'`},"This object has been frozen and should not be mutated",function(t){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+t},"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.","Immer forbids circular references","The first or second argument to `produce` must be a function","The third argument to `produce` must be a function or undefined","First argument to `createDraft` must be a plain object, an array, or an immerable object","First argument to `finishDraft` must be a draft returned by `createDraft`",function(t){return`'current' expects a draft, got: ${t}`},"Object.defineProperty() cannot be used on an Immer draft","Object.setPrototypeOf() cannot be used on an Immer draft","Immer only supports deleting array indices","Immer only supports setting array indices and the 'length' property",function(t){return`'original' expects a draft, got: ${t}`}]:[];function yr(t,...e){if(process.env.NODE_ENV!=="production"){let r=g4[t],n=typeof r=="function"?r.apply(null,e):r;throw new Error(`[Immer] ${n}`)}throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var ha=Object.getPrototypeOf;function ga(t){return!!t&&!!t[Lr]}function Qo(t){return t?EP(t)||Array.isArray(t)||!!t[TP]||!!t.constructor?.[TP]||Nf(t)||Lf(t):!1}var y4=Object.prototype.constructor.toString();function EP(t){if(!t||typeof t!="object")return!1;let e=ha(t);if(e===null)return!0;let r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===y4}function If(t,e){Of(t)===0?Reflect.ownKeys(t).forEach(r=>{e(r,t[r],t)}):t.forEach((r,n)=>e(n,r,t))}function Of(t){let e=t[Lr];return e?e.type_:Array.isArray(t)?1:Nf(t)?2:Lf(t)?3:0}function jT(t,e){return Of(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function RP(t,e,r){let n=Of(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function x4(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Nf(t){return t instanceof Map}function Lf(t){return t instanceof Set}function Ko(t){return t.copy_||t.base_}function qT(t,e){if(Nf(t))return new Map(t);if(Lf(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);let r=EP(t);if(e===!0||e==="class_only"&&!r){let n=Object.getOwnPropertyDescriptors(t);delete n[Lr];let i=Reflect.ownKeys(n);for(let o=0;o<i.length;o++){let a=i[o],l=n[a];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[a]={configurable:!0,writable:!0,enumerable:l.enumerable,value:t[a]})}return Object.create(ha(t),n)}else{let n=ha(t);if(n!==null&&r)return{...t};let i=Object.create(n);return Object.assign(i,t)}}function ZT(t,e=!1){return Uf(t)||ga(t)||!Qo(t)||(Of(t)>1&&(t.set=t.add=t.clear=t.delete=T4),Object.freeze(t),e&&Object.entries(t).forEach(([r,n])=>ZT(n,!0))),t}function T4(){yr(2)}function Uf(t){return Object.isFrozen(t)}var S4={};function Zo(t){let e=S4[t];return e||yr(0,t),e}var cl;function kP(){return cl}function v4(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function SP(t,e){e&&(Zo("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function zT(t){GT(t),t.drafts_.forEach(b4),t.drafts_=null}function GT(t){t===cl&&(cl=t.parent_)}function vP(t){return cl=v4(cl,t)}function b4(t){let e=t[Lr];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function bP(t,e){e.unfinalizedDrafts_=e.drafts_.length;let r=e.drafts_[0];return t!==void 0&&t!==r?(r[Lr].modified_&&(zT(e),yr(4)),Qo(t)&&(t=Ff(e,t),e.parent_||Cf(e,t)),e.patches_&&Zo("Patches").generateReplacementPatches_(r[Lr].base_,t,e.patches_,e.inversePatches_)):t=Ff(e,r,[]),zT(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==_P?t:void 0}function Ff(t,e,r){if(Uf(e))return e;let n=e[Lr];if(!n)return If(e,(i,o)=>wP(t,n,e,i,o,r)),e;if(n.scope_!==t)return e;if(!n.modified_)return Cf(t,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;let i=n.copy_,o=i,a=!1;n.type_===3&&(o=new Set(i),i.clear(),a=!0),If(o,(l,p)=>wP(t,n,i,l,p,r,a)),Cf(t,i,!1),r&&t.patches_&&Zo("Patches").generatePatches_(n,r,t.patches_,t.inversePatches_)}return n.copy_}function wP(t,e,r,n,i,o,a){if(process.env.NODE_ENV!=="production"&&i===r&&yr(5),ga(i)){let l=o&&e&&e.type_!==3&&!jT(e.assigned_,n)?o.concat(n):void 0,p=Ff(t,i,l);if(RP(r,n,p),ga(p))t.canAutoFreeze_=!1;else return}else a&&r.add(i);if(Qo(i)&&!Uf(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;Ff(t,i),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&Cf(t,i)}}function Cf(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&ZT(e,r)}function w4(t,e){let r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:kP(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1},i=n,o=YT;r&&(i=[n],o=ll);let{revoke:a,proxy:l}=Proxy.revocable(i,o);return n.draft_=l,n.revoke_=a,l}var YT={get(t,e){if(e===Lr)return t;let r=Ko(t);if(!jT(r,e))return _4(t,r,e);let n=r[e];return t.finalized_||!Qo(n)?n:n===WT(t.base_,e)?($T(t),t.copy_[e]=QT(n,t)):n},has(t,e){return e in Ko(t)},ownKeys(t){return Reflect.ownKeys(Ko(t))},set(t,e,r){let n=PP(Ko(t),e);if(n?.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){let i=WT(Ko(t),e),o=i?.[Lr];if(o&&o.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(x4(r,i)&&(r!==void 0||jT(t.base_,e)))return!0;$T(t),KT(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return WT(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,$T(t),KT(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){let r=Ko(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){yr(11)},getPrototypeOf(t){return ha(t.base_)},setPrototypeOf(){yr(12)}},ll={};If(YT,(t,e)=>{ll[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});ll.deleteProperty=function(t,e){return process.env.NODE_ENV!=="production"&&isNaN(parseInt(e))&&yr(13),ll.set.call(this,t,e,void 0)};ll.set=function(t,e,r){return process.env.NODE_ENV!=="production"&&e!=="length"&&isNaN(parseInt(e))&&yr(14),YT.set.call(this,t[0],e,r,t[0])};function WT(t,e){let r=t[Lr];return(r?Ko(r):t)[e]}function _4(t,e,r){let n=PP(e,r);return n?"value"in n?n.value:n.get?.call(t.draft_):void 0}function PP(t,e){if(!(e in t))return;let r=ha(t);for(;r;){let n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=ha(r)}}function KT(t){t.modified_||(t.modified_=!0,t.parent_&&KT(t.parent_))}function $T(t){t.copy_||(t.copy_=qT(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var E4=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){let o=r;r=e;let a=this;return function(p=o,...u){return a.produce(p,d=>r.call(this,d,...u))}}typeof r!="function"&&yr(6),n!==void 0&&typeof n!="function"&&yr(7);let i;if(Qo(e)){let o=vP(this),a=QT(e,void 0),l=!0;try{i=r(a),l=!1}finally{l?zT(o):GT(o)}return SP(o,n),bP(i,o)}else if(!e||typeof e!="object"){if(i=r(e),i===void 0&&(i=e),i===_P&&(i=void 0),this.autoFreeze_&&ZT(i,!0),n){let o=[],a=[];Zo("Patches").generateReplacementPatches_(e,i,o,a),n(o,a)}return i}else yr(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(a,...l)=>this.produceWithPatches(a,p=>e(p,...l));let n,i;return[this.produce(e,r,(a,l)=>{n=a,i=l}),n,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){Qo(t)||yr(8),ga(t)&&(t=R4(t));let e=vP(this),r=QT(t,void 0);return r[Lr].isManual_=!0,GT(e),r}finishDraft(t,e){let r=t&&t[Lr];(!r||!r.isManual_)&&yr(9);let{scope_:n}=r;return SP(n,e),bP(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){let i=e[r];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}r>-1&&(e=e.slice(r+1));let n=Zo("Patches").applyPatches_;return ga(t)?n(t,e):this.produce(t,i=>n(i,e))}};function QT(t,e){let r=Nf(t)?Zo("MapSet").proxyMap_(t,e):Lf(t)?Zo("MapSet").proxySet_(t,e):w4(t,e);return(e?e.scope_:kP()).drafts_.push(r),r}function R4(t){return ga(t)||yr(10,t),MP(t)}function MP(t){if(!Qo(t)||Uf(t))return t;let e=t[Lr],r;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=qT(t,e.scope_.immer_.useStrictShallowCopy_)}else r=qT(t,!0);return If(r,(n,i)=>{RP(r,n,MP(i))}),e&&(e.finalized_=!1),r}var Ur=new E4,Vf=Ur.produce,kge=Ur.produceWithPatches.bind(Ur),Pge=Ur.setAutoFreeze.bind(Ur),Mge=Ur.setUseStrictShallowCopy.bind(Ur),Age=Ur.applyPatches.bind(Ur),Dge=Ur.createDraft.bind(Ur),Ige=Ur.finishDraft.bind(Ur);var rr=dr(YP(),1),yye=rr.default.v1,xye=rr.default.v1ToV6,Tye=rr.default.v3,XP=rr.default.v4,Sye=rr.default.v5,vye=rr.default.v6,bye=rr.default.v6ToV1,wye=rr.default.v7,_ye=rr.default.NIL,Eye=rr.default.MAX,Rye=rr.default.version,kye=rr.default.validate,Pye=rr.default.stringify,Mye=rr.default.parse;function JP(t,e,r){if(e>=t.length)throw Error(`Expected at least ${e+1} ${r} but received only ${t.length}`);return t[e]}function id(t,e){if(Array.isArray(t))return t.map(r=>id(r,e));if(typeof t=="object"&&t!=null){if(K6(t))return JP(e,t.index,"placeholder value");let r={};for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=id(t[n],e));return r}return t}function K6(t){return typeof t=="object"&&t!=null&&"type"in t&&t.type==="placeholder"}var ud=dr(tM(),1);var Q6={blue:"blue",green:"green",red:"red",pink:"pink",yellow:"yellow",userColor1:"navy",userColor2:"apricot",default:null},Z6={ex:"ex",fox:"fox",wing:"wing",hole:"hole",frame:"frame",curve:"curve",eye:"eye",play:"play",crosshairs:"cross",bolt:"bolt",default:null},sd={cursor:"this",that:"that",source:"source",nothing:"nothing",keyboard:null,explicit:null,decoratedSymbol:null,lineNumber:null,range:null,target:null},ad={modulo100:"row",relativeUp:"up",relativeDown:"down"};function rM(t){let e=Q6[t];if(e==null)throw Error(`Unknown hat color '${t}'`);return e}function nM(t){let e=Z6[t];if(e==null)throw Error(`Unknown hat shape '${t}'`);return e}function cS(t,e){return Object.fromEntries(Object.entries(t).map(([r,n])=>[r,Object.fromEntries(Object.entries(n).map(([i,o])=>[i,e(o,r,i)]))]))}var Y6=Object.fromEntries("air bat cap drum each fine gust harp sit jury crunch look made near odd pit quench red sun trap urge vest whale plex yank zip".split(" ").map((t,e)=>[String.fromCharCode(97+e),t])),X6=Object.fromEntries("zero one two three four five six seven eight nine".split(" ").map((t,e)=>[e.toString(),t])),J6={".":"dot",",":"comma",";":"semicolon",":":"colon","!":"bang","*":"asterisk","@":"at sign","&":"ampersand","?":"question","/":"slash","\\":"backslash","-":"dash","=":"equals","+":"plus","~":"tilde",_:"underscore","#":"hash","%":"percent","^":"caret","|":"pipe",$:"dollar","\xA3":"pound","'":"quote",'"':"double quote","`":"back tick","(":"paren",")":"right paren","{":"brace","}":"right brace","[":"square","]":"right square","<":"angle",">":"right angle","\uFFFD":"special"},iM={...Y6,...X6,...J6};function ao(...t){return{defaultSpokenForms:t,isDisabledByDefault:!0,isPrivate:!1}}function Nt(...t){return{defaultSpokenForms:t,isDisabledByDefault:!0,isPrivate:!0}}var oM={pairedDelimiter:{curlyBrackets:"curly",angleBrackets:"diamond",escapedDoubleQuotes:"escaped quad",escapedSingleQuotes:"escaped twin",escapedParentheses:"escaped round",escapedSquareBrackets:"escaped box",doubleQuotes:"quad",parentheses:"round",backtickQuotes:"skis",squareBrackets:"box",singleQuotes:"twin",tripleDoubleQuotes:Nt("triple quad"),tripleSingleQuotes:Nt("triple twin"),any:"pair",string:"string",whitespace:"void",collectionBoundary:Nt("collection boundary")},simpleScopeTypeType:{argumentOrParameter:"arg",attribute:"attribute",functionCall:"call",functionCallee:"callee",className:"class name",class:"class",comment:"comment",functionName:"funk name",namedFunction:"funk",ifStatement:"if state",instance:"instance",collectionItem:"item",collectionKey:"key",anonymousFunction:"lambda",list:"list",map:"map",name:"name",regularExpression:"regex",section:"section",sectionLevelOne:ao("one section"),sectionLevelTwo:ao("two section"),sectionLevelThree:ao("three section"),sectionLevelFour:ao("four section"),sectionLevelFive:ao("five section"),sectionLevelSix:ao("six section"),selector:"selector",statement:"state",branch:"branch",type:"type",value:"value",condition:"condition",unit:"unit",xmlElement:"element",xmlBothTags:"tags",xmlStartTag:"start tag",xmlEndTag:"end tag",part:"part",chapter:"chapter",subSection:"subsection",subSubSection:"subsubsection",namedParagraph:"paragraph",subParagraph:"subparagraph",environment:"environment",command:"command",character:"char",word:"sub",token:"token",identifier:"identifier",line:"line",sentence:"sentence",paragraph:"block",boundedParagraph:"short block",document:"file",nonWhitespaceSequence:"paint",boundedNonWhitespaceSequence:"short paint",url:"link",notebookCell:"cell",string:Nt("parse tree string"),textFragment:Nt("text fragment"),disqualifyDelimiter:Nt("disqualify delimiter"),"private.fieldAccess":Nt("access"),"private.switchStatementSubject":Nt("subject")},complexScopeTypeType:{glyph:"glyph"},surroundingPairForceDirection:{left:"left",right:"right"},simpleModifier:{excludeInterior:"bounds",toRawSelection:"just",leading:"leading",trailing:"trailing",keepContentFilter:"content",keepEmptyFilter:"empty",inferPreviousMark:"its",startOf:"start of",endOf:"end of",interiorOnly:"inside",visible:"visible",extendThroughStartOf:"head",extendThroughEndOf:"tail",everyScope:"every"},modifierExtra:{first:"first",last:"last",previous:"previous",next:"next",forward:"forward",backward:"backward",ancestor:"grand"},customRegex:{},action:{breakLine:"break",scrollToBottom:"bottom",toggleLineBreakpoint:"break point",cutToClipboard:"carve",scrollToCenter:"center",clearAndSetSelection:"change",remove:"chuck",insertCopyBefore:"clone up",insertCopyAfter:"clone",toggleLineComment:"comment",copyToClipboard:"copy",scrollToTop:"crown",outdentLine:"dedent",revealDefinition:"define",editNewLineBefore:"drink",insertEmptyLineBefore:"drop",extractVariable:"extract",insertEmptyLineAfter:"float",foldRegion:"fold",followLink:"follow",followLinkAside:"follow split",deselect:"give",highlight:"highlight",showHover:"hover",increment:"increment",decrement:"decrement",indentLine:"indent",showDebugHover:"inspect",setSelectionAfter:"post",editNewLineAfter:"pour",setSelectionBefore:"pre",insertEmptyLinesAround:"puff",showQuickFix:"quick fix",showReferences:"reference",rename:"rename",reverseTargets:"reverse",findInDocument:"scout",findInWorkspace:"scout all",randomizeTargets:"shuffle",generateSnippet:"snippet make",sortTargets:"sort",setSelection:"take",revealTypeDefinition:"type deaf",unfoldRegion:"unfold",callAsFunction:"call",swapTargets:"swap",replaceWithTarget:"bring",moveToTarget:"move",wrapWithPairedDelimiter:"wrap",wrapWithSnippet:"wrap",rewrapWithPairedDelimiter:"repack",insertSnippet:"snippet",pasteFromClipboard:"paste",joinLines:"join","private.showParseTree":Nt("parse tree"),"experimental.setInstanceReference":ao("from"),editNew:Nt("edit new"),executeCommand:Nt("execute command"),parsed:Nt("parsed"),getText:Nt("get text"),replace:Nt("replace"),"private.getTargets":Nt("get targets"),"private.setKeyboardTarget":Nt("set keyboard target")},customAction:{},grapheme:iM};var lS=cS(oM,t=>typeof t=="string"?{defaultSpokenForms:[t],isDisabledByDefault:!1,isPrivate:!1}:t),Ei=cS(lS,({defaultSpokenForms:t,isDisabledByDefault:e,isPrivate:r})=>({spokenForms:e?[]:t,isCustom:!1,defaultSpokenForms:t,requiresTalonUpdate:!1,isPrivate:r}));var ut={rangeExclusive:"between",rangeInclusive:"past",rangeExcludingStart:null,rangeExcludingEnd:"until",listConnective:"and",swapConnective:"with",sourceDestinationConnective:"to",before:"before",after:"after",verticalRange:"slice",previous:"previous",next:"next",forward:"forward",backward:"backward"};var cM=dr(aM(),1),ld=class{constructor(e){this.mooLexer=cM.default.compile(e)}reset(e,r){let{mooState:n}=r??{};return this.mooLexer.reset(e,n),this}formatError(e,r){return this.mooLexer.formatError(e,r)}has(e){return this.mooLexer.has(e)}save(){return{mooState:this.mooLexer.save()}}next(){let e=this.mooLexer.next();return this.skipToken(e)?this.next():e}transform({value:e}){return e}skipToken(e){return e?.type==="ws"}};var Ri={};for(let t of HT){let{spokenForms:e}=Ei.action[t];for(let r of e)Ri[r]={type:"simpleActionName",value:t}}var e9=["replaceWithTarget","moveToTarget"];for(let t of e9){let{spokenForms:e}=Ei.action[t];for(let r of e)Ri[r]={type:"bringMove",value:t}}var t9=["before","after","to"];for(let t of t9){let e=ut[t==="to"?"sourceDestinationConnective":t];Ri[e]={type:"insertionMode",value:t}}for(let t of qo){let{spokenForms:e}=Ei.simpleScopeTypeType[t];for(let r of e)Ri[r]={type:"simpleScopeTypeType",value:t}}for(let t of Af){let{spokenForms:e}=Ei.pairedDelimiter[t];for(let r of e)Ri[r]={type:"pairedDelimiter",value:t}}for(let[t,e]of Object.entries(sd))e!=null&&(Ri[e]={type:"simpleMarkType",value:t});var ki=new ld({ws:/[ \t]+/,placeholderTarget:{match:/<target\d*>/,value:t=>t.slice(7,-1)},token:{match:Object.keys(Ri),type:t=>Ri[t].type,value:t=>Ri[t].value}});function lM(t,e){return{name:t,target:e}}function pM(t,e,r){return{name:t,source:e,destination:r}}function pd(t,e){let r={type:"primitive"};return t!=null&&(r.modifiers=t),e!=null&&(r.mark=e),r}function uM(t,e){return{type:"primitive",insertionMode:t,target:e}}function fM(t){return{type:"containingScope",scopeType:t}}function dM(t){return{type:t}}function mM(t){return{type:"surroundingPair",delimiter:t}}function hM(t){return{type:t}}function gM(t){return{type:"target",target:{type:"placeholder",index:t.length===0?0:parseInt(t)-1}}}function pS(t){return t[0]}var r9={Lexer:ki,ParserRules:[{name:"main",symbols:["action"],postprocess:pS},{name:"action",symbols:[ki.has("simpleActionName")?{type:"simpleActionName"}:simpleActionName,"target"],postprocess:([t,e])=>lM(t,e)},{name:"action",symbols:[ki.has("bringMove")?{type:"bringMove"}:bringMove,"target","destination"],postprocess:([t,e,r])=>pM(t,e,r)},{name:"destination",symbols:["primitiveDestination"],postprocess:pS},{name:"destination",symbols:[ki.has("insertionMode")?{type:"insertionMode"}:insertionMode,"target"],postprocess:([t,e])=>uM(t,e)},{name:"target",symbols:["primitiveTarget"],postprocess:pS},{name:"primitiveTarget$ebnf$1",symbols:["modifier"]},{name:"primitiveTarget$ebnf$1",symbols:["primitiveTarget$ebnf$1","modifier"],postprocess:t=>t[0].concat([t[1]])},{name:"primitiveTarget",symbols:["primitiveTarget$ebnf$1"],postprocess:([t])=>pd(t,void 0)},{name:"primitiveTarget",symbols:["mark"],postprocess:([t])=>pd(void 0,t)},{name:"primitiveTarget$ebnf$2",symbols:["modifier"]},{name:"primitiveTarget$ebnf$2",symbols:["primitiveTarget$ebnf$2","modifier"],postprocess:t=>t[0].concat([t[1]])},{name:"primitiveTarget",symbols:["primitiveTarget$ebnf$2","mark"],postprocess:([t,e])=>pd(t,e)},{name:"modifier",symbols:["containingScopeModifier"],postprocess:([t])=>t},{name:"containingScopeModifier",symbols:["scopeType"],postprocess:([t])=>fM(t)},{name:"scopeType",symbols:[ki.has("simpleScopeTypeType")?{type:"simpleScopeTypeType"}:simpleScopeTypeType],postprocess:([t])=>dM(t)},{name:"scopeType",symbols:[ki.has("pairedDelimiter")?{type:"pairedDelimiter"}:pairedDelimiter],postprocess:([t])=>mM(t)},{name:"mark",symbols:[ki.has("simpleMarkType")?{type:"simpleMarkType"}:simpleMarkType],postprocess:([t])=>hM(t)},{name:"mark",symbols:[ki.has("placeholderTarget")?{type:"placeholderTarget"}:placeholderTarget],postprocess:([t])=>gM(t)}],ParserStart:"main"},yM=r9;function n9(){return new ud.Parser(ud.Grammar.fromCompiled(yM))}function xM(t){let e=n9();if(e.feed(t),e.results.length!==1)throw new Error(`Expected exactly one result, got ${e.results.length}`);return e.results[0]}function fd(t,e){let r=xM(t);return id(r,e)}function dl(t){switch(t.name){case"callAsFunction":return[t.callee,t.argument];case"replaceWithTarget":case"moveToTarget":return[t.source,...TM(t.destination)];case"swapTargets":return[t.target1,t.target2];case"pasteFromClipboard":case"insertSnippet":case"replace":case"editNew":return TM(t.destination);case"parsed":return dl(fd(t.content,t.arguments));default:return[t.target]}}function TM(t){switch(t.type){case"list":return t.destinations.map(({target:e})=>e);case"primitive":return[t.target];case"implicit":return[]}}function fS(t){return t.flatMap(uS)}function uS(t){switch(t.type){case"primitive":return[t];case"list":return t.elements.flatMap(uS);case"range":return[t.anchor,t.active].flatMap(uS);case"implicit":return[]}}var i9={arrowFunction:"anonymousFunction",dictionary:"map",regex:"regularExpression"},o9={purple:"pink"};function s9(t){t.modifiers?.forEach(e=>{(e.type==="containingScope"||e.type==="everyScope")&&(e.scopeType.type=i9[e.scopeType.type]??e.scopeType.type)})}function a9(t){t.mark?.type==="decoratedSymbol"&&(t.mark.symbolColor=o9[t.mark.symbolColor]??t.mark.symbolColor)}function dS(t){fS(t).forEach(e=>{s9(e),a9(e)})}function SM(t){return{...t,version:1}}var c9={type:"primitive",mark:{type:"cursor"},selectionType:"token",position:"contents",modifier:{type:"identity"},insideOutsideType:"inside"},l9={type:"primitive",isImplicit:!0},vM=t=>Si(t,c9)?l9:t;function bM(t){let e=t.action;return{spokenForm:t.spokenForm,action:{name:e,args:t.extraArgs},targets:u9(t.targets,e),usePrePhraseSnapshot:t.usePrePhraseSnapshot??!1,version:2}}function p9(t){switch(t.type){case"identity":return[];case"containingScope":{let{includeSiblings:e,scopeType:r,type:n,...i}=t;return[{type:e?"everyScope":"containingScope",scopeType:{type:r},...i}]}case"surroundingPair":{let{delimiterInclusion:e,...r}=t,n={type:"containingScope",scopeType:r};return e==="interiorOnly"||e==="excludeInterior"?n.scopeType.delimiter==="any"?[{type:e}]:[{type:e},n]:[n]}case"subpiece":{let{type:e,pieceType:r,...n}=t;return[{type:"ordinalRange",scopeType:{type:r},...n}]}case"head":return[{type:"extendThroughStartOf"}];case"tail":return[{type:"extendThroughEndOf"}];default:return[t]}}function mS(t,e){let{type:r,isImplicit:n,mark:i,insideOutsideType:o,modifier:a,selectionType:l,position:p}=t,u=[];if(p&&p!=="contents"&&(p==="before"?o==="inside"?u.push({type:"position",position:"start"}):e==="remove"?u.push({type:"leading"}):u.push({type:"position",position:"before"}):o==="inside"?u.push({type:"position",position:"end"}):e==="remove"?u.push({type:"trailing"}):u.push({type:"position",position:"after"})),l)switch(l){case"token":if(a?.type==="subpiece")break;case"line":if(i?.type==="lineNumber")break;default:u.push({type:"containingScope",scopeType:{type:l}})}return a&&u.push(...p9(a)),{type:r,isImplicit:n,modifiers:u.length>0?u:void 0,mark:i?.type==="cursorToken"?void 0:i}}function wM(t,e){switch(t.type){case"list":return{...t,elements:t.elements.map(r=>wM(r,e))};case"range":{let{type:r,rangeType:n,start:i,end:o,excludeStart:a,excludeEnd:l}=t;return{type:r,rangeType:n,anchor:mS(i,e),active:mS(o,e),excludeAnchor:a??!1,excludeActive:l??!1}}case"primitive":return mS(t,e)}}function u9(t,e){return t.map(r=>wM(r,e)).map(r=>r.type==="primitive"?vM(r):r)}function _M(t){return{...t,version:3,targets:t.targets.map(EM)}}function EM(t){switch(t.type){case"list":return{...t,elements:t.elements.map(e=>EM(e))};case"range":{let{anchor:e,active:r,...n}=t;return{anchor:hS(e),active:hS(r),...n}}case"primitive":return hS(t)}}function hS(t){let e=t.modifiers!=null?t.modifiers.map(d9):void 0;if(t.mark?.type==="lineNumber"){let{anchor:r,active:n}=t.mark;if(r.type!==n.type||r.lineNumber<0!=n.lineNumber<0)return{type:"range",anchor:{type:"primitive",mark:hl(r),modifiers:e},active:{type:"primitive",mark:hl(n)},excludeAnchor:!1,excludeActive:!1}}return{...t,mark:t.mark!=null?f9(t.mark):void 0,modifiers:e}}function f9(t){switch(t.type){case"lineNumber":return m9(t);default:return t}}function d9(t){switch(t.type){case"ordinalRange":return h9(t);default:return t}}function m9(t){return Si(t.anchor,t.active)?hl(t.anchor):{type:"range",anchor:hl(t.anchor),active:hl(t.active)}}function h9(t){return t.anchor===t.active?ml(t.scopeType,t.anchor):t.anchor===0&&t.active>t.anchor?ml(t.scopeType,t.anchor,t.active-t.anchor+1):t.anchor<0&&t.active===-1?ml(t.scopeType,t.anchor,-t.anchor):{type:"range",anchor:ml(t.scopeType,t.anchor),active:ml(t.scopeType,t.active),excludeAnchor:t.excludeAnchor,excludeActive:t.excludeActive}}function hl(t){return{type:"lineNumber",lineNumberType:t.type,lineNumber:t.lineNumber}}function ml(t,e,r=1){return{type:"ordinalScope",scopeType:t,start:e,length:r}}function kM(t){return{...t,version:4,targets:t.targets.map(PM)}}function PM(t){switch(t.type){case"primitive":return RM(t);case"range":{let{anchor:e,...r}=t;return{...r,anchor:RM(e)}}case"list":{let{elements:e,...r}=t;return{...r,elements:e.map(PM)}}}}function RM(t){return t.mark==null&&t.modifiers==null||t.isImplicit?{type:"implicit"}:t}function MM(t){return{...t,version:5,action:g9(t.action),targets:t.targets.map(dd)}}function g9(t){switch(t.name){case"wrapWithSnippet":{let[e,r]=y9(t.args[0]);return{name:"wrapWithSnippet",args:[{type:"named",name:e,variableName:r}]}}case"insertSnippet":{let[e,r]=t.args,n={type:"named",name:e};return r!=null&&(n.substitutions=r),{name:"insertSnippet",args:[n]}}default:return t}}function y9(t){let[e,r]=t.split(".");if(e==null||r==null)throw new Error("Snippet location missing '.'");return[e,r]}function dd(t){switch(t.type){case"implicit":return t;case"list":return{...t,elements:t.elements.map(dd)};case"range":return{...t,anchor:dd(t.anchor),active:dd(t.active)};case"primitive":return{...t,mark:t.mark!=null?gS(t.mark):void 0,modifiers:t.modifiers!=null&&t.modifiers.length>0?t.modifiers.map(yS):void 0}}}function gS(t){return t.type==="range"?{...t,anchor:gS(t.anchor),active:gS(t.active),excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1}:t}function yS(t){return t.type==="range"?{...t,anchor:yS(t.anchor),active:yS(t.active),excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1}:t}var x9={bring:"replaceWithTarget",call:"callAsFunction",clear:"clearAndSetSelection",commentLines:"toggleLineComment",copy:"copyToClipboard",cut:"cutToClipboard",delete:"remove",editNewLineAbove:"editNewLineBefore",editNewLineBelow:"editNewLineAfter",findInFiles:"findInWorkspace",fold:"foldRegion",indentLines:"indentLine",insertEmptyLineAbove:"insertEmptyLineBefore",insertEmptyLineBelow:"insertEmptyLineAfter",insertLineAfter:"editNewLineAfter",insertLineBefore:"editNewLineBefore",move:"moveToTarget",outdentLines:"outdentLine",paste:"pasteFromClipboard",reverse:"reverseTargets",setBreakpoint:"toggleLineBreakpoint",sort:"sortTargets",swap:"swapTargets",unfold:"unfoldRegion",use:"replaceWithTarget",wrap:"wrapWithPairedDelimiter"};function xS(t){let e=x9[t]??t;if(!uP.includes(e))throw new Error(`Unknown action name: ${e}`);return e}function AM(t){return{version:6,spokenForm:t.spokenForm,usePrePhraseSnapshot:t.usePrePhraseSnapshot,action:T9(t.action,t.targets)}}function T9(t,e){let r=xS(t.name);switch(r){case"replaceWithTarget":case"moveToTarget":return{name:r,source:sn(e[0]),destination:gl(e[1])};case"swapTargets":return{name:r,target1:sn(e[0]),target2:sn(e[1])};case"callAsFunction":return{name:r,callee:sn(e[0]),argument:sn(e[1])};case"pasteFromClipboard":return{name:r,destination:gl(e[0])};case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return{name:r,left:t.args[0],right:t.args[1],target:sn(e[0])};case"generateSnippet":return{name:r,snippetName:t.args?.[0],target:sn(e[0])};case"insertSnippet":return{name:r,snippetDescription:t.args[0],destination:gl(e[0])};case"wrapWithSnippet":return{name:r,snippetDescription:t.args[0],target:sn(e[0])};case"executeCommand":return{name:r,commandId:t.args[0],options:t.args?.[1],target:sn(e[0])};case"replace":return{name:r,replaceWith:t.args[0],destination:gl(e[0])};case"highlight":{let n={name:r,target:sn(e[0])};return t.args?.[0]!=null&&(n.highlightId=t.args?.[0]),n}case"editNew":return{name:r,destination:gl(e[0])};case"getText":return{name:r,options:t.args?.[0],target:sn(e[0])};case"parsed":throw Error("Parsed action should not be present in V5");default:return{name:r,target:sn(e[0])}}}function sn(t){switch(t.type){case"list":case"range":case"primitive":return S9(t);case"implicit":return t}}function S9(t){switch(t.type){case"list":return v9(t);case"range":case"primitive":return md(t)}}function v9(t){return{...t,elements:t.elements.map(md)}}function md(t){switch(t.type){case"range":return DM(t);case"primitive":return hd(t)}}function DM(t){let{anchor:e,active:r}=t,n={type:"range",anchor:e.type==="implicit"?e:hd(e),active:hd(r),excludeAnchor:t.excludeAnchor,excludeActive:t.excludeActive};return t.rangeType!=null&&(n.rangeType=t.rangeType),n}function hd(t){let e={type:"primitive"},r=k9(t.modifiers);return r!=null&&(e.modifiers=r),t.mark!=null&&(e.mark=t.mark),e}function gl(t){switch(t.type){case"list":return b9(t);case"range":return w9(t);case"primitive":return _9(t);case"implicit":return E9()}}function b9(t){let e=[],r=[],n,i=()=>{r.length>0&&e.push({type:"primitive",insertionMode:n??"to",target:r.length===1?r[0]:{type:"list",elements:r}})};return t.elements.forEach(o=>{let a=gd(o);a!=null?(i(),r=[md(o)],n=a):r.push(md(o))}),i(),e.length>1?{type:"list",destinations:e}:e[0]}function w9(t){return{type:"primitive",insertionMode:gd(t.anchor)??"to",target:DM(t)}}function _9(t){return{type:"primitive",insertionMode:gd(t)??"to",target:hd(t)}}function E9(){return{type:"implicit"}}function gd(t){switch(t.type){case"implicit":return"to";case"primitive":return R9(t);case"range":return gd(t.anchor)}}function R9(t){let e=t.modifiers?.find(r=>r.type==="position");if(e!=null){if(t.modifiers.indexOf(e)!==0)throw Error("Position modifier has to be at first index");if(e?.position==="before"||e?.position==="after")return e.position}}function k9(t){let e=[];if(t!=null)for(let r of t)r.type==="position"?r.position==="start"?e.push({type:"startOf"}):r.position==="end"&&e.push({type:"endOf"}):e.push(r);return e.length>0?e:void 0}function IM(t){return{...t,version:7}}function SS(t){let e=P9(t,7),{action:r,usePrePhraseSnapshot:n=!1,spokenForm:i}=e;return{version:7,spokenForm:i,action:Vf(r,o=>{let a=dl(o);dS(a),r.name}),usePrePhraseSnapshot:n}}function P9(t,e){if(t.version>7)throw new Du;for(;t.version<e;)switch(t.version){case 0:t=SM(t);break;case 1:t=bM(t);break;case 2:t=_M(t);break;case 3:t=kM(t);break;case 4:t=MM(t);break;case 5:t=AM(t);break;case 6:t=IM(t);break;default:throw new Error(`Can't upgrade from unknown version ${t.version}`)}return t}var vS;function yd(t){vS=t}function D(){if(vS==null)throw Error("Tried to access ide before it was injected");return vS}var xd=class{constructor(e){this.maxLength=e;this.stack=[];this.index=void 0}push(e){this.index!=null?this.stack.splice(this.index+1,this.stack.length-this.index-1,e):this.stack.push(e),this.stack.length>this.maxLength&&this.stack.shift(),this.index=this.stack.length-1}undo(){if(this.index!=null&&this.index>0)return this.index--,this.stack[this.index]}redo(){if(this.index!=null&&this.index<this.stack.length-1)return this.index++,this.stack[this.index]}};var M9=25,Td=class{constructor(){this.targetMap=new Map;this.targetHistory=new so(()=>new xd(M9));this.notifier=new Wt}set(e,r,{history:n=!1}={}){this.targetMap.set(e,r),n&&r!=null&&this.targetHistory.get(e).push(r),this.notifier.notifyListeners(e,r)}get(e){return this.targetMap.get(e)}undo(e){let r=this.targetHistory.get(e).undo();r!=null&&this.set(e,r,{history:!1})}redo(e){let r=this.targetHistory.get(e).redo();r!=null&&this.set(e,r,{history:!1})}onStoredTargets(e){for(let r of la)e(r,this.get(r));return this.notifier.registerListener(e)}};function co(t,e){return new W(new ce(e.start.line,0),t.document.lineAt(e.end).range.end)}function bS(t,e){return e.isEmpty?0:t.document.offsetAt(e.end)-t.document.offsetAt(e.start)}function FM(t,e){let[r,n]=e instanceof ce?[e,e]:[e.start,e.end];return t.start.isBefore(r)&&t.end.isAfter(n)}function Xo(t,...e){for(let r of e)r!=null&&(t=t.union(r));return t}var Sd=class t{constructor(e,r,n){this.target=e;this.insertionMode=r;this.contentRange=D9(e.contentRange,r),this.isBefore=r==="before",this.isLineDelimiter=e.insertionDelimiter.includes(`
`),this.indentationString=n??this.isLineDelimiter?A9(e.editor,e.contentRange):"",this.insertionPrefix=e.prefixRange!=null?e.editor.document.getText(e.prefixRange):void 0}get contentSelection(){return this.contentRange.toSelection(this.target.isReversed)}get editor(){return this.target.editor}get insertionDelimiter(){return this.target.insertionDelimiter}get isRaw(){return this.target.isRaw}withTarget(e){return new t(e,this.insertionMode,this.indentationString)}getEditNewActionType(){return this.insertionMode==="after"&&this.target.contentRange.isSingleLine&&this.insertionDelimiter===`
`&&this.insertionPrefix==null?"insertLineAfter":"edit"}constructChangeEdit(e,r=!1){return this.insertionMode==="before"||this.insertionMode==="after"?this.constructEditWithDelimiters(e,r):this.constructEditWithoutDelimiters(e)}constructEditWithDelimiters(e,r){let n=this.getEditRange(),i=this.getEditText(e,r),o=a=>this.updateRange(a,e,r);return{range:n,text:i,isReplace:this.insertionMode==="after",updateRange:o}}constructEditWithoutDelimiters(e){return{range:this.contentRange,text:e,updateRange:r=>r}}getEditRange(){let e=(()=>{let r=this.isBefore?Xo(this.target.contentRange,this.target.prefixRange).start:this.target.contentRange.end;if(this.isLineDelimiter){let n=this.editor.document.lineAt(r),i=this.isBefore?n.rangeTrimmed?.start??n.range.start:n.rangeTrimmed?.end??n.range.end;if(r.isEqual(i))return this.isBefore?n.range.start:n.range.end}return r})();return new W(e,e)}getEditText(e,r){let i=(r?"":this.indentationString)+(this.insertionPrefix??"")+e;return this.isBefore?i+this.insertionDelimiter:this.insertionDelimiter+i}updateRange(e,r,n){let i=this.editor.document.offsetAt(e.start)+(n?0:this.indentationString.length)+(this.insertionPrefix?.length??0),o=this.isBefore?i:i+this.getLengthOfInsertionDelimiter(),a=o+r.length;return new W(this.editor.document.positionAt(o),this.editor.document.positionAt(a))}getLengthOfInsertionDelimiter(){if(this.editor.document.eol==="CRLF"){let e=this.insertionDelimiter.match(/\n/g);if(e!=null)return this.insertionDelimiter.length+e.length}return this.insertionDelimiter.length}};function A9(t,e){let r=Number.MAX_SAFE_INTEGER,n="";for(let i=e.start.line;i<=e.end.line;++i){let o=t.document.lineAt(i);if(o.range.isEmpty||o.isEmptyOrWhitespace&&!e.isSingleLine)continue;let a=o.rangeTrimmed?.start??o.range.end;a.character<r&&(r=a.character,n=o.text.slice(0,r))}return n}function D9(t,e){switch(e){case"before":return t.start.toEmptyRange();case"after":return t.end.toEmptyRange();case"to":return t}}function lo(t,e,r,n){return yl(t.contentRange,e.contentRange,r,n)}function yl(t,e,r,n){return new W(r?t.start:t.end,n?e.end:e.start)}function ya(t,e,r,n){let i=r?t.contentRange.start:new ce(t.contentRange.end.line+1,0),o=n?e.contentRange.end:e.editor.document.lineAt(e.contentRange.start.line-1).range.end;return new W(i,o)}var Ue=class t{constructor(e){this.isLine=!1;this.isToken=!0;this.hasExplicitScopeType=!0;this.hasExplicitRange=!0;this.isRaw=!1;this.isImplicit=!1;this.isNotebookCell=!1;this.isWord=!1;this.joinAs="line";this.state={editor:e.editor,isReversed:e.isReversed,contentRange:e.contentRange,thatTarget:e.thatTarget}}get editor(){return this.state.editor}get isReversed(){return this.state.isReversed}get thatTarget(){return this.state.thatTarget!=null?this.state.thatTarget.thatTarget:this}get contentText(){return this.editor.document.getText(this.contentRange)}get contentSelection(){return this.contentRange.toSelection(this.isReversed)}get contentRange(){return this.state.contentRange}constructRemovalEdit(){return{range:this.getRemovalRange(),text:"",updateRange:e=>e}}getRemovalHighlightRange(){return this.getRemovalRange()}withThatTarget(e){return this.cloneWith({thatTarget:e})}withContentRange(e){return this.cloneWith({contentRange:e})}getInterior(){}getBoundary(){}cloneWith(e){let r=Object.getPrototypeOf(this).constructor;return new r({...this.getCloneParameters(),...e})}maybeCreateRichRangeTarget(e,r){let{constructor:n}=Object.getPrototypeOf(this);return new n({...this.getCloneParameters(),isReversed:e,contentRange:lo(this,r,!0,!0)})}isEqual(e){return e instanceof t&&Si(this.getEqualityParameters(),e.getEqualityParameters())}getEqualityParameters(){let{thatTarget:e,...r}=this.getCloneParameters();return{...r}}toDestination(e){return new Sd(this,e)}toPlainObject(){return{type:this.type,contentRange:Yc(this.contentRange),isReversed:this.isReversed,hasExplicitRange:this.hasExplicitRange}}};function vd(t,e){return I9(t,e.start,e.end)}function I9(t,e,r){return{editor:t.editor,selection:F9(t.selection,e,r)}}function F9(t,e,r){return t.isReversed?new Te(r,e):new Te(e,r)}function bd(t,e){let{document:r}=t,n=r.getText(e),i=n.length-n.trimStart().length,o=n.length-n.trimEnd().length,a=r.offsetAt(e.start)+i,l=r.offsetAt(e.end)-o,p=r.positionAt(a),u=r.positionAt(l);return new W(p,u)}function wd(t,e,r,n){return r==null?void 0:new t({editor:e,isReversed:n,contentRange:r})}var He=class extends Ue{constructor(r){super(r);this.type="PlainTarget";this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.isToken=r.isToken??!0,this.insertionDelimiter=r.insertionDelimiter??""}getCloneParameters(){return{...this.state,isToken:this.isToken,insertionDelimiter:this.insertionDelimiter}}};function xa(t,e,r){return wd(He,t,e,r)}var _d=class extends Ue{constructor(r){super(r);this.type="DocumentTarget";this.insertionDelimiter=`
`;this.isLine=!0}getLeadingDelimiterTarget(){}getTrailingDelimiterTarget(){}getRemovalRange(){return this.contentRange}getInterior(){return[new He({editor:this.editor,isReversed:this.isReversed,contentRange:bd(this.editor,this.contentRange)})]}getCloneParameters(){return this.state}};var Vr=class t extends Ue{constructor(){super(...arguments);this.type="LineTarget";this.insertionDelimiter=`
`;this.isLine=!0;this.getRemovalHighlightRange=()=>this.fullLineContentRange}get fullLineContentRange(){return co(this.editor,this.contentRange)}getLeadingDelimiterTarget(){return xa(this.editor,C9(this.editor,this.fullLineContentRange),this.isReversed)}getTrailingDelimiterTarget(){return xa(this.editor,O9(this.editor,this.fullLineContentRange),this.isReversed)}getRemovalRange(){let r=this.fullLineContentRange,n=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return n==null?r:r.union(n.contentRange)}maybeCreateRichRangeTarget(r,n){return new t({editor:this.editor,isReversed:r,contentRange:ya(this,n,!0,!0)})}getCloneParameters(){return this.state}};function C9(t,e){let{start:r}=e;return r.line>0?new W(t.document.lineAt(r.line-1).range.end,e.start):void 0}function O9(t,e){let{end:r}=e;return r.line+1<t.document.lineCount?new W(e.end,new ce(r.line+1,0)):void 0}function wS(t,e,r){return wd(Vr,t,e,r)}var Ed=class t{constructor(e,r){this.target=e;this.insertionMode=r}get editor(){return this.target.editor}get contentRange(){return this.target.contentRange}get contentSelection(){return this.target.contentSelection}get insertionDelimiter(){return this.target.insertionDelimiter}get isRaw(){return this.target.isRaw}withTarget(e){return new t(e,this.insertionMode)}getEditNewActionType(){throw new Error("Method not implemented.")}constructChangeEdit(e){throw new Error("Method not implemented.")}};var Rd=class extends Ue{constructor(r){super(r);this.type="NotebookCellTarget";this.insertionDelimiter=`
`;this.isNotebookCell=!0;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange}getCloneParameters(){return this.state}toDestination(r){return new Ed(this,r)}};var Ta=class t extends Ue{constructor(){super(...arguments);this.type="ParagraphTarget";this.insertionDelimiter=`

`;this.isLine=!0}getLeadingDelimiterTarget(){return wS(this.editor,N9(this.editor,this.fullLineContentRange),this.isReversed)}getTrailingDelimiterTarget(){return wS(this.editor,L9(this.editor,this.fullLineContentRange),this.isReversed)}getRemovalRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.contentRange.union(r.contentRange):this.contentRange;return new Vr({contentRange:n,editor:this.editor,isReversed:this.isReversed}).getRemovalRange()}get fullLineContentRange(){return co(this.editor,this.contentRange)}getRemovalHighlightRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return r!=null?this.fullLineContentRange.union(r.contentRange):this.fullLineContentRange}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,contentRange:ya(this,n,!0,!0)})}getCloneParameters(){return this.state}};function N9(t,e){let{document:r}=t,n=r.lineAt(e.start),i=U9(r,n);if(i!=null)return i.lineNumber+1===n.lineNumber?void 0:new W(new ce(i.lineNumber+1,0),r.lineAt(n.lineNumber-1).range.end);if(n.lineNumber>0)return new W(new ce(0,0),r.lineAt(n.lineNumber-1).range.end)}function L9(t,e){let{document:r}=t,n=r.lineAt(e.end),i=V9(r,n);if(i!=null)return i.lineNumber-1===n.lineNumber?void 0:new W(new ce(n.lineNumber+1,0),r.lineAt(i.lineNumber-1).range.end);if(n.lineNumber<r.lineCount-1)return new W(new ce(n.lineNumber+1,0),r.lineAt(r.lineCount-1).range.end)}function U9(t,e){for(;e.lineNumber>0;){let r=t.lineAt(e.lineNumber-1);if(!r.isEmptyOrWhitespace)return r;e=r}return null}function V9(t,e){for(;e.lineNumber+1<t.lineCount;){let r=t.lineAt(e.lineNumber+1);if(!r.isEmptyOrWhitespace)return r;e=r}return null}var po=class extends Ue{constructor(){super(...arguments);this.type="RawSelectionTarget";this.insertionDelimiter="";this.isRaw=!0;this.isToken=!1;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.getCloneParameters=()=>this.state}};var Sa=class t extends Ue{constructor(r){super({...r,contentRange:bd(r.editor,r.fullInteriorRange)});this.type="InteriorTarget";this.insertionDelimiter=" ";this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.fullInteriorRange;this.fullInteriorRange=r.fullInteriorRange}getCloneParameters(){return{...this.state,fullInteriorRange:this.fullInteriorRange}}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,fullInteriorRange:yl(this.fullInteriorRange,n.fullInteriorRange,!0,!0)})}};function kd(t){let e=Xo(t.contentRange,t.prefixRange),r=t.getTrailingDelimiterTarget()??t.getLeadingDelimiterTarget();return r!=null?e.union(r.contentRange):e}var B9=['"',"'","(","[","{","<"],H9=['"',"'",")","]","}",">",",",";",":"];function zn(t){let{editor:e}=t,{start:r}=Xo(t.contentRange,t.prefixRange),o=e.document.lineAt(r).text.slice(0,r.character).match(/\s+$/);return o==null?void 0:new He({contentRange:new W(r.line,r.character-o[0].length,r.line,r.character),editor:e,isReversed:t.isReversed})}function Gn(t){let{editor:e}=t,{end:r}=t.contentRange,o=e.document.lineAt(r).text.slice(r.character).match(/^\s+/);return o==null?void 0:new He({contentRange:new W(r.line,r.character,r.line,r.character+o[0].length),editor:e,isReversed:t.isReversed})}function Kn(t){let{editor:e}=t,r=Xo(t.contentRange,t.prefixRange),{start:n,end:i}=r,o=t.getLeadingDelimiterTarget()?.contentRange??n.toEmptyRange(),a=t.getTrailingDelimiterTarget()?.contentRange??i.toEmptyRange(),l=co(e,r);return o.union(a).isRangeEqual(l)?l:!a.isEmpty&&(!o.isEmpty||r.start.isEqual(l.start)||B9.includes(W9(e,r)))?r.union(a):!o.isEmpty&&(r.end.isEqual(l.end)||H9.includes($9(e,r)))?r.union(o):r}function W9(t,e){let{start:r}=e,n=t.document.lineAt(r);return r.isAfter(n.range.start)?t.document.getText(new W(r.translate(void 0,-1),r)):""}function $9(t,e){let{end:r}=e,n=t.document.lineAt(r);return r.isBefore(n.range.end)?t.document.getText(new W(r.translate(void 0,1),r)):""}var uo=class t extends Ue{constructor(r){super(r);this.type="ScopeTypeTarget";this.scopeTypeType_=r.scopeTypeType,this.removalRange_=r.removalRange,this.interiorRange_=r.interiorRange,this.leadingDelimiterRange_=r.leadingDelimiterRange,this.trailingDelimiterRange_=r.trailingDelimiterRange,this.prefixRange=r.prefixRange,this.insertionDelimiter=r.insertionDelimiter??j9(r.scopeTypeType),this.hasDelimiterRange_=!!this.leadingDelimiterRange_||!!this.trailingDelimiterRange_}getLeadingDelimiterTarget(){if(this.leadingDelimiterRange_!=null)return new He({editor:this.editor,isReversed:this.isReversed,contentRange:this.leadingDelimiterRange_});if(!this.hasDelimiterRange_)return zn(this)}getTrailingDelimiterTarget(){if(this.trailingDelimiterRange_!=null)return new He({editor:this.editor,isReversed:this.isReversed,contentRange:this.trailingDelimiterRange_});if(!this.hasDelimiterRange_)return Gn(this)}getInterior(){return this.interiorRange_==null?super.getInterior():[new Sa({editor:this.editor,isReversed:this.isReversed,fullInteriorRange:this.interiorRange_})]}getRemovalRange(){return this.removalRange_!=null?this.removalRange_:this.hasDelimiterRange_?kd(this):Kn(this)}maybeCreateRichRangeTarget(r,n){if(this.scopeTypeType_!==n.scopeTypeType_)return null;let i=this.removalRange_!=null||n.removalRange_!=null?yl(this.removalRange_??this.contentRange,n.removalRange_??n.contentRange,!0,!0):void 0;return new t({...this.getCloneParameters(),isReversed:r,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:n.trailingDelimiterRange_,removalRange:i,contentRange:lo(this,n,!0,!0)})}getCloneParameters(){return{...this.state,insertionDelimiter:this.insertionDelimiter,prefixRange:this.prefixRange,removalRange:void 0,interiorRange:void 0,scopeTypeType:this.scopeTypeType_,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:this.trailingDelimiterRange_}}};function j9(t){switch(t){case"class":case"namedFunction":case"section":case"sectionLevelOne":case"sectionLevelTwo":case"sectionLevelThree":case"sectionLevelFour":case"sectionLevelFive":case"sectionLevelSix":case"part":case"chapter":case"subSection":case"subSubSection":case"namedParagraph":case"subParagraph":return`

`;case"anonymousFunction":case"statement":case"ifStatement":case"comment":case"xmlElement":case"collectionItem":case"branch":case"environment":return`
`;default:return" "}}var Pd=class t extends Ue{constructor(r){super(r);this.type="SubTokenWordTarget";this.isToken=!1;this.isWord=!0;this.leadingDelimiterRange_=r.leadingDelimiterRange,this.trailingDelimiterRange_=r.trailingDelimiterRange,this.insertionDelimiter=r.insertionDelimiter}getLeadingDelimiterTarget(){return xa(this.editor,this.leadingDelimiterRange_,this.isReversed)}getTrailingDelimiterTarget(){return xa(this.editor,this.trailingDelimiterRange_,this.isReversed)}getRemovalRange(){return kd(this)}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,contentRange:lo(this,n,!0,!0),trailingDelimiterRange:n.trailingDelimiterRange_})}getCloneParameters(){return{...this.state,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:this.trailingDelimiterRange_,insertionDelimiter:this.insertionDelimiter}}};var Tr=class extends Ue{constructor(){super(...arguments);this.type="TokenTarget";this.insertionDelimiter=" ";this.joinAs="token"}getLeadingDelimiterTarget(){return zn(this)}getTrailingDelimiterTarget(){return Gn(this)}getRemovalRange(){return Kn(this)}getCloneParameters(){return this.state}};var Md=class extends Ue{constructor(r){super(r);this.type="SurroundingPairTarget";this.insertionDelimiter=" ";this.boundary_=r.boundary,this.interiorRange_=r.interiorRange}getLeadingDelimiterTarget(){return zn(this)}getTrailingDelimiterTarget(){return Gn(this)}getRemovalRange(){return Kn(this)}getInterior(){return[new Sa({editor:this.editor,isReversed:this.isReversed,fullInteriorRange:this.interiorRange_})]}getBoundary(){return this.boundary_.map(r=>new Tr({editor:this.editor,isReversed:this.isReversed,contentRange:r}))}getCloneParameters(){return{...this.state,interiorRange:this.interiorRange_,boundary:this.boundary_}}};var Pt=class extends Ue{constructor(r){super(r);this.type="UntypedTarget";this.insertionDelimiter=" ";this.hasExplicitScopeType=!1;this.hasExplicitRange=r.hasExplicitRange,this.isToken=r.isToken??!0}getLeadingDelimiterTarget(){return zn(this)}getTrailingDelimiterTarget(){return Gn(this)}getRemovalRange(){return this.editor.document.getText(this.contentRange).trim().length===0?this.contentRange:Kn(this)}maybeCreateRichRangeTarget(){return null}getCloneParameters(){return{...this.state,isToken:this.isToken,hasExplicitRange:this.hasExplicitRange}}};var Ad=class extends Ue{constructor(){super(...arguments);this.type="ImplicitTarget";this.insertionDelimiter="";this.isRaw=!0;this.hasExplicitScopeType=!1;this.isImplicit=!0;this.isToken=!1;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.getCloneParameters=()=>this.state}};var Dd=class extends Ue{constructor(r){let{inputTarget:n,modifiedTarget:i,isHead:o}=r;super({...r,contentRange:CM(n.contentRange,i.contentRange,o)});this.type="HeadTailTarget";this.insertionDelimiter=" ";this.inputTarget=n,this.modifiedTarget=i,this.isHead=o}getLeadingDelimiterTarget(){return zn(this)}getTrailingDelimiterTarget(){return Gn(this)}getRemovalRange(){return Kn(this)}getInterior(){let r=this.modifiedTarget.getInterior();if(r!=null)return r.map(n=>new He({editor:this.editor,contentRange:CM(this.inputTarget.contentRange,n.contentRange,this.isHead),isReversed:this.isReversed}))}getCloneParameters(){return{...this.state,inputTarget:this.inputTarget,modifiedTarget:this.modifiedTarget,isHead:this.isHead}}};function CM(t,e,r){return r?new W(e.start,t.end):new W(t.start,e.end)}var Id=class t extends Ue{constructor(r){super({...r,contentRange:q9(r.paragraphTarget.contentRange,r.containingInterior.contentRange)});this.type="BoundedParagraphTarget";this.insertionDelimiter=`

`;this.isLine=!0;this.containingInterior=r.containingInterior,this.paragraphTarget=r.paragraphTarget,this.startLineGap=this.contentRange.start.line-this.containingInterior.fullInteriorRange.start.line,this.endLineGap=this.containingInterior.fullInteriorRange.end.line-this.contentRange.end.line}getLeadingDelimiterTarget(){return this.startLineGap>1?this.paragraphTarget.getLeadingDelimiterTarget():void 0}getTrailingDelimiterTarget(){return this.endLineGap>1?this.paragraphTarget.getTrailingDelimiterTarget():void 0}getRemovalRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.contentRange.union(r.contentRange):this.contentRange;return this.startLineGap<=0||this.endLineGap<=0?n:new Vr({contentRange:n,editor:this.editor,isReversed:this.isReversed}).getRemovalRange()}get fullLineContentRange(){return co(this.editor,this.contentRange)}getRemovalHighlightRange(){if(this.startLineGap<1||this.endLineGap<1)return this.getRemovalRange();let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return r!=null?this.fullLineContentRange.union(r.contentRange):this.fullLineContentRange}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,containingInterior:this.containingInterior.maybeCreateRichRangeTarget(r,n.containingInterior),paragraphTarget:this.paragraphTarget.maybeCreateRichRangeTarget(r,n.paragraphTarget)})}getCloneParameters(){return{...this.state,paragraphTarget:this.paragraphTarget,containingInterior:this.containingInterior}}};function q9(t,e){let r=t.intersection(e);if(r==null||r.isEmpty)throw new Error("Ranges do not intersect");return r}function Fd(t){return t.activeTextEditor?.selections.map(e=>({selection:e,editor:t.activeTextEditor}))??[]}var va=class{run(){return Fd(D()).map(e=>new Pt({editor:e.editor,isReversed:e.selection.isReversed,contentRange:e.selection,hasExplicitRange:!e.selection.isEmpty,isToken:!1}))}};var Qn=class{constructor(e,r){this.debouncer=new Mu(r,e.getOwnConfiguration("decorationDebounceDelayMs")),this.run=this.run.bind(this)}run(){this.debouncer.run()}dispose(){this.debouncer.dispose()}};var Cd=class{constructor(e,r){this.ide=e;this.storedTargets=r;this.disposables=[];this.debouncer=new Qn(e.configuration,()=>this.updateKeyboardTarget()),this.disposables.push(e.configuration.onDidChangeConfiguration(()=>this.maybeActivate()),this.debouncer),this.maybeActivate()}maybeActivate(){if(this.ide.configuration.getOwnConfiguration("experimental.keyboardTargetFollowsSelection")){this.selectionWatcherDisposable==null&&(this.selectionWatcherDisposable=this.ide.onDidChangeTextEditorSelection(this.debouncer.run));return}this.selectionWatcherDisposable!=null&&(this.selectionWatcherDisposable.dispose(),this.selectionWatcherDisposable=void 0)}updateKeyboardTarget(){this.ide.activeTextEditor==null||this.storedTargets.get("keyboard")==null||this.storedTargets.set("keyboard",new va().run())}dispose(){this.disposables.forEach(e=>e.dispose()),this.selectionWatcherDisposable?.dispose()}};var Od=class{constructor(e){this.ide=e;switch(e.disposeOnExit(this),this.evaluateSetting=this.evaluateSetting.bind(this),this.active=!0,e.runMode){case"development":this.enableDebugLog();break;case"test":this.disableDebugLog();break;case"production":this.evaluateSetting(),this.disposableConfiguration=e.configuration.onDidChangeConfiguration(this.evaluateSetting);break}}log(...e){this.active&&console.log(...e)}dispose(){this.disposableConfiguration&&this.disposableConfiguration.dispose()}enableDebugLog(){this.active=!0}disableDebugLog(){this.active=!1}evaluateSetting(){this.ide.configuration.getOwnConfiguration("debug")?this.enableDebugLog():this.disableDebugLog()}};var z9=["!","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_","`","{","|","}","~","\xA3",'"'],G9=z9.map(Nr).join("|"),K9=["[a-zA-Z0-9]",G9].join("|"),Q9=new RegExp(`^(${K9})$`,"u"),Z9="[unk]",Y9=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}]/gu,Nd=class{constructor(){this.disposables=[];this.algorithmChangeNotifier=new Wt;this.getTokenGraphemes=e=>jn(e,Y9,r=>({text:this.normalizeGrapheme(r[0]),tokenStartOffset:r.index,tokenEndOffset:r.index+r[0].length}));this.registerAlgorithmChangeListener=this.algorithmChangeNotifier.registerListener;D().disposeOnExit(this),this.updateTokenHatSplittingMode=this.updateTokenHatSplittingMode.bind(this),this.getTokenGraphemes=this.getTokenGraphemes.bind(this),this.updateTokenHatSplittingMode(),this.disposables.push(D().configuration.onDidChangeConfiguration(this.updateTokenHatSplittingMode))}updateTokenHatSplittingMode(){let{lettersToPreserve:e,symbolsToPreserve:r,...n}=D().configuration.getOwnConfiguration("tokenHatSplittingMode");this.tokenHatSplittingMode={lettersToPreserve:e.map(i=>i.toLowerCase().normalize("NFC")),symbolsToPreserve:r.map(i=>i.normalize("NFC")),...n},this.algorithmChangeNotifier.notifyListeners()}normalizeGrapheme(e){let{preserveCase:r,lettersToPreserve:n,symbolsToPreserve:i}=this.tokenHatSplittingMode,o=e.normalize("NFC");return i.includes(o)||(r||(o=o.toLowerCase()),n.includes(o.toLowerCase()))||(o=sT(o),Q9.test(o)||(o=Z9)),o}dispose(){this.disposables.forEach(({dispose:e})=>e())}};function Jo(){return _S==null&&(_S=new Nd),_S}var _S;var OM=({penalty:t})=>-t;function NM(t){return({grapheme:{text:e},style:r})=>{let n=t.get({grapheme:e,hatStyle:r});return n==null?1/0:-n}}function LM(t,e){let r=Uc(n=>mT(e[n].filter(i=>i>t))??1/0);return({grapheme:{text:n}})=>r(n)}function ES(t){return e=>e.grapheme.text===t?.grapheme&&e.style===t?.hatStyle?1:0}function UM(t){switch(t){case"greedy":return({penalty:e})=>-e;case"balanced":return({penalty:e})=>-(e<2?0:1);case"stable":return e=>0}}function VM(t,e){if(t.length===0)return;let r=t;for(let n of e){if(r.length===1)return r[0];r=X9(r,n)}return r[0]}function X9(t,e){let r=-1/0,n=[];for(let i of t){let o=e(i);o<r||(o>r&&(r=o,n.length=0),n.push(i))}return n}function BM({hatOldTokenRanks:t,graphemeTokenRanks:e},r,n,i,o,a){return VM(a,[ES(i),UM(r),ES(o),NM(t),OM,LM(n,e)])}function HM(t,e,r){let n={},i=new oo(({grapheme:o,hatStyle:a})=>[o,a]);return t.forEach(({token:o,rank:a})=>{let l=e.get(o);l!=null&&i.set(l,a),r.getTokenGraphemes(o.text).forEach(({text:p})=>{let u;p in n?u=n[p]:(u=[],n[p]=u),u.push(a)})}),{hatOldTokenRanks:i,graphemeTokenRanks:n}}function WM(t,e=[]){return new Map(uT(Je,vi)(Vc([e],t.visibleRanges.map(r=>hT(r.start.line,r.end.line+1)))).sort((r,n)=>r-n).map((r,n)=>[r,n]))}function $M(t,e){return(r,n)=>{let i=Math.abs(r.displayLine-t),o=Math.abs(n.displayLine-t);if(i<o)return-1;if(i>o)return 1;let a=Math.abs(r.range.start.character-e),l=Math.abs(n.range.start.character-e);return a-l}}var J9=["-","+","*","/","=","<",">","_","#",".","|","&",":"],e5=["!==","!=","+=","-=","*=","/=","%=","<=",">=","=>","->","??",'"""',"```","/*","*/","<!--","-->"],t5=["\\p{L}","\\p{M}","\\p{N}"],r5="[^\\s\\w]",n5="(?<![.\\d])\\d+\\.\\d+(?![.\\d])";function i5(t){let{fixedTokens:e,repeatableSymbols:r,identifierWordRegexes:n,identifierWordDelimiters:i,numbersRegex:o,singleSymbolsRegex:a}=t,l=r.map(Nr).map(x=>`${x}+`).join("|"),p=e.map(Nr).join("|"),d=`(${n.concat(i.map(Nr)).join("|")})+`,h=`(${n.join("|")})+`,g=[p,o,d,l,a].join("|");return{identifierMatcher:new RegExp(d,"gu"),wordMatcher:new RegExp(h,"gu"),tokenMatcher:new RegExp(g,"gu")}}var RS=new Map;function Sr(t){let e=D().configuration.getOwnConfiguration("wordSeparators",{languageId:t}),r=e.join("\0");if(!RS.has(r)){let n={fixedTokens:e5,repeatableSymbols:J9,identifierWordRegexes:t5,identifierWordDelimiters:e,numbersRegex:n5,singleSymbolsRegex:r5};RS.set(r,i5(n))}return RS.get(r)}function jM(t,e,r){return jn(t,Sr(e).tokenMatcher,r)}function qM(t,e){let r=t.document.languageId,n=t.document.getText(e),i=t.document.offsetAt(e.start);return jM(n,r,o=>{let a=i+o.index,l=i+o.index+o[0].length,p=new W(t.document.positionAt(a),t.document.positionAt(l));return{editor:t,text:o[0],range:p,offsets:{start:a,end:l}}})}function zM(t,e,r){let i=s5(t,e).flatMap(o=>{let a=o.selections[0].active,l=WM(o,[a.line]),p=Je(o.visibleRanges.map(u=>qM(o,u).map(d=>({...d,displayLine:l.get(d.range.start.line)}))));return p.sort($M(l.get(a.line),a.character)),p});return o5(r,i).map((o,a)=>({token:o,rank:-a}))}function o5(t,e){return t==null?e:e.sort((r,n)=>{let i=t.has(r),o=t.has(n);return i&&!o?-1:!i&&o?1:0})}function s5(t,e){let r;return t==null?r=e:r=[t,...e.filter(n=>n!==t)],r}function kS({tokenGraphemeSplitter:t,enabledHatStyles:e,forceTokenHats:r,oldTokenHats:n,hatStability:i,activeTextEditor:o,visibleTextEditors:a}){let l=r==null?void 0:GM(r),p=GM(n),u=zM(o,a,l),d=HM(u,p,t),h=Object.keys(e),g=new so(()=>[...h]);return u.map(({token:x,rank:_})=>{let w=a5(t,x,g,e),C=BM(d,i,_,l?.get(x),p.get(x),w);if(C!=null)return g.set(C.grapheme.text,g.get(C.grapheme.text).filter(M=>M!==C.style)),c5(x,C)}).filter(x=>x!=null)}function GM(t){let e=new oo(({editor:r,offsets:n})=>[r.id,n.start,n.end]);return t.forEach(r=>e.set(r.token,r)),e}function a5(t,e,r,n){let i=[],o=t.getTokenGraphemes(e.text);for(let a of o)for(let l of r.get(a.text))i.push({grapheme:a,style:l,penalty:n[l].penalty});return i}function c5(t,e){return{hatStyle:e.style,grapheme:e.grapheme.text,token:t,hatRange:new W(t.range.start.translate(void 0,e.grapheme.tokenStartOffset),t.range.start.translate(void 0,e.grapheme.tokenEndOffset))}}var Ld=class{constructor(e,r){this.hats=e;this.context=r;this.disposables=[];D().disposeOnExit(this);let n=new Qn(D().configuration,()=>this.allocateHats());this.disposables.push(this.hats.onDidChangeEnabledHatStyles(n.run),this.hats.onDidChangeIsEnabled(n.run),D().onDidOpenTextDocument(n.run),D().onDidCloseTextDocument(n.run),D().onDidChangeActiveTextEditor(n.run),D().onDidChangeVisibleTextEditors(n.run),D().onDidChangeTextDocument(n.run),D().onDidChangeTextEditorSelection(n.run),D().onDidChangeTextEditorVisibleRanges(n.run),Jo().registerAlgorithmChangeListener(n.run),n)}async allocateHats(e){let r=await this.context.getActiveMap();e=e?.map(i=>({...i,grapheme:Jo().normalizeGrapheme(i.grapheme)}));let n=this.hats.isEnabled?kS({tokenGraphemeSplitter:Jo(),enabledHatStyles:this.hats.enabledHatStyles,forceTokenHats:e,oldTokenHats:r.tokenHats,hatStability:D().configuration.getOwnConfiguration("experimental.hatStability"),activeTextEditor:D().activeTextEditor,visibleTextEditors:D().visibleTextEditors}):[];r.setTokenHats(n),await this.hats.setHatRanges(n.map(({hatStyle:i,hatRange:o,token:{editor:a}})=>({editor:a,range:o,styleName:i})))}dispose(){this.disposables.forEach(({dispose:e})=>e())}};var Ud=class t{constructor(e){this.rangeUpdater=e;this.isExpired=!1;this.documentTokenLists=new Map;this.deregisterFunctions=[];this.map={};this._tokenHats=[]}get tokenHats(){return this._tokenHats}getDocumentTokenList(e){let r=e.uri.toString(),n=this.documentTokenLists.get(r);return n==null&&(n=[],this.documentTokenLists.set(r,n),this.deregisterFunctions.push(this.rangeUpdater.registerRangeInfoList(e,n))),n}clone(){let e=new t(this.rangeUpdater);return e.setTokenHats(this._tokenHats),e}setTokenHats(e){this.map={},this.documentTokenLists=new Map,this.deregisterFunctions.forEach(n=>n());let r=e.map(n=>{let{hatStyle:i,grapheme:o,token:a}=n,l=this.makeTokenLive(a);return this.map[al(i,o)]=l,{...n,token:l}});this._tokenHats=r}makeTokenLive(e){let{tokenMatcher:r}=Sr(e.editor.document.languageId),n={...e,expansionBehavior:{start:{type:"regex",regex:r},end:{type:"regex",regex:r}}};return this.getDocumentTokenList(e.editor.document).push(n),n}getEntries(){return this.checkExpired(),Object.entries(this.map)}getToken(e,r){return this.checkExpired(),this.map[al(e,Jo().normalizeGrapheme(r))]}checkExpired(){if(this.isExpired)throw Error("Map snapshot has expired")}dispose(){this.isExpired=!0,this.deregisterFunctions.forEach(e=>e())}};var l5=6e4,Vd=class{constructor(e,r,n,i){this.debug=r;this.commandServerApi=i;this.prePhraseMapsSnapshotTimestamp=null;this.lastSignalVersion=null;D().disposeOnExit(this),this.activeMap=new Ud(e),this.getActiveMap=this.getActiveMap.bind(this),this.allocateHats=this.allocateHats.bind(this),this.hatAllocator=new Ld(n,{getActiveMap:this.getActiveMap})}allocateHats(e){return this.hatAllocator.allocateHats(e)}async getActiveMap(){return await this.maybeTakePrePhraseSnapshot(),this.activeMap}async getReadableMap(e){return await this.maybeTakePrePhraseSnapshot(),e?this.lastSignalVersion==null?(console.error("Pre phrase snapshot requested but no signal was present; please upgrade command client"),this.activeMap):this.prePhraseMapSnapshot==null?(console.error("Navigation map pre-phrase snapshot requested, but no snapshot has been taken"),this.activeMap):performance.now()-this.prePhraseMapsSnapshotTimestamp>l5?(console.error("Navigation map pre-phrase snapshot requested, but snapshot is more than a minute old"),this.activeMap):this.prePhraseMapSnapshot:this.activeMap}dispose(){this.activeMap.dispose(),this.prePhraseMapSnapshot!=null&&this.prePhraseMapSnapshot.dispose()}async maybeTakePrePhraseSnapshot(){let e=await this.commandServerApi.signals.prePhrase.getVersion();e!==this.lastSignalVersion&&(this.debug.log("taking snapshot"),this.lastSignalVersion=e,e!=null&&this.takePrePhraseSnapshot())}takePrePhraseSnapshot(){this.prePhraseMapSnapshot!=null&&this.prePhraseMapSnapshot.dispose(),this.prePhraseMapSnapshot=this.activeMap.clone(),this.prePhraseMapsSnapshotTimestamp=performance.now()}};function PS(t,e,r){let n=t.get(e);return n==null&&(n=r(),t.set(e,n)),n}var IS=dr(Tl(),1);function FS(t,e){let{originalOffsets:{start:r,end:n},finalOffsets:{end:i},displacement:o}=t,{offsets:{start:a,end:l}}=e;return(0,IS.invariant)(n>r,()=>"Change range expected to be nonempty"),(0,IS.invariant)(n>=a&&r<=l,()=>"Change range expected to intersect with selection range"),{start:n<=a?a+o:Math.min(a,i),end:n<=l?l+o:Math.min(l,i)}}var JM=dr(Tl(),1);function CS(t,e){let{event:{text:r,isReplace:n},finalOffsets:{start:i,end:o}}=t;if((0,JM.invariant)(i===t.originalOffsets.end&&i===e.offsets.start&&i===e.offsets.end,()=>"Selection range and change range expected to be same empty range"),n){let a=e.expansionBehavior.end;switch(a.type){case"closed":return{start:i,end:i};case"open":return{start:i,end:o};case"regex":{let l=r.match(Tf(a.regex));return l==null?{start:i,end:i}:{start:i,end:i+l[0].length}}}}else{let a=e.expansionBehavior.start;switch(a.type){case"closed":return{start:o,end:o};case"open":return{start:i,end:o};case"regex":{let l=r.search(xf(a.regex));return l===-1?{start:o,end:o}:{start:i+l,end:o}}}}}var OS=dr(Tl(),1);function NS(t,e){let{event:{text:r},originalOffsets:{start:n},displacement:i}=t,{offsets:{start:o,end:a},text:l}=e;if((0,OS.invariant)(a>o,()=>"Selection range expected to be nonempty"),(0,OS.invariant)(n>=o&&n<=a,()=>"Insertion offset expected to intersect with selection range"),n>o&&n<a)return{start:o,end:a+i};if(n===o){let p=e.expansionBehavior.start,u=a+i;switch(p.type){case"closed":return{start:o+i,end:u};case"open":return{start:o,end:u};case"regex":{let d=r+l,h=xf(p.regex),g=d.search(h);for(;g>r.length;)d=d.slice(0,g),g=d.search(h);return g===-1?{start:o,end:u}:{start:o+g,end:u}}}}else{let p=e.expansionBehavior.end,u=o;switch(p.type){case"closed":return{start:u,end:a};case"open":return{start:u,end:a+i};case"regex":{let d=l+r,h=Tf(p.regex),g=d.match(h),x=g==null?0:g[0].length;for(;x!==0&&x<l.length;)d=l.slice(x)+r,g=d.match(h),x=g==null?0:x+g[0].length;return x===0?{start:u,end:a}:{start:u,end:o+x}}}}}function eA(t,e,r){let{start:n,end:i}=t.originalOffsets,{start:o,end:a}=e.offsets,l=Math.min(n,o),p="";return o<n&&(p+=e.text.substring(0,n-o)),p+=t.event.text,i<a&&(p+=e.text.substring(a-i,e.text.length)),p.substring(r.start-l,r.end-l)}function tA(t,e){let{document:r,contentChanges:n}=t,i=n.map(o=>{let a=o.text.length-o.rangeLength,l=o.rangeOffset,p=l+o.rangeLength,u=l,d=p+a;return{displacement:a,event:o,originalOffsets:{start:l,end:p},finalOffsets:{start:u,end:d}}});for(let o of e){let a=o.offsets,l=i.map(u=>{let d;return u.originalOffsets.start>a.end?{start:0,end:0}:u.originalOffsets.end<a.start?{start:u.displacement,end:u.displacement}:(u.event.rangeLength===0?o.range.isEmpty?d=CS(u,o):d=NS(u,o):d=FS(u,o),o.text=eA(u,o,d),{start:d.start-a.start,end:d.end-a.end})}),p={start:a.start+ff(l,({start:u})=>u),end:a.end+ff(l,({end:u})=>u)};o.range=o.range.with(r.positionAt(p.start),r.positionAt(p.end)),o.offsets=p}}var Hd=class{constructor(){this.rangeInfoLists=new Map;this.replaceEditLists=new Map;this.listenForDocumentChanges()}getDocumentRangeInfoLists(e){return PS(this.rangeInfoLists,e.uri.toString(),()=>[])}getDocumentReplaceEditLists(e){return PS(this.replaceEditLists,e.uri.toString(),()=>[])}registerRangeInfoList(e,r){let n=this.getDocumentRangeInfoLists(e);return n.push(r),()=>er(n,r)}registerReplaceEditList(e,r){let n=this.getDocumentReplaceEditLists(e);return n.push(r),()=>er(n,r)}*documentRangeInfoGenerator(e){let r=this.getDocumentRangeInfoLists(e);for(let n of r)for(let i of n)yield i}listenForDocumentChanges(){this.disposable=D().onDidChangeTextDocument(e=>{let r=this.getDocumentReplaceEditLists(e.document),n={...e,contentChanges:e.contentChanges.map(i=>x5(r,i)?{...i,isReplace:!0}:i)};tA(n,this.documentRangeInfoGenerator(e.document))})}dispose(){this.disposable.dispose()}};function x5(t,e){for(let r of t)for(let n of r)if(n.range.isRangeEqual(e.range)&&n.text===e.text)return!0;return!1}var Wd=class{constructor(){this.signals={prePhrase:{getVersion(){return Promise.resolve(null)}}}}getFocusedElementType(){return Promise.resolve(void 0)}};var $d=class{async allocateHats(){}async getReadableMap(){return{getEntries(){return[]},getToken(){throw new Error("Hat map is disabled")}}}dispose(){}};var jd=class{onDidChangeDefinition(e){return{dispose:()=>{}}}loadLanguage(e){return Promise.resolve()}get(e){}clearCache(){}getNodeAtLocation(e,r){}dispose(){}};var qd=class{updateUserSnippets(){throw new Error("Snippets are not implemented.")}registerThirdPartySnippets(e,r){throw new Error("Snippets are not implemented.")}getSnippetStrict(e){throw new Error("Snippets are not implemented.")}openNewSnippetFile(e){throw new Error("Snippets are not implemented.")}};var zd=class{getSpokenFormEntries(){throw new ma}onDidChange(){return{dispose:()=>{}}}};var Gd=class{getTree(e){throw new Error("Tree sitter not provided")}loadLanguage(e){return Promise.resolve(!1)}getLanguage(e){throw new Error("Tree sitter not provided")}getNodeAtLocation(e,r){throw new Error("Tree sitter not provided")}};var Ke=class extends Error{constructor(r,n=!1,i=!1){super(`No spoken form for: ${r}`);this.reason=r;this.requiresTalonUpdate=n;this.isPrivate=i}};var rA={curlyBrackets:["{","}"],angleBrackets:["<",">"],escapedDoubleQuotes:['\\"','\\"'],escapedSingleQuotes:["\\'","\\'"],escapedParentheses:["\\(","\\)"],escapedSquareBrackets:["\\[","\\]"],doubleQuotes:['"','"'],parentheses:["(",")"],backtickQuotes:["`","`"],squareBrackets:["[","]"],singleQuotes:["'","'"],tripleDoubleQuotes:['"""','"""'],tripleSingleQuotes:["'''","'''"],whitespace:[" "," "],any:null,string:null,collectionBoundary:null};var nA=new oo(t=>t);for(let[t,e]of Object.entries(rA))e!=null&&nA.set(e,t);function iA(t,e,r){let n=nA.get([e,r]);if(n==null)throw Error(`Unknown surrounding pair delimiters '${e} ${r}'`);return t.pairedDelimiter[n]}var T5={ifStatement:"if",ifElseStatement:"if else",tryCatchStatement:"try",functionDeclaration:"funk",link:"link"},S5={"ifElseStatement.alternative":"else","functionDeclaration.body":"funk","ifElseStatement.consequence":"if else","ifStatement.consequence":"if","tryCatchStatement.body":"try","link.text":"link"};function oA(t){if(t.type==="custom")throw new Ke("Custom insertion snippet");let e=T5[t.name];if(e==null)throw new Ke(`Named insertion snippet '${t.name}'`);if(t.substitutions!=null){let r=Object.values(t.substitutions);return`${e} ${r.join(" ")}`}return e}function sA(t){if(t.type==="custom")throw new Ke("Custom wrap with snippet");let e=`${t.name}.${t.variableName}`,r=S5[e];if(r==null)throw new Ke(`Named wrap with snippet '${e}'`);return r}function Sl(t,e,r){let n=r==="vertical"?`${ut.verticalRange} `:"";if(t&&e)return n+ut.rangeExclusive;if(t)throw new Ke("Range exclude anchor");return e?n+ut.rangeExcludingEnd:r==="vertical"?ut.verticalRange:ut.rangeInclusive}function aA(t){return Object.fromEntries(Object.entries(t).map(([e,r])=>[e,Object.fromEntries(Object.entries(r).map(([n,i])=>[n,{type:"customizable",spokenForms:i,spokenFormType:e,id:n}]))]))}var v5=["zero","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen","twenty","twenty one","twenty two","twenty three","twenty four","twenty five","twenty six","twenty seven","twenty eight","twenty nine","thirty","thirty one","thirty two","thirty three","thirty four","thirty five","thirty six","thirty seven","thirty eight","thirty nine","forty","forty one","forty two","forty three","forty four","forty five","forty six","forty seven","forty eight","forty nine","fifty","fifty one","fifty two","fifty three","fifty four","fifty five","fifty six","fifty seven","fifty eight","fifty nine","sixty","sixty one","sixty two","sixty three","sixty four","sixty five","sixty six","sixty seven","sixty eight","sixty nine","seventy","seventy one","seventy two","seventy three","seventy four","seventy five","seventy six","seventy seven","seventy eight","seventy nine","eighty","eighty one","eighty two","eighty three","eighty four","eighty five","eighty six","eighty seven","eighty eight","eighty nine","ninety","ninety one","ninety two","ninety three","ninety four","ninety five","ninety six","ninety seven","ninety eight","ninety nine"],b5=["zeroth","first","second","third","fourth","fifth","sixth","seventh","eighth","ninth","tenth","eleventh","twelfth","thirteenth","fourteenth","fifteenth","sixteenth","seventeenth","eighteenth","nineteenth","twentieth"];function ba(t){let e=v5[t];if(e==null)throw Error(`Unknown number '${t}'`);return e}function vl(t){let e=b5[t];if(e==null)throw Error(`Unknown ordinal '${t}'`);return e}var Kd=class{constructor(e){this.spokenFormMap=e;this.handleModifier=this.handleModifier.bind(this)}handlePrimitiveTarget(e){let r=[];return e.modifiers!=null&&r.push(e.modifiers.map(this.handleModifier)),e.mark!=null&&r.push(this.handleMark(e.mark)),r}handleModifier(e){switch(e.type){case"cascading":case"modifyIfUntyped":case"preferredScope":throw new Ke(`Modifier '${e.type}'`);case"containingScope":if(e.ancestorIndex==null||e.ancestorIndex===0)return this.handleScopeType(e.scopeType);if(e.ancestorIndex===1)return[this.spokenFormMap.modifierExtra.ancestor,this.handleScopeType(e.scopeType)];throw new Ke(`Modifier '${e.type}' with ancestor index ${e.ancestorIndex}`);case"everyScope":return[this.spokenFormMap.simpleModifier.everyScope,this.handleScopeType(e.scopeType)];case"extendThroughStartOf":case"extendThroughEndOf":{let r=this.spokenFormMap.simpleModifier[e.type];return e.modifiers!=null?[r,e.modifiers.map(this.handleModifier)]:[r]}case"relativeScope":return e.offset===0?this.handleRelativeScopeInclusive(e):this.handleRelativeScopeExclusive(e);case"ordinalScope":{let r=this.handleScopeType(e.scopeType),n=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.length===1)return e.start===-1?[n,this.spokenFormMap.modifierExtra.last,r]:e.start===0?[n,this.spokenFormMap.modifierExtra.first,r]:e.start<0?[n,vl(Math.abs(e.start)),this.spokenFormMap.modifierExtra.last,r]:[n,vl(e.start+1),r];let i=ba(e.length);if(e.start===0)return[n,this.spokenFormMap.modifierExtra.first,i,bl(r)];if(e.start===-e.length)return[n,this.spokenFormMap.modifierExtra.last,i,bl(r)];throw new Ke(`'${e.type}' with count > 1 and offset away from start / end`)}case"range":{if(e.anchor.type==="ordinalScope"&&e.active.type==="ordinalScope"&&e.anchor.length===1&&e.active.length===1&&e.anchor.scopeType.type===e.active.scopeType.type){let r=e.anchor.start===-1?this.spokenFormMap.modifierExtra.last:vl(e.anchor.start+1),n=this.handleModifier(e.active),i=Sl(e.excludeAnchor,e.excludeActive);return[r,i,n]}throw Error(`Modifier '${e.type}' is not fully implemented`)}default:return[this.spokenFormMap.simpleModifier[e.type]]}}handleRelativeScopeInclusive(e){let r=this.handleScopeType(e.scopeType),n=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.length===1){let a=e.direction==="forward"?ut.forward:ut.backward;return[n,r,a]}let i=ba(e.length),o=bl(r);return e.direction==="forward"?[n,i,o]:[n,i,o,ut.backward]}handleRelativeScopeExclusive(e){let r=this.handleScopeType(e.scopeType),n=e.direction==="forward"?ut.next:ut.previous,i=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.offset===1){let o=ba(e.length);if(e.length===1)return[i,n,r];let a=bl(r);return[i,n,o,a]}if(e.length===1){let o=vl(e.offset);return[i,o,n,r]}throw new Ke(`${e.type} modifier with offset > 1 and length > 1`)}handleScopeType(e){switch(e.type){case"oneOf":case"surroundingPairInterior":throw new Ke(`Scope type '${e.type}'`);case"glyph":return[this.spokenFormMap.complexScopeTypeType.glyph,lA(this.spokenFormMap.grapheme,"grapheme",e.character)];case"surroundingPair":{let r=this.spokenFormMap.pairedDelimiter[e.delimiter];return e.forceDirection!=null?[this.spokenFormMap.surroundingPairForceDirection[e.forceDirection],r]:r}case"customRegex":return this.spokenFormMap.customRegex[e.regex]??{type:"customizable",spokenForms:{spokenForms:[],isCustom:!0,defaultSpokenForms:[],requiresTalonUpdate:!1,isPrivate:!1},spokenFormType:"customRegex",id:e.regex};default:return this.spokenFormMap.simpleScopeTypeType[e.type]}}handleMark(e){switch(e.type){case"decoratedSymbol":{let[r,n]=e.symbolColor.split("-"),i=[];return r!=="default"&&i.push(rM(r)),n!=null&&i.push(nM(n)),i.push(lA(this.spokenFormMap.grapheme,"grapheme",e.character)),i}case"lineNumber":return this.handleLineNumberMark(e);case"range":{if(e.anchor.type==="lineNumber"&&e.active.type==="lineNumber"){let[r,n]=this.handleLineNumberMark(e.anchor),[i,o]=this.handleLineNumberMark(e.active);if(r===i){let a=Sl(e.excludeAnchor,e.excludeActive);return[r,n,a,o]}}throw Error(`Mark '${e.type}' is not fully implemented`)}case"explicit":case"keyboard":case"target":throw new Ke(`Mark '${e.type}'`);default:return[sd[e.type]]}}handleLineNumberMark(e){switch(e.lineNumberType){case"absolute":throw new Ke("Absolute line numbers");case"modulo100":return[ad.modulo100,ba(e.lineNumber+1)];case"relative":return[e.lineNumber<0?ad.relativeUp:ad.relativeDown,ba(Math.abs(e.lineNumber))]}}};function bl(t){if(typeof t=="string")return cA(t);if(Array.isArray(t)){if(t.length===0)return t;let e=t[t.length-1];return[...t.slice(0,-1),bl(e)]}return{...t,spokenForms:{...t.spokenForms,spokenForms:t.spokenForms.spokenForms.map(cA)}}}function cA(t){return`${t}s`}function lA(t,e,r){let n=t[r];if(n==null)throw new Ke(`${e} '${r}'`);return n}var wa=class{constructor(e){this.spokenFormMap=aA(e),this.primitiveGenerator=new Kd(this.spokenFormMap)}getSpokenFormForSingleTerm(e,r){return this.componentsToSpokenForm(()=>{let n=this.spokenFormMap[e][r];if(n==null)throw new Ke(`${e} with id ${r}`);return n})}processCommand(e){return this.componentsToSpokenForm(()=>this.handleAction(e.action))}processScopeType(e){return this.componentsToSpokenForm(()=>[this.primitiveGenerator.handleScopeType(e)])}componentsToSpokenForm(e){try{return{type:"success",spokenForms:pA(e())}}catch(r){if(r instanceof Ke)return{type:"error",reason:r.reason,requiresTalonUpdate:r.requiresTalonUpdate,isPrivate:r.isPrivate};throw r}}handleAction(e){switch(e.name){case"editNew":case"getText":case"replace":case"executeCommand":case"parsed":case"private.getTargets":case"private.setKeyboardTarget":throw new Ke(`Action '${e.name}'`);case"replaceWithTarget":case"moveToTarget":return[this.spokenFormMap.action[e.name],this.handleTarget(e.source),this.handleDestination(e.destination)];case"swapTargets":return[this.spokenFormMap.action[e.name],this.handleTarget(e.target1),ut.swapConnective,this.handleTarget(e.target2)];case"callAsFunction":return e.argument.type==="implicit"?[this.spokenFormMap.action[e.name],this.handleTarget(e.callee)]:[this.spokenFormMap.action[e.name],this.handleTarget(e.callee),"on",this.handleTarget(e.argument)];case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return[iA(this.spokenFormMap,e.left,e.right),this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"pasteFromClipboard":return[this.spokenFormMap.action[e.name],this.handleDestination(e.destination)];case"insertSnippet":return[this.spokenFormMap.action[e.name],oA(e.snippetDescription),this.handleDestination(e.destination)];case"generateSnippet":if(e.snippetName!=null)throw new Ke(`${e.name}.snippetName`);return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"wrapWithSnippet":return[sA(e.snippetDescription),this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"highlight":{if(e.highlightId!=null)throw new Ke(`${e.name}.highlightId`);return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)]}default:return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)]}}handleTarget(e){switch(e.type){case"list":if(e.elements.length<2)throw new Ke("List target with < 2 elements");return e.elements.map((r,n)=>n===0?this.handleTarget(r):[ut.listConnective,this.handleTarget(r)]);case"range":{let r=this.handleTarget(e.anchor),n=this.handleTarget(e.active),i=Sl(e.excludeAnchor,e.excludeActive,e.rangeType);return[r,i,n]}case"primitive":return this.primitiveGenerator.handlePrimitiveTarget(e);case"implicit":return[]}}handleDestination(e){switch(e.type){case"list":if(e.destinations.length<2)throw new Ke("List destination with < 2 elements");return e.destinations.map((r,n)=>n===0?this.handleDestination(r):[ut.listConnective,this.handleDestination(r)]);case"primitive":return[this.handleInsertionMode(e.insertionMode),this.handleTarget(e.target)];case"implicit":return[]}}handleInsertionMode(e){switch(e){case"to":return ut.sourceDestinationConnective;case"before":return ut.before;case"after":return ut.after}}};function pA(t){if(typeof t=="string")return[t];if(Array.isArray(t))return t.length===0?[""]:uA(t.map(pA)).map(e=>e.filter(r=>r.length!==0).join(" "));if(t.spokenForms.spokenForms.length===0){let e=`${il(t.spokenFormType)} with id ${t.id}`,r;throw t.spokenForms.isPrivate?r="this is a private spoken form currently only for internal experimentation":t.spokenForms.requiresTalonUpdate?r="please update talon to the latest version (see https://www.cursorless.org/docs/user/updating/)":r="please see https://www.cursorless.org/docs/user/customization/ for more information",new Ke(`${e}; ${r}`,t.spokenForms.requiresTalonUpdate,t.spokenForms.isPrivate)}return t.spokenForms.spokenForms}function uA(t){if(t.length===0)return[];if(t.length===1)return t[0].map(i=>[i]);let[e,...r]=t,n=uA(r);return e.flatMap(i=>n.map(o=>[i,...o]))}var Qd=class{constructor(e){this.talonSpokenForms=e;this.notifier=new Wt;this.spokenFormMap_={...Ei};this.onDidChangeCustomSpokenForms=this.notifier.registerListener;this.disposable=e.onDidChange(()=>this.updateSpokenFormMaps().catch(()=>{})),this.customSpokenFormsInitialized=this.updateSpokenFormMaps(),this.customSpokenFormsInitialized.catch(()=>{})}get spokenFormMap(){return this.spokenFormMap_}get needsInitialTalonUpdate(){return this.needsInitialTalonUpdate_}async updateSpokenFormMaps(){let e;try{if(e=await this.talonSpokenForms.getSpokenFormEntries(),e.length===0)throw new Error("Custom spoken forms list empty")}catch(r){if(r instanceof nl)this.needsInitialTalonUpdate_=!0;else if(!(r instanceof ma)){console.error("Error loading custom spoken forms",r);let n=r.message.replace(/\.$/,"");it(D().messages,"CustomSpokenForms.updateSpokenFormMaps",`Error loading custom spoken forms: ${n}. Falling back to default spoken forms.`)}throw this.spokenFormMap_={...Ei},this.notifier.notifyListeners(),r}for(let r of dP)w5(this.spokenFormMap_,r,lS[r],Object.fromEntries(e.filter(n=>n.type===r).map(({id:n,spokenForms:i})=>[n,i])));this.notifier.notifyListeners()}getCustomRegexScopeTypes(){return Object.keys(this.spokenFormMap_.customRegex).map(e=>({type:"customRegex",regex:e}))}dispose(){this.disposable.dispose()}};function w5(t,e,r,n){let i=Array.from(new Set([...Object.keys(r),...Object.keys(n)])),o={};for(let a of i){let{defaultSpokenForms:l=[],isPrivate:p=!1}=r[a]??{},u=n[a];o[a]=u==null?{defaultSpokenForms:l,spokenForms:[],requiresTalonUpdate:!p,isCustom:!1,isPrivate:p}:{defaultSpokenForms:l,spokenForms:u,requiresTalonUpdate:!1,isCustom:!Si(l,u),isPrivate:p}}t[e]=o}var Zd=class{constructor(e){this.customSpokenForms=new Qd(e),this.customSpokenFormsInitialized=this.customSpokenForms.customSpokenFormsInitialized,this.spokenFormGenerator=new wa(this.customSpokenForms.spokenFormMap),this.disposable=this.customSpokenForms.onDidChangeCustomSpokenForms(()=>{this.spokenFormGenerator=new wa(this.customSpokenForms.spokenFormMap)})}onDidChangeCustomSpokenForms(e){return this.customSpokenForms.onDidChangeCustomSpokenForms(e)}commandToSpokenForm(e){return this.spokenFormGenerator.processCommand(e)}scopeTypeToSpokenForm(e){return this.spokenFormGenerator.processScopeType(e)}actionIdToSpokenForm(e){return this.spokenFormGenerator.getSpokenFormForSingleTerm("action",e)}graphemeToSpokenForm(e){return this.spokenFormGenerator.getSpokenFormForSingleTerm("grapheme",e)}getCustomRegexScopeTypes(){return this.customSpokenForms.getCustomRegexScopeTypes()}get needsInitialTalonUpdate(){return this.customSpokenForms.needsInitialTalonUpdate}dispose(){this.disposable.dispose()}};function*_5(t){for(let e of t)for(let r of e)yield r}function*wl(t,e){let r=Yd(e),n=t;for(;n-- >0;){let i=r.next();if(!i.done)yield i.value;else return}}function*LS(t){let e=Yd(t),r=e.next();if(r.done)return;let n=r.value;for(let i of e)yield[n,i],n=i}var Rwe=Symbol();function*E5(t=0,e=1){let r=t;for(;;)yield r,r+=e}function*dA(t,e){for(let r of t)e(r)&&(yield r)}function*Lt(t,e){for(let r of t)yield e(r)}function*mA(t,e,r,n=1){let i,o;if(r!==void 0?(i=e,o=r):(i=0,o=e),i<0)throw new Error("start cannot be negative");if(o!==null&&o<0)throw new Error("stop cannot be negative");if(n<=0)throw new Error("step cannot be negative");let a=-1,l=Yd(t),p;for(;;){if(a++,o!==null&&a>=o||(p=l.next(),p.done))return;a<i||(a-i)%n===0&&(yield p.value)}}function*R5(t,e){let r=Yd(t),n;for(;!(n=r.next()).done;){let i=n.value;if(!e(i))return;yield i}}function Yd(t){return t[Symbol.iterator]()}function _a(t,e){return Array.from(Lt(t,e))}function fA(t,e,r){let n=E5(t,r),i=r>=0?o=>o<e:o=>o>e;return R5(n,i)}function hA(t,e,r=1){return e!==void 0?fA(t,e,r):fA(0,t,r)}function Xd(t,e){return _5(Lt(t,e))}function An(t,e,{domain:r},{domain:n}){return t==="forward"?k5(e,r,n):P5(e,r,n)}function k5(t,e,r){let n=e.start.isAfterOrEqual(t),i=r.start.isAfterOrEqual(t);if(n&&i){let a=e.start.compareTo(r.start);return a===0?e.end.compareTo(r.end):a}if(!n&&!i){let a=e.end.compareTo(r.end);return a===0?-e.start.compareTo(r.start):a}if(!n&&i){let a=e.end.compareTo(r.start);return a!==0?a:r.isEmpty?1:-1}let o=e.start.compareTo(r.end);return o!==0?o:e.isEmpty?-1:1}function P5(t,e,r){let n=e.end.isBeforeOrEqual(t),i=r.end.isBeforeOrEqual(t);if(n&&i){let a=-e.end.compareTo(r.end);return a===0?-e.start.compareTo(r.start):a}if(!n&&!i){let a=-e.start.compareTo(r.start);return a===0?e.end.compareTo(r.end):a}if(!n&&i){let a=-e.start.compareTo(r.end);return a!==0?a:r.isEmpty?1:-1}let o=-e.end.compareTo(r.start);return o!==0?o:e.isEmpty?-1:1}function gA(t,e,r,n,i,o){return M5(t,n,i,o)&&(i==null||An(r,n.includeDescendantScopes?t:e,i,o)<0)}function M5(t,e,r,n){let{containment:i,distalPosition:o,allowAdjacentScopes:a,skipAncestorScopes:l}=e,{domain:p}=n;switch(i){case"disallowed":if(p.contains(t))return!1;break;case"disallowedIfStrict":if(FM(p,t))return!1;break;case"required":if(!p.contains(t))return!1;break}return l&&r!=null&&p.contains(r.domain)?!1:A5(new W(t,o),p,a)}function A5(t,e,r){let n=t.intersection(e);return n==null?!1:!n.isEmpty||r||e.isEmpty}var D5={containment:null,allowAdjacentScopes:!1,skipAncestorScopes:!1,includeDescendantScopes:!1},yt=class{constructor(){this.includeAdjacentInEvery=!1}*generateScopes(e,r,n,i={}){let o={...D5,...i,distalPosition:i.distalPosition??(n==="forward"?e.document.range.end:e.document.range.start)},a,l=r;for(let p of this.generateScopeCandidates(e,r,n,o))if(gA(r,l,n,o,a,p)&&(yield p,a=p,l=n==="forward"?p.domain.end:p.domain.start),this.canStopEarly(r,n,o,a,p))return}canStopEarly(e,r,n,i,o){let{containment:a,distalPosition:l,skipAncestorScopes:p}=n;if(this.isHierarchical&&!p)return!1;let u=this.isHierarchical&&p?i:o;return u==null?!1:!!(a==="required"&&(r==="forward"?u.domain.end.isAfter(e):u.domain.start.isBefore(e))||(r==="forward"?u.domain.end.isAfterOrEqual(l):u.domain.start.isBeforeOrEqual(l)))}};var vr=class extends yt{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.scopeType=n;this.languageId=i;this.isHierarchical=!1}get searchScopeType(){return this.iterationScopeType}get searchScopeHandler(){return this._searchScopeHandler==null&&(this._searchScopeHandler=this.scopeHandlerFactory.create(this.searchScopeType,this.languageId)),this._searchScopeHandler}generateScopeCandidates(r,n,i,o){let{containment:a,...l}=o,p=this.searchScopeHandler.generateScopes(r,n,i,{containment:a==="required"?"required":void 0,...l});return Xd(p,u=>this.generateScopesInSearchScope(i,u))}};var Jd=class extends yt{constructor(r,n){super();this.scopeType={type:"line"};this.iterationScopeType={type:"paragraph"};this.isHierarchical=!1;this.includeAdjacentInEvery=!0}*generateScopeCandidates(r,n,i){if(i==="forward")for(let o=n.line;o<r.document.lineCount;o++)yield yA(r,o);else for(let o=n.line;o>=0;o--)yield yA(r,o)}};function yA(t,e){let{range:r}=t.document.lineAt(e);return{editor:t,domain:r,getTargets:n=>[US(t,n,r)]}}function US(t,e,r){return new Vr({editor:t,isReversed:e,contentRange:_l(t,r)})}function _l(t,e){let r=t.document.lineAt(e.start),n=t.document.lineAt(e.end);return new W(r.rangeTrimmed?.start??r.range.start,n.rangeTrimmed?.end??n.range.end)}function cn(t,e,r,n){let i=e.document.offsetAt(r.start),o=e.document.getText(r),a=l=>new W(e.document.positionAt(i+l.index),e.document.positionAt(i+l.index+l[0].length));return t.lastIndex=0,n==="forward"?Lt(o.matchAll(t),a):Array.from(o.matchAll(t),a).reverse()}var em=class extends vr{constructor(){super(...arguments);this.scopeType={type:"identifier"};this.iterationScopeType={type:"line"};this.regex=Sr(this.languageId).identifierMatcher}generateScopesInSearchScope(r,{editor:n,domain:i}){return Lt(cn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:a=>[new Tr({editor:n,contentRange:o,isReversed:a})]}))}};function tm(t,e,r){let n=t.editor.document.getText(t.domain),i=e.editor.document.getText(e.domain);for(let o of r){let a=zc(o,n),l=zc(o,i);if(a&&!l)return!0;if(l&&!a)return!1}}var I5=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}\p{Z}\p{C}]/gu,F5=/[$]/g,C5=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}]/gu,rm=class extends vr{constructor(){super(...arguments);this.scopeType={type:"character"};this.iterationScopeType={type:"token"}}get searchScopeType(){return{type:"line"}}generateScopesInSearchScope(r,{editor:n,domain:i}){return Lt(cn(I5,n,i,r),o=>({editor:n,domain:o,getTargets:a=>[new He({editor:n,contentRange:o,isReversed:a,isToken:!1})]}))}isPreferredOver(r,n){let{identifierMatcher:i}=Sr(this.languageId);return tm(r,n,[i,F5,C5])}};var O5=/\p{Lu}?\p{Ll}+|\p{Lu}+(?!\p{Ll})|\p{N}+/gu,nm=class{constructor(e){this.wordRegex=Sr(e).wordMatcher}splitIdentifier(e){let r=Gc(e,this.wordRegex);return r.length>1?r:Gc(e,O5)}};var im=class extends vr{constructor(){super(...arguments);this.scopeType={type:"word"};this.iterationScopeType={type:"identifier"};this.wordTokenizer=new nm(this.languageId)}getScopesInSearchScope({editor:r,domain:n}){let{document:i}=r,o=i.offsetAt(n.start),l=this.wordTokenizer.splitIdentifier(i.getText(n)).map(p=>new W(i.positionAt(o+p.index),i.positionAt(o+p.index+p.text.length)));return l.map((p,u)=>({editor:r,domain:p,getTargets:d=>{let h=u>0?l[u-1]:null,g=u+1<l.length?l[u+1]:null;return[N5(d,r,h,p,g)]}}))}generateScopesInSearchScope(r,n){let i=this.getScopesInSearchScope(n);return r==="backward"&&i.reverse(),i}};function N5(t,e,r,n,i){let o=r!=null&&n.start.isAfter(r.end)?new W(r.end,n.start):void 0,a=i!=null&&i.start.isAfter(n.end)?new W(n.end,i.start):void 0,p=o!=null||a!=null?e.document.getText(o??a):"";return new Pd({editor:e,isReversed:t,contentRange:n,insertionDelimiter:p,leadingDelimiterRange:o,trailingDelimiterRange:a})}var L5=/[$]/g,om=class extends vr{constructor(){super(...arguments);this.scopeType={type:"token"};this.iterationScopeType={type:"line"};this.regex=Sr(this.languageId).tokenMatcher}generateScopesInSearchScope(r,{editor:n,domain:i}){return Lt(cn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:a=>[new Tr({editor:n,contentRange:o,isReversed:a})]}))}isPreferredOver(r,n){let{identifierMatcher:i}=Sr(this.languageId);return tm(r,n,[i,L5])}};var sm=class extends yt{constructor(r,n){super();this.scopeType={type:"document"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i){let o=r.document.range;yield{editor:r,domain:o,getTargets:a=>[new _d({editor:r,isReversed:a,contentRange:o})]}}};function xA(t,e,r){let n=[],i=[];for(let o of t)i.length===0||e(i[i.length-1],o)?i.push(o):(n.push(r(i)),i=[o]);return i.length>0&&n.push(r(i)),n}var Ea=class extends yt{constructor(r){super();this.query=r}*generateScopeCandidates(r,n,i,o){let{document:a}=r,l=this.query.matches(a).map(p=>this.matchToScope(r,p)).filter(p=>p!=null).sort((p,u)=>An(i,n,p,u));yield*xA(l,(p,u)=>p.domain.isRangeEqual(u.domain),p=>p.length===1?p[0]:{...p[0],getTargets(u){let d=Hc(p.flatMap(h=>h.getTargets(u)),(h,g)=>h.isEqual(g));if(d.length>1&&!p.every(h=>h.allowMultiple)){let h="Please use #allow-multiple! predicate in your query to allow multiple matches for this scope type";if(it(D().messages,"BaseTreeSitterScopeHandler.allow-multiple",h),D().runMode==="test")throw Error(h)}return d}})}};function VS(t,e,r,n){return n?Ra(t,`${e}.${r}`,`_.${r}`):Ra(t,`${e}.${r}`)??(Ra(t,e)!=null?Ra(t,`_.${r}`):void 0)}function Pi(t,e,r,n){return VS(t,e,r,n)?.range}function Ra(t,...e){return t.captures.find(r=>e.some(n=>r.name===n))}var am=class extends Ea{constructor(r,n){super(r);this.iterateeScopeType=n;this.isHierarchical=!0;this.scopeType=void 0}get iterationScopeType(){throw Error("Not implemented")}matchToScope(r,n){let i=this.iterateeScopeType.type,o=VS(n,i,"iteration",!1);if(o==null)return;let{range:a,allowMultiple:l}=o,p=Pi(n,i,"iteration.domain",!1)??a;return{editor:r,domain:p,allowMultiple:l,getTargets:u=>[new He({editor:r,isReversed:u,contentRange:a})]}}};var cm=class extends Ea{constructor(r,n){super(r);this.scopeType=n;this.isHierarchical=!0}get iterationScopeType(){return{type:"custom",scopeHandler:new am(this.query,this.scopeType)}}matchToScope(r,n){let i=this.scopeType.type,o=Ra(n,i);if(o==null)return;let{range:a,allowMultiple:l,insertionDelimiter:p}=o,u=Pi(n,i,"domain",!0)??a,d=Pi(n,i,"removal",!0),h=Pi(n,i,"interior",!0),g=Pi(n,i,"prefix",!0)?.with(void 0,a.start),x=Pi(n,i,"leading",!0)?.with(void 0,g?.start??a.start),_=Pi(n,i,"trailing",!0)?.with(a.end);return{editor:r,domain:u,allowMultiple:l,getTargets:w=>[new uo({scopeTypeType:i,editor:r,isReversed:w,contentRange:a,prefixRange:g,removalRange:d,leadingDelimiterRange:x,trailingDelimiterRange:_,interiorRange:h,insertionDelimiter:p})]}}};function TA(t){return t.flatMap(e=>{let{value:r,done:n}=e.next();return n?[]:[{iterator:e,value:r}]})}function SA(t,e){return t.flatMap(r=>{let{iterator:n}=r,{value:i}=r,o=!1;for(;!o&&!e(i);)({value:i,done:o}=n.next());return o?[]:[{iterator:n,value:i}]})}var lm=class t extends yt{constructor(r,n,i){super();this.scopeType=r;this.scopeHandlers=n;this.getIterationScopeType=i;this.isHierarchical=!0}static create(r,n,i){let o=n.scopeTypes.map(l=>r.create(l,i)),a=()=>({type:"custom",scopeHandler:new t(void 0,o.map(l=>r.create(l.iterationScopeType,i)),()=>{throw new Error("Not implemented")})});return new t(n,o,a)}get iterationScopeType(){return this.getIterationScopeType()}*generateScopeCandidates(r,n,i,o){let a=this.scopeHandlers.map(p=>p.generateScopes(r,n,i,o)[Symbol.iterator]()),l=TA(a);for(;l.length>0;){l.sort((u,d)=>An(i,n,u.value,d.value));let p=l[0].value;yield p,l=SA(l,u=>An(i,n,p,u)<0)}}};var pm=class extends yt{constructor(r,n){super();this.scopeType={type:"paragraph"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i){let{document:o}=r,a=i==="forward"?1:-1,l=i==="forward"?o.lineCount:-1,p=U5(o,n,i),u=r.document.lineAt(n);for(let d=n.line+a;d!==l;d+=a){let h=r.document.lineAt(d);h.isEmptyOrWhitespace?p!=null&&(yield vA(r,p.range.union(u.range)),p=void 0):p==null&&(p=h),u=h}p!=null&&(yield vA(r,p.range.union(u.range)))}};function U5(t,e,r){let n=r==="forward"?-1:1,i=r==="forward"?-1:t.lineCount,o=t.lineAt(e);if(!o.isEmptyOrWhitespace){for(let a=e.line+n;a!==i;a+=n){let l=t.lineAt(a);if(l.isEmptyOrWhitespace)break;o=l}return o}}function vA(t,e){return{editor:t,domain:e,getTargets:r=>[new Ta({editor:t,isReversed:r,contentRange:_l(t,e)})]}}function El(t,e){return e.length>1?e.indexOf(t.slice(-1))>-1:t.slice(-1)===e}function bA(t,e){return t.slice(t.length-e.length)===e}var BS,B5=["al","adj","assn","Ave","BSc","MSc","Cell","Ch","Co","cc","Corp","Dem","Dept","ed","eg","Eq","Eqs","est","est","etc","Ex","ext","Fig","fig","Figs","figs","i.e","ie","Inc","inc","Jan","Feb","Mar","Apr","Jun","Jul","Aug","Sep","Sept","Oct","Nov","Dec","jr","mi","Miss","Mrs","Mr","Ms","Mol","mt","mts","no","Nos","PhD","MD","BA","MA","MM","pl","pop","pp","Prof","Dr","pt","Ref","Refs","Rep","repr","rev","Sec","Secs","Sgt","Col","Gen","Rep","Sen","Gov","Lt","Maj","Capt","St","Sr","sr","Jr","jr","Rev","Sun","Mon","Tu","Tue","Tues","Wed","Th","Thu","Thur","Thurs","Fri","Sat","trans","Univ","Viz","Vol","vs","v"];function wA(t){t?BS=t:BS=B5}function HS(t){return/^[A-Z][a-z].*/.test(t)||um(t)}function _A(t){return HS(t)||/``|"|'/.test(t.substring(0,2))}function EA(t){let e=t.replace(/[-'`~!@#$%^&*()_|+=?;:'",.<>{}[\]\\/]/gi,"");return~BS.indexOf(e)}function RA(t,e){return(t==="a.m."||t==="p.m.")&&e.replace(/\W+/g,"").slice(-3).toLowerCase()==="day"}function WS(t){let e=t.replace(/[()[]{}]/g,"").match(/(.\.)*/);return e&&e[0].length>0}function kA(t){return t.length<=3?!0:HS(t)}function $S(t,e){return e.length>0?t<5&&e[0].length<6&&HS(e[0])?!0:e.filter(function(n){return/[A-Z]/.test(n.charAt(0))}).length>=3:!1}function um(t,e){return e&&(t=t.slice(e-1,e+2)),!isNaN(t)}function PA(t){return t.match(/^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/)}function MA(t){return t.match(/[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/)}function AA(t){let e=0;return((e=t.indexOf("."))>-1||(e=t.indexOf("!"))>-1||(e=t.indexOf("?"))>-1)&&t.charAt(e+1).match(/[a-zA-Z].*/)?[t.slice(0,e),t.slice(e+1)]:!1}function DA(t){return t==="."||t==="!"||t==="?"}var FA=" @~@ ",IA=FA.trim(),W5=new RegExp("\\S",""),$5=new RegExp("\\n+|[-#=_+*]{4,}","g"),j5=new RegExp("\\S+|\\n","g"),q5={newlineBoundaries:!1,preserveWhitespace:!1,abbreviations:void 0};function CA(t,e){if(!t)return[];if(!W5.test(t))return[];let r={...q5,...e};wA(r.abbreviations),r.newlineBoundaries&&(t=t.replace($5,FA));let n,i;r.preserveWhitespace?(i=t.split(/(<br\s*\/?>|\S+|\n+)/),n=i.filter(function(h,g){return g%2})):n=t.trim().match(j5)??[];let o=0,a=0,l=[],p=[],u=[];if(!n||!n.length)return[];for(let h=0,g=n.length;h<g;h++){if(o++,u.push(n[h]),~n[h].indexOf(",")&&(o=0),DA(n[h])||El(n[h],"?!")||n[h]===IA){r.newlineBoundaries&&n[h]===IA&&u.pop(),p.push(u),o=0,u=[];continue}if((El(n[h],'"')||El(n[h],"\u201D"))&&(n[h]=n[h].slice(0,-1)),El(n[h],".")){if(h+1<g){if(n[h].length===2&&isNaN(n[h].charAt(0))||EA(n[h]))continue;if(_A(n[h+1])){if(RA(n[h],n[h+1])||$S(o,n.slice(h,6))||um(n[h+1])&&kA(n[h]))continue}else if(bA(n[h],"..")||WS(n[h])||$S(o,n.slice(h,5)))continue}p.push(u),u=[],o=0;continue}(a=n[h].indexOf("."))>-1&&(um(n[h],a)||WS(n[h])||MA(n[h])||PA(n[h]))||(l=AA(n[h]))&&(u.pop(),u.push(l[0]),p.push(u),u=[],o=0,u.push(l[1]))}return u.length&&p.push(u),p=p.filter(function(h){return h.length>0}),p.slice(1).reduce(function(h,g){let x=h[h.length-1];return x.length===1&&/^.{1,2}[.]$/.test(x[0])&&!/[.]/.test(g[0])?(h.pop(),h.push(x.concat(g)),h):(h.push(g),h)},[p[0]]).map(function(h,g){if(r.preserveWhitespace&&!r.newlineBoundaries){let x=h.length*2;return g===0&&(x+=1),i.splice(0,x).join("")}return h.join(" ")})}var z5=/\S*\p{L}/u,OA=/(\r?\n[^\p{L}]*\r?\n)|(?<=[.!?])(\s*\r?\n)/gu,G5={newlineBoundaries:!1,preserveWhitespace:!0},fm=class{*segment(e){let r=CA(e,G5),n=0;for(let i of r){let o=i.split(OA).filter(a=>a!=null);for(let a of o){if(!Q5(a)){let l=K5(a,n);l!=null&&(yield l)}n+=a.length}}}};function K5(t,e){let r=mk(z5,t);if(r==null)return;let n=r.index;return n!==0&&(e+=n,t=t.slice(n)),{text:t.trimEnd(),index:e}}function Q5(t){return zc(OA,t)}var dm=class extends vr{constructor(){super(...arguments);this.scopeType={type:"sentence"};this.iterationScopeType={type:"paragraph"};this.segmenter=new fm}generateScopesInSearchScope(r,{editor:n,domain:i}){let o=n.document.offsetAt(i.start),a=n.document.getText(i),l=u=>{let d=new W(n.document.positionAt(o+u.index),n.document.positionAt(o+u.index+u.text.length));return{editor:n,domain:d,getTargets:h=>[new Tr({editor:n,contentRange:d,isReversed:h})]}},p=this.segmenter.segment(a);return r==="forward"?Lt(p,l):Array.from(p,l).reverse()}};var ka=class extends vr{constructor(){super(...arguments);this.iterationScopeType={type:"line"}}generateScopesInSearchScope(r,{editor:n,domain:i}){return Lt(cn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:a=>[new Tr({editor:n,contentRange:o,isReversed:a})]}))}},mm=class extends ka{constructor(){super(...arguments);this.regex=/\S+/g}},hm=class extends ka{constructor(r,n,i){super(r,n,i);this.scopeType=n;this.regex=/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/g}},gm=class extends ka{constructor(r,n,i){super(r,n,i);this.scopeType=n}get regex(){return new RegExp(this.scopeType.regex,this.scopeType.flags??"gu")}},ym=class extends ka{constructor(r,n,i){super(r,n,i);this.scopeType=n}get regex(){return new RegExp(Nr(this.scopeType.character),"gui")}};var xm=class extends yt{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.languageId=n;this.targetScopeType=i;this.isHierarchical=!0;this.targetScopeHandler=this.scopeHandlerFactory.create(this.targetScopeType,this.languageId),this.surroundingPairInteriorScopeHandler=this.scopeHandlerFactory.create({type:"surroundingPairInterior",delimiter:"any"},this.languageId)}get iterationScopeType(){if(this.targetScopeHandler.iterationScopeType.type==="custom")throw Error("Iteration scope type can't be custom for BoundedBaseScopeHandler");return{type:"oneOf",scopeTypes:[this.targetScopeHandler.iterationScopeType,{type:"surroundingPairInterior",delimiter:"any"}]}}*generateScopeCandidates(r,n,i,o){let a=this.targetScopeHandler.generateScopes(r,n,i,{...o,containment:o.containment!=="disallowed"?o.containment:void 0}),l=Array.from(this.surroundingPairInteriorScopeHandler.generateScopes(r,n,i,{...o,containment:o.containment==null&&o.skipAncestorScopes?"required":o.containment}));for(let p of a){let u=[];for(let d of l){let h=p.domain.intersection(d.domain);h!=null&&!h.isEmpty&&u.push({editor:r,domain:h,getTargets:g=>[this.getTargets(NA(p,g),NA(d,g))]})}u.push(p),u.sort((d,h)=>An(i,n,d,h)),yield*u}}};function NA(t,e){let r=t.getTargets(e);if(r.length!==1)throw Error(`Expected one target but got ${r.length}`);return r[0]}var Tm=class extends xm{constructor(r,n,i){super(r,i,{type:"nonWhitespaceSequence"});this.scopeType={type:"boundedNonWhitespaceSequence"}}getTargets(r,n){let i=r.contentRange.intersection(n.contentRange);if(i==null||i.isEmpty)throw Error("Expected non empty intersection");return new Tr({editor:r.editor,isReversed:r.isReversed,contentRange:i})}},Sm=class extends xm{constructor(r,n,i){super(r,i,{type:"paragraph"});this.scopeType={type:"boundedParagraph"}}getTargets(r,n){if(!(r instanceof Ta))throw Error("Expected ParagraphTarget");return new Id({editor:r.editor,isReversed:r.isReversed,paragraphTarget:r,containingInterior:n})}};var vm=class extends yt{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.scopeType=n;this.languageId=i;this.isHierarchical=!0;this.surroundingPairScopeHandler=this.scopeHandlerFactory.create({type:"surroundingPair",delimiter:this.scopeType.delimiter,requireStrongContainment:!0},this.languageId)}get iterationScopeType(){return this.surroundingPairScopeHandler.iterationScopeType}*generateScopeCandidates(r,n,i,o){let a=this.surroundingPairScopeHandler.generateScopes(r,n,i,o);for(let l of a)this.scopeType.requireSingleLine&&!l.domain.isSingleLine||(yield{editor:r,domain:l.domain,getTargets(p){return l.getTargets(p).flatMap(u=>u.getInterior())}})}};function LA(t,{openingDelimiterRange:e,closingDelimiterRange:r},n){let i=e.union(r),o=new W(e.end,r.start);return{editor:t,domain:n?o:i,getTargets:a=>[new Md({editor:t,isReversed:a,contentRange:i,interiorRange:o,boundary:[e,r]})]}}function UA(t){let e=vi(t.map(({text:r})=>r)).map(Nr).join("|");return new RegExp(`(?<!\\\\)(${e})`,"gu")}var ts=class{constructor(e){this.items=e;this.index=0}add(e){this.items.push(e)}contains(e){return this.advance(e)}getContaining(e){if(this.advance(e))return this.items[this.index]}advance(e){for(;this.index<this.items.length;){let r=this.items[this.index].range;if(r.contains(e))return!0;if(e.end.isBeforeOrEqual(r.start))return!1;this.index++}return!1}};var bm=class{constructor(e){this.children=Z5(e)}getSmallestContaining(e){return this.children.getContaining(e)?.getSmallestContaining(e)}};function Z5(t){let e=[],r=[];for(let n of t){let i=new jS(n);for(;r.length>0&&!r[r.length-1].range.contains(n.range);)r.pop();let o=r[r.length-1];o!=null?o.children.add(i):e.push(i),r.push(i)}return new ts(e)}var jS=class{constructor(e){this.item=e;this.children=new ts([])}get range(){return this.item.range}getSmallestContaining(e){return this.children.getContaining(e)?.getSmallestContaining(e)??this.item}};function BA(t,e,r){if(r.length===0)return[];let n=new ts(VA(t,e,"disqualifyDelimiter")),i=new bm(VA(t,e,"textFragment")),o=Object.fromEntries(r.map(p=>[p.text,p])),a=TT(e.getText(),UA(r)),l=[];for(let p of a){let u=p[0],d=new W(e.positionAt(p.index),e.positionAt(p.index+u.length)),h=n.getContaining(d);if(!(h!=null&&!h.hasError())){let x=i.getSmallestContaining(d)?.range;l.push({delimiterInfo:o[u],textFragmentRange:x,range:d})}}return l}function VA(t,e,r){let n=t?.getCaptures(e,r)??[];return n.sort((i,o)=>i.range.start.compareTo(o.range.start)),n}var _m=Object.freeze({angleBrackets:[["</","<"],[">","/>"]],backtickQuotes:["`","`"],curlyBrackets:[["{","${"],"}"],tripleDoubleQuotes:[[],[]],tripleSingleQuotes:[[],[]],doubleQuotes:['"','"',{isSingleLine:!0}],escapedDoubleQuotes:['\\"','\\"',{isSingleLine:!0}],escapedParentheses:["\\(","\\)"],escapedSquareBrackets:["\\[","\\]"],escapedSingleQuotes:["\\'","\\'",{isSingleLine:!0}],parentheses:[["(","$("],")"],singleQuotes:["'","'",{isSingleLine:!0}],squareBrackets:["[","]"]}),wm=["","r","u","R","U","f","F","fr","Fr","fR","FR","rf","rF","Rf","RF","b","B","br","Br","bR","BR","rb","rB","Rb","RB"],HA={nix:{singleQuotes:["''","''"]},lua:{doubleQuotes:[['"',"[["],['"',"]]"]]},python:{singleQuotes:[wm.map(t=>`${t}'`),"'",{isSingleLine:!0,isUnknownSide:!0}],doubleQuotes:[wm.map(t=>`${t}"`),'"',{isSingleLine:!0,isUnknownSide:!0}],tripleSingleQuotes:[wm.map(t=>`${t}'''`),"'''",{isUnknownSide:!0}],tripleDoubleQuotes:[wm.map(t=>`${t}"""`),'"""',{isUnknownSide:!0}]},ruby:{tripleDoubleQuotes:["%Q(",")"]}},L0e=Object.fromEntries(Object.values(_m)),WA={any:wi(_m),string:["tripleDoubleQuotes","tripleSingleQuotes","doubleQuotes","singleQuotes","backtickQuotes"],collectionBoundary:["parentheses","squareBrackets","curlyBrackets","angleBrackets"]};function $A(t){return t!=null&&t in HA?{..._m,...HA[t]}:_m}function jA(t,e){let r=WA[t]??[t];return Y5(e,r)}function Y5(t,e){let r=$A(t);return e.flatMap(n=>{let[i,o,a]=r[n],{isSingleLine:l=!1,isUnknownSide:p=!1}=a??{},u=ol(i)?[i]:i,d=ol(o)?[o]:o;return vi(Vc(u,d)).map(g=>{let x=u.includes(g),_=d.includes(g);return{text:g,side:p?"unknown":x&&!_?"left":!x&&_?"right":"unknown",delimiterName:n,isSingleLine:l}})})}function qA(t){let e=[],r=new so(()=>[]);for(let n of t){let{delimiterInfo:{delimiterName:i,side:o,isSingleLine:a},textFragmentRange:l,range:p}=n,u=r.get(i);a&&(u=u.filter(h=>h.range.start.line===p.start.line),r.set(i,u));let d=u.filter(h=>l==null&&h.textFragmentRange==null||l!=null&&h.textFragmentRange!=null&&h.textFragmentRange.isRangeEqual(l));if(o==="left"||o==="unknown"&&d.length%2===0)u.push(n);else{let h=d.at(-1);if(h==null)continue;u.splice(u.lastIndexOf(h),1),e.push({delimiterName:i,openingDelimiterRange:h.range,closingDelimiterRange:p})}}return e}var Em=class extends yt{constructor(r,n,i){super();this.languageDefinitions=r;this.scopeType=n;this.languageId=i;this.iterationScopeType={type:"line"};this.isHierarchical=!0}*generateScopeCandidates(r,n,i,o){if(this.scopeType.forceDirection!=null){it(D().messages,"deprecatedForceDirection","forceDirection is deprecated. If this is important to you please file an issue on the cursorless repo.");return}let a=BA(this.languageDefinitions.get(this.languageId),r.document,jA(this.scopeType.delimiter,this.languageId)),l=qA(a);l=X5(i,o,n,l),yield*l.map(p=>LA(r,p,this.scopeType.requireStrongContainment??!1)).sort((p,u)=>An(i,n,p,u))}};function X5(t,e,r,n){return t==="forward"&&e.containment==="required"&&e.allowAdjacentScopes&&e.skipAncestorScopes?n.filter((i,o)=>!(i.closingDelimiterRange.end.isEqual(r)&&n[o+1]?.closingDelimiterRange.start.isEqual(r))):n}var Pa=class{constructor(e){this.languageDefinitions=e;this.maybeCreate=this.maybeCreate.bind(this),this.create=this.create.bind(this)}maybeCreate(e,r){switch(e.type){case"character":return new rm(this,e,r);case"word":return new im(this,e,r);case"token":return new om(this,e,r);case"identifier":return new em(this,e,r);case"line":return new Jd(e,r);case"sentence":return new dm(this,e,r);case"paragraph":return new pm(e,r);case"boundedParagraph":return new Sm(this,e,r);case"document":return new sm(e,r);case"oneOf":return lm.create(this,e,r);case"nonWhitespaceSequence":return new mm(this,e,r);case"boundedNonWhitespaceSequence":return new Tm(this,e,r);case"url":return new hm(this,e,r);case"customRegex":return new gm(this,e,r);case"glyph":return new ym(this,e,r);case"surroundingPair":return new Em(this.languageDefinitions,e,r);case"surroundingPairInterior":return new vm(this,e,r);case"custom":return e.scopeHandler;case"instance":throw Error("Unexpected scope type 'instance'");default:return this.languageDefinitions.get(r)?.getScopeHandler(e)}}create(e,r){let n=this.maybeCreate(e,r);if(n==null)throw new Error(`Couldn't create scope handler for '${e.type}'`);return n}};var Rl=class{constructor(){this.documentUri="";this.documentVersion=-1;this.captures={}}isValid(e){return this.documentUri===e.uri.toString()&&this.documentVersion===e.version}update(e,r){this.documentUri=e.uri.toString(),this.documentVersion=e.version,this.captures=r}get(e){return this.captures[e]??[]}};function ln(t,e){return new W(t.row,t.column,e.row,e.column)}function qS(t){return new ce(t.row,t.column)}function zA(t){return new W(t.startPosition.row,t.startPosition.column,t.endPosition.row,t.endPosition.column)}function GA(t,e){return new Te(t.startPosition.row,t.startPosition.column,e.endPosition.row,e.endPosition.column)}function Yn(t,e){return{selection:new Te(new ce(e.startPosition.row,e.startPosition.column),new ce(e.endPosition.row,e.endPosition.column)),context:{}}}function J5(t,e,r){let n=e.startIndex<r.startIndex,i=n?e:r,o=n?r:e;return{selection:new Te(new ce(i.startPosition.row,i.startPosition.column),new ce(o.endPosition.row,o.endPosition.column)),context:{}}}function KA(){return kl(t=>t.type===","||t.type==="("||t.type===")"||t.type==="["||t.type==="]"||t.type===">"||t.type==="<"||t.type==="}"||t.type==="{",", ")}function QA(t,e){let r=e.startIndex,n=e.endIndex;return e.text.startsWith("(")&&e.text.endsWith(")")?(r+=1,n-=1):e.text.endsWith(";")&&(n-=1),{selection:new Te(t.document.positionAt(r),t.document.positionAt(n)),context:{}}}function ZA(...t){return function(e,r){let n=r.previousSibling,i=n?.previousSibling,o;return n&&(t.includes(n.type)?i?o=ln(i.endPosition,r.startPosition):o=ln(n.startPosition,r.startPosition):o=ln(n.endPosition,r.startPosition)),{...Yn(e,r),context:{leadingDelimiterRange:o}}}}function Xn(t=[],e=[],{includeUnnamedChildren:r=!1}={}){return function(n,i){if(t.length>0&&e.length>0)throw new Error("Cannot have both exclusions and inclusions.");let o=r?i.children:i.namedChildren,a=new Set(t),l=new Set(e);return o=o.filter(p=>a.size>0?!a.has(p.type):l.size>0?l.has(p.type):!0),J5(n,o[0],o[o.length-1])}}function YA(...t){return function(e,r){let n=r.nextSibling,i=n?.nextSibling,o;return n&&(t.includes(n.type)?i?o=ln(r.endPosition,i.startPosition):o=ln(r.endPosition,n.endPosition):o=ln(r.endPosition,n.startPosition)),{...Yn(e,r),context:{trailingDelimiterRange:o}}}}function e8(t,e){let r=t.nextSibling;for(;r!=null;){if(!e(r))return r;r=r.nextSibling}return r}function t8(t,e){let r=t.previousSibling;for(;r!=null;){if(!e(r))return r;r=r.previousSibling}return r}function kl(t,e,r=Ht,n=Ht){return(i,o)=>{let a,l,p=r(o),u=n(o),d=t8(p,t),h=e8(u,t);d!=null&&(a=ln(d.endPosition,p.startPosition)),h!=null&&(l=ln(u.endPosition,h.startPosition));let g=r8(i,a,l,e);return{selection:new Te(new ce(p.startPosition.row,p.startPosition.column),new ce(u.endPosition.row,u.endPosition.column)),context:{containingListDelimiter:g,leadingDelimiterRange:a,trailingDelimiterRange:l}}}}function r8(t,e,r,n){let{document:i}=t,o=[r!=null?i.getText(r):n,e!=null?i.getText(e):n];return dT(o,"length")}function XA(t,e){if(t.length===1)return!0;let r=!1,n=t.filter(({name:p})=>p.endsWith(".start")).map(({range:{end:p}})=>p).sort((p,u)=>p.compareTo(u)).at(-1),i=t.filter(({name:p})=>p.endsWith(".end")).map(({range:{start:p}})=>p).sort((p,u)=>p.compareTo(u)).at(0);n!=null&&i!=null&&n.isAfter(i)&&(it(e,"TreeSitterQuery.checkCaptures.badOrder",`Start capture must be before end capture: ${t}`),r=!0);let o=t.filter(({name:p})=>p.endsWith(".start")).length,a=t.filter(({name:p})=>p.endsWith(".end")).length,l=t.length-o-a;return l>0&&(o>0||a>0)&&(it(e,"TreeSitterQuery.checkCaptures.mixRegularStartEnd",`Please do not mix regular captures and start/end captures: ${t.map(({name:p,range:u})=>p+" "+u.toString())}`),r=!0),l>1&&(it(e,"TreeSitterQuery.checkCaptures.duplicate",`A capture with the same name may only appear once in a single pattern: ${t.map(({name:p,range:u})=>p+" "+u.toString())}`),r=!0),!r}function JA(t){let e=t;for(;e!=null;){if(e.hasError)return!0;e=e.parent}return!1}var Ce;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{let o={};for(let a of i)o[a]=a;return o},t.getValidEnumValues=i=>{let o=t.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),a={};for(let l of o)a[l]=i[l];return t.objectValues(a)},t.objectValues=i=>t.objectKeys(i).map(function(o){return i[o]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let o=[];for(let a in i)Object.prototype.hasOwnProperty.call(i,a)&&o.push(a);return o},t.find=(i,o)=>{for(let a of i)if(o(a))return a},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,o=" | "){return i.map(a=>typeof a=="string"?`'${a}'`:a).join(o)}t.joinValues=n,t.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(Ce||(Ce={}));var GS;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(GS||(GS={}));var J=Ce.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),mo=t=>{switch(typeof t){case"undefined":return J.undefined;case"string":return J.string;case"number":return isNaN(t)?J.nan:J.number;case"boolean":return J.boolean;case"function":return J.function;case"bigint":return J.bigint;case"symbol":return J.symbol;case"object":return Array.isArray(t)?J.array:t===null?J.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?J.promise:typeof Map<"u"&&t instanceof Map?J.map:typeof Set<"u"&&t instanceof Set?J.set:typeof Date<"u"&&t instanceof Date?J.date:J.object;default:return J.unknown}},G=Ce.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),n8=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),Br=class t extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let r=e||function(o){return o.message},n={_errors:[]},i=o=>{for(let a of o.issues)if(a.code==="invalid_union")a.unionErrors.map(i);else if(a.code==="invalid_return_type")i(a.returnTypeError);else if(a.code==="invalid_arguments")i(a.argumentsError);else if(a.path.length===0)n._errors.push(r(a));else{let l=n,p=0;for(;p<a.path.length;){let u=a.path[p];p===a.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(r(a))):l[u]=l[u]||{_errors:[]},l=l[u],p++}}};return i(this),n}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ce.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};Br.create=t=>new Br(t);var Da=(t,e)=>{let r;switch(t.code){case G.invalid_type:t.received===J.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case G.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,Ce.jsonStringifyReplacer)}`;break;case G.unrecognized_keys:r=`Unrecognized key(s) in object: ${Ce.joinValues(t.keys,", ")}`;break;case G.invalid_union:r="Invalid input";break;case G.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Ce.joinValues(t.options)}`;break;case G.invalid_enum_value:r=`Invalid enum value. Expected ${Ce.joinValues(t.options)}, received '${t.received}'`;break;case G.invalid_arguments:r="Invalid function arguments";break;case G.invalid_return_type:r="Invalid function return type";break;case G.invalid_date:r="Invalid date";break;case G.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:Ce.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case G.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case G.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case G.custom:r="Invalid input";break;case G.invalid_intersection_types:r="Intersection results could not be merged";break;case G.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case G.not_finite:r="Number must be finite";break;default:r=e.defaultError,Ce.assertNever(t)}return{message:r}},rD=Da;function i8(t){rD=t}function Rm(){return rD}var km=t=>{let{data:e,path:r,errorMaps:n,issueData:i}=t,o=[...r,...i.path||[]],a={...i,path:o};if(i.message!==void 0)return{...i,path:o,message:i.message};let l="",p=n.filter(u=>!!u).slice().reverse();for(let u of p)l=u(a,{data:e,defaultError:l}).message;return{...i,path:o,message:l}},o8=[];function X(t,e){let r=Rm(),n=km({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===Da?void 0:Da].filter(i=>!!i)});t.common.issues.push(n)}var qt=class t{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let i of r){if(i.status==="aborted")return he;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let i of r){let o=await i.key,a=await i.value;n.push({key:o,value:a})}return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let i of r){let{key:o,value:a}=i;if(o.status==="aborted"||a.status==="aborted")return he;o.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof a.value<"u"||i.alwaysSet)&&(n[o.value]=a.value)}return{status:e.value,value:n}}},he=Object.freeze({status:"aborted"}),Aa=t=>({status:"dirty",value:t}),nr=t=>({status:"valid",value:t}),KS=t=>t.status==="aborted",QS=t=>t.status==="dirty",Al=t=>t.status==="valid",Dl=t=>typeof Promise<"u"&&t instanceof Promise;function Pm(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function nD(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}var se;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(se||(se={}));var Pl,Ml,un=class{constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},eD=(t,e)=>{if(Al(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new Br(t.common.issues);return this._error=r,this._error}}};function Se(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(a,l)=>{var p,u;let{message:d}=t;return a.code==="invalid_enum_value"?{message:d??l.defaultError}:typeof l.data>"u"?{message:(p=d??n)!==null&&p!==void 0?p:l.defaultError}:a.code!=="invalid_type"?{message:l.defaultError}:{message:(u=d??r)!==null&&u!==void 0?u:l.defaultError}},description:i}}var ve=class{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return mo(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:mo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new qt,ctx:{common:e.parent.common,data:e.data,parsedType:mo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(Dl(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;let i={common:{issues:[],async:(n=r?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:mo(e)},o=this._parseSync({data:e,path:i.path,parent:i});return eD(i,o)}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:mo(e)},i=this._parse({data:e,path:n.path,parent:n}),o=await(Dl(i)?i:Promise.resolve(i));return eD(n,o)}refine(e,r){let n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,o)=>{let a=e(i),l=()=>o.addIssue({code:G.custom,...n(i)});return typeof Promise<"u"&&a instanceof Promise?a.then(p=>p?!0:(l(),!1)):a?!0:(l(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new Hr({schema:this,typeName:fe.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return pn.create(this,this._def)}nullable(){return ei.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Di.create(this,this._def)}promise(){return yo.create(this,this._def)}or(e){return cs.create([this,e],this._def)}and(e){return ls.create(this,e,this._def)}transform(e){return new Hr({...Se(this._def),schema:this,typeName:fe.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new ms({...Se(this._def),innerType:this,defaultValue:r,typeName:fe.ZodDefault})}brand(){return new Il({typeName:fe.ZodBranded,type:this,...Se(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new hs({...Se(this._def),innerType:this,catchValue:r,typeName:fe.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return Fl.create(this,e)}readonly(){return gs.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},s8=/^c[^\s-]{8,}$/i,a8=/^[0-9a-z]+$/,c8=/^[0-9A-HJKMNP-TV-Z]{26}$/,l8=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,p8=/^[a-z0-9_-]{21}$/i,u8=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,f8=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,d8="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",zS,m8=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,h8=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,g8=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,iD="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",y8=new RegExp(`^${iD}$`);function oD(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function x8(t){return new RegExp(`^${oD(t)}$`)}function sD(t){let e=`${iD}T${oD(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function T8(t,e){return!!((e==="v4"||!e)&&m8.test(t)||(e==="v6"||!e)&&h8.test(t))}var ho=class t extends ve{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==J.string){let o=this._getOrReturnCtx(e);return X(o,{code:G.invalid_type,expected:J.string,received:o.parsedType}),he}let n=new qt,i;for(let o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(i=this._getOrReturnCtx(e,i),X(i,{code:G.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="max")e.data.length>o.value&&(i=this._getOrReturnCtx(e,i),X(i,{code:G.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="length"){let a=e.data.length>o.value,l=e.data.length<o.value;(a||l)&&(i=this._getOrReturnCtx(e,i),a?X(i,{code:G.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):l&&X(i,{code:G.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),n.dirty())}else if(o.kind==="email")f8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"email",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="emoji")zS||(zS=new RegExp(d8,"u")),zS.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"emoji",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="uuid")l8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"uuid",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="nanoid")p8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"nanoid",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid")s8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"cuid",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid2")a8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"cuid2",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="ulid")c8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"ulid",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),X(i,{validation:"url",code:G.invalid_string,message:o.message}),n.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"regex",code:G.invalid_string,message:o.message}),n.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(e,i),X(i,{code:G.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),n.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(i=this._getOrReturnCtx(e,i),X(i,{code:G.invalid_string,validation:{startsWith:o.value},message:o.message}),n.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(i=this._getOrReturnCtx(e,i),X(i,{code:G.invalid_string,validation:{endsWith:o.value},message:o.message}),n.dirty()):o.kind==="datetime"?sD(o).test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{code:G.invalid_string,validation:"datetime",message:o.message}),n.dirty()):o.kind==="date"?y8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{code:G.invalid_string,validation:"date",message:o.message}),n.dirty()):o.kind==="time"?x8(o).test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{code:G.invalid_string,validation:"time",message:o.message}),n.dirty()):o.kind==="duration"?u8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"duration",code:G.invalid_string,message:o.message}),n.dirty()):o.kind==="ip"?T8(e.data,o.version)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"ip",code:G.invalid_string,message:o.message}),n.dirty()):o.kind==="base64"?g8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"base64",code:G.invalid_string,message:o.message}),n.dirty()):Ce.assertNever(o);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(i=>e.test(i),{validation:r,code:G.invalid_string,...se.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...se.errToObj(e)})}url(e){return this._addCheck({kind:"url",...se.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...se.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...se.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...se.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...se.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...se.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...se.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...se.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...se.errToObj(e)})}datetime(e){var r,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,local:(n=e?.local)!==null&&n!==void 0?n:!1,...se.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...se.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...se.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...se.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...se.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...se.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...se.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...se.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...se.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...se.errToObj(r)})}nonempty(e){return this.min(1,se.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};ho.create=t=>{var e;return new ho({checks:[],typeName:fe.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Se(t)})};function S8(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,o=parseInt(t.toFixed(i).replace(".","")),a=parseInt(e.toFixed(i).replace(".",""));return o%a/Math.pow(10,i)}var rs=class t extends ve{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==J.number){let o=this._getOrReturnCtx(e);return X(o,{code:G.invalid_type,expected:J.number,received:o.parsedType}),he}let n,i=new qt;for(let o of this._def.checks)o.kind==="int"?Ce.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),X(n,{code:G.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),X(n,{code:G.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),X(n,{code:G.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?S8(e.data,o.value)!==0&&(n=this._getOrReturnCtx(e,n),X(n,{code:G.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),X(n,{code:G.not_finite,message:o.message}),i.dirty()):Ce.assertNever(o);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,se.toString(r))}gt(e,r){return this.setLimit("min",e,!1,se.toString(r))}lte(e,r){return this.setLimit("max",e,!0,se.toString(r))}lt(e,r){return this.setLimit("max",e,!1,se.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:se.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:se.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:se.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:se.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:se.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:se.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:se.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:se.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:se.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:se.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Ce.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};rs.create=t=>new rs({checks:[],typeName:fe.ZodNumber,coerce:t?.coerce||!1,...Se(t)});var ns=class t extends ve{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==J.bigint){let o=this._getOrReturnCtx(e);return X(o,{code:G.invalid_type,expected:J.bigint,received:o.parsedType}),he}let n,i=new qt;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),X(n,{code:G.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),X(n,{code:G.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),X(n,{code:G.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):Ce.assertNever(o);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,se.toString(r))}gt(e,r){return this.setLimit("min",e,!1,se.toString(r))}lte(e,r){return this.setLimit("max",e,!0,se.toString(r))}lt(e,r){return this.setLimit("max",e,!1,se.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:se.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:se.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:se.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:se.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:se.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:se.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};ns.create=t=>{var e;return new ns({checks:[],typeName:fe.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Se(t)})};var is=class extends ve{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==J.boolean){let n=this._getOrReturnCtx(e);return X(n,{code:G.invalid_type,expected:J.boolean,received:n.parsedType}),he}return nr(e.data)}};is.create=t=>new is({typeName:fe.ZodBoolean,coerce:t?.coerce||!1,...Se(t)});var os=class t extends ve{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==J.date){let o=this._getOrReturnCtx(e);return X(o,{code:G.invalid_type,expected:J.date,received:o.parsedType}),he}if(isNaN(e.data.getTime())){let o=this._getOrReturnCtx(e);return X(o,{code:G.invalid_date}),he}let n=new qt,i;for(let o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(i=this._getOrReturnCtx(e,i),X(i,{code:G.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),n.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(i=this._getOrReturnCtx(e,i),X(i,{code:G.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),n.dirty()):Ce.assertNever(o);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:se.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:se.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};os.create=t=>new os({checks:[],coerce:t?.coerce||!1,typeName:fe.ZodDate,...Se(t)});var Ia=class extends ve{_parse(e){if(this._getType(e)!==J.symbol){let n=this._getOrReturnCtx(e);return X(n,{code:G.invalid_type,expected:J.symbol,received:n.parsedType}),he}return nr(e.data)}};Ia.create=t=>new Ia({typeName:fe.ZodSymbol,...Se(t)});var ss=class extends ve{_parse(e){if(this._getType(e)!==J.undefined){let n=this._getOrReturnCtx(e);return X(n,{code:G.invalid_type,expected:J.undefined,received:n.parsedType}),he}return nr(e.data)}};ss.create=t=>new ss({typeName:fe.ZodUndefined,...Se(t)});var as=class extends ve{_parse(e){if(this._getType(e)!==J.null){let n=this._getOrReturnCtx(e);return X(n,{code:G.invalid_type,expected:J.null,received:n.parsedType}),he}return nr(e.data)}};as.create=t=>new as({typeName:fe.ZodNull,...Se(t)});var go=class extends ve{constructor(){super(...arguments),this._any=!0}_parse(e){return nr(e.data)}};go.create=t=>new go({typeName:fe.ZodAny,...Se(t)});var Ai=class extends ve{constructor(){super(...arguments),this._unknown=!0}_parse(e){return nr(e.data)}};Ai.create=t=>new Ai({typeName:fe.ZodUnknown,...Se(t)});var Dn=class extends ve{_parse(e){let r=this._getOrReturnCtx(e);return X(r,{code:G.invalid_type,expected:J.never,received:r.parsedType}),he}};Dn.create=t=>new Dn({typeName:fe.ZodNever,...Se(t)});var Fa=class extends ve{_parse(e){if(this._getType(e)!==J.undefined){let n=this._getOrReturnCtx(e);return X(n,{code:G.invalid_type,expected:J.void,received:n.parsedType}),he}return nr(e.data)}};Fa.create=t=>new Fa({typeName:fe.ZodVoid,...Se(t)});var Di=class t extends ve{_parse(e){let{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==J.array)return X(r,{code:G.invalid_type,expected:J.array,received:r.parsedType}),he;if(i.exactLength!==null){let a=r.data.length>i.exactLength.value,l=r.data.length<i.exactLength.value;(a||l)&&(X(r,{code:a?G.too_big:G.too_small,minimum:l?i.exactLength.value:void 0,maximum:a?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(X(r,{code:G.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(X(r,{code:G.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((a,l)=>i.type._parseAsync(new un(r,a,r.path,l)))).then(a=>qt.mergeArray(n,a));let o=[...r.data].map((a,l)=>i.type._parseSync(new un(r,a,r.path,l)));return qt.mergeArray(n,o)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:se.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:se.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:se.toString(r)}})}nonempty(e){return this.min(1,e)}};Di.create=(t,e)=>new Di({type:t,minLength:null,maxLength:null,exactLength:null,typeName:fe.ZodArray,...Se(e)});function Ma(t){if(t instanceof br){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=pn.create(Ma(n))}return new br({...t._def,shape:()=>e})}else return t instanceof Di?new Di({...t._def,type:Ma(t.element)}):t instanceof pn?pn.create(Ma(t.unwrap())):t instanceof ei?ei.create(Ma(t.unwrap())):t instanceof Jn?Jn.create(t.items.map(e=>Ma(e))):t}var br=class t extends ve{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=Ce.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==J.object){let u=this._getOrReturnCtx(e);return X(u,{code:G.invalid_type,expected:J.object,received:u.parsedType}),he}let{status:n,ctx:i}=this._processInputParams(e),{shape:o,keys:a}=this._getCached(),l=[];if(!(this._def.catchall instanceof Dn&&this._def.unknownKeys==="strip"))for(let u in i.data)a.includes(u)||l.push(u);let p=[];for(let u of a){let d=o[u],h=i.data[u];p.push({key:{status:"valid",value:u},value:d._parse(new un(i,h,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof Dn){let u=this._def.unknownKeys;if(u==="passthrough")for(let d of l)p.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(u==="strict")l.length>0&&(X(i,{code:G.unrecognized_keys,keys:l}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let u=this._def.catchall;for(let d of l){let h=i.data[d];p.push({key:{status:"valid",value:d},value:u._parse(new un(i,h,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let u=[];for(let d of p){let h=await d.key,g=await d.value;u.push({key:h,value:g,alwaysSet:d.alwaysSet})}return u}).then(u=>qt.mergeObjectSync(n,u)):qt.mergeObjectSync(n,p)}get shape(){return this._def.shape()}strict(e){return se.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var i,o,a,l;let p=(a=(o=(i=this._def).errorMap)===null||o===void 0?void 0:o.call(i,r,n).message)!==null&&a!==void 0?a:n.defaultError;return r.code==="unrecognized_keys"?{message:(l=se.errToObj(e).message)!==null&&l!==void 0?l:p}:{message:p}}}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:fe.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};return Ce.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new t({...this._def,shape:()=>r})}omit(e){let r={};return Ce.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new t({...this._def,shape:()=>r})}deepPartial(){return Ma(this)}partial(e){let r={};return Ce.objectKeys(this.shape).forEach(n=>{let i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}),new t({...this._def,shape:()=>r})}required(e){let r={};return Ce.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let o=this.shape[n];for(;o instanceof pn;)o=o._def.innerType;r[n]=o}}),new t({...this._def,shape:()=>r})}keyof(){return aD(Ce.objectKeys(this.shape))}};br.create=(t,e)=>new br({shape:()=>t,unknownKeys:"strip",catchall:Dn.create(),typeName:fe.ZodObject,...Se(e)});br.strictCreate=(t,e)=>new br({shape:()=>t,unknownKeys:"strict",catchall:Dn.create(),typeName:fe.ZodObject,...Se(e)});br.lazycreate=(t,e)=>new br({shape:t,unknownKeys:"strip",catchall:Dn.create(),typeName:fe.ZodObject,...Se(e)});var cs=class extends ve{_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function i(o){for(let l of o)if(l.result.status==="valid")return l.result;for(let l of o)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;let a=o.map(l=>new Br(l.ctx.common.issues));return X(r,{code:G.invalid_union,unionErrors:a}),he}if(r.common.async)return Promise.all(n.map(async o=>{let a={...r,common:{...r.common,issues:[]},parent:null};return{result:await o._parseAsync({data:r.data,path:r.path,parent:a}),ctx:a}})).then(i);{let o,a=[];for(let p of n){let u={...r,common:{...r.common,issues:[]},parent:null},d=p._parseSync({data:r.data,path:r.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!o&&(o={result:d,ctx:u}),u.common.issues.length&&a.push(u.common.issues)}if(o)return r.common.issues.push(...o.ctx.common.issues),o.result;let l=a.map(p=>new Br(p));return X(r,{code:G.invalid_union,unionErrors:l}),he}}get options(){return this._def.options}};cs.create=(t,e)=>new cs({options:t,typeName:fe.ZodUnion,...Se(e)});var Mi=t=>t instanceof ps?Mi(t.schema):t instanceof Hr?Mi(t.innerType()):t instanceof us?[t.value]:t instanceof fs?t.options:t instanceof ds?Ce.objectValues(t.enum):t instanceof ms?Mi(t._def.innerType):t instanceof ss?[void 0]:t instanceof as?[null]:t instanceof pn?[void 0,...Mi(t.unwrap())]:t instanceof ei?[null,...Mi(t.unwrap())]:t instanceof Il||t instanceof gs?Mi(t.unwrap()):t instanceof hs?Mi(t._def.innerType):[],Mm=class t extends ve{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==J.object)return X(r,{code:G.invalid_type,expected:J.object,received:r.parsedType}),he;let n=this.discriminator,i=r.data[n],o=this.optionsMap.get(i);return o?r.common.async?o._parseAsync({data:r.data,path:r.path,parent:r}):o._parseSync({data:r.data,path:r.path,parent:r}):(X(r,{code:G.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),he)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let i=new Map;for(let o of r){let a=Mi(o.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let l of a){if(i.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);i.set(l,o)}}return new t({typeName:fe.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...Se(n)})}};function ZS(t,e){let r=mo(t),n=mo(e);if(t===e)return{valid:!0,data:t};if(r===J.object&&n===J.object){let i=Ce.objectKeys(e),o=Ce.objectKeys(t).filter(l=>i.indexOf(l)!==-1),a={...t,...e};for(let l of o){let p=ZS(t[l],e[l]);if(!p.valid)return{valid:!1};a[l]=p.data}return{valid:!0,data:a}}else if(r===J.array&&n===J.array){if(t.length!==e.length)return{valid:!1};let i=[];for(let o=0;o<t.length;o++){let a=t[o],l=e[o],p=ZS(a,l);if(!p.valid)return{valid:!1};i.push(p.data)}return{valid:!0,data:i}}else return r===J.date&&n===J.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var ls=class extends ve{_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=(o,a)=>{if(KS(o)||KS(a))return he;let l=ZS(o.value,a.value);return l.valid?((QS(o)||QS(a))&&r.dirty(),{status:r.value,value:l.data}):(X(n,{code:G.invalid_intersection_types}),he)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([o,a])=>i(o,a)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};ls.create=(t,e,r)=>new ls({left:t,right:e,typeName:fe.ZodIntersection,...Se(r)});var Jn=class t extends ve{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==J.array)return X(n,{code:G.invalid_type,expected:J.array,received:n.parsedType}),he;if(n.data.length<this._def.items.length)return X(n,{code:G.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),he;!this._def.rest&&n.data.length>this._def.items.length&&(X(n,{code:G.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let o=[...n.data].map((a,l)=>{let p=this._def.items[l]||this._def.rest;return p?p._parse(new un(n,a,n.path,l)):null}).filter(a=>!!a);return n.common.async?Promise.all(o).then(a=>qt.mergeArray(r,a)):qt.mergeArray(r,o)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};Jn.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Jn({items:t,typeName:fe.ZodTuple,rest:null,...Se(e)})};var Am=class t extends ve{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==J.object)return X(n,{code:G.invalid_type,expected:J.object,received:n.parsedType}),he;let i=[],o=this._def.keyType,a=this._def.valueType;for(let l in n.data)i.push({key:o._parse(new un(n,l,n.path,l)),value:a._parse(new un(n,n.data[l],n.path,l)),alwaysSet:l in n.data});return n.common.async?qt.mergeObjectAsync(r,i):qt.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof ve?new t({keyType:e,valueType:r,typeName:fe.ZodRecord,...Se(n)}):new t({keyType:ho.create(),valueType:e,typeName:fe.ZodRecord,...Se(r)})}},Ca=class extends ve{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==J.map)return X(n,{code:G.invalid_type,expected:J.map,received:n.parsedType}),he;let i=this._def.keyType,o=this._def.valueType,a=[...n.data.entries()].map(([l,p],u)=>({key:i._parse(new un(n,l,n.path,[u,"key"])),value:o._parse(new un(n,p,n.path,[u,"value"]))}));if(n.common.async){let l=new Map;return Promise.resolve().then(async()=>{for(let p of a){let u=await p.key,d=await p.value;if(u.status==="aborted"||d.status==="aborted")return he;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}})}else{let l=new Map;for(let p of a){let u=p.key,d=p.value;if(u.status==="aborted"||d.status==="aborted")return he;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}}}};Ca.create=(t,e,r)=>new Ca({valueType:e,keyType:t,typeName:fe.ZodMap,...Se(r)});var Oa=class t extends ve{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==J.set)return X(n,{code:G.invalid_type,expected:J.set,received:n.parsedType}),he;let i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(X(n,{code:G.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(X(n,{code:G.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());let o=this._def.valueType;function a(p){let u=new Set;for(let d of p){if(d.status==="aborted")return he;d.status==="dirty"&&r.dirty(),u.add(d.value)}return{status:r.value,value:u}}let l=[...n.data.values()].map((p,u)=>o._parse(new un(n,p,n.path,u)));return n.common.async?Promise.all(l).then(p=>a(p)):a(l)}min(e,r){return new t({...this._def,minSize:{value:e,message:se.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:se.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};Oa.create=(t,e)=>new Oa({valueType:t,minSize:null,maxSize:null,typeName:fe.ZodSet,...Se(e)});var Dm=class t extends ve{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==J.function)return X(r,{code:G.invalid_type,expected:J.function,received:r.parsedType}),he;function n(l,p){return km({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Rm(),Da].filter(u=>!!u),issueData:{code:G.invalid_arguments,argumentsError:p}})}function i(l,p){return km({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Rm(),Da].filter(u=>!!u),issueData:{code:G.invalid_return_type,returnTypeError:p}})}let o={errorMap:r.common.contextualErrorMap},a=r.data;if(this._def.returns instanceof yo){let l=this;return nr(async function(...p){let u=new Br([]),d=await l._def.args.parseAsync(p,o).catch(x=>{throw u.addIssue(n(p,x)),u}),h=await Reflect.apply(a,this,d);return await l._def.returns._def.type.parseAsync(h,o).catch(x=>{throw u.addIssue(i(h,x)),u})})}else{let l=this;return nr(function(...p){let u=l._def.args.safeParse(p,o);if(!u.success)throw new Br([n(p,u.error)]);let d=Reflect.apply(a,this,u.data),h=l._def.returns.safeParse(d,o);if(!h.success)throw new Br([i(d,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:Jn.create(e).rest(Ai.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||Jn.create([]).rest(Ai.create()),returns:r||Ai.create(),typeName:fe.ZodFunction,...Se(n)})}},ps=class extends ve{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};ps.create=(t,e)=>new ps({getter:t,typeName:fe.ZodLazy,...Se(e)});var us=class extends ve{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return X(r,{received:r.data,code:G.invalid_literal,expected:this._def.value}),he}return{status:"valid",value:e.data}}get value(){return this._def.value}};us.create=(t,e)=>new us({value:t,typeName:fe.ZodLiteral,...Se(e)});function aD(t,e){return new fs({values:t,typeName:fe.ZodEnum,...Se(e)})}var fs=class t extends ve{constructor(){super(...arguments),Pl.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return X(r,{expected:Ce.joinValues(n),received:r.parsedType,code:G.invalid_type}),he}if(Pm(this,Pl,"f")||nD(this,Pl,new Set(this._def.values),"f"),!Pm(this,Pl,"f").has(e.data)){let r=this._getOrReturnCtx(e),n=this._def.values;return X(r,{received:r.data,code:G.invalid_enum_value,options:n}),he}return nr(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}};Pl=new WeakMap;fs.create=aD;var ds=class extends ve{constructor(){super(...arguments),Ml.set(this,void 0)}_parse(e){let r=Ce.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==J.string&&n.parsedType!==J.number){let i=Ce.objectValues(r);return X(n,{expected:Ce.joinValues(i),received:n.parsedType,code:G.invalid_type}),he}if(Pm(this,Ml,"f")||nD(this,Ml,new Set(Ce.getValidEnumValues(this._def.values)),"f"),!Pm(this,Ml,"f").has(e.data)){let i=Ce.objectValues(r);return X(n,{received:n.data,code:G.invalid_enum_value,options:i}),he}return nr(e.data)}get enum(){return this._def.values}};Ml=new WeakMap;ds.create=(t,e)=>new ds({values:t,typeName:fe.ZodNativeEnum,...Se(e)});var yo=class extends ve{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==J.promise&&r.common.async===!1)return X(r,{code:G.invalid_type,expected:J.promise,received:r.parsedType}),he;let n=r.parsedType===J.promise?r.data:Promise.resolve(r.data);return nr(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}};yo.create=(t,e)=>new yo({type:t,typeName:fe.ZodPromise,...Se(e)});var Hr=class extends ve{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===fe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,o={addIssue:a=>{X(n,a),a.fatal?r.abort():r.dirty()},get path(){return n.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){let a=i.transform(n.data,o);if(n.common.async)return Promise.resolve(a).then(async l=>{if(r.value==="aborted")return he;let p=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return p.status==="aborted"?he:p.status==="dirty"||r.value==="dirty"?Aa(p.value):p});{if(r.value==="aborted")return he;let l=this._def.schema._parseSync({data:a,path:n.path,parent:n});return l.status==="aborted"?he:l.status==="dirty"||r.value==="dirty"?Aa(l.value):l}}if(i.type==="refinement"){let a=l=>{let p=i.refinement(l,o);if(n.common.async)return Promise.resolve(p);if(p instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){let l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?he:(l.status==="dirty"&&r.dirty(),a(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?he:(l.status==="dirty"&&r.dirty(),a(l.value).then(()=>({status:r.value,value:l.value}))))}if(i.type==="transform")if(n.common.async===!1){let a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Al(a))return a;let l=i.transform(a.value,o);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>Al(a)?Promise.resolve(i.transform(a.value,o)).then(l=>({status:r.value,value:l})):a);Ce.assertNever(i)}};Hr.create=(t,e,r)=>new Hr({schema:t,typeName:fe.ZodEffects,effect:e,...Se(r)});Hr.createWithPreprocess=(t,e,r)=>new Hr({schema:e,effect:{type:"preprocess",transform:t},typeName:fe.ZodEffects,...Se(r)});var pn=class extends ve{_parse(e){return this._getType(e)===J.undefined?nr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};pn.create=(t,e)=>new pn({innerType:t,typeName:fe.ZodOptional,...Se(e)});var ei=class extends ve{_parse(e){return this._getType(e)===J.null?nr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};ei.create=(t,e)=>new ei({innerType:t,typeName:fe.ZodNullable,...Se(e)});var ms=class extends ve{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===J.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};ms.create=(t,e)=>new ms({innerType:t,typeName:fe.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Se(e)});var hs=class extends ve{_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Dl(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Br(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Br(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};hs.create=(t,e)=>new hs({innerType:t,typeName:fe.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Se(e)});var Na=class extends ve{_parse(e){if(this._getType(e)!==J.nan){let n=this._getOrReturnCtx(e);return X(n,{code:G.invalid_type,expected:J.nan,received:n.parsedType}),he}return{status:"valid",value:e.data}}};Na.create=t=>new Na({typeName:fe.ZodNaN,...Se(t)});var v8=Symbol("zod_brand"),Il=class extends ve{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},Fl=class t extends ve{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let o=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?he:o.status==="dirty"?(r.dirty(),Aa(o.value)):this._def.out._parseAsync({data:o.value,path:n.path,parent:n})})();{let i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?he:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:fe.ZodPipeline})}},gs=class extends ve{_parse(e){let r=this._def.innerType._parse(e),n=i=>(Al(i)&&(i.value=Object.freeze(i.value)),i);return Dl(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}};gs.create=(t,e)=>new gs({innerType:t,typeName:fe.ZodReadonly,...Se(e)});function cD(t,e={},r){return t?go.create().superRefine((n,i)=>{var o,a;if(!t(n)){let l=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,p=(a=(o=l.fatal)!==null&&o!==void 0?o:r)!==null&&a!==void 0?a:!0,u=typeof l=="string"?{message:l}:l;i.addIssue({code:"custom",...u,fatal:p})}}):go.create()}var b8={object:br.lazycreate},fe;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(fe||(fe={}));var w8=(t,e={message:`Input not instance of ${t.name}`})=>cD(r=>r instanceof t,e),lD=ho.create,pD=rs.create,_8=Na.create,E8=ns.create,uD=is.create,R8=os.create,k8=Ia.create,P8=ss.create,M8=as.create,A8=go.create,D8=Ai.create,I8=Dn.create,F8=Fa.create,C8=Di.create,O8=br.create,N8=br.strictCreate,L8=cs.create,U8=Mm.create,V8=ls.create,B8=Jn.create,H8=Am.create,W8=Ca.create,$8=Oa.create,j8=Dm.create,q8=ps.create,z8=us.create,G8=fs.create,K8=ds.create,Q8=yo.create,tD=Hr.create,Z8=pn.create,Y8=ei.create,X8=Hr.createWithPreprocess,J8=Fl.create,e7=()=>lD().optional(),t7=()=>pD().optional(),r7=()=>uD().optional(),n7={string:t=>ho.create({...t,coerce:!0}),number:t=>rs.create({...t,coerce:!0}),boolean:t=>is.create({...t,coerce:!0}),bigint:t=>ns.create({...t,coerce:!0}),date:t=>os.create({...t,coerce:!0})},i7=he,$e=Object.freeze({__proto__:null,defaultErrorMap:Da,setErrorMap:i8,getErrorMap:Rm,makeIssue:km,EMPTY_PATH:o8,addIssueToContext:X,ParseStatus:qt,INVALID:he,DIRTY:Aa,OK:nr,isAborted:KS,isDirty:QS,isValid:Al,isAsync:Dl,get util(){return Ce},get objectUtil(){return GS},ZodParsedType:J,getParsedType:mo,ZodType:ve,datetimeRegex:sD,ZodString:ho,ZodNumber:rs,ZodBigInt:ns,ZodBoolean:is,ZodDate:os,ZodSymbol:Ia,ZodUndefined:ss,ZodNull:as,ZodAny:go,ZodUnknown:Ai,ZodNever:Dn,ZodVoid:Fa,ZodArray:Di,ZodObject:br,ZodUnion:cs,ZodDiscriminatedUnion:Mm,ZodIntersection:ls,ZodTuple:Jn,ZodRecord:Am,ZodMap:Ca,ZodSet:Oa,ZodFunction:Dm,ZodLazy:ps,ZodLiteral:us,ZodEnum:fs,ZodNativeEnum:ds,ZodPromise:yo,ZodEffects:Hr,ZodTransformer:Hr,ZodOptional:pn,ZodNullable:ei,ZodDefault:ms,ZodCatch:hs,ZodNaN:Na,BRAND:v8,ZodBranded:Il,ZodPipeline:Fl,ZodReadonly:gs,custom:cD,Schema:ve,ZodSchema:ve,late:b8,get ZodFirstPartyTypeKind(){return fe},coerce:n7,any:A8,array:C8,bigint:E8,boolean:uD,date:R8,discriminatedUnion:U8,effect:tD,enum:G8,function:j8,instanceof:w8,intersection:V8,lazy:q8,literal:z8,map:W8,nan:_8,nativeEnum:K8,never:I8,null:M8,nullable:Y8,number:pD,object:O8,oboolean:r7,onumber:t7,optional:Z8,ostring:e7,pipeline:J8,preprocess:X8,promise:Q8,record:H8,set:$8,strictObject:N8,string:lD,symbol:k8,transformer:tD,tuple:B8,undefined:P8,union:L8,unknown:D8,void:F8,NEVER:i7,ZodIssueCode:G,quotelessJson:n8,ZodError:Br});function fD(t){let e=t.operands.map(YS).join(" ");return`(#${t.operator} ${e})`}function YS(t){return t.type==="capture"?`@${t.name}`:t.value}function dD(t,e){return e.errors.filter(r=>!(r.code==="invalid_type"&&r.path.length===2&&(r.path[1]==="name"||r.path[1]==="value"))).map(r=>o7(t,r))}function o7(t,e){if(e.path.length===0)return e.code==="too_small"?"Too few arguments":e.code==="too_big"?"Too many arguments":e.message;let r=e.message;e.code==="invalid_literal"&&e.path[1]==="type"&&(r=e.expected==="capture"?"Capture names must be prefixed with @":"Expected string, but received capture");let n=e.path[0],i=YS(t[n]);return`Error on argument ${n} (\`${i}\`): ${r}`}var ir=class{allowMissingNode(){return!1}createPredicate(e){let r=this.schema.safeParse(e);return r.success?{success:!0,predicate:n=>{try{let i=this.constructAcceptArgs(r.data,n);return this.run(...i)}catch(i){if(i instanceof Im&&this.allowMissingNode())return!0;throw i}}}:{success:!1,errors:dD(e,r.error)}}constructAcceptArgs(e,r){return e.map(n=>{if(n.type==="capture"){let i=r.captures.find(o=>o.name===n.name);if(i==null)throw new Im(n.name);return i}else return n.value})}},Im=class extends Error{constructor(e){super(`Could not find capture ${e}`)}};var XS=$e.object({type:$e.literal("string"),value:$e.string()}),we={node:$e.object({type:$e.literal("capture"),name:$e.string()}),string:XS,integer:XS.transform((t,e)=>{let r=parseInt(t.value);return isNaN(r)?(e.addIssue({code:$e.ZodIssueCode.custom,message:"Expected an integer"}),$e.NEVER):{type:"integer",value:r}}),boolean:XS.transform((t,e)=>t.value==="true"?{type:"boolean",value:!0}:t.value==="false"?{type:"boolean",value:!1}:(e.addIssue({code:$e.ZodIssueCode.custom,message:"Expected true or false"}),$e.NEVER))};var JS=class extends ir{constructor(){super(...arguments);this.name="not-type?";this.schema=$e.tuple([we.node,we.string]).rest(we.string)}run({node:r},...n){return!n.includes(r.type)}},ev=class extends ir{constructor(){super(...arguments);this.name="not-parent-type?";this.schema=$e.tuple([we.node,we.string]).rest(we.string)}run({node:r},...n){return r.parent==null||!n.includes(r.parent.type)}},tv=class extends ir{constructor(){super(...arguments);this.name="is-nth-child?";this.schema=$e.tuple([we.node,we.integer])}run({node:r},n){return r.parent?.children.findIndex(i=>i.id===r.id)===n}},rv=class extends ir{constructor(){super(...arguments);this.name="has-multiple-children-of-type?";this.schema=$e.tuple([we.node,we.string])}run({node:r},n){return r.children.filter(o=>o.type===n).length>1}},nv=class extends ir{constructor(){super(...arguments);this.name="child-range!";this.schema=$e.union([$e.tuple([we.node,we.integer]),$e.tuple([we.node,we.integer,we.integer]),$e.tuple([we.node,we.integer,we.integer,we.boolean]),$e.tuple([we.node,we.integer,we.integer,we.boolean,we.boolean])])}run(r,n,i,o,a){let{node:{children:l}}=r;n=n<0?l.length+n:n,i=i??-1,i=i<0?l.length+i:i;let p=l[n],u=l[i];return r.range=ln(o?p.endPosition:p.startPosition,a?u.startPosition:u.endPosition),!0}},iv=class extends ir{constructor(){super(...arguments);this.name="character-range!";this.schema=$e.union([$e.tuple([we.node,we.integer]),$e.tuple([we.node,we.integer,we.integer])])}run(r,n,i){return r.range=new W(r.range.start.translate(void 0,n),r.range.end.translate(void 0,i??0)),!0}},ov=class extends ir{constructor(){super(...arguments);this.name="shrink-to-match!";this.schema=$e.tuple([we.node,we.string])}run(r,n){let{document:i,range:o}=r,l=i.getText(o).match(new RegExp(n,"ds"));if(l?.index==null)throw Error(`No match for pattern '${n}'`);let[p,u]=l.indices?.groups?.keep??l.indices[0],d=i.offsetAt(o.start);return r.range=new W(i.positionAt(d+p),i.positionAt(d+u)),!0}},sv=class extends ir{constructor(){super(...arguments);this.name="trim-end!";this.schema=$e.tuple([we.node])}run(r){let{document:n,range:i}=r,o=n.getText(i),a=o.length-o.trimEnd().length;return a>0&&(r.range=new W(i.start,fk(n,i.end,-a))),!0}},av=class extends ir{constructor(){super(...arguments);this.name="allow-multiple!";this.schema=$e.tuple([we.node])}allowMissingNode(){return!0}run(r){return r.allowMultiple=!0,!0}},cv=class extends ir{constructor(){super(...arguments);this.name="log!";this.schema=$e.tuple([we.node])}run(r){return console.log(`#log!: ${r.name}@${r.range}`),!0}},lv=class extends ir{constructor(){super(...arguments);this.name="insertion-delimiter!";this.schema=$e.tuple([we.node,we.string])}run(r,n){return r.insertionDelimiter=n,!0}},pv=class extends ir{constructor(){super(...arguments);this.name="single-or-multi-line-delimiter!";this.schema=$e.tuple([we.node,we.node,we.string,we.string])}run(r,n,i,o){return r.insertionDelimiter=n.range.isSingleLine?i:o,!0}},mD=[new cv,new JS,new sv,new ev,new tv,new nv,new iv,new ov,new av,new lv,new pv,new rv];function hD(t){let e=[],r=[];return t.forEach((n,i)=>{let o=[];n.forEach((a,l)=>{let p=mD.find(({name:d})=>d===a.operator);if(p==null){e.push({patternIdx:i,predicateIdx:l,error:`Unknown predicate operator "${a.operator}"`});return}let u=p.createPredicate(a.operands);if(!u.success){e.push(...u.errors.map(d=>({patternIdx:i,predicateIdx:l,error:d})));return}o.push(u.predicate)}),r.push(o)}),{errors:e,predicates:r}}function gD(t){return t.map(e=>e.name.endsWith(".startOf")?{...e,name:e.name.replace(/\.startOf$/,""),range:e.range.start.toEmptyRange()}:e.name.endsWith(".endOf")?{...e,name:e.name.replace(/\.endOf$/,""),range:e.range.end.toEmptyRange()}:e)}var Cl=class t{constructor(e,r,n){this.treeSitter=e;this.query=r;this.patternPredicates=n}static create(e,r,n){let{errors:i,predicates:o}=hD(n.predicates);if(i.length>0){for(let a of i){let l=[`language ${e}`,`pattern ${a.patternIdx}`,`predicate \`${fD(n.predicates[a.patternIdx][a.predicateIdx])}\``].join(", ");it(D().messages,"TreeSitterQuery.parsePredicates",`Error parsing predicate for ${l}: ${a.error}`)}if(D().runMode==="test")throw new Error("Invalid predicates")}return new t(r,n,o)}matches(e,r,n){return this.query.matches(this.treeSitter.getTree(e).rootNode,{startPosition:r==null?void 0:xD(r),endPosition:n==null?void 0:xD(n)}).map(({pattern:i,captures:o})=>({patternIdx:i,captures:o.map(({name:a,node:l})=>({name:a,node:l,document:e,range:zA(l),insertionDelimiter:void 0,allowMultiple:!1,hasError:()=>JA(l)}))})).filter(i=>this.patternPredicates[i.patternIdx].every(o=>o(i))).map(i=>{let o=Object.entries(fT(i.captures,({name:a})=>yD(a))).map(([a,l])=>{if(l=gD(l),!XA(l,D().messages)&&D().runMode==="test")throw new Error("Invalid captures");return{name:a,range:l.map(({range:u})=>u).reduce((u,d)=>d.union(u)),allowMultiple:l.some(u=>u.allowMultiple),insertionDelimiter:l.find(u=>u.insertionDelimiter!=null)?.insertionDelimiter,hasError:()=>l.some(u=>u.hasError())}});return{...i,captures:o}})}get captureNames(){return vi(this.query.captureNames.map(yD))}};function yD(t){return t.replace(/(\.(start|end))?(\.(startOf|endOf))?$/,"")}function xD(t){return{row:t.line,column:t.character}}var SD="_",s7=[SD,...qo],a7=["prefix","leading","trailing"],c7=["startOf","endOf"],l7=["domain","removal","interior","iteration","iteration.domain"],TD=["start","end","start.startOf","start.endOf","end.startOf","end.endOf"],ys=new Set;for(let t of s7){if(t!==SD){ys.add(t);for(let e of TD)ys.add(`${t}.${e}`)}for(let e of a7){ys.add(`${t}.${e}`);for(let r of c7)ys.add(`${t}.${e}.${r}`)}for(let e of l7){ys.add(`${t}.${e}`);for(let r of TD)ys.add(`${t}.${e}.${r}`)}}var p7=new RegExp("^(?!;;).*@([\\w.]*)","gm");function vD(t,e){let r=e.matchAll(p7),n=[];for(let o of r){let a=o[1];if(!(a.length>1&&!a.includes(".")&&a.startsWith("_"))&&!ys.has(a)){let l=o.input.slice(0,o.index).split(`
`).length;n.push(`${t}(${l}) invalid capture '@${a}'.`)}}if(n.length===0)return;let i=n.join(`
`);if(it(D().messages,"validateQueryCaptures.invalidCaptureName",i),D().runMode==="test")throw new Error(i)}var Fm=class t{constructor(e){this.query=e;this.cache=new Rl}static async create(e,r,n,i){let o=await u7(e,r,`${i}.scm`);if(o==null||!await n.loadLanguage(i))return;let a=n.getLanguage(i).query(o),l=Cl.create(i,n,a);return new t(l)}getScopeHandler(e){if(this.query.captureNames.includes(e.type))return new cm(this.query,e)}getCaptures(e,r){return this.cache.isValid(e)||this.cache.update(e,this.getCapturesMap(e)),this.cache.get(r)}clearCache(){this.cache=new Rl}getCapturesMap(e){let r=this.query.matches(e),n={};for(let i of r)for(let o of i.captures)n[o.name]==null&&(n[o.name]=[]),n[o.name].push(o);return n}};async function u7(t,e,r){let n={[r]:null},i=t.runMode!=="production";for(;Object.values(n).some(o=>o==null);)for(let[o,a]of Object.entries(n)){if(a!=null)continue;let l=await e.readQuery(o);if(l==null){if(o===r)return;if(it(t.messages,"LanguageDefinition.readQueryFileAndImports.queryNotFound",`Could not find imported query file ${o}`),t.runMode==="test")throw new Error("Invalid import statement");l=""}i&&vD(o,l),n[o]=l,jn(l,/^[^\S\r\n]*;;?[^\S\r\n]*(?:import|include)[^\S\r\n]+['"]?([\w|/\\.]+)['"]?[^\S\r\n]*$/gm,p=>{let u=p[1];i&&f7(t,o,u,p[0]),n[u]=n[u]??null})}return Object.values(n).join(`
`)}function f7(t,e,r,n){let i=!1;/[/\\]/g.test(r)&&(it(t.messages,"LanguageDefinition.readQueryFileAndImports.invalidImport",`Invalid import statement in ${e}: "${n}". Relative import paths not supported`),i=!0);let o=`;; import ${r}`;if(n!==o&&(it(t.messages,"LanguageDefinition.readQueryFileAndImports.malformedImport",`Malformed import statement in ${e}: "${n}". Import statements must be of the form "${o}"`),i=!0),i&&t.runMode==="test")throw new Error("Invalid import statement")}var uv=Symbol("LANGUAGE_UNDEFINED"),Cm=class t{constructor(e,r,n){this.ide=e;this.treeSitter=r;this.treeSitterQueryProvider=n;this.notifier=new Wt;this.languageDefinitions=new Map;this.disposables=[];this.onDidChangeDefinition=this.notifier.registerListener;e.onDidOpenTextDocument(i=>{this.loadLanguage(i.languageId)}),e.onDidChangeVisibleTextEditors(i=>{i.forEach(({document:o})=>this.loadLanguage(o.languageId))}),this.disposables.push(n.onChanges(()=>this.reloadLanguageDefinitions()))}static async create(e,r,n){let i=new t(e,r,n);return await i.loadAllLanguages(),i}async loadAllLanguages(){let e=this.ide.visibleTextEditors.map(({document:r})=>r.languageId);try{await Promise.all(e.map(r=>this.loadLanguage(r)))}catch(r){if(it(this.ide.messages,"Failed to load language definitions",kn(r)),this.ide.runMode==="test")throw r}}async loadLanguage(e){if(this.languageDefinitions.has(e))return;let r=await Fm.create(this.ide,this.treeSitterQueryProvider,this.treeSitter,e)??uv;this.languageDefinitions.set(e,r)}async reloadLanguageDefinitions(){this.languageDefinitions.clear(),await this.loadAllLanguages(),this.notifier.notifyListeners()}get(e){let r=this.languageDefinitions.get(e);if(r==null)throw new Error("Expected language definition entry is missing for languageId "+e);return r===uv?void 0:r}clearCache(){for(let e of this.languageDefinitions.values())e!==uv&&e.clearCache()}getNodeAtLocation(e,r){return this.treeSitter.getNodeAtLocation(e,r)}dispose(){this.disposables.forEach(e=>e.dispose())}};var Om=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}get nestedStages(){return this.nestedStages_==null&&(this.nestedStages_=this.modifier.modifiers.map(this.modifierStageFactory.create)),this.nestedStages_}run(e){for(let r of this.nestedStages)try{return r.run(e)}catch{continue}throw new Error("No modifier could be applied")}};var La=class{constructor(e,r){this.modifierStageFactory=e;this.nestedModifier=r;this.suppressErrors=!1}run(e){if(this.shouldModify(e))try{return this.nestedStage.run(e).map(r=>r.withThatTarget(e))}catch(r){if(!this.suppressErrors)throw r}return[e]}get nestedStage(){return this.nestedStage_==null&&(this.nestedStage_=this.modifierStageFactory.create(this.nestedModifier)),this.nestedStage_}},Ua=class extends La{constructor(e,r){super(e,r.modifier)}shouldModify(e){return!e.hasExplicitScopeType}},Ol=class extends La{constructor(r,n,i){super(r,n);this.modificationCondition=i}shouldModify(r){return this.modificationCondition(r)}},Nm=class extends La{shouldModify(e){return!e.hasExplicitScopeType&&!e.isImplicit}},Va=class extends La{constructor(r){super(r,{type:"containingScope",scopeType:{type:"token"}});this.suppressErrors=!0}shouldModify(r){return!r.hasExplicitScopeType&&!r.hasExplicitRange&&r.contentRange.isEmpty}};function bD(t,e){return Object.getPrototypeOf(t).constructor===Object.getPrototypeOf(e).constructor}function Ba(t,e,r,n,i){if(n&&i&&bD(e,r)){let o=e.maybeCreateRichRangeTarget(t,r);if(o!=null)return o}return e.isLine&&r.isLine?new Vr({editor:e.editor,isReversed:t,contentRange:ya(e,r,n,i)}):new Pt({editor:e.editor,isReversed:t,hasExplicitRange:!0,contentRange:lo(e,r,n,i),isToken:n&&i&&e.isToken&&r.isToken})}function Lm(t,e,r){if(e===r)return e.getTargets(t);let n=e.getTargets(t),i=r.getTargets(t);if(n.length!==1||i.length!==1)throw Error("Scope range targets must be single-target");let[o]=n,[a]=i,l=a.contentRange.start.isAfterOrEqual(o.contentRange.start),[p,u]=l?[o,a]:[a,o];return[Ba(t,p,u,!0,!0)]}function Um(t,e,r,n){let i=Array.from(t.generateScopes(e,r,"forward",{containment:"required",allowAdjacentScopes:!0,skipAncestorScopes:!0}));switch(i.length){case 0:return;case 1:return i[0];case 2:{let[o,a]=i;return n==="forward"?a:n==="backward"||(t.isPreferredOver?.(o,a)??!1)?o:a}default:throw new Error("Expected no more than 2 scope candidates")}}function Vm(t,e,r=0){let{isReversed:n,editor:i,contentRange:{start:o,end:a}}=t;if(a.isEqual(o)){let u=Um(e,i,o);return u==null||(r>0&&(u=fv(e,i,u.domain.end,"forward",r,!0)),u==null)?void 0:u.getTargets(n)}let l=fv(e,i,o,"forward",r);if(l==null)return;if(l.domain.contains(a))return l.getTargets(n);let p=fv(e,i,a,"backward",r);if(p!=null)return Lm(n,l,p)}function fv(t,e,r,n,i,o=!1){let a=0;for(let l of t.generateScopes(e,r,n,{containment:"required",allowAdjacentScopes:o})){if(a===i)return l;a+=1}}var Ha=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let{scopeType:r,ancestorIndex:n=0}=this.modifier,i=this.scopeHandlerFactory.maybeCreate(r,e.editor.document.languageId);if(i==null)return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e);let o=Vm(e,i,n);if(r.type==="collectionItem")try{let a=this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e);if(o==null)return a;if(o.length===1&&a.length===1){let l=o[0].contentRange,p=a[0].contentRange;if(l.contains(p)&&!l.isRangeEqual(p))return a}}catch{}if(o==null)throw new Rt(this.modifier.scopeType.type);return o}};var Bm=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let{scopeType:r}=this.modifier,{editor:n,isReversed:i}=e,o=this.scopeHandlerFactory.maybeCreate(r,n.document.languageId);if(o==null)return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e);let a;if(e.hasExplicitRange&&(a=wD(o,n,e.contentRange),a.length===1&&a[0].domain.contains(e.contentRange)&&(a=void 0)),a==null)try{a=this.getDefaultIterationRange(o,this.scopeHandlerFactory,e).flatMap(l=>wD(o,n,l))}catch(l){if(!(l instanceof Rt))throw l;a=[]}if(a.length===0){if(r.type==="collectionItem")return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e);throw new Rt(r.type)}return a.flatMap(l=>l.getTargets(i))}getDefaultIterationRange(e,r,n){let i=r.maybeCreate(e.iterationScopeType,n.editor.document.languageId);if(i==null)throw Error("Could not find iteration scope handler");let o=Vm(n,i);if(o==null)throw new Rt(`iteration scope for ${e.scopeType.type}`);return o.map(a=>a.contentRange)}};function wD(t,e,{start:r,end:n}){return Array.from(t.generateScopes(e,r,"forward",{distalPosition:n,skipAncestorScopes:!0,allowAdjacentScopes:t.includeAdjacentInEvery}))}var Hm=class{constructor(e){this.modifier=e}run(e){return e.contentText.trim()!==""?[e]:[]}},Wm=class{constructor(e){this.modifier=e}run(e){return e.contentText.trim()===""?[e]:[]}};var $m=class{run(){return Fd(D()).map(e=>new Ad({editor:e.editor,isReversed:e.selection.isReversed,contentRange:e.selection}))}};var jm=class{constructor(e,r){this.modifierStageFactory=e;this.markStageFactory=r}run(e,{actionFinalStages:r=[],noAutomaticTokenExpansion:n=!1}={}){return new dv(this.modifierStageFactory,this.markStageFactory,e,{actionFinalStages:r,noAutomaticTokenExpansion:n}).run()}},dv=class{constructor(e,r,n,i){this.modifierStageFactory=e;this.markStageFactory=r;this.target=n;this.opts=i}run(){return d7(this.processTarget(this.target))}processTarget(e){switch(e.type){case"list":return e.elements.flatMap(r=>this.processTarget(r));case"range":return this.processRangeTarget(e);case"primitive":case"implicit":return this.processPrimitiveTarget(e)}}processRangeTarget(e){let r=this.processPrimitiveTarget(e.anchor),n=this.processPrimitiveTarget(e.active);return St(r,n).flatMap(([i,o])=>{if(i==null||o==null)throw new Error("AnchorTargets and activeTargets lengths don't match");switch(e.rangeType){case"continuous":return this.processContinuousRangeTarget(i,o,e);case"vertical":return m7(i,o,e.excludeAnchor,e.excludeActive)}})}processContinuousRangeTarget(e,r,{excludeAnchor:n,excludeActive:i,exclusionScopeType:o}){if(o==null)return[xo(e,r,n,i)];let a=gv(e,r);return[xo(n?_D(this.modifierStageFactory,e,o,a?"backward":"forward"):e,i?_D(this.modifierStageFactory,r,o,a?"forward":"backward"):r,!1,!1)]}processPrimitiveTarget(e){let r,n;e.type==="implicit"?(r=new $m,n=[]):(r=this.markStageFactory.create(e.mark),n=mv(this.modifierStageFactory,e.modifiers));let i=r.run(),o=[...n,...this.opts.actionFinalStages,...this.opts.noAutomaticTokenExpansion?[]:[new Va(this.modifierStageFactory)]];return hv(o,i)}};function mv(t,e){return e.map(t.create).reverse()}function hv(t,e){return t.forEach(r=>{e=e.flatMap(n=>r.run(n))}),e}function _D(t,e,r,n){return t.create({type:"relativeScope",scopeType:r,direction:n,length:1,offset:1}).run(e)[0]}function gv(t,e){return t.contentRange.start.isAfter(e.contentRange.start)?!0:t.contentRange.start.isBefore(e.contentRange.start)?!1:t.contentRange.end.isAfter(e.contentRange.end)}function d7(t){return xP(t,(e,r)=>e.isEqual(r),e=>e.contentRange.concise())}function ED(t,e){if(t.editor!==e.editor)throw new Error("Cannot form range between targets in different editors")}function xo(t,e,r=!1,n=!1){ED(t,e);let i=gv(t,e);return Ba(i,i?e:t,i?t:e,!(i?n:r),!(i?r:n))}function m7(t,e,r,n){ED(t,e);let i=gv(t,e),o=i?-1:1,l=(i?t.contentRange.start:t.contentRange.end).line+(r?o:0),u=(i?e.contentRange.start:e.contentRange.end).line-(n?o:0),d=[];for(let h=l;;h+=o){let g=new W(h,t.contentRange.start.character,h,t.contentRange.end.character);if(d.push(new He({editor:t.editor,isReversed:t.isReversed,contentRange:g,insertionDelimiter:t.insertionDelimiter})),h===u)return d}}var qm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=this.modifier.modifiers??[{type:"containingScope",scopeType:{type:"oneOf",scopeTypes:[{type:"line"},{type:"surroundingPairInterior",delimiter:"any",requireSingleLine:!0}]}}],n=mv(this.modifierStageFactory,r);return hv(n,[e]).map(o=>{let a=this.modifier.type==="extendThroughStartOf";return new Dd({editor:e.editor,isReversed:a,inputTarget:e,modifiedTarget:o,isHead:a})})}};var Ii=class extends Error{constructor(){super("Scope index out of range"),this.name="OutOfRangeError"}};function RD(t,e,r){return yv(t,e,r),t.slice(e,r+1)}function yv(t,e,r){if(e<0||r>=t.length)throw new Ii}var Wa=class{constructor(e,r,n){this.modifierStageFactory=e;this.storedTargets=r;this.modifier=n}run(e){let r=new Va(this.modifierStageFactory).run(e)[0];switch(this.modifier.type){case"everyScope":return this.handleEveryScope(r);case"ordinalScope":return this.handleOrdinalScope(r,this.modifier);case"relativeScope":return this.handleRelativeScope(r,this.modifier);default:throw Error(`${this.modifier.type} instance scope not supported`)}}handleEveryScope(e){return Array.from(Xd(this.getEveryRanges(e),([r,n])=>this.getTargetIterable(e,r,n,"forward")))}handleOrdinalScope(e,{start:r,length:n}){return this.getEveryRanges(e).flatMap(([i,o])=>kD(this.getTargetIterable(e,i,o,r>=0?"forward":"backward"),r>=0?r:-(n+r),n))}handleRelativeScope(e,{direction:r,offset:n,length:i}){return(this.storedTargets.get("instanceReference")??[e]).flatMap(a=>{let{editor:l}=a,p=r==="forward"?new W(n===0?a.contentRange.start:a.contentRange.end,l.document.range.end):new W(l.document.range.start,n===0?a.contentRange.end:a.contentRange.start);return kD(this.getTargetIterable(e,l,p,r),n===0?0:n-1,i)})}getEveryRanges({editor:e}){return this.storedTargets.get("instanceReference")?.map(({editor:r,contentRange:n})=>[r,n])??[[e,e.document.range]]}getTargetIterable(e,r,n,i){let o=Lt(cn(new RegExp(Nr(e.contentText),"g"),r,n,i),l=>new He({contentRange:l,editor:r,isReversed:!1,isToken:!1})),a=h7(e);if(a!=null){let l=this.modifierStageFactory.create({type:"containingScope",scopeType:a});return dA(Lt(o,p=>{try{let u=l.run(p);return u.length===1&&u[0].contentRange.isRangeEqual(p.contentRange)?u[0]:null}catch{return null}}),p=>p!=null)}return o}};function h7(t){return t.isLine?{type:"line"}:t.isToken?{type:"token"}:t.isWord?{type:"word"}:null}function kD(t,e,r){Array.from(wl(e,t));let n=Array.from(wl(r,t));if(n.length<r)throw new Ii;return n}var zm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r;this.containingSurroundingPairIfNoInteriorStage=g7(this.modifierStageFactory)}run(e){return this.containingSurroundingPairIfNoInteriorStage.run(e).flatMap(r=>r.getInterior())}},Gm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r;this.containingSurroundingPairIfNoBoundaryStage=xv(this.modifierStageFactory)}run(e){return this.containingSurroundingPairIfNoBoundaryStage.run(e).flatMap(r=>r.getBoundary())}};function g7(t){return new Ol(t,{type:"containingScope",scopeType:{type:"surroundingPair",delimiter:"any"}},e=>e.getInterior()==null)}function xv(t){return new Ol(t,{type:"containingScope",scopeType:{type:"surroundingPair",delimiter:"any"}},e=>e.getBoundary()==null)}function PD(...t){return e=>{let r=e;for(let n of t)if(r=n(r),r==null)return null;return r}}function MD(t,...e){return r=>{let n=r,i=[],o=[...e].reverse();for(let a of o){if(n==null||(n=a(n),n==null))return null;i.push(n),n=n.parent??null}return i.reverse()[t]}}var Tv=t=>new ce(t.row,t.column),AD=(...t)=>{let e=["(","{","[","<"],r=[")","}","]",">"],n=e.concat(r),i=(a,l)=>a!=null&&l.includes(a.type),o=a=>a!=null&&!i(a,n);return(a,l)=>{let p,{start:u,end:d}=l;if(i(a.parent,t))return i(a,e)?p=a.nextNamedSibling:i(a,r)?p=a.previousNamedSibling:a.type===","?p=d.isBeforeOrEqual(Tv(a.startPosition))?a.previousNamedSibling:a.nextNamedSibling:p=a,o(p)?p:null;if(i(a,t)){let h=[...a.children],g=h.find(({startPosition:_})=>Tv(_).isAfterOrEqual(d))??null;if(o(g))return g;h.reverse();let x=h.find(({endPosition:_})=>Tv(_).isBeforeOrEqual(u))??null;if(o(x))return x}return null}};function Oe(...t){let e=y7(t);return r=>{for(let n of e){let i=x7(r,n);if(i!=null)return i}return null}}function y7(t){return t.map(e=>e.split(".").map(r=>new Sv(r)))}function x7(t,e){let r=T7(t,e);!r&&e.length>1&&(r=S7(t,e));let n=null,i;return r!=null&&([n,i]=r),n!=null&&i!=null&&i.fields!=null&&i.fields.forEach(o=>{n=(o.isIndex?n?.namedChild(o.value):n?.childForFieldName(o.value))??null}),n}function T7(t,e){let r=null,n=t;for(let i=e.length-1;i>-1;--i){let o=e[i];if(n==null||!o.typeEquals(n)){if(o.isOptional)continue;return null}(!r||!r[1].isImportant)&&(r=[n,o]),n=n.parent}return r}function S7(t,e){let r=null,n=t;for(let i=0;i<e.length;++i){let o=e[i];if(n==null||!o.typeEquals(n)){if(o.isOptional)continue;return null}if((!r||o.isImportant)&&(r=[n,o]),i+1<e.length){let a=n.namedChildren.filter(l=>e[i+1].typeEquals(l));n=a.length===1?a[0]:null}}return r}var Sv=class{constructor(e){this.anyType=!1;this.notType=!1;this.type=e.match(/^[\w*~]+/)[0],this.type==="*"?this.anyType=!0:this.type.startsWith("~")&&(this.type=this.type.slice(1),this.notType=!0),this.isImportant=e.indexOf("!")>-1,this.isOptional=e.indexOf("?")>-1,this.fields=[...e.matchAll(/(?<=\[).+?(?=\])/g)].map(r=>r[0]).map(r=>/\d+/.test(r)?{isIndex:!0,value:Number(r)}:{isIndex:!1,value:r})}typeEquals(e){return this.anyType?!0:this.notType?this.type!==e.type:this.type===e.type}};function Me(t,e=Yn){return function(r,n){let i=t(n,r.selection);return i!=null?[{node:i,selection:e(r.editor,i)}]:null}}function Km(t,e=Yn){let r=PD(...t);return function(n,i){let o=r(i);return o==null?null:[{node:o,selection:e(n.editor,o)}]}}function $a(t,e=0,r=Yn){return Me(MD(e,...t),r)}function wt(...t){return Me(Oe(...t))}function To(...t){return Me(AD(...t),KA())}function ja(...t){return Me(Oe(...t),QA)}function In(t,e=[]){return Me(Oe(...t),ZA(...e))}function So(t,e=[]){return Me(Oe(...t),YA(...e))}function at(...t){return(e,r)=>{for(let n of t){let i=n(e,r);if(i!=null)return i}return null}}function DD(t){return(e,r)=>{throw new Error(`Node type '${t}' not supported`)}}function fn(t){return Object.freeze(Object.fromEntries(wi(t).map(e=>{let r=t[e];return Array.isArray(r)?[e,wt(...r)]:typeof r=="string"?[e,wt(r)]:[e,r]})))}function ID(t,e){let r=t.walk();r.gotoFirstChild();let n=[],i=!0;for(;i;)r.currentFieldName===e&&n.push(r.currentNode),i=r.gotoNextSibling();return n}function v7(t,e){return bv(t,r=>Math.floor(r/2)*2+e)}function Qm(t){return v7(Oe("map_lit"),t)}function bv(t,e){return r=>{let n=r.parent;if(n==null||t(n)==null)return null;let i=Nl(n),o=i.findIndex(({id:l})=>l===r.id);if(o===-1)return null;let a=e(o);return a===-1?null:i[a]}}function b7(){return bv(t=>t,t=>t)}var Nl=t=>ID(t,"value"),vv="~quoting_lit.list_lit!",CD=Oe(vv);function wv(...t){return e=>{let r=CD(e);if(r==null)return null;let n=Nl(r)[0];return t.includes(n?.text)?r:null}}function w7(...t){return Me(wv(...t))}var OD=wv("defn","defmacro"),FD=Km([OD,t=>Nl(t)[1]]),ND=wv("if","if-let","when","when-let"),_7=Me(ND),E7={collectionKey:Me(Qm(0)),collectionItem:at(Me(Qm(0),kl(t=>t.type==="{"||t.type==="}",", ",Ht,Qm(1))),Me(b7())),value:Me(Qm(1)),argumentOrParameter:Me(bv(Oe(vv),t=>t!==0?t:-1)),functionCall:vv,functionCallee:Km([CD,t=>Nl(t)[0]]),namedFunction:Me(OD),functionName:FD,name:FD,anonymousFunction:at(w7("fn"),wt("anon_fn_lit")),ifStatement:_7,condition:Km([ND,t=>Nl(t)[1]])},LD=fn(E7);var UD=["command","displayed_equation","inline_formula","math_set","block_comment","package_include","class_include","latex_include","biblatex_include","bibtex_include","graphics_include","svg_include","inkscape_include","verbatim_include","import_include","caption","citation","label_definition","label_reference","label_reference_range","label_number","new_command_definition","old_command_definition","let_command_definition","environment_definition","glossary_entry_definition","glossary_entry_reference","acronym_definition","acronym_reference","theorem_definition","color_definition","color_set_definition","color_reference","tikz_library_import"],R7=["curly_group","curly_group_text","curly_group_text_list","curly_group_path","curly_group_path_list","curly_group_command_name","curly_group_key_value","curly_group_glob_pattern","curly_group_impl","brack_group","brack_group_text","brack_group_argc","brack_group_key_value","mixed_group"],BD=["subparagraph","paragraph","subsubsection","subsection","section","chapter","part"],VD=BD.map(t=>`${t}[text]`),k7=BD.map(t=>`${t}[command]`);function _v(t,e){return{selection:new Te(t.document.positionAt(e.startIndex+1),t.document.positionAt(e.endIndex-1)),context:{removalRange:new Te(t.document.positionAt(e.startIndex),t.document.positionAt(e.endIndex))}}}function P7(t,e){let r=e.startIndex,n=e.endIndex,i=e.nextNamedSibling;return i!=null&&i.isNamed&&(n=i.endIndex),{selection:new Te(t.document.positionAt(r),t.document.positionAt(n)),context:{}}}function M7(t,e){let r=e.startIndex,n=e.childForFieldName("label");if(n==null){let i=e.childForFieldName("command");i!=null&&(r=i.endIndex+1)}else r=n.endIndex+1;return{selection:new Te(t.document.positionAt(r),t.document.positionAt(e.endIndex)),context:{leadingDelimiterRange:new W(t.document.positionAt(e.startIndex),t.document.positionAt(r-1))}}}var A7={argumentOrParameter:at($a([Oe(...UD),Oe(...R7)],1,_v),Me(Oe("begin[name]","end[name]",...VD),_v)),functionCall:at(Me(Oe(...UD,"begin","end")),Me(Oe(...k7),P7)),name:at(Me(Oe(...VD),_v),wt("begin[name][text]","end[name][text]")),collectionItem:Me(Oe("enum_item"),M7)},HD=fn(A7);var D7=["alias","begin_block","end_block","if_modifier","rescue_modifier","undef","unless_modifier","until_modifier","while_modifier"],I7=["array","assignment","begin","binary","break","call","case","case_match","chained_string","character","class","class_variable","complex","conditional","constant","delimited_symbol","element_reference","false","float","for","global_variable","hash","heredoc_beginning","identifier","if","instance_variable","integer","lambda","method","module","next","nil","operator_assignment","parenthesized_statements","range","rational","redo","regex","retry","return","scope_resolution","self","simple_symbol","singleton_class","singleton_method","string","string_array","subshell","super","symbol_array","true","unary","unless","until","while","yield"],F7=["begin_block","begin","block_body","block","body_statement","do_block","do","else","end_block","ensure","heredoc_beginning","interpolation","lambda","method","parenthesized_statements","program","singleton_class","singleton_method","then"],C7=["hash"],O7=["array","string_array","symbol_array"],N7=["=","+=","-=","*=","**=","/=","||=","|=","&&=","&=","%=",">>=","<<=","^="],L7=[":","=>"];function U7(t){if(t.type!=="call")return null;let e=t.childForFieldName("receiver"),r=t.childForFieldName("method"),n=t.childForFieldName("block");return e?.text==="Proc"&&r?.text==="new"||e==null&&r?.text==="lambda"?t:n}var V7={statement:at(wt(...D7),$a([Oe(...F7),Oe(...I7)],1)),anonymousFunction:at(wt("lambda","do_block"),Me(U7)),condition:ja("*[condition]"),argumentOrParameter:To("lambda_parameters","method_parameters","block_parameters","argument_list"),collectionKey:So(["pair[key]"],[":"]),value:In(["pair[value]","assignment[right]","operator_assignment[right]","return.argument_list!"],N7.concat(L7)),collectionItem:To(...C7,...O7)},WD=fn(V7);function Ev(){let t=Xn(["else_clause"],[],{includeUnnamedChildren:!0});return function(e,r){let n=t(e,r),i=r.parent;if(i?.type!=="else_clause"){let a=r.childForFieldName("alternative");if(a==null)return n;let{selection:l}=n;return{selection:l,context:{removalRange:new Te(l.start,qS(a.namedChild(0).startPosition))}}}let{selection:o}=n;return{selection:new Te(qS(i.child(0).startPosition),o.end),context:{}}}}function $D(t){let e=Ev();return function(r,n){return n.namedChild(0).type===t?e(r,n.namedChild(0)):Yn(r,n)}}var jD=["associated_type","attribute_item","const_item","empty_statement","enum_item","extern_crate_declaration","foreign_mod_item","impl_item","inner_attribute_item","let_declaration","macro_definition","macro_invocation","function_item","function_signature_item","mod_item","static_item","struct_item","trait_item","type_item","union_item","use_declaration","expression_statement"],B7=["source_file","block","declaration_list"];function H7(t){return t.parent?.type==="impl_item"&&t.parent?.childForFieldName("type")?.equals(t)?t:null}function W7(t,e){return{selection:GA(e.children[1],e.lastNamedChild),context:{leadingDelimiterRange:ln(e.children[0].startPosition,e.children[1].startPosition)}}}function $7(t){if(t.type!=="block")return null;let{lastNamedChild:e}=t;if(e==null)return null;if(e.type==="expression_statement"){let r=e.child(0);return r.type==="return_expression"?r.child(1):null}return jD.includes(e.type)?null:e.type==="return_expression"?e.child(1):e}var j7={statement:$a([Oe(...B7),Oe(...jD)],1),condition:at(wt("while_expression[condition]","if_expression[condition]"),Me(Oe("while_let_expression","if_let_expression"),Xn(["while","if","block"],[],{includeUnnamedChildren:!0})),In(["*.match_pattern![condition]"],["if"])),collectionItem:To("array_expression","tuple_expression","tuple_type"),type:at(In(["let_declaration[type]","parameter[type]","field_declaration[type]","const_item[type]"],[":"]),Me(Oe("constrained_type_parameter[bounds]","where_predicate[bounds]"),W7),In(["function_item[return_type]"],["->"]),Me(H7),wt("struct_item","trait_item","impl_item","array_type[element]")),argumentOrParameter:To("arguments","parameters","meta_arguments","type_parameters","ordered_field_declaration_list"),collectionKey:at(So(["field_initializer[name]","field_pattern[name]"],[":"])),name:at(wt("let_declaration.identifier!","parameter.identifier!","function_item[name]","struct_item[name]","enum_item[name]","enum_variant[name]","trait_item[name]","const_item[name]","meta_item.identifier!","let_declaration[pattern]","constrained_type_parameter[left]","where_predicate[left]","field_declaration[name]"),So(["field_initializer[name]","field_pattern[name]"],[":"])),value:at(In(["let_declaration[value]"],["="]),In(["field_initializer[value]","field_pattern[pattern]"],[":"]),wt("meta_item[value]","const_item[value]"),Me($7)),attribute:So(["mutable_specifier","attribute_item"]),branch:at(wt("match_arm"),Me(Oe("else_clause"),$D("if_expression")),Me(Oe("if_expression"),Ev()))},qD=fn(j7);var q7={argumentOrParameter:To("arguments","parameters","class_parameters","bindings"),branch:Me(Oe("case_clause"),Xn([],[],{includeUnnamedChildren:!0})),type:In(["upper_bound[type]","lower_bound[type]","view_bound[type]","context_bound[type]","val_definition[type]","val_declaration[type]","var_definition[type]","var_declaration[type]","type_definition","extends_clause[type]","class_parameter[type]","parameter[type]","function_definition[return_type]","typed_pattern[type]","binding[type]"],[":"]),value:In(["*[value]","*[default_value]","type_definition[type]"],["="]),condition:ja("*[condition]")},zD=fn(q7);var z7=["apply_statement","at_rule","charset_statement","debug_statement","each_statement","error_statement","for_statement","forward_statement","function_statement","if_statement","import_statement","include_statement","keyframes_statement","media_statement","mixin_statement","namespace_statement","placeholder","rule_set","supports_statement","use_statement","warn_statement","while_statement"];function KD(t){return[",","(",")"].includes(t.type)||QD(t)}function QD(t){return t.type==="plain_value"&&t.text==="at"}function GD(t){return e=>{(QD(e)||e.type===",")&&(e=e.previousSibling);let r=t(e);for(;r&&!KD(r);)e=r,r=t(r);return e}}function G7(t,e){return e.type!=="declaration"?null:e.descendantsOfType("unit").map(r=>({node:r,selection:Yn(t.editor,r)}))}var K7={condition:ja("condition"),statement:at(wt(...z7),Me(Oe("attribute_selector"),Xn([],["attribute_name","string_value"]))),argumentOrParameter:at(Me(Oe("arguments.*!","parameters.*!"),kl(t=>KD(t),", ",GD(t=>t.previousSibling),GD(t=>t.nextSibling)))),collectionKey:So(["declaration.property_name!"],[":"]),value:at(Me(Oe("declaration"),Xn(["property_name","variable_name"])),Me(Oe("include_statement","namespace_statement"),Xn()),wt("return_statement.*!","import_statement.*!","attribute_selector.plain_value!","attribute_selector.string_value!","parameter.default_value!")),unit:at(wt("integer_value.unit!"),G7)},Rv=fn(K7);function ZD(t,e,r){let n=Ll[t];if(n==null)throw new Au(t);let i=n[e];return i==null?DD(e):r?Q7(i):i}var Ll={clojure:LD,css:Rv,latex:HD,ruby:WD,rust:qD,scala:zD,scss:Rv};function Q7(t){return(e,r)=>{let n=t(e,r);return n==null?null:(n=n.flatMap(i=>Z7(i.node,vd(e,i.selection.selection),t)),n.length>0?n:null)}}function Z7(t,e,r){let n=t.parent;for(;n!=null;){let i=n.namedChildren.flatMap(o=>r(e,o)).filter(o=>o!=null);if(i.length>0)return i;n=n.parent}return[]}var qa=class{constructor(e,r){this.languageDefinitions=e;this.modifier=r}run(e){let r=ZD(e.editor.document.languageId,this.modifier.scopeType.type,this.modifier.type==="everyScope"),n=this.languageDefinitions.getNodeAtLocation(e.editor.document,e.contentRange);if(n==null)throw new Rt(this.modifier.scopeType.type);let i=Y7(n,r,{editor:e.editor,selection:new Te(e.contentRange.start,e.contentRange.end)});if(i==null)throw new Rt(this.modifier.scopeType.type);return i.map(o=>{let{containingListDelimiter:a,leadingDelimiterRange:l,trailingDelimiterRange:p,removalRange:u,interiorRange:d}=o.context;if(u!=null&&(l!=null||p!=null))throw Error("Removal range is mutually exclusive with leading or trailing delimiter range");let{editor:h,selection:g}=o.selection;return new uo({scopeTypeType:this.modifier.scopeType.type,editor:h,isReversed:e.isReversed,contentRange:g,removalRange:u,interiorRange:d,insertionDelimiter:a,leadingDelimiterRange:l,trailingDelimiterRange:p})})}};function Y7(t,e,r){let n=t;for(;n!=null;){let i=e(r,n);if(i!=null)return i.map(o=>o.selection).map(o=>({selection:vd(r,o.selection),context:o.context}));n=n.parent}return null}function XD(t,e){let r=JD(t,e);for(;r!=null;){if(X7(t,e,r))return{range:r.getInterior()[0].contentRange,boundary:kv(r)};r=J7(t,e.editor,r)}return{range:_l(e.editor,e.contentRange)}}function X7(t,e,r){let{contentRange:n}=e;if(n.isEmpty){let[o,a]=kv(r),l=n.start;if(l.isEqual(o.start)||l.isEqual(a.end))return!1;let p=e.editor.document.lineAt(l);if(l.isEqual(o.end)&&YD(p,l.character)||l.isEqual(a.start)&&YD(p,l.character-1))return!1}else{if(n.isRangeEqual(r.contentRange))return!1;let[o,a]=kv(r);if(n.isRangeEqual(o)||n.isRangeEqual(a))return!1}let i=eQ(t,r);return!(i!=null&&r.contentRange.start.isBeforeOrEqual(i.contentRange.start))}function kv(t){return t.getBoundary().map(e=>e.contentRange)}function YD(t,e){return e<t.range.start.character||e>=t.range.end.character||t.text[e].trim()===""}function J7(t,e,r){let n=e.document.offsetAt(r.contentRange.start);if(n===0)return;let i=e.document.positionAt(n-1);return JD(t,new He({editor:e,contentRange:new W(i,i),isReversed:!1}))}function JD(t,e){return eI(t,e,{type:"surroundingPair",delimiter:"collectionBoundary",requireStrongContainment:!0})}function eQ(t,e){return eI(t,e,{type:"surroundingPair",delimiter:"string",requireStrongContainment:!0})}function eI(t,e,r){let n=t.create({type:"containingScope",scopeType:r}),i=(()=>{try{return n.run(e)}catch{return[]}})();if(i.length>1)throw Error("Expected only one surrounding pair target");return i[0]}function tI(t,e,r){let{document:n}=t,o=n.getText(e).split(/([,(){}<>[\]"'`])|(?<!\\)(\\"|\\'|\\`)/g).filter(u=>u!=null&&u.length>0),a=tQ(o),l=[],p=n.offsetAt(e.start);return a.forEach(u=>{if(u.trim().length===0){p+=u.length;return}if(u===rI)l.push({type:"separator",range:new W(n.positionAt(p),n.positionAt(p+u.length))});else{let d=p+(u.length-u.trimStart().length);l.push({type:"item",range:new W(n.positionAt(d),n.positionAt(d+u.trim().length))})}p+=u.length}),r!=null?[{type:"boundary",range:r[0]},...l,{type:"boundary",range:r[1]}]:l}function tQ(t){let e=[],r=0,n=null,i=null,o=-1;return t.forEach((a,l)=>{r>0?a===i?--r:a===n&&++r:(Pv[a]!=null&&t.indexOf(Pv[a],l+1)>-1&&(n=a,i=Pv[a],r=1),o<0&&(o=l));let p=a===rI&&r===0;if(p||l===t.length-1){let u=p?l:l+1;e.push(t.slice(o,u).join("")),o=-1,p&&e.push(a)}}),e}var rI=",",Pv={"(":")","{":"}","<":">","[":"]",'"':'"',"'":"'","`":"`"};var Zm=class{constructor(e,r,n){this.languageDefinitions=e;this.modifierStageFactory=r;this.modifier=n}run(e){try{return new qa(this.languageDefinitions,this.modifier).run(e)}catch{}return this.modifier.type==="everyScope"?this.getEveryTarget(this.modifierStageFactory,e):[this.getSingleTarget(this.modifierStageFactory,e)]}getEveryTarget(e,r){let n=iI(e,r),i=r.hasExplicitRange?nI(r,n):n;if(i.length===0)throw new Rt(this.modifier.scopeType.type);return i.map(o=>this.itemInfoToTarget(r,o))}getSingleTarget(e,r){let n=iI(e,r),i=nI(r,n);if(i.length===0)throw new Rt(this.modifier.scopeType.type);let o=i[0],a=i[i.length-1],l={contentRange:o.contentRange.union(a.contentRange),domain:o.domain.union(a.domain),leadingDelimiterRange:o.leadingDelimiterRange,trailingDelimiterRange:a.trailingDelimiterRange},p=l.leadingDelimiterRange!=null&&l.trailingDelimiterRange!=null&&bS(r.editor,l.leadingDelimiterRange)>bS(r.editor,l.trailingDelimiterRange)?l.contentRange.union(l.leadingDelimiterRange):void 0;return this.itemInfoToTarget(r,l,p)}itemInfoToTarget(e,r,n){let i=rQ(r.leadingDelimiterRange,r.trailingDelimiterRange);return new uo({scopeTypeType:this.modifier.scopeType.type,editor:e.editor,isReversed:e.isReversed,contentRange:r.contentRange,insertionDelimiter:i,leadingDelimiterRange:r.leadingDelimiterRange,trailingDelimiterRange:r.trailingDelimiterRange,removalRange:n})}};function rQ(t,e){return t!=null&&!t.isSingleLine||e!=null&&!e.isSingleLine?`,
`:", "}function nI(t,e){return e.filter(r=>r.domain.intersection(t.contentRange)!=null)}function iI(t,e){let{range:r,boundary:n}=XD(t,e);return nQ(e.editor,r,n)}function nQ(t,e,r){let n=tI(t,e,r),i=[];return n.forEach((o,a)=>{if(o.type==="separator"||o.type==="boundary")return;let l=(()=>{if(n[a-2]?.type==="item")return new W(n[a-2].range.end,o.range.start);if(n[a-1]?.type==="separator")return new W(n[a-1].range.start,o.range.start)})(),p=(()=>{if(n[a+2]?.type==="item")return new W(o.range.end,n[a+2].range.start);if(n[a+1]?.type==="separator")return new W(o.range.end,n[a+1].range.end)})(),u=n[a-1]?.type==="boundary"||n[a-1]?.type==="separator"?n[a-1].range.end:o.range.start,d=n[a+1]?.type==="boundary"||n[a+1]?.type==="separator"?n[a+1].range.start:o.range.end;i.push({contentRange:o.range,leadingDelimiterRange:l,trailingDelimiterRange:p,domain:new W(u,d)})}),i}var ti={type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:{type:"line"}}},Mv={type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:{type:"token"}}};var Ym=class extends Error{constructor(e){super(`Target has no ${e} delimiter.`),this.name="NoDelimiterError"}},Xm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){return this.modifierStageFactory.create(Mv).run(e).map(r=>{let n=r.getLeadingDelimiterTarget();if(n==null)throw new Ym("leading");return n})}},Jm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){return this.modifierStageFactory.create(Mv).run(e).map(r=>{let n=r.getTrailingDelimiterTarget();if(n==null)throw new Ym("trailing");return n})}};function eh(t,e,r,n){return yv(e,r,n),r===n?e[r]:Ba(t,e[r],e[n],!0,!0)}function th(t,e,r){return t.create({type:"everyScope",scopeType:r}).run(e)}var rh=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=th(this.modifierStageFactory,e,this.modifier.scopeType),n=this.modifier.start+(this.modifier.start<0?r.length:0),i=n+this.modifier.length-1;return this.modifier.isEvery?RD(r,n,i):[eh(e.isReversed,r,n,i)]}};var nh=class{run(e){let r={editor:e.editor,isReversed:e.isReversed,contentRange:this.getContentRange(e.contentRange)};return[e.isRaw?new po(r):new He({...r,isToken:!1})]}},ih=class extends nh{getContentRange(e){return e.start.toEmptyRange()}},oh=class extends nh{getContentRange(e){return e.end.toEmptyRange()}};var sh=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let{scopeType:r}=this.modifier,n=new Ha(this.modifierStageFactory,this.scopeHandlerFactory,{type:"containingScope",scopeType:r});try{return n.run(e)}catch(a){if(!(a instanceof Rt))throw a}let i=this.scopeHandlerFactory.create(this.modifier.scopeType,e.editor.document.languageId),o=iQ(e,i);if(o==null)throw Error(`No scopes found for scope type: ${r.type}`);return o}};function iQ(t,e){let r=e.generateScopes(t.editor,t.contentRange.start,"backward"),n=e.generateScopes(t.editor,t.contentRange.end,"forward"),{active:i}=t.contentSelection,o=oI(r,i),a=oI(n,i),l=o.distance<a.distance?o.scope:a.scope;return l?.getTargets(t.isReversed)}function oI(t,e){let r,n=1/0;for(let i of t){let o=Math.min(sI(e,i.domain.start),sI(e,i.domain.end));if(o<n)r=i,n=o;else break}return{scope:r,distance:n}}function sI(t,e){return Math.abs(t.line-e.line)*1e4+Math.abs(t.character-e.character)}var ah=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=this.modifierStageFactory.create(this.modifier.anchor),n=this.modifierStageFactory.create(this.modifier.active),i=r.run(e),o=n.run(e);if(i.length!==1||o.length!==1)throw new Error("Expected single anchor and active target");return[xo(i[0],o[0],this.modifier.excludeAnchor,this.modifier.excludeActive)]}};var ch=class{constructor(e){this.modifier=e}run(e){return[new po({editor:e.editor,contentRange:e.contentRange,isReversed:e.isReversed})]}};var lh=class extends Error{constructor(e,r,n){super(`Requested ${e} ${n}s, but ${r} are already selected.`),this.name="TooFewScopesError"}};function aI(t,e,r){let n=th(t,cQ(r),e.scopeType),i=aQ(r.contentRange,n);return oQ(e,r,n,i)}function oQ(t,e,r,n){let i=t.direction==="forward",o=sQ(t,e.contentRange,r,i,n),a=i?o+t.length-1:o-t.length+1,l=Math.min(o,a),p=Math.max(o,a);return[eh(e.isReversed,r,l,p)]}function sQ(t,e,r,n,i){let o=t.offset===0;if(i==null){let p=n?r.findIndex(u=>u.contentRange.start.isAfter(e.start)):Bc(r,u=>u.contentRange.start.isBefore(e.start));if(p===-1)throw new Ii;return o?p:n?p+t.offset-1:p-t.offset+1}let a=i.start,l=i.end;if(o){let p=l-a+1;if(p>t.length)throw new lh(t.length,p,t.scopeType.type);return n?a:l}return n?l+t.offset:a-t.offset}function aQ(t,e){let r=e.map((i,o)=>({index:o,intersection:i.contentRange.intersection(t)})).filter(i=>i.intersection!=null);if(t.isEmpty){if(r.length===0)return;let i=r.at(-1).index;return{start:i,end:i}}let n=r.filter(i=>!i.intersection.isEmpty).map(i=>i.index);if(n.length!==0)return{start:n[0],end:n.at(-1)}}function cQ(t){return new Pt({editor:t.editor,isReversed:t.isReversed,contentRange:t.contentRange,hasExplicitRange:!1})}var ph=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let r=this.scopeHandlerFactory.maybeCreate(this.modifier.scopeType,e.editor.document.languageId);if(r==null)return aI(this.modifierStageFactory,this.modifier,e);let n=Array.from(this.modifier.offset===0?lQ(r,e,this.modifier):pQ(r,e,this.modifier));if(n.length<this.modifier.length)throw new Ii;let{isReversed:i}=e;return this.modifier.isEvery?n.flatMap(o=>o.getTargets(i)):Lm(i,n[0],n[n.length-1])}};function lQ(t,e,r){let{editor:n,contentRange:i}=e,{length:o,direction:a}=r,l=Um(t,n,a==="forward"?i.start:i.end,a)?.domain;if(l==null)throw new Rt(r.scopeType.type);return wl(o,t.generateScopes(n,a==="forward"?l.start:l.end,a,{skipAncestorScopes:!0}))}function pQ(t,e,r){let{editor:n,contentRange:i}=e,{length:o,direction:a,offset:l}=r,p=a==="forward"?i.end:i.start,u=i.isEmpty?"disallowed":"disallowedIfStrict";return mA(t.generateScopes(n,p,a,{containment:u,skipAncestorScopes:!0}),l-1,l+o-1)}var uh=class{constructor(e){this.modifier=e}run(e){return e.editor.visibleRanges.map(r=>new He({editor:e.editor,isReversed:e.isReversed,contentRange:r}))}};var fh=class{constructor(e){this.modifier=e}run(e){if(this.modifier.type==="everyScope")throw new Error(`Every ${this.modifier.type} not yet implemented`);return[new Rd({editor:e.editor,isReversed:e.isReversed,contentRange:e.contentRange})]}};var za=class{constructor(e,r,n){this.languageDefinitions=e;this.storedTargets=r;this.scopeHandlerFactory=n;this.create=this.create.bind(this)}create(e){switch(e.type){case"startOf":return new ih;case"endOf":return new oh;case"extendThroughStartOf":case"extendThroughEndOf":return new qm(this,e);case"toRawSelection":return new ch(e);case"interiorOnly":return new zm(this,e);case"excludeInterior":return new Gm(this,e);case"leading":return new Xm(this,e);case"trailing":return new Jm(this,e);case"visible":return new uh(e);case"containingScope":return new Ha(this,this.scopeHandlerFactory,e);case"preferredScope":return new sh(this,this.scopeHandlerFactory,e);case"everyScope":return e.scopeType.type==="instance"?new Wa(this,this.storedTargets,e):new Bm(this,this.scopeHandlerFactory,e);case"ordinalScope":return e.scopeType.type==="instance"?new Wa(this,this.storedTargets,e):new rh(this,e);case"relativeScope":return e.scopeType.type==="instance"?new Wa(this,this.storedTargets,e):new ph(this,this.scopeHandlerFactory,e);case"keepContentFilter":return new Hm(e);case"keepEmptyFilter":return new Wm(e);case"cascading":return new Om(this,e);case"modifyIfUntyped":return new Ua(this,e);case"range":return new ah(this,e);case"inferPreviousMark":throw Error(`Unexpected modifier '${e.type}'; it should have been removed during inference`);default:{let r=e,{type:n}=e;throw new Error(`Unknown modifier: ${n}`)}}}getLegacyScopeStage(e){switch(e.scopeType.type){case"notebookCell":return new fh(e);case"collectionItem":return new Zm(this.languageDefinitions,this,e);default:return new qa(this.languageDefinitions,e)}}};async function cI(t,e,r){let n=t.registerReplaceEditList(e.document,r.filter(o=>o.isReplace)),i=await e.edit(r);return n(),i}async function Fe({rangeUpdater:t,editor:e,selections:r,preserveCursorSelections:n,...i}){let o=wi(r),a=o.map(u=>{let d=r[u],h=uQ(d);return lI(e.document,h.selections,h.behavior)});n||a.push(lI(e.document,e.selections,1));let l=await("edits"in i?mQ(t,e,i.edits,a):pI(t,i.callback,e.document,a));return n||await e.setSelections(l.pop()),Object.fromEntries(o.map((u,d)=>[u,l[d]]))}function lI(t,e,r){return e.map(n=>fQ(t,n,n instanceof Te?!n.isReversed:!0,r))}function uQ(t){return"selections"in t?t:{selections:t,behavior:1}}function fQ(t,e,r,n){return{range:e,isForward:r,expansionBehavior:{start:{type:n===1||n===3?"closed":"open"},end:{type:n===1||n===2?"closed":"open"}},offsets:{start:t.offsetAt(e.start),end:t.offsetAt(e.end)},text:t.getText(e)}}function dQ(t){return t.map(e=>e.map(({range:{start:r,end:n},isForward:i})=>i?new Te(r,n):new Te(n,r)))}async function pI(t,e,r,n){let i=t.registerRangeInfoList(r,Je(n));return await e(),i(),dQ(n)}async function mQ(t,e,r,n){return await pI(t,async()=>{if(!await cI(t,e,r))throw new Error("Could not apply edits")},e.document,n)}function wr(t){if(t.length===0)throw new Error("Require at least one target with this action");let e=t.map(r=>r.editor);if(new Set(e).size>1)throw new Error("Can only have one editor with this action");return e[0]}function _r(t){if(t.length!==1)throw new Error("Can only have one target with this action");return t[0]}async function Ci(t,e,r){return Promise.all(Av(t,e).map(([n,i])=>r(n,i)))}async function rt(t,e){return Ci(t,r=>r.editor,e)}async function uI(t,e){let r=Av(t,i=>i.editor),n=[];for(let[i,o]of r)n.push(await e(i,o));return n}function fI(t){return Av(t,e=>e.editor)}function Av(t,e){let n=sl(t,i=>e(i).document.uri);return Array.from(n.values(),i=>[e(i[0]),i])}function dh(t){return t.contentRange}function dn(t,e){return e!=null?St(t,e).map(([n,i])=>({editor:n.editor,selection:n?.isReversed?new Te(i.end,i.start):new Te(i.start,i.end)})):t.map(n=>({editor:n.editor,selection:n.contentSelection}))}function dI(t){let e=t.contentRange;return t.isLine?on(e):vt(e)}function Ne(t,e,r,n=dh){return t.flashRanges(e.map(i=>{let o=n(i);return o==null?null:{editor:i.editor,range:i.isLine?on(o):vt(o),style:r}}).filter(i=>i!=null))}var mh=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e){return await Ne(D(),e,"pendingModification0"),{thatSelections:Je(await rt(e,async(n,i)=>{let o=i.map(({contentRange:u})=>u),a=hQ(n,o),l=D().getEditableTextEditor(n),{contentRanges:p}=await Fe({rangeUpdater:this.rangeUpdater,editor:l,edits:a,selections:{contentRanges:o}});return St(i,p).map(([u,d])=>({editor:u.editor,selection:d.toSelection(u.isReversed)}))}))}}};function hQ(t,e){let{document:r}=t,n=[];for(let i of e){let o=i.start,a=r.lineAt(o),l=a.text.slice(0,a.rangeTrimmed?.start?.character??a.range.start.character),p=a.text.slice(0,o.character).search(/\s+$/),u=p>-1?new W(new ce(a.lineNumber,p),o):o.toEmptyRange();n.push({range:u,text:`
`+l,isReplace:!u.isEmpty})}return n}function hh(t){return t.length<2?t:fI(t).flatMap(([e,r])=>{if(r.length<2)return r;let n=[...r];n.sort((o,a)=>o.contentRange.start.compareTo(a.contentRange.start));let i=!0;for(;i;)[n,i]=gQ(n);return n})}function gQ(t){if(t.length<2)return[t,!1];let e=[],r=[];return t.forEach(n=>{r.length&&!yQ(r[r.length-1],n)?(e.push(mI(r)),r=[n]):r.push(n)}),e.push(mI(r)),[e,e.length!==t.length]}function mI(t){if(t.length===1)return t[0];let e=t[0],r=t[t.length-1];return xo(e,r)}function yQ(t,e){return!!t.getRemovalRange().intersection(e.getRemovalRange())}var Ul=class{constructor(e,r){this.rangeUpdater=e;this.type=r}async decorateTargets(e,r){await Promise.all([Ne(D(),e,this.decoration.sourceStyle,this.decoration.getSourceRangeCallback),Ne(D(),r,this.decoration.destinationStyle)])}getEditsBringMove(e,r){let n=[],i=[],o=e.length!==r.length&&r.length===1;return e.forEach((a,l)=>{let p=r[l];if((a==null||p==null)&&!o)throw new Error("Targets must have same number of args");if(p!=null){let u;o?u=e.map((d,h)=>{let g=d.contentText,x=(p.isRaw?null:p.insertionDelimiter)??(d.isRaw?null:d.insertionDelimiter);return h>0&&x!=null?x+g:g}).join(""):u=a.contentText,i.push({edit:p.constructChangeEdit(u),editor:p.editor,originalTarget:p.target,isSource:!1})}else p=r[0];n.includes(a)||(n.push(a),this.type==="bring"&&i.push({edit:a.toDestination("to").constructChangeEdit(p.target.contentText),editor:a.editor,originalTarget:a,isSource:!0}))}),this.type==="move"&&hh(n).forEach(a=>{i.push({edit:a.constructRemovalEdit(),editor:a.editor,originalTarget:a,isSource:!0})}),i}async performEditsAndComputeThatMark(e){return Je(await Ci(e,r=>r.editor,async(r,n)=>{let i=this.type!=="bring"?n:n.filter(({isSource:x})=>!x),o=this.type==="swap"?[]:n.filter(({isSource:x})=>x),a=this.type==="swap"?n:n.filter(({isSource:x})=>!x),l=o.map(({edit:x})=>x.range),p=a.map(({edit:x})=>x.range),u=D().getEditableTextEditor(r),{sourceEditRanges:d,destinationEditRanges:h}=await Fe({rangeUpdater:this.rangeUpdater,editor:u,edits:i.map(({edit:x})=>x),selections:{sourceEditRanges:l,destinationEditRanges:{selections:p,behavior:0}}}),g=[...this.getMarks(o,d),...this.getMarks(a,h)];return g.sort((x,_)=>n.findIndex(w=>w.originalTarget===x.target)-n.findIndex(w=>w.originalTarget===_.target)),g}))}getMarks(e,r){return e.map((n,i)=>{let o=r[i],a=n.edit.updateRange(o),l=n.originalTarget;return{editor:n.editor,selection:a.toSelection(l.isReversed),isSource:n.isSource,target:l}})}async decorateThatMark(e){let r=n=>e.find(i=>i.target===n).selection;return Promise.all([Ne(D(),e.filter(({isSource:n})=>n).map(({target:n})=>n),this.decoration.sourceStyle,r),Ne(D(),e.filter(({isSource:n})=>!n).map(({target:n})=>n),this.decoration.destinationStyle,r)])}calculateMarksBringMove(e){return{thatMark:e.filter(({isSource:r})=>!r),sourceMark:e.filter(({isSource:r})=>r)}}};function hI(t,e){return t.length===1?Array(e.length).fill(t[0]):t}var gh=class extends Ul{constructor(r){super(r,"bring");this.decoration={sourceStyle:"referenced",destinationStyle:"pendingModification0",getSourceRangeCallback:dh};this.run=this.run.bind(this)}async run(r,n){r=hI(r,n),await this.decorateTargets(r,n.map(p=>p.target));let i=this.getEditsBringMove(r,n),o=await this.performEditsAndComputeThatMark(i),{thatMark:a,sourceMark:l}=this.calculateMarksBringMove(o);return await this.decorateThatMark(a),{thatSelections:a,sourceSelections:l}}},yh=class extends Ul{constructor(r){super(r,"move");this.decoration={sourceStyle:"pendingDelete",destinationStyle:"pendingModification0",getSourceRangeCallback:xQ};this.run=this.run.bind(this)}async run(r,n){r=hI(r,n),await this.decorateTargets(r,n.map(p=>p.target));let i=this.getEditsBringMove(r,n),o=await this.performEditsAndComputeThatMark(i),{thatMark:a,sourceMark:l}=this.calculateMarksBringMove(o);return await this.decorateThatMark(a),{thatSelections:a,sourceSelections:l}}},xh=class extends Ul{constructor(r){super(r,"swap");this.decoration={sourceStyle:"pendingModification1",destinationStyle:"pendingModification0",getSourceRangeCallback:dh};this.run=this.run.bind(this)}async run(r,n){await this.decorateTargets(r,n);let i=this.getEditsSwap(r,n),o=await this.performEditsAndComputeThatMark(i);return await this.decorateThatMark(o),{thatSelections:o,sourceSelections:[]}}getEditsSwap(r,n){let i=[];return r.forEach((o,a)=>{let l=n[a];if(o==null||l==null)throw new Error("Targets must have same number of args");i.push({edit:l.toDestination("to").constructChangeEdit(o.contentText),editor:l.editor,originalTarget:l,isSource:!1}),i.push({edit:o.toDestination("to").constructChangeEdit(l.contentText),editor:o.editor,originalTarget:o,isSource:!0})}),i}};function xQ(t){return t.getRemovalHighlightRange()}var Vl=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e,r){_r(e);let{returnValue:n}=await this.actions.getText.run(e,{showDecorations:!1}),{thatSelections:i}=await this.actions.wrapWithPairedDelimiter.run(r,n[0]+"(",")");return{thatSelections:i}}};var Bl=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){let r=wr(e),n=e.map(o=>new He({editor:o.editor,isReversed:o.isReversed,contentRange:o.contentRange})),{thatTargets:i}=await this.actions.remove.run(n);return i!=null&&await D().getEditableTextEditor(r).setSelections(i.map(({contentSelection:o})=>o),{focusEditor:!0}),{thatTargets:i}}};var Ga=t=>new Pt({editor:t.editor,isReversed:t.selection.isReversed,contentRange:t.selection,hasExplicitRange:!0});var Ka=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e,r){r.showDecorations&&await Ne(D(),e,"referenced"),r.ensureSingleEditor&&wr(e),r.ensureSingleTarget&&_r(e);let n=D().activeEditableTextEditor,i=r.setSelection?uI:rt,o=Je(await i(e,(a,l)=>this.runForEditor(r,a,l)));return r.setSelection&&r.restoreSelection&&n!=null&&!n.isActive&&await n.focus(),{thatTargets:o}}async runForEditor(e,r,n){let i=D().getEditableTextEditor(r),o=r.selections,a=r.document.version,l=n.map(d=>d.contentSelection);e.setSelection&&await i.setSelections(l,{focusEditor:!0,revealRange:!1});let{originalSelections:p,targetSelections:u}=await Fe({rangeUpdater:this.rangeUpdater,editor:i,callback:()=>e.callback(i,n),preserveCursorSelections:!0,selections:{originalSelections:o,targetSelections:l}});return e.setSelection&&e.restoreSelection&&await i.setSelections(p),r.document.version===a?n:u.map(d=>Ga({editor:r,selection:d}))}};var zt=class{constructor(e){this.ensureSingleEditor=!1;this.ensureSingleTarget=!1;this.restoreSelection=!0;this.showDecorations=!0;this.callbackAction=new Ka(e),this.run=this.run.bind(this)}async run(e,{showDecorations:r}={}){let n=D().capabilities.commands[this.command];if(n==null)throw Error(`Action ${this.command} is not supported by your ide`);let{acceptsLocation:i}=n;return this.callbackAction.run(e,{callback:(o,a)=>TQ(o,i?a.map(l=>l.contentRange):void 0,this.command),setSelection:!i,ensureSingleEditor:this.ensureSingleEditor,ensureSingleTarget:this.ensureSingleTarget,restoreSelection:this.restoreSelection,showDecorations:r??this.showDecorations})}},Th=class extends zt{constructor(){super(...arguments);this.command="clipboardCopy";this.ensureSingleEditor=!0}},Sh=class extends zt{constructor(){super(...arguments);this.command="toggleLineComment"}},vh=class extends zt{constructor(){super(...arguments);this.command="indentLine"}},bh=class extends zt{constructor(){super(...arguments);this.command="outdentLine"}},wh=class extends zt{constructor(){super(...arguments);this.command="fold"}},_h=class extends zt{constructor(){super(...arguments);this.command="unfold"}},Eh=class extends zt{constructor(){super(...arguments);this.command="rename";this.ensureSingleTarget=!0}},Rh=class extends zt{constructor(){super(...arguments);this.command="showReferences";this.ensureSingleTarget=!0}},kh=class extends zt{constructor(){super(...arguments);this.command="quickFix";this.ensureSingleTarget=!0}},Ph=class extends zt{constructor(){super(...arguments);this.command="revealDefinition";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Mh=class extends zt{constructor(){super(...arguments);this.command="revealTypeDefinition";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Ah=class extends zt{constructor(){super(...arguments);this.command="showHover";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Dh=class extends zt{constructor(){super(...arguments);this.command="showDebugHover";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Ih=class extends zt{constructor(){super(...arguments);this.command="extractVariable";this.ensureSingleTarget=!0;this.restoreSelection=!1}};function TQ(t,e,r){switch(r){case"toggleLineComment":return t.toggleLineComment(e);case"indentLine":return t.indentLine(e);case"outdentLine":return t.outdentLine(e);case"clipboardCopy":return t.clipboardCopy(e);case"fold":return t.fold(e);case"unfold":return t.unfold(e);case"insertLineAfter":return t.insertLineAfter(e);case"rename":return t.rename(e?.[0]);case"showReferences":return t.showReferences(e?.[0]);case"quickFix":return t.quickFix(e?.[0]);case"revealDefinition":return t.revealDefinition(e?.[0]);case"revealTypeDefinition":return t.revealTypeDefinition(e?.[0]);case"showHover":return t.showHover(e?.[0]);case"showDebugHover":return t.showDebugHover(e?.[0]);case"extractVariable":return t.extractVariable(e?.[0]);case"highlight":throw Error("Highlight command not supported as simple action")}}var Fh=class{constructor(e,r){this.actions=e;this.rangeUpdater=r;this.run=this.run.bind(this)}async run(e,r={showDecorations:!0}){if(D().capabilities.commands.clipboardCopy!=null)return new Th(this.rangeUpdater).run(e,r);r.showDecorations&&await Ne(D(),e,"referenced",i=>i.contentRange);let n=e.map(i=>i.contentText).join(`
`);return await D().clipboard.writeText(n),{thatTargets:e}}};var Ch=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){await D().flashRanges(e.flatMap(i=>{let{editor:o,contentRange:a}=i,l=i.getRemovalHighlightRange();return i.isLine?[{editor:o,range:vt(a),style:"referenced"},{editor:o,range:on(l),style:"pendingDelete"}]:[{editor:o,range:vt(a),style:"referenced"},...SQ(a,l).map(p=>({editor:o,range:vt(p),style:"pendingDelete"}))]}));let r={showDecorations:!1};await this.actions.copyToClipboard.run(e,r);let{thatTargets:n}=await this.actions.remove.run(e,r);return{thatTargets:n}}};function SQ(t,e){let{start:r,end:n}=t,{start:i,end:o}=e,a=[];return i.isBefore(r)&&a.push(new W(i,r)),o.isAfter(n)&&a.push(new W(n,o)),a}var Hl=class{constructor(){this.run=this.run.bind(this)}async run(e){return await rt(e,async(r,n)=>{let i=r.selections.filter(o=>!n.some(a=>{let l=a.contentRange.intersection(o);return l&&(!l.isEmpty||o.isEmpty)}));if(i.length===0)throw new Dv;await D().getEditableTextEditor(r).setSelections(i)}),{thatTargets:e}}},Dv=class extends Error{constructor(){super("Can't deselect every selection. At least one is required"),this.name="SelectionRequiredError"}};async function gI(t,e,r,n){let i=r.destinations.map((_,w)=>{if(n||_.getEditNewActionType()==="edit")return{destination:_,index:w}}).filter(_=>!!_);if(i.length===0)return r;let o=i.map(_=>_.destination.constructChangeEdit("")),a=r.cursorRanges.map((_,w)=>({range:_,index:w})).filter(({range:_})=>_!=null),l=a.map(({index:_})=>_),p=a.map(({range:_})=>_),u=o.map(_=>_.range),{thatRanges:d,cursorRanges:h,editRanges:g}=await Fe({rangeUpdater:t,editor:e,edits:o,preserveCursorSelections:!0,selections:{thatRanges:r.thatRanges,cursorRanges:p,editRanges:{selections:u,behavior:0}}}),x=[...r.cursorRanges];return St(l,h).forEach(([_,w])=>{x[_]=w}),i.forEach((_,w)=>{let M=o[w].updateRange(g[w]);x[_.index]=M}),{destinations:r.destinations,thatRanges:d,cursorRanges:x}}async function yI({acceptsLocation:t},e,r,n){let i=n.destinations.map((h,g)=>{if(h.getEditNewActionType()==="insertLineAfter")return{destination:h,index:g}}).filter(h=>!!h);if(i.length===0)return n;let o=i.map(({destination:h})=>h.contentRange),a=n.destinations.map(({contentRange:h})=>h),l=async()=>{t?await r.insertLineAfter(o):(await r.setSelections(o.map(h=>h.toSelection(!1))),await r.focus(),await r.insertLineAfter())},{targetRanges:p,thatRanges:u}=await Fe({rangeUpdater:e,editor:r,callback:l,preserveCursorSelections:!0,selections:{targetRanges:a,thatRanges:n.thatRanges}}),d=[...n.cursorRanges];return i.forEach((h,g)=>{d[h.index]=r.selections[g]}),{destinations:n.destinations.map((h,g)=>h.withTarget(h.target.withContentRange(p[g]))),thatRanges:u,cursorRanges:d}}async function xI(t,e){let r=_r(e),n=D().getEditableTextEditor(r.editor),i=r.insertionMode==="before";if(r.insertionMode==="to")throw Error(`Unsupported insertion mode '${r.insertionMode}' for notebookcapell`);await t.setSelection.run([r.target]);let o=l=>l;i?o=await n.editNewNotebookCellAbove():await n.editNewNotebookCellBelow();let a=dn([r.target.thatTarget]);return a[0].selection=o(a[0].selection),{thatSelections:a}}var Oh=class{constructor(e,r){this.rangeUpdater=e;this.actions=r;this.run=this.run.bind(this)}async run(e){if(e.some(({target:l})=>l.isNotebookCell))return xI(this.actions,e);let r=D().getEditableTextEditor(wr(e)),n={destinations:e,thatRanges:e.map(({target:l})=>l.thatTarget.contentRange),cursorRanges:new Array(e.length).fill(void 0)},i=D().capabilities.commands.insertLineAfter,o=i!=null;o&&(n=await yI(i,this.rangeUpdater,r,n)),n=await gI(this.rangeUpdater,r,n,!o);let a=n.destinations.map((l,p)=>n.cursorRanges[p].toSelection(l.target.isReversed));return await r.setSelections(a,{focusEditor:!0}),{thatSelections:dn(n.destinations.map(l=>l.target),n.thatRanges)}}};var Nh=class{constructor(e,r){this.actions=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(ti)]}run(e){return this.actions.editNew.run(e.map(r=>r.toDestination(this.insertionMode)))}},Lh=class extends Nh{constructor(){super(...arguments);this.insertionMode="before"}},Uh=class extends Nh{constructor(){super(...arguments);this.insertionMode="after"}};var Wl=class{constructor(e){this.callbackAction=new Ka(e),this.run=this.run.bind(this)}async run(e,r,{commandArgs:n,ensureSingleEditor:i,ensureSingleTarget:o,restoreSelection:a,showDecorations:l}={}){let p=n??[];return this.callbackAction.run(e,{callback:()=>D().executeCommand(r,...p),setSelection:!0,ensureSingleEditor:i??!1,ensureSingleTarget:o??!1,restoreSelection:a??!0,showDecorations:l??!0})}};var Vh=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){_r(e);let{returnValue:r,thatTargets:n}=await this.actions.getText.run(e),[i]=r,o;return i.length>200?(o=i.substring(0,200),Kc(D().messages,"truncatedSearchText","Search text is longer than 200 characters; truncating")):o=i,await this.find(o),{thatTargets:n}}},Bh=class extends Vh{find(e){return D().findInDocument(e)}},Hh=class extends Vh{find(e){return D().findInWorkspace(e)}};var Qa=class{constructor(e){this.options=e;this.run=this.run.bind(this)}async run(e){let r=_r(e);return await Ne(D(),e,"referenced"),await D().getEditableTextEditor(r.editor).openLink(r.contentRange,this.options),{thatSelections:dn(e)}}};function TI(t,e){let r=[],n=0,i=null,[o,...a]=t.split(/\r?\n/);return[{text:e+o,startIndex:e.length},...a.map(p=>({text:p,startIndex:0}))].forEach(({text:p,startIndex:u})=>{let d=p.match(/^\s*/)?.[0]??"",h=d.length;i!=null&&(d.length>i.length?n++:d.length<i.length&&n--),i=d;let g=Math.max(h,u),x=gT("	",n),_=p.slice(g);r.push(x+_)}),r}function SI(t,e){let r=xT(e,o=>o.offsets.start),n="",i=0;for(let o of r)n+=t.slice(i,o.offsets.start)+o.text,i=o.offsets.end;return n+=t.slice(i),n}var $l=class{constructor(){this.substitutions=[]}addSubstitution(e,r=!1){let n=vQ(10);return this.substitutions.push({to:e,randomId:n,isQuoted:r}),n}makeSubstitutions(e){return this.substitutions.forEach(({to:r,randomId:n,isQuoted:i})=>{let o=i?`"${n}"`:n;e=e.split(o).join(r)}),e}};function vQ(t){let e="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=r.length;for(let i=0;i<t;i++)e+=r.charAt(Math.floor(Math.random()*n));return e}var Za=class{constructor(e){this.snippets=e;this.run=this.run.bind(this)}async run(e,r){let n=_r(e),i=n.editor;if(Ne(D(),e,"referenced"),r==null&&(r=await D().showInputBox({prompt:"Name of snippet",placeHolder:"helloWorld"})),r==null)return{};let o=1,a=i.document.offsetAt(n.contentRange.start),l=i.selections.filter(M=>n.contentRange.contains(M)).map((M,U)=>({offsets:{start:i.document.offsetAt(M.start)-a,end:i.document.offsetAt(M.end)-a},defaultName:`variable${U+1}`,placeholderIndex:o++})),p=new $l,u=i.document.getText(new W(n.contentRange.start.with(void 0,0),n.contentRange.start)),d=i.document.getText(n.contentRange),h=SI(d,[...jn(d,/\$|\\/g,M=>({offsets:{start:M.index,end:M.index+M[0].length},text:M[0]==="\\"?`\\${M[0]}`:`\\\\${M[0]}`})),...l.map(({offsets:M,defaultName:U,placeholderIndex:Z})=>({offsets:M,text:p.addSubstitution(["\\$","${",Z,":",U,"}"].join(""))}))]),g=TI(h,u),x=({placeholderIndex:M})=>{let U="$"+M,Z=p.addSubstitution("{$"+o+++"}",!0);return[U,Z]},_={[r]:{definitions:[{scope:{langIds:[i.document.languageId]},body:g}],description:"$"+o++,variables:l.length===0?void 0:Object.fromEntries(l.map(x))}},w=p.makeSubstitutions(JSON.stringify(_,null,2)),C=D().getEditableTextEditor(i);return D().runMode==="test"?await C.setSelections([i.document.range.toSelection(!1)]):await this.snippets.openNewSnippetFile(r),await C.insertSnippet(w),{thatSelections:e.map(({editor:M,contentSelection:U})=>({editor:M,selection:U}))}}};var jl=class{constructor(){this.run=this.run.bind(this)}async run(e){return{returnValue:e.map(({contentRange:r})=>({contentRange:r})),thatTargets:e}}};var ql=class{constructor(){this.run=this.run.bind(this)}async run(e,{showDecorations:r=!0,ensureSingleTarget:n=!1}={}){return r&&await Ne(D(),e,"referenced"),n&&_r(e),{returnValue:e.map(i=>i.contentText),thatTargets:e}}};var zl=class{constructor(){this.run=this.run.bind(this)}async run(e,r){if(D().capabilities.commands.highlight==null)throw Error("The highlight action is not supported by your ide");return e.length===0?await Promise.all(D().visibleTextEditors.map(n=>D().setHighlightRanges(r,n,[]))):await rt(e,(n,i)=>D().setHighlightRanges(r,n,i.map(dI))),{thatTargets:e}}};var Wh=class{constructor(e,r,n){this.rangeUpdater=e;this.modifierStageFactory=r;this.isBefore=n;this.getFinalStages=()=>[this.modifierStageFactory.create(ti)];this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e){let r=Je(await rt(e,this.runForEditor));return await D().flashRanges(r.flatMap(n=>n.thatMark.map(i=>({editor:i.editor,range:vt(i.selection),style:"justAdded"})))),{sourceSelections:r.flatMap(({sourceMark:n})=>n),thatSelections:r.flatMap(({thatMark:n})=>n)}}async runForEditor(e,r){let n=this.isBefore?"after":"before",i=r.flatMap(g=>g.toDestination(n).constructChangeEdit(g.contentText)),o=r.map(({contentSelection:g})=>g),a=i.map(({range:g})=>g),l=D().getEditableTextEditor(e),{contentSelections:p,editRanges:u}=await Fe({rangeUpdater:this.rangeUpdater,editor:l,edits:i,selections:{contentSelections:o,editRanges:{selections:a,behavior:0}}}),d=St(i,u).map(([g,x])=>g.updateRange(x)),h=e.selections[0];return p.some(g=>g.intersection(h)!=null)&&await l.revealRange(h),{sourceMark:dn(r,d),thatMark:dn(r,p)}}},$h=class extends Wh{constructor(e,r){super(e,r,!0)}},jh=class extends Wh{constructor(e,r){super(e,r,!1)}};var Gl=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(ti)]}async run(e){let r=await rt(e,async(i,o)=>{let a=this.getEdits(o),l=o.map(d=>d.thatTarget.contentSelection),{contentSelections:p,editRanges:u}=await Fe({rangeUpdater:this.rangeUpdater,editor:D().getEditableTextEditor(i),edits:a,selections:{contentSelections:l,editRanges:{selections:a.map(d=>d.range),behavior:0}}});return{thatMark:p.map(d=>({editor:i,selection:d})),flashRanges:Go(a,u).map(([d,h])=>({editor:i,range:d.isLine?d.updateRange(h):h,isLine:d.isLine}))}});return await D().flashRanges(r.flatMap(i=>i.flashRanges.map(({editor:o,range:a,isLine:l})=>({editor:o,range:l?on(a):vt(a),style:"justAdded"})))),{thatSelections:r.flatMap(i=>i.thatMark)}}},qh=class extends Gl{constructor(e,r){super(e,r)}getEdits(e){return e.flatMap(r=>[Kh(r,"before"),Kh(r,"after")])}},zh=class extends Gl{constructor(e,r){super(e,r)}getEdits(e){return e.map(r=>Kh(r,"before"))}},Gh=class extends Gl{constructor(e,r){super(e,r)}getEdits(e){return e.map(r=>Kh(r,"after"))}};function Kh(t,e){return{...t.toDestination(e).constructChangeEdit("",!0),isLine:t.isLine}}var Iv=class t{constructor(){this.value="";this.pos=0}static{this._table={36:0,58:1,44:2,123:3,125:4,92:5,47:6,124:7,43:11,45:12,63:13}}static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return e===95||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};let e=this.pos,r=0,n=this.value.charCodeAt(e),i;if(i=t._table[n],typeof i=="number")return this.pos+=1,{type:i,pos:e,len:1};if(t.isDigitCharacter(n)){i=8;do r+=1,n=this.value.charCodeAt(e+r);while(t.isDigitCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}if(t.isVariableCharacter(n)){i=9;do n=this.value.charCodeAt(e+ ++r);while(t.isVariableCharacter(n)||t.isDigitCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}i=10;do r+=1,n=this.value.charCodeAt(e+r);while(!isNaN(n)&&typeof t._table[n]>"u"&&!t.isDigitCharacter(n)&&!t.isVariableCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}},vo=class{constructor(){this._children=[]}appendChild(e){return e instanceof Er&&this._children[this._children.length-1]instanceof Er?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,r){let{parent:n}=e,i=n.children.indexOf(e),o=n.children.slice(0);o.splice(i,1,...r),n._children=o,function a(l,p){for(let u of l)u.parent=p,a(u.children,u)}(r,n)}get children(){return this._children}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof Yh)return e;e=e.parent}}toString(){return this.children.reduce((e,r)=>e+r.toString(),"")}len(){return 0}},Er=class t extends vo{constructor(r){super();this.value=r}static escape(r){return r.replace(/\$|}|\\/g,"\\$&")}toString(){return this.value}toTextmateString(){return t.escape(this.value)}len(){return this.value.length}clone(){return new t(this.value)}},Qh=class extends vo{},Wr=class t extends Qh{constructor(r){super();this.index=r}static compareByIndex(r,n){return r.index===n.index?0:r.isFinalTabstop?1:n.isFinalTabstop||r.index<n.index?-1:r.index>n.index?1:0}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof Zh?this._children[0]:void 0}toTextmateString(){let r="";return this.transform&&(r=this.transform.toTextmateString()),this.children.length===0&&!this.transform?`$${this.index}`:this.children.length===0?`\${${this.index}${r}}`:this.choice?`\${${this.index}|${this.choice.toTextmateString()}|${r}}`:`\${${this.index}:${this.children.map(n=>n.toTextmateString()).join("")}${r}}`}clone(){let r=new t(this.index);return this.transform&&(r.transform=this.transform.clone()),r._children=this.children.map(n=>n.clone()),r}},Zh=class t extends vo{constructor(){super(...arguments);this.options=[]}appendChild(r){return r instanceof Er&&(r.parent=this,this.options.push(r)),this}toString(){return this.options[0].value}toTextmateString(){return this.options.map(r=>r.value.replace(/\||,|\\/g,"\\$&")).join(",")}len(){return this.options[0].len()}clone(){let r=new t;return this.options.forEach(r.appendChild,r),r}},Fv=class t extends vo{constructor(){super(...arguments);this.regexp=new RegExp("")}resolve(r){let n=this,i=!1,o=r.replace(this.regexp,function(){return i=!0,n._replace(Array.prototype.slice.call(arguments,0,-2))});return!i&&this._children.some(a=>a instanceof Fn&&!!a.elseValue)&&(o=this._replace([])),o}_replace(r){let n="";for(let i of this._children)if(i instanceof Fn){let o=r[i.index]||"";o=i.resolve(o),n+=o}else n+=i.toString();return n}toString(){return""}toTextmateString(){return`/${this.regexp.source}/${this.children.map(r=>r.toTextmateString())}/${(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")}`}clone(){let r=new t;return r.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),r._children=this.children.map(n=>n.clone()),r}},Fn=class t extends vo{constructor(r,n,i,o){super();this.index=r;this.shorthandName=n;this.ifValue=i;this.elseValue=o}resolve(r){return this.shorthandName==="upcase"?r?r.toLocaleUpperCase():"":this.shorthandName==="downcase"?r?r.toLocaleLowerCase():"":this.shorthandName==="capitalize"?r?r[0].toLocaleUpperCase()+r.substr(1):"":this.shorthandName==="pascalcase"?r?this._toPascalCase(r):"":this.shorthandName==="camelcase"?r?this._toCamelCase(r):"":r&&typeof this.ifValue=="string"?this.ifValue:!r&&typeof this.elseValue=="string"?this.elseValue:r||""}_toPascalCase(r){let n=r.match(/[a-z0-9]+/gi);return n?n.map(i=>i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()).join(""):r}_toCamelCase(r){let n=r.match(/[a-z0-9]+/gi);return n?n.map((i,o)=>o===0?i.toLowerCase():i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()).join(""):r}toTextmateString(){let r="${";return r+=this.index,this.shorthandName?r+=`:/${this.shorthandName}`:this.ifValue&&this.elseValue?r+=`:?${this.ifValue}:${this.elseValue}`:this.ifValue?r+=`:+${this.ifValue}`:this.elseValue&&(r+=`:-${this.elseValue}`),r+="}",r}clone(){return new t(this.index,this.shorthandName,this.ifValue,this.elseValue)}},bo=class t extends Qh{constructor(r){super();this.name=r}resolve(r){let n=r.resolve(this);return this.transform&&(n=this.transform.resolve(n||"")),n!==void 0?(this._children=[new Er(n)],!0):!1}toTextmateString(){let r="";return this.transform&&(r=this.transform.toTextmateString()),this.children.length===0?`\${${this.name}${r}}`:`\${${this.name}:${this.children.map(n=>n.toTextmateString()).join("")}${r}}`}clone(){let r=new t(this.name);return this.transform&&(r.transform=this.transform.clone()),r._children=this.children.map(n=>n.clone()),r}};function vI(t,e){let r=[...t];for(;r.length>0;){let n=r.shift();if(!e(n))break;r.unshift(...n.children)}}var Yh=class t extends vo{get placeholderInfo(){if(!this._placeholders){let e=[],r;this.walk(function(n){return n instanceof Wr&&(e.push(n),r=!r||r.index<n.index?n:r),!0}),this._placeholders={all:e,last:r}}return this._placeholders}get placeholders(){let{all:e}=this.placeholderInfo;return e}offset(e){let r=0,n=!1;return this.walk(i=>i===e?(n=!0,!1):(r+=i.len(),!0)),n?r:-1}fullLen(e){let r=0;return vI([e],n=>(r+=n.len(),!0)),r}enclosingPlaceholders(e){let r=[],{parent:n}=e;for(;n;)n instanceof Wr&&r.push(n),n=n.parent;return r}resolveVariables(e){return this.walk(r=>(r instanceof bo&&r.resolve(e)&&(this._placeholders=void 0),!0)),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,r){return this._placeholders=void 0,super.replace(e,r)}toTextmateString(){return this.children.reduce((e,r)=>e+r.toTextmateString(),"")}clone(){let e=new t;return this._children=this.children.map(r=>r.clone()),e}walk(e){vI(this.children,e)}},Ya=class{constructor(){this._scanner=new Iv;this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}text(e){return this.parse(e).toString()}parse(e,r,n){this._scanner.text(e),this._token=this._scanner.next();let i=new Yh;for(;this._parse(i););let o=new Map,a=[],l=0;i.walk(p=>(p instanceof Wr&&(l+=1,p.isFinalTabstop?o.set(0,void 0):!o.has(p.index)&&p.children.length>0?o.set(p.index,p.children):a.push(p)),!0));for(let p of a){let u=o.get(p.index);if(u){let d=new Wr(p.index);d.transform=p.transform;for(let h of u)d.appendChild(h.clone());i.replace(p,[d])}}return n||(n=l>0&&r),!o.has(0)&&n&&i.appendChild(new Wr(0)),i}_accept(e,r){if(e===void 0||this._token.type===e){let n=r?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),n}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){let r=this._token;for(;this._token.type!==e;){if(this._token.type===14)return!1;if(this._token.type===5){let i=this._scanner.next();if(i.type!==0&&i.type!==4&&i.type!==5)return!1}this._token=this._scanner.next()}let n=this._scanner.value.substring(r.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),n}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let r;return(r=this._accept(5,!0))?(r=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||r,e.appendChild(new Er(r)),!0):!1}_parseTabstopOrVariableName(e){let r,n=this._token;return this._accept(0)&&(r=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(r)?new Wr(Number(r)):new bo(r)),!0):this._backTo(n)}_parseComplexPlaceholder(e){let r,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(r=this._accept(8,!0))))return this._backTo(n);let o=new Wr(Number(r));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new Er("${"+r+":")),o.children.forEach(e.appendChild,e),!0}else if(o.index>0&&this._accept(7)){let a=new Zh;for(;;){if(this._parseChoiceElement(a)){if(this._accept(2))continue;if(this._accept(7)&&(o.appendChild(a),this._accept(4)))return e.appendChild(o),!0}return this._backTo(n),!1}}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseChoiceElement(e){let r=this._token,n=[];for(;!(this._token.type===2||this._token.type===7);){let i;if((i=this._accept(5,!0))?i=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||i:i=this._accept(void 0,!0),!i)return this._backTo(r),!1;n.push(i)}return n.length===0?(this._backTo(r),!1):(e.appendChild(new Er(n.join(""))),!0)}_parseComplexVariable(e){let r,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(r=this._accept(9,!0))))return this._backTo(n);let o=new bo(r);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new Er("${"+r+":")),o.children.forEach(e.appendChild,e),!0}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseTransform(e){let r=new Fv,n="",i="";for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(6,!0)||o,n+=o;continue}if(this._token.type!==14){n+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(5,!0)||this._accept(6,!0)||o,r.appendChild(new Er(o));continue}if(!(this._parseFormatString(r)||this._parseAnything(r)))return!1}for(;!this._accept(4);){if(this._token.type!==14){i+=this._accept(void 0,!0);continue}return!1}try{r.regexp=new RegExp(n,i)}catch{return!1}return e.transform=r,!0}_parseFormatString(e){let r=this._token;if(!this._accept(0))return!1;let n=!1;this._accept(3)&&(n=!0);let i=this._accept(8,!0);if(i)if(n){if(this._accept(4))return e.appendChild(new Fn(Number(i))),!0;if(!this._accept(1))return this._backTo(r),!1}else return e.appendChild(new Fn(Number(i))),!0;else return this._backTo(r),!1;if(this._accept(6)){let o=this._accept(9,!0);return!o||!this._accept(4)?(this._backTo(r),!1):(e.appendChild(new Fn(Number(i),o)),!0)}else if(this._accept(11)){let o=this._until(4);if(o)return e.appendChild(new Fn(Number(i),void 0,o,void 0)),!0}else if(this._accept(12)){let o=this._until(4);if(o)return e.appendChild(new Fn(Number(i),void 0,void 0,o)),!0}else if(this._accept(13)){let o=this._until(1);if(o){let a=this._until(4);if(a)return e.appendChild(new Fn(Number(i),void 0,o,a)),!0}}else{let o=this._until(4);if(o)return e.appendChild(new Fn(Number(i),void 0,void 0,o)),!0}return this._backTo(r),!1}_parseAnything(e){return this._token.type!==14?(e.appendChild(new Er(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}};var bI=Object.freeze({CURRENT_YEAR:!0,CURRENT_YEAR_SHORT:!0,CURRENT_MONTH:!0,CURRENT_DATE:!0,CURRENT_HOUR:!0,CURRENT_MINUTE:!0,CURRENT_SECOND:!0,CURRENT_DAY_NAME:!0,CURRENT_DAY_NAME_SHORT:!0,CURRENT_MONTH_NAME:!0,CURRENT_MONTH_NAME_SHORT:!0,CURRENT_SECONDS_UNIX:!0,SELECTION:!0,CLIPBOARD:!0,TM_SELECTED_TEXT:!0,TM_CURRENT_LINE:!0,TM_CURRENT_WORD:!0,TM_LINE_INDEX:!0,TM_LINE_NUMBER:!0,TM_FILENAME:!0,TM_FILENAME_BASE:!0,TM_DIRECTORY:!0,TM_FILEPATH:!0,RELATIVE_FILEPATH:!0,BLOCK_COMMENT_START:!0,BLOCK_COMMENT_END:!0,LINE_COMMENT:!0,WORKSPACE_NAME:!0,WORKSPACE_FOLDER:!0,RANDOM:!0,RANDOM_HEX:!0,UUID:!0});function Xh(t,e,r){let n=bQ(t)+1,i={};t.walk(o=>{if(o instanceof bo){if(o.name===e)o.name="TM_SELECTED_TEXT";else if(r!=null&&Object.prototype.hasOwnProperty.call(r,o.name))o.parent.replace(o,[new Er(r[o.name])]);else if(!bI[o.name]){let a;o.name in i?a=i[o.name]:(a=n++,i[o.name]=a);let l=new Wr(a);o.children.forEach(p=>l.appendChild(p)),o.parent.replace(o,[l])}}else o instanceof Wr&&o.index.toString()===e&&o.parent.replace(o,[new bo("TM_SELECTED_TEXT")]);return!0})}function bQ(t){let e=0;return t.walk(r=>(r instanceof Wr&&(e=Math.max(e,r.index)),!0)),e}function Jh(t,e,r){let n=e.map(o=>wQ(t,o,r)),i=n[0];if(!n.every(o=>o===i))throw new Error("Multiple snippet definitions match the given context");if(i===-1)throw new Error("Couldn't find matching snippet definition");return r[i]}function wQ(t,e,r){let n=e.editor.document.languageId;return r.findIndex(({scope:i})=>{if(i==null)return!0;let{langIds:o,scopeTypes:a,excludeDescendantScopeTypes:l}=i;if(o!=null&&!o.includes(n))return!1;if(a!=null){let p=a.concat(l??[]),u,d;for(let h of p)try{let g=t.create({type:"containingScope",scopeType:{type:h}}).run(e)[0];e.contentRange.isRangeEqual(g.contentRange)&&(g=t.create({type:"containingScope",scopeType:{type:h},ancestorIndex:1}).run(e)[0]),(u==null||u.contentRange.contains(g.contentRange))&&(u=g,d=h)}catch{continue}return d==null?!1:u!=null&&!(l??[]).includes(d)}return!0})}var Kl=class{constructor(e,r,n,i){this.rangeUpdater=e;this.snippets=r;this.actions=n;this.modifierStageFactory=i;this.snippetParser=new Ya;this.run=this.run.bind(this)}getFinalStages(e){let r=this.getScopeTypes(e);return r.length===0?[]:[new Nm(this.modifierStageFactory,{type:"cascading",modifiers:r.map(n=>({type:"containingScope",scopeType:n}))})]}getScopeTypes(e){if(e.type==="named"){let{name:r}=e,i=this.snippets.getSnippetStrict(r).insertionScopeTypes;return i==null?[]:i.map(o=>({type:o}))}else return e.scopeTypes??[]}getSnippetInfo(e,r){if(e.type==="named"){let{name:n}=e,i=this.snippets.getSnippetStrict(n),o=Jh(this.modifierStageFactory,r,i.definitions);return{body:o.body.join(`
`),formatSubstitutions(a){return a==null?void 0:_Q(i,o,a)}}}else return{body:e.body,formatSubstitutions(n){return n}}}async run(e,r){let n=D().getEditableTextEditor(wr(e));await this.actions.editNew.run(e);let{body:i,formatSubstitutions:o}=this.getSnippetInfo(r,n.selections.map(u=>new Pt({editor:n,contentRange:u,isReversed:!1,hasExplicitRange:!0}))),a=this.snippetParser.parse(i);Xh(a,null,o(r.substitutions));let l=a.toTextmateString(),{editorSelections:p}=await Fe({rangeUpdater:this.rangeUpdater,editor:n,callback:()=>n.insertSnippet(l),preserveCursorSelections:!0,selections:{editorSelections:{selections:n.selections,behavior:0}}});return{thatSelections:p.map(u=>({editor:n,selection:u}))}}};function _Q(t,e,r){return Object.fromEntries(Object.entries(r).map(([n,i])=>{let o=(e.variables??{})[n]?.formatter??(t.variables??{})[n]?.formatter;if(o==null)return[n,i];let a=yP[o];if(a==null)throw new Error(`Couldn't find formatter ${o} for variable ${n}`);return[n,a(i.split(" "))]}))}var Ql=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(ti)]}async run(e){return await Ne(D(),e.map(({thatTarget:n})=>n),"pendingModification0"),{thatSelections:Je(await rt(e,async(n,i)=>{let{thatRanges:o}=await Fe({rangeUpdater:this.rangeUpdater,editor:D().getEditableTextEditor(n),edits:EQ(n,i),selections:{thatRanges:i.map(({contentRange:a})=>a)}});return Go(i,o).map(([a,l])=>({editor:n,selection:l.toSelection(a.isReversed)}))}))}}};function EQ(t,e){let r=[];for(let n of e){let i=n.joinAs==="line"?kQ(n):RQ(n);r.push(...i)}return r}function RQ(t){let{editor:e,contentRange:r}=t,n=Sr(e.document.languageId).tokenMatcher,i=cn(n,e,r,"forward");return Array.from(LS(i)).map(([o,a])=>({range:new W(o.end,a.start),text:"",isReplace:!0}))}function kQ(t){let{document:e}=t.editor,r=t.contentRange,n=r.start.line,i=r.isSingleLine?Math.min(n+1,e.lineCount-1):r.end.line,o=_a(hA(n,i+1),a=>e.lineAt(a));return Array.from(LS(o)).map(([a,l])=>({range:new W(a.rangeTrimmed?.end??a.range.end,l.rangeTrimmed?.start??l.range.start),text:l.isEmptyOrWhitespace?"":" ",isReplace:!0}))}var eg=class{constructor(e,r){this.rangeUpdater=e;this.actions=r;this.run=this.run.bind(this)}async run(e){let r=D().getEditableTextEditor(wr(e)),n=D().activeEditableTextEditor,i=async()=>{await this.actions.editNew.run(e)},{cursorSelections:o}=await Fe({rangeUpdater:this.rangeUpdater,editor:r,preserveCursorSelections:!0,callback:i,selections:{cursorSelections:r.selections}}),{originalCursorSelections:a,editorSelections:l}=await Fe({rangeUpdater:this.rangeUpdater,editor:r,callback:()=>r.clipboardPaste(),selections:{originalCursorSelections:o,editorSelections:{selections:r.selections,behavior:0}}});return await r.setSelections(a),n!=null&&!n.isActive&&await n.focus(),await D().flashRanges(l.map(p=>({editor:r,range:vt(p),style:"justAdded"}))),{thatSelections:l.map(p=>({editor:r,selection:p}))}}};var tg=class{constructor(e){this.rangeUpdater=e;this.runForEditor=this.runForEditor.bind(this)}async run(e){let r=await D().clipboard.readText(),n=r.split(/\r?\n/g),i=e.length===n.length?Go(e,n).map(([a,l])=>({destination:a,text:l})):e.map(a=>({destination:a,text:r}));return{thatSelections:Je(await Ci(i,({destination:a})=>a.editor,this.runForEditor))}}async runForEditor(e,r){let n=r.map(({destination:a,text:l})=>a.constructChangeEdit(l)),{editSelections:i}=await Fe({rangeUpdater:this.rangeUpdater,editor:D().getEditableTextEditor(e),edits:n,selections:{editSelections:{selections:n.map(({range:a})=>a),behavior:0}}}),o=Go(n,i).map(([a,l])=>a.updateRange(l).toSelection(l.isReversed));return await D().flashRanges(o.map(a=>({editor:e,range:vt(a),style:"justAdded"}))),o.map(a=>({editor:e,selection:a}))}};var rg=class{constructor(e,r){this.run=this.run.bind(this),this.runner=D().capabilities.commands.clipboardPaste!=null?new eg(e,r):new tg(e)}run(e){return this.runner.run(e)}};var Zl=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e,{showDecorations:r=!0}={}){return e=hh(e),r&&await Ne(D(),e,"pendingDelete",i=>i.getRemovalHighlightRange()),{thatTargets:Je(await rt(e,this.runForEditor))}}async runForEditor(e,r){let n=r.map(a=>a.constructRemovalEdit()),i=D().getEditableTextEditor(e),{editRanges:o}=await Fe({rangeUpdater:this.rangeUpdater,editor:i,edits:n,selections:{editRanges:n.map(({range:a})=>a)}});return St(r,o).map(([a,l])=>new po({editor:a.editor,isReversed:a.isReversed,contentRange:l}))}};var Yl=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}getTexts(e,r){if(Array.isArray(r))return r.length===1?Array(e.length).fill(r[0]):r;let n=[];for(let i=0;i<e.length;++i)n[i]=(r.start+i).toString();return n}async run(e,r){await Ne(D(),e.map(l=>l.target),"pendingModification0");let n=this.getTexts(e,r);if(e.length!==n.length)throw new Error("Targets and texts must have same length");let i=St(e,n).map(([l,p])=>({editor:l.editor,target:l.target,edit:l.constructChangeEdit(p)})),o=[],a=[];return await Ci(i,l=>l.editor,async(l,p)=>{let u=p.map(({edit:g})=>g),{contentSelections:d,editRanges:h}=await Fe({rangeUpdater:this.rangeUpdater,editor:D().getEditableTextEditor(l),edits:u,selections:{contentSelections:p.map(({target:g})=>g.contentSelection),editRanges:{selections:u.map(({range:g})=>g),behavior:0}}});for(let[g,x]of St(p,d))o.push(g.target.withContentRange(x));for(let[g,x]of St(p,h))a.push({editor:l,selection:g.edit.updateRange(x).toSelection(!1)})}),{sourceTargets:o,thatSelections:a}}};var Xl=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.getFinalStages=()=>[xv(this.modifierStageFactory)];this.run=this.run.bind(this)}async run(e,r,n){let i=e.flatMap(a=>{let l=a.getBoundary();if(l.length!==2)throw Error("Target must have an opening and closing delimiter");return l});await Ne(D(),i,"pendingModification0");let o=await rt(i,async(a,l)=>{let p=l.map((h,g)=>({editor:a,range:h.contentRange,text:g%2===0?r:n})),{sourceRanges:u,thatRanges:d}=await Fe({rangeUpdater:this.rangeUpdater,editor:D().getEditableTextEditor(a),edits:p,selections:{sourceRanges:e.map(h=>h.thatTarget.contentRange),thatRanges:e.map(h=>h.contentRange)}});return{sourceMark:dn(e,u),thatMark:dn(e,d)}});return{sourceSelections:o.flatMap(({sourceMark:a})=>a),thatSelections:o.flatMap(({thatMark:a})=>a)}}};var Jl=class{constructor(e){this.at=e;this.run=this.run.bind(this)}async run(e){let r=sl(e,a=>a.editor),n=Array.from(r,([a,l])=>({lineNumber:PQ(l,this.at),editor:a})),i=D().activeEditableTextEditor;for(let a of n)await D().getEditableTextEditor(a.editor).revealLine(a.lineNumber,this.at);i!=null&&!i.isActive&&await i.focus();let o=e.filter(a=>{let l=a.editor.visibleRanges,p=l[0].start.line,u=l[l.length-1].end.line;return a.contentRange.start.line>p||a.contentRange.end.line<u||a.contentRange.start.line===p&&a.contentRange.end.line===u});return await D().flashRanges(o.map(a=>({editor:a.editor,range:on(a.contentRange),style:"referenced"}))),{thatTargets:e}}},ng=class extends Jl{constructor(){super("top")}},ig=class extends Jl{constructor(){super("center")}},og=class extends Jl{constructor(){super("bottom")}};function PQ(t,e){let r=Number.MAX_SAFE_INTEGER,n=0;return t.forEach(i=>{r=Math.min(r,i.contentRange.start.line),n=Math.max(n,i.contentRange.end.line)}),e==="top"?r:e==="bottom"?n:Math.floor((r+n)/2)}var Xa=class{constructor(){this.run=this.run.bind(this)}getSelection(e){return e.contentSelection}async run(e){let r=wr(e),n=e.map(this.getSelection);return await D().getEditableTextEditor(r).setSelections(n,{focusEditor:!0}),{thatTargets:e}}},sg=class extends Xa{getSelection(e){return new Te(e.contentRange.start,e.contentRange.start)}},ag=class extends Xa{getSelection(e){return new Te(e.contentRange.end,e.contentRange.end)}};var ep=class{constructor(e){this.key=e;this.noAutomaticTokenExpansion=!0;this.run=this.run.bind(this)}async run(e){return{thatTargets:e,[`${this.key}Targets`]:e}}};var tp=class{constructor(e){this.treeSitter=e;this.run=this.run.bind(this)}async run(e){await Ne(D(),e,"referenced");let r=["# Cursorless parse tree"];for(let n of e){let{editor:i,contentRange:o}=n,a=this.treeSitter.getTree(i.document);r.push(MQ(i.document,a,o))}return D().openUntitledTextDocument({language:"markdown",content:r.join(`

`)}),{thatTargets:e}}};function MQ(t,e,r){let n=[],i=[];return wI(n,i,r,e.walk(),0),[`## ${t.filename} [${r}]
`,`\`\`\`${t.languageId}`,t.getText(r),"```","","```scm",...i,"```","","```js",...n,"```",""].join(`
`)}function wI(t,e,r,n,i){for(;;){let o=new W(n.startPosition.row,n.startPosition.column,n.endPosition.row,n.endPosition.column);if(r.intersection(o)!=null){let a="  ".repeat(i),l=AQ(n),p=a+l;if(n.nodeIsNamed)t.push(`${p}${n.nodeType} [${o}]`),e.push(`${p}(${n.nodeType}`),n.gotoFirstChild()?(wI(t,e,r,n,i+1),n.gotoParent(),e.push(`${a})`)):e[e.length-1]+=")";else{let u=`"${n.nodeType}"`;t.push(`${p}${u} [${o}]`),e.push(`${p}${u}`)}}if(!n.gotoNextSibling())return}}function AQ(t){let e=t.currentFieldName;return e!=null?`${e}: `:""}var cg=class{constructor(e,r){this.rangeUpdater=e;this.isIndent=r;this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e){return this.hasCapability()?this.runSimpleCommandAction(e):(await Ne(D(),e,"pendingModification0"),{thatTargets:Je(await rt(e,this.runForEditor))})}hasCapability(){return this.isIndent?D().capabilities.commands.indentLine!=null:D().capabilities.commands.outdentLine!=null}runSimpleCommandAction(e){return(this.isIndent?new vh(this.rangeUpdater):new bh(this.rangeUpdater)).run(e)}async runForEditor(e,r){let n=this.isIndent?DQ(e,r):IQ(e,r),{targetSelections:i}=await Fe({rangeUpdater:this.rangeUpdater,editor:D().getEditableTextEditor(e),edits:n,selections:{targetSelections:r.map(({contentSelection:o})=>o)}});return St(r,i).map(([o,a])=>Ga({editor:e,selection:a.toSelection(o.isReversed)}))}},lg=class extends cg{constructor(e){super(e,!0)}},pg=class extends cg{constructor(e){super(e,!1)}};function DQ(t,e){let{document:r}=t,n=_I(e),i=FQ(t);return n.map(o=>({range:r.lineAt(o).range.start.toEmptyRange(),text:i}))}function IQ(t,e){let{document:r}=t,n=_I(e),i=CQ(t);return n.map(o=>{let a=r.lineAt(o),l=a.text.match(i),{start:p}=a.range,u=p.translate(void 0,l?.[0].length);return{range:new W(p,u),text:""}})}function _I(t){let e=new Set;for(let r of t){let{start:n,end:i}=r.contentRange;for(let o=n.line;o<=i.line;++o)e.add(o)}return[...e]}function FQ(t){if(t.options.insertSpaces){let e=EI(t);return" ".repeat(e)}return"	"}function CQ(t){if(t.options.insertSpaces){let e=EI(t);return new RegExp(`^[ ]{1,${e}}`)}return/^\t/}function EI(t){return typeof t.options.tabSize=="number"?t.options.tabSize:4}var rp=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){e.length<2&&Kc(D().messages,"tooFewTargets",'This action works on multiple targets, e.g. "sort every line block" instead of "sort block".');let r=e.slice().sort((a,l)=>a.contentRange.start.compareTo(l.contentRange.start)),{returnValue:n}=await this.actions.getText.run(r,{showDecorations:!1}),i=this.sortTexts(n),{thatSelections:o}=await this.actions.replace.run(r.map(a=>a.toDestination("to")),i);return{thatSelections:o}}},ug=class extends rp{sortTexts(e){return e.sort((r,n)=>r.localeCompare(n,void 0,{numeric:!0,caseFirst:"upper"}))}},fg=class extends rp{sortTexts(e){return e.reverse()}},dg=class extends rp{sortTexts(e){return yT(e)}};var np=class{constructor(e){this.modifierStageFactory=e;this.getFinalStages=()=>[this.modifierStageFactory.create(ti)];this.run=this.run.bind(this)}async run(e){let r=e.map(({thatTarget:n})=>n);return await Ne(D(),r,"referenced"),await rt(e,async(n,i)=>{let o=i.map(a=>{let l=a.contentRange;return a.isLine?{type:"line",startLine:l.start.line,endLine:l.end.line}:{type:"inline",range:l}});await D().getEditableTextEditor(n).toggleBreakpoint(o)}),{thatTargets:e}}};var ip=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e,r,n){let i=await rt(e,async(o,a)=>{let l=a.map(w=>({start:new Te(w.contentRange.start,w.contentRange.start),end:new Te(w.contentRange.end,w.contentRange.end)})),p=l.flatMap(({start:w,end:C})=>[{text:r,range:w},{text:n,range:C,isReplace:!0}]),u=a.map(w=>w.contentSelection),{boundariesStartSelections:d,boundariesEndSelections:h,sourceSelections:g,thatSelections:x}=await Fe({rangeUpdater:this.rangeUpdater,editor:D().getEditableTextEditor(o),edits:p,selections:{boundariesStartSelections:{selections:l.map(({start:w})=>w),behavior:2},boundariesEndSelections:{selections:l.map(({end:w})=>w),behavior:3},sourceSelections:{selections:u,behavior:1},thatSelections:{selections:u,behavior:0}}}),_=[...d,...h];return await D().flashRanges(_.map(w=>({editor:o,range:vt(w),style:"justAdded"}))),{sourceMark:g.map(w=>({editor:o,selection:w})),thatMark:x.map(w=>({editor:o,selection:w}))}});return{sourceSelections:i.flatMap(({sourceMark:o})=>o),thatSelections:i.flatMap(({thatMark:o})=>o)}}};var op=class{constructor(e,r,n){this.rangeUpdater=e;this.snippets=r;this.modifierStageFactory=n;this.snippetParser=new Ya;this.run=this.run.bind(this)}getFinalStages(e){let r=this.getScopeType(e);return r==null?[]:[new Ua(this.modifierStageFactory,{type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:r}})]}getScopeType(e){if(e.type==="named"){let{name:r,variableName:n}=e,a=(this.snippets.getSnippetStrict(r).variables??{})[n]?.wrapperScopeType;return a==null?void 0:{type:a}}else return e.scopeType}getBody(e,r){if(e.type==="named"){let{name:n}=e,i=this.snippets.getSnippetStrict(n);return Jh(this.modifierStageFactory,r,i.definitions).body.join(`
`)}else return e.body}async run(e,r){let n=D().getEditableTextEditor(wr(e)),i=this.getBody(r,e),o=this.snippetParser.parse(i);Xh(o,r.variableName);let a=o.toTextmateString();await Ne(D(),e,"pendingModification0");let l=e.map(d=>d.contentSelection),p=()=>n.insertSnippet(a,l),{targetSelections:u}=await Fe({rangeUpdater:this.rangeUpdater,editor:n,callback:p,preserveCursorSelections:!0,selections:{targetSelections:l}});return{thatSelections:u.map(d=>({editor:n,selection:d}))}}};var OQ=/-?\d+(\.\d+)?/g,mg=class{constructor(e,r){this.actions=e;this.isIncrement=r;this.run=this.run.bind(this)}async run(e){let r=[];return await Ci(e,n=>n.editor,async(n,i)=>{let o=await this.runOnEditor(n,i);r.push(...o)}),{thatSelections:r}}async runOnEditor(e,r){let{document:n}=e,i=[],o=[];for(let l of r){let p=n.offsetAt(l.contentRange.start),u=l.contentText,d=Gc(u,OQ);for(let h of d)i.push(NQ(e,p,h)),o.push(LQ(this.isIncrement,h.text))}let{thatSelections:a}=await this.actions.replace.run(i,o);return a}},hg=class extends mg{constructor(e){super(e,!0)}},gg=class extends mg{constructor(e){super(e,!1)}};function NQ(t,e,r){return new He({editor:t,isReversed:!1,contentRange:new W(t.document.positionAt(e+r.index),t.document.positionAt(e+r.index+r.text.length))}).toDestination("to")}function LQ(t,e){return e.includes(".")?VQ(t,e).toString():UQ(t,e).toString()}function UQ(t,e){let r=parseInt(e),n=1;return r+(t?n:-n)}function VQ(t,e){let r=parseFloat(e),i=Math.abs(r)<=1?.1:1,o=r+(t?i:-i);return parseFloat(o.toPrecision(15))/1}var yg=class{constructor(e,r,n,i){this.treeSitter=e;this.snippets=r;this.rangeUpdater=n;this.modifierStageFactory=i;this.callAsFunction=new Vl(this);this.clearAndSetSelection=new Bl(this);this.copyToClipboard=new Fh(this,this.rangeUpdater);this.cutToClipboard=new Ch(this);this.decrement=new gg(this);this.deselect=new Hl;this.editNew=new Oh(this.rangeUpdater,this);this.editNewLineAfter=new Uh(this,this.modifierStageFactory);this.editNewLineBefore=new Lh(this,this.modifierStageFactory);this.executeCommand=new Wl(this.rangeUpdater);this.extractVariable=new Ih(this.rangeUpdater);this.findInDocument=new Bh(this);this.findInWorkspace=new Hh(this);this.foldRegion=new wh(this.rangeUpdater);this.followLink=new Qa({openAside:!1});this.followLinkAside=new Qa({openAside:!0});this.generateSnippet=new Za(this.snippets);this.getText=new ql;this.highlight=new zl;this.increment=new hg(this);this.indentLine=new lg(this.rangeUpdater);this.insertCopyAfter=new jh(this.rangeUpdater,this.modifierStageFactory);this.insertCopyBefore=new $h(this.rangeUpdater,this.modifierStageFactory);this.insertEmptyLineAfter=new Gh(this.rangeUpdater,this.modifierStageFactory);this.insertEmptyLineBefore=new zh(this.rangeUpdater,this.modifierStageFactory);this.insertEmptyLinesAround=new qh(this.rangeUpdater,this.modifierStageFactory);this.insertSnippet=new Kl(this.rangeUpdater,this.snippets,this,this.modifierStageFactory);this.joinLines=new Ql(this.rangeUpdater,this.modifierStageFactory);this.breakLine=new mh(this.rangeUpdater);this.moveToTarget=new yh(this.rangeUpdater);this.outdentLine=new pg(this.rangeUpdater);this.pasteFromClipboard=new rg(this.rangeUpdater,this);this.randomizeTargets=new dg(this);this.remove=new Zl(this.rangeUpdater);this.rename=new Eh(this.rangeUpdater);this.replace=new Yl(this.rangeUpdater);this.replaceWithTarget=new gh(this.rangeUpdater);this.revealDefinition=new Ph(this.rangeUpdater);this.revealTypeDefinition=new Mh(this.rangeUpdater);this.reverseTargets=new fg(this);this.rewrapWithPairedDelimiter=new Xl(this.rangeUpdater,this.modifierStageFactory);this.scrollToBottom=new og;this.scrollToCenter=new ig;this.scrollToTop=new ng;this["private.setKeyboardTarget"]=new ep("keyboard");this["experimental.setInstanceReference"]=new ep("instanceReference");this.setSelection=new Xa;this.setSelectionAfter=new ag;this.setSelectionBefore=new sg;this.showDebugHover=new Dh(this.rangeUpdater);this.showHover=new Ah(this.rangeUpdater);this.showQuickFix=new kh(this.rangeUpdater);this.showReferences=new Rh(this.rangeUpdater);this.sortTargets=new ug(this);this.swapTargets=new xh(this.rangeUpdater);this.toggleLineBreakpoint=new np(this.modifierStageFactory);this.toggleLineComment=new Sh(this.rangeUpdater);this.unfoldRegion=new _h(this.rangeUpdater);this.wrapWithPairedDelimiter=new ip(this.rangeUpdater);this.wrapWithSnippet=new op(this.rangeUpdater,this.snippets,this.modifierStageFactory);this["private.showParseTree"]=new tp(this.treeSitter);this["private.getTargets"]=new jl}};async function RI(t,e,r){let n=await t.getFocusedElementType();if(n==null||n==="textEditor")return null;let i=r.action;switch(i.name){case"replace":return xg(i.destination)&&Array.isArray(i.replaceWith)?{action:"insert",modifiers:Tg(i.destination),text:i.replaceWith.join(`
`)}:null;case"replaceWithTarget":return xg(i.destination)?{action:"insert",modifiers:Tg(i.destination),text:await Cv(e,i.source)}:null;case"moveToTarget":if(xg(i.destination)){let o=await Cv(e,i.source);return await BQ(e,i.source),{action:"insert",modifiers:Tg(i.destination),text:o}}return null;case"callAsFunction":return Sg(i.argument)?{action:i.name,modifiers:vg(i.argument),callee:await Cv(e,i.callee)}:null;case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return Sg(i.target)?{action:i.name,modifiers:vg(i.target),left:i.left,right:i.right}:null;case"pasteFromClipboard":return xg(i.destination)?{action:i.name,modifiers:Tg(i.destination)}:null;case"swapTargets":case"editNew":case"insertSnippet":case"generateSnippet":case"wrapWithSnippet":case"parsed":return null;default:return Sg(i.target)?{action:i.name,modifiers:vg(i.target)}:null}}function xg(t){return t.type==="implicit"?!0:t.type==="primitive"?t.insertionMode==="to"&&Sg(t.target):!1}function Sg(t){return t.type==="implicit"?!0:t.type==="primitive"?t.mark==null||t.mark.type==="cursor":!1}function Tg(t){return t.type==="primitive"?vg(t.target):[]}function vg(t){if(t.type==="primitive"){if(t.modifiers!=null&&t.modifiers.length>0)return t.modifiers;if(t.mark?.type==="cursor")return[{type:"containingTokenIfEmpty"}]}return[]}async function Cv(t,e){return(await t({name:"getText",target:e})).returnValue.join(`
`)}async function BQ(t,e){await t({name:"remove",target:e})}function kI(t,e){let{anchor:r,rangeType:n,active:i}=t;if(r.type!=="primitive"||n!=="continuous")return t;let o=r.modifiers.map((a,l)=>[a,l]);for(let[a,l]of o.reverse())for(let p of HQ){let u=p.accept(a);if(u.accepted){let[d,h]=[r.modifiers.slice(0,l+1),r.modifiers.slice(l+1)],g={...t,anchor:h.length===0&&e?{type:"implicit"}:{type:"primitive",mark:r.mark,modifiers:h},active:Vf(i,x=>{x.modifiers=x.modifiers.slice(Bc(x.modifiers,_=>p.accept(_).accepted)+1)})};return g=u.transformTarget?.(g)??g,{type:"primitive",mark:{type:"target",target:g},modifiers:d}}}return t}var HQ=[{accept(t){return t.type==="everyScope"&&t.scopeType.type!=="instance"?{accepted:!0,transformTarget(e){return{...e,exclusionScopeType:t.scopeType}}}:{accepted:!1}}},{accept(t){return{accepted:(t.type==="everyScope"||t.type==="relativeScope"||t.type==="ordinalScope")&&t.scopeType.type==="instance"}}}];function Nv(t,e){switch(t.type){case"list":return WQ(t,e);case"range":return PI(t,e);case"primitive":return bg(t,e);case"implicit":return t}}function WQ(t,e){return{...t,elements:t.elements.map((r,n)=>{let i=e.concat(t.elements.slice(0,n));switch(r.type){case"range":return PI(r,i);case"primitive":return bg(r,i)}})}}function PI(t,e){let r=$Q(t,e),n=t.anchor.type==="implicit"||t.anchor.mark==null;return kI(r,n)}function $Q(t,e){return{type:"range",rangeType:t.rangeType??"continuous",excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1,anchor:t.anchor.type==="implicit"?t.anchor:bg(t.anchor,e),active:bg(t.active,e.concat(t.anchor))}}function bg(t,e){let r=Ov(t.mark??(jQ(t)?GQ(e):null)??{type:"cursor"}),n=MI(t)??KQ(e)??QQ(e)??[];return{type:t.type,mark:r,modifiers:n}}function jQ(t){return t.modifiers?.some(e=>e.type==="inferPreviousMark")??!1}function MI(t){let e=t.modifiers?.filter(r=>r.type!=="inferPreviousMark")??[];return e.length!==0?e:void 0}function qQ(t){if(zQ(t))return[{type:"containingScope",scopeType:{type:"line"}}]}function zQ(t){let e=r=>r?.type==="lineNumber";return e(t.mark)?!0:t.mark?.type==="range"?e(t.mark.anchor)&&e(t.mark.active):!1}function GQ(t){return sp(t,e=>e.mark)}function KQ(t){return sp(t,MI)}function QQ(t){return sp(t,qQ)}function sp(t,e){for(let r=t.length-1;r>-1;--r){let n=t[r];switch(n.type){case"primitive":{let i=e(n);if(i!=null)return i;break}case"range":{let i=sp([n.anchor],e);if(i!=null)return i;break}case"list":{let i=sp(n.elements,e);if(i!=null)return i;break}}}}function Ov(t){switch(t.type){case"range":return{...t,anchor:Ov(t.anchor),active:Ov(t.active)};case"target":return{type:"target",target:Nv(t.target,[])};default:return t}}var wg=class{constructor(e,r,n,i,o){this.commandServerApi=e;this.debug=r;this.storedTargets=n;this.pipelineRunner=i;this.actions=o;this.finalStages=[];this.runAction=this.runAction.bind(this),this.inferenceContext=new Lv(this.debug)}async run(e){if(zo(e)){let u=await RI(this.commandServerApi,this.runAction,e);if(u!=null)return{fallback:u}}let{returnValue:r,thatSelections:n,thatTargets:i,sourceSelections:o,sourceTargets:a,instanceReferenceTargets:l,keyboardTargets:p}=await this.runAction(e.action);return this.storedTargets.set("that",AI(i,n)),this.storedTargets.set("source",AI(a,o)),this.storedTargets.set("instanceReference",l),this.storedTargets.set("keyboard",p,{history:!0}),{returnValue:r}}runAction(e){switch(this.inferenceContext.reset(),this.finalStages=[],e.name){case"replaceWithTarget":return this.actions.replaceWithTarget.run(this.getTargets(e.source),this.getDestinations(e.destination));case"moveToTarget":return this.actions.moveToTarget.run(this.getTargets(e.source),this.getDestinations(e.destination));case"swapTargets":return this.actions.swapTargets.run(this.getTargets(e.target1),this.getTargets(e.target2));case"callAsFunction":return this.actions.callAsFunction.run(this.getTargets(e.callee),this.getTargets(e.argument));case"wrapWithPairedDelimiter":return this.actions.wrapWithPairedDelimiter.run(this.getTargets(e.target),e.left,e.right);case"rewrapWithPairedDelimiter":return this.finalStages=this.actions.rewrapWithPairedDelimiter.getFinalStages(),this.actions.rewrapWithPairedDelimiter.run(this.getTargets(e.target),e.left,e.right);case"pasteFromClipboard":return this.actions.pasteFromClipboard.run(this.getDestinations(e.destination));case"executeCommand":return this.actions.executeCommand.run(this.getTargets(e.target),e.commandId,e.options);case"replace":return this.actions.replace.run(this.getDestinations(e.destination),e.replaceWith);case"highlight":return this.actions.highlight.run(this.getTargets(e.target),e.highlightId);case"generateSnippet":return this.actions.generateSnippet.run(this.getTargets(e.target),e.snippetName);case"insertSnippet":return this.finalStages=this.actions.insertSnippet.getFinalStages(e.snippetDescription),this.actions.insertSnippet.run(this.getDestinations(e.destination),e.snippetDescription);case"wrapWithSnippet":return this.finalStages=this.actions.wrapWithSnippet.getFinalStages(e.snippetDescription),this.actions.wrapWithSnippet.run(this.getTargets(e.target),e.snippetDescription);case"editNew":return this.actions.editNew.run(this.getDestinations(e.destination));case"getText":return this.actions.getText.run(this.getTargets(e.target),e.options);case"parsed":return this.runAction(fd(e.content,e.arguments));default:{let r=this.actions[e.name];if(r==null)throw new Error(`Unknown action: ${e.name}`);return this.finalStages=r.getFinalStages?.()??[],this.noAutomaticTokenExpansion=r.noAutomaticTokenExpansion??!1,r.run(this.getTargets(e.target))}}}getTargets(e){let r=this.inferenceContext.run(e);return this.pipelineRunner.run(r,{actionFinalStages:this.finalStages,noAutomaticTokenExpansion:this.noAutomaticTokenExpansion})}getDestinations(e){switch(e.type){case"list":return e.destinations.flatMap(r=>this.getDestinations(r));case"primitive":return this.getTargets(e.target).map(r=>r.toDestination(e.insertionMode));case"implicit":return this.getTargets({type:"implicit"}).map(r=>r.toDestination("to"))}}},Lv=class{constructor(e){this.debug=e;this.previousTargets=[]}run(e){let r=Nv(e,this.previousTargets);return this.debug.active&&(this.debug.log("Full target:"),this.debug.log(JSON.stringify(r,null,2))),this.previousTargets.push(e),r}reset(){this.previousTargets=[]}};function AI(t,e){if(t!=null&&e!=null)throw Error("Actions may only return full targets or selections for that mark");return e!=null?e.map(Ga):t}var _g=class{constructor(e,r){this.readableHatMap=e;this.mark=r}run(){let e=this.readableHatMap.getToken(this.mark.symbolColor,this.mark.character);if(e==null)throw new Error(`Couldn't find mark ${this.mark.symbolColor} '${this.mark.character}'`);return[new Pt({editor:e.editor,contentRange:e.range,isReversed:!1,hasExplicitRange:!1})]}};var Eg=class{constructor(e){this.mark=e}run(){let{editorId:e,range:{start:r,end:n}}=this.mark,i=D().visibleTextEditors.find(a=>a.id===e);if(i==null)throw new Error(`Couldn't find editor '${e}'`);let o=new W(r.line,r.character,n.line,n.character);return[new Pt({editor:i,contentRange:o,isReversed:!1,hasExplicitRange:!1})]}};var Rg=class{constructor(e){this.mark=e}run(){let e=D().activeTextEditor;if(e==null)return[];let r=ZQ(e,this.mark.lineNumberType,this.mark.lineNumber),n=e.document.lineAt(r).range;return[US(e,!1,n)]}},ZQ=(t,e,r)=>{switch(e){case"absolute":return r;case"relative":return t.selections[0].active.line+r;case"modulo100":{let i=t.visibleRanges[0].start.line,o=t.visibleRanges[t.visibleRanges.length-1].end.line,a=Math.floor(i/100)*100,l=[],p=[],u=a+r;for(;u<=o;)u>=i&&(t.visibleRanges.find(h=>u>=h.start.line&&u<=h.end.line)?l.push(u):p.push(u)),u+=100;if(l.length===1)return l[0];if(l.length+p.length>1)throw new Error("Multiple lines matching");if(p.length===1)return p[0];throw new Error("Line is not in viewport")}}};var kg=class{constructor(e){this.mark=e}run(){return[]}};var Pg=class{constructor(e,r){this.markStageFactory=e;this.mark=r}run(){let e=this.markStageFactory.create(this.mark.anchor),r=this.markStageFactory.create(this.mark.active),n=e.run(),i=r.run();if(n.length!==1||i.length!==1)throw new Error("Expected single anchor and active target");return[xo(n[0],i[0],this.mark.excludeAnchor,this.mark.excludeActive)]}};var Mg=class{constructor(e,r){this.storedTargets=e;this.key=r}run(){let e=this.storedTargets.get(this.key);if(e==null||e.length===0)throw Error(`No available ${this.key} marks`);return e}};var Ag=class{constructor(e,r){this.targetPipelineRunner=e;this.mark=r}run(){return this.targetPipelineRunner.run(this.mark.target)}};var Dg=class{constructor(e,r){this.readableHatMap=e;this.storedTargets=r;this.create=this.create.bind(this)}setPipelineRunner(e){this.targetPipelineRunner=e}create(e){switch(e.type){case"cursor":return new va;case"that":case"source":case"keyboard":return new Mg(this.storedTargets,e.type);case"decoratedSymbol":return new _g(this.readableHatMap,e);case"lineNumber":return new Rg(e);case"range":return new Pg(this,e);case"nothing":return new kg(e);case"target":return new Ag(this.targetPipelineRunner,e);case"explicit":return new Eg(e);default:{let r=e,{type:n}=e;throw new Error(`Unknown mark: ${n}`)}}}};async function DI(t,e,r,n,i,o,a,l,p,u){r.active&&(r.log("command:"),r.log(JSON.stringify(u,null,2)));let d=SS(u),h=await n.getReadableMap(d.usePrePhraseSnapshot),g=XQ(t,e,a,r,o,h,i,l);for(let _ of p)g=_.wrapCommandRunner(h,g);a.clearCache();let x=await g.run(d);return await YQ(u,x)}async function YQ(t,e){if(zo(t))return e;if("returnValue"in e)return e.returnValue}function XQ(t,e,r,n,i,o,a,l){let p=new za(r,i,new Pa(r)),u=new Dg(o,i),d=new jm(p,u);return u.setPipelineRunner(d),new wg(e,n,i,d,new yg(t,a,l,p))}var II=["clojure","css","latex","ruby","rust","scala","scss"];async function FI(t,e){await JQ(t,e)}async function JQ(t,e){let r=[];for(let n of II)await t.loadLanguage(n),await e.loadLanguage(n),wi(Ll[n]??{}).map(i=>{e.get(n)?.getScopeHandler({type:i})!=null&&r.push(`Scope '${i}' defined as both legacy and new for language ${n}`)});if(r.length>0)throw Error(r.join(`
`))}function CI(t){return fP(t)?il(t.type).replace("."," "):t.type==="surroundingPair"?`Matching pair of ${il(t.delimiter)}`:t.type==="customRegex"?`Regex \`${t.regex}\``:"Unknown scope type"}var Ig=class{constructor(e){this.customSpokenFormGenerator=e;this.listeners=[];this.disposable=e.onDidChangeCustomSpokenForms(()=>this.onChange()),this.onDidChangeScopeInfo=this.onDidChangeScopeInfo.bind(this),this.getScopeTypeInfo=this.getScopeTypeInfo.bind(this),this.updateScopeTypeInfos()}onDidChangeScopeInfo(e){return e(this.getScopeTypeInfos()),this.listeners.push(e),{dispose:()=>{er(this.listeners,e)}}}async onChange(){this.updateScopeTypeInfos(),this.listeners.forEach(e=>e(this.scopeInfos))}updateScopeTypeInfos(){let e=[...qo.filter(r=>r!=="instance").map(r=>({type:r})),...Af.map(r=>({type:"surroundingPair",delimiter:r})),...this.customSpokenFormGenerator.getCustomRegexScopeTypes()];this.scopeInfos=e.map(r=>this.getScopeTypeInfo(r))}getScopeTypeInfos(){return this.scopeInfos}getScopeTypeInfo(e){return{scopeType:e,spokenForm:this.customSpokenFormGenerator.scopeTypeToSpokenForm(e),humanReadableName:CI(e),isLanguageSpecific:eZ(e)}}dispose(){this.disposable.dispose()}};function eZ(t){switch(t.type){case"string":case"argumentOrParameter":case"anonymousFunction":case"attribute":case"branch":case"class":case"className":case"collectionItem":case"collectionKey":case"command":case"comment":case"private.fieldAccess":case"functionCall":case"functionCallee":case"functionName":case"ifStatement":case"instance":case"list":case"map":case"name":case"namedFunction":case"regularExpression":case"statement":case"type":case"value":case"condition":case"section":case"sectionLevelOne":case"sectionLevelTwo":case"sectionLevelThree":case"sectionLevelFour":case"sectionLevelFive":case"sectionLevelSix":case"selector":case"private.switchStatementSubject":case"unit":case"xmlBothTags":case"xmlElement":case"xmlEndTag":case"xmlStartTag":case"part":case"chapter":case"subSection":case"subSubSection":case"namedParagraph":case"subParagraph":case"environment":case"textFragment":case"disqualifyDelimiter":return!0;case"character":case"word":case"token":case"identifier":case"line":case"sentence":case"paragraph":case"boundedParagraph":case"document":case"nonWhitespaceSequence":case"boundedNonWhitespaceSequence":case"url":case"notebookCell":case"surroundingPair":case"surroundingPairInterior":case"customRegex":case"glyph":return!1;case"oneOf":throw Error(`Can't decide whether scope type ${JSON.stringify(t,void 0,3)} is language-specific`)}}function Uv(t,e,r){if(!r)return t.document.range;let n=t.visibleRanges.reduce((a,l)=>a.union(l));n=t.document.range.intersection(n.with(n.start.translate(-10),n.end.translate(10)));let i=lf(Array.from(e.generateScopes(t,n.start,"forward",{containment:"required"})))?.domain??n,o=lf(Array.from(e.generateScopes(t,n.end,"forward",{containment:"required"})))?.domain??n;return i.union(o)}function xs(t){return{contentRange:t.contentRange,removalRange:t.getRemovalRange(),removalHighlightRange:t.isLine?on(t.getRemovalHighlightRange()):vt(t.getRemovalHighlightRange()),leadingDelimiter:OI(t.getLeadingDelimiterTarget()),trailingDelimiter:OI(t.getTrailingDelimiterTarget()),interior:t.getInterior()?.map(xs),boundary:t.getBoundary()?.map(xs),insertionDelimiter:t.insertionDelimiter}}function OI(t){return t!=null?xs(t):void 0}function NI(t,e,r,n,i){return _a(e.generateScopes(t,n.start,"forward",{includeDescendantScopes:!0,distalPosition:n.end}),o=>({domain:o.domain,ranges:o.getTargets(!1).map(a=>({range:a.contentRange,targets:i?tZ(r,a).map(xs):void 0}))}))}function tZ(t,e){try{return t.run(e)}catch(r){if(r.name==="NoContainingScopeError")return[];throw r}}function LI(t,e,r){return _a(e.generateScopes(t,r.start,"forward",{includeDescendantScopes:!0,distalPosition:r.end}),n=>({domain:n.domain,targets:n.getTargets(!1).map(xs)}))}var Fg=class{constructor(e,r){this.scopeHandlerFactory=e;this.modifierStageFactory=r;this.provideScopeRanges=this.provideScopeRanges.bind(this),this.provideIterationScopeRanges=this.provideIterationScopeRanges.bind(this)}provideScopeRanges(e,{scopeType:r,visibleOnly:n}){let i=this.scopeHandlerFactory.maybeCreate(r,e.document.languageId);return i==null?[]:LI(e,i,Uv(e,i,n))}provideIterationScopeRanges(e,{scopeType:r,visibleOnly:n,includeNestedTargets:i}){let{languageId:o}=e.document,a=this.scopeHandlerFactory.maybeCreate(r,o);if(a==null)return[];let l=this.scopeHandlerFactory.maybeCreate(a.iterationScopeType,o);return l==null?[]:NI(e,l,this.modifierStageFactory.create({type:"everyScope",scopeType:r}),Uv(e,a,n),i)}};var Cg=class{constructor(e,r){this.scopeRangeProvider=r;this.disposables=[];this.listeners=[];this.onChange=this.onChange.bind(this),this.onDidChangeScopeRanges=this.onDidChangeScopeRanges.bind(this),this.onDidChangeIterationScopeRanges=this.onDidChangeIterationScopeRanges.bind(this);let n=new Qn(D().configuration,()=>this.onChange());this.disposables.push(D().onDidChangeVisibleTextEditors(n.run),D().onDidOpenTextDocument(n.run),D().onDidCloseTextDocument(n.run),D().onDidChangeTextDocument(n.run),D().onDidChangeTextEditorVisibleRanges(n.run),e.onDidChangeDefinition(this.onChange),n)}onDidChangeScopeRanges(e,r){let n=()=>{D().visibleTextEditors.forEach(i=>{let o;try{o=this.scopeRangeProvider.provideScopeRanges(i,r)}catch(a){if(it(D().messages,"ScopeRangeWatcher.provide",a.message),o=[],D().runMode==="test")throw a}e(i,o)})};return this.listeners.push(n),n(),{dispose:()=>{er(this.listeners,n)}}}onDidChangeIterationScopeRanges(e,r){let n=()=>{D().visibleTextEditors.forEach(i=>{e(i,this.scopeRangeProvider.provideIterationScopeRanges(i,r))})};return this.listeners.push(n),n(),{dispose:()=>{er(this.listeners,n)}}}onChange(){this.listeners.forEach(e=>e())}dispose(){this.disposables.forEach(({dispose:e})=>{try{e()}catch{}})}};var Og=class{constructor(e){this.scopeHandlerFactory=e;this.getScopeSupport=this.getScopeSupport.bind(this),this.getIterationScopeSupport=this.getIterationScopeSupport.bind(this)}getScopeSupport(e,r){let{languageId:n}=e.document,i=this.scopeHandlerFactory.maybeCreate(r,n);return i==null?VI(n,r):UI(e,i)?0:1}getIterationScopeSupport(e,r){let{languageId:n}=e.document,i=this.scopeHandlerFactory.maybeCreate(r,n);if(i==null)return VI(n,r);let o=this.scopeHandlerFactory.maybeCreate(i.iterationScopeType,n);return o==null?3:UI(e,o)?0:1}};function UI(t,e){return!hP(e.generateScopes(t,new ce(0,0),"forward"))}function VI(t,e){switch(e.type){case"boundedNonWhitespaceSequence":case"surroundingPair":return 2;case"notebookCell":return 3;default:return Ll[t]?.[e.type]!=null?2:3}}var Ng=class{constructor(e,r,n){this.scopeSupportChecker=r;this.scopeInfoProvider=n;this.listeners=[];this.onChange=this.onChange.bind(this),this.onDidChangeScopeSupport=this.onDidChangeScopeSupport.bind(this);let i=new Qn(D().configuration,()=>this.onChange());this.disposable=mP(D().onDidOpenTextDocument(i.run),D().onDidCloseTextDocument(i.run),D().onDidChangeActiveTextEditor(i.run),D().onDidChangeTextDocument(i.run),e.onDidChangeDefinition(i.run),this.scopeInfoProvider.onDidChangeScopeInfo(this.onChange),i)}onDidChangeScopeSupport(e){return e(this.getSupportLevels()),this.listeners.push(e),{dispose:()=>{er(this.listeners,e)}}}onChange(){if(this.listeners.length===0)return;let e=this.getSupportLevels();this.listeners.forEach(r=>r(e))}getSupportLevels(){let e=D().activeTextEditor,r=e==null?()=>3:o=>this.scopeSupportChecker.getScopeSupport(e,o),n=e==null?()=>3:o=>this.scopeSupportChecker.getIterationScopeSupport(e,o);return this.scopeInfoProvider.getScopeTypeInfos().map(o=>({...o,support:r(o.scopeType),iterationScopeSupport:n(o.scopeType)}))}dispose(){this.disposable.dispose()}};async function BI({ide:t,hats:e,treeSitterQueryProvider:r,treeSitter:n=new Gd,commandServerApi:i=new Wd,talonSpokenForms:o=new zd,snippets:a=new qd}){yd(t);let l=new Od(t),p=new Hd,u=new Td,d=new Cd(t,u),h=new Zd(o),g=e!=null?new Vd(p,l,e,i):new $d;g.allocateHats();let x=r?await Cm.create(t,n,r):new jd;t.disposeOnExit(p,x,g,l,d);let _=[],w,C=M=>(w=M,DI(n,i,l,g,a,u,x,p,_,M));return{commandApi:{runCommand(M){return C(M)},runCommandSafe(...M){return C(Df(M))},repeatPreviousCommand(){if(w==null)throw new Error("No previous command");return C(w)}},scopeProvider:nZ(x,u,h),customSpokenFormGenerator:h,storedTargets:u,hatTokenMap:g,injectIde:yd,runIntegrationTests:()=>FI(n,x),addCommandRunnerDecorator:M=>{_.push(M)}}}function nZ(t,e,r){let n=new Pa(t),i=new Fg(n,new za(t,e,n)),o=new Cg(t,i),a=new Og(n),l=new Ig(r),p=new Ng(t,a,l);return{provideScopeRanges:i.provideScopeRanges,provideIterationScopeRanges:i.provideIterationScopeRanges,onDidChangeScopeRanges:o.onDidChangeScopeRanges,onDidChangeIterationScopeRanges:o.onDidChangeIterationScopeRanges,getScopeSupport:a.getScopeSupport,getIterationScopeSupport:a.getIterationScopeSupport,onDidChangeScopeSupport:p.onDidChangeScopeSupport,getScopeInfo:l.getScopeTypeInfo,onDidChangeScopeInfo:l.onDidChangeScopeInfo}}function HI(t,e){switch(e.type){case"UntypedTarget":return new Pt({editor:t,isReversed:e.isReversed,contentRange:vf(e.contentRange),hasExplicitRange:e.hasExplicitRange});case"LineTarget":return new Vr({editor:t,isReversed:e.isReversed,contentRange:vf(e.contentRange)});default:throw Error(`Unsupported target type ${e.type}`)}}var COe=Symbol("unused");var ap=class{constructor(e){this.position=e}},OOe={$0:new ap(0),$1:new ap(1),$2:new ap(2)};var WI=require("node:events"),Lg=class{constructor(){this.apis=new Map,this.commands=new Map,this.eventEmitter=new WI.EventEmitter}registerExtensionApi(e,r){this.apis.set(e,r)}getExtensionApi(e){return this.apis.get(e)}registerCommand(e,r){this.commands.set(e,r)}async executeCommand(e,...r){return await this.commands.get(e)(...r)}onEvent(e,r){return this.eventEmitter.on(e,r)}emitEvent(e,...r){return this.eventEmitter.emit(e,...r)}};function $r(){return global._neovimRegistry==null&&(global._neovimRegistry=new Lg),global._neovimRegistry}var $I="pokey.cursorless";async function Ug(t,e){let r='return require("cursorless").buffer_get_selection()',[n,i,o,a,l]=await e.executeLua(r,[]),p;return l===!0?p=[new Te(new ce(o-1,a-1),new ce(n-1,i-1))]:p=[new Te(new ce(n-1,i-1),new ce(o-1,a-1))],console.debug(`bufferGetSelections(): selections=(${p[0].start.line}, ${p[0].start.character}), (${p[0].end.line}, ${p[0].end.character}) neovim=(${n},${i}),(${o},${a}),reverse=${l}`),p}async function jI(t,e){if(e.length!==1)throw new Error("bufferSetSelections() only supports one selection");let r=`return require("cursorless").select_range(${e[0].start.line+1}, ${e[0].start.character}, ${e[0].end.line+1}, ${e[0].end.character})`;console.debug(`bufferSetSelections() selections=(${e[0].start.line},${e[0].start.character}),(${e[0].end.line},${e[0].end.character}) luaCode="${r}"`),await t.executeLua(r,[])}async function qI(t,e,r){let n='return require("cursorless").window_get_visible_lines()',[i,o]=await e.executeLua(n,[]),a=new W(new ce(i-1,0),new ce(o-1,r[o-1].length-1));return console.debug(`windowGetVisibleRanges(): range=(${a.start.line}, ${a.start.character}), (${a.end.line}, ${a.end.character})`),[a]}async function zI(t){return await t.executeLua('return require("cursorless.utils").cursorless_nvim_path()',[])}async function Vg(t,e){await e.callFunction("setreg",["*",t])}async function GI(t){return await t.callFunction("getreg",["*"])}async function KI(t){await t.executeLua('return require("cursorless.utils").paste()',[])}async function QI(t){await t.executeLua('return require("cursorless.utils").mode_switch_nt()',[])}async function ZI(t){await t.executeLua('return require("cursorless.utils").mode_switch_t()',[])}async function YI(t,e){let r=`vim.notify("${e}")`;await t.executeLua(r,[])}var iZ={clipboardCopy:{acceptsLocation:!1},clipboardPaste:!0,toggleLineComment:void 0,indentLine:void 0,outdentLine:void 0,rename:void 0,quickFix:void 0,revealDefinition:void 0,revealTypeDefinition:void 0,showHover:void 0,showDebugHover:void 0,extractVariable:void 0,fold:void 0,highlight:{acceptsLocation:!0},unfold:void 0,showReferences:void 0,insertLineAfter:void 0},Bg=class{constructor(){this.commands=iZ}};var cp=class{constructor(e){this.client=e}async readText(){return await GI(this.client)}async writeText(e){return await Vg(e,this.client)}};var Hg=dr(Vv(),1);var pp=class{constructor(){this.notifier=new Wt;this.mocks={...hf};this.scopes=[];this.onDidChangeConfiguration=this.notifier.registerListener;this.onDidChangeConfiguration=this.onDidChangeConfiguration.bind(this)}getOwnConfiguration(e,r){if(r!=null){for(let{scope:n,values:i}of this.scopes)if(oZ(n,r))return(0,Hg.get)(i,e)??(0,Hg.get)(this.mocks,e)}return(0,Hg.get)(this.mocks,e)}mockConfiguration(e,r){this.mocks[e]=r,this.notifier.notifyListeners()}mockConfigurationScope(e,r,n=!1){this.scopes.push({scope:e,values:r}),n||this.notifier.notifyListeners()}};function oZ(t,e){return t.languageId===e.languageId}async function Bv(t,e,r,n){console.debug("neovimEdit() [unsorted]:");for(let a of n)console.debug(`	range=${JSON.stringify(a.range)}, text='${a.text}', isReplace=${a.isReplace}`);n.sort((a,l)=>(XI(a)||JI(a))&&(XI(l)||JI(l))?1:a.range.start.line===l.range.start.line?l.range.start.character-a.range.start.character:l.range.start.line-a.range.start.line),console.debug("neovimEdit() [sorted]:");for(let a of n)console.debug(`	range=${JSON.stringify(a.range)}, text='${a.text}', isReplace=${a.isReplace}`);let i=e.getTextDocument(await t.window.buffer),o=[];for(let a of n)o.push({range:a.range,rangeOffset:i.offsetAt(a.range.start),rangeLength:i.offsetAt(a.range.end)-i.offsetAt(a.range.start),text:a.text});$r().emitEvent("onDidChangeTextDocument",{document:i,contentChanges:o});for(let a of n){let{range:l,text:p,isReplace:u}=a;p===""?await e1(t,l):l.isEmpty&&!u?await t1(t,l.start,p):await sZ(t,l,p)}return await e.updateTextEditor(),!0}async function e1(t,e){console.debug(`neovimDelete(): range=${JSON.stringify(e)}`);let r=await t.window.buffer,n=(await r.getLines({start:e.end.line,end:e.end.line+1,strictIndexing:!0}))[0],i=n.slice(e.end.character);if(e.start.line===e.end.line){let l=n.slice(0,e.start.character)+i;await r.setLines(l,{start:e.start.line,end:e.start.line+1,strictIndexing:!0});return}if(e.start.character===0){await r.setLines(i,{start:e.start.line,end:e.end.line+1,strictIndexing:!0});return}let o=(await r.getLines({start:e.start.line,end:e.start.line+1,strictIndexing:!0}))[0],a=o.slice(0,e.start.character);if(e.start.character<=o.length){await r.setLines(a+i,{start:e.start.line,end:e.end.line+1,strictIndexing:!0});return}await r.setLines([a,i],{start:e.start.line,end:e.end.line+1,strictIndexing:!0})}async function t1(t,e,r){console.debug(`neovimInsert(): position=${JSON.stringify(e)}, text='${r}'`);let n=r.replace(/(?:\r\n|\r|\n)/g,`
`).split(`
`),i=await t.window.buffer,o=(await i.getLines({start:e.line,end:e.line+1,strictIndexing:!0}))[0],a=o.slice(0,e.character),l=o.slice(e.character);if(n.length===1){let d=a+n[0]+l;await i.setLines(d,{start:e.line,end:e.line+1,strictIndexing:!0});return}let p=a+n[0],u=n[n.length-1]+l;await i.setLines([p,...n.slice(1,n.length-1),u],{start:e.line,end:e.line+1,strictIndexing:!0})}async function sZ(t,e,r){console.debug(`neovimReplace(): range=${JSON.stringify(e)}, text='${r}'`),await e1(t,e),await t1(t,e.start,r)}function XI(t){return t.range.isEmpty&&!t.isReplace}function JI(t){return t.text!==""&&!!(!t.range.isEmpty||t.isReplace)}function r1(t){return $r().onEvent("onDidChangeTextDocument",t),i1()}function n1(t,e,r){return $r().onEvent("onDidOpenTextDocument",t),i1()}function i1(){return{dispose(){}}}var up=class{constructor(){this.data={...gf}}get(e){return this.data[e]}set(e,r){return this.data[e]=r,Promise.resolve()}};var cC=dr(Vv(),1);var fp=class{async showMessage(e,r,n,...i){}};async function o1(t,e){let r=e.activeTextEditor,n=await t.window,i=await Ug(n,t),o=r.document.getText(i[0]);await Vg(o,t)}async function s1(t,e){await KI(t)}var Wg=class{constructor(e,r,n,i,o,a,l){this.id=e;this.client=r;this.neovimIDE=n;this.window=i;this._document=o,this._selections=l,this._visibleRanges=a}get document(){return this._document}updateDocument(e,r,n,i){if(n)this._document=n;else if(i)this._document.update(i);else throw Error("updateDocument(): invalid arguments");return this._selections=r,this._visibleRanges=e,this._document}get selections(){return this._selections}async setSelections(e){this._selections=e,await jI(this.client,e)}get visibleRanges(){return this._visibleRanges}get options(){throw Error("get options Not implemented")}set options(e){throw Error("set options Not implemented")}get isActive(){return!0}isEqual(e){return this.id===e.id}async revealRange(e){}revealLine(e,r){throw Error("revealLine Not implemented")}async edit(e){return await Bv(this.client,this.neovimIDE,this.window,e)}focus(){return Promise.resolve()}editNewNotebookCellAbove(){throw Error("editNewNotebookCellAbove Not implemented")}editNewNotebookCellBelow(){throw Error("editNewNotebookCellBelow Not implemented")}openLink(e,r){throw Error("openLink Not implemented")}fold(e){throw Error("fold Not implemented")}unfold(e){throw Error("unfold Not implemented")}toggleBreakpoint(e){throw Error("toggleBreakpoint Not implemented")}async toggleLineComment(e){throw Error("toggleLineComment Not implemented")}async clipboardCopy(e){await o1(this.client,this.neovimIDE)}async clipboardPaste(){await s1(this.client,this.neovimIDE)}async indentLine(e){throw Error("indentLine Not implemented")}async outdentLine(e){throw Error("outdentLine Not implemented")}async insertLineAfter(e){throw Error("insertLineAfter Not implemented")}insertSnippet(e,r){throw Error("insertSnippet Not implemented")}async rename(e){throw Error("rename Not implemented")}async showReferences(e){throw Error("showReferences Not implemented")}async quickFix(e){throw Error("quickFix Not implemented")}async revealDefinition(e){throw Error("revealDefinition Not implemented")}async revealTypeDefinition(e){throw Error("revealTypeDefinition Not implemented")}async showHover(e){throw Error("showHover Not implemented")}async showDebugHover(e){throw Error("showDebugHover Not implemented")}async extractVariable(e){throw Error("extractVariable Not implemented")}};var aw=dr(require("path"),1);var a1;(()=>{"use strict";var t={470:i=>{function o(p){if(typeof p!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(p))}function a(p,u){for(var d,h="",g=0,x=-1,_=0,w=0;w<=p.length;++w){if(w<p.length)d=p.charCodeAt(w);else{if(d===47)break;d=47}if(d===47){if(!(x===w-1||_===1))if(x!==w-1&&_===2){if(h.length<2||g!==2||h.charCodeAt(h.length-1)!==46||h.charCodeAt(h.length-2)!==46){if(h.length>2){var C=h.lastIndexOf("/");if(C!==h.length-1){C===-1?(h="",g=0):g=(h=h.slice(0,C)).length-1-h.lastIndexOf("/"),x=w,_=0;continue}}else if(h.length===2||h.length===1){h="",g=0,x=w,_=0;continue}}u&&(h.length>0?h+="/..":h="..",g=2)}else h.length>0?h+="/"+p.slice(x+1,w):h=p.slice(x+1,w),g=w-x-1;x=w,_=0}else d===46&&_!==-1?++_:_=-1}return h}var l={resolve:function(){for(var p,u="",d=!1,h=arguments.length-1;h>=-1&&!d;h--){var g;h>=0?g=arguments[h]:(p===void 0&&(p=process.cwd()),g=p),o(g),g.length!==0&&(u=g+"/"+u,d=g.charCodeAt(0)===47)}return u=a(u,!d),d?u.length>0?"/"+u:"/":u.length>0?u:"."},normalize:function(p){if(o(p),p.length===0)return".";var u=p.charCodeAt(0)===47,d=p.charCodeAt(p.length-1)===47;return(p=a(p,!u)).length!==0||u||(p="."),p.length>0&&d&&(p+="/"),u?"/"+p:p},isAbsolute:function(p){return o(p),p.length>0&&p.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var p,u=0;u<arguments.length;++u){var d=arguments[u];o(d),d.length>0&&(p===void 0?p=d:p+="/"+d)}return p===void 0?".":l.normalize(p)},relative:function(p,u){if(o(p),o(u),p===u||(p=l.resolve(p))===(u=l.resolve(u)))return"";for(var d=1;d<p.length&&p.charCodeAt(d)===47;++d);for(var h=p.length,g=h-d,x=1;x<u.length&&u.charCodeAt(x)===47;++x);for(var _=u.length-x,w=g<_?g:_,C=-1,M=0;M<=w;++M){if(M===w){if(_>w){if(u.charCodeAt(x+M)===47)return u.slice(x+M+1);if(M===0)return u.slice(x+M)}else g>w&&(p.charCodeAt(d+M)===47?C=M:M===0&&(C=0));break}var U=p.charCodeAt(d+M);if(U!==u.charCodeAt(x+M))break;U===47&&(C=M)}var Z="";for(M=d+C+1;M<=h;++M)M!==h&&p.charCodeAt(M)!==47||(Z.length===0?Z+="..":Z+="/..");return Z.length>0?Z+u.slice(x+C):(x+=C,u.charCodeAt(x)===47&&++x,u.slice(x))},_makeLong:function(p){return p},dirname:function(p){if(o(p),p.length===0)return".";for(var u=p.charCodeAt(0),d=u===47,h=-1,g=!0,x=p.length-1;x>=1;--x)if((u=p.charCodeAt(x))===47){if(!g){h=x;break}}else g=!1;return h===-1?d?"/":".":d&&h===1?"//":p.slice(0,h)},basename:function(p,u){if(u!==void 0&&typeof u!="string")throw new TypeError('"ext" argument must be a string');o(p);var d,h=0,g=-1,x=!0;if(u!==void 0&&u.length>0&&u.length<=p.length){if(u.length===p.length&&u===p)return"";var _=u.length-1,w=-1;for(d=p.length-1;d>=0;--d){var C=p.charCodeAt(d);if(C===47){if(!x){h=d+1;break}}else w===-1&&(x=!1,w=d+1),_>=0&&(C===u.charCodeAt(_)?--_==-1&&(g=d):(_=-1,g=w))}return h===g?g=w:g===-1&&(g=p.length),p.slice(h,g)}for(d=p.length-1;d>=0;--d)if(p.charCodeAt(d)===47){if(!x){h=d+1;break}}else g===-1&&(x=!1,g=d+1);return g===-1?"":p.slice(h,g)},extname:function(p){o(p);for(var u=-1,d=0,h=-1,g=!0,x=0,_=p.length-1;_>=0;--_){var w=p.charCodeAt(_);if(w!==47)h===-1&&(g=!1,h=_+1),w===46?u===-1?u=_:x!==1&&(x=1):u!==-1&&(x=-1);else if(!g){d=_+1;break}}return u===-1||h===-1||x===0||x===1&&u===h-1&&u===d+1?"":p.slice(u,h)},format:function(p){if(p===null||typeof p!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof p);return function(u,d){var h=d.dir||d.root,g=d.base||(d.name||"")+(d.ext||"");return h?h===d.root?h+g:h+"/"+g:g}(0,p)},parse:function(p){o(p);var u={root:"",dir:"",base:"",ext:"",name:""};if(p.length===0)return u;var d,h=p.charCodeAt(0),g=h===47;g?(u.root="/",d=1):d=0;for(var x=-1,_=0,w=-1,C=!0,M=p.length-1,U=0;M>=d;--M)if((h=p.charCodeAt(M))!==47)w===-1&&(C=!1,w=M+1),h===46?x===-1?x=M:U!==1&&(U=1):x!==-1&&(U=-1);else if(!C){_=M+1;break}return x===-1||w===-1||U===0||U===1&&x===w-1&&x===_+1?w!==-1&&(u.base=u.name=_===0&&g?p.slice(1,w):p.slice(_,w)):(_===0&&g?(u.name=p.slice(1,x),u.base=p.slice(1,w)):(u.name=p.slice(_,x),u.base=p.slice(_,w)),u.ext=p.slice(x,w)),_>0?u.dir=p.slice(0,_-1):g&&(u.dir="/"),u},sep:"/",delimiter:":",win32:null,posix:null};l.posix=l,i.exports=l}},e={};function r(i){var o=e[i];if(o!==void 0)return o.exports;var a=e[i]={exports:{}};return t[i](a,a.exports,r),a.exports}r.d=(i,o)=>{for(var a in o)r.o(o,a)&&!r.o(i,a)&&Object.defineProperty(i,a,{enumerable:!0,get:o[a]})},r.o=(i,o)=>Object.prototype.hasOwnProperty.call(i,o),r.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})};var n={};(()=>{let i;r.r(n),r.d(n,{URI:()=>g,Utils:()=>N}),typeof process=="object"?i=process.platform==="win32":typeof navigator=="object"&&(i=navigator.userAgent.indexOf("Windows")>=0);let o=/^\w[\w\d+.-]*$/,a=/^\//,l=/^\/\//;function p(O,I){if(!O.scheme&&I)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${O.authority}", path: "${O.path}", query: "${O.query}", fragment: "${O.fragment}"}`);if(O.scheme&&!o.test(O.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(O.path){if(O.authority){if(!a.test(O.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(l.test(O.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}let u="",d="/",h=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class g{static isUri(I){return I instanceof g||!!I&&typeof I.authority=="string"&&typeof I.fragment=="string"&&typeof I.path=="string"&&typeof I.query=="string"&&typeof I.scheme=="string"&&typeof I.fsPath=="string"&&typeof I.with=="function"&&typeof I.toString=="function"}scheme;authority;path;query;fragment;constructor(I,$,q,K,Q,te=!1){typeof I=="object"?(this.scheme=I.scheme||u,this.authority=I.authority||u,this.path=I.path||u,this.query=I.query||u,this.fragment=I.fragment||u):(this.scheme=function(me,re){return me||re?me:"file"}(I,te),this.authority=$||u,this.path=function(me,re){switch(me){case"https":case"http":case"file":re?re[0]!==d&&(re=d+re):re=d}return re}(this.scheme,q||u),this.query=K||u,this.fragment=Q||u,p(this,te))}get fsPath(){return U(this,!1)}with(I){if(!I)return this;let{scheme:$,authority:q,path:K,query:Q,fragment:te}=I;return $===void 0?$=this.scheme:$===null&&($=u),q===void 0?q=this.authority:q===null&&(q=u),K===void 0?K=this.path:K===null&&(K=u),Q===void 0?Q=this.query:Q===null&&(Q=u),te===void 0?te=this.fragment:te===null&&(te=u),$===this.scheme&&q===this.authority&&K===this.path&&Q===this.query&&te===this.fragment?this:new _($,q,K,Q,te)}static parse(I,$=!1){let q=h.exec(I);return q?new _(q[2]||u,de(q[4]||u),de(q[5]||u),de(q[7]||u),de(q[9]||u),$):new _(u,u,u,u,u)}static file(I){let $=u;if(i&&(I=I.replace(/\\/g,d)),I[0]===d&&I[1]===d){let q=I.indexOf(d,2);q===-1?($=I.substring(2),I=d):($=I.substring(2,q),I=I.substring(q)||d)}return new _("file",$,I,u,u)}static from(I){let $=new _(I.scheme,I.authority,I.path,I.query,I.fragment);return p($,!0),$}toString(I=!1){return Z(this,I)}toJSON(){return this}static revive(I){if(I){if(I instanceof g)return I;{let $=new _(I);return $._formatted=I.external,$._fsPath=I._sep===x?I.fsPath:null,$}}return I}}let x=i?1:void 0;class _ extends g{_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=U(this,!1)),this._fsPath}toString(I=!1){return I?Z(this,!0):(this._formatted||(this._formatted=Z(this,!1)),this._formatted)}toJSON(){let I={$mid:1};return this._fsPath&&(I.fsPath=this._fsPath,I._sep=x),this._formatted&&(I.external=this._formatted),this.path&&(I.path=this.path),this.scheme&&(I.scheme=this.scheme),this.authority&&(I.authority=this.authority),this.query&&(I.query=this.query),this.fragment&&(I.fragment=this.fragment),I}}let w={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function C(O,I,$){let q,K=-1;for(let Q=0;Q<O.length;Q++){let te=O.charCodeAt(Q);if(te>=97&&te<=122||te>=65&&te<=90||te>=48&&te<=57||te===45||te===46||te===95||te===126||I&&te===47||$&&te===91||$&&te===93||$&&te===58)K!==-1&&(q+=encodeURIComponent(O.substring(K,Q)),K=-1),q!==void 0&&(q+=O.charAt(Q));else{q===void 0&&(q=O.substr(0,Q));let me=w[te];me!==void 0?(K!==-1&&(q+=encodeURIComponent(O.substring(K,Q)),K=-1),q+=me):K===-1&&(K=Q)}}return K!==-1&&(q+=encodeURIComponent(O.substring(K))),q!==void 0?q:O}function M(O){let I;for(let $=0;$<O.length;$++){let q=O.charCodeAt($);q===35||q===63?(I===void 0&&(I=O.substr(0,$)),I+=w[q]):I!==void 0&&(I+=O[$])}return I!==void 0?I:O}function U(O,I){let $;return $=O.authority&&O.path.length>1&&O.scheme==="file"?`//${O.authority}${O.path}`:O.path.charCodeAt(0)===47&&(O.path.charCodeAt(1)>=65&&O.path.charCodeAt(1)<=90||O.path.charCodeAt(1)>=97&&O.path.charCodeAt(1)<=122)&&O.path.charCodeAt(2)===58?I?O.path.substr(1):O.path[1].toLowerCase()+O.path.substr(2):O.path,i&&($=$.replace(/\//g,"\\")),$}function Z(O,I){let $=I?M:C,q="",{scheme:K,authority:Q,path:te,query:me,fragment:re}=O;if(K&&(q+=K,q+=":"),(Q||K==="file")&&(q+=d,q+=d),Q){let Re=Q.indexOf("@");if(Re!==-1){let ar=Q.substr(0,Re);Q=Q.substr(Re+1),Re=ar.lastIndexOf(":"),Re===-1?q+=$(ar,!1,!1):(q+=$(ar.substr(0,Re),!1,!1),q+=":",q+=$(ar.substr(Re+1),!1,!0)),q+="@"}Q=Q.toLowerCase(),Re=Q.lastIndexOf(":"),Re===-1?q+=$(Q,!1,!0):(q+=$(Q.substr(0,Re),!1,!0),q+=Q.substr(Re))}if(te){if(te.length>=3&&te.charCodeAt(0)===47&&te.charCodeAt(2)===58){let Re=te.charCodeAt(1);Re>=65&&Re<=90&&(te=`/${String.fromCharCode(Re+32)}:${te.substr(3)}`)}else if(te.length>=2&&te.charCodeAt(1)===58){let Re=te.charCodeAt(0);Re>=65&&Re<=90&&(te=`${String.fromCharCode(Re+32)}:${te.substr(2)}`)}q+=$(te,!0,!1)}return me&&(q+="?",q+=$(me,!1,!1)),re&&(q+="#",q+=I?re:C(re,!1,!1)),q}function ne(O){try{return decodeURIComponent(O)}catch{return O.length>3?O.substr(0,3)+ne(O.substr(3)):O}}let ge=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function de(O){return O.match(ge)?O.replace(ge,I=>ne(I)):O}var mt=r(470);let It=mt.posix||mt,ot="/";var N;(function(O){O.joinPath=function(I,...$){return I.with({path:It.join(I.path,...$)})},O.resolvePath=function(I,...$){let q=I.path,K=!1;q[0]!==ot&&(q=ot+q,K=!0);let Q=It.resolve(q,...$);return K&&Q[0]===ot&&!I.authority&&(Q=Q.substring(1)),I.with({path:Q})},O.dirname=function(I){if(I.path.length===0||I.path===ot)return I;let $=It.dirname(I.path);return $.length===1&&$.charCodeAt(0)===46&&($=""),I.with({path:$})},O.basename=function(I){return It.basename(I.path)},O.extname=function(I){return It.extname(I.path)}})(N||(N={}))})(),a1=n})();var{URI:c1,Utils:CNe}=a1;var M1=dr(v1(),1);var mp=t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>65536)throw new TypeError("pattern is too long")};var mZ={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},hp=t=>t.replace(/[[\]\\-]/g,"\\$&"),hZ=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),b1=t=>t.join(""),w1=(t,e)=>{let r=e;if(t.charAt(r)!=="[")throw new Error("not in a brace expression");let n=[],i=[],o=r+1,a=!1,l=!1,p=!1,u=!1,d=r,h="";e:for(;o<t.length;){let w=t.charAt(o);if((w==="!"||w==="^")&&o===r+1){u=!0,o++;continue}if(w==="]"&&a&&!p){d=o+1;break}if(a=!0,w==="\\"&&!p){p=!0,o++;continue}if(w==="["&&!p){for(let[C,[M,U,Z]]of Object.entries(mZ))if(t.startsWith(C,o)){if(h)return["$.",!1,t.length-r,!0];o+=C.length,Z?i.push(M):n.push(M),l=l||U;continue e}}if(p=!1,h){w>h?n.push(hp(h)+"-"+hp(w)):w===h&&n.push(hp(w)),h="",o++;continue}if(t.startsWith("-]",o+1)){n.push(hp(w+"-")),o+=2;continue}if(t.startsWith("-",o+1)){h=w,o+=2;continue}n.push(hp(w)),o++}if(d<o)return["",!1,0,!1];if(!n.length&&!i.length)return["$.",!1,t.length-r,!0];if(i.length===0&&n.length===1&&/^\\?.$/.test(n[0])&&!u){let w=n[0].length===2?n[0].slice(-1):n[0];return[hZ(w),!1,d-r,!1]}let g="["+(u?"^":"")+b1(n)+"]",x="["+(u?"":"^")+b1(i)+"]";return[n.length&&i.length?"("+g+"|"+x+")":n.length?g:x,l,d-r,!0]};var Cn=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");var gZ=new Set(["!","?","+","*","@"]),_1=t=>gZ.has(t),yZ="(?!(?:^|/)\\.\\.?(?:$|/))",$g="(?!\\.)",xZ=new Set(["[","."]),TZ=new Set(["..","."]),SZ=new Set("().*{}+?[]^$\\!"),vZ=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),$v="[^/]",E1=$v+"*?",R1=$v+"+?",ec=class t{type;#e;#t;#o=!1;#n=[];#s;#S;#l;#u=!1;#a;#c;#i=!1;constructor(e,r,n={}){this.type=e,e&&(this.#t=!0),this.#s=r,this.#e=this.#s?this.#s.#e:this,this.#a=this.#e===this?n:this.#e.#a,this.#l=this.#e===this?[]:this.#e.#l,e==="!"&&!this.#e.#u&&this.#l.push(this),this.#S=this.#s?this.#s.#n.length:0}get hasMagic(){if(this.#t!==void 0)return this.#t;for(let e of this.#n)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#t=!0;return this.#t}toString(){return this.#c!==void 0?this.#c:this.type?this.#c=this.type+"("+this.#n.map(e=>String(e)).join("|")+")":this.#c=this.#n.map(e=>String(e)).join("")}#g(){if(this!==this.#e)throw new Error("should only call on root");if(this.#u)return this;this.toString(),this.#u=!0;let e;for(;e=this.#l.pop();){if(e.type!=="!")continue;let r=e,n=r.#s;for(;n;){for(let i=r.#S+1;!n.type&&i<n.#n.length;i++)for(let o of e.#n){if(typeof o=="string")throw new Error("string part in extglob AST??");o.copyIn(n.#n[i])}r=n,n=r.#s}}return this}push(...e){for(let r of e)if(r!==""){if(typeof r!="string"&&!(r instanceof t&&r.#s===this))throw new Error("invalid part: "+r);this.#n.push(r)}}toJSON(){let e=this.type===null?this.#n.slice().map(r=>typeof r=="string"?r:r.toJSON()):[this.type,...this.#n.map(r=>r.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#u&&this.#s?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#s?.isStart())return!1;if(this.#S===0)return!0;let e=this.#s;for(let r=0;r<this.#S;r++){let n=e.#n[r];if(!(n instanceof t&&n.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#s?.type==="!")return!0;if(!this.#s?.isEnd())return!1;if(!this.type)return this.#s?.isEnd();let e=this.#s?this.#s.#n.length:0;return this.#S===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let r=new t(this.type,e);for(let n of this.#n)r.copyIn(n);return r}static#y(e,r,n,i){let o=!1,a=!1,l=-1,p=!1;if(r.type===null){let x=n,_="";for(;x<e.length;){let w=e.charAt(x++);if(o||w==="\\"){o=!o,_+=w;continue}if(a){x===l+1?(w==="^"||w==="!")&&(p=!0):w==="]"&&!(x===l+2&&p)&&(a=!1),_+=w;continue}else if(w==="["){a=!0,l=x,p=!1,_+=w;continue}if(!i.noext&&_1(w)&&e.charAt(x)==="("){r.push(_),_="";let C=new t(w,r);x=t.#y(e,C,x,i),r.push(C);continue}_+=w}return r.push(_),x}let u=n+1,d=new t(null,r),h=[],g="";for(;u<e.length;){let x=e.charAt(u++);if(o||x==="\\"){o=!o,g+=x;continue}if(a){u===l+1?(x==="^"||x==="!")&&(p=!0):x==="]"&&!(u===l+2&&p)&&(a=!1),g+=x;continue}else if(x==="["){a=!0,l=u,p=!1,g+=x;continue}if(_1(x)&&e.charAt(u)==="("){d.push(g),g="";let _=new t(x,d);d.push(_),u=t.#y(e,_,u,i);continue}if(x==="|"){d.push(g),g="",h.push(d),d=new t(null,r);continue}if(x===")")return g===""&&r.#n.length===0&&(r.#i=!0),d.push(g),g="",r.push(...h,d),u;g+=x}return r.type=null,r.#t=void 0,r.#n=[e.substring(n-1)],u}static fromGlob(e,r={}){let n=new t(null,void 0,r);return t.#y(e,n,0,r),n}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[r,n,i,o]=this.toRegExpSource();if(!(i||this.#t||this.#a.nocase&&!this.#a.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return n;let l=(this.#a.nocase?"i":"")+(o?"u":"");return Object.assign(new RegExp(`^${r}$`,l),{_src:r,_glob:e})}get options(){return this.#a}toRegExpSource(e){let r=e??!!this.#a.dot;if(this.#e===this&&this.#g(),!this.type){let p=this.isStart()&&this.isEnd(),u=this.#n.map(x=>{let[_,w,C,M]=typeof x=="string"?t.#f(x,this.#t,p):x.toRegExpSource(e);return this.#t=this.#t||C,this.#o=this.#o||M,_}).join(""),d="";if(this.isStart()&&typeof this.#n[0]=="string"&&!(this.#n.length===1&&TZ.has(this.#n[0]))){let _=xZ,w=r&&_.has(u.charAt(0))||u.startsWith("\\.")&&_.has(u.charAt(2))||u.startsWith("\\.\\.")&&_.has(u.charAt(4)),C=!r&&!e&&_.has(u.charAt(0));d=w?yZ:C?$g:""}let h="";return this.isEnd()&&this.#e.#u&&this.#s?.type==="!"&&(h="(?:$|\\/)"),[d+u+h,Cn(u),this.#t=!!this.#t,this.#o]}let n=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",o=this.#d(r);if(this.isStart()&&this.isEnd()&&!o&&this.type!=="!"){let p=this.toString();return this.#n=[p],this.type=null,this.#t=void 0,[p,Cn(this.toString()),!1,!1]}let a=!n||e||r||!$g?"":this.#d(!0);a===o&&(a=""),a&&(o=`(?:${o})(?:${a})*?`);let l="";if(this.type==="!"&&this.#i)l=(this.isStart()&&!r?$g:"")+R1;else{let p=this.type==="!"?"))"+(this.isStart()&&!r&&!e?$g:"")+E1+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&a?")":this.type==="*"&&a?")?":`)${this.type}`;l=i+o+p}return[l,Cn(o),this.#t=!!this.#t,this.#o]}#d(e){return this.#n.map(r=>{if(typeof r=="string")throw new Error("string type in extglob ast??");let[n,i,o,a]=r.toRegExpSource(e);return this.#o=this.#o||a,n}).filter(r=>!(this.isStart()&&this.isEnd())||!!r).join("|")}static#f(e,r,n=!1){let i=!1,o="",a=!1;for(let l=0;l<e.length;l++){let p=e.charAt(l);if(i){i=!1,o+=(SZ.has(p)?"\\":"")+p;continue}if(p==="\\"){l===e.length-1?o+="\\\\":i=!0;continue}if(p==="["){let[u,d,h,g]=w1(e,l);if(h){o+=u,a=a||d,l+=h-1,r=r||g;continue}}if(p==="*"){n&&e==="*"?o+=R1:o+=E1,r=!0;continue}if(p==="?"){o+=$v,r=!0;continue}o+=vZ(p)}return[o,Cn(e),!!r,a]}};var tc=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&");var or=(t,e,r={})=>(mp(e),!r.nocomment&&e.charAt(0)==="#"?!1:new jr(e,r).match(t)),bZ=/^\*+([^+@!?\*\[\(]*)$/,wZ=t=>e=>!e.startsWith(".")&&e.endsWith(t),_Z=t=>e=>e.endsWith(t),EZ=t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),RZ=t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),kZ=/^\*+\.\*+$/,PZ=t=>!t.startsWith(".")&&t.includes("."),MZ=t=>t!=="."&&t!==".."&&t.includes("."),AZ=/^\.\*+$/,DZ=t=>t!=="."&&t!==".."&&t.startsWith("."),IZ=/^\*+$/,FZ=t=>t.length!==0&&!t.startsWith("."),CZ=t=>t.length!==0&&t!=="."&&t!=="..",OZ=/^\?+([^+@!?\*\[\(]*)?$/,NZ=([t,e=""])=>{let r=A1([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},LZ=([t,e=""])=>{let r=D1([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},UZ=([t,e=""])=>{let r=D1([t]);return e?n=>r(n)&&n.endsWith(e):r},VZ=([t,e=""])=>{let r=A1([t]);return e?n=>r(n)&&n.endsWith(e):r},A1=([t])=>{let e=t.length;return r=>r.length===e&&!r.startsWith(".")},D1=([t])=>{let e=t.length;return r=>r.length===e&&r!=="."&&r!==".."},I1=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",k1={win32:{sep:"\\"},posix:{sep:"/"}},BZ=I1==="win32"?k1.win32.sep:k1.posix.sep;or.sep=BZ;var Ut=Symbol("globstar **");or.GLOBSTAR=Ut;var HZ="[^/]",WZ=HZ+"*?",$Z="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",jZ="(?:(?!(?:\\/|^)\\.).)*?",qZ=(t,e={})=>r=>or(r,t,e);or.filter=qZ;var mn=(t,e={})=>Object.assign({},t,e),zZ=t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return or;let e=or;return Object.assign((n,i,o={})=>e(n,i,mn(t,o)),{Minimatch:class extends e.Minimatch{constructor(i,o={}){super(i,mn(t,o))}static defaults(i){return e.defaults(mn(t,i)).Minimatch}},AST:class extends e.AST{constructor(i,o,a={}){super(i,o,mn(t,a))}static fromGlob(i,o={}){return e.AST.fromGlob(i,mn(t,o))}},unescape:(n,i={})=>e.unescape(n,mn(t,i)),escape:(n,i={})=>e.escape(n,mn(t,i)),filter:(n,i={})=>e.filter(n,mn(t,i)),defaults:n=>e.defaults(mn(t,n)),makeRe:(n,i={})=>e.makeRe(n,mn(t,i)),braceExpand:(n,i={})=>e.braceExpand(n,mn(t,i)),match:(n,i,o={})=>e.match(n,i,mn(t,o)),sep:e.sep,GLOBSTAR:Ut})};or.defaults=zZ;var F1=(t,e={})=>(mp(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:(0,M1.default)(t));or.braceExpand=F1;var GZ=(t,e={})=>new jr(t,e).makeRe();or.makeRe=GZ;var KZ=(t,e,r={})=>{let n=new jr(e,r);return t=t.filter(i=>n.match(i)),n.options.nonull&&!t.length&&t.push(e),t};or.match=KZ;var P1=/[?*]|[+@!]\(.*?\)|\[|\]/,QZ=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),jr=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,r={}){mp(e),r=r||{},this.options=r,this.pattern=e,this.platform=r.platform||I1,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!r.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!r.nonegate,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=r.windowsNoMagicRoot!==void 0?r.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let r of e)if(typeof r!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],r.debug&&(this.debug=(...o)=>console.error(...o)),this.debug(this.pattern,this.globSet);let n=this.globSet.map(o=>this.slashSplit(o));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let i=this.globParts.map((o,a,l)=>{if(this.isWindows&&this.windowsNoMagicRoot){let p=o[0]===""&&o[1]===""&&(o[2]==="?"||!P1.test(o[2]))&&!P1.test(o[3]),u=/^[a-z]:/i.test(o[0]);if(p)return[...o.slice(0,4),...o.slice(4).map(d=>this.parse(d))];if(u)return[o[0],...o.slice(1).map(d=>this.parse(d))]}return o.map(p=>this.parse(p))});if(this.debug(this.pattern,i),this.set=i.filter(o=>o.indexOf(!1)===-1),this.isWindows)for(let o=0;o<this.set.length;o++){let a=this.set[o];a[0]===""&&a[1]===""&&this.globParts[o][2]==="?"&&typeof a[3]=="string"&&/^[a-z]:$/i.test(a[3])&&(a[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let n=0;n<e.length;n++)for(let i=0;i<e[n].length;i++)e[n][i]==="**"&&(e[n][i]="*");let{optimizationLevel:r=1}=this.options;return r>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):r>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(r=>{let n=-1;for(;(n=r.indexOf("**",n+1))!==-1;){let i=n;for(;r[i+1]==="**";)i++;i!==n&&r.splice(n,i-n)}return r})}levelOneOptimize(e){return e.map(r=>(r=r.reduce((n,i)=>{let o=n[n.length-1];return i==="**"&&o==="**"?n:i===".."&&o&&o!==".."&&o!=="."&&o!=="**"?(n.pop(),n):(n.push(i),n)},[]),r.length===0?[""]:r))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let r=!1;do{if(r=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let o=e[i];i===1&&o===""&&e[0]===""||(o==="."||o==="")&&(r=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(r=!0,e.pop())}let n=0;for(;(n=e.indexOf("..",n+1))!==-1;){let i=e[n-1];i&&i!=="."&&i!==".."&&i!=="**"&&(r=!0,e.splice(n-1,2),n-=2)}}while(r);return e.length===0?[""]:e}firstPhasePreProcess(e){let r=!1;do{r=!1;for(let n of e){let i=-1;for(;(i=n.indexOf("**",i+1))!==-1;){let a=i;for(;n[a+1]==="**";)a++;a>i&&n.splice(i+1,a-i);let l=n[i+1],p=n[i+2],u=n[i+3];if(l!==".."||!p||p==="."||p===".."||!u||u==="."||u==="..")continue;r=!0,n.splice(i,1);let d=n.slice(0);d[i]="**",e.push(d),i--}if(!this.preserveMultipleSlashes){for(let a=1;a<n.length-1;a++){let l=n[a];a===1&&l===""&&n[0]===""||(l==="."||l==="")&&(r=!0,n.splice(a,1),a--)}n[0]==="."&&n.length===2&&(n[1]==="."||n[1]==="")&&(r=!0,n.pop())}let o=0;for(;(o=n.indexOf("..",o+1))!==-1;){let a=n[o-1];if(a&&a!=="."&&a!==".."&&a!=="**"){r=!0;let p=o===1&&n[o+1]==="**"?["."]:[];n.splice(o-1,2,...p),n.length===0&&n.push(""),o-=2}}}}while(r);return e}secondPhasePreProcess(e){for(let r=0;r<e.length-1;r++)for(let n=r+1;n<e.length;n++){let i=this.partsMatch(e[r],e[n],!this.preserveMultipleSlashes);if(i){e[r]=[],e[n]=i;break}}return e.filter(r=>r.length)}partsMatch(e,r,n=!1){let i=0,o=0,a=[],l="";for(;i<e.length&&o<r.length;)if(e[i]===r[o])a.push(l==="b"?r[o]:e[i]),i++,o++;else if(n&&e[i]==="**"&&r[o]===e[i+1])a.push(e[i]),i++;else if(n&&r[o]==="**"&&e[i]===r[o+1])a.push(r[o]),o++;else if(e[i]==="*"&&r[o]&&(this.options.dot||!r[o].startsWith("."))&&r[o]!=="**"){if(l==="b")return!1;l="a",a.push(e[i]),i++,o++}else if(r[o]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(l==="a")return!1;l="b",a.push(r[o]),i++,o++}else return!1;return e.length===r.length&&a}parseNegate(){if(this.nonegate)return;let e=this.pattern,r=!1,n=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)r=!r,n++;n&&(this.pattern=e.slice(n)),this.negate=r}matchOne(e,r,n=!1){let i=this.options;if(this.isWindows){let w=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),C=!w&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),M=typeof r[0]=="string"&&/^[a-z]:$/i.test(r[0]),U=!M&&r[0]===""&&r[1]===""&&r[2]==="?"&&typeof r[3]=="string"&&/^[a-z]:$/i.test(r[3]),Z=C?3:w?0:void 0,ne=U?3:M?0:void 0;if(typeof Z=="number"&&typeof ne=="number"){let[ge,de]=[e[Z],r[ne]];ge.toLowerCase()===de.toLowerCase()&&(r[ne]=ge,ne>Z?r=r.slice(ne):Z>ne&&(e=e.slice(Z)))}}let{optimizationLevel:o=1}=this.options;o>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var a=0,l=0,p=e.length,u=r.length;a<p&&l<u;a++,l++){this.debug("matchOne loop");var d=r[l],h=e[a];if(this.debug(r,d,h),d===!1)return!1;if(d===Ut){this.debug("GLOBSTAR",[r,d,h]);var g=a,x=l+1;if(x===u){for(this.debug("** at the end");a<p;a++)if(e[a]==="."||e[a]===".."||!i.dot&&e[a].charAt(0)===".")return!1;return!0}for(;g<p;){var _=e[g];if(this.debug(`
globstar while`,e,g,r,x,_),this.matchOne(e.slice(g),r.slice(x),n))return this.debug("globstar found match!",g,p,_),!0;if(_==="."||_===".."||!i.dot&&_.charAt(0)==="."){this.debug("dot detected!",e,g,r,x);break}this.debug("globstar swallow a segment, and continue"),g++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,g,r,x),g===p))}let w;if(typeof d=="string"?(w=h===d,this.debug("string match",d,h,w)):(w=d.test(h),this.debug("pattern match",d,h,w)),!w)return!1}if(a===p&&l===u)return!0;if(a===p)return n;if(l===u)return a===p-1&&e[a]==="";throw new Error("wtf?")}braceExpand(){return F1(this.pattern,this.options)}parse(e){mp(e);let r=this.options;if(e==="**")return Ut;if(e==="")return"";let n,i=null;(n=e.match(IZ))?i=r.dot?CZ:FZ:(n=e.match(bZ))?i=(r.nocase?r.dot?RZ:EZ:r.dot?_Z:wZ)(n[1]):(n=e.match(OZ))?i=(r.nocase?r.dot?LZ:NZ:r.dot?UZ:VZ)(n):(n=e.match(kZ))?i=r.dot?MZ:PZ:(n=e.match(AZ))&&(i=DZ);let o=ec.fromGlob(e,this.options).toMMPattern();return i&&typeof o=="object"&&Reflect.defineProperty(o,"test",{value:i}),o}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let r=this.options,n=r.noglobstar?WZ:r.dot?$Z:jZ,i=new Set(r.nocase?["i"]:[]),o=e.map(p=>{let u=p.map(d=>{if(d instanceof RegExp)for(let h of d.flags.split(""))i.add(h);return typeof d=="string"?QZ(d):d===Ut?Ut:d._src});return u.forEach((d,h)=>{let g=u[h+1],x=u[h-1];d!==Ut||x===Ut||(x===void 0?g!==void 0&&g!==Ut?u[h+1]="(?:\\/|"+n+"\\/)?"+g:u[h]=n:g===void 0?u[h-1]=x+"(?:\\/|"+n+")?":g!==Ut&&(u[h-1]=x+"(?:\\/|\\/"+n+"\\/)"+g,u[h+1]=Ut))}),u.filter(d=>d!==Ut).join("/")}).join("|"),[a,l]=e.length>1?["(?:",")"]:["",""];o="^"+a+o+l+"$",this.negate&&(o="^(?!"+o+").+$");try{this.regexp=new RegExp(o,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;let n=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let o=this.set;this.debug(this.pattern,"set",o);let a=i[i.length-1];if(!a)for(let l=i.length-2;!a&&l>=0;l--)a=i[l];for(let l=0;l<o.length;l++){let p=o[l],u=i;if(n.matchBase&&p.length===1&&(u=[a]),this.matchOne(u,p,r))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return or.defaults(e).Minimatch}};or.AST=ec;or.Minimatch=jr;or.escape=tc;or.unescape=Cn;var nF=require("node:url");var rc=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,O1=new Set,jv=typeof process=="object"&&process?process:{},N1=(t,e,r,n)=>{typeof jv.emitWarning=="function"?jv.emitWarning(t,e,r,n):console.error(`[${r}] ${e}: ${t}`)},jg=globalThis.AbortController,C1=globalThis.AbortSignal;if(typeof jg>"u"){C1=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(n,i){this._onabort.push(i)}},jg=class{constructor(){e()}signal=new C1;abort(n){if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(let i of this.signal._onabort)i(n);this.signal.onabort?.(n)}}};let t=jv.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{t&&(t=!1,N1("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var ZZ=t=>!O1.has(t),nLe=Symbol("type"),wo=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),L1=t=>wo(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?nc:null:null,nc=class extends Array{constructor(e){super(e),this.fill(0)}},qv=class t{heap;length;static#e=!1;static create(e){let r=L1(e);if(!r)return[];t.#e=!0;let n=new t(e,r);return t.#e=!1,n}constructor(e,r){if(!t.#e)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},gp=class t{#e;#t;#o;#n;#s;#S;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#l;#u;#a;#c;#i;#g;#y;#d;#f;#w;#h;#_;#E;#T;#v;#b;#m;static unsafeExposeInternals(e){return{starts:e.#E,ttls:e.#T,sizes:e.#_,keyMap:e.#a,keyList:e.#c,valList:e.#i,next:e.#g,prev:e.#y,get head(){return e.#d},get tail(){return e.#f},free:e.#w,isBackgroundFetch:r=>e.#p(r),backgroundFetch:(r,n,i,o)=>e.#U(r,n,i,o),moveToTail:r=>e.#B(r),indexes:r=>e.#k(r),rindexes:r=>e.#P(r),isStale:r=>e.#x(r)}}get max(){return this.#e}get maxSize(){return this.#t}get calculatedSize(){return this.#u}get size(){return this.#l}get fetchMethod(){return this.#s}get memoMethod(){return this.#S}get dispose(){return this.#o}get disposeAfter(){return this.#n}constructor(e){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:a,updateAgeOnHas:l,allowStale:p,dispose:u,disposeAfter:d,noDisposeOnSet:h,noUpdateTTL:g,maxSize:x=0,maxEntrySize:_=0,sizeCalculation:w,fetchMethod:C,memoMethod:M,noDeleteOnFetchRejection:U,noDeleteOnStaleGet:Z,allowStaleOnFetchRejection:ne,allowStaleOnFetchAbort:ge,ignoreFetchAbort:de}=e;if(r!==0&&!wo(r))throw new TypeError("max option must be a nonnegative integer");let mt=r?L1(r):Array;if(!mt)throw new Error("invalid max value: "+r);if(this.#e=r,this.#t=x,this.maxEntrySize=_||this.#t,this.sizeCalculation=w,this.sizeCalculation){if(!this.#t&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(M!==void 0&&typeof M!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#S=M,C!==void 0&&typeof C!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#s=C,this.#b=!!C,this.#a=new Map,this.#c=new Array(r).fill(void 0),this.#i=new Array(r).fill(void 0),this.#g=new mt(r),this.#y=new mt(r),this.#d=0,this.#f=0,this.#w=qv.create(r),this.#l=0,this.#u=0,typeof u=="function"&&(this.#o=u),typeof d=="function"?(this.#n=d,this.#h=[]):(this.#n=void 0,this.#h=void 0),this.#v=!!this.#o,this.#m=!!this.#n,this.noDisposeOnSet=!!h,this.noUpdateTTL=!!g,this.noDeleteOnFetchRejection=!!U,this.allowStaleOnFetchRejection=!!ne,this.allowStaleOnFetchAbort=!!ge,this.ignoreFetchAbort=!!de,this.maxEntrySize!==0){if(this.#t!==0&&!wo(this.#t))throw new TypeError("maxSize must be a positive integer if specified");if(!wo(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#A()}if(this.allowStale=!!p,this.noDeleteOnStaleGet=!!Z,this.updateAgeOnGet=!!a,this.updateAgeOnHas=!!l,this.ttlResolution=wo(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=n||0,this.ttl){if(!wo(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#M()}if(this.#e===0&&this.ttl===0&&this.#t===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#e&&!this.#t){let It="LRU_CACHE_UNBOUNDED";ZZ(It)&&(O1.add(It),N1("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",It,t))}}getRemainingTTL(e){return this.#a.has(e)?1/0:0}#M(){let e=new nc(this.#e),r=new nc(this.#e);this.#T=e,this.#E=r,this.#I=(o,a,l=rc.now())=>{if(r[o]=a!==0?l:0,e[o]=a,a!==0&&this.ttlAutopurge){let p=setTimeout(()=>{this.#x(o)&&this.#D(this.#c[o],"expire")},a+1);p.unref&&p.unref()}},this.#R=o=>{r[o]=e[o]!==0?rc.now():0},this.#r=(o,a)=>{if(e[a]){let l=e[a],p=r[a];if(!l||!p)return;o.ttl=l,o.start=p,o.now=n||i();let u=o.now-p;o.remainingTTL=l-u}};let n=0,i=()=>{let o=rc.now();if(this.ttlResolution>0){n=o;let a=setTimeout(()=>n=0,this.ttlResolution);a.unref&&a.unref()}return o};this.getRemainingTTL=o=>{let a=this.#a.get(o);if(a===void 0)return 0;let l=e[a],p=r[a];if(!l||!p)return 1/0;let u=(n||i())-p;return l-u},this.#x=o=>{let a=r[o],l=e[o];return!!l&&!!a&&(n||i())-a>l}}#R=()=>{};#r=()=>{};#I=()=>{};#x=()=>!1;#A(){let e=new nc(this.#e);this.#u=0,this.#_=e,this.#F=r=>{this.#u-=e[r],e[r]=0},this.#O=(r,n,i,o)=>{if(this.#p(n))return 0;if(!wo(i))if(o){if(typeof o!="function")throw new TypeError("sizeCalculation must be a function");if(i=o(n,r),!wo(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#C=(r,n,i)=>{if(e[r]=n,this.#t){let o=this.#t-e[r];for(;this.#u>o;)this.#L(!0)}this.#u+=e[r],i&&(i.entrySize=n,i.totalCalculatedSize=this.#u)}}#F=e=>{};#C=(e,r,n)=>{};#O=(e,r,n,i)=>{if(n||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#k({allowStale:e=this.allowStale}={}){if(this.#l)for(let r=this.#f;!(!this.#N(r)||((e||!this.#x(r))&&(yield r),r===this.#d));)r=this.#y[r]}*#P({allowStale:e=this.allowStale}={}){if(this.#l)for(let r=this.#d;!(!this.#N(r)||((e||!this.#x(r))&&(yield r),r===this.#f));)r=this.#g[r]}#N(e){return e!==void 0&&this.#a.get(this.#c[e])===e}*entries(){for(let e of this.#k())this.#i[e]!==void 0&&this.#c[e]!==void 0&&!this.#p(this.#i[e])&&(yield[this.#c[e],this.#i[e]])}*rentries(){for(let e of this.#P())this.#i[e]!==void 0&&this.#c[e]!==void 0&&!this.#p(this.#i[e])&&(yield[this.#c[e],this.#i[e]])}*keys(){for(let e of this.#k()){let r=this.#c[e];r!==void 0&&!this.#p(this.#i[e])&&(yield r)}}*rkeys(){for(let e of this.#P()){let r=this.#c[e];r!==void 0&&!this.#p(this.#i[e])&&(yield r)}}*values(){for(let e of this.#k())this.#i[e]!==void 0&&!this.#p(this.#i[e])&&(yield this.#i[e])}*rvalues(){for(let e of this.#P())this.#i[e]!==void 0&&!this.#p(this.#i[e])&&(yield this.#i[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,r={}){for(let n of this.#k()){let i=this.#i[n],o=this.#p(i)?i.__staleWhileFetching:i;if(o!==void 0&&e(o,this.#c[n],this))return this.get(this.#c[n],r)}}forEach(e,r=this){for(let n of this.#k()){let i=this.#i[n],o=this.#p(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#c[n],this)}}rforEach(e,r=this){for(let n of this.#P()){let i=this.#i[n],o=this.#p(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#c[n],this)}}purgeStale(){let e=!1;for(let r of this.#P({allowStale:!0}))this.#x(r)&&(this.#D(this.#c[r],"expire"),e=!0);return e}info(e){let r=this.#a.get(e);if(r===void 0)return;let n=this.#i[r],i=this.#p(n)?n.__staleWhileFetching:n;if(i===void 0)return;let o={value:i};if(this.#T&&this.#E){let a=this.#T[r],l=this.#E[r];if(a&&l){let p=a-(rc.now()-l);o.ttl=p,o.start=Date.now()}}return this.#_&&(o.size=this.#_[r]),o}dump(){let e=[];for(let r of this.#k({allowStale:!0})){let n=this.#c[r],i=this.#i[r],o=this.#p(i)?i.__staleWhileFetching:i;if(o===void 0||n===void 0)continue;let a={value:o};if(this.#T&&this.#E){a.ttl=this.#T[r];let l=rc.now()-this.#E[r];a.start=Math.floor(Date.now()-l)}this.#_&&(a.size=this.#_[r]),e.unshift([n,a])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let i=Date.now()-n.start;n.start=rc.now()-i}this.set(r,n.value,n)}}set(e,r,n={}){if(r===void 0)return this.delete(e),this;let{ttl:i=this.ttl,start:o,noDisposeOnSet:a=this.noDisposeOnSet,sizeCalculation:l=this.sizeCalculation,status:p}=n,{noUpdateTTL:u=this.noUpdateTTL}=n,d=this.#O(e,r,n.size||0,l);if(this.maxEntrySize&&d>this.maxEntrySize)return p&&(p.set="miss",p.maxEntrySizeExceeded=!0),this.#D(e,"set"),this;let h=this.#l===0?void 0:this.#a.get(e);if(h===void 0)h=this.#l===0?this.#f:this.#w.length!==0?this.#w.pop():this.#l===this.#e?this.#L(!1):this.#l,this.#c[h]=e,this.#i[h]=r,this.#a.set(e,h),this.#g[this.#f]=h,this.#y[h]=this.#f,this.#f=h,this.#l++,this.#C(h,d,p),p&&(p.set="add"),u=!1;else{this.#B(h);let g=this.#i[h];if(r!==g){if(this.#b&&this.#p(g)){g.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:x}=g;x!==void 0&&!a&&(this.#v&&this.#o?.(x,e,"set"),this.#m&&this.#h?.push([x,e,"set"]))}else a||(this.#v&&this.#o?.(g,e,"set"),this.#m&&this.#h?.push([g,e,"set"]));if(this.#F(h),this.#C(h,d,p),this.#i[h]=r,p){p.set="replace";let x=g&&this.#p(g)?g.__staleWhileFetching:g;x!==void 0&&(p.oldValue=x)}}else p&&(p.set="update")}if(i!==0&&!this.#T&&this.#M(),this.#T&&(u||this.#I(h,i,o),p&&this.#r(p,h)),!a&&this.#m&&this.#h){let g=this.#h,x;for(;x=g?.shift();)this.#n?.(...x)}return this}pop(){try{for(;this.#l;){let e=this.#i[this.#d];if(this.#L(!0),this.#p(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#m&&this.#h){let e=this.#h,r;for(;r=e?.shift();)this.#n?.(...r)}}}#L(e){let r=this.#d,n=this.#c[r],i=this.#i[r];return this.#b&&this.#p(i)?i.__abortController.abort(new Error("evicted")):(this.#v||this.#m)&&(this.#v&&this.#o?.(i,n,"evict"),this.#m&&this.#h?.push([i,n,"evict"])),this.#F(r),e&&(this.#c[r]=void 0,this.#i[r]=void 0,this.#w.push(r)),this.#l===1?(this.#d=this.#f=0,this.#w.length=0):this.#d=this.#g[r],this.#a.delete(n),this.#l--,r}has(e,r={}){let{updateAgeOnHas:n=this.updateAgeOnHas,status:i}=r,o=this.#a.get(e);if(o!==void 0){let a=this.#i[o];if(this.#p(a)&&a.__staleWhileFetching===void 0)return!1;if(this.#x(o))i&&(i.has="stale",this.#r(i,o));else return n&&this.#R(o),i&&(i.has="hit",this.#r(i,o)),!0}else i&&(i.has="miss");return!1}peek(e,r={}){let{allowStale:n=this.allowStale}=r,i=this.#a.get(e);if(i===void 0||!n&&this.#x(i))return;let o=this.#i[i];return this.#p(o)?o.__staleWhileFetching:o}#U(e,r,n,i){let o=r===void 0?void 0:this.#i[r];if(this.#p(o))return o;let a=new jg,{signal:l}=n;l?.addEventListener("abort",()=>a.abort(l.reason),{signal:a.signal});let p={signal:a.signal,options:n,context:i},u=(w,C=!1)=>{let{aborted:M}=a.signal,U=n.ignoreFetchAbort&&w!==void 0;if(n.status&&(M&&!C?(n.status.fetchAborted=!0,n.status.fetchError=a.signal.reason,U&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),M&&!U&&!C)return h(a.signal.reason);let Z=x;return this.#i[r]===x&&(w===void 0?Z.__staleWhileFetching?this.#i[r]=Z.__staleWhileFetching:this.#D(e,"fetch"):(n.status&&(n.status.fetchUpdated=!0),this.set(e,w,p.options))),w},d=w=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=w),h(w)),h=w=>{let{aborted:C}=a.signal,M=C&&n.allowStaleOnFetchAbort,U=M||n.allowStaleOnFetchRejection,Z=U||n.noDeleteOnFetchRejection,ne=x;if(this.#i[r]===x&&(!Z||ne.__staleWhileFetching===void 0?this.#D(e,"fetch"):M||(this.#i[r]=ne.__staleWhileFetching)),U)return n.status&&ne.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),ne.__staleWhileFetching;if(ne.__returned===ne)throw w},g=(w,C)=>{let M=this.#s?.(e,o,p);M&&M instanceof Promise&&M.then(U=>w(U===void 0?void 0:U),C),a.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(w(void 0),n.allowStaleOnFetchAbort&&(w=U=>u(U,!0)))})};n.status&&(n.status.fetchDispatched=!0);let x=new Promise(g).then(u,d),_=Object.assign(x,{__abortController:a,__staleWhileFetching:o,__returned:void 0});return r===void 0?(this.set(e,_,{...p.options,status:void 0}),r=this.#a.get(e)):this.#i[r]=_,_}#p(e){if(!this.#b)return!1;let r=e;return!!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof jg}async fetch(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:a=this.ttl,noDisposeOnSet:l=this.noDisposeOnSet,size:p=0,sizeCalculation:u=this.sizeCalculation,noUpdateTTL:d=this.noUpdateTTL,noDeleteOnFetchRejection:h=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:g=this.allowStaleOnFetchRejection,ignoreFetchAbort:x=this.ignoreFetchAbort,allowStaleOnFetchAbort:_=this.allowStaleOnFetchAbort,context:w,forceRefresh:C=!1,status:M,signal:U}=r;if(!this.#b)return M&&(M.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,status:M});let Z={allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,ttl:a,noDisposeOnSet:l,size:p,sizeCalculation:u,noUpdateTTL:d,noDeleteOnFetchRejection:h,allowStaleOnFetchRejection:g,allowStaleOnFetchAbort:_,ignoreFetchAbort:x,status:M,signal:U},ne=this.#a.get(e);if(ne===void 0){M&&(M.fetch="miss");let ge=this.#U(e,ne,Z,w);return ge.__returned=ge}else{let ge=this.#i[ne];if(this.#p(ge)){let N=n&&ge.__staleWhileFetching!==void 0;return M&&(M.fetch="inflight",N&&(M.returnedStale=!0)),N?ge.__staleWhileFetching:ge.__returned=ge}let de=this.#x(ne);if(!C&&!de)return M&&(M.fetch="hit"),this.#B(ne),i&&this.#R(ne),M&&this.#r(M,ne),ge;let mt=this.#U(e,ne,Z,w),ot=mt.__staleWhileFetching!==void 0&&n;return M&&(M.fetch=de?"stale":"refresh",ot&&de&&(M.returnedStale=!0)),ot?mt.__staleWhileFetching:mt.__returned=mt}}async forceFetch(e,r={}){let n=await this.fetch(e,r);if(n===void 0)throw new Error("fetch() returned undefined");return n}memo(e,r={}){let n=this.#S;if(!n)throw new Error("no memoMethod provided to constructor");let{context:i,forceRefresh:o,...a}=r,l=this.get(e,a);if(!o&&l!==void 0)return l;let p=n(e,l,{options:a,context:i});return this.set(e,p,a),p}get(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:a}=r,l=this.#a.get(e);if(l!==void 0){let p=this.#i[l],u=this.#p(p);return a&&this.#r(a,l),this.#x(l)?(a&&(a.get="stale"),u?(a&&n&&p.__staleWhileFetching!==void 0&&(a.returnedStale=!0),n?p.__staleWhileFetching:void 0):(o||this.#D(e,"expire"),a&&n&&(a.returnedStale=!0),n?p:void 0)):(a&&(a.get="hit"),u?p.__staleWhileFetching:(this.#B(l),i&&this.#R(l),p))}else a&&(a.get="miss")}#V(e,r){this.#y[r]=e,this.#g[e]=r}#B(e){e!==this.#f&&(e===this.#d?this.#d=this.#g[e]:this.#V(this.#y[e],this.#g[e]),this.#V(this.#f,e),this.#f=e)}delete(e){return this.#D(e,"delete")}#D(e,r){let n=!1;if(this.#l!==0){let i=this.#a.get(e);if(i!==void 0)if(n=!0,this.#l===1)this.#H(r);else{this.#F(i);let o=this.#i[i];if(this.#p(o)?o.__abortController.abort(new Error("deleted")):(this.#v||this.#m)&&(this.#v&&this.#o?.(o,e,r),this.#m&&this.#h?.push([o,e,r])),this.#a.delete(e),this.#c[i]=void 0,this.#i[i]=void 0,i===this.#f)this.#f=this.#y[i];else if(i===this.#d)this.#d=this.#g[i];else{let a=this.#y[i];this.#g[a]=this.#g[i];let l=this.#g[i];this.#y[l]=this.#y[i]}this.#l--,this.#w.push(i)}}if(this.#m&&this.#h?.length){let i=this.#h,o;for(;o=i?.shift();)this.#n?.(...o)}return n}clear(){return this.#H("delete")}#H(e){for(let r of this.#P({allowStale:!0})){let n=this.#i[r];if(this.#p(n))n.__abortController.abort(new Error("deleted"));else{let i=this.#c[r];this.#v&&this.#o?.(n,i,e),this.#m&&this.#h?.push([n,i,e])}}if(this.#a.clear(),this.#i.fill(void 0),this.#c.fill(void 0),this.#T&&this.#E&&(this.#T.fill(0),this.#E.fill(0)),this.#_&&this.#_.fill(0),this.#d=0,this.#f=0,this.#w.length=0,this.#u=0,this.#l=0,this.#m&&this.#h){let r=this.#h,n;for(;n=r?.shift();)this.#n?.(...n)}}};var sc=require("node:path"),G1=require("node:url"),ii=require("fs"),sY=dr(require("node:fs"),1),Ro=require("node:fs/promises");var Yg=require("node:events"),Xv=dr(require("node:stream"),1),W1=require("node:string_decoder"),U1=typeof process=="object"&&process?process:{stdout:null,stderr:null},YZ=t=>!!t&&typeof t=="object"&&(t instanceof Eo||t instanceof Xv.default||XZ(t)||JZ(t)),XZ=t=>!!t&&typeof t=="object"&&t instanceof Yg.EventEmitter&&typeof t.pipe=="function"&&t.pipe!==Xv.default.Writable.prototype.pipe,JZ=t=>!!t&&typeof t=="object"&&t instanceof Yg.EventEmitter&&typeof t.write=="function"&&typeof t.end=="function",Oi=Symbol("EOF"),Ni=Symbol("maybeEmitEnd"),_o=Symbol("emittedEnd"),qg=Symbol("emittingEnd"),yp=Symbol("emittedError"),zg=Symbol("closed"),V1=Symbol("read"),Gg=Symbol("flush"),B1=Symbol("flushChunk"),On=Symbol("encoding"),ic=Symbol("decoder"),Mt=Symbol("flowing"),xp=Symbol("paused"),oc=Symbol("resume"),At=Symbol("buffer"),sr=Symbol("pipes"),Dt=Symbol("bufferLength"),zv=Symbol("bufferPush"),Kg=Symbol("bufferShift"),Gt=Symbol("objectMode"),dt=Symbol("destroyed"),Gv=Symbol("error"),Kv=Symbol("emitData"),H1=Symbol("emitEnd"),Qv=Symbol("emitEnd2"),ri=Symbol("async"),Zv=Symbol("abort"),Qg=Symbol("aborted"),Tp=Symbol("signal"),Ts=Symbol("dataListeners"),qr=Symbol("discarded"),Sp=t=>Promise.resolve().then(t),eY=t=>t(),tY=t=>t==="end"||t==="finish"||t==="prefinish",rY=t=>t instanceof ArrayBuffer||!!t&&typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,nY=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),Zg=class{src;dest;opts;ondrain;constructor(e,r,n){this.src=e,this.dest=r,this.opts=n,this.ondrain=()=>e[oc](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(e){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},Yv=class extends Zg{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,r,n){super(e,r,n),this.proxyErrors=i=>r.emit("error",i),e.on("error",this.proxyErrors)}},iY=t=>!!t.objectMode,oY=t=>!t.objectMode&&!!t.encoding&&t.encoding!=="buffer",Eo=class extends Yg.EventEmitter{[Mt]=!1;[xp]=!1;[sr]=[];[At]=[];[Gt];[On];[ri];[ic];[Oi]=!1;[_o]=!1;[qg]=!1;[zg]=!1;[yp]=null;[Dt]=0;[dt]=!1;[Tp];[Qg]=!1;[Ts]=0;[qr]=!1;writable=!0;readable=!0;constructor(...e){let r=e[0]||{};if(super(),r.objectMode&&typeof r.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");iY(r)?(this[Gt]=!0,this[On]=null):oY(r)?(this[On]=r.encoding,this[Gt]=!1):(this[Gt]=!1,this[On]=null),this[ri]=!!r.async,this[ic]=this[On]?new W1.StringDecoder(this[On]):null,r&&r.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[At]}),r&&r.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[sr]});let{signal:n}=r;n&&(this[Tp]=n,n.aborted?this[Zv]():n.addEventListener("abort",()=>this[Zv]()))}get bufferLength(){return this[Dt]}get encoding(){return this[On]}set encoding(e){throw new Error("Encoding must be set at instantiation time")}setEncoding(e){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[Gt]}set objectMode(e){throw new Error("objectMode must be set at instantiation time")}get async(){return this[ri]}set async(e){this[ri]=this[ri]||!!e}[Zv](){this[Qg]=!0,this.emit("abort",this[Tp]?.reason),this.destroy(this[Tp]?.reason)}get aborted(){return this[Qg]}set aborted(e){}write(e,r,n){if(this[Qg])return!1;if(this[Oi])throw new Error("write after end");if(this[dt])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof r=="function"&&(n=r,r="utf8"),r||(r="utf8");let i=this[ri]?Sp:eY;if(!this[Gt]&&!Buffer.isBuffer(e)){if(nY(e))e=Buffer.from(e.buffer,e.byteOffset,e.byteLength);else if(rY(e))e=Buffer.from(e);else if(typeof e!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[Gt]?(this[Mt]&&this[Dt]!==0&&this[Gg](!0),this[Mt]?this.emit("data",e):this[zv](e),this[Dt]!==0&&this.emit("readable"),n&&i(n),this[Mt]):e.length?(typeof e=="string"&&!(r===this[On]&&!this[ic]?.lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[On]&&(e=this[ic].write(e)),this[Mt]&&this[Dt]!==0&&this[Gg](!0),this[Mt]?this.emit("data",e):this[zv](e),this[Dt]!==0&&this.emit("readable"),n&&i(n),this[Mt]):(this[Dt]!==0&&this.emit("readable"),n&&i(n),this[Mt])}read(e){if(this[dt])return null;if(this[qr]=!1,this[Dt]===0||e===0||e&&e>this[Dt])return this[Ni](),null;this[Gt]&&(e=null),this[At].length>1&&!this[Gt]&&(this[At]=[this[On]?this[At].join(""):Buffer.concat(this[At],this[Dt])]);let r=this[V1](e||null,this[At][0]);return this[Ni](),r}[V1](e,r){if(this[Gt])this[Kg]();else{let n=r;e===n.length||e===null?this[Kg]():typeof n=="string"?(this[At][0]=n.slice(e),r=n.slice(0,e),this[Dt]-=e):(this[At][0]=n.subarray(e),r=n.subarray(0,e),this[Dt]-=e)}return this.emit("data",r),!this[At].length&&!this[Oi]&&this.emit("drain"),r}end(e,r,n){return typeof e=="function"&&(n=e,e=void 0),typeof r=="function"&&(n=r,r="utf8"),e!==void 0&&this.write(e,r),n&&this.once("end",n),this[Oi]=!0,this.writable=!1,(this[Mt]||!this[xp])&&this[Ni](),this}[oc](){this[dt]||(!this[Ts]&&!this[sr].length&&(this[qr]=!0),this[xp]=!1,this[Mt]=!0,this.emit("resume"),this[At].length?this[Gg]():this[Oi]?this[Ni]():this.emit("drain"))}resume(){return this[oc]()}pause(){this[Mt]=!1,this[xp]=!0,this[qr]=!1}get destroyed(){return this[dt]}get flowing(){return this[Mt]}get paused(){return this[xp]}[zv](e){this[Gt]?this[Dt]+=1:this[Dt]+=e.length,this[At].push(e)}[Kg](){return this[Gt]?this[Dt]-=1:this[Dt]-=this[At][0].length,this[At].shift()}[Gg](e=!1){do;while(this[B1](this[Kg]())&&this[At].length);!e&&!this[At].length&&!this[Oi]&&this.emit("drain")}[B1](e){return this.emit("data",e),this[Mt]}pipe(e,r){if(this[dt])return e;this[qr]=!1;let n=this[_o];return r=r||{},e===U1.stdout||e===U1.stderr?r.end=!1:r.end=r.end!==!1,r.proxyErrors=!!r.proxyErrors,n?r.end&&e.end():(this[sr].push(r.proxyErrors?new Yv(this,e,r):new Zg(this,e,r)),this[ri]?Sp(()=>this[oc]()):this[oc]()),e}unpipe(e){let r=this[sr].find(n=>n.dest===e);r&&(this[sr].length===1?(this[Mt]&&this[Ts]===0&&(this[Mt]=!1),this[sr]=[]):this[sr].splice(this[sr].indexOf(r),1),r.unpipe())}addListener(e,r){return this.on(e,r)}on(e,r){let n=super.on(e,r);if(e==="data")this[qr]=!1,this[Ts]++,!this[sr].length&&!this[Mt]&&this[oc]();else if(e==="readable"&&this[Dt]!==0)super.emit("readable");else if(tY(e)&&this[_o])super.emit(e),this.removeAllListeners(e);else if(e==="error"&&this[yp]){let i=r;this[ri]?Sp(()=>i.call(this,this[yp])):i.call(this,this[yp])}return n}removeListener(e,r){return this.off(e,r)}off(e,r){let n=super.off(e,r);return e==="data"&&(this[Ts]=this.listeners("data").length,this[Ts]===0&&!this[qr]&&!this[sr].length&&(this[Mt]=!1)),n}removeAllListeners(e){let r=super.removeAllListeners(e);return(e==="data"||e===void 0)&&(this[Ts]=0,!this[qr]&&!this[sr].length&&(this[Mt]=!1)),r}get emittedEnd(){return this[_o]}[Ni](){!this[qg]&&!this[_o]&&!this[dt]&&this[At].length===0&&this[Oi]&&(this[qg]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[zg]&&this.emit("close"),this[qg]=!1)}emit(e,...r){let n=r[0];if(e!=="error"&&e!=="close"&&e!==dt&&this[dt])return!1;if(e==="data")return!this[Gt]&&!n?!1:this[ri]?(Sp(()=>this[Kv](n)),!0):this[Kv](n);if(e==="end")return this[H1]();if(e==="close"){if(this[zg]=!0,!this[_o]&&!this[dt])return!1;let o=super.emit("close");return this.removeAllListeners("close"),o}else if(e==="error"){this[yp]=n,super.emit(Gv,n);let o=!this[Tp]||this.listeners("error").length?super.emit("error",n):!1;return this[Ni](),o}else if(e==="resume"){let o=super.emit("resume");return this[Ni](),o}else if(e==="finish"||e==="prefinish"){let o=super.emit(e);return this.removeAllListeners(e),o}let i=super.emit(e,...r);return this[Ni](),i}[Kv](e){for(let n of this[sr])n.dest.write(e)===!1&&this.pause();let r=this[qr]?!1:super.emit("data",e);return this[Ni](),r}[H1](){return this[_o]?!1:(this[_o]=!0,this.readable=!1,this[ri]?(Sp(()=>this[Qv]()),!0):this[Qv]())}[Qv](){if(this[ic]){let r=this[ic].end();if(r){for(let n of this[sr])n.dest.write(r);this[qr]||super.emit("data",r)}}for(let r of this[sr])r.end();let e=super.emit("end");return this.removeAllListeners("end"),e}async collect(){let e=Object.assign([],{dataLength:0});this[Gt]||(e.dataLength=0);let r=this.promise();return this.on("data",n=>{e.push(n),this[Gt]||(e.dataLength+=n.length)}),await r,e}async concat(){if(this[Gt])throw new Error("cannot concat in objectMode");let e=await this.collect();return this[On]?e.join(""):Buffer.concat(e,e.dataLength)}async promise(){return new Promise((e,r)=>{this.on(dt,()=>r(new Error("stream destroyed"))),this.on("error",n=>r(n)),this.on("end",()=>e())})}[Symbol.asyncIterator](){this[qr]=!1;let e=!1,r=async()=>(this.pause(),e=!0,{value:void 0,done:!0});return{next:()=>{if(e)return r();let i=this.read();if(i!==null)return Promise.resolve({done:!1,value:i});if(this[Oi])return r();let o,a,l=h=>{this.off("data",p),this.off("end",u),this.off(dt,d),r(),a(h)},p=h=>{this.off("error",l),this.off("end",u),this.off(dt,d),this.pause(),o({value:h,done:!!this[Oi]})},u=()=>{this.off("error",l),this.off("data",p),this.off(dt,d),r(),o({done:!0,value:void 0})},d=()=>l(new Error("stream destroyed"));return new Promise((h,g)=>{a=g,o=h,this.once(dt,d),this.once("error",l),this.once("end",u),this.once("data",p)})},throw:r,return:r,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[qr]=!1;let e=!1,r=()=>(this.pause(),this.off(Gv,r),this.off(dt,r),this.off("end",r),e=!0,{done:!0,value:void 0}),n=()=>{if(e)return r();let i=this.read();return i===null?r():{done:!1,value:i}};return this.once("end",r),this.once(Gv,r),this.once(dt,r),{next:n,throw:r,return:r,[Symbol.iterator](){return this}}}destroy(e){if(this[dt])return e?this.emit("error",e):this.emit(dt),this;this[dt]=!0,this[qr]=!0,this[At].length=0,this[Dt]=0;let r=this;return typeof r.close=="function"&&!this[zg]&&r.close(),e?this.emit("error",e):this.emit(dt),this}static get isStream(){return YZ}};var aY=ii.realpathSync.native,bp={lstatSync:ii.lstatSync,readdir:ii.readdir,readdirSync:ii.readdirSync,readlinkSync:ii.readlinkSync,realpathSync:aY,promises:{lstat:Ro.lstat,readdir:Ro.readdir,readlink:Ro.readlink,realpath:Ro.realpath}},K1=t=>!t||t===bp||t===sY?bp:{...bp,...t,promises:{...bp.promises,...t.promises||{}}},Q1=/^\\\\\?\\([a-z]:)\\?$/i,cY=t=>t.replace(/\//g,"\\").replace(Q1,"$1\\"),lY=/[\\\/]/,gn=0,Z1=1,Y1=2,ni=4,X1=6,J1=8,Ss=10,eF=12,hn=15,vp=~hn,Jv=16,$1=32,wp=64,Nn=128,Xg=256,ey=512,j1=wp|Nn|ey,pY=1023,eb=t=>t.isFile()?J1:t.isDirectory()?ni:t.isSymbolicLink()?Ss:t.isCharacterDevice()?Y1:t.isBlockDevice()?X1:t.isSocket()?eF:t.isFIFO()?Z1:gn,q1=new Map,_p=t=>{let e=q1.get(t);if(e)return e;let r=t.normalize("NFKD");return q1.set(t,r),r},z1=new Map,Jg=t=>{let e=z1.get(t);if(e)return e;let r=_p(t.toLowerCase());return z1.set(t,r),r},ty=class extends gp{constructor(){super({max:256})}},tb=class extends gp{constructor(e=16*1024){super({maxSize:e,sizeCalculation:r=>r.length+1})}},tF=Symbol("PathScurry setAsCwd"),Kt=class{name;root;roots;parent;nocase;isCWD=!1;#e;#t;get dev(){return this.#t}#o;get mode(){return this.#o}#n;get nlink(){return this.#n}#s;get uid(){return this.#s}#S;get gid(){return this.#S}#l;get rdev(){return this.#l}#u;get blksize(){return this.#u}#a;get ino(){return this.#a}#c;get size(){return this.#c}#i;get blocks(){return this.#i}#g;get atimeMs(){return this.#g}#y;get mtimeMs(){return this.#y}#d;get ctimeMs(){return this.#d}#f;get birthtimeMs(){return this.#f}#w;get atime(){return this.#w}#h;get mtime(){return this.#h}#_;get ctime(){return this.#_}#E;get birthtime(){return this.#E}#T;#v;#b;#m;#M;#R;#r;#I;#x;#A;get parentPath(){return(this.parent||this).fullpath()}get path(){return this.parentPath}constructor(e,r=gn,n,i,o,a,l){this.name=e,this.#T=o?Jg(e):_p(e),this.#r=r&pY,this.nocase=o,this.roots=i,this.root=n||this,this.#I=a,this.#b=l.fullpath,this.#M=l.relative,this.#R=l.relativePosix,this.parent=l.parent,this.parent?this.#e=this.parent.#e:this.#e=K1(l.fs)}depth(){return this.#v!==void 0?this.#v:this.parent?this.#v=this.parent.depth()+1:this.#v=0}childrenCache(){return this.#I}resolve(e){if(!e)return this;let r=this.getRootString(e),i=e.substring(r.length).split(this.splitSep);return r?this.getRoot(r).#F(i):this.#F(i)}#F(e){let r=this;for(let n of e)r=r.child(n);return r}children(){let e=this.#I.get(this);if(e)return e;let r=Object.assign([],{provisional:0});return this.#I.set(this,r),this.#r&=~Jv,r}child(e,r){if(e===""||e===".")return this;if(e==="..")return this.parent||this;let n=this.children(),i=this.nocase?Jg(e):_p(e);for(let p of n)if(p.#T===i)return p;let o=this.parent?this.sep:"",a=this.#b?this.#b+o+e:void 0,l=this.newChild(e,gn,{...r,parent:this,fullpath:a});return this.canReaddir()||(l.#r|=Nn),n.push(l),l}relative(){if(this.isCWD)return"";if(this.#M!==void 0)return this.#M;let e=this.name,r=this.parent;if(!r)return this.#M=this.name;let n=r.relative();return n+(!n||!r.parent?"":this.sep)+e}relativePosix(){if(this.sep==="/")return this.relative();if(this.isCWD)return"";if(this.#R!==void 0)return this.#R;let e=this.name,r=this.parent;if(!r)return this.#R=this.fullpathPosix();let n=r.relativePosix();return n+(!n||!r.parent?"":"/")+e}fullpath(){if(this.#b!==void 0)return this.#b;let e=this.name,r=this.parent;if(!r)return this.#b=this.name;let i=r.fullpath()+(r.parent?this.sep:"")+e;return this.#b=i}fullpathPosix(){if(this.#m!==void 0)return this.#m;if(this.sep==="/")return this.#m=this.fullpath();if(!this.parent){let i=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(i)?this.#m=`//?/${i}`:this.#m=i}let e=this.parent,r=e.fullpathPosix(),n=r+(!r||!e.parent?"":"/")+this.name;return this.#m=n}isUnknown(){return(this.#r&hn)===gn}isType(e){return this[`is${e}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#r&hn)===J1}isDirectory(){return(this.#r&hn)===ni}isCharacterDevice(){return(this.#r&hn)===Y1}isBlockDevice(){return(this.#r&hn)===X1}isFIFO(){return(this.#r&hn)===Z1}isSocket(){return(this.#r&hn)===eF}isSymbolicLink(){return(this.#r&Ss)===Ss}lstatCached(){return this.#r&$1?this:void 0}readlinkCached(){return this.#x}realpathCached(){return this.#A}readdirCached(){let e=this.children();return e.slice(0,e.provisional)}canReadlink(){if(this.#x)return!0;if(!this.parent)return!1;let e=this.#r&hn;return!(e!==gn&&e!==Ss||this.#r&Xg||this.#r&Nn)}calledReaddir(){return!!(this.#r&Jv)}isENOENT(){return!!(this.#r&Nn)}isNamed(e){return this.nocase?this.#T===Jg(e):this.#T===_p(e)}async readlink(){let e=this.#x;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=await this.#e.promises.readlink(this.fullpath()),n=(await this.parent.realpath())?.resolve(r);if(n)return this.#x=n}catch(r){this.#p(r.code);return}}readlinkSync(){let e=this.#x;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=this.#e.readlinkSync(this.fullpath()),n=this.parent.realpathSync()?.resolve(r);if(n)return this.#x=n}catch(r){this.#p(r.code);return}}#C(e){this.#r|=Jv;for(let r=e.provisional;r<e.length;r++){let n=e[r];n&&n.#O()}}#O(){this.#r&Nn||(this.#r=(this.#r|Nn)&vp,this.#k())}#k(){let e=this.children();e.provisional=0;for(let r of e)r.#O()}#P(){this.#r|=ey,this.#N()}#N(){if(this.#r&wp)return;let e=this.#r;(e&hn)===ni&&(e&=vp),this.#r=e|wp,this.#k()}#L(e=""){e==="ENOTDIR"||e==="EPERM"?this.#N():e==="ENOENT"?this.#O():this.children().provisional=0}#U(e=""){e==="ENOTDIR"?this.parent.#N():e==="ENOENT"&&this.#O()}#p(e=""){let r=this.#r;r|=Xg,e==="ENOENT"&&(r|=Nn),(e==="EINVAL"||e==="UNKNOWN")&&(r&=vp),this.#r=r,e==="ENOTDIR"&&this.parent&&this.parent.#N()}#V(e,r){return this.#D(e,r)||this.#B(e,r)}#B(e,r){let n=eb(e),i=this.newChild(e.name,n,{parent:this}),o=i.#r&hn;return o!==ni&&o!==Ss&&o!==gn&&(i.#r|=wp),r.unshift(i),r.provisional++,i}#D(e,r){for(let n=r.provisional;n<r.length;n++){let i=r[n];if((this.nocase?Jg(e.name):_p(e.name))===i.#T)return this.#H(e,i,n,r)}}#H(e,r,n,i){let o=r.name;return r.#r=r.#r&vp|eb(e),o!==e.name&&(r.name=e.name),n!==i.provisional&&(n===i.length-1?i.pop():i.splice(n,1),i.unshift(r)),i.provisional++,r}async lstat(){if(!(this.#r&Nn))try{return this.#q(await this.#e.promises.lstat(this.fullpath())),this}catch(e){this.#U(e.code)}}lstatSync(){if(!(this.#r&Nn))try{return this.#q(this.#e.lstatSync(this.fullpath())),this}catch(e){this.#U(e.code)}}#q(e){let{atime:r,atimeMs:n,birthtime:i,birthtimeMs:o,blksize:a,blocks:l,ctime:p,ctimeMs:u,dev:d,gid:h,ino:g,mode:x,mtime:_,mtimeMs:w,nlink:C,rdev:M,size:U,uid:Z}=e;this.#w=r,this.#g=n,this.#E=i,this.#f=o,this.#u=a,this.#i=l,this.#_=p,this.#d=u,this.#t=d,this.#S=h,this.#a=g,this.#o=x,this.#h=_,this.#y=w,this.#n=C,this.#l=M,this.#c=U,this.#s=Z;let ne=eb(e);this.#r=this.#r&vp|ne|$1,ne!==gn&&ne!==ni&&ne!==Ss&&(this.#r|=wp)}#$=[];#j=!1;#z(e){this.#j=!1;let r=this.#$.slice();this.#$.length=0,r.forEach(n=>n(null,e))}readdirCB(e,r=!1){if(!this.canReaddir()){r?e(null,[]):queueMicrotask(()=>e(null,[]));return}let n=this.children();if(this.calledReaddir()){let o=n.slice(0,n.provisional);r?e(null,o):queueMicrotask(()=>e(null,o));return}if(this.#$.push(e),this.#j)return;this.#j=!0;let i=this.fullpath();this.#e.readdir(i,{withFileTypes:!0},(o,a)=>{if(o)this.#L(o.code),n.provisional=0;else{for(let l of a)this.#V(l,n);this.#C(n)}this.#z(n.slice(0,n.provisional))})}#W;async readdir(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();if(this.#W)await this.#W;else{let n=()=>{};this.#W=new Promise(i=>n=i);try{for(let i of await this.#e.promises.readdir(r,{withFileTypes:!0}))this.#V(i,e);this.#C(e)}catch(i){this.#L(i.code),e.provisional=0}this.#W=void 0,n()}return e.slice(0,e.provisional)}readdirSync(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();try{for(let n of this.#e.readdirSync(r,{withFileTypes:!0}))this.#V(n,e);this.#C(e)}catch(n){this.#L(n.code),e.provisional=0}return e.slice(0,e.provisional)}canReaddir(){if(this.#r&j1)return!1;let e=hn&this.#r;return e===gn||e===ni||e===Ss}shouldWalk(e,r){return(this.#r&ni)===ni&&!(this.#r&j1)&&!e.has(this)&&(!r||r(this))}async realpath(){if(this.#A)return this.#A;if(!((ey|Xg|Nn)&this.#r))try{let e=await this.#e.promises.realpath(this.fullpath());return this.#A=this.resolve(e)}catch{this.#P()}}realpathSync(){if(this.#A)return this.#A;if(!((ey|Xg|Nn)&this.#r))try{let e=this.#e.realpathSync(this.fullpath());return this.#A=this.resolve(e)}catch{this.#P()}}[tF](e){if(e===this)return;e.isCWD=!1,this.isCWD=!0;let r=new Set([]),n=[],i=this;for(;i&&i.parent;)r.add(i),i.#M=n.join(this.sep),i.#R=n.join("/"),i=i.parent,n.push("..");for(i=e;i&&i.parent&&!r.has(i);)i.#M=void 0,i.#R=void 0,i=i.parent}},ry=class t extends Kt{sep="\\";splitSep=lY;constructor(e,r=gn,n,i,o,a,l){super(e,r,n,i,o,a,l)}newChild(e,r=gn,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}getRootString(e){return sc.win32.parse(e).root}getRoot(e){if(e=cY(e.toUpperCase()),e===this.root.name)return this.root;for(let[r,n]of Object.entries(this.roots))if(this.sameRoot(e,r))return this.roots[e]=n;return this.roots[e]=new ac(e,this).root}sameRoot(e,r=this.root.name){return e=e.toUpperCase().replace(/\//g,"\\").replace(Q1,"$1\\"),e===r}},ny=class t extends Kt{splitSep="/";sep="/";constructor(e,r=gn,n,i,o,a,l){super(e,r,n,i,o,a,l)}getRootString(e){return e.startsWith("/")?"/":""}getRoot(e){return this.root}newChild(e,r=gn,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}},iy=class{root;rootPath;roots;cwd;#e;#t;#o;nocase;#n;constructor(e=process.cwd(),r,n,{nocase:i,childrenCacheSize:o=16*1024,fs:a=bp}={}){this.#n=K1(a),(e instanceof URL||e.startsWith("file://"))&&(e=(0,G1.fileURLToPath)(e));let l=r.resolve(e);this.roots=Object.create(null),this.rootPath=this.parseRootPath(l),this.#e=new ty,this.#t=new ty,this.#o=new tb(o);let p=l.substring(this.rootPath.length).split(n);if(p.length===1&&!p[0]&&p.pop(),i===void 0)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=i,this.root=this.newRoot(this.#n),this.roots[this.rootPath]=this.root;let u=this.root,d=p.length-1,h=r.sep,g=this.rootPath,x=!1;for(let _ of p){let w=d--;u=u.child(_,{relative:new Array(w).fill("..").join(h),relativePosix:new Array(w).fill("..").join("/"),fullpath:g+=(x?"":h)+_}),x=!0}this.cwd=u}depth(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.depth()}childrenCache(){return this.#o}resolve(...e){let r="";for(let o=e.length-1;o>=0;o--){let a=e[o];if(!(!a||a===".")&&(r=r?`${a}/${r}`:a,this.isAbsolute(a)))break}let n=this.#e.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpath();return this.#e.set(r,i),i}resolvePosix(...e){let r="";for(let o=e.length-1;o>=0;o--){let a=e[o];if(!(!a||a===".")&&(r=r?`${a}/${r}`:a,this.isAbsolute(a)))break}let n=this.#t.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpathPosix();return this.#t.set(r,i),i}relative(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relative()}relativePosix(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relativePosix()}basename(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.name}dirname(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),(e.parent||e).fullpath()}async readdir(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Kt||(r=e,e=this.cwd);let{withFileTypes:n}=r;if(e.canReaddir()){let i=await e.readdir();return n?i:i.map(o=>o.name)}else return[]}readdirSync(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Kt||(r=e,e=this.cwd);let{withFileTypes:n=!0}=r;return e.canReaddir()?n?e.readdirSync():e.readdirSync().map(i=>i.name):[]}async lstat(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstat()}lstatSync(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstatSync()}async readlink(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Kt||(r=e.withFileTypes,e=this.cwd);let n=await e.readlink();return r?n:n?.fullpath()}readlinkSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Kt||(r=e.withFileTypes,e=this.cwd);let n=e.readlinkSync();return r?n:n?.fullpath()}async realpath(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Kt||(r=e.withFileTypes,e=this.cwd);let n=await e.realpath();return r?n:n?.fullpath()}realpathSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Kt||(r=e.withFileTypes,e=this.cwd);let n=e.realpathSync();return r?n:n?.fullpath()}async walk(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Kt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:a}=r,l=[];(!o||o(e))&&l.push(n?e:e.fullpath());let p=new Set,u=(h,g)=>{p.add(h),h.readdirCB((x,_)=>{if(x)return g(x);let w=_.length;if(!w)return g();let C=()=>{--w===0&&g()};for(let M of _)(!o||o(M))&&l.push(n?M:M.fullpath()),i&&M.isSymbolicLink()?M.realpath().then(U=>U?.isUnknown()?U.lstat():U).then(U=>U?.shouldWalk(p,a)?u(U,C):C()):M.shouldWalk(p,a)?u(M,C):C()},!0)},d=e;return new Promise((h,g)=>{u(d,x=>{if(x)return g(x);h(l)})})}walkSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Kt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:a}=r,l=[];(!o||o(e))&&l.push(n?e:e.fullpath());let p=new Set([e]);for(let u of p){let d=u.readdirSync();for(let h of d){(!o||o(h))&&l.push(n?h:h.fullpath());let g=h;if(h.isSymbolicLink()){if(!(i&&(g=h.realpathSync())))continue;g.isUnknown()&&g.lstatSync()}g.shouldWalk(p,a)&&p.add(g)}}return l}[Symbol.asyncIterator](){return this.iterate()}iterate(e=this.cwd,r={}){return typeof e=="string"?e=this.cwd.resolve(e):e instanceof Kt||(r=e,e=this.cwd),this.stream(e,r)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Kt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:a}=r;(!o||o(e))&&(yield n?e:e.fullpath());let l=new Set([e]);for(let p of l){let u=p.readdirSync();for(let d of u){(!o||o(d))&&(yield n?d:d.fullpath());let h=d;if(d.isSymbolicLink()){if(!(i&&(h=d.realpathSync())))continue;h.isUnknown()&&h.lstatSync()}h.shouldWalk(l,a)&&l.add(h)}}}stream(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Kt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:a}=r,l=new Eo({objectMode:!0});(!o||o(e))&&l.write(n?e:e.fullpath());let p=new Set,u=[e],d=0,h=()=>{let g=!1;for(;!g;){let x=u.shift();if(!x){d===0&&l.end();return}d++,p.add(x);let _=(C,M,U=!1)=>{if(C)return l.emit("error",C);if(i&&!U){let Z=[];for(let ne of M)ne.isSymbolicLink()&&Z.push(ne.realpath().then(ge=>ge?.isUnknown()?ge.lstat():ge));if(Z.length){Promise.all(Z).then(()=>_(null,M,!0));return}}for(let Z of M)Z&&(!o||o(Z))&&(l.write(n?Z:Z.fullpath())||(g=!0));d--;for(let Z of M){let ne=Z.realpathCached()||Z;ne.shouldWalk(p,a)&&u.push(ne)}g&&!l.flowing?l.once("drain",h):w||h()},w=!0;x.readdirCB(_,!0),w=!1}};return h(),l}streamSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Kt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:a}=r,l=new Eo({objectMode:!0}),p=new Set;(!o||o(e))&&l.write(n?e:e.fullpath());let u=[e],d=0,h=()=>{let g=!1;for(;!g;){let x=u.shift();if(!x){d===0&&l.end();return}d++,p.add(x);let _=x.readdirSync();for(let w of _)(!o||o(w))&&(l.write(n?w:w.fullpath())||(g=!0));d--;for(let w of _){let C=w;if(w.isSymbolicLink()){if(!(i&&(C=w.realpathSync())))continue;C.isUnknown()&&C.lstatSync()}C.shouldWalk(p,a)&&u.push(C)}}g&&!l.flowing&&l.once("drain",h)};return h(),l}chdir(e=this.cwd){let r=this.cwd;this.cwd=typeof e=="string"?this.cwd.resolve(e):e,this.cwd[tF](r)}},ac=class extends iy{sep="\\";constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,sc.win32,"\\",{...r,nocase:n}),this.nocase=n;for(let i=this.cwd;i;i=i.parent)i.nocase=this.nocase}parseRootPath(e){return sc.win32.parse(e).root.toUpperCase()}newRoot(e){return new ry(this.rootPath,ni,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")||e.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(e)}},cc=class extends iy{sep="/";constructor(e=process.cwd(),r={}){let{nocase:n=!1}=r;super(e,sc.posix,"/",{...r,nocase:n}),this.nocase=n}parseRootPath(e){return"/"}newRoot(e){return new ny(this.rootPath,ni,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")}},Ep=class extends cc{constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,{...r,nocase:n})}},cLe=process.platform==="win32"?ry:ny,rF=process.platform==="win32"?ac:process.platform==="darwin"?Ep:cc;var uY=t=>t.length>=1,fY=t=>t.length>=1,lc=class t{#e;#t;#o;length;#n;#s;#S;#l;#u;#a;#c=!0;constructor(e,r,n,i){if(!uY(e))throw new TypeError("empty pattern list");if(!fY(r))throw new TypeError("empty glob list");if(r.length!==e.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=e.length,n<0||n>=this.length)throw new TypeError("index out of range");if(this.#e=e,this.#t=r,this.#o=n,this.#n=i,this.#o===0){if(this.isUNC()){let[o,a,l,p,...u]=this.#e,[d,h,g,x,..._]=this.#t;u[0]===""&&(u.shift(),_.shift());let w=[o,a,l,p,""].join("/"),C=[d,h,g,x,""].join("/");this.#e=[w,...u],this.#t=[C,..._],this.length=this.#e.length}else if(this.isDrive()||this.isAbsolute()){let[o,...a]=this.#e,[l,...p]=this.#t;a[0]===""&&(a.shift(),p.shift());let u=o+"/",d=l+"/";this.#e=[u,...a],this.#t=[d,...p],this.length=this.#e.length}}}pattern(){return this.#e[this.#o]}isString(){return typeof this.#e[this.#o]=="string"}isGlobstar(){return this.#e[this.#o]===Ut}isRegExp(){return this.#e[this.#o]instanceof RegExp}globString(){return this.#S=this.#S||(this.#o===0?this.isAbsolute()?this.#t[0]+this.#t.slice(1).join("/"):this.#t.join("/"):this.#t.slice(this.#o).join("/"))}hasMore(){return this.length>this.#o+1}rest(){return this.#s!==void 0?this.#s:this.hasMore()?(this.#s=new t(this.#e,this.#t,this.#o+1,this.#n),this.#s.#a=this.#a,this.#s.#u=this.#u,this.#s.#l=this.#l,this.#s):this.#s=null}isUNC(){let e=this.#e;return this.#u!==void 0?this.#u:this.#u=this.#n==="win32"&&this.#o===0&&e[0]===""&&e[1]===""&&typeof e[2]=="string"&&!!e[2]&&typeof e[3]=="string"&&!!e[3]}isDrive(){let e=this.#e;return this.#l!==void 0?this.#l:this.#l=this.#n==="win32"&&this.#o===0&&this.length>1&&typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0])}isAbsolute(){let e=this.#e;return this.#a!==void 0?this.#a:this.#a=e[0]===""&&e.length>1||this.isDrive()||this.isUNC()}root(){let e=this.#e[0];return typeof e=="string"&&this.isAbsolute()&&this.#o===0?e:""}checkFollowGlobstar(){return!(this.#o===0||!this.isGlobstar()||!this.#c)}markFollowGlobstar(){return this.#o===0||!this.isGlobstar()||!this.#c?!1:(this.#c=!1,!0)}};var dY=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",pc=class{relative;relativeChildren;absolute;absoluteChildren;platform;mmopts;constructor(e,{nobrace:r,nocase:n,noext:i,noglobstar:o,platform:a=dY}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[],this.platform=a,this.mmopts={dot:!0,nobrace:r,nocase:n,noext:i,noglobstar:o,optimizationLevel:2,platform:a,nocomment:!0,nonegate:!0};for(let l of e)this.add(l)}add(e){let r=new jr(e,this.mmopts);for(let n=0;n<r.set.length;n++){let i=r.set[n],o=r.globParts[n];if(!i||!o)throw new Error("invalid pattern object");for(;i[0]==="."&&o[0]===".";)i.shift(),o.shift();let a=new lc(i,o,0,this.platform),l=new jr(a.globString(),this.mmopts),p=o[o.length-1]==="**",u=a.isAbsolute();u?this.absolute.push(l):this.relative.push(l),p&&(u?this.absoluteChildren.push(l):this.relativeChildren.push(l))}}ignored(e){let r=e.fullpath(),n=`${r}/`,i=e.relative()||".",o=`${i}/`;for(let a of this.relative)if(a.match(i)||a.match(o))return!0;for(let a of this.absolute)if(a.match(r)||a.match(n))return!0;return!1}childrenIgnored(e){let r=e.fullpath()+"/",n=(e.relative()||".")+"/";for(let i of this.relativeChildren)if(i.match(n))return!0;for(let i of this.absoluteChildren)if(i.match(r))return!0;return!1}};var rb=class t{store;constructor(e=new Map){this.store=e}copy(){return new t(new Map(this.store))}hasWalked(e,r){return this.store.get(e.fullpath())?.has(r.globString())}storeWalked(e,r){let n=e.fullpath(),i=this.store.get(n);i?i.add(r.globString()):this.store.set(n,new Set([r.globString()]))}},nb=class{store=new Map;add(e,r,n){let i=(r?2:0)|(n?1:0),o=this.store.get(e);this.store.set(e,o===void 0?i:i&o)}entries(){return[...this.store.entries()].map(([e,r])=>[e,!!(r&2),!!(r&1)])}},ib=class{store=new Map;add(e,r){if(!e.canReaddir())return;let n=this.store.get(e);n?n.find(i=>i.globString()===r.globString())||n.push(r):this.store.set(e,[r])}get(e){let r=this.store.get(e);if(!r)throw new Error("attempting to walk unknown path");return r}entries(){return this.keys().map(e=>[e,this.store.get(e)])}keys(){return[...this.store.keys()].filter(e=>e.canReaddir())}},Rp=class t{hasWalkedCache;matches=new nb;subwalks=new ib;patterns;follow;dot;opts;constructor(e,r){this.opts=e,this.follow=!!e.follow,this.dot=!!e.dot,this.hasWalkedCache=r?r.copy():new rb}processPatterns(e,r){this.patterns=r;let n=r.map(i=>[e,i]);for(let[i,o]of n){this.hasWalkedCache.storeWalked(i,o);let a=o.root(),l=o.isAbsolute()&&this.opts.absolute!==!1;if(a){i=i.resolve(a==="/"&&this.opts.root!==void 0?this.opts.root:a);let h=o.rest();if(h)o=h;else{this.matches.add(i,!0,!1);continue}}if(i.isENOENT())continue;let p,u,d=!1;for(;typeof(p=o.pattern())=="string"&&(u=o.rest());)i=i.resolve(p),o=u,d=!0;if(p=o.pattern(),u=o.rest(),d){if(this.hasWalkedCache.hasWalked(i,o))continue;this.hasWalkedCache.storeWalked(i,o)}if(typeof p=="string"){let h=p===".."||p===""||p===".";this.matches.add(i.resolve(p),l,h);continue}else if(p===Ut){(!i.isSymbolicLink()||this.follow||o.checkFollowGlobstar())&&this.subwalks.add(i,o);let h=u?.pattern(),g=u?.rest();if(!u||(h===""||h===".")&&!g)this.matches.add(i,l,h===""||h===".");else if(h===".."){let x=i.parent||i;g?this.hasWalkedCache.hasWalked(x,g)||this.subwalks.add(x,g):this.matches.add(x,l,!0)}}else p instanceof RegExp&&this.subwalks.add(i,o)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new t(this.opts,this.hasWalkedCache)}filterEntries(e,r){let n=this.subwalks.get(e),i=this.child();for(let o of r)for(let a of n){let l=a.isAbsolute(),p=a.pattern(),u=a.rest();p===Ut?i.testGlobstar(o,a,u,l):p instanceof RegExp?i.testRegExp(o,p,u,l):i.testString(o,p,u,l)}return i}testGlobstar(e,r,n,i){if((this.dot||!e.name.startsWith("."))&&(r.hasMore()||this.matches.add(e,i,!1),e.canReaddir()&&(this.follow||!e.isSymbolicLink()?this.subwalks.add(e,r):e.isSymbolicLink()&&(n&&r.checkFollowGlobstar()?this.subwalks.add(e,n):r.markFollowGlobstar()&&this.subwalks.add(e,r)))),n){let o=n.pattern();if(typeof o=="string"&&o!==".."&&o!==""&&o!==".")this.testString(e,o,n.rest(),i);else if(o===".."){let a=e.parent||e;this.subwalks.add(a,n)}else o instanceof RegExp&&this.testRegExp(e,o,n.rest(),i)}}testRegExp(e,r,n,i){r.test(e.name)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}testString(e,r,n,i){e.isNamed(r)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}};var mY=(t,e)=>typeof t=="string"?new pc([t],e):Array.isArray(t)?new pc(t,e):t,oy=class{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#e=[];#t;#o;signal;maxDepth;includeChildMatches;constructor(e,r,n){if(this.patterns=e,this.path=r,this.opts=n,this.#o=!n.posix&&n.platform==="win32"?"\\":"/",this.includeChildMatches=n.includeChildMatches!==!1,(n.ignore||!this.includeChildMatches)&&(this.#t=mY(n.ignore??[],n),!this.includeChildMatches&&typeof this.#t.add!="function")){let i="cannot ignore child matches, ignore lacks add() method.";throw new Error(i)}this.maxDepth=n.maxDepth||1/0,n.signal&&(this.signal=n.signal,this.signal.addEventListener("abort",()=>{this.#e.length=0}))}#n(e){return this.seen.has(e)||!!this.#t?.ignored?.(e)}#s(e){return!!this.#t?.childrenIgnored?.(e)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;this.paused=!1;let e;for(;!this.paused&&(e=this.#e.shift());)e()}onResume(e){this.signal?.aborted||(this.paused?this.#e.push(e):e())}async matchCheck(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||await e.realpath(),!n)return;e=n}let o=e.isUnknown()||this.opts.stat?await e.lstat():e;if(this.opts.follow&&this.opts.nodir&&o?.isSymbolicLink()){let a=await o.realpath();a&&(a.isUnknown()||this.opts.stat)&&await a.lstat()}return this.matchCheckTest(o,r)}matchCheckTest(e,r){return e&&(this.maxDepth===1/0||e.depth()<=this.maxDepth)&&(!r||e.canReaddir())&&(!this.opts.nodir||!e.isDirectory())&&(!this.opts.nodir||!this.opts.follow||!e.isSymbolicLink()||!e.realpathCached()?.isDirectory())&&!this.#n(e)?e:void 0}matchCheckSync(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||e.realpathSync(),!n)return;e=n}let o=e.isUnknown()||this.opts.stat?e.lstatSync():e;if(this.opts.follow&&this.opts.nodir&&o?.isSymbolicLink()){let a=o.realpathSync();a&&(a?.isUnknown()||this.opts.stat)&&a.lstatSync()}return this.matchCheckTest(o,r)}matchFinish(e,r){if(this.#n(e))return;if(!this.includeChildMatches&&this.#t?.add){let o=`${e.relativePosix()}/**`;this.#t.add(o)}let n=this.opts.absolute===void 0?r:this.opts.absolute;this.seen.add(e);let i=this.opts.mark&&e.isDirectory()?this.#o:"";if(this.opts.withFileTypes)this.matchEmit(e);else if(n){let o=this.opts.posix?e.fullpathPosix():e.fullpath();this.matchEmit(o+i)}else{let o=this.opts.posix?e.relativePosix():e.relative(),a=this.opts.dotRelative&&!o.startsWith(".."+this.#o)?"."+this.#o:"";this.matchEmit(o?a+o+i:"."+i)}}async match(e,r,n){let i=await this.matchCheck(e,n);i&&this.matchFinish(i,r)}matchSync(e,r,n){let i=this.matchCheckSync(e,n);i&&this.matchFinish(i,r)}walkCB(e,r,n){this.signal?.aborted&&n(),this.walkCB2(e,r,new Rp(this.opts),n)}walkCB2(e,r,n,i){if(this.#s(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2(e,r,n,i));return}n.processPatterns(e,r);let o=1,a=()=>{--o===0&&i()};for(let[l,p,u]of n.matches.entries())this.#n(l)||(o++,this.match(l,p,u).then(()=>a()));for(let l of n.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;o++;let p=l.readdirCached();l.calledReaddir()?this.walkCB3(l,p,n,a):l.readdirCB((u,d)=>this.walkCB3(l,d,n,a),!0)}a()}walkCB3(e,r,n,i){n=n.filterEntries(e,r);let o=1,a=()=>{--o===0&&i()};for(let[l,p,u]of n.matches.entries())this.#n(l)||(o++,this.match(l,p,u).then(()=>a()));for(let[l,p]of n.subwalks.entries())o++,this.walkCB2(l,p,n.child(),a);a()}walkCBSync(e,r,n){this.signal?.aborted&&n(),this.walkCB2Sync(e,r,new Rp(this.opts),n)}walkCB2Sync(e,r,n,i){if(this.#s(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2Sync(e,r,n,i));return}n.processPatterns(e,r);let o=1,a=()=>{--o===0&&i()};for(let[l,p,u]of n.matches.entries())this.#n(l)||this.matchSync(l,p,u);for(let l of n.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;o++;let p=l.readdirSync();this.walkCB3Sync(l,p,n,a)}a()}walkCB3Sync(e,r,n,i){n=n.filterEntries(e,r);let o=1,a=()=>{--o===0&&i()};for(let[l,p,u]of n.matches.entries())this.#n(l)||this.matchSync(l,p,u);for(let[l,p]of n.subwalks.entries())o++,this.walkCB2Sync(l,p,n.child(),a);a()}},kp=class extends oy{matches=new Set;constructor(e,r,n){super(e,r,n)}matchEmit(e){this.matches.add(e)}async walk(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise((e,r)=>{this.walkCB(this.path,this.patterns,()=>{this.signal?.aborted?r(this.signal.reason):e(this.matches)})}),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>{if(this.signal?.aborted)throw this.signal.reason}),this.matches}},Pp=class extends oy{results;constructor(e,r,n){super(e,r,n),this.results=new Eo({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(e){this.results.write(e),this.results.flowing||this.pause()}stream(){let e=this.path;return e.isUnknown()?e.lstat().then(()=>{this.walkCB(e,this.patterns,()=>this.results.end())}):this.walkCB(e,this.patterns,()=>this.results.end()),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}};var hY=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",Ln=class{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;includeChildMatches;opts;patterns;constructor(e,r){if(!r)throw new TypeError("glob options required");if(this.withFileTypes=!!r.withFileTypes,this.signal=r.signal,this.follow=!!r.follow,this.dot=!!r.dot,this.dotRelative=!!r.dotRelative,this.nodir=!!r.nodir,this.mark=!!r.mark,r.cwd?(r.cwd instanceof URL||r.cwd.startsWith("file://"))&&(r.cwd=(0,nF.fileURLToPath)(r.cwd)):this.cwd="",this.cwd=r.cwd||"",this.root=r.root,this.magicalBraces=!!r.magicalBraces,this.nobrace=!!r.nobrace,this.noext=!!r.noext,this.realpath=!!r.realpath,this.absolute=r.absolute,this.includeChildMatches=r.includeChildMatches!==!1,this.noglobstar=!!r.noglobstar,this.matchBase=!!r.matchBase,this.maxDepth=typeof r.maxDepth=="number"?r.maxDepth:1/0,this.stat=!!r.stat,this.ignore=r.ignore,this.withFileTypes&&this.absolute!==void 0)throw new Error("cannot set absolute and withFileTypes:true");if(typeof e=="string"&&(e=[e]),this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(e=e.map(p=>p.replace(/\\/g,"/"))),this.matchBase){if(r.noglobstar)throw new TypeError("base matching requires globstar");e=e.map(p=>p.includes("/")?p:`./**/${p}`)}if(this.pattern=e,this.platform=r.platform||hY,this.opts={...r,platform:this.platform},r.scurry){if(this.scurry=r.scurry,r.nocase!==void 0&&r.nocase!==r.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{let p=r.platform==="win32"?ac:r.platform==="darwin"?Ep:r.platform?cc:rF;this.scurry=new p(this.cwd,{nocase:r.nocase,fs:r.fs})}this.nocase=this.scurry.nocase;let n=this.platform==="darwin"||this.platform==="win32",i={...r,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:n,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},o=this.pattern.map(p=>new jr(p,i)),[a,l]=o.reduce((p,u)=>(p[0].push(...u.set),p[1].push(...u.globParts),p),[[],[]]);this.patterns=a.map((p,u)=>{let d=l[u];if(!d)throw new Error("invalid pattern object");return new lc(p,d,0,this.platform)})}async walk(){return[...await new kp(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walk()]}walkSync(){return[...new kp(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walkSync()]}stream(){return new Pp(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).stream()}streamSync(){return new Pp(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}};var ob=(t,e={})=>{Array.isArray(t)||(t=[t]);for(let r of t)if(new jr(r,e).hasMagic())return!0;return!1};function sy(t,e={}){return new Ln(t,e).streamSync()}function oF(t,e={}){return new Ln(t,e).stream()}function sF(t,e={}){return new Ln(t,e).walkSync()}async function iF(t,e={}){return new Ln(t,e).walk()}function ay(t,e={}){return new Ln(t,e).iterateSync()}function aF(t,e={}){return new Ln(t,e).iterate()}var gY=sy,yY=Object.assign(oF,{sync:sy}),xY=ay,TY=Object.assign(aF,{sync:ay}),SY=Object.assign(sF,{stream:sy,iterate:ay}),sb=Object.assign(iF,{glob:iF,globSync:sF,sync:SY,globStream:oF,stream:yY,globStreamSync:sy,streamSync:gY,globIterate:aF,iterate:TY,globIterateSync:ay,iterateSync:xY,Glob:Ln,hasMagic:ob,escape:tc,unescape:Cn});sb.glob=sb;function cF(){let t=process.env.CURSORLESS_MODE;switch(t){case void 0:case"production":return"production";case"development":return"development";case"test":return"test";default:throw new Error(`Unexpected value for environment variable CURSORLESS_MODE: ${t}`)}}var xF=Object.defineProperty,wY=Object.getOwnPropertyNames,F=(t,e)=>xF(t,"name",{value:e,configurable:!0}),_Y=(t,e)=>function(){return e||(0,t[wY(t)[0]])((e={exports:{}}).exports,e),e.exports},wb=(t,e)=>{for(var r in e)xF(t,r,{get:e[r],enumerable:!0})},EY=_Y({"(disabled):util"(){}}),cy={};wb(cy,{addChainableMethod:()=>Ob,addLengthGuard:()=>Fp,addMethod:()=>Ib,addProperty:()=>Db,checkError:()=>zr,compareByInspect:()=>fy,eql:()=>qF,expectTypes:()=>RF,flag:()=>_e,getActual:()=>yy,getMessage:()=>Rb,getName:()=>Ty,getOperator:()=>Vb,getOwnEnumerableProperties:()=>Ub,getOwnEnumerablePropertySymbols:()=>Lb,getPathInfo:()=>Ab,hasProperty:()=>xy,inspect:()=>Le,isNaN:()=>dy,isProxyEnabled:()=>Ip,isRegExp:()=>my,objDisplay:()=>vs,overwriteChainableMethod:()=>Nb,overwriteMethod:()=>Cb,overwriteProperty:()=>Fb,proxify:()=>mc,test:()=>_b,transferFlags:()=>Un,type:()=>Ze});var zr={};wb(zr,{compatibleConstructor:()=>vF,compatibleInstance:()=>SF,compatibleMessage:()=>bF,getConstructorName:()=>wF,getMessage:()=>_F});function gy(t){return t instanceof Error||Object.prototype.toString.call(t)==="[object Error]"}F(gy,"isErrorInstance");function TF(t){return Object.prototype.toString.call(t)==="[object RegExp]"}F(TF,"isRegExp");function SF(t,e){return gy(e)&&t===e}F(SF,"compatibleInstance");function vF(t,e){return gy(e)?t.constructor===e.constructor||t instanceof e.constructor:(typeof e=="object"||typeof e=="function")&&e.prototype?t.constructor===e||t instanceof e:!1}F(vF,"compatibleConstructor");function bF(t,e){let r=typeof t=="string"?t:t.message;return TF(e)?e.test(r):typeof e=="string"?r.indexOf(e)!==-1:!1}F(bF,"compatibleMessage");function wF(t){let e=t;return gy(t)?e=t.constructor.name:typeof t=="function"&&(e=t.name,e===""&&(e=new t().name||e)),e}F(wF,"getConstructorName");function _F(t){let e="";return t&&t.message?e=t.message:typeof t=="string"&&(e=t),e}F(_F,"getMessage");function _e(t,e,r){var n=t.__flags||(t.__flags=Object.create(null));if(arguments.length===3)n[e]=r;else return n[e]}F(_e,"flag");function _b(t,e){var r=_e(t,"negate"),n=e[0];return r?!n:n}F(_b,"test");function Ze(t){if(typeof t>"u")return"undefined";if(t===null)return"null";let e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}F(Ze,"type");var RY="captureStackTrace"in Error,qe=class EF extends Error{static{F(this,"AssertionError")}message;get name(){return"AssertionError"}get ok(){return!1}constructor(e="Unspecified AssertionError",r,n){super(e),this.message=e,RY&&Error.captureStackTrace(this,n||EF);for(let i in r)i in this||(this[i]=r[i])}toJSON(e){return{...this,name:this.name,message:this.message,ok:!1,stack:e!==!1?this.stack:void 0}}};function RF(t,e){var r=_e(t,"message"),n=_e(t,"ssfi");r=r?r+": ":"",t=_e(t,"object"),e=e.map(function(a){return a.toLowerCase()}),e.sort();var i=e.map(function(a,l){var p=~["a","e","i","o","u"].indexOf(a.charAt(0))?"an":"a",u=e.length>1&&l===e.length-1?"or ":"";return u+p+" "+a}).join(", "),o=Ze(t).toLowerCase();if(!e.some(function(a){return o===a}))throw new qe(r+"object tested must be "+i+", but "+o+" given",void 0,n)}F(RF,"expectTypes");function yy(t,e){return e.length>4?e[4]:t._obj}F(yy,"getActual");var lF={bold:["1","22"],dim:["2","22"],italic:["3","23"],underline:["4","24"],inverse:["7","27"],hidden:["8","28"],strike:["9","29"],black:["30","39"],red:["31","39"],green:["32","39"],yellow:["33","39"],blue:["34","39"],magenta:["35","39"],cyan:["36","39"],white:["37","39"],brightblack:["30;1","39"],brightred:["31;1","39"],brightgreen:["32;1","39"],brightyellow:["33;1","39"],brightblue:["34;1","39"],brightmagenta:["35;1","39"],brightcyan:["36;1","39"],brightwhite:["37;1","39"],grey:["90","39"]},kY={special:"cyan",number:"yellow",bigint:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",symbol:"green",date:"magenta",regexp:"red"},fc="\u2026";function kF(t,e){let r=lF[kY[e]]||lF[e]||"";return r?`\x1B[${r[0]}m${String(t)}\x1B[${r[1]}m`:String(t)}F(kF,"colorise");function PF({showHidden:t=!1,depth:e=2,colors:r=!1,customInspect:n=!0,showProxy:i=!1,maxArrayLength:o=1/0,breakLength:a=1/0,seen:l=[],truncate:p=1/0,stylize:u=String}={},d){let h={showHidden:!!t,depth:Number(e),colors:!!r,customInspect:!!n,showProxy:!!i,maxArrayLength:Number(o),breakLength:Number(a),truncate:Number(p),seen:l,inspect:d,stylize:u};return h.colors&&(h.stylize=kF),h}F(PF,"normaliseOptions");function Li(t,e,r=fc){t=String(t);let n=r.length,i=t.length;return n>e&&i>n?r:i>e&&i>n?`${t.slice(0,e-n)}${r}`:t}F(Li,"truncate");function yn(t,e,r,n=", "){r=r||e.inspect;let i=t.length;if(i===0)return"";let o=e.truncate,a="",l="",p="";for(let u=0;u<i;u+=1){let d=u+1===t.length,h=u+2===t.length;p=`${fc}(${t.length-u})`;let g=t[u];e.truncate=o-a.length-(d?0:n.length);let x=l||r(g,e)+(d?"":n),_=a.length+x.length,w=_+p.length;if(d&&_>o&&a.length+p.length<=o||!d&&!h&&w>o||(l=d?"":r(t[u+1],e)+(h?"":n),!d&&h&&w>o&&_+l.length>o))break;if(a+=x,!d&&!h&&_+l.length>=o){p=`${fc}(${t.length-u-1})`;break}p=""}return`${a}${p}`}F(yn,"inspectList");function MF(t){return t.match(/^[a-zA-Z_][a-zA-Z_0-9]*$/)?t:JSON.stringify(t).replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'")}F(MF,"quoteComplexKey");function dc([t,e],r){return r.truncate-=2,typeof t=="string"?t=MF(t):typeof t!="number"&&(t=`[${r.inspect(t,r)}]`),r.truncate-=t.length,e=r.inspect(e,r),`${t}: ${e}`}F(dc,"inspectProperty");function AF(t,e){let r=Object.keys(t).slice(t.length);if(!t.length&&!r.length)return"[]";e.truncate-=4;let n=yn(t,e);e.truncate-=n.length;let i="";return r.length&&(i=yn(r.map(o=>[o,t[o]]),e,dc)),`[ ${n}${i?`, ${i}`:""} ]`}F(AF,"inspectArray");var PY=F(t=>typeof Buffer=="function"&&t instanceof Buffer?"Buffer":t[Symbol.toStringTag]?t[Symbol.toStringTag]:t.constructor.name,"getArrayName");function oi(t,e){let r=PY(t);e.truncate-=r.length+4;let n=Object.keys(t).slice(t.length);if(!t.length&&!n.length)return`${r}[]`;let i="";for(let a=0;a<t.length;a++){let l=`${e.stylize(Li(t[a],e.truncate),"number")}${a===t.length-1?"":", "}`;if(e.truncate-=l.length,t[a]!==t.length&&e.truncate<=3){i+=`${fc}(${t.length-t[a]+1})`;break}i+=l}let o="";return n.length&&(o=yn(n.map(a=>[a,t[a]]),e,dc)),`${r}[ ${i}${o?`, ${o}`:""} ]`}F(oi,"inspectTypedArray");function DF(t,e){let r=t.toJSON();if(r===null)return"Invalid Date";let n=r.split("T"),i=n[0];return e.stylize(`${i}T${Li(n[1],e.truncate-i.length-1)}`,"date")}F(DF,"inspectDate");function lb(t,e){let r=t[Symbol.toStringTag]||"Function",n=t.name;return n?e.stylize(`[${r} ${Li(n,e.truncate-11)}]`,"special"):e.stylize(`[${r}]`,"special")}F(lb,"inspectFunction");function IF([t,e],r){return r.truncate-=4,t=r.inspect(t,r),r.truncate-=t.length,e=r.inspect(e,r),`${t} => ${e}`}F(IF,"inspectMapEntry");function FF(t){let e=[];return t.forEach((r,n)=>{e.push([n,r])}),e}F(FF,"mapToEntries");function CF(t,e){return t.size-1<=0?"Map{}":(e.truncate-=7,`Map{ ${yn(FF(t),e,IF)} }`)}F(CF,"inspectMap");var MY=Number.isNaN||(t=>t!==t);function pb(t,e){return MY(t)?e.stylize("NaN","number"):t===1/0?e.stylize("Infinity","number"):t===-1/0?e.stylize("-Infinity","number"):t===0?e.stylize(1/t===1/0?"+0":"-0","number"):e.stylize(Li(String(t),e.truncate),"number")}F(pb,"inspectNumber");function ub(t,e){let r=Li(t.toString(),e.truncate-1);return r!==fc&&(r+="n"),e.stylize(r,"bigint")}F(ub,"inspectBigInt");function OF(t,e){let r=t.toString().split("/")[2],n=e.truncate-(2+r.length),i=t.source;return e.stylize(`/${Li(i,n)}/${r}`,"regexp")}F(OF,"inspectRegExp");function NF(t){let e=[];return t.forEach(r=>{e.push(r)}),e}F(NF,"arrayFromSet");function LF(t,e){return t.size===0?"Set{}":(e.truncate-=7,`Set{ ${yn(NF(t),e)} }`)}F(LF,"inspectSet");var pF=new RegExp("['\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]","g"),AY={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"},DY=16,IY=4;function UF(t){return AY[t]||`\\u${`0000${t.charCodeAt(0).toString(DY)}`.slice(-IY)}`}F(UF,"escape");function fb(t,e){return pF.test(t)&&(t=t.replace(pF,UF)),e.stylize(`'${Li(t,e.truncate-2)}'`,"string")}F(fb,"inspectString");function db(t){return"description"in Symbol.prototype?t.description?`Symbol(${t.description})`:"Symbol()":t.toString()}F(db,"inspectSymbol");var VF=F(()=>"Promise{\u2026}","getPromiseValue");try{let{getPromiseDetails:t,kPending:e,kRejected:r}=process.binding("util");Array.isArray(t(Promise.resolve()))&&(VF=F((n,i)=>{let[o,a]=t(n);return o===e?"Promise{<pending>}":`Promise${o===r?"!":""}{${i.inspect(a,i)}}`},"getPromiseValue"))}catch{}var FY=VF;function Ap(t,e){let r=Object.getOwnPropertyNames(t),n=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[];if(r.length===0&&n.length===0)return"{}";if(e.truncate-=4,e.seen=e.seen||[],e.seen.indexOf(t)>=0)return"[Circular]";e.seen.push(t);let i=yn(r.map(l=>[l,t[l]]),e,dc),o=yn(n.map(l=>[l,t[l]]),e,dc);e.seen.pop();let a="";return i&&o&&(a=", "),`{ ${i}${a}${o} }`}F(Ap,"inspectObject");var ab=typeof Symbol<"u"&&Symbol.toStringTag?Symbol.toStringTag:!1;function BF(t,e){let r="";return ab&&ab in t&&(r=t[ab]),r=r||t.constructor.name,(!r||r==="_class")&&(r="<Anonymous Class>"),e.truncate-=r.length,`${r}${Ap(t,e)}`}F(BF,"inspectClass");function HF(t,e){return t.length===0?"Arguments[]":(e.truncate-=13,`Arguments[ ${yn(t,e)} ]`)}F(HF,"inspectArguments");var CY=["stack","line","column","name","message","fileName","lineNumber","columnNumber","number","description"];function WF(t,e){let r=Object.getOwnPropertyNames(t).filter(a=>CY.indexOf(a)===-1),n=t.name;e.truncate-=n.length;let i="";typeof t.message=="string"?i=Li(t.message,e.truncate):r.unshift("message"),i=i?`: ${i}`:"",e.truncate-=i.length+5;let o=yn(r.map(a=>[a,t[a]]),e,dc);return`${n}${i}${o?` { ${o} }`:""}`}F(WF,"inspectObject");function $F([t,e],r){return r.truncate-=3,e?`${r.stylize(String(t),"yellow")}=${r.stylize(`"${e}"`,"string")}`:`${r.stylize(String(t),"yellow")}`}F($F,"inspectAttribute");function ly(t,e){return yn(t,e,Eb,`
`)}F(ly,"inspectHTMLCollection");function Eb(t,e){let r=t.getAttributeNames(),n=t.tagName.toLowerCase(),i=e.stylize(`<${n}`,"special"),o=e.stylize(">","special"),a=e.stylize(`</${n}>`,"special");e.truncate-=n.length*2+5;let l="";r.length>0&&(l+=" ",l+=yn(r.map(d=>[d,t.getAttribute(d)]),e,$F," ")),e.truncate-=l.length;let p=e.truncate,u=ly(t.children,e);return u&&u.length>p&&(u=`${fc}(${t.children.length})`),`${i}${l}${o}${u}${a}`}F(Eb,"inspectHTML");var OY=typeof Symbol=="function"&&typeof Symbol.for=="function",cb=OY?Symbol.for("chai/inspect"):"@@chai/inspect",uc=!1;try{let t=EY();uc=t.inspect?t.inspect.custom:!1}catch{uc=!1}var uF=new WeakMap,fF={},dF={undefined:(t,e)=>e.stylize("undefined","undefined"),null:(t,e)=>e.stylize("null","null"),boolean:(t,e)=>e.stylize(String(t),"boolean"),Boolean:(t,e)=>e.stylize(String(t),"boolean"),number:pb,Number:pb,bigint:ub,BigInt:ub,string:fb,String:fb,function:lb,Function:lb,symbol:db,Symbol:db,Array:AF,Date:DF,Map:CF,Set:LF,RegExp:OF,Promise:FY,WeakSet:(t,e)=>e.stylize("WeakSet{\u2026}","special"),WeakMap:(t,e)=>e.stylize("WeakMap{\u2026}","special"),Arguments:HF,Int8Array:oi,Uint8Array:oi,Uint8ClampedArray:oi,Int16Array:oi,Uint16Array:oi,Int32Array:oi,Uint32Array:oi,Float32Array:oi,Float64Array:oi,Generator:()=>"",DataView:()=>"",ArrayBuffer:()=>"",Error:WF,HTMLCollection:ly,NodeList:ly},NY=F((t,e,r)=>cb in t&&typeof t[cb]=="function"?t[cb](e):uc&&uc in t&&typeof t[uc]=="function"?t[uc](e.depth,e):"inspect"in t&&typeof t.inspect=="function"?t.inspect(e.depth,e):"constructor"in t&&uF.has(t.constructor)?uF.get(t.constructor)(t,e):fF[r]?fF[r](t,e):"","inspectCustom"),LY=Object.prototype.toString;function py(t,e={}){let r=PF(e,py),{customInspect:n}=r,i=t===null?"null":typeof t;if(i==="object"&&(i=LY.call(t).slice(8,-1)),i in dF)return dF[i](t,r);if(n&&t){let a=NY(t,r,i);if(a)return typeof a=="string"?a:py(a,r)}let o=t?Object.getPrototypeOf(t):!1;return o===Object.prototype||o===null?Ap(t,r):t&&typeof HTMLElement=="function"&&t instanceof HTMLElement?Eb(t,r):"constructor"in t?t.constructor!==Object?BF(t,r):Ap(t,r):t===Object(t)?Ap(t,r):r.stylize(String(t),i)}F(py,"inspect");var Rr={includeStack:!1,showDiff:!0,truncateThreshold:40,useProxy:!0,proxyExcludedKeys:["then","catch","inspect","toJSON"],deepEqual:null};function Le(t,e,r,n){var i={colors:n,depth:typeof r>"u"?2:r,showHidden:e,truncate:Rr.truncateThreshold?Rr.truncateThreshold:1/0};return py(t,i)}F(Le,"inspect");function vs(t){var e=Le(t),r=Object.prototype.toString.call(t);if(Rr.truncateThreshold&&e.length>=Rr.truncateThreshold){if(r==="[object Function]")return!t.name||t.name===""?"[Function]":"[Function: "+t.name+"]";if(r==="[object Array]")return"[ Array("+t.length+") ]";if(r==="[object Object]"){var n=Object.keys(t),i=n.length>2?n.splice(0,2).join(", ")+", ...":n.join(", ");return"{ Object ("+i+") }"}else return e}else return e}F(vs,"objDisplay");function Rb(t,e){var r=_e(t,"negate"),n=_e(t,"object"),i=e[3],o=yy(t,e),a=r?e[2]:e[1],l=_e(t,"message");return typeof a=="function"&&(a=a()),a=a||"",a=a.replace(/#\{this\}/g,function(){return vs(n)}).replace(/#\{act\}/g,function(){return vs(o)}).replace(/#\{exp\}/g,function(){return vs(i)}),l?l+": "+a:a}F(Rb,"getMessage");function Un(t,e,r){var n=t.__flags||(t.__flags=Object.create(null));e.__flags||(e.__flags=Object.create(null)),r=arguments.length===3?r:!0;for(var i in n)(r||i!=="object"&&i!=="ssfi"&&i!=="lockSsfi"&&i!="message")&&(e.__flags[i]=n[i])}F(Un,"transferFlags");function mb(t){if(typeof t>"u")return"undefined";if(t===null)return"null";let e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}F(mb,"type");function kb(){this._key="chai/deep-eql__"+Math.random()+Date.now()}F(kb,"FakeMap");kb.prototype={get:F(function(e){return e[this._key]},"get"),set:F(function(e,r){Object.isExtensible(e)&&Object.defineProperty(e,this._key,{value:r,configurable:!0})},"set")};var jF=typeof WeakMap=="function"?WeakMap:kb;function hb(t,e,r){if(!r||bs(t)||bs(e))return null;var n=r.get(t);if(n){var i=n.get(e);if(typeof i=="boolean")return i}return null}F(hb,"memoizeCompare");function Mp(t,e,r,n){if(!(!r||bs(t)||bs(e))){var i=r.get(t);i?i.set(e,n):(i=new jF,i.set(e,n),r.set(t,i))}}F(Mp,"memoizeSet");var qF=Dp;function Dp(t,e,r){if(r&&r.comparator)return gb(t,e,r);var n=Pb(t,e);return n!==null?n:gb(t,e,r)}F(Dp,"deepEqual");function Pb(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e?!0:bs(t)||bs(e)?!1:null}F(Pb,"simpleEqual");function gb(t,e,r){r=r||{},r.memoize=r.memoize===!1?!1:r.memoize||new jF;var n=r&&r.comparator,i=hb(t,e,r.memoize);if(i!==null)return i;var o=hb(e,t,r.memoize);if(o!==null)return o;if(n){var a=n(t,e);if(a===!1||a===!0)return Mp(t,e,r.memoize,a),a;var l=Pb(t,e);if(l!==null)return l}var p=mb(t);if(p!==mb(e))return Mp(t,e,r.memoize,!1),!1;Mp(t,e,r.memoize,!0);var u=zF(t,e,p,r);return Mp(t,e,r.memoize,u),u}F(gb,"extensiveDeepEqual");function zF(t,e,r,n){switch(r){case"String":case"Number":case"Boolean":case"Date":return Dp(t.valueOf(),e.valueOf());case"Promise":case"Symbol":case"function":case"WeakMap":case"WeakSet":return t===e;case"Error":return Mb(t,e,["name","message","code"],n);case"Arguments":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"Array":return ko(t,e,n);case"RegExp":return GF(t,e);case"Generator":return KF(t,e,n);case"DataView":return ko(new Uint8Array(t.buffer),new Uint8Array(e.buffer),n);case"ArrayBuffer":return ko(new Uint8Array(t),new Uint8Array(e),n);case"Set":return yb(t,e,n);case"Map":return yb(t,e,n);case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.Instant":case"Temporal.ZonedDateTime":case"Temporal.PlainYearMonth":case"Temporal.PlainMonthDay":return t.equals(e);case"Temporal.Duration":return t.total("nanoseconds")===e.total("nanoseconds");case"Temporal.TimeZone":case"Temporal.Calendar":return t.toString()===e.toString();default:return ZF(t,e,n)}}F(zF,"extensiveDeepEqualByType");function GF(t,e){return t.toString()===e.toString()}F(GF,"regexpEqual");function yb(t,e,r){if(t.size!==e.size)return!1;if(t.size===0)return!0;var n=[],i=[];return t.forEach(F(function(a,l){n.push([a,l])},"gatherEntries")),e.forEach(F(function(a,l){i.push([a,l])},"gatherEntries")),ko(n.sort(),i.sort(),r)}F(yb,"entriesEqual");function ko(t,e,r){var n=t.length;if(n!==e.length)return!1;if(n===0)return!0;for(var i=-1;++i<n;)if(Dp(t[i],e[i],r)===!1)return!1;return!0}F(ko,"iterableEqual");function KF(t,e,r){return ko(uy(t),uy(e),r)}F(KF,"generatorEqual");function QF(t){return typeof Symbol<"u"&&typeof t=="object"&&typeof Symbol.iterator<"u"&&typeof t[Symbol.iterator]=="function"}F(QF,"hasIteratorFunction");function xb(t){if(QF(t))try{return uy(t[Symbol.iterator]())}catch{return[]}return[]}F(xb,"getIteratorEntries");function uy(t){for(var e=t.next(),r=[e.value];e.done===!1;)e=t.next(),r.push(e.value);return r}F(uy,"getGeneratorEntries");function Tb(t){var e=[];for(var r in t)e.push(r);return e}F(Tb,"getEnumerableKeys");function Sb(t){for(var e=[],r=Object.getOwnPropertySymbols(t),n=0;n<r.length;n+=1){var i=r[n];Object.getOwnPropertyDescriptor(t,i).enumerable&&e.push(i)}return e}F(Sb,"getEnumerableSymbols");function Mb(t,e,r,n){var i=r.length;if(i===0)return!0;for(var o=0;o<i;o+=1)if(Dp(t[r[o]],e[r[o]],n)===!1)return!1;return!0}F(Mb,"keysEqual");function ZF(t,e,r){var n=Tb(t),i=Tb(e),o=Sb(t),a=Sb(e);if(n=n.concat(o),i=i.concat(a),n.length&&n.length===i.length)return ko(vb(n).sort(),vb(i).sort())===!1?!1:Mb(t,e,n,r);var l=xb(t),p=xb(e);return l.length&&l.length===p.length?(l.sort(),p.sort(),ko(l,p,r)):n.length===0&&l.length===0&&i.length===0&&p.length===0}F(ZF,"objectEqual");function bs(t){return t===null||typeof t!="object"}F(bs,"isPrimitive");function vb(t){return t.map(F(function(r){return typeof r=="symbol"?r.toString():r},"mapSymbol"))}F(vb,"mapSymbols");function xy(t,e){return typeof t>"u"||t===null?!1:e in Object(t)}F(xy,"hasProperty");function YF(t){return t.replace(/([^\\])\[/g,"$1.[").match(/(\\\.|[^.]+?)+/g).map(n=>{if(n==="constructor"||n==="__proto__"||n==="prototype")return{};let o=/^\[(\d+)\]$/.exec(n),a=null;return o?a={i:parseFloat(o[1])}:a={p:n.replace(/\\([.[\]])/g,"$1")},a})}F(YF,"parsePath");function bb(t,e,r){let n=t,i=null;r=typeof r>"u"?e.length:r;for(let o=0;o<r;o++){let a=e[o];n&&(typeof a.p>"u"?n=n[a.i]:n=n[a.p],o===r-1&&(i=n))}return i}F(bb,"internalGetPathValue");function Ab(t,e){let r=YF(e),n=r[r.length-1],i={parent:r.length>1?bb(t,r,r.length-1):t,name:n.p||n.i,value:bb(t,r)};return i.exists=xy(i.parent,i.name),i}F(Ab,"getPathInfo");function b(t,e,r,n){return _e(this,"ssfi",r||b),_e(this,"lockSsfi",n),_e(this,"object",t),_e(this,"message",e),_e(this,"eql",Rr.deepEqual||qF),mc(this)}F(b,"Assertion");Object.defineProperty(b,"includeStack",{get:function(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),Rr.includeStack},set:function(t){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),Rr.includeStack=t}});Object.defineProperty(b,"showDiff",{get:function(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),Rr.showDiff},set:function(t){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),Rr.showDiff=t}});b.addProperty=function(t,e){Db(this.prototype,t,e)};b.addMethod=function(t,e){Ib(this.prototype,t,e)};b.addChainableMethod=function(t,e,r){Ob(this.prototype,t,e,r)};b.overwriteProperty=function(t,e){Fb(this.prototype,t,e)};b.overwriteMethod=function(t,e){Cb(this.prototype,t,e)};b.overwriteChainableMethod=function(t,e,r){Nb(this.prototype,t,e,r)};b.prototype.assert=function(t,e,r,n,i,o){var a=_b(this,arguments);if(o!==!1&&(o=!0),n===void 0&&i===void 0&&(o=!1),Rr.showDiff!==!0&&(o=!1),!a){e=Rb(this,arguments);var l=yy(this,arguments),p={actual:l,expected:n,showDiff:o},u=Vb(this,arguments);throw u&&(p.operator=u),new qe(e,p,Rr.includeStack?this.assert:_e(this,"ssfi"))}};Object.defineProperty(b.prototype,"_obj",{get:function(){return _e(this,"object")},set:function(t){_e(this,"object",t)}});function Ip(){return Rr.useProxy&&typeof Proxy<"u"&&typeof Reflect<"u"}F(Ip,"isProxyEnabled");function Db(t,e,r){r=r===void 0?function(){}:r,Object.defineProperty(t,e,{get:F(function n(){!Ip()&&!_e(this,"lockSsfi")&&_e(this,"ssfi",n);var i=r.call(this);if(i!==void 0)return i;var o=new b;return Un(this,o),o},"propertyGetter"),configurable:!0})}F(Db,"addProperty");var UY=Object.getOwnPropertyDescriptor(function(){},"length");function Fp(t,e,r){return UY.configurable&&Object.defineProperty(t,"length",{get:function(){throw Error(r?"Invalid Chai property: "+e+'.length. Due to a compatibility issue, "length" cannot directly follow "'+e+'". Use "'+e+'.lengthOf" instead.':"Invalid Chai property: "+e+'.length. See docs for proper usage of "'+e+'".')}}),t}F(Fp,"addLengthGuard");function XF(t){var e=Object.getOwnPropertyNames(t);function r(i){e.indexOf(i)===-1&&e.push(i)}F(r,"addProperty");for(var n=Object.getPrototypeOf(t);n!==null;)Object.getOwnPropertyNames(n).forEach(r),n=Object.getPrototypeOf(n);return e}F(XF,"getProperties");var mF=["__flags","__methods","_obj","assert"];function mc(t,e){return Ip()?new Proxy(t,{get:F(function r(n,i){if(typeof i=="string"&&Rr.proxyExcludedKeys.indexOf(i)===-1&&!Reflect.has(n,i)){if(e)throw Error("Invalid Chai property: "+e+"."+i+'. See docs for proper usage of "'+e+'".');var o=null,a=4;throw XF(n).forEach(function(l){if(!Object.prototype.hasOwnProperty(l)&&mF.indexOf(l)===-1){var p=JF(i,l,a);p<a&&(o=l,a=p)}}),Error(o!==null?"Invalid Chai property: "+i+'. Did you mean "'+o+'"?':"Invalid Chai property: "+i)}return mF.indexOf(i)===-1&&!_e(n,"lockSsfi")&&_e(n,"ssfi",r),Reflect.get(n,i)},"proxyGetter")}):t}F(mc,"proxify");function JF(t,e,r){if(Math.abs(t.length-e.length)>=r)return r;for(var n=[],i=0;i<=t.length;i++)n[i]=Array(e.length+1).fill(0),n[i][0]=i;for(var o=0;o<e.length;o++)n[0][o]=o;for(var i=1;i<=t.length;i++)for(var a=t.charCodeAt(i-1),o=1;o<=e.length;o++){if(Math.abs(i-o)>=r){n[i][o]=r;continue}n[i][o]=Math.min(n[i-1][o]+1,n[i][o-1]+1,n[i-1][o-1]+(a===e.charCodeAt(o-1)?0:1))}return n[t.length][e.length]}F(JF,"stringDistanceCapped");function Ib(t,e,r){var n=F(function(){_e(this,"lockSsfi")||_e(this,"ssfi",n);var i=r.apply(this,arguments);if(i!==void 0)return i;var o=new b;return Un(this,o),o},"methodWrapper");Fp(n,e,!1),t[e]=mc(n,e)}F(Ib,"addMethod");function Fb(t,e,r){var n=Object.getOwnPropertyDescriptor(t,e),i=F(function(){},"_super");n&&typeof n.get=="function"&&(i=n.get),Object.defineProperty(t,e,{get:F(function o(){!Ip()&&!_e(this,"lockSsfi")&&_e(this,"ssfi",o);var a=_e(this,"lockSsfi");_e(this,"lockSsfi",!0);var l=r(i).call(this);if(_e(this,"lockSsfi",a),l!==void 0)return l;var p=new b;return Un(this,p),p},"overwritingPropertyGetter"),configurable:!0})}F(Fb,"overwriteProperty");function Cb(t,e,r){var n=t[e],i=F(function(){throw new Error(e+" is not a function")},"_super");n&&typeof n=="function"&&(i=n);var o=F(function(){_e(this,"lockSsfi")||_e(this,"ssfi",o);var a=_e(this,"lockSsfi");_e(this,"lockSsfi",!0);var l=r(i).apply(this,arguments);if(_e(this,"lockSsfi",a),l!==void 0)return l;var p=new b;return Un(this,p),p},"overwritingMethodWrapper");Fp(o,e,!1),t[e]=mc(o,e)}F(Cb,"overwriteMethod");var VY=typeof Object.setPrototypeOf=="function",hF=F(function(){},"testFn"),BY=Object.getOwnPropertyNames(hF).filter(function(t){var e=Object.getOwnPropertyDescriptor(hF,t);return typeof e!="object"?!0:!e.configurable}),HY=Function.prototype.call,WY=Function.prototype.apply;function Ob(t,e,r,n){typeof n!="function"&&(n=F(function(){},"chainingBehavior"));var i={method:r,chainingBehavior:n};t.__methods||(t.__methods={}),t.__methods[e]=i,Object.defineProperty(t,e,{get:F(function(){i.chainingBehavior.call(this);var a=F(function(){_e(this,"lockSsfi")||_e(this,"ssfi",a);var u=i.method.apply(this,arguments);if(u!==void 0)return u;var d=new b;return Un(this,d),d},"chainableMethodWrapper");if(Fp(a,e,!0),VY){var l=Object.create(this);l.call=HY,l.apply=WY,Object.setPrototypeOf(a,l)}else{var p=Object.getOwnPropertyNames(t);p.forEach(function(u){if(BY.indexOf(u)===-1){var d=Object.getOwnPropertyDescriptor(t,u);Object.defineProperty(a,u,d)}})}return Un(this,a),mc(a)},"chainableMethodGetter"),configurable:!0})}F(Ob,"addChainableMethod");function Nb(t,e,r,n){var i=t.__methods[e],o=i.chainingBehavior;i.chainingBehavior=F(function(){var p=n(o).call(this);if(p!==void 0)return p;var u=new b;return Un(this,u),u},"overwritingChainableMethodGetter");var a=i.method;i.method=F(function(){var p=r(a).apply(this,arguments);if(p!==void 0)return p;var u=new b;return Un(this,u),u},"overwritingChainableMethodWrapper")}F(Nb,"overwriteChainableMethod");function fy(t,e){return Le(t)<Le(e)?-1:1}F(fy,"compareByInspect");function Lb(t){return typeof Object.getOwnPropertySymbols!="function"?[]:Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})}F(Lb,"getOwnEnumerablePropertySymbols");function Ub(t){return Object.keys(t).concat(Lb(t))}F(Ub,"getOwnEnumerableProperties");function eC(t){return t!==t}F(eC,"_isNaN");var dy=Number.isNaN||eC;function tC(t){var e=Ze(t),r=["Array","Object","Function"];return r.indexOf(e)!==-1}F(tC,"isObjectType");function Vb(t,e){var r=_e(t,"operator"),n=_e(t,"negate"),i=e[3],o=n?e[2]:e[1];if(r)return r;if(typeof o=="function"&&(o=o()),o=o||"",!!o&&!/\shave\s/.test(o)){var a=tC(i);return/\snot\s/.test(o)?a?"notDeepStrictEqual":"notStrictEqual":a?"deepStrictEqual":"strictEqual"}}F(Vb,"getOperator");function Ty(t){return t.name}F(Ty,"getName");function my(t){return Object.prototype.toString.call(t)==="[object RegExp]"}F(my,"isRegExp");var{flag:P}=cy;["to","be","been","is","and","has","have","with","that","which","at","of","same","but","does","still","also"].forEach(function(t){b.addProperty(t)});b.addProperty("not",function(){P(this,"negate",!0)});b.addProperty("deep",function(){P(this,"deep",!0)});b.addProperty("nested",function(){P(this,"nested",!0)});b.addProperty("own",function(){P(this,"own",!0)});b.addProperty("ordered",function(){P(this,"ordered",!0)});b.addProperty("any",function(){P(this,"any",!0),P(this,"all",!1)});b.addProperty("all",function(){P(this,"all",!0),P(this,"any",!1)});var gF={function:["function","asyncfunction","generatorfunction","asyncgeneratorfunction"],asyncfunction:["asyncfunction","asyncgeneratorfunction"],generatorfunction:["generatorfunction","asyncgeneratorfunction"],asyncgeneratorfunction:["asyncgeneratorfunction"]};function Bb(t,e){e&&P(this,"message",e),t=t.toLowerCase();var r=P(this,"object"),n=~["a","e","i","o","u"].indexOf(t.charAt(0))?"an ":"a ";let i=Ze(r).toLowerCase();gF.function.includes(t)?this.assert(gF[t].includes(i),"expected #{this} to be "+n+t,"expected #{this} not to be "+n+t):this.assert(t===i,"expected #{this} to be "+n+t,"expected #{this} not to be "+n+t)}F(Bb,"an");b.addChainableMethod("an",Bb);b.addChainableMethod("a",Bb);function rC(t,e){return dy(t)&&dy(e)||t===e}F(rC,"SameValueZero");function Cp(){P(this,"contains",!0)}F(Cp,"includeChainingBehavior");function Op(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=Ze(r).toLowerCase(),i=P(this,"message"),o=P(this,"negate"),a=P(this,"ssfi"),l=P(this,"deep"),p=l?"deep ":"",u=l?P(this,"eql"):rC;i=i?i+": ":"";var d=!1;switch(n){case"string":d=r.indexOf(t)!==-1;break;case"weakset":if(l)throw new qe(i+"unable to use .deep.include with WeakSet",void 0,a);d=r.has(t);break;case"map":r.forEach(function(_){d=d||u(_,t)});break;case"set":l?r.forEach(function(_){d=d||u(_,t)}):d=r.has(t);break;case"array":l?d=r.some(function(_){return u(_,t)}):d=r.indexOf(t)!==-1;break;default:if(t!==Object(t))throw new qe(i+"the given combination of arguments ("+n+" and "+Ze(t).toLowerCase()+") is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a "+Ze(t).toLowerCase(),void 0,a);var h=Object.keys(t),g=null,x=0;if(h.forEach(function(_){var w=new b(r);if(Un(this,w,!0),P(w,"lockSsfi",!0),!o||h.length===1){w.property(_,t[_]);return}try{w.property(_,t[_])}catch(C){if(!zr.compatibleConstructor(C,qe))throw C;g===null&&(g=C),x++}},this),o&&h.length>1&&x===h.length)throw g;return}this.assert(d,"expected #{this} to "+p+"include "+Le(t),"expected #{this} to not "+p+"include "+Le(t))}F(Op,"include");b.addChainableMethod("include",Op,Cp);b.addChainableMethod("contain",Op,Cp);b.addChainableMethod("contains",Op,Cp);b.addChainableMethod("includes",Op,Cp);b.addProperty("ok",function(){this.assert(P(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")});b.addProperty("true",function(){this.assert(P(this,"object")===!0,"expected #{this} to be true","expected #{this} to be false",!P(this,"negate"))});b.addProperty("callable",function(){let t=P(this,"object"),e=P(this,"ssfi"),r=P(this,"message"),n=r?`${r}: `:"",i=P(this,"negate"),o=i?`${n}expected ${Le(t)} not to be a callable function`:`${n}expected ${Le(t)} to be a callable function`,a=["Function","AsyncFunction","GeneratorFunction","AsyncGeneratorFunction"].includes(Ze(t));if(a&&i||!a&&!i)throw new qe(o,void 0,e)});b.addProperty("false",function(){this.assert(P(this,"object")===!1,"expected #{this} to be false","expected #{this} to be true",!!P(this,"negate"))});b.addProperty("null",function(){this.assert(P(this,"object")===null,"expected #{this} to be null","expected #{this} not to be null")});b.addProperty("undefined",function(){this.assert(P(this,"object")===void 0,"expected #{this} to be undefined","expected #{this} not to be undefined")});b.addProperty("NaN",function(){this.assert(dy(P(this,"object")),"expected #{this} to be NaN","expected #{this} not to be NaN")});function Hb(){var t=P(this,"object");this.assert(t!=null,"expected #{this} to exist","expected #{this} to not exist")}F(Hb,"assertExist");b.addProperty("exist",Hb);b.addProperty("exists",Hb);b.addProperty("empty",function(){var t=P(this,"object"),e=P(this,"ssfi"),r=P(this,"message"),n;switch(r=r?r+": ":"",Ze(t).toLowerCase()){case"array":case"string":n=t.length;break;case"map":case"set":n=t.size;break;case"weakmap":case"weakset":throw new qe(r+".empty was passed a weak collection",void 0,e);case"function":var i=r+".empty was passed a function "+Ty(t);throw new qe(i.trim(),void 0,e);default:if(t!==Object(t))throw new qe(r+".empty was passed non-string primitive "+Le(t),void 0,e);n=Object.keys(t).length}this.assert(n===0,"expected #{this} to be empty","expected #{this} not to be empty")});function Wb(){var t=P(this,"object"),e=Ze(t);this.assert(e==="Arguments","expected #{this} to be arguments but got "+e,"expected #{this} to not be arguments")}F(Wb,"checkArguments");b.addProperty("arguments",Wb);b.addProperty("Arguments",Wb);function Sy(t,e){e&&P(this,"message",e);var r=P(this,"object");if(P(this,"deep")){var n=P(this,"lockSsfi");P(this,"lockSsfi",!0),this.eql(t),P(this,"lockSsfi",n)}else this.assert(t===r,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",t,this._obj,!0)}F(Sy,"assertEqual");b.addMethod("equal",Sy);b.addMethod("equals",Sy);b.addMethod("eq",Sy);function $b(t,e){e&&P(this,"message",e);var r=P(this,"eql");this.assert(r(t,P(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",t,this._obj,!0)}F($b,"assertEql");b.addMethod("eql",$b);b.addMethod("eqls",$b);function vy(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"doLength"),i=P(this,"message"),o=i?i+": ":"",a=P(this,"ssfi"),l=Ze(r).toLowerCase(),p=Ze(t).toLowerCase(),u,d=!0;if(n&&l!=="map"&&l!=="set"&&new b(r,i,a,!0).to.have.property("length"),!n&&l==="date"&&p!=="date")u=o+"the argument to above must be a date";else if(p!=="number"&&(n||l==="number"))u=o+"the argument to above must be a number";else if(!n&&l!=="date"&&l!=="number"){var h=l==="string"?"'"+r+"'":r;u=o+"expected "+h+" to be a number or a date"}else d=!1;if(d)throw new qe(u,void 0,a);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x>t,"expected #{this} to have a "+g+" above #{exp} but got #{act}","expected #{this} to not have a "+g+" above #{exp}",t,x)}else this.assert(r>t,"expected #{this} to be above #{exp}","expected #{this} to be at most #{exp}",t)}F(vy,"assertAbove");b.addMethod("above",vy);b.addMethod("gt",vy);b.addMethod("greaterThan",vy);function by(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"doLength"),i=P(this,"message"),o=i?i+": ":"",a=P(this,"ssfi"),l=Ze(r).toLowerCase(),p=Ze(t).toLowerCase(),u,d=!0;if(n&&l!=="map"&&l!=="set"&&new b(r,i,a,!0).to.have.property("length"),!n&&l==="date"&&p!=="date")u=o+"the argument to least must be a date";else if(p!=="number"&&(n||l==="number"))u=o+"the argument to least must be a number";else if(!n&&l!=="date"&&l!=="number"){var h=l==="string"?"'"+r+"'":r;u=o+"expected "+h+" to be a number or a date"}else d=!1;if(d)throw new qe(u,void 0,a);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x>=t,"expected #{this} to have a "+g+" at least #{exp} but got #{act}","expected #{this} to have a "+g+" below #{exp}",t,x)}else this.assert(r>=t,"expected #{this} to be at least #{exp}","expected #{this} to be below #{exp}",t)}F(by,"assertLeast");b.addMethod("least",by);b.addMethod("gte",by);b.addMethod("greaterThanOrEqual",by);function wy(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"doLength"),i=P(this,"message"),o=i?i+": ":"",a=P(this,"ssfi"),l=Ze(r).toLowerCase(),p=Ze(t).toLowerCase(),u,d=!0;if(n&&l!=="map"&&l!=="set"&&new b(r,i,a,!0).to.have.property("length"),!n&&l==="date"&&p!=="date")u=o+"the argument to below must be a date";else if(p!=="number"&&(n||l==="number"))u=o+"the argument to below must be a number";else if(!n&&l!=="date"&&l!=="number"){var h=l==="string"?"'"+r+"'":r;u=o+"expected "+h+" to be a number or a date"}else d=!1;if(d)throw new qe(u,void 0,a);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x<t,"expected #{this} to have a "+g+" below #{exp} but got #{act}","expected #{this} to not have a "+g+" below #{exp}",t,x)}else this.assert(r<t,"expected #{this} to be below #{exp}","expected #{this} to be at least #{exp}",t)}F(wy,"assertBelow");b.addMethod("below",wy);b.addMethod("lt",wy);b.addMethod("lessThan",wy);function _y(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"doLength"),i=P(this,"message"),o=i?i+": ":"",a=P(this,"ssfi"),l=Ze(r).toLowerCase(),p=Ze(t).toLowerCase(),u,d=!0;if(n&&l!=="map"&&l!=="set"&&new b(r,i,a,!0).to.have.property("length"),!n&&l==="date"&&p!=="date")u=o+"the argument to most must be a date";else if(p!=="number"&&(n||l==="number"))u=o+"the argument to most must be a number";else if(!n&&l!=="date"&&l!=="number"){var h=l==="string"?"'"+r+"'":r;u=o+"expected "+h+" to be a number or a date"}else d=!1;if(d)throw new qe(u,void 0,a);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x<=t,"expected #{this} to have a "+g+" at most #{exp} but got #{act}","expected #{this} to have a "+g+" above #{exp}",t,x)}else this.assert(r<=t,"expected #{this} to be at most #{exp}","expected #{this} to be above #{exp}",t)}F(_y,"assertMost");b.addMethod("most",_y);b.addMethod("lte",_y);b.addMethod("lessThanOrEqual",_y);b.addMethod("within",function(t,e,r){r&&P(this,"message",r);var n=P(this,"object"),i=P(this,"doLength"),o=P(this,"message"),a=o?o+": ":"",l=P(this,"ssfi"),p=Ze(n).toLowerCase(),u=Ze(t).toLowerCase(),d=Ze(e).toLowerCase(),h,g=!0,x=u==="date"&&d==="date"?t.toISOString()+".."+e.toISOString():t+".."+e;if(i&&p!=="map"&&p!=="set"&&new b(n,o,l,!0).to.have.property("length"),!i&&p==="date"&&(u!=="date"||d!=="date"))h=a+"the arguments to within must be dates";else if((u!=="number"||d!=="number")&&(i||p==="number"))h=a+"the arguments to within must be numbers";else if(!i&&p!=="date"&&p!=="number"){var _=p==="string"?"'"+n+"'":n;h=a+"expected "+_+" to be a number or a date"}else g=!1;if(g)throw new qe(h,void 0,l);if(i){var w="length",C;p==="map"||p==="set"?(w="size",C=n.size):C=n.length,this.assert(C>=t&&C<=e,"expected #{this} to have a "+w+" within "+x,"expected #{this} to not have a "+w+" within "+x)}else this.assert(n>=t&&n<=e,"expected #{this} to be within "+x,"expected #{this} to not be within "+x)});function jb(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"ssfi"),i=P(this,"message");try{var o=r instanceof t}catch(l){throw l instanceof TypeError?(i=i?i+": ":"",new qe(i+"The instanceof assertion needs a constructor but "+Ze(t)+" was given.",void 0,n)):l}var a=Ty(t);a==null&&(a="an unnamed constructor"),this.assert(o,"expected #{this} to be an instance of "+a,"expected #{this} to not be an instance of "+a)}F(jb,"assertInstanceOf");b.addMethod("instanceof",jb);b.addMethod("instanceOf",jb);function qb(t,e,r){r&&P(this,"message",r);var n=P(this,"nested"),i=P(this,"own"),o=P(this,"message"),a=P(this,"object"),l=P(this,"ssfi"),p=typeof t;if(o=o?o+": ":"",n){if(p!=="string")throw new qe(o+"the argument to property must be a string when using nested syntax",void 0,l)}else if(p!=="string"&&p!=="number"&&p!=="symbol")throw new qe(o+"the argument to property must be a string, number, or symbol",void 0,l);if(n&&i)throw new qe(o+'The "nested" and "own" flags cannot be combined.',void 0,l);if(a==null)throw new qe(o+"Target cannot be null or undefined.",void 0,l);var u=P(this,"deep"),d=P(this,"negate"),h=n?Ab(a,t):null,g=n?h.value:a[t],x=u?P(this,"eql"):(C,M)=>C===M,_="";u&&(_+="deep "),i&&(_+="own "),n&&(_+="nested "),_+="property ";var w;i?w=Object.prototype.hasOwnProperty.call(a,t):n?w=h.exists:w=xy(a,t),(!d||arguments.length===1)&&this.assert(w,"expected #{this} to have "+_+Le(t),"expected #{this} to not have "+_+Le(t)),arguments.length>1&&this.assert(w&&x(e,g),"expected #{this} to have "+_+Le(t)+" of #{exp}, but got #{act}","expected #{this} to not have "+_+Le(t)+" of #{act}",e,g),P(this,"object",g)}F(qb,"assertProperty");b.addMethod("property",qb);function zb(t,e,r){P(this,"own",!0),qb.apply(this,arguments)}F(zb,"assertOwnProperty");b.addMethod("ownProperty",zb);b.addMethod("haveOwnProperty",zb);function Gb(t,e,r){typeof e=="string"&&(r=e,e=null),r&&P(this,"message",r);var n=P(this,"object"),i=Object.getOwnPropertyDescriptor(Object(n),t),o=P(this,"eql");i&&e?this.assert(o(e,i),"expected the own property descriptor for "+Le(t)+" on #{this} to match "+Le(e)+", got "+Le(i),"expected the own property descriptor for "+Le(t)+" on #{this} to not match "+Le(e),e,i,!0):this.assert(i,"expected #{this} to have an own property descriptor for "+Le(t),"expected #{this} to not have an own property descriptor for "+Le(t)),P(this,"object",i)}F(Gb,"assertOwnPropertyDescriptor");b.addMethod("ownPropertyDescriptor",Gb);b.addMethod("haveOwnPropertyDescriptor",Gb);function Kb(){P(this,"doLength",!0)}F(Kb,"assertLengthChain");function Qb(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=Ze(r).toLowerCase(),i=P(this,"message"),o=P(this,"ssfi"),a="length",l;switch(n){case"map":case"set":a="size",l=r.size;break;default:new b(r,i,o,!0).to.have.property("length"),l=r.length}this.assert(l==t,"expected #{this} to have a "+a+" of #{exp} but got #{act}","expected #{this} to not have a "+a+" of #{act}",t,l)}F(Qb,"assertLength");b.addChainableMethod("length",Qb,Kb);b.addChainableMethod("lengthOf",Qb,Kb);function Zb(t,e){e&&P(this,"message",e);var r=P(this,"object");this.assert(t.exec(r),"expected #{this} to match "+t,"expected #{this} not to match "+t)}F(Zb,"assertMatch");b.addMethod("match",Zb);b.addMethod("matches",Zb);b.addMethod("string",function(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"message"),i=P(this,"ssfi");new b(r,n,i,!0).is.a("string"),this.assert(~r.indexOf(t),"expected #{this} to contain "+Le(t),"expected #{this} to not contain "+Le(t))});function Yb(t){var e=P(this,"object"),r=Ze(e),n=Ze(t),i=P(this,"ssfi"),o=P(this,"deep"),a,l="",p,u=!0,d=P(this,"message");d=d?d+": ":"";var h=d+"when testing keys against an object or an array you must give a single Array|Object|String argument or multiple String arguments";if(r==="Map"||r==="Set")l=o?"deeply ":"",p=[],e.forEach(function(U,Z){p.push(Z)}),n!=="Array"&&(t=Array.prototype.slice.call(arguments));else{switch(p=Ub(e),n){case"Array":if(arguments.length>1)throw new qe(h,void 0,i);break;case"Object":if(arguments.length>1)throw new qe(h,void 0,i);t=Object.keys(t);break;default:t=Array.prototype.slice.call(arguments)}t=t.map(function(U){return typeof U=="symbol"?U:String(U)})}if(!t.length)throw new qe(d+"keys required",void 0,i);var g=t.length,x=P(this,"any"),_=P(this,"all"),w=t,C=o?P(this,"eql"):(U,Z)=>U===Z;if(!x&&!_&&(_=!0),x&&(u=w.some(function(U){return p.some(function(Z){return C(U,Z)})})),_&&(u=w.every(function(U){return p.some(function(Z){return C(U,Z)})}),P(this,"contains")||(u=u&&t.length==p.length)),g>1){t=t.map(function(U){return Le(U)});var M=t.pop();_&&(a=t.join(", ")+", and "+M),x&&(a=t.join(", ")+", or "+M)}else a=Le(t[0]);a=(g>1?"keys ":"key ")+a,a=(P(this,"contains")?"contain ":"have ")+a,this.assert(u,"expected #{this} to "+l+a,"expected #{this} to not "+l+a,w.slice(0).sort(fy),p.sort(fy),!0)}F(Yb,"assertKeys");b.addMethod("keys",Yb);b.addMethod("key",Yb);function Ey(t,e,r){r&&P(this,"message",r);var n=P(this,"object"),i=P(this,"ssfi"),o=P(this,"message"),a=P(this,"negate")||!1;new b(n,o,i,!0).is.a("function"),(my(t)||typeof t=="string")&&(e=t,t=null);let l,p=!1;try{n()}catch(U){p=!0,l=U}var u=t===void 0&&e===void 0,d=!!(t&&e),h=!1,g=!1;if(u||!u&&!a){var x="an error";t instanceof Error?x="#{exp}":t&&(x=zr.getConstructorName(t));let U=l;if(l instanceof Error)U=l.toString();else if(typeof l=="string")U=l;else if(l&&(typeof l=="object"||typeof l=="function"))try{U=zr.getConstructorName(l)}catch{}this.assert(p,"expected #{this} to throw "+x,"expected #{this} to not throw an error but #{act} was thrown",t&&t.toString(),U)}if(t&&l){if(t instanceof Error){var _=zr.compatibleInstance(l,t);_===a&&(d&&a?h=!0:this.assert(a,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l&&!a?" but #{act} was thrown":""),t.toString(),l.toString()))}var w=zr.compatibleConstructor(l,t);w===a&&(d&&a?h=!0:this.assert(a,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&zr.getConstructorName(t),l instanceof Error?l.toString():l&&zr.getConstructorName(l)))}if(l&&e!==void 0&&e!==null){var C="including";my(e)&&(C="matching");var M=zr.compatibleMessage(l,e);M===a&&(d&&a?g=!0:this.assert(a,"expected #{this} to throw error "+C+" #{exp} but got #{act}","expected #{this} to throw error not "+C+" #{exp}",e,zr.getMessage(l)))}h&&g&&this.assert(a,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&zr.getConstructorName(t),l instanceof Error?l.toString():l&&zr.getConstructorName(l)),P(this,"object",l)}F(Ey,"assertThrows");b.addMethod("throw",Ey);b.addMethod("throws",Ey);b.addMethod("Throw",Ey);function Xb(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"itself"),i=typeof r=="function"&&!n?r.prototype[t]:r[t];this.assert(typeof i=="function","expected #{this} to respond to "+Le(t),"expected #{this} to not respond to "+Le(t))}F(Xb,"respondTo");b.addMethod("respondTo",Xb);b.addMethod("respondsTo",Xb);b.addProperty("itself",function(){P(this,"itself",!0)});function Jb(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=t(r);this.assert(n,"expected #{this} to satisfy "+vs(t),"expected #{this} to not satisfy"+vs(t),!P(this,"negate"),n)}F(Jb,"satisfy");b.addMethod("satisfy",Jb);b.addMethod("satisfies",Jb);function ew(t,e,r){r&&P(this,"message",r);var n=P(this,"object"),i=P(this,"message"),o=P(this,"ssfi");if(new b(n,i,o,!0).is.a("number"),typeof t!="number"||typeof e!="number"){i=i?i+": ":"";var a=e===void 0?", and a delta is required":"";throw new qe(i+"the arguments to closeTo or approximately must be numbers"+a,void 0,o)}this.assert(Math.abs(n-t)<=e,"expected #{this} to be close to "+t+" +/- "+e,"expected #{this} not to be close to "+t+" +/- "+e)}F(ew,"closeTo");b.addMethod("closeTo",ew);b.addMethod("approximately",ew);function nC(t,e,r,n,i){let o=Array.from(e),a=Array.from(t);if(!n){if(a.length!==o.length)return!1;o=o.slice()}return a.every(function(l,p){if(i)return r?r(l,o[p]):l===o[p];if(!r){var u=o.indexOf(l);return u===-1?!1:(n||o.splice(u,1),!0)}return o.some(function(d,h){return r(l,d)?(n||o.splice(h,1),!0):!1})})}F(nC,"isSubsetOf");b.addMethod("members",function(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"message"),i=P(this,"ssfi");new b(r,n,i,!0).to.be.iterable,new b(t,n,i,!0).to.be.iterable;var o=P(this,"contains"),a=P(this,"ordered"),l,p,u;o?(l=a?"an ordered superset":"a superset",p="expected #{this} to be "+l+" of #{exp}",u="expected #{this} to not be "+l+" of #{exp}"):(l=a?"ordered members":"members",p="expected #{this} to have the same "+l+" as #{exp}",u="expected #{this} to not have the same "+l+" as #{exp}");var d=P(this,"deep")?P(this,"eql"):void 0;this.assert(nC(t,r,d,o,a),p,u,t,r,!0)});b.addProperty("iterable",function(t){t&&P(this,"message",t);var e=P(this,"object");this.assert(e!=null&&e[Symbol.iterator],"expected #{this} to be an iterable","expected #{this} to not be an iterable",e)});function iC(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"message"),i=P(this,"ssfi"),o=P(this,"contains"),a=P(this,"deep"),l=P(this,"eql");new b(t,n,i,!0).to.be.an("array"),o?this.assert(t.some(function(p){return r.indexOf(p)>-1}),"expected #{this} to contain one of #{exp}","expected #{this} to not contain one of #{exp}",t,r):a?this.assert(t.some(function(p){return l(r,p)}),"expected #{this} to deeply equal one of #{exp}","expected #{this} to deeply equal one of #{exp}",t,r):this.assert(t.indexOf(r)>-1,"expected #{this} to be one of #{exp}","expected #{this} to not be one of #{exp}",t,r)}F(iC,"oneOf");b.addMethod("oneOf",iC);function tw(t,e,r){r&&P(this,"message",r);var n=P(this,"object"),i=P(this,"message"),o=P(this,"ssfi");new b(n,i,o,!0).is.a("function");var a;e?(new b(t,i,o,!0).to.have.property(e),a=t[e]):(new b(t,i,o,!0).is.a("function"),a=t()),n();var l=e==null?t():t[e],p=e==null?a:"."+e;P(this,"deltaMsgObj",p),P(this,"initialDeltaValue",a),P(this,"finalDeltaValue",l),P(this,"deltaBehavior","change"),P(this,"realDelta",l!==a),this.assert(a!==l,"expected "+p+" to change","expected "+p+" to not change")}F(tw,"assertChanges");b.addMethod("change",tw);b.addMethod("changes",tw);function rw(t,e,r){r&&P(this,"message",r);var n=P(this,"object"),i=P(this,"message"),o=P(this,"ssfi");new b(n,i,o,!0).is.a("function");var a;e?(new b(t,i,o,!0).to.have.property(e),a=t[e]):(new b(t,i,o,!0).is.a("function"),a=t()),new b(a,i,o,!0).is.a("number"),n();var l=e==null?t():t[e],p=e==null?a:"."+e;P(this,"deltaMsgObj",p),P(this,"initialDeltaValue",a),P(this,"finalDeltaValue",l),P(this,"deltaBehavior","increase"),P(this,"realDelta",l-a),this.assert(l-a>0,"expected "+p+" to increase","expected "+p+" to not increase")}F(rw,"assertIncreases");b.addMethod("increase",rw);b.addMethod("increases",rw);function nw(t,e,r){r&&P(this,"message",r);var n=P(this,"object"),i=P(this,"message"),o=P(this,"ssfi");new b(n,i,o,!0).is.a("function");var a;e?(new b(t,i,o,!0).to.have.property(e),a=t[e]):(new b(t,i,o,!0).is.a("function"),a=t()),new b(a,i,o,!0).is.a("number"),n();var l=e==null?t():t[e],p=e==null?a:"."+e;P(this,"deltaMsgObj",p),P(this,"initialDeltaValue",a),P(this,"finalDeltaValue",l),P(this,"deltaBehavior","decrease"),P(this,"realDelta",a-l),this.assert(l-a<0,"expected "+p+" to decrease","expected "+p+" to not decrease")}F(nw,"assertDecreases");b.addMethod("decrease",nw);b.addMethod("decreases",nw);function oC(t,e){e&&P(this,"message",e);var r=P(this,"deltaMsgObj"),n=P(this,"initialDeltaValue"),i=P(this,"finalDeltaValue"),o=P(this,"deltaBehavior"),a=P(this,"realDelta"),l;o==="change"?l=Math.abs(i-n)===Math.abs(t):l=a===Math.abs(t),this.assert(l,"expected "+r+" to "+o+" by "+t,"expected "+r+" to not "+o+" by "+t)}F(oC,"assertDelta");b.addMethod("by",oC);b.addProperty("extensible",function(){var t=P(this,"object"),e=t===Object(t)&&Object.isExtensible(t);this.assert(e,"expected #{this} to be extensible","expected #{this} to not be extensible")});b.addProperty("sealed",function(){var t=P(this,"object"),e=t===Object(t)?Object.isSealed(t):!0;this.assert(e,"expected #{this} to be sealed","expected #{this} to not be sealed")});b.addProperty("frozen",function(){var t=P(this,"object"),e=t===Object(t)?Object.isFrozen(t):!0;this.assert(e,"expected #{this} to be frozen","expected #{this} to not be frozen")});b.addProperty("finite",function(t){var e=P(this,"object");this.assert(typeof e=="number"&&isFinite(e),"expected #{this} to be a finite number","expected #{this} to not be a finite number")});function hy(t,e){return new b(t,e)}F(hy,"expect");hy.fail=function(t,e,r,n){throw arguments.length<2&&(r=t,t=void 0),r=r||"expect.fail()",new qe(r,{actual:t,expected:e,operator:n},hy.fail)};var sC={};wb(sC,{Should:()=>jY,should:()=>$Y});function iw(){function t(){return this instanceof String||this instanceof Number||this instanceof Boolean||typeof Symbol=="function"&&this instanceof Symbol||typeof BigInt=="function"&&this instanceof BigInt?new b(this.valueOf(),null,t):new b(this,null,t)}F(t,"shouldGetter");function e(n){Object.defineProperty(this,"should",{value:n,enumerable:!0,configurable:!0,writable:!0})}F(e,"shouldSetter"),Object.defineProperty(Object.prototype,"should",{set:e,get:t,configurable:!0});var r={};return r.fail=function(n,i,o,a){throw arguments.length<2&&(o=n,n=void 0),o=o||"should.fail()",new qe(o,{actual:n,expected:i,operator:a},r.fail)},r.equal=function(n,i,o){new b(n,o).to.equal(i)},r.Throw=function(n,i,o,a){new b(n,a).to.Throw(i,o)},r.exist=function(n,i){new b(n,i).to.exist},r.not={},r.not.equal=function(n,i,o){new b(n,o).to.not.equal(i)},r.not.Throw=function(n,i,o,a){new b(n,a).to.not.Throw(i,o)},r.not.exist=function(n,i){new b(n,i).to.not.exist},r.throw=r.Throw,r.not.throw=r.not.Throw,r}F(iw,"loadShould");var $Y=iw,jY=iw;function v(t,e){var r=new b(null,null,v,!0);r.assert(t,e,"[ negation message unavailable ]")}F(v,"assert");v.fail=function(t,e,r,n){throw arguments.length<2&&(r=t,t=void 0),r=r||"assert.fail()",new qe(r,{actual:t,expected:e,operator:n},v.fail)};v.isOk=function(t,e){new b(t,e,v.isOk,!0).is.ok};v.isNotOk=function(t,e){new b(t,e,v.isNotOk,!0).is.not.ok};v.equal=function(t,e,r){var n=new b(t,r,v.equal,!0);n.assert(e==_e(n,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",e,t,!0)};v.notEqual=function(t,e,r){var n=new b(t,r,v.notEqual,!0);n.assert(e!=_e(n,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",e,t,!0)};v.strictEqual=function(t,e,r){new b(t,r,v.strictEqual,!0).to.equal(e)};v.notStrictEqual=function(t,e,r){new b(t,r,v.notStrictEqual,!0).to.not.equal(e)};v.deepEqual=v.deepStrictEqual=function(t,e,r){new b(t,r,v.deepEqual,!0).to.eql(e)};v.notDeepEqual=function(t,e,r){new b(t,r,v.notDeepEqual,!0).to.not.eql(e)};v.isAbove=function(t,e,r){new b(t,r,v.isAbove,!0).to.be.above(e)};v.isAtLeast=function(t,e,r){new b(t,r,v.isAtLeast,!0).to.be.least(e)};v.isBelow=function(t,e,r){new b(t,r,v.isBelow,!0).to.be.below(e)};v.isAtMost=function(t,e,r){new b(t,r,v.isAtMost,!0).to.be.most(e)};v.isTrue=function(t,e){new b(t,e,v.isTrue,!0).is.true};v.isNotTrue=function(t,e){new b(t,e,v.isNotTrue,!0).to.not.equal(!0)};v.isFalse=function(t,e){new b(t,e,v.isFalse,!0).is.false};v.isNotFalse=function(t,e){new b(t,e,v.isNotFalse,!0).to.not.equal(!1)};v.isNull=function(t,e){new b(t,e,v.isNull,!0).to.equal(null)};v.isNotNull=function(t,e){new b(t,e,v.isNotNull,!0).to.not.equal(null)};v.isNaN=function(t,e){new b(t,e,v.isNaN,!0).to.be.NaN};v.isNotNaN=function(t,e){new b(t,e,v.isNotNaN,!0).not.to.be.NaN};v.exists=function(t,e){new b(t,e,v.exists,!0).to.exist};v.notExists=function(t,e){new b(t,e,v.notExists,!0).to.not.exist};v.isUndefined=function(t,e){new b(t,e,v.isUndefined,!0).to.equal(void 0)};v.isDefined=function(t,e){new b(t,e,v.isDefined,!0).to.not.equal(void 0)};v.isCallable=function(t,e){new b(t,e,v.isCallable,!0).is.callable};v.isNotCallable=function(t,e){new b(t,e,v.isNotCallable,!0).is.not.callable};v.isObject=function(t,e){new b(t,e,v.isObject,!0).to.be.a("object")};v.isNotObject=function(t,e){new b(t,e,v.isNotObject,!0).to.not.be.a("object")};v.isArray=function(t,e){new b(t,e,v.isArray,!0).to.be.an("array")};v.isNotArray=function(t,e){new b(t,e,v.isNotArray,!0).to.not.be.an("array")};v.isString=function(t,e){new b(t,e,v.isString,!0).to.be.a("string")};v.isNotString=function(t,e){new b(t,e,v.isNotString,!0).to.not.be.a("string")};v.isNumber=function(t,e){new b(t,e,v.isNumber,!0).to.be.a("number")};v.isNotNumber=function(t,e){new b(t,e,v.isNotNumber,!0).to.not.be.a("number")};v.isFinite=function(t,e){new b(t,e,v.isFinite,!0).to.be.finite};v.isBoolean=function(t,e){new b(t,e,v.isBoolean,!0).to.be.a("boolean")};v.isNotBoolean=function(t,e){new b(t,e,v.isNotBoolean,!0).to.not.be.a("boolean")};v.typeOf=function(t,e,r){new b(t,r,v.typeOf,!0).to.be.a(e)};v.notTypeOf=function(t,e,r){new b(t,r,v.notTypeOf,!0).to.not.be.a(e)};v.instanceOf=function(t,e,r){new b(t,r,v.instanceOf,!0).to.be.instanceOf(e)};v.notInstanceOf=function(t,e,r){new b(t,r,v.notInstanceOf,!0).to.not.be.instanceOf(e)};v.include=function(t,e,r){new b(t,r,v.include,!0).include(e)};v.notInclude=function(t,e,r){new b(t,r,v.notInclude,!0).not.include(e)};v.deepInclude=function(t,e,r){new b(t,r,v.deepInclude,!0).deep.include(e)};v.notDeepInclude=function(t,e,r){new b(t,r,v.notDeepInclude,!0).not.deep.include(e)};v.nestedInclude=function(t,e,r){new b(t,r,v.nestedInclude,!0).nested.include(e)};v.notNestedInclude=function(t,e,r){new b(t,r,v.notNestedInclude,!0).not.nested.include(e)};v.deepNestedInclude=function(t,e,r){new b(t,r,v.deepNestedInclude,!0).deep.nested.include(e)};v.notDeepNestedInclude=function(t,e,r){new b(t,r,v.notDeepNestedInclude,!0).not.deep.nested.include(e)};v.ownInclude=function(t,e,r){new b(t,r,v.ownInclude,!0).own.include(e)};v.notOwnInclude=function(t,e,r){new b(t,r,v.notOwnInclude,!0).not.own.include(e)};v.deepOwnInclude=function(t,e,r){new b(t,r,v.deepOwnInclude,!0).deep.own.include(e)};v.notDeepOwnInclude=function(t,e,r){new b(t,r,v.notDeepOwnInclude,!0).not.deep.own.include(e)};v.match=function(t,e,r){new b(t,r,v.match,!0).to.match(e)};v.notMatch=function(t,e,r){new b(t,r,v.notMatch,!0).to.not.match(e)};v.property=function(t,e,r){new b(t,r,v.property,!0).to.have.property(e)};v.notProperty=function(t,e,r){new b(t,r,v.notProperty,!0).to.not.have.property(e)};v.propertyVal=function(t,e,r,n){new b(t,n,v.propertyVal,!0).to.have.property(e,r)};v.notPropertyVal=function(t,e,r,n){new b(t,n,v.notPropertyVal,!0).to.not.have.property(e,r)};v.deepPropertyVal=function(t,e,r,n){new b(t,n,v.deepPropertyVal,!0).to.have.deep.property(e,r)};v.notDeepPropertyVal=function(t,e,r,n){new b(t,n,v.notDeepPropertyVal,!0).to.not.have.deep.property(e,r)};v.ownProperty=function(t,e,r){new b(t,r,v.ownProperty,!0).to.have.own.property(e)};v.notOwnProperty=function(t,e,r){new b(t,r,v.notOwnProperty,!0).to.not.have.own.property(e)};v.ownPropertyVal=function(t,e,r,n){new b(t,n,v.ownPropertyVal,!0).to.have.own.property(e,r)};v.notOwnPropertyVal=function(t,e,r,n){new b(t,n,v.notOwnPropertyVal,!0).to.not.have.own.property(e,r)};v.deepOwnPropertyVal=function(t,e,r,n){new b(t,n,v.deepOwnPropertyVal,!0).to.have.deep.own.property(e,r)};v.notDeepOwnPropertyVal=function(t,e,r,n){new b(t,n,v.notDeepOwnPropertyVal,!0).to.not.have.deep.own.property(e,r)};v.nestedProperty=function(t,e,r){new b(t,r,v.nestedProperty,!0).to.have.nested.property(e)};v.notNestedProperty=function(t,e,r){new b(t,r,v.notNestedProperty,!0).to.not.have.nested.property(e)};v.nestedPropertyVal=function(t,e,r,n){new b(t,n,v.nestedPropertyVal,!0).to.have.nested.property(e,r)};v.notNestedPropertyVal=function(t,e,r,n){new b(t,n,v.notNestedPropertyVal,!0).to.not.have.nested.property(e,r)};v.deepNestedPropertyVal=function(t,e,r,n){new b(t,n,v.deepNestedPropertyVal,!0).to.have.deep.nested.property(e,r)};v.notDeepNestedPropertyVal=function(t,e,r,n){new b(t,n,v.notDeepNestedPropertyVal,!0).to.not.have.deep.nested.property(e,r)};v.lengthOf=function(t,e,r){new b(t,r,v.lengthOf,!0).to.have.lengthOf(e)};v.hasAnyKeys=function(t,e,r){new b(t,r,v.hasAnyKeys,!0).to.have.any.keys(e)};v.hasAllKeys=function(t,e,r){new b(t,r,v.hasAllKeys,!0).to.have.all.keys(e)};v.containsAllKeys=function(t,e,r){new b(t,r,v.containsAllKeys,!0).to.contain.all.keys(e)};v.doesNotHaveAnyKeys=function(t,e,r){new b(t,r,v.doesNotHaveAnyKeys,!0).to.not.have.any.keys(e)};v.doesNotHaveAllKeys=function(t,e,r){new b(t,r,v.doesNotHaveAllKeys,!0).to.not.have.all.keys(e)};v.hasAnyDeepKeys=function(t,e,r){new b(t,r,v.hasAnyDeepKeys,!0).to.have.any.deep.keys(e)};v.hasAllDeepKeys=function(t,e,r){new b(t,r,v.hasAllDeepKeys,!0).to.have.all.deep.keys(e)};v.containsAllDeepKeys=function(t,e,r){new b(t,r,v.containsAllDeepKeys,!0).to.contain.all.deep.keys(e)};v.doesNotHaveAnyDeepKeys=function(t,e,r){new b(t,r,v.doesNotHaveAnyDeepKeys,!0).to.not.have.any.deep.keys(e)};v.doesNotHaveAllDeepKeys=function(t,e,r){new b(t,r,v.doesNotHaveAllDeepKeys,!0).to.not.have.all.deep.keys(e)};v.throws=function(t,e,r,n){(typeof e=="string"||e instanceof RegExp)&&(r=e,e=null);var i=new b(t,n,v.throws,!0).to.throw(e,r);return _e(i,"object")};v.doesNotThrow=function(t,e,r,n){(typeof e=="string"||e instanceof RegExp)&&(r=e,e=null),new b(t,n,v.doesNotThrow,!0).to.not.throw(e,r)};v.operator=function(t,e,r,n){var i;switch(e){case"==":i=t==r;break;case"===":i=t===r;break;case">":i=t>r;break;case">=":i=t>=r;break;case"<":i=t<r;break;case"<=":i=t<=r;break;case"!=":i=t!=r;break;case"!==":i=t!==r;break;default:throw n=n&&n+": ",new qe(n+'Invalid operator "'+e+'"',void 0,v.operator)}var o=new b(i,n,v.operator,!0);o.assert(_e(o,"object")===!0,"expected "+Le(t)+" to be "+e+" "+Le(r),"expected "+Le(t)+" to not be "+e+" "+Le(r))};v.closeTo=function(t,e,r,n){new b(t,n,v.closeTo,!0).to.be.closeTo(e,r)};v.approximately=function(t,e,r,n){new b(t,n,v.approximately,!0).to.be.approximately(e,r)};v.sameMembers=function(t,e,r){new b(t,r,v.sameMembers,!0).to.have.same.members(e)};v.notSameMembers=function(t,e,r){new b(t,r,v.notSameMembers,!0).to.not.have.same.members(e)};v.sameDeepMembers=function(t,e,r){new b(t,r,v.sameDeepMembers,!0).to.have.same.deep.members(e)};v.notSameDeepMembers=function(t,e,r){new b(t,r,v.notSameDeepMembers,!0).to.not.have.same.deep.members(e)};v.sameOrderedMembers=function(t,e,r){new b(t,r,v.sameOrderedMembers,!0).to.have.same.ordered.members(e)};v.notSameOrderedMembers=function(t,e,r){new b(t,r,v.notSameOrderedMembers,!0).to.not.have.same.ordered.members(e)};v.sameDeepOrderedMembers=function(t,e,r){new b(t,r,v.sameDeepOrderedMembers,!0).to.have.same.deep.ordered.members(e)};v.notSameDeepOrderedMembers=function(t,e,r){new b(t,r,v.notSameDeepOrderedMembers,!0).to.not.have.same.deep.ordered.members(e)};v.includeMembers=function(t,e,r){new b(t,r,v.includeMembers,!0).to.include.members(e)};v.notIncludeMembers=function(t,e,r){new b(t,r,v.notIncludeMembers,!0).to.not.include.members(e)};v.includeDeepMembers=function(t,e,r){new b(t,r,v.includeDeepMembers,!0).to.include.deep.members(e)};v.notIncludeDeepMembers=function(t,e,r){new b(t,r,v.notIncludeDeepMembers,!0).to.not.include.deep.members(e)};v.includeOrderedMembers=function(t,e,r){new b(t,r,v.includeOrderedMembers,!0).to.include.ordered.members(e)};v.notIncludeOrderedMembers=function(t,e,r){new b(t,r,v.notIncludeOrderedMembers,!0).to.not.include.ordered.members(e)};v.includeDeepOrderedMembers=function(t,e,r){new b(t,r,v.includeDeepOrderedMembers,!0).to.include.deep.ordered.members(e)};v.notIncludeDeepOrderedMembers=function(t,e,r){new b(t,r,v.notIncludeDeepOrderedMembers,!0).to.not.include.deep.ordered.members(e)};v.oneOf=function(t,e,r){new b(t,r,v.oneOf,!0).to.be.oneOf(e)};v.isIterable=function(t,e){if(t==null||!t[Symbol.iterator])throw e=e?`${e} expected ${Le(t)} to be an iterable`:`expected ${Le(t)} to be an iterable`,new qe(e,void 0,v.isIterable)};v.changes=function(t,e,r,n){arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.changes,!0).to.change(e,r)};v.changesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.changesBy,!0).to.change(e,r).by(n)};v.doesNotChange=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.doesNotChange,!0).to.not.change(e,r)};v.changesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.changesButNotBy,!0).to.change(e,r).but.not.by(n)};v.increases=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.increases,!0).to.increase(e,r)};v.increasesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.increasesBy,!0).to.increase(e,r).by(n)};v.doesNotIncrease=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.doesNotIncrease,!0).to.not.increase(e,r)};v.increasesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.increasesButNotBy,!0).to.increase(e,r).but.not.by(n)};v.decreases=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.decreases,!0).to.decrease(e,r)};v.decreasesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.decreasesBy,!0).to.decrease(e,r).by(n)};v.doesNotDecrease=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.doesNotDecrease,!0).to.not.decrease(e,r)};v.doesNotDecreaseBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);return new b(t,i,v.doesNotDecreaseBy,!0).to.not.decrease(e,r).by(n)};v.decreasesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.decreasesButNotBy,!0).to.decrease(e,r).but.not.by(n)};v.ifError=function(t){if(t)throw t};v.isExtensible=function(t,e){new b(t,e,v.isExtensible,!0).to.be.extensible};v.isNotExtensible=function(t,e){new b(t,e,v.isNotExtensible,!0).to.not.be.extensible};v.isSealed=function(t,e){new b(t,e,v.isSealed,!0).to.be.sealed};v.isNotSealed=function(t,e){new b(t,e,v.isNotSealed,!0).to.not.be.sealed};v.isFrozen=function(t,e){new b(t,e,v.isFrozen,!0).to.be.frozen};v.isNotFrozen=function(t,e){new b(t,e,v.isNotFrozen,!0).to.not.be.frozen};v.isEmpty=function(t,e){new b(t,e,v.isEmpty,!0).to.be.empty};v.isNotEmpty=function(t,e){new b(t,e,v.isNotEmpty,!0).to.not.be.empty};F(function t(e,r){return v[r]=v[e],t},"alias")("isOk","ok")("isNotOk","notOk")("throws","throw")("throws","Throw")("isExtensible","extensible")("isNotExtensible","notExtensible")("isSealed","sealed")("isNotSealed","notSealed")("isFrozen","frozen")("isNotFrozen","notFrozen")("isEmpty","empty")("isNotEmpty","notEmpty")("isCallable","isFunction")("isNotCallable","isNotFunction");var yF=[];function qY(t){let e={AssertionError:qe,util:cy,config:Rr,expect:hy,assert:v,Assertion:b,...sC};return~yF.indexOf(t)||(t(e,cy),yF.push(t)),e}F(qY,"use");var Np=class{constructor(e,r,n){this._lineNumber=e,this._text=r,this._isLastLine=n}get lineNumber(){return this._lineNumber}get text(){return this._text}get range(){return new W(this._lineNumber,0,this._lineNumber,this._text.length)}get rangeIncludingLineBreak(){return this._isLastLine?this.range:new W(this._lineNumber,0,this._lineNumber+1,0)}get rangeTrimmed(){let e=/^(\s*)/.exec(this._text)[1].length;if(e===this._text.length)return;let r=this.text.trimEnd().length;return new W(this._lineNumber,e,this._lineNumber,r)}get isEmptyOrWhitespace(){return this.rangeTrimmed==null}};var aC=dr(require("node:path"),1),Ry=class{get uri(){return this._uri}get filename(){return aC.default.basename(this._uri.path)}get languageId(){return this._languageId}get version(){return this._version}get lineCount(){return this._lineCount}get range(){let{end:e}=this.lineAt(this.lineCount-1).range;return new W(0,0,e.line,e.character)}get eol(){return this._eol===`
`?"LF":"CRLF"}constructor(e,r,n,i,o){this._uri=e,this._languageId=r,this._version=n,this._eol=i,this._lines=o,this._lineCount=o.length,this._lineStarts=null,this._cachedTextValue=null}update(e){this._lines=e,this._lineCount=e.length,this._lineStarts=null,this._cachedTextValue=null}lineAt(e){let r;if(e instanceof ce?r=e.line:typeof e=="number"&&(r=e),typeof r!="number"||r<0||Math.floor(r)!==r)throw new Error("Illegal value for `line`");return r=Math.min(r,this._lines.length-1),new Np(r,this._lines[r],r===this._lines.length-1)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.line-1)+e.character}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();let r=this._lineStarts.getIndexOf(e),n=this._lines[r.index].length;return new ce(r.index,Math.min(r.remainder,n))}getText(e){if(e===void 0)return this._cachedTextValue==null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue;if(e=this._validateRange(e),e.isEmpty)return"";if(e.isSingleLine)return this._lines[e.start.line].substring(e.start.character,e.end.character);let r=this._eol,n=e.start.line,i=e.end.line,o=[];o.push(this._lines[n].substring(e.start.character));for(let a=n+1;a<i;a++)o.push(this._lines[a]);return o.push(this._lines[i].substring(0,e.end.character)),o.join(r)}_validateRange(e){if(!(e instanceof W))throw new Error("Invalid argument");let r=this._validatePosition(e.start),n=this._validatePosition(e.end);return r===e.start&&n===e.end?e:new W(r.line,r.character,n.line,n.character)}_validatePosition(e){if(!(e instanceof ce))throw new Error("Invalid argument");if(this._lines.length===0)return e.with(0,0);let{line:r,character:n}=e,i=!1;if(r<0)r=0,n=0,i=!0;else if(r>=this._lines.length)r=this._lines.length-1,n=this._lines[r].length,i=!0;else{let o=this._lines[r].length;n<0?(n=0,i=!0):n>o&&(n=o,i=!0)}return i?new ce(r,n):e}_ensureLineStarts(){if(!this._lineStarts){let e=this._eol.length,r=this._lines.length,n=new Uint32Array(r);for(let i=0;i<r;i++)n[i]=this._lines[i].length+e;this._lineStarts=new ow(n)}}};function KY(t){if(t<0)return 0;let e=4294967295;return t>e?e:t|0}var ow=class{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}getCount(){return this.values.length}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=KY(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let r=this.prefixSumValidIndex[0]+1;r===0&&(this.prefixSum[0]=this.values[0],r++),e>=this.values.length&&(e=this.values.length-1);for(let n=r;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let r=0,n=this.values.length-1,i=0,o=0,a=0;for(;r<=n;)if(i=r+(n-r)/2|0,o=this.prefixSum[i],a=o-this.values[i],e<a)n=i-1;else if(e>=o)r=i+1;else break;return new sw(i,e-a)}},sw=class{constructor(e,r){this.index=e;this.remainder=r;this._prefixSumIndexOfResultBrand=void 0;this.index=e,this.remainder=r}};var ky=class{constructor(e){this.client=e;this.cursorlessVersion="0.0.0";this.workspaceFolders=void 0;this.disposables=[];this.quickPickReturnValue=void 0;this.onDidCloseTextDocument=Lp;this.onDidChangeActiveTextEditor=Lp;this.onDidChangeVisibleTextEditors=Lp;this.onDidChangeTextEditorSelection=Lp;this.onDidChangeTextEditorVisibleRanges=Lp;this.configuration=new pp,this.keyValueStore=new up,this.messages=new fp,this.clipboard=new cp(this.client),this.capabilities=new Bg,this.editorMap=new Map,this.documentMap=new Map,this.activeWindow=void 0,this.activeBuffer=void 0}async init(){let e=await zI(this.client);this.assetsRoot_=aw.default.join(e,"assets"),this.cursorlessNeovimPath=aw.default.join(e,"node","cursorless-neovim")}async showQuickPick(e,r){throw Error("showQuickPick Not implemented")}async setHighlightRanges(e,r,n){throw Error("setHighlightRanges Not implemented")}async flashRanges(e){console.debug("flashRanges Not implemented")}get assetsRoot(){if(this.assetsRoot_==null)throw Error("Field `assetsRoot` has not yet been mocked");return this.assetsRoot_}get runMode(){return cF()}get activeTextEditor(){return this.getActiveTextEditor()}get activeEditableTextEditor(){return this.getActiveTextEditor()}getActiveTextEditor(){let e=this.activeWindow?this.getTextEditor(this.activeWindow):void 0;return e===void 0&&console.debug("getActiveTextEditor: editor is undefined"),e}getTextEditor(e){for(let[r,n]of this.editorMap)if(r.id===e.id)return n}getTextDocument(e){for(let[r,n]of this.documentMap)if(r.id===e.id)return n}get visibleTextEditors(){return Array.from(this.editorMap.values())}getEditableTextEditor(e){return e}async findInDocument(e,r){throw Error("findInDocument Not implemented")}async findInWorkspace(e){throw Error("findInWorkspace Not implemented")}async openTextDocument(e){throw Error("openTextDocument Not implemented")}async openUntitledTextDocument(e){throw Error("openUntitledTextDocument Not implemented")}async showInputBox(e){throw Error("TextDocumentChangeEvent Not implemented")}async executeCommand(e,...r){throw new Error("executeCommand Method not implemented.")}onDidChangeTextDocument(e){return r1(e)}onDidOpenTextDocument(e,r,n){return n1(e,r,n)}async updateTextEditor(e=!1){let r=await this.client.window,n=await r.buffer,i=await n.lines,o=i;i.length>=30&&(o=i.slice(0,15).concat(["..."]).concat(i.slice(-15))),console.debug(`updateTextEditor(): window:${r.id}, buffer:${n.id}, lines=${JSON.stringify(o)}`);let a,l;e?(a=[],l=[]):(a=await Ug(r,this.client),l=await qI(r,this.client,i));let p=this.toNeovimEditor(r,n,i,l,a);return $r().emitEvent("onDidOpenTextDocument",p.document),p}toNeovimEditor(e,r,n,i,o){let a=this.getTextDocument(r),l=this.getTextEditor(e);return a?(console.debug(`toNeovimEditor(): updating document: buffer=${r.id}`),a.update(n)):(console.debug(`toNeovimEditor(): creating new document: buffer=${r.id}`),a=new Ry(c1.parse(`neovim://${r.id}`),"plaintext",1,`
`,n),this.documentMap.set(r,a)),l?(console.debug(`toNeovimEditor(): updating editor: window=${e.id}`),l.updateDocument(i,o,a)):(console.debug(`toNeovimEditor(): creating new editor: window=${e.id}`),l=new Wg(XP(),this.client,this,e,a,i,o),this.editorMap.set(e,l)),this.activeBuffer=r,this.activeWindow=e,this.activeTextEditor}handleCommandError(e){YI(this.client,e.message)}disposeOnExit(...e){return this.disposables.push(...e),()=>(0,cC.pull)(this.disposables,...e)}};function Lp(){return{dispose(){}}}var Py=class{constructor(e){this.client=e;this.signals={prePhrase:{getVersion:async()=>null}}}async getFocusedElementType(){let e=await this.client.mode;return e.mode==="t"||e.mode==="nt"?"terminal":"textEditor"}};var ZY=BigInt(1e9);function lC(t,e=BigInt(1e6)){return Number(t*e/ZY)/Number(e)}async function My(t,e=[],r=[],n,i,o,a,l){let p={documentContents:n.document.getText(),selections:n.selections.map(Tk)};o!=null&&(p.marks=o),l!=null&&(p.metadata=l),e.includes("clipboard")||(p.clipboard=await i.clipboard.readText()),e.includes("visibleRanges")||(p.visibleRanges=n.visibleRanges.map(Yc));for(let u of la){let d=t?.get(u),h=`${u}Mark`;d!=null&&!e.includes(h)&&(p[h]=d.map(g=>g.toPlainObject()))}if(r.includes("timeOffsetSeconds")){let u=a?.startTimestamp;if(u==null)throw new Error("No start timestamp provided but time offset was requested");let d=process.hrtime.bigint()-u;p.timeOffsetSeconds=lC(d)}return p}var YY=dr(Tl(),1);function pC(t,e,r,n,i,o,a,l){return{commandServerApi:t,ide:i,neovimIDE:n,injectIde:a,scopeProvider:o,takeSnapshot(p,u,d,h,g){return My(e,p,u,d,h,g,void 0,void 0)},setStoredTarget(p,u,d){e.set(u,d?.map(h=>HI(p,h)))},hatTokenMap:r,runIntegrationTests:l}}async function uC(t,e,r,n){let i={[Yx]:async(...o)=>{(await t.mode).mode==="t"&&QI(t);try{await e.updateTextEditor();let l=await r.runCommandSafe(...o),p=Df(o);if(await n.getFocusedElementType()==="terminal"&&zo(p)){let d=l;"fallback"in d&&d.fallback.action==="insert"&&ZI(t)}return l}catch(l){if(e.runMode!=="test"){let p=l;console.error(p.stack),e.handleCommandError(p)}throw l}},"cursorless.repeatPreviousCommand":De,"cursorless.showCheatsheet":De,"cursorless.internal.updateCheatsheetDefaults":De,"cursorless.recordTestCase":De,"cursorless.recordOneTestCaseThenPause":De,"cursorless.pauseRecording":De,"cursorless.resumeRecording":De,"cursorless.takeSnapshot":De,"cursorless.recordScopeTests.showUnimplementedFacets":De,"cursorless.recordScopeTests.saveActiveDocument":De,"cursorless.showQuickPick":De,"cursorless.showDocumentation":De,"cursorless.private.logQuickActions":De,"cursorless.toggleDecorations":De,"cursorless.recomputeDecorationStyles":De,"cursorless.showScopeVisualizer":De,"cursorless.hideScopeVisualizer":De,"cursorless.analyzeCommandHistory":De,"cursorless.keyboard.escape":De,"cursorless.keyboard.targeted.targetHat":De,"cursorless.keyboard.targeted.targetScope":De,"cursorless.keyboard.targeted.targetSelection":De,"cursorless.keyboard.targeted.clearTarget":De,"cursorless.keyboard.targeted.runActionOnTarget":De,"cursorless.keyboard.modal.modeOn":De,"cursorless.keyboard.modal.modeOff":De,"cursorless.keyboard.modal.modeToggle":De,"cursorless.keyboard.undoTarget":De,"cursorless.keyboard.redoTarget":De,"cursorless.tutorial.start":De,"cursorless.tutorial.next":De,"cursorless.tutorial.previous":De,"cursorless.tutorial.restart":De,"cursorless.tutorial.resume":De,"cursorless.tutorial.list":De,"cursorless.documentationOpened":De};Object.entries(i).map(([o,a])=>$r().registerCommand(o,a))}async function De(...t){console.debug(`dummyCommandHandler(): args=${t}`)}async function fC(t){let e=t.nvim,r=new ky(e);await r.init();let n=r.runMode==="production"?r:new Sf(r,new yf,r.runMode==="test",void 0),i=new Iu,o=new Py(e),a=r.runMode==="test"?i:o,{commandApi:l,storedTargets:p,hatTokenMap:u,scopeProvider:d,injectIde:h,runIntegrationTests:g}=await BI({ide:n,commandServerApi:a});await uC(e,r,l,a);let x={testHelpers:r.runMode==="test"?pC(i,p,u,r,n,d,h,g):void 0};$r().registerExtensionApi($I,x),console.log("activate(): Cursorless extension loaded")}function dC(t){t.setOptions({dev:!1}),t.registerFunction("CursorlessLoadExtension",async()=>await XY(t),{sync:!1})}async function XY(t){console.log("==============================================================================================="),console.log("loadExtension(cursorless-neovim): start"),await fC(t),console.log("loadExtension(cursorless-neovim): done")}
/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)

itertools/dist/index.js:
  (* istanbul ignore else -- @preserve *)
  (* istanbul ignore if -- @preserve *)

chai/chai.js:
  (*!
   * Chai - flag utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - test utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - expectTypes utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getActual utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - message composition utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - transferFlags utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * http://chaijs.com
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - isProxyEnabled helper
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addLengthGuard utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getProperties utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - proxify utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addChainingMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteChainableMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - compareByInspect utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getOwnEnumerablePropertySymbols utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getOwnEnumerableProperties utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - isNaN utility
   * Copyright(c) 2012-2015 Sakthipriyan Vairamani <thechargingvolcano@gmail.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*! Bundled license information:
  
  deep-eql/index.js:
    (*!
     * deep-eql
     * Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>
     * MIT Licensed
     *)
    (*!
     * Check to see if the MemoizeMap has recorded a result of the two operands
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {MemoizeMap} memoizeMap
     * @returns {Boolean|null} result
    *)
    (*!
     * Set the result of the equality into the MemoizeMap
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {MemoizeMap} memoizeMap
     * @param {Boolean} result
    *)
    (*!
     * Primary Export
     *)
    (*!
     * The main logic of the `deepEqual` function.
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Object} [options] (optional) Additional options
     * @param {Array} [options.comparator] (optional) Override default algorithm, determining custom equality.
     * @param {Array} [options.memoize] (optional) Provide a custom memoization object which will cache the results of
        complex objects for a speed boost. By passing `false` you can disable memoization, but this will cause circular
        references to blow the stack.
     * @return {Boolean} equal match
    *)
    (*!
     * Compare two Regular Expressions for equality.
     *
     * @param {RegExp} leftHandOperand
     * @param {RegExp} rightHandOperand
     * @return {Boolean} result
     *)
    (*!
     * Compare two Sets/Maps for equality. Faster than other equality functions.
     *
     * @param {Set} leftHandOperand
     * @param {Set} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Simple equality for flat iterable objects such as Arrays, TypedArrays or Node.js buffers.
     *
     * @param {Iterable} leftHandOperand
     * @param {Iterable} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Simple equality for generator objects such as those returned by generator functions.
     *
     * @param {Iterable} leftHandOperand
     * @param {Iterable} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Determine if the given object has an @@iterator function.
     *
     * @param {Object} target
     * @return {Boolean} `true` if the object has an @@iterator function.
     *)
    (*!
     * Gets all iterator entries from the given Object. If the Object has no @@iterator function, returns an empty array.
     * This will consume the iterator - which could have side effects depending on the @@iterator implementation.
     *
     * @param {Object} target
     * @returns {Array} an array of entries from the @@iterator function
     *)
    (*!
     * Gets all entries from a Generator. This will consume the generator - which could have side effects.
     *
     * @param {Generator} target
     * @returns {Array} an array of entries from the Generator.
     *)
    (*!
     * Gets all own and inherited enumerable keys from a target.
     *
     * @param {Object} target
     * @returns {Array} an array of own and inherited enumerable keys from the target.
     *)
    (*!
     * Determines if two objects have matching values, given a set of keys. Defers to deepEqual for the equality check of
     * each key. If any value of the given key is not equal, the function will return false (early).
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Array} keys An array of keys to compare the values of leftHandOperand and rightHandOperand against
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Recursively check the equality of two Objects. Once basic sameness has been established it will defer to `deepEqual`
     * for each enumerable key in the object.
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Returns true if the argument is a primitive.
     *
     * This intentionally returns true for all objects that can be compared by reference,
     * including functions and symbols.
     *
     * @param {Mixed} value
     * @return {Boolean} result
     *)
  *)
*/
