"use strict";var SB=Object.create;var Iu=Object.defineProperty;var vB=Object.getOwnPropertyDescriptor;var bB=Object.getOwnPropertyNames;var wB=Object.getPrototypeOf,_B=Object.prototype.hasOwnProperty;var Ke=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),EB=(t,e)=>{for(var r in e)Iu(t,r,{get:e[r],enumerable:!0})},uE=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of bB(e))!_B.call(t,i)&&i!==r&&Iu(t,i,{get:()=>e[i],enumerable:!(n=vB(e,i))||n.enumerable});return t};var yr=(t,e,r)=>(r=t!=null?SB(wB(t)):{},uE(e||!t||!t.__esModule?Iu(r,"default",{value:t,enumerable:!0}):r,t)),RB=t=>uE(Iu({},"__esModule",{value:!0}),t);var YP=Ke(qf=>{"use strict";Object.defineProperty(qf,"__esModule",{value:!0});qf.default=void 0;var aye=qf.default="ffffffff-ffff-ffff-ffff-ffffffffffff"});var XP=Ke(zf=>{"use strict";Object.defineProperty(zf,"__esModule",{value:!0});zf.default=void 0;var cye=zf.default="00000000-0000-0000-0000-000000000000"});var JP=Ke(Gf=>{"use strict";Object.defineProperty(Gf,"__esModule",{value:!0});Gf.default=void 0;var pye=Gf.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i});var xl=Ke(Kf=>{"use strict";Object.defineProperty(Kf,"__esModule",{value:!0});Kf.default=void 0;var j4=q4(JP());function q4(t){return t&&t.__esModule?t:{default:t}}function z4(t){return typeof t=="string"&&j4.default.test(t)}var fye=Kf.default=z4});var Tl=Ke(Qf=>{"use strict";Object.defineProperty(Qf,"__esModule",{value:!0});Qf.default=void 0;var G4=K4(xl());function K4(t){return t&&t.__esModule?t:{default:t}}function Q4(t){if(!(0,G4.default)(t))throw TypeError("Invalid UUID");let e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}var dye=Qf.default=Q4});var Pi=Ke(Sl=>{"use strict";Object.defineProperty(Sl,"__esModule",{value:!0});Sl.default=void 0;Sl.unsafeStringify=eA;var Z4=Y4(xl());function Y4(t){return t&&t.__esModule?t:{default:t}}var Ut=[];for(let t=0;t<256;++t)Ut.push((t+256).toString(16).slice(1));function eA(t,e=0){return(Ut[t[e+0]]+Ut[t[e+1]]+Ut[t[e+2]]+Ut[t[e+3]]+"-"+Ut[t[e+4]]+Ut[t[e+5]]+"-"+Ut[t[e+6]]+Ut[t[e+7]]+"-"+Ut[t[e+8]]+Ut[t[e+9]]+"-"+Ut[t[e+10]]+Ut[t[e+11]]+Ut[t[e+12]]+Ut[t[e+13]]+Ut[t[e+14]]+Ut[t[e+15]]).toLowerCase()}function X4(t,e=0){let r=eA(t,e);if(!(0,Z4.default)(r))throw TypeError("Stringified UUID is invalid");return r}var gye=Sl.default=X4});var Xf=Ke(hS=>{"use strict";Object.defineProperty(hS,"__esModule",{value:!0});hS.default=t6;var J4=e6(require("node:crypto"));function e6(t){return t&&t.__esModule?t:{default:t}}var Yf=new Uint8Array(256),Zf=Yf.length;function t6(){return Zf>Yf.length-16&&(J4.default.randomFillSync(Yf),Zf=0),Yf.slice(Zf,Zf+=16)}});var TS=Ke(em=>{"use strict";Object.defineProperty(em,"__esModule",{value:!0});em.default=void 0;var r6=i6(Xf()),n6=Pi();function i6(t){return t&&t.__esModule?t:{default:t}}var gS,Jf,yS=0,xS=0;function o6(t,e,r){let n=e&&r||0,i=e||new Array(16);t=t||{};let o=t.node,s=t.clockseq;if(t._v6||(o||(o=gS),s==null&&(s=Jf)),o==null||s==null){let g=t.random||(t.rng||r6.default)();o==null&&(o=[g[0],g[1],g[2],g[3],g[4],g[5]],!gS&&!t._v6&&(o[0]|=1,gS=o)),s==null&&(s=(g[6]<<8|g[7])&16383,Jf===void 0&&!t._v6&&(Jf=s))}let l=t.msecs!==void 0?t.msecs:Date.now(),p=t.nsecs!==void 0?t.nsecs:xS+1,u=l-yS+(p-xS)/1e4;if(u<0&&t.clockseq===void 0&&(s=s+1&16383),(u<0||l>yS)&&t.nsecs===void 0&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");yS=l,xS=p,Jf=s,l+=122192928e5;let m=((l&268435455)*1e4+p)%4294967296;i[n++]=m>>>24&255,i[n++]=m>>>16&255,i[n++]=m>>>8&255,i[n++]=m&255;let d=l/4294967296*1e4&268435455;i[n++]=d>>>8&255,i[n++]=d&255,i[n++]=d>>>24&15|16,i[n++]=d>>>16&255,i[n++]=s>>>8|128,i[n++]=s&255;for(let g=0;g<6;++g)i[n+g]=o[g];return e||(0,n6.unsafeStringify)(i)}var Tye=em.default=o6});var vS=Ke(SS=>{"use strict";Object.defineProperty(SS,"__esModule",{value:!0});SS.default=l6;var a6=c6(Tl()),s6=Pi();function c6(t){return t&&t.__esModule?t:{default:t}}function l6(t){let e=typeof t=="string"?(0,a6.default)(t):t,r=p6(e);return typeof t=="string"?(0,s6.unsafeStringify)(r):r}function p6(t,e=!1){return Uint8Array.of((t[6]&15)<<4|t[7]>>4&15,(t[7]&15)<<4|(t[4]&240)>>4,(t[4]&15)<<4|(t[5]&240)>>4,(t[5]&15)<<4|(t[0]&240)>>4,(t[0]&15)<<4|(t[1]&240)>>4,(t[1]&15)<<4|(t[2]&240)>>4,96|t[2]&15,t[3],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}});var bS=Ke(oa=>{"use strict";Object.defineProperty(oa,"__esModule",{value:!0});oa.URL=oa.DNS=void 0;oa.default=y6;var u6=Pi(),f6=m6(Tl());function m6(t){return t&&t.__esModule?t:{default:t}}function d6(t){t=unescape(encodeURIComponent(t));let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}var h6=oa.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",g6=oa.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function y6(t,e,r){function n(i,o,s,l){var p;if(typeof i=="string"&&(i=d6(i)),typeof o=="string"&&(o=(0,f6.default)(o)),((p=o)===null||p===void 0?void 0:p.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+i.length);if(u.set(o),u.set(i,o.length),u=r(u),u[6]=u[6]&15|e,u[8]=u[8]&63|128,s){l=l||0;for(let m=0;m<16;++m)s[l+m]=u[m];return s}return(0,u6.unsafeStringify)(u)}try{n.name=t}catch{}return n.DNS=h6,n.URL=g6,n}});var tA=Ke(tm=>{"use strict";Object.defineProperty(tm,"__esModule",{value:!0});tm.default=void 0;var x6=T6(require("node:crypto"));function T6(t){return t&&t.__esModule?t:{default:t}}function S6(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),x6.default.createHash("md5").update(t).digest()}var wye=tm.default=S6});var nA=Ke(rm=>{"use strict";Object.defineProperty(rm,"__esModule",{value:!0});rm.default=void 0;var v6=rA(bS()),b6=rA(tA());function rA(t){return t&&t.__esModule?t:{default:t}}var w6=(0,v6.default)("v3",48,b6.default),Eye=rm.default=w6});var iA=Ke(nm=>{"use strict";Object.defineProperty(nm,"__esModule",{value:!0});nm.default=void 0;var _6=E6(require("node:crypto"));function E6(t){return t&&t.__esModule?t:{default:t}}var kye=nm.default={randomUUID:_6.default.randomUUID}});var sA=Ke(im=>{"use strict";Object.defineProperty(im,"__esModule",{value:!0});im.default=void 0;var oA=aA(iA()),R6=aA(Xf()),k6=Pi();function aA(t){return t&&t.__esModule?t:{default:t}}function P6(t,e,r){if(oA.default.randomUUID&&!e&&!t)return oA.default.randomUUID();t=t||{};let n=t.random||(t.rng||R6.default)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return(0,k6.unsafeStringify)(n)}var Aye=im.default=P6});var cA=Ke(om=>{"use strict";Object.defineProperty(om,"__esModule",{value:!0});om.default=void 0;var A6=M6(require("node:crypto"));function M6(t){return t&&t.__esModule?t:{default:t}}function D6(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),A6.default.createHash("sha1").update(t).digest()}var Dye=om.default=D6});var pA=Ke(am=>{"use strict";Object.defineProperty(am,"__esModule",{value:!0});am.default=void 0;var F6=lA(bS()),I6=lA(cA());function lA(t){return t&&t.__esModule?t:{default:t}}var C6=(0,F6.default)("v5",80,I6.default),Iye=am.default=C6});var fA=Ke(wS=>{"use strict";Object.defineProperty(wS,"__esModule",{value:!0});wS.default=U6;var O6=Pi(),N6=uA(TS()),L6=uA(vS());function uA(t){return t&&t.__esModule?t:{default:t}}function U6(t={},e,r=0){let n=(0,N6.default)({...t,_v6:!0},new Uint8Array(16));if(n=(0,L6.default)(n),e){for(let i=0;i<16;i++)e[r+i]=n[i];return e}return(0,O6.unsafeStringify)(n)}});var mA=Ke(_S=>{"use strict";Object.defineProperty(_S,"__esModule",{value:!0});_S.default=W6;var H6=B6(Tl()),V6=Pi();function B6(t){return t&&t.__esModule?t:{default:t}}function W6(t){let e=typeof t=="string"?(0,H6.default)(t):t,r=$6(e);return typeof t=="string"?(0,V6.unsafeStringify)(r):r}function $6(t){return Uint8Array.of((t[3]&15)<<4|t[4]>>4&15,(t[4]&15)<<4|(t[5]&240)>>4,(t[5]&15)<<4|t[6]&15,t[7],(t[1]&15)<<4|(t[2]&240)>>4,(t[2]&15)<<4|(t[3]&240)>>4,16|(t[0]&240)>>4,(t[0]&15)<<4|(t[1]&240)>>4,t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}});var gA=Ke(sm=>{"use strict";Object.defineProperty(sm,"__esModule",{value:!0});sm.default=void 0;var j6=z6(Xf()),q6=Pi();function z6(t){return t&&t.__esModule?t:{default:t}}var dA=null,hA=null,Dn=0;function G6(t,e,r){t=t||{};let n=e&&r||0,i=e||new Uint8Array(16),o=t.random||(t.rng||j6.default)(),s=t.msecs!==void 0?t.msecs:Date.now(),l=t.seq!==void 0?t.seq:null,p=hA,u=dA;return s>Dn&&t.msecs===void 0&&(Dn=s,l!==null&&(p=null,u=null)),l!==null&&(l>2147483647&&(l=2147483647),p=l>>>19&4095,u=l&524287),(p===null||u===null)&&(p=o[6]&127,p=p<<8|o[7],u=o[8]&63,u=u<<8|o[9],u=u<<5|o[10]>>>3),s+1e4>Dn&&l===null?++u>524287&&(u=0,++p>4095&&(p=0,Dn++)):Dn=s,hA=p,dA=u,i[n++]=Dn/1099511627776&255,i[n++]=Dn/4294967296&255,i[n++]=Dn/16777216&255,i[n++]=Dn/65536&255,i[n++]=Dn/256&255,i[n++]=Dn&255,i[n++]=p>>>4&15|112,i[n++]=p&255,i[n++]=u>>>13&63|128,i[n++]=u>>>5&255,i[n++]=u<<3&255|o[10]&7,i[n++]=o[11],i[n++]=o[12],i[n++]=o[13],i[n++]=o[14],i[n++]=o[15],e||(0,q6.unsafeStringify)(i)}var Lye=sm.default=G6});var yA=Ke(cm=>{"use strict";Object.defineProperty(cm,"__esModule",{value:!0});cm.default=void 0;var K6=Q6(xl());function Q6(t){return t&&t.__esModule?t:{default:t}}function Z6(t){if(!(0,K6.default)(t))throw TypeError("Invalid UUID");return parseInt(t.slice(14,15),16)}var Hye=cm.default=Z6});var xA=Ke(Gt=>{"use strict";Object.defineProperty(Gt,"__esModule",{value:!0});Object.defineProperty(Gt,"MAX",{enumerable:!0,get:function(){return Y6.default}});Object.defineProperty(Gt,"NIL",{enumerable:!0,get:function(){return X6.default}});Object.defineProperty(Gt,"parse",{enumerable:!0,get:function(){return J6.default}});Object.defineProperty(Gt,"stringify",{enumerable:!0,get:function(){return e9.default}});Object.defineProperty(Gt,"v1",{enumerable:!0,get:function(){return t9.default}});Object.defineProperty(Gt,"v1ToV6",{enumerable:!0,get:function(){return r9.default}});Object.defineProperty(Gt,"v3",{enumerable:!0,get:function(){return n9.default}});Object.defineProperty(Gt,"v4",{enumerable:!0,get:function(){return i9.default}});Object.defineProperty(Gt,"v5",{enumerable:!0,get:function(){return o9.default}});Object.defineProperty(Gt,"v6",{enumerable:!0,get:function(){return a9.default}});Object.defineProperty(Gt,"v6ToV1",{enumerable:!0,get:function(){return s9.default}});Object.defineProperty(Gt,"v7",{enumerable:!0,get:function(){return c9.default}});Object.defineProperty(Gt,"validate",{enumerable:!0,get:function(){return l9.default}});Object.defineProperty(Gt,"version",{enumerable:!0,get:function(){return p9.default}});var Y6=wr(YP()),X6=wr(XP()),J6=wr(Tl()),e9=wr(Pi()),t9=wr(TS()),r9=wr(vS()),n9=wr(nA()),i9=wr(sA()),o9=wr(pA()),a9=wr(fA()),s9=wr(mA()),c9=wr(gA()),l9=wr(xl()),p9=wr(yA());function wr(t){return t&&t.__esModule?t:{default:t}}});var bA=Ke((vA,pm)=>{(function(t,e){typeof pm=="object"&&pm.exports?pm.exports=e():t.nearley=e()})(vA,function(){function t(p,u,m){return this.id=++t.highestId,this.name=p,this.symbols=u,this.postprocess=m,this}t.highestId=0,t.prototype.toString=function(p){var u=typeof p>"u"?this.symbols.map(l).join(" "):this.symbols.slice(0,p).map(l).join(" ")+" \u25CF "+this.symbols.slice(p).map(l).join(" ");return this.name+" \u2192 "+u};function e(p,u,m,d){this.rule=p,this.dot=u,this.reference=m,this.data=[],this.wantedBy=d,this.isComplete=this.dot===p.symbols.length}e.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},e.prototype.nextState=function(p){var u=new e(this.rule,this.dot+1,this.reference,this.wantedBy);return u.left=this,u.right=p,u.isComplete&&(u.data=u.build(),u.right=void 0),u},e.prototype.build=function(){var p=[],u=this;do p.push(u.right.data),u=u.left;while(u.left);return p.reverse(),p},e.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,o.fail))};function r(p,u){this.grammar=p,this.index=u,this.states=[],this.wants={},this.scannable=[],this.completed={}}r.prototype.process=function(p){for(var u=this.states,m=this.wants,d=this.completed,g=0;g<u.length;g++){var x=u[g];if(x.isComplete){if(x.finish(),x.data!==o.fail){for(var b=x.wantedBy,v=b.length;v--;){var I=b[v];this.complete(I,x)}if(x.reference===this.index){var F=x.rule.name;(this.completed[F]=this.completed[F]||[]).push(x)}}}else{var F=x.rule.symbols[x.dot];if(typeof F!="string"){this.scannable.push(x);continue}if(m[F]){if(m[F].push(x),d.hasOwnProperty(F))for(var U=d[F],v=0;v<U.length;v++){var K=U[v];this.complete(x,K)}}else m[F]=[x],this.predict(F)}}},r.prototype.predict=function(p){for(var u=this.grammar.byName[p]||[],m=0;m<u.length;m++){var d=u[m],g=this.wants[p],x=new e(d,0,this.index,g);this.states.push(x)}},r.prototype.complete=function(p,u){var m=p.nextState(u);this.states.push(m)};function n(p,u){this.rules=p,this.start=u||this.rules[0].name;var m=this.byName={};this.rules.forEach(function(d){m.hasOwnProperty(d.name)||(m[d.name]=[]),m[d.name].push(d)})}n.fromCompiled=function(d,u){var m=d.Lexer;d.ParserStart&&(u=d.ParserStart,d=d.ParserRules);var d=d.map(function(x){return new t(x.name,x.symbols,x.postprocess)}),g=new n(d,u);return g.lexer=m,g};function i(){this.reset("")}i.prototype.reset=function(p,u){this.buffer=p,this.index=0,this.line=u?u.line:1,this.lastLineBreak=u?-u.col:0},i.prototype.next=function(){if(this.index<this.buffer.length){var p=this.buffer[this.index++];return p===`
`&&(this.line+=1,this.lastLineBreak=this.index),{value:p}}},i.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},i.prototype.formatError=function(p,u){var m=this.buffer;if(typeof m=="string"){var d=m.split(`
`).slice(Math.max(0,this.line-5),this.line),g=m.indexOf(`
`,this.index);g===-1&&(g=m.length);var x=this.index-this.lastLineBreak,b=String(this.line).length;return u+=" at line "+this.line+" col "+x+`:

`,u+=d.map(function(I,F){return v(this.line-d.length+F+1,b)+" "+I},this).join(`
`),u+=`
`+v("",b+x)+`^
`,u}else return u+" at index "+(this.index-1);function v(I,F){var U=String(I);return Array(F-U.length+1).join(" ")+U}};function o(p,u,m){if(p instanceof n)var d=p,m=u;else var d=n.fromCompiled(p,u);this.grammar=d,this.options={keepHistory:!1,lexer:d.lexer||new i};for(var g in m||{})this.options[g]=m[g];this.lexer=this.options.lexer,this.lexerState=void 0;var x=new r(d,0),b=this.table=[x];x.wants[d.start]=[],x.predict(d.start),x.process(),this.current=0}o.fail={},o.prototype.feed=function(p){var u=this.lexer;u.reset(p,this.lexerState);for(var m;;){try{if(m=u.next(),!m)break}catch(se){var b=new r(this.grammar,this.current+1);this.table.push(b);var d=new Error(this.reportLexerError(se));throw d.offset=this.current,d.token=se.token,d}var g=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var x=this.current+1,b=new r(this.grammar,x);this.table.push(b);for(var v=m.text!==void 0?m.text:m.value,I=u.constructor===i?m.value:u.transform?.(m)??m,F=g.scannable,U=F.length;U--;){var K=F[U],ne=K.rule.symbols[K.dot];if(ne.test?ne.test(I):ne.type?ne.type===m.type:ne.literal===v){var ie=K.nextState({data:I,token:m,isToken:!0,reference:x-1});b.states.push(ie)}}if(b.process(),b.states.length===0){var d=new Error(this.reportError(m));throw d.offset=this.current,d.token=m,d}this.options.keepHistory&&(g.lexerState=u.save()),this.current++}return g&&(this.lexerState=u.save()),this.results=this.finish(),this},o.prototype.reportLexerError=function(p){var u,m,d=p.token;return d?(u="input "+JSON.stringify(d.text[0])+" (lexer error)",m=this.lexer.formatError(d,"Syntax error")):(u="input (lexer error)",m=p.message),this.reportErrorCommon(m,u)},o.prototype.reportError=function(p){var u=(p.type?p.type+" token: ":"")+JSON.stringify(p.value!==void 0?p.value:p),m=this.lexer.formatError(p,"Syntax error");return this.reportErrorCommon(m,u)},o.prototype.reportErrorCommon=function(p,u){var m=[];m.push(p);var d=this.table.length-2,g=this.table[d],x=g.states.filter(function(v){var I=v.rule.symbols[v.dot];return I&&typeof I!="string"});if(x.length===0)m.push("Unexpected "+u+`. I did not expect any more input. Here is the state of my parse table:
`),this.displayStateStack(g.states,m);else{m.push("Unexpected "+u+`. Instead, I was expecting to see one of the following:
`);var b=x.map(function(v){return this.buildFirstStateStack(v,[])||[v]},this);b.forEach(function(v){var I=v[0],F=I.rule.symbols[I.dot],U=this.getSymbolDisplay(F);m.push("A "+U+" based on:"),this.displayStateStack(v,m)},this)}return m.push(""),m.join(`
`)},o.prototype.displayStateStack=function(p,u){for(var m,d=0,g=0;g<p.length;g++){var x=p[g],b=x.rule.toString(x.dot);b===m?d++:(d>0&&u.push("    ^ "+d+" more lines identical to this"),d=0,u.push("    "+b)),m=b}},o.prototype.getSymbolDisplay=function(p){return s(p)},o.prototype.buildFirstStateStack=function(p,u){if(u.indexOf(p)!==-1)return null;if(p.wantedBy.length===0)return[p];var m=p.wantedBy[0],d=[p].concat(u),g=this.buildFirstStateStack(m,d);return g===null?null:[p].concat(g)},o.prototype.save=function(){var p=this.table[this.current];return p.lexerState=this.lexerState,p},o.prototype.restore=function(p){var u=p.index;this.current=u,this.table[u]=p,this.table.splice(u+1),this.lexerState=p.lexerState,this.results=this.finish()},o.prototype.rewind=function(p){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[p])},o.prototype.finish=function(){var p=[],u=this.grammar.start,m=this.table[this.table.length-1];return m.states.forEach(function(d){d.rule.name===u&&d.dot===d.rule.symbols.length&&d.reference===0&&d.data!==o.fail&&p.push(d)}),p.map(function(d){return d.data})};function s(p){var u=typeof p;if(u==="string")return p;if(u==="object"){if(p.literal)return JSON.stringify(p.literal);if(p instanceof RegExp)return"character matching "+p;if(p.type)return p.type+" token";if(p.test)return"token matching "+String(p.test);throw new Error("Unknown symbol type: "+p)}}function l(p){var u=typeof p;if(u==="string")return p;if(u==="object"){if(p.literal)return JSON.stringify(p.literal);if(p instanceof RegExp)return p.toString();if(p.type)return"%"+p.type;if(p.test)return"<"+String(p.test)+">";throw new Error("Unknown symbol type: "+p)}}return{Parser:o,Grammar:n,Rule:t}})});var PA=Ke((kA,mm)=>{(function(t,e){typeof define=="function"&&define.amd?define([],e):typeof mm=="object"&&mm.exports?mm.exports=e():t.moo=e()})(kA,function(){"use strict";var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,r=typeof new RegExp().sticky=="boolean";function n(N){return N&&e.call(N)==="[object RegExp]"}function i(N){return N&&typeof N=="object"&&!n(N)&&!Array.isArray(N)}function o(N){return N.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function s(N){var O=new RegExp("|"+N);return O.exec("").length-1}function l(N){return"("+N+")"}function p(N){if(!N.length)return"(?!)";var O=N.map(function(D){return"(?:"+D+")"}).join("|");return"(?:"+O+")"}function u(N){if(typeof N=="string")return"(?:"+o(N)+")";if(n(N)){if(N.ignoreCase)throw new Error("RegExp /i flag not allowed");if(N.global)throw new Error("RegExp /g flag is implied");if(N.sticky)throw new Error("RegExp /y flag is implied");if(N.multiline)throw new Error("RegExp /m flag is implied");return N.source}else throw new Error("Not a pattern: "+N)}function m(N,O){return N.length>O?N:Array(O-N.length+1).join(" ")+N}function d(N,O){for(var D=N.length,$=0;;){var z=N.lastIndexOf(`
`,D-1);if(z===-1||($++,D=z,$===O)||D===0)break}var Q=$<O?0:D+1;return N.substring(Q).split(`
`)}function g(N){for(var O=Object.getOwnPropertyNames(N),D=[],$=0;$<O.length;$++){var z=O[$],Q=N[z],Z=[].concat(Q);if(z==="include"){for(var te=0;te<Z.length;te++)D.push({include:Z[te]});continue}var he=[];Z.forEach(function(re){i(re)?(he.length&&D.push(b(z,he)),D.push(b(z,re)),he=[]):he.push(re)}),he.length&&D.push(b(z,he))}return D}function x(N){for(var O=[],D=0;D<N.length;D++){var $=N[D];if($.include){for(var z=[].concat($.include),Q=0;Q<z.length;Q++)O.push({include:z[Q]});continue}if(!$.type)throw new Error("Rule has no type: "+JSON.stringify($));O.push(b($.type,$))}return O}function b(N,O){if(i(O)||(O={match:O}),O.include)throw new Error("Matching rules cannot also include states");var D={defaultType:N,lineBreaks:!!O.error||!!O.fallback,pop:!1,next:null,push:null,error:!1,fallback:!1,value:null,type:null,shouldThrow:!1};for(var $ in O)t.call(O,$)&&(D[$]=O[$]);if(typeof D.type=="string"&&N!==D.type)throw new Error("Type transform cannot be a string (type '"+D.type+"' for token '"+N+"')");var z=D.match;return D.match=Array.isArray(z)?z:z?[z]:[],D.match.sort(function(Q,Z){return n(Q)&&n(Z)?0:n(Z)?-1:n(Q)?1:Z.length-Q.length}),D}function v(N){return Array.isArray(N)?x(N):g(N)}var I=b("error",{lineBreaks:!0,shouldThrow:!0});function F(N,O){for(var D=null,$=Object.create(null),z=!0,Q=null,Z=[],te=[],he=0;he<N.length;he++)N[he].fallback&&(z=!1);for(var he=0;he<N.length;he++){var re=N[he];if(re.include)throw new Error("Inheritance is not allowed in stateless lexers");if(re.error||re.fallback){if(D)throw!re.fallback==!D.fallback?new Error("Multiple "+(re.fallback?"fallback":"error")+" rules not allowed (for token '"+re.defaultType+"')"):new Error("fallback and error are mutually exclusive (for token '"+re.defaultType+"')");D=re}var Re=re.match.slice();if(z)for(;Re.length&&typeof Re[0]=="string"&&Re[0].length===1;){var ur=Re.shift();$[ur.charCodeAt(0)]=re}if(re.pop||re.push||re.next){if(!O)throw new Error("State-switching options are not allowed in stateless lexers (for token '"+re.defaultType+"')");if(re.fallback)throw new Error("State-switching options are not allowed on fallback tokens (for token '"+re.defaultType+"')")}if(Re.length!==0){z=!1,Z.push(re);for(var ui=0;ui<Re.length;ui++){var fr=Re[ui];if(n(fr)){if(Q===null)Q=fr.unicode;else if(Q!==fr.unicode&&re.fallback===!1)throw new Error("If one rule is /u then all must be")}}var vn=p(Re.map(u)),Ar=new RegExp(vn);if(Ar.test(""))throw new Error("RegExp matches empty string: "+Ar);var bn=s(vn);if(bn>0)throw new Error("RegExp has capture groups: "+Ar+`
Use (?: \u2026 ) instead`);if(!re.lineBreaks&&Ar.test(`
`))throw new Error("Rule should declare lineBreaks: "+Ar);te.push(l(vn))}}var Qr=D&&D.fallback,Io=r&&!Qr?"ym":"gm",fi=r||Qr?"":"|";Q===!0&&(Io+="u");var Da=new RegExp(p(te)+fi,Io);return{regexp:Da,groups:Z,fast:$,error:D||I}}function U(N){var O=F(v(N));return new se({start:O},"start")}function K(N,O,D){var $=N&&(N.push||N.next);if($&&!D[$])throw new Error("Missing state '"+$+"' (in token '"+N.defaultType+"' of state '"+O+"')");if(N&&N.pop&&+N.pop!=1)throw new Error("pop must be 1 (in token '"+N.defaultType+"' of state '"+O+"')")}function ne(N,O){var D=N.$all?v(N.$all):[];delete N.$all;var $=Object.getOwnPropertyNames(N);O||(O=$[0]);for(var z=Object.create(null),Q=0;Q<$.length;Q++){var Z=$[Q];z[Z]=v(N[Z]).concat(D)}for(var Q=0;Q<$.length;Q++)for(var Z=$[Q],te=z[Z],he=Object.create(null),re=0;re<te.length;re++){var Re=te[re];if(Re.include){var ur=[re,1];if(Re.include!==Z&&!he[Re.include]){he[Re.include]=!0;var ui=z[Re.include];if(!ui)throw new Error("Cannot include nonexistent state '"+Re.include+"' (in state '"+Z+"')");for(var fr=0;fr<ui.length;fr++){var vn=ui[fr];te.indexOf(vn)===-1&&ur.push(vn)}}te.splice.apply(te,ur),re--}}for(var Ar=Object.create(null),Q=0;Q<$.length;Q++){var Z=$[Q];Ar[Z]=F(z[Z],!0)}for(var Q=0;Q<$.length;Q++){for(var bn=$[Q],Qr=Ar[bn],Io=Qr.groups,re=0;re<Io.length;re++)K(Io[re],bn,Ar);for(var fi=Object.getOwnPropertyNames(Qr.fast),re=0;re<fi.length;re++)K(Qr.fast[fi[re]],bn,Ar)}return new se(Ar,O)}function ie(N){for(var O=typeof Map<"u",D=O?new Map:Object.create(null),$=Object.getOwnPropertyNames(N),z=0;z<$.length;z++){var Q=$[z],Z=N[Q],te=Array.isArray(Z)?Z:[Z];te.forEach(function(he){if(typeof he!="string")throw new Error("keyword must be string (in keyword '"+Q+"')");O?D.set(he,Q):D[he]=Q})}return function(he){return O?D.get(he):D[he]}}var se=function(N,O){this.startState=O,this.states=N,this.buffer="",this.stack=[],this.reset()};se.prototype.reset=function(N,O){return this.buffer=N||"",this.index=0,this.line=O?O.line:1,this.col=O?O.col:1,this.queuedToken=O?O.queuedToken:null,this.queuedText=O?O.queuedText:"",this.queuedThrow=O?O.queuedThrow:null,this.setState(O?O.state:this.startState),this.stack=O&&O.stack?O.stack.slice():[],this},se.prototype.save=function(){return{line:this.line,col:this.col,state:this.state,stack:this.stack.slice(),queuedToken:this.queuedToken,queuedText:this.queuedText,queuedThrow:this.queuedThrow}},se.prototype.setState=function(N){if(!(!N||this.state===N)){this.state=N;var O=this.states[N];this.groups=O.groups,this.error=O.error,this.re=O.regexp,this.fast=O.fast}},se.prototype.popState=function(){this.setState(this.stack.pop())},se.prototype.pushState=function(N){this.stack.push(this.state),this.setState(N)};var it=r?function(N,O){return N.exec(O)}:function(N,O){var D=N.exec(O);return D[0].length===0?null:D};se.prototype._getGroup=function(N){for(var O=this.groups.length,D=0;D<O;D++)if(N[D+1]!==void 0)return this.groups[D];throw new Error("Cannot find token type for matched text")};function Ct(){return this.value}if(se.prototype.next=function(){var N=this.index;if(this.queuedGroup){var O=this._token(this.queuedGroup,this.queuedText,N);return this.queuedGroup=null,this.queuedText="",O}var D=this.buffer;if(N!==D.length){var Z=this.fast[D.charCodeAt(N)];if(Z)return this._token(Z,D.charAt(N),N);var $=this.re;$.lastIndex=N;var z=it($,D),Q=this.error;if(z==null)return this._token(Q,D.slice(N,D.length),N);var Z=this._getGroup(z),te=z[0];return Q.fallback&&z.index!==N?(this.queuedGroup=Z,this.queuedText=te,this._token(Q,D.slice(N,z.index),N)):this._token(Z,te,N)}},se.prototype._token=function(N,O,D){var $=0;if(N.lineBreaks){var z=/\n/g,Q=1;if(O===`
`)$=1;else for(;z.exec(O);)$++,Q=z.lastIndex}var Z={type:typeof N.type=="function"&&N.type(O)||N.defaultType,value:typeof N.value=="function"?N.value(O):O,text:O,toString:Ct,offset:D,lineBreaks:$,line:this.line,col:this.col},te=O.length;if(this.index+=te,this.line+=$,$!==0?this.col=te-Q+1:this.col+=te,N.shouldThrow){var he=new Error(this.formatError(Z,"invalid syntax"));throw he}return N.pop?this.popState():N.push?this.pushState(N.push):N.next&&this.setState(N.next),Z},typeof Symbol<"u"&&Symbol.iterator){var ct=function(N){this.lexer=N};ct.prototype.next=function(){var N=this.lexer.next();return{value:N,done:!N}},ct.prototype[Symbol.iterator]=function(){return this},se.prototype[Symbol.iterator]=function(){return new ct(this)}}return se.prototype.formatError=function(N,O){if(N==null)var D=this.buffer.slice(this.index),N={text:D,offset:this.index,lineBreaks:D.indexOf(`
`)===-1?0:1,line:this.line,col:this.col};var $=2,z=Math.max(N.line-$,1),Q=N.line+$,Z=String(Q).length,te=d(this.buffer,this.line-N.line+$+1).slice(0,5),he=[];he.push(O+" at line "+N.line+" col "+N.col+":"),he.push("");for(var re=0;re<te.length;re++){var Re=te[re],ur=z+re;he.push(m(String(ur),Z)+"  "+Re),ur===N.line&&he.push(m("",Z+N.col+1)+"^")}return he.join(`
`)},se.prototype.clone=function(){return new se(this.states,this.state)},se.prototype.has=function(N){return!0},{compile:U,states:ne,error:Object.freeze({error:!0}),fallback:Object.freeze({fallback:!0}),keywords:ie}})});var kl=Ke((Zn,vM)=>{"use strict";Object.defineProperty(Zn,"__esModule",{value:!0});function Fn(t){return typeof t=="object"&&!("toString"in t)?Object.prototype.toString.call(t).slice(8,-1):t}var D5=typeof process=="object"&&process.env.NODE_ENV==="production";function un(t,e){if(!t)throw D5?new Error("Invariant failed"):new Error(e())}Zn.invariant=un;var KS=Object.prototype.hasOwnProperty,F5=Array.prototype.splice,I5=Object.prototype.toString;function ca(t){return I5.call(t).slice(8,-1)}var $m=Object.assign||function(t,e){return QS(e).forEach(function(r){KS.call(e,r)&&(t[r]=e[r])}),t},QS=typeof Object.getOwnPropertySymbols=="function"?function(t){return Object.keys(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.keys(t)};function go(t){return Array.isArray(t)?$m(t.constructor(t.length),t):ca(t)==="Map"?new Map(t):ca(t)==="Set"?new Set(t):t&&typeof t=="object"?$m(Object.create(Object.getPrototypeOf(t)),t):t}var TM=function(){function t(){this.commands=$m({},C5),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(e,r){return e===r},this.update.newContext=function(){return new t().update}}return Object.defineProperty(t.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(e){this.update.isEquals=e},enumerable:!0,configurable:!0}),t.prototype.extend=function(e,r){this.commands[e]=r},t.prototype.update=function(e,r){var n=this,i=typeof r=="function"?{$apply:r}:r;Array.isArray(e)&&Array.isArray(i)||un(!Array.isArray(i),function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."}),un(typeof i=="object"&&i!==null,function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the "+("following commands: "+Object.keys(n.commands).join(", ")+".")});var o=e;return QS(i).forEach(function(s){if(KS.call(n.commands,s)){var l=e===o;o=n.commands[s](i[s],o,i,e),l&&n.isEquals(o,e)&&(o=e)}else{var p=ca(e)==="Map"?n.update(e.get(s),i[s]):n.update(e[s],i[s]),u=ca(o)==="Map"?o.get(s):o[s];(!n.isEquals(p,u)||typeof p>"u"&&!KS.call(e,s))&&(o===e&&(o=go(e)),ca(o)==="Map"?o.set(s,p):o[s]=p)}}),o},t}();Zn.Context=TM;var C5={$push:function(t,e,r){return yM(e,r,"$push"),t.length?e.concat(t):e},$unshift:function(t,e,r){return yM(e,r,"$unshift"),t.length?t.concat(e):e},$splice:function(t,e,r,n){return O5(e,r),t.forEach(function(i){SM(i),e===n&&i.length&&(e=go(n)),F5.apply(e,i)}),e},$set:function(t,e,r){return L5(r),t},$toggle:function(t,e){Rl(t,"$toggle");var r=t.length?go(e):e;return t.forEach(function(n){r[n]=!e[n]}),r},$unset:function(t,e,r,n){return Rl(t,"$unset"),t.forEach(function(i){Object.hasOwnProperty.call(e,i)&&(e===n&&(e=go(n)),delete e[i])}),e},$add:function(t,e,r,n){return xM(e,"$add"),Rl(t,"$add"),ca(e)==="Map"?t.forEach(function(i){var o=i[0],s=i[1];e===n&&e.get(o)!==s&&(e=go(n)),e.set(o,s)}):t.forEach(function(i){e===n&&!e.has(i)&&(e=go(n)),e.add(i)}),e},$remove:function(t,e,r,n){return xM(e,"$remove"),Rl(t,"$remove"),t.forEach(function(i){e===n&&e.has(i)&&(e=go(n)),e.delete(i)}),e},$merge:function(t,e,r,n){return U5(e,t),QS(t).forEach(function(i){t[i]!==e[i]&&(e===n&&(e=go(n)),e[i]=t[i])}),e},$apply:function(t,e){return N5(t),t(e)}},ZS=new TM;Zn.isEquals=ZS.update.isEquals;Zn.extend=ZS.extend;Zn.default=ZS.update;Zn.default.default=vM.exports=$m(Zn.default,Zn);function yM(t,e,r){un(Array.isArray(t),function(){return"update(): expected target of "+Fn(r)+" to be an array; got "+Fn(t)+"."}),Rl(e[r],r)}function Rl(t,e){un(Array.isArray(t),function(){return"update(): expected spec of "+Fn(e)+" to be an array; got "+Fn(t)+". Did you forget to wrap your parameter in an array?"})}function O5(t,e){un(Array.isArray(t),function(){return"Expected $splice target to be an array; got "+Fn(t)}),SM(e.$splice)}function SM(t){un(Array.isArray(t),function(){return"update(): expected spec of $splice to be an array of arrays; got "+Fn(t)+". Did you forget to wrap your parameters in an array?"})}function N5(t){un(typeof t=="function",function(){return"update(): expected spec of $apply to be a function; got "+Fn(t)+"."})}function L5(t){un(Object.keys(t).length===1,function(){return"Cannot have more than one key in an object with $set"})}function U5(t,e){un(e&&typeof e=="object",function(){return"update(): $merge expects a spec of type 'object'; got "+Fn(e)}),un(t&&typeof t=="object",function(){return"update(): $merge expects a target of type 'object'; got "+Fn(t)})}function xM(t,e){var r=ca(t);un(r==="Map"||r==="Set",function(){return"update(): "+Fn(e)+" expects a target of type Set or Map; got "+Fn(r)})}});var ub=Ke((lc,hp)=>{(function(){var t,e="4.17.21",r=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",i="Expected a function",o="Invalid `variable` option passed into `_.template`",s="__lodash_hash_undefined__",l=500,p="__lodash_placeholder__",u=1,m=2,d=4,g=1,x=2,b=1,v=2,I=4,F=8,U=16,K=32,ne=64,ie=128,se=256,it=512,Ct=30,ct="...",N=800,O=16,D=1,$=2,z=3,Q=1/0,Z=9007199254740991,te=17976931348623157e292,he=NaN,re=4294967295,Re=re-1,ur=re>>>1,ui=[["ary",ie],["bind",b],["bindKey",v],["curry",F],["curryRight",U],["flip",it],["partial",K],["partialRight",ne],["rearg",se]],fr="[object Arguments]",vn="[object Array]",Ar="[object AsyncFunction]",bn="[object Boolean]",Qr="[object Date]",Io="[object DOMException]",fi="[object Error]",Da="[object Function]",Cw="[object GeneratorFunction]",wn="[object Map]",Ec="[object Number]",L1="[object Null]",mi="[object Object]",Ow="[object Promise]",U1="[object Proxy]",Rc="[object RegExp]",_n="[object Set]",kc="[object String]",jp="[object Symbol]",H1="[object Undefined]",Pc="[object WeakMap]",V1="[object WeakSet]",Ac="[object ArrayBuffer]",Fa="[object DataView]",zy="[object Float32Array]",Gy="[object Float64Array]",Ky="[object Int8Array]",Qy="[object Int16Array]",Zy="[object Int32Array]",Yy="[object Uint8Array]",Xy="[object Uint8ClampedArray]",Jy="[object Uint16Array]",ex="[object Uint32Array]",B1=/\b__p \+= '';/g,W1=/\b(__p \+=) '' \+/g,$1=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Nw=/&(?:amp|lt|gt|quot|#39);/g,Lw=/[&<>"']/g,j1=RegExp(Nw.source),q1=RegExp(Lw.source),z1=/<%-([\s\S]+?)%>/g,G1=/<%([\s\S]+?)%>/g,Uw=/<%=([\s\S]+?)%>/g,K1=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Q1=/^\w*$/,Z1=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,tx=/[\\^$.*+?()[\]{}|]/g,Y1=RegExp(tx.source),rx=/^\s+/,X1=/\s/,J1=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,eO=/\{\n\/\* \[wrapped with (.+)\] \*/,tO=/,? & /,rO=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,nO=/[()=,{}\[\]\/\s]/,iO=/\\(\\)?/g,oO=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Hw=/\w*$/,aO=/^[-+]0x[0-9a-f]+$/i,sO=/^0b[01]+$/i,cO=/^\[object .+?Constructor\]$/,lO=/^0o[0-7]+$/i,pO=/^(?:0|[1-9]\d*)$/,uO=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,qp=/($^)/,fO=/['\n\r\u2028\u2029\\]/g,zp="\\ud800-\\udfff",mO="\\u0300-\\u036f",dO="\\ufe20-\\ufe2f",hO="\\u20d0-\\u20ff",Vw=mO+dO+hO,Bw="\\u2700-\\u27bf",Ww="a-z\\xdf-\\xf6\\xf8-\\xff",gO="\\xac\\xb1\\xd7\\xf7",yO="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",xO="\\u2000-\\u206f",TO=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",$w="A-Z\\xc0-\\xd6\\xd8-\\xde",jw="\\ufe0e\\ufe0f",qw=gO+yO+xO+TO,nx="['\u2019]",SO="["+zp+"]",zw="["+qw+"]",Gp="["+Vw+"]",Gw="\\d+",vO="["+Bw+"]",Kw="["+Ww+"]",Qw="[^"+zp+qw+Gw+Bw+Ww+$w+"]",ix="\\ud83c[\\udffb-\\udfff]",bO="(?:"+Gp+"|"+ix+")",Zw="[^"+zp+"]",ox="(?:\\ud83c[\\udde6-\\uddff]){2}",ax="[\\ud800-\\udbff][\\udc00-\\udfff]",Ia="["+$w+"]",Yw="\\u200d",Xw="(?:"+Kw+"|"+Qw+")",wO="(?:"+Ia+"|"+Qw+")",Jw="(?:"+nx+"(?:d|ll|m|re|s|t|ve))?",e_="(?:"+nx+"(?:D|LL|M|RE|S|T|VE))?",t_=bO+"?",r_="["+jw+"]?",_O="(?:"+Yw+"(?:"+[Zw,ox,ax].join("|")+")"+r_+t_+")*",EO="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",RO="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",n_=r_+t_+_O,kO="(?:"+[vO,ox,ax].join("|")+")"+n_,PO="(?:"+[Zw+Gp+"?",Gp,ox,ax,SO].join("|")+")",AO=RegExp(nx,"g"),MO=RegExp(Gp,"g"),sx=RegExp(ix+"(?="+ix+")|"+PO+n_,"g"),DO=RegExp([Ia+"?"+Kw+"+"+Jw+"(?="+[zw,Ia,"$"].join("|")+")",wO+"+"+e_+"(?="+[zw,Ia+Xw,"$"].join("|")+")",Ia+"?"+Xw+"+"+Jw,Ia+"+"+e_,RO,EO,Gw,kO].join("|"),"g"),FO=RegExp("["+Yw+zp+Vw+jw+"]"),IO=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,CO=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],OO=-1,Ye={};Ye[zy]=Ye[Gy]=Ye[Ky]=Ye[Qy]=Ye[Zy]=Ye[Yy]=Ye[Xy]=Ye[Jy]=Ye[ex]=!0,Ye[fr]=Ye[vn]=Ye[Ac]=Ye[bn]=Ye[Fa]=Ye[Qr]=Ye[fi]=Ye[Da]=Ye[wn]=Ye[Ec]=Ye[mi]=Ye[Rc]=Ye[_n]=Ye[kc]=Ye[Pc]=!1;var Qe={};Qe[fr]=Qe[vn]=Qe[Ac]=Qe[Fa]=Qe[bn]=Qe[Qr]=Qe[zy]=Qe[Gy]=Qe[Ky]=Qe[Qy]=Qe[Zy]=Qe[wn]=Qe[Ec]=Qe[mi]=Qe[Rc]=Qe[_n]=Qe[kc]=Qe[jp]=Qe[Yy]=Qe[Xy]=Qe[Jy]=Qe[ex]=!0,Qe[fi]=Qe[Da]=Qe[Pc]=!1;var NO={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},LO={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},UO={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},HO={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},VO=parseFloat,BO=parseInt,i_=typeof global=="object"&&global&&global.Object===Object&&global,WO=typeof self=="object"&&self&&self.Object===Object&&self,kt=i_||WO||Function("return this")(),cx=typeof lc=="object"&&lc&&!lc.nodeType&&lc,Co=cx&&typeof hp=="object"&&hp&&!hp.nodeType&&hp,o_=Co&&Co.exports===cx,lx=o_&&i_.process,Zr=function(){try{var P=Co&&Co.require&&Co.require("util").types;return P||lx&&lx.binding&&lx.binding("util")}catch{}}(),a_=Zr&&Zr.isArrayBuffer,s_=Zr&&Zr.isDate,c_=Zr&&Zr.isMap,l_=Zr&&Zr.isRegExp,p_=Zr&&Zr.isSet,u_=Zr&&Zr.isTypedArray;function Mr(P,H,L){switch(L.length){case 0:return P.call(H);case 1:return P.call(H,L[0]);case 2:return P.call(H,L[0],L[1]);case 3:return P.call(H,L[0],L[1],L[2])}return P.apply(H,L)}function $O(P,H,L,ee){for(var ye=-1,Ve=P==null?0:P.length;++ye<Ve;){var vt=P[ye];H(ee,vt,L(vt),P)}return ee}function Yr(P,H){for(var L=-1,ee=P==null?0:P.length;++L<ee&&H(P[L],L,P)!==!1;);return P}function jO(P,H){for(var L=P==null?0:P.length;L--&&H(P[L],L,P)!==!1;);return P}function f_(P,H){for(var L=-1,ee=P==null?0:P.length;++L<ee;)if(!H(P[L],L,P))return!1;return!0}function Vi(P,H){for(var L=-1,ee=P==null?0:P.length,ye=0,Ve=[];++L<ee;){var vt=P[L];H(vt,L,P)&&(Ve[ye++]=vt)}return Ve}function Kp(P,H){var L=P==null?0:P.length;return!!L&&Ca(P,H,0)>-1}function px(P,H,L){for(var ee=-1,ye=P==null?0:P.length;++ee<ye;)if(L(H,P[ee]))return!0;return!1}function et(P,H){for(var L=-1,ee=P==null?0:P.length,ye=Array(ee);++L<ee;)ye[L]=H(P[L],L,P);return ye}function Bi(P,H){for(var L=-1,ee=H.length,ye=P.length;++L<ee;)P[ye+L]=H[L];return P}function ux(P,H,L,ee){var ye=-1,Ve=P==null?0:P.length;for(ee&&Ve&&(L=P[++ye]);++ye<Ve;)L=H(L,P[ye],ye,P);return L}function qO(P,H,L,ee){var ye=P==null?0:P.length;for(ee&&ye&&(L=P[--ye]);ye--;)L=H(L,P[ye],ye,P);return L}function fx(P,H){for(var L=-1,ee=P==null?0:P.length;++L<ee;)if(H(P[L],L,P))return!0;return!1}var zO=mx("length");function GO(P){return P.split("")}function KO(P){return P.match(rO)||[]}function m_(P,H,L){var ee;return L(P,function(ye,Ve,vt){if(H(ye,Ve,vt))return ee=Ve,!1}),ee}function Qp(P,H,L,ee){for(var ye=P.length,Ve=L+(ee?1:-1);ee?Ve--:++Ve<ye;)if(H(P[Ve],Ve,P))return Ve;return-1}function Ca(P,H,L){return H===H?aN(P,H,L):Qp(P,d_,L)}function QO(P,H,L,ee){for(var ye=L-1,Ve=P.length;++ye<Ve;)if(ee(P[ye],H))return ye;return-1}function d_(P){return P!==P}function h_(P,H){var L=P==null?0:P.length;return L?hx(P,H)/L:he}function mx(P){return function(H){return H==null?t:H[P]}}function dx(P){return function(H){return P==null?t:P[H]}}function g_(P,H,L,ee,ye){return ye(P,function(Ve,vt,Ge){L=ee?(ee=!1,Ve):H(L,Ve,vt,Ge)}),L}function ZO(P,H){var L=P.length;for(P.sort(H);L--;)P[L]=P[L].value;return P}function hx(P,H){for(var L,ee=-1,ye=P.length;++ee<ye;){var Ve=H(P[ee]);Ve!==t&&(L=L===t?Ve:L+Ve)}return L}function gx(P,H){for(var L=-1,ee=Array(P);++L<P;)ee[L]=H(L);return ee}function YO(P,H){return et(H,function(L){return[L,P[L]]})}function y_(P){return P&&P.slice(0,v_(P)+1).replace(rx,"")}function Dr(P){return function(H){return P(H)}}function yx(P,H){return et(H,function(L){return P[L]})}function Mc(P,H){return P.has(H)}function x_(P,H){for(var L=-1,ee=P.length;++L<ee&&Ca(H,P[L],0)>-1;);return L}function T_(P,H){for(var L=P.length;L--&&Ca(H,P[L],0)>-1;);return L}function XO(P,H){for(var L=P.length,ee=0;L--;)P[L]===H&&++ee;return ee}var JO=dx(NO),eN=dx(LO);function tN(P){return"\\"+HO[P]}function rN(P,H){return P==null?t:P[H]}function Oa(P){return FO.test(P)}function nN(P){return IO.test(P)}function iN(P){for(var H,L=[];!(H=P.next()).done;)L.push(H.value);return L}function xx(P){var H=-1,L=Array(P.size);return P.forEach(function(ee,ye){L[++H]=[ye,ee]}),L}function S_(P,H){return function(L){return P(H(L))}}function Wi(P,H){for(var L=-1,ee=P.length,ye=0,Ve=[];++L<ee;){var vt=P[L];(vt===H||vt===p)&&(P[L]=p,Ve[ye++]=L)}return Ve}function Zp(P){var H=-1,L=Array(P.size);return P.forEach(function(ee){L[++H]=ee}),L}function oN(P){var H=-1,L=Array(P.size);return P.forEach(function(ee){L[++H]=[ee,ee]}),L}function aN(P,H,L){for(var ee=L-1,ye=P.length;++ee<ye;)if(P[ee]===H)return ee;return-1}function sN(P,H,L){for(var ee=L+1;ee--;)if(P[ee]===H)return ee;return ee}function Na(P){return Oa(P)?lN(P):zO(P)}function En(P){return Oa(P)?pN(P):GO(P)}function v_(P){for(var H=P.length;H--&&X1.test(P.charAt(H)););return H}var cN=dx(UO);function lN(P){for(var H=sx.lastIndex=0;sx.test(P);)++H;return H}function pN(P){return P.match(sx)||[]}function uN(P){return P.match(DO)||[]}var fN=function P(H){H=H==null?kt:$i.defaults(kt.Object(),H,$i.pick(kt,CO));var L=H.Array,ee=H.Date,ye=H.Error,Ve=H.Function,vt=H.Math,Ge=H.Object,Tx=H.RegExp,mN=H.String,Xr=H.TypeError,Yp=L.prototype,dN=Ve.prototype,La=Ge.prototype,Xp=H["__core-js_shared__"],Jp=dN.toString,je=La.hasOwnProperty,hN=0,b_=function(){var a=/[^.]+$/.exec(Xp&&Xp.keys&&Xp.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),eu=La.toString,gN=Jp.call(Ge),yN=kt._,xN=Tx("^"+Jp.call(je).replace(tx,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tu=o_?H.Buffer:t,ji=H.Symbol,ru=H.Uint8Array,w_=tu?tu.allocUnsafe:t,nu=S_(Ge.getPrototypeOf,Ge),__=Ge.create,E_=La.propertyIsEnumerable,iu=Yp.splice,R_=ji?ji.isConcatSpreadable:t,Dc=ji?ji.iterator:t,Oo=ji?ji.toStringTag:t,ou=function(){try{var a=Vo(Ge,"defineProperty");return a({},"",{}),a}catch{}}(),TN=H.clearTimeout!==kt.clearTimeout&&H.clearTimeout,SN=ee&&ee.now!==kt.Date.now&&ee.now,vN=H.setTimeout!==kt.setTimeout&&H.setTimeout,au=vt.ceil,su=vt.floor,Sx=Ge.getOwnPropertySymbols,bN=tu?tu.isBuffer:t,k_=H.isFinite,wN=Yp.join,_N=S_(Ge.keys,Ge),bt=vt.max,$t=vt.min,EN=ee.now,RN=H.parseInt,P_=vt.random,kN=Yp.reverse,vx=Vo(H,"DataView"),Fc=Vo(H,"Map"),bx=Vo(H,"Promise"),Ua=Vo(H,"Set"),Ic=Vo(H,"WeakMap"),Cc=Vo(Ge,"create"),cu=Ic&&new Ic,Ha={},PN=Bo(vx),AN=Bo(Fc),MN=Bo(bx),DN=Bo(Ua),FN=Bo(Ic),lu=ji?ji.prototype:t,Oc=lu?lu.valueOf:t,A_=lu?lu.toString:t;function T(a){if(lt(a)&&!xe(a)&&!(a instanceof Fe)){if(a instanceof Jr)return a;if(je.call(a,"__wrapped__"))return M0(a)}return new Jr(a)}var Va=function(){function a(){}return function(c){if(!ot(c))return{};if(__)return __(c);a.prototype=c;var f=new a;return a.prototype=t,f}}();function pu(){}function Jr(a,c){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=t}T.templateSettings={escape:z1,evaluate:G1,interpolate:Uw,variable:"",imports:{_:T}},T.prototype=pu.prototype,T.prototype.constructor=T,Jr.prototype=Va(pu.prototype),Jr.prototype.constructor=Jr;function Fe(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=re,this.__views__=[]}function IN(){var a=new Fe(this.__wrapped__);return a.__actions__=mr(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=mr(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=mr(this.__views__),a}function CN(){if(this.__filtered__){var a=new Fe(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a}function ON(){var a=this.__wrapped__.value(),c=this.__dir__,f=xe(a),h=c<0,y=f?a.length:0,S=GL(0,y,this.__views__),E=S.start,R=S.end,M=R-E,V=h?R:E-1,B=this.__iteratees__,j=B.length,Y=0,oe=$t(M,this.__takeCount__);if(!f||!h&&y==M&&oe==M)return J_(a,this.__actions__);var fe=[];e:for(;M--&&Y<oe;){V+=c;for(var Ee=-1,me=a[V];++Ee<j;){var Me=B[Ee],Ie=Me.iteratee,Cr=Me.type,er=Ie(me);if(Cr==$)me=er;else if(!er){if(Cr==D)continue e;break e}}fe[Y++]=me}return fe}Fe.prototype=Va(pu.prototype),Fe.prototype.constructor=Fe;function No(a){var c=-1,f=a==null?0:a.length;for(this.clear();++c<f;){var h=a[c];this.set(h[0],h[1])}}function NN(){this.__data__=Cc?Cc(null):{},this.size=0}function LN(a){var c=this.has(a)&&delete this.__data__[a];return this.size-=c?1:0,c}function UN(a){var c=this.__data__;if(Cc){var f=c[a];return f===s?t:f}return je.call(c,a)?c[a]:t}function HN(a){var c=this.__data__;return Cc?c[a]!==t:je.call(c,a)}function VN(a,c){var f=this.__data__;return this.size+=this.has(a)?0:1,f[a]=Cc&&c===t?s:c,this}No.prototype.clear=NN,No.prototype.delete=LN,No.prototype.get=UN,No.prototype.has=HN,No.prototype.set=VN;function di(a){var c=-1,f=a==null?0:a.length;for(this.clear();++c<f;){var h=a[c];this.set(h[0],h[1])}}function BN(){this.__data__=[],this.size=0}function WN(a){var c=this.__data__,f=uu(c,a);if(f<0)return!1;var h=c.length-1;return f==h?c.pop():iu.call(c,f,1),--this.size,!0}function $N(a){var c=this.__data__,f=uu(c,a);return f<0?t:c[f][1]}function jN(a){return uu(this.__data__,a)>-1}function qN(a,c){var f=this.__data__,h=uu(f,a);return h<0?(++this.size,f.push([a,c])):f[h][1]=c,this}di.prototype.clear=BN,di.prototype.delete=WN,di.prototype.get=$N,di.prototype.has=jN,di.prototype.set=qN;function hi(a){var c=-1,f=a==null?0:a.length;for(this.clear();++c<f;){var h=a[c];this.set(h[0],h[1])}}function zN(){this.size=0,this.__data__={hash:new No,map:new(Fc||di),string:new No}}function GN(a){var c=wu(this,a).delete(a);return this.size-=c?1:0,c}function KN(a){return wu(this,a).get(a)}function QN(a){return wu(this,a).has(a)}function ZN(a,c){var f=wu(this,a),h=f.size;return f.set(a,c),this.size+=f.size==h?0:1,this}hi.prototype.clear=zN,hi.prototype.delete=GN,hi.prototype.get=KN,hi.prototype.has=QN,hi.prototype.set=ZN;function Lo(a){var c=-1,f=a==null?0:a.length;for(this.__data__=new hi;++c<f;)this.add(a[c])}function YN(a){return this.__data__.set(a,s),this}function XN(a){return this.__data__.has(a)}Lo.prototype.add=Lo.prototype.push=YN,Lo.prototype.has=XN;function Rn(a){var c=this.__data__=new di(a);this.size=c.size}function JN(){this.__data__=new di,this.size=0}function eL(a){var c=this.__data__,f=c.delete(a);return this.size=c.size,f}function tL(a){return this.__data__.get(a)}function rL(a){return this.__data__.has(a)}function nL(a,c){var f=this.__data__;if(f instanceof di){var h=f.__data__;if(!Fc||h.length<r-1)return h.push([a,c]),this.size=++f.size,this;f=this.__data__=new hi(h)}return f.set(a,c),this.size=f.size,this}Rn.prototype.clear=JN,Rn.prototype.delete=eL,Rn.prototype.get=tL,Rn.prototype.has=rL,Rn.prototype.set=nL;function M_(a,c){var f=xe(a),h=!f&&Wo(a),y=!f&&!h&&Qi(a),S=!f&&!h&&!y&&ja(a),E=f||h||y||S,R=E?gx(a.length,mN):[],M=R.length;for(var V in a)(c||je.call(a,V))&&!(E&&(V=="length"||y&&(V=="offset"||V=="parent")||S&&(V=="buffer"||V=="byteLength"||V=="byteOffset")||Ti(V,M)))&&R.push(V);return R}function D_(a){var c=a.length;return c?a[Ix(0,c-1)]:t}function iL(a,c){return _u(mr(a),Uo(c,0,a.length))}function oL(a){return _u(mr(a))}function wx(a,c,f){(f!==t&&!kn(a[c],f)||f===t&&!(c in a))&&gi(a,c,f)}function Nc(a,c,f){var h=a[c];(!(je.call(a,c)&&kn(h,f))||f===t&&!(c in a))&&gi(a,c,f)}function uu(a,c){for(var f=a.length;f--;)if(kn(a[f][0],c))return f;return-1}function aL(a,c,f,h){return qi(a,function(y,S,E){c(h,y,f(y),E)}),h}function F_(a,c){return a&&$n(c,Pt(c),a)}function sL(a,c){return a&&$n(c,hr(c),a)}function gi(a,c,f){c=="__proto__"&&ou?ou(a,c,{configurable:!0,enumerable:!0,value:f,writable:!0}):a[c]=f}function _x(a,c){for(var f=-1,h=c.length,y=L(h),S=a==null;++f<h;)y[f]=S?t:iT(a,c[f]);return y}function Uo(a,c,f){return a===a&&(f!==t&&(a=a<=f?a:f),c!==t&&(a=a>=c?a:c)),a}function en(a,c,f,h,y,S){var E,R=c&u,M=c&m,V=c&d;if(f&&(E=y?f(a,h,y,S):f(a)),E!==t)return E;if(!ot(a))return a;var B=xe(a);if(B){if(E=QL(a),!R)return mr(a,E)}else{var j=jt(a),Y=j==Da||j==Cw;if(Qi(a))return r0(a,R);if(j==mi||j==fr||Y&&!y){if(E=M||Y?{}:v0(a),!R)return M?UL(a,sL(E,a)):LL(a,F_(E,a))}else{if(!Qe[j])return y?a:{};E=ZL(a,j,R)}}S||(S=new Rn);var oe=S.get(a);if(oe)return oe;S.set(a,E),Z0(a)?a.forEach(function(me){E.add(en(me,c,f,me,a,S))}):K0(a)&&a.forEach(function(me,Me){E.set(Me,en(me,c,f,Me,a,S))});var fe=V?M?jx:$x:M?hr:Pt,Ee=B?t:fe(a);return Yr(Ee||a,function(me,Me){Ee&&(Me=me,me=a[Me]),Nc(E,Me,en(me,c,f,Me,a,S))}),E}function cL(a){var c=Pt(a);return function(f){return I_(f,a,c)}}function I_(a,c,f){var h=f.length;if(a==null)return!h;for(a=Ge(a);h--;){var y=f[h],S=c[y],E=a[y];if(E===t&&!(y in a)||!S(E))return!1}return!0}function C_(a,c,f){if(typeof a!="function")throw new Xr(i);return $c(function(){a.apply(t,f)},c)}function Lc(a,c,f,h){var y=-1,S=Kp,E=!0,R=a.length,M=[],V=c.length;if(!R)return M;f&&(c=et(c,Dr(f))),h?(S=px,E=!1):c.length>=r&&(S=Mc,E=!1,c=new Lo(c));e:for(;++y<R;){var B=a[y],j=f==null?B:f(B);if(B=h||B!==0?B:0,E&&j===j){for(var Y=V;Y--;)if(c[Y]===j)continue e;M.push(B)}else S(c,j,h)||M.push(B)}return M}var qi=s0(Wn),O_=s0(Rx,!0);function lL(a,c){var f=!0;return qi(a,function(h,y,S){return f=!!c(h,y,S),f}),f}function fu(a,c,f){for(var h=-1,y=a.length;++h<y;){var S=a[h],E=c(S);if(E!=null&&(R===t?E===E&&!Ir(E):f(E,R)))var R=E,M=S}return M}function pL(a,c,f,h){var y=a.length;for(f=ve(f),f<0&&(f=-f>y?0:y+f),h=h===t||h>y?y:ve(h),h<0&&(h+=y),h=f>h?0:X0(h);f<h;)a[f++]=c;return a}function N_(a,c){var f=[];return qi(a,function(h,y,S){c(h,y,S)&&f.push(h)}),f}function Ot(a,c,f,h,y){var S=-1,E=a.length;for(f||(f=XL),y||(y=[]);++S<E;){var R=a[S];c>0&&f(R)?c>1?Ot(R,c-1,f,h,y):Bi(y,R):h||(y[y.length]=R)}return y}var Ex=c0(),L_=c0(!0);function Wn(a,c){return a&&Ex(a,c,Pt)}function Rx(a,c){return a&&L_(a,c,Pt)}function mu(a,c){return Vi(c,function(f){return Si(a[f])})}function Ho(a,c){c=Gi(c,a);for(var f=0,h=c.length;a!=null&&f<h;)a=a[jn(c[f++])];return f&&f==h?a:t}function U_(a,c,f){var h=c(a);return xe(a)?h:Bi(h,f(a))}function Xt(a){return a==null?a===t?H1:L1:Oo&&Oo in Ge(a)?zL(a):oU(a)}function kx(a,c){return a>c}function uL(a,c){return a!=null&&je.call(a,c)}function fL(a,c){return a!=null&&c in Ge(a)}function mL(a,c,f){return a>=$t(c,f)&&a<bt(c,f)}function Px(a,c,f){for(var h=f?px:Kp,y=a[0].length,S=a.length,E=S,R=L(S),M=1/0,V=[];E--;){var B=a[E];E&&c&&(B=et(B,Dr(c))),M=$t(B.length,M),R[E]=!f&&(c||y>=120&&B.length>=120)?new Lo(E&&B):t}B=a[0];var j=-1,Y=R[0];e:for(;++j<y&&V.length<M;){var oe=B[j],fe=c?c(oe):oe;if(oe=f||oe!==0?oe:0,!(Y?Mc(Y,fe):h(V,fe,f))){for(E=S;--E;){var Ee=R[E];if(!(Ee?Mc(Ee,fe):h(a[E],fe,f)))continue e}Y&&Y.push(fe),V.push(oe)}}return V}function dL(a,c,f,h){return Wn(a,function(y,S,E){c(h,f(y),S,E)}),h}function Uc(a,c,f){c=Gi(c,a),a=E0(a,c);var h=a==null?a:a[jn(rn(c))];return h==null?t:Mr(h,a,f)}function H_(a){return lt(a)&&Xt(a)==fr}function hL(a){return lt(a)&&Xt(a)==Ac}function gL(a){return lt(a)&&Xt(a)==Qr}function Hc(a,c,f,h,y){return a===c?!0:a==null||c==null||!lt(a)&&!lt(c)?a!==a&&c!==c:yL(a,c,f,h,Hc,y)}function yL(a,c,f,h,y,S){var E=xe(a),R=xe(c),M=E?vn:jt(a),V=R?vn:jt(c);M=M==fr?mi:M,V=V==fr?mi:V;var B=M==mi,j=V==mi,Y=M==V;if(Y&&Qi(a)){if(!Qi(c))return!1;E=!0,B=!1}if(Y&&!B)return S||(S=new Rn),E||ja(a)?x0(a,c,f,h,y,S):jL(a,c,M,f,h,y,S);if(!(f&g)){var oe=B&&je.call(a,"__wrapped__"),fe=j&&je.call(c,"__wrapped__");if(oe||fe){var Ee=oe?a.value():a,me=fe?c.value():c;return S||(S=new Rn),y(Ee,me,f,h,S)}}return Y?(S||(S=new Rn),qL(a,c,f,h,y,S)):!1}function xL(a){return lt(a)&&jt(a)==wn}function Ax(a,c,f,h){var y=f.length,S=y,E=!h;if(a==null)return!S;for(a=Ge(a);y--;){var R=f[y];if(E&&R[2]?R[1]!==a[R[0]]:!(R[0]in a))return!1}for(;++y<S;){R=f[y];var M=R[0],V=a[M],B=R[1];if(E&&R[2]){if(V===t&&!(M in a))return!1}else{var j=new Rn;if(h)var Y=h(V,B,M,a,c,j);if(!(Y===t?Hc(B,V,g|x,h,j):Y))return!1}}return!0}function V_(a){if(!ot(a)||eU(a))return!1;var c=Si(a)?xN:cO;return c.test(Bo(a))}function TL(a){return lt(a)&&Xt(a)==Rc}function SL(a){return lt(a)&&jt(a)==_n}function vL(a){return lt(a)&&Mu(a.length)&&!!Ye[Xt(a)]}function B_(a){return typeof a=="function"?a:a==null?gr:typeof a=="object"?xe(a)?j_(a[0],a[1]):$_(a):lE(a)}function Mx(a){if(!Wc(a))return _N(a);var c=[];for(var f in Ge(a))je.call(a,f)&&f!="constructor"&&c.push(f);return c}function bL(a){if(!ot(a))return iU(a);var c=Wc(a),f=[];for(var h in a)h=="constructor"&&(c||!je.call(a,h))||f.push(h);return f}function Dx(a,c){return a<c}function W_(a,c){var f=-1,h=dr(a)?L(a.length):[];return qi(a,function(y,S,E){h[++f]=c(y,S,E)}),h}function $_(a){var c=zx(a);return c.length==1&&c[0][2]?w0(c[0][0],c[0][1]):function(f){return f===a||Ax(f,a,c)}}function j_(a,c){return Kx(a)&&b0(c)?w0(jn(a),c):function(f){var h=iT(f,a);return h===t&&h===c?oT(f,a):Hc(c,h,g|x)}}function du(a,c,f,h,y){a!==c&&Ex(c,function(S,E){if(y||(y=new Rn),ot(S))wL(a,c,E,f,du,h,y);else{var R=h?h(Zx(a,E),S,E+"",a,c,y):t;R===t&&(R=S),wx(a,E,R)}},hr)}function wL(a,c,f,h,y,S,E){var R=Zx(a,f),M=Zx(c,f),V=E.get(M);if(V){wx(a,f,V);return}var B=S?S(R,M,f+"",a,c,E):t,j=B===t;if(j){var Y=xe(M),oe=!Y&&Qi(M),fe=!Y&&!oe&&ja(M);B=M,Y||oe||fe?xe(R)?B=R:ft(R)?B=mr(R):oe?(j=!1,B=r0(M,!0)):fe?(j=!1,B=n0(M,!0)):B=[]:jc(M)||Wo(M)?(B=R,Wo(R)?B=J0(R):(!ot(R)||Si(R))&&(B=v0(M))):j=!1}j&&(E.set(M,B),y(B,M,h,S,E),E.delete(M)),wx(a,f,B)}function q_(a,c){var f=a.length;if(f)return c+=c<0?f:0,Ti(c,f)?a[c]:t}function z_(a,c,f){c.length?c=et(c,function(S){return xe(S)?function(E){return Ho(E,S.length===1?S[0]:S)}:S}):c=[gr];var h=-1;c=et(c,Dr(ue()));var y=W_(a,function(S,E,R){var M=et(c,function(V){return V(S)});return{criteria:M,index:++h,value:S}});return ZO(y,function(S,E){return NL(S,E,f)})}function _L(a,c){return G_(a,c,function(f,h){return oT(a,h)})}function G_(a,c,f){for(var h=-1,y=c.length,S={};++h<y;){var E=c[h],R=Ho(a,E);f(R,E)&&Vc(S,Gi(E,a),R)}return S}function EL(a){return function(c){return Ho(c,a)}}function Fx(a,c,f,h){var y=h?QO:Ca,S=-1,E=c.length,R=a;for(a===c&&(c=mr(c)),f&&(R=et(a,Dr(f)));++S<E;)for(var M=0,V=c[S],B=f?f(V):V;(M=y(R,B,M,h))>-1;)R!==a&&iu.call(R,M,1),iu.call(a,M,1);return a}function K_(a,c){for(var f=a?c.length:0,h=f-1;f--;){var y=c[f];if(f==h||y!==S){var S=y;Ti(y)?iu.call(a,y,1):Nx(a,y)}}return a}function Ix(a,c){return a+su(P_()*(c-a+1))}function RL(a,c,f,h){for(var y=-1,S=bt(au((c-a)/(f||1)),0),E=L(S);S--;)E[h?S:++y]=a,a+=f;return E}function Cx(a,c){var f="";if(!a||c<1||c>Z)return f;do c%2&&(f+=a),c=su(c/2),c&&(a+=a);while(c);return f}function ke(a,c){return Yx(_0(a,c,gr),a+"")}function kL(a){return D_(qa(a))}function PL(a,c){var f=qa(a);return _u(f,Uo(c,0,f.length))}function Vc(a,c,f,h){if(!ot(a))return a;c=Gi(c,a);for(var y=-1,S=c.length,E=S-1,R=a;R!=null&&++y<S;){var M=jn(c[y]),V=f;if(M==="__proto__"||M==="constructor"||M==="prototype")return a;if(y!=E){var B=R[M];V=h?h(B,M,R):t,V===t&&(V=ot(B)?B:Ti(c[y+1])?[]:{})}Nc(R,M,V),R=R[M]}return a}var Q_=cu?function(a,c){return cu.set(a,c),a}:gr,AL=ou?function(a,c){return ou(a,"toString",{configurable:!0,enumerable:!1,value:sT(c),writable:!0})}:gr;function ML(a){return _u(qa(a))}function tn(a,c,f){var h=-1,y=a.length;c<0&&(c=-c>y?0:y+c),f=f>y?y:f,f<0&&(f+=y),y=c>f?0:f-c>>>0,c>>>=0;for(var S=L(y);++h<y;)S[h]=a[h+c];return S}function DL(a,c){var f;return qi(a,function(h,y,S){return f=c(h,y,S),!f}),!!f}function hu(a,c,f){var h=0,y=a==null?h:a.length;if(typeof c=="number"&&c===c&&y<=ur){for(;h<y;){var S=h+y>>>1,E=a[S];E!==null&&!Ir(E)&&(f?E<=c:E<c)?h=S+1:y=S}return y}return Ox(a,c,gr,f)}function Ox(a,c,f,h){var y=0,S=a==null?0:a.length;if(S===0)return 0;c=f(c);for(var E=c!==c,R=c===null,M=Ir(c),V=c===t;y<S;){var B=su((y+S)/2),j=f(a[B]),Y=j!==t,oe=j===null,fe=j===j,Ee=Ir(j);if(E)var me=h||fe;else V?me=fe&&(h||Y):R?me=fe&&Y&&(h||!oe):M?me=fe&&Y&&!oe&&(h||!Ee):oe||Ee?me=!1:me=h?j<=c:j<c;me?y=B+1:S=B}return $t(S,Re)}function Z_(a,c){for(var f=-1,h=a.length,y=0,S=[];++f<h;){var E=a[f],R=c?c(E):E;if(!f||!kn(R,M)){var M=R;S[y++]=E===0?0:E}}return S}function Y_(a){return typeof a=="number"?a:Ir(a)?he:+a}function Fr(a){if(typeof a=="string")return a;if(xe(a))return et(a,Fr)+"";if(Ir(a))return A_?A_.call(a):"";var c=a+"";return c=="0"&&1/a==-Q?"-0":c}function zi(a,c,f){var h=-1,y=Kp,S=a.length,E=!0,R=[],M=R;if(f)E=!1,y=px;else if(S>=r){var V=c?null:WL(a);if(V)return Zp(V);E=!1,y=Mc,M=new Lo}else M=c?[]:R;e:for(;++h<S;){var B=a[h],j=c?c(B):B;if(B=f||B!==0?B:0,E&&j===j){for(var Y=M.length;Y--;)if(M[Y]===j)continue e;c&&M.push(j),R.push(B)}else y(M,j,f)||(M!==R&&M.push(j),R.push(B))}return R}function Nx(a,c){return c=Gi(c,a),a=E0(a,c),a==null||delete a[jn(rn(c))]}function X_(a,c,f,h){return Vc(a,c,f(Ho(a,c)),h)}function gu(a,c,f,h){for(var y=a.length,S=h?y:-1;(h?S--:++S<y)&&c(a[S],S,a););return f?tn(a,h?0:S,h?S+1:y):tn(a,h?S+1:0,h?y:S)}function J_(a,c){var f=a;return f instanceof Fe&&(f=f.value()),ux(c,function(h,y){return y.func.apply(y.thisArg,Bi([h],y.args))},f)}function Lx(a,c,f){var h=a.length;if(h<2)return h?zi(a[0]):[];for(var y=-1,S=L(h);++y<h;)for(var E=a[y],R=-1;++R<h;)R!=y&&(S[y]=Lc(S[y]||E,a[R],c,f));return zi(Ot(S,1),c,f)}function e0(a,c,f){for(var h=-1,y=a.length,S=c.length,E={};++h<y;){var R=h<S?c[h]:t;f(E,a[h],R)}return E}function Ux(a){return ft(a)?a:[]}function Hx(a){return typeof a=="function"?a:gr}function Gi(a,c){return xe(a)?a:Kx(a,c)?[a]:A0(We(a))}var FL=ke;function Ki(a,c,f){var h=a.length;return f=f===t?h:f,!c&&f>=h?a:tn(a,c,f)}var t0=TN||function(a){return kt.clearTimeout(a)};function r0(a,c){if(c)return a.slice();var f=a.length,h=w_?w_(f):new a.constructor(f);return a.copy(h),h}function Vx(a){var c=new a.constructor(a.byteLength);return new ru(c).set(new ru(a)),c}function IL(a,c){var f=c?Vx(a.buffer):a.buffer;return new a.constructor(f,a.byteOffset,a.byteLength)}function CL(a){var c=new a.constructor(a.source,Hw.exec(a));return c.lastIndex=a.lastIndex,c}function OL(a){return Oc?Ge(Oc.call(a)):{}}function n0(a,c){var f=c?Vx(a.buffer):a.buffer;return new a.constructor(f,a.byteOffset,a.length)}function i0(a,c){if(a!==c){var f=a!==t,h=a===null,y=a===a,S=Ir(a),E=c!==t,R=c===null,M=c===c,V=Ir(c);if(!R&&!V&&!S&&a>c||S&&E&&M&&!R&&!V||h&&E&&M||!f&&M||!y)return 1;if(!h&&!S&&!V&&a<c||V&&f&&y&&!h&&!S||R&&f&&y||!E&&y||!M)return-1}return 0}function NL(a,c,f){for(var h=-1,y=a.criteria,S=c.criteria,E=y.length,R=f.length;++h<E;){var M=i0(y[h],S[h]);if(M){if(h>=R)return M;var V=f[h];return M*(V=="desc"?-1:1)}}return a.index-c.index}function o0(a,c,f,h){for(var y=-1,S=a.length,E=f.length,R=-1,M=c.length,V=bt(S-E,0),B=L(M+V),j=!h;++R<M;)B[R]=c[R];for(;++y<E;)(j||y<S)&&(B[f[y]]=a[y]);for(;V--;)B[R++]=a[y++];return B}function a0(a,c,f,h){for(var y=-1,S=a.length,E=-1,R=f.length,M=-1,V=c.length,B=bt(S-R,0),j=L(B+V),Y=!h;++y<B;)j[y]=a[y];for(var oe=y;++M<V;)j[oe+M]=c[M];for(;++E<R;)(Y||y<S)&&(j[oe+f[E]]=a[y++]);return j}function mr(a,c){var f=-1,h=a.length;for(c||(c=L(h));++f<h;)c[f]=a[f];return c}function $n(a,c,f,h){var y=!f;f||(f={});for(var S=-1,E=c.length;++S<E;){var R=c[S],M=h?h(f[R],a[R],R,f,a):t;M===t&&(M=a[R]),y?gi(f,R,M):Nc(f,R,M)}return f}function LL(a,c){return $n(a,Gx(a),c)}function UL(a,c){return $n(a,T0(a),c)}function yu(a,c){return function(f,h){var y=xe(f)?$O:aL,S=c?c():{};return y(f,a,ue(h,2),S)}}function Ba(a){return ke(function(c,f){var h=-1,y=f.length,S=y>1?f[y-1]:t,E=y>2?f[2]:t;for(S=a.length>3&&typeof S=="function"?(y--,S):t,E&&Jt(f[0],f[1],E)&&(S=y<3?t:S,y=1),c=Ge(c);++h<y;){var R=f[h];R&&a(c,R,h,S)}return c})}function s0(a,c){return function(f,h){if(f==null)return f;if(!dr(f))return a(f,h);for(var y=f.length,S=c?y:-1,E=Ge(f);(c?S--:++S<y)&&h(E[S],S,E)!==!1;);return f}}function c0(a){return function(c,f,h){for(var y=-1,S=Ge(c),E=h(c),R=E.length;R--;){var M=E[a?R:++y];if(f(S[M],M,S)===!1)break}return c}}function HL(a,c,f){var h=c&b,y=Bc(a);function S(){var E=this&&this!==kt&&this instanceof S?y:a;return E.apply(h?f:this,arguments)}return S}function l0(a){return function(c){c=We(c);var f=Oa(c)?En(c):t,h=f?f[0]:c.charAt(0),y=f?Ki(f,1).join(""):c.slice(1);return h[a]()+y}}function Wa(a){return function(c){return ux(sE(aE(c).replace(AO,"")),a,"")}}function Bc(a){return function(){var c=arguments;switch(c.length){case 0:return new a;case 1:return new a(c[0]);case 2:return new a(c[0],c[1]);case 3:return new a(c[0],c[1],c[2]);case 4:return new a(c[0],c[1],c[2],c[3]);case 5:return new a(c[0],c[1],c[2],c[3],c[4]);case 6:return new a(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new a(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var f=Va(a.prototype),h=a.apply(f,c);return ot(h)?h:f}}function VL(a,c,f){var h=Bc(a);function y(){for(var S=arguments.length,E=L(S),R=S,M=$a(y);R--;)E[R]=arguments[R];var V=S<3&&E[0]!==M&&E[S-1]!==M?[]:Wi(E,M);if(S-=V.length,S<f)return d0(a,c,xu,y.placeholder,t,E,V,t,t,f-S);var B=this&&this!==kt&&this instanceof y?h:a;return Mr(B,this,E)}return y}function p0(a){return function(c,f,h){var y=Ge(c);if(!dr(c)){var S=ue(f,3);c=Pt(c),f=function(R){return S(y[R],R,y)}}var E=a(c,f,h);return E>-1?y[S?c[E]:E]:t}}function u0(a){return xi(function(c){var f=c.length,h=f,y=Jr.prototype.thru;for(a&&c.reverse();h--;){var S=c[h];if(typeof S!="function")throw new Xr(i);if(y&&!E&&bu(S)=="wrapper")var E=new Jr([],!0)}for(h=E?h:f;++h<f;){S=c[h];var R=bu(S),M=R=="wrapper"?qx(S):t;M&&Qx(M[0])&&M[1]==(ie|F|K|se)&&!M[4].length&&M[9]==1?E=E[bu(M[0])].apply(E,M[3]):E=S.length==1&&Qx(S)?E[R]():E.thru(S)}return function(){var V=arguments,B=V[0];if(E&&V.length==1&&xe(B))return E.plant(B).value();for(var j=0,Y=f?c[j].apply(this,V):B;++j<f;)Y=c[j].call(this,Y);return Y}})}function xu(a,c,f,h,y,S,E,R,M,V){var B=c&ie,j=c&b,Y=c&v,oe=c&(F|U),fe=c&it,Ee=Y?t:Bc(a);function me(){for(var Me=arguments.length,Ie=L(Me),Cr=Me;Cr--;)Ie[Cr]=arguments[Cr];if(oe)var er=$a(me),Or=XO(Ie,er);if(h&&(Ie=o0(Ie,h,y,oe)),S&&(Ie=a0(Ie,S,E,oe)),Me-=Or,oe&&Me<V){var mt=Wi(Ie,er);return d0(a,c,xu,me.placeholder,f,Ie,mt,R,M,V-Me)}var Pn=j?f:this,bi=Y?Pn[a]:a;return Me=Ie.length,R?Ie=aU(Ie,R):fe&&Me>1&&Ie.reverse(),B&&M<Me&&(Ie.length=M),this&&this!==kt&&this instanceof me&&(bi=Ee||Bc(bi)),bi.apply(Pn,Ie)}return me}function f0(a,c){return function(f,h){return dL(f,a,c(h),{})}}function Tu(a,c){return function(f,h){var y;if(f===t&&h===t)return c;if(f!==t&&(y=f),h!==t){if(y===t)return h;typeof f=="string"||typeof h=="string"?(f=Fr(f),h=Fr(h)):(f=Y_(f),h=Y_(h)),y=a(f,h)}return y}}function Bx(a){return xi(function(c){return c=et(c,Dr(ue())),ke(function(f){var h=this;return a(c,function(y){return Mr(y,h,f)})})})}function Su(a,c){c=c===t?" ":Fr(c);var f=c.length;if(f<2)return f?Cx(c,a):c;var h=Cx(c,au(a/Na(c)));return Oa(c)?Ki(En(h),0,a).join(""):h.slice(0,a)}function BL(a,c,f,h){var y=c&b,S=Bc(a);function E(){for(var R=-1,M=arguments.length,V=-1,B=h.length,j=L(B+M),Y=this&&this!==kt&&this instanceof E?S:a;++V<B;)j[V]=h[V];for(;M--;)j[V++]=arguments[++R];return Mr(Y,y?f:this,j)}return E}function m0(a){return function(c,f,h){return h&&typeof h!="number"&&Jt(c,f,h)&&(f=h=t),c=vi(c),f===t?(f=c,c=0):f=vi(f),h=h===t?c<f?1:-1:vi(h),RL(c,f,h,a)}}function vu(a){return function(c,f){return typeof c=="string"&&typeof f=="string"||(c=nn(c),f=nn(f)),a(c,f)}}function d0(a,c,f,h,y,S,E,R,M,V){var B=c&F,j=B?E:t,Y=B?t:E,oe=B?S:t,fe=B?t:S;c|=B?K:ne,c&=~(B?ne:K),c&I||(c&=~(b|v));var Ee=[a,c,y,oe,j,fe,Y,R,M,V],me=f.apply(t,Ee);return Qx(a)&&R0(me,Ee),me.placeholder=h,k0(me,a,c)}function Wx(a){var c=vt[a];return function(f,h){if(f=nn(f),h=h==null?0:$t(ve(h),292),h&&k_(f)){var y=(We(f)+"e").split("e"),S=c(y[0]+"e"+(+y[1]+h));return y=(We(S)+"e").split("e"),+(y[0]+"e"+(+y[1]-h))}return c(f)}}var WL=Ua&&1/Zp(new Ua([,-0]))[1]==Q?function(a){return new Ua(a)}:pT;function h0(a){return function(c){var f=jt(c);return f==wn?xx(c):f==_n?oN(c):YO(c,a(c))}}function yi(a,c,f,h,y,S,E,R){var M=c&v;if(!M&&typeof a!="function")throw new Xr(i);var V=h?h.length:0;if(V||(c&=~(K|ne),h=y=t),E=E===t?E:bt(ve(E),0),R=R===t?R:ve(R),V-=y?y.length:0,c&ne){var B=h,j=y;h=y=t}var Y=M?t:qx(a),oe=[a,c,f,h,y,B,j,S,E,R];if(Y&&nU(oe,Y),a=oe[0],c=oe[1],f=oe[2],h=oe[3],y=oe[4],R=oe[9]=oe[9]===t?M?0:a.length:bt(oe[9]-V,0),!R&&c&(F|U)&&(c&=~(F|U)),!c||c==b)var fe=HL(a,c,f);else c==F||c==U?fe=VL(a,c,R):(c==K||c==(b|K))&&!y.length?fe=BL(a,c,f,h):fe=xu.apply(t,oe);var Ee=Y?Q_:R0;return k0(Ee(fe,oe),a,c)}function g0(a,c,f,h){return a===t||kn(a,La[f])&&!je.call(h,f)?c:a}function y0(a,c,f,h,y,S){return ot(a)&&ot(c)&&(S.set(c,a),du(a,c,t,y0,S),S.delete(c)),a}function $L(a){return jc(a)?t:a}function x0(a,c,f,h,y,S){var E=f&g,R=a.length,M=c.length;if(R!=M&&!(E&&M>R))return!1;var V=S.get(a),B=S.get(c);if(V&&B)return V==c&&B==a;var j=-1,Y=!0,oe=f&x?new Lo:t;for(S.set(a,c),S.set(c,a);++j<R;){var fe=a[j],Ee=c[j];if(h)var me=E?h(Ee,fe,j,c,a,S):h(fe,Ee,j,a,c,S);if(me!==t){if(me)continue;Y=!1;break}if(oe){if(!fx(c,function(Me,Ie){if(!Mc(oe,Ie)&&(fe===Me||y(fe,Me,f,h,S)))return oe.push(Ie)})){Y=!1;break}}else if(!(fe===Ee||y(fe,Ee,f,h,S))){Y=!1;break}}return S.delete(a),S.delete(c),Y}function jL(a,c,f,h,y,S,E){switch(f){case Fa:if(a.byteLength!=c.byteLength||a.byteOffset!=c.byteOffset)return!1;a=a.buffer,c=c.buffer;case Ac:return!(a.byteLength!=c.byteLength||!S(new ru(a),new ru(c)));case bn:case Qr:case Ec:return kn(+a,+c);case fi:return a.name==c.name&&a.message==c.message;case Rc:case kc:return a==c+"";case wn:var R=xx;case _n:var M=h&g;if(R||(R=Zp),a.size!=c.size&&!M)return!1;var V=E.get(a);if(V)return V==c;h|=x,E.set(a,c);var B=x0(R(a),R(c),h,y,S,E);return E.delete(a),B;case jp:if(Oc)return Oc.call(a)==Oc.call(c)}return!1}function qL(a,c,f,h,y,S){var E=f&g,R=$x(a),M=R.length,V=$x(c),B=V.length;if(M!=B&&!E)return!1;for(var j=M;j--;){var Y=R[j];if(!(E?Y in c:je.call(c,Y)))return!1}var oe=S.get(a),fe=S.get(c);if(oe&&fe)return oe==c&&fe==a;var Ee=!0;S.set(a,c),S.set(c,a);for(var me=E;++j<M;){Y=R[j];var Me=a[Y],Ie=c[Y];if(h)var Cr=E?h(Ie,Me,Y,c,a,S):h(Me,Ie,Y,a,c,S);if(!(Cr===t?Me===Ie||y(Me,Ie,f,h,S):Cr)){Ee=!1;break}me||(me=Y=="constructor")}if(Ee&&!me){var er=a.constructor,Or=c.constructor;er!=Or&&"constructor"in a&&"constructor"in c&&!(typeof er=="function"&&er instanceof er&&typeof Or=="function"&&Or instanceof Or)&&(Ee=!1)}return S.delete(a),S.delete(c),Ee}function xi(a){return Yx(_0(a,t,I0),a+"")}function $x(a){return U_(a,Pt,Gx)}function jx(a){return U_(a,hr,T0)}var qx=cu?function(a){return cu.get(a)}:pT;function bu(a){for(var c=a.name+"",f=Ha[c],h=je.call(Ha,c)?f.length:0;h--;){var y=f[h],S=y.func;if(S==null||S==a)return y.name}return c}function $a(a){var c=je.call(T,"placeholder")?T:a;return c.placeholder}function ue(){var a=T.iteratee||cT;return a=a===cT?B_:a,arguments.length?a(arguments[0],arguments[1]):a}function wu(a,c){var f=a.__data__;return JL(c)?f[typeof c=="string"?"string":"hash"]:f.map}function zx(a){for(var c=Pt(a),f=c.length;f--;){var h=c[f],y=a[h];c[f]=[h,y,b0(y)]}return c}function Vo(a,c){var f=rN(a,c);return V_(f)?f:t}function zL(a){var c=je.call(a,Oo),f=a[Oo];try{a[Oo]=t;var h=!0}catch{}var y=eu.call(a);return h&&(c?a[Oo]=f:delete a[Oo]),y}var Gx=Sx?function(a){return a==null?[]:(a=Ge(a),Vi(Sx(a),function(c){return E_.call(a,c)}))}:uT,T0=Sx?function(a){for(var c=[];a;)Bi(c,Gx(a)),a=nu(a);return c}:uT,jt=Xt;(vx&&jt(new vx(new ArrayBuffer(1)))!=Fa||Fc&&jt(new Fc)!=wn||bx&&jt(bx.resolve())!=Ow||Ua&&jt(new Ua)!=_n||Ic&&jt(new Ic)!=Pc)&&(jt=function(a){var c=Xt(a),f=c==mi?a.constructor:t,h=f?Bo(f):"";if(h)switch(h){case PN:return Fa;case AN:return wn;case MN:return Ow;case DN:return _n;case FN:return Pc}return c});function GL(a,c,f){for(var h=-1,y=f.length;++h<y;){var S=f[h],E=S.size;switch(S.type){case"drop":a+=E;break;case"dropRight":c-=E;break;case"take":c=$t(c,a+E);break;case"takeRight":a=bt(a,c-E);break}}return{start:a,end:c}}function KL(a){var c=a.match(eO);return c?c[1].split(tO):[]}function S0(a,c,f){c=Gi(c,a);for(var h=-1,y=c.length,S=!1;++h<y;){var E=jn(c[h]);if(!(S=a!=null&&f(a,E)))break;a=a[E]}return S||++h!=y?S:(y=a==null?0:a.length,!!y&&Mu(y)&&Ti(E,y)&&(xe(a)||Wo(a)))}function QL(a){var c=a.length,f=new a.constructor(c);return c&&typeof a[0]=="string"&&je.call(a,"index")&&(f.index=a.index,f.input=a.input),f}function v0(a){return typeof a.constructor=="function"&&!Wc(a)?Va(nu(a)):{}}function ZL(a,c,f){var h=a.constructor;switch(c){case Ac:return Vx(a);case bn:case Qr:return new h(+a);case Fa:return IL(a,f);case zy:case Gy:case Ky:case Qy:case Zy:case Yy:case Xy:case Jy:case ex:return n0(a,f);case wn:return new h;case Ec:case kc:return new h(a);case Rc:return CL(a);case _n:return new h;case jp:return OL(a)}}function YL(a,c){var f=c.length;if(!f)return a;var h=f-1;return c[h]=(f>1?"& ":"")+c[h],c=c.join(f>2?", ":" "),a.replace(J1,`{
/* [wrapped with `+c+`] */
`)}function XL(a){return xe(a)||Wo(a)||!!(R_&&a&&a[R_])}function Ti(a,c){var f=typeof a;return c=c??Z,!!c&&(f=="number"||f!="symbol"&&pO.test(a))&&a>-1&&a%1==0&&a<c}function Jt(a,c,f){if(!ot(f))return!1;var h=typeof c;return(h=="number"?dr(f)&&Ti(c,f.length):h=="string"&&c in f)?kn(f[c],a):!1}function Kx(a,c){if(xe(a))return!1;var f=typeof a;return f=="number"||f=="symbol"||f=="boolean"||a==null||Ir(a)?!0:Q1.test(a)||!K1.test(a)||c!=null&&a in Ge(c)}function JL(a){var c=typeof a;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?a!=="__proto__":a===null}function Qx(a){var c=bu(a),f=T[c];if(typeof f!="function"||!(c in Fe.prototype))return!1;if(a===f)return!0;var h=qx(f);return!!h&&a===h[0]}function eU(a){return!!b_&&b_ in a}var tU=Xp?Si:fT;function Wc(a){var c=a&&a.constructor,f=typeof c=="function"&&c.prototype||La;return a===f}function b0(a){return a===a&&!ot(a)}function w0(a,c){return function(f){return f==null?!1:f[a]===c&&(c!==t||a in Ge(f))}}function rU(a){var c=Pu(a,function(h){return f.size===l&&f.clear(),h}),f=c.cache;return c}function nU(a,c){var f=a[1],h=c[1],y=f|h,S=y<(b|v|ie),E=h==ie&&f==F||h==ie&&f==se&&a[7].length<=c[8]||h==(ie|se)&&c[7].length<=c[8]&&f==F;if(!(S||E))return a;h&b&&(a[2]=c[2],y|=f&b?0:I);var R=c[3];if(R){var M=a[3];a[3]=M?o0(M,R,c[4]):R,a[4]=M?Wi(a[3],p):c[4]}return R=c[5],R&&(M=a[5],a[5]=M?a0(M,R,c[6]):R,a[6]=M?Wi(a[5],p):c[6]),R=c[7],R&&(a[7]=R),h&ie&&(a[8]=a[8]==null?c[8]:$t(a[8],c[8])),a[9]==null&&(a[9]=c[9]),a[0]=c[0],a[1]=y,a}function iU(a){var c=[];if(a!=null)for(var f in Ge(a))c.push(f);return c}function oU(a){return eu.call(a)}function _0(a,c,f){return c=bt(c===t?a.length-1:c,0),function(){for(var h=arguments,y=-1,S=bt(h.length-c,0),E=L(S);++y<S;)E[y]=h[c+y];y=-1;for(var R=L(c+1);++y<c;)R[y]=h[y];return R[c]=f(E),Mr(a,this,R)}}function E0(a,c){return c.length<2?a:Ho(a,tn(c,0,-1))}function aU(a,c){for(var f=a.length,h=$t(c.length,f),y=mr(a);h--;){var S=c[h];a[h]=Ti(S,f)?y[S]:t}return a}function Zx(a,c){if(!(c==="constructor"&&typeof a[c]=="function")&&c!="__proto__")return a[c]}var R0=P0(Q_),$c=vN||function(a,c){return kt.setTimeout(a,c)},Yx=P0(AL);function k0(a,c,f){var h=c+"";return Yx(a,YL(h,sU(KL(h),f)))}function P0(a){var c=0,f=0;return function(){var h=EN(),y=O-(h-f);if(f=h,y>0){if(++c>=N)return arguments[0]}else c=0;return a.apply(t,arguments)}}function _u(a,c){var f=-1,h=a.length,y=h-1;for(c=c===t?h:c;++f<c;){var S=Ix(f,y),E=a[S];a[S]=a[f],a[f]=E}return a.length=c,a}var A0=rU(function(a){var c=[];return a.charCodeAt(0)===46&&c.push(""),a.replace(Z1,function(f,h,y,S){c.push(y?S.replace(iO,"$1"):h||f)}),c});function jn(a){if(typeof a=="string"||Ir(a))return a;var c=a+"";return c=="0"&&1/a==-Q?"-0":c}function Bo(a){if(a!=null){try{return Jp.call(a)}catch{}try{return a+""}catch{}}return""}function sU(a,c){return Yr(ui,function(f){var h="_."+f[0];c&f[1]&&!Kp(a,h)&&a.push(h)}),a.sort()}function M0(a){if(a instanceof Fe)return a.clone();var c=new Jr(a.__wrapped__,a.__chain__);return c.__actions__=mr(a.__actions__),c.__index__=a.__index__,c.__values__=a.__values__,c}function cU(a,c,f){(f?Jt(a,c,f):c===t)?c=1:c=bt(ve(c),0);var h=a==null?0:a.length;if(!h||c<1)return[];for(var y=0,S=0,E=L(au(h/c));y<h;)E[S++]=tn(a,y,y+=c);return E}function lU(a){for(var c=-1,f=a==null?0:a.length,h=0,y=[];++c<f;){var S=a[c];S&&(y[h++]=S)}return y}function pU(){var a=arguments.length;if(!a)return[];for(var c=L(a-1),f=arguments[0],h=a;h--;)c[h-1]=arguments[h];return Bi(xe(f)?mr(f):[f],Ot(c,1))}var uU=ke(function(a,c){return ft(a)?Lc(a,Ot(c,1,ft,!0)):[]}),fU=ke(function(a,c){var f=rn(c);return ft(f)&&(f=t),ft(a)?Lc(a,Ot(c,1,ft,!0),ue(f,2)):[]}),mU=ke(function(a,c){var f=rn(c);return ft(f)&&(f=t),ft(a)?Lc(a,Ot(c,1,ft,!0),t,f):[]});function dU(a,c,f){var h=a==null?0:a.length;return h?(c=f||c===t?1:ve(c),tn(a,c<0?0:c,h)):[]}function hU(a,c,f){var h=a==null?0:a.length;return h?(c=f||c===t?1:ve(c),c=h-c,tn(a,0,c<0?0:c)):[]}function gU(a,c){return a&&a.length?gu(a,ue(c,3),!0,!0):[]}function yU(a,c){return a&&a.length?gu(a,ue(c,3),!0):[]}function xU(a,c,f,h){var y=a==null?0:a.length;return y?(f&&typeof f!="number"&&Jt(a,c,f)&&(f=0,h=y),pL(a,c,f,h)):[]}function D0(a,c,f){var h=a==null?0:a.length;if(!h)return-1;var y=f==null?0:ve(f);return y<0&&(y=bt(h+y,0)),Qp(a,ue(c,3),y)}function F0(a,c,f){var h=a==null?0:a.length;if(!h)return-1;var y=h-1;return f!==t&&(y=ve(f),y=f<0?bt(h+y,0):$t(y,h-1)),Qp(a,ue(c,3),y,!0)}function I0(a){var c=a==null?0:a.length;return c?Ot(a,1):[]}function TU(a){var c=a==null?0:a.length;return c?Ot(a,Q):[]}function SU(a,c){var f=a==null?0:a.length;return f?(c=c===t?1:ve(c),Ot(a,c)):[]}function vU(a){for(var c=-1,f=a==null?0:a.length,h={};++c<f;){var y=a[c];h[y[0]]=y[1]}return h}function C0(a){return a&&a.length?a[0]:t}function bU(a,c,f){var h=a==null?0:a.length;if(!h)return-1;var y=f==null?0:ve(f);return y<0&&(y=bt(h+y,0)),Ca(a,c,y)}function wU(a){var c=a==null?0:a.length;return c?tn(a,0,-1):[]}var _U=ke(function(a){var c=et(a,Ux);return c.length&&c[0]===a[0]?Px(c):[]}),EU=ke(function(a){var c=rn(a),f=et(a,Ux);return c===rn(f)?c=t:f.pop(),f.length&&f[0]===a[0]?Px(f,ue(c,2)):[]}),RU=ke(function(a){var c=rn(a),f=et(a,Ux);return c=typeof c=="function"?c:t,c&&f.pop(),f.length&&f[0]===a[0]?Px(f,t,c):[]});function kU(a,c){return a==null?"":wN.call(a,c)}function rn(a){var c=a==null?0:a.length;return c?a[c-1]:t}function PU(a,c,f){var h=a==null?0:a.length;if(!h)return-1;var y=h;return f!==t&&(y=ve(f),y=y<0?bt(h+y,0):$t(y,h-1)),c===c?sN(a,c,y):Qp(a,d_,y,!0)}function AU(a,c){return a&&a.length?q_(a,ve(c)):t}var MU=ke(O0);function O0(a,c){return a&&a.length&&c&&c.length?Fx(a,c):a}function DU(a,c,f){return a&&a.length&&c&&c.length?Fx(a,c,ue(f,2)):a}function FU(a,c,f){return a&&a.length&&c&&c.length?Fx(a,c,t,f):a}var IU=xi(function(a,c){var f=a==null?0:a.length,h=_x(a,c);return K_(a,et(c,function(y){return Ti(y,f)?+y:y}).sort(i0)),h});function CU(a,c){var f=[];if(!(a&&a.length))return f;var h=-1,y=[],S=a.length;for(c=ue(c,3);++h<S;){var E=a[h];c(E,h,a)&&(f.push(E),y.push(h))}return K_(a,y),f}function Xx(a){return a==null?a:kN.call(a)}function OU(a,c,f){var h=a==null?0:a.length;return h?(f&&typeof f!="number"&&Jt(a,c,f)?(c=0,f=h):(c=c==null?0:ve(c),f=f===t?h:ve(f)),tn(a,c,f)):[]}function NU(a,c){return hu(a,c)}function LU(a,c,f){return Ox(a,c,ue(f,2))}function UU(a,c){var f=a==null?0:a.length;if(f){var h=hu(a,c);if(h<f&&kn(a[h],c))return h}return-1}function HU(a,c){return hu(a,c,!0)}function VU(a,c,f){return Ox(a,c,ue(f,2),!0)}function BU(a,c){var f=a==null?0:a.length;if(f){var h=hu(a,c,!0)-1;if(kn(a[h],c))return h}return-1}function WU(a){return a&&a.length?Z_(a):[]}function $U(a,c){return a&&a.length?Z_(a,ue(c,2)):[]}function jU(a){var c=a==null?0:a.length;return c?tn(a,1,c):[]}function qU(a,c,f){return a&&a.length?(c=f||c===t?1:ve(c),tn(a,0,c<0?0:c)):[]}function zU(a,c,f){var h=a==null?0:a.length;return h?(c=f||c===t?1:ve(c),c=h-c,tn(a,c<0?0:c,h)):[]}function GU(a,c){return a&&a.length?gu(a,ue(c,3),!1,!0):[]}function KU(a,c){return a&&a.length?gu(a,ue(c,3)):[]}var QU=ke(function(a){return zi(Ot(a,1,ft,!0))}),ZU=ke(function(a){var c=rn(a);return ft(c)&&(c=t),zi(Ot(a,1,ft,!0),ue(c,2))}),YU=ke(function(a){var c=rn(a);return c=typeof c=="function"?c:t,zi(Ot(a,1,ft,!0),t,c)});function XU(a){return a&&a.length?zi(a):[]}function JU(a,c){return a&&a.length?zi(a,ue(c,2)):[]}function eH(a,c){return c=typeof c=="function"?c:t,a&&a.length?zi(a,t,c):[]}function Jx(a){if(!(a&&a.length))return[];var c=0;return a=Vi(a,function(f){if(ft(f))return c=bt(f.length,c),!0}),gx(c,function(f){return et(a,mx(f))})}function N0(a,c){if(!(a&&a.length))return[];var f=Jx(a);return c==null?f:et(f,function(h){return Mr(c,t,h)})}var tH=ke(function(a,c){return ft(a)?Lc(a,c):[]}),rH=ke(function(a){return Lx(Vi(a,ft))}),nH=ke(function(a){var c=rn(a);return ft(c)&&(c=t),Lx(Vi(a,ft),ue(c,2))}),iH=ke(function(a){var c=rn(a);return c=typeof c=="function"?c:t,Lx(Vi(a,ft),t,c)}),oH=ke(Jx);function aH(a,c){return e0(a||[],c||[],Nc)}function sH(a,c){return e0(a||[],c||[],Vc)}var cH=ke(function(a){var c=a.length,f=c>1?a[c-1]:t;return f=typeof f=="function"?(a.pop(),f):t,N0(a,f)});function L0(a){var c=T(a);return c.__chain__=!0,c}function lH(a,c){return c(a),a}function Eu(a,c){return c(a)}var pH=xi(function(a){var c=a.length,f=c?a[0]:0,h=this.__wrapped__,y=function(S){return _x(S,a)};return c>1||this.__actions__.length||!(h instanceof Fe)||!Ti(f)?this.thru(y):(h=h.slice(f,+f+(c?1:0)),h.__actions__.push({func:Eu,args:[y],thisArg:t}),new Jr(h,this.__chain__).thru(function(S){return c&&!S.length&&S.push(t),S}))});function uH(){return L0(this)}function fH(){return new Jr(this.value(),this.__chain__)}function mH(){this.__values__===t&&(this.__values__=Y0(this.value()));var a=this.__index__>=this.__values__.length,c=a?t:this.__values__[this.__index__++];return{done:a,value:c}}function dH(){return this}function hH(a){for(var c,f=this;f instanceof pu;){var h=M0(f);h.__index__=0,h.__values__=t,c?y.__wrapped__=h:c=h;var y=h;f=f.__wrapped__}return y.__wrapped__=a,c}function gH(){var a=this.__wrapped__;if(a instanceof Fe){var c=a;return this.__actions__.length&&(c=new Fe(this)),c=c.reverse(),c.__actions__.push({func:Eu,args:[Xx],thisArg:t}),new Jr(c,this.__chain__)}return this.thru(Xx)}function yH(){return J_(this.__wrapped__,this.__actions__)}var xH=yu(function(a,c,f){je.call(a,f)?++a[f]:gi(a,f,1)});function TH(a,c,f){var h=xe(a)?f_:lL;return f&&Jt(a,c,f)&&(c=t),h(a,ue(c,3))}function SH(a,c){var f=xe(a)?Vi:N_;return f(a,ue(c,3))}var vH=p0(D0),bH=p0(F0);function wH(a,c){return Ot(Ru(a,c),1)}function _H(a,c){return Ot(Ru(a,c),Q)}function EH(a,c,f){return f=f===t?1:ve(f),Ot(Ru(a,c),f)}function U0(a,c){var f=xe(a)?Yr:qi;return f(a,ue(c,3))}function H0(a,c){var f=xe(a)?jO:O_;return f(a,ue(c,3))}var RH=yu(function(a,c,f){je.call(a,f)?a[f].push(c):gi(a,f,[c])});function kH(a,c,f,h){a=dr(a)?a:qa(a),f=f&&!h?ve(f):0;var y=a.length;return f<0&&(f=bt(y+f,0)),Du(a)?f<=y&&a.indexOf(c,f)>-1:!!y&&Ca(a,c,f)>-1}var PH=ke(function(a,c,f){var h=-1,y=typeof c=="function",S=dr(a)?L(a.length):[];return qi(a,function(E){S[++h]=y?Mr(c,E,f):Uc(E,c,f)}),S}),AH=yu(function(a,c,f){gi(a,f,c)});function Ru(a,c){var f=xe(a)?et:W_;return f(a,ue(c,3))}function MH(a,c,f,h){return a==null?[]:(xe(c)||(c=c==null?[]:[c]),f=h?t:f,xe(f)||(f=f==null?[]:[f]),z_(a,c,f))}var DH=yu(function(a,c,f){a[f?0:1].push(c)},function(){return[[],[]]});function FH(a,c,f){var h=xe(a)?ux:g_,y=arguments.length<3;return h(a,ue(c,4),f,y,qi)}function IH(a,c,f){var h=xe(a)?qO:g_,y=arguments.length<3;return h(a,ue(c,4),f,y,O_)}function CH(a,c){var f=xe(a)?Vi:N_;return f(a,Au(ue(c,3)))}function OH(a){var c=xe(a)?D_:kL;return c(a)}function NH(a,c,f){(f?Jt(a,c,f):c===t)?c=1:c=ve(c);var h=xe(a)?iL:PL;return h(a,c)}function LH(a){var c=xe(a)?oL:ML;return c(a)}function UH(a){if(a==null)return 0;if(dr(a))return Du(a)?Na(a):a.length;var c=jt(a);return c==wn||c==_n?a.size:Mx(a).length}function HH(a,c,f){var h=xe(a)?fx:DL;return f&&Jt(a,c,f)&&(c=t),h(a,ue(c,3))}var VH=ke(function(a,c){if(a==null)return[];var f=c.length;return f>1&&Jt(a,c[0],c[1])?c=[]:f>2&&Jt(c[0],c[1],c[2])&&(c=[c[0]]),z_(a,Ot(c,1),[])}),ku=SN||function(){return kt.Date.now()};function BH(a,c){if(typeof c!="function")throw new Xr(i);return a=ve(a),function(){if(--a<1)return c.apply(this,arguments)}}function V0(a,c,f){return c=f?t:c,c=a&&c==null?a.length:c,yi(a,ie,t,t,t,t,c)}function B0(a,c){var f;if(typeof c!="function")throw new Xr(i);return a=ve(a),function(){return--a>0&&(f=c.apply(this,arguments)),a<=1&&(c=t),f}}var eT=ke(function(a,c,f){var h=b;if(f.length){var y=Wi(f,$a(eT));h|=K}return yi(a,h,c,f,y)}),W0=ke(function(a,c,f){var h=b|v;if(f.length){var y=Wi(f,$a(W0));h|=K}return yi(c,h,a,f,y)});function $0(a,c,f){c=f?t:c;var h=yi(a,F,t,t,t,t,t,c);return h.placeholder=$0.placeholder,h}function j0(a,c,f){c=f?t:c;var h=yi(a,U,t,t,t,t,t,c);return h.placeholder=j0.placeholder,h}function q0(a,c,f){var h,y,S,E,R,M,V=0,B=!1,j=!1,Y=!0;if(typeof a!="function")throw new Xr(i);c=nn(c)||0,ot(f)&&(B=!!f.leading,j="maxWait"in f,S=j?bt(nn(f.maxWait)||0,c):S,Y="trailing"in f?!!f.trailing:Y);function oe(mt){var Pn=h,bi=y;return h=y=t,V=mt,E=a.apply(bi,Pn),E}function fe(mt){return V=mt,R=$c(Me,c),B?oe(mt):E}function Ee(mt){var Pn=mt-M,bi=mt-V,pE=c-Pn;return j?$t(pE,S-bi):pE}function me(mt){var Pn=mt-M,bi=mt-V;return M===t||Pn>=c||Pn<0||j&&bi>=S}function Me(){var mt=ku();if(me(mt))return Ie(mt);R=$c(Me,Ee(mt))}function Ie(mt){return R=t,Y&&h?oe(mt):(h=y=t,E)}function Cr(){R!==t&&t0(R),V=0,h=M=y=R=t}function er(){return R===t?E:Ie(ku())}function Or(){var mt=ku(),Pn=me(mt);if(h=arguments,y=this,M=mt,Pn){if(R===t)return fe(M);if(j)return t0(R),R=$c(Me,c),oe(M)}return R===t&&(R=$c(Me,c)),E}return Or.cancel=Cr,Or.flush=er,Or}var WH=ke(function(a,c){return C_(a,1,c)}),$H=ke(function(a,c,f){return C_(a,nn(c)||0,f)});function jH(a){return yi(a,it)}function Pu(a,c){if(typeof a!="function"||c!=null&&typeof c!="function")throw new Xr(i);var f=function(){var h=arguments,y=c?c.apply(this,h):h[0],S=f.cache;if(S.has(y))return S.get(y);var E=a.apply(this,h);return f.cache=S.set(y,E)||S,E};return f.cache=new(Pu.Cache||hi),f}Pu.Cache=hi;function Au(a){if(typeof a!="function")throw new Xr(i);return function(){var c=arguments;switch(c.length){case 0:return!a.call(this);case 1:return!a.call(this,c[0]);case 2:return!a.call(this,c[0],c[1]);case 3:return!a.call(this,c[0],c[1],c[2])}return!a.apply(this,c)}}function qH(a){return B0(2,a)}var zH=FL(function(a,c){c=c.length==1&&xe(c[0])?et(c[0],Dr(ue())):et(Ot(c,1),Dr(ue()));var f=c.length;return ke(function(h){for(var y=-1,S=$t(h.length,f);++y<S;)h[y]=c[y].call(this,h[y]);return Mr(a,this,h)})}),tT=ke(function(a,c){var f=Wi(c,$a(tT));return yi(a,K,t,c,f)}),z0=ke(function(a,c){var f=Wi(c,$a(z0));return yi(a,ne,t,c,f)}),GH=xi(function(a,c){return yi(a,se,t,t,t,c)});function KH(a,c){if(typeof a!="function")throw new Xr(i);return c=c===t?c:ve(c),ke(a,c)}function QH(a,c){if(typeof a!="function")throw new Xr(i);return c=c==null?0:bt(ve(c),0),ke(function(f){var h=f[c],y=Ki(f,0,c);return h&&Bi(y,h),Mr(a,this,y)})}function ZH(a,c,f){var h=!0,y=!0;if(typeof a!="function")throw new Xr(i);return ot(f)&&(h="leading"in f?!!f.leading:h,y="trailing"in f?!!f.trailing:y),q0(a,c,{leading:h,maxWait:c,trailing:y})}function YH(a){return V0(a,1)}function XH(a,c){return tT(Hx(c),a)}function JH(){if(!arguments.length)return[];var a=arguments[0];return xe(a)?a:[a]}function e2(a){return en(a,d)}function t2(a,c){return c=typeof c=="function"?c:t,en(a,d,c)}function r2(a){return en(a,u|d)}function n2(a,c){return c=typeof c=="function"?c:t,en(a,u|d,c)}function i2(a,c){return c==null||I_(a,c,Pt(c))}function kn(a,c){return a===c||a!==a&&c!==c}var o2=vu(kx),a2=vu(function(a,c){return a>=c}),Wo=H_(function(){return arguments}())?H_:function(a){return lt(a)&&je.call(a,"callee")&&!E_.call(a,"callee")},xe=L.isArray,s2=a_?Dr(a_):hL;function dr(a){return a!=null&&Mu(a.length)&&!Si(a)}function ft(a){return lt(a)&&dr(a)}function c2(a){return a===!0||a===!1||lt(a)&&Xt(a)==bn}var Qi=bN||fT,l2=s_?Dr(s_):gL;function p2(a){return lt(a)&&a.nodeType===1&&!jc(a)}function u2(a){if(a==null)return!0;if(dr(a)&&(xe(a)||typeof a=="string"||typeof a.splice=="function"||Qi(a)||ja(a)||Wo(a)))return!a.length;var c=jt(a);if(c==wn||c==_n)return!a.size;if(Wc(a))return!Mx(a).length;for(var f in a)if(je.call(a,f))return!1;return!0}function f2(a,c){return Hc(a,c)}function m2(a,c,f){f=typeof f=="function"?f:t;var h=f?f(a,c):t;return h===t?Hc(a,c,t,f):!!h}function rT(a){if(!lt(a))return!1;var c=Xt(a);return c==fi||c==Io||typeof a.message=="string"&&typeof a.name=="string"&&!jc(a)}function d2(a){return typeof a=="number"&&k_(a)}function Si(a){if(!ot(a))return!1;var c=Xt(a);return c==Da||c==Cw||c==Ar||c==U1}function G0(a){return typeof a=="number"&&a==ve(a)}function Mu(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=Z}function ot(a){var c=typeof a;return a!=null&&(c=="object"||c=="function")}function lt(a){return a!=null&&typeof a=="object"}var K0=c_?Dr(c_):xL;function h2(a,c){return a===c||Ax(a,c,zx(c))}function g2(a,c,f){return f=typeof f=="function"?f:t,Ax(a,c,zx(c),f)}function y2(a){return Q0(a)&&a!=+a}function x2(a){if(tU(a))throw new ye(n);return V_(a)}function T2(a){return a===null}function S2(a){return a==null}function Q0(a){return typeof a=="number"||lt(a)&&Xt(a)==Ec}function jc(a){if(!lt(a)||Xt(a)!=mi)return!1;var c=nu(a);if(c===null)return!0;var f=je.call(c,"constructor")&&c.constructor;return typeof f=="function"&&f instanceof f&&Jp.call(f)==gN}var nT=l_?Dr(l_):TL;function v2(a){return G0(a)&&a>=-Z&&a<=Z}var Z0=p_?Dr(p_):SL;function Du(a){return typeof a=="string"||!xe(a)&&lt(a)&&Xt(a)==kc}function Ir(a){return typeof a=="symbol"||lt(a)&&Xt(a)==jp}var ja=u_?Dr(u_):vL;function b2(a){return a===t}function w2(a){return lt(a)&&jt(a)==Pc}function _2(a){return lt(a)&&Xt(a)==V1}var E2=vu(Dx),R2=vu(function(a,c){return a<=c});function Y0(a){if(!a)return[];if(dr(a))return Du(a)?En(a):mr(a);if(Dc&&a[Dc])return iN(a[Dc]());var c=jt(a),f=c==wn?xx:c==_n?Zp:qa;return f(a)}function vi(a){if(!a)return a===0?a:0;if(a=nn(a),a===Q||a===-Q){var c=a<0?-1:1;return c*te}return a===a?a:0}function ve(a){var c=vi(a),f=c%1;return c===c?f?c-f:c:0}function X0(a){return a?Uo(ve(a),0,re):0}function nn(a){if(typeof a=="number")return a;if(Ir(a))return he;if(ot(a)){var c=typeof a.valueOf=="function"?a.valueOf():a;a=ot(c)?c+"":c}if(typeof a!="string")return a===0?a:+a;a=y_(a);var f=sO.test(a);return f||lO.test(a)?BO(a.slice(2),f?2:8):aO.test(a)?he:+a}function J0(a){return $n(a,hr(a))}function k2(a){return a?Uo(ve(a),-Z,Z):a===0?a:0}function We(a){return a==null?"":Fr(a)}var P2=Ba(function(a,c){if(Wc(c)||dr(c)){$n(c,Pt(c),a);return}for(var f in c)je.call(c,f)&&Nc(a,f,c[f])}),eE=Ba(function(a,c){$n(c,hr(c),a)}),Fu=Ba(function(a,c,f,h){$n(c,hr(c),a,h)}),A2=Ba(function(a,c,f,h){$n(c,Pt(c),a,h)}),M2=xi(_x);function D2(a,c){var f=Va(a);return c==null?f:F_(f,c)}var F2=ke(function(a,c){a=Ge(a);var f=-1,h=c.length,y=h>2?c[2]:t;for(y&&Jt(c[0],c[1],y)&&(h=1);++f<h;)for(var S=c[f],E=hr(S),R=-1,M=E.length;++R<M;){var V=E[R],B=a[V];(B===t||kn(B,La[V])&&!je.call(a,V))&&(a[V]=S[V])}return a}),I2=ke(function(a){return a.push(t,y0),Mr(tE,t,a)});function C2(a,c){return m_(a,ue(c,3),Wn)}function O2(a,c){return m_(a,ue(c,3),Rx)}function N2(a,c){return a==null?a:Ex(a,ue(c,3),hr)}function L2(a,c){return a==null?a:L_(a,ue(c,3),hr)}function U2(a,c){return a&&Wn(a,ue(c,3))}function H2(a,c){return a&&Rx(a,ue(c,3))}function V2(a){return a==null?[]:mu(a,Pt(a))}function B2(a){return a==null?[]:mu(a,hr(a))}function iT(a,c,f){var h=a==null?t:Ho(a,c);return h===t?f:h}function W2(a,c){return a!=null&&S0(a,c,uL)}function oT(a,c){return a!=null&&S0(a,c,fL)}var $2=f0(function(a,c,f){c!=null&&typeof c.toString!="function"&&(c=eu.call(c)),a[c]=f},sT(gr)),j2=f0(function(a,c,f){c!=null&&typeof c.toString!="function"&&(c=eu.call(c)),je.call(a,c)?a[c].push(f):a[c]=[f]},ue),q2=ke(Uc);function Pt(a){return dr(a)?M_(a):Mx(a)}function hr(a){return dr(a)?M_(a,!0):bL(a)}function z2(a,c){var f={};return c=ue(c,3),Wn(a,function(h,y,S){gi(f,c(h,y,S),h)}),f}function G2(a,c){var f={};return c=ue(c,3),Wn(a,function(h,y,S){gi(f,y,c(h,y,S))}),f}var K2=Ba(function(a,c,f){du(a,c,f)}),tE=Ba(function(a,c,f,h){du(a,c,f,h)}),Q2=xi(function(a,c){var f={};if(a==null)return f;var h=!1;c=et(c,function(S){return S=Gi(S,a),h||(h=S.length>1),S}),$n(a,jx(a),f),h&&(f=en(f,u|m|d,$L));for(var y=c.length;y--;)Nx(f,c[y]);return f});function Z2(a,c){return rE(a,Au(ue(c)))}var Y2=xi(function(a,c){return a==null?{}:_L(a,c)});function rE(a,c){if(a==null)return{};var f=et(jx(a),function(h){return[h]});return c=ue(c),G_(a,f,function(h,y){return c(h,y[0])})}function X2(a,c,f){c=Gi(c,a);var h=-1,y=c.length;for(y||(y=1,a=t);++h<y;){var S=a==null?t:a[jn(c[h])];S===t&&(h=y,S=f),a=Si(S)?S.call(a):S}return a}function J2(a,c,f){return a==null?a:Vc(a,c,f)}function eV(a,c,f,h){return h=typeof h=="function"?h:t,a==null?a:Vc(a,c,f,h)}var nE=h0(Pt),iE=h0(hr);function tV(a,c,f){var h=xe(a),y=h||Qi(a)||ja(a);if(c=ue(c,4),f==null){var S=a&&a.constructor;y?f=h?new S:[]:ot(a)?f=Si(S)?Va(nu(a)):{}:f={}}return(y?Yr:Wn)(a,function(E,R,M){return c(f,E,R,M)}),f}function rV(a,c){return a==null?!0:Nx(a,c)}function nV(a,c,f){return a==null?a:X_(a,c,Hx(f))}function iV(a,c,f,h){return h=typeof h=="function"?h:t,a==null?a:X_(a,c,Hx(f),h)}function qa(a){return a==null?[]:yx(a,Pt(a))}function oV(a){return a==null?[]:yx(a,hr(a))}function aV(a,c,f){return f===t&&(f=c,c=t),f!==t&&(f=nn(f),f=f===f?f:0),c!==t&&(c=nn(c),c=c===c?c:0),Uo(nn(a),c,f)}function sV(a,c,f){return c=vi(c),f===t?(f=c,c=0):f=vi(f),a=nn(a),mL(a,c,f)}function cV(a,c,f){if(f&&typeof f!="boolean"&&Jt(a,c,f)&&(c=f=t),f===t&&(typeof c=="boolean"?(f=c,c=t):typeof a=="boolean"&&(f=a,a=t)),a===t&&c===t?(a=0,c=1):(a=vi(a),c===t?(c=a,a=0):c=vi(c)),a>c){var h=a;a=c,c=h}if(f||a%1||c%1){var y=P_();return $t(a+y*(c-a+VO("1e-"+((y+"").length-1))),c)}return Ix(a,c)}var lV=Wa(function(a,c,f){return c=c.toLowerCase(),a+(f?oE(c):c)});function oE(a){return aT(We(a).toLowerCase())}function aE(a){return a=We(a),a&&a.replace(uO,JO).replace(MO,"")}function pV(a,c,f){a=We(a),c=Fr(c);var h=a.length;f=f===t?h:Uo(ve(f),0,h);var y=f;return f-=c.length,f>=0&&a.slice(f,y)==c}function uV(a){return a=We(a),a&&q1.test(a)?a.replace(Lw,eN):a}function fV(a){return a=We(a),a&&Y1.test(a)?a.replace(tx,"\\$&"):a}var mV=Wa(function(a,c,f){return a+(f?"-":"")+c.toLowerCase()}),dV=Wa(function(a,c,f){return a+(f?" ":"")+c.toLowerCase()}),hV=l0("toLowerCase");function gV(a,c,f){a=We(a),c=ve(c);var h=c?Na(a):0;if(!c||h>=c)return a;var y=(c-h)/2;return Su(su(y),f)+a+Su(au(y),f)}function yV(a,c,f){a=We(a),c=ve(c);var h=c?Na(a):0;return c&&h<c?a+Su(c-h,f):a}function xV(a,c,f){a=We(a),c=ve(c);var h=c?Na(a):0;return c&&h<c?Su(c-h,f)+a:a}function TV(a,c,f){return f||c==null?c=0:c&&(c=+c),RN(We(a).replace(rx,""),c||0)}function SV(a,c,f){return(f?Jt(a,c,f):c===t)?c=1:c=ve(c),Cx(We(a),c)}function vV(){var a=arguments,c=We(a[0]);return a.length<3?c:c.replace(a[1],a[2])}var bV=Wa(function(a,c,f){return a+(f?"_":"")+c.toLowerCase()});function wV(a,c,f){return f&&typeof f!="number"&&Jt(a,c,f)&&(c=f=t),f=f===t?re:f>>>0,f?(a=We(a),a&&(typeof c=="string"||c!=null&&!nT(c))&&(c=Fr(c),!c&&Oa(a))?Ki(En(a),0,f):a.split(c,f)):[]}var _V=Wa(function(a,c,f){return a+(f?" ":"")+aT(c)});function EV(a,c,f){return a=We(a),f=f==null?0:Uo(ve(f),0,a.length),c=Fr(c),a.slice(f,f+c.length)==c}function RV(a,c,f){var h=T.templateSettings;f&&Jt(a,c,f)&&(c=t),a=We(a),c=Fu({},c,h,g0);var y=Fu({},c.imports,h.imports,g0),S=Pt(y),E=yx(y,S),R,M,V=0,B=c.interpolate||qp,j="__p += '",Y=Tx((c.escape||qp).source+"|"+B.source+"|"+(B===Uw?oO:qp).source+"|"+(c.evaluate||qp).source+"|$","g"),oe="//# sourceURL="+(je.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++OO+"]")+`
`;a.replace(Y,function(me,Me,Ie,Cr,er,Or){return Ie||(Ie=Cr),j+=a.slice(V,Or).replace(fO,tN),Me&&(R=!0,j+=`' +
__e(`+Me+`) +
'`),er&&(M=!0,j+=`';
`+er+`;
__p += '`),Ie&&(j+=`' +
((__t = (`+Ie+`)) == null ? '' : __t) +
'`),V=Or+me.length,me}),j+=`';
`;var fe=je.call(c,"variable")&&c.variable;if(!fe)j=`with (obj) {
`+j+`
}
`;else if(nO.test(fe))throw new ye(o);j=(M?j.replace(B1,""):j).replace(W1,"$1").replace($1,"$1;"),j="function("+(fe||"obj")+`) {
`+(fe?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(R?", __e = _.escape":"")+(M?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+j+`return __p
}`;var Ee=cE(function(){return Ve(S,oe+"return "+j).apply(t,E)});if(Ee.source=j,rT(Ee))throw Ee;return Ee}function kV(a){return We(a).toLowerCase()}function PV(a){return We(a).toUpperCase()}function AV(a,c,f){if(a=We(a),a&&(f||c===t))return y_(a);if(!a||!(c=Fr(c)))return a;var h=En(a),y=En(c),S=x_(h,y),E=T_(h,y)+1;return Ki(h,S,E).join("")}function MV(a,c,f){if(a=We(a),a&&(f||c===t))return a.slice(0,v_(a)+1);if(!a||!(c=Fr(c)))return a;var h=En(a),y=T_(h,En(c))+1;return Ki(h,0,y).join("")}function DV(a,c,f){if(a=We(a),a&&(f||c===t))return a.replace(rx,"");if(!a||!(c=Fr(c)))return a;var h=En(a),y=x_(h,En(c));return Ki(h,y).join("")}function FV(a,c){var f=Ct,h=ct;if(ot(c)){var y="separator"in c?c.separator:y;f="length"in c?ve(c.length):f,h="omission"in c?Fr(c.omission):h}a=We(a);var S=a.length;if(Oa(a)){var E=En(a);S=E.length}if(f>=S)return a;var R=f-Na(h);if(R<1)return h;var M=E?Ki(E,0,R).join(""):a.slice(0,R);if(y===t)return M+h;if(E&&(R+=M.length-R),nT(y)){if(a.slice(R).search(y)){var V,B=M;for(y.global||(y=Tx(y.source,We(Hw.exec(y))+"g")),y.lastIndex=0;V=y.exec(B);)var j=V.index;M=M.slice(0,j===t?R:j)}}else if(a.indexOf(Fr(y),R)!=R){var Y=M.lastIndexOf(y);Y>-1&&(M=M.slice(0,Y))}return M+h}function IV(a){return a=We(a),a&&j1.test(a)?a.replace(Nw,cN):a}var CV=Wa(function(a,c,f){return a+(f?" ":"")+c.toUpperCase()}),aT=l0("toUpperCase");function sE(a,c,f){return a=We(a),c=f?t:c,c===t?nN(a)?uN(a):KO(a):a.match(c)||[]}var cE=ke(function(a,c){try{return Mr(a,t,c)}catch(f){return rT(f)?f:new ye(f)}}),OV=xi(function(a,c){return Yr(c,function(f){f=jn(f),gi(a,f,eT(a[f],a))}),a});function NV(a){var c=a==null?0:a.length,f=ue();return a=c?et(a,function(h){if(typeof h[1]!="function")throw new Xr(i);return[f(h[0]),h[1]]}):[],ke(function(h){for(var y=-1;++y<c;){var S=a[y];if(Mr(S[0],this,h))return Mr(S[1],this,h)}})}function LV(a){return cL(en(a,u))}function sT(a){return function(){return a}}function UV(a,c){return a==null||a!==a?c:a}var HV=u0(),VV=u0(!0);function gr(a){return a}function cT(a){return B_(typeof a=="function"?a:en(a,u))}function BV(a){return $_(en(a,u))}function WV(a,c){return j_(a,en(c,u))}var $V=ke(function(a,c){return function(f){return Uc(f,a,c)}}),jV=ke(function(a,c){return function(f){return Uc(a,f,c)}});function lT(a,c,f){var h=Pt(c),y=mu(c,h);f==null&&!(ot(c)&&(y.length||!h.length))&&(f=c,c=a,a=this,y=mu(c,Pt(c)));var S=!(ot(f)&&"chain"in f)||!!f.chain,E=Si(a);return Yr(y,function(R){var M=c[R];a[R]=M,E&&(a.prototype[R]=function(){var V=this.__chain__;if(S||V){var B=a(this.__wrapped__),j=B.__actions__=mr(this.__actions__);return j.push({func:M,args:arguments,thisArg:a}),B.__chain__=V,B}return M.apply(a,Bi([this.value()],arguments))})}),a}function qV(){return kt._===this&&(kt._=yN),this}function pT(){}function zV(a){return a=ve(a),ke(function(c){return q_(c,a)})}var GV=Bx(et),KV=Bx(f_),QV=Bx(fx);function lE(a){return Kx(a)?mx(jn(a)):EL(a)}function ZV(a){return function(c){return a==null?t:Ho(a,c)}}var YV=m0(),XV=m0(!0);function uT(){return[]}function fT(){return!1}function JV(){return{}}function eB(){return""}function tB(){return!0}function rB(a,c){if(a=ve(a),a<1||a>Z)return[];var f=re,h=$t(a,re);c=ue(c),a-=re;for(var y=gx(h,c);++f<a;)c(f);return y}function nB(a){return xe(a)?et(a,jn):Ir(a)?[a]:mr(A0(We(a)))}function iB(a){var c=++hN;return We(a)+c}var oB=Tu(function(a,c){return a+c},0),aB=Wx("ceil"),sB=Tu(function(a,c){return a/c},1),cB=Wx("floor");function lB(a){return a&&a.length?fu(a,gr,kx):t}function pB(a,c){return a&&a.length?fu(a,ue(c,2),kx):t}function uB(a){return h_(a,gr)}function fB(a,c){return h_(a,ue(c,2))}function mB(a){return a&&a.length?fu(a,gr,Dx):t}function dB(a,c){return a&&a.length?fu(a,ue(c,2),Dx):t}var hB=Tu(function(a,c){return a*c},1),gB=Wx("round"),yB=Tu(function(a,c){return a-c},0);function xB(a){return a&&a.length?hx(a,gr):0}function TB(a,c){return a&&a.length?hx(a,ue(c,2)):0}return T.after=BH,T.ary=V0,T.assign=P2,T.assignIn=eE,T.assignInWith=Fu,T.assignWith=A2,T.at=M2,T.before=B0,T.bind=eT,T.bindAll=OV,T.bindKey=W0,T.castArray=JH,T.chain=L0,T.chunk=cU,T.compact=lU,T.concat=pU,T.cond=NV,T.conforms=LV,T.constant=sT,T.countBy=xH,T.create=D2,T.curry=$0,T.curryRight=j0,T.debounce=q0,T.defaults=F2,T.defaultsDeep=I2,T.defer=WH,T.delay=$H,T.difference=uU,T.differenceBy=fU,T.differenceWith=mU,T.drop=dU,T.dropRight=hU,T.dropRightWhile=gU,T.dropWhile=yU,T.fill=xU,T.filter=SH,T.flatMap=wH,T.flatMapDeep=_H,T.flatMapDepth=EH,T.flatten=I0,T.flattenDeep=TU,T.flattenDepth=SU,T.flip=jH,T.flow=HV,T.flowRight=VV,T.fromPairs=vU,T.functions=V2,T.functionsIn=B2,T.groupBy=RH,T.initial=wU,T.intersection=_U,T.intersectionBy=EU,T.intersectionWith=RU,T.invert=$2,T.invertBy=j2,T.invokeMap=PH,T.iteratee=cT,T.keyBy=AH,T.keys=Pt,T.keysIn=hr,T.map=Ru,T.mapKeys=z2,T.mapValues=G2,T.matches=BV,T.matchesProperty=WV,T.memoize=Pu,T.merge=K2,T.mergeWith=tE,T.method=$V,T.methodOf=jV,T.mixin=lT,T.negate=Au,T.nthArg=zV,T.omit=Q2,T.omitBy=Z2,T.once=qH,T.orderBy=MH,T.over=GV,T.overArgs=zH,T.overEvery=KV,T.overSome=QV,T.partial=tT,T.partialRight=z0,T.partition=DH,T.pick=Y2,T.pickBy=rE,T.property=lE,T.propertyOf=ZV,T.pull=MU,T.pullAll=O0,T.pullAllBy=DU,T.pullAllWith=FU,T.pullAt=IU,T.range=YV,T.rangeRight=XV,T.rearg=GH,T.reject=CH,T.remove=CU,T.rest=KH,T.reverse=Xx,T.sampleSize=NH,T.set=J2,T.setWith=eV,T.shuffle=LH,T.slice=OU,T.sortBy=VH,T.sortedUniq=WU,T.sortedUniqBy=$U,T.split=wV,T.spread=QH,T.tail=jU,T.take=qU,T.takeRight=zU,T.takeRightWhile=GU,T.takeWhile=KU,T.tap=lH,T.throttle=ZH,T.thru=Eu,T.toArray=Y0,T.toPairs=nE,T.toPairsIn=iE,T.toPath=nB,T.toPlainObject=J0,T.transform=tV,T.unary=YH,T.union=QU,T.unionBy=ZU,T.unionWith=YU,T.uniq=XU,T.uniqBy=JU,T.uniqWith=eH,T.unset=rV,T.unzip=Jx,T.unzipWith=N0,T.update=nV,T.updateWith=iV,T.values=qa,T.valuesIn=oV,T.without=tH,T.words=sE,T.wrap=XH,T.xor=rH,T.xorBy=nH,T.xorWith=iH,T.zip=oH,T.zipObject=aH,T.zipObjectDeep=sH,T.zipWith=cH,T.entries=nE,T.entriesIn=iE,T.extend=eE,T.extendWith=Fu,lT(T,T),T.add=oB,T.attempt=cE,T.camelCase=lV,T.capitalize=oE,T.ceil=aB,T.clamp=aV,T.clone=e2,T.cloneDeep=r2,T.cloneDeepWith=n2,T.cloneWith=t2,T.conformsTo=i2,T.deburr=aE,T.defaultTo=UV,T.divide=sB,T.endsWith=pV,T.eq=kn,T.escape=uV,T.escapeRegExp=fV,T.every=TH,T.find=vH,T.findIndex=D0,T.findKey=C2,T.findLast=bH,T.findLastIndex=F0,T.findLastKey=O2,T.floor=cB,T.forEach=U0,T.forEachRight=H0,T.forIn=N2,T.forInRight=L2,T.forOwn=U2,T.forOwnRight=H2,T.get=iT,T.gt=o2,T.gte=a2,T.has=W2,T.hasIn=oT,T.head=C0,T.identity=gr,T.includes=kH,T.indexOf=bU,T.inRange=sV,T.invoke=q2,T.isArguments=Wo,T.isArray=xe,T.isArrayBuffer=s2,T.isArrayLike=dr,T.isArrayLikeObject=ft,T.isBoolean=c2,T.isBuffer=Qi,T.isDate=l2,T.isElement=p2,T.isEmpty=u2,T.isEqual=f2,T.isEqualWith=m2,T.isError=rT,T.isFinite=d2,T.isFunction=Si,T.isInteger=G0,T.isLength=Mu,T.isMap=K0,T.isMatch=h2,T.isMatchWith=g2,T.isNaN=y2,T.isNative=x2,T.isNil=S2,T.isNull=T2,T.isNumber=Q0,T.isObject=ot,T.isObjectLike=lt,T.isPlainObject=jc,T.isRegExp=nT,T.isSafeInteger=v2,T.isSet=Z0,T.isString=Du,T.isSymbol=Ir,T.isTypedArray=ja,T.isUndefined=b2,T.isWeakMap=w2,T.isWeakSet=_2,T.join=kU,T.kebabCase=mV,T.last=rn,T.lastIndexOf=PU,T.lowerCase=dV,T.lowerFirst=hV,T.lt=E2,T.lte=R2,T.max=lB,T.maxBy=pB,T.mean=uB,T.meanBy=fB,T.min=mB,T.minBy=dB,T.stubArray=uT,T.stubFalse=fT,T.stubObject=JV,T.stubString=eB,T.stubTrue=tB,T.multiply=hB,T.nth=AU,T.noConflict=qV,T.noop=pT,T.now=ku,T.pad=gV,T.padEnd=yV,T.padStart=xV,T.parseInt=TV,T.random=cV,T.reduce=FH,T.reduceRight=IH,T.repeat=SV,T.replace=vV,T.result=X2,T.round=gB,T.runInContext=P,T.sample=OH,T.size=UH,T.snakeCase=bV,T.some=HH,T.sortedIndex=NU,T.sortedIndexBy=LU,T.sortedIndexOf=UU,T.sortedLastIndex=HU,T.sortedLastIndexBy=VU,T.sortedLastIndexOf=BU,T.startCase=_V,T.startsWith=EV,T.subtract=yB,T.sum=xB,T.sumBy=TB,T.template=RV,T.times=rB,T.toFinite=vi,T.toInteger=ve,T.toLength=X0,T.toLower=kV,T.toNumber=nn,T.toSafeInteger=k2,T.toString=We,T.toUpper=PV,T.trim=AV,T.trimEnd=MV,T.trimStart=DV,T.truncate=FV,T.unescape=IV,T.uniqueId=iB,T.upperCase=CV,T.upperFirst=aT,T.each=U0,T.eachRight=H0,T.first=C0,lT(T,function(){var a={};return Wn(T,function(c,f){je.call(T.prototype,f)||(a[f]=c)}),a}(),{chain:!1}),T.VERSION=e,Yr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){T[a].placeholder=T}),Yr(["drop","take"],function(a,c){Fe.prototype[a]=function(f){f=f===t?1:bt(ve(f),0);var h=this.__filtered__&&!c?new Fe(this):this.clone();return h.__filtered__?h.__takeCount__=$t(f,h.__takeCount__):h.__views__.push({size:$t(f,re),type:a+(h.__dir__<0?"Right":"")}),h},Fe.prototype[a+"Right"]=function(f){return this.reverse()[a](f).reverse()}}),Yr(["filter","map","takeWhile"],function(a,c){var f=c+1,h=f==D||f==z;Fe.prototype[a]=function(y){var S=this.clone();return S.__iteratees__.push({iteratee:ue(y,3),type:f}),S.__filtered__=S.__filtered__||h,S}}),Yr(["head","last"],function(a,c){var f="take"+(c?"Right":"");Fe.prototype[a]=function(){return this[f](1).value()[0]}}),Yr(["initial","tail"],function(a,c){var f="drop"+(c?"":"Right");Fe.prototype[a]=function(){return this.__filtered__?new Fe(this):this[f](1)}}),Fe.prototype.compact=function(){return this.filter(gr)},Fe.prototype.find=function(a){return this.filter(a).head()},Fe.prototype.findLast=function(a){return this.reverse().find(a)},Fe.prototype.invokeMap=ke(function(a,c){return typeof a=="function"?new Fe(this):this.map(function(f){return Uc(f,a,c)})}),Fe.prototype.reject=function(a){return this.filter(Au(ue(a)))},Fe.prototype.slice=function(a,c){a=ve(a);var f=this;return f.__filtered__&&(a>0||c<0)?new Fe(f):(a<0?f=f.takeRight(-a):a&&(f=f.drop(a)),c!==t&&(c=ve(c),f=c<0?f.dropRight(-c):f.take(c-a)),f)},Fe.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},Fe.prototype.toArray=function(){return this.take(re)},Wn(Fe.prototype,function(a,c){var f=/^(?:filter|find|map|reject)|While$/.test(c),h=/^(?:head|last)$/.test(c),y=T[h?"take"+(c=="last"?"Right":""):c],S=h||/^find/.test(c);y&&(T.prototype[c]=function(){var E=this.__wrapped__,R=h?[1]:arguments,M=E instanceof Fe,V=R[0],B=M||xe(E),j=function(Me){var Ie=y.apply(T,Bi([Me],R));return h&&Y?Ie[0]:Ie};B&&f&&typeof V=="function"&&V.length!=1&&(M=B=!1);var Y=this.__chain__,oe=!!this.__actions__.length,fe=S&&!Y,Ee=M&&!oe;if(!S&&B){E=Ee?E:new Fe(this);var me=a.apply(E,R);return me.__actions__.push({func:Eu,args:[j],thisArg:t}),new Jr(me,Y)}return fe&&Ee?a.apply(this,R):(me=this.thru(j),fe?h?me.value()[0]:me.value():me)})}),Yr(["pop","push","shift","sort","splice","unshift"],function(a){var c=Yp[a],f=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",h=/^(?:pop|shift)$/.test(a);T.prototype[a]=function(){var y=arguments;if(h&&!this.__chain__){var S=this.value();return c.apply(xe(S)?S:[],y)}return this[f](function(E){return c.apply(xe(E)?E:[],y)})}}),Wn(Fe.prototype,function(a,c){var f=T[c];if(f){var h=f.name+"";je.call(Ha,h)||(Ha[h]=[]),Ha[h].push({name:c,func:f})}}),Ha[xu(t,v).name]=[{name:"wrapper",func:t}],Fe.prototype.clone=IN,Fe.prototype.reverse=CN,Fe.prototype.value=ON,T.prototype.at=pH,T.prototype.chain=uH,T.prototype.commit=fH,T.prototype.next=mH,T.prototype.plant=hH,T.prototype.reverse=gH,T.prototype.toJSON=T.prototype.valueOf=T.prototype.value=yH,T.prototype.first=T.prototype.head,Dc&&(T.prototype[Dc]=dH),T},$i=fN();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(kt._=$i,define(function(){return $i})):Co?((Co.exports=$i)._=$i,cx._=$i):kt._=$i}).call(lc)});var NI=Ke((HUe,OI)=>{"use strict";OI.exports=II;function II(t,e,r){t instanceof RegExp&&(t=FI(t,r)),e instanceof RegExp&&(e=FI(e,r));var n=CI(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}function FI(t,e){var r=e.match(t);return r?r[0]:null}II.range=CI;function CI(t,e,r){var n,i,o,s,l,p=r.indexOf(t),u=r.indexOf(e,p+1),m=p;if(p>=0&&u>0){if(t===e)return[p,u];for(n=[],o=r.length;m>=0&&!l;)m==p?(n.push(m),p=r.indexOf(t,m+1)):n.length==1?l=[n.pop(),u]:(i=n.pop(),i<o&&(o=i,s=u),u=r.indexOf(e,m+1)),m=p<u&&p>=0?p:u;n.length&&(l=[o,s])}return l}});var jI=Ke((VUe,$I)=>{var LI=NI();$I.exports=BZ;var UI="\0SLASH"+Math.random()+"\0",HI="\0OPEN"+Math.random()+"\0",db="\0CLOSE"+Math.random()+"\0",VI="\0COMMA"+Math.random()+"\0",BI="\0PERIOD"+Math.random()+"\0";function mb(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function HZ(t){return t.split("\\\\").join(UI).split("\\{").join(HI).split("\\}").join(db).split("\\,").join(VI).split("\\.").join(BI)}function VZ(t){return t.split(UI).join("\\").split(HI).join("{").split(db).join("}").split(VI).join(",").split(BI).join(".")}function WI(t){if(!t)return[""];var e=[],r=LI("{","}",t);if(!r)return t.split(",");var n=r.pre,i=r.body,o=r.post,s=n.split(",");s[s.length-1]+="{"+i+"}";var l=WI(o);return o.length&&(s[s.length-1]+=l.shift(),s.push.apply(s,l)),e.push.apply(e,s),e}function BZ(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),Tp(HZ(t),!0).map(VZ)):[]}function WZ(t){return"{"+t+"}"}function $Z(t){return/^-?0\d/.test(t)}function jZ(t,e){return t<=e}function qZ(t,e){return t>=e}function Tp(t,e){var r=[],n=LI("{","}",t);if(!n)return[t];var i=n.pre,o=n.post.length?Tp(n.post,!1):[""];if(/\$$/.test(n.pre))for(var s=0;s<o.length;s++){var l=i+"{"+n.body+"}"+o[s];r.push(l)}else{var p=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),u=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),m=p||u,d=n.body.indexOf(",")>=0;if(!m&&!d)return n.post.match(/,.*\}/)?(t=n.pre+"{"+n.body+db+n.post,Tp(t)):[t];var g;if(m)g=n.body.split(/\.\./);else if(g=WI(n.body),g.length===1&&(g=Tp(g[0],!1).map(WZ),g.length===1))return o.map(function(N){return n.pre+g[0]+N});var x;if(m){var b=mb(g[0]),v=mb(g[1]),I=Math.max(g[0].length,g[1].length),F=g.length==3?Math.abs(mb(g[2])):1,U=jZ,K=v<b;K&&(F*=-1,U=qZ);var ne=g.some($Z);x=[];for(var ie=b;U(ie,v);ie+=F){var se;if(u)se=String.fromCharCode(ie),se==="\\"&&(se="");else if(se=String(ie),ne){var it=I-se.length;if(it>0){var Ct=new Array(it+1).join("0");ie<0?se="-"+Ct+se.slice(1):se=Ct+se}}x.push(se)}}else{x=[];for(var ct=0;ct<g.length;ct++)x.push.apply(x,Tp(g[ct],!1))}for(var ct=0;ct<x.length;ct++)for(var s=0;s<o.length;s++){var l=i+x[ct]+o[s];(!e||m||l)&&r.push(l)}}return r}});var DX={};EB(DX,{default:()=>N1});module.exports=RB(DX);var mT="cursorless.command",Cu=class{constructor(e){this.baseTitle=e}get title(){return`Cursorless: ${this.baseTitle}`}},pt=class extends Cu{constructor(){super(...arguments);this.isVisible=!1}},dt=class extends Cu{constructor(){super(...arguments);this.isVisible=!0}};var IX={"cursorless.toggleDecorations":new dt("Toggle decorations"),"cursorless.recomputeDecorationStyles":new dt("Recompute decoration styles"),"cursorless.recordTestCase":new dt("Record test case"),"cursorless.recordOneTestCaseThenPause":new dt("Record one test case, then pause"),"cursorless.pauseRecording":new dt("Pause test case recording"),"cursorless.resumeRecording":new dt("Resume test case recording"),"cursorless.recordScopeTests.showUnimplementedFacets":new dt("Bulk record unimplemented scope facets"),"cursorless.recordScopeTests.saveActiveDocument":new dt("Bulk save scope tests for the active document"),"cursorless.showDocumentation":new dt("Show documentation"),"cursorless.showInstallationDependencies":new dt("Show installation dependencies"),"cursorless.showScopeVisualizer":new dt("Show the scope visualizer"),"cursorless.hideScopeVisualizer":new dt("Hide the scope visualizer"),"cursorless.analyzeCommandHistory":new dt("Analyze collected command history"),"cursorless.tutorial.start":new pt("Start a tutorial"),"cursorless.tutorial.next":new dt("Tutorial next"),"cursorless.tutorial.previous":new dt("Tutorial previous"),"cursorless.tutorial.restart":new dt("Tutorial restart"),"cursorless.tutorial.resume":new dt("Tutorial resume"),"cursorless.tutorial.list":new dt("Tutorial list"),"cursorless.documentationOpened":new pt("Used by talon to notify us that the docs have been opened; for use with tutorial"),"cursorless.command":new pt("The core cursorless command"),"cursorless.repeatPreviousCommand":new dt("Repeat the previous Cursorless command"),"cursorless.showQuickPick":new pt("Pop up a quick pick of all cursorless commands"),"cursorless.showCheatsheet":new pt("Display the cursorless cheatsheet"),"cursorless.internal.updateCheatsheetDefaults":new pt("Update the default values of the cheatsheet payload used on the website and for local development. Be sure to run this on stock community and cursorless."),"cursorless.private.logQuickActions":new pt("Log the quick actions available at the current cursor position"),"cursorless.takeSnapshot":new pt("Take a snapshot of the current editor state"),"cursorless.keyboard.escape":new pt("Should be mapped to the escape key when using cursorless keyboard. By default, exits modal keyboard mode, but changes behaviour when Cursorless is expecting a continuation keystroke.  For example, when you type a color and Cursorless is waiting for a character, it cancels the color and switches back to modal mode."),"cursorless.keyboard.targeted.targetHat":new pt("Sets the keyboard target to the given hat"),"cursorless.keyboard.targeted.targetScope":new pt("Sets the keyboard target to the scope containing the current target"),"cursorless.keyboard.targeted.targetSelection":new pt("Sets the keyboard target to the current selection"),"cursorless.keyboard.targeted.clearTarget":new pt("Clears the current keyboard target"),"cursorless.keyboard.targeted.runActionOnTarget":new pt("Run the given action on the current keyboard target"),"cursorless.keyboard.modal.modeOn":new pt("Turn on the cursorless modal mode"),"cursorless.keyboard.modal.modeOff":new pt("Turn off the cursorless modal mode"),"cursorless.keyboard.modal.modeToggle":new pt("Toggle the cursorless modal mode"),"cursorless.keyboard.undoTarget":new pt("Undo keyboard targeting changes"),"cursorless.keyboard.redoTarget":new pt("Redo keyboard targeting changes"),"cursorless.migrateSnippets":new pt("Migrate snippets from the old Cursorless format to the new community format")};var Ou=class{constructor(e,r){this.callback=e;this.debounceDelayMs=r;this.timeoutHandle=null;this.run=this.run.bind(this)}run(){this.timeoutHandle!=null&&clearTimeout(this.timeoutHandle),this.timeoutHandle=setTimeout(()=>{this.callback(),this.timeoutHandle=null},this.debounceDelayMs)}dispose(){this.timeoutHandle!=null&&clearTimeout(this.timeoutHandle)}};var Nu=class extends Error{constructor(e){super(`Language '${e}' is not implemented yet; See https://www.cursorless.org/docs/contributing/adding-a-new-language/`),this.name="UnsupportedLanguageError"}};var Lu=class extends Error{constructor(){super("Cursorless Talon version is ahead of Cursorless VSCode extension version. Please update Cursorless VSCode.")}},ut=class extends Error{constructor(e){super(`Couldn't find containing ${e}.`),this.name="NoContainingScopeError"}};var Uu=class{constructor(){this.signals={prePhrase:{getVersion:async()=>null}}}async getFocusedElementType(){return this.focusedElementType}setFocusedElementType(e){this.focusedElementType=e}};var kB=typeof global=="object"&&global&&global.Object===Object&&global,Hu=kB;var PB=typeof self=="object"&&self&&self.Object===Object&&self,AB=Hu||PB||Function("return this")(),At=AB;var MB=At.Symbol,tr=MB;var fE=Object.prototype,DB=fE.hasOwnProperty,FB=fE.toString,qc=tr?tr.toStringTag:void 0;function IB(t){var e=DB.call(t,qc),r=t[qc];try{t[qc]=void 0;var n=!0}catch{}var i=FB.call(t);return n&&(e?t[qc]=r:delete t[qc]),i}var mE=IB;var CB=Object.prototype,OB=CB.toString;function NB(t){return OB.call(t)}var dE=NB;var LB="[object Null]",UB="[object Undefined]",hE=tr?tr.toStringTag:void 0;function HB(t){return t==null?t===void 0?UB:LB:hE&&hE in Object(t)?mE(t):dE(t)}var An=HB;function VB(t){return t!=null&&typeof t=="object"}var rr=VB;var BB="[object Symbol]";function WB(t){return typeof t=="symbol"||rr(t)&&An(t)==BB}var Nr=WB;function $B(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var on=$B;var jB=Array.isArray,qe=jB;var qB=1/0,gE=tr?tr.prototype:void 0,yE=gE?gE.toString:void 0;function xE(t){if(typeof t=="string")return t;if(qe(t))return on(t,xE)+"";if(Nr(t))return yE?yE.call(t):"";var e=t+"";return e=="0"&&1/t==-qB?"-0":e}var TE=xE;var zB=/\s/;function GB(t){for(var e=t.length;e--&&zB.test(t.charAt(e)););return e}var SE=GB;var KB=/^\s+/;function QB(t){return t&&t.slice(0,SE(t)+1).replace(KB,"")}var vE=QB;function ZB(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Lr=ZB;var bE=NaN,YB=/^[-+]0x[0-9a-f]+$/i,XB=/^0b[01]+$/i,JB=/^0o[0-7]+$/i,eW=parseInt;function tW(t){if(typeof t=="number")return t;if(Nr(t))return bE;if(Lr(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Lr(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=vE(t);var r=XB.test(t);return r||JB.test(t)?eW(t.slice(2),r?2:8):YB.test(t)?bE:+t}var wE=tW;var _E=1/0,rW=17976931348623157e292;function nW(t){if(!t)return t===0?t:0;if(t=wE(t),t===_E||t===-_E){var e=t<0?-1:1;return e*rW}return t===t?t:0}var za=nW;function iW(t){var e=za(t),r=e%1;return e===e?r?e-r:e:0}var Vu=iW;function oW(t){return t}var xr=oW;var aW="[object AsyncFunction]",sW="[object Function]",cW="[object GeneratorFunction]",lW="[object Proxy]";function pW(t){if(!Lr(t))return!1;var e=An(t);return e==sW||e==cW||e==aW||e==lW}var Bu=pW;var uW=At["__core-js_shared__"],Wu=uW;var EE=function(){var t=/[^.]+$/.exec(Wu&&Wu.keys&&Wu.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function fW(t){return!!EE&&EE in t}var RE=fW;var mW=Function.prototype,dW=mW.toString;function hW(t){if(t!=null){try{return dW.call(t)}catch{}try{return t+""}catch{}}return""}var wi=hW;var gW=/[\\^$.*+?()[\]{}|]/g,yW=/^\[object .+?Constructor\]$/,xW=Function.prototype,TW=Object.prototype,SW=xW.toString,vW=TW.hasOwnProperty,bW=RegExp("^"+SW.call(vW).replace(gW,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function wW(t){if(!Lr(t)||RE(t))return!1;var e=Bu(t)?bW:yW;return e.test(wi(t))}var kE=wW;function _W(t,e){return t?.[e]}var PE=_W;function EW(t,e){var r=PE(t,e);return kE(r)?r:void 0}var Tr=EW;var RW=Tr(At,"WeakMap"),$o=RW;var kW=$o&&new $o,dT=kW;var AE=Object.create,PW=function(){function t(){}return function(e){if(!Lr(e))return{};if(AE)return AE(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),$u=PW;function AW(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var ME=AW;function MW(){}var Ga=MW;var DW=4294967295;function ju(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=DW,this.__views__=[]}ju.prototype=$u(Ga.prototype);ju.prototype.constructor=ju;var Ka=ju;function FW(){}var qu=FW;var IW=dT?function(t){return dT.get(t)}:qu,zu=IW;var CW={},hT=CW;var OW=Object.prototype,NW=OW.hasOwnProperty;function LW(t){for(var e=t.name+"",r=hT[e],n=NW.call(hT,e)?r.length:0;n--;){var i=r[n],o=i.func;if(o==null||o==t)return i.name}return e}var Qa=LW;function Gu(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}Gu.prototype=$u(Ga.prototype);Gu.prototype.constructor=Gu;var Zi=Gu;function UW(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var Yi=UW;function HW(t){if(t instanceof Ka)return t.clone();var e=new Zi(t.__wrapped__,t.__chain__);return e.__actions__=Yi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var DE=HW;var VW=Object.prototype,BW=VW.hasOwnProperty;function Ku(t){if(rr(t)&&!qe(t)&&!(t instanceof Ka)){if(t instanceof Zi)return t;if(BW.call(t,"__wrapped__"))return DE(t)}return new Zi(t)}Ku.prototype=Ga.prototype;Ku.prototype.constructor=Ku;var FE=Ku;function WW(t){var e=Qa(t),r=FE[e];if(typeof r!="function"||!(e in Ka.prototype))return!1;if(t===r)return!0;var n=zu(r);return!!n&&t===n[0]}var gT=WW;var $W=800,jW=16,qW=Date.now;function zW(t){var e=0,r=0;return function(){var n=qW(),i=jW-(n-r);if(r=n,i>0){if(++e>=$W)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var IE=zW;function GW(t){return function(){return t}}var CE=GW;var KW=function(){try{var t=Tr(Object,"defineProperty");return t({},"",{}),t}catch{}}(),yT=KW;var QW=yT?function(t,e){return yT(t,"toString",{configurable:!0,enumerable:!1,value:CE(e),writable:!0})}:xr,OE=QW;var ZW=IE(OE),Qu=ZW;function YW(t,e,r,n){for(var i=t.length,o=r+(n?1:-1);n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}var Zu=YW;function XW(t){return t!==t}var NE=XW;function JW(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}var LE=JW;function e$(t,e,r){return e===e?LE(t,e,r):Zu(t,NE,r)}var Yu=e$;function t$(t,e){var r=t==null?0:t.length;return!!r&&Yu(t,e,0)>-1}var UE=t$;var r$=9007199254740991,n$=/^(?:0|[1-9]\d*)$/;function i$(t,e){var r=typeof t;return e=e??r$,!!e&&(r=="number"||r!="symbol"&&n$.test(t))&&t>-1&&t%1==0&&t<e}var Za=i$;function o$(t,e){return t===e||t!==t&&e!==e}var Ya=o$;var HE=Math.max;function a$(t,e,r){return e=HE(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,o=HE(n.length-e,0),s=Array(o);++i<o;)s[i]=n[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=n[i];return l[e]=r(s),ME(t,this,l)}}var Xu=a$;function s$(t,e){return Qu(Xu(t,e,xr),t+"")}var Xa=s$;var c$=9007199254740991;function l$(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=c$}var Ja=l$;function p$(t){return t!=null&&Ja(t.length)&&!Bu(t)}var qn=p$;function u$(t,e,r){if(!Lr(r))return!1;var n=typeof e;return(n=="number"?qn(r)&&Za(e,r.length):n=="string"&&e in r)?Ya(r[e],t):!1}var jo=u$;var f$=Object.prototype;function m$(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||f$;return t===r}var VE=m$;function d$(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var Ju=d$;var h$="[object Arguments]";function g$(t){return rr(t)&&An(t)==h$}var xT=g$;var BE=Object.prototype,y$=BE.hasOwnProperty,x$=BE.propertyIsEnumerable,T$=xT(function(){return arguments}())?xT:function(t){return rr(t)&&y$.call(t,"callee")&&!x$.call(t,"callee")},es=T$;function S$(){return!1}var WE=S$;var qE=typeof exports=="object"&&exports&&!exports.nodeType&&exports,$E=qE&&typeof module=="object"&&module&&!module.nodeType&&module,v$=$E&&$E.exports===qE,jE=v$?At.Buffer:void 0,b$=jE?jE.isBuffer:void 0,w$=b$||WE,zc=w$;var _$="[object Arguments]",E$="[object Array]",R$="[object Boolean]",k$="[object Date]",P$="[object Error]",A$="[object Function]",M$="[object Map]",D$="[object Number]",F$="[object Object]",I$="[object RegExp]",C$="[object Set]",O$="[object String]",N$="[object WeakMap]",L$="[object ArrayBuffer]",U$="[object DataView]",H$="[object Float32Array]",V$="[object Float64Array]",B$="[object Int8Array]",W$="[object Int16Array]",$$="[object Int32Array]",j$="[object Uint8Array]",q$="[object Uint8ClampedArray]",z$="[object Uint16Array]",G$="[object Uint32Array]",Xe={};Xe[H$]=Xe[V$]=Xe[B$]=Xe[W$]=Xe[$$]=Xe[j$]=Xe[q$]=Xe[z$]=Xe[G$]=!0;Xe[_$]=Xe[E$]=Xe[L$]=Xe[R$]=Xe[U$]=Xe[k$]=Xe[P$]=Xe[A$]=Xe[M$]=Xe[D$]=Xe[F$]=Xe[I$]=Xe[C$]=Xe[O$]=Xe[N$]=!1;function K$(t){return rr(t)&&Ja(t.length)&&!!Xe[An(t)]}var zE=K$;function Q$(t){return function(e){return t(e)}}var ts=Q$;var GE=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Gc=GE&&typeof module=="object"&&module&&!module.nodeType&&module,Z$=Gc&&Gc.exports===GE,TT=Z$&&Hu.process,Y$=function(){try{var t=Gc&&Gc.require&&Gc.require("util").types;return t||TT&&TT.binding&&TT.binding("util")}catch{}}(),ST=Y$;var KE=ST&&ST.isTypedArray,X$=KE?ts(KE):zE,ef=X$;var J$=Object.prototype,ej=J$.hasOwnProperty;function tj(t,e){var r=qe(t),n=!r&&es(t),i=!r&&!n&&zc(t),o=!r&&!n&&!i&&ef(t),s=r||n||i||o,l=s?Ju(t.length,String):[],p=l.length;for(var u in t)(e||ej.call(t,u))&&!(s&&(u=="length"||i&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Za(u,p)))&&l.push(u);return l}var QE=tj;function rj(t,e){return function(r){return t(e(r))}}var ZE=rj;var nj=ZE(Object.keys,Object),YE=nj;var ij=Object.prototype,oj=ij.hasOwnProperty;function aj(t){if(!VE(t))return YE(t);var e=[];for(var r in Object(t))oj.call(t,r)&&r!="constructor"&&e.push(r);return e}var XE=aj;function sj(t){return qn(t)?QE(t):XE(t)}var Xi=sj;var cj=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,lj=/^\w*$/;function pj(t,e){if(qe(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||Nr(t)?!0:lj.test(t)||!cj.test(t)||e!=null&&t in Object(e)}var rs=pj;var uj=Tr(Object,"create"),_i=uj;function fj(){this.__data__=_i?_i(null):{},this.size=0}var JE=fj;function mj(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var eR=mj;var dj="__lodash_hash_undefined__",hj=Object.prototype,gj=hj.hasOwnProperty;function yj(t){var e=this.__data__;if(_i){var r=e[t];return r===dj?void 0:r}return gj.call(e,t)?e[t]:void 0}var tR=yj;var xj=Object.prototype,Tj=xj.hasOwnProperty;function Sj(t){var e=this.__data__;return _i?e[t]!==void 0:Tj.call(e,t)}var rR=Sj;var vj="__lodash_hash_undefined__";function bj(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=_i&&e===void 0?vj:e,this}var nR=bj;function ns(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ns.prototype.clear=JE;ns.prototype.delete=eR;ns.prototype.get=tR;ns.prototype.has=rR;ns.prototype.set=nR;var vT=ns;function wj(){this.__data__=[],this.size=0}var iR=wj;function _j(t,e){for(var r=t.length;r--;)if(Ya(t[r][0],e))return r;return-1}var Ji=_j;var Ej=Array.prototype,Rj=Ej.splice;function kj(t){var e=this.__data__,r=Ji(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():Rj.call(e,r,1),--this.size,!0}var oR=kj;function Pj(t){var e=this.__data__,r=Ji(e,t);return r<0?void 0:e[r][1]}var aR=Pj;function Aj(t){return Ji(this.__data__,t)>-1}var sR=Aj;function Mj(t,e){var r=this.__data__,n=Ji(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var cR=Mj;function is(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}is.prototype.clear=iR;is.prototype.delete=oR;is.prototype.get=aR;is.prototype.has=sR;is.prototype.set=cR;var eo=is;var Dj=Tr(At,"Map"),to=Dj;function Fj(){this.size=0,this.__data__={hash:new vT,map:new(to||eo),string:new vT}}var lR=Fj;function Ij(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var pR=Ij;function Cj(t,e){var r=t.__data__;return pR(e)?r[typeof e=="string"?"string":"hash"]:r.map}var ro=Cj;function Oj(t){var e=ro(this,t).delete(t);return this.size-=e?1:0,e}var uR=Oj;function Nj(t){return ro(this,t).get(t)}var fR=Nj;function Lj(t){return ro(this,t).has(t)}var mR=Lj;function Uj(t,e){var r=ro(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var dR=Uj;function os(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}os.prototype.clear=lR;os.prototype.delete=uR;os.prototype.get=fR;os.prototype.has=mR;os.prototype.set=dR;var qo=os;var Hj="Expected a function";function bT(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Hj);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=t.apply(this,n);return r.cache=o.set(i,s)||o,s};return r.cache=new(bT.Cache||qo),r}bT.Cache=qo;var Kc=bT;var Vj=500;function Bj(t){var e=Kc(t,function(n){return r.size===Vj&&r.clear(),n}),r=e.cache;return e}var hR=Bj;var Wj=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$j=/\\(\\)?/g,jj=hR(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Wj,function(r,n,i,o){e.push(i?o.replace($j,"$1"):n||r)}),e}),gR=jj;function qj(t){return t==null?"":TE(t)}var Mn=qj;function zj(t,e){return qe(t)?t:rs(t,e)?[t]:gR(Mn(t))}var tf=zj;var Gj=1/0;function Kj(t){if(typeof t=="string"||Nr(t))return t;var e=t+"";return e=="0"&&1/t==-Gj?"-0":e}var no=Kj;function Qj(t,e){e=tf(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[no(e[r++])];return r&&r==n?t:void 0}var as=Qj;function Zj(t,e,r){var n=t==null?void 0:as(t,e);return n===void 0?r:n}var zo=Zj;function Yj(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var ss=Yj;var yR=tr?tr.isConcatSpreadable:void 0;function Xj(t){return qe(t)||es(t)||!!(yR&&t&&t[yR])}var xR=Xj;function TR(t,e,r,n,i){var o=-1,s=t.length;for(r||(r=xR),i||(i=[]);++o<s;){var l=t[o];e>0&&r(l)?e>1?TR(l,e-1,r,n,i):ss(i,l):n||(i[i.length]=l)}return i}var cs=TR;function Jj(t){var e=t==null?0:t.length;return e?cs(t,1):[]}var Je=Jj;function eq(t){return Qu(Xu(t,void 0,Je),t+"")}var SR=eq;function tq(t){return function(e){return t?.[e]}}var vR=tq;var rq={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},nq=vR(rq),bR=nq;var iq=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,oq="\\u0300-\\u036f",aq="\\ufe20-\\ufe2f",sq="\\u20d0-\\u20ff",cq=oq+aq+sq,lq="["+cq+"]",pq=RegExp(lq,"g");function uq(t){return t=Mn(t),t&&t.replace(iq,bR).replace(pq,"")}var wT=uq;function fq(){this.__data__=new eo,this.size=0}var wR=fq;function mq(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var _R=mq;function dq(t){return this.__data__.get(t)}var ER=dq;function hq(t){return this.__data__.has(t)}var RR=hq;var gq=200;function yq(t,e){var r=this.__data__;if(r instanceof eo){var n=r.__data__;if(!to||n.length<gq-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new qo(n)}return r.set(t,e),this.size=r.size,this}var kR=yq;function ls(t){var e=this.__data__=new eo(t);this.size=e.size}ls.prototype.clear=wR;ls.prototype.delete=_R;ls.prototype.get=ER;ls.prototype.has=RR;ls.prototype.set=kR;var ps=ls;function xq(t,e){for(var r=-1,n=t==null?0:t.length,i=0,o=[];++r<n;){var s=t[r];e(s,r,t)&&(o[i++]=s)}return o}var rf=xq;function Tq(){return[]}var PR=Tq;var Sq=Object.prototype,vq=Sq.propertyIsEnumerable,AR=Object.getOwnPropertySymbols,bq=AR?function(t){return t==null?[]:(t=Object(t),rf(AR(t),function(e){return vq.call(t,e)}))}:PR,MR=bq;function wq(t,e,r){var n=e(t);return qe(t)?n:ss(n,r(t))}var DR=wq;function _q(t){return DR(t,Xi,MR)}var _T=_q;var Eq=Tr(At,"DataView"),nf=Eq;var Rq=Tr(At,"Promise"),of=Rq;var kq=Tr(At,"Set"),io=kq;var FR="[object Map]",Pq="[object Object]",IR="[object Promise]",CR="[object Set]",OR="[object WeakMap]",NR="[object DataView]",Aq=wi(nf),Mq=wi(to),Dq=wi(of),Fq=wi(io),Iq=wi($o),Go=An;(nf&&Go(new nf(new ArrayBuffer(1)))!=NR||to&&Go(new to)!=FR||of&&Go(of.resolve())!=IR||io&&Go(new io)!=CR||$o&&Go(new $o)!=OR)&&(Go=function(t){var e=An(t),r=e==Pq?t.constructor:void 0,n=r?wi(r):"";if(n)switch(n){case Aq:return NR;case Mq:return FR;case Dq:return IR;case Fq:return CR;case Iq:return OR}return e});var ET=Go;var Cq=At.Uint8Array,RT=Cq;function Oq(){var t=arguments.length;if(!t)return[];for(var e=Array(t-1),r=arguments[0],n=t;n--;)e[n-1]=arguments[n];return ss(qe(r)?Yi(r):[r],cs(e,1))}var Qc=Oq;var Nq="__lodash_hash_undefined__";function Lq(t){return this.__data__.set(t,Nq),this}var LR=Lq;function Uq(t){return this.__data__.has(t)}var UR=Uq;function af(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new qo;++e<r;)this.add(t[e])}af.prototype.add=af.prototype.push=LR;af.prototype.has=UR;var sf=af;function Hq(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var HR=Hq;function Vq(t,e){return t.has(e)}var cf=Vq;var Bq=1,Wq=2;function $q(t,e,r,n,i,o){var s=r&Bq,l=t.length,p=e.length;if(l!=p&&!(s&&p>l))return!1;var u=o.get(t),m=o.get(e);if(u&&m)return u==e&&m==t;var d=-1,g=!0,x=r&Wq?new sf:void 0;for(o.set(t,e),o.set(e,t);++d<l;){var b=t[d],v=e[d];if(n)var I=s?n(v,b,d,e,t,o):n(b,v,d,t,e,o);if(I!==void 0){if(I)continue;g=!1;break}if(x){if(!HR(e,function(F,U){if(!cf(x,U)&&(b===F||i(b,F,r,n,o)))return x.push(U)})){g=!1;break}}else if(!(b===v||i(b,v,r,n,o))){g=!1;break}}return o.delete(t),o.delete(e),g}var lf=$q;function jq(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}var VR=jq;function qq(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var us=qq;var zq=1,Gq=2,Kq="[object Boolean]",Qq="[object Date]",Zq="[object Error]",Yq="[object Map]",Xq="[object Number]",Jq="[object RegExp]",e3="[object Set]",t3="[object String]",r3="[object Symbol]",n3="[object ArrayBuffer]",i3="[object DataView]",BR=tr?tr.prototype:void 0,kT=BR?BR.valueOf:void 0;function o3(t,e,r,n,i,o,s){switch(r){case i3:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case n3:return!(t.byteLength!=e.byteLength||!o(new RT(t),new RT(e)));case Kq:case Qq:case Xq:return Ya(+t,+e);case Zq:return t.name==e.name&&t.message==e.message;case Jq:case t3:return t==e+"";case Yq:var l=VR;case e3:var p=n&zq;if(l||(l=us),t.size!=e.size&&!p)return!1;var u=s.get(t);if(u)return u==e;n|=Gq,s.set(t,e);var m=lf(l(t),l(e),n,i,o,s);return s.delete(t),m;case r3:if(kT)return kT.call(t)==kT.call(e)}return!1}var WR=o3;var a3=1,s3=Object.prototype,c3=s3.hasOwnProperty;function l3(t,e,r,n,i,o){var s=r&a3,l=_T(t),p=l.length,u=_T(e),m=u.length;if(p!=m&&!s)return!1;for(var d=p;d--;){var g=l[d];if(!(s?g in e:c3.call(e,g)))return!1}var x=o.get(t),b=o.get(e);if(x&&b)return x==e&&b==t;var v=!0;o.set(t,e),o.set(e,t);for(var I=s;++d<p;){g=l[d];var F=t[g],U=e[g];if(n)var K=s?n(U,F,g,e,t,o):n(F,U,g,t,e,o);if(!(K===void 0?F===U||i(F,U,r,n,o):K)){v=!1;break}I||(I=g=="constructor")}if(v&&!I){var ne=t.constructor,ie=e.constructor;ne!=ie&&"constructor"in t&&"constructor"in e&&!(typeof ne=="function"&&ne instanceof ne&&typeof ie=="function"&&ie instanceof ie)&&(v=!1)}return o.delete(t),o.delete(e),v}var $R=l3;var p3=1,jR="[object Arguments]",qR="[object Array]",pf="[object Object]",u3=Object.prototype,zR=u3.hasOwnProperty;function f3(t,e,r,n,i,o){var s=qe(t),l=qe(e),p=s?qR:ET(t),u=l?qR:ET(e);p=p==jR?pf:p,u=u==jR?pf:u;var m=p==pf,d=u==pf,g=p==u;if(g&&zc(t)){if(!zc(e))return!1;s=!0,m=!1}if(g&&!m)return o||(o=new ps),s||ef(t)?lf(t,e,r,n,i,o):WR(t,e,p,r,n,i,o);if(!(r&p3)){var x=m&&zR.call(t,"__wrapped__"),b=d&&zR.call(e,"__wrapped__");if(x||b){var v=x?t.value():t,I=b?e.value():e;return o||(o=new ps),i(v,I,r,n,o)}}return g?(o||(o=new ps),$R(t,e,r,n,i,o)):!1}var GR=f3;function KR(t,e,r,n,i){return t===e?!0:t==null||e==null||!rr(t)&&!rr(e)?t!==t&&e!==e:GR(t,e,r,n,KR,i)}var fs=KR;var m3=1,d3=2;function h3(t,e,r,n){var i=r.length,o=i,s=!n;if(t==null)return!o;for(t=Object(t);i--;){var l=r[i];if(s&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++i<o;){l=r[i];var p=l[0],u=t[p],m=l[1];if(s&&l[2]){if(u===void 0&&!(p in t))return!1}else{var d=new ps;if(n)var g=n(u,m,p,t,e,d);if(!(g===void 0?fs(m,u,m3|d3,n,d):g))return!1}}return!0}var QR=h3;function g3(t){return t===t&&!Lr(t)}var uf=g3;function y3(t){for(var e=Xi(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,uf(i)]}return e}var ZR=y3;function x3(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var ff=x3;function T3(t){var e=ZR(t);return e.length==1&&e[0][2]?ff(e[0][0],e[0][1]):function(r){return r===t||QR(r,t,e)}}var YR=T3;function S3(t,e){return t!=null&&e in Object(t)}var XR=S3;function v3(t,e,r){e=tf(e,t);for(var n=-1,i=e.length,o=!1;++n<i;){var s=no(e[n]);if(!(o=t!=null&&r(t,s)))break;t=t[s]}return o||++n!=i?o:(i=t==null?0:t.length,!!i&&Ja(i)&&Za(s,i)&&(qe(t)||es(t)))}var JR=v3;function b3(t,e){return t!=null&&JR(t,e,XR)}var ek=b3;var w3=1,_3=2;function E3(t,e){return rs(t)&&uf(e)?ff(no(t),e):function(r){var n=zo(r,t);return n===void 0&&n===e?ek(r,t):fs(e,n,w3|_3)}}var tk=E3;function R3(t){return function(e){return e?.[t]}}var mf=R3;function k3(t){return function(e){return as(e,t)}}var rk=k3;function P3(t){return rs(t)?mf(no(t)):rk(t)}var nk=P3;function A3(t){return typeof t=="function"?t:t==null?xr:typeof t=="object"?qe(t)?tk(t[0],t[1]):YR(t):nk(t)}var oo=A3;function M3(t){return function(e,r,n){for(var i=-1,o=Object(e),s=n(e),l=s.length;l--;){var p=s[t?l:++i];if(r(o[p],p,o)===!1)break}return e}}var ik=M3;var D3=ik(),ok=D3;function F3(t,e){return t&&ok(t,e,Xi)}var ak=F3;function I3(t,e){return function(r,n){if(r==null)return r;if(!qn(r))return t(r,n);for(var i=r.length,o=e?i:-1,s=Object(r);(e?o--:++o<i)&&n(s[o],o,s)!==!1;);return r}}var sk=I3;var C3=sk(ak),ck=C3;function O3(t){return rr(t)&&qn(t)}var lk=O3;function N3(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}var pk=N3;function L3(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var df=L3;var uk=/[\\^$.*+?()[\]{}|]/g,U3=RegExp(uk.source);function H3(t){return t=Mn(t),t&&U3.test(t)?t.replace(uk,"\\$&"):t}var Ur=H3;var V3=Math.max,B3=Math.min;function W3(t,e,r){var n=t==null?0:t.length;if(!n)return-1;var i=n-1;return r!==void 0&&(i=Vu(r),i=r<0?V3(n+i,0):B3(i,n-1)),Zu(t,oo(e,3),i,!0)}var Ko=W3;function $3(t,e){var r=-1,n=qn(t)?Array(t.length):[];return ck(t,function(i,o,s){n[++r]=e(i,o,s)}),n}var fk=$3;var j3="Expected a function",q3=8,z3=32,G3=128,K3=256;function Q3(t){return SR(function(e){var r=e.length,n=r,i=Zi.prototype.thru;for(t&&e.reverse();n--;){var o=e[n];if(typeof o!="function")throw new TypeError(j3);if(i&&!s&&Qa(o)=="wrapper")var s=new Zi([],!0)}for(n=s?n:r;++n<r;){o=e[n];var l=Qa(o),p=l=="wrapper"?zu(o):void 0;p&&gT(p[0])&&p[1]==(G3|q3|z3|K3)&&!p[4].length&&p[9]==1?s=s[Qa(p[0])].apply(s,p[3]):s=o.length==1&&gT(o)?s[l]():s.thru(o)}return function(){var u=arguments,m=u[0];if(s&&u.length==1&&qe(m))return s.plant(m).value();for(var d=0,g=r?e[d].apply(this,u):m;++d<r;)g=e[d].call(this,g);return g}})}var mk=Q3;var Z3=mk(),PT=Z3;function Y3(t,e){return t>e}var dk=Y3;function X3(t,e){return on(e,function(r){return t[r]})}var hk=X3;function J3(t){return t==null?[]:hk(t,Xi(t))}var gk=J3;function ez(t,e){return fs(t,e)}var Ei=ez;function tz(t,e){return t<e}var yk=tz;function rz(t,e,r){for(var n=-1,i=t.length;++n<i;){var o=t[n],s=e(o);if(s!=null&&(l===void 0?s===s&&!Nr(s):r(s,l)))var l=s,p=o}return p}var hf=rz;function nz(t,e){return t&&t.length?hf(t,oo(e,2),dk):void 0}var AT=nz;function iz(t,e){for(var r,n=-1,i=t.length;++n<i;){var o=e(t[n]);o!==void 0&&(r=r===void 0?o:r+o)}return r}var xk=iz;function oz(t){return t&&t.length?hf(t,xr,yk):void 0}var MT=oz;function az(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}var Tk=az;function sz(t,e){if(t!==e){var r=t!==void 0,n=t===null,i=t===t,o=Nr(t),s=e!==void 0,l=e===null,p=e===e,u=Nr(e);if(!l&&!u&&!o&&t>e||o&&s&&p&&!l&&!u||n&&s&&p||!r&&p||!i)return 1;if(!n&&!o&&!u&&t<e||u&&r&&i&&!n&&!o||l&&r&&i||!s&&i||!p)return-1}return 0}var Sk=sz;function cz(t,e,r){for(var n=-1,i=t.criteria,o=e.criteria,s=i.length,l=r.length;++n<s;){var p=Sk(i[n],o[n]);if(p){if(n>=l)return p;var u=r[n];return p*(u=="desc"?-1:1)}}return t.index-e.index}var vk=cz;function lz(t,e,r){e.length?e=on(e,function(o){return qe(o)?function(s){return as(s,o.length===1?o[0]:o)}:o}):e=[xr];var n=-1;e=on(e,ts(oo));var i=fk(t,function(o,s,l){var p=on(e,function(u){return u(o)});return{criteria:p,index:++n,value:o}});return Tk(i,function(o,s){return vk(o,s,r)})}var bk=lz;var pz=9007199254740991,uz=Math.floor;function fz(t,e){var r="";if(!t||e<1||e>pz)return r;do e%2&&(r+=t),e=uz(e/2),e&&(t+=t);while(e);return r}var wk=fz;function mz(t,e,r,n){for(var i=r-1,o=t.length;++i<o;)if(n(t[i],e))return i;return-1}var _k=mz;var dz=Array.prototype,Ek=dz.splice;function hz(t,e,r,n){var i=n?_k:Yu,o=-1,s=e.length,l=t;for(t===e&&(e=Yi(e)),r&&(l=on(t,ts(r)));++o<s;)for(var p=0,u=e[o],m=r?r(u):u;(p=i(l,m,p,n))>-1;)l!==t&&Ek.call(l,p,1),Ek.call(t,p,1);return t}var Rk=hz;function gz(t,e){return t&&t.length&&e&&e.length?Rk(t,e):t}var kk=gz;var yz=Xa(kk),nr=yz;var xz=Math.floor,Tz=Math.random;function Sz(t,e){return t+xz(Tz()*(e-t+1))}var Pk=Sz;var vz=Math.ceil,bz=Math.max;function wz(t,e,r,n){for(var i=-1,o=bz(vz((e-t)/(r||1)),0),s=Array(o);o--;)s[n?o:++i]=t,t+=r;return s}var Ak=wz;function _z(t){return function(e,r,n){return n&&typeof n!="number"&&jo(e,r,n)&&(r=n=void 0),e=za(e),r===void 0?(r=e,e=0):r=za(r),n=n===void 0?e<r?1:-1:za(n),Ak(e,r,n,t)}}var Mk=_z;var Ez=Mk(),DT=Ez;function Rz(t,e,r){return(r?jo(t,e,r):e===void 0)?e=1:e=Vu(e),wk(Mn(t),e)}var FT=Rz;function kz(t,e){var r=-1,n=t.length,i=n-1;for(e=e===void 0?n:e;++r<e;){var o=Pk(r,i),s=t[o];t[o]=t[r],t[r]=s}return t.length=e,t}var gf=kz;function Pz(t){return gf(Yi(t))}var Dk=Pz;function Az(t){return gf(gk(t))}var Fk=Az;function Mz(t){var e=qe(t)?Dk:Fk;return e(t)}var IT=Mz;var Dz=Xa(function(t,e){if(t==null)return[];var r=e.length;return r>1&&jo(t,e[0],e[1])?e=[]:r>2&&jo(e[0],e[1],e[2])&&(e=[e[0]]),bk(t,cs(e,1),[])}),CT=Dz;function Fz(t,e){return t&&t.length?xk(t,oo(e,2)):0}var yf=Fz;var Iz=1/0,Cz=io&&1/us(new io([,-0]))[1]==Iz?function(t){return new io(t)}:qu,Ik=Cz;var Oz=200;function Nz(t,e,r){var n=-1,i=UE,o=t.length,s=!0,l=[],p=l;if(r)s=!1,i=pk;else if(o>=Oz){var u=e?null:Ik(t);if(u)return us(u);s=!1,i=cf,p=new sf}else p=e?[]:l;e:for(;++n<o;){var m=t[n],d=e?e(m):m;if(m=r||m!==0?m:0,s&&d===d){for(var g=p.length;g--;)if(p[g]===d)continue e;e&&p.push(d),l.push(m)}else i(p,d,r)||(p!==l&&p.push(d),l.push(m))}return l}var xf=Nz;function Lz(t){return t&&t.length?xf(t):[]}var Qo=Lz;function Uz(t,e){return e=typeof e=="function"?e:void 0,t&&t.length?xf(t,void 0,e):[]}var Zc=Uz;var Hz=Math.max;function Vz(t){if(!(t&&t.length))return[];var e=0;return t=rf(t,function(r){if(lk(r))return e=Hz(r.length,e),!0}),Ju(e,function(r){return on(t,mf(r))})}var Ck=Vz;var Bz=Xa(Ck),wt=Bz;var Tf=class{constructor(){this.commands={clipboardPaste:void 0,clipboardCopy:void 0,toggleLineComment:void 0,indentLine:void 0,outdentLine:void 0,rename:void 0,quickFix:void 0,revealDefinition:void 0,revealTypeDefinition:void 0,showHover:void 0,showDebugHover:void 0,extractVariable:void 0,fold:void 0,highlight:{acceptsLocation:!0},unfold:void 0,showReferences:void 0,insertLineAfter:void 0,gitAccept:void 0,gitRevert:void 0,gitStage:void 0,gitUnstage:void 0}}};var Yc=class{constructor(){this.clipboardContents=""}async readText(){return this.clipboardContents}async writeText(e){this.clipboardContents=e}};var qt=class{constructor(){this.listeners=[];this.notifyListeners=(...e)=>{this.listeners.forEach(r=>r(...e))};this.registerListener=this.registerListener.bind(this)}registerListener(e){return this.listeners.push(e),{dispose:()=>{nr(this.listeners,e)}}}};var Sf={tokenHatSplittingMode:{preserveCase:!1,lettersToPreserve:[],symbolsToPreserve:[]},wordSeparators:["_"],decorationDebounceDelayMs:50,experimental:{snippetsDir:void 0,hatStability:"balanced",keyboardTargetFollowsSelection:!1},commandHistory:!1,debug:!1};var Xc=class{constructor(){this.notifier=new qt;this.mocks={...Sf};this.scopes=[];this.onDidChangeConfiguration=this.notifier.registerListener;this.onDidChangeConfiguration=this.onDidChangeConfiguration.bind(this)}getOwnConfiguration(e,r){if(r!=null){for(let{scope:n,values:i}of this.scopes)if($z(n,r))return zo(i,e)??zo(this.mocks,e)}return zo(this.mocks,e)}mockConfiguration(e,r){this.mocks[e]=r,this.notifier.notifyListeners()}mockConfigurationScope(e,r,n=!1){this.scopes.push({scope:e,values:r}),n||this.notifier.notifyListeners()}};function $z(t,e){return t.languageId===e.languageId}var vf={hideInferenceWarning:!1,tutorialProgress:{}};var Jc=class{constructor(){this.data={...vf}}get(e){return this.data[e]}set(e,r){return this.data[e]=r,Promise.resolve()}};var el=class{async showMessage(e,r,n,...i){}};var bf=class{constructor(){this.configuration=new Xc;this.messages=new el;this.keyValueStore=new Jc;this.clipboard=new Yc;this.capabilities=new Tf;this.runMode="test";this.cursorlessVersion="0.0.0";this.workspaceFolders=void 0;this.disposables=[];this.quickPickReturnValue=void 0;this.onDidOpenTextDocument=ms;this.onDidCloseTextDocument=ms;this.onDidChangeActiveTextEditor=ms;this.onDidChangeVisibleTextEditors=ms;this.onDidChangeTextEditorSelection=ms;this.onDidChangeTextEditorVisibleRanges=ms}async flashRanges(e){}async setHighlightRanges(e,r,n){}mockAssetsRoot(e){this.assetsRoot_=e}get assetsRoot(){if(this.assetsRoot_==null)throw Error("Field `assetsRoot` has not yet been mocked");return this.assetsRoot_}get activeTextEditor(){throw Error("Not implemented")}get activeEditableTextEditor(){throw Error("Not implemented")}get visibleTextEditors(){throw Error("Not implemented")}get visibleNotebookEditors(){throw Error("Not implemented")}getEditableTextEditor(e){throw Error("Not implemented")}findInDocument(e,r){throw Error("Not implemented")}findInWorkspace(e){throw Error("Not implemented")}openTextDocument(e){throw Error("Not implemented")}openUntitledTextDocument(e){throw Error("Not implemented")}setQuickPickReturnValue(e){this.quickPickReturnValue=e}async showQuickPick(e,r){return this.quickPickReturnValue}showInputBox(e){throw Error("Not implemented")}executeCommand(e,...r){throw new Error("Method not implemented.")}onDidChangeTextDocument(e){throw Error("Not implemented")}disposeOnExit(...e){return this.disposables.push(...e),()=>nr(this.disposables,...e)}exit(){this.disposables.forEach(e=>e.dispose())}};function ms(){return{dispose(){}}}var pe=class t{constructor(e,r){this.line=e,this.character=r}isEqual(e){return this.line===e.line&&this.character===e.character}isBefore(e){return this.line<e.line?!0:this.line>e.line?!1:this.character<e.character}isAfter(e){return this.line>e.line?!0:this.line<e.line?!1:this.character>e.character}isBeforeOrEqual(e){return this.isEqual(e)||this.isBefore(e)}isAfterOrEqual(e){return this.isEqual(e)||this.isAfter(e)}compareTo(e){return this.isBefore(e)?-1:this.isAfter(e)?1:0}with(e,r){return new t(e??this.line,r??this.character)}translate(e,r){return new t(this.line+(e??0),this.character+(r??0))}toEmptyRange(){return new W(this,this)}concise(){return`${this.line}:${this.character}`}conciseOneBased(){return`${this.line+1}:${this.character+1}`}toString(){return this.concise()}};function Ok(t,e,r){return t.positionAt(t.offsetAt(e)+r)}var W=class t{constructor(...e){let[r,n]=e.length===2?e:[new pe(e[0],e[1]),new pe(e[2],e[3])];r.isBefore(n)?(this.start=r,this.end=n):(this.start=n,this.end=r)}get isEmpty(){return this.start.isEqual(this.end)}get isSingleLine(){return this.start.line===this.end.line}isRangeEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}contains(e){let[r,n]=e instanceof pe?[e,e]:[e.start,e.end];return r.isAfterOrEqual(this.start)&&n.isBeforeOrEqual(this.end)}intersection(e){let r=this.start.isAfter(e.start)?this.start:e.start,n=this.end.isBefore(e.end)?this.end:e.end;return r.isBeforeOrEqual(n)?new t(r,n):void 0}union(e){return new t(this.start.isBefore(e.start)?this.start:e.start,this.end.isAfter(e.end)?this.end:e.end)}with(e,r){return new t(e??this.start,r??this.end)}toSelection(e){return e?new be(this.end,this.start):new be(this.start,this.end)}concise(){return`${this.start.concise()}-${this.end.concise()}`}conciseOneBased(){return`${this.start.conciseOneBased()}-${this.end.conciseOneBased()}`}toString(){return`${this.start.concise()}-${this.end.concise()}`}};function jz(t){let{source:e,flags:r}=t;return new RegExp(`(${e})$`,r.replace("m",""))}function qz(t){let{source:e,flags:r}=t;return new RegExp(`^(${e})`,r.replace("m",""))}function Nk(t){let e=new Map;function r(n){let i=e.get(n);return i==null&&(i=t(n),e.set(n,i)),i}return r}var wf=Nk(jz),_f=Nk(qz);function OT(t,e){return e.lastIndex=0,t.matchAll(e)}function an(t,e,r){return Array.from(OT(t,e),r)}function Zo(t,e){return t.lastIndex=0,t.test(e)}function Lk(t,e){return t.lastIndex=0,e.match(t)}function tl(t,e){return an(t,e,r=>({index:r.index,text:r[0]}))}var ds=class{constructor(e){this.original=e;this.configuration=e.configuration,this.keyValueStore=e.keyValueStore,this.clipboard=e.clipboard,this.messages=e.messages,this.capabilities=e.capabilities}flashRanges(e){return this.original.flashRanges(e)}setHighlightRanges(e,r,n){return this.original.setHighlightRanges(e,r,n)}onDidOpenTextDocument(e,r,n){return this.original.onDidOpenTextDocument(e,r,n)}onDidCloseTextDocument(e,r,n){return this.original.onDidCloseTextDocument(e,r,n)}onDidChangeActiveTextEditor(e,r,n){return this.original.onDidChangeActiveTextEditor(e,r,n)}onDidChangeVisibleTextEditors(e,r,n){return this.original.onDidChangeVisibleTextEditors(e,r,n)}onDidChangeTextEditorSelection(e,r,n){return this.original.onDidChangeTextEditorSelection(e,r,n)}onDidChangeTextEditorVisibleRanges(e,r,n){return this.original.onDidChangeTextEditorVisibleRanges(e,r,n)}get activeTextEditor(){return this.original.activeTextEditor}get activeEditableTextEditor(){return this.original.activeEditableTextEditor}get visibleTextEditors(){return this.original.visibleTextEditors}get visibleNotebookEditors(){return this.original.visibleNotebookEditors}get cursorlessVersion(){return this.original.cursorlessVersion}get assetsRoot(){return this.original.assetsRoot}get runMode(){return this.original.runMode}get workspaceFolders(){return this.original.workspaceFolders}findInDocument(e,r){return this.original.findInDocument(e,r)}findInWorkspace(e){return this.original.findInWorkspace(e)}openTextDocument(e){return this.original.openTextDocument(e)}openUntitledTextDocument(e){return this.original.openUntitledTextDocument(e)}showQuickPick(e,r){return this.original.showQuickPick(e,r)}showInputBox(e){return this.original.showInputBox(e)}getEditableTextEditor(e){return this.original.getEditableTextEditor(e)}executeCommand(e,...r){return this.original.executeCommand(e,...r)}onDidChangeTextDocument(e){return this.original.onDidChangeTextDocument(e)}disposeOnExit(...e){return this.original.disposeOnExit(...e)}};var Ef=class extends ds{constructor(r,n,i,o){super(r);this.fakeIde=n;this.isSilent=i;this.cursorlessSnippetsDir=o;this.messages=i?n.messages:r.messages,this.configuration=n.configuration,this.keyValueStore=n.keyValueStore,this.initializeConfiguration()}initializeConfiguration(){this.configuration.mockConfigurationScope({languageId:"css"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfigurationScope({languageId:"scss"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfigurationScope({languageId:"shellscript"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfiguration("experimental",{hatStability:this.configuration.getOwnConfiguration("experimental.hatStability"),snippetsDir:this.cursorlessSnippetsDir,keyboardTargetFollowsSelection:!1})}flashRanges(r){return this.isSilent?this.fakeIde.flashRanges(r):super.flashRanges(r)}setHighlightRanges(r,n,i){return this.isSilent?this.fakeIde.setHighlightRanges(r,n,i):super.setHighlightRanges(r,n,i)}async showQuickPick(r,n){return this.isSilent?this.fakeIde.showQuickPick(r,n):super.showQuickPick(r,n)}};function rl(t,e,r,...n){return t.showMessage("warning",e,r,...n)}function at(t,e,r,...n){return t.showMessage("error",e,r,...n)}var ae=(i=>(i[i.supported=0]="supported",i[i.supportedLegacy=1]="supportedLegacy",i[i.unsupported=2]="unsupported",i[i.notApplicable=3]="notApplicable",i))(ae||{});var{supported:tt,unsupported:dpe,notApplicable:Uk}=ae,NT={ifStatement:tt,disqualifyDelimiter:tt,"comment.line":tt,"comment.block":tt,"string.singleLine":tt,"textFragment.comment.line":tt,"textFragment.comment.block":tt,"textFragment.string.singleLine":tt,class:tt,className:tt,namedFunction:tt,"name.function":tt,"name.class":tt,"name.field":tt,functionName:tt,"name.argument.formal":tt,"name.argument.formal.iteration":tt,"name.variable":tt,"value.variable":tt,"name.assignment":tt,"value.assignment":tt,"statement.class":tt,"type.class":tt,"type.field":tt,"value.argument.formal":Uk,"value.argument.formal.iteration":Uk};var{supported:ype,unsupported:xpe,notApplicable:Tpe}=ae;var{supported:Hk,unsupported:wpe,notApplicable:_pe}=ae,zz={...NT,"value.argument.formal":Hk,"value.argument.formal.iteration":Hk};var{supported:kpe,unsupported:Ppe,notApplicable:Ape}=ae;var{supported:nl,unsupported:Gz,notApplicable:Fpe}=ae,LT={"comment.block":nl,"string.singleLine":nl,"name.iteration.block":nl,"name.iteration.document":nl,disqualifyDelimiter:nl,"comment.line":Gz};var{supported:Ope,unsupported:Npe,notApplicable:Lpe}=ae;var{supported:Vpe,unsupported:Bpe,notApplicable:Wpe}=ae;var{supported:qpe,notApplicable:zpe}=ae;var{supported:Qpe,notApplicable:Zpe}=ae;var{supported:q,unsupported:Jpe,notApplicable:sn}=ae,UT={list:q,map:q,ifStatement:q,regularExpression:q,switchStatementSubject:q,fieldAccess:q,disqualifyDelimiter:q,pairDelimiter:q,"textFragment.string.singleLine":q,"textFragment.string.multiLine":q,"textFragment.comment.line":q,"textFragment.comment.block":q,statement:q,"statement.iteration.document":q,"statement.iteration.block":q,class:q,className:q,anonymousFunction:q,namedFunction:q,"namedFunction.iteration.document":q,"namedFunction.method":q,"namedFunction.method.iteration.class":q,"namedFunction.constructor":q,functionName:q,"functionName.iteration.document":q,"functionName.method":q,"functionName.method.iteration.class":q,"functionName.constructor":q,functionCall:q,"functionCall.constructor":q,functionCallee:q,"functionCallee.constructor":q,"argument.actual":q,"argument.actual.iteration":q,"argument.actual.method":q,"argument.actual.method.iteration":q,"argument.actual.constructor":q,"argument.actual.constructor.iteration":q,"argument.formal":q,"argument.formal.iteration":q,"argument.formal.method":q,"argument.formal.method.iteration":q,"argument.formal.constructor":q,"argument.formal.constructor.iteration":q,"comment.line":q,"comment.block":q,"string.singleLine":q,"string.multiLine":q,"branch.if":q,"branch.if.iteration":q,"branch.try":q,"branch.switchCase":q,"branch.switchCase.iteration":q,"branch.ternary":q,"condition.if":q,"condition.while":q,"condition.doWhile":q,"condition.for":q,"condition.ternary":q,"condition.switchCase":q,"name.argument.formal":q,"name.argument.formal.iteration":q,"name.argument.formal.method":q,"name.argument.formal.method.iteration":q,"name.argument.formal.constructor":q,"name.argument.formal.constructor.iteration":q,"name.foreach":q,"name.assignment":q,"name.assignment.pattern":q,"name.variable":q,"name.variable.pattern":q,"name.function":q,"name.method":q,"name.constructor":q,"name.class":q,"name.field":q,"key.mapPair":q,"key.mapPair.iteration":q,"value.argument.formal":q,"value.argument.formal.iteration":q,"value.argument.formal.method":q,"value.argument.formal.method.iteration":q,"value.argument.formal.constructor":q,"value.argument.formal.constructor.iteration":q,"value.mapPair":q,"value.mapPair.iteration":q,"value.assignment":q,"value.variable":q,"value.variable.pattern":q,"value.foreach":q,"value.return":q,"value.return.lambda":q,"value.field":q,"collectionItem.unenclosed":q},HT={element:q,tags:q,startTag:q,endTag:q,attribute:q,"key.attribute":q,"value.attribute":q,"interior.element":q},VT={...UT,...HT,"type.variable":sn,"type.argument.formal":sn,"type.argument.formal.iteration":sn,"type.argument.formal.method":sn,"type.argument.formal.method.iteration":sn,"type.argument.formal.constructor":sn,"type.argument.formal.constructor.iteration":sn,"type.return":sn,"type.field":sn,"type.foreach":sn,"type.interface":sn,command:sn};var{supported:Kz,unsupported:nue,notApplicable:iue}=ae,Qz={...VT,"textFragment.element":Kz};var{supported:BT}=ae,il={"comment.line":BT,"comment.block":BT,map:BT};var{supported:pue,unsupported:uue,notApplicable:fue}=ae,Zz={...il};var{supported:gue,unsupported:yue,notApplicable:xue}=ae,Yz={...il};var{supported:vue,unsupported:bue,notApplicable:wue}=ae;var{supported:Rue,notApplicable:kue}=ae;var{supported:Mue,unsupported:Due,notApplicable:Fue}=ae;var{supported:Oue,unsupported:Nue,notApplicable:Lue}=ae;var{supported:Vue,notApplicable:Bue}=ae;var{supported:jue,unsupported:que,notApplicable:zue}=ae;var{supported:Que,unsupported:Zue,notApplicable:Yue}=ae;var{supported:efe,unsupported:tfe,notApplicable:rfe}=ae;var{supported:ofe,notApplicable:afe}=ae;var{supported:hs,unsupported:pfe,notApplicable:ufe}=ae,Xz={...LT,"namedFunction.iteration.block":hs,"namedFunction.iteration.document":hs,"functionName.iteration.block":hs,"functionName.iteration.document":hs,"comment.line":hs,disqualifyDelimiter:hs};var{supported:dfe,unsupported:hfe,notApplicable:gfe}=ae;var{supported:Nt}=ae,WT={...UT,"name.field":Nt,"type.argument.formal":Nt,"type.argument.formal.iteration":Nt,"type.argument.formal.method":Nt,"type.argument.formal.method.iteration":Nt,"type.argument.formal.constructor":Nt,"type.argument.formal.constructor.iteration":Nt,"type.alias":Nt,"type.cast":Nt,"type.field":Nt,"type.interface":Nt,"type.enum":Nt,"type.return":Nt,"type.variable":Nt,"value.field":Nt,"value.typeAlias":Nt,disqualifyDelimiter:Nt};var{supported:_fe,unsupported:Efe,notApplicable:Rfe}=ae,Jz={...WT,...HT};var{supported:Afe,notApplicable:Mfe}=ae;var{supported:Ife,unsupported:Cfe,notApplicable:Ofe}=ae;var gs=["that","source","instanceReference","keyboard"];var be=class extends W{get isReversed(){return this.active.isBefore(this.anchor)}constructor(...e){let[r,n]=e.length===2?e:[new pe(e[0],e[1]),new pe(e[2],e[3])];super(r,n),this.anchor=r,this.active=n}isEqual(e){return this.anchor.isEqual(e.anchor)&&this.active.isEqual(e.active)}concise(){return`${this.anchor.concise()}->${this.active.concise()}`}conciseOneBased(){return`${this.start.conciseOneBased()}->${this.end.conciseOneBased()}`}toString(){return this.concise()}};function Bk({line:t,character:e}){return new pe(t,e)}function Rf({start:t,end:e}){return new W(Bk(t),Bk(e))}function Hr({start:t,end:e}){return{type:"line",start:t.line,end:e.line}}function ir({start:t,end:e}){return{type:"character",start:t,end:e}}function ol(t){return{start:kf(t.start),end:kf(t.end)}}function Wk(t){return{anchor:kf(t.anchor),active:kf(t.active)}}function kf({line:t,character:e}){return{line:t,character:e}}function aP(t){return typeof t>"u"||t===null}function eG(t){return typeof t=="object"&&t!==null}function tG(t){return Array.isArray(t)?t:aP(t)?[]:[t]}function rG(t,e){var r,n,i,o;if(e)for(o=Object.keys(e),r=0,n=o.length;r<n;r+=1)i=o[r],t[i]=e[i];return t}function nG(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}function iG(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var oG=aP,aG=eG,sG=tG,cG=nG,lG=iG,pG=rG,_t={isNothing:oG,isObject:aG,toArray:sG,repeat:cG,isNegativeZero:lG,extend:pG};function sP(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}function sl(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=sP(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}sl.prototype=Object.create(Error.prototype);sl.prototype.constructor=sl;sl.prototype.toString=function(e){return this.name+": "+sP(this,e)};var Sr=sl;function $T(t,e,r,n,i){var o="",s="",l=Math.floor(i/2)-1;return n-e>l&&(o=" ... ",e=n-l+o.length),r-n>l&&(s=" ...",r=n+l-s.length),{str:o+t.slice(e,r).replace(/\t/g,"\u2192")+s,pos:n-e+o.length}}function jT(t,e){return _t.repeat(" ",e-t.length)+t}function uG(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],o,s=-1;o=r.exec(t.buffer);)i.push(o.index),n.push(o.index+o[0].length),t.position<=o.index&&s<0&&(s=n.length-2);s<0&&(s=n.length-1);var l="",p,u,m=Math.min(t.line+e.linesAfter,i.length).toString().length,d=e.maxLength-(e.indent+m+3);for(p=1;p<=e.linesBefore&&!(s-p<0);p++)u=$T(t.buffer,n[s-p],i[s-p],t.position-(n[s]-n[s-p]),d),l=_t.repeat(" ",e.indent)+jT((t.line-p+1).toString(),m)+" | "+u.str+`
`+l;for(u=$T(t.buffer,n[s],i[s],t.position,d),l+=_t.repeat(" ",e.indent)+jT((t.line+1).toString(),m)+" | "+u.str+`
`,l+=_t.repeat("-",e.indent+m+3+u.pos)+`^
`,p=1;p<=e.linesAfter&&!(s+p>=i.length);p++)u=$T(t.buffer,n[s+p],i[s+p],t.position-(n[s]-n[s+p]),d),l+=_t.repeat(" ",e.indent)+jT((t.line+p+1).toString(),m)+" | "+u.str+`
`;return l.replace(/\n$/,"")}var fG=uG,mG=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],dG=["scalar","sequence","mapping"];function hG(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}function gG(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(mG.indexOf(r)===-1)throw new Sr('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=hG(e.styleAliases||null),dG.indexOf(this.kind)===-1)throw new Sr('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var Lt=gG;function qk(t,e){var r=[];return t[e].forEach(function(n){var i=r.length;r.forEach(function(o,s){o.tag===n.tag&&o.kind===n.kind&&o.multi===n.multi&&(i=s)}),r[i]=n}),r}function yG(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}function zT(t){return this.extend(t)}zT.prototype.extend=function(e){var r=[],n=[];if(e instanceof Lt)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new Sr("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(o){if(!(o instanceof Lt))throw new Sr("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new Sr("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new Sr("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(o){if(!(o instanceof Lt))throw new Sr("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(zT.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=qk(i,"implicit"),i.compiledExplicit=qk(i,"explicit"),i.compiledTypeMap=yG(i.compiledImplicit,i.compiledExplicit),i};var xG=zT,TG=new Lt("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),SG=new Lt("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),vG=new Lt("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),bG=new xG({explicit:[TG,SG,vG]});function wG(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function _G(){return null}function EG(t){return t===null}var RG=new Lt("tag:yaml.org,2002:null",{kind:"scalar",resolve:wG,construct:_G,predicate:EG,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function kG(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function PG(t){return t==="true"||t==="True"||t==="TRUE"}function AG(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var MG=new Lt("tag:yaml.org,2002:bool",{kind:"scalar",resolve:kG,construct:PG,predicate:AG,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function DG(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function FG(t){return 48<=t&&t<=55}function IG(t){return 48<=t&&t<=57}function CG(t){if(t===null)return!1;var e=t.length,r=0,n=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!DG(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!FG(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!IG(t.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function OG(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}function NG(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!_t.isNegativeZero(t)}var LG=new Lt("tag:yaml.org,2002:int",{kind:"scalar",resolve:CG,construct:OG,predicate:NG,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),UG=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function HG(t){return!(t===null||!UG.test(t)||t[t.length-1]==="_")}function VG(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}var BG=/^[-+]?[0-9]+e/;function WG(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(_t.isNegativeZero(t))return"-0.0";return r=t.toString(10),BG.test(r)?r.replace("e",".e"):r}function $G(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||_t.isNegativeZero(t))}var jG=new Lt("tag:yaml.org,2002:float",{kind:"scalar",resolve:HG,construct:VG,predicate:$G,represent:WG,defaultStyle:"lowercase"}),qG=bG.extend({implicit:[RG,MG,LG,jG]}),zG=qG,cP=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),lP=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function GG(t){return t===null?!1:cP.exec(t)!==null||lP.exec(t)!==null}function KG(t){var e,r,n,i,o,s,l,p=0,u=null,m,d,g;if(e=cP.exec(t),e===null&&(e=lP.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(o=+e[4],s=+e[5],l=+e[6],e[7]){for(p=e[7].slice(0,3);p.length<3;)p+="0";p=+p}return e[9]&&(m=+e[10],d=+(e[11]||0),u=(m*60+d)*6e4,e[9]==="-"&&(u=-u)),g=new Date(Date.UTC(r,n,i,o,s,l,p)),u&&g.setTime(g.getTime()-u),g}function QG(t){return t.toISOString()}var ZG=new Lt("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:GG,construct:KG,instanceOf:Date,represent:QG});function YG(t){return t==="<<"||t===null}var XG=new Lt("tag:yaml.org,2002:merge",{kind:"scalar",resolve:YG}),YT=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function JG(t){if(t===null)return!1;var e,r,n=0,i=t.length,o=YT;for(r=0;r<i;r++)if(e=o.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}function eK(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,o=YT,s=0,l=[];for(e=0;e<i;e++)e%4===0&&e&&(l.push(s>>16&255),l.push(s>>8&255),l.push(s&255)),s=s<<6|o.indexOf(n.charAt(e));return r=i%4*6,r===0?(l.push(s>>16&255),l.push(s>>8&255),l.push(s&255)):r===18?(l.push(s>>10&255),l.push(s>>2&255)):r===12&&l.push(s>>4&255),new Uint8Array(l)}function tK(t){var e="",r=0,n,i,o=t.length,s=YT;for(n=0;n<o;n++)n%3===0&&n&&(e+=s[r>>18&63],e+=s[r>>12&63],e+=s[r>>6&63],e+=s[r&63]),r=(r<<8)+t[n];return i=o%3,i===0?(e+=s[r>>18&63],e+=s[r>>12&63],e+=s[r>>6&63],e+=s[r&63]):i===2?(e+=s[r>>10&63],e+=s[r>>4&63],e+=s[r<<2&63],e+=s[64]):i===1&&(e+=s[r>>2&63],e+=s[r<<4&63],e+=s[64],e+=s[64]),e}function rK(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var nK=new Lt("tag:yaml.org,2002:binary",{kind:"scalar",resolve:JG,construct:eK,predicate:rK,represent:tK}),iK=Object.prototype.hasOwnProperty,oK=Object.prototype.toString;function aK(t){if(t===null)return!0;var e=[],r,n,i,o,s,l=t;for(r=0,n=l.length;r<n;r+=1){if(i=l[r],s=!1,oK.call(i)!=="[object Object]")return!1;for(o in i)if(iK.call(i,o))if(!s)s=!0;else return!1;if(!s)return!1;if(e.indexOf(o)===-1)e.push(o);else return!1}return!0}function sK(t){return t!==null?t:[]}var cK=new Lt("tag:yaml.org,2002:omap",{kind:"sequence",resolve:aK,construct:sK}),lK=Object.prototype.toString;function pK(t){if(t===null)return!0;var e,r,n,i,o,s=t;for(o=new Array(s.length),e=0,r=s.length;e<r;e+=1){if(n=s[e],lK.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;o[e]=[i[0],n[i[0]]]}return!0}function uK(t){if(t===null)return[];var e,r,n,i,o,s=t;for(o=new Array(s.length),e=0,r=s.length;e<r;e+=1)n=s[e],i=Object.keys(n),o[e]=[i[0],n[i[0]]];return o}var fK=new Lt("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:pK,construct:uK}),mK=Object.prototype.hasOwnProperty;function dK(t){if(t===null)return!0;var e,r=t;for(e in r)if(mK.call(r,e)&&r[e]!==null)return!1;return!0}function hK(t){return t!==null?t:{}}var gK=new Lt("tag:yaml.org,2002:set",{kind:"mapping",resolve:dK,construct:hK}),XT=zG.extend({implicit:[ZG,XG],explicit:[nK,cK,fK,gK]}),so=Object.prototype.hasOwnProperty,Pf=1,pP=2,uP=3,Af=4,qT=1,yK=2,zk=3,xK=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,TK=/[\x85\u2028\u2029]/,SK=/[,\[\]\{\}]/,fP=/^(?:!|!!|![a-z\-]+!)$/i,mP=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Gk(t){return Object.prototype.toString.call(t)}function zn(t){return t===10||t===13}function Xo(t){return t===9||t===32}function vr(t){return t===9||t===32||t===10||t===13}function xs(t){return t===44||t===91||t===93||t===123||t===125}function vK(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function bK(t){return t===120?2:t===117?4:t===85?8:0}function wK(t){return 48<=t&&t<=57?t-48:-1}function Kk(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}function _K(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var dP=new Array(256),hP=new Array(256);for(Yo=0;Yo<256;Yo++)dP[Yo]=Kk(Yo)?1:0,hP[Yo]=Kk(Yo);var Yo;function EK(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||XT,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function gP(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=fG(r),new Sr(e,r)}function le(t,e){throw gP(t,e)}function Mf(t,e){t.onWarning&&t.onWarning.call(null,gP(t,e))}var Qk={YAML:function(e,r,n){var i,o,s;e.version!==null&&le(e,"duplication of %YAML directive"),n.length!==1&&le(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&le(e,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),s=parseInt(i[2],10),o!==1&&le(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=s<2,s!==1&&s!==2&&Mf(e,"unsupported YAML version of the document")},TAG:function(e,r,n){var i,o;n.length!==2&&le(e,"TAG directive accepts exactly two arguments"),i=n[0],o=n[1],fP.test(i)||le(e,"ill-formed tag handle (first argument) of the TAG directive"),so.call(e.tagMap,i)&&le(e,'there is a previously declared suffix for "'+i+'" tag handle'),mP.test(o)||le(e,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{le(e,"tag prefix is malformed: "+o)}e.tagMap[i]=o}};function ao(t,e,r,n){var i,o,s,l;if(e<r){if(l=t.input.slice(e,r),n)for(i=0,o=l.length;i<o;i+=1)s=l.charCodeAt(i),s===9||32<=s&&s<=1114111||le(t,"expected valid JSON character");else xK.test(l)&&le(t,"the stream contains non-printable characters");t.result+=l}}function Zk(t,e,r,n){var i,o,s,l;for(_t.isObject(r)||le(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),s=0,l=i.length;s<l;s+=1)o=i[s],so.call(e,o)||(e[o]=r[o],n[o]=!0)}function Ts(t,e,r,n,i,o,s,l,p){var u,m;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),u=0,m=i.length;u<m;u+=1)Array.isArray(i[u])&&le(t,"nested arrays are not supported inside keys"),typeof i=="object"&&Gk(i[u])==="[object Object]"&&(i[u]="[object Object]");if(typeof i=="object"&&Gk(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(u=0,m=o.length;u<m;u+=1)Zk(t,e,o[u],r);else Zk(t,e,o,r);else!t.json&&!so.call(r,i)&&so.call(e,i)&&(t.line=s||t.line,t.lineStart=l||t.lineStart,t.position=p||t.position,le(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):e[i]=o,delete r[i];return e}function JT(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):le(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function xt(t,e,r){for(var n=0,i=t.input.charCodeAt(t.position);i!==0;){for(;Xo(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(zn(i))for(JT(t),i=t.input.charCodeAt(t.position),n++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return r!==-1&&n!==0&&t.lineIndent<r&&Mf(t,"deficient indentation"),n}function If(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||vr(r)))}function eS(t,e){e===1?t.result+=" ":e>1&&(t.result+=_t.repeat(`
`,e-1))}function RK(t,e,r){var n,i,o,s,l,p,u,m,d=t.kind,g=t.result,x;if(x=t.input.charCodeAt(t.position),vr(x)||xs(x)||x===35||x===38||x===42||x===33||x===124||x===62||x===39||x===34||x===37||x===64||x===96||(x===63||x===45)&&(i=t.input.charCodeAt(t.position+1),vr(i)||r&&xs(i)))return!1;for(t.kind="scalar",t.result="",o=s=t.position,l=!1;x!==0;){if(x===58){if(i=t.input.charCodeAt(t.position+1),vr(i)||r&&xs(i))break}else if(x===35){if(n=t.input.charCodeAt(t.position-1),vr(n))break}else{if(t.position===t.lineStart&&If(t)||r&&xs(x))break;if(zn(x))if(p=t.line,u=t.lineStart,m=t.lineIndent,xt(t,!1,-1),t.lineIndent>=e){l=!0,x=t.input.charCodeAt(t.position);continue}else{t.position=s,t.line=p,t.lineStart=u,t.lineIndent=m;break}}l&&(ao(t,o,s,!1),eS(t,t.line-p),o=s=t.position,l=!1),Xo(x)||(s=t.position+1),x=t.input.charCodeAt(++t.position)}return ao(t,o,s,!1),t.result?!0:(t.kind=d,t.result=g,!1)}function kK(t,e){var r,n,i;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(ao(t,n,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)n=t.position,t.position++,i=t.position;else return!0;else zn(r)?(ao(t,n,i,!0),eS(t,xt(t,!1,e)),n=i=t.position):t.position===t.lineStart&&If(t)?le(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);le(t,"unexpected end of the stream within a single quoted scalar")}function PK(t,e){var r,n,i,o,s,l;if(l=t.input.charCodeAt(t.position),l!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(l=t.input.charCodeAt(t.position))!==0;){if(l===34)return ao(t,r,t.position,!0),t.position++,!0;if(l===92){if(ao(t,r,t.position,!0),l=t.input.charCodeAt(++t.position),zn(l))xt(t,!1,e);else if(l<256&&dP[l])t.result+=hP[l],t.position++;else if((s=bK(l))>0){for(i=s,o=0;i>0;i--)l=t.input.charCodeAt(++t.position),(s=vK(l))>=0?o=(o<<4)+s:le(t,"expected hexadecimal character");t.result+=_K(o),t.position++}else le(t,"unknown escape sequence");r=n=t.position}else zn(l)?(ao(t,r,n,!0),eS(t,xt(t,!1,e)),r=n=t.position):t.position===t.lineStart&&If(t)?le(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}le(t,"unexpected end of the stream within a double quoted scalar")}function AK(t,e){var r=!0,n,i,o,s=t.tag,l,p=t.anchor,u,m,d,g,x,b=Object.create(null),v,I,F,U;if(U=t.input.charCodeAt(t.position),U===91)m=93,x=!1,l=[];else if(U===123)m=125,x=!0,l={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=l),U=t.input.charCodeAt(++t.position);U!==0;){if(xt(t,!0,e),U=t.input.charCodeAt(t.position),U===m)return t.position++,t.tag=s,t.anchor=p,t.kind=x?"mapping":"sequence",t.result=l,!0;r?U===44&&le(t,"expected the node content, but found ','"):le(t,"missed comma between flow collection entries"),I=v=F=null,d=g=!1,U===63&&(u=t.input.charCodeAt(t.position+1),vr(u)&&(d=g=!0,t.position++,xt(t,!0,e))),n=t.line,i=t.lineStart,o=t.position,Ss(t,e,Pf,!1,!0),I=t.tag,v=t.result,xt(t,!0,e),U=t.input.charCodeAt(t.position),(g||t.line===n)&&U===58&&(d=!0,U=t.input.charCodeAt(++t.position),xt(t,!0,e),Ss(t,e,Pf,!1,!0),F=t.result),x?Ts(t,l,b,I,v,F,n,i,o):d?l.push(Ts(t,null,b,I,v,F,n,i,o)):l.push(v),xt(t,!0,e),U=t.input.charCodeAt(t.position),U===44?(r=!0,U=t.input.charCodeAt(++t.position)):r=!1}le(t,"unexpected end of the stream within a flow collection")}function MK(t,e){var r,n,i=qT,o=!1,s=!1,l=e,p=0,u=!1,m,d;if(d=t.input.charCodeAt(t.position),d===124)n=!1;else if(d===62)n=!0;else return!1;for(t.kind="scalar",t.result="";d!==0;)if(d=t.input.charCodeAt(++t.position),d===43||d===45)qT===i?i=d===43?zk:yK:le(t,"repeat of a chomping mode identifier");else if((m=wK(d))>=0)m===0?le(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?le(t,"repeat of an indentation width identifier"):(l=e+m-1,s=!0);else break;if(Xo(d)){do d=t.input.charCodeAt(++t.position);while(Xo(d));if(d===35)do d=t.input.charCodeAt(++t.position);while(!zn(d)&&d!==0)}for(;d!==0;){for(JT(t),t.lineIndent=0,d=t.input.charCodeAt(t.position);(!s||t.lineIndent<l)&&d===32;)t.lineIndent++,d=t.input.charCodeAt(++t.position);if(!s&&t.lineIndent>l&&(l=t.lineIndent),zn(d)){p++;continue}if(t.lineIndent<l){i===zk?t.result+=_t.repeat(`
`,o?1+p:p):i===qT&&o&&(t.result+=`
`);break}for(n?Xo(d)?(u=!0,t.result+=_t.repeat(`
`,o?1+p:p)):u?(u=!1,t.result+=_t.repeat(`
`,p+1)):p===0?o&&(t.result+=" "):t.result+=_t.repeat(`
`,p):t.result+=_t.repeat(`
`,o?1+p:p),o=!0,s=!0,p=0,r=t.position;!zn(d)&&d!==0;)d=t.input.charCodeAt(++t.position);ao(t,r,t.position,!1)}return!0}function Yk(t,e){var r,n=t.tag,i=t.anchor,o=[],s,l=!1,p;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),p=t.input.charCodeAt(t.position);p!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,le(t,"tab characters must not be used in indentation")),!(p!==45||(s=t.input.charCodeAt(t.position+1),!vr(s))));){if(l=!0,t.position++,xt(t,!0,-1)&&t.lineIndent<=e){o.push(null),p=t.input.charCodeAt(t.position);continue}if(r=t.line,Ss(t,e,uP,!1,!0),o.push(t.result),xt(t,!0,-1),p=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&p!==0)le(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return l?(t.tag=n,t.anchor=i,t.kind="sequence",t.result=o,!0):!1}function DK(t,e,r){var n,i,o,s,l,p,u=t.tag,m=t.anchor,d={},g=Object.create(null),x=null,b=null,v=null,I=!1,F=!1,U;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=d),U=t.input.charCodeAt(t.position);U!==0;){if(!I&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,le(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),o=t.line,(U===63||U===58)&&vr(n))U===63?(I&&(Ts(t,d,g,x,b,null,s,l,p),x=b=v=null),F=!0,I=!0,i=!0):I?(I=!1,i=!0):le(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,U=n;else{if(s=t.line,l=t.lineStart,p=t.position,!Ss(t,r,pP,!1,!0))break;if(t.line===o){for(U=t.input.charCodeAt(t.position);Xo(U);)U=t.input.charCodeAt(++t.position);if(U===58)U=t.input.charCodeAt(++t.position),vr(U)||le(t,"a whitespace character is expected after the key-value separator within a block mapping"),I&&(Ts(t,d,g,x,b,null,s,l,p),x=b=v=null),F=!0,I=!1,i=!1,x=t.tag,b=t.result;else if(F)le(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=u,t.anchor=m,!0}else if(F)le(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=u,t.anchor=m,!0}if((t.line===o||t.lineIndent>e)&&(I&&(s=t.line,l=t.lineStart,p=t.position),Ss(t,e,Af,!0,i)&&(I?b=t.result:v=t.result),I||(Ts(t,d,g,x,b,v,s,l,p),x=b=v=null),xt(t,!0,-1),U=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&U!==0)le(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return I&&Ts(t,d,g,x,b,null,s,l,p),F&&(t.tag=u,t.anchor=m,t.kind="mapping",t.result=d),F}function FK(t){var e,r=!1,n=!1,i,o,s;if(s=t.input.charCodeAt(t.position),s!==33)return!1;if(t.tag!==null&&le(t,"duplication of a tag property"),s=t.input.charCodeAt(++t.position),s===60?(r=!0,s=t.input.charCodeAt(++t.position)):s===33?(n=!0,i="!!",s=t.input.charCodeAt(++t.position)):i="!",e=t.position,r){do s=t.input.charCodeAt(++t.position);while(s!==0&&s!==62);t.position<t.length?(o=t.input.slice(e,t.position),s=t.input.charCodeAt(++t.position)):le(t,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!vr(s);)s===33&&(n?le(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),fP.test(i)||le(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),s=t.input.charCodeAt(++t.position);o=t.input.slice(e,t.position),SK.test(o)&&le(t,"tag suffix cannot contain flow indicator characters")}o&&!mP.test(o)&&le(t,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{le(t,"tag name is malformed: "+o)}return r?t.tag=o:so.call(t.tagMap,i)?t.tag=t.tagMap[i]+o:i==="!"?t.tag="!"+o:i==="!!"?t.tag="tag:yaml.org,2002:"+o:le(t,'undeclared tag handle "'+i+'"'),!0}function IK(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&le(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!vr(r)&&!xs(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&le(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function CK(t){var e,r,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!vr(n)&&!xs(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&le(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),so.call(t.anchorMap,r)||le(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],xt(t,!0,-1),!0}function Ss(t,e,r,n,i){var o,s,l,p=1,u=!1,m=!1,d,g,x,b,v,I;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=s=l=Af===r||uP===r,n&&xt(t,!0,-1)&&(u=!0,t.lineIndent>e?p=1:t.lineIndent===e?p=0:t.lineIndent<e&&(p=-1)),p===1)for(;FK(t)||IK(t);)xt(t,!0,-1)?(u=!0,l=o,t.lineIndent>e?p=1:t.lineIndent===e?p=0:t.lineIndent<e&&(p=-1)):l=!1;if(l&&(l=u||i),(p===1||Af===r)&&(Pf===r||pP===r?v=e:v=e+1,I=t.position-t.lineStart,p===1?l&&(Yk(t,I)||DK(t,I,v))||AK(t,v)?m=!0:(s&&MK(t,v)||kK(t,v)||PK(t,v)?m=!0:CK(t)?(m=!0,(t.tag!==null||t.anchor!==null)&&le(t,"alias node should not have any properties")):RK(t,v,Pf===r)&&(m=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):p===0&&(m=l&&Yk(t,I))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&le(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),d=0,g=t.implicitTypes.length;d<g;d+=1)if(b=t.implicitTypes[d],b.resolve(t.result)){t.result=b.construct(t.result),t.tag=b.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(so.call(t.typeMap[t.kind||"fallback"],t.tag))b=t.typeMap[t.kind||"fallback"][t.tag];else for(b=null,x=t.typeMap.multi[t.kind||"fallback"],d=0,g=x.length;d<g;d+=1)if(t.tag.slice(0,x[d].tag.length)===x[d].tag){b=x[d];break}b||le(t,"unknown tag !<"+t.tag+">"),t.result!==null&&b.kind!==t.kind&&le(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+b.kind+'", not "'+t.kind+'"'),b.resolve(t.result,t.tag)?(t.result=b.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):le(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||m}function OK(t){var e=t.position,r,n,i,o=!1,s;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(s=t.input.charCodeAt(t.position))!==0&&(xt(t,!0,-1),s=t.input.charCodeAt(t.position),!(t.lineIndent>0||s!==37));){for(o=!0,s=t.input.charCodeAt(++t.position),r=t.position;s!==0&&!vr(s);)s=t.input.charCodeAt(++t.position);for(n=t.input.slice(r,t.position),i=[],n.length<1&&le(t,"directive name must not be less than one character in length");s!==0;){for(;Xo(s);)s=t.input.charCodeAt(++t.position);if(s===35){do s=t.input.charCodeAt(++t.position);while(s!==0&&!zn(s));break}if(zn(s))break;for(r=t.position;s!==0&&!vr(s);)s=t.input.charCodeAt(++t.position);i.push(t.input.slice(r,t.position))}s!==0&&JT(t),so.call(Qk,n)?Qk[n](t,n,i):Mf(t,'unknown document directive "'+n+'"')}if(xt(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,xt(t,!0,-1)):o&&le(t,"directives end mark is expected"),Ss(t,t.lineIndent-1,Af,!1,!0),xt(t,!0,-1),t.checkLineBreaks&&TK.test(t.input.slice(e,t.position))&&Mf(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&If(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,xt(t,!0,-1));return}if(t.position<t.length-1)le(t,"end of the stream or a document separator is expected");else return}function yP(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new EK(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,le(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)OK(r);return r.documents}function NK(t,e,r){e!==null&&typeof e=="object"&&typeof r>"u"&&(r=e,e=null);var n=yP(t,r);if(typeof e!="function")return n;for(var i=0,o=n.length;i<o;i+=1)e(n[i])}function LK(t,e){var r=yP(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new Sr("expected a single document in the stream, but found more")}}var UK=NK,HK=LK,xP={loadAll:UK,load:HK},TP=Object.prototype.toString,SP=Object.prototype.hasOwnProperty,tS=65279,VK=9,cl=10,BK=13,WK=32,$K=33,jK=34,GT=35,qK=37,zK=38,GK=39,KK=42,vP=44,QK=45,Df=58,ZK=61,YK=62,XK=63,JK=64,bP=91,wP=93,e4=96,_P=123,t4=124,EP=125,zt={};zt[0]="\\0";zt[7]="\\a";zt[8]="\\b";zt[9]="\\t";zt[10]="\\n";zt[11]="\\v";zt[12]="\\f";zt[13]="\\r";zt[27]="\\e";zt[34]='\\"';zt[92]="\\\\";zt[133]="\\N";zt[160]="\\_";zt[8232]="\\L";zt[8233]="\\P";var r4=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],n4=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function i4(t,e){var r,n,i,o,s,l,p;if(e===null)return{};for(r={},n=Object.keys(e),i=0,o=n.length;i<o;i+=1)s=n[i],l=String(e[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),p=t.compiledTypeMap.fallback[s],p&&SP.call(p.styleAliases,l)&&(l=p.styleAliases[l]),r[s]=l;return r}function o4(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else if(t<=4294967295)r="U",n=8;else throw new Sr("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+_t.repeat("0",n-e.length)+e}var a4=1,ll=2;function s4(t){this.schema=t.schema||XT,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=_t.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=i4(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?ll:a4,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Xk(t,e){for(var r=_t.repeat(" ",e),n=0,i=-1,o="",s,l=t.length;n<l;)i=t.indexOf(`
`,n),i===-1?(s=t.slice(n),n=l):(s=t.slice(n,i+1),n=i+1),s.length&&s!==`
`&&(o+=r),o+=s;return o}function KT(t,e){return`
`+_t.repeat(" ",t.indent*e)}function c4(t,e){var r,n,i;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(i=t.implicitTypes[r],i.resolve(e))return!0;return!1}function Ff(t){return t===WK||t===VK}function pl(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==tS||65536<=t&&t<=1114111}function Jk(t){return pl(t)&&t!==tS&&t!==BK&&t!==cl}function eP(t,e,r){var n=Jk(t),i=n&&!Ff(t);return(r?n:n&&t!==vP&&t!==bP&&t!==wP&&t!==_P&&t!==EP)&&t!==GT&&!(e===Df&&!i)||Jk(e)&&!Ff(e)&&t===GT||e===Df&&i}function l4(t){return pl(t)&&t!==tS&&!Ff(t)&&t!==QK&&t!==XK&&t!==Df&&t!==vP&&t!==bP&&t!==wP&&t!==_P&&t!==EP&&t!==GT&&t!==zK&&t!==KK&&t!==$K&&t!==t4&&t!==ZK&&t!==YK&&t!==GK&&t!==jK&&t!==qK&&t!==JK&&t!==e4}function p4(t){return!Ff(t)&&t!==Df}function al(t,e){var r=t.charCodeAt(e),n;return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function RP(t){var e=/^\n* /;return e.test(t)}var kP=1,QT=2,PP=3,AP=4,ys=5;function u4(t,e,r,n,i,o,s,l){var p,u=0,m=null,d=!1,g=!1,x=n!==-1,b=-1,v=l4(al(t,0))&&p4(al(t,t.length-1));if(e||s)for(p=0;p<t.length;u>=65536?p+=2:p++){if(u=al(t,p),!pl(u))return ys;v=v&&eP(u,m,l),m=u}else{for(p=0;p<t.length;u>=65536?p+=2:p++){if(u=al(t,p),u===cl)d=!0,x&&(g=g||p-b-1>n&&t[b+1]!==" ",b=p);else if(!pl(u))return ys;v=v&&eP(u,m,l),m=u}g=g||x&&p-b-1>n&&t[b+1]!==" "}return!d&&!g?v&&!s&&!i(t)?kP:o===ll?ys:QT:r>9&&RP(t)?ys:s?o===ll?ys:QT:g?AP:PP}function f4(t,e,r,n,i){t.dump=function(){if(e.length===0)return t.quotingType===ll?'""':"''";if(!t.noCompatMode&&(r4.indexOf(e)!==-1||n4.test(e)))return t.quotingType===ll?'"'+e+'"':"'"+e+"'";var o=t.indent*Math.max(1,r),s=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),l=n||t.flowLevel>-1&&r>=t.flowLevel;function p(u){return c4(t,u)}switch(u4(e,l,t.indent,s,p,t.quotingType,t.forceQuotes&&!n,i)){case kP:return e;case QT:return"'"+e.replace(/'/g,"''")+"'";case PP:return"|"+tP(e,t.indent)+rP(Xk(e,o));case AP:return">"+tP(e,t.indent)+rP(Xk(m4(e,s),o));case ys:return'"'+d4(e)+'"';default:throw new Sr("impossible error: invalid scalar style")}}()}function tP(t,e){var r=RP(t)?String(e):"",n=t[t.length-1]===`
`,i=n&&(t[t.length-2]===`
`||t===`
`),o=i?"+":n?"":"-";return r+o+`
`}function rP(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function m4(t,e){for(var r=/(\n+)([^\n]*)/g,n=function(){var u=t.indexOf(`
`);return u=u!==-1?u:t.length,r.lastIndex=u,nP(t.slice(0,u),e)}(),i=t[0]===`
`||t[0]===" ",o,s;s=r.exec(t);){var l=s[1],p=s[2];o=p[0]===" ",n+=l+(!i&&!o&&p!==""?`
`:"")+nP(p,e),i=o}return n}function nP(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,n,i=0,o,s=0,l=0,p="";n=r.exec(t);)l=n.index,l-i>e&&(o=s>i?s:l,p+=`
`+t.slice(i,o),i=o+1),s=l;return p+=`
`,t.length-i>e&&s>i?p+=t.slice(i,s)+`
`+t.slice(s+1):p+=t.slice(i),p.slice(1)}function d4(t){for(var e="",r=0,n,i=0;i<t.length;r>=65536?i+=2:i++)r=al(t,i),n=zt[r],!n&&pl(r)?(e+=t[i],r>=65536&&(e+=t[i+1])):e+=n||o4(r);return e}function h4(t,e,r){var n="",i=t.tag,o,s,l;for(o=0,s=r.length;o<s;o+=1)l=r[o],t.replacer&&(l=t.replacer.call(r,String(o),l)),(Ri(t,e,l,!1,!1)||typeof l>"u"&&Ri(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=i,t.dump="["+n+"]"}function iP(t,e,r,n){var i="",o=t.tag,s,l,p;for(s=0,l=r.length;s<l;s+=1)p=r[s],t.replacer&&(p=t.replacer.call(r,String(s),p)),(Ri(t,e+1,p,!0,!0,!1,!0)||typeof p>"u"&&Ri(t,e+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=KT(t,e)),t.dump&&cl===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=o,t.dump=i||"[]"}function g4(t,e,r){var n="",i=t.tag,o=Object.keys(r),s,l,p,u,m;for(s=0,l=o.length;s<l;s+=1)m="",n!==""&&(m+=", "),t.condenseFlow&&(m+='"'),p=o[s],u=r[p],t.replacer&&(u=t.replacer.call(r,p,u)),Ri(t,e,p,!1,!1)&&(t.dump.length>1024&&(m+="? "),m+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),Ri(t,e,u,!1,!1)&&(m+=t.dump,n+=m));t.tag=i,t.dump="{"+n+"}"}function y4(t,e,r,n){var i="",o=t.tag,s=Object.keys(r),l,p,u,m,d,g;if(t.sortKeys===!0)s.sort();else if(typeof t.sortKeys=="function")s.sort(t.sortKeys);else if(t.sortKeys)throw new Sr("sortKeys must be a boolean or a function");for(l=0,p=s.length;l<p;l+=1)g="",(!n||i!=="")&&(g+=KT(t,e)),u=s[l],m=r[u],t.replacer&&(m=t.replacer.call(r,u,m)),Ri(t,e+1,u,!0,!0,!0)&&(d=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,d&&(t.dump&&cl===t.dump.charCodeAt(0)?g+="?":g+="? "),g+=t.dump,d&&(g+=KT(t,e)),Ri(t,e+1,m,!0,d)&&(t.dump&&cl===t.dump.charCodeAt(0)?g+=":":g+=": ",g+=t.dump,i+=g));t.tag=o,t.dump=i||"{}"}function oP(t,e,r){var n,i,o,s,l,p;for(i=r?t.explicitTypes:t.implicitTypes,o=0,s=i.length;o<s;o+=1)if(l=i[o],(l.instanceOf||l.predicate)&&(!l.instanceOf||typeof e=="object"&&e instanceof l.instanceOf)&&(!l.predicate||l.predicate(e))){if(r?l.multi&&l.representName?t.tag=l.representName(e):t.tag=l.tag:t.tag="?",l.represent){if(p=t.styleMap[l.tag]||l.defaultStyle,TP.call(l.represent)==="[object Function]")n=l.represent(e,p);else if(SP.call(l.represent,p))n=l.represent[p](e,p);else throw new Sr("!<"+l.tag+'> tag resolver accepts not "'+p+'" style');t.dump=n}return!0}return!1}function Ri(t,e,r,n,i,o,s){t.tag=null,t.dump=r,oP(t,r,!1)||oP(t,r,!0);var l=TP.call(t.dump),p=n,u;n&&(n=t.flowLevel<0||t.flowLevel>e);var m=l==="[object Object]"||l==="[object Array]",d,g;if(m&&(d=t.duplicates.indexOf(r),g=d!==-1),(t.tag!==null&&t.tag!=="?"||g||t.indent!==2&&e>0)&&(i=!1),g&&t.usedDuplicates[d])t.dump="*ref_"+d;else{if(m&&g&&!t.usedDuplicates[d]&&(t.usedDuplicates[d]=!0),l==="[object Object]")n&&Object.keys(t.dump).length!==0?(y4(t,e,t.dump,i),g&&(t.dump="&ref_"+d+t.dump)):(g4(t,e,t.dump),g&&(t.dump="&ref_"+d+" "+t.dump));else if(l==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!s&&e>0?iP(t,e-1,t.dump,i):iP(t,e,t.dump,i),g&&(t.dump="&ref_"+d+t.dump)):(h4(t,e,t.dump),g&&(t.dump="&ref_"+d+" "+t.dump));else if(l==="[object String]")t.tag!=="?"&&f4(t,t.dump,e,o,p);else{if(l==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new Sr("unacceptable kind of an object to dump "+l)}t.tag!==null&&t.tag!=="?"&&(u=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?u="!"+u:u.slice(0,18)==="tag:yaml.org,2002:"?u="!!"+u.slice(18):u="!<"+u+">",t.dump=u+" "+t.dump)}return!0}function x4(t,e){var r=[],n=[],i,o;for(ZT(t,r,n),i=0,o=n.length;i<o;i+=1)e.duplicates.push(r[n[i]]);e.usedDuplicates=new Array(o)}function ZT(t,e,r){var n,i,o;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(e.push(t),Array.isArray(t))for(i=0,o=t.length;i<o;i+=1)ZT(t[i],e,r);else for(n=Object.keys(t),i=0,o=n.length;i<o;i+=1)ZT(t[n[i]],e,r)}function T4(t,e){e=e||{};var r=new s4(e);r.noRefs||x4(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),Ri(r,0,n,!0,!0)?r.dump+`
`:""}var S4=T4,v4={dump:S4};function rS(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var MP=Lt;var DP=XT,b4=xP.load,Yme=xP.loadAll,FP=v4.dump;var Xme=rS("safeLoad","load"),Jme=rS("safeLoadAll","loadAll"),ede=rS("safeDump","dump");var Cf=class{constructor(e,r){this.data=e;this.opts=r}represent(){let e=FP(this.data,Object.assign({replacer:R4,schema:_4},this.opts));return e=e.trim(),e.includes(`
`)&&(e=`
`+e),e}},w4=new MP("!format",{kind:"scalar",resolve:()=>!1,instanceOf:Cf,represent:t=>t.represent()}),_4=DP.extend({implicit:[w4]}),nS=t=>typeof t=="object"&&t!=null;function E4(t){if(nS(t))return Object.values(t).every(e=>!nS(e)&&!Array.isArray(e));if(Array.isArray(t))return t.every(e=>!nS(e)&&!Array.isArray(e))}function R4(t,e){return t===""?e:E4(e)?new Cf(e,{flowLevel:0}):e}var iS=["addSelection","addSelectionAfter","addSelectionBefore","breakLine","clearAndSetSelection","copyToClipboard","cutToClipboard","decrement","deselect","editNewLineAfter","editNewLineBefore","experimental.setInstanceReference","extractVariable","findInDocument","findInWorkspace","flashTargets","foldRegion","followLink","followLinkAside","gitAccept","gitRevert","gitStage","gitUnstage","increment","indentLine","insertCopyAfter","insertCopyBefore","insertEmptyLineAfter","insertEmptyLineBefore","insertEmptyLinesAround","joinLines","outdentLine","randomizeTargets","remove","rename","revealDefinition","revealTypeDefinition","reverseTargets","scrollToBottom","scrollToCenter","scrollToTop","setSelection","setSelectionAfter","setSelectionBefore","showDebugHover","showHover","showQuickFix","showReferences","sortTargets","toggleLineBreakpoint","toggleLineComment","unfoldRegion","private.getTargets","private.setKeyboardTarget","private.showParseTree"],P4=["callAsFunction","editNew","executeCommand","generateSnippet","getText","highlight","insertSnippet","moveToTarget","pasteFromClipboard","replace","replaceWithTarget","rewrapWithPairedDelimiter","swapTargets","wrapWithPairedDelimiter","wrapWithSnippet","parsed"],CP=[...iS,...P4];var A4=["angleBrackets","backtickQuotes","curlyBrackets","doubleQuotes","escapedDoubleQuotes","escapedParentheses","escapedSingleQuotes","escapedSquareBrackets","parentheses","singleQuotes","squareBrackets","tripleBacktickQuotes","tripleDoubleQuotes","tripleSingleQuotes"],M4=["string","any","collectionBoundary"],Of=[...A4,...M4],Jo=["argumentOrParameter","anonymousFunction","attribute","branch","class","className","collectionItem","collectionKey","comment","private.fieldAccess","functionCall","functionCallee","functionName","ifStatement","instance","list","map","name","namedFunction","regularExpression","statement","string","type","value","condition","section","sectionLevelOne","sectionLevelTwo","sectionLevelThree","sectionLevelFour","sectionLevelFive","sectionLevelSix","selector","private.switchStatementSubject","unit","xmlBothTags","xmlElement","xmlEndTag","xmlStartTag","part","chapter","subSection","subSubSection","namedParagraph","subParagraph","environment","character","word","token","identifier","line","sentence","paragraph","boundedParagraph","document","nonWhitespaceSequence","boundedNonWhitespaceSequence","url","notebookCell","command","textFragment","disqualifyDelimiter","pairDelimiter"];function OP(t){return Jo.includes(t.type)}var NP=["simpleScopeTypeType","complexScopeTypeType","customRegex","pairedDelimiter","action","customAction","grapheme"],ul=class extends Error{constructor(e){super(e),this.name="NeedsInitialTalonUpdateError"}},vs=class extends Error{constructor(){super("Custom spoken forms are not currently supported in this ide"),this.name="DisabledCustomSpokenFormsError"}};function fl(t){return t.replace(/([A-Z])/g," $1").split(" ").map(e=>e.toLowerCase()).join(" ")}function ea(t){return t.version>=7}var co=class{constructor(e){this.hashFunction=e;this.map={}}hash(e){return this.hashFunction(e).join("\0")}set(e,r){return this.map[this.hash(e)]=r,this}has(e){return this.hash(e)in this.map}get(e){return this.map[this.hash(e)]}delete(e){return delete this.map[this.hash(e)],this}clear(){return this.map={},this}};var bs=class extends Map{constructor(r){super();this.getDefaultValue=r}get(r){let n=super.get(r);if(n!=null)return n;let i=this.getDefaultValue(r);return this.set(r,i),i}};function LP(...t){return{dispose(){t.forEach(({dispose:e})=>{try{e()}catch(r){console.error(r)}})}}}function ml(t){return typeof t=="string"||t instanceof String}function Nf(t){let[e,...r]=t;return F4(e,r)}function F4(t,e){let r;if(ml(t)){let n=t,[i,o,...s]=e;r={version:0,spokenForm:n,action:i,targets:o,extraArgs:s,usePrePhraseSnapshot:!1}}else r=t;return r}function dl(t,e){let r=new Map;return t.forEach(n=>{let i=e(n),o;r.has(i)?o=r.get(i):(o=[],r.set(i,o)),o.push(n)}),r}function UP(t){for(let e of t)return!1;return!0}function ki(t){return Object.keys(t)}function hl(t,e){return`${t}.${e}`}function HP(t,e,r){if(t.length<2)return[...t];if(t.length===2)return e(t[0],t[1])?[t[0]]:[...t];let n=[],i=t.reduce((o,s)=>{let l=r(s),p=o.get(l);return p==null?(o.set(l,[s]),o):(o.get(l).push(s),p.length===2&&n.push(l),o)},new Map);return n.length===0?[...t]:(n.forEach(o=>{i.set(o,Zc(i.get(o),e))}),t.flatMap(o=>{let s=r(o),l=i.get(s);if(l==null||l.length===0)return[];let p=l[0];return e(p,o)?(l.shift(),p):[]}))}function ta(t,e){if(t.length!==e.length)throw new Error("Lists must have the same length");return t.map((r,n)=>[r,e[n]])}var qP=Symbol.for("immer-nothing"),VP=Symbol.for("immer-draftable"),Vr=Symbol.for("immer-state"),I4=process.env.NODE_ENV!=="production"?[function(t){return`The plugin for '${t}' has not been loaded into Immer. To enable the plugin, import and call \`enable${t}()\` when initializing your application.`},function(t){return`produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '${t}'`},"This object has been frozen and should not be mutated",function(t){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+t},"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.","Immer forbids circular references","The first or second argument to `produce` must be a function","The third argument to `produce` must be a function or undefined","First argument to `createDraft` must be a plain object, an array, or an immerable object","First argument to `finishDraft` must be a draft returned by `createDraft`",function(t){return`'current' expects a draft, got: ${t}`},"Object.defineProperty() cannot be used on an Immer draft","Object.setPrototypeOf() cannot be used on an Immer draft","Immer only supports deleting array indices","Immer only supports setting array indices and the 'length' property",function(t){return`'original' expects a draft, got: ${t}`}]:[];function br(t,...e){if(process.env.NODE_ENV!=="production"){let r=I4[t],n=typeof r=="function"?r.apply(null,e):r;throw new Error(`[Immer] ${n}`)}throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var ws=Object.getPrototypeOf;function _s(t){return!!t&&!!t[Vr]}function na(t){return t?zP(t)||Array.isArray(t)||!!t[VP]||!!t.constructor?.[VP]||Bf(t)||Wf(t):!1}var C4=Object.prototype.constructor.toString();function zP(t){if(!t||typeof t!="object")return!1;let e=ws(t);if(e===null)return!0;let r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===C4}function Lf(t,e){Vf(t)===0?Reflect.ownKeys(t).forEach(r=>{e(r,t[r],t)}):t.forEach((r,n)=>e(n,r,t))}function Vf(t){let e=t[Vr];return e?e.type_:Array.isArray(t)?1:Bf(t)?2:Wf(t)?3:0}function sS(t,e){return Vf(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function GP(t,e,r){let n=Vf(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function O4(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Bf(t){return t instanceof Map}function Wf(t){return t instanceof Set}function ra(t){return t.copy_||t.base_}function cS(t,e){if(Bf(t))return new Map(t);if(Wf(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);let r=zP(t);if(e===!0||e==="class_only"&&!r){let n=Object.getOwnPropertyDescriptors(t);delete n[Vr];let i=Reflect.ownKeys(n);for(let o=0;o<i.length;o++){let s=i[o],l=n[s];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[s]={configurable:!0,writable:!0,enumerable:l.enumerable,value:t[s]})}return Object.create(ws(t),n)}else{let n=ws(t);if(n!==null&&r)return{...t};let i=Object.create(n);return Object.assign(i,t)}}function mS(t,e=!1){return $f(t)||_s(t)||!na(t)||(Vf(t)>1&&(t.set=t.add=t.clear=t.delete=N4),Object.freeze(t),e&&Object.entries(t).forEach(([r,n])=>mS(n,!0))),t}function N4(){br(2)}function $f(t){return Object.isFrozen(t)}var L4={};function ia(t){let e=L4[t];return e||br(0,t),e}var gl;function KP(){return gl}function U4(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function BP(t,e){e&&(ia("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function lS(t){pS(t),t.drafts_.forEach(H4),t.drafts_=null}function pS(t){t===gl&&(gl=t.parent_)}function WP(t){return gl=U4(gl,t)}function H4(t){let e=t[Vr];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function $P(t,e){e.unfinalizedDrafts_=e.drafts_.length;let r=e.drafts_[0];return t!==void 0&&t!==r?(r[Vr].modified_&&(lS(e),br(4)),na(t)&&(t=Uf(e,t),e.parent_||Hf(e,t)),e.patches_&&ia("Patches").generateReplacementPatches_(r[Vr].base_,t,e.patches_,e.inversePatches_)):t=Uf(e,r,[]),lS(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==qP?t:void 0}function Uf(t,e,r){if($f(e))return e;let n=e[Vr];if(!n)return Lf(e,(i,o)=>jP(t,n,e,i,o,r)),e;if(n.scope_!==t)return e;if(!n.modified_)return Hf(t,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;let i=n.copy_,o=i,s=!1;n.type_===3&&(o=new Set(i),i.clear(),s=!0),Lf(o,(l,p)=>jP(t,n,i,l,p,r,s)),Hf(t,i,!1),r&&t.patches_&&ia("Patches").generatePatches_(n,r,t.patches_,t.inversePatches_)}return n.copy_}function jP(t,e,r,n,i,o,s){if(process.env.NODE_ENV!=="production"&&i===r&&br(5),_s(i)){let l=o&&e&&e.type_!==3&&!sS(e.assigned_,n)?o.concat(n):void 0,p=Uf(t,i,l);if(GP(r,n,p),_s(p))t.canAutoFreeze_=!1;else return}else s&&r.add(i);if(na(i)&&!$f(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;Uf(t,i),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&Hf(t,i)}}function Hf(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&mS(e,r)}function V4(t,e){let r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:KP(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1},i=n,o=dS;r&&(i=[n],o=yl);let{revoke:s,proxy:l}=Proxy.revocable(i,o);return n.draft_=l,n.revoke_=s,l}var dS={get(t,e){if(e===Vr)return t;let r=ra(t);if(!sS(r,e))return B4(t,r,e);let n=r[e];return t.finalized_||!na(n)?n:n===oS(t.base_,e)?(aS(t),t.copy_[e]=fS(n,t)):n},has(t,e){return e in ra(t)},ownKeys(t){return Reflect.ownKeys(ra(t))},set(t,e,r){let n=QP(ra(t),e);if(n?.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){let i=oS(ra(t),e),o=i?.[Vr];if(o&&o.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(O4(r,i)&&(r!==void 0||sS(t.base_,e)))return!0;aS(t),uS(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return oS(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,aS(t),uS(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){let r=ra(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){br(11)},getPrototypeOf(t){return ws(t.base_)},setPrototypeOf(){br(12)}},yl={};Lf(dS,(t,e)=>{yl[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});yl.deleteProperty=function(t,e){return process.env.NODE_ENV!=="production"&&isNaN(parseInt(e))&&br(13),yl.set.call(this,t,e,void 0)};yl.set=function(t,e,r){return process.env.NODE_ENV!=="production"&&e!=="length"&&isNaN(parseInt(e))&&br(14),dS.set.call(this,t[0],e,r,t[0])};function oS(t,e){let r=t[Vr];return(r?ra(r):t)[e]}function B4(t,e,r){let n=QP(e,r);return n?"value"in n?n.value:n.get?.call(t.draft_):void 0}function QP(t,e){if(!(e in t))return;let r=ws(t);for(;r;){let n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=ws(r)}}function uS(t){t.modified_||(t.modified_=!0,t.parent_&&uS(t.parent_))}function aS(t){t.copy_||(t.copy_=cS(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var W4=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){let o=r;r=e;let s=this;return function(p=o,...u){return s.produce(p,m=>r.call(this,m,...u))}}typeof r!="function"&&br(6),n!==void 0&&typeof n!="function"&&br(7);let i;if(na(e)){let o=WP(this),s=fS(e,void 0),l=!0;try{i=r(s),l=!1}finally{l?lS(o):pS(o)}return BP(o,n),$P(i,o)}else if(!e||typeof e!="object"){if(i=r(e),i===void 0&&(i=e),i===qP&&(i=void 0),this.autoFreeze_&&mS(i,!0),n){let o=[],s=[];ia("Patches").generateReplacementPatches_(e,i,o,s),n(o,s)}return i}else br(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(s,...l)=>this.produceWithPatches(s,p=>e(p,...l));let n,i;return[this.produce(e,r,(s,l)=>{n=s,i=l}),n,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){na(t)||br(8),_s(t)&&(t=$4(t));let e=WP(this),r=fS(t,void 0);return r[Vr].isManual_=!0,pS(e),r}finishDraft(t,e){let r=t&&t[Vr];(!r||!r.isManual_)&&br(9);let{scope_:n}=r;return BP(n,e),$P(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){let i=e[r];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}r>-1&&(e=e.slice(r+1));let n=ia("Patches").applyPatches_;return _s(t)?n(t,e):this.produce(t,i=>n(i,e))}};function fS(t,e){let r=Bf(t)?ia("MapSet").proxyMap_(t,e):Wf(t)?ia("MapSet").proxySet_(t,e):V4(t,e);return(e?e.scope_:KP()).drafts_.push(r),r}function $4(t){return _s(t)||br(10,t),ZP(t)}function ZP(t){if(!na(t)||$f(t))return t;let e=t[Vr],r;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=cS(t,e.scope_.immer_.useStrictShallowCopy_)}else r=cS(t,!0);return Lf(r,(n,i)=>{GP(r,n,ZP(i))}),e&&(e.finalized_=!1),r}var Br=new W4,jf=Br.produce,Xge=Br.produceWithPatches.bind(Br),Jge=Br.setAutoFreeze.bind(Br),eye=Br.setUseStrictShallowCopy.bind(Br),tye=Br.applyPatches.bind(Br),rye=Br.createDraft.bind(Br),nye=Br.finishDraft.bind(Br);var or=yr(xA(),1),Wye=or.default.v1,$ye=or.default.v1ToV6,jye=or.default.v3,TA=or.default.v4,qye=or.default.v5,zye=or.default.v6,Gye=or.default.v6ToV1,Kye=or.default.v7,Qye=or.default.NIL,Zye=or.default.MAX,Yye=or.default.version,Xye=or.default.validate,Jye=or.default.stringify,exe=or.default.parse;function SA(t,e,r){if(e>=t.length)throw Error(`Expected at least ${e+1} ${r} but received only ${t.length}`);return t[e]}function lm(t,e){if(Array.isArray(t))return t.map(r=>lm(r,e));if(typeof t=="object"&&t!=null){if(u9(t))return SA(e,t.index,"placeholder value");let r={};for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=lm(t[n],e));return r}return t}function u9(t){return typeof t=="object"&&t!=null&&"type"in t&&t.type==="placeholder"}var gm=yr(bA(),1);var f9={blue:"blue",green:"green",red:"red",pink:"pink",yellow:"yellow",userColor1:"navy",userColor2:"apricot",default:null},m9={ex:"ex",fox:"fox",wing:"wing",hole:"hole",frame:"frame",curve:"curve",eye:"eye",play:"play",crosshairs:"cross",bolt:"bolt",default:null},um={cursor:"this",that:"that",source:"source",nothing:"nothing",keyboard:null,explicit:null,decoratedSymbol:null,lineNumber:null,range:null,target:null},fm={modulo100:"row",relativeUp:"up",relativeDown:"down"};function wA(t){let e=f9[t];if(e==null)throw Error(`Unknown hat color '${t}'`);return e}function _A(t){let e=m9[t];if(e==null)throw Error(`Unknown hat shape '${t}'`);return e}function ES(t,e){return Object.fromEntries(Object.entries(t).map(([r,n])=>[r,Object.fromEntries(Object.entries(n).map(([i,o])=>[i,e(o,r,i)]))]))}var d9=Object.fromEntries("air bat cap drum each fine gust harp sit jury crunch look made near odd pit quench red sun trap urge vest whale plex yank zip".split(" ").map((t,e)=>[String.fromCharCode(97+e),t])),h9=Object.fromEntries("zero one two three four five six seven eight nine".split(" ").map((t,e)=>[e.toString(),t])),g9={".":"dot",",":"comma",";":"semicolon",":":"colon","!":"bang","*":"asterisk","@":"at sign","&":"ampersand","?":"question","/":"slash","\\":"backslash","-":"dash","=":"equals","+":"plus","~":"tilde",_:"underscore","#":"hash","%":"percent","^":"caret","|":"pipe",$:"dollar","\xA3":"pound","'":"quote",'"':"double quote","`":"back tick","(":"paren",")":"right paren","{":"brace","}":"right brace","[":"square","]":"right square","<":"angle",">":"right angle","\uFFFD":"special"},EA={...d9,...h9,...g9};function lo(...t){return{defaultSpokenForms:t,isDisabledByDefault:!0,isPrivate:!1}}function Et(...t){return{defaultSpokenForms:t,isDisabledByDefault:!0,isPrivate:!0}}var RA={pairedDelimiter:{curlyBrackets:"curly",angleBrackets:"diamond",escapedDoubleQuotes:"escaped quad",escapedSingleQuotes:"escaped twin",escapedParentheses:"escaped round",escapedSquareBrackets:"escaped box",doubleQuotes:"quad",parentheses:"round",backtickQuotes:"skis",squareBrackets:"box",singleQuotes:"twin",tripleDoubleQuotes:Et("triple quad"),tripleSingleQuotes:Et("triple twin"),tripleBacktickQuotes:Et("triple skis"),any:"pair",string:"string",whitespace:"void",collectionBoundary:Et("collection boundary")},simpleScopeTypeType:{argumentOrParameter:"arg",attribute:"attribute",functionCall:"call",functionCallee:"callee",className:"class name",class:"class",comment:"comment",functionName:"funk name",namedFunction:"funk",ifStatement:"if state",instance:"instance",collectionItem:"item",collectionKey:"key",anonymousFunction:"lambda",list:"list",map:"map",name:"name",regularExpression:"regex",section:"section",sectionLevelOne:lo("one section"),sectionLevelTwo:lo("two section"),sectionLevelThree:lo("three section"),sectionLevelFour:lo("four section"),sectionLevelFive:lo("five section"),sectionLevelSix:lo("six section"),selector:"selector",statement:"state",branch:"branch",type:"type",value:"value",condition:"condition",unit:"unit",xmlElement:"element",xmlBothTags:"tags",xmlStartTag:"start tag",xmlEndTag:"end tag",part:"part",chapter:"chapter",subSection:"subsection",subSubSection:"subsubsection",namedParagraph:"paragraph",subParagraph:"subparagraph",environment:"environment",command:"command",character:"char",word:"sub",token:"token",identifier:"identifier",line:"line",sentence:"sentence",paragraph:"block",boundedParagraph:"short block",document:"file",nonWhitespaceSequence:"paint",boundedNonWhitespaceSequence:"short paint",url:"link",notebookCell:"cell",string:Et("parse tree string"),textFragment:Et("text fragment"),disqualifyDelimiter:Et("disqualify delimiter"),pairDelimiter:Et("pair delimiter"),"private.fieldAccess":Et("access"),"private.switchStatementSubject":Et("subject")},complexScopeTypeType:{glyph:"glyph"},surroundingPairForceDirection:{left:"left",right:"right"},simpleModifier:{excludeInterior:"bounds",toRawSelection:"just",leading:"leading",trailing:"trailing",keepContentFilter:"content",keepEmptyFilter:"empty",inferPreviousMark:"its",startOf:"start of",endOf:"end of",interiorOnly:"inside",visible:"visible",extendThroughStartOf:"head",extendThroughEndOf:"tail",everyScope:"every"},modifierExtra:{first:"first",last:"last",previous:"previous",next:"next",forward:"forward",backward:"backward",ancestor:"grand"},customRegex:{},action:{addSelection:"append",addSelectionAfter:"append post",addSelectionBefore:"append pre",breakLine:"break",scrollToBottom:"bottom",toggleLineBreakpoint:"break point",cutToClipboard:"carve",scrollToCenter:"center",clearAndSetSelection:"change",remove:"chuck",insertCopyBefore:"clone up",insertCopyAfter:"clone",toggleLineComment:"comment",copyToClipboard:"copy",scrollToTop:"crown",outdentLine:"dedent",revealDefinition:"define",editNewLineBefore:"drink",insertEmptyLineBefore:"drop",extractVariable:"extract",insertEmptyLineAfter:"float",foldRegion:"fold",followLink:"follow",followLinkAside:"follow split",flashTargets:"flash",deselect:"give",highlight:"highlight",showHover:"hover",increment:"increment",decrement:"decrement",indentLine:"indent",showDebugHover:"inspect",setSelectionAfter:"post",editNewLineAfter:"pour",setSelectionBefore:"pre",insertEmptyLinesAround:"puff",showQuickFix:"quick fix",showReferences:"reference",rename:"rename",reverseTargets:"reverse",findInDocument:"scout",findInWorkspace:"scout all",randomizeTargets:"shuffle",generateSnippet:"snippet make",sortTargets:"sort",setSelection:"take",revealTypeDefinition:"type deaf",unfoldRegion:"unfold",callAsFunction:"call",swapTargets:"swap",replaceWithTarget:"bring",moveToTarget:"move",wrapWithPairedDelimiter:"wrap",wrapWithSnippet:"wrap",rewrapWithPairedDelimiter:"repack",insertSnippet:"snippet",pasteFromClipboard:"paste",joinLines:"join",gitAccept:"git accept",gitRevert:"git revert",gitStage:"git stage",gitUnstage:"git unstage","private.showParseTree":Et("parse tree"),"experimental.setInstanceReference":lo("from"),editNew:Et("edit new"),executeCommand:Et("execute command"),parsed:Et("parsed"),getText:Et("get text"),replace:Et("replace"),"private.getTargets":Et("get targets"),"private.setKeyboardTarget":Et("set keyboard target")},customAction:{},grapheme:EA};var RS=ES(RA,t=>typeof t=="string"?{defaultSpokenForms:[t],isDisabledByDefault:!1,isPrivate:!1}:t),Ai=ES(RS,({defaultSpokenForms:t,isDisabledByDefault:e,isPrivate:r})=>({spokenForms:e?[]:t,isCustom:!1,defaultSpokenForms:t,requiresTalonUpdate:!1,isPrivate:r}));var ht={rangeExclusive:"between",rangeInclusive:"past",rangeExcludingStart:null,rangeExcludingEnd:"until",listConnective:"and",swapConnective:"with",sourceDestinationConnective:"to",before:"before",after:"after",verticalRange:"slice",previous:"previous",next:"next",forward:"forward",backward:"backward"};var AA=yr(PA(),1),dm=class{constructor(e){this.mooLexer=AA.default.compile(e)}reset(e,r){let{mooState:n}=r??{};return this.mooLexer.reset(e,n),this}formatError(e,r){return this.mooLexer.formatError(e,r)}has(e){return this.mooLexer.has(e)}save(){return{mooState:this.mooLexer.save()}}next(){let e=this.mooLexer.next();return this.skipToken(e)?this.next():e}transform({value:e}){return e}skipToken(e){return e?.type==="ws"}};var Mi={};for(let t of iS){let{spokenForms:e}=Ai.action[t];for(let r of e)Mi[r]={type:"simpleActionName",value:t}}var y9=["replaceWithTarget","moveToTarget"];for(let t of y9){let{spokenForms:e}=Ai.action[t];for(let r of e)Mi[r]={type:"bringMove",value:t}}var x9=["before","after","to"];for(let t of x9){let e=ht[t==="to"?"sourceDestinationConnective":t];Mi[e]={type:"insertionMode",value:t}}for(let t of Jo){let{spokenForms:e}=Ai.simpleScopeTypeType[t];for(let r of e)Mi[r]={type:"simpleScopeTypeType",value:t}}for(let t of Of){let{spokenForms:e}=Ai.pairedDelimiter[t];for(let r of e)Mi[r]={type:"pairedDelimiter",value:t}}for(let[t,e]of Object.entries(um))e!=null&&(Mi[e]={type:"simpleMarkType",value:t});var Di=new dm({ws:/[ \t]+/,placeholderTarget:{match:/<target\d*>/,value:t=>t.slice(7,-1)},token:{match:Object.keys(Mi),type:t=>Mi[t].type,value:t=>Mi[t].value}});function MA(t,e){return{name:t,target:e}}function DA(t,e,r){return{name:t,source:e,destination:r}}function hm(t,e){let r={type:"primitive"};return t!=null&&(r.modifiers=t),e!=null&&(r.mark=e),r}function FA(t,e){return{type:"primitive",insertionMode:t,target:e}}function IA(t){return{type:"containingScope",scopeType:t}}function CA(t){return{type:t}}function OA(t){return{type:"surroundingPair",delimiter:t}}function NA(t){return{type:t}}function LA(t){return{type:"target",target:{type:"placeholder",index:t.length===0?0:parseInt(t)-1}}}function kS(t){return t[0]}var T9={Lexer:Di,ParserRules:[{name:"main",symbols:["action"],postprocess:kS},{name:"action",symbols:[Di.has("simpleActionName")?{type:"simpleActionName"}:simpleActionName,"target"],postprocess:([t,e])=>MA(t,e)},{name:"action",symbols:[Di.has("bringMove")?{type:"bringMove"}:bringMove,"target","destination"],postprocess:([t,e,r])=>DA(t,e,r)},{name:"destination",symbols:["primitiveDestination"],postprocess:kS},{name:"destination",symbols:[Di.has("insertionMode")?{type:"insertionMode"}:insertionMode,"target"],postprocess:([t,e])=>FA(t,e)},{name:"target",symbols:["primitiveTarget"],postprocess:kS},{name:"primitiveTarget$ebnf$1",symbols:["modifier"]},{name:"primitiveTarget$ebnf$1",symbols:["primitiveTarget$ebnf$1","modifier"],postprocess:t=>t[0].concat([t[1]])},{name:"primitiveTarget",symbols:["primitiveTarget$ebnf$1"],postprocess:([t])=>hm(t,void 0)},{name:"primitiveTarget",symbols:["mark"],postprocess:([t])=>hm(void 0,t)},{name:"primitiveTarget$ebnf$2",symbols:["modifier"]},{name:"primitiveTarget$ebnf$2",symbols:["primitiveTarget$ebnf$2","modifier"],postprocess:t=>t[0].concat([t[1]])},{name:"primitiveTarget",symbols:["primitiveTarget$ebnf$2","mark"],postprocess:([t,e])=>hm(t,e)},{name:"modifier",symbols:["containingScopeModifier"],postprocess:([t])=>t},{name:"containingScopeModifier",symbols:["scopeType"],postprocess:([t])=>IA(t)},{name:"scopeType",symbols:[Di.has("simpleScopeTypeType")?{type:"simpleScopeTypeType"}:simpleScopeTypeType],postprocess:([t])=>CA(t)},{name:"scopeType",symbols:[Di.has("pairedDelimiter")?{type:"pairedDelimiter"}:pairedDelimiter],postprocess:([t])=>OA(t)},{name:"mark",symbols:[Di.has("simpleMarkType")?{type:"simpleMarkType"}:simpleMarkType],postprocess:([t])=>NA(t)},{name:"mark",symbols:[Di.has("placeholderTarget")?{type:"placeholderTarget"}:placeholderTarget],postprocess:([t])=>LA(t)}],ParserStart:"main"},UA=T9;function S9(){return new gm.Parser(gm.Grammar.fromCompiled(UA))}function HA(t){let e=S9();if(e.feed(t),e.results.length!==1)throw new Error(`Expected exactly one result, got ${e.results.length}`);return e.results[0]}function ym(t,e){let r=HA(t);return lm(r,e)}function vl(t){switch(t.name){case"callAsFunction":return[t.callee,t.argument];case"replaceWithTarget":case"moveToTarget":return[t.source,...VA(t.destination)];case"swapTargets":return[t.target1,t.target2];case"pasteFromClipboard":case"insertSnippet":case"replace":case"editNew":return VA(t.destination);case"parsed":return vl(ym(t.content,t.arguments));default:return[t.target]}}function VA(t){switch(t.type){case"list":return t.destinations.map(({target:e})=>e);case"primitive":return[t.target];case"implicit":return[]}}function AS(t){return t.flatMap(PS)}function PS(t){switch(t.type){case"primitive":return[t];case"list":return t.elements.flatMap(PS);case"range":return[t.anchor,t.active].flatMap(PS);case"implicit":return[]}}var v9={arrowFunction:"anonymousFunction",dictionary:"map",regex:"regularExpression"},b9={purple:"pink"};function w9(t){t.modifiers?.forEach(e=>{(e.type==="containingScope"||e.type==="everyScope")&&(e.scopeType.type=v9[e.scopeType.type]??e.scopeType.type)})}function _9(t){t.mark?.type==="decoratedSymbol"&&(t.mark.symbolColor=b9[t.mark.symbolColor]??t.mark.symbolColor)}function MS(t){AS(t).forEach(e=>{w9(e),_9(e)})}function BA(t){return{...t,version:1}}var E9={type:"primitive",mark:{type:"cursor"},selectionType:"token",position:"contents",modifier:{type:"identity"},insideOutsideType:"inside"},R9={type:"primitive",isImplicit:!0},WA=t=>Ei(t,E9)?R9:t;function $A(t){let e=t.action;return{spokenForm:t.spokenForm,action:{name:e,args:t.extraArgs},targets:P9(t.targets,e),usePrePhraseSnapshot:t.usePrePhraseSnapshot??!1,version:2}}function k9(t){switch(t.type){case"identity":return[];case"containingScope":{let{includeSiblings:e,scopeType:r,type:n,...i}=t;return[{type:e?"everyScope":"containingScope",scopeType:{type:r},...i}]}case"surroundingPair":{let{delimiterInclusion:e,...r}=t,n={type:"containingScope",scopeType:r};return e==="interiorOnly"||e==="excludeInterior"?n.scopeType.delimiter==="any"?[{type:e}]:[{type:e},n]:[n]}case"subpiece":{let{type:e,pieceType:r,...n}=t;return[{type:"ordinalRange",scopeType:{type:r},...n}]}case"head":return[{type:"extendThroughStartOf"}];case"tail":return[{type:"extendThroughEndOf"}];default:return[t]}}function DS(t,e){let{type:r,isImplicit:n,mark:i,insideOutsideType:o,modifier:s,selectionType:l,position:p}=t,u=[];if(p&&p!=="contents"&&(p==="before"?o==="inside"?u.push({type:"position",position:"start"}):e==="remove"?u.push({type:"leading"}):u.push({type:"position",position:"before"}):o==="inside"?u.push({type:"position",position:"end"}):e==="remove"?u.push({type:"trailing"}):u.push({type:"position",position:"after"})),l)switch(l){case"token":if(s?.type==="subpiece")break;case"line":if(i?.type==="lineNumber")break;default:u.push({type:"containingScope",scopeType:{type:l}})}return s&&u.push(...k9(s)),{type:r,isImplicit:n,modifiers:u.length>0?u:void 0,mark:i?.type==="cursorToken"?void 0:i}}function jA(t,e){switch(t.type){case"list":return{...t,elements:t.elements.map(r=>jA(r,e))};case"range":{let{type:r,rangeType:n,start:i,end:o,excludeStart:s,excludeEnd:l}=t;return{type:r,rangeType:n,anchor:DS(i,e),active:DS(o,e),excludeAnchor:s??!1,excludeActive:l??!1}}case"primitive":return DS(t,e)}}function P9(t,e){return t.map(r=>jA(r,e)).map(r=>r.type==="primitive"?WA(r):r)}function qA(t){return{...t,version:3,targets:t.targets.map(zA)}}function zA(t){switch(t.type){case"list":return{...t,elements:t.elements.map(e=>zA(e))};case"range":{let{anchor:e,active:r,...n}=t;return{anchor:FS(e),active:FS(r),...n}}case"primitive":return FS(t)}}function FS(t){let e=t.modifiers!=null?t.modifiers.map(M9):void 0;if(t.mark?.type==="lineNumber"){let{anchor:r,active:n}=t.mark;if(r.type!==n.type||r.lineNumber<0!=n.lineNumber<0)return{type:"range",anchor:{type:"primitive",mark:wl(r),modifiers:e},active:{type:"primitive",mark:wl(n)},excludeAnchor:!1,excludeActive:!1}}return{...t,mark:t.mark!=null?A9(t.mark):void 0,modifiers:e}}function A9(t){switch(t.type){case"lineNumber":return D9(t);default:return t}}function M9(t){switch(t.type){case"ordinalRange":return F9(t);default:return t}}function D9(t){return Ei(t.anchor,t.active)?wl(t.anchor):{type:"range",anchor:wl(t.anchor),active:wl(t.active)}}function F9(t){return t.anchor===t.active?bl(t.scopeType,t.anchor):t.anchor===0&&t.active>t.anchor?bl(t.scopeType,t.anchor,t.active-t.anchor+1):t.anchor<0&&t.active===-1?bl(t.scopeType,t.anchor,-t.anchor):{type:"range",anchor:bl(t.scopeType,t.anchor),active:bl(t.scopeType,t.active),excludeAnchor:t.excludeAnchor,excludeActive:t.excludeActive}}function wl(t){return{type:"lineNumber",lineNumberType:t.type,lineNumber:t.lineNumber}}function bl(t,e,r=1){return{type:"ordinalScope",scopeType:t,start:e,length:r}}function KA(t){return{...t,version:4,targets:t.targets.map(QA)}}function QA(t){switch(t.type){case"primitive":return GA(t);case"range":{let{anchor:e,...r}=t;return{...r,anchor:GA(e)}}case"list":{let{elements:e,...r}=t;return{...r,elements:e.map(QA)}}}}function GA(t){return t.mark==null&&t.modifiers==null||t.isImplicit?{type:"implicit"}:t}function ZA(t){return{...t,version:5,action:I9(t.action),targets:t.targets.map(xm)}}function I9(t){switch(t.name){case"wrapWithSnippet":{let[e,r]=C9(t.args[0]);return{name:"wrapWithSnippet",args:[{type:"named",name:e,variableName:r}]}}case"insertSnippet":{let[e,r]=t.args,n={type:"named",name:e};return r!=null&&(n.substitutions=r),{name:"insertSnippet",args:[n]}}default:return t}}function C9(t){let[e,r]=t.split(".");if(e==null||r==null)throw new Error("Snippet location missing '.'");return[e,r]}function xm(t){switch(t.type){case"implicit":return t;case"list":return{...t,elements:t.elements.map(xm)};case"range":return{...t,anchor:xm(t.anchor),active:xm(t.active)};case"primitive":return{...t,mark:t.mark!=null?IS(t.mark):void 0,modifiers:t.modifiers!=null&&t.modifiers.length>0?t.modifiers.map(CS):void 0}}}function IS(t){return t.type==="range"?{...t,anchor:IS(t.anchor),active:IS(t.active),excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1}:t}function CS(t){return t.type==="range"?{...t,anchor:CS(t.anchor),active:CS(t.active),excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1}:t}var O9={bring:"replaceWithTarget",call:"callAsFunction",clear:"clearAndSetSelection",commentLines:"toggleLineComment",copy:"copyToClipboard",cut:"cutToClipboard",delete:"remove",editNewLineAbove:"editNewLineBefore",editNewLineBelow:"editNewLineAfter",findInFiles:"findInWorkspace",fold:"foldRegion",indentLines:"indentLine",insertEmptyLineAbove:"insertEmptyLineBefore",insertEmptyLineBelow:"insertEmptyLineAfter",insertLineAfter:"editNewLineAfter",insertLineBefore:"editNewLineBefore",move:"moveToTarget",outdentLines:"outdentLine",paste:"pasteFromClipboard",reverse:"reverseTargets",setBreakpoint:"toggleLineBreakpoint",sort:"sortTargets",swap:"swapTargets",unfold:"unfoldRegion",use:"replaceWithTarget",wrap:"wrapWithPairedDelimiter"};function OS(t){let e=O9[t]??t;if(!CP.includes(e))throw new Error(`Unknown action name: ${e}`);return e}function YA(t){return{version:6,spokenForm:t.spokenForm,usePrePhraseSnapshot:t.usePrePhraseSnapshot,action:N9(t.action,t.targets)}}function N9(t,e){let r=OS(t.name);switch(r){case"replaceWithTarget":case"moveToTarget":return{name:r,source:cn(e[0]),destination:_l(e[1])};case"swapTargets":return{name:r,target1:cn(e[0]),target2:cn(e[1])};case"callAsFunction":return{name:r,callee:cn(e[0]),argument:cn(e[1])};case"pasteFromClipboard":return{name:r,destination:_l(e[0])};case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return{name:r,left:t.args[0],right:t.args[1],target:cn(e[0])};case"generateSnippet":return{name:r,snippetName:t.args?.[0],target:cn(e[0])};case"insertSnippet":return{name:r,snippetDescription:t.args[0],destination:_l(e[0])};case"wrapWithSnippet":return{name:r,snippetDescription:t.args[0],target:cn(e[0])};case"executeCommand":return{name:r,commandId:t.args[0],options:t.args?.[1],target:cn(e[0])};case"replace":return{name:r,replaceWith:t.args[0],destination:_l(e[0])};case"highlight":{let n={name:r,target:cn(e[0])};return t.args?.[0]!=null&&(n.highlightId=t.args?.[0]),n}case"editNew":return{name:r,destination:_l(e[0])};case"getText":return{name:r,options:t.args?.[0],target:cn(e[0])};case"parsed":throw Error("Parsed action should not be present in V5");default:return{name:r,target:cn(e[0])}}}function cn(t){switch(t.type){case"list":case"range":case"primitive":return L9(t);case"implicit":return t}}function L9(t){switch(t.type){case"list":return U9(t);case"range":case"primitive":return Tm(t)}}function U9(t){return{...t,elements:t.elements.map(Tm)}}function Tm(t){switch(t.type){case"range":return XA(t);case"primitive":return Sm(t)}}function XA(t){let{anchor:e,active:r}=t,n={type:"range",anchor:e.type==="implicit"?e:Sm(e),active:Sm(r),excludeAnchor:t.excludeAnchor,excludeActive:t.excludeActive};return t.rangeType!=null&&(n.rangeType=t.rangeType),n}function Sm(t){let e={type:"primitive"},r=j9(t.modifiers);return r!=null&&(e.modifiers=r),t.mark!=null&&(e.mark=t.mark),e}function _l(t){switch(t.type){case"list":return H9(t);case"range":return V9(t);case"primitive":return B9(t);case"implicit":return W9()}}function H9(t){let e=[],r=[],n,i=()=>{r.length>0&&e.push({type:"primitive",insertionMode:n??"to",target:r.length===1?r[0]:{type:"list",elements:r}})};return t.elements.forEach(o=>{let s=vm(o);s!=null?(i(),r=[Tm(o)],n=s):r.push(Tm(o))}),i(),e.length>1?{type:"list",destinations:e}:e[0]}function V9(t){return{type:"primitive",insertionMode:vm(t.anchor)??"to",target:XA(t)}}function B9(t){return{type:"primitive",insertionMode:vm(t)??"to",target:Sm(t)}}function W9(){return{type:"implicit"}}function vm(t){switch(t.type){case"implicit":return"to";case"primitive":return $9(t);case"range":return vm(t.anchor)}}function $9(t){let e=t.modifiers?.find(r=>r.type==="position");if(e!=null){if(t.modifiers.indexOf(e)!==0)throw Error("Position modifier has to be at first index");if(e?.position==="before"||e?.position==="after")return e.position}}function j9(t){let e=[];if(t!=null)for(let r of t)r.type==="position"?r.position==="start"?e.push({type:"startOf"}):r.position==="end"&&e.push({type:"endOf"}):e.push(r);return e.length>0?e:void 0}function JA(t){return{...t,version:7}}function LS(t){let e=q9(t,7),{action:r,usePrePhraseSnapshot:n=!1,spokenForm:i}=e;return{version:7,spokenForm:i,action:jf(r,o=>{let s=vl(o);MS(s),r.name}),usePrePhraseSnapshot:n}}function q9(t,e){if(t.version>7)throw new Lu;for(;t.version<e;)switch(t.version){case 0:t=BA(t);break;case 1:t=$A(t);break;case 2:t=qA(t);break;case 3:t=KA(t);break;case 4:t=ZA(t);break;case 5:t=YA(t);break;case 6:t=JA(t);break;default:throw new Error(`Can't upgrade from unknown version ${t.version}`)}return t}var US;function bm(t){US=t}function k(){if(US==null)throw Error("Tried to access ide before it was injected");return US}var wm=class{constructor(e){this.maxLength=e;this.stack=[];this.index=void 0}push(e){this.index!=null?this.stack.splice(this.index+1,this.stack.length-this.index-1,e):this.stack.push(e),this.stack.length>this.maxLength&&this.stack.shift(),this.index=this.stack.length-1}undo(){if(this.index!=null&&this.index>0)return this.index--,this.stack[this.index]}redo(){if(this.index!=null&&this.index<this.stack.length-1)return this.index++,this.stack[this.index]}};var z9=25,_m=class{constructor(){this.targetMap=new Map;this.targetHistory=new bs(()=>new wm(z9));this.notifier=new qt}set(e,r,{history:n=!1}={}){this.targetMap.set(e,r),n&&r!=null&&this.targetHistory.get(e).push(r),this.notifier.notifyListeners(e,r)}get(e){return this.targetMap.get(e)}undo(e){let r=this.targetHistory.get(e).undo();r!=null&&this.set(e,r,{history:!1})}redo(e){let r=this.targetHistory.get(e).redo();r!=null&&this.set(e,r,{history:!1})}onStoredTargets(e){for(let r of gs)e(r,this.get(r));return this.notifier.registerListener(e)}};function Tt(t){if(t.length===0)throw new Error("Require at least one target with this action");let e=t.map(r=>r.editor);if(new Set(e).size>1)throw new Error("Can only have one editor with this action");return e[0]}function _r(t){if(t.length!==1)throw new Error("Can only have one target with this action");return t[0]}async function Fi(t,e,r){return Promise.all(HS(t,e).map(([n,i])=>r(n,i)))}async function rt(t,e){return Fi(t,r=>r.editor,e)}async function eM(t,e){let r=HS(t,i=>i.editor),n=[];for(let[i,o]of r)n.push(await e(i,o));return n}function tM(t){return HS(t,e=>e.editor)}function HS(t,e){let n=dl(t,i=>e(i).document.uri);return Array.from(n.values(),i=>[e(i[0]),i])}function ln(t,e){return e!=null?wt(t,e).map(([n,i])=>({editor:n.editor,selection:n?.isReversed?new be(i.end,i.start):new be(i.start,i.end)})):t.map(n=>({editor:n.editor,selection:n.contentSelection}))}function pn(t,e){return t.textualType==="line"?Hr(e):ir(e)}function G9(t){return pn(t,t.contentRange)}function De(t,e,r,n=G9){return t.flashRanges(e.map(i=>({editor:i.editor,range:n(i),style:r})))}function po(t,e){return new W(new pe(e.start.line,0),t.document.lineAt(e.end).range.end)}function VS(t,e){return e.isEmpty?0:t.document.offsetAt(e.end)-t.document.offsetAt(e.start)}function rM(t,e){let[r,n]=e instanceof pe?[e,e]:[e.start,e.end];return t.start.isBefore(r)&&t.end.isAfter(n)}function Ii(t,...e){for(let r of e)r!=null&&(t=t.union(r));return t}var Em=class t{constructor(e,r,n){this.target=e;this.insertionMode=r;this.contentRange=Q9(e.contentRange,r),this.isBefore=r==="before",this.isLineDelimiter=e.insertionDelimiter.includes(`
`),this.indentationString=n??this.isLineDelimiter?K9(e.editor,e.contentRange):"",this.insertionPrefix=e.prefixRange!=null?e.editor.document.getText(e.prefixRange):void 0}get contentSelection(){return this.contentRange.toSelection(this.target.isReversed)}get editor(){return this.target.editor}get insertionDelimiter(){return this.target.insertionDelimiter}get isRaw(){return this.target.isRaw}withTarget(e){return new t(e,this.insertionMode,this.indentationString)}getEditNewActionType(){return this.insertionMode==="after"&&this.target.contentRange.isSingleLine&&this.insertionDelimiter===`
`&&this.insertionPrefix==null?"insertLineAfter":"edit"}constructChangeEdit(e,r=!1){return this.insertionMode==="before"||this.insertionMode==="after"?this.constructEditWithDelimiters(e,r):this.constructEditWithoutDelimiters(e)}constructEditWithDelimiters(e,r){let n=this.getEditRange(),i=this.getEditText(e,r),o=s=>this.updateRange(s,e,r);return{range:n,text:i,isReplace:this.insertionMode==="after",updateRange:o}}constructEditWithoutDelimiters(e){return{range:this.contentRange,text:e,updateRange:r=>r}}getEditRange(){let e=(()=>{let r=this.isBefore?Ii(this.target.contentRange,this.target.prefixRange).start:this.target.contentRange.end;if(this.isLineDelimiter){let n=this.editor.document.lineAt(r),i=this.isBefore?n.rangeTrimmed?.start??n.range.start:n.rangeTrimmed?.end??n.range.end;if(r.isEqual(i))return this.isBefore?n.range.start:n.range.end}return r})();return new W(e,e)}getEditText(e,r){let i=(r?"":this.indentationString)+(this.insertionPrefix??"")+e;return this.isBefore?i+this.insertionDelimiter:this.insertionDelimiter+i}updateRange(e,r,n){let i=this.editor.document.offsetAt(e.start)+(n?0:this.indentationString.length)+(this.insertionPrefix?.length??0),o=this.isBefore?i:i+this.getLengthOfInsertionDelimiter(),s=o+r.length;return new W(this.editor.document.positionAt(o),this.editor.document.positionAt(s))}getLengthOfInsertionDelimiter(){if(this.editor.document.eol==="CRLF"){let e=this.insertionDelimiter.match(/\n/g);if(e!=null)return this.insertionDelimiter.length+e.length}return this.insertionDelimiter.length}};function K9(t,e){let r=Number.MAX_SAFE_INTEGER,n="";for(let i=e.start.line;i<=e.end.line;++i){let o=t.document.lineAt(i);if(o.range.isEmpty||o.isEmptyOrWhitespace&&!e.isSingleLine)continue;let s=o.rangeTrimmed?.start??o.range.end;s.character<r&&(r=s.character,n=o.text.slice(0,r))}return n}function Q9(t,e){switch(e){case"before":return t.start.toEmptyRange();case"after":return t.end.toEmptyRange();case"to":return t}}function Es(t,e,r,n){return Z9(t.contentRange,e.contentRange,r,n)}function Z9(t,e,r,n){return new W(r?t.start:t.end,n?e.end:e.start)}function Rs(t,e,r,n){let i=r?t.contentRange.start:new pe(t.contentRange.end.line+1,0),o=n?e.contentRange.end:e.editor.document.lineAt(e.contentRange.start.line-1).range.end;return new W(i,o)}var He=class t{constructor(e){this.hasExplicitScopeType=!0;this.hasExplicitRange=!0;this.isRaw=!1;this.isImplicit=!1;this.isNotebookCell=!1;this.textualType="token";this.state={editor:e.editor,isReversed:e.isReversed,contentRange:e.contentRange,thatTarget:e.thatTarget}}get editor(){return this.state.editor}get isReversed(){return this.state.isReversed}get thatTarget(){return this.state.thatTarget!=null?this.state.thatTarget.thatTarget:this}get contentText(){return this.editor.document.getText(this.contentRange)}get contentSelection(){return this.contentRange.toSelection(this.isReversed)}get contentRange(){return this.state.contentRange}constructRemovalEdit(){return{range:this.getRemovalRange(),text:"",updateRange:e=>e}}getRemovalHighlightRange(){return pn(this,this.getRemovalRange())}withThatTarget(e){return this.cloneWith({thatTarget:e})}withContentRange(e){return this.cloneWith({contentRange:e})}getInterior(){}getBoundary(){}cloneWith(e){let r=Object.getPrototypeOf(this).constructor;return new r({...this.getCloneParameters(),...e})}maybeCreateRichRangeTarget(e,r){let{constructor:n}=Object.getPrototypeOf(this);return new n({...this.getCloneParameters(),isReversed:e,contentRange:Es(this,r,!0,!0)})}isEqual(e){return e instanceof t&&Ei(this.getEqualityParameters(),e.getEqualityParameters())}getEqualityParameters(){let{thatTarget:e,...r}=this.getCloneParameters();return{...r}}toDestination(e){return new Em(this,e)}toPlainObject(){return{type:this.type,contentRange:ol(this.contentRange),isReversed:this.isReversed,hasExplicitRange:this.hasExplicitRange}}};function Rm(t,e){return Y9(t,e.start,e.end)}function Y9(t,e,r){return{editor:t.editor,selection:X9(t.selection,e,r)}}function X9(t,e,r){return t.isReversed?new be(r,e):new be(e,r)}function aa(t,e){let{document:r}=t,n=r.getText(e),i=n.length-n.trimStart().length,o=n.length-n.trimEnd().length,s=r.offsetAt(e.start)+i,l=r.offsetAt(e.end)-o,p=r.positionAt(s),u=r.positionAt(l);return new W(p,u)}function km(t,e,r,n){return r==null?void 0:new t({editor:e,isReversed:n,contentRange:r})}var Be=class extends He{constructor(r){super(r);this.type="PlainTarget";this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.textualType=r.textualType??"token",this.insertionDelimiter=r.insertionDelimiter??""}getCloneParameters(){return{...this.state,textualType:this.textualType,insertionDelimiter:this.insertionDelimiter}}};function ks(t,e,r){return km(Be,t,e,r)}var Pm=class extends He{constructor(r){super(r);this.type="DocumentTarget";this.textualType="line";this.insertionDelimiter=`
`}getInterior(){return[new Be({editor:this.editor,isReversed:this.isReversed,contentRange:aa(this.editor,this.contentRange)})]}getRemovalRange(){return this.contentRange}getLeadingDelimiterTarget(){}getTrailingDelimiterTarget(){}getCloneParameters(){return this.state}};var ar=class t extends He{constructor(){super(...arguments);this.type="LineTarget";this.textualType="line";this.insertionDelimiter=`
`;this.getRemovalHighlightRange=()=>Hr(this.fullLineContentRange)}get fullLineContentRange(){return po(this.editor,this.contentRange)}getLeadingDelimiterTarget(){return ks(this.editor,J9(this.editor,this.fullLineContentRange),this.isReversed)}getTrailingDelimiterTarget(){return ks(this.editor,e5(this.editor,this.fullLineContentRange),this.isReversed)}getRemovalRange(){let r=this.fullLineContentRange,n=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return n==null?r:r.union(n.contentRange)}maybeCreateRichRangeTarget(r,n){return new t({editor:this.editor,isReversed:r,contentRange:Rs(this,n,!0,!0)})}getCloneParameters(){return this.state}};function J9(t,e){let{start:r}=e;return r.line>0?new W(t.document.lineAt(r.line-1).range.end,e.start):void 0}function e5(t,e){let{end:r}=e;return r.line+1<t.document.lineCount?new W(e.end,new pe(r.line+1,0)):void 0}function BS(t,e,r){return km(ar,t,e,r)}var Am=class t{constructor(e,r){this.target=e;this.insertionMode=r}get editor(){return this.target.editor}get contentRange(){return this.target.contentRange}get contentSelection(){return this.target.contentSelection}get insertionDelimiter(){return this.target.insertionDelimiter}get isRaw(){return this.target.isRaw}withTarget(e){return new t(e,this.insertionMode)}getEditNewActionType(){throw new Error("Method not implemented.")}constructChangeEdit(e){throw new Error("Method not implemented.")}};var Mm=class extends He{constructor(r){super(r);this.type="NotebookCellTarget";this.insertionDelimiter=`
`;this.isNotebookCell=!0;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange}getCloneParameters(){return this.state}toDestination(r){return new Am(this,r)}};var uo=class t extends He{constructor(){super(...arguments);this.type="ParagraphTarget";this.textualType="line";this.insertionDelimiter=`

`}getLeadingDelimiterTarget(){return BS(this.editor,t5(this.editor,this.fullLineContentRange),this.isReversed)}getTrailingDelimiterTarget(){return BS(this.editor,r5(this.editor,this.fullLineContentRange),this.isReversed)}getRemovalRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.contentRange.union(r.contentRange):this.contentRange;return new ar({contentRange:n,editor:this.editor,isReversed:this.isReversed}).getRemovalRange()}get fullLineContentRange(){return po(this.editor,this.contentRange)}getRemovalHighlightRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.fullLineContentRange.union(r.contentRange):this.fullLineContentRange;return Hr(n)}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,contentRange:Rs(this,n,!0,!0)})}getCloneParameters(){return this.state}};function t5(t,e){let{document:r}=t,n=r.lineAt(e.start),i=n5(r,n);if(i!=null)return i.lineNumber+1===n.lineNumber?void 0:new W(new pe(i.lineNumber+1,0),r.lineAt(n.lineNumber-1).range.end);if(n.lineNumber>0)return new W(new pe(0,0),r.lineAt(n.lineNumber-1).range.end)}function r5(t,e){let{document:r}=t,n=r.lineAt(e.end),i=i5(r,n);if(i!=null)return i.lineNumber-1===n.lineNumber?void 0:new W(new pe(n.lineNumber+1,0),r.lineAt(i.lineNumber-1).range.end);if(n.lineNumber<r.lineCount-1)return new W(new pe(n.lineNumber+1,0),r.lineAt(r.lineCount-1).range.end)}function n5(t,e){for(;e.lineNumber>0;){let r=t.lineAt(e.lineNumber-1);if(!r.isEmptyOrWhitespace)return r;e=r}return null}function i5(t,e){for(;e.lineNumber+1<t.lineCount;){let r=t.lineAt(e.lineNumber+1);if(!r.isEmptyOrWhitespace)return r;e=r}return null}var fo=class extends He{constructor(){super(...arguments);this.type="RawSelectionTarget";this.textualType="character";this.insertionDelimiter="";this.isRaw=!0;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.getCloneParameters=()=>this.state}};function El(t){let e=Ii(t.contentRange,t.prefixRange),r=t.getTrailingDelimiterTarget()??t.getLeadingDelimiterTarget();return r!=null?e.union(r.contentRange):e}var o5=['"',"'","(","[","{","<"],a5=['"',"'",")","]","}",">",",",";",":"];function Gn(t){let{editor:e}=t,{start:r}=Ii(t.contentRange,t.prefixRange),o=e.document.lineAt(r).text.slice(0,r.character).match(/\s+$/);return o==null?void 0:new Be({contentRange:new W(r.line,r.character-o[0].length,r.line,r.character),editor:e,isReversed:t.isReversed})}function Kn(t){let{editor:e}=t,{end:r}=t.contentRange,o=e.document.lineAt(r).text.slice(r.character).match(/^\s+/);return o==null?void 0:new Be({contentRange:new W(r.line,r.character,r.line,r.character+o[0].length),editor:e,isReversed:t.isReversed})}function mo(t){let{editor:e}=t,r=Ii(t.contentRange,t.prefixRange),{start:n,end:i}=r,o=t.getLeadingDelimiterTarget()?.contentRange??n.toEmptyRange(),s=t.getTrailingDelimiterTarget()?.contentRange??i.toEmptyRange(),l=po(e,r);return o.union(s).isRangeEqual(l)?l:!s.isEmpty&&(!o.isEmpty||r.start.isEqual(l.start)||o5.includes(s5(e,r)))?r.union(s):!o.isEmpty&&(r.end.isEqual(l.end)||a5.includes(c5(e,r)))?r.union(o):r}function s5(t,e){let{start:r}=e,n=t.document.lineAt(r);return r.isAfter(n.range.start)?t.document.getText(new W(r.translate(void 0,-1),r)):""}function c5(t,e){let{end:r}=e,n=t.document.lineAt(r);return r.isBefore(n.range.end)?t.document.getText(new W(r.translate(void 0,1),r)):""}var Kt=class extends He{constructor(){super(...arguments);this.type="TokenTarget";this.textualType="token";this.insertionDelimiter=" "}getLeadingDelimiterTarget(){return Gn(this)}getTrailingDelimiterTarget(){return Kn(this)}getRemovalRange(){return mo(this)}getCloneParameters(){return this.state}};function WS(t){let{editor:e,isReversed:r}=t,{document:n}=e,i=Ii(t.contentRange,t.prefixRange);return l5(n,i)?p5(n,i)?new uo({editor:e,isReversed:r,contentRange:i}):new ar({editor:e,isReversed:r,contentRange:i}):new Kt({editor:e,isReversed:r,contentRange:i})}function l5(t,e){let r=t.lineAt(e.start).rangeTrimmed?.start,n=t.lineAt(e.end).rangeTrimmed?.end;return r!=null&&n!=null&&r.isEqual(e.start)&&n.isEqual(e.end)}function p5(t,e){let{start:r,end:n}=e;return(r.line===0||t.lineAt(r.line-1).isEmptyOrWhitespace)&&(n.line===t.lineCount-1||t.lineAt(n.line+1).isEmptyOrWhitespace)}var ho=class t extends He{constructor(r){super(r);this.type="ScopeTypeTarget";this.scopeTypeType_=r.scopeTypeType,this.removalRange_=r.removalRange,this.leadingDelimiterRange_=r.leadingDelimiterRange,this.trailingDelimiterRange_=r.trailingDelimiterRange,this.prefixRange=r.prefixRange,this.insertionDelimiter=r.insertionDelimiter??u5(r.scopeTypeType),this.hasDelimiterRange_=!!this.leadingDelimiterRange_||!!this.trailingDelimiterRange_}getLeadingDelimiterTarget(){if(this.leadingDelimiterRange_!=null)return new Be({editor:this.editor,isReversed:this.isReversed,contentRange:this.leadingDelimiterRange_});if(!this.hasDelimiterRange_)return Gn(this)}getTrailingDelimiterTarget(){if(this.trailingDelimiterRange_!=null)return new Be({editor:this.editor,isReversed:this.isReversed,contentRange:this.trailingDelimiterRange_});if(!this.hasDelimiterRange_)return Kn(this)}getRemovalRange(){return this.removalRange_!=null?this.removalRange_:this.hasDelimiterRange_?El(this):WS(this).getRemovalRange()}getRemovalHighlightRange(){return this.removalRange_!=null?pn(this,this.removalRange_):this.hasDelimiterRange_?pn(this,El(this)):WS(this).getRemovalHighlightRange()}maybeCreateRichRangeTarget(r,n){if(this.scopeTypeType_!==n.scopeTypeType_)return null;let i=this.removalRange_!=null||n.removalRange_!=null?(this.removalRange_??this.contentRange).union(n.removalRange_??n.contentRange):void 0;return new t({...this.getCloneParameters(),isReversed:r,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:n.trailingDelimiterRange_,removalRange:i,contentRange:this.contentRange.union(n.contentRange)})}getCloneParameters(){return{...this.state,insertionDelimiter:this.insertionDelimiter,prefixRange:this.prefixRange,removalRange:void 0,interiorRange:void 0,scopeTypeType:this.scopeTypeType_,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:this.trailingDelimiterRange_}}};function u5(t){switch(t){case"class":case"namedFunction":case"section":case"sectionLevelOne":case"sectionLevelTwo":case"sectionLevelThree":case"sectionLevelFour":case"sectionLevelFive":case"sectionLevelSix":case"part":case"chapter":case"subSection":case"subSubSection":case"namedParagraph":case"subParagraph":return`

`;case"anonymousFunction":case"statement":case"ifStatement":case"comment":case"xmlElement":case"collectionItem":case"branch":case"environment":return`
`;default:return" "}}var Dm=class t extends He{constructor(r){super(r);this.type="SubTokenWordTarget";this.textualType="word";this.leadingDelimiterRange_=r.leadingDelimiterRange,this.trailingDelimiterRange_=r.trailingDelimiterRange,this.insertionDelimiter=r.insertionDelimiter}getLeadingDelimiterTarget(){return ks(this.editor,this.leadingDelimiterRange_,this.isReversed)}getTrailingDelimiterTarget(){return ks(this.editor,this.trailingDelimiterRange_,this.isReversed)}getRemovalRange(){return El(this)}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,contentRange:Es(this,n,!0,!0),trailingDelimiterRange:n.trailingDelimiterRange_})}getCloneParameters(){return{...this.state,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:this.trailingDelimiterRange_,insertionDelimiter:this.insertionDelimiter}}};var Ps=class t extends He{constructor(r){super({...r,contentRange:aa(r.editor,r.fullInteriorRange)});this.type="InteriorTarget";this.insertionDelimiter=" ";this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.fullInteriorRange;this.fullInteriorRange=r.fullInteriorRange}getCloneParameters(){return{...this.state,fullInteriorRange:this.fullInteriorRange}}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,fullInteriorRange:this.fullInteriorRange.union(n.fullInteriorRange)})}};var Fm=class extends He{constructor(r){super(r);this.type="SurroundingPairTarget";this.insertionDelimiter=" ";this.boundary_=r.boundary,this.interiorRange_=r.interiorRange}getLeadingDelimiterTarget(){return Gn(this)}getTrailingDelimiterTarget(){return Kn(this)}getRemovalRange(){return mo(this)}getInterior(){return[new Ps({editor:this.editor,isReversed:this.isReversed,fullInteriorRange:this.interiorRange_})]}getBoundary(){return this.boundary_.map(r=>new Kt({editor:this.editor,isReversed:this.isReversed,contentRange:r}))}getCloneParameters(){return{...this.state,interiorRange:this.interiorRange_,boundary:this.boundary_}}};var Mt=class extends He{constructor(r){super(r);this.type="UntypedTarget";this.insertionDelimiter=" ";this.hasExplicitScopeType=!1;this.hasExplicitRange=r.hasExplicitRange,this.textualType=r.textualType??"token"}getLeadingDelimiterTarget(){return Gn(this)}getTrailingDelimiterTarget(){return Kn(this)}getRemovalRange(){return this.editor.document.getText(this.contentRange).trim().length===0?this.contentRange:mo(this)}maybeCreateRichRangeTarget(){return null}getCloneParameters(){return{...this.state,textualType:this.textualType,hasExplicitRange:this.hasExplicitRange}}};var Im=class extends He{constructor(){super(...arguments);this.type="ImplicitTarget";this.textualType="character";this.insertionDelimiter="";this.isRaw=!0;this.hasExplicitScopeType=!1;this.isImplicit=!0;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.getCloneParameters=()=>this.state}};var Cm=class extends He{constructor(r){let{inputTarget:n,modifiedTarget:i,isHead:o}=r;super({...r,contentRange:nM(n.contentRange,i.contentRange,o)});this.type="HeadTailTarget";this.insertionDelimiter=" ";this.inputTarget=n,this.modifiedTarget=i,this.isHead=o}getLeadingDelimiterTarget(){return Gn(this)}getTrailingDelimiterTarget(){return Kn(this)}getRemovalRange(){return mo(this)}getInterior(){let r=this.modifiedTarget.getInterior();if(r!=null)return r.map(n=>new Be({editor:this.editor,contentRange:nM(this.inputTarget.contentRange,n.contentRange,this.isHead),isReversed:this.isReversed}))}getCloneParameters(){return{...this.state,inputTarget:this.inputTarget,modifiedTarget:this.modifiedTarget,isHead:this.isHead}}};function nM(t,e,r){return r?new W(e.start,t.end):new W(t.start,e.end)}var Om=class t extends He{constructor(r){super({...r,contentRange:f5(r.paragraphTarget.contentRange,r.containingInterior.contentRange)});this.type="BoundedParagraphTarget";this.textualType="line";this.insertionDelimiter=`

`;this.containingInterior=r.containingInterior,this.paragraphTarget=r.paragraphTarget,this.startLineGap=this.contentRange.start.line-this.containingInterior.fullInteriorRange.start.line,this.endLineGap=this.containingInterior.fullInteriorRange.end.line-this.contentRange.end.line}getLeadingDelimiterTarget(){return this.startLineGap>1?this.paragraphTarget.getLeadingDelimiterTarget():void 0}getTrailingDelimiterTarget(){return this.endLineGap>1?this.paragraphTarget.getTrailingDelimiterTarget():void 0}getRemovalRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.contentRange.union(r.contentRange):this.contentRange;return this.startLineGap<=0||this.endLineGap<=0?n:new ar({contentRange:n,editor:this.editor,isReversed:this.isReversed}).getRemovalRange()}get fullLineContentRange(){return po(this.editor,this.contentRange)}getRemovalHighlightRange(){let r=(()=>{if(this.startLineGap<1||this.endLineGap<1)return this.getRemovalRange();let n=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return n!=null?this.fullLineContentRange.union(n.contentRange):this.fullLineContentRange})();return Hr(r)}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,containingInterior:this.containingInterior.maybeCreateRichRangeTarget(r,n.containingInterior),paragraphTarget:this.paragraphTarget.maybeCreateRichRangeTarget(r,n.paragraphTarget)})}getCloneParameters(){return{...this.state,paragraphTarget:this.paragraphTarget,containingInterior:this.containingInterior}}};function f5(t,e){let r=t.intersection(e);if(r==null||r.isEmpty)throw new Error("Ranges do not intersect");return r}function Nm(t){return t.activeTextEditor?.selections.map(e=>({selection:e,editor:t.activeTextEditor}))??[]}var As=class{run(){return Nm(k()).map(e=>new Mt({editor:e.editor,isReversed:e.selection.isReversed,contentRange:e.selection,hasExplicitRange:!e.selection.isEmpty,textualType:"character"}))}};var Qn=class{constructor(e,r){this.debouncer=new Ou(r,e.getOwnConfiguration("decorationDebounceDelayMs")),this.run=this.run.bind(this)}run(){this.debouncer.run()}dispose(){this.debouncer.dispose()}};var Lm=class{constructor(e,r){this.ide=e;this.storedTargets=r;this.disposables=[];this.debouncer=new Qn(e.configuration,()=>this.updateKeyboardTarget()),this.disposables.push(e.configuration.onDidChangeConfiguration(()=>this.maybeActivate()),this.debouncer),this.maybeActivate()}maybeActivate(){if(this.ide.configuration.getOwnConfiguration("experimental.keyboardTargetFollowsSelection")){this.selectionWatcherDisposable==null&&(this.selectionWatcherDisposable=this.ide.onDidChangeTextEditorSelection(this.debouncer.run));return}this.selectionWatcherDisposable!=null&&(this.selectionWatcherDisposable.dispose(),this.selectionWatcherDisposable=void 0)}updateKeyboardTarget(){this.ide.activeTextEditor==null||this.storedTargets.get("keyboard")==null||this.storedTargets.set("keyboard",new As().run())}dispose(){this.disposables.forEach(e=>e.dispose()),this.selectionWatcherDisposable?.dispose()}};var Um=class{constructor(e){this.ide=e;switch(e.disposeOnExit(this),this.evaluateSetting=this.evaluateSetting.bind(this),this.active=!0,e.runMode){case"development":this.enableDebugLog();break;case"test":this.disableDebugLog();break;case"production":this.evaluateSetting(),this.disposableConfiguration=e.configuration.onDidChangeConfiguration(this.evaluateSetting);break}}log(...e){this.active&&console.log(...e)}dispose(){this.disposableConfiguration&&this.disposableConfiguration.dispose()}enableDebugLog(){this.active=!0}disableDebugLog(){this.active=!1}evaluateSetting(){this.ide.configuration.getOwnConfiguration("debug")?this.enableDebugLog():this.disableDebugLog()}};var m5=["!","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_","`","{","|","}","~","\xA3",'"'],d5=m5.map(Ur).join("|"),h5=["[a-zA-Z0-9]",d5].join("|"),g5=new RegExp(`^(${h5})$`,"u"),y5="[unk]",x5=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}]/gu,Hm=class{constructor(){this.disposables=[];this.algorithmChangeNotifier=new qt;this.getTokenGraphemes=e=>an(e,x5,r=>({text:this.normalizeGrapheme(r[0]),tokenStartOffset:r.index,tokenEndOffset:r.index+r[0].length}));this.registerAlgorithmChangeListener=this.algorithmChangeNotifier.registerListener;k().disposeOnExit(this),this.updateTokenHatSplittingMode=this.updateTokenHatSplittingMode.bind(this),this.getTokenGraphemes=this.getTokenGraphemes.bind(this),this.updateTokenHatSplittingMode(),this.disposables.push(k().configuration.onDidChangeConfiguration(this.updateTokenHatSplittingMode))}updateTokenHatSplittingMode(){let{lettersToPreserve:e,symbolsToPreserve:r,...n}=k().configuration.getOwnConfiguration("tokenHatSplittingMode");this.tokenHatSplittingMode={lettersToPreserve:e.map(i=>i.toLowerCase().normalize("NFC")),symbolsToPreserve:r.map(i=>i.normalize("NFC")),...n},this.algorithmChangeNotifier.notifyListeners()}normalizeGrapheme(e){let{preserveCase:r,lettersToPreserve:n,symbolsToPreserve:i}=this.tokenHatSplittingMode,o=e.normalize("NFC");return i.includes(o)||(r||(o=o.toLowerCase()),n.includes(o.toLowerCase()))||(o=wT(o),g5.test(o)||(o=y5)),o}dispose(){this.disposables.forEach(({dispose:e})=>e())}};function sa(){return $S==null&&($S=new Hm),$S}var $S;var iM=({penalty:t})=>-t;function oM(t){return({grapheme:{text:e},style:r})=>{let n=t.get({grapheme:e,hatStyle:r});return n==null?1/0:-n}}function aM(t,e){let r=Kc(n=>MT(e[n].filter(i=>i>t))??1/0);return({grapheme:{text:n}})=>r(n)}function jS(t){return e=>e.grapheme.text===t?.grapheme&&e.style===t?.hatStyle?1:0}function sM(t){switch(t){case"greedy":return({penalty:e})=>-e;case"balanced":return({penalty:e})=>-(e<2?0:1);case"stable":return e=>0}}function cM(t,e){if(t.length===0)return;let r=t;for(let n of e){if(r.length===1)return r[0];r=T5(r,n)}return r[0]}function T5(t,e){let r=-1/0,n=[];for(let i of t){let o=e(i);o<r||(o>r&&(r=o,n.length=0),n.push(i))}return n}function lM({hatOldTokenRanks:t,graphemeTokenRanks:e},r,n,i,o,s){return cM(s,[jS(i),sM(r),jS(o),oM(t),iM,aM(n,e)])}function pM(t,e,r){let n={},i=new co(({grapheme:o,hatStyle:s})=>[o,s]);return t.forEach(({token:o,rank:s})=>{let l=e.get(o);l!=null&&i.set(l,s),r.getTokenGraphemes(o.text).forEach(({text:p})=>{let u;p in n?u=n[p]:(u=[],n[p]=u),u.push(s)})}),{hatOldTokenRanks:i,graphemeTokenRanks:n}}function uM(t,e=[]){return new Map(PT(Je,Qo)(Qc([e],t.visibleRanges.map(r=>DT(r.start.line,r.end.line+1)))).sort((r,n)=>r-n).map((r,n)=>[r,n]))}function fM(t,e){return(r,n)=>{let i=Math.abs(r.displayLine-t),o=Math.abs(n.displayLine-t);if(i<o)return-1;if(i>o)return 1;let s=Math.abs(r.range.start.character-e),l=Math.abs(n.range.start.character-e);return s-l}}var S5=["-","+","*","/","=","<",">","_","#",".","|","&",":"],v5=["!==","!=","+=","-=","*=","/=","%=","<=",">=","=>","->","??",'"""',"```","/*","*/","<!--","-->"],b5=["\\p{L}","\\p{M}","\\p{N}"],w5="[^\\s\\w]",_5="(?<![.\\d])\\d+\\.\\d+(?![.\\d])";function E5(t){let{fixedTokens:e,repeatableSymbols:r,identifierWordRegexes:n,identifierWordDelimiters:i,numbersRegex:o,singleSymbolsRegex:s}=t,l=r.map(Ur).map(x=>`${x}+`).join("|"),p=e.map(Ur).join("|"),m=`(${n.concat(i.map(Ur)).join("|")})+`,d=`(${n.join("|")})+`,g=[p,o,m,l,s].join("|");return{identifierMatcher:new RegExp(m,"gu"),wordMatcher:new RegExp(d,"gu"),tokenMatcher:new RegExp(g,"gu")}}var qS=new Map;function Er(t){let e=k().configuration.getOwnConfiguration("wordSeparators",{languageId:t}),r=e.join("\0");if(!qS.has(r)){let n={fixedTokens:v5,repeatableSymbols:S5,identifierWordRegexes:b5,identifierWordDelimiters:e,numbersRegex:_5,singleSymbolsRegex:w5};qS.set(r,E5(n))}return qS.get(r)}function mM(t,e,r){return an(t,Er(e).tokenMatcher,r)}function dM(t,e){let r=t.document.languageId,n=t.document.getText(e),i=t.document.offsetAt(e.start);return mM(n,r,o=>{let s=i+o.index,l=i+o.index+o[0].length,p=new W(t.document.positionAt(s),t.document.positionAt(l));return{editor:t,text:o[0],range:p,offsets:{start:s,end:l}}})}function hM(t,e,r){let i=k5(t,e).flatMap(o=>{let s=o.selections[0].active,l=uM(o,[s.line]),p=Je(o.visibleRanges.map(u=>dM(o,u).map(m=>({...m,displayLine:l.get(m.range.start.line)}))));return p.sort(fM(l.get(s.line),s.character)),p});return R5(r,i).map((o,s)=>({token:o,rank:-s}))}function R5(t,e){return t==null?e:e.sort((r,n)=>{let i=t.has(r),o=t.has(n);return i&&!o?-1:!i&&o?1:0})}function k5(t,e){let r;return t==null?r=e:r=[t,...e.filter(n=>n!==t)],r}function zS({tokenGraphemeSplitter:t,enabledHatStyles:e,forceTokenHats:r,oldTokenHats:n,hatStability:i,activeTextEditor:o,visibleTextEditors:s}){let l=r==null?void 0:gM(r),p=gM(n),u=hM(o,s,l),m=pM(u,p,t),d=Object.keys(e),g=new bs(()=>[...d]);return u.map(({token:x,rank:b})=>{let v=P5(t,x,g,e),I=lM(m,i,b,l?.get(x),p.get(x),v);if(I!=null)return g.set(I.grapheme.text,g.get(I.grapheme.text).filter(F=>F!==I.style)),A5(x,I)}).filter(x=>x!=null)}function gM(t){let e=new co(({editor:r,offsets:n})=>[r.id,n.start,n.end]);return t.forEach(r=>e.set(r.token,r)),e}function P5(t,e,r,n){let i=[],o=t.getTokenGraphemes(e.text);for(let s of o)for(let l of r.get(s.text))i.push({grapheme:s,style:l,penalty:n[l].penalty});return i}function A5(t,e){return{hatStyle:e.style,grapheme:e.grapheme.text,token:t,hatRange:new W(t.range.start.translate(void 0,e.grapheme.tokenStartOffset),t.range.start.translate(void 0,e.grapheme.tokenEndOffset))}}var Vm=class{constructor(e,r){this.hats=e;this.context=r;this.disposables=[];k().disposeOnExit(this);let n=new Qn(k().configuration,()=>this.allocateHats());this.disposables.push(this.hats.onDidChangeEnabledHatStyles(n.run),this.hats.onDidChangeIsEnabled(n.run),k().onDidOpenTextDocument(n.run),k().onDidCloseTextDocument(n.run),k().onDidChangeActiveTextEditor(n.run),k().onDidChangeVisibleTextEditors(n.run),k().onDidChangeTextDocument(n.run),k().onDidChangeTextEditorSelection(n.run),k().onDidChangeTextEditorVisibleRanges(n.run),sa().registerAlgorithmChangeListener(n.run),n)}async allocateHats(e){let r=await this.context.getActiveMap();e=e?.map(i=>({...i,grapheme:sa().normalizeGrapheme(i.grapheme)}));let n=this.hats.isEnabled?zS({tokenGraphemeSplitter:sa(),enabledHatStyles:this.hats.enabledHatStyles,forceTokenHats:e,oldTokenHats:r.tokenHats,hatStability:k().configuration.getOwnConfiguration("experimental.hatStability"),activeTextEditor:k().activeTextEditor,visibleTextEditors:k().visibleTextEditors}):[];r.setTokenHats(n),await this.hats.setHatRanges(n.map(({hatStyle:i,hatRange:o,token:{editor:s}})=>({editor:s,range:o,styleName:i})))}dispose(){this.disposables.forEach(({dispose:e})=>e())}};var Bm=class t{constructor(e){this.rangeUpdater=e;this.isExpired=!1;this.documentTokenLists=new Map;this.deregisterFunctions=[];this.map={};this._tokenHats=[]}get tokenHats(){return this._tokenHats}getDocumentTokenList(e){let r=e.uri.toString(),n=this.documentTokenLists.get(r);return n==null&&(n=[],this.documentTokenLists.set(r,n),this.deregisterFunctions.push(this.rangeUpdater.registerRangeInfoList(e,n))),n}clone(){let e=new t(this.rangeUpdater);return e.setTokenHats(this._tokenHats),e}setTokenHats(e){this.map={},this.documentTokenLists=new Map,this.deregisterFunctions.forEach(n=>n());let r=e.map(n=>{let{hatStyle:i,grapheme:o,token:s}=n,l=this.makeTokenLive(s);return this.map[hl(i,o)]=l,{...n,token:l}});this._tokenHats=r}makeTokenLive(e){let{tokenMatcher:r}=Er(e.editor.document.languageId),n={...e,expansionBehavior:{start:{type:"regex",regex:r},end:{type:"regex",regex:r}}};return this.getDocumentTokenList(e.editor.document).push(n),n}getEntries(){return this.checkExpired(),Object.entries(this.map)}getToken(e,r){return this.checkExpired(),this.map[hl(e,sa().normalizeGrapheme(r))]}checkExpired(){if(this.isExpired)throw Error("Map snapshot has expired")}dispose(){this.isExpired=!0,this.deregisterFunctions.forEach(e=>e())}};var M5=6e4,Wm=class{constructor(e,r,n,i){this.debug=r;this.commandServerApi=i;this.prePhraseMapsSnapshotTimestamp=null;this.lastSignalVersion=null;k().disposeOnExit(this),this.activeMap=new Bm(e),this.getActiveMap=this.getActiveMap.bind(this),this.allocateHats=this.allocateHats.bind(this),this.hatAllocator=new Vm(n,{getActiveMap:this.getActiveMap})}allocateHats(e){return this.hatAllocator.allocateHats(e)}async getActiveMap(){return await this.maybeTakePrePhraseSnapshot(),this.activeMap}async getReadableMap(e){return await this.maybeTakePrePhraseSnapshot(),e?this.lastSignalVersion==null?(console.error("Pre phrase snapshot requested but no signal was present; please upgrade command client"),this.activeMap):this.prePhraseMapSnapshot==null?(console.error("Navigation map pre-phrase snapshot requested, but no snapshot has been taken"),this.activeMap):performance.now()-this.prePhraseMapsSnapshotTimestamp>M5?(console.error("Navigation map pre-phrase snapshot requested, but snapshot is more than a minute old"),this.activeMap):this.prePhraseMapSnapshot:this.activeMap}dispose(){this.activeMap.dispose(),this.prePhraseMapSnapshot!=null&&this.prePhraseMapSnapshot.dispose()}async maybeTakePrePhraseSnapshot(){let e=await this.commandServerApi.signals.prePhrase.getVersion();e!==this.lastSignalVersion&&(this.debug.log("taking snapshot"),this.lastSignalVersion=e,e!=null&&this.takePrePhraseSnapshot())}takePrePhraseSnapshot(){this.prePhraseMapSnapshot!=null&&this.prePhraseMapSnapshot.dispose(),this.prePhraseMapSnapshot=this.activeMap.clone(),this.prePhraseMapsSnapshotTimestamp=performance.now()}};function GS(t,e,r){let n=t.get(e);return n==null&&(n=r(),t.set(e,n)),n}var YS=yr(kl(),1);function XS(t,e){let{originalOffsets:{start:r,end:n},finalOffsets:{end:i},displacement:o}=t,{offsets:{start:s,end:l}}=e;return(0,YS.invariant)(n>r,()=>"Change range expected to be nonempty"),(0,YS.invariant)(n>=s&&r<=l,()=>"Change range expected to intersect with selection range"),{start:n<=s?s+o:Math.min(s,i),end:n<=l?l+o:Math.min(l,i)}}var bM=yr(kl(),1);function JS(t,e){let{event:{text:r,isReplace:n},finalOffsets:{start:i,end:o}}=t;if((0,bM.invariant)(i===t.originalOffsets.end&&i===e.offsets.start&&i===e.offsets.end,()=>"Selection range and change range expected to be same empty range"),n){let s=e.expansionBehavior.end;switch(s.type){case"closed":return{start:i,end:i};case"open":return{start:i,end:o};case"regex":{let l=r.match(_f(s.regex));return l==null?{start:i,end:i}:{start:i,end:i+l[0].length}}}}else{let s=e.expansionBehavior.start;switch(s.type){case"closed":return{start:o,end:o};case"open":return{start:i,end:o};case"regex":{let l=r.search(wf(s.regex));return l===-1?{start:o,end:o}:{start:i+l,end:o}}}}}var ev=yr(kl(),1);function tv(t,e){let{event:{text:r},originalOffsets:{start:n},displacement:i}=t,{offsets:{start:o,end:s},text:l}=e;if((0,ev.invariant)(s>o,()=>"Selection range expected to be nonempty"),(0,ev.invariant)(n>=o&&n<=s,()=>"Insertion offset expected to intersect with selection range"),n>o&&n<s)return{start:o,end:s+i};if(n===o){let p=e.expansionBehavior.start,u=s+i;switch(p.type){case"closed":return{start:o+i,end:u};case"open":return{start:o,end:u};case"regex":{let m=r+l,d=wf(p.regex),g=m.search(d);for(;g>r.length;)m=m.slice(0,g),g=m.search(d);return g===-1?{start:o,end:u}:{start:o+g,end:u}}}}else{let p=e.expansionBehavior.end,u=o;switch(p.type){case"closed":return{start:u,end:s};case"open":return{start:u,end:s+i};case"regex":{let m=l+r,d=_f(p.regex),g=m.match(d),x=g==null?0:g[0].length;for(;x!==0&&x<l.length;)m=l.slice(x)+r,g=m.match(d),x=g==null?0:x+g[0].length;return x===0?{start:u,end:s}:{start:u,end:o+x}}}}}function wM(t,e,r){let{start:n,end:i}=t.originalOffsets,{start:o,end:s}=e.offsets,l=Math.min(n,o),p="";return o<n&&(p+=e.text.substring(0,n-o)),p+=t.event.text,i<s&&(p+=e.text.substring(s-i,e.text.length)),p.substring(r.start-l,r.end-l)}function _M(t,e){let{document:r,contentChanges:n}=t,i=n.map(o=>{let s=o.text.length-o.rangeLength,l=o.rangeOffset,p=l+o.rangeLength,u=l,m=p+s;return{displacement:s,event:o,originalOffsets:{start:l,end:p},finalOffsets:{start:u,end:m}}});for(let o of e){let s=o.offsets,l=i.map(u=>{let m;return u.originalOffsets.start>s.end?{start:0,end:0}:u.originalOffsets.end<s.start?{start:u.displacement,end:u.displacement}:(u.event.rangeLength===0?o.range.isEmpty?m=JS(u,o):m=tv(u,o):m=XS(u,o),o.text=wM(u,o,m),{start:m.start-s.start,end:m.end-s.end})}),p={start:s.start+yf(l,({start:u})=>u),end:s.end+yf(l,({end:u})=>u)};o.range=o.range.with(r.positionAt(p.start),r.positionAt(p.end)),o.offsets=p}}var jm=class{constructor(){this.rangeInfoLists=new Map;this.replaceEditLists=new Map;this.listenForDocumentChanges()}getDocumentRangeInfoLists(e){return GS(this.rangeInfoLists,e.uri.toString(),()=>[])}getDocumentReplaceEditLists(e){return GS(this.replaceEditLists,e.uri.toString(),()=>[])}registerRangeInfoList(e,r){let n=this.getDocumentRangeInfoLists(e);return n.push(r),()=>nr(n,r)}registerReplaceEditList(e,r){let n=this.getDocumentReplaceEditLists(e);return n.push(r),()=>nr(n,r)}*documentRangeInfoGenerator(e){let r=this.getDocumentRangeInfoLists(e);for(let n of r)for(let i of n)yield i}listenForDocumentChanges(){this.disposable=k().onDidChangeTextDocument(e=>{let r=this.getDocumentReplaceEditLists(e.document),n={...e,contentChanges:e.contentChanges.map(i=>H5(r,i)?{...i,isReplace:!0}:i)};_M(n,this.documentRangeInfoGenerator(e.document))})}dispose(){this.disposable.dispose()}};function H5(t,e){for(let r of t)for(let n of r)if(n.range.isRangeEqual(e.range)&&n.text===e.text)return!0;return!1}var qm=class{constructor(){this.signals={prePhrase:{getVersion(){return Promise.resolve(null)}}}}getFocusedElementType(){return Promise.resolve(void 0)}};var zm=class{async allocateHats(){}async getReadableMap(){return{getEntries(){return[]},getToken(){throw new Error("Hat map is disabled")}}}dispose(){}};var Gm=class{onDidChangeDefinition(e){return{dispose:()=>{}}}loadLanguage(e){return Promise.resolve()}get(e){}getNodeAtLocation(e,r){}dispose(){}};var Km=class{getSnippetStrict(e){throw new Error("Snippets are not implemented.")}openNewSnippetFile(e,r){throw new Error("Snippets are not implemented.")}};var Qm=class{getSpokenFormEntries(){throw new vs}onDidChange(){return{dispose:()=>{}}}};var Zm=class{getTree(e){throw new Error("Tree sitter not provided")}loadLanguage(e){return Promise.resolve(!1)}getLanguage(e){throw new Error("Tree sitter not provided")}getNodeAtLocation(e,r){throw new Error("Tree sitter not provided")}};var nt=class extends Error{constructor(r,n=!1,i=!1){super(`No spoken form for: ${r}`);this.reason=r;this.requiresTalonUpdate=n;this.isPrivate=i}};var EM={curlyBrackets:["{","}"],angleBrackets:["<",">"],escapedDoubleQuotes:['\\"','\\"'],escapedSingleQuotes:["\\'","\\'"],escapedParentheses:["\\(","\\)"],escapedSquareBrackets:["\\[","\\]"],doubleQuotes:['"','"'],parentheses:["(",")"],backtickQuotes:["`","`"],squareBrackets:["[","]"],singleQuotes:["'","'"],tripleBacktickQuotes:["```","```"],tripleDoubleQuotes:['"""','"""'],tripleSingleQuotes:["'''","'''"],whitespace:[" "," "],any:null,string:null,collectionBoundary:null};var RM=new co(t=>t);for(let[t,e]of Object.entries(EM))e!=null&&RM.set(e,t);function kM(t,e,r){let n=RM.get([e,r]);if(n==null)throw Error(`Unknown surrounding pair delimiters '${e} ${r}'`);return t.pairedDelimiter[n]}function PM(t){throw new nt(`${t.type} insertion snippet`)}function AM(t){throw new nt(`${t.type} wrap with snippet`)}function Pl(t,e,r){let n=r==="vertical"?`${ht.verticalRange} `:"";if(t&&e)return n+ht.rangeExclusive;if(t)throw new nt("Range exclude anchor");return e?n+ht.rangeExcludingEnd:r==="vertical"?ht.verticalRange:ht.rangeInclusive}function MM(t){return Object.fromEntries(Object.entries(t).map(([e,r])=>[e,Object.fromEntries(Object.entries(r).map(([n,i])=>[n,{type:"customizable",spokenForms:i,spokenFormType:e,id:n}]))]))}var V5=["zero","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen","twenty","twenty one","twenty two","twenty three","twenty four","twenty five","twenty six","twenty seven","twenty eight","twenty nine","thirty","thirty one","thirty two","thirty three","thirty four","thirty five","thirty six","thirty seven","thirty eight","thirty nine","forty","forty one","forty two","forty three","forty four","forty five","forty six","forty seven","forty eight","forty nine","fifty","fifty one","fifty two","fifty three","fifty four","fifty five","fifty six","fifty seven","fifty eight","fifty nine","sixty","sixty one","sixty two","sixty three","sixty four","sixty five","sixty six","sixty seven","sixty eight","sixty nine","seventy","seventy one","seventy two","seventy three","seventy four","seventy five","seventy six","seventy seven","seventy eight","seventy nine","eighty","eighty one","eighty two","eighty three","eighty four","eighty five","eighty six","eighty seven","eighty eight","eighty nine","ninety","ninety one","ninety two","ninety three","ninety four","ninety five","ninety six","ninety seven","ninety eight","ninety nine"],B5=["zeroth","first","second","third","fourth","fifth","sixth","seventh","eighth","ninth","tenth","eleventh","twelfth","thirteenth","fourteenth","fifteenth","sixteenth","seventeenth","eighteenth","nineteenth","twentieth"];function Ms(t){let e=V5[t];if(e==null)throw Error(`Unknown number '${t}'`);return e}function Al(t){let e=B5[t];if(e==null)throw Error(`Unknown ordinal '${t}'`);return e}var Ym=class{constructor(e){this.spokenFormMap=e;this.handleModifier=this.handleModifier.bind(this)}handlePrimitiveTarget(e){let r=[];return e.modifiers!=null&&r.push(e.modifiers.map(this.handleModifier)),e.mark!=null&&r.push(this.handleMark(e.mark)),r}handleModifier(e){switch(e.type){case"cascading":case"modifyIfUntyped":case"preferredScope":throw new nt(`Modifier '${e.type}'`);case"containingScope":return e.ancestorIndex==null||e.ancestorIndex===0?this.handleScopeType(e.scopeType):[new Array(e.ancestorIndex).fill(this.spokenFormMap.modifierExtra.ancestor),this.handleScopeType(e.scopeType)];case"everyScope":return[this.spokenFormMap.simpleModifier.everyScope,this.handleScopeType(e.scopeType)];case"extendThroughStartOf":case"extendThroughEndOf":{let r=this.spokenFormMap.simpleModifier[e.type];return e.modifiers!=null?[r,e.modifiers.map(this.handleModifier)]:[r]}case"relativeScope":return e.offset===0?this.handleRelativeScopeInclusive(e):this.handleRelativeScopeExclusive(e);case"ordinalScope":{let r=this.handleScopeType(e.scopeType),n=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.length===1)return e.start===-1?[n,this.spokenFormMap.modifierExtra.last,r]:e.start===0?[n,this.spokenFormMap.modifierExtra.first,r]:e.start<0?[n,Al(Math.abs(e.start)),this.spokenFormMap.modifierExtra.last,r]:[n,Al(e.start+1),r];let i=Ms(e.length);if(e.start===0)return[n,this.spokenFormMap.modifierExtra.first,i,Ml(r)];if(e.start===-e.length)return[n,this.spokenFormMap.modifierExtra.last,i,Ml(r)];throw new nt(`'${e.type}' with count > 1 and offset away from start / end`)}case"range":{if(e.anchor.type==="ordinalScope"&&e.active.type==="ordinalScope"&&e.anchor.length===1&&e.active.length===1&&e.anchor.scopeType.type===e.active.scopeType.type){let r=e.anchor.start===-1?this.spokenFormMap.modifierExtra.last:Al(e.anchor.start+1),n=this.handleModifier(e.active),i=Pl(e.excludeAnchor,e.excludeActive);return[r,i,n]}throw Error(`Modifier '${e.type}' is not fully implemented`)}default:return[this.spokenFormMap.simpleModifier[e.type]]}}handleRelativeScopeInclusive(e){let r=this.handleScopeType(e.scopeType),n=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.length===1){let s=e.direction==="forward"?ht.forward:ht.backward;return[n,r,s]}let i=Ms(e.length),o=Ml(r);return e.direction==="forward"?[n,i,o]:[n,i,o,ht.backward]}handleRelativeScopeExclusive(e){let r=this.handleScopeType(e.scopeType),n=e.direction==="forward"?ht.next:ht.previous,i=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.offset===1){let o=Ms(e.length);if(e.length===1)return[i,n,r];let s=Ml(r);return[i,n,o,s]}if(e.length===1){let o=Al(e.offset);return[i,o,n,r]}throw new nt(`${e.type} modifier with offset > 1 and length > 1`)}handleScopeType(e){switch(e.type){case"oneOf":case"surroundingPairInterior":throw new nt(`Scope type '${e.type}'`);case"glyph":return[this.spokenFormMap.complexScopeTypeType.glyph,FM(this.spokenFormMap.grapheme,"grapheme",e.character)];case"surroundingPair":{let r=this.spokenFormMap.pairedDelimiter[e.delimiter];return e.forceDirection!=null?[this.spokenFormMap.surroundingPairForceDirection[e.forceDirection],r]:r}case"customRegex":return this.spokenFormMap.customRegex[e.regex]??{type:"customizable",spokenForms:{spokenForms:[],isCustom:!0,defaultSpokenForms:[],requiresTalonUpdate:!1,isPrivate:!1},spokenFormType:"customRegex",id:e.regex};case"interior":return this.spokenFormMap.simpleModifier.interiorOnly;default:return this.spokenFormMap.simpleScopeTypeType[e.type]}}handleMark(e){switch(e.type){case"decoratedSymbol":{let[r,n]=e.symbolColor.split("-"),i=[];return r!=="default"&&i.push(wA(r)),n!=null&&i.push(_A(n)),i.push(FM(this.spokenFormMap.grapheme,"grapheme",e.character)),i}case"lineNumber":return this.handleLineNumberMark(e);case"range":{if(e.anchor.type==="lineNumber"&&e.active.type==="lineNumber"){let[r,n]=this.handleLineNumberMark(e.anchor),[i,o]=this.handleLineNumberMark(e.active);if(r===i){let s=Pl(e.excludeAnchor,e.excludeActive);return[r,n,s,o]}}throw Error(`Mark '${e.type}' is not fully implemented`)}case"explicit":case"keyboard":case"target":throw new nt(`Mark '${e.type}'`);default:return[um[e.type]]}}handleLineNumberMark(e){switch(e.lineNumberType){case"absolute":throw new nt("Absolute line numbers");case"modulo100":return[fm.modulo100,Ms(e.lineNumber+1)];case"relative":return[e.lineNumber<0?fm.relativeUp:fm.relativeDown,Ms(Math.abs(e.lineNumber))]}}};function Ml(t){if(typeof t=="string")return DM(t);if(Array.isArray(t)){if(t.length===0)return t;let e=t[t.length-1];return[...t.slice(0,-1),Ml(e)]}return{...t,spokenForms:{...t.spokenForms,spokenForms:t.spokenForms.spokenForms.map(DM)}}}function DM(t){return`${t}s`}function FM(t,e,r){let n=t[r];if(n==null)throw new nt(`${e} '${r}'`);return n}var Ds=class{constructor(e){this.spokenFormMap=MM(e),this.primitiveGenerator=new Ym(this.spokenFormMap)}getSpokenFormForSingleTerm(e,r){return this.componentsToSpokenForm(()=>{let n=this.spokenFormMap[e][r];if(n==null)throw new nt(`${e} with id ${r}`);return n})}processCommand(e){return this.componentsToSpokenForm(()=>this.handleAction(e.action))}processScopeType(e){return this.componentsToSpokenForm(()=>[this.primitiveGenerator.handleScopeType(e)])}componentsToSpokenForm(e){try{return{type:"success",spokenForms:IM(e())}}catch(r){if(r instanceof nt)return{type:"error",reason:r.reason,requiresTalonUpdate:r.requiresTalonUpdate,isPrivate:r.isPrivate};throw r}}handleAction(e){switch(e.name){case"editNew":case"getText":case"replace":case"executeCommand":case"parsed":case"private.getTargets":case"private.setKeyboardTarget":throw new nt(`Action '${e.name}'`);case"replaceWithTarget":case"moveToTarget":return[this.spokenFormMap.action[e.name],this.handleTarget(e.source),this.handleDestination(e.destination)];case"swapTargets":return[this.spokenFormMap.action[e.name],this.handleTarget(e.target1),ht.swapConnective,this.handleTarget(e.target2)];case"callAsFunction":return e.argument.type==="implicit"?[this.spokenFormMap.action[e.name],this.handleTarget(e.callee)]:[this.spokenFormMap.action[e.name],this.handleTarget(e.callee),"on",this.handleTarget(e.argument)];case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return[kM(this.spokenFormMap,e.left,e.right),this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"pasteFromClipboard":return[this.spokenFormMap.action[e.name],this.handleDestination(e.destination)];case"insertSnippet":return[this.spokenFormMap.action[e.name],PM(e.snippetDescription),this.handleDestination(e.destination)];case"generateSnippet":if(e.snippetName!=null)throw new nt(`${e.name}.snippetName`);return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"wrapWithSnippet":return[AM(e.snippetDescription),this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"highlight":{if(e.highlightId!=null)throw new nt(`${e.name}.highlightId`);return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)]}default:return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)]}}handleTarget(e){switch(e.type){case"list":if(e.elements.length<2)throw new nt("List target with < 2 elements");return e.elements.map((r,n)=>n===0?this.handleTarget(r):[ht.listConnective,this.handleTarget(r)]);case"range":{let r=this.handleTarget(e.anchor),n=this.handleTarget(e.active),i=Pl(e.excludeAnchor,e.excludeActive,e.rangeType);return[r,i,n]}case"primitive":return this.primitiveGenerator.handlePrimitiveTarget(e);case"implicit":return[]}}handleDestination(e){switch(e.type){case"list":if(e.destinations.length<2)throw new nt("List destination with < 2 elements");return e.destinations.map((r,n)=>n===0?this.handleDestination(r):[ht.listConnective,this.handleDestination(r)]);case"primitive":return[this.handleInsertionMode(e.insertionMode),this.handleTarget(e.target)];case"implicit":return[]}}handleInsertionMode(e){switch(e){case"to":return ht.sourceDestinationConnective;case"before":return ht.before;case"after":return ht.after}}};function IM(t){if(typeof t=="string")return[t];if(Array.isArray(t))return t.length===0?[""]:CM(t.map(IM)).map(e=>e.filter(r=>r.length!==0).join(" "));if(t.spokenForms.spokenForms.length===0){let e=`${fl(t.spokenFormType)} with id ${t.id}`,r;throw t.spokenForms.isPrivate?r="this is a private spoken form currently only for internal experimentation":t.spokenForms.requiresTalonUpdate?r="please update talon to the latest version (see https://www.cursorless.org/docs/user/updating/)":r="please see https://www.cursorless.org/docs/user/customization/ for more information",new nt(`${e}; ${r}`,t.spokenForms.requiresTalonUpdate,t.spokenForms.isPrivate)}return t.spokenForms.spokenForms}function CM(t){if(t.length===0)return[];if(t.length===1)return t[0].map(i=>[i]);let[e,...r]=t,n=CM(r);return e.flatMap(i=>n.map(o=>[i,...o]))}var Xm=class{constructor(e){this.talonSpokenForms=e;this.notifier=new qt;this.spokenFormMap_={...Ai};this.onDidChangeCustomSpokenForms=this.notifier.registerListener;this.disposable=e.onDidChange(()=>this.updateSpokenFormMaps().catch(()=>{})),this.customSpokenFormsInitialized=this.updateSpokenFormMaps(),this.customSpokenFormsInitialized.catch(()=>{})}get spokenFormMap(){return this.spokenFormMap_}get needsInitialTalonUpdate(){return this.needsInitialTalonUpdate_}async updateSpokenFormMaps(){let e;try{if(e=await this.talonSpokenForms.getSpokenFormEntries(),e.length===0)throw new Error("Custom spoken forms list empty")}catch(r){if(r instanceof ul)this.needsInitialTalonUpdate_=!0;else if(!(r instanceof vs)){console.error("Error loading custom spoken forms",r);let n=r.message.replace(/\.$/,"");at(k().messages,"CustomSpokenForms.updateSpokenFormMaps",`Error loading custom spoken forms: ${n}. Falling back to default spoken forms.`)}throw this.spokenFormMap_={...Ai},this.notifier.notifyListeners(),r}for(let r of NP)W5(this.spokenFormMap_,r,RS[r],Object.fromEntries(e.filter(n=>n.type===r).map(({id:n,spokenForms:i})=>[n,i])));this.notifier.notifyListeners()}getCustomRegexScopeTypes(){return Object.keys(this.spokenFormMap_.customRegex).map(e=>({type:"customRegex",regex:e}))}dispose(){this.disposable.dispose()}};function W5(t,e,r,n){let i=Array.from(new Set([...Object.keys(r),...Object.keys(n)])),o={};for(let s of i){let{defaultSpokenForms:l=[],isPrivate:p=!1}=r[s]??{},u=n[s];o[s]=u==null?{defaultSpokenForms:l,spokenForms:[],requiresTalonUpdate:!p,isCustom:!1,isPrivate:p}:{defaultSpokenForms:l,spokenForms:u,requiresTalonUpdate:!1,isCustom:!Ei(l,u),isPrivate:p}}t[e]=o}var Jm=class{constructor(e){this.customSpokenForms=new Xm(e),this.customSpokenFormsInitialized=this.customSpokenForms.customSpokenFormsInitialized,this.spokenFormGenerator=new Ds(this.customSpokenForms.spokenFormMap),this.disposable=this.customSpokenForms.onDidChangeCustomSpokenForms(()=>{this.spokenFormGenerator=new Ds(this.customSpokenForms.spokenFormMap)})}onDidChangeCustomSpokenForms(e){return this.customSpokenForms.onDidChangeCustomSpokenForms(e)}commandToSpokenForm(e){return this.spokenFormGenerator.processCommand(e)}scopeTypeToSpokenForm(e){return this.spokenFormGenerator.processScopeType(e)}actionIdToSpokenForm(e){return this.spokenFormGenerator.getSpokenFormForSingleTerm("action",e)}graphemeToSpokenForm(e){return this.spokenFormGenerator.getSpokenFormForSingleTerm("grapheme",e)}getCustomRegexScopeTypes(){return this.customSpokenForms.getCustomRegexScopeTypes()}get needsInitialTalonUpdate(){return this.customSpokenForms.needsInitialTalonUpdate}dispose(){this.disposable.dispose()}};function*$5(t){for(let e of t)for(let r of e)yield r}function*Dl(t,e){let r=td(e),n=t;for(;n-- >0;){let i=r.next();if(!i.done)yield i.value;else return}}function*rv(t){let e=td(t),r=e.next();if(r.done)return;let n=r.value;for(let i of e)yield[n,i],n=i}var t_e=Symbol();function*j5(t=0,e=1){let r=t;for(;;)yield r,r+=e}function*ed(t,e){for(let r of t)e(r)&&(yield r)}function*Ht(t,e){for(let r of t)yield e(r)}function*NM(t,e,r,n=1){let i,o;if(r!==void 0?(i=e,o=r):(i=0,o=e),i<0)throw new Error("start cannot be negative");if(o!==null&&o<0)throw new Error("stop cannot be negative");if(n<=0)throw new Error("step cannot be negative");let s=-1,l=td(t),p;for(;;){if(s++,o!==null&&s>=o||(p=l.next(),p.done))return;s<i||(s-i)%n===0&&(yield p.value)}}function*q5(t,e){let r=td(t),n;for(;!(n=r.next()).done;){let i=n.value;if(!e(i))return;yield i}}function td(t){return t[Symbol.iterator]()}function Fs(t,e){return Array.from(Ht(t,e))}function OM(t,e,r){let n=j5(t,r),i=r>=0?o=>o<e:o=>o>e;return q5(n,i)}function LM(t,e,r=1){return e!==void 0?OM(t,e,r):OM(0,t,r)}function rd(t,e){return $5(Ht(t,e))}function Wr(t,e,{domain:r},{domain:n}){return t==="forward"?z5(e,r,n):G5(e,r,n)}function z5(t,e,r){let n=e.start.isAfterOrEqual(t),i=r.start.isAfterOrEqual(t);if(n&&i){let s=e.start.compareTo(r.start);return s===0?e.end.compareTo(r.end):s}if(!n&&!i){let s=e.end.compareTo(r.end);return s===0?-e.start.compareTo(r.start):s}if(!n&&i){let s=e.end.compareTo(r.start);return s!==0?s:r.isEmpty?1:-1}let o=e.start.compareTo(r.end);return o!==0?o:e.isEmpty?-1:1}function G5(t,e,r){let n=e.end.isBeforeOrEqual(t),i=r.end.isBeforeOrEqual(t);if(n&&i){let s=-e.end.compareTo(r.end);return s===0?-e.start.compareTo(r.start):s}if(!n&&!i){let s=-e.start.compareTo(r.start);return s===0?e.end.compareTo(r.end):s}if(!n&&i){let s=-e.start.compareTo(r.end);return s!==0?s:r.isEmpty?1:-1}let o=-e.end.compareTo(r.start);return o!==0?o:e.isEmpty?-1:1}function UM(t,e,r,n,i,o){return K5(t,n,i,o)&&(i==null||Wr(r,n.includeDescendantScopes?t:e,i,o)<0)}function K5(t,e,r,n){let{containment:i,distalPosition:o,allowAdjacentScopes:s,skipAncestorScopes:l}=e,{domain:p}=n;switch(i){case"disallowed":if(p.contains(t))return!1;break;case"disallowedIfStrict":if(rM(p,t))return!1;break;case"required":if(!p.contains(t))return!1;break}return l&&r!=null&&p.contains(r.domain)?!1:Q5(new W(t,o),p,s)}function Q5(t,e,r){let n=t.intersection(e);return n==null?!1:!n.isEmpty||r||e.isEmpty}var Z5={containment:null,allowAdjacentScopes:!1,skipAncestorScopes:!1,includeDescendantScopes:!1},Ce=class{constructor(){this.includeAdjacentInEvery=!1}*generateScopes(e,r,n,i={}){let o={...Z5,...i,distalPosition:i.distalPosition??(n==="forward"?e.document.range.end:e.document.range.start)},s,l=r;for(let p of this.generateScopeCandidates(e,r,n,o))if(UM(r,l,n,o,s,p)&&(yield p,s=p,l=n==="forward"?p.domain.end:p.domain.start),this.canStopEarly(r,n,o,s,p))return}canStopEarly(e,r,n,i,o){let{containment:s,distalPosition:l,skipAncestorScopes:p}=n;if(this.isHierarchical&&!p)return!1;let u=this.isHierarchical&&p?i:o;return u==null?!1:!!(s==="required"&&(r==="forward"?u.domain.end.isAfter(e):u.domain.start.isBefore(e))||(r==="forward"?u.domain.end.isAfterOrEqual(l):u.domain.start.isBeforeOrEqual(l)))}};var Rr=class extends Ce{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.scopeType=n;this.languageId=i;this.isHierarchical=!1}get searchScopeType(){return this.iterationScopeType}get searchScopeHandler(){return this._searchScopeHandler==null&&(this._searchScopeHandler=this.scopeHandlerFactory.create(this.searchScopeType,this.languageId)),this._searchScopeHandler}generateScopeCandidates(r,n,i,o){let{containment:s,...l}=o,p=this.searchScopeHandler.generateScopes(r,n,i,{containment:s==="required"?"required":void 0,...l});return rd(p,u=>this.generateScopesInSearchScope(i,u))}};var nd=class extends Ce{constructor(r,n){super();this.scopeType={type:"line"};this.iterationScopeType={type:"paragraph"};this.isHierarchical=!1;this.includeAdjacentInEvery=!0}*generateScopeCandidates(r,n,i){if(i==="forward")for(let o=n.line;o<r.document.lineCount;o++)yield HM(r,o);else for(let o=n.line;o>=0;o--)yield HM(r,o)}};function HM(t,e){let{range:r}=t.document.lineAt(e);return{editor:t,domain:r,getTargets:n=>[nv(t,n,r)]}}function nv(t,e,r){return new ar({editor:t,isReversed:e,contentRange:iv(t,r)})}function iv(t,e){let r=t.document.lineAt(e.start),n=t.document.lineAt(e.end);return new W(r.rangeTrimmed?.start??r.range.start,n.rangeTrimmed?.end??n.range.end)}function fn(t,e,r,n){let i=e.document.offsetAt(r.start),o=e.document.getText(r),s=l=>new W(e.document.positionAt(i+l.index),e.document.positionAt(i+l.index+l[0].length));return t.lastIndex=0,n==="forward"?Ht(o.matchAll(t),s):Array.from(o.matchAll(t),s).reverse()}var id=class extends Rr{constructor(){super(...arguments);this.scopeType={type:"identifier"};this.iterationScopeType={type:"line"};this.regex=Er(this.languageId).identifierMatcher}generateScopesInSearchScope(r,{editor:n,domain:i}){return Ht(fn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new Kt({editor:n,contentRange:o,isReversed:s})]}))}};function od(t,e,r){let n=t.editor.document.getText(t.domain),i=e.editor.document.getText(e.domain);for(let o of r){let s=Zo(o,n),l=Zo(o,i);if(s&&!l)return!0;if(l&&!s)return!1}}var Y5=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}\p{Z}\p{C}]/gu,X5=/[$]/g,J5=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}]/gu,ad=class extends Rr{constructor(){super(...arguments);this.scopeType={type:"character"};this.iterationScopeType={type:"token"}}get searchScopeType(){return{type:"line"}}generateScopesInSearchScope(r,{editor:n,domain:i}){return Ht(fn(Y5,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new Be({editor:n,contentRange:o,isReversed:s,textualType:"character"})]}))}isPreferredOver(r,n){let{identifierMatcher:i}=Er(this.languageId);return od(r,n,[i,X5,J5])}};var e8=/\p{Lu}?\p{Ll}+|\p{Lu}+(?!\p{Ll})|\p{N}+/gu,sd=class{constructor(e){this.wordRegex=Er(e).wordMatcher}splitIdentifier(e){let r=tl(e,this.wordRegex);return r.length>1?r:tl(e,e8)}};var cd=class extends Rr{constructor(){super(...arguments);this.scopeType={type:"word"};this.iterationScopeType={type:"identifier"};this.wordTokenizer=new sd(this.languageId)}getScopesInSearchScope({editor:r,domain:n}){let{document:i}=r,o=i.offsetAt(n.start),l=this.wordTokenizer.splitIdentifier(i.getText(n)).map(p=>new W(i.positionAt(o+p.index),i.positionAt(o+p.index+p.text.length)));return l.map((p,u)=>({editor:r,domain:p,getTargets:m=>{let d=u>0?l[u-1]:null,g=u+1<l.length?l[u+1]:null;return[t8(m,r,d,p,g)]}}))}generateScopesInSearchScope(r,n){let i=this.getScopesInSearchScope(n);return r==="backward"&&i.reverse(),i}};function t8(t,e,r,n,i){let o=r!=null&&n.start.isAfter(r.end)?new W(r.end,n.start):void 0,s=i!=null&&i.start.isAfter(n.end)?new W(n.end,i.start):void 0,p=o!=null||s!=null?e.document.getText(o??s):"";return new Dm({editor:e,isReversed:t,contentRange:n,insertionDelimiter:p,leadingDelimiterRange:o,trailingDelimiterRange:s})}var r8=/[$]/g,ld=class extends Rr{constructor(){super(...arguments);this.scopeType={type:"token"};this.iterationScopeType={type:"line"};this.regex=Er(this.languageId).tokenMatcher}generateScopesInSearchScope(r,{editor:n,domain:i}){return Ht(fn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new Kt({editor:n,contentRange:o,isReversed:s})]}))}isPreferredOver(r,n){let{identifierMatcher:i}=Er(this.languageId);return od(r,n,[i,r8])}};var pd=class extends Ce{constructor(r,n){super();this.scopeType={type:"document"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i){let o=r.document.range;yield{editor:r,domain:o,getTargets:s=>[new Pm({editor:r,isReversed:s,contentRange:o})]}}};function ud(t,e,r,n,i){if(!t&&n!=null&&i!=null&&VS(e,n)>VS(e,i))return r.union(n)}function Is(t){return t.containment==null&&t.skipAncestorScopes}function VM(t,e,r,{containment:n,distalPosition:i,allowAdjacentScopes:o}){let{start:s,end:l}=n8(t.offsetAt(e),t.offsetAt(i),r,n,o);return{start:t.positionAt(s),end:t.positionAt(l)}}function n8(t,e,r,n,i){let o=i?1:0;if(n==="required")return r==="forward"?{start:t-o,end:t+1}:{start:t-1,end:t+o};let s=n==="disallowed"?1:-o;return r==="forward"?{start:t+s,end:e+o}:{start:e-o,end:t-s}}function BM(t,e,r){let n=[],i=[];for(let o of t)i.length===0||e(i[i.length-1],o)?i.push(o):(n.push(r(i)),i=[o]);return i.length>0&&n.push(r(i)),n}var Cs=class extends Ce{constructor(r){super();this.query=r}*generateScopeCandidates(r,n,i,o){let{document:s}=r,l=Is(o),{start:p,end:u}=VM(s,n,i,o),m=this.query.matches(s,p,u).map(d=>this.matchToScope(r,d,l)).filter(d=>d!=null).sort((d,g)=>Wr(i,n,d,g));yield*BM(m,(d,g)=>d.domain.isRangeEqual(g.domain),d=>d.length===1?d[0]:{...d[0],getTargets(g){let x=Zc(d.flatMap(b=>b.getTargets(g)),(b,v)=>b.isEqual(v));if(x.length>1&&!d.every(b=>b.allowMultiple)){let b="Please use #allow-multiple! predicate in your query to allow multiple matches for this scope type";if(at(k().messages,"BaseTreeSitterScopeHandler.allow-multiple",b),k().runMode==="test")throw Error(b)}return x}})}};function ov(t,e,r,n){return n?Os(t,`${e}.${r}`,`_.${r}`):Os(t,`${e}.${r}`)??(Os(t,e)!=null?Os(t,`_.${r}`):void 0)}function yo(t,e,r,n){return ov(t,e,r,n)?.range}function Os(t,...e){return t.captures.find(r=>e.some(n=>r.name===n))}var fd=class extends Cs{constructor(r,n){super(r);this.iterateeScopeType=n;this.isHierarchical=!0;this.scopeType=void 0}get iterationScopeType(){throw Error("Not implemented")}matchToScope(r,n,i){let o=this.iterateeScopeType.type,s=ov(n,o,"iteration",!1);if(s==null)return;let{range:l,allowMultiple:p}=s,u=yo(n,o,"iteration.domain",!1)??l;return{editor:r,domain:u,allowMultiple:p,getTargets:m=>[new Be({editor:r,isReversed:m,contentRange:l})]}}};var md=class extends Cs{constructor(r,n){super(r);this.scopeType=n;this.isHierarchical=!0}get iterationScopeType(){return{type:"custom",scopeHandler:new fd(this.query,this.scopeType)}}matchToScope(r,n,i){let o=this.scopeType.type,s=Os(n,o);if(s==null)return;let{range:l,allowMultiple:p,insertionDelimiter:u}=s,m=yo(n,o,"domain",!0)??l,d=yo(n,o,"prefix",!0)?.with(void 0,l.start),g=yo(n,o,"leading",!0)?.with(void 0,d?.start??l.start),x=yo(n,o,"trailing",!0)?.with(l.end),b=yo(n,o,"removal",!0);return b==null&&(o==="collectionItem"||o==="argumentOrParameter")&&(b=ud(i,r,l,g,x)),{editor:r,domain:m,allowMultiple:p,getTargets:v=>[new ho({scopeTypeType:o,editor:r,isReversed:v,contentRange:l,prefixRange:d,removalRange:b,leadingDelimiterRange:g,trailingDelimiterRange:x,insertionDelimiter:u})]}}};function WM(t){return t.flatMap((e,r)=>{let{value:n,done:i}=e.next();return i?[]:[{iterator:e,value:n,index:r}]})}function $M(t,e){return t.flatMap(r=>{let{iterator:n,index:i}=r,{value:o}=r,s=!1;for(;!s&&!e(o);)({value:o,done:s}=n.next());return s?[]:[{iterator:n,value:o,index:i}]})}var Yn=class t extends Ce{constructor(r,n){super();this.scopeHandlers=r;this.getIterationScopeHandler=n;this.isHierarchical=!0;this.scopeType=void 0}static create(r,n,i){let o=n.scopeTypes.map(s=>r.create(s,i));return this.createFromScopeHandlers(r,i,o)}static createFromScopeHandlers(r,n,i){let o=()=>new t(i.map(s=>r.create(s.iterationScopeType,n)),()=>{throw new Error("Not implemented")});return new t(i,o)}get iterationScopeType(){return this.iterationScopeHandler==null&&(this.iterationScopeHandler=this.getIterationScopeHandler()),{type:"custom",scopeHandler:this.iterationScopeHandler}}*generateScopeCandidates(r,n,i,o){if(this.iterationScopeHandler?.lastYieldedIndex!=null){let p=this.iterationScopeHandler.lastYieldedIndex;yield*this.scopeHandlers[p].generateScopes(r,n,i,o);return}let s=this.scopeHandlers.map(p=>p.generateScopes(r,n,i,o)[Symbol.iterator]()),l=WM(s);for(;l.length>0;){l.sort((m,d)=>Wr(i,n,m.value,d.value));let p=l[0],u=p.value;this.lastYieldedIndex=p.index,yield u,l=$M(l,m=>Wr(i,n,u,m)<0)}}};var dd=class extends Ce{constructor(r,n){super();this.scopeType={type:"paragraph"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i){let{document:o}=r,s=i==="forward"?1:-1,l=i==="forward"?o.lineCount:-1,p=i8(o,n,i),u=r.document.lineAt(n);for(let m=n.line+s;m!==l;m+=s){let d=r.document.lineAt(m);d.isEmptyOrWhitespace?p!=null&&(yield jM(r,p.range.union(u.range)),p=void 0):p==null&&(p=d),u=d}p!=null&&(yield jM(r,p.range.union(u.range)))}};function i8(t,e,r){let n=r==="forward"?-1:1,i=r==="forward"?-1:t.lineCount,o=t.lineAt(e);if(!o.isEmptyOrWhitespace){for(let s=e.line+n;s!==i;s+=n){let l=t.lineAt(s);if(l.isEmptyOrWhitespace)break;o=l}return o}}function jM(t,e){return{editor:t,domain:e,getTargets:r=>[new uo({editor:t,isReversed:r,contentRange:iv(t,e)})]}}function Fl(t,e){return e.length>1?e.indexOf(t.slice(-1))>-1:t.slice(-1)===e}function qM(t,e){return t.slice(t.length-e.length)===e}var av,a8=["al","adj","assn","Ave","BSc","MSc","Cell","Ch","Co","cc","Corp","Dem","Dept","ed","eg","Eq","Eqs","est","est","etc","Ex","ext","Fig","fig","Figs","figs","i.e","ie","Inc","inc","Jan","Feb","Mar","Apr","Jun","Jul","Aug","Sep","Sept","Oct","Nov","Dec","jr","mi","Miss","Mrs","Mr","Ms","Mol","mt","mts","no","Nos","PhD","MD","BA","MA","MM","pl","pop","pp","Prof","Dr","pt","Ref","Refs","Rep","repr","rev","Sec","Secs","Sgt","Col","Gen","Rep","Sen","Gov","Lt","Maj","Capt","St","Sr","sr","Jr","jr","Rev","Sun","Mon","Tu","Tue","Tues","Wed","Th","Thu","Thur","Thurs","Fri","Sat","trans","Univ","Viz","Vol","vs","v"];function zM(t){t?av=t:av=a8}function sv(t){return/^[A-Z][a-z].*/.test(t)||hd(t)}function GM(t){return sv(t)||/``|"|'/.test(t.substring(0,2))}function KM(t){let e=t.replace(/[-'`~!@#$%^&*()_|+=?;:'",.<>{}[\]\\/]/gi,"");return~av.indexOf(e)}function QM(t,e){return(t==="a.m."||t==="p.m.")&&e.replace(/\W+/g,"").slice(-3).toLowerCase()==="day"}function cv(t){let e=t.replace(/[()[]{}]/g,"").match(/(.\.)*/);return e&&e[0].length>0}function ZM(t){return t.length<=3?!0:sv(t)}function lv(t,e){return e.length>0?t<5&&e[0].length<6&&sv(e[0])?!0:e.filter(function(n){return/[A-Z]/.test(n.charAt(0))}).length>=3:!1}function hd(t,e){return e&&(t=t.slice(e-1,e+2)),!isNaN(t)}function YM(t){return t.match(/^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/)}function XM(t){return t.match(/[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/)}function JM(t){let e=0;return((e=t.indexOf("."))>-1||(e=t.indexOf("!"))>-1||(e=t.indexOf("?"))>-1)&&t.charAt(e+1).match(/[a-zA-Z].*/)?[t.slice(0,e),t.slice(e+1)]:!1}function eD(t){return t==="."||t==="!"||t==="?"}var rD=" @~@ ",tD=rD.trim(),c8=new RegExp("\\S",""),l8=new RegExp("\\n+|[-#=_+*]{4,}","g"),p8=new RegExp("\\S+|\\n","g"),u8={newlineBoundaries:!1,preserveWhitespace:!1,abbreviations:void 0};function nD(t,e){if(!t)return[];if(!c8.test(t))return[];let r={...u8,...e};zM(r.abbreviations),r.newlineBoundaries&&(t=t.replace(l8,rD));let n,i;r.preserveWhitespace?(i=t.split(/(<br\s*\/?>|\S+|\n+)/),n=i.filter(function(d,g){return g%2})):n=t.trim().match(p8)??[];let o=0,s=0,l=[],p=[],u=[];if(!n||!n.length)return[];for(let d=0,g=n.length;d<g;d++){if(o++,u.push(n[d]),~n[d].indexOf(",")&&(o=0),eD(n[d])||Fl(n[d],"?!")||n[d]===tD){r.newlineBoundaries&&n[d]===tD&&u.pop(),p.push(u),o=0,u=[];continue}if((Fl(n[d],'"')||Fl(n[d],"\u201D"))&&(n[d]=n[d].slice(0,-1)),Fl(n[d],".")){if(d+1<g){if(n[d].length===2&&isNaN(n[d].charAt(0))||KM(n[d]))continue;if(GM(n[d+1])){if(QM(n[d],n[d+1])||lv(o,n.slice(d,6))||hd(n[d+1])&&ZM(n[d]))continue}else if(qM(n[d],"..")||cv(n[d])||lv(o,n.slice(d,5)))continue}p.push(u),u=[],o=0;continue}(s=n[d].indexOf("."))>-1&&(hd(n[d],s)||cv(n[d])||XM(n[d])||YM(n[d]))||(l=JM(n[d]))&&(u.pop(),u.push(l[0]),p.push(u),u=[],o=0,u.push(l[1]))}return u.length&&p.push(u),p=p.filter(function(d){return d.length>0}),p.slice(1).reduce(function(d,g){let x=d[d.length-1];return x.length===1&&/^.{1,2}[.]$/.test(x[0])&&!/[.]/.test(g[0])?(d.pop(),d.push(x.concat(g)),d):(d.push(g),d)},[p[0]]).map(function(d,g){if(r.preserveWhitespace&&!r.newlineBoundaries){let x=d.length*2;return g===0&&(x+=1),i.splice(0,x).join("")}return d.join(" ")})}var f8=/\S*\p{L}/u,iD=/(\r?\n[^\p{L}]*\r?\n)|(?<=[.!?])(\s*\r?\n)/gu,m8={newlineBoundaries:!1,preserveWhitespace:!0},gd=class{*segment(e){let r=nD(e,m8),n=0;for(let i of r){let o=i.split(iD).filter(s=>s!=null);for(let s of o){if(!h8(s)){let l=d8(s,n);l!=null&&(yield l)}n+=s.length}}}};function d8(t,e){let r=Lk(f8,t);if(r==null)return;let n=r.index;return n!==0&&(e+=n,t=t.slice(n)),{text:t.trimEnd(),index:e}}function h8(t){return Zo(iD,t)}var yd=class extends Rr{constructor(){super(...arguments);this.scopeType={type:"sentence"};this.iterationScopeType={type:"paragraph"};this.segmenter=new gd}generateScopesInSearchScope(r,{editor:n,domain:i}){let o=n.document.offsetAt(i.start),s=n.document.getText(i),l=u=>{let m=new W(n.document.positionAt(o+u.index),n.document.positionAt(o+u.index+u.text.length));return{editor:n,domain:m,getTargets:d=>[new Kt({editor:n,contentRange:m,isReversed:d})]}},p=this.segmenter.segment(s);return r==="forward"?Ht(p,l):Array.from(p,l).reverse()}};var Ns=class extends Rr{constructor(){super(...arguments);this.iterationScopeType={type:"line"}}generateScopesInSearchScope(r,{editor:n,domain:i}){return Ht(fn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new Kt({editor:n,contentRange:o,isReversed:s})]}))}},xd=class extends Ns{constructor(){super(...arguments);this.regex=/\S+/g}},Td=class extends Ns{constructor(r,n,i){super(r,n,i);this.scopeType=n;this.regex=/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/g}},Sd=class extends Ns{constructor(r,n,i){super(r,n,i);this.scopeType=n}get regex(){return new RegExp(this.scopeType.regex,this.scopeType.flags??"gu")}},vd=class extends Ns{constructor(r,n,i){super(r,n,i);this.scopeType=n}get regex(){return new RegExp(Ur(this.scopeType.character),"gui")}};var bd=class extends Ce{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.languageId=n;this.targetScopeType=i;this.isHierarchical=!0;this.targetScopeHandler=this.scopeHandlerFactory.create(this.targetScopeType,this.languageId),this.surroundingPairInteriorScopeHandler=this.scopeHandlerFactory.create({type:"surroundingPairInterior",delimiter:"any"},this.languageId)}get iterationScopeType(){switch(this.targetScopeHandler.iterationScopeType.type){case"custom":case"fallback":case"conditional":throw Error(`Iteration scope type can't be '${this.targetScopeHandler.iterationScopeType.type}' for BoundedBaseScopeHandler`)}return{type:"oneOf",scopeTypes:[this.targetScopeHandler.iterationScopeType,{type:"surroundingPairInterior",delimiter:"any"}]}}*generateScopeCandidates(r,n,i,o){let s=this.targetScopeHandler.generateScopes(r,n,i,{...o,containment:o.containment!=="disallowed"?o.containment:void 0}),l=Array.from(this.surroundingPairInteriorScopeHandler.generateScopes(r,n,i,{...o,containment:Is(o)?"required":o.containment}));for(let p of s){let u=[];for(let m of l){let d=p.domain.intersection(m.domain);d!=null&&!d.isEmpty&&u.push({editor:r,domain:d,getTargets:g=>[this.getTargets(oD(p,g),oD(m,g))]})}u.push(p),u.sort((m,d)=>Wr(i,n,m,d)),yield*u}}};function oD(t,e){let r=t.getTargets(e);if(r.length!==1)throw Error(`Expected one target but got ${r.length}`);return r[0]}var wd=class extends bd{constructor(r,n,i){super(r,i,{type:"nonWhitespaceSequence"});this.scopeType={type:"boundedNonWhitespaceSequence"}}getTargets(r,n){let i=r.contentRange.intersection(n.contentRange);if(i==null||i.isEmpty)throw Error("Expected non empty intersection");return new Kt({editor:r.editor,isReversed:r.isReversed,contentRange:i})}},_d=class extends bd{constructor(r,n,i){super(r,i,{type:"paragraph"});this.scopeType={type:"boundedParagraph"}}getTargets(r,n){if(!(r instanceof uo))throw Error("Expected ParagraphTarget");return new Om({editor:r.editor,isReversed:r.isReversed,paragraphTarget:r,containingInterior:n})}};var Xn=class{constructor(e){this.items=e;this.index=0}add(e){this.items.push(e)}contains(e){return this.advance(e)}getContaining(e){if(this.advance(e))return this.items[this.index]}advance(e){for(;this.index<this.items.length;){let r=this.items[this.index].range;if(r.contains(e))return!0;if(e.end.isBeforeOrEqual(r.start))return!1;this.index++}return!1}};var Ls=class{constructor(e){this.children=g8(e)}getSmallestContaining(e){return this.children.getContaining(e)?.getSmallestContaining(e)}};function g8(t){let e=[],r=[];for(let n of t){let i=new pv(n);for(;r.length>0&&!r[r.length-1].range.contains(n.range);)r.pop();let o=r[r.length-1];o!=null?o.children.add(i):e.push(i),r.push(i)}return new Xn(e)}var pv=class{constructor(e){this.item=e;this.children=new Xn([])}get range(){return this.item.range}getSmallestContaining(e){return this.children.getContaining(e)?.getSmallestContaining(e)??this.item}};var y8=",",uv=new RegExp(y8,"g");function aD(t){let e=t.getText();return an(e,uv,r=>new W(t.positionAt(r.index),t.positionAt(r.index+r[0].length)))}var sD={type:"fallback",scopeTypes:[{type:"surroundingPairInterior",delimiter:"collectionBoundary"},{type:"conditional",scopeType:{type:"line"},predicate:t=>{let e=t.editor.document.getText(t.domain);return Zo(uv,e)}}]};function fv(t,e,r,n,i,o){let s=i!=null?new W(i.end,n.start):void 0,l=o!=null?new W(n.end,o.start):void 0,p=ud(t,e,n,s,l),u=r.isSingleLine?", ":`,
`;return{editor:e,domain:n,getTargets(m){return[new ho({scopeTypeType:"collectionItem",editor:e,isReversed:m,contentRange:n,insertionDelimiter:u,leadingDelimiterRange:s,trailingDelimiterRange:l,removalRange:p})]}}}function mv(t,e,r,n){let i=t.create({type:"surroundingPairInterior",delimiter:n},e);return Array.from(i.generateScopes(r,new pe(0,0),"forward",{containment:void 0,skipAncestorScopes:!1,includeDescendantScopes:!0}),o=>({range:o.domain}))}var Ed=class extends Ce{constructor(r,n){super();this.scopeHandlerFactory=r;this.languageId=n;this.scopeType={type:"collectionItem"};this.isHierarchical=!0}get iterationScopeType(){return sD}*generateScopeCandidates(r,n,i,o){let s=Is(o),l=aD(r.document),p=mv(this.scopeHandlerFactory,this.languageId,r,"collectionBoundary"),u=new Ls(p),m=mv(this.scopeHandlerFactory,this.languageId,r,"string"),d=new Xn(m),g=[],x=new Set,b=[];for(let v of l){if(d.contains(v))continue;let I;for(;b.length>0;){let K=b[b.length-1];if(K.iterationRange.contains(v)){I=K;break}this.addScopes(g,K),b.pop()}let F=u.getSmallestContaining(v)?.range,U=F??r.document.lineAt(v.start.line).range;if(I!=null&&I.iterationRange.isRangeEqual(U)){I.delimiters.push(v);continue}F!=null&&x.add(F),b.push({editor:r,isEveryScope:s,iterationRange:U,delimiters:[v]})}for(let v of b)this.addScopes(g,v);for(let v of p)if(!x.has(v.range)&&!v.range.isEmpty){let I=aa(r,v.range);I.isEmpty||g.push(fv(s,r,v.range,I))}g.sort((v,I)=>Wr(i,n,v,I)),yield*g}addScopes(r,n){let{editor:i,iterationRange:o,isEveryScope:s,delimiters:l}=n;if(l.length===0)return;let p=[];for(let d=0;d<l.length;++d){let g=l[d],x=l[d-1]?.end??o.start;p.push(new W(x,g.start))}let u=l[l.length-1];p.push(new W(u.end,o.end));let m=p.map(d=>aa(i,d));for(let d=0;d<m.length;++d)d===m.length-1&&i.document.getText(m[d]).trim()===""||r.push(fv(s,i,o,m[d],m[d-1],m[d+1]))}};var Rd=class extends Ce{constructor(r,n,i){super();this.scopeType={type:"collectionItem"};this.isHierarchical=!0;this.scopeHandler=(()=>{let o=new Ed(r,i),s=n.get(i)?.getScopeHandler(this.scopeType);return s==null?o:Yn.createFromScopeHandlers(r,i,[s,o])})()}get iterationScopeType(){return this.scopeHandler.iterationScopeType}generateScopeCandidates(r,n,i,o){return this.scopeHandler.generateScopes(r,n,i,o)}};var kd=class extends Ce{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.conditionalScopeType=n;this.languageId=i;this.scopeType=void 0;this.isHierarchical=!0}get iterationScopeType(){throw new ut("Iteration scope for ConditionalScopeHandler")}generateScopeCandidates(r,n,i,o){let s=this.scopeHandlerFactory.create(this.conditionalScopeType.scopeType,this.languageId);return ed(s.generateScopes(r,n,i,o),this.conditionalScopeType.predicate)}};var Us=class t extends Ce{constructor(r){super();this.scopeHandlers=r;this.scopeType=void 0;this.isHierarchical=!0}static create(r,n,i){let o=n.scopeTypes.map(s=>r.create(s,i));return this.createFromScopeHandlers(o)}static createFromScopeHandlers(r){return new t(r)}get iterationScopeType(){throw new ut("Iteration scope for FallbackScopeHandler")}*generateScopeCandidates(r,n,i,o){for(let s of this.scopeHandlers)yield*s.generateScopes(r,n,i,o)}};var Pd=class extends Ce{constructor(){super();this.scopeType={type:"notebookCell"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i,o){let s=x8(r,n,i,o);for(let l of s)yield S8(l)}};function x8(t,e,r,n){let i=T8(t);if(i==null)return[];let{notebook:o,cell:s}=i;return n.containment==="required"?[s]:n.containment==="disallowed"||n.containment==="disallowedIfStrict"?r==="forward"?o.cells.slice(s.index+1):o.cells.slice(0,s.index).reverse():n.distalPosition!=null&&new W(e,n.distalPosition).isRangeEqual(t.document.range)?o.cells:r==="forward"?o.cells.slice(s.index):o.cells.slice(0,s.index+1).reverse()}function T8(t){let e=t.document.uri.toString();for(let r of k().visibleNotebookEditors)for(let n of r.cells)if(n.document.uri.toString()===e)return{notebook:r,cell:n}}function S8(t){let e=v8(t),r=e.document.range;return{editor:e,domain:r,getTargets:n=>[new Mm({editor:e,isReversed:n,contentRange:r})]}}function v8(t){let e=t.document.uri.toString();for(let r of k().visibleTextEditors)if(r.document.uri.toString()===e)return r;throw new Error("Editor not found notebook cell")}var Ad=class extends Ce{constructor(r,n,i,o){super();this.scopeType={type:"notebookCell"};this.isHierarchical=!1;this.scopeHandler=(()=>{let s=new Pd,l=n.get(o)?.getScopeHandler(this.scopeType);return l==null?s:Yn.createFromScopeHandlers(r,o,[l,s])})()}get iterationScopeType(){return this.scopeHandler.iterationScopeType}generateScopeCandidates(r,n,i,o){return this.scopeHandler.generateScopes(r,n,i,o)}};var Md=class extends Ce{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.scopeType=n;this.languageId=i;this.isHierarchical=!0;this.surroundingPairScopeHandler=this.scopeHandlerFactory.create({type:"surroundingPair",delimiter:this.scopeType.delimiter,requireStrongContainment:!0},this.languageId)}get iterationScopeType(){return this.surroundingPairScopeHandler.iterationScopeType}*generateScopeCandidates(r,n,i,o){let s=this.surroundingPairScopeHandler.generateScopes(r,n,i,o);for(let l of s)yield{editor:r,domain:l.domain,getTargets(p){return l.getTargets(p).flatMap(u=>u.getInterior())}}}};function cD(t,{openingDelimiterRange:e,closingDelimiterRange:r},n){let i=e.union(r),o=new W(e.end,r.start);return{editor:t,domain:n?o:i,getTargets:s=>[new Fm({editor:t,isReversed:s,contentRange:i,interiorRange:o,boundary:[e,r]})]}}function lD(t){let e=Qo(t.map(({text:r})=>r)).map(Ur).join("|");return new RegExp(`(?<!\\\\)(${e})`,"gu")}function uD(t,e,r){if(r.length===0)return[];let n=t?.getCapturesMap(e)??{},i=new Xn(dv(n.disqualifyDelimiter)),o=new Xn(dv(n.pairDelimiter)),s=new Ls(dv(n.textFragment)),l=Object.fromEntries(r.map(m=>[m.text,m])),p=OT(e.getText(),lD(r)),u=[];for(let m of p){let d=m[0],g=new W(e.positionAt(m.index),e.positionAt(m.index+d.length));pD(i.getContaining(g))==null&&u.push({delimiterInfo:l[d],textFragmentRange:s.getSmallestContaining(g)?.range,range:pD(o.getContaining(g))?.range??g})}return u}function pD(t){return t!=null&&!t.hasError()?t:void 0}function dv(t){return t==null?[]:(t.sort((e,r)=>e.range.start.compareTo(r.range.start)),t)}var Dd=Object.freeze({angleBrackets:[["</","<"],[">","/>"]],curlyBrackets:[["{","${"],"}"],tripleBacktickQuotes:[[],[]],tripleDoubleQuotes:[[],[]],tripleSingleQuotes:[[],[]],doubleQuotes:['"','"',{isSingleLine:!0}],escapedDoubleQuotes:['\\"','\\"',{isSingleLine:!0}],escapedParentheses:["\\(","\\)"],escapedSquareBrackets:["\\[","\\]"],escapedSingleQuotes:["\\'","\\'",{isSingleLine:!0}],parentheses:[["(","$("],")"],backtickQuotes:["`","`"],singleQuotes:["'","'",{isSingleLine:!0}],squareBrackets:["[","]"]}),fD={nix:{singleQuotes:["''","''"]},lua:{doubleQuotes:[['"',"[["],['"',"]]"]]},python:{tripleSingleQuotes:["'''","'''"],tripleDoubleQuotes:['"""','"""']},markdown:{tripleBacktickQuotes:["```","```"]},ruby:{tripleDoubleQuotes:["%Q(",")"]}},lRe=Object.fromEntries(Object.values(Dd)),mD={any:ki(Dd),string:["tripleDoubleQuotes","tripleSingleQuotes","tripleBacktickQuotes","doubleQuotes","singleQuotes","backtickQuotes"],collectionBoundary:["parentheses","squareBrackets","curlyBrackets","angleBrackets"]};function dD(t){return t!=null&&t in fD?{...Dd,...fD[t]}:Dd}function hD(t,e){let r=mD[t]??[t];return b8(e,r)}function b8(t,e){let r=dD(t);return e.flatMap(n=>{let[i,o,s]=r[n],{isSingleLine:l=!1}=s??{},p=ml(i)?[i]:i,u=ml(o)?[o]:o;return Qo(Qc(p,u)).map(d=>{let g=p.includes(d),x=u.includes(d);return{text:d,side:g&&!x?"left":!g&&x?"right":"unknown",delimiterName:n,isSingleLine:l}})})}function gD(t){let e=[],r=[];for(let n of t){let{delimiterInfo:{delimiterName:i,side:o,isSingleLine:s},textFragmentRange:l,range:p}=n;if(o==="left")r.push(n);else{let u=Ko(r,d=>d.delimiterInfo.delimiterName===i&&w8(d.textFragmentRange,l)&&_8(s,d.range,p));if(u===-1){o==="unknown"&&r.push(n);continue}let m=r[u];r.length=u,e.push({delimiterName:i,openingDelimiterRange:m.range,closingDelimiterRange:p})}}return e}function w8(t,e){return t==null||e==null?t===e:t.isRangeEqual(e)}function _8(t,e,r){return!t||e.start.line===r.start.line}var Fd=class extends Ce{constructor(r,n,i){super();this.languageDefinitions=r;this.scopeType=n;this.languageId=i;this.iterationScopeType={type:"line"};this.isHierarchical=!0}*generateScopeCandidates(r,n,i,o){if(this.scopeType.forceDirection!=null){at(k().messages,"deprecatedForceDirection","forceDirection is deprecated. If this is important to you please file an issue on the cursorless repo.");return}let s=uD(this.languageDefinitions.get(this.languageId),r.document,hD(this.scopeType.delimiter,this.languageId)),l=gD(s);l=E8(i,o,n,l),yield*l.map(p=>cD(r,p,this.scopeType.requireStrongContainment??!1)).sort((p,u)=>Wr(i,n,p,u))}};function E8(t,e,r,n){return t==="forward"&&e.containment==="required"&&e.allowAdjacentScopes&&e.skipAncestorScopes?n.filter((i,o)=>!(i.closingDelimiterRange.end.isEqual(r)&&n[o+1]?.closingDelimiterRange.start.isEqual(r))):n}var Id=class extends Ce{constructor(r,n,i,o){super();this.scopeHandlerFactory=r;this.languageDefinitions=n;this.scopeType=i;this.languageId=o;this.isHierarchical=!0}get iterationScopeType(){throw new ut("Iteration scope for InteriorScopeHandler")}*generateScopeCandidates(r,n,i,o){let s=new W(n,o.distalPosition),l=this.getScopeHandler();if(l==null)return;let p=l.generateScopes(r,n,i,o);for(let u of p)this.shouldYield(s,u)&&(yield R8(u))}getScopeHandler(){let r=this.languageDefinitions.get(this.languageId)?.getScopeHandler(this.scopeType),n=this.scopeHandlerFactory.create({type:"surroundingPair",delimiter:"any"},this.languageId);return this.scopeType.explicitScopeType?r==null?n:Us.createFromScopeHandlers([r,n]):r==null?n:Yn.createFromScopeHandlers(this.scopeHandlerFactory,this.languageId,[r,n])}shouldYield(r,n){return!this.scopeType.explicitScopeType||r.contains(n.domain)}};function R8(t){return{editor:t.editor,domain:t.domain,getTargets(e){return t.getTargets(e).flatMap(k8)}}}function k8(t){let e=t.getInterior();return e??[new Ps({editor:t.editor,isReversed:t.isReversed,fullInteriorRange:t.contentRange})]}var Hs=class{constructor(e){this.languageDefinitions=e;this.maybeCreate=this.maybeCreate.bind(this),this.create=this.create.bind(this)}maybeCreate(e,r){switch(e.type){case"character":return new ad(this,e,r);case"word":return new cd(this,e,r);case"token":return new ld(this,e,r);case"identifier":return new id(this,e,r);case"line":return new nd(e,r);case"sentence":return new yd(this,e,r);case"paragraph":return new dd(e,r);case"boundedParagraph":return new _d(this,e,r);case"document":return new pd(e,r);case"nonWhitespaceSequence":return new xd(this,e,r);case"boundedNonWhitespaceSequence":return new wd(this,e,r);case"url":return new Td(this,e,r);case"customRegex":return new Sd(this,e,r);case"glyph":return new vd(this,e,r);case"collectionItem":return new Rd(this,this.languageDefinitions,r);case"surroundingPair":return new Fd(this.languageDefinitions,e,r);case"surroundingPairInterior":return new Md(this,e,r);case"notebookCell":return new Ad(this,this.languageDefinitions,e,r);case"interior":return new Id(this,this.languageDefinitions,e,r);case"custom":return e.scopeHandler;case"oneOf":return Yn.create(this,e,r);case"fallback":return Us.create(this,e,r);case"conditional":return new kd(this,e,r);case"instance":throw Error("Unexpected scope type 'instance'");default:return this.languageDefinitions.get(r)?.getScopeHandler(e)}}create(e,r){let n=this.maybeCreate(e,r);if(n==null)throw new Error(`Couldn't create scope handler for '${e.type}'`);return n}};function mn(t,e){return new W(t.row,t.column,e.row,e.column)}function hv(t){return new pe(t.row,t.column)}function yD(t){return new W(t.startPosition.row,t.startPosition.column,t.endPosition.row,t.endPosition.column)}function xD(t,e){return new be(t.startPosition.row,t.startPosition.column,e.endPosition.row,e.endPosition.column)}function Jn(t,e){return{selection:new be(new pe(e.startPosition.row,e.startPosition.column),new pe(e.endPosition.row,e.endPosition.column)),context:{}}}function P8(t,e,r){let n=e.startIndex<r.startIndex,i=n?e:r,o=n?r:e;return{selection:new be(new pe(i.startPosition.row,i.startPosition.column),new pe(o.endPosition.row,o.endPosition.column)),context:{}}}function TD(){return gv(t=>t.type===","||t.type==="("||t.type===")"||t.type==="["||t.type==="]"||t.type===">"||t.type==="<"||t.type==="}"||t.type==="{",", ")}function SD(t,e){let r=e.startIndex,n=e.endIndex;return e.text.startsWith("(")&&e.text.endsWith(")")?(r+=1,n-=1):e.text.endsWith(";")&&(n-=1),{selection:new be(t.document.positionAt(r),t.document.positionAt(n)),context:{}}}function vD(...t){return function(e,r){let n=r.previousSibling,i=n?.previousSibling,o;return n&&(t.includes(n.type)?i?o=mn(i.endPosition,r.startPosition):o=mn(n.startPosition,r.startPosition):o=mn(n.endPosition,r.startPosition)),{...Jn(e,r),context:{leadingDelimiterRange:o}}}}function ei(t=[],e=[],{includeUnnamedChildren:r=!1}={}){return function(n,i){if(t.length>0&&e.length>0)throw new Error("Cannot have both exclusions and inclusions.");let o=r?i.children:i.namedChildren,s=new Set(t),l=new Set(e);return o=o.filter(p=>s.size>0?!s.has(p.type):l.size>0?l.has(p.type):!0),P8(n,o[0],o[o.length-1])}}function bD(...t){return function(e,r){let n=r.nextSibling,i=n?.nextSibling,o;return n&&(t.includes(n.type)?i?o=mn(r.endPosition,i.startPosition):o=mn(r.endPosition,n.endPosition):o=mn(r.endPosition,n.startPosition)),{...Jn(e,r),context:{trailingDelimiterRange:o}}}}function A8(t,e){let r=t.nextSibling;for(;r!=null;){if(!e(r))return r;r=r.nextSibling}return r}function M8(t,e){let r=t.previousSibling;for(;r!=null;){if(!e(r))return r;r=r.previousSibling}return r}function gv(t,e,r=xr,n=xr){return(i,o)=>{let s,l,p=r(o),u=n(o),m=M8(p,t),d=A8(u,t);m!=null&&(s=mn(m.endPosition,p.startPosition)),d!=null&&(l=mn(u.endPosition,d.startPosition));let g=D8(i,s,l,e);return{selection:new be(new pe(p.startPosition.row,p.startPosition.column),new pe(u.endPosition.row,u.endPosition.column)),context:{containingListDelimiter:g,leadingDelimiterRange:s,trailingDelimiterRange:l}}}}function D8(t,e,r,n){let{document:i}=t,o=[r!=null?i.getText(r):n,e!=null?i.getText(e):n];return AT(o,"length")}function wD(t,e){if(t.length===1)return!0;let r=!1,n=t.filter(({name:p})=>p.endsWith(".start")).map(({range:{end:p}})=>p).sort((p,u)=>p.compareTo(u)).at(-1),i=t.filter(({name:p})=>p.endsWith(".end")).map(({range:{start:p}})=>p).sort((p,u)=>p.compareTo(u)).at(0);n!=null&&i!=null&&n.isAfter(i)&&(at(e,"TreeSitterQuery.checkCaptures.badOrder",`Start capture must be before end capture: ${t}`),r=!0);let o=t.filter(({name:p})=>p.endsWith(".start")).length,s=t.filter(({name:p})=>p.endsWith(".end")).length,l=t.length-o-s;return l>0&&(o>0||s>0)&&(at(e,"TreeSitterQuery.checkCaptures.mixRegularStartEnd",`Please do not mix regular captures and start/end captures: ${t.map(({name:p,range:u})=>p+" "+u.toString())}`),r=!0),l>1&&(at(e,"TreeSitterQuery.checkCaptures.duplicate",`A capture with the same name may only appear once in a single pattern: ${t.map(({name:p,range:u})=>p+" "+u.toString())}`),r=!0),!r}function _D(t){let e=t;for(;e!=null;){if(e.hasError)return!0;e=e.parent}return!1}function yv(t){return t.replace(/(\.(start|end))?(\.(startOf|endOf))?$/,"")}var Oe;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{let o={};for(let s of i)o[s]=s;return o},t.getValidEnumValues=i=>{let o=t.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),s={};for(let l of o)s[l]=i[l];return t.objectValues(s)},t.objectValues=i=>t.objectKeys(i).map(function(o){return i[o]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let o=[];for(let s in i)Object.prototype.hasOwnProperty.call(i,s)&&o.push(s);return o},t.find=(i,o)=>{for(let s of i)if(o(s))return s},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,o=" | "){return i.map(s=>typeof s=="string"?`'${s}'`:s).join(o)}t.joinValues=n,t.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(Oe||(Oe={}));var Tv;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(Tv||(Tv={}));var J=Oe.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),xo=t=>{switch(typeof t){case"undefined":return J.undefined;case"string":return J.string;case"number":return isNaN(t)?J.nan:J.number;case"boolean":return J.boolean;case"function":return J.function;case"bigint":return J.bigint;case"symbol":return J.symbol;case"object":return Array.isArray(t)?J.array:t===null?J.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?J.promise:typeof Map<"u"&&t instanceof Map?J.map:typeof Set<"u"&&t instanceof Set?J.set:typeof Date<"u"&&t instanceof Date?J.date:J.object;default:return J.unknown}},G=Oe.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),F8=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),$r=class t extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let r=e||function(o){return o.message},n={_errors:[]},i=o=>{for(let s of o.issues)if(s.code==="invalid_union")s.unionErrors.map(i);else if(s.code==="invalid_return_type")i(s.returnTypeError);else if(s.code==="invalid_arguments")i(s.argumentsError);else if(s.path.length===0)n._errors.push(r(s));else{let l=n,p=0;for(;p<s.path.length;){let u=s.path[p];p===s.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(r(s))):l[u]=l[u]||{_errors:[]},l=l[u],p++}}};return i(this),n}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Oe.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};$r.create=t=>new $r(t);var Ws=(t,e)=>{let r;switch(t.code){case G.invalid_type:t.received===J.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case G.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,Oe.jsonStringifyReplacer)}`;break;case G.unrecognized_keys:r=`Unrecognized key(s) in object: ${Oe.joinValues(t.keys,", ")}`;break;case G.invalid_union:r="Invalid input";break;case G.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Oe.joinValues(t.options)}`;break;case G.invalid_enum_value:r=`Invalid enum value. Expected ${Oe.joinValues(t.options)}, received '${t.received}'`;break;case G.invalid_arguments:r="Invalid function arguments";break;case G.invalid_return_type:r="Invalid function return type";break;case G.invalid_date:r="Invalid date";break;case G.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:Oe.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case G.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case G.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case G.custom:r="Invalid input";break;case G.invalid_intersection_types:r="Intersection results could not be merged";break;case G.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case G.not_finite:r="Number must be finite";break;default:r=e.defaultError,Oe.assertNever(t)}return{message:r}},kD=Ws;function I8(t){kD=t}function Cd(){return kD}var Od=t=>{let{data:e,path:r,errorMaps:n,issueData:i}=t,o=[...r,...i.path||[]],s={...i,path:o};if(i.message!==void 0)return{...i,path:o,message:i.message};let l="",p=n.filter(u=>!!u).slice().reverse();for(let u of p)l=u(s,{data:e,defaultError:l}).message;return{...i,path:o,message:l}},C8=[];function X(t,e){let r=Cd(),n=Od({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===Ws?void 0:Ws].filter(i=>!!i)});t.common.issues.push(n)}var Qt=class t{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let i of r){if(i.status==="aborted")return ge;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let i of r){let o=await i.key,s=await i.value;n.push({key:o,value:s})}return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let i of r){let{key:o,value:s}=i;if(o.status==="aborted"||s.status==="aborted")return ge;o.status==="dirty"&&e.dirty(),s.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof s.value<"u"||i.alwaysSet)&&(n[o.value]=s.value)}return{status:e.value,value:n}}},ge=Object.freeze({status:"aborted"}),Bs=t=>({status:"dirty",value:t}),sr=t=>({status:"valid",value:t}),Sv=t=>t.status==="aborted",vv=t=>t.status==="dirty",Ol=t=>t.status==="valid",Nl=t=>typeof Promise<"u"&&t instanceof Promise;function Nd(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function PD(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}var ce;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(ce||(ce={}));var Il,Cl,hn=class{constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},ED=(t,e)=>{if(Ol(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new $r(t.common.issues);return this._error=r,this._error}}};function Te(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(s,l)=>{var p,u;let{message:m}=t;return s.code==="invalid_enum_value"?{message:m??l.defaultError}:typeof l.data>"u"?{message:(p=m??n)!==null&&p!==void 0?p:l.defaultError}:s.code!=="invalid_type"?{message:l.defaultError}:{message:(u=m??r)!==null&&u!==void 0?u:l.defaultError}},description:i}}var Se=class{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return xo(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:xo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Qt,ctx:{common:e.parent.common,data:e.data,parsedType:xo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(Nl(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;let i={common:{issues:[],async:(n=r?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:xo(e)},o=this._parseSync({data:e,path:i.path,parent:i});return ED(i,o)}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:xo(e)},i=this._parse({data:e,path:n.path,parent:n}),o=await(Nl(i)?i:Promise.resolve(i));return ED(n,o)}refine(e,r){let n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,o)=>{let s=e(i),l=()=>o.addIssue({code:G.custom,...n(i)});return typeof Promise<"u"&&s instanceof Promise?s.then(p=>p?!0:(l(),!1)):s?!0:(l(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new jr({schema:this,typeName:de.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return dn.create(this,this._def)}nullable(){return ri.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ni.create(this,this._def)}promise(){return vo.create(this,this._def)}or(e){return ha.create([this,e],this._def)}and(e){return ga.create(this,e,this._def)}transform(e){return new jr({...Te(this._def),schema:this,typeName:de.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new va({...Te(this._def),innerType:this,defaultValue:r,typeName:de.ZodDefault})}brand(){return new Ll({typeName:de.ZodBranded,type:this,...Te(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new ba({...Te(this._def),innerType:this,catchValue:r,typeName:de.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return Ul.create(this,e)}readonly(){return wa.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},O8=/^c[^\s-]{8,}$/i,N8=/^[0-9a-z]+$/,L8=/^[0-9A-HJKMNP-TV-Z]{26}$/,U8=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,H8=/^[a-z0-9_-]{21}$/i,V8=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,B8=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,W8="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",xv,$8=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,j8=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,q8=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,AD="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",z8=new RegExp(`^${AD}$`);function MD(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function G8(t){return new RegExp(`^${MD(t)}$`)}function DD(t){let e=`${AD}T${MD(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function K8(t,e){return!!((e==="v4"||!e)&&$8.test(t)||(e==="v6"||!e)&&j8.test(t))}var To=class t extends Se{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==J.string){let o=this._getOrReturnCtx(e);return X(o,{code:G.invalid_type,expected:J.string,received:o.parsedType}),ge}let n=new Qt,i;for(let o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(i=this._getOrReturnCtx(e,i),X(i,{code:G.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="max")e.data.length>o.value&&(i=this._getOrReturnCtx(e,i),X(i,{code:G.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="length"){let s=e.data.length>o.value,l=e.data.length<o.value;(s||l)&&(i=this._getOrReturnCtx(e,i),s?X(i,{code:G.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):l&&X(i,{code:G.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),n.dirty())}else if(o.kind==="email")B8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"email",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="emoji")xv||(xv=new RegExp(W8,"u")),xv.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"emoji",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="uuid")U8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"uuid",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="nanoid")H8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"nanoid",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid")O8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"cuid",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid2")N8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"cuid2",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="ulid")L8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"ulid",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),X(i,{validation:"url",code:G.invalid_string,message:o.message}),n.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"regex",code:G.invalid_string,message:o.message}),n.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(e,i),X(i,{code:G.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),n.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(i=this._getOrReturnCtx(e,i),X(i,{code:G.invalid_string,validation:{startsWith:o.value},message:o.message}),n.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(i=this._getOrReturnCtx(e,i),X(i,{code:G.invalid_string,validation:{endsWith:o.value},message:o.message}),n.dirty()):o.kind==="datetime"?DD(o).test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{code:G.invalid_string,validation:"datetime",message:o.message}),n.dirty()):o.kind==="date"?z8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{code:G.invalid_string,validation:"date",message:o.message}),n.dirty()):o.kind==="time"?G8(o).test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{code:G.invalid_string,validation:"time",message:o.message}),n.dirty()):o.kind==="duration"?V8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"duration",code:G.invalid_string,message:o.message}),n.dirty()):o.kind==="ip"?K8(e.data,o.version)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"ip",code:G.invalid_string,message:o.message}),n.dirty()):o.kind==="base64"?q8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"base64",code:G.invalid_string,message:o.message}),n.dirty()):Oe.assertNever(o);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(i=>e.test(i),{validation:r,code:G.invalid_string,...ce.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ce.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ce.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ce.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ce.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ce.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ce.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ce.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ce.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ce.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ce.errToObj(e)})}datetime(e){var r,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,local:(n=e?.local)!==null&&n!==void 0?n:!1,...ce.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...ce.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...ce.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...ce.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...ce.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...ce.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...ce.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...ce.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...ce.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...ce.errToObj(r)})}nonempty(e){return this.min(1,ce.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};To.create=t=>{var e;return new To({checks:[],typeName:de.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Te(t)})};function Q8(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,o=parseInt(t.toFixed(i).replace(".","")),s=parseInt(e.toFixed(i).replace(".",""));return o%s/Math.pow(10,i)}var la=class t extends Se{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==J.number){let o=this._getOrReturnCtx(e);return X(o,{code:G.invalid_type,expected:J.number,received:o.parsedType}),ge}let n,i=new Qt;for(let o of this._def.checks)o.kind==="int"?Oe.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),X(n,{code:G.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),X(n,{code:G.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),X(n,{code:G.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?Q8(e.data,o.value)!==0&&(n=this._getOrReturnCtx(e,n),X(n,{code:G.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),X(n,{code:G.not_finite,message:o.message}),i.dirty()):Oe.assertNever(o);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,ce.toString(r))}gt(e,r){return this.setLimit("min",e,!1,ce.toString(r))}lte(e,r){return this.setLimit("max",e,!0,ce.toString(r))}lt(e,r){return this.setLimit("max",e,!1,ce.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:ce.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ce.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ce.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ce.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ce.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ce.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:ce.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:ce.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ce.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ce.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Oe.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};la.create=t=>new la({checks:[],typeName:de.ZodNumber,coerce:t?.coerce||!1,...Te(t)});var pa=class t extends Se{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==J.bigint){let o=this._getOrReturnCtx(e);return X(o,{code:G.invalid_type,expected:J.bigint,received:o.parsedType}),ge}let n,i=new Qt;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),X(n,{code:G.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),X(n,{code:G.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),X(n,{code:G.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):Oe.assertNever(o);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,ce.toString(r))}gt(e,r){return this.setLimit("min",e,!1,ce.toString(r))}lte(e,r){return this.setLimit("max",e,!0,ce.toString(r))}lt(e,r){return this.setLimit("max",e,!1,ce.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:ce.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ce.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ce.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ce.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ce.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:ce.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};pa.create=t=>{var e;return new pa({checks:[],typeName:de.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Te(t)})};var ua=class extends Se{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==J.boolean){let n=this._getOrReturnCtx(e);return X(n,{code:G.invalid_type,expected:J.boolean,received:n.parsedType}),ge}return sr(e.data)}};ua.create=t=>new ua({typeName:de.ZodBoolean,coerce:t?.coerce||!1,...Te(t)});var fa=class t extends Se{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==J.date){let o=this._getOrReturnCtx(e);return X(o,{code:G.invalid_type,expected:J.date,received:o.parsedType}),ge}if(isNaN(e.data.getTime())){let o=this._getOrReturnCtx(e);return X(o,{code:G.invalid_date}),ge}let n=new Qt,i;for(let o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(i=this._getOrReturnCtx(e,i),X(i,{code:G.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),n.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(i=this._getOrReturnCtx(e,i),X(i,{code:G.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),n.dirty()):Oe.assertNever(o);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:ce.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:ce.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};fa.create=t=>new fa({checks:[],coerce:t?.coerce||!1,typeName:de.ZodDate,...Te(t)});var $s=class extends Se{_parse(e){if(this._getType(e)!==J.symbol){let n=this._getOrReturnCtx(e);return X(n,{code:G.invalid_type,expected:J.symbol,received:n.parsedType}),ge}return sr(e.data)}};$s.create=t=>new $s({typeName:de.ZodSymbol,...Te(t)});var ma=class extends Se{_parse(e){if(this._getType(e)!==J.undefined){let n=this._getOrReturnCtx(e);return X(n,{code:G.invalid_type,expected:J.undefined,received:n.parsedType}),ge}return sr(e.data)}};ma.create=t=>new ma({typeName:de.ZodUndefined,...Te(t)});var da=class extends Se{_parse(e){if(this._getType(e)!==J.null){let n=this._getOrReturnCtx(e);return X(n,{code:G.invalid_type,expected:J.null,received:n.parsedType}),ge}return sr(e.data)}};da.create=t=>new da({typeName:de.ZodNull,...Te(t)});var So=class extends Se{constructor(){super(...arguments),this._any=!0}_parse(e){return sr(e.data)}};So.create=t=>new So({typeName:de.ZodAny,...Te(t)});var Oi=class extends Se{constructor(){super(...arguments),this._unknown=!0}_parse(e){return sr(e.data)}};Oi.create=t=>new Oi({typeName:de.ZodUnknown,...Te(t)});var In=class extends Se{_parse(e){let r=this._getOrReturnCtx(e);return X(r,{code:G.invalid_type,expected:J.never,received:r.parsedType}),ge}};In.create=t=>new In({typeName:de.ZodNever,...Te(t)});var js=class extends Se{_parse(e){if(this._getType(e)!==J.undefined){let n=this._getOrReturnCtx(e);return X(n,{code:G.invalid_type,expected:J.void,received:n.parsedType}),ge}return sr(e.data)}};js.create=t=>new js({typeName:de.ZodVoid,...Te(t)});var Ni=class t extends Se{_parse(e){let{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==J.array)return X(r,{code:G.invalid_type,expected:J.array,received:r.parsedType}),ge;if(i.exactLength!==null){let s=r.data.length>i.exactLength.value,l=r.data.length<i.exactLength.value;(s||l)&&(X(r,{code:s?G.too_big:G.too_small,minimum:l?i.exactLength.value:void 0,maximum:s?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(X(r,{code:G.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(X(r,{code:G.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((s,l)=>i.type._parseAsync(new hn(r,s,r.path,l)))).then(s=>Qt.mergeArray(n,s));let o=[...r.data].map((s,l)=>i.type._parseSync(new hn(r,s,r.path,l)));return Qt.mergeArray(n,o)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:ce.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:ce.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:ce.toString(r)}})}nonempty(e){return this.min(1,e)}};Ni.create=(t,e)=>new Ni({type:t,minLength:null,maxLength:null,exactLength:null,typeName:de.ZodArray,...Te(e)});function Vs(t){if(t instanceof kr){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=dn.create(Vs(n))}return new kr({...t._def,shape:()=>e})}else return t instanceof Ni?new Ni({...t._def,type:Vs(t.element)}):t instanceof dn?dn.create(Vs(t.unwrap())):t instanceof ri?ri.create(Vs(t.unwrap())):t instanceof ti?ti.create(t.items.map(e=>Vs(e))):t}var kr=class t extends Se{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=Oe.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==J.object){let u=this._getOrReturnCtx(e);return X(u,{code:G.invalid_type,expected:J.object,received:u.parsedType}),ge}let{status:n,ctx:i}=this._processInputParams(e),{shape:o,keys:s}=this._getCached(),l=[];if(!(this._def.catchall instanceof In&&this._def.unknownKeys==="strip"))for(let u in i.data)s.includes(u)||l.push(u);let p=[];for(let u of s){let m=o[u],d=i.data[u];p.push({key:{status:"valid",value:u},value:m._parse(new hn(i,d,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof In){let u=this._def.unknownKeys;if(u==="passthrough")for(let m of l)p.push({key:{status:"valid",value:m},value:{status:"valid",value:i.data[m]}});else if(u==="strict")l.length>0&&(X(i,{code:G.unrecognized_keys,keys:l}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let u=this._def.catchall;for(let m of l){let d=i.data[m];p.push({key:{status:"valid",value:m},value:u._parse(new hn(i,d,i.path,m)),alwaysSet:m in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let u=[];for(let m of p){let d=await m.key,g=await m.value;u.push({key:d,value:g,alwaysSet:m.alwaysSet})}return u}).then(u=>Qt.mergeObjectSync(n,u)):Qt.mergeObjectSync(n,p)}get shape(){return this._def.shape()}strict(e){return ce.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var i,o,s,l;let p=(s=(o=(i=this._def).errorMap)===null||o===void 0?void 0:o.call(i,r,n).message)!==null&&s!==void 0?s:n.defaultError;return r.code==="unrecognized_keys"?{message:(l=ce.errToObj(e).message)!==null&&l!==void 0?l:p}:{message:p}}}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:de.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};return Oe.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new t({...this._def,shape:()=>r})}omit(e){let r={};return Oe.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new t({...this._def,shape:()=>r})}deepPartial(){return Vs(this)}partial(e){let r={};return Oe.objectKeys(this.shape).forEach(n=>{let i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}),new t({...this._def,shape:()=>r})}required(e){let r={};return Oe.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let o=this.shape[n];for(;o instanceof dn;)o=o._def.innerType;r[n]=o}}),new t({...this._def,shape:()=>r})}keyof(){return FD(Oe.objectKeys(this.shape))}};kr.create=(t,e)=>new kr({shape:()=>t,unknownKeys:"strip",catchall:In.create(),typeName:de.ZodObject,...Te(e)});kr.strictCreate=(t,e)=>new kr({shape:()=>t,unknownKeys:"strict",catchall:In.create(),typeName:de.ZodObject,...Te(e)});kr.lazycreate=(t,e)=>new kr({shape:t,unknownKeys:"strip",catchall:In.create(),typeName:de.ZodObject,...Te(e)});var ha=class extends Se{_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function i(o){for(let l of o)if(l.result.status==="valid")return l.result;for(let l of o)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;let s=o.map(l=>new $r(l.ctx.common.issues));return X(r,{code:G.invalid_union,unionErrors:s}),ge}if(r.common.async)return Promise.all(n.map(async o=>{let s={...r,common:{...r.common,issues:[]},parent:null};return{result:await o._parseAsync({data:r.data,path:r.path,parent:s}),ctx:s}})).then(i);{let o,s=[];for(let p of n){let u={...r,common:{...r.common,issues:[]},parent:null},m=p._parseSync({data:r.data,path:r.path,parent:u});if(m.status==="valid")return m;m.status==="dirty"&&!o&&(o={result:m,ctx:u}),u.common.issues.length&&s.push(u.common.issues)}if(o)return r.common.issues.push(...o.ctx.common.issues),o.result;let l=s.map(p=>new $r(p));return X(r,{code:G.invalid_union,unionErrors:l}),ge}}get options(){return this._def.options}};ha.create=(t,e)=>new ha({options:t,typeName:de.ZodUnion,...Te(e)});var Ci=t=>t instanceof ya?Ci(t.schema):t instanceof jr?Ci(t.innerType()):t instanceof xa?[t.value]:t instanceof Ta?t.options:t instanceof Sa?Oe.objectValues(t.enum):t instanceof va?Ci(t._def.innerType):t instanceof ma?[void 0]:t instanceof da?[null]:t instanceof dn?[void 0,...Ci(t.unwrap())]:t instanceof ri?[null,...Ci(t.unwrap())]:t instanceof Ll||t instanceof wa?Ci(t.unwrap()):t instanceof ba?Ci(t._def.innerType):[],Ld=class t extends Se{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==J.object)return X(r,{code:G.invalid_type,expected:J.object,received:r.parsedType}),ge;let n=this.discriminator,i=r.data[n],o=this.optionsMap.get(i);return o?r.common.async?o._parseAsync({data:r.data,path:r.path,parent:r}):o._parseSync({data:r.data,path:r.path,parent:r}):(X(r,{code:G.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),ge)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let i=new Map;for(let o of r){let s=Ci(o.shape[e]);if(!s.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let l of s){if(i.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);i.set(l,o)}}return new t({typeName:de.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...Te(n)})}};function bv(t,e){let r=xo(t),n=xo(e);if(t===e)return{valid:!0,data:t};if(r===J.object&&n===J.object){let i=Oe.objectKeys(e),o=Oe.objectKeys(t).filter(l=>i.indexOf(l)!==-1),s={...t,...e};for(let l of o){let p=bv(t[l],e[l]);if(!p.valid)return{valid:!1};s[l]=p.data}return{valid:!0,data:s}}else if(r===J.array&&n===J.array){if(t.length!==e.length)return{valid:!1};let i=[];for(let o=0;o<t.length;o++){let s=t[o],l=e[o],p=bv(s,l);if(!p.valid)return{valid:!1};i.push(p.data)}return{valid:!0,data:i}}else return r===J.date&&n===J.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var ga=class extends Se{_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=(o,s)=>{if(Sv(o)||Sv(s))return ge;let l=bv(o.value,s.value);return l.valid?((vv(o)||vv(s))&&r.dirty(),{status:r.value,value:l.data}):(X(n,{code:G.invalid_intersection_types}),ge)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([o,s])=>i(o,s)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};ga.create=(t,e,r)=>new ga({left:t,right:e,typeName:de.ZodIntersection,...Te(r)});var ti=class t extends Se{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==J.array)return X(n,{code:G.invalid_type,expected:J.array,received:n.parsedType}),ge;if(n.data.length<this._def.items.length)return X(n,{code:G.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ge;!this._def.rest&&n.data.length>this._def.items.length&&(X(n,{code:G.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let o=[...n.data].map((s,l)=>{let p=this._def.items[l]||this._def.rest;return p?p._parse(new hn(n,s,n.path,l)):null}).filter(s=>!!s);return n.common.async?Promise.all(o).then(s=>Qt.mergeArray(r,s)):Qt.mergeArray(r,o)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};ti.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ti({items:t,typeName:de.ZodTuple,rest:null,...Te(e)})};var Ud=class t extends Se{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==J.object)return X(n,{code:G.invalid_type,expected:J.object,received:n.parsedType}),ge;let i=[],o=this._def.keyType,s=this._def.valueType;for(let l in n.data)i.push({key:o._parse(new hn(n,l,n.path,l)),value:s._parse(new hn(n,n.data[l],n.path,l)),alwaysSet:l in n.data});return n.common.async?Qt.mergeObjectAsync(r,i):Qt.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof Se?new t({keyType:e,valueType:r,typeName:de.ZodRecord,...Te(n)}):new t({keyType:To.create(),valueType:e,typeName:de.ZodRecord,...Te(r)})}},qs=class extends Se{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==J.map)return X(n,{code:G.invalid_type,expected:J.map,received:n.parsedType}),ge;let i=this._def.keyType,o=this._def.valueType,s=[...n.data.entries()].map(([l,p],u)=>({key:i._parse(new hn(n,l,n.path,[u,"key"])),value:o._parse(new hn(n,p,n.path,[u,"value"]))}));if(n.common.async){let l=new Map;return Promise.resolve().then(async()=>{for(let p of s){let u=await p.key,m=await p.value;if(u.status==="aborted"||m.status==="aborted")return ge;(u.status==="dirty"||m.status==="dirty")&&r.dirty(),l.set(u.value,m.value)}return{status:r.value,value:l}})}else{let l=new Map;for(let p of s){let u=p.key,m=p.value;if(u.status==="aborted"||m.status==="aborted")return ge;(u.status==="dirty"||m.status==="dirty")&&r.dirty(),l.set(u.value,m.value)}return{status:r.value,value:l}}}};qs.create=(t,e,r)=>new qs({valueType:e,keyType:t,typeName:de.ZodMap,...Te(r)});var zs=class t extends Se{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==J.set)return X(n,{code:G.invalid_type,expected:J.set,received:n.parsedType}),ge;let i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(X(n,{code:G.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(X(n,{code:G.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());let o=this._def.valueType;function s(p){let u=new Set;for(let m of p){if(m.status==="aborted")return ge;m.status==="dirty"&&r.dirty(),u.add(m.value)}return{status:r.value,value:u}}let l=[...n.data.values()].map((p,u)=>o._parse(new hn(n,p,n.path,u)));return n.common.async?Promise.all(l).then(p=>s(p)):s(l)}min(e,r){return new t({...this._def,minSize:{value:e,message:ce.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:ce.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};zs.create=(t,e)=>new zs({valueType:t,minSize:null,maxSize:null,typeName:de.ZodSet,...Te(e)});var Hd=class t extends Se{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==J.function)return X(r,{code:G.invalid_type,expected:J.function,received:r.parsedType}),ge;function n(l,p){return Od({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Cd(),Ws].filter(u=>!!u),issueData:{code:G.invalid_arguments,argumentsError:p}})}function i(l,p){return Od({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Cd(),Ws].filter(u=>!!u),issueData:{code:G.invalid_return_type,returnTypeError:p}})}let o={errorMap:r.common.contextualErrorMap},s=r.data;if(this._def.returns instanceof vo){let l=this;return sr(async function(...p){let u=new $r([]),m=await l._def.args.parseAsync(p,o).catch(x=>{throw u.addIssue(n(p,x)),u}),d=await Reflect.apply(s,this,m);return await l._def.returns._def.type.parseAsync(d,o).catch(x=>{throw u.addIssue(i(d,x)),u})})}else{let l=this;return sr(function(...p){let u=l._def.args.safeParse(p,o);if(!u.success)throw new $r([n(p,u.error)]);let m=Reflect.apply(s,this,u.data),d=l._def.returns.safeParse(m,o);if(!d.success)throw new $r([i(m,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:ti.create(e).rest(Oi.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||ti.create([]).rest(Oi.create()),returns:r||Oi.create(),typeName:de.ZodFunction,...Te(n)})}},ya=class extends Se{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};ya.create=(t,e)=>new ya({getter:t,typeName:de.ZodLazy,...Te(e)});var xa=class extends Se{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return X(r,{received:r.data,code:G.invalid_literal,expected:this._def.value}),ge}return{status:"valid",value:e.data}}get value(){return this._def.value}};xa.create=(t,e)=>new xa({value:t,typeName:de.ZodLiteral,...Te(e)});function FD(t,e){return new Ta({values:t,typeName:de.ZodEnum,...Te(e)})}var Ta=class t extends Se{constructor(){super(...arguments),Il.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return X(r,{expected:Oe.joinValues(n),received:r.parsedType,code:G.invalid_type}),ge}if(Nd(this,Il,"f")||PD(this,Il,new Set(this._def.values),"f"),!Nd(this,Il,"f").has(e.data)){let r=this._getOrReturnCtx(e),n=this._def.values;return X(r,{received:r.data,code:G.invalid_enum_value,options:n}),ge}return sr(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}};Il=new WeakMap;Ta.create=FD;var Sa=class extends Se{constructor(){super(...arguments),Cl.set(this,void 0)}_parse(e){let r=Oe.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==J.string&&n.parsedType!==J.number){let i=Oe.objectValues(r);return X(n,{expected:Oe.joinValues(i),received:n.parsedType,code:G.invalid_type}),ge}if(Nd(this,Cl,"f")||PD(this,Cl,new Set(Oe.getValidEnumValues(this._def.values)),"f"),!Nd(this,Cl,"f").has(e.data)){let i=Oe.objectValues(r);return X(n,{received:n.data,code:G.invalid_enum_value,options:i}),ge}return sr(e.data)}get enum(){return this._def.values}};Cl=new WeakMap;Sa.create=(t,e)=>new Sa({values:t,typeName:de.ZodNativeEnum,...Te(e)});var vo=class extends Se{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==J.promise&&r.common.async===!1)return X(r,{code:G.invalid_type,expected:J.promise,received:r.parsedType}),ge;let n=r.parsedType===J.promise?r.data:Promise.resolve(r.data);return sr(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}};vo.create=(t,e)=>new vo({type:t,typeName:de.ZodPromise,...Te(e)});var jr=class extends Se{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===de.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,o={addIssue:s=>{X(n,s),s.fatal?r.abort():r.dirty()},get path(){return n.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){let s=i.transform(n.data,o);if(n.common.async)return Promise.resolve(s).then(async l=>{if(r.value==="aborted")return ge;let p=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return p.status==="aborted"?ge:p.status==="dirty"||r.value==="dirty"?Bs(p.value):p});{if(r.value==="aborted")return ge;let l=this._def.schema._parseSync({data:s,path:n.path,parent:n});return l.status==="aborted"?ge:l.status==="dirty"||r.value==="dirty"?Bs(l.value):l}}if(i.type==="refinement"){let s=l=>{let p=i.refinement(l,o);if(n.common.async)return Promise.resolve(p);if(p instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){let l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?ge:(l.status==="dirty"&&r.dirty(),s(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?ge:(l.status==="dirty"&&r.dirty(),s(l.value).then(()=>({status:r.value,value:l.value}))))}if(i.type==="transform")if(n.common.async===!1){let s=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Ol(s))return s;let l=i.transform(s.value,o);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(s=>Ol(s)?Promise.resolve(i.transform(s.value,o)).then(l=>({status:r.value,value:l})):s);Oe.assertNever(i)}};jr.create=(t,e,r)=>new jr({schema:t,typeName:de.ZodEffects,effect:e,...Te(r)});jr.createWithPreprocess=(t,e,r)=>new jr({schema:e,effect:{type:"preprocess",transform:t},typeName:de.ZodEffects,...Te(r)});var dn=class extends Se{_parse(e){return this._getType(e)===J.undefined?sr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};dn.create=(t,e)=>new dn({innerType:t,typeName:de.ZodOptional,...Te(e)});var ri=class extends Se{_parse(e){return this._getType(e)===J.null?sr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};ri.create=(t,e)=>new ri({innerType:t,typeName:de.ZodNullable,...Te(e)});var va=class extends Se{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===J.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};va.create=(t,e)=>new va({innerType:t,typeName:de.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Te(e)});var ba=class extends Se{_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Nl(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new $r(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new $r(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};ba.create=(t,e)=>new ba({innerType:t,typeName:de.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Te(e)});var Gs=class extends Se{_parse(e){if(this._getType(e)!==J.nan){let n=this._getOrReturnCtx(e);return X(n,{code:G.invalid_type,expected:J.nan,received:n.parsedType}),ge}return{status:"valid",value:e.data}}};Gs.create=t=>new Gs({typeName:de.ZodNaN,...Te(t)});var Z8=Symbol("zod_brand"),Ll=class extends Se{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},Ul=class t extends Se{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let o=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?ge:o.status==="dirty"?(r.dirty(),Bs(o.value)):this._def.out._parseAsync({data:o.value,path:n.path,parent:n})})();{let i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?ge:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:de.ZodPipeline})}},wa=class extends Se{_parse(e){let r=this._def.innerType._parse(e),n=i=>(Ol(i)&&(i.value=Object.freeze(i.value)),i);return Nl(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}};wa.create=(t,e)=>new wa({innerType:t,typeName:de.ZodReadonly,...Te(e)});function ID(t,e={},r){return t?So.create().superRefine((n,i)=>{var o,s;if(!t(n)){let l=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,p=(s=(o=l.fatal)!==null&&o!==void 0?o:r)!==null&&s!==void 0?s:!0,u=typeof l=="string"?{message:l}:l;i.addIssue({code:"custom",...u,fatal:p})}}):So.create()}var Y8={object:kr.lazycreate},de;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(de||(de={}));var X8=(t,e={message:`Input not instance of ${t.name}`})=>ID(r=>r instanceof t,e),CD=To.create,OD=la.create,J8=Gs.create,e7=pa.create,ND=ua.create,t7=fa.create,r7=$s.create,n7=ma.create,i7=da.create,o7=So.create,a7=Oi.create,s7=In.create,c7=js.create,l7=Ni.create,p7=kr.create,u7=kr.strictCreate,f7=ha.create,m7=Ld.create,d7=ga.create,h7=ti.create,g7=Ud.create,y7=qs.create,x7=zs.create,T7=Hd.create,S7=ya.create,v7=xa.create,b7=Ta.create,w7=Sa.create,_7=vo.create,RD=jr.create,E7=dn.create,R7=ri.create,k7=jr.createWithPreprocess,P7=Ul.create,A7=()=>CD().optional(),M7=()=>OD().optional(),D7=()=>ND().optional(),F7={string:t=>To.create({...t,coerce:!0}),number:t=>la.create({...t,coerce:!0}),boolean:t=>ua.create({...t,coerce:!0}),bigint:t=>pa.create({...t,coerce:!0}),date:t=>fa.create({...t,coerce:!0})},I7=ge,$e=Object.freeze({__proto__:null,defaultErrorMap:Ws,setErrorMap:I8,getErrorMap:Cd,makeIssue:Od,EMPTY_PATH:C8,addIssueToContext:X,ParseStatus:Qt,INVALID:ge,DIRTY:Bs,OK:sr,isAborted:Sv,isDirty:vv,isValid:Ol,isAsync:Nl,get util(){return Oe},get objectUtil(){return Tv},ZodParsedType:J,getParsedType:xo,ZodType:Se,datetimeRegex:DD,ZodString:To,ZodNumber:la,ZodBigInt:pa,ZodBoolean:ua,ZodDate:fa,ZodSymbol:$s,ZodUndefined:ma,ZodNull:da,ZodAny:So,ZodUnknown:Oi,ZodNever:In,ZodVoid:js,ZodArray:Ni,ZodObject:kr,ZodUnion:ha,ZodDiscriminatedUnion:Ld,ZodIntersection:ga,ZodTuple:ti,ZodRecord:Ud,ZodMap:qs,ZodSet:zs,ZodFunction:Hd,ZodLazy:ya,ZodLiteral:xa,ZodEnum:Ta,ZodNativeEnum:Sa,ZodPromise:vo,ZodEffects:jr,ZodTransformer:jr,ZodOptional:dn,ZodNullable:ri,ZodDefault:va,ZodCatch:ba,ZodNaN:Gs,BRAND:Z8,ZodBranded:Ll,ZodPipeline:Ul,ZodReadonly:wa,custom:ID,Schema:Se,ZodSchema:Se,late:Y8,get ZodFirstPartyTypeKind(){return de},coerce:F7,any:o7,array:l7,bigint:e7,boolean:ND,date:t7,discriminatedUnion:m7,effect:RD,enum:b7,function:T7,instanceof:X8,intersection:d7,lazy:S7,literal:v7,map:y7,nan:J8,nativeEnum:w7,never:s7,null:i7,nullable:R7,number:OD,object:p7,oboolean:D7,onumber:M7,optional:E7,ostring:A7,pipeline:P7,preprocess:k7,promise:_7,record:g7,set:x7,strictObject:u7,string:CD,symbol:r7,transformer:RD,tuple:h7,undefined:n7,union:f7,unknown:a7,void:c7,NEVER:I7,ZodIssueCode:G,quotelessJson:F8,ZodError:$r});function LD(t){let e=t.operands.map(wv).join(" ");return`(#${t.operator} ${e})`}function wv(t){return t.type==="capture"?`@${t.name}`:t.value}function UD(t,e){return e.errors.filter(r=>!(r.code==="invalid_type"&&r.path.length===2&&(r.path[1]==="name"||r.path[1]==="value"))).map(r=>C7(t,r))}function C7(t,e){if(e.path.length===0)return e.code==="too_small"?"Too few arguments":e.code==="too_big"?"Too many arguments":e.message;let r=e.message;e.code==="invalid_literal"&&e.path[1]==="type"&&(r=e.expected==="capture"?"Capture names must be prefixed with @":"Expected string, but received capture");let n=e.path[0],i=wv(t[n]);return`Error on argument ${n} (\`${i}\`): ${r}`}var cr=class{allowMissingNode(){return!1}createPredicate(e){let r=this.schema.safeParse(e);return r.success?{success:!0,predicate:n=>{try{let i=this.constructAcceptArgs(r.data,n);return this.run(...i)}catch(i){if(i instanceof Vd&&this.allowMissingNode())return!0;throw i}}}:{success:!1,errors:UD(e,r.error)}}constructAcceptArgs(e,r){return e.map(n=>{if(n.type==="capture"){let i=r.captures.find(o=>o.name===n.name);if(i==null)throw new Vd(n.name);return i}else return n.value})}},Vd=class extends Error{constructor(e){super(`Could not find capture ${e}`)}};var _v=$e.object({type:$e.literal("string"),value:$e.string()}),we={node:$e.object({type:$e.literal("capture"),name:$e.string()}),string:_v,integer:_v.transform((t,e)=>{let r=parseInt(t.value);return isNaN(r)?(e.addIssue({code:$e.ZodIssueCode.custom,message:"Expected an integer"}),$e.NEVER):{type:"integer",value:r}}),boolean:_v.transform((t,e)=>t.value==="true"?{type:"boolean",value:!0}:t.value==="false"?{type:"boolean",value:!1}:(e.addIssue({code:$e.ZodIssueCode.custom,message:"Expected true or false"}),$e.NEVER))};var Ev=class extends cr{constructor(){super(...arguments);this.name="not-type?";this.schema=$e.tuple([we.node,we.string]).rest(we.string)}run({node:r},...n){return!n.includes(r.type)}},Rv=class extends cr{constructor(){super(...arguments);this.name="not-parent-type?";this.schema=$e.tuple([we.node,we.string]).rest(we.string)}run({node:r},...n){return r.parent==null||!n.includes(r.parent.type)}},kv=class extends cr{constructor(){super(...arguments);this.name="is-nth-child?";this.schema=$e.tuple([we.node,we.integer])}run({node:r},n){return r.parent?.children.findIndex(i=>i.id===r.id)===n}},Pv=class extends cr{constructor(){super(...arguments);this.name="has-multiple-children-of-type?";this.schema=$e.tuple([we.node,we.string])}run({node:r},n){return r.children.filter(o=>o.type===n).length>1}},Av=class extends cr{constructor(){super(...arguments);this.name="child-range!";this.schema=$e.union([$e.tuple([we.node,we.integer]),$e.tuple([we.node,we.integer,we.integer]),$e.tuple([we.node,we.integer,we.integer,we.boolean]),$e.tuple([we.node,we.integer,we.integer,we.boolean,we.boolean])])}run(r,n,i,o,s){let{node:{children:l}}=r;n=n<0?l.length+n:n,i=i??-1,i=i<0?l.length+i:i;let p=l[n],u=l[i];return r.range=mn(o?p.endPosition:p.startPosition,s?u.startPosition:u.endPosition),!0}},Mv=class extends cr{constructor(){super(...arguments);this.name="character-range!";this.schema=$e.union([$e.tuple([we.node,we.integer]),$e.tuple([we.node,we.integer,we.integer])])}run(r,n,i){return r.range=new W(r.range.start.translate(void 0,n),r.range.end.translate(void 0,i??0)),!0}},Dv=class extends cr{constructor(){super(...arguments);this.name="shrink-to-match!";this.schema=$e.tuple([we.node,we.string])}run(r,n){let{document:i,range:o}=r,l=i.getText(o).match(new RegExp(n,"ds"));if(l?.index==null)throw Error(`No match for pattern '${n}'`);let[p,u]=l.indices?.groups?.keep??l.indices[0],m=i.offsetAt(o.start);return r.range=new W(i.positionAt(m+p),i.positionAt(m+u)),!0}},Fv=class extends cr{constructor(){super(...arguments);this.name="trim-end!";this.schema=$e.tuple([we.node])}run(r){let{document:n,range:i}=r,o=n.getText(i),s=o.length-o.trimEnd().length;return s>0&&(r.range=new W(i.start,Ok(n,i.end,-s))),!0}},Iv=class extends cr{constructor(){super(...arguments);this.name="allow-multiple!";this.schema=$e.tuple([we.node])}allowMissingNode(){return!0}run(r){return r.allowMultiple=!0,!0}},Cv=class extends cr{constructor(){super(...arguments);this.name="log!";this.schema=$e.tuple([we.node])}run(r){return console.log(`#log!: ${r.name}@${r.range}`),!0}},Ov=class extends cr{constructor(){super(...arguments);this.name="insertion-delimiter!";this.schema=$e.tuple([we.node,we.string])}run(r,n){return r.insertionDelimiter=n,!0}},Nv=class extends cr{constructor(){super(...arguments);this.name="single-or-multi-line-delimiter!";this.schema=$e.tuple([we.node,we.node,we.string,we.string])}run(r,n,i,o){return r.insertionDelimiter=n.range.isSingleLine?i:o,!0}},HD=[new Cv,new Ev,new Fv,new Rv,new kv,new Av,new Mv,new Dv,new Iv,new Ov,new Nv,new Pv];function VD(t){let e=[],r=[];return t.forEach((n,i)=>{let o=[];n.forEach((s,l)=>{let p=HD.find(({name:m})=>m===s.operator);if(p==null){e.push({patternIdx:i,predicateIdx:l,error:`Unknown predicate operator "${s.operator}"`});return}let u=p.createPredicate(s.operands);if(!u.success){e.push(...u.errors.map(m=>({patternIdx:i,predicateIdx:l,error:m})));return}o.push(u.predicate)}),r.push(o)}),{errors:e,predicates:r}}function BD(t,e){let{errors:r,predicates:n}=VD(e.predicates);if(r.length>0){for(let i of r){let o=[`language ${t}`,`pattern ${i.patternIdx}`,`predicate \`${LD(e.predicates[i.patternIdx][i.predicateIdx])}\``].join(", ");at(k().messages,"TreeSitterQuery.parsePredicates",`Error parsing predicate for ${o}: ${i.error}`)}if(k().runMode==="test")throw new Error("Invalid predicates")}return n}function Lv(t){return{row:t.line,column:t.character}}function WD(t){return t.map(e=>({...e,range:Uv(e),name:O7(e)}))}function Uv(t){return t.name.endsWith(".startOf")?t.range.start.toEmptyRange():t.name.endsWith(".endOf")?t.range.end.toEmptyRange():t.range}function O7(t){return t.name.endsWith(".startOf")?t.name.slice(0,-8):t.name.endsWith(".endOf")?t.name.slice(0,-6):t.name}var Hv=class{constructor(){this.documentVersion=-1;this.documentUri="";this.documentLanguageId="";this.matches=[]}clear(){this.documentUri="",this.documentVersion=-1,this.documentLanguageId="",this.startPosition=void 0,this.endPosition=void 0,this.matches=[]}isValid(e,r,n){return this.documentVersion===e.version&&this.documentUri===e.uri.toString()&&this.documentLanguageId===e.languageId&&$D(this.startPosition,r)&&$D(this.endPosition,n)}update(e,r,n,i){this.documentVersion=e.version,this.documentUri=e.uri.toString(),this.documentLanguageId=e.languageId,this.startPosition=r,this.endPosition=n,this.matches=i}get(){return this.matches}};function $D(t,e){return t==null||e==null?t===e:t.isEqual(e)}var _a=new Hv;var Hl=class t{constructor(e,r,n){this.treeSitter=e;this.query=r;this.patternPredicates=n;this.shouldCheckCaptures=k().runMode!=="production"}static create(e,r,n){let i=BD(e,n);return new t(r,n,i)}hasCapture(e){return this.query.captureNames.some(r=>yv(r)===e)}matches(e,r,n){if(!_a.isValid(e,r,n)){let i=this.getAllMatches(e,r,n);_a.update(e,r,n,i)}return _a.get()}getAllMatches(e,r,n){let i=this.getTreeMatches(e,r,n),o=[];for(let s of i){let l=this.createMutableQueryMatch(e,s);this.runPredicates(l)&&o.push(this.createQueryMatch(l))}return o}getTreeMatches(e,r,n){let{rootNode:i}=this.treeSitter.getTree(e);return this.query.matches(i,{startPosition:r!=null?Lv(r):void 0,endPosition:n!=null?Lv(n):void 0})}createMutableQueryMatch(e,r){return{patternIdx:r.pattern,captures:r.captures.map(({name:n,node:i})=>({name:n,node:i,document:e,range:yD(i),insertionDelimiter:void 0,allowMultiple:!1,hasError:()=>_D(i)}))}}runPredicates(e){for(let r of this.patternPredicates[e.patternIdx])if(!r(e))return!1;return!0}createQueryMatch(e){let r=[],n=new Map;for(let i of e.captures){let o=yv(i.name),s=Uv(i),l=n.get(o);if(l==null){let p=[i],u={...i,name:o,range:s,hasError:()=>p.some(m=>m.hasError())};r.push(u),n.set(o,{acc:u,captures:p})}else l.acc.range=l.acc.range.union(s),l.acc.allowMultiple=l.acc.allowMultiple||i.allowMultiple,l.acc.insertionDelimiter=l.acc.insertionDelimiter??i.insertionDelimiter,l.captures.push(i)}return this.shouldCheckCaptures&&this.checkCaptures(Array.from(n.values())),{captures:r}}checkCaptures(e){for(let r of e)if(!wD(WD(r.captures),k().messages)&&k().runMode==="test")throw new Error("Invalid captures")}};var qD="_",N7=[qD,"interior",...Jo],L7=["prefix","leading","trailing"],U7=["startOf","endOf","start.startOf","start.endOf","end.startOf","end.endOf"],H7=["domain","removal","iteration","iteration.domain"],jD=["start","end","start.startOf","start.endOf","end.startOf","end.endOf"],Ea=new Set;for(let t of N7){if(t!==qD){Ea.add(t);for(let e of jD)Ea.add(`${t}.${e}`)}for(let e of L7){Ea.add(`${t}.${e}`);for(let r of U7)Ea.add(`${t}.${e}.${r}`)}for(let e of H7){Ea.add(`${t}.${e}`);for(let r of jD)Ea.add(`${t}.${e}.${r}`)}}var V7=/^(?!;;).*(?<!"\w*)@([\w.]*)/gm;function zD(t,e){let r=e.matchAll(V7),n=[];for(let o of r){let s=o[1];if(!(s.length>1&&!s.includes(".")&&s.startsWith("_"))&&!Ea.has(s)){let l=o.input.slice(0,o.index).split(`
`).length;n.push(`${t}(${l}) invalid capture '@${s}'.`)}}if(n.length===0)return;let i=n.join(`
`);if(at(k().messages,"validateQueryCaptures.invalidCaptureName",i),k().runMode==="test")throw new Error(i)}var Bd=class t{constructor(e){this.query=e}static async create(e,r,n,i){let o=await B7(e,r,`${i}.scm`);if(o==null||!await n.loadLanguage(i))return;let s=n.getLanguage(i).query(o),l=Hl.create(i,n,s);return new t(l)}getScopeHandler(e){if(this.query.hasCapture(e.type))return new md(this.query,e)}getCapturesMap(e){let r=this.query.matches(e),n={};for(let i of r)for(let o of i.captures){let s=o.name;n[s]==null&&(n[s]=[]),n[s].push(o)}return n}};async function B7(t,e,r){let n={[r]:null},i=t.runMode!=="production";for(;Object.values(n).some(o=>o==null);)for(let[o,s]of Object.entries(n)){if(s!=null)continue;let l=await e.readQuery(o);if(l==null){if(o===r)return;if(at(t.messages,"LanguageDefinition.readQueryFileAndImports.queryNotFound",`Could not find imported query file ${o}`),t.runMode==="test")throw new Error("Invalid import statement");l=""}i&&zD(o,l),n[o]=l,an(l,/^[^\S\r\n]*;;?[^\S\r\n]*(?:import|include)[^\S\r\n]+['"]?([\w|/\\.]+)['"]?[^\S\r\n]*$/gm,p=>{let u=p[1];i&&W7(t,o,u,p[0]),n[u]=n[u]??null})}return Object.values(n).join(`
`)}function W7(t,e,r,n){let i=!1;/[/\\]/g.test(r)&&(at(t.messages,"LanguageDefinition.readQueryFileAndImports.invalidImport",`Invalid import statement in ${e}: "${n}". Relative import paths not supported`),i=!0);let o=`;; import ${r}`;if(n!==o&&(at(t.messages,"LanguageDefinition.readQueryFileAndImports.malformedImport",`Malformed import statement in ${e}: "${n}". Import statements must be of the form "${o}"`),i=!0),i&&t.runMode==="test")throw new Error("Invalid import statement")}var GD=Symbol("LANGUAGE_UNDEFINED"),Wd=class t{constructor(e,r,n){this.ide=e;this.treeSitter=r;this.treeSitterQueryProvider=n;this.notifier=new qt;this.languageDefinitions=new Map;this.disposables=[];this.onDidChangeDefinition=this.notifier.registerListener;let i=e.runMode==="test";e.onDidOpenTextDocument(o=>{i&&_a.clear(),this.loadLanguage(o.languageId)}),e.onDidChangeVisibleTextEditors(o=>{o.forEach(({document:s})=>this.loadLanguage(s.languageId))}),this.disposables.push(n.onChanges(()=>this.reloadLanguageDefinitions()))}static async create(e,r,n){let i=new t(e,r,n);return await i.loadAllLanguages(),i}async loadAllLanguages(){let e=this.ide.visibleTextEditors.map(({document:r})=>r.languageId);try{await Promise.all(e.map(r=>this.loadLanguage(r)))}catch(r){if(at(this.ide.messages,"Failed to load language definitions",Mn(r)),this.ide.runMode==="test")throw r}}async loadLanguage(e){if(this.languageDefinitions.has(e))return;let r=await Bd.create(this.ide,this.treeSitterQueryProvider,this.treeSitter,e)??GD;this.languageDefinitions.set(e,r)}async reloadLanguageDefinitions(){this.languageDefinitions.clear(),await this.loadAllLanguages(),_a.clear(),this.notifier.notifyListeners()}get(e){let r=this.languageDefinitions.get(e);if(r==null)throw new Error("Expected language definition entry is missing for languageId "+e);return r===GD?void 0:r}getNodeAtLocation(e,r){return this.treeSitter.getNodeAtLocation(e,r)}dispose(){this.disposables.forEach(e=>e.dispose())}};var $d=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}get nestedStages(){return this.nestedStages_==null&&(this.nestedStages_=this.modifier.modifiers.map(this.modifierStageFactory.create)),this.nestedStages_}run(e){for(let r of this.nestedStages)try{return r.run(e)}catch{continue}throw new Error("No modifier could be applied")}};var Ks=class{constructor(e,r){this.modifierStageFactory=e;this.nestedModifier=r;this.suppressErrors=!1}run(e){if(this.shouldModify(e))try{return this.nestedStage.run(e).map(r=>r.withThatTarget(e))}catch(r){if(!this.suppressErrors)throw r}return[e]}get nestedStage(){return this.nestedStage_==null&&(this.nestedStage_=this.modifierStageFactory.create(this.nestedModifier)),this.nestedStage_}},bo=class extends Ks{constructor(e,r){super(e,r.modifier)}shouldModify(e){return!e.hasExplicitScopeType}},jd=class extends Ks{constructor(r,n,i){super(r,n);this.modificationCondition=i}shouldModify(r){return this.modificationCondition(r)}},Qs=class extends Ks{shouldModify(e){return!e.hasExplicitScopeType&&!e.isImplicit}},Zs=class extends Ks{constructor(r){super(r,{type:"containingScope",scopeType:{type:"token"}});this.suppressErrors=!0}shouldModify(r){return!r.hasExplicitScopeType&&!r.hasExplicitRange&&r.contentRange.isEmpty}};function KD(t,e){return Object.getPrototypeOf(t).constructor===Object.getPrototypeOf(e).constructor}function Ys(t,e,r,n,i){if(e.editor!==r.editor)throw Error("Continuous targets must be in the same editor");if(n&&i&&KD(e,r)){let o=e.maybeCreateRichRangeTarget(t,r);if(o!=null)return o}return e.textualType==="line"&&r.textualType==="line"?new ar({editor:e.editor,isReversed:t,contentRange:Rs(e,r,n,i)}):new Mt({editor:e.editor,isReversed:t,hasExplicitRange:!0,contentRange:Es(e,r,n,i),textualType:n&&i&&e.textualType==="token"&&r.textualType==="token"?"token":"character"})}function qd(t,e,r){if(e===r)return e.getTargets(t);let n=e.getTargets(t),i=r.getTargets(t);if(n.length!==1||i.length!==1)throw Error("Scope range targets must be single-target");let[o]=n,[s]=i,l=s.contentRange.start.isAfterOrEqual(o.contentRange.start),[p,u]=l?[o,s]:[s,o];return[Ys(t,p,u,!0,!0)]}function zd(t,e,r,n){let i=Array.from(t.generateScopes(e,r,"forward",{containment:"required",allowAdjacentScopes:!0,skipAncestorScopes:!0}));switch(i.length){case 0:return;case 1:return i[0];case 2:{let[o,s]=i;return n==="forward"?s:n==="backward"||(t.isPreferredOver?.(o,s)??!1)?o:s}default:throw new Error("Expected no more than 2 scope candidates")}}function Gd(t,e,r=0){let{isReversed:n,editor:i,contentRange:{start:o,end:s}}=t;if(s.isEqual(o)){let u=zd(e,i,o);return u==null||(r>0&&(u=Vv(e,i,u.domain.end,"forward",r,!0)),u==null)?void 0:u.getTargets(n)}let l=Vv(e,i,o,"forward",r);if(l==null)return;if(l.domain.contains(s))return l.getTargets(n);let p=Vv(e,i,s,"backward",r);if(p!=null)return qd(n,l,p)}function Vv(t,e,r,n,i,o=!1){let s=0;for(let l of t.generateScopes(e,r,n,{containment:"required",allowAdjacentScopes:o})){if(s===i)return l;s+=1}}var Xs=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let{scopeType:r,ancestorIndex:n=0}=this.modifier,i=this.scopeHandlerFactory.maybeCreate(r,e.editor.document.languageId);if(i==null)return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e);let o=Gd(e,i,n);if(o==null)throw new ut(r.type);return o}};var Kd=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let{scopeType:r}=this.modifier,{editor:n,isReversed:i}=e,o=this.scopeHandlerFactory.maybeCreate(r,n.document.languageId);if(o==null)return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e);let s;if(e.hasExplicitRange&&(s=QD(o,n,e.contentRange),s.length===1&&s[0].domain.contains(e.contentRange)&&!e.hasExplicitScopeType&&(s=void 0)),s==null&&(s=this.getDefaultIterationRange(o,this.scopeHandlerFactory,e).flatMap(l=>QD(o,n,l))),s.length===0)throw new ut(r.type);return s.flatMap(l=>l.getTargets(i))}getDefaultIterationRange(e,r,n){let i=r.maybeCreate(e.iterationScopeType,n.editor.document.languageId);if(i==null)throw Error("Could not find iteration scope handler");let o=Gd(n,i);if(o==null)throw new ut(`iteration scope for ${e.scopeType.type}`);return o.map(s=>s.contentRange)}};function QD(t,e,{start:r,end:n}){return Array.from(t.generateScopes(e,r,"forward",{distalPosition:n,skipAncestorScopes:!0,allowAdjacentScopes:t.includeAdjacentInEvery}))}var Qd=class{constructor(e){this.modifier=e}run(e){return e.contentText.trim()!==""?[e]:[]}},Zd=class{constructor(e){this.modifier=e}run(e){return e.contentText.trim()===""?[e]:[]}};var Yd=class{run(){return Nm(k()).map(e=>new Im({editor:e.editor,isReversed:e.selection.isReversed,contentRange:e.selection}))}};var Xd=class{constructor(e,r){this.modifierStageFactory=e;this.markStageFactory=r}run(e,{actionFinalStages:r=[],noAutomaticTokenExpansion:n=!1}={}){return new Bv(this.modifierStageFactory,this.markStageFactory,e,{actionFinalStages:r,noAutomaticTokenExpansion:n}).run()}},Bv=class{constructor(e,r,n,i){this.modifierStageFactory=e;this.markStageFactory=r;this.target=n;this.opts=i}run(){return j7(this.processTarget(this.target))}processTarget(e){switch(e.type){case"list":return e.elements.flatMap(r=>this.processTarget(r));case"range":return this.processRangeTarget(e);case"primitive":case"implicit":return this.processPrimitiveTarget(e)}}processRangeTarget(e){let r=this.processPrimitiveTarget(e.anchor),n=this.processPrimitiveTarget(e.active);return wt(r,n).flatMap(([i,o])=>{if(i==null||o==null)throw new Error("AnchorTargets and activeTargets lengths don't match");switch(e.rangeType){case"continuous":return this.processContinuousRangeTarget(i,o,e);case"vertical":return q7(i,o,e.excludeAnchor,e.excludeActive)}})}processContinuousRangeTarget(e,r,{excludeAnchor:n,excludeActive:i,exclusionScopeType:o}){if(o==null)return[wo(e,r,n,i)];let s=jv(e,r);return[wo(n?ZD(this.modifierStageFactory,e,o,s?"backward":"forward"):e,i?ZD(this.modifierStageFactory,r,o,s?"forward":"backward"):r,!1,!1)]}processPrimitiveTarget(e){let r,n,i=!1;e.type==="implicit"?(r=new Yd,n=[]):(r=this.markStageFactory.create(e.mark),n=Wv(this.modifierStageFactory,e.modifiers),i=$7(e));let o=r.run(),[s,l]=this.getPreAndPostStages(i),p=[...s,...n,...this.opts.actionFinalStages,...l];return $v(p,o)}getPreAndPostStages(e){if(this.opts.noAutomaticTokenExpansion)return[[],[]];let r=new Zs(this.modifierStageFactory);return e?[[r],[]]:[[],[r]]}};function $7(t){return t.modifiers.length>0&&t.modifiers.every(({type:e})=>e==="startOf"||e==="endOf")}function Wv(t,e){return e.map(t.create).reverse()}function $v(t,e){return t.forEach(r=>{e=e.flatMap(n=>r.run(n))}),e}function ZD(t,e,r,n){return t.create({type:"relativeScope",scopeType:r,direction:n,length:1,offset:1}).run(e)[0]}function jv(t,e){return t.contentRange.start.isAfter(e.contentRange.start)?!0:t.contentRange.start.isBefore(e.contentRange.start)?!1:t.contentRange.end.isAfter(e.contentRange.end)}function j7(t){return HP(t,(e,r)=>e.isEqual(r),e=>e.contentRange.concise())}function YD(t,e){if(t.editor!==e.editor)throw new Error("Cannot form range between targets in different editors")}function wo(t,e,r=!1,n=!1){YD(t,e);let i=jv(t,e);return Ys(i,i?e:t,i?t:e,!(i?n:r),!(i?r:n))}function q7(t,e,r,n){YD(t,e);let i=jv(t,e),o=i?-1:1,l=(i?t.contentRange.start:t.contentRange.end).line+(r?o:0),u=(i?e.contentRange.start:e.contentRange.end).line-(n?o:0),m=[];for(let d=l;;d+=o){let g=new W(d,t.contentRange.start.character,d,t.contentRange.end.character);if(m.push(new Be({editor:t.editor,isReversed:t.isReversed,contentRange:g,insertionDelimiter:t.insertionDelimiter})),d===u)return m}}var Jd=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=this.getModifierStages(),n=$v(r,[e]),i=this.modifier.type==="extendThroughStartOf";return n.map(o=>new Cm({editor:e.editor,isReversed:i,inputTarget:e,modifiedTarget:o,isHead:i}))}getModifierStages(){return this.modifier.modifiers!=null?Wv(this.modifierStageFactory,this.modifier.modifiers):[new qv(this.modifierStageFactory,this.modifier)]}},qv=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=this.getContainingLine(e),n=this.getContainingPairInterior(e),i=n!=null?r.contentRange.intersection(n.contentRange):null;return i==null||i.isEmpty?[r]:[new Be({editor:e.editor,isReversed:e.isReversed,contentRange:i})]}getContainingPairInterior(e){try{return this.getContaining(e,{type:"surroundingPairInterior",delimiter:"any"})[0]}catch(r){if(r instanceof ut)return;throw r}}getContainingLine(e){return this.getContaining(e,{type:"line"})[0]}getContaining(e,r){return this.modifierStageFactory.create({type:"containingScope",scopeType:r}).run(e)}};var ni=class extends Error{constructor(e,r){let n=r!=null?` #${r+1}`:"";super(`Scope '${e.type}'${n} is out of range`),this.name="OutOfRangeError"}};function XD(t,e,r,n){return zv(t,e,r,n),e.slice(r,n+1)}function zv(t,e,r,n){if(r<0||r>=e.length)throw new ni(t,r);if(n<0||n>=e.length)throw new ni(t,n)}var Js=class{constructor(e,r,n){this.modifierStageFactory=e;this.storedTargets=r;this.modifier=n}run(e){let r=new Zs(this.modifierStageFactory).run(e)[0];switch(this.modifier.type){case"everyScope":return this.handleEveryScope(r);case"ordinalScope":return this.handleOrdinalScope(r,this.modifier);case"relativeScope":return this.handleRelativeScope(r,this.modifier);default:throw Error(`${this.modifier.type} instance scope not supported`)}}handleEveryScope(e){return Array.from(rd(this.getEveryRanges(e),([r,n])=>this.getTargetIterable(e,r,n,"forward")))}handleOrdinalScope(e,{start:r,length:n,scopeType:i}){return this.getEveryRanges(e).flatMap(([o,s])=>JD(i,this.getTargetIterable(e,o,s,r>=0?"forward":"backward"),r>=0?r:-(n+r),n))}handleRelativeScope(e,{direction:r,offset:n,length:i,scopeType:o}){return(this.storedTargets.get("instanceReference")??[e]).flatMap(l=>{let{editor:p}=l,u=r==="forward"?new W(n===0?l.contentRange.start:l.contentRange.end,p.document.range.end):new W(p.document.range.start,n===0?l.contentRange.end:l.contentRange.start);return JD(o,this.getTargetIterable(e,p,u,r),n===0?0:n-1,i)})}getEveryRanges({editor:e}){return this.storedTargets.get("instanceReference")?.map(({editor:r,contentRange:n})=>[r,n])??[[e,e.document.range]]}getTargetIterable(e,r,n,i){let o=Ht(fn(new RegExp(Ur(e.contentText),"g"),r,n,i),l=>new Be({contentRange:l,editor:r,isReversed:!1,textualType:"character"})),s=z7(e);if(s!=null){let l=this.modifierStageFactory.create({type:"containingScope",scopeType:s});return ed(Ht(o,p=>{try{let u=l.run(p);return u.length===1&&u[0].contentRange.isRangeEqual(p.contentRange)?u[0]:null}catch{return null}}),p=>p!=null)}return o}};function z7(t){switch(t.textualType){case"line":case"token":case"word":return{type:t.textualType};default:return null}}function JD(t,e,r,n){Array.from(Dl(r,e));let i=Array.from(Dl(n,e));if(i.length<n)throw new ni(t,r+n-1);return i}var eh=class{constructor(e,r){this.modifierHandlerFactory=e;this.modifier=r}run(e){let r=e.getInterior();return r??this.modifierHandlerFactory.create({type:"containingScope",scopeType:{type:"interior",explicitScopeType:e.hasExplicitScopeType}}).run(e)}},th=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r;this.containingSurroundingPairIfNoBoundaryStage=Gv(this.modifierStageFactory)}run(e){return this.containingSurroundingPairIfNoBoundaryStage.run(e).flatMap(r=>r.getBoundary())}};function Gv(t){return new jd(t,{type:"containingScope",scopeType:{type:"surroundingPair",delimiter:"any"}},e=>e.getBoundary()==null)}var ii={type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:{type:"line"}}},Kv={type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:{type:"token"}}};var rh=class extends Error{constructor(e){super(`Target has no ${e} delimiter.`),this.name="NoDelimiterError"}},nh=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){return this.modifierStageFactory.create(Kv).run(e).map(r=>{let n=r.getLeadingDelimiterTarget();if(n==null)throw new rh("leading");return n})}},ih=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){return this.modifierStageFactory.create(Kv).run(e).map(r=>{let n=r.getTrailingDelimiterTarget();if(n==null)throw new rh("trailing");return n})}};function oh(t,e,r,n,i){return zv(t,r,n,i),n===i?r[n]:Ys(e,r[n],r[i],!0,!0)}function ah(t,e,r){return t.create({type:"everyScope",scopeType:r}).run(e)}var sh=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=ah(this.modifierStageFactory,e,this.modifier.scopeType),n=this.modifier.start+(this.modifier.start<0?r.length:0),i=n+this.modifier.length-1;return this.modifier.isEvery?XD(this.modifier.scopeType,r,n,i):[oh(this.modifier.scopeType,e.isReversed,r,n,i)]}};var ch=class{run(e){let r={editor:e.editor,isReversed:e.isReversed,contentRange:this.getContentRange(e.contentRange)};return[e.isRaw?new fo(r):new Be({...r,textualType:"character"})]}},lh=class extends ch{getContentRange(e){return e.start.toEmptyRange()}},ph=class extends ch{getContentRange(e){return e.end.toEmptyRange()}};var uh=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let{scopeType:r}=this.modifier,n=new Xs(this.modifierStageFactory,this.scopeHandlerFactory,{type:"containingScope",scopeType:r});try{return n.run(e)}catch(s){if(!(s instanceof ut))throw s}let i=this.scopeHandlerFactory.create(this.modifier.scopeType,e.editor.document.languageId),o=G7(e,i);if(o==null)throw Error(`No scopes found for scope type: ${r.type}`);return o}};function G7(t,e){let r=e.generateScopes(t.editor,t.contentRange.start,"backward"),n=e.generateScopes(t.editor,t.contentRange.end,"forward"),{active:i}=t.contentSelection,o=eF(r,i),s=eF(n,i),l=o.distance<s.distance?o.scope:s.scope;return l?.getTargets(t.isReversed)}function eF(t,e){let r,n=1/0;for(let i of t){let o=Math.min(tF(e,i.domain.start),tF(e,i.domain.end));if(o<n)r=i,n=o;else break}return{scope:r,distance:n}}function tF(t,e){return Math.abs(t.line-e.line)*1e4+Math.abs(t.character-e.character)}var fh=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=this.modifierStageFactory.create(this.modifier.anchor),n=this.modifierStageFactory.create(this.modifier.active),i=r.run(e),o=n.run(e);if(i.length!==1||o.length!==1)throw new Error("Expected single anchor and active target");return[wo(i[0],o[0],this.modifier.excludeAnchor,this.modifier.excludeActive)]}};var mh=class{constructor(e){this.modifier=e}run(e){return[new fo({editor:e.editor,contentRange:e.contentRange,isReversed:e.isReversed})]}};var dh=class extends Error{constructor(e,r,n){super(`Requested ${e} ${n}s, but ${r} are already selected.`),this.name="TooFewScopesError"}};function rF(t,e,r){let n=ah(t,Y7(r),e.scopeType),i=Z7(r.contentRange,n);return K7(e,r,n,i)}function K7(t,e,r,n){let i=t.direction==="forward",o=Q7(t,e.contentRange,r,i,n),s=i?o+t.length-1:o-t.length+1,l=Math.min(o,s),p=Math.max(o,s);return[oh(t.scopeType,e.isReversed,r,l,p)]}function Q7(t,e,r,n,i){let o=t.offset===0;if(i==null){let p=n?r.findIndex(u=>u.contentRange.start.isAfter(e.start)):Ko(r,u=>u.contentRange.start.isBefore(e.start));if(p===-1)throw new ni(t.scopeType);return o?p:n?p+t.offset-1:p-t.offset+1}let s=i.start,l=i.end;if(o){let p=l-s+1;if(p>t.length)throw new dh(t.length,p,t.scopeType.type);return n?s:l}return n?l+t.offset:s-t.offset}function Z7(t,e){let r=e.map((i,o)=>({index:o,intersection:i.contentRange.intersection(t)})).filter(i=>i.intersection!=null);if(t.isEmpty){if(r.length===0)return;let i=r.at(-1).index;return{start:i,end:i}}let n=r.filter(i=>!i.intersection.isEmpty).map(i=>i.index);if(n.length!==0)return{start:n[0],end:n.at(-1)}}function Y7(t){return new Mt({editor:t.editor,isReversed:t.isReversed,contentRange:t.contentRange,hasExplicitRange:!1})}var hh=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let r=this.scopeHandlerFactory.maybeCreate(this.modifier.scopeType,e.editor.document.languageId);if(r==null)return rF(this.modifierStageFactory,this.modifier,e);let n=Array.from(this.modifier.offset===0?X7(r,e,this.modifier):J7(r,e,this.modifier));if(n.length<this.modifier.length)throw new ni(this.modifier.scopeType,this.modifier.offset+this.modifier.length-1);let{isReversed:i}=e;return this.modifier.isEvery?n.flatMap(o=>o.getTargets(i)):qd(i,n[0],n[n.length-1])}};function X7(t,e,r){let{editor:n,contentRange:i}=e,{length:o,direction:s}=r,l=zd(t,n,s==="forward"?i.start:i.end,s)?.domain;if(l==null)throw new ut(r.scopeType.type);return Dl(o,t.generateScopes(n,s==="forward"?l.start:l.end,s,{skipAncestorScopes:!0}))}function J7(t,e,r){let{editor:n,contentRange:i}=e,{length:o,direction:s,offset:l}=r,p=s==="forward"?i.end:i.start,u=i.isEmpty?"disallowed":"disallowedIfStrict";return NM(t.generateScopes(n,p,s,{containment:u,skipAncestorScopes:!0}),l-1,l+o-1)}var gh=class{constructor(e){this.modifier=e}run(e){return e.editor.visibleRanges.map(r=>new Be({editor:e.editor,isReversed:e.isReversed,contentRange:r}))}};function nF(...t){return e=>{let r=e;for(let n of t)if(r=n(r),r==null)return null;return r}}function iF(t,...e){return r=>{let n=r,i=[],o=[...e].reverse();for(let s of o){if(n==null||(n=s(n),n==null))return null;i.push(n),n=n.parent??null}return i.reverse()[t]}}var Qv=t=>new pe(t.row,t.column),oF=(...t)=>{let e=["(","{","[","<"],r=[")","}","]",">"],n=e.concat(r),i=(s,l)=>s!=null&&l.includes(s.type),o=s=>s!=null&&!i(s,n);return(s,l)=>{let p,{start:u,end:m}=l;if(i(s.parent,t))return i(s,e)?p=s.nextNamedSibling:i(s,r)?p=s.previousNamedSibling:s.type===","?p=m.isBeforeOrEqual(Qv(s.startPosition))?s.previousNamedSibling:s.nextNamedSibling:p=s,o(p)?p:null;if(i(s,t)){let d=[...s.children],g=d.find(({startPosition:b})=>Qv(b).isAfterOrEqual(m))??null;if(o(g))return g;d.reverse();let x=d.find(({endPosition:b})=>Qv(b).isBeforeOrEqual(u))??null;if(o(x))return x}return null}};function Le(...t){let e=eQ(t);return r=>{for(let n of e){let i=tQ(r,n);if(i!=null)return i}return null}}function eQ(t){return t.map(e=>e.split(".").map(r=>new Zv(r)))}function tQ(t,e){let r=rQ(t,e);!r&&e.length>1&&(r=nQ(t,e));let n=null,i;return r!=null&&([n,i]=r),n!=null&&i!=null&&i.fields!=null&&i.fields.forEach(o=>{n=(o.isIndex?n?.namedChild(o.value):n?.childForFieldName(o.value))??null}),n}function rQ(t,e){let r=null,n=t;for(let i=e.length-1;i>-1;--i){let o=e[i];if(n==null||!o.typeEquals(n)){if(o.isOptional)continue;return null}(!r||!r[1].isImportant)&&(r=[n,o]),n=n.parent}return r}function nQ(t,e){let r=null,n=t;for(let i=0;i<e.length;++i){let o=e[i];if(n==null||!o.typeEquals(n)){if(o.isOptional)continue;return null}if((!r||o.isImportant)&&(r=[n,o]),i+1<e.length){let s=n.namedChildren.filter(l=>e[i+1].typeEquals(l));n=s.length===1?s[0]:null}}return r}var Zv=class{constructor(e){this.anyType=!1;this.notType=!1;this.type=e.match(/^[\w*~]+/)[0],this.type==="*"?this.anyType=!0:this.type.startsWith("~")&&(this.type=this.type.slice(1),this.notType=!0),this.isImportant=e.indexOf("!")>-1,this.isOptional=e.indexOf("?")>-1,this.fields=[...e.matchAll(/(?<=\[).+?(?=\])/g)].map(r=>r[0]).map(r=>/\d+/.test(r)?{isIndex:!0,value:Number(r)}:{isIndex:!1,value:r})}typeEquals(e){return this.anyType?!0:this.notType?this.type!==e.type:this.type===e.type}};function Ne(t,e=Jn){return function(r,n){let i=t(n,r.selection);return i!=null?[{node:i,selection:e(r.editor,i)}]:null}}function yh(t,e=Jn){let r=nF(...t);return function(n,i){let o=r(i);return o==null?null:[{node:o,selection:e(n.editor,o)}]}}function ec(t,e=0,r=Jn){return Ne(iF(e,...t),r)}function Rt(...t){return Ne(Le(...t))}function tc(...t){return Ne(oF(...t),TD())}function rc(...t){return Ne(Le(...t),SD)}function Cn(t,e=[]){return Ne(Le(...t),vD(...e))}function _o(t,e=[]){return Ne(Le(...t),bD(...e))}function gt(...t){return(e,r)=>{for(let n of t){let i=n(e,r);if(i!=null)return i}return null}}function aF(t){return(e,r)=>{throw new Error(`Node type '${t}' not supported`)}}function gn(t){return Object.freeze(Object.fromEntries(ki(t).map(e=>{let r=t[e];return Array.isArray(r)?[e,Rt(...r)]:typeof r=="string"?[e,Rt(r)]:[e,r]})))}function sF(t,e){let r=t.walk();r.gotoFirstChild();let n=[],i=!0;for(;i;)r.currentFieldName===e&&n.push(r.currentNode),i=r.gotoNextSibling();return n}function iQ(t,e){return pF(t,r=>Math.floor(r/2)*2+e)}function cF(t){return iQ(Le("map_lit"),t)}function pF(t,e){return r=>{let n=r.parent;if(n==null||t(n)==null)return null;let i=Vl(n),o=i.findIndex(({id:l})=>l===r.id);if(o===-1)return null;let s=e(o);return s===-1?null:i[s]}}var Vl=t=>sF(t,"value"),Yv="~quoting_lit.list_lit!",uF=Le(Yv);function Xv(...t){return e=>{let r=uF(e);if(r==null)return null;let n=Vl(r)[0];return t.includes(n?.text)?r:null}}function oQ(...t){return Ne(Xv(...t))}var fF=Xv("defn","defmacro"),lF=yh([fF,t=>Vl(t)[1]]),mF=Xv("if","if-let","when","when-let"),aQ=Ne(mF),sQ={collectionKey:Ne(cF(0)),value:Ne(cF(1)),argumentOrParameter:Ne(pF(Le(Yv),t=>t!==0?t:-1)),functionCall:Yv,functionCallee:yh([uF,t=>Vl(t)[0]]),namedFunction:Ne(fF),functionName:lF,name:lF,anonymousFunction:gt(oQ("fn"),Rt("anon_fn_lit")),ifStatement:aQ,condition:yh([mF,t=>Vl(t)[1]])},dF=gn(sQ);var hF=["command","displayed_equation","inline_formula","math_set","block_comment","package_include","class_include","latex_include","biblatex_include","bibtex_include","graphics_include","svg_include","inkscape_include","verbatim_include","import_include","caption","citation","label_definition","label_reference","label_reference_range","label_number","new_command_definition","old_command_definition","let_command_definition","environment_definition","glossary_entry_definition","glossary_entry_reference","acronym_definition","acronym_reference","theorem_definition","color_definition","color_set_definition","color_reference","tikz_library_import"],cQ=["curly_group","curly_group_text","curly_group_text_list","curly_group_path","curly_group_path_list","curly_group_command_name","curly_group_key_value","curly_group_glob_pattern","curly_group_impl","brack_group","brack_group_text","brack_group_argc","brack_group_key_value","mixed_group"],yF=["subparagraph","paragraph","subsubsection","subsection","section","chapter","part"],gF=yF.map(t=>`${t}[text]`),lQ=yF.map(t=>`${t}[command]`);function Jv(t,e){return{selection:new be(t.document.positionAt(e.startIndex+1),t.document.positionAt(e.endIndex-1)),context:{removalRange:new be(t.document.positionAt(e.startIndex),t.document.positionAt(e.endIndex))}}}function pQ(t,e){let r=e.startIndex,n=e.endIndex,i=e.nextNamedSibling;return i!=null&&i.isNamed&&(n=i.endIndex),{selection:new be(t.document.positionAt(r),t.document.positionAt(n)),context:{}}}var uQ={argumentOrParameter:gt(ec([Le(...hF),Le(...cQ)],1,Jv),Ne(Le("begin[name]","end[name]",...gF),Jv)),functionCall:gt(Ne(Le(...hF,"begin","end")),Ne(Le(...lQ),pQ)),name:gt(Ne(Le(...gF),Jv),Rt("begin[name][text]","end[name][text]"))},xF=gn(uQ);var fQ=["alias","begin_block","end_block","if_modifier","rescue_modifier","undef","unless_modifier","until_modifier","while_modifier"],mQ=["array","assignment","begin","binary","break","call","case","case_match","chained_string","character","class","class_variable","complex","conditional","constant","delimited_symbol","element_reference","false","float","for","global_variable","hash","heredoc_beginning","identifier","if","instance_variable","integer","lambda","method","module","next","nil","operator_assignment","parenthesized_statements","range","rational","redo","regex","retry","return","scope_resolution","self","simple_symbol","singleton_class","singleton_method","string","string_array","subshell","super","symbol_array","true","unary","unless","until","while","yield"],dQ=["begin_block","begin","block_body","block","body_statement","do_block","do","else","end_block","ensure","heredoc_beginning","interpolation","lambda","method","parenthesized_statements","program","singleton_class","singleton_method","then"],hQ=["=","+=","-=","*=","**=","/=","||=","|=","&&=","&=","%=",">>=","<<=","^="],gQ=[":","=>"];function yQ(t){if(t.type!=="call")return null;let e=t.childForFieldName("receiver"),r=t.childForFieldName("method"),n=t.childForFieldName("block");return e?.text==="Proc"&&r?.text==="new"||e==null&&r?.text==="lambda"?t:n}var xQ={statement:gt(Rt(...fQ),ec([Le(...dQ),Le(...mQ)],1)),anonymousFunction:gt(Rt("lambda","do_block"),Ne(yQ)),condition:rc("*[condition]"),argumentOrParameter:tc("lambda_parameters","method_parameters","block_parameters","argument_list"),collectionKey:_o(["pair[key]"],[":"]),value:Cn(["pair[value]","assignment[right]","operator_assignment[right]","return.argument_list!"],hQ.concat(gQ))},TF=gn(xQ);function eb(){let t=ei(["else_clause"],[],{includeUnnamedChildren:!0});return function(e,r){let n=t(e,r),i=r.parent;if(i?.type!=="else_clause"){let s=r.childForFieldName("alternative");if(s==null)return n;let{selection:l}=n;return{selection:l,context:{removalRange:new be(l.start,hv(s.namedChild(0).startPosition))}}}let{selection:o}=n;return{selection:new be(hv(i.child(0).startPosition),o.end),context:{}}}}function SF(t){let e=eb();return function(r,n){return n.namedChild(0).type===t?e(r,n.namedChild(0)):Jn(r,n)}}var vF=["associated_type","attribute_item","const_item","empty_statement","enum_item","extern_crate_declaration","foreign_mod_item","impl_item","inner_attribute_item","let_declaration","macro_definition","macro_invocation","function_item","function_signature_item","mod_item","static_item","struct_item","trait_item","type_item","union_item","use_declaration","expression_statement"],TQ=["source_file","block","declaration_list"];function SQ(t){return t.parent?.type==="impl_item"&&t.parent?.childForFieldName("type")?.equals(t)?t:null}function vQ(t,e){return{selection:xD(e.children[1],e.lastNamedChild),context:{leadingDelimiterRange:mn(e.children[0].startPosition,e.children[1].startPosition)}}}function bQ(t){if(t.type!=="block")return null;let{lastNamedChild:e}=t;if(e==null)return null;if(e.type==="expression_statement"){let r=e.child(0);return r.type==="return_expression"?r.child(1):null}return vF.includes(e.type)?null:e.type==="return_expression"?e.child(1):e}var wQ={statement:ec([Le(...TQ),Le(...vF)],1),condition:gt(Rt("while_expression[condition]","if_expression[condition]"),Ne(Le("while_let_expression","if_let_expression"),ei(["while","if","block"],[],{includeUnnamedChildren:!0})),Cn(["*.match_pattern![condition]"],["if"])),type:gt(Cn(["let_declaration[type]","parameter[type]","field_declaration[type]","const_item[type]"],[":"]),Ne(Le("constrained_type_parameter[bounds]","where_predicate[bounds]"),vQ),Cn(["function_item[return_type]"],["->"]),Ne(SQ),Rt("struct_item","trait_item","impl_item","array_type[element]")),argumentOrParameter:tc("arguments","parameters","meta_arguments","type_parameters","ordered_field_declaration_list"),collectionKey:gt(_o(["field_initializer[name]","field_pattern[name]"],[":"])),name:gt(Rt("let_declaration.identifier!","parameter.identifier!","function_item[name]","struct_item[name]","enum_item[name]","enum_variant[name]","trait_item[name]","const_item[name]","meta_item.identifier!","let_declaration[pattern]","constrained_type_parameter[left]","where_predicate[left]","field_declaration[name]"),_o(["field_initializer[name]","field_pattern[name]"],[":"])),value:gt(Cn(["let_declaration[value]"],["="]),Cn(["field_initializer[value]","field_pattern[pattern]"],[":"]),Rt("meta_item[value]","const_item[value]"),Ne(bQ)),attribute:_o(["mutable_specifier","attribute_item"]),branch:gt(Rt("match_arm"),Ne(Le("else_clause"),SF("if_expression")),Ne(Le("if_expression"),eb()))},bF=gn(wQ);var _Q={argumentOrParameter:tc("arguments","parameters","class_parameters","bindings"),branch:Ne(Le("case_clause"),ei([],[],{includeUnnamedChildren:!0})),type:Cn(["upper_bound[type]","lower_bound[type]","view_bound[type]","context_bound[type]","val_definition[type]","val_declaration[type]","var_definition[type]","var_declaration[type]","type_definition","extends_clause[type]","class_parameter[type]","parameter[type]","function_definition[return_type]","typed_pattern[type]","binding[type]"],[":"]),value:Cn(["*[value]","*[default_value]","type_definition[type]"],["="]),condition:rc("*[condition]")},wF=gn(_Q);var EQ=["apply_statement","at_rule","charset_statement","debug_statement","each_statement","error_statement","for_statement","forward_statement","function_statement","if_statement","import_statement","include_statement","keyframes_statement","media_statement","mixin_statement","namespace_statement","placeholder","rule_set","supports_statement","use_statement","warn_statement","while_statement"];function EF(t){return[",","(",")"].includes(t.type)||RF(t)}function RF(t){return t.type==="plain_value"&&t.text==="at"}function _F(t){return e=>{(RF(e)||e.type===",")&&(e=e.previousSibling);let r=t(e);for(;r&&!EF(r);)e=r,r=t(r);return e}}function RQ(t,e){return e.type!=="declaration"?null:e.descendantsOfType("unit").map(r=>({node:r,selection:Jn(t.editor,r)}))}var kQ={condition:rc("condition"),statement:gt(Rt(...EQ),Ne(Le("attribute_selector"),ei([],["attribute_name","string_value"]))),argumentOrParameter:gt(Ne(Le("arguments.*!","parameters.*!"),gv(t=>EF(t),", ",_F(t=>t.previousSibling),_F(t=>t.nextSibling)))),collectionKey:_o(["declaration.property_name!"],[":"]),value:gt(Ne(Le("declaration"),ei(["property_name","variable_name"])),Ne(Le("include_statement","namespace_statement"),ei()),Rt("return_statement.*!","import_statement.*!","attribute_selector.plain_value!","attribute_selector.string_value!","parameter.default_value!")),unit:gt(Rt("integer_value.unit!"),RQ)},tb=gn(kQ);function kF(t,e,r){let n=Bl[t];if(n==null)throw new Nu(t);let i=n[e];return i==null?aF(e):r?PQ(i):i}var Bl={clojure:dF,css:tb,latex:xF,ruby:TF,rust:bF,scala:wF,scss:tb};function PQ(t){return(e,r)=>{let n=t(e,r);return n==null?null:(n=n.flatMap(i=>AQ(i.node,Rm(e,i.selection.selection),t)),n.length>0?n:null)}}function AQ(t,e,r){let n=t.parent;for(;n!=null;){let i=n.namedChildren.flatMap(o=>r(e,o)).filter(o=>o!=null);if(i.length>0)return i;n=n.parent}return[]}var xh=class{constructor(e,r){this.languageDefinitions=e;this.modifier=r}run(e){let r=kF(e.editor.document.languageId,this.modifier.scopeType.type,this.modifier.type==="everyScope"),n=this.languageDefinitions.getNodeAtLocation(e.editor.document,e.contentRange);if(n==null)throw new ut(this.modifier.scopeType.type);let i=MQ(n,r,{editor:e.editor,selection:new be(e.contentRange.start,e.contentRange.end)});if(i==null)throw new ut(this.modifier.scopeType.type);return i.map(o=>{let{containingListDelimiter:s,leadingDelimiterRange:l,trailingDelimiterRange:p,removalRange:u}=o.context;if(u!=null&&(l!=null||p!=null))throw Error("Removal range is mutually exclusive with leading or trailing delimiter range");let{editor:m,selection:d}=o.selection;return new ho({scopeTypeType:this.modifier.scopeType.type,editor:m,isReversed:e.isReversed,contentRange:d,removalRange:u,insertionDelimiter:s,leadingDelimiterRange:l,trailingDelimiterRange:p})})}};function MQ(t,e,r){let n=t;for(;n!=null;){let i=e(r,n);if(i!=null)return i.map(o=>o.selection).map(o=>({selection:Rm(r,o.selection),context:o.context}));n=n.parent}return null}var nc=class{constructor(e,r,n){this.languageDefinitions=e;this.storedTargets=r;this.scopeHandlerFactory=n;this.create=this.create.bind(this)}create(e){switch(e.type){case"startOf":return new lh;case"endOf":return new ph;case"extendThroughStartOf":case"extendThroughEndOf":return new Jd(this,e);case"toRawSelection":return new mh(e);case"interiorOnly":return new eh(this,e);case"excludeInterior":return new th(this,e);case"leading":return new nh(this,e);case"trailing":return new ih(this,e);case"visible":return new gh(e);case"containingScope":return new Xs(this,this.scopeHandlerFactory,e);case"preferredScope":return new uh(this,this.scopeHandlerFactory,e);case"everyScope":return e.scopeType.type==="instance"?new Js(this,this.storedTargets,e):new Kd(this,this.scopeHandlerFactory,e);case"ordinalScope":return e.scopeType.type==="instance"?new Js(this,this.storedTargets,e):new sh(this,e);case"relativeScope":return e.scopeType.type==="instance"?new Js(this,this.storedTargets,e):new hh(this,this.scopeHandlerFactory,e);case"keepContentFilter":return new Qd(e);case"keepEmptyFilter":return new Zd(e);case"cascading":return new $d(this,e);case"modifyIfUntyped":return new bo(this,e);case"range":return new fh(this,e);case"inferPreviousMark":throw Error(`Unexpected modifier '${e.type}'; it should have been removed during inference`);default:{let r=e,{type:n}=e;throw new Error(`Unknown modifier: ${n}`)}}}getLegacyScopeStage(e){switch(e.scopeType.type){default:return new xh(this.languageDefinitions,e)}}};async function PF(t,e,r){let n=t.registerReplaceEditList(e.document,r.filter(o=>o.isReplace)),i=await e.edit(r);return n(),i}async function Pe({rangeUpdater:t,editor:e,selections:r,preserveCursorSelections:n,...i}){let o=ki(r),s=o.map(u=>{let m=r[u],d=DQ(m);return AF(e.document,d.selections,d.behavior)});n||s.push(AF(e.document,e.selections,1));let l=await("edits"in i?CQ(t,e,i.edits,s):MF(t,i.callback,e.document,s));return n||await e.setSelections(l.pop()),Object.fromEntries(o.map((u,m)=>[u,l[m]]))}function AF(t,e,r){return e.map(n=>FQ(t,n,n instanceof be?!n.isReversed:!0,r))}function DQ(t){return"selections"in t?t:{selections:t,behavior:1}}function FQ(t,e,r,n){return{range:e,isForward:r,expansionBehavior:{start:{type:n===1||n===3?"closed":"open"},end:{type:n===1||n===2?"closed":"open"}},offsets:{start:t.offsetAt(e.start),end:t.offsetAt(e.end)},text:t.getText(e)}}function IQ(t){return t.map(e=>e.map(({range:{start:r,end:n},isForward:i})=>i?new be(r,n):new be(n,r)))}async function MF(t,e,r,n){let i=t.registerRangeInfoList(r,Je(n));return await e(),i(),IQ(n)}async function CQ(t,e,r,n){return await MF(t,async()=>{if(!await PF(t,e,r))throw new Error("Could not apply edits")},e.document,n)}var Th=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e){return await De(k(),e,"pendingModification0"),{thatSelections:Je(await rt(e,async(n,i)=>{let o=i.map(({contentRange:u})=>u),s=OQ(n,o),l=k().getEditableTextEditor(n),{contentRanges:p}=await Pe({rangeUpdater:this.rangeUpdater,editor:l,edits:s,selections:{contentRanges:o}});return wt(i,p).map(([u,m])=>({editor:u.editor,selection:m.toSelection(u.isReversed)}))}))}}};function OQ(t,e){let{document:r}=t,n=[];for(let i of e){let o=i.start,s=r.lineAt(o),l=s.text.slice(0,s.rangeTrimmed?.start?.character??s.range.start.character),p=s.text.slice(0,o.character).search(/\s+$/),u=p>-1?new W(new pe(s.lineNumber,p),o):o.toEmptyRange();n.push({range:u,text:`
`+l,isReplace:!u.isEmpty})}return n}function Sh(t){return t.length<2?t:tM(t).flatMap(([e,r])=>{if(r.length<2)return r;let n=[...r];n.sort((o,s)=>o.contentRange.start.compareTo(s.contentRange.start));let i=!0;for(;i;)[n,i]=NQ(n);return n})}function NQ(t){if(t.length<2)return[t,!1];let e=[],r=[];return t.forEach(n=>{r.length&&!LQ(r[r.length-1],n)?(e.push(DF(r)),r=[n]):r.push(n)}),e.push(DF(r)),[e,e.length!==t.length]}function DF(t){if(t.length===1)return t[0];let e=t[0],r=t[t.length-1];return wo(e,r)}function LQ(t,e){return!!t.getRemovalRange().intersection(e.getRemovalRange())}var Wl=class{constructor(e,r){this.rangeUpdater=e;this.type=r}async decorateTargets(e,r){await Promise.all([De(k(),e,this.decoration.sourceStyle,this.decoration.getSourceRangeCallback),De(k(),r,this.decoration.destinationStyle)])}getEditsBringMove(e,r){let n=[],i=[],o=e.length!==r.length&&r.length===1;return e.forEach((s,l)=>{let p=r[l];if((s==null||p==null)&&!o)throw new Error("Targets must have same number of args");if(p!=null){let u;o?u=e.map((m,d)=>{let g=m.contentText,x=(p.isRaw?null:p.insertionDelimiter)??(m.isRaw?null:m.insertionDelimiter);return d>0&&x!=null?x+g:g}).join(""):u=s.contentText,i.push({edit:p.constructChangeEdit(u),editor:p.editor,originalTarget:p.target,isSource:!1})}else p=r[0];n.includes(s)||(n.push(s),this.type==="bring"&&i.push({edit:s.toDestination("to").constructChangeEdit(p.target.contentText),editor:s.editor,originalTarget:s,isSource:!0}))}),this.type==="move"&&Sh(n).forEach(s=>{i.push({edit:s.constructRemovalEdit(),editor:s.editor,originalTarget:s,isSource:!0})}),i}async performEditsAndComputeThatMark(e){return Je(await Fi(e,r=>r.editor,async(r,n)=>{let i=this.type!=="bring"?n:n.filter(({isSource:x})=>!x),o=this.type==="swap"?[]:n.filter(({isSource:x})=>x),s=this.type==="swap"?n:n.filter(({isSource:x})=>!x),l=o.map(({edit:x})=>x.range),p=s.map(({edit:x})=>x.range),u=k().getEditableTextEditor(r),{sourceEditRanges:m,destinationEditRanges:d}=await Pe({rangeUpdater:this.rangeUpdater,editor:u,edits:i.map(({edit:x})=>x),selections:{sourceEditRanges:l,destinationEditRanges:{selections:p,behavior:0}}}),g=[...this.getMarks(o,m),...this.getMarks(s,d)];return g.sort((x,b)=>n.findIndex(v=>v.originalTarget===x.target)-n.findIndex(v=>v.originalTarget===b.target)),g}))}getMarks(e,r){return e.map((n,i)=>{let o=r[i],s=n.edit.updateRange(o),l=n.originalTarget;return{editor:n.editor,selection:s.toSelection(l.isReversed),isSource:n.isSource,target:l}})}async decorateThatMark(e){let r=n=>pn(n,e.find(i=>i.target===n).selection);return Promise.all([De(k(),e.filter(({isSource:n})=>n).map(({target:n})=>n),this.decoration.sourceStyle,r),De(k(),e.filter(({isSource:n})=>!n).map(({target:n})=>n),this.decoration.destinationStyle,r)])}calculateMarksBringMove(e){return{thatMark:e.filter(({isSource:r})=>!r),sourceMark:e.filter(({isSource:r})=>r)}}};function FF(t,e){return t.length===1?Array(e.length).fill(t[0]):t}var vh=class extends Wl{constructor(r){super(r,"bring");this.decoration={sourceStyle:"referenced",destinationStyle:"pendingModification0"};this.run=this.run.bind(this)}async run(r,n){r=FF(r,n),await this.decorateTargets(r,n.map(p=>p.target));let i=this.getEditsBringMove(r,n),o=await this.performEditsAndComputeThatMark(i),{thatMark:s,sourceMark:l}=this.calculateMarksBringMove(o);return await this.decorateThatMark(s),{thatSelections:s,sourceSelections:l}}},bh=class extends Wl{constructor(r){super(r,"move");this.decoration={sourceStyle:"pendingDelete",destinationStyle:"pendingModification0",getSourceRangeCallback:UQ};this.run=this.run.bind(this)}async run(r,n){r=FF(r,n),await this.decorateTargets(r,n.map(p=>p.target));let i=this.getEditsBringMove(r,n),o=await this.performEditsAndComputeThatMark(i),{thatMark:s,sourceMark:l}=this.calculateMarksBringMove(o);return await this.decorateThatMark(s),{thatSelections:s,sourceSelections:l}}},wh=class extends Wl{constructor(r){super(r,"swap");this.decoration={sourceStyle:"pendingModification1",destinationStyle:"pendingModification0"};this.run=this.run.bind(this)}async run(r,n){await this.decorateTargets(r,n);let i=this.getEditsSwap(r,n),o=await this.performEditsAndComputeThatMark(i);return await this.decorateThatMark(o),{thatSelections:o,sourceSelections:[]}}getEditsSwap(r,n){let i=[];return r.forEach((o,s)=>{let l=n[s];if(o==null||l==null)throw new Error("Targets must have same number of args");i.push({edit:l.toDestination("to").constructChangeEdit(o.contentText),editor:l.editor,originalTarget:l,isSource:!1}),i.push({edit:o.toDestination("to").constructChangeEdit(l.contentText),editor:o.editor,originalTarget:o,isSource:!0})}),i}};function UQ(t){return t.getRemovalHighlightRange()}var $l=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e,r){_r(e);let{returnValue:n}=await this.actions.getText.run(e,{showDecorations:!1}),{thatSelections:i}=await this.actions.wrapWithPairedDelimiter.run(r,n[0]+"(",")");return{thatSelections:i}}};var jl=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){let r=Tt(e),n=e.map(o=>new Be({editor:o.editor,isReversed:o.isReversed,contentRange:o.contentRange})),{thatTargets:i}=await this.actions.remove.run(n);return i!=null&&await k().getEditableTextEditor(r).setSelections(i.map(({contentSelection:o})=>o),{focusEditor:!0}),{thatTargets:i}}};var ic=t=>new Mt({editor:t.editor,isReversed:t.selection.isReversed,contentRange:t.selection,hasExplicitRange:!0});var oc=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e,r){r.showDecorations&&await De(k(),e,"referenced"),r.ensureSingleEditor&&Tt(e),r.ensureSingleTarget&&_r(e);let n=k().activeEditableTextEditor,i=r.setSelection?eM:rt,o=Je(await i(e,(s,l)=>this.runForEditor(r,s,l)));return r.setSelection&&r.restoreSelection&&n!=null&&!n.isActive&&await n.focus(),{thatTargets:o}}async runForEditor(e,r,n){let i=k().getEditableTextEditor(r),o=r.selections,s=r.document.version,l=n.map(m=>m.contentSelection);e.setSelection&&await i.setSelections(l,{focusEditor:!0,revealRange:!1});let{originalSelections:p,targetSelections:u}=await Pe({rangeUpdater:this.rangeUpdater,editor:i,callback:()=>e.callback(i,n),preserveCursorSelections:!0,selections:{originalSelections:o,targetSelections:l}});return e.setSelection&&e.restoreSelection&&await i.setSelections(p),r.document.version===s?n:u.map(m=>ic({editor:r,selection:m}))}};var St=class{constructor(e){this.ensureSingleEditor=!1;this.ensureSingleTarget=!1;this.restoreSelection=!0;this.showDecorations=!0;this.callbackAction=new oc(e),this.run=this.run.bind(this)}async run(e,{showDecorations:r}={}){let n=k().capabilities.commands[this.command];if(n==null)throw Error(`Action ${this.command} is not supported by your ide`);let{acceptsLocation:i}=n;return this.callbackAction.run(e,{callback:(o,s)=>HQ(o,i?s.map(l=>l.contentRange):void 0,this.command),setSelection:!i,ensureSingleEditor:this.ensureSingleEditor,ensureSingleTarget:this.ensureSingleTarget,restoreSelection:this.restoreSelection,showDecorations:r??this.showDecorations})}},_h=class extends St{constructor(){super(...arguments);this.command="clipboardCopy";this.ensureSingleEditor=!0}},Eh=class extends St{constructor(){super(...arguments);this.command="toggleLineComment"}},Rh=class extends St{constructor(){super(...arguments);this.command="indentLine"}},kh=class extends St{constructor(){super(...arguments);this.command="outdentLine"}},Ph=class extends St{constructor(){super(...arguments);this.command="fold"}},Ah=class extends St{constructor(){super(...arguments);this.command="unfold"}},Mh=class extends St{constructor(){super(...arguments);this.command="rename";this.ensureSingleTarget=!0}},Dh=class extends St{constructor(){super(...arguments);this.command="showReferences";this.ensureSingleTarget=!0}},Fh=class extends St{constructor(){super(...arguments);this.command="quickFix";this.ensureSingleTarget=!0}},Ih=class extends St{constructor(){super(...arguments);this.command="revealDefinition";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Ch=class extends St{constructor(){super(...arguments);this.command="revealTypeDefinition";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Oh=class extends St{constructor(){super(...arguments);this.command="showHover";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Nh=class extends St{constructor(){super(...arguments);this.command="showDebugHover";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Lh=class extends St{constructor(){super(...arguments);this.command="extractVariable";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Uh=class extends St{constructor(){super(...arguments);this.command="gitAccept";this.ensureSingleTarget=!0}},Hh=class extends St{constructor(){super(...arguments);this.command="gitRevert";this.ensureSingleTarget=!0}},Vh=class extends St{constructor(){super(...arguments);this.command="gitStage";this.ensureSingleTarget=!0}},Bh=class extends St{constructor(){super(...arguments);this.command="gitUnstage";this.ensureSingleTarget=!0}};function HQ(t,e,r){switch(r){case"toggleLineComment":return t.toggleLineComment(e);case"indentLine":return t.indentLine(e);case"outdentLine":return t.outdentLine(e);case"clipboardCopy":return t.clipboardCopy(e);case"fold":return t.fold(e);case"unfold":return t.unfold(e);case"insertLineAfter":return t.insertLineAfter(e);case"rename":return t.rename(e?.[0]);case"showReferences":return t.showReferences(e?.[0]);case"quickFix":return t.quickFix(e?.[0]);case"revealDefinition":return t.revealDefinition(e?.[0]);case"revealTypeDefinition":return t.revealTypeDefinition(e?.[0]);case"showHover":return t.showHover(e?.[0]);case"showDebugHover":return t.showDebugHover(e?.[0]);case"extractVariable":return t.extractVariable(e?.[0]);case"gitAccept":return t.gitAccept(e?.[0]);case"gitRevert":return t.gitRevert(e?.[0]);case"gitStage":return t.gitStage(e?.[0]);case"gitUnstage":return t.gitUnstage(e?.[0]);case"highlight":throw Error("Highlight command not supported as simple action")}}var Wh=class{constructor(e,r){this.actions=e;this.rangeUpdater=r;this.run=this.run.bind(this)}async run(e,r={showDecorations:!0}){if(k().capabilities.commands.clipboardCopy!=null)return new _h(this.rangeUpdater).run(e,r);r.showDecorations&&await De(k(),e,"referenced");let n=e.map(i=>i.contentText).join(`
`);return await k().clipboard.writeText(n),{thatTargets:e}}};var $h=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){await k().flashRanges(e.flatMap(VQ));let r={showDecorations:!1};await this.actions.copyToClipboard.run(e,r);let{thatTargets:n}=await this.actions.remove.run(e,r);return{thatTargets:n}}};function VQ(t){let{editor:e,contentRange:r}=t,n=t.getRemovalHighlightRange(),i=[{editor:e,range:ir(r),style:"referenced"}];return n.type==="line"?i.push({editor:e,range:n,style:"pendingDelete"}):i.push(...BQ(r,n).map(o=>({editor:e,range:ir(o),style:"pendingDelete"}))),i}function BQ(t,e){let{start:r,end:n}=t,{start:i,end:o}=e,s=[];return i.isBefore(r)&&s.push(new W(i,r)),o.isAfter(n)&&s.push(new W(n,o)),s}var ql=class{constructor(){this.run=this.run.bind(this)}async run(e){return await rt(e,async(r,n)=>{let i=r.selections.filter(o=>!n.some(s=>{let l=s.contentRange.intersection(o);return l&&(!l.isEmpty||o.isEmpty)}));if(i.length===0)throw new rb;await k().getEditableTextEditor(r).setSelections(i)}),{thatTargets:e}}},rb=class extends Error{constructor(){super("Can't deselect every selection. At least one is required"),this.name="SelectionRequiredError"}};async function IF(t,e,r,n){let i=r.destinations.map((b,v)=>{if(n||r.actionTypes[v]==="edit")return{destination:b,index:v}}).filter(b=>!!b);if(i.length===0)return r;let o=i.map(b=>b.destination.constructChangeEdit("")),s=r.cursorRanges.map((b,v)=>({range:b,index:v})).filter(({range:b})=>b!=null),l=s.map(({index:b})=>b),p=s.map(({range:b})=>b),u=o.map(b=>b.range),{thatRanges:m,cursorRanges:d,editRanges:g}=await Pe({rangeUpdater:t,editor:e,edits:o,preserveCursorSelections:!0,selections:{thatRanges:r.thatRanges,cursorRanges:p,editRanges:{selections:u,behavior:0}}}),x=[...r.cursorRanges];return wt(l,d).forEach(([b,v])=>{x[b]=v}),i.forEach((b,v)=>{let F=o[v].updateRange(g[v]);x[b.index]=F}),{destinations:r.destinations,actionTypes:r.actionTypes,thatRanges:m,cursorRanges:x}}async function CF({acceptsLocation:t},e,r,n){let i=n.destinations.map((d,g)=>{if(n.actionTypes[g]==="insertLineAfter")return{destination:d,index:g}}).filter(d=>!!d);if(i.length===0)return n;let o=i.map(({destination:d})=>d.contentRange),s=n.destinations.map(({contentRange:d})=>d),l=async()=>{t?await r.insertLineAfter(o):(await r.setSelections(o.map(d=>d.toSelection(!1))),await r.focus(),await r.insertLineAfter())},{targetRanges:p,thatRanges:u}=await Pe({rangeUpdater:e,editor:r,callback:l,preserveCursorSelections:!0,selections:{targetRanges:s,thatRanges:n.thatRanges}}),m=[...n.cursorRanges];return i.forEach((d,g)=>{m[d.index]=r.selections[g]}),{destinations:n.destinations.map((d,g)=>d.withTarget(d.target.withContentRange(p[g]))),actionTypes:n.actionTypes,thatRanges:u,cursorRanges:m}}async function OF(t,e){let r=_r(e),n=k().getEditableTextEditor(r.editor),i=r.insertionMode==="before";if(r.insertionMode==="to")throw Error(`Unsupported insertion mode '${r.insertionMode}' for notebookcapell`);return await t.setSelection.run([r.target]),i?await n.editNewNotebookCellAbove():await n.editNewNotebookCellBelow(),{thatSelections:ln([r.target.thatTarget])}}var jh=class{constructor(e,r){this.rangeUpdater=e;this.actions=r;this.run=this.run.bind(this)}async run(e){if(e.some(({target:l})=>l.isNotebookCell))return OF(this.actions,e);let r=k().getEditableTextEditor(Tt(e)),n={destinations:e,actionTypes:e.map(l=>l.getEditNewActionType()),thatRanges:e.map(({target:l})=>l.thatTarget.contentRange),cursorRanges:new Array(e.length).fill(void 0)},i=k().capabilities.commands.insertLineAfter,o=i!=null;o&&(n=await CF(i,this.rangeUpdater,r,n)),n=await IF(this.rangeUpdater,r,n,!o);let s=n.destinations.map((l,p)=>{let u=n.cursorRanges[p];if(u==null)throw Error("Cursor range is undefined for destination");return u.toSelection(l.target.isReversed)});return await r.setSelections(s,{focusEditor:!0}),{thatSelections:ln(n.destinations.map(l=>l.target),n.thatRanges)}}};var qh=class{constructor(e,r){this.actions=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(ii)]}run(e){return this.actions.editNew.run(e.map(r=>r.toDestination(this.insertionMode)))}},zh=class extends qh{constructor(){super(...arguments);this.insertionMode="before"}},Gh=class extends qh{constructor(){super(...arguments);this.insertionMode="after"}};var zl=class{constructor(e){this.callbackAction=new oc(e),this.run=this.run.bind(this)}async run(e,r,{commandArgs:n,ensureSingleEditor:i,ensureSingleTarget:o,restoreSelection:s,showDecorations:l}={}){let p=n??[];return this.callbackAction.run(e,{callback:()=>k().executeCommand(r,...p),setSelection:!0,ensureSingleEditor:i??!1,ensureSingleTarget:o??!1,restoreSelection:s??!0,showDecorations:l??!0})}};var Kh=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){_r(e);let{returnValue:r,thatTargets:n}=await this.actions.getText.run(e),[i]=r,o;return i.length>200?(o=i.substring(0,200),rl(k().messages,"truncatedSearchText","Search text is longer than 200 characters; truncating")):o=i,await this.find(o),{thatTargets:n}}},Qh=class extends Kh{find(e){return k().findInDocument(e)}},Zh=class extends Kh{find(e){return k().findInWorkspace(e)}};var Yh=class{constructor(){this.run=this.run.bind(this)}async run(e){return await De(k(),e,"referenced"),{thatTargets:e}}};var ac=class{constructor(e){this.options=e;this.run=this.run.bind(this)}async run(e){let r=_r(e);return await De(k(),e,"referenced"),await k().getEditableTextEditor(r.editor).openLink(r.contentRange,this.options),{thatSelections:ln(e)}}};function NF(t){let e=t.split(/^---$/m),r={snippets:[]};for(let n of e){let i=n.match(/^-$/m),o=i!=null?n.slice(0,i.index):n,s=i!=null?n.slice(i.index+i[0].length):null,l=s?qQ(s):null,p=WQ(o);if(l!=null){p==null&&(p={variables:[]});let{variables:u,...m}=p;r.snippets.push({...m,body:l,variables:u})}else if(p!=null){if(r.header!=null||r.snippets.length!==0)throw Error("Header snippet must be first in file");r.header=p}}return r}function WQ(t){let e={variables:[]},r=$Q(t);if(Object.keys(r).length===0)return;let n={};for(let[i,o]of Object.entries(r))switch(i){case"name":e.name=o;break;case"description":e.description=o;break;case"phrase":e.phrases=Gl(o);break;case"insertionScope":e.insertionScopes=Gl(o);break;case"language":e.languages=Gl(o);break;default:if(!i.startsWith("$"))throw Error(`Invalid key '${i}'`);n[i]=o}return e.variables=jQ(n),e}function $Q(t){let e=t.split(/\r?\n/).map(n=>n.trim()).filter(Boolean),r={};for(let n of e){let i=n.split(":");if(i.length!==2)throw Error(`Invalid line '${n}'`);let o=i[0].trim(),s=i[1].trim();if(o.length===0||s.length===0)throw Error(`Invalid line '${n}'`);if(r[o]!=null)throw Error(`Duplicate key '${o}' in '${t}'`);r[o]=s}return r}function jQ(t){let e={},r=n=>(e[n]==null&&(e[n]={name:n}),e[n]);for(let[n,i]of Object.entries(t)){let o=n.split(".");if(o.length!==2)throw Error(`Invalid variable key '${n}'`);let s=o[0].slice(1);switch(o[1]){case"insertionFormatter":r(s).insertionFormatters=Gl(i);break;case"wrapperPhrase":r(s).wrapperPhrases=Gl(i);break;case"wrapperScope":r(s).wrapperScope=i;break;default:throw Error(`Invalid variable key '${n}'`)}}return Object.values(e)}function qQ(t){let e=t.match(/^[ \t]*\S/m);if(e?.index!=null)return t.slice(e.index).trimEnd().split(/\r?\n/).map(r=>r.trimEnd())}function Gl(t){return t.split("|").map(e=>e.trim())}function UF(t){let e=[];t.header!=null&&e.push(LF(t.header)),e.push(...t.snippets.map(LF));let r=e.filter(Boolean).join(`
---

`);return r?r+`
---
`:""}function LF(t){let e=[Eo("name",t.name),Eo("description",t.description),Eo("language",t.languages),Eo("phrase",t.phrases),Eo("insertionScope",t.insertionScopes)].filter(Boolean);return t.variables.length>0&&(e.length>0&&e.push(""),e.push(...zQ(t.variables))),"body"in t&&e.push("-",...t.body),e.join(`
`)}function zQ(t){let e=[...t];return e.sort(GQ),e.flatMap(r=>[Eo(`$${r.name}.insertionFormatter`,r.insertionFormatters),Eo(`$${r.name}.wrapperPhrase`,r.wrapperPhrases),Eo(`$${r.name}.wrapperScope`,r.wrapperScope)]).filter(Boolean)}function Eo(t,e){return e==null?"":Array.isArray(e)?`${t}: ${e.join(" | ")}`:`${t}: ${e}`}function GQ(t,e){return t.name==="0"?1:e.name==="0"?-1:t.name.localeCompare(e.name)}function HF(t,e){let r=[],n=0,i=null,[o,...s]=t.split(/\r?\n/);return[{text:e+o,startIndex:e.length},...s.map(p=>({text:p,startIndex:0}))].forEach(({text:p,startIndex:u})=>{let m=p.match(/^\s*/)?.[0]??"",d=m.length;i!=null&&(m.length>i.length?n++:m.length<i.length&&n--),i=m;let g=Math.max(d,u),x=FT("	",n),b=p.slice(g);r.push(x+b)}),r}function VF(t,e){let r=CT(e,o=>o.offsets.start),n="",i=0;for(let o of r)n+=t.slice(i,o.offsets.start)+o.text,i=o.offsets.end;return n+=t.slice(i),n}var sc=class{constructor(e){this.snippets=e;this.run=this.run.bind(this)}async run(e,r,n){if(r==null)throw new Error("Directory argument is required for GenerateSnippet action. Please update Cursorless Talon");let i=_r(e),o=i.editor;if(De(k(),e,"referenced"),n==null&&(n=await k().showInputBox({prompt:"Name of snippet",placeHolder:"helloWorld"}),!n))return{};let s=o.document.offsetAt(i.contentRange.start),l=QQ(o,i.contentRange),p=l.map((ie,se)=>({offsets:{start:o.document.offsetAt(ie.start)-s,end:o.document.offsetAt(ie.end)-s},name:se===l.length-1?"0":`${se+1}`})),u=o.document.getText(new W(i.contentRange.start.with(void 0,0),i.contentRange.start)),m=o.document.getText(i.contentRange),d=VF(m,[...an(m,/\$|\\/g,ie=>({offsets:{start:ie.index,end:ie.index+ie[0].length},text:`\\${ie[0]}`})),...p.map(({offsets:ie,name:se})=>({offsets:ie,text:`$${se}`}))]),g=HF(d,u),x,b={snippets:[]};k().runMode==="test"?x=k().getEditableTextEditor(o):(x=k().getEditableTextEditor(await this.snippets.openNewSnippetFile(n,r)),b=NF(x.document.getText())),await x.setSelections([x.document.range.toSelection(!1)]);let v=1,{header:I}=b,F=b.header?.phrases!=null?void 0:[`${nb}${v++}`],U=ie=>{let se=I?.variables?.some(it=>it.name===ie.name&&it.wrapperPhrases!=null);return{name:ie.name,wrapperPhrases:se?void 0:[`${nb}${v++}`]}},K={name:I?.name===n?void 0:n,phrases:F,languages:KQ(o,I),body:g,variables:p.map(U)};b.snippets.push(K);let ne=UF(b).replace(/\$/g,"\\$").replaceAll(nb,"$");return await x.insertSnippet(ne),{thatSelections:e.map(({editor:ie,contentSelection:se})=>({editor:ie,selection:se}))}}};function KQ(t,e){if(!e?.languages?.includes(t.document.languageId))return[t.document.languageId]}function QQ(t,e){let r=t.selections.filter(n=>e.contains(n));return r.sort((n,i)=>n.start.compareTo(i.start)),r}var nb="PLACEHOLDER_VFA77zcbLD6wXNmfMAay";var Kl=class{constructor(){this.run=this.run.bind(this)}async run(e){return{returnValue:e.map(({contentRange:r})=>({contentRange:r})),thatTargets:e}}};var Ql=class{constructor(){this.run=this.run.bind(this)}async run(e,{showDecorations:r=!0,ensureSingleTarget:n=!1}={}){return r&&await De(k(),e,"referenced"),n&&_r(e),{returnValue:e.map(i=>i.contentText),thatTargets:e}}};var Zl=class{constructor(){this.run=this.run.bind(this)}async run(e,r){if(k().capabilities.commands.highlight==null)throw Error("The highlight action is not supported by your ide");return e.length===0?await Promise.all(k().visibleTextEditors.map(n=>k().setHighlightRanges(r,n,[]))):await rt(e,(n,i)=>k().setHighlightRanges(r,n,i.map(o=>pn(o,o.contentRange)))),{thatTargets:e}}};var Xh=class{constructor(e,r){this.rangeUpdater=e;this.isIndent=r;this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e){return this.hasCapability()?this.runSimpleCommandAction(e):(await De(k(),e,"pendingModification0"),{thatTargets:Je(await rt(e,this.runForEditor))})}hasCapability(){return this.isIndent?k().capabilities.commands.indentLine!=null:k().capabilities.commands.outdentLine!=null}runSimpleCommandAction(e){return(this.isIndent?new Rh(this.rangeUpdater):new kh(this.rangeUpdater)).run(e)}async runForEditor(e,r){let n=this.isIndent?ZQ(e,r):YQ(e,r),{targetSelections:i}=await Pe({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(e),edits:n,selections:{targetSelections:r.map(({contentSelection:o})=>o)}});return wt(r,i).map(([o,s])=>ic({editor:e,selection:s.toSelection(o.isReversed)}))}},Jh=class extends Xh{constructor(e){super(e,!0)}},eg=class extends Xh{constructor(e){super(e,!1)}};function ZQ(t,e){let{document:r}=t,n=BF(e),i=XQ(t);return n.map(o=>({range:r.lineAt(o).range.start.toEmptyRange(),text:i}))}function YQ(t,e){let{document:r}=t,n=BF(e),i=JQ(t);return n.map(o=>{let s=r.lineAt(o),l=s.text.match(i),{start:p}=s.range,u=p.translate(void 0,l?.[0].length);return{range:new W(p,u),text:""}})}function BF(t){let e=new Set;for(let r of t){let{start:n,end:i}=r.contentRange;for(let o=n.line;o<=i.line;++o)e.add(o)}return[...e]}function XQ(t){if(t.options.insertSpaces){let e=WF(t);return" ".repeat(e)}return"	"}function JQ(t){if(t.options.insertSpaces){let e=WF(t);return new RegExp(`^[ ]{1,${e}}`)}return/^\t/}function WF(t){return typeof t.options.tabSize=="number"?t.options.tabSize:4}var tg=class{constructor(e,r,n){this.rangeUpdater=e;this.modifierStageFactory=r;this.isBefore=n;this.getFinalStages=()=>[this.modifierStageFactory.create(ii)];this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e){let r=Je(await rt(e,this.runForEditor));return await k().flashRanges(r.flatMap(n=>n.thatMark.map(i=>({editor:i.editor,range:ir(i.selection),style:"justAdded"})))),{sourceSelections:r.flatMap(({sourceMark:n})=>n),thatSelections:r.flatMap(({thatMark:n})=>n)}}async runForEditor(e,r){let n=this.isBefore?"after":"before",i=r.flatMap(g=>g.toDestination(n).constructChangeEdit(g.contentText)),o=r.map(({contentSelection:g})=>g),s=i.map(({range:g})=>g),l=k().getEditableTextEditor(e),{contentSelections:p,editRanges:u}=await Pe({rangeUpdater:this.rangeUpdater,editor:l,edits:i,selections:{contentSelections:o,editRanges:{selections:s,behavior:0}}}),m=wt(i,u).map(([g,x])=>g.updateRange(x)),d=e.selections[0];return p.some(g=>g.intersection(d)!=null)&&await l.revealRange(d),{sourceMark:ln(r,m),thatMark:ln(r,p)}}},rg=class extends tg{constructor(e,r){super(e,r,!0)}},ng=class extends tg{constructor(e,r){super(e,r,!1)}};var Yl=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(ii)]}async run(e){let r=await rt(e,async(i,o)=>{let s=this.getEdits(o),l=o.map(m=>m.thatTarget.contentSelection),{contentSelections:p,editRanges:u}=await Pe({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(i),edits:s,selections:{contentSelections:l,editRanges:{selections:s.map(m=>m.range),behavior:0}}});return{thatMark:p.map(m=>({editor:i,selection:m})),flashRanges:ta(s,u).map(([m,d])=>({editor:i,range:m.isLine?m.updateRange(d):d,isLine:m.isLine}))}});return await k().flashRanges(r.flatMap(i=>i.flashRanges.map(({editor:o,range:s,isLine:l})=>({editor:o,range:l?Hr(s):ir(s),style:"justAdded"})))),{thatSelections:r.flatMap(i=>i.thatMark)}}},ig=class extends Yl{constructor(e,r){super(e,r)}getEdits(e){return e.flatMap(r=>[sg(r,"before"),sg(r,"after")])}},og=class extends Yl{constructor(e,r){super(e,r)}getEdits(e){return e.map(r=>sg(r,"before"))}},ag=class extends Yl{constructor(e,r){super(e,r)}getEdits(e){return e.map(r=>sg(r,"after"))}};function sg(t,e){return{...t.toDestination(e).constructChangeEdit("",!0),isLine:t.textualType==="line"}}function jF(t,e){return eZ($F(t),$F(e))}function $F(t){if(t.languages!=null)return{langIds:t.languages}}function eZ(t,e){if(t==null&&e==null)return 0;if(t==null)return-1;if(e==null)return 1;if(t.langIds==null&&e.langIds!=null)return-1;if(e.langIds==null&&t.langIds!=null)return 1;let r=tZ(t.scopeTypes,e.scopeTypes);return r!==0?r:t.langIds==null?0:e.langIds.length-t.langIds.length}function tZ(t,e){return t==null&&e!=null?-1:e==null&&t!=null?1:0}function cc(t,e){if(t.type==="named")throw new Error("Cursorless snippets are deprecated. Please use community snippets. Update to latest cursorless-talon and say 'cursorless migrate snippets'.");if(t.type==="custom")return t;let r=rZ(t.snippets,e);r.sort(jF);let n=r[0];if(n==null)throw new Error("No snippet available for the current language");return n}function rZ(t,e){return t.filter(r=>r.languages==null?!0:r.languages.includes(e))}var ib=class t{constructor(){this.value="";this.pos=0}static{this._table={36:0,58:1,44:2,123:3,125:4,92:5,47:6,124:7,43:11,45:12,63:13}}static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return e===95||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};let e=this.pos,r=0,n=this.value.charCodeAt(e),i;if(i=t._table[n],typeof i=="number")return this.pos+=1,{type:i,pos:e,len:1};if(t.isDigitCharacter(n)){i=8;do r+=1,n=this.value.charCodeAt(e+r);while(t.isDigitCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}if(t.isVariableCharacter(n)){i=9;do n=this.value.charCodeAt(e+ ++r);while(t.isVariableCharacter(n)||t.isDigitCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}i=10;do r+=1,n=this.value.charCodeAt(e+r);while(!isNaN(n)&&typeof t._table[n]>"u"&&!t.isDigitCharacter(n)&&!t.isVariableCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}},Ro=class{constructor(){this._children=[]}appendChild(e){return e instanceof Vt&&this._children[this._children.length-1]instanceof Vt?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,r){let{parent:n}=e,i=n.children.indexOf(e),o=n.children.slice(0);o.splice(i,1,...r),n._children=o,function s(l,p){for(let u of l)u.parent=p,s(u.children,u)}(r,n)}get children(){return this._children}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof pg)return e;e=e.parent}}toString(){return this.children.reduce((e,r)=>e+r.toString(),"")}len(){return 0}},Vt=class t extends Ro{constructor(r){super();this.value=r}static escape(r){return r.replace(/\$|}|\\/g,"\\$&")}toString(){return this.value}toTextmateString(){return t.escape(this.value)}len(){return this.value.length}clone(){return new t(this.value)}},cg=class extends Ro{},Bt=class t extends cg{constructor(r){super();this.index=r}static compareByIndex(r,n){return r.index===n.index?0:r.isFinalTabstop?1:n.isFinalTabstop||r.index<n.index?-1:r.index>n.index?1:0}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof lg?this._children[0]:void 0}toTextmateString(){let r="";return this.transform&&(r=this.transform.toTextmateString()),this.children.length===0&&!this.transform?`$${this.index}`:this.children.length===0?`\${${this.index}${r}}`:this.choice?`\${${this.index}|${this.choice.toTextmateString()}|${r}}`:`\${${this.index}:${this.children.map(n=>n.toTextmateString()).join("")}${r}}`}clone(){let r=new t(this.index);return this.transform&&(r.transform=this.transform.clone()),r._children=this.children.map(n=>n.clone()),r}},lg=class t extends Ro{constructor(){super(...arguments);this.options=[]}appendChild(r){return r instanceof Vt&&(r.parent=this,this.options.push(r)),this}toString(){return this.options[0].value}toTextmateString(){return this.options.map(r=>r.value.replace(/\||,|\\/g,"\\$&")).join(",")}len(){return this.options[0].len()}clone(){let r=new t;return this.options.forEach(r.appendChild,r),r}},ob=class t extends Ro{constructor(){super(...arguments);this.regexp=new RegExp("")}resolve(r){let n=this,i=!1,o=r.replace(this.regexp,function(){return i=!0,n._replace(Array.prototype.slice.call(arguments,0,-2))});return!i&&this._children.some(s=>s instanceof On&&!!s.elseValue)&&(o=this._replace([])),o}_replace(r){let n="";for(let i of this._children)if(i instanceof On){let o=r[i.index]||"";o=i.resolve(o),n+=o}else n+=i.toString();return n}toString(){return""}toTextmateString(){return`/${this.regexp.source}/${this.children.map(r=>r.toTextmateString())}/${(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")}`}clone(){let r=new t;return r.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),r._children=this.children.map(n=>n.clone()),r}},On=class t extends Ro{constructor(r,n,i,o){super();this.index=r;this.shorthandName=n;this.ifValue=i;this.elseValue=o}resolve(r){return this.shorthandName==="upcase"?r?r.toLocaleUpperCase():"":this.shorthandName==="downcase"?r?r.toLocaleLowerCase():"":this.shorthandName==="capitalize"?r?r[0].toLocaleUpperCase()+r.substr(1):"":this.shorthandName==="pascalcase"?r?this._toPascalCase(r):"":this.shorthandName==="camelcase"?r?this._toCamelCase(r):"":r&&typeof this.ifValue=="string"?this.ifValue:!r&&typeof this.elseValue=="string"?this.elseValue:r||""}_toPascalCase(r){let n=r.match(/[a-z0-9]+/gi);return n?n.map(i=>i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()).join(""):r}_toCamelCase(r){let n=r.match(/[a-z0-9]+/gi);return n?n.map((i,o)=>o===0?i.toLowerCase():i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()).join(""):r}toTextmateString(){let r="${";return r+=this.index,this.shorthandName?r+=`:/${this.shorthandName}`:this.ifValue&&this.elseValue?r+=`:?${this.ifValue}:${this.elseValue}`:this.ifValue?r+=`:+${this.ifValue}`:this.elseValue&&(r+=`:-${this.elseValue}`),r+="}",r}clone(){return new t(this.index,this.shorthandName,this.ifValue,this.elseValue)}},Nn=class t extends cg{constructor(r){super();this.name=r}resolve(r){let n=r.resolve(this);return this.transform&&(n=this.transform.resolve(n||"")),n!==void 0?(this._children=[new Vt(n)],!0):!1}toTextmateString(){let r="";return this.transform&&(r=this.transform.toTextmateString()),this.children.length===0?`\${${this.name}${r}}`:`\${${this.name}:${this.children.map(n=>n.toTextmateString()).join("")}${r}}`}clone(){let r=new t(this.name);return this.transform&&(r.transform=this.transform.clone()),r._children=this.children.map(n=>n.clone()),r}};function qF(t,e){let r=[...t];for(;r.length>0;){let n=r.shift();if(!e(n))break;r.unshift(...n.children)}}var pg=class t extends Ro{get placeholderInfo(){if(!this._placeholders){let e=[],r;this.walk(function(n){return n instanceof Bt&&(e.push(n),r=!r||r.index<n.index?n:r),!0}),this._placeholders={all:e,last:r}}return this._placeholders}get placeholders(){let{all:e}=this.placeholderInfo;return e}offset(e){let r=0,n=!1;return this.walk(i=>i===e?(n=!0,!1):(r+=i.len(),!0)),n?r:-1}fullLen(e){let r=0;return qF([e],n=>(r+=n.len(),!0)),r}enclosingPlaceholders(e){let r=[],{parent:n}=e;for(;n;)n instanceof Bt&&r.push(n),n=n.parent;return r}resolveVariables(e){return this.walk(r=>(r instanceof Nn&&r.resolve(e)&&(this._placeholders=void 0),!0)),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,r){return this._placeholders=void 0,super.replace(e,r)}toTextmateString(){return this.children.reduce((e,r)=>e+r.toTextmateString(),"")}clone(){let e=new t;return this._children=this.children.map(r=>r.clone()),e}walk(e){qF(this.children,e)}},ai=class{constructor(){this._scanner=new ib;this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}text(e){return this.parse(e).toString()}parse(e,r,n){this._scanner.text(e),this._token=this._scanner.next();let i=new pg;for(;this._parse(i););let o=new Map,s=[],l=0;i.walk(p=>(p instanceof Bt&&(l+=1,p.isFinalTabstop?o.set(0,void 0):!o.has(p.index)&&p.children.length>0?o.set(p.index,p.children):s.push(p)),!0));for(let p of s){let u=o.get(p.index);if(u){let m=new Bt(p.index);m.transform=p.transform;for(let d of u)m.appendChild(d.clone());i.replace(p,[m])}}return n||(n=l>0&&r),!o.has(0)&&n&&i.appendChild(new Bt(0)),i}_accept(e,r){if(e===void 0||this._token.type===e){let n=r?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),n}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){let r=this._token;for(;this._token.type!==e;){if(this._token.type===14)return!1;if(this._token.type===5){let i=this._scanner.next();if(i.type!==0&&i.type!==4&&i.type!==5)return!1}this._token=this._scanner.next()}let n=this._scanner.value.substring(r.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),n}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let r;return(r=this._accept(5,!0))?(r=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||r,e.appendChild(new Vt(r)),!0):!1}_parseTabstopOrVariableName(e){let r,n=this._token;return this._accept(0)&&(r=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(r)?new Bt(Number(r)):new Nn(r)),!0):this._backTo(n)}_parseComplexPlaceholder(e){let r,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(r=this._accept(8,!0))))return this._backTo(n);let o=new Bt(Number(r));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new Vt("${"+r+":")),o.children.forEach(e.appendChild,e),!0}else if(o.index>0&&this._accept(7)){let s=new lg;for(;;){if(this._parseChoiceElement(s)){if(this._accept(2))continue;if(this._accept(7)&&(o.appendChild(s),this._accept(4)))return e.appendChild(o),!0}return this._backTo(n),!1}}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseChoiceElement(e){let r=this._token,n=[];for(;!(this._token.type===2||this._token.type===7);){let i;if((i=this._accept(5,!0))?i=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||i:i=this._accept(void 0,!0),!i)return this._backTo(r),!1;n.push(i)}return n.length===0?(this._backTo(r),!1):(e.appendChild(new Vt(n.join(""))),!0)}_parseComplexVariable(e){let r,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(r=this._accept(9,!0))))return this._backTo(n);let o=new Nn(r);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new Vt("${"+r+":")),o.children.forEach(e.appendChild,e),!0}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseTransform(e){let r=new ob,n="",i="";for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(6,!0)||o,n+=o;continue}if(this._token.type!==14){n+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(5,!0)||this._accept(6,!0)||o,r.appendChild(new Vt(o));continue}if(!(this._parseFormatString(r)||this._parseAnything(r)))return!1}for(;!this._accept(4);){if(this._token.type!==14){i+=this._accept(void 0,!0);continue}return!1}try{r.regexp=new RegExp(n,i)}catch{return!1}return e.transform=r,!0}_parseFormatString(e){let r=this._token;if(!this._accept(0))return!1;let n=!1;this._accept(3)&&(n=!0);let i=this._accept(8,!0);if(i)if(n){if(this._accept(4))return e.appendChild(new On(Number(i))),!0;if(!this._accept(1))return this._backTo(r),!1}else return e.appendChild(new On(Number(i))),!0;else return this._backTo(r),!1;if(this._accept(6)){let o=this._accept(9,!0);return!o||!this._accept(4)?(this._backTo(r),!1):(e.appendChild(new On(Number(i),o)),!0)}else if(this._accept(11)){let o=this._until(4);if(o)return e.appendChild(new On(Number(i),void 0,o,void 0)),!0}else if(this._accept(12)){let o=this._until(4);if(o)return e.appendChild(new On(Number(i),void 0,void 0,o)),!0}else if(this._accept(13)){let o=this._until(1);if(o){let s=this._until(4);if(s)return e.appendChild(new On(Number(i),void 0,o,s)),!0}}else{let o=this._until(4);if(o)return e.appendChild(new On(Number(i),void 0,void 0,o)),!0}return this._backTo(r),!1}_parseAnything(e){return this._token.type!==14?(e.appendChild(new Vt(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}};var ug=Object.freeze({CURRENT_YEAR:!0,CURRENT_YEAR_SHORT:!0,CURRENT_MONTH:!0,CURRENT_DATE:!0,CURRENT_HOUR:!0,CURRENT_MINUTE:!0,CURRENT_SECOND:!0,CURRENT_DAY_NAME:!0,CURRENT_DAY_NAME_SHORT:!0,CURRENT_MONTH_NAME:!0,CURRENT_MONTH_NAME_SHORT:!0,CURRENT_SECONDS_UNIX:!0,SELECTION:!0,CLIPBOARD:!0,TM_SELECTED_TEXT:!0,TM_CURRENT_LINE:!0,TM_CURRENT_WORD:!0,TM_LINE_INDEX:!0,TM_LINE_NUMBER:!0,TM_FILENAME:!0,TM_FILENAME_BASE:!0,TM_DIRECTORY:!0,TM_FILEPATH:!0,RELATIVE_FILEPATH:!0,BLOCK_COMMENT_START:!0,BLOCK_COMMENT_END:!0,LINE_COMMENT:!0,WORKSPACE_NAME:!0,WORKSPACE_FOLDER:!0,RANDOM:!0,RANDOM_HEX:!0,UUID:!0});function fg(t,e,r){let n=nZ(t)+1,i={};t.walk(o=>{if(o instanceof Nn){if(o.name===e)o.name="TM_SELECTED_TEXT";else if(r!=null&&Object.prototype.hasOwnProperty.call(r,o.name))o.parent.replace(o,[new Vt(r[o.name])]);else if(!ug[o.name]){let s;o.name in i?s=i[o.name]:(s=n++,i[o.name]=s);let l=new Bt(s);o.children.forEach(p=>l.appendChild(p)),o.parent.replace(o,[l])}}else o instanceof Bt&&(o.index.toString()===e?o.parent.replace(o,[new Nn("TM_SELECTED_TEXT")]):r!=null&&Object.prototype.hasOwnProperty.call(r,o.index)&&o.parent.replace(o,[new Vt(r[o.index])]));return!0})}function nZ(t){let e=0;return t.walk(r=>(r instanceof Bt&&(e=Math.max(e,r.index)),!0)),e}function mg(t,e,r){let n=iZ(t)+1,i={};t.walk(o=>{if(o instanceof Nn){if(o.name===e)o.name="TM_SELECTED_TEXT";else if(r!=null&&Object.prototype.hasOwnProperty.call(r,o.name))o.parent.replace(o,[new Vt(r[o.name])]);else if(!ug[o.name]){let s;o.name in i?s=i[o.name]:(s=n++,i[o.name]=s);let l=new Bt(s);o.children.forEach(p=>l.appendChild(p)),o.parent.replace(o,[l])}}else o instanceof Bt&&o.index.toString()===e&&o.parent.replace(o,[new Nn("TM_SELECTED_TEXT")]);return!0})}function iZ(t){let e=0;return t.walk(r=>(r instanceof Bt&&(e=Math.max(e,r.index)),!0)),e}function dg(t,e,r){let n=e.map(o=>oZ(t,o,r)),i=n[0];if(!n.every(o=>o===i))throw new Error("Multiple snippet definitions match the given context");if(i===-1)throw new Error("Couldn't find matching snippet definition");return r[i]}function oZ(t,e,r){let n=e.editor.document.languageId;return r.findIndex(({scope:i})=>{if(i==null)return!0;let{langIds:o,scopeTypes:s,excludeDescendantScopeTypes:l}=i;if(o!=null&&!o.includes(n))return!1;if(s!=null){let p=s.concat(l??[]),u,m;for(let d of p)try{let g=t.create({type:"containingScope",scopeType:{type:d}}).run(e)[0];e.contentRange.isRangeEqual(g.contentRange)&&(g=t.create({type:"containingScope",scopeType:{type:d},ancestorIndex:1}).run(e)[0]),(u==null||u.contentRange.contains(g.contentRange))&&(u=g,m=d)}catch{continue}return m==null?!1:u!=null&&!(l??[]).includes(m)}return!0})}var GF={camelCase(t){if(t.length===0)return"";let[e,...r]=t;return e+r.map(zF).join("")},snakeCase(t){return t.join("_")},upperSnakeCase(t){return t.map(e=>e.toUpperCase()).join("_")},pascalCase(t){return t.map(zF).join("")}};function zF(t){return t.length===0?"":t[0].toUpperCase()+t.substr(1)}var Xl=class{constructor(e,r,n,i){this.rangeUpdater=e;this.snippets=r;this.actions=n;this.modifierStageFactory=i;this.snippetParser=new ai;this.run=this.run.bind(this)}getFinalStages(e){let r=this.getScopeTypes(e);return r.length===0?[]:[new Qs(this.modifierStageFactory,{type:"cascading",modifiers:r.map(n=>({type:"containingScope",scopeType:n}))})]}getScopeTypes(e){let{name:r}=e,i=this.snippets.getSnippetStrict(r).insertionScopeTypes;return i==null?[]:i.map(o=>({type:o}))}getSnippetInfo(e,r){let{name:n}=e,i=this.snippets.getSnippetStrict(n),o=dg(this.modifierStageFactory,r,i.definitions);return{body:o.body.join(`
`),formatSubstitutions(s){return s==null?void 0:aZ(i,o,s)}}}async run(e,r){let n=k().getEditableTextEditor(Tt(e));await this.actions.editNew.run(e);let{body:i,formatSubstitutions:o}=this.getSnippetInfo(r,n.selections.map(u=>new Mt({editor:n,contentRange:u,isReversed:!1,hasExplicitRange:!0}))),s=this.snippetParser.parse(i);mg(s,null,o(r.substitutions));let l=s.toTextmateString(),{editorSelections:p}=await Pe({rangeUpdater:this.rangeUpdater,editor:n,callback:()=>n.insertSnippet(l),preserveCursorSelections:!0,selections:{editorSelections:{selections:n.selections,behavior:0}}});return{thatSelections:p.map(u=>({editor:n,selection:u}))}}};function aZ(t,e,r){return Object.fromEntries(Object.entries(r).map(([n,i])=>{let o=(e.variables??{})[n]?.formatter??(t.variables??{})[n]?.formatter;if(o==null)return[n,i];let s=GF[o];if(s==null)throw new Error(`Couldn't find formatter ${o} for variable ${n}`);return[n,s(i.split(" "))]}))}var Jl=class{constructor(e,r,n,i){this.rangeUpdater=e;this.snippets=r;this.actions=n;this.modifierStageFactory=i;this.snippetParser=new ai;this.run=this.run.bind(this)}getFinalStages(e,r){if(r.type==="named")return this.legacy().getFinalStages(r);let n=Tt(e),o=cc(r,n.document.languageId).scopeTypes??[];return o.length===0?[]:[new Qs(this.modifierStageFactory,{type:"cascading",modifiers:o.map(s=>({type:"containingScope",scopeType:s}))})]}async run(e,r){if(r.type==="named")return this.legacy().run(e,r);let n=k().getEditableTextEditor(Tt(e)),i=cc(r,n.document.languageId),o=this.snippetParser.parse(i.body),s=i.substitutions??r.substitutions;fg(o,null,s);let l=o.toTextmateString();await this.actions.editNew.run(e);let{editorSelections:p}=await Pe({rangeUpdater:this.rangeUpdater,editor:n,callback:()=>n.insertSnippet(l),preserveCursorSelections:!0,selections:{editorSelections:{selections:n.selections,behavior:0}}});return{thatSelections:p.map(u=>({editor:n,selection:u}))}}legacy(){return new Xl(this.rangeUpdater,this.snippets,this.actions,this.modifierStageFactory)}};var ep=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(ii)]}async run(e){return await De(k(),e.map(({thatTarget:n})=>n),"pendingModification0"),{thatSelections:Je(await rt(e,async(n,i)=>{let{thatRanges:o}=await Pe({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(n),edits:sZ(n,i),selections:{thatRanges:i.map(({contentRange:s})=>s)}});return ta(i,o).map(([s,l])=>({editor:n,selection:l.toSelection(s.isReversed)}))}))}}};function sZ(t,e){let r=[];for(let n of e){let i=n.textualType==="token"?cZ(n):lZ(n);r.push(...i)}return r}function cZ(t){let{editor:e,contentRange:r}=t,n=Er(e.document.languageId).tokenMatcher,i=fn(n,e,r,"forward");return Array.from(rv(i)).map(([o,s])=>({range:new W(o.end,s.start),text:"",isReplace:!0}))}function lZ(t){let{document:e}=t.editor,r=t.contentRange,n=r.start.line,i=r.isSingleLine?Math.min(n+1,e.lineCount-1):r.end.line,o=Fs(LM(n,i+1),s=>e.lineAt(s));return Array.from(rv(o)).map(([s,l])=>({range:new W(s.rangeTrimmed?.end??s.range.end,l.rangeTrimmed?.start??l.range.start),text:l.isEmptyOrWhitespace?"":" ",isReplace:!0}))}var hg=class{constructor(e,r){this.rangeUpdater=e;this.actions=r;this.run=this.run.bind(this)}async run(e){let r=k().getEditableTextEditor(Tt(e)),n=k().activeEditableTextEditor,i=async()=>{await this.actions.editNew.run(e)},{cursorSelections:o}=await Pe({rangeUpdater:this.rangeUpdater,editor:r,preserveCursorSelections:!0,callback:i,selections:{cursorSelections:r.selections}}),{originalCursorSelections:s,editorSelections:l}=await Pe({rangeUpdater:this.rangeUpdater,editor:r,callback:()=>r.clipboardPaste(),selections:{originalCursorSelections:o,editorSelections:{selections:r.selections,behavior:0}}});return await r.setSelections(s),n!=null&&!n.isActive&&await n.focus(),await k().flashRanges(l.map(p=>({editor:r,range:ir(p),style:"justAdded"}))),{thatSelections:l.map(p=>({editor:r,selection:p}))}}};var gg=class{constructor(e){this.rangeUpdater=e;this.runForEditor=this.runForEditor.bind(this)}async run(e){let r=await k().clipboard.readText(),n=r.split(/\r?\n/g),i=e.length===n.length?ta(e,n).map(([s,l])=>({destination:s,text:l})):e.map(s=>({destination:s,text:r}));return{thatSelections:Je(await Fi(i,({destination:s})=>s.editor,this.runForEditor))}}async runForEditor(e,r){let n=r.map(({destination:s,text:l})=>s.constructChangeEdit(l)),{editSelections:i}=await Pe({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(e),edits:n,selections:{editSelections:{selections:n.map(({range:s})=>s),behavior:0}}}),o=ta(n,i).map(([s,l])=>s.updateRange(l).toSelection(l.isReversed));return await k().flashRanges(o.map(s=>({editor:e,range:ir(s),style:"justAdded"}))),o.map(s=>({editor:e,selection:s}))}};var yg=class{constructor(e,r){this.run=this.run.bind(this),this.runner=k().capabilities.commands.clipboardPaste!=null?new hg(e,r):new gg(e)}run(e){return this.runner.run(e)}};var tp=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e,{showDecorations:r=!0}={}){return e=Sh(e),r&&await De(k(),e,"pendingDelete",i=>i.getRemovalHighlightRange()),{thatTargets:Je(await rt(e,this.runForEditor))}}async runForEditor(e,r){let n=r.map(s=>s.constructRemovalEdit()),i=k().getEditableTextEditor(e),{editRanges:o}=await Pe({rangeUpdater:this.rangeUpdater,editor:i,edits:n,selections:{editRanges:n.map(({range:s})=>s)}});return wt(r,o).map(([s,l])=>new fo({editor:s.editor,isReversed:s.isReversed,contentRange:l}))}};var rp=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}getTexts(e,r){if(Array.isArray(r))return r.length===1?Array(e.length).fill(r[0]):r;let n=[];for(let i=0;i<e.length;++i)n[i]=(r.start+i).toString();return n}async run(e,r){await De(k(),e.map(l=>l.target),"pendingModification0");let n=this.getTexts(e,r);if(e.length!==n.length)throw new Error("Targets and texts must have same length");let i=wt(e,n).map(([l,p])=>({editor:l.editor,target:l.target,edit:l.constructChangeEdit(p)})),o=[],s=[];return await Fi(i,l=>l.editor,async(l,p)=>{let u=p.map(({edit:g})=>g),{contentSelections:m,editRanges:d}=await Pe({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(l),edits:u,selections:{contentSelections:p.map(({target:g})=>g.contentSelection),editRanges:{selections:u.map(({range:g})=>g),behavior:0}}});for(let[g,x]of wt(p,m))o.push(g.target.withContentRange(x));for(let[g,x]of wt(p,d))s.push({editor:l,selection:g.edit.updateRange(x).toSelection(!1)})}),{sourceTargets:o,thatSelections:s}}};var np=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.getFinalStages=()=>[Gv(this.modifierStageFactory)];this.run=this.run.bind(this)}async run(e,r,n){let i=e.flatMap(s=>{let l=s.getBoundary();if(l.length!==2)throw Error("Target must have an opening and closing delimiter");return l});await De(k(),i,"pendingModification0");let o=await rt(i,async(s,l)=>{let p=l.map((d,g)=>({editor:s,range:d.contentRange,text:g%2===0?r:n})),{sourceRanges:u,thatRanges:m}=await Pe({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(s),edits:p,selections:{sourceRanges:e.map(d=>d.thatTarget.contentRange),thatRanges:e.map(d=>d.contentRange)}});return{sourceMark:ln(e,u),thatMark:ln(e,m)}});return{sourceSelections:o.flatMap(({sourceMark:s})=>s),thatSelections:o.flatMap(({thatMark:s})=>s)}}};var ip=class{constructor(e){this.at=e;this.run=this.run.bind(this)}async run(e){let r=dl(e,s=>s.editor),n=Array.from(r,([s,l])=>({lineNumber:pZ(l,this.at),editor:s})),i=k().activeEditableTextEditor;for(let s of n)await k().getEditableTextEditor(s.editor).revealLine(s.lineNumber,this.at);i!=null&&!i.isActive&&await i.focus();let o=e.filter(s=>{let l=s.editor.visibleRanges,p=l[0].start.line,u=l[l.length-1].end.line;return s.contentRange.start.line>p||s.contentRange.end.line<u||s.contentRange.start.line===p&&s.contentRange.end.line===u});return await k().flashRanges(o.map(s=>({editor:s.editor,range:Hr(s.contentRange),style:"referenced"}))),{thatTargets:e}}},xg=class extends ip{constructor(){super("top")}},Tg=class extends ip{constructor(){super("center")}},Sg=class extends ip{constructor(){super("bottom")}};function pZ(t,e){let r=Number.MAX_SAFE_INTEGER,n=0;return t.forEach(i=>{r=Math.min(r,i.contentRange.start.line),n=Math.max(n,i.contentRange.end.line)}),e==="top"?r:e==="bottom"?n:Math.floor((r+n)/2)}var ko=class{constructor(e,r){this.selectionMode=e;this.rangeMode=r;this.run=this.run.bind(this)}async run(e){let r=Tt(e),n=this.getSelections(e),i=this.selectionMode==="add"?r.selections.concat(n):n,o=this.selectionMode==="set"&&i.length===1&&i[0].isEmpty;return await k().getEditableTextEditor(r).setSelections(i,{focusEditor:!0,highlightWord:o}),{thatTargets:e}}getSelections(e){switch(this.rangeMode){case"content":return e.map(r=>r.contentSelection);case"before":return e.map(r=>new be(r.contentRange.start,r.contentRange.start));case"after":return e.map(r=>new be(r.contentRange.end,r.contentRange.end))}}},vg=class extends ko{constructor(){super("set","content")}},bg=class extends ko{constructor(){super("set","before")}},wg=class extends ko{constructor(){super("set","after")}},_g=class extends ko{constructor(){super("add","content")}},Eg=class extends ko{constructor(){super("add","before")}},Rg=class extends ko{constructor(){super("add","after")}};var op=class{constructor(e){this.key=e;this.noAutomaticTokenExpansion=!0;this.run=this.run.bind(this)}async run(e){return{thatTargets:e,[`${this.key}Targets`]:e}}};var ap=class{constructor(e){this.treeSitter=e;this.run=this.run.bind(this)}async run(e){await De(k(),e,"referenced");let r=["# Cursorless parse tree"];for(let n of e){let{editor:i,contentRange:o}=n,s=this.treeSitter.getTree(i.document);r.push(uZ(i.document,s,o))}return k().openUntitledTextDocument({language:"markdown",content:r.join(`

`)}),{thatTargets:e}}};function uZ(t,e,r){let n=[],i=[];return KF(n,i,r,e.walk(),0),[`## ${t.filename} [${r}]
`,`\`\`\`${t.languageId}`,t.getText(r),"```","","```scm",...i,"```","","```js",...n,"```",""].join(`
`)}function KF(t,e,r,n,i){for(;;){let o=new W(n.startPosition.row,n.startPosition.column,n.endPosition.row,n.endPosition.column);if(r.intersection(o)!=null){let s="  ".repeat(i),l=fZ(n),p=s+l;if(n.nodeIsNamed)t.push(`${p}${n.nodeType} [${o}]`),e.push(`${p}(${n.nodeType}`),n.gotoFirstChild()?(KF(t,e,r,n,i+1),n.gotoParent(),e.push(`${s})`)):e[e.length-1]+=")";else{let u=`"${n.nodeType}"`;t.push(`${p}${u} [${o}]`),e.push(`${p}${u}`)}}if(!n.gotoNextSibling())return}}function fZ(t){let e=t.currentFieldName;return e!=null?`${e}: `:""}var sp=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){e.length<2&&rl(k().messages,"tooFewTargets",'This action works on multiple targets, e.g. "sort every line block" instead of "sort block".');let r=e.slice().sort((s,l)=>s.contentRange.start.compareTo(l.contentRange.start)),{returnValue:n}=await this.actions.getText.run(r,{showDecorations:!1}),i=this.sortTexts(n),{thatSelections:o}=await this.actions.replace.run(r.map(s=>s.toDestination("to")),i);return{thatSelections:o}}},kg=class extends sp{sortTexts(e){return e.sort((r,n)=>r.localeCompare(n,void 0,{numeric:!0,caseFirst:"upper"}))}},Pg=class extends sp{sortTexts(e){return e.reverse()}},Ag=class extends sp{sortTexts(e){return IT(e)}};var cp=class{constructor(e){this.modifierStageFactory=e;this.getFinalStages=()=>[this.modifierStageFactory.create(ii)];this.run=this.run.bind(this)}async run(e){let r=e.map(({thatTarget:n})=>n);return await De(k(),r,"referenced"),await rt(e,async(n,i)=>{let o=i.map(s=>pn(s,s.contentRange));await k().getEditableTextEditor(n).toggleBreakpoint(o)}),{thatTargets:e}}};var lp=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e,r,n){let i=await rt(e,async(o,s)=>{let l=s.map(v=>({start:new be(v.contentRange.start,v.contentRange.start),end:new be(v.contentRange.end,v.contentRange.end)})),p=l.flatMap(({start:v,end:I})=>[{text:r,range:v},{text:n,range:I,isReplace:!0}]),u=s.map(v=>v.contentSelection),{boundariesStartSelections:m,boundariesEndSelections:d,sourceSelections:g,thatSelections:x}=await Pe({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(o),edits:p,selections:{boundariesStartSelections:{selections:l.map(({start:v})=>v),behavior:2},boundariesEndSelections:{selections:l.map(({end:v})=>v),behavior:3},sourceSelections:{selections:u,behavior:1},thatSelections:{selections:u,behavior:0}}}),b=[...m,...d];return await k().flashRanges(b.map(v=>({editor:o,range:ir(v),style:"justAdded"}))),{sourceMark:g.map(v=>({editor:o,selection:v})),thatMark:x.map(v=>({editor:o,selection:v}))}});return{sourceSelections:i.flatMap(({sourceMark:o})=>o),thatSelections:i.flatMap(({thatMark:o})=>o)}}};var pp=class{constructor(e,r,n){this.rangeUpdater=e;this.snippets=r;this.modifierStageFactory=n;this.snippetParser=new ai;this.run=this.run.bind(this)}getFinalStages(e){let r=this.getScopeType(e);return r==null?[]:[new bo(this.modifierStageFactory,{type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:r}})]}getScopeType(e){let{name:r,variableName:n}=e,s=(this.snippets.getSnippetStrict(r).variables??{})[n]?.wrapperScopeType;return s==null?void 0:{type:s}}getBody(e,r){let{name:n}=e,i=this.snippets.getSnippetStrict(n);return dg(this.modifierStageFactory,r,i.definitions).body.join(`
`)}async run(e,r){let n=k().getEditableTextEditor(Tt(e)),i=this.getBody(r,e),o=this.snippetParser.parse(i);mg(o,r.variableName);let s=o.toTextmateString();await De(k(),e,"pendingModification0");let l=e.map(m=>m.contentSelection),p=()=>n.insertSnippet(s,l),{targetSelections:u}=await Pe({rangeUpdater:this.rangeUpdater,editor:n,callback:p,preserveCursorSelections:!0,selections:{targetSelections:l}});return{thatSelections:u.map(m=>({editor:n,selection:m}))}}};var up=class{constructor(e,r,n){this.rangeUpdater=e;this.snippets=r;this.modifierStageFactory=n;this.snippetParser=new ai;this.run=this.run.bind(this)}getFinalStages(e,r){if(r.type==="named")return this.legacy().getFinalStages(r);let n=Tt(e),i=cc(r,n.document.languageId);return i.scopeType==null?[]:[new bo(this.modifierStageFactory,{type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:i.scopeType}})]}async run(e,r){if(r.type==="named")return this.legacy().run(e,r);let n=k().getEditableTextEditor(Tt(e)),i=cc(r,n.document.languageId),o=this.snippetParser.parse(i.body);fg(o,i.variableName);let s=o.toTextmateString();await De(k(),e,"pendingModification0");let l=e.map(u=>u.contentSelection),{targetSelections:p}=await Pe({rangeUpdater:this.rangeUpdater,editor:n,callback:()=>n.insertSnippet(s,l),preserveCursorSelections:!0,selections:{targetSelections:l}});return{thatSelections:p.map(u=>({editor:n,selection:u}))}}legacy(){return new pp(this.rangeUpdater,this.snippets,this.modifierStageFactory)}};var mZ=/-?\d+(\.\d+)?/g,Mg=class{constructor(e,r){this.actions=e;this.isIncrement=r;this.run=this.run.bind(this)}async run(e){let r=[];return await Fi(e,n=>n.editor,async(n,i)=>{let o=await this.runOnEditor(n,i);r.push(...o)}),{thatSelections:r}}async runOnEditor(e,r){let{document:n}=e,i=[],o=[];for(let l of r){let p=n.offsetAt(l.contentRange.start),u=l.contentText,m=tl(u,mZ);for(let d of m)i.push(dZ(e,p,d)),o.push(hZ(this.isIncrement,d.text))}let{thatSelections:s}=await this.actions.replace.run(i,o);return s}},Dg=class extends Mg{constructor(e){super(e,!0)}},Fg=class extends Mg{constructor(e){super(e,!1)}};function dZ(t,e,r){return new Be({editor:t,isReversed:!1,contentRange:new W(t.document.positionAt(e+r.index),t.document.positionAt(e+r.index+r.text.length))}).toDestination("to")}function hZ(t,e){return e.includes(".")?yZ(t,e).toString():gZ(t,e).toString()}function gZ(t,e){let r=parseInt(e),n=1;return r+(t?n:-n)}function yZ(t,e){let r=parseFloat(e),i=Math.abs(r)<=1?.1:1,o=r+(t?i:-i);return parseFloat(o.toPrecision(15))/1}var Ig=class{constructor(e,r,n,i){this.treeSitter=e;this.snippets=r;this.rangeUpdater=n;this.modifierStageFactory=i;this.addSelection=new _g;this.addSelectionBefore=new Eg;this.addSelectionAfter=new Rg;this.callAsFunction=new $l(this);this.clearAndSetSelection=new jl(this);this.copyToClipboard=new Wh(this,this.rangeUpdater);this.cutToClipboard=new $h(this);this.decrement=new Fg(this);this.deselect=new ql;this.editNew=new jh(this.rangeUpdater,this);this.editNewLineAfter=new Gh(this,this.modifierStageFactory);this.editNewLineBefore=new zh(this,this.modifierStageFactory);this.executeCommand=new zl(this.rangeUpdater);this.extractVariable=new Lh(this.rangeUpdater);this.findInDocument=new Qh(this);this.findInWorkspace=new Zh(this);this.flashTargets=new Yh;this.foldRegion=new Ph(this.rangeUpdater);this.followLink=new ac({openAside:!1});this.followLinkAside=new ac({openAside:!0});this.generateSnippet=new sc(this.snippets);this.getText=new Ql;this.gitAccept=new Uh(this.rangeUpdater);this.gitRevert=new Hh(this.rangeUpdater);this.gitStage=new Vh(this.rangeUpdater);this.gitUnstage=new Bh(this.rangeUpdater);this.highlight=new Zl;this.increment=new Dg(this);this.indentLine=new Jh(this.rangeUpdater);this.insertCopyAfter=new ng(this.rangeUpdater,this.modifierStageFactory);this.insertCopyBefore=new rg(this.rangeUpdater,this.modifierStageFactory);this.insertEmptyLineAfter=new ag(this.rangeUpdater,this.modifierStageFactory);this.insertEmptyLineBefore=new og(this.rangeUpdater,this.modifierStageFactory);this.insertEmptyLinesAround=new ig(this.rangeUpdater,this.modifierStageFactory);this.insertSnippet=new Jl(this.rangeUpdater,this.snippets,this,this.modifierStageFactory);this.joinLines=new ep(this.rangeUpdater,this.modifierStageFactory);this.breakLine=new Th(this.rangeUpdater);this.moveToTarget=new bh(this.rangeUpdater);this.outdentLine=new eg(this.rangeUpdater);this.pasteFromClipboard=new yg(this.rangeUpdater,this);this.randomizeTargets=new Ag(this);this.remove=new tp(this.rangeUpdater);this.rename=new Mh(this.rangeUpdater);this.replace=new rp(this.rangeUpdater);this.replaceWithTarget=new vh(this.rangeUpdater);this.revealDefinition=new Ih(this.rangeUpdater);this.revealTypeDefinition=new Ch(this.rangeUpdater);this.reverseTargets=new Pg(this);this.rewrapWithPairedDelimiter=new np(this.rangeUpdater,this.modifierStageFactory);this.scrollToBottom=new Sg;this.scrollToCenter=new Tg;this.scrollToTop=new xg;this.setSelection=new vg;this.setSelectionAfter=new wg;this.setSelectionBefore=new bg;this.showDebugHover=new Nh(this.rangeUpdater);this.showHover=new Oh(this.rangeUpdater);this.showQuickFix=new Fh(this.rangeUpdater);this.showReferences=new Dh(this.rangeUpdater);this.sortTargets=new kg(this);this.swapTargets=new wh(this.rangeUpdater);this.toggleLineBreakpoint=new cp(this.modifierStageFactory);this.toggleLineComment=new Eh(this.rangeUpdater);this.unfoldRegion=new Ah(this.rangeUpdater);this.wrapWithPairedDelimiter=new lp(this.rangeUpdater);this.wrapWithSnippet=new up(this.rangeUpdater,this.snippets,this.modifierStageFactory);this["experimental.setInstanceReference"]=new op("instanceReference");this["private.showParseTree"]=new ap(this.treeSitter);this["private.getTargets"]=new Kl;this["private.setKeyboardTarget"]=new op("keyboard")}};async function QF(t,e,r){let n=await t.getFocusedElementType();if(n==null||n==="textEditor")return null;let i=r.action;switch(i.name){case"replace":return Cg(i.destination)&&Array.isArray(i.replaceWith)?{action:"insert",modifiers:Og(i.destination),text:i.replaceWith.join(`
`)}:null;case"replaceWithTarget":return Cg(i.destination)?{action:"insert",modifiers:Og(i.destination),text:await ab(e,i.source)}:null;case"moveToTarget":if(Cg(i.destination)){let o=await ab(e,i.source);return await xZ(e,i.source),{action:"insert",modifiers:Og(i.destination),text:o}}return null;case"callAsFunction":return Ng(i.argument)?{action:i.name,modifiers:Lg(i.argument),callee:await ab(e,i.callee)}:null;case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return Ng(i.target)?{action:i.name,modifiers:Lg(i.target),left:i.left,right:i.right}:null;case"pasteFromClipboard":return Cg(i.destination)?{action:i.name,modifiers:Og(i.destination)}:null;case"swapTargets":case"editNew":case"insertSnippet":case"generateSnippet":case"wrapWithSnippet":case"parsed":return null;default:return Ng(i.target)?{action:i.name,modifiers:Lg(i.target)}:null}}function Cg(t){return t.type==="implicit"?!0:t.type==="primitive"?t.insertionMode==="to"&&Ng(t.target):!1}function Ng(t){return t.type==="implicit"?!0:t.type==="primitive"?t.mark==null||t.mark.type==="cursor":!1}function Og(t){return t.type==="primitive"?Lg(t.target):[]}function Lg(t){return t.type==="primitive"&&t.modifiers!=null&&t.modifiers.length>0?t.modifiers:[]}async function ab(t,e){return(await t({name:"getText",target:e})).returnValue.join(`
`)}async function xZ(t,e){await t({name:"remove",target:e})}function ZF(t,e){let{anchor:r,rangeType:n,active:i}=t;if(r.type!=="primitive"||n!=="continuous")return t;let o=r.modifiers.map((s,l)=>[s,l]);for(let[s,l]of o.reverse())for(let p of TZ){let u=p.accept(s);if(u.accepted){let[m,d]=[r.modifiers.slice(0,l+1),r.modifiers.slice(l+1)],g={...t,anchor:d.length===0&&e?{type:"implicit"}:{type:"primitive",mark:r.mark,modifiers:d},active:jf(i,x=>{x.modifiers=x.modifiers.slice(Ko(x.modifiers,b=>p.accept(b).accepted)+1)})};return g=u.transformTarget?.(g)??g,{type:"primitive",mark:{type:"target",target:g},modifiers:m}}}return t}var TZ=[{accept(t){return t.type==="everyScope"&&t.scopeType.type!=="instance"?{accepted:!0,transformTarget(e){return{...e,exclusionScopeType:t.scopeType}}}:{accepted:!1}}},{accept(t){return{accepted:(t.type==="everyScope"||t.type==="relativeScope"||t.type==="ordinalScope")&&t.scopeType.type==="instance"}}}];function cb(t,e){switch(t.type){case"list":return SZ(t,e);case"range":return YF(t,e);case"primitive":return Ug(t,e);case"implicit":return t}}function SZ(t,e){return{...t,elements:t.elements.map((r,n)=>{let i=e.concat(t.elements.slice(0,n));switch(r.type){case"range":return YF(r,i);case"primitive":return Ug(r,i)}})}}function YF(t,e){let r=vZ(t,e),n=t.anchor.type==="implicit"||t.anchor.mark==null;return ZF(r,n)}function vZ(t,e){return{type:"range",rangeType:t.rangeType??"continuous",excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1,anchor:t.anchor.type==="implicit"?t.anchor:Ug(t.anchor,e),active:Ug(t.active,e.concat(t.anchor))}}function Ug(t,e){let r=sb(t.mark??(bZ(t)?EZ(e):null)??{type:"cursor"}),n=XF(t)??RZ(e)??kZ(e)??[];return{type:t.type,mark:r,modifiers:n}}function bZ(t){return t.modifiers?.some(e=>e.type==="inferPreviousMark")??!1}function XF(t){let e=t.modifiers?.filter(r=>r.type!=="inferPreviousMark")??[];return e.length!==0?e:void 0}function wZ(t){if(_Z(t))return[{type:"containingScope",scopeType:{type:"line"}}]}function _Z(t){let e=r=>r?.type==="lineNumber";return e(t.mark)?!0:t.mark?.type==="range"?e(t.mark.anchor)&&e(t.mark.active):!1}function EZ(t){return fp(t,e=>e.mark)}function RZ(t){return fp(t,XF)}function kZ(t){return fp(t,wZ)}function fp(t,e){for(let r=t.length-1;r>-1;--r){let n=t[r];switch(n.type){case"primitive":{let i=e(n);if(i!=null)return i;break}case"range":{let i=fp([n.anchor],e);if(i!=null)return i;break}case"list":{let i=fp(n.elements,e);if(i!=null)return i;break}}}}function sb(t){switch(t.type){case"range":return{...t,anchor:sb(t.anchor),active:sb(t.active)};case"target":return{type:"target",target:cb(t.target,[])};default:return t}}var Hg=class{constructor(e,r,n,i,o){this.commandServerApi=e;this.debug=r;this.storedTargets=n;this.pipelineRunner=i;this.actions=o;this.finalStages=[];this.runAction=this.runAction.bind(this),this.inferenceContext=new lb(this.debug)}async run(e){if(ea(e)){let u=await QF(this.commandServerApi,this.runAction,e);if(u!=null)return{fallback:u}}let{returnValue:r,thatSelections:n,thatTargets:i,sourceSelections:o,sourceTargets:s,instanceReferenceTargets:l,keyboardTargets:p}=await this.runAction(e.action);return this.storedTargets.set("that",JF(i,n)),this.storedTargets.set("source",JF(s,o)),this.storedTargets.set("instanceReference",l),this.storedTargets.set("keyboard",p,{history:!0}),{returnValue:r}}runAction(e){switch(this.inferenceContext.reset(),this.finalStages=[],e.name){case"replaceWithTarget":return this.actions.replaceWithTarget.run(this.getTargets(e.source),this.getDestinations(e.destination));case"moveToTarget":return this.actions.moveToTarget.run(this.getTargets(e.source),this.getDestinations(e.destination));case"swapTargets":return this.actions.swapTargets.run(this.getTargets(e.target1),this.getTargets(e.target2));case"callAsFunction":return this.actions.callAsFunction.run(this.getTargets(e.callee),this.getTargets(e.argument));case"wrapWithPairedDelimiter":return this.actions.wrapWithPairedDelimiter.run(this.getTargets(e.target),e.left,e.right);case"rewrapWithPairedDelimiter":return this.finalStages=this.actions.rewrapWithPairedDelimiter.getFinalStages(),this.actions.rewrapWithPairedDelimiter.run(this.getTargets(e.target),e.left,e.right);case"pasteFromClipboard":return this.actions.pasteFromClipboard.run(this.getDestinations(e.destination));case"executeCommand":return this.actions.executeCommand.run(this.getTargets(e.target),e.commandId,e.options);case"replace":return this.actions.replace.run(this.getDestinations(e.destination),e.replaceWith);case"highlight":return this.actions.highlight.run(this.getTargets(e.target),e.highlightId);case"generateSnippet":return this.actions.generateSnippet.run(this.getTargets(e.target),e.directory,e.snippetName);case"insertSnippet":return this.finalStages=this.actions.insertSnippet.getFinalStages(this.getDestinations(e.destination),e.snippetDescription),this.actions.insertSnippet.run(this.getDestinations(e.destination),e.snippetDescription);case"wrapWithSnippet":return this.finalStages=this.actions.wrapWithSnippet.getFinalStages(this.getTargets(e.target),e.snippetDescription),this.actions.wrapWithSnippet.run(this.getTargets(e.target),e.snippetDescription);case"editNew":return this.actions.editNew.run(this.getDestinations(e.destination));case"getText":return this.actions.getText.run(this.getTargets(e.target),e.options);case"parsed":return this.runAction(ym(e.content,e.arguments));default:{let r=this.actions[e.name];if(r==null)throw new Error(`Unknown action: ${e.name}`);return this.finalStages=r.getFinalStages?.()??[],this.noAutomaticTokenExpansion=r.noAutomaticTokenExpansion??!1,r.run(this.getTargets(e.target))}}}getTargets(e){let r=this.inferenceContext.run(e);return this.pipelineRunner.run(r,{actionFinalStages:this.finalStages,noAutomaticTokenExpansion:this.noAutomaticTokenExpansion})}getDestinations(e){switch(e.type){case"list":return e.destinations.flatMap(r=>this.getDestinations(r));case"primitive":return this.getTargets(e.target).map(r=>r.toDestination(e.insertionMode));case"implicit":return this.getTargets({type:"implicit"}).map(r=>r.toDestination("to"))}}},lb=class{constructor(e){this.debug=e;this.previousTargets=[]}run(e){let r=cb(e,this.previousTargets);return this.debug.active&&(this.debug.log("Full target:"),this.debug.log(JSON.stringify(r,null,2))),this.previousTargets.push(e),r}reset(){this.previousTargets=[]}};function JF(t,e){if(t!=null&&e!=null)throw Error("Actions may only return full targets or selections for that mark");return e!=null?e.map(ic):t}var Vg=class{constructor(e,r){this.readableHatMap=e;this.mark=r}run(){let e=this.readableHatMap.getToken(this.mark.symbolColor,this.mark.character);if(e==null)throw new Error(`Couldn't find mark ${this.mark.symbolColor} '${this.mark.character}'`);return[new Mt({editor:e.editor,contentRange:e.range,isReversed:!1,hasExplicitRange:!1})]}};var Bg=class{constructor(e){this.mark=e}run(){let{editorId:e,range:{start:r,end:n}}=this.mark,i=k().visibleTextEditors.find(s=>s.id===e);if(i==null)throw new Error(`Couldn't find editor '${e}'`);let o=new W(r.line,r.character,n.line,n.character);return[new Mt({editor:i,contentRange:o,isReversed:!1,hasExplicitRange:!1})]}};var Wg=class{constructor(e){this.mark=e}run(){let e=k().activeTextEditor;if(e==null)return[];let r=PZ(e,this.mark.lineNumberType,this.mark.lineNumber),n=e.document.lineAt(r).range;return[nv(e,!1,n)]}},PZ=(t,e,r)=>{switch(e){case"absolute":return r;case"relative":return t.selections[0].active.line+r;case"modulo100":{let i=t.visibleRanges[0].start.line,o=t.visibleRanges[t.visibleRanges.length-1].end.line,s=Math.floor(i/100)*100,l=[],p=[],u=s+r;for(;u<=o;)u>=i&&(t.visibleRanges.find(d=>u>=d.start.line&&u<=d.end.line)?l.push(u):p.push(u)),u+=100;if(l.length===1)return l[0];if(l.length+p.length>1)throw new Error("Multiple lines matching");if(p.length===1)return p[0];throw new Error("Line is not in viewport")}}};var $g=class{constructor(e){this.mark=e}run(){return[]}};var jg=class{constructor(e,r){this.markStageFactory=e;this.mark=r}run(){let e=this.markStageFactory.create(this.mark.anchor),r=this.markStageFactory.create(this.mark.active),n=e.run(),i=r.run();if(n.length!==1||i.length!==1)throw new Error("Expected single anchor and active target");return[wo(n[0],i[0],this.mark.excludeAnchor,this.mark.excludeActive)]}};var qg=class{constructor(e,r){this.storedTargets=e;this.key=r}run(){let e=this.storedTargets.get(this.key);if(e==null||e.length===0)throw Error(`No available ${this.key} marks`);return e}};var zg=class{constructor(e,r){this.targetPipelineRunner=e;this.mark=r}run(){return this.targetPipelineRunner.run(this.mark.target)}};var Gg=class{constructor(e,r){this.readableHatMap=e;this.storedTargets=r;this.create=this.create.bind(this)}setPipelineRunner(e){this.targetPipelineRunner=e}create(e){switch(e.type){case"cursor":return new As;case"that":case"source":case"keyboard":return new qg(this.storedTargets,e.type);case"decoratedSymbol":return new Vg(this.readableHatMap,e);case"lineNumber":return new Wg(e);case"range":return new jg(this,e);case"nothing":return new $g(e);case"target":return new zg(this.targetPipelineRunner,e);case"explicit":return new Bg(e);default:{let r=e,{type:n}=e;throw new Error(`Unknown mark: ${n}`)}}}};async function eI(t,e,r,n,i,o,s,l,p,u){r.active&&(r.log("command:"),r.log(JSON.stringify(u,null,2)));let m=LS(u),d=await n.getReadableMap(m.usePrePhraseSnapshot),g=MZ(t,e,s,r,o,d,i,l);for(let b of p)g=b.wrapCommandRunner(d,g);let x=await g.run(m);return await AZ(u,x)}async function AZ(t,e){if(ea(t))return e;if("returnValue"in e)return e.returnValue}function MZ(t,e,r,n,i,o,s,l){let p=new nc(r,i,new Hs(r)),u=new Gg(o,i),m=new Xd(p,u);return u.setPipelineRunner(m),new Hg(e,n,i,m,new Ig(t,s,l,p))}var tI=["clojure","css","latex","ruby","rust","scala","scss"];async function rI(t,e){await DZ(t,e)}async function DZ(t,e){let r=[];for(let n of tI)await t.loadLanguage(n),await e.loadLanguage(n),ki(Bl[n]??{}).map(i=>{e.get(n)?.getScopeHandler({type:i})!=null&&r.push(`Scope '${i}' defined as both legacy and new for language ${n}`)});if(r.length>0)throw Error(r.join(`
`))}function nI(t){return OP(t)?fl(t.type).replace("."," "):t.type==="surroundingPair"?`Matching pair of ${fl(t.delimiter)}`:t.type==="customRegex"?`Regex \`${t.regex}\``:"Unknown scope type"}var Kg=class{constructor(e){this.customSpokenFormGenerator=e;this.listeners=[];this.disposable=e.onDidChangeCustomSpokenForms(()=>this.onChange()),this.onDidChangeScopeInfo=this.onDidChangeScopeInfo.bind(this),this.getScopeTypeInfo=this.getScopeTypeInfo.bind(this),this.updateScopeTypeInfos()}onDidChangeScopeInfo(e){return e(this.getScopeTypeInfos()),this.listeners.push(e),{dispose:()=>{nr(this.listeners,e)}}}async onChange(){this.updateScopeTypeInfos(),this.listeners.forEach(e=>e(this.scopeInfos))}updateScopeTypeInfos(){let e=[...Jo.filter(r=>r!=="instance").map(r=>({type:r})),...Of.map(r=>({type:"surroundingPair",delimiter:r})),...this.customSpokenFormGenerator.getCustomRegexScopeTypes()];this.scopeInfos=e.map(r=>this.getScopeTypeInfo(r))}getScopeTypeInfos(){return this.scopeInfos}getScopeTypeInfo(e){return{scopeType:e,spokenForm:this.customSpokenFormGenerator.scopeTypeToSpokenForm(e),humanReadableName:nI(e),isLanguageSpecific:FZ(e)}}dispose(){this.disposable.dispose()}};function FZ(t){switch(t.type){case"string":case"argumentOrParameter":case"anonymousFunction":case"attribute":case"branch":case"class":case"className":case"collectionItem":case"collectionKey":case"command":case"comment":case"private.fieldAccess":case"functionCall":case"functionCallee":case"functionName":case"ifStatement":case"instance":case"interior":case"list":case"map":case"name":case"namedFunction":case"regularExpression":case"statement":case"type":case"value":case"condition":case"section":case"sectionLevelOne":case"sectionLevelTwo":case"sectionLevelThree":case"sectionLevelFour":case"sectionLevelFive":case"sectionLevelSix":case"selector":case"private.switchStatementSubject":case"unit":case"xmlBothTags":case"xmlElement":case"xmlEndTag":case"xmlStartTag":case"part":case"chapter":case"subSection":case"subSubSection":case"namedParagraph":case"subParagraph":case"environment":case"textFragment":case"disqualifyDelimiter":case"pairDelimiter":return!0;case"character":case"word":case"token":case"identifier":case"line":case"sentence":case"paragraph":case"boundedParagraph":case"document":case"nonWhitespaceSequence":case"boundedNonWhitespaceSequence":case"url":case"notebookCell":case"surroundingPair":case"surroundingPairInterior":case"customRegex":case"glyph":return!1;case"oneOf":throw Error(`Can't decide whether scope type ${JSON.stringify(t,void 0,3)} is language-specific`)}}function pb(t,e,r){if(!r)return t.document.range;let n=t.visibleRanges.reduce((s,l)=>s.union(l));n=t.document.range.intersection(n.with(n.start.translate(-10),n.end.translate(10)));let i=df(Array.from(e.generateScopes(t,n.start,"forward",{containment:"required"})))?.domain??n,o=df(Array.from(e.generateScopes(t,n.end,"forward",{containment:"required"})))?.domain??n;return i.union(o)}function Ra(t){return{contentRange:t.contentRange,removalRange:t.getRemovalRange(),removalHighlightRange:t.getRemovalHighlightRange(),leadingDelimiter:iI(t.getLeadingDelimiterTarget()),trailingDelimiter:iI(t.getTrailingDelimiterTarget()),interior:t.getInterior()?.map(Ra),boundary:t.getBoundary()?.map(Ra),insertionDelimiter:t.insertionDelimiter}}function iI(t){return t!=null?Ra(t):void 0}function oI(t,e,r,n,i){return Fs(e.generateScopes(t,n.start,"forward",{includeDescendantScopes:!0,distalPosition:n.end}),o=>({domain:o.domain,ranges:o.getTargets(!1).map(s=>({range:s.contentRange,targets:i?IZ(r,s).map(Ra):void 0}))}))}function IZ(t,e){try{return t.run(e)}catch(r){if(r.name==="NoContainingScopeError")return[];throw r}}function aI(t,e,r){return Fs(e.generateScopes(t,r.start,"forward",{includeDescendantScopes:!0,distalPosition:r.end}),n=>({domain:n.domain,targets:n.getTargets(!1).map(Ra)}))}var Qg=class{constructor(e,r){this.scopeHandlerFactory=e;this.modifierStageFactory=r;this.provideScopeRanges=this.provideScopeRanges.bind(this),this.provideIterationScopeRanges=this.provideIterationScopeRanges.bind(this)}provideScopeRanges(e,{scopeType:r,visibleOnly:n}){let i=this.scopeHandlerFactory.maybeCreate(r,e.document.languageId);return i==null?[]:aI(e,i,pb(e,i,n))}provideIterationScopeRanges(e,{scopeType:r,visibleOnly:n,includeNestedTargets:i}){let{languageId:o}=e.document,s=this.scopeHandlerFactory.maybeCreate(r,o);if(s==null)return[];let l=this.scopeHandlerFactory.maybeCreate(s.iterationScopeType,o);return l==null?[]:oI(e,l,this.modifierStageFactory.create({type:"everyScope",scopeType:r}),pb(e,s,n),i)}};var Zg=class{constructor(e,r){this.scopeRangeProvider=r;this.disposables=[];this.listeners=[];this.onChange=this.onChange.bind(this),this.onDidChangeScopeRanges=this.onDidChangeScopeRanges.bind(this),this.onDidChangeIterationScopeRanges=this.onDidChangeIterationScopeRanges.bind(this);let n=new Qn(k().configuration,()=>this.onChange());this.disposables.push(k().onDidChangeVisibleTextEditors(n.run),k().onDidOpenTextDocument(n.run),k().onDidCloseTextDocument(n.run),k().onDidChangeTextDocument(n.run),k().onDidChangeTextEditorVisibleRanges(n.run),e.onDidChangeDefinition(this.onChange),n)}onDidChangeScopeRanges(e,r){let n=()=>{k().visibleTextEditors.forEach(i=>{let o;try{o=this.scopeRangeProvider.provideScopeRanges(i,r)}catch(s){if(at(k().messages,"ScopeRangeWatcher.provide",s.message),o=[],k().runMode==="test")throw s}e(i,o)})};return this.listeners.push(n),n(),{dispose:()=>{nr(this.listeners,n)}}}onDidChangeIterationScopeRanges(e,r){let n=()=>{k().visibleTextEditors.forEach(i=>{e(i,this.scopeRangeProvider.provideIterationScopeRanges(i,r))})};return this.listeners.push(n),n(),{dispose:()=>{nr(this.listeners,n)}}}onChange(){this.listeners.forEach(e=>e())}dispose(){this.disposables.forEach(({dispose:e})=>{try{e()}catch{}})}};var Yg=class{constructor(e){this.scopeHandlerFactory=e;this.getScopeSupport=this.getScopeSupport.bind(this),this.getIterationScopeSupport=this.getIterationScopeSupport.bind(this)}getScopeSupport(e,r){let{languageId:n}=e.document,i=this.scopeHandlerFactory.maybeCreate(r,n);return i==null?cI(n,r):sI(e,i)?0:1}getIterationScopeSupport(e,r){let{languageId:n}=e.document,i=this.scopeHandlerFactory.maybeCreate(r,n);if(i==null)return cI(n,r);let o=this.scopeHandlerFactory.maybeCreate(i.iterationScopeType,n);return o==null?3:sI(e,o)?0:1}};function sI(t,e){return!UP(e.generateScopes(t,new pe(0,0),"forward"))}function cI(t,e){switch(e.type){case"notebookCell":return 3;default:return Bl[t]?.[e.type]!=null?2:3}}var Xg=class{constructor(e,r,n){this.scopeSupportChecker=r;this.scopeInfoProvider=n;this.listeners=[];this.onChange=this.onChange.bind(this),this.onDidChangeScopeSupport=this.onDidChangeScopeSupport.bind(this);let i=new Qn(k().configuration,()=>this.onChange());this.disposable=LP(k().onDidOpenTextDocument(i.run),k().onDidCloseTextDocument(i.run),k().onDidChangeActiveTextEditor(i.run),k().onDidChangeTextDocument(i.run),e.onDidChangeDefinition(i.run),this.scopeInfoProvider.onDidChangeScopeInfo(this.onChange),i)}onDidChangeScopeSupport(e){return e(this.getSupportLevels()),this.listeners.push(e),{dispose:()=>{nr(this.listeners,e)}}}onChange(){if(this.listeners.length===0)return;let e=this.getSupportLevels();this.listeners.forEach(r=>r(e))}getSupportLevels(){let e=k().activeTextEditor,r=e==null?()=>3:o=>this.scopeSupportChecker.getScopeSupport(e,o),n=e==null?()=>3:o=>this.scopeSupportChecker.getIterationScopeSupport(e,o);return this.scopeInfoProvider.getScopeTypeInfos().map(o=>({...o,support:r(o.scopeType),iterationScopeSupport:n(o.scopeType)}))}dispose(){this.disposable.dispose()}};async function lI({ide:t,hats:e,treeSitterQueryProvider:r,treeSitter:n=new Zm,commandServerApi:i=new qm,talonSpokenForms:o=new Qm,snippets:s=new Km}){bm(t);let l=new Um(t),p=new jm,u=new _m,m=new Lm(t,u),d=new Jm(o),g=e!=null?new Wm(p,l,e,i):new zm;g.allocateHats();let x=r?await Wd.create(t,n,r):new Gm;t.disposeOnExit(p,x,g,l,m);let b=[],v,I=F=>(v=F,eI(n,i,l,g,s,u,x,p,b,F));return{commandApi:{runCommand(F){return I(F)},runCommandSafe(...F){return I(Nf(F))},repeatPreviousCommand(){if(v==null)throw new Error("No previous command");return I(v)}},scopeProvider:OZ(x,u,d),customSpokenFormGenerator:d,storedTargets:u,hatTokenMap:g,injectIde:bm,runIntegrationTests:()=>rI(n,x),addCommandRunnerDecorator:F=>{b.push(F)}}}function OZ(t,e,r){let n=new Hs(t),i=new Qg(n,new nc(t,e,n)),o=new Zg(t,i),s=new Yg(n),l=new Kg(r),p=new Xg(t,s,l);return{provideScopeRanges:i.provideScopeRanges,provideIterationScopeRanges:i.provideIterationScopeRanges,onDidChangeScopeRanges:o.onDidChangeScopeRanges,onDidChangeIterationScopeRanges:o.onDidChangeIterationScopeRanges,getScopeSupport:s.getScopeSupport,getIterationScopeSupport:s.getIterationScopeSupport,onDidChangeScopeSupport:p.onDidChangeScopeSupport,getScopeInfo:l.getScopeTypeInfo,onDidChangeScopeInfo:l.onDidChangeScopeInfo}}function pI(t,e){switch(e.type){case"UntypedTarget":return new Mt({editor:t,isReversed:e.isReversed,contentRange:Rf(e.contentRange),hasExplicitRange:e.hasExplicitRange});case"LineTarget":return new ar({editor:t,isReversed:e.isReversed,contentRange:Rf(e.contentRange)});default:throw Error(`Unsupported target type ${e.type}`)}}var ULe=Symbol("unused");var mp=class{constructor(e){this.position=e}},HLe={$0:new mp(0),$1:new mp(1),$2:new mp(2)};var uI=require("node:events"),Jg=class{constructor(){this.apis=new Map,this.commands=new Map,this.eventEmitter=new uI.EventEmitter}registerExtensionApi(e,r){this.apis.set(e,r)}getExtensionApi(e){return this.apis.get(e)}registerCommand(e,r){this.commands.set(e,r)}async executeCommand(e,...r){return await this.commands.get(e)(...r)}onEvent(e,r){return this.eventEmitter.on(e,r)}emitEvent(e,...r){return this.eventEmitter.emit(e,...r)}};function qr(){return global._neovimRegistry==null&&(global._neovimRegistry=new Jg),global._neovimRegistry}var fI="pokey.cursorless";async function ey(t,e){let r='return require("cursorless").buffer_get_selection()',[n,i,o,s,l]=await e.executeLua(r,[]),p;return l===!0?p=[new be(new pe(o-1,s-1),new pe(n-1,i-1))]:p=[new be(new pe(n-1,i-1),new pe(o-1,s-1))],console.debug(`bufferGetSelections(): selections=(${p[0].start.line}, ${p[0].start.character}), (${p[0].end.line}, ${p[0].end.character}) neovim=(${n},${i}),(${o},${s}),reverse=${l}`),p}async function mI(t,e){if(e.length!==1)throw new Error("bufferSetSelections() only supports one selection");let r=`return require("cursorless").select_range(${e[0].start.line+1}, ${e[0].start.character}, ${e[0].end.line+1}, ${e[0].end.character})`;console.debug(`bufferSetSelections() selections=(${e[0].start.line},${e[0].start.character}),(${e[0].end.line},${e[0].end.character}) luaCode="${r}"`),await t.executeLua(r,[])}async function dI(t,e,r){let n='return require("cursorless").window_get_visible_lines()',[i,o]=await e.executeLua(n,[]),s=new W(new pe(i-1,0),new pe(o-1,r[o-1].length-1));return console.debug(`windowGetVisibleRanges(): range=(${s.start.line}, ${s.start.character}), (${s.end.line}, ${s.end.character})`),[s]}async function hI(t){return await t.executeLua('return require("cursorless.utils").cursorless_nvim_path()',[])}async function ty(t,e){await e.callFunction("setreg",["*",t])}async function gI(t){return await t.callFunction("getreg",["*"])}async function yI(t){await t.executeLua('return require("cursorless.utils").paste()',[])}async function xI(t){await t.executeLua('return require("cursorless.utils").mode_switch_nt()',[])}async function TI(t){await t.executeLua('return require("cursorless.utils").mode_switch_t()',[])}async function SI(t,e){let r=`vim.notify("${e}")`;await t.executeLua(r,[])}var NZ={clipboardCopy:{acceptsLocation:!1},clipboardPaste:!0,toggleLineComment:void 0,indentLine:void 0,outdentLine:void 0,rename:void 0,quickFix:void 0,revealDefinition:void 0,revealTypeDefinition:void 0,showHover:void 0,showDebugHover:void 0,extractVariable:void 0,fold:void 0,highlight:{acceptsLocation:!0},unfold:void 0,showReferences:void 0,insertLineAfter:void 0,gitAccept:void 0,gitRevert:void 0,gitStage:void 0,gitUnstage:void 0},ry=class{constructor(){this.commands=NZ}};var dp=class{constructor(e){this.client=e}async readText(){return await gI(this.client)}async writeText(e){return await ty(e,this.client)}};var ny=yr(ub(),1);var gp=class{constructor(){this.notifier=new qt;this.mocks={...Sf};this.scopes=[];this.onDidChangeConfiguration=this.notifier.registerListener;this.onDidChangeConfiguration=this.onDidChangeConfiguration.bind(this)}getOwnConfiguration(e,r){if(r!=null){for(let{scope:n,values:i}of this.scopes)if(LZ(n,r))return(0,ny.get)(i,e)??(0,ny.get)(this.mocks,e)}return(0,ny.get)(this.mocks,e)}mockConfiguration(e,r){this.mocks[e]=r,this.notifier.notifyListeners()}mockConfigurationScope(e,r,n=!1){this.scopes.push({scope:e,values:r}),n||this.notifier.notifyListeners()}};function LZ(t,e){return t.languageId===e.languageId}async function fb(t,e,r,n){console.debug("neovimEdit() [unsorted]:");for(let s of n)console.debug(`	range=${JSON.stringify(s.range)}, text='${s.text}', isReplace=${s.isReplace}`);n.sort((s,l)=>(vI(s)||bI(s))&&(vI(l)||bI(l))?1:s.range.start.line===l.range.start.line?l.range.start.character-s.range.start.character:l.range.start.line-s.range.start.line),console.debug("neovimEdit() [sorted]:");for(let s of n)console.debug(`	range=${JSON.stringify(s.range)}, text='${s.text}', isReplace=${s.isReplace}`);let i=e.getTextDocument(await t.window.buffer),o=[];for(let s of n)o.push({range:s.range,rangeOffset:i.offsetAt(s.range.start),rangeLength:i.offsetAt(s.range.end)-i.offsetAt(s.range.start),text:s.text});qr().emitEvent("onDidChangeTextDocument",{document:i,contentChanges:o});for(let s of n){let{range:l,text:p,isReplace:u}=s;p===""?await wI(t,l):l.isEmpty&&!u?await _I(t,l.start,p):await UZ(t,l,p)}return await e.updateTextEditor(),!0}async function wI(t,e){console.debug(`neovimDelete(): range=${JSON.stringify(e)}`);let r=await t.window.buffer,n=(await r.getLines({start:e.end.line,end:e.end.line+1,strictIndexing:!0}))[0],i=n.slice(e.end.character);if(e.start.line===e.end.line){let l=n.slice(0,e.start.character)+i;await r.setLines(l,{start:e.start.line,end:e.start.line+1,strictIndexing:!0});return}if(e.start.character===0){await r.setLines(i,{start:e.start.line,end:e.end.line+1,strictIndexing:!0});return}let o=(await r.getLines({start:e.start.line,end:e.start.line+1,strictIndexing:!0}))[0],s=o.slice(0,e.start.character);if(e.start.character<=o.length){await r.setLines(s+i,{start:e.start.line,end:e.end.line+1,strictIndexing:!0});return}await r.setLines([s,i],{start:e.start.line,end:e.end.line+1,strictIndexing:!0})}async function _I(t,e,r){console.debug(`neovimInsert(): position=${JSON.stringify(e)}, text='${r}'`);let n=r.replace(/(?:\r\n|\r|\n)/g,`
`).split(`
`),i=await t.window.buffer,o=(await i.getLines({start:e.line,end:e.line+1,strictIndexing:!0}))[0],s=o.slice(0,e.character),l=o.slice(e.character);if(n.length===1){let m=s+n[0]+l;await i.setLines(m,{start:e.line,end:e.line+1,strictIndexing:!0});return}let p=s+n[0],u=n[n.length-1]+l;await i.setLines([p,...n.slice(1,n.length-1),u],{start:e.line,end:e.line+1,strictIndexing:!0})}async function UZ(t,e,r){console.debug(`neovimReplace(): range=${JSON.stringify(e)}, text='${r}'`),await wI(t,e),await _I(t,e.start,r)}function vI(t){return t.range.isEmpty&&!t.isReplace}function bI(t){return t.text!==""&&!!(!t.range.isEmpty||t.isReplace)}function EI(t){return qr().onEvent("onDidChangeTextDocument",t),kI()}function RI(t,e,r){return qr().onEvent("onDidOpenTextDocument",t),kI()}function kI(){return{dispose(){}}}var yp=class{constructor(){this.data={...vf}}get(e){return this.data[e]}set(e,r){return this.data[e]=r,Promise.resolve()}};var D1=yr(ub(),1);var xp=class{async showMessage(e,r,n,...i){}};async function PI(t,e){let r=e.activeTextEditor,n=await t.window,i=await ey(n,t),o=r.document.getText(i[0]);await ty(o,t)}async function AI(t,e){await yI(t)}var iy=class{constructor(e,r,n,i,o,s,l){this.id=e;this.client=r;this.neovimIDE=n;this.window=i;this._document=o,this._selections=l,this._visibleRanges=s}get document(){return this._document}updateDocument(e,r,n,i){if(n)this._document=n;else if(i)this._document.update(i);else throw Error("updateDocument(): invalid arguments");return this._selections=r,this._visibleRanges=e,this._document}get selections(){return this._selections}async setSelections(e){this._selections=e,await mI(this.client,e)}get visibleRanges(){return this._visibleRanges}get options(){throw Error("get options Not implemented")}set options(e){throw Error("set options Not implemented")}get isActive(){return!0}isEqual(e){return this.id===e.id}async revealRange(e){}revealLine(e,r){throw Error("revealLine Not implemented")}async edit(e){return await fb(this.client,this.neovimIDE,this.window,e)}focus(){return Promise.resolve()}editNewNotebookCellAbove(){throw Error("editNewNotebookCellAbove Not implemented")}editNewNotebookCellBelow(){throw Error("editNewNotebookCellBelow Not implemented")}openLink(e,r){throw Error("openLink Not implemented")}fold(e){throw Error("fold Not implemented")}unfold(e){throw Error("unfold Not implemented")}toggleBreakpoint(e){throw Error("toggleBreakpoint Not implemented")}async toggleLineComment(e){throw Error("toggleLineComment Not implemented")}async clipboardCopy(e){await PI(this.client,this.neovimIDE)}async clipboardPaste(){await AI(this.client,this.neovimIDE)}async indentLine(e){throw Error("indentLine Not implemented")}async outdentLine(e){throw Error("outdentLine Not implemented")}async insertLineAfter(e){throw Error("insertLineAfter Not implemented")}insertSnippet(e,r){throw Error("insertSnippet Not implemented")}async rename(e){throw Error("rename Not implemented")}async showReferences(e){throw Error("showReferences Not implemented")}async quickFix(e){throw Error("quickFix Not implemented")}async revealDefinition(e){throw Error("revealDefinition Not implemented")}async revealTypeDefinition(e){throw Error("revealTypeDefinition Not implemented")}async showHover(e){throw Error("showHover Not implemented")}async showDebugHover(e){throw Error("showDebugHover Not implemented")}async extractVariable(e){throw Error("extractVariable Not implemented")}async gitAccept(e){throw Error("gitAccept Not implemented")}async gitRevert(e){throw Error("gitRevert Not implemented")}async gitStage(e){throw Error("gitStage Not implemented")}async gitUnstage(e){throw Error("gitUnstage Not implemented")}};var Iw=yr(require("path"),1);var MI;(()=>{"use strict";var t={470:i=>{function o(p){if(typeof p!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(p))}function s(p,u){for(var m,d="",g=0,x=-1,b=0,v=0;v<=p.length;++v){if(v<p.length)m=p.charCodeAt(v);else{if(m===47)break;m=47}if(m===47){if(!(x===v-1||b===1))if(x!==v-1&&b===2){if(d.length<2||g!==2||d.charCodeAt(d.length-1)!==46||d.charCodeAt(d.length-2)!==46){if(d.length>2){var I=d.lastIndexOf("/");if(I!==d.length-1){I===-1?(d="",g=0):g=(d=d.slice(0,I)).length-1-d.lastIndexOf("/"),x=v,b=0;continue}}else if(d.length===2||d.length===1){d="",g=0,x=v,b=0;continue}}u&&(d.length>0?d+="/..":d="..",g=2)}else d.length>0?d+="/"+p.slice(x+1,v):d=p.slice(x+1,v),g=v-x-1;x=v,b=0}else m===46&&b!==-1?++b:b=-1}return d}var l={resolve:function(){for(var p,u="",m=!1,d=arguments.length-1;d>=-1&&!m;d--){var g;d>=0?g=arguments[d]:(p===void 0&&(p=process.cwd()),g=p),o(g),g.length!==0&&(u=g+"/"+u,m=g.charCodeAt(0)===47)}return u=s(u,!m),m?u.length>0?"/"+u:"/":u.length>0?u:"."},normalize:function(p){if(o(p),p.length===0)return".";var u=p.charCodeAt(0)===47,m=p.charCodeAt(p.length-1)===47;return(p=s(p,!u)).length!==0||u||(p="."),p.length>0&&m&&(p+="/"),u?"/"+p:p},isAbsolute:function(p){return o(p),p.length>0&&p.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var p,u=0;u<arguments.length;++u){var m=arguments[u];o(m),m.length>0&&(p===void 0?p=m:p+="/"+m)}return p===void 0?".":l.normalize(p)},relative:function(p,u){if(o(p),o(u),p===u||(p=l.resolve(p))===(u=l.resolve(u)))return"";for(var m=1;m<p.length&&p.charCodeAt(m)===47;++m);for(var d=p.length,g=d-m,x=1;x<u.length&&u.charCodeAt(x)===47;++x);for(var b=u.length-x,v=g<b?g:b,I=-1,F=0;F<=v;++F){if(F===v){if(b>v){if(u.charCodeAt(x+F)===47)return u.slice(x+F+1);if(F===0)return u.slice(x+F)}else g>v&&(p.charCodeAt(m+F)===47?I=F:F===0&&(I=0));break}var U=p.charCodeAt(m+F);if(U!==u.charCodeAt(x+F))break;U===47&&(I=F)}var K="";for(F=m+I+1;F<=d;++F)F!==d&&p.charCodeAt(F)!==47||(K.length===0?K+="..":K+="/..");return K.length>0?K+u.slice(x+I):(x+=I,u.charCodeAt(x)===47&&++x,u.slice(x))},_makeLong:function(p){return p},dirname:function(p){if(o(p),p.length===0)return".";for(var u=p.charCodeAt(0),m=u===47,d=-1,g=!0,x=p.length-1;x>=1;--x)if((u=p.charCodeAt(x))===47){if(!g){d=x;break}}else g=!1;return d===-1?m?"/":".":m&&d===1?"//":p.slice(0,d)},basename:function(p,u){if(u!==void 0&&typeof u!="string")throw new TypeError('"ext" argument must be a string');o(p);var m,d=0,g=-1,x=!0;if(u!==void 0&&u.length>0&&u.length<=p.length){if(u.length===p.length&&u===p)return"";var b=u.length-1,v=-1;for(m=p.length-1;m>=0;--m){var I=p.charCodeAt(m);if(I===47){if(!x){d=m+1;break}}else v===-1&&(x=!1,v=m+1),b>=0&&(I===u.charCodeAt(b)?--b==-1&&(g=m):(b=-1,g=v))}return d===g?g=v:g===-1&&(g=p.length),p.slice(d,g)}for(m=p.length-1;m>=0;--m)if(p.charCodeAt(m)===47){if(!x){d=m+1;break}}else g===-1&&(x=!1,g=m+1);return g===-1?"":p.slice(d,g)},extname:function(p){o(p);for(var u=-1,m=0,d=-1,g=!0,x=0,b=p.length-1;b>=0;--b){var v=p.charCodeAt(b);if(v!==47)d===-1&&(g=!1,d=b+1),v===46?u===-1?u=b:x!==1&&(x=1):u!==-1&&(x=-1);else if(!g){m=b+1;break}}return u===-1||d===-1||x===0||x===1&&u===d-1&&u===m+1?"":p.slice(u,d)},format:function(p){if(p===null||typeof p!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof p);return function(u,m){var d=m.dir||m.root,g=m.base||(m.name||"")+(m.ext||"");return d?d===m.root?d+g:d+"/"+g:g}(0,p)},parse:function(p){o(p);var u={root:"",dir:"",base:"",ext:"",name:""};if(p.length===0)return u;var m,d=p.charCodeAt(0),g=d===47;g?(u.root="/",m=1):m=0;for(var x=-1,b=0,v=-1,I=!0,F=p.length-1,U=0;F>=m;--F)if((d=p.charCodeAt(F))!==47)v===-1&&(I=!1,v=F+1),d===46?x===-1?x=F:U!==1&&(U=1):x!==-1&&(U=-1);else if(!I){b=F+1;break}return x===-1||v===-1||U===0||U===1&&x===v-1&&x===b+1?v!==-1&&(u.base=u.name=b===0&&g?p.slice(1,v):p.slice(b,v)):(b===0&&g?(u.name=p.slice(1,x),u.base=p.slice(1,v)):(u.name=p.slice(b,x),u.base=p.slice(b,v)),u.ext=p.slice(x,v)),b>0?u.dir=p.slice(0,b-1):g&&(u.dir="/"),u},sep:"/",delimiter:":",win32:null,posix:null};l.posix=l,i.exports=l}},e={};function r(i){var o=e[i];if(o!==void 0)return o.exports;var s=e[i]={exports:{}};return t[i](s,s.exports,r),s.exports}r.d=(i,o)=>{for(var s in o)r.o(o,s)&&!r.o(i,s)&&Object.defineProperty(i,s,{enumerable:!0,get:o[s]})},r.o=(i,o)=>Object.prototype.hasOwnProperty.call(i,o),r.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})};var n={};(()=>{let i;r.r(n),r.d(n,{URI:()=>g,Utils:()=>N}),typeof process=="object"?i=process.platform==="win32":typeof navigator=="object"&&(i=navigator.userAgent.indexOf("Windows")>=0);let o=/^\w[\w\d+.-]*$/,s=/^\//,l=/^\/\//;function p(O,D){if(!O.scheme&&D)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${O.authority}", path: "${O.path}", query: "${O.query}", fragment: "${O.fragment}"}`);if(O.scheme&&!o.test(O.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(O.path){if(O.authority){if(!s.test(O.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(l.test(O.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}let u="",m="/",d=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class g{static isUri(D){return D instanceof g||!!D&&typeof D.authority=="string"&&typeof D.fragment=="string"&&typeof D.path=="string"&&typeof D.query=="string"&&typeof D.scheme=="string"&&typeof D.fsPath=="string"&&typeof D.with=="function"&&typeof D.toString=="function"}scheme;authority;path;query;fragment;constructor(D,$,z,Q,Z,te=!1){typeof D=="object"?(this.scheme=D.scheme||u,this.authority=D.authority||u,this.path=D.path||u,this.query=D.query||u,this.fragment=D.fragment||u):(this.scheme=function(he,re){return he||re?he:"file"}(D,te),this.authority=$||u,this.path=function(he,re){switch(he){case"https":case"http":case"file":re?re[0]!==m&&(re=m+re):re=m}return re}(this.scheme,z||u),this.query=Q||u,this.fragment=Z||u,p(this,te))}get fsPath(){return U(this,!1)}with(D){if(!D)return this;let{scheme:$,authority:z,path:Q,query:Z,fragment:te}=D;return $===void 0?$=this.scheme:$===null&&($=u),z===void 0?z=this.authority:z===null&&(z=u),Q===void 0?Q=this.path:Q===null&&(Q=u),Z===void 0?Z=this.query:Z===null&&(Z=u),te===void 0?te=this.fragment:te===null&&(te=u),$===this.scheme&&z===this.authority&&Q===this.path&&Z===this.query&&te===this.fragment?this:new b($,z,Q,Z,te)}static parse(D,$=!1){let z=d.exec(D);return z?new b(z[2]||u,se(z[4]||u),se(z[5]||u),se(z[7]||u),se(z[9]||u),$):new b(u,u,u,u,u)}static file(D){let $=u;if(i&&(D=D.replace(/\\/g,m)),D[0]===m&&D[1]===m){let z=D.indexOf(m,2);z===-1?($=D.substring(2),D=m):($=D.substring(2,z),D=D.substring(z)||m)}return new b("file",$,D,u,u)}static from(D){let $=new b(D.scheme,D.authority,D.path,D.query,D.fragment);return p($,!0),$}toString(D=!1){return K(this,D)}toJSON(){return this}static revive(D){if(D){if(D instanceof g)return D;{let $=new b(D);return $._formatted=D.external,$._fsPath=D._sep===x?D.fsPath:null,$}}return D}}let x=i?1:void 0;class b extends g{_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=U(this,!1)),this._fsPath}toString(D=!1){return D?K(this,!0):(this._formatted||(this._formatted=K(this,!1)),this._formatted)}toJSON(){let D={$mid:1};return this._fsPath&&(D.fsPath=this._fsPath,D._sep=x),this._formatted&&(D.external=this._formatted),this.path&&(D.path=this.path),this.scheme&&(D.scheme=this.scheme),this.authority&&(D.authority=this.authority),this.query&&(D.query=this.query),this.fragment&&(D.fragment=this.fragment),D}}let v={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function I(O,D,$){let z,Q=-1;for(let Z=0;Z<O.length;Z++){let te=O.charCodeAt(Z);if(te>=97&&te<=122||te>=65&&te<=90||te>=48&&te<=57||te===45||te===46||te===95||te===126||D&&te===47||$&&te===91||$&&te===93||$&&te===58)Q!==-1&&(z+=encodeURIComponent(O.substring(Q,Z)),Q=-1),z!==void 0&&(z+=O.charAt(Z));else{z===void 0&&(z=O.substr(0,Z));let he=v[te];he!==void 0?(Q!==-1&&(z+=encodeURIComponent(O.substring(Q,Z)),Q=-1),z+=he):Q===-1&&(Q=Z)}}return Q!==-1&&(z+=encodeURIComponent(O.substring(Q))),z!==void 0?z:O}function F(O){let D;for(let $=0;$<O.length;$++){let z=O.charCodeAt($);z===35||z===63?(D===void 0&&(D=O.substr(0,$)),D+=v[z]):D!==void 0&&(D+=O[$])}return D!==void 0?D:O}function U(O,D){let $;return $=O.authority&&O.path.length>1&&O.scheme==="file"?`//${O.authority}${O.path}`:O.path.charCodeAt(0)===47&&(O.path.charCodeAt(1)>=65&&O.path.charCodeAt(1)<=90||O.path.charCodeAt(1)>=97&&O.path.charCodeAt(1)<=122)&&O.path.charCodeAt(2)===58?D?O.path.substr(1):O.path[1].toLowerCase()+O.path.substr(2):O.path,i&&($=$.replace(/\//g,"\\")),$}function K(O,D){let $=D?F:I,z="",{scheme:Q,authority:Z,path:te,query:he,fragment:re}=O;if(Q&&(z+=Q,z+=":"),(Z||Q==="file")&&(z+=m,z+=m),Z){let Re=Z.indexOf("@");if(Re!==-1){let ur=Z.substr(0,Re);Z=Z.substr(Re+1),Re=ur.lastIndexOf(":"),Re===-1?z+=$(ur,!1,!1):(z+=$(ur.substr(0,Re),!1,!1),z+=":",z+=$(ur.substr(Re+1),!1,!0)),z+="@"}Z=Z.toLowerCase(),Re=Z.lastIndexOf(":"),Re===-1?z+=$(Z,!1,!0):(z+=$(Z.substr(0,Re),!1,!0),z+=Z.substr(Re))}if(te){if(te.length>=3&&te.charCodeAt(0)===47&&te.charCodeAt(2)===58){let Re=te.charCodeAt(1);Re>=65&&Re<=90&&(te=`/${String.fromCharCode(Re+32)}:${te.substr(3)}`)}else if(te.length>=2&&te.charCodeAt(1)===58){let Re=te.charCodeAt(0);Re>=65&&Re<=90&&(te=`${String.fromCharCode(Re+32)}:${te.substr(2)}`)}z+=$(te,!0,!1)}return he&&(z+="?",z+=$(he,!1,!1)),re&&(z+="#",z+=D?re:I(re,!1,!1)),z}function ne(O){try{return decodeURIComponent(O)}catch{return O.length>3?O.substr(0,3)+ne(O.substr(3)):O}}let ie=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function se(O){return O.match(ie)?O.replace(ie,D=>ne(D)):O}var it=r(470);let Ct=it.posix||it,ct="/";var N;(function(O){O.joinPath=function(D,...$){return D.with({path:Ct.join(D.path,...$)})},O.resolvePath=function(D,...$){let z=D.path,Q=!1;z[0]!==ct&&(z=ct+z,Q=!0);let Z=Ct.resolve(z,...$);return Q&&Z[0]===ct&&!D.authority&&(Z=Z.substring(1)),D.with({path:Z})},O.dirname=function(D){if(D.path.length===0||D.path===ct)return D;let $=Ct.dirname(D.path);return $.length===1&&$.charCodeAt(0)===46&&($=""),D.with({path:$})},O.basename=function(D){return Ct.basename(D.path)},O.extname=function(D){return Ct.extname(D.path)}})(N||(N={}))})(),MI=n})();var{URI:DI,Utils:LUe}=MI;var XI=yr(jI(),1);var Sp=t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>65536)throw new TypeError("pattern is too long")};var zZ={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},vp=t=>t.replace(/[[\]\\-]/g,"\\$&"),GZ=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),qI=t=>t.join(""),zI=(t,e)=>{let r=e;if(t.charAt(r)!=="[")throw new Error("not in a brace expression");let n=[],i=[],o=r+1,s=!1,l=!1,p=!1,u=!1,m=r,d="";e:for(;o<t.length;){let v=t.charAt(o);if((v==="!"||v==="^")&&o===r+1){u=!0,o++;continue}if(v==="]"&&s&&!p){m=o+1;break}if(s=!0,v==="\\"&&!p){p=!0,o++;continue}if(v==="["&&!p){for(let[I,[F,U,K]]of Object.entries(zZ))if(t.startsWith(I,o)){if(d)return["$.",!1,t.length-r,!0];o+=I.length,K?i.push(F):n.push(F),l=l||U;continue e}}if(p=!1,d){v>d?n.push(vp(d)+"-"+vp(v)):v===d&&n.push(vp(v)),d="",o++;continue}if(t.startsWith("-]",o+1)){n.push(vp(v+"-")),o+=2;continue}if(t.startsWith("-",o+1)){d=v,o+=2;continue}n.push(vp(v)),o++}if(m<o)return["",!1,0,!1];if(!n.length&&!i.length)return["$.",!1,t.length-r,!0];if(i.length===0&&n.length===1&&/^\\?.$/.test(n[0])&&!u){let v=n[0].length===2?n[0].slice(-1):n[0];return[GZ(v),!1,m-r,!1]}let g="["+(u?"^":"")+qI(n)+"]",x="["+(u?"":"^")+qI(i)+"]";return[n.length&&i.length?"("+g+"|"+x+")":n.length?g:x,l,m-r,!0]};var Ln=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");var KZ=new Set(["!","?","+","*","@"]),GI=t=>KZ.has(t),QZ="(?!(?:^|/)\\.\\.?(?:$|/))",oy="(?!\\.)",ZZ=new Set(["[","."]),YZ=new Set(["..","."]),XZ=new Set("().*{}+?[]^$\\!"),JZ=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),hb="[^/]",KI=hb+"*?",QI=hb+"+?",pc=class t{type;#e;#t;#o=!1;#n=[];#a;#S;#l;#u=!1;#s;#c;#i=!1;constructor(e,r,n={}){this.type=e,e&&(this.#t=!0),this.#a=r,this.#e=this.#a?this.#a.#e:this,this.#s=this.#e===this?n:this.#e.#s,this.#l=this.#e===this?[]:this.#e.#l,e==="!"&&!this.#e.#u&&this.#l.push(this),this.#S=this.#a?this.#a.#n.length:0}get hasMagic(){if(this.#t!==void 0)return this.#t;for(let e of this.#n)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#t=!0;return this.#t}toString(){return this.#c!==void 0?this.#c:this.type?this.#c=this.type+"("+this.#n.map(e=>String(e)).join("|")+")":this.#c=this.#n.map(e=>String(e)).join("")}#g(){if(this!==this.#e)throw new Error("should only call on root");if(this.#u)return this;this.toString(),this.#u=!0;let e;for(;e=this.#l.pop();){if(e.type!=="!")continue;let r=e,n=r.#a;for(;n;){for(let i=r.#S+1;!n.type&&i<n.#n.length;i++)for(let o of e.#n){if(typeof o=="string")throw new Error("string part in extglob AST??");o.copyIn(n.#n[i])}r=n,n=r.#a}}return this}push(...e){for(let r of e)if(r!==""){if(typeof r!="string"&&!(r instanceof t&&r.#a===this))throw new Error("invalid part: "+r);this.#n.push(r)}}toJSON(){let e=this.type===null?this.#n.slice().map(r=>typeof r=="string"?r:r.toJSON()):[this.type,...this.#n.map(r=>r.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#u&&this.#a?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#a?.isStart())return!1;if(this.#S===0)return!0;let e=this.#a;for(let r=0;r<this.#S;r++){let n=e.#n[r];if(!(n instanceof t&&n.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#a?.type==="!")return!0;if(!this.#a?.isEnd())return!1;if(!this.type)return this.#a?.isEnd();let e=this.#a?this.#a.#n.length:0;return this.#S===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let r=new t(this.type,e);for(let n of this.#n)r.copyIn(n);return r}static#y(e,r,n,i){let o=!1,s=!1,l=-1,p=!1;if(r.type===null){let x=n,b="";for(;x<e.length;){let v=e.charAt(x++);if(o||v==="\\"){o=!o,b+=v;continue}if(s){x===l+1?(v==="^"||v==="!")&&(p=!0):v==="]"&&!(x===l+2&&p)&&(s=!1),b+=v;continue}else if(v==="["){s=!0,l=x,p=!1,b+=v;continue}if(!i.noext&&GI(v)&&e.charAt(x)==="("){r.push(b),b="";let I=new t(v,r);x=t.#y(e,I,x,i),r.push(I);continue}b+=v}return r.push(b),x}let u=n+1,m=new t(null,r),d=[],g="";for(;u<e.length;){let x=e.charAt(u++);if(o||x==="\\"){o=!o,g+=x;continue}if(s){u===l+1?(x==="^"||x==="!")&&(p=!0):x==="]"&&!(u===l+2&&p)&&(s=!1),g+=x;continue}else if(x==="["){s=!0,l=u,p=!1,g+=x;continue}if(GI(x)&&e.charAt(u)==="("){m.push(g),g="";let b=new t(x,m);m.push(b),u=t.#y(e,b,u,i);continue}if(x==="|"){m.push(g),g="",d.push(m),m=new t(null,r);continue}if(x===")")return g===""&&r.#n.length===0&&(r.#i=!0),m.push(g),g="",r.push(...d,m),u;g+=x}return r.type=null,r.#t=void 0,r.#n=[e.substring(n-1)],u}static fromGlob(e,r={}){let n=new t(null,void 0,r);return t.#y(e,n,0,r),n}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[r,n,i,o]=this.toRegExpSource();if(!(i||this.#t||this.#s.nocase&&!this.#s.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return n;let l=(this.#s.nocase?"i":"")+(o?"u":"");return Object.assign(new RegExp(`^${r}$`,l),{_src:r,_glob:e})}get options(){return this.#s}toRegExpSource(e){let r=e??!!this.#s.dot;if(this.#e===this&&this.#g(),!this.type){let p=this.isStart()&&this.isEnd(),u=this.#n.map(x=>{let[b,v,I,F]=typeof x=="string"?t.#f(x,this.#t,p):x.toRegExpSource(e);return this.#t=this.#t||I,this.#o=this.#o||F,b}).join(""),m="";if(this.isStart()&&typeof this.#n[0]=="string"&&!(this.#n.length===1&&YZ.has(this.#n[0]))){let b=ZZ,v=r&&b.has(u.charAt(0))||u.startsWith("\\.")&&b.has(u.charAt(2))||u.startsWith("\\.\\.")&&b.has(u.charAt(4)),I=!r&&!e&&b.has(u.charAt(0));m=v?QZ:I?oy:""}let d="";return this.isEnd()&&this.#e.#u&&this.#a?.type==="!"&&(d="(?:$|\\/)"),[m+u+d,Ln(u),this.#t=!!this.#t,this.#o]}let n=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",o=this.#m(r);if(this.isStart()&&this.isEnd()&&!o&&this.type!=="!"){let p=this.toString();return this.#n=[p],this.type=null,this.#t=void 0,[p,Ln(this.toString()),!1,!1]}let s=!n||e||r||!oy?"":this.#m(!0);s===o&&(s=""),s&&(o=`(?:${o})(?:${s})*?`);let l="";if(this.type==="!"&&this.#i)l=(this.isStart()&&!r?oy:"")+QI;else{let p=this.type==="!"?"))"+(this.isStart()&&!r&&!e?oy:"")+KI+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&s?")":this.type==="*"&&s?")?":`)${this.type}`;l=i+o+p}return[l,Ln(o),this.#t=!!this.#t,this.#o]}#m(e){return this.#n.map(r=>{if(typeof r=="string")throw new Error("string type in extglob ast??");let[n,i,o,s]=r.toRegExpSource(e);return this.#o=this.#o||s,n}).filter(r=>!(this.isStart()&&this.isEnd())||!!r).join("|")}static#f(e,r,n=!1){let i=!1,o="",s=!1;for(let l=0;l<e.length;l++){let p=e.charAt(l);if(i){i=!1,o+=(XZ.has(p)?"\\":"")+p;continue}if(p==="\\"){l===e.length-1?o+="\\\\":i=!0;continue}if(p==="["){let[u,m,d,g]=zI(e,l);if(d){o+=u,s=s||m,l+=d-1,r=r||g;continue}}if(p==="*"){n&&e==="*"?o+=QI:o+=KI,r=!0;continue}if(p==="?"){o+=hb,r=!0;continue}o+=JZ(p)}return[o,Ln(e),!!r,s]}};var uc=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&");var lr=(t,e,r={})=>(Sp(e),!r.nocomment&&e.charAt(0)==="#"?!1:new zr(e,r).match(t)),eY=/^\*+([^+@!?\*\[\(]*)$/,tY=t=>e=>!e.startsWith(".")&&e.endsWith(t),rY=t=>e=>e.endsWith(t),nY=t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),iY=t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),oY=/^\*+\.\*+$/,aY=t=>!t.startsWith(".")&&t.includes("."),sY=t=>t!=="."&&t!==".."&&t.includes("."),cY=/^\.\*+$/,lY=t=>t!=="."&&t!==".."&&t.startsWith("."),pY=/^\*+$/,uY=t=>t.length!==0&&!t.startsWith("."),fY=t=>t.length!==0&&t!=="."&&t!=="..",mY=/^\?+([^+@!?\*\[\(]*)?$/,dY=([t,e=""])=>{let r=JI([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},hY=([t,e=""])=>{let r=eC([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},gY=([t,e=""])=>{let r=eC([t]);return e?n=>r(n)&&n.endsWith(e):r},yY=([t,e=""])=>{let r=JI([t]);return e?n=>r(n)&&n.endsWith(e):r},JI=([t])=>{let e=t.length;return r=>r.length===e&&!r.startsWith(".")},eC=([t])=>{let e=t.length;return r=>r.length===e&&r!=="."&&r!==".."},tC=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",ZI={win32:{sep:"\\"},posix:{sep:"/"}},xY=tC==="win32"?ZI.win32.sep:ZI.posix.sep;lr.sep=xY;var Wt=Symbol("globstar **");lr.GLOBSTAR=Wt;var TY="[^/]",SY=TY+"*?",vY="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",bY="(?:(?!(?:\\/|^)\\.).)*?",wY=(t,e={})=>r=>lr(r,t,e);lr.filter=wY;var yn=(t,e={})=>Object.assign({},t,e),_Y=t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return lr;let e=lr;return Object.assign((n,i,o={})=>e(n,i,yn(t,o)),{Minimatch:class extends e.Minimatch{constructor(i,o={}){super(i,yn(t,o))}static defaults(i){return e.defaults(yn(t,i)).Minimatch}},AST:class extends e.AST{constructor(i,o,s={}){super(i,o,yn(t,s))}static fromGlob(i,o={}){return e.AST.fromGlob(i,yn(t,o))}},unescape:(n,i={})=>e.unescape(n,yn(t,i)),escape:(n,i={})=>e.escape(n,yn(t,i)),filter:(n,i={})=>e.filter(n,yn(t,i)),defaults:n=>e.defaults(yn(t,n)),makeRe:(n,i={})=>e.makeRe(n,yn(t,i)),braceExpand:(n,i={})=>e.braceExpand(n,yn(t,i)),match:(n,i,o={})=>e.match(n,i,yn(t,o)),sep:e.sep,GLOBSTAR:Wt})};lr.defaults=_Y;var rC=(t,e={})=>(Sp(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:(0,XI.default)(t));lr.braceExpand=rC;var EY=(t,e={})=>new zr(t,e).makeRe();lr.makeRe=EY;var RY=(t,e,r={})=>{let n=new zr(e,r);return t=t.filter(i=>n.match(i)),n.options.nonull&&!t.length&&t.push(e),t};lr.match=RY;var YI=/[?*]|[+@!]\(.*?\)|\[|\]/,kY=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),zr=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,r={}){Sp(e),r=r||{},this.options=r,this.pattern=e,this.platform=r.platform||tC,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!r.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!r.nonegate,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=r.windowsNoMagicRoot!==void 0?r.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let r of e)if(typeof r!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],r.debug&&(this.debug=(...o)=>console.error(...o)),this.debug(this.pattern,this.globSet);let n=this.globSet.map(o=>this.slashSplit(o));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let i=this.globParts.map((o,s,l)=>{if(this.isWindows&&this.windowsNoMagicRoot){let p=o[0]===""&&o[1]===""&&(o[2]==="?"||!YI.test(o[2]))&&!YI.test(o[3]),u=/^[a-z]:/i.test(o[0]);if(p)return[...o.slice(0,4),...o.slice(4).map(m=>this.parse(m))];if(u)return[o[0],...o.slice(1).map(m=>this.parse(m))]}return o.map(p=>this.parse(p))});if(this.debug(this.pattern,i),this.set=i.filter(o=>o.indexOf(!1)===-1),this.isWindows)for(let o=0;o<this.set.length;o++){let s=this.set[o];s[0]===""&&s[1]===""&&this.globParts[o][2]==="?"&&typeof s[3]=="string"&&/^[a-z]:$/i.test(s[3])&&(s[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let n=0;n<e.length;n++)for(let i=0;i<e[n].length;i++)e[n][i]==="**"&&(e[n][i]="*");let{optimizationLevel:r=1}=this.options;return r>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):r>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(r=>{let n=-1;for(;(n=r.indexOf("**",n+1))!==-1;){let i=n;for(;r[i+1]==="**";)i++;i!==n&&r.splice(n,i-n)}return r})}levelOneOptimize(e){return e.map(r=>(r=r.reduce((n,i)=>{let o=n[n.length-1];return i==="**"&&o==="**"?n:i===".."&&o&&o!==".."&&o!=="."&&o!=="**"?(n.pop(),n):(n.push(i),n)},[]),r.length===0?[""]:r))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let r=!1;do{if(r=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let o=e[i];i===1&&o===""&&e[0]===""||(o==="."||o==="")&&(r=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(r=!0,e.pop())}let n=0;for(;(n=e.indexOf("..",n+1))!==-1;){let i=e[n-1];i&&i!=="."&&i!==".."&&i!=="**"&&(r=!0,e.splice(n-1,2),n-=2)}}while(r);return e.length===0?[""]:e}firstPhasePreProcess(e){let r=!1;do{r=!1;for(let n of e){let i=-1;for(;(i=n.indexOf("**",i+1))!==-1;){let s=i;for(;n[s+1]==="**";)s++;s>i&&n.splice(i+1,s-i);let l=n[i+1],p=n[i+2],u=n[i+3];if(l!==".."||!p||p==="."||p===".."||!u||u==="."||u==="..")continue;r=!0,n.splice(i,1);let m=n.slice(0);m[i]="**",e.push(m),i--}if(!this.preserveMultipleSlashes){for(let s=1;s<n.length-1;s++){let l=n[s];s===1&&l===""&&n[0]===""||(l==="."||l==="")&&(r=!0,n.splice(s,1),s--)}n[0]==="."&&n.length===2&&(n[1]==="."||n[1]==="")&&(r=!0,n.pop())}let o=0;for(;(o=n.indexOf("..",o+1))!==-1;){let s=n[o-1];if(s&&s!=="."&&s!==".."&&s!=="**"){r=!0;let p=o===1&&n[o+1]==="**"?["."]:[];n.splice(o-1,2,...p),n.length===0&&n.push(""),o-=2}}}}while(r);return e}secondPhasePreProcess(e){for(let r=0;r<e.length-1;r++)for(let n=r+1;n<e.length;n++){let i=this.partsMatch(e[r],e[n],!this.preserveMultipleSlashes);if(i){e[r]=[],e[n]=i;break}}return e.filter(r=>r.length)}partsMatch(e,r,n=!1){let i=0,o=0,s=[],l="";for(;i<e.length&&o<r.length;)if(e[i]===r[o])s.push(l==="b"?r[o]:e[i]),i++,o++;else if(n&&e[i]==="**"&&r[o]===e[i+1])s.push(e[i]),i++;else if(n&&r[o]==="**"&&e[i]===r[o+1])s.push(r[o]),o++;else if(e[i]==="*"&&r[o]&&(this.options.dot||!r[o].startsWith("."))&&r[o]!=="**"){if(l==="b")return!1;l="a",s.push(e[i]),i++,o++}else if(r[o]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(l==="a")return!1;l="b",s.push(r[o]),i++,o++}else return!1;return e.length===r.length&&s}parseNegate(){if(this.nonegate)return;let e=this.pattern,r=!1,n=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)r=!r,n++;n&&(this.pattern=e.slice(n)),this.negate=r}matchOne(e,r,n=!1){let i=this.options;if(this.isWindows){let v=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),I=!v&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),F=typeof r[0]=="string"&&/^[a-z]:$/i.test(r[0]),U=!F&&r[0]===""&&r[1]===""&&r[2]==="?"&&typeof r[3]=="string"&&/^[a-z]:$/i.test(r[3]),K=I?3:v?0:void 0,ne=U?3:F?0:void 0;if(typeof K=="number"&&typeof ne=="number"){let[ie,se]=[e[K],r[ne]];ie.toLowerCase()===se.toLowerCase()&&(r[ne]=ie,ne>K?r=r.slice(ne):K>ne&&(e=e.slice(K)))}}let{optimizationLevel:o=1}=this.options;o>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var s=0,l=0,p=e.length,u=r.length;s<p&&l<u;s++,l++){this.debug("matchOne loop");var m=r[l],d=e[s];if(this.debug(r,m,d),m===!1)return!1;if(m===Wt){this.debug("GLOBSTAR",[r,m,d]);var g=s,x=l+1;if(x===u){for(this.debug("** at the end");s<p;s++)if(e[s]==="."||e[s]===".."||!i.dot&&e[s].charAt(0)===".")return!1;return!0}for(;g<p;){var b=e[g];if(this.debug(`
globstar while`,e,g,r,x,b),this.matchOne(e.slice(g),r.slice(x),n))return this.debug("globstar found match!",g,p,b),!0;if(b==="."||b===".."||!i.dot&&b.charAt(0)==="."){this.debug("dot detected!",e,g,r,x);break}this.debug("globstar swallow a segment, and continue"),g++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,g,r,x),g===p))}let v;if(typeof m=="string"?(v=d===m,this.debug("string match",m,d,v)):(v=m.test(d),this.debug("pattern match",m,d,v)),!v)return!1}if(s===p&&l===u)return!0;if(s===p)return n;if(l===u)return s===p-1&&e[s]==="";throw new Error("wtf?")}braceExpand(){return rC(this.pattern,this.options)}parse(e){Sp(e);let r=this.options;if(e==="**")return Wt;if(e==="")return"";let n,i=null;(n=e.match(pY))?i=r.dot?fY:uY:(n=e.match(eY))?i=(r.nocase?r.dot?iY:nY:r.dot?rY:tY)(n[1]):(n=e.match(mY))?i=(r.nocase?r.dot?hY:dY:r.dot?gY:yY)(n):(n=e.match(oY))?i=r.dot?sY:aY:(n=e.match(cY))&&(i=lY);let o=pc.fromGlob(e,this.options).toMMPattern();return i&&typeof o=="object"&&Reflect.defineProperty(o,"test",{value:i}),o}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let r=this.options,n=r.noglobstar?SY:r.dot?vY:bY,i=new Set(r.nocase?["i"]:[]),o=e.map(p=>{let u=p.map(m=>{if(m instanceof RegExp)for(let d of m.flags.split(""))i.add(d);return typeof m=="string"?kY(m):m===Wt?Wt:m._src});return u.forEach((m,d)=>{let g=u[d+1],x=u[d-1];m!==Wt||x===Wt||(x===void 0?g!==void 0&&g!==Wt?u[d+1]="(?:\\/|"+n+"\\/)?"+g:u[d]=n:g===void 0?u[d-1]=x+"(?:\\/|"+n+")?":g!==Wt&&(u[d-1]=x+"(?:\\/|\\/"+n+"\\/)"+g,u[d+1]=Wt))}),u.filter(m=>m!==Wt).join("/")}).join("|"),[s,l]=e.length>1?["(?:",")"]:["",""];o="^"+s+o+l+"$",this.negate&&(o="^(?!"+o+").+$");try{this.regexp=new RegExp(o,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;let n=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let o=this.set;this.debug(this.pattern,"set",o);let s=i[i.length-1];if(!s)for(let l=i.length-2;!s&&l>=0;l--)s=i[l];for(let l=0;l<o.length;l++){let p=o[l],u=i;if(n.matchBase&&p.length===1&&(u=[s]),this.matchOne(u,p,r))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return lr.defaults(e).Minimatch}};lr.AST=pc;lr.Minimatch=zr;lr.escape=uc;lr.unescape=Ln;var RC=require("node:url");var fc=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,iC=new Set,gb=typeof process=="object"&&process?process:{},oC=(t,e,r,n)=>{typeof gb.emitWarning=="function"?gb.emitWarning(t,e,r,n):console.error(`[${r}] ${e}: ${t}`)},ay=globalThis.AbortController,nC=globalThis.AbortSignal;if(typeof ay>"u"){nC=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(n,i){this._onabort.push(i)}},ay=class{constructor(){e()}signal=new nC;abort(n){if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(let i of this.signal._onabort)i(n);this.signal.onabort?.(n)}}};let t=gb.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{t&&(t=!1,oC("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var PY=t=>!iC.has(t),aHe=Symbol("type"),Po=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),aC=t=>Po(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?mc:null:null,mc=class extends Array{constructor(e){super(e),this.fill(0)}},yb=class t{heap;length;static#e=!1;static create(e){let r=aC(e);if(!r)return[];t.#e=!0;let n=new t(e,r);return t.#e=!1,n}constructor(e,r){if(!t.#e)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},bp=class t{#e;#t;#o;#n;#a;#S;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#l;#u;#s;#c;#i;#g;#y;#m;#f;#w;#h;#_;#E;#T;#v;#b;#d;static unsafeExposeInternals(e){return{starts:e.#E,ttls:e.#T,sizes:e.#_,keyMap:e.#s,keyList:e.#c,valList:e.#i,next:e.#g,prev:e.#y,get head(){return e.#m},get tail(){return e.#f},free:e.#w,isBackgroundFetch:r=>e.#p(r),backgroundFetch:(r,n,i,o)=>e.#U(r,n,i,o),moveToTail:r=>e.#V(r),indexes:r=>e.#k(r),rindexes:r=>e.#P(r),isStale:r=>e.#x(r)}}get max(){return this.#e}get maxSize(){return this.#t}get calculatedSize(){return this.#u}get size(){return this.#l}get fetchMethod(){return this.#a}get memoMethod(){return this.#S}get dispose(){return this.#o}get disposeAfter(){return this.#n}constructor(e){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:s,updateAgeOnHas:l,allowStale:p,dispose:u,disposeAfter:m,noDisposeOnSet:d,noUpdateTTL:g,maxSize:x=0,maxEntrySize:b=0,sizeCalculation:v,fetchMethod:I,memoMethod:F,noDeleteOnFetchRejection:U,noDeleteOnStaleGet:K,allowStaleOnFetchRejection:ne,allowStaleOnFetchAbort:ie,ignoreFetchAbort:se}=e;if(r!==0&&!Po(r))throw new TypeError("max option must be a nonnegative integer");let it=r?aC(r):Array;if(!it)throw new Error("invalid max value: "+r);if(this.#e=r,this.#t=x,this.maxEntrySize=b||this.#t,this.sizeCalculation=v,this.sizeCalculation){if(!this.#t&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(F!==void 0&&typeof F!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#S=F,I!==void 0&&typeof I!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#a=I,this.#b=!!I,this.#s=new Map,this.#c=new Array(r).fill(void 0),this.#i=new Array(r).fill(void 0),this.#g=new it(r),this.#y=new it(r),this.#m=0,this.#f=0,this.#w=yb.create(r),this.#l=0,this.#u=0,typeof u=="function"&&(this.#o=u),typeof m=="function"?(this.#n=m,this.#h=[]):(this.#n=void 0,this.#h=void 0),this.#v=!!this.#o,this.#d=!!this.#n,this.noDisposeOnSet=!!d,this.noUpdateTTL=!!g,this.noDeleteOnFetchRejection=!!U,this.allowStaleOnFetchRejection=!!ne,this.allowStaleOnFetchAbort=!!ie,this.ignoreFetchAbort=!!se,this.maxEntrySize!==0){if(this.#t!==0&&!Po(this.#t))throw new TypeError("maxSize must be a positive integer if specified");if(!Po(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#M()}if(this.allowStale=!!p,this.noDeleteOnStaleGet=!!K,this.updateAgeOnGet=!!s,this.updateAgeOnHas=!!l,this.ttlResolution=Po(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=n||0,this.ttl){if(!Po(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#A()}if(this.#e===0&&this.ttl===0&&this.#t===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#e&&!this.#t){let Ct="LRU_CACHE_UNBOUNDED";PY(Ct)&&(iC.add(Ct),oC("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",Ct,t))}}getRemainingTTL(e){return this.#s.has(e)?1/0:0}#A(){let e=new mc(this.#e),r=new mc(this.#e);this.#T=e,this.#E=r,this.#F=(o,s,l=fc.now())=>{if(r[o]=s!==0?l:0,e[o]=s,s!==0&&this.ttlAutopurge){let p=setTimeout(()=>{this.#x(o)&&this.#D(this.#c[o],"expire")},s+1);p.unref&&p.unref()}},this.#R=o=>{r[o]=e[o]!==0?fc.now():0},this.#r=(o,s)=>{if(e[s]){let l=e[s],p=r[s];if(!l||!p)return;o.ttl=l,o.start=p,o.now=n||i();let u=o.now-p;o.remainingTTL=l-u}};let n=0,i=()=>{let o=fc.now();if(this.ttlResolution>0){n=o;let s=setTimeout(()=>n=0,this.ttlResolution);s.unref&&s.unref()}return o};this.getRemainingTTL=o=>{let s=this.#s.get(o);if(s===void 0)return 0;let l=e[s],p=r[s];if(!l||!p)return 1/0;let u=(n||i())-p;return l-u},this.#x=o=>{let s=r[o],l=e[o];return!!l&&!!s&&(n||i())-s>l}}#R=()=>{};#r=()=>{};#F=()=>{};#x=()=>!1;#M(){let e=new mc(this.#e);this.#u=0,this.#_=e,this.#I=r=>{this.#u-=e[r],e[r]=0},this.#O=(r,n,i,o)=>{if(this.#p(n))return 0;if(!Po(i))if(o){if(typeof o!="function")throw new TypeError("sizeCalculation must be a function");if(i=o(n,r),!Po(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#C=(r,n,i)=>{if(e[r]=n,this.#t){let o=this.#t-e[r];for(;this.#u>o;)this.#L(!0)}this.#u+=e[r],i&&(i.entrySize=n,i.totalCalculatedSize=this.#u)}}#I=e=>{};#C=(e,r,n)=>{};#O=(e,r,n,i)=>{if(n||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#k({allowStale:e=this.allowStale}={}){if(this.#l)for(let r=this.#f;!(!this.#N(r)||((e||!this.#x(r))&&(yield r),r===this.#m));)r=this.#y[r]}*#P({allowStale:e=this.allowStale}={}){if(this.#l)for(let r=this.#m;!(!this.#N(r)||((e||!this.#x(r))&&(yield r),r===this.#f));)r=this.#g[r]}#N(e){return e!==void 0&&this.#s.get(this.#c[e])===e}*entries(){for(let e of this.#k())this.#i[e]!==void 0&&this.#c[e]!==void 0&&!this.#p(this.#i[e])&&(yield[this.#c[e],this.#i[e]])}*rentries(){for(let e of this.#P())this.#i[e]!==void 0&&this.#c[e]!==void 0&&!this.#p(this.#i[e])&&(yield[this.#c[e],this.#i[e]])}*keys(){for(let e of this.#k()){let r=this.#c[e];r!==void 0&&!this.#p(this.#i[e])&&(yield r)}}*rkeys(){for(let e of this.#P()){let r=this.#c[e];r!==void 0&&!this.#p(this.#i[e])&&(yield r)}}*values(){for(let e of this.#k())this.#i[e]!==void 0&&!this.#p(this.#i[e])&&(yield this.#i[e])}*rvalues(){for(let e of this.#P())this.#i[e]!==void 0&&!this.#p(this.#i[e])&&(yield this.#i[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,r={}){for(let n of this.#k()){let i=this.#i[n],o=this.#p(i)?i.__staleWhileFetching:i;if(o!==void 0&&e(o,this.#c[n],this))return this.get(this.#c[n],r)}}forEach(e,r=this){for(let n of this.#k()){let i=this.#i[n],o=this.#p(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#c[n],this)}}rforEach(e,r=this){for(let n of this.#P()){let i=this.#i[n],o=this.#p(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#c[n],this)}}purgeStale(){let e=!1;for(let r of this.#P({allowStale:!0}))this.#x(r)&&(this.#D(this.#c[r],"expire"),e=!0);return e}info(e){let r=this.#s.get(e);if(r===void 0)return;let n=this.#i[r],i=this.#p(n)?n.__staleWhileFetching:n;if(i===void 0)return;let o={value:i};if(this.#T&&this.#E){let s=this.#T[r],l=this.#E[r];if(s&&l){let p=s-(fc.now()-l);o.ttl=p,o.start=Date.now()}}return this.#_&&(o.size=this.#_[r]),o}dump(){let e=[];for(let r of this.#k({allowStale:!0})){let n=this.#c[r],i=this.#i[r],o=this.#p(i)?i.__staleWhileFetching:i;if(o===void 0||n===void 0)continue;let s={value:o};if(this.#T&&this.#E){s.ttl=this.#T[r];let l=fc.now()-this.#E[r];s.start=Math.floor(Date.now()-l)}this.#_&&(s.size=this.#_[r]),e.unshift([n,s])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let i=Date.now()-n.start;n.start=fc.now()-i}this.set(r,n.value,n)}}set(e,r,n={}){if(r===void 0)return this.delete(e),this;let{ttl:i=this.ttl,start:o,noDisposeOnSet:s=this.noDisposeOnSet,sizeCalculation:l=this.sizeCalculation,status:p}=n,{noUpdateTTL:u=this.noUpdateTTL}=n,m=this.#O(e,r,n.size||0,l);if(this.maxEntrySize&&m>this.maxEntrySize)return p&&(p.set="miss",p.maxEntrySizeExceeded=!0),this.#D(e,"set"),this;let d=this.#l===0?void 0:this.#s.get(e);if(d===void 0)d=this.#l===0?this.#f:this.#w.length!==0?this.#w.pop():this.#l===this.#e?this.#L(!1):this.#l,this.#c[d]=e,this.#i[d]=r,this.#s.set(e,d),this.#g[this.#f]=d,this.#y[d]=this.#f,this.#f=d,this.#l++,this.#C(d,m,p),p&&(p.set="add"),u=!1;else{this.#V(d);let g=this.#i[d];if(r!==g){if(this.#b&&this.#p(g)){g.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:x}=g;x!==void 0&&!s&&(this.#v&&this.#o?.(x,e,"set"),this.#d&&this.#h?.push([x,e,"set"]))}else s||(this.#v&&this.#o?.(g,e,"set"),this.#d&&this.#h?.push([g,e,"set"]));if(this.#I(d),this.#C(d,m,p),this.#i[d]=r,p){p.set="replace";let x=g&&this.#p(g)?g.__staleWhileFetching:g;x!==void 0&&(p.oldValue=x)}}else p&&(p.set="update")}if(i!==0&&!this.#T&&this.#A(),this.#T&&(u||this.#F(d,i,o),p&&this.#r(p,d)),!s&&this.#d&&this.#h){let g=this.#h,x;for(;x=g?.shift();)this.#n?.(...x)}return this}pop(){try{for(;this.#l;){let e=this.#i[this.#m];if(this.#L(!0),this.#p(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#d&&this.#h){let e=this.#h,r;for(;r=e?.shift();)this.#n?.(...r)}}}#L(e){let r=this.#m,n=this.#c[r],i=this.#i[r];return this.#b&&this.#p(i)?i.__abortController.abort(new Error("evicted")):(this.#v||this.#d)&&(this.#v&&this.#o?.(i,n,"evict"),this.#d&&this.#h?.push([i,n,"evict"])),this.#I(r),e&&(this.#c[r]=void 0,this.#i[r]=void 0,this.#w.push(r)),this.#l===1?(this.#m=this.#f=0,this.#w.length=0):this.#m=this.#g[r],this.#s.delete(n),this.#l--,r}has(e,r={}){let{updateAgeOnHas:n=this.updateAgeOnHas,status:i}=r,o=this.#s.get(e);if(o!==void 0){let s=this.#i[o];if(this.#p(s)&&s.__staleWhileFetching===void 0)return!1;if(this.#x(o))i&&(i.has="stale",this.#r(i,o));else return n&&this.#R(o),i&&(i.has="hit",this.#r(i,o)),!0}else i&&(i.has="miss");return!1}peek(e,r={}){let{allowStale:n=this.allowStale}=r,i=this.#s.get(e);if(i===void 0||!n&&this.#x(i))return;let o=this.#i[i];return this.#p(o)?o.__staleWhileFetching:o}#U(e,r,n,i){let o=r===void 0?void 0:this.#i[r];if(this.#p(o))return o;let s=new ay,{signal:l}=n;l?.addEventListener("abort",()=>s.abort(l.reason),{signal:s.signal});let p={signal:s.signal,options:n,context:i},u=(v,I=!1)=>{let{aborted:F}=s.signal,U=n.ignoreFetchAbort&&v!==void 0;if(n.status&&(F&&!I?(n.status.fetchAborted=!0,n.status.fetchError=s.signal.reason,U&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),F&&!U&&!I)return d(s.signal.reason);let K=x;return this.#i[r]===x&&(v===void 0?K.__staleWhileFetching?this.#i[r]=K.__staleWhileFetching:this.#D(e,"fetch"):(n.status&&(n.status.fetchUpdated=!0),this.set(e,v,p.options))),v},m=v=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=v),d(v)),d=v=>{let{aborted:I}=s.signal,F=I&&n.allowStaleOnFetchAbort,U=F||n.allowStaleOnFetchRejection,K=U||n.noDeleteOnFetchRejection,ne=x;if(this.#i[r]===x&&(!K||ne.__staleWhileFetching===void 0?this.#D(e,"fetch"):F||(this.#i[r]=ne.__staleWhileFetching)),U)return n.status&&ne.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),ne.__staleWhileFetching;if(ne.__returned===ne)throw v},g=(v,I)=>{let F=this.#a?.(e,o,p);F&&F instanceof Promise&&F.then(U=>v(U===void 0?void 0:U),I),s.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(v(void 0),n.allowStaleOnFetchAbort&&(v=U=>u(U,!0)))})};n.status&&(n.status.fetchDispatched=!0);let x=new Promise(g).then(u,m),b=Object.assign(x,{__abortController:s,__staleWhileFetching:o,__returned:void 0});return r===void 0?(this.set(e,b,{...p.options,status:void 0}),r=this.#s.get(e)):this.#i[r]=b,b}#p(e){if(!this.#b)return!1;let r=e;return!!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof ay}async fetch(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:s=this.ttl,noDisposeOnSet:l=this.noDisposeOnSet,size:p=0,sizeCalculation:u=this.sizeCalculation,noUpdateTTL:m=this.noUpdateTTL,noDeleteOnFetchRejection:d=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:g=this.allowStaleOnFetchRejection,ignoreFetchAbort:x=this.ignoreFetchAbort,allowStaleOnFetchAbort:b=this.allowStaleOnFetchAbort,context:v,forceRefresh:I=!1,status:F,signal:U}=r;if(!this.#b)return F&&(F.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,status:F});let K={allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,ttl:s,noDisposeOnSet:l,size:p,sizeCalculation:u,noUpdateTTL:m,noDeleteOnFetchRejection:d,allowStaleOnFetchRejection:g,allowStaleOnFetchAbort:b,ignoreFetchAbort:x,status:F,signal:U},ne=this.#s.get(e);if(ne===void 0){F&&(F.fetch="miss");let ie=this.#U(e,ne,K,v);return ie.__returned=ie}else{let ie=this.#i[ne];if(this.#p(ie)){let N=n&&ie.__staleWhileFetching!==void 0;return F&&(F.fetch="inflight",N&&(F.returnedStale=!0)),N?ie.__staleWhileFetching:ie.__returned=ie}let se=this.#x(ne);if(!I&&!se)return F&&(F.fetch="hit"),this.#V(ne),i&&this.#R(ne),F&&this.#r(F,ne),ie;let it=this.#U(e,ne,K,v),ct=it.__staleWhileFetching!==void 0&&n;return F&&(F.fetch=se?"stale":"refresh",ct&&se&&(F.returnedStale=!0)),ct?it.__staleWhileFetching:it.__returned=it}}async forceFetch(e,r={}){let n=await this.fetch(e,r);if(n===void 0)throw new Error("fetch() returned undefined");return n}memo(e,r={}){let n=this.#S;if(!n)throw new Error("no memoMethod provided to constructor");let{context:i,forceRefresh:o,...s}=r,l=this.get(e,s);if(!o&&l!==void 0)return l;let p=n(e,l,{options:s,context:i});return this.set(e,p,s),p}get(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:s}=r,l=this.#s.get(e);if(l!==void 0){let p=this.#i[l],u=this.#p(p);return s&&this.#r(s,l),this.#x(l)?(s&&(s.get="stale"),u?(s&&n&&p.__staleWhileFetching!==void 0&&(s.returnedStale=!0),n?p.__staleWhileFetching:void 0):(o||this.#D(e,"expire"),s&&n&&(s.returnedStale=!0),n?p:void 0)):(s&&(s.get="hit"),u?p.__staleWhileFetching:(this.#V(l),i&&this.#R(l),p))}else s&&(s.get="miss")}#H(e,r){this.#y[r]=e,this.#g[e]=r}#V(e){e!==this.#f&&(e===this.#m?this.#m=this.#g[e]:this.#H(this.#y[e],this.#g[e]),this.#H(this.#f,e),this.#f=e)}delete(e){return this.#D(e,"delete")}#D(e,r){let n=!1;if(this.#l!==0){let i=this.#s.get(e);if(i!==void 0)if(n=!0,this.#l===1)this.#B(r);else{this.#I(i);let o=this.#i[i];if(this.#p(o)?o.__abortController.abort(new Error("deleted")):(this.#v||this.#d)&&(this.#v&&this.#o?.(o,e,r),this.#d&&this.#h?.push([o,e,r])),this.#s.delete(e),this.#c[i]=void 0,this.#i[i]=void 0,i===this.#f)this.#f=this.#y[i];else if(i===this.#m)this.#m=this.#g[i];else{let s=this.#y[i];this.#g[s]=this.#g[i];let l=this.#g[i];this.#y[l]=this.#y[i]}this.#l--,this.#w.push(i)}}if(this.#d&&this.#h?.length){let i=this.#h,o;for(;o=i?.shift();)this.#n?.(...o)}return n}clear(){return this.#B("delete")}#B(e){for(let r of this.#P({allowStale:!0})){let n=this.#i[r];if(this.#p(n))n.__abortController.abort(new Error("deleted"));else{let i=this.#c[r];this.#v&&this.#o?.(n,i,e),this.#d&&this.#h?.push([n,i,e])}}if(this.#s.clear(),this.#i.fill(void 0),this.#c.fill(void 0),this.#T&&this.#E&&(this.#T.fill(0),this.#E.fill(0)),this.#_&&this.#_.fill(0),this.#m=0,this.#f=0,this.#w.length=0,this.#u=0,this.#l=0,this.#d&&this.#h){let r=this.#h,n;for(;n=r?.shift();)this.#n?.(...n)}}};var gc=require("node:path"),gC=require("node:url"),li=require("fs"),UY=yr(require("node:fs"),1),Do=require("node:fs/promises");var my=require("node:events"),_b=yr(require("node:stream"),1),uC=require("node:string_decoder"),sC=typeof process=="object"&&process?process:{stdout:null,stderr:null},AY=t=>!!t&&typeof t=="object"&&(t instanceof Mo||t instanceof _b.default||MY(t)||DY(t)),MY=t=>!!t&&typeof t=="object"&&t instanceof my.EventEmitter&&typeof t.pipe=="function"&&t.pipe!==_b.default.Writable.prototype.pipe,DY=t=>!!t&&typeof t=="object"&&t instanceof my.EventEmitter&&typeof t.write=="function"&&typeof t.end=="function",Li=Symbol("EOF"),Ui=Symbol("maybeEmitEnd"),Ao=Symbol("emittedEnd"),sy=Symbol("emittingEnd"),wp=Symbol("emittedError"),cy=Symbol("closed"),cC=Symbol("read"),ly=Symbol("flush"),lC=Symbol("flushChunk"),Un=Symbol("encoding"),dc=Symbol("decoder"),Dt=Symbol("flowing"),_p=Symbol("paused"),hc=Symbol("resume"),Ft=Symbol("buffer"),pr=Symbol("pipes"),It=Symbol("bufferLength"),xb=Symbol("bufferPush"),py=Symbol("bufferShift"),Zt=Symbol("objectMode"),yt=Symbol("destroyed"),Tb=Symbol("error"),Sb=Symbol("emitData"),pC=Symbol("emitEnd"),vb=Symbol("emitEnd2"),si=Symbol("async"),bb=Symbol("abort"),uy=Symbol("aborted"),Ep=Symbol("signal"),ka=Symbol("dataListeners"),Gr=Symbol("discarded"),Rp=t=>Promise.resolve().then(t),FY=t=>t(),IY=t=>t==="end"||t==="finish"||t==="prefinish",CY=t=>t instanceof ArrayBuffer||!!t&&typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,OY=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),fy=class{src;dest;opts;ondrain;constructor(e,r,n){this.src=e,this.dest=r,this.opts=n,this.ondrain=()=>e[hc](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(e){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},wb=class extends fy{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,r,n){super(e,r,n),this.proxyErrors=i=>r.emit("error",i),e.on("error",this.proxyErrors)}},NY=t=>!!t.objectMode,LY=t=>!t.objectMode&&!!t.encoding&&t.encoding!=="buffer",Mo=class extends my.EventEmitter{[Dt]=!1;[_p]=!1;[pr]=[];[Ft]=[];[Zt];[Un];[si];[dc];[Li]=!1;[Ao]=!1;[sy]=!1;[cy]=!1;[wp]=null;[It]=0;[yt]=!1;[Ep];[uy]=!1;[ka]=0;[Gr]=!1;writable=!0;readable=!0;constructor(...e){let r=e[0]||{};if(super(),r.objectMode&&typeof r.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");NY(r)?(this[Zt]=!0,this[Un]=null):LY(r)?(this[Un]=r.encoding,this[Zt]=!1):(this[Zt]=!1,this[Un]=null),this[si]=!!r.async,this[dc]=this[Un]?new uC.StringDecoder(this[Un]):null,r&&r.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[Ft]}),r&&r.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[pr]});let{signal:n}=r;n&&(this[Ep]=n,n.aborted?this[bb]():n.addEventListener("abort",()=>this[bb]()))}get bufferLength(){return this[It]}get encoding(){return this[Un]}set encoding(e){throw new Error("Encoding must be set at instantiation time")}setEncoding(e){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[Zt]}set objectMode(e){throw new Error("objectMode must be set at instantiation time")}get async(){return this[si]}set async(e){this[si]=this[si]||!!e}[bb](){this[uy]=!0,this.emit("abort",this[Ep]?.reason),this.destroy(this[Ep]?.reason)}get aborted(){return this[uy]}set aborted(e){}write(e,r,n){if(this[uy])return!1;if(this[Li])throw new Error("write after end");if(this[yt])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof r=="function"&&(n=r,r="utf8"),r||(r="utf8");let i=this[si]?Rp:FY;if(!this[Zt]&&!Buffer.isBuffer(e)){if(OY(e))e=Buffer.from(e.buffer,e.byteOffset,e.byteLength);else if(CY(e))e=Buffer.from(e);else if(typeof e!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[Zt]?(this[Dt]&&this[It]!==0&&this[ly](!0),this[Dt]?this.emit("data",e):this[xb](e),this[It]!==0&&this.emit("readable"),n&&i(n),this[Dt]):e.length?(typeof e=="string"&&!(r===this[Un]&&!this[dc]?.lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[Un]&&(e=this[dc].write(e)),this[Dt]&&this[It]!==0&&this[ly](!0),this[Dt]?this.emit("data",e):this[xb](e),this[It]!==0&&this.emit("readable"),n&&i(n),this[Dt]):(this[It]!==0&&this.emit("readable"),n&&i(n),this[Dt])}read(e){if(this[yt])return null;if(this[Gr]=!1,this[It]===0||e===0||e&&e>this[It])return this[Ui](),null;this[Zt]&&(e=null),this[Ft].length>1&&!this[Zt]&&(this[Ft]=[this[Un]?this[Ft].join(""):Buffer.concat(this[Ft],this[It])]);let r=this[cC](e||null,this[Ft][0]);return this[Ui](),r}[cC](e,r){if(this[Zt])this[py]();else{let n=r;e===n.length||e===null?this[py]():typeof n=="string"?(this[Ft][0]=n.slice(e),r=n.slice(0,e),this[It]-=e):(this[Ft][0]=n.subarray(e),r=n.subarray(0,e),this[It]-=e)}return this.emit("data",r),!this[Ft].length&&!this[Li]&&this.emit("drain"),r}end(e,r,n){return typeof e=="function"&&(n=e,e=void 0),typeof r=="function"&&(n=r,r="utf8"),e!==void 0&&this.write(e,r),n&&this.once("end",n),this[Li]=!0,this.writable=!1,(this[Dt]||!this[_p])&&this[Ui](),this}[hc](){this[yt]||(!this[ka]&&!this[pr].length&&(this[Gr]=!0),this[_p]=!1,this[Dt]=!0,this.emit("resume"),this[Ft].length?this[ly]():this[Li]?this[Ui]():this.emit("drain"))}resume(){return this[hc]()}pause(){this[Dt]=!1,this[_p]=!0,this[Gr]=!1}get destroyed(){return this[yt]}get flowing(){return this[Dt]}get paused(){return this[_p]}[xb](e){this[Zt]?this[It]+=1:this[It]+=e.length,this[Ft].push(e)}[py](){return this[Zt]?this[It]-=1:this[It]-=this[Ft][0].length,this[Ft].shift()}[ly](e=!1){do;while(this[lC](this[py]())&&this[Ft].length);!e&&!this[Ft].length&&!this[Li]&&this.emit("drain")}[lC](e){return this.emit("data",e),this[Dt]}pipe(e,r){if(this[yt])return e;this[Gr]=!1;let n=this[Ao];return r=r||{},e===sC.stdout||e===sC.stderr?r.end=!1:r.end=r.end!==!1,r.proxyErrors=!!r.proxyErrors,n?r.end&&e.end():(this[pr].push(r.proxyErrors?new wb(this,e,r):new fy(this,e,r)),this[si]?Rp(()=>this[hc]()):this[hc]()),e}unpipe(e){let r=this[pr].find(n=>n.dest===e);r&&(this[pr].length===1?(this[Dt]&&this[ka]===0&&(this[Dt]=!1),this[pr]=[]):this[pr].splice(this[pr].indexOf(r),1),r.unpipe())}addListener(e,r){return this.on(e,r)}on(e,r){let n=super.on(e,r);if(e==="data")this[Gr]=!1,this[ka]++,!this[pr].length&&!this[Dt]&&this[hc]();else if(e==="readable"&&this[It]!==0)super.emit("readable");else if(IY(e)&&this[Ao])super.emit(e),this.removeAllListeners(e);else if(e==="error"&&this[wp]){let i=r;this[si]?Rp(()=>i.call(this,this[wp])):i.call(this,this[wp])}return n}removeListener(e,r){return this.off(e,r)}off(e,r){let n=super.off(e,r);return e==="data"&&(this[ka]=this.listeners("data").length,this[ka]===0&&!this[Gr]&&!this[pr].length&&(this[Dt]=!1)),n}removeAllListeners(e){let r=super.removeAllListeners(e);return(e==="data"||e===void 0)&&(this[ka]=0,!this[Gr]&&!this[pr].length&&(this[Dt]=!1)),r}get emittedEnd(){return this[Ao]}[Ui](){!this[sy]&&!this[Ao]&&!this[yt]&&this[Ft].length===0&&this[Li]&&(this[sy]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[cy]&&this.emit("close"),this[sy]=!1)}emit(e,...r){let n=r[0];if(e!=="error"&&e!=="close"&&e!==yt&&this[yt])return!1;if(e==="data")return!this[Zt]&&!n?!1:this[si]?(Rp(()=>this[Sb](n)),!0):this[Sb](n);if(e==="end")return this[pC]();if(e==="close"){if(this[cy]=!0,!this[Ao]&&!this[yt])return!1;let o=super.emit("close");return this.removeAllListeners("close"),o}else if(e==="error"){this[wp]=n,super.emit(Tb,n);let o=!this[Ep]||this.listeners("error").length?super.emit("error",n):!1;return this[Ui](),o}else if(e==="resume"){let o=super.emit("resume");return this[Ui](),o}else if(e==="finish"||e==="prefinish"){let o=super.emit(e);return this.removeAllListeners(e),o}let i=super.emit(e,...r);return this[Ui](),i}[Sb](e){for(let n of this[pr])n.dest.write(e)===!1&&this.pause();let r=this[Gr]?!1:super.emit("data",e);return this[Ui](),r}[pC](){return this[Ao]?!1:(this[Ao]=!0,this.readable=!1,this[si]?(Rp(()=>this[vb]()),!0):this[vb]())}[vb](){if(this[dc]){let r=this[dc].end();if(r){for(let n of this[pr])n.dest.write(r);this[Gr]||super.emit("data",r)}}for(let r of this[pr])r.end();let e=super.emit("end");return this.removeAllListeners("end"),e}async collect(){let e=Object.assign([],{dataLength:0});this[Zt]||(e.dataLength=0);let r=this.promise();return this.on("data",n=>{e.push(n),this[Zt]||(e.dataLength+=n.length)}),await r,e}async concat(){if(this[Zt])throw new Error("cannot concat in objectMode");let e=await this.collect();return this[Un]?e.join(""):Buffer.concat(e,e.dataLength)}async promise(){return new Promise((e,r)=>{this.on(yt,()=>r(new Error("stream destroyed"))),this.on("error",n=>r(n)),this.on("end",()=>e())})}[Symbol.asyncIterator](){this[Gr]=!1;let e=!1,r=async()=>(this.pause(),e=!0,{value:void 0,done:!0});return{next:()=>{if(e)return r();let i=this.read();if(i!==null)return Promise.resolve({done:!1,value:i});if(this[Li])return r();let o,s,l=d=>{this.off("data",p),this.off("end",u),this.off(yt,m),r(),s(d)},p=d=>{this.off("error",l),this.off("end",u),this.off(yt,m),this.pause(),o({value:d,done:!!this[Li]})},u=()=>{this.off("error",l),this.off("data",p),this.off(yt,m),r(),o({done:!0,value:void 0})},m=()=>l(new Error("stream destroyed"));return new Promise((d,g)=>{s=g,o=d,this.once(yt,m),this.once("error",l),this.once("end",u),this.once("data",p)})},throw:r,return:r,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[Gr]=!1;let e=!1,r=()=>(this.pause(),this.off(Tb,r),this.off(yt,r),this.off("end",r),e=!0,{done:!0,value:void 0}),n=()=>{if(e)return r();let i=this.read();return i===null?r():{done:!1,value:i}};return this.once("end",r),this.once(Tb,r),this.once(yt,r),{next:n,throw:r,return:r,[Symbol.iterator](){return this}}}destroy(e){if(this[yt])return e?this.emit("error",e):this.emit(yt),this;this[yt]=!0,this[Gr]=!0,this[Ft].length=0,this[It]=0;let r=this;return typeof r.close=="function"&&!this[cy]&&r.close(),e?this.emit("error",e):this.emit(yt),this}static get isStream(){return AY}};var HY=li.realpathSync.native,Pp={lstatSync:li.lstatSync,readdir:li.readdir,readdirSync:li.readdirSync,readlinkSync:li.readlinkSync,realpathSync:HY,promises:{lstat:Do.lstat,readdir:Do.readdir,readlink:Do.readlink,realpath:Do.realpath}},yC=t=>!t||t===Pp||t===UY?Pp:{...Pp,...t,promises:{...Pp.promises,...t.promises||{}}},xC=/^\\\\\?\\([a-z]:)\\?$/i,VY=t=>t.replace(/\//g,"\\").replace(xC,"$1\\"),BY=/[\\\/]/,Tn=0,TC=1,SC=2,ci=4,vC=6,bC=8,Pa=10,wC=12,xn=15,kp=~xn,Eb=16,fC=32,Ap=64,Hn=128,dy=256,gy=512,mC=Ap|Hn|gy,WY=1023,Rb=t=>t.isFile()?bC:t.isDirectory()?ci:t.isSymbolicLink()?Pa:t.isCharacterDevice()?SC:t.isBlockDevice()?vC:t.isSocket()?wC:t.isFIFO()?TC:Tn,dC=new Map,Mp=t=>{let e=dC.get(t);if(e)return e;let r=t.normalize("NFKD");return dC.set(t,r),r},hC=new Map,hy=t=>{let e=hC.get(t);if(e)return e;let r=Mp(t.toLowerCase());return hC.set(t,r),r},yy=class extends bp{constructor(){super({max:256})}},kb=class extends bp{constructor(e=16*1024){super({maxSize:e,sizeCalculation:r=>r.length+1})}},_C=Symbol("PathScurry setAsCwd"),Yt=class{name;root;roots;parent;nocase;isCWD=!1;#e;#t;get dev(){return this.#t}#o;get mode(){return this.#o}#n;get nlink(){return this.#n}#a;get uid(){return this.#a}#S;get gid(){return this.#S}#l;get rdev(){return this.#l}#u;get blksize(){return this.#u}#s;get ino(){return this.#s}#c;get size(){return this.#c}#i;get blocks(){return this.#i}#g;get atimeMs(){return this.#g}#y;get mtimeMs(){return this.#y}#m;get ctimeMs(){return this.#m}#f;get birthtimeMs(){return this.#f}#w;get atime(){return this.#w}#h;get mtime(){return this.#h}#_;get ctime(){return this.#_}#E;get birthtime(){return this.#E}#T;#v;#b;#d;#A;#R;#r;#F;#x;#M;get parentPath(){return(this.parent||this).fullpath()}get path(){return this.parentPath}constructor(e,r=Tn,n,i,o,s,l){this.name=e,this.#T=o?hy(e):Mp(e),this.#r=r&WY,this.nocase=o,this.roots=i,this.root=n||this,this.#F=s,this.#b=l.fullpath,this.#A=l.relative,this.#R=l.relativePosix,this.parent=l.parent,this.parent?this.#e=this.parent.#e:this.#e=yC(l.fs)}depth(){return this.#v!==void 0?this.#v:this.parent?this.#v=this.parent.depth()+1:this.#v=0}childrenCache(){return this.#F}resolve(e){if(!e)return this;let r=this.getRootString(e),i=e.substring(r.length).split(this.splitSep);return r?this.getRoot(r).#I(i):this.#I(i)}#I(e){let r=this;for(let n of e)r=r.child(n);return r}children(){let e=this.#F.get(this);if(e)return e;let r=Object.assign([],{provisional:0});return this.#F.set(this,r),this.#r&=~Eb,r}child(e,r){if(e===""||e===".")return this;if(e==="..")return this.parent||this;let n=this.children(),i=this.nocase?hy(e):Mp(e);for(let p of n)if(p.#T===i)return p;let o=this.parent?this.sep:"",s=this.#b?this.#b+o+e:void 0,l=this.newChild(e,Tn,{...r,parent:this,fullpath:s});return this.canReaddir()||(l.#r|=Hn),n.push(l),l}relative(){if(this.isCWD)return"";if(this.#A!==void 0)return this.#A;let e=this.name,r=this.parent;if(!r)return this.#A=this.name;let n=r.relative();return n+(!n||!r.parent?"":this.sep)+e}relativePosix(){if(this.sep==="/")return this.relative();if(this.isCWD)return"";if(this.#R!==void 0)return this.#R;let e=this.name,r=this.parent;if(!r)return this.#R=this.fullpathPosix();let n=r.relativePosix();return n+(!n||!r.parent?"":"/")+e}fullpath(){if(this.#b!==void 0)return this.#b;let e=this.name,r=this.parent;if(!r)return this.#b=this.name;let i=r.fullpath()+(r.parent?this.sep:"")+e;return this.#b=i}fullpathPosix(){if(this.#d!==void 0)return this.#d;if(this.sep==="/")return this.#d=this.fullpath();if(!this.parent){let i=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(i)?this.#d=`//?/${i}`:this.#d=i}let e=this.parent,r=e.fullpathPosix(),n=r+(!r||!e.parent?"":"/")+this.name;return this.#d=n}isUnknown(){return(this.#r&xn)===Tn}isType(e){return this[`is${e}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#r&xn)===bC}isDirectory(){return(this.#r&xn)===ci}isCharacterDevice(){return(this.#r&xn)===SC}isBlockDevice(){return(this.#r&xn)===vC}isFIFO(){return(this.#r&xn)===TC}isSocket(){return(this.#r&xn)===wC}isSymbolicLink(){return(this.#r&Pa)===Pa}lstatCached(){return this.#r&fC?this:void 0}readlinkCached(){return this.#x}realpathCached(){return this.#M}readdirCached(){let e=this.children();return e.slice(0,e.provisional)}canReadlink(){if(this.#x)return!0;if(!this.parent)return!1;let e=this.#r&xn;return!(e!==Tn&&e!==Pa||this.#r&dy||this.#r&Hn)}calledReaddir(){return!!(this.#r&Eb)}isENOENT(){return!!(this.#r&Hn)}isNamed(e){return this.nocase?this.#T===hy(e):this.#T===Mp(e)}async readlink(){let e=this.#x;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=await this.#e.promises.readlink(this.fullpath()),n=(await this.parent.realpath())?.resolve(r);if(n)return this.#x=n}catch(r){this.#p(r.code);return}}readlinkSync(){let e=this.#x;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=this.#e.readlinkSync(this.fullpath()),n=this.parent.realpathSync()?.resolve(r);if(n)return this.#x=n}catch(r){this.#p(r.code);return}}#C(e){this.#r|=Eb;for(let r=e.provisional;r<e.length;r++){let n=e[r];n&&n.#O()}}#O(){this.#r&Hn||(this.#r=(this.#r|Hn)&kp,this.#k())}#k(){let e=this.children();e.provisional=0;for(let r of e)r.#O()}#P(){this.#r|=gy,this.#N()}#N(){if(this.#r&Ap)return;let e=this.#r;(e&xn)===ci&&(e&=kp),this.#r=e|Ap,this.#k()}#L(e=""){e==="ENOTDIR"||e==="EPERM"?this.#N():e==="ENOENT"?this.#O():this.children().provisional=0}#U(e=""){e==="ENOTDIR"?this.parent.#N():e==="ENOENT"&&this.#O()}#p(e=""){let r=this.#r;r|=dy,e==="ENOENT"&&(r|=Hn),(e==="EINVAL"||e==="UNKNOWN")&&(r&=kp),this.#r=r,e==="ENOTDIR"&&this.parent&&this.parent.#N()}#H(e,r){return this.#D(e,r)||this.#V(e,r)}#V(e,r){let n=Rb(e),i=this.newChild(e.name,n,{parent:this}),o=i.#r&xn;return o!==ci&&o!==Pa&&o!==Tn&&(i.#r|=Ap),r.unshift(i),r.provisional++,i}#D(e,r){for(let n=r.provisional;n<r.length;n++){let i=r[n];if((this.nocase?hy(e.name):Mp(e.name))===i.#T)return this.#B(e,i,n,r)}}#B(e,r,n,i){let o=r.name;return r.#r=r.#r&kp|Rb(e),o!==e.name&&(r.name=e.name),n!==i.provisional&&(n===i.length-1?i.pop():i.splice(n,1),i.unshift(r)),i.provisional++,r}async lstat(){if(!(this.#r&Hn))try{return this.#q(await this.#e.promises.lstat(this.fullpath())),this}catch(e){this.#U(e.code)}}lstatSync(){if(!(this.#r&Hn))try{return this.#q(this.#e.lstatSync(this.fullpath())),this}catch(e){this.#U(e.code)}}#q(e){let{atime:r,atimeMs:n,birthtime:i,birthtimeMs:o,blksize:s,blocks:l,ctime:p,ctimeMs:u,dev:m,gid:d,ino:g,mode:x,mtime:b,mtimeMs:v,nlink:I,rdev:F,size:U,uid:K}=e;this.#w=r,this.#g=n,this.#E=i,this.#f=o,this.#u=s,this.#i=l,this.#_=p,this.#m=u,this.#t=m,this.#S=d,this.#s=g,this.#o=x,this.#h=b,this.#y=v,this.#n=I,this.#l=F,this.#c=U,this.#a=K;let ne=Rb(e);this.#r=this.#r&kp|ne|fC,ne!==Tn&&ne!==ci&&ne!==Pa&&(this.#r|=Ap)}#$=[];#j=!1;#z(e){this.#j=!1;let r=this.#$.slice();this.#$.length=0,r.forEach(n=>n(null,e))}readdirCB(e,r=!1){if(!this.canReaddir()){r?e(null,[]):queueMicrotask(()=>e(null,[]));return}let n=this.children();if(this.calledReaddir()){let o=n.slice(0,n.provisional);r?e(null,o):queueMicrotask(()=>e(null,o));return}if(this.#$.push(e),this.#j)return;this.#j=!0;let i=this.fullpath();this.#e.readdir(i,{withFileTypes:!0},(o,s)=>{if(o)this.#L(o.code),n.provisional=0;else{for(let l of s)this.#H(l,n);this.#C(n)}this.#z(n.slice(0,n.provisional))})}#W;async readdir(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();if(this.#W)await this.#W;else{let n=()=>{};this.#W=new Promise(i=>n=i);try{for(let i of await this.#e.promises.readdir(r,{withFileTypes:!0}))this.#H(i,e);this.#C(e)}catch(i){this.#L(i.code),e.provisional=0}this.#W=void 0,n()}return e.slice(0,e.provisional)}readdirSync(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();try{for(let n of this.#e.readdirSync(r,{withFileTypes:!0}))this.#H(n,e);this.#C(e)}catch(n){this.#L(n.code),e.provisional=0}return e.slice(0,e.provisional)}canReaddir(){if(this.#r&mC)return!1;let e=xn&this.#r;return e===Tn||e===ci||e===Pa}shouldWalk(e,r){return(this.#r&ci)===ci&&!(this.#r&mC)&&!e.has(this)&&(!r||r(this))}async realpath(){if(this.#M)return this.#M;if(!((gy|dy|Hn)&this.#r))try{let e=await this.#e.promises.realpath(this.fullpath());return this.#M=this.resolve(e)}catch{this.#P()}}realpathSync(){if(this.#M)return this.#M;if(!((gy|dy|Hn)&this.#r))try{let e=this.#e.realpathSync(this.fullpath());return this.#M=this.resolve(e)}catch{this.#P()}}[_C](e){if(e===this)return;e.isCWD=!1,this.isCWD=!0;let r=new Set([]),n=[],i=this;for(;i&&i.parent;)r.add(i),i.#A=n.join(this.sep),i.#R=n.join("/"),i=i.parent,n.push("..");for(i=e;i&&i.parent&&!r.has(i);)i.#A=void 0,i.#R=void 0,i=i.parent}},xy=class t extends Yt{sep="\\";splitSep=BY;constructor(e,r=Tn,n,i,o,s,l){super(e,r,n,i,o,s,l)}newChild(e,r=Tn,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}getRootString(e){return gc.win32.parse(e).root}getRoot(e){if(e=VY(e.toUpperCase()),e===this.root.name)return this.root;for(let[r,n]of Object.entries(this.roots))if(this.sameRoot(e,r))return this.roots[e]=n;return this.roots[e]=new yc(e,this).root}sameRoot(e,r=this.root.name){return e=e.toUpperCase().replace(/\//g,"\\").replace(xC,"$1\\"),e===r}},Ty=class t extends Yt{splitSep="/";sep="/";constructor(e,r=Tn,n,i,o,s,l){super(e,r,n,i,o,s,l)}getRootString(e){return e.startsWith("/")?"/":""}getRoot(e){return this.root}newChild(e,r=Tn,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}},Sy=class{root;rootPath;roots;cwd;#e;#t;#o;nocase;#n;constructor(e=process.cwd(),r,n,{nocase:i,childrenCacheSize:o=16*1024,fs:s=Pp}={}){this.#n=yC(s),(e instanceof URL||e.startsWith("file://"))&&(e=(0,gC.fileURLToPath)(e));let l=r.resolve(e);this.roots=Object.create(null),this.rootPath=this.parseRootPath(l),this.#e=new yy,this.#t=new yy,this.#o=new kb(o);let p=l.substring(this.rootPath.length).split(n);if(p.length===1&&!p[0]&&p.pop(),i===void 0)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=i,this.root=this.newRoot(this.#n),this.roots[this.rootPath]=this.root;let u=this.root,m=p.length-1,d=r.sep,g=this.rootPath,x=!1;for(let b of p){let v=m--;u=u.child(b,{relative:new Array(v).fill("..").join(d),relativePosix:new Array(v).fill("..").join("/"),fullpath:g+=(x?"":d)+b}),x=!0}this.cwd=u}depth(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.depth()}childrenCache(){return this.#o}resolve(...e){let r="";for(let o=e.length-1;o>=0;o--){let s=e[o];if(!(!s||s===".")&&(r=r?`${s}/${r}`:s,this.isAbsolute(s)))break}let n=this.#e.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpath();return this.#e.set(r,i),i}resolvePosix(...e){let r="";for(let o=e.length-1;o>=0;o--){let s=e[o];if(!(!s||s===".")&&(r=r?`${s}/${r}`:s,this.isAbsolute(s)))break}let n=this.#t.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpathPosix();return this.#t.set(r,i),i}relative(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relative()}relativePosix(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relativePosix()}basename(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.name}dirname(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),(e.parent||e).fullpath()}async readdir(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Yt||(r=e,e=this.cwd);let{withFileTypes:n}=r;if(e.canReaddir()){let i=await e.readdir();return n?i:i.map(o=>o.name)}else return[]}readdirSync(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Yt||(r=e,e=this.cwd);let{withFileTypes:n=!0}=r;return e.canReaddir()?n?e.readdirSync():e.readdirSync().map(i=>i.name):[]}async lstat(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstat()}lstatSync(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstatSync()}async readlink(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Yt||(r=e.withFileTypes,e=this.cwd);let n=await e.readlink();return r?n:n?.fullpath()}readlinkSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Yt||(r=e.withFileTypes,e=this.cwd);let n=e.readlinkSync();return r?n:n?.fullpath()}async realpath(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Yt||(r=e.withFileTypes,e=this.cwd);let n=await e.realpath();return r?n:n?.fullpath()}realpathSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Yt||(r=e.withFileTypes,e=this.cwd);let n=e.realpathSync();return r?n:n?.fullpath()}async walk(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Yt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=[];(!o||o(e))&&l.push(n?e:e.fullpath());let p=new Set,u=(d,g)=>{p.add(d),d.readdirCB((x,b)=>{if(x)return g(x);let v=b.length;if(!v)return g();let I=()=>{--v===0&&g()};for(let F of b)(!o||o(F))&&l.push(n?F:F.fullpath()),i&&F.isSymbolicLink()?F.realpath().then(U=>U?.isUnknown()?U.lstat():U).then(U=>U?.shouldWalk(p,s)?u(U,I):I()):F.shouldWalk(p,s)?u(F,I):I()},!0)},m=e;return new Promise((d,g)=>{u(m,x=>{if(x)return g(x);d(l)})})}walkSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Yt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=[];(!o||o(e))&&l.push(n?e:e.fullpath());let p=new Set([e]);for(let u of p){let m=u.readdirSync();for(let d of m){(!o||o(d))&&l.push(n?d:d.fullpath());let g=d;if(d.isSymbolicLink()){if(!(i&&(g=d.realpathSync())))continue;g.isUnknown()&&g.lstatSync()}g.shouldWalk(p,s)&&p.add(g)}}return l}[Symbol.asyncIterator](){return this.iterate()}iterate(e=this.cwd,r={}){return typeof e=="string"?e=this.cwd.resolve(e):e instanceof Yt||(r=e,e=this.cwd),this.stream(e,r)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Yt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r;(!o||o(e))&&(yield n?e:e.fullpath());let l=new Set([e]);for(let p of l){let u=p.readdirSync();for(let m of u){(!o||o(m))&&(yield n?m:m.fullpath());let d=m;if(m.isSymbolicLink()){if(!(i&&(d=m.realpathSync())))continue;d.isUnknown()&&d.lstatSync()}d.shouldWalk(l,s)&&l.add(d)}}}stream(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Yt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=new Mo({objectMode:!0});(!o||o(e))&&l.write(n?e:e.fullpath());let p=new Set,u=[e],m=0,d=()=>{let g=!1;for(;!g;){let x=u.shift();if(!x){m===0&&l.end();return}m++,p.add(x);let b=(I,F,U=!1)=>{if(I)return l.emit("error",I);if(i&&!U){let K=[];for(let ne of F)ne.isSymbolicLink()&&K.push(ne.realpath().then(ie=>ie?.isUnknown()?ie.lstat():ie));if(K.length){Promise.all(K).then(()=>b(null,F,!0));return}}for(let K of F)K&&(!o||o(K))&&(l.write(n?K:K.fullpath())||(g=!0));m--;for(let K of F){let ne=K.realpathCached()||K;ne.shouldWalk(p,s)&&u.push(ne)}g&&!l.flowing?l.once("drain",d):v||d()},v=!0;x.readdirCB(b,!0),v=!1}};return d(),l}streamSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Yt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=new Mo({objectMode:!0}),p=new Set;(!o||o(e))&&l.write(n?e:e.fullpath());let u=[e],m=0,d=()=>{let g=!1;for(;!g;){let x=u.shift();if(!x){m===0&&l.end();return}m++,p.add(x);let b=x.readdirSync();for(let v of b)(!o||o(v))&&(l.write(n?v:v.fullpath())||(g=!0));m--;for(let v of b){let I=v;if(v.isSymbolicLink()){if(!(i&&(I=v.realpathSync())))continue;I.isUnknown()&&I.lstatSync()}I.shouldWalk(p,s)&&u.push(I)}}g&&!l.flowing&&l.once("drain",d)};return d(),l}chdir(e=this.cwd){let r=this.cwd;this.cwd=typeof e=="string"?this.cwd.resolve(e):e,this.cwd[_C](r)}},yc=class extends Sy{sep="\\";constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,gc.win32,"\\",{...r,nocase:n}),this.nocase=n;for(let i=this.cwd;i;i=i.parent)i.nocase=this.nocase}parseRootPath(e){return gc.win32.parse(e).root.toUpperCase()}newRoot(e){return new xy(this.rootPath,ci,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")||e.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(e)}},xc=class extends Sy{sep="/";constructor(e=process.cwd(),r={}){let{nocase:n=!1}=r;super(e,gc.posix,"/",{...r,nocase:n}),this.nocase=n}parseRootPath(e){return"/"}newRoot(e){return new Ty(this.rootPath,ci,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")}},Dp=class extends xc{constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,{...r,nocase:n})}},uHe=process.platform==="win32"?xy:Ty,EC=process.platform==="win32"?yc:process.platform==="darwin"?Dp:xc;var $Y=t=>t.length>=1,jY=t=>t.length>=1,Tc=class t{#e;#t;#o;length;#n;#a;#S;#l;#u;#s;#c=!0;constructor(e,r,n,i){if(!$Y(e))throw new TypeError("empty pattern list");if(!jY(r))throw new TypeError("empty glob list");if(r.length!==e.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=e.length,n<0||n>=this.length)throw new TypeError("index out of range");if(this.#e=e,this.#t=r,this.#o=n,this.#n=i,this.#o===0){if(this.isUNC()){let[o,s,l,p,...u]=this.#e,[m,d,g,x,...b]=this.#t;u[0]===""&&(u.shift(),b.shift());let v=[o,s,l,p,""].join("/"),I=[m,d,g,x,""].join("/");this.#e=[v,...u],this.#t=[I,...b],this.length=this.#e.length}else if(this.isDrive()||this.isAbsolute()){let[o,...s]=this.#e,[l,...p]=this.#t;s[0]===""&&(s.shift(),p.shift());let u=o+"/",m=l+"/";this.#e=[u,...s],this.#t=[m,...p],this.length=this.#e.length}}}pattern(){return this.#e[this.#o]}isString(){return typeof this.#e[this.#o]=="string"}isGlobstar(){return this.#e[this.#o]===Wt}isRegExp(){return this.#e[this.#o]instanceof RegExp}globString(){return this.#S=this.#S||(this.#o===0?this.isAbsolute()?this.#t[0]+this.#t.slice(1).join("/"):this.#t.join("/"):this.#t.slice(this.#o).join("/"))}hasMore(){return this.length>this.#o+1}rest(){return this.#a!==void 0?this.#a:this.hasMore()?(this.#a=new t(this.#e,this.#t,this.#o+1,this.#n),this.#a.#s=this.#s,this.#a.#u=this.#u,this.#a.#l=this.#l,this.#a):this.#a=null}isUNC(){let e=this.#e;return this.#u!==void 0?this.#u:this.#u=this.#n==="win32"&&this.#o===0&&e[0]===""&&e[1]===""&&typeof e[2]=="string"&&!!e[2]&&typeof e[3]=="string"&&!!e[3]}isDrive(){let e=this.#e;return this.#l!==void 0?this.#l:this.#l=this.#n==="win32"&&this.#o===0&&this.length>1&&typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0])}isAbsolute(){let e=this.#e;return this.#s!==void 0?this.#s:this.#s=e[0]===""&&e.length>1||this.isDrive()||this.isUNC()}root(){let e=this.#e[0];return typeof e=="string"&&this.isAbsolute()&&this.#o===0?e:""}checkFollowGlobstar(){return!(this.#o===0||!this.isGlobstar()||!this.#c)}markFollowGlobstar(){return this.#o===0||!this.isGlobstar()||!this.#c?!1:(this.#c=!1,!0)}};var qY=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",Sc=class{relative;relativeChildren;absolute;absoluteChildren;platform;mmopts;constructor(e,{nobrace:r,nocase:n,noext:i,noglobstar:o,platform:s=qY}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[],this.platform=s,this.mmopts={dot:!0,nobrace:r,nocase:n,noext:i,noglobstar:o,optimizationLevel:2,platform:s,nocomment:!0,nonegate:!0};for(let l of e)this.add(l)}add(e){let r=new zr(e,this.mmopts);for(let n=0;n<r.set.length;n++){let i=r.set[n],o=r.globParts[n];if(!i||!o)throw new Error("invalid pattern object");for(;i[0]==="."&&o[0]===".";)i.shift(),o.shift();let s=new Tc(i,o,0,this.platform),l=new zr(s.globString(),this.mmopts),p=o[o.length-1]==="**",u=s.isAbsolute();u?this.absolute.push(l):this.relative.push(l),p&&(u?this.absoluteChildren.push(l):this.relativeChildren.push(l))}}ignored(e){let r=e.fullpath(),n=`${r}/`,i=e.relative()||".",o=`${i}/`;for(let s of this.relative)if(s.match(i)||s.match(o))return!0;for(let s of this.absolute)if(s.match(r)||s.match(n))return!0;return!1}childrenIgnored(e){let r=e.fullpath()+"/",n=(e.relative()||".")+"/";for(let i of this.relativeChildren)if(i.match(n))return!0;for(let i of this.absoluteChildren)if(i.match(r))return!0;return!1}};var Pb=class t{store;constructor(e=new Map){this.store=e}copy(){return new t(new Map(this.store))}hasWalked(e,r){return this.store.get(e.fullpath())?.has(r.globString())}storeWalked(e,r){let n=e.fullpath(),i=this.store.get(n);i?i.add(r.globString()):this.store.set(n,new Set([r.globString()]))}},Ab=class{store=new Map;add(e,r,n){let i=(r?2:0)|(n?1:0),o=this.store.get(e);this.store.set(e,o===void 0?i:i&o)}entries(){return[...this.store.entries()].map(([e,r])=>[e,!!(r&2),!!(r&1)])}},Mb=class{store=new Map;add(e,r){if(!e.canReaddir())return;let n=this.store.get(e);n?n.find(i=>i.globString()===r.globString())||n.push(r):this.store.set(e,[r])}get(e){let r=this.store.get(e);if(!r)throw new Error("attempting to walk unknown path");return r}entries(){return this.keys().map(e=>[e,this.store.get(e)])}keys(){return[...this.store.keys()].filter(e=>e.canReaddir())}},Fp=class t{hasWalkedCache;matches=new Ab;subwalks=new Mb;patterns;follow;dot;opts;constructor(e,r){this.opts=e,this.follow=!!e.follow,this.dot=!!e.dot,this.hasWalkedCache=r?r.copy():new Pb}processPatterns(e,r){this.patterns=r;let n=r.map(i=>[e,i]);for(let[i,o]of n){this.hasWalkedCache.storeWalked(i,o);let s=o.root(),l=o.isAbsolute()&&this.opts.absolute!==!1;if(s){i=i.resolve(s==="/"&&this.opts.root!==void 0?this.opts.root:s);let d=o.rest();if(d)o=d;else{this.matches.add(i,!0,!1);continue}}if(i.isENOENT())continue;let p,u,m=!1;for(;typeof(p=o.pattern())=="string"&&(u=o.rest());)i=i.resolve(p),o=u,m=!0;if(p=o.pattern(),u=o.rest(),m){if(this.hasWalkedCache.hasWalked(i,o))continue;this.hasWalkedCache.storeWalked(i,o)}if(typeof p=="string"){let d=p===".."||p===""||p===".";this.matches.add(i.resolve(p),l,d);continue}else if(p===Wt){(!i.isSymbolicLink()||this.follow||o.checkFollowGlobstar())&&this.subwalks.add(i,o);let d=u?.pattern(),g=u?.rest();if(!u||(d===""||d===".")&&!g)this.matches.add(i,l,d===""||d===".");else if(d===".."){let x=i.parent||i;g?this.hasWalkedCache.hasWalked(x,g)||this.subwalks.add(x,g):this.matches.add(x,l,!0)}}else p instanceof RegExp&&this.subwalks.add(i,o)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new t(this.opts,this.hasWalkedCache)}filterEntries(e,r){let n=this.subwalks.get(e),i=this.child();for(let o of r)for(let s of n){let l=s.isAbsolute(),p=s.pattern(),u=s.rest();p===Wt?i.testGlobstar(o,s,u,l):p instanceof RegExp?i.testRegExp(o,p,u,l):i.testString(o,p,u,l)}return i}testGlobstar(e,r,n,i){if((this.dot||!e.name.startsWith("."))&&(r.hasMore()||this.matches.add(e,i,!1),e.canReaddir()&&(this.follow||!e.isSymbolicLink()?this.subwalks.add(e,r):e.isSymbolicLink()&&(n&&r.checkFollowGlobstar()?this.subwalks.add(e,n):r.markFollowGlobstar()&&this.subwalks.add(e,r)))),n){let o=n.pattern();if(typeof o=="string"&&o!==".."&&o!==""&&o!==".")this.testString(e,o,n.rest(),i);else if(o===".."){let s=e.parent||e;this.subwalks.add(s,n)}else o instanceof RegExp&&this.testRegExp(e,o,n.rest(),i)}}testRegExp(e,r,n,i){r.test(e.name)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}testString(e,r,n,i){e.isNamed(r)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}};var zY=(t,e)=>typeof t=="string"?new Sc([t],e):Array.isArray(t)?new Sc(t,e):t,vy=class{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#e=[];#t;#o;signal;maxDepth;includeChildMatches;constructor(e,r,n){if(this.patterns=e,this.path=r,this.opts=n,this.#o=!n.posix&&n.platform==="win32"?"\\":"/",this.includeChildMatches=n.includeChildMatches!==!1,(n.ignore||!this.includeChildMatches)&&(this.#t=zY(n.ignore??[],n),!this.includeChildMatches&&typeof this.#t.add!="function")){let i="cannot ignore child matches, ignore lacks add() method.";throw new Error(i)}this.maxDepth=n.maxDepth||1/0,n.signal&&(this.signal=n.signal,this.signal.addEventListener("abort",()=>{this.#e.length=0}))}#n(e){return this.seen.has(e)||!!this.#t?.ignored?.(e)}#a(e){return!!this.#t?.childrenIgnored?.(e)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;this.paused=!1;let e;for(;!this.paused&&(e=this.#e.shift());)e()}onResume(e){this.signal?.aborted||(this.paused?this.#e.push(e):e())}async matchCheck(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||await e.realpath(),!n)return;e=n}let o=e.isUnknown()||this.opts.stat?await e.lstat():e;if(this.opts.follow&&this.opts.nodir&&o?.isSymbolicLink()){let s=await o.realpath();s&&(s.isUnknown()||this.opts.stat)&&await s.lstat()}return this.matchCheckTest(o,r)}matchCheckTest(e,r){return e&&(this.maxDepth===1/0||e.depth()<=this.maxDepth)&&(!r||e.canReaddir())&&(!this.opts.nodir||!e.isDirectory())&&(!this.opts.nodir||!this.opts.follow||!e.isSymbolicLink()||!e.realpathCached()?.isDirectory())&&!this.#n(e)?e:void 0}matchCheckSync(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||e.realpathSync(),!n)return;e=n}let o=e.isUnknown()||this.opts.stat?e.lstatSync():e;if(this.opts.follow&&this.opts.nodir&&o?.isSymbolicLink()){let s=o.realpathSync();s&&(s?.isUnknown()||this.opts.stat)&&s.lstatSync()}return this.matchCheckTest(o,r)}matchFinish(e,r){if(this.#n(e))return;if(!this.includeChildMatches&&this.#t?.add){let o=`${e.relativePosix()}/**`;this.#t.add(o)}let n=this.opts.absolute===void 0?r:this.opts.absolute;this.seen.add(e);let i=this.opts.mark&&e.isDirectory()?this.#o:"";if(this.opts.withFileTypes)this.matchEmit(e);else if(n){let o=this.opts.posix?e.fullpathPosix():e.fullpath();this.matchEmit(o+i)}else{let o=this.opts.posix?e.relativePosix():e.relative(),s=this.opts.dotRelative&&!o.startsWith(".."+this.#o)?"."+this.#o:"";this.matchEmit(o?s+o+i:"."+i)}}async match(e,r,n){let i=await this.matchCheck(e,n);i&&this.matchFinish(i,r)}matchSync(e,r,n){let i=this.matchCheckSync(e,n);i&&this.matchFinish(i,r)}walkCB(e,r,n){this.signal?.aborted&&n(),this.walkCB2(e,r,new Fp(this.opts),n)}walkCB2(e,r,n,i){if(this.#a(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2(e,r,n,i));return}n.processPatterns(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,p,u]of n.matches.entries())this.#n(l)||(o++,this.match(l,p,u).then(()=>s()));for(let l of n.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;o++;let p=l.readdirCached();l.calledReaddir()?this.walkCB3(l,p,n,s):l.readdirCB((u,m)=>this.walkCB3(l,m,n,s),!0)}s()}walkCB3(e,r,n,i){n=n.filterEntries(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,p,u]of n.matches.entries())this.#n(l)||(o++,this.match(l,p,u).then(()=>s()));for(let[l,p]of n.subwalks.entries())o++,this.walkCB2(l,p,n.child(),s);s()}walkCBSync(e,r,n){this.signal?.aborted&&n(),this.walkCB2Sync(e,r,new Fp(this.opts),n)}walkCB2Sync(e,r,n,i){if(this.#a(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2Sync(e,r,n,i));return}n.processPatterns(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,p,u]of n.matches.entries())this.#n(l)||this.matchSync(l,p,u);for(let l of n.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;o++;let p=l.readdirSync();this.walkCB3Sync(l,p,n,s)}s()}walkCB3Sync(e,r,n,i){n=n.filterEntries(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,p,u]of n.matches.entries())this.#n(l)||this.matchSync(l,p,u);for(let[l,p]of n.subwalks.entries())o++,this.walkCB2Sync(l,p,n.child(),s);s()}},Ip=class extends vy{matches=new Set;constructor(e,r,n){super(e,r,n)}matchEmit(e){this.matches.add(e)}async walk(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise((e,r)=>{this.walkCB(this.path,this.patterns,()=>{this.signal?.aborted?r(this.signal.reason):e(this.matches)})}),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>{if(this.signal?.aborted)throw this.signal.reason}),this.matches}},Cp=class extends vy{results;constructor(e,r,n){super(e,r,n),this.results=new Mo({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(e){this.results.write(e),this.results.flowing||this.pause()}stream(){let e=this.path;return e.isUnknown()?e.lstat().then(()=>{this.walkCB(e,this.patterns,()=>this.results.end())}):this.walkCB(e,this.patterns,()=>this.results.end()),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}};var GY=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",Vn=class{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;includeChildMatches;opts;patterns;constructor(e,r){if(!r)throw new TypeError("glob options required");if(this.withFileTypes=!!r.withFileTypes,this.signal=r.signal,this.follow=!!r.follow,this.dot=!!r.dot,this.dotRelative=!!r.dotRelative,this.nodir=!!r.nodir,this.mark=!!r.mark,r.cwd?(r.cwd instanceof URL||r.cwd.startsWith("file://"))&&(r.cwd=(0,RC.fileURLToPath)(r.cwd)):this.cwd="",this.cwd=r.cwd||"",this.root=r.root,this.magicalBraces=!!r.magicalBraces,this.nobrace=!!r.nobrace,this.noext=!!r.noext,this.realpath=!!r.realpath,this.absolute=r.absolute,this.includeChildMatches=r.includeChildMatches!==!1,this.noglobstar=!!r.noglobstar,this.matchBase=!!r.matchBase,this.maxDepth=typeof r.maxDepth=="number"?r.maxDepth:1/0,this.stat=!!r.stat,this.ignore=r.ignore,this.withFileTypes&&this.absolute!==void 0)throw new Error("cannot set absolute and withFileTypes:true");if(typeof e=="string"&&(e=[e]),this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(e=e.map(p=>p.replace(/\\/g,"/"))),this.matchBase){if(r.noglobstar)throw new TypeError("base matching requires globstar");e=e.map(p=>p.includes("/")?p:`./**/${p}`)}if(this.pattern=e,this.platform=r.platform||GY,this.opts={...r,platform:this.platform},r.scurry){if(this.scurry=r.scurry,r.nocase!==void 0&&r.nocase!==r.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{let p=r.platform==="win32"?yc:r.platform==="darwin"?Dp:r.platform?xc:EC;this.scurry=new p(this.cwd,{nocase:r.nocase,fs:r.fs})}this.nocase=this.scurry.nocase;let n=this.platform==="darwin"||this.platform==="win32",i={...r,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:n,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},o=this.pattern.map(p=>new zr(p,i)),[s,l]=o.reduce((p,u)=>(p[0].push(...u.set),p[1].push(...u.globParts),p),[[],[]]);this.patterns=s.map((p,u)=>{let m=l[u];if(!m)throw new Error("invalid pattern object");return new Tc(p,m,0,this.platform)})}async walk(){return[...await new Ip(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walk()]}walkSync(){return[...new Ip(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walkSync()]}stream(){return new Cp(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).stream()}streamSync(){return new Cp(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}};var Db=(t,e={})=>{Array.isArray(t)||(t=[t]);for(let r of t)if(new zr(r,e).hasMagic())return!0;return!1};function by(t,e={}){return new Vn(t,e).streamSync()}function PC(t,e={}){return new Vn(t,e).stream()}function AC(t,e={}){return new Vn(t,e).walkSync()}async function kC(t,e={}){return new Vn(t,e).walk()}function wy(t,e={}){return new Vn(t,e).iterateSync()}function MC(t,e={}){return new Vn(t,e).iterate()}var KY=by,QY=Object.assign(PC,{sync:by}),ZY=wy,YY=Object.assign(MC,{sync:wy}),XY=Object.assign(AC,{stream:by,iterate:wy}),Fb=Object.assign(kC,{glob:kC,globSync:AC,sync:XY,globStream:PC,stream:QY,globStreamSync:by,streamSync:KY,globIterate:MC,iterate:YY,globIterateSync:wy,iterateSync:ZY,Glob:Vn,hasMagic:Db,escape:uc,unescape:Ln});Fb.glob=Fb;function DC(){let t=process.env.CURSORLESS_MODE;switch(t){case void 0:case"production":return"production";case"development":return"development";case"test":return"test";default:throw new Error(`Unexpected value for environment variable CURSORLESS_MODE: ${t}`)}}var BC=Object.defineProperty,tX=Object.getOwnPropertyNames,C=(t,e)=>BC(t,"name",{value:e,configurable:!0}),rX=(t,e)=>function(){return e||(0,t[tX(t)[0]])((e={exports:{}}).exports,e),e.exports},Qb=(t,e)=>{for(var r in e)BC(t,r,{get:e[r],enumerable:!0})},nX=rX({"(disabled):util"(){}}),_y={};Qb(_y,{addChainableMethod:()=>sw,addLengthGuard:()=>Hp,addMethod:()=>iw,addProperty:()=>nw,checkError:()=>Kr,compareByInspect:()=>Py,eql:()=>d1,expectTypes:()=>QC,flag:()=>_e,getActual:()=>Iy,getMessage:()=>Xb,getName:()=>Oy,getOperator:()=>uw,getOwnEnumerableProperties:()=>pw,getOwnEnumerablePropertySymbols:()=>lw,getPathInfo:()=>rw,hasProperty:()=>Cy,inspect:()=>Ue,isNaN:()=>Ay,isProxyEnabled:()=>Up,isRegExp:()=>My,objDisplay:()=>Aa,overwriteChainableMethod:()=>cw,overwriteMethod:()=>aw,overwriteProperty:()=>ow,proxify:()=>_c,test:()=>Zb,transferFlags:()=>Bn,type:()=>Ze});var Kr={};Qb(Kr,{compatibleConstructor:()=>jC,compatibleInstance:()=>$C,compatibleMessage:()=>qC,getConstructorName:()=>zC,getMessage:()=>GC});function Fy(t){return t instanceof Error||Object.prototype.toString.call(t)==="[object Error]"}C(Fy,"isErrorInstance");function WC(t){return Object.prototype.toString.call(t)==="[object RegExp]"}C(WC,"isRegExp");function $C(t,e){return Fy(e)&&t===e}C($C,"compatibleInstance");function jC(t,e){return Fy(e)?t.constructor===e.constructor||t instanceof e.constructor:(typeof e=="object"||typeof e=="function")&&e.prototype?t.constructor===e||t instanceof e:!1}C(jC,"compatibleConstructor");function qC(t,e){let r=typeof t=="string"?t:t.message;return WC(e)?e.test(r):typeof e=="string"?r.indexOf(e)!==-1:!1}C(qC,"compatibleMessage");function zC(t){let e=t;return Fy(t)?e=t.constructor.name:typeof t=="function"&&(e=t.name,e===""&&(e=new t().name||e)),e}C(zC,"getConstructorName");function GC(t){let e="";return t&&t.message?e=t.message:typeof t=="string"&&(e=t),e}C(GC,"getMessage");function _e(t,e,r){var n=t.__flags||(t.__flags=Object.create(null));if(arguments.length===3)n[e]=r;else return n[e]}C(_e,"flag");function Zb(t,e){var r=_e(t,"negate"),n=e[0];return r?!n:n}C(Zb,"test");function Ze(t){if(typeof t>"u")return"undefined";if(t===null)return"null";let e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}C(Ze,"type");var iX="captureStackTrace"in Error,ze=class KC extends Error{static{C(this,"AssertionError")}message;get name(){return"AssertionError"}get ok(){return!1}constructor(e="Unspecified AssertionError",r,n){super(e),this.message=e,iX&&Error.captureStackTrace(this,n||KC);for(let i in r)i in this||(this[i]=r[i])}toJSON(e){return{...this,name:this.name,message:this.message,ok:!1,stack:e!==!1?this.stack:void 0}}};function QC(t,e){var r=_e(t,"message"),n=_e(t,"ssfi");r=r?r+": ":"",t=_e(t,"object"),e=e.map(function(s){return s.toLowerCase()}),e.sort();var i=e.map(function(s,l){var p=~["a","e","i","o","u"].indexOf(s.charAt(0))?"an":"a",u=e.length>1&&l===e.length-1?"or ":"";return u+p+" "+s}).join(", "),o=Ze(t).toLowerCase();if(!e.some(function(s){return o===s}))throw new ze(r+"object tested must be "+i+", but "+o+" given",void 0,n)}C(QC,"expectTypes");function Iy(t,e){return e.length>4?e[4]:t._obj}C(Iy,"getActual");var FC={bold:["1","22"],dim:["2","22"],italic:["3","23"],underline:["4","24"],inverse:["7","27"],hidden:["8","28"],strike:["9","29"],black:["30","39"],red:["31","39"],green:["32","39"],yellow:["33","39"],blue:["34","39"],magenta:["35","39"],cyan:["36","39"],white:["37","39"],brightblack:["30;1","39"],brightred:["31;1","39"],brightgreen:["32;1","39"],brightyellow:["33;1","39"],brightblue:["34;1","39"],brightmagenta:["35;1","39"],brightcyan:["36;1","39"],brightwhite:["37;1","39"],grey:["90","39"]},oX={special:"cyan",number:"yellow",bigint:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",symbol:"green",date:"magenta",regexp:"red"},bc="\u2026";function ZC(t,e){let r=FC[oX[e]]||FC[e]||"";return r?`\x1B[${r[0]}m${String(t)}\x1B[${r[1]}m`:String(t)}C(ZC,"colorise");function YC({showHidden:t=!1,depth:e=2,colors:r=!1,customInspect:n=!0,showProxy:i=!1,maxArrayLength:o=1/0,breakLength:s=1/0,seen:l=[],truncate:p=1/0,stylize:u=String}={},m){let d={showHidden:!!t,depth:Number(e),colors:!!r,customInspect:!!n,showProxy:!!i,maxArrayLength:Number(o),breakLength:Number(s),truncate:Number(p),seen:l,inspect:m,stylize:u};return d.colors&&(d.stylize=ZC),d}C(YC,"normaliseOptions");function Hi(t,e,r=bc){t=String(t);let n=r.length,i=t.length;return n>e&&i>n?r:i>e&&i>n?`${t.slice(0,e-n)}${r}`:t}C(Hi,"truncate");function Sn(t,e,r,n=", "){r=r||e.inspect;let i=t.length;if(i===0)return"";let o=e.truncate,s="",l="",p="";for(let u=0;u<i;u+=1){let m=u+1===t.length,d=u+2===t.length;p=`${bc}(${t.length-u})`;let g=t[u];e.truncate=o-s.length-(m?0:n.length);let x=l||r(g,e)+(m?"":n),b=s.length+x.length,v=b+p.length;if(m&&b>o&&s.length+p.length<=o||!m&&!d&&v>o||(l=m?"":r(t[u+1],e)+(d?"":n),!m&&d&&v>o&&b+l.length>o))break;if(s+=x,!m&&!d&&b+l.length>=o){p=`${bc}(${t.length-u-1})`;break}p=""}return`${s}${p}`}C(Sn,"inspectList");function XC(t){return t.match(/^[a-zA-Z_][a-zA-Z_0-9]*$/)?t:JSON.stringify(t).replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'")}C(XC,"quoteComplexKey");function wc([t,e],r){return r.truncate-=2,typeof t=="string"?t=XC(t):typeof t!="number"&&(t=`[${r.inspect(t,r)}]`),r.truncate-=t.length,e=r.inspect(e,r),`${t}: ${e}`}C(wc,"inspectProperty");function JC(t,e){let r=Object.keys(t).slice(t.length);if(!t.length&&!r.length)return"[]";e.truncate-=4;let n=Sn(t,e);e.truncate-=n.length;let i="";return r.length&&(i=Sn(r.map(o=>[o,t[o]]),e,wc)),`[ ${n}${i?`, ${i}`:""} ]`}C(JC,"inspectArray");var aX=C(t=>typeof Buffer=="function"&&t instanceof Buffer?"Buffer":t[Symbol.toStringTag]?t[Symbol.toStringTag]:t.constructor.name,"getArrayName");function pi(t,e){let r=aX(t);e.truncate-=r.length+4;let n=Object.keys(t).slice(t.length);if(!t.length&&!n.length)return`${r}[]`;let i="";for(let s=0;s<t.length;s++){let l=`${e.stylize(Hi(t[s],e.truncate),"number")}${s===t.length-1?"":", "}`;if(e.truncate-=l.length,t[s]!==t.length&&e.truncate<=3){i+=`${bc}(${t.length-t[s]+1})`;break}i+=l}let o="";return n.length&&(o=Sn(n.map(s=>[s,t[s]]),e,wc)),`${r}[ ${i}${o?`, ${o}`:""} ]`}C(pi,"inspectTypedArray");function e1(t,e){let r=t.toJSON();if(r===null)return"Invalid Date";let n=r.split("T"),i=n[0];return e.stylize(`${i}T${Hi(n[1],e.truncate-i.length-1)}`,"date")}C(e1,"inspectDate");function Ob(t,e){let r=t[Symbol.toStringTag]||"Function",n=t.name;return n?e.stylize(`[${r} ${Hi(n,e.truncate-11)}]`,"special"):e.stylize(`[${r}]`,"special")}C(Ob,"inspectFunction");function t1([t,e],r){return r.truncate-=4,t=r.inspect(t,r),r.truncate-=t.length,e=r.inspect(e,r),`${t} => ${e}`}C(t1,"inspectMapEntry");function r1(t){let e=[];return t.forEach((r,n)=>{e.push([n,r])}),e}C(r1,"mapToEntries");function n1(t,e){return t.size-1<=0?"Map{}":(e.truncate-=7,`Map{ ${Sn(r1(t),e,t1)} }`)}C(n1,"inspectMap");var sX=Number.isNaN||(t=>t!==t);function Nb(t,e){return sX(t)?e.stylize("NaN","number"):t===1/0?e.stylize("Infinity","number"):t===-1/0?e.stylize("-Infinity","number"):t===0?e.stylize(1/t===1/0?"+0":"-0","number"):e.stylize(Hi(String(t),e.truncate),"number")}C(Nb,"inspectNumber");function Lb(t,e){let r=Hi(t.toString(),e.truncate-1);return r!==bc&&(r+="n"),e.stylize(r,"bigint")}C(Lb,"inspectBigInt");function i1(t,e){let r=t.toString().split("/")[2],n=e.truncate-(2+r.length),i=t.source;return e.stylize(`/${Hi(i,n)}/${r}`,"regexp")}C(i1,"inspectRegExp");function o1(t){let e=[];return t.forEach(r=>{e.push(r)}),e}C(o1,"arrayFromSet");function a1(t,e){return t.size===0?"Set{}":(e.truncate-=7,`Set{ ${Sn(o1(t),e)} }`)}C(a1,"inspectSet");var IC=new RegExp("['\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]","g"),cX={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"},lX=16,pX=4;function s1(t){return cX[t]||`\\u${`0000${t.charCodeAt(0).toString(lX)}`.slice(-pX)}`}C(s1,"escape");function Ub(t,e){return IC.test(t)&&(t=t.replace(IC,s1)),e.stylize(`'${Hi(t,e.truncate-2)}'`,"string")}C(Ub,"inspectString");function Hb(t){return"description"in Symbol.prototype?t.description?`Symbol(${t.description})`:"Symbol()":t.toString()}C(Hb,"inspectSymbol");var c1=C(()=>"Promise{\u2026}","getPromiseValue");try{let{getPromiseDetails:t,kPending:e,kRejected:r}=process.binding("util");Array.isArray(t(Promise.resolve()))&&(c1=C((n,i)=>{let[o,s]=t(n);return o===e?"Promise{<pending>}":`Promise${o===r?"!":""}{${i.inspect(s,i)}}`},"getPromiseValue"))}catch{}var uX=c1;function Np(t,e){let r=Object.getOwnPropertyNames(t),n=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[];if(r.length===0&&n.length===0)return"{}";if(e.truncate-=4,e.seen=e.seen||[],e.seen.indexOf(t)>=0)return"[Circular]";e.seen.push(t);let i=Sn(r.map(l=>[l,t[l]]),e,wc),o=Sn(n.map(l=>[l,t[l]]),e,wc);e.seen.pop();let s="";return i&&o&&(s=", "),`{ ${i}${s}${o} }`}C(Np,"inspectObject");var Ib=typeof Symbol<"u"&&Symbol.toStringTag?Symbol.toStringTag:!1;function l1(t,e){let r="";return Ib&&Ib in t&&(r=t[Ib]),r=r||t.constructor.name,(!r||r==="_class")&&(r="<Anonymous Class>"),e.truncate-=r.length,`${r}${Np(t,e)}`}C(l1,"inspectClass");function p1(t,e){return t.length===0?"Arguments[]":(e.truncate-=13,`Arguments[ ${Sn(t,e)} ]`)}C(p1,"inspectArguments");var fX=["stack","line","column","name","message","fileName","lineNumber","columnNumber","number","description"];function u1(t,e){let r=Object.getOwnPropertyNames(t).filter(s=>fX.indexOf(s)===-1),n=t.name;e.truncate-=n.length;let i="";typeof t.message=="string"?i=Hi(t.message,e.truncate):r.unshift("message"),i=i?`: ${i}`:"",e.truncate-=i.length+5;let o=Sn(r.map(s=>[s,t[s]]),e,wc);return`${n}${i}${o?` { ${o} }`:""}`}C(u1,"inspectObject");function f1([t,e],r){return r.truncate-=3,e?`${r.stylize(String(t),"yellow")}=${r.stylize(`"${e}"`,"string")}`:`${r.stylize(String(t),"yellow")}`}C(f1,"inspectAttribute");function Ey(t,e){return Sn(t,e,Yb,`
`)}C(Ey,"inspectHTMLCollection");function Yb(t,e){let r=t.getAttributeNames(),n=t.tagName.toLowerCase(),i=e.stylize(`<${n}`,"special"),o=e.stylize(">","special"),s=e.stylize(`</${n}>`,"special");e.truncate-=n.length*2+5;let l="";r.length>0&&(l+=" ",l+=Sn(r.map(m=>[m,t.getAttribute(m)]),e,f1," ")),e.truncate-=l.length;let p=e.truncate,u=Ey(t.children,e);return u&&u.length>p&&(u=`${bc}(${t.children.length})`),`${i}${l}${o}${u}${s}`}C(Yb,"inspectHTML");var mX=typeof Symbol=="function"&&typeof Symbol.for=="function",Cb=mX?Symbol.for("chai/inspect"):"@@chai/inspect",vc=!1;try{let t=nX();vc=t.inspect?t.inspect.custom:!1}catch{vc=!1}var CC=new WeakMap,OC={},NC={undefined:(t,e)=>e.stylize("undefined","undefined"),null:(t,e)=>e.stylize("null","null"),boolean:(t,e)=>e.stylize(String(t),"boolean"),Boolean:(t,e)=>e.stylize(String(t),"boolean"),number:Nb,Number:Nb,bigint:Lb,BigInt:Lb,string:Ub,String:Ub,function:Ob,Function:Ob,symbol:Hb,Symbol:Hb,Array:JC,Date:e1,Map:n1,Set:a1,RegExp:i1,Promise:uX,WeakSet:(t,e)=>e.stylize("WeakSet{\u2026}","special"),WeakMap:(t,e)=>e.stylize("WeakMap{\u2026}","special"),Arguments:p1,Int8Array:pi,Uint8Array:pi,Uint8ClampedArray:pi,Int16Array:pi,Uint16Array:pi,Int32Array:pi,Uint32Array:pi,Float32Array:pi,Float64Array:pi,Generator:()=>"",DataView:()=>"",ArrayBuffer:()=>"",Error:u1,HTMLCollection:Ey,NodeList:Ey},dX=C((t,e,r)=>Cb in t&&typeof t[Cb]=="function"?t[Cb](e):vc&&vc in t&&typeof t[vc]=="function"?t[vc](e.depth,e):"inspect"in t&&typeof t.inspect=="function"?t.inspect(e.depth,e):"constructor"in t&&CC.has(t.constructor)?CC.get(t.constructor)(t,e):OC[r]?OC[r](t,e):"","inspectCustom"),hX=Object.prototype.toString;function Ry(t,e={}){let r=YC(e,Ry),{customInspect:n}=r,i=t===null?"null":typeof t;if(i==="object"&&(i=hX.call(t).slice(8,-1)),i in NC)return NC[i](t,r);if(n&&t){let s=dX(t,r,i);if(s)return typeof s=="string"?s:Ry(s,r)}let o=t?Object.getPrototypeOf(t):!1;return o===Object.prototype||o===null?Np(t,r):t&&typeof HTMLElement=="function"&&t instanceof HTMLElement?Yb(t,r):"constructor"in t?t.constructor!==Object?l1(t,r):Np(t,r):t===Object(t)?Np(t,r):r.stylize(String(t),i)}C(Ry,"inspect");var Pr={includeStack:!1,showDiff:!0,truncateThreshold:40,useProxy:!0,proxyExcludedKeys:["then","catch","inspect","toJSON"],deepEqual:null};function Ue(t,e,r,n){var i={colors:n,depth:typeof r>"u"?2:r,showHidden:e,truncate:Pr.truncateThreshold?Pr.truncateThreshold:1/0};return Ry(t,i)}C(Ue,"inspect");function Aa(t){var e=Ue(t),r=Object.prototype.toString.call(t);if(Pr.truncateThreshold&&e.length>=Pr.truncateThreshold){if(r==="[object Function]")return!t.name||t.name===""?"[Function]":"[Function: "+t.name+"]";if(r==="[object Array]")return"[ Array("+t.length+") ]";if(r==="[object Object]"){var n=Object.keys(t),i=n.length>2?n.splice(0,2).join(", ")+", ...":n.join(", ");return"{ Object ("+i+") }"}else return e}else return e}C(Aa,"objDisplay");function Xb(t,e){var r=_e(t,"negate"),n=_e(t,"object"),i=e[3],o=Iy(t,e),s=r?e[2]:e[1],l=_e(t,"message");return typeof s=="function"&&(s=s()),s=s||"",s=s.replace(/#\{this\}/g,function(){return Aa(n)}).replace(/#\{act\}/g,function(){return Aa(o)}).replace(/#\{exp\}/g,function(){return Aa(i)}),l?l+": "+s:s}C(Xb,"getMessage");function Bn(t,e,r){var n=t.__flags||(t.__flags=Object.create(null));e.__flags||(e.__flags=Object.create(null)),r=arguments.length===3?r:!0;for(var i in n)(r||i!=="object"&&i!=="ssfi"&&i!=="lockSsfi"&&i!="message")&&(e.__flags[i]=n[i])}C(Bn,"transferFlags");function Vb(t){if(typeof t>"u")return"undefined";if(t===null)return"null";let e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}C(Vb,"type");function Jb(){this._key="chai/deep-eql__"+Math.random()+Date.now()}C(Jb,"FakeMap");Jb.prototype={get:C(function(e){return e[this._key]},"get"),set:C(function(e,r){Object.isExtensible(e)&&Object.defineProperty(e,this._key,{value:r,configurable:!0})},"set")};var m1=typeof WeakMap=="function"?WeakMap:Jb;function Bb(t,e,r){if(!r||Ma(t)||Ma(e))return null;var n=r.get(t);if(n){var i=n.get(e);if(typeof i=="boolean")return i}return null}C(Bb,"memoizeCompare");function Op(t,e,r,n){if(!(!r||Ma(t)||Ma(e))){var i=r.get(t);i?i.set(e,n):(i=new m1,i.set(e,n),r.set(t,i))}}C(Op,"memoizeSet");var d1=Lp;function Lp(t,e,r){if(r&&r.comparator)return Wb(t,e,r);var n=ew(t,e);return n!==null?n:Wb(t,e,r)}C(Lp,"deepEqual");function ew(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e?!0:Ma(t)||Ma(e)?!1:null}C(ew,"simpleEqual");function Wb(t,e,r){r=r||{},r.memoize=r.memoize===!1?!1:r.memoize||new m1;var n=r&&r.comparator,i=Bb(t,e,r.memoize);if(i!==null)return i;var o=Bb(e,t,r.memoize);if(o!==null)return o;if(n){var s=n(t,e);if(s===!1||s===!0)return Op(t,e,r.memoize,s),s;var l=ew(t,e);if(l!==null)return l}var p=Vb(t);if(p!==Vb(e))return Op(t,e,r.memoize,!1),!1;Op(t,e,r.memoize,!0);var u=h1(t,e,p,r);return Op(t,e,r.memoize,u),u}C(Wb,"extensiveDeepEqual");function h1(t,e,r,n){switch(r){case"String":case"Number":case"Boolean":case"Date":return Lp(t.valueOf(),e.valueOf());case"Promise":case"Symbol":case"function":case"WeakMap":case"WeakSet":return t===e;case"Error":return tw(t,e,["name","message","code"],n);case"Arguments":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"Array":return Fo(t,e,n);case"RegExp":return g1(t,e);case"Generator":return y1(t,e,n);case"DataView":return Fo(new Uint8Array(t.buffer),new Uint8Array(e.buffer),n);case"ArrayBuffer":return Fo(new Uint8Array(t),new Uint8Array(e),n);case"Set":return $b(t,e,n);case"Map":return $b(t,e,n);case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.Instant":case"Temporal.ZonedDateTime":case"Temporal.PlainYearMonth":case"Temporal.PlainMonthDay":return t.equals(e);case"Temporal.Duration":return t.total("nanoseconds")===e.total("nanoseconds");case"Temporal.TimeZone":case"Temporal.Calendar":return t.toString()===e.toString();default:return T1(t,e,n)}}C(h1,"extensiveDeepEqualByType");function g1(t,e){return t.toString()===e.toString()}C(g1,"regexpEqual");function $b(t,e,r){if(t.size!==e.size)return!1;if(t.size===0)return!0;var n=[],i=[];return t.forEach(C(function(s,l){n.push([s,l])},"gatherEntries")),e.forEach(C(function(s,l){i.push([s,l])},"gatherEntries")),Fo(n.sort(),i.sort(),r)}C($b,"entriesEqual");function Fo(t,e,r){var n=t.length;if(n!==e.length)return!1;if(n===0)return!0;for(var i=-1;++i<n;)if(Lp(t[i],e[i],r)===!1)return!1;return!0}C(Fo,"iterableEqual");function y1(t,e,r){return Fo(ky(t),ky(e),r)}C(y1,"generatorEqual");function x1(t){return typeof Symbol<"u"&&typeof t=="object"&&typeof Symbol.iterator<"u"&&typeof t[Symbol.iterator]=="function"}C(x1,"hasIteratorFunction");function jb(t){if(x1(t))try{return ky(t[Symbol.iterator]())}catch{return[]}return[]}C(jb,"getIteratorEntries");function ky(t){for(var e=t.next(),r=[e.value];e.done===!1;)e=t.next(),r.push(e.value);return r}C(ky,"getGeneratorEntries");function qb(t){var e=[];for(var r in t)e.push(r);return e}C(qb,"getEnumerableKeys");function zb(t){for(var e=[],r=Object.getOwnPropertySymbols(t),n=0;n<r.length;n+=1){var i=r[n];Object.getOwnPropertyDescriptor(t,i).enumerable&&e.push(i)}return e}C(zb,"getEnumerableSymbols");function tw(t,e,r,n){var i=r.length;if(i===0)return!0;for(var o=0;o<i;o+=1)if(Lp(t[r[o]],e[r[o]],n)===!1)return!1;return!0}C(tw,"keysEqual");function T1(t,e,r){var n=qb(t),i=qb(e),o=zb(t),s=zb(e);if(n=n.concat(o),i=i.concat(s),n.length&&n.length===i.length)return Fo(Gb(n).sort(),Gb(i).sort())===!1?!1:tw(t,e,n,r);var l=jb(t),p=jb(e);return l.length&&l.length===p.length?(l.sort(),p.sort(),Fo(l,p,r)):n.length===0&&l.length===0&&i.length===0&&p.length===0}C(T1,"objectEqual");function Ma(t){return t===null||typeof t!="object"}C(Ma,"isPrimitive");function Gb(t){return t.map(C(function(r){return typeof r=="symbol"?r.toString():r},"mapSymbol"))}C(Gb,"mapSymbols");function Cy(t,e){return typeof t>"u"||t===null?!1:e in Object(t)}C(Cy,"hasProperty");function S1(t){return t.replace(/([^\\])\[/g,"$1.[").match(/(\\\.|[^.]+?)+/g).map(n=>{if(n==="constructor"||n==="__proto__"||n==="prototype")return{};let o=/^\[(\d+)\]$/.exec(n),s=null;return o?s={i:parseFloat(o[1])}:s={p:n.replace(/\\([.[\]])/g,"$1")},s})}C(S1,"parsePath");function Kb(t,e,r){let n=t,i=null;r=typeof r>"u"?e.length:r;for(let o=0;o<r;o++){let s=e[o];n&&(typeof s.p>"u"?n=n[s.i]:n=n[s.p],o===r-1&&(i=n))}return i}C(Kb,"internalGetPathValue");function rw(t,e){let r=S1(e),n=r[r.length-1],i={parent:r.length>1?Kb(t,r,r.length-1):t,name:n.p||n.i,value:Kb(t,r)};return i.exists=Cy(i.parent,i.name),i}C(rw,"getPathInfo");function _(t,e,r,n){return _e(this,"ssfi",r||_),_e(this,"lockSsfi",n),_e(this,"object",t),_e(this,"message",e),_e(this,"eql",Pr.deepEqual||d1),_c(this)}C(_,"Assertion");Object.defineProperty(_,"includeStack",{get:function(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),Pr.includeStack},set:function(t){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),Pr.includeStack=t}});Object.defineProperty(_,"showDiff",{get:function(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),Pr.showDiff},set:function(t){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),Pr.showDiff=t}});_.addProperty=function(t,e){nw(this.prototype,t,e)};_.addMethod=function(t,e){iw(this.prototype,t,e)};_.addChainableMethod=function(t,e,r){sw(this.prototype,t,e,r)};_.overwriteProperty=function(t,e){ow(this.prototype,t,e)};_.overwriteMethod=function(t,e){aw(this.prototype,t,e)};_.overwriteChainableMethod=function(t,e,r){cw(this.prototype,t,e,r)};_.prototype.assert=function(t,e,r,n,i,o){var s=Zb(this,arguments);if(o!==!1&&(o=!0),n===void 0&&i===void 0&&(o=!1),Pr.showDiff!==!0&&(o=!1),!s){e=Xb(this,arguments);var l=Iy(this,arguments),p={actual:l,expected:n,showDiff:o},u=uw(this,arguments);throw u&&(p.operator=u),new ze(e,p,Pr.includeStack?this.assert:_e(this,"ssfi"))}};Object.defineProperty(_.prototype,"_obj",{get:function(){return _e(this,"object")},set:function(t){_e(this,"object",t)}});function Up(){return Pr.useProxy&&typeof Proxy<"u"&&typeof Reflect<"u"}C(Up,"isProxyEnabled");function nw(t,e,r){r=r===void 0?function(){}:r,Object.defineProperty(t,e,{get:C(function n(){!Up()&&!_e(this,"lockSsfi")&&_e(this,"ssfi",n);var i=r.call(this);if(i!==void 0)return i;var o=new _;return Bn(this,o),o},"propertyGetter"),configurable:!0})}C(nw,"addProperty");var gX=Object.getOwnPropertyDescriptor(function(){},"length");function Hp(t,e,r){return gX.configurable&&Object.defineProperty(t,"length",{get:function(){throw Error(r?"Invalid Chai property: "+e+'.length. Due to a compatibility issue, "length" cannot directly follow "'+e+'". Use "'+e+'.lengthOf" instead.':"Invalid Chai property: "+e+'.length. See docs for proper usage of "'+e+'".')}}),t}C(Hp,"addLengthGuard");function v1(t){var e=Object.getOwnPropertyNames(t);function r(i){e.indexOf(i)===-1&&e.push(i)}C(r,"addProperty");for(var n=Object.getPrototypeOf(t);n!==null;)Object.getOwnPropertyNames(n).forEach(r),n=Object.getPrototypeOf(n);return e}C(v1,"getProperties");var LC=["__flags","__methods","_obj","assert"];function _c(t,e){return Up()?new Proxy(t,{get:C(function r(n,i){if(typeof i=="string"&&Pr.proxyExcludedKeys.indexOf(i)===-1&&!Reflect.has(n,i)){if(e)throw Error("Invalid Chai property: "+e+"."+i+'. See docs for proper usage of "'+e+'".');var o=null,s=4;throw v1(n).forEach(function(l){if(!Object.prototype.hasOwnProperty(l)&&LC.indexOf(l)===-1){var p=b1(i,l,s);p<s&&(o=l,s=p)}}),Error(o!==null?"Invalid Chai property: "+i+'. Did you mean "'+o+'"?':"Invalid Chai property: "+i)}return LC.indexOf(i)===-1&&!_e(n,"lockSsfi")&&_e(n,"ssfi",r),Reflect.get(n,i)},"proxyGetter")}):t}C(_c,"proxify");function b1(t,e,r){if(Math.abs(t.length-e.length)>=r)return r;for(var n=[],i=0;i<=t.length;i++)n[i]=Array(e.length+1).fill(0),n[i][0]=i;for(var o=0;o<e.length;o++)n[0][o]=o;for(var i=1;i<=t.length;i++)for(var s=t.charCodeAt(i-1),o=1;o<=e.length;o++){if(Math.abs(i-o)>=r){n[i][o]=r;continue}n[i][o]=Math.min(n[i-1][o]+1,n[i][o-1]+1,n[i-1][o-1]+(s===e.charCodeAt(o-1)?0:1))}return n[t.length][e.length]}C(b1,"stringDistanceCapped");function iw(t,e,r){var n=C(function(){_e(this,"lockSsfi")||_e(this,"ssfi",n);var i=r.apply(this,arguments);if(i!==void 0)return i;var o=new _;return Bn(this,o),o},"methodWrapper");Hp(n,e,!1),t[e]=_c(n,e)}C(iw,"addMethod");function ow(t,e,r){var n=Object.getOwnPropertyDescriptor(t,e),i=C(function(){},"_super");n&&typeof n.get=="function"&&(i=n.get),Object.defineProperty(t,e,{get:C(function o(){!Up()&&!_e(this,"lockSsfi")&&_e(this,"ssfi",o);var s=_e(this,"lockSsfi");_e(this,"lockSsfi",!0);var l=r(i).call(this);if(_e(this,"lockSsfi",s),l!==void 0)return l;var p=new _;return Bn(this,p),p},"overwritingPropertyGetter"),configurable:!0})}C(ow,"overwriteProperty");function aw(t,e,r){var n=t[e],i=C(function(){throw new Error(e+" is not a function")},"_super");n&&typeof n=="function"&&(i=n);var o=C(function(){_e(this,"lockSsfi")||_e(this,"ssfi",o);var s=_e(this,"lockSsfi");_e(this,"lockSsfi",!0);var l=r(i).apply(this,arguments);if(_e(this,"lockSsfi",s),l!==void 0)return l;var p=new _;return Bn(this,p),p},"overwritingMethodWrapper");Hp(o,e,!1),t[e]=_c(o,e)}C(aw,"overwriteMethod");var yX=typeof Object.setPrototypeOf=="function",UC=C(function(){},"testFn"),xX=Object.getOwnPropertyNames(UC).filter(function(t){var e=Object.getOwnPropertyDescriptor(UC,t);return typeof e!="object"?!0:!e.configurable}),TX=Function.prototype.call,SX=Function.prototype.apply;function sw(t,e,r,n){typeof n!="function"&&(n=C(function(){},"chainingBehavior"));var i={method:r,chainingBehavior:n};t.__methods||(t.__methods={}),t.__methods[e]=i,Object.defineProperty(t,e,{get:C(function(){i.chainingBehavior.call(this);var s=C(function(){_e(this,"lockSsfi")||_e(this,"ssfi",s);var u=i.method.apply(this,arguments);if(u!==void 0)return u;var m=new _;return Bn(this,m),m},"chainableMethodWrapper");if(Hp(s,e,!0),yX){var l=Object.create(this);l.call=TX,l.apply=SX,Object.setPrototypeOf(s,l)}else{var p=Object.getOwnPropertyNames(t);p.forEach(function(u){if(xX.indexOf(u)===-1){var m=Object.getOwnPropertyDescriptor(t,u);Object.defineProperty(s,u,m)}})}return Bn(this,s),_c(s)},"chainableMethodGetter"),configurable:!0})}C(sw,"addChainableMethod");function cw(t,e,r,n){var i=t.__methods[e],o=i.chainingBehavior;i.chainingBehavior=C(function(){var p=n(o).call(this);if(p!==void 0)return p;var u=new _;return Bn(this,u),u},"overwritingChainableMethodGetter");var s=i.method;i.method=C(function(){var p=r(s).apply(this,arguments);if(p!==void 0)return p;var u=new _;return Bn(this,u),u},"overwritingChainableMethodWrapper")}C(cw,"overwriteChainableMethod");function Py(t,e){return Ue(t)<Ue(e)?-1:1}C(Py,"compareByInspect");function lw(t){return typeof Object.getOwnPropertySymbols!="function"?[]:Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})}C(lw,"getOwnEnumerablePropertySymbols");function pw(t){return Object.keys(t).concat(lw(t))}C(pw,"getOwnEnumerableProperties");function w1(t){return t!==t}C(w1,"_isNaN");var Ay=Number.isNaN||w1;function _1(t){var e=Ze(t),r=["Array","Object","Function"];return r.indexOf(e)!==-1}C(_1,"isObjectType");function uw(t,e){var r=_e(t,"operator"),n=_e(t,"negate"),i=e[3],o=n?e[2]:e[1];if(r)return r;if(typeof o=="function"&&(o=o()),o=o||"",!!o&&!/\shave\s/.test(o)){var s=_1(i);return/\snot\s/.test(o)?s?"notDeepStrictEqual":"notStrictEqual":s?"deepStrictEqual":"strictEqual"}}C(uw,"getOperator");function Oy(t){return t.name}C(Oy,"getName");function My(t){return Object.prototype.toString.call(t)==="[object RegExp]"}C(My,"isRegExp");var{flag:A}=_y;["to","be","been","is","and","has","have","with","that","which","at","of","same","but","does","still","also"].forEach(function(t){_.addProperty(t)});_.addProperty("not",function(){A(this,"negate",!0)});_.addProperty("deep",function(){A(this,"deep",!0)});_.addProperty("nested",function(){A(this,"nested",!0)});_.addProperty("own",function(){A(this,"own",!0)});_.addProperty("ordered",function(){A(this,"ordered",!0)});_.addProperty("any",function(){A(this,"any",!0),A(this,"all",!1)});_.addProperty("all",function(){A(this,"all",!0),A(this,"any",!1)});var HC={function:["function","asyncfunction","generatorfunction","asyncgeneratorfunction"],asyncfunction:["asyncfunction","asyncgeneratorfunction"],generatorfunction:["generatorfunction","asyncgeneratorfunction"],asyncgeneratorfunction:["asyncgeneratorfunction"]};function fw(t,e){e&&A(this,"message",e),t=t.toLowerCase();var r=A(this,"object"),n=~["a","e","i","o","u"].indexOf(t.charAt(0))?"an ":"a ";let i=Ze(r).toLowerCase();HC.function.includes(t)?this.assert(HC[t].includes(i),"expected #{this} to be "+n+t,"expected #{this} not to be "+n+t):this.assert(t===i,"expected #{this} to be "+n+t,"expected #{this} not to be "+n+t)}C(fw,"an");_.addChainableMethod("an",fw);_.addChainableMethod("a",fw);function E1(t,e){return Ay(t)&&Ay(e)||t===e}C(E1,"SameValueZero");function Vp(){A(this,"contains",!0)}C(Vp,"includeChainingBehavior");function Bp(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=Ze(r).toLowerCase(),i=A(this,"message"),o=A(this,"negate"),s=A(this,"ssfi"),l=A(this,"deep"),p=l?"deep ":"",u=l?A(this,"eql"):E1;i=i?i+": ":"";var m=!1;switch(n){case"string":m=r.indexOf(t)!==-1;break;case"weakset":if(l)throw new ze(i+"unable to use .deep.include with WeakSet",void 0,s);m=r.has(t);break;case"map":r.forEach(function(b){m=m||u(b,t)});break;case"set":l?r.forEach(function(b){m=m||u(b,t)}):m=r.has(t);break;case"array":l?m=r.some(function(b){return u(b,t)}):m=r.indexOf(t)!==-1;break;default:if(t!==Object(t))throw new ze(i+"the given combination of arguments ("+n+" and "+Ze(t).toLowerCase()+") is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a "+Ze(t).toLowerCase(),void 0,s);var d=Object.keys(t),g=null,x=0;if(d.forEach(function(b){var v=new _(r);if(Bn(this,v,!0),A(v,"lockSsfi",!0),!o||d.length===1){v.property(b,t[b]);return}try{v.property(b,t[b])}catch(I){if(!Kr.compatibleConstructor(I,ze))throw I;g===null&&(g=I),x++}},this),o&&d.length>1&&x===d.length)throw g;return}this.assert(m,"expected #{this} to "+p+"include "+Ue(t),"expected #{this} to not "+p+"include "+Ue(t))}C(Bp,"include");_.addChainableMethod("include",Bp,Vp);_.addChainableMethod("contain",Bp,Vp);_.addChainableMethod("contains",Bp,Vp);_.addChainableMethod("includes",Bp,Vp);_.addProperty("ok",function(){this.assert(A(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")});_.addProperty("true",function(){this.assert(A(this,"object")===!0,"expected #{this} to be true","expected #{this} to be false",!A(this,"negate"))});_.addProperty("callable",function(){let t=A(this,"object"),e=A(this,"ssfi"),r=A(this,"message"),n=r?`${r}: `:"",i=A(this,"negate"),o=i?`${n}expected ${Ue(t)} not to be a callable function`:`${n}expected ${Ue(t)} to be a callable function`,s=["Function","AsyncFunction","GeneratorFunction","AsyncGeneratorFunction"].includes(Ze(t));if(s&&i||!s&&!i)throw new ze(o,void 0,e)});_.addProperty("false",function(){this.assert(A(this,"object")===!1,"expected #{this} to be false","expected #{this} to be true",!!A(this,"negate"))});_.addProperty("null",function(){this.assert(A(this,"object")===null,"expected #{this} to be null","expected #{this} not to be null")});_.addProperty("undefined",function(){this.assert(A(this,"object")===void 0,"expected #{this} to be undefined","expected #{this} not to be undefined")});_.addProperty("NaN",function(){this.assert(Ay(A(this,"object")),"expected #{this} to be NaN","expected #{this} not to be NaN")});function mw(){var t=A(this,"object");this.assert(t!=null,"expected #{this} to exist","expected #{this} to not exist")}C(mw,"assertExist");_.addProperty("exist",mw);_.addProperty("exists",mw);_.addProperty("empty",function(){var t=A(this,"object"),e=A(this,"ssfi"),r=A(this,"message"),n;switch(r=r?r+": ":"",Ze(t).toLowerCase()){case"array":case"string":n=t.length;break;case"map":case"set":n=t.size;break;case"weakmap":case"weakset":throw new ze(r+".empty was passed a weak collection",void 0,e);case"function":var i=r+".empty was passed a function "+Oy(t);throw new ze(i.trim(),void 0,e);default:if(t!==Object(t))throw new ze(r+".empty was passed non-string primitive "+Ue(t),void 0,e);n=Object.keys(t).length}this.assert(n===0,"expected #{this} to be empty","expected #{this} not to be empty")});function dw(){var t=A(this,"object"),e=Ze(t);this.assert(e==="Arguments","expected #{this} to be arguments but got "+e,"expected #{this} to not be arguments")}C(dw,"checkArguments");_.addProperty("arguments",dw);_.addProperty("Arguments",dw);function Ny(t,e){e&&A(this,"message",e);var r=A(this,"object");if(A(this,"deep")){var n=A(this,"lockSsfi");A(this,"lockSsfi",!0),this.eql(t),A(this,"lockSsfi",n)}else this.assert(t===r,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",t,this._obj,!0)}C(Ny,"assertEqual");_.addMethod("equal",Ny);_.addMethod("equals",Ny);_.addMethod("eq",Ny);function hw(t,e){e&&A(this,"message",e);var r=A(this,"eql");this.assert(r(t,A(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",t,this._obj,!0)}C(hw,"assertEql");_.addMethod("eql",hw);_.addMethod("eqls",hw);function Ly(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=A(this,"doLength"),i=A(this,"message"),o=i?i+": ":"",s=A(this,"ssfi"),l=Ze(r).toLowerCase(),p=Ze(t).toLowerCase(),u,m=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&p!=="date")u=o+"the argument to above must be a date";else if(p!=="number"&&(n||l==="number"))u=o+"the argument to above must be a number";else if(!n&&l!=="date"&&l!=="number"){var d=l==="string"?"'"+r+"'":r;u=o+"expected "+d+" to be a number or a date"}else m=!1;if(m)throw new ze(u,void 0,s);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x>t,"expected #{this} to have a "+g+" above #{exp} but got #{act}","expected #{this} to not have a "+g+" above #{exp}",t,x)}else this.assert(r>t,"expected #{this} to be above #{exp}","expected #{this} to be at most #{exp}",t)}C(Ly,"assertAbove");_.addMethod("above",Ly);_.addMethod("gt",Ly);_.addMethod("greaterThan",Ly);function Uy(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=A(this,"doLength"),i=A(this,"message"),o=i?i+": ":"",s=A(this,"ssfi"),l=Ze(r).toLowerCase(),p=Ze(t).toLowerCase(),u,m=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&p!=="date")u=o+"the argument to least must be a date";else if(p!=="number"&&(n||l==="number"))u=o+"the argument to least must be a number";else if(!n&&l!=="date"&&l!=="number"){var d=l==="string"?"'"+r+"'":r;u=o+"expected "+d+" to be a number or a date"}else m=!1;if(m)throw new ze(u,void 0,s);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x>=t,"expected #{this} to have a "+g+" at least #{exp} but got #{act}","expected #{this} to have a "+g+" below #{exp}",t,x)}else this.assert(r>=t,"expected #{this} to be at least #{exp}","expected #{this} to be below #{exp}",t)}C(Uy,"assertLeast");_.addMethod("least",Uy);_.addMethod("gte",Uy);_.addMethod("greaterThanOrEqual",Uy);function Hy(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=A(this,"doLength"),i=A(this,"message"),o=i?i+": ":"",s=A(this,"ssfi"),l=Ze(r).toLowerCase(),p=Ze(t).toLowerCase(),u,m=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&p!=="date")u=o+"the argument to below must be a date";else if(p!=="number"&&(n||l==="number"))u=o+"the argument to below must be a number";else if(!n&&l!=="date"&&l!=="number"){var d=l==="string"?"'"+r+"'":r;u=o+"expected "+d+" to be a number or a date"}else m=!1;if(m)throw new ze(u,void 0,s);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x<t,"expected #{this} to have a "+g+" below #{exp} but got #{act}","expected #{this} to not have a "+g+" below #{exp}",t,x)}else this.assert(r<t,"expected #{this} to be below #{exp}","expected #{this} to be at least #{exp}",t)}C(Hy,"assertBelow");_.addMethod("below",Hy);_.addMethod("lt",Hy);_.addMethod("lessThan",Hy);function Vy(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=A(this,"doLength"),i=A(this,"message"),o=i?i+": ":"",s=A(this,"ssfi"),l=Ze(r).toLowerCase(),p=Ze(t).toLowerCase(),u,m=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&p!=="date")u=o+"the argument to most must be a date";else if(p!=="number"&&(n||l==="number"))u=o+"the argument to most must be a number";else if(!n&&l!=="date"&&l!=="number"){var d=l==="string"?"'"+r+"'":r;u=o+"expected "+d+" to be a number or a date"}else m=!1;if(m)throw new ze(u,void 0,s);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x<=t,"expected #{this} to have a "+g+" at most #{exp} but got #{act}","expected #{this} to have a "+g+" above #{exp}",t,x)}else this.assert(r<=t,"expected #{this} to be at most #{exp}","expected #{this} to be above #{exp}",t)}C(Vy,"assertMost");_.addMethod("most",Vy);_.addMethod("lte",Vy);_.addMethod("lessThanOrEqual",Vy);_.addMethod("within",function(t,e,r){r&&A(this,"message",r);var n=A(this,"object"),i=A(this,"doLength"),o=A(this,"message"),s=o?o+": ":"",l=A(this,"ssfi"),p=Ze(n).toLowerCase(),u=Ze(t).toLowerCase(),m=Ze(e).toLowerCase(),d,g=!0,x=u==="date"&&m==="date"?t.toISOString()+".."+e.toISOString():t+".."+e;if(i&&p!=="map"&&p!=="set"&&new _(n,o,l,!0).to.have.property("length"),!i&&p==="date"&&(u!=="date"||m!=="date"))d=s+"the arguments to within must be dates";else if((u!=="number"||m!=="number")&&(i||p==="number"))d=s+"the arguments to within must be numbers";else if(!i&&p!=="date"&&p!=="number"){var b=p==="string"?"'"+n+"'":n;d=s+"expected "+b+" to be a number or a date"}else g=!1;if(g)throw new ze(d,void 0,l);if(i){var v="length",I;p==="map"||p==="set"?(v="size",I=n.size):I=n.length,this.assert(I>=t&&I<=e,"expected #{this} to have a "+v+" within "+x,"expected #{this} to not have a "+v+" within "+x)}else this.assert(n>=t&&n<=e,"expected #{this} to be within "+x,"expected #{this} to not be within "+x)});function gw(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=A(this,"ssfi"),i=A(this,"message");try{var o=r instanceof t}catch(l){throw l instanceof TypeError?(i=i?i+": ":"",new ze(i+"The instanceof assertion needs a constructor but "+Ze(t)+" was given.",void 0,n)):l}var s=Oy(t);s==null&&(s="an unnamed constructor"),this.assert(o,"expected #{this} to be an instance of "+s,"expected #{this} to not be an instance of "+s)}C(gw,"assertInstanceOf");_.addMethod("instanceof",gw);_.addMethod("instanceOf",gw);function yw(t,e,r){r&&A(this,"message",r);var n=A(this,"nested"),i=A(this,"own"),o=A(this,"message"),s=A(this,"object"),l=A(this,"ssfi"),p=typeof t;if(o=o?o+": ":"",n){if(p!=="string")throw new ze(o+"the argument to property must be a string when using nested syntax",void 0,l)}else if(p!=="string"&&p!=="number"&&p!=="symbol")throw new ze(o+"the argument to property must be a string, number, or symbol",void 0,l);if(n&&i)throw new ze(o+'The "nested" and "own" flags cannot be combined.',void 0,l);if(s==null)throw new ze(o+"Target cannot be null or undefined.",void 0,l);var u=A(this,"deep"),m=A(this,"negate"),d=n?rw(s,t):null,g=n?d.value:s[t],x=u?A(this,"eql"):(I,F)=>I===F,b="";u&&(b+="deep "),i&&(b+="own "),n&&(b+="nested "),b+="property ";var v;i?v=Object.prototype.hasOwnProperty.call(s,t):n?v=d.exists:v=Cy(s,t),(!m||arguments.length===1)&&this.assert(v,"expected #{this} to have "+b+Ue(t),"expected #{this} to not have "+b+Ue(t)),arguments.length>1&&this.assert(v&&x(e,g),"expected #{this} to have "+b+Ue(t)+" of #{exp}, but got #{act}","expected #{this} to not have "+b+Ue(t)+" of #{act}",e,g),A(this,"object",g)}C(yw,"assertProperty");_.addMethod("property",yw);function xw(t,e,r){A(this,"own",!0),yw.apply(this,arguments)}C(xw,"assertOwnProperty");_.addMethod("ownProperty",xw);_.addMethod("haveOwnProperty",xw);function Tw(t,e,r){typeof e=="string"&&(r=e,e=null),r&&A(this,"message",r);var n=A(this,"object"),i=Object.getOwnPropertyDescriptor(Object(n),t),o=A(this,"eql");i&&e?this.assert(o(e,i),"expected the own property descriptor for "+Ue(t)+" on #{this} to match "+Ue(e)+", got "+Ue(i),"expected the own property descriptor for "+Ue(t)+" on #{this} to not match "+Ue(e),e,i,!0):this.assert(i,"expected #{this} to have an own property descriptor for "+Ue(t),"expected #{this} to not have an own property descriptor for "+Ue(t)),A(this,"object",i)}C(Tw,"assertOwnPropertyDescriptor");_.addMethod("ownPropertyDescriptor",Tw);_.addMethod("haveOwnPropertyDescriptor",Tw);function Sw(){A(this,"doLength",!0)}C(Sw,"assertLengthChain");function vw(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=Ze(r).toLowerCase(),i=A(this,"message"),o=A(this,"ssfi"),s="length",l;switch(n){case"map":case"set":s="size",l=r.size;break;default:new _(r,i,o,!0).to.have.property("length"),l=r.length}this.assert(l==t,"expected #{this} to have a "+s+" of #{exp} but got #{act}","expected #{this} to not have a "+s+" of #{act}",t,l)}C(vw,"assertLength");_.addChainableMethod("length",vw,Sw);_.addChainableMethod("lengthOf",vw,Sw);function bw(t,e){e&&A(this,"message",e);var r=A(this,"object");this.assert(t.exec(r),"expected #{this} to match "+t,"expected #{this} not to match "+t)}C(bw,"assertMatch");_.addMethod("match",bw);_.addMethod("matches",bw);_.addMethod("string",function(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=A(this,"message"),i=A(this,"ssfi");new _(r,n,i,!0).is.a("string"),this.assert(~r.indexOf(t),"expected #{this} to contain "+Ue(t),"expected #{this} to not contain "+Ue(t))});function ww(t){var e=A(this,"object"),r=Ze(e),n=Ze(t),i=A(this,"ssfi"),o=A(this,"deep"),s,l="",p,u=!0,m=A(this,"message");m=m?m+": ":"";var d=m+"when testing keys against an object or an array you must give a single Array|Object|String argument or multiple String arguments";if(r==="Map"||r==="Set")l=o?"deeply ":"",p=[],e.forEach(function(U,K){p.push(K)}),n!=="Array"&&(t=Array.prototype.slice.call(arguments));else{switch(p=pw(e),n){case"Array":if(arguments.length>1)throw new ze(d,void 0,i);break;case"Object":if(arguments.length>1)throw new ze(d,void 0,i);t=Object.keys(t);break;default:t=Array.prototype.slice.call(arguments)}t=t.map(function(U){return typeof U=="symbol"?U:String(U)})}if(!t.length)throw new ze(m+"keys required",void 0,i);var g=t.length,x=A(this,"any"),b=A(this,"all"),v=t,I=o?A(this,"eql"):(U,K)=>U===K;if(!x&&!b&&(b=!0),x&&(u=v.some(function(U){return p.some(function(K){return I(U,K)})})),b&&(u=v.every(function(U){return p.some(function(K){return I(U,K)})}),A(this,"contains")||(u=u&&t.length==p.length)),g>1){t=t.map(function(U){return Ue(U)});var F=t.pop();b&&(s=t.join(", ")+", and "+F),x&&(s=t.join(", ")+", or "+F)}else s=Ue(t[0]);s=(g>1?"keys ":"key ")+s,s=(A(this,"contains")?"contain ":"have ")+s,this.assert(u,"expected #{this} to "+l+s,"expected #{this} to not "+l+s,v.slice(0).sort(Py),p.sort(Py),!0)}C(ww,"assertKeys");_.addMethod("keys",ww);_.addMethod("key",ww);function By(t,e,r){r&&A(this,"message",r);var n=A(this,"object"),i=A(this,"ssfi"),o=A(this,"message"),s=A(this,"negate")||!1;new _(n,o,i,!0).is.a("function"),(My(t)||typeof t=="string")&&(e=t,t=null);let l,p=!1;try{n()}catch(U){p=!0,l=U}var u=t===void 0&&e===void 0,m=!!(t&&e),d=!1,g=!1;if(u||!u&&!s){var x="an error";t instanceof Error?x="#{exp}":t&&(x=Kr.getConstructorName(t));let U=l;if(l instanceof Error)U=l.toString();else if(typeof l=="string")U=l;else if(l&&(typeof l=="object"||typeof l=="function"))try{U=Kr.getConstructorName(l)}catch{}this.assert(p,"expected #{this} to throw "+x,"expected #{this} to not throw an error but #{act} was thrown",t&&t.toString(),U)}if(t&&l){if(t instanceof Error){var b=Kr.compatibleInstance(l,t);b===s&&(m&&s?d=!0:this.assert(s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l&&!s?" but #{act} was thrown":""),t.toString(),l.toString()))}var v=Kr.compatibleConstructor(l,t);v===s&&(m&&s?d=!0:this.assert(s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&Kr.getConstructorName(t),l instanceof Error?l.toString():l&&Kr.getConstructorName(l)))}if(l&&e!==void 0&&e!==null){var I="including";My(e)&&(I="matching");var F=Kr.compatibleMessage(l,e);F===s&&(m&&s?g=!0:this.assert(s,"expected #{this} to throw error "+I+" #{exp} but got #{act}","expected #{this} to throw error not "+I+" #{exp}",e,Kr.getMessage(l)))}d&&g&&this.assert(s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&Kr.getConstructorName(t),l instanceof Error?l.toString():l&&Kr.getConstructorName(l)),A(this,"object",l)}C(By,"assertThrows");_.addMethod("throw",By);_.addMethod("throws",By);_.addMethod("Throw",By);function _w(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=A(this,"itself"),i=typeof r=="function"&&!n?r.prototype[t]:r[t];this.assert(typeof i=="function","expected #{this} to respond to "+Ue(t),"expected #{this} to not respond to "+Ue(t))}C(_w,"respondTo");_.addMethod("respondTo",_w);_.addMethod("respondsTo",_w);_.addProperty("itself",function(){A(this,"itself",!0)});function Ew(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=t(r);this.assert(n,"expected #{this} to satisfy "+Aa(t),"expected #{this} to not satisfy"+Aa(t),!A(this,"negate"),n)}C(Ew,"satisfy");_.addMethod("satisfy",Ew);_.addMethod("satisfies",Ew);function Rw(t,e,r){r&&A(this,"message",r);var n=A(this,"object"),i=A(this,"message"),o=A(this,"ssfi");if(new _(n,i,o,!0).is.a("number"),typeof t!="number"||typeof e!="number"){i=i?i+": ":"";var s=e===void 0?", and a delta is required":"";throw new ze(i+"the arguments to closeTo or approximately must be numbers"+s,void 0,o)}this.assert(Math.abs(n-t)<=e,"expected #{this} to be close to "+t+" +/- "+e,"expected #{this} not to be close to "+t+" +/- "+e)}C(Rw,"closeTo");_.addMethod("closeTo",Rw);_.addMethod("approximately",Rw);function R1(t,e,r,n,i){let o=Array.from(e),s=Array.from(t);if(!n){if(s.length!==o.length)return!1;o=o.slice()}return s.every(function(l,p){if(i)return r?r(l,o[p]):l===o[p];if(!r){var u=o.indexOf(l);return u===-1?!1:(n||o.splice(u,1),!0)}return o.some(function(m,d){return r(l,m)?(n||o.splice(d,1),!0):!1})})}C(R1,"isSubsetOf");_.addMethod("members",function(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=A(this,"message"),i=A(this,"ssfi");new _(r,n,i,!0).to.be.iterable,new _(t,n,i,!0).to.be.iterable;var o=A(this,"contains"),s=A(this,"ordered"),l,p,u;o?(l=s?"an ordered superset":"a superset",p="expected #{this} to be "+l+" of #{exp}",u="expected #{this} to not be "+l+" of #{exp}"):(l=s?"ordered members":"members",p="expected #{this} to have the same "+l+" as #{exp}",u="expected #{this} to not have the same "+l+" as #{exp}");var m=A(this,"deep")?A(this,"eql"):void 0;this.assert(R1(t,r,m,o,s),p,u,t,r,!0)});_.addProperty("iterable",function(t){t&&A(this,"message",t);var e=A(this,"object");this.assert(e!=null&&e[Symbol.iterator],"expected #{this} to be an iterable","expected #{this} to not be an iterable",e)});function k1(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=A(this,"message"),i=A(this,"ssfi"),o=A(this,"contains"),s=A(this,"deep"),l=A(this,"eql");new _(t,n,i,!0).to.be.an("array"),o?this.assert(t.some(function(p){return r.indexOf(p)>-1}),"expected #{this} to contain one of #{exp}","expected #{this} to not contain one of #{exp}",t,r):s?this.assert(t.some(function(p){return l(r,p)}),"expected #{this} to deeply equal one of #{exp}","expected #{this} to deeply equal one of #{exp}",t,r):this.assert(t.indexOf(r)>-1,"expected #{this} to be one of #{exp}","expected #{this} to not be one of #{exp}",t,r)}C(k1,"oneOf");_.addMethod("oneOf",k1);function kw(t,e,r){r&&A(this,"message",r);var n=A(this,"object"),i=A(this,"message"),o=A(this,"ssfi");new _(n,i,o,!0).is.a("function");var s;e?(new _(t,i,o,!0).to.have.property(e),s=t[e]):(new _(t,i,o,!0).is.a("function"),s=t()),n();var l=e==null?t():t[e],p=e==null?s:"."+e;A(this,"deltaMsgObj",p),A(this,"initialDeltaValue",s),A(this,"finalDeltaValue",l),A(this,"deltaBehavior","change"),A(this,"realDelta",l!==s),this.assert(s!==l,"expected "+p+" to change","expected "+p+" to not change")}C(kw,"assertChanges");_.addMethod("change",kw);_.addMethod("changes",kw);function Pw(t,e,r){r&&A(this,"message",r);var n=A(this,"object"),i=A(this,"message"),o=A(this,"ssfi");new _(n,i,o,!0).is.a("function");var s;e?(new _(t,i,o,!0).to.have.property(e),s=t[e]):(new _(t,i,o,!0).is.a("function"),s=t()),new _(s,i,o,!0).is.a("number"),n();var l=e==null?t():t[e],p=e==null?s:"."+e;A(this,"deltaMsgObj",p),A(this,"initialDeltaValue",s),A(this,"finalDeltaValue",l),A(this,"deltaBehavior","increase"),A(this,"realDelta",l-s),this.assert(l-s>0,"expected "+p+" to increase","expected "+p+" to not increase")}C(Pw,"assertIncreases");_.addMethod("increase",Pw);_.addMethod("increases",Pw);function Aw(t,e,r){r&&A(this,"message",r);var n=A(this,"object"),i=A(this,"message"),o=A(this,"ssfi");new _(n,i,o,!0).is.a("function");var s;e?(new _(t,i,o,!0).to.have.property(e),s=t[e]):(new _(t,i,o,!0).is.a("function"),s=t()),new _(s,i,o,!0).is.a("number"),n();var l=e==null?t():t[e],p=e==null?s:"."+e;A(this,"deltaMsgObj",p),A(this,"initialDeltaValue",s),A(this,"finalDeltaValue",l),A(this,"deltaBehavior","decrease"),A(this,"realDelta",s-l),this.assert(l-s<0,"expected "+p+" to decrease","expected "+p+" to not decrease")}C(Aw,"assertDecreases");_.addMethod("decrease",Aw);_.addMethod("decreases",Aw);function P1(t,e){e&&A(this,"message",e);var r=A(this,"deltaMsgObj"),n=A(this,"initialDeltaValue"),i=A(this,"finalDeltaValue"),o=A(this,"deltaBehavior"),s=A(this,"realDelta"),l;o==="change"?l=Math.abs(i-n)===Math.abs(t):l=s===Math.abs(t),this.assert(l,"expected "+r+" to "+o+" by "+t,"expected "+r+" to not "+o+" by "+t)}C(P1,"assertDelta");_.addMethod("by",P1);_.addProperty("extensible",function(){var t=A(this,"object"),e=t===Object(t)&&Object.isExtensible(t);this.assert(e,"expected #{this} to be extensible","expected #{this} to not be extensible")});_.addProperty("sealed",function(){var t=A(this,"object"),e=t===Object(t)?Object.isSealed(t):!0;this.assert(e,"expected #{this} to be sealed","expected #{this} to not be sealed")});_.addProperty("frozen",function(){var t=A(this,"object"),e=t===Object(t)?Object.isFrozen(t):!0;this.assert(e,"expected #{this} to be frozen","expected #{this} to not be frozen")});_.addProperty("finite",function(t){var e=A(this,"object");this.assert(typeof e=="number"&&isFinite(e),"expected #{this} to be a finite number","expected #{this} to not be a finite number")});function Dy(t,e){return new _(t,e)}C(Dy,"expect");Dy.fail=function(t,e,r,n){throw arguments.length<2&&(r=t,t=void 0),r=r||"expect.fail()",new ze(r,{actual:t,expected:e,operator:n},Dy.fail)};var A1={};Qb(A1,{Should:()=>bX,should:()=>vX});function Mw(){function t(){return this instanceof String||this instanceof Number||this instanceof Boolean||typeof Symbol=="function"&&this instanceof Symbol||typeof BigInt=="function"&&this instanceof BigInt?new _(this.valueOf(),null,t):new _(this,null,t)}C(t,"shouldGetter");function e(n){Object.defineProperty(this,"should",{value:n,enumerable:!0,configurable:!0,writable:!0})}C(e,"shouldSetter"),Object.defineProperty(Object.prototype,"should",{set:e,get:t,configurable:!0});var r={};return r.fail=function(n,i,o,s){throw arguments.length<2&&(o=n,n=void 0),o=o||"should.fail()",new ze(o,{actual:n,expected:i,operator:s},r.fail)},r.equal=function(n,i,o){new _(n,o).to.equal(i)},r.Throw=function(n,i,o,s){new _(n,s).to.Throw(i,o)},r.exist=function(n,i){new _(n,i).to.exist},r.not={},r.not.equal=function(n,i,o){new _(n,o).to.not.equal(i)},r.not.Throw=function(n,i,o,s){new _(n,s).to.not.Throw(i,o)},r.not.exist=function(n,i){new _(n,i).to.not.exist},r.throw=r.Throw,r.not.throw=r.not.Throw,r}C(Mw,"loadShould");var vX=Mw,bX=Mw;function w(t,e){var r=new _(null,null,w,!0);r.assert(t,e,"[ negation message unavailable ]")}C(w,"assert");w.fail=function(t,e,r,n){throw arguments.length<2&&(r=t,t=void 0),r=r||"assert.fail()",new ze(r,{actual:t,expected:e,operator:n},w.fail)};w.isOk=function(t,e){new _(t,e,w.isOk,!0).is.ok};w.isNotOk=function(t,e){new _(t,e,w.isNotOk,!0).is.not.ok};w.equal=function(t,e,r){var n=new _(t,r,w.equal,!0);n.assert(e==_e(n,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",e,t,!0)};w.notEqual=function(t,e,r){var n=new _(t,r,w.notEqual,!0);n.assert(e!=_e(n,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",e,t,!0)};w.strictEqual=function(t,e,r){new _(t,r,w.strictEqual,!0).to.equal(e)};w.notStrictEqual=function(t,e,r){new _(t,r,w.notStrictEqual,!0).to.not.equal(e)};w.deepEqual=w.deepStrictEqual=function(t,e,r){new _(t,r,w.deepEqual,!0).to.eql(e)};w.notDeepEqual=function(t,e,r){new _(t,r,w.notDeepEqual,!0).to.not.eql(e)};w.isAbove=function(t,e,r){new _(t,r,w.isAbove,!0).to.be.above(e)};w.isAtLeast=function(t,e,r){new _(t,r,w.isAtLeast,!0).to.be.least(e)};w.isBelow=function(t,e,r){new _(t,r,w.isBelow,!0).to.be.below(e)};w.isAtMost=function(t,e,r){new _(t,r,w.isAtMost,!0).to.be.most(e)};w.isTrue=function(t,e){new _(t,e,w.isTrue,!0).is.true};w.isNotTrue=function(t,e){new _(t,e,w.isNotTrue,!0).to.not.equal(!0)};w.isFalse=function(t,e){new _(t,e,w.isFalse,!0).is.false};w.isNotFalse=function(t,e){new _(t,e,w.isNotFalse,!0).to.not.equal(!1)};w.isNull=function(t,e){new _(t,e,w.isNull,!0).to.equal(null)};w.isNotNull=function(t,e){new _(t,e,w.isNotNull,!0).to.not.equal(null)};w.isNaN=function(t,e){new _(t,e,w.isNaN,!0).to.be.NaN};w.isNotNaN=function(t,e){new _(t,e,w.isNotNaN,!0).not.to.be.NaN};w.exists=function(t,e){new _(t,e,w.exists,!0).to.exist};w.notExists=function(t,e){new _(t,e,w.notExists,!0).to.not.exist};w.isUndefined=function(t,e){new _(t,e,w.isUndefined,!0).to.equal(void 0)};w.isDefined=function(t,e){new _(t,e,w.isDefined,!0).to.not.equal(void 0)};w.isCallable=function(t,e){new _(t,e,w.isCallable,!0).is.callable};w.isNotCallable=function(t,e){new _(t,e,w.isNotCallable,!0).is.not.callable};w.isObject=function(t,e){new _(t,e,w.isObject,!0).to.be.a("object")};w.isNotObject=function(t,e){new _(t,e,w.isNotObject,!0).to.not.be.a("object")};w.isArray=function(t,e){new _(t,e,w.isArray,!0).to.be.an("array")};w.isNotArray=function(t,e){new _(t,e,w.isNotArray,!0).to.not.be.an("array")};w.isString=function(t,e){new _(t,e,w.isString,!0).to.be.a("string")};w.isNotString=function(t,e){new _(t,e,w.isNotString,!0).to.not.be.a("string")};w.isNumber=function(t,e){new _(t,e,w.isNumber,!0).to.be.a("number")};w.isNotNumber=function(t,e){new _(t,e,w.isNotNumber,!0).to.not.be.a("number")};w.isFinite=function(t,e){new _(t,e,w.isFinite,!0).to.be.finite};w.isBoolean=function(t,e){new _(t,e,w.isBoolean,!0).to.be.a("boolean")};w.isNotBoolean=function(t,e){new _(t,e,w.isNotBoolean,!0).to.not.be.a("boolean")};w.typeOf=function(t,e,r){new _(t,r,w.typeOf,!0).to.be.a(e)};w.notTypeOf=function(t,e,r){new _(t,r,w.notTypeOf,!0).to.not.be.a(e)};w.instanceOf=function(t,e,r){new _(t,r,w.instanceOf,!0).to.be.instanceOf(e)};w.notInstanceOf=function(t,e,r){new _(t,r,w.notInstanceOf,!0).to.not.be.instanceOf(e)};w.include=function(t,e,r){new _(t,r,w.include,!0).include(e)};w.notInclude=function(t,e,r){new _(t,r,w.notInclude,!0).not.include(e)};w.deepInclude=function(t,e,r){new _(t,r,w.deepInclude,!0).deep.include(e)};w.notDeepInclude=function(t,e,r){new _(t,r,w.notDeepInclude,!0).not.deep.include(e)};w.nestedInclude=function(t,e,r){new _(t,r,w.nestedInclude,!0).nested.include(e)};w.notNestedInclude=function(t,e,r){new _(t,r,w.notNestedInclude,!0).not.nested.include(e)};w.deepNestedInclude=function(t,e,r){new _(t,r,w.deepNestedInclude,!0).deep.nested.include(e)};w.notDeepNestedInclude=function(t,e,r){new _(t,r,w.notDeepNestedInclude,!0).not.deep.nested.include(e)};w.ownInclude=function(t,e,r){new _(t,r,w.ownInclude,!0).own.include(e)};w.notOwnInclude=function(t,e,r){new _(t,r,w.notOwnInclude,!0).not.own.include(e)};w.deepOwnInclude=function(t,e,r){new _(t,r,w.deepOwnInclude,!0).deep.own.include(e)};w.notDeepOwnInclude=function(t,e,r){new _(t,r,w.notDeepOwnInclude,!0).not.deep.own.include(e)};w.match=function(t,e,r){new _(t,r,w.match,!0).to.match(e)};w.notMatch=function(t,e,r){new _(t,r,w.notMatch,!0).to.not.match(e)};w.property=function(t,e,r){new _(t,r,w.property,!0).to.have.property(e)};w.notProperty=function(t,e,r){new _(t,r,w.notProperty,!0).to.not.have.property(e)};w.propertyVal=function(t,e,r,n){new _(t,n,w.propertyVal,!0).to.have.property(e,r)};w.notPropertyVal=function(t,e,r,n){new _(t,n,w.notPropertyVal,!0).to.not.have.property(e,r)};w.deepPropertyVal=function(t,e,r,n){new _(t,n,w.deepPropertyVal,!0).to.have.deep.property(e,r)};w.notDeepPropertyVal=function(t,e,r,n){new _(t,n,w.notDeepPropertyVal,!0).to.not.have.deep.property(e,r)};w.ownProperty=function(t,e,r){new _(t,r,w.ownProperty,!0).to.have.own.property(e)};w.notOwnProperty=function(t,e,r){new _(t,r,w.notOwnProperty,!0).to.not.have.own.property(e)};w.ownPropertyVal=function(t,e,r,n){new _(t,n,w.ownPropertyVal,!0).to.have.own.property(e,r)};w.notOwnPropertyVal=function(t,e,r,n){new _(t,n,w.notOwnPropertyVal,!0).to.not.have.own.property(e,r)};w.deepOwnPropertyVal=function(t,e,r,n){new _(t,n,w.deepOwnPropertyVal,!0).to.have.deep.own.property(e,r)};w.notDeepOwnPropertyVal=function(t,e,r,n){new _(t,n,w.notDeepOwnPropertyVal,!0).to.not.have.deep.own.property(e,r)};w.nestedProperty=function(t,e,r){new _(t,r,w.nestedProperty,!0).to.have.nested.property(e)};w.notNestedProperty=function(t,e,r){new _(t,r,w.notNestedProperty,!0).to.not.have.nested.property(e)};w.nestedPropertyVal=function(t,e,r,n){new _(t,n,w.nestedPropertyVal,!0).to.have.nested.property(e,r)};w.notNestedPropertyVal=function(t,e,r,n){new _(t,n,w.notNestedPropertyVal,!0).to.not.have.nested.property(e,r)};w.deepNestedPropertyVal=function(t,e,r,n){new _(t,n,w.deepNestedPropertyVal,!0).to.have.deep.nested.property(e,r)};w.notDeepNestedPropertyVal=function(t,e,r,n){new _(t,n,w.notDeepNestedPropertyVal,!0).to.not.have.deep.nested.property(e,r)};w.lengthOf=function(t,e,r){new _(t,r,w.lengthOf,!0).to.have.lengthOf(e)};w.hasAnyKeys=function(t,e,r){new _(t,r,w.hasAnyKeys,!0).to.have.any.keys(e)};w.hasAllKeys=function(t,e,r){new _(t,r,w.hasAllKeys,!0).to.have.all.keys(e)};w.containsAllKeys=function(t,e,r){new _(t,r,w.containsAllKeys,!0).to.contain.all.keys(e)};w.doesNotHaveAnyKeys=function(t,e,r){new _(t,r,w.doesNotHaveAnyKeys,!0).to.not.have.any.keys(e)};w.doesNotHaveAllKeys=function(t,e,r){new _(t,r,w.doesNotHaveAllKeys,!0).to.not.have.all.keys(e)};w.hasAnyDeepKeys=function(t,e,r){new _(t,r,w.hasAnyDeepKeys,!0).to.have.any.deep.keys(e)};w.hasAllDeepKeys=function(t,e,r){new _(t,r,w.hasAllDeepKeys,!0).to.have.all.deep.keys(e)};w.containsAllDeepKeys=function(t,e,r){new _(t,r,w.containsAllDeepKeys,!0).to.contain.all.deep.keys(e)};w.doesNotHaveAnyDeepKeys=function(t,e,r){new _(t,r,w.doesNotHaveAnyDeepKeys,!0).to.not.have.any.deep.keys(e)};w.doesNotHaveAllDeepKeys=function(t,e,r){new _(t,r,w.doesNotHaveAllDeepKeys,!0).to.not.have.all.deep.keys(e)};w.throws=function(t,e,r,n){(typeof e=="string"||e instanceof RegExp)&&(r=e,e=null);var i=new _(t,n,w.throws,!0).to.throw(e,r);return _e(i,"object")};w.doesNotThrow=function(t,e,r,n){(typeof e=="string"||e instanceof RegExp)&&(r=e,e=null),new _(t,n,w.doesNotThrow,!0).to.not.throw(e,r)};w.operator=function(t,e,r,n){var i;switch(e){case"==":i=t==r;break;case"===":i=t===r;break;case">":i=t>r;break;case">=":i=t>=r;break;case"<":i=t<r;break;case"<=":i=t<=r;break;case"!=":i=t!=r;break;case"!==":i=t!==r;break;default:throw n=n&&n+": ",new ze(n+'Invalid operator "'+e+'"',void 0,w.operator)}var o=new _(i,n,w.operator,!0);o.assert(_e(o,"object")===!0,"expected "+Ue(t)+" to be "+e+" "+Ue(r),"expected "+Ue(t)+" to not be "+e+" "+Ue(r))};w.closeTo=function(t,e,r,n){new _(t,n,w.closeTo,!0).to.be.closeTo(e,r)};w.approximately=function(t,e,r,n){new _(t,n,w.approximately,!0).to.be.approximately(e,r)};w.sameMembers=function(t,e,r){new _(t,r,w.sameMembers,!0).to.have.same.members(e)};w.notSameMembers=function(t,e,r){new _(t,r,w.notSameMembers,!0).to.not.have.same.members(e)};w.sameDeepMembers=function(t,e,r){new _(t,r,w.sameDeepMembers,!0).to.have.same.deep.members(e)};w.notSameDeepMembers=function(t,e,r){new _(t,r,w.notSameDeepMembers,!0).to.not.have.same.deep.members(e)};w.sameOrderedMembers=function(t,e,r){new _(t,r,w.sameOrderedMembers,!0).to.have.same.ordered.members(e)};w.notSameOrderedMembers=function(t,e,r){new _(t,r,w.notSameOrderedMembers,!0).to.not.have.same.ordered.members(e)};w.sameDeepOrderedMembers=function(t,e,r){new _(t,r,w.sameDeepOrderedMembers,!0).to.have.same.deep.ordered.members(e)};w.notSameDeepOrderedMembers=function(t,e,r){new _(t,r,w.notSameDeepOrderedMembers,!0).to.not.have.same.deep.ordered.members(e)};w.includeMembers=function(t,e,r){new _(t,r,w.includeMembers,!0).to.include.members(e)};w.notIncludeMembers=function(t,e,r){new _(t,r,w.notIncludeMembers,!0).to.not.include.members(e)};w.includeDeepMembers=function(t,e,r){new _(t,r,w.includeDeepMembers,!0).to.include.deep.members(e)};w.notIncludeDeepMembers=function(t,e,r){new _(t,r,w.notIncludeDeepMembers,!0).to.not.include.deep.members(e)};w.includeOrderedMembers=function(t,e,r){new _(t,r,w.includeOrderedMembers,!0).to.include.ordered.members(e)};w.notIncludeOrderedMembers=function(t,e,r){new _(t,r,w.notIncludeOrderedMembers,!0).to.not.include.ordered.members(e)};w.includeDeepOrderedMembers=function(t,e,r){new _(t,r,w.includeDeepOrderedMembers,!0).to.include.deep.ordered.members(e)};w.notIncludeDeepOrderedMembers=function(t,e,r){new _(t,r,w.notIncludeDeepOrderedMembers,!0).to.not.include.deep.ordered.members(e)};w.oneOf=function(t,e,r){new _(t,r,w.oneOf,!0).to.be.oneOf(e)};w.isIterable=function(t,e){if(t==null||!t[Symbol.iterator])throw e=e?`${e} expected ${Ue(t)} to be an iterable`:`expected ${Ue(t)} to be an iterable`,new ze(e,void 0,w.isIterable)};w.changes=function(t,e,r,n){arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,w.changes,!0).to.change(e,r)};w.changesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,w.changesBy,!0).to.change(e,r).by(n)};w.doesNotChange=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,w.doesNotChange,!0).to.not.change(e,r)};w.changesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,w.changesButNotBy,!0).to.change(e,r).but.not.by(n)};w.increases=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,w.increases,!0).to.increase(e,r)};w.increasesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,w.increasesBy,!0).to.increase(e,r).by(n)};w.doesNotIncrease=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,w.doesNotIncrease,!0).to.not.increase(e,r)};w.increasesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,w.increasesButNotBy,!0).to.increase(e,r).but.not.by(n)};w.decreases=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,w.decreases,!0).to.decrease(e,r)};w.decreasesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,w.decreasesBy,!0).to.decrease(e,r).by(n)};w.doesNotDecrease=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,w.doesNotDecrease,!0).to.not.decrease(e,r)};w.doesNotDecreaseBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);return new _(t,i,w.doesNotDecreaseBy,!0).to.not.decrease(e,r).by(n)};w.decreasesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,w.decreasesButNotBy,!0).to.decrease(e,r).but.not.by(n)};w.ifError=function(t){if(t)throw t};w.isExtensible=function(t,e){new _(t,e,w.isExtensible,!0).to.be.extensible};w.isNotExtensible=function(t,e){new _(t,e,w.isNotExtensible,!0).to.not.be.extensible};w.isSealed=function(t,e){new _(t,e,w.isSealed,!0).to.be.sealed};w.isNotSealed=function(t,e){new _(t,e,w.isNotSealed,!0).to.not.be.sealed};w.isFrozen=function(t,e){new _(t,e,w.isFrozen,!0).to.be.frozen};w.isNotFrozen=function(t,e){new _(t,e,w.isNotFrozen,!0).to.not.be.frozen};w.isEmpty=function(t,e){new _(t,e,w.isEmpty,!0).to.be.empty};w.isNotEmpty=function(t,e){new _(t,e,w.isNotEmpty,!0).to.not.be.empty};C(function t(e,r){return w[r]=w[e],t},"alias")("isOk","ok")("isNotOk","notOk")("throws","throw")("throws","Throw")("isExtensible","extensible")("isNotExtensible","notExtensible")("isSealed","sealed")("isNotSealed","notSealed")("isFrozen","frozen")("isNotFrozen","notFrozen")("isEmpty","empty")("isNotEmpty","notEmpty")("isCallable","isFunction")("isNotCallable","isNotFunction");var VC=[];function wX(t){let e={AssertionError:ze,util:_y,config:Pr,expect:Dy,assert:w,Assertion:_,...A1};return~VC.indexOf(t)||(t(e,_y),VC.push(t)),e}C(wX,"use");var Wp=class{constructor(e,r,n){this._lineNumber=e,this._text=r,this._isLastLine=n}get lineNumber(){return this._lineNumber}get text(){return this._text}get range(){return new W(this._lineNumber,0,this._lineNumber,this._text.length)}get rangeIncludingLineBreak(){return this._isLastLine?this.range:new W(this._lineNumber,0,this._lineNumber+1,0)}get rangeTrimmed(){let e=/^(\s*)/.exec(this._text)[1].length;if(e===this._text.length)return;let r=this.text.trimEnd().length;return new W(this._lineNumber,e,this._lineNumber,r)}get isEmptyOrWhitespace(){return this.rangeTrimmed==null}};var M1=yr(require("node:path"),1),Wy=class{get uri(){return this._uri}get filename(){return M1.default.basename(this._uri.path)}get languageId(){return this._languageId}get version(){return this._version}get lineCount(){return this._lineCount}get range(){let{end:e}=this.lineAt(this.lineCount-1).range;return new W(0,0,e.line,e.character)}get eol(){return this._eol===`
`?"LF":"CRLF"}constructor(e,r,n,i,o){this._uri=e,this._languageId=r,this._version=n,this._eol=i,this._lines=o,this._lineCount=o.length,this._lineStarts=null,this._cachedTextValue=null}update(e){this._lines=e,this._lineCount=e.length,this._lineStarts=null,this._cachedTextValue=null}lineAt(e){let r;if(e instanceof pe?r=e.line:typeof e=="number"&&(r=e),typeof r!="number"||r<0||Math.floor(r)!==r)throw new Error("Illegal value for `line`");return r=Math.min(r,this._lines.length-1),new Wp(r,this._lines[r],r===this._lines.length-1)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.line-1)+e.character}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();let r=this._lineStarts.getIndexOf(e),n=this._lines[r.index].length;return new pe(r.index,Math.min(r.remainder,n))}getText(e){if(e===void 0)return this._cachedTextValue==null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue;if(e=this._validateRange(e),e.isEmpty)return"";if(e.isSingleLine)return this._lines[e.start.line].substring(e.start.character,e.end.character);let r=this._eol,n=e.start.line,i=e.end.line,o=[];o.push(this._lines[n].substring(e.start.character));for(let s=n+1;s<i;s++)o.push(this._lines[s]);return o.push(this._lines[i].substring(0,e.end.character)),o.join(r)}_validateRange(e){if(!(e instanceof W))throw new Error("Invalid argument");let r=this._validatePosition(e.start),n=this._validatePosition(e.end);return r===e.start&&n===e.end?e:new W(r.line,r.character,n.line,n.character)}_validatePosition(e){if(!(e instanceof pe))throw new Error("Invalid argument");if(this._lines.length===0)return e.with(0,0);let{line:r,character:n}=e,i=!1;if(r<0)r=0,n=0,i=!0;else if(r>=this._lines.length)r=this._lines.length-1,n=this._lines[r].length,i=!0;else{let o=this._lines[r].length;n<0?(n=0,i=!0):n>o&&(n=o,i=!0)}return i?new pe(r,n):e}_ensureLineStarts(){if(!this._lineStarts){let e=this._eol.length,r=this._lines.length,n=new Uint32Array(r);for(let i=0;i<r;i++)n[i]=this._lines[i].length+e;this._lineStarts=new Dw(n)}}};function RX(t){if(t<0)return 0;let e=4294967295;return t>e?e:t|0}var Dw=class{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}getCount(){return this.values.length}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=RX(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let r=this.prefixSumValidIndex[0]+1;r===0&&(this.prefixSum[0]=this.values[0],r++),e>=this.values.length&&(e=this.values.length-1);for(let n=r;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let r=0,n=this.values.length-1,i=0,o=0,s=0;for(;r<=n;)if(i=r+(n-r)/2|0,o=this.prefixSum[i],s=o-this.values[i],e<s)n=i-1;else if(e>=o)r=i+1;else break;return new Fw(i,e-s)}},Fw=class{constructor(e,r){this.index=e;this.remainder=r;this._prefixSumIndexOfResultBrand=void 0;this.index=e,this.remainder=r}};var $y=class{constructor(e){this.client=e;this.cursorlessVersion="0.0.0";this.workspaceFolders=void 0;this.disposables=[];this.quickPickReturnValue=void 0;this.onDidCloseTextDocument=$p;this.onDidChangeActiveTextEditor=$p;this.onDidChangeVisibleTextEditors=$p;this.onDidChangeTextEditorSelection=$p;this.onDidChangeTextEditorVisibleRanges=$p;this.configuration=new gp,this.keyValueStore=new yp,this.messages=new xp,this.clipboard=new dp(this.client),this.capabilities=new ry,this.editorMap=new Map,this.documentMap=new Map,this.activeWindow=void 0,this.activeBuffer=void 0}async init(){let e=await hI(this.client);this.assetsRoot_=Iw.default.join(e,"assets"),this.cursorlessNeovimPath=Iw.default.join(e,"node","cursorless-neovim")}async showQuickPick(e,r){throw Error("showQuickPick Not implemented")}async setHighlightRanges(e,r,n){throw Error("setHighlightRanges Not implemented")}async flashRanges(e){console.debug("flashRanges Not implemented")}get assetsRoot(){if(this.assetsRoot_==null)throw Error("Field `assetsRoot` has not yet been mocked");return this.assetsRoot_}get runMode(){return DC()}get activeTextEditor(){return this.getActiveTextEditor()}get activeEditableTextEditor(){return this.getActiveTextEditor()}getActiveTextEditor(){let e=this.activeWindow?this.getTextEditor(this.activeWindow):void 0;return e===void 0&&console.debug("getActiveTextEditor: editor is undefined"),e}getTextEditor(e){for(let[r,n]of this.editorMap)if(r.id===e.id)return n}getTextDocument(e){for(let[r,n]of this.documentMap)if(r.id===e.id)return n}get visibleTextEditors(){return Array.from(this.editorMap.values())}get visibleNotebookEditors(){return[]}getEditableTextEditor(e){return e}async findInDocument(e,r){throw Error("findInDocument Not implemented")}async findInWorkspace(e){throw Error("findInWorkspace Not implemented")}async openTextDocument(e){throw Error("openTextDocument Not implemented")}async openUntitledTextDocument(e){throw Error("openUntitledTextDocument Not implemented")}async showInputBox(e){throw Error("TextDocumentChangeEvent Not implemented")}async executeCommand(e,...r){throw new Error("executeCommand Method not implemented.")}onDidChangeTextDocument(e){return EI(e)}onDidOpenTextDocument(e,r,n){return RI(e,r,n)}async updateTextEditor(e=!1){let r=await this.client.window,n=await r.buffer,i=await n.lines,o=i;i.length>=30&&(o=i.slice(0,15).concat(["..."]).concat(i.slice(-15))),console.debug(`updateTextEditor(): window:${r.id}, buffer:${n.id}, lines=${JSON.stringify(o)}`);let s,l;e?(s=[],l=[]):(s=await ey(r,this.client),l=await dI(r,this.client,i));let p=this.toNeovimEditor(r,n,i,l,s);return qr().emitEvent("onDidOpenTextDocument",p.document),p}toNeovimEditor(e,r,n,i,o){let s=this.getTextDocument(r),l=this.getTextEditor(e);return s?(console.debug(`toNeovimEditor(): updating document: buffer=${r.id}`),s.update(n)):(console.debug(`toNeovimEditor(): creating new document: buffer=${r.id}`),s=new Wy(DI.parse(`neovim://${r.id}`),"plaintext",1,`
`,n),this.documentMap.set(r,s)),l?(console.debug(`toNeovimEditor(): updating editor: window=${e.id}`),l.updateDocument(i,o,s)):(console.debug(`toNeovimEditor(): creating new editor: window=${e.id}`),l=new iy(TA(),this.client,this,e,s,i,o),this.editorMap.set(e,l)),this.activeBuffer=r,this.activeWindow=e,this.activeTextEditor}handleCommandError(e){SI(this.client,e.message)}disposeOnExit(...e){return this.disposables.push(...e),()=>(0,D1.pull)(this.disposables,...e)}};function $p(){return{dispose(){}}}var jy=class{constructor(e){this.client=e;this.signals={prePhrase:{getVersion:async()=>null}}}async getFocusedElementType(){let e=await this.client.mode;return e.mode==="t"||e.mode==="nt"?"terminal":"textEditor"}};var PX=BigInt(1e9);function F1(t,e=BigInt(1e6)){return Number(t*e/PX)/Number(e)}async function qy(t,e=[],r=[],n,i,o,s,l){let p={documentContents:n.document.getText(),selections:n.selections.map(Wk)};o!=null&&(p.marks=o),l!=null&&(p.metadata=l),e.includes("clipboard")||(p.clipboard=await i.clipboard.readText()),e.includes("visibleRanges")||(p.visibleRanges=n.visibleRanges.map(ol));for(let u of gs){let m=t?.get(u),d=`${u}Mark`;m!=null&&!e.includes(d)&&(p[d]=m.map(g=>g.toPlainObject()))}if(r.includes("timeOffsetSeconds")){let u=s?.startTimestamp;if(u==null)throw new Error("No start timestamp provided but time offset was requested");let m=process.hrtime.bigint()-u;p.timeOffsetSeconds=F1(m)}return p}var AX=yr(kl(),1);function I1(t,e,r,n,i,o,s,l){return{commandServerApi:t,ide:i,neovimIDE:n,injectIde:s,scopeProvider:o,takeSnapshot(p,u,m,d,g){return qy(e,p,u,m,d,g,void 0,void 0)},setStoredTarget(p,u,m){e.set(u,m?.map(d=>pI(p,d)))},hatTokenMap:r,runIntegrationTests:l}}async function C1(t,e,r,n){let i={[mT]:async(...o)=>{(await t.mode).mode==="t"&&xI(t);try{await e.updateTextEditor();let l=await r.runCommandSafe(...o),p=Nf(o);if(await n.getFocusedElementType()==="terminal"&&ea(p)){let m=l;"fallback"in m&&m.fallback.action==="insert"&&TI(t)}return l}catch(l){if(e.runMode!=="test"){let p=l;console.error(p.stack),e.handleCommandError(p)}throw l}},"cursorless.repeatPreviousCommand":Ae,"cursorless.showCheatsheet":Ae,"cursorless.internal.updateCheatsheetDefaults":Ae,"cursorless.recordTestCase":Ae,"cursorless.recordOneTestCaseThenPause":Ae,"cursorless.pauseRecording":Ae,"cursorless.resumeRecording":Ae,"cursorless.takeSnapshot":Ae,"cursorless.recordScopeTests.showUnimplementedFacets":Ae,"cursorless.recordScopeTests.saveActiveDocument":Ae,"cursorless.showQuickPick":Ae,"cursorless.showDocumentation":Ae,"cursorless.showInstallationDependencies":Ae,"cursorless.migrateSnippets":Ae,"cursorless.private.logQuickActions":Ae,"cursorless.toggleDecorations":Ae,"cursorless.recomputeDecorationStyles":Ae,"cursorless.showScopeVisualizer":Ae,"cursorless.hideScopeVisualizer":Ae,"cursorless.analyzeCommandHistory":Ae,"cursorless.keyboard.escape":Ae,"cursorless.keyboard.targeted.targetHat":Ae,"cursorless.keyboard.targeted.targetScope":Ae,"cursorless.keyboard.targeted.targetSelection":Ae,"cursorless.keyboard.targeted.clearTarget":Ae,"cursorless.keyboard.targeted.runActionOnTarget":Ae,"cursorless.keyboard.modal.modeOn":Ae,"cursorless.keyboard.modal.modeOff":Ae,"cursorless.keyboard.modal.modeToggle":Ae,"cursorless.keyboard.undoTarget":Ae,"cursorless.keyboard.redoTarget":Ae,"cursorless.tutorial.start":Ae,"cursorless.tutorial.next":Ae,"cursorless.tutorial.previous":Ae,"cursorless.tutorial.restart":Ae,"cursorless.tutorial.resume":Ae,"cursorless.tutorial.list":Ae,"cursorless.documentationOpened":Ae};Object.entries(i).map(([o,s])=>qr().registerCommand(o,s))}async function Ae(...t){console.debug(`dummyCommandHandler(): args=${t}`)}async function O1(t){let e=t.nvim,r=new $y(e);await r.init();let n=r.runMode==="production"?r:new Ef(r,new bf,r.runMode==="test",void 0),i=new Uu,o=new jy(e),s=r.runMode==="test"?i:o,{commandApi:l,storedTargets:p,hatTokenMap:u,scopeProvider:m,injectIde:d,runIntegrationTests:g}=await lI({ide:n,commandServerApi:s});await C1(e,r,l,s);let x={testHelpers:r.runMode==="test"?I1(i,p,u,r,n,m,d,g):void 0};qr().registerExtensionApi(fI,x),console.log("activate(): Cursorless extension loaded")}function N1(t){t.setOptions({dev:!1}),t.registerFunction("CursorlessLoadExtension",async()=>await MX(t),{sync:!1})}async function MX(t){console.log("==============================================================================================="),console.log("loadExtension(cursorless-neovim): start"),await O1(t),console.log("loadExtension(cursorless-neovim): done")}
/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)

itertools/dist/index.js:
  (* istanbul ignore else -- @preserve *)
  (* istanbul ignore if -- @preserve *)

chai/chai.js:
  (*!
   * Chai - flag utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - test utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - expectTypes utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getActual utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - message composition utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - transferFlags utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * http://chaijs.com
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - isProxyEnabled helper
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addLengthGuard utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getProperties utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - proxify utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addChainingMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteChainableMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - compareByInspect utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getOwnEnumerablePropertySymbols utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getOwnEnumerableProperties utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - isNaN utility
   * Copyright(c) 2012-2015 Sakthipriyan Vairamani <thechargingvolcano@gmail.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*! Bundled license information:
  
  deep-eql/index.js:
    (*!
     * deep-eql
     * Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>
     * MIT Licensed
     *)
    (*!
     * Check to see if the MemoizeMap has recorded a result of the two operands
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {MemoizeMap} memoizeMap
     * @returns {Boolean|null} result
    *)
    (*!
     * Set the result of the equality into the MemoizeMap
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {MemoizeMap} memoizeMap
     * @param {Boolean} result
    *)
    (*!
     * Primary Export
     *)
    (*!
     * The main logic of the `deepEqual` function.
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Object} [options] (optional) Additional options
     * @param {Array} [options.comparator] (optional) Override default algorithm, determining custom equality.
     * @param {Array} [options.memoize] (optional) Provide a custom memoization object which will cache the results of
        complex objects for a speed boost. By passing `false` you can disable memoization, but this will cause circular
        references to blow the stack.
     * @return {Boolean} equal match
    *)
    (*!
     * Compare two Regular Expressions for equality.
     *
     * @param {RegExp} leftHandOperand
     * @param {RegExp} rightHandOperand
     * @return {Boolean} result
     *)
    (*!
     * Compare two Sets/Maps for equality. Faster than other equality functions.
     *
     * @param {Set} leftHandOperand
     * @param {Set} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Simple equality for flat iterable objects such as Arrays, TypedArrays or Node.js buffers.
     *
     * @param {Iterable} leftHandOperand
     * @param {Iterable} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Simple equality for generator objects such as those returned by generator functions.
     *
     * @param {Iterable} leftHandOperand
     * @param {Iterable} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Determine if the given object has an @@iterator function.
     *
     * @param {Object} target
     * @return {Boolean} `true` if the object has an @@iterator function.
     *)
    (*!
     * Gets all iterator entries from the given Object. If the Object has no @@iterator function, returns an empty array.
     * This will consume the iterator - which could have side effects depending on the @@iterator implementation.
     *
     * @param {Object} target
     * @returns {Array} an array of entries from the @@iterator function
     *)
    (*!
     * Gets all entries from a Generator. This will consume the generator - which could have side effects.
     *
     * @param {Generator} target
     * @returns {Array} an array of entries from the Generator.
     *)
    (*!
     * Gets all own and inherited enumerable keys from a target.
     *
     * @param {Object} target
     * @returns {Array} an array of own and inherited enumerable keys from the target.
     *)
    (*!
     * Determines if two objects have matching values, given a set of keys. Defers to deepEqual for the equality check of
     * each key. If any value of the given key is not equal, the function will return false (early).
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Array} keys An array of keys to compare the values of leftHandOperand and rightHandOperand against
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Recursively check the equality of two Objects. Once basic sameness has been established it will defer to `deepEqual`
     * for each enumerable key in the object.
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Returns true if the argument is a primitive.
     *
     * This intentionally returns true for all objects that can be compared by reference,
     * including functions and symbols.
     *
     * @param {Mixed} value
     * @return {Boolean} result
     *)
  *)
*/
