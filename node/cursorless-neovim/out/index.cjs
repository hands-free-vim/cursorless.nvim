"use strict";var R2=Object.create;var Tp=Object.defineProperty;var k2=Object.getOwnPropertyDescriptor;var A2=Object.getOwnPropertyNames;var P2=Object.getPrototypeOf,D2=Object.prototype.hasOwnProperty;var xp=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),v_=(t,e)=>{for(var r in e)Tp(t,r,{get:e[r],enumerable:!0})},b_=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of A2(e))!D2.call(t,i)&&i!==r&&Tp(t,i,{get:()=>e[i],enumerable:!(n=k2(e,i))||n.enumerable});return t};var on=(t,e,r)=>(r=t!=null?R2(P2(t)):{},b_(e||!t||!t.__esModule?Tp(r,"default",{value:t,enumerable:!0}):r,t)),M2=t=>b_(Tp({},"__esModule",{value:!0}),t);var mA=xp((pA,Lm)=>{(function(t,e){typeof Lm=="object"&&Lm.exports?Lm.exports=e():t.nearley=e()})(pA,function(){function t(u,m,d){return this.id=++t.highestId,this.name=u,this.symbols=m,this.postprocess=d,this}t.highestId=0,t.prototype.toString=function(u){var m=typeof u>"u"?this.symbols.map(l).join(" "):this.symbols.slice(0,u).map(l).join(" ")+" \u25CF "+this.symbols.slice(u).map(l).join(" ");return this.name+" \u2192 "+m};function e(u,m,d,g){this.rule=u,this.dot=m,this.reference=d,this.data=[],this.wantedBy=g,this.isComplete=this.dot===u.symbols.length}e.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},e.prototype.nextState=function(u){var m=new e(this.rule,this.dot+1,this.reference,this.wantedBy);return m.left=this,m.right=u,m.isComplete&&(m.data=m.build(),m.right=void 0),m},e.prototype.build=function(){var u=[],m=this;do u.push(m.right.data),m=m.left;while(m.left);return u.reverse(),u},e.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,o.fail))};function r(u,m){this.grammar=u,this.index=m,this.states=[],this.wants={},this.scannable=[],this.completed={}}r.prototype.process=function(u){for(var m=this.states,d=this.wants,g=this.completed,y=0;y<m.length;y++){var x=m[y];if(x.isComplete){if(x.finish(),x.data!==o.fail){for(var E=x.wantedBy,w=E.length;w--;){var U=E[w];this.complete(U,x)}if(x.reference===this.index){var V=x.rule.name;(this.completed[V]=this.completed[V]||[]).push(x)}}}else{var V=x.rule.symbols[x.dot];if(typeof V!="string"){this.scannable.push(x);continue}if(d[V]){if(d[V].push(x),g.hasOwnProperty(V))for(var q=g[V],w=0;w<q.length;w++){var ne=q[w];this.complete(x,ne)}}else d[V]=[x],this.predict(V)}}},r.prototype.predict=function(u){for(var m=this.grammar.byName[u]||[],d=0;d<m.length;d++){var g=m[d],y=this.wants[u],x=new e(g,0,this.index,y);this.states.push(x)}},r.prototype.complete=function(u,m){var d=u.nextState(m);this.states.push(d)};function n(u,m){this.rules=u,this.start=m||this.rules[0].name;var d=this.byName={};this.rules.forEach(function(g){d.hasOwnProperty(g.name)||(d[g.name]=[]),d[g.name].push(g)})}n.fromCompiled=function(g,m){var d=g.Lexer;g.ParserStart&&(m=g.ParserStart,g=g.ParserRules);var g=g.map(function(x){return new t(x.name,x.symbols,x.postprocess)}),y=new n(g,m);return y.lexer=d,y};function i(){this.reset("")}i.prototype.reset=function(u,m){this.buffer=u,this.index=0,this.line=m?m.line:1,this.lastLineBreak=m?-m.col:0},i.prototype.next=function(){if(this.index<this.buffer.length){var u=this.buffer[this.index++];return u===`
`&&(this.line+=1,this.lastLineBreak=this.index),{value:u}}},i.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},i.prototype.formatError=function(u,m){var d=this.buffer;if(typeof d=="string"){var g=d.split(`
`).slice(Math.max(0,this.line-5),this.line),y=d.indexOf(`
`,this.index);y===-1&&(y=d.length);var x=this.index-this.lastLineBreak,E=String(this.line).length;return m+=" at line "+this.line+" col "+x+`:

`,m+=g.map(function(U,V){return w(this.line-g.length+V+1,E)+" "+U},this).join(`
`),m+=`
`+w("",E+x)+`^
`,m}else return m+" at index "+(this.index-1);function w(U,V){var q=String(U);return Array(V-q.length+1).join(" ")+q}};function o(u,m,d){if(u instanceof n)var g=u,d=m;else var g=n.fromCompiled(u,m);this.grammar=g,this.options={keepHistory:!1,lexer:g.lexer||new i};for(var y in d||{})this.options[y]=d[y];this.lexer=this.options.lexer,this.lexerState=void 0;var x=new r(g,0),E=this.table=[x];x.wants[g.start]=[],x.predict(g.start),x.process(),this.current=0}o.fail={},o.prototype.feed=function(u){var m=this.lexer;m.reset(u,this.lexerState);for(var d;;){try{if(d=m.next(),!d)break}catch(ve){var E=new r(this.grammar,this.current+1);this.table.push(E);var g=new Error(this.reportLexerError(ve));throw g.offset=this.current,g.token=ve.token,g}var y=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var x=this.current+1,E=new r(this.grammar,x);this.table.push(E);for(var w=d.text!==void 0?d.text:d.value,U=m.constructor===i?d.value:m.transform?.(d)??d,V=y.scannable,q=V.length;q--;){var ne=V[q],se=ne.rule.symbols[ne.dot];if(se.test?se.test(U):se.type?se.type===d.type:se.literal===w){var de=ne.nextState({data:U,token:d,isToken:!0,reference:x-1});E.states.push(de)}}if(E.process(),E.states.length===0){var g=new Error(this.reportError(d));throw g.offset=this.current,g.token=d,g}this.options.keepHistory&&(y.lexerState=m.save()),this.current++}return y&&(this.lexerState=m.save()),this.results=this.finish(),this},o.prototype.reportLexerError=function(u){var m,d,g=u.token;return g?(m="input "+JSON.stringify(g.text[0])+" (lexer error)",d=this.lexer.formatError(g,"Syntax error")):(m="input (lexer error)",d=u.message),this.reportErrorCommon(d,m)},o.prototype.reportError=function(u){var m=(u.type?u.type+" token: ":"")+JSON.stringify(u.value!==void 0?u.value:u),d=this.lexer.formatError(u,"Syntax error");return this.reportErrorCommon(d,m)},o.prototype.reportErrorCommon=function(u,m){var d=[];d.push(u);var g=this.table.length-2,y=this.table[g],x=y.states.filter(function(w){var U=w.rule.symbols[w.dot];return U&&typeof U!="string"});if(x.length===0)d.push("Unexpected "+m+`. I did not expect any more input. Here is the state of my parse table:
`),this.displayStateStack(y.states,d);else{d.push("Unexpected "+m+`. Instead, I was expecting to see one of the following:
`);var E=x.map(function(w){return this.buildFirstStateStack(w,[])||[w]},this);E.forEach(function(w){var U=w[0],V=U.rule.symbols[U.dot],q=this.getSymbolDisplay(V);d.push("A "+q+" based on:"),this.displayStateStack(w,d)},this)}return d.push(""),d.join(`
`)},o.prototype.displayStateStack=function(u,m){for(var d,g=0,y=0;y<u.length;y++){var x=u[y],E=x.rule.toString(x.dot);E===d?g++:(g>0&&m.push("    ^ "+g+" more lines identical to this"),g=0,m.push("    "+E)),d=E}},o.prototype.getSymbolDisplay=function(u){return s(u)},o.prototype.buildFirstStateStack=function(u,m){if(m.indexOf(u)!==-1)return null;if(u.wantedBy.length===0)return[u];var d=u.wantedBy[0],g=[u].concat(m),y=this.buildFirstStateStack(d,g);return y===null?null:[u].concat(y)},o.prototype.save=function(){var u=this.table[this.current];return u.lexerState=this.lexerState,u},o.prototype.restore=function(u){var m=u.index;this.current=m,this.table[m]=u,this.table.splice(m+1),this.lexerState=u.lexerState,this.results=this.finish()},o.prototype.rewind=function(u){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[u])},o.prototype.finish=function(){var u=[],m=this.grammar.start,d=this.table[this.table.length-1];return d.states.forEach(function(g){g.rule.name===m&&g.dot===g.rule.symbols.length&&g.reference===0&&g.data!==o.fail&&u.push(g)}),u.map(function(g){return g.data})};function s(u){var m=typeof u;if(m==="string")return u;if(m==="object"){if(u.literal)return JSON.stringify(u.literal);if(u instanceof RegExp)return"character matching "+u;if(u.type)return u.type+" token";if(u.test)return"token matching "+String(u.test);throw new Error("Unknown symbol type: "+u)}}function l(u){var m=typeof u;if(m==="string")return u;if(m==="object"){if(u.literal)return JSON.stringify(u.literal);if(u instanceof RegExp)return u.toString();if(u.type)return"%"+u.type;if(u.test)return"<"+String(u.test)+">";throw new Error("Unknown symbol type: "+u)}}return{Parser:o,Grammar:n,Rule:t}})});var TA=xp((yA,Cm)=>{(function(t,e){typeof define=="function"&&define.amd?define([],e):typeof Cm=="object"&&Cm.exports?Cm.exports=e():t.moo=e()})(yA,function(){"use strict";var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,r=typeof new RegExp().sticky=="boolean";function n(H){return H&&e.call(H)==="[object RegExp]"}function i(H){return H&&typeof H=="object"&&!n(H)&&!Array.isArray(H)}function o(H){return H.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function s(H){var C=new RegExp("|"+H);return C.exec("").length-1}function l(H){return"("+H+")"}function u(H){if(!H.length)return"(?!)";var C=H.map(function(A){return"(?:"+A+")"}).join("|");return"(?:"+C+")"}function m(H){if(typeof H=="string")return"(?:"+o(H)+")";if(n(H)){if(H.ignoreCase)throw new Error("RegExp /i flag not allowed");if(H.global)throw new Error("RegExp /g flag is implied");if(H.sticky)throw new Error("RegExp /y flag is implied");if(H.multiline)throw new Error("RegExp /m flag is implied");return H.source}else throw new Error("Not a pattern: "+H)}function d(H,C){return H.length>C?H:Array(C-H.length+1).join(" ")+H}function g(H,C){for(var A=H.length,z=0;;){var Z=H.lastIndexOf(`
`,A-1);if(Z===-1||(z++,A=Z,z===C)||A===0)break}var F=z<C?0:A+1;return H.substring(F).split(`
`)}function y(H){for(var C=Object.getOwnPropertyNames(H),A=[],z=0;z<C.length;z++){var Z=C[z],F=H[Z],N=[].concat(F);if(Z==="include"){for(var j=0;j<N.length;j++)A.push({include:N[j]});continue}var X=[];N.forEach(function(Q){i(Q)?(X.length&&A.push(E(Z,X)),A.push(E(Z,Q)),X=[]):X.push(Q)}),X.length&&A.push(E(Z,X))}return A}function x(H){for(var C=[],A=0;A<H.length;A++){var z=H[A];if(z.include){for(var Z=[].concat(z.include),F=0;F<Z.length;F++)C.push({include:Z[F]});continue}if(!z.type)throw new Error("Rule has no type: "+JSON.stringify(z));C.push(E(z.type,z))}return C}function E(H,C){if(i(C)||(C={match:C}),C.include)throw new Error("Matching rules cannot also include states");var A={defaultType:H,lineBreaks:!!C.error||!!C.fallback,pop:!1,next:null,push:null,error:!1,fallback:!1,value:null,type:null,shouldThrow:!1};for(var z in C)t.call(C,z)&&(A[z]=C[z]);if(typeof A.type=="string"&&H!==A.type)throw new Error("Type transform cannot be a string (type '"+A.type+"' for token '"+H+"')");var Z=A.match;return A.match=Array.isArray(Z)?Z:Z?[Z]:[],A.match.sort(function(F,N){return n(F)&&n(N)?0:n(N)?-1:n(F)?1:N.length-F.length}),A}function w(H){return Array.isArray(H)?x(H):y(H)}var U=E("error",{lineBreaks:!0,shouldThrow:!0});function V(H,C){for(var A=null,z=Object.create(null),Z=!0,F=null,N=[],j=[],X=0;X<H.length;X++)H[X].fallback&&(Z=!1);for(var X=0;X<H.length;X++){var Q=H[X];if(Q.include)throw new Error("Inheritance is not allowed in stateless lexers");if(Q.error||Q.fallback){if(A)throw!Q.fallback==!A.fallback?new Error("Multiple "+(Q.fallback?"fallback":"error")+" rules not allowed (for token '"+Q.defaultType+"')"):new Error("fallback and error are mutually exclusive (for token '"+Q.defaultType+"')");A=Q}var re=Q.match.slice();if(Z)for(;re.length&&typeof re[0]=="string"&&re[0].length===1;){var be=re.shift();z[be.charCodeAt(0)]=Q}if(Q.pop||Q.push||Q.next){if(!C)throw new Error("State-switching options are not allowed in stateless lexers (for token '"+Q.defaultType+"')");if(Q.fallback)throw new Error("State-switching options are not allowed on fallback tokens (for token '"+Q.defaultType+"')")}if(re.length!==0){Z=!1,N.push(Q);for(var Ee=0;Ee<re.length;Ee++){var Ke=re[Ee];if(n(Ke)){if(F===null)F=Ke.unicode;else if(F!==Ke.unicode&&Q.fallback===!1)throw new Error("If one rule is /u then all must be")}}var Ue=u(re.map(m)),dt=new RegExp(Ue);if(dt.test(""))throw new Error("RegExp matches empty string: "+dt);var Vt=s(Ue);if(Vt>0)throw new Error("RegExp has capture groups: "+dt+`
Use (?: \u2026 ) instead`);if(!Q.lineBreaks&&dt.test(`
`))throw new Error("Rule should declare lineBreaks: "+dt);j.push(l(Ue))}}var Qr=A&&A.fallback,Ro=r&&!Qr?"ym":"gm",ui=r||Qr?"":"|";F===!0&&(Ro+="u");var Ra=new RegExp(u(j)+ui,Ro);return{regexp:Ra,groups:N,fast:z,error:A||U}}function q(H){var C=V(w(H));return new ve({start:C},"start")}function ne(H,C,A){var z=H&&(H.push||H.next);if(z&&!A[z])throw new Error("Missing state '"+z+"' (in token '"+H.defaultType+"' of state '"+C+"')");if(H&&H.pop&&+H.pop!=1)throw new Error("pop must be 1 (in token '"+H.defaultType+"' of state '"+C+"')")}function se(H,C){var A=H.$all?w(H.$all):[];delete H.$all;var z=Object.getOwnPropertyNames(H);C||(C=z[0]);for(var Z=Object.create(null),F=0;F<z.length;F++){var N=z[F];Z[N]=w(H[N]).concat(A)}for(var F=0;F<z.length;F++)for(var N=z[F],j=Z[N],X=Object.create(null),Q=0;Q<j.length;Q++){var re=j[Q];if(re.include){var be=[Q,1];if(re.include!==N&&!X[re.include]){X[re.include]=!0;var Ee=Z[re.include];if(!Ee)throw new Error("Cannot include nonexistent state '"+re.include+"' (in state '"+N+"')");for(var Ke=0;Ke<Ee.length;Ke++){var Ue=Ee[Ke];j.indexOf(Ue)===-1&&be.push(Ue)}}j.splice.apply(j,be),Q--}}for(var dt=Object.create(null),F=0;F<z.length;F++){var N=z[F];dt[N]=V(Z[N],!0)}for(var F=0;F<z.length;F++){for(var Vt=z[F],Qr=dt[Vt],Ro=Qr.groups,Q=0;Q<Ro.length;Q++)ne(Ro[Q],Vt,dt);for(var ui=Object.getOwnPropertyNames(Qr.fast),Q=0;Q<ui.length;Q++)ne(Qr.fast[ui[Q]],Vt,dt)}return new ve(dt,C)}function de(H){for(var C=typeof Map<"u",A=C?new Map:Object.create(null),z=Object.getOwnPropertyNames(H),Z=0;Z<z.length;Z++){var F=z[Z],N=H[F],j=Array.isArray(N)?N:[N];j.forEach(function(X){if(typeof X!="string")throw new Error("keyword must be string (in keyword '"+F+"')");C?A.set(X,F):A[X]=F})}return function(X){return C?A.get(X):A[X]}}var ve=function(H,C){this.startState=C,this.states=H,this.buffer="",this.stack=[],this.reset()};ve.prototype.reset=function(H,C){return this.buffer=H||"",this.index=0,this.line=C?C.line:1,this.col=C?C.col:1,this.queuedToken=C?C.queuedToken:null,this.queuedText=C?C.queuedText:"",this.queuedThrow=C?C.queuedThrow:null,this.setState(C?C.state:this.startState),this.stack=C&&C.stack?C.stack.slice():[],this},ve.prototype.save=function(){return{line:this.line,col:this.col,state:this.state,stack:this.stack.slice(),queuedToken:this.queuedToken,queuedText:this.queuedText,queuedThrow:this.queuedThrow}},ve.prototype.setState=function(H){if(!(!H||this.state===H)){this.state=H;var C=this.states[H];this.groups=C.groups,this.error=C.error,this.re=C.regexp,this.fast=C.fast}},ve.prototype.popState=function(){this.setState(this.stack.pop())},ve.prototype.pushState=function(H){this.stack.push(this.state),this.setState(H)};var Et=r?function(H,C){return H.exec(C)}:function(H,C){var A=H.exec(C);return A[0].length===0?null:A};ve.prototype._getGroup=function(H){for(var C=this.groups.length,A=0;A<C;A++)if(H[A+1]!==void 0)return this.groups[A];throw new Error("Cannot find token type for matched text")};function yr(){return this.value}if(ve.prototype.next=function(){var H=this.index;if(this.queuedGroup){var C=this._token(this.queuedGroup,this.queuedText,H);return this.queuedGroup=null,this.queuedText="",C}var A=this.buffer;if(H!==A.length){var N=this.fast[A.charCodeAt(H)];if(N)return this._token(N,A.charAt(H),H);var z=this.re;z.lastIndex=H;var Z=Et(z,A),F=this.error;if(Z==null)return this._token(F,A.slice(H,A.length),H);var N=this._getGroup(Z),j=Z[0];return F.fallback&&Z.index!==H?(this.queuedGroup=N,this.queuedText=j,this._token(F,A.slice(H,Z.index),H)):this._token(N,j,H)}},ve.prototype._token=function(H,C,A){var z=0;if(H.lineBreaks){var Z=/\n/g,F=1;if(C===`
`)z=1;else for(;Z.exec(C);)z++,F=Z.lastIndex}var N={type:typeof H.type=="function"&&H.type(C)||H.defaultType,value:typeof H.value=="function"?H.value(C):C,text:C,toString:yr,offset:A,lineBreaks:z,line:this.line,col:this.col},j=C.length;if(this.index+=j,this.line+=z,z!==0?this.col=j-F+1:this.col+=j,H.shouldThrow){var X=new Error(this.formatError(N,"invalid syntax"));throw X}return H.pop?this.popState():H.push?this.pushState(H.push):H.next&&this.setState(H.next),N},typeof Symbol<"u"&&Symbol.iterator){var Tr=function(H){this.lexer=H};Tr.prototype.next=function(){var H=this.lexer.next();return{value:H,done:!H}},Tr.prototype[Symbol.iterator]=function(){return this},ve.prototype[Symbol.iterator]=function(){return new Tr(this)}}return ve.prototype.formatError=function(H,C){if(H==null)var A=this.buffer.slice(this.index),H={text:A,offset:this.index,lineBreaks:A.indexOf(`
`)===-1?0:1,line:this.line,col:this.col};var z=2,Z=Math.max(H.line-z,1),F=H.line+z,N=String(F).length,j=g(this.buffer,this.line-H.line+z+1).slice(0,5),X=[];X.push(C+" at line "+H.line+" col "+H.col+":"),X.push("");for(var Q=0;Q<j.length;Q++){var re=j[Q],be=Z+Q;X.push(d(String(be),N)+"  "+re),be===H.line&&X.push(d("",N+H.col+1)+"^")}return X.join(`
`)},ve.prototype.clone=function(){return new ve(this.states,this.state)},ve.prototype.has=function(H){return!0},{compile:q,states:se,error:Object.freeze({error:!0}),fallback:Object.freeze({fallback:!0}),keywords:de}})});var yl=xp((Yn,fP)=>{"use strict";Object.defineProperty(Yn,"__esModule",{value:!0});function Mn(t){return typeof t=="object"&&!("toString"in t)?Object.prototype.toString.call(t).slice(8,-1):t}var f4=typeof process=="object"&&process.env.NODE_ENV==="production";function mn(t,e){if(!t)throw f4?new Error("Invariant failed"):new Error(e())}Yn.invariant=mn;var oS=Object.prototype.hasOwnProperty,d4=Array.prototype.splice,g4=Object.prototype.toString;function ra(t){return g4.call(t).slice(8,-1)}var pf=Object.assign||function(t,e){return aS(e).forEach(function(r){oS.call(e,r)&&(t[r]=e[r])}),t},aS=typeof Object.getOwnPropertySymbols=="function"?function(t){return Object.keys(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.keys(t)};function lo(t){return Array.isArray(t)?pf(t.constructor(t.length),t):ra(t)==="Map"?new Map(t):ra(t)==="Set"?new Set(t):t&&typeof t=="object"?pf(Object.create(Object.getPrototypeOf(t)),t):t}var pP=function(){function t(){this.commands=pf({},h4),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(e,r){return e===r},this.update.newContext=function(){return new t().update}}return Object.defineProperty(t.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(e){this.update.isEquals=e},enumerable:!0,configurable:!0}),t.prototype.extend=function(e,r){this.commands[e]=r},t.prototype.update=function(e,r){var n=this,i=typeof r=="function"?{$apply:r}:r;Array.isArray(e)&&Array.isArray(i)||mn(!Array.isArray(i),function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."}),mn(typeof i=="object"&&i!==null,function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the "+("following commands: "+Object.keys(n.commands).join(", ")+".")});var o=e;return aS(i).forEach(function(s){if(oS.call(n.commands,s)){var l=e===o;o=n.commands[s](i[s],o,i,e),l&&n.isEquals(o,e)&&(o=e)}else{var u=ra(e)==="Map"?n.update(e.get(s),i[s]):n.update(e[s],i[s]),m=ra(o)==="Map"?o.get(s):o[s];(!n.isEquals(u,m)||typeof u>"u"&&!oS.call(e,s))&&(o===e&&(o=lo(e)),ra(o)==="Map"?o.set(s,u):o[s]=u)}}),o},t}();Yn.Context=pP;var h4={$push:function(t,e,r){return lP(e,r,"$push"),t.length?e.concat(t):e},$unshift:function(t,e,r){return lP(e,r,"$unshift"),t.length?t.concat(e):e},$splice:function(t,e,r,n){return y4(e,r),t.forEach(function(i){mP(i),e===n&&i.length&&(e=lo(n)),d4.apply(e,i)}),e},$set:function(t,e,r){return x4(r),t},$toggle:function(t,e){hl(t,"$toggle");var r=t.length?lo(e):e;return t.forEach(function(n){r[n]=!e[n]}),r},$unset:function(t,e,r,n){return hl(t,"$unset"),t.forEach(function(i){Object.hasOwnProperty.call(e,i)&&(e===n&&(e=lo(n)),delete e[i])}),e},$add:function(t,e,r,n){return uP(e,"$add"),hl(t,"$add"),ra(e)==="Map"?t.forEach(function(i){var o=i[0],s=i[1];e===n&&e.get(o)!==s&&(e=lo(n)),e.set(o,s)}):t.forEach(function(i){e===n&&!e.has(i)&&(e=lo(n)),e.add(i)}),e},$remove:function(t,e,r,n){return uP(e,"$remove"),hl(t,"$remove"),t.forEach(function(i){e===n&&e.has(i)&&(e=lo(n)),e.delete(i)}),e},$merge:function(t,e,r,n){return S4(e,t),aS(t).forEach(function(i){t[i]!==e[i]&&(e===n&&(e=lo(n)),e[i]=t[i])}),e},$apply:function(t,e){return T4(t),t(e)}},sS=new pP;Yn.isEquals=sS.update.isEquals;Yn.extend=sS.extend;Yn.default=sS.update;Yn.default.default=fP.exports=pf(Yn.default,Yn);function lP(t,e,r){mn(Array.isArray(t),function(){return"update(): expected target of "+Mn(r)+" to be an array; got "+Mn(t)+"."}),hl(e[r],r)}function hl(t,e){mn(Array.isArray(t),function(){return"update(): expected spec of "+Mn(e)+" to be an array; got "+Mn(t)+". Did you forget to wrap your parameter in an array?"})}function y4(t,e){mn(Array.isArray(t),function(){return"Expected $splice target to be an array; got "+Mn(t)}),mP(e.$splice)}function mP(t){mn(Array.isArray(t),function(){return"update(): expected spec of $splice to be an array of arrays; got "+Mn(t)+". Did you forget to wrap your parameters in an array?"})}function T4(t){mn(typeof t=="function",function(){return"update(): expected spec of $apply to be a function; got "+Mn(t)+"."})}function x4(t){mn(Object.keys(t).length===1,function(){return"Cannot have more than one key in an object with $set"})}function S4(t,e){mn(e&&typeof e=="object",function(){return"update(): $merge expects a spec of type 'object'; got "+Mn(e)}),mn(t&&typeof t=="object",function(){return"update(): $merge expects a target of type 'object'; got "+Mn(t)})}function uP(t,e){var r=ra(t);mn(r==="Map"||r==="Set",function(){return"update(): "+Mn(e)+" expects a target of type Set or Map; got "+Mn(r)})}});var Sv=xp((nc,eu)=>{(function(){var t,e="4.17.21",r=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",i="Expected a function",o="Invalid `variable` option passed into `_.template`",s="__lodash_hash_undefined__",l=500,u="__lodash_placeholder__",m=1,d=2,g=4,y=1,x=2,E=1,w=2,U=4,V=8,q=16,ne=32,se=64,de=128,ve=256,Et=512,yr=30,Tr="...",H=800,C=16,A=1,z=2,Z=3,F=1/0,N=9007199254740991,j=17976931348623157e292,X=NaN,Q=4294967295,re=Q-1,be=Q>>>1,Ee=[["ary",de],["bind",E],["bindKey",w],["curry",V],["curryRight",q],["flip",Et],["partial",ne],["partialRight",se],["rearg",ve]],Ke="[object Arguments]",Ue="[object Array]",dt="[object AsyncFunction]",Vt="[object Boolean]",Qr="[object Date]",Ro="[object DOMException]",ui="[object Error]",Ra="[object Function]",jb="[object GeneratorFunction]",vn="[object Map]",xc="[object Number]",$F="[object Null]",pi="[object Object]",zb="[object Promise]",jF="[object Proxy]",Sc="[object RegExp]",bn="[object Set]",vc="[object String]",Pu="[object Symbol]",zF="[object Undefined]",bc="[object WeakMap]",qF="[object WeakSet]",wc="[object ArrayBuffer]",ka="[object DataView]",my="[object Float32Array]",fy="[object Float64Array]",dy="[object Int8Array]",gy="[object Int16Array]",hy="[object Int32Array]",yy="[object Uint8Array]",Ty="[object Uint8ClampedArray]",xy="[object Uint16Array]",Sy="[object Uint32Array]",GF=/\b__p \+= '';/g,KF=/\b(__p \+=) '' \+/g,QF=/(__e\(.*?\)|\b__t\)) \+\n'';/g,qb=/&(?:amp|lt|gt|quot|#39);/g,Gb=/[&<>"']/g,YF=RegExp(qb.source),ZF=RegExp(Gb.source),XF=/<%-([\s\S]+?)%>/g,JF=/<%([\s\S]+?)%>/g,Kb=/<%=([\s\S]+?)%>/g,eI=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,tI=/^\w*$/,rI=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,vy=/[\\^$.*+?()[\]{}|]/g,nI=RegExp(vy.source),by=/^\s+/,iI=/\s/,oI=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,aI=/\{\n\/\* \[wrapped with (.+)\] \*/,sI=/,? & /,cI=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,lI=/[()=,{}\[\]\/\s]/,uI=/\\(\\)?/g,pI=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Qb=/\w*$/,mI=/^[-+]0x[0-9a-f]+$/i,fI=/^0b[01]+$/i,dI=/^\[object .+?Constructor\]$/,gI=/^0o[0-7]+$/i,hI=/^(?:0|[1-9]\d*)$/,yI=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Du=/($^)/,TI=/['\n\r\u2028\u2029\\]/g,Mu="\\ud800-\\udfff",xI="\\u0300-\\u036f",SI="\\ufe20-\\ufe2f",vI="\\u20d0-\\u20ff",Yb=xI+SI+vI,Zb="\\u2700-\\u27bf",Xb="a-z\\xdf-\\xf6\\xf8-\\xff",bI="\\xac\\xb1\\xd7\\xf7",wI="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",EI="\\u2000-\\u206f",_I=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Jb="A-Z\\xc0-\\xd6\\xd8-\\xde",ew="\\ufe0e\\ufe0f",tw=bI+wI+EI+_I,wy="['\u2019]",RI="["+Mu+"]",rw="["+tw+"]",Lu="["+Yb+"]",nw="\\d+",kI="["+Zb+"]",iw="["+Xb+"]",ow="[^"+Mu+tw+nw+Zb+Xb+Jb+"]",Ey="\\ud83c[\\udffb-\\udfff]",AI="(?:"+Lu+"|"+Ey+")",aw="[^"+Mu+"]",_y="(?:\\ud83c[\\udde6-\\uddff]){2}",Ry="[\\ud800-\\udbff][\\udc00-\\udfff]",Aa="["+Jb+"]",sw="\\u200d",cw="(?:"+iw+"|"+ow+")",PI="(?:"+Aa+"|"+ow+")",lw="(?:"+wy+"(?:d|ll|m|re|s|t|ve))?",uw="(?:"+wy+"(?:D|LL|M|RE|S|T|VE))?",pw=AI+"?",mw="["+ew+"]?",DI="(?:"+sw+"(?:"+[aw,_y,Ry].join("|")+")"+mw+pw+")*",MI="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",LI="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",fw=mw+pw+DI,FI="(?:"+[kI,_y,Ry].join("|")+")"+fw,II="(?:"+[aw+Lu+"?",Lu,_y,Ry,RI].join("|")+")",CI=RegExp(wy,"g"),OI=RegExp(Lu,"g"),ky=RegExp(Ey+"(?="+Ey+")|"+II+fw,"g"),NI=RegExp([Aa+"?"+iw+"+"+lw+"(?="+[rw,Aa,"$"].join("|")+")",PI+"+"+uw+"(?="+[rw,Aa+cw,"$"].join("|")+")",Aa+"?"+cw+"+"+lw,Aa+"+"+uw,LI,MI,nw,FI].join("|"),"g"),UI=RegExp("["+sw+Mu+Yb+ew+"]"),HI=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,BI=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],VI=-1,nt={};nt[my]=nt[fy]=nt[dy]=nt[gy]=nt[hy]=nt[yy]=nt[Ty]=nt[xy]=nt[Sy]=!0,nt[Ke]=nt[Ue]=nt[wc]=nt[Vt]=nt[ka]=nt[Qr]=nt[ui]=nt[Ra]=nt[vn]=nt[xc]=nt[pi]=nt[Sc]=nt[bn]=nt[vc]=nt[bc]=!1;var rt={};rt[Ke]=rt[Ue]=rt[wc]=rt[ka]=rt[Vt]=rt[Qr]=rt[my]=rt[fy]=rt[dy]=rt[gy]=rt[hy]=rt[vn]=rt[xc]=rt[pi]=rt[Sc]=rt[bn]=rt[vc]=rt[Pu]=rt[yy]=rt[Ty]=rt[xy]=rt[Sy]=!0,rt[ui]=rt[Ra]=rt[bc]=!1;var WI={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},$I={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},jI={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},zI={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},qI=parseFloat,GI=parseInt,dw=typeof global=="object"&&global&&global.Object===Object&&global,KI=typeof self=="object"&&self&&self.Object===Object&&self,Ft=dw||KI||Function("return this")(),Ay=typeof nc=="object"&&nc&&!nc.nodeType&&nc,ko=Ay&&typeof eu=="object"&&eu&&!eu.nodeType&&eu,gw=ko&&ko.exports===Ay,Py=gw&&dw.process,Yr=function(){try{var P=ko&&ko.require&&ko.require("util").types;return P||Py&&Py.binding&&Py.binding("util")}catch{}}(),hw=Yr&&Yr.isArrayBuffer,yw=Yr&&Yr.isDate,Tw=Yr&&Yr.isMap,xw=Yr&&Yr.isRegExp,Sw=Yr&&Yr.isSet,vw=Yr&&Yr.isTypedArray;function Lr(P,$,B){switch(B.length){case 0:return P.call($);case 1:return P.call($,B[0]);case 2:return P.call($,B[0],B[1]);case 3:return P.call($,B[0],B[1],B[2])}return P.apply($,B)}function QI(P,$,B,le){for(var Re=-1,Qe=P==null?0:P.length;++Re<Qe;){var At=P[Re];$(le,At,B(At),P)}return le}function Zr(P,$){for(var B=-1,le=P==null?0:P.length;++B<le&&$(P[B],B,P)!==!1;);return P}function YI(P,$){for(var B=P==null?0:P.length;B--&&$(P[B],B,P)!==!1;);return P}function bw(P,$){for(var B=-1,le=P==null?0:P.length;++B<le;)if(!$(P[B],B,P))return!1;return!0}function Ci(P,$){for(var B=-1,le=P==null?0:P.length,Re=0,Qe=[];++B<le;){var At=P[B];$(At,B,P)&&(Qe[Re++]=At)}return Qe}function Fu(P,$){var B=P==null?0:P.length;return!!B&&Pa(P,$,0)>-1}function Dy(P,$,B){for(var le=-1,Re=P==null?0:P.length;++le<Re;)if(B($,P[le]))return!0;return!1}function at(P,$){for(var B=-1,le=P==null?0:P.length,Re=Array(le);++B<le;)Re[B]=$(P[B],B,P);return Re}function Oi(P,$){for(var B=-1,le=$.length,Re=P.length;++B<le;)P[Re+B]=$[B];return P}function My(P,$,B,le){var Re=-1,Qe=P==null?0:P.length;for(le&&Qe&&(B=P[++Re]);++Re<Qe;)B=$(B,P[Re],Re,P);return B}function ZI(P,$,B,le){var Re=P==null?0:P.length;for(le&&Re&&(B=P[--Re]);Re--;)B=$(B,P[Re],Re,P);return B}function Ly(P,$){for(var B=-1,le=P==null?0:P.length;++B<le;)if($(P[B],B,P))return!0;return!1}var XI=Fy("length");function JI(P){return P.split("")}function eC(P){return P.match(cI)||[]}function ww(P,$,B){var le;return B(P,function(Re,Qe,At){if($(Re,Qe,At))return le=Qe,!1}),le}function Iu(P,$,B,le){for(var Re=P.length,Qe=B+(le?1:-1);le?Qe--:++Qe<Re;)if($(P[Qe],Qe,P))return Qe;return-1}function Pa(P,$,B){return $===$?mC(P,$,B):Iu(P,Ew,B)}function tC(P,$,B,le){for(var Re=B-1,Qe=P.length;++Re<Qe;)if(le(P[Re],$))return Re;return-1}function Ew(P){return P!==P}function _w(P,$){var B=P==null?0:P.length;return B?Cy(P,$)/B:X}function Fy(P){return function($){return $==null?t:$[P]}}function Iy(P){return function($){return P==null?t:P[$]}}function Rw(P,$,B,le,Re){return Re(P,function(Qe,At,tt){B=le?(le=!1,Qe):$(B,Qe,At,tt)}),B}function rC(P,$){var B=P.length;for(P.sort($);B--;)P[B]=P[B].value;return P}function Cy(P,$){for(var B,le=-1,Re=P.length;++le<Re;){var Qe=$(P[le]);Qe!==t&&(B=B===t?Qe:B+Qe)}return B}function Oy(P,$){for(var B=-1,le=Array(P);++B<P;)le[B]=$(B);return le}function nC(P,$){return at($,function(B){return[B,P[B]]})}function kw(P){return P&&P.slice(0,Mw(P)+1).replace(by,"")}function Fr(P){return function($){return P($)}}function Ny(P,$){return at($,function(B){return P[B]})}function Ec(P,$){return P.has($)}function Aw(P,$){for(var B=-1,le=P.length;++B<le&&Pa($,P[B],0)>-1;);return B}function Pw(P,$){for(var B=P.length;B--&&Pa($,P[B],0)>-1;);return B}function iC(P,$){for(var B=P.length,le=0;B--;)P[B]===$&&++le;return le}var oC=Iy(WI),aC=Iy($I);function sC(P){return"\\"+zI[P]}function cC(P,$){return P==null?t:P[$]}function Da(P){return UI.test(P)}function lC(P){return HI.test(P)}function uC(P){for(var $,B=[];!($=P.next()).done;)B.push($.value);return B}function Uy(P){var $=-1,B=Array(P.size);return P.forEach(function(le,Re){B[++$]=[Re,le]}),B}function Dw(P,$){return function(B){return P($(B))}}function Ni(P,$){for(var B=-1,le=P.length,Re=0,Qe=[];++B<le;){var At=P[B];(At===$||At===u)&&(P[B]=u,Qe[Re++]=B)}return Qe}function Cu(P){var $=-1,B=Array(P.size);return P.forEach(function(le){B[++$]=le}),B}function pC(P){var $=-1,B=Array(P.size);return P.forEach(function(le){B[++$]=[le,le]}),B}function mC(P,$,B){for(var le=B-1,Re=P.length;++le<Re;)if(P[le]===$)return le;return-1}function fC(P,$,B){for(var le=B+1;le--;)if(P[le]===$)return le;return le}function Ma(P){return Da(P)?gC(P):XI(P)}function wn(P){return Da(P)?hC(P):JI(P)}function Mw(P){for(var $=P.length;$--&&iI.test(P.charAt($)););return $}var dC=Iy(jI);function gC(P){for(var $=ky.lastIndex=0;ky.test(P);)++$;return $}function hC(P){return P.match(ky)||[]}function yC(P){return P.match(NI)||[]}var TC=function P($){$=$==null?Ft:Ui.defaults(Ft.Object(),$,Ui.pick(Ft,BI));var B=$.Array,le=$.Date,Re=$.Error,Qe=$.Function,At=$.Math,tt=$.Object,Hy=$.RegExp,xC=$.String,Xr=$.TypeError,Ou=B.prototype,SC=Qe.prototype,La=tt.prototype,Nu=$["__core-js_shared__"],Uu=SC.toString,Xe=La.hasOwnProperty,vC=0,Lw=function(){var a=/[^.]+$/.exec(Nu&&Nu.keys&&Nu.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),Hu=La.toString,bC=Uu.call(tt),wC=Ft._,EC=Hy("^"+Uu.call(Xe).replace(vy,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Bu=gw?$.Buffer:t,Hi=$.Symbol,Vu=$.Uint8Array,Fw=Bu?Bu.allocUnsafe:t,Wu=Dw(tt.getPrototypeOf,tt),Iw=tt.create,Cw=La.propertyIsEnumerable,$u=Ou.splice,Ow=Hi?Hi.isConcatSpreadable:t,_c=Hi?Hi.iterator:t,Ao=Hi?Hi.toStringTag:t,ju=function(){try{var a=Fo(tt,"defineProperty");return a({},"",{}),a}catch{}}(),_C=$.clearTimeout!==Ft.clearTimeout&&$.clearTimeout,RC=le&&le.now!==Ft.Date.now&&le.now,kC=$.setTimeout!==Ft.setTimeout&&$.setTimeout,zu=At.ceil,qu=At.floor,By=tt.getOwnPropertySymbols,AC=Bu?Bu.isBuffer:t,Nw=$.isFinite,PC=Ou.join,DC=Dw(tt.keys,tt),Pt=At.max,Zt=At.min,MC=le.now,LC=$.parseInt,Uw=At.random,FC=Ou.reverse,Vy=Fo($,"DataView"),Rc=Fo($,"Map"),Wy=Fo($,"Promise"),Fa=Fo($,"Set"),kc=Fo($,"WeakMap"),Ac=Fo(tt,"create"),Gu=kc&&new kc,Ia={},IC=Io(Vy),CC=Io(Rc),OC=Io(Wy),NC=Io(Fa),UC=Io(kc),Ku=Hi?Hi.prototype:t,Pc=Ku?Ku.valueOf:t,Hw=Ku?Ku.toString:t;function T(a){if(gt(a)&&!ke(a)&&!(a instanceof We)){if(a instanceof Jr)return a;if(Xe.call(a,"__wrapped__"))return BE(a)}return new Jr(a)}var Ca=function(){function a(){}return function(c){if(!ut(c))return{};if(Iw)return Iw(c);a.prototype=c;var p=new a;return a.prototype=t,p}}();function Qu(){}function Jr(a,c){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=t}T.templateSettings={escape:XF,evaluate:JF,interpolate:Kb,variable:"",imports:{_:T}},T.prototype=Qu.prototype,T.prototype.constructor=T,Jr.prototype=Ca(Qu.prototype),Jr.prototype.constructor=Jr;function We(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Q,this.__views__=[]}function HC(){var a=new We(this.__wrapped__);return a.__actions__=xr(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=xr(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=xr(this.__views__),a}function BC(){if(this.__filtered__){var a=new We(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a}function VC(){var a=this.__wrapped__.value(),c=this.__dir__,p=ke(a),f=c<0,h=p?a.length:0,S=J1(0,h,this.__views__),_=S.start,R=S.end,M=R-_,G=f?R:_-1,K=this.__iteratees__,ee=K.length,oe=0,fe=Zt(M,this.__takeCount__);if(!p||!f&&h==M&&fe==M)return lE(a,this.__actions__);var xe=[];e:for(;M--&&oe<fe;){G+=c;for(var Fe=-1,Se=a[G];++Fe<ee;){var He=K[Fe],$e=He.iteratee,Or=He.type,cr=$e(Se);if(Or==z)Se=cr;else if(!cr){if(Or==A)continue e;break e}}xe[oe++]=Se}return xe}We.prototype=Ca(Qu.prototype),We.prototype.constructor=We;function Po(a){var c=-1,p=a==null?0:a.length;for(this.clear();++c<p;){var f=a[c];this.set(f[0],f[1])}}function WC(){this.__data__=Ac?Ac(null):{},this.size=0}function $C(a){var c=this.has(a)&&delete this.__data__[a];return this.size-=c?1:0,c}function jC(a){var c=this.__data__;if(Ac){var p=c[a];return p===s?t:p}return Xe.call(c,a)?c[a]:t}function zC(a){var c=this.__data__;return Ac?c[a]!==t:Xe.call(c,a)}function qC(a,c){var p=this.__data__;return this.size+=this.has(a)?0:1,p[a]=Ac&&c===t?s:c,this}Po.prototype.clear=WC,Po.prototype.delete=$C,Po.prototype.get=jC,Po.prototype.has=zC,Po.prototype.set=qC;function mi(a){var c=-1,p=a==null?0:a.length;for(this.clear();++c<p;){var f=a[c];this.set(f[0],f[1])}}function GC(){this.__data__=[],this.size=0}function KC(a){var c=this.__data__,p=Yu(c,a);if(p<0)return!1;var f=c.length-1;return p==f?c.pop():$u.call(c,p,1),--this.size,!0}function QC(a){var c=this.__data__,p=Yu(c,a);return p<0?t:c[p][1]}function YC(a){return Yu(this.__data__,a)>-1}function ZC(a,c){var p=this.__data__,f=Yu(p,a);return f<0?(++this.size,p.push([a,c])):p[f][1]=c,this}mi.prototype.clear=GC,mi.prototype.delete=KC,mi.prototype.get=QC,mi.prototype.has=YC,mi.prototype.set=ZC;function fi(a){var c=-1,p=a==null?0:a.length;for(this.clear();++c<p;){var f=a[c];this.set(f[0],f[1])}}function XC(){this.size=0,this.__data__={hash:new Po,map:new(Rc||mi),string:new Po}}function JC(a){var c=cp(this,a).delete(a);return this.size-=c?1:0,c}function e1(a){return cp(this,a).get(a)}function t1(a){return cp(this,a).has(a)}function r1(a,c){var p=cp(this,a),f=p.size;return p.set(a,c),this.size+=p.size==f?0:1,this}fi.prototype.clear=XC,fi.prototype.delete=JC,fi.prototype.get=e1,fi.prototype.has=t1,fi.prototype.set=r1;function Do(a){var c=-1,p=a==null?0:a.length;for(this.__data__=new fi;++c<p;)this.add(a[c])}function n1(a){return this.__data__.set(a,s),this}function i1(a){return this.__data__.has(a)}Do.prototype.add=Do.prototype.push=n1,Do.prototype.has=i1;function En(a){var c=this.__data__=new mi(a);this.size=c.size}function o1(){this.__data__=new mi,this.size=0}function a1(a){var c=this.__data__,p=c.delete(a);return this.size=c.size,p}function s1(a){return this.__data__.get(a)}function c1(a){return this.__data__.has(a)}function l1(a,c){var p=this.__data__;if(p instanceof mi){var f=p.__data__;if(!Rc||f.length<r-1)return f.push([a,c]),this.size=++p.size,this;p=this.__data__=new fi(f)}return p.set(a,c),this.size=p.size,this}En.prototype.clear=o1,En.prototype.delete=a1,En.prototype.get=s1,En.prototype.has=c1,En.prototype.set=l1;function Bw(a,c){var p=ke(a),f=!p&&Co(a),h=!p&&!f&&ji(a),S=!p&&!f&&!h&&Ha(a),_=p||f||h||S,R=_?Oy(a.length,xC):[],M=R.length;for(var G in a)(c||Xe.call(a,G))&&!(_&&(G=="length"||h&&(G=="offset"||G=="parent")||S&&(G=="buffer"||G=="byteLength"||G=="byteOffset")||yi(G,M)))&&R.push(G);return R}function Vw(a){var c=a.length;return c?a[Jy(0,c-1)]:t}function u1(a,c){return lp(xr(a),Mo(c,0,a.length))}function p1(a){return lp(xr(a))}function $y(a,c,p){(p!==t&&!_n(a[c],p)||p===t&&!(c in a))&&di(a,c,p)}function Dc(a,c,p){var f=a[c];(!(Xe.call(a,c)&&_n(f,p))||p===t&&!(c in a))&&di(a,c,p)}function Yu(a,c){for(var p=a.length;p--;)if(_n(a[p][0],c))return p;return-1}function m1(a,c,p,f){return Bi(a,function(h,S,_){c(f,h,p(h),_)}),f}function Ww(a,c){return a&&Vn(c,It(c),a)}function f1(a,c){return a&&Vn(c,vr(c),a)}function di(a,c,p){c=="__proto__"&&ju?ju(a,c,{configurable:!0,enumerable:!0,value:p,writable:!0}):a[c]=p}function jy(a,c){for(var p=-1,f=c.length,h=B(f),S=a==null;++p<f;)h[p]=S?t:ET(a,c[p]);return h}function Mo(a,c,p){return a===a&&(p!==t&&(a=a<=p?a:p),c!==t&&(a=a>=c?a:c)),a}function en(a,c,p,f,h,S){var _,R=c&m,M=c&d,G=c&g;if(p&&(_=h?p(a,f,h,S):p(a)),_!==t)return _;if(!ut(a))return a;var K=ke(a);if(K){if(_=tO(a),!R)return xr(a,_)}else{var ee=Xt(a),oe=ee==Ra||ee==jb;if(ji(a))return mE(a,R);if(ee==pi||ee==Ke||oe&&!h){if(_=M||oe?{}:ME(a),!R)return M?j1(a,f1(_,a)):$1(a,Ww(_,a))}else{if(!rt[ee])return h?a:{};_=rO(a,ee,R)}}S||(S=new En);var fe=S.get(a);if(fe)return fe;S.set(a,_),a_(a)?a.forEach(function(Se){_.add(en(Se,c,p,Se,a,S))}):i_(a)&&a.forEach(function(Se,He){_.set(He,en(Se,c,p,He,a,S))});var xe=G?M?uT:lT:M?vr:It,Fe=K?t:xe(a);return Zr(Fe||a,function(Se,He){Fe&&(He=Se,Se=a[He]),Dc(_,He,en(Se,c,p,He,a,S))}),_}function d1(a){var c=It(a);return function(p){return $w(p,a,c)}}function $w(a,c,p){var f=p.length;if(a==null)return!f;for(a=tt(a);f--;){var h=p[f],S=c[h],_=a[h];if(_===t&&!(h in a)||!S(_))return!1}return!0}function jw(a,c,p){if(typeof a!="function")throw new Xr(i);return Nc(function(){a.apply(t,p)},c)}function Mc(a,c,p,f){var h=-1,S=Fu,_=!0,R=a.length,M=[],G=c.length;if(!R)return M;p&&(c=at(c,Fr(p))),f?(S=Dy,_=!1):c.length>=r&&(S=Ec,_=!1,c=new Do(c));e:for(;++h<R;){var K=a[h],ee=p==null?K:p(K);if(K=f||K!==0?K:0,_&&ee===ee){for(var oe=G;oe--;)if(c[oe]===ee)continue e;M.push(K)}else S(c,ee,f)||M.push(K)}return M}var Bi=yE(Bn),zw=yE(qy,!0);function g1(a,c){var p=!0;return Bi(a,function(f,h,S){return p=!!c(f,h,S),p}),p}function Zu(a,c,p){for(var f=-1,h=a.length;++f<h;){var S=a[f],_=c(S);if(_!=null&&(R===t?_===_&&!Cr(_):p(_,R)))var R=_,M=S}return M}function h1(a,c,p,f){var h=a.length;for(p=Me(p),p<0&&(p=-p>h?0:h+p),f=f===t||f>h?h:Me(f),f<0&&(f+=h),f=p>f?0:c_(f);p<f;)a[p++]=c;return a}function qw(a,c){var p=[];return Bi(a,function(f,h,S){c(f,h,S)&&p.push(f)}),p}function Wt(a,c,p,f,h){var S=-1,_=a.length;for(p||(p=iO),h||(h=[]);++S<_;){var R=a[S];c>0&&p(R)?c>1?Wt(R,c-1,p,f,h):Oi(h,R):f||(h[h.length]=R)}return h}var zy=TE(),Gw=TE(!0);function Bn(a,c){return a&&zy(a,c,It)}function qy(a,c){return a&&Gw(a,c,It)}function Xu(a,c){return Ci(c,function(p){return Ti(a[p])})}function Lo(a,c){c=Wi(c,a);for(var p=0,f=c.length;a!=null&&p<f;)a=a[Wn(c[p++])];return p&&p==f?a:t}function Kw(a,c,p){var f=c(a);return ke(a)?f:Oi(f,p(a))}function ar(a){return a==null?a===t?zF:$F:Ao&&Ao in tt(a)?X1(a):pO(a)}function Gy(a,c){return a>c}function y1(a,c){return a!=null&&Xe.call(a,c)}function T1(a,c){return a!=null&&c in tt(a)}function x1(a,c,p){return a>=Zt(c,p)&&a<Pt(c,p)}function Ky(a,c,p){for(var f=p?Dy:Fu,h=a[0].length,S=a.length,_=S,R=B(S),M=1/0,G=[];_--;){var K=a[_];_&&c&&(K=at(K,Fr(c))),M=Zt(K.length,M),R[_]=!p&&(c||h>=120&&K.length>=120)?new Do(_&&K):t}K=a[0];var ee=-1,oe=R[0];e:for(;++ee<h&&G.length<M;){var fe=K[ee],xe=c?c(fe):fe;if(fe=p||fe!==0?fe:0,!(oe?Ec(oe,xe):f(G,xe,p))){for(_=S;--_;){var Fe=R[_];if(!(Fe?Ec(Fe,xe):f(a[_],xe,p)))continue e}oe&&oe.push(xe),G.push(fe)}}return G}function S1(a,c,p,f){return Bn(a,function(h,S,_){c(f,p(h),S,_)}),f}function Lc(a,c,p){c=Wi(c,a),a=CE(a,c);var f=a==null?a:a[Wn(rn(c))];return f==null?t:Lr(f,a,p)}function Qw(a){return gt(a)&&ar(a)==Ke}function v1(a){return gt(a)&&ar(a)==wc}function b1(a){return gt(a)&&ar(a)==Qr}function Fc(a,c,p,f,h){return a===c?!0:a==null||c==null||!gt(a)&&!gt(c)?a!==a&&c!==c:w1(a,c,p,f,Fc,h)}function w1(a,c,p,f,h,S){var _=ke(a),R=ke(c),M=_?Ue:Xt(a),G=R?Ue:Xt(c);M=M==Ke?pi:M,G=G==Ke?pi:G;var K=M==pi,ee=G==pi,oe=M==G;if(oe&&ji(a)){if(!ji(c))return!1;_=!0,K=!1}if(oe&&!K)return S||(S=new En),_||Ha(a)?AE(a,c,p,f,h,S):Y1(a,c,M,p,f,h,S);if(!(p&y)){var fe=K&&Xe.call(a,"__wrapped__"),xe=ee&&Xe.call(c,"__wrapped__");if(fe||xe){var Fe=fe?a.value():a,Se=xe?c.value():c;return S||(S=new En),h(Fe,Se,p,f,S)}}return oe?(S||(S=new En),Z1(a,c,p,f,h,S)):!1}function E1(a){return gt(a)&&Xt(a)==vn}function Qy(a,c,p,f){var h=p.length,S=h,_=!f;if(a==null)return!S;for(a=tt(a);h--;){var R=p[h];if(_&&R[2]?R[1]!==a[R[0]]:!(R[0]in a))return!1}for(;++h<S;){R=p[h];var M=R[0],G=a[M],K=R[1];if(_&&R[2]){if(G===t&&!(M in a))return!1}else{var ee=new En;if(f)var oe=f(G,K,M,a,c,ee);if(!(oe===t?Fc(K,G,y|x,f,ee):oe))return!1}}return!0}function Yw(a){if(!ut(a)||aO(a))return!1;var c=Ti(a)?EC:dI;return c.test(Io(a))}function _1(a){return gt(a)&&ar(a)==Sc}function R1(a){return gt(a)&&Xt(a)==bn}function k1(a){return gt(a)&&gp(a.length)&&!!nt[ar(a)]}function Zw(a){return typeof a=="function"?a:a==null?br:typeof a=="object"?ke(a)?eE(a[0],a[1]):Jw(a):x_(a)}function Yy(a){if(!Oc(a))return DC(a);var c=[];for(var p in tt(a))Xe.call(a,p)&&p!="constructor"&&c.push(p);return c}function A1(a){if(!ut(a))return uO(a);var c=Oc(a),p=[];for(var f in a)f=="constructor"&&(c||!Xe.call(a,f))||p.push(f);return p}function Zy(a,c){return a<c}function Xw(a,c){var p=-1,f=Sr(a)?B(a.length):[];return Bi(a,function(h,S,_){f[++p]=c(h,S,_)}),f}function Jw(a){var c=mT(a);return c.length==1&&c[0][2]?FE(c[0][0],c[0][1]):function(p){return p===a||Qy(p,a,c)}}function eE(a,c){return dT(a)&&LE(c)?FE(Wn(a),c):function(p){var f=ET(p,a);return f===t&&f===c?_T(p,a):Fc(c,f,y|x)}}function Ju(a,c,p,f,h){a!==c&&zy(c,function(S,_){if(h||(h=new En),ut(S))P1(a,c,_,p,Ju,f,h);else{var R=f?f(hT(a,_),S,_+"",a,c,h):t;R===t&&(R=S),$y(a,_,R)}},vr)}function P1(a,c,p,f,h,S,_){var R=hT(a,p),M=hT(c,p),G=_.get(M);if(G){$y(a,p,G);return}var K=S?S(R,M,p+"",a,c,_):t,ee=K===t;if(ee){var oe=ke(M),fe=!oe&&ji(M),xe=!oe&&!fe&&Ha(M);K=M,oe||fe||xe?ke(R)?K=R:Tt(R)?K=xr(R):fe?(ee=!1,K=mE(M,!0)):xe?(ee=!1,K=fE(M,!0)):K=[]:Uc(M)||Co(M)?(K=R,Co(R)?K=l_(R):(!ut(R)||Ti(R))&&(K=ME(M))):ee=!1}ee&&(_.set(M,K),h(K,M,f,S,_),_.delete(M)),$y(a,p,K)}function tE(a,c){var p=a.length;if(p)return c+=c<0?p:0,yi(c,p)?a[c]:t}function rE(a,c,p){c.length?c=at(c,function(S){return ke(S)?function(_){return Lo(_,S.length===1?S[0]:S)}:S}):c=[br];var f=-1;c=at(c,Fr(ye()));var h=Xw(a,function(S,_,R){var M=at(c,function(G){return G(S)});return{criteria:M,index:++f,value:S}});return rC(h,function(S,_){return W1(S,_,p)})}function D1(a,c){return nE(a,c,function(p,f){return _T(a,f)})}function nE(a,c,p){for(var f=-1,h=c.length,S={};++f<h;){var _=c[f],R=Lo(a,_);p(R,_)&&Ic(S,Wi(_,a),R)}return S}function M1(a){return function(c){return Lo(c,a)}}function Xy(a,c,p,f){var h=f?tC:Pa,S=-1,_=c.length,R=a;for(a===c&&(c=xr(c)),p&&(R=at(a,Fr(p)));++S<_;)for(var M=0,G=c[S],K=p?p(G):G;(M=h(R,K,M,f))>-1;)R!==a&&$u.call(R,M,1),$u.call(a,M,1);return a}function iE(a,c){for(var p=a?c.length:0,f=p-1;p--;){var h=c[p];if(p==f||h!==S){var S=h;yi(h)?$u.call(a,h,1):rT(a,h)}}return a}function Jy(a,c){return a+qu(Uw()*(c-a+1))}function L1(a,c,p,f){for(var h=-1,S=Pt(zu((c-a)/(p||1)),0),_=B(S);S--;)_[f?S:++h]=a,a+=p;return _}function eT(a,c){var p="";if(!a||c<1||c>N)return p;do c%2&&(p+=a),c=qu(c/2),c&&(a+=a);while(c);return p}function Ce(a,c){return yT(IE(a,c,br),a+"")}function F1(a){return Vw(Ba(a))}function I1(a,c){var p=Ba(a);return lp(p,Mo(c,0,p.length))}function Ic(a,c,p,f){if(!ut(a))return a;c=Wi(c,a);for(var h=-1,S=c.length,_=S-1,R=a;R!=null&&++h<S;){var M=Wn(c[h]),G=p;if(M==="__proto__"||M==="constructor"||M==="prototype")return a;if(h!=_){var K=R[M];G=f?f(K,M,R):t,G===t&&(G=ut(K)?K:yi(c[h+1])?[]:{})}Dc(R,M,G),R=R[M]}return a}var oE=Gu?function(a,c){return Gu.set(a,c),a}:br,C1=ju?function(a,c){return ju(a,"toString",{configurable:!0,enumerable:!1,value:kT(c),writable:!0})}:br;function O1(a){return lp(Ba(a))}function tn(a,c,p){var f=-1,h=a.length;c<0&&(c=-c>h?0:h+c),p=p>h?h:p,p<0&&(p+=h),h=c>p?0:p-c>>>0,c>>>=0;for(var S=B(h);++f<h;)S[f]=a[f+c];return S}function N1(a,c){var p;return Bi(a,function(f,h,S){return p=c(f,h,S),!p}),!!p}function ep(a,c,p){var f=0,h=a==null?f:a.length;if(typeof c=="number"&&c===c&&h<=be){for(;f<h;){var S=f+h>>>1,_=a[S];_!==null&&!Cr(_)&&(p?_<=c:_<c)?f=S+1:h=S}return h}return tT(a,c,br,p)}function tT(a,c,p,f){var h=0,S=a==null?0:a.length;if(S===0)return 0;c=p(c);for(var _=c!==c,R=c===null,M=Cr(c),G=c===t;h<S;){var K=qu((h+S)/2),ee=p(a[K]),oe=ee!==t,fe=ee===null,xe=ee===ee,Fe=Cr(ee);if(_)var Se=f||xe;else G?Se=xe&&(f||oe):R?Se=xe&&oe&&(f||!fe):M?Se=xe&&oe&&!fe&&(f||!Fe):fe||Fe?Se=!1:Se=f?ee<=c:ee<c;Se?h=K+1:S=K}return Zt(S,re)}function aE(a,c){for(var p=-1,f=a.length,h=0,S=[];++p<f;){var _=a[p],R=c?c(_):_;if(!p||!_n(R,M)){var M=R;S[h++]=_===0?0:_}}return S}function sE(a){return typeof a=="number"?a:Cr(a)?X:+a}function Ir(a){if(typeof a=="string")return a;if(ke(a))return at(a,Ir)+"";if(Cr(a))return Hw?Hw.call(a):"";var c=a+"";return c=="0"&&1/a==-F?"-0":c}function Vi(a,c,p){var f=-1,h=Fu,S=a.length,_=!0,R=[],M=R;if(p)_=!1,h=Dy;else if(S>=r){var G=c?null:K1(a);if(G)return Cu(G);_=!1,h=Ec,M=new Do}else M=c?[]:R;e:for(;++f<S;){var K=a[f],ee=c?c(K):K;if(K=p||K!==0?K:0,_&&ee===ee){for(var oe=M.length;oe--;)if(M[oe]===ee)continue e;c&&M.push(ee),R.push(K)}else h(M,ee,p)||(M!==R&&M.push(ee),R.push(K))}return R}function rT(a,c){return c=Wi(c,a),a=CE(a,c),a==null||delete a[Wn(rn(c))]}function cE(a,c,p,f){return Ic(a,c,p(Lo(a,c)),f)}function tp(a,c,p,f){for(var h=a.length,S=f?h:-1;(f?S--:++S<h)&&c(a[S],S,a););return p?tn(a,f?0:S,f?S+1:h):tn(a,f?S+1:0,f?h:S)}function lE(a,c){var p=a;return p instanceof We&&(p=p.value()),My(c,function(f,h){return h.func.apply(h.thisArg,Oi([f],h.args))},p)}function nT(a,c,p){var f=a.length;if(f<2)return f?Vi(a[0]):[];for(var h=-1,S=B(f);++h<f;)for(var _=a[h],R=-1;++R<f;)R!=h&&(S[h]=Mc(S[h]||_,a[R],c,p));return Vi(Wt(S,1),c,p)}function uE(a,c,p){for(var f=-1,h=a.length,S=c.length,_={};++f<h;){var R=f<S?c[f]:t;p(_,a[f],R)}return _}function iT(a){return Tt(a)?a:[]}function oT(a){return typeof a=="function"?a:br}function Wi(a,c){return ke(a)?a:dT(a,c)?[a]:HE(Ze(a))}var U1=Ce;function $i(a,c,p){var f=a.length;return p=p===t?f:p,!c&&p>=f?a:tn(a,c,p)}var pE=_C||function(a){return Ft.clearTimeout(a)};function mE(a,c){if(c)return a.slice();var p=a.length,f=Fw?Fw(p):new a.constructor(p);return a.copy(f),f}function aT(a){var c=new a.constructor(a.byteLength);return new Vu(c).set(new Vu(a)),c}function H1(a,c){var p=c?aT(a.buffer):a.buffer;return new a.constructor(p,a.byteOffset,a.byteLength)}function B1(a){var c=new a.constructor(a.source,Qb.exec(a));return c.lastIndex=a.lastIndex,c}function V1(a){return Pc?tt(Pc.call(a)):{}}function fE(a,c){var p=c?aT(a.buffer):a.buffer;return new a.constructor(p,a.byteOffset,a.length)}function dE(a,c){if(a!==c){var p=a!==t,f=a===null,h=a===a,S=Cr(a),_=c!==t,R=c===null,M=c===c,G=Cr(c);if(!R&&!G&&!S&&a>c||S&&_&&M&&!R&&!G||f&&_&&M||!p&&M||!h)return 1;if(!f&&!S&&!G&&a<c||G&&p&&h&&!f&&!S||R&&p&&h||!_&&h||!M)return-1}return 0}function W1(a,c,p){for(var f=-1,h=a.criteria,S=c.criteria,_=h.length,R=p.length;++f<_;){var M=dE(h[f],S[f]);if(M){if(f>=R)return M;var G=p[f];return M*(G=="desc"?-1:1)}}return a.index-c.index}function gE(a,c,p,f){for(var h=-1,S=a.length,_=p.length,R=-1,M=c.length,G=Pt(S-_,0),K=B(M+G),ee=!f;++R<M;)K[R]=c[R];for(;++h<_;)(ee||h<S)&&(K[p[h]]=a[h]);for(;G--;)K[R++]=a[h++];return K}function hE(a,c,p,f){for(var h=-1,S=a.length,_=-1,R=p.length,M=-1,G=c.length,K=Pt(S-R,0),ee=B(K+G),oe=!f;++h<K;)ee[h]=a[h];for(var fe=h;++M<G;)ee[fe+M]=c[M];for(;++_<R;)(oe||h<S)&&(ee[fe+p[_]]=a[h++]);return ee}function xr(a,c){var p=-1,f=a.length;for(c||(c=B(f));++p<f;)c[p]=a[p];return c}function Vn(a,c,p,f){var h=!p;p||(p={});for(var S=-1,_=c.length;++S<_;){var R=c[S],M=f?f(p[R],a[R],R,p,a):t;M===t&&(M=a[R]),h?di(p,R,M):Dc(p,R,M)}return p}function $1(a,c){return Vn(a,fT(a),c)}function j1(a,c){return Vn(a,PE(a),c)}function rp(a,c){return function(p,f){var h=ke(p)?QI:m1,S=c?c():{};return h(p,a,ye(f,2),S)}}function Oa(a){return Ce(function(c,p){var f=-1,h=p.length,S=h>1?p[h-1]:t,_=h>2?p[2]:t;for(S=a.length>3&&typeof S=="function"?(h--,S):t,_&&sr(p[0],p[1],_)&&(S=h<3?t:S,h=1),c=tt(c);++f<h;){var R=p[f];R&&a(c,R,f,S)}return c})}function yE(a,c){return function(p,f){if(p==null)return p;if(!Sr(p))return a(p,f);for(var h=p.length,S=c?h:-1,_=tt(p);(c?S--:++S<h)&&f(_[S],S,_)!==!1;);return p}}function TE(a){return function(c,p,f){for(var h=-1,S=tt(c),_=f(c),R=_.length;R--;){var M=_[a?R:++h];if(p(S[M],M,S)===!1)break}return c}}function z1(a,c,p){var f=c&E,h=Cc(a);function S(){var _=this&&this!==Ft&&this instanceof S?h:a;return _.apply(f?p:this,arguments)}return S}function xE(a){return function(c){c=Ze(c);var p=Da(c)?wn(c):t,f=p?p[0]:c.charAt(0),h=p?$i(p,1).join(""):c.slice(1);return f[a]()+h}}function Na(a){return function(c){return My(y_(h_(c).replace(CI,"")),a,"")}}function Cc(a){return function(){var c=arguments;switch(c.length){case 0:return new a;case 1:return new a(c[0]);case 2:return new a(c[0],c[1]);case 3:return new a(c[0],c[1],c[2]);case 4:return new a(c[0],c[1],c[2],c[3]);case 5:return new a(c[0],c[1],c[2],c[3],c[4]);case 6:return new a(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new a(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var p=Ca(a.prototype),f=a.apply(p,c);return ut(f)?f:p}}function q1(a,c,p){var f=Cc(a);function h(){for(var S=arguments.length,_=B(S),R=S,M=Ua(h);R--;)_[R]=arguments[R];var G=S<3&&_[0]!==M&&_[S-1]!==M?[]:Ni(_,M);if(S-=G.length,S<p)return EE(a,c,np,h.placeholder,t,_,G,t,t,p-S);var K=this&&this!==Ft&&this instanceof h?f:a;return Lr(K,this,_)}return h}function SE(a){return function(c,p,f){var h=tt(c);if(!Sr(c)){var S=ye(p,3);c=It(c),p=function(R){return S(h[R],R,h)}}var _=a(c,p,f);return _>-1?h[S?c[_]:_]:t}}function vE(a){return hi(function(c){var p=c.length,f=p,h=Jr.prototype.thru;for(a&&c.reverse();f--;){var S=c[f];if(typeof S!="function")throw new Xr(i);if(h&&!_&&sp(S)=="wrapper")var _=new Jr([],!0)}for(f=_?f:p;++f<p;){S=c[f];var R=sp(S),M=R=="wrapper"?pT(S):t;M&&gT(M[0])&&M[1]==(de|V|ne|ve)&&!M[4].length&&M[9]==1?_=_[sp(M[0])].apply(_,M[3]):_=S.length==1&&gT(S)?_[R]():_.thru(S)}return function(){var G=arguments,K=G[0];if(_&&G.length==1&&ke(K))return _.plant(K).value();for(var ee=0,oe=p?c[ee].apply(this,G):K;++ee<p;)oe=c[ee].call(this,oe);return oe}})}function np(a,c,p,f,h,S,_,R,M,G){var K=c&de,ee=c&E,oe=c&w,fe=c&(V|q),xe=c&Et,Fe=oe?t:Cc(a);function Se(){for(var He=arguments.length,$e=B(He),Or=He;Or--;)$e[Or]=arguments[Or];if(fe)var cr=Ua(Se),Nr=iC($e,cr);if(f&&($e=gE($e,f,h,fe)),S&&($e=hE($e,S,_,fe)),He-=Nr,fe&&He<G){var xt=Ni($e,cr);return EE(a,c,np,Se.placeholder,p,$e,xt,R,M,G-He)}var Rn=ee?p:this,Si=oe?Rn[a]:a;return He=$e.length,R?$e=mO($e,R):xe&&He>1&&$e.reverse(),K&&M<He&&($e.length=M),this&&this!==Ft&&this instanceof Se&&(Si=Fe||Cc(Si)),Si.apply(Rn,$e)}return Se}function bE(a,c){return function(p,f){return S1(p,a,c(f),{})}}function ip(a,c){return function(p,f){var h;if(p===t&&f===t)return c;if(p!==t&&(h=p),f!==t){if(h===t)return f;typeof p=="string"||typeof f=="string"?(p=Ir(p),f=Ir(f)):(p=sE(p),f=sE(f)),h=a(p,f)}return h}}function sT(a){return hi(function(c){return c=at(c,Fr(ye())),Ce(function(p){var f=this;return a(c,function(h){return Lr(h,f,p)})})})}function op(a,c){c=c===t?" ":Ir(c);var p=c.length;if(p<2)return p?eT(c,a):c;var f=eT(c,zu(a/Ma(c)));return Da(c)?$i(wn(f),0,a).join(""):f.slice(0,a)}function G1(a,c,p,f){var h=c&E,S=Cc(a);function _(){for(var R=-1,M=arguments.length,G=-1,K=f.length,ee=B(K+M),oe=this&&this!==Ft&&this instanceof _?S:a;++G<K;)ee[G]=f[G];for(;M--;)ee[G++]=arguments[++R];return Lr(oe,h?p:this,ee)}return _}function wE(a){return function(c,p,f){return f&&typeof f!="number"&&sr(c,p,f)&&(p=f=t),c=xi(c),p===t?(p=c,c=0):p=xi(p),f=f===t?c<p?1:-1:xi(f),L1(c,p,f,a)}}function ap(a){return function(c,p){return typeof c=="string"&&typeof p=="string"||(c=nn(c),p=nn(p)),a(c,p)}}function EE(a,c,p,f,h,S,_,R,M,G){var K=c&V,ee=K?_:t,oe=K?t:_,fe=K?S:t,xe=K?t:S;c|=K?ne:se,c&=~(K?se:ne),c&U||(c&=~(E|w));var Fe=[a,c,h,fe,ee,xe,oe,R,M,G],Se=p.apply(t,Fe);return gT(a)&&OE(Se,Fe),Se.placeholder=f,NE(Se,a,c)}function cT(a){var c=At[a];return function(p,f){if(p=nn(p),f=f==null?0:Zt(Me(f),292),f&&Nw(p)){var h=(Ze(p)+"e").split("e"),S=c(h[0]+"e"+(+h[1]+f));return h=(Ze(S)+"e").split("e"),+(h[0]+"e"+(+h[1]-f))}return c(p)}}var K1=Fa&&1/Cu(new Fa([,-0]))[1]==F?function(a){return new Fa(a)}:DT;function _E(a){return function(c){var p=Xt(c);return p==vn?Uy(c):p==bn?pC(c):nC(c,a(c))}}function gi(a,c,p,f,h,S,_,R){var M=c&w;if(!M&&typeof a!="function")throw new Xr(i);var G=f?f.length:0;if(G||(c&=~(ne|se),f=h=t),_=_===t?_:Pt(Me(_),0),R=R===t?R:Me(R),G-=h?h.length:0,c&se){var K=f,ee=h;f=h=t}var oe=M?t:pT(a),fe=[a,c,p,f,h,K,ee,S,_,R];if(oe&&lO(fe,oe),a=fe[0],c=fe[1],p=fe[2],f=fe[3],h=fe[4],R=fe[9]=fe[9]===t?M?0:a.length:Pt(fe[9]-G,0),!R&&c&(V|q)&&(c&=~(V|q)),!c||c==E)var xe=z1(a,c,p);else c==V||c==q?xe=q1(a,c,R):(c==ne||c==(E|ne))&&!h.length?xe=G1(a,c,p,f):xe=np.apply(t,fe);var Fe=oe?oE:OE;return NE(Fe(xe,fe),a,c)}function RE(a,c,p,f){return a===t||_n(a,La[p])&&!Xe.call(f,p)?c:a}function kE(a,c,p,f,h,S){return ut(a)&&ut(c)&&(S.set(c,a),Ju(a,c,t,kE,S),S.delete(c)),a}function Q1(a){return Uc(a)?t:a}function AE(a,c,p,f,h,S){var _=p&y,R=a.length,M=c.length;if(R!=M&&!(_&&M>R))return!1;var G=S.get(a),K=S.get(c);if(G&&K)return G==c&&K==a;var ee=-1,oe=!0,fe=p&x?new Do:t;for(S.set(a,c),S.set(c,a);++ee<R;){var xe=a[ee],Fe=c[ee];if(f)var Se=_?f(Fe,xe,ee,c,a,S):f(xe,Fe,ee,a,c,S);if(Se!==t){if(Se)continue;oe=!1;break}if(fe){if(!Ly(c,function(He,$e){if(!Ec(fe,$e)&&(xe===He||h(xe,He,p,f,S)))return fe.push($e)})){oe=!1;break}}else if(!(xe===Fe||h(xe,Fe,p,f,S))){oe=!1;break}}return S.delete(a),S.delete(c),oe}function Y1(a,c,p,f,h,S,_){switch(p){case ka:if(a.byteLength!=c.byteLength||a.byteOffset!=c.byteOffset)return!1;a=a.buffer,c=c.buffer;case wc:return!(a.byteLength!=c.byteLength||!S(new Vu(a),new Vu(c)));case Vt:case Qr:case xc:return _n(+a,+c);case ui:return a.name==c.name&&a.message==c.message;case Sc:case vc:return a==c+"";case vn:var R=Uy;case bn:var M=f&y;if(R||(R=Cu),a.size!=c.size&&!M)return!1;var G=_.get(a);if(G)return G==c;f|=x,_.set(a,c);var K=AE(R(a),R(c),f,h,S,_);return _.delete(a),K;case Pu:if(Pc)return Pc.call(a)==Pc.call(c)}return!1}function Z1(a,c,p,f,h,S){var _=p&y,R=lT(a),M=R.length,G=lT(c),K=G.length;if(M!=K&&!_)return!1;for(var ee=M;ee--;){var oe=R[ee];if(!(_?oe in c:Xe.call(c,oe)))return!1}var fe=S.get(a),xe=S.get(c);if(fe&&xe)return fe==c&&xe==a;var Fe=!0;S.set(a,c),S.set(c,a);for(var Se=_;++ee<M;){oe=R[ee];var He=a[oe],$e=c[oe];if(f)var Or=_?f($e,He,oe,c,a,S):f(He,$e,oe,a,c,S);if(!(Or===t?He===$e||h(He,$e,p,f,S):Or)){Fe=!1;break}Se||(Se=oe=="constructor")}if(Fe&&!Se){var cr=a.constructor,Nr=c.constructor;cr!=Nr&&"constructor"in a&&"constructor"in c&&!(typeof cr=="function"&&cr instanceof cr&&typeof Nr=="function"&&Nr instanceof Nr)&&(Fe=!1)}return S.delete(a),S.delete(c),Fe}function hi(a){return yT(IE(a,t,$E),a+"")}function lT(a){return Kw(a,It,fT)}function uT(a){return Kw(a,vr,PE)}var pT=Gu?function(a){return Gu.get(a)}:DT;function sp(a){for(var c=a.name+"",p=Ia[c],f=Xe.call(Ia,c)?p.length:0;f--;){var h=p[f],S=h.func;if(S==null||S==a)return h.name}return c}function Ua(a){var c=Xe.call(T,"placeholder")?T:a;return c.placeholder}function ye(){var a=T.iteratee||AT;return a=a===AT?Zw:a,arguments.length?a(arguments[0],arguments[1]):a}function cp(a,c){var p=a.__data__;return oO(c)?p[typeof c=="string"?"string":"hash"]:p.map}function mT(a){for(var c=It(a),p=c.length;p--;){var f=c[p],h=a[f];c[p]=[f,h,LE(h)]}return c}function Fo(a,c){var p=cC(a,c);return Yw(p)?p:t}function X1(a){var c=Xe.call(a,Ao),p=a[Ao];try{a[Ao]=t;var f=!0}catch{}var h=Hu.call(a);return f&&(c?a[Ao]=p:delete a[Ao]),h}var fT=By?function(a){return a==null?[]:(a=tt(a),Ci(By(a),function(c){return Cw.call(a,c)}))}:MT,PE=By?function(a){for(var c=[];a;)Oi(c,fT(a)),a=Wu(a);return c}:MT,Xt=ar;(Vy&&Xt(new Vy(new ArrayBuffer(1)))!=ka||Rc&&Xt(new Rc)!=vn||Wy&&Xt(Wy.resolve())!=zb||Fa&&Xt(new Fa)!=bn||kc&&Xt(new kc)!=bc)&&(Xt=function(a){var c=ar(a),p=c==pi?a.constructor:t,f=p?Io(p):"";if(f)switch(f){case IC:return ka;case CC:return vn;case OC:return zb;case NC:return bn;case UC:return bc}return c});function J1(a,c,p){for(var f=-1,h=p.length;++f<h;){var S=p[f],_=S.size;switch(S.type){case"drop":a+=_;break;case"dropRight":c-=_;break;case"take":c=Zt(c,a+_);break;case"takeRight":a=Pt(a,c-_);break}}return{start:a,end:c}}function eO(a){var c=a.match(aI);return c?c[1].split(sI):[]}function DE(a,c,p){c=Wi(c,a);for(var f=-1,h=c.length,S=!1;++f<h;){var _=Wn(c[f]);if(!(S=a!=null&&p(a,_)))break;a=a[_]}return S||++f!=h?S:(h=a==null?0:a.length,!!h&&gp(h)&&yi(_,h)&&(ke(a)||Co(a)))}function tO(a){var c=a.length,p=new a.constructor(c);return c&&typeof a[0]=="string"&&Xe.call(a,"index")&&(p.index=a.index,p.input=a.input),p}function ME(a){return typeof a.constructor=="function"&&!Oc(a)?Ca(Wu(a)):{}}function rO(a,c,p){var f=a.constructor;switch(c){case wc:return aT(a);case Vt:case Qr:return new f(+a);case ka:return H1(a,p);case my:case fy:case dy:case gy:case hy:case yy:case Ty:case xy:case Sy:return fE(a,p);case vn:return new f;case xc:case vc:return new f(a);case Sc:return B1(a);case bn:return new f;case Pu:return V1(a)}}function nO(a,c){var p=c.length;if(!p)return a;var f=p-1;return c[f]=(p>1?"& ":"")+c[f],c=c.join(p>2?", ":" "),a.replace(oI,`{
/* [wrapped with `+c+`] */
`)}function iO(a){return ke(a)||Co(a)||!!(Ow&&a&&a[Ow])}function yi(a,c){var p=typeof a;return c=c??N,!!c&&(p=="number"||p!="symbol"&&hI.test(a))&&a>-1&&a%1==0&&a<c}function sr(a,c,p){if(!ut(p))return!1;var f=typeof c;return(f=="number"?Sr(p)&&yi(c,p.length):f=="string"&&c in p)?_n(p[c],a):!1}function dT(a,c){if(ke(a))return!1;var p=typeof a;return p=="number"||p=="symbol"||p=="boolean"||a==null||Cr(a)?!0:tI.test(a)||!eI.test(a)||c!=null&&a in tt(c)}function oO(a){var c=typeof a;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?a!=="__proto__":a===null}function gT(a){var c=sp(a),p=T[c];if(typeof p!="function"||!(c in We.prototype))return!1;if(a===p)return!0;var f=pT(p);return!!f&&a===f[0]}function aO(a){return!!Lw&&Lw in a}var sO=Nu?Ti:LT;function Oc(a){var c=a&&a.constructor,p=typeof c=="function"&&c.prototype||La;return a===p}function LE(a){return a===a&&!ut(a)}function FE(a,c){return function(p){return p==null?!1:p[a]===c&&(c!==t||a in tt(p))}}function cO(a){var c=fp(a,function(f){return p.size===l&&p.clear(),f}),p=c.cache;return c}function lO(a,c){var p=a[1],f=c[1],h=p|f,S=h<(E|w|de),_=f==de&&p==V||f==de&&p==ve&&a[7].length<=c[8]||f==(de|ve)&&c[7].length<=c[8]&&p==V;if(!(S||_))return a;f&E&&(a[2]=c[2],h|=p&E?0:U);var R=c[3];if(R){var M=a[3];a[3]=M?gE(M,R,c[4]):R,a[4]=M?Ni(a[3],u):c[4]}return R=c[5],R&&(M=a[5],a[5]=M?hE(M,R,c[6]):R,a[6]=M?Ni(a[5],u):c[6]),R=c[7],R&&(a[7]=R),f&de&&(a[8]=a[8]==null?c[8]:Zt(a[8],c[8])),a[9]==null&&(a[9]=c[9]),a[0]=c[0],a[1]=h,a}function uO(a){var c=[];if(a!=null)for(var p in tt(a))c.push(p);return c}function pO(a){return Hu.call(a)}function IE(a,c,p){return c=Pt(c===t?a.length-1:c,0),function(){for(var f=arguments,h=-1,S=Pt(f.length-c,0),_=B(S);++h<S;)_[h]=f[c+h];h=-1;for(var R=B(c+1);++h<c;)R[h]=f[h];return R[c]=p(_),Lr(a,this,R)}}function CE(a,c){return c.length<2?a:Lo(a,tn(c,0,-1))}function mO(a,c){for(var p=a.length,f=Zt(c.length,p),h=xr(a);f--;){var S=c[f];a[f]=yi(S,p)?h[S]:t}return a}function hT(a,c){if(!(c==="constructor"&&typeof a[c]=="function")&&c!="__proto__")return a[c]}var OE=UE(oE),Nc=kC||function(a,c){return Ft.setTimeout(a,c)},yT=UE(C1);function NE(a,c,p){var f=c+"";return yT(a,nO(f,fO(eO(f),p)))}function UE(a){var c=0,p=0;return function(){var f=MC(),h=C-(f-p);if(p=f,h>0){if(++c>=H)return arguments[0]}else c=0;return a.apply(t,arguments)}}function lp(a,c){var p=-1,f=a.length,h=f-1;for(c=c===t?f:c;++p<c;){var S=Jy(p,h),_=a[S];a[S]=a[p],a[p]=_}return a.length=c,a}var HE=cO(function(a){var c=[];return a.charCodeAt(0)===46&&c.push(""),a.replace(rI,function(p,f,h,S){c.push(h?S.replace(uI,"$1"):f||p)}),c});function Wn(a){if(typeof a=="string"||Cr(a))return a;var c=a+"";return c=="0"&&1/a==-F?"-0":c}function Io(a){if(a!=null){try{return Uu.call(a)}catch{}try{return a+""}catch{}}return""}function fO(a,c){return Zr(Ee,function(p){var f="_."+p[0];c&p[1]&&!Fu(a,f)&&a.push(f)}),a.sort()}function BE(a){if(a instanceof We)return a.clone();var c=new Jr(a.__wrapped__,a.__chain__);return c.__actions__=xr(a.__actions__),c.__index__=a.__index__,c.__values__=a.__values__,c}function dO(a,c,p){(p?sr(a,c,p):c===t)?c=1:c=Pt(Me(c),0);var f=a==null?0:a.length;if(!f||c<1)return[];for(var h=0,S=0,_=B(zu(f/c));h<f;)_[S++]=tn(a,h,h+=c);return _}function gO(a){for(var c=-1,p=a==null?0:a.length,f=0,h=[];++c<p;){var S=a[c];S&&(h[f++]=S)}return h}function hO(){var a=arguments.length;if(!a)return[];for(var c=B(a-1),p=arguments[0],f=a;f--;)c[f-1]=arguments[f];return Oi(ke(p)?xr(p):[p],Wt(c,1))}var yO=Ce(function(a,c){return Tt(a)?Mc(a,Wt(c,1,Tt,!0)):[]}),TO=Ce(function(a,c){var p=rn(c);return Tt(p)&&(p=t),Tt(a)?Mc(a,Wt(c,1,Tt,!0),ye(p,2)):[]}),xO=Ce(function(a,c){var p=rn(c);return Tt(p)&&(p=t),Tt(a)?Mc(a,Wt(c,1,Tt,!0),t,p):[]});function SO(a,c,p){var f=a==null?0:a.length;return f?(c=p||c===t?1:Me(c),tn(a,c<0?0:c,f)):[]}function vO(a,c,p){var f=a==null?0:a.length;return f?(c=p||c===t?1:Me(c),c=f-c,tn(a,0,c<0?0:c)):[]}function bO(a,c){return a&&a.length?tp(a,ye(c,3),!0,!0):[]}function wO(a,c){return a&&a.length?tp(a,ye(c,3),!0):[]}function EO(a,c,p,f){var h=a==null?0:a.length;return h?(p&&typeof p!="number"&&sr(a,c,p)&&(p=0,f=h),h1(a,c,p,f)):[]}function VE(a,c,p){var f=a==null?0:a.length;if(!f)return-1;var h=p==null?0:Me(p);return h<0&&(h=Pt(f+h,0)),Iu(a,ye(c,3),h)}function WE(a,c,p){var f=a==null?0:a.length;if(!f)return-1;var h=f-1;return p!==t&&(h=Me(p),h=p<0?Pt(f+h,0):Zt(h,f-1)),Iu(a,ye(c,3),h,!0)}function $E(a){var c=a==null?0:a.length;return c?Wt(a,1):[]}function _O(a){var c=a==null?0:a.length;return c?Wt(a,F):[]}function RO(a,c){var p=a==null?0:a.length;return p?(c=c===t?1:Me(c),Wt(a,c)):[]}function kO(a){for(var c=-1,p=a==null?0:a.length,f={};++c<p;){var h=a[c];f[h[0]]=h[1]}return f}function jE(a){return a&&a.length?a[0]:t}function AO(a,c,p){var f=a==null?0:a.length;if(!f)return-1;var h=p==null?0:Me(p);return h<0&&(h=Pt(f+h,0)),Pa(a,c,h)}function PO(a){var c=a==null?0:a.length;return c?tn(a,0,-1):[]}var DO=Ce(function(a){var c=at(a,iT);return c.length&&c[0]===a[0]?Ky(c):[]}),MO=Ce(function(a){var c=rn(a),p=at(a,iT);return c===rn(p)?c=t:p.pop(),p.length&&p[0]===a[0]?Ky(p,ye(c,2)):[]}),LO=Ce(function(a){var c=rn(a),p=at(a,iT);return c=typeof c=="function"?c:t,c&&p.pop(),p.length&&p[0]===a[0]?Ky(p,t,c):[]});function FO(a,c){return a==null?"":PC.call(a,c)}function rn(a){var c=a==null?0:a.length;return c?a[c-1]:t}function IO(a,c,p){var f=a==null?0:a.length;if(!f)return-1;var h=f;return p!==t&&(h=Me(p),h=h<0?Pt(f+h,0):Zt(h,f-1)),c===c?fC(a,c,h):Iu(a,Ew,h,!0)}function CO(a,c){return a&&a.length?tE(a,Me(c)):t}var OO=Ce(zE);function zE(a,c){return a&&a.length&&c&&c.length?Xy(a,c):a}function NO(a,c,p){return a&&a.length&&c&&c.length?Xy(a,c,ye(p,2)):a}function UO(a,c,p){return a&&a.length&&c&&c.length?Xy(a,c,t,p):a}var HO=hi(function(a,c){var p=a==null?0:a.length,f=jy(a,c);return iE(a,at(c,function(h){return yi(h,p)?+h:h}).sort(dE)),f});function BO(a,c){var p=[];if(!(a&&a.length))return p;var f=-1,h=[],S=a.length;for(c=ye(c,3);++f<S;){var _=a[f];c(_,f,a)&&(p.push(_),h.push(f))}return iE(a,h),p}function TT(a){return a==null?a:FC.call(a)}function VO(a,c,p){var f=a==null?0:a.length;return f?(p&&typeof p!="number"&&sr(a,c,p)?(c=0,p=f):(c=c==null?0:Me(c),p=p===t?f:Me(p)),tn(a,c,p)):[]}function WO(a,c){return ep(a,c)}function $O(a,c,p){return tT(a,c,ye(p,2))}function jO(a,c){var p=a==null?0:a.length;if(p){var f=ep(a,c);if(f<p&&_n(a[f],c))return f}return-1}function zO(a,c){return ep(a,c,!0)}function qO(a,c,p){return tT(a,c,ye(p,2),!0)}function GO(a,c){var p=a==null?0:a.length;if(p){var f=ep(a,c,!0)-1;if(_n(a[f],c))return f}return-1}function KO(a){return a&&a.length?aE(a):[]}function QO(a,c){return a&&a.length?aE(a,ye(c,2)):[]}function YO(a){var c=a==null?0:a.length;return c?tn(a,1,c):[]}function ZO(a,c,p){return a&&a.length?(c=p||c===t?1:Me(c),tn(a,0,c<0?0:c)):[]}function XO(a,c,p){var f=a==null?0:a.length;return f?(c=p||c===t?1:Me(c),c=f-c,tn(a,c<0?0:c,f)):[]}function JO(a,c){return a&&a.length?tp(a,ye(c,3),!1,!0):[]}function eN(a,c){return a&&a.length?tp(a,ye(c,3)):[]}var tN=Ce(function(a){return Vi(Wt(a,1,Tt,!0))}),rN=Ce(function(a){var c=rn(a);return Tt(c)&&(c=t),Vi(Wt(a,1,Tt,!0),ye(c,2))}),nN=Ce(function(a){var c=rn(a);return c=typeof c=="function"?c:t,Vi(Wt(a,1,Tt,!0),t,c)});function iN(a){return a&&a.length?Vi(a):[]}function oN(a,c){return a&&a.length?Vi(a,ye(c,2)):[]}function aN(a,c){return c=typeof c=="function"?c:t,a&&a.length?Vi(a,t,c):[]}function xT(a){if(!(a&&a.length))return[];var c=0;return a=Ci(a,function(p){if(Tt(p))return c=Pt(p.length,c),!0}),Oy(c,function(p){return at(a,Fy(p))})}function qE(a,c){if(!(a&&a.length))return[];var p=xT(a);return c==null?p:at(p,function(f){return Lr(c,t,f)})}var sN=Ce(function(a,c){return Tt(a)?Mc(a,c):[]}),cN=Ce(function(a){return nT(Ci(a,Tt))}),lN=Ce(function(a){var c=rn(a);return Tt(c)&&(c=t),nT(Ci(a,Tt),ye(c,2))}),uN=Ce(function(a){var c=rn(a);return c=typeof c=="function"?c:t,nT(Ci(a,Tt),t,c)}),pN=Ce(xT);function mN(a,c){return uE(a||[],c||[],Dc)}function fN(a,c){return uE(a||[],c||[],Ic)}var dN=Ce(function(a){var c=a.length,p=c>1?a[c-1]:t;return p=typeof p=="function"?(a.pop(),p):t,qE(a,p)});function GE(a){var c=T(a);return c.__chain__=!0,c}function gN(a,c){return c(a),a}function up(a,c){return c(a)}var hN=hi(function(a){var c=a.length,p=c?a[0]:0,f=this.__wrapped__,h=function(S){return jy(S,a)};return c>1||this.__actions__.length||!(f instanceof We)||!yi(p)?this.thru(h):(f=f.slice(p,+p+(c?1:0)),f.__actions__.push({func:up,args:[h],thisArg:t}),new Jr(f,this.__chain__).thru(function(S){return c&&!S.length&&S.push(t),S}))});function yN(){return GE(this)}function TN(){return new Jr(this.value(),this.__chain__)}function xN(){this.__values__===t&&(this.__values__=s_(this.value()));var a=this.__index__>=this.__values__.length,c=a?t:this.__values__[this.__index__++];return{done:a,value:c}}function SN(){return this}function vN(a){for(var c,p=this;p instanceof Qu;){var f=BE(p);f.__index__=0,f.__values__=t,c?h.__wrapped__=f:c=f;var h=f;p=p.__wrapped__}return h.__wrapped__=a,c}function bN(){var a=this.__wrapped__;if(a instanceof We){var c=a;return this.__actions__.length&&(c=new We(this)),c=c.reverse(),c.__actions__.push({func:up,args:[TT],thisArg:t}),new Jr(c,this.__chain__)}return this.thru(TT)}function wN(){return lE(this.__wrapped__,this.__actions__)}var EN=rp(function(a,c,p){Xe.call(a,p)?++a[p]:di(a,p,1)});function _N(a,c,p){var f=ke(a)?bw:g1;return p&&sr(a,c,p)&&(c=t),f(a,ye(c,3))}function RN(a,c){var p=ke(a)?Ci:qw;return p(a,ye(c,3))}var kN=SE(VE),AN=SE(WE);function PN(a,c){return Wt(pp(a,c),1)}function DN(a,c){return Wt(pp(a,c),F)}function MN(a,c,p){return p=p===t?1:Me(p),Wt(pp(a,c),p)}function KE(a,c){var p=ke(a)?Zr:Bi;return p(a,ye(c,3))}function QE(a,c){var p=ke(a)?YI:zw;return p(a,ye(c,3))}var LN=rp(function(a,c,p){Xe.call(a,p)?a[p].push(c):di(a,p,[c])});function FN(a,c,p,f){a=Sr(a)?a:Ba(a),p=p&&!f?Me(p):0;var h=a.length;return p<0&&(p=Pt(h+p,0)),hp(a)?p<=h&&a.indexOf(c,p)>-1:!!h&&Pa(a,c,p)>-1}var IN=Ce(function(a,c,p){var f=-1,h=typeof c=="function",S=Sr(a)?B(a.length):[];return Bi(a,function(_){S[++f]=h?Lr(c,_,p):Lc(_,c,p)}),S}),CN=rp(function(a,c,p){di(a,p,c)});function pp(a,c){var p=ke(a)?at:Xw;return p(a,ye(c,3))}function ON(a,c,p,f){return a==null?[]:(ke(c)||(c=c==null?[]:[c]),p=f?t:p,ke(p)||(p=p==null?[]:[p]),rE(a,c,p))}var NN=rp(function(a,c,p){a[p?0:1].push(c)},function(){return[[],[]]});function UN(a,c,p){var f=ke(a)?My:Rw,h=arguments.length<3;return f(a,ye(c,4),p,h,Bi)}function HN(a,c,p){var f=ke(a)?ZI:Rw,h=arguments.length<3;return f(a,ye(c,4),p,h,zw)}function BN(a,c){var p=ke(a)?Ci:qw;return p(a,dp(ye(c,3)))}function VN(a){var c=ke(a)?Vw:F1;return c(a)}function WN(a,c,p){(p?sr(a,c,p):c===t)?c=1:c=Me(c);var f=ke(a)?u1:I1;return f(a,c)}function $N(a){var c=ke(a)?p1:O1;return c(a)}function jN(a){if(a==null)return 0;if(Sr(a))return hp(a)?Ma(a):a.length;var c=Xt(a);return c==vn||c==bn?a.size:Yy(a).length}function zN(a,c,p){var f=ke(a)?Ly:N1;return p&&sr(a,c,p)&&(c=t),f(a,ye(c,3))}var qN=Ce(function(a,c){if(a==null)return[];var p=c.length;return p>1&&sr(a,c[0],c[1])?c=[]:p>2&&sr(c[0],c[1],c[2])&&(c=[c[0]]),rE(a,Wt(c,1),[])}),mp=RC||function(){return Ft.Date.now()};function GN(a,c){if(typeof c!="function")throw new Xr(i);return a=Me(a),function(){if(--a<1)return c.apply(this,arguments)}}function YE(a,c,p){return c=p?t:c,c=a&&c==null?a.length:c,gi(a,de,t,t,t,t,c)}function ZE(a,c){var p;if(typeof c!="function")throw new Xr(i);return a=Me(a),function(){return--a>0&&(p=c.apply(this,arguments)),a<=1&&(c=t),p}}var ST=Ce(function(a,c,p){var f=E;if(p.length){var h=Ni(p,Ua(ST));f|=ne}return gi(a,f,c,p,h)}),XE=Ce(function(a,c,p){var f=E|w;if(p.length){var h=Ni(p,Ua(XE));f|=ne}return gi(c,f,a,p,h)});function JE(a,c,p){c=p?t:c;var f=gi(a,V,t,t,t,t,t,c);return f.placeholder=JE.placeholder,f}function e_(a,c,p){c=p?t:c;var f=gi(a,q,t,t,t,t,t,c);return f.placeholder=e_.placeholder,f}function t_(a,c,p){var f,h,S,_,R,M,G=0,K=!1,ee=!1,oe=!0;if(typeof a!="function")throw new Xr(i);c=nn(c)||0,ut(p)&&(K=!!p.leading,ee="maxWait"in p,S=ee?Pt(nn(p.maxWait)||0,c):S,oe="trailing"in p?!!p.trailing:oe);function fe(xt){var Rn=f,Si=h;return f=h=t,G=xt,_=a.apply(Si,Rn),_}function xe(xt){return G=xt,R=Nc(He,c),K?fe(xt):_}function Fe(xt){var Rn=xt-M,Si=xt-G,S_=c-Rn;return ee?Zt(S_,S-Si):S_}function Se(xt){var Rn=xt-M,Si=xt-G;return M===t||Rn>=c||Rn<0||ee&&Si>=S}function He(){var xt=mp();if(Se(xt))return $e(xt);R=Nc(He,Fe(xt))}function $e(xt){return R=t,oe&&f?fe(xt):(f=h=t,_)}function Or(){R!==t&&pE(R),G=0,f=M=h=R=t}function cr(){return R===t?_:$e(mp())}function Nr(){var xt=mp(),Rn=Se(xt);if(f=arguments,h=this,M=xt,Rn){if(R===t)return xe(M);if(ee)return pE(R),R=Nc(He,c),fe(M)}return R===t&&(R=Nc(He,c)),_}return Nr.cancel=Or,Nr.flush=cr,Nr}var KN=Ce(function(a,c){return jw(a,1,c)}),QN=Ce(function(a,c,p){return jw(a,nn(c)||0,p)});function YN(a){return gi(a,Et)}function fp(a,c){if(typeof a!="function"||c!=null&&typeof c!="function")throw new Xr(i);var p=function(){var f=arguments,h=c?c.apply(this,f):f[0],S=p.cache;if(S.has(h))return S.get(h);var _=a.apply(this,f);return p.cache=S.set(h,_)||S,_};return p.cache=new(fp.Cache||fi),p}fp.Cache=fi;function dp(a){if(typeof a!="function")throw new Xr(i);return function(){var c=arguments;switch(c.length){case 0:return!a.call(this);case 1:return!a.call(this,c[0]);case 2:return!a.call(this,c[0],c[1]);case 3:return!a.call(this,c[0],c[1],c[2])}return!a.apply(this,c)}}function ZN(a){return ZE(2,a)}var XN=U1(function(a,c){c=c.length==1&&ke(c[0])?at(c[0],Fr(ye())):at(Wt(c,1),Fr(ye()));var p=c.length;return Ce(function(f){for(var h=-1,S=Zt(f.length,p);++h<S;)f[h]=c[h].call(this,f[h]);return Lr(a,this,f)})}),vT=Ce(function(a,c){var p=Ni(c,Ua(vT));return gi(a,ne,t,c,p)}),r_=Ce(function(a,c){var p=Ni(c,Ua(r_));return gi(a,se,t,c,p)}),JN=hi(function(a,c){return gi(a,ve,t,t,t,c)});function eU(a,c){if(typeof a!="function")throw new Xr(i);return c=c===t?c:Me(c),Ce(a,c)}function tU(a,c){if(typeof a!="function")throw new Xr(i);return c=c==null?0:Pt(Me(c),0),Ce(function(p){var f=p[c],h=$i(p,0,c);return f&&Oi(h,f),Lr(a,this,h)})}function rU(a,c,p){var f=!0,h=!0;if(typeof a!="function")throw new Xr(i);return ut(p)&&(f="leading"in p?!!p.leading:f,h="trailing"in p?!!p.trailing:h),t_(a,c,{leading:f,maxWait:c,trailing:h})}function nU(a){return YE(a,1)}function iU(a,c){return vT(oT(c),a)}function oU(){if(!arguments.length)return[];var a=arguments[0];return ke(a)?a:[a]}function aU(a){return en(a,g)}function sU(a,c){return c=typeof c=="function"?c:t,en(a,g,c)}function cU(a){return en(a,m|g)}function lU(a,c){return c=typeof c=="function"?c:t,en(a,m|g,c)}function uU(a,c){return c==null||$w(a,c,It(c))}function _n(a,c){return a===c||a!==a&&c!==c}var pU=ap(Gy),mU=ap(function(a,c){return a>=c}),Co=Qw(function(){return arguments}())?Qw:function(a){return gt(a)&&Xe.call(a,"callee")&&!Cw.call(a,"callee")},ke=B.isArray,fU=hw?Fr(hw):v1;function Sr(a){return a!=null&&gp(a.length)&&!Ti(a)}function Tt(a){return gt(a)&&Sr(a)}function dU(a){return a===!0||a===!1||gt(a)&&ar(a)==Vt}var ji=AC||LT,gU=yw?Fr(yw):b1;function hU(a){return gt(a)&&a.nodeType===1&&!Uc(a)}function yU(a){if(a==null)return!0;if(Sr(a)&&(ke(a)||typeof a=="string"||typeof a.splice=="function"||ji(a)||Ha(a)||Co(a)))return!a.length;var c=Xt(a);if(c==vn||c==bn)return!a.size;if(Oc(a))return!Yy(a).length;for(var p in a)if(Xe.call(a,p))return!1;return!0}function TU(a,c){return Fc(a,c)}function xU(a,c,p){p=typeof p=="function"?p:t;var f=p?p(a,c):t;return f===t?Fc(a,c,t,p):!!f}function bT(a){if(!gt(a))return!1;var c=ar(a);return c==ui||c==Ro||typeof a.message=="string"&&typeof a.name=="string"&&!Uc(a)}function SU(a){return typeof a=="number"&&Nw(a)}function Ti(a){if(!ut(a))return!1;var c=ar(a);return c==Ra||c==jb||c==dt||c==jF}function n_(a){return typeof a=="number"&&a==Me(a)}function gp(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=N}function ut(a){var c=typeof a;return a!=null&&(c=="object"||c=="function")}function gt(a){return a!=null&&typeof a=="object"}var i_=Tw?Fr(Tw):E1;function vU(a,c){return a===c||Qy(a,c,mT(c))}function bU(a,c,p){return p=typeof p=="function"?p:t,Qy(a,c,mT(c),p)}function wU(a){return o_(a)&&a!=+a}function EU(a){if(sO(a))throw new Re(n);return Yw(a)}function _U(a){return a===null}function RU(a){return a==null}function o_(a){return typeof a=="number"||gt(a)&&ar(a)==xc}function Uc(a){if(!gt(a)||ar(a)!=pi)return!1;var c=Wu(a);if(c===null)return!0;var p=Xe.call(c,"constructor")&&c.constructor;return typeof p=="function"&&p instanceof p&&Uu.call(p)==bC}var wT=xw?Fr(xw):_1;function kU(a){return n_(a)&&a>=-N&&a<=N}var a_=Sw?Fr(Sw):R1;function hp(a){return typeof a=="string"||!ke(a)&&gt(a)&&ar(a)==vc}function Cr(a){return typeof a=="symbol"||gt(a)&&ar(a)==Pu}var Ha=vw?Fr(vw):k1;function AU(a){return a===t}function PU(a){return gt(a)&&Xt(a)==bc}function DU(a){return gt(a)&&ar(a)==qF}var MU=ap(Zy),LU=ap(function(a,c){return a<=c});function s_(a){if(!a)return[];if(Sr(a))return hp(a)?wn(a):xr(a);if(_c&&a[_c])return uC(a[_c]());var c=Xt(a),p=c==vn?Uy:c==bn?Cu:Ba;return p(a)}function xi(a){if(!a)return a===0?a:0;if(a=nn(a),a===F||a===-F){var c=a<0?-1:1;return c*j}return a===a?a:0}function Me(a){var c=xi(a),p=c%1;return c===c?p?c-p:c:0}function c_(a){return a?Mo(Me(a),0,Q):0}function nn(a){if(typeof a=="number")return a;if(Cr(a))return X;if(ut(a)){var c=typeof a.valueOf=="function"?a.valueOf():a;a=ut(c)?c+"":c}if(typeof a!="string")return a===0?a:+a;a=kw(a);var p=fI.test(a);return p||gI.test(a)?GI(a.slice(2),p?2:8):mI.test(a)?X:+a}function l_(a){return Vn(a,vr(a))}function FU(a){return a?Mo(Me(a),-N,N):a===0?a:0}function Ze(a){return a==null?"":Ir(a)}var IU=Oa(function(a,c){if(Oc(c)||Sr(c)){Vn(c,It(c),a);return}for(var p in c)Xe.call(c,p)&&Dc(a,p,c[p])}),u_=Oa(function(a,c){Vn(c,vr(c),a)}),yp=Oa(function(a,c,p,f){Vn(c,vr(c),a,f)}),CU=Oa(function(a,c,p,f){Vn(c,It(c),a,f)}),OU=hi(jy);function NU(a,c){var p=Ca(a);return c==null?p:Ww(p,c)}var UU=Ce(function(a,c){a=tt(a);var p=-1,f=c.length,h=f>2?c[2]:t;for(h&&sr(c[0],c[1],h)&&(f=1);++p<f;)for(var S=c[p],_=vr(S),R=-1,M=_.length;++R<M;){var G=_[R],K=a[G];(K===t||_n(K,La[G])&&!Xe.call(a,G))&&(a[G]=S[G])}return a}),HU=Ce(function(a){return a.push(t,kE),Lr(p_,t,a)});function BU(a,c){return ww(a,ye(c,3),Bn)}function VU(a,c){return ww(a,ye(c,3),qy)}function WU(a,c){return a==null?a:zy(a,ye(c,3),vr)}function $U(a,c){return a==null?a:Gw(a,ye(c,3),vr)}function jU(a,c){return a&&Bn(a,ye(c,3))}function zU(a,c){return a&&qy(a,ye(c,3))}function qU(a){return a==null?[]:Xu(a,It(a))}function GU(a){return a==null?[]:Xu(a,vr(a))}function ET(a,c,p){var f=a==null?t:Lo(a,c);return f===t?p:f}function KU(a,c){return a!=null&&DE(a,c,y1)}function _T(a,c){return a!=null&&DE(a,c,T1)}var QU=bE(function(a,c,p){c!=null&&typeof c.toString!="function"&&(c=Hu.call(c)),a[c]=p},kT(br)),YU=bE(function(a,c,p){c!=null&&typeof c.toString!="function"&&(c=Hu.call(c)),Xe.call(a,c)?a[c].push(p):a[c]=[p]},ye),ZU=Ce(Lc);function It(a){return Sr(a)?Bw(a):Yy(a)}function vr(a){return Sr(a)?Bw(a,!0):A1(a)}function XU(a,c){var p={};return c=ye(c,3),Bn(a,function(f,h,S){di(p,c(f,h,S),f)}),p}function JU(a,c){var p={};return c=ye(c,3),Bn(a,function(f,h,S){di(p,h,c(f,h,S))}),p}var eH=Oa(function(a,c,p){Ju(a,c,p)}),p_=Oa(function(a,c,p,f){Ju(a,c,p,f)}),tH=hi(function(a,c){var p={};if(a==null)return p;var f=!1;c=at(c,function(S){return S=Wi(S,a),f||(f=S.length>1),S}),Vn(a,uT(a),p),f&&(p=en(p,m|d|g,Q1));for(var h=c.length;h--;)rT(p,c[h]);return p});function rH(a,c){return m_(a,dp(ye(c)))}var nH=hi(function(a,c){return a==null?{}:D1(a,c)});function m_(a,c){if(a==null)return{};var p=at(uT(a),function(f){return[f]});return c=ye(c),nE(a,p,function(f,h){return c(f,h[0])})}function iH(a,c,p){c=Wi(c,a);var f=-1,h=c.length;for(h||(h=1,a=t);++f<h;){var S=a==null?t:a[Wn(c[f])];S===t&&(f=h,S=p),a=Ti(S)?S.call(a):S}return a}function oH(a,c,p){return a==null?a:Ic(a,c,p)}function aH(a,c,p,f){return f=typeof f=="function"?f:t,a==null?a:Ic(a,c,p,f)}var f_=_E(It),d_=_E(vr);function sH(a,c,p){var f=ke(a),h=f||ji(a)||Ha(a);if(c=ye(c,4),p==null){var S=a&&a.constructor;h?p=f?new S:[]:ut(a)?p=Ti(S)?Ca(Wu(a)):{}:p={}}return(h?Zr:Bn)(a,function(_,R,M){return c(p,_,R,M)}),p}function cH(a,c){return a==null?!0:rT(a,c)}function lH(a,c,p){return a==null?a:cE(a,c,oT(p))}function uH(a,c,p,f){return f=typeof f=="function"?f:t,a==null?a:cE(a,c,oT(p),f)}function Ba(a){return a==null?[]:Ny(a,It(a))}function pH(a){return a==null?[]:Ny(a,vr(a))}function mH(a,c,p){return p===t&&(p=c,c=t),p!==t&&(p=nn(p),p=p===p?p:0),c!==t&&(c=nn(c),c=c===c?c:0),Mo(nn(a),c,p)}function fH(a,c,p){return c=xi(c),p===t?(p=c,c=0):p=xi(p),a=nn(a),x1(a,c,p)}function dH(a,c,p){if(p&&typeof p!="boolean"&&sr(a,c,p)&&(c=p=t),p===t&&(typeof c=="boolean"?(p=c,c=t):typeof a=="boolean"&&(p=a,a=t)),a===t&&c===t?(a=0,c=1):(a=xi(a),c===t?(c=a,a=0):c=xi(c)),a>c){var f=a;a=c,c=f}if(p||a%1||c%1){var h=Uw();return Zt(a+h*(c-a+qI("1e-"+((h+"").length-1))),c)}return Jy(a,c)}var gH=Na(function(a,c,p){return c=c.toLowerCase(),a+(p?g_(c):c)});function g_(a){return RT(Ze(a).toLowerCase())}function h_(a){return a=Ze(a),a&&a.replace(yI,oC).replace(OI,"")}function hH(a,c,p){a=Ze(a),c=Ir(c);var f=a.length;p=p===t?f:Mo(Me(p),0,f);var h=p;return p-=c.length,p>=0&&a.slice(p,h)==c}function yH(a){return a=Ze(a),a&&ZF.test(a)?a.replace(Gb,aC):a}function TH(a){return a=Ze(a),a&&nI.test(a)?a.replace(vy,"\\$&"):a}var xH=Na(function(a,c,p){return a+(p?"-":"")+c.toLowerCase()}),SH=Na(function(a,c,p){return a+(p?" ":"")+c.toLowerCase()}),vH=xE("toLowerCase");function bH(a,c,p){a=Ze(a),c=Me(c);var f=c?Ma(a):0;if(!c||f>=c)return a;var h=(c-f)/2;return op(qu(h),p)+a+op(zu(h),p)}function wH(a,c,p){a=Ze(a),c=Me(c);var f=c?Ma(a):0;return c&&f<c?a+op(c-f,p):a}function EH(a,c,p){a=Ze(a),c=Me(c);var f=c?Ma(a):0;return c&&f<c?op(c-f,p)+a:a}function _H(a,c,p){return p||c==null?c=0:c&&(c=+c),LC(Ze(a).replace(by,""),c||0)}function RH(a,c,p){return(p?sr(a,c,p):c===t)?c=1:c=Me(c),eT(Ze(a),c)}function kH(){var a=arguments,c=Ze(a[0]);return a.length<3?c:c.replace(a[1],a[2])}var AH=Na(function(a,c,p){return a+(p?"_":"")+c.toLowerCase()});function PH(a,c,p){return p&&typeof p!="number"&&sr(a,c,p)&&(c=p=t),p=p===t?Q:p>>>0,p?(a=Ze(a),a&&(typeof c=="string"||c!=null&&!wT(c))&&(c=Ir(c),!c&&Da(a))?$i(wn(a),0,p):a.split(c,p)):[]}var DH=Na(function(a,c,p){return a+(p?" ":"")+RT(c)});function MH(a,c,p){return a=Ze(a),p=p==null?0:Mo(Me(p),0,a.length),c=Ir(c),a.slice(p,p+c.length)==c}function LH(a,c,p){var f=T.templateSettings;p&&sr(a,c,p)&&(c=t),a=Ze(a),c=yp({},c,f,RE);var h=yp({},c.imports,f.imports,RE),S=It(h),_=Ny(h,S),R,M,G=0,K=c.interpolate||Du,ee="__p += '",oe=Hy((c.escape||Du).source+"|"+K.source+"|"+(K===Kb?pI:Du).source+"|"+(c.evaluate||Du).source+"|$","g"),fe="//# sourceURL="+(Xe.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++VI+"]")+`
`;a.replace(oe,function(Se,He,$e,Or,cr,Nr){return $e||($e=Or),ee+=a.slice(G,Nr).replace(TI,sC),He&&(R=!0,ee+=`' +
__e(`+He+`) +
'`),cr&&(M=!0,ee+=`';
`+cr+`;
__p += '`),$e&&(ee+=`' +
((__t = (`+$e+`)) == null ? '' : __t) +
'`),G=Nr+Se.length,Se}),ee+=`';
`;var xe=Xe.call(c,"variable")&&c.variable;if(!xe)ee=`with (obj) {
`+ee+`
}
`;else if(lI.test(xe))throw new Re(o);ee=(M?ee.replace(GF,""):ee).replace(KF,"$1").replace(QF,"$1;"),ee="function("+(xe||"obj")+`) {
`+(xe?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(R?", __e = _.escape":"")+(M?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ee+`return __p
}`;var Fe=T_(function(){return Qe(S,fe+"return "+ee).apply(t,_)});if(Fe.source=ee,bT(Fe))throw Fe;return Fe}function FH(a){return Ze(a).toLowerCase()}function IH(a){return Ze(a).toUpperCase()}function CH(a,c,p){if(a=Ze(a),a&&(p||c===t))return kw(a);if(!a||!(c=Ir(c)))return a;var f=wn(a),h=wn(c),S=Aw(f,h),_=Pw(f,h)+1;return $i(f,S,_).join("")}function OH(a,c,p){if(a=Ze(a),a&&(p||c===t))return a.slice(0,Mw(a)+1);if(!a||!(c=Ir(c)))return a;var f=wn(a),h=Pw(f,wn(c))+1;return $i(f,0,h).join("")}function NH(a,c,p){if(a=Ze(a),a&&(p||c===t))return a.replace(by,"");if(!a||!(c=Ir(c)))return a;var f=wn(a),h=Aw(f,wn(c));return $i(f,h).join("")}function UH(a,c){var p=yr,f=Tr;if(ut(c)){var h="separator"in c?c.separator:h;p="length"in c?Me(c.length):p,f="omission"in c?Ir(c.omission):f}a=Ze(a);var S=a.length;if(Da(a)){var _=wn(a);S=_.length}if(p>=S)return a;var R=p-Ma(f);if(R<1)return f;var M=_?$i(_,0,R).join(""):a.slice(0,R);if(h===t)return M+f;if(_&&(R+=M.length-R),wT(h)){if(a.slice(R).search(h)){var G,K=M;for(h.global||(h=Hy(h.source,Ze(Qb.exec(h))+"g")),h.lastIndex=0;G=h.exec(K);)var ee=G.index;M=M.slice(0,ee===t?R:ee)}}else if(a.indexOf(Ir(h),R)!=R){var oe=M.lastIndexOf(h);oe>-1&&(M=M.slice(0,oe))}return M+f}function HH(a){return a=Ze(a),a&&YF.test(a)?a.replace(qb,dC):a}var BH=Na(function(a,c,p){return a+(p?" ":"")+c.toUpperCase()}),RT=xE("toUpperCase");function y_(a,c,p){return a=Ze(a),c=p?t:c,c===t?lC(a)?yC(a):eC(a):a.match(c)||[]}var T_=Ce(function(a,c){try{return Lr(a,t,c)}catch(p){return bT(p)?p:new Re(p)}}),VH=hi(function(a,c){return Zr(c,function(p){p=Wn(p),di(a,p,ST(a[p],a))}),a});function WH(a){var c=a==null?0:a.length,p=ye();return a=c?at(a,function(f){if(typeof f[1]!="function")throw new Xr(i);return[p(f[0]),f[1]]}):[],Ce(function(f){for(var h=-1;++h<c;){var S=a[h];if(Lr(S[0],this,f))return Lr(S[1],this,f)}})}function $H(a){return d1(en(a,m))}function kT(a){return function(){return a}}function jH(a,c){return a==null||a!==a?c:a}var zH=vE(),qH=vE(!0);function br(a){return a}function AT(a){return Zw(typeof a=="function"?a:en(a,m))}function GH(a){return Jw(en(a,m))}function KH(a,c){return eE(a,en(c,m))}var QH=Ce(function(a,c){return function(p){return Lc(p,a,c)}}),YH=Ce(function(a,c){return function(p){return Lc(a,p,c)}});function PT(a,c,p){var f=It(c),h=Xu(c,f);p==null&&!(ut(c)&&(h.length||!f.length))&&(p=c,c=a,a=this,h=Xu(c,It(c)));var S=!(ut(p)&&"chain"in p)||!!p.chain,_=Ti(a);return Zr(h,function(R){var M=c[R];a[R]=M,_&&(a.prototype[R]=function(){var G=this.__chain__;if(S||G){var K=a(this.__wrapped__),ee=K.__actions__=xr(this.__actions__);return ee.push({func:M,args:arguments,thisArg:a}),K.__chain__=G,K}return M.apply(a,Oi([this.value()],arguments))})}),a}function ZH(){return Ft._===this&&(Ft._=wC),this}function DT(){}function XH(a){return a=Me(a),Ce(function(c){return tE(c,a)})}var JH=sT(at),e2=sT(bw),t2=sT(Ly);function x_(a){return dT(a)?Fy(Wn(a)):M1(a)}function r2(a){return function(c){return a==null?t:Lo(a,c)}}var n2=wE(),i2=wE(!0);function MT(){return[]}function LT(){return!1}function o2(){return{}}function a2(){return""}function s2(){return!0}function c2(a,c){if(a=Me(a),a<1||a>N)return[];var p=Q,f=Zt(a,Q);c=ye(c),a-=Q;for(var h=Oy(f,c);++p<a;)c(p);return h}function l2(a){return ke(a)?at(a,Wn):Cr(a)?[a]:xr(HE(Ze(a)))}function u2(a){var c=++vC;return Ze(a)+c}var p2=ip(function(a,c){return a+c},0),m2=cT("ceil"),f2=ip(function(a,c){return a/c},1),d2=cT("floor");function g2(a){return a&&a.length?Zu(a,br,Gy):t}function h2(a,c){return a&&a.length?Zu(a,ye(c,2),Gy):t}function y2(a){return _w(a,br)}function T2(a,c){return _w(a,ye(c,2))}function x2(a){return a&&a.length?Zu(a,br,Zy):t}function S2(a,c){return a&&a.length?Zu(a,ye(c,2),Zy):t}var v2=ip(function(a,c){return a*c},1),b2=cT("round"),w2=ip(function(a,c){return a-c},0);function E2(a){return a&&a.length?Cy(a,br):0}function _2(a,c){return a&&a.length?Cy(a,ye(c,2)):0}return T.after=GN,T.ary=YE,T.assign=IU,T.assignIn=u_,T.assignInWith=yp,T.assignWith=CU,T.at=OU,T.before=ZE,T.bind=ST,T.bindAll=VH,T.bindKey=XE,T.castArray=oU,T.chain=GE,T.chunk=dO,T.compact=gO,T.concat=hO,T.cond=WH,T.conforms=$H,T.constant=kT,T.countBy=EN,T.create=NU,T.curry=JE,T.curryRight=e_,T.debounce=t_,T.defaults=UU,T.defaultsDeep=HU,T.defer=KN,T.delay=QN,T.difference=yO,T.differenceBy=TO,T.differenceWith=xO,T.drop=SO,T.dropRight=vO,T.dropRightWhile=bO,T.dropWhile=wO,T.fill=EO,T.filter=RN,T.flatMap=PN,T.flatMapDeep=DN,T.flatMapDepth=MN,T.flatten=$E,T.flattenDeep=_O,T.flattenDepth=RO,T.flip=YN,T.flow=zH,T.flowRight=qH,T.fromPairs=kO,T.functions=qU,T.functionsIn=GU,T.groupBy=LN,T.initial=PO,T.intersection=DO,T.intersectionBy=MO,T.intersectionWith=LO,T.invert=QU,T.invertBy=YU,T.invokeMap=IN,T.iteratee=AT,T.keyBy=CN,T.keys=It,T.keysIn=vr,T.map=pp,T.mapKeys=XU,T.mapValues=JU,T.matches=GH,T.matchesProperty=KH,T.memoize=fp,T.merge=eH,T.mergeWith=p_,T.method=QH,T.methodOf=YH,T.mixin=PT,T.negate=dp,T.nthArg=XH,T.omit=tH,T.omitBy=rH,T.once=ZN,T.orderBy=ON,T.over=JH,T.overArgs=XN,T.overEvery=e2,T.overSome=t2,T.partial=vT,T.partialRight=r_,T.partition=NN,T.pick=nH,T.pickBy=m_,T.property=x_,T.propertyOf=r2,T.pull=OO,T.pullAll=zE,T.pullAllBy=NO,T.pullAllWith=UO,T.pullAt=HO,T.range=n2,T.rangeRight=i2,T.rearg=JN,T.reject=BN,T.remove=BO,T.rest=eU,T.reverse=TT,T.sampleSize=WN,T.set=oH,T.setWith=aH,T.shuffle=$N,T.slice=VO,T.sortBy=qN,T.sortedUniq=KO,T.sortedUniqBy=QO,T.split=PH,T.spread=tU,T.tail=YO,T.take=ZO,T.takeRight=XO,T.takeRightWhile=JO,T.takeWhile=eN,T.tap=gN,T.throttle=rU,T.thru=up,T.toArray=s_,T.toPairs=f_,T.toPairsIn=d_,T.toPath=l2,T.toPlainObject=l_,T.transform=sH,T.unary=nU,T.union=tN,T.unionBy=rN,T.unionWith=nN,T.uniq=iN,T.uniqBy=oN,T.uniqWith=aN,T.unset=cH,T.unzip=xT,T.unzipWith=qE,T.update=lH,T.updateWith=uH,T.values=Ba,T.valuesIn=pH,T.without=sN,T.words=y_,T.wrap=iU,T.xor=cN,T.xorBy=lN,T.xorWith=uN,T.zip=pN,T.zipObject=mN,T.zipObjectDeep=fN,T.zipWith=dN,T.entries=f_,T.entriesIn=d_,T.extend=u_,T.extendWith=yp,PT(T,T),T.add=p2,T.attempt=T_,T.camelCase=gH,T.capitalize=g_,T.ceil=m2,T.clamp=mH,T.clone=aU,T.cloneDeep=cU,T.cloneDeepWith=lU,T.cloneWith=sU,T.conformsTo=uU,T.deburr=h_,T.defaultTo=jH,T.divide=f2,T.endsWith=hH,T.eq=_n,T.escape=yH,T.escapeRegExp=TH,T.every=_N,T.find=kN,T.findIndex=VE,T.findKey=BU,T.findLast=AN,T.findLastIndex=WE,T.findLastKey=VU,T.floor=d2,T.forEach=KE,T.forEachRight=QE,T.forIn=WU,T.forInRight=$U,T.forOwn=jU,T.forOwnRight=zU,T.get=ET,T.gt=pU,T.gte=mU,T.has=KU,T.hasIn=_T,T.head=jE,T.identity=br,T.includes=FN,T.indexOf=AO,T.inRange=fH,T.invoke=ZU,T.isArguments=Co,T.isArray=ke,T.isArrayBuffer=fU,T.isArrayLike=Sr,T.isArrayLikeObject=Tt,T.isBoolean=dU,T.isBuffer=ji,T.isDate=gU,T.isElement=hU,T.isEmpty=yU,T.isEqual=TU,T.isEqualWith=xU,T.isError=bT,T.isFinite=SU,T.isFunction=Ti,T.isInteger=n_,T.isLength=gp,T.isMap=i_,T.isMatch=vU,T.isMatchWith=bU,T.isNaN=wU,T.isNative=EU,T.isNil=RU,T.isNull=_U,T.isNumber=o_,T.isObject=ut,T.isObjectLike=gt,T.isPlainObject=Uc,T.isRegExp=wT,T.isSafeInteger=kU,T.isSet=a_,T.isString=hp,T.isSymbol=Cr,T.isTypedArray=Ha,T.isUndefined=AU,T.isWeakMap=PU,T.isWeakSet=DU,T.join=FO,T.kebabCase=xH,T.last=rn,T.lastIndexOf=IO,T.lowerCase=SH,T.lowerFirst=vH,T.lt=MU,T.lte=LU,T.max=g2,T.maxBy=h2,T.mean=y2,T.meanBy=T2,T.min=x2,T.minBy=S2,T.stubArray=MT,T.stubFalse=LT,T.stubObject=o2,T.stubString=a2,T.stubTrue=s2,T.multiply=v2,T.nth=CO,T.noConflict=ZH,T.noop=DT,T.now=mp,T.pad=bH,T.padEnd=wH,T.padStart=EH,T.parseInt=_H,T.random=dH,T.reduce=UN,T.reduceRight=HN,T.repeat=RH,T.replace=kH,T.result=iH,T.round=b2,T.runInContext=P,T.sample=VN,T.size=jN,T.snakeCase=AH,T.some=zN,T.sortedIndex=WO,T.sortedIndexBy=$O,T.sortedIndexOf=jO,T.sortedLastIndex=zO,T.sortedLastIndexBy=qO,T.sortedLastIndexOf=GO,T.startCase=DH,T.startsWith=MH,T.subtract=w2,T.sum=E2,T.sumBy=_2,T.template=LH,T.times=c2,T.toFinite=xi,T.toInteger=Me,T.toLength=c_,T.toLower=FH,T.toNumber=nn,T.toSafeInteger=FU,T.toString=Ze,T.toUpper=IH,T.trim=CH,T.trimEnd=OH,T.trimStart=NH,T.truncate=UH,T.unescape=HH,T.uniqueId=u2,T.upperCase=BH,T.upperFirst=RT,T.each=KE,T.eachRight=QE,T.first=jE,PT(T,function(){var a={};return Bn(T,function(c,p){Xe.call(T.prototype,p)||(a[p]=c)}),a}(),{chain:!1}),T.VERSION=e,Zr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){T[a].placeholder=T}),Zr(["drop","take"],function(a,c){We.prototype[a]=function(p){p=p===t?1:Pt(Me(p),0);var f=this.__filtered__&&!c?new We(this):this.clone();return f.__filtered__?f.__takeCount__=Zt(p,f.__takeCount__):f.__views__.push({size:Zt(p,Q),type:a+(f.__dir__<0?"Right":"")}),f},We.prototype[a+"Right"]=function(p){return this.reverse()[a](p).reverse()}}),Zr(["filter","map","takeWhile"],function(a,c){var p=c+1,f=p==A||p==Z;We.prototype[a]=function(h){var S=this.clone();return S.__iteratees__.push({iteratee:ye(h,3),type:p}),S.__filtered__=S.__filtered__||f,S}}),Zr(["head","last"],function(a,c){var p="take"+(c?"Right":"");We.prototype[a]=function(){return this[p](1).value()[0]}}),Zr(["initial","tail"],function(a,c){var p="drop"+(c?"":"Right");We.prototype[a]=function(){return this.__filtered__?new We(this):this[p](1)}}),We.prototype.compact=function(){return this.filter(br)},We.prototype.find=function(a){return this.filter(a).head()},We.prototype.findLast=function(a){return this.reverse().find(a)},We.prototype.invokeMap=Ce(function(a,c){return typeof a=="function"?new We(this):this.map(function(p){return Lc(p,a,c)})}),We.prototype.reject=function(a){return this.filter(dp(ye(a)))},We.prototype.slice=function(a,c){a=Me(a);var p=this;return p.__filtered__&&(a>0||c<0)?new We(p):(a<0?p=p.takeRight(-a):a&&(p=p.drop(a)),c!==t&&(c=Me(c),p=c<0?p.dropRight(-c):p.take(c-a)),p)},We.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},We.prototype.toArray=function(){return this.take(Q)},Bn(We.prototype,function(a,c){var p=/^(?:filter|find|map|reject)|While$/.test(c),f=/^(?:head|last)$/.test(c),h=T[f?"take"+(c=="last"?"Right":""):c],S=f||/^find/.test(c);h&&(T.prototype[c]=function(){var _=this.__wrapped__,R=f?[1]:arguments,M=_ instanceof We,G=R[0],K=M||ke(_),ee=function(He){var $e=h.apply(T,Oi([He],R));return f&&oe?$e[0]:$e};K&&p&&typeof G=="function"&&G.length!=1&&(M=K=!1);var oe=this.__chain__,fe=!!this.__actions__.length,xe=S&&!oe,Fe=M&&!fe;if(!S&&K){_=Fe?_:new We(this);var Se=a.apply(_,R);return Se.__actions__.push({func:up,args:[ee],thisArg:t}),new Jr(Se,oe)}return xe&&Fe?a.apply(this,R):(Se=this.thru(ee),xe?f?Se.value()[0]:Se.value():Se)})}),Zr(["pop","push","shift","sort","splice","unshift"],function(a){var c=Ou[a],p=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",f=/^(?:pop|shift)$/.test(a);T.prototype[a]=function(){var h=arguments;if(f&&!this.__chain__){var S=this.value();return c.apply(ke(S)?S:[],h)}return this[p](function(_){return c.apply(ke(_)?_:[],h)})}}),Bn(We.prototype,function(a,c){var p=T[c];if(p){var f=p.name+"";Xe.call(Ia,f)||(Ia[f]=[]),Ia[f].push({name:c,func:p})}}),Ia[np(t,w).name]=[{name:"wrapper",func:t}],We.prototype.clone=HC,We.prototype.reverse=BC,We.prototype.value=VC,T.prototype.at=hN,T.prototype.chain=yN,T.prototype.commit=TN,T.prototype.next=xN,T.prototype.plant=vN,T.prototype.reverse=bN,T.prototype.toJSON=T.prototype.valueOf=T.prototype.value=wN,T.prototype.first=T.prototype.head,_c&&(T.prototype[_c]=SN),T},Ui=TC();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Ft._=Ui,define(function(){return Ui})):ko?((ko.exports=Ui)._=Ui,Ay._=Ui):Ft._=Ui}).call(nc)});var G7={};v_(G7,{default:()=>WF});module.exports=M2(G7);var FT="cursorless.command",Sp=class{constructor(e){this.baseTitle=e}get title(){return`Cursorless: ${this.baseTitle}`}},ht=class extends Sp{constructor(){super(...arguments);this.isVisible=!1}},St=class extends Sp{constructor(){super(...arguments);this.isVisible=!0}};var Q7={"cursorless.toggleDecorations":new St("Toggle decorations"),"cursorless.recomputeDecorationStyles":new St("Recompute decoration styles"),"cursorless.recordTestCase":new St("Record test case"),"cursorless.recordOneTestCaseThenPause":new St("Record one test case, then pause"),"cursorless.pauseRecording":new St("Pause test case recording"),"cursorless.resumeRecording":new St("Resume test case recording"),"cursorless.recordScopeTests.showUnimplementedFacets":new St("Bulk record unimplemented scope facets"),"cursorless.recordScopeTests.saveActiveDocument":new St("Bulk save scope tests for the active document"),"cursorless.showDocumentation":new St("Show documentation"),"cursorless.showInstallationDependencies":new St("Show installation dependencies"),"cursorless.showScopeVisualizer":new St("Show the scope visualizer"),"cursorless.hideScopeVisualizer":new St("Hide the scope visualizer"),"cursorless.analyzeCommandHistory":new St("Analyze collected command history"),"cursorless.tutorial.start":new ht("Start a tutorial"),"cursorless.tutorial.next":new St("Tutorial next"),"cursorless.tutorial.previous":new St("Tutorial previous"),"cursorless.tutorial.restart":new St("Tutorial restart"),"cursorless.tutorial.resume":new St("Tutorial resume"),"cursorless.tutorial.list":new St("Tutorial list"),"cursorless.documentationOpened":new ht("Used by talon to notify us that the docs have been opened; for use with tutorial"),"cursorless.command":new ht("The core cursorless command"),"cursorless.repeatPreviousCommand":new St("Repeat the previous Cursorless command"),"cursorless.showQuickPick":new ht("Pop up a quick pick of all cursorless commands"),"cursorless.showCheatsheet":new ht("Display the cursorless cheatsheet"),"cursorless.internal.updateCheatsheetDefaults":new ht("Update the default values of the cheatsheet payload used on the website and for local development. Be sure to run this on stock community and cursorless."),"cursorless.private.logQuickActions":new ht("Log the quick actions available at the current cursor position"),"cursorless.takeSnapshot":new ht("Take a snapshot of the current editor state"),"cursorless.keyboard.escape":new ht("Should be mapped to the escape key when using cursorless keyboard. By default, exits modal keyboard mode, but changes behaviour when Cursorless is expecting a continuation keystroke.  For example, when you type a color and Cursorless is waiting for a character, it cancels the color and switches back to modal mode."),"cursorless.keyboard.targeted.targetHat":new ht("Sets the keyboard target to the given hat"),"cursorless.keyboard.targeted.targetScope":new ht("Sets the keyboard target to the scope containing the current target"),"cursorless.keyboard.targeted.targetSelection":new ht("Sets the keyboard target to the current selection"),"cursorless.keyboard.targeted.clearTarget":new ht("Clears the current keyboard target"),"cursorless.keyboard.targeted.runActionOnTarget":new ht("Run the given action on the current keyboard target"),"cursorless.keyboard.modal.modeOn":new ht("Turn on the cursorless modal mode"),"cursorless.keyboard.modal.modeOff":new ht("Turn off the cursorless modal mode"),"cursorless.keyboard.modal.modeToggle":new ht("Toggle the cursorless modal mode"),"cursorless.keyboard.undoTarget":new ht("Undo keyboard targeting changes"),"cursorless.keyboard.redoTarget":new ht("Redo keyboard targeting changes"),"cursorless.migrateSnippets":new ht("Migrate snippets from the old Cursorless format to the new community format")};var vp=class{constructor(e,r){this.callback=e;this.debounceDelayMs=r;this.timeoutHandle=null;this.run=this.run.bind(this)}run(){this.timeoutHandle!=null&&clearTimeout(this.timeoutHandle),this.timeoutHandle=setTimeout(()=>{this.callback(),this.timeoutHandle=null},this.debounceDelayMs)}dispose(){this.timeoutHandle!=null&&clearTimeout(this.timeoutHandle)}};var bp=class extends Error{constructor(){super("Cursorless Talon version is ahead of Cursorless VSCode extension version. Please update Cursorless VSCode.")}},vt=class extends Error{constructor(e){super(`Couldn't find containing ${e}.`),this.name="NoContainingScopeError"}};var wp=class{constructor(){this.signals={prePhrase:{getVersion:async()=>null}}}async getFocusedElementType(){return this.focusedElementType}setFocusedElementType(e){this.focusedElementType=e}};var L2=typeof global=="object"&&global&&global.Object===Object&&global,Ep=L2;var F2=typeof self=="object"&&self&&self.Object===Object&&self,I2=Ep||F2||Function("return this")(),Ct=I2;var C2=Ct.Symbol,lr=C2;var w_=Object.prototype,O2=w_.hasOwnProperty,N2=w_.toString,Hc=lr?lr.toStringTag:void 0;function U2(t){var e=O2.call(t,Hc),r=t[Hc];try{t[Hc]=void 0;var n=!0}catch{}var i=N2.call(t);return n&&(e?t[Hc]=r:delete t[Hc]),i}var E_=U2;var H2=Object.prototype,B2=H2.toString;function V2(t){return B2.call(t)}var __=V2;var W2="[object Null]",$2="[object Undefined]",R_=lr?lr.toStringTag:void 0;function j2(t){return t==null?t===void 0?$2:W2:R_&&R_ in Object(t)?E_(t):__(t)}var kn=j2;function z2(t){return t!=null&&typeof t=="object"}var ur=z2;var q2="[object Symbol]";function G2(t){return typeof t=="symbol"||ur(t)&&kn(t)==q2}var Ur=G2;function K2(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var an=K2;var Q2=Array.isArray,Je=Q2;var Y2=1/0,k_=lr?lr.prototype:void 0,A_=k_?k_.toString:void 0;function P_(t){if(typeof t=="string")return t;if(Je(t))return an(t,P_)+"";if(Ur(t))return A_?A_.call(t):"";var e=t+"";return e=="0"&&1/t==-Y2?"-0":e}var D_=P_;var Z2=/\s/;function X2(t){for(var e=t.length;e--&&Z2.test(t.charAt(e)););return e}var M_=X2;var J2=/^\s+/;function eB(t){return t&&t.slice(0,M_(t)+1).replace(J2,"")}var L_=eB;function tB(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Hr=tB;var F_=NaN,rB=/^[-+]0x[0-9a-f]+$/i,nB=/^0b[01]+$/i,iB=/^0o[0-7]+$/i,oB=parseInt;function aB(t){if(typeof t=="number")return t;if(Ur(t))return F_;if(Hr(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Hr(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=L_(t);var r=nB.test(t);return r||iB.test(t)?oB(t.slice(2),r?2:8):rB.test(t)?F_:+t}var I_=aB;var C_=1/0,sB=17976931348623157e292;function cB(t){if(!t)return t===0?t:0;if(t=I_(t),t===C_||t===-C_){var e=t<0?-1:1;return e*sB}return t===t?t:0}var Va=cB;function lB(t){var e=Va(t),r=e%1;return e===e?r?e-r:e:0}var _p=lB;function uB(t){return t}var $n=uB;var pB="[object AsyncFunction]",mB="[object Function]",fB="[object GeneratorFunction]",dB="[object Proxy]";function gB(t){if(!Hr(t))return!1;var e=kn(t);return e==mB||e==fB||e==pB||e==dB}var Rp=gB;var hB=Ct["__core-js_shared__"],kp=hB;var O_=function(){var t=/[^.]+$/.exec(kp&&kp.keys&&kp.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function yB(t){return!!O_&&O_ in t}var N_=yB;var TB=Function.prototype,xB=TB.toString;function SB(t){if(t!=null){try{return xB.call(t)}catch{}try{return t+""}catch{}}return""}var vi=SB;var vB=/[\\^$.*+?()[\]{}|]/g,bB=/^\[object .+?Constructor\]$/,wB=Function.prototype,EB=Object.prototype,_B=wB.toString,RB=EB.hasOwnProperty,kB=RegExp("^"+_B.call(RB).replace(vB,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function AB(t){if(!Hr(t)||N_(t))return!1;var e=Rp(t)?kB:bB;return e.test(vi(t))}var U_=AB;function PB(t,e){return t?.[e]}var H_=PB;function DB(t,e){var r=H_(t,e);return U_(r)?r:void 0}var wr=DB;var MB=wr(Ct,"WeakMap"),Oo=MB;var LB=Oo&&new Oo,IT=LB;var B_=Object.create,FB=function(){function t(){}return function(e){if(!Hr(e))return{};if(B_)return B_(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),Ap=FB;function IB(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var V_=IB;function CB(){}var Wa=CB;var OB=4294967295;function Pp(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=OB,this.__views__=[]}Pp.prototype=Ap(Wa.prototype);Pp.prototype.constructor=Pp;var $a=Pp;function NB(){}var Dp=NB;var UB=IT?function(t){return IT.get(t)}:Dp,Mp=UB;var HB={},CT=HB;var BB=Object.prototype,VB=BB.hasOwnProperty;function WB(t){for(var e=t.name+"",r=CT[e],n=VB.call(CT,e)?r.length:0;n--;){var i=r[n],o=i.func;if(o==null||o==t)return i.name}return e}var ja=WB;function Lp(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}Lp.prototype=Ap(Wa.prototype);Lp.prototype.constructor=Lp;var zi=Lp;function $B(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var qi=$B;function jB(t){if(t instanceof $a)return t.clone();var e=new zi(t.__wrapped__,t.__chain__);return e.__actions__=qi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var W_=jB;var zB=Object.prototype,qB=zB.hasOwnProperty;function Fp(t){if(ur(t)&&!Je(t)&&!(t instanceof $a)){if(t instanceof zi)return t;if(qB.call(t,"__wrapped__"))return W_(t)}return new zi(t)}Fp.prototype=Wa.prototype;Fp.prototype.constructor=Fp;var $_=Fp;function GB(t){var e=ja(t),r=$_[e];if(typeof r!="function"||!(e in $a.prototype))return!1;if(t===r)return!0;var n=Mp(r);return!!n&&t===n[0]}var OT=GB;var KB=800,QB=16,YB=Date.now;function ZB(t){var e=0,r=0;return function(){var n=YB(),i=QB-(n-r);if(r=n,i>0){if(++e>=KB)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var j_=ZB;function XB(t){return function(){return t}}var z_=XB;var JB=function(){try{var t=wr(Object,"defineProperty");return t({},"",{}),t}catch{}}(),NT=JB;var eV=NT?function(t,e){return NT(t,"toString",{configurable:!0,enumerable:!1,value:z_(e),writable:!0})}:$n,q_=eV;var tV=j_(q_),Ip=tV;function rV(t,e,r,n){for(var i=t.length,o=r+(n?1:-1);n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}var Cp=rV;function nV(t){return t!==t}var G_=nV;function iV(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}var K_=iV;function oV(t,e,r){return e===e?K_(t,e,r):Cp(t,G_,r)}var Op=oV;function aV(t,e){var r=t==null?0:t.length;return!!r&&Op(t,e,0)>-1}var Q_=aV;var sV=9007199254740991,cV=/^(?:0|[1-9]\d*)$/;function lV(t,e){var r=typeof t;return e=e??sV,!!e&&(r=="number"||r!="symbol"&&cV.test(t))&&t>-1&&t%1==0&&t<e}var za=lV;function uV(t,e){return t===e||t!==t&&e!==e}var qa=uV;var Y_=Math.max;function pV(t,e,r){return e=Y_(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,o=Y_(n.length-e,0),s=Array(o);++i<o;)s[i]=n[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=n[i];return l[e]=r(s),V_(t,this,l)}}var Np=pV;function mV(t,e){return Ip(Np(t,e,$n),t+"")}var Ga=mV;var fV=9007199254740991;function dV(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=fV}var Ka=dV;function gV(t){return t!=null&&Ka(t.length)&&!Rp(t)}var jn=gV;function hV(t,e,r){if(!Hr(r))return!1;var n=typeof e;return(n=="number"?jn(r)&&za(e,r.length):n=="string"&&e in r)?qa(r[e],t):!1}var No=hV;var yV=Object.prototype;function TV(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||yV;return t===r}var Z_=TV;function xV(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var Up=xV;var SV="[object Arguments]";function vV(t){return ur(t)&&kn(t)==SV}var UT=vV;var X_=Object.prototype,bV=X_.hasOwnProperty,wV=X_.propertyIsEnumerable,EV=UT(function(){return arguments}())?UT:function(t){return ur(t)&&bV.call(t,"callee")&&!wV.call(t,"callee")},Qa=EV;function _V(){return!1}var J_=_V;var r0=typeof exports=="object"&&exports&&!exports.nodeType&&exports,e0=r0&&typeof module=="object"&&module&&!module.nodeType&&module,RV=e0&&e0.exports===r0,t0=RV?Ct.Buffer:void 0,kV=t0?t0.isBuffer:void 0,AV=kV||J_,Bc=AV;var PV="[object Arguments]",DV="[object Array]",MV="[object Boolean]",LV="[object Date]",FV="[object Error]",IV="[object Function]",CV="[object Map]",OV="[object Number]",NV="[object Object]",UV="[object RegExp]",HV="[object Set]",BV="[object String]",VV="[object WeakMap]",WV="[object ArrayBuffer]",$V="[object DataView]",jV="[object Float32Array]",zV="[object Float64Array]",qV="[object Int8Array]",GV="[object Int16Array]",KV="[object Int32Array]",QV="[object Uint8Array]",YV="[object Uint8ClampedArray]",ZV="[object Uint16Array]",XV="[object Uint32Array]",it={};it[jV]=it[zV]=it[qV]=it[GV]=it[KV]=it[QV]=it[YV]=it[ZV]=it[XV]=!0;it[PV]=it[DV]=it[WV]=it[MV]=it[$V]=it[LV]=it[FV]=it[IV]=it[CV]=it[OV]=it[NV]=it[UV]=it[HV]=it[BV]=it[VV]=!1;function JV(t){return ur(t)&&Ka(t.length)&&!!it[kn(t)]}var n0=JV;function eW(t){return function(e){return t(e)}}var Ya=eW;var i0=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Vc=i0&&typeof module=="object"&&module&&!module.nodeType&&module,tW=Vc&&Vc.exports===i0,HT=tW&&Ep.process,rW=function(){try{var t=Vc&&Vc.require&&Vc.require("util").types;return t||HT&&HT.binding&&HT.binding("util")}catch{}}(),BT=rW;var o0=BT&&BT.isTypedArray,nW=o0?Ya(o0):n0,Hp=nW;var iW=Object.prototype,oW=iW.hasOwnProperty;function aW(t,e){var r=Je(t),n=!r&&Qa(t),i=!r&&!n&&Bc(t),o=!r&&!n&&!i&&Hp(t),s=r||n||i||o,l=s?Up(t.length,String):[],u=l.length;for(var m in t)(e||oW.call(t,m))&&!(s&&(m=="length"||i&&(m=="offset"||m=="parent")||o&&(m=="buffer"||m=="byteLength"||m=="byteOffset")||za(m,u)))&&l.push(m);return l}var a0=aW;function sW(t,e){return function(r){return t(e(r))}}var s0=sW;var cW=s0(Object.keys,Object),c0=cW;var lW=Object.prototype,uW=lW.hasOwnProperty;function pW(t){if(!Z_(t))return c0(t);var e=[];for(var r in Object(t))uW.call(t,r)&&r!="constructor"&&e.push(r);return e}var l0=pW;function mW(t){return jn(t)?a0(t):l0(t)}var Gi=mW;var fW=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,dW=/^\w*$/;function gW(t,e){if(Je(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||Ur(t)?!0:dW.test(t)||!fW.test(t)||e!=null&&t in Object(e)}var Za=gW;var hW=wr(Object,"create"),bi=hW;function yW(){this.__data__=bi?bi(null):{},this.size=0}var u0=yW;function TW(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var p0=TW;var xW="__lodash_hash_undefined__",SW=Object.prototype,vW=SW.hasOwnProperty;function bW(t){var e=this.__data__;if(bi){var r=e[t];return r===xW?void 0:r}return vW.call(e,t)?e[t]:void 0}var m0=bW;var wW=Object.prototype,EW=wW.hasOwnProperty;function _W(t){var e=this.__data__;return bi?e[t]!==void 0:EW.call(e,t)}var f0=_W;var RW="__lodash_hash_undefined__";function kW(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=bi&&e===void 0?RW:e,this}var d0=kW;function Xa(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Xa.prototype.clear=u0;Xa.prototype.delete=p0;Xa.prototype.get=m0;Xa.prototype.has=f0;Xa.prototype.set=d0;var VT=Xa;function AW(){this.__data__=[],this.size=0}var g0=AW;function PW(t,e){for(var r=t.length;r--;)if(qa(t[r][0],e))return r;return-1}var Ki=PW;var DW=Array.prototype,MW=DW.splice;function LW(t){var e=this.__data__,r=Ki(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():MW.call(e,r,1),--this.size,!0}var h0=LW;function FW(t){var e=this.__data__,r=Ki(e,t);return r<0?void 0:e[r][1]}var y0=FW;function IW(t){return Ki(this.__data__,t)>-1}var T0=IW;function CW(t,e){var r=this.__data__,n=Ki(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var x0=CW;function Ja(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Ja.prototype.clear=g0;Ja.prototype.delete=h0;Ja.prototype.get=y0;Ja.prototype.has=T0;Ja.prototype.set=x0;var Qi=Ja;var OW=wr(Ct,"Map"),Yi=OW;function NW(){this.size=0,this.__data__={hash:new VT,map:new(Yi||Qi),string:new VT}}var S0=NW;function UW(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var v0=UW;function HW(t,e){var r=t.__data__;return v0(e)?r[typeof e=="string"?"string":"hash"]:r.map}var Zi=HW;function BW(t){var e=Zi(this,t).delete(t);return this.size-=e?1:0,e}var b0=BW;function VW(t){return Zi(this,t).get(t)}var w0=VW;function WW(t){return Zi(this,t).has(t)}var E0=WW;function $W(t,e){var r=Zi(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var _0=$W;function es(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}es.prototype.clear=S0;es.prototype.delete=b0;es.prototype.get=w0;es.prototype.has=E0;es.prototype.set=_0;var Uo=es;var jW="Expected a function";function WT(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(jW);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=t.apply(this,n);return r.cache=o.set(i,s)||o,s};return r.cache=new(WT.Cache||Uo),r}WT.Cache=Uo;var Wc=WT;var zW=500;function qW(t){var e=Wc(t,function(n){return r.size===zW&&r.clear(),n}),r=e.cache;return e}var R0=qW;var GW=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,KW=/\\(\\)?/g,QW=R0(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(GW,function(r,n,i,o){e.push(i?o.replace(KW,"$1"):n||r)}),e}),k0=QW;function YW(t){return t==null?"":D_(t)}var An=YW;function ZW(t,e){return Je(t)?t:Za(t,e)?[t]:k0(An(t))}var Bp=ZW;var XW=1/0;function JW(t){if(typeof t=="string"||Ur(t))return t;var e=t+"";return e=="0"&&1/t==-XW?"-0":e}var Xi=JW;function e$(t,e){e=Bp(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[Xi(e[r++])];return r&&r==n?t:void 0}var ts=e$;function t$(t,e,r){var n=t==null?void 0:ts(t,e);return n===void 0?r:n}var Ho=t$;function r$(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var rs=r$;var A0=lr?lr.isConcatSpreadable:void 0;function n$(t){return Je(t)||Qa(t)||!!(A0&&t&&t[A0])}var P0=n$;function D0(t,e,r,n,i){var o=-1,s=t.length;for(r||(r=P0),i||(i=[]);++o<s;){var l=t[o];e>0&&r(l)?e>1?D0(l,e-1,r,n,i):rs(i,l):n||(i[i.length]=l)}return i}var ns=D0;function i$(t){var e=t==null?0:t.length;return e?ns(t,1):[]}var ot=i$;function o$(t){return Ip(Np(t,void 0,ot),t+"")}var M0=o$;function a$(t){return function(e){return t?.[e]}}var L0=a$;var s$={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},c$=L0(s$),F0=c$;var l$=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,u$="\\u0300-\\u036f",p$="\\ufe20-\\ufe2f",m$="\\u20d0-\\u20ff",f$=u$+p$+m$,d$="["+f$+"]",g$=RegExp(d$,"g");function h$(t){return t=An(t),t&&t.replace(l$,F0).replace(g$,"")}var $T=h$;function y$(){this.__data__=new Qi,this.size=0}var I0=y$;function T$(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var C0=T$;function x$(t){return this.__data__.get(t)}var O0=x$;function S$(t){return this.__data__.has(t)}var N0=S$;var v$=200;function b$(t,e){var r=this.__data__;if(r instanceof Qi){var n=r.__data__;if(!Yi||n.length<v$-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Uo(n)}return r.set(t,e),this.size=r.size,this}var U0=b$;function is(t){var e=this.__data__=new Qi(t);this.size=e.size}is.prototype.clear=I0;is.prototype.delete=C0;is.prototype.get=O0;is.prototype.has=N0;is.prototype.set=U0;var os=is;function w$(t,e){for(var r=-1,n=t==null?0:t.length,i=0,o=[];++r<n;){var s=t[r];e(s,r,t)&&(o[i++]=s)}return o}var Vp=w$;function E$(){return[]}var H0=E$;var _$=Object.prototype,R$=_$.propertyIsEnumerable,B0=Object.getOwnPropertySymbols,k$=B0?function(t){return t==null?[]:(t=Object(t),Vp(B0(t),function(e){return R$.call(t,e)}))}:H0,V0=k$;function A$(t,e,r){var n=e(t);return Je(t)?n:rs(n,r(t))}var W0=A$;function P$(t){return W0(t,Gi,V0)}var jT=P$;var D$=wr(Ct,"DataView"),Wp=D$;var M$=wr(Ct,"Promise"),$p=M$;var L$=wr(Ct,"Set"),Ji=L$;var $0="[object Map]",F$="[object Object]",j0="[object Promise]",z0="[object Set]",q0="[object WeakMap]",G0="[object DataView]",I$=vi(Wp),C$=vi(Yi),O$=vi($p),N$=vi(Ji),U$=vi(Oo),Bo=kn;(Wp&&Bo(new Wp(new ArrayBuffer(1)))!=G0||Yi&&Bo(new Yi)!=$0||$p&&Bo($p.resolve())!=j0||Ji&&Bo(new Ji)!=z0||Oo&&Bo(new Oo)!=q0)&&(Bo=function(t){var e=kn(t),r=e==F$?t.constructor:void 0,n=r?vi(r):"";if(n)switch(n){case I$:return G0;case C$:return $0;case O$:return j0;case N$:return z0;case U$:return q0}return e});var zT=Bo;var H$=Ct.Uint8Array,qT=H$;function B$(){var t=arguments.length;if(!t)return[];for(var e=Array(t-1),r=arguments[0],n=t;n--;)e[n-1]=arguments[n];return rs(Je(r)?qi(r):[r],ns(e,1))}var $c=B$;var V$="__lodash_hash_undefined__";function W$(t){return this.__data__.set(t,V$),this}var K0=W$;function $$(t){return this.__data__.has(t)}var Q0=$$;function jp(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new Uo;++e<r;)this.add(t[e])}jp.prototype.add=jp.prototype.push=K0;jp.prototype.has=Q0;var zp=jp;function j$(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var Y0=j$;function z$(t,e){return t.has(e)}var qp=z$;var q$=1,G$=2;function K$(t,e,r,n,i,o){var s=r&q$,l=t.length,u=e.length;if(l!=u&&!(s&&u>l))return!1;var m=o.get(t),d=o.get(e);if(m&&d)return m==e&&d==t;var g=-1,y=!0,x=r&G$?new zp:void 0;for(o.set(t,e),o.set(e,t);++g<l;){var E=t[g],w=e[g];if(n)var U=s?n(w,E,g,e,t,o):n(E,w,g,t,e,o);if(U!==void 0){if(U)continue;y=!1;break}if(x){if(!Y0(e,function(V,q){if(!qp(x,q)&&(E===V||i(E,V,r,n,o)))return x.push(q)})){y=!1;break}}else if(!(E===w||i(E,w,r,n,o))){y=!1;break}}return o.delete(t),o.delete(e),y}var Gp=K$;function Q$(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}var Z0=Q$;function Y$(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var as=Y$;var Z$=1,X$=2,J$="[object Boolean]",ej="[object Date]",tj="[object Error]",rj="[object Map]",nj="[object Number]",ij="[object RegExp]",oj="[object Set]",aj="[object String]",sj="[object Symbol]",cj="[object ArrayBuffer]",lj="[object DataView]",X0=lr?lr.prototype:void 0,GT=X0?X0.valueOf:void 0;function uj(t,e,r,n,i,o,s){switch(r){case lj:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case cj:return!(t.byteLength!=e.byteLength||!o(new qT(t),new qT(e)));case J$:case ej:case nj:return qa(+t,+e);case tj:return t.name==e.name&&t.message==e.message;case ij:case aj:return t==e+"";case rj:var l=Z0;case oj:var u=n&Z$;if(l||(l=as),t.size!=e.size&&!u)return!1;var m=s.get(t);if(m)return m==e;n|=X$,s.set(t,e);var d=Gp(l(t),l(e),n,i,o,s);return s.delete(t),d;case sj:if(GT)return GT.call(t)==GT.call(e)}return!1}var J0=uj;var pj=1,mj=Object.prototype,fj=mj.hasOwnProperty;function dj(t,e,r,n,i,o){var s=r&pj,l=jT(t),u=l.length,m=jT(e),d=m.length;if(u!=d&&!s)return!1;for(var g=u;g--;){var y=l[g];if(!(s?y in e:fj.call(e,y)))return!1}var x=o.get(t),E=o.get(e);if(x&&E)return x==e&&E==t;var w=!0;o.set(t,e),o.set(e,t);for(var U=s;++g<u;){y=l[g];var V=t[y],q=e[y];if(n)var ne=s?n(q,V,y,e,t,o):n(V,q,y,t,e,o);if(!(ne===void 0?V===q||i(V,q,r,n,o):ne)){w=!1;break}U||(U=y=="constructor")}if(w&&!U){var se=t.constructor,de=e.constructor;se!=de&&"constructor"in t&&"constructor"in e&&!(typeof se=="function"&&se instanceof se&&typeof de=="function"&&de instanceof de)&&(w=!1)}return o.delete(t),o.delete(e),w}var eR=dj;var gj=1,tR="[object Arguments]",rR="[object Array]",Kp="[object Object]",hj=Object.prototype,nR=hj.hasOwnProperty;function yj(t,e,r,n,i,o){var s=Je(t),l=Je(e),u=s?rR:zT(t),m=l?rR:zT(e);u=u==tR?Kp:u,m=m==tR?Kp:m;var d=u==Kp,g=m==Kp,y=u==m;if(y&&Bc(t)){if(!Bc(e))return!1;s=!0,d=!1}if(y&&!d)return o||(o=new os),s||Hp(t)?Gp(t,e,r,n,i,o):J0(t,e,u,r,n,i,o);if(!(r&gj)){var x=d&&nR.call(t,"__wrapped__"),E=g&&nR.call(e,"__wrapped__");if(x||E){var w=x?t.value():t,U=E?e.value():e;return o||(o=new os),i(w,U,r,n,o)}}return y?(o||(o=new os),eR(t,e,r,n,i,o)):!1}var iR=yj;function oR(t,e,r,n,i){return t===e?!0:t==null||e==null||!ur(t)&&!ur(e)?t!==t&&e!==e:iR(t,e,r,n,oR,i)}var ss=oR;var Tj=1,xj=2;function Sj(t,e,r,n){var i=r.length,o=i,s=!n;if(t==null)return!o;for(t=Object(t);i--;){var l=r[i];if(s&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++i<o;){l=r[i];var u=l[0],m=t[u],d=l[1];if(s&&l[2]){if(m===void 0&&!(u in t))return!1}else{var g=new os;if(n)var y=n(m,d,u,t,e,g);if(!(y===void 0?ss(d,m,Tj|xj,n,g):y))return!1}}return!0}var aR=Sj;function vj(t){return t===t&&!Hr(t)}var Qp=vj;function bj(t){for(var e=Gi(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,Qp(i)]}return e}var sR=bj;function wj(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var Yp=wj;function Ej(t){var e=sR(t);return e.length==1&&e[0][2]?Yp(e[0][0],e[0][1]):function(r){return r===t||aR(r,t,e)}}var cR=Ej;function _j(t,e){return t!=null&&e in Object(t)}var lR=_j;function Rj(t,e,r){e=Bp(e,t);for(var n=-1,i=e.length,o=!1;++n<i;){var s=Xi(e[n]);if(!(o=t!=null&&r(t,s)))break;t=t[s]}return o||++n!=i?o:(i=t==null?0:t.length,!!i&&Ka(i)&&za(s,i)&&(Je(t)||Qa(t)))}var uR=Rj;function kj(t,e){return t!=null&&uR(t,e,lR)}var pR=kj;var Aj=1,Pj=2;function Dj(t,e){return Za(t)&&Qp(e)?Yp(Xi(t),e):function(r){var n=Ho(r,t);return n===void 0&&n===e?pR(r,t):ss(e,n,Aj|Pj)}}var mR=Dj;function Mj(t){return function(e){return e?.[t]}}var Zp=Mj;function Lj(t){return function(e){return ts(e,t)}}var fR=Lj;function Fj(t){return Za(t)?Zp(Xi(t)):fR(t)}var dR=Fj;function Ij(t){return typeof t=="function"?t:t==null?$n:typeof t=="object"?Je(t)?mR(t[0],t[1]):cR(t):dR(t)}var cs=Ij;function Cj(t){return function(e,r,n){for(var i=-1,o=Object(e),s=n(e),l=s.length;l--;){var u=s[t?l:++i];if(r(o[u],u,o)===!1)break}return e}}var gR=Cj;var Oj=gR(),hR=Oj;function Nj(t,e){return t&&hR(t,e,Gi)}var yR=Nj;function Uj(t,e){return function(r,n){if(r==null)return r;if(!jn(r))return t(r,n);for(var i=r.length,o=e?i:-1,s=Object(r);(e?o--:++o<i)&&n(s[o],o,s)!==!1;);return r}}var TR=Uj;var Hj=TR(yR),xR=Hj;function Bj(t){return ur(t)&&jn(t)}var SR=Bj;function Vj(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}var vR=Vj;function Wj(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var Xp=Wj;var bR=/[\\^$.*+?()[\]{}|]/g,$j=RegExp(bR.source);function jj(t){return t=An(t),t&&$j.test(t)?t.replace(bR,"\\$&"):t}var Br=jj;var zj=Math.max,qj=Math.min;function Gj(t,e,r){var n=t==null?0:t.length;if(!n)return-1;var i=n-1;return r!==void 0&&(i=_p(r),i=r<0?zj(n+i,0):qj(i,n-1)),Cp(t,cs(e,3),i,!0)}var Vo=Gj;function Kj(t,e){var r=-1,n=jn(t)?Array(t.length):[];return xR(t,function(i,o,s){n[++r]=e(i,o,s)}),n}var wR=Kj;var Qj="Expected a function",Yj=8,Zj=32,Xj=128,Jj=256;function e3(t){return M0(function(e){var r=e.length,n=r,i=zi.prototype.thru;for(t&&e.reverse();n--;){var o=e[n];if(typeof o!="function")throw new TypeError(Qj);if(i&&!s&&ja(o)=="wrapper")var s=new zi([],!0)}for(n=s?n:r;++n<r;){o=e[n];var l=ja(o),u=l=="wrapper"?Mp(o):void 0;u&&OT(u[0])&&u[1]==(Xj|Yj|Zj|Jj)&&!u[4].length&&u[9]==1?s=s[ja(u[0])].apply(s,u[3]):s=o.length==1&&OT(o)?s[l]():s.thru(o)}return function(){var m=arguments,d=m[0];if(s&&m.length==1&&Je(d))return s.plant(d).value();for(var g=0,y=r?e[g].apply(this,m):d;++g<r;)y=e[g].call(this,y);return y}})}var ER=e3;var t3=ER(),KT=t3;function r3(t,e){return an(e,function(r){return t[r]})}var _R=r3;function n3(t){return t==null?[]:_R(t,Gi(t))}var RR=n3;function i3(t,e){return ss(t,e)}var wi=i3;function o3(t,e){return t<e}var kR=o3;function a3(t,e,r){for(var n=-1,i=t.length;++n<i;){var o=t[n],s=e(o);if(s!=null&&(l===void 0?s===s&&!Ur(s):r(s,l)))var l=s,u=o}return u}var AR=a3;function s3(t,e){for(var r,n=-1,i=t.length;++n<i;){var o=e(t[n]);o!==void 0&&(r=r===void 0?o:r+o)}return r}var PR=s3;function c3(t){return t&&t.length?AR(t,$n,kR):void 0}var QT=c3;function l3(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}var DR=l3;function u3(t,e){if(t!==e){var r=t!==void 0,n=t===null,i=t===t,o=Ur(t),s=e!==void 0,l=e===null,u=e===e,m=Ur(e);if(!l&&!m&&!o&&t>e||o&&s&&u&&!l&&!m||n&&s&&u||!r&&u||!i)return 1;if(!n&&!o&&!m&&t<e||m&&r&&i&&!n&&!o||l&&r&&i||!s&&i||!u)return-1}return 0}var MR=u3;function p3(t,e,r){for(var n=-1,i=t.criteria,o=e.criteria,s=i.length,l=r.length;++n<s;){var u=MR(i[n],o[n]);if(u){if(n>=l)return u;var m=r[n];return u*(m=="desc"?-1:1)}}return t.index-e.index}var LR=p3;function m3(t,e,r){e.length?e=an(e,function(o){return Je(o)?function(s){return ts(s,o.length===1?o[0]:o)}:o}):e=[$n];var n=-1;e=an(e,Ya(cs));var i=wR(t,function(o,s,l){var u=an(e,function(m){return m(o)});return{criteria:u,index:++n,value:o}});return DR(i,function(o,s){return LR(o,s,r)})}var FR=m3;var f3=9007199254740991,d3=Math.floor;function g3(t,e){var r="";if(!t||e<1||e>f3)return r;do e%2&&(r+=t),e=d3(e/2),e&&(t+=t);while(e);return r}var IR=g3;function h3(t,e,r,n){for(var i=r-1,o=t.length;++i<o;)if(n(t[i],e))return i;return-1}var CR=h3;var y3=Array.prototype,OR=y3.splice;function T3(t,e,r,n){var i=n?CR:Op,o=-1,s=e.length,l=t;for(t===e&&(e=qi(e)),r&&(l=an(t,Ya(r)));++o<s;)for(var u=0,m=e[o],d=r?r(m):m;(u=i(l,d,u,n))>-1;)l!==t&&OR.call(l,u,1),OR.call(t,u,1);return t}var NR=T3;function x3(t,e){return t&&t.length&&e&&e.length?NR(t,e):t}var UR=x3;var S3=Ga(UR),pr=S3;var v3=Math.floor,b3=Math.random;function w3(t,e){return t+v3(b3()*(e-t+1))}var HR=w3;var E3=Math.ceil,_3=Math.max;function R3(t,e,r,n){for(var i=-1,o=_3(E3((e-t)/(r||1)),0),s=Array(o);o--;)s[n?o:++i]=t,t+=r;return s}var BR=R3;function k3(t){return function(e,r,n){return n&&typeof n!="number"&&No(e,r,n)&&(r=n=void 0),e=Va(e),r===void 0?(r=e,e=0):r=Va(r),n=n===void 0?e<r?1:-1:Va(n),BR(e,r,n,t)}}var VR=k3;var A3=VR(),YT=A3;function P3(t,e,r){return(r?No(t,e,r):e===void 0)?e=1:e=_p(e),IR(An(t),e)}var ZT=P3;function D3(t,e){var r=-1,n=t.length,i=n-1;for(e=e===void 0?n:e;++r<e;){var o=HR(r,i),s=t[o];t[o]=t[r],t[r]=s}return t.length=e,t}var Jp=D3;function M3(t){return Jp(qi(t))}var WR=M3;function L3(t){return Jp(RR(t))}var $R=L3;function F3(t){var e=Je(t)?WR:$R;return e(t)}var XT=F3;var I3=Ga(function(t,e){if(t==null)return[];var r=e.length;return r>1&&No(t,e[0],e[1])?e=[]:r>2&&No(e[0],e[1],e[2])&&(e=[e[0]]),FR(t,ns(e,1),[])}),JT=I3;function C3(t,e){return t&&t.length?PR(t,cs(e,2)):0}var em=C3;var O3=1/0,N3=Ji&&1/as(new Ji([,-0]))[1]==O3?function(t){return new Ji(t)}:Dp,jR=N3;var U3=200;function H3(t,e,r){var n=-1,i=Q_,o=t.length,s=!0,l=[],u=l;if(r)s=!1,i=vR;else if(o>=U3){var m=e?null:jR(t);if(m)return as(m);s=!1,i=qp,u=new zp}else u=e?[]:l;e:for(;++n<o;){var d=t[n],g=e?e(d):d;if(d=r||d!==0?d:0,s&&g===g){for(var y=u.length;y--;)if(u[y]===g)continue e;e&&u.push(g),l.push(d)}else i(u,g,r)||(u!==l&&u.push(g),l.push(d))}return l}var tm=H3;function B3(t){return t&&t.length?tm(t):[]}var Wo=B3;function V3(t,e){return e=typeof e=="function"?e:void 0,t&&t.length?tm(t,void 0,e):[]}var jc=V3;var W3=Math.max;function $3(t){if(!(t&&t.length))return[];var e=0;return t=Vp(t,function(r){if(SR(r))return e=W3(r.length,e),!0}),Up(e,function(r){return an(t,Zp(r))})}var zR=$3;var j3=Ga(zR),Dt=j3;var rm=class{constructor(){this.commands={clipboardPaste:void 0,clipboardCopy:void 0,toggleLineComment:void 0,indentLine:void 0,outdentLine:void 0,rename:void 0,quickFix:void 0,revealDefinition:void 0,revealTypeDefinition:void 0,showHover:void 0,showDebugHover:void 0,extractVariable:void 0,fold:void 0,highlight:{acceptsLocation:!0},unfold:void 0,showReferences:void 0,insertLineAfter:void 0,gitAccept:void 0,gitRevert:void 0,gitStage:void 0,gitUnstage:void 0}}};var zc=class{constructor(){this.clipboardContents=""}async readText(){return this.clipboardContents}async writeText(e){this.clipboardContents=e}};var Jt=class{constructor(){this.listeners=[];this.notifyListeners=(...e)=>{this.listeners.forEach(r=>r(...e))};this.registerListener=this.registerListener.bind(this)}registerListener(e){return this.listeners.push(e),{dispose:()=>{pr(this.listeners,e)}}}};var nm={tokenHatSplittingMode:{preserveCase:!1,lettersToPreserve:[],symbolsToPreserve:[]},wordSeparators:["_"],decorationDebounceDelayMs:50,experimental:{snippetsDir:void 0,hatStability:"balanced",keyboardTargetFollowsSelection:!1},commandHistory:!1,debug:!1};var qc=class{constructor(){this.notifier=new Jt;this.mocks={...nm};this.scopes=[];this.onDidChangeConfiguration=this.notifier.registerListener;this.onDidChangeConfiguration=this.onDidChangeConfiguration.bind(this)}getOwnConfiguration(e,r){if(r!=null){for(let{scope:n,values:i}of this.scopes)if(q3(n,r))return Ho(i,e)??Ho(this.mocks,e)}return Ho(this.mocks,e)}mockConfiguration(e,r){this.mocks[e]=r,this.notifier.notifyListeners()}mockConfigurationScope(e,r,n=!1){this.scopes.push({scope:e,values:r}),n||this.notifier.notifyListeners()}};function q3(t,e){return t.languageId===e.languageId}var im={hideInferenceWarning:!1,tutorialProgress:{}};var Gc=class{constructor(){this.data={...im}}get(e){return this.data[e]}set(e,r){return this.data[e]=r,Promise.resolve()}};var Kc=class{async showMessage(e,r,n,...i){}};var om=class{constructor(){this.configuration=new qc;this.messages=new Kc;this.keyValueStore=new Gc;this.clipboard=new zc;this.capabilities=new rm;this.runMode="test";this.cursorlessVersion="0.0.0";this.workspaceFolders=void 0;this.disposables=[];this.quickPickReturnValue=void 0;this.onDidOpenTextDocument=ls;this.onDidCloseTextDocument=ls;this.onDidChangeActiveTextEditor=ls;this.onDidChangeVisibleTextEditors=ls;this.onDidChangeTextEditorSelection=ls;this.onDidChangeTextEditorVisibleRanges=ls}async flashRanges(e){}async setHighlightRanges(e,r,n){}mockAssetsRoot(e){this.assetsRoot_=e}get assetsRoot(){if(this.assetsRoot_==null)throw Error("Field `assetsRoot` has not yet been mocked");return this.assetsRoot_}get activeTextEditor(){throw Error("Not implemented")}get activeEditableTextEditor(){throw Error("Not implemented")}get visibleTextEditors(){throw Error("Not implemented")}get visibleNotebookEditors(){throw Error("Not implemented")}getEditableTextEditor(e){throw Error("Not implemented")}findInDocument(e,r){throw Error("Not implemented")}findInWorkspace(e){throw Error("Not implemented")}openTextDocument(e){throw Error("Not implemented")}openUntitledTextDocument(e){throw Error("Not implemented")}setQuickPickReturnValue(e){this.quickPickReturnValue=e}async showQuickPick(e,r){return this.quickPickReturnValue}showInputBox(e){throw Error("Not implemented")}executeCommand(e,...r){throw new Error("Method not implemented.")}onDidChangeTextDocument(e){throw Error("Not implemented")}disposeOnExit(...e){return this.disposables.push(...e),()=>pr(this.disposables,...e)}exit(){this.disposables.forEach(e=>e.dispose())}};function ls(){return{dispose(){}}}var _e=class t{constructor(e,r){this.line=e,this.character=r}isEqual(e){return this.line===e.line&&this.character===e.character}isBefore(e){return this.line<e.line?!0:this.line>e.line?!1:this.character<e.character}isAfter(e){return this.line>e.line?!0:this.line<e.line?!1:this.character>e.character}isBeforeOrEqual(e){return this.isEqual(e)||this.isBefore(e)}isAfterOrEqual(e){return this.isEqual(e)||this.isAfter(e)}compareTo(e){return this.isBefore(e)?-1:this.isAfter(e)?1:0}with(e,r){return new t(e??this.line,r??this.character)}translate(e,r){return new t(this.line+(e??0),this.character+(r??0))}toEmptyRange(){return new Y(this,this)}concise(){return`${this.line}:${this.character}`}conciseOneBased(){return`${this.line+1}:${this.character+1}`}toString(){return this.concise()}};function qR(t,e,r){return t.positionAt(t.offsetAt(e)+r)}var Y=class t{constructor(...e){let[r,n]=e.length===2?e:[new _e(e[0],e[1]),new _e(e[2],e[3])];r.isBefore(n)?(this.start=r,this.end=n):(this.start=n,this.end=r)}get isEmpty(){return this.start.isEqual(this.end)}get isSingleLine(){return this.start.line===this.end.line}isRangeEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}contains(e){let[r,n]=e instanceof _e?[e,e]:[e.start,e.end];return r.isAfterOrEqual(this.start)&&n.isBeforeOrEqual(this.end)}intersection(e){let r=this.start.isAfter(e.start)?this.start:e.start,n=this.end.isBefore(e.end)?this.end:e.end;return r.isBeforeOrEqual(n)?new t(r,n):void 0}union(e){return new t(this.start.isBefore(e.start)?this.start:e.start,this.end.isAfter(e.end)?this.end:e.end)}with(e,r){return new t(e??this.start,r??this.end)}toSelection(e){return e?new st(this.end,this.start):new st(this.start,this.end)}concise(){return`${this.start.concise()}-${this.end.concise()}`}conciseOneBased(){return`${this.start.conciseOneBased()}-${this.end.conciseOneBased()}`}toString(){return`${this.start.concise()}-${this.end.concise()}`}};function G3(t){let{source:e,flags:r}=t;return new RegExp(`(${e})$`,r.replace("m",""))}function K3(t){let{source:e,flags:r}=t;return new RegExp(`^(${e})`,r.replace("m",""))}function GR(t){let e=new Map;function r(n){let i=e.get(n);return i==null&&(i=t(n),e.set(n,i)),i}return r}var am=GR(G3),sm=GR(K3);function ex(t,e){return e.lastIndex=0,t.matchAll(e)}function sn(t,e,r){return Array.from(ex(t,e),r)}function $o(t,e){return t.lastIndex=0,t.test(e)}function KR(t,e){return t.lastIndex=0,e.match(t)}function Qc(t,e){return sn(t,e,r=>({index:r.index,text:r[0]}))}var us=class{constructor(e){this.original=e;this.configuration=e.configuration,this.keyValueStore=e.keyValueStore,this.clipboard=e.clipboard,this.messages=e.messages,this.capabilities=e.capabilities}flashRanges(e){return this.original.flashRanges(e)}setHighlightRanges(e,r,n){return this.original.setHighlightRanges(e,r,n)}onDidOpenTextDocument(e,r,n){return this.original.onDidOpenTextDocument(e,r,n)}onDidCloseTextDocument(e,r,n){return this.original.onDidCloseTextDocument(e,r,n)}onDidChangeActiveTextEditor(e,r,n){return this.original.onDidChangeActiveTextEditor(e,r,n)}onDidChangeVisibleTextEditors(e,r,n){return this.original.onDidChangeVisibleTextEditors(e,r,n)}onDidChangeTextEditorSelection(e,r,n){return this.original.onDidChangeTextEditorSelection(e,r,n)}onDidChangeTextEditorVisibleRanges(e,r,n){return this.original.onDidChangeTextEditorVisibleRanges(e,r,n)}get activeTextEditor(){return this.original.activeTextEditor}get activeEditableTextEditor(){return this.original.activeEditableTextEditor}get visibleTextEditors(){return this.original.visibleTextEditors}get visibleNotebookEditors(){return this.original.visibleNotebookEditors}get cursorlessVersion(){return this.original.cursorlessVersion}get assetsRoot(){return this.original.assetsRoot}get runMode(){return this.original.runMode}get workspaceFolders(){return this.original.workspaceFolders}findInDocument(e,r){return this.original.findInDocument(e,r)}findInWorkspace(e){return this.original.findInWorkspace(e)}openTextDocument(e){return this.original.openTextDocument(e)}openUntitledTextDocument(e){return this.original.openUntitledTextDocument(e)}showQuickPick(e,r){return this.original.showQuickPick(e,r)}showInputBox(e){return this.original.showInputBox(e)}getEditableTextEditor(e){return this.original.getEditableTextEditor(e)}executeCommand(e,...r){return this.original.executeCommand(e,...r)}onDidChangeTextDocument(e){return this.original.onDidChangeTextDocument(e)}disposeOnExit(...e){return this.original.disposeOnExit(...e)}};var cm=class extends us{constructor(r,n,i,o){super(r);this.fakeIde=n;this.isSilent=i;this.cursorlessSnippetsDir=o;this.messages=i?n.messages:r.messages,this.configuration=n.configuration,this.keyValueStore=n.keyValueStore,this.initializeConfiguration()}initializeConfiguration(){this.configuration.mockConfigurationScope({languageId:"css"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfigurationScope({languageId:"scss"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfigurationScope({languageId:"shellscript"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfiguration("experimental",{hatStability:this.configuration.getOwnConfiguration("experimental.hatStability"),snippetsDir:this.cursorlessSnippetsDir,keyboardTargetFollowsSelection:!1})}flashRanges(r){return this.isSilent?this.fakeIde.flashRanges(r):super.flashRanges(r)}setHighlightRanges(r,n,i){return this.isSilent?this.fakeIde.setHighlightRanges(r,n,i):super.setHighlightRanges(r,n,i)}async showQuickPick(r,n){return this.isSilent?this.fakeIde.showQuickPick(r,n):super.showQuickPick(r,n)}};function jo(t,e,r,...n){return t.showMessage("warning",e,r,...n)}function pt(t,e,r,...n){return t.showMessage("error",e,r,...n)}var ue=(n=>(n[n.supported=0]="supported",n[n.unsupported=1]="unsupported",n[n.notApplicable=2]="notApplicable",n))(ue||{});var{supported:ae,unsupported:zo,notApplicable:J}=ue,tx={list:ae,disqualifyDelimiter:ae,switchStatementSubject:ae,ifStatement:ae,statement:ae,"statement.class":ae,"statement.iteration.document":ae,"statement.iteration.block":ae,class:ae,"class.iteration.document":ae,className:ae,"className.iteration.document":ae,"collectionItem.unenclosed":ae,"collectionItem.unenclosed.iteration":ae,namedFunction:ae,functionName:ae,"functionName.iteration.document":ae,"namedFunction.iteration.document":ae,functionCall:ae,functionCallee:ae,"argument.actual":ae,"argument.actual.iteration":ae,"argument.actual.method":ae,"argument.actual.method.iteration":ae,"argument.formal":ae,"argument.formal.iteration":ae,"argumentList.actual.empty":ae,"argumentList.actual.singleLine":ae,"argumentList.actual.multiLine":ae,"argumentList.actual.method.empty":ae,"argumentList.actual.method.singleLine":ae,"argumentList.actual.method.multiLine":ae,"argumentList.formal.empty":ae,"argumentList.formal.singleLine":ae,"argumentList.formal.multiLine":ae,"branch.if":ae,"branch.if.iteration":ae,"branch.switchCase":ae,"branch.switchCase.iteration":ae,"branch.ternary":ae,"branch.loop":ae,"comment.line":ae,"comment.block":ae,"string.singleLine":ae,"textFragment.comment.line":ae,"textFragment.comment.block":ae,"textFragment.string.singleLine":ae,"condition.if":ae,"condition.while":ae,"condition.doWhile":ae,"condition.for":ae,"condition.ternary":ae,"condition.switchCase":ae,"condition.switchCase.iteration":ae,"name.assignment":ae,"name.variable":ae,"name.function":ae,"name.class":ae,"name.field":ae,"name.iteration.block":ae,"name.iteration.document":ae,"name.argument.formal":ae,"name.argument.formal.iteration":ae,"value.assignment":ae,"value.variable":ae,"value.return":ae,"type.variable":ae,"type.argument.formal":ae,"type.argument.formal.iteration":ae,"type.field":ae,"type.field.iteration":ae,"type.enum":ae,"type.cast":ae,"type.class":ae,"type.return":ae,"interior.class":zo,"interior.function":zo,"interior.if":zo,"interior.switchCase":zo,"interior.ternary":zo,"interior.loop":zo,fieldAccess:zo,element:J,tags:J,startTag:J,endTag:J,"interior.element":J,"textFragment.element":J,"interior.resource":J,"type.resource":J,"type.resource.iteration":J,"name.resource":J,"name.resource.iteration":J,"value.resource":J,"value.resource.iteration":J,map:J,"key.mapPair":J,"key.mapPair.iteration":J,"value.mapPair":J,"value.mapPair.iteration":J,"name.argument.actual":J,"name.argument.actual.iteration":J,"value.argument.actual":J,"value.argument.actual.iteration":J,"string.multiLine":J,"textFragment.string.multiLine":J,section:J,"section.iteration.document":J,"section.iteration.parent":J,"name.assignment.pattern":J,"name.variable.pattern":J,"value.variable.pattern":J,command:J,"interior.command":J,"type.alias":J,"value.typeAlias":J,notebookCell:J,"interior.cell":J,"class.iteration.block":J,"className.iteration.block":J,"functionName.iteration.block":J,"namedFunction.iteration.block":J,"branch.try":J,"branch.try.iteration":J,"interior.try":J,"key.attribute":J,"type.interface":J,"value.attribute":J,"value.yield":J,"value.field":J,environment:J,pairDelimiter:J,regularExpression:J},Q3={...tx,attribute:J,"argument.formal.lambda.iteration":J,"argument.formal.lambda":J,"argumentList.formal.lambda.empty":J,"argumentList.formal.lambda.multiLine":J,"argumentList.formal.lambda.singleLine":J,"interior.lambda":J,"value.return.lambda":J,anonymousFunction:J,"argument.actual.constructor.iteration":J,"argument.actual.constructor":J,"argument.formal.constructor.iteration":J,"argument.formal.constructor":J,"argumentList.actual.constructor.empty":J,"argumentList.actual.constructor.multiLine":J,"argumentList.actual.constructor.singleLine":J,"argumentList.formal.constructor.empty":J,"argumentList.formal.constructor.multiLine":J,"argumentList.formal.constructor.singleLine":J,"functionCall.constructor":J,"functionCallee.constructor":J,"functionName.constructor":J,"name.argument.formal.constructor.iteration":J,"name.argument.formal.constructor":J,"name.constructor":J,"namedFunction.constructor":J,"type.argument.formal.constructor.iteration":J,"type.argument.formal.constructor":J,"value.argument.formal.constructor.iteration":J,"value.argument.formal.constructor":J,"argument.formal.method.iteration":J,"argument.formal.method":J,"argumentList.formal.method.empty":J,"argumentList.formal.method.multiLine":J,"argumentList.formal.method.singleLine":J,"functionName.method.iteration.class":J,"functionName.method":J,"name.argument.formal.method.iteration":J,"name.argument.formal.method":J,"name.method":J,"namedFunction.method.iteration.class":J,"namedFunction.method":J,"type.argument.formal.method.iteration":J,"type.argument.formal.method":J,"value.argument.formal.method.iteration":J,"value.argument.formal.method":J,"name.foreach":J,"type.foreach":J,"value.foreach":J,"value.argument.formal":J,"value.argument.formal.iteration":J,"type.typeArgument":J,"type.typeArgument.iteration":J};var{supported:_ae,unsupported:Rae,notApplicable:kae}=ue;var{supported:he,unsupported:QR}=ue,Y3={...tx,attribute:he,anonymousFunction:he,"branch.try":he,"branch.try.iteration":he,"argument.actual.constructor":he,"argument.actual.constructor.iteration":he,"argument.formal.method":he,"argument.formal.method.iteration":he,"argument.formal.constructor":he,"argument.formal.constructor.iteration":he,"argument.formal.lambda":he,"argument.formal.lambda.iteration":he,"argumentList.actual.constructor.empty":he,"argumentList.actual.constructor.singleLine":he,"argumentList.actual.constructor.multiLine":he,"argumentList.formal.constructor.empty":he,"argumentList.formal.constructor.singleLine":he,"argumentList.formal.constructor.multiLine":he,"argumentList.formal.lambda.empty":he,"argumentList.formal.lambda.singleLine":he,"argumentList.formal.lambda.multiLine":he,"argumentList.formal.method.empty":he,"argumentList.formal.method.singleLine":he,"argumentList.formal.method.multiLine":he,"functionCall.constructor":he,"functionCallee.constructor":he,"functionName.constructor":he,"functionName.method":he,"functionName.method.iteration.class":he,"namedFunction.method":he,"namedFunction.method.iteration.class":he,"namedFunction.constructor":he,"name.argument.formal.method":he,"name.argument.formal.method.iteration":he,"name.argument.formal.constructor":he,"name.argument.formal.constructor.iteration":he,"name.constructor":he,"name.foreach":he,"name.method":he,"value.argument.formal":he,"value.argument.formal.iteration":he,"value.argument.formal.method":he,"value.argument.formal.method.iteration":he,"value.argument.formal.constructor":he,"value.argument.formal.constructor.iteration":he,"value.foreach":he,"value.return.lambda":he,"value.field":he,"type.argument.formal.method":he,"type.argument.formal.method.iteration":he,"type.argument.formal.constructor":he,"type.argument.formal.constructor.iteration":he,"type.foreach":he,"type.typeArgument":he,"type.typeArgument.iteration":he,"interior.lambda":QR,"interior.try":QR};var{supported:Fae,unsupported:Iae,notApplicable:Cae}=ue;var{supported:mt,notApplicable:I}=ue,rx={"comment.block":mt,"string.singleLine":mt,disqualifyDelimiter:mt,map:mt,functionCall:mt,functionCallee:mt,"argument.actual":mt,"argument.actual.iteration":mt,"argumentList.actual.empty":mt,"argumentList.actual.singleLine":mt,"argumentList.actual.multiLine":mt,"name.iteration.document":mt,"name.iteration.block":mt,"textFragment.comment.block":mt,"textFragment.string.singleLine":mt,"key.mapPair":mt,"key.mapPair.iteration":mt,"value.mapPair":mt,"value.mapPair.iteration":mt,"collectionItem.unenclosed":mt,"collectionItem.unenclosed.iteration":mt,statement:mt,"statement.iteration.document":mt,anonymousFunction:I,"argument.actual.constructor.iteration":I,"argument.actual.constructor":I,"argument.actual.method.iteration":I,"argument.actual.method":I,"argument.formal.constructor.iteration":I,"argument.formal.constructor":I,"argument.formal.iteration":I,"argument.formal.method.iteration":I,"argument.formal.method":I,"argument.formal":I,"argument.formal.lambda":I,"argument.formal.lambda.iteration":I,"argumentList.actual.method.empty":I,"argumentList.actual.method.singleLine":I,"argumentList.actual.method.multiLine":I,"argumentList.actual.constructor.empty":I,"argumentList.actual.constructor.singleLine":I,"argumentList.actual.constructor.multiLine":I,"argumentList.formal.empty":I,"argumentList.formal.singleLine":I,"argumentList.formal.multiLine":I,"argumentList.formal.lambda.empty":I,"argumentList.formal.lambda.singleLine":I,"argumentList.formal.lambda.multiLine":I,"argumentList.formal.method.empty":I,"argumentList.formal.method.singleLine":I,"argumentList.formal.method.multiLine":I,"argumentList.formal.constructor.empty":I,"argumentList.formal.constructor.singleLine":I,"argumentList.formal.constructor.multiLine":I,attribute:I,"branch.if.iteration":I,"branch.if":I,"branch.loop":I,"branch.switchCase.iteration":I,"branch.switchCase":I,"branch.ternary":I,"branch.try.iteration":I,"branch.try":I,"class.iteration.block":I,"class.iteration.document":I,class:I,"className.iteration.block":I,"className.iteration.document":I,className:I,command:I,"comment.line":I,"condition.doWhile":I,"condition.for":I,"condition.if":I,"condition.switchCase.iteration":I,"condition.switchCase":I,"condition.ternary":I,"condition.while":I,element:I,endTag:I,environment:I,fieldAccess:I,"functionCall.constructor":I,"functionCallee.constructor":I,"functionName.constructor":I,"functionName.iteration.block":I,"functionName.iteration.document":I,"functionName.method.iteration.class":I,"functionName.method":I,functionName:I,ifStatement:I,"interior.cell":I,"interior.class":I,"interior.command":I,"interior.element":I,"interior.function":I,"interior.if":I,"interior.lambda":I,"interior.loop":I,"interior.resource":I,"interior.switchCase":I,"interior.ternary":I,"interior.try":I,"key.attribute":I,list:I,"name.argument.actual.iteration":I,"name.argument.actual":I,"name.argument.formal.constructor.iteration":I,"name.argument.formal.constructor":I,"name.argument.formal.iteration":I,"name.argument.formal.method.iteration":I,"name.argument.formal.method":I,"name.argument.formal":I,"name.assignment.pattern":I,"name.assignment":I,"name.class":I,"name.constructor":I,"name.field":I,"name.foreach":I,"name.function":I,"name.method":I,"name.resource.iteration":I,"name.resource":I,"name.variable.pattern":I,"name.variable":I,"namedFunction.constructor":I,"namedFunction.iteration.block":I,"namedFunction.iteration.document":I,"namedFunction.method.iteration.class":I,"namedFunction.method":I,namedFunction:I,notebookCell:I,pairDelimiter:I,regularExpression:I,"section.iteration.document":I,"section.iteration.parent":I,section:I,startTag:I,"statement.iteration.block":I,"statement.class":I,"string.multiLine":I,switchStatementSubject:I,tags:I,"textFragment.comment.line":I,"textFragment.element":I,"textFragment.string.multiLine":I,"type.alias":I,"type.argument.formal.constructor.iteration":I,"type.argument.formal.constructor":I,"type.argument.formal.iteration":I,"type.argument.formal.method.iteration":I,"type.argument.formal.method":I,"type.argument.formal":I,"type.cast":I,"type.class":I,"type.enum":I,"type.field.iteration":I,"type.field":I,"type.foreach":I,"type.interface":I,"type.resource":I,"type.resource.iteration":I,"type.return":I,"type.typeArgument.iteration":I,"type.typeArgument":I,"type.variable":I,"value.argument.actual.iteration":I,"value.argument.actual":I,"value.argument.formal.constructor.iteration":I,"value.argument.formal.constructor":I,"value.argument.formal.iteration":I,"value.argument.formal.method.iteration":I,"value.argument.formal.method":I,"value.argument.formal":I,"value.assignment":I,"value.attribute":I,"value.field":I,"value.foreach":I,"value.resource.iteration":I,"value.resource":I,"value.return.lambda":I,"value.return":I,"value.typeAlias":I,"value.variable.pattern":I,"value.variable":I,"value.yield":I};var{supported:Bae,unsupported:Vae,notApplicable:Wae}=ue;var{supported:zae,unsupported:qae,notApplicable:Gae}=ue;var{supported:Yae,notApplicable:Zae}=ue;var{supported:ese,unsupported:tse,notApplicable:rse}=ue;var{supported:W,unsupported:eo,notApplicable:Ae}=ue,nx={list:W,map:W,regularExpression:W,switchStatementSubject:W,fieldAccess:W,disqualifyDelimiter:W,pairDelimiter:W,"collectionItem.unenclosed":W,"collectionItem.unenclosed.iteration":W,"textFragment.string.singleLine":W,"textFragment.string.multiLine":W,"textFragment.comment.line":W,"textFragment.comment.block":W,ifStatement:W,statement:W,"statement.iteration.document":W,"statement.iteration.block":W,"statement.class":W,class:W,"class.iteration.document":W,className:W,"className.iteration.document":W,anonymousFunction:W,namedFunction:W,"namedFunction.iteration.document":W,"namedFunction.method":W,"namedFunction.method.iteration.class":W,"namedFunction.constructor":W,functionName:W,"functionName.iteration.document":W,"functionName.method":W,"functionName.method.iteration.class":W,"functionName.constructor":W,functionCall:W,"functionCall.constructor":W,functionCallee:W,"functionCallee.constructor":W,"argument.actual":W,"argument.actual.iteration":W,"argument.actual.method":W,"argument.actual.method.iteration":W,"argument.actual.constructor":W,"argument.actual.constructor.iteration":W,"argument.formal":W,"argument.formal.iteration":W,"argument.formal.method":W,"argument.formal.method.iteration":W,"argument.formal.constructor":W,"argument.formal.constructor.iteration":W,"argument.formal.lambda":W,"argument.formal.lambda.iteration":W,"argumentList.actual.empty":W,"argumentList.actual.singleLine":W,"argumentList.actual.multiLine":W,"argumentList.actual.method.empty":W,"argumentList.actual.method.singleLine":W,"argumentList.actual.method.multiLine":W,"argumentList.actual.constructor.empty":W,"argumentList.actual.constructor.singleLine":W,"argumentList.actual.constructor.multiLine":W,"argumentList.formal.empty":W,"argumentList.formal.singleLine":W,"argumentList.formal.multiLine":W,"argumentList.formal.lambda.empty":W,"argumentList.formal.lambda.singleLine":W,"argumentList.formal.lambda.multiLine":W,"argumentList.formal.method.empty":W,"argumentList.formal.method.singleLine":W,"argumentList.formal.method.multiLine":W,"argumentList.formal.constructor.empty":W,"argumentList.formal.constructor.singleLine":W,"argumentList.formal.constructor.multiLine":W,"comment.line":W,"comment.block":W,"string.singleLine":W,"string.multiLine":W,"branch.if":W,"branch.if.iteration":W,"branch.try":W,"branch.try.iteration":W,"branch.switchCase":W,"branch.switchCase.iteration":W,"branch.ternary":W,"branch.loop":W,"condition.if":W,"condition.while":W,"condition.doWhile":W,"condition.for":W,"condition.ternary":W,"condition.switchCase":W,"condition.switchCase.iteration":W,"name.argument.formal":W,"name.argument.formal.iteration":W,"name.argument.formal.method":W,"name.argument.formal.method.iteration":W,"name.argument.formal.constructor":W,"name.argument.formal.constructor.iteration":W,"name.foreach":W,"name.assignment":W,"name.assignment.pattern":W,"name.variable":W,"name.variable.pattern":W,"name.function":W,"name.method":W,"name.constructor":W,"name.class":W,"name.field":W,"name.iteration.document":W,"name.iteration.block":W,"key.mapPair":W,"key.mapPair.iteration":W,"value.argument.formal":W,"value.argument.formal.iteration":W,"value.argument.formal.method":W,"value.argument.formal.method.iteration":W,"value.argument.formal.constructor":W,"value.argument.formal.constructor.iteration":W,"value.mapPair":W,"value.mapPair.iteration":W,"value.assignment":W,"value.variable":W,"value.variable.pattern":W,"value.foreach":W,"value.return":W,"value.return.lambda":W,"value.field":W,"value.yield":W,"type.class":W,"interior.class":eo,"interior.function":eo,"interior.if":eo,"interior.lambda":eo,"interior.loop":eo,"interior.switchCase":eo,"interior.ternary":eo,"interior.try":eo,"class.iteration.block":Ae,"className.iteration.block":Ae,"functionName.iteration.block":Ae,"interior.cell":Ae,"interior.command":Ae,"interior.resource":Ae,"name.argument.actual.iteration":Ae,"name.argument.actual":Ae,"name.resource.iteration":Ae,"name.resource":Ae,"namedFunction.iteration.block":Ae,"section.iteration.document":Ae,"section.iteration.parent":Ae,"textFragment.element":Ae,"type.resource.iteration":Ae,"type.resource":Ae,"value.argument.actual.iteration":Ae,"value.argument.actual":Ae,"value.resource.iteration":Ae,"value.resource":Ae,command:Ae,environment:Ae,notebookCell:Ae,section:Ae},ix={element:W,tags:W,startTag:W,endTag:W,attribute:W,"key.attribute":W,"value.attribute":W,"interior.element":W},ox={...nx,...ix,"value.typeAlias":Ae,"type.alias":Ae,"type.argument.formal.constructor.iteration":Ae,"type.argument.formal.constructor":Ae,"type.argument.formal.iteration":Ae,"type.argument.formal.method.iteration":Ae,"type.argument.formal.method":Ae,"type.argument.formal":Ae,"type.cast":Ae,"type.enum":Ae,"type.field.iteration":Ae,"type.field":Ae,"type.foreach":Ae,"type.interface":Ae,"type.return":Ae,"type.typeArgument.iteration":Ae,"type.typeArgument":Ae,"type.variable":Ae};var{supported:Z3,unsupported:cse,notApplicable:lse}=ue,X3={...ox,"textFragment.element":Z3};var{supported:cn,notApplicable:L}=ue,Yc={list:cn,map:cn,"string.singleLine":cn,"key.mapPair.iteration":cn,"key.mapPair":cn,"value.mapPair.iteration":cn,"value.mapPair":cn,"comment.block":cn,"comment.line":cn,"textFragment.comment.block":cn,"textFragment.comment.line":cn,"textFragment.string.singleLine":cn,anonymousFunction:L,"argument.actual":L,"argument.actual.constructor":L,"argument.actual.constructor.iteration":L,"argument.actual.iteration":L,"argument.actual.method":L,"argument.actual.method.iteration":L,"argument.formal":L,"argument.formal.constructor":L,"argument.formal.constructor.iteration":L,"argument.formal.iteration":L,"argument.formal.method":L,"argument.formal.method.iteration":L,"argument.formal.lambda":L,"argument.formal.lambda.iteration":L,"argumentList.actual.empty":L,"argumentList.actual.singleLine":L,"argumentList.actual.multiLine":L,"argumentList.actual.method.empty":L,"argumentList.actual.method.singleLine":L,"argumentList.actual.method.multiLine":L,"argumentList.actual.constructor.empty":L,"argumentList.actual.constructor.singleLine":L,"argumentList.actual.constructor.multiLine":L,"argumentList.formal.empty":L,"argumentList.formal.singleLine":L,"argumentList.formal.multiLine":L,"argumentList.formal.lambda.empty":L,"argumentList.formal.lambda.singleLine":L,"argumentList.formal.lambda.multiLine":L,"argumentList.formal.method.empty":L,"argumentList.formal.method.singleLine":L,"argumentList.formal.method.multiLine":L,"argumentList.formal.constructor.empty":L,"argumentList.formal.constructor.singleLine":L,"argumentList.formal.constructor.multiLine":L,attribute:L,"branch.if":L,"branch.if.iteration":L,"branch.loop":L,"branch.switchCase":L,"branch.switchCase.iteration":L,"branch.ternary":L,"branch.try":L,"branch.try.iteration":L,class:L,"class.iteration.block":L,"class.iteration.document":L,className:L,"className.iteration.block":L,"className.iteration.document":L,"collectionItem.unenclosed":L,"collectionItem.unenclosed.iteration":L,command:L,"condition.doWhile":L,"condition.for":L,"condition.if":L,"condition.switchCase":L,"condition.switchCase.iteration":L,"condition.ternary":L,"condition.while":L,disqualifyDelimiter:L,element:L,endTag:L,environment:L,fieldAccess:L,functionCall:L,"functionCall.constructor":L,functionCallee:L,"functionCallee.constructor":L,functionName:L,"functionName.constructor":L,"functionName.iteration.block":L,"functionName.iteration.document":L,"functionName.method":L,"functionName.method.iteration.class":L,ifStatement:L,"interior.cell":L,"interior.class":L,"interior.command":L,"interior.element":L,"interior.function":L,"interior.if":L,"interior.lambda":L,"interior.loop":L,"interior.resource":L,"interior.switchCase":L,"interior.ternary":L,"interior.try":L,"key.attribute":L,"name.argument.actual":L,"name.argument.actual.iteration":L,"name.argument.formal":L,"name.argument.formal.constructor":L,"name.argument.formal.constructor.iteration":L,"name.argument.formal.iteration":L,"name.argument.formal.method":L,"name.argument.formal.method.iteration":L,"name.assignment":L,"name.assignment.pattern":L,"name.class":L,"name.constructor":L,"name.field":L,"name.foreach":L,"name.function":L,"name.iteration.block":L,"name.iteration.document":L,"name.method":L,"name.resource":L,"name.resource.iteration":L,"name.variable":L,"name.variable.pattern":L,namedFunction:L,"namedFunction.constructor":L,"namedFunction.iteration.block":L,"namedFunction.iteration.document":L,"namedFunction.method":L,"namedFunction.method.iteration.class":L,notebookCell:L,pairDelimiter:L,regularExpression:L,section:L,"section.iteration.document":L,"section.iteration.parent":L,startTag:L,statement:L,"statement.class":L,"statement.iteration.block":L,"statement.iteration.document":L,"string.multiLine":L,switchStatementSubject:L,tags:L,"textFragment.element":L,"textFragment.string.multiLine":L,"type.alias":L,"type.argument.formal":L,"type.argument.formal.constructor":L,"type.argument.formal.constructor.iteration":L,"type.argument.formal.iteration":L,"type.argument.formal.method":L,"type.argument.formal.method.iteration":L,"type.cast":L,"type.class":L,"type.enum":L,"type.field":L,"type.field.iteration":L,"type.foreach":L,"type.interface":L,"type.resource":L,"type.resource.iteration":L,"type.return":L,"type.typeArgument":L,"type.typeArgument.iteration":L,"type.variable":L,"value.argument.actual":L,"value.argument.actual.iteration":L,"value.argument.formal":L,"value.argument.formal.constructor":L,"value.argument.formal.constructor.iteration":L,"value.argument.formal.iteration":L,"value.argument.formal.method":L,"value.argument.formal.method.iteration":L,"value.assignment":L,"value.attribute":L,"value.field":L,"value.foreach":L,"value.resource":L,"value.resource.iteration":L,"value.return":L,"value.return.lambda":L,"value.typeAlias":L,"value.variable":L,"value.variable.pattern":L,"value.yield":L};var{supported:gse,unsupported:hse,notApplicable:yse}=ue,J3={...Yc};var{supported:vse,unsupported:bse,notApplicable:wse}=ue,ez={...Yc};var{supported:Rse,unsupported:kse,notApplicable:Ase}=ue;var{supported:Mse,notApplicable:Lse}=ue;var{supported:Cse,notApplicable:Ose}=ue;var{supported:Hse,unsupported:Bse,notApplicable:Vse}=ue;var{supported:jse,notApplicable:zse}=ue;var{supported:Kse,unsupported:Qse,notApplicable:Yse}=ue;var{supported:Jse,unsupported:ece,notApplicable:tce}=ue;var{supported:ice,unsupported:oce,notApplicable:ace}=ue;var{supported:lce,unsupported:uce,notApplicable:pce}=ue;var{supported:dce,notApplicable:gce}=ue;var{supported:er,unsupported:lm}=ue,tz={...rx,"comment.line":er,"condition.if":er,namedFunction:er,"namedFunction.iteration.block":er,"namedFunction.iteration.document":er,functionName:er,"functionName.iteration.block":er,"functionName.iteration.document":er,"name.argument.formal":er,"name.argument.formal.iteration":er,"name.function":er,"value.argument.formal":er,"value.argument.formal.iteration":er,"value.return":er,ifStatement:er,"textFragment.comment.line":er,"branch.if":lm,"branch.if.iteration":lm,"interior.function":lm,"interior.if":lm};var{supported:vce,unsupported:bce,notApplicable:wce}=ue;var{supported:$t,notApplicable:Ei}=ue,ax={...nx,"type.argument.formal":$t,"type.argument.formal.iteration":$t,"type.argument.formal.method":$t,"type.argument.formal.method.iteration":$t,"type.argument.formal.constructor":$t,"type.argument.formal.constructor.iteration":$t,"type.alias":$t,"type.cast":$t,"type.field":$t,"type.field.iteration":$t,"type.interface":$t,"type.enum":$t,"type.return":$t,"type.variable":$t,"type.typeArgument":$t,"type.typeArgument.iteration":$t,"value.typeAlias":$t,element:Ei,tags:Ei,startTag:Ei,endTag:Ei,attribute:Ei,"key.attribute":Ei,"value.attribute":Ei,"type.foreach":Ei,"interior.element":Ei};var{supported:Mce,unsupported:Lce,notApplicable:Fce}=ue,rz={...ax,...ix};var{supported:Oce,notApplicable:Nce}=ue;var{supported:Bce,unsupported:Vce,notApplicable:Wce}=ue;var ps=["that","source","instanceReference","keyboard"];var st=class extends Y{get isReversed(){return this.active.isBefore(this.anchor)}constructor(...e){let[r,n]=e.length===2?e:[new _e(e[0],e[1]),new _e(e[2],e[3])];super(r,n),this.anchor=r,this.active=n}isEqual(e){return this.anchor.isEqual(e.anchor)&&this.active.isEqual(e.active)}concise(){return`${this.anchor.concise()}->${this.active.concise()}`}conciseOneBased(){return`${this.start.conciseOneBased()}->${this.end.conciseOneBased()}`}toString(){return this.concise()}};function ZR({line:t,character:e}){return new _e(t,e)}function um({start:t,end:e}){return new Y(ZR(t),ZR(e))}function Vr({start:t,end:e}){return{type:"line",start:t.line,end:e.line}}function mr({start:t,end:e}){return{type:"character",start:t,end:e}}function Zc(t){return{start:pm(t.start),end:pm(t.end)}}function XR(t){return{anchor:pm(t.anchor),active:pm(t.active)}}function pm({line:t,character:e}){return{line:t,character:e}}function hk(t){return typeof t>"u"||t===null}function nz(t){return typeof t=="object"&&t!==null}function iz(t){return Array.isArray(t)?t:hk(t)?[]:[t]}function oz(t,e){var r,n,i,o;if(e)for(o=Object.keys(e),r=0,n=o.length;r<n;r+=1)i=o[r],t[i]=e[i];return t}function az(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}function sz(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var cz=hk,lz=nz,uz=iz,pz=az,mz=sz,fz=oz,Mt={isNothing:cz,isObject:lz,toArray:uz,repeat:pz,isNegativeZero:mz,extend:fz};function yk(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}function Jc(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=yk(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Jc.prototype=Object.create(Error.prototype);Jc.prototype.constructor=Jc;Jc.prototype.toString=function(e){return this.name+": "+yk(this,e)};var Er=Jc;function sx(t,e,r,n,i){var o="",s="",l=Math.floor(i/2)-1;return n-e>l&&(o=" ... ",e=n-l+o.length),r-n>l&&(s=" ...",r=n+l-s.length),{str:o+t.slice(e,r).replace(/\t/g,"\u2192")+s,pos:n-e+o.length}}function cx(t,e){return Mt.repeat(" ",e-t.length)+t}function dz(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],o,s=-1;o=r.exec(t.buffer);)i.push(o.index),n.push(o.index+o[0].length),t.position<=o.index&&s<0&&(s=n.length-2);s<0&&(s=n.length-1);var l="",u,m,d=Math.min(t.line+e.linesAfter,i.length).toString().length,g=e.maxLength-(e.indent+d+3);for(u=1;u<=e.linesBefore&&!(s-u<0);u++)m=sx(t.buffer,n[s-u],i[s-u],t.position-(n[s]-n[s-u]),g),l=Mt.repeat(" ",e.indent)+cx((t.line-u+1).toString(),d)+" | "+m.str+`
`+l;for(m=sx(t.buffer,n[s],i[s],t.position,g),l+=Mt.repeat(" ",e.indent)+cx((t.line+1).toString(),d)+" | "+m.str+`
`,l+=Mt.repeat("-",e.indent+d+3+m.pos)+`^
`,u=1;u<=e.linesAfter&&!(s+u>=i.length);u++)m=sx(t.buffer,n[s+u],i[s+u],t.position-(n[s]-n[s+u]),g),l+=Mt.repeat(" ",e.indent)+cx((t.line+u+1).toString(),d)+" | "+m.str+`
`;return l.replace(/\n$/,"")}var gz=dz,hz=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],yz=["scalar","sequence","mapping"];function Tz(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}function xz(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(hz.indexOf(r)===-1)throw new Er('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=Tz(e.styleAliases||null),yz.indexOf(this.kind)===-1)throw new Er('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var jt=xz;function tk(t,e){var r=[];return t[e].forEach(function(n){var i=r.length;r.forEach(function(o,s){o.tag===n.tag&&o.kind===n.kind&&o.multi===n.multi&&(i=s)}),r[i]=n}),r}function Sz(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}function ux(t){return this.extend(t)}ux.prototype.extend=function(e){var r=[],n=[];if(e instanceof jt)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new Er("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(o){if(!(o instanceof jt))throw new Er("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new Er("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new Er("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(o){if(!(o instanceof jt))throw new Er("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(ux.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=tk(i,"implicit"),i.compiledExplicit=tk(i,"explicit"),i.compiledTypeMap=Sz(i.compiledImplicit,i.compiledExplicit),i};var vz=ux,bz=new jt("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),wz=new jt("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),Ez=new jt("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),_z=new vz({explicit:[bz,wz,Ez]});function Rz(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function kz(){return null}function Az(t){return t===null}var Pz=new jt("tag:yaml.org,2002:null",{kind:"scalar",resolve:Rz,construct:kz,predicate:Az,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function Dz(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function Mz(t){return t==="true"||t==="True"||t==="TRUE"}function Lz(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var Fz=new jt("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Dz,construct:Mz,predicate:Lz,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function Iz(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function Cz(t){return 48<=t&&t<=55}function Oz(t){return 48<=t&&t<=57}function Nz(t){if(t===null)return!1;var e=t.length,r=0,n=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!Iz(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!Cz(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!Oz(t.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function Uz(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}function Hz(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!Mt.isNegativeZero(t)}var Bz=new jt("tag:yaml.org,2002:int",{kind:"scalar",resolve:Nz,construct:Uz,predicate:Hz,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Vz=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Wz(t){return!(t===null||!Vz.test(t)||t[t.length-1]==="_")}function $z(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}var jz=/^[-+]?[0-9]+e/;function zz(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Mt.isNegativeZero(t))return"-0.0";return r=t.toString(10),jz.test(r)?r.replace("e",".e"):r}function qz(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||Mt.isNegativeZero(t))}var Gz=new jt("tag:yaml.org,2002:float",{kind:"scalar",resolve:Wz,construct:$z,predicate:qz,represent:zz,defaultStyle:"lowercase"}),Kz=_z.extend({implicit:[Pz,Fz,Bz,Gz]}),Qz=Kz,Tk=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),xk=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function Yz(t){return t===null?!1:Tk.exec(t)!==null||xk.exec(t)!==null}function Zz(t){var e,r,n,i,o,s,l,u=0,m=null,d,g,y;if(e=Tk.exec(t),e===null&&(e=xk.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(o=+e[4],s=+e[5],l=+e[6],e[7]){for(u=e[7].slice(0,3);u.length<3;)u+="0";u=+u}return e[9]&&(d=+e[10],g=+(e[11]||0),m=(d*60+g)*6e4,e[9]==="-"&&(m=-m)),y=new Date(Date.UTC(r,n,i,o,s,l,u)),m&&y.setTime(y.getTime()-m),y}function Xz(t){return t.toISOString()}var Jz=new jt("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:Yz,construct:Zz,instanceOf:Date,represent:Xz});function eq(t){return t==="<<"||t===null}var tq=new jt("tag:yaml.org,2002:merge",{kind:"scalar",resolve:eq}),gx=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function rq(t){if(t===null)return!1;var e,r,n=0,i=t.length,o=gx;for(r=0;r<i;r++)if(e=o.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}function nq(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,o=gx,s=0,l=[];for(e=0;e<i;e++)e%4===0&&e&&(l.push(s>>16&255),l.push(s>>8&255),l.push(s&255)),s=s<<6|o.indexOf(n.charAt(e));return r=i%4*6,r===0?(l.push(s>>16&255),l.push(s>>8&255),l.push(s&255)):r===18?(l.push(s>>10&255),l.push(s>>2&255)):r===12&&l.push(s>>4&255),new Uint8Array(l)}function iq(t){var e="",r=0,n,i,o=t.length,s=gx;for(n=0;n<o;n++)n%3===0&&n&&(e+=s[r>>18&63],e+=s[r>>12&63],e+=s[r>>6&63],e+=s[r&63]),r=(r<<8)+t[n];return i=o%3,i===0?(e+=s[r>>18&63],e+=s[r>>12&63],e+=s[r>>6&63],e+=s[r&63]):i===2?(e+=s[r>>10&63],e+=s[r>>4&63],e+=s[r<<2&63],e+=s[64]):i===1&&(e+=s[r>>2&63],e+=s[r<<4&63],e+=s[64],e+=s[64]),e}function oq(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var aq=new jt("tag:yaml.org,2002:binary",{kind:"scalar",resolve:rq,construct:nq,predicate:oq,represent:iq}),sq=Object.prototype.hasOwnProperty,cq=Object.prototype.toString;function lq(t){if(t===null)return!0;var e=[],r,n,i,o,s,l=t;for(r=0,n=l.length;r<n;r+=1){if(i=l[r],s=!1,cq.call(i)!=="[object Object]")return!1;for(o in i)if(sq.call(i,o))if(!s)s=!0;else return!1;if(!s)return!1;if(e.indexOf(o)===-1)e.push(o);else return!1}return!0}function uq(t){return t!==null?t:[]}var pq=new jt("tag:yaml.org,2002:omap",{kind:"sequence",resolve:lq,construct:uq}),mq=Object.prototype.toString;function fq(t){if(t===null)return!0;var e,r,n,i,o,s=t;for(o=new Array(s.length),e=0,r=s.length;e<r;e+=1){if(n=s[e],mq.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;o[e]=[i[0],n[i[0]]]}return!0}function dq(t){if(t===null)return[];var e,r,n,i,o,s=t;for(o=new Array(s.length),e=0,r=s.length;e<r;e+=1)n=s[e],i=Object.keys(n),o[e]=[i[0],n[i[0]]];return o}var gq=new jt("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:fq,construct:dq}),hq=Object.prototype.hasOwnProperty;function yq(t){if(t===null)return!0;var e,r=t;for(e in r)if(hq.call(r,e)&&r[e]!==null)return!1;return!0}function Tq(t){return t!==null?t:{}}var xq=new jt("tag:yaml.org,2002:set",{kind:"mapping",resolve:yq,construct:Tq}),hx=Qz.extend({implicit:[Jz,tq],explicit:[aq,pq,gq,xq]}),ro=Object.prototype.hasOwnProperty,mm=1,Sk=2,vk=3,fm=4,lx=1,Sq=2,rk=3,vq=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,bq=/[\x85\u2028\u2029]/,wq=/[,\[\]\{\}]/,bk=/^(?:!|!!|![a-z\-]+!)$/i,wk=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function nk(t){return Object.prototype.toString.call(t)}function zn(t){return t===10||t===13}function Go(t){return t===9||t===32}function _r(t){return t===9||t===32||t===10||t===13}function fs(t){return t===44||t===91||t===93||t===123||t===125}function Eq(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function _q(t){return t===120?2:t===117?4:t===85?8:0}function Rq(t){return 48<=t&&t<=57?t-48:-1}function ik(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}function kq(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var Ek=new Array(256),_k=new Array(256);for(qo=0;qo<256;qo++)Ek[qo]=ik(qo)?1:0,_k[qo]=ik(qo);var qo;function Aq(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||hx,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Rk(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=gz(r),new Er(e,r)}function ge(t,e){throw Rk(t,e)}function dm(t,e){t.onWarning&&t.onWarning.call(null,Rk(t,e))}var ok={YAML:function(e,r,n){var i,o,s;e.version!==null&&ge(e,"duplication of %YAML directive"),n.length!==1&&ge(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&ge(e,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),s=parseInt(i[2],10),o!==1&&ge(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=s<2,s!==1&&s!==2&&dm(e,"unsupported YAML version of the document")},TAG:function(e,r,n){var i,o;n.length!==2&&ge(e,"TAG directive accepts exactly two arguments"),i=n[0],o=n[1],bk.test(i)||ge(e,"ill-formed tag handle (first argument) of the TAG directive"),ro.call(e.tagMap,i)&&ge(e,'there is a previously declared suffix for "'+i+'" tag handle'),wk.test(o)||ge(e,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{ge(e,"tag prefix is malformed: "+o)}e.tagMap[i]=o}};function to(t,e,r,n){var i,o,s,l;if(e<r){if(l=t.input.slice(e,r),n)for(i=0,o=l.length;i<o;i+=1)s=l.charCodeAt(i),s===9||32<=s&&s<=1114111||ge(t,"expected valid JSON character");else vq.test(l)&&ge(t,"the stream contains non-printable characters");t.result+=l}}function ak(t,e,r,n){var i,o,s,l;for(Mt.isObject(r)||ge(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),s=0,l=i.length;s<l;s+=1)o=i[s],ro.call(e,o)||(e[o]=r[o],n[o]=!0)}function ds(t,e,r,n,i,o,s,l,u){var m,d;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),m=0,d=i.length;m<d;m+=1)Array.isArray(i[m])&&ge(t,"nested arrays are not supported inside keys"),typeof i=="object"&&nk(i[m])==="[object Object]"&&(i[m]="[object Object]");if(typeof i=="object"&&nk(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(m=0,d=o.length;m<d;m+=1)ak(t,e,o[m],r);else ak(t,e,o,r);else!t.json&&!ro.call(r,i)&&ro.call(e,i)&&(t.line=s||t.line,t.lineStart=l||t.lineStart,t.position=u||t.position,ge(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):e[i]=o,delete r[i];return e}function yx(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):ge(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function _t(t,e,r){for(var n=0,i=t.input.charCodeAt(t.position);i!==0;){for(;Go(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(zn(i))for(yx(t),i=t.input.charCodeAt(t.position),n++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return r!==-1&&n!==0&&t.lineIndent<r&&dm(t,"deficient indentation"),n}function ym(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||_r(r)))}function Tx(t,e){e===1?t.result+=" ":e>1&&(t.result+=Mt.repeat(`
`,e-1))}function Pq(t,e,r){var n,i,o,s,l,u,m,d,g=t.kind,y=t.result,x;if(x=t.input.charCodeAt(t.position),_r(x)||fs(x)||x===35||x===38||x===42||x===33||x===124||x===62||x===39||x===34||x===37||x===64||x===96||(x===63||x===45)&&(i=t.input.charCodeAt(t.position+1),_r(i)||r&&fs(i)))return!1;for(t.kind="scalar",t.result="",o=s=t.position,l=!1;x!==0;){if(x===58){if(i=t.input.charCodeAt(t.position+1),_r(i)||r&&fs(i))break}else if(x===35){if(n=t.input.charCodeAt(t.position-1),_r(n))break}else{if(t.position===t.lineStart&&ym(t)||r&&fs(x))break;if(zn(x))if(u=t.line,m=t.lineStart,d=t.lineIndent,_t(t,!1,-1),t.lineIndent>=e){l=!0,x=t.input.charCodeAt(t.position);continue}else{t.position=s,t.line=u,t.lineStart=m,t.lineIndent=d;break}}l&&(to(t,o,s,!1),Tx(t,t.line-u),o=s=t.position,l=!1),Go(x)||(s=t.position+1),x=t.input.charCodeAt(++t.position)}return to(t,o,s,!1),t.result?!0:(t.kind=g,t.result=y,!1)}function Dq(t,e){var r,n,i;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(to(t,n,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)n=t.position,t.position++,i=t.position;else return!0;else zn(r)?(to(t,n,i,!0),Tx(t,_t(t,!1,e)),n=i=t.position):t.position===t.lineStart&&ym(t)?ge(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);ge(t,"unexpected end of the stream within a single quoted scalar")}function Mq(t,e){var r,n,i,o,s,l;if(l=t.input.charCodeAt(t.position),l!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(l=t.input.charCodeAt(t.position))!==0;){if(l===34)return to(t,r,t.position,!0),t.position++,!0;if(l===92){if(to(t,r,t.position,!0),l=t.input.charCodeAt(++t.position),zn(l))_t(t,!1,e);else if(l<256&&Ek[l])t.result+=_k[l],t.position++;else if((s=_q(l))>0){for(i=s,o=0;i>0;i--)l=t.input.charCodeAt(++t.position),(s=Eq(l))>=0?o=(o<<4)+s:ge(t,"expected hexadecimal character");t.result+=kq(o),t.position++}else ge(t,"unknown escape sequence");r=n=t.position}else zn(l)?(to(t,r,n,!0),Tx(t,_t(t,!1,e)),r=n=t.position):t.position===t.lineStart&&ym(t)?ge(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}ge(t,"unexpected end of the stream within a double quoted scalar")}function Lq(t,e){var r=!0,n,i,o,s=t.tag,l,u=t.anchor,m,d,g,y,x,E=Object.create(null),w,U,V,q;if(q=t.input.charCodeAt(t.position),q===91)d=93,x=!1,l=[];else if(q===123)d=125,x=!0,l={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=l),q=t.input.charCodeAt(++t.position);q!==0;){if(_t(t,!0,e),q=t.input.charCodeAt(t.position),q===d)return t.position++,t.tag=s,t.anchor=u,t.kind=x?"mapping":"sequence",t.result=l,!0;r?q===44&&ge(t,"expected the node content, but found ','"):ge(t,"missed comma between flow collection entries"),U=w=V=null,g=y=!1,q===63&&(m=t.input.charCodeAt(t.position+1),_r(m)&&(g=y=!0,t.position++,_t(t,!0,e))),n=t.line,i=t.lineStart,o=t.position,gs(t,e,mm,!1,!0),U=t.tag,w=t.result,_t(t,!0,e),q=t.input.charCodeAt(t.position),(y||t.line===n)&&q===58&&(g=!0,q=t.input.charCodeAt(++t.position),_t(t,!0,e),gs(t,e,mm,!1,!0),V=t.result),x?ds(t,l,E,U,w,V,n,i,o):g?l.push(ds(t,null,E,U,w,V,n,i,o)):l.push(w),_t(t,!0,e),q=t.input.charCodeAt(t.position),q===44?(r=!0,q=t.input.charCodeAt(++t.position)):r=!1}ge(t,"unexpected end of the stream within a flow collection")}function Fq(t,e){var r,n,i=lx,o=!1,s=!1,l=e,u=0,m=!1,d,g;if(g=t.input.charCodeAt(t.position),g===124)n=!1;else if(g===62)n=!0;else return!1;for(t.kind="scalar",t.result="";g!==0;)if(g=t.input.charCodeAt(++t.position),g===43||g===45)lx===i?i=g===43?rk:Sq:ge(t,"repeat of a chomping mode identifier");else if((d=Rq(g))>=0)d===0?ge(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?ge(t,"repeat of an indentation width identifier"):(l=e+d-1,s=!0);else break;if(Go(g)){do g=t.input.charCodeAt(++t.position);while(Go(g));if(g===35)do g=t.input.charCodeAt(++t.position);while(!zn(g)&&g!==0)}for(;g!==0;){for(yx(t),t.lineIndent=0,g=t.input.charCodeAt(t.position);(!s||t.lineIndent<l)&&g===32;)t.lineIndent++,g=t.input.charCodeAt(++t.position);if(!s&&t.lineIndent>l&&(l=t.lineIndent),zn(g)){u++;continue}if(t.lineIndent<l){i===rk?t.result+=Mt.repeat(`
`,o?1+u:u):i===lx&&o&&(t.result+=`
`);break}for(n?Go(g)?(m=!0,t.result+=Mt.repeat(`
`,o?1+u:u)):m?(m=!1,t.result+=Mt.repeat(`
`,u+1)):u===0?o&&(t.result+=" "):t.result+=Mt.repeat(`
`,u):t.result+=Mt.repeat(`
`,o?1+u:u),o=!0,s=!0,u=0,r=t.position;!zn(g)&&g!==0;)g=t.input.charCodeAt(++t.position);to(t,r,t.position,!1)}return!0}function sk(t,e){var r,n=t.tag,i=t.anchor,o=[],s,l=!1,u;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),u=t.input.charCodeAt(t.position);u!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,ge(t,"tab characters must not be used in indentation")),!(u!==45||(s=t.input.charCodeAt(t.position+1),!_r(s))));){if(l=!0,t.position++,_t(t,!0,-1)&&t.lineIndent<=e){o.push(null),u=t.input.charCodeAt(t.position);continue}if(r=t.line,gs(t,e,vk,!1,!0),o.push(t.result),_t(t,!0,-1),u=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&u!==0)ge(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return l?(t.tag=n,t.anchor=i,t.kind="sequence",t.result=o,!0):!1}function Iq(t,e,r){var n,i,o,s,l,u,m=t.tag,d=t.anchor,g={},y=Object.create(null),x=null,E=null,w=null,U=!1,V=!1,q;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=g),q=t.input.charCodeAt(t.position);q!==0;){if(!U&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,ge(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),o=t.line,(q===63||q===58)&&_r(n))q===63?(U&&(ds(t,g,y,x,E,null,s,l,u),x=E=w=null),V=!0,U=!0,i=!0):U?(U=!1,i=!0):ge(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,q=n;else{if(s=t.line,l=t.lineStart,u=t.position,!gs(t,r,Sk,!1,!0))break;if(t.line===o){for(q=t.input.charCodeAt(t.position);Go(q);)q=t.input.charCodeAt(++t.position);if(q===58)q=t.input.charCodeAt(++t.position),_r(q)||ge(t,"a whitespace character is expected after the key-value separator within a block mapping"),U&&(ds(t,g,y,x,E,null,s,l,u),x=E=w=null),V=!0,U=!1,i=!1,x=t.tag,E=t.result;else if(V)ge(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=m,t.anchor=d,!0}else if(V)ge(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=m,t.anchor=d,!0}if((t.line===o||t.lineIndent>e)&&(U&&(s=t.line,l=t.lineStart,u=t.position),gs(t,e,fm,!0,i)&&(U?E=t.result:w=t.result),U||(ds(t,g,y,x,E,w,s,l,u),x=E=w=null),_t(t,!0,-1),q=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&q!==0)ge(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return U&&ds(t,g,y,x,E,null,s,l,u),V&&(t.tag=m,t.anchor=d,t.kind="mapping",t.result=g),V}function Cq(t){var e,r=!1,n=!1,i,o,s;if(s=t.input.charCodeAt(t.position),s!==33)return!1;if(t.tag!==null&&ge(t,"duplication of a tag property"),s=t.input.charCodeAt(++t.position),s===60?(r=!0,s=t.input.charCodeAt(++t.position)):s===33?(n=!0,i="!!",s=t.input.charCodeAt(++t.position)):i="!",e=t.position,r){do s=t.input.charCodeAt(++t.position);while(s!==0&&s!==62);t.position<t.length?(o=t.input.slice(e,t.position),s=t.input.charCodeAt(++t.position)):ge(t,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!_r(s);)s===33&&(n?ge(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),bk.test(i)||ge(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),s=t.input.charCodeAt(++t.position);o=t.input.slice(e,t.position),wq.test(o)&&ge(t,"tag suffix cannot contain flow indicator characters")}o&&!wk.test(o)&&ge(t,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{ge(t,"tag name is malformed: "+o)}return r?t.tag=o:ro.call(t.tagMap,i)?t.tag=t.tagMap[i]+o:i==="!"?t.tag="!"+o:i==="!!"?t.tag="tag:yaml.org,2002:"+o:ge(t,'undeclared tag handle "'+i+'"'),!0}function Oq(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&ge(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!_r(r)&&!fs(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&ge(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function Nq(t){var e,r,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!_r(n)&&!fs(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&ge(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),ro.call(t.anchorMap,r)||ge(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],_t(t,!0,-1),!0}function gs(t,e,r,n,i){var o,s,l,u=1,m=!1,d=!1,g,y,x,E,w,U;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=s=l=fm===r||vk===r,n&&_t(t,!0,-1)&&(m=!0,t.lineIndent>e?u=1:t.lineIndent===e?u=0:t.lineIndent<e&&(u=-1)),u===1)for(;Cq(t)||Oq(t);)_t(t,!0,-1)?(m=!0,l=o,t.lineIndent>e?u=1:t.lineIndent===e?u=0:t.lineIndent<e&&(u=-1)):l=!1;if(l&&(l=m||i),(u===1||fm===r)&&(mm===r||Sk===r?w=e:w=e+1,U=t.position-t.lineStart,u===1?l&&(sk(t,U)||Iq(t,U,w))||Lq(t,w)?d=!0:(s&&Fq(t,w)||Dq(t,w)||Mq(t,w)?d=!0:Nq(t)?(d=!0,(t.tag!==null||t.anchor!==null)&&ge(t,"alias node should not have any properties")):Pq(t,w,mm===r)&&(d=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):u===0&&(d=l&&sk(t,U))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&ge(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),g=0,y=t.implicitTypes.length;g<y;g+=1)if(E=t.implicitTypes[g],E.resolve(t.result)){t.result=E.construct(t.result),t.tag=E.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(ro.call(t.typeMap[t.kind||"fallback"],t.tag))E=t.typeMap[t.kind||"fallback"][t.tag];else for(E=null,x=t.typeMap.multi[t.kind||"fallback"],g=0,y=x.length;g<y;g+=1)if(t.tag.slice(0,x[g].tag.length)===x[g].tag){E=x[g];break}E||ge(t,"unknown tag !<"+t.tag+">"),t.result!==null&&E.kind!==t.kind&&ge(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+E.kind+'", not "'+t.kind+'"'),E.resolve(t.result,t.tag)?(t.result=E.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):ge(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||d}function Uq(t){var e=t.position,r,n,i,o=!1,s;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(s=t.input.charCodeAt(t.position))!==0&&(_t(t,!0,-1),s=t.input.charCodeAt(t.position),!(t.lineIndent>0||s!==37));){for(o=!0,s=t.input.charCodeAt(++t.position),r=t.position;s!==0&&!_r(s);)s=t.input.charCodeAt(++t.position);for(n=t.input.slice(r,t.position),i=[],n.length<1&&ge(t,"directive name must not be less than one character in length");s!==0;){for(;Go(s);)s=t.input.charCodeAt(++t.position);if(s===35){do s=t.input.charCodeAt(++t.position);while(s!==0&&!zn(s));break}if(zn(s))break;for(r=t.position;s!==0&&!_r(s);)s=t.input.charCodeAt(++t.position);i.push(t.input.slice(r,t.position))}s!==0&&yx(t),ro.call(ok,n)?ok[n](t,n,i):dm(t,'unknown document directive "'+n+'"')}if(_t(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,_t(t,!0,-1)):o&&ge(t,"directives end mark is expected"),gs(t,t.lineIndent-1,fm,!1,!0),_t(t,!0,-1),t.checkLineBreaks&&bq.test(t.input.slice(e,t.position))&&dm(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&ym(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,_t(t,!0,-1));return}if(t.position<t.length-1)ge(t,"end of the stream or a document separator is expected");else return}function kk(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new Aq(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,ge(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)Uq(r);return r.documents}function Hq(t,e,r){e!==null&&typeof e=="object"&&typeof r>"u"&&(r=e,e=null);var n=kk(t,r);if(typeof e!="function")return n;for(var i=0,o=n.length;i<o;i+=1)e(n[i])}function Bq(t,e){var r=kk(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new Er("expected a single document in the stream, but found more")}}var Vq=Hq,Wq=Bq,Ak={loadAll:Vq,load:Wq},Pk=Object.prototype.toString,Dk=Object.prototype.hasOwnProperty,xx=65279,$q=9,el=10,jq=13,zq=32,qq=33,Gq=34,px=35,Kq=37,Qq=38,Yq=39,Zq=42,Mk=44,Xq=45,gm=58,Jq=61,eG=62,tG=63,rG=64,Lk=91,Fk=93,nG=96,Ik=123,iG=124,Ck=125,tr={};tr[0]="\\0";tr[7]="\\a";tr[8]="\\b";tr[9]="\\t";tr[10]="\\n";tr[11]="\\v";tr[12]="\\f";tr[13]="\\r";tr[27]="\\e";tr[34]='\\"';tr[92]="\\\\";tr[133]="\\N";tr[160]="\\_";tr[8232]="\\L";tr[8233]="\\P";var oG=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],aG=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function sG(t,e){var r,n,i,o,s,l,u;if(e===null)return{};for(r={},n=Object.keys(e),i=0,o=n.length;i<o;i+=1)s=n[i],l=String(e[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),u=t.compiledTypeMap.fallback[s],u&&Dk.call(u.styleAliases,l)&&(l=u.styleAliases[l]),r[s]=l;return r}function cG(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else if(t<=4294967295)r="U",n=8;else throw new Er("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+Mt.repeat("0",n-e.length)+e}var lG=1,tl=2;function uG(t){this.schema=t.schema||hx,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=Mt.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=sG(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?tl:lG,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function ck(t,e){for(var r=Mt.repeat(" ",e),n=0,i=-1,o="",s,l=t.length;n<l;)i=t.indexOf(`
`,n),i===-1?(s=t.slice(n),n=l):(s=t.slice(n,i+1),n=i+1),s.length&&s!==`
`&&(o+=r),o+=s;return o}function mx(t,e){return`
`+Mt.repeat(" ",t.indent*e)}function pG(t,e){var r,n,i;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(i=t.implicitTypes[r],i.resolve(e))return!0;return!1}function hm(t){return t===zq||t===$q}function rl(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==xx||65536<=t&&t<=1114111}function lk(t){return rl(t)&&t!==xx&&t!==jq&&t!==el}function uk(t,e,r){var n=lk(t),i=n&&!hm(t);return(r?n:n&&t!==Mk&&t!==Lk&&t!==Fk&&t!==Ik&&t!==Ck)&&t!==px&&!(e===gm&&!i)||lk(e)&&!hm(e)&&t===px||e===gm&&i}function mG(t){return rl(t)&&t!==xx&&!hm(t)&&t!==Xq&&t!==tG&&t!==gm&&t!==Mk&&t!==Lk&&t!==Fk&&t!==Ik&&t!==Ck&&t!==px&&t!==Qq&&t!==Zq&&t!==qq&&t!==iG&&t!==Jq&&t!==eG&&t!==Yq&&t!==Gq&&t!==Kq&&t!==rG&&t!==nG}function fG(t){return!hm(t)&&t!==gm}function Xc(t,e){var r=t.charCodeAt(e),n;return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function Ok(t){var e=/^\n* /;return e.test(t)}var Nk=1,fx=2,Uk=3,Hk=4,ms=5;function dG(t,e,r,n,i,o,s,l){var u,m=0,d=null,g=!1,y=!1,x=n!==-1,E=-1,w=mG(Xc(t,0))&&fG(Xc(t,t.length-1));if(e||s)for(u=0;u<t.length;m>=65536?u+=2:u++){if(m=Xc(t,u),!rl(m))return ms;w=w&&uk(m,d,l),d=m}else{for(u=0;u<t.length;m>=65536?u+=2:u++){if(m=Xc(t,u),m===el)g=!0,x&&(y=y||u-E-1>n&&t[E+1]!==" ",E=u);else if(!rl(m))return ms;w=w&&uk(m,d,l),d=m}y=y||x&&u-E-1>n&&t[E+1]!==" "}return!g&&!y?w&&!s&&!i(t)?Nk:o===tl?ms:fx:r>9&&Ok(t)?ms:s?o===tl?ms:fx:y?Hk:Uk}function gG(t,e,r,n,i){t.dump=function(){if(e.length===0)return t.quotingType===tl?'""':"''";if(!t.noCompatMode&&(oG.indexOf(e)!==-1||aG.test(e)))return t.quotingType===tl?'"'+e+'"':"'"+e+"'";var o=t.indent*Math.max(1,r),s=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),l=n||t.flowLevel>-1&&r>=t.flowLevel;function u(m){return pG(t,m)}switch(dG(e,l,t.indent,s,u,t.quotingType,t.forceQuotes&&!n,i)){case Nk:return e;case fx:return"'"+e.replace(/'/g,"''")+"'";case Uk:return"|"+pk(e,t.indent)+mk(ck(e,o));case Hk:return">"+pk(e,t.indent)+mk(ck(hG(e,s),o));case ms:return'"'+yG(e)+'"';default:throw new Er("impossible error: invalid scalar style")}}()}function pk(t,e){var r=Ok(t)?String(e):"",n=t[t.length-1]===`
`,i=n&&(t[t.length-2]===`
`||t===`
`),o=i?"+":n?"":"-";return r+o+`
`}function mk(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function hG(t,e){for(var r=/(\n+)([^\n]*)/g,n=function(){var m=t.indexOf(`
`);return m=m!==-1?m:t.length,r.lastIndex=m,fk(t.slice(0,m),e)}(),i=t[0]===`
`||t[0]===" ",o,s;s=r.exec(t);){var l=s[1],u=s[2];o=u[0]===" ",n+=l+(!i&&!o&&u!==""?`
`:"")+fk(u,e),i=o}return n}function fk(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,n,i=0,o,s=0,l=0,u="";n=r.exec(t);)l=n.index,l-i>e&&(o=s>i?s:l,u+=`
`+t.slice(i,o),i=o+1),s=l;return u+=`
`,t.length-i>e&&s>i?u+=t.slice(i,s)+`
`+t.slice(s+1):u+=t.slice(i),u.slice(1)}function yG(t){for(var e="",r=0,n,i=0;i<t.length;r>=65536?i+=2:i++)r=Xc(t,i),n=tr[r],!n&&rl(r)?(e+=t[i],r>=65536&&(e+=t[i+1])):e+=n||cG(r);return e}function TG(t,e,r){var n="",i=t.tag,o,s,l;for(o=0,s=r.length;o<s;o+=1)l=r[o],t.replacer&&(l=t.replacer.call(r,String(o),l)),(_i(t,e,l,!1,!1)||typeof l>"u"&&_i(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=i,t.dump="["+n+"]"}function dk(t,e,r,n){var i="",o=t.tag,s,l,u;for(s=0,l=r.length;s<l;s+=1)u=r[s],t.replacer&&(u=t.replacer.call(r,String(s),u)),(_i(t,e+1,u,!0,!0,!1,!0)||typeof u>"u"&&_i(t,e+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=mx(t,e)),t.dump&&el===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=o,t.dump=i||"[]"}function xG(t,e,r){var n="",i=t.tag,o=Object.keys(r),s,l,u,m,d;for(s=0,l=o.length;s<l;s+=1)d="",n!==""&&(d+=", "),t.condenseFlow&&(d+='"'),u=o[s],m=r[u],t.replacer&&(m=t.replacer.call(r,u,m)),_i(t,e,u,!1,!1)&&(t.dump.length>1024&&(d+="? "),d+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),_i(t,e,m,!1,!1)&&(d+=t.dump,n+=d));t.tag=i,t.dump="{"+n+"}"}function SG(t,e,r,n){var i="",o=t.tag,s=Object.keys(r),l,u,m,d,g,y;if(t.sortKeys===!0)s.sort();else if(typeof t.sortKeys=="function")s.sort(t.sortKeys);else if(t.sortKeys)throw new Er("sortKeys must be a boolean or a function");for(l=0,u=s.length;l<u;l+=1)y="",(!n||i!=="")&&(y+=mx(t,e)),m=s[l],d=r[m],t.replacer&&(d=t.replacer.call(r,m,d)),_i(t,e+1,m,!0,!0,!0)&&(g=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,g&&(t.dump&&el===t.dump.charCodeAt(0)?y+="?":y+="? "),y+=t.dump,g&&(y+=mx(t,e)),_i(t,e+1,d,!0,g)&&(t.dump&&el===t.dump.charCodeAt(0)?y+=":":y+=": ",y+=t.dump,i+=y));t.tag=o,t.dump=i||"{}"}function gk(t,e,r){var n,i,o,s,l,u;for(i=r?t.explicitTypes:t.implicitTypes,o=0,s=i.length;o<s;o+=1)if(l=i[o],(l.instanceOf||l.predicate)&&(!l.instanceOf||typeof e=="object"&&e instanceof l.instanceOf)&&(!l.predicate||l.predicate(e))){if(r?l.multi&&l.representName?t.tag=l.representName(e):t.tag=l.tag:t.tag="?",l.represent){if(u=t.styleMap[l.tag]||l.defaultStyle,Pk.call(l.represent)==="[object Function]")n=l.represent(e,u);else if(Dk.call(l.represent,u))n=l.represent[u](e,u);else throw new Er("!<"+l.tag+'> tag resolver accepts not "'+u+'" style');t.dump=n}return!0}return!1}function _i(t,e,r,n,i,o,s){t.tag=null,t.dump=r,gk(t,r,!1)||gk(t,r,!0);var l=Pk.call(t.dump),u=n,m;n&&(n=t.flowLevel<0||t.flowLevel>e);var d=l==="[object Object]"||l==="[object Array]",g,y;if(d&&(g=t.duplicates.indexOf(r),y=g!==-1),(t.tag!==null&&t.tag!=="?"||y||t.indent!==2&&e>0)&&(i=!1),y&&t.usedDuplicates[g])t.dump="*ref_"+g;else{if(d&&y&&!t.usedDuplicates[g]&&(t.usedDuplicates[g]=!0),l==="[object Object]")n&&Object.keys(t.dump).length!==0?(SG(t,e,t.dump,i),y&&(t.dump="&ref_"+g+t.dump)):(xG(t,e,t.dump),y&&(t.dump="&ref_"+g+" "+t.dump));else if(l==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!s&&e>0?dk(t,e-1,t.dump,i):dk(t,e,t.dump,i),y&&(t.dump="&ref_"+g+t.dump)):(TG(t,e,t.dump),y&&(t.dump="&ref_"+g+" "+t.dump));else if(l==="[object String]")t.tag!=="?"&&gG(t,t.dump,e,o,u);else{if(l==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new Er("unacceptable kind of an object to dump "+l)}t.tag!==null&&t.tag!=="?"&&(m=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?m="!"+m:m.slice(0,18)==="tag:yaml.org,2002:"?m="!!"+m.slice(18):m="!<"+m+">",t.dump=m+" "+t.dump)}return!0}function vG(t,e){var r=[],n=[],i,o;for(dx(t,r,n),i=0,o=n.length;i<o;i+=1)e.duplicates.push(r[n[i]]);e.usedDuplicates=new Array(o)}function dx(t,e,r){var n,i,o;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(e.push(t),Array.isArray(t))for(i=0,o=t.length;i<o;i+=1)dx(t[i],e,r);else for(n=Object.keys(t),i=0,o=n.length;i<o;i+=1)dx(t[n[i]],e,r)}function bG(t,e){e=e||{};var r=new uG(e);r.noRefs||vG(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),_i(r,0,n,!0,!0)?r.dump+`
`:""}var wG=bG,EG={dump:wG};function Sx(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var Bk=jt;var Vk=hx,_G=Ak.load,aue=Ak.loadAll,Wk=EG.dump;var sue=Sx("safeLoad","load"),cue=Sx("safeLoadAll","loadAll"),lue=Sx("safeDump","dump");var Tm=class{constructor(e,r){this.data=e;this.opts=r}represent(){let e=Wk(this.data,Object.assign({replacer:PG,schema:kG},this.opts));return e=e.trim(),e.includes(`
`)&&(e=`
`+e),e}},RG=new Bk("!format",{kind:"scalar",resolve:()=>!1,instanceOf:Tm,represent:t=>t.represent()}),kG=Vk.extend({implicit:[RG]}),vx=t=>typeof t=="object"&&t!=null;function AG(t){if(vx(t))return Object.values(t).every(e=>!vx(e)&&!Array.isArray(e));if(Array.isArray(t))return t.every(e=>!vx(e)&&!Array.isArray(e))}function PG(t,e){return t===""?e:AG(e)?new Tm(e,{flowLevel:0}):e}var bx=["addSelection","addSelectionAfter","addSelectionBefore","breakLine","clearAndSetSelection","copyToClipboard","cutToClipboard","decrement","deselect","editNewLineAfter","editNewLineBefore","experimental.setInstanceReference","extractVariable","findInDocument","findInWorkspace","flashTargets","foldRegion","followLink","followLinkAside","gitAccept","gitRevert","gitStage","gitUnstage","increment","indentLine","insertCopyAfter","insertCopyBefore","insertEmptyLineAfter","insertEmptyLineBefore","insertEmptyLinesAround","joinLines","outdentLine","randomizeTargets","remove","rename","revealDefinition","revealTypeDefinition","reverseTargets","scrollToBottom","scrollToCenter","scrollToTop","setSelection","setSelectionAfter","setSelectionBefore","showDebugHover","showHover","showQuickFix","showReferences","sortTargets","toggleLineBreakpoint","toggleLineComment","unfoldRegion","private.getTargets","private.setKeyboardTarget","private.showParseTree"],MG=["callAsFunction","editNew","executeCommand","generateSnippet","getText","highlight","insertSnippet","moveToTarget","pasteFromClipboard","replace","replaceWithTarget","rewrapWithPairedDelimiter","swapTargets","wrapWithPairedDelimiter","wrapWithSnippet","parsed"],jk=[...bx,...MG];var LG=["angleBrackets","backtickQuotes","curlyBrackets","doubleQuotes","escapedDoubleQuotes","escapedParentheses","escapedSingleQuotes","escapedSquareBrackets","parentheses","singleQuotes","squareBrackets","tripleBacktickQuotes","tripleDoubleQuotes","tripleSingleQuotes"],FG=["string","any","collectionBoundary"],xm=[...LG,...FG],Ko=["argumentOrParameter","argumentList","anonymousFunction","attribute","branch","class","className","collectionItem","collectionKey","comment","private.fieldAccess","functionCall","functionCallee","functionName","ifStatement","instance","list","map","name","namedFunction","regularExpression","statement","string","type","value","condition","section","sectionLevelOne","sectionLevelTwo","sectionLevelThree","sectionLevelFour","sectionLevelFive","sectionLevelSix","selector","private.switchStatementSubject","unit","xmlBothTags","xmlElement","xmlEndTag","xmlStartTag","part","chapter","subSection","subSubSection","namedParagraph","subParagraph","environment","character","word","token","identifier","line","sentence","paragraph","boundedParagraph","document","nonWhitespaceSequence","boundedNonWhitespaceSequence","url","notebookCell","command","textFragment","disqualifyDelimiter","pairDelimiter"];function zk(t){return Ko.includes(t.type)}var qk=["simpleScopeTypeType","complexScopeTypeType","customRegex","pairedDelimiter","action","customAction","grapheme"],nl=class extends Error{constructor(e){super(e),this.name="NeedsInitialTalonUpdateError"}},hs=class extends Error{constructor(){super("Custom spoken forms are not currently supported in this ide"),this.name="DisabledCustomSpokenFormsError"}};function il(t){return t.replace(/([A-Z])/g," $1").split(" ").map(e=>e.toLowerCase()).join(" ")}function Qo(t){return t.version>=7}var no=class{constructor(e){this.hashFunction=e;this.map={}}hash(e){return this.hashFunction(e).join("\0")}set(e,r){return this.map[this.hash(e)]=r,this}has(e){return this.hash(e)in this.map}get(e){return this.map[this.hash(e)]}delete(e){return delete this.map[this.hash(e)],this}clear(){return this.map={},this}};var ys=class extends Map{constructor(r){super();this.getDefaultValue=r}get(r){let n=super.get(r);if(n!=null)return n;let i=this.getDefaultValue(r);return this.set(r,i),i}};function Gk(...t){return{dispose(){t.forEach(({dispose:e})=>{try{e()}catch(r){console.error(r)}})}}}function ol(t){return typeof t=="string"||t instanceof String}function Sm(t){let[e,...r]=t;return CG(e,r)}function CG(t,e){let r;if(ol(t)){let n=t,[i,o,...s]=e;r={version:0,spokenForm:n,action:i,targets:o,extraArgs:s,usePrePhraseSnapshot:!1}}else r=t;return r}function al(t,e){let r=new Map;return t.forEach(n=>{let i=e(n),o;r.has(i)?o=r.get(i):(o=[],r.set(i,o)),o.push(n)}),r}function Kk(t){for(let e of t)return!1;return!0}function sl(t){return Object.keys(t)}function cl(t,e){return`${t}.${e}`}function Qk(t,e,r){if(t.length<2)return[...t];if(t.length===2)return e(t[0],t[1])?[t[0]]:[...t];let n=[],i=t.reduce((o,s)=>{let l=r(s),u=o.get(l);return u==null?(o.set(l,[s]),o):(o.get(l).push(s),u.length===2&&n.push(l),o)},new Map);return n.length===0?[...t]:(n.forEach(o=>{i.set(o,jc(i.get(o),e))}),t.flatMap(o=>{let s=r(o),l=i.get(s);if(l==null||l.length===0)return[];let u=l[0];return e(u,o)?(l.shift(),u):[]}))}function Yo(t,e){if(t.length!==e.length)throw new Error("Lists must have the same length");return t.map((r,n)=>[r,e[n]])}var tA=Symbol.for("immer-nothing"),Yk=Symbol.for("immer-draftable"),Wr=Symbol.for("immer-state"),OG=process.env.NODE_ENV!=="production"?[function(t){return`The plugin for '${t}' has not been loaded into Immer. To enable the plugin, import and call \`enable${t}()\` when initializing your application.`},function(t){return`produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '${t}'`},"This object has been frozen and should not be mutated",function(t){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+t},"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.","Immer forbids circular references","The first or second argument to `produce` must be a function","The third argument to `produce` must be a function or undefined","First argument to `createDraft` must be a plain object, an array, or an immerable object","First argument to `finishDraft` must be a draft returned by `createDraft`",function(t){return`'current' expects a draft, got: ${t}`},"Object.defineProperty() cannot be used on an Immer draft","Object.setPrototypeOf() cannot be used on an Immer draft","Immer only supports deleting array indices","Immer only supports setting array indices and the 'length' property",function(t){return`'original' expects a draft, got: ${t}`}]:[];function Rr(t,...e){if(process.env.NODE_ENV!=="production"){let r=OG[t],n=typeof r=="function"?r.apply(null,e):r;throw new Error(`[Immer] ${n}`)}throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Ts=Object.getPrototypeOf;function xs(t){return!!t&&!!t[Wr]}function Xo(t){return t?rA(t)||Array.isArray(t)||!!t[Yk]||!!t.constructor?.[Yk]||_m(t)||Rm(t):!1}var NG=Object.prototype.constructor.toString();function rA(t){if(!t||typeof t!="object")return!1;let e=Ts(t);if(e===null)return!0;let r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===NG}function vm(t,e){Em(t)===0?Reflect.ownKeys(t).forEach(r=>{e(r,t[r],t)}):t.forEach((r,n)=>e(n,r,t))}function Em(t){let e=t[Wr];return e?e.type_:Array.isArray(t)?1:_m(t)?2:Rm(t)?3:0}function _x(t,e){return Em(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function nA(t,e,r){let n=Em(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function UG(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function _m(t){return t instanceof Map}function Rm(t){return t instanceof Set}function Zo(t){return t.copy_||t.base_}function Rx(t,e){if(_m(t))return new Map(t);if(Rm(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);let r=rA(t);if(e===!0||e==="class_only"&&!r){let n=Object.getOwnPropertyDescriptors(t);delete n[Wr];let i=Reflect.ownKeys(n);for(let o=0;o<i.length;o++){let s=i[o],l=n[s];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[s]={configurable:!0,writable:!0,enumerable:l.enumerable,value:t[s]})}return Object.create(Ts(t),n)}else{let n=Ts(t);if(n!==null&&r)return{...t};let i=Object.create(n);return Object.assign(i,t)}}function Mx(t,e=!1){return km(t)||xs(t)||!Xo(t)||(Em(t)>1&&(t.set=t.add=t.clear=t.delete=HG),Object.freeze(t),e&&Object.entries(t).forEach(([r,n])=>Mx(n,!0))),t}function HG(){Rr(2)}function km(t){return Object.isFrozen(t)}var BG={};function Jo(t){let e=BG[t];return e||Rr(0,t),e}var ll;function iA(){return ll}function VG(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Zk(t,e){e&&(Jo("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function kx(t){Ax(t),t.drafts_.forEach(WG),t.drafts_=null}function Ax(t){t===ll&&(ll=t.parent_)}function Xk(t){return ll=VG(ll,t)}function WG(t){let e=t[Wr];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function Jk(t,e){e.unfinalizedDrafts_=e.drafts_.length;let r=e.drafts_[0];return t!==void 0&&t!==r?(r[Wr].modified_&&(kx(e),Rr(4)),Xo(t)&&(t=bm(e,t),e.parent_||wm(e,t)),e.patches_&&Jo("Patches").generateReplacementPatches_(r[Wr].base_,t,e.patches_,e.inversePatches_)):t=bm(e,r,[]),kx(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==tA?t:void 0}function bm(t,e,r){if(km(e))return e;let n=e[Wr];if(!n)return vm(e,(i,o)=>eA(t,n,e,i,o,r)),e;if(n.scope_!==t)return e;if(!n.modified_)return wm(t,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;let i=n.copy_,o=i,s=!1;n.type_===3&&(o=new Set(i),i.clear(),s=!0),vm(o,(l,u)=>eA(t,n,i,l,u,r,s)),wm(t,i,!1),r&&t.patches_&&Jo("Patches").generatePatches_(n,r,t.patches_,t.inversePatches_)}return n.copy_}function eA(t,e,r,n,i,o,s){if(process.env.NODE_ENV!=="production"&&i===r&&Rr(5),xs(i)){let l=o&&e&&e.type_!==3&&!_x(e.assigned_,n)?o.concat(n):void 0,u=bm(t,i,l);if(nA(r,n,u),xs(u))t.canAutoFreeze_=!1;else return}else s&&r.add(i);if(Xo(i)&&!km(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;bm(t,i),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&wm(t,i)}}function wm(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&Mx(e,r)}function $G(t,e){let r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:iA(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1},i=n,o=Lx;r&&(i=[n],o=ul);let{revoke:s,proxy:l}=Proxy.revocable(i,o);return n.draft_=l,n.revoke_=s,l}var Lx={get(t,e){if(e===Wr)return t;let r=Zo(t);if(!_x(r,e))return jG(t,r,e);let n=r[e];return t.finalized_||!Xo(n)?n:n===wx(t.base_,e)?(Ex(t),t.copy_[e]=Dx(n,t)):n},has(t,e){return e in Zo(t)},ownKeys(t){return Reflect.ownKeys(Zo(t))},set(t,e,r){let n=oA(Zo(t),e);if(n?.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){let i=wx(Zo(t),e),o=i?.[Wr];if(o&&o.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(UG(r,i)&&(r!==void 0||_x(t.base_,e)))return!0;Ex(t),Px(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return wx(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,Ex(t),Px(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){let r=Zo(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){Rr(11)},getPrototypeOf(t){return Ts(t.base_)},setPrototypeOf(){Rr(12)}},ul={};vm(Lx,(t,e)=>{ul[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});ul.deleteProperty=function(t,e){return process.env.NODE_ENV!=="production"&&isNaN(parseInt(e))&&Rr(13),ul.set.call(this,t,e,void 0)};ul.set=function(t,e,r){return process.env.NODE_ENV!=="production"&&e!=="length"&&isNaN(parseInt(e))&&Rr(14),Lx.set.call(this,t[0],e,r,t[0])};function wx(t,e){let r=t[Wr];return(r?Zo(r):t)[e]}function jG(t,e,r){let n=oA(e,r);return n?"value"in n?n.value:n.get?.call(t.draft_):void 0}function oA(t,e){if(!(e in t))return;let r=Ts(t);for(;r;){let n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Ts(r)}}function Px(t){t.modified_||(t.modified_=!0,t.parent_&&Px(t.parent_))}function Ex(t){t.copy_||(t.copy_=Rx(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var zG=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){let o=r;r=e;let s=this;return function(u=o,...m){return s.produce(u,d=>r.call(this,d,...m))}}typeof r!="function"&&Rr(6),n!==void 0&&typeof n!="function"&&Rr(7);let i;if(Xo(e)){let o=Xk(this),s=Dx(e,void 0),l=!0;try{i=r(s),l=!1}finally{l?kx(o):Ax(o)}return Zk(o,n),Jk(i,o)}else if(!e||typeof e!="object"){if(i=r(e),i===void 0&&(i=e),i===tA&&(i=void 0),this.autoFreeze_&&Mx(i,!0),n){let o=[],s=[];Jo("Patches").generateReplacementPatches_(e,i,o,s),n(o,s)}return i}else Rr(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(s,...l)=>this.produceWithPatches(s,u=>e(u,...l));let n,i;return[this.produce(e,r,(s,l)=>{n=s,i=l}),n,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){Xo(t)||Rr(8),xs(t)&&(t=qG(t));let e=Xk(this),r=Dx(t,void 0);return r[Wr].isManual_=!0,Ax(e),r}finishDraft(t,e){let r=t&&t[Wr];(!r||!r.isManual_)&&Rr(9);let{scope_:n}=r;return Zk(n,e),Jk(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){let i=e[r];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}r>-1&&(e=e.slice(r+1));let n=Jo("Patches").applyPatches_;return xs(t)?n(t,e):this.produce(t,i=>n(i,e))}};function Dx(t,e){let r=_m(t)?Jo("MapSet").proxyMap_(t,e):Rm(t)?Jo("MapSet").proxySet_(t,e):$G(t,e);return(e?e.scope_:iA()).drafts_.push(r),r}function qG(t){return xs(t)||Rr(10,t),aA(t)}function aA(t){if(!Xo(t)||km(t))return t;let e=t[Wr],r;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=Rx(t,e.scope_.immer_.useStrictShallowCopy_)}else r=Rx(t,!0);return vm(r,(n,i)=>{nA(r,n,aA(i))}),e&&(e.finalized_=!1),r}var $r=new zG,Am=$r.produce,lfe=$r.produceWithPatches.bind($r),ufe=$r.setAutoFreeze.bind($r),pfe=$r.setUseStrictShallowCopy.bind($r),mfe=$r.applyPatches.bind($r),ffe=$r.createDraft.bind($r),dfe=$r.finishDraft.bind($r);var zt=[];for(let t=0;t<256;++t)zt.push((t+256).toString(16).slice(1));function sA(t,e=0){return(zt[t[e+0]]+zt[t[e+1]]+zt[t[e+2]]+zt[t[e+3]]+"-"+zt[t[e+4]]+zt[t[e+5]]+"-"+zt[t[e+6]]+zt[t[e+7]]+"-"+zt[t[e+8]]+zt[t[e+9]]+"-"+zt[t[e+10]]+zt[t[e+11]]+zt[t[e+12]]+zt[t[e+13]]+zt[t[e+14]]+zt[t[e+15]]).toLowerCase()}var cA=require("crypto"),Dm=new Uint8Array(256),Pm=Dm.length;function Fx(){return Pm>Dm.length-16&&((0,cA.randomFillSync)(Dm),Pm=0),Dm.slice(Pm,Pm+=16)}var lA=require("crypto"),Ix={randomUUID:lA.randomUUID};function GG(t,e,r){if(Ix.randomUUID&&!e&&!t)return Ix.randomUUID();t=t||{};let n=t.random??t.rng?.()??Fx();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){if(r=r||0,r<0||r+16>e.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let i=0;i<16;++i)e[r+i]=n[i];return e}return sA(n)}var Cx=GG;function uA(t,e,r){if(e>=t.length)throw Error(`Expected at least ${e+1} ${r} but received only ${t.length}`);return t[e]}function Mm(t,e){if(Array.isArray(t))return t.map(r=>Mm(r,e));if(typeof t=="object"&&t!=null){if(KG(t))return uA(e,t.index,"placeholder value");let r={};for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=Mm(t[n],e));return r}return t}function KG(t){return typeof t=="object"&&t!=null&&"type"in t&&t.type==="placeholder"}var Um=on(mA(),1);var QG={blue:"blue",green:"green",red:"red",pink:"pink",yellow:"yellow",userColor1:"navy",userColor2:"apricot",default:null},YG={ex:"ex",fox:"fox",wing:"wing",hole:"hole",frame:"frame",curve:"curve",eye:"eye",play:"play",crosshairs:"cross",bolt:"bolt",default:null},Fm={cursor:"this",that:"that",source:"source",nothing:"nothing",keyboard:null,explicit:null,decoratedSymbol:null,lineNumber:null,range:null,target:null},Im={modulo100:"row",relativeUp:"up",relativeDown:"down"};function fA(t){let e=QG[t];if(e==null)throw Error(`Unknown hat color '${t}'`);return e}function dA(t){let e=YG[t];if(e==null)throw Error(`Unknown hat shape '${t}'`);return e}function Ox(t,e){return Object.fromEntries(Object.entries(t).map(([r,n])=>[r,Object.fromEntries(Object.entries(n).map(([i,o])=>[i,e(o,r,i)]))]))}var ZG=Object.fromEntries("air bat cap drum each fine gust harp sit jury crunch look made near odd pit quench red sun trap urge vest whale plex yank zip".split(" ").map((t,e)=>[String.fromCharCode(97+e),t])),XG=Object.fromEntries("zero one two three four five six seven eight nine".split(" ").map((t,e)=>[e.toString(),t])),JG={".":"dot",",":"comma",";":"semicolon",":":"colon","!":"bang","*":"asterisk","@":"at sign","&":"ampersand","?":"question","/":"slash","\\":"backslash","-":"dash","=":"equals","+":"plus","~":"tilde",_:"underscore","#":"hash","%":"percent","^":"caret","|":"pipe",$:"dollar","\xA3":"pound","'":"quote",'"':"double quote","`":"back tick","(":"paren",")":"right paren","{":"brace","}":"right brace","[":"square","]":"right square","<":"angle",">":"right angle","\uFFFD":"special"},gA={...ZG,...XG,...JG};function io(...t){return{defaultSpokenForms:t,isDisabledByDefault:!0,isPrivate:!1}}function Lt(...t){return{defaultSpokenForms:t,isDisabledByDefault:!0,isPrivate:!0}}var hA={pairedDelimiter:{curlyBrackets:"curly",angleBrackets:"diamond",escapedDoubleQuotes:"escaped quad",escapedSingleQuotes:"escaped twin",escapedParentheses:"escaped round",escapedSquareBrackets:"escaped box",doubleQuotes:"quad",parentheses:"round",backtickQuotes:"skis",squareBrackets:"box",singleQuotes:"twin",tripleDoubleQuotes:Lt("triple quad"),tripleSingleQuotes:Lt("triple twin"),tripleBacktickQuotes:Lt("triple skis"),any:"pair",string:"string",whitespace:"void",collectionBoundary:Lt("collection boundary")},simpleScopeTypeType:{argumentOrParameter:"arg",argumentList:"arg list",attribute:"attribute",functionCall:"call",functionCallee:"callee",className:"class name",class:"class",comment:"comment",functionName:"funk name",namedFunction:"funk",ifStatement:"if state",instance:"instance",collectionItem:"item",collectionKey:"key",anonymousFunction:"lambda",list:"list",map:"map",name:"name",regularExpression:"regex",section:"section",sectionLevelOne:io("one section"),sectionLevelTwo:io("two section"),sectionLevelThree:io("three section"),sectionLevelFour:io("four section"),sectionLevelFive:io("five section"),sectionLevelSix:io("six section"),selector:"selector",statement:"state",branch:"branch",type:"type",value:"value",condition:"condition",unit:"unit",xmlElement:"element",xmlBothTags:"tags",xmlStartTag:"start tag",xmlEndTag:"end tag",part:"part",chapter:"chapter",subSection:"subsection",subSubSection:"subsubsection",namedParagraph:"paragraph",subParagraph:"subparagraph",environment:"environment",command:"command",character:"char",word:"sub",token:"token",identifier:"identifier",line:"line",sentence:"sentence",paragraph:"block",boundedParagraph:"short block",document:"file",nonWhitespaceSequence:"paint",boundedNonWhitespaceSequence:"short paint",url:"link",notebookCell:"cell",string:Lt("parse tree string"),textFragment:Lt("text fragment"),disqualifyDelimiter:Lt("disqualify delimiter"),pairDelimiter:Lt("pair delimiter"),"private.fieldAccess":Lt("access"),"private.switchStatementSubject":Lt("subject")},complexScopeTypeType:{glyph:"glyph"},surroundingPairForceDirection:{left:"left",right:"right"},simpleModifier:{excludeInterior:"bounds",toRawSelection:"just",leading:"leading",trailing:"trailing",keepContentFilter:"content",keepEmptyFilter:"empty",inferPreviousMark:"its",startOf:"start of",endOf:"end of",interiorOnly:"inside",visible:"visible",extendThroughStartOf:"head",extendThroughEndOf:"tail",everyScope:"every"},modifierExtra:{first:"first",last:"last",previous:"previous",next:"next",forward:"forward",backward:"backward",ancestor:"grand"},customRegex:{},action:{addSelection:"append",addSelectionAfter:"append post",addSelectionBefore:"append pre",breakLine:"break",scrollToBottom:"bottom",toggleLineBreakpoint:"break point",cutToClipboard:"carve",scrollToCenter:"center",clearAndSetSelection:"change",remove:"chuck",insertCopyBefore:"clone up",insertCopyAfter:"clone",toggleLineComment:"comment",copyToClipboard:"copy",scrollToTop:"crown",outdentLine:"dedent",revealDefinition:"define",editNewLineBefore:"drink",insertEmptyLineBefore:"drop",extractVariable:"extract",insertEmptyLineAfter:"float",foldRegion:"fold",followLink:"follow",followLinkAside:"follow split",flashTargets:"flash",deselect:"give",highlight:"highlight",showHover:"hover",increment:"increment",decrement:"decrement",indentLine:"indent",showDebugHover:"inspect",setSelectionAfter:"post",editNewLineAfter:"pour",setSelectionBefore:"pre",insertEmptyLinesAround:"puff",showQuickFix:"quick fix",showReferences:"reference",rename:"rename",reverseTargets:"reverse",findInDocument:"scout",findInWorkspace:"scout all",randomizeTargets:"shuffle",generateSnippet:"snippet make",sortTargets:"sort",setSelection:"take",revealTypeDefinition:"type deaf",unfoldRegion:"unfold",callAsFunction:"call",swapTargets:"swap",replaceWithTarget:"bring",moveToTarget:"move",wrapWithPairedDelimiter:"wrap",wrapWithSnippet:"wrap",rewrapWithPairedDelimiter:"repack",insertSnippet:"snippet",pasteFromClipboard:"paste",joinLines:"join",gitAccept:"git accept",gitRevert:"git revert",gitStage:"git stage",gitUnstage:"git unstage","private.showParseTree":Lt("parse tree"),"experimental.setInstanceReference":io("from"),editNew:Lt("edit new"),executeCommand:Lt("execute command"),parsed:Lt("parsed"),getText:Lt("get text"),replace:Lt("replace"),"private.getTargets":Lt("get targets"),"private.setKeyboardTarget":Lt("set keyboard target")},customAction:{},grapheme:gA};var Nx=Ox(hA,t=>typeof t=="string"?{defaultSpokenForms:[t],isDisabledByDefault:!1,isPrivate:!1}:t),Pn=Ox(Nx,({defaultSpokenForms:t,isDisabledByDefault:e,isPrivate:r})=>({spokenForms:e?[]:t,isCustom:!1,defaultSpokenForms:t,requiresTalonUpdate:!1,isPrivate:r}));var bt={rangeExclusive:"between",rangeInclusive:"past",rangeExcludingStart:null,rangeExcludingEnd:"until",listConnective:"and",swapConnective:"with",sourceDestinationConnective:"to",before:"before",after:"after",verticalRange:"slice",previous:"previous",next:"next",forward:"forward",backward:"backward"};var xA=on(TA(),1),Om=class{constructor(e){this.mooLexer=xA.default.compile(e)}reset(e,r){let{mooState:n}=r??{};return this.mooLexer.reset(e,n),this}formatError(e,r){return this.mooLexer.formatError(e,r)}has(e){return this.mooLexer.has(e)}save(){return{mooState:this.mooLexer.save()}}next(){let e=this.mooLexer.next();return this.skipToken(e)?this.next():e}transform({value:e}){return e}skipToken(e){return e?.type==="ws"}};var Dn={};for(let t of bx){let{spokenForms:e}=Pn.action[t];for(let r of e)Dn[r]={type:"simpleActionName",value:t}}var eK=["replaceWithTarget","moveToTarget"];for(let t of eK){let{spokenForms:e}=Pn.action[t];for(let r of e)Dn[r]={type:"bringMove",value:t}}var tK=["before","after","to"];for(let t of tK){let e=bt[t==="to"?"sourceDestinationConnective":t];Dn[e]={type:"insertionMode",value:t}}for(let t of Ko){let{spokenForms:e}=Pn.simpleScopeTypeType[t];for(let r of e)Dn[r]={type:"simpleScopeTypeType",value:t}}for(let t of xm){let{spokenForms:e}=Pn.pairedDelimiter[t];for(let r of e)Dn[r]={type:"pairedDelimiter",value:t}}for(let[t,e]of Object.entries(Fm))e!=null&&(Dn[e]={type:"simpleMarkType",value:t});Pn.modifierExtra.next.spokenForms.forEach(t=>{Dn[t]={type:"direction",value:"forward"}});Pn.modifierExtra.previous.spokenForms.forEach(t=>{Dn[t]={type:"direction",value:"backward"}});var qn=new Om({ws:/[ \t]+/,placeholderTarget:{match:/<target\d*>/,value:t=>t.slice(7,-1)},token:{match:Object.keys(Dn),type:t=>Dn[t].type,value:t=>Dn[t].value}});function SA(t,e){return{name:t,target:e}}function vA(t,e,r){return{name:t,source:e,destination:r}}function Nm(t,e){let r={type:"primitive"};return t!=null&&(r.modifiers=t),e!=null&&(r.mark=e),r}function bA(t,e){return{type:"primitive",insertionMode:t,target:e}}function wA(t){return{type:"containingScope",scopeType:t}}function EA(t,e){return{type:"relativeScope",scopeType:t,offset:1,length:1,direction:e}}function _A(t){return{type:t}}function RA(t){return{type:"surroundingPair",delimiter:t}}function kA(t){return{type:t}}function AA(t){return{type:"target",target:{type:"placeholder",index:t.length===0?0:parseInt(t)-1}}}function Ux(t){return t[0]}var rK={Lexer:qn,ParserRules:[{name:"main",symbols:["action"],postprocess:Ux},{name:"action",symbols:[qn.has("simpleActionName")?{type:"simpleActionName"}:simpleActionName,"target"],postprocess:([t,e])=>SA(t,e)},{name:"action",symbols:[qn.has("bringMove")?{type:"bringMove"}:bringMove,"target","destination"],postprocess:([t,e,r])=>vA(t,e,r)},{name:"destination",symbols:["primitiveDestination"],postprocess:Ux},{name:"destination",symbols:[qn.has("insertionMode")?{type:"insertionMode"}:insertionMode,"target"],postprocess:([t,e])=>bA(t,e)},{name:"target",symbols:["primitiveTarget"],postprocess:Ux},{name:"primitiveTarget$ebnf$1",symbols:["modifier"]},{name:"primitiveTarget$ebnf$1",symbols:["primitiveTarget$ebnf$1","modifier"],postprocess:t=>t[0].concat([t[1]])},{name:"primitiveTarget",symbols:["primitiveTarget$ebnf$1"],postprocess:([t])=>Nm(t,void 0)},{name:"primitiveTarget",symbols:["mark"],postprocess:([t])=>Nm(void 0,t)},{name:"primitiveTarget$ebnf$2",symbols:["modifier"]},{name:"primitiveTarget$ebnf$2",symbols:["primitiveTarget$ebnf$2","modifier"],postprocess:t=>t[0].concat([t[1]])},{name:"primitiveTarget",symbols:["primitiveTarget$ebnf$2","mark"],postprocess:([t,e])=>Nm(t,e)},{name:"modifier",symbols:["scopeType"],postprocess:([t])=>wA(t)},{name:"modifier",symbols:[qn.has("direction")?{type:"direction"}:direction,"scopeType"],postprocess:([t,e])=>EA(e,t)},{name:"scopeType",symbols:[qn.has("simpleScopeTypeType")?{type:"simpleScopeTypeType"}:simpleScopeTypeType],postprocess:([t])=>_A(t)},{name:"scopeType",symbols:[qn.has("pairedDelimiter")?{type:"pairedDelimiter"}:pairedDelimiter],postprocess:([t])=>RA(t)},{name:"mark",symbols:[qn.has("simpleMarkType")?{type:"simpleMarkType"}:simpleMarkType],postprocess:([t])=>kA(t)},{name:"mark",symbols:[qn.has("placeholderTarget")?{type:"placeholderTarget"}:placeholderTarget],postprocess:([t])=>AA(t)}],ParserStart:"main"},PA=rK;function nK(){return new Um.Parser(Um.Grammar.fromCompiled(PA))}function DA(t){let e=nK();if(e.feed(t),e.results.length!==1)throw new Error(`Expected exactly one result, got ${e.results.length}`);return e.results[0]}function Hm(t,e){let r=DA(t);return Mm(r,e)}function pl(t){switch(t.name){case"callAsFunction":return[t.callee,t.argument];case"replaceWithTarget":case"moveToTarget":return[t.source,...MA(t.destination)];case"swapTargets":return[t.target1,t.target2];case"pasteFromClipboard":case"insertSnippet":case"replace":case"editNew":return MA(t.destination);case"parsed":return pl(Hm(t.content,t.arguments));default:return[t.target]}}function MA(t){switch(t.type){case"list":return t.destinations.map(({target:e})=>e);case"primitive":return[t.target];case"implicit":return[]}}function Bx(t){return t.flatMap(Hx)}function Hx(t){switch(t.type){case"primitive":return[t];case"list":return t.elements.flatMap(Hx);case"range":return[t.anchor,t.active].flatMap(Hx);case"implicit":return[]}}var iK={arrowFunction:"anonymousFunction",dictionary:"map",regex:"regularExpression"},oK={purple:"pink"};function aK(t){t.modifiers?.forEach(e=>{(e.type==="containingScope"||e.type==="everyScope")&&(e.scopeType.type=iK[e.scopeType.type]??e.scopeType.type)})}function sK(t){t.mark?.type==="decoratedSymbol"&&(t.mark.symbolColor=oK[t.mark.symbolColor]??t.mark.symbolColor)}function Vx(t){Bx(t).forEach(e=>{aK(e),sK(e)})}function LA(t){return{...t,version:1}}var cK={type:"primitive",mark:{type:"cursor"},selectionType:"token",position:"contents",modifier:{type:"identity"},insideOutsideType:"inside"},lK={type:"primitive",isImplicit:!0},FA=t=>wi(t,cK)?lK:t;function IA(t){let e=t.action;return{spokenForm:t.spokenForm,action:{name:e,args:t.extraArgs},targets:pK(t.targets,e),usePrePhraseSnapshot:t.usePrePhraseSnapshot??!1,version:2}}function uK(t){switch(t.type){case"identity":return[];case"containingScope":{let{includeSiblings:e,scopeType:r,type:n,...i}=t;return[{type:e?"everyScope":"containingScope",scopeType:{type:r},...i}]}case"surroundingPair":{let{delimiterInclusion:e,...r}=t,n={type:"containingScope",scopeType:r};return e==="interiorOnly"||e==="excludeInterior"?n.scopeType.delimiter==="any"?[{type:e}]:[{type:e},n]:[n]}case"subpiece":{let{type:e,pieceType:r,...n}=t;return[{type:"ordinalRange",scopeType:{type:r},...n}]}case"head":return[{type:"extendThroughStartOf"}];case"tail":return[{type:"extendThroughEndOf"}];default:return[t]}}function Wx(t,e){let{type:r,isImplicit:n,mark:i,insideOutsideType:o,modifier:s,selectionType:l,position:u}=t,m=[];if(u&&u!=="contents"&&(u==="before"?o==="inside"?m.push({type:"position",position:"start"}):e==="remove"?m.push({type:"leading"}):m.push({type:"position",position:"before"}):o==="inside"?m.push({type:"position",position:"end"}):e==="remove"?m.push({type:"trailing"}):m.push({type:"position",position:"after"})),l)switch(l){case"token":if(s?.type==="subpiece")break;case"line":if(i?.type==="lineNumber")break;default:m.push({type:"containingScope",scopeType:{type:l}})}return s&&m.push(...uK(s)),{type:r,isImplicit:n,modifiers:m.length>0?m:void 0,mark:i?.type==="cursorToken"?void 0:i}}function CA(t,e){switch(t.type){case"list":return{...t,elements:t.elements.map(r=>CA(r,e))};case"range":{let{type:r,rangeType:n,start:i,end:o,excludeStart:s,excludeEnd:l}=t;return{type:r,rangeType:n,anchor:Wx(i,e),active:Wx(o,e),excludeAnchor:s??!1,excludeActive:l??!1}}case"primitive":return Wx(t,e)}}function pK(t,e){return t.map(r=>CA(r,e)).map(r=>r.type==="primitive"?FA(r):r)}function OA(t){return{...t,version:3,targets:t.targets.map(NA)}}function NA(t){switch(t.type){case"list":return{...t,elements:t.elements.map(e=>NA(e))};case"range":{let{anchor:e,active:r,...n}=t;return{anchor:$x(e),active:$x(r),...n}}case"primitive":return $x(t)}}function $x(t){let e=t.modifiers!=null?t.modifiers.map(fK):void 0;if(t.mark?.type==="lineNumber"){let{anchor:r,active:n}=t.mark;if(r.type!==n.type||r.lineNumber<0!=n.lineNumber<0)return{type:"range",anchor:{type:"primitive",mark:fl(r),modifiers:e},active:{type:"primitive",mark:fl(n)},excludeAnchor:!1,excludeActive:!1}}return{...t,mark:t.mark!=null?mK(t.mark):void 0,modifiers:e}}function mK(t){switch(t.type){case"lineNumber":return dK(t);default:return t}}function fK(t){switch(t.type){case"ordinalRange":return gK(t);default:return t}}function dK(t){return wi(t.anchor,t.active)?fl(t.anchor):{type:"range",anchor:fl(t.anchor),active:fl(t.active)}}function gK(t){return t.anchor===t.active?ml(t.scopeType,t.anchor):t.anchor===0&&t.active>t.anchor?ml(t.scopeType,t.anchor,t.active-t.anchor+1):t.anchor<0&&t.active===-1?ml(t.scopeType,t.anchor,-t.anchor):{type:"range",anchor:ml(t.scopeType,t.anchor),active:ml(t.scopeType,t.active),excludeAnchor:t.excludeAnchor,excludeActive:t.excludeActive}}function fl(t){return{type:"lineNumber",lineNumberType:t.type,lineNumber:t.lineNumber}}function ml(t,e,r=1){return{type:"ordinalScope",scopeType:t,start:e,length:r}}function HA(t){return{...t,version:4,targets:t.targets.map(BA)}}function BA(t){switch(t.type){case"primitive":return UA(t);case"range":{let{anchor:e,...r}=t;return{...r,anchor:UA(e)}}case"list":{let{elements:e,...r}=t;return{...r,elements:e.map(BA)}}}}function UA(t){return t.mark==null&&t.modifiers==null||t.isImplicit?{type:"implicit"}:t}function VA(t){return{...t,version:5,action:hK(t.action),targets:t.targets.map(Bm)}}function hK(t){switch(t.name){case"wrapWithSnippet":{let[e,r]=yK(t.args[0]);return{name:"wrapWithSnippet",args:[{type:"named",name:e,variableName:r}]}}case"insertSnippet":{let[e,r]=t.args,n={type:"named",name:e};return r!=null&&(n.substitutions=r),{name:"insertSnippet",args:[n]}}default:return t}}function yK(t){let[e,r]=t.split(".");if(e==null||r==null)throw new Error("Snippet location missing '.'");return[e,r]}function Bm(t){switch(t.type){case"implicit":return t;case"list":return{...t,elements:t.elements.map(Bm)};case"range":return{...t,anchor:Bm(t.anchor),active:Bm(t.active)};case"primitive":return{...t,mark:t.mark!=null?jx(t.mark):void 0,modifiers:t.modifiers!=null&&t.modifiers.length>0?t.modifiers.map(zx):void 0}}}function jx(t){return t.type==="range"?{...t,anchor:jx(t.anchor),active:jx(t.active),excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1}:t}function zx(t){return t.type==="range"?{...t,anchor:zx(t.anchor),active:zx(t.active),excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1}:t}var TK={bring:"replaceWithTarget",call:"callAsFunction",clear:"clearAndSetSelection",commentLines:"toggleLineComment",copy:"copyToClipboard",cut:"cutToClipboard",delete:"remove",editNewLineAbove:"editNewLineBefore",editNewLineBelow:"editNewLineAfter",findInFiles:"findInWorkspace",fold:"foldRegion",indentLines:"indentLine",insertEmptyLineAbove:"insertEmptyLineBefore",insertEmptyLineBelow:"insertEmptyLineAfter",insertLineAfter:"editNewLineAfter",insertLineBefore:"editNewLineBefore",move:"moveToTarget",outdentLines:"outdentLine",paste:"pasteFromClipboard",reverse:"reverseTargets",setBreakpoint:"toggleLineBreakpoint",sort:"sortTargets",swap:"swapTargets",unfold:"unfoldRegion",use:"replaceWithTarget",wrap:"wrapWithPairedDelimiter"};function qx(t){let e=TK[t]??t;if(!jk.includes(e))throw new Error(`Unknown action name: ${e}`);return e}function WA(t){return{version:6,spokenForm:t.spokenForm,usePrePhraseSnapshot:t.usePrePhraseSnapshot,action:xK(t.action,t.targets)}}function xK(t,e){let r=qx(t.name);switch(r){case"replaceWithTarget":case"moveToTarget":return{name:r,source:ln(e[0]),destination:dl(e[1])};case"swapTargets":return{name:r,target1:ln(e[0]),target2:ln(e[1])};case"callAsFunction":return{name:r,callee:ln(e[0]),argument:ln(e[1])};case"pasteFromClipboard":return{name:r,destination:dl(e[0])};case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return{name:r,left:t.args[0],right:t.args[1],target:ln(e[0])};case"generateSnippet":return{name:r,snippetName:t.args?.[0],target:ln(e[0])};case"insertSnippet":return{name:r,snippetDescription:t.args[0],destination:dl(e[0])};case"wrapWithSnippet":return{name:r,snippetDescription:t.args[0],target:ln(e[0])};case"executeCommand":return{name:r,commandId:t.args[0],options:t.args?.[1],target:ln(e[0])};case"replace":return{name:r,replaceWith:t.args[0],destination:dl(e[0])};case"highlight":{let n={name:r,target:ln(e[0])};return t.args?.[0]!=null&&(n.highlightId=t.args?.[0]),n}case"editNew":return{name:r,destination:dl(e[0])};case"getText":return{name:r,options:t.args?.[0],target:ln(e[0])};case"parsed":throw Error("Parsed action should not be present in V5");default:return{name:r,target:ln(e[0])}}}function ln(t){switch(t.type){case"list":case"range":case"primitive":return SK(t);case"implicit":return t}}function SK(t){switch(t.type){case"list":return vK(t);case"range":case"primitive":return Vm(t)}}function vK(t){return{...t,elements:t.elements.map(Vm)}}function Vm(t){switch(t.type){case"range":return $A(t);case"primitive":return Wm(t)}}function $A(t){let{anchor:e,active:r}=t,n={type:"range",anchor:e.type==="implicit"?e:Wm(e),active:Wm(r),excludeAnchor:t.excludeAnchor,excludeActive:t.excludeActive};return t.rangeType!=null&&(n.rangeType=t.rangeType),n}function Wm(t){let e={type:"primitive"},r=kK(t.modifiers);return r!=null&&(e.modifiers=r),t.mark!=null&&(e.mark=t.mark),e}function dl(t){switch(t.type){case"list":return bK(t);case"range":return wK(t);case"primitive":return EK(t);case"implicit":return _K()}}function bK(t){let e=[],r=[],n,i=()=>{r.length>0&&e.push({type:"primitive",insertionMode:n??"to",target:r.length===1?r[0]:{type:"list",elements:r}})};return t.elements.forEach(o=>{let s=$m(o);s!=null?(i(),r=[Vm(o)],n=s):r.push(Vm(o))}),i(),e.length>1?{type:"list",destinations:e}:e[0]}function wK(t){return{type:"primitive",insertionMode:$m(t.anchor)??"to",target:$A(t)}}function EK(t){return{type:"primitive",insertionMode:$m(t)??"to",target:Wm(t)}}function _K(){return{type:"implicit"}}function $m(t){switch(t.type){case"implicit":return"to";case"primitive":return RK(t);case"range":return $m(t.anchor)}}function RK(t){let e=t.modifiers?.find(r=>r.type==="position");if(e!=null){if(t.modifiers.indexOf(e)!==0)throw Error("Position modifier has to be at first index");if(e?.position==="before"||e?.position==="after")return e.position}}function kK(t){let e=[];if(t!=null)for(let r of t)r.type==="position"?r.position==="start"?e.push({type:"startOf"}):r.position==="end"&&e.push({type:"endOf"}):e.push(r);return e.length>0?e:void 0}function jA(t){return{...t,version:7}}function Kx(t){let e=AK(t,7),{action:r,usePrePhraseSnapshot:n=!1,spokenForm:i}=e;return{version:7,spokenForm:i,action:Am(r,o=>{let s=pl(o);Vx(s),r.name}),usePrePhraseSnapshot:n}}function AK(t,e){if(t.version>7)throw new bp;for(;t.version<e;)switch(t.version){case 0:t=LA(t);break;case 1:t=IA(t);break;case 2:t=OA(t);break;case 3:t=HA(t);break;case 4:t=VA(t);break;case 5:t=WA(t);break;case 6:t=jA(t);break;default:throw new Error(`Can't upgrade from unknown version ${t.version}`)}return t}var Qx;function jm(t){Qx=t}function k(){if(Qx==null)throw Error("Tried to access ide before it was injected");return Qx}var zm=class{constructor(e){this.maxLength=e;this.stack=[];this.index=void 0}push(e){this.index!=null?this.stack.splice(this.index+1,this.stack.length-this.index-1,e):this.stack.push(e),this.stack.length>this.maxLength&&this.stack.shift(),this.index=this.stack.length-1}undo(){if(this.index!=null&&this.index>0)return this.index--,this.stack[this.index]}redo(){if(this.index!=null&&this.index<this.stack.length-1)return this.index++,this.stack[this.index]}};var PK=25,qm=class{constructor(){this.targetMap=new Map;this.targetHistory=new ys(()=>new zm(PK));this.notifier=new Jt}set(e,r,{history:n=!1}={}){this.targetMap.set(e,r),n&&r!=null&&this.targetHistory.get(e).push(r),this.notifier.notifyListeners(e,r)}get(e){return this.targetMap.get(e)}undo(e){let r=this.targetHistory.get(e).undo();r!=null&&this.set(e,r,{history:!1})}redo(e){let r=this.targetHistory.get(e).redo();r!=null&&this.set(e,r,{history:!1})}onStoredTargets(e){for(let r of ps)e(r,this.get(r));return this.notifier.registerListener(e)}};function Rt(t){if(t.length===0)throw new Error("Require at least one target with this action");let e=t.map(r=>r.editor);if(new Set(e).size>1)throw new Error("Can only have one editor with this action");return e[0]}function kr(t){if(t.length!==1)throw new Error("Can only have one target with this action");return t[0]}async function Ri(t,e,r){return Promise.all(Yx(t,e).map(([n,i])=>r(n,i)))}async function ct(t,e){return Ri(t,r=>r.editor,e)}async function zA(t,e){let r=Yx(t,i=>i.editor),n=[];for(let[i,o]of r)n.push(await e(i,o));return n}function qA(t){return Yx(t,e=>e.editor)}function Yx(t,e){let n=al(t,i=>e(i).document.uri);return Array.from(n.values(),i=>[e(i[0]),i])}function un(t,e){return e!=null?Dt(t,e).map(([n,i])=>({editor:n.editor,selection:n?.isReversed?new st(i.end,i.start):new st(i.start,i.end)})):t.map(n=>({editor:n.editor,selection:n.contentSelection}))}function pn(t,e){return t.textualType==="line"?Vr(e):mr(e)}function DK(t){return pn(t,t.contentRange)}function Be(t,e,r,n=DK){return t.flashRanges(e.map(i=>({editor:i.editor,range:n(i),style:r})))}function oo(t,e){return new Y(new _e(e.start.line,0),t.document.lineAt(e.end).range.end)}function Zx(t,e){return e.isEmpty?0:t.document.offsetAt(e.end)-t.document.offsetAt(e.start)}function GA(t,e){let[r,n]=e instanceof _e?[e,e]:[e.start,e.end];return t.start.isBefore(r)&&t.end.isAfter(n)}function ki(t,...e){for(let r of e)r!=null&&(t=t.union(r));return t}var Gm=class t{constructor(e,r,n){this.target=e;this.insertionMode=r;this.contentRange=LK(e.contentRange,r),this.isBefore=r==="before",this.isLineDelimiter=e.insertionDelimiter.includes(`
`),this.indentationString=n??this.isLineDelimiter?MK(e.editor,e.contentRange):"",this.insertionPrefix=e.prefixRange!=null?e.editor.document.getText(e.prefixRange):void 0}get contentSelection(){return this.contentRange.toSelection(this.target.isReversed)}get editor(){return this.target.editor}get insertionDelimiter(){return this.target.insertionDelimiter}get isRaw(){return this.target.isRaw}withTarget(e){return new t(e,this.insertionMode,this.indentationString)}getEditNewActionType(){return this.insertionMode==="after"&&this.target.contentRange.isSingleLine&&this.insertionDelimiter===`
`&&this.insertionPrefix==null?"insertLineAfter":"edit"}constructChangeEdit(e,r=!1){return this.insertionMode==="before"||this.insertionMode==="after"?this.constructEditWithDelimiters(e,r):this.constructEditWithoutDelimiters(e)}constructEditWithDelimiters(e,r){let n=this.getEditRange(),i=this.getEditText(e,r),o=s=>this.updateRange(s,e,r);return{range:n,text:i,isReplace:this.insertionMode==="after",updateRange:o}}constructEditWithoutDelimiters(e){return{range:this.contentRange,text:e,updateRange:r=>r}}getEditRange(){let e=(()=>{let r=this.isBefore?ki(this.target.contentRange,this.target.prefixRange).start:this.target.contentRange.end;if(this.isLineDelimiter){let n=this.editor.document.lineAt(r),i=this.isBefore?n.rangeTrimmed?.start??n.range.start:n.rangeTrimmed?.end??n.range.end;if(r.isEqual(i))return this.isBefore?n.range.start:n.range.end}return r})();return new Y(e,e)}getEditText(e,r){let i=(r?"":this.indentationString)+(this.insertionPrefix??"")+e;return this.isBefore?i+this.insertionDelimiter:this.insertionDelimiter+i}updateRange(e,r,n){let i=this.editor.document.offsetAt(e.start)+(n?0:this.indentationString.length)+(this.insertionPrefix?.length??0),o=this.isBefore?i:i+this.getLengthOfInsertionDelimiter(),s=o+r.length;return new Y(this.editor.document.positionAt(o),this.editor.document.positionAt(s))}getLengthOfInsertionDelimiter(){if(this.editor.document.eol==="CRLF"){let e=this.insertionDelimiter.match(/\n/g);if(e!=null)return this.insertionDelimiter.length+e.length}return this.insertionDelimiter.length}};function MK(t,e){let r=Number.MAX_SAFE_INTEGER,n="";for(let i=e.start.line;i<=e.end.line;++i){let o=t.document.lineAt(i);if(o.range.isEmpty||o.isEmptyOrWhitespace&&!e.isSingleLine)continue;let s=o.rangeTrimmed?.start??o.range.end;s.character<r&&(r=s.character,n=o.text.slice(0,r))}return n}function LK(t,e){switch(e){case"before":return t.start.toEmptyRange();case"after":return t.end.toEmptyRange();case"to":return t}}function Ss(t,e,r,n){return FK(t.contentRange,e.contentRange,r,n)}function FK(t,e,r,n){return new Y(r?t.start:t.end,n?e.end:e.start)}function vs(t,e,r,n){let i=r?t.contentRange.start:new _e(t.contentRange.end.line+1,0),o=n?e.contentRange.end:e.editor.document.lineAt(e.contentRange.start.line-1).range.end;return new Y(i,o)}var qe=class t{constructor(e){this.hasExplicitScopeType=!0;this.hasExplicitRange=!0;this.isRaw=!1;this.isImplicit=!1;this.isNotebookCell=!1;this.textualType="token";this.state={editor:e.editor,isReversed:e.isReversed,contentRange:e.contentRange,thatTarget:e.thatTarget}}get editor(){return this.state.editor}get isReversed(){return this.state.isReversed}get thatTarget(){return this.state.thatTarget!=null?this.state.thatTarget.thatTarget:this}get contentText(){return this.editor.document.getText(this.contentRange)}get contentSelection(){return this.contentRange.toSelection(this.isReversed)}get contentRange(){return this.state.contentRange}constructRemovalEdit(){return{range:this.getRemovalRange(),text:"",updateRange:e=>e}}getRemovalHighlightRange(){return pn(this,this.getRemovalRange())}withThatTarget(e){return this.cloneWith({thatTarget:e})}withContentRange(e){return this.cloneWith({contentRange:e})}getInterior(){}getBoundary(){}cloneWith(e){let r=Object.getPrototypeOf(this).constructor;return new r({...this.getCloneParameters(),...e})}maybeCreateRichRangeTarget(e,r){let{constructor:n}=Object.getPrototypeOf(this);return new n({...this.getCloneParameters(),isReversed:e,contentRange:Ss(this,r,!0,!0)})}isEqual(e){return e instanceof t&&wi(this.getEqualityParameters(),e.getEqualityParameters())}getEqualityParameters(){let{thatTarget:e,...r}=this.getCloneParameters();return{...r}}toDestination(e){return new Gm(this,e)}toPlainObject(){return{type:this.type,contentRange:Zc(this.contentRange),isReversed:this.isReversed,hasExplicitRange:this.hasExplicitRange}}};function ea(t,e){let{document:r}=t,n=r.getText(e),i=n.length-n.trimStart().length,o=n.length-n.trimEnd().length,s=r.offsetAt(e.start)+i,l=r.offsetAt(e.end)-o,u=r.positionAt(s),m=r.positionAt(l);return new Y(u,m)}function Km(t,e,r,n){return r==null?void 0:new t({editor:e,isReversed:n,contentRange:r})}var Ye=class extends qe{constructor(r){super(r);this.type="PlainTarget";this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.textualType=r.textualType??"token",this.insertionDelimiter=r.insertionDelimiter??""}getCloneParameters(){return{...this.state,textualType:this.textualType,insertionDelimiter:this.insertionDelimiter}}};function bs(t,e,r){return Km(Ye,t,e,r)}var Qm=class extends qe{constructor(r){super(r);this.type="DocumentTarget";this.textualType="line";this.insertionDelimiter=`

`}getInterior(){return[new Ye({editor:this.editor,isReversed:this.isReversed,contentRange:ea(this.editor,this.contentRange)})]}getRemovalRange(){return this.contentRange}getLeadingDelimiterTarget(){}getTrailingDelimiterTarget(){}getCloneParameters(){return this.state}};var fr=class t extends qe{constructor(){super(...arguments);this.type="LineTarget";this.textualType="line";this.insertionDelimiter=`
`;this.getRemovalHighlightRange=()=>Vr(this.fullLineContentRange)}get fullLineContentRange(){return oo(this.editor,this.contentRange)}getLeadingDelimiterTarget(){return bs(this.editor,IK(this.editor,this.fullLineContentRange),this.isReversed)}getTrailingDelimiterTarget(){return bs(this.editor,CK(this.editor,this.fullLineContentRange),this.isReversed)}getRemovalRange(){let r=this.fullLineContentRange,n=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return n==null?r:r.union(n.contentRange)}maybeCreateRichRangeTarget(r,n){return new t({editor:this.editor,isReversed:r,contentRange:vs(this,n,!0,!0)})}getCloneParameters(){return this.state}};function IK(t,e){let{start:r}=e;return r.line>0?new Y(t.document.lineAt(r.line-1).range.end,e.start):void 0}function CK(t,e){let{end:r}=e;return r.line+1<t.document.lineCount?new Y(e.end,new _e(r.line+1,0)):void 0}function Xx(t,e,r){return Km(fr,t,e,r)}var Ym=class t{constructor(e,r){this.target=e;this.insertionMode=r}get editor(){return this.target.editor}get contentRange(){return this.target.contentRange}get contentSelection(){return this.target.contentSelection}get insertionDelimiter(){return this.target.insertionDelimiter}get isRaw(){return this.target.isRaw}withTarget(e){return new t(e,this.insertionMode)}getEditNewActionType(){throw new Error("Method not implemented.")}constructChangeEdit(e){throw new Error("Method not implemented.")}};var Zm=class extends qe{constructor(r){super(r);this.type="NotebookCellTarget";this.insertionDelimiter=`
`;this.isNotebookCell=!0;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange}getCloneParameters(){return this.state}toDestination(r){return new Ym(this,r)}};var ao=class t extends qe{constructor(){super(...arguments);this.type="ParagraphTarget";this.textualType="line";this.insertionDelimiter=`

`}getLeadingDelimiterTarget(){return Xx(this.editor,OK(this.editor,this.fullLineContentRange),this.isReversed)}getTrailingDelimiterTarget(){return Xx(this.editor,NK(this.editor,this.fullLineContentRange),this.isReversed)}getRemovalRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.contentRange.union(r.contentRange):this.contentRange;return new fr({contentRange:n,editor:this.editor,isReversed:this.isReversed}).getRemovalRange()}get fullLineContentRange(){return oo(this.editor,this.contentRange)}getRemovalHighlightRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.fullLineContentRange.union(r.contentRange):this.fullLineContentRange;return Vr(n)}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,contentRange:vs(this,n,!0,!0)})}getCloneParameters(){return this.state}};function OK(t,e){let{document:r}=t,n=r.lineAt(e.start),i=UK(r,n);if(i!=null)return i.lineNumber+1===n.lineNumber?void 0:new Y(new _e(i.lineNumber+1,0),r.lineAt(n.lineNumber-1).range.end);if(n.lineNumber>0)return new Y(new _e(0,0),r.lineAt(n.lineNumber-1).range.end)}function NK(t,e){let{document:r}=t,n=r.lineAt(e.end),i=HK(r,n);if(i!=null)return i.lineNumber-1===n.lineNumber?void 0:new Y(new _e(n.lineNumber+1,0),r.lineAt(i.lineNumber-1).range.end);if(n.lineNumber<r.lineCount-1)return new Y(new _e(n.lineNumber+1,0),r.lineAt(r.lineCount-1).range.end)}function UK(t,e){for(;e.lineNumber>0;){let r=t.lineAt(e.lineNumber-1);if(!r.isEmptyOrWhitespace)return r;e=r}return null}function HK(t,e){for(;e.lineNumber+1<t.lineCount;){let r=t.lineAt(e.lineNumber+1);if(!r.isEmptyOrWhitespace)return r;e=r}return null}var so=class extends qe{constructor(){super(...arguments);this.type="RawSelectionTarget";this.textualType="character";this.insertionDelimiter="";this.isRaw=!0;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.getCloneParameters=()=>this.state}};function gl(t){let e=ki(t.contentRange,t.prefixRange),r=t.getTrailingDelimiterTarget()??t.getLeadingDelimiterTarget();return r!=null?e.union(r.contentRange):e}var BK=['"',"'","(","[","{","<"],VK=['"',"'",")","]","}",">",",",";",":"];function Gn(t){let{editor:e}=t,{start:r}=ki(t.contentRange,t.prefixRange),o=e.document.lineAt(r).text.slice(0,r.character).match(/\s+$/);return o==null?void 0:new Ye({contentRange:new Y(r.line,r.character-o[0].length,r.line,r.character),editor:e,isReversed:t.isReversed})}function Kn(t){let{editor:e}=t,{end:r}=t.contentRange,o=e.document.lineAt(r).text.slice(r.character).match(/^\s+/);return o==null?void 0:new Ye({contentRange:new Y(r.line,r.character,r.line,r.character+o[0].length),editor:e,isReversed:t.isReversed})}function co(t){let{editor:e}=t,r=ki(t.contentRange,t.prefixRange),{start:n,end:i}=r,o=t.getLeadingDelimiterTarget()?.contentRange??n.toEmptyRange(),s=t.getTrailingDelimiterTarget()?.contentRange??i.toEmptyRange(),l=oo(e,r);return o.union(s).isRangeEqual(l)?l:!s.isEmpty&&(!o.isEmpty||r.start.isEqual(l.start)||BK.includes(WK(e,r)))?r.union(s):!o.isEmpty&&(r.end.isEqual(l.end)||VK.includes($K(e,r)))?r.union(o):r}function WK(t,e){let{start:r}=e,n=t.document.lineAt(r);return r.isAfter(n.range.start)?t.document.getText(new Y(r.translate(void 0,-1),r)):""}function $K(t,e){let{end:r}=e,n=t.document.lineAt(r);return r.isBefore(n.range.end)?t.document.getText(new Y(r.translate(void 0,1),r)):""}var rr=class extends qe{constructor(){super(...arguments);this.type="TokenTarget";this.textualType="token";this.insertionDelimiter=" "}getLeadingDelimiterTarget(){return Gn(this)}getTrailingDelimiterTarget(){return Kn(this)}getRemovalRange(){return co(this)}getCloneParameters(){return this.state}};function Jx(t){let{editor:e,isReversed:r}=t,{document:n}=e,i=ki(t.contentRange,t.prefixRange);return jK(n,i)?zK(n,i)?new ao({editor:e,isReversed:r,contentRange:i}):new fr({editor:e,isReversed:r,contentRange:i}):new rr({editor:e,isReversed:r,contentRange:i})}function jK(t,e){let r=t.lineAt(e.start).rangeTrimmed?.start,n=t.lineAt(e.end).rangeTrimmed?.end;return r!=null&&n!=null&&r.isEqual(e.start)&&n.isEqual(e.end)}function zK(t,e){let{start:r,end:n}=e;return(r.line===0||t.lineAt(r.line-1).isEmptyOrWhitespace)&&(n.line===t.lineCount-1||t.lineAt(n.line+1).isEmptyOrWhitespace)}var ws=class t extends qe{constructor(r){super(r);this.type="ScopeTypeTarget";this.scopeTypeType_=r.scopeTypeType,this.removalRange_=r.removalRange,this.leadingDelimiterRange_=r.leadingDelimiterRange,this.trailingDelimiterRange_=r.trailingDelimiterRange,this.prefixRange=r.prefixRange,this.insertionDelimiter=r.insertionDelimiter??qK(r.scopeTypeType),this.hasDelimiterRange_=!!this.leadingDelimiterRange_||!!this.trailingDelimiterRange_}getLeadingDelimiterTarget(){if(this.leadingDelimiterRange_!=null)return new Ye({editor:this.editor,isReversed:this.isReversed,contentRange:this.leadingDelimiterRange_});if(!this.hasDelimiterRange_)return Gn(this)}getTrailingDelimiterTarget(){if(this.trailingDelimiterRange_!=null)return new Ye({editor:this.editor,isReversed:this.isReversed,contentRange:this.trailingDelimiterRange_});if(!this.hasDelimiterRange_)return Kn(this)}getRemovalRange(){return this.removalRange_!=null?this.removalRange_:this.hasDelimiterRange_?gl(this):Jx(this).getRemovalRange()}getRemovalHighlightRange(){return this.removalRange_!=null?pn(this,this.removalRange_):this.hasDelimiterRange_?pn(this,gl(this)):Jx(this).getRemovalHighlightRange()}maybeCreateRichRangeTarget(r,n){if(this.scopeTypeType_!==n.scopeTypeType_)return null;let i=this.removalRange_!=null||n.removalRange_!=null?(this.removalRange_??this.contentRange).union(n.removalRange_??n.contentRange):void 0;return new t({...this.getCloneParameters(),isReversed:r,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:n.trailingDelimiterRange_,removalRange:i,contentRange:this.contentRange.union(n.contentRange)})}getCloneParameters(){return{...this.state,insertionDelimiter:this.insertionDelimiter,prefixRange:this.prefixRange,removalRange:void 0,interiorRange:void 0,scopeTypeType:this.scopeTypeType_,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:this.trailingDelimiterRange_}}};function qK(t){switch(t){case"class":case"namedFunction":case"section":case"sectionLevelOne":case"sectionLevelTwo":case"sectionLevelThree":case"sectionLevelFour":case"sectionLevelFive":case"sectionLevelSix":case"part":case"chapter":case"subSection":case"subSubSection":case"namedParagraph":case"subParagraph":return`

`;case"anonymousFunction":case"statement":case"ifStatement":case"comment":case"xmlElement":case"collectionItem":case"branch":case"environment":return`
`;default:return" "}}var Xm=class t extends qe{constructor(r){super(r);this.type="SubTokenWordTarget";this.textualType="word";this.leadingDelimiterRange_=r.leadingDelimiterRange,this.trailingDelimiterRange_=r.trailingDelimiterRange,this.insertionDelimiter=r.insertionDelimiter}getLeadingDelimiterTarget(){return bs(this.editor,this.leadingDelimiterRange_,this.isReversed)}getTrailingDelimiterTarget(){return bs(this.editor,this.trailingDelimiterRange_,this.isReversed)}getRemovalRange(){return gl(this)}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,contentRange:Ss(this,n,!0,!0),trailingDelimiterRange:n.trailingDelimiterRange_})}getCloneParameters(){return{...this.state,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:this.trailingDelimiterRange_,insertionDelimiter:this.insertionDelimiter}}};var Es=class t extends qe{constructor(r){super({...r,contentRange:ea(r.editor,r.fullInteriorRange)});this.type="InteriorTarget";this.insertionDelimiter=" ";this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.fullInteriorRange;this.fullInteriorRange=r.fullInteriorRange}getCloneParameters(){return{...this.state,fullInteriorRange:this.fullInteriorRange}}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,fullInteriorRange:this.fullInteriorRange.union(n.fullInteriorRange)})}};var Jm=class extends qe{constructor(r){super(r);this.type="SurroundingPairTarget";this.insertionDelimiter=" ";this.boundary_=r.boundary,this.interiorRange_=r.interiorRange}getLeadingDelimiterTarget(){return Gn(this)}getTrailingDelimiterTarget(){return Kn(this)}getRemovalRange(){return co(this)}getInterior(){return[new Es({editor:this.editor,isReversed:this.isReversed,fullInteriorRange:this.interiorRange_})]}getBoundary(){return this.boundary_.map(r=>new rr({editor:this.editor,isReversed:this.isReversed,contentRange:r}))}getCloneParameters(){return{...this.state,interiorRange:this.interiorRange_,boundary:this.boundary_}}};var Ot=class extends qe{constructor(r){super(r);this.type="UntypedTarget";this.insertionDelimiter=" ";this.hasExplicitScopeType=!1;this.hasExplicitRange=r.hasExplicitRange,this.textualType=r.textualType??"token"}getLeadingDelimiterTarget(){return Gn(this)}getTrailingDelimiterTarget(){return Kn(this)}getRemovalRange(){return this.editor.document.getText(this.contentRange).trim().length===0?this.contentRange:co(this)}maybeCreateRichRangeTarget(){return null}getCloneParameters(){return{...this.state,textualType:this.textualType,hasExplicitRange:this.hasExplicitRange}}};var ef=class extends qe{constructor(){super(...arguments);this.type="ImplicitTarget";this.textualType="character";this.insertionDelimiter="";this.isRaw=!0;this.hasExplicitScopeType=!1;this.isImplicit=!0;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.getCloneParameters=()=>this.state}};var tf=class extends qe{constructor(r){let{inputTarget:n,modifiedTarget:i,isHead:o}=r;super({...r,contentRange:KA(n.contentRange,i.contentRange,o)});this.type="HeadTailTarget";this.insertionDelimiter=" ";this.inputTarget=n,this.modifiedTarget=i,this.isHead=o}getLeadingDelimiterTarget(){return Gn(this)}getTrailingDelimiterTarget(){return Kn(this)}getRemovalRange(){return co(this)}getInterior(){let r=this.modifiedTarget.getInterior();if(r!=null)return r.map(n=>new Ye({editor:this.editor,contentRange:KA(this.inputTarget.contentRange,n.contentRange,this.isHead),isReversed:this.isReversed}))}getCloneParameters(){return{...this.state,inputTarget:this.inputTarget,modifiedTarget:this.modifiedTarget,isHead:this.isHead}}};function KA(t,e,r){return r?new Y(e.start,t.end):new Y(t.start,e.end)}var rf=class t extends qe{constructor(r){super({...r,contentRange:GK(r.paragraphTarget.contentRange,r.containingInterior.contentRange)});this.type="BoundedParagraphTarget";this.textualType="line";this.insertionDelimiter=`

`;this.containingInterior=r.containingInterior,this.paragraphTarget=r.paragraphTarget,this.startLineGap=this.contentRange.start.line-this.containingInterior.fullInteriorRange.start.line,this.endLineGap=this.containingInterior.fullInteriorRange.end.line-this.contentRange.end.line}getLeadingDelimiterTarget(){return this.startLineGap>1?this.paragraphTarget.getLeadingDelimiterTarget():void 0}getTrailingDelimiterTarget(){return this.endLineGap>1?this.paragraphTarget.getTrailingDelimiterTarget():void 0}getRemovalRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.contentRange.union(r.contentRange):this.contentRange;return this.startLineGap<=0||this.endLineGap<=0?n:new fr({contentRange:n,editor:this.editor,isReversed:this.isReversed}).getRemovalRange()}get fullLineContentRange(){return oo(this.editor,this.contentRange)}getRemovalHighlightRange(){let r=(()=>{if(this.startLineGap<1||this.endLineGap<1)return this.getRemovalRange();let n=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return n!=null?this.fullLineContentRange.union(n.contentRange):this.fullLineContentRange})();return Vr(r)}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,containingInterior:this.containingInterior.maybeCreateRichRangeTarget(r,n.containingInterior),paragraphTarget:this.paragraphTarget.maybeCreateRichRangeTarget(r,n.paragraphTarget)})}getCloneParameters(){return{...this.state,paragraphTarget:this.paragraphTarget,containingInterior:this.containingInterior}}};function GK(t,e){let r=t.intersection(e);if(r==null||r.isEmpty)throw new Error("Ranges do not intersect");return r}function nf(t){return t.activeTextEditor?.selections.map(e=>({selection:e,editor:t.activeTextEditor}))??[]}var _s=class{run(){return nf(k()).map(e=>new Ot({editor:e.editor,isReversed:e.selection.isReversed,contentRange:e.selection,hasExplicitRange:!e.selection.isEmpty,textualType:"character"}))}};var Qn=class{constructor(e,r){this.debouncer=new vp(r,e.getOwnConfiguration("decorationDebounceDelayMs")),this.run=this.run.bind(this)}run(){this.debouncer.run()}dispose(){this.debouncer.dispose()}};var of=class{constructor(e,r){this.ide=e;this.storedTargets=r;this.disposables=[];this.debouncer=new Qn(e.configuration,()=>this.updateKeyboardTarget()),this.disposables.push(e.configuration.onDidChangeConfiguration(()=>this.maybeActivate()),this.debouncer),this.maybeActivate()}maybeActivate(){if(this.ide.configuration.getOwnConfiguration("experimental.keyboardTargetFollowsSelection")){this.selectionWatcherDisposable==null&&(this.selectionWatcherDisposable=this.ide.onDidChangeTextEditorSelection(this.debouncer.run));return}this.selectionWatcherDisposable!=null&&(this.selectionWatcherDisposable.dispose(),this.selectionWatcherDisposable=void 0)}updateKeyboardTarget(){this.ide.activeTextEditor==null||this.storedTargets.get("keyboard")==null||this.storedTargets.set("keyboard",new _s().run())}dispose(){this.disposables.forEach(e=>e.dispose()),this.selectionWatcherDisposable?.dispose()}};var af=class{constructor(e){this.ide=e;switch(e.disposeOnExit(this),this.evaluateSetting=this.evaluateSetting.bind(this),this.active=!0,e.runMode){case"development":this.enableDebugLog();break;case"test":this.disableDebugLog();break;case"production":this.evaluateSetting(),this.disposableConfiguration=e.configuration.onDidChangeConfiguration(this.evaluateSetting);break}}log(...e){this.active&&console.log(...e)}dispose(){this.disposableConfiguration&&this.disposableConfiguration.dispose()}enableDebugLog(){this.active=!0}disableDebugLog(){this.active=!1}evaluateSetting(){this.ide.configuration.getOwnConfiguration("debug")?this.enableDebugLog():this.disableDebugLog()}};var KK=["!","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_","`","{","|","}","~","\xA3",'"'],QK=KK.map(Br).join("|"),YK=["[a-zA-Z0-9]",QK].join("|"),ZK=new RegExp(`^(${YK})$`,"u"),XK="[unk]",JK=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}]/gu,sf=class{constructor(){this.disposables=[];this.algorithmChangeNotifier=new Jt;this.getTokenGraphemes=e=>sn(e,JK,r=>({text:this.normalizeGrapheme(r[0]),tokenStartOffset:r.index,tokenEndOffset:r.index+r[0].length}));this.registerAlgorithmChangeListener=this.algorithmChangeNotifier.registerListener;k().disposeOnExit(this),this.updateTokenHatSplittingMode=this.updateTokenHatSplittingMode.bind(this),this.getTokenGraphemes=this.getTokenGraphemes.bind(this),this.updateTokenHatSplittingMode(),this.disposables.push(k().configuration.onDidChangeConfiguration(this.updateTokenHatSplittingMode))}updateTokenHatSplittingMode(){let{lettersToPreserve:e,symbolsToPreserve:r,...n}=k().configuration.getOwnConfiguration("tokenHatSplittingMode");this.tokenHatSplittingMode={lettersToPreserve:e.map(i=>i.toLowerCase().normalize("NFC")),symbolsToPreserve:r.map(i=>i.normalize("NFC")),...n},this.algorithmChangeNotifier.notifyListeners()}normalizeGrapheme(e){let{preserveCase:r,lettersToPreserve:n,symbolsToPreserve:i}=this.tokenHatSplittingMode,o=e.normalize("NFC");return i.includes(o)||(r||(o=o.toLowerCase()),n.includes(o.toLowerCase()))||(o=$T(o),ZK.test(o)||(o=XK)),o}dispose(){this.disposables.forEach(({dispose:e})=>e())}};function ta(){return eS==null&&(eS=new sf),eS}var eS;var e4=["-","+","*","/","=","<",">","_","#",".","|","&",":"],t4=["!==","!=","+=","-=","*=","/=","%=","<=",">=","=>","->","??",'"""',"```","/*","*/","<!--","-->"],r4=["\\p{L}","\\p{M}","\\p{N}"],n4="[^\\s\\w]",i4="(?<![.\\d])\\d+\\.\\d+(?![.\\d])";function o4(t){let{fixedTokens:e,repeatableSymbols:r,identifierWordRegexes:n,identifierWordDelimiters:i,numbersRegex:o,singleSymbolsRegex:s}=t,l=r.map(Br).map(x=>`${x}+`).join("|"),u=e.map(Br).join("|"),d=`(${n.concat(i.map(Br)).join("|")})+`,g=`(${n.join("|")})+`,y=[u,o,d,l,s].join("|");return{identifierMatcher:new RegExp(d,"gu"),wordMatcher:new RegExp(g,"gu"),tokenMatcher:new RegExp(y,"gu")}}var tS=new Map;function Ar(t){let e=k().configuration.getOwnConfiguration("wordSeparators",{languageId:t}),r=e.join("\0");if(!tS.has(r)){let n={fixedTokens:t4,repeatableSymbols:e4,identifierWordRegexes:r4,identifierWordDelimiters:e,numbersRegex:i4,singleSymbolsRegex:n4};tS.set(r,o4(n))}return tS.get(r)}function QA(t,e,r){return sn(t,Ar(e).tokenMatcher,r)}var a4=/\p{Lu}?\p{Ll}+|\p{Lu}+(?!\p{Ll})|\p{N}+/gu,Rs=class{constructor(e){this.wordRegex=Ar(e).wordMatcher}splitIdentifier(e){let r=Qc(e,this.wordRegex);return r.length>1?r:Qc(e,a4)}};var YA=({penalty:t})=>-t,ZA=({isFirstLetter:t})=>t?-1:0;function XA(t){return({grapheme:{text:e},style:r})=>{let n=t.get({grapheme:e,hatStyle:r});return n==null?1/0:-n}}function JA(t,e){let r=Wc(n=>QT(e[n].filter(i=>i>t))??1/0);return({grapheme:{text:n}})=>r(n)}function rS(t){return e=>e.grapheme.text===t?.grapheme&&e.style===t?.hatStyle?1:0}function eP(t){switch(t){case"greedy":return({penalty:e})=>-e;case"balanced":return({penalty:e})=>-(e<2?0:1);case"stable":return e=>0}}function tP(t,e){if(t.length===0)return;let r=t;for(let n of e){if(r.length===1)return r[0];r=s4(r,n)}return r[0]}function s4(t,e){let r=-1/0,n=[];for(let i of t){let o=e(i);o<r||(o>r&&(r=o,n.length=0),n.push(i))}return n}function rP({hatOldTokenRanks:t,graphemeTokenRanks:e},r,n,i,o,s){return tP(s,[rS(i),eP(r),rS(o),XA(t),YA,ZA,JA(n,e)])}function nP(t,e,r){let n={},i=new no(({grapheme:o,hatStyle:s})=>[o,s]);return t.forEach(({token:o,rank:s})=>{let l=e.get(o);l!=null&&i.set(l,s),r.getTokenGraphemes(o.text).forEach(({text:u})=>{let m;u in n?m=n[u]:(m=[],n[u]=m),m.push(s)})}),{hatOldTokenRanks:i,graphemeTokenRanks:n}}function iP(t,e=[]){return new Map(KT(ot,Wo)($c([e],t.visibleRanges.map(r=>YT(r.start.line,r.end.line+1)))).sort((r,n)=>r-n).map((r,n)=>[r,n]))}function oP(t,e){return(r,n)=>{let i=Math.abs(r.displayLine-t),o=Math.abs(n.displayLine-t);if(i<o)return-1;if(i>o)return 1;let s=Math.abs(r.range.start.character-e),l=Math.abs(n.range.start.character-e);return s-l}}function aP(t,e){let r=t.document.languageId,n=t.document.getText(e),i=t.document.offsetAt(e.start);return QA(n,r,o=>{let s=i+o.index,l=i+o.index+o[0].length,u=new Y(t.document.positionAt(s),t.document.positionAt(l));return{editor:t,text:o[0],range:u,offsets:{start:s,end:l}}})}function sP(t,e,r){let i=l4(t,e).flatMap(o=>{let s=o.selections[0].active,l=iP(o,[s.line]),u=ot(o.visibleRanges.map(m=>aP(o,m).map(d=>({...d,displayLine:l.get(d.range.start.line)}))));return u.sort(oP(l.get(s.line),s.character)),u});return c4(r,i).map((o,s)=>({token:o,rank:-s}))}function c4(t,e){return t==null?e:e.sort((r,n)=>{let i=t.has(r),o=t.has(n);return i&&!o?-1:!i&&o?1:0})}function l4(t,e){let r;return t==null?r=e:r=[t,...e.filter(n=>n!==t)],r}function nS({tokenGraphemeSplitter:t,enabledHatStyles:e,forceTokenHats:r,oldTokenHats:n,hatStability:i,activeTextEditor:o,visibleTextEditors:s}){let l=r==null?void 0:cP(r),u=cP(n),m=sP(o,s,l),d=nP(m,u,t),g=Object.keys(e),y=new ys(()=>[...g]);return m.map(({token:x,rank:E})=>{let w=u4(t,x,y,e),U=rP(d,i,E,l?.get(x),u.get(x),w);if(U!=null)return y.set(U.grapheme.text,y.get(U.grapheme.text).filter(V=>V!==U.style)),p4(x,U)}).filter(x=>x!=null)}function cP(t){let e=new no(({editor:r,offsets:n})=>[r.id,n.start,n.end]);return t.forEach(r=>e.set(r.token,r)),e}function u4(t,e,r,n){let i=[],o=t.getTokenGraphemes(e.text),s=new Set(new Rs(e.editor.document.languageId).splitIdentifier(e.text).map(l=>l.index));for(let l of o){let u=s.has(l.tokenStartOffset);for(let m of r.get(l.text))i.push({grapheme:l,style:m,penalty:n[m].penalty,isFirstLetter:u})}return i}function p4(t,e){return{hatStyle:e.style,grapheme:e.grapheme.text,token:t,hatRange:new Y(t.range.start.translate(void 0,e.grapheme.tokenStartOffset),t.range.start.translate(void 0,e.grapheme.tokenEndOffset))}}var cf=class{constructor(e,r){this.hats=e;this.context=r;this.disposables=[];k().disposeOnExit(this);let n=new Qn(k().configuration,()=>this.allocateHats());this.disposables.push(this.hats.onDidChangeEnabledHatStyles(n.run),this.hats.onDidChangeIsEnabled(n.run),k().onDidOpenTextDocument(n.run),k().onDidCloseTextDocument(n.run),k().onDidChangeActiveTextEditor(n.run),k().onDidChangeVisibleTextEditors(n.run),k().onDidChangeTextDocument(n.run),k().onDidChangeTextEditorSelection(n.run),k().onDidChangeTextEditorVisibleRanges(n.run),ta().registerAlgorithmChangeListener(n.run),n)}async allocateHats(e){let r=await this.context.getActiveMap();e=e?.map(i=>({...i,grapheme:ta().normalizeGrapheme(i.grapheme)}));let n=this.hats.isEnabled?nS({tokenGraphemeSplitter:ta(),enabledHatStyles:this.hats.enabledHatStyles,forceTokenHats:e,oldTokenHats:r.tokenHats,hatStability:k().configuration.getOwnConfiguration("experimental.hatStability"),activeTextEditor:k().activeTextEditor,visibleTextEditors:k().visibleTextEditors}):[];r.setTokenHats(n),await this.hats.setHatRanges(n.map(({hatStyle:i,hatRange:o,token:{editor:s}})=>({editor:s,range:o,styleName:i})))}dispose(){this.disposables.forEach(({dispose:e})=>e())}};var lf=class t{constructor(e){this.rangeUpdater=e;this.isExpired=!1;this.documentTokenLists=new Map;this.deregisterFunctions=[];this.map={};this._tokenHats=[]}get tokenHats(){return this._tokenHats}getDocumentTokenList(e){let r=e.uri.toString(),n=this.documentTokenLists.get(r);return n==null&&(n=[],this.documentTokenLists.set(r,n),this.deregisterFunctions.push(this.rangeUpdater.registerRangeInfoList(e,n))),n}clone(){let e=new t(this.rangeUpdater);return e.setTokenHats(this._tokenHats),e}setTokenHats(e){this.map={},this.documentTokenLists=new Map,this.deregisterFunctions.forEach(n=>n());let r=e.map(n=>{let{hatStyle:i,grapheme:o,token:s}=n,l=this.makeTokenLive(s);return this.map[cl(i,o)]=l,{...n,token:l}});this._tokenHats=r}makeTokenLive(e){let{tokenMatcher:r}=Ar(e.editor.document.languageId),n={...e,expansionBehavior:{start:{type:"regex",regex:r},end:{type:"regex",regex:r}}};return this.getDocumentTokenList(e.editor.document).push(n),n}getEntries(){return this.checkExpired(),Object.entries(this.map)}getToken(e,r){return this.checkExpired(),this.map[cl(e,ta().normalizeGrapheme(r))]}checkExpired(){if(this.isExpired)throw Error("Map snapshot has expired")}dispose(){this.isExpired=!0,this.deregisterFunctions.forEach(e=>e())}};var m4=6e4,uf=class{constructor(e,r,n,i){this.debug=r;this.commandServerApi=i;this.prePhraseMapsSnapshotTimestamp=null;this.lastSignalVersion=null;k().disposeOnExit(this),this.activeMap=new lf(e),this.getActiveMap=this.getActiveMap.bind(this),this.allocateHats=this.allocateHats.bind(this),this.hatAllocator=new cf(n,{getActiveMap:this.getActiveMap})}allocateHats(e){return this.hatAllocator.allocateHats(e)}async getActiveMap(){return await this.maybeTakePrePhraseSnapshot(),this.activeMap}async getReadableMap(e){return await this.maybeTakePrePhraseSnapshot(),e?this.lastSignalVersion==null?(console.error("Pre phrase snapshot requested but no signal was present; please upgrade command client"),this.activeMap):this.prePhraseMapSnapshot==null?(console.error("Navigation map pre-phrase snapshot requested, but no snapshot has been taken"),this.activeMap):performance.now()-this.prePhraseMapsSnapshotTimestamp>m4?(console.error("Navigation map pre-phrase snapshot requested, but snapshot is more than a minute old"),this.activeMap):this.prePhraseMapSnapshot:this.activeMap}dispose(){this.activeMap.dispose(),this.prePhraseMapSnapshot!=null&&this.prePhraseMapSnapshot.dispose()}async maybeTakePrePhraseSnapshot(){let e=await this.commandServerApi.signals.prePhrase.getVersion();e!==this.lastSignalVersion&&(this.debug.log("taking snapshot"),this.lastSignalVersion=e,e!=null&&this.takePrePhraseSnapshot())}takePrePhraseSnapshot(){this.prePhraseMapSnapshot!=null&&this.prePhraseMapSnapshot.dispose(),this.prePhraseMapSnapshot=this.activeMap.clone(),this.prePhraseMapsSnapshotTimestamp=performance.now()}};function iS(t,e,r){let n=t.get(e);return n==null&&(n=r(),t.set(e,n)),n}var cS=on(yl(),1);function lS(t,e){let{originalOffsets:{start:r,end:n},finalOffsets:{end:i},displacement:o}=t,{offsets:{start:s,end:l}}=e;return(0,cS.invariant)(n>r,()=>"Change range expected to be nonempty"),(0,cS.invariant)(n>=s&&r<=l,()=>"Change range expected to intersect with selection range"),{start:n<=s?s+o:Math.min(s,i),end:n<=l?l+o:Math.min(l,i)}}var dP=on(yl(),1);function uS(t,e){let{event:{text:r,isReplace:n},finalOffsets:{start:i,end:o}}=t;if((0,dP.invariant)(i===t.originalOffsets.end&&i===e.offsets.start&&i===e.offsets.end,()=>"Selection range and change range expected to be same empty range"),n){let s=e.expansionBehavior.end;switch(s.type){case"closed":return{start:i,end:i};case"open":return{start:i,end:o};case"regex":{let l=r.match(sm(s.regex));return l==null?{start:i,end:i}:{start:i,end:i+l[0].length}}}}else{let s=e.expansionBehavior.start;switch(s.type){case"closed":return{start:o,end:o};case"open":return{start:i,end:o};case"regex":{let l=r.search(am(s.regex));return l===-1?{start:o,end:o}:{start:i+l,end:o}}}}}var pS=on(yl(),1);function mS(t,e){let{event:{text:r},originalOffsets:{start:n},displacement:i}=t,{offsets:{start:o,end:s},text:l}=e;if((0,pS.invariant)(s>o,()=>"Selection range expected to be nonempty"),(0,pS.invariant)(n>=o&&n<=s,()=>"Insertion offset expected to intersect with selection range"),n>o&&n<s)return{start:o,end:s+i};if(n===o){let u=e.expansionBehavior.start,m=s+i;switch(u.type){case"closed":return{start:o+i,end:m};case"open":return{start:o,end:m};case"regex":{let d=r+l,g=am(u.regex),y=d.search(g);for(;y>r.length;)d=d.slice(0,y),y=d.search(g);return y===-1?{start:o,end:m}:{start:o+y,end:m}}}}else{let u=e.expansionBehavior.end,m=o;switch(u.type){case"closed":return{start:m,end:s};case"open":return{start:m,end:s+i};case"regex":{let d=l+r,g=sm(u.regex),y=d.match(g),x=y==null?0:y[0].length;for(;x!==0&&x<l.length;)d=l.slice(x)+r,y=d.match(g),x=y==null?0:x+y[0].length;return x===0?{start:m,end:s}:{start:m,end:o+x}}}}}function gP(t,e,r){let{start:n,end:i}=t.originalOffsets,{start:o,end:s}=e.offsets,l=Math.min(n,o),u="";return o<n&&(u+=e.text.substring(0,n-o)),u+=t.event.text,i<s&&(u+=e.text.substring(s-i,e.text.length)),u.substring(r.start-l,r.end-l)}function hP(t,e){let{document:r,contentChanges:n}=t,i=n.map(o=>{let s=o.text.length-o.rangeLength,l=o.rangeOffset,u=l+o.rangeLength,m=l,d=u+s;return{displacement:s,event:o,originalOffsets:{start:l,end:u},finalOffsets:{start:m,end:d}}});for(let o of e){let s=o.offsets,l=i.map(m=>{let d;return m.originalOffsets.start>s.end?{start:0,end:0}:m.originalOffsets.end<s.start?{start:m.displacement,end:m.displacement}:(m.event.rangeLength===0?o.range.isEmpty?d=uS(m,o):d=mS(m,o):d=lS(m,o),o.text=gP(m,o,d),{start:d.start-s.start,end:d.end-s.end})}),u={start:s.start+em(l,({start:m})=>m),end:s.end+em(l,({end:m})=>m)};o.range=o.range.with(r.positionAt(u.start),r.positionAt(u.end)),o.offsets=u}}var mf=class{constructor(){this.rangeInfoLists=new Map;this.replaceEditLists=new Map;this.listenForDocumentChanges()}getDocumentRangeInfoLists(e){return iS(this.rangeInfoLists,e.uri.toString(),()=>[])}getDocumentReplaceEditLists(e){return iS(this.replaceEditLists,e.uri.toString(),()=>[])}registerRangeInfoList(e,r){let n=this.getDocumentRangeInfoLists(e);return n.push(r),()=>pr(n,r)}registerReplaceEditList(e,r){let n=this.getDocumentReplaceEditLists(e);return n.push(r),()=>pr(n,r)}*documentRangeInfoGenerator(e){let r=this.getDocumentRangeInfoLists(e);for(let n of r)for(let i of n)yield i}listenForDocumentChanges(){this.disposable=k().onDidChangeTextDocument(e=>{let r=this.getDocumentReplaceEditLists(e.document),n={...e,contentChanges:e.contentChanges.map(i=>v4(r,i)?{...i,isReplace:!0}:i)};hP(n,this.documentRangeInfoGenerator(e.document))})}dispose(){this.disposable.dispose()}};function v4(t,e){for(let r of t)for(let n of r)if(n.range.isRangeEqual(e.range)&&n.text===e.text)return!0;return!1}var ff=class{constructor(){this.signals={prePhrase:{getVersion(){return Promise.resolve(null)}}}}getFocusedElementType(){return Promise.resolve(void 0)}};var df=class{async allocateHats(){}async getReadableMap(){return{getEntries(){return[]},getToken(){throw new Error("Hat map is disabled")}}}dispose(){}};var gf=class{onDidChangeDefinition(e){return{dispose:()=>{}}}loadLanguage(e){return Promise.resolve()}get(e){}getNodeAtLocation(e,r){}dispose(){}};var hf=class{getSnippetStrict(e){throw new Error("Snippets are not implemented.")}openNewSnippetFile(e,r){throw new Error("Snippets are not implemented.")}};var yf=class{getSpokenFormEntries(){throw new hs}onDidChange(){return{dispose:()=>{}}}};var Tf=class{getTree(e){throw new Error("Tree sitter not provided")}loadLanguage(e){return Promise.resolve(!1)}getNodeAtLocation(e,r){throw new Error("Tree sitter not provided")}createQuery(e,r){throw new Error("Tree sitter not provided")}};var lt=class extends Error{constructor(r,n=!1,i=!1){super(`No spoken form for: ${r}`);this.reason=r;this.requiresTalonUpdate=n;this.isPrivate=i}};var yP={curlyBrackets:["{","}"],angleBrackets:["<",">"],escapedDoubleQuotes:['\\"','\\"'],escapedSingleQuotes:["\\'","\\'"],escapedParentheses:["\\(","\\)"],escapedSquareBrackets:["\\[","\\]"],doubleQuotes:['"','"'],parentheses:["(",")"],backtickQuotes:["`","`"],squareBrackets:["[","]"],singleQuotes:["'","'"],tripleBacktickQuotes:["```","```"],tripleDoubleQuotes:['"""','"""'],tripleSingleQuotes:["'''","'''"],whitespace:[" "," "],any:null,string:null,collectionBoundary:null};var TP=new no(t=>t);for(let[t,e]of Object.entries(yP))e!=null&&TP.set(e,t);function xP(t,e,r){let n=TP.get([e,r]);if(n==null)throw Error(`Unknown surrounding pair delimiters '${e} ${r}'`);return t.pairedDelimiter[n]}function SP(t){throw new lt(`${t.type} insertion snippet`)}function vP(t){throw new lt(`${t.type} wrap with snippet`)}function Tl(t,e,r){let n=r==="vertical"?`${bt.verticalRange} `:"";if(t&&e)return n+bt.rangeExclusive;if(t)throw new lt("Range exclude anchor");return e?n+bt.rangeExcludingEnd:r==="vertical"?bt.verticalRange:bt.rangeInclusive}function bP(t){return Object.fromEntries(Object.entries(t).map(([e,r])=>[e,Object.fromEntries(Object.entries(r).map(([n,i])=>[n,{type:"customizable",spokenForms:i,spokenFormType:e,id:n}]))]))}var b4=["zero","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen","twenty","twenty one","twenty two","twenty three","twenty four","twenty five","twenty six","twenty seven","twenty eight","twenty nine","thirty","thirty one","thirty two","thirty three","thirty four","thirty five","thirty six","thirty seven","thirty eight","thirty nine","forty","forty one","forty two","forty three","forty four","forty five","forty six","forty seven","forty eight","forty nine","fifty","fifty one","fifty two","fifty three","fifty four","fifty five","fifty six","fifty seven","fifty eight","fifty nine","sixty","sixty one","sixty two","sixty three","sixty four","sixty five","sixty six","sixty seven","sixty eight","sixty nine","seventy","seventy one","seventy two","seventy three","seventy four","seventy five","seventy six","seventy seven","seventy eight","seventy nine","eighty","eighty one","eighty two","eighty three","eighty four","eighty five","eighty six","eighty seven","eighty eight","eighty nine","ninety","ninety one","ninety two","ninety three","ninety four","ninety five","ninety six","ninety seven","ninety eight","ninety nine"],w4=["zeroth","first","second","third","fourth","fifth","sixth","seventh","eighth","ninth","tenth","eleventh","twelfth","thirteenth","fourteenth","fifteenth","sixteenth","seventeenth","eighteenth","nineteenth","twentieth"];function ks(t){let e=b4[t];if(e==null)throw Error(`Unknown number '${t}'`);return e}function xl(t){let e=w4[t];if(e==null)throw Error(`Unknown ordinal '${t}'`);return e}var xf=class{constructor(e){this.spokenFormMap=e;this.handleModifier=this.handleModifier.bind(this)}handlePrimitiveTarget(e){let r=[];return e.modifiers!=null&&r.push(e.modifiers.map(this.handleModifier)),e.mark!=null&&r.push(this.handleMark(e.mark)),r}handleModifier(e){switch(e.type){case"cascading":case"modifyIfUntyped":case"preferredScope":throw new lt(`Modifier '${e.type}'`);case"containingScope":return e.ancestorIndex==null||e.ancestorIndex===0?this.handleScopeType(e.scopeType):[new Array(e.ancestorIndex).fill(this.spokenFormMap.modifierExtra.ancestor),this.handleScopeType(e.scopeType)];case"everyScope":return[this.spokenFormMap.simpleModifier.everyScope,this.handleScopeType(e.scopeType)];case"extendThroughStartOf":case"extendThroughEndOf":{let r=this.spokenFormMap.simpleModifier[e.type];return e.modifiers!=null?[r,e.modifiers.map(this.handleModifier)]:[r]}case"relativeScope":return e.offset===0?this.handleRelativeScopeInclusive(e):this.handleRelativeScopeExclusive(e);case"ordinalScope":{let r=this.handleScopeType(e.scopeType),n=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.length===1)return e.start===-1?[n,this.spokenFormMap.modifierExtra.last,r]:e.start===0?[n,this.spokenFormMap.modifierExtra.first,r]:e.start<0?[n,xl(Math.abs(e.start)),this.spokenFormMap.modifierExtra.last,r]:[n,xl(e.start+1),r];let i=ks(e.length);if(e.start===0)return[n,this.spokenFormMap.modifierExtra.first,i,Sl(r)];if(e.start===-e.length)return[n,this.spokenFormMap.modifierExtra.last,i,Sl(r)];throw new lt(`'${e.type}' with count > 1 and offset away from start / end`)}case"range":{if(e.anchor.type==="ordinalScope"&&e.active.type==="ordinalScope"&&e.anchor.length===1&&e.active.length===1&&e.anchor.scopeType.type===e.active.scopeType.type){let r=e.anchor.start===-1?this.spokenFormMap.modifierExtra.last:xl(e.anchor.start+1),n=this.handleModifier(e.active),i=Tl(e.excludeAnchor,e.excludeActive);return[r,i,n]}throw Error(`Modifier '${e.type}' is not fully implemented`)}default:return[this.spokenFormMap.simpleModifier[e.type]]}}handleRelativeScopeInclusive(e){let r=this.handleScopeType(e.scopeType),n=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.length===1){let s=e.direction==="forward"?bt.forward:bt.backward;return[n,r,s]}let i=ks(e.length),o=Sl(r);return e.direction==="forward"?[n,i,o]:[n,i,o,bt.backward]}handleRelativeScopeExclusive(e){let r=this.handleScopeType(e.scopeType),n=e.direction==="forward"?bt.next:bt.previous,i=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.offset===1){let o=ks(e.length);if(e.length===1)return[i,n,r];let s=Sl(r);return[i,n,o,s]}if(e.length===1){let o=xl(e.offset);return[i,o,n,r]}throw new lt(`${e.type} modifier with offset > 1 and length > 1`)}handleScopeType(e){switch(e.type){case"oneOf":case"surroundingPairInterior":throw new lt(`Scope type '${e.type}'`);case"glyph":return[this.spokenFormMap.complexScopeTypeType.glyph,EP(this.spokenFormMap.grapheme,"grapheme",e.character)];case"surroundingPair":{let r=this.spokenFormMap.pairedDelimiter[e.delimiter];return e.forceDirection!=null?[this.spokenFormMap.surroundingPairForceDirection[e.forceDirection],r]:r}case"customRegex":return this.spokenFormMap.customRegex[e.regex]??{type:"customizable",spokenForms:{spokenForms:[],isCustom:!0,defaultSpokenForms:[],requiresTalonUpdate:!1,isPrivate:!1},spokenFormType:"customRegex",id:e.regex};case"interior":return this.spokenFormMap.simpleModifier.interiorOnly;default:return this.spokenFormMap.simpleScopeTypeType[e.type]}}handleMark(e){switch(e.type){case"decoratedSymbol":{let[r,n]=e.symbolColor.split("-"),i=[];return r!=="default"&&i.push(fA(r)),n!=null&&i.push(dA(n)),i.push(EP(this.spokenFormMap.grapheme,"grapheme",e.character)),i}case"lineNumber":return this.handleLineNumberMark(e);case"range":{if(e.anchor.type==="lineNumber"&&e.active.type==="lineNumber"){let[r,n]=this.handleLineNumberMark(e.anchor),[i,o]=this.handleLineNumberMark(e.active);if(r===i){let s=Tl(e.excludeAnchor,e.excludeActive);return[r,n,s,o]}}throw Error(`Mark '${e.type}' is not fully implemented`)}case"explicit":case"keyboard":case"target":throw new lt(`Mark '${e.type}'`);default:return[Fm[e.type]]}}handleLineNumberMark(e){switch(e.lineNumberType){case"absolute":throw new lt("Absolute line numbers");case"modulo100":return[Im.modulo100,ks(e.lineNumber+1)];case"relative":return[e.lineNumber<0?Im.relativeUp:Im.relativeDown,ks(Math.abs(e.lineNumber))]}}};function Sl(t){if(typeof t=="string")return wP(t);if(Array.isArray(t)){if(t.length===0)return t;let e=t[t.length-1];return[...t.slice(0,-1),Sl(e)]}return{...t,spokenForms:{...t.spokenForms,spokenForms:t.spokenForms.spokenForms.map(wP)}}}function wP(t){return`${t}s`}function EP(t,e,r){let n=t[r];if(n==null)throw new lt(`${e} '${r}'`);return n}var As=class{constructor(e){this.spokenFormMap=bP(e),this.primitiveGenerator=new xf(this.spokenFormMap)}getSpokenFormForSingleTerm(e,r){return this.componentsToSpokenForm(()=>{let n=this.spokenFormMap[e][r];if(n==null)throw new lt(`${e} with id ${r}`);return n})}processCommand(e){return this.componentsToSpokenForm(()=>this.handleAction(e.action))}processScopeType(e){return this.componentsToSpokenForm(()=>[this.primitiveGenerator.handleScopeType(e)])}componentsToSpokenForm(e){try{return{type:"success",spokenForms:_P(e())}}catch(r){if(r instanceof lt)return{type:"error",reason:r.reason,requiresTalonUpdate:r.requiresTalonUpdate,isPrivate:r.isPrivate};throw r}}handleAction(e){switch(e.name){case"editNew":case"getText":case"replace":case"executeCommand":case"parsed":case"private.getTargets":case"private.setKeyboardTarget":throw new lt(`Action '${e.name}'`);case"replaceWithTarget":case"moveToTarget":return[this.spokenFormMap.action[e.name],this.handleTarget(e.source),this.handleDestination(e.destination)];case"swapTargets":return[this.spokenFormMap.action[e.name],this.handleTarget(e.target1),bt.swapConnective,this.handleTarget(e.target2)];case"callAsFunction":return e.argument.type==="implicit"?[this.spokenFormMap.action[e.name],this.handleTarget(e.callee)]:[this.spokenFormMap.action[e.name],this.handleTarget(e.callee),"on",this.handleTarget(e.argument)];case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return[xP(this.spokenFormMap,e.left,e.right),this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"pasteFromClipboard":return[this.spokenFormMap.action[e.name],this.handleDestination(e.destination)];case"insertSnippet":return[this.spokenFormMap.action[e.name],SP(e.snippetDescription),this.handleDestination(e.destination)];case"generateSnippet":if(e.snippetName!=null)throw new lt(`${e.name}.snippetName`);return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"wrapWithSnippet":return[vP(e.snippetDescription),this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"highlight":{if(e.highlightId!=null)throw new lt(`${e.name}.highlightId`);return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)]}default:return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)]}}handleTarget(e){switch(e.type){case"list":if(e.elements.length<2)throw new lt("List target with < 2 elements");return e.elements.map((r,n)=>n===0?this.handleTarget(r):[bt.listConnective,this.handleTarget(r)]);case"range":{let r=this.handleTarget(e.anchor),n=this.handleTarget(e.active),i=Tl(e.excludeAnchor,e.excludeActive,e.rangeType);return[r,i,n]}case"primitive":return this.primitiveGenerator.handlePrimitiveTarget(e);case"implicit":return[]}}handleDestination(e){switch(e.type){case"list":if(e.destinations.length<2)throw new lt("List destination with < 2 elements");return e.destinations.map((r,n)=>n===0?this.handleDestination(r):[bt.listConnective,this.handleDestination(r)]);case"primitive":return[this.handleInsertionMode(e.insertionMode),this.handleTarget(e.target)];case"implicit":return[]}}handleInsertionMode(e){switch(e){case"to":return bt.sourceDestinationConnective;case"before":return bt.before;case"after":return bt.after}}};function _P(t){if(typeof t=="string")return[t];if(Array.isArray(t))return t.length===0?[""]:RP(t.map(_P)).map(e=>e.filter(r=>r.length!==0).join(" "));if(t.spokenForms.spokenForms.length===0){let e=`${il(t.spokenFormType)} with id ${t.id}`,r;throw t.spokenForms.isPrivate?r="this is a private spoken form currently only for internal experimentation":t.spokenForms.requiresTalonUpdate?r="please update talon to the latest version (see https://www.cursorless.org/docs/user/updating/)":r="please see https://www.cursorless.org/docs/user/customization/ for more information",new lt(`${e}; ${r}`,t.spokenForms.requiresTalonUpdate,t.spokenForms.isPrivate)}return t.spokenForms.spokenForms}function RP(t){if(t.length===0)return[];if(t.length===1)return t[0].map(i=>[i]);let[e,...r]=t,n=RP(r);return e.flatMap(i=>n.map(o=>[i,...o]))}var Sf=class{constructor(e){this.talonSpokenForms=e;this.notifier=new Jt;this.spokenFormMap_={...Pn};this.onDidChangeCustomSpokenForms=this.notifier.registerListener;this.disposable=e.onDidChange(()=>this.updateSpokenFormMaps()),this.customSpokenFormsInitialized=this.updateSpokenFormMaps()}get spokenFormMap(){return this.spokenFormMap_}get needsInitialTalonUpdate(){return this.needsInitialTalonUpdate_}async updateSpokenFormMaps(){let e;try{if(e=await this.talonSpokenForms.getSpokenFormEntries(),e.length===0)throw new Error("Custom spoken forms list empty")}catch(r){if(r instanceof nl)this.needsInitialTalonUpdate_=!0;else if(!(r instanceof hs)){console.error("Error loading custom spoken forms",r);let n=r.message.replace(/\.$/,"");pt(k().messages,"CustomSpokenForms.updateSpokenFormMaps",`Error loading custom spoken forms: ${n}. Falling back to default spoken forms.`)}this.spokenFormMap_={...Pn},this.notifier.notifyListeners();return}for(let r of qk)E4(this.spokenFormMap_,r,Nx[r],Object.fromEntries(e.filter(n=>n.type===r).map(({id:n,spokenForms:i})=>[n,i])));this.notifier.notifyListeners()}getCustomRegexScopeTypes(){return Object.keys(this.spokenFormMap_.customRegex).map(e=>({type:"customRegex",regex:e}))}dispose(){this.disposable.dispose()}};function E4(t,e,r,n){let i=Array.from(new Set([...Object.keys(r),...Object.keys(n)])),o={};for(let s of i){let{defaultSpokenForms:l=[],isPrivate:u=!1}=r[s]??{},m=n[s];o[s]=m==null?{defaultSpokenForms:l,spokenForms:[],requiresTalonUpdate:!u,isCustom:!1,isPrivate:u}:{defaultSpokenForms:l,spokenForms:m,requiresTalonUpdate:!1,isCustom:!wi(l,m),isPrivate:u}}t[e]=o}var vf=class{constructor(e){this.customSpokenForms=new Sf(e),this.customSpokenFormsInitialized=this.customSpokenForms.customSpokenFormsInitialized,this.spokenFormGenerator=new As(this.customSpokenForms.spokenFormMap),this.disposable=this.customSpokenForms.onDidChangeCustomSpokenForms(()=>{this.spokenFormGenerator=new As(this.customSpokenForms.spokenFormMap)})}onDidChangeCustomSpokenForms(e){return this.customSpokenForms.onDidChangeCustomSpokenForms(e)}commandToSpokenForm(e){return this.spokenFormGenerator.processCommand(e)}scopeTypeToSpokenForm(e){return this.spokenFormGenerator.processScopeType(e)}actionIdToSpokenForm(e){return this.spokenFormGenerator.getSpokenFormForSingleTerm("action",e)}graphemeToSpokenForm(e){return this.spokenFormGenerator.getSpokenFormForSingleTerm("grapheme",e)}getCustomRegexScopeTypes(){return this.customSpokenForms.getCustomRegexScopeTypes()}get needsInitialTalonUpdate(){return this.customSpokenForms.needsInitialTalonUpdate}dispose(){this.disposable.dispose()}};function*_4(t){for(let e of t)for(let r of e)yield r}function*vl(t,e){let r=wf(e),n=t;for(;n-- >0;){let i=r.next();if(!i.done)yield i.value;else return}}function*fS(t){let e=wf(t),r=e.next();if(r.done)return;let n=r.value;for(let i of e)yield[n,i],n=i}var Pxe=Symbol();function*R4(t=0,e=1){let r=t;for(;;)yield r,r+=e}function*bf(t,e){let r=0;for(let n of t)e(n,r++)&&(yield n)}function*qt(t,e){for(let r of t)yield e(r)}function*AP(t,e,r,n=1){let i,o;if(r!==void 0?(i=e,o=r):(i=0,o=e),i<0)throw new Error("start cannot be negative");if(o!==null&&o<0)throw new Error("stop cannot be negative");if(n<=0)throw new Error("step cannot be negative");let s=-1,l=wf(t),u;for(;;){if(s++,o!==null&&s>=o||(u=l.next(),u.done))return;s<i||(s-i)%n===0&&(yield u.value)}}function*k4(t,e){let r=0,n=wf(t),i;for(;!(i=n.next()).done;){let o=i.value;if(!e(o,r++))return;yield o}}function wf(t){return t[Symbol.iterator]()}function Ps(t,e){return Array.from(qt(t,e))}function kP(t,e,r){let n=R4(t,r),i=r>=0?o=>o<e:o=>o>e;return k4(n,i)}function PP(t,e,r=1){return e!==void 0?kP(t,e,r):kP(0,t,r)}function Ef(t,e){return _4(qt(t,e))}function jr(t,e,{domain:r},{domain:n}){return t==="forward"?A4(e,r,n):P4(e,r,n)}function A4(t,e,r){let n=e.start.isAfterOrEqual(t),i=r.start.isAfterOrEqual(t);if(n&&i){let s=e.start.compareTo(r.start);return s===0?e.end.compareTo(r.end):s}if(!n&&!i){let s=e.end.compareTo(r.end);return s===0?-e.start.compareTo(r.start):s}if(!n&&i){let s=e.end.compareTo(r.start);return s!==0?s:r.isEmpty?1:-1}let o=e.start.compareTo(r.end);return o!==0?o:e.isEmpty?-1:1}function P4(t,e,r){let n=e.end.isBeforeOrEqual(t),i=r.end.isBeforeOrEqual(t);if(n&&i){let s=-e.end.compareTo(r.end);return s===0?-e.start.compareTo(r.start):s}if(!n&&!i){let s=-e.start.compareTo(r.start);return s===0?e.end.compareTo(r.end):s}if(!n&&i){let s=-e.start.compareTo(r.end);return s!==0?s:r.isEmpty?1:-1}let o=-e.end.compareTo(r.start);return o!==0?o:e.isEmpty?-1:1}function DP(t,e,r,n,i,o){return D4(t,n,i,o)&&(i==null||jr(r,n.includeDescendantScopes?t:e,i,o)<0)}function D4(t,e,r,n){let{containment:i,distalPosition:o,allowAdjacentScopes:s,skipAncestorScopes:l}=e,{domain:u}=n;switch(i){case"disallowed":if(u.contains(t))return!1;break;case"disallowedIfStrict":if(GA(u,t))return!1;break;case"required":if(!u.contains(t))return!1;break}return l&&r!=null&&u.contains(r.domain)?!1:M4(new Y(t,o),u,s)}function M4(t,e,r){let n=t.intersection(e);return n==null?!1:!n.isEmpty||r||e.isEmpty}var L4={containment:null,allowAdjacentScopes:!1,skipAncestorScopes:!1,includeDescendantScopes:!1},je=class{constructor(){this.includeAdjacentInEvery=!1}*generateScopes(e,r,n,i={}){let o={...L4,...i,distalPosition:i.distalPosition??(n==="forward"?e.document.range.end:e.document.range.start)},s,l=r;for(let u of this.generateScopeCandidates(e,r,n,o))if(DP(r,l,n,o,s,u)&&(yield u,s=u,l=n==="forward"?u.domain.end:u.domain.start),this.canStopEarly(r,n,o,s,u))return}canStopEarly(e,r,n,i,o){let{containment:s,distalPosition:l,skipAncestorScopes:u}=n;if(this.isHierarchical&&!u)return!1;let m=this.isHierarchical&&u?i:o;return m==null?!1:!!(s==="required"&&(r==="forward"?m.domain.end.isAfter(e):m.domain.start.isBefore(e))||(r==="forward"?m.domain.end.isAfterOrEqual(l):m.domain.start.isBeforeOrEqual(l)))}};var Pr=class extends je{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.scopeType=n;this.languageId=i;this.isHierarchical=!1}get searchScopeType(){return this.iterationScopeType}get searchScopeHandler(){return this._searchScopeHandler==null&&(this._searchScopeHandler=this.scopeHandlerFactory.create(this.searchScopeType,this.languageId)),this._searchScopeHandler}generateScopeCandidates(r,n,i,o){let{containment:s,...l}=o,u=this.searchScopeHandler.generateScopes(r,n,i,{containment:s==="required"?"required":void 0,...l});return Ef(u,m=>this.generateScopesInSearchScope(i,m))}};var _f=class extends je{constructor(r,n){super();this.scopeType={type:"line"};this.iterationScopeType={type:"paragraph"};this.isHierarchical=!1;this.includeAdjacentInEvery=!0}*generateScopeCandidates(r,n,i){if(i==="forward")for(let o=n.line;o<r.document.lineCount;o++)yield MP(r,o);else for(let o=n.line;o>=0;o--)yield MP(r,o)}};function MP(t,e){let{range:r}=t.document.lineAt(e);return{editor:t,domain:r,getTargets:n=>[dS(t,n,r)]}}function dS(t,e,r){return new fr({editor:t,isReversed:e,contentRange:gS(t,r)})}function gS(t,e){let r=t.document.lineAt(e.start),n=t.document.lineAt(e.end);return new Y(r.rangeTrimmed?.start??r.range.start,n.rangeTrimmed?.end??n.range.end)}function fn(t,e,r,n){let i=e.document.offsetAt(r.start),o=e.document.getText(r),s=l=>new Y(e.document.positionAt(i+l.index),e.document.positionAt(i+l.index+l[0].length));return t.lastIndex=0,n==="forward"?qt(o.matchAll(t),s):Array.from(o.matchAll(t),s).reverse()}var Rf=class extends Pr{constructor(){super(...arguments);this.scopeType={type:"identifier"};this.iterationScopeType={type:"line"};this.regex=Ar(this.languageId).identifierMatcher}generateScopesInSearchScope(r,{editor:n,domain:i}){return qt(fn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new rr({editor:n,contentRange:o,isReversed:s})]}))}};function kf(t,e,r){let n=t.editor.document.getText(t.domain),i=e.editor.document.getText(e.domain);for(let o of r){let s=$o(o,n),l=$o(o,i);if(s&&!l)return!0;if(l&&!s)return!1}}var F4=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}\p{Z}\p{C}]/gu,I4=/[$]/g,C4=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}]/gu,Af=class extends Pr{constructor(){super(...arguments);this.scopeType={type:"character"};this.iterationScopeType={type:"token"}}get searchScopeType(){return{type:"line"}}generateScopesInSearchScope(r,{editor:n,domain:i}){return qt(fn(F4,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new Ye({editor:n,contentRange:o,isReversed:s,textualType:"character"})]}))}isPreferredOver(r,n){let{identifierMatcher:i}=Ar(this.languageId);return kf(r,n,[i,I4,C4])}};var Pf=class extends Pr{constructor(){super(...arguments);this.scopeType={type:"word"};this.iterationScopeType={type:"identifier"};this.wordTokenizer=new Rs(this.languageId)}getScopesInSearchScope({editor:r,domain:n}){let{document:i}=r,o=i.offsetAt(n.start),l=this.wordTokenizer.splitIdentifier(i.getText(n)).map(u=>new Y(i.positionAt(o+u.index),i.positionAt(o+u.index+u.text.length)));return l.map((u,m)=>({editor:r,domain:u,getTargets:d=>{let g=m>0?l[m-1]:null,y=m+1<l.length?l[m+1]:null;return[O4(d,r,g,u,y)]}}))}generateScopesInSearchScope(r,n){let i=this.getScopesInSearchScope(n);return r==="backward"&&i.reverse(),i}};function O4(t,e,r,n,i){let o=r!=null&&n.start.isAfter(r.end)?new Y(r.end,n.start):void 0,s=i!=null&&i.start.isAfter(n.end)?new Y(n.end,i.start):void 0,u=o!=null||s!=null?e.document.getText(o??s):"";return new Xm({editor:e,isReversed:t,contentRange:n,insertionDelimiter:u,leadingDelimiterRange:o,trailingDelimiterRange:s})}var N4=/[$]/g,Df=class extends Pr{constructor(){super(...arguments);this.scopeType={type:"token"};this.iterationScopeType={type:"line"};this.regex=Ar(this.languageId).tokenMatcher}generateScopesInSearchScope(r,{editor:n,domain:i}){return qt(fn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new rr({editor:n,contentRange:o,isReversed:s})]}))}isPreferredOver(r,n){let{identifierMatcher:i}=Ar(this.languageId);return kf(r,n,[i,N4])}};var Mf=class extends je{constructor(r,n){super();this.scopeType={type:"document"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i){let o=r.document.range;yield{editor:r,domain:o,getTargets:s=>[new Qm({editor:r,isReversed:s,contentRange:o})]}}};function Lf(t,e,r,n,i){if(!t&&n!=null&&i!=null&&Zx(e,n)>Zx(e,i))return r.union(n)}function Ds(t){return t.containment==null&&t.skipAncestorScopes}function LP(t,e,r,{containment:n,distalPosition:i,allowAdjacentScopes:o}){let{start:s,end:l}=U4(t.offsetAt(e),t.offsetAt(i),r,n,o);return{start:t.positionAt(s),end:t.positionAt(l)}}function U4(t,e,r,n,i){let o=i?1:0;if(n==="required")return r==="forward"?{start:t-o,end:t+1}:{start:t-1,end:t+o};let s=n==="disallowed"?1:-o;return r==="forward"?{start:t+s,end:e+o}:{start:e-o,end:t-s}}function FP(t,e,r){let n=[],i=[];for(let o of t)i.length===0||e(i[i.length-1],o)?i.push(o):(n.push(r(i)),i=[o]);return i.length>0&&n.push(r(i)),n}var Ms=class extends je{constructor(r){super();this.query=r}*generateScopeCandidates(r,n,i,o){let{document:s}=r,l=Ds(o),{start:u,end:m}=LP(s,n,i,o),d=this.query.matches(s,u,m).map(g=>this.matchToScope(r,g,l)).filter(g=>g!=null).sort((g,y)=>jr(i,n,g,y));yield*FP(d,(g,y)=>g.domain.isRangeEqual(y.domain),g=>g.length===1?g[0]:{...g[0],getTargets(y){let x=jc(g.flatMap(E=>E.getTargets(y)),(E,w)=>E.isEqual(w));if(x.length>1&&!g.every(E=>E.allowMultiple)){let E="Please use #allow-multiple! predicate in your query to allow multiple matches for this scope type";if(pt(k().messages,"BaseTreeSitterScopeHandler.allow-multiple",E),k().runMode==="test")throw Error(E)}return x}})}};function hS(t,e,r,n){return n?Ls(t,`${e}.${r}`,`_.${r}`):Ls(t,`${e}.${r}`)??(Ls(t,e)!=null?Ls(t,`_.${r}`):void 0)}function uo(t,e,r,n){return hS(t,e,r,n)?.range}function Ls(t,...e){return t.captures.find(r=>e.some(n=>r.name===n))}var Ff=class extends Ms{constructor(r,n){super(r);this.iterateeScopeType=n;this.isHierarchical=!0;this.scopeType=void 0}get iterationScopeType(){throw Error("Not implemented")}matchToScope(r,n,i){let o=this.iterateeScopeType.type,s=hS(n,o,"iteration",!1);if(s==null)return;let{range:l,allowMultiple:u}=s;if(l.isEmpty)return;let m=uo(n,o,"iteration.domain",!1)??l;return{editor:r,domain:m,allowMultiple:u,getTargets:d=>[new Ye({editor:r,isReversed:d,contentRange:l})]}}};var If=class extends Ms{constructor(r,n){super(r);this.scopeType=n;this.isHierarchical=!0}get iterationScopeType(){return{type:"custom",scopeHandler:new Ff(this.query,this.scopeType)}}matchToScope(r,n,i){let o=this.scopeType.type,s=Ls(n,o);if(s==null)return;let{range:l,allowMultiple:u,insertionDelimiter:m}=s,d=uo(n,o,"domain",!0)??l,g=uo(n,o,"prefix",!0)?.with(void 0,l.start),y=uo(n,o,"leading",!0)?.with(void 0,g?.start??l.start),x=uo(n,o,"trailing",!0)?.with(l.end),E=uo(n,o,"removal",!0);return E==null&&(o==="collectionItem"||o==="argumentOrParameter")&&(E=Lf(i,r,l,y,x)),{editor:r,domain:d,allowMultiple:u,getTargets:w=>[new ws({scopeTypeType:o,editor:r,isReversed:w,contentRange:l,prefixRange:g,removalRange:E,leadingDelimiterRange:y,trailingDelimiterRange:x,insertionDelimiter:m})]}}};function IP(t){return t.flatMap((e,r)=>{let{value:n,done:i}=e.next();return i?[]:[{iterator:e,value:n,index:r}]})}function CP(t,e){return t.flatMap(r=>{let{iterator:n,index:i}=r,{value:o}=r,s=!1;for(;!s&&!e(o);)({value:o,done:s}=n.next());return s?[]:[{iterator:n,value:o,index:i}]})}var Zn=class t extends je{constructor(r,n){super();this.scopeHandlers=r;this.getIterationScopeHandler=n;this.isHierarchical=!0;this.scopeType=void 0}static create(r,n,i){let o=n.scopeTypes.map(s=>r.create(s,i));return this.createFromScopeHandlers(r,i,o)}static createFromScopeHandlers(r,n,i){let o=()=>new t(i.map(s=>r.create(s.iterationScopeType,n)),()=>{throw new Error("Not implemented")});return new t(i,o)}get iterationScopeType(){return this.iterationScopeHandler==null&&(this.iterationScopeHandler=this.getIterationScopeHandler()),{type:"custom",scopeHandler:this.iterationScopeHandler}}*generateScopeCandidates(r,n,i,o){if(this.iterationScopeHandler?.lastYieldedIndex!=null){let u=this.iterationScopeHandler.lastYieldedIndex;yield*this.scopeHandlers[u].generateScopes(r,n,i,o);return}let s=this.scopeHandlers.map(u=>u.generateScopes(r,n,i,o)[Symbol.iterator]()),l=IP(s);for(;l.length>0;){l.sort((d,g)=>jr(i,n,d.value,g.value));let u=l[0],m=u.value;this.lastYieldedIndex=u.index,yield m,l=CP(l,d=>jr(i,n,m,d)<0)}}};var Cf=class extends je{constructor(r,n){super();this.scopeType={type:"paragraph"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i){let{document:o}=r,s=i==="forward"?1:-1,l=i==="forward"?o.lineCount:-1,u=H4(o,n,i),m=r.document.lineAt(n);for(let d=n.line+s;d!==l;d+=s){let g=r.document.lineAt(d);g.isEmptyOrWhitespace?u!=null&&(yield OP(r,u.range.union(m.range)),u=void 0):u==null&&(u=g),m=g}u!=null&&(yield OP(r,u.range.union(m.range)))}};function H4(t,e,r){let n=r==="forward"?-1:1,i=r==="forward"?-1:t.lineCount,o=t.lineAt(e);if(!o.isEmptyOrWhitespace){for(let s=e.line+n;s!==i;s+=n){let l=t.lineAt(s);if(l.isEmptyOrWhitespace)break;o=l}return o}}function OP(t,e){return{editor:t,domain:e,getTargets:r=>[new ao({editor:t,isReversed:r,contentRange:gS(t,e)})]}}function bl(t,e){return e.length>1?e.indexOf(t.slice(-1))>-1:t.slice(-1)===e}function NP(t,e){return t.slice(t.length-e.length)===e}var yS,V4=["al","adj","assn","Ave","BSc","MSc","Cell","Ch","Co","cc","Corp","Dem","Dept","ed","eg","Eq","Eqs","est","est","etc","Ex","ext","Fig","fig","Figs","figs","i.e","ie","Inc","inc","Jan","Feb","Mar","Apr","Jun","Jul","Aug","Sep","Sept","Oct","Nov","Dec","jr","mi","Miss","Mrs","Mr","Ms","Mol","mt","mts","no","Nos","PhD","MD","BA","MA","MM","pl","pop","pp","Prof","Dr","pt","Ref","Refs","Rep","repr","rev","Sec","Secs","Sgt","Col","Gen","Rep","Sen","Gov","Lt","Maj","Capt","St","Sr","sr","Jr","jr","Rev","Sun","Mon","Tu","Tue","Tues","Wed","Th","Thu","Thur","Thurs","Fri","Sat","trans","Univ","Viz","Vol","vs","v"];function UP(t){t?yS=t:yS=V4}function TS(t){return/^[A-Z][a-z].*/.test(t)||Of(t)}function HP(t){return TS(t)||/``|"|'/.test(t.substring(0,2))}function BP(t){let e=t.replace(/[-'`~!@#$%^&*()_|+=?;:'",.<>{}[\]\\/]/gi,"");return~yS.indexOf(e)}function VP(t,e){return(t==="a.m."||t==="p.m.")&&e.replace(/\W+/g,"").slice(-3).toLowerCase()==="day"}function xS(t){let e=t.replace(/[()[]{}]/g,"").match(/(.\.)*/);return e&&e[0].length>0}function WP(t){return t.length<=3?!0:TS(t)}function SS(t,e){return e.length>0?t<5&&e[0].length<6&&TS(e[0])?!0:e.filter(function(n){return/[A-Z]/.test(n.charAt(0))}).length>=3:!1}function Of(t,e){return e&&(t=t.slice(e-1,e+2)),!isNaN(t)}function $P(t){return t.match(/^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/)}function jP(t){return t.match(/[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/)}function zP(t){let e=0;return((e=t.indexOf("."))>-1||(e=t.indexOf("!"))>-1||(e=t.indexOf("?"))>-1)&&t.charAt(e+1).match(/[a-zA-Z].*/)?[t.slice(0,e),t.slice(e+1)]:!1}function qP(t){return t==="."||t==="!"||t==="?"}var KP=" @~@ ",GP=KP.trim(),$4=new RegExp("\\S",""),j4=new RegExp("\\n+|[-#=_+*]{4,}","g"),z4=new RegExp("\\S+|\\n","g"),q4={newlineBoundaries:!1,preserveWhitespace:!1,abbreviations:void 0};function QP(t,e){if(!t)return[];if(!$4.test(t))return[];let r={...q4,...e};UP(r.abbreviations),r.newlineBoundaries&&(t=t.replace(j4,KP));let n,i;r.preserveWhitespace?(i=t.split(/(<br\s*\/?>|\S+|\n+)/),n=i.filter(function(g,y){return y%2})):n=t.trim().match(z4)??[];let o=0,s=0,l=[],u=[],m=[];if(!n||!n.length)return[];for(let g=0,y=n.length;g<y;g++){if(o++,m.push(n[g]),~n[g].indexOf(",")&&(o=0),qP(n[g])||bl(n[g],"?!")||n[g]===GP){r.newlineBoundaries&&n[g]===GP&&m.pop(),u.push(m),o=0,m=[];continue}if((bl(n[g],'"')||bl(n[g],"\u201D"))&&(n[g]=n[g].slice(0,-1)),bl(n[g],".")){if(g+1<y){if(n[g].length===2&&isNaN(n[g].charAt(0))||BP(n[g]))continue;if(HP(n[g+1])){if(VP(n[g],n[g+1])||SS(o,n.slice(g,6))||Of(n[g+1])&&WP(n[g]))continue}else if(NP(n[g],"..")||xS(n[g])||SS(o,n.slice(g,5)))continue}u.push(m),m=[],o=0;continue}(s=n[g].indexOf("."))>-1&&(Of(n[g],s)||xS(n[g])||jP(n[g])||$P(n[g]))||(l=zP(n[g]))&&(m.pop(),m.push(l[0]),u.push(m),m=[],o=0,m.push(l[1]))}return m.length&&u.push(m),u=u.filter(function(g){return g.length>0}),u.slice(1).reduce(function(g,y){let x=g[g.length-1];return x.length===1&&/^.{1,2}[.]$/.test(x[0])&&!/[.]/.test(y[0])?(g.pop(),g.push(x.concat(y)),g):(g.push(y),g)},[u[0]]).map(function(g,y){if(r.preserveWhitespace&&!r.newlineBoundaries){let x=g.length*2;return y===0&&(x+=1),i.splice(0,x).join("")}return g.join(" ")})}var G4=/\S*\p{L}/u,YP=/(\r?\n[^\p{L}]*\r?\n)|(?<=[.!?])(\s*\r?\n)/gu,K4={newlineBoundaries:!1,preserveWhitespace:!0},Nf=class{*segment(e){let r=QP(e,K4),n=0;for(let i of r){let o=i.split(YP).filter(s=>s!=null);for(let s of o){if(!Y4(s)){let l=Q4(s,n);l!=null&&(yield l)}n+=s.length}}}};function Q4(t,e){let r=KR(G4,t);if(r==null)return;let n=r.index;return n!==0&&(e+=n,t=t.slice(n)),{text:t.trimEnd(),index:e}}function Y4(t){return $o(YP,t)}var Uf=class extends Pr{constructor(){super(...arguments);this.scopeType={type:"sentence"};this.iterationScopeType={type:"paragraph"};this.segmenter=new Nf}generateScopesInSearchScope(r,{editor:n,domain:i}){let o=n.document.offsetAt(i.start),s=n.document.getText(i),l=m=>{let d=new Y(n.document.positionAt(o+m.index),n.document.positionAt(o+m.index+m.text.length));return{editor:n,domain:d,getTargets:g=>[new rr({editor:n,contentRange:d,isReversed:g})]}},u=this.segmenter.segment(s);return r==="forward"?qt(u,l):Array.from(u,l).reverse()}};var Fs=class extends Pr{constructor(){super(...arguments);this.iterationScopeType={type:"line"}}generateScopesInSearchScope(r,{editor:n,domain:i}){return qt(fn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new rr({editor:n,contentRange:o,isReversed:s})]}))}},Hf=class extends Fs{constructor(){super(...arguments);this.regex=/\S+/g}},Bf=class extends Fs{constructor(r,n,i){super(r,n,i);this.scopeType=n;this.regex=/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/g}},Vf=class extends Fs{constructor(r,n,i){super(r,n,i);this.scopeType=n}get regex(){return new RegExp(this.scopeType.regex,this.scopeType.flags??"gu")}},Wf=class extends Fs{constructor(r,n,i){super(r,n,i);this.scopeType=n}get regex(){return new RegExp(Br(this.scopeType.character),"gui")}};var $f=class extends je{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.languageId=n;this.targetScopeType=i;this.isHierarchical=!0;this.targetScopeHandler=this.scopeHandlerFactory.create(this.targetScopeType,this.languageId),this.surroundingPairInteriorScopeHandler=this.scopeHandlerFactory.create({type:"surroundingPairInterior",delimiter:"any"},this.languageId)}get iterationScopeType(){switch(this.targetScopeHandler.iterationScopeType.type){case"custom":case"fallback":case"conditional":throw Error(`Iteration scope type can't be '${this.targetScopeHandler.iterationScopeType.type}' for BoundedBaseScopeHandler`)}return{type:"oneOf",scopeTypes:[this.targetScopeHandler.iterationScopeType,{type:"surroundingPairInterior",delimiter:"any"}]}}*generateScopeCandidates(r,n,i,o){let s=this.targetScopeHandler.generateScopes(r,n,i,{...o,containment:o.containment!=="disallowed"?o.containment:void 0}),l=Array.from(this.surroundingPairInteriorScopeHandler.generateScopes(r,n,i,{...o,containment:Ds(o)?"required":o.containment}));for(let u of s){let m=[];for(let d of l){let g=u.domain.intersection(d.domain);g!=null&&!g.isEmpty&&m.push({editor:r,domain:g,getTargets:y=>[this.getTargets(ZP(u,y),ZP(d,y))]})}m.push(u),m.sort((d,g)=>jr(i,n,d,g)),yield*m}}};function ZP(t,e){let r=t.getTargets(e);if(r.length!==1)throw Error(`Expected one target but got ${r.length}`);return r[0]}var jf=class extends $f{constructor(r,n,i){super(r,i,{type:"nonWhitespaceSequence"});this.scopeType={type:"boundedNonWhitespaceSequence"}}getTargets(r,n){let i=r.contentRange.intersection(n.contentRange);if(i==null||i.isEmpty)throw Error("Expected non empty intersection");return new rr({editor:r.editor,isReversed:r.isReversed,contentRange:i})}},zf=class extends $f{constructor(r,n,i){super(r,i,{type:"paragraph"});this.scopeType={type:"boundedParagraph"}}getTargets(r,n){if(!(r instanceof ao))throw Error("Expected ParagraphTarget");return new rf({editor:r.editor,isReversed:r.isReversed,paragraphTarget:r,containingInterior:n})}};var Xn=class{constructor(e){this.items=e;this.index=0}add(e){this.items.push(e)}contains(e){return this.advance(e)}getContaining(e){if(this.advance(e))return this.items[this.index]}advance(e){for(;this.index<this.items.length;){let r=this.items[this.index].range;if(r.contains(e))return!0;if(e.end.isBeforeOrEqual(r.start))return!1;this.index++}return!1}};var Is=class{constructor(e){this.children=Z4(e)}getSmallestContaining(e){return this.children.getContaining(e)?.getSmallestContaining(e)}};function Z4(t){let e=[],r=[];for(let n of t){let i=new vS(n);for(;r.length>0&&!r[r.length-1].range.contains(n.range);)r.pop();let o=r[r.length-1];o!=null?o.children.add(i):e.push(i),r.push(i)}return new Xn(e)}var vS=class{constructor(e){this.item=e;this.children=new Xn([])}get range(){return this.item.range}getSmallestContaining(e){return this.children.getContaining(e)?.getSmallestContaining(e)??this.item}};var X4=",",bS=new RegExp(X4,"g");function XP(t){let e=t.getText();return sn(e,bS,r=>new Y(t.positionAt(r.index),t.positionAt(r.index+r[0].length)))}var JP={type:"fallback",scopeTypes:[{type:"conditional",scopeType:{type:"surroundingPairInterior",delimiter:"collectionBoundary"},predicate:t=>!t.domain.isEmpty},{type:"conditional",scopeType:{type:"line"},predicate:t=>{let e=t.editor.document.getText(t.domain);return $o(bS,e)}}]};function wS(t,e,r,n,i,o){let s=i!=null?new Y(i.end,n.start):void 0,l=o!=null?new Y(n.end,o.start):void 0,u=Lf(t,e,n,s,l),m=r.isSingleLine?", ":`,
`;return{editor:e,domain:n,getTargets(d){return[new ws({scopeTypeType:"collectionItem",editor:e,isReversed:d,contentRange:n,insertionDelimiter:m,leadingDelimiterRange:s,trailingDelimiterRange:l,removalRange:u})]}}}function ES(t,e,r,n){let i=t.create({type:"surroundingPairInterior",delimiter:n},e);return Array.from(i.generateScopes(r,new _e(0,0),"forward",{containment:void 0,skipAncestorScopes:!1,includeDescendantScopes:!0}),o=>({range:o.domain}))}var qf=class extends je{constructor(r,n){super();this.scopeHandlerFactory=r;this.languageId=n;this.scopeType={type:"collectionItem"};this.isHierarchical=!0}get iterationScopeType(){return JP}*generateScopeCandidates(r,n,i,o){let s=Ds(o),l=XP(r.document),u=ES(this.scopeHandlerFactory,this.languageId,r,"collectionBoundary"),m=new Is(u),d=ES(this.scopeHandlerFactory,this.languageId,r,"string"),g=new Xn(d),y=[],x=new Set,E=[];for(let w of l){if(g.contains(w))continue;let U;for(;E.length>0;){let ne=E[E.length-1];if(ne.iterationRange.contains(w)){U=ne;break}this.addScopes(y,ne),E.pop()}let V=m.getSmallestContaining(w)?.range,q=V??r.document.lineAt(w.start.line).range;if(U!=null&&U.iterationRange.isRangeEqual(q)){U.delimiters.push(w);continue}V!=null&&x.add(V),E.push({editor:r,isEveryScope:s,iterationRange:q,delimiters:[w]})}for(let w of E)this.addScopes(y,w);for(let w of u)if(!x.has(w.range)&&!w.range.isEmpty){let U=ea(r,w.range);U.isEmpty||y.push(wS(s,r,w.range,U))}y.sort((w,U)=>jr(i,n,w,U)),yield*y}addScopes(r,n){let{editor:i,iterationRange:o,isEveryScope:s,delimiters:l}=n;if(l.length===0)return;let u=[];for(let g=0;g<l.length;++g){let y=l[g],x=l[g-1]?.end??o.start;u.push(new Y(x,y.start))}let m=l[l.length-1];u.push(new Y(m.end,o.end));let d=u.map(g=>ea(i,g));for(let g=0;g<d.length;++g)g===d.length-1&&i.document.getText(d[g]).trim()===""||r.push(wS(s,i,o,d[g],d[g-1],d[g+1]))}};var Gf=class extends je{constructor(r,n,i){super();this.scopeType={type:"collectionItem"};this.isHierarchical=!0;this.scopeHandler=(()=>{let o=new qf(r,i),s=n.get(i)?.getScopeHandler(this.scopeType);return s==null?o:Zn.createFromScopeHandlers(r,i,[s,o])})()}get iterationScopeType(){return this.scopeHandler.iterationScopeType}generateScopeCandidates(r,n,i,o){return this.scopeHandler.generateScopes(r,n,i,o)}};var Kf=class extends je{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.conditionalScopeType=n;this.languageId=i;this.scopeType=void 0;this.isHierarchical=!0}get iterationScopeType(){throw new vt("Iteration scope for ConditionalScopeHandler")}generateScopeCandidates(r,n,i,o){let s=this.scopeHandlerFactory.create(this.conditionalScopeType.scopeType,this.languageId);return bf(s.generateScopes(r,n,i,o),this.conditionalScopeType.predicate)}};var Cs=class t extends je{constructor(r){super();this.scopeHandlers=r;this.scopeType=void 0;this.isHierarchical=!0}static create(r,n,i){let o=n.scopeTypes.map(s=>r.create(s,i));return this.createFromScopeHandlers(o)}static createFromScopeHandlers(r){return new t(r)}get iterationScopeType(){throw new vt("Iteration scope for FallbackScopeHandler")}*generateScopeCandidates(r,n,i,o){for(let s of this.scopeHandlers)yield*s.generateScopes(r,n,i,o)}};var Qf=class extends je{constructor(){super();this.scopeType={type:"notebookCell"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i,o){let s=J4(r,n,i,o);for(let l of s)yield t9(l)}};function J4(t,e,r,n){let i=e9(t);if(i==null)return[];let{notebook:o,cell:s}=i;return n.containment==="required"?[s]:n.containment==="disallowed"||n.containment==="disallowedIfStrict"?r==="forward"?o.cells.slice(s.index+1):o.cells.slice(0,s.index).reverse():n.distalPosition!=null&&new Y(e,n.distalPosition).isRangeEqual(t.document.range)?o.cells:r==="forward"?o.cells.slice(s.index):o.cells.slice(0,s.index+1).reverse()}function e9(t){let e=t.document.uri.toString();for(let r of k().visibleNotebookEditors)for(let n of r.cells)if(n.document.uri.toString()===e)return{notebook:r,cell:n}}function t9(t){let e=r9(t),r=e.document.range;return{editor:e,domain:r,getTargets:n=>[new Zm({editor:e,isReversed:n,contentRange:r})]}}function r9(t){let e=t.document.uri.toString();for(let r of k().visibleTextEditors)if(r.document.uri.toString()===e)return r;throw new Error("Editor not found notebook cell")}var Yf=class extends je{constructor(r,n,i,o){super();this.scopeType={type:"notebookCell"};this.isHierarchical=!1;this.scopeHandler=(()=>{let s=new Qf,l=n.get(o)?.getScopeHandler(this.scopeType);return l==null?s:Zn.createFromScopeHandlers(r,o,[l,s])})()}get iterationScopeType(){return this.scopeHandler.iterationScopeType}generateScopeCandidates(r,n,i,o){return this.scopeHandler.generateScopes(r,n,i,o)}};var Zf=class extends je{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.scopeType=n;this.languageId=i;this.isHierarchical=!0;this.surroundingPairScopeHandler=this.scopeHandlerFactory.create({type:"surroundingPair",delimiter:this.scopeType.delimiter,requireStrongContainment:!0},this.languageId)}get iterationScopeType(){return this.surroundingPairScopeHandler.iterationScopeType}*generateScopeCandidates(r,n,i,o){let s=this.surroundingPairScopeHandler.generateScopes(r,n,i,o);for(let l of s)yield{editor:r,domain:l.domain,getTargets(u){return l.getTargets(u).flatMap(m=>m.getInterior())}}}};function eD(t,{openingDelimiterRange:e,closingDelimiterRange:r},n){let i=e.union(r),o=new Y(e.end,r.start);return{editor:t,domain:n?o:i,getTargets:s=>[new Jm({editor:t,isReversed:s,contentRange:i,interiorRange:o,boundary:[e,r]})]}}function tD(t){let e=Wo(t.map(({text:r})=>r)).map(Br).join("|");return new RegExp(`(?<!\\\\)(${e})`,"gu")}function nD(t,e,r){if(r.length===0)return[];let n=t?.getCapturesMap(e)??{},i=new Xn(_S(n.disqualifyDelimiter)),o=new Xn(_S(n.pairDelimiter)),s=new Is(_S(n.textFragment)),l=Object.fromEntries(r.map(d=>[d.text,d])),u=ex(e.getText(),tD(r)),m=[];for(let d of u){let g=d[0],y=new Y(e.positionAt(d.index),e.positionAt(d.index+g.length));rD(i.getContaining(y))==null&&m.push({delimiterInfo:l[g],textFragmentRange:s.getSmallestContaining(y)?.range,range:rD(o.getContaining(y))?.range??y})}return m}function rD(t){return t!=null&&!t.hasError()?t:void 0}function _S(t){return t==null?[]:(t.sort((e,r)=>e.range.start.compareTo(r.range.start)),t)}var Xf=Object.freeze({angleBrackets:[["</","<"],[">","/>"]],curlyBrackets:[["{","${"],"}"],tripleBacktickQuotes:[[],[]],tripleDoubleQuotes:[[],[]],tripleSingleQuotes:[[],[]],doubleQuotes:['"','"',{isSingleLine:!0}],escapedDoubleQuotes:['\\"','\\"',{isSingleLine:!0}],escapedParentheses:["\\(","\\)"],escapedSquareBrackets:["\\[","\\]"],escapedSingleQuotes:["\\'","\\'",{isSingleLine:!0}],parentheses:[["(","$("],")"],backtickQuotes:["`","`"],singleQuotes:["'","'",{isSingleLine:!0}],squareBrackets:["[","]"]}),iD={nix:{singleQuotes:["''","''"]},lua:{doubleQuotes:[['"',"[["],['"',"]]"]]},python:{tripleSingleQuotes:["'''","'''"],tripleDoubleQuotes:['"""','"""']},markdown:{tripleBacktickQuotes:["```","```"]},ruby:{tripleDoubleQuotes:["%Q(",")"]},csharp:{doubleQuotes:[['@"','"'],['"','"']]}},Ibe=Object.fromEntries(Object.values(Xf)),oD={any:sl(Xf),string:["tripleDoubleQuotes","tripleSingleQuotes","tripleBacktickQuotes","doubleQuotes","singleQuotes","backtickQuotes"],collectionBoundary:["parentheses","squareBrackets","curlyBrackets","angleBrackets"]};function aD(t){return t!=null&&t in iD?{...Xf,...iD[t]}:Xf}function sD(t,e){let r=oD[t]??[t];return n9(e,r)}function n9(t,e){let r=aD(t);return e.flatMap(n=>{let[i,o,s]=r[n],{isSingleLine:l=!1}=s??{},u=ol(i)?[i]:i,m=ol(o)?[o]:o;return Wo($c(u,m)).map(g=>{let y=u.includes(g),x=m.includes(g);return{text:g,side:y&&!x?"left":!y&&x?"right":"unknown",delimiterName:n,isSingleLine:l}})})}function cD(t){let e=[],r=[];for(let n of t){let{delimiterInfo:{delimiterName:i,side:o,isSingleLine:s},textFragmentRange:l,range:u}=n;if(o==="left")r.push(n);else{let m=Vo(r,g=>g.delimiterInfo.delimiterName===i&&i9(g.textFragmentRange,l)&&o9(s,g.range,u));if(m===-1){o==="unknown"&&r.push(n);continue}let d=r[m];r.length=m,e.push({delimiterName:i,openingDelimiterRange:d.range,closingDelimiterRange:u})}}return e}function i9(t,e){return t==null||e==null?t===e:t.isRangeEqual(e)}function o9(t,e,r){return!t||e.start.line===r.start.line}var Jf=class extends je{constructor(r,n,i){super();this.languageDefinitions=r;this.scopeType=n;this.languageId=i;this.iterationScopeType={type:"conditional",scopeType:{type:"line"},predicate:r=>!r.domain.isEmpty};this.isHierarchical=!0}*generateScopeCandidates(r,n,i,o){if(this.scopeType.forceDirection!=null){pt(k().messages,"deprecatedForceDirection","forceDirection is deprecated. If this is important to you please file an issue on the cursorless repo.");return}let s=nD(this.languageDefinitions.get(this.languageId),r.document,sD(this.scopeType.delimiter,this.languageId)),l=cD(s);l=a9(i,o,n,l),yield*l.map(u=>eD(r,u,this.scopeType.requireStrongContainment??!1)).sort((u,m)=>jr(i,n,u,m))}};function a9(t,e,r,n){return t==="forward"&&e.containment==="required"&&e.allowAdjacentScopes&&e.skipAncestorScopes?n.filter((i,o)=>!(i.closingDelimiterRange.end.isEqual(r)&&n[o+1]?.closingDelimiterRange.start.isEqual(r))):n}var ed=class extends je{constructor(r,n,i,o){super();this.scopeHandlerFactory=r;this.languageDefinitions=n;this.scopeType=i;this.languageId=o;this.isHierarchical=!0}get iterationScopeType(){throw new vt("Iteration scope for InteriorScopeHandler")}*generateScopeCandidates(r,n,i,o){let s=new Y(n,o.distalPosition),l=this.getScopeHandler();if(l==null)return;let u=l.generateScopes(r,n,i,o);for(let m of u)this.shouldYield(s,m)&&(yield s9(m))}getScopeHandler(){let r=this.languageDefinitions.get(this.languageId)?.getScopeHandler(this.scopeType),n=this.scopeHandlerFactory.create({type:"surroundingPair",delimiter:"any"},this.languageId);return this.scopeType.explicitScopeType?r==null?n:Cs.createFromScopeHandlers([r,n]):r==null?n:Zn.createFromScopeHandlers(this.scopeHandlerFactory,this.languageId,[r,n])}shouldYield(r,n){return!this.scopeType.explicitScopeType||r.contains(n.domain)}};function s9(t){return{editor:t.editor,domain:t.domain,getTargets(e){return t.getTargets(e).flatMap(c9)}}}function c9(t){let e=t.getInterior();return e??[new Es({editor:t.editor,isReversed:t.isReversed,fullInteriorRange:t.contentRange})]}var Os=class{constructor(e){this.languageDefinitions=e;this.maybeCreate=this.maybeCreate.bind(this),this.create=this.create.bind(this)}maybeCreate(e,r){switch(e.type){case"character":return new Af(this,e,r);case"word":return new Pf(this,e,r);case"token":return new Df(this,e,r);case"identifier":return new Rf(this,e,r);case"line":return new _f(e,r);case"sentence":return new Uf(this,e,r);case"paragraph":return new Cf(e,r);case"boundedParagraph":return new zf(this,e,r);case"document":return new Mf(e,r);case"nonWhitespaceSequence":return new Hf(this,e,r);case"boundedNonWhitespaceSequence":return new jf(this,e,r);case"url":return new Bf(this,e,r);case"customRegex":return new Vf(this,e,r);case"glyph":return new Wf(this,e,r);case"collectionItem":return new Gf(this,this.languageDefinitions,r);case"surroundingPair":return new Jf(this.languageDefinitions,e,r);case"surroundingPairInterior":return new Zf(this,e,r);case"notebookCell":return new Yf(this,this.languageDefinitions,e,r);case"interior":return new ed(this,this.languageDefinitions,e,r);case"custom":return e.scopeHandler;case"oneOf":return Zn.create(this,e,r);case"fallback":return Cs.create(this,e,r);case"conditional":return new Kf(this,e,r);case"instance":throw Error("Unexpected scope type 'instance'");default:return this.languageDefinitions.get(r)?.getScopeHandler(e)}}create(e,r){let n=this.maybeCreate(e,r);if(n==null)throw new Error(`Couldn't create scope handler for '${e.type}'`);return n}};function lD(t){return new Y(t.startPosition.row,t.startPosition.column,t.endPosition.row,t.endPosition.column)}function uD(t,e){if(t.length===1)return!0;let r=!1,n=t.filter(({name:u})=>u.endsWith(".start")).map(({range:{end:u}})=>u).sort((u,m)=>u.compareTo(m)).at(-1),i=t.filter(({name:u})=>u.endsWith(".end")).map(({range:{start:u}})=>u).sort((u,m)=>u.compareTo(m)).at(0);n!=null&&i!=null&&n.isAfter(i)&&(pt(e,"TreeSitterQuery.checkCaptures.badOrder",`Start capture must be before end capture: ${t.map(u=>u.name)}`),r=!0);let o=t.filter(({name:u})=>u.endsWith(".start")).length,s=t.filter(({name:u})=>u.endsWith(".end")).length,l=t.length-o-s;return l>0&&(o>0||s>0)&&(pt(e,"TreeSitterQuery.checkCaptures.mixRegularStartEnd",`Please do not mix regular captures and start/end captures: ${t.map(({name:u,range:m})=>u+" "+m.toString())}`),r=!0),l>1&&(pt(e,"TreeSitterQuery.checkCaptures.duplicate",`A capture with the same name may only appear once in a single pattern: ${t.map(({name:u,range:m})=>u+" "+m.toString())}`),r=!0),!r}function pD(t){if(t.hasError)return!0;let e=t.parent;for(;e!=null;){if(e.isError)return!0;if(e.hasError)return!1;if(e.previousSibling?.isError||e.nextSibling?.isError)return!0;e=e.parent}return!1}function RS(t){return t.replace(/(\.(start|end))?(\.(startOf|endOf))?$/,"")}var Le={};v_(Le,{BRAND:()=>I9,DIRTY:()=>na,EMPTY_PATH:()=>m9,INVALID:()=>Te,NEVER:()=>T6,OK:()=>nr,ParseStatus:()=>Gt,Schema:()=>Ie,ZodAny:()=>fo,ZodArray:()=>Mi,ZodBigInt:()=>oa,ZodBoolean:()=>aa,ZodBranded:()=>El,ZodCatch:()=>ya,ZodDate:()=>sa,ZodDefault:()=>ha,ZodDiscriminatedUnion:()=>nd,ZodEffects:()=>hn,ZodEnum:()=>da,ZodError:()=>Dr,ZodFirstPartyTypeKind:()=>we,ZodFunction:()=>od,ZodIntersection:()=>pa,ZodIssueCode:()=>te,ZodLazy:()=>ma,ZodLiteral:()=>fa,ZodMap:()=>Ws,ZodNaN:()=>js,ZodNativeEnum:()=>ga,ZodNever:()=>Ln,ZodNull:()=>la,ZodNullable:()=>ti,ZodNumber:()=>ia,ZodObject:()=>Mr,ZodOptional:()=>dn,ZodParsedType:()=>ce,ZodPipeline:()=>_l,ZodPromise:()=>go,ZodReadonly:()=>Ta,ZodRecord:()=>id,ZodSchema:()=>Ie,ZodSet:()=>$s,ZodString:()=>mo,ZodSymbol:()=>Bs,ZodTransformer:()=>hn,ZodTuple:()=>ei,ZodType:()=>Ie,ZodUndefined:()=>ca,ZodUnion:()=>ua,ZodUnknown:()=>Di,ZodVoid:()=>Vs,addIssueToContext:()=>ie,any:()=>$9,array:()=>G9,bigint:()=>U9,boolean:()=>bD,coerce:()=>y6,custom:()=>xD,date:()=>H9,datetimeRegex:()=>yD,defaultErrorMap:()=>Ai,discriminatedUnion:()=>Z9,effect:()=>l6,enum:()=>a6,function:()=>n6,getErrorMap:()=>Ns,getParsedType:()=>Jn,instanceof:()=>O9,intersection:()=>X9,isAborted:()=>td,isAsync:()=>Us,isDirty:()=>rd,isValid:()=>po,late:()=>C9,lazy:()=>i6,literal:()=>o6,makeIssue:()=>wl,map:()=>t6,nan:()=>N9,nativeEnum:()=>s6,never:()=>z9,null:()=>W9,nullable:()=>p6,number:()=>vD,object:()=>K9,objectUtil:()=>kS,oboolean:()=>h6,onumber:()=>g6,optional:()=>u6,ostring:()=>d6,pipeline:()=>f6,preprocess:()=>m6,promise:()=>c6,quotelessJson:()=>l9,record:()=>e6,set:()=>r6,setErrorMap:()=>p9,strictObject:()=>Q9,string:()=>SD,symbol:()=>B9,transformer:()=>l6,tuple:()=>J9,undefined:()=>V9,union:()=>Y9,unknown:()=>j9,util:()=>Ve,void:()=>q9});var Ve;(function(t){t.assertEqual=i=>{};function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{let o={};for(let s of i)o[s]=s;return o},t.getValidEnumValues=i=>{let o=t.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),s={};for(let l of o)s[l]=i[l];return t.objectValues(s)},t.objectValues=i=>t.objectKeys(i).map(function(o){return i[o]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let o=[];for(let s in i)Object.prototype.hasOwnProperty.call(i,s)&&o.push(s);return o},t.find=(i,o)=>{for(let s of i)if(o(s))return s},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function n(i,o=" | "){return i.map(s=>typeof s=="string"?`'${s}'`:s).join(o)}t.joinValues=n,t.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(Ve||(Ve={}));var kS;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(kS||(kS={}));var ce=Ve.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Jn=t=>{switch(typeof t){case"undefined":return ce.undefined;case"string":return ce.string;case"number":return Number.isNaN(t)?ce.nan:ce.number;case"boolean":return ce.boolean;case"function":return ce.function;case"bigint":return ce.bigint;case"symbol":return ce.symbol;case"object":return Array.isArray(t)?ce.array:t===null?ce.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ce.promise:typeof Map<"u"&&t instanceof Map?ce.map:typeof Set<"u"&&t instanceof Set?ce.set:typeof Date<"u"&&t instanceof Date?ce.date:ce.object;default:return ce.unknown}};var te=Ve.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),l9=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),Dr=class t extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){let r=e||function(o){return o.message},n={_errors:[]},i=o=>{for(let s of o.issues)if(s.code==="invalid_union")s.unionErrors.map(i);else if(s.code==="invalid_return_type")i(s.returnTypeError);else if(s.code==="invalid_arguments")i(s.argumentsError);else if(s.path.length===0)n._errors.push(r(s));else{let l=n,u=0;for(;u<s.path.length;){let m=s.path[u];u===s.path.length-1?(l[m]=l[m]||{_errors:[]},l[m]._errors.push(r(s))):l[m]=l[m]||{_errors:[]},l=l[m],u++}}};return i(this),n}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ve.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};Dr.create=t=>new Dr(t);var u9=(t,e)=>{let r;switch(t.code){case te.invalid_type:t.received===ce.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case te.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,Ve.jsonStringifyReplacer)}`;break;case te.unrecognized_keys:r=`Unrecognized key(s) in object: ${Ve.joinValues(t.keys,", ")}`;break;case te.invalid_union:r="Invalid input";break;case te.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Ve.joinValues(t.options)}`;break;case te.invalid_enum_value:r=`Invalid enum value. Expected ${Ve.joinValues(t.options)}, received '${t.received}'`;break;case te.invalid_arguments:r="Invalid function arguments";break;case te.invalid_return_type:r="Invalid function return type";break;case te.invalid_date:r="Invalid date";break;case te.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:Ve.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case te.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case te.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case te.custom:r="Invalid input";break;case te.invalid_intersection_types:r="Intersection results could not be merged";break;case te.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case te.not_finite:r="Number must be finite";break;default:r=e.defaultError,Ve.assertNever(t)}return{message:r}},Ai=u9;var mD=Ai;function p9(t){mD=t}function Ns(){return mD}var wl=t=>{let{data:e,path:r,errorMaps:n,issueData:i}=t,o=[...r,...i.path||[]],s={...i,path:o};if(i.message!==void 0)return{...i,path:o,message:i.message};let l="",u=n.filter(m=>!!m).slice().reverse();for(let m of u)l=m(s,{data:e,defaultError:l}).message;return{...i,path:o,message:l}},m9=[];function ie(t,e){let r=Ns(),n=wl({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===Ai?void 0:Ai].filter(i=>!!i)});t.common.issues.push(n)}var Gt=class t{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let i of r){if(i.status==="aborted")return Te;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let i of r){let o=await i.key,s=await i.value;n.push({key:o,value:s})}return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let i of r){let{key:o,value:s}=i;if(o.status==="aborted"||s.status==="aborted")return Te;o.status==="dirty"&&e.dirty(),s.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof s.value<"u"||i.alwaysSet)&&(n[o.value]=s.value)}return{status:e.value,value:n}}},Te=Object.freeze({status:"aborted"}),na=t=>({status:"dirty",value:t}),nr=t=>({status:"valid",value:t}),td=t=>t.status==="aborted",rd=t=>t.status==="dirty",po=t=>t.status==="valid",Us=t=>typeof Promise<"u"&&t instanceof Promise;var me;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(me||(me={}));var gn=class{constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},fD=(t,e)=>{if(po(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new Dr(t.common.issues);return this._error=r,this._error}}};function Pe(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(s,l)=>{let{message:u}=t;return s.code==="invalid_enum_value"?{message:u??l.defaultError}:typeof l.data>"u"?{message:u??n??l.defaultError}:s.code!=="invalid_type"?{message:l.defaultError}:{message:u??r??l.defaultError}},description:i}}var Ie=class{get description(){return this._def.description}_getType(e){return Jn(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:Jn(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Gt,ctx:{common:e.parent.common,data:e.data,parsedType:Jn(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(Us(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){let n={common:{issues:[],async:r?.async??!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Jn(e)},i=this._parseSync({data:e,path:n.path,parent:n});return fD(n,i)}"~validate"(e){let r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Jn(e)};if(!this["~standard"].async)try{let n=this._parseSync({data:e,path:[],parent:r});return po(n)?{value:n.value}:{issues:r.common.issues}}catch(n){n?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then(n=>po(n)?{value:n.value}:{issues:r.common.issues})}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Jn(e)},i=this._parse({data:e,path:n.path,parent:n}),o=await(Us(i)?i:Promise.resolve(i));return fD(n,o)}refine(e,r){let n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,o)=>{let s=e(i),l=()=>o.addIssue({code:te.custom,...n(i)});return typeof Promise<"u"&&s instanceof Promise?s.then(u=>u?!0:(l(),!1)):s?!0:(l(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new hn({schema:this,typeName:we.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return dn.create(this,this._def)}nullable(){return ti.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Mi.create(this)}promise(){return go.create(this,this._def)}or(e){return ua.create([this,e],this._def)}and(e){return pa.create(this,e,this._def)}transform(e){return new hn({...Pe(this._def),schema:this,typeName:we.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new ha({...Pe(this._def),innerType:this,defaultValue:r,typeName:we.ZodDefault})}brand(){return new El({typeName:we.ZodBranded,type:this,...Pe(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new ya({...Pe(this._def),innerType:this,catchValue:r,typeName:we.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return _l.create(this,e)}readonly(){return Ta.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},f9=/^c[^\s-]{8,}$/i,d9=/^[0-9a-z]+$/,g9=/^[0-9A-HJKMNP-TV-Z]{26}$/i,h9=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,y9=/^[a-z0-9_-]{21}$/i,T9=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,x9=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,S9=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,v9="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",AS,b9=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,w9=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,E9=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,_9=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,R9=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,k9=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,gD="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",A9=new RegExp(`^${gD}$`);function hD(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);let r=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${r}`}function P9(t){return new RegExp(`^${hD(t)}$`)}function yD(t){let e=`${gD}T${hD(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function D9(t,e){return!!((e==="v4"||!e)&&b9.test(t)||(e==="v6"||!e)&&E9.test(t))}function M9(t,e){if(!T9.test(t))return!1;try{let[r]=t.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));return!(typeof i!="object"||i===null||"typ"in i&&i?.typ!=="JWT"||!i.alg||e&&i.alg!==e)}catch{return!1}}function L9(t,e){return!!((e==="v4"||!e)&&w9.test(t)||(e==="v6"||!e)&&_9.test(t))}var mo=class t extends Ie{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ce.string){let o=this._getOrReturnCtx(e);return ie(o,{code:te.invalid_type,expected:ce.string,received:o.parsedType}),Te}let n=new Gt,i;for(let o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(i=this._getOrReturnCtx(e,i),ie(i,{code:te.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="max")e.data.length>o.value&&(i=this._getOrReturnCtx(e,i),ie(i,{code:te.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="length"){let s=e.data.length>o.value,l=e.data.length<o.value;(s||l)&&(i=this._getOrReturnCtx(e,i),s?ie(i,{code:te.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):l&&ie(i,{code:te.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),n.dirty())}else if(o.kind==="email")S9.test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"email",code:te.invalid_string,message:o.message}),n.dirty());else if(o.kind==="emoji")AS||(AS=new RegExp(v9,"u")),AS.test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"emoji",code:te.invalid_string,message:o.message}),n.dirty());else if(o.kind==="uuid")h9.test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"uuid",code:te.invalid_string,message:o.message}),n.dirty());else if(o.kind==="nanoid")y9.test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"nanoid",code:te.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid")f9.test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"cuid",code:te.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid2")d9.test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"cuid2",code:te.invalid_string,message:o.message}),n.dirty());else if(o.kind==="ulid")g9.test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"ulid",code:te.invalid_string,message:o.message}),n.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),ie(i,{validation:"url",code:te.invalid_string,message:o.message}),n.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"regex",code:te.invalid_string,message:o.message}),n.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(e,i),ie(i,{code:te.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),n.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(i=this._getOrReturnCtx(e,i),ie(i,{code:te.invalid_string,validation:{startsWith:o.value},message:o.message}),n.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(i=this._getOrReturnCtx(e,i),ie(i,{code:te.invalid_string,validation:{endsWith:o.value},message:o.message}),n.dirty()):o.kind==="datetime"?yD(o).test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{code:te.invalid_string,validation:"datetime",message:o.message}),n.dirty()):o.kind==="date"?A9.test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{code:te.invalid_string,validation:"date",message:o.message}),n.dirty()):o.kind==="time"?P9(o).test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{code:te.invalid_string,validation:"time",message:o.message}),n.dirty()):o.kind==="duration"?x9.test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"duration",code:te.invalid_string,message:o.message}),n.dirty()):o.kind==="ip"?D9(e.data,o.version)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"ip",code:te.invalid_string,message:o.message}),n.dirty()):o.kind==="jwt"?M9(e.data,o.alg)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"jwt",code:te.invalid_string,message:o.message}),n.dirty()):o.kind==="cidr"?L9(e.data,o.version)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"cidr",code:te.invalid_string,message:o.message}),n.dirty()):o.kind==="base64"?R9.test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"base64",code:te.invalid_string,message:o.message}),n.dirty()):o.kind==="base64url"?k9.test(e.data)||(i=this._getOrReturnCtx(e,i),ie(i,{validation:"base64url",code:te.invalid_string,message:o.message}),n.dirty()):Ve.assertNever(o);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(i=>e.test(i),{validation:r,code:te.invalid_string,...me.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...me.errToObj(e)})}url(e){return this._addCheck({kind:"url",...me.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...me.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...me.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...me.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...me.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...me.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...me.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...me.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...me.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...me.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...me.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...me.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...me.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...me.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...me.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...me.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...me.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...me.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...me.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...me.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...me.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...me.errToObj(r)})}nonempty(e){return this.min(1,me.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};mo.create=t=>new mo({checks:[],typeName:we.ZodString,coerce:t?.coerce??!1,...Pe(t)});function F9(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,o=Number.parseInt(t.toFixed(i).replace(".","")),s=Number.parseInt(e.toFixed(i).replace(".",""));return o%s/10**i}var ia=class t extends Ie{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ce.number){let o=this._getOrReturnCtx(e);return ie(o,{code:te.invalid_type,expected:ce.number,received:o.parsedType}),Te}let n,i=new Gt;for(let o of this._def.checks)o.kind==="int"?Ve.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),ie(n,{code:te.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),ie(n,{code:te.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),ie(n,{code:te.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?F9(e.data,o.value)!==0&&(n=this._getOrReturnCtx(e,n),ie(n,{code:te.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),ie(n,{code:te.not_finite,message:o.message}),i.dirty()):Ve.assertNever(o);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,me.toString(r))}gt(e,r){return this.setLimit("min",e,!1,me.toString(r))}lte(e,r){return this.setLimit("max",e,!0,me.toString(r))}lt(e,r){return this.setLimit("max",e,!1,me.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:me.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:me.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:me.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:me.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:me.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:me.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:me.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:me.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:me.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:me.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Ve.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};ia.create=t=>new ia({checks:[],typeName:we.ZodNumber,coerce:t?.coerce||!1,...Pe(t)});var oa=class t extends Ie{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ce.bigint)return this._getInvalidInput(e);let n,i=new Gt;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),ie(n,{code:te.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),ie(n,{code:te.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),ie(n,{code:te.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):Ve.assertNever(o);return{status:i.value,value:e.data}}_getInvalidInput(e){let r=this._getOrReturnCtx(e);return ie(r,{code:te.invalid_type,expected:ce.bigint,received:r.parsedType}),Te}gte(e,r){return this.setLimit("min",e,!0,me.toString(r))}gt(e,r){return this.setLimit("min",e,!1,me.toString(r))}lte(e,r){return this.setLimit("max",e,!0,me.toString(r))}lt(e,r){return this.setLimit("max",e,!1,me.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:me.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:me.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:me.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:me.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:me.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:me.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};oa.create=t=>new oa({checks:[],typeName:we.ZodBigInt,coerce:t?.coerce??!1,...Pe(t)});var aa=class extends Ie{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ce.boolean){let n=this._getOrReturnCtx(e);return ie(n,{code:te.invalid_type,expected:ce.boolean,received:n.parsedType}),Te}return nr(e.data)}};aa.create=t=>new aa({typeName:we.ZodBoolean,coerce:t?.coerce||!1,...Pe(t)});var sa=class t extends Ie{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ce.date){let o=this._getOrReturnCtx(e);return ie(o,{code:te.invalid_type,expected:ce.date,received:o.parsedType}),Te}if(Number.isNaN(e.data.getTime())){let o=this._getOrReturnCtx(e);return ie(o,{code:te.invalid_date}),Te}let n=new Gt,i;for(let o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(i=this._getOrReturnCtx(e,i),ie(i,{code:te.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),n.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(i=this._getOrReturnCtx(e,i),ie(i,{code:te.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),n.dirty()):Ve.assertNever(o);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:me.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:me.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};sa.create=t=>new sa({checks:[],coerce:t?.coerce||!1,typeName:we.ZodDate,...Pe(t)});var Bs=class extends Ie{_parse(e){if(this._getType(e)!==ce.symbol){let n=this._getOrReturnCtx(e);return ie(n,{code:te.invalid_type,expected:ce.symbol,received:n.parsedType}),Te}return nr(e.data)}};Bs.create=t=>new Bs({typeName:we.ZodSymbol,...Pe(t)});var ca=class extends Ie{_parse(e){if(this._getType(e)!==ce.undefined){let n=this._getOrReturnCtx(e);return ie(n,{code:te.invalid_type,expected:ce.undefined,received:n.parsedType}),Te}return nr(e.data)}};ca.create=t=>new ca({typeName:we.ZodUndefined,...Pe(t)});var la=class extends Ie{_parse(e){if(this._getType(e)!==ce.null){let n=this._getOrReturnCtx(e);return ie(n,{code:te.invalid_type,expected:ce.null,received:n.parsedType}),Te}return nr(e.data)}};la.create=t=>new la({typeName:we.ZodNull,...Pe(t)});var fo=class extends Ie{constructor(){super(...arguments),this._any=!0}_parse(e){return nr(e.data)}};fo.create=t=>new fo({typeName:we.ZodAny,...Pe(t)});var Di=class extends Ie{constructor(){super(...arguments),this._unknown=!0}_parse(e){return nr(e.data)}};Di.create=t=>new Di({typeName:we.ZodUnknown,...Pe(t)});var Ln=class extends Ie{_parse(e){let r=this._getOrReturnCtx(e);return ie(r,{code:te.invalid_type,expected:ce.never,received:r.parsedType}),Te}};Ln.create=t=>new Ln({typeName:we.ZodNever,...Pe(t)});var Vs=class extends Ie{_parse(e){if(this._getType(e)!==ce.undefined){let n=this._getOrReturnCtx(e);return ie(n,{code:te.invalid_type,expected:ce.void,received:n.parsedType}),Te}return nr(e.data)}};Vs.create=t=>new Vs({typeName:we.ZodVoid,...Pe(t)});var Mi=class t extends Ie{_parse(e){let{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==ce.array)return ie(r,{code:te.invalid_type,expected:ce.array,received:r.parsedType}),Te;if(i.exactLength!==null){let s=r.data.length>i.exactLength.value,l=r.data.length<i.exactLength.value;(s||l)&&(ie(r,{code:s?te.too_big:te.too_small,minimum:l?i.exactLength.value:void 0,maximum:s?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(ie(r,{code:te.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(ie(r,{code:te.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((s,l)=>i.type._parseAsync(new gn(r,s,r.path,l)))).then(s=>Gt.mergeArray(n,s));let o=[...r.data].map((s,l)=>i.type._parseSync(new gn(r,s,r.path,l)));return Gt.mergeArray(n,o)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:me.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:me.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:me.toString(r)}})}nonempty(e){return this.min(1,e)}};Mi.create=(t,e)=>new Mi({type:t,minLength:null,maxLength:null,exactLength:null,typeName:we.ZodArray,...Pe(e)});function Hs(t){if(t instanceof Mr){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=dn.create(Hs(n))}return new Mr({...t._def,shape:()=>e})}else return t instanceof Mi?new Mi({...t._def,type:Hs(t.element)}):t instanceof dn?dn.create(Hs(t.unwrap())):t instanceof ti?ti.create(Hs(t.unwrap())):t instanceof ei?ei.create(t.items.map(e=>Hs(e))):t}var Mr=class t extends Ie{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=Ve.objectKeys(e);return this._cached={shape:e,keys:r},this._cached}_parse(e){if(this._getType(e)!==ce.object){let m=this._getOrReturnCtx(e);return ie(m,{code:te.invalid_type,expected:ce.object,received:m.parsedType}),Te}let{status:n,ctx:i}=this._processInputParams(e),{shape:o,keys:s}=this._getCached(),l=[];if(!(this._def.catchall instanceof Ln&&this._def.unknownKeys==="strip"))for(let m in i.data)s.includes(m)||l.push(m);let u=[];for(let m of s){let d=o[m],g=i.data[m];u.push({key:{status:"valid",value:m},value:d._parse(new gn(i,g,i.path,m)),alwaysSet:m in i.data})}if(this._def.catchall instanceof Ln){let m=this._def.unknownKeys;if(m==="passthrough")for(let d of l)u.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(m==="strict")l.length>0&&(ie(i,{code:te.unrecognized_keys,keys:l}),n.dirty());else if(m!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let m=this._def.catchall;for(let d of l){let g=i.data[d];u.push({key:{status:"valid",value:d},value:m._parse(new gn(i,g,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let m=[];for(let d of u){let g=await d.key,y=await d.value;m.push({key:g,value:y,alwaysSet:d.alwaysSet})}return m}).then(m=>Gt.mergeObjectSync(n,m)):Gt.mergeObjectSync(n,u)}get shape(){return this._def.shape()}strict(e){return me.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{let i=this._def.errorMap?.(r,n).message??n.defaultError;return r.code==="unrecognized_keys"?{message:me.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:we.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};for(let n of Ve.objectKeys(e))e[n]&&this.shape[n]&&(r[n]=this.shape[n]);return new t({...this._def,shape:()=>r})}omit(e){let r={};for(let n of Ve.objectKeys(this.shape))e[n]||(r[n]=this.shape[n]);return new t({...this._def,shape:()=>r})}deepPartial(){return Hs(this)}partial(e){let r={};for(let n of Ve.objectKeys(this.shape)){let i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}return new t({...this._def,shape:()=>r})}required(e){let r={};for(let n of Ve.objectKeys(this.shape))if(e&&!e[n])r[n]=this.shape[n];else{let o=this.shape[n];for(;o instanceof dn;)o=o._def.innerType;r[n]=o}return new t({...this._def,shape:()=>r})}keyof(){return TD(Ve.objectKeys(this.shape))}};Mr.create=(t,e)=>new Mr({shape:()=>t,unknownKeys:"strip",catchall:Ln.create(),typeName:we.ZodObject,...Pe(e)});Mr.strictCreate=(t,e)=>new Mr({shape:()=>t,unknownKeys:"strict",catchall:Ln.create(),typeName:we.ZodObject,...Pe(e)});Mr.lazycreate=(t,e)=>new Mr({shape:t,unknownKeys:"strip",catchall:Ln.create(),typeName:we.ZodObject,...Pe(e)});var ua=class extends Ie{_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function i(o){for(let l of o)if(l.result.status==="valid")return l.result;for(let l of o)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;let s=o.map(l=>new Dr(l.ctx.common.issues));return ie(r,{code:te.invalid_union,unionErrors:s}),Te}if(r.common.async)return Promise.all(n.map(async o=>{let s={...r,common:{...r.common,issues:[]},parent:null};return{result:await o._parseAsync({data:r.data,path:r.path,parent:s}),ctx:s}})).then(i);{let o,s=[];for(let u of n){let m={...r,common:{...r.common,issues:[]},parent:null},d=u._parseSync({data:r.data,path:r.path,parent:m});if(d.status==="valid")return d;d.status==="dirty"&&!o&&(o={result:d,ctx:m}),m.common.issues.length&&s.push(m.common.issues)}if(o)return r.common.issues.push(...o.ctx.common.issues),o.result;let l=s.map(u=>new Dr(u));return ie(r,{code:te.invalid_union,unionErrors:l}),Te}}get options(){return this._def.options}};ua.create=(t,e)=>new ua({options:t,typeName:we.ZodUnion,...Pe(e)});var Pi=t=>t instanceof ma?Pi(t.schema):t instanceof hn?Pi(t.innerType()):t instanceof fa?[t.value]:t instanceof da?t.options:t instanceof ga?Ve.objectValues(t.enum):t instanceof ha?Pi(t._def.innerType):t instanceof ca?[void 0]:t instanceof la?[null]:t instanceof dn?[void 0,...Pi(t.unwrap())]:t instanceof ti?[null,...Pi(t.unwrap())]:t instanceof El||t instanceof Ta?Pi(t.unwrap()):t instanceof ya?Pi(t._def.innerType):[],nd=class t extends Ie{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==ce.object)return ie(r,{code:te.invalid_type,expected:ce.object,received:r.parsedType}),Te;let n=this.discriminator,i=r.data[n],o=this.optionsMap.get(i);return o?r.common.async?o._parseAsync({data:r.data,path:r.path,parent:r}):o._parseSync({data:r.data,path:r.path,parent:r}):(ie(r,{code:te.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Te)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let i=new Map;for(let o of r){let s=Pi(o.shape[e]);if(!s.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let l of s){if(i.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);i.set(l,o)}}return new t({typeName:we.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...Pe(n)})}};function PS(t,e){let r=Jn(t),n=Jn(e);if(t===e)return{valid:!0,data:t};if(r===ce.object&&n===ce.object){let i=Ve.objectKeys(e),o=Ve.objectKeys(t).filter(l=>i.indexOf(l)!==-1),s={...t,...e};for(let l of o){let u=PS(t[l],e[l]);if(!u.valid)return{valid:!1};s[l]=u.data}return{valid:!0,data:s}}else if(r===ce.array&&n===ce.array){if(t.length!==e.length)return{valid:!1};let i=[];for(let o=0;o<t.length;o++){let s=t[o],l=e[o],u=PS(s,l);if(!u.valid)return{valid:!1};i.push(u.data)}return{valid:!0,data:i}}else return r===ce.date&&n===ce.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var pa=class extends Ie{_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=(o,s)=>{if(td(o)||td(s))return Te;let l=PS(o.value,s.value);return l.valid?((rd(o)||rd(s))&&r.dirty(),{status:r.value,value:l.data}):(ie(n,{code:te.invalid_intersection_types}),Te)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([o,s])=>i(o,s)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};pa.create=(t,e,r)=>new pa({left:t,right:e,typeName:we.ZodIntersection,...Pe(r)});var ei=class t extends Ie{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==ce.array)return ie(n,{code:te.invalid_type,expected:ce.array,received:n.parsedType}),Te;if(n.data.length<this._def.items.length)return ie(n,{code:te.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Te;!this._def.rest&&n.data.length>this._def.items.length&&(ie(n,{code:te.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let o=[...n.data].map((s,l)=>{let u=this._def.items[l]||this._def.rest;return u?u._parse(new gn(n,s,n.path,l)):null}).filter(s=>!!s);return n.common.async?Promise.all(o).then(s=>Gt.mergeArray(r,s)):Gt.mergeArray(r,o)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};ei.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ei({items:t,typeName:we.ZodTuple,rest:null,...Pe(e)})};var id=class t extends Ie{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==ce.object)return ie(n,{code:te.invalid_type,expected:ce.object,received:n.parsedType}),Te;let i=[],o=this._def.keyType,s=this._def.valueType;for(let l in n.data)i.push({key:o._parse(new gn(n,l,n.path,l)),value:s._parse(new gn(n,n.data[l],n.path,l)),alwaysSet:l in n.data});return n.common.async?Gt.mergeObjectAsync(r,i):Gt.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof Ie?new t({keyType:e,valueType:r,typeName:we.ZodRecord,...Pe(n)}):new t({keyType:mo.create(),valueType:e,typeName:we.ZodRecord,...Pe(r)})}},Ws=class extends Ie{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==ce.map)return ie(n,{code:te.invalid_type,expected:ce.map,received:n.parsedType}),Te;let i=this._def.keyType,o=this._def.valueType,s=[...n.data.entries()].map(([l,u],m)=>({key:i._parse(new gn(n,l,n.path,[m,"key"])),value:o._parse(new gn(n,u,n.path,[m,"value"]))}));if(n.common.async){let l=new Map;return Promise.resolve().then(async()=>{for(let u of s){let m=await u.key,d=await u.value;if(m.status==="aborted"||d.status==="aborted")return Te;(m.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(m.value,d.value)}return{status:r.value,value:l}})}else{let l=new Map;for(let u of s){let m=u.key,d=u.value;if(m.status==="aborted"||d.status==="aborted")return Te;(m.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(m.value,d.value)}return{status:r.value,value:l}}}};Ws.create=(t,e,r)=>new Ws({valueType:e,keyType:t,typeName:we.ZodMap,...Pe(r)});var $s=class t extends Ie{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==ce.set)return ie(n,{code:te.invalid_type,expected:ce.set,received:n.parsedType}),Te;let i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(ie(n,{code:te.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(ie(n,{code:te.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());let o=this._def.valueType;function s(u){let m=new Set;for(let d of u){if(d.status==="aborted")return Te;d.status==="dirty"&&r.dirty(),m.add(d.value)}return{status:r.value,value:m}}let l=[...n.data.values()].map((u,m)=>o._parse(new gn(n,u,n.path,m)));return n.common.async?Promise.all(l).then(u=>s(u)):s(l)}min(e,r){return new t({...this._def,minSize:{value:e,message:me.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:me.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};$s.create=(t,e)=>new $s({valueType:t,minSize:null,maxSize:null,typeName:we.ZodSet,...Pe(e)});var od=class t extends Ie{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==ce.function)return ie(r,{code:te.invalid_type,expected:ce.function,received:r.parsedType}),Te;function n(l,u){return wl({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Ns(),Ai].filter(m=>!!m),issueData:{code:te.invalid_arguments,argumentsError:u}})}function i(l,u){return wl({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Ns(),Ai].filter(m=>!!m),issueData:{code:te.invalid_return_type,returnTypeError:u}})}let o={errorMap:r.common.contextualErrorMap},s=r.data;if(this._def.returns instanceof go){let l=this;return nr(async function(...u){let m=new Dr([]),d=await l._def.args.parseAsync(u,o).catch(x=>{throw m.addIssue(n(u,x)),m}),g=await Reflect.apply(s,this,d);return await l._def.returns._def.type.parseAsync(g,o).catch(x=>{throw m.addIssue(i(g,x)),m})})}else{let l=this;return nr(function(...u){let m=l._def.args.safeParse(u,o);if(!m.success)throw new Dr([n(u,m.error)]);let d=Reflect.apply(s,this,m.data),g=l._def.returns.safeParse(d,o);if(!g.success)throw new Dr([i(d,g.error)]);return g.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:ei.create(e).rest(Di.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||ei.create([]).rest(Di.create()),returns:r||Di.create(),typeName:we.ZodFunction,...Pe(n)})}},ma=class extends Ie{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};ma.create=(t,e)=>new ma({getter:t,typeName:we.ZodLazy,...Pe(e)});var fa=class extends Ie{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return ie(r,{received:r.data,code:te.invalid_literal,expected:this._def.value}),Te}return{status:"valid",value:e.data}}get value(){return this._def.value}};fa.create=(t,e)=>new fa({value:t,typeName:we.ZodLiteral,...Pe(e)});function TD(t,e){return new da({values:t,typeName:we.ZodEnum,...Pe(e)})}var da=class t extends Ie{_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return ie(r,{expected:Ve.joinValues(n),received:r.parsedType,code:te.invalid_type}),Te}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let r=this._getOrReturnCtx(e),n=this._def.values;return ie(r,{received:r.data,code:te.invalid_enum_value,options:n}),Te}return nr(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}};da.create=TD;var ga=class extends Ie{_parse(e){let r=Ve.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==ce.string&&n.parsedType!==ce.number){let i=Ve.objectValues(r);return ie(n,{expected:Ve.joinValues(i),received:n.parsedType,code:te.invalid_type}),Te}if(this._cache||(this._cache=new Set(Ve.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let i=Ve.objectValues(r);return ie(n,{received:n.data,code:te.invalid_enum_value,options:i}),Te}return nr(e.data)}get enum(){return this._def.values}};ga.create=(t,e)=>new ga({values:t,typeName:we.ZodNativeEnum,...Pe(e)});var go=class extends Ie{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==ce.promise&&r.common.async===!1)return ie(r,{code:te.invalid_type,expected:ce.promise,received:r.parsedType}),Te;let n=r.parsedType===ce.promise?r.data:Promise.resolve(r.data);return nr(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}};go.create=(t,e)=>new go({type:t,typeName:we.ZodPromise,...Pe(e)});var hn=class extends Ie{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===we.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,o={addIssue:s=>{ie(n,s),s.fatal?r.abort():r.dirty()},get path(){return n.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){let s=i.transform(n.data,o);if(n.common.async)return Promise.resolve(s).then(async l=>{if(r.value==="aborted")return Te;let u=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return u.status==="aborted"?Te:u.status==="dirty"?na(u.value):r.value==="dirty"?na(u.value):u});{if(r.value==="aborted")return Te;let l=this._def.schema._parseSync({data:s,path:n.path,parent:n});return l.status==="aborted"?Te:l.status==="dirty"?na(l.value):r.value==="dirty"?na(l.value):l}}if(i.type==="refinement"){let s=l=>{let u=i.refinement(l,o);if(n.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){let l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?Te:(l.status==="dirty"&&r.dirty(),s(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?Te:(l.status==="dirty"&&r.dirty(),s(l.value).then(()=>({status:r.value,value:l.value}))))}if(i.type==="transform")if(n.common.async===!1){let s=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!po(s))return Te;let l=i.transform(s.value,o);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(s=>po(s)?Promise.resolve(i.transform(s.value,o)).then(l=>({status:r.value,value:l})):Te);Ve.assertNever(i)}};hn.create=(t,e,r)=>new hn({schema:t,typeName:we.ZodEffects,effect:e,...Pe(r)});hn.createWithPreprocess=(t,e,r)=>new hn({schema:e,effect:{type:"preprocess",transform:t},typeName:we.ZodEffects,...Pe(r)});var dn=class extends Ie{_parse(e){return this._getType(e)===ce.undefined?nr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};dn.create=(t,e)=>new dn({innerType:t,typeName:we.ZodOptional,...Pe(e)});var ti=class extends Ie{_parse(e){return this._getType(e)===ce.null?nr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};ti.create=(t,e)=>new ti({innerType:t,typeName:we.ZodNullable,...Pe(e)});var ha=class extends Ie{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===ce.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};ha.create=(t,e)=>new ha({innerType:t,typeName:we.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Pe(e)});var ya=class extends Ie{_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Us(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Dr(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Dr(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};ya.create=(t,e)=>new ya({innerType:t,typeName:we.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Pe(e)});var js=class extends Ie{_parse(e){if(this._getType(e)!==ce.nan){let n=this._getOrReturnCtx(e);return ie(n,{code:te.invalid_type,expected:ce.nan,received:n.parsedType}),Te}return{status:"valid",value:e.data}}};js.create=t=>new js({typeName:we.ZodNaN,...Pe(t)});var I9=Symbol("zod_brand"),El=class extends Ie{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},_l=class t extends Ie{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let o=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?Te:o.status==="dirty"?(r.dirty(),na(o.value)):this._def.out._parseAsync({data:o.value,path:n.path,parent:n})})();{let i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?Te:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:we.ZodPipeline})}},Ta=class extends Ie{_parse(e){let r=this._def.innerType._parse(e),n=i=>(po(i)&&(i.value=Object.freeze(i.value)),i);return Us(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}};Ta.create=(t,e)=>new Ta({innerType:t,typeName:we.ZodReadonly,...Pe(e)});function dD(t,e){let r=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof r=="string"?{message:r}:r}function xD(t,e={},r){return t?fo.create().superRefine((n,i)=>{let o=t(n);if(o instanceof Promise)return o.then(s=>{if(!s){let l=dD(e,n),u=l.fatal??r??!0;i.addIssue({code:"custom",...l,fatal:u})}});if(!o){let s=dD(e,n),l=s.fatal??r??!0;i.addIssue({code:"custom",...s,fatal:l})}}):fo.create()}var C9={object:Mr.lazycreate},we;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(we||(we={}));var O9=(t,e={message:`Input not instance of ${t.name}`})=>xD(r=>r instanceof t,e),SD=mo.create,vD=ia.create,N9=js.create,U9=oa.create,bD=aa.create,H9=sa.create,B9=Bs.create,V9=ca.create,W9=la.create,$9=fo.create,j9=Di.create,z9=Ln.create,q9=Vs.create,G9=Mi.create,K9=Mr.create,Q9=Mr.strictCreate,Y9=ua.create,Z9=nd.create,X9=pa.create,J9=ei.create,e6=id.create,t6=Ws.create,r6=$s.create,n6=od.create,i6=ma.create,o6=fa.create,a6=da.create,s6=ga.create,c6=go.create,l6=hn.create,u6=dn.create,p6=ti.create,m6=hn.createWithPreprocess,f6=_l.create,d6=()=>SD().optional(),g6=()=>vD().optional(),h6=()=>bD().optional(),y6={string:t=>mo.create({...t,coerce:!0}),number:t=>ia.create({...t,coerce:!0}),boolean:t=>aa.create({...t,coerce:!0}),bigint:t=>oa.create({...t,coerce:!0}),date:t=>sa.create({...t,coerce:!0})};var T6=Te;function DS(t,e){return new Y(t.row,t.column,e.row,e.column)}function wD(t){let e=t.operands.map(MS).join(" ");return`(#${t.operator} ${e})`}function MS(t){return t.type==="capture"?`@${t.name}`:t.value}function ED(t,e){return e.errors.filter(r=>!(r.code==="invalid_type"&&r.path.length===2&&(r.path[1]==="name"||r.path[1]==="value"))).map(r=>x6(t,r))}function x6(t,e){if(e.path.length===0)return e.code==="too_small"?"Too few arguments":e.code==="too_big"?"Too many arguments":e.message;let r=e.message;e.code==="invalid_literal"&&e.path[1]==="type"&&(r=e.expected==="capture"?"Capture names must be prefixed with @":"Expected string, but received capture");let n=e.path[0],i=MS(t[n]);return`Error on argument ${n} (\`${i}\`): ${r}`}var yt=class{allowMissingNode(){return!1}createPredicate(e){let r=this.schema.safeParse(e);return r.success?{success:!0,predicate:n=>{try{let i=this.constructAcceptArgs(r.data,n);return this.run(...i)}catch(i){if(i instanceof ad&&this.allowMissingNode())return!0;throw i}}}:{success:!1,errors:ED(e,r.error)}}constructAcceptArgs(e,r){return e.map(n=>{if(n.type==="capture"){let i=r.captures.find(o=>o.name===n.name);if(i==null)throw new ad(n.name);return i}else return n.value})}},ad=class extends Error{constructor(e){super(`Could not find capture ${e}`)}};function LS(t,e){if(t.parent==null)throw Error("Node has no parent");let r=t.parent.walk(),n=r.gotoFirstChild(),i=!0;for(;n;){if(r.currentFieldName===e){if(r.currentNode.id===t.id)return i;i=!i}n=r.gotoNextSibling()}throw Error(`Node not found in parent for field: ${e}`)}var FS=Le.object({type:Le.literal("string"),value:Le.string()}),pe={node:Le.object({type:Le.literal("capture"),name:Le.string()}),string:FS,integer:FS.transform((t,e)=>{let r=parseInt(t.value);return isNaN(r)?(e.addIssue({code:Le.ZodIssueCode.custom,message:"Expected an integer"}),Le.NEVER):{type:"integer",value:r}}),boolean:FS.transform((t,e)=>t.value==="true"?{type:"boolean",value:!0}:t.value==="false"?{type:"boolean",value:!1}:(e.addIssue({code:Le.ZodIssueCode.custom,message:"Expected true or false"}),Le.NEVER))};var IS=class extends yt{constructor(){super(...arguments);this.name="even?";this.schema=Le.tuple([pe.node,pe.string])}run({node:r},n){return LS(r,n)}},CS=class extends yt{constructor(){super(...arguments);this.name="odd?";this.schema=Le.tuple([pe.node,pe.string])}run({node:r},n){return!LS(r,n)}},OS=class extends yt{constructor(){super(...arguments);this.name="text?";this.schema=Le.tuple([pe.node,pe.string]).rest(pe.string)}run({document:r,range:n},...i){return i.includes(r.getText(n))}},NS=class extends yt{constructor(){super(...arguments);this.name="type?";this.schema=Le.tuple([pe.node,pe.string]).rest(pe.string)}run({node:r},...n){return n.includes(r.type)}},US=class extends yt{constructor(){super(...arguments);this.name="not-type?";this.schema=Le.tuple([pe.node,pe.string]).rest(pe.string)}run({node:r},...n){return!n.includes(r.type)}},HS=class extends yt{constructor(){super(...arguments);this.name="not-parent-type?";this.schema=Le.tuple([pe.node,pe.string]).rest(pe.string)}run({node:r},...n){return r.parent==null||!n.includes(r.parent.type)}},BS=class extends yt{constructor(){super(...arguments);this.name="is-nth-child?";this.schema=Le.tuple([pe.node,pe.integer])}run({node:r},n){return r.parent?.children.findIndex(i=>i.id===r.id)===n}},VS=class extends yt{constructor(){super(...arguments);this.name="has-multiple-children-of-type?";this.schema=Le.tuple([pe.node,pe.string])}run({node:r},n){return r.children.filter(o=>o.type===n).length>1}},WS=class extends yt{constructor(){super(...arguments);this.name="child-range!";this.schema=Le.union([Le.tuple([pe.node,pe.integer]),Le.tuple([pe.node,pe.integer,pe.integer]),Le.tuple([pe.node,pe.integer,pe.integer,pe.boolean]),Le.tuple([pe.node,pe.integer,pe.integer,pe.boolean,pe.boolean])])}run(r,n,i,o,s){let{node:{children:l}}=r;n=n<0?l.length+n:n,i=i??-1,i=i<0?l.length+i:i;let u=l[n],m=l[i];return r.range=DS(o?u.endPosition:u.startPosition,s?m.startPosition:m.endPosition),!0}},$S=class extends yt{constructor(){super(...arguments);this.name="character-range!";this.schema=Le.union([Le.tuple([pe.node,pe.integer]),Le.tuple([pe.node,pe.integer,pe.integer])])}run(r,n,i){return r.range=new Y(r.range.start.translate(void 0,n),r.range.end.translate(void 0,i??0)),!0}},jS=class extends yt{constructor(){super(...arguments);this.name="shrink-to-match!";this.schema=Le.tuple([pe.node,pe.string])}run(r,n){let{document:i,range:o}=r,l=i.getText(o).match(new RegExp(n,"ds"));if(l?.index==null)throw Error(`No match for pattern '${n}'`);let[u,m]=l.indices?.groups?.keep??l.indices[0],d=i.offsetAt(o.start);return r.range=new Y(i.positionAt(d+u),i.positionAt(d+m)),!0}},zS=class extends yt{constructor(){super(...arguments);this.name="grow-to-named-siblings!";this.schema=Le.union([Le.tuple([pe.node]),Le.tuple([pe.node,pe.string])])}run(r,n){let{node:i,range:o,document:s}=r;if(i.parent==null)throw Error("Node has no parent");let{children:l}=i.parent,u=l.findIndex(d=>d.id===i.id),m=null;if(u===-1)throw Error("Node not found in parent");for(let d=u+1;d<l.length;++d){let g=l[d];if(!g.isNamed)break;let y=DS(g.startPosition,g.endPosition);if(n!=null&&n===s.getText(y))break;m=y.end}return m!=null&&(r.range=new Y(o.start,m)),!0}},qS=class extends yt{constructor(){super(...arguments);this.name="trim-end!";this.schema=Le.tuple([pe.node])}run(r){let{document:n,range:i}=r,o=n.getText(i),s=o.length-o.trimEnd().length;return s>0&&(r.range=new Y(i.start,qR(n,i.end,-s))),!0}},GS=class extends yt{constructor(){super(...arguments);this.name="document-range!";this.schema=Le.tuple([pe.node]).rest(pe.node)}run(...r){for(let n of r)n.range=n.document.range;return!0}},KS=class extends yt{constructor(){super(...arguments);this.name="allow-multiple!";this.schema=Le.tuple([pe.node]).rest(pe.node)}allowMissingNode(){return!0}run(...r){for(let n of r)n.allowMultiple=!0;return!0}},QS=class extends yt{constructor(){super(...arguments);this.name="log!";this.schema=Le.tuple([pe.node])}run(r){return console.log(`#log!: ${r.name}@${r.range}`),!0}},YS=class extends yt{constructor(){super(...arguments);this.name="insertion-delimiter!";this.schema=Le.tuple([pe.node,pe.string])}run(r,n){return r.insertionDelimiter=n,!0}},ZS=class extends yt{constructor(){super(...arguments);this.name="single-or-multi-line-delimiter!";this.schema=Le.tuple([pe.node,pe.node,pe.string,pe.string])}run(r,n,i,o){return r.insertionDelimiter=n.range.isSingleLine?i:o,!0}},XS=class extends yt{constructor(){super(...arguments);this.name="empty-single-multi-delimiter!";this.schema=Le.tuple([pe.node,pe.node,pe.string,pe.string,pe.string])}run(r,n,i,o,s){let l=!n.node.children.some(u=>u.isNamed);return r.insertionDelimiter=l?i:n.range.isSingleLine?o:s,!0}},_D=[new QS,new IS,new CS,new OS,new NS,new US,new qS,new GS,new HS,new BS,new WS,new $S,new jS,new zS,new KS,new YS,new ZS,new XS,new VS];function RD(t){let e=[],r=[];return t.forEach((n,i)=>{let o=[];n.forEach((s,l)=>{let u=_D.find(({name:d})=>d===s.operator);if(u==null){e.push({patternIdx:i,predicateIdx:l,error:`Unknown predicate operator "${s.operator}"`});return}let m=u.createPredicate(s.operands);if(!m.success){e.push(...m.errors.map(d=>({patternIdx:i,predicateIdx:l,error:d})));return}o.push(m.predicate)}),r.push(o)}),{errors:e,predicates:r}}function kD(t,e){let{errors:r,predicates:n}=RD(e.predicates);if(r.length>0){for(let i of r){let o=[`language ${t}`,`pattern ${i.patternIdx}`,`predicate \`${wD(e.predicates[i.patternIdx][i.predicateIdx])}\``].join(", ");pt(k().messages,"TreeSitterQuery.parsePredicates",`Error parsing predicate for ${o}: ${i.error}`)}if(k().runMode==="test")throw new Error("Invalid predicates")}return n}function JS(t){return{row:t.line,column:t.character}}function AD(t){return t.map(e=>({...e,range:ev(e),name:S6(e)}))}function ev(t){return t.name.endsWith(".startOf")?t.range.start.toEmptyRange():t.name.endsWith(".endOf")?t.range.end.toEmptyRange():t.range}function S6(t){return t.name.endsWith(".startOf")?t.name.slice(0,-8):t.name.endsWith(".endOf")?t.name.slice(0,-6):t.name}var tv=class{constructor(){this.documentVersion=-1;this.documentUri="";this.documentLanguageId="";this.matches=[]}clear(){this.documentUri="",this.documentVersion=-1,this.documentLanguageId="",this.startPosition=void 0,this.endPosition=void 0,this.matches=[]}isValid(e,r,n){return this.documentVersion===e.version&&this.documentUri===e.uri.toString()&&this.documentLanguageId===e.languageId&&PD(this.startPosition,r)&&PD(this.endPosition,n)}update(e,r,n,i){this.documentVersion=e.version,this.documentUri=e.uri.toString(),this.documentLanguageId=e.languageId,this.startPosition=r,this.endPosition=n,this.matches=i}get(){return this.matches}};function PD(t,e){return t==null||e==null?t===e:t.isEqual(e)}var xa=new tv;var Rl=class t{constructor(e,r,n){this.treeSitter=e;this.query=r;this.patternPredicates=n;this.shouldCheckCaptures=k().runMode!=="production"}static create(e,r,n){let i=kD(e,n);return new t(r,n,i)}hasCapture(e){return this.query.captureNames.some(r=>RS(r)===e)}matches(e,r,n){if(!xa.isValid(e,r,n)){let i=this.getAllMatches(e,r,n);xa.update(e,r,n,i)}return xa.get()}getAllMatches(e,r,n){let i=this.getTreeMatches(e,r,n),o=[];for(let s of i){let l=this.createMutableQueryMatch(e,s);this.runPredicates(l)&&o.push(this.createQueryMatch(l))}return o}getTreeMatches(e,r,n){let{rootNode:i}=this.treeSitter.getTree(e);return this.query.matches(i,{startPosition:r!=null?JS(r):void 0,endPosition:n!=null?JS(n):void 0})}createMutableQueryMatch(e,r){return{patternIdx:r.patternIndex,captures:r.captures.map(({name:n,node:i})=>({name:n,node:i,document:e,range:lD(i),insertionDelimiter:void 0,allowMultiple:!1,hasError:()=>pD(i)}))}}runPredicates(e){for(let r of this.patternPredicates[e.patternIdx])if(!r(e))return!1;return!0}createQueryMatch(e){let r=[],n=new Map;for(let i of e.captures){let o=RS(i.name),s=ev(i),l=n.get(o);if(l==null){let u=[i],m={...i,name:o,range:s,hasError:()=>u.some(d=>d.hasError())};r.push(m),n.set(o,{acc:m,captures:u})}else l.acc.range=l.acc.range.union(s),l.acc.allowMultiple=l.acc.allowMultiple||i.allowMultiple,l.acc.insertionDelimiter=l.acc.insertionDelimiter??i.insertionDelimiter,l.captures.push(i)}return this.shouldCheckCaptures&&this.checkCaptures(Array.from(n.values())),{captures:r}}checkCaptures(e){for(let r of e)if(!uD(AD(r.captures),k().messages)&&k().runMode==="test")throw new Error("Invalid captures")}};var MD="_",v6=[MD,"interior",...Ko],b6=["prefix","leading","trailing"],w6=["startOf","endOf","start.startOf","start.endOf","end.startOf","end.endOf"],E6=["domain","removal","iteration","iteration.domain"],DD=["start","end","start.startOf","start.endOf","end.startOf","end.endOf"],Sa=new Set;for(let t of v6){if(t!==MD){Sa.add(t);for(let e of DD)Sa.add(`${t}.${e}`)}for(let e of b6){Sa.add(`${t}.${e}`);for(let r of w6)Sa.add(`${t}.${e}.${r}`)}for(let e of E6){Sa.add(`${t}.${e}`);for(let r of DD)Sa.add(`${t}.${e}.${r}`)}}var _6=/^(?!;;).*(?<!"\w*)@([\w.]*)/gm;function LD(t,e){let r=e.matchAll(_6),n=[];for(let o of r){let s=o[1];if(!(s.length>1&&!s.includes(".")&&s.startsWith("_"))&&!Sa.has(s)){let l=o.input.slice(0,o.index).split(`
`).length;n.push(`${t}(${l}) invalid capture '@${s}'.`)}}if(n.length===0)return;let i=n.join(`
`);if(pt(k().messages,"validateQueryCaptures.invalidCaptureName",i),k().runMode==="test")throw new Error(i)}var sd=class t{constructor(e){this.query=e}static async create(e,r,n,i){let o=await R6(e,r,`${i}.scm`);if(o==null||!await n.loadLanguage(i))return;let s=n.createQuery(i,o);if(s==null)throw Error(`Could not create Tree sitter query for language ${i}`);let l=Rl.create(i,n,s);return new t(l)}getScopeHandler(e){if(this.query.hasCapture(e.type))return new If(this.query,e)}getCapturesMap(e){let r=this.query.matches(e),n={};for(let i of r)for(let o of i.captures){let s=o.name;n[s]==null&&(n[s]=[]),n[s].push(o)}return n}};async function R6(t,e,r){let n={[r]:null},i=t.runMode!=="production";for(;Object.values(n).some(o=>o==null);)for(let[o,s]of Object.entries(n)){if(s!=null)continue;let l=await e.readQuery(o);if(l==null){if(o===r)return;if(pt(t.messages,"LanguageDefinition.readQueryFileAndImports.queryNotFound",`Could not find imported query file ${o}`),t.runMode==="test")throw new Error("Invalid import statement");l=""}i&&LD(o,l),n[o]=l,sn(l,/^[^\S\r\n]*;;?[^\S\r\n]*(?:import|include)[^\S\r\n]+['"]?([\w|/\\.]+)['"]?[^\S\r\n]*$/gm,u=>{let m=u[1];i&&k6(t,o,m,u[0]),n[m]=n[m]??null})}return Object.values(n).join(`
`)}function k6(t,e,r,n){let i=!1;/[/\\]/g.test(r)&&(pt(t.messages,"LanguageDefinition.readQueryFileAndImports.invalidImport",`Invalid import statement in ${e}: "${n}". Relative import paths not supported`),i=!0);let o=`;; import ${r}`;if(n!==o&&(pt(t.messages,"LanguageDefinition.readQueryFileAndImports.malformedImport",`Malformed import statement in ${e}: "${n}". Import statements must be of the form "${o}"`),i=!0),i&&t.runMode==="test")throw new Error("Invalid import statement")}var FD=Symbol("LANGUAGE_UNDEFINED"),cd=class t{constructor(e,r,n){this.ide=e;this.treeSitter=r;this.treeSitterQueryProvider=n;this.notifier=new Jt;this.languageDefinitions=new Map;this.disposables=[];this.onDidChangeDefinition=this.notifier.registerListener;let i=e.runMode==="test";e.onDidOpenTextDocument(o=>{i&&xa.clear(),this.loadLanguage(o.languageId)}),e.onDidChangeVisibleTextEditors(o=>{o.forEach(({document:s})=>this.loadLanguage(s.languageId))}),this.disposables.push(n.onChanges(()=>this.reloadLanguageDefinitions()))}static async create(e,r,n){let i=new t(e,r,n);return await i.loadAllLanguages(),i}async loadAllLanguages(){let e=this.ide.visibleTextEditors.map(({document:r})=>r.languageId);try{await Promise.all(e.map(r=>this.loadLanguage(r)))}catch(r){if(pt(this.ide.messages,"Failed to load language definitions",An(r)),this.ide.runMode==="test")throw r}}async loadLanguage(e){if(this.languageDefinitions.has(e))return;let r=await sd.create(this.ide,this.treeSitterQueryProvider,this.treeSitter,e)??FD;this.languageDefinitions.set(e,r)}async reloadLanguageDefinitions(){this.languageDefinitions.clear(),await this.loadAllLanguages(),xa.clear(),this.notifier.notifyListeners()}get(e){let r=this.languageDefinitions.get(e);if(r==null)throw new Error("Expected language definition entry is missing for languageId "+e);return r===FD?void 0:r}getNodeAtLocation(e,r){return this.treeSitter.getNodeAtLocation(e,r)}dispose(){this.disposables.forEach(e=>e.dispose())}};var ld=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}get nestedStages(){return this.nestedStages_==null&&(this.nestedStages_=this.modifier.modifiers.map(this.modifierStageFactory.create)),this.nestedStages_}run(e,r){for(let n of this.nestedStages)try{return n.run(e,r)}catch{continue}throw new Error("No modifier could be applied")}};var zs=class{constructor(e,r){this.modifierStageFactory=e;this.nestedModifier=r;this.suppressErrors=!1}run(e,r){if(this.shouldModify(e))try{return this.nestedStage.run(e,r).map(n=>n.withThatTarget(e))}catch(n){if(!this.suppressErrors)throw n}return[e]}get nestedStage(){return this.nestedStage_==null&&(this.nestedStage_=this.modifierStageFactory.create(this.nestedModifier)),this.nestedStage_}},ho=class extends zs{constructor(e,r){super(e,r.modifier)}shouldModify(e){return!e.hasExplicitScopeType}},ud=class extends zs{constructor(r,n,i){super(r,n);this.modificationCondition=i}shouldModify(r){return this.modificationCondition(r)}},qs=class extends zs{shouldModify(e){return!e.hasExplicitScopeType&&!e.isImplicit}},Gs=class extends zs{constructor(r){super(r,{type:"containingScope",scopeType:{type:"token"}});this.suppressErrors=!0}shouldModify(r){return!r.hasExplicitScopeType&&!r.hasExplicitRange&&r.contentRange.isEmpty}};function ID(t,e){return Object.getPrototypeOf(t).constructor===Object.getPrototypeOf(e).constructor}function Ks(t,e,r,n,i){if(e.editor!==r.editor)throw Error("Continuous targets must be in the same editor");if(n&&i&&ID(e,r)){let o=e.maybeCreateRichRangeTarget(t,r);if(o!=null)return o}return e.textualType==="line"&&r.textualType==="line"?new fr({editor:e.editor,isReversed:t,contentRange:vs(e,r,n,i)}):new Ot({editor:e.editor,isReversed:t,hasExplicitRange:!0,contentRange:Ss(e,r,n,i),textualType:n&&i&&e.textualType==="token"&&r.textualType==="token"?"token":"character"})}function pd(t,e,r){if(e===r)return e.getTargets(t);let n=e.getTargets(t),i=r.getTargets(t);if(n.length!==1||i.length!==1)throw Error("Scope range targets must be single-target");let[o]=n,[s]=i,l=s.contentRange.start.isAfterOrEqual(o.contentRange.start),[u,m]=l?[o,s]:[s,o];return[Ks(t,u,m,!0,!0)]}function md(t,e,r,n){let i=Array.from(t.generateScopes(e,r,"forward",{containment:"required",allowAdjacentScopes:!0,skipAncestorScopes:!0}));switch(i.length){case 0:return;case 1:return i[0];case 2:{let[o,s]=i;return n==="forward"?s:n==="backward"||(t.isPreferredOver?.(o,s)??!1)?o:s}default:throw new Error("Expected no more than 2 scope candidates")}}function fd(t,e,r=0){let{isReversed:n,editor:i,contentRange:{start:o,end:s}}=t;if(s.isEqual(o)){let m=md(e,i,o);return m==null||(r>0&&(m=rv(e,i,m.domain.end,"forward",r,!0)),m==null)?void 0:m.getTargets(n)}let l=rv(e,i,o,"forward",r);if(l==null)return;if(l.domain.contains(s))return l.getTargets(n);let u=rv(e,i,s,"backward",r);if(u!=null)return pd(n,l,u)}function rv(t,e,r,n,i,o=!1){let s=0;for(let l of t.generateScopes(e,r,n,{containment:"required",allowAdjacentScopes:o})){if(s===i)return l;s+=1}}var Qs=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let{scopeType:r,ancestorIndex:n=0}=this.modifier,i=this.scopeHandlerFactory.maybeCreate(r,e.editor.document.languageId);if(i==null)throw new vt(r.type);let o=fd(e,i,n);if(o==null)throw new vt(r.type);return o}};var dd=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e,r){let{scopeType:n}=this.modifier,{editor:i,isReversed:o}=e,s=this.scopeHandlerFactory.maybeCreate(n,i.document.languageId);if(s==null)throw new vt(n.type);let l;if(e.hasExplicitRange&&(l=CD(s,i,e.contentRange),l.length===1&&l[0].domain.contains(e.contentRange)&&!e.hasExplicitScopeType&&!r.multipleTargets&&(l=void 0)),l==null&&(l=this.getDefaultIterationRange(s,this.scopeHandlerFactory,e).flatMap(u=>CD(s,i,u))),l.length===0)throw new vt(n.type);return l.flatMap(u=>u.getTargets(o))}getDefaultIterationRange(e,r,n){let i=r.maybeCreate(e.iterationScopeType,n.editor.document.languageId);if(i==null)throw Error("Could not find iteration scope handler");let o=fd(n,i);if(o==null)throw new vt(`iteration scope for ${e.scopeType.type}`);return o.map(s=>s.contentRange)}};function CD(t,e,{start:r,end:n}){return Array.from(t.generateScopes(e,r,"forward",{distalPosition:n,skipAncestorScopes:!0,allowAdjacentScopes:t.includeAdjacentInEvery}))}var gd=class{constructor(e){this.modifier=e}run(e){return e.contentText.trim()!==""?[e]:[]}},hd=class{constructor(e){this.modifier=e}run(e){return e.contentText.trim()===""?[e]:[]}};var yd=class{run(){return nf(k()).map(e=>new ef({editor:e.editor,isReversed:e.selection.isReversed,contentRange:e.selection}))}};var Td=class{constructor(e,r){this.modifierStageFactory=e;this.markStageFactory=r}run(e,{actionFinalStages:r=[],noAutomaticTokenExpansion:n=!1}={}){return new nv(this.modifierStageFactory,this.markStageFactory,e,{actionFinalStages:r,noAutomaticTokenExpansion:n}).run()}},nv=class{constructor(e,r,n,i){this.modifierStageFactory=e;this.markStageFactory=r;this.target=n;this.opts=i}run(){return P6(this.processTarget(this.target))}processTarget(e){switch(e.type){case"list":return e.elements.flatMap(r=>this.processTarget(r));case"range":return this.processRangeTarget(e);case"primitive":case"implicit":return this.processPrimitiveTarget(e)}}processRangeTarget(e){let r=this.processPrimitiveTarget(e.anchor),n=this.processPrimitiveTarget(e.active);return Dt(r,n).flatMap(([i,o])=>{if(i==null||o==null)throw new Error("AnchorTargets and activeTargets lengths don't match");switch(e.rangeType){case"continuous":return this.processContinuousRangeTarget(i,o,e);case"vertical":return D6(i,o,e.excludeAnchor,e.excludeActive)}})}processContinuousRangeTarget(e,r,{excludeAnchor:n,excludeActive:i,exclusionScopeType:o}){if(o==null)return[yo(e,r,n,i)];let s=av(e,r);return[yo(n?OD(this.modifierStageFactory,e,o,s?"backward":"forward"):e,i?OD(this.modifierStageFactory,r,o,s?"forward":"backward"):r,!1,!1)]}processPrimitiveTarget(e){let r,n,i=!1;e.type==="implicit"?(r=new yd,n=[]):(r=this.markStageFactory.create(e.mark),n=iv(this.modifierStageFactory,e.modifiers),i=A6(e));let o=r.run(),[s,l]=this.getPreAndPostStages(i),u=[...s,...n,...this.opts.actionFinalStages,...l];return ov(u,o)}getPreAndPostStages(e){if(this.opts.noAutomaticTokenExpansion)return[[],[]];let r=new Gs(this.modifierStageFactory);return e?[[r],[]]:[[],[r]]}};function A6(t){return t.modifiers.length>0&&t.modifiers.every(({type:e})=>e==="startOf"||e==="endOf")}function iv(t,e){return e.map(t.create).reverse()}function ov(t,e){return t.forEach(r=>{let n={multipleTargets:e.length>1};e=e.flatMap(i=>r.run(i,n))}),e}function OD(t,e,r,n){let i={multipleTargets:!1};return t.create({type:"relativeScope",scopeType:r,direction:n,length:1,offset:1}).run(e,i)[0]}function av(t,e){return t.contentRange.start.isAfter(e.contentRange.start)?!0:t.contentRange.start.isBefore(e.contentRange.start)?!1:t.contentRange.end.isAfter(e.contentRange.end)}function P6(t){return Qk(t,(e,r)=>e.isEqual(r),e=>e.contentRange.concise())}function ND(t,e){if(t.editor!==e.editor)throw new Error("Cannot form range between targets in different editors")}function yo(t,e,r=!1,n=!1){ND(t,e);let i=av(t,e);return Ks(i,i?e:t,i?t:e,!(i?n:r),!(i?r:n))}function D6(t,e,r,n){ND(t,e);let i=av(t,e),o=i?-1:1,l=(i?t.contentRange.start:t.contentRange.end).line+(r?o:0),m=(i?e.contentRange.start:e.contentRange.end).line-(n?o:0),d=[];for(let g=l;;g+=o){let y=new Y(g,t.contentRange.start.character,g,t.contentRange.end.character);if(d.push(new Ye({editor:t.editor,isReversed:t.isReversed,contentRange:y,insertionDelimiter:t.insertionDelimiter})),g===m)return d}}var xd=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=this.getModifierStages(),n=ov(r,[e]),i=this.modifier.type==="extendThroughStartOf";return n.map(o=>new tf({editor:e.editor,isReversed:i,inputTarget:e,modifiedTarget:o,isHead:i}))}getModifierStages(){return this.modifier.modifiers!=null?iv(this.modifierStageFactory,this.modifier.modifiers):[new sv(this.modifierStageFactory,this.modifier)]}},sv=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e,r){let n=this.getContainingLine(e,r),i=this.getContainingPairInterior(e,r),o=i!=null?n.contentRange.intersection(i.contentRange):null;return o==null||o.isEmpty?[n]:[new Ye({editor:e.editor,isReversed:e.isReversed,contentRange:o})]}getContainingPairInterior(e,r){try{return this.getContaining(e,r,{type:"surroundingPairInterior",delimiter:"any"})[0]}catch(n){if(n instanceof vt)return;throw n}}getContainingLine(e,r){return this.getContaining(e,r,{type:"line"})[0]}getContaining(e,r,n){return this.modifierStageFactory.create({type:"containingScope",scopeType:n}).run(e,r)}};var ri=class extends Error{constructor(e,r){let n=r!=null?` #${r+1}`:"";super(`Scope '${e.type}'${n} is out of range`),this.name="OutOfRangeError"}};function UD(t,e,r,n){return cv(t,e,r,n),e.slice(r,n+1)}function cv(t,e,r,n){if(r<0||r>=e.length)throw new ri(t,r);if(n<0||n>=e.length)throw new ri(t,n)}var Ys=class{constructor(e,r,n){this.modifierStageFactory=e;this.storedTargets=r;this.modifier=n}run(e,r){let n=new Gs(this.modifierStageFactory).run(e,r)[0];switch(this.modifier.type){case"everyScope":return this.handleEveryScope(n,r);case"ordinalScope":return this.handleOrdinalScope(n,r,this.modifier);case"relativeScope":return this.handleRelativeScope(n,r,this.modifier);default:throw Error(`${this.modifier.type} instance scope not supported`)}}handleEveryScope(e,r){return Array.from(Ef(this.getEveryRanges(e),([n,i])=>this.getTargetIterable(e,r,n,i,"forward")))}handleOrdinalScope(e,r,{start:n,length:i,scopeType:o}){return this.getEveryRanges(e).flatMap(([s,l])=>HD(o,this.getTargetIterable(e,r,s,l,n>=0?"forward":"backward"),n>=0?n:-(i+n),i))}handleRelativeScope(e,r,{direction:n,offset:i,length:o,scopeType:s}){return(this.storedTargets.get("instanceReference")??[e]).flatMap(u=>{let{editor:m}=u,d=n==="forward"?new Y(i===0?u.contentRange.start:u.contentRange.end,m.document.range.end):new Y(m.document.range.start,i===0?u.contentRange.end:u.contentRange.start);return HD(s,this.getTargetIterable(e,r,m,d,n),i===0?0:i-1,o)})}getEveryRanges({editor:e}){return this.storedTargets.get("instanceReference")?.map(({editor:r,contentRange:n})=>[r,n])??[[e,e.document.range]]}getTargetIterable(e,r,n,i,o){let s=qt(fn(new RegExp(Br(e.contentText),"g"),n,i,o),u=>new Ye({contentRange:u,editor:n,isReversed:!1,textualType:"character"})),l=M6(e);if(l!=null){let u=this.modifierStageFactory.create({type:"containingScope",scopeType:l});return bf(qt(s,m=>{try{let d=u.run(m,r);return d.length===1&&d[0].contentRange.isRangeEqual(m.contentRange)?d[0]:null}catch{return null}}),m=>m!=null)}return s}};function M6(t){switch(t.textualType){case"line":case"token":case"word":return{type:t.textualType};default:return null}}function HD(t,e,r,n){Array.from(vl(r,e));let i=Array.from(vl(n,e));if(i.length<n)throw new ri(t,r+n-1);return i}var Sd=class{constructor(e,r){this.modifierHandlerFactory=e;this.modifier=r}run(e,r){let n=e.getInterior();return n??this.modifierHandlerFactory.create({type:"containingScope",scopeType:{type:"interior",explicitScopeType:e.hasExplicitScopeType}}).run(e,r)}},vd=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r;this.containingSurroundingPairIfNoBoundaryStage=lv(this.modifierStageFactory)}run(e,r){return this.containingSurroundingPairIfNoBoundaryStage.run(e,r).flatMap(n=>n.getBoundary())}};function lv(t){return new ud(t,{type:"containingScope",scopeType:{type:"surroundingPair",delimiter:"any"}},e=>e.getBoundary()==null)}var ni={type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:{type:"line"}}},uv={type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:{type:"token"}}};var bd=class extends Error{constructor(e){super(`Target has no ${e} delimiter.`),this.name="NoDelimiterError"}},wd=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e,r){return this.modifierStageFactory.create(uv).run(e,r).map(n=>{let i=n.getLeadingDelimiterTarget();if(i==null)throw new bd("leading");return i})}},Ed=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e,r){return this.modifierStageFactory.create(uv).run(e,r).map(n=>{let i=n.getTrailingDelimiterTarget();if(i==null)throw new bd("trailing");return i})}};function _d(t,e,r,n,i){return cv(t,r,n,i),n===i?r[n]:Ks(e,r[n],r[i],!0,!0)}function Rd(t,e,r,n){return t.create({type:"everyScope",scopeType:n}).run(e,r)}var kd=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e,r){let n=Rd(this.modifierStageFactory,e,r,this.modifier.scopeType),i=this.modifier.start+(this.modifier.start<0?n.length:0),o=i+this.modifier.length-1;return this.modifier.isEvery?UD(this.modifier.scopeType,n,i,o):[_d(this.modifier.scopeType,e.isReversed,n,i,o)]}};var Ad=class{run(e){let r={editor:e.editor,isReversed:e.isReversed,contentRange:this.getContentRange(e.contentRange)};return[e.isRaw?new so(r):new Ye({...r,textualType:"character"})]}},Pd=class extends Ad{getContentRange(e){return e.start.toEmptyRange()}},Dd=class extends Ad{getContentRange(e){return e.end.toEmptyRange()}};var Md=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let{scopeType:r}=this.modifier,n=new Qs(this.modifierStageFactory,this.scopeHandlerFactory,{type:"containingScope",scopeType:r});try{return n.run(e)}catch(s){if(!(s instanceof vt))throw s}let i=this.scopeHandlerFactory.create(this.modifier.scopeType,e.editor.document.languageId),o=L6(e,i);if(o==null)throw Error(`No scopes found for scope type: ${r.type}`);return o}};function L6(t,e){let r=e.generateScopes(t.editor,t.contentRange.start,"backward"),n=e.generateScopes(t.editor,t.contentRange.end,"forward"),{active:i}=t.contentSelection,o=BD(r,i),s=BD(n,i),l=o.distance<s.distance?o.scope:s.scope;return l?.getTargets(t.isReversed)}function BD(t,e){let r,n=1/0;for(let i of t){let o=Math.min(VD(e,i.domain.start),VD(e,i.domain.end));if(o<n)r=i,n=o;else break}return{scope:r,distance:n}}function VD(t,e){return Math.abs(t.line-e.line)*1e4+Math.abs(t.character-e.character)}var Ld=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e,r){let n=this.modifierStageFactory.create(this.modifier.anchor),i=this.modifierStageFactory.create(this.modifier.active),o=n.run(e,r),s=i.run(e,r);if(o.length!==1||s.length!==1)throw new Error("Expected single anchor and active target");return[yo(o[0],s[0],this.modifier.excludeAnchor,this.modifier.excludeActive)]}};var Fd=class{constructor(e){this.modifier=e}run(e){return[new so({editor:e.editor,contentRange:e.contentRange,isReversed:e.isReversed})]}};var Id=class extends Error{constructor(e,r,n){super(`Requested ${e} ${n}s, but ${r} are already selected.`),this.name="TooFewScopesError"}};function WD(t,e,r,n){let i=Rd(t,O6(r),n,e.scopeType),o=C6(r.contentRange,i);return F6(e,r,i,o)}function F6(t,e,r,n){let i=t.direction==="forward",o=I6(t,e.contentRange,r,i,n),s=i?o+t.length-1:o-t.length+1,l=Math.min(o,s),u=Math.max(o,s);return[_d(t.scopeType,e.isReversed,r,l,u)]}function I6(t,e,r,n,i){let o=t.offset===0;if(i==null){let u=n?r.findIndex(m=>m.contentRange.start.isAfter(e.start)):Vo(r,m=>m.contentRange.start.isBefore(e.start));if(u===-1)throw new ri(t.scopeType);return o?u:n?u+t.offset-1:u-t.offset+1}let s=i.start,l=i.end;if(o){let u=l-s+1;if(u>t.length)throw new Id(t.length,u,t.scopeType.type);return n?s:l}return n?l+t.offset:s-t.offset}function C6(t,e){let r=e.map((i,o)=>({index:o,intersection:i.contentRange.intersection(t)})).filter(i=>i.intersection!=null);if(t.isEmpty){if(r.length===0)return;let i=r.at(-1).index;return{start:i,end:i}}let n=r.filter(i=>!i.intersection.isEmpty).map(i=>i.index);if(n.length!==0)return{start:n[0],end:n.at(-1)}}function O6(t){return new Ot({editor:t.editor,isReversed:t.isReversed,contentRange:t.contentRange,hasExplicitRange:!1})}var Cd=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e,r){let n=this.scopeHandlerFactory.maybeCreate(this.modifier.scopeType,e.editor.document.languageId);if(n==null)return WD(this.modifierStageFactory,this.modifier,e,r);let i=Array.from(this.modifier.offset===0?N6(n,e,this.modifier):U6(n,e,this.modifier));if(i.length<this.modifier.length)throw new ri(this.modifier.scopeType,this.modifier.offset+this.modifier.length-1);let{isReversed:o}=e;return this.modifier.isEvery?i.flatMap(s=>s.getTargets(o)):pd(o,i[0],i[i.length-1])}};function N6(t,e,r){let{editor:n,contentRange:i}=e,{length:o,direction:s}=r,l=md(t,n,s==="forward"?i.start:i.end,s)?.domain;if(l==null)throw new vt(r.scopeType.type);return vl(o,t.generateScopes(n,s==="forward"?l.start:l.end,s,{skipAncestorScopes:!0}))}function U6(t,e,r){let{editor:n,contentRange:i}=e,{length:o,direction:s,offset:l}=r,u=s==="forward"?i.end:i.start,m=i.isEmpty?"disallowed":"disallowedIfStrict";return AP(t.generateScopes(n,u,s,{containment:m,skipAncestorScopes:!0}),l-1,l+o-1)}var Od=class{constructor(e){this.modifier=e}run(e){return e.editor.visibleRanges.map(r=>new Ye({editor:e.editor,isReversed:e.isReversed,contentRange:r}))}};var Zs=class{constructor(e,r,n){this.languageDefinitions=e;this.storedTargets=r;this.scopeHandlerFactory=n;this.create=this.create.bind(this)}create(e){switch(e.type){case"startOf":return new Pd;case"endOf":return new Dd;case"extendThroughStartOf":case"extendThroughEndOf":return new xd(this,e);case"toRawSelection":return new Fd(e);case"interiorOnly":return new Sd(this,e);case"excludeInterior":return new vd(this,e);case"leading":return new wd(this,e);case"trailing":return new Ed(this,e);case"visible":return new Od(e);case"containingScope":return new Qs(this,this.scopeHandlerFactory,e);case"preferredScope":return new Md(this,this.scopeHandlerFactory,e);case"everyScope":return e.scopeType.type==="instance"?new Ys(this,this.storedTargets,e):new dd(this,this.scopeHandlerFactory,e);case"ordinalScope":return e.scopeType.type==="instance"?new Ys(this,this.storedTargets,e):new kd(this,e);case"relativeScope":return e.scopeType.type==="instance"?new Ys(this,this.storedTargets,e):new Cd(this,this.scopeHandlerFactory,e);case"keepContentFilter":return new gd(e);case"keepEmptyFilter":return new hd(e);case"cascading":return new ld(this,e);case"modifyIfUntyped":return new ho(this,e);case"range":return new Ld(this,e);case"inferPreviousMark":throw Error(`Unexpected modifier '${e.type}'; it should have been removed during inference`);default:{let r=e,{type:n}=e;throw new Error(`Unknown modifier: ${n}`)}}}};async function $D(t,e,r){let n=t.registerReplaceEditList(e.document,r.filter(o=>o.isReplace)),i=await e.edit(r);return n(),i}async function Oe({rangeUpdater:t,editor:e,selections:r,preserveCursorSelections:n,...i}){let o=sl(r),s=o.map(m=>{let d=r[m],g=H6(d);return jD(e.document,g.selections,g.behavior)});n||s.push(jD(e.document,e.selections,1));let l=await("edits"in i?W6(t,e,i.edits,s):zD(t,i.callback,e.document,s));return n||await e.setSelections(l.pop()),Object.fromEntries(o.map((m,d)=>[m,l[d]]))}function jD(t,e,r){return e.map(n=>B6(t,n,n instanceof st?!n.isReversed:!0,r))}function H6(t){return"selections"in t?t:{selections:t,behavior:1}}function B6(t,e,r,n){return{range:e,isForward:r,expansionBehavior:{start:{type:n===1||n===3?"closed":"open"},end:{type:n===1||n===2?"closed":"open"}},offsets:{start:t.offsetAt(e.start),end:t.offsetAt(e.end)},text:t.getText(e)}}function V6(t){return t.map(e=>e.map(({range:{start:r,end:n},isForward:i})=>i?new st(r,n):new st(n,r)))}async function zD(t,e,r,n){let i=t.registerRangeInfoList(r,ot(n));return await e(),i(),V6(n)}async function W6(t,e,r,n){return await zD(t,async()=>{if(!await $D(t,e,r))throw new Error("Could not apply edits")},e.document,n)}var Nd=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e){return await Be(k(),e,"pendingModification0"),{thatSelections:ot(await ct(e,async(n,i)=>{let o=i.map(({contentRange:m})=>m),s=$6(n,o),l=k().getEditableTextEditor(n),{contentRanges:u}=await Oe({rangeUpdater:this.rangeUpdater,editor:l,edits:s,selections:{contentRanges:o}});return Dt(i,u).map(([m,d])=>({editor:m.editor,selection:d.toSelection(m.isReversed)}))}))}}};function $6(t,e){let{document:r}=t,n=[];for(let i of e){let o=i.start,s=r.lineAt(o),l=s.text.slice(0,s.rangeTrimmed?.start?.character??s.range.start.character),u=s.text.slice(0,o.character).search(/\s+$/),m=u>-1?new Y(new _e(s.lineNumber,u),o):o.toEmptyRange();n.push({range:m,text:`
`+l,isReplace:!m.isEmpty})}return n}function Ud(t){return t.length<2?t:qA(t).flatMap(([e,r])=>{if(r.length<2)return r;let n=[...r];n.sort((o,s)=>o.contentRange.start.compareTo(s.contentRange.start));let i=!0;for(;i;)[n,i]=j6(n);return n})}function j6(t){if(t.length<2)return[t,!1];let e=[],r=[];return t.forEach(n=>{r.length&&!z6(r[r.length-1],n)?(e.push(qD(r)),r=[n]):r.push(n)}),e.push(qD(r)),[e,e.length!==t.length]}function qD(t){if(t.length===1)return t[0];let e=t[0],r=t[t.length-1];return yo(e,r)}function z6(t,e){return!!t.getRemovalRange().intersection(e.getRemovalRange())}var kl=class{constructor(e,r){this.rangeUpdater=e;this.type=r}async decorateTargets(e,r){await Promise.all([Be(k(),e,this.decoration.sourceStyle,this.decoration.getSourceRangeCallback),Be(k(),r,this.decoration.destinationStyle)])}getEditsBringMove(e,r){let n=[],i=[],o=e.length!==r.length&&r.length===1;return e.forEach((s,l)=>{let u=r[l];if((s==null||u==null)&&!o)throw new Error("Targets must have same number of args");if(u!=null){let m;o?m=e.map((d,g)=>{let y=d.contentText,x=(u.isRaw?null:u.insertionDelimiter)??(d.isRaw?null:d.insertionDelimiter);return g>0&&x!=null?x+y:y}).join(""):m=s.contentText,i.push({edit:u.constructChangeEdit(m),editor:u.editor,originalTarget:u.target,isSource:!1})}else u=r[0];n.includes(s)||(n.push(s),this.type==="bring"&&i.push({edit:s.toDestination("to").constructChangeEdit(u.target.contentText),editor:s.editor,originalTarget:s,isSource:!0}))}),this.type==="move"&&Ud(n).forEach(s=>{i.push({edit:s.constructRemovalEdit(),editor:s.editor,originalTarget:s,isSource:!0})}),i}async performEditsAndComputeThatMark(e){return ot(await Ri(e,r=>r.editor,async(r,n)=>{let i=this.type!=="bring"?n:n.filter(({isSource:x})=>!x),o=this.type==="swap"?[]:n.filter(({isSource:x})=>x),s=this.type==="swap"?n:n.filter(({isSource:x})=>!x),l=o.map(({edit:x})=>x.range),u=s.map(({edit:x})=>x.range),m=k().getEditableTextEditor(r),{sourceEditRanges:d,destinationEditRanges:g}=await Oe({rangeUpdater:this.rangeUpdater,editor:m,edits:i.map(({edit:x})=>x),selections:{sourceEditRanges:l,destinationEditRanges:{selections:u,behavior:0}}}),y=[...this.getMarks(o,d),...this.getMarks(s,g)];return y.sort((x,E)=>n.findIndex(w=>w.originalTarget===x.target)-n.findIndex(w=>w.originalTarget===E.target)),y}))}getMarks(e,r){return e.map((n,i)=>{let o=r[i],s=n.edit.updateRange(o),l=n.originalTarget;return{editor:n.editor,selection:s.toSelection(l.isReversed),isSource:n.isSource,target:l}})}async decorateThatMark(e){let r=n=>pn(n,e.find(i=>i.target===n).selection);return Promise.all([Be(k(),e.filter(({isSource:n})=>n).map(({target:n})=>n),this.decoration.sourceStyle,r),Be(k(),e.filter(({isSource:n})=>!n).map(({target:n})=>n),this.decoration.destinationStyle,r)])}calculateMarksBringMove(e){return{thatMark:e.filter(({isSource:r})=>!r),sourceMark:e.filter(({isSource:r})=>r)}}};function GD(t,e){return t.length===1?Array(e.length).fill(t[0]):t}var Hd=class extends kl{constructor(r){super(r,"bring");this.decoration={sourceStyle:"referenced",destinationStyle:"pendingModification0"};this.run=this.run.bind(this)}async run(r,n){r=GD(r,n),await this.decorateTargets(r,n.map(u=>u.target));let i=this.getEditsBringMove(r,n),o=await this.performEditsAndComputeThatMark(i),{thatMark:s,sourceMark:l}=this.calculateMarksBringMove(o);return await this.decorateThatMark(s),{thatSelections:s,sourceSelections:l}}},Bd=class extends kl{constructor(r){super(r,"move");this.decoration={sourceStyle:"pendingDelete",destinationStyle:"pendingModification0",getSourceRangeCallback:q6};this.run=this.run.bind(this)}async run(r,n){r=GD(r,n),await this.decorateTargets(r,n.map(u=>u.target));let i=this.getEditsBringMove(r,n),o=await this.performEditsAndComputeThatMark(i),{thatMark:s,sourceMark:l}=this.calculateMarksBringMove(o);return await this.decorateThatMark(s),{thatSelections:s,sourceSelections:l}}},Vd=class extends kl{constructor(r){super(r,"swap");this.decoration={sourceStyle:"pendingModification1",destinationStyle:"pendingModification0"};this.run=this.run.bind(this)}async run(r,n){await this.decorateTargets(r,n);let i=this.getEditsSwap(r,n),o=await this.performEditsAndComputeThatMark(i);return await this.decorateThatMark(o),{thatSelections:o,sourceSelections:[]}}getEditsSwap(r,n){let i=[];return r.forEach((o,s)=>{let l=n[s];if(o==null||l==null)throw new Error("Targets must have same number of args");i.push({edit:l.toDestination("to").constructChangeEdit(o.contentText),editor:l.editor,originalTarget:l,isSource:!1}),i.push({edit:o.toDestination("to").constructChangeEdit(l.contentText),editor:o.editor,originalTarget:o,isSource:!0})}),i}};function q6(t){return t.getRemovalHighlightRange()}var Al=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e,r){kr(e);let{returnValue:n}=await this.actions.getText.run(e,{showDecorations:!1}),{thatSelections:i}=await this.actions.wrapWithPairedDelimiter.run(r,n[0]+"(",")");return{thatSelections:i}}};var Pl=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){let r=Rt(e),n=e.map(o=>new Ye({editor:o.editor,isReversed:o.isReversed,contentRange:o.contentRange})),{thatTargets:i}=await this.actions.remove.run(n);return i!=null&&await k().getEditableTextEditor(r).setSelections(i.map(({contentSelection:o})=>o),{focusEditor:!0}),{thatTargets:i}}};var Xs=t=>new Ot({editor:t.editor,isReversed:t.selection.isReversed,contentRange:t.selection,hasExplicitRange:!0});var Js=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e,r){r.showDecorations&&await Be(k(),e,"referenced"),r.ensureSingleEditor&&Rt(e),r.ensureSingleTarget&&kr(e);let n=k().activeEditableTextEditor,i=r.setSelection?zA:ct,o=ot(await i(e,(s,l)=>this.runForEditor(r,s,l)));return r.setSelection&&r.restoreSelection&&n!=null&&!n.isActive&&await n.focus(),{thatTargets:o}}async runForEditor(e,r,n){let i=k().getEditableTextEditor(r),o=r.selections,s=r.document.version,l=n.map(d=>d.contentSelection);e.setSelection&&await i.setSelections(l,{focusEditor:!0,revealRange:!1});let{originalSelections:u,targetSelections:m}=await Oe({rangeUpdater:this.rangeUpdater,editor:i,callback:()=>e.callback(i,n),preserveCursorSelections:!0,selections:{originalSelections:o,targetSelections:l}});return e.setSelection&&e.restoreSelection&&await i.setSelections(u),r.document.version===s?n:m.map(d=>Xs({editor:r,selection:d}))}};var kt=class{constructor(e){this.ensureSingleEditor=!1;this.ensureSingleTarget=!1;this.restoreSelection=!0;this.showDecorations=!0;this.callbackAction=new Js(e),this.run=this.run.bind(this)}async run(e,{showDecorations:r}={}){let n=k().capabilities.commands[this.command];if(n==null)throw Error(`Action ${this.command} is not supported by your ide`);let{acceptsLocation:i}=n;return this.callbackAction.run(e,{callback:(o,s)=>G6(o,i?s.map(l=>l.contentRange):void 0,this.command),setSelection:!i,ensureSingleEditor:this.ensureSingleEditor,ensureSingleTarget:this.ensureSingleTarget,restoreSelection:this.restoreSelection,showDecorations:r??this.showDecorations})}},Wd=class extends kt{constructor(){super(...arguments);this.command="clipboardCopy";this.ensureSingleEditor=!0}},$d=class extends kt{constructor(){super(...arguments);this.command="toggleLineComment"}},jd=class extends kt{constructor(){super(...arguments);this.command="indentLine"}},zd=class extends kt{constructor(){super(...arguments);this.command="outdentLine"}},qd=class extends kt{constructor(){super(...arguments);this.command="fold"}},Gd=class extends kt{constructor(){super(...arguments);this.command="unfold"}},Kd=class extends kt{constructor(){super(...arguments);this.command="rename";this.ensureSingleTarget=!0}},Qd=class extends kt{constructor(){super(...arguments);this.command="showReferences";this.ensureSingleTarget=!0}},Yd=class extends kt{constructor(){super(...arguments);this.command="quickFix";this.ensureSingleTarget=!0}},Zd=class extends kt{constructor(){super(...arguments);this.command="revealDefinition";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Xd=class extends kt{constructor(){super(...arguments);this.command="revealTypeDefinition";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Jd=class extends kt{constructor(){super(...arguments);this.command="showHover";this.ensureSingleTarget=!0;this.restoreSelection=!1}},eg=class extends kt{constructor(){super(...arguments);this.command="showDebugHover";this.ensureSingleTarget=!0;this.restoreSelection=!1}},tg=class extends kt{constructor(){super(...arguments);this.command="extractVariable";this.ensureSingleTarget=!0;this.restoreSelection=!1}},rg=class extends kt{constructor(){super(...arguments);this.command="gitAccept";this.ensureSingleTarget=!0}},ng=class extends kt{constructor(){super(...arguments);this.command="gitRevert";this.ensureSingleTarget=!0}},ig=class extends kt{constructor(){super(...arguments);this.command="gitStage";this.ensureSingleTarget=!0}},og=class extends kt{constructor(){super(...arguments);this.command="gitUnstage";this.ensureSingleTarget=!0}};function G6(t,e,r){switch(r){case"toggleLineComment":return t.toggleLineComment(e);case"indentLine":return t.indentLine(e);case"outdentLine":return t.outdentLine(e);case"clipboardCopy":return t.clipboardCopy(e);case"fold":return t.fold(e);case"unfold":return t.unfold(e);case"insertLineAfter":return t.insertLineAfter(e);case"rename":return t.rename(e?.[0]);case"showReferences":return t.showReferences(e?.[0]);case"quickFix":return t.quickFix(e?.[0]);case"revealDefinition":return t.revealDefinition(e?.[0]);case"revealTypeDefinition":return t.revealTypeDefinition(e?.[0]);case"showHover":return t.showHover(e?.[0]);case"showDebugHover":return t.showDebugHover(e?.[0]);case"extractVariable":return t.extractVariable(e?.[0]);case"gitAccept":return t.gitAccept(e?.[0]);case"gitRevert":return t.gitRevert(e?.[0]);case"gitStage":return t.gitStage(e?.[0]);case"gitUnstage":return t.gitUnstage(e?.[0]);case"highlight":throw Error("Highlight command not supported as simple action")}}var ag=class{constructor(e,r){this.actions=e;this.rangeUpdater=r;this.run=this.run.bind(this)}async run(e,r={showDecorations:!0}){if(k().capabilities.commands.clipboardCopy!=null)return new Wd(this.rangeUpdater).run(e,r);r.showDecorations&&await Be(k(),e,"referenced");let n=e.map(i=>i.contentText).join(`
`);return await k().clipboard.writeText(n),{thatTargets:e}}};var sg=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){await k().flashRanges(e.flatMap(K6));let r={showDecorations:!1};await this.actions.copyToClipboard.run(e,r);let{thatTargets:n}=await this.actions.remove.run(e,r);return{thatTargets:n}}};function K6(t){let{editor:e,contentRange:r}=t,n=t.getRemovalHighlightRange(),i=[{editor:e,range:mr(r),style:"referenced"}];return n.type==="line"?i.push({editor:e,range:n,style:"pendingDelete"}):i.push(...Q6(r,n).map(o=>({editor:e,range:mr(o),style:"pendingDelete"}))),i}function Q6(t,e){let{start:r,end:n}=t,{start:i,end:o}=e,s=[];return i.isBefore(r)&&s.push(new Y(i,r)),o.isAfter(n)&&s.push(new Y(n,o)),s}var Dl=class{constructor(){this.run=this.run.bind(this)}async run(e){return await ct(e,async(r,n)=>{let i=r.selections.filter(o=>!n.some(s=>{let l=s.contentRange.intersection(o);return l&&(!l.isEmpty||o.isEmpty)}));if(i.length===0)throw new pv;await k().getEditableTextEditor(r).setSelections(i)}),{thatTargets:e}}},pv=class extends Error{constructor(){super("Can't deselect every selection. At least one is required"),this.name="SelectionRequiredError"}};async function KD(t,e,r,n){let i=r.destinations.map((E,w)=>{if(n||r.actionTypes[w]==="edit")return{destination:E,index:w}}).filter(E=>!!E);if(i.length===0)return r;let o=i.map(E=>E.destination.constructChangeEdit("")),s=r.cursorRanges.map((E,w)=>({range:E,index:w})).filter(({range:E})=>E!=null),l=s.map(({index:E})=>E),u=s.map(({range:E})=>E),m=o.map(E=>E.range),{thatRanges:d,cursorRanges:g,editRanges:y}=await Oe({rangeUpdater:t,editor:e,edits:o,preserveCursorSelections:!0,selections:{thatRanges:r.thatRanges,cursorRanges:u,editRanges:{selections:m,behavior:0}}}),x=[...r.cursorRanges];return Dt(l,g).forEach(([E,w])=>{x[E]=w}),i.forEach((E,w)=>{let V=o[w].updateRange(y[w]);x[E.index]=V}),{destinations:r.destinations,actionTypes:r.actionTypes,thatRanges:d,cursorRanges:x}}async function QD({acceptsLocation:t},e,r,n){let i=n.destinations.map((g,y)=>{if(n.actionTypes[y]==="insertLineAfter")return{destination:g,index:y}}).filter(g=>!!g);if(i.length===0)return n;let o=i.map(({destination:g})=>g.contentRange),s=n.destinations.map(({contentRange:g})=>g),l=async()=>{t?await r.insertLineAfter(o):(await r.setSelections(o.map(g=>g.toSelection(!1))),await r.focus(),await r.insertLineAfter())},{targetRanges:u,thatRanges:m}=await Oe({rangeUpdater:e,editor:r,callback:l,preserveCursorSelections:!0,selections:{targetRanges:s,thatRanges:n.thatRanges}}),d=[...n.cursorRanges];return i.forEach((g,y)=>{d[g.index]=r.selections[y]}),{destinations:n.destinations.map((g,y)=>g.withTarget(g.target.withContentRange(u[y]))),actionTypes:n.actionTypes,thatRanges:m,cursorRanges:d}}async function YD(t,e){let r=kr(e),n=k().getEditableTextEditor(r.editor),i=r.insertionMode==="before";if(r.insertionMode==="to")throw Error(`Unsupported insertion mode '${r.insertionMode}' for notebookcapell`);return await t.setSelection.run([r.target]),i?await n.editNewNotebookCellAbove():await n.editNewNotebookCellBelow(),{thatSelections:un([r.target.thatTarget])}}var cg=class{constructor(e,r){this.rangeUpdater=e;this.actions=r;this.run=this.run.bind(this)}async run(e){if(e.some(({target:l})=>l.isNotebookCell))return YD(this.actions,e);let r=k().getEditableTextEditor(Rt(e)),n={destinations:e,actionTypes:e.map(l=>l.getEditNewActionType()),thatRanges:e.map(({target:l})=>l.thatTarget.contentRange),cursorRanges:new Array(e.length).fill(void 0)},i=k().capabilities.commands.insertLineAfter,o=i!=null;o&&(n=await QD(i,this.rangeUpdater,r,n)),n=await KD(this.rangeUpdater,r,n,!o);let s=n.destinations.map((l,u)=>{let m=n.cursorRanges[u];if(m==null)throw Error("Cursor range is undefined for destination");return m.toSelection(l.target.isReversed)});return await r.setSelections(s,{focusEditor:!0}),{thatSelections:un(n.destinations.map(l=>l.target),n.thatRanges)}}};var lg=class{constructor(e,r){this.actions=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(ni)]}run(e){return this.actions.editNew.run(e.map(r=>r.toDestination(this.insertionMode)))}},ug=class extends lg{constructor(){super(...arguments);this.insertionMode="before"}},pg=class extends lg{constructor(){super(...arguments);this.insertionMode="after"}};var Ml=class{constructor(e){this.callbackAction=new Js(e),this.run=this.run.bind(this)}async run(e,r,{commandArgs:n,ensureSingleEditor:i,ensureSingleTarget:o,restoreSelection:s,showDecorations:l}={}){let u=n??[];return this.callbackAction.run(e,{callback:()=>k().executeCommand(r,...u),setSelection:!0,ensureSingleEditor:i??!1,ensureSingleTarget:o??!1,restoreSelection:s??!0,showDecorations:l??!0})}};var mg=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){kr(e);let{returnValue:r,thatTargets:n}=await this.actions.getText.run(e),[i]=r,o;return i.length>200?(o=i.substring(0,200),jo(k().messages,"truncatedSearchText","Search text is longer than 200 characters; truncating")):o=i,await this.find(o),{thatTargets:n}}},fg=class extends mg{find(e){return k().findInDocument(e)}},dg=class extends mg{find(e){return k().findInWorkspace(e)}};var gg=class{constructor(){this.run=this.run.bind(this)}async run(e){return await Be(k(),e,"referenced"),{thatTargets:e}}};var ec=class{constructor(e){this.options=e;this.run=this.run.bind(this)}async run(e){let r=kr(e);return await Be(k(),e,"referenced"),await k().getEditableTextEditor(r.editor).openLink(r.contentRange,this.options),{thatSelections:un(e)}}};function ZD(t){let e=t.split(/^---$/m),r={snippets:[]};for(let n of e){let i=n.match(/^-$/m),o=i!=null?n.slice(0,i.index):n,s=i!=null?n.slice(i.index+i[0].length):null,l=s?J6(s):null,u=Y6(o);if(l!=null){u==null&&(u={variables:[]});let{variables:m,...d}=u;r.snippets.push({...d,body:l,variables:m})}else if(u!=null){if(r.header!=null||r.snippets.length!==0)throw Error("Header snippet must be first in file");r.header=u}}return r}function Y6(t){let e={variables:[]},r=Z6(t);if(Object.keys(r).length===0)return;let n={};for(let[i,o]of Object.entries(r))switch(i){case"name":e.name=o;break;case"description":e.description=o;break;case"phrase":e.phrases=Ll(o);break;case"insertionScope":e.insertionScopes=Ll(o);break;case"language":e.languages=Ll(o);break;default:if(!i.startsWith("$"))throw Error(`Invalid key '${i}'`);n[i]=o}return e.variables=X6(n),e}function Z6(t){let e=t.split(/\r?\n/).map(n=>n.trim()).filter(Boolean),r={};for(let n of e){let i=n.split(":");if(i.length!==2)throw Error(`Invalid line '${n}'`);let o=i[0].trim(),s=i[1].trim();if(o.length===0||s.length===0)throw Error(`Invalid line '${n}'`);if(r[o]!=null)throw Error(`Duplicate key '${o}' in '${t}'`);r[o]=s}return r}function X6(t){let e={},r=n=>(e[n]==null&&(e[n]={name:n}),e[n]);for(let[n,i]of Object.entries(t)){let o=n.split(".");if(o.length!==2)throw Error(`Invalid variable key '${n}'`);let s=o[0].slice(1);switch(o[1]){case"insertionFormatter":r(s).insertionFormatters=Ll(i);break;case"wrapperPhrase":r(s).wrapperPhrases=Ll(i);break;case"wrapperScope":r(s).wrapperScope=i;break;default:throw Error(`Invalid variable key '${n}'`)}}return Object.values(e)}function J6(t){let e=t.match(/^[ \t]*\S/m);if(e?.index!=null)return t.slice(e.index).trimEnd().split(/\r?\n/).map(r=>r.trimEnd())}function Ll(t){return t.split("|").map(e=>e.trim())}function JD(t){let e=[];t.header!=null&&e.push(XD(t.header)),e.push(...t.snippets.map(XD));let r=e.filter(Boolean).join(`
---

`);return r?r+`
---
`:""}function XD(t){let e=[To("name",t.name),To("description",t.description),To("language",t.languages),To("phrase",t.phrases),To("insertionScope",t.insertionScopes)].filter(Boolean);return t.variables.length>0&&(e.length>0&&e.push(""),e.push(...e5(t.variables))),"body"in t&&e.push("-",...t.body),e.join(`
`)}function e5(t){let e=[...t];return e.sort(t5),e.flatMap(r=>[To(`$${r.name}.insertionFormatter`,r.insertionFormatters),To(`$${r.name}.wrapperPhrase`,r.wrapperPhrases),To(`$${r.name}.wrapperScope`,r.wrapperScope)]).filter(Boolean)}function To(t,e){return e==null?"":Array.isArray(e)?`${t}: ${e.join(" | ")}`:`${t}: ${e}`}function t5(t,e){return t.name==="0"?1:e.name==="0"?-1:t.name.localeCompare(e.name)}function eM(t,e){let r=[],n=0,i=null,[o,...s]=t.split(/\r?\n/);return[{text:e+o,startIndex:e.length},...s.map(u=>({text:u,startIndex:0}))].forEach(({text:u,startIndex:m})=>{let d=u.match(/^\s*/)?.[0]??"",g=d.length;i!=null&&(d.length>i.length?n++:d.length<i.length&&n--),i=d;let y=Math.max(g,m),x=ZT("	",n),E=u.slice(y);r.push(x+E)}),r}function tM(t,e){let r=JT(e,o=>o.offsets.start),n="",i=0;for(let o of r)n+=t.slice(i,o.offsets.start)+o.text,i=o.offsets.end;return n+=t.slice(i),n}var tc=class{constructor(e){this.snippets=e;this.run=this.run.bind(this)}async run(e,r,n){if(r==null)throw new Error("Directory argument is required for GenerateSnippet action. Please update Cursorless Talon");let i=kr(e),o=i.editor;if(Be(k(),e,"referenced"),n==null&&(n=await k().showInputBox({prompt:"Name of snippet",placeHolder:"helloWorld"}),!n))return{};let s=o.document.offsetAt(i.contentRange.start),l=n5(o,i.contentRange),u=l.map((de,ve)=>({offsets:{start:o.document.offsetAt(de.start)-s,end:o.document.offsetAt(de.end)-s},name:ve===l.length-1?"0":`${ve+1}`})),m=o.document.getText(new Y(i.contentRange.start.with(void 0,0),i.contentRange.start)),d=o.document.getText(i.contentRange),g=tM(d,[...sn(d,/\$|\\/g,de=>({offsets:{start:de.index,end:de.index+de[0].length},text:`\\${de[0]}`})),...u.map(({offsets:de,name:ve})=>({offsets:de,text:`$${ve}`}))]),y=eM(g,m),x,E={snippets:[]};k().runMode==="test"?x=k().getEditableTextEditor(o):(x=k().getEditableTextEditor(await this.snippets.openNewSnippetFile(n,r)),E=ZD(x.document.getText())),await x.setSelections([x.document.range.toSelection(!1)]);let w=1,{header:U}=E,V=E.header?.phrases!=null?void 0:[`${mv}${w++}`],q=de=>{let ve=U?.variables?.some(Et=>Et.name===de.name&&Et.wrapperPhrases!=null);return{name:de.name,wrapperPhrases:ve?void 0:[`${mv}${w++}`]}},ne={name:U?.name===n?void 0:n,phrases:V,languages:r5(o,U),body:y,variables:u.map(q)};E.snippets.push(ne);let se=JD(E).replace(/\$/g,"\\$").replaceAll(mv,"$");return await x.insertSnippet(se),{thatSelections:e.map(({editor:de,contentSelection:ve})=>({editor:de,selection:ve}))}}};function r5(t,e){if(!e?.languages?.includes(t.document.languageId))return[t.document.languageId]}function n5(t,e){let r=t.selections.filter(n=>e.contains(n));return r.sort((n,i)=>n.start.compareTo(i.start)),r}var mv="PLACEHOLDER_VFA77zcbLD6wXNmfMAay";var Fl=class{constructor(){this.run=this.run.bind(this)}async run(e){return{returnValue:e.map(({contentRange:r})=>({contentRange:r})),thatTargets:e}}};var Il=class{constructor(){this.run=this.run.bind(this)}async run(e,{showDecorations:r=!0,ensureSingleTarget:n=!1}={}){return r&&await Be(k(),e,"referenced"),n&&kr(e),{returnValue:e.map(i=>i.contentText),thatTargets:e}}};var Cl=class{constructor(){this.run=this.run.bind(this)}async run(e,r){if(k().capabilities.commands.highlight==null)throw Error("The highlight action is not supported by your ide");return e.length===0?await Promise.all(k().visibleTextEditors.map(n=>k().setHighlightRanges(r,n,[]))):await ct(e,(n,i)=>k().setHighlightRanges(r,n,i.map(o=>pn(o,o.contentRange)))),{thatTargets:e}}};var hg=class{constructor(e,r){this.rangeUpdater=e;this.isIndent=r;this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e){return this.hasCapability()?this.runSimpleCommandAction(e):(await Be(k(),e,"pendingModification0"),{thatTargets:ot(await ct(e,this.runForEditor))})}hasCapability(){return this.isIndent?k().capabilities.commands.indentLine!=null:k().capabilities.commands.outdentLine!=null}runSimpleCommandAction(e){return(this.isIndent?new jd(this.rangeUpdater):new zd(this.rangeUpdater)).run(e)}async runForEditor(e,r){let n=this.isIndent?i5(e,r):o5(e,r),{targetSelections:i}=await Oe({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(e),edits:n,selections:{targetSelections:r.map(({contentSelection:o})=>o)}});return Dt(r,i).map(([o,s])=>Xs({editor:e,selection:s.toSelection(o.isReversed)}))}},yg=class extends hg{constructor(e){super(e,!0)}},Tg=class extends hg{constructor(e){super(e,!1)}};function i5(t,e){let{document:r}=t,n=rM(e),i=a5(t);return n.map(o=>({range:r.lineAt(o).range.start.toEmptyRange(),text:i}))}function o5(t,e){let{document:r}=t,n=rM(e),i=s5(t);return n.map(o=>{let s=r.lineAt(o),l=s.text.match(i),{start:u}=s.range,m=u.translate(void 0,l?.[0].length);return{range:new Y(u,m),text:""}})}function rM(t){let e=new Set;for(let r of t){let{start:n,end:i}=r.contentRange;for(let o=n.line;o<=i.line;++o)e.add(o)}return[...e]}function a5(t){if(t.options.insertSpaces){let e=nM(t);return" ".repeat(e)}return"	"}function s5(t){if(t.options.insertSpaces){let e=nM(t);return new RegExp(`^[ ]{1,${e}}`)}return/^\t/}function nM(t){return typeof t.options.tabSize=="number"?t.options.tabSize:4}var xg=class{constructor(e,r,n){this.rangeUpdater=e;this.modifierStageFactory=r;this.isBefore=n;this.getFinalStages=()=>[this.modifierStageFactory.create(ni)];this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e){let r=ot(await ct(e,this.runForEditor));return await k().flashRanges(r.flatMap(n=>n.thatMark.map(i=>({editor:i.editor,range:mr(i.selection),style:"justAdded"})))),{sourceSelections:r.flatMap(({sourceMark:n})=>n),thatSelections:r.flatMap(({thatMark:n})=>n)}}async runForEditor(e,r){let n=this.isBefore?"after":"before",i=r.flatMap(y=>y.toDestination(n).constructChangeEdit(y.contentText)),o=r.map(({contentSelection:y})=>y),s=i.map(({range:y})=>y),l=k().getEditableTextEditor(e),{contentSelections:u,editRanges:m}=await Oe({rangeUpdater:this.rangeUpdater,editor:l,edits:i,selections:{contentSelections:o,editRanges:{selections:s,behavior:0}}}),d=Dt(i,m).map(([y,x])=>y.updateRange(x)),g=e.selections[0];return u.some(y=>y.intersection(g)!=null)&&await l.revealRange(g),{sourceMark:un(r,d),thatMark:un(r,u)}}},Sg=class extends xg{constructor(e,r){super(e,r,!0)}},vg=class extends xg{constructor(e,r){super(e,r,!1)}};var Ol=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(ni)]}async run(e){let r=await ct(e,async(i,o)=>{let s=this.getEdits(o),l=o.map(d=>d.thatTarget.contentSelection),{contentSelections:u,editRanges:m}=await Oe({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(i),edits:s,selections:{contentSelections:l,editRanges:{selections:s.map(d=>d.range),behavior:0}}});return{thatMark:u.map(d=>({editor:i,selection:d})),flashRanges:Yo(s,m).map(([d,g])=>({editor:i,range:d.isLine?d.updateRange(g):g,isLine:d.isLine}))}});return await k().flashRanges(r.flatMap(i=>i.flashRanges.map(({editor:o,range:s,isLine:l})=>({editor:o,range:l?Vr(s):mr(s),style:"justAdded"})))),{thatSelections:r.flatMap(i=>i.thatMark)}}},bg=class extends Ol{constructor(e,r){super(e,r)}getEdits(e){return e.flatMap(r=>[_g(r,"before"),_g(r,"after")])}},wg=class extends Ol{constructor(e,r){super(e,r)}getEdits(e){return e.map(r=>_g(r,"before"))}},Eg=class extends Ol{constructor(e,r){super(e,r)}getEdits(e){return e.map(r=>_g(r,"after"))}};function _g(t,e){return{...t.toDestination(e).constructChangeEdit("",!0),isLine:t.textualType==="line"}}function rc(t,e){if(t.type==="named")throw new Error("Cursorless snippets are deprecated. Please use community snippets. Update to latest cursorless-talon and say 'cursorless migrate snippets'.");if(t.type==="custom")return t;let r=l5(t.snippets,e,t.fallbackLanguage);if(r==null){let n=c5(t.snippets);throw new Error(`No snippet available for language '${e}'. Available languages: ${n}`)}return r}function c5(t){let e=new Set(t.flatMap(r=>r.languages??[]));return Array.from(e).sort().join(", ")}function l5(t,e,r){let n=iM(t.filter(i=>i.languages?.includes(e)));return n==null&&r!=null&&(n=iM(t.filter(i=>i.languages?.includes(r)))),n==null&&(n=t.find(i=>i.languages==null)),n}function iM(t){if(t.length!==0)return t.reduce((e,r)=>{if(e.languages==null||r.languages==null)throw Error("Snippet must have languages defined to find the one with the fewest languages");return r.languages.length<e.languages.length?r:e})}var fv=class t{constructor(){this.value="";this.pos=0}static{this._table={36:0,58:1,44:2,123:3,125:4,92:5,47:6,124:7,43:11,45:12,63:13}}static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return e===95||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};let e=this.pos,r=0,n=this.value.charCodeAt(e),i;if(i=t._table[n],typeof i=="number")return this.pos+=1,{type:i,pos:e,len:1};if(t.isDigitCharacter(n)){i=8;do r+=1,n=this.value.charCodeAt(e+r);while(t.isDigitCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}if(t.isVariableCharacter(n)){i=9;do n=this.value.charCodeAt(e+ ++r);while(t.isVariableCharacter(n)||t.isDigitCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}i=10;do r+=1,n=this.value.charCodeAt(e+r);while(!isNaN(n)&&typeof t._table[n]>"u"&&!t.isDigitCharacter(n)&&!t.isVariableCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}},xo=class{constructor(){this._children=[]}appendChild(e){return e instanceof Kt&&this._children[this._children.length-1]instanceof Kt?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,r){let{parent:n}=e,i=n.children.indexOf(e),o=n.children.slice(0);o.splice(i,1,...r),n._children=o,function s(l,u){for(let m of l)m.parent=u,s(m.children,m)}(r,n)}get children(){return this._children}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof Ag)return e;e=e.parent}}toString(){return this.children.reduce((e,r)=>e+r.toString(),"")}len(){return 0}},Kt=class t extends xo{constructor(r){super();this.value=r}static escape(r){return r.replace(/\$|}|\\/g,"\\$&")}toString(){return this.value}toTextmateString(){return t.escape(this.value)}len(){return this.value.length}clone(){return new t(this.value)}},Rg=class extends xo{},Qt=class t extends Rg{constructor(r){super();this.index=r}static compareByIndex(r,n){return r.index===n.index?0:r.isFinalTabstop?1:n.isFinalTabstop||r.index<n.index?-1:r.index>n.index?1:0}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof kg?this._children[0]:void 0}toTextmateString(){let r="";return this.transform&&(r=this.transform.toTextmateString()),this.children.length===0&&!this.transform?`$${this.index}`:this.children.length===0?`\${${this.index}${r}}`:this.choice?`\${${this.index}|${this.choice.toTextmateString()}|${r}}`:`\${${this.index}:${this.children.map(n=>n.toTextmateString()).join("")}${r}}`}clone(){let r=new t(this.index);return this.transform&&(r.transform=this.transform.clone()),r._children=this.children.map(n=>n.clone()),r}},kg=class t extends xo{constructor(){super(...arguments);this.options=[]}appendChild(r){return r instanceof Kt&&(r.parent=this,this.options.push(r)),this}toString(){return this.options[0].value}toTextmateString(){return this.options.map(r=>r.value.replace(/\||,|\\/g,"\\$&")).join(",")}len(){return this.options[0].len()}clone(){let r=new t;return this.options.forEach(r.appendChild,r),r}},dv=class t extends xo{constructor(){super(...arguments);this.regexp=new RegExp("")}resolve(r){let n=this,i=!1,o=r.replace(this.regexp,function(){return i=!0,n._replace(Array.prototype.slice.call(arguments,0,-2))});return!i&&this._children.some(s=>s instanceof Fn&&!!s.elseValue)&&(o=this._replace([])),o}_replace(r){let n="";for(let i of this._children)if(i instanceof Fn){let o=r[i.index]||"";o=i.resolve(o),n+=o}else n+=i.toString();return n}toString(){return""}toTextmateString(){return`/${this.regexp.source}/${this.children.map(r=>r.toTextmateString())}/${(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")}`}clone(){let r=new t;return r.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),r._children=this.children.map(n=>n.clone()),r}},Fn=class t extends xo{constructor(r,n,i,o){super();this.index=r;this.shorthandName=n;this.ifValue=i;this.elseValue=o}resolve(r){return this.shorthandName==="upcase"?r?r.toLocaleUpperCase():"":this.shorthandName==="downcase"?r?r.toLocaleLowerCase():"":this.shorthandName==="capitalize"?r?r[0].toLocaleUpperCase()+r.substr(1):"":this.shorthandName==="pascalcase"?r?this._toPascalCase(r):"":this.shorthandName==="camelcase"?r?this._toCamelCase(r):"":r&&typeof this.ifValue=="string"?this.ifValue:!r&&typeof this.elseValue=="string"?this.elseValue:r||""}_toPascalCase(r){let n=r.match(/[a-z0-9]+/gi);return n?n.map(i=>i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()).join(""):r}_toCamelCase(r){let n=r.match(/[a-z0-9]+/gi);return n?n.map((i,o)=>o===0?i.toLowerCase():i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()).join(""):r}toTextmateString(){let r="${";return r+=this.index,this.shorthandName?r+=`:/${this.shorthandName}`:this.ifValue&&this.elseValue?r+=`:?${this.ifValue}:${this.elseValue}`:this.ifValue?r+=`:+${this.ifValue}`:this.elseValue&&(r+=`:-${this.elseValue}`),r+="}",r}clone(){return new t(this.index,this.shorthandName,this.ifValue,this.elseValue)}},In=class t extends Rg{constructor(r){super();this.name=r}resolve(r){let n=r.resolve(this);return this.transform&&(n=this.transform.resolve(n||"")),n!==void 0?(this._children=[new Kt(n)],!0):!1}toTextmateString(){let r="";return this.transform&&(r=this.transform.toTextmateString()),this.children.length===0?`\${${this.name}${r}}`:`\${${this.name}:${this.children.map(n=>n.toTextmateString()).join("")}${r}}`}clone(){let r=new t(this.name);return this.transform&&(r.transform=this.transform.clone()),r._children=this.children.map(n=>n.clone()),r}};function oM(t,e){let r=[...t];for(;r.length>0;){let n=r.shift();if(!e(n))break;r.unshift(...n.children)}}var Ag=class t extends xo{get placeholderInfo(){if(!this._placeholders){let e=[],r;this.walk(function(n){return n instanceof Qt&&(e.push(n),r=!r||r.index<n.index?n:r),!0}),this._placeholders={all:e,last:r}}return this._placeholders}get placeholders(){let{all:e}=this.placeholderInfo;return e}offset(e){let r=0,n=!1;return this.walk(i=>i===e?(n=!0,!1):(r+=i.len(),!0)),n?r:-1}fullLen(e){let r=0;return oM([e],n=>(r+=n.len(),!0)),r}enclosingPlaceholders(e){let r=[],{parent:n}=e;for(;n;)n instanceof Qt&&r.push(n),n=n.parent;return r}resolveVariables(e){return this.walk(r=>(r instanceof In&&r.resolve(e)&&(this._placeholders=void 0),!0)),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,r){return this._placeholders=void 0,super.replace(e,r)}toTextmateString(){return this.children.reduce((e,r)=>e+r.toTextmateString(),"")}clone(){let e=new t;return this._children=this.children.map(r=>r.clone()),e}walk(e){oM(this.children,e)}},oi=class{constructor(){this._scanner=new fv;this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}text(e){return this.parse(e).toString()}parse(e,r,n){this._scanner.text(e),this._token=this._scanner.next();let i=new Ag;for(;this._parse(i););let o=new Map,s=[],l=0;i.walk(u=>(u instanceof Qt&&(l+=1,u.isFinalTabstop?o.set(0,void 0):!o.has(u.index)&&u.children.length>0?o.set(u.index,u.children):s.push(u)),!0));for(let u of s){let m=o.get(u.index);if(m){let d=new Qt(u.index);d.transform=u.transform;for(let g of m)d.appendChild(g.clone());i.replace(u,[d])}}return n||(n=l>0&&r),!o.has(0)&&n&&i.appendChild(new Qt(0)),i}_accept(e,r){if(e===void 0||this._token.type===e){let n=r?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),n}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){let r=this._token;for(;this._token.type!==e;){if(this._token.type===14)return!1;if(this._token.type===5){let i=this._scanner.next();if(i.type!==0&&i.type!==4&&i.type!==5)return!1}this._token=this._scanner.next()}let n=this._scanner.value.substring(r.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),n}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let r;return(r=this._accept(5,!0))?(r=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||r,e.appendChild(new Kt(r)),!0):!1}_parseTabstopOrVariableName(e){let r,n=this._token;return this._accept(0)&&(r=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(r)?new Qt(Number(r)):new In(r)),!0):this._backTo(n)}_parseComplexPlaceholder(e){let r,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(r=this._accept(8,!0))))return this._backTo(n);let o=new Qt(Number(r));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new Kt("${"+r+":")),o.children.forEach(e.appendChild,e),!0}else if(o.index>0&&this._accept(7)){let s=new kg;for(;;){if(this._parseChoiceElement(s)){if(this._accept(2))continue;if(this._accept(7)&&(o.appendChild(s),this._accept(4)))return e.appendChild(o),!0}return this._backTo(n),!1}}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseChoiceElement(e){let r=this._token,n=[];for(;!(this._token.type===2||this._token.type===7);){let i;if((i=this._accept(5,!0))?i=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||i:i=this._accept(void 0,!0),!i)return this._backTo(r),!1;n.push(i)}return n.length===0?(this._backTo(r),!1):(e.appendChild(new Kt(n.join(""))),!0)}_parseComplexVariable(e){let r,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(r=this._accept(9,!0))))return this._backTo(n);let o=new In(r);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new Kt("${"+r+":")),o.children.forEach(e.appendChild,e),!0}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseTransform(e){let r=new dv,n="",i="";for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(6,!0)||o,n+=o;continue}if(this._token.type!==14){n+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(5,!0)||this._accept(6,!0)||o,r.appendChild(new Kt(o));continue}if(!(this._parseFormatString(r)||this._parseAnything(r)))return!1}for(;!this._accept(4);){if(this._token.type!==14){i+=this._accept(void 0,!0);continue}return!1}try{r.regexp=new RegExp(n,i)}catch{return!1}return e.transform=r,!0}_parseFormatString(e){let r=this._token;if(!this._accept(0))return!1;let n=!1;this._accept(3)&&(n=!0);let i=this._accept(8,!0);if(i)if(n){if(this._accept(4))return e.appendChild(new Fn(Number(i))),!0;if(!this._accept(1))return this._backTo(r),!1}else return e.appendChild(new Fn(Number(i))),!0;else return this._backTo(r),!1;if(this._accept(6)){let o=this._accept(9,!0);return!o||!this._accept(4)?(this._backTo(r),!1):(e.appendChild(new Fn(Number(i),o)),!0)}else if(this._accept(11)){let o=this._until(4);if(o)return e.appendChild(new Fn(Number(i),void 0,o,void 0)),!0}else if(this._accept(12)){let o=this._until(4);if(o)return e.appendChild(new Fn(Number(i),void 0,void 0,o)),!0}else if(this._accept(13)){let o=this._until(1);if(o){let s=this._until(4);if(s)return e.appendChild(new Fn(Number(i),void 0,o,s)),!0}}else{let o=this._until(4);if(o)return e.appendChild(new Fn(Number(i),void 0,void 0,o)),!0}return this._backTo(r),!1}_parseAnything(e){return this._token.type!==14?(e.appendChild(new Kt(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}};var Pg=Object.freeze({CURRENT_YEAR:!0,CURRENT_YEAR_SHORT:!0,CURRENT_MONTH:!0,CURRENT_DATE:!0,CURRENT_HOUR:!0,CURRENT_MINUTE:!0,CURRENT_SECOND:!0,CURRENT_DAY_NAME:!0,CURRENT_DAY_NAME_SHORT:!0,CURRENT_MONTH_NAME:!0,CURRENT_MONTH_NAME_SHORT:!0,CURRENT_SECONDS_UNIX:!0,SELECTION:!0,CLIPBOARD:!0,TM_SELECTED_TEXT:!0,TM_CURRENT_LINE:!0,TM_CURRENT_WORD:!0,TM_LINE_INDEX:!0,TM_LINE_NUMBER:!0,TM_FILENAME:!0,TM_FILENAME_BASE:!0,TM_DIRECTORY:!0,TM_FILEPATH:!0,RELATIVE_FILEPATH:!0,BLOCK_COMMENT_START:!0,BLOCK_COMMENT_END:!0,LINE_COMMENT:!0,WORKSPACE_NAME:!0,WORKSPACE_FOLDER:!0,RANDOM:!0,RANDOM_HEX:!0,UUID:!0});function Dg(t,e,r){let n=u5(t)+1,i={};t.walk(o=>{if(o instanceof In){if(o.name===e)o.name="TM_SELECTED_TEXT";else if(r!=null&&Object.prototype.hasOwnProperty.call(r,o.name))o.parent.replace(o,[new Kt(r[o.name])]);else if(!Pg[o.name]){let s;o.name in i?s=i[o.name]:(s=n++,i[o.name]=s);let l=new Qt(s);o.children.forEach(u=>l.appendChild(u)),o.parent.replace(o,[l])}}else o instanceof Qt&&(o.index.toString()===e?o.parent.replace(o,[new In("TM_SELECTED_TEXT")]):r!=null&&Object.prototype.hasOwnProperty.call(r,o.index)&&o.parent.replace(o,[new Kt(r[o.index])]));return!0})}function u5(t){let e=0;return t.walk(r=>(r instanceof Qt&&(e=Math.max(e,r.index)),!0)),e}function Mg(t,e,r){let n=p5(t)+1,i={};t.walk(o=>{if(o instanceof In){if(o.name===e)o.name="TM_SELECTED_TEXT";else if(r!=null&&Object.prototype.hasOwnProperty.call(r,o.name))o.parent.replace(o,[new Kt(r[o.name])]);else if(!Pg[o.name]){let s;o.name in i?s=i[o.name]:(s=n++,i[o.name]=s);let l=new Qt(s);o.children.forEach(u=>l.appendChild(u)),o.parent.replace(o,[l])}}else o instanceof Qt&&o.index.toString()===e&&o.parent.replace(o,[new In("TM_SELECTED_TEXT")]);return!0})}function p5(t){let e=0;return t.walk(r=>(r instanceof Qt&&(e=Math.max(e,r.index)),!0)),e}function Lg(t,e,r){let n=e.map(o=>m5(t,o,r)),i=n[0];if(!n.every(o=>o===i))throw new Error("Multiple snippet definitions match the given context");if(i===-1)throw new Error("Couldn't find matching snippet definition");return r[i]}function m5(t,e,r){let n=e.editor.document.languageId,i={multipleTargets:!1};return r.findIndex(({scope:o})=>{if(o==null)return!0;let{langIds:s,scopeTypes:l,excludeDescendantScopeTypes:u}=o;if(s!=null&&!s.includes(n))return!1;if(l!=null){let m=l.concat(u??[]),d,g;for(let y of m)try{let x=t.create({type:"containingScope",scopeType:{type:y}}).run(e,i)[0];e.contentRange.isRangeEqual(x.contentRange)&&(x=t.create({type:"containingScope",scopeType:{type:y},ancestorIndex:1}).run(e,i)[0]),(d==null||d.contentRange.contains(x.contentRange))&&(d=x,g=y)}catch{continue}return g==null?!1:d!=null&&!(u??[]).includes(g)}return!0})}var aM=!1;function Fg(){aM||(jo(k().messages,"legacySnippets","Talon community snippets are now fully supported in Cursorless! Cursorless's experimental snippets are now deprecated, but in most cases we can help you migrate automatically. Update cursorless-talon and say 'cursorless migrate snippets'."),aM=!0)}var cM={camelCase(t){if(t.length===0)return"";let[e,...r]=t;return e+r.map(sM).join("")},snakeCase(t){return t.join("_")},upperSnakeCase(t){return t.map(e=>e.toUpperCase()).join("_")},pascalCase(t){return t.map(sM).join("")}};function sM(t){return t.length===0?"":t[0].toUpperCase()+t.substr(1)}var Nl=class{constructor(e,r,n,i){this.rangeUpdater=e;this.snippets=r;this.actions=n;this.modifierStageFactory=i;this.snippetParser=new oi;this.run=this.run.bind(this)}getFinalStages(e){let r=this.getScopeTypes(e);return r.length===0?[]:[new qs(this.modifierStageFactory,{type:"cascading",modifiers:r.map(n=>({type:"containingScope",scopeType:n}))})]}getScopeTypes(e){let{name:r}=e,i=this.snippets.getSnippetStrict(r).insertionScopeTypes;return i==null?[]:i.map(o=>({type:o}))}getSnippetInfo(e,r){let{name:n}=e,i=this.snippets.getSnippetStrict(n),o=Lg(this.modifierStageFactory,r,i.definitions);return{body:o.body.join(`
`),formatSubstitutions(s){return s==null?void 0:f5(i,o,s)}}}async run(e,r){Fg();let n=k().getEditableTextEditor(Rt(e));await this.actions.editNew.run(e);let{body:i,formatSubstitutions:o}=this.getSnippetInfo(r,n.selections.map(m=>new Ot({editor:n,contentRange:m,isReversed:!1,hasExplicitRange:!0}))),s=this.snippetParser.parse(i);Mg(s,null,o(r.substitutions));let l=s.toTextmateString(),{editorSelections:u}=await Oe({rangeUpdater:this.rangeUpdater,editor:n,callback:()=>n.insertSnippet(l),preserveCursorSelections:!0,selections:{editorSelections:{selections:n.selections,behavior:0}}});return{thatSelections:u.map(m=>({editor:n,selection:m}))}}};function f5(t,e,r){return Object.fromEntries(Object.entries(r).map(([n,i])=>{let o=(e.variables??{})[n]?.formatter??(t.variables??{})[n]?.formatter;if(o==null)return[n,i];let s=cM[o];if(s==null)throw new Error(`Couldn't find formatter ${o} for variable ${n}`);return[n,s(i.split(" "))]}))}var Ul=class{constructor(e,r,n,i){this.rangeUpdater=e;this.snippets=r;this.actions=n;this.modifierStageFactory=i;this.snippetParser=new oi;this.run=this.run.bind(this)}getFinalStages(e,r){if(r.type==="named")return this.legacy().getFinalStages(r);let n=Rt(e),o=rc(r,n.document.languageId).scopeTypes??[];return o.length===0?[]:[new qs(this.modifierStageFactory,{type:"cascading",modifiers:o.map(s=>({type:"containingScope",scopeType:s}))})]}async run(e,r){if(r.type==="named")return this.legacy().run(e,r);let n=k().getEditableTextEditor(Rt(e)),i=rc(r,n.document.languageId),o=this.snippetParser.parse(i.body),s=i.substitutions??r.substitutions;Dg(o,null,s);let l=o.toTextmateString();await this.actions.editNew.run(e);let{editorSelections:u}=await Oe({rangeUpdater:this.rangeUpdater,editor:n,callback:()=>n.insertSnippet(l),preserveCursorSelections:!0,selections:{editorSelections:{selections:n.selections,behavior:0}}});return{thatSelections:u.map(m=>({editor:n,selection:m}))}}legacy(){return new Nl(this.rangeUpdater,this.snippets,this.actions,this.modifierStageFactory)}};var Hl=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(ni)]}async run(e){return await Be(k(),e.map(({thatTarget:n})=>n),"pendingModification0"),{thatSelections:ot(await ct(e,async(n,i)=>{let{thatRanges:o}=await Oe({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(n),edits:d5(n,i),selections:{thatRanges:i.map(({contentRange:s})=>s)}});return Yo(i,o).map(([s,l])=>({editor:n,selection:l.toSelection(s.isReversed)}))}))}}};function d5(t,e){let r=[];for(let n of e){let i=n.textualType==="token"?g5(n):h5(n);r.push(...i)}return r}function g5(t){let{editor:e,contentRange:r}=t,n=Ar(e.document.languageId).tokenMatcher,i=fn(n,e,r,"forward");return Array.from(fS(i)).map(([o,s])=>({range:new Y(o.end,s.start),text:"",isReplace:!0}))}function h5(t){let{document:e}=t.editor,r=t.contentRange,n=r.start.line,i=r.isSingleLine?Math.min(n+1,e.lineCount-1):r.end.line,o=Ps(PP(n,i+1),s=>e.lineAt(s));return Array.from(fS(o)).map(([s,l])=>({range:new Y(s.rangeTrimmed?.end??s.range.end,l.rangeTrimmed?.start??l.range.start),text:l.isEmptyOrWhitespace?"":" ",isReplace:!0}))}var Ig=class{constructor(e,r){this.rangeUpdater=e;this.actions=r;this.run=this.run.bind(this)}async run(e){let r=k().getEditableTextEditor(Rt(e)),n=k().activeEditableTextEditor,i=async()=>{await this.actions.editNew.run(e)},{cursorSelections:o}=await Oe({rangeUpdater:this.rangeUpdater,editor:r,preserveCursorSelections:!0,callback:i,selections:{cursorSelections:r.selections}}),{originalCursorSelections:s,editorSelections:l}=await Oe({rangeUpdater:this.rangeUpdater,editor:r,callback:()=>r.clipboardPaste(),selections:{originalCursorSelections:o,editorSelections:{selections:r.selections,behavior:0}}});return await r.setSelections(s),n!=null&&!n.isActive&&await n.focus(),await k().flashRanges(l.map(u=>({editor:r,range:mr(u),style:"justAdded"}))),{thatSelections:l.map(u=>({editor:r,selection:u}))}}};var Cg=class{constructor(e){this.rangeUpdater=e;this.runForEditor=this.runForEditor.bind(this)}async run(e){let r=await k().clipboard.readText(),n=r.split(/\r?\n/g),i=e.length===n.length?Yo(e,n).map(([s,l])=>({destination:s,text:l})):e.map(s=>({destination:s,text:r}));return{thatSelections:ot(await Ri(i,({destination:s})=>s.editor,this.runForEditor))}}async runForEditor(e,r){let n=r.map(({destination:s,text:l})=>s.constructChangeEdit(l)),{editSelections:i}=await Oe({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(e),edits:n,selections:{editSelections:{selections:n.map(({range:s})=>s),behavior:0}}}),o=Yo(n,i).map(([s,l])=>s.updateRange(l).toSelection(l.isReversed));return await k().flashRanges(o.map(s=>({editor:e,range:mr(s),style:"justAdded"}))),o.map(s=>({editor:e,selection:s}))}};var Og=class{constructor(e,r){this.run=this.run.bind(this),this.runner=k().capabilities.commands.clipboardPaste!=null?new Ig(e,r):new Cg(e)}run(e){return this.runner.run(e)}};var Bl=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e,{showDecorations:r=!0}={}){return e=Ud(e),r&&await Be(k(),e,"pendingDelete",i=>i.getRemovalHighlightRange()),{thatTargets:ot(await ct(e,this.runForEditor))}}async runForEditor(e,r){let n=r.map(s=>s.constructRemovalEdit()),i=k().getEditableTextEditor(e),{editRanges:o}=await Oe({rangeUpdater:this.rangeUpdater,editor:i,edits:n,selections:{editRanges:n.map(({range:s})=>s)}});return Dt(r,o).map(([s,l])=>new so({editor:s.editor,isReversed:s.isReversed,contentRange:l}))}};var Vl=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}getTexts(e,r){if(Array.isArray(r))return r.length===1?Array(e.length).fill(r[0]):r;let n=[];for(let i=0;i<e.length;++i)n[i]=(r.start+i).toString();return n}async run(e,r){await Be(k(),e.map(l=>l.target),"pendingModification0");let n=this.getTexts(e,r);if(e.length!==n.length)throw new Error("Targets and texts must have same length");let i=Dt(e,n).map(([l,u])=>({editor:l.editor,target:l.target,edit:l.constructChangeEdit(u)})),o=[],s=[];return await Ri(i,l=>l.editor,async(l,u)=>{let m=u.map(({edit:y})=>y),{contentSelections:d,editRanges:g}=await Oe({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(l),edits:m,selections:{contentSelections:u.map(({target:y})=>y.contentSelection),editRanges:{selections:m.map(({range:y})=>y),behavior:0}}});for(let[y,x]of Dt(u,d))o.push(y.target.withContentRange(x));for(let[y,x]of Dt(u,g))s.push({editor:l,selection:y.edit.updateRange(x).toSelection(!1)})}),{sourceTargets:o,thatSelections:s}}};var Wl=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.getFinalStages=()=>[lv(this.modifierStageFactory)];this.run=this.run.bind(this)}async run(e,r,n){let i=e.flatMap(s=>{let l=s.getBoundary();if(l.length!==2)throw Error("Target must have an opening and closing delimiter");return l});await Be(k(),i,"pendingModification0");let o=await ct(i,async(s,l)=>{let u=l.map((g,y)=>({editor:s,range:g.contentRange,text:y%2===0?r:n})),{sourceRanges:m,thatRanges:d}=await Oe({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(s),edits:u,selections:{sourceRanges:e.map(g=>g.thatTarget.contentRange),thatRanges:e.map(g=>g.contentRange)}});return{sourceMark:un(e,m),thatMark:un(e,d)}});return{sourceSelections:o.flatMap(({sourceMark:s})=>s),thatSelections:o.flatMap(({thatMark:s})=>s)}}};var $l=class{constructor(e){this.at=e;this.run=this.run.bind(this)}async run(e){let r=al(e,s=>s.editor),n=Array.from(r,([s,l])=>({lineNumber:y5(l,this.at),editor:s})),i=k().activeEditableTextEditor;for(let s of n)await k().getEditableTextEditor(s.editor).revealLine(s.lineNumber,this.at);i!=null&&!i.isActive&&await i.focus();let o=e.filter(s=>{let l=s.editor.visibleRanges,u=l[0].start.line,m=l[l.length-1].end.line;return s.contentRange.start.line>u||s.contentRange.end.line<m||s.contentRange.start.line===u&&s.contentRange.end.line===m});return await k().flashRanges(o.map(s=>({editor:s.editor,range:Vr(s.contentRange),style:"referenced"}))),{thatTargets:e}}},Ng=class extends $l{constructor(){super("top")}},Ug=class extends $l{constructor(){super("center")}},Hg=class extends $l{constructor(){super("bottom")}};function y5(t,e){let r=Number.MAX_SAFE_INTEGER,n=0;return t.forEach(i=>{r=Math.min(r,i.contentRange.start.line),n=Math.max(n,i.contentRange.end.line)}),e==="top"?r:e==="bottom"?n:Math.floor((r+n)/2)}var So=class{constructor(e,r){this.selectionMode=e;this.rangeMode=r;this.run=this.run.bind(this)}async run(e){let r=Rt(e),n=this.getSelections(e),i=this.selectionMode==="add"?r.selections.concat(n):n,o=this.selectionMode==="set"&&i.length===1&&i[0].isEmpty;return await k().getEditableTextEditor(r).setSelections(i,{focusEditor:!0,highlightWord:o}),{thatTargets:e}}getSelections(e){switch(this.rangeMode){case"content":return e.map(r=>r.contentSelection);case"before":return e.map(r=>new st(r.contentRange.start,r.contentRange.start));case"after":return e.map(r=>new st(r.contentRange.end,r.contentRange.end))}}},Bg=class extends So{constructor(){super("set","content")}},Vg=class extends So{constructor(){super("set","before")}},Wg=class extends So{constructor(){super("set","after")}},$g=class extends So{constructor(){super("add","content")}},jg=class extends So{constructor(){super("add","before")}},zg=class extends So{constructor(){super("add","after")}};var jl=class{constructor(e){this.key=e;this.noAutomaticTokenExpansion=!0;this.run=this.run.bind(this)}async run(e){return{thatTargets:e,[`${this.key}Targets`]:e}}};var zl=class{constructor(e){this.treeSitter=e;this.run=this.run.bind(this)}async run(e){await Be(k(),e,"referenced");let r=["# Cursorless parse tree"];for(let n of e){let{editor:i,contentRange:o}=n,s=this.treeSitter.getTree(i.document);r.push(T5(i.document,s,o))}return k().openUntitledTextDocument({language:"markdown",content:r.join(`

`)}),{thatTargets:e}}};function T5(t,e,r){let n=[],i=[];return lM(n,i,r,e.walk(),0),[`## ${t.filename} [${r}]
`,`\`\`\`${t.languageId}`,t.getText(r),"```","","```scm",...i,"```","","```js",...n,"```",""].join(`
`)}function lM(t,e,r,n,i){for(;;){let o=new Y(n.startPosition.row,n.startPosition.column,n.endPosition.row,n.endPosition.column);if(r.intersection(o)!=null){let s="  ".repeat(i),l=x5(n),u=s+l;if(n.nodeIsNamed)t.push(`${u}${n.nodeType} [${o}]`),e.push(`${u}(${n.nodeType}`),n.gotoFirstChild()?(lM(t,e,r,n,i+1),n.gotoParent(),e.push(`${s})`)):e[e.length-1]+=")";else{let m=`"${n.nodeType}"`;t.push(`${u}${m} [${o}]`),e.push(`${u}${m}`)}}if(!n.gotoNextSibling())return}}function x5(t){let e=t.currentFieldName;return e!=null?`${e}: `:""}var ql=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){e.length<2&&jo(k().messages,"tooFewTargets",'This action works on multiple targets, e.g. "sort every line block" instead of "sort block".');let r=e.slice().sort((s,l)=>s.contentRange.start.compareTo(l.contentRange.start)),{returnValue:n}=await this.actions.getText.run(r,{showDecorations:!1}),i=this.sortTexts(n),{thatSelections:o}=await this.actions.replace.run(r.map(s=>s.toDestination("to")),i);return{thatSelections:o}}},qg=class extends ql{sortTexts(e){return e.sort((r,n)=>r.localeCompare(n,void 0,{numeric:!0,caseFirst:"upper"}))}},Gg=class extends ql{sortTexts(e){return e.reverse()}},Kg=class extends ql{sortTexts(e){return XT(e)}};var Gl=class{constructor(e){this.modifierStageFactory=e;this.getFinalStages=()=>[this.modifierStageFactory.create(ni)];this.run=this.run.bind(this)}async run(e){let r=e.map(({thatTarget:n})=>n);return await Be(k(),r,"referenced"),await ct(e,async(n,i)=>{let o=i.map(s=>pn(s,s.contentRange));await k().getEditableTextEditor(n).toggleBreakpoint(o)}),{thatTargets:e}}};var Kl=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e,r,n){let i=await ct(e,async(o,s)=>{let l=s.map(w=>({start:new st(w.contentRange.start,w.contentRange.start),end:new st(w.contentRange.end,w.contentRange.end)})),u=l.flatMap(({start:w,end:U})=>[{text:r,range:w},{text:n,range:U,isReplace:!0}]),m=s.map(w=>w.contentSelection),{boundariesStartSelections:d,boundariesEndSelections:g,sourceSelections:y,thatSelections:x}=await Oe({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(o),edits:u,selections:{boundariesStartSelections:{selections:l.map(({start:w})=>w),behavior:2},boundariesEndSelections:{selections:l.map(({end:w})=>w),behavior:3},sourceSelections:{selections:m,behavior:1},thatSelections:{selections:m,behavior:0}}}),E=[...d,...g];return await k().flashRanges(E.map(w=>({editor:o,range:mr(w),style:"justAdded"}))),{sourceMark:y.map(w=>({editor:o,selection:w})),thatMark:x.map(w=>({editor:o,selection:w}))}});return{sourceSelections:i.flatMap(({sourceMark:o})=>o),thatSelections:i.flatMap(({thatMark:o})=>o)}}};var Ql=class{constructor(e,r,n){this.rangeUpdater=e;this.snippets=r;this.modifierStageFactory=n;this.snippetParser=new oi;this.run=this.run.bind(this)}getFinalStages(e){let r=this.getScopeType(e);return r==null?[]:[new ho(this.modifierStageFactory,{type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:r}})]}getScopeType(e){let{name:r,variableName:n}=e,s=(this.snippets.getSnippetStrict(r).variables??{})[n]?.wrapperScopeType;return s==null?void 0:{type:s}}getBody(e,r){let{name:n}=e,i=this.snippets.getSnippetStrict(n);return Lg(this.modifierStageFactory,r,i.definitions).body.join(`
`)}async run(e,r){Fg();let n=k().getEditableTextEditor(Rt(e)),i=this.getBody(r,e),o=this.snippetParser.parse(i);Mg(o,r.variableName);let s=o.toTextmateString();await Be(k(),e,"pendingModification0");let l=e.map(d=>d.contentSelection),u=()=>n.insertSnippet(s,l),{targetSelections:m}=await Oe({rangeUpdater:this.rangeUpdater,editor:n,callback:u,preserveCursorSelections:!0,selections:{targetSelections:l}});return{thatSelections:m.map(d=>({editor:n,selection:d}))}}};var Yl=class{constructor(e,r,n){this.rangeUpdater=e;this.snippets=r;this.modifierStageFactory=n;this.snippetParser=new oi;this.run=this.run.bind(this)}getFinalStages(e,r){if(r.type==="named")return this.legacy().getFinalStages(r);let n=Rt(e),i=rc(r,n.document.languageId);return i.scopeType==null?[]:[new ho(this.modifierStageFactory,{type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:i.scopeType}})]}async run(e,r){if(r.type==="named")return this.legacy().run(e,r);let n=k().getEditableTextEditor(Rt(e)),i=rc(r,n.document.languageId),o=this.snippetParser.parse(i.body);Dg(o,i.variableName);let s=o.toTextmateString();await Be(k(),e,"pendingModification0");let l=e.map(m=>m.contentSelection),{targetSelections:u}=await Oe({rangeUpdater:this.rangeUpdater,editor:n,callback:()=>n.insertSnippet(s,l),preserveCursorSelections:!0,selections:{targetSelections:l}});return{thatSelections:u.map(m=>({editor:n,selection:m}))}}legacy(){return new Ql(this.rangeUpdater,this.snippets,this.modifierStageFactory)}};var S5=/-?\d+(\.\d+)?/g,Qg=class{constructor(e,r){this.actions=e;this.isIncrement=r;this.run=this.run.bind(this)}async run(e){let r=[];return await Ri(e,n=>n.editor,async(n,i)=>{let o=await this.runOnEditor(n,i);r.push(...o)}),{thatSelections:r}}async runOnEditor(e,r){let{document:n}=e,i=[],o=[];for(let l of r){let u=n.offsetAt(l.contentRange.start),m=l.contentText,d=Qc(m,S5);for(let g of d)i.push(v5(e,u,g)),o.push(b5(this.isIncrement,g.text))}let{thatSelections:s}=await this.actions.replace.run(i,o);return s}},Yg=class extends Qg{constructor(e){super(e,!0)}},Zg=class extends Qg{constructor(e){super(e,!1)}};function v5(t,e,r){return new Ye({editor:t,isReversed:!1,contentRange:new Y(t.document.positionAt(e+r.index),t.document.positionAt(e+r.index+r.text.length))}).toDestination("to")}function b5(t,e){return e.includes(".")?E5(t,e).toString():w5(t,e).toString()}function w5(t,e){let r=parseInt(e),n=1;return r+(t?n:-n)}function E5(t,e){let r=parseFloat(e),i=Math.abs(r)<=1?.1:1,o=r+(t?i:-i);return parseFloat(o.toPrecision(15))/1}var Xg=class{constructor(e,r,n,i){this.addSelection=new $g,this.addSelectionBefore=new jg,this.addSelectionAfter=new zg,this.callAsFunction=new Al(this),this.clearAndSetSelection=new Pl(this),this.copyToClipboard=new ag(this,n),this.cutToClipboard=new sg(this),this.decrement=new Zg(this),this.deselect=new Dl,this.editNew=new cg(n,this),this.editNewLineAfter=new pg(this,i),this.editNewLineBefore=new ug(this,i),this.executeCommand=new Ml(n),this.extractVariable=new tg(n),this.findInDocument=new fg(this),this.findInWorkspace=new dg(this),this.flashTargets=new gg,this.foldRegion=new qd(n),this.followLink=new ec({openAside:!1}),this.followLinkAside=new ec({openAside:!0}),this.generateSnippet=new tc(r),this.getText=new Il,this.gitAccept=new rg(n),this.gitRevert=new ng(n),this.gitStage=new ig(n),this.gitUnstage=new og(n),this.highlight=new Cl,this.increment=new Yg(this),this.indentLine=new yg(n),this.insertCopyAfter=new vg(n,i),this.insertCopyBefore=new Sg(n,i),this.insertEmptyLineAfter=new Eg(n,i),this.insertEmptyLineBefore=new wg(n,i),this.insertEmptyLinesAround=new bg(n,i),this.insertSnippet=new Ul(n,r,this,i),this.joinLines=new Hl(n,i),this.breakLine=new Nd(n),this.moveToTarget=new Bd(n),this.outdentLine=new Tg(n),this.pasteFromClipboard=new Og(n,this),this.randomizeTargets=new Kg(this),this.remove=new Bl(n),this.rename=new Kd(n),this.replace=new Vl(n),this.replaceWithTarget=new Hd(n),this.revealDefinition=new Zd(n),this.revealTypeDefinition=new Xd(n),this.reverseTargets=new Gg(this),this.rewrapWithPairedDelimiter=new Wl(n,i),this.scrollToBottom=new Hg,this.scrollToCenter=new Ug,this.scrollToTop=new Ng,this.setSelection=new Bg,this.setSelectionAfter=new Wg,this.setSelectionBefore=new Vg,this.showDebugHover=new eg(n),this.showHover=new Jd(n),this.showQuickFix=new Yd(n),this.showReferences=new Qd(n),this.sortTargets=new qg(this),this.swapTargets=new Vd(n),this.toggleLineBreakpoint=new Gl(i),this.toggleLineComment=new $d(n),this.unfoldRegion=new Gd(n),this.wrapWithPairedDelimiter=new Kl(n),this.wrapWithSnippet=new Yl(n,r,i),this["experimental.setInstanceReference"]=new jl("instanceReference"),this["private.showParseTree"]=new zl(e),this["private.getTargets"]=new Fl,this["private.setKeyboardTarget"]=new jl("keyboard")}};async function uM(t,e,r){let n=await t.getFocusedElementType();if(n==null||n==="textEditor")return null;let i=r.action;switch(i.name){case"replace":return Jg(i.destination)&&Array.isArray(i.replaceWith)?{action:"insert",modifiers:eh(i.destination),text:i.replaceWith.join(`
`)}:null;case"replaceWithTarget":return Jg(i.destination)?{action:"insert",modifiers:eh(i.destination),text:await gv(e,i.source)}:null;case"moveToTarget":if(Jg(i.destination)){let o=await gv(e,i.source);return await _5(e,i.source),{action:"insert",modifiers:eh(i.destination),text:o}}return null;case"callAsFunction":return th(i.argument)?{action:i.name,modifiers:rh(i.argument),callee:await gv(e,i.callee)}:null;case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return th(i.target)?{action:i.name,modifiers:rh(i.target),left:i.left,right:i.right}:null;case"pasteFromClipboard":return Jg(i.destination)?{action:i.name,modifiers:eh(i.destination)}:null;case"swapTargets":case"editNew":case"insertSnippet":case"generateSnippet":case"wrapWithSnippet":case"parsed":return null;default:return th(i.target)?{action:i.name,modifiers:rh(i.target)}:null}}function Jg(t){return t.type==="implicit"?!0:t.type==="primitive"?t.insertionMode==="to"&&th(t.target):!1}function th(t){return t.type==="implicit"?!0:t.type==="primitive"?t.mark==null||t.mark.type==="cursor":!1}function eh(t){return t.type==="primitive"?rh(t.target):[]}function rh(t){return t.type==="primitive"&&t.modifiers!=null&&t.modifiers.length>0?t.modifiers:[]}async function gv(t,e){return(await t({name:"getText",target:e})).returnValue.join(`
`)}async function _5(t,e){await t({name:"remove",target:e})}function pM(t,e){let{anchor:r,rangeType:n,active:i}=t;if(r.type!=="primitive"||n!=="continuous")return t;let o=r.modifiers.map((s,l)=>[s,l]);for(let[s,l]of o.reverse())for(let u of R5){let m=u.accept(s);if(m.accepted){let[d,g]=[r.modifiers.slice(0,l+1),r.modifiers.slice(l+1)],y={...t,anchor:g.length===0&&e?{type:"implicit"}:{type:"primitive",mark:r.mark,modifiers:g},active:Am(i,x=>{x.modifiers=x.modifiers.slice(Vo(x.modifiers,E=>u.accept(E).accepted)+1)})};return y=m.transformTarget?.(y)??y,{type:"primitive",mark:{type:"target",target:y},modifiers:d}}}return t}var R5=[{accept(t){return t.type==="everyScope"&&t.scopeType.type!=="instance"?{accepted:!0,transformTarget(e){return{...e,exclusionScopeType:t.scopeType}}}:{accepted:!1}}},{accept(t){return{accepted:(t.type==="everyScope"||t.type==="relativeScope"||t.type==="ordinalScope")&&t.scopeType.type==="instance"}}}];function yv(t,e){switch(t.type){case"list":return k5(t,e);case"range":return mM(t,e);case"primitive":return nh(t,e);case"implicit":return t}}function k5(t,e){return{...t,elements:t.elements.map((r,n)=>{let i=e.concat(t.elements.slice(0,n));switch(r.type){case"range":return mM(r,i);case"primitive":return nh(r,i)}})}}function mM(t,e){let r=A5(t,e),n=t.anchor.type==="implicit"||t.anchor.mark==null;return pM(r,n)}function A5(t,e){return{type:"range",rangeType:t.rangeType??"continuous",excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1,anchor:t.anchor.type==="implicit"?t.anchor:nh(t.anchor,e),active:nh(t.active,e.concat(t.anchor))}}function nh(t,e){let r=hv(t.mark??(P5(t)?L5(e):null)??{type:"cursor"}),n=fM(t)??F5(e)??I5(e)??[];return{type:t.type,mark:r,modifiers:n}}function P5(t){return t.modifiers?.some(e=>e.type==="inferPreviousMark")??!1}function fM(t){let e=t.modifiers?.filter(r=>r.type!=="inferPreviousMark")??[];return e.length!==0?e:void 0}function D5(t){if(M5(t))return[{type:"containingScope",scopeType:{type:"line"}}]}function M5(t){let e=r=>r?.type==="lineNumber";return e(t.mark)?!0:t.mark?.type==="range"?e(t.mark.anchor)&&e(t.mark.active):!1}function L5(t){return Zl(t,e=>e.mark)}function F5(t){return Zl(t,fM)}function I5(t){return Zl(t,D5)}function Zl(t,e){for(let r=t.length-1;r>-1;--r){let n=t[r];switch(n.type){case"primitive":{let i=e(n);if(i!=null)return i;break}case"range":{let i=Zl([n.anchor],e);if(i!=null)return i;break}case"list":{let i=Zl(n.elements,e);if(i!=null)return i;break}}}}function hv(t){switch(t.type){case"range":return{...t,anchor:hv(t.anchor),active:hv(t.active)};case"target":return{type:"target",target:yv(t.target,[])};default:return t}}var ih=class{constructor(e,r,n,i,o){this.commandServerApi=e;this.debug=r;this.storedTargets=n;this.pipelineRunner=i;this.actions=o;this.finalStages=[];this.runAction=this.runAction.bind(this),this.inferenceContext=new Tv(this.debug)}async run(e){if(Qo(e)){let m=await uM(this.commandServerApi,this.runAction,e);if(m!=null)return{fallback:m}}let{returnValue:r,thatSelections:n,thatTargets:i,sourceSelections:o,sourceTargets:s,instanceReferenceTargets:l,keyboardTargets:u}=await this.runAction(e.action);return this.storedTargets.set("that",dM(i,n)),this.storedTargets.set("source",dM(s,o)),this.storedTargets.set("instanceReference",l),this.storedTargets.set("keyboard",u,{history:!0}),{returnValue:r}}runAction(e){switch(this.inferenceContext.reset(),this.finalStages=[],e.name){case"replaceWithTarget":return this.actions.replaceWithTarget.run(this.getTargets(e.source),this.getDestinations(e.destination));case"moveToTarget":return this.actions.moveToTarget.run(this.getTargets(e.source),this.getDestinations(e.destination));case"swapTargets":return this.actions.swapTargets.run(this.getTargets(e.target1),this.getTargets(e.target2));case"callAsFunction":return this.actions.callAsFunction.run(this.getTargets(e.callee),this.getTargets(e.argument));case"wrapWithPairedDelimiter":return this.actions.wrapWithPairedDelimiter.run(this.getTargets(e.target),e.left,e.right);case"rewrapWithPairedDelimiter":return this.finalStages=this.actions.rewrapWithPairedDelimiter.getFinalStages(),this.actions.rewrapWithPairedDelimiter.run(this.getTargets(e.target),e.left,e.right);case"pasteFromClipboard":return this.actions.pasteFromClipboard.run(this.getDestinations(e.destination));case"executeCommand":return this.actions.executeCommand.run(this.getTargets(e.target),e.commandId,e.options);case"replace":return this.actions.replace.run(this.getDestinations(e.destination),e.replaceWith);case"highlight":return this.actions.highlight.run(this.getTargets(e.target),e.highlightId);case"generateSnippet":return this.actions.generateSnippet.run(this.getTargets(e.target),e.directory,e.snippetName);case"insertSnippet":return this.finalStages=this.actions.insertSnippet.getFinalStages(this.getDestinations(e.destination),e.snippetDescription),this.actions.insertSnippet.run(this.getDestinations(e.destination),e.snippetDescription);case"wrapWithSnippet":return this.finalStages=this.actions.wrapWithSnippet.getFinalStages(this.getTargets(e.target),e.snippetDescription),this.actions.wrapWithSnippet.run(this.getTargets(e.target),e.snippetDescription);case"editNew":return this.actions.editNew.run(this.getDestinations(e.destination));case"getText":return this.actions.getText.run(this.getTargets(e.target),e.options);case"parsed":return this.runAction(Hm(e.content,e.arguments));default:{let r=this.actions[e.name];if(r==null)throw new Error(`Unknown action: ${e.name}`);return this.finalStages=r.getFinalStages?.()??[],this.noAutomaticTokenExpansion=r.noAutomaticTokenExpansion??!1,r.run(this.getTargets(e.target))}}}getTargets(e){let r=this.inferenceContext.run(e);return this.pipelineRunner.run(r,{actionFinalStages:this.finalStages,noAutomaticTokenExpansion:this.noAutomaticTokenExpansion})}getDestinations(e){switch(e.type){case"list":return e.destinations.flatMap(r=>this.getDestinations(r));case"primitive":return this.getTargets(e.target).map(r=>r.toDestination(e.insertionMode));case"implicit":return this.getTargets({type:"implicit"}).map(r=>r.toDestination("to"))}}},Tv=class{constructor(e){this.debug=e;this.previousTargets=[]}run(e){let r=yv(e,this.previousTargets);return this.debug.active&&(this.debug.log("Full target:"),this.debug.log(JSON.stringify(r,null,2))),this.previousTargets.push(e),r}reset(){this.previousTargets=[]}};function dM(t,e){if(t!=null&&e!=null)throw Error("Actions may only return full targets or selections for that mark");return e!=null?e.map(Xs):t}var oh=class{constructor(e,r){this.readableHatMap=e;this.mark=r}run(){let e=this.readableHatMap.getToken(this.mark.symbolColor,this.mark.character);if(e==null)throw new Error(`Couldn't find mark ${this.mark.symbolColor} '${this.mark.character}'`);return[new Ot({editor:e.editor,contentRange:e.range,isReversed:!1,hasExplicitRange:!1})]}};var ah=class{constructor(e){this.mark=e}run(){let{editorId:e,range:{start:r,end:n}}=this.mark,i=k().visibleTextEditors.find(s=>s.id===e);if(i==null)throw new Error(`Couldn't find editor '${e}'`);let o=new Y(r.line,r.character,n.line,n.character);return[new Ot({editor:i,contentRange:o,isReversed:!1,hasExplicitRange:!1})]}};var sh=class{constructor(e){this.mark=e}run(){let e=k().activeTextEditor;if(e==null)return[];let r=C5(e,this.mark.lineNumberType,this.mark.lineNumber),n=e.document.lineAt(r).range;return[dS(e,!1,n)]}},C5=(t,e,r)=>{switch(e){case"absolute":return r;case"relative":return t.selections[0].active.line+r;case"modulo100":{let i=t.visibleRanges[0].start.line,o=t.visibleRanges[t.visibleRanges.length-1].end.line,s=Math.floor(i/100)*100,l=[],u=[],m=s+r;for(;m<=o;)m>=i&&(t.visibleRanges.find(g=>m>=g.start.line&&m<=g.end.line)?l.push(m):u.push(m)),m+=100;if(l.length===1)return l[0];if(l.length+u.length>1)throw new Error("Multiple lines matching");if(u.length===1)return u[0];throw new Error("Line is not in viewport")}}};var ch=class{constructor(e){this.mark=e}run(){return[]}};var lh=class{constructor(e,r){this.markStageFactory=e;this.mark=r}run(){let e=this.markStageFactory.create(this.mark.anchor),r=this.markStageFactory.create(this.mark.active),n=e.run(),i=r.run();if(n.length!==1||i.length!==1)throw new Error("Expected single anchor and active target");return[yo(n[0],i[0],this.mark.excludeAnchor,this.mark.excludeActive)]}};var uh=class{constructor(e,r){this.storedTargets=e;this.key=r}run(){let e=this.storedTargets.get(this.key);if(e==null||e.length===0)throw Error(`No available ${this.key} marks`);return e}};var ph=class{constructor(e,r){this.targetPipelineRunner=e;this.mark=r}run(){return this.targetPipelineRunner.run(this.mark.target)}};var mh=class{constructor(e,r){this.readableHatMap=e;this.storedTargets=r;this.create=this.create.bind(this)}setPipelineRunner(e){this.targetPipelineRunner=e}create(e){switch(e.type){case"cursor":return new _s;case"that":case"source":case"keyboard":return new uh(this.storedTargets,e.type);case"decoratedSymbol":return new oh(this.readableHatMap,e);case"lineNumber":return new sh(e);case"range":return new lh(this,e);case"nothing":return new ch(e);case"target":return new ph(this.targetPipelineRunner,e);case"explicit":return new ah(e);default:{let r=e,{type:n}=e;throw new Error(`Unknown mark: ${n}`)}}}};async function gM(t,e,r,n,i,o,s,l,u,m){r.active&&(r.log("command:"),r.log(JSON.stringify(m,null,2)));let d=Kx(m),g=await n.getReadableMap(d.usePrePhraseSnapshot),y=N5(t,e,s,r,o,g,i,l);for(let E of u)y=E.wrapCommandRunner(g,y);let x=await y.run(d);return await O5(m,x)}async function O5(t,e){if(Qo(t))return e;if("returnValue"in e)return e.returnValue}function N5(t,e,r,n,i,o,s,l){let u=new Zs(r,i,new Os(r)),m=new mh(o,i),d=new Td(u,m);return m.setPipelineRunner(d),new ih(e,n,i,d,new Xg(t,s,l,u))}function hM(t){return zk(t)?il(t.type).replace("."," "):t.type==="surroundingPair"?`Matching pair of ${il(t.delimiter)}`:t.type==="customRegex"?`Regex \`${t.regex}\``:"Unknown scope type"}var fh=class{constructor(e){this.customSpokenFormGenerator=e;this.listeners=[];this.disposable=e.onDidChangeCustomSpokenForms(()=>this.onChange()),this.onDidChangeScopeInfo=this.onDidChangeScopeInfo.bind(this),this.getScopeTypeInfo=this.getScopeTypeInfo.bind(this),this.updateScopeTypeInfos()}onDidChangeScopeInfo(e){return e(this.getScopeTypeInfos()),this.listeners.push(e),{dispose:()=>{pr(this.listeners,e)}}}async onChange(){this.updateScopeTypeInfos(),this.listeners.forEach(e=>e(this.scopeInfos))}updateScopeTypeInfos(){let e=[...Ko.filter(r=>r!=="instance").map(r=>({type:r})),...xm.map(r=>({type:"surroundingPair",delimiter:r})),...this.customSpokenFormGenerator.getCustomRegexScopeTypes()];this.scopeInfos=e.map(r=>this.getScopeTypeInfo(r))}getScopeTypeInfos(){return this.scopeInfos}getScopeTypeInfo(e){return{scopeType:e,spokenForm:this.customSpokenFormGenerator.scopeTypeToSpokenForm(e),humanReadableName:hM(e),isLanguageSpecific:U5(e)}}dispose(){this.disposable.dispose()}};function U5(t){switch(t.type){case"string":case"argumentOrParameter":case"argumentList":case"anonymousFunction":case"attribute":case"branch":case"class":case"className":case"collectionItem":case"collectionKey":case"command":case"comment":case"private.fieldAccess":case"functionCall":case"functionCallee":case"functionName":case"ifStatement":case"instance":case"interior":case"list":case"map":case"name":case"namedFunction":case"regularExpression":case"statement":case"type":case"value":case"condition":case"section":case"sectionLevelOne":case"sectionLevelTwo":case"sectionLevelThree":case"sectionLevelFour":case"sectionLevelFive":case"sectionLevelSix":case"selector":case"private.switchStatementSubject":case"unit":case"xmlBothTags":case"xmlElement":case"xmlEndTag":case"xmlStartTag":case"part":case"chapter":case"subSection":case"subSubSection":case"namedParagraph":case"subParagraph":case"environment":case"textFragment":case"disqualifyDelimiter":case"pairDelimiter":return!0;case"character":case"word":case"token":case"identifier":case"line":case"sentence":case"paragraph":case"boundedParagraph":case"document":case"nonWhitespaceSequence":case"boundedNonWhitespaceSequence":case"url":case"notebookCell":case"surroundingPair":case"surroundingPairInterior":case"customRegex":case"glyph":return!1;case"oneOf":throw Error(`Can't decide whether scope type ${JSON.stringify(t,void 0,3)} is language-specific`)}}function xv(t,e,r){if(!r)return t.document.range;let n=t.visibleRanges.reduce((s,l)=>s.union(l));n=t.document.range.intersection(n.with(n.start.translate(-10),n.end.translate(10)));let i=Xp(Array.from(e.generateScopes(t,n.start,"forward",{containment:"required"})))?.domain??n,o=Xp(Array.from(e.generateScopes(t,n.end,"forward",{containment:"required"})))?.domain??n;return i.union(o)}function va(t){return{contentRange:t.contentRange,removalRange:t.getRemovalRange(),removalHighlightRange:t.getRemovalHighlightRange(),leadingDelimiter:yM(t.getLeadingDelimiterTarget()),trailingDelimiter:yM(t.getTrailingDelimiterTarget()),interior:t.getInterior()?.map(va),boundary:t.getBoundary()?.map(va),insertionDelimiter:t.insertionDelimiter}}function yM(t){return t!=null?va(t):void 0}function TM(t,e,r,n,i){let o={multipleTargets:!0};return Ps(e.generateScopes(t,n.start,"forward",{includeDescendantScopes:!0,distalPosition:n.end}),s=>({domain:s.domain,ranges:s.getTargets(!1).map(l=>({range:l.contentRange,targets:i?H5(r,l,o).map(va):void 0}))}))}function H5(t,e,r){try{return t.run(e,r)}catch(n){if(n.name==="NoContainingScopeError")return[];throw n}}function xM(t,e,r){return Ps(e.generateScopes(t,r.start,"forward",{includeDescendantScopes:!0,distalPosition:r.end}),n=>({domain:n.domain,targets:n.getTargets(!1).map(va)}))}var dh=class{constructor(e,r){this.scopeHandlerFactory=e;this.modifierStageFactory=r;this.provideScopeRanges=this.provideScopeRanges.bind(this),this.provideIterationScopeRanges=this.provideIterationScopeRanges.bind(this)}provideScopeRanges(e,{scopeType:r,visibleOnly:n}){let i=this.scopeHandlerFactory.maybeCreate(r,e.document.languageId);return i==null?[]:xM(e,i,xv(e,i,n))}provideIterationScopeRanges(e,{scopeType:r,visibleOnly:n,includeNestedTargets:i}){let{languageId:o}=e.document,s=this.scopeHandlerFactory.maybeCreate(r,o);if(s==null)return[];let l=this.scopeHandlerFactory.maybeCreate(s.iterationScopeType,o);return l==null?[]:TM(e,l,this.modifierStageFactory.create({type:"everyScope",scopeType:r}),xv(e,s,n),i)}};var gh=class{constructor(e,r){this.scopeRangeProvider=r;this.disposables=[];this.listeners=[];this.onChange=this.onChange.bind(this),this.onDidChangeScopeRanges=this.onDidChangeScopeRanges.bind(this),this.onDidChangeIterationScopeRanges=this.onDidChangeIterationScopeRanges.bind(this);let n=new Qn(k().configuration,()=>this.onChange());this.disposables.push(k().onDidChangeVisibleTextEditors(n.run),k().onDidOpenTextDocument(n.run),k().onDidCloseTextDocument(n.run),k().onDidChangeTextDocument(n.run),k().onDidChangeTextEditorVisibleRanges(n.run),e.onDidChangeDefinition(this.onChange),n)}onDidChangeScopeRanges(e,r){let n=()=>{k().visibleTextEditors.forEach(i=>{let o;try{o=this.scopeRangeProvider.provideScopeRanges(i,r)}catch(s){if(pt(k().messages,"ScopeRangeWatcher.provide",s.message),o=[],k().runMode==="test")throw s}e(i,o)})};return this.listeners.push(n),n(),{dispose:()=>{pr(this.listeners,n)}}}onDidChangeIterationScopeRanges(e,r){let n=()=>{k().visibleTextEditors.forEach(i=>{e(i,this.scopeRangeProvider.provideIterationScopeRanges(i,r))})};return this.listeners.push(n),n(),{dispose:()=>{pr(this.listeners,n)}}}onChange(){this.listeners.forEach(e=>e())}dispose(){this.disposables.forEach(({dispose:e})=>{try{e()}catch{}})}};var hh=class{constructor(e){this.scopeHandlerFactory=e;this.getScopeSupport=this.getScopeSupport.bind(this),this.getIterationScopeSupport=this.getIterationScopeSupport.bind(this)}getScopeSupport(e,r){let{languageId:n}=e.document,i=this.scopeHandlerFactory.maybeCreate(r,n);return i==null?2:SM(e,i)?0:1}getIterationScopeSupport(e,r){let{languageId:n}=e.document,i=this.scopeHandlerFactory.maybeCreate(r,n);if(i==null)return 2;let o=this.scopeHandlerFactory.maybeCreate(i.iterationScopeType,n);return o==null?2:SM(e,o)?0:1}};function SM(t,e){return!Kk(e.generateScopes(t,new _e(0,0),"forward"))}var yh=class{constructor(e,r,n){this.scopeSupportChecker=r;this.scopeInfoProvider=n;this.listeners=[];this.onChange=this.onChange.bind(this),this.onDidChangeScopeSupport=this.onDidChangeScopeSupport.bind(this);let i=new Qn(k().configuration,()=>this.onChange());this.disposable=Gk(k().onDidOpenTextDocument(i.run),k().onDidCloseTextDocument(i.run),k().onDidChangeActiveTextEditor(i.run),k().onDidChangeTextDocument(i.run),e.onDidChangeDefinition(i.run),this.scopeInfoProvider.onDidChangeScopeInfo(this.onChange),i)}onDidChangeScopeSupport(e){return e(this.getSupportLevels()),this.listeners.push(e),{dispose:()=>{pr(this.listeners,e)}}}onChange(){if(this.listeners.length===0)return;let e=this.getSupportLevels();this.listeners.forEach(r=>r(e))}getSupportLevels(){let e=k().activeTextEditor,r=e==null?()=>2:o=>this.scopeSupportChecker.getScopeSupport(e,o),n=e==null?()=>2:o=>this.scopeSupportChecker.getIterationScopeSupport(e,o);return this.scopeInfoProvider.getScopeTypeInfos().map(o=>({...o,support:r(o.scopeType),iterationScopeSupport:n(o.scopeType)}))}dispose(){this.disposable.dispose()}};async function vM({ide:t,hats:e,treeSitterQueryProvider:r,treeSitter:n=new Tf,commandServerApi:i=new ff,talonSpokenForms:o=new yf,snippets:s=new hf}){jm(t);let l=new af(t),u=new mf,m=new qm,d=new of(t,m),g=new vf(o),y=e!=null?new uf(u,l,e,i):new df;y.allocateHats();let x=r?await cd.create(t,n,r):new gf;t.disposeOnExit(u,x,y,l,d);let E=[],w,U=V=>(w=V,gM(n,i,l,y,s,m,x,u,E,V));return{commandApi:{runCommand(V){return U(V)},runCommandSafe(...V){return U(Sm(V))},repeatPreviousCommand(){if(w==null)throw new Error("No previous command");return U(w)}},scopeProvider:V5(x,m,g),customSpokenFormGenerator:g,storedTargets:m,hatTokenMap:y,injectIde:jm,addCommandRunnerDecorator:V=>{E.push(V)}}}function V5(t,e,r){let n=new Os(t),i=new dh(n,new Zs(t,e,n)),o=new gh(t,i),s=new hh(n),l=new fh(r),u=new yh(t,s,l);return{provideScopeRanges:i.provideScopeRanges,provideIterationScopeRanges:i.provideIterationScopeRanges,onDidChangeScopeRanges:o.onDidChangeScopeRanges,onDidChangeIterationScopeRanges:o.onDidChangeIterationScopeRanges,getScopeSupport:s.getScopeSupport,getIterationScopeSupport:s.getIterationScopeSupport,onDidChangeScopeSupport:u.onDidChangeScopeSupport,getScopeInfo:l.getScopeTypeInfo,onDidChangeScopeInfo:l.onDidChangeScopeInfo}}function bM(t,e){switch(e.type){case"UntypedTarget":return new Ot({editor:t,isReversed:e.isReversed,contentRange:um(e.contentRange),hasExplicitRange:e.hasExplicitRange});case"LineTarget":return new fr({editor:t,isReversed:e.isReversed,contentRange:um(e.contentRange)});default:throw Error(`Unsupported target type ${e.type}`)}}var BFe=Symbol("unused");var Xl=class{constructor(e){this.position=e}},VFe={$0:new Xl(0),$1:new Xl(1),$2:new Xl(2)};var wM=require("node:events"),Th=class{constructor(){this.apis=new Map,this.commands=new Map,this.eventEmitter=new wM.EventEmitter}registerExtensionApi(e,r){this.apis.set(e,r)}getExtensionApi(e){return this.apis.get(e)}registerCommand(e,r){this.commands.set(e,r)}async executeCommand(e,...r){return await this.commands.get(e)(...r)}onEvent(e,r){return this.eventEmitter.on(e,r)}emitEvent(e,...r){return this.eventEmitter.emit(e,...r)}};function zr(){return global._neovimRegistry==null&&(global._neovimRegistry=new Th),global._neovimRegistry}var EM="pokey.cursorless";async function xh(t,e){let r='return require("cursorless").buffer_get_selection()',[n,i,o,s,l]=await e.executeLua(r,[]),u;return l===!0?u=[new st(new _e(o-1,s-1),new _e(n-1,i-1))]:u=[new st(new _e(n-1,i-1),new _e(o-1,s-1))],console.debug(`bufferGetSelections(): selections=(${u[0].start.line}, ${u[0].start.character}), (${u[0].end.line}, ${u[0].end.character}) neovim=(${n},${i}),(${o},${s}),reverse=${l}`),u}async function _M(t,e){if(e.length!==1)throw new Error("bufferSetSelections() only supports one selection");let r=`return require("cursorless").select_range(${e[0].start.line+1}, ${e[0].start.character}, ${e[0].end.line+1}, ${e[0].end.character})`;console.debug(`bufferSetSelections() selections=(${e[0].start.line},${e[0].start.character}),(${e[0].end.line},${e[0].end.character}) luaCode="${r}"`),await t.executeLua(r,[])}async function RM(t,e,r){let n='return require("cursorless").window_get_visible_lines()',[i,o]=await e.executeLua(n,[]),s=new Y(new _e(i-1,0),new _e(o-1,r[o-1].length-1));return console.debug(`windowGetVisibleRanges(): range=(${s.start.line}, ${s.start.character}), (${s.end.line}, ${s.end.character})`),[s]}async function kM(t){return await t.executeLua('return require("cursorless.utils").cursorless_nvim_path()',[])}async function Sh(t,e){await e.callFunction("setreg",["*",t])}async function AM(t){return await t.callFunction("getreg",["*"])}async function PM(t){await t.executeLua('return require("cursorless.utils").paste()',[])}async function DM(t){await t.executeLua('return require("cursorless.utils").mode_switch_nt()',[])}async function MM(t){await t.executeLua('return require("cursorless.utils").mode_switch_t()',[])}async function LM(t,e){let r=`vim.notify("${e}")`;await t.executeLua(r,[])}var W5={clipboardCopy:{acceptsLocation:!1},clipboardPaste:!0,toggleLineComment:void 0,indentLine:void 0,outdentLine:void 0,rename:void 0,quickFix:void 0,revealDefinition:void 0,revealTypeDefinition:void 0,showHover:void 0,showDebugHover:void 0,extractVariable:void 0,fold:void 0,highlight:{acceptsLocation:!0},unfold:void 0,showReferences:void 0,insertLineAfter:void 0,gitAccept:void 0,gitRevert:void 0,gitStage:void 0,gitUnstage:void 0},vh=class{constructor(){this.commands=W5}};var Jl=class{constructor(e){this.client=e}async readText(){return await AM(this.client)}async writeText(e){return await Sh(e,this.client)}};var bh=on(Sv(),1);var tu=class{constructor(){this.notifier=new Jt;this.mocks={...nm};this.scopes=[];this.onDidChangeConfiguration=this.notifier.registerListener;this.onDidChangeConfiguration=this.onDidChangeConfiguration.bind(this)}getOwnConfiguration(e,r){if(r!=null){for(let{scope:n,values:i}of this.scopes)if($5(n,r))return(0,bh.get)(i,e)??(0,bh.get)(this.mocks,e)}return(0,bh.get)(this.mocks,e)}mockConfiguration(e,r){this.mocks[e]=r,this.notifier.notifyListeners()}mockConfigurationScope(e,r,n=!1){this.scopes.push({scope:e,values:r}),n||this.notifier.notifyListeners()}};function $5(t,e){return t.languageId===e.languageId}async function vv(t,e,r,n){console.debug("neovimEdit() [unsorted]:");for(let s of n)console.debug(`	range=${JSON.stringify(s.range)}, text='${s.text}', isReplace=${s.isReplace}`);n.sort((s,l)=>(FM(s)||IM(s))&&(FM(l)||IM(l))?1:s.range.start.line===l.range.start.line?l.range.start.character-s.range.start.character:l.range.start.line-s.range.start.line),console.debug("neovimEdit() [sorted]:");for(let s of n)console.debug(`	range=${JSON.stringify(s.range)}, text='${s.text}', isReplace=${s.isReplace}`);let i=e.getTextDocument(await t.window.buffer),o=[];for(let s of n)o.push({range:s.range,rangeOffset:i.offsetAt(s.range.start),rangeLength:i.offsetAt(s.range.end)-i.offsetAt(s.range.start),text:s.text});zr().emitEvent("onDidChangeTextDocument",{document:i,contentChanges:o});for(let s of n){let{range:l,text:u,isReplace:m}=s;u===""?await CM(t,l):l.isEmpty&&!m?await OM(t,l.start,u):await j5(t,l,u)}return await e.updateTextEditor(),!0}async function CM(t,e){console.debug(`neovimDelete(): range=${JSON.stringify(e)}`);let r=await t.window.buffer,n=(await r.getLines({start:e.end.line,end:e.end.line+1,strictIndexing:!0}))[0],i=n.slice(e.end.character);if(e.start.line===e.end.line){let l=n.slice(0,e.start.character)+i;await r.setLines(l,{start:e.start.line,end:e.start.line+1,strictIndexing:!0});return}if(e.start.character===0){await r.setLines(i,{start:e.start.line,end:e.end.line+1,strictIndexing:!0});return}let o=(await r.getLines({start:e.start.line,end:e.start.line+1,strictIndexing:!0}))[0],s=o.slice(0,e.start.character);if(e.start.character<=o.length){await r.setLines(s+i,{start:e.start.line,end:e.end.line+1,strictIndexing:!0});return}await r.setLines([s,i],{start:e.start.line,end:e.end.line+1,strictIndexing:!0})}async function OM(t,e,r){console.debug(`neovimInsert(): position=${JSON.stringify(e)}, text='${r}'`);let n=r.replace(/(?:\r\n|\r|\n)/g,`
`).split(`
`),i=await t.window.buffer,o=(await i.getLines({start:e.line,end:e.line+1,strictIndexing:!0}))[0],s=o.slice(0,e.character),l=o.slice(e.character);if(n.length===1){let d=s+n[0]+l;await i.setLines(d,{start:e.line,end:e.line+1,strictIndexing:!0});return}let u=s+n[0],m=n[n.length-1]+l;await i.setLines([u,...n.slice(1,n.length-1),m],{start:e.line,end:e.line+1,strictIndexing:!0})}async function j5(t,e,r){console.debug(`neovimReplace(): range=${JSON.stringify(e)}, text='${r}'`),await CM(t,e),await OM(t,e.start,r)}function FM(t){return t.range.isEmpty&&!t.isReplace}function IM(t){return t.text!==""&&!!(!t.range.isEmpty||t.isReplace)}function NM(t){return zr().onEvent("onDidChangeTextDocument",t),HM()}function UM(t,e,r){return zr().onEvent("onDidOpenTextDocument",t),HM()}function HM(){return{dispose(){}}}var ru=class{constructor(){this.data={...im}}get(e){return this.data[e]}set(e,r){return this.data[e]=r,Promise.resolve()}};var NF=on(Sv(),1);var nu=class{async showMessage(e,r,n,...i){}};async function BM(t,e){let r=e.activeTextEditor,n=await t.window,i=await xh(n,t),o=r.document.getText(i[0]);await Sh(o,t)}async function VM(t,e){await PM(t)}var wh=class{constructor(e,r,n,i,o,s,l){this.id=e;this.client=r;this.neovimIDE=n;this.window=i;this._document=o,this._selections=l,this._visibleRanges=s}get document(){return this._document}updateDocument(e,r,n,i){if(n)this._document=n;else if(i)this._document.update(i);else throw Error("updateDocument(): invalid arguments");return this._selections=r,this._visibleRanges=e,this._document}get selections(){return this._selections}async setSelections(e){this._selections=e,await _M(this.client,e)}get visibleRanges(){return this._visibleRanges}get options(){throw Error("get options Not implemented")}set options(e){throw Error("set options Not implemented")}get isActive(){return!0}isEqual(e){return this.id===e.id}async revealRange(e){}revealLine(e,r){throw Error("revealLine Not implemented")}async edit(e){return await vv(this.client,this.neovimIDE,this.window,e)}focus(){return Promise.resolve()}editNewNotebookCellAbove(){throw Error("editNewNotebookCellAbove Not implemented")}editNewNotebookCellBelow(){throw Error("editNewNotebookCellBelow Not implemented")}openLink(e,r){throw Error("openLink Not implemented")}fold(e){throw Error("fold Not implemented")}unfold(e){throw Error("unfold Not implemented")}toggleBreakpoint(e){throw Error("toggleBreakpoint Not implemented")}async toggleLineComment(e){throw Error("toggleLineComment Not implemented")}async clipboardCopy(e){await BM(this.client,this.neovimIDE)}async clipboardPaste(){await VM(this.client,this.neovimIDE)}async indentLine(e){throw Error("indentLine Not implemented")}async outdentLine(e){throw Error("outdentLine Not implemented")}async insertLineAfter(e){throw Error("insertLineAfter Not implemented")}insertSnippet(e,r){throw Error("insertSnippet Not implemented")}async rename(e){throw Error("rename Not implemented")}async showReferences(e){throw Error("showReferences Not implemented")}async quickFix(e){throw Error("quickFix Not implemented")}async revealDefinition(e){throw Error("revealDefinition Not implemented")}async revealTypeDefinition(e){throw Error("revealTypeDefinition Not implemented")}async showHover(e){throw Error("showHover Not implemented")}async showDebugHover(e){throw Error("showDebugHover Not implemented")}async extractVariable(e){throw Error("extractVariable Not implemented")}async gitAccept(e){throw Error("gitAccept Not implemented")}async gitRevert(e){throw Error("gitRevert Not implemented")}async gitStage(e){throw Error("gitStage Not implemented")}async gitUnstage(e){throw Error("gitUnstage Not implemented")}};var $b=on(require("path"),1);var WM;(()=>{"use strict";var t={975:C=>{function A(F){if(typeof F!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(F))}function z(F,N){for(var j,X="",Q=0,re=-1,be=0,Ee=0;Ee<=F.length;++Ee){if(Ee<F.length)j=F.charCodeAt(Ee);else{if(j===47)break;j=47}if(j===47){if(!(re===Ee-1||be===1))if(re!==Ee-1&&be===2){if(X.length<2||Q!==2||X.charCodeAt(X.length-1)!==46||X.charCodeAt(X.length-2)!==46){if(X.length>2){var Ke=X.lastIndexOf("/");if(Ke!==X.length-1){Ke===-1?(X="",Q=0):Q=(X=X.slice(0,Ke)).length-1-X.lastIndexOf("/"),re=Ee,be=0;continue}}else if(X.length===2||X.length===1){X="",Q=0,re=Ee,be=0;continue}}N&&(X.length>0?X+="/..":X="..",Q=2)}else X.length>0?X+="/"+F.slice(re+1,Ee):X=F.slice(re+1,Ee),Q=Ee-re-1;re=Ee,be=0}else j===46&&be!==-1?++be:be=-1}return X}var Z={resolve:function(){for(var F,N="",j=!1,X=arguments.length-1;X>=-1&&!j;X--){var Q;X>=0?Q=arguments[X]:(F===void 0&&(F=process.cwd()),Q=F),A(Q),Q.length!==0&&(N=Q+"/"+N,j=Q.charCodeAt(0)===47)}return N=z(N,!j),j?N.length>0?"/"+N:"/":N.length>0?N:"."},normalize:function(F){if(A(F),F.length===0)return".";var N=F.charCodeAt(0)===47,j=F.charCodeAt(F.length-1)===47;return(F=z(F,!N)).length!==0||N||(F="."),F.length>0&&j&&(F+="/"),N?"/"+F:F},isAbsolute:function(F){return A(F),F.length>0&&F.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var F,N=0;N<arguments.length;++N){var j=arguments[N];A(j),j.length>0&&(F===void 0?F=j:F+="/"+j)}return F===void 0?".":Z.normalize(F)},relative:function(F,N){if(A(F),A(N),F===N||(F=Z.resolve(F))===(N=Z.resolve(N)))return"";for(var j=1;j<F.length&&F.charCodeAt(j)===47;++j);for(var X=F.length,Q=X-j,re=1;re<N.length&&N.charCodeAt(re)===47;++re);for(var be=N.length-re,Ee=Q<be?Q:be,Ke=-1,Ue=0;Ue<=Ee;++Ue){if(Ue===Ee){if(be>Ee){if(N.charCodeAt(re+Ue)===47)return N.slice(re+Ue+1);if(Ue===0)return N.slice(re+Ue)}else Q>Ee&&(F.charCodeAt(j+Ue)===47?Ke=Ue:Ue===0&&(Ke=0));break}var dt=F.charCodeAt(j+Ue);if(dt!==N.charCodeAt(re+Ue))break;dt===47&&(Ke=Ue)}var Vt="";for(Ue=j+Ke+1;Ue<=X;++Ue)Ue!==X&&F.charCodeAt(Ue)!==47||(Vt.length===0?Vt+="..":Vt+="/..");return Vt.length>0?Vt+N.slice(re+Ke):(re+=Ke,N.charCodeAt(re)===47&&++re,N.slice(re))},_makeLong:function(F){return F},dirname:function(F){if(A(F),F.length===0)return".";for(var N=F.charCodeAt(0),j=N===47,X=-1,Q=!0,re=F.length-1;re>=1;--re)if((N=F.charCodeAt(re))===47){if(!Q){X=re;break}}else Q=!1;return X===-1?j?"/":".":j&&X===1?"//":F.slice(0,X)},basename:function(F,N){if(N!==void 0&&typeof N!="string")throw new TypeError('"ext" argument must be a string');A(F);var j,X=0,Q=-1,re=!0;if(N!==void 0&&N.length>0&&N.length<=F.length){if(N.length===F.length&&N===F)return"";var be=N.length-1,Ee=-1;for(j=F.length-1;j>=0;--j){var Ke=F.charCodeAt(j);if(Ke===47){if(!re){X=j+1;break}}else Ee===-1&&(re=!1,Ee=j+1),be>=0&&(Ke===N.charCodeAt(be)?--be==-1&&(Q=j):(be=-1,Q=Ee))}return X===Q?Q=Ee:Q===-1&&(Q=F.length),F.slice(X,Q)}for(j=F.length-1;j>=0;--j)if(F.charCodeAt(j)===47){if(!re){X=j+1;break}}else Q===-1&&(re=!1,Q=j+1);return Q===-1?"":F.slice(X,Q)},extname:function(F){A(F);for(var N=-1,j=0,X=-1,Q=!0,re=0,be=F.length-1;be>=0;--be){var Ee=F.charCodeAt(be);if(Ee!==47)X===-1&&(Q=!1,X=be+1),Ee===46?N===-1?N=be:re!==1&&(re=1):N!==-1&&(re=-1);else if(!Q){j=be+1;break}}return N===-1||X===-1||re===0||re===1&&N===X-1&&N===j+1?"":F.slice(N,X)},format:function(F){if(F===null||typeof F!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof F);return function(N,j){var X=j.dir||j.root,Q=j.base||(j.name||"")+(j.ext||"");return X?X===j.root?X+Q:X+"/"+Q:Q}(0,F)},parse:function(F){A(F);var N={root:"",dir:"",base:"",ext:"",name:""};if(F.length===0)return N;var j,X=F.charCodeAt(0),Q=X===47;Q?(N.root="/",j=1):j=0;for(var re=-1,be=0,Ee=-1,Ke=!0,Ue=F.length-1,dt=0;Ue>=j;--Ue)if((X=F.charCodeAt(Ue))!==47)Ee===-1&&(Ke=!1,Ee=Ue+1),X===46?re===-1?re=Ue:dt!==1&&(dt=1):re!==-1&&(dt=-1);else if(!Ke){be=Ue+1;break}return re===-1||Ee===-1||dt===0||dt===1&&re===Ee-1&&re===be+1?Ee!==-1&&(N.base=N.name=be===0&&Q?F.slice(1,Ee):F.slice(be,Ee)):(be===0&&Q?(N.name=F.slice(1,re),N.base=F.slice(1,Ee)):(N.name=F.slice(be,re),N.base=F.slice(be,Ee)),N.ext=F.slice(re,Ee)),be>0?N.dir=F.slice(0,be-1):Q&&(N.dir="/"),N},sep:"/",delimiter:":",win32:null,posix:null};Z.posix=Z,C.exports=Z}},e={};function r(C){var A=e[C];if(A!==void 0)return A.exports;var z=e[C]={exports:{}};return t[C](z,z.exports,r),z.exports}r.d=(C,A)=>{for(var z in A)r.o(A,z)&&!r.o(C,z)&&Object.defineProperty(C,z,{enumerable:!0,get:A[z]})},r.o=(C,A)=>Object.prototype.hasOwnProperty.call(C,A),r.r=C=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(C,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(C,"__esModule",{value:!0})};var n={};let i;r.r(n),r.d(n,{URI:()=>y,Utils:()=>H}),typeof process=="object"?i=process.platform==="win32":typeof navigator=="object"&&(i=navigator.userAgent.indexOf("Windows")>=0);let o=/^\w[\w\d+.-]*$/,s=/^\//,l=/^\/\//;function u(C,A){if(!C.scheme&&A)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${C.authority}", path: "${C.path}", query: "${C.query}", fragment: "${C.fragment}"}`);if(C.scheme&&!o.test(C.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(C.path){if(C.authority){if(!s.test(C.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(l.test(C.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}let m="",d="/",g=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class y{static isUri(A){return A instanceof y||!!A&&typeof A.authority=="string"&&typeof A.fragment=="string"&&typeof A.path=="string"&&typeof A.query=="string"&&typeof A.scheme=="string"&&typeof A.fsPath=="string"&&typeof A.with=="function"&&typeof A.toString=="function"}scheme;authority;path;query;fragment;constructor(A,z,Z,F,N,j=!1){typeof A=="object"?(this.scheme=A.scheme||m,this.authority=A.authority||m,this.path=A.path||m,this.query=A.query||m,this.fragment=A.fragment||m):(this.scheme=function(X,Q){return X||Q?X:"file"}(A,j),this.authority=z||m,this.path=function(X,Q){switch(X){case"https":case"http":case"file":Q?Q[0]!==d&&(Q=d+Q):Q=d}return Q}(this.scheme,Z||m),this.query=F||m,this.fragment=N||m,u(this,j))}get fsPath(){return q(this,!1)}with(A){if(!A)return this;let{scheme:z,authority:Z,path:F,query:N,fragment:j}=A;return z===void 0?z=this.scheme:z===null&&(z=m),Z===void 0?Z=this.authority:Z===null&&(Z=m),F===void 0?F=this.path:F===null&&(F=m),N===void 0?N=this.query:N===null&&(N=m),j===void 0?j=this.fragment:j===null&&(j=m),z===this.scheme&&Z===this.authority&&F===this.path&&N===this.query&&j===this.fragment?this:new E(z,Z,F,N,j)}static parse(A,z=!1){let Z=g.exec(A);return Z?new E(Z[2]||m,ve(Z[4]||m),ve(Z[5]||m),ve(Z[7]||m),ve(Z[9]||m),z):new E(m,m,m,m,m)}static file(A){let z=m;if(i&&(A=A.replace(/\\/g,d)),A[0]===d&&A[1]===d){let Z=A.indexOf(d,2);Z===-1?(z=A.substring(2),A=d):(z=A.substring(2,Z),A=A.substring(Z)||d)}return new E("file",z,A,m,m)}static from(A){let z=new E(A.scheme,A.authority,A.path,A.query,A.fragment);return u(z,!0),z}toString(A=!1){return ne(this,A)}toJSON(){return this}static revive(A){if(A){if(A instanceof y)return A;{let z=new E(A);return z._formatted=A.external,z._fsPath=A._sep===x?A.fsPath:null,z}}return A}}let x=i?1:void 0;class E extends y{_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=q(this,!1)),this._fsPath}toString(A=!1){return A?ne(this,!0):(this._formatted||(this._formatted=ne(this,!1)),this._formatted)}toJSON(){let A={$mid:1};return this._fsPath&&(A.fsPath=this._fsPath,A._sep=x),this._formatted&&(A.external=this._formatted),this.path&&(A.path=this.path),this.scheme&&(A.scheme=this.scheme),this.authority&&(A.authority=this.authority),this.query&&(A.query=this.query),this.fragment&&(A.fragment=this.fragment),A}}let w={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function U(C,A,z){let Z,F=-1;for(let N=0;N<C.length;N++){let j=C.charCodeAt(N);if(j>=97&&j<=122||j>=65&&j<=90||j>=48&&j<=57||j===45||j===46||j===95||j===126||A&&j===47||z&&j===91||z&&j===93||z&&j===58)F!==-1&&(Z+=encodeURIComponent(C.substring(F,N)),F=-1),Z!==void 0&&(Z+=C.charAt(N));else{Z===void 0&&(Z=C.substr(0,N));let X=w[j];X!==void 0?(F!==-1&&(Z+=encodeURIComponent(C.substring(F,N)),F=-1),Z+=X):F===-1&&(F=N)}}return F!==-1&&(Z+=encodeURIComponent(C.substring(F))),Z!==void 0?Z:C}function V(C){let A;for(let z=0;z<C.length;z++){let Z=C.charCodeAt(z);Z===35||Z===63?(A===void 0&&(A=C.substr(0,z)),A+=w[Z]):A!==void 0&&(A+=C[z])}return A!==void 0?A:C}function q(C,A){let z;return z=C.authority&&C.path.length>1&&C.scheme==="file"?`//${C.authority}${C.path}`:C.path.charCodeAt(0)===47&&(C.path.charCodeAt(1)>=65&&C.path.charCodeAt(1)<=90||C.path.charCodeAt(1)>=97&&C.path.charCodeAt(1)<=122)&&C.path.charCodeAt(2)===58?A?C.path.substr(1):C.path[1].toLowerCase()+C.path.substr(2):C.path,i&&(z=z.replace(/\//g,"\\")),z}function ne(C,A){let z=A?V:U,Z="",{scheme:F,authority:N,path:j,query:X,fragment:Q}=C;if(F&&(Z+=F,Z+=":"),(N||F==="file")&&(Z+=d,Z+=d),N){let re=N.indexOf("@");if(re!==-1){let be=N.substr(0,re);N=N.substr(re+1),re=be.lastIndexOf(":"),re===-1?Z+=z(be,!1,!1):(Z+=z(be.substr(0,re),!1,!1),Z+=":",Z+=z(be.substr(re+1),!1,!0)),Z+="@"}N=N.toLowerCase(),re=N.lastIndexOf(":"),re===-1?Z+=z(N,!1,!0):(Z+=z(N.substr(0,re),!1,!0),Z+=N.substr(re))}if(j){if(j.length>=3&&j.charCodeAt(0)===47&&j.charCodeAt(2)===58){let re=j.charCodeAt(1);re>=65&&re<=90&&(j=`/${String.fromCharCode(re+32)}:${j.substr(3)}`)}else if(j.length>=2&&j.charCodeAt(1)===58){let re=j.charCodeAt(0);re>=65&&re<=90&&(j=`${String.fromCharCode(re+32)}:${j.substr(2)}`)}Z+=z(j,!0,!1)}return X&&(Z+="?",Z+=z(X,!1,!1)),Q&&(Z+="#",Z+=A?Q:U(Q,!1,!1)),Z}function se(C){try{return decodeURIComponent(C)}catch{return C.length>3?C.substr(0,3)+se(C.substr(3)):C}}let de=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function ve(C){return C.match(de)?C.replace(de,A=>se(A)):C}var Et=r(975);let yr=Et.posix||Et,Tr="/";var H;(function(C){C.joinPath=function(A,...z){return A.with({path:yr.join(A.path,...z)})},C.resolvePath=function(A,...z){let Z=A.path,F=!1;Z[0]!==Tr&&(Z=Tr+Z,F=!0);let N=yr.resolve(Z,...z);return F&&N[0]===Tr&&!A.authority&&(N=N.substring(1)),A.with({path:N})},C.dirname=function(A){if(A.path.length===0||A.path===Tr)return A;let z=yr.dirname(A.path);return z.length===1&&z.charCodeAt(0)===46&&(z=""),A.with({path:z})},C.basename=function(A){return yr.basename(A.path)},C.extname=function(A){return yr.extname(A.path)}})(H||(H={})),WM=n})();var{URI:$M,Utils:HIe}=WM;var bv=(t,e,r)=>{let n=t instanceof RegExp?jM(t,r):t,i=e instanceof RegExp?jM(e,r):e,o=n!==null&&i!=null&&z5(n,i,r);return o&&{start:o[0],end:o[1],pre:r.slice(0,o[0]),body:r.slice(o[0]+n.length,o[1]),post:r.slice(o[1]+i.length)}},jM=(t,e)=>{let r=e.match(t);return r?r[0]:null},z5=(t,e,r)=>{let n,i,o,s,l,u=r.indexOf(t),m=r.indexOf(e,u+1),d=u;if(u>=0&&m>0){if(t===e)return[u,m];for(n=[],o=r.length;d>=0&&!l;){if(d===u)n.push(d),u=r.indexOf(t,d+1);else if(n.length===1){let g=n.pop();g!==void 0&&(l=[g,m])}else i=n.pop(),i!==void 0&&i<o&&(o=i,s=m),m=r.indexOf(e,d+1);d=u<m&&u>=0?u:m}n.length&&s!==void 0&&(l=[o,s])}return l};var zM="\0SLASH"+Math.random()+"\0",qM="\0OPEN"+Math.random()+"\0",Ev="\0CLOSE"+Math.random()+"\0",GM="\0COMMA"+Math.random()+"\0",KM="\0PERIOD"+Math.random()+"\0",q5=new RegExp(zM,"g"),G5=new RegExp(qM,"g"),K5=new RegExp(Ev,"g"),Q5=new RegExp(GM,"g"),Y5=new RegExp(KM,"g"),Z5=/\\\\/g,X5=/\\{/g,J5=/\\}/g,eQ=/\\,/g,tQ=/\\./g;function wv(t){return isNaN(t)?t.charCodeAt(0):parseInt(t,10)}function rQ(t){return t.replace(Z5,zM).replace(X5,qM).replace(J5,Ev).replace(eQ,GM).replace(tQ,KM)}function nQ(t){return t.replace(q5,"\\").replace(G5,"{").replace(K5,"}").replace(Q5,",").replace(Y5,".")}function QM(t){if(!t)return[""];let e=[],r=bv("{","}",t);if(!r)return t.split(",");let{pre:n,body:i,post:o}=r,s=n.split(",");s[s.length-1]+="{"+i+"}";let l=QM(o);return o.length&&(s[s.length-1]+=l.shift(),s.push.apply(s,l)),e.push.apply(e,s),e}function YM(t){return t?(t.slice(0,2)==="{}"&&(t="\\{\\}"+t.slice(2)),iu(rQ(t),!0).map(nQ)):[]}function iQ(t){return"{"+t+"}"}function oQ(t){return/^-?0\d/.test(t)}function aQ(t,e){return t<=e}function sQ(t,e){return t>=e}function iu(t,e){let r=[],n=bv("{","}",t);if(!n)return[t];let i=n.pre,o=n.post.length?iu(n.post,!1):[""];if(/\$$/.test(n.pre))for(let s=0;s<o.length;s++){let l=i+"{"+n.body+"}"+o[s];r.push(l)}else{let s=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),l=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),u=s||l,m=n.body.indexOf(",")>=0;if(!u&&!m)return n.post.match(/,(?!,).*\}/)?(t=n.pre+"{"+n.body+Ev+n.post,iu(t)):[t];let d;if(u)d=n.body.split(/\.\./);else if(d=QM(n.body),d.length===1&&d[0]!==void 0&&(d=iu(d[0],!1).map(iQ),d.length===1))return o.map(y=>n.pre+d[0]+y);let g;if(u&&d[0]!==void 0&&d[1]!==void 0){let y=wv(d[0]),x=wv(d[1]),E=Math.max(d[0].length,d[1].length),w=d.length===3&&d[2]!==void 0?Math.abs(wv(d[2])):1,U=aQ;x<y&&(w*=-1,U=sQ);let q=d.some(oQ);g=[];for(let ne=y;U(ne,x);ne+=w){let se;if(l)se=String.fromCharCode(ne),se==="\\"&&(se="");else if(se=String(ne),q){let de=E-se.length;if(de>0){let ve=new Array(de+1).join("0");ne<0?se="-"+ve+se.slice(1):se=ve+se}}g.push(se)}}else{g=[];for(let y=0;y<d.length;y++)g.push.apply(g,iu(d[y],!1))}for(let y=0;y<g.length;y++)for(let x=0;x<o.length;x++){let E=i+g[y]+o[x];(!e||u||E)&&r.push(E)}}return r}var ou=t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>65536)throw new TypeError("pattern is too long")};var cQ={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},au=t=>t.replace(/[[\]\\-]/g,"\\$&"),lQ=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),ZM=t=>t.join(""),XM=(t,e)=>{let r=e;if(t.charAt(r)!=="[")throw new Error("not in a brace expression");let n=[],i=[],o=r+1,s=!1,l=!1,u=!1,m=!1,d=r,g="";e:for(;o<t.length;){let w=t.charAt(o);if((w==="!"||w==="^")&&o===r+1){m=!0,o++;continue}if(w==="]"&&s&&!u){d=o+1;break}if(s=!0,w==="\\"&&!u){u=!0,o++;continue}if(w==="["&&!u){for(let[U,[V,q,ne]]of Object.entries(cQ))if(t.startsWith(U,o)){if(g)return["$.",!1,t.length-r,!0];o+=U.length,ne?i.push(V):n.push(V),l=l||q;continue e}}if(u=!1,g){w>g?n.push(au(g)+"-"+au(w)):w===g&&n.push(au(w)),g="",o++;continue}if(t.startsWith("-]",o+1)){n.push(au(w+"-")),o+=2;continue}if(t.startsWith("-",o+1)){g=w,o+=2;continue}n.push(au(w)),o++}if(d<o)return["",!1,0,!1];if(!n.length&&!i.length)return["$.",!1,t.length-r,!0];if(i.length===0&&n.length===1&&/^\\?.$/.test(n[0])&&!m){let w=n[0].length===2?n[0].slice(-1):n[0];return[lQ(w),!1,d-r,!1]}let y="["+(m?"^":"")+ZM(n)+"]",x="["+(m?"":"^")+ZM(i)+"]";return[n.length&&i.length?"("+y+"|"+x+")":n.length?y:x,l,d-r,!0]};var Cn=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");var uQ=new Set(["!","?","+","*","@"]),JM=t=>uQ.has(t),pQ="(?!(?:^|/)\\.\\.?(?:$|/))",Eh="(?!\\.)",mQ=new Set(["[","."]),fQ=new Set(["..","."]),dQ=new Set("().*{}+?[]^$\\!"),gQ=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),_v="[^/]",eL=_v+"*?",tL=_v+"+?",ic=class t{type;#e;#t;#o=!1;#n=[];#a;#S;#l;#p=!1;#s;#c;#i=!1;constructor(e,r,n={}){this.type=e,e&&(this.#t=!0),this.#a=r,this.#e=this.#a?this.#a.#e:this,this.#s=this.#e===this?n:this.#e.#s,this.#l=this.#e===this?[]:this.#e.#l,e==="!"&&!this.#e.#p&&this.#l.push(this),this.#S=this.#a?this.#a.#n.length:0}get hasMagic(){if(this.#t!==void 0)return this.#t;for(let e of this.#n)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#t=!0;return this.#t}toString(){return this.#c!==void 0?this.#c:this.type?this.#c=this.type+"("+this.#n.map(e=>String(e)).join("|")+")":this.#c=this.#n.map(e=>String(e)).join("")}#h(){if(this!==this.#e)throw new Error("should only call on root");if(this.#p)return this;this.toString(),this.#p=!0;let e;for(;e=this.#l.pop();){if(e.type!=="!")continue;let r=e,n=r.#a;for(;n;){for(let i=r.#S+1;!n.type&&i<n.#n.length;i++)for(let o of e.#n){if(typeof o=="string")throw new Error("string part in extglob AST??");o.copyIn(n.#n[i])}r=n,n=r.#a}}return this}push(...e){for(let r of e)if(r!==""){if(typeof r!="string"&&!(r instanceof t&&r.#a===this))throw new Error("invalid part: "+r);this.#n.push(r)}}toJSON(){let e=this.type===null?this.#n.slice().map(r=>typeof r=="string"?r:r.toJSON()):[this.type,...this.#n.map(r=>r.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#p&&this.#a?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#a?.isStart())return!1;if(this.#S===0)return!0;let e=this.#a;for(let r=0;r<this.#S;r++){let n=e.#n[r];if(!(n instanceof t&&n.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#a?.type==="!")return!0;if(!this.#a?.isEnd())return!1;if(!this.type)return this.#a?.isEnd();let e=this.#a?this.#a.#n.length:0;return this.#S===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let r=new t(this.type,e);for(let n of this.#n)r.copyIn(n);return r}static#y(e,r,n,i){let o=!1,s=!1,l=-1,u=!1;if(r.type===null){let x=n,E="";for(;x<e.length;){let w=e.charAt(x++);if(o||w==="\\"){o=!o,E+=w;continue}if(s){x===l+1?(w==="^"||w==="!")&&(u=!0):w==="]"&&!(x===l+2&&u)&&(s=!1),E+=w;continue}else if(w==="["){s=!0,l=x,u=!1,E+=w;continue}if(!i.noext&&JM(w)&&e.charAt(x)==="("){r.push(E),E="";let U=new t(w,r);x=t.#y(e,U,x,i),r.push(U);continue}E+=w}return r.push(E),x}let m=n+1,d=new t(null,r),g=[],y="";for(;m<e.length;){let x=e.charAt(m++);if(o||x==="\\"){o=!o,y+=x;continue}if(s){m===l+1?(x==="^"||x==="!")&&(u=!0):x==="]"&&!(m===l+2&&u)&&(s=!1),y+=x;continue}else if(x==="["){s=!0,l=m,u=!1,y+=x;continue}if(JM(x)&&e.charAt(m)==="("){d.push(y),y="";let E=new t(x,d);d.push(E),m=t.#y(e,E,m,i);continue}if(x==="|"){d.push(y),y="",g.push(d),d=new t(null,r);continue}if(x===")")return y===""&&r.#n.length===0&&(r.#i=!0),d.push(y),y="",r.push(...g,d),m;y+=x}return r.type=null,r.#t=void 0,r.#n=[e.substring(n-1)],m}static fromGlob(e,r={}){let n=new t(null,void 0,r);return t.#y(e,n,0,r),n}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[r,n,i,o]=this.toRegExpSource();if(!(i||this.#t||this.#s.nocase&&!this.#s.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return n;let l=(this.#s.nocase?"i":"")+(o?"u":"");return Object.assign(new RegExp(`^${r}$`,l),{_src:r,_glob:e})}get options(){return this.#s}toRegExpSource(e){let r=e??!!this.#s.dot;if(this.#e===this&&this.#h(),!this.type){let u=this.isStart()&&this.isEnd(),m=this.#n.map(x=>{let[E,w,U,V]=typeof x=="string"?t.#m(x,this.#t,u):x.toRegExpSource(e);return this.#t=this.#t||U,this.#o=this.#o||V,E}).join(""),d="";if(this.isStart()&&typeof this.#n[0]=="string"&&!(this.#n.length===1&&fQ.has(this.#n[0]))){let E=mQ,w=r&&E.has(m.charAt(0))||m.startsWith("\\.")&&E.has(m.charAt(2))||m.startsWith("\\.\\.")&&E.has(m.charAt(4)),U=!r&&!e&&E.has(m.charAt(0));d=w?pQ:U?Eh:""}let g="";return this.isEnd()&&this.#e.#p&&this.#a?.type==="!"&&(g="(?:$|\\/)"),[d+m+g,Cn(m),this.#t=!!this.#t,this.#o]}let n=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",o=this.#f(r);if(this.isStart()&&this.isEnd()&&!o&&this.type!=="!"){let u=this.toString();return this.#n=[u],this.type=null,this.#t=void 0,[u,Cn(this.toString()),!1,!1]}let s=!n||e||r||!Eh?"":this.#f(!0);s===o&&(s=""),s&&(o=`(?:${o})(?:${s})*?`);let l="";if(this.type==="!"&&this.#i)l=(this.isStart()&&!r?Eh:"")+tL;else{let u=this.type==="!"?"))"+(this.isStart()&&!r&&!e?Eh:"")+eL+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&s?")":this.type==="*"&&s?")?":`)${this.type}`;l=i+o+u}return[l,Cn(o),this.#t=!!this.#t,this.#o]}#f(e){return this.#n.map(r=>{if(typeof r=="string")throw new Error("string type in extglob ast??");let[n,i,o,s]=r.toRegExpSource(e);return this.#o=this.#o||s,n}).filter(r=>!(this.isStart()&&this.isEnd())||!!r).join("|")}static#m(e,r,n=!1){let i=!1,o="",s=!1;for(let l=0;l<e.length;l++){let u=e.charAt(l);if(i){i=!1,o+=(dQ.has(u)?"\\":"")+u;continue}if(u==="\\"){l===e.length-1?o+="\\\\":i=!0;continue}if(u==="["){let[m,d,g,y]=XM(e,l);if(g){o+=m,s=s||d,l+=g-1,r=r||y;continue}}if(u==="*"){n&&e==="*"?o+=tL:o+=eL,r=!0;continue}if(u==="?"){o+=_v,r=!0;continue}o+=gQ(u)}return[o,Cn(e),!!r,s]}};var oc=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&");var dr=(t,e,r={})=>(ou(e),!r.nocomment&&e.charAt(0)==="#"?!1:new qr(e,r).match(t)),hQ=/^\*+([^+@!?\*\[\(]*)$/,yQ=t=>e=>!e.startsWith(".")&&e.endsWith(t),TQ=t=>e=>e.endsWith(t),xQ=t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),SQ=t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),vQ=/^\*+\.\*+$/,bQ=t=>!t.startsWith(".")&&t.includes("."),wQ=t=>t!=="."&&t!==".."&&t.includes("."),EQ=/^\.\*+$/,_Q=t=>t!=="."&&t!==".."&&t.startsWith("."),RQ=/^\*+$/,kQ=t=>t.length!==0&&!t.startsWith("."),AQ=t=>t.length!==0&&t!=="."&&t!=="..",PQ=/^\?+([^+@!?\*\[\(]*)?$/,DQ=([t,e=""])=>{let r=iL([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},MQ=([t,e=""])=>{let r=oL([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},LQ=([t,e=""])=>{let r=oL([t]);return e?n=>r(n)&&n.endsWith(e):r},FQ=([t,e=""])=>{let r=iL([t]);return e?n=>r(n)&&n.endsWith(e):r},iL=([t])=>{let e=t.length;return r=>r.length===e&&!r.startsWith(".")},oL=([t])=>{let e=t.length;return r=>r.length===e&&r!=="."&&r!==".."},aL=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",rL={win32:{sep:"\\"},posix:{sep:"/"}},IQ=aL==="win32"?rL.win32.sep:rL.posix.sep;dr.sep=IQ;var Yt=Symbol("globstar **");dr.GLOBSTAR=Yt;var CQ="[^/]",OQ=CQ+"*?",NQ="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",UQ="(?:(?!(?:\\/|^)\\.).)*?",HQ=(t,e={})=>r=>dr(r,t,e);dr.filter=HQ;var yn=(t,e={})=>Object.assign({},t,e),BQ=t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return dr;let e=dr;return Object.assign((n,i,o={})=>e(n,i,yn(t,o)),{Minimatch:class extends e.Minimatch{constructor(i,o={}){super(i,yn(t,o))}static defaults(i){return e.defaults(yn(t,i)).Minimatch}},AST:class extends e.AST{constructor(i,o,s={}){super(i,o,yn(t,s))}static fromGlob(i,o={}){return e.AST.fromGlob(i,yn(t,o))}},unescape:(n,i={})=>e.unescape(n,yn(t,i)),escape:(n,i={})=>e.escape(n,yn(t,i)),filter:(n,i={})=>e.filter(n,yn(t,i)),defaults:n=>e.defaults(yn(t,n)),makeRe:(n,i={})=>e.makeRe(n,yn(t,i)),braceExpand:(n,i={})=>e.braceExpand(n,yn(t,i)),match:(n,i,o={})=>e.match(n,i,yn(t,o)),sep:e.sep,GLOBSTAR:Yt})};dr.defaults=BQ;var sL=(t,e={})=>(ou(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:YM(t));dr.braceExpand=sL;var VQ=(t,e={})=>new qr(t,e).makeRe();dr.makeRe=VQ;var WQ=(t,e,r={})=>{let n=new qr(e,r);return t=t.filter(i=>n.match(i)),n.options.nonull&&!t.length&&t.push(e),t};dr.match=WQ;var nL=/[?*]|[+@!]\(.*?\)|\[|\]/,$Q=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),qr=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,r={}){ou(e),r=r||{},this.options=r,this.pattern=e,this.platform=r.platform||aL,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!r.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!r.nonegate,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=r.windowsNoMagicRoot!==void 0?r.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let r of e)if(typeof r!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],r.debug&&(this.debug=(...o)=>console.error(...o)),this.debug(this.pattern,this.globSet);let n=this.globSet.map(o=>this.slashSplit(o));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let i=this.globParts.map((o,s,l)=>{if(this.isWindows&&this.windowsNoMagicRoot){let u=o[0]===""&&o[1]===""&&(o[2]==="?"||!nL.test(o[2]))&&!nL.test(o[3]),m=/^[a-z]:/i.test(o[0]);if(u)return[...o.slice(0,4),...o.slice(4).map(d=>this.parse(d))];if(m)return[o[0],...o.slice(1).map(d=>this.parse(d))]}return o.map(u=>this.parse(u))});if(this.debug(this.pattern,i),this.set=i.filter(o=>o.indexOf(!1)===-1),this.isWindows)for(let o=0;o<this.set.length;o++){let s=this.set[o];s[0]===""&&s[1]===""&&this.globParts[o][2]==="?"&&typeof s[3]=="string"&&/^[a-z]:$/i.test(s[3])&&(s[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let n=0;n<e.length;n++)for(let i=0;i<e[n].length;i++)e[n][i]==="**"&&(e[n][i]="*");let{optimizationLevel:r=1}=this.options;return r>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):r>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(r=>{let n=-1;for(;(n=r.indexOf("**",n+1))!==-1;){let i=n;for(;r[i+1]==="**";)i++;i!==n&&r.splice(n,i-n)}return r})}levelOneOptimize(e){return e.map(r=>(r=r.reduce((n,i)=>{let o=n[n.length-1];return i==="**"&&o==="**"?n:i===".."&&o&&o!==".."&&o!=="."&&o!=="**"?(n.pop(),n):(n.push(i),n)},[]),r.length===0?[""]:r))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let r=!1;do{if(r=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let o=e[i];i===1&&o===""&&e[0]===""||(o==="."||o==="")&&(r=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(r=!0,e.pop())}let n=0;for(;(n=e.indexOf("..",n+1))!==-1;){let i=e[n-1];i&&i!=="."&&i!==".."&&i!=="**"&&(r=!0,e.splice(n-1,2),n-=2)}}while(r);return e.length===0?[""]:e}firstPhasePreProcess(e){let r=!1;do{r=!1;for(let n of e){let i=-1;for(;(i=n.indexOf("**",i+1))!==-1;){let s=i;for(;n[s+1]==="**";)s++;s>i&&n.splice(i+1,s-i);let l=n[i+1],u=n[i+2],m=n[i+3];if(l!==".."||!u||u==="."||u===".."||!m||m==="."||m==="..")continue;r=!0,n.splice(i,1);let d=n.slice(0);d[i]="**",e.push(d),i--}if(!this.preserveMultipleSlashes){for(let s=1;s<n.length-1;s++){let l=n[s];s===1&&l===""&&n[0]===""||(l==="."||l==="")&&(r=!0,n.splice(s,1),s--)}n[0]==="."&&n.length===2&&(n[1]==="."||n[1]==="")&&(r=!0,n.pop())}let o=0;for(;(o=n.indexOf("..",o+1))!==-1;){let s=n[o-1];if(s&&s!=="."&&s!==".."&&s!=="**"){r=!0;let u=o===1&&n[o+1]==="**"?["."]:[];n.splice(o-1,2,...u),n.length===0&&n.push(""),o-=2}}}}while(r);return e}secondPhasePreProcess(e){for(let r=0;r<e.length-1;r++)for(let n=r+1;n<e.length;n++){let i=this.partsMatch(e[r],e[n],!this.preserveMultipleSlashes);if(i){e[r]=[],e[n]=i;break}}return e.filter(r=>r.length)}partsMatch(e,r,n=!1){let i=0,o=0,s=[],l="";for(;i<e.length&&o<r.length;)if(e[i]===r[o])s.push(l==="b"?r[o]:e[i]),i++,o++;else if(n&&e[i]==="**"&&r[o]===e[i+1])s.push(e[i]),i++;else if(n&&r[o]==="**"&&e[i]===r[o+1])s.push(r[o]),o++;else if(e[i]==="*"&&r[o]&&(this.options.dot||!r[o].startsWith("."))&&r[o]!=="**"){if(l==="b")return!1;l="a",s.push(e[i]),i++,o++}else if(r[o]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(l==="a")return!1;l="b",s.push(r[o]),i++,o++}else return!1;return e.length===r.length&&s}parseNegate(){if(this.nonegate)return;let e=this.pattern,r=!1,n=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)r=!r,n++;n&&(this.pattern=e.slice(n)),this.negate=r}matchOne(e,r,n=!1){let i=this.options;if(this.isWindows){let w=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),U=!w&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),V=typeof r[0]=="string"&&/^[a-z]:$/i.test(r[0]),q=!V&&r[0]===""&&r[1]===""&&r[2]==="?"&&typeof r[3]=="string"&&/^[a-z]:$/i.test(r[3]),ne=U?3:w?0:void 0,se=q?3:V?0:void 0;if(typeof ne=="number"&&typeof se=="number"){let[de,ve]=[e[ne],r[se]];de.toLowerCase()===ve.toLowerCase()&&(r[se]=de,se>ne?r=r.slice(se):ne>se&&(e=e.slice(ne)))}}let{optimizationLevel:o=1}=this.options;o>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var s=0,l=0,u=e.length,m=r.length;s<u&&l<m;s++,l++){this.debug("matchOne loop");var d=r[l],g=e[s];if(this.debug(r,d,g),d===!1)return!1;if(d===Yt){this.debug("GLOBSTAR",[r,d,g]);var y=s,x=l+1;if(x===m){for(this.debug("** at the end");s<u;s++)if(e[s]==="."||e[s]===".."||!i.dot&&e[s].charAt(0)===".")return!1;return!0}for(;y<u;){var E=e[y];if(this.debug(`
globstar while`,e,y,r,x,E),this.matchOne(e.slice(y),r.slice(x),n))return this.debug("globstar found match!",y,u,E),!0;if(E==="."||E===".."||!i.dot&&E.charAt(0)==="."){this.debug("dot detected!",e,y,r,x);break}this.debug("globstar swallow a segment, and continue"),y++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,y,r,x),y===u))}let w;if(typeof d=="string"?(w=g===d,this.debug("string match",d,g,w)):(w=d.test(g),this.debug("pattern match",d,g,w)),!w)return!1}if(s===u&&l===m)return!0;if(s===u)return n;if(l===m)return s===u-1&&e[s]==="";throw new Error("wtf?")}braceExpand(){return sL(this.pattern,this.options)}parse(e){ou(e);let r=this.options;if(e==="**")return Yt;if(e==="")return"";let n,i=null;(n=e.match(RQ))?i=r.dot?AQ:kQ:(n=e.match(hQ))?i=(r.nocase?r.dot?SQ:xQ:r.dot?TQ:yQ)(n[1]):(n=e.match(PQ))?i=(r.nocase?r.dot?MQ:DQ:r.dot?LQ:FQ)(n):(n=e.match(vQ))?i=r.dot?wQ:bQ:(n=e.match(EQ))&&(i=_Q);let o=ic.fromGlob(e,this.options).toMMPattern();return i&&typeof o=="object"&&Reflect.defineProperty(o,"test",{value:i}),o}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let r=this.options,n=r.noglobstar?OQ:r.dot?NQ:UQ,i=new Set(r.nocase?["i"]:[]),o=e.map(u=>{let m=u.map(d=>{if(d instanceof RegExp)for(let g of d.flags.split(""))i.add(g);return typeof d=="string"?$Q(d):d===Yt?Yt:d._src});return m.forEach((d,g)=>{let y=m[g+1],x=m[g-1];d!==Yt||x===Yt||(x===void 0?y!==void 0&&y!==Yt?m[g+1]="(?:\\/|"+n+"\\/)?"+y:m[g]=n:y===void 0?m[g-1]=x+"(?:\\/|"+n+")?":y!==Yt&&(m[g-1]=x+"(?:\\/|\\/"+n+"\\/)"+y,m[g+1]=Yt))}),m.filter(d=>d!==Yt).join("/")}).join("|"),[s,l]=e.length>1?["(?:",")"]:["",""];o="^"+s+o+l+"$",this.negate&&(o="^(?!"+o+").+$");try{this.regexp=new RegExp(o,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;let n=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let o=this.set;this.debug(this.pattern,"set",o);let s=i[i.length-1];if(!s)for(let l=i.length-2;!s&&l>=0;l--)s=i[l];for(let l=0;l<o.length;l++){let u=o[l],m=i;if(n.matchBase&&u.length===1&&(m=[s]),this.matchOne(m,u,r))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return dr.defaults(e).Minimatch}};dr.AST=ic;dr.Minimatch=qr;dr.escape=oc;dr.unescape=Cn;var ML=require("node:url");var ac=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,lL=new Set,Rv=typeof process=="object"&&process?process:{},uL=(t,e,r,n)=>{typeof Rv.emitWarning=="function"?Rv.emitWarning(t,e,r,n):console.error(`[${r}] ${e}: ${t}`)},_h=globalThis.AbortController,cL=globalThis.AbortSignal;if(typeof _h>"u"){cL=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(n,i){this._onabort.push(i)}},_h=class{constructor(){e()}signal=new cL;abort(n){if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(let i of this.signal._onabort)i(n);this.signal.onabort?.(n)}}};let t=Rv.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{t&&(t=!1,uL("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var jQ=t=>!lL.has(t),uCe=Symbol("type"),vo=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),pL=t=>vo(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?sc:null:null,sc=class extends Array{constructor(e){super(e),this.fill(0)}},kv=class t{heap;length;static#e=!1;static create(e){let r=pL(e);if(!r)return[];t.#e=!0;let n=new t(e,r);return t.#e=!1,n}constructor(e,r){if(!t.#e)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},su=class t{#e;#t;#o;#n;#a;#S;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#l;#p;#s;#c;#i;#h;#y;#f;#m;#w;#g;#E;#_;#x;#v;#b;#d;static unsafeExposeInternals(e){return{starts:e.#_,ttls:e.#x,sizes:e.#E,keyMap:e.#s,keyList:e.#c,valList:e.#i,next:e.#h,prev:e.#y,get head(){return e.#f},get tail(){return e.#m},free:e.#w,isBackgroundFetch:r=>e.#u(r),backgroundFetch:(r,n,i,o)=>e.#U(r,n,i,o),moveToTail:r=>e.#B(r),indexes:r=>e.#k(r),rindexes:r=>e.#A(r),isStale:r=>e.#T(r)}}get max(){return this.#e}get maxSize(){return this.#t}get calculatedSize(){return this.#p}get size(){return this.#l}get fetchMethod(){return this.#a}get memoMethod(){return this.#S}get dispose(){return this.#o}get disposeAfter(){return this.#n}constructor(e){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:s,updateAgeOnHas:l,allowStale:u,dispose:m,disposeAfter:d,noDisposeOnSet:g,noUpdateTTL:y,maxSize:x=0,maxEntrySize:E=0,sizeCalculation:w,fetchMethod:U,memoMethod:V,noDeleteOnFetchRejection:q,noDeleteOnStaleGet:ne,allowStaleOnFetchRejection:se,allowStaleOnFetchAbort:de,ignoreFetchAbort:ve}=e;if(r!==0&&!vo(r))throw new TypeError("max option must be a nonnegative integer");let Et=r?pL(r):Array;if(!Et)throw new Error("invalid max value: "+r);if(this.#e=r,this.#t=x,this.maxEntrySize=E||this.#t,this.sizeCalculation=w,this.sizeCalculation){if(!this.#t&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(V!==void 0&&typeof V!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#S=V,U!==void 0&&typeof U!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#a=U,this.#b=!!U,this.#s=new Map,this.#c=new Array(r).fill(void 0),this.#i=new Array(r).fill(void 0),this.#h=new Et(r),this.#y=new Et(r),this.#f=0,this.#m=0,this.#w=kv.create(r),this.#l=0,this.#p=0,typeof m=="function"&&(this.#o=m),typeof d=="function"?(this.#n=d,this.#g=[]):(this.#n=void 0,this.#g=void 0),this.#v=!!this.#o,this.#d=!!this.#n,this.noDisposeOnSet=!!g,this.noUpdateTTL=!!y,this.noDeleteOnFetchRejection=!!q,this.allowStaleOnFetchRejection=!!se,this.allowStaleOnFetchAbort=!!de,this.ignoreFetchAbort=!!ve,this.maxEntrySize!==0){if(this.#t!==0&&!vo(this.#t))throw new TypeError("maxSize must be a positive integer if specified");if(!vo(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#D()}if(this.allowStale=!!u,this.noDeleteOnStaleGet=!!ne,this.updateAgeOnGet=!!s,this.updateAgeOnHas=!!l,this.ttlResolution=vo(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=n||0,this.ttl){if(!vo(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#P()}if(this.#e===0&&this.ttl===0&&this.#t===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#e&&!this.#t){let yr="LRU_CACHE_UNBOUNDED";jQ(yr)&&(lL.add(yr),uL("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",yr,t))}}getRemainingTTL(e){return this.#s.has(e)?1/0:0}#P(){let e=new sc(this.#e),r=new sc(this.#e);this.#x=e,this.#_=r,this.#L=(o,s,l=ac.now())=>{if(r[o]=s!==0?l:0,e[o]=s,s!==0&&this.ttlAutopurge){let u=setTimeout(()=>{this.#T(o)&&this.#M(this.#c[o],"expire")},s+1);u.unref&&u.unref()}},this.#R=o=>{r[o]=e[o]!==0?ac.now():0},this.#r=(o,s)=>{if(e[s]){let l=e[s],u=r[s];if(!l||!u)return;o.ttl=l,o.start=u,o.now=n||i();let m=o.now-u;o.remainingTTL=l-m}};let n=0,i=()=>{let o=ac.now();if(this.ttlResolution>0){n=o;let s=setTimeout(()=>n=0,this.ttlResolution);s.unref&&s.unref()}return o};this.getRemainingTTL=o=>{let s=this.#s.get(o);if(s===void 0)return 0;let l=e[s],u=r[s];if(!l||!u)return 1/0;let m=(n||i())-u;return l-m},this.#T=o=>{let s=r[o],l=e[o];return!!l&&!!s&&(n||i())-s>l}}#R=()=>{};#r=()=>{};#L=()=>{};#T=()=>!1;#D(){let e=new sc(this.#e);this.#p=0,this.#E=e,this.#F=r=>{this.#p-=e[r],e[r]=0},this.#C=(r,n,i,o)=>{if(this.#u(n))return 0;if(!vo(i))if(o){if(typeof o!="function")throw new TypeError("sizeCalculation must be a function");if(i=o(n,r),!vo(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#I=(r,n,i)=>{if(e[r]=n,this.#t){let o=this.#t-e[r];for(;this.#p>o;)this.#N(!0)}this.#p+=e[r],i&&(i.entrySize=n,i.totalCalculatedSize=this.#p)}}#F=e=>{};#I=(e,r,n)=>{};#C=(e,r,n,i)=>{if(n||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#k({allowStale:e=this.allowStale}={}){if(this.#l)for(let r=this.#m;!(!this.#O(r)||((e||!this.#T(r))&&(yield r),r===this.#f));)r=this.#y[r]}*#A({allowStale:e=this.allowStale}={}){if(this.#l)for(let r=this.#f;!(!this.#O(r)||((e||!this.#T(r))&&(yield r),r===this.#m));)r=this.#h[r]}#O(e){return e!==void 0&&this.#s.get(this.#c[e])===e}*entries(){for(let e of this.#k())this.#i[e]!==void 0&&this.#c[e]!==void 0&&!this.#u(this.#i[e])&&(yield[this.#c[e],this.#i[e]])}*rentries(){for(let e of this.#A())this.#i[e]!==void 0&&this.#c[e]!==void 0&&!this.#u(this.#i[e])&&(yield[this.#c[e],this.#i[e]])}*keys(){for(let e of this.#k()){let r=this.#c[e];r!==void 0&&!this.#u(this.#i[e])&&(yield r)}}*rkeys(){for(let e of this.#A()){let r=this.#c[e];r!==void 0&&!this.#u(this.#i[e])&&(yield r)}}*values(){for(let e of this.#k())this.#i[e]!==void 0&&!this.#u(this.#i[e])&&(yield this.#i[e])}*rvalues(){for(let e of this.#A())this.#i[e]!==void 0&&!this.#u(this.#i[e])&&(yield this.#i[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,r={}){for(let n of this.#k()){let i=this.#i[n],o=this.#u(i)?i.__staleWhileFetching:i;if(o!==void 0&&e(o,this.#c[n],this))return this.get(this.#c[n],r)}}forEach(e,r=this){for(let n of this.#k()){let i=this.#i[n],o=this.#u(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#c[n],this)}}rforEach(e,r=this){for(let n of this.#A()){let i=this.#i[n],o=this.#u(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#c[n],this)}}purgeStale(){let e=!1;for(let r of this.#A({allowStale:!0}))this.#T(r)&&(this.#M(this.#c[r],"expire"),e=!0);return e}info(e){let r=this.#s.get(e);if(r===void 0)return;let n=this.#i[r],i=this.#u(n)?n.__staleWhileFetching:n;if(i===void 0)return;let o={value:i};if(this.#x&&this.#_){let s=this.#x[r],l=this.#_[r];if(s&&l){let u=s-(ac.now()-l);o.ttl=u,o.start=Date.now()}}return this.#E&&(o.size=this.#E[r]),o}dump(){let e=[];for(let r of this.#k({allowStale:!0})){let n=this.#c[r],i=this.#i[r],o=this.#u(i)?i.__staleWhileFetching:i;if(o===void 0||n===void 0)continue;let s={value:o};if(this.#x&&this.#_){s.ttl=this.#x[r];let l=ac.now()-this.#_[r];s.start=Math.floor(Date.now()-l)}this.#E&&(s.size=this.#E[r]),e.unshift([n,s])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let i=Date.now()-n.start;n.start=ac.now()-i}this.set(r,n.value,n)}}set(e,r,n={}){if(r===void 0)return this.delete(e),this;let{ttl:i=this.ttl,start:o,noDisposeOnSet:s=this.noDisposeOnSet,sizeCalculation:l=this.sizeCalculation,status:u}=n,{noUpdateTTL:m=this.noUpdateTTL}=n,d=this.#C(e,r,n.size||0,l);if(this.maxEntrySize&&d>this.maxEntrySize)return u&&(u.set="miss",u.maxEntrySizeExceeded=!0),this.#M(e,"set"),this;let g=this.#l===0?void 0:this.#s.get(e);if(g===void 0)g=this.#l===0?this.#m:this.#w.length!==0?this.#w.pop():this.#l===this.#e?this.#N(!1):this.#l,this.#c[g]=e,this.#i[g]=r,this.#s.set(e,g),this.#h[this.#m]=g,this.#y[g]=this.#m,this.#m=g,this.#l++,this.#I(g,d,u),u&&(u.set="add"),m=!1;else{this.#B(g);let y=this.#i[g];if(r!==y){if(this.#b&&this.#u(y)){y.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:x}=y;x!==void 0&&!s&&(this.#v&&this.#o?.(x,e,"set"),this.#d&&this.#g?.push([x,e,"set"]))}else s||(this.#v&&this.#o?.(y,e,"set"),this.#d&&this.#g?.push([y,e,"set"]));if(this.#F(g),this.#I(g,d,u),this.#i[g]=r,u){u.set="replace";let x=y&&this.#u(y)?y.__staleWhileFetching:y;x!==void 0&&(u.oldValue=x)}}else u&&(u.set="update")}if(i!==0&&!this.#x&&this.#P(),this.#x&&(m||this.#L(g,i,o),u&&this.#r(u,g)),!s&&this.#d&&this.#g){let y=this.#g,x;for(;x=y?.shift();)this.#n?.(...x)}return this}pop(){try{for(;this.#l;){let e=this.#i[this.#f];if(this.#N(!0),this.#u(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#d&&this.#g){let e=this.#g,r;for(;r=e?.shift();)this.#n?.(...r)}}}#N(e){let r=this.#f,n=this.#c[r],i=this.#i[r];return this.#b&&this.#u(i)?i.__abortController.abort(new Error("evicted")):(this.#v||this.#d)&&(this.#v&&this.#o?.(i,n,"evict"),this.#d&&this.#g?.push([i,n,"evict"])),this.#F(r),e&&(this.#c[r]=void 0,this.#i[r]=void 0,this.#w.push(r)),this.#l===1?(this.#f=this.#m=0,this.#w.length=0):this.#f=this.#h[r],this.#s.delete(n),this.#l--,r}has(e,r={}){let{updateAgeOnHas:n=this.updateAgeOnHas,status:i}=r,o=this.#s.get(e);if(o!==void 0){let s=this.#i[o];if(this.#u(s)&&s.__staleWhileFetching===void 0)return!1;if(this.#T(o))i&&(i.has="stale",this.#r(i,o));else return n&&this.#R(o),i&&(i.has="hit",this.#r(i,o)),!0}else i&&(i.has="miss");return!1}peek(e,r={}){let{allowStale:n=this.allowStale}=r,i=this.#s.get(e);if(i===void 0||!n&&this.#T(i))return;let o=this.#i[i];return this.#u(o)?o.__staleWhileFetching:o}#U(e,r,n,i){let o=r===void 0?void 0:this.#i[r];if(this.#u(o))return o;let s=new _h,{signal:l}=n;l?.addEventListener("abort",()=>s.abort(l.reason),{signal:s.signal});let u={signal:s.signal,options:n,context:i},m=(w,U=!1)=>{let{aborted:V}=s.signal,q=n.ignoreFetchAbort&&w!==void 0;if(n.status&&(V&&!U?(n.status.fetchAborted=!0,n.status.fetchError=s.signal.reason,q&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),V&&!q&&!U)return g(s.signal.reason);let ne=x;return this.#i[r]===x&&(w===void 0?ne.__staleWhileFetching?this.#i[r]=ne.__staleWhileFetching:this.#M(e,"fetch"):(n.status&&(n.status.fetchUpdated=!0),this.set(e,w,u.options))),w},d=w=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=w),g(w)),g=w=>{let{aborted:U}=s.signal,V=U&&n.allowStaleOnFetchAbort,q=V||n.allowStaleOnFetchRejection,ne=q||n.noDeleteOnFetchRejection,se=x;if(this.#i[r]===x&&(!ne||se.__staleWhileFetching===void 0?this.#M(e,"fetch"):V||(this.#i[r]=se.__staleWhileFetching)),q)return n.status&&se.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),se.__staleWhileFetching;if(se.__returned===se)throw w},y=(w,U)=>{let V=this.#a?.(e,o,u);V&&V instanceof Promise&&V.then(q=>w(q===void 0?void 0:q),U),s.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(w(void 0),n.allowStaleOnFetchAbort&&(w=q=>m(q,!0)))})};n.status&&(n.status.fetchDispatched=!0);let x=new Promise(y).then(m,d),E=Object.assign(x,{__abortController:s,__staleWhileFetching:o,__returned:void 0});return r===void 0?(this.set(e,E,{...u.options,status:void 0}),r=this.#s.get(e)):this.#i[r]=E,E}#u(e){if(!this.#b)return!1;let r=e;return!!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof _h}async fetch(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:s=this.ttl,noDisposeOnSet:l=this.noDisposeOnSet,size:u=0,sizeCalculation:m=this.sizeCalculation,noUpdateTTL:d=this.noUpdateTTL,noDeleteOnFetchRejection:g=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:y=this.allowStaleOnFetchRejection,ignoreFetchAbort:x=this.ignoreFetchAbort,allowStaleOnFetchAbort:E=this.allowStaleOnFetchAbort,context:w,forceRefresh:U=!1,status:V,signal:q}=r;if(!this.#b)return V&&(V.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,status:V});let ne={allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,ttl:s,noDisposeOnSet:l,size:u,sizeCalculation:m,noUpdateTTL:d,noDeleteOnFetchRejection:g,allowStaleOnFetchRejection:y,allowStaleOnFetchAbort:E,ignoreFetchAbort:x,status:V,signal:q},se=this.#s.get(e);if(se===void 0){V&&(V.fetch="miss");let de=this.#U(e,se,ne,w);return de.__returned=de}else{let de=this.#i[se];if(this.#u(de)){let H=n&&de.__staleWhileFetching!==void 0;return V&&(V.fetch="inflight",H&&(V.returnedStale=!0)),H?de.__staleWhileFetching:de.__returned=de}let ve=this.#T(se);if(!U&&!ve)return V&&(V.fetch="hit"),this.#B(se),i&&this.#R(se),V&&this.#r(V,se),de;let Et=this.#U(e,se,ne,w),Tr=Et.__staleWhileFetching!==void 0&&n;return V&&(V.fetch=ve?"stale":"refresh",Tr&&ve&&(V.returnedStale=!0)),Tr?Et.__staleWhileFetching:Et.__returned=Et}}async forceFetch(e,r={}){let n=await this.fetch(e,r);if(n===void 0)throw new Error("fetch() returned undefined");return n}memo(e,r={}){let n=this.#S;if(!n)throw new Error("no memoMethod provided to constructor");let{context:i,forceRefresh:o,...s}=r,l=this.get(e,s);if(!o&&l!==void 0)return l;let u=n(e,l,{options:s,context:i});return this.set(e,u,s),u}get(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:s}=r,l=this.#s.get(e);if(l!==void 0){let u=this.#i[l],m=this.#u(u);return s&&this.#r(s,l),this.#T(l)?(s&&(s.get="stale"),m?(s&&n&&u.__staleWhileFetching!==void 0&&(s.returnedStale=!0),n?u.__staleWhileFetching:void 0):(o||this.#M(e,"expire"),s&&n&&(s.returnedStale=!0),n?u:void 0)):(s&&(s.get="hit"),m?u.__staleWhileFetching:(this.#B(l),i&&this.#R(l),u))}else s&&(s.get="miss")}#H(e,r){this.#y[r]=e,this.#h[e]=r}#B(e){e!==this.#m&&(e===this.#f?this.#f=this.#h[e]:this.#H(this.#y[e],this.#h[e]),this.#H(this.#m,e),this.#m=e)}delete(e){return this.#M(e,"delete")}#M(e,r){let n=!1;if(this.#l!==0){let i=this.#s.get(e);if(i!==void 0)if(n=!0,this.#l===1)this.#V(r);else{this.#F(i);let o=this.#i[i];if(this.#u(o)?o.__abortController.abort(new Error("deleted")):(this.#v||this.#d)&&(this.#v&&this.#o?.(o,e,r),this.#d&&this.#g?.push([o,e,r])),this.#s.delete(e),this.#c[i]=void 0,this.#i[i]=void 0,i===this.#m)this.#m=this.#y[i];else if(i===this.#f)this.#f=this.#h[i];else{let s=this.#y[i];this.#h[s]=this.#h[i];let l=this.#h[i];this.#y[l]=this.#y[i]}this.#l--,this.#w.push(i)}}if(this.#d&&this.#g?.length){let i=this.#g,o;for(;o=i?.shift();)this.#n?.(...o)}return n}clear(){return this.#V("delete")}#V(e){for(let r of this.#A({allowStale:!0})){let n=this.#i[r];if(this.#u(n))n.__abortController.abort(new Error("deleted"));else{let i=this.#c[r];this.#v&&this.#o?.(n,i,e),this.#d&&this.#g?.push([n,i,e])}}if(this.#s.clear(),this.#i.fill(void 0),this.#c.fill(void 0),this.#x&&this.#_&&(this.#x.fill(0),this.#_.fill(0)),this.#E&&this.#E.fill(0),this.#f=0,this.#m=0,this.#w.length=0,this.#p=0,this.#l=0,this.#d&&this.#g){let r=this.#g,n;for(;n=r?.shift();)this.#n?.(...n)}}};var uc=require("node:path"),vL=require("node:url"),ci=require("fs"),e7=on(require("node:fs"),1),Eo=require("node:fs/promises");var Lh=require("node:events"),Iv=on(require("node:stream"),1),hL=require("node:string_decoder"),mL=typeof process=="object"&&process?process:{stdout:null,stderr:null},zQ=t=>!!t&&typeof t=="object"&&(t instanceof wo||t instanceof Iv.default||qQ(t)||GQ(t)),qQ=t=>!!t&&typeof t=="object"&&t instanceof Lh.EventEmitter&&typeof t.pipe=="function"&&t.pipe!==Iv.default.Writable.prototype.pipe,GQ=t=>!!t&&typeof t=="object"&&t instanceof Lh.EventEmitter&&typeof t.write=="function"&&typeof t.end=="function",Li=Symbol("EOF"),Fi=Symbol("maybeEmitEnd"),bo=Symbol("emittedEnd"),Rh=Symbol("emittingEnd"),cu=Symbol("emittedError"),kh=Symbol("closed"),fL=Symbol("read"),Ah=Symbol("flush"),dL=Symbol("flushChunk"),On=Symbol("encoding"),cc=Symbol("decoder"),Nt=Symbol("flowing"),lu=Symbol("paused"),lc=Symbol("resume"),Ut=Symbol("buffer"),gr=Symbol("pipes"),Ht=Symbol("bufferLength"),Av=Symbol("bufferPush"),Ph=Symbol("bufferShift"),ir=Symbol("objectMode"),wt=Symbol("destroyed"),Pv=Symbol("error"),Dv=Symbol("emitData"),gL=Symbol("emitEnd"),Mv=Symbol("emitEnd2"),ai=Symbol("async"),Lv=Symbol("abort"),Dh=Symbol("aborted"),uu=Symbol("signal"),ba=Symbol("dataListeners"),Gr=Symbol("discarded"),pu=t=>Promise.resolve().then(t),KQ=t=>t(),QQ=t=>t==="end"||t==="finish"||t==="prefinish",YQ=t=>t instanceof ArrayBuffer||!!t&&typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,ZQ=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),Mh=class{src;dest;opts;ondrain;constructor(e,r,n){this.src=e,this.dest=r,this.opts=n,this.ondrain=()=>e[lc](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(e){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},Fv=class extends Mh{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,r,n){super(e,r,n),this.proxyErrors=i=>r.emit("error",i),e.on("error",this.proxyErrors)}},XQ=t=>!!t.objectMode,JQ=t=>!t.objectMode&&!!t.encoding&&t.encoding!=="buffer",wo=class extends Lh.EventEmitter{[Nt]=!1;[lu]=!1;[gr]=[];[Ut]=[];[ir];[On];[ai];[cc];[Li]=!1;[bo]=!1;[Rh]=!1;[kh]=!1;[cu]=null;[Ht]=0;[wt]=!1;[uu];[Dh]=!1;[ba]=0;[Gr]=!1;writable=!0;readable=!0;constructor(...e){let r=e[0]||{};if(super(),r.objectMode&&typeof r.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");XQ(r)?(this[ir]=!0,this[On]=null):JQ(r)?(this[On]=r.encoding,this[ir]=!1):(this[ir]=!1,this[On]=null),this[ai]=!!r.async,this[cc]=this[On]?new hL.StringDecoder(this[On]):null,r&&r.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[Ut]}),r&&r.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[gr]});let{signal:n}=r;n&&(this[uu]=n,n.aborted?this[Lv]():n.addEventListener("abort",()=>this[Lv]()))}get bufferLength(){return this[Ht]}get encoding(){return this[On]}set encoding(e){throw new Error("Encoding must be set at instantiation time")}setEncoding(e){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[ir]}set objectMode(e){throw new Error("objectMode must be set at instantiation time")}get async(){return this[ai]}set async(e){this[ai]=this[ai]||!!e}[Lv](){this[Dh]=!0,this.emit("abort",this[uu]?.reason),this.destroy(this[uu]?.reason)}get aborted(){return this[Dh]}set aborted(e){}write(e,r,n){if(this[Dh])return!1;if(this[Li])throw new Error("write after end");if(this[wt])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof r=="function"&&(n=r,r="utf8"),r||(r="utf8");let i=this[ai]?pu:KQ;if(!this[ir]&&!Buffer.isBuffer(e)){if(ZQ(e))e=Buffer.from(e.buffer,e.byteOffset,e.byteLength);else if(YQ(e))e=Buffer.from(e);else if(typeof e!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[ir]?(this[Nt]&&this[Ht]!==0&&this[Ah](!0),this[Nt]?this.emit("data",e):this[Av](e),this[Ht]!==0&&this.emit("readable"),n&&i(n),this[Nt]):e.length?(typeof e=="string"&&!(r===this[On]&&!this[cc]?.lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[On]&&(e=this[cc].write(e)),this[Nt]&&this[Ht]!==0&&this[Ah](!0),this[Nt]?this.emit("data",e):this[Av](e),this[Ht]!==0&&this.emit("readable"),n&&i(n),this[Nt]):(this[Ht]!==0&&this.emit("readable"),n&&i(n),this[Nt])}read(e){if(this[wt])return null;if(this[Gr]=!1,this[Ht]===0||e===0||e&&e>this[Ht])return this[Fi](),null;this[ir]&&(e=null),this[Ut].length>1&&!this[ir]&&(this[Ut]=[this[On]?this[Ut].join(""):Buffer.concat(this[Ut],this[Ht])]);let r=this[fL](e||null,this[Ut][0]);return this[Fi](),r}[fL](e,r){if(this[ir])this[Ph]();else{let n=r;e===n.length||e===null?this[Ph]():typeof n=="string"?(this[Ut][0]=n.slice(e),r=n.slice(0,e),this[Ht]-=e):(this[Ut][0]=n.subarray(e),r=n.subarray(0,e),this[Ht]-=e)}return this.emit("data",r),!this[Ut].length&&!this[Li]&&this.emit("drain"),r}end(e,r,n){return typeof e=="function"&&(n=e,e=void 0),typeof r=="function"&&(n=r,r="utf8"),e!==void 0&&this.write(e,r),n&&this.once("end",n),this[Li]=!0,this.writable=!1,(this[Nt]||!this[lu])&&this[Fi](),this}[lc](){this[wt]||(!this[ba]&&!this[gr].length&&(this[Gr]=!0),this[lu]=!1,this[Nt]=!0,this.emit("resume"),this[Ut].length?this[Ah]():this[Li]?this[Fi]():this.emit("drain"))}resume(){return this[lc]()}pause(){this[Nt]=!1,this[lu]=!0,this[Gr]=!1}get destroyed(){return this[wt]}get flowing(){return this[Nt]}get paused(){return this[lu]}[Av](e){this[ir]?this[Ht]+=1:this[Ht]+=e.length,this[Ut].push(e)}[Ph](){return this[ir]?this[Ht]-=1:this[Ht]-=this[Ut][0].length,this[Ut].shift()}[Ah](e=!1){do;while(this[dL](this[Ph]())&&this[Ut].length);!e&&!this[Ut].length&&!this[Li]&&this.emit("drain")}[dL](e){return this.emit("data",e),this[Nt]}pipe(e,r){if(this[wt])return e;this[Gr]=!1;let n=this[bo];return r=r||{},e===mL.stdout||e===mL.stderr?r.end=!1:r.end=r.end!==!1,r.proxyErrors=!!r.proxyErrors,n?r.end&&e.end():(this[gr].push(r.proxyErrors?new Fv(this,e,r):new Mh(this,e,r)),this[ai]?pu(()=>this[lc]()):this[lc]()),e}unpipe(e){let r=this[gr].find(n=>n.dest===e);r&&(this[gr].length===1?(this[Nt]&&this[ba]===0&&(this[Nt]=!1),this[gr]=[]):this[gr].splice(this[gr].indexOf(r),1),r.unpipe())}addListener(e,r){return this.on(e,r)}on(e,r){let n=super.on(e,r);if(e==="data")this[Gr]=!1,this[ba]++,!this[gr].length&&!this[Nt]&&this[lc]();else if(e==="readable"&&this[Ht]!==0)super.emit("readable");else if(QQ(e)&&this[bo])super.emit(e),this.removeAllListeners(e);else if(e==="error"&&this[cu]){let i=r;this[ai]?pu(()=>i.call(this,this[cu])):i.call(this,this[cu])}return n}removeListener(e,r){return this.off(e,r)}off(e,r){let n=super.off(e,r);return e==="data"&&(this[ba]=this.listeners("data").length,this[ba]===0&&!this[Gr]&&!this[gr].length&&(this[Nt]=!1)),n}removeAllListeners(e){let r=super.removeAllListeners(e);return(e==="data"||e===void 0)&&(this[ba]=0,!this[Gr]&&!this[gr].length&&(this[Nt]=!1)),r}get emittedEnd(){return this[bo]}[Fi](){!this[Rh]&&!this[bo]&&!this[wt]&&this[Ut].length===0&&this[Li]&&(this[Rh]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[kh]&&this.emit("close"),this[Rh]=!1)}emit(e,...r){let n=r[0];if(e!=="error"&&e!=="close"&&e!==wt&&this[wt])return!1;if(e==="data")return!this[ir]&&!n?!1:this[ai]?(pu(()=>this[Dv](n)),!0):this[Dv](n);if(e==="end")return this[gL]();if(e==="close"){if(this[kh]=!0,!this[bo]&&!this[wt])return!1;let o=super.emit("close");return this.removeAllListeners("close"),o}else if(e==="error"){this[cu]=n,super.emit(Pv,n);let o=!this[uu]||this.listeners("error").length?super.emit("error",n):!1;return this[Fi](),o}else if(e==="resume"){let o=super.emit("resume");return this[Fi](),o}else if(e==="finish"||e==="prefinish"){let o=super.emit(e);return this.removeAllListeners(e),o}let i=super.emit(e,...r);return this[Fi](),i}[Dv](e){for(let n of this[gr])n.dest.write(e)===!1&&this.pause();let r=this[Gr]?!1:super.emit("data",e);return this[Fi](),r}[gL](){return this[bo]?!1:(this[bo]=!0,this.readable=!1,this[ai]?(pu(()=>this[Mv]()),!0):this[Mv]())}[Mv](){if(this[cc]){let r=this[cc].end();if(r){for(let n of this[gr])n.dest.write(r);this[Gr]||super.emit("data",r)}}for(let r of this[gr])r.end();let e=super.emit("end");return this.removeAllListeners("end"),e}async collect(){let e=Object.assign([],{dataLength:0});this[ir]||(e.dataLength=0);let r=this.promise();return this.on("data",n=>{e.push(n),this[ir]||(e.dataLength+=n.length)}),await r,e}async concat(){if(this[ir])throw new Error("cannot concat in objectMode");let e=await this.collect();return this[On]?e.join(""):Buffer.concat(e,e.dataLength)}async promise(){return new Promise((e,r)=>{this.on(wt,()=>r(new Error("stream destroyed"))),this.on("error",n=>r(n)),this.on("end",()=>e())})}[Symbol.asyncIterator](){this[Gr]=!1;let e=!1,r=async()=>(this.pause(),e=!0,{value:void 0,done:!0});return{next:()=>{if(e)return r();let i=this.read();if(i!==null)return Promise.resolve({done:!1,value:i});if(this[Li])return r();let o,s,l=g=>{this.off("data",u),this.off("end",m),this.off(wt,d),r(),s(g)},u=g=>{this.off("error",l),this.off("end",m),this.off(wt,d),this.pause(),o({value:g,done:!!this[Li]})},m=()=>{this.off("error",l),this.off("data",u),this.off(wt,d),r(),o({done:!0,value:void 0})},d=()=>l(new Error("stream destroyed"));return new Promise((g,y)=>{s=y,o=g,this.once(wt,d),this.once("error",l),this.once("end",m),this.once("data",u)})},throw:r,return:r,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[Gr]=!1;let e=!1,r=()=>(this.pause(),this.off(Pv,r),this.off(wt,r),this.off("end",r),e=!0,{done:!0,value:void 0}),n=()=>{if(e)return r();let i=this.read();return i===null?r():{done:!1,value:i}};return this.once("end",r),this.once(Pv,r),this.once(wt,r),{next:n,throw:r,return:r,[Symbol.iterator](){return this}}}destroy(e){if(this[wt])return e?this.emit("error",e):this.emit(wt),this;this[wt]=!0,this[Gr]=!0,this[Ut].length=0,this[Ht]=0;let r=this;return typeof r.close=="function"&&!this[kh]&&r.close(),e?this.emit("error",e):this.emit(wt),this}static get isStream(){return zQ}};var t7=ci.realpathSync.native,fu={lstatSync:ci.lstatSync,readdir:ci.readdir,readdirSync:ci.readdirSync,readlinkSync:ci.readlinkSync,realpathSync:t7,promises:{lstat:Eo.lstat,readdir:Eo.readdir,readlink:Eo.readlink,realpath:Eo.realpath}},bL=t=>!t||t===fu||t===e7?fu:{...fu,...t,promises:{...fu.promises,...t.promises||{}}},wL=/^\\\\\?\\([a-z]:)\\?$/i,r7=t=>t.replace(/\//g,"\\").replace(wL,"$1\\"),n7=/[\\\/]/,xn=0,EL=1,_L=2,si=4,RL=6,kL=8,wa=10,AL=12,Tn=15,mu=~Tn,Cv=16,yL=32,du=64,Nn=128,Fh=256,Ch=512,TL=du|Nn|Ch,i7=1023,Ov=t=>t.isFile()?kL:t.isDirectory()?si:t.isSymbolicLink()?wa:t.isCharacterDevice()?_L:t.isBlockDevice()?RL:t.isSocket()?AL:t.isFIFO()?EL:xn,xL=new Map,gu=t=>{let e=xL.get(t);if(e)return e;let r=t.normalize("NFKD");return xL.set(t,r),r},SL=new Map,Ih=t=>{let e=SL.get(t);if(e)return e;let r=gu(t.toLowerCase());return SL.set(t,r),r},Oh=class extends su{constructor(){super({max:256})}},Nv=class extends su{constructor(e=16*1024){super({maxSize:e,sizeCalculation:r=>r.length+1})}},PL=Symbol("PathScurry setAsCwd"),or=class{name;root;roots;parent;nocase;isCWD=!1;#e;#t;get dev(){return this.#t}#o;get mode(){return this.#o}#n;get nlink(){return this.#n}#a;get uid(){return this.#a}#S;get gid(){return this.#S}#l;get rdev(){return this.#l}#p;get blksize(){return this.#p}#s;get ino(){return this.#s}#c;get size(){return this.#c}#i;get blocks(){return this.#i}#h;get atimeMs(){return this.#h}#y;get mtimeMs(){return this.#y}#f;get ctimeMs(){return this.#f}#m;get birthtimeMs(){return this.#m}#w;get atime(){return this.#w}#g;get mtime(){return this.#g}#E;get ctime(){return this.#E}#_;get birthtime(){return this.#_}#x;#v;#b;#d;#P;#R;#r;#L;#T;#D;get parentPath(){return(this.parent||this).fullpath()}get path(){return this.parentPath}constructor(e,r=xn,n,i,o,s,l){this.name=e,this.#x=o?Ih(e):gu(e),this.#r=r&i7,this.nocase=o,this.roots=i,this.root=n||this,this.#L=s,this.#b=l.fullpath,this.#P=l.relative,this.#R=l.relativePosix,this.parent=l.parent,this.parent?this.#e=this.parent.#e:this.#e=bL(l.fs)}depth(){return this.#v!==void 0?this.#v:this.parent?this.#v=this.parent.depth()+1:this.#v=0}childrenCache(){return this.#L}resolve(e){if(!e)return this;let r=this.getRootString(e),i=e.substring(r.length).split(this.splitSep);return r?this.getRoot(r).#F(i):this.#F(i)}#F(e){let r=this;for(let n of e)r=r.child(n);return r}children(){let e=this.#L.get(this);if(e)return e;let r=Object.assign([],{provisional:0});return this.#L.set(this,r),this.#r&=~Cv,r}child(e,r){if(e===""||e===".")return this;if(e==="..")return this.parent||this;let n=this.children(),i=this.nocase?Ih(e):gu(e);for(let u of n)if(u.#x===i)return u;let o=this.parent?this.sep:"",s=this.#b?this.#b+o+e:void 0,l=this.newChild(e,xn,{...r,parent:this,fullpath:s});return this.canReaddir()||(l.#r|=Nn),n.push(l),l}relative(){if(this.isCWD)return"";if(this.#P!==void 0)return this.#P;let e=this.name,r=this.parent;if(!r)return this.#P=this.name;let n=r.relative();return n+(!n||!r.parent?"":this.sep)+e}relativePosix(){if(this.sep==="/")return this.relative();if(this.isCWD)return"";if(this.#R!==void 0)return this.#R;let e=this.name,r=this.parent;if(!r)return this.#R=this.fullpathPosix();let n=r.relativePosix();return n+(!n||!r.parent?"":"/")+e}fullpath(){if(this.#b!==void 0)return this.#b;let e=this.name,r=this.parent;if(!r)return this.#b=this.name;let i=r.fullpath()+(r.parent?this.sep:"")+e;return this.#b=i}fullpathPosix(){if(this.#d!==void 0)return this.#d;if(this.sep==="/")return this.#d=this.fullpath();if(!this.parent){let i=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(i)?this.#d=`//?/${i}`:this.#d=i}let e=this.parent,r=e.fullpathPosix(),n=r+(!r||!e.parent?"":"/")+this.name;return this.#d=n}isUnknown(){return(this.#r&Tn)===xn}isType(e){return this[`is${e}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#r&Tn)===kL}isDirectory(){return(this.#r&Tn)===si}isCharacterDevice(){return(this.#r&Tn)===_L}isBlockDevice(){return(this.#r&Tn)===RL}isFIFO(){return(this.#r&Tn)===EL}isSocket(){return(this.#r&Tn)===AL}isSymbolicLink(){return(this.#r&wa)===wa}lstatCached(){return this.#r&yL?this:void 0}readlinkCached(){return this.#T}realpathCached(){return this.#D}readdirCached(){let e=this.children();return e.slice(0,e.provisional)}canReadlink(){if(this.#T)return!0;if(!this.parent)return!1;let e=this.#r&Tn;return!(e!==xn&&e!==wa||this.#r&Fh||this.#r&Nn)}calledReaddir(){return!!(this.#r&Cv)}isENOENT(){return!!(this.#r&Nn)}isNamed(e){return this.nocase?this.#x===Ih(e):this.#x===gu(e)}async readlink(){let e=this.#T;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=await this.#e.promises.readlink(this.fullpath()),n=(await this.parent.realpath())?.resolve(r);if(n)return this.#T=n}catch(r){this.#u(r.code);return}}readlinkSync(){let e=this.#T;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=this.#e.readlinkSync(this.fullpath()),n=this.parent.realpathSync()?.resolve(r);if(n)return this.#T=n}catch(r){this.#u(r.code);return}}#I(e){this.#r|=Cv;for(let r=e.provisional;r<e.length;r++){let n=e[r];n&&n.#C()}}#C(){this.#r&Nn||(this.#r=(this.#r|Nn)&mu,this.#k())}#k(){let e=this.children();e.provisional=0;for(let r of e)r.#C()}#A(){this.#r|=Ch,this.#O()}#O(){if(this.#r&du)return;let e=this.#r;(e&Tn)===si&&(e&=mu),this.#r=e|du,this.#k()}#N(e=""){e==="ENOTDIR"||e==="EPERM"?this.#O():e==="ENOENT"?this.#C():this.children().provisional=0}#U(e=""){e==="ENOTDIR"?this.parent.#O():e==="ENOENT"&&this.#C()}#u(e=""){let r=this.#r;r|=Fh,e==="ENOENT"&&(r|=Nn),(e==="EINVAL"||e==="UNKNOWN")&&(r&=mu),this.#r=r,e==="ENOTDIR"&&this.parent&&this.parent.#O()}#H(e,r){return this.#M(e,r)||this.#B(e,r)}#B(e,r){let n=Ov(e),i=this.newChild(e.name,n,{parent:this}),o=i.#r&Tn;return o!==si&&o!==wa&&o!==xn&&(i.#r|=du),r.unshift(i),r.provisional++,i}#M(e,r){for(let n=r.provisional;n<r.length;n++){let i=r[n];if((this.nocase?Ih(e.name):gu(e.name))===i.#x)return this.#V(e,i,n,r)}}#V(e,r,n,i){let o=r.name;return r.#r=r.#r&mu|Ov(e),o!==e.name&&(r.name=e.name),n!==i.provisional&&(n===i.length-1?i.pop():i.splice(n,1),i.unshift(r)),i.provisional++,r}async lstat(){if((this.#r&Nn)===0)try{return this.#z(await this.#e.promises.lstat(this.fullpath())),this}catch(e){this.#U(e.code)}}lstatSync(){if((this.#r&Nn)===0)try{return this.#z(this.#e.lstatSync(this.fullpath())),this}catch(e){this.#U(e.code)}}#z(e){let{atime:r,atimeMs:n,birthtime:i,birthtimeMs:o,blksize:s,blocks:l,ctime:u,ctimeMs:m,dev:d,gid:g,ino:y,mode:x,mtime:E,mtimeMs:w,nlink:U,rdev:V,size:q,uid:ne}=e;this.#w=r,this.#h=n,this.#_=i,this.#m=o,this.#p=s,this.#i=l,this.#E=u,this.#f=m,this.#t=d,this.#S=g,this.#s=y,this.#o=x,this.#g=E,this.#y=w,this.#n=U,this.#l=V,this.#c=q,this.#a=ne;let se=Ov(e);this.#r=this.#r&mu|se|yL,se!==xn&&se!==si&&se!==wa&&(this.#r|=du)}#$=[];#j=!1;#q(e){this.#j=!1;let r=this.#$.slice();this.#$.length=0,r.forEach(n=>n(null,e))}readdirCB(e,r=!1){if(!this.canReaddir()){r?e(null,[]):queueMicrotask(()=>e(null,[]));return}let n=this.children();if(this.calledReaddir()){let o=n.slice(0,n.provisional);r?e(null,o):queueMicrotask(()=>e(null,o));return}if(this.#$.push(e),this.#j)return;this.#j=!0;let i=this.fullpath();this.#e.readdir(i,{withFileTypes:!0},(o,s)=>{if(o)this.#N(o.code),n.provisional=0;else{for(let l of s)this.#H(l,n);this.#I(n)}this.#q(n.slice(0,n.provisional))})}#W;async readdir(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();if(this.#W)await this.#W;else{let n=()=>{};this.#W=new Promise(i=>n=i);try{for(let i of await this.#e.promises.readdir(r,{withFileTypes:!0}))this.#H(i,e);this.#I(e)}catch(i){this.#N(i.code),e.provisional=0}this.#W=void 0,n()}return e.slice(0,e.provisional)}readdirSync(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();try{for(let n of this.#e.readdirSync(r,{withFileTypes:!0}))this.#H(n,e);this.#I(e)}catch(n){this.#N(n.code),e.provisional=0}return e.slice(0,e.provisional)}canReaddir(){if(this.#r&TL)return!1;let e=Tn&this.#r;return e===xn||e===si||e===wa}shouldWalk(e,r){return(this.#r&si)===si&&!(this.#r&TL)&&!e.has(this)&&(!r||r(this))}async realpath(){if(this.#D)return this.#D;if(!((Ch|Fh|Nn)&this.#r))try{let e=await this.#e.promises.realpath(this.fullpath());return this.#D=this.resolve(e)}catch{this.#A()}}realpathSync(){if(this.#D)return this.#D;if(!((Ch|Fh|Nn)&this.#r))try{let e=this.#e.realpathSync(this.fullpath());return this.#D=this.resolve(e)}catch{this.#A()}}[PL](e){if(e===this)return;e.isCWD=!1,this.isCWD=!0;let r=new Set([]),n=[],i=this;for(;i&&i.parent;)r.add(i),i.#P=n.join(this.sep),i.#R=n.join("/"),i=i.parent,n.push("..");for(i=e;i&&i.parent&&!r.has(i);)i.#P=void 0,i.#R=void 0,i=i.parent}},Nh=class t extends or{sep="\\";splitSep=n7;constructor(e,r=xn,n,i,o,s,l){super(e,r,n,i,o,s,l)}newChild(e,r=xn,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}getRootString(e){return uc.win32.parse(e).root}getRoot(e){if(e=r7(e.toUpperCase()),e===this.root.name)return this.root;for(let[r,n]of Object.entries(this.roots))if(this.sameRoot(e,r))return this.roots[e]=n;return this.roots[e]=new pc(e,this).root}sameRoot(e,r=this.root.name){return e=e.toUpperCase().replace(/\//g,"\\").replace(wL,"$1\\"),e===r}},Uh=class t extends or{splitSep="/";sep="/";constructor(e,r=xn,n,i,o,s,l){super(e,r,n,i,o,s,l)}getRootString(e){return e.startsWith("/")?"/":""}getRoot(e){return this.root}newChild(e,r=xn,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}},Hh=class{root;rootPath;roots;cwd;#e;#t;#o;nocase;#n;constructor(e=process.cwd(),r,n,{nocase:i,childrenCacheSize:o=16*1024,fs:s=fu}={}){this.#n=bL(s),(e instanceof URL||e.startsWith("file://"))&&(e=(0,vL.fileURLToPath)(e));let l=r.resolve(e);this.roots=Object.create(null),this.rootPath=this.parseRootPath(l),this.#e=new Oh,this.#t=new Oh,this.#o=new Nv(o);let u=l.substring(this.rootPath.length).split(n);if(u.length===1&&!u[0]&&u.pop(),i===void 0)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=i,this.root=this.newRoot(this.#n),this.roots[this.rootPath]=this.root;let m=this.root,d=u.length-1,g=r.sep,y=this.rootPath,x=!1;for(let E of u){let w=d--;m=m.child(E,{relative:new Array(w).fill("..").join(g),relativePosix:new Array(w).fill("..").join("/"),fullpath:y+=(x?"":g)+E}),x=!0}this.cwd=m}depth(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.depth()}childrenCache(){return this.#o}resolve(...e){let r="";for(let o=e.length-1;o>=0;o--){let s=e[o];if(!(!s||s===".")&&(r=r?`${s}/${r}`:s,this.isAbsolute(s)))break}let n=this.#e.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpath();return this.#e.set(r,i),i}resolvePosix(...e){let r="";for(let o=e.length-1;o>=0;o--){let s=e[o];if(!(!s||s===".")&&(r=r?`${s}/${r}`:s,this.isAbsolute(s)))break}let n=this.#t.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpathPosix();return this.#t.set(r,i),i}relative(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relative()}relativePosix(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relativePosix()}basename(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.name}dirname(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),(e.parent||e).fullpath()}async readdir(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof or||(r=e,e=this.cwd);let{withFileTypes:n}=r;if(e.canReaddir()){let i=await e.readdir();return n?i:i.map(o=>o.name)}else return[]}readdirSync(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof or||(r=e,e=this.cwd);let{withFileTypes:n=!0}=r;return e.canReaddir()?n?e.readdirSync():e.readdirSync().map(i=>i.name):[]}async lstat(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstat()}lstatSync(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstatSync()}async readlink(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof or||(r=e.withFileTypes,e=this.cwd);let n=await e.readlink();return r?n:n?.fullpath()}readlinkSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof or||(r=e.withFileTypes,e=this.cwd);let n=e.readlinkSync();return r?n:n?.fullpath()}async realpath(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof or||(r=e.withFileTypes,e=this.cwd);let n=await e.realpath();return r?n:n?.fullpath()}realpathSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof or||(r=e.withFileTypes,e=this.cwd);let n=e.realpathSync();return r?n:n?.fullpath()}async walk(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof or||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=[];(!o||o(e))&&l.push(n?e:e.fullpath());let u=new Set,m=(g,y)=>{u.add(g),g.readdirCB((x,E)=>{if(x)return y(x);let w=E.length;if(!w)return y();let U=()=>{--w===0&&y()};for(let V of E)(!o||o(V))&&l.push(n?V:V.fullpath()),i&&V.isSymbolicLink()?V.realpath().then(q=>q?.isUnknown()?q.lstat():q).then(q=>q?.shouldWalk(u,s)?m(q,U):U()):V.shouldWalk(u,s)?m(V,U):U()},!0)},d=e;return new Promise((g,y)=>{m(d,x=>{if(x)return y(x);g(l)})})}walkSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof or||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=[];(!o||o(e))&&l.push(n?e:e.fullpath());let u=new Set([e]);for(let m of u){let d=m.readdirSync();for(let g of d){(!o||o(g))&&l.push(n?g:g.fullpath());let y=g;if(g.isSymbolicLink()){if(!(i&&(y=g.realpathSync())))continue;y.isUnknown()&&y.lstatSync()}y.shouldWalk(u,s)&&u.add(y)}}return l}[Symbol.asyncIterator](){return this.iterate()}iterate(e=this.cwd,r={}){return typeof e=="string"?e=this.cwd.resolve(e):e instanceof or||(r=e,e=this.cwd),this.stream(e,r)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof or||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r;(!o||o(e))&&(yield n?e:e.fullpath());let l=new Set([e]);for(let u of l){let m=u.readdirSync();for(let d of m){(!o||o(d))&&(yield n?d:d.fullpath());let g=d;if(d.isSymbolicLink()){if(!(i&&(g=d.realpathSync())))continue;g.isUnknown()&&g.lstatSync()}g.shouldWalk(l,s)&&l.add(g)}}}stream(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof or||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=new wo({objectMode:!0});(!o||o(e))&&l.write(n?e:e.fullpath());let u=new Set,m=[e],d=0,g=()=>{let y=!1;for(;!y;){let x=m.shift();if(!x){d===0&&l.end();return}d++,u.add(x);let E=(U,V,q=!1)=>{if(U)return l.emit("error",U);if(i&&!q){let ne=[];for(let se of V)se.isSymbolicLink()&&ne.push(se.realpath().then(de=>de?.isUnknown()?de.lstat():de));if(ne.length){Promise.all(ne).then(()=>E(null,V,!0));return}}for(let ne of V)ne&&(!o||o(ne))&&(l.write(n?ne:ne.fullpath())||(y=!0));d--;for(let ne of V){let se=ne.realpathCached()||ne;se.shouldWalk(u,s)&&m.push(se)}y&&!l.flowing?l.once("drain",g):w||g()},w=!0;x.readdirCB(E,!0),w=!1}};return g(),l}streamSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof or||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=new wo({objectMode:!0}),u=new Set;(!o||o(e))&&l.write(n?e:e.fullpath());let m=[e],d=0,g=()=>{let y=!1;for(;!y;){let x=m.shift();if(!x){d===0&&l.end();return}d++,u.add(x);let E=x.readdirSync();for(let w of E)(!o||o(w))&&(l.write(n?w:w.fullpath())||(y=!0));d--;for(let w of E){let U=w;if(w.isSymbolicLink()){if(!(i&&(U=w.realpathSync())))continue;U.isUnknown()&&U.lstatSync()}U.shouldWalk(u,s)&&m.push(U)}}y&&!l.flowing&&l.once("drain",g)};return g(),l}chdir(e=this.cwd){let r=this.cwd;this.cwd=typeof e=="string"?this.cwd.resolve(e):e,this.cwd[PL](r)}},pc=class extends Hh{sep="\\";constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,uc.win32,"\\",{...r,nocase:n}),this.nocase=n;for(let i=this.cwd;i;i=i.parent)i.nocase=this.nocase}parseRootPath(e){return uc.win32.parse(e).root.toUpperCase()}newRoot(e){return new Nh(this.rootPath,si,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")||e.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(e)}},mc=class extends Hh{sep="/";constructor(e=process.cwd(),r={}){let{nocase:n=!1}=r;super(e,uc.posix,"/",{...r,nocase:n}),this.nocase=n}parseRootPath(e){return"/"}newRoot(e){return new Uh(this.rootPath,si,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")}},hu=class extends mc{constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,{...r,nocase:n})}},gCe=process.platform==="win32"?Nh:Uh,DL=process.platform==="win32"?pc:process.platform==="darwin"?hu:mc;var o7=t=>t.length>=1,a7=t=>t.length>=1,fc=class t{#e;#t;#o;length;#n;#a;#S;#l;#p;#s;#c=!0;constructor(e,r,n,i){if(!o7(e))throw new TypeError("empty pattern list");if(!a7(r))throw new TypeError("empty glob list");if(r.length!==e.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=e.length,n<0||n>=this.length)throw new TypeError("index out of range");if(this.#e=e,this.#t=r,this.#o=n,this.#n=i,this.#o===0){if(this.isUNC()){let[o,s,l,u,...m]=this.#e,[d,g,y,x,...E]=this.#t;m[0]===""&&(m.shift(),E.shift());let w=[o,s,l,u,""].join("/"),U=[d,g,y,x,""].join("/");this.#e=[w,...m],this.#t=[U,...E],this.length=this.#e.length}else if(this.isDrive()||this.isAbsolute()){let[o,...s]=this.#e,[l,...u]=this.#t;s[0]===""&&(s.shift(),u.shift());let m=o+"/",d=l+"/";this.#e=[m,...s],this.#t=[d,...u],this.length=this.#e.length}}}pattern(){return this.#e[this.#o]}isString(){return typeof this.#e[this.#o]=="string"}isGlobstar(){return this.#e[this.#o]===Yt}isRegExp(){return this.#e[this.#o]instanceof RegExp}globString(){return this.#S=this.#S||(this.#o===0?this.isAbsolute()?this.#t[0]+this.#t.slice(1).join("/"):this.#t.join("/"):this.#t.slice(this.#o).join("/"))}hasMore(){return this.length>this.#o+1}rest(){return this.#a!==void 0?this.#a:this.hasMore()?(this.#a=new t(this.#e,this.#t,this.#o+1,this.#n),this.#a.#s=this.#s,this.#a.#p=this.#p,this.#a.#l=this.#l,this.#a):this.#a=null}isUNC(){let e=this.#e;return this.#p!==void 0?this.#p:this.#p=this.#n==="win32"&&this.#o===0&&e[0]===""&&e[1]===""&&typeof e[2]=="string"&&!!e[2]&&typeof e[3]=="string"&&!!e[3]}isDrive(){let e=this.#e;return this.#l!==void 0?this.#l:this.#l=this.#n==="win32"&&this.#o===0&&this.length>1&&typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0])}isAbsolute(){let e=this.#e;return this.#s!==void 0?this.#s:this.#s=e[0]===""&&e.length>1||this.isDrive()||this.isUNC()}root(){let e=this.#e[0];return typeof e=="string"&&this.isAbsolute()&&this.#o===0?e:""}checkFollowGlobstar(){return!(this.#o===0||!this.isGlobstar()||!this.#c)}markFollowGlobstar(){return this.#o===0||!this.isGlobstar()||!this.#c?!1:(this.#c=!1,!0)}};var s7=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",dc=class{relative;relativeChildren;absolute;absoluteChildren;platform;mmopts;constructor(e,{nobrace:r,nocase:n,noext:i,noglobstar:o,platform:s=s7}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[],this.platform=s,this.mmopts={dot:!0,nobrace:r,nocase:n,noext:i,noglobstar:o,optimizationLevel:2,platform:s,nocomment:!0,nonegate:!0};for(let l of e)this.add(l)}add(e){let r=new qr(e,this.mmopts);for(let n=0;n<r.set.length;n++){let i=r.set[n],o=r.globParts[n];if(!i||!o)throw new Error("invalid pattern object");for(;i[0]==="."&&o[0]===".";)i.shift(),o.shift();let s=new fc(i,o,0,this.platform),l=new qr(s.globString(),this.mmopts),u=o[o.length-1]==="**",m=s.isAbsolute();m?this.absolute.push(l):this.relative.push(l),u&&(m?this.absoluteChildren.push(l):this.relativeChildren.push(l))}}ignored(e){let r=e.fullpath(),n=`${r}/`,i=e.relative()||".",o=`${i}/`;for(let s of this.relative)if(s.match(i)||s.match(o))return!0;for(let s of this.absolute)if(s.match(r)||s.match(n))return!0;return!1}childrenIgnored(e){let r=e.fullpath()+"/",n=(e.relative()||".")+"/";for(let i of this.relativeChildren)if(i.match(n))return!0;for(let i of this.absoluteChildren)if(i.match(r))return!0;return!1}};var Uv=class t{store;constructor(e=new Map){this.store=e}copy(){return new t(new Map(this.store))}hasWalked(e,r){return this.store.get(e.fullpath())?.has(r.globString())}storeWalked(e,r){let n=e.fullpath(),i=this.store.get(n);i?i.add(r.globString()):this.store.set(n,new Set([r.globString()]))}},Hv=class{store=new Map;add(e,r,n){let i=(r?2:0)|(n?1:0),o=this.store.get(e);this.store.set(e,o===void 0?i:i&o)}entries(){return[...this.store.entries()].map(([e,r])=>[e,!!(r&2),!!(r&1)])}},Bv=class{store=new Map;add(e,r){if(!e.canReaddir())return;let n=this.store.get(e);n?n.find(i=>i.globString()===r.globString())||n.push(r):this.store.set(e,[r])}get(e){let r=this.store.get(e);if(!r)throw new Error("attempting to walk unknown path");return r}entries(){return this.keys().map(e=>[e,this.store.get(e)])}keys(){return[...this.store.keys()].filter(e=>e.canReaddir())}},yu=class t{hasWalkedCache;matches=new Hv;subwalks=new Bv;patterns;follow;dot;opts;constructor(e,r){this.opts=e,this.follow=!!e.follow,this.dot=!!e.dot,this.hasWalkedCache=r?r.copy():new Uv}processPatterns(e,r){this.patterns=r;let n=r.map(i=>[e,i]);for(let[i,o]of n){this.hasWalkedCache.storeWalked(i,o);let s=o.root(),l=o.isAbsolute()&&this.opts.absolute!==!1;if(s){i=i.resolve(s==="/"&&this.opts.root!==void 0?this.opts.root:s);let g=o.rest();if(g)o=g;else{this.matches.add(i,!0,!1);continue}}if(i.isENOENT())continue;let u,m,d=!1;for(;typeof(u=o.pattern())=="string"&&(m=o.rest());)i=i.resolve(u),o=m,d=!0;if(u=o.pattern(),m=o.rest(),d){if(this.hasWalkedCache.hasWalked(i,o))continue;this.hasWalkedCache.storeWalked(i,o)}if(typeof u=="string"){let g=u===".."||u===""||u===".";this.matches.add(i.resolve(u),l,g);continue}else if(u===Yt){(!i.isSymbolicLink()||this.follow||o.checkFollowGlobstar())&&this.subwalks.add(i,o);let g=m?.pattern(),y=m?.rest();if(!m||(g===""||g===".")&&!y)this.matches.add(i,l,g===""||g===".");else if(g===".."){let x=i.parent||i;y?this.hasWalkedCache.hasWalked(x,y)||this.subwalks.add(x,y):this.matches.add(x,l,!0)}}else u instanceof RegExp&&this.subwalks.add(i,o)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new t(this.opts,this.hasWalkedCache)}filterEntries(e,r){let n=this.subwalks.get(e),i=this.child();for(let o of r)for(let s of n){let l=s.isAbsolute(),u=s.pattern(),m=s.rest();u===Yt?i.testGlobstar(o,s,m,l):u instanceof RegExp?i.testRegExp(o,u,m,l):i.testString(o,u,m,l)}return i}testGlobstar(e,r,n,i){if((this.dot||!e.name.startsWith("."))&&(r.hasMore()||this.matches.add(e,i,!1),e.canReaddir()&&(this.follow||!e.isSymbolicLink()?this.subwalks.add(e,r):e.isSymbolicLink()&&(n&&r.checkFollowGlobstar()?this.subwalks.add(e,n):r.markFollowGlobstar()&&this.subwalks.add(e,r)))),n){let o=n.pattern();if(typeof o=="string"&&o!==".."&&o!==""&&o!==".")this.testString(e,o,n.rest(),i);else if(o===".."){let s=e.parent||e;this.subwalks.add(s,n)}else o instanceof RegExp&&this.testRegExp(e,o,n.rest(),i)}}testRegExp(e,r,n,i){r.test(e.name)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}testString(e,r,n,i){e.isNamed(r)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}};var c7=(t,e)=>typeof t=="string"?new dc([t],e):Array.isArray(t)?new dc(t,e):t,Bh=class{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#e=[];#t;#o;signal;maxDepth;includeChildMatches;constructor(e,r,n){if(this.patterns=e,this.path=r,this.opts=n,this.#o=!n.posix&&n.platform==="win32"?"\\":"/",this.includeChildMatches=n.includeChildMatches!==!1,(n.ignore||!this.includeChildMatches)&&(this.#t=c7(n.ignore??[],n),!this.includeChildMatches&&typeof this.#t.add!="function")){let i="cannot ignore child matches, ignore lacks add() method.";throw new Error(i)}this.maxDepth=n.maxDepth||1/0,n.signal&&(this.signal=n.signal,this.signal.addEventListener("abort",()=>{this.#e.length=0}))}#n(e){return this.seen.has(e)||!!this.#t?.ignored?.(e)}#a(e){return!!this.#t?.childrenIgnored?.(e)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;this.paused=!1;let e;for(;!this.paused&&(e=this.#e.shift());)e()}onResume(e){this.signal?.aborted||(this.paused?this.#e.push(e):e())}async matchCheck(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||await e.realpath(),!n)return;e=n}let o=e.isUnknown()||this.opts.stat?await e.lstat():e;if(this.opts.follow&&this.opts.nodir&&o?.isSymbolicLink()){let s=await o.realpath();s&&(s.isUnknown()||this.opts.stat)&&await s.lstat()}return this.matchCheckTest(o,r)}matchCheckTest(e,r){return e&&(this.maxDepth===1/0||e.depth()<=this.maxDepth)&&(!r||e.canReaddir())&&(!this.opts.nodir||!e.isDirectory())&&(!this.opts.nodir||!this.opts.follow||!e.isSymbolicLink()||!e.realpathCached()?.isDirectory())&&!this.#n(e)?e:void 0}matchCheckSync(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||e.realpathSync(),!n)return;e=n}let o=e.isUnknown()||this.opts.stat?e.lstatSync():e;if(this.opts.follow&&this.opts.nodir&&o?.isSymbolicLink()){let s=o.realpathSync();s&&(s?.isUnknown()||this.opts.stat)&&s.lstatSync()}return this.matchCheckTest(o,r)}matchFinish(e,r){if(this.#n(e))return;if(!this.includeChildMatches&&this.#t?.add){let o=`${e.relativePosix()}/**`;this.#t.add(o)}let n=this.opts.absolute===void 0?r:this.opts.absolute;this.seen.add(e);let i=this.opts.mark&&e.isDirectory()?this.#o:"";if(this.opts.withFileTypes)this.matchEmit(e);else if(n){let o=this.opts.posix?e.fullpathPosix():e.fullpath();this.matchEmit(o+i)}else{let o=this.opts.posix?e.relativePosix():e.relative(),s=this.opts.dotRelative&&!o.startsWith(".."+this.#o)?"."+this.#o:"";this.matchEmit(o?s+o+i:"."+i)}}async match(e,r,n){let i=await this.matchCheck(e,n);i&&this.matchFinish(i,r)}matchSync(e,r,n){let i=this.matchCheckSync(e,n);i&&this.matchFinish(i,r)}walkCB(e,r,n){this.signal?.aborted&&n(),this.walkCB2(e,r,new yu(this.opts),n)}walkCB2(e,r,n,i){if(this.#a(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2(e,r,n,i));return}n.processPatterns(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,u,m]of n.matches.entries())this.#n(l)||(o++,this.match(l,u,m).then(()=>s()));for(let l of n.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;o++;let u=l.readdirCached();l.calledReaddir()?this.walkCB3(l,u,n,s):l.readdirCB((m,d)=>this.walkCB3(l,d,n,s),!0)}s()}walkCB3(e,r,n,i){n=n.filterEntries(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,u,m]of n.matches.entries())this.#n(l)||(o++,this.match(l,u,m).then(()=>s()));for(let[l,u]of n.subwalks.entries())o++,this.walkCB2(l,u,n.child(),s);s()}walkCBSync(e,r,n){this.signal?.aborted&&n(),this.walkCB2Sync(e,r,new yu(this.opts),n)}walkCB2Sync(e,r,n,i){if(this.#a(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2Sync(e,r,n,i));return}n.processPatterns(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,u,m]of n.matches.entries())this.#n(l)||this.matchSync(l,u,m);for(let l of n.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;o++;let u=l.readdirSync();this.walkCB3Sync(l,u,n,s)}s()}walkCB3Sync(e,r,n,i){n=n.filterEntries(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,u,m]of n.matches.entries())this.#n(l)||this.matchSync(l,u,m);for(let[l,u]of n.subwalks.entries())o++,this.walkCB2Sync(l,u,n.child(),s);s()}},Tu=class extends Bh{matches=new Set;constructor(e,r,n){super(e,r,n)}matchEmit(e){this.matches.add(e)}async walk(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise((e,r)=>{this.walkCB(this.path,this.patterns,()=>{this.signal?.aborted?r(this.signal.reason):e(this.matches)})}),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>{if(this.signal?.aborted)throw this.signal.reason}),this.matches}},xu=class extends Bh{results;constructor(e,r,n){super(e,r,n),this.results=new wo({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(e){this.results.write(e),this.results.flowing||this.pause()}stream(){let e=this.path;return e.isUnknown()?e.lstat().then(()=>{this.walkCB(e,this.patterns,()=>this.results.end())}):this.walkCB(e,this.patterns,()=>this.results.end()),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}};var l7=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",Un=class{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;includeChildMatches;opts;patterns;constructor(e,r){if(!r)throw new TypeError("glob options required");if(this.withFileTypes=!!r.withFileTypes,this.signal=r.signal,this.follow=!!r.follow,this.dot=!!r.dot,this.dotRelative=!!r.dotRelative,this.nodir=!!r.nodir,this.mark=!!r.mark,r.cwd?(r.cwd instanceof URL||r.cwd.startsWith("file://"))&&(r.cwd=(0,ML.fileURLToPath)(r.cwd)):this.cwd="",this.cwd=r.cwd||"",this.root=r.root,this.magicalBraces=!!r.magicalBraces,this.nobrace=!!r.nobrace,this.noext=!!r.noext,this.realpath=!!r.realpath,this.absolute=r.absolute,this.includeChildMatches=r.includeChildMatches!==!1,this.noglobstar=!!r.noglobstar,this.matchBase=!!r.matchBase,this.maxDepth=typeof r.maxDepth=="number"?r.maxDepth:1/0,this.stat=!!r.stat,this.ignore=r.ignore,this.withFileTypes&&this.absolute!==void 0)throw new Error("cannot set absolute and withFileTypes:true");if(typeof e=="string"&&(e=[e]),this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(e=e.map(u=>u.replace(/\\/g,"/"))),this.matchBase){if(r.noglobstar)throw new TypeError("base matching requires globstar");e=e.map(u=>u.includes("/")?u:`./**/${u}`)}if(this.pattern=e,this.platform=r.platform||l7,this.opts={...r,platform:this.platform},r.scurry){if(this.scurry=r.scurry,r.nocase!==void 0&&r.nocase!==r.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{let u=r.platform==="win32"?pc:r.platform==="darwin"?hu:r.platform?mc:DL;this.scurry=new u(this.cwd,{nocase:r.nocase,fs:r.fs})}this.nocase=this.scurry.nocase;let n=this.platform==="darwin"||this.platform==="win32",i={...r,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:n,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},o=this.pattern.map(u=>new qr(u,i)),[s,l]=o.reduce((u,m)=>(u[0].push(...m.set),u[1].push(...m.globParts),u),[[],[]]);this.patterns=s.map((u,m)=>{let d=l[m];if(!d)throw new Error("invalid pattern object");return new fc(u,d,0,this.platform)})}async walk(){return[...await new Tu(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walk()]}walkSync(){return[...new Tu(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walkSync()]}stream(){return new xu(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).stream()}streamSync(){return new xu(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}};var Vv=(t,e={})=>{Array.isArray(t)||(t=[t]);for(let r of t)if(new qr(r,e).hasMagic())return!0;return!1};function Vh(t,e={}){return new Un(t,e).streamSync()}function FL(t,e={}){return new Un(t,e).stream()}function IL(t,e={}){return new Un(t,e).walkSync()}async function LL(t,e={}){return new Un(t,e).walk()}function Wh(t,e={}){return new Un(t,e).iterateSync()}function CL(t,e={}){return new Un(t,e).iterate()}var u7=Vh,p7=Object.assign(FL,{sync:Vh}),m7=Wh,f7=Object.assign(CL,{sync:Wh}),d7=Object.assign(IL,{stream:Vh,iterate:Wh}),Wv=Object.assign(LL,{glob:LL,globSync:IL,sync:d7,globStream:FL,stream:p7,globStreamSync:Vh,streamSync:u7,globIterate:CL,iterate:f7,globIterateSync:Wh,iterateSync:m7,Glob:Un,hasMagic:Vv,escape:oc,unescape:Cn});Wv.glob=Wv;function OL(){let t=process.env.CURSORLESS_MODE;switch(t){case void 0:case"production":return"production";case"development":return"development";case"test":return"test";default:throw new Error(`Unexpected value for environment variable CURSORLESS_MODE: ${t}`)}}var qL=Object.defineProperty,y7=Object.getOwnPropertyNames,O=(t,e)=>qL(t,"name",{value:e,configurable:!0}),T7=(t,e)=>function(){return e||(0,t[y7(t)[0]])((e={exports:{}}).exports,e),e.exports},ob=(t,e)=>{for(var r in e)qL(t,r,{get:e[r],enumerable:!0})},x7=T7({"(disabled):util"(){}}),$h={};ob($h,{addChainableMethod:()=>yb,addLengthGuard:()=>Eu,addMethod:()=>db,addProperty:()=>fb,checkError:()=>Kr,compareByInspect:()=>Gh,eql:()=>SF,expectTypes:()=>eF,flag:()=>De,getActual:()=>Jh,getMessage:()=>cb,getName:()=>ty,getOperator:()=>vb,getOwnEnumerableProperties:()=>Sb,getOwnEnumerablePropertySymbols:()=>xb,getPathInfo:()=>mb,hasProperty:()=>ey,inspect:()=>ze,isNaN:()=>Kh,isNumeric:()=>Bt,isProxyEnabled:()=>wu,isRegExp:()=>Qh,objDisplay:()=>Ea,overwriteChainableMethod:()=>Tb,overwriteMethod:()=>hb,overwriteProperty:()=>gb,proxify:()=>Tc,test:()=>ab,transferFlags:()=>Hn,type:()=>et});var Kr={};ob(Kr,{compatibleConstructor:()=>QL,compatibleInstance:()=>KL,compatibleMessage:()=>YL,getConstructorName:()=>ZL,getMessage:()=>XL});function Xh(t){return t instanceof Error||Object.prototype.toString.call(t)==="[object Error]"}O(Xh,"isErrorInstance");function GL(t){return Object.prototype.toString.call(t)==="[object RegExp]"}O(GL,"isRegExp");function KL(t,e){return Xh(e)&&t===e}O(KL,"compatibleInstance");function QL(t,e){return Xh(e)?t.constructor===e.constructor||t instanceof e.constructor:(typeof e=="object"||typeof e=="function")&&e.prototype?t.constructor===e||t instanceof e:!1}O(QL,"compatibleConstructor");function YL(t,e){let r=typeof t=="string"?t:t.message;return GL(e)?e.test(r):typeof e=="string"?r.indexOf(e)!==-1:!1}O(YL,"compatibleMessage");function ZL(t){let e=t;return Xh(t)?e=t.constructor.name:typeof t=="function"&&(e=t.name,e===""&&(e=new t().name||e)),e}O(ZL,"getConstructorName");function XL(t){let e="";return t&&t.message?e=t.message:typeof t=="string"&&(e=t),e}O(XL,"getMessage");function De(t,e,r){var n=t.__flags||(t.__flags=Object.create(null));if(arguments.length===3)n[e]=r;else return n[e]}O(De,"flag");function ab(t,e){var r=De(t,"negate"),n=e[0];return r?!n:n}O(ab,"test");function et(t){if(typeof t>"u")return"undefined";if(t===null)return"null";let e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}O(et,"type");var S7="captureStackTrace"in Error,Ge=class JL extends Error{static{O(this,"AssertionError")}message;get name(){return"AssertionError"}get ok(){return!1}constructor(e="Unspecified AssertionError",r,n){super(e),this.message=e,S7&&Error.captureStackTrace(this,n||JL);for(let i in r)i in this||(this[i]=r[i])}toJSON(e){return{...this,name:this.name,message:this.message,ok:!1,stack:e!==!1?this.stack:void 0}}};function eF(t,e){var r=De(t,"message"),n=De(t,"ssfi");r=r?r+": ":"",t=De(t,"object"),e=e.map(function(s){return s.toLowerCase()}),e.sort();var i=e.map(function(s,l){var u=~["a","e","i","o","u"].indexOf(s.charAt(0))?"an":"a",m=e.length>1&&l===e.length-1?"or ":"";return m+u+" "+s}).join(", "),o=et(t).toLowerCase();if(!e.some(function(s){return o===s}))throw new Ge(r+"object tested must be "+i+", but "+o+" given",void 0,n)}O(eF,"expectTypes");function Jh(t,e){return e.length>4?e[4]:t._obj}O(Jh,"getActual");var NL={bold:["1","22"],dim:["2","22"],italic:["3","23"],underline:["4","24"],inverse:["7","27"],hidden:["8","28"],strike:["9","29"],black:["30","39"],red:["31","39"],green:["32","39"],yellow:["33","39"],blue:["34","39"],magenta:["35","39"],cyan:["36","39"],white:["37","39"],brightblack:["30;1","39"],brightred:["31;1","39"],brightgreen:["32;1","39"],brightyellow:["33;1","39"],brightblue:["34;1","39"],brightmagenta:["35;1","39"],brightcyan:["36;1","39"],brightwhite:["37;1","39"],grey:["90","39"]},v7={special:"cyan",number:"yellow",bigint:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",symbol:"green",date:"magenta",regexp:"red"},hc="\u2026";function tF(t,e){let r=NL[v7[e]]||NL[e]||"";return r?`\x1B[${r[0]}m${String(t)}\x1B[${r[1]}m`:String(t)}O(tF,"colorise");function rF({showHidden:t=!1,depth:e=2,colors:r=!1,customInspect:n=!0,showProxy:i=!1,maxArrayLength:o=1/0,breakLength:s=1/0,seen:l=[],truncate:u=1/0,stylize:m=String}={},d){let g={showHidden:!!t,depth:Number(e),colors:!!r,customInspect:!!n,showProxy:!!i,maxArrayLength:Number(o),breakLength:Number(s),truncate:Number(u),seen:l,inspect:d,stylize:m};return g.colors&&(g.stylize=tF),g}O(rF,"normaliseOptions");function nF(t){return t>="\uD800"&&t<="\uDBFF"}O(nF,"isHighSurrogate");function Ii(t,e,r=hc){t=String(t);let n=r.length,i=t.length;if(n>e&&i>n)return r;if(i>e&&i>n){let o=e-n;return o>0&&nF(t[o-1])&&(o=o-1),`${t.slice(0,o)}${r}`}return t}O(Ii,"truncate");function Sn(t,e,r,n=", "){r=r||e.inspect;let i=t.length;if(i===0)return"";let o=e.truncate,s="",l="",u="";for(let m=0;m<i;m+=1){let d=m+1===t.length,g=m+2===t.length;u=`${hc}(${t.length-m})`;let y=t[m];e.truncate=o-s.length-(d?0:n.length);let x=l||r(y,e)+(d?"":n),E=s.length+x.length,w=E+u.length;if(d&&E>o&&s.length+u.length<=o||!d&&!g&&w>o||(l=d?"":r(t[m+1],e)+(g?"":n),!d&&g&&w>o&&E+l.length>o))break;if(s+=x,!d&&!g&&E+l.length>=o){u=`${hc}(${t.length-m-1})`;break}u=""}return`${s}${u}`}O(Sn,"inspectList");function iF(t){return t.match(/^[a-zA-Z_][a-zA-Z_0-9]*$/)?t:JSON.stringify(t).replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'")}O(iF,"quoteComplexKey");function yc([t,e],r){return r.truncate-=2,typeof t=="string"?t=iF(t):typeof t!="number"&&(t=`[${r.inspect(t,r)}]`),r.truncate-=t.length,e=r.inspect(e,r),`${t}: ${e}`}O(yc,"inspectProperty");function oF(t,e){let r=Object.keys(t).slice(t.length);if(!t.length&&!r.length)return"[]";e.truncate-=4;let n=Sn(t,e);e.truncate-=n.length;let i="";return r.length&&(i=Sn(r.map(o=>[o,t[o]]),e,yc)),`[ ${n}${i?`, ${i}`:""} ]`}O(oF,"inspectArray");var b7=O(t=>typeof Buffer=="function"&&t instanceof Buffer?"Buffer":t[Symbol.toStringTag]?t[Symbol.toStringTag]:t.constructor.name,"getArrayName");function li(t,e){let r=b7(t);e.truncate-=r.length+4;let n=Object.keys(t).slice(t.length);if(!t.length&&!n.length)return`${r}[]`;let i="";for(let s=0;s<t.length;s++){let l=`${e.stylize(Ii(t[s],e.truncate),"number")}${s===t.length-1?"":", "}`;if(e.truncate-=l.length,t[s]!==t.length&&e.truncate<=3){i+=`${hc}(${t.length-t[s]+1})`;break}i+=l}let o="";return n.length&&(o=Sn(n.map(s=>[s,t[s]]),e,yc)),`${r}[ ${i}${o?`, ${o}`:""} ]`}O(li,"inspectTypedArray");function aF(t,e){let r=t.toJSON();if(r===null)return"Invalid Date";let n=r.split("T"),i=n[0];return e.stylize(`${i}T${Ii(n[1],e.truncate-i.length-1)}`,"date")}O(aF,"inspectDate");function zv(t,e){let r=t[Symbol.toStringTag]||"Function",n=t.name;return n?e.stylize(`[${r} ${Ii(n,e.truncate-11)}]`,"special"):e.stylize(`[${r}]`,"special")}O(zv,"inspectFunction");function sF([t,e],r){return r.truncate-=4,t=r.inspect(t,r),r.truncate-=t.length,e=r.inspect(e,r),`${t} => ${e}`}O(sF,"inspectMapEntry");function cF(t){let e=[];return t.forEach((r,n)=>{e.push([n,r])}),e}O(cF,"mapToEntries");function lF(t,e){return t.size-1<=0?"Map{}":(e.truncate-=7,`Map{ ${Sn(cF(t),e,sF)} }`)}O(lF,"inspectMap");var w7=Number.isNaN||(t=>t!==t);function qv(t,e){return w7(t)?e.stylize("NaN","number"):t===1/0?e.stylize("Infinity","number"):t===-1/0?e.stylize("-Infinity","number"):t===0?e.stylize(1/t===1/0?"+0":"-0","number"):e.stylize(Ii(String(t),e.truncate),"number")}O(qv,"inspectNumber");function Gv(t,e){let r=Ii(t.toString(),e.truncate-1);return r!==hc&&(r+="n"),e.stylize(r,"bigint")}O(Gv,"inspectBigInt");function uF(t,e){let r=t.toString().split("/")[2],n=e.truncate-(2+r.length),i=t.source;return e.stylize(`/${Ii(i,n)}/${r}`,"regexp")}O(uF,"inspectRegExp");function pF(t){let e=[];return t.forEach(r=>{e.push(r)}),e}O(pF,"arrayFromSet");function mF(t,e){return t.size===0?"Set{}":(e.truncate-=7,`Set{ ${Sn(pF(t),e)} }`)}O(mF,"inspectSet");var UL=new RegExp("['\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]","g"),E7={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"},_7=16,R7=4;function fF(t){return E7[t]||`\\u${`0000${t.charCodeAt(0).toString(_7)}`.slice(-R7)}`}O(fF,"escape");function Kv(t,e){return UL.test(t)&&(t=t.replace(UL,fF)),e.stylize(`'${Ii(t,e.truncate-2)}'`,"string")}O(Kv,"inspectString");function Qv(t){return"description"in Symbol.prototype?t.description?`Symbol(${t.description})`:"Symbol()":t.toString()}O(Qv,"inspectSymbol");var dF=O(()=>"Promise{\u2026}","getPromiseValue");try{let{getPromiseDetails:t,kPending:e,kRejected:r}=process.binding("util");Array.isArray(t(Promise.resolve()))&&(dF=O((n,i)=>{let[o,s]=t(n);return o===e?"Promise{<pending>}":`Promise${o===r?"!":""}{${i.inspect(s,i)}}`},"getPromiseValue"))}catch{}var k7=dF;function vu(t,e){let r=Object.getOwnPropertyNames(t),n=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[];if(r.length===0&&n.length===0)return"{}";if(e.truncate-=4,e.seen=e.seen||[],e.seen.includes(t))return"[Circular]";e.seen.push(t);let i=Sn(r.map(l=>[l,t[l]]),e,yc),o=Sn(n.map(l=>[l,t[l]]),e,yc);e.seen.pop();let s="";return i&&o&&(s=", "),`{ ${i}${s}${o} }`}O(vu,"inspectObject");var $v=typeof Symbol<"u"&&Symbol.toStringTag?Symbol.toStringTag:!1;function gF(t,e){let r="";return $v&&$v in t&&(r=t[$v]),r=r||t.constructor.name,(!r||r==="_class")&&(r="<Anonymous Class>"),e.truncate-=r.length,`${r}${vu(t,e)}`}O(gF,"inspectClass");function hF(t,e){return t.length===0?"Arguments[]":(e.truncate-=13,`Arguments[ ${Sn(t,e)} ]`)}O(hF,"inspectArguments");var A7=["stack","line","column","name","message","fileName","lineNumber","columnNumber","number","description","cause"];function yF(t,e){let r=Object.getOwnPropertyNames(t).filter(s=>A7.indexOf(s)===-1),n=t.name;e.truncate-=n.length;let i="";if(typeof t.message=="string"?i=Ii(t.message,e.truncate):r.unshift("message"),i=i?`: ${i}`:"",e.truncate-=i.length+5,e.seen=e.seen||[],e.seen.includes(t))return"[Circular]";e.seen.push(t);let o=Sn(r.map(s=>[s,t[s]]),e,yc);return`${n}${i}${o?` { ${o} }`:""}`}O(yF,"inspectObject");function TF([t,e],r){return r.truncate-=3,e?`${r.stylize(String(t),"yellow")}=${r.stylize(`"${e}"`,"string")}`:`${r.stylize(String(t),"yellow")}`}O(TF,"inspectAttribute");function jh(t,e){return Sn(t,e,sb,`
`)}O(jh,"inspectHTMLCollection");function sb(t,e){let r=t.getAttributeNames(),n=t.tagName.toLowerCase(),i=e.stylize(`<${n}`,"special"),o=e.stylize(">","special"),s=e.stylize(`</${n}>`,"special");e.truncate-=n.length*2+5;let l="";r.length>0&&(l+=" ",l+=Sn(r.map(d=>[d,t.getAttribute(d)]),e,TF," ")),e.truncate-=l.length;let u=e.truncate,m=jh(t.children,e);return m&&m.length>u&&(m=`${hc}(${t.children.length})`),`${i}${l}${o}${m}${s}`}O(sb,"inspectHTML");var P7=typeof Symbol=="function"&&typeof Symbol.for=="function",jv=P7?Symbol.for("chai/inspect"):"@@chai/inspect",gc=!1;try{let t=x7();gc=t.inspect?t.inspect.custom:!1}catch{gc=!1}var HL=new WeakMap,BL={},VL={undefined:(t,e)=>e.stylize("undefined","undefined"),null:(t,e)=>e.stylize("null","null"),boolean:(t,e)=>e.stylize(String(t),"boolean"),Boolean:(t,e)=>e.stylize(String(t),"boolean"),number:qv,Number:qv,bigint:Gv,BigInt:Gv,string:Kv,String:Kv,function:zv,Function:zv,symbol:Qv,Symbol:Qv,Array:oF,Date:aF,Map:lF,Set:mF,RegExp:uF,Promise:k7,WeakSet:(t,e)=>e.stylize("WeakSet{\u2026}","special"),WeakMap:(t,e)=>e.stylize("WeakMap{\u2026}","special"),Arguments:hF,Int8Array:li,Uint8Array:li,Uint8ClampedArray:li,Int16Array:li,Uint16Array:li,Int32Array:li,Uint32Array:li,Float32Array:li,Float64Array:li,Generator:()=>"",DataView:()=>"",ArrayBuffer:()=>"",Error:yF,HTMLCollection:jh,NodeList:jh},D7=O((t,e,r)=>jv in t&&typeof t[jv]=="function"?t[jv](e):gc&&gc in t&&typeof t[gc]=="function"?t[gc](e.depth,e):"inspect"in t&&typeof t.inspect=="function"?t.inspect(e.depth,e):"constructor"in t&&HL.has(t.constructor)?HL.get(t.constructor)(t,e):BL[r]?BL[r](t,e):"","inspectCustom"),M7=Object.prototype.toString;function zh(t,e={}){let r=rF(e,zh),{customInspect:n}=r,i=t===null?"null":typeof t;if(i==="object"&&(i=M7.call(t).slice(8,-1)),i in VL)return VL[i](t,r);if(n&&t){let s=D7(t,r,i);if(s)return typeof s=="string"?s:zh(s,r)}let o=t?Object.getPrototypeOf(t):!1;return o===Object.prototype||o===null?vu(t,r):t&&typeof HTMLElement=="function"&&t instanceof HTMLElement?sb(t,r):"constructor"in t?t.constructor!==Object?gF(t,r):vu(t,r):t===Object(t)?vu(t,r):r.stylize(String(t),i)}O(zh,"inspect");var hr={includeStack:!1,showDiff:!0,truncateThreshold:40,useProxy:!0,proxyExcludedKeys:["then","catch","inspect","toJSON"],deepEqual:null};function ze(t,e,r,n){var i={colors:n,depth:typeof r>"u"?2:r,showHidden:e,truncate:hr.truncateThreshold?hr.truncateThreshold:1/0};return zh(t,i)}O(ze,"inspect");function Ea(t){var e=ze(t),r=Object.prototype.toString.call(t);if(hr.truncateThreshold&&e.length>=hr.truncateThreshold){if(r==="[object Function]")return!t.name||t.name===""?"[Function]":"[Function: "+t.name+"]";if(r==="[object Array]")return"[ Array("+t.length+") ]";if(r==="[object Object]"){var n=Object.keys(t),i=n.length>2?n.splice(0,2).join(", ")+", ...":n.join(", ");return"{ Object ("+i+") }"}else return e}else return e}O(Ea,"objDisplay");function cb(t,e){var r=De(t,"negate"),n=De(t,"object"),i=e[3],o=Jh(t,e),s=r?e[2]:e[1],l=De(t,"message");return typeof s=="function"&&(s=s()),s=s||"",s=s.replace(/#\{this\}/g,function(){return Ea(n)}).replace(/#\{act\}/g,function(){return Ea(o)}).replace(/#\{exp\}/g,function(){return Ea(i)}),l?l+": "+s:s}O(cb,"getMessage");function Hn(t,e,r){var n=t.__flags||(t.__flags=Object.create(null));e.__flags||(e.__flags=Object.create(null)),r=arguments.length===3?r:!0;for(var i in n)(r||i!=="object"&&i!=="ssfi"&&i!=="lockSsfi"&&i!="message")&&(e.__flags[i]=n[i])}O(Hn,"transferFlags");function Yv(t){if(typeof t>"u")return"undefined";if(t===null)return"null";let e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}O(Yv,"type");function lb(){this._key="chai/deep-eql__"+Math.random()+Date.now()}O(lb,"FakeMap");lb.prototype={get:O(function(e){return e[this._key]},"get"),set:O(function(e,r){Object.isExtensible(e)&&Object.defineProperty(e,this._key,{value:r,configurable:!0})},"set")};var xF=typeof WeakMap=="function"?WeakMap:lb;function Zv(t,e,r){if(!r||_a(t)||_a(e))return null;var n=r.get(t);if(n){var i=n.get(e);if(typeof i=="boolean")return i}return null}O(Zv,"memoizeCompare");function Su(t,e,r,n){if(!(!r||_a(t)||_a(e))){var i=r.get(t);i?i.set(e,n):(i=new xF,i.set(e,n),r.set(t,i))}}O(Su,"memoizeSet");var SF=bu;function bu(t,e,r){if(r&&r.comparator)return Xv(t,e,r);var n=ub(t,e);return n!==null?n:Xv(t,e,r)}O(bu,"deepEqual");function ub(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e?!0:_a(t)||_a(e)?!1:null}O(ub,"simpleEqual");function Xv(t,e,r){r=r||{},r.memoize=r.memoize===!1?!1:r.memoize||new xF;var n=r&&r.comparator,i=Zv(t,e,r.memoize);if(i!==null)return i;var o=Zv(e,t,r.memoize);if(o!==null)return o;if(n){var s=n(t,e);if(s===!1||s===!0)return Su(t,e,r.memoize,s),s;var l=ub(t,e);if(l!==null)return l}var u=Yv(t);if(u!==Yv(e))return Su(t,e,r.memoize,!1),!1;Su(t,e,r.memoize,!0);var m=vF(t,e,u,r);return Su(t,e,r.memoize,m),m}O(Xv,"extensiveDeepEqual");function vF(t,e,r,n){switch(r){case"String":case"Number":case"Boolean":case"Date":return bu(t.valueOf(),e.valueOf());case"Promise":case"Symbol":case"function":case"WeakMap":case"WeakSet":return t===e;case"Error":return pb(t,e,["name","message","code"],n);case"Arguments":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"Array":return _o(t,e,n);case"RegExp":return bF(t,e);case"Generator":return wF(t,e,n);case"DataView":return _o(new Uint8Array(t.buffer),new Uint8Array(e.buffer),n);case"ArrayBuffer":return _o(new Uint8Array(t),new Uint8Array(e),n);case"Set":return Jv(t,e,n);case"Map":return Jv(t,e,n);case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.Instant":case"Temporal.ZonedDateTime":case"Temporal.PlainYearMonth":case"Temporal.PlainMonthDay":return t.equals(e);case"Temporal.Duration":return t.total("nanoseconds")===e.total("nanoseconds");case"Temporal.TimeZone":case"Temporal.Calendar":return t.toString()===e.toString();default:return _F(t,e,n)}}O(vF,"extensiveDeepEqualByType");function bF(t,e){return t.toString()===e.toString()}O(bF,"regexpEqual");function Jv(t,e,r){try{if(t.size!==e.size)return!1;if(t.size===0)return!0}catch{return!1}var n=[],i=[];return t.forEach(O(function(s,l){n.push([s,l])},"gatherEntries")),e.forEach(O(function(s,l){i.push([s,l])},"gatherEntries")),_o(n.sort(),i.sort(),r)}O(Jv,"entriesEqual");function _o(t,e,r){var n=t.length;if(n!==e.length)return!1;if(n===0)return!0;for(var i=-1;++i<n;)if(bu(t[i],e[i],r)===!1)return!1;return!0}O(_o,"iterableEqual");function wF(t,e,r){return _o(qh(t),qh(e),r)}O(wF,"generatorEqual");function EF(t){return typeof Symbol<"u"&&typeof t=="object"&&typeof Symbol.iterator<"u"&&typeof t[Symbol.iterator]=="function"}O(EF,"hasIteratorFunction");function eb(t){if(EF(t))try{return qh(t[Symbol.iterator]())}catch{return[]}return[]}O(eb,"getIteratorEntries");function qh(t){for(var e=t.next(),r=[e.value];e.done===!1;)e=t.next(),r.push(e.value);return r}O(qh,"getGeneratorEntries");function tb(t){var e=[];for(var r in t)e.push(r);return e}O(tb,"getEnumerableKeys");function rb(t){for(var e=[],r=Object.getOwnPropertySymbols(t),n=0;n<r.length;n+=1){var i=r[n];Object.getOwnPropertyDescriptor(t,i).enumerable&&e.push(i)}return e}O(rb,"getEnumerableSymbols");function pb(t,e,r,n){var i=r.length;if(i===0)return!0;for(var o=0;o<i;o+=1)if(bu(t[r[o]],e[r[o]],n)===!1)return!1;return!0}O(pb,"keysEqual");function _F(t,e,r){var n=tb(t),i=tb(e),o=rb(t),s=rb(e);if(n=n.concat(o),i=i.concat(s),n.length&&n.length===i.length)return _o(nb(n).sort(),nb(i).sort())===!1?!1:pb(t,e,n,r);var l=eb(t),u=eb(e);return l.length&&l.length===u.length?(l.sort(),u.sort(),_o(l,u,r)):n.length===0&&l.length===0&&i.length===0&&u.length===0}O(_F,"objectEqual");function _a(t){return t===null||typeof t!="object"}O(_a,"isPrimitive");function nb(t){return t.map(O(function(r){return typeof r=="symbol"?r.toString():r},"mapSymbol"))}O(nb,"mapSymbols");function ey(t,e){return typeof t>"u"||t===null?!1:e in Object(t)}O(ey,"hasProperty");function RF(t){return t.replace(/([^\\])\[/g,"$1.[").match(/(\\\.|[^.]+?)+/g).map(n=>{if(n==="constructor"||n==="__proto__"||n==="prototype")return{};let o=/^\[(\d+)\]$/.exec(n),s=null;return o?s={i:parseFloat(o[1])}:s={p:n.replace(/\\([.[\]])/g,"$1")},s})}O(RF,"parsePath");function ib(t,e,r){let n=t,i=null;r=typeof r>"u"?e.length:r;for(let o=0;o<r;o++){let s=e[o];n&&(typeof s.p>"u"?n=n[s.i]:n=n[s.p],o===r-1&&(i=n))}return i}O(ib,"internalGetPathValue");function mb(t,e){let r=RF(e),n=r[r.length-1],i={parent:r.length>1?ib(t,r,r.length-1):t,name:n.p||n.i,value:ib(t,r)};return i.exists=ey(i.parent,i.name),i}O(mb,"getPathInfo");function b(t,e,r,n){return De(this,"ssfi",r||b),De(this,"lockSsfi",n),De(this,"object",t),De(this,"message",e),De(this,"eql",hr.deepEqual||SF),Tc(this)}O(b,"Assertion");Object.defineProperty(b,"includeStack",{get:function(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),hr.includeStack},set:function(t){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),hr.includeStack=t}});Object.defineProperty(b,"showDiff",{get:function(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),hr.showDiff},set:function(t){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),hr.showDiff=t}});b.addProperty=function(t,e){fb(this.prototype,t,e)};b.addMethod=function(t,e){db(this.prototype,t,e)};b.addChainableMethod=function(t,e,r){yb(this.prototype,t,e,r)};b.overwriteProperty=function(t,e){gb(this.prototype,t,e)};b.overwriteMethod=function(t,e){hb(this.prototype,t,e)};b.overwriteChainableMethod=function(t,e,r){Tb(this.prototype,t,e,r)};b.prototype.assert=function(t,e,r,n,i,o){var s=ab(this,arguments);if(o!==!1&&(o=!0),n===void 0&&i===void 0&&(o=!1),hr.showDiff!==!0&&(o=!1),!s){e=cb(this,arguments);var l=Jh(this,arguments),u={actual:l,expected:n,showDiff:o},m=vb(this,arguments);throw m&&(u.operator=m),new Ge(e,u,hr.includeStack?this.assert:De(this,"ssfi"))}};Object.defineProperty(b.prototype,"_obj",{get:function(){return De(this,"object")},set:function(t){De(this,"object",t)}});function wu(){return hr.useProxy&&typeof Proxy<"u"&&typeof Reflect<"u"}O(wu,"isProxyEnabled");function fb(t,e,r){r=r===void 0?function(){}:r,Object.defineProperty(t,e,{get:O(function n(){!wu()&&!De(this,"lockSsfi")&&De(this,"ssfi",n);var i=r.call(this);if(i!==void 0)return i;var o=new b;return Hn(this,o),o},"propertyGetter"),configurable:!0})}O(fb,"addProperty");var L7=Object.getOwnPropertyDescriptor(function(){},"length");function Eu(t,e,r){return L7.configurable&&Object.defineProperty(t,"length",{get:function(){throw Error(r?"Invalid Chai property: "+e+'.length. Due to a compatibility issue, "length" cannot directly follow "'+e+'". Use "'+e+'.lengthOf" instead.':"Invalid Chai property: "+e+'.length. See docs for proper usage of "'+e+'".')}}),t}O(Eu,"addLengthGuard");function kF(t){var e=Object.getOwnPropertyNames(t);function r(i){e.indexOf(i)===-1&&e.push(i)}O(r,"addProperty");for(var n=Object.getPrototypeOf(t);n!==null;)Object.getOwnPropertyNames(n).forEach(r),n=Object.getPrototypeOf(n);return e}O(kF,"getProperties");var WL=["__flags","__methods","_obj","assert"];function Tc(t,e){return wu()?new Proxy(t,{get:O(function r(n,i){if(typeof i=="string"&&hr.proxyExcludedKeys.indexOf(i)===-1&&!Reflect.has(n,i)){if(e)throw Error("Invalid Chai property: "+e+"."+i+'. See docs for proper usage of "'+e+'".');var o=null,s=4;throw kF(n).forEach(function(l){if(!Object.prototype.hasOwnProperty(l)&&WL.indexOf(l)===-1){var u=AF(i,l,s);u<s&&(o=l,s=u)}}),Error(o!==null?"Invalid Chai property: "+i+'. Did you mean "'+o+'"?':"Invalid Chai property: "+i)}return WL.indexOf(i)===-1&&!De(n,"lockSsfi")&&De(n,"ssfi",r),Reflect.get(n,i)},"proxyGetter")}):t}O(Tc,"proxify");function AF(t,e,r){if(Math.abs(t.length-e.length)>=r)return r;var n=[];for(let o=0;o<=t.length;o++)n[o]=Array(e.length+1).fill(0),n[o][0]=o;for(let o=0;o<e.length;o++)n[0][o]=o;for(let o=1;o<=t.length;o++){var i=t.charCodeAt(o-1);for(let s=1;s<=e.length;s++){if(Math.abs(o-s)>=r){n[o][s]=r;continue}n[o][s]=Math.min(n[o-1][s]+1,n[o][s-1]+1,n[o-1][s-1]+(i===e.charCodeAt(s-1)?0:1))}}return n[t.length][e.length]}O(AF,"stringDistanceCapped");function db(t,e,r){var n=O(function(){De(this,"lockSsfi")||De(this,"ssfi",n);var i=r.apply(this,arguments);if(i!==void 0)return i;var o=new b;return Hn(this,o),o},"methodWrapper");Eu(n,e,!1),t[e]=Tc(n,e)}O(db,"addMethod");function gb(t,e,r){var n=Object.getOwnPropertyDescriptor(t,e),i=O(function(){},"_super");n&&typeof n.get=="function"&&(i=n.get),Object.defineProperty(t,e,{get:O(function o(){!wu()&&!De(this,"lockSsfi")&&De(this,"ssfi",o);var s=De(this,"lockSsfi");De(this,"lockSsfi",!0);var l=r(i).call(this);if(De(this,"lockSsfi",s),l!==void 0)return l;var u=new b;return Hn(this,u),u},"overwritingPropertyGetter"),configurable:!0})}O(gb,"overwriteProperty");function hb(t,e,r){var n=t[e],i=O(function(){throw new Error(e+" is not a function")},"_super");n&&typeof n=="function"&&(i=n);var o=O(function(){De(this,"lockSsfi")||De(this,"ssfi",o);var s=De(this,"lockSsfi");De(this,"lockSsfi",!0);var l=r(i).apply(this,arguments);if(De(this,"lockSsfi",s),l!==void 0)return l;var u=new b;return Hn(this,u),u},"overwritingMethodWrapper");Eu(o,e,!1),t[e]=Tc(o,e)}O(hb,"overwriteMethod");var F7=typeof Object.setPrototypeOf=="function",$L=O(function(){},"testFn"),I7=Object.getOwnPropertyNames($L).filter(function(t){var e=Object.getOwnPropertyDescriptor($L,t);return typeof e!="object"?!0:!e.configurable}),C7=Function.prototype.call,O7=Function.prototype.apply;function yb(t,e,r,n){typeof n!="function"&&(n=O(function(){},"chainingBehavior"));var i={method:r,chainingBehavior:n};t.__methods||(t.__methods={}),t.__methods[e]=i,Object.defineProperty(t,e,{get:O(function(){i.chainingBehavior.call(this);var s=O(function(){De(this,"lockSsfi")||De(this,"ssfi",s);var m=i.method.apply(this,arguments);if(m!==void 0)return m;var d=new b;return Hn(this,d),d},"chainableMethodWrapper");if(Eu(s,e,!0),F7){var l=Object.create(this);l.call=C7,l.apply=O7,Object.setPrototypeOf(s,l)}else{var u=Object.getOwnPropertyNames(t);u.forEach(function(m){if(I7.indexOf(m)===-1){var d=Object.getOwnPropertyDescriptor(t,m);Object.defineProperty(s,m,d)}})}return Hn(this,s),Tc(s)},"chainableMethodGetter"),configurable:!0})}O(yb,"addChainableMethod");function Tb(t,e,r,n){var i=t.__methods[e],o=i.chainingBehavior;i.chainingBehavior=O(function(){var u=n(o).call(this);if(u!==void 0)return u;var m=new b;return Hn(this,m),m},"overwritingChainableMethodGetter");var s=i.method;i.method=O(function(){var u=r(s).apply(this,arguments);if(u!==void 0)return u;var m=new b;return Hn(this,m),m},"overwritingChainableMethodWrapper")}O(Tb,"overwriteChainableMethod");function Gh(t,e){return ze(t)<ze(e)?-1:1}O(Gh,"compareByInspect");function xb(t){return typeof Object.getOwnPropertySymbols!="function"?[]:Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})}O(xb,"getOwnEnumerablePropertySymbols");function Sb(t){return Object.keys(t).concat(xb(t))}O(Sb,"getOwnEnumerableProperties");var Kh=Number.isNaN;function PF(t){var e=et(t),r=["Array","Object","Function"];return r.indexOf(e)!==-1}O(PF,"isObjectType");function vb(t,e){var r=De(t,"operator"),n=De(t,"negate"),i=e[3],o=n?e[2]:e[1];if(r)return r;if(typeof o=="function"&&(o=o()),o=o||"",!!o&&!/\shave\s/.test(o)){var s=PF(i);return/\snot\s/.test(o)?s?"notDeepStrictEqual":"notStrictEqual":s?"deepStrictEqual":"strictEqual"}}O(vb,"getOperator");function ty(t){return t.name}O(ty,"getName");function Qh(t){return Object.prototype.toString.call(t)==="[object RegExp]"}O(Qh,"isRegExp");function Bt(t){return["Number","BigInt"].includes(et(t))}O(Bt,"isNumeric");var{flag:D}=$h;["to","be","been","is","and","has","have","with","that","which","at","of","same","but","does","still","also"].forEach(function(t){b.addProperty(t)});b.addProperty("not",function(){D(this,"negate",!0)});b.addProperty("deep",function(){D(this,"deep",!0)});b.addProperty("nested",function(){D(this,"nested",!0)});b.addProperty("own",function(){D(this,"own",!0)});b.addProperty("ordered",function(){D(this,"ordered",!0)});b.addProperty("any",function(){D(this,"any",!0),D(this,"all",!1)});b.addProperty("all",function(){D(this,"all",!0),D(this,"any",!1)});var jL={function:["function","asyncfunction","generatorfunction","asyncgeneratorfunction"],asyncfunction:["asyncfunction","asyncgeneratorfunction"],generatorfunction:["generatorfunction","asyncgeneratorfunction"],asyncgeneratorfunction:["asyncgeneratorfunction"]};function bb(t,e){e&&D(this,"message",e),t=t.toLowerCase();var r=D(this,"object"),n=~["a","e","i","o","u"].indexOf(t.charAt(0))?"an ":"a ";let i=et(r).toLowerCase();jL.function.includes(t)?this.assert(jL[t].includes(i),"expected #{this} to be "+n+t,"expected #{this} not to be "+n+t):this.assert(t===i,"expected #{this} to be "+n+t,"expected #{this} not to be "+n+t)}O(bb,"an");b.addChainableMethod("an",bb);b.addChainableMethod("a",bb);function DF(t,e){return Kh(t)&&Kh(e)||t===e}O(DF,"SameValueZero");function _u(){D(this,"contains",!0)}O(_u,"includeChainingBehavior");function Ru(t,e){e&&D(this,"message",e);var r=D(this,"object"),n=et(r).toLowerCase(),i=D(this,"message"),o=D(this,"negate"),s=D(this,"ssfi"),l=D(this,"deep"),u=l?"deep ":"",m=l?D(this,"eql"):DF;i=i?i+": ":"";var d=!1;switch(n){case"string":d=r.indexOf(t)!==-1;break;case"weakset":if(l)throw new Ge(i+"unable to use .deep.include with WeakSet",void 0,s);d=r.has(t);break;case"map":r.forEach(function(E){d=d||m(E,t)});break;case"set":l?r.forEach(function(E){d=d||m(E,t)}):d=r.has(t);break;case"array":l?d=r.some(function(E){return m(E,t)}):d=r.indexOf(t)!==-1;break;default:if(t!==Object(t))throw new Ge(i+"the given combination of arguments ("+n+" and "+et(t).toLowerCase()+") is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a "+et(t).toLowerCase(),void 0,s);var g=Object.keys(t),y=null,x=0;if(g.forEach(function(E){var w=new b(r);if(Hn(this,w,!0),D(w,"lockSsfi",!0),!o||g.length===1){w.property(E,t[E]);return}try{w.property(E,t[E])}catch(U){if(!Kr.compatibleConstructor(U,Ge))throw U;y===null&&(y=U),x++}},this),o&&g.length>1&&x===g.length)throw y;return}this.assert(d,"expected #{this} to "+u+"include "+ze(t),"expected #{this} to not "+u+"include "+ze(t))}O(Ru,"include");b.addChainableMethod("include",Ru,_u);b.addChainableMethod("contain",Ru,_u);b.addChainableMethod("contains",Ru,_u);b.addChainableMethod("includes",Ru,_u);b.addProperty("ok",function(){this.assert(D(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")});b.addProperty("true",function(){this.assert(D(this,"object")===!0,"expected #{this} to be true","expected #{this} to be false",!D(this,"negate"))});b.addProperty("numeric",function(){let t=D(this,"object");this.assert(["Number","BigInt"].includes(et(t)),"expected #{this} to be numeric","expected #{this} to not be numeric",!D(this,"negate"))});b.addProperty("callable",function(){let t=D(this,"object"),e=D(this,"ssfi"),r=D(this,"message"),n=r?`${r}: `:"",i=D(this,"negate"),o=i?`${n}expected ${ze(t)} not to be a callable function`:`${n}expected ${ze(t)} to be a callable function`,s=["Function","AsyncFunction","GeneratorFunction","AsyncGeneratorFunction"].includes(et(t));if(s&&i||!s&&!i)throw new Ge(o,void 0,e)});b.addProperty("false",function(){this.assert(D(this,"object")===!1,"expected #{this} to be false","expected #{this} to be true",!!D(this,"negate"))});b.addProperty("null",function(){this.assert(D(this,"object")===null,"expected #{this} to be null","expected #{this} not to be null")});b.addProperty("undefined",function(){this.assert(D(this,"object")===void 0,"expected #{this} to be undefined","expected #{this} not to be undefined")});b.addProperty("NaN",function(){this.assert(Kh(D(this,"object")),"expected #{this} to be NaN","expected #{this} not to be NaN")});function wb(){var t=D(this,"object");this.assert(t!=null,"expected #{this} to exist","expected #{this} to not exist")}O(wb,"assertExist");b.addProperty("exist",wb);b.addProperty("exists",wb);b.addProperty("empty",function(){var t=D(this,"object"),e=D(this,"ssfi"),r=D(this,"message"),n;switch(r=r?r+": ":"",et(t).toLowerCase()){case"array":case"string":n=t.length;break;case"map":case"set":n=t.size;break;case"weakmap":case"weakset":throw new Ge(r+".empty was passed a weak collection",void 0,e);case"function":var i=r+".empty was passed a function "+ty(t);throw new Ge(i.trim(),void 0,e);default:if(t!==Object(t))throw new Ge(r+".empty was passed non-string primitive "+ze(t),void 0,e);n=Object.keys(t).length}this.assert(n===0,"expected #{this} to be empty","expected #{this} not to be empty")});function Eb(){var t=D(this,"object"),e=et(t);this.assert(e==="Arguments","expected #{this} to be arguments but got "+e,"expected #{this} to not be arguments")}O(Eb,"checkArguments");b.addProperty("arguments",Eb);b.addProperty("Arguments",Eb);function ry(t,e){e&&D(this,"message",e);var r=D(this,"object");if(D(this,"deep")){var n=D(this,"lockSsfi");D(this,"lockSsfi",!0),this.eql(t),D(this,"lockSsfi",n)}else this.assert(t===r,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",t,this._obj,!0)}O(ry,"assertEqual");b.addMethod("equal",ry);b.addMethod("equals",ry);b.addMethod("eq",ry);function _b(t,e){e&&D(this,"message",e);var r=D(this,"eql");this.assert(r(t,D(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",t,this._obj,!0)}O(_b,"assertEql");b.addMethod("eql",_b);b.addMethod("eqls",_b);function ny(t,e){e&&D(this,"message",e);var r=D(this,"object"),n=D(this,"doLength"),i=D(this,"message"),o=i?i+": ":"",s=D(this,"ssfi"),l=et(r).toLowerCase(),u=et(t).toLowerCase();if(n&&l!=="map"&&l!=="set"&&new b(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&u!=="date")throw new Ge(o+"the argument to above must be a date",void 0,s);if(!Bt(t)&&(n||Bt(r)))throw new Ge(o+"the argument to above must be a number",void 0,s);if(!n&&l!=="date"&&!Bt(r)){var m=l==="string"?"'"+r+"'":r;throw new Ge(o+"expected "+m+" to be a number or a date",void 0,s)}if(n){var d="length",g;l==="map"||l==="set"?(d="size",g=r.size):g=r.length,this.assert(g>t,"expected #{this} to have a "+d+" above #{exp} but got #{act}","expected #{this} to not have a "+d+" above #{exp}",t,g)}else this.assert(r>t,"expected #{this} to be above #{exp}","expected #{this} to be at most #{exp}",t)}O(ny,"assertAbove");b.addMethod("above",ny);b.addMethod("gt",ny);b.addMethod("greaterThan",ny);function iy(t,e){e&&D(this,"message",e);var r=D(this,"object"),n=D(this,"doLength"),i=D(this,"message"),o=i?i+": ":"",s=D(this,"ssfi"),l=et(r).toLowerCase(),u=et(t).toLowerCase(),m,d=!0;if(n&&l!=="map"&&l!=="set"&&new b(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&u!=="date")m=o+"the argument to least must be a date";else if(!Bt(t)&&(n||Bt(r)))m=o+"the argument to least must be a number";else if(!n&&l!=="date"&&!Bt(r)){var g=l==="string"?"'"+r+"'":r;m=o+"expected "+g+" to be a number or a date"}else d=!1;if(d)throw new Ge(m,void 0,s);if(n){var y="length",x;l==="map"||l==="set"?(y="size",x=r.size):x=r.length,this.assert(x>=t,"expected #{this} to have a "+y+" at least #{exp} but got #{act}","expected #{this} to have a "+y+" below #{exp}",t,x)}else this.assert(r>=t,"expected #{this} to be at least #{exp}","expected #{this} to be below #{exp}",t)}O(iy,"assertLeast");b.addMethod("least",iy);b.addMethod("gte",iy);b.addMethod("greaterThanOrEqual",iy);function oy(t,e){e&&D(this,"message",e);var r=D(this,"object"),n=D(this,"doLength"),i=D(this,"message"),o=i?i+": ":"",s=D(this,"ssfi"),l=et(r).toLowerCase(),u=et(t).toLowerCase(),m,d=!0;if(n&&l!=="map"&&l!=="set"&&new b(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&u!=="date")m=o+"the argument to below must be a date";else if(!Bt(t)&&(n||Bt(r)))m=o+"the argument to below must be a number";else if(!n&&l!=="date"&&!Bt(r)){var g=l==="string"?"'"+r+"'":r;m=o+"expected "+g+" to be a number or a date"}else d=!1;if(d)throw new Ge(m,void 0,s);if(n){var y="length",x;l==="map"||l==="set"?(y="size",x=r.size):x=r.length,this.assert(x<t,"expected #{this} to have a "+y+" below #{exp} but got #{act}","expected #{this} to not have a "+y+" below #{exp}",t,x)}else this.assert(r<t,"expected #{this} to be below #{exp}","expected #{this} to be at least #{exp}",t)}O(oy,"assertBelow");b.addMethod("below",oy);b.addMethod("lt",oy);b.addMethod("lessThan",oy);function ay(t,e){e&&D(this,"message",e);var r=D(this,"object"),n=D(this,"doLength"),i=D(this,"message"),o=i?i+": ":"",s=D(this,"ssfi"),l=et(r).toLowerCase(),u=et(t).toLowerCase(),m,d=!0;if(n&&l!=="map"&&l!=="set"&&new b(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&u!=="date")m=o+"the argument to most must be a date";else if(!Bt(t)&&(n||Bt(r)))m=o+"the argument to most must be a number";else if(!n&&l!=="date"&&!Bt(r)){var g=l==="string"?"'"+r+"'":r;m=o+"expected "+g+" to be a number or a date"}else d=!1;if(d)throw new Ge(m,void 0,s);if(n){var y="length",x;l==="map"||l==="set"?(y="size",x=r.size):x=r.length,this.assert(x<=t,"expected #{this} to have a "+y+" at most #{exp} but got #{act}","expected #{this} to have a "+y+" above #{exp}",t,x)}else this.assert(r<=t,"expected #{this} to be at most #{exp}","expected #{this} to be above #{exp}",t)}O(ay,"assertMost");b.addMethod("most",ay);b.addMethod("lte",ay);b.addMethod("lessThanOrEqual",ay);b.addMethod("within",function(t,e,r){r&&D(this,"message",r);var n=D(this,"object"),i=D(this,"doLength"),o=D(this,"message"),s=o?o+": ":"",l=D(this,"ssfi"),u=et(n).toLowerCase(),m=et(t).toLowerCase(),d=et(e).toLowerCase(),g,y=!0,x=m==="date"&&d==="date"?t.toISOString()+".."+e.toISOString():t+".."+e;if(i&&u!=="map"&&u!=="set"&&new b(n,o,l,!0).to.have.property("length"),!i&&u==="date"&&(m!=="date"||d!=="date"))g=s+"the arguments to within must be dates";else if((!Bt(t)||!Bt(e))&&(i||Bt(n)))g=s+"the arguments to within must be numbers";else if(!i&&u!=="date"&&!Bt(n)){var E=u==="string"?"'"+n+"'":n;g=s+"expected "+E+" to be a number or a date"}else y=!1;if(y)throw new Ge(g,void 0,l);if(i){var w="length",U;u==="map"||u==="set"?(w="size",U=n.size):U=n.length,this.assert(U>=t&&U<=e,"expected #{this} to have a "+w+" within "+x,"expected #{this} to not have a "+w+" within "+x)}else this.assert(n>=t&&n<=e,"expected #{this} to be within "+x,"expected #{this} to not be within "+x)});function Rb(t,e){e&&D(this,"message",e);var r=D(this,"object"),n=D(this,"ssfi"),i=D(this,"message");try{var o=r instanceof t}catch(l){throw l instanceof TypeError?(i=i?i+": ":"",new Ge(i+"The instanceof assertion needs a constructor but "+et(t)+" was given.",void 0,n)):l}var s=ty(t);s==null&&(s="an unnamed constructor"),this.assert(o,"expected #{this} to be an instance of "+s,"expected #{this} to not be an instance of "+s)}O(Rb,"assertInstanceOf");b.addMethod("instanceof",Rb);b.addMethod("instanceOf",Rb);function kb(t,e,r){r&&D(this,"message",r);var n=D(this,"nested"),i=D(this,"own"),o=D(this,"message"),s=D(this,"object"),l=D(this,"ssfi"),u=typeof t;if(o=o?o+": ":"",n){if(u!=="string")throw new Ge(o+"the argument to property must be a string when using nested syntax",void 0,l)}else if(u!=="string"&&u!=="number"&&u!=="symbol")throw new Ge(o+"the argument to property must be a string, number, or symbol",void 0,l);if(n&&i)throw new Ge(o+'The "nested" and "own" flags cannot be combined.',void 0,l);if(s==null)throw new Ge(o+"Target cannot be null or undefined.",void 0,l);var m=D(this,"deep"),d=D(this,"negate"),g=n?mb(s,t):null,y=n?g.value:s[t],x=m?D(this,"eql"):(U,V)=>U===V,E="";m&&(E+="deep "),i&&(E+="own "),n&&(E+="nested "),E+="property ";var w;i?w=Object.prototype.hasOwnProperty.call(s,t):n?w=g.exists:w=ey(s,t),(!d||arguments.length===1)&&this.assert(w,"expected #{this} to have "+E+ze(t),"expected #{this} to not have "+E+ze(t)),arguments.length>1&&this.assert(w&&x(e,y),"expected #{this} to have "+E+ze(t)+" of #{exp}, but got #{act}","expected #{this} to not have "+E+ze(t)+" of #{act}",e,y),D(this,"object",y)}O(kb,"assertProperty");b.addMethod("property",kb);function Ab(t,e,r){D(this,"own",!0),kb.apply(this,arguments)}O(Ab,"assertOwnProperty");b.addMethod("ownProperty",Ab);b.addMethod("haveOwnProperty",Ab);function Pb(t,e,r){typeof e=="string"&&(r=e,e=null),r&&D(this,"message",r);var n=D(this,"object"),i=Object.getOwnPropertyDescriptor(Object(n),t),o=D(this,"eql");i&&e?this.assert(o(e,i),"expected the own property descriptor for "+ze(t)+" on #{this} to match "+ze(e)+", got "+ze(i),"expected the own property descriptor for "+ze(t)+" on #{this} to not match "+ze(e),e,i,!0):this.assert(i,"expected #{this} to have an own property descriptor for "+ze(t),"expected #{this} to not have an own property descriptor for "+ze(t)),D(this,"object",i)}O(Pb,"assertOwnPropertyDescriptor");b.addMethod("ownPropertyDescriptor",Pb);b.addMethod("haveOwnPropertyDescriptor",Pb);function Db(){D(this,"doLength",!0)}O(Db,"assertLengthChain");function Mb(t,e){e&&D(this,"message",e);var r=D(this,"object"),n=et(r).toLowerCase(),i=D(this,"message"),o=D(this,"ssfi"),s="length",l;switch(n){case"map":case"set":s="size",l=r.size;break;default:new b(r,i,o,!0).to.have.property("length"),l=r.length}this.assert(l==t,"expected #{this} to have a "+s+" of #{exp} but got #{act}","expected #{this} to not have a "+s+" of #{act}",t,l)}O(Mb,"assertLength");b.addChainableMethod("length",Mb,Db);b.addChainableMethod("lengthOf",Mb,Db);function Lb(t,e){e&&D(this,"message",e);var r=D(this,"object");this.assert(t.exec(r),"expected #{this} to match "+t,"expected #{this} not to match "+t)}O(Lb,"assertMatch");b.addMethod("match",Lb);b.addMethod("matches",Lb);b.addMethod("string",function(t,e){e&&D(this,"message",e);var r=D(this,"object"),n=D(this,"message"),i=D(this,"ssfi");new b(r,n,i,!0).is.a("string"),this.assert(~r.indexOf(t),"expected #{this} to contain "+ze(t),"expected #{this} to not contain "+ze(t))});function Fb(t){var e=D(this,"object"),r=et(e),n=et(t),i=D(this,"ssfi"),o=D(this,"deep"),s,l="",u,m=!0,d=D(this,"message");d=d?d+": ":"";var g=d+"when testing keys against an object or an array you must give a single Array|Object|String argument or multiple String arguments";if(r==="Map"||r==="Set")l=o?"deeply ":"",u=[],e.forEach(function(q,ne){u.push(ne)}),n!=="Array"&&(t=Array.prototype.slice.call(arguments));else{switch(u=Sb(e),n){case"Array":if(arguments.length>1)throw new Ge(g,void 0,i);break;case"Object":if(arguments.length>1)throw new Ge(g,void 0,i);t=Object.keys(t);break;default:t=Array.prototype.slice.call(arguments)}t=t.map(function(q){return typeof q=="symbol"?q:String(q)})}if(!t.length)throw new Ge(d+"keys required",void 0,i);var y=t.length,x=D(this,"any"),E=D(this,"all"),w=t,U=o?D(this,"eql"):(q,ne)=>q===ne;if(!x&&!E&&(E=!0),x&&(m=w.some(function(q){return u.some(function(ne){return U(q,ne)})})),E&&(m=w.every(function(q){return u.some(function(ne){return U(q,ne)})}),D(this,"contains")||(m=m&&t.length==u.length)),y>1){t=t.map(function(q){return ze(q)});var V=t.pop();E&&(s=t.join(", ")+", and "+V),x&&(s=t.join(", ")+", or "+V)}else s=ze(t[0]);s=(y>1?"keys ":"key ")+s,s=(D(this,"contains")?"contain ":"have ")+s,this.assert(m,"expected #{this} to "+l+s,"expected #{this} to not "+l+s,w.slice(0).sort(Gh),u.sort(Gh),!0)}O(Fb,"assertKeys");b.addMethod("keys",Fb);b.addMethod("key",Fb);function sy(t,e,r){r&&D(this,"message",r);var n=D(this,"object"),i=D(this,"ssfi"),o=D(this,"message"),s=D(this,"negate")||!1;new b(n,o,i,!0).is.a("function"),(Qh(t)||typeof t=="string")&&(e=t,t=null);let l,u=!1;try{n()}catch(q){u=!0,l=q}var m=t===void 0&&e===void 0,d=!!(t&&e),g=!1,y=!1;if(m||!m&&!s){var x="an error";t instanceof Error?x="#{exp}":t&&(x=Kr.getConstructorName(t));let q=l;if(l instanceof Error)q=l.toString();else if(typeof l=="string")q=l;else if(l&&(typeof l=="object"||typeof l=="function"))try{q=Kr.getConstructorName(l)}catch{}this.assert(u,"expected #{this} to throw "+x,"expected #{this} to not throw an error but #{act} was thrown",t&&t.toString(),q)}if(t&&l){if(t instanceof Error){var E=Kr.compatibleInstance(l,t);E===s&&(d&&s?g=!0:this.assert(s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l&&!s?" but #{act} was thrown":""),t.toString(),l.toString()))}var w=Kr.compatibleConstructor(l,t);w===s&&(d&&s?g=!0:this.assert(s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&Kr.getConstructorName(t),l instanceof Error?l.toString():l&&Kr.getConstructorName(l)))}if(l&&e!==void 0&&e!==null){var U="including";Qh(e)&&(U="matching");var V=Kr.compatibleMessage(l,e);V===s&&(d&&s?y=!0:this.assert(s,"expected #{this} to throw error "+U+" #{exp} but got #{act}","expected #{this} to throw error not "+U+" #{exp}",e,Kr.getMessage(l)))}g&&y&&this.assert(s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&Kr.getConstructorName(t),l instanceof Error?l.toString():l&&Kr.getConstructorName(l)),D(this,"object",l)}O(sy,"assertThrows");b.addMethod("throw",sy);b.addMethod("throws",sy);b.addMethod("Throw",sy);function Ib(t,e){e&&D(this,"message",e);var r=D(this,"object"),n=D(this,"itself"),i=typeof r=="function"&&!n?r.prototype[t]:r[t];this.assert(typeof i=="function","expected #{this} to respond to "+ze(t),"expected #{this} to not respond to "+ze(t))}O(Ib,"respondTo");b.addMethod("respondTo",Ib);b.addMethod("respondsTo",Ib);b.addProperty("itself",function(){D(this,"itself",!0)});function Cb(t,e){e&&D(this,"message",e);var r=D(this,"object"),n=t(r);this.assert(n,"expected #{this} to satisfy "+Ea(t),"expected #{this} to not satisfy"+Ea(t),!D(this,"negate"),n)}O(Cb,"satisfy");b.addMethod("satisfy",Cb);b.addMethod("satisfies",Cb);function Ob(t,e,r){r&&D(this,"message",r);var n=D(this,"object"),i=D(this,"message"),o=D(this,"ssfi");new b(n,i,o,!0).is.numeric;let s="A `delta` value is required for `closeTo`";if(e==null)throw new Ge(i?`${i}: ${s}`:s,void 0,o);if(new b(e,i,o,!0).is.numeric,s="A `expected` value is required for `closeTo`",t==null)throw new Ge(i?`${i}: ${s}`:s,void 0,o);new b(t,i,o,!0).is.numeric;let l=O(m=>m<0n?-m:m,"abs"),u=O(m=>parseFloat(parseFloat(m).toPrecision(12)),"strip");this.assert(u(l(n-t))<=e,"expected #{this} to be close to "+t+" +/- "+e,"expected #{this} not to be close to "+t+" +/- "+e)}O(Ob,"closeTo");b.addMethod("closeTo",Ob);b.addMethod("approximately",Ob);function MF(t,e,r,n,i){let o=Array.from(e),s=Array.from(t);if(!n){if(s.length!==o.length)return!1;o=o.slice()}return s.every(function(l,u){if(i)return r?r(l,o[u]):l===o[u];if(!r){var m=o.indexOf(l);return m===-1?!1:(n||o.splice(m,1),!0)}return o.some(function(d,g){return r(l,d)?(n||o.splice(g,1),!0):!1})})}O(MF,"isSubsetOf");b.addMethod("members",function(t,e){e&&D(this,"message",e);var r=D(this,"object"),n=D(this,"message"),i=D(this,"ssfi");new b(r,n,i,!0).to.be.iterable,new b(t,n,i,!0).to.be.iterable;var o=D(this,"contains"),s=D(this,"ordered"),l,u,m;o?(l=s?"an ordered superset":"a superset",u="expected #{this} to be "+l+" of #{exp}",m="expected #{this} to not be "+l+" of #{exp}"):(l=s?"ordered members":"members",u="expected #{this} to have the same "+l+" as #{exp}",m="expected #{this} to not have the same "+l+" as #{exp}");var d=D(this,"deep")?D(this,"eql"):void 0;this.assert(MF(t,r,d,o,s),u,m,t,r,!0)});b.addProperty("iterable",function(t){t&&D(this,"message",t);var e=D(this,"object");this.assert(e!=null&&e[Symbol.iterator],"expected #{this} to be an iterable","expected #{this} to not be an iterable",e)});function LF(t,e){e&&D(this,"message",e);var r=D(this,"object"),n=D(this,"message"),i=D(this,"ssfi"),o=D(this,"contains"),s=D(this,"deep"),l=D(this,"eql");new b(t,n,i,!0).to.be.an("array"),o?this.assert(t.some(function(u){return r.indexOf(u)>-1}),"expected #{this} to contain one of #{exp}","expected #{this} to not contain one of #{exp}",t,r):s?this.assert(t.some(function(u){return l(r,u)}),"expected #{this} to deeply equal one of #{exp}","expected #{this} to deeply equal one of #{exp}",t,r):this.assert(t.indexOf(r)>-1,"expected #{this} to be one of #{exp}","expected #{this} to not be one of #{exp}",t,r)}O(LF,"oneOf");b.addMethod("oneOf",LF);function Nb(t,e,r){r&&D(this,"message",r);var n=D(this,"object"),i=D(this,"message"),o=D(this,"ssfi");new b(n,i,o,!0).is.a("function");var s;e?(new b(t,i,o,!0).to.have.property(e),s=t[e]):(new b(t,i,o,!0).is.a("function"),s=t()),n();var l=e==null?t():t[e],u=e==null?s:"."+e;D(this,"deltaMsgObj",u),D(this,"initialDeltaValue",s),D(this,"finalDeltaValue",l),D(this,"deltaBehavior","change"),D(this,"realDelta",l!==s),this.assert(s!==l,"expected "+u+" to change","expected "+u+" to not change")}O(Nb,"assertChanges");b.addMethod("change",Nb);b.addMethod("changes",Nb);function Ub(t,e,r){r&&D(this,"message",r);var n=D(this,"object"),i=D(this,"message"),o=D(this,"ssfi");new b(n,i,o,!0).is.a("function");var s;e?(new b(t,i,o,!0).to.have.property(e),s=t[e]):(new b(t,i,o,!0).is.a("function"),s=t()),new b(s,i,o,!0).is.a("number"),n();var l=e==null?t():t[e],u=e==null?s:"."+e;D(this,"deltaMsgObj",u),D(this,"initialDeltaValue",s),D(this,"finalDeltaValue",l),D(this,"deltaBehavior","increase"),D(this,"realDelta",l-s),this.assert(l-s>0,"expected "+u+" to increase","expected "+u+" to not increase")}O(Ub,"assertIncreases");b.addMethod("increase",Ub);b.addMethod("increases",Ub);function Hb(t,e,r){r&&D(this,"message",r);var n=D(this,"object"),i=D(this,"message"),o=D(this,"ssfi");new b(n,i,o,!0).is.a("function");var s;e?(new b(t,i,o,!0).to.have.property(e),s=t[e]):(new b(t,i,o,!0).is.a("function"),s=t()),new b(s,i,o,!0).is.a("number"),n();var l=e==null?t():t[e],u=e==null?s:"."+e;D(this,"deltaMsgObj",u),D(this,"initialDeltaValue",s),D(this,"finalDeltaValue",l),D(this,"deltaBehavior","decrease"),D(this,"realDelta",s-l),this.assert(l-s<0,"expected "+u+" to decrease","expected "+u+" to not decrease")}O(Hb,"assertDecreases");b.addMethod("decrease",Hb);b.addMethod("decreases",Hb);function FF(t,e){e&&D(this,"message",e);var r=D(this,"deltaMsgObj"),n=D(this,"initialDeltaValue"),i=D(this,"finalDeltaValue"),o=D(this,"deltaBehavior"),s=D(this,"realDelta"),l;o==="change"?l=Math.abs(i-n)===Math.abs(t):l=s===Math.abs(t),this.assert(l,"expected "+r+" to "+o+" by "+t,"expected "+r+" to not "+o+" by "+t)}O(FF,"assertDelta");b.addMethod("by",FF);b.addProperty("extensible",function(){var t=D(this,"object"),e=t===Object(t)&&Object.isExtensible(t);this.assert(e,"expected #{this} to be extensible","expected #{this} to not be extensible")});b.addProperty("sealed",function(){var t=D(this,"object"),e=t===Object(t)?Object.isSealed(t):!0;this.assert(e,"expected #{this} to be sealed","expected #{this} to not be sealed")});b.addProperty("frozen",function(){var t=D(this,"object"),e=t===Object(t)?Object.isFrozen(t):!0;this.assert(e,"expected #{this} to be frozen","expected #{this} to not be frozen")});b.addProperty("finite",function(t){var e=D(this,"object");this.assert(typeof e=="number"&&isFinite(e),"expected #{this} to be a finite number","expected #{this} to not be a finite number")});function Yh(t,e){return t===e?!0:typeof e!=typeof t?!1:typeof t!="object"||t===null?t===e:e?Array.isArray(t)?Array.isArray(e)?t.every(function(r){return e.some(function(n){return Yh(r,n)})}):!1:t instanceof Date?e instanceof Date?t.getTime()===e.getTime():!1:Object.keys(t).every(function(r){var n=t[r],i=e[r];return typeof n=="object"&&n!==null&&i!==null?Yh(n,i):typeof n=="function"?n(i):i===n}):!1}O(Yh,"compareSubset");b.addMethod("containSubset",function(t){let e=De(this,"object"),r=hr.showDiff;this.assert(Yh(t,e),"expected #{act} to contain subset #{exp}","expected #{act} to not contain subset #{exp}",t,e,r)});function Zh(t,e){return new b(t,e)}O(Zh,"expect");Zh.fail=function(t,e,r,n){throw arguments.length<2&&(r=t,t=void 0),r=r||"expect.fail()",new Ge(r,{actual:t,expected:e,operator:n},Zh.fail)};var IF={};ob(IF,{Should:()=>U7,should:()=>N7});function Bb(){function t(){return this instanceof String||this instanceof Number||this instanceof Boolean||typeof Symbol=="function"&&this instanceof Symbol||typeof BigInt=="function"&&this instanceof BigInt?new b(this.valueOf(),null,t):new b(this,null,t)}O(t,"shouldGetter");function e(n){Object.defineProperty(this,"should",{value:n,enumerable:!0,configurable:!0,writable:!0})}O(e,"shouldSetter"),Object.defineProperty(Object.prototype,"should",{set:e,get:t,configurable:!0});var r={};return r.fail=function(n,i,o,s){throw arguments.length<2&&(o=n,n=void 0),o=o||"should.fail()",new Ge(o,{actual:n,expected:i,operator:s},r.fail)},r.equal=function(n,i,o){new b(n,o).to.equal(i)},r.Throw=function(n,i,o,s){new b(n,s).to.Throw(i,o)},r.exist=function(n,i){new b(n,i).to.exist},r.not={},r.not.equal=function(n,i,o){new b(n,o).to.not.equal(i)},r.not.Throw=function(n,i,o,s){new b(n,s).to.not.Throw(i,o)},r.not.exist=function(n,i){new b(n,i).to.not.exist},r.throw=r.Throw,r.not.throw=r.not.Throw,r}O(Bb,"loadShould");var N7=Bb,U7=Bb;function v(t,e){var r=new b(null,null,v,!0);r.assert(t,e,"[ negation message unavailable ]")}O(v,"assert");v.fail=function(t,e,r,n){throw arguments.length<2&&(r=t,t=void 0),r=r||"assert.fail()",new Ge(r,{actual:t,expected:e,operator:n},v.fail)};v.isOk=function(t,e){new b(t,e,v.isOk,!0).is.ok};v.isNotOk=function(t,e){new b(t,e,v.isNotOk,!0).is.not.ok};v.equal=function(t,e,r){var n=new b(t,r,v.equal,!0);n.assert(e==De(n,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",e,t,!0)};v.notEqual=function(t,e,r){var n=new b(t,r,v.notEqual,!0);n.assert(e!=De(n,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",e,t,!0)};v.strictEqual=function(t,e,r){new b(t,r,v.strictEqual,!0).to.equal(e)};v.notStrictEqual=function(t,e,r){new b(t,r,v.notStrictEqual,!0).to.not.equal(e)};v.deepEqual=v.deepStrictEqual=function(t,e,r){new b(t,r,v.deepEqual,!0).to.eql(e)};v.notDeepEqual=function(t,e,r){new b(t,r,v.notDeepEqual,!0).to.not.eql(e)};v.isAbove=function(t,e,r){new b(t,r,v.isAbove,!0).to.be.above(e)};v.isAtLeast=function(t,e,r){new b(t,r,v.isAtLeast,!0).to.be.least(e)};v.isBelow=function(t,e,r){new b(t,r,v.isBelow,!0).to.be.below(e)};v.isAtMost=function(t,e,r){new b(t,r,v.isAtMost,!0).to.be.most(e)};v.isTrue=function(t,e){new b(t,e,v.isTrue,!0).is.true};v.isNotTrue=function(t,e){new b(t,e,v.isNotTrue,!0).to.not.equal(!0)};v.isFalse=function(t,e){new b(t,e,v.isFalse,!0).is.false};v.isNotFalse=function(t,e){new b(t,e,v.isNotFalse,!0).to.not.equal(!1)};v.isNull=function(t,e){new b(t,e,v.isNull,!0).to.equal(null)};v.isNotNull=function(t,e){new b(t,e,v.isNotNull,!0).to.not.equal(null)};v.isNaN=function(t,e){new b(t,e,v.isNaN,!0).to.be.NaN};v.isNotNaN=function(t,e){new b(t,e,v.isNotNaN,!0).not.to.be.NaN};v.exists=function(t,e){new b(t,e,v.exists,!0).to.exist};v.notExists=function(t,e){new b(t,e,v.notExists,!0).to.not.exist};v.isUndefined=function(t,e){new b(t,e,v.isUndefined,!0).to.equal(void 0)};v.isDefined=function(t,e){new b(t,e,v.isDefined,!0).to.not.equal(void 0)};v.isCallable=function(t,e){new b(t,e,v.isCallable,!0).is.callable};v.isNotCallable=function(t,e){new b(t,e,v.isNotCallable,!0).is.not.callable};v.isObject=function(t,e){new b(t,e,v.isObject,!0).to.be.a("object")};v.isNotObject=function(t,e){new b(t,e,v.isNotObject,!0).to.not.be.a("object")};v.isArray=function(t,e){new b(t,e,v.isArray,!0).to.be.an("array")};v.isNotArray=function(t,e){new b(t,e,v.isNotArray,!0).to.not.be.an("array")};v.isString=function(t,e){new b(t,e,v.isString,!0).to.be.a("string")};v.isNotString=function(t,e){new b(t,e,v.isNotString,!0).to.not.be.a("string")};v.isNumber=function(t,e){new b(t,e,v.isNumber,!0).to.be.a("number")};v.isNotNumber=function(t,e){new b(t,e,v.isNotNumber,!0).to.not.be.a("number")};v.isNumeric=function(t,e){new b(t,e,v.isNumeric,!0).is.numeric};v.isNotNumeric=function(t,e){new b(t,e,v.isNotNumeric,!0).is.not.numeric};v.isFinite=function(t,e){new b(t,e,v.isFinite,!0).to.be.finite};v.isBoolean=function(t,e){new b(t,e,v.isBoolean,!0).to.be.a("boolean")};v.isNotBoolean=function(t,e){new b(t,e,v.isNotBoolean,!0).to.not.be.a("boolean")};v.typeOf=function(t,e,r){new b(t,r,v.typeOf,!0).to.be.a(e)};v.notTypeOf=function(t,e,r){new b(t,r,v.notTypeOf,!0).to.not.be.a(e)};v.instanceOf=function(t,e,r){new b(t,r,v.instanceOf,!0).to.be.instanceOf(e)};v.notInstanceOf=function(t,e,r){new b(t,r,v.notInstanceOf,!0).to.not.be.instanceOf(e)};v.include=function(t,e,r){new b(t,r,v.include,!0).include(e)};v.notInclude=function(t,e,r){new b(t,r,v.notInclude,!0).not.include(e)};v.deepInclude=function(t,e,r){new b(t,r,v.deepInclude,!0).deep.include(e)};v.notDeepInclude=function(t,e,r){new b(t,r,v.notDeepInclude,!0).not.deep.include(e)};v.nestedInclude=function(t,e,r){new b(t,r,v.nestedInclude,!0).nested.include(e)};v.notNestedInclude=function(t,e,r){new b(t,r,v.notNestedInclude,!0).not.nested.include(e)};v.deepNestedInclude=function(t,e,r){new b(t,r,v.deepNestedInclude,!0).deep.nested.include(e)};v.notDeepNestedInclude=function(t,e,r){new b(t,r,v.notDeepNestedInclude,!0).not.deep.nested.include(e)};v.ownInclude=function(t,e,r){new b(t,r,v.ownInclude,!0).own.include(e)};v.notOwnInclude=function(t,e,r){new b(t,r,v.notOwnInclude,!0).not.own.include(e)};v.deepOwnInclude=function(t,e,r){new b(t,r,v.deepOwnInclude,!0).deep.own.include(e)};v.notDeepOwnInclude=function(t,e,r){new b(t,r,v.notDeepOwnInclude,!0).not.deep.own.include(e)};v.match=function(t,e,r){new b(t,r,v.match,!0).to.match(e)};v.notMatch=function(t,e,r){new b(t,r,v.notMatch,!0).to.not.match(e)};v.property=function(t,e,r){new b(t,r,v.property,!0).to.have.property(e)};v.notProperty=function(t,e,r){new b(t,r,v.notProperty,!0).to.not.have.property(e)};v.propertyVal=function(t,e,r,n){new b(t,n,v.propertyVal,!0).to.have.property(e,r)};v.notPropertyVal=function(t,e,r,n){new b(t,n,v.notPropertyVal,!0).to.not.have.property(e,r)};v.deepPropertyVal=function(t,e,r,n){new b(t,n,v.deepPropertyVal,!0).to.have.deep.property(e,r)};v.notDeepPropertyVal=function(t,e,r,n){new b(t,n,v.notDeepPropertyVal,!0).to.not.have.deep.property(e,r)};v.ownProperty=function(t,e,r){new b(t,r,v.ownProperty,!0).to.have.own.property(e)};v.notOwnProperty=function(t,e,r){new b(t,r,v.notOwnProperty,!0).to.not.have.own.property(e)};v.ownPropertyVal=function(t,e,r,n){new b(t,n,v.ownPropertyVal,!0).to.have.own.property(e,r)};v.notOwnPropertyVal=function(t,e,r,n){new b(t,n,v.notOwnPropertyVal,!0).to.not.have.own.property(e,r)};v.deepOwnPropertyVal=function(t,e,r,n){new b(t,n,v.deepOwnPropertyVal,!0).to.have.deep.own.property(e,r)};v.notDeepOwnPropertyVal=function(t,e,r,n){new b(t,n,v.notDeepOwnPropertyVal,!0).to.not.have.deep.own.property(e,r)};v.nestedProperty=function(t,e,r){new b(t,r,v.nestedProperty,!0).to.have.nested.property(e)};v.notNestedProperty=function(t,e,r){new b(t,r,v.notNestedProperty,!0).to.not.have.nested.property(e)};v.nestedPropertyVal=function(t,e,r,n){new b(t,n,v.nestedPropertyVal,!0).to.have.nested.property(e,r)};v.notNestedPropertyVal=function(t,e,r,n){new b(t,n,v.notNestedPropertyVal,!0).to.not.have.nested.property(e,r)};v.deepNestedPropertyVal=function(t,e,r,n){new b(t,n,v.deepNestedPropertyVal,!0).to.have.deep.nested.property(e,r)};v.notDeepNestedPropertyVal=function(t,e,r,n){new b(t,n,v.notDeepNestedPropertyVal,!0).to.not.have.deep.nested.property(e,r)};v.lengthOf=function(t,e,r){new b(t,r,v.lengthOf,!0).to.have.lengthOf(e)};v.hasAnyKeys=function(t,e,r){new b(t,r,v.hasAnyKeys,!0).to.have.any.keys(e)};v.hasAllKeys=function(t,e,r){new b(t,r,v.hasAllKeys,!0).to.have.all.keys(e)};v.containsAllKeys=function(t,e,r){new b(t,r,v.containsAllKeys,!0).to.contain.all.keys(e)};v.doesNotHaveAnyKeys=function(t,e,r){new b(t,r,v.doesNotHaveAnyKeys,!0).to.not.have.any.keys(e)};v.doesNotHaveAllKeys=function(t,e,r){new b(t,r,v.doesNotHaveAllKeys,!0).to.not.have.all.keys(e)};v.hasAnyDeepKeys=function(t,e,r){new b(t,r,v.hasAnyDeepKeys,!0).to.have.any.deep.keys(e)};v.hasAllDeepKeys=function(t,e,r){new b(t,r,v.hasAllDeepKeys,!0).to.have.all.deep.keys(e)};v.containsAllDeepKeys=function(t,e,r){new b(t,r,v.containsAllDeepKeys,!0).to.contain.all.deep.keys(e)};v.doesNotHaveAnyDeepKeys=function(t,e,r){new b(t,r,v.doesNotHaveAnyDeepKeys,!0).to.not.have.any.deep.keys(e)};v.doesNotHaveAllDeepKeys=function(t,e,r){new b(t,r,v.doesNotHaveAllDeepKeys,!0).to.not.have.all.deep.keys(e)};v.throws=function(t,e,r,n){(typeof e=="string"||e instanceof RegExp)&&(r=e,e=null);var i=new b(t,n,v.throws,!0).to.throw(e,r);return De(i,"object")};v.doesNotThrow=function(t,e,r,n){(typeof e=="string"||e instanceof RegExp)&&(r=e,e=null),new b(t,n,v.doesNotThrow,!0).to.not.throw(e,r)};v.operator=function(t,e,r,n){var i;switch(e){case"==":i=t==r;break;case"===":i=t===r;break;case">":i=t>r;break;case">=":i=t>=r;break;case"<":i=t<r;break;case"<=":i=t<=r;break;case"!=":i=t!=r;break;case"!==":i=t!==r;break;default:throw n=n&&n+": ",new Ge(n+'Invalid operator "'+e+'"',void 0,v.operator)}var o=new b(i,n,v.operator,!0);o.assert(De(o,"object")===!0,"expected "+ze(t)+" to be "+e+" "+ze(r),"expected "+ze(t)+" to not be "+e+" "+ze(r))};v.closeTo=function(t,e,r,n){new b(t,n,v.closeTo,!0).to.be.closeTo(e,r)};v.approximately=function(t,e,r,n){new b(t,n,v.approximately,!0).to.be.approximately(e,r)};v.sameMembers=function(t,e,r){new b(t,r,v.sameMembers,!0).to.have.same.members(e)};v.notSameMembers=function(t,e,r){new b(t,r,v.notSameMembers,!0).to.not.have.same.members(e)};v.sameDeepMembers=function(t,e,r){new b(t,r,v.sameDeepMembers,!0).to.have.same.deep.members(e)};v.notSameDeepMembers=function(t,e,r){new b(t,r,v.notSameDeepMembers,!0).to.not.have.same.deep.members(e)};v.sameOrderedMembers=function(t,e,r){new b(t,r,v.sameOrderedMembers,!0).to.have.same.ordered.members(e)};v.notSameOrderedMembers=function(t,e,r){new b(t,r,v.notSameOrderedMembers,!0).to.not.have.same.ordered.members(e)};v.sameDeepOrderedMembers=function(t,e,r){new b(t,r,v.sameDeepOrderedMembers,!0).to.have.same.deep.ordered.members(e)};v.notSameDeepOrderedMembers=function(t,e,r){new b(t,r,v.notSameDeepOrderedMembers,!0).to.not.have.same.deep.ordered.members(e)};v.includeMembers=function(t,e,r){new b(t,r,v.includeMembers,!0).to.include.members(e)};v.notIncludeMembers=function(t,e,r){new b(t,r,v.notIncludeMembers,!0).to.not.include.members(e)};v.includeDeepMembers=function(t,e,r){new b(t,r,v.includeDeepMembers,!0).to.include.deep.members(e)};v.notIncludeDeepMembers=function(t,e,r){new b(t,r,v.notIncludeDeepMembers,!0).to.not.include.deep.members(e)};v.includeOrderedMembers=function(t,e,r){new b(t,r,v.includeOrderedMembers,!0).to.include.ordered.members(e)};v.notIncludeOrderedMembers=function(t,e,r){new b(t,r,v.notIncludeOrderedMembers,!0).to.not.include.ordered.members(e)};v.includeDeepOrderedMembers=function(t,e,r){new b(t,r,v.includeDeepOrderedMembers,!0).to.include.deep.ordered.members(e)};v.notIncludeDeepOrderedMembers=function(t,e,r){new b(t,r,v.notIncludeDeepOrderedMembers,!0).to.not.include.deep.ordered.members(e)};v.oneOf=function(t,e,r){new b(t,r,v.oneOf,!0).to.be.oneOf(e)};v.isIterable=function(t,e){if(t==null||!t[Symbol.iterator])throw e=e?`${e} expected ${ze(t)} to be an iterable`:`expected ${ze(t)} to be an iterable`,new Ge(e,void 0,v.isIterable)};v.changes=function(t,e,r,n){arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.changes,!0).to.change(e,r)};v.changesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.changesBy,!0).to.change(e,r).by(n)};v.doesNotChange=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.doesNotChange,!0).to.not.change(e,r)};v.changesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.changesButNotBy,!0).to.change(e,r).but.not.by(n)};v.increases=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.increases,!0).to.increase(e,r)};v.increasesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.increasesBy,!0).to.increase(e,r).by(n)};v.doesNotIncrease=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.doesNotIncrease,!0).to.not.increase(e,r)};v.increasesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.increasesButNotBy,!0).to.increase(e,r).but.not.by(n)};v.decreases=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.decreases,!0).to.decrease(e,r)};v.decreasesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.decreasesBy,!0).to.decrease(e,r).by(n)};v.doesNotDecrease=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.doesNotDecrease,!0).to.not.decrease(e,r)};v.doesNotDecreaseBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);return new b(t,i,v.doesNotDecreaseBy,!0).to.not.decrease(e,r).by(n)};v.decreasesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.decreasesButNotBy,!0).to.decrease(e,r).but.not.by(n)};v.ifError=function(t){if(t)throw t};v.isExtensible=function(t,e){new b(t,e,v.isExtensible,!0).to.be.extensible};v.isNotExtensible=function(t,e){new b(t,e,v.isNotExtensible,!0).to.not.be.extensible};v.isSealed=function(t,e){new b(t,e,v.isSealed,!0).to.be.sealed};v.isNotSealed=function(t,e){new b(t,e,v.isNotSealed,!0).to.not.be.sealed};v.isFrozen=function(t,e){new b(t,e,v.isFrozen,!0).to.be.frozen};v.isNotFrozen=function(t,e){new b(t,e,v.isNotFrozen,!0).to.not.be.frozen};v.isEmpty=function(t,e){new b(t,e,v.isEmpty,!0).to.be.empty};v.isNotEmpty=function(t,e){new b(t,e,v.isNotEmpty,!0).to.not.be.empty};v.containsSubset=function(t,e,r){new b(t,r).to.containSubset(e)};v.doesNotContainSubset=function(t,e,r){new b(t,r).to.not.containSubset(e)};var H7=[["isOk","ok"],["isNotOk","notOk"],["throws","throw"],["throws","Throw"],["isExtensible","extensible"],["isNotExtensible","notExtensible"],["isSealed","sealed"],["isNotSealed","notSealed"],["isFrozen","frozen"],["isNotFrozen","notFrozen"],["isEmpty","empty"],["isNotEmpty","notEmpty"],["isCallable","isFunction"],["isNotCallable","isNotFunction"],["containsSubset","containSubset"]];for(let[t,e]of H7)v[e]=v[t];var zL=[];function CF(t){let e={use:CF,AssertionError:Ge,util:$h,config:hr,expect:Zh,assert:v,Assertion:b,...IF};return~zL.indexOf(t)||(t(e,$h),zL.push(t)),e}O(CF,"use");var ku=class{constructor(e,r,n){this._lineNumber=e,this._text=r,this._isLastLine=n}get lineNumber(){return this._lineNumber}get text(){return this._text}get range(){return new Y(this._lineNumber,0,this._lineNumber,this._text.length)}get rangeIncludingLineBreak(){return this._isLastLine?this.range:new Y(this._lineNumber,0,this._lineNumber+1,0)}get rangeTrimmed(){let e=/^(\s*)/.exec(this._text)[1].length;if(e===this._text.length)return;let r=this.text.trimEnd().length;return new Y(this._lineNumber,e,this._lineNumber,r)}get isEmptyOrWhitespace(){return this.rangeTrimmed==null}};var OF=on(require("node:path"),1),cy=class{get uri(){return this._uri}get filename(){return OF.default.basename(this._uri.path)}get languageId(){return this._languageId}get version(){return this._version}get lineCount(){return this._lineCount}get range(){let{end:e}=this.lineAt(this.lineCount-1).range;return new Y(0,0,e.line,e.character)}get eol(){return this._eol===`
`?"LF":"CRLF"}constructor(e,r,n,i,o){this._uri=e,this._languageId=r,this._version=n,this._eol=i,this._lines=o,this._lineCount=o.length,this._lineStarts=null,this._cachedTextValue=null}update(e){this._lines=e,this._lineCount=e.length,this._lineStarts=null,this._cachedTextValue=null}lineAt(e){let r;if(e instanceof _e?r=e.line:typeof e=="number"&&(r=e),typeof r!="number"||r<0||Math.floor(r)!==r)throw new Error("Illegal value for `line`");return r=Math.min(r,this._lines.length-1),new ku(r,this._lines[r],r===this._lines.length-1)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.line-1)+e.character}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();let r=this._lineStarts.getIndexOf(e),n=this._lines[r.index].length;return new _e(r.index,Math.min(r.remainder,n))}getText(e){if(e===void 0)return this._cachedTextValue==null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue;if(e=this._validateRange(e),e.isEmpty)return"";if(e.isSingleLine)return this._lines[e.start.line].substring(e.start.character,e.end.character);let r=this._eol,n=e.start.line,i=e.end.line,o=[];o.push(this._lines[n].substring(e.start.character));for(let s=n+1;s<i;s++)o.push(this._lines[s]);return o.push(this._lines[i].substring(0,e.end.character)),o.join(r)}_validateRange(e){if(!(e instanceof Y))throw new Error("Invalid argument");let r=this._validatePosition(e.start),n=this._validatePosition(e.end);return r===e.start&&n===e.end?e:new Y(r.line,r.character,n.line,n.character)}_validatePosition(e){if(!(e instanceof _e))throw new Error("Invalid argument");if(this._lines.length===0)return e.with(0,0);let{line:r,character:n}=e,i=!1;if(r<0)r=0,n=0,i=!0;else if(r>=this._lines.length)r=this._lines.length-1,n=this._lines[r].length,i=!0;else{let o=this._lines[r].length;n<0?(n=0,i=!0):n>o&&(n=o,i=!0)}return i?new _e(r,n):e}_ensureLineStarts(){if(!this._lineStarts){let e=this._eol.length,r=this._lines.length,n=new Uint32Array(r);for(let i=0;i<r;i++)n[i]=this._lines[i].length+e;this._lineStarts=new Vb(n)}}};function W7(t){if(t<0)return 0;let e=4294967295;return t>e?e:t|0}var Vb=class{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}getCount(){return this.values.length}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=W7(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let r=this.prefixSumValidIndex[0]+1;r===0&&(this.prefixSum[0]=this.values[0],r++),e>=this.values.length&&(e=this.values.length-1);for(let n=r;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let r=0,n=this.values.length-1,i=0,o=0,s=0;for(;r<=n;)if(i=r+(n-r)/2|0,o=this.prefixSum[i],s=o-this.values[i],e<s)n=i-1;else if(e>=o)r=i+1;else break;return new Wb(i,e-s)}},Wb=class{constructor(e,r){this.index=e;this.remainder=r;this._prefixSumIndexOfResultBrand=void 0;this.index=e,this.remainder=r}};var ly=class{constructor(e){this.client=e;this.cursorlessVersion="0.0.0";this.workspaceFolders=void 0;this.disposables=[];this.quickPickReturnValue=void 0;this.onDidCloseTextDocument=Au;this.onDidChangeActiveTextEditor=Au;this.onDidChangeVisibleTextEditors=Au;this.onDidChangeTextEditorSelection=Au;this.onDidChangeTextEditorVisibleRanges=Au;this.configuration=new tu,this.keyValueStore=new ru,this.messages=new nu,this.clipboard=new Jl(this.client),this.capabilities=new vh,this.editorMap=new Map,this.documentMap=new Map,this.activeWindow=void 0,this.activeBuffer=void 0}async init(){let e=await kM(this.client);this.assetsRoot_=$b.default.join(e,"assets"),this.cursorlessNeovimPath=$b.default.join(e,"node","cursorless-neovim")}async showQuickPick(e,r){throw Error("showQuickPick Not implemented")}async setHighlightRanges(e,r,n){throw Error("setHighlightRanges Not implemented")}async flashRanges(e){console.debug("flashRanges Not implemented")}get assetsRoot(){if(this.assetsRoot_==null)throw Error("Field `assetsRoot` has not yet been mocked");return this.assetsRoot_}get runMode(){return OL()}get activeTextEditor(){return this.getActiveTextEditor()}get activeEditableTextEditor(){return this.getActiveTextEditor()}getActiveTextEditor(){let e=this.activeWindow?this.getTextEditor(this.activeWindow):void 0;return e===void 0&&console.debug("getActiveTextEditor: editor is undefined"),e}getTextEditor(e){for(let[r,n]of this.editorMap)if(r.id===e.id)return n}getTextDocument(e){for(let[r,n]of this.documentMap)if(r.id===e.id)return n}get visibleTextEditors(){return Array.from(this.editorMap.values())}get visibleNotebookEditors(){return[]}getEditableTextEditor(e){return e}async findInDocument(e,r){throw Error("findInDocument Not implemented")}async findInWorkspace(e){throw Error("findInWorkspace Not implemented")}async openTextDocument(e){throw Error("openTextDocument Not implemented")}async openUntitledTextDocument(e){throw Error("openUntitledTextDocument Not implemented")}async showInputBox(e){throw Error("TextDocumentChangeEvent Not implemented")}async executeCommand(e,...r){throw new Error("executeCommand Method not implemented.")}onDidChangeTextDocument(e){return NM(e)}onDidOpenTextDocument(e,r,n){return UM(e,r,n)}async updateTextEditor(e=!1){let r=await this.client.window,n=await r.buffer,i=await n.lines,o=i;i.length>=30&&(o=i.slice(0,15).concat(["..."]).concat(i.slice(-15))),console.debug(`updateTextEditor(): window:${r.id}, buffer:${n.id}, lines=${JSON.stringify(o)}`);let s,l;e?(s=[],l=[]):(s=await xh(r,this.client),l=await RM(r,this.client,i));let u=this.toNeovimEditor(r,n,i,l,s);return zr().emitEvent("onDidOpenTextDocument",u.document),u}toNeovimEditor(e,r,n,i,o){let s=this.getTextDocument(r),l=this.getTextEditor(e);return s?(console.debug(`toNeovimEditor(): updating document: buffer=${r.id}`),s.update(n)):(console.debug(`toNeovimEditor(): creating new document: buffer=${r.id}`),s=new cy($M.parse(`neovim://${r.id}`),"plaintext",1,`
`,n),this.documentMap.set(r,s)),l?(console.debug(`toNeovimEditor(): updating editor: window=${e.id}`),l.updateDocument(i,o,s)):(console.debug(`toNeovimEditor(): creating new editor: window=${e.id}`),l=new wh(Cx(),this.client,this,e,s,i,o),this.editorMap.set(e,l)),this.activeBuffer=r,this.activeWindow=e,this.activeTextEditor}handleCommandError(e){LM(this.client,e.message)}disposeOnExit(...e){return this.disposables.push(...e),()=>(0,NF.pull)(this.disposables,...e)}};function Au(){return{dispose(){}}}var uy=class{constructor(e){this.client=e;this.signals={prePhrase:{getVersion:async()=>null}}}async getFocusedElementType(){let e=await this.client.mode;return e.mode==="t"||e.mode==="nt"?"terminal":"textEditor"}};var j7=BigInt(1e9);function UF(t,e=BigInt(1e6)){return Number(t*e/j7)/Number(e)}async function py(t,e=[],r=[],n,i,o,s,l){let u={documentContents:n.document.getText(),selections:n.selections.map(XR)};o!=null&&(u.marks=o),l!=null&&(u.metadata=l),e.includes("clipboard")||(u.clipboard=await i.clipboard.readText()),e.includes("visibleRanges")||(u.visibleRanges=n.visibleRanges.map(Zc));for(let m of ps){let d=t?.get(m),g=`${m}Mark`;d!=null&&!e.includes(g)&&(u[g]=d.map(y=>y.toPlainObject()))}if(r.includes("timeOffsetSeconds")){let m=s?.startTimestamp;if(m==null)throw new Error("No start timestamp provided but time offset was requested");let d=process.hrtime.bigint()-m;u.timeOffsetSeconds=UF(d)}return u}var z7=on(yl(),1);function HF(t,e,r,n,i,o,s){return{commandServerApi:t,ide:i,neovimIDE:n,injectIde:s,scopeProvider:o,takeSnapshot(l,u,m,d,g){return py(e,l,u,m,d,g,void 0,void 0)},setStoredTarget(l,u,m){e.set(u,m?.map(d=>bM(l,d)))},hatTokenMap:r}}async function BF(t,e,r,n){let i={[FT]:async(...o)=>{(await t.mode).mode==="t"&&DM(t);try{await e.updateTextEditor();let l=await r.runCommandSafe(...o),u=Sm(o);if(await n.getFocusedElementType()==="terminal"&&Qo(u)){let d=l;"fallback"in d&&d.fallback.action==="insert"&&MM(t)}return l}catch(l){if(e.runMode!=="test"){let u=l;console.error(u.stack),e.handleCommandError(u)}throw l}},"cursorless.repeatPreviousCommand":Ne,"cursorless.showCheatsheet":Ne,"cursorless.internal.updateCheatsheetDefaults":Ne,"cursorless.recordTestCase":Ne,"cursorless.recordOneTestCaseThenPause":Ne,"cursorless.pauseRecording":Ne,"cursorless.resumeRecording":Ne,"cursorless.takeSnapshot":Ne,"cursorless.recordScopeTests.showUnimplementedFacets":Ne,"cursorless.recordScopeTests.saveActiveDocument":Ne,"cursorless.showQuickPick":Ne,"cursorless.showDocumentation":Ne,"cursorless.showInstallationDependencies":Ne,"cursorless.migrateSnippets":Ne,"cursorless.private.logQuickActions":Ne,"cursorless.toggleDecorations":Ne,"cursorless.recomputeDecorationStyles":Ne,"cursorless.showScopeVisualizer":Ne,"cursorless.hideScopeVisualizer":Ne,"cursorless.analyzeCommandHistory":Ne,"cursorless.keyboard.escape":Ne,"cursorless.keyboard.targeted.targetHat":Ne,"cursorless.keyboard.targeted.targetScope":Ne,"cursorless.keyboard.targeted.targetSelection":Ne,"cursorless.keyboard.targeted.clearTarget":Ne,"cursorless.keyboard.targeted.runActionOnTarget":Ne,"cursorless.keyboard.modal.modeOn":Ne,"cursorless.keyboard.modal.modeOff":Ne,"cursorless.keyboard.modal.modeToggle":Ne,"cursorless.keyboard.undoTarget":Ne,"cursorless.keyboard.redoTarget":Ne,"cursorless.tutorial.start":Ne,"cursorless.tutorial.next":Ne,"cursorless.tutorial.previous":Ne,"cursorless.tutorial.restart":Ne,"cursorless.tutorial.resume":Ne,"cursorless.tutorial.list":Ne,"cursorless.documentationOpened":Ne};Object.entries(i).map(([o,s])=>zr().registerCommand(o,s))}async function Ne(...t){console.debug(`dummyCommandHandler(): args=${t}`)}async function VF(t){let e=t.nvim,r=new ly(e);await r.init();let n=r.runMode==="production"?r:new cm(r,new om,r.runMode==="test",void 0),i=new wp,o=new uy(e),s=r.runMode==="test"?i:o,{commandApi:l,storedTargets:u,hatTokenMap:m,scopeProvider:d,injectIde:g}=await vM({ide:n,commandServerApi:s});await BF(e,r,l,s);let y={testHelpers:r.runMode==="test"?HF(i,u,m,r,n,d,g):void 0};zr().registerExtensionApi(EM,y),console.log("activate(): Cursorless extension loaded")}function WF(t){t.setOptions({dev:!1}),t.registerFunction("CursorlessLoadExtension",async()=>await q7(t),{sync:!1})}async function q7(t){console.log("==============================================================================================="),console.log("loadExtension(cursorless-neovim): start"),await VF(t),console.log("loadExtension(cursorless-neovim): done")}
/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)

itertools/dist/index.js:
  (* istanbul ignore else -- @preserve *)
  (* istanbul ignore if -- @preserve *)

chai/chai.js:
  (*!
   * Chai - flag utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - test utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - expectTypes utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getActual utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - message composition utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - transferFlags utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * http://chaijs.com
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - isProxyEnabled helper
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addLengthGuard utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getProperties utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - proxify utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addChainingMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteChainableMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - compareByInspect utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getOwnEnumerablePropertySymbols utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getOwnEnumerableProperties utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - isNaN utility
   * Copyright(c) 2012-2015 Sakthipriyan Vairamani <thechargingvolcano@gmail.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*! Bundled license information:
  
  deep-eql/index.js:
    (*!
     * deep-eql
     * Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>
     * MIT Licensed
     *)
    (*!
     * Check to see if the MemoizeMap has recorded a result of the two operands
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {MemoizeMap} memoizeMap
     * @returns {Boolean|null} result
    *)
    (*!
     * Set the result of the equality into the MemoizeMap
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {MemoizeMap} memoizeMap
     * @param {Boolean} result
    *)
    (*!
     * Primary Export
     *)
    (*!
     * The main logic of the `deepEqual` function.
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Object} [options] (optional) Additional options
     * @param {Array} [options.comparator] (optional) Override default algorithm, determining custom equality.
     * @param {Array} [options.memoize] (optional) Provide a custom memoization object which will cache the results of
        complex objects for a speed boost. By passing `false` you can disable memoization, but this will cause circular
        references to blow the stack.
     * @return {Boolean} equal match
    *)
    (*!
     * Compare two Regular Expressions for equality.
     *
     * @param {RegExp} leftHandOperand
     * @param {RegExp} rightHandOperand
     * @return {Boolean} result
     *)
    (*!
     * Compare two Sets/Maps for equality. Faster than other equality functions.
     *
     * @param {Set} leftHandOperand
     * @param {Set} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Simple equality for flat iterable objects such as Arrays, TypedArrays or Node.js buffers.
     *
     * @param {Iterable} leftHandOperand
     * @param {Iterable} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Simple equality for generator objects such as those returned by generator functions.
     *
     * @param {Iterable} leftHandOperand
     * @param {Iterable} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Determine if the given object has an @@iterator function.
     *
     * @param {Object} target
     * @return {Boolean} `true` if the object has an @@iterator function.
     *)
    (*!
     * Gets all iterator entries from the given Object. If the Object has no @@iterator function, returns an empty array.
     * This will consume the iterator - which could have side effects depending on the @@iterator implementation.
     *
     * @param {Object} target
     * @returns {Array} an array of entries from the @@iterator function
     *)
    (*!
     * Gets all entries from a Generator. This will consume the generator - which could have side effects.
     *
     * @param {Generator} target
     * @returns {Array} an array of entries from the Generator.
     *)
    (*!
     * Gets all own and inherited enumerable keys from a target.
     *
     * @param {Object} target
     * @returns {Array} an array of own and inherited enumerable keys from the target.
     *)
    (*!
     * Determines if two objects have matching values, given a set of keys. Defers to deepEqual for the equality check of
     * each key. If any value of the given key is not equal, the function will return false (early).
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Array} keys An array of keys to compare the values of leftHandOperand and rightHandOperand against
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Recursively check the equality of two Objects. Once basic sameness has been established it will defer to `deepEqual`
     * for each enumerable key in the object.
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Returns true if the argument is a primitive.
     *
     * This intentionally returns true for all objects that can be compared by reference,
     * including functions and symbols.
     *
     * @param {Mixed} value
     * @return {Boolean} result
     *)
  *)
*/
