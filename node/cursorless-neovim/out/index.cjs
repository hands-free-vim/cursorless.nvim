"use strict";var SB=Object.create;var Rp=Object.defineProperty;var vB=Object.getOwnPropertyDescriptor;var bB=Object.getOwnPropertyNames;var wB=Object.getPrototypeOf,EB=Object.prototype.hasOwnProperty;var Ga=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),V_=(t,e)=>{for(var r in e)Rp(t,r,{get:e[r],enumerable:!0})},W_=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of bB(e))!EB.call(t,i)&&i!==r&&Rp(t,i,{get:()=>e[i],enumerable:!(n=vB(e,i))||n.enumerable});return t};var Hr=(t,e,r)=>(r=t!=null?SB(wB(t)):{},W_(e||!t||!t.__esModule?Rp(r,"default",{value:t,enumerable:!0}):r,t)),_B=t=>W_(Rp({},"__esModule",{value:!0}),t);var LA=Ga((FA,Vm)=>{(function(t,e){typeof Vm=="object"&&Vm.exports?Vm.exports=e():t.nearley=e()})(FA,function(){function t(u,m,d){return this.id=++t.highestId,this.name=u,this.symbols=m,this.postprocess=d,this}t.highestId=0,t.prototype.toString=function(u){var m=typeof u>"u"?this.symbols.map(l).join(" "):this.symbols.slice(0,u).map(l).join(" ")+" \u25CF "+this.symbols.slice(u).map(l).join(" ");return this.name+" \u2192 "+m};function e(u,m,d,g){this.rule=u,this.dot=m,this.reference=d,this.data=[],this.wantedBy=g,this.isComplete=this.dot===u.symbols.length}e.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},e.prototype.nextState=function(u){var m=new e(this.rule,this.dot+1,this.reference,this.wantedBy);return m.left=this,m.right=u,m.isComplete&&(m.data=m.build(),m.right=void 0),m},e.prototype.build=function(){var u=[],m=this;do u.push(m.right.data),m=m.left;while(m.left);return u.reverse(),u},e.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,o.fail))};function r(u,m){this.grammar=u,this.index=m,this.states=[],this.wants={},this.scannable=[],this.completed={}}r.prototype.process=function(u){for(var m=this.states,d=this.wants,g=this.completed,y=0;y<m.length;y++){var T=m[y];if(T.isComplete){if(T.finish(),T.data!==o.fail){for(var w=T.wantedBy,E=w.length;E--;){var U=w[E];this.complete(U,T)}if(T.reference===this.index){var V=T.rule.name;(this.completed[V]=this.completed[V]||[]).push(T)}}}else{var V=T.rule.symbols[T.dot];if(typeof V!="string"){this.scannable.push(T);continue}if(d[V]){if(d[V].push(T),g.hasOwnProperty(V))for(var z=g[V],E=0;E<z.length;E++){var ne=z[E];this.complete(T,ne)}}else d[V]=[T],this.predict(V)}}},r.prototype.predict=function(u){for(var m=this.grammar.byName[u]||[],d=0;d<m.length;d++){var g=m[d],y=this.wants[u],T=new e(g,0,this.index,y);this.states.push(T)}},r.prototype.complete=function(u,m){var d=u.nextState(m);this.states.push(d)};function n(u,m){this.rules=u,this.start=m||this.rules[0].name;var d=this.byName={};this.rules.forEach(function(g){d.hasOwnProperty(g.name)||(d[g.name]=[]),d[g.name].push(g)})}n.fromCompiled=function(g,m){var d=g.Lexer;g.ParserStart&&(m=g.ParserStart,g=g.ParserRules);var g=g.map(function(T){return new t(T.name,T.symbols,T.postprocess)}),y=new n(g,m);return y.lexer=d,y};function i(){this.reset("")}i.prototype.reset=function(u,m){this.buffer=u,this.index=0,this.line=m?m.line:1,this.lastLineBreak=m?-m.col:0},i.prototype.next=function(){if(this.index<this.buffer.length){var u=this.buffer[this.index++];return u===`
`&&(this.line+=1,this.lastLineBreak=this.index),{value:u}}},i.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},i.prototype.formatError=function(u,m){var d=this.buffer;if(typeof d=="string"){var g=d.split(`
`).slice(Math.max(0,this.line-5),this.line),y=d.indexOf(`
`,this.index);y===-1&&(y=d.length);var T=this.index-this.lastLineBreak,w=String(this.line).length;return m+=" at line "+this.line+" col "+T+`:

`,m+=g.map(function(U,V){return E(this.line-g.length+V+1,w)+" "+U},this).join(`
`),m+=`
`+E("",w+T)+`^
`,m}else return m+" at index "+(this.index-1);function E(U,V){var z=String(U);return Array(V-z.length+1).join(" ")+z}};function o(u,m,d){if(u instanceof n)var g=u,d=m;else var g=n.fromCompiled(u,m);this.grammar=g,this.options={keepHistory:!1,lexer:g.lexer||new i};for(var y in d||{})this.options[y]=d[y];this.lexer=this.options.lexer,this.lexerState=void 0;var T=new r(g,0),w=this.table=[T];T.wants[g.start]=[],T.predict(g.start),T.process(),this.current=0}o.fail={},o.prototype.feed=function(u){var m=this.lexer;m.reset(u,this.lexerState);for(var d;;){try{if(d=m.next(),!d)break}catch(fe){var w=new r(this.grammar,this.current+1);this.table.push(w);var g=new Error(this.reportLexerError(fe));throw g.offset=this.current,g.token=fe.token,g}var y=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var T=this.current+1,w=new r(this.grammar,T);this.table.push(w);for(var E=d.text!==void 0?d.text:d.value,U=m.constructor===i?d.value:m.transform?.(d)??d,V=y.scannable,z=V.length;z--;){var ne=V[z],se=ne.rule.symbols[ne.dot];if(se.test?se.test(U):se.type?se.type===d.type:se.literal===E){var ce=ne.nextState({data:U,token:d,isToken:!0,reference:T-1});w.states.push(ce)}}if(w.process(),w.states.length===0){var g=new Error(this.reportError(d));throw g.offset=this.current,g.token=d,g}this.options.keepHistory&&(y.lexerState=m.save()),this.current++}return y&&(this.lexerState=m.save()),this.results=this.finish(),this},o.prototype.reportLexerError=function(u){var m,d,g=u.token;return g?(m="input "+JSON.stringify(g.text[0])+" (lexer error)",d=this.lexer.formatError(g,"Syntax error")):(m="input (lexer error)",d=u.message),this.reportErrorCommon(d,m)},o.prototype.reportError=function(u){var m=(u.type?u.type+" token: ":"")+JSON.stringify(u.value!==void 0?u.value:u),d=this.lexer.formatError(u,"Syntax error");return this.reportErrorCommon(d,m)},o.prototype.reportErrorCommon=function(u,m){var d=[];d.push(u);var g=this.table.length-2,y=this.table[g],T=y.states.filter(function(E){var U=E.rule.symbols[E.dot];return U&&typeof U!="string"});if(T.length===0)d.push("Unexpected "+m+`. I did not expect any more input. Here is the state of my parse table:
`),this.displayStateStack(y.states,d);else{d.push("Unexpected "+m+`. Instead, I was expecting to see one of the following:
`);var w=T.map(function(E){return this.buildFirstStateStack(E,[])||[E]},this);w.forEach(function(E){var U=E[0],V=U.rule.symbols[U.dot],z=this.getSymbolDisplay(V);d.push("A "+z+" based on:"),this.displayStateStack(E,d)},this)}return d.push(""),d.join(`
`)},o.prototype.displayStateStack=function(u,m){for(var d,g=0,y=0;y<u.length;y++){var T=u[y],w=T.rule.toString(T.dot);w===d?g++:(g>0&&m.push("    ^ "+g+" more lines identical to this"),g=0,m.push("    "+w)),d=w}},o.prototype.getSymbolDisplay=function(u){return s(u)},o.prototype.buildFirstStateStack=function(u,m){if(m.indexOf(u)!==-1)return null;if(u.wantedBy.length===0)return[u];var d=u.wantedBy[0],g=[u].concat(m),y=this.buildFirstStateStack(d,g);return y===null?null:[u].concat(y)},o.prototype.save=function(){var u=this.table[this.current];return u.lexerState=this.lexerState,u},o.prototype.restore=function(u){var m=u.index;this.current=m,this.table[m]=u,this.table.splice(m+1),this.lexerState=u.lexerState,this.results=this.finish()},o.prototype.rewind=function(u){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[u])},o.prototype.finish=function(){var u=[],m=this.grammar.start,d=this.table[this.table.length-1];return d.states.forEach(function(g){g.rule.name===m&&g.dot===g.rule.symbols.length&&g.reference===0&&g.data!==o.fail&&u.push(g)}),u.map(function(g){return g.data})};function s(u){var m=typeof u;if(m==="string")return u;if(m==="object"){if(u.literal)return JSON.stringify(u.literal);if(u instanceof RegExp)return"character matching "+u;if(u.type)return u.type+" token";if(u.test)return"token matching "+String(u.test);throw new Error("Unknown symbol type: "+u)}}function l(u){var m=typeof u;if(m==="string")return u;if(m==="object"){if(u.literal)return JSON.stringify(u.literal);if(u instanceof RegExp)return u.toString();if(u.type)return"%"+u.type;if(u.test)return"<"+String(u.test)+">";throw new Error("Unknown symbol type: "+u)}}return{Parser:o,Grammar:n,Rule:t}})});var HA=Ga((UA,jm)=>{(function(t,e){typeof define=="function"&&define.amd?define([],e):typeof jm=="object"&&jm.exports?jm.exports=e():t.moo=e()})(UA,function(){"use strict";var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,r=typeof new RegExp().sticky=="boolean";function n(H){return H&&e.call(H)==="[object RegExp]"}function i(H){return H&&typeof H=="object"&&!n(H)&&!Array.isArray(H)}function o(H){return H.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function s(H){var C=new RegExp("|"+H);return C.exec("").length-1}function l(H){return"("+H+")"}function u(H){if(!H.length)return"(?!)";var C=H.map(function(A){return"(?:"+A+")"}).join("|");return"(?:"+C+")"}function m(H){if(typeof H=="string")return"(?:"+o(H)+")";if(n(H)){if(H.ignoreCase)throw new Error("RegExp /i flag not allowed");if(H.global)throw new Error("RegExp /g flag is implied");if(H.sticky)throw new Error("RegExp /y flag is implied");if(H.multiline)throw new Error("RegExp /m flag is implied");return H.source}else throw new Error("Not a pattern: "+H)}function d(H,C){return H.length>C?H:Array(C-H.length+1).join(" ")+H}function g(H,C){for(var A=H.length,q=0;;){var Z=H.lastIndexOf(`
`,A-1);if(Z===-1||(q++,A=Z,q===C)||A===0)break}var L=q<C?0:A+1;return H.substring(L).split(`
`)}function y(H){for(var C=Object.getOwnPropertyNames(H),A=[],q=0;q<C.length;q++){var Z=C[q],L=H[Z],N=[].concat(L);if(Z==="include"){for(var j=0;j<N.length;j++)A.push({include:N[j]});continue}var X=[];N.forEach(function(Q){i(Q)?(X.length&&A.push(w(Z,X)),A.push(w(Z,Q)),X=[]):X.push(Q)}),X.length&&A.push(w(Z,X))}return A}function T(H){for(var C=[],A=0;A<H.length;A++){var q=H[A];if(q.include){for(var Z=[].concat(q.include),L=0;L<Z.length;L++)C.push({include:Z[L]});continue}if(!q.type)throw new Error("Rule has no type: "+JSON.stringify(q));C.push(w(q.type,q))}return C}function w(H,C){if(i(C)||(C={match:C}),C.include)throw new Error("Matching rules cannot also include states");var A={defaultType:H,lineBreaks:!!C.error||!!C.fallback,pop:!1,next:null,push:null,error:!1,fallback:!1,value:null,type:null,shouldThrow:!1};for(var q in C)t.call(C,q)&&(A[q]=C[q]);if(typeof A.type=="string"&&H!==A.type)throw new Error("Type transform cannot be a string (type '"+A.type+"' for token '"+H+"')");var Z=A.match;return A.match=Array.isArray(Z)?Z:Z?[Z]:[],A.match.sort(function(L,N){return n(L)&&n(N)?0:n(N)?-1:n(L)?1:N.length-L.length}),A}function E(H){return Array.isArray(H)?T(H):y(H)}var U=w("error",{lineBreaks:!0,shouldThrow:!0});function V(H,C){for(var A=null,q=Object.create(null),Z=!0,L=null,N=[],j=[],X=0;X<H.length;X++)H[X].fallback&&(Z=!1);for(var X=0;X<H.length;X++){var Q=H[X];if(Q.include)throw new Error("Inheritance is not allowed in stateless lexers");if(Q.error||Q.fallback){if(A)throw!Q.fallback==!A.fallback?new Error("Multiple "+(Q.fallback?"fallback":"error")+" rules not allowed (for token '"+Q.defaultType+"')"):new Error("fallback and error are mutually exclusive (for token '"+Q.defaultType+"')");A=Q}var te=Q.match.slice();if(Z)for(;te.length&&typeof te[0]=="string"&&te[0].length===1;){var Te=te.shift();q[Te.charCodeAt(0)]=Q}if(Q.pop||Q.push||Q.next){if(!C)throw new Error("State-switching options are not allowed in stateless lexers (for token '"+Q.defaultType+"')");if(Q.fallback)throw new Error("State-switching options are not allowed on fallback tokens (for token '"+Q.defaultType+"')")}if(te.length!==0){Z=!1,N.push(Q);for(var be=0;be<te.length;be++){var qe=te[be];if(n(qe)){if(L===null)L=qe.unicode;else if(L!==qe.unicode&&Q.fallback===!1)throw new Error("If one rule is /u then all must be")}}var Oe=u(te.map(m)),ft=new RegExp(Oe);if(ft.test(""))throw new Error("RegExp matches empty string: "+ft);var Wt=s(Oe);if(Wt>0)throw new Error("RegExp has capture groups: "+ft+`
Use (?: \u2026 ) instead`);if(!Q.lineBreaks&&ft.test(`
`))throw new Error("Rule should declare lineBreaks: "+ft);j.push(l(Oe))}}var Xr=A&&A.fallback,Fo=r&&!Xr?"ym":"gm",ui=r||Xr?"":"|";L===!0&&(Fo+="u");var Fa=new RegExp(u(j)+ui,Fo);return{regexp:Fa,groups:N,fast:q,error:A||U}}function z(H){var C=V(E(H));return new fe({start:C},"start")}function ne(H,C,A){var q=H&&(H.push||H.next);if(q&&!A[q])throw new Error("Missing state '"+q+"' (in token '"+H.defaultType+"' of state '"+C+"')");if(H&&H.pop&&+H.pop!=1)throw new Error("pop must be 1 (in token '"+H.defaultType+"' of state '"+C+"')")}function se(H,C){var A=H.$all?E(H.$all):[];delete H.$all;var q=Object.getOwnPropertyNames(H);C||(C=q[0]);for(var Z=Object.create(null),L=0;L<q.length;L++){var N=q[L];Z[N]=E(H[N]).concat(A)}for(var L=0;L<q.length;L++)for(var N=q[L],j=Z[N],X=Object.create(null),Q=0;Q<j.length;Q++){var te=j[Q];if(te.include){var Te=[Q,1];if(te.include!==N&&!X[te.include]){X[te.include]=!0;var be=Z[te.include];if(!be)throw new Error("Cannot include nonexistent state '"+te.include+"' (in state '"+N+"')");for(var qe=0;qe<be.length;qe++){var Oe=be[qe];j.indexOf(Oe)===-1&&Te.push(Oe)}}j.splice.apply(j,Te),Q--}}for(var ft=Object.create(null),L=0;L<q.length;L++){var N=q[L];ft[N]=V(Z[N],!0)}for(var L=0;L<q.length;L++){for(var Wt=q[L],Xr=ft[Wt],Fo=Xr.groups,Q=0;Q<Fo.length;Q++)ne(Fo[Q],Wt,ft);for(var ui=Object.getOwnPropertyNames(Xr.fast),Q=0;Q<ui.length;Q++)ne(Xr.fast[ui[Q]],Wt,ft)}return new fe(ft,C)}function ce(H){for(var C=typeof Map<"u",A=C?new Map:Object.create(null),q=Object.getOwnPropertyNames(H),Z=0;Z<q.length;Z++){var L=q[Z],N=H[L],j=Array.isArray(N)?N:[N];j.forEach(function(X){if(typeof X!="string")throw new Error("keyword must be string (in keyword '"+L+"')");C?A.set(X,L):A[X]=L})}return function(X){return C?A.get(X):A[X]}}var fe=function(H,C){this.startState=C,this.states=H,this.buffer="",this.stack=[],this.reset()};fe.prototype.reset=function(H,C){return this.buffer=H||"",this.index=0,this.line=C?C.line:1,this.col=C?C.col:1,this.queuedToken=C?C.queuedToken:null,this.queuedText=C?C.queuedText:"",this.queuedThrow=C?C.queuedThrow:null,this.setState(C?C.state:this.startState),this.stack=C&&C.stack?C.stack.slice():[],this},fe.prototype.save=function(){return{line:this.line,col:this.col,state:this.state,stack:this.stack.slice(),queuedToken:this.queuedToken,queuedText:this.queuedText,queuedThrow:this.queuedThrow}},fe.prototype.setState=function(H){if(!(!H||this.state===H)){this.state=H;var C=this.states[H];this.groups=C.groups,this.error=C.error,this.re=C.regexp,this.fast=C.fast}},fe.prototype.popState=function(){this.setState(this.stack.pop())},fe.prototype.pushState=function(H){this.stack.push(this.state),this.setState(H)};var ct=r?function(H,C){return H.exec(C)}:function(H,C){var A=H.exec(C);return A[0].length===0?null:A};fe.prototype._getGroup=function(H){for(var C=this.groups.length,A=0;A<C;A++)if(H[A+1]!==void 0)return this.groups[A];throw new Error("Cannot find token type for matched text")};function Vt(){return this.value}if(fe.prototype.next=function(){var H=this.index;if(this.queuedGroup){var C=this._token(this.queuedGroup,this.queuedText,H);return this.queuedGroup=null,this.queuedText="",C}var A=this.buffer;if(H!==A.length){var N=this.fast[A.charCodeAt(H)];if(N)return this._token(N,A.charAt(H),H);var q=this.re;q.lastIndex=H;var Z=ct(q,A),L=this.error;if(Z==null)return this._token(L,A.slice(H,A.length),H);var N=this._getGroup(Z),j=Z[0];return L.fallback&&Z.index!==H?(this.queuedGroup=N,this.queuedText=j,this._token(L,A.slice(H,Z.index),H)):this._token(N,j,H)}},fe.prototype._token=function(H,C,A){var q=0;if(H.lineBreaks){var Z=/\n/g,L=1;if(C===`
`)q=1;else for(;Z.exec(C);)q++,L=Z.lastIndex}var N={type:typeof H.type=="function"&&H.type(C)||H.defaultType,value:typeof H.value=="function"?H.value(C):C,text:C,toString:Vt,offset:A,lineBreaks:q,line:this.line,col:this.col},j=C.length;if(this.index+=j,this.line+=q,q!==0?this.col=j-L+1:this.col+=j,H.shouldThrow){var X=new Error(this.formatError(N,"invalid syntax"));throw X}return H.pop?this.popState():H.push?this.pushState(H.push):H.next&&this.setState(H.next),N},typeof Symbol<"u"&&Symbol.iterator){var mt=function(H){this.lexer=H};mt.prototype.next=function(){var H=this.lexer.next();return{value:H,done:!H}},mt.prototype[Symbol.iterator]=function(){return this},fe.prototype[Symbol.iterator]=function(){return new mt(this)}}return fe.prototype.formatError=function(H,C){if(H==null)var A=this.buffer.slice(this.index),H={text:A,offset:this.index,lineBreaks:A.indexOf(`
`)===-1?0:1,line:this.line,col:this.col};var q=2,Z=Math.max(H.line-q,1),L=H.line+q,N=String(L).length,j=g(this.buffer,this.line-H.line+q+1).slice(0,5),X=[];X.push(C+" at line "+H.line+" col "+H.col+":"),X.push("");for(var Q=0;Q<j.length;Q++){var te=j[Q],Te=Z+Q;X.push(d(String(Te),N)+"  "+te),Te===H.line&&X.push(d("",N+H.col+1)+"^")}return X.join(`
`)},fe.prototype.clone=function(){return new fe(this.states,this.state)},fe.prototype.has=function(H){return!0},{compile:z,states:se,error:Object.freeze({error:!0}),fallback:Object.freeze({fallback:!0}),keywords:ce}})});var bl=Ga((Qn,LP)=>{"use strict";Object.defineProperty(Qn,"__esModule",{value:!0});function Dn(t){return typeof t=="object"&&!("toString"in t)?Object.prototype.toString.call(t).slice(8,-1):t}var u9=typeof process=="object"&&process.env.NODE_ENV==="production";function dn(t,e){if(!t)throw u9?new Error("Invariant failed"):new Error(e())}Qn.invariant=dn;var bS=Object.prototype.hasOwnProperty,p9=Array.prototype.splice,m9=Object.prototype.toString;function sa(t){return m9.call(t).slice(8,-1)}var vf=Object.assign||function(t,e){return wS(e).forEach(function(r){bS.call(e,r)&&(t[r]=e[r])}),t},wS=typeof Object.getOwnPropertySymbols=="function"?function(t){return Object.keys(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.keys(t)};function ho(t){return Array.isArray(t)?vf(t.constructor(t.length),t):sa(t)==="Map"?new Map(t):sa(t)==="Set"?new Set(t):t&&typeof t=="object"?vf(Object.create(Object.getPrototypeOf(t)),t):t}var DP=function(){function t(){this.commands=vf({},f9),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(e,r){return e===r},this.update.newContext=function(){return new t().update}}return Object.defineProperty(t.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(e){this.update.isEquals=e},enumerable:!0,configurable:!0}),t.prototype.extend=function(e,r){this.commands[e]=r},t.prototype.update=function(e,r){var n=this,i=typeof r=="function"?{$apply:r}:r;Array.isArray(e)&&Array.isArray(i)||dn(!Array.isArray(i),function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."}),dn(typeof i=="object"&&i!==null,function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the "+("following commands: "+Object.keys(n.commands).join(", ")+".")});var o=e;return wS(i).forEach(function(s){if(bS.call(n.commands,s)){var l=e===o;o=n.commands[s](i[s],o,i,e),l&&n.isEquals(o,e)&&(o=e)}else{var u=sa(e)==="Map"?n.update(e.get(s),i[s]):n.update(e[s],i[s]),m=sa(o)==="Map"?o.get(s):o[s];(!n.isEquals(u,m)||typeof u>"u"&&!bS.call(e,s))&&(o===e&&(o=ho(e)),sa(o)==="Map"?o.set(s,u):o[s]=u)}}),o},t}();Qn.Context=DP;var f9={$push:function(t,e,r){return PP(e,r,"$push"),t.length?e.concat(t):e},$unshift:function(t,e,r){return PP(e,r,"$unshift"),t.length?t.concat(e):e},$splice:function(t,e,r,n){return d9(e,r),t.forEach(function(i){FP(i),e===n&&i.length&&(e=ho(n)),p9.apply(e,i)}),e},$set:function(t,e,r){return h9(r),t},$toggle:function(t,e){vl(t,"$toggle");var r=t.length?ho(e):e;return t.forEach(function(n){r[n]=!e[n]}),r},$unset:function(t,e,r,n){return vl(t,"$unset"),t.forEach(function(i){Object.hasOwnProperty.call(e,i)&&(e===n&&(e=ho(n)),delete e[i])}),e},$add:function(t,e,r,n){return MP(e,"$add"),vl(t,"$add"),sa(e)==="Map"?t.forEach(function(i){var o=i[0],s=i[1];e===n&&e.get(o)!==s&&(e=ho(n)),e.set(o,s)}):t.forEach(function(i){e===n&&!e.has(i)&&(e=ho(n)),e.add(i)}),e},$remove:function(t,e,r,n){return MP(e,"$remove"),vl(t,"$remove"),t.forEach(function(i){e===n&&e.has(i)&&(e=ho(n)),e.delete(i)}),e},$merge:function(t,e,r,n){return y9(e,t),wS(t).forEach(function(i){t[i]!==e[i]&&(e===n&&(e=ho(n)),e[i]=t[i])}),e},$apply:function(t,e){return g9(t),t(e)}},ES=new DP;Qn.isEquals=ES.update.isEquals;Qn.extend=ES.extend;Qn.default=ES.update;Qn.default.default=LP.exports=vf(Qn.default,Qn);function PP(t,e,r){dn(Array.isArray(t),function(){return"update(): expected target of "+Dn(r)+" to be an array; got "+Dn(t)+"."}),vl(e[r],r)}function vl(t,e){dn(Array.isArray(t),function(){return"update(): expected spec of "+Dn(e)+" to be an array; got "+Dn(t)+". Did you forget to wrap your parameter in an array?"})}function d9(t,e){dn(Array.isArray(t),function(){return"Expected $splice target to be an array; got "+Dn(t)}),FP(e.$splice)}function FP(t){dn(Array.isArray(t),function(){return"update(): expected spec of $splice to be an array of arrays; got "+Dn(t)+". Did you forget to wrap your parameters in an array?"})}function g9(t){dn(typeof t=="function",function(){return"update(): expected spec of $apply to be a function; got "+Dn(t)+"."})}function h9(t){dn(Object.keys(t).length===1,function(){return"Cannot have more than one key in an object with $set"})}function y9(t,e){dn(e&&typeof e=="object",function(){return"update(): $merge expects a spec of type 'object'; got "+Dn(e)}),dn(t&&typeof t=="object",function(){return"update(): $merge expects a target of type 'object'; got "+Dn(t)})}function MP(t,e){var r=sa(t);dn(r==="Map"||r==="Set",function(){return"update(): "+Dn(e)+" expects a target of type Set or Map; got "+Dn(r)})}});var Vv=Ga((lc,cu)=>{(function(){var t,e="4.17.21",r=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",i="Expected a function",o="Invalid `variable` option passed into `_.template`",s="__lodash_hash_undefined__",l=500,u="__lodash_placeholder__",m=1,d=2,g=4,y=1,T=2,w=1,E=2,U=4,V=8,z=16,ne=32,se=64,ce=128,fe=256,ct=512,Vt=30,mt="...",H=800,C=16,A=1,q=2,Z=3,L=1/0,N=9007199254740991,j=17976931348623157e292,X=NaN,Q=4294967295,te=Q-1,Te=Q>>>1,be=[["ary",ce],["bind",w],["bindKey",E],["curry",V],["curryRight",z],["flip",ct],["partial",ne],["partialRight",se],["rearg",fe]],qe="[object Arguments]",Oe="[object Array]",ft="[object AsyncFunction]",Wt="[object Boolean]",Xr="[object Date]",Fo="[object DOMException]",ui="[object Error]",Fa="[object Function]",uw="[object GeneratorFunction]",wn="[object Map]",_c="[object Number]",NI="[object Null]",pi="[object Object]",pw="[object Promise]",UI="[object Proxy]",Rc="[object RegExp]",En="[object Set]",kc="[object String]",Nu="[object Symbol]",HI="[object Undefined]",Ac="[object WeakMap]",BI="[object WeakSet]",Pc="[object ArrayBuffer]",La="[object DataView]",Ay="[object Float32Array]",Py="[object Float64Array]",My="[object Int8Array]",Dy="[object Int16Array]",Fy="[object Int32Array]",Ly="[object Uint8Array]",Iy="[object Uint8ClampedArray]",Cy="[object Uint16Array]",Oy="[object Uint32Array]",VI=/\b__p \+= '';/g,WI=/\b(__p \+=) '' \+/g,$I=/(__e\(.*?\)|\b__t\)) \+\n'';/g,mw=/&(?:amp|lt|gt|quot|#39);/g,fw=/[&<>"']/g,jI=RegExp(mw.source),zI=RegExp(fw.source),qI=/<%-([\s\S]+?)%>/g,GI=/<%([\s\S]+?)%>/g,dw=/<%=([\s\S]+?)%>/g,KI=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,QI=/^\w*$/,YI=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ny=/[\\^$.*+?()[\]{}|]/g,ZI=RegExp(Ny.source),Uy=/^\s+/,XI=/\s/,JI=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,eC=/\{\n\/\* \[wrapped with (.+)\] \*/,tC=/,? & /,rC=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,nC=/[()=,{}\[\]\/\s]/,iC=/\\(\\)?/g,oC=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,gw=/\w*$/,aC=/^[-+]0x[0-9a-f]+$/i,sC=/^0b[01]+$/i,cC=/^\[object .+?Constructor\]$/,lC=/^0o[0-7]+$/i,uC=/^(?:0|[1-9]\d*)$/,pC=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Uu=/($^)/,mC=/['\n\r\u2028\u2029\\]/g,Hu="\\ud800-\\udfff",fC="\\u0300-\\u036f",dC="\\ufe20-\\ufe2f",gC="\\u20d0-\\u20ff",hw=fC+dC+gC,yw="\\u2700-\\u27bf",xw="a-z\\xdf-\\xf6\\xf8-\\xff",hC="\\xac\\xb1\\xd7\\xf7",yC="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",xC="\\u2000-\\u206f",TC=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Tw="A-Z\\xc0-\\xd6\\xd8-\\xde",Sw="\\ufe0e\\ufe0f",vw=hC+yC+xC+TC,Hy="['\u2019]",SC="["+Hu+"]",bw="["+vw+"]",Bu="["+hw+"]",ww="\\d+",vC="["+yw+"]",Ew="["+xw+"]",_w="[^"+Hu+vw+ww+yw+xw+Tw+"]",By="\\ud83c[\\udffb-\\udfff]",bC="(?:"+Bu+"|"+By+")",Rw="[^"+Hu+"]",Vy="(?:\\ud83c[\\udde6-\\uddff]){2}",Wy="[\\ud800-\\udbff][\\udc00-\\udfff]",Ia="["+Tw+"]",kw="\\u200d",Aw="(?:"+Ew+"|"+_w+")",wC="(?:"+Ia+"|"+_w+")",Pw="(?:"+Hy+"(?:d|ll|m|re|s|t|ve))?",Mw="(?:"+Hy+"(?:D|LL|M|RE|S|T|VE))?",Dw=bC+"?",Fw="["+Sw+"]?",EC="(?:"+kw+"(?:"+[Rw,Vy,Wy].join("|")+")"+Fw+Dw+")*",_C="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",RC="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Lw=Fw+Dw+EC,kC="(?:"+[vC,Vy,Wy].join("|")+")"+Lw,AC="(?:"+[Rw+Bu+"?",Bu,Vy,Wy,SC].join("|")+")",PC=RegExp(Hy,"g"),MC=RegExp(Bu,"g"),$y=RegExp(By+"(?="+By+")|"+AC+Lw,"g"),DC=RegExp([Ia+"?"+Ew+"+"+Pw+"(?="+[bw,Ia,"$"].join("|")+")",wC+"+"+Mw+"(?="+[bw,Ia+Aw,"$"].join("|")+")",Ia+"?"+Aw+"+"+Pw,Ia+"+"+Mw,RC,_C,ww,kC].join("|"),"g"),FC=RegExp("["+kw+Hu+hw+Sw+"]"),LC=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,IC=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],CC=-1,tt={};tt[Ay]=tt[Py]=tt[My]=tt[Dy]=tt[Fy]=tt[Ly]=tt[Iy]=tt[Cy]=tt[Oy]=!0,tt[qe]=tt[Oe]=tt[Pc]=tt[Wt]=tt[La]=tt[Xr]=tt[ui]=tt[Fa]=tt[wn]=tt[_c]=tt[pi]=tt[Rc]=tt[En]=tt[kc]=tt[Ac]=!1;var et={};et[qe]=et[Oe]=et[Pc]=et[La]=et[Wt]=et[Xr]=et[Ay]=et[Py]=et[My]=et[Dy]=et[Fy]=et[wn]=et[_c]=et[pi]=et[Rc]=et[En]=et[kc]=et[Nu]=et[Ly]=et[Iy]=et[Cy]=et[Oy]=!0,et[ui]=et[Fa]=et[Ac]=!1;var OC={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},NC={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},UC={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},HC={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},BC=parseFloat,VC=parseInt,Iw=typeof global=="object"&&global&&global.Object===Object&&global,WC=typeof self=="object"&&self&&self.Object===Object&&self,Ft=Iw||WC||Function("return this")(),jy=typeof lc=="object"&&lc&&!lc.nodeType&&lc,Lo=jy&&typeof cu=="object"&&cu&&!cu.nodeType&&cu,Cw=Lo&&Lo.exports===jy,zy=Cw&&Iw.process,Jr=function(){try{var P=Lo&&Lo.require&&Lo.require("util").types;return P||zy&&zy.binding&&zy.binding("util")}catch{}}(),Ow=Jr&&Jr.isArrayBuffer,Nw=Jr&&Jr.isDate,Uw=Jr&&Jr.isMap,Hw=Jr&&Jr.isRegExp,Bw=Jr&&Jr.isSet,Vw=Jr&&Jr.isTypedArray;function Lr(P,$,B){switch(B.length){case 0:return P.call($);case 1:return P.call($,B[0]);case 2:return P.call($,B[0],B[1]);case 3:return P.call($,B[0],B[1],B[2])}return P.apply($,B)}function $C(P,$,B,ae){for(var we=-1,Ge=P==null?0:P.length;++we<Ge;){var kt=P[we];$(ae,kt,B(kt),P)}return ae}function en(P,$){for(var B=-1,ae=P==null?0:P.length;++B<ae&&$(P[B],B,P)!==!1;);return P}function jC(P,$){for(var B=P==null?0:P.length;B--&&$(P[B],B,P)!==!1;);return P}function Ww(P,$){for(var B=-1,ae=P==null?0:P.length;++B<ae;)if(!$(P[B],B,P))return!1;return!0}function Hi(P,$){for(var B=-1,ae=P==null?0:P.length,we=0,Ge=[];++B<ae;){var kt=P[B];$(kt,B,P)&&(Ge[we++]=kt)}return Ge}function Vu(P,$){var B=P==null?0:P.length;return!!B&&Ca(P,$,0)>-1}function qy(P,$,B){for(var ae=-1,we=P==null?0:P.length;++ae<we;)if(B($,P[ae]))return!0;return!1}function it(P,$){for(var B=-1,ae=P==null?0:P.length,we=Array(ae);++B<ae;)we[B]=$(P[B],B,P);return we}function Bi(P,$){for(var B=-1,ae=$.length,we=P.length;++B<ae;)P[we+B]=$[B];return P}function Gy(P,$,B,ae){var we=-1,Ge=P==null?0:P.length;for(ae&&Ge&&(B=P[++we]);++we<Ge;)B=$(B,P[we],we,P);return B}function zC(P,$,B,ae){var we=P==null?0:P.length;for(ae&&we&&(B=P[--we]);we--;)B=$(B,P[we],we,P);return B}function Ky(P,$){for(var B=-1,ae=P==null?0:P.length;++B<ae;)if($(P[B],B,P))return!0;return!1}var qC=Qy("length");function GC(P){return P.split("")}function KC(P){return P.match(rC)||[]}function $w(P,$,B){var ae;return B(P,function(we,Ge,kt){if($(we,Ge,kt))return ae=Ge,!1}),ae}function Wu(P,$,B,ae){for(var we=P.length,Ge=B+(ae?1:-1);ae?Ge--:++Ge<we;)if($(P[Ge],Ge,P))return Ge;return-1}function Ca(P,$,B){return $===$?a1(P,$,B):Wu(P,jw,B)}function QC(P,$,B,ae){for(var we=B-1,Ge=P.length;++we<Ge;)if(ae(P[we],$))return we;return-1}function jw(P){return P!==P}function zw(P,$){var B=P==null?0:P.length;return B?Zy(P,$)/B:X}function Qy(P){return function($){return $==null?t:$[P]}}function Yy(P){return function($){return P==null?t:P[$]}}function qw(P,$,B,ae,we){return we(P,function(Ge,kt,Je){B=ae?(ae=!1,Ge):$(B,Ge,kt,Je)}),B}function YC(P,$){var B=P.length;for(P.sort($);B--;)P[B]=P[B].value;return P}function Zy(P,$){for(var B,ae=-1,we=P.length;++ae<we;){var Ge=$(P[ae]);Ge!==t&&(B=B===t?Ge:B+Ge)}return B}function Xy(P,$){for(var B=-1,ae=Array(P);++B<P;)ae[B]=$(B);return ae}function ZC(P,$){return it($,function(B){return[B,P[B]]})}function Gw(P){return P&&P.slice(0,Zw(P)+1).replace(Uy,"")}function Ir(P){return function($){return P($)}}function Jy(P,$){return it($,function(B){return P[B]})}function Mc(P,$){return P.has($)}function Kw(P,$){for(var B=-1,ae=P.length;++B<ae&&Ca($,P[B],0)>-1;);return B}function Qw(P,$){for(var B=P.length;B--&&Ca($,P[B],0)>-1;);return B}function XC(P,$){for(var B=P.length,ae=0;B--;)P[B]===$&&++ae;return ae}var JC=Yy(OC),e1=Yy(NC);function t1(P){return"\\"+HC[P]}function r1(P,$){return P==null?t:P[$]}function Oa(P){return FC.test(P)}function n1(P){return LC.test(P)}function i1(P){for(var $,B=[];!($=P.next()).done;)B.push($.value);return B}function ex(P){var $=-1,B=Array(P.size);return P.forEach(function(ae,we){B[++$]=[we,ae]}),B}function Yw(P,$){return function(B){return P($(B))}}function Vi(P,$){for(var B=-1,ae=P.length,we=0,Ge=[];++B<ae;){var kt=P[B];(kt===$||kt===u)&&(P[B]=u,Ge[we++]=B)}return Ge}function $u(P){var $=-1,B=Array(P.size);return P.forEach(function(ae){B[++$]=ae}),B}function o1(P){var $=-1,B=Array(P.size);return P.forEach(function(ae){B[++$]=[ae,ae]}),B}function a1(P,$,B){for(var ae=B-1,we=P.length;++ae<we;)if(P[ae]===$)return ae;return-1}function s1(P,$,B){for(var ae=B+1;ae--;)if(P[ae]===$)return ae;return ae}function Na(P){return Oa(P)?l1(P):qC(P)}function _n(P){return Oa(P)?u1(P):GC(P)}function Zw(P){for(var $=P.length;$--&&XI.test(P.charAt($)););return $}var c1=Yy(UC);function l1(P){for(var $=$y.lastIndex=0;$y.test(P);)++$;return $}function u1(P){return P.match($y)||[]}function p1(P){return P.match(DC)||[]}var m1=function P($){$=$==null?Ft:Wi.defaults(Ft.Object(),$,Wi.pick(Ft,IC));var B=$.Array,ae=$.Date,we=$.Error,Ge=$.Function,kt=$.Math,Je=$.Object,tx=$.RegExp,f1=$.String,tn=$.TypeError,ju=B.prototype,d1=Ge.prototype,Ua=Je.prototype,zu=$["__core-js_shared__"],qu=d1.toString,Ye=Ua.hasOwnProperty,g1=0,Xw=function(){var a=/[^.]+$/.exec(zu&&zu.keys&&zu.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),Gu=Ua.toString,h1=qu.call(Je),y1=Ft._,x1=tx("^"+qu.call(Ye).replace(Ny,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ku=Cw?$.Buffer:t,$i=$.Symbol,Qu=$.Uint8Array,Jw=Ku?Ku.allocUnsafe:t,Yu=Yw(Je.getPrototypeOf,Je),eE=Je.create,tE=Ua.propertyIsEnumerable,Zu=ju.splice,rE=$i?$i.isConcatSpreadable:t,Dc=$i?$i.iterator:t,Io=$i?$i.toStringTag:t,Xu=function(){try{var a=Ho(Je,"defineProperty");return a({},"",{}),a}catch{}}(),T1=$.clearTimeout!==Ft.clearTimeout&&$.clearTimeout,S1=ae&&ae.now!==Ft.Date.now&&ae.now,v1=$.setTimeout!==Ft.setTimeout&&$.setTimeout,Ju=kt.ceil,ep=kt.floor,rx=Je.getOwnPropertySymbols,b1=Ku?Ku.isBuffer:t,nE=$.isFinite,w1=ju.join,E1=Yw(Je.keys,Je),At=kt.max,Jt=kt.min,_1=ae.now,R1=$.parseInt,iE=kt.random,k1=ju.reverse,nx=Ho($,"DataView"),Fc=Ho($,"Map"),ix=Ho($,"Promise"),Ha=Ho($,"Set"),Lc=Ho($,"WeakMap"),Ic=Ho(Je,"create"),tp=Lc&&new Lc,Ba={},A1=Bo(nx),P1=Bo(Fc),M1=Bo(ix),D1=Bo(Ha),F1=Bo(Lc),rp=$i?$i.prototype:t,Cc=rp?rp.valueOf:t,oE=rp?rp.toString:t;function x(a){if(dt(a)&&!Ee(a)&&!(a instanceof Be)){if(a instanceof rn)return a;if(Ye.call(a,"__wrapped__"))return a_(a)}return new rn(a)}var Va=function(){function a(){}return function(c){if(!lt(c))return{};if(eE)return eE(c);a.prototype=c;var p=new a;return a.prototype=t,p}}();function np(){}function rn(a,c){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=t}x.templateSettings={escape:qI,evaluate:GI,interpolate:dw,variable:"",imports:{_:x}},x.prototype=np.prototype,x.prototype.constructor=x,rn.prototype=Va(np.prototype),rn.prototype.constructor=rn;function Be(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Q,this.__views__=[]}function L1(){var a=new Be(this.__wrapped__);return a.__actions__=Tr(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=Tr(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=Tr(this.__views__),a}function I1(){if(this.__filtered__){var a=new Be(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a}function C1(){var a=this.__wrapped__.value(),c=this.__dir__,p=Ee(a),f=c<0,h=p?a.length:0,S=GO(0,h,this.__views__),_=S.start,R=S.end,D=R-_,G=f?R:_-1,K=this.__iteratees__,J=K.length,ie=0,me=Jt(D,this.__takeCount__);if(!p||!f&&h==D&&me==D)return PE(a,this.__actions__);var ye=[];e:for(;D--&&ie<me;){G+=c;for(var Me=-1,xe=a[G];++Me<J;){var Ne=K[Me],Ve=Ne.iteratee,Nr=Ne.type,ur=Ve(xe);if(Nr==q)xe=ur;else if(!ur){if(Nr==A)continue e;break e}}ye[ie++]=xe}return ye}Be.prototype=Va(np.prototype),Be.prototype.constructor=Be;function Co(a){var c=-1,p=a==null?0:a.length;for(this.clear();++c<p;){var f=a[c];this.set(f[0],f[1])}}function O1(){this.__data__=Ic?Ic(null):{},this.size=0}function N1(a){var c=this.has(a)&&delete this.__data__[a];return this.size-=c?1:0,c}function U1(a){var c=this.__data__;if(Ic){var p=c[a];return p===s?t:p}return Ye.call(c,a)?c[a]:t}function H1(a){var c=this.__data__;return Ic?c[a]!==t:Ye.call(c,a)}function B1(a,c){var p=this.__data__;return this.size+=this.has(a)?0:1,p[a]=Ic&&c===t?s:c,this}Co.prototype.clear=O1,Co.prototype.delete=N1,Co.prototype.get=U1,Co.prototype.has=H1,Co.prototype.set=B1;function mi(a){var c=-1,p=a==null?0:a.length;for(this.clear();++c<p;){var f=a[c];this.set(f[0],f[1])}}function V1(){this.__data__=[],this.size=0}function W1(a){var c=this.__data__,p=ip(c,a);if(p<0)return!1;var f=c.length-1;return p==f?c.pop():Zu.call(c,p,1),--this.size,!0}function $1(a){var c=this.__data__,p=ip(c,a);return p<0?t:c[p][1]}function j1(a){return ip(this.__data__,a)>-1}function z1(a,c){var p=this.__data__,f=ip(p,a);return f<0?(++this.size,p.push([a,c])):p[f][1]=c,this}mi.prototype.clear=V1,mi.prototype.delete=W1,mi.prototype.get=$1,mi.prototype.has=j1,mi.prototype.set=z1;function fi(a){var c=-1,p=a==null?0:a.length;for(this.clear();++c<p;){var f=a[c];this.set(f[0],f[1])}}function q1(){this.size=0,this.__data__={hash:new Co,map:new(Fc||mi),string:new Co}}function G1(a){var c=hp(this,a).delete(a);return this.size-=c?1:0,c}function K1(a){return hp(this,a).get(a)}function Q1(a){return hp(this,a).has(a)}function Y1(a,c){var p=hp(this,a),f=p.size;return p.set(a,c),this.size+=p.size==f?0:1,this}fi.prototype.clear=q1,fi.prototype.delete=G1,fi.prototype.get=K1,fi.prototype.has=Q1,fi.prototype.set=Y1;function Oo(a){var c=-1,p=a==null?0:a.length;for(this.__data__=new fi;++c<p;)this.add(a[c])}function Z1(a){return this.__data__.set(a,s),this}function X1(a){return this.__data__.has(a)}Oo.prototype.add=Oo.prototype.push=Z1,Oo.prototype.has=X1;function Rn(a){var c=this.__data__=new mi(a);this.size=c.size}function J1(){this.__data__=new mi,this.size=0}function eO(a){var c=this.__data__,p=c.delete(a);return this.size=c.size,p}function tO(a){return this.__data__.get(a)}function rO(a){return this.__data__.has(a)}function nO(a,c){var p=this.__data__;if(p instanceof mi){var f=p.__data__;if(!Fc||f.length<r-1)return f.push([a,c]),this.size=++p.size,this;p=this.__data__=new fi(f)}return p.set(a,c),this.size=p.size,this}Rn.prototype.clear=J1,Rn.prototype.delete=eO,Rn.prototype.get=tO,Rn.prototype.has=rO,Rn.prototype.set=nO;function aE(a,c){var p=Ee(a),f=!p&&Vo(a),h=!p&&!f&&Ki(a),S=!p&&!f&&!h&&za(a),_=p||f||h||S,R=_?Xy(a.length,f1):[],D=R.length;for(var G in a)(c||Ye.call(a,G))&&!(_&&(G=="length"||h&&(G=="offset"||G=="parent")||S&&(G=="buffer"||G=="byteLength"||G=="byteOffset")||yi(G,D)))&&R.push(G);return R}function sE(a){var c=a.length;return c?a[gx(0,c-1)]:t}function iO(a,c){return yp(Tr(a),No(c,0,a.length))}function oO(a){return yp(Tr(a))}function ox(a,c,p){(p!==t&&!kn(a[c],p)||p===t&&!(c in a))&&di(a,c,p)}function Oc(a,c,p){var f=a[c];(!(Ye.call(a,c)&&kn(f,p))||p===t&&!(c in a))&&di(a,c,p)}function ip(a,c){for(var p=a.length;p--;)if(kn(a[p][0],c))return p;return-1}function aO(a,c,p,f){return ji(a,function(h,S,_){c(f,h,p(h),_)}),f}function cE(a,c){return a&&Wn(c,Lt(c),a)}function sO(a,c){return a&&Wn(c,vr(c),a)}function di(a,c,p){c=="__proto__"&&Xu?Xu(a,c,{configurable:!0,enumerable:!0,value:p,writable:!0}):a[c]=p}function ax(a,c){for(var p=-1,f=c.length,h=B(f),S=a==null;++p<f;)h[p]=S?t:Bx(a,c[p]);return h}function No(a,c,p){return a===a&&(p!==t&&(a=a<=p?a:p),c!==t&&(a=a>=c?a:c)),a}function nn(a,c,p,f,h,S){var _,R=c&m,D=c&d,G=c&g;if(p&&(_=h?p(a,f,h,S):p(a)),_!==t)return _;if(!lt(a))return a;var K=Ee(a);if(K){if(_=QO(a),!R)return Tr(a,_)}else{var J=er(a),ie=J==Fa||J==uw;if(Ki(a))return FE(a,R);if(J==pi||J==qe||ie&&!h){if(_=D||ie?{}:ZE(a),!R)return D?UO(a,sO(_,a)):NO(a,cE(_,a))}else{if(!et[J])return h?a:{};_=YO(a,J,R)}}S||(S=new Rn);var me=S.get(a);if(me)return me;S.set(a,_),R_(a)?a.forEach(function(xe){_.add(nn(xe,c,p,xe,a,S))}):E_(a)&&a.forEach(function(xe,Ne){_.set(Ne,nn(xe,c,p,Ne,a,S))});var ye=G?D?Rx:_x:D?vr:Lt,Me=K?t:ye(a);return en(Me||a,function(xe,Ne){Me&&(Ne=xe,xe=a[Ne]),Oc(_,Ne,nn(xe,c,p,Ne,a,S))}),_}function cO(a){var c=Lt(a);return function(p){return lE(p,a,c)}}function lE(a,c,p){var f=p.length;if(a==null)return!f;for(a=Je(a);f--;){var h=p[f],S=c[h],_=a[h];if(_===t&&!(h in a)||!S(_))return!1}return!0}function uE(a,c,p){if(typeof a!="function")throw new tn(i);return $c(function(){a.apply(t,p)},c)}function Nc(a,c,p,f){var h=-1,S=Vu,_=!0,R=a.length,D=[],G=c.length;if(!R)return D;p&&(c=it(c,Ir(p))),f?(S=qy,_=!1):c.length>=r&&(S=Mc,_=!1,c=new Oo(c));e:for(;++h<R;){var K=a[h],J=p==null?K:p(K);if(K=f||K!==0?K:0,_&&J===J){for(var ie=G;ie--;)if(c[ie]===J)continue e;D.push(K)}else S(c,J,f)||D.push(K)}return D}var ji=NE(Vn),pE=NE(cx,!0);function lO(a,c){var p=!0;return ji(a,function(f,h,S){return p=!!c(f,h,S),p}),p}function op(a,c,p){for(var f=-1,h=a.length;++f<h;){var S=a[f],_=c(S);if(_!=null&&(R===t?_===_&&!Or(_):p(_,R)))var R=_,D=S}return D}function uO(a,c,p,f){var h=a.length;for(p=Ae(p),p<0&&(p=-p>h?0:h+p),f=f===t||f>h?h:Ae(f),f<0&&(f+=h),f=p>f?0:A_(f);p<f;)a[p++]=c;return a}function mE(a,c){var p=[];return ji(a,function(f,h,S){c(f,h,S)&&p.push(f)}),p}function $t(a,c,p,f,h){var S=-1,_=a.length;for(p||(p=XO),h||(h=[]);++S<_;){var R=a[S];c>0&&p(R)?c>1?$t(R,c-1,p,f,h):Bi(h,R):f||(h[h.length]=R)}return h}var sx=UE(),fE=UE(!0);function Vn(a,c){return a&&sx(a,c,Lt)}function cx(a,c){return a&&fE(a,c,Lt)}function ap(a,c){return Hi(c,function(p){return xi(a[p])})}function Uo(a,c){c=qi(c,a);for(var p=0,f=c.length;a!=null&&p<f;)a=a[$n(c[p++])];return p&&p==f?a:t}function dE(a,c,p){var f=c(a);return Ee(a)?f:Bi(f,p(a))}function cr(a){return a==null?a===t?HI:NI:Io&&Io in Je(a)?qO(a):oN(a)}function lx(a,c){return a>c}function pO(a,c){return a!=null&&Ye.call(a,c)}function mO(a,c){return a!=null&&c in Je(a)}function fO(a,c,p){return a>=Jt(c,p)&&a<At(c,p)}function ux(a,c,p){for(var f=p?qy:Vu,h=a[0].length,S=a.length,_=S,R=B(S),D=1/0,G=[];_--;){var K=a[_];_&&c&&(K=it(K,Ir(c))),D=Jt(K.length,D),R[_]=!p&&(c||h>=120&&K.length>=120)?new Oo(_&&K):t}K=a[0];var J=-1,ie=R[0];e:for(;++J<h&&G.length<D;){var me=K[J],ye=c?c(me):me;if(me=p||me!==0?me:0,!(ie?Mc(ie,ye):f(G,ye,p))){for(_=S;--_;){var Me=R[_];if(!(Me?Mc(Me,ye):f(a[_],ye,p)))continue e}ie&&ie.push(ye),G.push(me)}}return G}function dO(a,c,p,f){return Vn(a,function(h,S,_){c(f,p(h),S,_)}),f}function Uc(a,c,p){c=qi(c,a),a=t_(a,c);var f=a==null?a:a[$n(an(c))];return f==null?t:Lr(f,a,p)}function gE(a){return dt(a)&&cr(a)==qe}function gO(a){return dt(a)&&cr(a)==Pc}function hO(a){return dt(a)&&cr(a)==Xr}function Hc(a,c,p,f,h){return a===c?!0:a==null||c==null||!dt(a)&&!dt(c)?a!==a&&c!==c:yO(a,c,p,f,Hc,h)}function yO(a,c,p,f,h,S){var _=Ee(a),R=Ee(c),D=_?Oe:er(a),G=R?Oe:er(c);D=D==qe?pi:D,G=G==qe?pi:G;var K=D==pi,J=G==pi,ie=D==G;if(ie&&Ki(a)){if(!Ki(c))return!1;_=!0,K=!1}if(ie&&!K)return S||(S=new Rn),_||za(a)?KE(a,c,p,f,h,S):jO(a,c,D,p,f,h,S);if(!(p&y)){var me=K&&Ye.call(a,"__wrapped__"),ye=J&&Ye.call(c,"__wrapped__");if(me||ye){var Me=me?a.value():a,xe=ye?c.value():c;return S||(S=new Rn),h(Me,xe,p,f,S)}}return ie?(S||(S=new Rn),zO(a,c,p,f,h,S)):!1}function xO(a){return dt(a)&&er(a)==wn}function px(a,c,p,f){var h=p.length,S=h,_=!f;if(a==null)return!S;for(a=Je(a);h--;){var R=p[h];if(_&&R[2]?R[1]!==a[R[0]]:!(R[0]in a))return!1}for(;++h<S;){R=p[h];var D=R[0],G=a[D],K=R[1];if(_&&R[2]){if(G===t&&!(D in a))return!1}else{var J=new Rn;if(f)var ie=f(G,K,D,a,c,J);if(!(ie===t?Hc(K,G,y|T,f,J):ie))return!1}}return!0}function hE(a){if(!lt(a)||eN(a))return!1;var c=xi(a)?x1:cC;return c.test(Bo(a))}function TO(a){return dt(a)&&cr(a)==Rc}function SO(a){return dt(a)&&er(a)==En}function vO(a){return dt(a)&&wp(a.length)&&!!tt[cr(a)]}function yE(a){return typeof a=="function"?a:a==null?br:typeof a=="object"?Ee(a)?SE(a[0],a[1]):TE(a):H_(a)}function mx(a){if(!Wc(a))return E1(a);var c=[];for(var p in Je(a))Ye.call(a,p)&&p!="constructor"&&c.push(p);return c}function bO(a){if(!lt(a))return iN(a);var c=Wc(a),p=[];for(var f in a)f=="constructor"&&(c||!Ye.call(a,f))||p.push(f);return p}function fx(a,c){return a<c}function xE(a,c){var p=-1,f=Sr(a)?B(a.length):[];return ji(a,function(h,S,_){f[++p]=c(h,S,_)}),f}function TE(a){var c=Ax(a);return c.length==1&&c[0][2]?JE(c[0][0],c[0][1]):function(p){return p===a||px(p,a,c)}}function SE(a,c){return Mx(a)&&XE(c)?JE($n(a),c):function(p){var f=Bx(p,a);return f===t&&f===c?Vx(p,a):Hc(c,f,y|T)}}function sp(a,c,p,f,h){a!==c&&sx(c,function(S,_){if(h||(h=new Rn),lt(S))wO(a,c,_,p,sp,f,h);else{var R=f?f(Fx(a,_),S,_+"",a,c,h):t;R===t&&(R=S),ox(a,_,R)}},vr)}function wO(a,c,p,f,h,S,_){var R=Fx(a,p),D=Fx(c,p),G=_.get(D);if(G){ox(a,p,G);return}var K=S?S(R,D,p+"",a,c,_):t,J=K===t;if(J){var ie=Ee(D),me=!ie&&Ki(D),ye=!ie&&!me&&za(D);K=D,ie||me||ye?Ee(R)?K=R:Tt(R)?K=Tr(R):me?(J=!1,K=FE(D,!0)):ye?(J=!1,K=LE(D,!0)):K=[]:jc(D)||Vo(D)?(K=R,Vo(R)?K=P_(R):(!lt(R)||xi(R))&&(K=ZE(D))):J=!1}J&&(_.set(D,K),h(K,D,f,S,_),_.delete(D)),ox(a,p,K)}function vE(a,c){var p=a.length;if(p)return c+=c<0?p:0,yi(c,p)?a[c]:t}function bE(a,c,p){c.length?c=it(c,function(S){return Ee(S)?function(_){return Uo(_,S.length===1?S[0]:S)}:S}):c=[br];var f=-1;c=it(c,Ir(he()));var h=xE(a,function(S,_,R){var D=it(c,function(G){return G(S)});return{criteria:D,index:++f,value:S}});return YC(h,function(S,_){return OO(S,_,p)})}function EO(a,c){return wE(a,c,function(p,f){return Vx(a,f)})}function wE(a,c,p){for(var f=-1,h=c.length,S={};++f<h;){var _=c[f],R=Uo(a,_);p(R,_)&&Bc(S,qi(_,a),R)}return S}function _O(a){return function(c){return Uo(c,a)}}function dx(a,c,p,f){var h=f?QC:Ca,S=-1,_=c.length,R=a;for(a===c&&(c=Tr(c)),p&&(R=it(a,Ir(p)));++S<_;)for(var D=0,G=c[S],K=p?p(G):G;(D=h(R,K,D,f))>-1;)R!==a&&Zu.call(R,D,1),Zu.call(a,D,1);return a}function EE(a,c){for(var p=a?c.length:0,f=p-1;p--;){var h=c[p];if(p==f||h!==S){var S=h;yi(h)?Zu.call(a,h,1):xx(a,h)}}return a}function gx(a,c){return a+ep(iE()*(c-a+1))}function RO(a,c,p,f){for(var h=-1,S=At(Ju((c-a)/(p||1)),0),_=B(S);S--;)_[f?S:++h]=a,a+=p;return _}function hx(a,c){var p="";if(!a||c<1||c>N)return p;do c%2&&(p+=a),c=ep(c/2),c&&(a+=a);while(c);return p}function Le(a,c){return Lx(e_(a,c,br),a+"")}function kO(a){return sE(qa(a))}function AO(a,c){var p=qa(a);return yp(p,No(c,0,p.length))}function Bc(a,c,p,f){if(!lt(a))return a;c=qi(c,a);for(var h=-1,S=c.length,_=S-1,R=a;R!=null&&++h<S;){var D=$n(c[h]),G=p;if(D==="__proto__"||D==="constructor"||D==="prototype")return a;if(h!=_){var K=R[D];G=f?f(K,D,R):t,G===t&&(G=lt(K)?K:yi(c[h+1])?[]:{})}Oc(R,D,G),R=R[D]}return a}var _E=tp?function(a,c){return tp.set(a,c),a}:br,PO=Xu?function(a,c){return Xu(a,"toString",{configurable:!0,enumerable:!1,value:$x(c),writable:!0})}:br;function MO(a){return yp(qa(a))}function on(a,c,p){var f=-1,h=a.length;c<0&&(c=-c>h?0:h+c),p=p>h?h:p,p<0&&(p+=h),h=c>p?0:p-c>>>0,c>>>=0;for(var S=B(h);++f<h;)S[f]=a[f+c];return S}function DO(a,c){var p;return ji(a,function(f,h,S){return p=c(f,h,S),!p}),!!p}function cp(a,c,p){var f=0,h=a==null?f:a.length;if(typeof c=="number"&&c===c&&h<=Te){for(;f<h;){var S=f+h>>>1,_=a[S];_!==null&&!Or(_)&&(p?_<=c:_<c)?f=S+1:h=S}return h}return yx(a,c,br,p)}function yx(a,c,p,f){var h=0,S=a==null?0:a.length;if(S===0)return 0;c=p(c);for(var _=c!==c,R=c===null,D=Or(c),G=c===t;h<S;){var K=ep((h+S)/2),J=p(a[K]),ie=J!==t,me=J===null,ye=J===J,Me=Or(J);if(_)var xe=f||ye;else G?xe=ye&&(f||ie):R?xe=ye&&ie&&(f||!me):D?xe=ye&&ie&&!me&&(f||!Me):me||Me?xe=!1:xe=f?J<=c:J<c;xe?h=K+1:S=K}return Jt(S,te)}function RE(a,c){for(var p=-1,f=a.length,h=0,S=[];++p<f;){var _=a[p],R=c?c(_):_;if(!p||!kn(R,D)){var D=R;S[h++]=_===0?0:_}}return S}function kE(a){return typeof a=="number"?a:Or(a)?X:+a}function Cr(a){if(typeof a=="string")return a;if(Ee(a))return it(a,Cr)+"";if(Or(a))return oE?oE.call(a):"";var c=a+"";return c=="0"&&1/a==-L?"-0":c}function zi(a,c,p){var f=-1,h=Vu,S=a.length,_=!0,R=[],D=R;if(p)_=!1,h=qy;else if(S>=r){var G=c?null:WO(a);if(G)return $u(G);_=!1,h=Mc,D=new Oo}else D=c?[]:R;e:for(;++f<S;){var K=a[f],J=c?c(K):K;if(K=p||K!==0?K:0,_&&J===J){for(var ie=D.length;ie--;)if(D[ie]===J)continue e;c&&D.push(J),R.push(K)}else h(D,J,p)||(D!==R&&D.push(J),R.push(K))}return R}function xx(a,c){return c=qi(c,a),a=t_(a,c),a==null||delete a[$n(an(c))]}function AE(a,c,p,f){return Bc(a,c,p(Uo(a,c)),f)}function lp(a,c,p,f){for(var h=a.length,S=f?h:-1;(f?S--:++S<h)&&c(a[S],S,a););return p?on(a,f?0:S,f?S+1:h):on(a,f?S+1:0,f?h:S)}function PE(a,c){var p=a;return p instanceof Be&&(p=p.value()),Gy(c,function(f,h){return h.func.apply(h.thisArg,Bi([f],h.args))},p)}function Tx(a,c,p){var f=a.length;if(f<2)return f?zi(a[0]):[];for(var h=-1,S=B(f);++h<f;)for(var _=a[h],R=-1;++R<f;)R!=h&&(S[h]=Nc(S[h]||_,a[R],c,p));return zi($t(S,1),c,p)}function ME(a,c,p){for(var f=-1,h=a.length,S=c.length,_={};++f<h;){var R=f<S?c[f]:t;p(_,a[f],R)}return _}function Sx(a){return Tt(a)?a:[]}function vx(a){return typeof a=="function"?a:br}function qi(a,c){return Ee(a)?a:Mx(a,c)?[a]:o_(Qe(a))}var FO=Le;function Gi(a,c,p){var f=a.length;return p=p===t?f:p,!c&&p>=f?a:on(a,c,p)}var DE=T1||function(a){return Ft.clearTimeout(a)};function FE(a,c){if(c)return a.slice();var p=a.length,f=Jw?Jw(p):new a.constructor(p);return a.copy(f),f}function bx(a){var c=new a.constructor(a.byteLength);return new Qu(c).set(new Qu(a)),c}function LO(a,c){var p=c?bx(a.buffer):a.buffer;return new a.constructor(p,a.byteOffset,a.byteLength)}function IO(a){var c=new a.constructor(a.source,gw.exec(a));return c.lastIndex=a.lastIndex,c}function CO(a){return Cc?Je(Cc.call(a)):{}}function LE(a,c){var p=c?bx(a.buffer):a.buffer;return new a.constructor(p,a.byteOffset,a.length)}function IE(a,c){if(a!==c){var p=a!==t,f=a===null,h=a===a,S=Or(a),_=c!==t,R=c===null,D=c===c,G=Or(c);if(!R&&!G&&!S&&a>c||S&&_&&D&&!R&&!G||f&&_&&D||!p&&D||!h)return 1;if(!f&&!S&&!G&&a<c||G&&p&&h&&!f&&!S||R&&p&&h||!_&&h||!D)return-1}return 0}function OO(a,c,p){for(var f=-1,h=a.criteria,S=c.criteria,_=h.length,R=p.length;++f<_;){var D=IE(h[f],S[f]);if(D){if(f>=R)return D;var G=p[f];return D*(G=="desc"?-1:1)}}return a.index-c.index}function CE(a,c,p,f){for(var h=-1,S=a.length,_=p.length,R=-1,D=c.length,G=At(S-_,0),K=B(D+G),J=!f;++R<D;)K[R]=c[R];for(;++h<_;)(J||h<S)&&(K[p[h]]=a[h]);for(;G--;)K[R++]=a[h++];return K}function OE(a,c,p,f){for(var h=-1,S=a.length,_=-1,R=p.length,D=-1,G=c.length,K=At(S-R,0),J=B(K+G),ie=!f;++h<K;)J[h]=a[h];for(var me=h;++D<G;)J[me+D]=c[D];for(;++_<R;)(ie||h<S)&&(J[me+p[_]]=a[h++]);return J}function Tr(a,c){var p=-1,f=a.length;for(c||(c=B(f));++p<f;)c[p]=a[p];return c}function Wn(a,c,p,f){var h=!p;p||(p={});for(var S=-1,_=c.length;++S<_;){var R=c[S],D=f?f(p[R],a[R],R,p,a):t;D===t&&(D=a[R]),h?di(p,R,D):Oc(p,R,D)}return p}function NO(a,c){return Wn(a,Px(a),c)}function UO(a,c){return Wn(a,QE(a),c)}function up(a,c){return function(p,f){var h=Ee(p)?$C:aO,S=c?c():{};return h(p,a,he(f,2),S)}}function Wa(a){return Le(function(c,p){var f=-1,h=p.length,S=h>1?p[h-1]:t,_=h>2?p[2]:t;for(S=a.length>3&&typeof S=="function"?(h--,S):t,_&&lr(p[0],p[1],_)&&(S=h<3?t:S,h=1),c=Je(c);++f<h;){var R=p[f];R&&a(c,R,f,S)}return c})}function NE(a,c){return function(p,f){if(p==null)return p;if(!Sr(p))return a(p,f);for(var h=p.length,S=c?h:-1,_=Je(p);(c?S--:++S<h)&&f(_[S],S,_)!==!1;);return p}}function UE(a){return function(c,p,f){for(var h=-1,S=Je(c),_=f(c),R=_.length;R--;){var D=_[a?R:++h];if(p(S[D],D,S)===!1)break}return c}}function HO(a,c,p){var f=c&w,h=Vc(a);function S(){var _=this&&this!==Ft&&this instanceof S?h:a;return _.apply(f?p:this,arguments)}return S}function HE(a){return function(c){c=Qe(c);var p=Oa(c)?_n(c):t,f=p?p[0]:c.charAt(0),h=p?Gi(p,1).join(""):c.slice(1);return f[a]()+h}}function $a(a){return function(c){return Gy(N_(O_(c).replace(PC,"")),a,"")}}function Vc(a){return function(){var c=arguments;switch(c.length){case 0:return new a;case 1:return new a(c[0]);case 2:return new a(c[0],c[1]);case 3:return new a(c[0],c[1],c[2]);case 4:return new a(c[0],c[1],c[2],c[3]);case 5:return new a(c[0],c[1],c[2],c[3],c[4]);case 6:return new a(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new a(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var p=Va(a.prototype),f=a.apply(p,c);return lt(f)?f:p}}function BO(a,c,p){var f=Vc(a);function h(){for(var S=arguments.length,_=B(S),R=S,D=ja(h);R--;)_[R]=arguments[R];var G=S<3&&_[0]!==D&&_[S-1]!==D?[]:Vi(_,D);if(S-=G.length,S<p)return jE(a,c,pp,h.placeholder,t,_,G,t,t,p-S);var K=this&&this!==Ft&&this instanceof h?f:a;return Lr(K,this,_)}return h}function BE(a){return function(c,p,f){var h=Je(c);if(!Sr(c)){var S=he(p,3);c=Lt(c),p=function(R){return S(h[R],R,h)}}var _=a(c,p,f);return _>-1?h[S?c[_]:_]:t}}function VE(a){return hi(function(c){var p=c.length,f=p,h=rn.prototype.thru;for(a&&c.reverse();f--;){var S=c[f];if(typeof S!="function")throw new tn(i);if(h&&!_&&gp(S)=="wrapper")var _=new rn([],!0)}for(f=_?f:p;++f<p;){S=c[f];var R=gp(S),D=R=="wrapper"?kx(S):t;D&&Dx(D[0])&&D[1]==(ce|V|ne|fe)&&!D[4].length&&D[9]==1?_=_[gp(D[0])].apply(_,D[3]):_=S.length==1&&Dx(S)?_[R]():_.thru(S)}return function(){var G=arguments,K=G[0];if(_&&G.length==1&&Ee(K))return _.plant(K).value();for(var J=0,ie=p?c[J].apply(this,G):K;++J<p;)ie=c[J].call(this,ie);return ie}})}function pp(a,c,p,f,h,S,_,R,D,G){var K=c&ce,J=c&w,ie=c&E,me=c&(V|z),ye=c&ct,Me=ie?t:Vc(a);function xe(){for(var Ne=arguments.length,Ve=B(Ne),Nr=Ne;Nr--;)Ve[Nr]=arguments[Nr];if(me)var ur=ja(xe),Ur=XC(Ve,ur);if(f&&(Ve=CE(Ve,f,h,me)),S&&(Ve=OE(Ve,S,_,me)),Ne-=Ur,me&&Ne<G){var St=Vi(Ve,ur);return jE(a,c,pp,xe.placeholder,p,Ve,St,R,D,G-Ne)}var An=J?p:this,Si=ie?An[a]:a;return Ne=Ve.length,R?Ve=aN(Ve,R):ye&&Ne>1&&Ve.reverse(),K&&D<Ne&&(Ve.length=D),this&&this!==Ft&&this instanceof xe&&(Si=Me||Vc(Si)),Si.apply(An,Ve)}return xe}function WE(a,c){return function(p,f){return dO(p,a,c(f),{})}}function mp(a,c){return function(p,f){var h;if(p===t&&f===t)return c;if(p!==t&&(h=p),f!==t){if(h===t)return f;typeof p=="string"||typeof f=="string"?(p=Cr(p),f=Cr(f)):(p=kE(p),f=kE(f)),h=a(p,f)}return h}}function wx(a){return hi(function(c){return c=it(c,Ir(he())),Le(function(p){var f=this;return a(c,function(h){return Lr(h,f,p)})})})}function fp(a,c){c=c===t?" ":Cr(c);var p=c.length;if(p<2)return p?hx(c,a):c;var f=hx(c,Ju(a/Na(c)));return Oa(c)?Gi(_n(f),0,a).join(""):f.slice(0,a)}function VO(a,c,p,f){var h=c&w,S=Vc(a);function _(){for(var R=-1,D=arguments.length,G=-1,K=f.length,J=B(K+D),ie=this&&this!==Ft&&this instanceof _?S:a;++G<K;)J[G]=f[G];for(;D--;)J[G++]=arguments[++R];return Lr(ie,h?p:this,J)}return _}function $E(a){return function(c,p,f){return f&&typeof f!="number"&&lr(c,p,f)&&(p=f=t),c=Ti(c),p===t?(p=c,c=0):p=Ti(p),f=f===t?c<p?1:-1:Ti(f),RO(c,p,f,a)}}function dp(a){return function(c,p){return typeof c=="string"&&typeof p=="string"||(c=sn(c),p=sn(p)),a(c,p)}}function jE(a,c,p,f,h,S,_,R,D,G){var K=c&V,J=K?_:t,ie=K?t:_,me=K?S:t,ye=K?t:S;c|=K?ne:se,c&=~(K?se:ne),c&U||(c&=~(w|E));var Me=[a,c,h,me,J,ye,ie,R,D,G],xe=p.apply(t,Me);return Dx(a)&&r_(xe,Me),xe.placeholder=f,n_(xe,a,c)}function Ex(a){var c=kt[a];return function(p,f){if(p=sn(p),f=f==null?0:Jt(Ae(f),292),f&&nE(p)){var h=(Qe(p)+"e").split("e"),S=c(h[0]+"e"+(+h[1]+f));return h=(Qe(S)+"e").split("e"),+(h[0]+"e"+(+h[1]-f))}return c(p)}}var WO=Ha&&1/$u(new Ha([,-0]))[1]==L?function(a){return new Ha(a)}:qx;function zE(a){return function(c){var p=er(c);return p==wn?ex(c):p==En?o1(c):ZC(c,a(c))}}function gi(a,c,p,f,h,S,_,R){var D=c&E;if(!D&&typeof a!="function")throw new tn(i);var G=f?f.length:0;if(G||(c&=~(ne|se),f=h=t),_=_===t?_:At(Ae(_),0),R=R===t?R:Ae(R),G-=h?h.length:0,c&se){var K=f,J=h;f=h=t}var ie=D?t:kx(a),me=[a,c,p,f,h,K,J,S,_,R];if(ie&&nN(me,ie),a=me[0],c=me[1],p=me[2],f=me[3],h=me[4],R=me[9]=me[9]===t?D?0:a.length:At(me[9]-G,0),!R&&c&(V|z)&&(c&=~(V|z)),!c||c==w)var ye=HO(a,c,p);else c==V||c==z?ye=BO(a,c,R):(c==ne||c==(w|ne))&&!h.length?ye=VO(a,c,p,f):ye=pp.apply(t,me);var Me=ie?_E:r_;return n_(Me(ye,me),a,c)}function qE(a,c,p,f){return a===t||kn(a,Ua[p])&&!Ye.call(f,p)?c:a}function GE(a,c,p,f,h,S){return lt(a)&&lt(c)&&(S.set(c,a),sp(a,c,t,GE,S),S.delete(c)),a}function $O(a){return jc(a)?t:a}function KE(a,c,p,f,h,S){var _=p&y,R=a.length,D=c.length;if(R!=D&&!(_&&D>R))return!1;var G=S.get(a),K=S.get(c);if(G&&K)return G==c&&K==a;var J=-1,ie=!0,me=p&T?new Oo:t;for(S.set(a,c),S.set(c,a);++J<R;){var ye=a[J],Me=c[J];if(f)var xe=_?f(Me,ye,J,c,a,S):f(ye,Me,J,a,c,S);if(xe!==t){if(xe)continue;ie=!1;break}if(me){if(!Ky(c,function(Ne,Ve){if(!Mc(me,Ve)&&(ye===Ne||h(ye,Ne,p,f,S)))return me.push(Ve)})){ie=!1;break}}else if(!(ye===Me||h(ye,Me,p,f,S))){ie=!1;break}}return S.delete(a),S.delete(c),ie}function jO(a,c,p,f,h,S,_){switch(p){case La:if(a.byteLength!=c.byteLength||a.byteOffset!=c.byteOffset)return!1;a=a.buffer,c=c.buffer;case Pc:return!(a.byteLength!=c.byteLength||!S(new Qu(a),new Qu(c)));case Wt:case Xr:case _c:return kn(+a,+c);case ui:return a.name==c.name&&a.message==c.message;case Rc:case kc:return a==c+"";case wn:var R=ex;case En:var D=f&y;if(R||(R=$u),a.size!=c.size&&!D)return!1;var G=_.get(a);if(G)return G==c;f|=T,_.set(a,c);var K=KE(R(a),R(c),f,h,S,_);return _.delete(a),K;case Nu:if(Cc)return Cc.call(a)==Cc.call(c)}return!1}function zO(a,c,p,f,h,S){var _=p&y,R=_x(a),D=R.length,G=_x(c),K=G.length;if(D!=K&&!_)return!1;for(var J=D;J--;){var ie=R[J];if(!(_?ie in c:Ye.call(c,ie)))return!1}var me=S.get(a),ye=S.get(c);if(me&&ye)return me==c&&ye==a;var Me=!0;S.set(a,c),S.set(c,a);for(var xe=_;++J<D;){ie=R[J];var Ne=a[ie],Ve=c[ie];if(f)var Nr=_?f(Ve,Ne,ie,c,a,S):f(Ne,Ve,ie,a,c,S);if(!(Nr===t?Ne===Ve||h(Ne,Ve,p,f,S):Nr)){Me=!1;break}xe||(xe=ie=="constructor")}if(Me&&!xe){var ur=a.constructor,Ur=c.constructor;ur!=Ur&&"constructor"in a&&"constructor"in c&&!(typeof ur=="function"&&ur instanceof ur&&typeof Ur=="function"&&Ur instanceof Ur)&&(Me=!1)}return S.delete(a),S.delete(c),Me}function hi(a){return Lx(e_(a,t,l_),a+"")}function _x(a){return dE(a,Lt,Px)}function Rx(a){return dE(a,vr,QE)}var kx=tp?function(a){return tp.get(a)}:qx;function gp(a){for(var c=a.name+"",p=Ba[c],f=Ye.call(Ba,c)?p.length:0;f--;){var h=p[f],S=h.func;if(S==null||S==a)return h.name}return c}function ja(a){var c=Ye.call(x,"placeholder")?x:a;return c.placeholder}function he(){var a=x.iteratee||jx;return a=a===jx?yE:a,arguments.length?a(arguments[0],arguments[1]):a}function hp(a,c){var p=a.__data__;return JO(c)?p[typeof c=="string"?"string":"hash"]:p.map}function Ax(a){for(var c=Lt(a),p=c.length;p--;){var f=c[p],h=a[f];c[p]=[f,h,XE(h)]}return c}function Ho(a,c){var p=r1(a,c);return hE(p)?p:t}function qO(a){var c=Ye.call(a,Io),p=a[Io];try{a[Io]=t;var f=!0}catch{}var h=Gu.call(a);return f&&(c?a[Io]=p:delete a[Io]),h}var Px=rx?function(a){return a==null?[]:(a=Je(a),Hi(rx(a),function(c){return tE.call(a,c)}))}:Gx,QE=rx?function(a){for(var c=[];a;)Bi(c,Px(a)),a=Yu(a);return c}:Gx,er=cr;(nx&&er(new nx(new ArrayBuffer(1)))!=La||Fc&&er(new Fc)!=wn||ix&&er(ix.resolve())!=pw||Ha&&er(new Ha)!=En||Lc&&er(new Lc)!=Ac)&&(er=function(a){var c=cr(a),p=c==pi?a.constructor:t,f=p?Bo(p):"";if(f)switch(f){case A1:return La;case P1:return wn;case M1:return pw;case D1:return En;case F1:return Ac}return c});function GO(a,c,p){for(var f=-1,h=p.length;++f<h;){var S=p[f],_=S.size;switch(S.type){case"drop":a+=_;break;case"dropRight":c-=_;break;case"take":c=Jt(c,a+_);break;case"takeRight":a=At(a,c-_);break}}return{start:a,end:c}}function KO(a){var c=a.match(eC);return c?c[1].split(tC):[]}function YE(a,c,p){c=qi(c,a);for(var f=-1,h=c.length,S=!1;++f<h;){var _=$n(c[f]);if(!(S=a!=null&&p(a,_)))break;a=a[_]}return S||++f!=h?S:(h=a==null?0:a.length,!!h&&wp(h)&&yi(_,h)&&(Ee(a)||Vo(a)))}function QO(a){var c=a.length,p=new a.constructor(c);return c&&typeof a[0]=="string"&&Ye.call(a,"index")&&(p.index=a.index,p.input=a.input),p}function ZE(a){return typeof a.constructor=="function"&&!Wc(a)?Va(Yu(a)):{}}function YO(a,c,p){var f=a.constructor;switch(c){case Pc:return bx(a);case Wt:case Xr:return new f(+a);case La:return LO(a,p);case Ay:case Py:case My:case Dy:case Fy:case Ly:case Iy:case Cy:case Oy:return LE(a,p);case wn:return new f;case _c:case kc:return new f(a);case Rc:return IO(a);case En:return new f;case Nu:return CO(a)}}function ZO(a,c){var p=c.length;if(!p)return a;var f=p-1;return c[f]=(p>1?"& ":"")+c[f],c=c.join(p>2?", ":" "),a.replace(JI,`{
/* [wrapped with `+c+`] */
`)}function XO(a){return Ee(a)||Vo(a)||!!(rE&&a&&a[rE])}function yi(a,c){var p=typeof a;return c=c??N,!!c&&(p=="number"||p!="symbol"&&uC.test(a))&&a>-1&&a%1==0&&a<c}function lr(a,c,p){if(!lt(p))return!1;var f=typeof c;return(f=="number"?Sr(p)&&yi(c,p.length):f=="string"&&c in p)?kn(p[c],a):!1}function Mx(a,c){if(Ee(a))return!1;var p=typeof a;return p=="number"||p=="symbol"||p=="boolean"||a==null||Or(a)?!0:QI.test(a)||!KI.test(a)||c!=null&&a in Je(c)}function JO(a){var c=typeof a;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?a!=="__proto__":a===null}function Dx(a){var c=gp(a),p=x[c];if(typeof p!="function"||!(c in Be.prototype))return!1;if(a===p)return!0;var f=kx(p);return!!f&&a===f[0]}function eN(a){return!!Xw&&Xw in a}var tN=zu?xi:Kx;function Wc(a){var c=a&&a.constructor,p=typeof c=="function"&&c.prototype||Ua;return a===p}function XE(a){return a===a&&!lt(a)}function JE(a,c){return function(p){return p==null?!1:p[a]===c&&(c!==t||a in Je(p))}}function rN(a){var c=vp(a,function(f){return p.size===l&&p.clear(),f}),p=c.cache;return c}function nN(a,c){var p=a[1],f=c[1],h=p|f,S=h<(w|E|ce),_=f==ce&&p==V||f==ce&&p==fe&&a[7].length<=c[8]||f==(ce|fe)&&c[7].length<=c[8]&&p==V;if(!(S||_))return a;f&w&&(a[2]=c[2],h|=p&w?0:U);var R=c[3];if(R){var D=a[3];a[3]=D?CE(D,R,c[4]):R,a[4]=D?Vi(a[3],u):c[4]}return R=c[5],R&&(D=a[5],a[5]=D?OE(D,R,c[6]):R,a[6]=D?Vi(a[5],u):c[6]),R=c[7],R&&(a[7]=R),f&ce&&(a[8]=a[8]==null?c[8]:Jt(a[8],c[8])),a[9]==null&&(a[9]=c[9]),a[0]=c[0],a[1]=h,a}function iN(a){var c=[];if(a!=null)for(var p in Je(a))c.push(p);return c}function oN(a){return Gu.call(a)}function e_(a,c,p){return c=At(c===t?a.length-1:c,0),function(){for(var f=arguments,h=-1,S=At(f.length-c,0),_=B(S);++h<S;)_[h]=f[c+h];h=-1;for(var R=B(c+1);++h<c;)R[h]=f[h];return R[c]=p(_),Lr(a,this,R)}}function t_(a,c){return c.length<2?a:Uo(a,on(c,0,-1))}function aN(a,c){for(var p=a.length,f=Jt(c.length,p),h=Tr(a);f--;){var S=c[f];a[f]=yi(S,p)?h[S]:t}return a}function Fx(a,c){if(!(c==="constructor"&&typeof a[c]=="function")&&c!="__proto__")return a[c]}var r_=i_(_E),$c=v1||function(a,c){return Ft.setTimeout(a,c)},Lx=i_(PO);function n_(a,c,p){var f=c+"";return Lx(a,ZO(f,sN(KO(f),p)))}function i_(a){var c=0,p=0;return function(){var f=_1(),h=C-(f-p);if(p=f,h>0){if(++c>=H)return arguments[0]}else c=0;return a.apply(t,arguments)}}function yp(a,c){var p=-1,f=a.length,h=f-1;for(c=c===t?f:c;++p<c;){var S=gx(p,h),_=a[S];a[S]=a[p],a[p]=_}return a.length=c,a}var o_=rN(function(a){var c=[];return a.charCodeAt(0)===46&&c.push(""),a.replace(YI,function(p,f,h,S){c.push(h?S.replace(iC,"$1"):f||p)}),c});function $n(a){if(typeof a=="string"||Or(a))return a;var c=a+"";return c=="0"&&1/a==-L?"-0":c}function Bo(a){if(a!=null){try{return qu.call(a)}catch{}try{return a+""}catch{}}return""}function sN(a,c){return en(be,function(p){var f="_."+p[0];c&p[1]&&!Vu(a,f)&&a.push(f)}),a.sort()}function a_(a){if(a instanceof Be)return a.clone();var c=new rn(a.__wrapped__,a.__chain__);return c.__actions__=Tr(a.__actions__),c.__index__=a.__index__,c.__values__=a.__values__,c}function cN(a,c,p){(p?lr(a,c,p):c===t)?c=1:c=At(Ae(c),0);var f=a==null?0:a.length;if(!f||c<1)return[];for(var h=0,S=0,_=B(Ju(f/c));h<f;)_[S++]=on(a,h,h+=c);return _}function lN(a){for(var c=-1,p=a==null?0:a.length,f=0,h=[];++c<p;){var S=a[c];S&&(h[f++]=S)}return h}function uN(){var a=arguments.length;if(!a)return[];for(var c=B(a-1),p=arguments[0],f=a;f--;)c[f-1]=arguments[f];return Bi(Ee(p)?Tr(p):[p],$t(c,1))}var pN=Le(function(a,c){return Tt(a)?Nc(a,$t(c,1,Tt,!0)):[]}),mN=Le(function(a,c){var p=an(c);return Tt(p)&&(p=t),Tt(a)?Nc(a,$t(c,1,Tt,!0),he(p,2)):[]}),fN=Le(function(a,c){var p=an(c);return Tt(p)&&(p=t),Tt(a)?Nc(a,$t(c,1,Tt,!0),t,p):[]});function dN(a,c,p){var f=a==null?0:a.length;return f?(c=p||c===t?1:Ae(c),on(a,c<0?0:c,f)):[]}function gN(a,c,p){var f=a==null?0:a.length;return f?(c=p||c===t?1:Ae(c),c=f-c,on(a,0,c<0?0:c)):[]}function hN(a,c){return a&&a.length?lp(a,he(c,3),!0,!0):[]}function yN(a,c){return a&&a.length?lp(a,he(c,3),!0):[]}function xN(a,c,p,f){var h=a==null?0:a.length;return h?(p&&typeof p!="number"&&lr(a,c,p)&&(p=0,f=h),uO(a,c,p,f)):[]}function s_(a,c,p){var f=a==null?0:a.length;if(!f)return-1;var h=p==null?0:Ae(p);return h<0&&(h=At(f+h,0)),Wu(a,he(c,3),h)}function c_(a,c,p){var f=a==null?0:a.length;if(!f)return-1;var h=f-1;return p!==t&&(h=Ae(p),h=p<0?At(f+h,0):Jt(h,f-1)),Wu(a,he(c,3),h,!0)}function l_(a){var c=a==null?0:a.length;return c?$t(a,1):[]}function TN(a){var c=a==null?0:a.length;return c?$t(a,L):[]}function SN(a,c){var p=a==null?0:a.length;return p?(c=c===t?1:Ae(c),$t(a,c)):[]}function vN(a){for(var c=-1,p=a==null?0:a.length,f={};++c<p;){var h=a[c];f[h[0]]=h[1]}return f}function u_(a){return a&&a.length?a[0]:t}function bN(a,c,p){var f=a==null?0:a.length;if(!f)return-1;var h=p==null?0:Ae(p);return h<0&&(h=At(f+h,0)),Ca(a,c,h)}function wN(a){var c=a==null?0:a.length;return c?on(a,0,-1):[]}var EN=Le(function(a){var c=it(a,Sx);return c.length&&c[0]===a[0]?ux(c):[]}),_N=Le(function(a){var c=an(a),p=it(a,Sx);return c===an(p)?c=t:p.pop(),p.length&&p[0]===a[0]?ux(p,he(c,2)):[]}),RN=Le(function(a){var c=an(a),p=it(a,Sx);return c=typeof c=="function"?c:t,c&&p.pop(),p.length&&p[0]===a[0]?ux(p,t,c):[]});function kN(a,c){return a==null?"":w1.call(a,c)}function an(a){var c=a==null?0:a.length;return c?a[c-1]:t}function AN(a,c,p){var f=a==null?0:a.length;if(!f)return-1;var h=f;return p!==t&&(h=Ae(p),h=h<0?At(f+h,0):Jt(h,f-1)),c===c?s1(a,c,h):Wu(a,jw,h,!0)}function PN(a,c){return a&&a.length?vE(a,Ae(c)):t}var MN=Le(p_);function p_(a,c){return a&&a.length&&c&&c.length?dx(a,c):a}function DN(a,c,p){return a&&a.length&&c&&c.length?dx(a,c,he(p,2)):a}function FN(a,c,p){return a&&a.length&&c&&c.length?dx(a,c,t,p):a}var LN=hi(function(a,c){var p=a==null?0:a.length,f=ax(a,c);return EE(a,it(c,function(h){return yi(h,p)?+h:h}).sort(IE)),f});function IN(a,c){var p=[];if(!(a&&a.length))return p;var f=-1,h=[],S=a.length;for(c=he(c,3);++f<S;){var _=a[f];c(_,f,a)&&(p.push(_),h.push(f))}return EE(a,h),p}function Ix(a){return a==null?a:k1.call(a)}function CN(a,c,p){var f=a==null?0:a.length;return f?(p&&typeof p!="number"&&lr(a,c,p)?(c=0,p=f):(c=c==null?0:Ae(c),p=p===t?f:Ae(p)),on(a,c,p)):[]}function ON(a,c){return cp(a,c)}function NN(a,c,p){return yx(a,c,he(p,2))}function UN(a,c){var p=a==null?0:a.length;if(p){var f=cp(a,c);if(f<p&&kn(a[f],c))return f}return-1}function HN(a,c){return cp(a,c,!0)}function BN(a,c,p){return yx(a,c,he(p,2),!0)}function VN(a,c){var p=a==null?0:a.length;if(p){var f=cp(a,c,!0)-1;if(kn(a[f],c))return f}return-1}function WN(a){return a&&a.length?RE(a):[]}function $N(a,c){return a&&a.length?RE(a,he(c,2)):[]}function jN(a){var c=a==null?0:a.length;return c?on(a,1,c):[]}function zN(a,c,p){return a&&a.length?(c=p||c===t?1:Ae(c),on(a,0,c<0?0:c)):[]}function qN(a,c,p){var f=a==null?0:a.length;return f?(c=p||c===t?1:Ae(c),c=f-c,on(a,c<0?0:c,f)):[]}function GN(a,c){return a&&a.length?lp(a,he(c,3),!1,!0):[]}function KN(a,c){return a&&a.length?lp(a,he(c,3)):[]}var QN=Le(function(a){return zi($t(a,1,Tt,!0))}),YN=Le(function(a){var c=an(a);return Tt(c)&&(c=t),zi($t(a,1,Tt,!0),he(c,2))}),ZN=Le(function(a){var c=an(a);return c=typeof c=="function"?c:t,zi($t(a,1,Tt,!0),t,c)});function XN(a){return a&&a.length?zi(a):[]}function JN(a,c){return a&&a.length?zi(a,he(c,2)):[]}function eU(a,c){return c=typeof c=="function"?c:t,a&&a.length?zi(a,t,c):[]}function Cx(a){if(!(a&&a.length))return[];var c=0;return a=Hi(a,function(p){if(Tt(p))return c=At(p.length,c),!0}),Xy(c,function(p){return it(a,Qy(p))})}function m_(a,c){if(!(a&&a.length))return[];var p=Cx(a);return c==null?p:it(p,function(f){return Lr(c,t,f)})}var tU=Le(function(a,c){return Tt(a)?Nc(a,c):[]}),rU=Le(function(a){return Tx(Hi(a,Tt))}),nU=Le(function(a){var c=an(a);return Tt(c)&&(c=t),Tx(Hi(a,Tt),he(c,2))}),iU=Le(function(a){var c=an(a);return c=typeof c=="function"?c:t,Tx(Hi(a,Tt),t,c)}),oU=Le(Cx);function aU(a,c){return ME(a||[],c||[],Oc)}function sU(a,c){return ME(a||[],c||[],Bc)}var cU=Le(function(a){var c=a.length,p=c>1?a[c-1]:t;return p=typeof p=="function"?(a.pop(),p):t,m_(a,p)});function f_(a){var c=x(a);return c.__chain__=!0,c}function lU(a,c){return c(a),a}function xp(a,c){return c(a)}var uU=hi(function(a){var c=a.length,p=c?a[0]:0,f=this.__wrapped__,h=function(S){return ax(S,a)};return c>1||this.__actions__.length||!(f instanceof Be)||!yi(p)?this.thru(h):(f=f.slice(p,+p+(c?1:0)),f.__actions__.push({func:xp,args:[h],thisArg:t}),new rn(f,this.__chain__).thru(function(S){return c&&!S.length&&S.push(t),S}))});function pU(){return f_(this)}function mU(){return new rn(this.value(),this.__chain__)}function fU(){this.__values__===t&&(this.__values__=k_(this.value()));var a=this.__index__>=this.__values__.length,c=a?t:this.__values__[this.__index__++];return{done:a,value:c}}function dU(){return this}function gU(a){for(var c,p=this;p instanceof np;){var f=a_(p);f.__index__=0,f.__values__=t,c?h.__wrapped__=f:c=f;var h=f;p=p.__wrapped__}return h.__wrapped__=a,c}function hU(){var a=this.__wrapped__;if(a instanceof Be){var c=a;return this.__actions__.length&&(c=new Be(this)),c=c.reverse(),c.__actions__.push({func:xp,args:[Ix],thisArg:t}),new rn(c,this.__chain__)}return this.thru(Ix)}function yU(){return PE(this.__wrapped__,this.__actions__)}var xU=up(function(a,c,p){Ye.call(a,p)?++a[p]:di(a,p,1)});function TU(a,c,p){var f=Ee(a)?Ww:lO;return p&&lr(a,c,p)&&(c=t),f(a,he(c,3))}function SU(a,c){var p=Ee(a)?Hi:mE;return p(a,he(c,3))}var vU=BE(s_),bU=BE(c_);function wU(a,c){return $t(Tp(a,c),1)}function EU(a,c){return $t(Tp(a,c),L)}function _U(a,c,p){return p=p===t?1:Ae(p),$t(Tp(a,c),p)}function d_(a,c){var p=Ee(a)?en:ji;return p(a,he(c,3))}function g_(a,c){var p=Ee(a)?jC:pE;return p(a,he(c,3))}var RU=up(function(a,c,p){Ye.call(a,p)?a[p].push(c):di(a,p,[c])});function kU(a,c,p,f){a=Sr(a)?a:qa(a),p=p&&!f?Ae(p):0;var h=a.length;return p<0&&(p=At(h+p,0)),Ep(a)?p<=h&&a.indexOf(c,p)>-1:!!h&&Ca(a,c,p)>-1}var AU=Le(function(a,c,p){var f=-1,h=typeof c=="function",S=Sr(a)?B(a.length):[];return ji(a,function(_){S[++f]=h?Lr(c,_,p):Uc(_,c,p)}),S}),PU=up(function(a,c,p){di(a,p,c)});function Tp(a,c){var p=Ee(a)?it:xE;return p(a,he(c,3))}function MU(a,c,p,f){return a==null?[]:(Ee(c)||(c=c==null?[]:[c]),p=f?t:p,Ee(p)||(p=p==null?[]:[p]),bE(a,c,p))}var DU=up(function(a,c,p){a[p?0:1].push(c)},function(){return[[],[]]});function FU(a,c,p){var f=Ee(a)?Gy:qw,h=arguments.length<3;return f(a,he(c,4),p,h,ji)}function LU(a,c,p){var f=Ee(a)?zC:qw,h=arguments.length<3;return f(a,he(c,4),p,h,pE)}function IU(a,c){var p=Ee(a)?Hi:mE;return p(a,bp(he(c,3)))}function CU(a){var c=Ee(a)?sE:kO;return c(a)}function OU(a,c,p){(p?lr(a,c,p):c===t)?c=1:c=Ae(c);var f=Ee(a)?iO:AO;return f(a,c)}function NU(a){var c=Ee(a)?oO:MO;return c(a)}function UU(a){if(a==null)return 0;if(Sr(a))return Ep(a)?Na(a):a.length;var c=er(a);return c==wn||c==En?a.size:mx(a).length}function HU(a,c,p){var f=Ee(a)?Ky:DO;return p&&lr(a,c,p)&&(c=t),f(a,he(c,3))}var BU=Le(function(a,c){if(a==null)return[];var p=c.length;return p>1&&lr(a,c[0],c[1])?c=[]:p>2&&lr(c[0],c[1],c[2])&&(c=[c[0]]),bE(a,$t(c,1),[])}),Sp=S1||function(){return Ft.Date.now()};function VU(a,c){if(typeof c!="function")throw new tn(i);return a=Ae(a),function(){if(--a<1)return c.apply(this,arguments)}}function h_(a,c,p){return c=p?t:c,c=a&&c==null?a.length:c,gi(a,ce,t,t,t,t,c)}function y_(a,c){var p;if(typeof c!="function")throw new tn(i);return a=Ae(a),function(){return--a>0&&(p=c.apply(this,arguments)),a<=1&&(c=t),p}}var Ox=Le(function(a,c,p){var f=w;if(p.length){var h=Vi(p,ja(Ox));f|=ne}return gi(a,f,c,p,h)}),x_=Le(function(a,c,p){var f=w|E;if(p.length){var h=Vi(p,ja(x_));f|=ne}return gi(c,f,a,p,h)});function T_(a,c,p){c=p?t:c;var f=gi(a,V,t,t,t,t,t,c);return f.placeholder=T_.placeholder,f}function S_(a,c,p){c=p?t:c;var f=gi(a,z,t,t,t,t,t,c);return f.placeholder=S_.placeholder,f}function v_(a,c,p){var f,h,S,_,R,D,G=0,K=!1,J=!1,ie=!0;if(typeof a!="function")throw new tn(i);c=sn(c)||0,lt(p)&&(K=!!p.leading,J="maxWait"in p,S=J?At(sn(p.maxWait)||0,c):S,ie="trailing"in p?!!p.trailing:ie);function me(St){var An=f,Si=h;return f=h=t,G=St,_=a.apply(Si,An),_}function ye(St){return G=St,R=$c(Ne,c),K?me(St):_}function Me(St){var An=St-D,Si=St-G,B_=c-An;return J?Jt(B_,S-Si):B_}function xe(St){var An=St-D,Si=St-G;return D===t||An>=c||An<0||J&&Si>=S}function Ne(){var St=Sp();if(xe(St))return Ve(St);R=$c(Ne,Me(St))}function Ve(St){return R=t,ie&&f?me(St):(f=h=t,_)}function Nr(){R!==t&&DE(R),G=0,f=D=h=R=t}function ur(){return R===t?_:Ve(Sp())}function Ur(){var St=Sp(),An=xe(St);if(f=arguments,h=this,D=St,An){if(R===t)return ye(D);if(J)return DE(R),R=$c(Ne,c),me(D)}return R===t&&(R=$c(Ne,c)),_}return Ur.cancel=Nr,Ur.flush=ur,Ur}var WU=Le(function(a,c){return uE(a,1,c)}),$U=Le(function(a,c,p){return uE(a,sn(c)||0,p)});function jU(a){return gi(a,ct)}function vp(a,c){if(typeof a!="function"||c!=null&&typeof c!="function")throw new tn(i);var p=function(){var f=arguments,h=c?c.apply(this,f):f[0],S=p.cache;if(S.has(h))return S.get(h);var _=a.apply(this,f);return p.cache=S.set(h,_)||S,_};return p.cache=new(vp.Cache||fi),p}vp.Cache=fi;function bp(a){if(typeof a!="function")throw new tn(i);return function(){var c=arguments;switch(c.length){case 0:return!a.call(this);case 1:return!a.call(this,c[0]);case 2:return!a.call(this,c[0],c[1]);case 3:return!a.call(this,c[0],c[1],c[2])}return!a.apply(this,c)}}function zU(a){return y_(2,a)}var qU=FO(function(a,c){c=c.length==1&&Ee(c[0])?it(c[0],Ir(he())):it($t(c,1),Ir(he()));var p=c.length;return Le(function(f){for(var h=-1,S=Jt(f.length,p);++h<S;)f[h]=c[h].call(this,f[h]);return Lr(a,this,f)})}),Nx=Le(function(a,c){var p=Vi(c,ja(Nx));return gi(a,ne,t,c,p)}),b_=Le(function(a,c){var p=Vi(c,ja(b_));return gi(a,se,t,c,p)}),GU=hi(function(a,c){return gi(a,fe,t,t,t,c)});function KU(a,c){if(typeof a!="function")throw new tn(i);return c=c===t?c:Ae(c),Le(a,c)}function QU(a,c){if(typeof a!="function")throw new tn(i);return c=c==null?0:At(Ae(c),0),Le(function(p){var f=p[c],h=Gi(p,0,c);return f&&Bi(h,f),Lr(a,this,h)})}function YU(a,c,p){var f=!0,h=!0;if(typeof a!="function")throw new tn(i);return lt(p)&&(f="leading"in p?!!p.leading:f,h="trailing"in p?!!p.trailing:h),v_(a,c,{leading:f,maxWait:c,trailing:h})}function ZU(a){return h_(a,1)}function XU(a,c){return Nx(vx(c),a)}function JU(){if(!arguments.length)return[];var a=arguments[0];return Ee(a)?a:[a]}function eH(a){return nn(a,g)}function tH(a,c){return c=typeof c=="function"?c:t,nn(a,g,c)}function rH(a){return nn(a,m|g)}function nH(a,c){return c=typeof c=="function"?c:t,nn(a,m|g,c)}function iH(a,c){return c==null||lE(a,c,Lt(c))}function kn(a,c){return a===c||a!==a&&c!==c}var oH=dp(lx),aH=dp(function(a,c){return a>=c}),Vo=gE(function(){return arguments}())?gE:function(a){return dt(a)&&Ye.call(a,"callee")&&!tE.call(a,"callee")},Ee=B.isArray,sH=Ow?Ir(Ow):gO;function Sr(a){return a!=null&&wp(a.length)&&!xi(a)}function Tt(a){return dt(a)&&Sr(a)}function cH(a){return a===!0||a===!1||dt(a)&&cr(a)==Wt}var Ki=b1||Kx,lH=Nw?Ir(Nw):hO;function uH(a){return dt(a)&&a.nodeType===1&&!jc(a)}function pH(a){if(a==null)return!0;if(Sr(a)&&(Ee(a)||typeof a=="string"||typeof a.splice=="function"||Ki(a)||za(a)||Vo(a)))return!a.length;var c=er(a);if(c==wn||c==En)return!a.size;if(Wc(a))return!mx(a).length;for(var p in a)if(Ye.call(a,p))return!1;return!0}function mH(a,c){return Hc(a,c)}function fH(a,c,p){p=typeof p=="function"?p:t;var f=p?p(a,c):t;return f===t?Hc(a,c,t,p):!!f}function Ux(a){if(!dt(a))return!1;var c=cr(a);return c==ui||c==Fo||typeof a.message=="string"&&typeof a.name=="string"&&!jc(a)}function dH(a){return typeof a=="number"&&nE(a)}function xi(a){if(!lt(a))return!1;var c=cr(a);return c==Fa||c==uw||c==ft||c==UI}function w_(a){return typeof a=="number"&&a==Ae(a)}function wp(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=N}function lt(a){var c=typeof a;return a!=null&&(c=="object"||c=="function")}function dt(a){return a!=null&&typeof a=="object"}var E_=Uw?Ir(Uw):xO;function gH(a,c){return a===c||px(a,c,Ax(c))}function hH(a,c,p){return p=typeof p=="function"?p:t,px(a,c,Ax(c),p)}function yH(a){return __(a)&&a!=+a}function xH(a){if(tN(a))throw new we(n);return hE(a)}function TH(a){return a===null}function SH(a){return a==null}function __(a){return typeof a=="number"||dt(a)&&cr(a)==_c}function jc(a){if(!dt(a)||cr(a)!=pi)return!1;var c=Yu(a);if(c===null)return!0;var p=Ye.call(c,"constructor")&&c.constructor;return typeof p=="function"&&p instanceof p&&qu.call(p)==h1}var Hx=Hw?Ir(Hw):TO;function vH(a){return w_(a)&&a>=-N&&a<=N}var R_=Bw?Ir(Bw):SO;function Ep(a){return typeof a=="string"||!Ee(a)&&dt(a)&&cr(a)==kc}function Or(a){return typeof a=="symbol"||dt(a)&&cr(a)==Nu}var za=Vw?Ir(Vw):vO;function bH(a){return a===t}function wH(a){return dt(a)&&er(a)==Ac}function EH(a){return dt(a)&&cr(a)==BI}var _H=dp(fx),RH=dp(function(a,c){return a<=c});function k_(a){if(!a)return[];if(Sr(a))return Ep(a)?_n(a):Tr(a);if(Dc&&a[Dc])return i1(a[Dc]());var c=er(a),p=c==wn?ex:c==En?$u:qa;return p(a)}function Ti(a){if(!a)return a===0?a:0;if(a=sn(a),a===L||a===-L){var c=a<0?-1:1;return c*j}return a===a?a:0}function Ae(a){var c=Ti(a),p=c%1;return c===c?p?c-p:c:0}function A_(a){return a?No(Ae(a),0,Q):0}function sn(a){if(typeof a=="number")return a;if(Or(a))return X;if(lt(a)){var c=typeof a.valueOf=="function"?a.valueOf():a;a=lt(c)?c+"":c}if(typeof a!="string")return a===0?a:+a;a=Gw(a);var p=sC.test(a);return p||lC.test(a)?VC(a.slice(2),p?2:8):aC.test(a)?X:+a}function P_(a){return Wn(a,vr(a))}function kH(a){return a?No(Ae(a),-N,N):a===0?a:0}function Qe(a){return a==null?"":Cr(a)}var AH=Wa(function(a,c){if(Wc(c)||Sr(c)){Wn(c,Lt(c),a);return}for(var p in c)Ye.call(c,p)&&Oc(a,p,c[p])}),M_=Wa(function(a,c){Wn(c,vr(c),a)}),_p=Wa(function(a,c,p,f){Wn(c,vr(c),a,f)}),PH=Wa(function(a,c,p,f){Wn(c,Lt(c),a,f)}),MH=hi(ax);function DH(a,c){var p=Va(a);return c==null?p:cE(p,c)}var FH=Le(function(a,c){a=Je(a);var p=-1,f=c.length,h=f>2?c[2]:t;for(h&&lr(c[0],c[1],h)&&(f=1);++p<f;)for(var S=c[p],_=vr(S),R=-1,D=_.length;++R<D;){var G=_[R],K=a[G];(K===t||kn(K,Ua[G])&&!Ye.call(a,G))&&(a[G]=S[G])}return a}),LH=Le(function(a){return a.push(t,GE),Lr(D_,t,a)});function IH(a,c){return $w(a,he(c,3),Vn)}function CH(a,c){return $w(a,he(c,3),cx)}function OH(a,c){return a==null?a:sx(a,he(c,3),vr)}function NH(a,c){return a==null?a:fE(a,he(c,3),vr)}function UH(a,c){return a&&Vn(a,he(c,3))}function HH(a,c){return a&&cx(a,he(c,3))}function BH(a){return a==null?[]:ap(a,Lt(a))}function VH(a){return a==null?[]:ap(a,vr(a))}function Bx(a,c,p){var f=a==null?t:Uo(a,c);return f===t?p:f}function WH(a,c){return a!=null&&YE(a,c,pO)}function Vx(a,c){return a!=null&&YE(a,c,mO)}var $H=WE(function(a,c,p){c!=null&&typeof c.toString!="function"&&(c=Gu.call(c)),a[c]=p},$x(br)),jH=WE(function(a,c,p){c!=null&&typeof c.toString!="function"&&(c=Gu.call(c)),Ye.call(a,c)?a[c].push(p):a[c]=[p]},he),zH=Le(Uc);function Lt(a){return Sr(a)?aE(a):mx(a)}function vr(a){return Sr(a)?aE(a,!0):bO(a)}function qH(a,c){var p={};return c=he(c,3),Vn(a,function(f,h,S){di(p,c(f,h,S),f)}),p}function GH(a,c){var p={};return c=he(c,3),Vn(a,function(f,h,S){di(p,h,c(f,h,S))}),p}var KH=Wa(function(a,c,p){sp(a,c,p)}),D_=Wa(function(a,c,p,f){sp(a,c,p,f)}),QH=hi(function(a,c){var p={};if(a==null)return p;var f=!1;c=it(c,function(S){return S=qi(S,a),f||(f=S.length>1),S}),Wn(a,Rx(a),p),f&&(p=nn(p,m|d|g,$O));for(var h=c.length;h--;)xx(p,c[h]);return p});function YH(a,c){return F_(a,bp(he(c)))}var ZH=hi(function(a,c){return a==null?{}:EO(a,c)});function F_(a,c){if(a==null)return{};var p=it(Rx(a),function(f){return[f]});return c=he(c),wE(a,p,function(f,h){return c(f,h[0])})}function XH(a,c,p){c=qi(c,a);var f=-1,h=c.length;for(h||(h=1,a=t);++f<h;){var S=a==null?t:a[$n(c[f])];S===t&&(f=h,S=p),a=xi(S)?S.call(a):S}return a}function JH(a,c,p){return a==null?a:Bc(a,c,p)}function e2(a,c,p,f){return f=typeof f=="function"?f:t,a==null?a:Bc(a,c,p,f)}var L_=zE(Lt),I_=zE(vr);function t2(a,c,p){var f=Ee(a),h=f||Ki(a)||za(a);if(c=he(c,4),p==null){var S=a&&a.constructor;h?p=f?new S:[]:lt(a)?p=xi(S)?Va(Yu(a)):{}:p={}}return(h?en:Vn)(a,function(_,R,D){return c(p,_,R,D)}),p}function r2(a,c){return a==null?!0:xx(a,c)}function n2(a,c,p){return a==null?a:AE(a,c,vx(p))}function i2(a,c,p,f){return f=typeof f=="function"?f:t,a==null?a:AE(a,c,vx(p),f)}function qa(a){return a==null?[]:Jy(a,Lt(a))}function o2(a){return a==null?[]:Jy(a,vr(a))}function a2(a,c,p){return p===t&&(p=c,c=t),p!==t&&(p=sn(p),p=p===p?p:0),c!==t&&(c=sn(c),c=c===c?c:0),No(sn(a),c,p)}function s2(a,c,p){return c=Ti(c),p===t?(p=c,c=0):p=Ti(p),a=sn(a),fO(a,c,p)}function c2(a,c,p){if(p&&typeof p!="boolean"&&lr(a,c,p)&&(c=p=t),p===t&&(typeof c=="boolean"?(p=c,c=t):typeof a=="boolean"&&(p=a,a=t)),a===t&&c===t?(a=0,c=1):(a=Ti(a),c===t?(c=a,a=0):c=Ti(c)),a>c){var f=a;a=c,c=f}if(p||a%1||c%1){var h=iE();return Jt(a+h*(c-a+BC("1e-"+((h+"").length-1))),c)}return gx(a,c)}var l2=$a(function(a,c,p){return c=c.toLowerCase(),a+(p?C_(c):c)});function C_(a){return Wx(Qe(a).toLowerCase())}function O_(a){return a=Qe(a),a&&a.replace(pC,JC).replace(MC,"")}function u2(a,c,p){a=Qe(a),c=Cr(c);var f=a.length;p=p===t?f:No(Ae(p),0,f);var h=p;return p-=c.length,p>=0&&a.slice(p,h)==c}function p2(a){return a=Qe(a),a&&zI.test(a)?a.replace(fw,e1):a}function m2(a){return a=Qe(a),a&&ZI.test(a)?a.replace(Ny,"\\$&"):a}var f2=$a(function(a,c,p){return a+(p?"-":"")+c.toLowerCase()}),d2=$a(function(a,c,p){return a+(p?" ":"")+c.toLowerCase()}),g2=HE("toLowerCase");function h2(a,c,p){a=Qe(a),c=Ae(c);var f=c?Na(a):0;if(!c||f>=c)return a;var h=(c-f)/2;return fp(ep(h),p)+a+fp(Ju(h),p)}function y2(a,c,p){a=Qe(a),c=Ae(c);var f=c?Na(a):0;return c&&f<c?a+fp(c-f,p):a}function x2(a,c,p){a=Qe(a),c=Ae(c);var f=c?Na(a):0;return c&&f<c?fp(c-f,p)+a:a}function T2(a,c,p){return p||c==null?c=0:c&&(c=+c),R1(Qe(a).replace(Uy,""),c||0)}function S2(a,c,p){return(p?lr(a,c,p):c===t)?c=1:c=Ae(c),hx(Qe(a),c)}function v2(){var a=arguments,c=Qe(a[0]);return a.length<3?c:c.replace(a[1],a[2])}var b2=$a(function(a,c,p){return a+(p?"_":"")+c.toLowerCase()});function w2(a,c,p){return p&&typeof p!="number"&&lr(a,c,p)&&(c=p=t),p=p===t?Q:p>>>0,p?(a=Qe(a),a&&(typeof c=="string"||c!=null&&!Hx(c))&&(c=Cr(c),!c&&Oa(a))?Gi(_n(a),0,p):a.split(c,p)):[]}var E2=$a(function(a,c,p){return a+(p?" ":"")+Wx(c)});function _2(a,c,p){return a=Qe(a),p=p==null?0:No(Ae(p),0,a.length),c=Cr(c),a.slice(p,p+c.length)==c}function R2(a,c,p){var f=x.templateSettings;p&&lr(a,c,p)&&(c=t),a=Qe(a),c=_p({},c,f,qE);var h=_p({},c.imports,f.imports,qE),S=Lt(h),_=Jy(h,S),R,D,G=0,K=c.interpolate||Uu,J="__p += '",ie=tx((c.escape||Uu).source+"|"+K.source+"|"+(K===dw?oC:Uu).source+"|"+(c.evaluate||Uu).source+"|$","g"),me="//# sourceURL="+(Ye.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++CC+"]")+`
`;a.replace(ie,function(xe,Ne,Ve,Nr,ur,Ur){return Ve||(Ve=Nr),J+=a.slice(G,Ur).replace(mC,t1),Ne&&(R=!0,J+=`' +
__e(`+Ne+`) +
'`),ur&&(D=!0,J+=`';
`+ur+`;
__p += '`),Ve&&(J+=`' +
((__t = (`+Ve+`)) == null ? '' : __t) +
'`),G=Ur+xe.length,xe}),J+=`';
`;var ye=Ye.call(c,"variable")&&c.variable;if(!ye)J=`with (obj) {
`+J+`
}
`;else if(nC.test(ye))throw new we(o);J=(D?J.replace(VI,""):J).replace(WI,"$1").replace($I,"$1;"),J="function("+(ye||"obj")+`) {
`+(ye?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(R?", __e = _.escape":"")+(D?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+J+`return __p
}`;var Me=U_(function(){return Ge(S,me+"return "+J).apply(t,_)});if(Me.source=J,Ux(Me))throw Me;return Me}function k2(a){return Qe(a).toLowerCase()}function A2(a){return Qe(a).toUpperCase()}function P2(a,c,p){if(a=Qe(a),a&&(p||c===t))return Gw(a);if(!a||!(c=Cr(c)))return a;var f=_n(a),h=_n(c),S=Kw(f,h),_=Qw(f,h)+1;return Gi(f,S,_).join("")}function M2(a,c,p){if(a=Qe(a),a&&(p||c===t))return a.slice(0,Zw(a)+1);if(!a||!(c=Cr(c)))return a;var f=_n(a),h=Qw(f,_n(c))+1;return Gi(f,0,h).join("")}function D2(a,c,p){if(a=Qe(a),a&&(p||c===t))return a.replace(Uy,"");if(!a||!(c=Cr(c)))return a;var f=_n(a),h=Kw(f,_n(c));return Gi(f,h).join("")}function F2(a,c){var p=Vt,f=mt;if(lt(c)){var h="separator"in c?c.separator:h;p="length"in c?Ae(c.length):p,f="omission"in c?Cr(c.omission):f}a=Qe(a);var S=a.length;if(Oa(a)){var _=_n(a);S=_.length}if(p>=S)return a;var R=p-Na(f);if(R<1)return f;var D=_?Gi(_,0,R).join(""):a.slice(0,R);if(h===t)return D+f;if(_&&(R+=D.length-R),Hx(h)){if(a.slice(R).search(h)){var G,K=D;for(h.global||(h=tx(h.source,Qe(gw.exec(h))+"g")),h.lastIndex=0;G=h.exec(K);)var J=G.index;D=D.slice(0,J===t?R:J)}}else if(a.indexOf(Cr(h),R)!=R){var ie=D.lastIndexOf(h);ie>-1&&(D=D.slice(0,ie))}return D+f}function L2(a){return a=Qe(a),a&&jI.test(a)?a.replace(mw,c1):a}var I2=$a(function(a,c,p){return a+(p?" ":"")+c.toUpperCase()}),Wx=HE("toUpperCase");function N_(a,c,p){return a=Qe(a),c=p?t:c,c===t?n1(a)?p1(a):KC(a):a.match(c)||[]}var U_=Le(function(a,c){try{return Lr(a,t,c)}catch(p){return Ux(p)?p:new we(p)}}),C2=hi(function(a,c){return en(c,function(p){p=$n(p),di(a,p,Ox(a[p],a))}),a});function O2(a){var c=a==null?0:a.length,p=he();return a=c?it(a,function(f){if(typeof f[1]!="function")throw new tn(i);return[p(f[0]),f[1]]}):[],Le(function(f){for(var h=-1;++h<c;){var S=a[h];if(Lr(S[0],this,f))return Lr(S[1],this,f)}})}function N2(a){return cO(nn(a,m))}function $x(a){return function(){return a}}function U2(a,c){return a==null||a!==a?c:a}var H2=VE(),B2=VE(!0);function br(a){return a}function jx(a){return yE(typeof a=="function"?a:nn(a,m))}function V2(a){return TE(nn(a,m))}function W2(a,c){return SE(a,nn(c,m))}var $2=Le(function(a,c){return function(p){return Uc(p,a,c)}}),j2=Le(function(a,c){return function(p){return Uc(a,p,c)}});function zx(a,c,p){var f=Lt(c),h=ap(c,f);p==null&&!(lt(c)&&(h.length||!f.length))&&(p=c,c=a,a=this,h=ap(c,Lt(c)));var S=!(lt(p)&&"chain"in p)||!!p.chain,_=xi(a);return en(h,function(R){var D=c[R];a[R]=D,_&&(a.prototype[R]=function(){var G=this.__chain__;if(S||G){var K=a(this.__wrapped__),J=K.__actions__=Tr(this.__actions__);return J.push({func:D,args:arguments,thisArg:a}),K.__chain__=G,K}return D.apply(a,Bi([this.value()],arguments))})}),a}function z2(){return Ft._===this&&(Ft._=y1),this}function qx(){}function q2(a){return a=Ae(a),Le(function(c){return vE(c,a)})}var G2=wx(it),K2=wx(Ww),Q2=wx(Ky);function H_(a){return Mx(a)?Qy($n(a)):_O(a)}function Y2(a){return function(c){return a==null?t:Uo(a,c)}}var Z2=$E(),X2=$E(!0);function Gx(){return[]}function Kx(){return!1}function J2(){return{}}function eB(){return""}function tB(){return!0}function rB(a,c){if(a=Ae(a),a<1||a>N)return[];var p=Q,f=Jt(a,Q);c=he(c),a-=Q;for(var h=Xy(f,c);++p<a;)c(p);return h}function nB(a){return Ee(a)?it(a,$n):Or(a)?[a]:Tr(o_(Qe(a)))}function iB(a){var c=++g1;return Qe(a)+c}var oB=mp(function(a,c){return a+c},0),aB=Ex("ceil"),sB=mp(function(a,c){return a/c},1),cB=Ex("floor");function lB(a){return a&&a.length?op(a,br,lx):t}function uB(a,c){return a&&a.length?op(a,he(c,2),lx):t}function pB(a){return zw(a,br)}function mB(a,c){return zw(a,he(c,2))}function fB(a){return a&&a.length?op(a,br,fx):t}function dB(a,c){return a&&a.length?op(a,he(c,2),fx):t}var gB=mp(function(a,c){return a*c},1),hB=Ex("round"),yB=mp(function(a,c){return a-c},0);function xB(a){return a&&a.length?Zy(a,br):0}function TB(a,c){return a&&a.length?Zy(a,he(c,2)):0}return x.after=VU,x.ary=h_,x.assign=AH,x.assignIn=M_,x.assignInWith=_p,x.assignWith=PH,x.at=MH,x.before=y_,x.bind=Ox,x.bindAll=C2,x.bindKey=x_,x.castArray=JU,x.chain=f_,x.chunk=cN,x.compact=lN,x.concat=uN,x.cond=O2,x.conforms=N2,x.constant=$x,x.countBy=xU,x.create=DH,x.curry=T_,x.curryRight=S_,x.debounce=v_,x.defaults=FH,x.defaultsDeep=LH,x.defer=WU,x.delay=$U,x.difference=pN,x.differenceBy=mN,x.differenceWith=fN,x.drop=dN,x.dropRight=gN,x.dropRightWhile=hN,x.dropWhile=yN,x.fill=xN,x.filter=SU,x.flatMap=wU,x.flatMapDeep=EU,x.flatMapDepth=_U,x.flatten=l_,x.flattenDeep=TN,x.flattenDepth=SN,x.flip=jU,x.flow=H2,x.flowRight=B2,x.fromPairs=vN,x.functions=BH,x.functionsIn=VH,x.groupBy=RU,x.initial=wN,x.intersection=EN,x.intersectionBy=_N,x.intersectionWith=RN,x.invert=$H,x.invertBy=jH,x.invokeMap=AU,x.iteratee=jx,x.keyBy=PU,x.keys=Lt,x.keysIn=vr,x.map=Tp,x.mapKeys=qH,x.mapValues=GH,x.matches=V2,x.matchesProperty=W2,x.memoize=vp,x.merge=KH,x.mergeWith=D_,x.method=$2,x.methodOf=j2,x.mixin=zx,x.negate=bp,x.nthArg=q2,x.omit=QH,x.omitBy=YH,x.once=zU,x.orderBy=MU,x.over=G2,x.overArgs=qU,x.overEvery=K2,x.overSome=Q2,x.partial=Nx,x.partialRight=b_,x.partition=DU,x.pick=ZH,x.pickBy=F_,x.property=H_,x.propertyOf=Y2,x.pull=MN,x.pullAll=p_,x.pullAllBy=DN,x.pullAllWith=FN,x.pullAt=LN,x.range=Z2,x.rangeRight=X2,x.rearg=GU,x.reject=IU,x.remove=IN,x.rest=KU,x.reverse=Ix,x.sampleSize=OU,x.set=JH,x.setWith=e2,x.shuffle=NU,x.slice=CN,x.sortBy=BU,x.sortedUniq=WN,x.sortedUniqBy=$N,x.split=w2,x.spread=QU,x.tail=jN,x.take=zN,x.takeRight=qN,x.takeRightWhile=GN,x.takeWhile=KN,x.tap=lU,x.throttle=YU,x.thru=xp,x.toArray=k_,x.toPairs=L_,x.toPairsIn=I_,x.toPath=nB,x.toPlainObject=P_,x.transform=t2,x.unary=ZU,x.union=QN,x.unionBy=YN,x.unionWith=ZN,x.uniq=XN,x.uniqBy=JN,x.uniqWith=eU,x.unset=r2,x.unzip=Cx,x.unzipWith=m_,x.update=n2,x.updateWith=i2,x.values=qa,x.valuesIn=o2,x.without=tU,x.words=N_,x.wrap=XU,x.xor=rU,x.xorBy=nU,x.xorWith=iU,x.zip=oU,x.zipObject=aU,x.zipObjectDeep=sU,x.zipWith=cU,x.entries=L_,x.entriesIn=I_,x.extend=M_,x.extendWith=_p,zx(x,x),x.add=oB,x.attempt=U_,x.camelCase=l2,x.capitalize=C_,x.ceil=aB,x.clamp=a2,x.clone=eH,x.cloneDeep=rH,x.cloneDeepWith=nH,x.cloneWith=tH,x.conformsTo=iH,x.deburr=O_,x.defaultTo=U2,x.divide=sB,x.endsWith=u2,x.eq=kn,x.escape=p2,x.escapeRegExp=m2,x.every=TU,x.find=vU,x.findIndex=s_,x.findKey=IH,x.findLast=bU,x.findLastIndex=c_,x.findLastKey=CH,x.floor=cB,x.forEach=d_,x.forEachRight=g_,x.forIn=OH,x.forInRight=NH,x.forOwn=UH,x.forOwnRight=HH,x.get=Bx,x.gt=oH,x.gte=aH,x.has=WH,x.hasIn=Vx,x.head=u_,x.identity=br,x.includes=kU,x.indexOf=bN,x.inRange=s2,x.invoke=zH,x.isArguments=Vo,x.isArray=Ee,x.isArrayBuffer=sH,x.isArrayLike=Sr,x.isArrayLikeObject=Tt,x.isBoolean=cH,x.isBuffer=Ki,x.isDate=lH,x.isElement=uH,x.isEmpty=pH,x.isEqual=mH,x.isEqualWith=fH,x.isError=Ux,x.isFinite=dH,x.isFunction=xi,x.isInteger=w_,x.isLength=wp,x.isMap=E_,x.isMatch=gH,x.isMatchWith=hH,x.isNaN=yH,x.isNative=xH,x.isNil=SH,x.isNull=TH,x.isNumber=__,x.isObject=lt,x.isObjectLike=dt,x.isPlainObject=jc,x.isRegExp=Hx,x.isSafeInteger=vH,x.isSet=R_,x.isString=Ep,x.isSymbol=Or,x.isTypedArray=za,x.isUndefined=bH,x.isWeakMap=wH,x.isWeakSet=EH,x.join=kN,x.kebabCase=f2,x.last=an,x.lastIndexOf=AN,x.lowerCase=d2,x.lowerFirst=g2,x.lt=_H,x.lte=RH,x.max=lB,x.maxBy=uB,x.mean=pB,x.meanBy=mB,x.min=fB,x.minBy=dB,x.stubArray=Gx,x.stubFalse=Kx,x.stubObject=J2,x.stubString=eB,x.stubTrue=tB,x.multiply=gB,x.nth=PN,x.noConflict=z2,x.noop=qx,x.now=Sp,x.pad=h2,x.padEnd=y2,x.padStart=x2,x.parseInt=T2,x.random=c2,x.reduce=FU,x.reduceRight=LU,x.repeat=S2,x.replace=v2,x.result=XH,x.round=hB,x.runInContext=P,x.sample=CU,x.size=UU,x.snakeCase=b2,x.some=HU,x.sortedIndex=ON,x.sortedIndexBy=NN,x.sortedIndexOf=UN,x.sortedLastIndex=HN,x.sortedLastIndexBy=BN,x.sortedLastIndexOf=VN,x.startCase=E2,x.startsWith=_2,x.subtract=yB,x.sum=xB,x.sumBy=TB,x.template=R2,x.times=rB,x.toFinite=Ti,x.toInteger=Ae,x.toLength=A_,x.toLower=k2,x.toNumber=sn,x.toSafeInteger=kH,x.toString=Qe,x.toUpper=A2,x.trim=P2,x.trimEnd=M2,x.trimStart=D2,x.truncate=F2,x.unescape=L2,x.uniqueId=iB,x.upperCase=I2,x.upperFirst=Wx,x.each=d_,x.eachRight=g_,x.first=u_,zx(x,function(){var a={};return Vn(x,function(c,p){Ye.call(x.prototype,p)||(a[p]=c)}),a}(),{chain:!1}),x.VERSION=e,en(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){x[a].placeholder=x}),en(["drop","take"],function(a,c){Be.prototype[a]=function(p){p=p===t?1:At(Ae(p),0);var f=this.__filtered__&&!c?new Be(this):this.clone();return f.__filtered__?f.__takeCount__=Jt(p,f.__takeCount__):f.__views__.push({size:Jt(p,Q),type:a+(f.__dir__<0?"Right":"")}),f},Be.prototype[a+"Right"]=function(p){return this.reverse()[a](p).reverse()}}),en(["filter","map","takeWhile"],function(a,c){var p=c+1,f=p==A||p==Z;Be.prototype[a]=function(h){var S=this.clone();return S.__iteratees__.push({iteratee:he(h,3),type:p}),S.__filtered__=S.__filtered__||f,S}}),en(["head","last"],function(a,c){var p="take"+(c?"Right":"");Be.prototype[a]=function(){return this[p](1).value()[0]}}),en(["initial","tail"],function(a,c){var p="drop"+(c?"":"Right");Be.prototype[a]=function(){return this.__filtered__?new Be(this):this[p](1)}}),Be.prototype.compact=function(){return this.filter(br)},Be.prototype.find=function(a){return this.filter(a).head()},Be.prototype.findLast=function(a){return this.reverse().find(a)},Be.prototype.invokeMap=Le(function(a,c){return typeof a=="function"?new Be(this):this.map(function(p){return Uc(p,a,c)})}),Be.prototype.reject=function(a){return this.filter(bp(he(a)))},Be.prototype.slice=function(a,c){a=Ae(a);var p=this;return p.__filtered__&&(a>0||c<0)?new Be(p):(a<0?p=p.takeRight(-a):a&&(p=p.drop(a)),c!==t&&(c=Ae(c),p=c<0?p.dropRight(-c):p.take(c-a)),p)},Be.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},Be.prototype.toArray=function(){return this.take(Q)},Vn(Be.prototype,function(a,c){var p=/^(?:filter|find|map|reject)|While$/.test(c),f=/^(?:head|last)$/.test(c),h=x[f?"take"+(c=="last"?"Right":""):c],S=f||/^find/.test(c);h&&(x.prototype[c]=function(){var _=this.__wrapped__,R=f?[1]:arguments,D=_ instanceof Be,G=R[0],K=D||Ee(_),J=function(Ne){var Ve=h.apply(x,Bi([Ne],R));return f&&ie?Ve[0]:Ve};K&&p&&typeof G=="function"&&G.length!=1&&(D=K=!1);var ie=this.__chain__,me=!!this.__actions__.length,ye=S&&!ie,Me=D&&!me;if(!S&&K){_=Me?_:new Be(this);var xe=a.apply(_,R);return xe.__actions__.push({func:xp,args:[J],thisArg:t}),new rn(xe,ie)}return ye&&Me?a.apply(this,R):(xe=this.thru(J),ye?f?xe.value()[0]:xe.value():xe)})}),en(["pop","push","shift","sort","splice","unshift"],function(a){var c=ju[a],p=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",f=/^(?:pop|shift)$/.test(a);x.prototype[a]=function(){var h=arguments;if(f&&!this.__chain__){var S=this.value();return c.apply(Ee(S)?S:[],h)}return this[p](function(_){return c.apply(Ee(_)?_:[],h)})}}),Vn(Be.prototype,function(a,c){var p=x[c];if(p){var f=p.name+"";Ye.call(Ba,f)||(Ba[f]=[]),Ba[f].push({name:c,func:p})}}),Ba[pp(t,E).name]=[{name:"wrapper",func:t}],Be.prototype.clone=L1,Be.prototype.reverse=I1,Be.prototype.value=C1,x.prototype.at=uU,x.prototype.chain=pU,x.prototype.commit=mU,x.prototype.next=fU,x.prototype.plant=gU,x.prototype.reverse=hU,x.prototype.toJSON=x.prototype.valueOf=x.prototype.value=yU,x.prototype.first=x.prototype.head,Dc&&(x.prototype[Dc]=dU),x},Wi=m1();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Ft._=Wi,define(function(){return Wi})):Lo?((Lo.exports=Wi)._=Wi,jy._=Wi):Ft._=Wi}).call(lc)});var CF=Ga((Q1e,IF)=>{"use strict";IF.exports=FF;function FF(t,e,r){t instanceof RegExp&&(t=DF(t,r)),e instanceof RegExp&&(e=DF(e,r));var n=LF(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}function DF(t,e){var r=e.match(t);return r?r[0]:null}FF.range=LF;function LF(t,e,r){var n,i,o,s,l,u=r.indexOf(t),m=r.indexOf(e,u+1),d=u;if(u>=0&&m>0){if(t===e)return[u,m];for(n=[],o=r.length;d>=0&&!l;)d==u?(n.push(d),u=r.indexOf(t,d+1)):n.length==1?l=[n.pop(),m]:(i=n.pop(),i<o&&(o=i,s=m),m=r.indexOf(e,d+1)),d=u<m&&u>=0?u:m;n.length&&(l=[o,s])}return l}});var $F=Ga((Y1e,WF)=>{var OF=CF();WF.exports=d7;var NF="\0SLASH"+Math.random()+"\0",UF="\0OPEN"+Math.random()+"\0",jv="\0CLOSE"+Math.random()+"\0",HF="\0COMMA"+Math.random()+"\0",BF="\0PERIOD"+Math.random()+"\0";function $v(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function m7(t){return t.split("\\\\").join(NF).split("\\{").join(UF).split("\\}").join(jv).split("\\,").join(HF).split("\\.").join(BF)}function f7(t){return t.split(NF).join("\\").split(UF).join("{").split(jv).join("}").split(HF).join(",").split(BF).join(".")}function VF(t){if(!t)return[""];var e=[],r=OF("{","}",t);if(!r)return t.split(",");var n=r.pre,i=r.body,o=r.post,s=n.split(",");s[s.length-1]+="{"+i+"}";var l=VF(o);return o.length&&(s[s.length-1]+=l.shift(),s.push.apply(s,l)),e.push.apply(e,s),e}function d7(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),mu(m7(t),!0).map(f7)):[]}function g7(t){return"{"+t+"}"}function h7(t){return/^-?0\d/.test(t)}function y7(t,e){return t<=e}function x7(t,e){return t>=e}function mu(t,e){var r=[],n=OF("{","}",t);if(!n)return[t];var i=n.pre,o=n.post.length?mu(n.post,!1):[""];if(/\$$/.test(n.pre))for(var s=0;s<o.length;s++){var l=i+"{"+n.body+"}"+o[s];r.push(l)}else{var u=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),m=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),d=u||m,g=n.body.indexOf(",")>=0;if(!d&&!g)return n.post.match(/,.*\}/)?(t=n.pre+"{"+n.body+jv+n.post,mu(t)):[t];var y;if(d)y=n.body.split(/\.\./);else if(y=VF(n.body),y.length===1&&(y=mu(y[0],!1).map(g7),y.length===1))return o.map(function(H){return n.pre+y[0]+H});var T;if(d){var w=$v(y[0]),E=$v(y[1]),U=Math.max(y[0].length,y[1].length),V=y.length==3?Math.abs($v(y[2])):1,z=y7,ne=E<w;ne&&(V*=-1,z=x7);var se=y.some(h7);T=[];for(var ce=w;z(ce,E);ce+=V){var fe;if(m)fe=String.fromCharCode(ce),fe==="\\"&&(fe="");else if(fe=String(ce),se){var ct=U-fe.length;if(ct>0){var Vt=new Array(ct+1).join("0");ce<0?fe="-"+Vt+fe.slice(1):fe=Vt+fe}}T.push(fe)}}else{T=[];for(var mt=0;mt<y.length;mt++)T.push.apply(T,mu(y[mt],!1))}for(var mt=0;mt<T.length;mt++)for(var s=0;s<o.length;s++){var l=i+T[mt]+o[s];(!e||d||l)&&r.push(l)}}return r}});var iY={};V_(iY,{default:()=>OI});module.exports=_B(iY);var Qx="cursorless.command",kp=class{constructor(e){this.baseTitle=e}get title(){return`Cursorless: ${this.baseTitle}`}},gt=class extends kp{constructor(){super(...arguments);this.isVisible=!1}},vt=class extends kp{constructor(){super(...arguments);this.isVisible=!0}};var aY={"cursorless.toggleDecorations":new vt("Toggle decorations"),"cursorless.recomputeDecorationStyles":new vt("Recompute decoration styles"),"cursorless.recordTestCase":new vt("Record test case"),"cursorless.recordOneTestCaseThenPause":new vt("Record one test case, then pause"),"cursorless.pauseRecording":new vt("Pause test case recording"),"cursorless.resumeRecording":new vt("Resume test case recording"),"cursorless.recordScopeTests.showUnimplementedFacets":new vt("Bulk record unimplemented scope facets"),"cursorless.recordScopeTests.saveActiveDocument":new vt("Bulk save scope tests for the active document"),"cursorless.showDocumentation":new vt("Show documentation"),"cursorless.showInstallationDependencies":new vt("Show installation dependencies"),"cursorless.showScopeVisualizer":new vt("Show the scope visualizer"),"cursorless.hideScopeVisualizer":new vt("Hide the scope visualizer"),"cursorless.analyzeCommandHistory":new vt("Analyze collected command history"),"cursorless.tutorial.start":new gt("Start a tutorial"),"cursorless.tutorial.next":new vt("Tutorial next"),"cursorless.tutorial.previous":new vt("Tutorial previous"),"cursorless.tutorial.restart":new vt("Tutorial restart"),"cursorless.tutorial.resume":new vt("Tutorial resume"),"cursorless.tutorial.list":new vt("Tutorial list"),"cursorless.documentationOpened":new gt("Used by talon to notify us that the docs have been opened; for use with tutorial"),"cursorless.command":new gt("The core cursorless command"),"cursorless.repeatPreviousCommand":new vt("Repeat the previous Cursorless command"),"cursorless.showQuickPick":new gt("Pop up a quick pick of all cursorless commands"),"cursorless.showCheatsheet":new gt("Display the cursorless cheatsheet"),"cursorless.internal.updateCheatsheetDefaults":new gt("Update the default values of the cheatsheet payload used on the website and for local development. Be sure to run this on stock community and cursorless."),"cursorless.private.logQuickActions":new gt("Log the quick actions available at the current cursor position"),"cursorless.takeSnapshot":new gt("Take a snapshot of the current editor state"),"cursorless.keyboard.escape":new gt("Should be mapped to the escape key when using cursorless keyboard. By default, exits modal keyboard mode, but changes behaviour when Cursorless is expecting a continuation keystroke.  For example, when you type a color and Cursorless is waiting for a character, it cancels the color and switches back to modal mode."),"cursorless.keyboard.targeted.targetHat":new gt("Sets the keyboard target to the given hat"),"cursorless.keyboard.targeted.targetScope":new gt("Sets the keyboard target to the scope containing the current target"),"cursorless.keyboard.targeted.targetSelection":new gt("Sets the keyboard target to the current selection"),"cursorless.keyboard.targeted.clearTarget":new gt("Clears the current keyboard target"),"cursorless.keyboard.targeted.runActionOnTarget":new gt("Run the given action on the current keyboard target"),"cursorless.keyboard.modal.modeOn":new gt("Turn on the cursorless modal mode"),"cursorless.keyboard.modal.modeOff":new gt("Turn off the cursorless modal mode"),"cursorless.keyboard.modal.modeToggle":new gt("Toggle the cursorless modal mode"),"cursorless.keyboard.undoTarget":new gt("Undo keyboard targeting changes"),"cursorless.keyboard.redoTarget":new gt("Redo keyboard targeting changes"),"cursorless.migrateSnippets":new gt("Migrate snippets from the old Cursorless format to the new community format")};var Ap=class{constructor(e,r){this.callback=e;this.debounceDelayMs=r;this.timeoutHandle=null;this.run=this.run.bind(this)}run(){this.timeoutHandle!=null&&clearTimeout(this.timeoutHandle),this.timeoutHandle=setTimeout(()=>{this.callback(),this.timeoutHandle=null},this.debounceDelayMs)}dispose(){this.timeoutHandle!=null&&clearTimeout(this.timeoutHandle)}};var Pp=class extends Error{constructor(e){super(`Language '${e}' is not implemented yet; See https://www.cursorless.org/docs/contributing/adding-a-new-language/`),this.name="UnsupportedLanguageError"}};var Mp=class extends Error{constructor(){super("Cursorless Talon version is ahead of Cursorless VSCode extension version. Please update Cursorless VSCode.")}},ht=class extends Error{constructor(e){super(`Couldn't find containing ${e}.`),this.name="NoContainingScopeError"}};var Dp=class{constructor(){this.signals={prePhrase:{getVersion:async()=>null}}}async getFocusedElementType(){return this.focusedElementType}setFocusedElementType(e){this.focusedElementType=e}};var RB=typeof global=="object"&&global&&global.Object===Object&&global,Fp=RB;var kB=typeof self=="object"&&self&&self.Object===Object&&self,AB=Fp||kB||Function("return this")(),It=AB;var PB=It.Symbol,pr=PB;var $_=Object.prototype,MB=$_.hasOwnProperty,DB=$_.toString,zc=pr?pr.toStringTag:void 0;function FB(t){var e=MB.call(t,zc),r=t[zc];try{t[zc]=void 0;var n=!0}catch{}var i=DB.call(t);return n&&(e?t[zc]=r:delete t[zc]),i}var j_=FB;var LB=Object.prototype,IB=LB.toString;function CB(t){return IB.call(t)}var z_=CB;var OB="[object Null]",NB="[object Undefined]",q_=pr?pr.toStringTag:void 0;function UB(t){return t==null?t===void 0?NB:OB:q_&&q_ in Object(t)?j_(t):z_(t)}var Pn=UB;function HB(t){return t!=null&&typeof t=="object"}var mr=HB;var BB="[object Symbol]";function VB(t){return typeof t=="symbol"||mr(t)&&Pn(t)==BB}var Br=VB;function WB(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var cn=WB;var $B=Array.isArray,Ze=$B;var jB=1/0,G_=pr?pr.prototype:void 0,K_=G_?G_.toString:void 0;function Q_(t){if(typeof t=="string")return t;if(Ze(t))return cn(t,Q_)+"";if(Br(t))return K_?K_.call(t):"";var e=t+"";return e=="0"&&1/t==-jB?"-0":e}var Y_=Q_;var zB=/\s/;function qB(t){for(var e=t.length;e--&&zB.test(t.charAt(e)););return e}var Z_=qB;var GB=/^\s+/;function KB(t){return t&&t.slice(0,Z_(t)+1).replace(GB,"")}var X_=KB;function QB(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Vr=QB;var J_=NaN,YB=/^[-+]0x[0-9a-f]+$/i,ZB=/^0b[01]+$/i,XB=/^0o[0-7]+$/i,JB=parseInt;function eV(t){if(typeof t=="number")return t;if(Br(t))return J_;if(Vr(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Vr(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=X_(t);var r=ZB.test(t);return r||XB.test(t)?JB(t.slice(2),r?2:8):YB.test(t)?J_:+t}var e0=eV;var t0=1/0,tV=17976931348623157e292;function rV(t){if(!t)return t===0?t:0;if(t=e0(t),t===t0||t===-t0){var e=t<0?-1:1;return e*tV}return t===t?t:0}var Ka=rV;function nV(t){var e=Ka(t),r=e%1;return e===e?r?e-r:e:0}var Lp=nV;function iV(t){return t}var wr=iV;var oV="[object AsyncFunction]",aV="[object Function]",sV="[object GeneratorFunction]",cV="[object Proxy]";function lV(t){if(!Vr(t))return!1;var e=Pn(t);return e==aV||e==sV||e==oV||e==cV}var Ip=lV;var uV=It["__core-js_shared__"],Cp=uV;var r0=function(){var t=/[^.]+$/.exec(Cp&&Cp.keys&&Cp.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function pV(t){return!!r0&&r0 in t}var n0=pV;var mV=Function.prototype,fV=mV.toString;function dV(t){if(t!=null){try{return fV.call(t)}catch{}try{return t+""}catch{}}return""}var vi=dV;var gV=/[\\^$.*+?()[\]{}|]/g,hV=/^\[object .+?Constructor\]$/,yV=Function.prototype,xV=Object.prototype,TV=yV.toString,SV=xV.hasOwnProperty,vV=RegExp("^"+TV.call(SV).replace(gV,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function bV(t){if(!Vr(t)||n0(t))return!1;var e=Ip(t)?vV:hV;return e.test(vi(t))}var i0=bV;function wV(t,e){return t?.[e]}var o0=wV;function EV(t,e){var r=o0(t,e);return i0(r)?r:void 0}var Er=EV;var _V=Er(It,"WeakMap"),Wo=_V;var RV=Wo&&new Wo,Yx=RV;var a0=Object.create,kV=function(){function t(){}return function(e){if(!Vr(e))return{};if(a0)return a0(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),Op=kV;function AV(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var s0=AV;function PV(){}var Qa=PV;var MV=4294967295;function Np(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=MV,this.__views__=[]}Np.prototype=Op(Qa.prototype);Np.prototype.constructor=Np;var Ya=Np;function DV(){}var Up=DV;var FV=Yx?function(t){return Yx.get(t)}:Up,Hp=FV;var LV={},Zx=LV;var IV=Object.prototype,CV=IV.hasOwnProperty;function OV(t){for(var e=t.name+"",r=Zx[e],n=CV.call(Zx,e)?r.length:0;n--;){var i=r[n],o=i.func;if(o==null||o==t)return i.name}return e}var Za=OV;function Bp(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}Bp.prototype=Op(Qa.prototype);Bp.prototype.constructor=Bp;var Qi=Bp;function NV(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var Yi=NV;function UV(t){if(t instanceof Ya)return t.clone();var e=new Qi(t.__wrapped__,t.__chain__);return e.__actions__=Yi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var c0=UV;var HV=Object.prototype,BV=HV.hasOwnProperty;function Vp(t){if(mr(t)&&!Ze(t)&&!(t instanceof Ya)){if(t instanceof Qi)return t;if(BV.call(t,"__wrapped__"))return c0(t)}return new Qi(t)}Vp.prototype=Qa.prototype;Vp.prototype.constructor=Vp;var l0=Vp;function VV(t){var e=Za(t),r=l0[e];if(typeof r!="function"||!(e in Ya.prototype))return!1;if(t===r)return!0;var n=Hp(r);return!!n&&t===n[0]}var Xx=VV;var WV=800,$V=16,jV=Date.now;function zV(t){var e=0,r=0;return function(){var n=jV(),i=$V-(n-r);if(r=n,i>0){if(++e>=WV)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var u0=zV;function qV(t){return function(){return t}}var p0=qV;var GV=function(){try{var t=Er(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Jx=GV;var KV=Jx?function(t,e){return Jx(t,"toString",{configurable:!0,enumerable:!1,value:p0(e),writable:!0})}:wr,m0=KV;var QV=u0(m0),Wp=QV;function YV(t,e,r,n){for(var i=t.length,o=r+(n?1:-1);n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}var $p=YV;function ZV(t){return t!==t}var f0=ZV;function XV(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}var d0=XV;function JV(t,e,r){return e===e?d0(t,e,r):$p(t,f0,r)}var jp=JV;function eW(t,e){var r=t==null?0:t.length;return!!r&&jp(t,e,0)>-1}var g0=eW;var tW=9007199254740991,rW=/^(?:0|[1-9]\d*)$/;function nW(t,e){var r=typeof t;return e=e??tW,!!e&&(r=="number"||r!="symbol"&&rW.test(t))&&t>-1&&t%1==0&&t<e}var Xa=nW;function iW(t,e){return t===e||t!==t&&e!==e}var Ja=iW;var h0=Math.max;function oW(t,e,r){return e=h0(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,o=h0(n.length-e,0),s=Array(o);++i<o;)s[i]=n[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=n[i];return l[e]=r(s),s0(t,this,l)}}var zp=oW;function aW(t,e){return Wp(zp(t,e,wr),t+"")}var es=aW;var sW=9007199254740991;function cW(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=sW}var ts=cW;function lW(t){return t!=null&&ts(t.length)&&!Ip(t)}var jn=lW;function uW(t,e,r){if(!Vr(r))return!1;var n=typeof e;return(n=="number"?jn(r)&&Xa(e,r.length):n=="string"&&e in r)?Ja(r[e],t):!1}var $o=uW;var pW=Object.prototype;function mW(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||pW;return t===r}var y0=mW;function fW(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var qp=fW;var dW="[object Arguments]";function gW(t){return mr(t)&&Pn(t)==dW}var eT=gW;var x0=Object.prototype,hW=x0.hasOwnProperty,yW=x0.propertyIsEnumerable,xW=eT(function(){return arguments}())?eT:function(t){return mr(t)&&hW.call(t,"callee")&&!yW.call(t,"callee")},rs=xW;function TW(){return!1}var T0=TW;var b0=typeof exports=="object"&&exports&&!exports.nodeType&&exports,S0=b0&&typeof module=="object"&&module&&!module.nodeType&&module,SW=S0&&S0.exports===b0,v0=SW?It.Buffer:void 0,vW=v0?v0.isBuffer:void 0,bW=vW||T0,qc=bW;var wW="[object Arguments]",EW="[object Array]",_W="[object Boolean]",RW="[object Date]",kW="[object Error]",AW="[object Function]",PW="[object Map]",MW="[object Number]",DW="[object Object]",FW="[object RegExp]",LW="[object Set]",IW="[object String]",CW="[object WeakMap]",OW="[object ArrayBuffer]",NW="[object DataView]",UW="[object Float32Array]",HW="[object Float64Array]",BW="[object Int8Array]",VW="[object Int16Array]",WW="[object Int32Array]",$W="[object Uint8Array]",jW="[object Uint8ClampedArray]",zW="[object Uint16Array]",qW="[object Uint32Array]",rt={};rt[UW]=rt[HW]=rt[BW]=rt[VW]=rt[WW]=rt[$W]=rt[jW]=rt[zW]=rt[qW]=!0;rt[wW]=rt[EW]=rt[OW]=rt[_W]=rt[NW]=rt[RW]=rt[kW]=rt[AW]=rt[PW]=rt[MW]=rt[DW]=rt[FW]=rt[LW]=rt[IW]=rt[CW]=!1;function GW(t){return mr(t)&&ts(t.length)&&!!rt[Pn(t)]}var w0=GW;function KW(t){return function(e){return t(e)}}var ns=KW;var E0=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Gc=E0&&typeof module=="object"&&module&&!module.nodeType&&module,QW=Gc&&Gc.exports===E0,tT=QW&&Fp.process,YW=function(){try{var t=Gc&&Gc.require&&Gc.require("util").types;return t||tT&&tT.binding&&tT.binding("util")}catch{}}(),rT=YW;var _0=rT&&rT.isTypedArray,ZW=_0?ns(_0):w0,Gp=ZW;var XW=Object.prototype,JW=XW.hasOwnProperty;function e$(t,e){var r=Ze(t),n=!r&&rs(t),i=!r&&!n&&qc(t),o=!r&&!n&&!i&&Gp(t),s=r||n||i||o,l=s?qp(t.length,String):[],u=l.length;for(var m in t)(e||JW.call(t,m))&&!(s&&(m=="length"||i&&(m=="offset"||m=="parent")||o&&(m=="buffer"||m=="byteLength"||m=="byteOffset")||Xa(m,u)))&&l.push(m);return l}var R0=e$;function t$(t,e){return function(r){return t(e(r))}}var k0=t$;var r$=k0(Object.keys,Object),A0=r$;var n$=Object.prototype,i$=n$.hasOwnProperty;function o$(t){if(!y0(t))return A0(t);var e=[];for(var r in Object(t))i$.call(t,r)&&r!="constructor"&&e.push(r);return e}var P0=o$;function a$(t){return jn(t)?R0(t):P0(t)}var Zi=a$;var s$=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,c$=/^\w*$/;function l$(t,e){if(Ze(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||Br(t)?!0:c$.test(t)||!s$.test(t)||e!=null&&t in Object(e)}var is=l$;var u$=Er(Object,"create"),bi=u$;function p$(){this.__data__=bi?bi(null):{},this.size=0}var M0=p$;function m$(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var D0=m$;var f$="__lodash_hash_undefined__",d$=Object.prototype,g$=d$.hasOwnProperty;function h$(t){var e=this.__data__;if(bi){var r=e[t];return r===f$?void 0:r}return g$.call(e,t)?e[t]:void 0}var F0=h$;var y$=Object.prototype,x$=y$.hasOwnProperty;function T$(t){var e=this.__data__;return bi?e[t]!==void 0:x$.call(e,t)}var L0=T$;var S$="__lodash_hash_undefined__";function v$(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=bi&&e===void 0?S$:e,this}var I0=v$;function os(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}os.prototype.clear=M0;os.prototype.delete=D0;os.prototype.get=F0;os.prototype.has=L0;os.prototype.set=I0;var nT=os;function b$(){this.__data__=[],this.size=0}var C0=b$;function w$(t,e){for(var r=t.length;r--;)if(Ja(t[r][0],e))return r;return-1}var Xi=w$;var E$=Array.prototype,_$=E$.splice;function R$(t){var e=this.__data__,r=Xi(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():_$.call(e,r,1),--this.size,!0}var O0=R$;function k$(t){var e=this.__data__,r=Xi(e,t);return r<0?void 0:e[r][1]}var N0=k$;function A$(t){return Xi(this.__data__,t)>-1}var U0=A$;function P$(t,e){var r=this.__data__,n=Xi(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var H0=P$;function as(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}as.prototype.clear=C0;as.prototype.delete=O0;as.prototype.get=N0;as.prototype.has=U0;as.prototype.set=H0;var Ji=as;var M$=Er(It,"Map"),eo=M$;function D$(){this.size=0,this.__data__={hash:new nT,map:new(eo||Ji),string:new nT}}var B0=D$;function F$(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var V0=F$;function L$(t,e){var r=t.__data__;return V0(e)?r[typeof e=="string"?"string":"hash"]:r.map}var to=L$;function I$(t){var e=to(this,t).delete(t);return this.size-=e?1:0,e}var W0=I$;function C$(t){return to(this,t).get(t)}var $0=C$;function O$(t){return to(this,t).has(t)}var j0=O$;function N$(t,e){var r=to(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var z0=N$;function ss(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ss.prototype.clear=B0;ss.prototype.delete=W0;ss.prototype.get=$0;ss.prototype.has=j0;ss.prototype.set=z0;var jo=ss;var U$="Expected a function";function iT(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(U$);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=t.apply(this,n);return r.cache=o.set(i,s)||o,s};return r.cache=new(iT.Cache||jo),r}iT.Cache=jo;var Kc=iT;var H$=500;function B$(t){var e=Kc(t,function(n){return r.size===H$&&r.clear(),n}),r=e.cache;return e}var q0=B$;var V$=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,W$=/\\(\\)?/g,$$=q0(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(V$,function(r,n,i,o){e.push(i?o.replace(W$,"$1"):n||r)}),e}),G0=$$;function j$(t){return t==null?"":Y_(t)}var Mn=j$;function z$(t,e){return Ze(t)?t:is(t,e)?[t]:G0(Mn(t))}var Kp=z$;var q$=1/0;function G$(t){if(typeof t=="string"||Br(t))return t;var e=t+"";return e=="0"&&1/t==-q$?"-0":e}var ro=G$;function K$(t,e){e=Kp(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[ro(e[r++])];return r&&r==n?t:void 0}var cs=K$;function Q$(t,e,r){var n=t==null?void 0:cs(t,e);return n===void 0?r:n}var zo=Q$;function Y$(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var ls=Y$;var K0=pr?pr.isConcatSpreadable:void 0;function Z$(t){return Ze(t)||rs(t)||!!(K0&&t&&t[K0])}var Q0=Z$;function Y0(t,e,r,n,i){var o=-1,s=t.length;for(r||(r=Q0),i||(i=[]);++o<s;){var l=t[o];e>0&&r(l)?e>1?Y0(l,e-1,r,n,i):ls(i,l):n||(i[i.length]=l)}return i}var us=Y0;function X$(t){var e=t==null?0:t.length;return e?us(t,1):[]}var nt=X$;function J$(t){return Wp(zp(t,void 0,nt),t+"")}var Z0=J$;function ej(t){return function(e){return t?.[e]}}var X0=ej;var tj={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},rj=X0(tj),J0=rj;var nj=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ij="\\u0300-\\u036f",oj="\\ufe20-\\ufe2f",aj="\\u20d0-\\u20ff",sj=ij+oj+aj,cj="["+sj+"]",lj=RegExp(cj,"g");function uj(t){return t=Mn(t),t&&t.replace(nj,J0).replace(lj,"")}var oT=uj;function pj(){this.__data__=new Ji,this.size=0}var eR=pj;function mj(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var tR=mj;function fj(t){return this.__data__.get(t)}var rR=fj;function dj(t){return this.__data__.has(t)}var nR=dj;var gj=200;function hj(t,e){var r=this.__data__;if(r instanceof Ji){var n=r.__data__;if(!eo||n.length<gj-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new jo(n)}return r.set(t,e),this.size=r.size,this}var iR=hj;function ps(t){var e=this.__data__=new Ji(t);this.size=e.size}ps.prototype.clear=eR;ps.prototype.delete=tR;ps.prototype.get=rR;ps.prototype.has=nR;ps.prototype.set=iR;var ms=ps;function yj(t,e){for(var r=-1,n=t==null?0:t.length,i=0,o=[];++r<n;){var s=t[r];e(s,r,t)&&(o[i++]=s)}return o}var Qp=yj;function xj(){return[]}var oR=xj;var Tj=Object.prototype,Sj=Tj.propertyIsEnumerable,aR=Object.getOwnPropertySymbols,vj=aR?function(t){return t==null?[]:(t=Object(t),Qp(aR(t),function(e){return Sj.call(t,e)}))}:oR,sR=vj;function bj(t,e,r){var n=e(t);return Ze(t)?n:ls(n,r(t))}var cR=bj;function wj(t){return cR(t,Zi,sR)}var aT=wj;var Ej=Er(It,"DataView"),Yp=Ej;var _j=Er(It,"Promise"),Zp=_j;var Rj=Er(It,"Set"),no=Rj;var lR="[object Map]",kj="[object Object]",uR="[object Promise]",pR="[object Set]",mR="[object WeakMap]",fR="[object DataView]",Aj=vi(Yp),Pj=vi(eo),Mj=vi(Zp),Dj=vi(no),Fj=vi(Wo),qo=Pn;(Yp&&qo(new Yp(new ArrayBuffer(1)))!=fR||eo&&qo(new eo)!=lR||Zp&&qo(Zp.resolve())!=uR||no&&qo(new no)!=pR||Wo&&qo(new Wo)!=mR)&&(qo=function(t){var e=Pn(t),r=e==kj?t.constructor:void 0,n=r?vi(r):"";if(n)switch(n){case Aj:return fR;case Pj:return lR;case Mj:return uR;case Dj:return pR;case Fj:return mR}return e});var sT=qo;var Lj=It.Uint8Array,cT=Lj;function Ij(){var t=arguments.length;if(!t)return[];for(var e=Array(t-1),r=arguments[0],n=t;n--;)e[n-1]=arguments[n];return ls(Ze(r)?Yi(r):[r],us(e,1))}var Qc=Ij;var Cj="__lodash_hash_undefined__";function Oj(t){return this.__data__.set(t,Cj),this}var dR=Oj;function Nj(t){return this.__data__.has(t)}var gR=Nj;function Xp(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new jo;++e<r;)this.add(t[e])}Xp.prototype.add=Xp.prototype.push=dR;Xp.prototype.has=gR;var Jp=Xp;function Uj(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var hR=Uj;function Hj(t,e){return t.has(e)}var em=Hj;var Bj=1,Vj=2;function Wj(t,e,r,n,i,o){var s=r&Bj,l=t.length,u=e.length;if(l!=u&&!(s&&u>l))return!1;var m=o.get(t),d=o.get(e);if(m&&d)return m==e&&d==t;var g=-1,y=!0,T=r&Vj?new Jp:void 0;for(o.set(t,e),o.set(e,t);++g<l;){var w=t[g],E=e[g];if(n)var U=s?n(E,w,g,e,t,o):n(w,E,g,t,e,o);if(U!==void 0){if(U)continue;y=!1;break}if(T){if(!hR(e,function(V,z){if(!em(T,z)&&(w===V||i(w,V,r,n,o)))return T.push(z)})){y=!1;break}}else if(!(w===E||i(w,E,r,n,o))){y=!1;break}}return o.delete(t),o.delete(e),y}var tm=Wj;function $j(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}var yR=$j;function jj(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var fs=jj;var zj=1,qj=2,Gj="[object Boolean]",Kj="[object Date]",Qj="[object Error]",Yj="[object Map]",Zj="[object Number]",Xj="[object RegExp]",Jj="[object Set]",e3="[object String]",t3="[object Symbol]",r3="[object ArrayBuffer]",n3="[object DataView]",xR=pr?pr.prototype:void 0,lT=xR?xR.valueOf:void 0;function i3(t,e,r,n,i,o,s){switch(r){case n3:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case r3:return!(t.byteLength!=e.byteLength||!o(new cT(t),new cT(e)));case Gj:case Kj:case Zj:return Ja(+t,+e);case Qj:return t.name==e.name&&t.message==e.message;case Xj:case e3:return t==e+"";case Yj:var l=yR;case Jj:var u=n&zj;if(l||(l=fs),t.size!=e.size&&!u)return!1;var m=s.get(t);if(m)return m==e;n|=qj,s.set(t,e);var d=tm(l(t),l(e),n,i,o,s);return s.delete(t),d;case t3:if(lT)return lT.call(t)==lT.call(e)}return!1}var TR=i3;var o3=1,a3=Object.prototype,s3=a3.hasOwnProperty;function c3(t,e,r,n,i,o){var s=r&o3,l=aT(t),u=l.length,m=aT(e),d=m.length;if(u!=d&&!s)return!1;for(var g=u;g--;){var y=l[g];if(!(s?y in e:s3.call(e,y)))return!1}var T=o.get(t),w=o.get(e);if(T&&w)return T==e&&w==t;var E=!0;o.set(t,e),o.set(e,t);for(var U=s;++g<u;){y=l[g];var V=t[y],z=e[y];if(n)var ne=s?n(z,V,y,e,t,o):n(V,z,y,t,e,o);if(!(ne===void 0?V===z||i(V,z,r,n,o):ne)){E=!1;break}U||(U=y=="constructor")}if(E&&!U){var se=t.constructor,ce=e.constructor;se!=ce&&"constructor"in t&&"constructor"in e&&!(typeof se=="function"&&se instanceof se&&typeof ce=="function"&&ce instanceof ce)&&(E=!1)}return o.delete(t),o.delete(e),E}var SR=c3;var l3=1,vR="[object Arguments]",bR="[object Array]",rm="[object Object]",u3=Object.prototype,wR=u3.hasOwnProperty;function p3(t,e,r,n,i,o){var s=Ze(t),l=Ze(e),u=s?bR:sT(t),m=l?bR:sT(e);u=u==vR?rm:u,m=m==vR?rm:m;var d=u==rm,g=m==rm,y=u==m;if(y&&qc(t)){if(!qc(e))return!1;s=!0,d=!1}if(y&&!d)return o||(o=new ms),s||Gp(t)?tm(t,e,r,n,i,o):TR(t,e,u,r,n,i,o);if(!(r&l3)){var T=d&&wR.call(t,"__wrapped__"),w=g&&wR.call(e,"__wrapped__");if(T||w){var E=T?t.value():t,U=w?e.value():e;return o||(o=new ms),i(E,U,r,n,o)}}return y?(o||(o=new ms),SR(t,e,r,n,i,o)):!1}var ER=p3;function _R(t,e,r,n,i){return t===e?!0:t==null||e==null||!mr(t)&&!mr(e)?t!==t&&e!==e:ER(t,e,r,n,_R,i)}var ds=_R;var m3=1,f3=2;function d3(t,e,r,n){var i=r.length,o=i,s=!n;if(t==null)return!o;for(t=Object(t);i--;){var l=r[i];if(s&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++i<o;){l=r[i];var u=l[0],m=t[u],d=l[1];if(s&&l[2]){if(m===void 0&&!(u in t))return!1}else{var g=new ms;if(n)var y=n(m,d,u,t,e,g);if(!(y===void 0?ds(d,m,m3|f3,n,g):y))return!1}}return!0}var RR=d3;function g3(t){return t===t&&!Vr(t)}var nm=g3;function h3(t){for(var e=Zi(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,nm(i)]}return e}var kR=h3;function y3(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var im=y3;function x3(t){var e=kR(t);return e.length==1&&e[0][2]?im(e[0][0],e[0][1]):function(r){return r===t||RR(r,t,e)}}var AR=x3;function T3(t,e){return t!=null&&e in Object(t)}var PR=T3;function S3(t,e,r){e=Kp(e,t);for(var n=-1,i=e.length,o=!1;++n<i;){var s=ro(e[n]);if(!(o=t!=null&&r(t,s)))break;t=t[s]}return o||++n!=i?o:(i=t==null?0:t.length,!!i&&ts(i)&&Xa(s,i)&&(Ze(t)||rs(t)))}var MR=S3;function v3(t,e){return t!=null&&MR(t,e,PR)}var DR=v3;var b3=1,w3=2;function E3(t,e){return is(t)&&nm(e)?im(ro(t),e):function(r){var n=zo(r,t);return n===void 0&&n===e?DR(r,t):ds(e,n,b3|w3)}}var FR=E3;function _3(t){return function(e){return e?.[t]}}var om=_3;function R3(t){return function(e){return cs(e,t)}}var LR=R3;function k3(t){return is(t)?om(ro(t)):LR(t)}var IR=k3;function A3(t){return typeof t=="function"?t:t==null?wr:typeof t=="object"?Ze(t)?FR(t[0],t[1]):AR(t):IR(t)}var io=A3;function P3(t){return function(e,r,n){for(var i=-1,o=Object(e),s=n(e),l=s.length;l--;){var u=s[t?l:++i];if(r(o[u],u,o)===!1)break}return e}}var CR=P3;var M3=CR(),OR=M3;function D3(t,e){return t&&OR(t,e,Zi)}var NR=D3;function F3(t,e){return function(r,n){if(r==null)return r;if(!jn(r))return t(r,n);for(var i=r.length,o=e?i:-1,s=Object(r);(e?o--:++o<i)&&n(s[o],o,s)!==!1;);return r}}var UR=F3;var L3=UR(NR),HR=L3;function I3(t){return mr(t)&&jn(t)}var BR=I3;function C3(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}var VR=C3;function O3(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var am=O3;var WR=/[\\^$.*+?()[\]{}|]/g,N3=RegExp(WR.source);function U3(t){return t=Mn(t),t&&N3.test(t)?t.replace(WR,"\\$&"):t}var Wr=U3;var H3=Math.max,B3=Math.min;function V3(t,e,r){var n=t==null?0:t.length;if(!n)return-1;var i=n-1;return r!==void 0&&(i=Lp(r),i=r<0?H3(n+i,0):B3(i,n-1)),$p(t,io(e,3),i,!0)}var Go=V3;function W3(t,e){var r=-1,n=jn(t)?Array(t.length):[];return HR(t,function(i,o,s){n[++r]=e(i,o,s)}),n}var $R=W3;var $3="Expected a function",j3=8,z3=32,q3=128,G3=256;function K3(t){return Z0(function(e){var r=e.length,n=r,i=Qi.prototype.thru;for(t&&e.reverse();n--;){var o=e[n];if(typeof o!="function")throw new TypeError($3);if(i&&!s&&Za(o)=="wrapper")var s=new Qi([],!0)}for(n=s?n:r;++n<r;){o=e[n];var l=Za(o),u=l=="wrapper"?Hp(o):void 0;u&&Xx(u[0])&&u[1]==(q3|j3|z3|G3)&&!u[4].length&&u[9]==1?s=s[Za(u[0])].apply(s,u[3]):s=o.length==1&&Xx(o)?s[l]():s.thru(o)}return function(){var m=arguments,d=m[0];if(s&&m.length==1&&Ze(d))return s.plant(d).value();for(var g=0,y=r?e[g].apply(this,m):d;++g<r;)y=e[g].call(this,y);return y}})}var jR=K3;var Q3=jR(),uT=Q3;function Y3(t,e){return t>e}var zR=Y3;function Z3(t,e){return cn(e,function(r){return t[r]})}var qR=Z3;function X3(t){return t==null?[]:qR(t,Zi(t))}var GR=X3;function J3(t,e){return ds(t,e)}var wi=J3;function ez(t,e){return t<e}var KR=ez;function tz(t,e,r){for(var n=-1,i=t.length;++n<i;){var o=t[n],s=e(o);if(s!=null&&(l===void 0?s===s&&!Br(s):r(s,l)))var l=s,u=o}return u}var sm=tz;function rz(t,e){return t&&t.length?sm(t,io(e,2),zR):void 0}var pT=rz;function nz(t,e){for(var r,n=-1,i=t.length;++n<i;){var o=e(t[n]);o!==void 0&&(r=r===void 0?o:r+o)}return r}var QR=nz;function iz(t){return t&&t.length?sm(t,wr,KR):void 0}var mT=iz;function oz(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}var YR=oz;function az(t,e){if(t!==e){var r=t!==void 0,n=t===null,i=t===t,o=Br(t),s=e!==void 0,l=e===null,u=e===e,m=Br(e);if(!l&&!m&&!o&&t>e||o&&s&&u&&!l&&!m||n&&s&&u||!r&&u||!i)return 1;if(!n&&!o&&!m&&t<e||m&&r&&i&&!n&&!o||l&&r&&i||!s&&i||!u)return-1}return 0}var ZR=az;function sz(t,e,r){for(var n=-1,i=t.criteria,o=e.criteria,s=i.length,l=r.length;++n<s;){var u=ZR(i[n],o[n]);if(u){if(n>=l)return u;var m=r[n];return u*(m=="desc"?-1:1)}}return t.index-e.index}var XR=sz;function cz(t,e,r){e.length?e=cn(e,function(o){return Ze(o)?function(s){return cs(s,o.length===1?o[0]:o)}:o}):e=[wr];var n=-1;e=cn(e,ns(io));var i=$R(t,function(o,s,l){var u=cn(e,function(m){return m(o)});return{criteria:u,index:++n,value:o}});return YR(i,function(o,s){return XR(o,s,r)})}var JR=cz;var lz=9007199254740991,uz=Math.floor;function pz(t,e){var r="";if(!t||e<1||e>lz)return r;do e%2&&(r+=t),e=uz(e/2),e&&(t+=t);while(e);return r}var ek=pz;function mz(t,e,r,n){for(var i=r-1,o=t.length;++i<o;)if(n(t[i],e))return i;return-1}var tk=mz;var fz=Array.prototype,rk=fz.splice;function dz(t,e,r,n){var i=n?tk:jp,o=-1,s=e.length,l=t;for(t===e&&(e=Yi(e)),r&&(l=cn(t,ns(r)));++o<s;)for(var u=0,m=e[o],d=r?r(m):m;(u=i(l,d,u,n))>-1;)l!==t&&rk.call(l,u,1),rk.call(t,u,1);return t}var nk=dz;function gz(t,e){return t&&t.length&&e&&e.length?nk(t,e):t}var ik=gz;var hz=es(ik),fr=hz;var yz=Math.floor,xz=Math.random;function Tz(t,e){return t+yz(xz()*(e-t+1))}var ok=Tz;var Sz=Math.ceil,vz=Math.max;function bz(t,e,r,n){for(var i=-1,o=vz(Sz((e-t)/(r||1)),0),s=Array(o);o--;)s[n?o:++i]=t,t+=r;return s}var ak=bz;function wz(t){return function(e,r,n){return n&&typeof n!="number"&&$o(e,r,n)&&(r=n=void 0),e=Ka(e),r===void 0?(r=e,e=0):r=Ka(r),n=n===void 0?e<r?1:-1:Ka(n),ak(e,r,n,t)}}var sk=wz;var Ez=sk(),fT=Ez;function _z(t,e,r){return(r?$o(t,e,r):e===void 0)?e=1:e=Lp(e),ek(Mn(t),e)}var dT=_z;function Rz(t,e){var r=-1,n=t.length,i=n-1;for(e=e===void 0?n:e;++r<e;){var o=ok(r,i),s=t[o];t[o]=t[r],t[r]=s}return t.length=e,t}var cm=Rz;function kz(t){return cm(Yi(t))}var ck=kz;function Az(t){return cm(GR(t))}var lk=Az;function Pz(t){var e=Ze(t)?ck:lk;return e(t)}var gT=Pz;var Mz=es(function(t,e){if(t==null)return[];var r=e.length;return r>1&&$o(t,e[0],e[1])?e=[]:r>2&&$o(e[0],e[1],e[2])&&(e=[e[0]]),JR(t,us(e,1),[])}),hT=Mz;function Dz(t,e){return t&&t.length?QR(t,io(e,2)):0}var lm=Dz;var Fz=1/0,Lz=no&&1/fs(new no([,-0]))[1]==Fz?function(t){return new no(t)}:Up,uk=Lz;var Iz=200;function Cz(t,e,r){var n=-1,i=g0,o=t.length,s=!0,l=[],u=l;if(r)s=!1,i=VR;else if(o>=Iz){var m=e?null:uk(t);if(m)return fs(m);s=!1,i=em,u=new Jp}else u=e?[]:l;e:for(;++n<o;){var d=t[n],g=e?e(d):d;if(d=r||d!==0?d:0,s&&g===g){for(var y=u.length;y--;)if(u[y]===g)continue e;e&&u.push(g),l.push(d)}else i(u,g,r)||(u!==l&&u.push(g),l.push(d))}return l}var um=Cz;function Oz(t){return t&&t.length?um(t):[]}var Ko=Oz;function Nz(t,e){return e=typeof e=="function"?e:void 0,t&&t.length?um(t,void 0,e):[]}var Yc=Nz;var Uz=Math.max;function Hz(t){if(!(t&&t.length))return[];var e=0;return t=Qp(t,function(r){if(BR(r))return e=Uz(r.length,e),!0}),qp(e,function(r){return cn(t,om(r))})}var pk=Hz;var Bz=es(pk),Pt=Bz;var pm=class{constructor(){this.commands={clipboardPaste:void 0,clipboardCopy:void 0,toggleLineComment:void 0,indentLine:void 0,outdentLine:void 0,rename:void 0,quickFix:void 0,revealDefinition:void 0,revealTypeDefinition:void 0,showHover:void 0,showDebugHover:void 0,extractVariable:void 0,fold:void 0,highlight:{acceptsLocation:!0},unfold:void 0,showReferences:void 0,insertLineAfter:void 0,gitAccept:void 0,gitRevert:void 0,gitStage:void 0,gitUnstage:void 0}}};var Zc=class{constructor(){this.clipboardContents=""}async readText(){return this.clipboardContents}async writeText(e){this.clipboardContents=e}};var tr=class{constructor(){this.listeners=[];this.notifyListeners=(...e)=>{this.listeners.forEach(r=>r(...e))};this.registerListener=this.registerListener.bind(this)}registerListener(e){return this.listeners.push(e),{dispose:()=>{fr(this.listeners,e)}}}};var mm={tokenHatSplittingMode:{preserveCase:!1,lettersToPreserve:[],symbolsToPreserve:[]},wordSeparators:["_"],decorationDebounceDelayMs:50,experimental:{snippetsDir:void 0,hatStability:"balanced",keyboardTargetFollowsSelection:!1},commandHistory:!1,debug:!1};var Xc=class{constructor(){this.notifier=new tr;this.mocks={...mm};this.scopes=[];this.onDidChangeConfiguration=this.notifier.registerListener;this.onDidChangeConfiguration=this.onDidChangeConfiguration.bind(this)}getOwnConfiguration(e,r){if(r!=null){for(let{scope:n,values:i}of this.scopes)if(Wz(n,r))return zo(i,e)??zo(this.mocks,e)}return zo(this.mocks,e)}mockConfiguration(e,r){this.mocks[e]=r,this.notifier.notifyListeners()}mockConfigurationScope(e,r,n=!1){this.scopes.push({scope:e,values:r}),n||this.notifier.notifyListeners()}};function Wz(t,e){return t.languageId===e.languageId}var fm={hideInferenceWarning:!1,tutorialProgress:{}};var Jc=class{constructor(){this.data={...fm}}get(e){return this.data[e]}set(e,r){return this.data[e]=r,Promise.resolve()}};var el=class{async showMessage(e,r,n,...i){}};var dm=class{constructor(){this.configuration=new Xc;this.messages=new el;this.keyValueStore=new Jc;this.clipboard=new Zc;this.capabilities=new pm;this.runMode="test";this.cursorlessVersion="0.0.0";this.workspaceFolders=void 0;this.disposables=[];this.quickPickReturnValue=void 0;this.onDidOpenTextDocument=gs;this.onDidCloseTextDocument=gs;this.onDidChangeActiveTextEditor=gs;this.onDidChangeVisibleTextEditors=gs;this.onDidChangeTextEditorSelection=gs;this.onDidChangeTextEditorVisibleRanges=gs}async flashRanges(e){}async setHighlightRanges(e,r,n){}mockAssetsRoot(e){this.assetsRoot_=e}get assetsRoot(){if(this.assetsRoot_==null)throw Error("Field `assetsRoot` has not yet been mocked");return this.assetsRoot_}get activeTextEditor(){throw Error("Not implemented")}get activeEditableTextEditor(){throw Error("Not implemented")}get visibleTextEditors(){throw Error("Not implemented")}get visibleNotebookEditors(){throw Error("Not implemented")}getEditableTextEditor(e){throw Error("Not implemented")}findInDocument(e,r){throw Error("Not implemented")}findInWorkspace(e){throw Error("Not implemented")}openTextDocument(e){throw Error("Not implemented")}openUntitledTextDocument(e){throw Error("Not implemented")}setQuickPickReturnValue(e){this.quickPickReturnValue=e}async showQuickPick(e,r){return this.quickPickReturnValue}showInputBox(e){throw Error("Not implemented")}executeCommand(e,...r){throw new Error("Method not implemented.")}onDidChangeTextDocument(e){throw Error("Not implemented")}disposeOnExit(...e){return this.disposables.push(...e),()=>fr(this.disposables,...e)}exit(){this.disposables.forEach(e=>e.dispose())}};function gs(){return{dispose(){}}}var ge=class t{constructor(e,r){this.line=e,this.character=r}isEqual(e){return this.line===e.line&&this.character===e.character}isBefore(e){return this.line<e.line?!0:this.line>e.line?!1:this.character<e.character}isAfter(e){return this.line>e.line?!0:this.line<e.line?!1:this.character>e.character}isBeforeOrEqual(e){return this.isEqual(e)||this.isBefore(e)}isAfterOrEqual(e){return this.isEqual(e)||this.isAfter(e)}compareTo(e){return this.isBefore(e)?-1:this.isAfter(e)?1:0}with(e,r){return new t(e??this.line,r??this.character)}translate(e,r){return new t(this.line+(e??0),this.character+(r??0))}toEmptyRange(){return new Y(this,this)}concise(){return`${this.line}:${this.character}`}conciseOneBased(){return`${this.line+1}:${this.character+1}`}toString(){return this.concise()}};function mk(t,e,r){return t.positionAt(t.offsetAt(e)+r)}var Y=class t{constructor(...e){let[r,n]=e.length===2?e:[new ge(e[0],e[1]),new ge(e[2],e[3])];r.isBefore(n)?(this.start=r,this.end=n):(this.start=n,this.end=r)}get isEmpty(){return this.start.isEqual(this.end)}get isSingleLine(){return this.start.line===this.end.line}isRangeEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}contains(e){let[r,n]=e instanceof ge?[e,e]:[e.start,e.end];return r.isAfterOrEqual(this.start)&&n.isBeforeOrEqual(this.end)}intersection(e){let r=this.start.isAfter(e.start)?this.start:e.start,n=this.end.isBefore(e.end)?this.end:e.end;return r.isBeforeOrEqual(n)?new t(r,n):void 0}union(e){return new t(this.start.isBefore(e.start)?this.start:e.start,this.end.isAfter(e.end)?this.end:e.end)}with(e,r){return new t(e??this.start,r??this.end)}toSelection(e){return e?new De(this.end,this.start):new De(this.start,this.end)}concise(){return`${this.start.concise()}-${this.end.concise()}`}conciseOneBased(){return`${this.start.conciseOneBased()}-${this.end.conciseOneBased()}`}toString(){return`${this.start.concise()}-${this.end.concise()}`}};function $z(t){let{source:e,flags:r}=t;return new RegExp(`(${e})$`,r.replace("m",""))}function jz(t){let{source:e,flags:r}=t;return new RegExp(`^(${e})`,r.replace("m",""))}function fk(t){let e=new Map;function r(n){let i=e.get(n);return i==null&&(i=t(n),e.set(n,i)),i}return r}var gm=fk($z),hm=fk(jz);function yT(t,e){return e.lastIndex=0,t.matchAll(e)}function ln(t,e,r){return Array.from(yT(t,e),r)}function Qo(t,e){return t.lastIndex=0,t.test(e)}function dk(t,e){return t.lastIndex=0,e.match(t)}function tl(t,e){return ln(t,e,r=>({index:r.index,text:r[0]}))}var hs=class{constructor(e){this.original=e;this.configuration=e.configuration,this.keyValueStore=e.keyValueStore,this.clipboard=e.clipboard,this.messages=e.messages,this.capabilities=e.capabilities}flashRanges(e){return this.original.flashRanges(e)}setHighlightRanges(e,r,n){return this.original.setHighlightRanges(e,r,n)}onDidOpenTextDocument(e,r,n){return this.original.onDidOpenTextDocument(e,r,n)}onDidCloseTextDocument(e,r,n){return this.original.onDidCloseTextDocument(e,r,n)}onDidChangeActiveTextEditor(e,r,n){return this.original.onDidChangeActiveTextEditor(e,r,n)}onDidChangeVisibleTextEditors(e,r,n){return this.original.onDidChangeVisibleTextEditors(e,r,n)}onDidChangeTextEditorSelection(e,r,n){return this.original.onDidChangeTextEditorSelection(e,r,n)}onDidChangeTextEditorVisibleRanges(e,r,n){return this.original.onDidChangeTextEditorVisibleRanges(e,r,n)}get activeTextEditor(){return this.original.activeTextEditor}get activeEditableTextEditor(){return this.original.activeEditableTextEditor}get visibleTextEditors(){return this.original.visibleTextEditors}get visibleNotebookEditors(){return this.original.visibleNotebookEditors}get cursorlessVersion(){return this.original.cursorlessVersion}get assetsRoot(){return this.original.assetsRoot}get runMode(){return this.original.runMode}get workspaceFolders(){return this.original.workspaceFolders}findInDocument(e,r){return this.original.findInDocument(e,r)}findInWorkspace(e){return this.original.findInWorkspace(e)}openTextDocument(e){return this.original.openTextDocument(e)}openUntitledTextDocument(e){return this.original.openUntitledTextDocument(e)}showQuickPick(e,r){return this.original.showQuickPick(e,r)}showInputBox(e){return this.original.showInputBox(e)}getEditableTextEditor(e){return this.original.getEditableTextEditor(e)}executeCommand(e,...r){return this.original.executeCommand(e,...r)}onDidChangeTextDocument(e){return this.original.onDidChangeTextDocument(e)}disposeOnExit(...e){return this.original.disposeOnExit(...e)}};var ym=class extends hs{constructor(r,n,i,o){super(r);this.fakeIde=n;this.isSilent=i;this.cursorlessSnippetsDir=o;this.messages=i?n.messages:r.messages,this.configuration=n.configuration,this.keyValueStore=n.keyValueStore,this.initializeConfiguration()}initializeConfiguration(){this.configuration.mockConfigurationScope({languageId:"css"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfigurationScope({languageId:"scss"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfigurationScope({languageId:"shellscript"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfiguration("experimental",{hatStability:this.configuration.getOwnConfiguration("experimental.hatStability"),snippetsDir:this.cursorlessSnippetsDir,keyboardTargetFollowsSelection:!1})}flashRanges(r){return this.isSilent?this.fakeIde.flashRanges(r):super.flashRanges(r)}setHighlightRanges(r,n,i){return this.isSilent?this.fakeIde.setHighlightRanges(r,n,i):super.setHighlightRanges(r,n,i)}async showQuickPick(r,n){return this.isSilent?this.fakeIde.showQuickPick(r,n):super.showQuickPick(r,n)}};function Yo(t,e,r,...n){return t.showMessage("warning",e,r,...n)}function ut(t,e,r,...n){return t.showMessage("error",e,r,...n)}var le=(i=>(i[i.supported=0]="supported",i[i.supportedLegacy=1]="supportedLegacy",i[i.unsupported=2]="unsupported",i[i.notApplicable=3]="notApplicable",i))(le||{});var{supported:ot,unsupported:Vse,notApplicable:gk}=le,xT={ifStatement:ot,disqualifyDelimiter:ot,"comment.line":ot,"comment.block":ot,"string.singleLine":ot,"textFragment.comment.line":ot,"textFragment.comment.block":ot,"textFragment.string.singleLine":ot,class:ot,className:ot,namedFunction:ot,"name.function":ot,"name.class":ot,"name.field":ot,functionName:ot,"name.argument.formal":ot,"name.argument.formal.iteration":ot,"name.variable":ot,"value.variable":ot,"name.assignment":ot,"value.assignment":ot,"statement.class":ot,"type.class":ot,"type.field":ot,"value.argument.formal":gk,"value.argument.formal.iteration":gk};var{supported:jse,unsupported:zse,notApplicable:qse}=le;var{supported:hk,unsupported:Yse,notApplicable:Zse}=le,zz={...xT,"value.argument.formal":hk,"value.argument.formal.iteration":hk};var{supported:ece,unsupported:tce,notApplicable:rce}=le;var{supported:yt,notApplicable:I}=le,TT={"comment.block":yt,"string.singleLine":yt,disqualifyDelimiter:yt,map:yt,functionCall:yt,functionCallee:yt,"argument.actual":yt,"argument.actual.iteration":yt,"argumentList.actual.empty":yt,"argumentList.actual.singleLine":yt,"name.iteration.document":yt,"name.iteration.block":yt,"textFragment.comment.block":yt,"textFragment.string.singleLine":yt,"key.mapPair":yt,"key.mapPair.iteration":yt,"value.mapPair":yt,"value.mapPair.iteration":yt,"collectionItem.unenclosed":yt,"collectionItem.unenclosed.iteration":yt,statement:yt,"statement.iteration.document":yt,anonymousFunction:I,"argument.actual.constructor.iteration":I,"argument.actual.constructor":I,"argument.actual.method.iteration":I,"argument.actual.method":I,"argument.formal.constructor.iteration":I,"argument.formal.constructor":I,"argument.formal.iteration":I,"argument.formal.method.iteration":I,"argument.formal.method":I,"argument.formal":I,"argument.formal.lambda":I,"argument.formal.lambda.iteration":I,"argumentList.actual.multiLine":I,"argumentList.actual.method.empty":I,"argumentList.actual.method.singleLine":I,"argumentList.actual.method.multiLine":I,"argumentList.actual.constructor.empty":I,"argumentList.actual.constructor.singleLine":I,"argumentList.actual.constructor.multiLine":I,"argumentList.formal.empty":I,"argumentList.formal.singleLine":I,"argumentList.formal.multiLine":I,"argumentList.formal.lambda.empty":I,"argumentList.formal.lambda.singleLine":I,"argumentList.formal.lambda.multiLine":I,"argumentList.formal.method.empty":I,"argumentList.formal.method.singleLine":I,"argumentList.formal.method.multiLine":I,"argumentList.formal.constructor.empty":I,"argumentList.formal.constructor.singleLine":I,"argumentList.formal.constructor.multiLine":I,attribute:I,"branch.if.iteration":I,"branch.if":I,"branch.loop":I,"branch.switchCase.iteration":I,"branch.switchCase":I,"branch.ternary":I,"branch.try.iteration":I,"branch.try":I,"class.iteration.block":I,"class.iteration.document":I,class:I,"className.iteration.block":I,"className.iteration.document":I,className:I,command:I,"comment.line":I,"condition.doWhile":I,"condition.for":I,"condition.if":I,"condition.switchCase.iteration":I,"condition.switchCase":I,"condition.ternary":I,"condition.while":I,element:I,endTag:I,environment:I,fieldAccess:I,"functionCall.constructor":I,"functionCallee.constructor":I,"functionName.constructor":I,"functionName.iteration.block":I,"functionName.iteration.document":I,"functionName.method.iteration.class":I,"functionName.method":I,functionName:I,ifStatement:I,"interior.cell":I,"interior.class":I,"interior.command":I,"interior.element":I,"interior.function":I,"interior.if":I,"interior.lambda":I,"interior.loop":I,"interior.resource":I,"interior.switchCase":I,"interior.ternary":I,"interior.try":I,"key.attribute":I,list:I,"name.argument.actual.iteration":I,"name.argument.actual":I,"name.argument.formal.constructor.iteration":I,"name.argument.formal.constructor":I,"name.argument.formal.iteration":I,"name.argument.formal.method.iteration":I,"name.argument.formal.method":I,"name.argument.formal":I,"name.assignment.pattern":I,"name.assignment":I,"name.class":I,"name.constructor":I,"name.field":I,"name.foreach":I,"name.function":I,"name.method":I,"name.resource.iteration":I,"name.resource":I,"name.variable.pattern":I,"name.variable":I,"namedFunction.constructor":I,"namedFunction.iteration.block":I,"namedFunction.iteration.document":I,"namedFunction.method.iteration.class":I,"namedFunction.method":I,namedFunction:I,notebookCell:I,pairDelimiter:I,regularExpression:I,"section.iteration.document":I,"section.iteration.parent":I,section:I,startTag:I,"statement.iteration.block":I,"statement.class":I,"string.multiLine":I,switchStatementSubject:I,tags:I,"textFragment.comment.line":I,"textFragment.element":I,"textFragment.string.multiLine":I,"type.alias":I,"type.argument.formal.constructor.iteration":I,"type.argument.formal.constructor":I,"type.argument.formal.iteration":I,"type.argument.formal.method.iteration":I,"type.argument.formal.method":I,"type.argument.formal":I,"type.cast":I,"type.class":I,"type.enum":I,"type.field.iteration":I,"type.field":I,"type.foreach":I,"type.interface":I,"type.resource":I,"type.resource.iteration":I,"type.return":I,"type.typeArgument.iteration":I,"type.typeArgument":I,"type.variable":I,"value.argument.actual.iteration":I,"value.argument.actual":I,"value.argument.formal.constructor.iteration":I,"value.argument.formal.constructor":I,"value.argument.formal.iteration":I,"value.argument.formal.method.iteration":I,"value.argument.formal.method":I,"value.argument.formal":I,"value.assignment":I,"value.attribute":I,"value.field":I,"value.foreach":I,"value.resource.iteration":I,"value.resource":I,"value.return.lambda":I,"value.return":I,"value.typeAlias":I,"value.variable.pattern":I,"value.variable":I,"value.yield":I};var{supported:sce,unsupported:cce,notApplicable:lce}=le;var{supported:mce,unsupported:fce,notApplicable:dce}=le;var{supported:yce,notApplicable:xce}=le;var{supported:vce,unsupported:bce,notApplicable:wce}=le;var{supported:W,unsupported:oo,notApplicable:_e}=le,ST={list:W,map:W,regularExpression:W,switchStatementSubject:W,fieldAccess:W,disqualifyDelimiter:W,pairDelimiter:W,"collectionItem.unenclosed":W,"collectionItem.unenclosed.iteration":W,"textFragment.string.singleLine":W,"textFragment.string.multiLine":W,"textFragment.comment.line":W,"textFragment.comment.block":W,ifStatement:W,statement:W,"statement.iteration.document":W,"statement.iteration.block":W,"statement.class":W,class:W,"class.iteration.document":W,className:W,"className.iteration.document":W,anonymousFunction:W,namedFunction:W,"namedFunction.iteration.document":W,"namedFunction.method":W,"namedFunction.method.iteration.class":W,"namedFunction.constructor":W,functionName:W,"functionName.iteration.document":W,"functionName.method":W,"functionName.method.iteration.class":W,"functionName.constructor":W,functionCall:W,"functionCall.constructor":W,functionCallee:W,"functionCallee.constructor":W,"argument.actual":W,"argument.actual.iteration":W,"argument.actual.method":W,"argument.actual.method.iteration":W,"argument.actual.constructor":W,"argument.actual.constructor.iteration":W,"argument.formal":W,"argument.formal.iteration":W,"argument.formal.method":W,"argument.formal.method.iteration":W,"argument.formal.constructor":W,"argument.formal.constructor.iteration":W,"argument.formal.lambda":W,"argument.formal.lambda.iteration":W,"argumentList.actual.empty":W,"argumentList.actual.singleLine":W,"argumentList.actual.multiLine":W,"argumentList.actual.method.empty":W,"argumentList.actual.method.singleLine":W,"argumentList.actual.method.multiLine":W,"argumentList.actual.constructor.empty":W,"argumentList.actual.constructor.singleLine":W,"argumentList.actual.constructor.multiLine":W,"argumentList.formal.empty":W,"argumentList.formal.singleLine":W,"argumentList.formal.multiLine":W,"argumentList.formal.lambda.empty":W,"argumentList.formal.lambda.singleLine":W,"argumentList.formal.lambda.multiLine":W,"argumentList.formal.method.empty":W,"argumentList.formal.method.singleLine":W,"argumentList.formal.method.multiLine":W,"argumentList.formal.constructor.empty":W,"argumentList.formal.constructor.singleLine":W,"argumentList.formal.constructor.multiLine":W,"comment.line":W,"comment.block":W,"string.singleLine":W,"string.multiLine":W,"branch.if":W,"branch.if.iteration":W,"branch.try":W,"branch.try.iteration":W,"branch.switchCase":W,"branch.switchCase.iteration":W,"branch.ternary":W,"branch.loop":W,"condition.if":W,"condition.while":W,"condition.doWhile":W,"condition.for":W,"condition.ternary":W,"condition.switchCase":W,"condition.switchCase.iteration":W,"name.argument.formal":W,"name.argument.formal.iteration":W,"name.argument.formal.method":W,"name.argument.formal.method.iteration":W,"name.argument.formal.constructor":W,"name.argument.formal.constructor.iteration":W,"name.foreach":W,"name.assignment":W,"name.assignment.pattern":W,"name.variable":W,"name.variable.pattern":W,"name.function":W,"name.method":W,"name.constructor":W,"name.class":W,"name.field":W,"name.iteration.document":W,"name.iteration.block":W,"key.mapPair":W,"key.mapPair.iteration":W,"value.argument.formal":W,"value.argument.formal.iteration":W,"value.argument.formal.method":W,"value.argument.formal.method.iteration":W,"value.argument.formal.constructor":W,"value.argument.formal.constructor.iteration":W,"value.mapPair":W,"value.mapPair.iteration":W,"value.assignment":W,"value.variable":W,"value.variable.pattern":W,"value.foreach":W,"value.return":W,"value.return.lambda":W,"value.field":W,"value.yield":W,"type.class":W,"interior.class":oo,"interior.function":oo,"interior.if":oo,"interior.lambda":oo,"interior.loop":oo,"interior.switchCase":oo,"interior.ternary":oo,"interior.try":oo,"class.iteration.block":_e,"className.iteration.block":_e,"functionName.iteration.block":_e,"interior.cell":_e,"interior.command":_e,"interior.resource":_e,"name.argument.actual.iteration":_e,"name.argument.actual":_e,"name.resource.iteration":_e,"name.resource":_e,"namedFunction.iteration.block":_e,"section.iteration.document":_e,"section.iteration.parent":_e,"textFragment.element":_e,"type.resource.iteration":_e,"type.resource":_e,"value.argument.actual.iteration":_e,"value.argument.actual":_e,"value.resource.iteration":_e,"value.resource":_e,command:_e,environment:_e,notebookCell:_e,section:_e},vT={element:W,tags:W,startTag:W,endTag:W,attribute:W,"key.attribute":W,"value.attribute":W,"interior.element":W},bT={...ST,...vT,"value.typeAlias":_e,"type.alias":_e,"type.argument.formal.constructor.iteration":_e,"type.argument.formal.constructor":_e,"type.argument.formal.iteration":_e,"type.argument.formal.method.iteration":_e,"type.argument.formal.method":_e,"type.argument.formal":_e,"type.cast":_e,"type.enum":_e,"type.field.iteration":_e,"type.field":_e,"type.foreach":_e,"type.interface":_e,"type.return":_e,"type.typeArgument.iteration":_e,"type.typeArgument":_e,"type.variable":_e};var{supported:qz,unsupported:Pce,notApplicable:Mce}=le,Gz={...bT,"textFragment.element":qz};var{supported:un,notApplicable:F}=le,rl={list:un,map:un,"string.singleLine":un,"key.mapPair.iteration":un,"key.mapPair":un,"value.mapPair.iteration":un,"value.mapPair":un,"comment.block":un,"comment.line":un,"textFragment.comment.block":un,"textFragment.comment.line":un,"textFragment.string.singleLine":un,anonymousFunction:F,"argument.actual":F,"argument.actual.constructor":F,"argument.actual.constructor.iteration":F,"argument.actual.iteration":F,"argument.actual.method":F,"argument.actual.method.iteration":F,"argument.formal":F,"argument.formal.constructor":F,"argument.formal.constructor.iteration":F,"argument.formal.iteration":F,"argument.formal.method":F,"argument.formal.method.iteration":F,"argument.formal.lambda":F,"argument.formal.lambda.iteration":F,"argumentList.actual.empty":F,"argumentList.actual.singleLine":F,"argumentList.actual.multiLine":F,"argumentList.actual.method.empty":F,"argumentList.actual.method.singleLine":F,"argumentList.actual.method.multiLine":F,"argumentList.actual.constructor.empty":F,"argumentList.actual.constructor.singleLine":F,"argumentList.actual.constructor.multiLine":F,"argumentList.formal.empty":F,"argumentList.formal.singleLine":F,"argumentList.formal.multiLine":F,"argumentList.formal.lambda.empty":F,"argumentList.formal.lambda.singleLine":F,"argumentList.formal.lambda.multiLine":F,"argumentList.formal.method.empty":F,"argumentList.formal.method.singleLine":F,"argumentList.formal.method.multiLine":F,"argumentList.formal.constructor.empty":F,"argumentList.formal.constructor.singleLine":F,"argumentList.formal.constructor.multiLine":F,attribute:F,"branch.if":F,"branch.if.iteration":F,"branch.loop":F,"branch.switchCase":F,"branch.switchCase.iteration":F,"branch.ternary":F,"branch.try":F,"branch.try.iteration":F,class:F,"class.iteration.block":F,"class.iteration.document":F,className:F,"className.iteration.block":F,"className.iteration.document":F,"collectionItem.unenclosed":F,"collectionItem.unenclosed.iteration":F,command:F,"condition.doWhile":F,"condition.for":F,"condition.if":F,"condition.switchCase":F,"condition.switchCase.iteration":F,"condition.ternary":F,"condition.while":F,disqualifyDelimiter:F,element:F,endTag:F,environment:F,fieldAccess:F,functionCall:F,"functionCall.constructor":F,functionCallee:F,"functionCallee.constructor":F,functionName:F,"functionName.constructor":F,"functionName.iteration.block":F,"functionName.iteration.document":F,"functionName.method":F,"functionName.method.iteration.class":F,ifStatement:F,"interior.cell":F,"interior.class":F,"interior.command":F,"interior.element":F,"interior.function":F,"interior.if":F,"interior.lambda":F,"interior.loop":F,"interior.resource":F,"interior.switchCase":F,"interior.ternary":F,"interior.try":F,"key.attribute":F,"name.argument.actual":F,"name.argument.actual.iteration":F,"name.argument.formal":F,"name.argument.formal.constructor":F,"name.argument.formal.constructor.iteration":F,"name.argument.formal.iteration":F,"name.argument.formal.method":F,"name.argument.formal.method.iteration":F,"name.assignment":F,"name.assignment.pattern":F,"name.class":F,"name.constructor":F,"name.field":F,"name.foreach":F,"name.function":F,"name.iteration.block":F,"name.iteration.document":F,"name.method":F,"name.resource":F,"name.resource.iteration":F,"name.variable":F,"name.variable.pattern":F,namedFunction:F,"namedFunction.constructor":F,"namedFunction.iteration.block":F,"namedFunction.iteration.document":F,"namedFunction.method":F,"namedFunction.method.iteration.class":F,notebookCell:F,pairDelimiter:F,regularExpression:F,section:F,"section.iteration.document":F,"section.iteration.parent":F,startTag:F,statement:F,"statement.class":F,"statement.iteration.block":F,"statement.iteration.document":F,"string.multiLine":F,switchStatementSubject:F,tags:F,"textFragment.element":F,"textFragment.string.multiLine":F,"type.alias":F,"type.argument.formal":F,"type.argument.formal.constructor":F,"type.argument.formal.constructor.iteration":F,"type.argument.formal.iteration":F,"type.argument.formal.method":F,"type.argument.formal.method.iteration":F,"type.cast":F,"type.class":F,"type.enum":F,"type.field":F,"type.field.iteration":F,"type.foreach":F,"type.interface":F,"type.resource":F,"type.resource.iteration":F,"type.return":F,"type.typeArgument":F,"type.typeArgument.iteration":F,"type.variable":F,"value.argument.actual":F,"value.argument.actual.iteration":F,"value.argument.formal":F,"value.argument.formal.constructor":F,"value.argument.formal.constructor.iteration":F,"value.argument.formal.iteration":F,"value.argument.formal.method":F,"value.argument.formal.method.iteration":F,"value.assignment":F,"value.attribute":F,"value.field":F,"value.foreach":F,"value.resource":F,"value.resource.iteration":F,"value.return":F,"value.return.lambda":F,"value.typeAlias":F,"value.variable":F,"value.variable.pattern":F,"value.yield":F};var{supported:Oce,unsupported:Nce,notApplicable:Uce}=le,Kz={...rl};var{supported:Wce,unsupported:$ce,notApplicable:jce}=le,Qz={...rl};var{supported:Gce,unsupported:Kce,notApplicable:Qce}=le;var{supported:Xce,notApplicable:Jce}=le;var{supported:rle,notApplicable:nle}=le;var{supported:ale,unsupported:sle,notApplicable:cle}=le;var{supported:ple,notApplicable:mle}=le;var{supported:gle,unsupported:hle,notApplicable:yle}=le;var{supported:Sle,unsupported:vle,notApplicable:ble}=le;var{supported:_le,unsupported:Rle,notApplicable:kle}=le;var{supported:Mle,unsupported:Dle,notApplicable:Fle}=le;var{supported:Cle,notApplicable:Ole}=le;var{supported:rr,unsupported:xm}=le,Yz={...TT,"comment.line":rr,"condition.if":rr,namedFunction:rr,"namedFunction.iteration.block":rr,"namedFunction.iteration.document":rr,functionName:rr,"functionName.iteration.block":rr,"functionName.iteration.document":rr,"name.argument.formal":rr,"name.argument.formal.iteration":rr,"name.function":rr,"value.argument.formal":rr,"value.argument.formal.iteration":rr,"value.return":rr,ifStatement:rr,"textFragment.comment.line":rr,"branch.if":xm,"branch.if.iteration":xm,"interior.function":xm,"interior.if":xm};var{supported:Wle,unsupported:$le,notApplicable:jle}=le;var{supported:jt,notApplicable:Ei}=le,wT={...ST,"type.argument.formal":jt,"type.argument.formal.iteration":jt,"type.argument.formal.method":jt,"type.argument.formal.method.iteration":jt,"type.argument.formal.constructor":jt,"type.argument.formal.constructor.iteration":jt,"type.alias":jt,"type.cast":jt,"type.field":jt,"type.field.iteration":jt,"type.interface":jt,"type.enum":jt,"type.return":jt,"type.variable":jt,"type.typeArgument":jt,"type.typeArgument.iteration":jt,"value.typeAlias":jt,element:Ei,tags:Ei,startTag:Ei,endTag:Ei,attribute:Ei,"key.attribute":Ei,"value.attribute":Ei,"type.foreach":Ei,"interior.element":Ei};var{supported:Xle,unsupported:Jle,notApplicable:eue}=le,Zz={...wT,...vT};var{supported:nue,notApplicable:iue}=le;var{supported:sue,unsupported:cue,notApplicable:lue}=le;var ys=["that","source","instanceReference","keyboard"];var De=class extends Y{get isReversed(){return this.active.isBefore(this.anchor)}constructor(...e){let[r,n]=e.length===2?e:[new ge(e[0],e[1]),new ge(e[2],e[3])];super(r,n),this.anchor=r,this.active=n}isEqual(e){return this.anchor.isEqual(e.anchor)&&this.active.isEqual(e.active)}concise(){return`${this.anchor.concise()}->${this.active.concise()}`}conciseOneBased(){return`${this.start.conciseOneBased()}->${this.end.conciseOneBased()}`}toString(){return this.concise()}};function xk({line:t,character:e}){return new ge(t,e)}function Tm({start:t,end:e}){return new Y(xk(t),xk(e))}function $r({start:t,end:e}){return{type:"line",start:t.line,end:e.line}}function dr({start:t,end:e}){return{type:"character",start:t,end:e}}function nl(t){return{start:Sm(t.start),end:Sm(t.end)}}function Tk(t){return{anchor:Sm(t.anchor),active:Sm(t.active)}}function Sm({line:t,character:e}){return{line:t,character:e}}function Nk(t){return typeof t>"u"||t===null}function Xz(t){return typeof t=="object"&&t!==null}function Jz(t){return Array.isArray(t)?t:Nk(t)?[]:[t]}function eq(t,e){var r,n,i,o;if(e)for(o=Object.keys(e),r=0,n=o.length;r<n;r+=1)i=o[r],t[i]=e[i];return t}function tq(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}function rq(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var nq=Nk,iq=Xz,oq=Jz,aq=tq,sq=rq,cq=eq,Mt={isNothing:nq,isObject:iq,toArray:oq,repeat:aq,isNegativeZero:sq,extend:cq};function Uk(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}function ol(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=Uk(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}ol.prototype=Object.create(Error.prototype);ol.prototype.constructor=ol;ol.prototype.toString=function(e){return this.name+": "+Uk(this,e)};var _r=ol;function ET(t,e,r,n,i){var o="",s="",l=Math.floor(i/2)-1;return n-e>l&&(o=" ... ",e=n-l+o.length),r-n>l&&(s=" ...",r=n+l-s.length),{str:o+t.slice(e,r).replace(/\t/g,"\u2192")+s,pos:n-e+o.length}}function _T(t,e){return Mt.repeat(" ",e-t.length)+t}function lq(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],o,s=-1;o=r.exec(t.buffer);)i.push(o.index),n.push(o.index+o[0].length),t.position<=o.index&&s<0&&(s=n.length-2);s<0&&(s=n.length-1);var l="",u,m,d=Math.min(t.line+e.linesAfter,i.length).toString().length,g=e.maxLength-(e.indent+d+3);for(u=1;u<=e.linesBefore&&!(s-u<0);u++)m=ET(t.buffer,n[s-u],i[s-u],t.position-(n[s]-n[s-u]),g),l=Mt.repeat(" ",e.indent)+_T((t.line-u+1).toString(),d)+" | "+m.str+`
`+l;for(m=ET(t.buffer,n[s],i[s],t.position,g),l+=Mt.repeat(" ",e.indent)+_T((t.line+1).toString(),d)+" | "+m.str+`
`,l+=Mt.repeat("-",e.indent+d+3+m.pos)+`^
`,u=1;u<=e.linesAfter&&!(s+u>=i.length);u++)m=ET(t.buffer,n[s+u],i[s+u],t.position-(n[s]-n[s+u]),g),l+=Mt.repeat(" ",e.indent)+_T((t.line+u+1).toString(),d)+" | "+m.str+`
`;return l.replace(/\n$/,"")}var uq=lq,pq=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],mq=["scalar","sequence","mapping"];function fq(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}function dq(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(pq.indexOf(r)===-1)throw new _r('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=fq(e.styleAliases||null),mq.indexOf(this.kind)===-1)throw new _r('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var zt=dq;function bk(t,e){var r=[];return t[e].forEach(function(n){var i=r.length;r.forEach(function(o,s){o.tag===n.tag&&o.kind===n.kind&&o.multi===n.multi&&(i=s)}),r[i]=n}),r}function gq(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}function kT(t){return this.extend(t)}kT.prototype.extend=function(e){var r=[],n=[];if(e instanceof zt)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new _r("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(o){if(!(o instanceof zt))throw new _r("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new _r("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new _r("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(o){if(!(o instanceof zt))throw new _r("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(kT.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=bk(i,"implicit"),i.compiledExplicit=bk(i,"explicit"),i.compiledTypeMap=gq(i.compiledImplicit,i.compiledExplicit),i};var hq=kT,yq=new zt("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),xq=new zt("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),Tq=new zt("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),Sq=new hq({explicit:[yq,xq,Tq]});function vq(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function bq(){return null}function wq(t){return t===null}var Eq=new zt("tag:yaml.org,2002:null",{kind:"scalar",resolve:vq,construct:bq,predicate:wq,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function _q(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function Rq(t){return t==="true"||t==="True"||t==="TRUE"}function kq(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var Aq=new zt("tag:yaml.org,2002:bool",{kind:"scalar",resolve:_q,construct:Rq,predicate:kq,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function Pq(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function Mq(t){return 48<=t&&t<=55}function Dq(t){return 48<=t&&t<=57}function Fq(t){if(t===null)return!1;var e=t.length,r=0,n=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!Pq(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!Mq(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!Dq(t.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function Lq(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}function Iq(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!Mt.isNegativeZero(t)}var Cq=new zt("tag:yaml.org,2002:int",{kind:"scalar",resolve:Fq,construct:Lq,predicate:Iq,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Oq=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Nq(t){return!(t===null||!Oq.test(t)||t[t.length-1]==="_")}function Uq(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}var Hq=/^[-+]?[0-9]+e/;function Bq(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Mt.isNegativeZero(t))return"-0.0";return r=t.toString(10),Hq.test(r)?r.replace("e",".e"):r}function Vq(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||Mt.isNegativeZero(t))}var Wq=new zt("tag:yaml.org,2002:float",{kind:"scalar",resolve:Nq,construct:Uq,predicate:Vq,represent:Bq,defaultStyle:"lowercase"}),$q=Sq.extend({implicit:[Eq,Aq,Cq,Wq]}),jq=$q,Hk=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Bk=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function zq(t){return t===null?!1:Hk.exec(t)!==null||Bk.exec(t)!==null}function qq(t){var e,r,n,i,o,s,l,u=0,m=null,d,g,y;if(e=Hk.exec(t),e===null&&(e=Bk.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(o=+e[4],s=+e[5],l=+e[6],e[7]){for(u=e[7].slice(0,3);u.length<3;)u+="0";u=+u}return e[9]&&(d=+e[10],g=+(e[11]||0),m=(d*60+g)*6e4,e[9]==="-"&&(m=-m)),y=new Date(Date.UTC(r,n,i,o,s,l,u)),m&&y.setTime(y.getTime()-m),y}function Gq(t){return t.toISOString()}var Kq=new zt("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:zq,construct:qq,instanceOf:Date,represent:Gq});function Qq(t){return t==="<<"||t===null}var Yq=new zt("tag:yaml.org,2002:merge",{kind:"scalar",resolve:Qq}),FT=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function Zq(t){if(t===null)return!1;var e,r,n=0,i=t.length,o=FT;for(r=0;r<i;r++)if(e=o.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}function Xq(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,o=FT,s=0,l=[];for(e=0;e<i;e++)e%4===0&&e&&(l.push(s>>16&255),l.push(s>>8&255),l.push(s&255)),s=s<<6|o.indexOf(n.charAt(e));return r=i%4*6,r===0?(l.push(s>>16&255),l.push(s>>8&255),l.push(s&255)):r===18?(l.push(s>>10&255),l.push(s>>2&255)):r===12&&l.push(s>>4&255),new Uint8Array(l)}function Jq(t){var e="",r=0,n,i,o=t.length,s=FT;for(n=0;n<o;n++)n%3===0&&n&&(e+=s[r>>18&63],e+=s[r>>12&63],e+=s[r>>6&63],e+=s[r&63]),r=(r<<8)+t[n];return i=o%3,i===0?(e+=s[r>>18&63],e+=s[r>>12&63],e+=s[r>>6&63],e+=s[r&63]):i===2?(e+=s[r>>10&63],e+=s[r>>4&63],e+=s[r<<2&63],e+=s[64]):i===1&&(e+=s[r>>2&63],e+=s[r<<4&63],e+=s[64],e+=s[64]),e}function eG(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var tG=new zt("tag:yaml.org,2002:binary",{kind:"scalar",resolve:Zq,construct:Xq,predicate:eG,represent:Jq}),rG=Object.prototype.hasOwnProperty,nG=Object.prototype.toString;function iG(t){if(t===null)return!0;var e=[],r,n,i,o,s,l=t;for(r=0,n=l.length;r<n;r+=1){if(i=l[r],s=!1,nG.call(i)!=="[object Object]")return!1;for(o in i)if(rG.call(i,o))if(!s)s=!0;else return!1;if(!s)return!1;if(e.indexOf(o)===-1)e.push(o);else return!1}return!0}function oG(t){return t!==null?t:[]}var aG=new zt("tag:yaml.org,2002:omap",{kind:"sequence",resolve:iG,construct:oG}),sG=Object.prototype.toString;function cG(t){if(t===null)return!0;var e,r,n,i,o,s=t;for(o=new Array(s.length),e=0,r=s.length;e<r;e+=1){if(n=s[e],sG.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;o[e]=[i[0],n[i[0]]]}return!0}function lG(t){if(t===null)return[];var e,r,n,i,o,s=t;for(o=new Array(s.length),e=0,r=s.length;e<r;e+=1)n=s[e],i=Object.keys(n),o[e]=[i[0],n[i[0]]];return o}var uG=new zt("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:cG,construct:lG}),pG=Object.prototype.hasOwnProperty;function mG(t){if(t===null)return!0;var e,r=t;for(e in r)if(pG.call(r,e)&&r[e]!==null)return!1;return!0}function fG(t){return t!==null?t:{}}var dG=new zt("tag:yaml.org,2002:set",{kind:"mapping",resolve:mG,construct:fG}),LT=jq.extend({implicit:[Kq,Yq],explicit:[tG,aG,uG,dG]}),so=Object.prototype.hasOwnProperty,vm=1,Vk=2,Wk=3,bm=4,RT=1,gG=2,wk=3,hG=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,yG=/[\x85\u2028\u2029]/,xG=/[,\[\]\{\}]/,$k=/^(?:!|!!|![a-z\-]+!)$/i,jk=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Ek(t){return Object.prototype.toString.call(t)}function zn(t){return t===10||t===13}function Xo(t){return t===9||t===32}function Rr(t){return t===9||t===32||t===10||t===13}function Ts(t){return t===44||t===91||t===93||t===123||t===125}function TG(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function SG(t){return t===120?2:t===117?4:t===85?8:0}function vG(t){return 48<=t&&t<=57?t-48:-1}function _k(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}function bG(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var zk=new Array(256),qk=new Array(256);for(Zo=0;Zo<256;Zo++)zk[Zo]=_k(Zo)?1:0,qk[Zo]=_k(Zo);var Zo;function wG(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||LT,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Gk(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=uq(r),new _r(e,r)}function de(t,e){throw Gk(t,e)}function wm(t,e){t.onWarning&&t.onWarning.call(null,Gk(t,e))}var Rk={YAML:function(e,r,n){var i,o,s;e.version!==null&&de(e,"duplication of %YAML directive"),n.length!==1&&de(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&de(e,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),s=parseInt(i[2],10),o!==1&&de(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=s<2,s!==1&&s!==2&&wm(e,"unsupported YAML version of the document")},TAG:function(e,r,n){var i,o;n.length!==2&&de(e,"TAG directive accepts exactly two arguments"),i=n[0],o=n[1],$k.test(i)||de(e,"ill-formed tag handle (first argument) of the TAG directive"),so.call(e.tagMap,i)&&de(e,'there is a previously declared suffix for "'+i+'" tag handle'),jk.test(o)||de(e,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{de(e,"tag prefix is malformed: "+o)}e.tagMap[i]=o}};function ao(t,e,r,n){var i,o,s,l;if(e<r){if(l=t.input.slice(e,r),n)for(i=0,o=l.length;i<o;i+=1)s=l.charCodeAt(i),s===9||32<=s&&s<=1114111||de(t,"expected valid JSON character");else hG.test(l)&&de(t,"the stream contains non-printable characters");t.result+=l}}function kk(t,e,r,n){var i,o,s,l;for(Mt.isObject(r)||de(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),s=0,l=i.length;s<l;s+=1)o=i[s],so.call(e,o)||(e[o]=r[o],n[o]=!0)}function Ss(t,e,r,n,i,o,s,l,u){var m,d;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),m=0,d=i.length;m<d;m+=1)Array.isArray(i[m])&&de(t,"nested arrays are not supported inside keys"),typeof i=="object"&&Ek(i[m])==="[object Object]"&&(i[m]="[object Object]");if(typeof i=="object"&&Ek(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(m=0,d=o.length;m<d;m+=1)kk(t,e,o[m],r);else kk(t,e,o,r);else!t.json&&!so.call(r,i)&&so.call(e,i)&&(t.line=s||t.line,t.lineStart=l||t.lineStart,t.position=u||t.position,de(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):e[i]=o,delete r[i];return e}function IT(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):de(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function Et(t,e,r){for(var n=0,i=t.input.charCodeAt(t.position);i!==0;){for(;Xo(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(zn(i))for(IT(t),i=t.input.charCodeAt(t.position),n++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return r!==-1&&n!==0&&t.lineIndent<r&&wm(t,"deficient indentation"),n}function Rm(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||Rr(r)))}function CT(t,e){e===1?t.result+=" ":e>1&&(t.result+=Mt.repeat(`
`,e-1))}function EG(t,e,r){var n,i,o,s,l,u,m,d,g=t.kind,y=t.result,T;if(T=t.input.charCodeAt(t.position),Rr(T)||Ts(T)||T===35||T===38||T===42||T===33||T===124||T===62||T===39||T===34||T===37||T===64||T===96||(T===63||T===45)&&(i=t.input.charCodeAt(t.position+1),Rr(i)||r&&Ts(i)))return!1;for(t.kind="scalar",t.result="",o=s=t.position,l=!1;T!==0;){if(T===58){if(i=t.input.charCodeAt(t.position+1),Rr(i)||r&&Ts(i))break}else if(T===35){if(n=t.input.charCodeAt(t.position-1),Rr(n))break}else{if(t.position===t.lineStart&&Rm(t)||r&&Ts(T))break;if(zn(T))if(u=t.line,m=t.lineStart,d=t.lineIndent,Et(t,!1,-1),t.lineIndent>=e){l=!0,T=t.input.charCodeAt(t.position);continue}else{t.position=s,t.line=u,t.lineStart=m,t.lineIndent=d;break}}l&&(ao(t,o,s,!1),CT(t,t.line-u),o=s=t.position,l=!1),Xo(T)||(s=t.position+1),T=t.input.charCodeAt(++t.position)}return ao(t,o,s,!1),t.result?!0:(t.kind=g,t.result=y,!1)}function _G(t,e){var r,n,i;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(ao(t,n,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)n=t.position,t.position++,i=t.position;else return!0;else zn(r)?(ao(t,n,i,!0),CT(t,Et(t,!1,e)),n=i=t.position):t.position===t.lineStart&&Rm(t)?de(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);de(t,"unexpected end of the stream within a single quoted scalar")}function RG(t,e){var r,n,i,o,s,l;if(l=t.input.charCodeAt(t.position),l!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(l=t.input.charCodeAt(t.position))!==0;){if(l===34)return ao(t,r,t.position,!0),t.position++,!0;if(l===92){if(ao(t,r,t.position,!0),l=t.input.charCodeAt(++t.position),zn(l))Et(t,!1,e);else if(l<256&&zk[l])t.result+=qk[l],t.position++;else if((s=SG(l))>0){for(i=s,o=0;i>0;i--)l=t.input.charCodeAt(++t.position),(s=TG(l))>=0?o=(o<<4)+s:de(t,"expected hexadecimal character");t.result+=bG(o),t.position++}else de(t,"unknown escape sequence");r=n=t.position}else zn(l)?(ao(t,r,n,!0),CT(t,Et(t,!1,e)),r=n=t.position):t.position===t.lineStart&&Rm(t)?de(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}de(t,"unexpected end of the stream within a double quoted scalar")}function kG(t,e){var r=!0,n,i,o,s=t.tag,l,u=t.anchor,m,d,g,y,T,w=Object.create(null),E,U,V,z;if(z=t.input.charCodeAt(t.position),z===91)d=93,T=!1,l=[];else if(z===123)d=125,T=!0,l={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=l),z=t.input.charCodeAt(++t.position);z!==0;){if(Et(t,!0,e),z=t.input.charCodeAt(t.position),z===d)return t.position++,t.tag=s,t.anchor=u,t.kind=T?"mapping":"sequence",t.result=l,!0;r?z===44&&de(t,"expected the node content, but found ','"):de(t,"missed comma between flow collection entries"),U=E=V=null,g=y=!1,z===63&&(m=t.input.charCodeAt(t.position+1),Rr(m)&&(g=y=!0,t.position++,Et(t,!0,e))),n=t.line,i=t.lineStart,o=t.position,vs(t,e,vm,!1,!0),U=t.tag,E=t.result,Et(t,!0,e),z=t.input.charCodeAt(t.position),(y||t.line===n)&&z===58&&(g=!0,z=t.input.charCodeAt(++t.position),Et(t,!0,e),vs(t,e,vm,!1,!0),V=t.result),T?Ss(t,l,w,U,E,V,n,i,o):g?l.push(Ss(t,null,w,U,E,V,n,i,o)):l.push(E),Et(t,!0,e),z=t.input.charCodeAt(t.position),z===44?(r=!0,z=t.input.charCodeAt(++t.position)):r=!1}de(t,"unexpected end of the stream within a flow collection")}function AG(t,e){var r,n,i=RT,o=!1,s=!1,l=e,u=0,m=!1,d,g;if(g=t.input.charCodeAt(t.position),g===124)n=!1;else if(g===62)n=!0;else return!1;for(t.kind="scalar",t.result="";g!==0;)if(g=t.input.charCodeAt(++t.position),g===43||g===45)RT===i?i=g===43?wk:gG:de(t,"repeat of a chomping mode identifier");else if((d=vG(g))>=0)d===0?de(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?de(t,"repeat of an indentation width identifier"):(l=e+d-1,s=!0);else break;if(Xo(g)){do g=t.input.charCodeAt(++t.position);while(Xo(g));if(g===35)do g=t.input.charCodeAt(++t.position);while(!zn(g)&&g!==0)}for(;g!==0;){for(IT(t),t.lineIndent=0,g=t.input.charCodeAt(t.position);(!s||t.lineIndent<l)&&g===32;)t.lineIndent++,g=t.input.charCodeAt(++t.position);if(!s&&t.lineIndent>l&&(l=t.lineIndent),zn(g)){u++;continue}if(t.lineIndent<l){i===wk?t.result+=Mt.repeat(`
`,o?1+u:u):i===RT&&o&&(t.result+=`
`);break}for(n?Xo(g)?(m=!0,t.result+=Mt.repeat(`
`,o?1+u:u)):m?(m=!1,t.result+=Mt.repeat(`
`,u+1)):u===0?o&&(t.result+=" "):t.result+=Mt.repeat(`
`,u):t.result+=Mt.repeat(`
`,o?1+u:u),o=!0,s=!0,u=0,r=t.position;!zn(g)&&g!==0;)g=t.input.charCodeAt(++t.position);ao(t,r,t.position,!1)}return!0}function Ak(t,e){var r,n=t.tag,i=t.anchor,o=[],s,l=!1,u;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),u=t.input.charCodeAt(t.position);u!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,de(t,"tab characters must not be used in indentation")),!(u!==45||(s=t.input.charCodeAt(t.position+1),!Rr(s))));){if(l=!0,t.position++,Et(t,!0,-1)&&t.lineIndent<=e){o.push(null),u=t.input.charCodeAt(t.position);continue}if(r=t.line,vs(t,e,Wk,!1,!0),o.push(t.result),Et(t,!0,-1),u=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&u!==0)de(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return l?(t.tag=n,t.anchor=i,t.kind="sequence",t.result=o,!0):!1}function PG(t,e,r){var n,i,o,s,l,u,m=t.tag,d=t.anchor,g={},y=Object.create(null),T=null,w=null,E=null,U=!1,V=!1,z;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=g),z=t.input.charCodeAt(t.position);z!==0;){if(!U&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,de(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),o=t.line,(z===63||z===58)&&Rr(n))z===63?(U&&(Ss(t,g,y,T,w,null,s,l,u),T=w=E=null),V=!0,U=!0,i=!0):U?(U=!1,i=!0):de(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,z=n;else{if(s=t.line,l=t.lineStart,u=t.position,!vs(t,r,Vk,!1,!0))break;if(t.line===o){for(z=t.input.charCodeAt(t.position);Xo(z);)z=t.input.charCodeAt(++t.position);if(z===58)z=t.input.charCodeAt(++t.position),Rr(z)||de(t,"a whitespace character is expected after the key-value separator within a block mapping"),U&&(Ss(t,g,y,T,w,null,s,l,u),T=w=E=null),V=!0,U=!1,i=!1,T=t.tag,w=t.result;else if(V)de(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=m,t.anchor=d,!0}else if(V)de(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=m,t.anchor=d,!0}if((t.line===o||t.lineIndent>e)&&(U&&(s=t.line,l=t.lineStart,u=t.position),vs(t,e,bm,!0,i)&&(U?w=t.result:E=t.result),U||(Ss(t,g,y,T,w,E,s,l,u),T=w=E=null),Et(t,!0,-1),z=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&z!==0)de(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return U&&Ss(t,g,y,T,w,null,s,l,u),V&&(t.tag=m,t.anchor=d,t.kind="mapping",t.result=g),V}function MG(t){var e,r=!1,n=!1,i,o,s;if(s=t.input.charCodeAt(t.position),s!==33)return!1;if(t.tag!==null&&de(t,"duplication of a tag property"),s=t.input.charCodeAt(++t.position),s===60?(r=!0,s=t.input.charCodeAt(++t.position)):s===33?(n=!0,i="!!",s=t.input.charCodeAt(++t.position)):i="!",e=t.position,r){do s=t.input.charCodeAt(++t.position);while(s!==0&&s!==62);t.position<t.length?(o=t.input.slice(e,t.position),s=t.input.charCodeAt(++t.position)):de(t,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!Rr(s);)s===33&&(n?de(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),$k.test(i)||de(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),s=t.input.charCodeAt(++t.position);o=t.input.slice(e,t.position),xG.test(o)&&de(t,"tag suffix cannot contain flow indicator characters")}o&&!jk.test(o)&&de(t,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{de(t,"tag name is malformed: "+o)}return r?t.tag=o:so.call(t.tagMap,i)?t.tag=t.tagMap[i]+o:i==="!"?t.tag="!"+o:i==="!!"?t.tag="tag:yaml.org,2002:"+o:de(t,'undeclared tag handle "'+i+'"'),!0}function DG(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&de(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!Rr(r)&&!Ts(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&de(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function FG(t){var e,r,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!Rr(n)&&!Ts(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&de(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),so.call(t.anchorMap,r)||de(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],Et(t,!0,-1),!0}function vs(t,e,r,n,i){var o,s,l,u=1,m=!1,d=!1,g,y,T,w,E,U;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=s=l=bm===r||Wk===r,n&&Et(t,!0,-1)&&(m=!0,t.lineIndent>e?u=1:t.lineIndent===e?u=0:t.lineIndent<e&&(u=-1)),u===1)for(;MG(t)||DG(t);)Et(t,!0,-1)?(m=!0,l=o,t.lineIndent>e?u=1:t.lineIndent===e?u=0:t.lineIndent<e&&(u=-1)):l=!1;if(l&&(l=m||i),(u===1||bm===r)&&(vm===r||Vk===r?E=e:E=e+1,U=t.position-t.lineStart,u===1?l&&(Ak(t,U)||PG(t,U,E))||kG(t,E)?d=!0:(s&&AG(t,E)||_G(t,E)||RG(t,E)?d=!0:FG(t)?(d=!0,(t.tag!==null||t.anchor!==null)&&de(t,"alias node should not have any properties")):EG(t,E,vm===r)&&(d=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):u===0&&(d=l&&Ak(t,U))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&de(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),g=0,y=t.implicitTypes.length;g<y;g+=1)if(w=t.implicitTypes[g],w.resolve(t.result)){t.result=w.construct(t.result),t.tag=w.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(so.call(t.typeMap[t.kind||"fallback"],t.tag))w=t.typeMap[t.kind||"fallback"][t.tag];else for(w=null,T=t.typeMap.multi[t.kind||"fallback"],g=0,y=T.length;g<y;g+=1)if(t.tag.slice(0,T[g].tag.length)===T[g].tag){w=T[g];break}w||de(t,"unknown tag !<"+t.tag+">"),t.result!==null&&w.kind!==t.kind&&de(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+w.kind+'", not "'+t.kind+'"'),w.resolve(t.result,t.tag)?(t.result=w.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):de(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||d}function LG(t){var e=t.position,r,n,i,o=!1,s;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(s=t.input.charCodeAt(t.position))!==0&&(Et(t,!0,-1),s=t.input.charCodeAt(t.position),!(t.lineIndent>0||s!==37));){for(o=!0,s=t.input.charCodeAt(++t.position),r=t.position;s!==0&&!Rr(s);)s=t.input.charCodeAt(++t.position);for(n=t.input.slice(r,t.position),i=[],n.length<1&&de(t,"directive name must not be less than one character in length");s!==0;){for(;Xo(s);)s=t.input.charCodeAt(++t.position);if(s===35){do s=t.input.charCodeAt(++t.position);while(s!==0&&!zn(s));break}if(zn(s))break;for(r=t.position;s!==0&&!Rr(s);)s=t.input.charCodeAt(++t.position);i.push(t.input.slice(r,t.position))}s!==0&&IT(t),so.call(Rk,n)?Rk[n](t,n,i):wm(t,'unknown document directive "'+n+'"')}if(Et(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,Et(t,!0,-1)):o&&de(t,"directives end mark is expected"),vs(t,t.lineIndent-1,bm,!1,!0),Et(t,!0,-1),t.checkLineBreaks&&yG.test(t.input.slice(e,t.position))&&wm(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&Rm(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,Et(t,!0,-1));return}if(t.position<t.length-1)de(t,"end of the stream or a document separator is expected");else return}function Kk(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new wG(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,de(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)LG(r);return r.documents}function IG(t,e,r){e!==null&&typeof e=="object"&&typeof r>"u"&&(r=e,e=null);var n=Kk(t,r);if(typeof e!="function")return n;for(var i=0,o=n.length;i<o;i+=1)e(n[i])}function CG(t,e){var r=Kk(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new _r("expected a single document in the stream, but found more")}}var OG=IG,NG=CG,Qk={loadAll:OG,load:NG},Yk=Object.prototype.toString,Zk=Object.prototype.hasOwnProperty,OT=65279,UG=9,al=10,HG=13,BG=32,VG=33,WG=34,AT=35,$G=37,jG=38,zG=39,qG=42,Xk=44,GG=45,Em=58,KG=61,QG=62,YG=63,ZG=64,Jk=91,eA=93,XG=96,tA=123,JG=124,rA=125,nr={};nr[0]="\\0";nr[7]="\\a";nr[8]="\\b";nr[9]="\\t";nr[10]="\\n";nr[11]="\\v";nr[12]="\\f";nr[13]="\\r";nr[27]="\\e";nr[34]='\\"';nr[92]="\\\\";nr[133]="\\N";nr[160]="\\_";nr[8232]="\\L";nr[8233]="\\P";var eK=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],tK=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function rK(t,e){var r,n,i,o,s,l,u;if(e===null)return{};for(r={},n=Object.keys(e),i=0,o=n.length;i<o;i+=1)s=n[i],l=String(e[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),u=t.compiledTypeMap.fallback[s],u&&Zk.call(u.styleAliases,l)&&(l=u.styleAliases[l]),r[s]=l;return r}function nK(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else if(t<=4294967295)r="U",n=8;else throw new _r("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+Mt.repeat("0",n-e.length)+e}var iK=1,sl=2;function oK(t){this.schema=t.schema||LT,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=Mt.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=rK(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?sl:iK,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Pk(t,e){for(var r=Mt.repeat(" ",e),n=0,i=-1,o="",s,l=t.length;n<l;)i=t.indexOf(`
`,n),i===-1?(s=t.slice(n),n=l):(s=t.slice(n,i+1),n=i+1),s.length&&s!==`
`&&(o+=r),o+=s;return o}function PT(t,e){return`
`+Mt.repeat(" ",t.indent*e)}function aK(t,e){var r,n,i;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(i=t.implicitTypes[r],i.resolve(e))return!0;return!1}function _m(t){return t===BG||t===UG}function cl(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==OT||65536<=t&&t<=1114111}function Mk(t){return cl(t)&&t!==OT&&t!==HG&&t!==al}function Dk(t,e,r){var n=Mk(t),i=n&&!_m(t);return(r?n:n&&t!==Xk&&t!==Jk&&t!==eA&&t!==tA&&t!==rA)&&t!==AT&&!(e===Em&&!i)||Mk(e)&&!_m(e)&&t===AT||e===Em&&i}function sK(t){return cl(t)&&t!==OT&&!_m(t)&&t!==GG&&t!==YG&&t!==Em&&t!==Xk&&t!==Jk&&t!==eA&&t!==tA&&t!==rA&&t!==AT&&t!==jG&&t!==qG&&t!==VG&&t!==JG&&t!==KG&&t!==QG&&t!==zG&&t!==WG&&t!==$G&&t!==ZG&&t!==XG}function cK(t){return!_m(t)&&t!==Em}function il(t,e){var r=t.charCodeAt(e),n;return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function nA(t){var e=/^\n* /;return e.test(t)}var iA=1,MT=2,oA=3,aA=4,xs=5;function lK(t,e,r,n,i,o,s,l){var u,m=0,d=null,g=!1,y=!1,T=n!==-1,w=-1,E=sK(il(t,0))&&cK(il(t,t.length-1));if(e||s)for(u=0;u<t.length;m>=65536?u+=2:u++){if(m=il(t,u),!cl(m))return xs;E=E&&Dk(m,d,l),d=m}else{for(u=0;u<t.length;m>=65536?u+=2:u++){if(m=il(t,u),m===al)g=!0,T&&(y=y||u-w-1>n&&t[w+1]!==" ",w=u);else if(!cl(m))return xs;E=E&&Dk(m,d,l),d=m}y=y||T&&u-w-1>n&&t[w+1]!==" "}return!g&&!y?E&&!s&&!i(t)?iA:o===sl?xs:MT:r>9&&nA(t)?xs:s?o===sl?xs:MT:y?aA:oA}function uK(t,e,r,n,i){t.dump=function(){if(e.length===0)return t.quotingType===sl?'""':"''";if(!t.noCompatMode&&(eK.indexOf(e)!==-1||tK.test(e)))return t.quotingType===sl?'"'+e+'"':"'"+e+"'";var o=t.indent*Math.max(1,r),s=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),l=n||t.flowLevel>-1&&r>=t.flowLevel;function u(m){return aK(t,m)}switch(lK(e,l,t.indent,s,u,t.quotingType,t.forceQuotes&&!n,i)){case iA:return e;case MT:return"'"+e.replace(/'/g,"''")+"'";case oA:return"|"+Fk(e,t.indent)+Lk(Pk(e,o));case aA:return">"+Fk(e,t.indent)+Lk(Pk(pK(e,s),o));case xs:return'"'+mK(e)+'"';default:throw new _r("impossible error: invalid scalar style")}}()}function Fk(t,e){var r=nA(t)?String(e):"",n=t[t.length-1]===`
`,i=n&&(t[t.length-2]===`
`||t===`
`),o=i?"+":n?"":"-";return r+o+`
`}function Lk(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function pK(t,e){for(var r=/(\n+)([^\n]*)/g,n=function(){var m=t.indexOf(`
`);return m=m!==-1?m:t.length,r.lastIndex=m,Ik(t.slice(0,m),e)}(),i=t[0]===`
`||t[0]===" ",o,s;s=r.exec(t);){var l=s[1],u=s[2];o=u[0]===" ",n+=l+(!i&&!o&&u!==""?`
`:"")+Ik(u,e),i=o}return n}function Ik(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,n,i=0,o,s=0,l=0,u="";n=r.exec(t);)l=n.index,l-i>e&&(o=s>i?s:l,u+=`
`+t.slice(i,o),i=o+1),s=l;return u+=`
`,t.length-i>e&&s>i?u+=t.slice(i,s)+`
`+t.slice(s+1):u+=t.slice(i),u.slice(1)}function mK(t){for(var e="",r=0,n,i=0;i<t.length;r>=65536?i+=2:i++)r=il(t,i),n=nr[r],!n&&cl(r)?(e+=t[i],r>=65536&&(e+=t[i+1])):e+=n||nK(r);return e}function fK(t,e,r){var n="",i=t.tag,o,s,l;for(o=0,s=r.length;o<s;o+=1)l=r[o],t.replacer&&(l=t.replacer.call(r,String(o),l)),(_i(t,e,l,!1,!1)||typeof l>"u"&&_i(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=i,t.dump="["+n+"]"}function Ck(t,e,r,n){var i="",o=t.tag,s,l,u;for(s=0,l=r.length;s<l;s+=1)u=r[s],t.replacer&&(u=t.replacer.call(r,String(s),u)),(_i(t,e+1,u,!0,!0,!1,!0)||typeof u>"u"&&_i(t,e+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=PT(t,e)),t.dump&&al===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=o,t.dump=i||"[]"}function dK(t,e,r){var n="",i=t.tag,o=Object.keys(r),s,l,u,m,d;for(s=0,l=o.length;s<l;s+=1)d="",n!==""&&(d+=", "),t.condenseFlow&&(d+='"'),u=o[s],m=r[u],t.replacer&&(m=t.replacer.call(r,u,m)),_i(t,e,u,!1,!1)&&(t.dump.length>1024&&(d+="? "),d+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),_i(t,e,m,!1,!1)&&(d+=t.dump,n+=d));t.tag=i,t.dump="{"+n+"}"}function gK(t,e,r,n){var i="",o=t.tag,s=Object.keys(r),l,u,m,d,g,y;if(t.sortKeys===!0)s.sort();else if(typeof t.sortKeys=="function")s.sort(t.sortKeys);else if(t.sortKeys)throw new _r("sortKeys must be a boolean or a function");for(l=0,u=s.length;l<u;l+=1)y="",(!n||i!=="")&&(y+=PT(t,e)),m=s[l],d=r[m],t.replacer&&(d=t.replacer.call(r,m,d)),_i(t,e+1,m,!0,!0,!0)&&(g=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,g&&(t.dump&&al===t.dump.charCodeAt(0)?y+="?":y+="? "),y+=t.dump,g&&(y+=PT(t,e)),_i(t,e+1,d,!0,g)&&(t.dump&&al===t.dump.charCodeAt(0)?y+=":":y+=": ",y+=t.dump,i+=y));t.tag=o,t.dump=i||"{}"}function Ok(t,e,r){var n,i,o,s,l,u;for(i=r?t.explicitTypes:t.implicitTypes,o=0,s=i.length;o<s;o+=1)if(l=i[o],(l.instanceOf||l.predicate)&&(!l.instanceOf||typeof e=="object"&&e instanceof l.instanceOf)&&(!l.predicate||l.predicate(e))){if(r?l.multi&&l.representName?t.tag=l.representName(e):t.tag=l.tag:t.tag="?",l.represent){if(u=t.styleMap[l.tag]||l.defaultStyle,Yk.call(l.represent)==="[object Function]")n=l.represent(e,u);else if(Zk.call(l.represent,u))n=l.represent[u](e,u);else throw new _r("!<"+l.tag+'> tag resolver accepts not "'+u+'" style');t.dump=n}return!0}return!1}function _i(t,e,r,n,i,o,s){t.tag=null,t.dump=r,Ok(t,r,!1)||Ok(t,r,!0);var l=Yk.call(t.dump),u=n,m;n&&(n=t.flowLevel<0||t.flowLevel>e);var d=l==="[object Object]"||l==="[object Array]",g,y;if(d&&(g=t.duplicates.indexOf(r),y=g!==-1),(t.tag!==null&&t.tag!=="?"||y||t.indent!==2&&e>0)&&(i=!1),y&&t.usedDuplicates[g])t.dump="*ref_"+g;else{if(d&&y&&!t.usedDuplicates[g]&&(t.usedDuplicates[g]=!0),l==="[object Object]")n&&Object.keys(t.dump).length!==0?(gK(t,e,t.dump,i),y&&(t.dump="&ref_"+g+t.dump)):(dK(t,e,t.dump),y&&(t.dump="&ref_"+g+" "+t.dump));else if(l==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!s&&e>0?Ck(t,e-1,t.dump,i):Ck(t,e,t.dump,i),y&&(t.dump="&ref_"+g+t.dump)):(fK(t,e,t.dump),y&&(t.dump="&ref_"+g+" "+t.dump));else if(l==="[object String]")t.tag!=="?"&&uK(t,t.dump,e,o,u);else{if(l==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new _r("unacceptable kind of an object to dump "+l)}t.tag!==null&&t.tag!=="?"&&(m=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?m="!"+m:m.slice(0,18)==="tag:yaml.org,2002:"?m="!!"+m.slice(18):m="!<"+m+">",t.dump=m+" "+t.dump)}return!0}function hK(t,e){var r=[],n=[],i,o;for(DT(t,r,n),i=0,o=n.length;i<o;i+=1)e.duplicates.push(r[n[i]]);e.usedDuplicates=new Array(o)}function DT(t,e,r){var n,i,o;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(e.push(t),Array.isArray(t))for(i=0,o=t.length;i<o;i+=1)DT(t[i],e,r);else for(n=Object.keys(t),i=0,o=n.length;i<o;i+=1)DT(t[n[i]],e,r)}function yK(t,e){e=e||{};var r=new oK(e);r.noRefs||hK(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),_i(r,0,n,!0,!0)?r.dump+`
`:""}var xK=yK,TK={dump:xK};function NT(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var sA=zt;var cA=LT,SK=Qk.load,kpe=Qk.loadAll,lA=TK.dump;var Ape=NT("safeLoad","load"),Ppe=NT("safeLoadAll","loadAll"),Mpe=NT("safeDump","dump");var km=class{constructor(e,r){this.data=e;this.opts=r}represent(){let e=lA(this.data,Object.assign({replacer:EK,schema:bK},this.opts));return e=e.trim(),e.includes(`
`)&&(e=`
`+e),e}},vK=new sA("!format",{kind:"scalar",resolve:()=>!1,instanceOf:km,represent:t=>t.represent()}),bK=cA.extend({implicit:[vK]}),UT=t=>typeof t=="object"&&t!=null;function wK(t){if(UT(t))return Object.values(t).every(e=>!UT(e)&&!Array.isArray(e));if(Array.isArray(t))return t.every(e=>!UT(e)&&!Array.isArray(e))}function EK(t,e){return t===""?e:wK(e)?new km(e,{flowLevel:0}):e}var HT=["addSelection","addSelectionAfter","addSelectionBefore","breakLine","clearAndSetSelection","copyToClipboard","cutToClipboard","decrement","deselect","editNewLineAfter","editNewLineBefore","experimental.setInstanceReference","extractVariable","findInDocument","findInWorkspace","flashTargets","foldRegion","followLink","followLinkAside","gitAccept","gitRevert","gitStage","gitUnstage","increment","indentLine","insertCopyAfter","insertCopyBefore","insertEmptyLineAfter","insertEmptyLineBefore","insertEmptyLinesAround","joinLines","outdentLine","randomizeTargets","remove","rename","revealDefinition","revealTypeDefinition","reverseTargets","scrollToBottom","scrollToCenter","scrollToTop","setSelection","setSelectionAfter","setSelectionBefore","showDebugHover","showHover","showQuickFix","showReferences","sortTargets","toggleLineBreakpoint","toggleLineComment","unfoldRegion","private.getTargets","private.setKeyboardTarget","private.showParseTree"],RK=["callAsFunction","editNew","executeCommand","generateSnippet","getText","highlight","insertSnippet","moveToTarget","pasteFromClipboard","replace","replaceWithTarget","rewrapWithPairedDelimiter","swapTargets","wrapWithPairedDelimiter","wrapWithSnippet","parsed"],pA=[...HT,...RK];var kK=["angleBrackets","backtickQuotes","curlyBrackets","doubleQuotes","escapedDoubleQuotes","escapedParentheses","escapedSingleQuotes","escapedSquareBrackets","parentheses","singleQuotes","squareBrackets","tripleBacktickQuotes","tripleDoubleQuotes","tripleSingleQuotes"],AK=["string","any","collectionBoundary"],Am=[...kK,...AK],Jo=["argumentOrParameter","argumentList","anonymousFunction","attribute","branch","class","className","collectionItem","collectionKey","comment","private.fieldAccess","functionCall","functionCallee","functionName","ifStatement","instance","list","map","name","namedFunction","regularExpression","statement","string","type","value","condition","section","sectionLevelOne","sectionLevelTwo","sectionLevelThree","sectionLevelFour","sectionLevelFive","sectionLevelSix","selector","private.switchStatementSubject","unit","xmlBothTags","xmlElement","xmlEndTag","xmlStartTag","part","chapter","subSection","subSubSection","namedParagraph","subParagraph","environment","character","word","token","identifier","line","sentence","paragraph","boundedParagraph","document","nonWhitespaceSequence","boundedNonWhitespaceSequence","url","notebookCell","command","textFragment","disqualifyDelimiter","pairDelimiter"];function mA(t){return Jo.includes(t.type)}var fA=["simpleScopeTypeType","complexScopeTypeType","customRegex","pairedDelimiter","action","customAction","grapheme"],ll=class extends Error{constructor(e){super(e),this.name="NeedsInitialTalonUpdateError"}},bs=class extends Error{constructor(){super("Custom spoken forms are not currently supported in this ide"),this.name="DisabledCustomSpokenFormsError"}};function ul(t){return t.replace(/([A-Z])/g," $1").split(" ").map(e=>e.toLowerCase()).join(" ")}function ea(t){return t.version>=7}var co=class{constructor(e){this.hashFunction=e;this.map={}}hash(e){return this.hashFunction(e).join("\0")}set(e,r){return this.map[this.hash(e)]=r,this}has(e){return this.hash(e)in this.map}get(e){return this.map[this.hash(e)]}delete(e){return delete this.map[this.hash(e)],this}clear(){return this.map={},this}};var ws=class extends Map{constructor(r){super();this.getDefaultValue=r}get(r){let n=super.get(r);if(n!=null)return n;let i=this.getDefaultValue(r);return this.set(r,i),i}};function dA(...t){return{dispose(){t.forEach(({dispose:e})=>{try{e()}catch(r){console.error(r)}})}}}function pl(t){return typeof t=="string"||t instanceof String}function Pm(t){let[e,...r]=t;return MK(e,r)}function MK(t,e){let r;if(pl(t)){let n=t,[i,o,...s]=e;r={version:0,spokenForm:n,action:i,targets:o,extraArgs:s,usePrePhraseSnapshot:!1}}else r=t;return r}function ml(t,e){let r=new Map;return t.forEach(n=>{let i=e(n),o;r.has(i)?o=r.get(i):(o=[],r.set(i,o)),o.push(n)}),r}function gA(t){for(let e of t)return!1;return!0}function Ri(t){return Object.keys(t)}function fl(t,e){return`${t}.${e}`}function hA(t,e,r){if(t.length<2)return[...t];if(t.length===2)return e(t[0],t[1])?[t[0]]:[...t];let n=[],i=t.reduce((o,s)=>{let l=r(s),u=o.get(l);return u==null?(o.set(l,[s]),o):(o.get(l).push(s),u.length===2&&n.push(l),o)},new Map);return n.length===0?[...t]:(n.forEach(o=>{i.set(o,Yc(i.get(o),e))}),t.flatMap(o=>{let s=r(o),l=i.get(s);if(l==null||l.length===0)return[];let u=l[0];return e(u,o)?(l.shift(),u):[]}))}function ta(t,e){if(t.length!==e.length)throw new Error("Lists must have the same length");return t.map((r,n)=>[r,e[n]])}var bA=Symbol.for("immer-nothing"),yA=Symbol.for("immer-draftable"),jr=Symbol.for("immer-state"),DK=process.env.NODE_ENV!=="production"?[function(t){return`The plugin for '${t}' has not been loaded into Immer. To enable the plugin, import and call \`enable${t}()\` when initializing your application.`},function(t){return`produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '${t}'`},"This object has been frozen and should not be mutated",function(t){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+t},"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.","Immer forbids circular references","The first or second argument to `produce` must be a function","The third argument to `produce` must be a function or undefined","First argument to `createDraft` must be a plain object, an array, or an immerable object","First argument to `finishDraft` must be a draft returned by `createDraft`",function(t){return`'current' expects a draft, got: ${t}`},"Object.defineProperty() cannot be used on an Immer draft","Object.setPrototypeOf() cannot be used on an Immer draft","Immer only supports deleting array indices","Immer only supports setting array indices and the 'length' property",function(t){return`'original' expects a draft, got: ${t}`}]:[];function kr(t,...e){if(process.env.NODE_ENV!=="production"){let r=DK[t],n=typeof r=="function"?r.apply(null,e):r;throw new Error(`[Immer] ${n}`)}throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Es=Object.getPrototypeOf;function _s(t){return!!t&&!!t[jr]}function na(t){return t?wA(t)||Array.isArray(t)||!!t[yA]||!!t.constructor?.[yA]||Im(t)||Cm(t):!1}var FK=Object.prototype.constructor.toString();function wA(t){if(!t||typeof t!="object")return!1;let e=Es(t);if(e===null)return!0;let r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===FK}function Mm(t,e){Lm(t)===0?Reflect.ownKeys(t).forEach(r=>{e(r,t[r],t)}):t.forEach((r,n)=>e(n,r,t))}function Lm(t){let e=t[jr];return e?e.type_:Array.isArray(t)?1:Im(t)?2:Cm(t)?3:0}function WT(t,e){return Lm(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function EA(t,e,r){let n=Lm(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function LK(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Im(t){return t instanceof Map}function Cm(t){return t instanceof Set}function ra(t){return t.copy_||t.base_}function $T(t,e){if(Im(t))return new Map(t);if(Cm(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);let r=wA(t);if(e===!0||e==="class_only"&&!r){let n=Object.getOwnPropertyDescriptors(t);delete n[jr];let i=Reflect.ownKeys(n);for(let o=0;o<i.length;o++){let s=i[o],l=n[s];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[s]={configurable:!0,writable:!0,enumerable:l.enumerable,value:t[s]})}return Object.create(Es(t),n)}else{let n=Es(t);if(n!==null&&r)return{...t};let i=Object.create(n);return Object.assign(i,t)}}function KT(t,e=!1){return Om(t)||_s(t)||!na(t)||(Lm(t)>1&&(t.set=t.add=t.clear=t.delete=IK),Object.freeze(t),e&&Object.entries(t).forEach(([r,n])=>KT(n,!0))),t}function IK(){kr(2)}function Om(t){return Object.isFrozen(t)}var CK={};function ia(t){let e=CK[t];return e||kr(0,t),e}var dl;function _A(){return dl}function OK(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function xA(t,e){e&&(ia("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function jT(t){zT(t),t.drafts_.forEach(NK),t.drafts_=null}function zT(t){t===dl&&(dl=t.parent_)}function TA(t){return dl=OK(dl,t)}function NK(t){let e=t[jr];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function SA(t,e){e.unfinalizedDrafts_=e.drafts_.length;let r=e.drafts_[0];return t!==void 0&&t!==r?(r[jr].modified_&&(jT(e),kr(4)),na(t)&&(t=Dm(e,t),e.parent_||Fm(e,t)),e.patches_&&ia("Patches").generateReplacementPatches_(r[jr].base_,t,e.patches_,e.inversePatches_)):t=Dm(e,r,[]),jT(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==bA?t:void 0}function Dm(t,e,r){if(Om(e))return e;let n=e[jr];if(!n)return Mm(e,(i,o)=>vA(t,n,e,i,o,r)),e;if(n.scope_!==t)return e;if(!n.modified_)return Fm(t,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;let i=n.copy_,o=i,s=!1;n.type_===3&&(o=new Set(i),i.clear(),s=!0),Mm(o,(l,u)=>vA(t,n,i,l,u,r,s)),Fm(t,i,!1),r&&t.patches_&&ia("Patches").generatePatches_(n,r,t.patches_,t.inversePatches_)}return n.copy_}function vA(t,e,r,n,i,o,s){if(process.env.NODE_ENV!=="production"&&i===r&&kr(5),_s(i)){let l=o&&e&&e.type_!==3&&!WT(e.assigned_,n)?o.concat(n):void 0,u=Dm(t,i,l);if(EA(r,n,u),_s(u))t.canAutoFreeze_=!1;else return}else s&&r.add(i);if(na(i)&&!Om(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;Dm(t,i),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&Fm(t,i)}}function Fm(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&KT(e,r)}function UK(t,e){let r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:_A(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1},i=n,o=QT;r&&(i=[n],o=gl);let{revoke:s,proxy:l}=Proxy.revocable(i,o);return n.draft_=l,n.revoke_=s,l}var QT={get(t,e){if(e===jr)return t;let r=ra(t);if(!WT(r,e))return HK(t,r,e);let n=r[e];return t.finalized_||!na(n)?n:n===BT(t.base_,e)?(VT(t),t.copy_[e]=GT(n,t)):n},has(t,e){return e in ra(t)},ownKeys(t){return Reflect.ownKeys(ra(t))},set(t,e,r){let n=RA(ra(t),e);if(n?.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){let i=BT(ra(t),e),o=i?.[jr];if(o&&o.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(LK(r,i)&&(r!==void 0||WT(t.base_,e)))return!0;VT(t),qT(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return BT(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,VT(t),qT(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){let r=ra(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){kr(11)},getPrototypeOf(t){return Es(t.base_)},setPrototypeOf(){kr(12)}},gl={};Mm(QT,(t,e)=>{gl[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});gl.deleteProperty=function(t,e){return process.env.NODE_ENV!=="production"&&isNaN(parseInt(e))&&kr(13),gl.set.call(this,t,e,void 0)};gl.set=function(t,e,r){return process.env.NODE_ENV!=="production"&&e!=="length"&&isNaN(parseInt(e))&&kr(14),QT.set.call(this,t[0],e,r,t[0])};function BT(t,e){let r=t[jr];return(r?ra(r):t)[e]}function HK(t,e,r){let n=RA(e,r);return n?"value"in n?n.value:n.get?.call(t.draft_):void 0}function RA(t,e){if(!(e in t))return;let r=Es(t);for(;r;){let n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Es(r)}}function qT(t){t.modified_||(t.modified_=!0,t.parent_&&qT(t.parent_))}function VT(t){t.copy_||(t.copy_=$T(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var BK=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){let o=r;r=e;let s=this;return function(u=o,...m){return s.produce(u,d=>r.call(this,d,...m))}}typeof r!="function"&&kr(6),n!==void 0&&typeof n!="function"&&kr(7);let i;if(na(e)){let o=TA(this),s=GT(e,void 0),l=!0;try{i=r(s),l=!1}finally{l?jT(o):zT(o)}return xA(o,n),SA(i,o)}else if(!e||typeof e!="object"){if(i=r(e),i===void 0&&(i=e),i===bA&&(i=void 0),this.autoFreeze_&&KT(i,!0),n){let o=[],s=[];ia("Patches").generateReplacementPatches_(e,i,o,s),n(o,s)}return i}else kr(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(s,...l)=>this.produceWithPatches(s,u=>e(u,...l));let n,i;return[this.produce(e,r,(s,l)=>{n=s,i=l}),n,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){na(t)||kr(8),_s(t)&&(t=VK(t));let e=TA(this),r=GT(t,void 0);return r[jr].isManual_=!0,zT(e),r}finishDraft(t,e){let r=t&&t[jr];(!r||!r.isManual_)&&kr(9);let{scope_:n}=r;return xA(n,e),SA(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){let i=e[r];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}r>-1&&(e=e.slice(r+1));let n=ia("Patches").applyPatches_;return _s(t)?n(t,e):this.produce(t,i=>n(i,e))}};function GT(t,e){let r=Im(t)?ia("MapSet").proxyMap_(t,e):Cm(t)?ia("MapSet").proxySet_(t,e):UK(t,e);return(e?e.scope_:_A()).drafts_.push(r),r}function VK(t){return _s(t)||kr(10,t),kA(t)}function kA(t){if(!na(t)||Om(t))return t;let e=t[jr],r;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=$T(t,e.scope_.immer_.useStrictShallowCopy_)}else r=$T(t,!0);return Mm(r,(n,i)=>{EA(r,n,kA(i))}),e&&(e.finalized_=!1),r}var zr=new BK,Nm=zr.produce,Mde=zr.produceWithPatches.bind(zr),Dde=zr.setAutoFreeze.bind(zr),Fde=zr.setUseStrictShallowCopy.bind(zr),Lde=zr.applyPatches.bind(zr),Ide=zr.createDraft.bind(zr),Cde=zr.finishDraft.bind(zr);var qt=[];for(let t=0;t<256;++t)qt.push((t+256).toString(16).slice(1));function AA(t,e=0){return(qt[t[e+0]]+qt[t[e+1]]+qt[t[e+2]]+qt[t[e+3]]+"-"+qt[t[e+4]]+qt[t[e+5]]+"-"+qt[t[e+6]]+qt[t[e+7]]+"-"+qt[t[e+8]]+qt[t[e+9]]+"-"+qt[t[e+10]]+qt[t[e+11]]+qt[t[e+12]]+qt[t[e+13]]+qt[t[e+14]]+qt[t[e+15]]).toLowerCase()}var PA=require("crypto"),Hm=new Uint8Array(256),Um=Hm.length;function YT(){return Um>Hm.length-16&&((0,PA.randomFillSync)(Hm),Um=0),Hm.slice(Um,Um+=16)}var MA=require("crypto"),ZT={randomUUID:MA.randomUUID};function WK(t,e,r){if(ZT.randomUUID&&!e&&!t)return ZT.randomUUID();t=t||{};let n=t.random??t.rng?.()??YT();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){if(r=r||0,r<0||r+16>e.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let i=0;i<16;++i)e[r+i]=n[i];return e}return AA(n)}var XT=WK;function DA(t,e,r){if(e>=t.length)throw Error(`Expected at least ${e+1} ${r} but received only ${t.length}`);return t[e]}function Bm(t,e){if(Array.isArray(t))return t.map(r=>Bm(r,e));if(typeof t=="object"&&t!=null){if($K(t))return DA(e,t.index,"placeholder value");let r={};for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=Bm(t[n],e));return r}return t}function $K(t){return typeof t=="object"&&t!=null&&"type"in t&&t.type==="placeholder"}var Gm=Hr(LA(),1);var jK={blue:"blue",green:"green",red:"red",pink:"pink",yellow:"yellow",userColor1:"navy",userColor2:"apricot",default:null},zK={ex:"ex",fox:"fox",wing:"wing",hole:"hole",frame:"frame",curve:"curve",eye:"eye",play:"play",crosshairs:"cross",bolt:"bolt",default:null},Wm={cursor:"this",that:"that",source:"source",nothing:"nothing",keyboard:null,explicit:null,decoratedSymbol:null,lineNumber:null,range:null,target:null},$m={modulo100:"row",relativeUp:"up",relativeDown:"down"};function IA(t){let e=jK[t];if(e==null)throw Error(`Unknown hat color '${t}'`);return e}function CA(t){let e=zK[t];if(e==null)throw Error(`Unknown hat shape '${t}'`);return e}function JT(t,e){return Object.fromEntries(Object.entries(t).map(([r,n])=>[r,Object.fromEntries(Object.entries(n).map(([i,o])=>[i,e(o,r,i)]))]))}var qK=Object.fromEntries("air bat cap drum each fine gust harp sit jury crunch look made near odd pit quench red sun trap urge vest whale plex yank zip".split(" ").map((t,e)=>[String.fromCharCode(97+e),t])),GK=Object.fromEntries("zero one two three four five six seven eight nine".split(" ").map((t,e)=>[e.toString(),t])),KK={".":"dot",",":"comma",";":"semicolon",":":"colon","!":"bang","*":"asterisk","@":"at sign","&":"ampersand","?":"question","/":"slash","\\":"backslash","-":"dash","=":"equals","+":"plus","~":"tilde",_:"underscore","#":"hash","%":"percent","^":"caret","|":"pipe",$:"dollar","\xA3":"pound","'":"quote",'"':"double quote","`":"back tick","(":"paren",")":"right paren","{":"brace","}":"right brace","[":"square","]":"right square","<":"angle",">":"right angle","\uFFFD":"special"},OA={...qK,...GK,...KK};function lo(...t){return{defaultSpokenForms:t,isDisabledByDefault:!0,isPrivate:!1}}function Dt(...t){return{defaultSpokenForms:t,isDisabledByDefault:!0,isPrivate:!0}}var NA={pairedDelimiter:{curlyBrackets:"curly",angleBrackets:"diamond",escapedDoubleQuotes:"escaped quad",escapedSingleQuotes:"escaped twin",escapedParentheses:"escaped round",escapedSquareBrackets:"escaped box",doubleQuotes:"quad",parentheses:"round",backtickQuotes:"skis",squareBrackets:"box",singleQuotes:"twin",tripleDoubleQuotes:Dt("triple quad"),tripleSingleQuotes:Dt("triple twin"),tripleBacktickQuotes:Dt("triple skis"),any:"pair",string:"string",whitespace:"void",collectionBoundary:Dt("collection boundary")},simpleScopeTypeType:{argumentOrParameter:"arg",argumentList:"arg list",attribute:"attribute",functionCall:"call",functionCallee:"callee",className:"class name",class:"class",comment:"comment",functionName:"funk name",namedFunction:"funk",ifStatement:"if state",instance:"instance",collectionItem:"item",collectionKey:"key",anonymousFunction:"lambda",list:"list",map:"map",name:"name",regularExpression:"regex",section:"section",sectionLevelOne:lo("one section"),sectionLevelTwo:lo("two section"),sectionLevelThree:lo("three section"),sectionLevelFour:lo("four section"),sectionLevelFive:lo("five section"),sectionLevelSix:lo("six section"),selector:"selector",statement:"state",branch:"branch",type:"type",value:"value",condition:"condition",unit:"unit",xmlElement:"element",xmlBothTags:"tags",xmlStartTag:"start tag",xmlEndTag:"end tag",part:"part",chapter:"chapter",subSection:"subsection",subSubSection:"subsubsection",namedParagraph:"paragraph",subParagraph:"subparagraph",environment:"environment",command:"command",character:"char",word:"sub",token:"token",identifier:"identifier",line:"line",sentence:"sentence",paragraph:"block",boundedParagraph:"short block",document:"file",nonWhitespaceSequence:"paint",boundedNonWhitespaceSequence:"short paint",url:"link",notebookCell:"cell",string:Dt("parse tree string"),textFragment:Dt("text fragment"),disqualifyDelimiter:Dt("disqualify delimiter"),pairDelimiter:Dt("pair delimiter"),"private.fieldAccess":Dt("access"),"private.switchStatementSubject":Dt("subject")},complexScopeTypeType:{glyph:"glyph"},surroundingPairForceDirection:{left:"left",right:"right"},simpleModifier:{excludeInterior:"bounds",toRawSelection:"just",leading:"leading",trailing:"trailing",keepContentFilter:"content",keepEmptyFilter:"empty",inferPreviousMark:"its",startOf:"start of",endOf:"end of",interiorOnly:"inside",visible:"visible",extendThroughStartOf:"head",extendThroughEndOf:"tail",everyScope:"every"},modifierExtra:{first:"first",last:"last",previous:"previous",next:"next",forward:"forward",backward:"backward",ancestor:"grand"},customRegex:{},action:{addSelection:"append",addSelectionAfter:"append post",addSelectionBefore:"append pre",breakLine:"break",scrollToBottom:"bottom",toggleLineBreakpoint:"break point",cutToClipboard:"carve",scrollToCenter:"center",clearAndSetSelection:"change",remove:"chuck",insertCopyBefore:"clone up",insertCopyAfter:"clone",toggleLineComment:"comment",copyToClipboard:"copy",scrollToTop:"crown",outdentLine:"dedent",revealDefinition:"define",editNewLineBefore:"drink",insertEmptyLineBefore:"drop",extractVariable:"extract",insertEmptyLineAfter:"float",foldRegion:"fold",followLink:"follow",followLinkAside:"follow split",flashTargets:"flash",deselect:"give",highlight:"highlight",showHover:"hover",increment:"increment",decrement:"decrement",indentLine:"indent",showDebugHover:"inspect",setSelectionAfter:"post",editNewLineAfter:"pour",setSelectionBefore:"pre",insertEmptyLinesAround:"puff",showQuickFix:"quick fix",showReferences:"reference",rename:"rename",reverseTargets:"reverse",findInDocument:"scout",findInWorkspace:"scout all",randomizeTargets:"shuffle",generateSnippet:"snippet make",sortTargets:"sort",setSelection:"take",revealTypeDefinition:"type deaf",unfoldRegion:"unfold",callAsFunction:"call",swapTargets:"swap",replaceWithTarget:"bring",moveToTarget:"move",wrapWithPairedDelimiter:"wrap",wrapWithSnippet:"wrap",rewrapWithPairedDelimiter:"repack",insertSnippet:"snippet",pasteFromClipboard:"paste",joinLines:"join",gitAccept:"git accept",gitRevert:"git revert",gitStage:"git stage",gitUnstage:"git unstage","private.showParseTree":Dt("parse tree"),"experimental.setInstanceReference":lo("from"),editNew:Dt("edit new"),executeCommand:Dt("execute command"),parsed:Dt("parsed"),getText:Dt("get text"),replace:Dt("replace"),"private.getTargets":Dt("get targets"),"private.setKeyboardTarget":Dt("set keyboard target")},customAction:{},grapheme:OA};var eS=JT(NA,t=>typeof t=="string"?{defaultSpokenForms:[t],isDisabledByDefault:!1,isPrivate:!1}:t),ki=JT(eS,({defaultSpokenForms:t,isDisabledByDefault:e,isPrivate:r})=>({spokenForms:e?[]:t,isCustom:!1,defaultSpokenForms:t,requiresTalonUpdate:!1,isPrivate:r}));var bt={rangeExclusive:"between",rangeInclusive:"past",rangeExcludingStart:null,rangeExcludingEnd:"until",listConnective:"and",swapConnective:"with",sourceDestinationConnective:"to",before:"before",after:"after",verticalRange:"slice",previous:"previous",next:"next",forward:"forward",backward:"backward"};var BA=Hr(HA(),1),zm=class{constructor(e){this.mooLexer=BA.default.compile(e)}reset(e,r){let{mooState:n}=r??{};return this.mooLexer.reset(e,n),this}formatError(e,r){return this.mooLexer.formatError(e,r)}has(e){return this.mooLexer.has(e)}save(){return{mooState:this.mooLexer.save()}}next(){let e=this.mooLexer.next();return this.skipToken(e)?this.next():e}transform({value:e}){return e}skipToken(e){return e?.type==="ws"}};var Ai={};for(let t of HT){let{spokenForms:e}=ki.action[t];for(let r of e)Ai[r]={type:"simpleActionName",value:t}}var QK=["replaceWithTarget","moveToTarget"];for(let t of QK){let{spokenForms:e}=ki.action[t];for(let r of e)Ai[r]={type:"bringMove",value:t}}var YK=["before","after","to"];for(let t of YK){let e=bt[t==="to"?"sourceDestinationConnective":t];Ai[e]={type:"insertionMode",value:t}}for(let t of Jo){let{spokenForms:e}=ki.simpleScopeTypeType[t];for(let r of e)Ai[r]={type:"simpleScopeTypeType",value:t}}for(let t of Am){let{spokenForms:e}=ki.pairedDelimiter[t];for(let r of e)Ai[r]={type:"pairedDelimiter",value:t}}for(let[t,e]of Object.entries(Wm))e!=null&&(Ai[e]={type:"simpleMarkType",value:t});var Pi=new zm({ws:/[ \t]+/,placeholderTarget:{match:/<target\d*>/,value:t=>t.slice(7,-1)},token:{match:Object.keys(Ai),type:t=>Ai[t].type,value:t=>Ai[t].value}});function VA(t,e){return{name:t,target:e}}function WA(t,e,r){return{name:t,source:e,destination:r}}function qm(t,e){let r={type:"primitive"};return t!=null&&(r.modifiers=t),e!=null&&(r.mark=e),r}function $A(t,e){return{type:"primitive",insertionMode:t,target:e}}function jA(t){return{type:"containingScope",scopeType:t}}function zA(t){return{type:t}}function qA(t){return{type:"surroundingPair",delimiter:t}}function GA(t){return{type:t}}function KA(t){return{type:"target",target:{type:"placeholder",index:t.length===0?0:parseInt(t)-1}}}function tS(t){return t[0]}var ZK={Lexer:Pi,ParserRules:[{name:"main",symbols:["action"],postprocess:tS},{name:"action",symbols:[Pi.has("simpleActionName")?{type:"simpleActionName"}:simpleActionName,"target"],postprocess:([t,e])=>VA(t,e)},{name:"action",symbols:[Pi.has("bringMove")?{type:"bringMove"}:bringMove,"target","destination"],postprocess:([t,e,r])=>WA(t,e,r)},{name:"destination",symbols:["primitiveDestination"],postprocess:tS},{name:"destination",symbols:[Pi.has("insertionMode")?{type:"insertionMode"}:insertionMode,"target"],postprocess:([t,e])=>$A(t,e)},{name:"target",symbols:["primitiveTarget"],postprocess:tS},{name:"primitiveTarget$ebnf$1",symbols:["modifier"]},{name:"primitiveTarget$ebnf$1",symbols:["primitiveTarget$ebnf$1","modifier"],postprocess:t=>t[0].concat([t[1]])},{name:"primitiveTarget",symbols:["primitiveTarget$ebnf$1"],postprocess:([t])=>qm(t,void 0)},{name:"primitiveTarget",symbols:["mark"],postprocess:([t])=>qm(void 0,t)},{name:"primitiveTarget$ebnf$2",symbols:["modifier"]},{name:"primitiveTarget$ebnf$2",symbols:["primitiveTarget$ebnf$2","modifier"],postprocess:t=>t[0].concat([t[1]])},{name:"primitiveTarget",symbols:["primitiveTarget$ebnf$2","mark"],postprocess:([t,e])=>qm(t,e)},{name:"modifier",symbols:["containingScopeModifier"],postprocess:([t])=>t},{name:"containingScopeModifier",symbols:["scopeType"],postprocess:([t])=>jA(t)},{name:"scopeType",symbols:[Pi.has("simpleScopeTypeType")?{type:"simpleScopeTypeType"}:simpleScopeTypeType],postprocess:([t])=>zA(t)},{name:"scopeType",symbols:[Pi.has("pairedDelimiter")?{type:"pairedDelimiter"}:pairedDelimiter],postprocess:([t])=>qA(t)},{name:"mark",symbols:[Pi.has("simpleMarkType")?{type:"simpleMarkType"}:simpleMarkType],postprocess:([t])=>GA(t)},{name:"mark",symbols:[Pi.has("placeholderTarget")?{type:"placeholderTarget"}:placeholderTarget],postprocess:([t])=>KA(t)}],ParserStart:"main"},QA=ZK;function XK(){return new Gm.Parser(Gm.Grammar.fromCompiled(QA))}function YA(t){let e=XK();if(e.feed(t),e.results.length!==1)throw new Error(`Expected exactly one result, got ${e.results.length}`);return e.results[0]}function Km(t,e){let r=YA(t);return Bm(r,e)}function hl(t){switch(t.name){case"callAsFunction":return[t.callee,t.argument];case"replaceWithTarget":case"moveToTarget":return[t.source,...ZA(t.destination)];case"swapTargets":return[t.target1,t.target2];case"pasteFromClipboard":case"insertSnippet":case"replace":case"editNew":return ZA(t.destination);case"parsed":return hl(Km(t.content,t.arguments));default:return[t.target]}}function ZA(t){switch(t.type){case"list":return t.destinations.map(({target:e})=>e);case"primitive":return[t.target];case"implicit":return[]}}function nS(t){return t.flatMap(rS)}function rS(t){switch(t.type){case"primitive":return[t];case"list":return t.elements.flatMap(rS);case"range":return[t.anchor,t.active].flatMap(rS);case"implicit":return[]}}var JK={arrowFunction:"anonymousFunction",dictionary:"map",regex:"regularExpression"},e4={purple:"pink"};function t4(t){t.modifiers?.forEach(e=>{(e.type==="containingScope"||e.type==="everyScope")&&(e.scopeType.type=JK[e.scopeType.type]??e.scopeType.type)})}function r4(t){t.mark?.type==="decoratedSymbol"&&(t.mark.symbolColor=e4[t.mark.symbolColor]??t.mark.symbolColor)}function iS(t){nS(t).forEach(e=>{t4(e),r4(e)})}function XA(t){return{...t,version:1}}var n4={type:"primitive",mark:{type:"cursor"},selectionType:"token",position:"contents",modifier:{type:"identity"},insideOutsideType:"inside"},i4={type:"primitive",isImplicit:!0},JA=t=>wi(t,n4)?i4:t;function eP(t){let e=t.action;return{spokenForm:t.spokenForm,action:{name:e,args:t.extraArgs},targets:a4(t.targets,e),usePrePhraseSnapshot:t.usePrePhraseSnapshot??!1,version:2}}function o4(t){switch(t.type){case"identity":return[];case"containingScope":{let{includeSiblings:e,scopeType:r,type:n,...i}=t;return[{type:e?"everyScope":"containingScope",scopeType:{type:r},...i}]}case"surroundingPair":{let{delimiterInclusion:e,...r}=t,n={type:"containingScope",scopeType:r};return e==="interiorOnly"||e==="excludeInterior"?n.scopeType.delimiter==="any"?[{type:e}]:[{type:e},n]:[n]}case"subpiece":{let{type:e,pieceType:r,...n}=t;return[{type:"ordinalRange",scopeType:{type:r},...n}]}case"head":return[{type:"extendThroughStartOf"}];case"tail":return[{type:"extendThroughEndOf"}];default:return[t]}}function oS(t,e){let{type:r,isImplicit:n,mark:i,insideOutsideType:o,modifier:s,selectionType:l,position:u}=t,m=[];if(u&&u!=="contents"&&(u==="before"?o==="inside"?m.push({type:"position",position:"start"}):e==="remove"?m.push({type:"leading"}):m.push({type:"position",position:"before"}):o==="inside"?m.push({type:"position",position:"end"}):e==="remove"?m.push({type:"trailing"}):m.push({type:"position",position:"after"})),l)switch(l){case"token":if(s?.type==="subpiece")break;case"line":if(i?.type==="lineNumber")break;default:m.push({type:"containingScope",scopeType:{type:l}})}return s&&m.push(...o4(s)),{type:r,isImplicit:n,modifiers:m.length>0?m:void 0,mark:i?.type==="cursorToken"?void 0:i}}function tP(t,e){switch(t.type){case"list":return{...t,elements:t.elements.map(r=>tP(r,e))};case"range":{let{type:r,rangeType:n,start:i,end:o,excludeStart:s,excludeEnd:l}=t;return{type:r,rangeType:n,anchor:oS(i,e),active:oS(o,e),excludeAnchor:s??!1,excludeActive:l??!1}}case"primitive":return oS(t,e)}}function a4(t,e){return t.map(r=>tP(r,e)).map(r=>r.type==="primitive"?JA(r):r)}function rP(t){return{...t,version:3,targets:t.targets.map(nP)}}function nP(t){switch(t.type){case"list":return{...t,elements:t.elements.map(e=>nP(e))};case"range":{let{anchor:e,active:r,...n}=t;return{anchor:aS(e),active:aS(r),...n}}case"primitive":return aS(t)}}function aS(t){let e=t.modifiers!=null?t.modifiers.map(c4):void 0;if(t.mark?.type==="lineNumber"){let{anchor:r,active:n}=t.mark;if(r.type!==n.type||r.lineNumber<0!=n.lineNumber<0)return{type:"range",anchor:{type:"primitive",mark:xl(r),modifiers:e},active:{type:"primitive",mark:xl(n)},excludeAnchor:!1,excludeActive:!1}}return{...t,mark:t.mark!=null?s4(t.mark):void 0,modifiers:e}}function s4(t){switch(t.type){case"lineNumber":return l4(t);default:return t}}function c4(t){switch(t.type){case"ordinalRange":return u4(t);default:return t}}function l4(t){return wi(t.anchor,t.active)?xl(t.anchor):{type:"range",anchor:xl(t.anchor),active:xl(t.active)}}function u4(t){return t.anchor===t.active?yl(t.scopeType,t.anchor):t.anchor===0&&t.active>t.anchor?yl(t.scopeType,t.anchor,t.active-t.anchor+1):t.anchor<0&&t.active===-1?yl(t.scopeType,t.anchor,-t.anchor):{type:"range",anchor:yl(t.scopeType,t.anchor),active:yl(t.scopeType,t.active),excludeAnchor:t.excludeAnchor,excludeActive:t.excludeActive}}function xl(t){return{type:"lineNumber",lineNumberType:t.type,lineNumber:t.lineNumber}}function yl(t,e,r=1){return{type:"ordinalScope",scopeType:t,start:e,length:r}}function oP(t){return{...t,version:4,targets:t.targets.map(aP)}}function aP(t){switch(t.type){case"primitive":return iP(t);case"range":{let{anchor:e,...r}=t;return{...r,anchor:iP(e)}}case"list":{let{elements:e,...r}=t;return{...r,elements:e.map(aP)}}}}function iP(t){return t.mark==null&&t.modifiers==null||t.isImplicit?{type:"implicit"}:t}function sP(t){return{...t,version:5,action:p4(t.action),targets:t.targets.map(Qm)}}function p4(t){switch(t.name){case"wrapWithSnippet":{let[e,r]=m4(t.args[0]);return{name:"wrapWithSnippet",args:[{type:"named",name:e,variableName:r}]}}case"insertSnippet":{let[e,r]=t.args,n={type:"named",name:e};return r!=null&&(n.substitutions=r),{name:"insertSnippet",args:[n]}}default:return t}}function m4(t){let[e,r]=t.split(".");if(e==null||r==null)throw new Error("Snippet location missing '.'");return[e,r]}function Qm(t){switch(t.type){case"implicit":return t;case"list":return{...t,elements:t.elements.map(Qm)};case"range":return{...t,anchor:Qm(t.anchor),active:Qm(t.active)};case"primitive":return{...t,mark:t.mark!=null?sS(t.mark):void 0,modifiers:t.modifiers!=null&&t.modifiers.length>0?t.modifiers.map(cS):void 0}}}function sS(t){return t.type==="range"?{...t,anchor:sS(t.anchor),active:sS(t.active),excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1}:t}function cS(t){return t.type==="range"?{...t,anchor:cS(t.anchor),active:cS(t.active),excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1}:t}var f4={bring:"replaceWithTarget",call:"callAsFunction",clear:"clearAndSetSelection",commentLines:"toggleLineComment",copy:"copyToClipboard",cut:"cutToClipboard",delete:"remove",editNewLineAbove:"editNewLineBefore",editNewLineBelow:"editNewLineAfter",findInFiles:"findInWorkspace",fold:"foldRegion",indentLines:"indentLine",insertEmptyLineAbove:"insertEmptyLineBefore",insertEmptyLineBelow:"insertEmptyLineAfter",insertLineAfter:"editNewLineAfter",insertLineBefore:"editNewLineBefore",move:"moveToTarget",outdentLines:"outdentLine",paste:"pasteFromClipboard",reverse:"reverseTargets",setBreakpoint:"toggleLineBreakpoint",sort:"sortTargets",swap:"swapTargets",unfold:"unfoldRegion",use:"replaceWithTarget",wrap:"wrapWithPairedDelimiter"};function lS(t){let e=f4[t]??t;if(!pA.includes(e))throw new Error(`Unknown action name: ${e}`);return e}function cP(t){return{version:6,spokenForm:t.spokenForm,usePrePhraseSnapshot:t.usePrePhraseSnapshot,action:d4(t.action,t.targets)}}function d4(t,e){let r=lS(t.name);switch(r){case"replaceWithTarget":case"moveToTarget":return{name:r,source:pn(e[0]),destination:Tl(e[1])};case"swapTargets":return{name:r,target1:pn(e[0]),target2:pn(e[1])};case"callAsFunction":return{name:r,callee:pn(e[0]),argument:pn(e[1])};case"pasteFromClipboard":return{name:r,destination:Tl(e[0])};case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return{name:r,left:t.args[0],right:t.args[1],target:pn(e[0])};case"generateSnippet":return{name:r,snippetName:t.args?.[0],target:pn(e[0])};case"insertSnippet":return{name:r,snippetDescription:t.args[0],destination:Tl(e[0])};case"wrapWithSnippet":return{name:r,snippetDescription:t.args[0],target:pn(e[0])};case"executeCommand":return{name:r,commandId:t.args[0],options:t.args?.[1],target:pn(e[0])};case"replace":return{name:r,replaceWith:t.args[0],destination:Tl(e[0])};case"highlight":{let n={name:r,target:pn(e[0])};return t.args?.[0]!=null&&(n.highlightId=t.args?.[0]),n}case"editNew":return{name:r,destination:Tl(e[0])};case"getText":return{name:r,options:t.args?.[0],target:pn(e[0])};case"parsed":throw Error("Parsed action should not be present in V5");default:return{name:r,target:pn(e[0])}}}function pn(t){switch(t.type){case"list":case"range":case"primitive":return g4(t);case"implicit":return t}}function g4(t){switch(t.type){case"list":return h4(t);case"range":case"primitive":return Ym(t)}}function h4(t){return{...t,elements:t.elements.map(Ym)}}function Ym(t){switch(t.type){case"range":return lP(t);case"primitive":return Zm(t)}}function lP(t){let{anchor:e,active:r}=t,n={type:"range",anchor:e.type==="implicit"?e:Zm(e),active:Zm(r),excludeAnchor:t.excludeAnchor,excludeActive:t.excludeActive};return t.rangeType!=null&&(n.rangeType=t.rangeType),n}function Zm(t){let e={type:"primitive"},r=b4(t.modifiers);return r!=null&&(e.modifiers=r),t.mark!=null&&(e.mark=t.mark),e}function Tl(t){switch(t.type){case"list":return y4(t);case"range":return x4(t);case"primitive":return T4(t);case"implicit":return S4()}}function y4(t){let e=[],r=[],n,i=()=>{r.length>0&&e.push({type:"primitive",insertionMode:n??"to",target:r.length===1?r[0]:{type:"list",elements:r}})};return t.elements.forEach(o=>{let s=Xm(o);s!=null?(i(),r=[Ym(o)],n=s):r.push(Ym(o))}),i(),e.length>1?{type:"list",destinations:e}:e[0]}function x4(t){return{type:"primitive",insertionMode:Xm(t.anchor)??"to",target:lP(t)}}function T4(t){return{type:"primitive",insertionMode:Xm(t)??"to",target:Zm(t)}}function S4(){return{type:"implicit"}}function Xm(t){switch(t.type){case"implicit":return"to";case"primitive":return v4(t);case"range":return Xm(t.anchor)}}function v4(t){let e=t.modifiers?.find(r=>r.type==="position");if(e!=null){if(t.modifiers.indexOf(e)!==0)throw Error("Position modifier has to be at first index");if(e?.position==="before"||e?.position==="after")return e.position}}function b4(t){let e=[];if(t!=null)for(let r of t)r.type==="position"?r.position==="start"?e.push({type:"startOf"}):r.position==="end"&&e.push({type:"endOf"}):e.push(r);return e.length>0?e:void 0}function uP(t){return{...t,version:7}}function pS(t){let e=w4(t,7),{action:r,usePrePhraseSnapshot:n=!1,spokenForm:i}=e;return{version:7,spokenForm:i,action:Nm(r,o=>{let s=hl(o);iS(s),r.name}),usePrePhraseSnapshot:n}}function w4(t,e){if(t.version>7)throw new Mp;for(;t.version<e;)switch(t.version){case 0:t=XA(t);break;case 1:t=eP(t);break;case 2:t=rP(t);break;case 3:t=oP(t);break;case 4:t=sP(t);break;case 5:t=cP(t);break;case 6:t=uP(t);break;default:throw new Error(`Can't upgrade from unknown version ${t.version}`)}return t}var mS;function Jm(t){mS=t}function k(){if(mS==null)throw Error("Tried to access ide before it was injected");return mS}var ef=class{constructor(e){this.maxLength=e;this.stack=[];this.index=void 0}push(e){this.index!=null?this.stack.splice(this.index+1,this.stack.length-this.index-1,e):this.stack.push(e),this.stack.length>this.maxLength&&this.stack.shift(),this.index=this.stack.length-1}undo(){if(this.index!=null&&this.index>0)return this.index--,this.stack[this.index]}redo(){if(this.index!=null&&this.index<this.stack.length-1)return this.index++,this.stack[this.index]}};var E4=25,tf=class{constructor(){this.targetMap=new Map;this.targetHistory=new ws(()=>new ef(E4));this.notifier=new tr}set(e,r,{history:n=!1}={}){this.targetMap.set(e,r),n&&r!=null&&this.targetHistory.get(e).push(r),this.notifier.notifyListeners(e,r)}get(e){return this.targetMap.get(e)}undo(e){let r=this.targetHistory.get(e).undo();r!=null&&this.set(e,r,{history:!1})}redo(e){let r=this.targetHistory.get(e).redo();r!=null&&this.set(e,r,{history:!1})}onStoredTargets(e){for(let r of ys)e(r,this.get(r));return this.notifier.registerListener(e)}};function _t(t){if(t.length===0)throw new Error("Require at least one target with this action");let e=t.map(r=>r.editor);if(new Set(e).size>1)throw new Error("Can only have one editor with this action");return e[0]}function Ar(t){if(t.length!==1)throw new Error("Can only have one target with this action");return t[0]}async function Mi(t,e,r){return Promise.all(fS(t,e).map(([n,i])=>r(n,i)))}async function at(t,e){return Mi(t,r=>r.editor,e)}async function pP(t,e){let r=fS(t,i=>i.editor),n=[];for(let[i,o]of r)n.push(await e(i,o));return n}function mP(t){return fS(t,e=>e.editor)}function fS(t,e){let n=ml(t,i=>e(i).document.uri);return Array.from(n.values(),i=>[e(i[0]),i])}function mn(t,e){return e!=null?Pt(t,e).map(([n,i])=>({editor:n.editor,selection:n?.isReversed?new De(i.end,i.start):new De(i.start,i.end)})):t.map(n=>({editor:n.editor,selection:n.contentSelection}))}function fn(t,e){return t.textualType==="line"?$r(e):dr(e)}function _4(t){return fn(t,t.contentRange)}function Ue(t,e,r,n=_4){return t.flashRanges(e.map(i=>({editor:i.editor,range:n(i),style:r})))}function uo(t,e){return new Y(new ge(e.start.line,0),t.document.lineAt(e.end).range.end)}function dS(t,e){return e.isEmpty?0:t.document.offsetAt(e.end)-t.document.offsetAt(e.start)}function fP(t,e){let[r,n]=e instanceof ge?[e,e]:[e.start,e.end];return t.start.isBefore(r)&&t.end.isAfter(n)}function Di(t,...e){for(let r of e)r!=null&&(t=t.union(r));return t}var rf=class t{constructor(e,r,n){this.target=e;this.insertionMode=r;this.contentRange=k4(e.contentRange,r),this.isBefore=r==="before",this.isLineDelimiter=e.insertionDelimiter.includes(`
`),this.indentationString=n??this.isLineDelimiter?R4(e.editor,e.contentRange):"",this.insertionPrefix=e.prefixRange!=null?e.editor.document.getText(e.prefixRange):void 0}get contentSelection(){return this.contentRange.toSelection(this.target.isReversed)}get editor(){return this.target.editor}get insertionDelimiter(){return this.target.insertionDelimiter}get isRaw(){return this.target.isRaw}withTarget(e){return new t(e,this.insertionMode,this.indentationString)}getEditNewActionType(){return this.insertionMode==="after"&&this.target.contentRange.isSingleLine&&this.insertionDelimiter===`
`&&this.insertionPrefix==null?"insertLineAfter":"edit"}constructChangeEdit(e,r=!1){return this.insertionMode==="before"||this.insertionMode==="after"?this.constructEditWithDelimiters(e,r):this.constructEditWithoutDelimiters(e)}constructEditWithDelimiters(e,r){let n=this.getEditRange(),i=this.getEditText(e,r),o=s=>this.updateRange(s,e,r);return{range:n,text:i,isReplace:this.insertionMode==="after",updateRange:o}}constructEditWithoutDelimiters(e){return{range:this.contentRange,text:e,updateRange:r=>r}}getEditRange(){let e=(()=>{let r=this.isBefore?Di(this.target.contentRange,this.target.prefixRange).start:this.target.contentRange.end;if(this.isLineDelimiter){let n=this.editor.document.lineAt(r),i=this.isBefore?n.rangeTrimmed?.start??n.range.start:n.rangeTrimmed?.end??n.range.end;if(r.isEqual(i))return this.isBefore?n.range.start:n.range.end}return r})();return new Y(e,e)}getEditText(e,r){let i=(r?"":this.indentationString)+(this.insertionPrefix??"")+e;return this.isBefore?i+this.insertionDelimiter:this.insertionDelimiter+i}updateRange(e,r,n){let i=this.editor.document.offsetAt(e.start)+(n?0:this.indentationString.length)+(this.insertionPrefix?.length??0),o=this.isBefore?i:i+this.getLengthOfInsertionDelimiter(),s=o+r.length;return new Y(this.editor.document.positionAt(o),this.editor.document.positionAt(s))}getLengthOfInsertionDelimiter(){if(this.editor.document.eol==="CRLF"){let e=this.insertionDelimiter.match(/\n/g);if(e!=null)return this.insertionDelimiter.length+e.length}return this.insertionDelimiter.length}};function R4(t,e){let r=Number.MAX_SAFE_INTEGER,n="";for(let i=e.start.line;i<=e.end.line;++i){let o=t.document.lineAt(i);if(o.range.isEmpty||o.isEmptyOrWhitespace&&!e.isSingleLine)continue;let s=o.rangeTrimmed?.start??o.range.end;s.character<r&&(r=s.character,n=o.text.slice(0,r))}return n}function k4(t,e){switch(e){case"before":return t.start.toEmptyRange();case"after":return t.end.toEmptyRange();case"to":return t}}function Rs(t,e,r,n){return A4(t.contentRange,e.contentRange,r,n)}function A4(t,e,r,n){return new Y(r?t.start:t.end,n?e.end:e.start)}function ks(t,e,r,n){let i=r?t.contentRange.start:new ge(t.contentRange.end.line+1,0),o=n?e.contentRange.end:e.editor.document.lineAt(e.contentRange.start.line-1).range.end;return new Y(i,o)}var je=class t{constructor(e){this.hasExplicitScopeType=!0;this.hasExplicitRange=!0;this.isRaw=!1;this.isImplicit=!1;this.isNotebookCell=!1;this.textualType="token";this.state={editor:e.editor,isReversed:e.isReversed,contentRange:e.contentRange,thatTarget:e.thatTarget}}get editor(){return this.state.editor}get isReversed(){return this.state.isReversed}get thatTarget(){return this.state.thatTarget!=null?this.state.thatTarget.thatTarget:this}get contentText(){return this.editor.document.getText(this.contentRange)}get contentSelection(){return this.contentRange.toSelection(this.isReversed)}get contentRange(){return this.state.contentRange}constructRemovalEdit(){return{range:this.getRemovalRange(),text:"",updateRange:e=>e}}getRemovalHighlightRange(){return fn(this,this.getRemovalRange())}withThatTarget(e){return this.cloneWith({thatTarget:e})}withContentRange(e){return this.cloneWith({contentRange:e})}getInterior(){}getBoundary(){}cloneWith(e){let r=Object.getPrototypeOf(this).constructor;return new r({...this.getCloneParameters(),...e})}maybeCreateRichRangeTarget(e,r){let{constructor:n}=Object.getPrototypeOf(this);return new n({...this.getCloneParameters(),isReversed:e,contentRange:Rs(this,r,!0,!0)})}isEqual(e){return e instanceof t&&wi(this.getEqualityParameters(),e.getEqualityParameters())}getEqualityParameters(){let{thatTarget:e,...r}=this.getCloneParameters();return{...r}}toDestination(e){return new rf(this,e)}toPlainObject(){return{type:this.type,contentRange:nl(this.contentRange),isReversed:this.isReversed,hasExplicitRange:this.hasExplicitRange}}};function nf(t,e){return P4(t,e.start,e.end)}function P4(t,e,r){return{editor:t.editor,selection:M4(t.selection,e,r)}}function M4(t,e,r){return t.isReversed?new De(r,e):new De(e,r)}function oa(t,e){let{document:r}=t,n=r.getText(e),i=n.length-n.trimStart().length,o=n.length-n.trimEnd().length,s=r.offsetAt(e.start)+i,l=r.offsetAt(e.end)-o,u=r.positionAt(s),m=r.positionAt(l);return new Y(u,m)}function of(t,e,r,n){return r==null?void 0:new t({editor:e,isReversed:n,contentRange:r})}var Ke=class extends je{constructor(r){super(r);this.type="PlainTarget";this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.textualType=r.textualType??"token",this.insertionDelimiter=r.insertionDelimiter??""}getCloneParameters(){return{...this.state,textualType:this.textualType,insertionDelimiter:this.insertionDelimiter}}};function As(t,e,r){return of(Ke,t,e,r)}var af=class extends je{constructor(r){super(r);this.type="DocumentTarget";this.textualType="line";this.insertionDelimiter=`

`}getInterior(){return[new Ke({editor:this.editor,isReversed:this.isReversed,contentRange:oa(this.editor,this.contentRange)})]}getRemovalRange(){return this.contentRange}getLeadingDelimiterTarget(){}getTrailingDelimiterTarget(){}getCloneParameters(){return this.state}};var gr=class t extends je{constructor(){super(...arguments);this.type="LineTarget";this.textualType="line";this.insertionDelimiter=`
`;this.getRemovalHighlightRange=()=>$r(this.fullLineContentRange)}get fullLineContentRange(){return uo(this.editor,this.contentRange)}getLeadingDelimiterTarget(){return As(this.editor,D4(this.editor,this.fullLineContentRange),this.isReversed)}getTrailingDelimiterTarget(){return As(this.editor,F4(this.editor,this.fullLineContentRange),this.isReversed)}getRemovalRange(){let r=this.fullLineContentRange,n=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return n==null?r:r.union(n.contentRange)}maybeCreateRichRangeTarget(r,n){return new t({editor:this.editor,isReversed:r,contentRange:ks(this,n,!0,!0)})}getCloneParameters(){return this.state}};function D4(t,e){let{start:r}=e;return r.line>0?new Y(t.document.lineAt(r.line-1).range.end,e.start):void 0}function F4(t,e){let{end:r}=e;return r.line+1<t.document.lineCount?new Y(e.end,new ge(r.line+1,0)):void 0}function gS(t,e,r){return of(gr,t,e,r)}var sf=class t{constructor(e,r){this.target=e;this.insertionMode=r}get editor(){return this.target.editor}get contentRange(){return this.target.contentRange}get contentSelection(){return this.target.contentSelection}get insertionDelimiter(){return this.target.insertionDelimiter}get isRaw(){return this.target.isRaw}withTarget(e){return new t(e,this.insertionMode)}getEditNewActionType(){throw new Error("Method not implemented.")}constructChangeEdit(e){throw new Error("Method not implemented.")}};var cf=class extends je{constructor(r){super(r);this.type="NotebookCellTarget";this.insertionDelimiter=`
`;this.isNotebookCell=!0;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange}getCloneParameters(){return this.state}toDestination(r){return new sf(this,r)}};var po=class t extends je{constructor(){super(...arguments);this.type="ParagraphTarget";this.textualType="line";this.insertionDelimiter=`

`}getLeadingDelimiterTarget(){return gS(this.editor,L4(this.editor,this.fullLineContentRange),this.isReversed)}getTrailingDelimiterTarget(){return gS(this.editor,I4(this.editor,this.fullLineContentRange),this.isReversed)}getRemovalRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.contentRange.union(r.contentRange):this.contentRange;return new gr({contentRange:n,editor:this.editor,isReversed:this.isReversed}).getRemovalRange()}get fullLineContentRange(){return uo(this.editor,this.contentRange)}getRemovalHighlightRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.fullLineContentRange.union(r.contentRange):this.fullLineContentRange;return $r(n)}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,contentRange:ks(this,n,!0,!0)})}getCloneParameters(){return this.state}};function L4(t,e){let{document:r}=t,n=r.lineAt(e.start),i=C4(r,n);if(i!=null)return i.lineNumber+1===n.lineNumber?void 0:new Y(new ge(i.lineNumber+1,0),r.lineAt(n.lineNumber-1).range.end);if(n.lineNumber>0)return new Y(new ge(0,0),r.lineAt(n.lineNumber-1).range.end)}function I4(t,e){let{document:r}=t,n=r.lineAt(e.end),i=O4(r,n);if(i!=null)return i.lineNumber-1===n.lineNumber?void 0:new Y(new ge(n.lineNumber+1,0),r.lineAt(i.lineNumber-1).range.end);if(n.lineNumber<r.lineCount-1)return new Y(new ge(n.lineNumber+1,0),r.lineAt(r.lineCount-1).range.end)}function C4(t,e){for(;e.lineNumber>0;){let r=t.lineAt(e.lineNumber-1);if(!r.isEmptyOrWhitespace)return r;e=r}return null}function O4(t,e){for(;e.lineNumber+1<t.lineCount;){let r=t.lineAt(e.lineNumber+1);if(!r.isEmptyOrWhitespace)return r;e=r}return null}var mo=class extends je{constructor(){super(...arguments);this.type="RawSelectionTarget";this.textualType="character";this.insertionDelimiter="";this.isRaw=!0;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.getCloneParameters=()=>this.state}};function Sl(t){let e=Di(t.contentRange,t.prefixRange),r=t.getTrailingDelimiterTarget()??t.getLeadingDelimiterTarget();return r!=null?e.union(r.contentRange):e}var N4=['"',"'","(","[","{","<"],U4=['"',"'",")","]","}",">",",",";",":"];function qn(t){let{editor:e}=t,{start:r}=Di(t.contentRange,t.prefixRange),o=e.document.lineAt(r).text.slice(0,r.character).match(/\s+$/);return o==null?void 0:new Ke({contentRange:new Y(r.line,r.character-o[0].length,r.line,r.character),editor:e,isReversed:t.isReversed})}function Gn(t){let{editor:e}=t,{end:r}=t.contentRange,o=e.document.lineAt(r).text.slice(r.character).match(/^\s+/);return o==null?void 0:new Ke({contentRange:new Y(r.line,r.character,r.line,r.character+o[0].length),editor:e,isReversed:t.isReversed})}function fo(t){let{editor:e}=t,r=Di(t.contentRange,t.prefixRange),{start:n,end:i}=r,o=t.getLeadingDelimiterTarget()?.contentRange??n.toEmptyRange(),s=t.getTrailingDelimiterTarget()?.contentRange??i.toEmptyRange(),l=uo(e,r);return o.union(s).isRangeEqual(l)?l:!s.isEmpty&&(!o.isEmpty||r.start.isEqual(l.start)||N4.includes(H4(e,r)))?r.union(s):!o.isEmpty&&(r.end.isEqual(l.end)||U4.includes(B4(e,r)))?r.union(o):r}function H4(t,e){let{start:r}=e,n=t.document.lineAt(r);return r.isAfter(n.range.start)?t.document.getText(new Y(r.translate(void 0,-1),r)):""}function B4(t,e){let{end:r}=e,n=t.document.lineAt(r);return r.isBefore(n.range.end)?t.document.getText(new Y(r.translate(void 0,1),r)):""}var ir=class extends je{constructor(){super(...arguments);this.type="TokenTarget";this.textualType="token";this.insertionDelimiter=" "}getLeadingDelimiterTarget(){return qn(this)}getTrailingDelimiterTarget(){return Gn(this)}getRemovalRange(){return fo(this)}getCloneParameters(){return this.state}};function hS(t){let{editor:e,isReversed:r}=t,{document:n}=e,i=Di(t.contentRange,t.prefixRange);return V4(n,i)?W4(n,i)?new po({editor:e,isReversed:r,contentRange:i}):new gr({editor:e,isReversed:r,contentRange:i}):new ir({editor:e,isReversed:r,contentRange:i})}function V4(t,e){let r=t.lineAt(e.start).rangeTrimmed?.start,n=t.lineAt(e.end).rangeTrimmed?.end;return r!=null&&n!=null&&r.isEqual(e.start)&&n.isEqual(e.end)}function W4(t,e){let{start:r,end:n}=e;return(r.line===0||t.lineAt(r.line-1).isEmptyOrWhitespace)&&(n.line===t.lineCount-1||t.lineAt(n.line+1).isEmptyOrWhitespace)}var go=class t extends je{constructor(r){super(r);this.type="ScopeTypeTarget";this.scopeTypeType_=r.scopeTypeType,this.removalRange_=r.removalRange,this.leadingDelimiterRange_=r.leadingDelimiterRange,this.trailingDelimiterRange_=r.trailingDelimiterRange,this.prefixRange=r.prefixRange,this.insertionDelimiter=r.insertionDelimiter??$4(r.scopeTypeType),this.hasDelimiterRange_=!!this.leadingDelimiterRange_||!!this.trailingDelimiterRange_}getLeadingDelimiterTarget(){if(this.leadingDelimiterRange_!=null)return new Ke({editor:this.editor,isReversed:this.isReversed,contentRange:this.leadingDelimiterRange_});if(!this.hasDelimiterRange_)return qn(this)}getTrailingDelimiterTarget(){if(this.trailingDelimiterRange_!=null)return new Ke({editor:this.editor,isReversed:this.isReversed,contentRange:this.trailingDelimiterRange_});if(!this.hasDelimiterRange_)return Gn(this)}getRemovalRange(){return this.removalRange_!=null?this.removalRange_:this.hasDelimiterRange_?Sl(this):hS(this).getRemovalRange()}getRemovalHighlightRange(){return this.removalRange_!=null?fn(this,this.removalRange_):this.hasDelimiterRange_?fn(this,Sl(this)):hS(this).getRemovalHighlightRange()}maybeCreateRichRangeTarget(r,n){if(this.scopeTypeType_!==n.scopeTypeType_)return null;let i=this.removalRange_!=null||n.removalRange_!=null?(this.removalRange_??this.contentRange).union(n.removalRange_??n.contentRange):void 0;return new t({...this.getCloneParameters(),isReversed:r,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:n.trailingDelimiterRange_,removalRange:i,contentRange:this.contentRange.union(n.contentRange)})}getCloneParameters(){return{...this.state,insertionDelimiter:this.insertionDelimiter,prefixRange:this.prefixRange,removalRange:void 0,interiorRange:void 0,scopeTypeType:this.scopeTypeType_,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:this.trailingDelimiterRange_}}};function $4(t){switch(t){case"class":case"namedFunction":case"section":case"sectionLevelOne":case"sectionLevelTwo":case"sectionLevelThree":case"sectionLevelFour":case"sectionLevelFive":case"sectionLevelSix":case"part":case"chapter":case"subSection":case"subSubSection":case"namedParagraph":case"subParagraph":return`

`;case"anonymousFunction":case"statement":case"ifStatement":case"comment":case"xmlElement":case"collectionItem":case"branch":case"environment":return`
`;default:return" "}}var lf=class t extends je{constructor(r){super(r);this.type="SubTokenWordTarget";this.textualType="word";this.leadingDelimiterRange_=r.leadingDelimiterRange,this.trailingDelimiterRange_=r.trailingDelimiterRange,this.insertionDelimiter=r.insertionDelimiter}getLeadingDelimiterTarget(){return As(this.editor,this.leadingDelimiterRange_,this.isReversed)}getTrailingDelimiterTarget(){return As(this.editor,this.trailingDelimiterRange_,this.isReversed)}getRemovalRange(){return Sl(this)}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,contentRange:Rs(this,n,!0,!0),trailingDelimiterRange:n.trailingDelimiterRange_})}getCloneParameters(){return{...this.state,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:this.trailingDelimiterRange_,insertionDelimiter:this.insertionDelimiter}}};var Ps=class t extends je{constructor(r){super({...r,contentRange:oa(r.editor,r.fullInteriorRange)});this.type="InteriorTarget";this.insertionDelimiter=" ";this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.fullInteriorRange;this.fullInteriorRange=r.fullInteriorRange}getCloneParameters(){return{...this.state,fullInteriorRange:this.fullInteriorRange}}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,fullInteriorRange:this.fullInteriorRange.union(n.fullInteriorRange)})}};var uf=class extends je{constructor(r){super(r);this.type="SurroundingPairTarget";this.insertionDelimiter=" ";this.boundary_=r.boundary,this.interiorRange_=r.interiorRange}getLeadingDelimiterTarget(){return qn(this)}getTrailingDelimiterTarget(){return Gn(this)}getRemovalRange(){return fo(this)}getInterior(){return[new Ps({editor:this.editor,isReversed:this.isReversed,fullInteriorRange:this.interiorRange_})]}getBoundary(){return this.boundary_.map(r=>new ir({editor:this.editor,isReversed:this.isReversed,contentRange:r}))}getCloneParameters(){return{...this.state,interiorRange:this.interiorRange_,boundary:this.boundary_}}};var Ct=class extends je{constructor(r){super(r);this.type="UntypedTarget";this.insertionDelimiter=" ";this.hasExplicitScopeType=!1;this.hasExplicitRange=r.hasExplicitRange,this.textualType=r.textualType??"token"}getLeadingDelimiterTarget(){return qn(this)}getTrailingDelimiterTarget(){return Gn(this)}getRemovalRange(){return this.editor.document.getText(this.contentRange).trim().length===0?this.contentRange:fo(this)}maybeCreateRichRangeTarget(){return null}getCloneParameters(){return{...this.state,textualType:this.textualType,hasExplicitRange:this.hasExplicitRange}}};var pf=class extends je{constructor(){super(...arguments);this.type="ImplicitTarget";this.textualType="character";this.insertionDelimiter="";this.isRaw=!0;this.hasExplicitScopeType=!1;this.isImplicit=!0;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.getCloneParameters=()=>this.state}};var mf=class extends je{constructor(r){let{inputTarget:n,modifiedTarget:i,isHead:o}=r;super({...r,contentRange:dP(n.contentRange,i.contentRange,o)});this.type="HeadTailTarget";this.insertionDelimiter=" ";this.inputTarget=n,this.modifiedTarget=i,this.isHead=o}getLeadingDelimiterTarget(){return qn(this)}getTrailingDelimiterTarget(){return Gn(this)}getRemovalRange(){return fo(this)}getInterior(){let r=this.modifiedTarget.getInterior();if(r!=null)return r.map(n=>new Ke({editor:this.editor,contentRange:dP(this.inputTarget.contentRange,n.contentRange,this.isHead),isReversed:this.isReversed}))}getCloneParameters(){return{...this.state,inputTarget:this.inputTarget,modifiedTarget:this.modifiedTarget,isHead:this.isHead}}};function dP(t,e,r){return r?new Y(e.start,t.end):new Y(t.start,e.end)}var ff=class t extends je{constructor(r){super({...r,contentRange:j4(r.paragraphTarget.contentRange,r.containingInterior.contentRange)});this.type="BoundedParagraphTarget";this.textualType="line";this.insertionDelimiter=`

`;this.containingInterior=r.containingInterior,this.paragraphTarget=r.paragraphTarget,this.startLineGap=this.contentRange.start.line-this.containingInterior.fullInteriorRange.start.line,this.endLineGap=this.containingInterior.fullInteriorRange.end.line-this.contentRange.end.line}getLeadingDelimiterTarget(){return this.startLineGap>1?this.paragraphTarget.getLeadingDelimiterTarget():void 0}getTrailingDelimiterTarget(){return this.endLineGap>1?this.paragraphTarget.getTrailingDelimiterTarget():void 0}getRemovalRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.contentRange.union(r.contentRange):this.contentRange;return this.startLineGap<=0||this.endLineGap<=0?n:new gr({contentRange:n,editor:this.editor,isReversed:this.isReversed}).getRemovalRange()}get fullLineContentRange(){return uo(this.editor,this.contentRange)}getRemovalHighlightRange(){let r=(()=>{if(this.startLineGap<1||this.endLineGap<1)return this.getRemovalRange();let n=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return n!=null?this.fullLineContentRange.union(n.contentRange):this.fullLineContentRange})();return $r(r)}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,containingInterior:this.containingInterior.maybeCreateRichRangeTarget(r,n.containingInterior),paragraphTarget:this.paragraphTarget.maybeCreateRichRangeTarget(r,n.paragraphTarget)})}getCloneParameters(){return{...this.state,paragraphTarget:this.paragraphTarget,containingInterior:this.containingInterior}}};function j4(t,e){let r=t.intersection(e);if(r==null||r.isEmpty)throw new Error("Ranges do not intersect");return r}function df(t){return t.activeTextEditor?.selections.map(e=>({selection:e,editor:t.activeTextEditor}))??[]}var Ms=class{run(){return df(k()).map(e=>new Ct({editor:e.editor,isReversed:e.selection.isReversed,contentRange:e.selection,hasExplicitRange:!e.selection.isEmpty,textualType:"character"}))}};var Kn=class{constructor(e,r){this.debouncer=new Ap(r,e.getOwnConfiguration("decorationDebounceDelayMs")),this.run=this.run.bind(this)}run(){this.debouncer.run()}dispose(){this.debouncer.dispose()}};var gf=class{constructor(e,r){this.ide=e;this.storedTargets=r;this.disposables=[];this.debouncer=new Kn(e.configuration,()=>this.updateKeyboardTarget()),this.disposables.push(e.configuration.onDidChangeConfiguration(()=>this.maybeActivate()),this.debouncer),this.maybeActivate()}maybeActivate(){if(this.ide.configuration.getOwnConfiguration("experimental.keyboardTargetFollowsSelection")){this.selectionWatcherDisposable==null&&(this.selectionWatcherDisposable=this.ide.onDidChangeTextEditorSelection(this.debouncer.run));return}this.selectionWatcherDisposable!=null&&(this.selectionWatcherDisposable.dispose(),this.selectionWatcherDisposable=void 0)}updateKeyboardTarget(){this.ide.activeTextEditor==null||this.storedTargets.get("keyboard")==null||this.storedTargets.set("keyboard",new Ms().run())}dispose(){this.disposables.forEach(e=>e.dispose()),this.selectionWatcherDisposable?.dispose()}};var hf=class{constructor(e){this.ide=e;switch(e.disposeOnExit(this),this.evaluateSetting=this.evaluateSetting.bind(this),this.active=!0,e.runMode){case"development":this.enableDebugLog();break;case"test":this.disableDebugLog();break;case"production":this.evaluateSetting(),this.disposableConfiguration=e.configuration.onDidChangeConfiguration(this.evaluateSetting);break}}log(...e){this.active&&console.log(...e)}dispose(){this.disposableConfiguration&&this.disposableConfiguration.dispose()}enableDebugLog(){this.active=!0}disableDebugLog(){this.active=!1}evaluateSetting(){this.ide.configuration.getOwnConfiguration("debug")?this.enableDebugLog():this.disableDebugLog()}};var z4=["!","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_","`","{","|","}","~","\xA3",'"'],q4=z4.map(Wr).join("|"),G4=["[a-zA-Z0-9]",q4].join("|"),K4=new RegExp(`^(${G4})$`,"u"),Q4="[unk]",Y4=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}]/gu,yf=class{constructor(){this.disposables=[];this.algorithmChangeNotifier=new tr;this.getTokenGraphemes=e=>ln(e,Y4,r=>({text:this.normalizeGrapheme(r[0]),tokenStartOffset:r.index,tokenEndOffset:r.index+r[0].length}));this.registerAlgorithmChangeListener=this.algorithmChangeNotifier.registerListener;k().disposeOnExit(this),this.updateTokenHatSplittingMode=this.updateTokenHatSplittingMode.bind(this),this.getTokenGraphemes=this.getTokenGraphemes.bind(this),this.updateTokenHatSplittingMode(),this.disposables.push(k().configuration.onDidChangeConfiguration(this.updateTokenHatSplittingMode))}updateTokenHatSplittingMode(){let{lettersToPreserve:e,symbolsToPreserve:r,...n}=k().configuration.getOwnConfiguration("tokenHatSplittingMode");this.tokenHatSplittingMode={lettersToPreserve:e.map(i=>i.toLowerCase().normalize("NFC")),symbolsToPreserve:r.map(i=>i.normalize("NFC")),...n},this.algorithmChangeNotifier.notifyListeners()}normalizeGrapheme(e){let{preserveCase:r,lettersToPreserve:n,symbolsToPreserve:i}=this.tokenHatSplittingMode,o=e.normalize("NFC");return i.includes(o)||(r||(o=o.toLowerCase()),n.includes(o.toLowerCase()))||(o=oT(o),K4.test(o)||(o=Q4)),o}dispose(){this.disposables.forEach(({dispose:e})=>e())}};function aa(){return yS==null&&(yS=new yf),yS}var yS;var Z4=["-","+","*","/","=","<",">","_","#",".","|","&",":"],X4=["!==","!=","+=","-=","*=","/=","%=","<=",">=","=>","->","??",'"""',"```","/*","*/","<!--","-->"],J4=["\\p{L}","\\p{M}","\\p{N}"],e9="[^\\s\\w]",t9="(?<![.\\d])\\d+\\.\\d+(?![.\\d])";function r9(t){let{fixedTokens:e,repeatableSymbols:r,identifierWordRegexes:n,identifierWordDelimiters:i,numbersRegex:o,singleSymbolsRegex:s}=t,l=r.map(Wr).map(T=>`${T}+`).join("|"),u=e.map(Wr).join("|"),d=`(${n.concat(i.map(Wr)).join("|")})+`,g=`(${n.join("|")})+`,y=[u,o,d,l,s].join("|");return{identifierMatcher:new RegExp(d,"gu"),wordMatcher:new RegExp(g,"gu"),tokenMatcher:new RegExp(y,"gu")}}var xS=new Map;function Pr(t){let e=k().configuration.getOwnConfiguration("wordSeparators",{languageId:t}),r=e.join("\0");if(!xS.has(r)){let n={fixedTokens:X4,repeatableSymbols:Z4,identifierWordRegexes:J4,identifierWordDelimiters:e,numbersRegex:t9,singleSymbolsRegex:e9};xS.set(r,r9(n))}return xS.get(r)}function gP(t,e,r){return ln(t,Pr(e).tokenMatcher,r)}var n9=/\p{Lu}?\p{Ll}+|\p{Lu}+(?!\p{Ll})|\p{N}+/gu,Ds=class{constructor(e){this.wordRegex=Pr(e).wordMatcher}splitIdentifier(e){let r=tl(e,this.wordRegex);return r.length>1?r:tl(e,n9)}};var hP=({penalty:t})=>-t,yP=({isFirstLetter:t})=>t?-1:0;function xP(t){return({grapheme:{text:e},style:r})=>{let n=t.get({grapheme:e,hatStyle:r});return n==null?1/0:-n}}function TP(t,e){let r=Kc(n=>mT(e[n].filter(i=>i>t))??1/0);return({grapheme:{text:n}})=>r(n)}function TS(t){return e=>e.grapheme.text===t?.grapheme&&e.style===t?.hatStyle?1:0}function SP(t){switch(t){case"greedy":return({penalty:e})=>-e;case"balanced":return({penalty:e})=>-(e<2?0:1);case"stable":return e=>0}}function vP(t,e){if(t.length===0)return;let r=t;for(let n of e){if(r.length===1)return r[0];r=i9(r,n)}return r[0]}function i9(t,e){let r=-1/0,n=[];for(let i of t){let o=e(i);o<r||(o>r&&(r=o,n.length=0),n.push(i))}return n}function bP({hatOldTokenRanks:t,graphemeTokenRanks:e},r,n,i,o,s){return vP(s,[TS(i),SP(r),TS(o),xP(t),hP,yP,TP(n,e)])}function wP(t,e,r){let n={},i=new co(({grapheme:o,hatStyle:s})=>[o,s]);return t.forEach(({token:o,rank:s})=>{let l=e.get(o);l!=null&&i.set(l,s),r.getTokenGraphemes(o.text).forEach(({text:u})=>{let m;u in n?m=n[u]:(m=[],n[u]=m),m.push(s)})}),{hatOldTokenRanks:i,graphemeTokenRanks:n}}function EP(t,e=[]){return new Map(uT(nt,Ko)(Qc([e],t.visibleRanges.map(r=>fT(r.start.line,r.end.line+1)))).sort((r,n)=>r-n).map((r,n)=>[r,n]))}function _P(t,e){return(r,n)=>{let i=Math.abs(r.displayLine-t),o=Math.abs(n.displayLine-t);if(i<o)return-1;if(i>o)return 1;let s=Math.abs(r.range.start.character-e),l=Math.abs(n.range.start.character-e);return s-l}}function RP(t,e){let r=t.document.languageId,n=t.document.getText(e),i=t.document.offsetAt(e.start);return gP(n,r,o=>{let s=i+o.index,l=i+o.index+o[0].length,u=new Y(t.document.positionAt(s),t.document.positionAt(l));return{editor:t,text:o[0],range:u,offsets:{start:s,end:l}}})}function kP(t,e,r){let i=a9(t,e).flatMap(o=>{let s=o.selections[0].active,l=EP(o,[s.line]),u=nt(o.visibleRanges.map(m=>RP(o,m).map(d=>({...d,displayLine:l.get(d.range.start.line)}))));return u.sort(_P(l.get(s.line),s.character)),u});return o9(r,i).map((o,s)=>({token:o,rank:-s}))}function o9(t,e){return t==null?e:e.sort((r,n)=>{let i=t.has(r),o=t.has(n);return i&&!o?-1:!i&&o?1:0})}function a9(t,e){let r;return t==null?r=e:r=[t,...e.filter(n=>n!==t)],r}function SS({tokenGraphemeSplitter:t,enabledHatStyles:e,forceTokenHats:r,oldTokenHats:n,hatStability:i,activeTextEditor:o,visibleTextEditors:s}){let l=r==null?void 0:AP(r),u=AP(n),m=kP(o,s,l),d=wP(m,u,t),g=Object.keys(e),y=new ws(()=>[...g]);return m.map(({token:T,rank:w})=>{let E=s9(t,T,y,e),U=bP(d,i,w,l?.get(T),u.get(T),E);if(U!=null)return y.set(U.grapheme.text,y.get(U.grapheme.text).filter(V=>V!==U.style)),c9(T,U)}).filter(T=>T!=null)}function AP(t){let e=new co(({editor:r,offsets:n})=>[r.id,n.start,n.end]);return t.forEach(r=>e.set(r.token,r)),e}function s9(t,e,r,n){let i=[],o=t.getTokenGraphemes(e.text),s=new Set(new Ds(e.editor.document.languageId).splitIdentifier(e.text).map(l=>l.index));for(let l of o){let u=s.has(l.tokenStartOffset);for(let m of r.get(l.text))i.push({grapheme:l,style:m,penalty:n[m].penalty,isFirstLetter:u})}return i}function c9(t,e){return{hatStyle:e.style,grapheme:e.grapheme.text,token:t,hatRange:new Y(t.range.start.translate(void 0,e.grapheme.tokenStartOffset),t.range.start.translate(void 0,e.grapheme.tokenEndOffset))}}var xf=class{constructor(e,r){this.hats=e;this.context=r;this.disposables=[];k().disposeOnExit(this);let n=new Kn(k().configuration,()=>this.allocateHats());this.disposables.push(this.hats.onDidChangeEnabledHatStyles(n.run),this.hats.onDidChangeIsEnabled(n.run),k().onDidOpenTextDocument(n.run),k().onDidCloseTextDocument(n.run),k().onDidChangeActiveTextEditor(n.run),k().onDidChangeVisibleTextEditors(n.run),k().onDidChangeTextDocument(n.run),k().onDidChangeTextEditorSelection(n.run),k().onDidChangeTextEditorVisibleRanges(n.run),aa().registerAlgorithmChangeListener(n.run),n)}async allocateHats(e){let r=await this.context.getActiveMap();e=e?.map(i=>({...i,grapheme:aa().normalizeGrapheme(i.grapheme)}));let n=this.hats.isEnabled?SS({tokenGraphemeSplitter:aa(),enabledHatStyles:this.hats.enabledHatStyles,forceTokenHats:e,oldTokenHats:r.tokenHats,hatStability:k().configuration.getOwnConfiguration("experimental.hatStability"),activeTextEditor:k().activeTextEditor,visibleTextEditors:k().visibleTextEditors}):[];r.setTokenHats(n),await this.hats.setHatRanges(n.map(({hatStyle:i,hatRange:o,token:{editor:s}})=>({editor:s,range:o,styleName:i})))}dispose(){this.disposables.forEach(({dispose:e})=>e())}};var Tf=class t{constructor(e){this.rangeUpdater=e;this.isExpired=!1;this.documentTokenLists=new Map;this.deregisterFunctions=[];this.map={};this._tokenHats=[]}get tokenHats(){return this._tokenHats}getDocumentTokenList(e){let r=e.uri.toString(),n=this.documentTokenLists.get(r);return n==null&&(n=[],this.documentTokenLists.set(r,n),this.deregisterFunctions.push(this.rangeUpdater.registerRangeInfoList(e,n))),n}clone(){let e=new t(this.rangeUpdater);return e.setTokenHats(this._tokenHats),e}setTokenHats(e){this.map={},this.documentTokenLists=new Map,this.deregisterFunctions.forEach(n=>n());let r=e.map(n=>{let{hatStyle:i,grapheme:o,token:s}=n,l=this.makeTokenLive(s);return this.map[fl(i,o)]=l,{...n,token:l}});this._tokenHats=r}makeTokenLive(e){let{tokenMatcher:r}=Pr(e.editor.document.languageId),n={...e,expansionBehavior:{start:{type:"regex",regex:r},end:{type:"regex",regex:r}}};return this.getDocumentTokenList(e.editor.document).push(n),n}getEntries(){return this.checkExpired(),Object.entries(this.map)}getToken(e,r){return this.checkExpired(),this.map[fl(e,aa().normalizeGrapheme(r))]}checkExpired(){if(this.isExpired)throw Error("Map snapshot has expired")}dispose(){this.isExpired=!0,this.deregisterFunctions.forEach(e=>e())}};var l9=6e4,Sf=class{constructor(e,r,n,i){this.debug=r;this.commandServerApi=i;this.prePhraseMapsSnapshotTimestamp=null;this.lastSignalVersion=null;k().disposeOnExit(this),this.activeMap=new Tf(e),this.getActiveMap=this.getActiveMap.bind(this),this.allocateHats=this.allocateHats.bind(this),this.hatAllocator=new xf(n,{getActiveMap:this.getActiveMap})}allocateHats(e){return this.hatAllocator.allocateHats(e)}async getActiveMap(){return await this.maybeTakePrePhraseSnapshot(),this.activeMap}async getReadableMap(e){return await this.maybeTakePrePhraseSnapshot(),e?this.lastSignalVersion==null?(console.error("Pre phrase snapshot requested but no signal was present; please upgrade command client"),this.activeMap):this.prePhraseMapSnapshot==null?(console.error("Navigation map pre-phrase snapshot requested, but no snapshot has been taken"),this.activeMap):performance.now()-this.prePhraseMapsSnapshotTimestamp>l9?(console.error("Navigation map pre-phrase snapshot requested, but snapshot is more than a minute old"),this.activeMap):this.prePhraseMapSnapshot:this.activeMap}dispose(){this.activeMap.dispose(),this.prePhraseMapSnapshot!=null&&this.prePhraseMapSnapshot.dispose()}async maybeTakePrePhraseSnapshot(){let e=await this.commandServerApi.signals.prePhrase.getVersion();e!==this.lastSignalVersion&&(this.debug.log("taking snapshot"),this.lastSignalVersion=e,e!=null&&this.takePrePhraseSnapshot())}takePrePhraseSnapshot(){this.prePhraseMapSnapshot!=null&&this.prePhraseMapSnapshot.dispose(),this.prePhraseMapSnapshot=this.activeMap.clone(),this.prePhraseMapsSnapshotTimestamp=performance.now()}};function vS(t,e,r){let n=t.get(e);return n==null&&(n=r(),t.set(e,n)),n}var _S=Hr(bl(),1);function RS(t,e){let{originalOffsets:{start:r,end:n},finalOffsets:{end:i},displacement:o}=t,{offsets:{start:s,end:l}}=e;return(0,_S.invariant)(n>r,()=>"Change range expected to be nonempty"),(0,_S.invariant)(n>=s&&r<=l,()=>"Change range expected to intersect with selection range"),{start:n<=s?s+o:Math.min(s,i),end:n<=l?l+o:Math.min(l,i)}}var IP=Hr(bl(),1);function kS(t,e){let{event:{text:r,isReplace:n},finalOffsets:{start:i,end:o}}=t;if((0,IP.invariant)(i===t.originalOffsets.end&&i===e.offsets.start&&i===e.offsets.end,()=>"Selection range and change range expected to be same empty range"),n){let s=e.expansionBehavior.end;switch(s.type){case"closed":return{start:i,end:i};case"open":return{start:i,end:o};case"regex":{let l=r.match(hm(s.regex));return l==null?{start:i,end:i}:{start:i,end:i+l[0].length}}}}else{let s=e.expansionBehavior.start;switch(s.type){case"closed":return{start:o,end:o};case"open":return{start:i,end:o};case"regex":{let l=r.search(gm(s.regex));return l===-1?{start:o,end:o}:{start:i+l,end:o}}}}}var AS=Hr(bl(),1);function PS(t,e){let{event:{text:r},originalOffsets:{start:n},displacement:i}=t,{offsets:{start:o,end:s},text:l}=e;if((0,AS.invariant)(s>o,()=>"Selection range expected to be nonempty"),(0,AS.invariant)(n>=o&&n<=s,()=>"Insertion offset expected to intersect with selection range"),n>o&&n<s)return{start:o,end:s+i};if(n===o){let u=e.expansionBehavior.start,m=s+i;switch(u.type){case"closed":return{start:o+i,end:m};case"open":return{start:o,end:m};case"regex":{let d=r+l,g=gm(u.regex),y=d.search(g);for(;y>r.length;)d=d.slice(0,y),y=d.search(g);return y===-1?{start:o,end:m}:{start:o+y,end:m}}}}else{let u=e.expansionBehavior.end,m=o;switch(u.type){case"closed":return{start:m,end:s};case"open":return{start:m,end:s+i};case"regex":{let d=l+r,g=hm(u.regex),y=d.match(g),T=y==null?0:y[0].length;for(;T!==0&&T<l.length;)d=l.slice(T)+r,y=d.match(g),T=y==null?0:T+y[0].length;return T===0?{start:m,end:s}:{start:m,end:o+T}}}}}function CP(t,e,r){let{start:n,end:i}=t.originalOffsets,{start:o,end:s}=e.offsets,l=Math.min(n,o),u="";return o<n&&(u+=e.text.substring(0,n-o)),u+=t.event.text,i<s&&(u+=e.text.substring(s-i,e.text.length)),u.substring(r.start-l,r.end-l)}function OP(t,e){let{document:r,contentChanges:n}=t,i=n.map(o=>{let s=o.text.length-o.rangeLength,l=o.rangeOffset,u=l+o.rangeLength,m=l,d=u+s;return{displacement:s,event:o,originalOffsets:{start:l,end:u},finalOffsets:{start:m,end:d}}});for(let o of e){let s=o.offsets,l=i.map(m=>{let d;return m.originalOffsets.start>s.end?{start:0,end:0}:m.originalOffsets.end<s.start?{start:m.displacement,end:m.displacement}:(m.event.rangeLength===0?o.range.isEmpty?d=kS(m,o):d=PS(m,o):d=RS(m,o),o.text=CP(m,o,d),{start:d.start-s.start,end:d.end-s.end})}),u={start:s.start+lm(l,({start:m})=>m),end:s.end+lm(l,({end:m})=>m)};o.range=o.range.with(r.positionAt(u.start),r.positionAt(u.end)),o.offsets=u}}var bf=class{constructor(){this.rangeInfoLists=new Map;this.replaceEditLists=new Map;this.listenForDocumentChanges()}getDocumentRangeInfoLists(e){return vS(this.rangeInfoLists,e.uri.toString(),()=>[])}getDocumentReplaceEditLists(e){return vS(this.replaceEditLists,e.uri.toString(),()=>[])}registerRangeInfoList(e,r){let n=this.getDocumentRangeInfoLists(e);return n.push(r),()=>fr(n,r)}registerReplaceEditList(e,r){let n=this.getDocumentReplaceEditLists(e);return n.push(r),()=>fr(n,r)}*documentRangeInfoGenerator(e){let r=this.getDocumentRangeInfoLists(e);for(let n of r)for(let i of n)yield i}listenForDocumentChanges(){this.disposable=k().onDidChangeTextDocument(e=>{let r=this.getDocumentReplaceEditLists(e.document),n={...e,contentChanges:e.contentChanges.map(i=>x9(r,i)?{...i,isReplace:!0}:i)};OP(n,this.documentRangeInfoGenerator(e.document))})}dispose(){this.disposable.dispose()}};function x9(t,e){for(let r of t)for(let n of r)if(n.range.isRangeEqual(e.range)&&n.text===e.text)return!0;return!1}var wf=class{constructor(){this.signals={prePhrase:{getVersion(){return Promise.resolve(null)}}}}getFocusedElementType(){return Promise.resolve(void 0)}};var Ef=class{async allocateHats(){}async getReadableMap(){return{getEntries(){return[]},getToken(){throw new Error("Hat map is disabled")}}}dispose(){}};var _f=class{onDidChangeDefinition(e){return{dispose:()=>{}}}loadLanguage(e){return Promise.resolve()}get(e){}getNodeAtLocation(e,r){}dispose(){}};var Rf=class{getSnippetStrict(e){throw new Error("Snippets are not implemented.")}openNewSnippetFile(e,r){throw new Error("Snippets are not implemented.")}};var kf=class{getSpokenFormEntries(){throw new bs}onDidChange(){return{dispose:()=>{}}}};var Af=class{getTree(e){throw new Error("Tree sitter not provided")}loadLanguage(e){return Promise.resolve(!1)}getNodeAtLocation(e,r){throw new Error("Tree sitter not provided")}createQuery(e,r){throw new Error("Tree sitter not provided")}};var st=class extends Error{constructor(r,n=!1,i=!1){super(`No spoken form for: ${r}`);this.reason=r;this.requiresTalonUpdate=n;this.isPrivate=i}};var NP={curlyBrackets:["{","}"],angleBrackets:["<",">"],escapedDoubleQuotes:['\\"','\\"'],escapedSingleQuotes:["\\'","\\'"],escapedParentheses:["\\(","\\)"],escapedSquareBrackets:["\\[","\\]"],doubleQuotes:['"','"'],parentheses:["(",")"],backtickQuotes:["`","`"],squareBrackets:["[","]"],singleQuotes:["'","'"],tripleBacktickQuotes:["```","```"],tripleDoubleQuotes:['"""','"""'],tripleSingleQuotes:["'''","'''"],whitespace:[" "," "],any:null,string:null,collectionBoundary:null};var UP=new co(t=>t);for(let[t,e]of Object.entries(NP))e!=null&&UP.set(e,t);function HP(t,e,r){let n=UP.get([e,r]);if(n==null)throw Error(`Unknown surrounding pair delimiters '${e} ${r}'`);return t.pairedDelimiter[n]}function BP(t){throw new st(`${t.type} insertion snippet`)}function VP(t){throw new st(`${t.type} wrap with snippet`)}function wl(t,e,r){let n=r==="vertical"?`${bt.verticalRange} `:"";if(t&&e)return n+bt.rangeExclusive;if(t)throw new st("Range exclude anchor");return e?n+bt.rangeExcludingEnd:r==="vertical"?bt.verticalRange:bt.rangeInclusive}function WP(t){return Object.fromEntries(Object.entries(t).map(([e,r])=>[e,Object.fromEntries(Object.entries(r).map(([n,i])=>[n,{type:"customizable",spokenForms:i,spokenFormType:e,id:n}]))]))}var T9=["zero","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen","twenty","twenty one","twenty two","twenty three","twenty four","twenty five","twenty six","twenty seven","twenty eight","twenty nine","thirty","thirty one","thirty two","thirty three","thirty four","thirty five","thirty six","thirty seven","thirty eight","thirty nine","forty","forty one","forty two","forty three","forty four","forty five","forty six","forty seven","forty eight","forty nine","fifty","fifty one","fifty two","fifty three","fifty four","fifty five","fifty six","fifty seven","fifty eight","fifty nine","sixty","sixty one","sixty two","sixty three","sixty four","sixty five","sixty six","sixty seven","sixty eight","sixty nine","seventy","seventy one","seventy two","seventy three","seventy four","seventy five","seventy six","seventy seven","seventy eight","seventy nine","eighty","eighty one","eighty two","eighty three","eighty four","eighty five","eighty six","eighty seven","eighty eight","eighty nine","ninety","ninety one","ninety two","ninety three","ninety four","ninety five","ninety six","ninety seven","ninety eight","ninety nine"],S9=["zeroth","first","second","third","fourth","fifth","sixth","seventh","eighth","ninth","tenth","eleventh","twelfth","thirteenth","fourteenth","fifteenth","sixteenth","seventeenth","eighteenth","nineteenth","twentieth"];function Fs(t){let e=T9[t];if(e==null)throw Error(`Unknown number '${t}'`);return e}function El(t){let e=S9[t];if(e==null)throw Error(`Unknown ordinal '${t}'`);return e}var Pf=class{constructor(e){this.spokenFormMap=e;this.handleModifier=this.handleModifier.bind(this)}handlePrimitiveTarget(e){let r=[];return e.modifiers!=null&&r.push(e.modifiers.map(this.handleModifier)),e.mark!=null&&r.push(this.handleMark(e.mark)),r}handleModifier(e){switch(e.type){case"cascading":case"modifyIfUntyped":case"preferredScope":throw new st(`Modifier '${e.type}'`);case"containingScope":return e.ancestorIndex==null||e.ancestorIndex===0?this.handleScopeType(e.scopeType):[new Array(e.ancestorIndex).fill(this.spokenFormMap.modifierExtra.ancestor),this.handleScopeType(e.scopeType)];case"everyScope":return[this.spokenFormMap.simpleModifier.everyScope,this.handleScopeType(e.scopeType)];case"extendThroughStartOf":case"extendThroughEndOf":{let r=this.spokenFormMap.simpleModifier[e.type];return e.modifiers!=null?[r,e.modifiers.map(this.handleModifier)]:[r]}case"relativeScope":return e.offset===0?this.handleRelativeScopeInclusive(e):this.handleRelativeScopeExclusive(e);case"ordinalScope":{let r=this.handleScopeType(e.scopeType),n=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.length===1)return e.start===-1?[n,this.spokenFormMap.modifierExtra.last,r]:e.start===0?[n,this.spokenFormMap.modifierExtra.first,r]:e.start<0?[n,El(Math.abs(e.start)),this.spokenFormMap.modifierExtra.last,r]:[n,El(e.start+1),r];let i=Fs(e.length);if(e.start===0)return[n,this.spokenFormMap.modifierExtra.first,i,_l(r)];if(e.start===-e.length)return[n,this.spokenFormMap.modifierExtra.last,i,_l(r)];throw new st(`'${e.type}' with count > 1 and offset away from start / end`)}case"range":{if(e.anchor.type==="ordinalScope"&&e.active.type==="ordinalScope"&&e.anchor.length===1&&e.active.length===1&&e.anchor.scopeType.type===e.active.scopeType.type){let r=e.anchor.start===-1?this.spokenFormMap.modifierExtra.last:El(e.anchor.start+1),n=this.handleModifier(e.active),i=wl(e.excludeAnchor,e.excludeActive);return[r,i,n]}throw Error(`Modifier '${e.type}' is not fully implemented`)}default:return[this.spokenFormMap.simpleModifier[e.type]]}}handleRelativeScopeInclusive(e){let r=this.handleScopeType(e.scopeType),n=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.length===1){let s=e.direction==="forward"?bt.forward:bt.backward;return[n,r,s]}let i=Fs(e.length),o=_l(r);return e.direction==="forward"?[n,i,o]:[n,i,o,bt.backward]}handleRelativeScopeExclusive(e){let r=this.handleScopeType(e.scopeType),n=e.direction==="forward"?bt.next:bt.previous,i=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.offset===1){let o=Fs(e.length);if(e.length===1)return[i,n,r];let s=_l(r);return[i,n,o,s]}if(e.length===1){let o=El(e.offset);return[i,o,n,r]}throw new st(`${e.type} modifier with offset > 1 and length > 1`)}handleScopeType(e){switch(e.type){case"oneOf":case"surroundingPairInterior":throw new st(`Scope type '${e.type}'`);case"glyph":return[this.spokenFormMap.complexScopeTypeType.glyph,jP(this.spokenFormMap.grapheme,"grapheme",e.character)];case"surroundingPair":{let r=this.spokenFormMap.pairedDelimiter[e.delimiter];return e.forceDirection!=null?[this.spokenFormMap.surroundingPairForceDirection[e.forceDirection],r]:r}case"customRegex":return this.spokenFormMap.customRegex[e.regex]??{type:"customizable",spokenForms:{spokenForms:[],isCustom:!0,defaultSpokenForms:[],requiresTalonUpdate:!1,isPrivate:!1},spokenFormType:"customRegex",id:e.regex};case"interior":return this.spokenFormMap.simpleModifier.interiorOnly;default:return this.spokenFormMap.simpleScopeTypeType[e.type]}}handleMark(e){switch(e.type){case"decoratedSymbol":{let[r,n]=e.symbolColor.split("-"),i=[];return r!=="default"&&i.push(IA(r)),n!=null&&i.push(CA(n)),i.push(jP(this.spokenFormMap.grapheme,"grapheme",e.character)),i}case"lineNumber":return this.handleLineNumberMark(e);case"range":{if(e.anchor.type==="lineNumber"&&e.active.type==="lineNumber"){let[r,n]=this.handleLineNumberMark(e.anchor),[i,o]=this.handleLineNumberMark(e.active);if(r===i){let s=wl(e.excludeAnchor,e.excludeActive);return[r,n,s,o]}}throw Error(`Mark '${e.type}' is not fully implemented`)}case"explicit":case"keyboard":case"target":throw new st(`Mark '${e.type}'`);default:return[Wm[e.type]]}}handleLineNumberMark(e){switch(e.lineNumberType){case"absolute":throw new st("Absolute line numbers");case"modulo100":return[$m.modulo100,Fs(e.lineNumber+1)];case"relative":return[e.lineNumber<0?$m.relativeUp:$m.relativeDown,Fs(Math.abs(e.lineNumber))]}}};function _l(t){if(typeof t=="string")return $P(t);if(Array.isArray(t)){if(t.length===0)return t;let e=t[t.length-1];return[...t.slice(0,-1),_l(e)]}return{...t,spokenForms:{...t.spokenForms,spokenForms:t.spokenForms.spokenForms.map($P)}}}function $P(t){return`${t}s`}function jP(t,e,r){let n=t[r];if(n==null)throw new st(`${e} '${r}'`);return n}var Ls=class{constructor(e){this.spokenFormMap=WP(e),this.primitiveGenerator=new Pf(this.spokenFormMap)}getSpokenFormForSingleTerm(e,r){return this.componentsToSpokenForm(()=>{let n=this.spokenFormMap[e][r];if(n==null)throw new st(`${e} with id ${r}`);return n})}processCommand(e){return this.componentsToSpokenForm(()=>this.handleAction(e.action))}processScopeType(e){return this.componentsToSpokenForm(()=>[this.primitiveGenerator.handleScopeType(e)])}componentsToSpokenForm(e){try{return{type:"success",spokenForms:zP(e())}}catch(r){if(r instanceof st)return{type:"error",reason:r.reason,requiresTalonUpdate:r.requiresTalonUpdate,isPrivate:r.isPrivate};throw r}}handleAction(e){switch(e.name){case"editNew":case"getText":case"replace":case"executeCommand":case"parsed":case"private.getTargets":case"private.setKeyboardTarget":throw new st(`Action '${e.name}'`);case"replaceWithTarget":case"moveToTarget":return[this.spokenFormMap.action[e.name],this.handleTarget(e.source),this.handleDestination(e.destination)];case"swapTargets":return[this.spokenFormMap.action[e.name],this.handleTarget(e.target1),bt.swapConnective,this.handleTarget(e.target2)];case"callAsFunction":return e.argument.type==="implicit"?[this.spokenFormMap.action[e.name],this.handleTarget(e.callee)]:[this.spokenFormMap.action[e.name],this.handleTarget(e.callee),"on",this.handleTarget(e.argument)];case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return[HP(this.spokenFormMap,e.left,e.right),this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"pasteFromClipboard":return[this.spokenFormMap.action[e.name],this.handleDestination(e.destination)];case"insertSnippet":return[this.spokenFormMap.action[e.name],BP(e.snippetDescription),this.handleDestination(e.destination)];case"generateSnippet":if(e.snippetName!=null)throw new st(`${e.name}.snippetName`);return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"wrapWithSnippet":return[VP(e.snippetDescription),this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"highlight":{if(e.highlightId!=null)throw new st(`${e.name}.highlightId`);return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)]}default:return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)]}}handleTarget(e){switch(e.type){case"list":if(e.elements.length<2)throw new st("List target with < 2 elements");return e.elements.map((r,n)=>n===0?this.handleTarget(r):[bt.listConnective,this.handleTarget(r)]);case"range":{let r=this.handleTarget(e.anchor),n=this.handleTarget(e.active),i=wl(e.excludeAnchor,e.excludeActive,e.rangeType);return[r,i,n]}case"primitive":return this.primitiveGenerator.handlePrimitiveTarget(e);case"implicit":return[]}}handleDestination(e){switch(e.type){case"list":if(e.destinations.length<2)throw new st("List destination with < 2 elements");return e.destinations.map((r,n)=>n===0?this.handleDestination(r):[bt.listConnective,this.handleDestination(r)]);case"primitive":return[this.handleInsertionMode(e.insertionMode),this.handleTarget(e.target)];case"implicit":return[]}}handleInsertionMode(e){switch(e){case"to":return bt.sourceDestinationConnective;case"before":return bt.before;case"after":return bt.after}}};function zP(t){if(typeof t=="string")return[t];if(Array.isArray(t))return t.length===0?[""]:qP(t.map(zP)).map(e=>e.filter(r=>r.length!==0).join(" "));if(t.spokenForms.spokenForms.length===0){let e=`${ul(t.spokenFormType)} with id ${t.id}`,r;throw t.spokenForms.isPrivate?r="this is a private spoken form currently only for internal experimentation":t.spokenForms.requiresTalonUpdate?r="please update talon to the latest version (see https://www.cursorless.org/docs/user/updating/)":r="please see https://www.cursorless.org/docs/user/customization/ for more information",new st(`${e}; ${r}`,t.spokenForms.requiresTalonUpdate,t.spokenForms.isPrivate)}return t.spokenForms.spokenForms}function qP(t){if(t.length===0)return[];if(t.length===1)return t[0].map(i=>[i]);let[e,...r]=t,n=qP(r);return e.flatMap(i=>n.map(o=>[i,...o]))}var Mf=class{constructor(e){this.talonSpokenForms=e;this.notifier=new tr;this.spokenFormMap_={...ki};this.onDidChangeCustomSpokenForms=this.notifier.registerListener;this.disposable=e.onDidChange(()=>this.updateSpokenFormMaps()),this.customSpokenFormsInitialized=this.updateSpokenFormMaps()}get spokenFormMap(){return this.spokenFormMap_}get needsInitialTalonUpdate(){return this.needsInitialTalonUpdate_}async updateSpokenFormMaps(){let e;try{if(e=await this.talonSpokenForms.getSpokenFormEntries(),e.length===0)throw new Error("Custom spoken forms list empty")}catch(r){if(r instanceof ll)this.needsInitialTalonUpdate_=!0;else if(!(r instanceof bs)){console.error("Error loading custom spoken forms",r);let n=r.message.replace(/\.$/,"");ut(k().messages,"CustomSpokenForms.updateSpokenFormMaps",`Error loading custom spoken forms: ${n}. Falling back to default spoken forms.`)}this.spokenFormMap_={...ki},this.notifier.notifyListeners();return}for(let r of fA)v9(this.spokenFormMap_,r,eS[r],Object.fromEntries(e.filter(n=>n.type===r).map(({id:n,spokenForms:i})=>[n,i])));this.notifier.notifyListeners()}getCustomRegexScopeTypes(){return Object.keys(this.spokenFormMap_.customRegex).map(e=>({type:"customRegex",regex:e}))}dispose(){this.disposable.dispose()}};function v9(t,e,r,n){let i=Array.from(new Set([...Object.keys(r),...Object.keys(n)])),o={};for(let s of i){let{defaultSpokenForms:l=[],isPrivate:u=!1}=r[s]??{},m=n[s];o[s]=m==null?{defaultSpokenForms:l,spokenForms:[],requiresTalonUpdate:!u,isCustom:!1,isPrivate:u}:{defaultSpokenForms:l,spokenForms:m,requiresTalonUpdate:!1,isCustom:!wi(l,m),isPrivate:u}}t[e]=o}var Df=class{constructor(e){this.customSpokenForms=new Mf(e),this.customSpokenFormsInitialized=this.customSpokenForms.customSpokenFormsInitialized,this.spokenFormGenerator=new Ls(this.customSpokenForms.spokenFormMap),this.disposable=this.customSpokenForms.onDidChangeCustomSpokenForms(()=>{this.spokenFormGenerator=new Ls(this.customSpokenForms.spokenFormMap)})}onDidChangeCustomSpokenForms(e){return this.customSpokenForms.onDidChangeCustomSpokenForms(e)}commandToSpokenForm(e){return this.spokenFormGenerator.processCommand(e)}scopeTypeToSpokenForm(e){return this.spokenFormGenerator.processScopeType(e)}actionIdToSpokenForm(e){return this.spokenFormGenerator.getSpokenFormForSingleTerm("action",e)}graphemeToSpokenForm(e){return this.spokenFormGenerator.getSpokenFormForSingleTerm("grapheme",e)}getCustomRegexScopeTypes(){return this.customSpokenForms.getCustomRegexScopeTypes()}get needsInitialTalonUpdate(){return this.customSpokenForms.needsInitialTalonUpdate}dispose(){this.disposable.dispose()}};function*b9(t){for(let e of t)for(let r of e)yield r}function*Rl(t,e){let r=Lf(e),n=t;for(;n-- >0;){let i=r.next();if(!i.done)yield i.value;else return}}function*MS(t){let e=Lf(t),r=e.next();if(r.done)return;let n=r.value;for(let i of e)yield[n,i],n=i}var YSe=Symbol();function*w9(t=0,e=1){let r=t;for(;;)yield r,r+=e}function*Ff(t,e){let r=0;for(let n of t)e(n,r++)&&(yield n)}function*Gt(t,e){for(let r of t)yield e(r)}function*KP(t,e,r,n=1){let i,o;if(r!==void 0?(i=e,o=r):(i=0,o=e),i<0)throw new Error("start cannot be negative");if(o!==null&&o<0)throw new Error("stop cannot be negative");if(n<=0)throw new Error("step cannot be negative");let s=-1,l=Lf(t),u;for(;;){if(s++,o!==null&&s>=o||(u=l.next(),u.done))return;s<i||(s-i)%n===0&&(yield u.value)}}function*E9(t,e){let r=0,n=Lf(t),i;for(;!(i=n.next()).done;){let o=i.value;if(!e(o,r++))return;yield o}}function Lf(t){return t[Symbol.iterator]()}function Is(t,e){return Array.from(Gt(t,e))}function GP(t,e,r){let n=w9(t,r),i=r>=0?o=>o<e:o=>o>e;return E9(n,i)}function QP(t,e,r=1){return e!==void 0?GP(t,e,r):GP(0,t,r)}function If(t,e){return b9(Gt(t,e))}function qr(t,e,{domain:r},{domain:n}){return t==="forward"?_9(e,r,n):R9(e,r,n)}function _9(t,e,r){let n=e.start.isAfterOrEqual(t),i=r.start.isAfterOrEqual(t);if(n&&i){let s=e.start.compareTo(r.start);return s===0?e.end.compareTo(r.end):s}if(!n&&!i){let s=e.end.compareTo(r.end);return s===0?-e.start.compareTo(r.start):s}if(!n&&i){let s=e.end.compareTo(r.start);return s!==0?s:r.isEmpty?1:-1}let o=e.start.compareTo(r.end);return o!==0?o:e.isEmpty?-1:1}function R9(t,e,r){let n=e.end.isBeforeOrEqual(t),i=r.end.isBeforeOrEqual(t);if(n&&i){let s=-e.end.compareTo(r.end);return s===0?-e.start.compareTo(r.start):s}if(!n&&!i){let s=-e.start.compareTo(r.start);return s===0?e.end.compareTo(r.end):s}if(!n&&i){let s=-e.start.compareTo(r.end);return s!==0?s:r.isEmpty?1:-1}let o=-e.end.compareTo(r.start);return o!==0?o:e.isEmpty?-1:1}function YP(t,e,r,n,i,o){return k9(t,n,i,o)&&(i==null||qr(r,n.includeDescendantScopes?t:e,i,o)<0)}function k9(t,e,r,n){let{containment:i,distalPosition:o,allowAdjacentScopes:s,skipAncestorScopes:l}=e,{domain:u}=n;switch(i){case"disallowed":if(u.contains(t))return!1;break;case"disallowedIfStrict":if(fP(u,t))return!1;break;case"required":if(!u.contains(t))return!1;break}return l&&r!=null&&u.contains(r.domain)?!1:A9(new Y(t,o),u,s)}function A9(t,e,r){let n=t.intersection(e);return n==null?!1:!n.isEmpty||r||e.isEmpty}var P9={containment:null,allowAdjacentScopes:!1,skipAncestorScopes:!1,includeDescendantScopes:!1},We=class{constructor(){this.includeAdjacentInEvery=!1}*generateScopes(e,r,n,i={}){let o={...P9,...i,distalPosition:i.distalPosition??(n==="forward"?e.document.range.end:e.document.range.start)},s,l=r;for(let u of this.generateScopeCandidates(e,r,n,o))if(YP(r,l,n,o,s,u)&&(yield u,s=u,l=n==="forward"?u.domain.end:u.domain.start),this.canStopEarly(r,n,o,s,u))return}canStopEarly(e,r,n,i,o){let{containment:s,distalPosition:l,skipAncestorScopes:u}=n;if(this.isHierarchical&&!u)return!1;let m=this.isHierarchical&&u?i:o;return m==null?!1:!!(s==="required"&&(r==="forward"?m.domain.end.isAfter(e):m.domain.start.isBefore(e))||(r==="forward"?m.domain.end.isAfterOrEqual(l):m.domain.start.isBeforeOrEqual(l)))}};var Mr=class extends We{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.scopeType=n;this.languageId=i;this.isHierarchical=!1}get searchScopeType(){return this.iterationScopeType}get searchScopeHandler(){return this._searchScopeHandler==null&&(this._searchScopeHandler=this.scopeHandlerFactory.create(this.searchScopeType,this.languageId)),this._searchScopeHandler}generateScopeCandidates(r,n,i,o){let{containment:s,...l}=o,u=this.searchScopeHandler.generateScopes(r,n,i,{containment:s==="required"?"required":void 0,...l});return If(u,m=>this.generateScopesInSearchScope(i,m))}};var Cf=class extends We{constructor(r,n){super();this.scopeType={type:"line"};this.iterationScopeType={type:"paragraph"};this.isHierarchical=!1;this.includeAdjacentInEvery=!0}*generateScopeCandidates(r,n,i){if(i==="forward")for(let o=n.line;o<r.document.lineCount;o++)yield ZP(r,o);else for(let o=n.line;o>=0;o--)yield ZP(r,o)}};function ZP(t,e){let{range:r}=t.document.lineAt(e);return{editor:t,domain:r,getTargets:n=>[DS(t,n,r)]}}function DS(t,e,r){return new gr({editor:t,isReversed:e,contentRange:FS(t,r)})}function FS(t,e){let r=t.document.lineAt(e.start),n=t.document.lineAt(e.end);return new Y(r.rangeTrimmed?.start??r.range.start,n.rangeTrimmed?.end??n.range.end)}function gn(t,e,r,n){let i=e.document.offsetAt(r.start),o=e.document.getText(r),s=l=>new Y(e.document.positionAt(i+l.index),e.document.positionAt(i+l.index+l[0].length));return t.lastIndex=0,n==="forward"?Gt(o.matchAll(t),s):Array.from(o.matchAll(t),s).reverse()}var Of=class extends Mr{constructor(){super(...arguments);this.scopeType={type:"identifier"};this.iterationScopeType={type:"line"};this.regex=Pr(this.languageId).identifierMatcher}generateScopesInSearchScope(r,{editor:n,domain:i}){return Gt(gn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new ir({editor:n,contentRange:o,isReversed:s})]}))}};function Nf(t,e,r){let n=t.editor.document.getText(t.domain),i=e.editor.document.getText(e.domain);for(let o of r){let s=Qo(o,n),l=Qo(o,i);if(s&&!l)return!0;if(l&&!s)return!1}}var M9=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}\p{Z}\p{C}]/gu,D9=/[$]/g,F9=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}]/gu,Uf=class extends Mr{constructor(){super(...arguments);this.scopeType={type:"character"};this.iterationScopeType={type:"token"}}get searchScopeType(){return{type:"line"}}generateScopesInSearchScope(r,{editor:n,domain:i}){return Gt(gn(M9,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new Ke({editor:n,contentRange:o,isReversed:s,textualType:"character"})]}))}isPreferredOver(r,n){let{identifierMatcher:i}=Pr(this.languageId);return Nf(r,n,[i,D9,F9])}};var Hf=class extends Mr{constructor(){super(...arguments);this.scopeType={type:"word"};this.iterationScopeType={type:"identifier"};this.wordTokenizer=new Ds(this.languageId)}getScopesInSearchScope({editor:r,domain:n}){let{document:i}=r,o=i.offsetAt(n.start),l=this.wordTokenizer.splitIdentifier(i.getText(n)).map(u=>new Y(i.positionAt(o+u.index),i.positionAt(o+u.index+u.text.length)));return l.map((u,m)=>({editor:r,domain:u,getTargets:d=>{let g=m>0?l[m-1]:null,y=m+1<l.length?l[m+1]:null;return[L9(d,r,g,u,y)]}}))}generateScopesInSearchScope(r,n){let i=this.getScopesInSearchScope(n);return r==="backward"&&i.reverse(),i}};function L9(t,e,r,n,i){let o=r!=null&&n.start.isAfter(r.end)?new Y(r.end,n.start):void 0,s=i!=null&&i.start.isAfter(n.end)?new Y(n.end,i.start):void 0,u=o!=null||s!=null?e.document.getText(o??s):"";return new lf({editor:e,isReversed:t,contentRange:n,insertionDelimiter:u,leadingDelimiterRange:o,trailingDelimiterRange:s})}var I9=/[$]/g,Bf=class extends Mr{constructor(){super(...arguments);this.scopeType={type:"token"};this.iterationScopeType={type:"line"};this.regex=Pr(this.languageId).tokenMatcher}generateScopesInSearchScope(r,{editor:n,domain:i}){return Gt(gn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new ir({editor:n,contentRange:o,isReversed:s})]}))}isPreferredOver(r,n){let{identifierMatcher:i}=Pr(this.languageId);return Nf(r,n,[i,I9])}};var Vf=class extends We{constructor(r,n){super();this.scopeType={type:"document"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i){let o=r.document.range;yield{editor:r,domain:o,getTargets:s=>[new af({editor:r,isReversed:s,contentRange:o})]}}};function Wf(t,e,r,n,i){if(!t&&n!=null&&i!=null&&dS(e,n)>dS(e,i))return r.union(n)}function Cs(t){return t.containment==null&&t.skipAncestorScopes}function XP(t,e,r,{containment:n,distalPosition:i,allowAdjacentScopes:o}){let{start:s,end:l}=C9(t.offsetAt(e),t.offsetAt(i),r,n,o);return{start:t.positionAt(s),end:t.positionAt(l)}}function C9(t,e,r,n,i){let o=i?1:0;if(n==="required")return r==="forward"?{start:t-o,end:t+1}:{start:t-1,end:t+o};let s=n==="disallowed"?1:-o;return r==="forward"?{start:t+s,end:e+o}:{start:e-o,end:t-s}}function JP(t,e,r){let n=[],i=[];for(let o of t)i.length===0||e(i[i.length-1],o)?i.push(o):(n.push(r(i)),i=[o]);return i.length>0&&n.push(r(i)),n}var Os=class extends We{constructor(r){super();this.query=r}*generateScopeCandidates(r,n,i,o){let{document:s}=r,l=Cs(o),{start:u,end:m}=XP(s,n,i,o),d=this.query.matches(s,u,m).map(g=>this.matchToScope(r,g,l)).filter(g=>g!=null).sort((g,y)=>qr(i,n,g,y));yield*JP(d,(g,y)=>g.domain.isRangeEqual(y.domain),g=>g.length===1?g[0]:{...g[0],getTargets(y){let T=Yc(g.flatMap(w=>w.getTargets(y)),(w,E)=>w.isEqual(E));if(T.length>1&&!g.every(w=>w.allowMultiple)){let w="Please use #allow-multiple! predicate in your query to allow multiple matches for this scope type";if(ut(k().messages,"BaseTreeSitterScopeHandler.allow-multiple",w),k().runMode==="test")throw Error(w)}return T}})}};function LS(t,e,r,n){return n?Ns(t,`${e}.${r}`,`_.${r}`):Ns(t,`${e}.${r}`)??(Ns(t,e)!=null?Ns(t,`_.${r}`):void 0)}function yo(t,e,r,n){return LS(t,e,r,n)?.range}function Ns(t,...e){return t.captures.find(r=>e.some(n=>r.name===n))}var $f=class extends Os{constructor(r,n){super(r);this.iterateeScopeType=n;this.isHierarchical=!0;this.scopeType=void 0}get iterationScopeType(){throw Error("Not implemented")}matchToScope(r,n,i){let o=this.iterateeScopeType.type,s=LS(n,o,"iteration",!1);if(s==null)return;let{range:l,allowMultiple:u}=s,m=yo(n,o,"iteration.domain",!1)??l;return{editor:r,domain:m,allowMultiple:u,getTargets:d=>[new Ke({editor:r,isReversed:d,contentRange:l})]}}};var jf=class extends Os{constructor(r,n){super(r);this.scopeType=n;this.isHierarchical=!0}get iterationScopeType(){return{type:"custom",scopeHandler:new $f(this.query,this.scopeType)}}matchToScope(r,n,i){let o=this.scopeType.type,s=Ns(n,o);if(s==null)return;let{range:l,allowMultiple:u,insertionDelimiter:m}=s,d=yo(n,o,"domain",!0)??l,g=yo(n,o,"prefix",!0)?.with(void 0,l.start),y=yo(n,o,"leading",!0)?.with(void 0,g?.start??l.start),T=yo(n,o,"trailing",!0)?.with(l.end),w=yo(n,o,"removal",!0);return w==null&&(o==="collectionItem"||o==="argumentOrParameter")&&(w=Wf(i,r,l,y,T)),{editor:r,domain:d,allowMultiple:u,getTargets:E=>[new go({scopeTypeType:o,editor:r,isReversed:E,contentRange:l,prefixRange:g,removalRange:w,leadingDelimiterRange:y,trailingDelimiterRange:T,insertionDelimiter:m})]}}};function eM(t){return t.flatMap((e,r)=>{let{value:n,done:i}=e.next();return i?[]:[{iterator:e,value:n,index:r}]})}function tM(t,e){return t.flatMap(r=>{let{iterator:n,index:i}=r,{value:o}=r,s=!1;for(;!s&&!e(o);)({value:o,done:s}=n.next());return s?[]:[{iterator:n,value:o,index:i}]})}var Yn=class t extends We{constructor(r,n){super();this.scopeHandlers=r;this.getIterationScopeHandler=n;this.isHierarchical=!0;this.scopeType=void 0}static create(r,n,i){let o=n.scopeTypes.map(s=>r.create(s,i));return this.createFromScopeHandlers(r,i,o)}static createFromScopeHandlers(r,n,i){let o=()=>new t(i.map(s=>r.create(s.iterationScopeType,n)),()=>{throw new Error("Not implemented")});return new t(i,o)}get iterationScopeType(){return this.iterationScopeHandler==null&&(this.iterationScopeHandler=this.getIterationScopeHandler()),{type:"custom",scopeHandler:this.iterationScopeHandler}}*generateScopeCandidates(r,n,i,o){if(this.iterationScopeHandler?.lastYieldedIndex!=null){let u=this.iterationScopeHandler.lastYieldedIndex;yield*this.scopeHandlers[u].generateScopes(r,n,i,o);return}let s=this.scopeHandlers.map(u=>u.generateScopes(r,n,i,o)[Symbol.iterator]()),l=eM(s);for(;l.length>0;){l.sort((d,g)=>qr(i,n,d.value,g.value));let u=l[0],m=u.value;this.lastYieldedIndex=u.index,yield m,l=tM(l,d=>qr(i,n,m,d)<0)}}};var zf=class extends We{constructor(r,n){super();this.scopeType={type:"paragraph"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i){let{document:o}=r,s=i==="forward"?1:-1,l=i==="forward"?o.lineCount:-1,u=O9(o,n,i),m=r.document.lineAt(n);for(let d=n.line+s;d!==l;d+=s){let g=r.document.lineAt(d);g.isEmptyOrWhitespace?u!=null&&(yield rM(r,u.range.union(m.range)),u=void 0):u==null&&(u=g),m=g}u!=null&&(yield rM(r,u.range.union(m.range)))}};function O9(t,e,r){let n=r==="forward"?-1:1,i=r==="forward"?-1:t.lineCount,o=t.lineAt(e);if(!o.isEmptyOrWhitespace){for(let s=e.line+n;s!==i;s+=n){let l=t.lineAt(s);if(l.isEmptyOrWhitespace)break;o=l}return o}}function rM(t,e){return{editor:t,domain:e,getTargets:r=>[new po({editor:t,isReversed:r,contentRange:FS(t,e)})]}}function kl(t,e){return e.length>1?e.indexOf(t.slice(-1))>-1:t.slice(-1)===e}function nM(t,e){return t.slice(t.length-e.length)===e}var IS,U9=["al","adj","assn","Ave","BSc","MSc","Cell","Ch","Co","cc","Corp","Dem","Dept","ed","eg","Eq","Eqs","est","est","etc","Ex","ext","Fig","fig","Figs","figs","i.e","ie","Inc","inc","Jan","Feb","Mar","Apr","Jun","Jul","Aug","Sep","Sept","Oct","Nov","Dec","jr","mi","Miss","Mrs","Mr","Ms","Mol","mt","mts","no","Nos","PhD","MD","BA","MA","MM","pl","pop","pp","Prof","Dr","pt","Ref","Refs","Rep","repr","rev","Sec","Secs","Sgt","Col","Gen","Rep","Sen","Gov","Lt","Maj","Capt","St","Sr","sr","Jr","jr","Rev","Sun","Mon","Tu","Tue","Tues","Wed","Th","Thu","Thur","Thurs","Fri","Sat","trans","Univ","Viz","Vol","vs","v"];function iM(t){t?IS=t:IS=U9}function CS(t){return/^[A-Z][a-z].*/.test(t)||qf(t)}function oM(t){return CS(t)||/``|"|'/.test(t.substring(0,2))}function aM(t){let e=t.replace(/[-'`~!@#$%^&*()_|+=?;:'",.<>{}[\]\\/]/gi,"");return~IS.indexOf(e)}function sM(t,e){return(t==="a.m."||t==="p.m.")&&e.replace(/\W+/g,"").slice(-3).toLowerCase()==="day"}function OS(t){let e=t.replace(/[()[]{}]/g,"").match(/(.\.)*/);return e&&e[0].length>0}function cM(t){return t.length<=3?!0:CS(t)}function NS(t,e){return e.length>0?t<5&&e[0].length<6&&CS(e[0])?!0:e.filter(function(n){return/[A-Z]/.test(n.charAt(0))}).length>=3:!1}function qf(t,e){return e&&(t=t.slice(e-1,e+2)),!isNaN(t)}function lM(t){return t.match(/^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/)}function uM(t){return t.match(/[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/)}function pM(t){let e=0;return((e=t.indexOf("."))>-1||(e=t.indexOf("!"))>-1||(e=t.indexOf("?"))>-1)&&t.charAt(e+1).match(/[a-zA-Z].*/)?[t.slice(0,e),t.slice(e+1)]:!1}function mM(t){return t==="."||t==="!"||t==="?"}var dM=" @~@ ",fM=dM.trim(),B9=new RegExp("\\S",""),V9=new RegExp("\\n+|[-#=_+*]{4,}","g"),W9=new RegExp("\\S+|\\n","g"),$9={newlineBoundaries:!1,preserveWhitespace:!1,abbreviations:void 0};function gM(t,e){if(!t)return[];if(!B9.test(t))return[];let r={...$9,...e};iM(r.abbreviations),r.newlineBoundaries&&(t=t.replace(V9,dM));let n,i;r.preserveWhitespace?(i=t.split(/(<br\s*\/?>|\S+|\n+)/),n=i.filter(function(g,y){return y%2})):n=t.trim().match(W9)??[];let o=0,s=0,l=[],u=[],m=[];if(!n||!n.length)return[];for(let g=0,y=n.length;g<y;g++){if(o++,m.push(n[g]),~n[g].indexOf(",")&&(o=0),mM(n[g])||kl(n[g],"?!")||n[g]===fM){r.newlineBoundaries&&n[g]===fM&&m.pop(),u.push(m),o=0,m=[];continue}if((kl(n[g],'"')||kl(n[g],"\u201D"))&&(n[g]=n[g].slice(0,-1)),kl(n[g],".")){if(g+1<y){if(n[g].length===2&&isNaN(n[g].charAt(0))||aM(n[g]))continue;if(oM(n[g+1])){if(sM(n[g],n[g+1])||NS(o,n.slice(g,6))||qf(n[g+1])&&cM(n[g]))continue}else if(nM(n[g],"..")||OS(n[g])||NS(o,n.slice(g,5)))continue}u.push(m),m=[],o=0;continue}(s=n[g].indexOf("."))>-1&&(qf(n[g],s)||OS(n[g])||uM(n[g])||lM(n[g]))||(l=pM(n[g]))&&(m.pop(),m.push(l[0]),u.push(m),m=[],o=0,m.push(l[1]))}return m.length&&u.push(m),u=u.filter(function(g){return g.length>0}),u.slice(1).reduce(function(g,y){let T=g[g.length-1];return T.length===1&&/^.{1,2}[.]$/.test(T[0])&&!/[.]/.test(y[0])?(g.pop(),g.push(T.concat(y)),g):(g.push(y),g)},[u[0]]).map(function(g,y){if(r.preserveWhitespace&&!r.newlineBoundaries){let T=g.length*2;return y===0&&(T+=1),i.splice(0,T).join("")}return g.join(" ")})}var j9=/\S*\p{L}/u,hM=/(\r?\n[^\p{L}]*\r?\n)|(?<=[.!?])(\s*\r?\n)/gu,z9={newlineBoundaries:!1,preserveWhitespace:!0},Gf=class{*segment(e){let r=gM(e,z9),n=0;for(let i of r){let o=i.split(hM).filter(s=>s!=null);for(let s of o){if(!G9(s)){let l=q9(s,n);l!=null&&(yield l)}n+=s.length}}}};function q9(t,e){let r=dk(j9,t);if(r==null)return;let n=r.index;return n!==0&&(e+=n,t=t.slice(n)),{text:t.trimEnd(),index:e}}function G9(t){return Qo(hM,t)}var Kf=class extends Mr{constructor(){super(...arguments);this.scopeType={type:"sentence"};this.iterationScopeType={type:"paragraph"};this.segmenter=new Gf}generateScopesInSearchScope(r,{editor:n,domain:i}){let o=n.document.offsetAt(i.start),s=n.document.getText(i),l=m=>{let d=new Y(n.document.positionAt(o+m.index),n.document.positionAt(o+m.index+m.text.length));return{editor:n,domain:d,getTargets:g=>[new ir({editor:n,contentRange:d,isReversed:g})]}},u=this.segmenter.segment(s);return r==="forward"?Gt(u,l):Array.from(u,l).reverse()}};var Us=class extends Mr{constructor(){super(...arguments);this.iterationScopeType={type:"line"}}generateScopesInSearchScope(r,{editor:n,domain:i}){return Gt(gn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new ir({editor:n,contentRange:o,isReversed:s})]}))}},Qf=class extends Us{constructor(){super(...arguments);this.regex=/\S+/g}},Yf=class extends Us{constructor(r,n,i){super(r,n,i);this.scopeType=n;this.regex=/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/g}},Zf=class extends Us{constructor(r,n,i){super(r,n,i);this.scopeType=n}get regex(){return new RegExp(this.scopeType.regex,this.scopeType.flags??"gu")}},Xf=class extends Us{constructor(r,n,i){super(r,n,i);this.scopeType=n}get regex(){return new RegExp(Wr(this.scopeType.character),"gui")}};var Jf=class extends We{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.languageId=n;this.targetScopeType=i;this.isHierarchical=!0;this.targetScopeHandler=this.scopeHandlerFactory.create(this.targetScopeType,this.languageId),this.surroundingPairInteriorScopeHandler=this.scopeHandlerFactory.create({type:"surroundingPairInterior",delimiter:"any"},this.languageId)}get iterationScopeType(){switch(this.targetScopeHandler.iterationScopeType.type){case"custom":case"fallback":case"conditional":throw Error(`Iteration scope type can't be '${this.targetScopeHandler.iterationScopeType.type}' for BoundedBaseScopeHandler`)}return{type:"oneOf",scopeTypes:[this.targetScopeHandler.iterationScopeType,{type:"surroundingPairInterior",delimiter:"any"}]}}*generateScopeCandidates(r,n,i,o){let s=this.targetScopeHandler.generateScopes(r,n,i,{...o,containment:o.containment!=="disallowed"?o.containment:void 0}),l=Array.from(this.surroundingPairInteriorScopeHandler.generateScopes(r,n,i,{...o,containment:Cs(o)?"required":o.containment}));for(let u of s){let m=[];for(let d of l){let g=u.domain.intersection(d.domain);g!=null&&!g.isEmpty&&m.push({editor:r,domain:g,getTargets:y=>[this.getTargets(yM(u,y),yM(d,y))]})}m.push(u),m.sort((d,g)=>qr(i,n,d,g)),yield*m}}};function yM(t,e){let r=t.getTargets(e);if(r.length!==1)throw Error(`Expected one target but got ${r.length}`);return r[0]}var ed=class extends Jf{constructor(r,n,i){super(r,i,{type:"nonWhitespaceSequence"});this.scopeType={type:"boundedNonWhitespaceSequence"}}getTargets(r,n){let i=r.contentRange.intersection(n.contentRange);if(i==null||i.isEmpty)throw Error("Expected non empty intersection");return new ir({editor:r.editor,isReversed:r.isReversed,contentRange:i})}},td=class extends Jf{constructor(r,n,i){super(r,i,{type:"paragraph"});this.scopeType={type:"boundedParagraph"}}getTargets(r,n){if(!(r instanceof po))throw Error("Expected ParagraphTarget");return new ff({editor:r.editor,isReversed:r.isReversed,paragraphTarget:r,containingInterior:n})}};var Zn=class{constructor(e){this.items=e;this.index=0}add(e){this.items.push(e)}contains(e){return this.advance(e)}getContaining(e){if(this.advance(e))return this.items[this.index]}advance(e){for(;this.index<this.items.length;){let r=this.items[this.index].range;if(r.contains(e))return!0;if(e.end.isBeforeOrEqual(r.start))return!1;this.index++}return!1}};var Hs=class{constructor(e){this.children=K9(e)}getSmallestContaining(e){return this.children.getContaining(e)?.getSmallestContaining(e)}};function K9(t){let e=[],r=[];for(let n of t){let i=new US(n);for(;r.length>0&&!r[r.length-1].range.contains(n.range);)r.pop();let o=r[r.length-1];o!=null?o.children.add(i):e.push(i),r.push(i)}return new Zn(e)}var US=class{constructor(e){this.item=e;this.children=new Zn([])}get range(){return this.item.range}getSmallestContaining(e){return this.children.getContaining(e)?.getSmallestContaining(e)??this.item}};var Q9=",",HS=new RegExp(Q9,"g");function xM(t){let e=t.getText();return ln(e,HS,r=>new Y(t.positionAt(r.index),t.positionAt(r.index+r[0].length)))}var TM={type:"fallback",scopeTypes:[{type:"surroundingPairInterior",delimiter:"collectionBoundary"},{type:"conditional",scopeType:{type:"line"},predicate:t=>{let e=t.editor.document.getText(t.domain);return Qo(HS,e)}}]};function BS(t,e,r,n,i,o){let s=i!=null?new Y(i.end,n.start):void 0,l=o!=null?new Y(n.end,o.start):void 0,u=Wf(t,e,n,s,l),m=r.isSingleLine?", ":`,
`;return{editor:e,domain:n,getTargets(d){return[new go({scopeTypeType:"collectionItem",editor:e,isReversed:d,contentRange:n,insertionDelimiter:m,leadingDelimiterRange:s,trailingDelimiterRange:l,removalRange:u})]}}}function VS(t,e,r,n){let i=t.create({type:"surroundingPairInterior",delimiter:n},e);return Array.from(i.generateScopes(r,new ge(0,0),"forward",{containment:void 0,skipAncestorScopes:!1,includeDescendantScopes:!0}),o=>({range:o.domain}))}var rd=class extends We{constructor(r,n){super();this.scopeHandlerFactory=r;this.languageId=n;this.scopeType={type:"collectionItem"};this.isHierarchical=!0}get iterationScopeType(){return TM}*generateScopeCandidates(r,n,i,o){let s=Cs(o),l=xM(r.document),u=VS(this.scopeHandlerFactory,this.languageId,r,"collectionBoundary"),m=new Hs(u),d=VS(this.scopeHandlerFactory,this.languageId,r,"string"),g=new Zn(d),y=[],T=new Set,w=[];for(let E of l){if(g.contains(E))continue;let U;for(;w.length>0;){let ne=w[w.length-1];if(ne.iterationRange.contains(E)){U=ne;break}this.addScopes(y,ne),w.pop()}let V=m.getSmallestContaining(E)?.range,z=V??r.document.lineAt(E.start.line).range;if(U!=null&&U.iterationRange.isRangeEqual(z)){U.delimiters.push(E);continue}V!=null&&T.add(V),w.push({editor:r,isEveryScope:s,iterationRange:z,delimiters:[E]})}for(let E of w)this.addScopes(y,E);for(let E of u)if(!T.has(E.range)&&!E.range.isEmpty){let U=oa(r,E.range);U.isEmpty||y.push(BS(s,r,E.range,U))}y.sort((E,U)=>qr(i,n,E,U)),yield*y}addScopes(r,n){let{editor:i,iterationRange:o,isEveryScope:s,delimiters:l}=n;if(l.length===0)return;let u=[];for(let g=0;g<l.length;++g){let y=l[g],T=l[g-1]?.end??o.start;u.push(new Y(T,y.start))}let m=l[l.length-1];u.push(new Y(m.end,o.end));let d=u.map(g=>oa(i,g));for(let g=0;g<d.length;++g)g===d.length-1&&i.document.getText(d[g]).trim()===""||r.push(BS(s,i,o,d[g],d[g-1],d[g+1]))}};var nd=class extends We{constructor(r,n,i){super();this.scopeType={type:"collectionItem"};this.isHierarchical=!0;this.scopeHandler=(()=>{let o=new rd(r,i),s=n.get(i)?.getScopeHandler(this.scopeType);return s==null?o:Yn.createFromScopeHandlers(r,i,[s,o])})()}get iterationScopeType(){return this.scopeHandler.iterationScopeType}generateScopeCandidates(r,n,i,o){return this.scopeHandler.generateScopes(r,n,i,o)}};var id=class extends We{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.conditionalScopeType=n;this.languageId=i;this.scopeType=void 0;this.isHierarchical=!0}get iterationScopeType(){throw new ht("Iteration scope for ConditionalScopeHandler")}generateScopeCandidates(r,n,i,o){let s=this.scopeHandlerFactory.create(this.conditionalScopeType.scopeType,this.languageId);return Ff(s.generateScopes(r,n,i,o),this.conditionalScopeType.predicate)}};var Bs=class t extends We{constructor(r){super();this.scopeHandlers=r;this.scopeType=void 0;this.isHierarchical=!0}static create(r,n,i){let o=n.scopeTypes.map(s=>r.create(s,i));return this.createFromScopeHandlers(o)}static createFromScopeHandlers(r){return new t(r)}get iterationScopeType(){throw new ht("Iteration scope for FallbackScopeHandler")}*generateScopeCandidates(r,n,i,o){for(let s of this.scopeHandlers)yield*s.generateScopes(r,n,i,o)}};var od=class extends We{constructor(){super();this.scopeType={type:"notebookCell"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i,o){let s=Y9(r,n,i,o);for(let l of s)yield X9(l)}};function Y9(t,e,r,n){let i=Z9(t);if(i==null)return[];let{notebook:o,cell:s}=i;return n.containment==="required"?[s]:n.containment==="disallowed"||n.containment==="disallowedIfStrict"?r==="forward"?o.cells.slice(s.index+1):o.cells.slice(0,s.index).reverse():n.distalPosition!=null&&new Y(e,n.distalPosition).isRangeEqual(t.document.range)?o.cells:r==="forward"?o.cells.slice(s.index):o.cells.slice(0,s.index+1).reverse()}function Z9(t){let e=t.document.uri.toString();for(let r of k().visibleNotebookEditors)for(let n of r.cells)if(n.document.uri.toString()===e)return{notebook:r,cell:n}}function X9(t){let e=J9(t),r=e.document.range;return{editor:e,domain:r,getTargets:n=>[new cf({editor:e,isReversed:n,contentRange:r})]}}function J9(t){let e=t.document.uri.toString();for(let r of k().visibleTextEditors)if(r.document.uri.toString()===e)return r;throw new Error("Editor not found notebook cell")}var ad=class extends We{constructor(r,n,i,o){super();this.scopeType={type:"notebookCell"};this.isHierarchical=!1;this.scopeHandler=(()=>{let s=new od,l=n.get(o)?.getScopeHandler(this.scopeType);return l==null?s:Yn.createFromScopeHandlers(r,o,[l,s])})()}get iterationScopeType(){return this.scopeHandler.iterationScopeType}generateScopeCandidates(r,n,i,o){return this.scopeHandler.generateScopes(r,n,i,o)}};var sd=class extends We{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.scopeType=n;this.languageId=i;this.isHierarchical=!0;this.surroundingPairScopeHandler=this.scopeHandlerFactory.create({type:"surroundingPair",delimiter:this.scopeType.delimiter,requireStrongContainment:!0},this.languageId)}get iterationScopeType(){return this.surroundingPairScopeHandler.iterationScopeType}*generateScopeCandidates(r,n,i,o){let s=this.surroundingPairScopeHandler.generateScopes(r,n,i,o);for(let l of s)yield{editor:r,domain:l.domain,getTargets(u){return l.getTargets(u).flatMap(m=>m.getInterior())}}}};function SM(t,{openingDelimiterRange:e,closingDelimiterRange:r},n){let i=e.union(r),o=new Y(e.end,r.start);return{editor:t,domain:n?o:i,getTargets:s=>[new uf({editor:t,isReversed:s,contentRange:i,interiorRange:o,boundary:[e,r]})]}}function vM(t){let e=Ko(t.map(({text:r})=>r)).map(Wr).join("|");return new RegExp(`(?<!\\\\)(${e})`,"gu")}function wM(t,e,r){if(r.length===0)return[];let n=t?.getCapturesMap(e)??{},i=new Zn(WS(n.disqualifyDelimiter)),o=new Zn(WS(n.pairDelimiter)),s=new Hs(WS(n.textFragment)),l=Object.fromEntries(r.map(d=>[d.text,d])),u=yT(e.getText(),vM(r)),m=[];for(let d of u){let g=d[0],y=new Y(e.positionAt(d.index),e.positionAt(d.index+g.length));bM(i.getContaining(y))==null&&m.push({delimiterInfo:l[g],textFragmentRange:s.getSmallestContaining(y)?.range,range:bM(o.getContaining(y))?.range??y})}return m}function bM(t){return t!=null&&!t.hasError()?t:void 0}function WS(t){return t==null?[]:(t.sort((e,r)=>e.range.start.compareTo(r.range.start)),t)}var cd=Object.freeze({angleBrackets:[["</","<"],[">","/>"]],curlyBrackets:[["{","${"],"}"],tripleBacktickQuotes:[[],[]],tripleDoubleQuotes:[[],[]],tripleSingleQuotes:[[],[]],doubleQuotes:['"','"',{isSingleLine:!0}],escapedDoubleQuotes:['\\"','\\"',{isSingleLine:!0}],escapedParentheses:["\\(","\\)"],escapedSquareBrackets:["\\[","\\]"],escapedSingleQuotes:["\\'","\\'",{isSingleLine:!0}],parentheses:[["(","$("],")"],backtickQuotes:["`","`"],singleQuotes:["'","'",{isSingleLine:!0}],squareBrackets:["[","]"]}),EM={nix:{singleQuotes:["''","''"]},lua:{doubleQuotes:[['"',"[["],['"',"]]"]]},python:{tripleSingleQuotes:["'''","'''"],tripleDoubleQuotes:['"""','"""']},markdown:{tripleBacktickQuotes:["```","```"]},ruby:{tripleDoubleQuotes:["%Q(",")"]},csharp:{doubleQuotes:[['@"','"'],['"','"']]}},tEe=Object.fromEntries(Object.values(cd)),_M={any:Ri(cd),string:["tripleDoubleQuotes","tripleSingleQuotes","tripleBacktickQuotes","doubleQuotes","singleQuotes","backtickQuotes"],collectionBoundary:["parentheses","squareBrackets","curlyBrackets","angleBrackets"]};function RM(t){return t!=null&&t in EM?{...cd,...EM[t]}:cd}function kM(t,e){let r=_M[t]??[t];return e6(e,r)}function e6(t,e){let r=RM(t);return e.flatMap(n=>{let[i,o,s]=r[n],{isSingleLine:l=!1}=s??{},u=pl(i)?[i]:i,m=pl(o)?[o]:o;return Ko(Qc(u,m)).map(g=>{let y=u.includes(g),T=m.includes(g);return{text:g,side:y&&!T?"left":!y&&T?"right":"unknown",delimiterName:n,isSingleLine:l}})})}function AM(t){let e=[],r=[];for(let n of t){let{delimiterInfo:{delimiterName:i,side:o,isSingleLine:s},textFragmentRange:l,range:u}=n;if(o==="left")r.push(n);else{let m=Go(r,g=>g.delimiterInfo.delimiterName===i&&t6(g.textFragmentRange,l)&&r6(s,g.range,u));if(m===-1){o==="unknown"&&r.push(n);continue}let d=r[m];r.length=m,e.push({delimiterName:i,openingDelimiterRange:d.range,closingDelimiterRange:u})}}return e}function t6(t,e){return t==null||e==null?t===e:t.isRangeEqual(e)}function r6(t,e,r){return!t||e.start.line===r.start.line}var ld=class extends We{constructor(r,n,i){super();this.languageDefinitions=r;this.scopeType=n;this.languageId=i;this.iterationScopeType={type:"line"};this.isHierarchical=!0}*generateScopeCandidates(r,n,i,o){if(this.scopeType.forceDirection!=null){ut(k().messages,"deprecatedForceDirection","forceDirection is deprecated. If this is important to you please file an issue on the cursorless repo.");return}let s=wM(this.languageDefinitions.get(this.languageId),r.document,kM(this.scopeType.delimiter,this.languageId)),l=AM(s);l=n6(i,o,n,l),yield*l.map(u=>SM(r,u,this.scopeType.requireStrongContainment??!1)).sort((u,m)=>qr(i,n,u,m))}};function n6(t,e,r,n){return t==="forward"&&e.containment==="required"&&e.allowAdjacentScopes&&e.skipAncestorScopes?n.filter((i,o)=>!(i.closingDelimiterRange.end.isEqual(r)&&n[o+1]?.closingDelimiterRange.start.isEqual(r))):n}var ud=class extends We{constructor(r,n,i,o){super();this.scopeHandlerFactory=r;this.languageDefinitions=n;this.scopeType=i;this.languageId=o;this.isHierarchical=!0}get iterationScopeType(){throw new ht("Iteration scope for InteriorScopeHandler")}*generateScopeCandidates(r,n,i,o){let s=new Y(n,o.distalPosition),l=this.getScopeHandler();if(l==null)return;let u=l.generateScopes(r,n,i,o);for(let m of u)this.shouldYield(s,m)&&(yield i6(m))}getScopeHandler(){let r=this.languageDefinitions.get(this.languageId)?.getScopeHandler(this.scopeType),n=this.scopeHandlerFactory.create({type:"surroundingPair",delimiter:"any"},this.languageId);return this.scopeType.explicitScopeType?r==null?n:Bs.createFromScopeHandlers([r,n]):r==null?n:Yn.createFromScopeHandlers(this.scopeHandlerFactory,this.languageId,[r,n])}shouldYield(r,n){return!this.scopeType.explicitScopeType||r.contains(n.domain)}};function i6(t){return{editor:t.editor,domain:t.domain,getTargets(e){return t.getTargets(e).flatMap(o6)}}}function o6(t){let e=t.getInterior();return e??[new Ps({editor:t.editor,isReversed:t.isReversed,fullInteriorRange:t.contentRange})]}var Vs=class{constructor(e){this.languageDefinitions=e;this.maybeCreate=this.maybeCreate.bind(this),this.create=this.create.bind(this)}maybeCreate(e,r){switch(e.type){case"character":return new Uf(this,e,r);case"word":return new Hf(this,e,r);case"token":return new Bf(this,e,r);case"identifier":return new Of(this,e,r);case"line":return new Cf(e,r);case"sentence":return new Kf(this,e,r);case"paragraph":return new zf(e,r);case"boundedParagraph":return new td(this,e,r);case"document":return new Vf(e,r);case"nonWhitespaceSequence":return new Qf(this,e,r);case"boundedNonWhitespaceSequence":return new ed(this,e,r);case"url":return new Yf(this,e,r);case"customRegex":return new Zf(this,e,r);case"glyph":return new Xf(this,e,r);case"collectionItem":return new nd(this,this.languageDefinitions,r);case"surroundingPair":return new ld(this.languageDefinitions,e,r);case"surroundingPairInterior":return new sd(this,e,r);case"notebookCell":return new ad(this,this.languageDefinitions,e,r);case"interior":return new ud(this,this.languageDefinitions,e,r);case"custom":return e.scopeHandler;case"oneOf":return Yn.create(this,e,r);case"fallback":return Bs.create(this,e,r);case"conditional":return new id(this,e,r);case"instance":throw Error("Unexpected scope type 'instance'");default:return this.languageDefinitions.get(r)?.getScopeHandler(e)}}create(e,r){let n=this.maybeCreate(e,r);if(n==null)throw new Error(`Couldn't create scope handler for '${e.type}'`);return n}};function Gr(t,e){return new Y(t.row,t.column,e.row,e.column)}function $S(t){return new ge(t.row,t.column)}function PM(t){return new Y(t.startPosition.row,t.startPosition.column,t.endPosition.row,t.endPosition.column)}function MM(t,e){return new De(t.startPosition.row,t.startPosition.column,e.endPosition.row,e.endPosition.column)}function ca(t,e){return{selection:new De(new ge(e.startPosition.row,e.startPosition.column),new ge(e.endPosition.row,e.endPosition.column)),context:{}}}function a6(t,e,r){let n=e.startIndex<r.startIndex,i=n?e:r,o=n?r:e;return{selection:new De(new ge(i.startPosition.row,i.startPosition.column),new ge(o.endPosition.row,o.endPosition.column)),context:{}}}function DM(){return l6(t=>t.type===","||t.type==="("||t.type===")"||t.type==="["||t.type==="]"||t.type===">"||t.type==="<"||t.type==="}"||t.type==="{",", ")}function FM(...t){return function(e,r){let n=r.previousSibling,i=n?.previousSibling,o;return n&&(t.includes(n.type)?i?o=Gr(i.endPosition,r.startPosition):o=Gr(n.startPosition,r.startPosition):o=Gr(n.endPosition,r.startPosition)),{...ca(e,r),context:{leadingDelimiterRange:o}}}}function pd(t=[],e=[],{includeUnnamedChildren:r=!1}={}){return function(n,i){if(t.length>0&&e.length>0)throw new Error("Cannot have both exclusions and inclusions.");let o=r?i.children:i.namedChildren,s=new Set(t),l=new Set(e);return o=o.filter(u=>s.size>0?!s.has(u.type):l.size>0?l.has(u.type):!0),a6(n,o[0],o[o.length-1])}}function LM(...t){return function(e,r){let n=r.nextSibling,i=n?.nextSibling,o;return n&&(t.includes(n.type)?i?o=Gr(r.endPosition,i.startPosition):o=Gr(r.endPosition,n.endPosition):o=Gr(r.endPosition,n.startPosition)),{...ca(e,r),context:{trailingDelimiterRange:o}}}}function s6(t,e){let r=t.nextSibling;for(;r!=null;){if(!e(r))return r;r=r.nextSibling}return r}function c6(t,e){let r=t.previousSibling;for(;r!=null;){if(!e(r))return r;r=r.previousSibling}return r}function l6(t,e,r=wr,n=wr){return(i,o)=>{let s,l,u=r(o),m=n(o),d=c6(u,t),g=s6(m,t);d!=null&&(s=Gr(d.endPosition,u.startPosition)),g!=null&&(l=Gr(m.endPosition,g.startPosition));let y=u6(i,s,l,e);return{selection:new De(new ge(u.startPosition.row,u.startPosition.column),new ge(m.endPosition.row,m.endPosition.column)),context:{containingListDelimiter:y,leadingDelimiterRange:s,trailingDelimiterRange:l}}}}function u6(t,e,r,n){let{document:i}=t,o=[r!=null?i.getText(r):n,e!=null?i.getText(e):n];return pT(o,"length")}function IM(t,e){if(t.length===1)return!0;let r=!1,n=t.filter(({name:u})=>u.endsWith(".start")).map(({range:{end:u}})=>u).sort((u,m)=>u.compareTo(m)).at(-1),i=t.filter(({name:u})=>u.endsWith(".end")).map(({range:{start:u}})=>u).sort((u,m)=>u.compareTo(m)).at(0);n!=null&&i!=null&&n.isAfter(i)&&(ut(e,"TreeSitterQuery.checkCaptures.badOrder",`Start capture must be before end capture: ${t}`),r=!0);let o=t.filter(({name:u})=>u.endsWith(".start")).length,s=t.filter(({name:u})=>u.endsWith(".end")).length,l=t.length-o-s;return l>0&&(o>0||s>0)&&(ut(e,"TreeSitterQuery.checkCaptures.mixRegularStartEnd",`Please do not mix regular captures and start/end captures: ${t.map(({name:u,range:m})=>u+" "+m.toString())}`),r=!0),l>1&&(ut(e,"TreeSitterQuery.checkCaptures.duplicate",`A capture with the same name may only appear once in a single pattern: ${t.map(({name:u,range:m})=>u+" "+m.toString())}`),r=!0),!r}function CM(t){if(t.hasError)return!0;let e=t.parent;for(;e!=null;){if(e.isError)return!0;if(e.hasError)return!1;if(e.previousSibling?.isError||e.nextSibling?.isError)return!0;e=e.parent}return!1}function jS(t){return t.replace(/(\.(start|end))?(\.(startOf|endOf))?$/,"")}var Pe={};V_(Pe,{BRAND:()=>O6,DIRTY:()=>la,EMPTY_PATH:()=>d6,INVALID:()=>Se,NEVER:()=>S5,OK:()=>or,ParseStatus:()=>Kt,Schema:()=>Fe,ZodAny:()=>So,ZodArray:()=>Ci,ZodBigInt:()=>pa,ZodBoolean:()=>ma,ZodBranded:()=>Dl,ZodCatch:()=>wa,ZodDate:()=>fa,ZodDefault:()=>ba,ZodDiscriminatedUnion:()=>gd,ZodEffects:()=>xn,ZodEnum:()=>Sa,ZodError:()=>Dr,ZodFirstPartyTypeKind:()=>ve,ZodFunction:()=>yd,ZodIntersection:()=>ya,ZodIssueCode:()=>ee,ZodLazy:()=>xa,ZodLiteral:()=>Ta,ZodMap:()=>Gs,ZodNaN:()=>Qs,ZodNativeEnum:()=>va,ZodNever:()=>Fn,ZodNull:()=>ga,ZodNullable:()=>ei,ZodNumber:()=>ua,ZodObject:()=>Fr,ZodOptional:()=>hn,ZodParsedType:()=>oe,ZodPipeline:()=>Fl,ZodPromise:()=>vo,ZodReadonly:()=>Ea,ZodRecord:()=>hd,ZodSchema:()=>Fe,ZodSet:()=>Ks,ZodString:()=>To,ZodSymbol:()=>zs,ZodTransformer:()=>xn,ZodTuple:()=>Jn,ZodType:()=>Fe,ZodUndefined:()=>da,ZodUnion:()=>ha,ZodUnknown:()=>Ii,ZodVoid:()=>qs,addIssueToContext:()=>re,any:()=>z6,array:()=>Q6,bigint:()=>B6,boolean:()=>GM,coerce:()=>T5,custom:()=>jM,date:()=>V6,datetimeRegex:()=>WM,defaultErrorMap:()=>Fi,discriminatedUnion:()=>J6,effect:()=>p5,enum:()=>c5,function:()=>o5,getErrorMap:()=>Ws,getParsedType:()=>Xn,instanceof:()=>U6,intersection:()=>e5,isAborted:()=>md,isAsync:()=>$s,isDirty:()=>fd,isValid:()=>xo,late:()=>N6,lazy:()=>a5,literal:()=>s5,makeIssue:()=>Al,map:()=>n5,nan:()=>H6,nativeEnum:()=>l5,never:()=>G6,null:()=>j6,nullable:()=>f5,number:()=>qM,object:()=>Y6,objectUtil:()=>zS,oboolean:()=>x5,onumber:()=>y5,optional:()=>m5,ostring:()=>h5,pipeline:()=>g5,preprocess:()=>d5,promise:()=>u5,quotelessJson:()=>p6,record:()=>r5,set:()=>i5,setErrorMap:()=>f6,strictObject:()=>Z6,string:()=>zM,symbol:()=>W6,transformer:()=>p5,tuple:()=>t5,undefined:()=>$6,union:()=>X6,unknown:()=>q6,util:()=>He,void:()=>K6});var He;(function(t){t.assertEqual=i=>{};function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{let o={};for(let s of i)o[s]=s;return o},t.getValidEnumValues=i=>{let o=t.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),s={};for(let l of o)s[l]=i[l];return t.objectValues(s)},t.objectValues=i=>t.objectKeys(i).map(function(o){return i[o]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let o=[];for(let s in i)Object.prototype.hasOwnProperty.call(i,s)&&o.push(s);return o},t.find=(i,o)=>{for(let s of i)if(o(s))return s},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function n(i,o=" | "){return i.map(s=>typeof s=="string"?`'${s}'`:s).join(o)}t.joinValues=n,t.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(He||(He={}));var zS;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(zS||(zS={}));var oe=He.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Xn=t=>{switch(typeof t){case"undefined":return oe.undefined;case"string":return oe.string;case"number":return Number.isNaN(t)?oe.nan:oe.number;case"boolean":return oe.boolean;case"function":return oe.function;case"bigint":return oe.bigint;case"symbol":return oe.symbol;case"object":return Array.isArray(t)?oe.array:t===null?oe.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?oe.promise:typeof Map<"u"&&t instanceof Map?oe.map:typeof Set<"u"&&t instanceof Set?oe.set:typeof Date<"u"&&t instanceof Date?oe.date:oe.object;default:return oe.unknown}};var ee=He.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),p6=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),Dr=class t extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){let r=e||function(o){return o.message},n={_errors:[]},i=o=>{for(let s of o.issues)if(s.code==="invalid_union")s.unionErrors.map(i);else if(s.code==="invalid_return_type")i(s.returnTypeError);else if(s.code==="invalid_arguments")i(s.argumentsError);else if(s.path.length===0)n._errors.push(r(s));else{let l=n,u=0;for(;u<s.path.length;){let m=s.path[u];u===s.path.length-1?(l[m]=l[m]||{_errors:[]},l[m]._errors.push(r(s))):l[m]=l[m]||{_errors:[]},l=l[m],u++}}};return i(this),n}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,He.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};Dr.create=t=>new Dr(t);var m6=(t,e)=>{let r;switch(t.code){case ee.invalid_type:t.received===oe.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case ee.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,He.jsonStringifyReplacer)}`;break;case ee.unrecognized_keys:r=`Unrecognized key(s) in object: ${He.joinValues(t.keys,", ")}`;break;case ee.invalid_union:r="Invalid input";break;case ee.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${He.joinValues(t.options)}`;break;case ee.invalid_enum_value:r=`Invalid enum value. Expected ${He.joinValues(t.options)}, received '${t.received}'`;break;case ee.invalid_arguments:r="Invalid function arguments";break;case ee.invalid_return_type:r="Invalid function return type";break;case ee.invalid_date:r="Invalid date";break;case ee.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:He.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case ee.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case ee.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case ee.custom:r="Invalid input";break;case ee.invalid_intersection_types:r="Intersection results could not be merged";break;case ee.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case ee.not_finite:r="Number must be finite";break;default:r=e.defaultError,He.assertNever(t)}return{message:r}},Fi=m6;var OM=Fi;function f6(t){OM=t}function Ws(){return OM}var Al=t=>{let{data:e,path:r,errorMaps:n,issueData:i}=t,o=[...r,...i.path||[]],s={...i,path:o};if(i.message!==void 0)return{...i,path:o,message:i.message};let l="",u=n.filter(m=>!!m).slice().reverse();for(let m of u)l=m(s,{data:e,defaultError:l}).message;return{...i,path:o,message:l}},d6=[];function re(t,e){let r=Ws(),n=Al({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===Fi?void 0:Fi].filter(i=>!!i)});t.common.issues.push(n)}var Kt=class t{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let i of r){if(i.status==="aborted")return Se;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let i of r){let o=await i.key,s=await i.value;n.push({key:o,value:s})}return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let i of r){let{key:o,value:s}=i;if(o.status==="aborted"||s.status==="aborted")return Se;o.status==="dirty"&&e.dirty(),s.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof s.value<"u"||i.alwaysSet)&&(n[o.value]=s.value)}return{status:e.value,value:n}}},Se=Object.freeze({status:"aborted"}),la=t=>({status:"dirty",value:t}),or=t=>({status:"valid",value:t}),md=t=>t.status==="aborted",fd=t=>t.status==="dirty",xo=t=>t.status==="valid",$s=t=>typeof Promise<"u"&&t instanceof Promise;var pe;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(pe||(pe={}));var dd=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},HM=function(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r},Pl,Ml,yn=class{constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},NM=(t,e)=>{if(xo(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new Dr(t.common.issues);return this._error=r,this._error}}};function Re(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(s,l)=>{let{message:u}=t;return s.code==="invalid_enum_value"?{message:u??l.defaultError}:typeof l.data>"u"?{message:u??n??l.defaultError}:s.code!=="invalid_type"?{message:l.defaultError}:{message:u??r??l.defaultError}},description:i}}var Fe=class{get description(){return this._def.description}_getType(e){return Xn(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:Xn(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Kt,ctx:{common:e.parent.common,data:e.data,parsedType:Xn(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if($s(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){let n={common:{issues:[],async:r?.async??!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Xn(e)},i=this._parseSync({data:e,path:n.path,parent:n});return NM(n,i)}"~validate"(e){let r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Xn(e)};if(!this["~standard"].async)try{let n=this._parseSync({data:e,path:[],parent:r});return xo(n)?{value:n.value}:{issues:r.common.issues}}catch(n){n?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then(n=>xo(n)?{value:n.value}:{issues:r.common.issues})}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Xn(e)},i=this._parse({data:e,path:n.path,parent:n}),o=await($s(i)?i:Promise.resolve(i));return NM(n,o)}refine(e,r){let n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,o)=>{let s=e(i),l=()=>o.addIssue({code:ee.custom,...n(i)});return typeof Promise<"u"&&s instanceof Promise?s.then(u=>u?!0:(l(),!1)):s?!0:(l(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new xn({schema:this,typeName:ve.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return hn.create(this,this._def)}nullable(){return ei.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ci.create(this)}promise(){return vo.create(this,this._def)}or(e){return ha.create([this,e],this._def)}and(e){return ya.create(this,e,this._def)}transform(e){return new xn({...Re(this._def),schema:this,typeName:ve.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new ba({...Re(this._def),innerType:this,defaultValue:r,typeName:ve.ZodDefault})}brand(){return new Dl({typeName:ve.ZodBranded,type:this,...Re(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new wa({...Re(this._def),innerType:this,catchValue:r,typeName:ve.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return Fl.create(this,e)}readonly(){return Ea.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},g6=/^c[^\s-]{8,}$/i,h6=/^[0-9a-z]+$/,y6=/^[0-9A-HJKMNP-TV-Z]{26}$/i,x6=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,T6=/^[a-z0-9_-]{21}$/i,S6=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,v6=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,b6=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,w6="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",qS,E6=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,_6=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,R6=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,k6=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,A6=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,P6=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,BM="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",M6=new RegExp(`^${BM}$`);function VM(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);let r=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${r}`}function D6(t){return new RegExp(`^${VM(t)}$`)}function WM(t){let e=`${BM}T${VM(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function F6(t,e){return!!((e==="v4"||!e)&&E6.test(t)||(e==="v6"||!e)&&R6.test(t))}function L6(t,e){if(!S6.test(t))return!1;try{let[r]=t.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));return!(typeof i!="object"||i===null||"typ"in i&&i?.typ!=="JWT"||!i.alg||e&&i.alg!==e)}catch{return!1}}function I6(t,e){return!!((e==="v4"||!e)&&_6.test(t)||(e==="v6"||!e)&&k6.test(t))}var To=class t extends Fe{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==oe.string){let o=this._getOrReturnCtx(e);return re(o,{code:ee.invalid_type,expected:oe.string,received:o.parsedType}),Se}let n=new Kt,i;for(let o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(i=this._getOrReturnCtx(e,i),re(i,{code:ee.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="max")e.data.length>o.value&&(i=this._getOrReturnCtx(e,i),re(i,{code:ee.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="length"){let s=e.data.length>o.value,l=e.data.length<o.value;(s||l)&&(i=this._getOrReturnCtx(e,i),s?re(i,{code:ee.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):l&&re(i,{code:ee.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),n.dirty())}else if(o.kind==="email")b6.test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"email",code:ee.invalid_string,message:o.message}),n.dirty());else if(o.kind==="emoji")qS||(qS=new RegExp(w6,"u")),qS.test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"emoji",code:ee.invalid_string,message:o.message}),n.dirty());else if(o.kind==="uuid")x6.test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"uuid",code:ee.invalid_string,message:o.message}),n.dirty());else if(o.kind==="nanoid")T6.test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"nanoid",code:ee.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid")g6.test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"cuid",code:ee.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid2")h6.test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"cuid2",code:ee.invalid_string,message:o.message}),n.dirty());else if(o.kind==="ulid")y6.test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"ulid",code:ee.invalid_string,message:o.message}),n.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),re(i,{validation:"url",code:ee.invalid_string,message:o.message}),n.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"regex",code:ee.invalid_string,message:o.message}),n.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(e,i),re(i,{code:ee.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),n.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(i=this._getOrReturnCtx(e,i),re(i,{code:ee.invalid_string,validation:{startsWith:o.value},message:o.message}),n.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(i=this._getOrReturnCtx(e,i),re(i,{code:ee.invalid_string,validation:{endsWith:o.value},message:o.message}),n.dirty()):o.kind==="datetime"?WM(o).test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{code:ee.invalid_string,validation:"datetime",message:o.message}),n.dirty()):o.kind==="date"?M6.test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{code:ee.invalid_string,validation:"date",message:o.message}),n.dirty()):o.kind==="time"?D6(o).test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{code:ee.invalid_string,validation:"time",message:o.message}),n.dirty()):o.kind==="duration"?v6.test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"duration",code:ee.invalid_string,message:o.message}),n.dirty()):o.kind==="ip"?F6(e.data,o.version)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"ip",code:ee.invalid_string,message:o.message}),n.dirty()):o.kind==="jwt"?L6(e.data,o.alg)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"jwt",code:ee.invalid_string,message:o.message}),n.dirty()):o.kind==="cidr"?I6(e.data,o.version)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"cidr",code:ee.invalid_string,message:o.message}),n.dirty()):o.kind==="base64"?A6.test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"base64",code:ee.invalid_string,message:o.message}),n.dirty()):o.kind==="base64url"?P6.test(e.data)||(i=this._getOrReturnCtx(e,i),re(i,{validation:"base64url",code:ee.invalid_string,message:o.message}),n.dirty()):He.assertNever(o);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(i=>e.test(i),{validation:r,code:ee.invalid_string,...pe.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...pe.errToObj(e)})}url(e){return this._addCheck({kind:"url",...pe.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...pe.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...pe.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...pe.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...pe.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...pe.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...pe.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...pe.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...pe.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...pe.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...pe.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...pe.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...pe.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...pe.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...pe.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...pe.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...pe.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...pe.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...pe.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...pe.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...pe.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...pe.errToObj(r)})}nonempty(e){return this.min(1,pe.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};To.create=t=>new To({checks:[],typeName:ve.ZodString,coerce:t?.coerce??!1,...Re(t)});function C6(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,o=Number.parseInt(t.toFixed(i).replace(".","")),s=Number.parseInt(e.toFixed(i).replace(".",""));return o%s/10**i}var ua=class t extends Fe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==oe.number){let o=this._getOrReturnCtx(e);return re(o,{code:ee.invalid_type,expected:oe.number,received:o.parsedType}),Se}let n,i=new Kt;for(let o of this._def.checks)o.kind==="int"?He.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),re(n,{code:ee.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),re(n,{code:ee.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),re(n,{code:ee.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?C6(e.data,o.value)!==0&&(n=this._getOrReturnCtx(e,n),re(n,{code:ee.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),re(n,{code:ee.not_finite,message:o.message}),i.dirty()):He.assertNever(o);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,pe.toString(r))}gt(e,r){return this.setLimit("min",e,!1,pe.toString(r))}lte(e,r){return this.setLimit("max",e,!0,pe.toString(r))}lt(e,r){return this.setLimit("max",e,!1,pe.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:pe.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:pe.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:pe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:pe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:pe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:pe.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:pe.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:pe.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:pe.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:pe.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&He.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};ua.create=t=>new ua({checks:[],typeName:ve.ZodNumber,coerce:t?.coerce||!1,...Re(t)});var pa=class t extends Fe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==oe.bigint)return this._getInvalidInput(e);let n,i=new Kt;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),re(n,{code:ee.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),re(n,{code:ee.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),re(n,{code:ee.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):He.assertNever(o);return{status:i.value,value:e.data}}_getInvalidInput(e){let r=this._getOrReturnCtx(e);return re(r,{code:ee.invalid_type,expected:oe.bigint,received:r.parsedType}),Se}gte(e,r){return this.setLimit("min",e,!0,pe.toString(r))}gt(e,r){return this.setLimit("min",e,!1,pe.toString(r))}lte(e,r){return this.setLimit("max",e,!0,pe.toString(r))}lt(e,r){return this.setLimit("max",e,!1,pe.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:pe.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:pe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:pe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:pe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:pe.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:pe.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};pa.create=t=>new pa({checks:[],typeName:ve.ZodBigInt,coerce:t?.coerce??!1,...Re(t)});var ma=class extends Fe{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==oe.boolean){let n=this._getOrReturnCtx(e);return re(n,{code:ee.invalid_type,expected:oe.boolean,received:n.parsedType}),Se}return or(e.data)}};ma.create=t=>new ma({typeName:ve.ZodBoolean,coerce:t?.coerce||!1,...Re(t)});var fa=class t extends Fe{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==oe.date){let o=this._getOrReturnCtx(e);return re(o,{code:ee.invalid_type,expected:oe.date,received:o.parsedType}),Se}if(Number.isNaN(e.data.getTime())){let o=this._getOrReturnCtx(e);return re(o,{code:ee.invalid_date}),Se}let n=new Kt,i;for(let o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(i=this._getOrReturnCtx(e,i),re(i,{code:ee.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),n.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(i=this._getOrReturnCtx(e,i),re(i,{code:ee.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),n.dirty()):He.assertNever(o);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:pe.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:pe.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};fa.create=t=>new fa({checks:[],coerce:t?.coerce||!1,typeName:ve.ZodDate,...Re(t)});var zs=class extends Fe{_parse(e){if(this._getType(e)!==oe.symbol){let n=this._getOrReturnCtx(e);return re(n,{code:ee.invalid_type,expected:oe.symbol,received:n.parsedType}),Se}return or(e.data)}};zs.create=t=>new zs({typeName:ve.ZodSymbol,...Re(t)});var da=class extends Fe{_parse(e){if(this._getType(e)!==oe.undefined){let n=this._getOrReturnCtx(e);return re(n,{code:ee.invalid_type,expected:oe.undefined,received:n.parsedType}),Se}return or(e.data)}};da.create=t=>new da({typeName:ve.ZodUndefined,...Re(t)});var ga=class extends Fe{_parse(e){if(this._getType(e)!==oe.null){let n=this._getOrReturnCtx(e);return re(n,{code:ee.invalid_type,expected:oe.null,received:n.parsedType}),Se}return or(e.data)}};ga.create=t=>new ga({typeName:ve.ZodNull,...Re(t)});var So=class extends Fe{constructor(){super(...arguments),this._any=!0}_parse(e){return or(e.data)}};So.create=t=>new So({typeName:ve.ZodAny,...Re(t)});var Ii=class extends Fe{constructor(){super(...arguments),this._unknown=!0}_parse(e){return or(e.data)}};Ii.create=t=>new Ii({typeName:ve.ZodUnknown,...Re(t)});var Fn=class extends Fe{_parse(e){let r=this._getOrReturnCtx(e);return re(r,{code:ee.invalid_type,expected:oe.never,received:r.parsedType}),Se}};Fn.create=t=>new Fn({typeName:ve.ZodNever,...Re(t)});var qs=class extends Fe{_parse(e){if(this._getType(e)!==oe.undefined){let n=this._getOrReturnCtx(e);return re(n,{code:ee.invalid_type,expected:oe.void,received:n.parsedType}),Se}return or(e.data)}};qs.create=t=>new qs({typeName:ve.ZodVoid,...Re(t)});var Ci=class t extends Fe{_parse(e){let{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==oe.array)return re(r,{code:ee.invalid_type,expected:oe.array,received:r.parsedType}),Se;if(i.exactLength!==null){let s=r.data.length>i.exactLength.value,l=r.data.length<i.exactLength.value;(s||l)&&(re(r,{code:s?ee.too_big:ee.too_small,minimum:l?i.exactLength.value:void 0,maximum:s?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(re(r,{code:ee.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(re(r,{code:ee.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((s,l)=>i.type._parseAsync(new yn(r,s,r.path,l)))).then(s=>Kt.mergeArray(n,s));let o=[...r.data].map((s,l)=>i.type._parseSync(new yn(r,s,r.path,l)));return Kt.mergeArray(n,o)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:pe.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:pe.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:pe.toString(r)}})}nonempty(e){return this.min(1,e)}};Ci.create=(t,e)=>new Ci({type:t,minLength:null,maxLength:null,exactLength:null,typeName:ve.ZodArray,...Re(e)});function js(t){if(t instanceof Fr){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=hn.create(js(n))}return new Fr({...t._def,shape:()=>e})}else return t instanceof Ci?new Ci({...t._def,type:js(t.element)}):t instanceof hn?hn.create(js(t.unwrap())):t instanceof ei?ei.create(js(t.unwrap())):t instanceof Jn?Jn.create(t.items.map(e=>js(e))):t}var Fr=class t extends Fe{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=He.objectKeys(e);return this._cached={shape:e,keys:r},this._cached}_parse(e){if(this._getType(e)!==oe.object){let m=this._getOrReturnCtx(e);return re(m,{code:ee.invalid_type,expected:oe.object,received:m.parsedType}),Se}let{status:n,ctx:i}=this._processInputParams(e),{shape:o,keys:s}=this._getCached(),l=[];if(!(this._def.catchall instanceof Fn&&this._def.unknownKeys==="strip"))for(let m in i.data)s.includes(m)||l.push(m);let u=[];for(let m of s){let d=o[m],g=i.data[m];u.push({key:{status:"valid",value:m},value:d._parse(new yn(i,g,i.path,m)),alwaysSet:m in i.data})}if(this._def.catchall instanceof Fn){let m=this._def.unknownKeys;if(m==="passthrough")for(let d of l)u.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(m==="strict")l.length>0&&(re(i,{code:ee.unrecognized_keys,keys:l}),n.dirty());else if(m!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let m=this._def.catchall;for(let d of l){let g=i.data[d];u.push({key:{status:"valid",value:d},value:m._parse(new yn(i,g,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let m=[];for(let d of u){let g=await d.key,y=await d.value;m.push({key:g,value:y,alwaysSet:d.alwaysSet})}return m}).then(m=>Kt.mergeObjectSync(n,m)):Kt.mergeObjectSync(n,u)}get shape(){return this._def.shape()}strict(e){return pe.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{let i=this._def.errorMap?.(r,n).message??n.defaultError;return r.code==="unrecognized_keys"?{message:pe.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ve.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};for(let n of He.objectKeys(e))e[n]&&this.shape[n]&&(r[n]=this.shape[n]);return new t({...this._def,shape:()=>r})}omit(e){let r={};for(let n of He.objectKeys(this.shape))e[n]||(r[n]=this.shape[n]);return new t({...this._def,shape:()=>r})}deepPartial(){return js(this)}partial(e){let r={};for(let n of He.objectKeys(this.shape)){let i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}return new t({...this._def,shape:()=>r})}required(e){let r={};for(let n of He.objectKeys(this.shape))if(e&&!e[n])r[n]=this.shape[n];else{let o=this.shape[n];for(;o instanceof hn;)o=o._def.innerType;r[n]=o}return new t({...this._def,shape:()=>r})}keyof(){return $M(He.objectKeys(this.shape))}};Fr.create=(t,e)=>new Fr({shape:()=>t,unknownKeys:"strip",catchall:Fn.create(),typeName:ve.ZodObject,...Re(e)});Fr.strictCreate=(t,e)=>new Fr({shape:()=>t,unknownKeys:"strict",catchall:Fn.create(),typeName:ve.ZodObject,...Re(e)});Fr.lazycreate=(t,e)=>new Fr({shape:t,unknownKeys:"strip",catchall:Fn.create(),typeName:ve.ZodObject,...Re(e)});var ha=class extends Fe{_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function i(o){for(let l of o)if(l.result.status==="valid")return l.result;for(let l of o)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;let s=o.map(l=>new Dr(l.ctx.common.issues));return re(r,{code:ee.invalid_union,unionErrors:s}),Se}if(r.common.async)return Promise.all(n.map(async o=>{let s={...r,common:{...r.common,issues:[]},parent:null};return{result:await o._parseAsync({data:r.data,path:r.path,parent:s}),ctx:s}})).then(i);{let o,s=[];for(let u of n){let m={...r,common:{...r.common,issues:[]},parent:null},d=u._parseSync({data:r.data,path:r.path,parent:m});if(d.status==="valid")return d;d.status==="dirty"&&!o&&(o={result:d,ctx:m}),m.common.issues.length&&s.push(m.common.issues)}if(o)return r.common.issues.push(...o.ctx.common.issues),o.result;let l=s.map(u=>new Dr(u));return re(r,{code:ee.invalid_union,unionErrors:l}),Se}}get options(){return this._def.options}};ha.create=(t,e)=>new ha({options:t,typeName:ve.ZodUnion,...Re(e)});var Li=t=>t instanceof xa?Li(t.schema):t instanceof xn?Li(t.innerType()):t instanceof Ta?[t.value]:t instanceof Sa?t.options:t instanceof va?He.objectValues(t.enum):t instanceof ba?Li(t._def.innerType):t instanceof da?[void 0]:t instanceof ga?[null]:t instanceof hn?[void 0,...Li(t.unwrap())]:t instanceof ei?[null,...Li(t.unwrap())]:t instanceof Dl||t instanceof Ea?Li(t.unwrap()):t instanceof wa?Li(t._def.innerType):[],gd=class t extends Fe{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==oe.object)return re(r,{code:ee.invalid_type,expected:oe.object,received:r.parsedType}),Se;let n=this.discriminator,i=r.data[n],o=this.optionsMap.get(i);return o?r.common.async?o._parseAsync({data:r.data,path:r.path,parent:r}):o._parseSync({data:r.data,path:r.path,parent:r}):(re(r,{code:ee.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Se)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let i=new Map;for(let o of r){let s=Li(o.shape[e]);if(!s.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let l of s){if(i.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);i.set(l,o)}}return new t({typeName:ve.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...Re(n)})}};function GS(t,e){let r=Xn(t),n=Xn(e);if(t===e)return{valid:!0,data:t};if(r===oe.object&&n===oe.object){let i=He.objectKeys(e),o=He.objectKeys(t).filter(l=>i.indexOf(l)!==-1),s={...t,...e};for(let l of o){let u=GS(t[l],e[l]);if(!u.valid)return{valid:!1};s[l]=u.data}return{valid:!0,data:s}}else if(r===oe.array&&n===oe.array){if(t.length!==e.length)return{valid:!1};let i=[];for(let o=0;o<t.length;o++){let s=t[o],l=e[o],u=GS(s,l);if(!u.valid)return{valid:!1};i.push(u.data)}return{valid:!0,data:i}}else return r===oe.date&&n===oe.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var ya=class extends Fe{_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=(o,s)=>{if(md(o)||md(s))return Se;let l=GS(o.value,s.value);return l.valid?((fd(o)||fd(s))&&r.dirty(),{status:r.value,value:l.data}):(re(n,{code:ee.invalid_intersection_types}),Se)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([o,s])=>i(o,s)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};ya.create=(t,e,r)=>new ya({left:t,right:e,typeName:ve.ZodIntersection,...Re(r)});var Jn=class t extends Fe{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==oe.array)return re(n,{code:ee.invalid_type,expected:oe.array,received:n.parsedType}),Se;if(n.data.length<this._def.items.length)return re(n,{code:ee.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Se;!this._def.rest&&n.data.length>this._def.items.length&&(re(n,{code:ee.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let o=[...n.data].map((s,l)=>{let u=this._def.items[l]||this._def.rest;return u?u._parse(new yn(n,s,n.path,l)):null}).filter(s=>!!s);return n.common.async?Promise.all(o).then(s=>Kt.mergeArray(r,s)):Kt.mergeArray(r,o)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};Jn.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Jn({items:t,typeName:ve.ZodTuple,rest:null,...Re(e)})};var hd=class t extends Fe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==oe.object)return re(n,{code:ee.invalid_type,expected:oe.object,received:n.parsedType}),Se;let i=[],o=this._def.keyType,s=this._def.valueType;for(let l in n.data)i.push({key:o._parse(new yn(n,l,n.path,l)),value:s._parse(new yn(n,n.data[l],n.path,l)),alwaysSet:l in n.data});return n.common.async?Kt.mergeObjectAsync(r,i):Kt.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof Fe?new t({keyType:e,valueType:r,typeName:ve.ZodRecord,...Re(n)}):new t({keyType:To.create(),valueType:e,typeName:ve.ZodRecord,...Re(r)})}},Gs=class extends Fe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==oe.map)return re(n,{code:ee.invalid_type,expected:oe.map,received:n.parsedType}),Se;let i=this._def.keyType,o=this._def.valueType,s=[...n.data.entries()].map(([l,u],m)=>({key:i._parse(new yn(n,l,n.path,[m,"key"])),value:o._parse(new yn(n,u,n.path,[m,"value"]))}));if(n.common.async){let l=new Map;return Promise.resolve().then(async()=>{for(let u of s){let m=await u.key,d=await u.value;if(m.status==="aborted"||d.status==="aborted")return Se;(m.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(m.value,d.value)}return{status:r.value,value:l}})}else{let l=new Map;for(let u of s){let m=u.key,d=u.value;if(m.status==="aborted"||d.status==="aborted")return Se;(m.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(m.value,d.value)}return{status:r.value,value:l}}}};Gs.create=(t,e,r)=>new Gs({valueType:e,keyType:t,typeName:ve.ZodMap,...Re(r)});var Ks=class t extends Fe{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==oe.set)return re(n,{code:ee.invalid_type,expected:oe.set,received:n.parsedType}),Se;let i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(re(n,{code:ee.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(re(n,{code:ee.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());let o=this._def.valueType;function s(u){let m=new Set;for(let d of u){if(d.status==="aborted")return Se;d.status==="dirty"&&r.dirty(),m.add(d.value)}return{status:r.value,value:m}}let l=[...n.data.values()].map((u,m)=>o._parse(new yn(n,u,n.path,m)));return n.common.async?Promise.all(l).then(u=>s(u)):s(l)}min(e,r){return new t({...this._def,minSize:{value:e,message:pe.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:pe.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};Ks.create=(t,e)=>new Ks({valueType:t,minSize:null,maxSize:null,typeName:ve.ZodSet,...Re(e)});var yd=class t extends Fe{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==oe.function)return re(r,{code:ee.invalid_type,expected:oe.function,received:r.parsedType}),Se;function n(l,u){return Al({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Ws(),Fi].filter(m=>!!m),issueData:{code:ee.invalid_arguments,argumentsError:u}})}function i(l,u){return Al({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Ws(),Fi].filter(m=>!!m),issueData:{code:ee.invalid_return_type,returnTypeError:u}})}let o={errorMap:r.common.contextualErrorMap},s=r.data;if(this._def.returns instanceof vo){let l=this;return or(async function(...u){let m=new Dr([]),d=await l._def.args.parseAsync(u,o).catch(T=>{throw m.addIssue(n(u,T)),m}),g=await Reflect.apply(s,this,d);return await l._def.returns._def.type.parseAsync(g,o).catch(T=>{throw m.addIssue(i(g,T)),m})})}else{let l=this;return or(function(...u){let m=l._def.args.safeParse(u,o);if(!m.success)throw new Dr([n(u,m.error)]);let d=Reflect.apply(s,this,m.data),g=l._def.returns.safeParse(d,o);if(!g.success)throw new Dr([i(d,g.error)]);return g.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:Jn.create(e).rest(Ii.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||Jn.create([]).rest(Ii.create()),returns:r||Ii.create(),typeName:ve.ZodFunction,...Re(n)})}},xa=class extends Fe{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};xa.create=(t,e)=>new xa({getter:t,typeName:ve.ZodLazy,...Re(e)});var Ta=class extends Fe{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return re(r,{received:r.data,code:ee.invalid_literal,expected:this._def.value}),Se}return{status:"valid",value:e.data}}get value(){return this._def.value}};Ta.create=(t,e)=>new Ta({value:t,typeName:ve.ZodLiteral,...Re(e)});function $M(t,e){return new Sa({values:t,typeName:ve.ZodEnum,...Re(e)})}var Sa=class t extends Fe{constructor(){super(...arguments),Pl.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return re(r,{expected:He.joinValues(n),received:r.parsedType,code:ee.invalid_type}),Se}if(dd(this,Pl,"f")||HM(this,Pl,new Set(this._def.values),"f"),!dd(this,Pl,"f").has(e.data)){let r=this._getOrReturnCtx(e),n=this._def.values;return re(r,{received:r.data,code:ee.invalid_enum_value,options:n}),Se}return or(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}};Pl=new WeakMap;Sa.create=$M;var va=class extends Fe{constructor(){super(...arguments),Ml.set(this,void 0)}_parse(e){let r=He.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==oe.string&&n.parsedType!==oe.number){let i=He.objectValues(r);return re(n,{expected:He.joinValues(i),received:n.parsedType,code:ee.invalid_type}),Se}if(dd(this,Ml,"f")||HM(this,Ml,new Set(He.getValidEnumValues(this._def.values)),"f"),!dd(this,Ml,"f").has(e.data)){let i=He.objectValues(r);return re(n,{received:n.data,code:ee.invalid_enum_value,options:i}),Se}return or(e.data)}get enum(){return this._def.values}};Ml=new WeakMap;va.create=(t,e)=>new va({values:t,typeName:ve.ZodNativeEnum,...Re(e)});var vo=class extends Fe{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==oe.promise&&r.common.async===!1)return re(r,{code:ee.invalid_type,expected:oe.promise,received:r.parsedType}),Se;let n=r.parsedType===oe.promise?r.data:Promise.resolve(r.data);return or(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}};vo.create=(t,e)=>new vo({type:t,typeName:ve.ZodPromise,...Re(e)});var xn=class extends Fe{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ve.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,o={addIssue:s=>{re(n,s),s.fatal?r.abort():r.dirty()},get path(){return n.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){let s=i.transform(n.data,o);if(n.common.async)return Promise.resolve(s).then(async l=>{if(r.value==="aborted")return Se;let u=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return u.status==="aborted"?Se:u.status==="dirty"?la(u.value):r.value==="dirty"?la(u.value):u});{if(r.value==="aborted")return Se;let l=this._def.schema._parseSync({data:s,path:n.path,parent:n});return l.status==="aborted"?Se:l.status==="dirty"?la(l.value):r.value==="dirty"?la(l.value):l}}if(i.type==="refinement"){let s=l=>{let u=i.refinement(l,o);if(n.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){let l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?Se:(l.status==="dirty"&&r.dirty(),s(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?Se:(l.status==="dirty"&&r.dirty(),s(l.value).then(()=>({status:r.value,value:l.value}))))}if(i.type==="transform")if(n.common.async===!1){let s=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!xo(s))return s;let l=i.transform(s.value,o);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(s=>xo(s)?Promise.resolve(i.transform(s.value,o)).then(l=>({status:r.value,value:l})):s);He.assertNever(i)}};xn.create=(t,e,r)=>new xn({schema:t,typeName:ve.ZodEffects,effect:e,...Re(r)});xn.createWithPreprocess=(t,e,r)=>new xn({schema:e,effect:{type:"preprocess",transform:t},typeName:ve.ZodEffects,...Re(r)});var hn=class extends Fe{_parse(e){return this._getType(e)===oe.undefined?or(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};hn.create=(t,e)=>new hn({innerType:t,typeName:ve.ZodOptional,...Re(e)});var ei=class extends Fe{_parse(e){return this._getType(e)===oe.null?or(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};ei.create=(t,e)=>new ei({innerType:t,typeName:ve.ZodNullable,...Re(e)});var ba=class extends Fe{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===oe.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};ba.create=(t,e)=>new ba({innerType:t,typeName:ve.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Re(e)});var wa=class extends Fe{_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return $s(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Dr(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Dr(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};wa.create=(t,e)=>new wa({innerType:t,typeName:ve.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Re(e)});var Qs=class extends Fe{_parse(e){if(this._getType(e)!==oe.nan){let n=this._getOrReturnCtx(e);return re(n,{code:ee.invalid_type,expected:oe.nan,received:n.parsedType}),Se}return{status:"valid",value:e.data}}};Qs.create=t=>new Qs({typeName:ve.ZodNaN,...Re(t)});var O6=Symbol("zod_brand"),Dl=class extends Fe{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},Fl=class t extends Fe{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let o=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?Se:o.status==="dirty"?(r.dirty(),la(o.value)):this._def.out._parseAsync({data:o.value,path:n.path,parent:n})})();{let i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?Se:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:ve.ZodPipeline})}},Ea=class extends Fe{_parse(e){let r=this._def.innerType._parse(e),n=i=>(xo(i)&&(i.value=Object.freeze(i.value)),i);return $s(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}};Ea.create=(t,e)=>new Ea({innerType:t,typeName:ve.ZodReadonly,...Re(e)});function UM(t,e){let r=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof r=="string"?{message:r}:r}function jM(t,e={},r){return t?So.create().superRefine((n,i)=>{let o=t(n);if(o instanceof Promise)return o.then(s=>{if(!s){let l=UM(e,n),u=l.fatal??r??!0;i.addIssue({code:"custom",...l,fatal:u})}});if(!o){let s=UM(e,n),l=s.fatal??r??!0;i.addIssue({code:"custom",...s,fatal:l})}}):So.create()}var N6={object:Fr.lazycreate},ve;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(ve||(ve={}));var U6=(t,e={message:`Input not instance of ${t.name}`})=>jM(r=>r instanceof t,e),zM=To.create,qM=ua.create,H6=Qs.create,B6=pa.create,GM=ma.create,V6=fa.create,W6=zs.create,$6=da.create,j6=ga.create,z6=So.create,q6=Ii.create,G6=Fn.create,K6=qs.create,Q6=Ci.create,Y6=Fr.create,Z6=Fr.strictCreate,X6=ha.create,J6=gd.create,e5=ya.create,t5=Jn.create,r5=hd.create,n5=Gs.create,i5=Ks.create,o5=yd.create,a5=xa.create,s5=Ta.create,c5=Sa.create,l5=va.create,u5=vo.create,p5=xn.create,m5=hn.create,f5=ei.create,d5=xn.createWithPreprocess,g5=Fl.create,h5=()=>zM().optional(),y5=()=>qM().optional(),x5=()=>GM().optional(),T5={string:t=>To.create({...t,coerce:!0}),number:t=>ua.create({...t,coerce:!0}),boolean:t=>ma.create({...t,coerce:!0}),bigint:t=>pa.create({...t,coerce:!0}),date:t=>fa.create({...t,coerce:!0})};var S5=Se;function KM(t){let e=t.operands.map(KS).join(" ");return`(#${t.operator} ${e})`}function KS(t){return t.type==="capture"?`@${t.name}`:t.value}function QM(t,e){return e.errors.filter(r=>!(r.code==="invalid_type"&&r.path.length===2&&(r.path[1]==="name"||r.path[1]==="value"))).map(r=>v5(t,r))}function v5(t,e){if(e.path.length===0)return e.code==="too_small"?"Too few arguments":e.code==="too_big"?"Too many arguments":e.message;let r=e.message;e.code==="invalid_literal"&&e.path[1]==="type"&&(r=e.expected==="capture"?"Capture names must be prefixed with @":"Expected string, but received capture");let n=e.path[0],i=KS(t[n]);return`Error on argument ${n} (\`${i}\`): ${r}`}var xt=class{allowMissingNode(){return!1}createPredicate(e){let r=this.schema.safeParse(e);return r.success?{success:!0,predicate:n=>{try{let i=this.constructAcceptArgs(r.data,n);return this.run(...i)}catch(i){if(i instanceof xd&&this.allowMissingNode())return!0;throw i}}}:{success:!1,errors:QM(e,r.error)}}constructAcceptArgs(e,r){return e.map(n=>{if(n.type==="capture"){let i=r.captures.find(o=>o.name===n.name);if(i==null)throw new xd(n.name);return i}else return n.value})}},xd=class extends Error{constructor(e){super(`Could not find capture ${e}`)}};function QS(t,e){if(t.parent==null)throw Error("Node has no parent");let r=t.parent.walk(),n=r.gotoFirstChild(),i=!0;for(;n;){if(r.currentFieldName===e){if(r.currentNode.id===t.id)return i;i=!i}n=r.gotoNextSibling()}throw Error(`Node not found in parent for field: ${e}`)}var YS=Pe.object({type:Pe.literal("string"),value:Pe.string()}),ue={node:Pe.object({type:Pe.literal("capture"),name:Pe.string()}),string:YS,integer:YS.transform((t,e)=>{let r=parseInt(t.value);return isNaN(r)?(e.addIssue({code:Pe.ZodIssueCode.custom,message:"Expected an integer"}),Pe.NEVER):{type:"integer",value:r}}),boolean:YS.transform((t,e)=>t.value==="true"?{type:"boolean",value:!0}:t.value==="false"?{type:"boolean",value:!1}:(e.addIssue({code:Pe.ZodIssueCode.custom,message:"Expected true or false"}),Pe.NEVER))};var ZS=class extends xt{constructor(){super(...arguments);this.name="even?";this.schema=Pe.tuple([ue.node,ue.string])}run({node:r},n){return QS(r,n)}},XS=class extends xt{constructor(){super(...arguments);this.name="odd?";this.schema=Pe.tuple([ue.node,ue.string])}run({node:r},n){return!QS(r,n)}},JS=class extends xt{constructor(){super(...arguments);this.name="text?";this.schema=Pe.tuple([ue.node,ue.string]).rest(ue.string)}run({document:r,range:n},...i){return i.includes(r.getText(n))}},ev=class extends xt{constructor(){super(...arguments);this.name="type?";this.schema=Pe.tuple([ue.node,ue.string]).rest(ue.string)}run({node:r},...n){return n.includes(r.type)}},tv=class extends xt{constructor(){super(...arguments);this.name="not-type?";this.schema=Pe.tuple([ue.node,ue.string]).rest(ue.string)}run({node:r},...n){return!n.includes(r.type)}},rv=class extends xt{constructor(){super(...arguments);this.name="not-parent-type?";this.schema=Pe.tuple([ue.node,ue.string]).rest(ue.string)}run({node:r},...n){return r.parent==null||!n.includes(r.parent.type)}},nv=class extends xt{constructor(){super(...arguments);this.name="is-nth-child?";this.schema=Pe.tuple([ue.node,ue.integer])}run({node:r},n){return r.parent?.children.findIndex(i=>i.id===r.id)===n}},iv=class extends xt{constructor(){super(...arguments);this.name="has-multiple-children-of-type?";this.schema=Pe.tuple([ue.node,ue.string])}run({node:r},n){return r.children.filter(o=>o.type===n).length>1}},ov=class extends xt{constructor(){super(...arguments);this.name="child-range!";this.schema=Pe.union([Pe.tuple([ue.node,ue.integer]),Pe.tuple([ue.node,ue.integer,ue.integer]),Pe.tuple([ue.node,ue.integer,ue.integer,ue.boolean]),Pe.tuple([ue.node,ue.integer,ue.integer,ue.boolean,ue.boolean])])}run(r,n,i,o,s){let{node:{children:l}}=r;n=n<0?l.length+n:n,i=i??-1,i=i<0?l.length+i:i;let u=l[n],m=l[i];return r.range=Gr(o?u.endPosition:u.startPosition,s?m.startPosition:m.endPosition),!0}},av=class extends xt{constructor(){super(...arguments);this.name="character-range!";this.schema=Pe.union([Pe.tuple([ue.node,ue.integer]),Pe.tuple([ue.node,ue.integer,ue.integer])])}run(r,n,i){return r.range=new Y(r.range.start.translate(void 0,n),r.range.end.translate(void 0,i??0)),!0}},sv=class extends xt{constructor(){super(...arguments);this.name="shrink-to-match!";this.schema=Pe.tuple([ue.node,ue.string])}run(r,n){let{document:i,range:o}=r,l=i.getText(o).match(new RegExp(n,"ds"));if(l?.index==null)throw Error(`No match for pattern '${n}'`);let[u,m]=l.indices?.groups?.keep??l.indices[0],d=i.offsetAt(o.start);return r.range=new Y(i.positionAt(d+u),i.positionAt(d+m)),!0}},cv=class extends xt{constructor(){super(...arguments);this.name="grow-to-named-siblings!";this.schema=Pe.union([Pe.tuple([ue.node]),Pe.tuple([ue.node,ue.string])])}run(r,n){let{node:i,range:o,document:s}=r;if(i.parent==null)throw Error("Node has no parent");let{children:l}=i.parent,u=l.findIndex(d=>d.id===i.id),m=null;if(u===-1)throw Error("Node not found in parent");for(let d=u+1;d<l.length;++d){let g=l[d];if(!g.isNamed)break;let y=Gr(g.startPosition,g.endPosition);if(n!=null&&n===s.getText(y))break;m=y.end}return m!=null&&(r.range=new Y(o.start,m)),!0}},lv=class extends xt{constructor(){super(...arguments);this.name="trim-end!";this.schema=Pe.tuple([ue.node])}run(r){let{document:n,range:i}=r,o=n.getText(i),s=o.length-o.trimEnd().length;return s>0&&(r.range=new Y(i.start,mk(n,i.end,-s))),!0}},uv=class extends xt{constructor(){super(...arguments);this.name="document-range!";this.schema=Pe.tuple([ue.node]).rest(ue.node)}run(...r){for(let n of r)n.range=n.document.range;return!0}},pv=class extends xt{constructor(){super(...arguments);this.name="allow-multiple!";this.schema=Pe.tuple([ue.node]).rest(ue.node)}allowMissingNode(){return!0}run(...r){for(let n of r)n.allowMultiple=!0;return!0}},mv=class extends xt{constructor(){super(...arguments);this.name="log!";this.schema=Pe.tuple([ue.node])}run(r){return console.log(`#log!: ${r.name}@${r.range}`),!0}},fv=class extends xt{constructor(){super(...arguments);this.name="insertion-delimiter!";this.schema=Pe.tuple([ue.node,ue.string])}run(r,n){return r.insertionDelimiter=n,!0}},dv=class extends xt{constructor(){super(...arguments);this.name="single-or-multi-line-delimiter!";this.schema=Pe.tuple([ue.node,ue.node,ue.string,ue.string])}run(r,n,i,o){return r.insertionDelimiter=n.range.isSingleLine?i:o,!0}},gv=class extends xt{constructor(){super(...arguments);this.name="empty-single-multi-delimiter!";this.schema=Pe.tuple([ue.node,ue.node,ue.string,ue.string,ue.string])}run(r,n,i,o,s){let l=!n.node.children.some(u=>u.isNamed);return r.insertionDelimiter=l?i:n.range.isSingleLine?o:s,!0}},YM=[new mv,new ZS,new XS,new JS,new ev,new tv,new lv,new uv,new rv,new nv,new ov,new av,new sv,new cv,new pv,new fv,new dv,new gv,new iv];function ZM(t){let e=[],r=[];return t.forEach((n,i)=>{let o=[];n.forEach((s,l)=>{let u=YM.find(({name:d})=>d===s.operator);if(u==null){e.push({patternIdx:i,predicateIdx:l,error:`Unknown predicate operator "${s.operator}"`});return}let m=u.createPredicate(s.operands);if(!m.success){e.push(...m.errors.map(d=>({patternIdx:i,predicateIdx:l,error:d})));return}o.push(m.predicate)}),r.push(o)}),{errors:e,predicates:r}}function XM(t,e){let{errors:r,predicates:n}=ZM(e.predicates);if(r.length>0){for(let i of r){let o=[`language ${t}`,`pattern ${i.patternIdx}`,`predicate \`${KM(e.predicates[i.patternIdx][i.predicateIdx])}\``].join(", ");ut(k().messages,"TreeSitterQuery.parsePredicates",`Error parsing predicate for ${o}: ${i.error}`)}if(k().runMode==="test")throw new Error("Invalid predicates")}return n}function hv(t){return{row:t.line,column:t.character}}function JM(t){return t.map(e=>({...e,range:yv(e),name:b5(e)}))}function yv(t){return t.name.endsWith(".startOf")?t.range.start.toEmptyRange():t.name.endsWith(".endOf")?t.range.end.toEmptyRange():t.range}function b5(t){return t.name.endsWith(".startOf")?t.name.slice(0,-8):t.name.endsWith(".endOf")?t.name.slice(0,-6):t.name}var xv=class{constructor(){this.documentVersion=-1;this.documentUri="";this.documentLanguageId="";this.matches=[]}clear(){this.documentUri="",this.documentVersion=-1,this.documentLanguageId="",this.startPosition=void 0,this.endPosition=void 0,this.matches=[]}isValid(e,r,n){return this.documentVersion===e.version&&this.documentUri===e.uri.toString()&&this.documentLanguageId===e.languageId&&eD(this.startPosition,r)&&eD(this.endPosition,n)}update(e,r,n,i){this.documentVersion=e.version,this.documentUri=e.uri.toString(),this.documentLanguageId=e.languageId,this.startPosition=r,this.endPosition=n,this.matches=i}get(){return this.matches}};function eD(t,e){return t==null||e==null?t===e:t.isEqual(e)}var _a=new xv;var Ll=class t{constructor(e,r,n){this.treeSitter=e;this.query=r;this.patternPredicates=n;this.shouldCheckCaptures=k().runMode!=="production"}static create(e,r,n){let i=XM(e,n);return new t(r,n,i)}hasCapture(e){return this.query.captureNames.some(r=>jS(r)===e)}matches(e,r,n){if(!_a.isValid(e,r,n)){let i=this.getAllMatches(e,r,n);_a.update(e,r,n,i)}return _a.get()}getAllMatches(e,r,n){let i=this.getTreeMatches(e,r,n),o=[];for(let s of i){let l=this.createMutableQueryMatch(e,s);this.runPredicates(l)&&o.push(this.createQueryMatch(l))}return o}getTreeMatches(e,r,n){let{rootNode:i}=this.treeSitter.getTree(e);return this.query.matches(i,{startPosition:r!=null?hv(r):void 0,endPosition:n!=null?hv(n):void 0})}createMutableQueryMatch(e,r){return{patternIdx:r.pattern,captures:r.captures.map(({name:n,node:i})=>({name:n,node:i,document:e,range:PM(i),insertionDelimiter:void 0,allowMultiple:!1,hasError:()=>CM(i)}))}}runPredicates(e){for(let r of this.patternPredicates[e.patternIdx])if(!r(e))return!1;return!0}createQueryMatch(e){let r=[],n=new Map;for(let i of e.captures){let o=jS(i.name),s=yv(i),l=n.get(o);if(l==null){let u=[i],m={...i,name:o,range:s,hasError:()=>u.some(d=>d.hasError())};r.push(m),n.set(o,{acc:m,captures:u})}else l.acc.range=l.acc.range.union(s),l.acc.allowMultiple=l.acc.allowMultiple||i.allowMultiple,l.acc.insertionDelimiter=l.acc.insertionDelimiter??i.insertionDelimiter,l.captures.push(i)}return this.shouldCheckCaptures&&this.checkCaptures(Array.from(n.values())),{captures:r}}checkCaptures(e){for(let r of e)if(!IM(JM(r.captures),k().messages)&&k().runMode==="test")throw new Error("Invalid captures")}};var rD="_",w5=[rD,"interior",...Jo],E5=["prefix","leading","trailing"],_5=["startOf","endOf","start.startOf","start.endOf","end.startOf","end.endOf"],R5=["domain","removal","iteration","iteration.domain"],tD=["start","end","start.startOf","start.endOf","end.startOf","end.endOf"],Ra=new Set;for(let t of w5){if(t!==rD){Ra.add(t);for(let e of tD)Ra.add(`${t}.${e}`)}for(let e of E5){Ra.add(`${t}.${e}`);for(let r of _5)Ra.add(`${t}.${e}.${r}`)}for(let e of R5){Ra.add(`${t}.${e}`);for(let r of tD)Ra.add(`${t}.${e}.${r}`)}}var k5=/^(?!;;).*(?<!"\w*)@([\w.]*)/gm;function nD(t,e){let r=e.matchAll(k5),n=[];for(let o of r){let s=o[1];if(!(s.length>1&&!s.includes(".")&&s.startsWith("_"))&&!Ra.has(s)){let l=o.input.slice(0,o.index).split(`
`).length;n.push(`${t}(${l}) invalid capture '@${s}'.`)}}if(n.length===0)return;let i=n.join(`
`);if(ut(k().messages,"validateQueryCaptures.invalidCaptureName",i),k().runMode==="test")throw new Error(i)}var Td=class t{constructor(e){this.query=e}static async create(e,r,n,i){let o=await A5(e,r,`${i}.scm`);if(o==null||!await n.loadLanguage(i))return;let s=n.createQuery(i,o);if(s==null)throw Error(`Could not create Tree sitter query for language ${i}`);let l=Ll.create(i,n,s);return new t(l)}getScopeHandler(e){if(this.query.hasCapture(e.type))return new jf(this.query,e)}getCapturesMap(e){let r=this.query.matches(e),n={};for(let i of r)for(let o of i.captures){let s=o.name;n[s]==null&&(n[s]=[]),n[s].push(o)}return n}};async function A5(t,e,r){let n={[r]:null},i=t.runMode!=="production";for(;Object.values(n).some(o=>o==null);)for(let[o,s]of Object.entries(n)){if(s!=null)continue;let l=await e.readQuery(o);if(l==null){if(o===r)return;if(ut(t.messages,"LanguageDefinition.readQueryFileAndImports.queryNotFound",`Could not find imported query file ${o}`),t.runMode==="test")throw new Error("Invalid import statement");l=""}i&&nD(o,l),n[o]=l,ln(l,/^[^\S\r\n]*;;?[^\S\r\n]*(?:import|include)[^\S\r\n]+['"]?([\w|/\\.]+)['"]?[^\S\r\n]*$/gm,u=>{let m=u[1];i&&P5(t,o,m,u[0]),n[m]=n[m]??null})}return Object.values(n).join(`
`)}function P5(t,e,r,n){let i=!1;/[/\\]/g.test(r)&&(ut(t.messages,"LanguageDefinition.readQueryFileAndImports.invalidImport",`Invalid import statement in ${e}: "${n}". Relative import paths not supported`),i=!0);let o=`;; import ${r}`;if(n!==o&&(ut(t.messages,"LanguageDefinition.readQueryFileAndImports.malformedImport",`Malformed import statement in ${e}: "${n}". Import statements must be of the form "${o}"`),i=!0),i&&t.runMode==="test")throw new Error("Invalid import statement")}var iD=Symbol("LANGUAGE_UNDEFINED"),Sd=class t{constructor(e,r,n){this.ide=e;this.treeSitter=r;this.treeSitterQueryProvider=n;this.notifier=new tr;this.languageDefinitions=new Map;this.disposables=[];this.onDidChangeDefinition=this.notifier.registerListener;let i=e.runMode==="test";e.onDidOpenTextDocument(o=>{i&&_a.clear(),this.loadLanguage(o.languageId)}),e.onDidChangeVisibleTextEditors(o=>{o.forEach(({document:s})=>this.loadLanguage(s.languageId))}),this.disposables.push(n.onChanges(()=>this.reloadLanguageDefinitions()))}static async create(e,r,n){let i=new t(e,r,n);return await i.loadAllLanguages(),i}async loadAllLanguages(){let e=this.ide.visibleTextEditors.map(({document:r})=>r.languageId);try{await Promise.all(e.map(r=>this.loadLanguage(r)))}catch(r){if(ut(this.ide.messages,"Failed to load language definitions",Mn(r)),this.ide.runMode==="test")throw r}}async loadLanguage(e){if(this.languageDefinitions.has(e))return;let r=await Td.create(this.ide,this.treeSitterQueryProvider,this.treeSitter,e)??iD;this.languageDefinitions.set(e,r)}async reloadLanguageDefinitions(){this.languageDefinitions.clear(),await this.loadAllLanguages(),_a.clear(),this.notifier.notifyListeners()}get(e){let r=this.languageDefinitions.get(e);if(r==null)throw new Error("Expected language definition entry is missing for languageId "+e);return r===iD?void 0:r}getNodeAtLocation(e,r){return this.treeSitter.getNodeAtLocation(e,r)}dispose(){this.disposables.forEach(e=>e.dispose())}};var vd=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}get nestedStages(){return this.nestedStages_==null&&(this.nestedStages_=this.modifier.modifiers.map(this.modifierStageFactory.create)),this.nestedStages_}run(e,r){for(let n of this.nestedStages)try{return n.run(e,r)}catch{continue}throw new Error("No modifier could be applied")}};var Ys=class{constructor(e,r){this.modifierStageFactory=e;this.nestedModifier=r;this.suppressErrors=!1}run(e,r){if(this.shouldModify(e))try{return this.nestedStage.run(e,r).map(n=>n.withThatTarget(e))}catch(n){if(!this.suppressErrors)throw n}return[e]}get nestedStage(){return this.nestedStage_==null&&(this.nestedStage_=this.modifierStageFactory.create(this.nestedModifier)),this.nestedStage_}},bo=class extends Ys{constructor(e,r){super(e,r.modifier)}shouldModify(e){return!e.hasExplicitScopeType}},bd=class extends Ys{constructor(r,n,i){super(r,n);this.modificationCondition=i}shouldModify(r){return this.modificationCondition(r)}},Zs=class extends Ys{shouldModify(e){return!e.hasExplicitScopeType&&!e.isImplicit}},Xs=class extends Ys{constructor(r){super(r,{type:"containingScope",scopeType:{type:"token"}});this.suppressErrors=!0}shouldModify(r){return!r.hasExplicitScopeType&&!r.hasExplicitRange&&r.contentRange.isEmpty}};function oD(t,e){return Object.getPrototypeOf(t).constructor===Object.getPrototypeOf(e).constructor}function Js(t,e,r,n,i){if(e.editor!==r.editor)throw Error("Continuous targets must be in the same editor");if(n&&i&&oD(e,r)){let o=e.maybeCreateRichRangeTarget(t,r);if(o!=null)return o}return e.textualType==="line"&&r.textualType==="line"?new gr({editor:e.editor,isReversed:t,contentRange:ks(e,r,n,i)}):new Ct({editor:e.editor,isReversed:t,hasExplicitRange:!0,contentRange:Rs(e,r,n,i),textualType:n&&i&&e.textualType==="token"&&r.textualType==="token"?"token":"character"})}function wd(t,e,r){if(e===r)return e.getTargets(t);let n=e.getTargets(t),i=r.getTargets(t);if(n.length!==1||i.length!==1)throw Error("Scope range targets must be single-target");let[o]=n,[s]=i,l=s.contentRange.start.isAfterOrEqual(o.contentRange.start),[u,m]=l?[o,s]:[s,o];return[Js(t,u,m,!0,!0)]}function Ed(t,e,r,n){let i=Array.from(t.generateScopes(e,r,"forward",{containment:"required",allowAdjacentScopes:!0,skipAncestorScopes:!0}));switch(i.length){case 0:return;case 1:return i[0];case 2:{let[o,s]=i;return n==="forward"?s:n==="backward"||(t.isPreferredOver?.(o,s)??!1)?o:s}default:throw new Error("Expected no more than 2 scope candidates")}}function _d(t,e,r=0){let{isReversed:n,editor:i,contentRange:{start:o,end:s}}=t;if(s.isEqual(o)){let m=Ed(e,i,o);return m==null||(r>0&&(m=Tv(e,i,m.domain.end,"forward",r,!0)),m==null)?void 0:m.getTargets(n)}let l=Tv(e,i,o,"forward",r);if(l==null)return;if(l.domain.contains(s))return l.getTargets(n);let u=Tv(e,i,s,"backward",r);if(u!=null)return wd(n,l,u)}function Tv(t,e,r,n,i,o=!1){let s=0;for(let l of t.generateScopes(e,r,n,{containment:"required",allowAdjacentScopes:o})){if(s===i)return l;s+=1}}var ec=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e,r){let{scopeType:n,ancestorIndex:i=0}=this.modifier,o=this.scopeHandlerFactory.maybeCreate(n,e.editor.document.languageId);if(o==null)return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e,r);let s=_d(e,o,i);if(s==null)throw new ht(n.type);return s}};var Rd=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e,r){let{scopeType:n}=this.modifier,{editor:i,isReversed:o}=e,s=this.scopeHandlerFactory.maybeCreate(n,i.document.languageId);if(s==null)return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e,r);let l;if(e.hasExplicitRange&&(l=aD(s,i,e.contentRange),l.length===1&&l[0].domain.contains(e.contentRange)&&!e.hasExplicitScopeType&&!r.multipleTargets&&(l=void 0)),l==null&&(l=this.getDefaultIterationRange(s,this.scopeHandlerFactory,e).flatMap(u=>aD(s,i,u))),l.length===0)throw new ht(n.type);return l.flatMap(u=>u.getTargets(o))}getDefaultIterationRange(e,r,n){let i=r.maybeCreate(e.iterationScopeType,n.editor.document.languageId);if(i==null)throw Error("Could not find iteration scope handler");let o=_d(n,i);if(o==null)throw new ht(`iteration scope for ${e.scopeType.type}`);return o.map(s=>s.contentRange)}};function aD(t,e,{start:r,end:n}){return Array.from(t.generateScopes(e,r,"forward",{distalPosition:n,skipAncestorScopes:!0,allowAdjacentScopes:t.includeAdjacentInEvery}))}var kd=class{constructor(e){this.modifier=e}run(e){return e.contentText.trim()!==""?[e]:[]}},Ad=class{constructor(e){this.modifier=e}run(e){return e.contentText.trim()===""?[e]:[]}};var Pd=class{run(){return df(k()).map(e=>new pf({editor:e.editor,isReversed:e.selection.isReversed,contentRange:e.selection}))}};var Md=class{constructor(e,r){this.modifierStageFactory=e;this.markStageFactory=r}run(e,{actionFinalStages:r=[],noAutomaticTokenExpansion:n=!1}={}){return new Sv(this.modifierStageFactory,this.markStageFactory,e,{actionFinalStages:r,noAutomaticTokenExpansion:n}).run()}},Sv=class{constructor(e,r,n,i){this.modifierStageFactory=e;this.markStageFactory=r;this.target=n;this.opts=i}run(){return D5(this.processTarget(this.target))}processTarget(e){switch(e.type){case"list":return e.elements.flatMap(r=>this.processTarget(r));case"range":return this.processRangeTarget(e);case"primitive":case"implicit":return this.processPrimitiveTarget(e)}}processRangeTarget(e){let r=this.processPrimitiveTarget(e.anchor),n=this.processPrimitiveTarget(e.active);return Pt(r,n).flatMap(([i,o])=>{if(i==null||o==null)throw new Error("AnchorTargets and activeTargets lengths don't match");switch(e.rangeType){case"continuous":return this.processContinuousRangeTarget(i,o,e);case"vertical":return F5(i,o,e.excludeAnchor,e.excludeActive)}})}processContinuousRangeTarget(e,r,{excludeAnchor:n,excludeActive:i,exclusionScopeType:o}){if(o==null)return[wo(e,r,n,i)];let s=wv(e,r);return[wo(n?sD(this.modifierStageFactory,e,o,s?"backward":"forward"):e,i?sD(this.modifierStageFactory,r,o,s?"forward":"backward"):r,!1,!1)]}processPrimitiveTarget(e){let r,n,i=!1;e.type==="implicit"?(r=new Pd,n=[]):(r=this.markStageFactory.create(e.mark),n=vv(this.modifierStageFactory,e.modifiers),i=M5(e));let o=r.run(),[s,l]=this.getPreAndPostStages(i),u=[...s,...n,...this.opts.actionFinalStages,...l];return bv(u,o)}getPreAndPostStages(e){if(this.opts.noAutomaticTokenExpansion)return[[],[]];let r=new Xs(this.modifierStageFactory);return e?[[r],[]]:[[],[r]]}};function M5(t){return t.modifiers.length>0&&t.modifiers.every(({type:e})=>e==="startOf"||e==="endOf")}function vv(t,e){return e.map(t.create).reverse()}function bv(t,e){return t.forEach(r=>{let n={multipleTargets:e.length>1};e=e.flatMap(i=>r.run(i,n))}),e}function sD(t,e,r,n){let i={multipleTargets:!1};return t.create({type:"relativeScope",scopeType:r,direction:n,length:1,offset:1}).run(e,i)[0]}function wv(t,e){return t.contentRange.start.isAfter(e.contentRange.start)?!0:t.contentRange.start.isBefore(e.contentRange.start)?!1:t.contentRange.end.isAfter(e.contentRange.end)}function D5(t){return hA(t,(e,r)=>e.isEqual(r),e=>e.contentRange.concise())}function cD(t,e){if(t.editor!==e.editor)throw new Error("Cannot form range between targets in different editors")}function wo(t,e,r=!1,n=!1){cD(t,e);let i=wv(t,e);return Js(i,i?e:t,i?t:e,!(i?n:r),!(i?r:n))}function F5(t,e,r,n){cD(t,e);let i=wv(t,e),o=i?-1:1,l=(i?t.contentRange.start:t.contentRange.end).line+(r?o:0),m=(i?e.contentRange.start:e.contentRange.end).line-(n?o:0),d=[];for(let g=l;;g+=o){let y=new Y(g,t.contentRange.start.character,g,t.contentRange.end.character);if(d.push(new Ke({editor:t.editor,isReversed:t.isReversed,contentRange:y,insertionDelimiter:t.insertionDelimiter})),g===m)return d}}var Dd=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=this.getModifierStages(),n=bv(r,[e]),i=this.modifier.type==="extendThroughStartOf";return n.map(o=>new mf({editor:e.editor,isReversed:i,inputTarget:e,modifiedTarget:o,isHead:i}))}getModifierStages(){return this.modifier.modifiers!=null?vv(this.modifierStageFactory,this.modifier.modifiers):[new Ev(this.modifierStageFactory,this.modifier)]}},Ev=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e,r){let n=this.getContainingLine(e,r),i=this.getContainingPairInterior(e,r),o=i!=null?n.contentRange.intersection(i.contentRange):null;return o==null||o.isEmpty?[n]:[new Ke({editor:e.editor,isReversed:e.isReversed,contentRange:o})]}getContainingPairInterior(e,r){try{return this.getContaining(e,r,{type:"surroundingPairInterior",delimiter:"any"})[0]}catch(n){if(n instanceof ht)return;throw n}}getContainingLine(e,r){return this.getContaining(e,r,{type:"line"})[0]}getContaining(e,r,n){return this.modifierStageFactory.create({type:"containingScope",scopeType:n}).run(e,r)}};var ti=class extends Error{constructor(e,r){let n=r!=null?` #${r+1}`:"";super(`Scope '${e.type}'${n} is out of range`),this.name="OutOfRangeError"}};function lD(t,e,r,n){return _v(t,e,r,n),e.slice(r,n+1)}function _v(t,e,r,n){if(r<0||r>=e.length)throw new ti(t,r);if(n<0||n>=e.length)throw new ti(t,n)}var tc=class{constructor(e,r,n){this.modifierStageFactory=e;this.storedTargets=r;this.modifier=n}run(e,r){let n=new Xs(this.modifierStageFactory).run(e,r)[0];switch(this.modifier.type){case"everyScope":return this.handleEveryScope(n,r);case"ordinalScope":return this.handleOrdinalScope(n,r,this.modifier);case"relativeScope":return this.handleRelativeScope(n,r,this.modifier);default:throw Error(`${this.modifier.type} instance scope not supported`)}}handleEveryScope(e,r){return Array.from(If(this.getEveryRanges(e),([n,i])=>this.getTargetIterable(e,r,n,i,"forward")))}handleOrdinalScope(e,r,{start:n,length:i,scopeType:o}){return this.getEveryRanges(e).flatMap(([s,l])=>uD(o,this.getTargetIterable(e,r,s,l,n>=0?"forward":"backward"),n>=0?n:-(i+n),i))}handleRelativeScope(e,r,{direction:n,offset:i,length:o,scopeType:s}){return(this.storedTargets.get("instanceReference")??[e]).flatMap(u=>{let{editor:m}=u,d=n==="forward"?new Y(i===0?u.contentRange.start:u.contentRange.end,m.document.range.end):new Y(m.document.range.start,i===0?u.contentRange.end:u.contentRange.start);return uD(s,this.getTargetIterable(e,r,m,d,n),i===0?0:i-1,o)})}getEveryRanges({editor:e}){return this.storedTargets.get("instanceReference")?.map(({editor:r,contentRange:n})=>[r,n])??[[e,e.document.range]]}getTargetIterable(e,r,n,i,o){let s=Gt(gn(new RegExp(Wr(e.contentText),"g"),n,i,o),u=>new Ke({contentRange:u,editor:n,isReversed:!1,textualType:"character"})),l=L5(e);if(l!=null){let u=this.modifierStageFactory.create({type:"containingScope",scopeType:l});return Ff(Gt(s,m=>{try{let d=u.run(m,r);return d.length===1&&d[0].contentRange.isRangeEqual(m.contentRange)?d[0]:null}catch{return null}}),m=>m!=null)}return s}};function L5(t){switch(t.textualType){case"line":case"token":case"word":return{type:t.textualType};default:return null}}function uD(t,e,r,n){Array.from(Rl(r,e));let i=Array.from(Rl(n,e));if(i.length<n)throw new ti(t,r+n-1);return i}var Fd=class{constructor(e,r){this.modifierHandlerFactory=e;this.modifier=r}run(e,r){let n=e.getInterior();return n??this.modifierHandlerFactory.create({type:"containingScope",scopeType:{type:"interior",explicitScopeType:e.hasExplicitScopeType}}).run(e,r)}},Ld=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r;this.containingSurroundingPairIfNoBoundaryStage=Rv(this.modifierStageFactory)}run(e,r){return this.containingSurroundingPairIfNoBoundaryStage.run(e,r).flatMap(n=>n.getBoundary())}};function Rv(t){return new bd(t,{type:"containingScope",scopeType:{type:"surroundingPair",delimiter:"any"}},e=>e.getBoundary()==null)}var ri={type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:{type:"line"}}},kv={type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:{type:"token"}}};var Id=class extends Error{constructor(e){super(`Target has no ${e} delimiter.`),this.name="NoDelimiterError"}},Cd=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e,r){return this.modifierStageFactory.create(kv).run(e,r).map(n=>{let i=n.getLeadingDelimiterTarget();if(i==null)throw new Id("leading");return i})}},Od=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e,r){return this.modifierStageFactory.create(kv).run(e,r).map(n=>{let i=n.getTrailingDelimiterTarget();if(i==null)throw new Id("trailing");return i})}};function Nd(t,e,r,n,i){return _v(t,r,n,i),n===i?r[n]:Js(e,r[n],r[i],!0,!0)}function Ud(t,e,r,n){return t.create({type:"everyScope",scopeType:n}).run(e,r)}var Hd=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e,r){let n=Ud(this.modifierStageFactory,e,r,this.modifier.scopeType),i=this.modifier.start+(this.modifier.start<0?n.length:0),o=i+this.modifier.length-1;return this.modifier.isEvery?lD(this.modifier.scopeType,n,i,o):[Nd(this.modifier.scopeType,e.isReversed,n,i,o)]}};var Bd=class{run(e){let r={editor:e.editor,isReversed:e.isReversed,contentRange:this.getContentRange(e.contentRange)};return[e.isRaw?new mo(r):new Ke({...r,textualType:"character"})]}},Vd=class extends Bd{getContentRange(e){return e.start.toEmptyRange()}},Wd=class extends Bd{getContentRange(e){return e.end.toEmptyRange()}};var $d=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e,r){let{scopeType:n}=this.modifier,i=new ec(this.modifierStageFactory,this.scopeHandlerFactory,{type:"containingScope",scopeType:n});try{return i.run(e,r)}catch(l){if(!(l instanceof ht))throw l}let o=this.scopeHandlerFactory.create(this.modifier.scopeType,e.editor.document.languageId),s=I5(e,o);if(s==null)throw Error(`No scopes found for scope type: ${n.type}`);return s}};function I5(t,e){let r=e.generateScopes(t.editor,t.contentRange.start,"backward"),n=e.generateScopes(t.editor,t.contentRange.end,"forward"),{active:i}=t.contentSelection,o=pD(r,i),s=pD(n,i),l=o.distance<s.distance?o.scope:s.scope;return l?.getTargets(t.isReversed)}function pD(t,e){let r,n=1/0;for(let i of t){let o=Math.min(mD(e,i.domain.start),mD(e,i.domain.end));if(o<n)r=i,n=o;else break}return{scope:r,distance:n}}function mD(t,e){return Math.abs(t.line-e.line)*1e4+Math.abs(t.character-e.character)}var jd=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e,r){let n=this.modifierStageFactory.create(this.modifier.anchor),i=this.modifierStageFactory.create(this.modifier.active),o=n.run(e,r),s=i.run(e,r);if(o.length!==1||s.length!==1)throw new Error("Expected single anchor and active target");return[wo(o[0],s[0],this.modifier.excludeAnchor,this.modifier.excludeActive)]}};var zd=class{constructor(e){this.modifier=e}run(e){return[new mo({editor:e.editor,contentRange:e.contentRange,isReversed:e.isReversed})]}};var qd=class extends Error{constructor(e,r,n){super(`Requested ${e} ${n}s, but ${r} are already selected.`),this.name="TooFewScopesError"}};function fD(t,e,r,n){let i=Ud(t,U5(r),n,e.scopeType),o=N5(r.contentRange,i);return C5(e,r,i,o)}function C5(t,e,r,n){let i=t.direction==="forward",o=O5(t,e.contentRange,r,i,n),s=i?o+t.length-1:o-t.length+1,l=Math.min(o,s),u=Math.max(o,s);return[Nd(t.scopeType,e.isReversed,r,l,u)]}function O5(t,e,r,n,i){let o=t.offset===0;if(i==null){let u=n?r.findIndex(m=>m.contentRange.start.isAfter(e.start)):Go(r,m=>m.contentRange.start.isBefore(e.start));if(u===-1)throw new ti(t.scopeType);return o?u:n?u+t.offset-1:u-t.offset+1}let s=i.start,l=i.end;if(o){let u=l-s+1;if(u>t.length)throw new qd(t.length,u,t.scopeType.type);return n?s:l}return n?l+t.offset:s-t.offset}function N5(t,e){let r=e.map((i,o)=>({index:o,intersection:i.contentRange.intersection(t)})).filter(i=>i.intersection!=null);if(t.isEmpty){if(r.length===0)return;let i=r.at(-1).index;return{start:i,end:i}}let n=r.filter(i=>!i.intersection.isEmpty).map(i=>i.index);if(n.length!==0)return{start:n[0],end:n.at(-1)}}function U5(t){return new Ct({editor:t.editor,isReversed:t.isReversed,contentRange:t.contentRange,hasExplicitRange:!1})}var Gd=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e,r){let n=this.scopeHandlerFactory.maybeCreate(this.modifier.scopeType,e.editor.document.languageId);if(n==null)return fD(this.modifierStageFactory,this.modifier,e,r);let i=Array.from(this.modifier.offset===0?H5(n,e,this.modifier):B5(n,e,this.modifier));if(i.length<this.modifier.length)throw new ti(this.modifier.scopeType,this.modifier.offset+this.modifier.length-1);let{isReversed:o}=e;return this.modifier.isEvery?i.flatMap(s=>s.getTargets(o)):wd(o,i[0],i[i.length-1])}};function H5(t,e,r){let{editor:n,contentRange:i}=e,{length:o,direction:s}=r,l=Ed(t,n,s==="forward"?i.start:i.end,s)?.domain;if(l==null)throw new ht(r.scopeType.type);return Rl(o,t.generateScopes(n,s==="forward"?l.start:l.end,s,{skipAncestorScopes:!0}))}function B5(t,e,r){let{editor:n,contentRange:i}=e,{length:o,direction:s,offset:l}=r,u=s==="forward"?i.end:i.start,m=i.isEmpty?"disallowed":"disallowedIfStrict";return KP(t.generateScopes(n,u,s,{containment:m,skipAncestorScopes:!0}),l-1,l+o-1)}var Kd=class{constructor(e){this.modifier=e}run(e){return e.editor.visibleRanges.map(r=>new Ke({editor:e.editor,isReversed:e.isReversed,contentRange:r}))}};function dD(t,...e){return r=>{let n=r,i=[],o=[...e].reverse();for(let s of o){if(n==null||(n=s(n),n==null))return null;i.push(n),n=n.parent??null}return i.reverse()[t]}}var Av=t=>new ge(t.row,t.column),gD=(...t)=>{let e=["(","{","[","<"],r=[")","}","]",">"],n=e.concat(r),i=(s,l)=>s!=null&&l.includes(s.type),o=s=>s!=null&&!i(s,n);return(s,l)=>{let u,{start:m,end:d}=l;if(i(s.parent,t))return i(s,e)?u=s.nextNamedSibling:i(s,r)?u=s.previousNamedSibling:s.type===","?u=d.isBeforeOrEqual(Av(s.startPosition))?s.previousNamedSibling:s.nextNamedSibling:u=s,o(u)?u:null;if(i(s,t)){let g=[...s.children],y=g.find(({startPosition:w})=>Av(w).isAfterOrEqual(d))??null;if(o(y))return y;g.reverse();let T=g.find(({endPosition:w})=>Av(w).isBeforeOrEqual(m))??null;if(o(T))return T}return null}};function Ot(...t){let e=V5(t);return r=>{for(let n of e){let i=W5(r,n);if(i!=null)return i}return null}}function V5(t){return t.map(e=>e.split(".").map(r=>new Pv(r)))}function W5(t,e){let r=$5(t,e);!r&&e.length>1&&(r=j5(t,e));let n=null,i;return r!=null&&([n,i]=r),n!=null&&i!=null&&i.fields!=null&&i.fields.forEach(o=>{n=(o.isIndex?n?.namedChild(o.value):n?.childForFieldName(o.value))??null}),n}function $5(t,e){let r=null,n=t;for(let i=e.length-1;i>-1;--i){let o=e[i];if(n==null||!o.typeEquals(n)){if(o.isOptional)continue;return null}(!r||!r[1].isImportant)&&(r=[n,o]),n=n.parent}return r}function j5(t,e){let r=null,n=t;for(let i=0;i<e.length;++i){let o=e[i];if(n==null||!o.typeEquals(n)){if(o.isOptional)continue;return null}if((!r||o.isImportant)&&(r=[n,o]),i+1<e.length){let s=n.namedChildren.filter(l=>e[i+1].typeEquals(l));n=s.length===1?s[0]:null}}return r}var Pv=class{constructor(e){this.anyType=!1;this.notType=!1;this.type=e.match(/^[\w*~]+/)[0],this.type==="*"?this.anyType=!0:this.type.startsWith("~")&&(this.type=this.type.slice(1),this.notType=!0),this.isImportant=e.indexOf("!")>-1,this.isOptional=e.indexOf("?")>-1,this.fields=[...e.matchAll(/(?<=\[).+?(?=\])/g)].map(r=>r[0]).map(r=>/\d+/.test(r)?{isIndex:!0,value:Number(r)}:{isIndex:!1,value:r})}typeEquals(e){return this.anyType?!0:this.notType?this.type!==e.type:this.type===e.type}};function Qt(t,e=ca){return function(r,n){let i=t(n,r.selection);return i!=null?[{node:i,selection:e(r.editor,i)}]:null}}function Qd(t,e=0,r=ca){return Qt(dD(e,...t),r)}function ni(...t){return Qt(Ot(...t))}function hD(...t){return Qt(gD(...t),DM())}function rc(t,e=[]){return Qt(Ot(...t),FM(...e))}function Yd(t,e=[]){return Qt(Ot(...t),LM(...e))}function Ln(...t){return(e,r)=>{for(let n of t){let i=n(e,r);if(i!=null)return i}return null}}function yD(t){return(e,r)=>{throw new Error(`Node type '${t}' not supported`)}}function Zd(t){return Object.freeze(Object.fromEntries(Ri(t).map(e=>{let r=t[e];return Array.isArray(r)?[e,ni(...r)]:typeof r=="string"?[e,ni(r)]:[e,r]})))}var xD=["command","displayed_equation","generic_command","inline_formula","math_set","block_comment","package_include","class_include","latex_include","biblatex_include","bibtex_include","graphics_include","svg_include","inkscape_include","verbatim_include","import_include","caption","citation","label_definition","label_reference","label_reference_range","label_number","new_command_definition","old_command_definition","let_command_definition","environment_definition","glossary_entry_definition","glossary_entry_reference","acronym_definition","acronym_reference","theorem_definition","color_definition","color_set_definition","color_reference","tikz_library_import"],z5=["curly_group","curly_group_text","curly_group_text_list","curly_group_path","curly_group_path_list","curly_group_command_name","curly_group_key_value","curly_group_glob_pattern","curly_group_impl","brack_group","brack_group_text","brack_group_argc","brack_group_key_value","mixed_group"],SD=["subparagraph","paragraph","subsubsection","subsection","section","chapter","part"],TD=SD.map(t=>`${t}[text]`),q5=SD.map(t=>`${t}[command]`);function Mv(t,e){return{selection:new De(t.document.positionAt(e.startIndex+1),t.document.positionAt(e.endIndex-1)),context:{removalRange:new De(t.document.positionAt(e.startIndex),t.document.positionAt(e.endIndex))}}}function G5(t,e){let r=e.startIndex,n=e.endIndex,i=e.nextNamedSibling;return i!=null&&i.isNamed&&(n=i.endIndex),{selection:new De(t.document.positionAt(r),t.document.positionAt(n)),context:{}}}var K5={argumentOrParameter:Ln(Qd([Ot(...xD),Ot(...z5)],1,Mv),Qt(Ot("begin[name]","end[name]",...TD),Mv)),functionCall:Ln(Qt(Ot(...xD,"begin","end")),Qt(Ot(...q5),G5)),name:Ln(Qt(Ot(...TD),Mv),ni("begin[name][text]","end[name][text]"))},vD=Zd(K5);function Dv(){let t=pd(["else_clause"],[],{includeUnnamedChildren:!0});return function(e,r){let n=t(e,r),i=r.parent;if(i?.type!=="else_clause"){let s=r.childForFieldName("alternative");if(s==null)return n;let{selection:l}=n;return{selection:l,context:{removalRange:new De(l.start,$S(s.namedChild(0).startPosition))}}}let{selection:o}=n;return{selection:new De($S(i.child(0).startPosition),o.end),context:{}}}}function bD(t){let e=Dv();return function(r,n){return n.namedChild(0).type===t?e(r,n.namedChild(0)):ca(r,n)}}var wD=["associated_type","attribute_item","const_item","empty_statement","enum_item","extern_crate_declaration","foreign_mod_item","impl_item","inner_attribute_item","let_declaration","macro_definition","macro_invocation","function_item","function_signature_item","mod_item","static_item","struct_item","trait_item","type_item","union_item","use_declaration","expression_statement"],Q5=["source_file","block","declaration_list"];function Y5(t){return t.parent?.type==="impl_item"&&t.parent?.childForFieldName("type")?.equals(t)?t:null}function Z5(t,e){return{selection:MM(e.children[1],e.lastNamedChild),context:{leadingDelimiterRange:Gr(e.children[0].startPosition,e.children[1].startPosition)}}}function X5(t){if(t.type!=="block")return null;let{lastNamedChild:e}=t;if(e==null)return null;if(e.type==="expression_statement"){let r=e.child(0);return r.type==="return_expression"?r.child(1):null}return wD.includes(e.type)?null:e.type==="return_expression"?e.child(1):e}var J5={statement:Qd([Ot(...Q5),Ot(...wD)],1),condition:Ln(ni("while_expression[condition]","if_expression[condition]"),Qt(Ot("while_let_expression","if_let_expression"),pd(["while","if","block"],[],{includeUnnamedChildren:!0})),rc(["*.match_pattern![condition]"],["if"])),type:Ln(rc(["let_declaration[type]","parameter[type]","field_declaration[type]","const_item[type]"],[":"]),Qt(Ot("constrained_type_parameter[bounds]","where_predicate[bounds]"),Z5),rc(["function_item[return_type]"],["->"]),Qt(Y5),ni("struct_item","trait_item","impl_item","array_type[element]")),argumentOrParameter:hD("arguments","parameters","meta_arguments","type_parameters","ordered_field_declaration_list"),collectionKey:Ln(Yd(["field_initializer[name]","field_pattern[name]"],[":"])),name:Ln(ni("let_declaration.identifier!","parameter.identifier!","function_item[name]","struct_item[name]","enum_item[name]","enum_variant[name]","trait_item[name]","const_item[name]","meta_item.identifier!","let_declaration[pattern]","constrained_type_parameter[left]","where_predicate[left]","field_declaration[name]"),Yd(["field_initializer[name]","field_pattern[name]"],[":"])),value:Ln(rc(["let_declaration[value]"],["="]),rc(["field_initializer[value]","field_pattern[pattern]"],[":"]),ni("meta_item[value]","const_item[value]"),Qt(X5)),attribute:Yd(["mutable_specifier","attribute_item"]),branch:Ln(ni("match_arm"),Qt(Ot("else_clause"),bD("if_expression")),Qt(Ot("if_expression"),Dv()))},ED=Zd(J5);function _D(t,e,r){let n=Il[t];if(n==null)throw new Pp(t);let i=n[e];return i==null?yD(e):r?eQ(i):i}var Il={latex:vD,rust:ED};function eQ(t){return(e,r)=>{let n=t(e,r);return n==null?null:(n=n.flatMap(i=>tQ(i.node,nf(e,i.selection.selection),t)),n.length>0?n:null)}}function tQ(t,e,r){let n=t.parent;for(;n!=null;){let i=n.namedChildren.flatMap(o=>r(e,o)).filter(o=>o!=null);if(i.length>0)return i;n=n.parent}return[]}var Xd=class{constructor(e,r){this.languageDefinitions=e;this.modifier=r}run(e){let r=_D(e.editor.document.languageId,this.modifier.scopeType.type,this.modifier.type==="everyScope"),n=this.languageDefinitions.getNodeAtLocation(e.editor.document,e.contentRange);if(n==null)throw new ht(this.modifier.scopeType.type);let i=rQ(n,r,{editor:e.editor,selection:new De(e.contentRange.start,e.contentRange.end)});if(i==null)throw new ht(this.modifier.scopeType.type);return i.map(o=>{let{containingListDelimiter:s,leadingDelimiterRange:l,trailingDelimiterRange:u,removalRange:m}=o.context;if(m!=null&&(l!=null||u!=null))throw Error("Removal range is mutually exclusive with leading or trailing delimiter range");let{editor:d,selection:g}=o.selection;return new go({scopeTypeType:this.modifier.scopeType.type,editor:d,isReversed:e.isReversed,contentRange:g,removalRange:m,insertionDelimiter:s,leadingDelimiterRange:l,trailingDelimiterRange:u})})}};function rQ(t,e,r){let n=t;for(;n!=null;){let i=e(r,n);if(i!=null)return i.map(o=>o.selection).map(o=>({selection:nf(r,o.selection),context:o.context}));n=n.parent}return null}var nc=class{constructor(e,r,n){this.languageDefinitions=e;this.storedTargets=r;this.scopeHandlerFactory=n;this.create=this.create.bind(this)}create(e){switch(e.type){case"startOf":return new Vd;case"endOf":return new Wd;case"extendThroughStartOf":case"extendThroughEndOf":return new Dd(this,e);case"toRawSelection":return new zd(e);case"interiorOnly":return new Fd(this,e);case"excludeInterior":return new Ld(this,e);case"leading":return new Cd(this,e);case"trailing":return new Od(this,e);case"visible":return new Kd(e);case"containingScope":return new ec(this,this.scopeHandlerFactory,e);case"preferredScope":return new $d(this,this.scopeHandlerFactory,e);case"everyScope":return e.scopeType.type==="instance"?new tc(this,this.storedTargets,e):new Rd(this,this.scopeHandlerFactory,e);case"ordinalScope":return e.scopeType.type==="instance"?new tc(this,this.storedTargets,e):new Hd(this,e);case"relativeScope":return e.scopeType.type==="instance"?new tc(this,this.storedTargets,e):new Gd(this,this.scopeHandlerFactory,e);case"keepContentFilter":return new kd(e);case"keepEmptyFilter":return new Ad(e);case"cascading":return new vd(this,e);case"modifyIfUntyped":return new bo(this,e);case"range":return new jd(this,e);case"inferPreviousMark":throw Error(`Unexpected modifier '${e.type}'; it should have been removed during inference`);default:{let r=e,{type:n}=e;throw new Error(`Unknown modifier: ${n}`)}}}getLegacyScopeStage(e){switch(e.scopeType.type){default:return new Xd(this.languageDefinitions,e)}}};async function RD(t,e,r){let n=t.registerReplaceEditList(e.document,r.filter(o=>o.isReplace)),i=await e.edit(r);return n(),i}async function Ie({rangeUpdater:t,editor:e,selections:r,preserveCursorSelections:n,...i}){let o=Ri(r),s=o.map(m=>{let d=r[m],g=nQ(d);return kD(e.document,g.selections,g.behavior)});n||s.push(kD(e.document,e.selections,1));let l=await("edits"in i?aQ(t,e,i.edits,s):AD(t,i.callback,e.document,s));return n||await e.setSelections(l.pop()),Object.fromEntries(o.map((m,d)=>[m,l[d]]))}function kD(t,e,r){return e.map(n=>iQ(t,n,n instanceof De?!n.isReversed:!0,r))}function nQ(t){return"selections"in t?t:{selections:t,behavior:1}}function iQ(t,e,r,n){return{range:e,isForward:r,expansionBehavior:{start:{type:n===1||n===3?"closed":"open"},end:{type:n===1||n===2?"closed":"open"}},offsets:{start:t.offsetAt(e.start),end:t.offsetAt(e.end)},text:t.getText(e)}}function oQ(t){return t.map(e=>e.map(({range:{start:r,end:n},isForward:i})=>i?new De(r,n):new De(n,r)))}async function AD(t,e,r,n){let i=t.registerRangeInfoList(r,nt(n));return await e(),i(),oQ(n)}async function aQ(t,e,r,n){return await AD(t,async()=>{if(!await RD(t,e,r))throw new Error("Could not apply edits")},e.document,n)}var Jd=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e){return await Ue(k(),e,"pendingModification0"),{thatSelections:nt(await at(e,async(n,i)=>{let o=i.map(({contentRange:m})=>m),s=sQ(n,o),l=k().getEditableTextEditor(n),{contentRanges:u}=await Ie({rangeUpdater:this.rangeUpdater,editor:l,edits:s,selections:{contentRanges:o}});return Pt(i,u).map(([m,d])=>({editor:m.editor,selection:d.toSelection(m.isReversed)}))}))}}};function sQ(t,e){let{document:r}=t,n=[];for(let i of e){let o=i.start,s=r.lineAt(o),l=s.text.slice(0,s.rangeTrimmed?.start?.character??s.range.start.character),u=s.text.slice(0,o.character).search(/\s+$/),m=u>-1?new Y(new ge(s.lineNumber,u),o):o.toEmptyRange();n.push({range:m,text:`
`+l,isReplace:!m.isEmpty})}return n}function eg(t){return t.length<2?t:mP(t).flatMap(([e,r])=>{if(r.length<2)return r;let n=[...r];n.sort((o,s)=>o.contentRange.start.compareTo(s.contentRange.start));let i=!0;for(;i;)[n,i]=cQ(n);return n})}function cQ(t){if(t.length<2)return[t,!1];let e=[],r=[];return t.forEach(n=>{r.length&&!lQ(r[r.length-1],n)?(e.push(PD(r)),r=[n]):r.push(n)}),e.push(PD(r)),[e,e.length!==t.length]}function PD(t){if(t.length===1)return t[0];let e=t[0],r=t[t.length-1];return wo(e,r)}function lQ(t,e){return!!t.getRemovalRange().intersection(e.getRemovalRange())}var Cl=class{constructor(e,r){this.rangeUpdater=e;this.type=r}async decorateTargets(e,r){await Promise.all([Ue(k(),e,this.decoration.sourceStyle,this.decoration.getSourceRangeCallback),Ue(k(),r,this.decoration.destinationStyle)])}getEditsBringMove(e,r){let n=[],i=[],o=e.length!==r.length&&r.length===1;return e.forEach((s,l)=>{let u=r[l];if((s==null||u==null)&&!o)throw new Error("Targets must have same number of args");if(u!=null){let m;o?m=e.map((d,g)=>{let y=d.contentText,T=(u.isRaw?null:u.insertionDelimiter)??(d.isRaw?null:d.insertionDelimiter);return g>0&&T!=null?T+y:y}).join(""):m=s.contentText,i.push({edit:u.constructChangeEdit(m),editor:u.editor,originalTarget:u.target,isSource:!1})}else u=r[0];n.includes(s)||(n.push(s),this.type==="bring"&&i.push({edit:s.toDestination("to").constructChangeEdit(u.target.contentText),editor:s.editor,originalTarget:s,isSource:!0}))}),this.type==="move"&&eg(n).forEach(s=>{i.push({edit:s.constructRemovalEdit(),editor:s.editor,originalTarget:s,isSource:!0})}),i}async performEditsAndComputeThatMark(e){return nt(await Mi(e,r=>r.editor,async(r,n)=>{let i=this.type!=="bring"?n:n.filter(({isSource:T})=>!T),o=this.type==="swap"?[]:n.filter(({isSource:T})=>T),s=this.type==="swap"?n:n.filter(({isSource:T})=>!T),l=o.map(({edit:T})=>T.range),u=s.map(({edit:T})=>T.range),m=k().getEditableTextEditor(r),{sourceEditRanges:d,destinationEditRanges:g}=await Ie({rangeUpdater:this.rangeUpdater,editor:m,edits:i.map(({edit:T})=>T),selections:{sourceEditRanges:l,destinationEditRanges:{selections:u,behavior:0}}}),y=[...this.getMarks(o,d),...this.getMarks(s,g)];return y.sort((T,w)=>n.findIndex(E=>E.originalTarget===T.target)-n.findIndex(E=>E.originalTarget===w.target)),y}))}getMarks(e,r){return e.map((n,i)=>{let o=r[i],s=n.edit.updateRange(o),l=n.originalTarget;return{editor:n.editor,selection:s.toSelection(l.isReversed),isSource:n.isSource,target:l}})}async decorateThatMark(e){let r=n=>fn(n,e.find(i=>i.target===n).selection);return Promise.all([Ue(k(),e.filter(({isSource:n})=>n).map(({target:n})=>n),this.decoration.sourceStyle,r),Ue(k(),e.filter(({isSource:n})=>!n).map(({target:n})=>n),this.decoration.destinationStyle,r)])}calculateMarksBringMove(e){return{thatMark:e.filter(({isSource:r})=>!r),sourceMark:e.filter(({isSource:r})=>r)}}};function MD(t,e){return t.length===1?Array(e.length).fill(t[0]):t}var tg=class extends Cl{constructor(r){super(r,"bring");this.decoration={sourceStyle:"referenced",destinationStyle:"pendingModification0"};this.run=this.run.bind(this)}async run(r,n){r=MD(r,n),await this.decorateTargets(r,n.map(u=>u.target));let i=this.getEditsBringMove(r,n),o=await this.performEditsAndComputeThatMark(i),{thatMark:s,sourceMark:l}=this.calculateMarksBringMove(o);return await this.decorateThatMark(s),{thatSelections:s,sourceSelections:l}}},rg=class extends Cl{constructor(r){super(r,"move");this.decoration={sourceStyle:"pendingDelete",destinationStyle:"pendingModification0",getSourceRangeCallback:uQ};this.run=this.run.bind(this)}async run(r,n){r=MD(r,n),await this.decorateTargets(r,n.map(u=>u.target));let i=this.getEditsBringMove(r,n),o=await this.performEditsAndComputeThatMark(i),{thatMark:s,sourceMark:l}=this.calculateMarksBringMove(o);return await this.decorateThatMark(s),{thatSelections:s,sourceSelections:l}}},ng=class extends Cl{constructor(r){super(r,"swap");this.decoration={sourceStyle:"pendingModification1",destinationStyle:"pendingModification0"};this.run=this.run.bind(this)}async run(r,n){await this.decorateTargets(r,n);let i=this.getEditsSwap(r,n),o=await this.performEditsAndComputeThatMark(i);return await this.decorateThatMark(o),{thatSelections:o,sourceSelections:[]}}getEditsSwap(r,n){let i=[];return r.forEach((o,s)=>{let l=n[s];if(o==null||l==null)throw new Error("Targets must have same number of args");i.push({edit:l.toDestination("to").constructChangeEdit(o.contentText),editor:l.editor,originalTarget:l,isSource:!1}),i.push({edit:o.toDestination("to").constructChangeEdit(l.contentText),editor:o.editor,originalTarget:o,isSource:!0})}),i}};function uQ(t){return t.getRemovalHighlightRange()}var Ol=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e,r){Ar(e);let{returnValue:n}=await this.actions.getText.run(e,{showDecorations:!1}),{thatSelections:i}=await this.actions.wrapWithPairedDelimiter.run(r,n[0]+"(",")");return{thatSelections:i}}};var Nl=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){let r=_t(e),n=e.map(o=>new Ke({editor:o.editor,isReversed:o.isReversed,contentRange:o.contentRange})),{thatTargets:i}=await this.actions.remove.run(n);return i!=null&&await k().getEditableTextEditor(r).setSelections(i.map(({contentSelection:o})=>o),{focusEditor:!0}),{thatTargets:i}}};var ic=t=>new Ct({editor:t.editor,isReversed:t.selection.isReversed,contentRange:t.selection,hasExplicitRange:!0});var oc=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e,r){r.showDecorations&&await Ue(k(),e,"referenced"),r.ensureSingleEditor&&_t(e),r.ensureSingleTarget&&Ar(e);let n=k().activeEditableTextEditor,i=r.setSelection?pP:at,o=nt(await i(e,(s,l)=>this.runForEditor(r,s,l)));return r.setSelection&&r.restoreSelection&&n!=null&&!n.isActive&&await n.focus(),{thatTargets:o}}async runForEditor(e,r,n){let i=k().getEditableTextEditor(r),o=r.selections,s=r.document.version,l=n.map(d=>d.contentSelection);e.setSelection&&await i.setSelections(l,{focusEditor:!0,revealRange:!1});let{originalSelections:u,targetSelections:m}=await Ie({rangeUpdater:this.rangeUpdater,editor:i,callback:()=>e.callback(i,n),preserveCursorSelections:!0,selections:{originalSelections:o,targetSelections:l}});return e.setSelection&&e.restoreSelection&&await i.setSelections(u),r.document.version===s?n:m.map(d=>ic({editor:r,selection:d}))}};var Rt=class{constructor(e){this.ensureSingleEditor=!1;this.ensureSingleTarget=!1;this.restoreSelection=!0;this.showDecorations=!0;this.callbackAction=new oc(e),this.run=this.run.bind(this)}async run(e,{showDecorations:r}={}){let n=k().capabilities.commands[this.command];if(n==null)throw Error(`Action ${this.command} is not supported by your ide`);let{acceptsLocation:i}=n;return this.callbackAction.run(e,{callback:(o,s)=>pQ(o,i?s.map(l=>l.contentRange):void 0,this.command),setSelection:!i,ensureSingleEditor:this.ensureSingleEditor,ensureSingleTarget:this.ensureSingleTarget,restoreSelection:this.restoreSelection,showDecorations:r??this.showDecorations})}},ig=class extends Rt{constructor(){super(...arguments);this.command="clipboardCopy";this.ensureSingleEditor=!0}},og=class extends Rt{constructor(){super(...arguments);this.command="toggleLineComment"}},ag=class extends Rt{constructor(){super(...arguments);this.command="indentLine"}},sg=class extends Rt{constructor(){super(...arguments);this.command="outdentLine"}},cg=class extends Rt{constructor(){super(...arguments);this.command="fold"}},lg=class extends Rt{constructor(){super(...arguments);this.command="unfold"}},ug=class extends Rt{constructor(){super(...arguments);this.command="rename";this.ensureSingleTarget=!0}},pg=class extends Rt{constructor(){super(...arguments);this.command="showReferences";this.ensureSingleTarget=!0}},mg=class extends Rt{constructor(){super(...arguments);this.command="quickFix";this.ensureSingleTarget=!0}},fg=class extends Rt{constructor(){super(...arguments);this.command="revealDefinition";this.ensureSingleTarget=!0;this.restoreSelection=!1}},dg=class extends Rt{constructor(){super(...arguments);this.command="revealTypeDefinition";this.ensureSingleTarget=!0;this.restoreSelection=!1}},gg=class extends Rt{constructor(){super(...arguments);this.command="showHover";this.ensureSingleTarget=!0;this.restoreSelection=!1}},hg=class extends Rt{constructor(){super(...arguments);this.command="showDebugHover";this.ensureSingleTarget=!0;this.restoreSelection=!1}},yg=class extends Rt{constructor(){super(...arguments);this.command="extractVariable";this.ensureSingleTarget=!0;this.restoreSelection=!1}},xg=class extends Rt{constructor(){super(...arguments);this.command="gitAccept";this.ensureSingleTarget=!0}},Tg=class extends Rt{constructor(){super(...arguments);this.command="gitRevert";this.ensureSingleTarget=!0}},Sg=class extends Rt{constructor(){super(...arguments);this.command="gitStage";this.ensureSingleTarget=!0}},vg=class extends Rt{constructor(){super(...arguments);this.command="gitUnstage";this.ensureSingleTarget=!0}};function pQ(t,e,r){switch(r){case"toggleLineComment":return t.toggleLineComment(e);case"indentLine":return t.indentLine(e);case"outdentLine":return t.outdentLine(e);case"clipboardCopy":return t.clipboardCopy(e);case"fold":return t.fold(e);case"unfold":return t.unfold(e);case"insertLineAfter":return t.insertLineAfter(e);case"rename":return t.rename(e?.[0]);case"showReferences":return t.showReferences(e?.[0]);case"quickFix":return t.quickFix(e?.[0]);case"revealDefinition":return t.revealDefinition(e?.[0]);case"revealTypeDefinition":return t.revealTypeDefinition(e?.[0]);case"showHover":return t.showHover(e?.[0]);case"showDebugHover":return t.showDebugHover(e?.[0]);case"extractVariable":return t.extractVariable(e?.[0]);case"gitAccept":return t.gitAccept(e?.[0]);case"gitRevert":return t.gitRevert(e?.[0]);case"gitStage":return t.gitStage(e?.[0]);case"gitUnstage":return t.gitUnstage(e?.[0]);case"highlight":throw Error("Highlight command not supported as simple action")}}var bg=class{constructor(e,r){this.actions=e;this.rangeUpdater=r;this.run=this.run.bind(this)}async run(e,r={showDecorations:!0}){if(k().capabilities.commands.clipboardCopy!=null)return new ig(this.rangeUpdater).run(e,r);r.showDecorations&&await Ue(k(),e,"referenced");let n=e.map(i=>i.contentText).join(`
`);return await k().clipboard.writeText(n),{thatTargets:e}}};var wg=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){await k().flashRanges(e.flatMap(mQ));let r={showDecorations:!1};await this.actions.copyToClipboard.run(e,r);let{thatTargets:n}=await this.actions.remove.run(e,r);return{thatTargets:n}}};function mQ(t){let{editor:e,contentRange:r}=t,n=t.getRemovalHighlightRange(),i=[{editor:e,range:dr(r),style:"referenced"}];return n.type==="line"?i.push({editor:e,range:n,style:"pendingDelete"}):i.push(...fQ(r,n).map(o=>({editor:e,range:dr(o),style:"pendingDelete"}))),i}function fQ(t,e){let{start:r,end:n}=t,{start:i,end:o}=e,s=[];return i.isBefore(r)&&s.push(new Y(i,r)),o.isAfter(n)&&s.push(new Y(n,o)),s}var Ul=class{constructor(){this.run=this.run.bind(this)}async run(e){return await at(e,async(r,n)=>{let i=r.selections.filter(o=>!n.some(s=>{let l=s.contentRange.intersection(o);return l&&(!l.isEmpty||o.isEmpty)}));if(i.length===0)throw new Fv;await k().getEditableTextEditor(r).setSelections(i)}),{thatTargets:e}}},Fv=class extends Error{constructor(){super("Can't deselect every selection. At least one is required"),this.name="SelectionRequiredError"}};async function DD(t,e,r,n){let i=r.destinations.map((w,E)=>{if(n||r.actionTypes[E]==="edit")return{destination:w,index:E}}).filter(w=>!!w);if(i.length===0)return r;let o=i.map(w=>w.destination.constructChangeEdit("")),s=r.cursorRanges.map((w,E)=>({range:w,index:E})).filter(({range:w})=>w!=null),l=s.map(({index:w})=>w),u=s.map(({range:w})=>w),m=o.map(w=>w.range),{thatRanges:d,cursorRanges:g,editRanges:y}=await Ie({rangeUpdater:t,editor:e,edits:o,preserveCursorSelections:!0,selections:{thatRanges:r.thatRanges,cursorRanges:u,editRanges:{selections:m,behavior:0}}}),T=[...r.cursorRanges];return Pt(l,g).forEach(([w,E])=>{T[w]=E}),i.forEach((w,E)=>{let V=o[E].updateRange(y[E]);T[w.index]=V}),{destinations:r.destinations,actionTypes:r.actionTypes,thatRanges:d,cursorRanges:T}}async function FD({acceptsLocation:t},e,r,n){let i=n.destinations.map((g,y)=>{if(n.actionTypes[y]==="insertLineAfter")return{destination:g,index:y}}).filter(g=>!!g);if(i.length===0)return n;let o=i.map(({destination:g})=>g.contentRange),s=n.destinations.map(({contentRange:g})=>g),l=async()=>{t?await r.insertLineAfter(o):(await r.setSelections(o.map(g=>g.toSelection(!1))),await r.focus(),await r.insertLineAfter())},{targetRanges:u,thatRanges:m}=await Ie({rangeUpdater:e,editor:r,callback:l,preserveCursorSelections:!0,selections:{targetRanges:s,thatRanges:n.thatRanges}}),d=[...n.cursorRanges];return i.forEach((g,y)=>{d[g.index]=r.selections[y]}),{destinations:n.destinations.map((g,y)=>g.withTarget(g.target.withContentRange(u[y]))),actionTypes:n.actionTypes,thatRanges:m,cursorRanges:d}}async function LD(t,e){let r=Ar(e),n=k().getEditableTextEditor(r.editor),i=r.insertionMode==="before";if(r.insertionMode==="to")throw Error(`Unsupported insertion mode '${r.insertionMode}' for notebookcapell`);return await t.setSelection.run([r.target]),i?await n.editNewNotebookCellAbove():await n.editNewNotebookCellBelow(),{thatSelections:mn([r.target.thatTarget])}}var Eg=class{constructor(e,r){this.rangeUpdater=e;this.actions=r;this.run=this.run.bind(this)}async run(e){if(e.some(({target:l})=>l.isNotebookCell))return LD(this.actions,e);let r=k().getEditableTextEditor(_t(e)),n={destinations:e,actionTypes:e.map(l=>l.getEditNewActionType()),thatRanges:e.map(({target:l})=>l.thatTarget.contentRange),cursorRanges:new Array(e.length).fill(void 0)},i=k().capabilities.commands.insertLineAfter,o=i!=null;o&&(n=await FD(i,this.rangeUpdater,r,n)),n=await DD(this.rangeUpdater,r,n,!o);let s=n.destinations.map((l,u)=>{let m=n.cursorRanges[u];if(m==null)throw Error("Cursor range is undefined for destination");return m.toSelection(l.target.isReversed)});return await r.setSelections(s,{focusEditor:!0}),{thatSelections:mn(n.destinations.map(l=>l.target),n.thatRanges)}}};var _g=class{constructor(e,r){this.actions=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(ri)]}run(e){return this.actions.editNew.run(e.map(r=>r.toDestination(this.insertionMode)))}},Rg=class extends _g{constructor(){super(...arguments);this.insertionMode="before"}},kg=class extends _g{constructor(){super(...arguments);this.insertionMode="after"}};var Hl=class{constructor(e){this.callbackAction=new oc(e),this.run=this.run.bind(this)}async run(e,r,{commandArgs:n,ensureSingleEditor:i,ensureSingleTarget:o,restoreSelection:s,showDecorations:l}={}){let u=n??[];return this.callbackAction.run(e,{callback:()=>k().executeCommand(r,...u),setSelection:!0,ensureSingleEditor:i??!1,ensureSingleTarget:o??!1,restoreSelection:s??!0,showDecorations:l??!0})}};var Ag=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){Ar(e);let{returnValue:r,thatTargets:n}=await this.actions.getText.run(e),[i]=r,o;return i.length>200?(o=i.substring(0,200),Yo(k().messages,"truncatedSearchText","Search text is longer than 200 characters; truncating")):o=i,await this.find(o),{thatTargets:n}}},Pg=class extends Ag{find(e){return k().findInDocument(e)}},Mg=class extends Ag{find(e){return k().findInWorkspace(e)}};var Dg=class{constructor(){this.run=this.run.bind(this)}async run(e){return await Ue(k(),e,"referenced"),{thatTargets:e}}};var ac=class{constructor(e){this.options=e;this.run=this.run.bind(this)}async run(e){let r=Ar(e);return await Ue(k(),e,"referenced"),await k().getEditableTextEditor(r.editor).openLink(r.contentRange,this.options),{thatSelections:mn(e)}}};function ID(t){let e=t.split(/^---$/m),r={snippets:[]};for(let n of e){let i=n.match(/^-$/m),o=i!=null?n.slice(0,i.index):n,s=i!=null?n.slice(i.index+i[0].length):null,l=s?yQ(s):null,u=dQ(o);if(l!=null){u==null&&(u={variables:[]});let{variables:m,...d}=u;r.snippets.push({...d,body:l,variables:m})}else if(u!=null){if(r.header!=null||r.snippets.length!==0)throw Error("Header snippet must be first in file");r.header=u}}return r}function dQ(t){let e={variables:[]},r=gQ(t);if(Object.keys(r).length===0)return;let n={};for(let[i,o]of Object.entries(r))switch(i){case"name":e.name=o;break;case"description":e.description=o;break;case"phrase":e.phrases=Bl(o);break;case"insertionScope":e.insertionScopes=Bl(o);break;case"language":e.languages=Bl(o);break;default:if(!i.startsWith("$"))throw Error(`Invalid key '${i}'`);n[i]=o}return e.variables=hQ(n),e}function gQ(t){let e=t.split(/\r?\n/).map(n=>n.trim()).filter(Boolean),r={};for(let n of e){let i=n.split(":");if(i.length!==2)throw Error(`Invalid line '${n}'`);let o=i[0].trim(),s=i[1].trim();if(o.length===0||s.length===0)throw Error(`Invalid line '${n}'`);if(r[o]!=null)throw Error(`Duplicate key '${o}' in '${t}'`);r[o]=s}return r}function hQ(t){let e={},r=n=>(e[n]==null&&(e[n]={name:n}),e[n]);for(let[n,i]of Object.entries(t)){let o=n.split(".");if(o.length!==2)throw Error(`Invalid variable key '${n}'`);let s=o[0].slice(1);switch(o[1]){case"insertionFormatter":r(s).insertionFormatters=Bl(i);break;case"wrapperPhrase":r(s).wrapperPhrases=Bl(i);break;case"wrapperScope":r(s).wrapperScope=i;break;default:throw Error(`Invalid variable key '${n}'`)}}return Object.values(e)}function yQ(t){let e=t.match(/^[ \t]*\S/m);if(e?.index!=null)return t.slice(e.index).trimEnd().split(/\r?\n/).map(r=>r.trimEnd())}function Bl(t){return t.split("|").map(e=>e.trim())}function OD(t){let e=[];t.header!=null&&e.push(CD(t.header)),e.push(...t.snippets.map(CD));let r=e.filter(Boolean).join(`
---

`);return r?r+`
---
`:""}function CD(t){let e=[Eo("name",t.name),Eo("description",t.description),Eo("language",t.languages),Eo("phrase",t.phrases),Eo("insertionScope",t.insertionScopes)].filter(Boolean);return t.variables.length>0&&(e.length>0&&e.push(""),e.push(...xQ(t.variables))),"body"in t&&e.push("-",...t.body),e.join(`
`)}function xQ(t){let e=[...t];return e.sort(TQ),e.flatMap(r=>[Eo(`$${r.name}.insertionFormatter`,r.insertionFormatters),Eo(`$${r.name}.wrapperPhrase`,r.wrapperPhrases),Eo(`$${r.name}.wrapperScope`,r.wrapperScope)]).filter(Boolean)}function Eo(t,e){return e==null?"":Array.isArray(e)?`${t}: ${e.join(" | ")}`:`${t}: ${e}`}function TQ(t,e){return t.name==="0"?1:e.name==="0"?-1:t.name.localeCompare(e.name)}function ND(t,e){let r=[],n=0,i=null,[o,...s]=t.split(/\r?\n/);return[{text:e+o,startIndex:e.length},...s.map(u=>({text:u,startIndex:0}))].forEach(({text:u,startIndex:m})=>{let d=u.match(/^\s*/)?.[0]??"",g=d.length;i!=null&&(d.length>i.length?n++:d.length<i.length&&n--),i=d;let y=Math.max(g,m),T=dT("	",n),w=u.slice(y);r.push(T+w)}),r}function UD(t,e){let r=hT(e,o=>o.offsets.start),n="",i=0;for(let o of r)n+=t.slice(i,o.offsets.start)+o.text,i=o.offsets.end;return n+=t.slice(i),n}var sc=class{constructor(e){this.snippets=e;this.run=this.run.bind(this)}async run(e,r,n){if(r==null)throw new Error("Directory argument is required for GenerateSnippet action. Please update Cursorless Talon");let i=Ar(e),o=i.editor;if(Ue(k(),e,"referenced"),n==null&&(n=await k().showInputBox({prompt:"Name of snippet",placeHolder:"helloWorld"}),!n))return{};let s=o.document.offsetAt(i.contentRange.start),l=vQ(o,i.contentRange),u=l.map((ce,fe)=>({offsets:{start:o.document.offsetAt(ce.start)-s,end:o.document.offsetAt(ce.end)-s},name:fe===l.length-1?"0":`${fe+1}`})),m=o.document.getText(new Y(i.contentRange.start.with(void 0,0),i.contentRange.start)),d=o.document.getText(i.contentRange),g=UD(d,[...ln(d,/\$|\\/g,ce=>({offsets:{start:ce.index,end:ce.index+ce[0].length},text:`\\${ce[0]}`})),...u.map(({offsets:ce,name:fe})=>({offsets:ce,text:`$${fe}`}))]),y=ND(g,m),T,w={snippets:[]};k().runMode==="test"?T=k().getEditableTextEditor(o):(T=k().getEditableTextEditor(await this.snippets.openNewSnippetFile(n,r)),w=ID(T.document.getText())),await T.setSelections([T.document.range.toSelection(!1)]);let E=1,{header:U}=w,V=w.header?.phrases!=null?void 0:[`${Lv}${E++}`],z=ce=>{let fe=U?.variables?.some(ct=>ct.name===ce.name&&ct.wrapperPhrases!=null);return{name:ce.name,wrapperPhrases:fe?void 0:[`${Lv}${E++}`]}},ne={name:U?.name===n?void 0:n,phrases:V,languages:SQ(o,U),body:y,variables:u.map(z)};w.snippets.push(ne);let se=OD(w).replace(/\$/g,"\\$").replaceAll(Lv,"$");return await T.insertSnippet(se),{thatSelections:e.map(({editor:ce,contentSelection:fe})=>({editor:ce,selection:fe}))}}};function SQ(t,e){if(!e?.languages?.includes(t.document.languageId))return[t.document.languageId]}function vQ(t,e){let r=t.selections.filter(n=>e.contains(n));return r.sort((n,i)=>n.start.compareTo(i.start)),r}var Lv="PLACEHOLDER_VFA77zcbLD6wXNmfMAay";var Vl=class{constructor(){this.run=this.run.bind(this)}async run(e){return{returnValue:e.map(({contentRange:r})=>({contentRange:r})),thatTargets:e}}};var Wl=class{constructor(){this.run=this.run.bind(this)}async run(e,{showDecorations:r=!0,ensureSingleTarget:n=!1}={}){return r&&await Ue(k(),e,"referenced"),n&&Ar(e),{returnValue:e.map(i=>i.contentText),thatTargets:e}}};var $l=class{constructor(){this.run=this.run.bind(this)}async run(e,r){if(k().capabilities.commands.highlight==null)throw Error("The highlight action is not supported by your ide");return e.length===0?await Promise.all(k().visibleTextEditors.map(n=>k().setHighlightRanges(r,n,[]))):await at(e,(n,i)=>k().setHighlightRanges(r,n,i.map(o=>fn(o,o.contentRange)))),{thatTargets:e}}};var Fg=class{constructor(e,r){this.rangeUpdater=e;this.isIndent=r;this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e){return this.hasCapability()?this.runSimpleCommandAction(e):(await Ue(k(),e,"pendingModification0"),{thatTargets:nt(await at(e,this.runForEditor))})}hasCapability(){return this.isIndent?k().capabilities.commands.indentLine!=null:k().capabilities.commands.outdentLine!=null}runSimpleCommandAction(e){return(this.isIndent?new ag(this.rangeUpdater):new sg(this.rangeUpdater)).run(e)}async runForEditor(e,r){let n=this.isIndent?bQ(e,r):wQ(e,r),{targetSelections:i}=await Ie({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(e),edits:n,selections:{targetSelections:r.map(({contentSelection:o})=>o)}});return Pt(r,i).map(([o,s])=>ic({editor:e,selection:s.toSelection(o.isReversed)}))}},Lg=class extends Fg{constructor(e){super(e,!0)}},Ig=class extends Fg{constructor(e){super(e,!1)}};function bQ(t,e){let{document:r}=t,n=HD(e),i=EQ(t);return n.map(o=>({range:r.lineAt(o).range.start.toEmptyRange(),text:i}))}function wQ(t,e){let{document:r}=t,n=HD(e),i=_Q(t);return n.map(o=>{let s=r.lineAt(o),l=s.text.match(i),{start:u}=s.range,m=u.translate(void 0,l?.[0].length);return{range:new Y(u,m),text:""}})}function HD(t){let e=new Set;for(let r of t){let{start:n,end:i}=r.contentRange;for(let o=n.line;o<=i.line;++o)e.add(o)}return[...e]}function EQ(t){if(t.options.insertSpaces){let e=BD(t);return" ".repeat(e)}return"	"}function _Q(t){if(t.options.insertSpaces){let e=BD(t);return new RegExp(`^[ ]{1,${e}}`)}return/^\t/}function BD(t){return typeof t.options.tabSize=="number"?t.options.tabSize:4}var Cg=class{constructor(e,r,n){this.rangeUpdater=e;this.modifierStageFactory=r;this.isBefore=n;this.getFinalStages=()=>[this.modifierStageFactory.create(ri)];this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e){let r=nt(await at(e,this.runForEditor));return await k().flashRanges(r.flatMap(n=>n.thatMark.map(i=>({editor:i.editor,range:dr(i.selection),style:"justAdded"})))),{sourceSelections:r.flatMap(({sourceMark:n})=>n),thatSelections:r.flatMap(({thatMark:n})=>n)}}async runForEditor(e,r){let n=this.isBefore?"after":"before",i=r.flatMap(y=>y.toDestination(n).constructChangeEdit(y.contentText)),o=r.map(({contentSelection:y})=>y),s=i.map(({range:y})=>y),l=k().getEditableTextEditor(e),{contentSelections:u,editRanges:m}=await Ie({rangeUpdater:this.rangeUpdater,editor:l,edits:i,selections:{contentSelections:o,editRanges:{selections:s,behavior:0}}}),d=Pt(i,m).map(([y,T])=>y.updateRange(T)),g=e.selections[0];return u.some(y=>y.intersection(g)!=null)&&await l.revealRange(g),{sourceMark:mn(r,d),thatMark:mn(r,u)}}},Og=class extends Cg{constructor(e,r){super(e,r,!0)}},Ng=class extends Cg{constructor(e,r){super(e,r,!1)}};var jl=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(ri)]}async run(e){let r=await at(e,async(i,o)=>{let s=this.getEdits(o),l=o.map(d=>d.thatTarget.contentSelection),{contentSelections:u,editRanges:m}=await Ie({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(i),edits:s,selections:{contentSelections:l,editRanges:{selections:s.map(d=>d.range),behavior:0}}});return{thatMark:u.map(d=>({editor:i,selection:d})),flashRanges:ta(s,m).map(([d,g])=>({editor:i,range:d.isLine?d.updateRange(g):g,isLine:d.isLine}))}});return await k().flashRanges(r.flatMap(i=>i.flashRanges.map(({editor:o,range:s,isLine:l})=>({editor:o,range:l?$r(s):dr(s),style:"justAdded"})))),{thatSelections:r.flatMap(i=>i.thatMark)}}},Ug=class extends jl{constructor(e,r){super(e,r)}getEdits(e){return e.flatMap(r=>[Vg(r,"before"),Vg(r,"after")])}},Hg=class extends jl{constructor(e,r){super(e,r)}getEdits(e){return e.map(r=>Vg(r,"before"))}},Bg=class extends jl{constructor(e,r){super(e,r)}getEdits(e){return e.map(r=>Vg(r,"after"))}};function Vg(t,e){return{...t.toDestination(e).constructChangeEdit("",!0),isLine:t.textualType==="line"}}function WD(t,e){return RQ(VD(t),VD(e))}function VD(t){if(t.languages!=null)return{langIds:t.languages}}function RQ(t,e){if(t==null&&e==null)return 0;if(t==null)return-1;if(e==null)return 1;if(t.langIds==null&&e.langIds!=null)return-1;if(e.langIds==null&&t.langIds!=null)return 1;let r=kQ(t.scopeTypes,e.scopeTypes);return r!==0?r:t.langIds==null?0:e.langIds.length-t.langIds.length}function kQ(t,e){return t==null&&e!=null?-1:e==null&&t!=null?1:0}function cc(t,e){if(t.type==="named")throw new Error("Cursorless snippets are deprecated. Please use community snippets. Update to latest cursorless-talon and say 'cursorless migrate snippets'.");if(t.type==="custom")return t;let r=PQ(t.snippets,e);r.sort(WD);let n=r[0];if(n==null){let i=AQ(t.snippets);throw new Error(`No snippet available for language '${e}'. Available languages: ${i}`)}return n}function AQ(t){let e=new Set(t.flatMap(r=>r.languages??[]));return Array.from(e).sort().join(", ")}function PQ(t,e){return t.filter(r=>r.languages==null?!0:r.languages.includes(e))}var Iv=class t{constructor(){this.value="";this.pos=0}static{this._table={36:0,58:1,44:2,123:3,125:4,92:5,47:6,124:7,43:11,45:12,63:13}}static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return e===95||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};let e=this.pos,r=0,n=this.value.charCodeAt(e),i;if(i=t._table[n],typeof i=="number")return this.pos+=1,{type:i,pos:e,len:1};if(t.isDigitCharacter(n)){i=8;do r+=1,n=this.value.charCodeAt(e+r);while(t.isDigitCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}if(t.isVariableCharacter(n)){i=9;do n=this.value.charCodeAt(e+ ++r);while(t.isVariableCharacter(n)||t.isDigitCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}i=10;do r+=1,n=this.value.charCodeAt(e+r);while(!isNaN(n)&&typeof t._table[n]>"u"&&!t.isDigitCharacter(n)&&!t.isVariableCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}},_o=class{constructor(){this._children=[]}appendChild(e){return e instanceof Yt&&this._children[this._children.length-1]instanceof Yt?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,r){let{parent:n}=e,i=n.children.indexOf(e),o=n.children.slice(0);o.splice(i,1,...r),n._children=o,function s(l,u){for(let m of l)m.parent=u,s(m.children,m)}(r,n)}get children(){return this._children}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof jg)return e;e=e.parent}}toString(){return this.children.reduce((e,r)=>e+r.toString(),"")}len(){return 0}},Yt=class t extends _o{constructor(r){super();this.value=r}static escape(r){return r.replace(/\$|}|\\/g,"\\$&")}toString(){return this.value}toTextmateString(){return t.escape(this.value)}len(){return this.value.length}clone(){return new t(this.value)}},Wg=class extends _o{},Zt=class t extends Wg{constructor(r){super();this.index=r}static compareByIndex(r,n){return r.index===n.index?0:r.isFinalTabstop?1:n.isFinalTabstop||r.index<n.index?-1:r.index>n.index?1:0}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof $g?this._children[0]:void 0}toTextmateString(){let r="";return this.transform&&(r=this.transform.toTextmateString()),this.children.length===0&&!this.transform?`$${this.index}`:this.children.length===0?`\${${this.index}${r}}`:this.choice?`\${${this.index}|${this.choice.toTextmateString()}|${r}}`:`\${${this.index}:${this.children.map(n=>n.toTextmateString()).join("")}${r}}`}clone(){let r=new t(this.index);return this.transform&&(r.transform=this.transform.clone()),r._children=this.children.map(n=>n.clone()),r}},$g=class t extends _o{constructor(){super(...arguments);this.options=[]}appendChild(r){return r instanceof Yt&&(r.parent=this,this.options.push(r)),this}toString(){return this.options[0].value}toTextmateString(){return this.options.map(r=>r.value.replace(/\||,|\\/g,"\\$&")).join(",")}len(){return this.options[0].len()}clone(){let r=new t;return this.options.forEach(r.appendChild,r),r}},Cv=class t extends _o{constructor(){super(...arguments);this.regexp=new RegExp("")}resolve(r){let n=this,i=!1,o=r.replace(this.regexp,function(){return i=!0,n._replace(Array.prototype.slice.call(arguments,0,-2))});return!i&&this._children.some(s=>s instanceof In&&!!s.elseValue)&&(o=this._replace([])),o}_replace(r){let n="";for(let i of this._children)if(i instanceof In){let o=r[i.index]||"";o=i.resolve(o),n+=o}else n+=i.toString();return n}toString(){return""}toTextmateString(){return`/${this.regexp.source}/${this.children.map(r=>r.toTextmateString())}/${(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")}`}clone(){let r=new t;return r.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),r._children=this.children.map(n=>n.clone()),r}},In=class t extends _o{constructor(r,n,i,o){super();this.index=r;this.shorthandName=n;this.ifValue=i;this.elseValue=o}resolve(r){return this.shorthandName==="upcase"?r?r.toLocaleUpperCase():"":this.shorthandName==="downcase"?r?r.toLocaleLowerCase():"":this.shorthandName==="capitalize"?r?r[0].toLocaleUpperCase()+r.substr(1):"":this.shorthandName==="pascalcase"?r?this._toPascalCase(r):"":this.shorthandName==="camelcase"?r?this._toCamelCase(r):"":r&&typeof this.ifValue=="string"?this.ifValue:!r&&typeof this.elseValue=="string"?this.elseValue:r||""}_toPascalCase(r){let n=r.match(/[a-z0-9]+/gi);return n?n.map(i=>i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()).join(""):r}_toCamelCase(r){let n=r.match(/[a-z0-9]+/gi);return n?n.map((i,o)=>o===0?i.toLowerCase():i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()).join(""):r}toTextmateString(){let r="${";return r+=this.index,this.shorthandName?r+=`:/${this.shorthandName}`:this.ifValue&&this.elseValue?r+=`:?${this.ifValue}:${this.elseValue}`:this.ifValue?r+=`:+${this.ifValue}`:this.elseValue&&(r+=`:-${this.elseValue}`),r+="}",r}clone(){return new t(this.index,this.shorthandName,this.ifValue,this.elseValue)}},Cn=class t extends Wg{constructor(r){super();this.name=r}resolve(r){let n=r.resolve(this);return this.transform&&(n=this.transform.resolve(n||"")),n!==void 0?(this._children=[new Yt(n)],!0):!1}toTextmateString(){let r="";return this.transform&&(r=this.transform.toTextmateString()),this.children.length===0?`\${${this.name}${r}}`:`\${${this.name}:${this.children.map(n=>n.toTextmateString()).join("")}${r}}`}clone(){let r=new t(this.name);return this.transform&&(r.transform=this.transform.clone()),r._children=this.children.map(n=>n.clone()),r}};function $D(t,e){let r=[...t];for(;r.length>0;){let n=r.shift();if(!e(n))break;r.unshift(...n.children)}}var jg=class t extends _o{get placeholderInfo(){if(!this._placeholders){let e=[],r;this.walk(function(n){return n instanceof Zt&&(e.push(n),r=!r||r.index<n.index?n:r),!0}),this._placeholders={all:e,last:r}}return this._placeholders}get placeholders(){let{all:e}=this.placeholderInfo;return e}offset(e){let r=0,n=!1;return this.walk(i=>i===e?(n=!0,!1):(r+=i.len(),!0)),n?r:-1}fullLen(e){let r=0;return $D([e],n=>(r+=n.len(),!0)),r}enclosingPlaceholders(e){let r=[],{parent:n}=e;for(;n;)n instanceof Zt&&r.push(n),n=n.parent;return r}resolveVariables(e){return this.walk(r=>(r instanceof Cn&&r.resolve(e)&&(this._placeholders=void 0),!0)),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,r){return this._placeholders=void 0,super.replace(e,r)}toTextmateString(){return this.children.reduce((e,r)=>e+r.toTextmateString(),"")}clone(){let e=new t;return this._children=this.children.map(r=>r.clone()),e}walk(e){$D(this.children,e)}},oi=class{constructor(){this._scanner=new Iv;this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}text(e){return this.parse(e).toString()}parse(e,r,n){this._scanner.text(e),this._token=this._scanner.next();let i=new jg;for(;this._parse(i););let o=new Map,s=[],l=0;i.walk(u=>(u instanceof Zt&&(l+=1,u.isFinalTabstop?o.set(0,void 0):!o.has(u.index)&&u.children.length>0?o.set(u.index,u.children):s.push(u)),!0));for(let u of s){let m=o.get(u.index);if(m){let d=new Zt(u.index);d.transform=u.transform;for(let g of m)d.appendChild(g.clone());i.replace(u,[d])}}return n||(n=l>0&&r),!o.has(0)&&n&&i.appendChild(new Zt(0)),i}_accept(e,r){if(e===void 0||this._token.type===e){let n=r?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),n}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){let r=this._token;for(;this._token.type!==e;){if(this._token.type===14)return!1;if(this._token.type===5){let i=this._scanner.next();if(i.type!==0&&i.type!==4&&i.type!==5)return!1}this._token=this._scanner.next()}let n=this._scanner.value.substring(r.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),n}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let r;return(r=this._accept(5,!0))?(r=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||r,e.appendChild(new Yt(r)),!0):!1}_parseTabstopOrVariableName(e){let r,n=this._token;return this._accept(0)&&(r=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(r)?new Zt(Number(r)):new Cn(r)),!0):this._backTo(n)}_parseComplexPlaceholder(e){let r,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(r=this._accept(8,!0))))return this._backTo(n);let o=new Zt(Number(r));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new Yt("${"+r+":")),o.children.forEach(e.appendChild,e),!0}else if(o.index>0&&this._accept(7)){let s=new $g;for(;;){if(this._parseChoiceElement(s)){if(this._accept(2))continue;if(this._accept(7)&&(o.appendChild(s),this._accept(4)))return e.appendChild(o),!0}return this._backTo(n),!1}}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseChoiceElement(e){let r=this._token,n=[];for(;!(this._token.type===2||this._token.type===7);){let i;if((i=this._accept(5,!0))?i=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||i:i=this._accept(void 0,!0),!i)return this._backTo(r),!1;n.push(i)}return n.length===0?(this._backTo(r),!1):(e.appendChild(new Yt(n.join(""))),!0)}_parseComplexVariable(e){let r,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(r=this._accept(9,!0))))return this._backTo(n);let o=new Cn(r);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new Yt("${"+r+":")),o.children.forEach(e.appendChild,e),!0}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseTransform(e){let r=new Cv,n="",i="";for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(6,!0)||o,n+=o;continue}if(this._token.type!==14){n+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(5,!0)||this._accept(6,!0)||o,r.appendChild(new Yt(o));continue}if(!(this._parseFormatString(r)||this._parseAnything(r)))return!1}for(;!this._accept(4);){if(this._token.type!==14){i+=this._accept(void 0,!0);continue}return!1}try{r.regexp=new RegExp(n,i)}catch{return!1}return e.transform=r,!0}_parseFormatString(e){let r=this._token;if(!this._accept(0))return!1;let n=!1;this._accept(3)&&(n=!0);let i=this._accept(8,!0);if(i)if(n){if(this._accept(4))return e.appendChild(new In(Number(i))),!0;if(!this._accept(1))return this._backTo(r),!1}else return e.appendChild(new In(Number(i))),!0;else return this._backTo(r),!1;if(this._accept(6)){let o=this._accept(9,!0);return!o||!this._accept(4)?(this._backTo(r),!1):(e.appendChild(new In(Number(i),o)),!0)}else if(this._accept(11)){let o=this._until(4);if(o)return e.appendChild(new In(Number(i),void 0,o,void 0)),!0}else if(this._accept(12)){let o=this._until(4);if(o)return e.appendChild(new In(Number(i),void 0,void 0,o)),!0}else if(this._accept(13)){let o=this._until(1);if(o){let s=this._until(4);if(s)return e.appendChild(new In(Number(i),void 0,o,s)),!0}}else{let o=this._until(4);if(o)return e.appendChild(new In(Number(i),void 0,void 0,o)),!0}return this._backTo(r),!1}_parseAnything(e){return this._token.type!==14?(e.appendChild(new Yt(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}};var zg=Object.freeze({CURRENT_YEAR:!0,CURRENT_YEAR_SHORT:!0,CURRENT_MONTH:!0,CURRENT_DATE:!0,CURRENT_HOUR:!0,CURRENT_MINUTE:!0,CURRENT_SECOND:!0,CURRENT_DAY_NAME:!0,CURRENT_DAY_NAME_SHORT:!0,CURRENT_MONTH_NAME:!0,CURRENT_MONTH_NAME_SHORT:!0,CURRENT_SECONDS_UNIX:!0,SELECTION:!0,CLIPBOARD:!0,TM_SELECTED_TEXT:!0,TM_CURRENT_LINE:!0,TM_CURRENT_WORD:!0,TM_LINE_INDEX:!0,TM_LINE_NUMBER:!0,TM_FILENAME:!0,TM_FILENAME_BASE:!0,TM_DIRECTORY:!0,TM_FILEPATH:!0,RELATIVE_FILEPATH:!0,BLOCK_COMMENT_START:!0,BLOCK_COMMENT_END:!0,LINE_COMMENT:!0,WORKSPACE_NAME:!0,WORKSPACE_FOLDER:!0,RANDOM:!0,RANDOM_HEX:!0,UUID:!0});function qg(t,e,r){let n=MQ(t)+1,i={};t.walk(o=>{if(o instanceof Cn){if(o.name===e)o.name="TM_SELECTED_TEXT";else if(r!=null&&Object.prototype.hasOwnProperty.call(r,o.name))o.parent.replace(o,[new Yt(r[o.name])]);else if(!zg[o.name]){let s;o.name in i?s=i[o.name]:(s=n++,i[o.name]=s);let l=new Zt(s);o.children.forEach(u=>l.appendChild(u)),o.parent.replace(o,[l])}}else o instanceof Zt&&(o.index.toString()===e?o.parent.replace(o,[new Cn("TM_SELECTED_TEXT")]):r!=null&&Object.prototype.hasOwnProperty.call(r,o.index)&&o.parent.replace(o,[new Yt(r[o.index])]));return!0})}function MQ(t){let e=0;return t.walk(r=>(r instanceof Zt&&(e=Math.max(e,r.index)),!0)),e}function Gg(t,e,r){let n=DQ(t)+1,i={};t.walk(o=>{if(o instanceof Cn){if(o.name===e)o.name="TM_SELECTED_TEXT";else if(r!=null&&Object.prototype.hasOwnProperty.call(r,o.name))o.parent.replace(o,[new Yt(r[o.name])]);else if(!zg[o.name]){let s;o.name in i?s=i[o.name]:(s=n++,i[o.name]=s);let l=new Zt(s);o.children.forEach(u=>l.appendChild(u)),o.parent.replace(o,[l])}}else o instanceof Zt&&o.index.toString()===e&&o.parent.replace(o,[new Cn("TM_SELECTED_TEXT")]);return!0})}function DQ(t){let e=0;return t.walk(r=>(r instanceof Zt&&(e=Math.max(e,r.index)),!0)),e}function Kg(t,e,r){let n=e.map(o=>FQ(t,o,r)),i=n[0];if(!n.every(o=>o===i))throw new Error("Multiple snippet definitions match the given context");if(i===-1)throw new Error("Couldn't find matching snippet definition");return r[i]}function FQ(t,e,r){let n=e.editor.document.languageId,i={multipleTargets:!1};return r.findIndex(({scope:o})=>{if(o==null)return!0;let{langIds:s,scopeTypes:l,excludeDescendantScopeTypes:u}=o;if(s!=null&&!s.includes(n))return!1;if(l!=null){let m=l.concat(u??[]),d,g;for(let y of m)try{let T=t.create({type:"containingScope",scopeType:{type:y}}).run(e,i)[0];e.contentRange.isRangeEqual(T.contentRange)&&(T=t.create({type:"containingScope",scopeType:{type:y},ancestorIndex:1}).run(e,i)[0]),(d==null||d.contentRange.contains(T.contentRange))&&(d=T,g=y)}catch{continue}return g==null?!1:d!=null&&!(u??[]).includes(g)}return!0})}var jD=!1;function Qg(){jD||(Yo(k().messages,"legacySnippets","Talon community snippets are now fully supported in Cursorless! Cursorless's experimental snippets are now deprecated, but in most cases we can help you migrate automatically. Update cursorless-talon and say 'cursorless migrate snippets'."),jD=!0)}var qD={camelCase(t){if(t.length===0)return"";let[e,...r]=t;return e+r.map(zD).join("")},snakeCase(t){return t.join("_")},upperSnakeCase(t){return t.map(e=>e.toUpperCase()).join("_")},pascalCase(t){return t.map(zD).join("")}};function zD(t){return t.length===0?"":t[0].toUpperCase()+t.substr(1)}var zl=class{constructor(e,r,n,i){this.rangeUpdater=e;this.snippets=r;this.actions=n;this.modifierStageFactory=i;this.snippetParser=new oi;this.run=this.run.bind(this)}getFinalStages(e){let r=this.getScopeTypes(e);return r.length===0?[]:[new Zs(this.modifierStageFactory,{type:"cascading",modifiers:r.map(n=>({type:"containingScope",scopeType:n}))})]}getScopeTypes(e){let{name:r}=e,i=this.snippets.getSnippetStrict(r).insertionScopeTypes;return i==null?[]:i.map(o=>({type:o}))}getSnippetInfo(e,r){let{name:n}=e,i=this.snippets.getSnippetStrict(n),o=Kg(this.modifierStageFactory,r,i.definitions);return{body:o.body.join(`
`),formatSubstitutions(s){return s==null?void 0:LQ(i,o,s)}}}async run(e,r){Qg();let n=k().getEditableTextEditor(_t(e));await this.actions.editNew.run(e);let{body:i,formatSubstitutions:o}=this.getSnippetInfo(r,n.selections.map(m=>new Ct({editor:n,contentRange:m,isReversed:!1,hasExplicitRange:!0}))),s=this.snippetParser.parse(i);Gg(s,null,o(r.substitutions));let l=s.toTextmateString(),{editorSelections:u}=await Ie({rangeUpdater:this.rangeUpdater,editor:n,callback:()=>n.insertSnippet(l),preserveCursorSelections:!0,selections:{editorSelections:{selections:n.selections,behavior:0}}});return{thatSelections:u.map(m=>({editor:n,selection:m}))}}};function LQ(t,e,r){return Object.fromEntries(Object.entries(r).map(([n,i])=>{let o=(e.variables??{})[n]?.formatter??(t.variables??{})[n]?.formatter;if(o==null)return[n,i];let s=qD[o];if(s==null)throw new Error(`Couldn't find formatter ${o} for variable ${n}`);return[n,s(i.split(" "))]}))}var ql=class{constructor(e,r,n,i){this.rangeUpdater=e;this.snippets=r;this.actions=n;this.modifierStageFactory=i;this.snippetParser=new oi;this.run=this.run.bind(this)}getFinalStages(e,r){if(r.type==="named")return this.legacy().getFinalStages(r);let n=_t(e),o=cc(r,n.document.languageId).scopeTypes??[];return o.length===0?[]:[new Zs(this.modifierStageFactory,{type:"cascading",modifiers:o.map(s=>({type:"containingScope",scopeType:s}))})]}async run(e,r){if(r.type==="named")return this.legacy().run(e,r);let n=k().getEditableTextEditor(_t(e)),i=cc(r,n.document.languageId),o=this.snippetParser.parse(i.body),s=i.substitutions??r.substitutions;qg(o,null,s);let l=o.toTextmateString();await this.actions.editNew.run(e);let{editorSelections:u}=await Ie({rangeUpdater:this.rangeUpdater,editor:n,callback:()=>n.insertSnippet(l),preserveCursorSelections:!0,selections:{editorSelections:{selections:n.selections,behavior:0}}});return{thatSelections:u.map(m=>({editor:n,selection:m}))}}legacy(){return new zl(this.rangeUpdater,this.snippets,this.actions,this.modifierStageFactory)}};var Gl=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(ri)]}async run(e){return await Ue(k(),e.map(({thatTarget:n})=>n),"pendingModification0"),{thatSelections:nt(await at(e,async(n,i)=>{let{thatRanges:o}=await Ie({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(n),edits:IQ(n,i),selections:{thatRanges:i.map(({contentRange:s})=>s)}});return ta(i,o).map(([s,l])=>({editor:n,selection:l.toSelection(s.isReversed)}))}))}}};function IQ(t,e){let r=[];for(let n of e){let i=n.textualType==="token"?CQ(n):OQ(n);r.push(...i)}return r}function CQ(t){let{editor:e,contentRange:r}=t,n=Pr(e.document.languageId).tokenMatcher,i=gn(n,e,r,"forward");return Array.from(MS(i)).map(([o,s])=>({range:new Y(o.end,s.start),text:"",isReplace:!0}))}function OQ(t){let{document:e}=t.editor,r=t.contentRange,n=r.start.line,i=r.isSingleLine?Math.min(n+1,e.lineCount-1):r.end.line,o=Is(QP(n,i+1),s=>e.lineAt(s));return Array.from(MS(o)).map(([s,l])=>({range:new Y(s.rangeTrimmed?.end??s.range.end,l.rangeTrimmed?.start??l.range.start),text:l.isEmptyOrWhitespace?"":" ",isReplace:!0}))}var Yg=class{constructor(e,r){this.rangeUpdater=e;this.actions=r;this.run=this.run.bind(this)}async run(e){let r=k().getEditableTextEditor(_t(e)),n=k().activeEditableTextEditor,i=async()=>{await this.actions.editNew.run(e)},{cursorSelections:o}=await Ie({rangeUpdater:this.rangeUpdater,editor:r,preserveCursorSelections:!0,callback:i,selections:{cursorSelections:r.selections}}),{originalCursorSelections:s,editorSelections:l}=await Ie({rangeUpdater:this.rangeUpdater,editor:r,callback:()=>r.clipboardPaste(),selections:{originalCursorSelections:o,editorSelections:{selections:r.selections,behavior:0}}});return await r.setSelections(s),n!=null&&!n.isActive&&await n.focus(),await k().flashRanges(l.map(u=>({editor:r,range:dr(u),style:"justAdded"}))),{thatSelections:l.map(u=>({editor:r,selection:u}))}}};var Zg=class{constructor(e){this.rangeUpdater=e;this.runForEditor=this.runForEditor.bind(this)}async run(e){let r=await k().clipboard.readText(),n=r.split(/\r?\n/g),i=e.length===n.length?ta(e,n).map(([s,l])=>({destination:s,text:l})):e.map(s=>({destination:s,text:r}));return{thatSelections:nt(await Mi(i,({destination:s})=>s.editor,this.runForEditor))}}async runForEditor(e,r){let n=r.map(({destination:s,text:l})=>s.constructChangeEdit(l)),{editSelections:i}=await Ie({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(e),edits:n,selections:{editSelections:{selections:n.map(({range:s})=>s),behavior:0}}}),o=ta(n,i).map(([s,l])=>s.updateRange(l).toSelection(l.isReversed));return await k().flashRanges(o.map(s=>({editor:e,range:dr(s),style:"justAdded"}))),o.map(s=>({editor:e,selection:s}))}};var Xg=class{constructor(e,r){this.run=this.run.bind(this),this.runner=k().capabilities.commands.clipboardPaste!=null?new Yg(e,r):new Zg(e)}run(e){return this.runner.run(e)}};var Kl=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e,{showDecorations:r=!0}={}){return e=eg(e),r&&await Ue(k(),e,"pendingDelete",i=>i.getRemovalHighlightRange()),{thatTargets:nt(await at(e,this.runForEditor))}}async runForEditor(e,r){let n=r.map(s=>s.constructRemovalEdit()),i=k().getEditableTextEditor(e),{editRanges:o}=await Ie({rangeUpdater:this.rangeUpdater,editor:i,edits:n,selections:{editRanges:n.map(({range:s})=>s)}});return Pt(r,o).map(([s,l])=>new mo({editor:s.editor,isReversed:s.isReversed,contentRange:l}))}};var Ql=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}getTexts(e,r){if(Array.isArray(r))return r.length===1?Array(e.length).fill(r[0]):r;let n=[];for(let i=0;i<e.length;++i)n[i]=(r.start+i).toString();return n}async run(e,r){await Ue(k(),e.map(l=>l.target),"pendingModification0");let n=this.getTexts(e,r);if(e.length!==n.length)throw new Error("Targets and texts must have same length");let i=Pt(e,n).map(([l,u])=>({editor:l.editor,target:l.target,edit:l.constructChangeEdit(u)})),o=[],s=[];return await Mi(i,l=>l.editor,async(l,u)=>{let m=u.map(({edit:y})=>y),{contentSelections:d,editRanges:g}=await Ie({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(l),edits:m,selections:{contentSelections:u.map(({target:y})=>y.contentSelection),editRanges:{selections:m.map(({range:y})=>y),behavior:0}}});for(let[y,T]of Pt(u,d))o.push(y.target.withContentRange(T));for(let[y,T]of Pt(u,g))s.push({editor:l,selection:y.edit.updateRange(T).toSelection(!1)})}),{sourceTargets:o,thatSelections:s}}};var Yl=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.getFinalStages=()=>[Rv(this.modifierStageFactory)];this.run=this.run.bind(this)}async run(e,r,n){let i=e.flatMap(s=>{let l=s.getBoundary();if(l.length!==2)throw Error("Target must have an opening and closing delimiter");return l});await Ue(k(),i,"pendingModification0");let o=await at(i,async(s,l)=>{let u=l.map((g,y)=>({editor:s,range:g.contentRange,text:y%2===0?r:n})),{sourceRanges:m,thatRanges:d}=await Ie({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(s),edits:u,selections:{sourceRanges:e.map(g=>g.thatTarget.contentRange),thatRanges:e.map(g=>g.contentRange)}});return{sourceMark:mn(e,m),thatMark:mn(e,d)}});return{sourceSelections:o.flatMap(({sourceMark:s})=>s),thatSelections:o.flatMap(({thatMark:s})=>s)}}};var Zl=class{constructor(e){this.at=e;this.run=this.run.bind(this)}async run(e){let r=ml(e,s=>s.editor),n=Array.from(r,([s,l])=>({lineNumber:NQ(l,this.at),editor:s})),i=k().activeEditableTextEditor;for(let s of n)await k().getEditableTextEditor(s.editor).revealLine(s.lineNumber,this.at);i!=null&&!i.isActive&&await i.focus();let o=e.filter(s=>{let l=s.editor.visibleRanges,u=l[0].start.line,m=l[l.length-1].end.line;return s.contentRange.start.line>u||s.contentRange.end.line<m||s.contentRange.start.line===u&&s.contentRange.end.line===m});return await k().flashRanges(o.map(s=>({editor:s.editor,range:$r(s.contentRange),style:"referenced"}))),{thatTargets:e}}},Jg=class extends Zl{constructor(){super("top")}},eh=class extends Zl{constructor(){super("center")}},th=class extends Zl{constructor(){super("bottom")}};function NQ(t,e){let r=Number.MAX_SAFE_INTEGER,n=0;return t.forEach(i=>{r=Math.min(r,i.contentRange.start.line),n=Math.max(n,i.contentRange.end.line)}),e==="top"?r:e==="bottom"?n:Math.floor((r+n)/2)}var Ro=class{constructor(e,r){this.selectionMode=e;this.rangeMode=r;this.run=this.run.bind(this)}async run(e){let r=_t(e),n=this.getSelections(e),i=this.selectionMode==="add"?r.selections.concat(n):n,o=this.selectionMode==="set"&&i.length===1&&i[0].isEmpty;return await k().getEditableTextEditor(r).setSelections(i,{focusEditor:!0,highlightWord:o}),{thatTargets:e}}getSelections(e){switch(this.rangeMode){case"content":return e.map(r=>r.contentSelection);case"before":return e.map(r=>new De(r.contentRange.start,r.contentRange.start));case"after":return e.map(r=>new De(r.contentRange.end,r.contentRange.end))}}},rh=class extends Ro{constructor(){super("set","content")}},nh=class extends Ro{constructor(){super("set","before")}},ih=class extends Ro{constructor(){super("set","after")}},oh=class extends Ro{constructor(){super("add","content")}},ah=class extends Ro{constructor(){super("add","before")}},sh=class extends Ro{constructor(){super("add","after")}};var Xl=class{constructor(e){this.key=e;this.noAutomaticTokenExpansion=!0;this.run=this.run.bind(this)}async run(e){return{thatTargets:e,[`${this.key}Targets`]:e}}};var Jl=class{constructor(e){this.treeSitter=e;this.run=this.run.bind(this)}async run(e){await Ue(k(),e,"referenced");let r=["# Cursorless parse tree"];for(let n of e){let{editor:i,contentRange:o}=n,s=this.treeSitter.getTree(i.document);r.push(UQ(i.document,s,o))}return k().openUntitledTextDocument({language:"markdown",content:r.join(`

`)}),{thatTargets:e}}};function UQ(t,e,r){let n=[],i=[];return GD(n,i,r,e.walk(),0),[`## ${t.filename} [${r}]
`,`\`\`\`${t.languageId}`,t.getText(r),"```","","```scm",...i,"```","","```js",...n,"```",""].join(`
`)}function GD(t,e,r,n,i){for(;;){let o=new Y(n.startPosition.row,n.startPosition.column,n.endPosition.row,n.endPosition.column);if(r.intersection(o)!=null){let s="  ".repeat(i),l=HQ(n),u=s+l;if(n.nodeIsNamed)t.push(`${u}${n.nodeType} [${o}]`),e.push(`${u}(${n.nodeType}`),n.gotoFirstChild()?(GD(t,e,r,n,i+1),n.gotoParent(),e.push(`${s})`)):e[e.length-1]+=")";else{let m=`"${n.nodeType}"`;t.push(`${u}${m} [${o}]`),e.push(`${u}${m}`)}}if(!n.gotoNextSibling())return}}function HQ(t){let e=t.currentFieldName;return e!=null?`${e}: `:""}var eu=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){e.length<2&&Yo(k().messages,"tooFewTargets",'This action works on multiple targets, e.g. "sort every line block" instead of "sort block".');let r=e.slice().sort((s,l)=>s.contentRange.start.compareTo(l.contentRange.start)),{returnValue:n}=await this.actions.getText.run(r,{showDecorations:!1}),i=this.sortTexts(n),{thatSelections:o}=await this.actions.replace.run(r.map(s=>s.toDestination("to")),i);return{thatSelections:o}}},ch=class extends eu{sortTexts(e){return e.sort((r,n)=>r.localeCompare(n,void 0,{numeric:!0,caseFirst:"upper"}))}},lh=class extends eu{sortTexts(e){return e.reverse()}},uh=class extends eu{sortTexts(e){return gT(e)}};var tu=class{constructor(e){this.modifierStageFactory=e;this.getFinalStages=()=>[this.modifierStageFactory.create(ri)];this.run=this.run.bind(this)}async run(e){let r=e.map(({thatTarget:n})=>n);return await Ue(k(),r,"referenced"),await at(e,async(n,i)=>{let o=i.map(s=>fn(s,s.contentRange));await k().getEditableTextEditor(n).toggleBreakpoint(o)}),{thatTargets:e}}};var ru=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e,r,n){let i=await at(e,async(o,s)=>{let l=s.map(E=>({start:new De(E.contentRange.start,E.contentRange.start),end:new De(E.contentRange.end,E.contentRange.end)})),u=l.flatMap(({start:E,end:U})=>[{text:r,range:E},{text:n,range:U,isReplace:!0}]),m=s.map(E=>E.contentSelection),{boundariesStartSelections:d,boundariesEndSelections:g,sourceSelections:y,thatSelections:T}=await Ie({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(o),edits:u,selections:{boundariesStartSelections:{selections:l.map(({start:E})=>E),behavior:2},boundariesEndSelections:{selections:l.map(({end:E})=>E),behavior:3},sourceSelections:{selections:m,behavior:1},thatSelections:{selections:m,behavior:0}}}),w=[...d,...g];return await k().flashRanges(w.map(E=>({editor:o,range:dr(E),style:"justAdded"}))),{sourceMark:y.map(E=>({editor:o,selection:E})),thatMark:T.map(E=>({editor:o,selection:E}))}});return{sourceSelections:i.flatMap(({sourceMark:o})=>o),thatSelections:i.flatMap(({thatMark:o})=>o)}}};var nu=class{constructor(e,r,n){this.rangeUpdater=e;this.snippets=r;this.modifierStageFactory=n;this.snippetParser=new oi;this.run=this.run.bind(this)}getFinalStages(e){let r=this.getScopeType(e);return r==null?[]:[new bo(this.modifierStageFactory,{type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:r}})]}getScopeType(e){let{name:r,variableName:n}=e,s=(this.snippets.getSnippetStrict(r).variables??{})[n]?.wrapperScopeType;return s==null?void 0:{type:s}}getBody(e,r){let{name:n}=e,i=this.snippets.getSnippetStrict(n);return Kg(this.modifierStageFactory,r,i.definitions).body.join(`
`)}async run(e,r){Qg();let n=k().getEditableTextEditor(_t(e)),i=this.getBody(r,e),o=this.snippetParser.parse(i);Gg(o,r.variableName);let s=o.toTextmateString();await Ue(k(),e,"pendingModification0");let l=e.map(d=>d.contentSelection),u=()=>n.insertSnippet(s,l),{targetSelections:m}=await Ie({rangeUpdater:this.rangeUpdater,editor:n,callback:u,preserveCursorSelections:!0,selections:{targetSelections:l}});return{thatSelections:m.map(d=>({editor:n,selection:d}))}}};var iu=class{constructor(e,r,n){this.rangeUpdater=e;this.snippets=r;this.modifierStageFactory=n;this.snippetParser=new oi;this.run=this.run.bind(this)}getFinalStages(e,r){if(r.type==="named")return this.legacy().getFinalStages(r);let n=_t(e),i=cc(r,n.document.languageId);return i.scopeType==null?[]:[new bo(this.modifierStageFactory,{type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:i.scopeType}})]}async run(e,r){if(r.type==="named")return this.legacy().run(e,r);let n=k().getEditableTextEditor(_t(e)),i=cc(r,n.document.languageId),o=this.snippetParser.parse(i.body);qg(o,i.variableName);let s=o.toTextmateString();await Ue(k(),e,"pendingModification0");let l=e.map(m=>m.contentSelection),{targetSelections:u}=await Ie({rangeUpdater:this.rangeUpdater,editor:n,callback:()=>n.insertSnippet(s,l),preserveCursorSelections:!0,selections:{targetSelections:l}});return{thatSelections:u.map(m=>({editor:n,selection:m}))}}legacy(){return new nu(this.rangeUpdater,this.snippets,this.modifierStageFactory)}};var BQ=/-?\d+(\.\d+)?/g,ph=class{constructor(e,r){this.actions=e;this.isIncrement=r;this.run=this.run.bind(this)}async run(e){let r=[];return await Mi(e,n=>n.editor,async(n,i)=>{let o=await this.runOnEditor(n,i);r.push(...o)}),{thatSelections:r}}async runOnEditor(e,r){let{document:n}=e,i=[],o=[];for(let l of r){let u=n.offsetAt(l.contentRange.start),m=l.contentText,d=tl(m,BQ);for(let g of d)i.push(VQ(e,u,g)),o.push(WQ(this.isIncrement,g.text))}let{thatSelections:s}=await this.actions.replace.run(i,o);return s}},mh=class extends ph{constructor(e){super(e,!0)}},fh=class extends ph{constructor(e){super(e,!1)}};function VQ(t,e,r){return new Ke({editor:t,isReversed:!1,contentRange:new Y(t.document.positionAt(e+r.index),t.document.positionAt(e+r.index+r.text.length))}).toDestination("to")}function WQ(t,e){return e.includes(".")?jQ(t,e).toString():$Q(t,e).toString()}function $Q(t,e){let r=parseInt(e),n=1;return r+(t?n:-n)}function jQ(t,e){let r=parseFloat(e),i=Math.abs(r)<=1?.1:1,o=r+(t?i:-i);return parseFloat(o.toPrecision(15))/1}var dh=class{constructor(e,r,n,i){this.addSelection=new oh,this.addSelectionBefore=new ah,this.addSelectionAfter=new sh,this.callAsFunction=new Ol(this),this.clearAndSetSelection=new Nl(this),this.copyToClipboard=new bg(this,n),this.cutToClipboard=new wg(this),this.decrement=new fh(this),this.deselect=new Ul,this.editNew=new Eg(n,this),this.editNewLineAfter=new kg(this,i),this.editNewLineBefore=new Rg(this,i),this.executeCommand=new Hl(n),this.extractVariable=new yg(n),this.findInDocument=new Pg(this),this.findInWorkspace=new Mg(this),this.flashTargets=new Dg,this.foldRegion=new cg(n),this.followLink=new ac({openAside:!1}),this.followLinkAside=new ac({openAside:!0}),this.generateSnippet=new sc(r),this.getText=new Wl,this.gitAccept=new xg(n),this.gitRevert=new Tg(n),this.gitStage=new Sg(n),this.gitUnstage=new vg(n),this.highlight=new $l,this.increment=new mh(this),this.indentLine=new Lg(n),this.insertCopyAfter=new Ng(n,i),this.insertCopyBefore=new Og(n,i),this.insertEmptyLineAfter=new Bg(n,i),this.insertEmptyLineBefore=new Hg(n,i),this.insertEmptyLinesAround=new Ug(n,i),this.insertSnippet=new ql(n,r,this,i),this.joinLines=new Gl(n,i),this.breakLine=new Jd(n),this.moveToTarget=new rg(n),this.outdentLine=new Ig(n),this.pasteFromClipboard=new Xg(n,this),this.randomizeTargets=new uh(this),this.remove=new Kl(n),this.rename=new ug(n),this.replace=new Ql(n),this.replaceWithTarget=new tg(n),this.revealDefinition=new fg(n),this.revealTypeDefinition=new dg(n),this.reverseTargets=new lh(this),this.rewrapWithPairedDelimiter=new Yl(n,i),this.scrollToBottom=new th,this.scrollToCenter=new eh,this.scrollToTop=new Jg,this.setSelection=new rh,this.setSelectionAfter=new ih,this.setSelectionBefore=new nh,this.showDebugHover=new hg(n),this.showHover=new gg(n),this.showQuickFix=new mg(n),this.showReferences=new pg(n),this.sortTargets=new ch(this),this.swapTargets=new ng(n),this.toggleLineBreakpoint=new tu(i),this.toggleLineComment=new og(n),this.unfoldRegion=new lg(n),this.wrapWithPairedDelimiter=new ru(n),this.wrapWithSnippet=new iu(n,r,i),this["experimental.setInstanceReference"]=new Xl("instanceReference"),this["private.showParseTree"]=new Jl(e),this["private.getTargets"]=new Vl,this["private.setKeyboardTarget"]=new Xl("keyboard")}};async function KD(t,e,r){let n=await t.getFocusedElementType();if(n==null||n==="textEditor")return null;let i=r.action;switch(i.name){case"replace":return gh(i.destination)&&Array.isArray(i.replaceWith)?{action:"insert",modifiers:hh(i.destination),text:i.replaceWith.join(`
`)}:null;case"replaceWithTarget":return gh(i.destination)?{action:"insert",modifiers:hh(i.destination),text:await Ov(e,i.source)}:null;case"moveToTarget":if(gh(i.destination)){let o=await Ov(e,i.source);return await zQ(e,i.source),{action:"insert",modifiers:hh(i.destination),text:o}}return null;case"callAsFunction":return yh(i.argument)?{action:i.name,modifiers:xh(i.argument),callee:await Ov(e,i.callee)}:null;case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return yh(i.target)?{action:i.name,modifiers:xh(i.target),left:i.left,right:i.right}:null;case"pasteFromClipboard":return gh(i.destination)?{action:i.name,modifiers:hh(i.destination)}:null;case"swapTargets":case"editNew":case"insertSnippet":case"generateSnippet":case"wrapWithSnippet":case"parsed":return null;default:return yh(i.target)?{action:i.name,modifiers:xh(i.target)}:null}}function gh(t){return t.type==="implicit"?!0:t.type==="primitive"?t.insertionMode==="to"&&yh(t.target):!1}function yh(t){return t.type==="implicit"?!0:t.type==="primitive"?t.mark==null||t.mark.type==="cursor":!1}function hh(t){return t.type==="primitive"?xh(t.target):[]}function xh(t){return t.type==="primitive"&&t.modifiers!=null&&t.modifiers.length>0?t.modifiers:[]}async function Ov(t,e){return(await t({name:"getText",target:e})).returnValue.join(`
`)}async function zQ(t,e){await t({name:"remove",target:e})}function QD(t,e){let{anchor:r,rangeType:n,active:i}=t;if(r.type!=="primitive"||n!=="continuous")return t;let o=r.modifiers.map((s,l)=>[s,l]);for(let[s,l]of o.reverse())for(let u of qQ){let m=u.accept(s);if(m.accepted){let[d,g]=[r.modifiers.slice(0,l+1),r.modifiers.slice(l+1)],y={...t,anchor:g.length===0&&e?{type:"implicit"}:{type:"primitive",mark:r.mark,modifiers:g},active:Nm(i,T=>{T.modifiers=T.modifiers.slice(Go(T.modifiers,w=>u.accept(w).accepted)+1)})};return y=m.transformTarget?.(y)??y,{type:"primitive",mark:{type:"target",target:y},modifiers:d}}}return t}var qQ=[{accept(t){return t.type==="everyScope"&&t.scopeType.type!=="instance"?{accepted:!0,transformTarget(e){return{...e,exclusionScopeType:t.scopeType}}}:{accepted:!1}}},{accept(t){return{accepted:(t.type==="everyScope"||t.type==="relativeScope"||t.type==="ordinalScope")&&t.scopeType.type==="instance"}}}];function Uv(t,e){switch(t.type){case"list":return GQ(t,e);case"range":return YD(t,e);case"primitive":return Th(t,e);case"implicit":return t}}function GQ(t,e){return{...t,elements:t.elements.map((r,n)=>{let i=e.concat(t.elements.slice(0,n));switch(r.type){case"range":return YD(r,i);case"primitive":return Th(r,i)}})}}function YD(t,e){let r=KQ(t,e),n=t.anchor.type==="implicit"||t.anchor.mark==null;return QD(r,n)}function KQ(t,e){return{type:"range",rangeType:t.rangeType??"continuous",excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1,anchor:t.anchor.type==="implicit"?t.anchor:Th(t.anchor,e),active:Th(t.active,e.concat(t.anchor))}}function Th(t,e){let r=Nv(t.mark??(QQ(t)?XQ(e):null)??{type:"cursor"}),n=ZD(t)??JQ(e)??e7(e)??[];return{type:t.type,mark:r,modifiers:n}}function QQ(t){return t.modifiers?.some(e=>e.type==="inferPreviousMark")??!1}function ZD(t){let e=t.modifiers?.filter(r=>r.type!=="inferPreviousMark")??[];return e.length!==0?e:void 0}function YQ(t){if(ZQ(t))return[{type:"containingScope",scopeType:{type:"line"}}]}function ZQ(t){let e=r=>r?.type==="lineNumber";return e(t.mark)?!0:t.mark?.type==="range"?e(t.mark.anchor)&&e(t.mark.active):!1}function XQ(t){return ou(t,e=>e.mark)}function JQ(t){return ou(t,ZD)}function e7(t){return ou(t,YQ)}function ou(t,e){for(let r=t.length-1;r>-1;--r){let n=t[r];switch(n.type){case"primitive":{let i=e(n);if(i!=null)return i;break}case"range":{let i=ou([n.anchor],e);if(i!=null)return i;break}case"list":{let i=ou(n.elements,e);if(i!=null)return i;break}}}}function Nv(t){switch(t.type){case"range":return{...t,anchor:Nv(t.anchor),active:Nv(t.active)};case"target":return{type:"target",target:Uv(t.target,[])};default:return t}}var Sh=class{constructor(e,r,n,i,o){this.commandServerApi=e;this.debug=r;this.storedTargets=n;this.pipelineRunner=i;this.actions=o;this.finalStages=[];this.runAction=this.runAction.bind(this),this.inferenceContext=new Hv(this.debug)}async run(e){if(ea(e)){let m=await KD(this.commandServerApi,this.runAction,e);if(m!=null)return{fallback:m}}let{returnValue:r,thatSelections:n,thatTargets:i,sourceSelections:o,sourceTargets:s,instanceReferenceTargets:l,keyboardTargets:u}=await this.runAction(e.action);return this.storedTargets.set("that",XD(i,n)),this.storedTargets.set("source",XD(s,o)),this.storedTargets.set("instanceReference",l),this.storedTargets.set("keyboard",u,{history:!0}),{returnValue:r}}runAction(e){switch(this.inferenceContext.reset(),this.finalStages=[],e.name){case"replaceWithTarget":return this.actions.replaceWithTarget.run(this.getTargets(e.source),this.getDestinations(e.destination));case"moveToTarget":return this.actions.moveToTarget.run(this.getTargets(e.source),this.getDestinations(e.destination));case"swapTargets":return this.actions.swapTargets.run(this.getTargets(e.target1),this.getTargets(e.target2));case"callAsFunction":return this.actions.callAsFunction.run(this.getTargets(e.callee),this.getTargets(e.argument));case"wrapWithPairedDelimiter":return this.actions.wrapWithPairedDelimiter.run(this.getTargets(e.target),e.left,e.right);case"rewrapWithPairedDelimiter":return this.finalStages=this.actions.rewrapWithPairedDelimiter.getFinalStages(),this.actions.rewrapWithPairedDelimiter.run(this.getTargets(e.target),e.left,e.right);case"pasteFromClipboard":return this.actions.pasteFromClipboard.run(this.getDestinations(e.destination));case"executeCommand":return this.actions.executeCommand.run(this.getTargets(e.target),e.commandId,e.options);case"replace":return this.actions.replace.run(this.getDestinations(e.destination),e.replaceWith);case"highlight":return this.actions.highlight.run(this.getTargets(e.target),e.highlightId);case"generateSnippet":return this.actions.generateSnippet.run(this.getTargets(e.target),e.directory,e.snippetName);case"insertSnippet":return this.finalStages=this.actions.insertSnippet.getFinalStages(this.getDestinations(e.destination),e.snippetDescription),this.actions.insertSnippet.run(this.getDestinations(e.destination),e.snippetDescription);case"wrapWithSnippet":return this.finalStages=this.actions.wrapWithSnippet.getFinalStages(this.getTargets(e.target),e.snippetDescription),this.actions.wrapWithSnippet.run(this.getTargets(e.target),e.snippetDescription);case"editNew":return this.actions.editNew.run(this.getDestinations(e.destination));case"getText":return this.actions.getText.run(this.getTargets(e.target),e.options);case"parsed":return this.runAction(Km(e.content,e.arguments));default:{let r=this.actions[e.name];if(r==null)throw new Error(`Unknown action: ${e.name}`);return this.finalStages=r.getFinalStages?.()??[],this.noAutomaticTokenExpansion=r.noAutomaticTokenExpansion??!1,r.run(this.getTargets(e.target))}}}getTargets(e){let r=this.inferenceContext.run(e);return this.pipelineRunner.run(r,{actionFinalStages:this.finalStages,noAutomaticTokenExpansion:this.noAutomaticTokenExpansion})}getDestinations(e){switch(e.type){case"list":return e.destinations.flatMap(r=>this.getDestinations(r));case"primitive":return this.getTargets(e.target).map(r=>r.toDestination(e.insertionMode));case"implicit":return this.getTargets({type:"implicit"}).map(r=>r.toDestination("to"))}}},Hv=class{constructor(e){this.debug=e;this.previousTargets=[]}run(e){let r=Uv(e,this.previousTargets);return this.debug.active&&(this.debug.log("Full target:"),this.debug.log(JSON.stringify(r,null,2))),this.previousTargets.push(e),r}reset(){this.previousTargets=[]}};function XD(t,e){if(t!=null&&e!=null)throw Error("Actions may only return full targets or selections for that mark");return e!=null?e.map(ic):t}var vh=class{constructor(e,r){this.readableHatMap=e;this.mark=r}run(){let e=this.readableHatMap.getToken(this.mark.symbolColor,this.mark.character);if(e==null)throw new Error(`Couldn't find mark ${this.mark.symbolColor} '${this.mark.character}'`);return[new Ct({editor:e.editor,contentRange:e.range,isReversed:!1,hasExplicitRange:!1})]}};var bh=class{constructor(e){this.mark=e}run(){let{editorId:e,range:{start:r,end:n}}=this.mark,i=k().visibleTextEditors.find(s=>s.id===e);if(i==null)throw new Error(`Couldn't find editor '${e}'`);let o=new Y(r.line,r.character,n.line,n.character);return[new Ct({editor:i,contentRange:o,isReversed:!1,hasExplicitRange:!1})]}};var wh=class{constructor(e){this.mark=e}run(){let e=k().activeTextEditor;if(e==null)return[];let r=t7(e,this.mark.lineNumberType,this.mark.lineNumber),n=e.document.lineAt(r).range;return[DS(e,!1,n)]}},t7=(t,e,r)=>{switch(e){case"absolute":return r;case"relative":return t.selections[0].active.line+r;case"modulo100":{let i=t.visibleRanges[0].start.line,o=t.visibleRanges[t.visibleRanges.length-1].end.line,s=Math.floor(i/100)*100,l=[],u=[],m=s+r;for(;m<=o;)m>=i&&(t.visibleRanges.find(g=>m>=g.start.line&&m<=g.end.line)?l.push(m):u.push(m)),m+=100;if(l.length===1)return l[0];if(l.length+u.length>1)throw new Error("Multiple lines matching");if(u.length===1)return u[0];throw new Error("Line is not in viewport")}}};var Eh=class{constructor(e){this.mark=e}run(){return[]}};var _h=class{constructor(e,r){this.markStageFactory=e;this.mark=r}run(){let e=this.markStageFactory.create(this.mark.anchor),r=this.markStageFactory.create(this.mark.active),n=e.run(),i=r.run();if(n.length!==1||i.length!==1)throw new Error("Expected single anchor and active target");return[wo(n[0],i[0],this.mark.excludeAnchor,this.mark.excludeActive)]}};var Rh=class{constructor(e,r){this.storedTargets=e;this.key=r}run(){let e=this.storedTargets.get(this.key);if(e==null||e.length===0)throw Error(`No available ${this.key} marks`);return e}};var kh=class{constructor(e,r){this.targetPipelineRunner=e;this.mark=r}run(){return this.targetPipelineRunner.run(this.mark.target)}};var Ah=class{constructor(e,r){this.readableHatMap=e;this.storedTargets=r;this.create=this.create.bind(this)}setPipelineRunner(e){this.targetPipelineRunner=e}create(e){switch(e.type){case"cursor":return new Ms;case"that":case"source":case"keyboard":return new Rh(this.storedTargets,e.type);case"decoratedSymbol":return new vh(this.readableHatMap,e);case"lineNumber":return new wh(e);case"range":return new _h(this,e);case"nothing":return new Eh(e);case"target":return new kh(this.targetPipelineRunner,e);case"explicit":return new bh(e);default:{let r=e,{type:n}=e;throw new Error(`Unknown mark: ${n}`)}}}};async function JD(t,e,r,n,i,o,s,l,u,m){r.active&&(r.log("command:"),r.log(JSON.stringify(m,null,2)));let d=pS(m),g=await n.getReadableMap(d.usePrePhraseSnapshot),y=n7(t,e,s,r,o,g,i,l);for(let w of u)y=w.wrapCommandRunner(g,y);let T=await y.run(d);return await r7(m,T)}async function r7(t,e){if(ea(t))return e;if("returnValue"in e)return e.returnValue}function n7(t,e,r,n,i,o,s,l){let u=new nc(r,i,new Vs(r)),m=new Ah(o,i),d=new Md(u,m);return m.setPipelineRunner(d),new Sh(e,n,i,d,new dh(t,s,l,u))}var eF=["latex","rust"];async function tF(t,e){await i7(t,e)}async function i7(t,e){let r=[];for(let n of eF)await t.loadLanguage(n),await e.loadLanguage(n),Ri(Il[n]??{}).map(i=>{e.get(n)?.getScopeHandler({type:i})!=null&&r.push(`Scope '${i}' defined as both legacy and new for language ${n}`)});if(r.length>0)throw Error(r.join(`
`))}function rF(t){return mA(t)?ul(t.type).replace("."," "):t.type==="surroundingPair"?`Matching pair of ${ul(t.delimiter)}`:t.type==="customRegex"?`Regex \`${t.regex}\``:"Unknown scope type"}var Ph=class{constructor(e){this.customSpokenFormGenerator=e;this.listeners=[];this.disposable=e.onDidChangeCustomSpokenForms(()=>this.onChange()),this.onDidChangeScopeInfo=this.onDidChangeScopeInfo.bind(this),this.getScopeTypeInfo=this.getScopeTypeInfo.bind(this),this.updateScopeTypeInfos()}onDidChangeScopeInfo(e){return e(this.getScopeTypeInfos()),this.listeners.push(e),{dispose:()=>{fr(this.listeners,e)}}}async onChange(){this.updateScopeTypeInfos(),this.listeners.forEach(e=>e(this.scopeInfos))}updateScopeTypeInfos(){let e=[...Jo.filter(r=>r!=="instance").map(r=>({type:r})),...Am.map(r=>({type:"surroundingPair",delimiter:r})),...this.customSpokenFormGenerator.getCustomRegexScopeTypes()];this.scopeInfos=e.map(r=>this.getScopeTypeInfo(r))}getScopeTypeInfos(){return this.scopeInfos}getScopeTypeInfo(e){return{scopeType:e,spokenForm:this.customSpokenFormGenerator.scopeTypeToSpokenForm(e),humanReadableName:rF(e),isLanguageSpecific:o7(e)}}dispose(){this.disposable.dispose()}};function o7(t){switch(t.type){case"string":case"argumentOrParameter":case"argumentList":case"anonymousFunction":case"attribute":case"branch":case"class":case"className":case"collectionItem":case"collectionKey":case"command":case"comment":case"private.fieldAccess":case"functionCall":case"functionCallee":case"functionName":case"ifStatement":case"instance":case"interior":case"list":case"map":case"name":case"namedFunction":case"regularExpression":case"statement":case"type":case"value":case"condition":case"section":case"sectionLevelOne":case"sectionLevelTwo":case"sectionLevelThree":case"sectionLevelFour":case"sectionLevelFive":case"sectionLevelSix":case"selector":case"private.switchStatementSubject":case"unit":case"xmlBothTags":case"xmlElement":case"xmlEndTag":case"xmlStartTag":case"part":case"chapter":case"subSection":case"subSubSection":case"namedParagraph":case"subParagraph":case"environment":case"textFragment":case"disqualifyDelimiter":case"pairDelimiter":return!0;case"character":case"word":case"token":case"identifier":case"line":case"sentence":case"paragraph":case"boundedParagraph":case"document":case"nonWhitespaceSequence":case"boundedNonWhitespaceSequence":case"url":case"notebookCell":case"surroundingPair":case"surroundingPairInterior":case"customRegex":case"glyph":return!1;case"oneOf":throw Error(`Can't decide whether scope type ${JSON.stringify(t,void 0,3)} is language-specific`)}}function Bv(t,e,r){if(!r)return t.document.range;let n=t.visibleRanges.reduce((s,l)=>s.union(l));n=t.document.range.intersection(n.with(n.start.translate(-10),n.end.translate(10)));let i=am(Array.from(e.generateScopes(t,n.start,"forward",{containment:"required"})))?.domain??n,o=am(Array.from(e.generateScopes(t,n.end,"forward",{containment:"required"})))?.domain??n;return i.union(o)}function ka(t){return{contentRange:t.contentRange,removalRange:t.getRemovalRange(),removalHighlightRange:t.getRemovalHighlightRange(),leadingDelimiter:nF(t.getLeadingDelimiterTarget()),trailingDelimiter:nF(t.getTrailingDelimiterTarget()),interior:t.getInterior()?.map(ka),boundary:t.getBoundary()?.map(ka),insertionDelimiter:t.insertionDelimiter}}function nF(t){return t!=null?ka(t):void 0}function iF(t,e,r,n,i){let o={multipleTargets:!0};return Is(e.generateScopes(t,n.start,"forward",{includeDescendantScopes:!0,distalPosition:n.end}),s=>({domain:s.domain,ranges:s.getTargets(!1).map(l=>({range:l.contentRange,targets:i?a7(r,l,o).map(ka):void 0}))}))}function a7(t,e,r){try{return t.run(e,r)}catch(n){if(n.name==="NoContainingScopeError")return[];throw n}}function oF(t,e,r){return Is(e.generateScopes(t,r.start,"forward",{includeDescendantScopes:!0,distalPosition:r.end}),n=>({domain:n.domain,targets:n.getTargets(!1).map(ka)}))}var Mh=class{constructor(e,r){this.scopeHandlerFactory=e;this.modifierStageFactory=r;this.provideScopeRanges=this.provideScopeRanges.bind(this),this.provideIterationScopeRanges=this.provideIterationScopeRanges.bind(this)}provideScopeRanges(e,{scopeType:r,visibleOnly:n}){let i=this.scopeHandlerFactory.maybeCreate(r,e.document.languageId);return i==null?[]:oF(e,i,Bv(e,i,n))}provideIterationScopeRanges(e,{scopeType:r,visibleOnly:n,includeNestedTargets:i}){let{languageId:o}=e.document,s=this.scopeHandlerFactory.maybeCreate(r,o);if(s==null)return[];let l=this.scopeHandlerFactory.maybeCreate(s.iterationScopeType,o);return l==null?[]:iF(e,l,this.modifierStageFactory.create({type:"everyScope",scopeType:r}),Bv(e,s,n),i)}};var Dh=class{constructor(e,r){this.scopeRangeProvider=r;this.disposables=[];this.listeners=[];this.onChange=this.onChange.bind(this),this.onDidChangeScopeRanges=this.onDidChangeScopeRanges.bind(this),this.onDidChangeIterationScopeRanges=this.onDidChangeIterationScopeRanges.bind(this);let n=new Kn(k().configuration,()=>this.onChange());this.disposables.push(k().onDidChangeVisibleTextEditors(n.run),k().onDidOpenTextDocument(n.run),k().onDidCloseTextDocument(n.run),k().onDidChangeTextDocument(n.run),k().onDidChangeTextEditorVisibleRanges(n.run),e.onDidChangeDefinition(this.onChange),n)}onDidChangeScopeRanges(e,r){let n=()=>{k().visibleTextEditors.forEach(i=>{let o;try{o=this.scopeRangeProvider.provideScopeRanges(i,r)}catch(s){if(ut(k().messages,"ScopeRangeWatcher.provide",s.message),o=[],k().runMode==="test")throw s}e(i,o)})};return this.listeners.push(n),n(),{dispose:()=>{fr(this.listeners,n)}}}onDidChangeIterationScopeRanges(e,r){let n=()=>{k().visibleTextEditors.forEach(i=>{e(i,this.scopeRangeProvider.provideIterationScopeRanges(i,r))})};return this.listeners.push(n),n(),{dispose:()=>{fr(this.listeners,n)}}}onChange(){this.listeners.forEach(e=>e())}dispose(){this.disposables.forEach(({dispose:e})=>{try{e()}catch{}})}};var Fh=class{constructor(e){this.scopeHandlerFactory=e;this.getScopeSupport=this.getScopeSupport.bind(this),this.getIterationScopeSupport=this.getIterationScopeSupport.bind(this)}getScopeSupport(e,r){let{languageId:n}=e.document,i=this.scopeHandlerFactory.maybeCreate(r,n);return i==null?sF(n,r):aF(e,i)?0:1}getIterationScopeSupport(e,r){let{languageId:n}=e.document,i=this.scopeHandlerFactory.maybeCreate(r,n);if(i==null)return sF(n,r);let o=this.scopeHandlerFactory.maybeCreate(i.iterationScopeType,n);return o==null?3:aF(e,o)?0:1}};function aF(t,e){return!gA(e.generateScopes(t,new ge(0,0),"forward"))}function sF(t,e){switch(e.type){case"notebookCell":return 3;default:return Il[t]?.[e.type]!=null?2:3}}var Lh=class{constructor(e,r,n){this.scopeSupportChecker=r;this.scopeInfoProvider=n;this.listeners=[];this.onChange=this.onChange.bind(this),this.onDidChangeScopeSupport=this.onDidChangeScopeSupport.bind(this);let i=new Kn(k().configuration,()=>this.onChange());this.disposable=dA(k().onDidOpenTextDocument(i.run),k().onDidCloseTextDocument(i.run),k().onDidChangeActiveTextEditor(i.run),k().onDidChangeTextDocument(i.run),e.onDidChangeDefinition(i.run),this.scopeInfoProvider.onDidChangeScopeInfo(this.onChange),i)}onDidChangeScopeSupport(e){return e(this.getSupportLevels()),this.listeners.push(e),{dispose:()=>{fr(this.listeners,e)}}}onChange(){if(this.listeners.length===0)return;let e=this.getSupportLevels();this.listeners.forEach(r=>r(e))}getSupportLevels(){let e=k().activeTextEditor,r=e==null?()=>3:o=>this.scopeSupportChecker.getScopeSupport(e,o),n=e==null?()=>3:o=>this.scopeSupportChecker.getIterationScopeSupport(e,o);return this.scopeInfoProvider.getScopeTypeInfos().map(o=>({...o,support:r(o.scopeType),iterationScopeSupport:n(o.scopeType)}))}dispose(){this.disposable.dispose()}};async function cF({ide:t,hats:e,treeSitterQueryProvider:r,treeSitter:n=new Af,commandServerApi:i=new wf,talonSpokenForms:o=new kf,snippets:s=new Rf}){Jm(t);let l=new hf(t),u=new bf,m=new tf,d=new gf(t,m),g=new Df(o),y=e!=null?new Sf(u,l,e,i):new Ef;y.allocateHats();let T=r?await Sd.create(t,n,r):new _f;t.disposeOnExit(u,T,y,l,d);let w=[],E,U=V=>(E=V,JD(n,i,l,y,s,m,T,u,w,V));return{commandApi:{runCommand(V){return U(V)},runCommandSafe(...V){return U(Pm(V))},repeatPreviousCommand(){if(E==null)throw new Error("No previous command");return U(E)}},scopeProvider:c7(T,m,g),customSpokenFormGenerator:g,storedTargets:m,hatTokenMap:y,injectIde:Jm,runIntegrationTests:()=>tF(n,T),addCommandRunnerDecorator:V=>{w.push(V)}}}function c7(t,e,r){let n=new Vs(t),i=new Mh(n,new nc(t,e,n)),o=new Dh(t,i),s=new Fh(n),l=new Ph(r),u=new Lh(t,s,l);return{provideScopeRanges:i.provideScopeRanges,provideIterationScopeRanges:i.provideIterationScopeRanges,onDidChangeScopeRanges:o.onDidChangeScopeRanges,onDidChangeIterationScopeRanges:o.onDidChangeIterationScopeRanges,getScopeSupport:s.getScopeSupport,getIterationScopeSupport:s.getIterationScopeSupport,onDidChangeScopeSupport:u.onDidChangeScopeSupport,getScopeInfo:l.getScopeTypeInfo,onDidChangeScopeInfo:l.onDidChangeScopeInfo}}function lF(t,e){switch(e.type){case"UntypedTarget":return new Ct({editor:t,isReversed:e.isReversed,contentRange:Tm(e.contentRange),hasExplicitRange:e.hasExplicitRange});case"LineTarget":return new gr({editor:t,isReversed:e.isReversed,contentRange:Tm(e.contentRange)});default:throw Error(`Unsupported target type ${e.type}`)}}var KCe=Symbol("unused");var au=class{constructor(e){this.position=e}},QCe={$0:new au(0),$1:new au(1),$2:new au(2)};var uF=require("node:events"),Ih=class{constructor(){this.apis=new Map,this.commands=new Map,this.eventEmitter=new uF.EventEmitter}registerExtensionApi(e,r){this.apis.set(e,r)}getExtensionApi(e){return this.apis.get(e)}registerCommand(e,r){this.commands.set(e,r)}async executeCommand(e,...r){return await this.commands.get(e)(...r)}onEvent(e,r){return this.eventEmitter.on(e,r)}emitEvent(e,...r){return this.eventEmitter.emit(e,...r)}};function Kr(){return global._neovimRegistry==null&&(global._neovimRegistry=new Ih),global._neovimRegistry}var pF="pokey.cursorless";async function Ch(t,e){let r='return require("cursorless").buffer_get_selection()',[n,i,o,s,l]=await e.executeLua(r,[]),u;return l===!0?u=[new De(new ge(o-1,s-1),new ge(n-1,i-1))]:u=[new De(new ge(n-1,i-1),new ge(o-1,s-1))],console.debug(`bufferGetSelections(): selections=(${u[0].start.line}, ${u[0].start.character}), (${u[0].end.line}, ${u[0].end.character}) neovim=(${n},${i}),(${o},${s}),reverse=${l}`),u}async function mF(t,e){if(e.length!==1)throw new Error("bufferSetSelections() only supports one selection");let r=`return require("cursorless").select_range(${e[0].start.line+1}, ${e[0].start.character}, ${e[0].end.line+1}, ${e[0].end.character})`;console.debug(`bufferSetSelections() selections=(${e[0].start.line},${e[0].start.character}),(${e[0].end.line},${e[0].end.character}) luaCode="${r}"`),await t.executeLua(r,[])}async function fF(t,e,r){let n='return require("cursorless").window_get_visible_lines()',[i,o]=await e.executeLua(n,[]),s=new Y(new ge(i-1,0),new ge(o-1,r[o-1].length-1));return console.debug(`windowGetVisibleRanges(): range=(${s.start.line}, ${s.start.character}), (${s.end.line}, ${s.end.character})`),[s]}async function dF(t){return await t.executeLua('return require("cursorless.utils").cursorless_nvim_path()',[])}async function Oh(t,e){await e.callFunction("setreg",["*",t])}async function gF(t){return await t.callFunction("getreg",["*"])}async function hF(t){await t.executeLua('return require("cursorless.utils").paste()',[])}async function yF(t){await t.executeLua('return require("cursorless.utils").mode_switch_nt()',[])}async function xF(t){await t.executeLua('return require("cursorless.utils").mode_switch_t()',[])}async function TF(t,e){let r=`vim.notify("${e}")`;await t.executeLua(r,[])}var l7={clipboardCopy:{acceptsLocation:!1},clipboardPaste:!0,toggleLineComment:void 0,indentLine:void 0,outdentLine:void 0,rename:void 0,quickFix:void 0,revealDefinition:void 0,revealTypeDefinition:void 0,showHover:void 0,showDebugHover:void 0,extractVariable:void 0,fold:void 0,highlight:{acceptsLocation:!0},unfold:void 0,showReferences:void 0,insertLineAfter:void 0,gitAccept:void 0,gitRevert:void 0,gitStage:void 0,gitUnstage:void 0},Nh=class{constructor(){this.commands=l7}};var su=class{constructor(e){this.client=e}async readText(){return await gF(this.client)}async writeText(e){return await Oh(e,this.client)}};var Uh=Hr(Vv(),1);var lu=class{constructor(){this.notifier=new tr;this.mocks={...mm};this.scopes=[];this.onDidChangeConfiguration=this.notifier.registerListener;this.onDidChangeConfiguration=this.onDidChangeConfiguration.bind(this)}getOwnConfiguration(e,r){if(r!=null){for(let{scope:n,values:i}of this.scopes)if(u7(n,r))return(0,Uh.get)(i,e)??(0,Uh.get)(this.mocks,e)}return(0,Uh.get)(this.mocks,e)}mockConfiguration(e,r){this.mocks[e]=r,this.notifier.notifyListeners()}mockConfigurationScope(e,r,n=!1){this.scopes.push({scope:e,values:r}),n||this.notifier.notifyListeners()}};function u7(t,e){return t.languageId===e.languageId}async function Wv(t,e,r,n){console.debug("neovimEdit() [unsorted]:");for(let s of n)console.debug(`	range=${JSON.stringify(s.range)}, text='${s.text}', isReplace=${s.isReplace}`);n.sort((s,l)=>(SF(s)||vF(s))&&(SF(l)||vF(l))?1:s.range.start.line===l.range.start.line?l.range.start.character-s.range.start.character:l.range.start.line-s.range.start.line),console.debug("neovimEdit() [sorted]:");for(let s of n)console.debug(`	range=${JSON.stringify(s.range)}, text='${s.text}', isReplace=${s.isReplace}`);let i=e.getTextDocument(await t.window.buffer),o=[];for(let s of n)o.push({range:s.range,rangeOffset:i.offsetAt(s.range.start),rangeLength:i.offsetAt(s.range.end)-i.offsetAt(s.range.start),text:s.text});Kr().emitEvent("onDidChangeTextDocument",{document:i,contentChanges:o});for(let s of n){let{range:l,text:u,isReplace:m}=s;u===""?await bF(t,l):l.isEmpty&&!m?await wF(t,l.start,u):await p7(t,l,u)}return await e.updateTextEditor(),!0}async function bF(t,e){console.debug(`neovimDelete(): range=${JSON.stringify(e)}`);let r=await t.window.buffer,n=(await r.getLines({start:e.end.line,end:e.end.line+1,strictIndexing:!0}))[0],i=n.slice(e.end.character);if(e.start.line===e.end.line){let l=n.slice(0,e.start.character)+i;await r.setLines(l,{start:e.start.line,end:e.start.line+1,strictIndexing:!0});return}if(e.start.character===0){await r.setLines(i,{start:e.start.line,end:e.end.line+1,strictIndexing:!0});return}let o=(await r.getLines({start:e.start.line,end:e.start.line+1,strictIndexing:!0}))[0],s=o.slice(0,e.start.character);if(e.start.character<=o.length){await r.setLines(s+i,{start:e.start.line,end:e.end.line+1,strictIndexing:!0});return}await r.setLines([s,i],{start:e.start.line,end:e.end.line+1,strictIndexing:!0})}async function wF(t,e,r){console.debug(`neovimInsert(): position=${JSON.stringify(e)}, text='${r}'`);let n=r.replace(/(?:\r\n|\r|\n)/g,`
`).split(`
`),i=await t.window.buffer,o=(await i.getLines({start:e.line,end:e.line+1,strictIndexing:!0}))[0],s=o.slice(0,e.character),l=o.slice(e.character);if(n.length===1){let d=s+n[0]+l;await i.setLines(d,{start:e.line,end:e.line+1,strictIndexing:!0});return}let u=s+n[0],m=n[n.length-1]+l;await i.setLines([u,...n.slice(1,n.length-1),m],{start:e.line,end:e.line+1,strictIndexing:!0})}async function p7(t,e,r){console.debug(`neovimReplace(): range=${JSON.stringify(e)}, text='${r}'`),await bF(t,e),await wF(t,e.start,r)}function SF(t){return t.range.isEmpty&&!t.isReplace}function vF(t){return t.text!==""&&!!(!t.range.isEmpty||t.isReplace)}function EF(t){return Kr().onEvent("onDidChangeTextDocument",t),RF()}function _F(t,e,r){return Kr().onEvent("onDidOpenTextDocument",t),RF()}function RF(){return{dispose(){}}}var uu=class{constructor(){this.data={...fm}}get(e){return this.data[e]}set(e,r){return this.data[e]=r,Promise.resolve()}};var DI=Hr(Vv(),1);var pu=class{async showMessage(e,r,n,...i){}};async function kF(t,e){let r=e.activeTextEditor,n=await t.window,i=await Ch(n,t),o=r.document.getText(i[0]);await Oh(o,t)}async function AF(t,e){await hF(t)}var Hh=class{constructor(e,r,n,i,o,s,l){this.id=e;this.client=r;this.neovimIDE=n;this.window=i;this._document=o,this._selections=l,this._visibleRanges=s}get document(){return this._document}updateDocument(e,r,n,i){if(n)this._document=n;else if(i)this._document.update(i);else throw Error("updateDocument(): invalid arguments");return this._selections=r,this._visibleRanges=e,this._document}get selections(){return this._selections}async setSelections(e){this._selections=e,await mF(this.client,e)}get visibleRanges(){return this._visibleRanges}get options(){throw Error("get options Not implemented")}set options(e){throw Error("set options Not implemented")}get isActive(){return!0}isEqual(e){return this.id===e.id}async revealRange(e){}revealLine(e,r){throw Error("revealLine Not implemented")}async edit(e){return await Wv(this.client,this.neovimIDE,this.window,e)}focus(){return Promise.resolve()}editNewNotebookCellAbove(){throw Error("editNewNotebookCellAbove Not implemented")}editNewNotebookCellBelow(){throw Error("editNewNotebookCellBelow Not implemented")}openLink(e,r){throw Error("openLink Not implemented")}fold(e){throw Error("fold Not implemented")}unfold(e){throw Error("unfold Not implemented")}toggleBreakpoint(e){throw Error("toggleBreakpoint Not implemented")}async toggleLineComment(e){throw Error("toggleLineComment Not implemented")}async clipboardCopy(e){await kF(this.client,this.neovimIDE)}async clipboardPaste(){await AF(this.client,this.neovimIDE)}async indentLine(e){throw Error("indentLine Not implemented")}async outdentLine(e){throw Error("outdentLine Not implemented")}async insertLineAfter(e){throw Error("insertLineAfter Not implemented")}insertSnippet(e,r){throw Error("insertSnippet Not implemented")}async rename(e){throw Error("rename Not implemented")}async showReferences(e){throw Error("showReferences Not implemented")}async quickFix(e){throw Error("quickFix Not implemented")}async revealDefinition(e){throw Error("revealDefinition Not implemented")}async revealTypeDefinition(e){throw Error("revealTypeDefinition Not implemented")}async showHover(e){throw Error("showHover Not implemented")}async showDebugHover(e){throw Error("showDebugHover Not implemented")}async extractVariable(e){throw Error("extractVariable Not implemented")}async gitAccept(e){throw Error("gitAccept Not implemented")}async gitRevert(e){throw Error("gitRevert Not implemented")}async gitStage(e){throw Error("gitStage Not implemented")}async gitUnstage(e){throw Error("gitUnstage Not implemented")}};var lw=Hr(require("path"),1);var PF;(()=>{"use strict";var t={975:C=>{function A(L){if(typeof L!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(L))}function q(L,N){for(var j,X="",Q=0,te=-1,Te=0,be=0;be<=L.length;++be){if(be<L.length)j=L.charCodeAt(be);else{if(j===47)break;j=47}if(j===47){if(!(te===be-1||Te===1))if(te!==be-1&&Te===2){if(X.length<2||Q!==2||X.charCodeAt(X.length-1)!==46||X.charCodeAt(X.length-2)!==46){if(X.length>2){var qe=X.lastIndexOf("/");if(qe!==X.length-1){qe===-1?(X="",Q=0):Q=(X=X.slice(0,qe)).length-1-X.lastIndexOf("/"),te=be,Te=0;continue}}else if(X.length===2||X.length===1){X="",Q=0,te=be,Te=0;continue}}N&&(X.length>0?X+="/..":X="..",Q=2)}else X.length>0?X+="/"+L.slice(te+1,be):X=L.slice(te+1,be),Q=be-te-1;te=be,Te=0}else j===46&&Te!==-1?++Te:Te=-1}return X}var Z={resolve:function(){for(var L,N="",j=!1,X=arguments.length-1;X>=-1&&!j;X--){var Q;X>=0?Q=arguments[X]:(L===void 0&&(L=process.cwd()),Q=L),A(Q),Q.length!==0&&(N=Q+"/"+N,j=Q.charCodeAt(0)===47)}return N=q(N,!j),j?N.length>0?"/"+N:"/":N.length>0?N:"."},normalize:function(L){if(A(L),L.length===0)return".";var N=L.charCodeAt(0)===47,j=L.charCodeAt(L.length-1)===47;return(L=q(L,!N)).length!==0||N||(L="."),L.length>0&&j&&(L+="/"),N?"/"+L:L},isAbsolute:function(L){return A(L),L.length>0&&L.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var L,N=0;N<arguments.length;++N){var j=arguments[N];A(j),j.length>0&&(L===void 0?L=j:L+="/"+j)}return L===void 0?".":Z.normalize(L)},relative:function(L,N){if(A(L),A(N),L===N||(L=Z.resolve(L))===(N=Z.resolve(N)))return"";for(var j=1;j<L.length&&L.charCodeAt(j)===47;++j);for(var X=L.length,Q=X-j,te=1;te<N.length&&N.charCodeAt(te)===47;++te);for(var Te=N.length-te,be=Q<Te?Q:Te,qe=-1,Oe=0;Oe<=be;++Oe){if(Oe===be){if(Te>be){if(N.charCodeAt(te+Oe)===47)return N.slice(te+Oe+1);if(Oe===0)return N.slice(te+Oe)}else Q>be&&(L.charCodeAt(j+Oe)===47?qe=Oe:Oe===0&&(qe=0));break}var ft=L.charCodeAt(j+Oe);if(ft!==N.charCodeAt(te+Oe))break;ft===47&&(qe=Oe)}var Wt="";for(Oe=j+qe+1;Oe<=X;++Oe)Oe!==X&&L.charCodeAt(Oe)!==47||(Wt.length===0?Wt+="..":Wt+="/..");return Wt.length>0?Wt+N.slice(te+qe):(te+=qe,N.charCodeAt(te)===47&&++te,N.slice(te))},_makeLong:function(L){return L},dirname:function(L){if(A(L),L.length===0)return".";for(var N=L.charCodeAt(0),j=N===47,X=-1,Q=!0,te=L.length-1;te>=1;--te)if((N=L.charCodeAt(te))===47){if(!Q){X=te;break}}else Q=!1;return X===-1?j?"/":".":j&&X===1?"//":L.slice(0,X)},basename:function(L,N){if(N!==void 0&&typeof N!="string")throw new TypeError('"ext" argument must be a string');A(L);var j,X=0,Q=-1,te=!0;if(N!==void 0&&N.length>0&&N.length<=L.length){if(N.length===L.length&&N===L)return"";var Te=N.length-1,be=-1;for(j=L.length-1;j>=0;--j){var qe=L.charCodeAt(j);if(qe===47){if(!te){X=j+1;break}}else be===-1&&(te=!1,be=j+1),Te>=0&&(qe===N.charCodeAt(Te)?--Te==-1&&(Q=j):(Te=-1,Q=be))}return X===Q?Q=be:Q===-1&&(Q=L.length),L.slice(X,Q)}for(j=L.length-1;j>=0;--j)if(L.charCodeAt(j)===47){if(!te){X=j+1;break}}else Q===-1&&(te=!1,Q=j+1);return Q===-1?"":L.slice(X,Q)},extname:function(L){A(L);for(var N=-1,j=0,X=-1,Q=!0,te=0,Te=L.length-1;Te>=0;--Te){var be=L.charCodeAt(Te);if(be!==47)X===-1&&(Q=!1,X=Te+1),be===46?N===-1?N=Te:te!==1&&(te=1):N!==-1&&(te=-1);else if(!Q){j=Te+1;break}}return N===-1||X===-1||te===0||te===1&&N===X-1&&N===j+1?"":L.slice(N,X)},format:function(L){if(L===null||typeof L!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof L);return function(N,j){var X=j.dir||j.root,Q=j.base||(j.name||"")+(j.ext||"");return X?X===j.root?X+Q:X+"/"+Q:Q}(0,L)},parse:function(L){A(L);var N={root:"",dir:"",base:"",ext:"",name:""};if(L.length===0)return N;var j,X=L.charCodeAt(0),Q=X===47;Q?(N.root="/",j=1):j=0;for(var te=-1,Te=0,be=-1,qe=!0,Oe=L.length-1,ft=0;Oe>=j;--Oe)if((X=L.charCodeAt(Oe))!==47)be===-1&&(qe=!1,be=Oe+1),X===46?te===-1?te=Oe:ft!==1&&(ft=1):te!==-1&&(ft=-1);else if(!qe){Te=Oe+1;break}return te===-1||be===-1||ft===0||ft===1&&te===be-1&&te===Te+1?be!==-1&&(N.base=N.name=Te===0&&Q?L.slice(1,be):L.slice(Te,be)):(Te===0&&Q?(N.name=L.slice(1,te),N.base=L.slice(1,be)):(N.name=L.slice(Te,te),N.base=L.slice(Te,be)),N.ext=L.slice(te,be)),Te>0?N.dir=L.slice(0,Te-1):Q&&(N.dir="/"),N},sep:"/",delimiter:":",win32:null,posix:null};Z.posix=Z,C.exports=Z}},e={};function r(C){var A=e[C];if(A!==void 0)return A.exports;var q=e[C]={exports:{}};return t[C](q,q.exports,r),q.exports}r.d=(C,A)=>{for(var q in A)r.o(A,q)&&!r.o(C,q)&&Object.defineProperty(C,q,{enumerable:!0,get:A[q]})},r.o=(C,A)=>Object.prototype.hasOwnProperty.call(C,A),r.r=C=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(C,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(C,"__esModule",{value:!0})};var n={};let i;r.r(n),r.d(n,{URI:()=>y,Utils:()=>H}),typeof process=="object"?i=process.platform==="win32":typeof navigator=="object"&&(i=navigator.userAgent.indexOf("Windows")>=0);let o=/^\w[\w\d+.-]*$/,s=/^\//,l=/^\/\//;function u(C,A){if(!C.scheme&&A)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${C.authority}", path: "${C.path}", query: "${C.query}", fragment: "${C.fragment}"}`);if(C.scheme&&!o.test(C.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(C.path){if(C.authority){if(!s.test(C.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(l.test(C.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}let m="",d="/",g=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class y{static isUri(A){return A instanceof y||!!A&&typeof A.authority=="string"&&typeof A.fragment=="string"&&typeof A.path=="string"&&typeof A.query=="string"&&typeof A.scheme=="string"&&typeof A.fsPath=="string"&&typeof A.with=="function"&&typeof A.toString=="function"}scheme;authority;path;query;fragment;constructor(A,q,Z,L,N,j=!1){typeof A=="object"?(this.scheme=A.scheme||m,this.authority=A.authority||m,this.path=A.path||m,this.query=A.query||m,this.fragment=A.fragment||m):(this.scheme=function(X,Q){return X||Q?X:"file"}(A,j),this.authority=q||m,this.path=function(X,Q){switch(X){case"https":case"http":case"file":Q?Q[0]!==d&&(Q=d+Q):Q=d}return Q}(this.scheme,Z||m),this.query=L||m,this.fragment=N||m,u(this,j))}get fsPath(){return z(this,!1)}with(A){if(!A)return this;let{scheme:q,authority:Z,path:L,query:N,fragment:j}=A;return q===void 0?q=this.scheme:q===null&&(q=m),Z===void 0?Z=this.authority:Z===null&&(Z=m),L===void 0?L=this.path:L===null&&(L=m),N===void 0?N=this.query:N===null&&(N=m),j===void 0?j=this.fragment:j===null&&(j=m),q===this.scheme&&Z===this.authority&&L===this.path&&N===this.query&&j===this.fragment?this:new w(q,Z,L,N,j)}static parse(A,q=!1){let Z=g.exec(A);return Z?new w(Z[2]||m,fe(Z[4]||m),fe(Z[5]||m),fe(Z[7]||m),fe(Z[9]||m),q):new w(m,m,m,m,m)}static file(A){let q=m;if(i&&(A=A.replace(/\\/g,d)),A[0]===d&&A[1]===d){let Z=A.indexOf(d,2);Z===-1?(q=A.substring(2),A=d):(q=A.substring(2,Z),A=A.substring(Z)||d)}return new w("file",q,A,m,m)}static from(A){let q=new w(A.scheme,A.authority,A.path,A.query,A.fragment);return u(q,!0),q}toString(A=!1){return ne(this,A)}toJSON(){return this}static revive(A){if(A){if(A instanceof y)return A;{let q=new w(A);return q._formatted=A.external,q._fsPath=A._sep===T?A.fsPath:null,q}}return A}}let T=i?1:void 0;class w extends y{_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=z(this,!1)),this._fsPath}toString(A=!1){return A?ne(this,!0):(this._formatted||(this._formatted=ne(this,!1)),this._formatted)}toJSON(){let A={$mid:1};return this._fsPath&&(A.fsPath=this._fsPath,A._sep=T),this._formatted&&(A.external=this._formatted),this.path&&(A.path=this.path),this.scheme&&(A.scheme=this.scheme),this.authority&&(A.authority=this.authority),this.query&&(A.query=this.query),this.fragment&&(A.fragment=this.fragment),A}}let E={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function U(C,A,q){let Z,L=-1;for(let N=0;N<C.length;N++){let j=C.charCodeAt(N);if(j>=97&&j<=122||j>=65&&j<=90||j>=48&&j<=57||j===45||j===46||j===95||j===126||A&&j===47||q&&j===91||q&&j===93||q&&j===58)L!==-1&&(Z+=encodeURIComponent(C.substring(L,N)),L=-1),Z!==void 0&&(Z+=C.charAt(N));else{Z===void 0&&(Z=C.substr(0,N));let X=E[j];X!==void 0?(L!==-1&&(Z+=encodeURIComponent(C.substring(L,N)),L=-1),Z+=X):L===-1&&(L=N)}}return L!==-1&&(Z+=encodeURIComponent(C.substring(L))),Z!==void 0?Z:C}function V(C){let A;for(let q=0;q<C.length;q++){let Z=C.charCodeAt(q);Z===35||Z===63?(A===void 0&&(A=C.substr(0,q)),A+=E[Z]):A!==void 0&&(A+=C[q])}return A!==void 0?A:C}function z(C,A){let q;return q=C.authority&&C.path.length>1&&C.scheme==="file"?`//${C.authority}${C.path}`:C.path.charCodeAt(0)===47&&(C.path.charCodeAt(1)>=65&&C.path.charCodeAt(1)<=90||C.path.charCodeAt(1)>=97&&C.path.charCodeAt(1)<=122)&&C.path.charCodeAt(2)===58?A?C.path.substr(1):C.path[1].toLowerCase()+C.path.substr(2):C.path,i&&(q=q.replace(/\//g,"\\")),q}function ne(C,A){let q=A?V:U,Z="",{scheme:L,authority:N,path:j,query:X,fragment:Q}=C;if(L&&(Z+=L,Z+=":"),(N||L==="file")&&(Z+=d,Z+=d),N){let te=N.indexOf("@");if(te!==-1){let Te=N.substr(0,te);N=N.substr(te+1),te=Te.lastIndexOf(":"),te===-1?Z+=q(Te,!1,!1):(Z+=q(Te.substr(0,te),!1,!1),Z+=":",Z+=q(Te.substr(te+1),!1,!0)),Z+="@"}N=N.toLowerCase(),te=N.lastIndexOf(":"),te===-1?Z+=q(N,!1,!0):(Z+=q(N.substr(0,te),!1,!0),Z+=N.substr(te))}if(j){if(j.length>=3&&j.charCodeAt(0)===47&&j.charCodeAt(2)===58){let te=j.charCodeAt(1);te>=65&&te<=90&&(j=`/${String.fromCharCode(te+32)}:${j.substr(3)}`)}else if(j.length>=2&&j.charCodeAt(1)===58){let te=j.charCodeAt(0);te>=65&&te<=90&&(j=`${String.fromCharCode(te+32)}:${j.substr(2)}`)}Z+=q(j,!0,!1)}return X&&(Z+="?",Z+=q(X,!1,!1)),Q&&(Z+="#",Z+=A?Q:U(Q,!1,!1)),Z}function se(C){try{return decodeURIComponent(C)}catch{return C.length>3?C.substr(0,3)+se(C.substr(3)):C}}let ce=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function fe(C){return C.match(ce)?C.replace(ce,A=>se(A)):C}var ct=r(975);let Vt=ct.posix||ct,mt="/";var H;(function(C){C.joinPath=function(A,...q){return A.with({path:Vt.join(A.path,...q)})},C.resolvePath=function(A,...q){let Z=A.path,L=!1;Z[0]!==mt&&(Z=mt+Z,L=!0);let N=Vt.resolve(Z,...q);return L&&N[0]===mt&&!A.authority&&(N=N.substring(1)),A.with({path:N})},C.dirname=function(A){if(A.path.length===0||A.path===mt)return A;let q=Vt.dirname(A.path);return q.length===1&&q.charCodeAt(0)===46&&(q=""),A.with({path:q})},C.basename=function(A){return Vt.basename(A.path)},C.extname=function(A){return Vt.extname(A.path)}})(H||(H={})),PF=n})();var{URI:MF,Utils:G1e}=PF;var ZF=Hr($F(),1);var fu=t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>65536)throw new TypeError("pattern is too long")};var T7={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},du=t=>t.replace(/[[\]\\-]/g,"\\$&"),S7=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),jF=t=>t.join(""),zF=(t,e)=>{let r=e;if(t.charAt(r)!=="[")throw new Error("not in a brace expression");let n=[],i=[],o=r+1,s=!1,l=!1,u=!1,m=!1,d=r,g="";e:for(;o<t.length;){let E=t.charAt(o);if((E==="!"||E==="^")&&o===r+1){m=!0,o++;continue}if(E==="]"&&s&&!u){d=o+1;break}if(s=!0,E==="\\"&&!u){u=!0,o++;continue}if(E==="["&&!u){for(let[U,[V,z,ne]]of Object.entries(T7))if(t.startsWith(U,o)){if(g)return["$.",!1,t.length-r,!0];o+=U.length,ne?i.push(V):n.push(V),l=l||z;continue e}}if(u=!1,g){E>g?n.push(du(g)+"-"+du(E)):E===g&&n.push(du(E)),g="",o++;continue}if(t.startsWith("-]",o+1)){n.push(du(E+"-")),o+=2;continue}if(t.startsWith("-",o+1)){g=E,o+=2;continue}n.push(du(E)),o++}if(d<o)return["",!1,0,!1];if(!n.length&&!i.length)return["$.",!1,t.length-r,!0];if(i.length===0&&n.length===1&&/^\\?.$/.test(n[0])&&!m){let E=n[0].length===2?n[0].slice(-1):n[0];return[S7(E),!1,d-r,!1]}let y="["+(m?"^":"")+jF(n)+"]",T="["+(m?"":"^")+jF(i)+"]";return[n.length&&i.length?"("+y+"|"+T+")":n.length?y:T,l,d-r,!0]};var On=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");var v7=new Set(["!","?","+","*","@"]),qF=t=>v7.has(t),b7="(?!(?:^|/)\\.\\.?(?:$|/))",Bh="(?!\\.)",w7=new Set(["[","."]),E7=new Set(["..","."]),_7=new Set("().*{}+?[]^$\\!"),R7=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),zv="[^/]",GF=zv+"*?",KF=zv+"+?",uc=class t{type;#e;#t;#o=!1;#n=[];#a;#S;#l;#p=!1;#s;#c;#i=!1;constructor(e,r,n={}){this.type=e,e&&(this.#t=!0),this.#a=r,this.#e=this.#a?this.#a.#e:this,this.#s=this.#e===this?n:this.#e.#s,this.#l=this.#e===this?[]:this.#e.#l,e==="!"&&!this.#e.#p&&this.#l.push(this),this.#S=this.#a?this.#a.#n.length:0}get hasMagic(){if(this.#t!==void 0)return this.#t;for(let e of this.#n)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#t=!0;return this.#t}toString(){return this.#c!==void 0?this.#c:this.type?this.#c=this.type+"("+this.#n.map(e=>String(e)).join("|")+")":this.#c=this.#n.map(e=>String(e)).join("")}#h(){if(this!==this.#e)throw new Error("should only call on root");if(this.#p)return this;this.toString(),this.#p=!0;let e;for(;e=this.#l.pop();){if(e.type!=="!")continue;let r=e,n=r.#a;for(;n;){for(let i=r.#S+1;!n.type&&i<n.#n.length;i++)for(let o of e.#n){if(typeof o=="string")throw new Error("string part in extglob AST??");o.copyIn(n.#n[i])}r=n,n=r.#a}}return this}push(...e){for(let r of e)if(r!==""){if(typeof r!="string"&&!(r instanceof t&&r.#a===this))throw new Error("invalid part: "+r);this.#n.push(r)}}toJSON(){let e=this.type===null?this.#n.slice().map(r=>typeof r=="string"?r:r.toJSON()):[this.type,...this.#n.map(r=>r.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#p&&this.#a?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#a?.isStart())return!1;if(this.#S===0)return!0;let e=this.#a;for(let r=0;r<this.#S;r++){let n=e.#n[r];if(!(n instanceof t&&n.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#a?.type==="!")return!0;if(!this.#a?.isEnd())return!1;if(!this.type)return this.#a?.isEnd();let e=this.#a?this.#a.#n.length:0;return this.#S===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let r=new t(this.type,e);for(let n of this.#n)r.copyIn(n);return r}static#y(e,r,n,i){let o=!1,s=!1,l=-1,u=!1;if(r.type===null){let T=n,w="";for(;T<e.length;){let E=e.charAt(T++);if(o||E==="\\"){o=!o,w+=E;continue}if(s){T===l+1?(E==="^"||E==="!")&&(u=!0):E==="]"&&!(T===l+2&&u)&&(s=!1),w+=E;continue}else if(E==="["){s=!0,l=T,u=!1,w+=E;continue}if(!i.noext&&qF(E)&&e.charAt(T)==="("){r.push(w),w="";let U=new t(E,r);T=t.#y(e,U,T,i),r.push(U);continue}w+=E}return r.push(w),T}let m=n+1,d=new t(null,r),g=[],y="";for(;m<e.length;){let T=e.charAt(m++);if(o||T==="\\"){o=!o,y+=T;continue}if(s){m===l+1?(T==="^"||T==="!")&&(u=!0):T==="]"&&!(m===l+2&&u)&&(s=!1),y+=T;continue}else if(T==="["){s=!0,l=m,u=!1,y+=T;continue}if(qF(T)&&e.charAt(m)==="("){d.push(y),y="";let w=new t(T,d);d.push(w),m=t.#y(e,w,m,i);continue}if(T==="|"){d.push(y),y="",g.push(d),d=new t(null,r);continue}if(T===")")return y===""&&r.#n.length===0&&(r.#i=!0),d.push(y),y="",r.push(...g,d),m;y+=T}return r.type=null,r.#t=void 0,r.#n=[e.substring(n-1)],m}static fromGlob(e,r={}){let n=new t(null,void 0,r);return t.#y(e,n,0,r),n}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[r,n,i,o]=this.toRegExpSource();if(!(i||this.#t||this.#s.nocase&&!this.#s.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return n;let l=(this.#s.nocase?"i":"")+(o?"u":"");return Object.assign(new RegExp(`^${r}$`,l),{_src:r,_glob:e})}get options(){return this.#s}toRegExpSource(e){let r=e??!!this.#s.dot;if(this.#e===this&&this.#h(),!this.type){let u=this.isStart()&&this.isEnd(),m=this.#n.map(T=>{let[w,E,U,V]=typeof T=="string"?t.#m(T,this.#t,u):T.toRegExpSource(e);return this.#t=this.#t||U,this.#o=this.#o||V,w}).join(""),d="";if(this.isStart()&&typeof this.#n[0]=="string"&&!(this.#n.length===1&&E7.has(this.#n[0]))){let w=w7,E=r&&w.has(m.charAt(0))||m.startsWith("\\.")&&w.has(m.charAt(2))||m.startsWith("\\.\\.")&&w.has(m.charAt(4)),U=!r&&!e&&w.has(m.charAt(0));d=E?b7:U?Bh:""}let g="";return this.isEnd()&&this.#e.#p&&this.#a?.type==="!"&&(g="(?:$|\\/)"),[d+m+g,On(m),this.#t=!!this.#t,this.#o]}let n=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",o=this.#f(r);if(this.isStart()&&this.isEnd()&&!o&&this.type!=="!"){let u=this.toString();return this.#n=[u],this.type=null,this.#t=void 0,[u,On(this.toString()),!1,!1]}let s=!n||e||r||!Bh?"":this.#f(!0);s===o&&(s=""),s&&(o=`(?:${o})(?:${s})*?`);let l="";if(this.type==="!"&&this.#i)l=(this.isStart()&&!r?Bh:"")+KF;else{let u=this.type==="!"?"))"+(this.isStart()&&!r&&!e?Bh:"")+GF+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&s?")":this.type==="*"&&s?")?":`)${this.type}`;l=i+o+u}return[l,On(o),this.#t=!!this.#t,this.#o]}#f(e){return this.#n.map(r=>{if(typeof r=="string")throw new Error("string type in extglob ast??");let[n,i,o,s]=r.toRegExpSource(e);return this.#o=this.#o||s,n}).filter(r=>!(this.isStart()&&this.isEnd())||!!r).join("|")}static#m(e,r,n=!1){let i=!1,o="",s=!1;for(let l=0;l<e.length;l++){let u=e.charAt(l);if(i){i=!1,o+=(_7.has(u)?"\\":"")+u;continue}if(u==="\\"){l===e.length-1?o+="\\\\":i=!0;continue}if(u==="["){let[m,d,g,y]=zF(e,l);if(g){o+=m,s=s||d,l+=g-1,r=r||y;continue}}if(u==="*"){n&&e==="*"?o+=KF:o+=GF,r=!0;continue}if(u==="?"){o+=zv,r=!0;continue}o+=R7(u)}return[o,On(e),!!r,s]}};var pc=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&");var hr=(t,e,r={})=>(fu(e),!r.nocomment&&e.charAt(0)==="#"?!1:new Qr(e,r).match(t)),k7=/^\*+([^+@!?\*\[\(]*)$/,A7=t=>e=>!e.startsWith(".")&&e.endsWith(t),P7=t=>e=>e.endsWith(t),M7=t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),D7=t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),F7=/^\*+\.\*+$/,L7=t=>!t.startsWith(".")&&t.includes("."),I7=t=>t!=="."&&t!==".."&&t.includes("."),C7=/^\.\*+$/,O7=t=>t!=="."&&t!==".."&&t.startsWith("."),N7=/^\*+$/,U7=t=>t.length!==0&&!t.startsWith("."),H7=t=>t.length!==0&&t!=="."&&t!=="..",B7=/^\?+([^+@!?\*\[\(]*)?$/,V7=([t,e=""])=>{let r=XF([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},W7=([t,e=""])=>{let r=JF([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},$7=([t,e=""])=>{let r=JF([t]);return e?n=>r(n)&&n.endsWith(e):r},j7=([t,e=""])=>{let r=XF([t]);return e?n=>r(n)&&n.endsWith(e):r},XF=([t])=>{let e=t.length;return r=>r.length===e&&!r.startsWith(".")},JF=([t])=>{let e=t.length;return r=>r.length===e&&r!=="."&&r!==".."},eL=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",QF={win32:{sep:"\\"},posix:{sep:"/"}},z7=eL==="win32"?QF.win32.sep:QF.posix.sep;hr.sep=z7;var Xt=Symbol("globstar **");hr.GLOBSTAR=Xt;var q7="[^/]",G7=q7+"*?",K7="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",Q7="(?:(?!(?:\\/|^)\\.).)*?",Y7=(t,e={})=>r=>hr(r,t,e);hr.filter=Y7;var Tn=(t,e={})=>Object.assign({},t,e),Z7=t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return hr;let e=hr;return Object.assign((n,i,o={})=>e(n,i,Tn(t,o)),{Minimatch:class extends e.Minimatch{constructor(i,o={}){super(i,Tn(t,o))}static defaults(i){return e.defaults(Tn(t,i)).Minimatch}},AST:class extends e.AST{constructor(i,o,s={}){super(i,o,Tn(t,s))}static fromGlob(i,o={}){return e.AST.fromGlob(i,Tn(t,o))}},unescape:(n,i={})=>e.unescape(n,Tn(t,i)),escape:(n,i={})=>e.escape(n,Tn(t,i)),filter:(n,i={})=>e.filter(n,Tn(t,i)),defaults:n=>e.defaults(Tn(t,n)),makeRe:(n,i={})=>e.makeRe(n,Tn(t,i)),braceExpand:(n,i={})=>e.braceExpand(n,Tn(t,i)),match:(n,i,o={})=>e.match(n,i,Tn(t,o)),sep:e.sep,GLOBSTAR:Xt})};hr.defaults=Z7;var tL=(t,e={})=>(fu(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:(0,ZF.default)(t));hr.braceExpand=tL;var X7=(t,e={})=>new Qr(t,e).makeRe();hr.makeRe=X7;var J7=(t,e,r={})=>{let n=new Qr(e,r);return t=t.filter(i=>n.match(i)),n.options.nonull&&!t.length&&t.push(e),t};hr.match=J7;var YF=/[?*]|[+@!]\(.*?\)|\[|\]/,e8=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Qr=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,r={}){fu(e),r=r||{},this.options=r,this.pattern=e,this.platform=r.platform||eL,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!r.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!r.nonegate,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=r.windowsNoMagicRoot!==void 0?r.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let r of e)if(typeof r!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],r.debug&&(this.debug=(...o)=>console.error(...o)),this.debug(this.pattern,this.globSet);let n=this.globSet.map(o=>this.slashSplit(o));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let i=this.globParts.map((o,s,l)=>{if(this.isWindows&&this.windowsNoMagicRoot){let u=o[0]===""&&o[1]===""&&(o[2]==="?"||!YF.test(o[2]))&&!YF.test(o[3]),m=/^[a-z]:/i.test(o[0]);if(u)return[...o.slice(0,4),...o.slice(4).map(d=>this.parse(d))];if(m)return[o[0],...o.slice(1).map(d=>this.parse(d))]}return o.map(u=>this.parse(u))});if(this.debug(this.pattern,i),this.set=i.filter(o=>o.indexOf(!1)===-1),this.isWindows)for(let o=0;o<this.set.length;o++){let s=this.set[o];s[0]===""&&s[1]===""&&this.globParts[o][2]==="?"&&typeof s[3]=="string"&&/^[a-z]:$/i.test(s[3])&&(s[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let n=0;n<e.length;n++)for(let i=0;i<e[n].length;i++)e[n][i]==="**"&&(e[n][i]="*");let{optimizationLevel:r=1}=this.options;return r>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):r>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(r=>{let n=-1;for(;(n=r.indexOf("**",n+1))!==-1;){let i=n;for(;r[i+1]==="**";)i++;i!==n&&r.splice(n,i-n)}return r})}levelOneOptimize(e){return e.map(r=>(r=r.reduce((n,i)=>{let o=n[n.length-1];return i==="**"&&o==="**"?n:i===".."&&o&&o!==".."&&o!=="."&&o!=="**"?(n.pop(),n):(n.push(i),n)},[]),r.length===0?[""]:r))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let r=!1;do{if(r=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let o=e[i];i===1&&o===""&&e[0]===""||(o==="."||o==="")&&(r=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(r=!0,e.pop())}let n=0;for(;(n=e.indexOf("..",n+1))!==-1;){let i=e[n-1];i&&i!=="."&&i!==".."&&i!=="**"&&(r=!0,e.splice(n-1,2),n-=2)}}while(r);return e.length===0?[""]:e}firstPhasePreProcess(e){let r=!1;do{r=!1;for(let n of e){let i=-1;for(;(i=n.indexOf("**",i+1))!==-1;){let s=i;for(;n[s+1]==="**";)s++;s>i&&n.splice(i+1,s-i);let l=n[i+1],u=n[i+2],m=n[i+3];if(l!==".."||!u||u==="."||u===".."||!m||m==="."||m==="..")continue;r=!0,n.splice(i,1);let d=n.slice(0);d[i]="**",e.push(d),i--}if(!this.preserveMultipleSlashes){for(let s=1;s<n.length-1;s++){let l=n[s];s===1&&l===""&&n[0]===""||(l==="."||l==="")&&(r=!0,n.splice(s,1),s--)}n[0]==="."&&n.length===2&&(n[1]==="."||n[1]==="")&&(r=!0,n.pop())}let o=0;for(;(o=n.indexOf("..",o+1))!==-1;){let s=n[o-1];if(s&&s!=="."&&s!==".."&&s!=="**"){r=!0;let u=o===1&&n[o+1]==="**"?["."]:[];n.splice(o-1,2,...u),n.length===0&&n.push(""),o-=2}}}}while(r);return e}secondPhasePreProcess(e){for(let r=0;r<e.length-1;r++)for(let n=r+1;n<e.length;n++){let i=this.partsMatch(e[r],e[n],!this.preserveMultipleSlashes);if(i){e[r]=[],e[n]=i;break}}return e.filter(r=>r.length)}partsMatch(e,r,n=!1){let i=0,o=0,s=[],l="";for(;i<e.length&&o<r.length;)if(e[i]===r[o])s.push(l==="b"?r[o]:e[i]),i++,o++;else if(n&&e[i]==="**"&&r[o]===e[i+1])s.push(e[i]),i++;else if(n&&r[o]==="**"&&e[i]===r[o+1])s.push(r[o]),o++;else if(e[i]==="*"&&r[o]&&(this.options.dot||!r[o].startsWith("."))&&r[o]!=="**"){if(l==="b")return!1;l="a",s.push(e[i]),i++,o++}else if(r[o]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(l==="a")return!1;l="b",s.push(r[o]),i++,o++}else return!1;return e.length===r.length&&s}parseNegate(){if(this.nonegate)return;let e=this.pattern,r=!1,n=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)r=!r,n++;n&&(this.pattern=e.slice(n)),this.negate=r}matchOne(e,r,n=!1){let i=this.options;if(this.isWindows){let E=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),U=!E&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),V=typeof r[0]=="string"&&/^[a-z]:$/i.test(r[0]),z=!V&&r[0]===""&&r[1]===""&&r[2]==="?"&&typeof r[3]=="string"&&/^[a-z]:$/i.test(r[3]),ne=U?3:E?0:void 0,se=z?3:V?0:void 0;if(typeof ne=="number"&&typeof se=="number"){let[ce,fe]=[e[ne],r[se]];ce.toLowerCase()===fe.toLowerCase()&&(r[se]=ce,se>ne?r=r.slice(se):ne>se&&(e=e.slice(ne)))}}let{optimizationLevel:o=1}=this.options;o>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var s=0,l=0,u=e.length,m=r.length;s<u&&l<m;s++,l++){this.debug("matchOne loop");var d=r[l],g=e[s];if(this.debug(r,d,g),d===!1)return!1;if(d===Xt){this.debug("GLOBSTAR",[r,d,g]);var y=s,T=l+1;if(T===m){for(this.debug("** at the end");s<u;s++)if(e[s]==="."||e[s]===".."||!i.dot&&e[s].charAt(0)===".")return!1;return!0}for(;y<u;){var w=e[y];if(this.debug(`
globstar while`,e,y,r,T,w),this.matchOne(e.slice(y),r.slice(T),n))return this.debug("globstar found match!",y,u,w),!0;if(w==="."||w===".."||!i.dot&&w.charAt(0)==="."){this.debug("dot detected!",e,y,r,T);break}this.debug("globstar swallow a segment, and continue"),y++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,y,r,T),y===u))}let E;if(typeof d=="string"?(E=g===d,this.debug("string match",d,g,E)):(E=d.test(g),this.debug("pattern match",d,g,E)),!E)return!1}if(s===u&&l===m)return!0;if(s===u)return n;if(l===m)return s===u-1&&e[s]==="";throw new Error("wtf?")}braceExpand(){return tL(this.pattern,this.options)}parse(e){fu(e);let r=this.options;if(e==="**")return Xt;if(e==="")return"";let n,i=null;(n=e.match(N7))?i=r.dot?H7:U7:(n=e.match(k7))?i=(r.nocase?r.dot?D7:M7:r.dot?P7:A7)(n[1]):(n=e.match(B7))?i=(r.nocase?r.dot?W7:V7:r.dot?$7:j7)(n):(n=e.match(F7))?i=r.dot?I7:L7:(n=e.match(C7))&&(i=O7);let o=uc.fromGlob(e,this.options).toMMPattern();return i&&typeof o=="object"&&Reflect.defineProperty(o,"test",{value:i}),o}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let r=this.options,n=r.noglobstar?G7:r.dot?K7:Q7,i=new Set(r.nocase?["i"]:[]),o=e.map(u=>{let m=u.map(d=>{if(d instanceof RegExp)for(let g of d.flags.split(""))i.add(g);return typeof d=="string"?e8(d):d===Xt?Xt:d._src});return m.forEach((d,g)=>{let y=m[g+1],T=m[g-1];d!==Xt||T===Xt||(T===void 0?y!==void 0&&y!==Xt?m[g+1]="(?:\\/|"+n+"\\/)?"+y:m[g]=n:y===void 0?m[g-1]=T+"(?:\\/|"+n+")?":y!==Xt&&(m[g-1]=T+"(?:\\/|\\/"+n+"\\/)"+y,m[g+1]=Xt))}),m.filter(d=>d!==Xt).join("/")}).join("|"),[s,l]=e.length>1?["(?:",")"]:["",""];o="^"+s+o+l+"$",this.negate&&(o="^(?!"+o+").+$");try{this.regexp=new RegExp(o,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;let n=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let o=this.set;this.debug(this.pattern,"set",o);let s=i[i.length-1];if(!s)for(let l=i.length-2;!s&&l>=0;l--)s=i[l];for(let l=0;l<o.length;l++){let u=o[l],m=i;if(n.matchBase&&u.length===1&&(m=[s]),this.matchOne(m,u,r))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return hr.defaults(e).Minimatch}};hr.AST=uc;hr.Minimatch=Qr;hr.escape=pc;hr.unescape=On;var _L=require("node:url");var mc=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,nL=new Set,qv=typeof process=="object"&&process?process:{},iL=(t,e,r,n)=>{typeof qv.emitWarning=="function"?qv.emitWarning(t,e,r,n):console.error(`[${r}] ${e}: ${t}`)},Vh=globalThis.AbortController,rL=globalThis.AbortSignal;if(typeof Vh>"u"){rL=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(n,i){this._onabort.push(i)}},Vh=class{constructor(){e()}signal=new rL;abort(n){if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(let i of this.signal._onabort)i(n);this.signal.onabort?.(n)}}};let t=qv.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{t&&(t=!1,iL("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var t8=t=>!nL.has(t),hOe=Symbol("type"),ko=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),oL=t=>ko(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?fc:null:null,fc=class extends Array{constructor(e){super(e),this.fill(0)}},Gv=class t{heap;length;static#e=!1;static create(e){let r=oL(e);if(!r)return[];t.#e=!0;let n=new t(e,r);return t.#e=!1,n}constructor(e,r){if(!t.#e)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},gu=class t{#e;#t;#o;#n;#a;#S;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#l;#p;#s;#c;#i;#h;#y;#f;#m;#w;#g;#E;#_;#T;#v;#b;#d;static unsafeExposeInternals(e){return{starts:e.#_,ttls:e.#T,sizes:e.#E,keyMap:e.#s,keyList:e.#c,valList:e.#i,next:e.#h,prev:e.#y,get head(){return e.#f},get tail(){return e.#m},free:e.#w,isBackgroundFetch:r=>e.#u(r),backgroundFetch:(r,n,i,o)=>e.#U(r,n,i,o),moveToTail:r=>e.#B(r),indexes:r=>e.#k(r),rindexes:r=>e.#A(r),isStale:r=>e.#x(r)}}get max(){return this.#e}get maxSize(){return this.#t}get calculatedSize(){return this.#p}get size(){return this.#l}get fetchMethod(){return this.#a}get memoMethod(){return this.#S}get dispose(){return this.#o}get disposeAfter(){return this.#n}constructor(e){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:s,updateAgeOnHas:l,allowStale:u,dispose:m,disposeAfter:d,noDisposeOnSet:g,noUpdateTTL:y,maxSize:T=0,maxEntrySize:w=0,sizeCalculation:E,fetchMethod:U,memoMethod:V,noDeleteOnFetchRejection:z,noDeleteOnStaleGet:ne,allowStaleOnFetchRejection:se,allowStaleOnFetchAbort:ce,ignoreFetchAbort:fe}=e;if(r!==0&&!ko(r))throw new TypeError("max option must be a nonnegative integer");let ct=r?oL(r):Array;if(!ct)throw new Error("invalid max value: "+r);if(this.#e=r,this.#t=T,this.maxEntrySize=w||this.#t,this.sizeCalculation=E,this.sizeCalculation){if(!this.#t&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(V!==void 0&&typeof V!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#S=V,U!==void 0&&typeof U!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#a=U,this.#b=!!U,this.#s=new Map,this.#c=new Array(r).fill(void 0),this.#i=new Array(r).fill(void 0),this.#h=new ct(r),this.#y=new ct(r),this.#f=0,this.#m=0,this.#w=Gv.create(r),this.#l=0,this.#p=0,typeof m=="function"&&(this.#o=m),typeof d=="function"?(this.#n=d,this.#g=[]):(this.#n=void 0,this.#g=void 0),this.#v=!!this.#o,this.#d=!!this.#n,this.noDisposeOnSet=!!g,this.noUpdateTTL=!!y,this.noDeleteOnFetchRejection=!!z,this.allowStaleOnFetchRejection=!!se,this.allowStaleOnFetchAbort=!!ce,this.ignoreFetchAbort=!!fe,this.maxEntrySize!==0){if(this.#t!==0&&!ko(this.#t))throw new TypeError("maxSize must be a positive integer if specified");if(!ko(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#M()}if(this.allowStale=!!u,this.noDeleteOnStaleGet=!!ne,this.updateAgeOnGet=!!s,this.updateAgeOnHas=!!l,this.ttlResolution=ko(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=n||0,this.ttl){if(!ko(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#P()}if(this.#e===0&&this.ttl===0&&this.#t===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#e&&!this.#t){let Vt="LRU_CACHE_UNBOUNDED";t8(Vt)&&(nL.add(Vt),iL("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",Vt,t))}}getRemainingTTL(e){return this.#s.has(e)?1/0:0}#P(){let e=new fc(this.#e),r=new fc(this.#e);this.#T=e,this.#_=r,this.#F=(o,s,l=mc.now())=>{if(r[o]=s!==0?l:0,e[o]=s,s!==0&&this.ttlAutopurge){let u=setTimeout(()=>{this.#x(o)&&this.#D(this.#c[o],"expire")},s+1);u.unref&&u.unref()}},this.#R=o=>{r[o]=e[o]!==0?mc.now():0},this.#r=(o,s)=>{if(e[s]){let l=e[s],u=r[s];if(!l||!u)return;o.ttl=l,o.start=u,o.now=n||i();let m=o.now-u;o.remainingTTL=l-m}};let n=0,i=()=>{let o=mc.now();if(this.ttlResolution>0){n=o;let s=setTimeout(()=>n=0,this.ttlResolution);s.unref&&s.unref()}return o};this.getRemainingTTL=o=>{let s=this.#s.get(o);if(s===void 0)return 0;let l=e[s],u=r[s];if(!l||!u)return 1/0;let m=(n||i())-u;return l-m},this.#x=o=>{let s=r[o],l=e[o];return!!l&&!!s&&(n||i())-s>l}}#R=()=>{};#r=()=>{};#F=()=>{};#x=()=>!1;#M(){let e=new fc(this.#e);this.#p=0,this.#E=e,this.#L=r=>{this.#p-=e[r],e[r]=0},this.#C=(r,n,i,o)=>{if(this.#u(n))return 0;if(!ko(i))if(o){if(typeof o!="function")throw new TypeError("sizeCalculation must be a function");if(i=o(n,r),!ko(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#I=(r,n,i)=>{if(e[r]=n,this.#t){let o=this.#t-e[r];for(;this.#p>o;)this.#N(!0)}this.#p+=e[r],i&&(i.entrySize=n,i.totalCalculatedSize=this.#p)}}#L=e=>{};#I=(e,r,n)=>{};#C=(e,r,n,i)=>{if(n||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#k({allowStale:e=this.allowStale}={}){if(this.#l)for(let r=this.#m;!(!this.#O(r)||((e||!this.#x(r))&&(yield r),r===this.#f));)r=this.#y[r]}*#A({allowStale:e=this.allowStale}={}){if(this.#l)for(let r=this.#f;!(!this.#O(r)||((e||!this.#x(r))&&(yield r),r===this.#m));)r=this.#h[r]}#O(e){return e!==void 0&&this.#s.get(this.#c[e])===e}*entries(){for(let e of this.#k())this.#i[e]!==void 0&&this.#c[e]!==void 0&&!this.#u(this.#i[e])&&(yield[this.#c[e],this.#i[e]])}*rentries(){for(let e of this.#A())this.#i[e]!==void 0&&this.#c[e]!==void 0&&!this.#u(this.#i[e])&&(yield[this.#c[e],this.#i[e]])}*keys(){for(let e of this.#k()){let r=this.#c[e];r!==void 0&&!this.#u(this.#i[e])&&(yield r)}}*rkeys(){for(let e of this.#A()){let r=this.#c[e];r!==void 0&&!this.#u(this.#i[e])&&(yield r)}}*values(){for(let e of this.#k())this.#i[e]!==void 0&&!this.#u(this.#i[e])&&(yield this.#i[e])}*rvalues(){for(let e of this.#A())this.#i[e]!==void 0&&!this.#u(this.#i[e])&&(yield this.#i[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,r={}){for(let n of this.#k()){let i=this.#i[n],o=this.#u(i)?i.__staleWhileFetching:i;if(o!==void 0&&e(o,this.#c[n],this))return this.get(this.#c[n],r)}}forEach(e,r=this){for(let n of this.#k()){let i=this.#i[n],o=this.#u(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#c[n],this)}}rforEach(e,r=this){for(let n of this.#A()){let i=this.#i[n],o=this.#u(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#c[n],this)}}purgeStale(){let e=!1;for(let r of this.#A({allowStale:!0}))this.#x(r)&&(this.#D(this.#c[r],"expire"),e=!0);return e}info(e){let r=this.#s.get(e);if(r===void 0)return;let n=this.#i[r],i=this.#u(n)?n.__staleWhileFetching:n;if(i===void 0)return;let o={value:i};if(this.#T&&this.#_){let s=this.#T[r],l=this.#_[r];if(s&&l){let u=s-(mc.now()-l);o.ttl=u,o.start=Date.now()}}return this.#E&&(o.size=this.#E[r]),o}dump(){let e=[];for(let r of this.#k({allowStale:!0})){let n=this.#c[r],i=this.#i[r],o=this.#u(i)?i.__staleWhileFetching:i;if(o===void 0||n===void 0)continue;let s={value:o};if(this.#T&&this.#_){s.ttl=this.#T[r];let l=mc.now()-this.#_[r];s.start=Math.floor(Date.now()-l)}this.#E&&(s.size=this.#E[r]),e.unshift([n,s])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let i=Date.now()-n.start;n.start=mc.now()-i}this.set(r,n.value,n)}}set(e,r,n={}){if(r===void 0)return this.delete(e),this;let{ttl:i=this.ttl,start:o,noDisposeOnSet:s=this.noDisposeOnSet,sizeCalculation:l=this.sizeCalculation,status:u}=n,{noUpdateTTL:m=this.noUpdateTTL}=n,d=this.#C(e,r,n.size||0,l);if(this.maxEntrySize&&d>this.maxEntrySize)return u&&(u.set="miss",u.maxEntrySizeExceeded=!0),this.#D(e,"set"),this;let g=this.#l===0?void 0:this.#s.get(e);if(g===void 0)g=this.#l===0?this.#m:this.#w.length!==0?this.#w.pop():this.#l===this.#e?this.#N(!1):this.#l,this.#c[g]=e,this.#i[g]=r,this.#s.set(e,g),this.#h[this.#m]=g,this.#y[g]=this.#m,this.#m=g,this.#l++,this.#I(g,d,u),u&&(u.set="add"),m=!1;else{this.#B(g);let y=this.#i[g];if(r!==y){if(this.#b&&this.#u(y)){y.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:T}=y;T!==void 0&&!s&&(this.#v&&this.#o?.(T,e,"set"),this.#d&&this.#g?.push([T,e,"set"]))}else s||(this.#v&&this.#o?.(y,e,"set"),this.#d&&this.#g?.push([y,e,"set"]));if(this.#L(g),this.#I(g,d,u),this.#i[g]=r,u){u.set="replace";let T=y&&this.#u(y)?y.__staleWhileFetching:y;T!==void 0&&(u.oldValue=T)}}else u&&(u.set="update")}if(i!==0&&!this.#T&&this.#P(),this.#T&&(m||this.#F(g,i,o),u&&this.#r(u,g)),!s&&this.#d&&this.#g){let y=this.#g,T;for(;T=y?.shift();)this.#n?.(...T)}return this}pop(){try{for(;this.#l;){let e=this.#i[this.#f];if(this.#N(!0),this.#u(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#d&&this.#g){let e=this.#g,r;for(;r=e?.shift();)this.#n?.(...r)}}}#N(e){let r=this.#f,n=this.#c[r],i=this.#i[r];return this.#b&&this.#u(i)?i.__abortController.abort(new Error("evicted")):(this.#v||this.#d)&&(this.#v&&this.#o?.(i,n,"evict"),this.#d&&this.#g?.push([i,n,"evict"])),this.#L(r),e&&(this.#c[r]=void 0,this.#i[r]=void 0,this.#w.push(r)),this.#l===1?(this.#f=this.#m=0,this.#w.length=0):this.#f=this.#h[r],this.#s.delete(n),this.#l--,r}has(e,r={}){let{updateAgeOnHas:n=this.updateAgeOnHas,status:i}=r,o=this.#s.get(e);if(o!==void 0){let s=this.#i[o];if(this.#u(s)&&s.__staleWhileFetching===void 0)return!1;if(this.#x(o))i&&(i.has="stale",this.#r(i,o));else return n&&this.#R(o),i&&(i.has="hit",this.#r(i,o)),!0}else i&&(i.has="miss");return!1}peek(e,r={}){let{allowStale:n=this.allowStale}=r,i=this.#s.get(e);if(i===void 0||!n&&this.#x(i))return;let o=this.#i[i];return this.#u(o)?o.__staleWhileFetching:o}#U(e,r,n,i){let o=r===void 0?void 0:this.#i[r];if(this.#u(o))return o;let s=new Vh,{signal:l}=n;l?.addEventListener("abort",()=>s.abort(l.reason),{signal:s.signal});let u={signal:s.signal,options:n,context:i},m=(E,U=!1)=>{let{aborted:V}=s.signal,z=n.ignoreFetchAbort&&E!==void 0;if(n.status&&(V&&!U?(n.status.fetchAborted=!0,n.status.fetchError=s.signal.reason,z&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),V&&!z&&!U)return g(s.signal.reason);let ne=T;return this.#i[r]===T&&(E===void 0?ne.__staleWhileFetching?this.#i[r]=ne.__staleWhileFetching:this.#D(e,"fetch"):(n.status&&(n.status.fetchUpdated=!0),this.set(e,E,u.options))),E},d=E=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=E),g(E)),g=E=>{let{aborted:U}=s.signal,V=U&&n.allowStaleOnFetchAbort,z=V||n.allowStaleOnFetchRejection,ne=z||n.noDeleteOnFetchRejection,se=T;if(this.#i[r]===T&&(!ne||se.__staleWhileFetching===void 0?this.#D(e,"fetch"):V||(this.#i[r]=se.__staleWhileFetching)),z)return n.status&&se.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),se.__staleWhileFetching;if(se.__returned===se)throw E},y=(E,U)=>{let V=this.#a?.(e,o,u);V&&V instanceof Promise&&V.then(z=>E(z===void 0?void 0:z),U),s.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(E(void 0),n.allowStaleOnFetchAbort&&(E=z=>m(z,!0)))})};n.status&&(n.status.fetchDispatched=!0);let T=new Promise(y).then(m,d),w=Object.assign(T,{__abortController:s,__staleWhileFetching:o,__returned:void 0});return r===void 0?(this.set(e,w,{...u.options,status:void 0}),r=this.#s.get(e)):this.#i[r]=w,w}#u(e){if(!this.#b)return!1;let r=e;return!!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof Vh}async fetch(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:s=this.ttl,noDisposeOnSet:l=this.noDisposeOnSet,size:u=0,sizeCalculation:m=this.sizeCalculation,noUpdateTTL:d=this.noUpdateTTL,noDeleteOnFetchRejection:g=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:y=this.allowStaleOnFetchRejection,ignoreFetchAbort:T=this.ignoreFetchAbort,allowStaleOnFetchAbort:w=this.allowStaleOnFetchAbort,context:E,forceRefresh:U=!1,status:V,signal:z}=r;if(!this.#b)return V&&(V.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,status:V});let ne={allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,ttl:s,noDisposeOnSet:l,size:u,sizeCalculation:m,noUpdateTTL:d,noDeleteOnFetchRejection:g,allowStaleOnFetchRejection:y,allowStaleOnFetchAbort:w,ignoreFetchAbort:T,status:V,signal:z},se=this.#s.get(e);if(se===void 0){V&&(V.fetch="miss");let ce=this.#U(e,se,ne,E);return ce.__returned=ce}else{let ce=this.#i[se];if(this.#u(ce)){let H=n&&ce.__staleWhileFetching!==void 0;return V&&(V.fetch="inflight",H&&(V.returnedStale=!0)),H?ce.__staleWhileFetching:ce.__returned=ce}let fe=this.#x(se);if(!U&&!fe)return V&&(V.fetch="hit"),this.#B(se),i&&this.#R(se),V&&this.#r(V,se),ce;let ct=this.#U(e,se,ne,E),mt=ct.__staleWhileFetching!==void 0&&n;return V&&(V.fetch=fe?"stale":"refresh",mt&&fe&&(V.returnedStale=!0)),mt?ct.__staleWhileFetching:ct.__returned=ct}}async forceFetch(e,r={}){let n=await this.fetch(e,r);if(n===void 0)throw new Error("fetch() returned undefined");return n}memo(e,r={}){let n=this.#S;if(!n)throw new Error("no memoMethod provided to constructor");let{context:i,forceRefresh:o,...s}=r,l=this.get(e,s);if(!o&&l!==void 0)return l;let u=n(e,l,{options:s,context:i});return this.set(e,u,s),u}get(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:s}=r,l=this.#s.get(e);if(l!==void 0){let u=this.#i[l],m=this.#u(u);return s&&this.#r(s,l),this.#x(l)?(s&&(s.get="stale"),m?(s&&n&&u.__staleWhileFetching!==void 0&&(s.returnedStale=!0),n?u.__staleWhileFetching:void 0):(o||this.#D(e,"expire"),s&&n&&(s.returnedStale=!0),n?u:void 0)):(s&&(s.get="hit"),m?u.__staleWhileFetching:(this.#B(l),i&&this.#R(l),u))}else s&&(s.get="miss")}#H(e,r){this.#y[r]=e,this.#h[e]=r}#B(e){e!==this.#m&&(e===this.#f?this.#f=this.#h[e]:this.#H(this.#y[e],this.#h[e]),this.#H(this.#m,e),this.#m=e)}delete(e){return this.#D(e,"delete")}#D(e,r){let n=!1;if(this.#l!==0){let i=this.#s.get(e);if(i!==void 0)if(n=!0,this.#l===1)this.#V(r);else{this.#L(i);let o=this.#i[i];if(this.#u(o)?o.__abortController.abort(new Error("deleted")):(this.#v||this.#d)&&(this.#v&&this.#o?.(o,e,r),this.#d&&this.#g?.push([o,e,r])),this.#s.delete(e),this.#c[i]=void 0,this.#i[i]=void 0,i===this.#m)this.#m=this.#y[i];else if(i===this.#f)this.#f=this.#h[i];else{let s=this.#y[i];this.#h[s]=this.#h[i];let l=this.#h[i];this.#y[l]=this.#y[i]}this.#l--,this.#w.push(i)}}if(this.#d&&this.#g?.length){let i=this.#g,o;for(;o=i?.shift();)this.#n?.(...o)}return n}clear(){return this.#V("delete")}#V(e){for(let r of this.#A({allowStale:!0})){let n=this.#i[r];if(this.#u(n))n.__abortController.abort(new Error("deleted"));else{let i=this.#c[r];this.#v&&this.#o?.(n,i,e),this.#d&&this.#g?.push([n,i,e])}}if(this.#s.clear(),this.#i.fill(void 0),this.#c.fill(void 0),this.#T&&this.#_&&(this.#T.fill(0),this.#_.fill(0)),this.#E&&this.#E.fill(0),this.#f=0,this.#m=0,this.#w.length=0,this.#p=0,this.#l=0,this.#d&&this.#g){let r=this.#g,n;for(;n=r?.shift();)this.#n?.(...n)}}};var hc=require("node:path"),gL=require("node:url"),ci=require("fs"),p8=Hr(require("node:fs"),1),Mo=require("node:fs/promises");var Kh=require("node:events"),eb=Hr(require("node:stream"),1),uL=require("node:string_decoder"),aL=typeof process=="object"&&process?process:{stdout:null,stderr:null},r8=t=>!!t&&typeof t=="object"&&(t instanceof Po||t instanceof eb.default||n8(t)||i8(t)),n8=t=>!!t&&typeof t=="object"&&t instanceof Kh.EventEmitter&&typeof t.pipe=="function"&&t.pipe!==eb.default.Writable.prototype.pipe,i8=t=>!!t&&typeof t=="object"&&t instanceof Kh.EventEmitter&&typeof t.write=="function"&&typeof t.end=="function",Oi=Symbol("EOF"),Ni=Symbol("maybeEmitEnd"),Ao=Symbol("emittedEnd"),Wh=Symbol("emittingEnd"),hu=Symbol("emittedError"),$h=Symbol("closed"),sL=Symbol("read"),jh=Symbol("flush"),cL=Symbol("flushChunk"),Nn=Symbol("encoding"),dc=Symbol("decoder"),Nt=Symbol("flowing"),yu=Symbol("paused"),gc=Symbol("resume"),Ut=Symbol("buffer"),yr=Symbol("pipes"),Ht=Symbol("bufferLength"),Kv=Symbol("bufferPush"),zh=Symbol("bufferShift"),ar=Symbol("objectMode"),wt=Symbol("destroyed"),Qv=Symbol("error"),Yv=Symbol("emitData"),lL=Symbol("emitEnd"),Zv=Symbol("emitEnd2"),ai=Symbol("async"),Xv=Symbol("abort"),qh=Symbol("aborted"),xu=Symbol("signal"),Aa=Symbol("dataListeners"),Yr=Symbol("discarded"),Tu=t=>Promise.resolve().then(t),o8=t=>t(),a8=t=>t==="end"||t==="finish"||t==="prefinish",s8=t=>t instanceof ArrayBuffer||!!t&&typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,c8=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),Gh=class{src;dest;opts;ondrain;constructor(e,r,n){this.src=e,this.dest=r,this.opts=n,this.ondrain=()=>e[gc](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(e){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},Jv=class extends Gh{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,r,n){super(e,r,n),this.proxyErrors=i=>r.emit("error",i),e.on("error",this.proxyErrors)}},l8=t=>!!t.objectMode,u8=t=>!t.objectMode&&!!t.encoding&&t.encoding!=="buffer",Po=class extends Kh.EventEmitter{[Nt]=!1;[yu]=!1;[yr]=[];[Ut]=[];[ar];[Nn];[ai];[dc];[Oi]=!1;[Ao]=!1;[Wh]=!1;[$h]=!1;[hu]=null;[Ht]=0;[wt]=!1;[xu];[qh]=!1;[Aa]=0;[Yr]=!1;writable=!0;readable=!0;constructor(...e){let r=e[0]||{};if(super(),r.objectMode&&typeof r.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");l8(r)?(this[ar]=!0,this[Nn]=null):u8(r)?(this[Nn]=r.encoding,this[ar]=!1):(this[ar]=!1,this[Nn]=null),this[ai]=!!r.async,this[dc]=this[Nn]?new uL.StringDecoder(this[Nn]):null,r&&r.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[Ut]}),r&&r.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[yr]});let{signal:n}=r;n&&(this[xu]=n,n.aborted?this[Xv]():n.addEventListener("abort",()=>this[Xv]()))}get bufferLength(){return this[Ht]}get encoding(){return this[Nn]}set encoding(e){throw new Error("Encoding must be set at instantiation time")}setEncoding(e){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[ar]}set objectMode(e){throw new Error("objectMode must be set at instantiation time")}get async(){return this[ai]}set async(e){this[ai]=this[ai]||!!e}[Xv](){this[qh]=!0,this.emit("abort",this[xu]?.reason),this.destroy(this[xu]?.reason)}get aborted(){return this[qh]}set aborted(e){}write(e,r,n){if(this[qh])return!1;if(this[Oi])throw new Error("write after end");if(this[wt])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof r=="function"&&(n=r,r="utf8"),r||(r="utf8");let i=this[ai]?Tu:o8;if(!this[ar]&&!Buffer.isBuffer(e)){if(c8(e))e=Buffer.from(e.buffer,e.byteOffset,e.byteLength);else if(s8(e))e=Buffer.from(e);else if(typeof e!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[ar]?(this[Nt]&&this[Ht]!==0&&this[jh](!0),this[Nt]?this.emit("data",e):this[Kv](e),this[Ht]!==0&&this.emit("readable"),n&&i(n),this[Nt]):e.length?(typeof e=="string"&&!(r===this[Nn]&&!this[dc]?.lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[Nn]&&(e=this[dc].write(e)),this[Nt]&&this[Ht]!==0&&this[jh](!0),this[Nt]?this.emit("data",e):this[Kv](e),this[Ht]!==0&&this.emit("readable"),n&&i(n),this[Nt]):(this[Ht]!==0&&this.emit("readable"),n&&i(n),this[Nt])}read(e){if(this[wt])return null;if(this[Yr]=!1,this[Ht]===0||e===0||e&&e>this[Ht])return this[Ni](),null;this[ar]&&(e=null),this[Ut].length>1&&!this[ar]&&(this[Ut]=[this[Nn]?this[Ut].join(""):Buffer.concat(this[Ut],this[Ht])]);let r=this[sL](e||null,this[Ut][0]);return this[Ni](),r}[sL](e,r){if(this[ar])this[zh]();else{let n=r;e===n.length||e===null?this[zh]():typeof n=="string"?(this[Ut][0]=n.slice(e),r=n.slice(0,e),this[Ht]-=e):(this[Ut][0]=n.subarray(e),r=n.subarray(0,e),this[Ht]-=e)}return this.emit("data",r),!this[Ut].length&&!this[Oi]&&this.emit("drain"),r}end(e,r,n){return typeof e=="function"&&(n=e,e=void 0),typeof r=="function"&&(n=r,r="utf8"),e!==void 0&&this.write(e,r),n&&this.once("end",n),this[Oi]=!0,this.writable=!1,(this[Nt]||!this[yu])&&this[Ni](),this}[gc](){this[wt]||(!this[Aa]&&!this[yr].length&&(this[Yr]=!0),this[yu]=!1,this[Nt]=!0,this.emit("resume"),this[Ut].length?this[jh]():this[Oi]?this[Ni]():this.emit("drain"))}resume(){return this[gc]()}pause(){this[Nt]=!1,this[yu]=!0,this[Yr]=!1}get destroyed(){return this[wt]}get flowing(){return this[Nt]}get paused(){return this[yu]}[Kv](e){this[ar]?this[Ht]+=1:this[Ht]+=e.length,this[Ut].push(e)}[zh](){return this[ar]?this[Ht]-=1:this[Ht]-=this[Ut][0].length,this[Ut].shift()}[jh](e=!1){do;while(this[cL](this[zh]())&&this[Ut].length);!e&&!this[Ut].length&&!this[Oi]&&this.emit("drain")}[cL](e){return this.emit("data",e),this[Nt]}pipe(e,r){if(this[wt])return e;this[Yr]=!1;let n=this[Ao];return r=r||{},e===aL.stdout||e===aL.stderr?r.end=!1:r.end=r.end!==!1,r.proxyErrors=!!r.proxyErrors,n?r.end&&e.end():(this[yr].push(r.proxyErrors?new Jv(this,e,r):new Gh(this,e,r)),this[ai]?Tu(()=>this[gc]()):this[gc]()),e}unpipe(e){let r=this[yr].find(n=>n.dest===e);r&&(this[yr].length===1?(this[Nt]&&this[Aa]===0&&(this[Nt]=!1),this[yr]=[]):this[yr].splice(this[yr].indexOf(r),1),r.unpipe())}addListener(e,r){return this.on(e,r)}on(e,r){let n=super.on(e,r);if(e==="data")this[Yr]=!1,this[Aa]++,!this[yr].length&&!this[Nt]&&this[gc]();else if(e==="readable"&&this[Ht]!==0)super.emit("readable");else if(a8(e)&&this[Ao])super.emit(e),this.removeAllListeners(e);else if(e==="error"&&this[hu]){let i=r;this[ai]?Tu(()=>i.call(this,this[hu])):i.call(this,this[hu])}return n}removeListener(e,r){return this.off(e,r)}off(e,r){let n=super.off(e,r);return e==="data"&&(this[Aa]=this.listeners("data").length,this[Aa]===0&&!this[Yr]&&!this[yr].length&&(this[Nt]=!1)),n}removeAllListeners(e){let r=super.removeAllListeners(e);return(e==="data"||e===void 0)&&(this[Aa]=0,!this[Yr]&&!this[yr].length&&(this[Nt]=!1)),r}get emittedEnd(){return this[Ao]}[Ni](){!this[Wh]&&!this[Ao]&&!this[wt]&&this[Ut].length===0&&this[Oi]&&(this[Wh]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[$h]&&this.emit("close"),this[Wh]=!1)}emit(e,...r){let n=r[0];if(e!=="error"&&e!=="close"&&e!==wt&&this[wt])return!1;if(e==="data")return!this[ar]&&!n?!1:this[ai]?(Tu(()=>this[Yv](n)),!0):this[Yv](n);if(e==="end")return this[lL]();if(e==="close"){if(this[$h]=!0,!this[Ao]&&!this[wt])return!1;let o=super.emit("close");return this.removeAllListeners("close"),o}else if(e==="error"){this[hu]=n,super.emit(Qv,n);let o=!this[xu]||this.listeners("error").length?super.emit("error",n):!1;return this[Ni](),o}else if(e==="resume"){let o=super.emit("resume");return this[Ni](),o}else if(e==="finish"||e==="prefinish"){let o=super.emit(e);return this.removeAllListeners(e),o}let i=super.emit(e,...r);return this[Ni](),i}[Yv](e){for(let n of this[yr])n.dest.write(e)===!1&&this.pause();let r=this[Yr]?!1:super.emit("data",e);return this[Ni](),r}[lL](){return this[Ao]?!1:(this[Ao]=!0,this.readable=!1,this[ai]?(Tu(()=>this[Zv]()),!0):this[Zv]())}[Zv](){if(this[dc]){let r=this[dc].end();if(r){for(let n of this[yr])n.dest.write(r);this[Yr]||super.emit("data",r)}}for(let r of this[yr])r.end();let e=super.emit("end");return this.removeAllListeners("end"),e}async collect(){let e=Object.assign([],{dataLength:0});this[ar]||(e.dataLength=0);let r=this.promise();return this.on("data",n=>{e.push(n),this[ar]||(e.dataLength+=n.length)}),await r,e}async concat(){if(this[ar])throw new Error("cannot concat in objectMode");let e=await this.collect();return this[Nn]?e.join(""):Buffer.concat(e,e.dataLength)}async promise(){return new Promise((e,r)=>{this.on(wt,()=>r(new Error("stream destroyed"))),this.on("error",n=>r(n)),this.on("end",()=>e())})}[Symbol.asyncIterator](){this[Yr]=!1;let e=!1,r=async()=>(this.pause(),e=!0,{value:void 0,done:!0});return{next:()=>{if(e)return r();let i=this.read();if(i!==null)return Promise.resolve({done:!1,value:i});if(this[Oi])return r();let o,s,l=g=>{this.off("data",u),this.off("end",m),this.off(wt,d),r(),s(g)},u=g=>{this.off("error",l),this.off("end",m),this.off(wt,d),this.pause(),o({value:g,done:!!this[Oi]})},m=()=>{this.off("error",l),this.off("data",u),this.off(wt,d),r(),o({done:!0,value:void 0})},d=()=>l(new Error("stream destroyed"));return new Promise((g,y)=>{s=y,o=g,this.once(wt,d),this.once("error",l),this.once("end",m),this.once("data",u)})},throw:r,return:r,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[Yr]=!1;let e=!1,r=()=>(this.pause(),this.off(Qv,r),this.off(wt,r),this.off("end",r),e=!0,{done:!0,value:void 0}),n=()=>{if(e)return r();let i=this.read();return i===null?r():{done:!1,value:i}};return this.once("end",r),this.once(Qv,r),this.once(wt,r),{next:n,throw:r,return:r,[Symbol.iterator](){return this}}}destroy(e){if(this[wt])return e?this.emit("error",e):this.emit(wt),this;this[wt]=!0,this[Yr]=!0,this[Ut].length=0,this[Ht]=0;let r=this;return typeof r.close=="function"&&!this[$h]&&r.close(),e?this.emit("error",e):this.emit(wt),this}static get isStream(){return r8}};var m8=ci.realpathSync.native,vu={lstatSync:ci.lstatSync,readdir:ci.readdir,readdirSync:ci.readdirSync,readlinkSync:ci.readlinkSync,realpathSync:m8,promises:{lstat:Mo.lstat,readdir:Mo.readdir,readlink:Mo.readlink,realpath:Mo.realpath}},hL=t=>!t||t===vu||t===p8?vu:{...vu,...t,promises:{...vu.promises,...t.promises||{}}},yL=/^\\\\\?\\([a-z]:)\\?$/i,f8=t=>t.replace(/\//g,"\\").replace(yL,"$1\\"),d8=/[\\\/]/,vn=0,xL=1,TL=2,si=4,SL=6,vL=8,Pa=10,bL=12,Sn=15,Su=~Sn,tb=16,pL=32,bu=64,Un=128,Qh=256,Zh=512,mL=bu|Un|Zh,g8=1023,rb=t=>t.isFile()?vL:t.isDirectory()?si:t.isSymbolicLink()?Pa:t.isCharacterDevice()?TL:t.isBlockDevice()?SL:t.isSocket()?bL:t.isFIFO()?xL:vn,fL=new Map,wu=t=>{let e=fL.get(t);if(e)return e;let r=t.normalize("NFKD");return fL.set(t,r),r},dL=new Map,Yh=t=>{let e=dL.get(t);if(e)return e;let r=wu(t.toLowerCase());return dL.set(t,r),r},Xh=class extends gu{constructor(){super({max:256})}},nb=class extends gu{constructor(e=16*1024){super({maxSize:e,sizeCalculation:r=>r.length+1})}},wL=Symbol("PathScurry setAsCwd"),sr=class{name;root;roots;parent;nocase;isCWD=!1;#e;#t;get dev(){return this.#t}#o;get mode(){return this.#o}#n;get nlink(){return this.#n}#a;get uid(){return this.#a}#S;get gid(){return this.#S}#l;get rdev(){return this.#l}#p;get blksize(){return this.#p}#s;get ino(){return this.#s}#c;get size(){return this.#c}#i;get blocks(){return this.#i}#h;get atimeMs(){return this.#h}#y;get mtimeMs(){return this.#y}#f;get ctimeMs(){return this.#f}#m;get birthtimeMs(){return this.#m}#w;get atime(){return this.#w}#g;get mtime(){return this.#g}#E;get ctime(){return this.#E}#_;get birthtime(){return this.#_}#T;#v;#b;#d;#P;#R;#r;#F;#x;#M;get parentPath(){return(this.parent||this).fullpath()}get path(){return this.parentPath}constructor(e,r=vn,n,i,o,s,l){this.name=e,this.#T=o?Yh(e):wu(e),this.#r=r&g8,this.nocase=o,this.roots=i,this.root=n||this,this.#F=s,this.#b=l.fullpath,this.#P=l.relative,this.#R=l.relativePosix,this.parent=l.parent,this.parent?this.#e=this.parent.#e:this.#e=hL(l.fs)}depth(){return this.#v!==void 0?this.#v:this.parent?this.#v=this.parent.depth()+1:this.#v=0}childrenCache(){return this.#F}resolve(e){if(!e)return this;let r=this.getRootString(e),i=e.substring(r.length).split(this.splitSep);return r?this.getRoot(r).#L(i):this.#L(i)}#L(e){let r=this;for(let n of e)r=r.child(n);return r}children(){let e=this.#F.get(this);if(e)return e;let r=Object.assign([],{provisional:0});return this.#F.set(this,r),this.#r&=~tb,r}child(e,r){if(e===""||e===".")return this;if(e==="..")return this.parent||this;let n=this.children(),i=this.nocase?Yh(e):wu(e);for(let u of n)if(u.#T===i)return u;let o=this.parent?this.sep:"",s=this.#b?this.#b+o+e:void 0,l=this.newChild(e,vn,{...r,parent:this,fullpath:s});return this.canReaddir()||(l.#r|=Un),n.push(l),l}relative(){if(this.isCWD)return"";if(this.#P!==void 0)return this.#P;let e=this.name,r=this.parent;if(!r)return this.#P=this.name;let n=r.relative();return n+(!n||!r.parent?"":this.sep)+e}relativePosix(){if(this.sep==="/")return this.relative();if(this.isCWD)return"";if(this.#R!==void 0)return this.#R;let e=this.name,r=this.parent;if(!r)return this.#R=this.fullpathPosix();let n=r.relativePosix();return n+(!n||!r.parent?"":"/")+e}fullpath(){if(this.#b!==void 0)return this.#b;let e=this.name,r=this.parent;if(!r)return this.#b=this.name;let i=r.fullpath()+(r.parent?this.sep:"")+e;return this.#b=i}fullpathPosix(){if(this.#d!==void 0)return this.#d;if(this.sep==="/")return this.#d=this.fullpath();if(!this.parent){let i=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(i)?this.#d=`//?/${i}`:this.#d=i}let e=this.parent,r=e.fullpathPosix(),n=r+(!r||!e.parent?"":"/")+this.name;return this.#d=n}isUnknown(){return(this.#r&Sn)===vn}isType(e){return this[`is${e}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#r&Sn)===vL}isDirectory(){return(this.#r&Sn)===si}isCharacterDevice(){return(this.#r&Sn)===TL}isBlockDevice(){return(this.#r&Sn)===SL}isFIFO(){return(this.#r&Sn)===xL}isSocket(){return(this.#r&Sn)===bL}isSymbolicLink(){return(this.#r&Pa)===Pa}lstatCached(){return this.#r&pL?this:void 0}readlinkCached(){return this.#x}realpathCached(){return this.#M}readdirCached(){let e=this.children();return e.slice(0,e.provisional)}canReadlink(){if(this.#x)return!0;if(!this.parent)return!1;let e=this.#r&Sn;return!(e!==vn&&e!==Pa||this.#r&Qh||this.#r&Un)}calledReaddir(){return!!(this.#r&tb)}isENOENT(){return!!(this.#r&Un)}isNamed(e){return this.nocase?this.#T===Yh(e):this.#T===wu(e)}async readlink(){let e=this.#x;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=await this.#e.promises.readlink(this.fullpath()),n=(await this.parent.realpath())?.resolve(r);if(n)return this.#x=n}catch(r){this.#u(r.code);return}}readlinkSync(){let e=this.#x;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=this.#e.readlinkSync(this.fullpath()),n=this.parent.realpathSync()?.resolve(r);if(n)return this.#x=n}catch(r){this.#u(r.code);return}}#I(e){this.#r|=tb;for(let r=e.provisional;r<e.length;r++){let n=e[r];n&&n.#C()}}#C(){this.#r&Un||(this.#r=(this.#r|Un)&Su,this.#k())}#k(){let e=this.children();e.provisional=0;for(let r of e)r.#C()}#A(){this.#r|=Zh,this.#O()}#O(){if(this.#r&bu)return;let e=this.#r;(e&Sn)===si&&(e&=Su),this.#r=e|bu,this.#k()}#N(e=""){e==="ENOTDIR"||e==="EPERM"?this.#O():e==="ENOENT"?this.#C():this.children().provisional=0}#U(e=""){e==="ENOTDIR"?this.parent.#O():e==="ENOENT"&&this.#C()}#u(e=""){let r=this.#r;r|=Qh,e==="ENOENT"&&(r|=Un),(e==="EINVAL"||e==="UNKNOWN")&&(r&=Su),this.#r=r,e==="ENOTDIR"&&this.parent&&this.parent.#O()}#H(e,r){return this.#D(e,r)||this.#B(e,r)}#B(e,r){let n=rb(e),i=this.newChild(e.name,n,{parent:this}),o=i.#r&Sn;return o!==si&&o!==Pa&&o!==vn&&(i.#r|=bu),r.unshift(i),r.provisional++,i}#D(e,r){for(let n=r.provisional;n<r.length;n++){let i=r[n];if((this.nocase?Yh(e.name):wu(e.name))===i.#T)return this.#V(e,i,n,r)}}#V(e,r,n,i){let o=r.name;return r.#r=r.#r&Su|rb(e),o!==e.name&&(r.name=e.name),n!==i.provisional&&(n===i.length-1?i.pop():i.splice(n,1),i.unshift(r)),i.provisional++,r}async lstat(){if((this.#r&Un)===0)try{return this.#z(await this.#e.promises.lstat(this.fullpath())),this}catch(e){this.#U(e.code)}}lstatSync(){if((this.#r&Un)===0)try{return this.#z(this.#e.lstatSync(this.fullpath())),this}catch(e){this.#U(e.code)}}#z(e){let{atime:r,atimeMs:n,birthtime:i,birthtimeMs:o,blksize:s,blocks:l,ctime:u,ctimeMs:m,dev:d,gid:g,ino:y,mode:T,mtime:w,mtimeMs:E,nlink:U,rdev:V,size:z,uid:ne}=e;this.#w=r,this.#h=n,this.#_=i,this.#m=o,this.#p=s,this.#i=l,this.#E=u,this.#f=m,this.#t=d,this.#S=g,this.#s=y,this.#o=T,this.#g=w,this.#y=E,this.#n=U,this.#l=V,this.#c=z,this.#a=ne;let se=rb(e);this.#r=this.#r&Su|se|pL,se!==vn&&se!==si&&se!==Pa&&(this.#r|=bu)}#$=[];#j=!1;#q(e){this.#j=!1;let r=this.#$.slice();this.#$.length=0,r.forEach(n=>n(null,e))}readdirCB(e,r=!1){if(!this.canReaddir()){r?e(null,[]):queueMicrotask(()=>e(null,[]));return}let n=this.children();if(this.calledReaddir()){let o=n.slice(0,n.provisional);r?e(null,o):queueMicrotask(()=>e(null,o));return}if(this.#$.push(e),this.#j)return;this.#j=!0;let i=this.fullpath();this.#e.readdir(i,{withFileTypes:!0},(o,s)=>{if(o)this.#N(o.code),n.provisional=0;else{for(let l of s)this.#H(l,n);this.#I(n)}this.#q(n.slice(0,n.provisional))})}#W;async readdir(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();if(this.#W)await this.#W;else{let n=()=>{};this.#W=new Promise(i=>n=i);try{for(let i of await this.#e.promises.readdir(r,{withFileTypes:!0}))this.#H(i,e);this.#I(e)}catch(i){this.#N(i.code),e.provisional=0}this.#W=void 0,n()}return e.slice(0,e.provisional)}readdirSync(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();try{for(let n of this.#e.readdirSync(r,{withFileTypes:!0}))this.#H(n,e);this.#I(e)}catch(n){this.#N(n.code),e.provisional=0}return e.slice(0,e.provisional)}canReaddir(){if(this.#r&mL)return!1;let e=Sn&this.#r;return e===vn||e===si||e===Pa}shouldWalk(e,r){return(this.#r&si)===si&&!(this.#r&mL)&&!e.has(this)&&(!r||r(this))}async realpath(){if(this.#M)return this.#M;if(!((Zh|Qh|Un)&this.#r))try{let e=await this.#e.promises.realpath(this.fullpath());return this.#M=this.resolve(e)}catch{this.#A()}}realpathSync(){if(this.#M)return this.#M;if(!((Zh|Qh|Un)&this.#r))try{let e=this.#e.realpathSync(this.fullpath());return this.#M=this.resolve(e)}catch{this.#A()}}[wL](e){if(e===this)return;e.isCWD=!1,this.isCWD=!0;let r=new Set([]),n=[],i=this;for(;i&&i.parent;)r.add(i),i.#P=n.join(this.sep),i.#R=n.join("/"),i=i.parent,n.push("..");for(i=e;i&&i.parent&&!r.has(i);)i.#P=void 0,i.#R=void 0,i=i.parent}},Jh=class t extends sr{sep="\\";splitSep=d8;constructor(e,r=vn,n,i,o,s,l){super(e,r,n,i,o,s,l)}newChild(e,r=vn,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}getRootString(e){return hc.win32.parse(e).root}getRoot(e){if(e=f8(e.toUpperCase()),e===this.root.name)return this.root;for(let[r,n]of Object.entries(this.roots))if(this.sameRoot(e,r))return this.roots[e]=n;return this.roots[e]=new yc(e,this).root}sameRoot(e,r=this.root.name){return e=e.toUpperCase().replace(/\//g,"\\").replace(yL,"$1\\"),e===r}},ey=class t extends sr{splitSep="/";sep="/";constructor(e,r=vn,n,i,o,s,l){super(e,r,n,i,o,s,l)}getRootString(e){return e.startsWith("/")?"/":""}getRoot(e){return this.root}newChild(e,r=vn,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}},ty=class{root;rootPath;roots;cwd;#e;#t;#o;nocase;#n;constructor(e=process.cwd(),r,n,{nocase:i,childrenCacheSize:o=16*1024,fs:s=vu}={}){this.#n=hL(s),(e instanceof URL||e.startsWith("file://"))&&(e=(0,gL.fileURLToPath)(e));let l=r.resolve(e);this.roots=Object.create(null),this.rootPath=this.parseRootPath(l),this.#e=new Xh,this.#t=new Xh,this.#o=new nb(o);let u=l.substring(this.rootPath.length).split(n);if(u.length===1&&!u[0]&&u.pop(),i===void 0)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=i,this.root=this.newRoot(this.#n),this.roots[this.rootPath]=this.root;let m=this.root,d=u.length-1,g=r.sep,y=this.rootPath,T=!1;for(let w of u){let E=d--;m=m.child(w,{relative:new Array(E).fill("..").join(g),relativePosix:new Array(E).fill("..").join("/"),fullpath:y+=(T?"":g)+w}),T=!0}this.cwd=m}depth(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.depth()}childrenCache(){return this.#o}resolve(...e){let r="";for(let o=e.length-1;o>=0;o--){let s=e[o];if(!(!s||s===".")&&(r=r?`${s}/${r}`:s,this.isAbsolute(s)))break}let n=this.#e.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpath();return this.#e.set(r,i),i}resolvePosix(...e){let r="";for(let o=e.length-1;o>=0;o--){let s=e[o];if(!(!s||s===".")&&(r=r?`${s}/${r}`:s,this.isAbsolute(s)))break}let n=this.#t.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpathPosix();return this.#t.set(r,i),i}relative(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relative()}relativePosix(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relativePosix()}basename(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.name}dirname(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),(e.parent||e).fullpath()}async readdir(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof sr||(r=e,e=this.cwd);let{withFileTypes:n}=r;if(e.canReaddir()){let i=await e.readdir();return n?i:i.map(o=>o.name)}else return[]}readdirSync(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof sr||(r=e,e=this.cwd);let{withFileTypes:n=!0}=r;return e.canReaddir()?n?e.readdirSync():e.readdirSync().map(i=>i.name):[]}async lstat(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstat()}lstatSync(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstatSync()}async readlink(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof sr||(r=e.withFileTypes,e=this.cwd);let n=await e.readlink();return r?n:n?.fullpath()}readlinkSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof sr||(r=e.withFileTypes,e=this.cwd);let n=e.readlinkSync();return r?n:n?.fullpath()}async realpath(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof sr||(r=e.withFileTypes,e=this.cwd);let n=await e.realpath();return r?n:n?.fullpath()}realpathSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof sr||(r=e.withFileTypes,e=this.cwd);let n=e.realpathSync();return r?n:n?.fullpath()}async walk(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof sr||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=[];(!o||o(e))&&l.push(n?e:e.fullpath());let u=new Set,m=(g,y)=>{u.add(g),g.readdirCB((T,w)=>{if(T)return y(T);let E=w.length;if(!E)return y();let U=()=>{--E===0&&y()};for(let V of w)(!o||o(V))&&l.push(n?V:V.fullpath()),i&&V.isSymbolicLink()?V.realpath().then(z=>z?.isUnknown()?z.lstat():z).then(z=>z?.shouldWalk(u,s)?m(z,U):U()):V.shouldWalk(u,s)?m(V,U):U()},!0)},d=e;return new Promise((g,y)=>{m(d,T=>{if(T)return y(T);g(l)})})}walkSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof sr||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=[];(!o||o(e))&&l.push(n?e:e.fullpath());let u=new Set([e]);for(let m of u){let d=m.readdirSync();for(let g of d){(!o||o(g))&&l.push(n?g:g.fullpath());let y=g;if(g.isSymbolicLink()){if(!(i&&(y=g.realpathSync())))continue;y.isUnknown()&&y.lstatSync()}y.shouldWalk(u,s)&&u.add(y)}}return l}[Symbol.asyncIterator](){return this.iterate()}iterate(e=this.cwd,r={}){return typeof e=="string"?e=this.cwd.resolve(e):e instanceof sr||(r=e,e=this.cwd),this.stream(e,r)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof sr||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r;(!o||o(e))&&(yield n?e:e.fullpath());let l=new Set([e]);for(let u of l){let m=u.readdirSync();for(let d of m){(!o||o(d))&&(yield n?d:d.fullpath());let g=d;if(d.isSymbolicLink()){if(!(i&&(g=d.realpathSync())))continue;g.isUnknown()&&g.lstatSync()}g.shouldWalk(l,s)&&l.add(g)}}}stream(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof sr||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=new Po({objectMode:!0});(!o||o(e))&&l.write(n?e:e.fullpath());let u=new Set,m=[e],d=0,g=()=>{let y=!1;for(;!y;){let T=m.shift();if(!T){d===0&&l.end();return}d++,u.add(T);let w=(U,V,z=!1)=>{if(U)return l.emit("error",U);if(i&&!z){let ne=[];for(let se of V)se.isSymbolicLink()&&ne.push(se.realpath().then(ce=>ce?.isUnknown()?ce.lstat():ce));if(ne.length){Promise.all(ne).then(()=>w(null,V,!0));return}}for(let ne of V)ne&&(!o||o(ne))&&(l.write(n?ne:ne.fullpath())||(y=!0));d--;for(let ne of V){let se=ne.realpathCached()||ne;se.shouldWalk(u,s)&&m.push(se)}y&&!l.flowing?l.once("drain",g):E||g()},E=!0;T.readdirCB(w,!0),E=!1}};return g(),l}streamSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof sr||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=new Po({objectMode:!0}),u=new Set;(!o||o(e))&&l.write(n?e:e.fullpath());let m=[e],d=0,g=()=>{let y=!1;for(;!y;){let T=m.shift();if(!T){d===0&&l.end();return}d++,u.add(T);let w=T.readdirSync();for(let E of w)(!o||o(E))&&(l.write(n?E:E.fullpath())||(y=!0));d--;for(let E of w){let U=E;if(E.isSymbolicLink()){if(!(i&&(U=E.realpathSync())))continue;U.isUnknown()&&U.lstatSync()}U.shouldWalk(u,s)&&m.push(U)}}y&&!l.flowing&&l.once("drain",g)};return g(),l}chdir(e=this.cwd){let r=this.cwd;this.cwd=typeof e=="string"?this.cwd.resolve(e):e,this.cwd[wL](r)}},yc=class extends ty{sep="\\";constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,hc.win32,"\\",{...r,nocase:n}),this.nocase=n;for(let i=this.cwd;i;i=i.parent)i.nocase=this.nocase}parseRootPath(e){return hc.win32.parse(e).root.toUpperCase()}newRoot(e){return new Jh(this.rootPath,si,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")||e.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(e)}},xc=class extends ty{sep="/";constructor(e=process.cwd(),r={}){let{nocase:n=!1}=r;super(e,hc.posix,"/",{...r,nocase:n}),this.nocase=n}parseRootPath(e){return"/"}newRoot(e){return new ey(this.rootPath,si,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")}},Eu=class extends xc{constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,{...r,nocase:n})}},vOe=process.platform==="win32"?Jh:ey,EL=process.platform==="win32"?yc:process.platform==="darwin"?Eu:xc;var h8=t=>t.length>=1,y8=t=>t.length>=1,Tc=class t{#e;#t;#o;length;#n;#a;#S;#l;#p;#s;#c=!0;constructor(e,r,n,i){if(!h8(e))throw new TypeError("empty pattern list");if(!y8(r))throw new TypeError("empty glob list");if(r.length!==e.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=e.length,n<0||n>=this.length)throw new TypeError("index out of range");if(this.#e=e,this.#t=r,this.#o=n,this.#n=i,this.#o===0){if(this.isUNC()){let[o,s,l,u,...m]=this.#e,[d,g,y,T,...w]=this.#t;m[0]===""&&(m.shift(),w.shift());let E=[o,s,l,u,""].join("/"),U=[d,g,y,T,""].join("/");this.#e=[E,...m],this.#t=[U,...w],this.length=this.#e.length}else if(this.isDrive()||this.isAbsolute()){let[o,...s]=this.#e,[l,...u]=this.#t;s[0]===""&&(s.shift(),u.shift());let m=o+"/",d=l+"/";this.#e=[m,...s],this.#t=[d,...u],this.length=this.#e.length}}}pattern(){return this.#e[this.#o]}isString(){return typeof this.#e[this.#o]=="string"}isGlobstar(){return this.#e[this.#o]===Xt}isRegExp(){return this.#e[this.#o]instanceof RegExp}globString(){return this.#S=this.#S||(this.#o===0?this.isAbsolute()?this.#t[0]+this.#t.slice(1).join("/"):this.#t.join("/"):this.#t.slice(this.#o).join("/"))}hasMore(){return this.length>this.#o+1}rest(){return this.#a!==void 0?this.#a:this.hasMore()?(this.#a=new t(this.#e,this.#t,this.#o+1,this.#n),this.#a.#s=this.#s,this.#a.#p=this.#p,this.#a.#l=this.#l,this.#a):this.#a=null}isUNC(){let e=this.#e;return this.#p!==void 0?this.#p:this.#p=this.#n==="win32"&&this.#o===0&&e[0]===""&&e[1]===""&&typeof e[2]=="string"&&!!e[2]&&typeof e[3]=="string"&&!!e[3]}isDrive(){let e=this.#e;return this.#l!==void 0?this.#l:this.#l=this.#n==="win32"&&this.#o===0&&this.length>1&&typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0])}isAbsolute(){let e=this.#e;return this.#s!==void 0?this.#s:this.#s=e[0]===""&&e.length>1||this.isDrive()||this.isUNC()}root(){let e=this.#e[0];return typeof e=="string"&&this.isAbsolute()&&this.#o===0?e:""}checkFollowGlobstar(){return!(this.#o===0||!this.isGlobstar()||!this.#c)}markFollowGlobstar(){return this.#o===0||!this.isGlobstar()||!this.#c?!1:(this.#c=!1,!0)}};var x8=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",Sc=class{relative;relativeChildren;absolute;absoluteChildren;platform;mmopts;constructor(e,{nobrace:r,nocase:n,noext:i,noglobstar:o,platform:s=x8}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[],this.platform=s,this.mmopts={dot:!0,nobrace:r,nocase:n,noext:i,noglobstar:o,optimizationLevel:2,platform:s,nocomment:!0,nonegate:!0};for(let l of e)this.add(l)}add(e){let r=new Qr(e,this.mmopts);for(let n=0;n<r.set.length;n++){let i=r.set[n],o=r.globParts[n];if(!i||!o)throw new Error("invalid pattern object");for(;i[0]==="."&&o[0]===".";)i.shift(),o.shift();let s=new Tc(i,o,0,this.platform),l=new Qr(s.globString(),this.mmopts),u=o[o.length-1]==="**",m=s.isAbsolute();m?this.absolute.push(l):this.relative.push(l),u&&(m?this.absoluteChildren.push(l):this.relativeChildren.push(l))}}ignored(e){let r=e.fullpath(),n=`${r}/`,i=e.relative()||".",o=`${i}/`;for(let s of this.relative)if(s.match(i)||s.match(o))return!0;for(let s of this.absolute)if(s.match(r)||s.match(n))return!0;return!1}childrenIgnored(e){let r=e.fullpath()+"/",n=(e.relative()||".")+"/";for(let i of this.relativeChildren)if(i.match(n))return!0;for(let i of this.absoluteChildren)if(i.match(r))return!0;return!1}};var ib=class t{store;constructor(e=new Map){this.store=e}copy(){return new t(new Map(this.store))}hasWalked(e,r){return this.store.get(e.fullpath())?.has(r.globString())}storeWalked(e,r){let n=e.fullpath(),i=this.store.get(n);i?i.add(r.globString()):this.store.set(n,new Set([r.globString()]))}},ob=class{store=new Map;add(e,r,n){let i=(r?2:0)|(n?1:0),o=this.store.get(e);this.store.set(e,o===void 0?i:i&o)}entries(){return[...this.store.entries()].map(([e,r])=>[e,!!(r&2),!!(r&1)])}},ab=class{store=new Map;add(e,r){if(!e.canReaddir())return;let n=this.store.get(e);n?n.find(i=>i.globString()===r.globString())||n.push(r):this.store.set(e,[r])}get(e){let r=this.store.get(e);if(!r)throw new Error("attempting to walk unknown path");return r}entries(){return this.keys().map(e=>[e,this.store.get(e)])}keys(){return[...this.store.keys()].filter(e=>e.canReaddir())}},_u=class t{hasWalkedCache;matches=new ob;subwalks=new ab;patterns;follow;dot;opts;constructor(e,r){this.opts=e,this.follow=!!e.follow,this.dot=!!e.dot,this.hasWalkedCache=r?r.copy():new ib}processPatterns(e,r){this.patterns=r;let n=r.map(i=>[e,i]);for(let[i,o]of n){this.hasWalkedCache.storeWalked(i,o);let s=o.root(),l=o.isAbsolute()&&this.opts.absolute!==!1;if(s){i=i.resolve(s==="/"&&this.opts.root!==void 0?this.opts.root:s);let g=o.rest();if(g)o=g;else{this.matches.add(i,!0,!1);continue}}if(i.isENOENT())continue;let u,m,d=!1;for(;typeof(u=o.pattern())=="string"&&(m=o.rest());)i=i.resolve(u),o=m,d=!0;if(u=o.pattern(),m=o.rest(),d){if(this.hasWalkedCache.hasWalked(i,o))continue;this.hasWalkedCache.storeWalked(i,o)}if(typeof u=="string"){let g=u===".."||u===""||u===".";this.matches.add(i.resolve(u),l,g);continue}else if(u===Xt){(!i.isSymbolicLink()||this.follow||o.checkFollowGlobstar())&&this.subwalks.add(i,o);let g=m?.pattern(),y=m?.rest();if(!m||(g===""||g===".")&&!y)this.matches.add(i,l,g===""||g===".");else if(g===".."){let T=i.parent||i;y?this.hasWalkedCache.hasWalked(T,y)||this.subwalks.add(T,y):this.matches.add(T,l,!0)}}else u instanceof RegExp&&this.subwalks.add(i,o)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new t(this.opts,this.hasWalkedCache)}filterEntries(e,r){let n=this.subwalks.get(e),i=this.child();for(let o of r)for(let s of n){let l=s.isAbsolute(),u=s.pattern(),m=s.rest();u===Xt?i.testGlobstar(o,s,m,l):u instanceof RegExp?i.testRegExp(o,u,m,l):i.testString(o,u,m,l)}return i}testGlobstar(e,r,n,i){if((this.dot||!e.name.startsWith("."))&&(r.hasMore()||this.matches.add(e,i,!1),e.canReaddir()&&(this.follow||!e.isSymbolicLink()?this.subwalks.add(e,r):e.isSymbolicLink()&&(n&&r.checkFollowGlobstar()?this.subwalks.add(e,n):r.markFollowGlobstar()&&this.subwalks.add(e,r)))),n){let o=n.pattern();if(typeof o=="string"&&o!==".."&&o!==""&&o!==".")this.testString(e,o,n.rest(),i);else if(o===".."){let s=e.parent||e;this.subwalks.add(s,n)}else o instanceof RegExp&&this.testRegExp(e,o,n.rest(),i)}}testRegExp(e,r,n,i){r.test(e.name)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}testString(e,r,n,i){e.isNamed(r)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}};var T8=(t,e)=>typeof t=="string"?new Sc([t],e):Array.isArray(t)?new Sc(t,e):t,ry=class{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#e=[];#t;#o;signal;maxDepth;includeChildMatches;constructor(e,r,n){if(this.patterns=e,this.path=r,this.opts=n,this.#o=!n.posix&&n.platform==="win32"?"\\":"/",this.includeChildMatches=n.includeChildMatches!==!1,(n.ignore||!this.includeChildMatches)&&(this.#t=T8(n.ignore??[],n),!this.includeChildMatches&&typeof this.#t.add!="function")){let i="cannot ignore child matches, ignore lacks add() method.";throw new Error(i)}this.maxDepth=n.maxDepth||1/0,n.signal&&(this.signal=n.signal,this.signal.addEventListener("abort",()=>{this.#e.length=0}))}#n(e){return this.seen.has(e)||!!this.#t?.ignored?.(e)}#a(e){return!!this.#t?.childrenIgnored?.(e)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;this.paused=!1;let e;for(;!this.paused&&(e=this.#e.shift());)e()}onResume(e){this.signal?.aborted||(this.paused?this.#e.push(e):e())}async matchCheck(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||await e.realpath(),!n)return;e=n}let o=e.isUnknown()||this.opts.stat?await e.lstat():e;if(this.opts.follow&&this.opts.nodir&&o?.isSymbolicLink()){let s=await o.realpath();s&&(s.isUnknown()||this.opts.stat)&&await s.lstat()}return this.matchCheckTest(o,r)}matchCheckTest(e,r){return e&&(this.maxDepth===1/0||e.depth()<=this.maxDepth)&&(!r||e.canReaddir())&&(!this.opts.nodir||!e.isDirectory())&&(!this.opts.nodir||!this.opts.follow||!e.isSymbolicLink()||!e.realpathCached()?.isDirectory())&&!this.#n(e)?e:void 0}matchCheckSync(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||e.realpathSync(),!n)return;e=n}let o=e.isUnknown()||this.opts.stat?e.lstatSync():e;if(this.opts.follow&&this.opts.nodir&&o?.isSymbolicLink()){let s=o.realpathSync();s&&(s?.isUnknown()||this.opts.stat)&&s.lstatSync()}return this.matchCheckTest(o,r)}matchFinish(e,r){if(this.#n(e))return;if(!this.includeChildMatches&&this.#t?.add){let o=`${e.relativePosix()}/**`;this.#t.add(o)}let n=this.opts.absolute===void 0?r:this.opts.absolute;this.seen.add(e);let i=this.opts.mark&&e.isDirectory()?this.#o:"";if(this.opts.withFileTypes)this.matchEmit(e);else if(n){let o=this.opts.posix?e.fullpathPosix():e.fullpath();this.matchEmit(o+i)}else{let o=this.opts.posix?e.relativePosix():e.relative(),s=this.opts.dotRelative&&!o.startsWith(".."+this.#o)?"."+this.#o:"";this.matchEmit(o?s+o+i:"."+i)}}async match(e,r,n){let i=await this.matchCheck(e,n);i&&this.matchFinish(i,r)}matchSync(e,r,n){let i=this.matchCheckSync(e,n);i&&this.matchFinish(i,r)}walkCB(e,r,n){this.signal?.aborted&&n(),this.walkCB2(e,r,new _u(this.opts),n)}walkCB2(e,r,n,i){if(this.#a(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2(e,r,n,i));return}n.processPatterns(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,u,m]of n.matches.entries())this.#n(l)||(o++,this.match(l,u,m).then(()=>s()));for(let l of n.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;o++;let u=l.readdirCached();l.calledReaddir()?this.walkCB3(l,u,n,s):l.readdirCB((m,d)=>this.walkCB3(l,d,n,s),!0)}s()}walkCB3(e,r,n,i){n=n.filterEntries(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,u,m]of n.matches.entries())this.#n(l)||(o++,this.match(l,u,m).then(()=>s()));for(let[l,u]of n.subwalks.entries())o++,this.walkCB2(l,u,n.child(),s);s()}walkCBSync(e,r,n){this.signal?.aborted&&n(),this.walkCB2Sync(e,r,new _u(this.opts),n)}walkCB2Sync(e,r,n,i){if(this.#a(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2Sync(e,r,n,i));return}n.processPatterns(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,u,m]of n.matches.entries())this.#n(l)||this.matchSync(l,u,m);for(let l of n.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;o++;let u=l.readdirSync();this.walkCB3Sync(l,u,n,s)}s()}walkCB3Sync(e,r,n,i){n=n.filterEntries(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,u,m]of n.matches.entries())this.#n(l)||this.matchSync(l,u,m);for(let[l,u]of n.subwalks.entries())o++,this.walkCB2Sync(l,u,n.child(),s);s()}},Ru=class extends ry{matches=new Set;constructor(e,r,n){super(e,r,n)}matchEmit(e){this.matches.add(e)}async walk(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise((e,r)=>{this.walkCB(this.path,this.patterns,()=>{this.signal?.aborted?r(this.signal.reason):e(this.matches)})}),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>{if(this.signal?.aborted)throw this.signal.reason}),this.matches}},ku=class extends ry{results;constructor(e,r,n){super(e,r,n),this.results=new Po({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(e){this.results.write(e),this.results.flowing||this.pause()}stream(){let e=this.path;return e.isUnknown()?e.lstat().then(()=>{this.walkCB(e,this.patterns,()=>this.results.end())}):this.walkCB(e,this.patterns,()=>this.results.end()),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}};var S8=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",Hn=class{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;includeChildMatches;opts;patterns;constructor(e,r){if(!r)throw new TypeError("glob options required");if(this.withFileTypes=!!r.withFileTypes,this.signal=r.signal,this.follow=!!r.follow,this.dot=!!r.dot,this.dotRelative=!!r.dotRelative,this.nodir=!!r.nodir,this.mark=!!r.mark,r.cwd?(r.cwd instanceof URL||r.cwd.startsWith("file://"))&&(r.cwd=(0,_L.fileURLToPath)(r.cwd)):this.cwd="",this.cwd=r.cwd||"",this.root=r.root,this.magicalBraces=!!r.magicalBraces,this.nobrace=!!r.nobrace,this.noext=!!r.noext,this.realpath=!!r.realpath,this.absolute=r.absolute,this.includeChildMatches=r.includeChildMatches!==!1,this.noglobstar=!!r.noglobstar,this.matchBase=!!r.matchBase,this.maxDepth=typeof r.maxDepth=="number"?r.maxDepth:1/0,this.stat=!!r.stat,this.ignore=r.ignore,this.withFileTypes&&this.absolute!==void 0)throw new Error("cannot set absolute and withFileTypes:true");if(typeof e=="string"&&(e=[e]),this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(e=e.map(u=>u.replace(/\\/g,"/"))),this.matchBase){if(r.noglobstar)throw new TypeError("base matching requires globstar");e=e.map(u=>u.includes("/")?u:`./**/${u}`)}if(this.pattern=e,this.platform=r.platform||S8,this.opts={...r,platform:this.platform},r.scurry){if(this.scurry=r.scurry,r.nocase!==void 0&&r.nocase!==r.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{let u=r.platform==="win32"?yc:r.platform==="darwin"?Eu:r.platform?xc:EL;this.scurry=new u(this.cwd,{nocase:r.nocase,fs:r.fs})}this.nocase=this.scurry.nocase;let n=this.platform==="darwin"||this.platform==="win32",i={...r,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:n,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},o=this.pattern.map(u=>new Qr(u,i)),[s,l]=o.reduce((u,m)=>(u[0].push(...m.set),u[1].push(...m.globParts),u),[[],[]]);this.patterns=s.map((u,m)=>{let d=l[m];if(!d)throw new Error("invalid pattern object");return new Tc(u,d,0,this.platform)})}async walk(){return[...await new Ru(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walk()]}walkSync(){return[...new Ru(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walkSync()]}stream(){return new ku(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).stream()}streamSync(){return new ku(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}};var sb=(t,e={})=>{Array.isArray(t)||(t=[t]);for(let r of t)if(new Qr(r,e).hasMagic())return!0;return!1};function ny(t,e={}){return new Hn(t,e).streamSync()}function kL(t,e={}){return new Hn(t,e).stream()}function AL(t,e={}){return new Hn(t,e).walkSync()}async function RL(t,e={}){return new Hn(t,e).walk()}function iy(t,e={}){return new Hn(t,e).iterateSync()}function PL(t,e={}){return new Hn(t,e).iterate()}var v8=ny,b8=Object.assign(kL,{sync:ny}),w8=iy,E8=Object.assign(PL,{sync:iy}),_8=Object.assign(AL,{stream:ny,iterate:iy}),cb=Object.assign(RL,{glob:RL,globSync:AL,sync:_8,globStream:kL,stream:b8,globStreamSync:ny,streamSync:v8,globIterate:PL,iterate:E8,globIterateSync:iy,iterateSync:w8,Glob:Hn,hasMagic:sb,escape:pc,unescape:On});cb.glob=cb;function ML(){let t=process.env.CURSORLESS_MODE;switch(t){case void 0:case"production":return"production";case"development":return"development";case"test":return"test";default:throw new Error(`Unexpected value for environment variable CURSORLESS_MODE: ${t}`)}}var BL=Object.defineProperty,A8=Object.getOwnPropertyNames,O=(t,e)=>BL(t,"name",{value:e,configurable:!0}),P8=(t,e)=>function(){return e||(0,t[A8(t)[0]])((e={exports:{}}).exports,e),e.exports},_b=(t,e)=>{for(var r in e)BL(t,r,{get:e[r],enumerable:!0})},M8=P8({"(disabled):util"(){}}),oy={};_b(oy,{addChainableMethod:()=>Nb,addLengthGuard:()=>Fu,addMethod:()=>Ib,addProperty:()=>Lb,checkError:()=>Zr,compareByInspect:()=>ly,eql:()=>dI,expectTypes:()=>KL,flag:()=>ke,getActual:()=>gy,getMessage:()=>Ab,getName:()=>yy,getOperator:()=>Vb,getOwnEnumerableProperties:()=>Bb,getOwnEnumerablePropertySymbols:()=>Hb,getPathInfo:()=>Fb,hasProperty:()=>hy,inspect:()=>$e,isNaN:()=>uy,isNumeric:()=>Bt,isProxyEnabled:()=>Du,isRegExp:()=>py,objDisplay:()=>Ma,overwriteChainableMethod:()=>Ub,overwriteMethod:()=>Ob,overwriteProperty:()=>Cb,proxify:()=>Ec,test:()=>Rb,transferFlags:()=>Bn,type:()=>Xe});var Zr={};_b(Zr,{compatibleConstructor:()=>$L,compatibleInstance:()=>WL,compatibleMessage:()=>jL,getConstructorName:()=>zL,getMessage:()=>qL});function dy(t){return t instanceof Error||Object.prototype.toString.call(t)==="[object Error]"}O(dy,"isErrorInstance");function VL(t){return Object.prototype.toString.call(t)==="[object RegExp]"}O(VL,"isRegExp");function WL(t,e){return dy(e)&&t===e}O(WL,"compatibleInstance");function $L(t,e){return dy(e)?t.constructor===e.constructor||t instanceof e.constructor:(typeof e=="object"||typeof e=="function")&&e.prototype?t.constructor===e||t instanceof e:!1}O($L,"compatibleConstructor");function jL(t,e){let r=typeof t=="string"?t:t.message;return VL(e)?e.test(r):typeof e=="string"?r.indexOf(e)!==-1:!1}O(jL,"compatibleMessage");function zL(t){let e=t;return dy(t)?e=t.constructor.name:typeof t=="function"&&(e=t.name,e===""&&(e=new t().name||e)),e}O(zL,"getConstructorName");function qL(t){let e="";return t&&t.message?e=t.message:typeof t=="string"&&(e=t),e}O(qL,"getMessage");function ke(t,e,r){var n=t.__flags||(t.__flags=Object.create(null));if(arguments.length===3)n[e]=r;else return n[e]}O(ke,"flag");function Rb(t,e){var r=ke(t,"negate"),n=e[0];return r?!n:n}O(Rb,"test");function Xe(t){if(typeof t>"u")return"undefined";if(t===null)return"null";let e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}O(Xe,"type");var D8="captureStackTrace"in Error,ze=class GL extends Error{static{O(this,"AssertionError")}message;get name(){return"AssertionError"}get ok(){return!1}constructor(e="Unspecified AssertionError",r,n){super(e),this.message=e,D8&&Error.captureStackTrace(this,n||GL);for(let i in r)i in this||(this[i]=r[i])}toJSON(e){return{...this,name:this.name,message:this.message,ok:!1,stack:e!==!1?this.stack:void 0}}};function KL(t,e){var r=ke(t,"message"),n=ke(t,"ssfi");r=r?r+": ":"",t=ke(t,"object"),e=e.map(function(s){return s.toLowerCase()}),e.sort();var i=e.map(function(s,l){var u=~["a","e","i","o","u"].indexOf(s.charAt(0))?"an":"a",m=e.length>1&&l===e.length-1?"or ":"";return m+u+" "+s}).join(", "),o=Xe(t).toLowerCase();if(!e.some(function(s){return o===s}))throw new ze(r+"object tested must be "+i+", but "+o+" given",void 0,n)}O(KL,"expectTypes");function gy(t,e){return e.length>4?e[4]:t._obj}O(gy,"getActual");var DL={bold:["1","22"],dim:["2","22"],italic:["3","23"],underline:["4","24"],inverse:["7","27"],hidden:["8","28"],strike:["9","29"],black:["30","39"],red:["31","39"],green:["32","39"],yellow:["33","39"],blue:["34","39"],magenta:["35","39"],cyan:["36","39"],white:["37","39"],brightblack:["30;1","39"],brightred:["31;1","39"],brightgreen:["32;1","39"],brightyellow:["33;1","39"],brightblue:["34;1","39"],brightmagenta:["35;1","39"],brightcyan:["36;1","39"],brightwhite:["37;1","39"],grey:["90","39"]},F8={special:"cyan",number:"yellow",bigint:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",symbol:"green",date:"magenta",regexp:"red"},bc="\u2026";function QL(t,e){let r=DL[F8[e]]||DL[e]||"";return r?`\x1B[${r[0]}m${String(t)}\x1B[${r[1]}m`:String(t)}O(QL,"colorise");function YL({showHidden:t=!1,depth:e=2,colors:r=!1,customInspect:n=!0,showProxy:i=!1,maxArrayLength:o=1/0,breakLength:s=1/0,seen:l=[],truncate:u=1/0,stylize:m=String}={},d){let g={showHidden:!!t,depth:Number(e),colors:!!r,customInspect:!!n,showProxy:!!i,maxArrayLength:Number(o),breakLength:Number(s),truncate:Number(u),seen:l,inspect:d,stylize:m};return g.colors&&(g.stylize=QL),g}O(YL,"normaliseOptions");function ZL(t){return t>="\uD800"&&t<="\uDBFF"}O(ZL,"isHighSurrogate");function Ui(t,e,r=bc){t=String(t);let n=r.length,i=t.length;if(n>e&&i>n)return r;if(i>e&&i>n){let o=e-n;return o>0&&ZL(t[o-1])&&(o=o-1),`${t.slice(0,o)}${r}`}return t}O(Ui,"truncate");function bn(t,e,r,n=", "){r=r||e.inspect;let i=t.length;if(i===0)return"";let o=e.truncate,s="",l="",u="";for(let m=0;m<i;m+=1){let d=m+1===t.length,g=m+2===t.length;u=`${bc}(${t.length-m})`;let y=t[m];e.truncate=o-s.length-(d?0:n.length);let T=l||r(y,e)+(d?"":n),w=s.length+T.length,E=w+u.length;if(d&&w>o&&s.length+u.length<=o||!d&&!g&&E>o||(l=d?"":r(t[m+1],e)+(g?"":n),!d&&g&&E>o&&w+l.length>o))break;if(s+=T,!d&&!g&&w+l.length>=o){u=`${bc}(${t.length-m-1})`;break}u=""}return`${s}${u}`}O(bn,"inspectList");function XL(t){return t.match(/^[a-zA-Z_][a-zA-Z_0-9]*$/)?t:JSON.stringify(t).replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'")}O(XL,"quoteComplexKey");function wc([t,e],r){return r.truncate-=2,typeof t=="string"?t=XL(t):typeof t!="number"&&(t=`[${r.inspect(t,r)}]`),r.truncate-=t.length,e=r.inspect(e,r),`${t}: ${e}`}O(wc,"inspectProperty");function JL(t,e){let r=Object.keys(t).slice(t.length);if(!t.length&&!r.length)return"[]";e.truncate-=4;let n=bn(t,e);e.truncate-=n.length;let i="";return r.length&&(i=bn(r.map(o=>[o,t[o]]),e,wc)),`[ ${n}${i?`, ${i}`:""} ]`}O(JL,"inspectArray");var L8=O(t=>typeof Buffer=="function"&&t instanceof Buffer?"Buffer":t[Symbol.toStringTag]?t[Symbol.toStringTag]:t.constructor.name,"getArrayName");function li(t,e){let r=L8(t);e.truncate-=r.length+4;let n=Object.keys(t).slice(t.length);if(!t.length&&!n.length)return`${r}[]`;let i="";for(let s=0;s<t.length;s++){let l=`${e.stylize(Ui(t[s],e.truncate),"number")}${s===t.length-1?"":", "}`;if(e.truncate-=l.length,t[s]!==t.length&&e.truncate<=3){i+=`${bc}(${t.length-t[s]+1})`;break}i+=l}let o="";return n.length&&(o=bn(n.map(s=>[s,t[s]]),e,wc)),`${r}[ ${i}${o?`, ${o}`:""} ]`}O(li,"inspectTypedArray");function eI(t,e){let r=t.toJSON();if(r===null)return"Invalid Date";let n=r.split("T"),i=n[0];return e.stylize(`${i}T${Ui(n[1],e.truncate-i.length-1)}`,"date")}O(eI,"inspectDate");function pb(t,e){let r=t[Symbol.toStringTag]||"Function",n=t.name;return n?e.stylize(`[${r} ${Ui(n,e.truncate-11)}]`,"special"):e.stylize(`[${r}]`,"special")}O(pb,"inspectFunction");function tI([t,e],r){return r.truncate-=4,t=r.inspect(t,r),r.truncate-=t.length,e=r.inspect(e,r),`${t} => ${e}`}O(tI,"inspectMapEntry");function rI(t){let e=[];return t.forEach((r,n)=>{e.push([n,r])}),e}O(rI,"mapToEntries");function nI(t,e){return t.size-1<=0?"Map{}":(e.truncate-=7,`Map{ ${bn(rI(t),e,tI)} }`)}O(nI,"inspectMap");var I8=Number.isNaN||(t=>t!==t);function mb(t,e){return I8(t)?e.stylize("NaN","number"):t===1/0?e.stylize("Infinity","number"):t===-1/0?e.stylize("-Infinity","number"):t===0?e.stylize(1/t===1/0?"+0":"-0","number"):e.stylize(Ui(String(t),e.truncate),"number")}O(mb,"inspectNumber");function fb(t,e){let r=Ui(t.toString(),e.truncate-1);return r!==bc&&(r+="n"),e.stylize(r,"bigint")}O(fb,"inspectBigInt");function iI(t,e){let r=t.toString().split("/")[2],n=e.truncate-(2+r.length),i=t.source;return e.stylize(`/${Ui(i,n)}/${r}`,"regexp")}O(iI,"inspectRegExp");function oI(t){let e=[];return t.forEach(r=>{e.push(r)}),e}O(oI,"arrayFromSet");function aI(t,e){return t.size===0?"Set{}":(e.truncate-=7,`Set{ ${bn(oI(t),e)} }`)}O(aI,"inspectSet");var FL=new RegExp("['\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]","g"),C8={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"},O8=16,N8=4;function sI(t){return C8[t]||`\\u${`0000${t.charCodeAt(0).toString(O8)}`.slice(-N8)}`}O(sI,"escape");function db(t,e){return FL.test(t)&&(t=t.replace(FL,sI)),e.stylize(`'${Ui(t,e.truncate-2)}'`,"string")}O(db,"inspectString");function gb(t){return"description"in Symbol.prototype?t.description?`Symbol(${t.description})`:"Symbol()":t.toString()}O(gb,"inspectSymbol");var cI=O(()=>"Promise{\u2026}","getPromiseValue");try{let{getPromiseDetails:t,kPending:e,kRejected:r}=process.binding("util");Array.isArray(t(Promise.resolve()))&&(cI=O((n,i)=>{let[o,s]=t(n);return o===e?"Promise{<pending>}":`Promise${o===r?"!":""}{${i.inspect(s,i)}}`},"getPromiseValue"))}catch{}var U8=cI;function Pu(t,e){let r=Object.getOwnPropertyNames(t),n=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[];if(r.length===0&&n.length===0)return"{}";if(e.truncate-=4,e.seen=e.seen||[],e.seen.includes(t))return"[Circular]";e.seen.push(t);let i=bn(r.map(l=>[l,t[l]]),e,wc),o=bn(n.map(l=>[l,t[l]]),e,wc);e.seen.pop();let s="";return i&&o&&(s=", "),`{ ${i}${s}${o} }`}O(Pu,"inspectObject");var lb=typeof Symbol<"u"&&Symbol.toStringTag?Symbol.toStringTag:!1;function lI(t,e){let r="";return lb&&lb in t&&(r=t[lb]),r=r||t.constructor.name,(!r||r==="_class")&&(r="<Anonymous Class>"),e.truncate-=r.length,`${r}${Pu(t,e)}`}O(lI,"inspectClass");function uI(t,e){return t.length===0?"Arguments[]":(e.truncate-=13,`Arguments[ ${bn(t,e)} ]`)}O(uI,"inspectArguments");var H8=["stack","line","column","name","message","fileName","lineNumber","columnNumber","number","description","cause"];function pI(t,e){let r=Object.getOwnPropertyNames(t).filter(s=>H8.indexOf(s)===-1),n=t.name;e.truncate-=n.length;let i="";if(typeof t.message=="string"?i=Ui(t.message,e.truncate):r.unshift("message"),i=i?`: ${i}`:"",e.truncate-=i.length+5,e.seen=e.seen||[],e.seen.includes(t))return"[Circular]";e.seen.push(t);let o=bn(r.map(s=>[s,t[s]]),e,wc);return`${n}${i}${o?` { ${o} }`:""}`}O(pI,"inspectObject");function mI([t,e],r){return r.truncate-=3,e?`${r.stylize(String(t),"yellow")}=${r.stylize(`"${e}"`,"string")}`:`${r.stylize(String(t),"yellow")}`}O(mI,"inspectAttribute");function ay(t,e){return bn(t,e,kb,`
`)}O(ay,"inspectHTMLCollection");function kb(t,e){let r=t.getAttributeNames(),n=t.tagName.toLowerCase(),i=e.stylize(`<${n}`,"special"),o=e.stylize(">","special"),s=e.stylize(`</${n}>`,"special");e.truncate-=n.length*2+5;let l="";r.length>0&&(l+=" ",l+=bn(r.map(d=>[d,t.getAttribute(d)]),e,mI," ")),e.truncate-=l.length;let u=e.truncate,m=ay(t.children,e);return m&&m.length>u&&(m=`${bc}(${t.children.length})`),`${i}${l}${o}${m}${s}`}O(kb,"inspectHTML");var B8=typeof Symbol=="function"&&typeof Symbol.for=="function",ub=B8?Symbol.for("chai/inspect"):"@@chai/inspect",vc=!1;try{let t=M8();vc=t.inspect?t.inspect.custom:!1}catch{vc=!1}var LL=new WeakMap,IL={},CL={undefined:(t,e)=>e.stylize("undefined","undefined"),null:(t,e)=>e.stylize("null","null"),boolean:(t,e)=>e.stylize(String(t),"boolean"),Boolean:(t,e)=>e.stylize(String(t),"boolean"),number:mb,Number:mb,bigint:fb,BigInt:fb,string:db,String:db,function:pb,Function:pb,symbol:gb,Symbol:gb,Array:JL,Date:eI,Map:nI,Set:aI,RegExp:iI,Promise:U8,WeakSet:(t,e)=>e.stylize("WeakSet{\u2026}","special"),WeakMap:(t,e)=>e.stylize("WeakMap{\u2026}","special"),Arguments:uI,Int8Array:li,Uint8Array:li,Uint8ClampedArray:li,Int16Array:li,Uint16Array:li,Int32Array:li,Uint32Array:li,Float32Array:li,Float64Array:li,Generator:()=>"",DataView:()=>"",ArrayBuffer:()=>"",Error:pI,HTMLCollection:ay,NodeList:ay},V8=O((t,e,r)=>ub in t&&typeof t[ub]=="function"?t[ub](e):vc&&vc in t&&typeof t[vc]=="function"?t[vc](e.depth,e):"inspect"in t&&typeof t.inspect=="function"?t.inspect(e.depth,e):"constructor"in t&&LL.has(t.constructor)?LL.get(t.constructor)(t,e):IL[r]?IL[r](t,e):"","inspectCustom"),W8=Object.prototype.toString;function sy(t,e={}){let r=YL(e,sy),{customInspect:n}=r,i=t===null?"null":typeof t;if(i==="object"&&(i=W8.call(t).slice(8,-1)),i in CL)return CL[i](t,r);if(n&&t){let s=V8(t,r,i);if(s)return typeof s=="string"?s:sy(s,r)}let o=t?Object.getPrototypeOf(t):!1;return o===Object.prototype||o===null?Pu(t,r):t&&typeof HTMLElement=="function"&&t instanceof HTMLElement?kb(t,r):"constructor"in t?t.constructor!==Object?lI(t,r):Pu(t,r):t===Object(t)?Pu(t,r):r.stylize(String(t),i)}O(sy,"inspect");var xr={includeStack:!1,showDiff:!0,truncateThreshold:40,useProxy:!0,proxyExcludedKeys:["then","catch","inspect","toJSON"],deepEqual:null};function $e(t,e,r,n){var i={colors:n,depth:typeof r>"u"?2:r,showHidden:e,truncate:xr.truncateThreshold?xr.truncateThreshold:1/0};return sy(t,i)}O($e,"inspect");function Ma(t){var e=$e(t),r=Object.prototype.toString.call(t);if(xr.truncateThreshold&&e.length>=xr.truncateThreshold){if(r==="[object Function]")return!t.name||t.name===""?"[Function]":"[Function: "+t.name+"]";if(r==="[object Array]")return"[ Array("+t.length+") ]";if(r==="[object Object]"){var n=Object.keys(t),i=n.length>2?n.splice(0,2).join(", ")+", ...":n.join(", ");return"{ Object ("+i+") }"}else return e}else return e}O(Ma,"objDisplay");function Ab(t,e){var r=ke(t,"negate"),n=ke(t,"object"),i=e[3],o=gy(t,e),s=r?e[2]:e[1],l=ke(t,"message");return typeof s=="function"&&(s=s()),s=s||"",s=s.replace(/#\{this\}/g,function(){return Ma(n)}).replace(/#\{act\}/g,function(){return Ma(o)}).replace(/#\{exp\}/g,function(){return Ma(i)}),l?l+": "+s:s}O(Ab,"getMessage");function Bn(t,e,r){var n=t.__flags||(t.__flags=Object.create(null));e.__flags||(e.__flags=Object.create(null)),r=arguments.length===3?r:!0;for(var i in n)(r||i!=="object"&&i!=="ssfi"&&i!=="lockSsfi"&&i!="message")&&(e.__flags[i]=n[i])}O(Bn,"transferFlags");function hb(t){if(typeof t>"u")return"undefined";if(t===null)return"null";let e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}O(hb,"type");function Pb(){this._key="chai/deep-eql__"+Math.random()+Date.now()}O(Pb,"FakeMap");Pb.prototype={get:O(function(e){return e[this._key]},"get"),set:O(function(e,r){Object.isExtensible(e)&&Object.defineProperty(e,this._key,{value:r,configurable:!0})},"set")};var fI=typeof WeakMap=="function"?WeakMap:Pb;function yb(t,e,r){if(!r||Da(t)||Da(e))return null;var n=r.get(t);if(n){var i=n.get(e);if(typeof i=="boolean")return i}return null}O(yb,"memoizeCompare");function Au(t,e,r,n){if(!(!r||Da(t)||Da(e))){var i=r.get(t);i?i.set(e,n):(i=new fI,i.set(e,n),r.set(t,i))}}O(Au,"memoizeSet");var dI=Mu;function Mu(t,e,r){if(r&&r.comparator)return xb(t,e,r);var n=Mb(t,e);return n!==null?n:xb(t,e,r)}O(Mu,"deepEqual");function Mb(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e?!0:Da(t)||Da(e)?!1:null}O(Mb,"simpleEqual");function xb(t,e,r){r=r||{},r.memoize=r.memoize===!1?!1:r.memoize||new fI;var n=r&&r.comparator,i=yb(t,e,r.memoize);if(i!==null)return i;var o=yb(e,t,r.memoize);if(o!==null)return o;if(n){var s=n(t,e);if(s===!1||s===!0)return Au(t,e,r.memoize,s),s;var l=Mb(t,e);if(l!==null)return l}var u=hb(t);if(u!==hb(e))return Au(t,e,r.memoize,!1),!1;Au(t,e,r.memoize,!0);var m=gI(t,e,u,r);return Au(t,e,r.memoize,m),m}O(xb,"extensiveDeepEqual");function gI(t,e,r,n){switch(r){case"String":case"Number":case"Boolean":case"Date":return Mu(t.valueOf(),e.valueOf());case"Promise":case"Symbol":case"function":case"WeakMap":case"WeakSet":return t===e;case"Error":return Db(t,e,["name","message","code"],n);case"Arguments":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"Array":return Do(t,e,n);case"RegExp":return hI(t,e);case"Generator":return yI(t,e,n);case"DataView":return Do(new Uint8Array(t.buffer),new Uint8Array(e.buffer),n);case"ArrayBuffer":return Do(new Uint8Array(t),new Uint8Array(e),n);case"Set":return Tb(t,e,n);case"Map":return Tb(t,e,n);case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.Instant":case"Temporal.ZonedDateTime":case"Temporal.PlainYearMonth":case"Temporal.PlainMonthDay":return t.equals(e);case"Temporal.Duration":return t.total("nanoseconds")===e.total("nanoseconds");case"Temporal.TimeZone":case"Temporal.Calendar":return t.toString()===e.toString();default:return TI(t,e,n)}}O(gI,"extensiveDeepEqualByType");function hI(t,e){return t.toString()===e.toString()}O(hI,"regexpEqual");function Tb(t,e,r){try{if(t.size!==e.size)return!1;if(t.size===0)return!0}catch{return!1}var n=[],i=[];return t.forEach(O(function(s,l){n.push([s,l])},"gatherEntries")),e.forEach(O(function(s,l){i.push([s,l])},"gatherEntries")),Do(n.sort(),i.sort(),r)}O(Tb,"entriesEqual");function Do(t,e,r){var n=t.length;if(n!==e.length)return!1;if(n===0)return!0;for(var i=-1;++i<n;)if(Mu(t[i],e[i],r)===!1)return!1;return!0}O(Do,"iterableEqual");function yI(t,e,r){return Do(cy(t),cy(e),r)}O(yI,"generatorEqual");function xI(t){return typeof Symbol<"u"&&typeof t=="object"&&typeof Symbol.iterator<"u"&&typeof t[Symbol.iterator]=="function"}O(xI,"hasIteratorFunction");function Sb(t){if(xI(t))try{return cy(t[Symbol.iterator]())}catch{return[]}return[]}O(Sb,"getIteratorEntries");function cy(t){for(var e=t.next(),r=[e.value];e.done===!1;)e=t.next(),r.push(e.value);return r}O(cy,"getGeneratorEntries");function vb(t){var e=[];for(var r in t)e.push(r);return e}O(vb,"getEnumerableKeys");function bb(t){for(var e=[],r=Object.getOwnPropertySymbols(t),n=0;n<r.length;n+=1){var i=r[n];Object.getOwnPropertyDescriptor(t,i).enumerable&&e.push(i)}return e}O(bb,"getEnumerableSymbols");function Db(t,e,r,n){var i=r.length;if(i===0)return!0;for(var o=0;o<i;o+=1)if(Mu(t[r[o]],e[r[o]],n)===!1)return!1;return!0}O(Db,"keysEqual");function TI(t,e,r){var n=vb(t),i=vb(e),o=bb(t),s=bb(e);if(n=n.concat(o),i=i.concat(s),n.length&&n.length===i.length)return Do(wb(n).sort(),wb(i).sort())===!1?!1:Db(t,e,n,r);var l=Sb(t),u=Sb(e);return l.length&&l.length===u.length?(l.sort(),u.sort(),Do(l,u,r)):n.length===0&&l.length===0&&i.length===0&&u.length===0}O(TI,"objectEqual");function Da(t){return t===null||typeof t!="object"}O(Da,"isPrimitive");function wb(t){return t.map(O(function(r){return typeof r=="symbol"?r.toString():r},"mapSymbol"))}O(wb,"mapSymbols");function hy(t,e){return typeof t>"u"||t===null?!1:e in Object(t)}O(hy,"hasProperty");function SI(t){return t.replace(/([^\\])\[/g,"$1.[").match(/(\\\.|[^.]+?)+/g).map(n=>{if(n==="constructor"||n==="__proto__"||n==="prototype")return{};let o=/^\[(\d+)\]$/.exec(n),s=null;return o?s={i:parseFloat(o[1])}:s={p:n.replace(/\\([.[\]])/g,"$1")},s})}O(SI,"parsePath");function Eb(t,e,r){let n=t,i=null;r=typeof r>"u"?e.length:r;for(let o=0;o<r;o++){let s=e[o];n&&(typeof s.p>"u"?n=n[s.i]:n=n[s.p],o===r-1&&(i=n))}return i}O(Eb,"internalGetPathValue");function Fb(t,e){let r=SI(e),n=r[r.length-1],i={parent:r.length>1?Eb(t,r,r.length-1):t,name:n.p||n.i,value:Eb(t,r)};return i.exists=hy(i.parent,i.name),i}O(Fb,"getPathInfo");function b(t,e,r,n){return ke(this,"ssfi",r||b),ke(this,"lockSsfi",n),ke(this,"object",t),ke(this,"message",e),ke(this,"eql",xr.deepEqual||dI),Ec(this)}O(b,"Assertion");Object.defineProperty(b,"includeStack",{get:function(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),xr.includeStack},set:function(t){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),xr.includeStack=t}});Object.defineProperty(b,"showDiff",{get:function(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),xr.showDiff},set:function(t){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),xr.showDiff=t}});b.addProperty=function(t,e){Lb(this.prototype,t,e)};b.addMethod=function(t,e){Ib(this.prototype,t,e)};b.addChainableMethod=function(t,e,r){Nb(this.prototype,t,e,r)};b.overwriteProperty=function(t,e){Cb(this.prototype,t,e)};b.overwriteMethod=function(t,e){Ob(this.prototype,t,e)};b.overwriteChainableMethod=function(t,e,r){Ub(this.prototype,t,e,r)};b.prototype.assert=function(t,e,r,n,i,o){var s=Rb(this,arguments);if(o!==!1&&(o=!0),n===void 0&&i===void 0&&(o=!1),xr.showDiff!==!0&&(o=!1),!s){e=Ab(this,arguments);var l=gy(this,arguments),u={actual:l,expected:n,showDiff:o},m=Vb(this,arguments);throw m&&(u.operator=m),new ze(e,u,xr.includeStack?this.assert:ke(this,"ssfi"))}};Object.defineProperty(b.prototype,"_obj",{get:function(){return ke(this,"object")},set:function(t){ke(this,"object",t)}});function Du(){return xr.useProxy&&typeof Proxy<"u"&&typeof Reflect<"u"}O(Du,"isProxyEnabled");function Lb(t,e,r){r=r===void 0?function(){}:r,Object.defineProperty(t,e,{get:O(function n(){!Du()&&!ke(this,"lockSsfi")&&ke(this,"ssfi",n);var i=r.call(this);if(i!==void 0)return i;var o=new b;return Bn(this,o),o},"propertyGetter"),configurable:!0})}O(Lb,"addProperty");var $8=Object.getOwnPropertyDescriptor(function(){},"length");function Fu(t,e,r){return $8.configurable&&Object.defineProperty(t,"length",{get:function(){throw Error(r?"Invalid Chai property: "+e+'.length. Due to a compatibility issue, "length" cannot directly follow "'+e+'". Use "'+e+'.lengthOf" instead.':"Invalid Chai property: "+e+'.length. See docs for proper usage of "'+e+'".')}}),t}O(Fu,"addLengthGuard");function vI(t){var e=Object.getOwnPropertyNames(t);function r(i){e.indexOf(i)===-1&&e.push(i)}O(r,"addProperty");for(var n=Object.getPrototypeOf(t);n!==null;)Object.getOwnPropertyNames(n).forEach(r),n=Object.getPrototypeOf(n);return e}O(vI,"getProperties");var OL=["__flags","__methods","_obj","assert"];function Ec(t,e){return Du()?new Proxy(t,{get:O(function r(n,i){if(typeof i=="string"&&xr.proxyExcludedKeys.indexOf(i)===-1&&!Reflect.has(n,i)){if(e)throw Error("Invalid Chai property: "+e+"."+i+'. See docs for proper usage of "'+e+'".');var o=null,s=4;throw vI(n).forEach(function(l){if(!Object.prototype.hasOwnProperty(l)&&OL.indexOf(l)===-1){var u=bI(i,l,s);u<s&&(o=l,s=u)}}),Error(o!==null?"Invalid Chai property: "+i+'. Did you mean "'+o+'"?':"Invalid Chai property: "+i)}return OL.indexOf(i)===-1&&!ke(n,"lockSsfi")&&ke(n,"ssfi",r),Reflect.get(n,i)},"proxyGetter")}):t}O(Ec,"proxify");function bI(t,e,r){if(Math.abs(t.length-e.length)>=r)return r;var n=[];for(let o=0;o<=t.length;o++)n[o]=Array(e.length+1).fill(0),n[o][0]=o;for(let o=0;o<e.length;o++)n[0][o]=o;for(let o=1;o<=t.length;o++){var i=t.charCodeAt(o-1);for(let s=1;s<=e.length;s++){if(Math.abs(o-s)>=r){n[o][s]=r;continue}n[o][s]=Math.min(n[o-1][s]+1,n[o][s-1]+1,n[o-1][s-1]+(i===e.charCodeAt(s-1)?0:1))}}return n[t.length][e.length]}O(bI,"stringDistanceCapped");function Ib(t,e,r){var n=O(function(){ke(this,"lockSsfi")||ke(this,"ssfi",n);var i=r.apply(this,arguments);if(i!==void 0)return i;var o=new b;return Bn(this,o),o},"methodWrapper");Fu(n,e,!1),t[e]=Ec(n,e)}O(Ib,"addMethod");function Cb(t,e,r){var n=Object.getOwnPropertyDescriptor(t,e),i=O(function(){},"_super");n&&typeof n.get=="function"&&(i=n.get),Object.defineProperty(t,e,{get:O(function o(){!Du()&&!ke(this,"lockSsfi")&&ke(this,"ssfi",o);var s=ke(this,"lockSsfi");ke(this,"lockSsfi",!0);var l=r(i).call(this);if(ke(this,"lockSsfi",s),l!==void 0)return l;var u=new b;return Bn(this,u),u},"overwritingPropertyGetter"),configurable:!0})}O(Cb,"overwriteProperty");function Ob(t,e,r){var n=t[e],i=O(function(){throw new Error(e+" is not a function")},"_super");n&&typeof n=="function"&&(i=n);var o=O(function(){ke(this,"lockSsfi")||ke(this,"ssfi",o);var s=ke(this,"lockSsfi");ke(this,"lockSsfi",!0);var l=r(i).apply(this,arguments);if(ke(this,"lockSsfi",s),l!==void 0)return l;var u=new b;return Bn(this,u),u},"overwritingMethodWrapper");Fu(o,e,!1),t[e]=Ec(o,e)}O(Ob,"overwriteMethod");var j8=typeof Object.setPrototypeOf=="function",NL=O(function(){},"testFn"),z8=Object.getOwnPropertyNames(NL).filter(function(t){var e=Object.getOwnPropertyDescriptor(NL,t);return typeof e!="object"?!0:!e.configurable}),q8=Function.prototype.call,G8=Function.prototype.apply;function Nb(t,e,r,n){typeof n!="function"&&(n=O(function(){},"chainingBehavior"));var i={method:r,chainingBehavior:n};t.__methods||(t.__methods={}),t.__methods[e]=i,Object.defineProperty(t,e,{get:O(function(){i.chainingBehavior.call(this);var s=O(function(){ke(this,"lockSsfi")||ke(this,"ssfi",s);var m=i.method.apply(this,arguments);if(m!==void 0)return m;var d=new b;return Bn(this,d),d},"chainableMethodWrapper");if(Fu(s,e,!0),j8){var l=Object.create(this);l.call=q8,l.apply=G8,Object.setPrototypeOf(s,l)}else{var u=Object.getOwnPropertyNames(t);u.forEach(function(m){if(z8.indexOf(m)===-1){var d=Object.getOwnPropertyDescriptor(t,m);Object.defineProperty(s,m,d)}})}return Bn(this,s),Ec(s)},"chainableMethodGetter"),configurable:!0})}O(Nb,"addChainableMethod");function Ub(t,e,r,n){var i=t.__methods[e],o=i.chainingBehavior;i.chainingBehavior=O(function(){var u=n(o).call(this);if(u!==void 0)return u;var m=new b;return Bn(this,m),m},"overwritingChainableMethodGetter");var s=i.method;i.method=O(function(){var u=r(s).apply(this,arguments);if(u!==void 0)return u;var m=new b;return Bn(this,m),m},"overwritingChainableMethodWrapper")}O(Ub,"overwriteChainableMethod");function ly(t,e){return $e(t)<$e(e)?-1:1}O(ly,"compareByInspect");function Hb(t){return typeof Object.getOwnPropertySymbols!="function"?[]:Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})}O(Hb,"getOwnEnumerablePropertySymbols");function Bb(t){return Object.keys(t).concat(Hb(t))}O(Bb,"getOwnEnumerableProperties");var uy=Number.isNaN;function wI(t){var e=Xe(t),r=["Array","Object","Function"];return r.indexOf(e)!==-1}O(wI,"isObjectType");function Vb(t,e){var r=ke(t,"operator"),n=ke(t,"negate"),i=e[3],o=n?e[2]:e[1];if(r)return r;if(typeof o=="function"&&(o=o()),o=o||"",!!o&&!/\shave\s/.test(o)){var s=wI(i);return/\snot\s/.test(o)?s?"notDeepStrictEqual":"notStrictEqual":s?"deepStrictEqual":"strictEqual"}}O(Vb,"getOperator");function yy(t){return t.name}O(yy,"getName");function py(t){return Object.prototype.toString.call(t)==="[object RegExp]"}O(py,"isRegExp");function Bt(t){return["Number","BigInt"].includes(Xe(t))}O(Bt,"isNumeric");var{flag:M}=oy;["to","be","been","is","and","has","have","with","that","which","at","of","same","but","does","still","also"].forEach(function(t){b.addProperty(t)});b.addProperty("not",function(){M(this,"negate",!0)});b.addProperty("deep",function(){M(this,"deep",!0)});b.addProperty("nested",function(){M(this,"nested",!0)});b.addProperty("own",function(){M(this,"own",!0)});b.addProperty("ordered",function(){M(this,"ordered",!0)});b.addProperty("any",function(){M(this,"any",!0),M(this,"all",!1)});b.addProperty("all",function(){M(this,"all",!0),M(this,"any",!1)});var UL={function:["function","asyncfunction","generatorfunction","asyncgeneratorfunction"],asyncfunction:["asyncfunction","asyncgeneratorfunction"],generatorfunction:["generatorfunction","asyncgeneratorfunction"],asyncgeneratorfunction:["asyncgeneratorfunction"]};function Wb(t,e){e&&M(this,"message",e),t=t.toLowerCase();var r=M(this,"object"),n=~["a","e","i","o","u"].indexOf(t.charAt(0))?"an ":"a ";let i=Xe(r).toLowerCase();UL.function.includes(t)?this.assert(UL[t].includes(i),"expected #{this} to be "+n+t,"expected #{this} not to be "+n+t):this.assert(t===i,"expected #{this} to be "+n+t,"expected #{this} not to be "+n+t)}O(Wb,"an");b.addChainableMethod("an",Wb);b.addChainableMethod("a",Wb);function EI(t,e){return uy(t)&&uy(e)||t===e}O(EI,"SameValueZero");function Lu(){M(this,"contains",!0)}O(Lu,"includeChainingBehavior");function Iu(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=Xe(r).toLowerCase(),i=M(this,"message"),o=M(this,"negate"),s=M(this,"ssfi"),l=M(this,"deep"),u=l?"deep ":"",m=l?M(this,"eql"):EI;i=i?i+": ":"";var d=!1;switch(n){case"string":d=r.indexOf(t)!==-1;break;case"weakset":if(l)throw new ze(i+"unable to use .deep.include with WeakSet",void 0,s);d=r.has(t);break;case"map":r.forEach(function(w){d=d||m(w,t)});break;case"set":l?r.forEach(function(w){d=d||m(w,t)}):d=r.has(t);break;case"array":l?d=r.some(function(w){return m(w,t)}):d=r.indexOf(t)!==-1;break;default:if(t!==Object(t))throw new ze(i+"the given combination of arguments ("+n+" and "+Xe(t).toLowerCase()+") is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a "+Xe(t).toLowerCase(),void 0,s);var g=Object.keys(t),y=null,T=0;if(g.forEach(function(w){var E=new b(r);if(Bn(this,E,!0),M(E,"lockSsfi",!0),!o||g.length===1){E.property(w,t[w]);return}try{E.property(w,t[w])}catch(U){if(!Zr.compatibleConstructor(U,ze))throw U;y===null&&(y=U),T++}},this),o&&g.length>1&&T===g.length)throw y;return}this.assert(d,"expected #{this} to "+u+"include "+$e(t),"expected #{this} to not "+u+"include "+$e(t))}O(Iu,"include");b.addChainableMethod("include",Iu,Lu);b.addChainableMethod("contain",Iu,Lu);b.addChainableMethod("contains",Iu,Lu);b.addChainableMethod("includes",Iu,Lu);b.addProperty("ok",function(){this.assert(M(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")});b.addProperty("true",function(){this.assert(M(this,"object")===!0,"expected #{this} to be true","expected #{this} to be false",!M(this,"negate"))});b.addProperty("numeric",function(){let t=M(this,"object");this.assert(["Number","BigInt"].includes(Xe(t)),"expected #{this} to be numeric","expected #{this} to not be numeric",!M(this,"negate"))});b.addProperty("callable",function(){let t=M(this,"object"),e=M(this,"ssfi"),r=M(this,"message"),n=r?`${r}: `:"",i=M(this,"negate"),o=i?`${n}expected ${$e(t)} not to be a callable function`:`${n}expected ${$e(t)} to be a callable function`,s=["Function","AsyncFunction","GeneratorFunction","AsyncGeneratorFunction"].includes(Xe(t));if(s&&i||!s&&!i)throw new ze(o,void 0,e)});b.addProperty("false",function(){this.assert(M(this,"object")===!1,"expected #{this} to be false","expected #{this} to be true",!!M(this,"negate"))});b.addProperty("null",function(){this.assert(M(this,"object")===null,"expected #{this} to be null","expected #{this} not to be null")});b.addProperty("undefined",function(){this.assert(M(this,"object")===void 0,"expected #{this} to be undefined","expected #{this} not to be undefined")});b.addProperty("NaN",function(){this.assert(uy(M(this,"object")),"expected #{this} to be NaN","expected #{this} not to be NaN")});function $b(){var t=M(this,"object");this.assert(t!=null,"expected #{this} to exist","expected #{this} to not exist")}O($b,"assertExist");b.addProperty("exist",$b);b.addProperty("exists",$b);b.addProperty("empty",function(){var t=M(this,"object"),e=M(this,"ssfi"),r=M(this,"message"),n;switch(r=r?r+": ":"",Xe(t).toLowerCase()){case"array":case"string":n=t.length;break;case"map":case"set":n=t.size;break;case"weakmap":case"weakset":throw new ze(r+".empty was passed a weak collection",void 0,e);case"function":var i=r+".empty was passed a function "+yy(t);throw new ze(i.trim(),void 0,e);default:if(t!==Object(t))throw new ze(r+".empty was passed non-string primitive "+$e(t),void 0,e);n=Object.keys(t).length}this.assert(n===0,"expected #{this} to be empty","expected #{this} not to be empty")});function jb(){var t=M(this,"object"),e=Xe(t);this.assert(e==="Arguments","expected #{this} to be arguments but got "+e,"expected #{this} to not be arguments")}O(jb,"checkArguments");b.addProperty("arguments",jb);b.addProperty("Arguments",jb);function xy(t,e){e&&M(this,"message",e);var r=M(this,"object");if(M(this,"deep")){var n=M(this,"lockSsfi");M(this,"lockSsfi",!0),this.eql(t),M(this,"lockSsfi",n)}else this.assert(t===r,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",t,this._obj,!0)}O(xy,"assertEqual");b.addMethod("equal",xy);b.addMethod("equals",xy);b.addMethod("eq",xy);function zb(t,e){e&&M(this,"message",e);var r=M(this,"eql");this.assert(r(t,M(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",t,this._obj,!0)}O(zb,"assertEql");b.addMethod("eql",zb);b.addMethod("eqls",zb);function Ty(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"doLength"),i=M(this,"message"),o=i?i+": ":"",s=M(this,"ssfi"),l=Xe(r).toLowerCase(),u=Xe(t).toLowerCase();if(n&&l!=="map"&&l!=="set"&&new b(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&u!=="date")throw new ze(o+"the argument to above must be a date",void 0,s);if(!Bt(t)&&(n||Bt(r)))throw new ze(o+"the argument to above must be a number",void 0,s);if(!n&&l!=="date"&&!Bt(r)){var m=l==="string"?"'"+r+"'":r;throw new ze(o+"expected "+m+" to be a number or a date",void 0,s)}if(n){var d="length",g;l==="map"||l==="set"?(d="size",g=r.size):g=r.length,this.assert(g>t,"expected #{this} to have a "+d+" above #{exp} but got #{act}","expected #{this} to not have a "+d+" above #{exp}",t,g)}else this.assert(r>t,"expected #{this} to be above #{exp}","expected #{this} to be at most #{exp}",t)}O(Ty,"assertAbove");b.addMethod("above",Ty);b.addMethod("gt",Ty);b.addMethod("greaterThan",Ty);function Sy(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"doLength"),i=M(this,"message"),o=i?i+": ":"",s=M(this,"ssfi"),l=Xe(r).toLowerCase(),u=Xe(t).toLowerCase(),m,d=!0;if(n&&l!=="map"&&l!=="set"&&new b(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&u!=="date")m=o+"the argument to least must be a date";else if(!Bt(t)&&(n||Bt(r)))m=o+"the argument to least must be a number";else if(!n&&l!=="date"&&!Bt(r)){var g=l==="string"?"'"+r+"'":r;m=o+"expected "+g+" to be a number or a date"}else d=!1;if(d)throw new ze(m,void 0,s);if(n){var y="length",T;l==="map"||l==="set"?(y="size",T=r.size):T=r.length,this.assert(T>=t,"expected #{this} to have a "+y+" at least #{exp} but got #{act}","expected #{this} to have a "+y+" below #{exp}",t,T)}else this.assert(r>=t,"expected #{this} to be at least #{exp}","expected #{this} to be below #{exp}",t)}O(Sy,"assertLeast");b.addMethod("least",Sy);b.addMethod("gte",Sy);b.addMethod("greaterThanOrEqual",Sy);function vy(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"doLength"),i=M(this,"message"),o=i?i+": ":"",s=M(this,"ssfi"),l=Xe(r).toLowerCase(),u=Xe(t).toLowerCase(),m,d=!0;if(n&&l!=="map"&&l!=="set"&&new b(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&u!=="date")m=o+"the argument to below must be a date";else if(!Bt(t)&&(n||Bt(r)))m=o+"the argument to below must be a number";else if(!n&&l!=="date"&&!Bt(r)){var g=l==="string"?"'"+r+"'":r;m=o+"expected "+g+" to be a number or a date"}else d=!1;if(d)throw new ze(m,void 0,s);if(n){var y="length",T;l==="map"||l==="set"?(y="size",T=r.size):T=r.length,this.assert(T<t,"expected #{this} to have a "+y+" below #{exp} but got #{act}","expected #{this} to not have a "+y+" below #{exp}",t,T)}else this.assert(r<t,"expected #{this} to be below #{exp}","expected #{this} to be at least #{exp}",t)}O(vy,"assertBelow");b.addMethod("below",vy);b.addMethod("lt",vy);b.addMethod("lessThan",vy);function by(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"doLength"),i=M(this,"message"),o=i?i+": ":"",s=M(this,"ssfi"),l=Xe(r).toLowerCase(),u=Xe(t).toLowerCase(),m,d=!0;if(n&&l!=="map"&&l!=="set"&&new b(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&u!=="date")m=o+"the argument to most must be a date";else if(!Bt(t)&&(n||Bt(r)))m=o+"the argument to most must be a number";else if(!n&&l!=="date"&&!Bt(r)){var g=l==="string"?"'"+r+"'":r;m=o+"expected "+g+" to be a number or a date"}else d=!1;if(d)throw new ze(m,void 0,s);if(n){var y="length",T;l==="map"||l==="set"?(y="size",T=r.size):T=r.length,this.assert(T<=t,"expected #{this} to have a "+y+" at most #{exp} but got #{act}","expected #{this} to have a "+y+" above #{exp}",t,T)}else this.assert(r<=t,"expected #{this} to be at most #{exp}","expected #{this} to be above #{exp}",t)}O(by,"assertMost");b.addMethod("most",by);b.addMethod("lte",by);b.addMethod("lessThanOrEqual",by);b.addMethod("within",function(t,e,r){r&&M(this,"message",r);var n=M(this,"object"),i=M(this,"doLength"),o=M(this,"message"),s=o?o+": ":"",l=M(this,"ssfi"),u=Xe(n).toLowerCase(),m=Xe(t).toLowerCase(),d=Xe(e).toLowerCase(),g,y=!0,T=m==="date"&&d==="date"?t.toISOString()+".."+e.toISOString():t+".."+e;if(i&&u!=="map"&&u!=="set"&&new b(n,o,l,!0).to.have.property("length"),!i&&u==="date"&&(m!=="date"||d!=="date"))g=s+"the arguments to within must be dates";else if((!Bt(t)||!Bt(e))&&(i||Bt(n)))g=s+"the arguments to within must be numbers";else if(!i&&u!=="date"&&!Bt(n)){var w=u==="string"?"'"+n+"'":n;g=s+"expected "+w+" to be a number or a date"}else y=!1;if(y)throw new ze(g,void 0,l);if(i){var E="length",U;u==="map"||u==="set"?(E="size",U=n.size):U=n.length,this.assert(U>=t&&U<=e,"expected #{this} to have a "+E+" within "+T,"expected #{this} to not have a "+E+" within "+T)}else this.assert(n>=t&&n<=e,"expected #{this} to be within "+T,"expected #{this} to not be within "+T)});function qb(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"ssfi"),i=M(this,"message");try{var o=r instanceof t}catch(l){throw l instanceof TypeError?(i=i?i+": ":"",new ze(i+"The instanceof assertion needs a constructor but "+Xe(t)+" was given.",void 0,n)):l}var s=yy(t);s==null&&(s="an unnamed constructor"),this.assert(o,"expected #{this} to be an instance of "+s,"expected #{this} to not be an instance of "+s)}O(qb,"assertInstanceOf");b.addMethod("instanceof",qb);b.addMethod("instanceOf",qb);function Gb(t,e,r){r&&M(this,"message",r);var n=M(this,"nested"),i=M(this,"own"),o=M(this,"message"),s=M(this,"object"),l=M(this,"ssfi"),u=typeof t;if(o=o?o+": ":"",n){if(u!=="string")throw new ze(o+"the argument to property must be a string when using nested syntax",void 0,l)}else if(u!=="string"&&u!=="number"&&u!=="symbol")throw new ze(o+"the argument to property must be a string, number, or symbol",void 0,l);if(n&&i)throw new ze(o+'The "nested" and "own" flags cannot be combined.',void 0,l);if(s==null)throw new ze(o+"Target cannot be null or undefined.",void 0,l);var m=M(this,"deep"),d=M(this,"negate"),g=n?Fb(s,t):null,y=n?g.value:s[t],T=m?M(this,"eql"):(U,V)=>U===V,w="";m&&(w+="deep "),i&&(w+="own "),n&&(w+="nested "),w+="property ";var E;i?E=Object.prototype.hasOwnProperty.call(s,t):n?E=g.exists:E=hy(s,t),(!d||arguments.length===1)&&this.assert(E,"expected #{this} to have "+w+$e(t),"expected #{this} to not have "+w+$e(t)),arguments.length>1&&this.assert(E&&T(e,y),"expected #{this} to have "+w+$e(t)+" of #{exp}, but got #{act}","expected #{this} to not have "+w+$e(t)+" of #{act}",e,y),M(this,"object",y)}O(Gb,"assertProperty");b.addMethod("property",Gb);function Kb(t,e,r){M(this,"own",!0),Gb.apply(this,arguments)}O(Kb,"assertOwnProperty");b.addMethod("ownProperty",Kb);b.addMethod("haveOwnProperty",Kb);function Qb(t,e,r){typeof e=="string"&&(r=e,e=null),r&&M(this,"message",r);var n=M(this,"object"),i=Object.getOwnPropertyDescriptor(Object(n),t),o=M(this,"eql");i&&e?this.assert(o(e,i),"expected the own property descriptor for "+$e(t)+" on #{this} to match "+$e(e)+", got "+$e(i),"expected the own property descriptor for "+$e(t)+" on #{this} to not match "+$e(e),e,i,!0):this.assert(i,"expected #{this} to have an own property descriptor for "+$e(t),"expected #{this} to not have an own property descriptor for "+$e(t)),M(this,"object",i)}O(Qb,"assertOwnPropertyDescriptor");b.addMethod("ownPropertyDescriptor",Qb);b.addMethod("haveOwnPropertyDescriptor",Qb);function Yb(){M(this,"doLength",!0)}O(Yb,"assertLengthChain");function Zb(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=Xe(r).toLowerCase(),i=M(this,"message"),o=M(this,"ssfi"),s="length",l;switch(n){case"map":case"set":s="size",l=r.size;break;default:new b(r,i,o,!0).to.have.property("length"),l=r.length}this.assert(l==t,"expected #{this} to have a "+s+" of #{exp} but got #{act}","expected #{this} to not have a "+s+" of #{act}",t,l)}O(Zb,"assertLength");b.addChainableMethod("length",Zb,Yb);b.addChainableMethod("lengthOf",Zb,Yb);function Xb(t,e){e&&M(this,"message",e);var r=M(this,"object");this.assert(t.exec(r),"expected #{this} to match "+t,"expected #{this} not to match "+t)}O(Xb,"assertMatch");b.addMethod("match",Xb);b.addMethod("matches",Xb);b.addMethod("string",function(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"message"),i=M(this,"ssfi");new b(r,n,i,!0).is.a("string"),this.assert(~r.indexOf(t),"expected #{this} to contain "+$e(t),"expected #{this} to not contain "+$e(t))});function Jb(t){var e=M(this,"object"),r=Xe(e),n=Xe(t),i=M(this,"ssfi"),o=M(this,"deep"),s,l="",u,m=!0,d=M(this,"message");d=d?d+": ":"";var g=d+"when testing keys against an object or an array you must give a single Array|Object|String argument or multiple String arguments";if(r==="Map"||r==="Set")l=o?"deeply ":"",u=[],e.forEach(function(z,ne){u.push(ne)}),n!=="Array"&&(t=Array.prototype.slice.call(arguments));else{switch(u=Bb(e),n){case"Array":if(arguments.length>1)throw new ze(g,void 0,i);break;case"Object":if(arguments.length>1)throw new ze(g,void 0,i);t=Object.keys(t);break;default:t=Array.prototype.slice.call(arguments)}t=t.map(function(z){return typeof z=="symbol"?z:String(z)})}if(!t.length)throw new ze(d+"keys required",void 0,i);var y=t.length,T=M(this,"any"),w=M(this,"all"),E=t,U=o?M(this,"eql"):(z,ne)=>z===ne;if(!T&&!w&&(w=!0),T&&(m=E.some(function(z){return u.some(function(ne){return U(z,ne)})})),w&&(m=E.every(function(z){return u.some(function(ne){return U(z,ne)})}),M(this,"contains")||(m=m&&t.length==u.length)),y>1){t=t.map(function(z){return $e(z)});var V=t.pop();w&&(s=t.join(", ")+", and "+V),T&&(s=t.join(", ")+", or "+V)}else s=$e(t[0]);s=(y>1?"keys ":"key ")+s,s=(M(this,"contains")?"contain ":"have ")+s,this.assert(m,"expected #{this} to "+l+s,"expected #{this} to not "+l+s,E.slice(0).sort(ly),u.sort(ly),!0)}O(Jb,"assertKeys");b.addMethod("keys",Jb);b.addMethod("key",Jb);function wy(t,e,r){r&&M(this,"message",r);var n=M(this,"object"),i=M(this,"ssfi"),o=M(this,"message"),s=M(this,"negate")||!1;new b(n,o,i,!0).is.a("function"),(py(t)||typeof t=="string")&&(e=t,t=null);let l,u=!1;try{n()}catch(z){u=!0,l=z}var m=t===void 0&&e===void 0,d=!!(t&&e),g=!1,y=!1;if(m||!m&&!s){var T="an error";t instanceof Error?T="#{exp}":t&&(T=Zr.getConstructorName(t));let z=l;if(l instanceof Error)z=l.toString();else if(typeof l=="string")z=l;else if(l&&(typeof l=="object"||typeof l=="function"))try{z=Zr.getConstructorName(l)}catch{}this.assert(u,"expected #{this} to throw "+T,"expected #{this} to not throw an error but #{act} was thrown",t&&t.toString(),z)}if(t&&l){if(t instanceof Error){var w=Zr.compatibleInstance(l,t);w===s&&(d&&s?g=!0:this.assert(s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l&&!s?" but #{act} was thrown":""),t.toString(),l.toString()))}var E=Zr.compatibleConstructor(l,t);E===s&&(d&&s?g=!0:this.assert(s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&Zr.getConstructorName(t),l instanceof Error?l.toString():l&&Zr.getConstructorName(l)))}if(l&&e!==void 0&&e!==null){var U="including";py(e)&&(U="matching");var V=Zr.compatibleMessage(l,e);V===s&&(d&&s?y=!0:this.assert(s,"expected #{this} to throw error "+U+" #{exp} but got #{act}","expected #{this} to throw error not "+U+" #{exp}",e,Zr.getMessage(l)))}g&&y&&this.assert(s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&Zr.getConstructorName(t),l instanceof Error?l.toString():l&&Zr.getConstructorName(l)),M(this,"object",l)}O(wy,"assertThrows");b.addMethod("throw",wy);b.addMethod("throws",wy);b.addMethod("Throw",wy);function ew(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"itself"),i=typeof r=="function"&&!n?r.prototype[t]:r[t];this.assert(typeof i=="function","expected #{this} to respond to "+$e(t),"expected #{this} to not respond to "+$e(t))}O(ew,"respondTo");b.addMethod("respondTo",ew);b.addMethod("respondsTo",ew);b.addProperty("itself",function(){M(this,"itself",!0)});function tw(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=t(r);this.assert(n,"expected #{this} to satisfy "+Ma(t),"expected #{this} to not satisfy"+Ma(t),!M(this,"negate"),n)}O(tw,"satisfy");b.addMethod("satisfy",tw);b.addMethod("satisfies",tw);function rw(t,e,r){r&&M(this,"message",r);var n=M(this,"object"),i=M(this,"message"),o=M(this,"ssfi");new b(n,i,o,!0).is.numeric;let s="A `delta` value is required for `closeTo`";if(e==null)throw new ze(i?`${i}: ${s}`:s,void 0,o);if(new b(e,i,o,!0).is.numeric,s="A `expected` value is required for `closeTo`",t==null)throw new ze(i?`${i}: ${s}`:s,void 0,o);new b(t,i,o,!0).is.numeric;let l=O(m=>m<0n?-m:m,"abs"),u=O(m=>parseFloat(parseFloat(m).toPrecision(12)),"strip");this.assert(u(l(n-t))<=e,"expected #{this} to be close to "+t+" +/- "+e,"expected #{this} not to be close to "+t+" +/- "+e)}O(rw,"closeTo");b.addMethod("closeTo",rw);b.addMethod("approximately",rw);function _I(t,e,r,n,i){let o=Array.from(e),s=Array.from(t);if(!n){if(s.length!==o.length)return!1;o=o.slice()}return s.every(function(l,u){if(i)return r?r(l,o[u]):l===o[u];if(!r){var m=o.indexOf(l);return m===-1?!1:(n||o.splice(m,1),!0)}return o.some(function(d,g){return r(l,d)?(n||o.splice(g,1),!0):!1})})}O(_I,"isSubsetOf");b.addMethod("members",function(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"message"),i=M(this,"ssfi");new b(r,n,i,!0).to.be.iterable,new b(t,n,i,!0).to.be.iterable;var o=M(this,"contains"),s=M(this,"ordered"),l,u,m;o?(l=s?"an ordered superset":"a superset",u="expected #{this} to be "+l+" of #{exp}",m="expected #{this} to not be "+l+" of #{exp}"):(l=s?"ordered members":"members",u="expected #{this} to have the same "+l+" as #{exp}",m="expected #{this} to not have the same "+l+" as #{exp}");var d=M(this,"deep")?M(this,"eql"):void 0;this.assert(_I(t,r,d,o,s),u,m,t,r,!0)});b.addProperty("iterable",function(t){t&&M(this,"message",t);var e=M(this,"object");this.assert(e!=null&&e[Symbol.iterator],"expected #{this} to be an iterable","expected #{this} to not be an iterable",e)});function RI(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"message"),i=M(this,"ssfi"),o=M(this,"contains"),s=M(this,"deep"),l=M(this,"eql");new b(t,n,i,!0).to.be.an("array"),o?this.assert(t.some(function(u){return r.indexOf(u)>-1}),"expected #{this} to contain one of #{exp}","expected #{this} to not contain one of #{exp}",t,r):s?this.assert(t.some(function(u){return l(r,u)}),"expected #{this} to deeply equal one of #{exp}","expected #{this} to deeply equal one of #{exp}",t,r):this.assert(t.indexOf(r)>-1,"expected #{this} to be one of #{exp}","expected #{this} to not be one of #{exp}",t,r)}O(RI,"oneOf");b.addMethod("oneOf",RI);function nw(t,e,r){r&&M(this,"message",r);var n=M(this,"object"),i=M(this,"message"),o=M(this,"ssfi");new b(n,i,o,!0).is.a("function");var s;e?(new b(t,i,o,!0).to.have.property(e),s=t[e]):(new b(t,i,o,!0).is.a("function"),s=t()),n();var l=e==null?t():t[e],u=e==null?s:"."+e;M(this,"deltaMsgObj",u),M(this,"initialDeltaValue",s),M(this,"finalDeltaValue",l),M(this,"deltaBehavior","change"),M(this,"realDelta",l!==s),this.assert(s!==l,"expected "+u+" to change","expected "+u+" to not change")}O(nw,"assertChanges");b.addMethod("change",nw);b.addMethod("changes",nw);function iw(t,e,r){r&&M(this,"message",r);var n=M(this,"object"),i=M(this,"message"),o=M(this,"ssfi");new b(n,i,o,!0).is.a("function");var s;e?(new b(t,i,o,!0).to.have.property(e),s=t[e]):(new b(t,i,o,!0).is.a("function"),s=t()),new b(s,i,o,!0).is.a("number"),n();var l=e==null?t():t[e],u=e==null?s:"."+e;M(this,"deltaMsgObj",u),M(this,"initialDeltaValue",s),M(this,"finalDeltaValue",l),M(this,"deltaBehavior","increase"),M(this,"realDelta",l-s),this.assert(l-s>0,"expected "+u+" to increase","expected "+u+" to not increase")}O(iw,"assertIncreases");b.addMethod("increase",iw);b.addMethod("increases",iw);function ow(t,e,r){r&&M(this,"message",r);var n=M(this,"object"),i=M(this,"message"),o=M(this,"ssfi");new b(n,i,o,!0).is.a("function");var s;e?(new b(t,i,o,!0).to.have.property(e),s=t[e]):(new b(t,i,o,!0).is.a("function"),s=t()),new b(s,i,o,!0).is.a("number"),n();var l=e==null?t():t[e],u=e==null?s:"."+e;M(this,"deltaMsgObj",u),M(this,"initialDeltaValue",s),M(this,"finalDeltaValue",l),M(this,"deltaBehavior","decrease"),M(this,"realDelta",s-l),this.assert(l-s<0,"expected "+u+" to decrease","expected "+u+" to not decrease")}O(ow,"assertDecreases");b.addMethod("decrease",ow);b.addMethod("decreases",ow);function kI(t,e){e&&M(this,"message",e);var r=M(this,"deltaMsgObj"),n=M(this,"initialDeltaValue"),i=M(this,"finalDeltaValue"),o=M(this,"deltaBehavior"),s=M(this,"realDelta"),l;o==="change"?l=Math.abs(i-n)===Math.abs(t):l=s===Math.abs(t),this.assert(l,"expected "+r+" to "+o+" by "+t,"expected "+r+" to not "+o+" by "+t)}O(kI,"assertDelta");b.addMethod("by",kI);b.addProperty("extensible",function(){var t=M(this,"object"),e=t===Object(t)&&Object.isExtensible(t);this.assert(e,"expected #{this} to be extensible","expected #{this} to not be extensible")});b.addProperty("sealed",function(){var t=M(this,"object"),e=t===Object(t)?Object.isSealed(t):!0;this.assert(e,"expected #{this} to be sealed","expected #{this} to not be sealed")});b.addProperty("frozen",function(){var t=M(this,"object"),e=t===Object(t)?Object.isFrozen(t):!0;this.assert(e,"expected #{this} to be frozen","expected #{this} to not be frozen")});b.addProperty("finite",function(t){var e=M(this,"object");this.assert(typeof e=="number"&&isFinite(e),"expected #{this} to be a finite number","expected #{this} to not be a finite number")});function my(t,e){return t===e?!0:typeof e!=typeof t?!1:typeof t!="object"||t===null?t===e:e?Array.isArray(t)?Array.isArray(e)?t.every(function(r){return e.some(function(n){return my(r,n)})}):!1:t instanceof Date?e instanceof Date?t.getTime()===e.getTime():!1:Object.keys(t).every(function(r){var n=t[r],i=e[r];return typeof n=="object"&&n!==null&&i!==null?my(n,i):typeof n=="function"?n(i):i===n}):!1}O(my,"compareSubset");b.addMethod("containSubset",function(t){let e=ke(this,"object"),r=xr.showDiff;this.assert(my(t,e),"expected #{act} to contain subset #{exp}","expected #{act} to not contain subset #{exp}",t,e,r)});function fy(t,e){return new b(t,e)}O(fy,"expect");fy.fail=function(t,e,r,n){throw arguments.length<2&&(r=t,t=void 0),r=r||"expect.fail()",new ze(r,{actual:t,expected:e,operator:n},fy.fail)};var AI={};_b(AI,{Should:()=>Q8,should:()=>K8});function aw(){function t(){return this instanceof String||this instanceof Number||this instanceof Boolean||typeof Symbol=="function"&&this instanceof Symbol||typeof BigInt=="function"&&this instanceof BigInt?new b(this.valueOf(),null,t):new b(this,null,t)}O(t,"shouldGetter");function e(n){Object.defineProperty(this,"should",{value:n,enumerable:!0,configurable:!0,writable:!0})}O(e,"shouldSetter"),Object.defineProperty(Object.prototype,"should",{set:e,get:t,configurable:!0});var r={};return r.fail=function(n,i,o,s){throw arguments.length<2&&(o=n,n=void 0),o=o||"should.fail()",new ze(o,{actual:n,expected:i,operator:s},r.fail)},r.equal=function(n,i,o){new b(n,o).to.equal(i)},r.Throw=function(n,i,o,s){new b(n,s).to.Throw(i,o)},r.exist=function(n,i){new b(n,i).to.exist},r.not={},r.not.equal=function(n,i,o){new b(n,o).to.not.equal(i)},r.not.Throw=function(n,i,o,s){new b(n,s).to.not.Throw(i,o)},r.not.exist=function(n,i){new b(n,i).to.not.exist},r.throw=r.Throw,r.not.throw=r.not.Throw,r}O(aw,"loadShould");var K8=aw,Q8=aw;function v(t,e){var r=new b(null,null,v,!0);r.assert(t,e,"[ negation message unavailable ]")}O(v,"assert");v.fail=function(t,e,r,n){throw arguments.length<2&&(r=t,t=void 0),r=r||"assert.fail()",new ze(r,{actual:t,expected:e,operator:n},v.fail)};v.isOk=function(t,e){new b(t,e,v.isOk,!0).is.ok};v.isNotOk=function(t,e){new b(t,e,v.isNotOk,!0).is.not.ok};v.equal=function(t,e,r){var n=new b(t,r,v.equal,!0);n.assert(e==ke(n,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",e,t,!0)};v.notEqual=function(t,e,r){var n=new b(t,r,v.notEqual,!0);n.assert(e!=ke(n,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",e,t,!0)};v.strictEqual=function(t,e,r){new b(t,r,v.strictEqual,!0).to.equal(e)};v.notStrictEqual=function(t,e,r){new b(t,r,v.notStrictEqual,!0).to.not.equal(e)};v.deepEqual=v.deepStrictEqual=function(t,e,r){new b(t,r,v.deepEqual,!0).to.eql(e)};v.notDeepEqual=function(t,e,r){new b(t,r,v.notDeepEqual,!0).to.not.eql(e)};v.isAbove=function(t,e,r){new b(t,r,v.isAbove,!0).to.be.above(e)};v.isAtLeast=function(t,e,r){new b(t,r,v.isAtLeast,!0).to.be.least(e)};v.isBelow=function(t,e,r){new b(t,r,v.isBelow,!0).to.be.below(e)};v.isAtMost=function(t,e,r){new b(t,r,v.isAtMost,!0).to.be.most(e)};v.isTrue=function(t,e){new b(t,e,v.isTrue,!0).is.true};v.isNotTrue=function(t,e){new b(t,e,v.isNotTrue,!0).to.not.equal(!0)};v.isFalse=function(t,e){new b(t,e,v.isFalse,!0).is.false};v.isNotFalse=function(t,e){new b(t,e,v.isNotFalse,!0).to.not.equal(!1)};v.isNull=function(t,e){new b(t,e,v.isNull,!0).to.equal(null)};v.isNotNull=function(t,e){new b(t,e,v.isNotNull,!0).to.not.equal(null)};v.isNaN=function(t,e){new b(t,e,v.isNaN,!0).to.be.NaN};v.isNotNaN=function(t,e){new b(t,e,v.isNotNaN,!0).not.to.be.NaN};v.exists=function(t,e){new b(t,e,v.exists,!0).to.exist};v.notExists=function(t,e){new b(t,e,v.notExists,!0).to.not.exist};v.isUndefined=function(t,e){new b(t,e,v.isUndefined,!0).to.equal(void 0)};v.isDefined=function(t,e){new b(t,e,v.isDefined,!0).to.not.equal(void 0)};v.isCallable=function(t,e){new b(t,e,v.isCallable,!0).is.callable};v.isNotCallable=function(t,e){new b(t,e,v.isNotCallable,!0).is.not.callable};v.isObject=function(t,e){new b(t,e,v.isObject,!0).to.be.a("object")};v.isNotObject=function(t,e){new b(t,e,v.isNotObject,!0).to.not.be.a("object")};v.isArray=function(t,e){new b(t,e,v.isArray,!0).to.be.an("array")};v.isNotArray=function(t,e){new b(t,e,v.isNotArray,!0).to.not.be.an("array")};v.isString=function(t,e){new b(t,e,v.isString,!0).to.be.a("string")};v.isNotString=function(t,e){new b(t,e,v.isNotString,!0).to.not.be.a("string")};v.isNumber=function(t,e){new b(t,e,v.isNumber,!0).to.be.a("number")};v.isNotNumber=function(t,e){new b(t,e,v.isNotNumber,!0).to.not.be.a("number")};v.isNumeric=function(t,e){new b(t,e,v.isNumeric,!0).is.numeric};v.isNotNumeric=function(t,e){new b(t,e,v.isNotNumeric,!0).is.not.numeric};v.isFinite=function(t,e){new b(t,e,v.isFinite,!0).to.be.finite};v.isBoolean=function(t,e){new b(t,e,v.isBoolean,!0).to.be.a("boolean")};v.isNotBoolean=function(t,e){new b(t,e,v.isNotBoolean,!0).to.not.be.a("boolean")};v.typeOf=function(t,e,r){new b(t,r,v.typeOf,!0).to.be.a(e)};v.notTypeOf=function(t,e,r){new b(t,r,v.notTypeOf,!0).to.not.be.a(e)};v.instanceOf=function(t,e,r){new b(t,r,v.instanceOf,!0).to.be.instanceOf(e)};v.notInstanceOf=function(t,e,r){new b(t,r,v.notInstanceOf,!0).to.not.be.instanceOf(e)};v.include=function(t,e,r){new b(t,r,v.include,!0).include(e)};v.notInclude=function(t,e,r){new b(t,r,v.notInclude,!0).not.include(e)};v.deepInclude=function(t,e,r){new b(t,r,v.deepInclude,!0).deep.include(e)};v.notDeepInclude=function(t,e,r){new b(t,r,v.notDeepInclude,!0).not.deep.include(e)};v.nestedInclude=function(t,e,r){new b(t,r,v.nestedInclude,!0).nested.include(e)};v.notNestedInclude=function(t,e,r){new b(t,r,v.notNestedInclude,!0).not.nested.include(e)};v.deepNestedInclude=function(t,e,r){new b(t,r,v.deepNestedInclude,!0).deep.nested.include(e)};v.notDeepNestedInclude=function(t,e,r){new b(t,r,v.notDeepNestedInclude,!0).not.deep.nested.include(e)};v.ownInclude=function(t,e,r){new b(t,r,v.ownInclude,!0).own.include(e)};v.notOwnInclude=function(t,e,r){new b(t,r,v.notOwnInclude,!0).not.own.include(e)};v.deepOwnInclude=function(t,e,r){new b(t,r,v.deepOwnInclude,!0).deep.own.include(e)};v.notDeepOwnInclude=function(t,e,r){new b(t,r,v.notDeepOwnInclude,!0).not.deep.own.include(e)};v.match=function(t,e,r){new b(t,r,v.match,!0).to.match(e)};v.notMatch=function(t,e,r){new b(t,r,v.notMatch,!0).to.not.match(e)};v.property=function(t,e,r){new b(t,r,v.property,!0).to.have.property(e)};v.notProperty=function(t,e,r){new b(t,r,v.notProperty,!0).to.not.have.property(e)};v.propertyVal=function(t,e,r,n){new b(t,n,v.propertyVal,!0).to.have.property(e,r)};v.notPropertyVal=function(t,e,r,n){new b(t,n,v.notPropertyVal,!0).to.not.have.property(e,r)};v.deepPropertyVal=function(t,e,r,n){new b(t,n,v.deepPropertyVal,!0).to.have.deep.property(e,r)};v.notDeepPropertyVal=function(t,e,r,n){new b(t,n,v.notDeepPropertyVal,!0).to.not.have.deep.property(e,r)};v.ownProperty=function(t,e,r){new b(t,r,v.ownProperty,!0).to.have.own.property(e)};v.notOwnProperty=function(t,e,r){new b(t,r,v.notOwnProperty,!0).to.not.have.own.property(e)};v.ownPropertyVal=function(t,e,r,n){new b(t,n,v.ownPropertyVal,!0).to.have.own.property(e,r)};v.notOwnPropertyVal=function(t,e,r,n){new b(t,n,v.notOwnPropertyVal,!0).to.not.have.own.property(e,r)};v.deepOwnPropertyVal=function(t,e,r,n){new b(t,n,v.deepOwnPropertyVal,!0).to.have.deep.own.property(e,r)};v.notDeepOwnPropertyVal=function(t,e,r,n){new b(t,n,v.notDeepOwnPropertyVal,!0).to.not.have.deep.own.property(e,r)};v.nestedProperty=function(t,e,r){new b(t,r,v.nestedProperty,!0).to.have.nested.property(e)};v.notNestedProperty=function(t,e,r){new b(t,r,v.notNestedProperty,!0).to.not.have.nested.property(e)};v.nestedPropertyVal=function(t,e,r,n){new b(t,n,v.nestedPropertyVal,!0).to.have.nested.property(e,r)};v.notNestedPropertyVal=function(t,e,r,n){new b(t,n,v.notNestedPropertyVal,!0).to.not.have.nested.property(e,r)};v.deepNestedPropertyVal=function(t,e,r,n){new b(t,n,v.deepNestedPropertyVal,!0).to.have.deep.nested.property(e,r)};v.notDeepNestedPropertyVal=function(t,e,r,n){new b(t,n,v.notDeepNestedPropertyVal,!0).to.not.have.deep.nested.property(e,r)};v.lengthOf=function(t,e,r){new b(t,r,v.lengthOf,!0).to.have.lengthOf(e)};v.hasAnyKeys=function(t,e,r){new b(t,r,v.hasAnyKeys,!0).to.have.any.keys(e)};v.hasAllKeys=function(t,e,r){new b(t,r,v.hasAllKeys,!0).to.have.all.keys(e)};v.containsAllKeys=function(t,e,r){new b(t,r,v.containsAllKeys,!0).to.contain.all.keys(e)};v.doesNotHaveAnyKeys=function(t,e,r){new b(t,r,v.doesNotHaveAnyKeys,!0).to.not.have.any.keys(e)};v.doesNotHaveAllKeys=function(t,e,r){new b(t,r,v.doesNotHaveAllKeys,!0).to.not.have.all.keys(e)};v.hasAnyDeepKeys=function(t,e,r){new b(t,r,v.hasAnyDeepKeys,!0).to.have.any.deep.keys(e)};v.hasAllDeepKeys=function(t,e,r){new b(t,r,v.hasAllDeepKeys,!0).to.have.all.deep.keys(e)};v.containsAllDeepKeys=function(t,e,r){new b(t,r,v.containsAllDeepKeys,!0).to.contain.all.deep.keys(e)};v.doesNotHaveAnyDeepKeys=function(t,e,r){new b(t,r,v.doesNotHaveAnyDeepKeys,!0).to.not.have.any.deep.keys(e)};v.doesNotHaveAllDeepKeys=function(t,e,r){new b(t,r,v.doesNotHaveAllDeepKeys,!0).to.not.have.all.deep.keys(e)};v.throws=function(t,e,r,n){(typeof e=="string"||e instanceof RegExp)&&(r=e,e=null);var i=new b(t,n,v.throws,!0).to.throw(e,r);return ke(i,"object")};v.doesNotThrow=function(t,e,r,n){(typeof e=="string"||e instanceof RegExp)&&(r=e,e=null),new b(t,n,v.doesNotThrow,!0).to.not.throw(e,r)};v.operator=function(t,e,r,n){var i;switch(e){case"==":i=t==r;break;case"===":i=t===r;break;case">":i=t>r;break;case">=":i=t>=r;break;case"<":i=t<r;break;case"<=":i=t<=r;break;case"!=":i=t!=r;break;case"!==":i=t!==r;break;default:throw n=n&&n+": ",new ze(n+'Invalid operator "'+e+'"',void 0,v.operator)}var o=new b(i,n,v.operator,!0);o.assert(ke(o,"object")===!0,"expected "+$e(t)+" to be "+e+" "+$e(r),"expected "+$e(t)+" to not be "+e+" "+$e(r))};v.closeTo=function(t,e,r,n){new b(t,n,v.closeTo,!0).to.be.closeTo(e,r)};v.approximately=function(t,e,r,n){new b(t,n,v.approximately,!0).to.be.approximately(e,r)};v.sameMembers=function(t,e,r){new b(t,r,v.sameMembers,!0).to.have.same.members(e)};v.notSameMembers=function(t,e,r){new b(t,r,v.notSameMembers,!0).to.not.have.same.members(e)};v.sameDeepMembers=function(t,e,r){new b(t,r,v.sameDeepMembers,!0).to.have.same.deep.members(e)};v.notSameDeepMembers=function(t,e,r){new b(t,r,v.notSameDeepMembers,!0).to.not.have.same.deep.members(e)};v.sameOrderedMembers=function(t,e,r){new b(t,r,v.sameOrderedMembers,!0).to.have.same.ordered.members(e)};v.notSameOrderedMembers=function(t,e,r){new b(t,r,v.notSameOrderedMembers,!0).to.not.have.same.ordered.members(e)};v.sameDeepOrderedMembers=function(t,e,r){new b(t,r,v.sameDeepOrderedMembers,!0).to.have.same.deep.ordered.members(e)};v.notSameDeepOrderedMembers=function(t,e,r){new b(t,r,v.notSameDeepOrderedMembers,!0).to.not.have.same.deep.ordered.members(e)};v.includeMembers=function(t,e,r){new b(t,r,v.includeMembers,!0).to.include.members(e)};v.notIncludeMembers=function(t,e,r){new b(t,r,v.notIncludeMembers,!0).to.not.include.members(e)};v.includeDeepMembers=function(t,e,r){new b(t,r,v.includeDeepMembers,!0).to.include.deep.members(e)};v.notIncludeDeepMembers=function(t,e,r){new b(t,r,v.notIncludeDeepMembers,!0).to.not.include.deep.members(e)};v.includeOrderedMembers=function(t,e,r){new b(t,r,v.includeOrderedMembers,!0).to.include.ordered.members(e)};v.notIncludeOrderedMembers=function(t,e,r){new b(t,r,v.notIncludeOrderedMembers,!0).to.not.include.ordered.members(e)};v.includeDeepOrderedMembers=function(t,e,r){new b(t,r,v.includeDeepOrderedMembers,!0).to.include.deep.ordered.members(e)};v.notIncludeDeepOrderedMembers=function(t,e,r){new b(t,r,v.notIncludeDeepOrderedMembers,!0).to.not.include.deep.ordered.members(e)};v.oneOf=function(t,e,r){new b(t,r,v.oneOf,!0).to.be.oneOf(e)};v.isIterable=function(t,e){if(t==null||!t[Symbol.iterator])throw e=e?`${e} expected ${$e(t)} to be an iterable`:`expected ${$e(t)} to be an iterable`,new ze(e,void 0,v.isIterable)};v.changes=function(t,e,r,n){arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.changes,!0).to.change(e,r)};v.changesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.changesBy,!0).to.change(e,r).by(n)};v.doesNotChange=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.doesNotChange,!0).to.not.change(e,r)};v.changesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.changesButNotBy,!0).to.change(e,r).but.not.by(n)};v.increases=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.increases,!0).to.increase(e,r)};v.increasesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.increasesBy,!0).to.increase(e,r).by(n)};v.doesNotIncrease=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.doesNotIncrease,!0).to.not.increase(e,r)};v.increasesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.increasesButNotBy,!0).to.increase(e,r).but.not.by(n)};v.decreases=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.decreases,!0).to.decrease(e,r)};v.decreasesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.decreasesBy,!0).to.decrease(e,r).by(n)};v.doesNotDecrease=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.doesNotDecrease,!0).to.not.decrease(e,r)};v.doesNotDecreaseBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);return new b(t,i,v.doesNotDecreaseBy,!0).to.not.decrease(e,r).by(n)};v.decreasesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.decreasesButNotBy,!0).to.decrease(e,r).but.not.by(n)};v.ifError=function(t){if(t)throw t};v.isExtensible=function(t,e){new b(t,e,v.isExtensible,!0).to.be.extensible};v.isNotExtensible=function(t,e){new b(t,e,v.isNotExtensible,!0).to.not.be.extensible};v.isSealed=function(t,e){new b(t,e,v.isSealed,!0).to.be.sealed};v.isNotSealed=function(t,e){new b(t,e,v.isNotSealed,!0).to.not.be.sealed};v.isFrozen=function(t,e){new b(t,e,v.isFrozen,!0).to.be.frozen};v.isNotFrozen=function(t,e){new b(t,e,v.isNotFrozen,!0).to.not.be.frozen};v.isEmpty=function(t,e){new b(t,e,v.isEmpty,!0).to.be.empty};v.isNotEmpty=function(t,e){new b(t,e,v.isNotEmpty,!0).to.not.be.empty};v.containsSubset=function(t,e,r){new b(t,r).to.containSubset(e)};v.doesNotContainSubset=function(t,e,r){new b(t,r).to.not.containSubset(e)};var Y8=[["isOk","ok"],["isNotOk","notOk"],["throws","throw"],["throws","Throw"],["isExtensible","extensible"],["isNotExtensible","notExtensible"],["isSealed","sealed"],["isNotSealed","notSealed"],["isFrozen","frozen"],["isNotFrozen","notFrozen"],["isEmpty","empty"],["isNotEmpty","notEmpty"],["isCallable","isFunction"],["isNotCallable","isNotFunction"],["containsSubset","containSubset"]];for(let[t,e]of Y8)v[e]=v[t];var HL=[];function PI(t){let e={use:PI,AssertionError:ze,util:oy,config:xr,expect:fy,assert:v,Assertion:b,...AI};return~HL.indexOf(t)||(t(e,oy),HL.push(t)),e}O(PI,"use");var Cu=class{constructor(e,r,n){this._lineNumber=e,this._text=r,this._isLastLine=n}get lineNumber(){return this._lineNumber}get text(){return this._text}get range(){return new Y(this._lineNumber,0,this._lineNumber,this._text.length)}get rangeIncludingLineBreak(){return this._isLastLine?this.range:new Y(this._lineNumber,0,this._lineNumber+1,0)}get rangeTrimmed(){let e=/^(\s*)/.exec(this._text)[1].length;if(e===this._text.length)return;let r=this.text.trimEnd().length;return new Y(this._lineNumber,e,this._lineNumber,r)}get isEmptyOrWhitespace(){return this.rangeTrimmed==null}};var MI=Hr(require("node:path"),1),Ey=class{get uri(){return this._uri}get filename(){return MI.default.basename(this._uri.path)}get languageId(){return this._languageId}get version(){return this._version}get lineCount(){return this._lineCount}get range(){let{end:e}=this.lineAt(this.lineCount-1).range;return new Y(0,0,e.line,e.character)}get eol(){return this._eol===`
`?"LF":"CRLF"}constructor(e,r,n,i,o){this._uri=e,this._languageId=r,this._version=n,this._eol=i,this._lines=o,this._lineCount=o.length,this._lineStarts=null,this._cachedTextValue=null}update(e){this._lines=e,this._lineCount=e.length,this._lineStarts=null,this._cachedTextValue=null}lineAt(e){let r;if(e instanceof ge?r=e.line:typeof e=="number"&&(r=e),typeof r!="number"||r<0||Math.floor(r)!==r)throw new Error("Illegal value for `line`");return r=Math.min(r,this._lines.length-1),new Cu(r,this._lines[r],r===this._lines.length-1)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.line-1)+e.character}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();let r=this._lineStarts.getIndexOf(e),n=this._lines[r.index].length;return new ge(r.index,Math.min(r.remainder,n))}getText(e){if(e===void 0)return this._cachedTextValue==null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue;if(e=this._validateRange(e),e.isEmpty)return"";if(e.isSingleLine)return this._lines[e.start.line].substring(e.start.character,e.end.character);let r=this._eol,n=e.start.line,i=e.end.line,o=[];o.push(this._lines[n].substring(e.start.character));for(let s=n+1;s<i;s++)o.push(this._lines[s]);return o.push(this._lines[i].substring(0,e.end.character)),o.join(r)}_validateRange(e){if(!(e instanceof Y))throw new Error("Invalid argument");let r=this._validatePosition(e.start),n=this._validatePosition(e.end);return r===e.start&&n===e.end?e:new Y(r.line,r.character,n.line,n.character)}_validatePosition(e){if(!(e instanceof ge))throw new Error("Invalid argument");if(this._lines.length===0)return e.with(0,0);let{line:r,character:n}=e,i=!1;if(r<0)r=0,n=0,i=!0;else if(r>=this._lines.length)r=this._lines.length-1,n=this._lines[r].length,i=!0;else{let o=this._lines[r].length;n<0?(n=0,i=!0):n>o&&(n=o,i=!0)}return i?new ge(r,n):e}_ensureLineStarts(){if(!this._lineStarts){let e=this._eol.length,r=this._lines.length,n=new Uint32Array(r);for(let i=0;i<r;i++)n[i]=this._lines[i].length+e;this._lineStarts=new sw(n)}}};function J8(t){if(t<0)return 0;let e=4294967295;return t>e?e:t|0}var sw=class{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}getCount(){return this.values.length}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=J8(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let r=this.prefixSumValidIndex[0]+1;r===0&&(this.prefixSum[0]=this.values[0],r++),e>=this.values.length&&(e=this.values.length-1);for(let n=r;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let r=0,n=this.values.length-1,i=0,o=0,s=0;for(;r<=n;)if(i=r+(n-r)/2|0,o=this.prefixSum[i],s=o-this.values[i],e<s)n=i-1;else if(e>=o)r=i+1;else break;return new cw(i,e-s)}},cw=class{constructor(e,r){this.index=e;this.remainder=r;this._prefixSumIndexOfResultBrand=void 0;this.index=e,this.remainder=r}};var _y=class{constructor(e){this.client=e;this.cursorlessVersion="0.0.0";this.workspaceFolders=void 0;this.disposables=[];this.quickPickReturnValue=void 0;this.onDidCloseTextDocument=Ou;this.onDidChangeActiveTextEditor=Ou;this.onDidChangeVisibleTextEditors=Ou;this.onDidChangeTextEditorSelection=Ou;this.onDidChangeTextEditorVisibleRanges=Ou;this.configuration=new lu,this.keyValueStore=new uu,this.messages=new pu,this.clipboard=new su(this.client),this.capabilities=new Nh,this.editorMap=new Map,this.documentMap=new Map,this.activeWindow=void 0,this.activeBuffer=void 0}async init(){let e=await dF(this.client);this.assetsRoot_=lw.default.join(e,"assets"),this.cursorlessNeovimPath=lw.default.join(e,"node","cursorless-neovim")}async showQuickPick(e,r){throw Error("showQuickPick Not implemented")}async setHighlightRanges(e,r,n){throw Error("setHighlightRanges Not implemented")}async flashRanges(e){console.debug("flashRanges Not implemented")}get assetsRoot(){if(this.assetsRoot_==null)throw Error("Field `assetsRoot` has not yet been mocked");return this.assetsRoot_}get runMode(){return ML()}get activeTextEditor(){return this.getActiveTextEditor()}get activeEditableTextEditor(){return this.getActiveTextEditor()}getActiveTextEditor(){let e=this.activeWindow?this.getTextEditor(this.activeWindow):void 0;return e===void 0&&console.debug("getActiveTextEditor: editor is undefined"),e}getTextEditor(e){for(let[r,n]of this.editorMap)if(r.id===e.id)return n}getTextDocument(e){for(let[r,n]of this.documentMap)if(r.id===e.id)return n}get visibleTextEditors(){return Array.from(this.editorMap.values())}get visibleNotebookEditors(){return[]}getEditableTextEditor(e){return e}async findInDocument(e,r){throw Error("findInDocument Not implemented")}async findInWorkspace(e){throw Error("findInWorkspace Not implemented")}async openTextDocument(e){throw Error("openTextDocument Not implemented")}async openUntitledTextDocument(e){throw Error("openUntitledTextDocument Not implemented")}async showInputBox(e){throw Error("TextDocumentChangeEvent Not implemented")}async executeCommand(e,...r){throw new Error("executeCommand Method not implemented.")}onDidChangeTextDocument(e){return EF(e)}onDidOpenTextDocument(e,r,n){return _F(e,r,n)}async updateTextEditor(e=!1){let r=await this.client.window,n=await r.buffer,i=await n.lines,o=i;i.length>=30&&(o=i.slice(0,15).concat(["..."]).concat(i.slice(-15))),console.debug(`updateTextEditor(): window:${r.id}, buffer:${n.id}, lines=${JSON.stringify(o)}`);let s,l;e?(s=[],l=[]):(s=await Ch(r,this.client),l=await fF(r,this.client,i));let u=this.toNeovimEditor(r,n,i,l,s);return Kr().emitEvent("onDidOpenTextDocument",u.document),u}toNeovimEditor(e,r,n,i,o){let s=this.getTextDocument(r),l=this.getTextEditor(e);return s?(console.debug(`toNeovimEditor(): updating document: buffer=${r.id}`),s.update(n)):(console.debug(`toNeovimEditor(): creating new document: buffer=${r.id}`),s=new Ey(MF.parse(`neovim://${r.id}`),"plaintext",1,`
`,n),this.documentMap.set(r,s)),l?(console.debug(`toNeovimEditor(): updating editor: window=${e.id}`),l.updateDocument(i,o,s)):(console.debug(`toNeovimEditor(): creating new editor: window=${e.id}`),l=new Hh(XT(),this.client,this,e,s,i,o),this.editorMap.set(e,l)),this.activeBuffer=r,this.activeWindow=e,this.activeTextEditor}handleCommandError(e){TF(this.client,e.message)}disposeOnExit(...e){return this.disposables.push(...e),()=>(0,DI.pull)(this.disposables,...e)}};function Ou(){return{dispose(){}}}var Ry=class{constructor(e){this.client=e;this.signals={prePhrase:{getVersion:async()=>null}}}async getFocusedElementType(){let e=await this.client.mode;return e.mode==="t"||e.mode==="nt"?"terminal":"textEditor"}};var tY=BigInt(1e9);function FI(t,e=BigInt(1e6)){return Number(t*e/tY)/Number(e)}async function ky(t,e=[],r=[],n,i,o,s,l){let u={documentContents:n.document.getText(),selections:n.selections.map(Tk)};o!=null&&(u.marks=o),l!=null&&(u.metadata=l),e.includes("clipboard")||(u.clipboard=await i.clipboard.readText()),e.includes("visibleRanges")||(u.visibleRanges=n.visibleRanges.map(nl));for(let m of ys){let d=t?.get(m),g=`${m}Mark`;d!=null&&!e.includes(g)&&(u[g]=d.map(y=>y.toPlainObject()))}if(r.includes("timeOffsetSeconds")){let m=s?.startTimestamp;if(m==null)throw new Error("No start timestamp provided but time offset was requested");let d=process.hrtime.bigint()-m;u.timeOffsetSeconds=FI(d)}return u}var rY=Hr(bl(),1);function LI(t,e,r,n,i,o,s,l){return{commandServerApi:t,ide:i,neovimIDE:n,injectIde:s,scopeProvider:o,takeSnapshot(u,m,d,g,y){return ky(e,u,m,d,g,y,void 0,void 0)},setStoredTarget(u,m,d){e.set(m,d?.map(g=>lF(u,g)))},hatTokenMap:r,runIntegrationTests:l}}async function II(t,e,r,n){let i={[Qx]:async(...o)=>{(await t.mode).mode==="t"&&yF(t);try{await e.updateTextEditor();let l=await r.runCommandSafe(...o),u=Pm(o);if(await n.getFocusedElementType()==="terminal"&&ea(u)){let d=l;"fallback"in d&&d.fallback.action==="insert"&&xF(t)}return l}catch(l){if(e.runMode!=="test"){let u=l;console.error(u.stack),e.handleCommandError(u)}throw l}},"cursorless.repeatPreviousCommand":Ce,"cursorless.showCheatsheet":Ce,"cursorless.internal.updateCheatsheetDefaults":Ce,"cursorless.recordTestCase":Ce,"cursorless.recordOneTestCaseThenPause":Ce,"cursorless.pauseRecording":Ce,"cursorless.resumeRecording":Ce,"cursorless.takeSnapshot":Ce,"cursorless.recordScopeTests.showUnimplementedFacets":Ce,"cursorless.recordScopeTests.saveActiveDocument":Ce,"cursorless.showQuickPick":Ce,"cursorless.showDocumentation":Ce,"cursorless.showInstallationDependencies":Ce,"cursorless.migrateSnippets":Ce,"cursorless.private.logQuickActions":Ce,"cursorless.toggleDecorations":Ce,"cursorless.recomputeDecorationStyles":Ce,"cursorless.showScopeVisualizer":Ce,"cursorless.hideScopeVisualizer":Ce,"cursorless.analyzeCommandHistory":Ce,"cursorless.keyboard.escape":Ce,"cursorless.keyboard.targeted.targetHat":Ce,"cursorless.keyboard.targeted.targetScope":Ce,"cursorless.keyboard.targeted.targetSelection":Ce,"cursorless.keyboard.targeted.clearTarget":Ce,"cursorless.keyboard.targeted.runActionOnTarget":Ce,"cursorless.keyboard.modal.modeOn":Ce,"cursorless.keyboard.modal.modeOff":Ce,"cursorless.keyboard.modal.modeToggle":Ce,"cursorless.keyboard.undoTarget":Ce,"cursorless.keyboard.redoTarget":Ce,"cursorless.tutorial.start":Ce,"cursorless.tutorial.next":Ce,"cursorless.tutorial.previous":Ce,"cursorless.tutorial.restart":Ce,"cursorless.tutorial.resume":Ce,"cursorless.tutorial.list":Ce,"cursorless.documentationOpened":Ce};Object.entries(i).map(([o,s])=>Kr().registerCommand(o,s))}async function Ce(...t){console.debug(`dummyCommandHandler(): args=${t}`)}async function CI(t){let e=t.nvim,r=new _y(e);await r.init();let n=r.runMode==="production"?r:new ym(r,new dm,r.runMode==="test",void 0),i=new Dp,o=new Ry(e),s=r.runMode==="test"?i:o,{commandApi:l,storedTargets:u,hatTokenMap:m,scopeProvider:d,injectIde:g,runIntegrationTests:y}=await cF({ide:n,commandServerApi:s});await II(e,r,l,s);let T={testHelpers:r.runMode==="test"?LI(i,u,m,r,n,d,g,y):void 0};Kr().registerExtensionApi(pF,T),console.log("activate(): Cursorless extension loaded")}function OI(t){t.setOptions({dev:!1}),t.registerFunction("CursorlessLoadExtension",async()=>await nY(t),{sync:!1})}async function nY(t){console.log("==============================================================================================="),console.log("loadExtension(cursorless-neovim): start"),await CI(t),console.log("loadExtension(cursorless-neovim): done")}
/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)

itertools/dist/index.js:
  (* istanbul ignore else -- @preserve *)
  (* istanbul ignore if -- @preserve *)

chai/chai.js:
  (*!
   * Chai - flag utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - test utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - expectTypes utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getActual utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - message composition utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - transferFlags utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * http://chaijs.com
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - isProxyEnabled helper
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addLengthGuard utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getProperties utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - proxify utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addChainingMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteChainableMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - compareByInspect utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getOwnEnumerablePropertySymbols utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getOwnEnumerableProperties utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - isNaN utility
   * Copyright(c) 2012-2015 Sakthipriyan Vairamani <thechargingvolcano@gmail.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*! Bundled license information:
  
  deep-eql/index.js:
    (*!
     * deep-eql
     * Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>
     * MIT Licensed
     *)
    (*!
     * Check to see if the MemoizeMap has recorded a result of the two operands
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {MemoizeMap} memoizeMap
     * @returns {Boolean|null} result
    *)
    (*!
     * Set the result of the equality into the MemoizeMap
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {MemoizeMap} memoizeMap
     * @param {Boolean} result
    *)
    (*!
     * Primary Export
     *)
    (*!
     * The main logic of the `deepEqual` function.
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Object} [options] (optional) Additional options
     * @param {Array} [options.comparator] (optional) Override default algorithm, determining custom equality.
     * @param {Array} [options.memoize] (optional) Provide a custom memoization object which will cache the results of
        complex objects for a speed boost. By passing `false` you can disable memoization, but this will cause circular
        references to blow the stack.
     * @return {Boolean} equal match
    *)
    (*!
     * Compare two Regular Expressions for equality.
     *
     * @param {RegExp} leftHandOperand
     * @param {RegExp} rightHandOperand
     * @return {Boolean} result
     *)
    (*!
     * Compare two Sets/Maps for equality. Faster than other equality functions.
     *
     * @param {Set} leftHandOperand
     * @param {Set} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Simple equality for flat iterable objects such as Arrays, TypedArrays or Node.js buffers.
     *
     * @param {Iterable} leftHandOperand
     * @param {Iterable} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Simple equality for generator objects such as those returned by generator functions.
     *
     * @param {Iterable} leftHandOperand
     * @param {Iterable} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Determine if the given object has an @@iterator function.
     *
     * @param {Object} target
     * @return {Boolean} `true` if the object has an @@iterator function.
     *)
    (*!
     * Gets all iterator entries from the given Object. If the Object has no @@iterator function, returns an empty array.
     * This will consume the iterator - which could have side effects depending on the @@iterator implementation.
     *
     * @param {Object} target
     * @returns {Array} an array of entries from the @@iterator function
     *)
    (*!
     * Gets all entries from a Generator. This will consume the generator - which could have side effects.
     *
     * @param {Generator} target
     * @returns {Array} an array of entries from the Generator.
     *)
    (*!
     * Gets all own and inherited enumerable keys from a target.
     *
     * @param {Object} target
     * @returns {Array} an array of own and inherited enumerable keys from the target.
     *)
    (*!
     * Determines if two objects have matching values, given a set of keys. Defers to deepEqual for the equality check of
     * each key. If any value of the given key is not equal, the function will return false (early).
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Array} keys An array of keys to compare the values of leftHandOperand and rightHandOperand against
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Recursively check the equality of two Objects. Once basic sameness has been established it will defer to `deepEqual`
     * for each enumerable key in the object.
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Returns true if the argument is a primitive.
     *
     * This intentionally returns true for all objects that can be compared by reference,
     * including functions and symbols.
     *
     * @param {Mixed} value
     * @return {Boolean} result
     *)
  *)
*/
