"use strict";var qB=Object.create;var Eu=Object.defineProperty;var zB=Object.getOwnPropertyDescriptor;var GB=Object.getOwnPropertyNames;var KB=Object.getPrototypeOf,QB=Object.prototype.hasOwnProperty;var Ge=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),ZB=(t,e)=>{for(var r in e)Eu(t,r,{get:e[r],enumerable:!0})},F0=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of GB(e))!QB.call(t,i)&&i!==r&&Eu(t,i,{get:()=>e[i],enumerable:!(n=zB(e,i))||n.enumerable});return t};var dr=(t,e,r)=>(r=t!=null?qB(KB(t)):{},F0(e||!t||!t.__esModule?Eu(r,"default",{value:t,enumerable:!0}):r,t)),YB=t=>F0(Eu({},"__esModule",{value:!0}),t);var _P=Ge(Uf=>{"use strict";Object.defineProperty(Uf,"__esModule",{value:!0});Uf.default=void 0;var kge=Uf.default="ffffffff-ffff-ffff-ffff-ffffffffffff"});var EP=Ge(Vf=>{"use strict";Object.defineProperty(Vf,"__esModule",{value:!0});Vf.default=void 0;var Mge=Vf.default="00000000-0000-0000-0000-000000000000"});var RP=Ge(Bf=>{"use strict";Object.defineProperty(Bf,"__esModule",{value:!0});Bf.default=void 0;var Dge=Bf.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i});var ll=Ge(Hf=>{"use strict";Object.defineProperty(Hf,"__esModule",{value:!0});Hf.default=void 0;var v4=b4(RP());function b4(t){return t&&t.__esModule?t:{default:t}}function w4(t){return typeof t=="string"&&v4.default.test(t)}var Fge=Hf.default=w4});var pl=Ge(Wf=>{"use strict";Object.defineProperty(Wf,"__esModule",{value:!0});Wf.default=void 0;var _4=E4(ll());function E4(t){return t&&t.__esModule?t:{default:t}}function R4(t){if(!(0,_4.default)(t))throw TypeError("Invalid UUID");let e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}var Oge=Wf.default=R4});var _i=Ge(ul=>{"use strict";Object.defineProperty(ul,"__esModule",{value:!0});ul.default=void 0;ul.unsafeStringify=kP;var k4=P4(ll());function P4(t){return t&&t.__esModule?t:{default:t}}var Ot=[];for(let t=0;t<256;++t)Ot.push((t+256).toString(16).slice(1));function kP(t,e=0){return(Ot[t[e+0]]+Ot[t[e+1]]+Ot[t[e+2]]+Ot[t[e+3]]+"-"+Ot[t[e+4]]+Ot[t[e+5]]+"-"+Ot[t[e+6]]+Ot[t[e+7]]+"-"+Ot[t[e+8]]+Ot[t[e+9]]+"-"+Ot[t[e+10]]+Ot[t[e+11]]+Ot[t[e+12]]+Ot[t[e+13]]+Ot[t[e+14]]+Ot[t[e+15]]).toLowerCase()}function M4(t,e=0){let r=kP(t,e);if(!(0,k4.default)(r))throw TypeError("Stringified UUID is invalid");return r}var Lge=ul.default=M4});var qf=Ge(KT=>{"use strict";Object.defineProperty(KT,"__esModule",{value:!0});KT.default=I4;var A4=D4(require("node:crypto"));function D4(t){return t&&t.__esModule?t:{default:t}}var jf=new Uint8Array(256),$f=jf.length;function I4(){return $f>jf.length-16&&(A4.default.randomFillSync(jf),$f=0),jf.slice($f,$f+=16)}});var XT=Ge(Gf=>{"use strict";Object.defineProperty(Gf,"__esModule",{value:!0});Gf.default=void 0;var F4=O4(qf()),C4=_i();function O4(t){return t&&t.__esModule?t:{default:t}}var QT,zf,ZT=0,YT=0;function N4(t,e,r){let n=e&&r||0,i=e||new Array(16);t=t||{};let o=t.node,a=t.clockseq;if(t._v6||(o||(o=QT),a==null&&(a=zf)),o==null||a==null){let g=t.random||(t.rng||F4.default)();o==null&&(o=[g[0],g[1],g[2],g[3],g[4],g[5]],!QT&&!t._v6&&(o[0]|=1,QT=o)),a==null&&(a=(g[6]<<8|g[7])&16383,zf===void 0&&!t._v6&&(zf=a))}let l=t.msecs!==void 0?t.msecs:Date.now(),p=t.nsecs!==void 0?t.nsecs:YT+1,u=l-ZT+(p-YT)/1e4;if(u<0&&t.clockseq===void 0&&(a=a+1&16383),(u<0||l>ZT)&&t.nsecs===void 0&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");ZT=l,YT=p,zf=a,l+=122192928e5;let d=((l&268435455)*1e4+p)%4294967296;i[n++]=d>>>24&255,i[n++]=d>>>16&255,i[n++]=d>>>8&255,i[n++]=d&255;let h=l/4294967296*1e4&268435455;i[n++]=h>>>8&255,i[n++]=h&255,i[n++]=h>>>24&15|16,i[n++]=h>>>16&255,i[n++]=a>>>8|128,i[n++]=a&255;for(let g=0;g<6;++g)i[n+g]=o[g];return e||(0,C4.unsafeStringify)(i)}var Bge=Gf.default=N4});var eS=Ge(JT=>{"use strict";Object.defineProperty(JT,"__esModule",{value:!0});JT.default=B4;var L4=V4(pl()),U4=_i();function V4(t){return t&&t.__esModule?t:{default:t}}function B4(t){let e=typeof t=="string"?(0,L4.default)(t):t,r=H4(e);return typeof t=="string"?(0,U4.unsafeStringify)(r):r}function H4(t,e=!1){return Uint8Array.of((t[6]&15)<<4|t[7]>>4&15,(t[7]&15)<<4|(t[4]&240)>>4,(t[4]&15)<<4|(t[5]&240)>>4,(t[5]&15)<<4|(t[0]&240)>>4,(t[0]&15)<<4|(t[1]&240)>>4,(t[1]&15)<<4|(t[2]&240)>>4,96|t[2]&15,t[3],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}});var tS=Ge(Yo=>{"use strict";Object.defineProperty(Yo,"__esModule",{value:!0});Yo.URL=Yo.DNS=void 0;Yo.default=K4;var W4=_i(),$4=j4(pl());function j4(t){return t&&t.__esModule?t:{default:t}}function q4(t){t=unescape(encodeURIComponent(t));let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}var z4=Yo.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",G4=Yo.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function K4(t,e,r){function n(i,o,a,l){var p;if(typeof i=="string"&&(i=q4(i)),typeof o=="string"&&(o=(0,$4.default)(o)),((p=o)===null||p===void 0?void 0:p.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+i.length);if(u.set(o),u.set(i,o.length),u=r(u),u[6]=u[6]&15|e,u[8]=u[8]&63|128,a){l=l||0;for(let d=0;d<16;++d)a[l+d]=u[d];return a}return(0,W4.unsafeStringify)(u)}try{n.name=t}catch{}return n.DNS=z4,n.URL=G4,n}});var PP=Ge(Kf=>{"use strict";Object.defineProperty(Kf,"__esModule",{value:!0});Kf.default=void 0;var Q4=Z4(require("node:crypto"));function Z4(t){return t&&t.__esModule?t:{default:t}}function Y4(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),Q4.default.createHash("md5").update(t).digest()}var jge=Kf.default=Y4});var AP=Ge(Qf=>{"use strict";Object.defineProperty(Qf,"__esModule",{value:!0});Qf.default=void 0;var X4=MP(tS()),J4=MP(PP());function MP(t){return t&&t.__esModule?t:{default:t}}var e6=(0,X4.default)("v3",48,J4.default),zge=Qf.default=e6});var DP=Ge(Zf=>{"use strict";Object.defineProperty(Zf,"__esModule",{value:!0});Zf.default=void 0;var t6=r6(require("node:crypto"));function r6(t){return t&&t.__esModule?t:{default:t}}var Kge=Zf.default={randomUUID:t6.default.randomUUID}});var CP=Ge(Yf=>{"use strict";Object.defineProperty(Yf,"__esModule",{value:!0});Yf.default=void 0;var IP=FP(DP()),n6=FP(qf()),i6=_i();function FP(t){return t&&t.__esModule?t:{default:t}}function o6(t,e,r){if(IP.default.randomUUID&&!e&&!t)return IP.default.randomUUID();t=t||{};let n=t.random||(t.rng||n6.default)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return(0,i6.unsafeStringify)(n)}var Zge=Yf.default=o6});var OP=Ge(Xf=>{"use strict";Object.defineProperty(Xf,"__esModule",{value:!0});Xf.default=void 0;var s6=a6(require("node:crypto"));function a6(t){return t&&t.__esModule?t:{default:t}}function c6(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),s6.default.createHash("sha1").update(t).digest()}var Xge=Xf.default=c6});var LP=Ge(Jf=>{"use strict";Object.defineProperty(Jf,"__esModule",{value:!0});Jf.default=void 0;var l6=NP(tS()),p6=NP(OP());function NP(t){return t&&t.__esModule?t:{default:t}}var u6=(0,l6.default)("v5",80,p6.default),eye=Jf.default=u6});var VP=Ge(rS=>{"use strict";Object.defineProperty(rS,"__esModule",{value:!0});rS.default=h6;var f6=_i(),d6=UP(XT()),m6=UP(eS());function UP(t){return t&&t.__esModule?t:{default:t}}function h6(t={},e,r=0){let n=(0,d6.default)({...t,_v6:!0},new Uint8Array(16));if(n=(0,m6.default)(n),e){for(let i=0;i<16;i++)e[r+i]=n[i];return e}return(0,f6.unsafeStringify)(n)}});var BP=Ge(nS=>{"use strict";Object.defineProperty(nS,"__esModule",{value:!0});nS.default=T6;var g6=x6(pl()),y6=_i();function x6(t){return t&&t.__esModule?t:{default:t}}function T6(t){let e=typeof t=="string"?(0,g6.default)(t):t,r=S6(e);return typeof t=="string"?(0,y6.unsafeStringify)(r):r}function S6(t){return Uint8Array.of((t[3]&15)<<4|t[4]>>4&15,(t[4]&15)<<4|(t[5]&240)>>4,(t[5]&15)<<4|t[6]&15,t[7],(t[1]&15)<<4|(t[2]&240)>>4,(t[2]&15)<<4|(t[3]&240)>>4,16|(t[0]&240)>>4,(t[0]&15)<<4|(t[1]&240)>>4,t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}});var $P=Ge(ed=>{"use strict";Object.defineProperty(ed,"__esModule",{value:!0});ed.default=void 0;var v6=w6(qf()),b6=_i();function w6(t){return t&&t.__esModule?t:{default:t}}var HP=null,WP=null,Mn=0;function _6(t,e,r){t=t||{};let n=e&&r||0,i=e||new Uint8Array(16),o=t.random||(t.rng||v6.default)(),a=t.msecs!==void 0?t.msecs:Date.now(),l=t.seq!==void 0?t.seq:null,p=WP,u=HP;return a>Mn&&t.msecs===void 0&&(Mn=a,l!==null&&(p=null,u=null)),l!==null&&(l>2147483647&&(l=2147483647),p=l>>>19&4095,u=l&524287),(p===null||u===null)&&(p=o[6]&127,p=p<<8|o[7],u=o[8]&63,u=u<<8|o[9],u=u<<5|o[10]>>>3),a+1e4>Mn&&l===null?++u>524287&&(u=0,++p>4095&&(p=0,Mn++)):Mn=a,WP=p,HP=u,i[n++]=Mn/1099511627776&255,i[n++]=Mn/4294967296&255,i[n++]=Mn/16777216&255,i[n++]=Mn/65536&255,i[n++]=Mn/256&255,i[n++]=Mn&255,i[n++]=p>>>4&15|112,i[n++]=p&255,i[n++]=u>>>13&63|128,i[n++]=u>>>5&255,i[n++]=u<<3&255|o[10]&7,i[n++]=o[11],i[n++]=o[12],i[n++]=o[13],i[n++]=o[14],i[n++]=o[15],e||(0,b6.unsafeStringify)(i)}var iye=ed.default=_6});var jP=Ge(td=>{"use strict";Object.defineProperty(td,"__esModule",{value:!0});td.default=void 0;var E6=R6(ll());function R6(t){return t&&t.__esModule?t:{default:t}}function k6(t){if(!(0,E6.default)(t))throw TypeError("Invalid UUID");return parseInt(t.slice(14,15),16)}var sye=td.default=k6});var qP=Ge(jt=>{"use strict";Object.defineProperty(jt,"__esModule",{value:!0});Object.defineProperty(jt,"MAX",{enumerable:!0,get:function(){return P6.default}});Object.defineProperty(jt,"NIL",{enumerable:!0,get:function(){return M6.default}});Object.defineProperty(jt,"parse",{enumerable:!0,get:function(){return A6.default}});Object.defineProperty(jt,"stringify",{enumerable:!0,get:function(){return D6.default}});Object.defineProperty(jt,"v1",{enumerable:!0,get:function(){return I6.default}});Object.defineProperty(jt,"v1ToV6",{enumerable:!0,get:function(){return F6.default}});Object.defineProperty(jt,"v3",{enumerable:!0,get:function(){return C6.default}});Object.defineProperty(jt,"v4",{enumerable:!0,get:function(){return O6.default}});Object.defineProperty(jt,"v5",{enumerable:!0,get:function(){return N6.default}});Object.defineProperty(jt,"v6",{enumerable:!0,get:function(){return L6.default}});Object.defineProperty(jt,"v6ToV1",{enumerable:!0,get:function(){return U6.default}});Object.defineProperty(jt,"v7",{enumerable:!0,get:function(){return V6.default}});Object.defineProperty(jt,"validate",{enumerable:!0,get:function(){return B6.default}});Object.defineProperty(jt,"version",{enumerable:!0,get:function(){return H6.default}});var P6=xr(_P()),M6=xr(EP()),A6=xr(pl()),D6=xr(_i()),I6=xr(XT()),F6=xr(eS()),C6=xr(AP()),O6=xr(CP()),N6=xr(LP()),L6=xr(VP()),U6=xr(BP()),V6=xr($P()),B6=xr(ll()),H6=xr(jP());function xr(t){return t&&t.__esModule?t:{default:t}}});var QP=Ge((KP,nd)=>{(function(t,e){typeof nd=="object"&&nd.exports?nd.exports=e():t.nearley=e()})(KP,function(){function t(p,u,d){return this.id=++t.highestId,this.name=p,this.symbols=u,this.postprocess=d,this}t.highestId=0,t.prototype.toString=function(p){var u=typeof p>"u"?this.symbols.map(l).join(" "):this.symbols.slice(0,p).map(l).join(" ")+" \u25CF "+this.symbols.slice(p).map(l).join(" ");return this.name+" \u2192 "+u};function e(p,u,d,h){this.rule=p,this.dot=u,this.reference=d,this.data=[],this.wantedBy=h,this.isComplete=this.dot===p.symbols.length}e.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},e.prototype.nextState=function(p){var u=new e(this.rule,this.dot+1,this.reference,this.wantedBy);return u.left=this,u.right=p,u.isComplete&&(u.data=u.build(),u.right=void 0),u},e.prototype.build=function(){var p=[],u=this;do p.push(u.right.data),u=u.left;while(u.left);return p.reverse(),p},e.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,o.fail))};function r(p,u){this.grammar=p,this.index=u,this.states=[],this.wants={},this.scannable=[],this.completed={}}r.prototype.process=function(p){for(var u=this.states,d=this.wants,h=this.completed,g=0;g<u.length;g++){var x=u[g];if(x.isComplete){if(x.finish(),x.data!==o.fail){for(var _=x.wantedBy,w=_.length;w--;){var C=_[w];this.complete(C,x)}if(x.reference===this.index){var M=x.rule.name;(this.completed[M]=this.completed[M]||[]).push(x)}}}else{var M=x.rule.symbols[x.dot];if(typeof M!="string"){this.scannable.push(x);continue}if(d[M]){if(d[M].push(x),h.hasOwnProperty(M))for(var U=h[M],w=0;w<U.length;w++){var Z=U[w];this.complete(x,Z)}}else d[M]=[x],this.predict(M)}}},r.prototype.predict=function(p){for(var u=this.grammar.byName[p]||[],d=0;d<u.length;d++){var h=u[d],g=this.wants[p],x=new e(h,0,this.index,g);this.states.push(x)}},r.prototype.complete=function(p,u){var d=p.nextState(u);this.states.push(d)};function n(p,u){this.rules=p,this.start=u||this.rules[0].name;var d=this.byName={};this.rules.forEach(function(h){d.hasOwnProperty(h.name)||(d[h.name]=[]),d[h.name].push(h)})}n.fromCompiled=function(h,u){var d=h.Lexer;h.ParserStart&&(u=h.ParserStart,h=h.ParserRules);var h=h.map(function(x){return new t(x.name,x.symbols,x.postprocess)}),g=new n(h,u);return g.lexer=d,g};function i(){this.reset("")}i.prototype.reset=function(p,u){this.buffer=p,this.index=0,this.line=u?u.line:1,this.lastLineBreak=u?-u.col:0},i.prototype.next=function(){if(this.index<this.buffer.length){var p=this.buffer[this.index++];return p===`
`&&(this.line+=1,this.lastLineBreak=this.index),{value:p}}},i.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},i.prototype.formatError=function(p,u){var d=this.buffer;if(typeof d=="string"){var h=d.split(`
`).slice(Math.max(0,this.line-5),this.line),g=d.indexOf(`
`,this.index);g===-1&&(g=d.length);var x=this.index-this.lastLineBreak,_=String(this.line).length;return u+=" at line "+this.line+" col "+x+`:

`,u+=h.map(function(C,M){return w(this.line-h.length+M+1,_)+" "+C},this).join(`
`),u+=`
`+w("",_+x)+`^
`,u}else return u+" at index "+(this.index-1);function w(C,M){var U=String(C);return Array(M-U.length+1).join(" ")+U}};function o(p,u,d){if(p instanceof n)var h=p,d=u;else var h=n.fromCompiled(p,u);this.grammar=h,this.options={keepHistory:!1,lexer:h.lexer||new i};for(var g in d||{})this.options[g]=d[g];this.lexer=this.options.lexer,this.lexerState=void 0;var x=new r(h,0),_=this.table=[x];x.wants[h.start]=[],x.predict(h.start),x.process(),this.current=0}o.fail={},o.prototype.feed=function(p){var u=this.lexer;u.reset(p,this.lexerState);for(var d;;){try{if(d=u.next(),!d)break}catch(de){var _=new r(this.grammar,this.current+1);this.table.push(_);var h=new Error(this.reportLexerError(de));throw h.offset=this.current,h.token=de.token,h}var g=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var x=this.current+1,_=new r(this.grammar,x);this.table.push(_);for(var w=d.text!==void 0?d.text:d.value,C=u.constructor===i?d.value:u.transform?.(d)??d,M=g.scannable,U=M.length;U--;){var Z=M[U],ne=Z.rule.symbols[Z.dot];if(ne.test?ne.test(C):ne.type?ne.type===d.type:ne.literal===w){var ge=Z.nextState({data:C,token:d,isToken:!0,reference:x-1});_.states.push(ge)}}if(_.process(),_.states.length===0){var h=new Error(this.reportError(d));throw h.offset=this.current,h.token=d,h}this.options.keepHistory&&(g.lexerState=u.save()),this.current++}return g&&(this.lexerState=u.save()),this.results=this.finish(),this},o.prototype.reportLexerError=function(p){var u,d,h=p.token;return h?(u="input "+JSON.stringify(h.text[0])+" (lexer error)",d=this.lexer.formatError(h,"Syntax error")):(u="input (lexer error)",d=p.message),this.reportErrorCommon(d,u)},o.prototype.reportError=function(p){var u=(p.type?p.type+" token: ":"")+JSON.stringify(p.value!==void 0?p.value:p),d=this.lexer.formatError(p,"Syntax error");return this.reportErrorCommon(d,u)},o.prototype.reportErrorCommon=function(p,u){var d=[];d.push(p);var h=this.table.length-2,g=this.table[h],x=g.states.filter(function(w){var C=w.rule.symbols[w.dot];return C&&typeof C!="string"});if(x.length===0)d.push("Unexpected "+u+`. I did not expect any more input. Here is the state of my parse table:
`),this.displayStateStack(g.states,d);else{d.push("Unexpected "+u+`. Instead, I was expecting to see one of the following:
`);var _=x.map(function(w){return this.buildFirstStateStack(w,[])||[w]},this);_.forEach(function(w){var C=w[0],M=C.rule.symbols[C.dot],U=this.getSymbolDisplay(M);d.push("A "+U+" based on:"),this.displayStateStack(w,d)},this)}return d.push(""),d.join(`
`)},o.prototype.displayStateStack=function(p,u){for(var d,h=0,g=0;g<p.length;g++){var x=p[g],_=x.rule.toString(x.dot);_===d?h++:(h>0&&u.push("    ^ "+h+" more lines identical to this"),h=0,u.push("    "+_)),d=_}},o.prototype.getSymbolDisplay=function(p){return a(p)},o.prototype.buildFirstStateStack=function(p,u){if(u.indexOf(p)!==-1)return null;if(p.wantedBy.length===0)return[p];var d=p.wantedBy[0],h=[p].concat(u),g=this.buildFirstStateStack(d,h);return g===null?null:[p].concat(g)},o.prototype.save=function(){var p=this.table[this.current];return p.lexerState=this.lexerState,p},o.prototype.restore=function(p){var u=p.index;this.current=u,this.table[u]=p,this.table.splice(u+1),this.lexerState=p.lexerState,this.results=this.finish()},o.prototype.rewind=function(p){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[p])},o.prototype.finish=function(){var p=[],u=this.grammar.start,d=this.table[this.table.length-1];return d.states.forEach(function(h){h.rule.name===u&&h.dot===h.rule.symbols.length&&h.reference===0&&h.data!==o.fail&&p.push(h)}),p.map(function(h){return h.data})};function a(p){var u=typeof p;if(u==="string")return p;if(u==="object"){if(p.literal)return JSON.stringify(p.literal);if(p instanceof RegExp)return"character matching "+p;if(p.type)return p.type+" token";if(p.test)return"token matching "+String(p.test);throw new Error("Unknown symbol type: "+p)}}function l(p){var u=typeof p;if(u==="string")return p;if(u==="object"){if(p.literal)return JSON.stringify(p.literal);if(p instanceof RegExp)return p.toString();if(p.type)return"%"+p.type;if(p.test)return"<"+String(p.test)+">";throw new Error("Unknown symbol type: "+p)}}return{Parser:o,Grammar:n,Rule:t}})});var tM=Ge((eM,sd)=>{(function(t,e){typeof define=="function"&&define.amd?define([],e):typeof sd=="object"&&sd.exports?sd.exports=e():t.moo=e()})(eM,function(){"use strict";var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,r=typeof new RegExp().sticky=="boolean";function n(N){return N&&e.call(N)==="[object RegExp]"}function i(N){return N&&typeof N=="object"&&!n(N)&&!Array.isArray(N)}function o(N){return N.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function a(N){var O=new RegExp("|"+N);return O.exec("").length-1}function l(N){return"("+N+")"}function p(N){if(!N.length)return"(?!)";var O=N.map(function(I){return"(?:"+I+")"}).join("|");return"(?:"+O+")"}function u(N){if(typeof N=="string")return"(?:"+o(N)+")";if(n(N)){if(N.ignoreCase)throw new Error("RegExp /i flag not allowed");if(N.global)throw new Error("RegExp /g flag is implied");if(N.sticky)throw new Error("RegExp /y flag is implied");if(N.multiline)throw new Error("RegExp /m flag is implied");return N.source}else throw new Error("Not a pattern: "+N)}function d(N,O){return N.length>O?N:Array(O-N.length+1).join(" ")+N}function h(N,O){for(var I=N.length,$=0;;){var q=N.lastIndexOf(`
`,I-1);if(q===-1||($++,I=q,$===O)||I===0)break}var K=$<O?0:I+1;return N.substring(K).split(`
`)}function g(N){for(var O=Object.getOwnPropertyNames(N),I=[],$=0;$<O.length;$++){var q=O[$],K=N[q],Q=[].concat(K);if(q==="include"){for(var te=0;te<Q.length;te++)I.push({include:Q[te]});continue}var me=[];Q.forEach(function(re){i(re)?(me.length&&I.push(_(q,me)),I.push(_(q,re)),me=[]):me.push(re)}),me.length&&I.push(_(q,me))}return I}function x(N){for(var O=[],I=0;I<N.length;I++){var $=N[I];if($.include){for(var q=[].concat($.include),K=0;K<q.length;K++)O.push({include:q[K]});continue}if(!$.type)throw new Error("Rule has no type: "+JSON.stringify($));O.push(_($.type,$))}return O}function _(N,O){if(i(O)||(O={match:O}),O.include)throw new Error("Matching rules cannot also include states");var I={defaultType:N,lineBreaks:!!O.error||!!O.fallback,pop:!1,next:null,push:null,error:!1,fallback:!1,value:null,type:null,shouldThrow:!1};for(var $ in O)t.call(O,$)&&(I[$]=O[$]);if(typeof I.type=="string"&&N!==I.type)throw new Error("Type transform cannot be a string (type '"+I.type+"' for token '"+N+"')");var q=I.match;return I.match=Array.isArray(q)?q:q?[q]:[],I.match.sort(function(K,Q){return n(K)&&n(Q)?0:n(Q)?-1:n(K)?1:Q.length-K.length}),I}function w(N){return Array.isArray(N)?x(N):g(N)}var C=_("error",{lineBreaks:!0,shouldThrow:!0});function M(N,O){for(var I=null,$=Object.create(null),q=!0,K=null,Q=[],te=[],me=0;me<N.length;me++)N[me].fallback&&(q=!1);for(var me=0;me<N.length;me++){var re=N[me];if(re.include)throw new Error("Inheritance is not allowed in stateless lexers");if(re.error||re.fallback){if(I)throw!re.fallback==!I.fallback?new Error("Multiple "+(re.fallback?"fallback":"error")+" rules not allowed (for token '"+re.defaultType+"')"):new Error("fallback and error are mutually exclusive (for token '"+re.defaultType+"')");I=re}var Re=re.match.slice();if(q)for(;Re.length&&typeof Re[0]=="string"&&Re[0].length===1;){var ar=Re.shift();$[ar.charCodeAt(0)]=re}if(re.pop||re.push||re.next){if(!O)throw new Error("State-switching options are not allowed in stateless lexers (for token '"+re.defaultType+"')");if(re.fallback)throw new Error("State-switching options are not allowed on fallback tokens (for token '"+re.defaultType+"')")}if(Re.length!==0){q=!1,Q.push(re);for(var si=0;si<Re.length;si++){var cr=Re[si];if(n(cr)){if(K===null)K=cr.unicode;else if(K!==cr.unicode&&re.fallback===!1)throw new Error("If one rule is /u then all must be")}}var Tn=p(Re.map(u)),kr=new RegExp(Tn);if(kr.test(""))throw new Error("RegExp matches empty string: "+kr);var Sn=a(Tn);if(Sn>0)throw new Error("RegExp has capture groups: "+kr+`
Use (?: \u2026 ) instead`);if(!re.lineBreaks&&kr.test(`
`))throw new Error("Rule should declare lineBreaks: "+kr);te.push(l(Tn))}}var Gr=I&&I.fallback,Po=r&&!Gr?"ym":"gm",ai=r||Gr?"":"|";K===!0&&(Po+="u");var bs=new RegExp(p(te)+ai,Po);return{regexp:bs,groups:Q,fast:$,error:I||C}}function U(N){var O=M(w(N));return new de({start:O},"start")}function Z(N,O,I){var $=N&&(N.push||N.next);if($&&!I[$])throw new Error("Missing state '"+$+"' (in token '"+N.defaultType+"' of state '"+O+"')");if(N&&N.pop&&+N.pop!=1)throw new Error("pop must be 1 (in token '"+N.defaultType+"' of state '"+O+"')")}function ne(N,O){var I=N.$all?w(N.$all):[];delete N.$all;var $=Object.getOwnPropertyNames(N);O||(O=$[0]);for(var q=Object.create(null),K=0;K<$.length;K++){var Q=$[K];q[Q]=w(N[Q]).concat(I)}for(var K=0;K<$.length;K++)for(var Q=$[K],te=q[Q],me=Object.create(null),re=0;re<te.length;re++){var Re=te[re];if(Re.include){var ar=[re,1];if(Re.include!==Q&&!me[Re.include]){me[Re.include]=!0;var si=q[Re.include];if(!si)throw new Error("Cannot include nonexistent state '"+Re.include+"' (in state '"+Q+"')");for(var cr=0;cr<si.length;cr++){var Tn=si[cr];te.indexOf(Tn)===-1&&ar.push(Tn)}}te.splice.apply(te,ar),re--}}for(var kr=Object.create(null),K=0;K<$.length;K++){var Q=$[K];kr[Q]=M(q[Q],!0)}for(var K=0;K<$.length;K++){for(var Sn=$[K],Gr=kr[Sn],Po=Gr.groups,re=0;re<Po.length;re++)Z(Po[re],Sn,kr);for(var ai=Object.getOwnPropertyNames(Gr.fast),re=0;re<ai.length;re++)Z(Gr.fast[ai[re]],Sn,kr)}return new de(kr,O)}function ge(N){for(var O=typeof Map<"u",I=O?new Map:Object.create(null),$=Object.getOwnPropertyNames(N),q=0;q<$.length;q++){var K=$[q],Q=N[K],te=Array.isArray(Q)?Q:[Q];te.forEach(function(me){if(typeof me!="string")throw new Error("keyword must be string (in keyword '"+K+"')");O?I.set(me,K):I[me]=K})}return function(me){return O?I.get(me):I[me]}}var de=function(N,O){this.startState=O,this.states=N,this.buffer="",this.stack=[],this.reset()};de.prototype.reset=function(N,O){return this.buffer=N||"",this.index=0,this.line=O?O.line:1,this.col=O?O.col:1,this.queuedToken=O?O.queuedToken:null,this.queuedText=O?O.queuedText:"",this.queuedThrow=O?O.queuedThrow:null,this.setState(O?O.state:this.startState),this.stack=O&&O.stack?O.stack.slice():[],this},de.prototype.save=function(){return{line:this.line,col:this.col,state:this.state,stack:this.stack.slice(),queuedToken:this.queuedToken,queuedText:this.queuedText,queuedThrow:this.queuedThrow}},de.prototype.setState=function(N){if(!(!N||this.state===N)){this.state=N;var O=this.states[N];this.groups=O.groups,this.error=O.error,this.re=O.regexp,this.fast=O.fast}},de.prototype.popState=function(){this.setState(this.stack.pop())},de.prototype.pushState=function(N){this.stack.push(this.state),this.setState(N)};var mt=r?function(N,O){return N.exec(O)}:function(N,O){var I=N.exec(O);return I[0].length===0?null:I};de.prototype._getGroup=function(N){for(var O=this.groups.length,I=0;I<O;I++)if(N[I+1]!==void 0)return this.groups[I];throw new Error("Cannot find token type for matched text")};function It(){return this.value}if(de.prototype.next=function(){var N=this.index;if(this.queuedGroup){var O=this._token(this.queuedGroup,this.queuedText,N);return this.queuedGroup=null,this.queuedText="",O}var I=this.buffer;if(N!==I.length){var Q=this.fast[I.charCodeAt(N)];if(Q)return this._token(Q,I.charAt(N),N);var $=this.re;$.lastIndex=N;var q=mt($,I),K=this.error;if(q==null)return this._token(K,I.slice(N,I.length),N);var Q=this._getGroup(q),te=q[0];return K.fallback&&q.index!==N?(this.queuedGroup=Q,this.queuedText=te,this._token(K,I.slice(N,q.index),N)):this._token(Q,te,N)}},de.prototype._token=function(N,O,I){var $=0;if(N.lineBreaks){var q=/\n/g,K=1;if(O===`
`)$=1;else for(;q.exec(O);)$++,K=q.lastIndex}var Q={type:typeof N.type=="function"&&N.type(O)||N.defaultType,value:typeof N.value=="function"?N.value(O):O,text:O,toString:It,offset:I,lineBreaks:$,line:this.line,col:this.col},te=O.length;if(this.index+=te,this.line+=$,$!==0?this.col=te-K+1:this.col+=te,N.shouldThrow){var me=new Error(this.formatError(Q,"invalid syntax"));throw me}return N.pop?this.popState():N.push?this.pushState(N.push):N.next&&this.setState(N.next),Q},typeof Symbol<"u"&&Symbol.iterator){var ot=function(N){this.lexer=N};ot.prototype.next=function(){var N=this.lexer.next();return{value:N,done:!N}},ot.prototype[Symbol.iterator]=function(){return this},de.prototype[Symbol.iterator]=function(){return new ot(this)}}return de.prototype.formatError=function(N,O){if(N==null)var I=this.buffer.slice(this.index),N={text:I,offset:this.index,lineBreaks:I.indexOf(`
`)===-1?0:1,line:this.line,col:this.col};var $=2,q=Math.max(N.line-$,1),K=N.line+$,Q=String(K).length,te=h(this.buffer,this.line-N.line+$+1).slice(0,5),me=[];me.push(O+" at line "+N.line+" col "+N.col+":"),me.push("");for(var re=0;re<te.length;re++){var Re=te[re],ar=q+re;me.push(d(String(ar),Q)+"  "+Re),ar===N.line&&me.push(d("",Q+N.col+1)+"^")}return me.join(`
`)},de.prototype.clone=function(){return new de(this.states,this.state)},de.prototype.has=function(N){return!0},{compile:U,states:ne,error:Object.freeze({error:!0}),fallback:Object.freeze({fallback:!0}),keywords:ge}})});var xl=Ge((Zn,zM)=>{"use strict";Object.defineProperty(Zn,"__esModule",{value:!0});function An(t){return typeof t=="object"&&!("toString"in t)?Object.prototype.toString.call(t).slice(8,-1):t}var i5=typeof process=="object"&&process.env.NODE_ENV==="production";function cn(t,e){if(!t)throw i5?new Error("Invariant failed"):new Error(e())}Zn.invariant=cn;var ES=Object.prototype.hasOwnProperty,o5=Array.prototype.splice,s5=Object.prototype.toString;function es(t){return s5.call(t).slice(8,-1)}var Ud=Object.assign||function(t,e){return RS(e).forEach(function(r){ES.call(e,r)&&(t[r]=e[r])}),t},RS=typeof Object.getOwnPropertySymbols=="function"?function(t){return Object.keys(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.keys(t)};function fo(t){return Array.isArray(t)?Ud(t.constructor(t.length),t):es(t)==="Map"?new Map(t):es(t)==="Set"?new Set(t):t&&typeof t=="object"?Ud(Object.create(Object.getPrototypeOf(t)),t):t}var jM=function(){function t(){this.commands=Ud({},a5),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(e,r){return e===r},this.update.newContext=function(){return new t().update}}return Object.defineProperty(t.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(e){this.update.isEquals=e},enumerable:!0,configurable:!0}),t.prototype.extend=function(e,r){this.commands[e]=r},t.prototype.update=function(e,r){var n=this,i=typeof r=="function"?{$apply:r}:r;Array.isArray(e)&&Array.isArray(i)||cn(!Array.isArray(i),function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."}),cn(typeof i=="object"&&i!==null,function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the "+("following commands: "+Object.keys(n.commands).join(", ")+".")});var o=e;return RS(i).forEach(function(a){if(ES.call(n.commands,a)){var l=e===o;o=n.commands[a](i[a],o,i,e),l&&n.isEquals(o,e)&&(o=e)}else{var p=es(e)==="Map"?n.update(e.get(a),i[a]):n.update(e[a],i[a]),u=es(o)==="Map"?o.get(a):o[a];(!n.isEquals(p,u)||typeof p>"u"&&!ES.call(e,a))&&(o===e&&(o=fo(e)),es(o)==="Map"?o.set(a,p):o[a]=p)}}),o},t}();Zn.Context=jM;var a5={$push:function(t,e,r){return WM(e,r,"$push"),t.length?e.concat(t):e},$unshift:function(t,e,r){return WM(e,r,"$unshift"),t.length?t.concat(e):e},$splice:function(t,e,r,n){return c5(e,r),t.forEach(function(i){qM(i),e===n&&i.length&&(e=fo(n)),o5.apply(e,i)}),e},$set:function(t,e,r){return p5(r),t},$toggle:function(t,e){yl(t,"$toggle");var r=t.length?fo(e):e;return t.forEach(function(n){r[n]=!e[n]}),r},$unset:function(t,e,r,n){return yl(t,"$unset"),t.forEach(function(i){Object.hasOwnProperty.call(e,i)&&(e===n&&(e=fo(n)),delete e[i])}),e},$add:function(t,e,r,n){return $M(e,"$add"),yl(t,"$add"),es(e)==="Map"?t.forEach(function(i){var o=i[0],a=i[1];e===n&&e.get(o)!==a&&(e=fo(n)),e.set(o,a)}):t.forEach(function(i){e===n&&!e.has(i)&&(e=fo(n)),e.add(i)}),e},$remove:function(t,e,r,n){return $M(e,"$remove"),yl(t,"$remove"),t.forEach(function(i){e===n&&e.has(i)&&(e=fo(n)),e.delete(i)}),e},$merge:function(t,e,r,n){return u5(e,t),RS(t).forEach(function(i){t[i]!==e[i]&&(e===n&&(e=fo(n)),e[i]=t[i])}),e},$apply:function(t,e){return l5(t),t(e)}},kS=new jM;Zn.isEquals=kS.update.isEquals;Zn.extend=kS.extend;Zn.default=kS.update;Zn.default.default=zM.exports=Ud(Zn.default,Zn);function WM(t,e,r){cn(Array.isArray(t),function(){return"update(): expected target of "+An(r)+" to be an array; got "+An(t)+"."}),yl(e[r],r)}function yl(t,e){cn(Array.isArray(t),function(){return"update(): expected spec of "+An(e)+" to be an array; got "+An(t)+". Did you forget to wrap your parameter in an array?"})}function c5(t,e){cn(Array.isArray(t),function(){return"Expected $splice target to be an array; got "+An(t)}),qM(e.$splice)}function qM(t){cn(Array.isArray(t),function(){return"update(): expected spec of $splice to be an array of arrays; got "+An(t)+". Did you forget to wrap your parameters in an array?"})}function l5(t){cn(typeof t=="function",function(){return"update(): expected spec of $apply to be a function; got "+An(t)+"."})}function p5(t){cn(Object.keys(t).length===1,function(){return"Cannot have more than one key in an object with $set"})}function u5(t,e){cn(e&&typeof e=="object",function(){return"update(): $merge expects a spec of type 'object'; got "+An(e)}),cn(t&&typeof t=="object",function(){return"update(): $merge expects a target of type 'object'; got "+An(t)})}function $M(t,e){var r=es(t);cn(r==="Map"||r==="Set",function(){return"update(): "+An(e)+" expects a target of type Set or Map; got "+An(r)})}});var Fv=Ge((Xa,ap)=>{(function(){var t,e="4.17.21",r=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",i="Expected a function",o="Invalid `variable` option passed into `_.template`",a="__lodash_hash_undefined__",l=500,p="__lodash_placeholder__",u=1,d=2,h=4,g=1,x=2,_=1,w=2,C=4,M=8,U=16,Z=32,ne=64,ge=128,de=256,mt=512,It=30,ot="...",N=800,O=16,I=1,$=2,q=3,K=1/0,Q=9007199254740991,te=17976931348623157e292,me=NaN,re=4294967295,Re=re-1,ar=re>>>1,si=[["ary",ge],["bind",_],["bindKey",w],["curry",M],["curryRight",U],["flip",mt],["partial",Z],["partialRight",ne],["rearg",de]],cr="[object Arguments]",Tn="[object Array]",kr="[object AsyncFunction]",Sn="[object Boolean]",Gr="[object Date]",Po="[object DOMException]",ai="[object Error]",bs="[object Function]",rw="[object GeneratorFunction]",vn="[object Map]",mc="[object Number]",cC="[object Null]",ci="[object Object]",nw="[object Promise]",lC="[object Proxy]",hc="[object RegExp]",bn="[object Set]",gc="[object String]",Np="[object Symbol]",pC="[object Undefined]",yc="[object WeakMap]",uC="[object WeakSet]",xc="[object ArrayBuffer]",ws="[object DataView]",ky="[object Float32Array]",Py="[object Float64Array]",My="[object Int8Array]",Ay="[object Int16Array]",Dy="[object Int32Array]",Iy="[object Uint8Array]",Fy="[object Uint8ClampedArray]",Cy="[object Uint16Array]",Oy="[object Uint32Array]",fC=/\b__p \+= '';/g,dC=/\b(__p \+=) '' \+/g,mC=/(__e\(.*?\)|\b__t\)) \+\n'';/g,iw=/&(?:amp|lt|gt|quot|#39);/g,ow=/[&<>"']/g,hC=RegExp(iw.source),gC=RegExp(ow.source),yC=/<%-([\s\S]+?)%>/g,xC=/<%([\s\S]+?)%>/g,sw=/<%=([\s\S]+?)%>/g,TC=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,SC=/^\w*$/,vC=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ny=/[\\^$.*+?()[\]{}|]/g,bC=RegExp(Ny.source),Ly=/^\s+/,wC=/\s/,_C=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,EC=/\{\n\/\* \[wrapped with (.+)\] \*/,RC=/,? & /,kC=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,PC=/[()=,{}\[\]\/\s]/,MC=/\\(\\)?/g,AC=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,aw=/\w*$/,DC=/^[-+]0x[0-9a-f]+$/i,IC=/^0b[01]+$/i,FC=/^\[object .+?Constructor\]$/,CC=/^0o[0-7]+$/i,OC=/^(?:0|[1-9]\d*)$/,NC=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Lp=/($^)/,LC=/['\n\r\u2028\u2029\\]/g,Up="\\ud800-\\udfff",UC="\\u0300-\\u036f",VC="\\ufe20-\\ufe2f",BC="\\u20d0-\\u20ff",cw=UC+VC+BC,lw="\\u2700-\\u27bf",pw="a-z\\xdf-\\xf6\\xf8-\\xff",HC="\\xac\\xb1\\xd7\\xf7",WC="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",$C="\\u2000-\\u206f",jC=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",uw="A-Z\\xc0-\\xd6\\xd8-\\xde",fw="\\ufe0e\\ufe0f",dw=HC+WC+$C+jC,Uy="['\u2019]",qC="["+Up+"]",mw="["+dw+"]",Vp="["+cw+"]",hw="\\d+",zC="["+lw+"]",gw="["+pw+"]",yw="[^"+Up+dw+hw+lw+pw+uw+"]",Vy="\\ud83c[\\udffb-\\udfff]",GC="(?:"+Vp+"|"+Vy+")",xw="[^"+Up+"]",By="(?:\\ud83c[\\udde6-\\uddff]){2}",Hy="[\\ud800-\\udbff][\\udc00-\\udfff]",_s="["+uw+"]",Tw="\\u200d",Sw="(?:"+gw+"|"+yw+")",KC="(?:"+_s+"|"+yw+")",vw="(?:"+Uy+"(?:d|ll|m|re|s|t|ve))?",bw="(?:"+Uy+"(?:D|LL|M|RE|S|T|VE))?",ww=GC+"?",_w="["+fw+"]?",QC="(?:"+Tw+"(?:"+[xw,By,Hy].join("|")+")"+_w+ww+")*",ZC="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",YC="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ew=_w+ww+QC,XC="(?:"+[zC,By,Hy].join("|")+")"+Ew,JC="(?:"+[xw+Vp+"?",Vp,By,Hy,qC].join("|")+")",eO=RegExp(Uy,"g"),tO=RegExp(Vp,"g"),Wy=RegExp(Vy+"(?="+Vy+")|"+JC+Ew,"g"),rO=RegExp([_s+"?"+gw+"+"+vw+"(?="+[mw,_s,"$"].join("|")+")",KC+"+"+bw+"(?="+[mw,_s+Sw,"$"].join("|")+")",_s+"?"+Sw+"+"+vw,_s+"+"+bw,YC,ZC,hw,XC].join("|"),"g"),nO=RegExp("["+Tw+Up+cw+fw+"]"),iO=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,oO=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],sO=-1,Ye={};Ye[ky]=Ye[Py]=Ye[My]=Ye[Ay]=Ye[Dy]=Ye[Iy]=Ye[Fy]=Ye[Cy]=Ye[Oy]=!0,Ye[cr]=Ye[Tn]=Ye[xc]=Ye[Sn]=Ye[ws]=Ye[Gr]=Ye[ai]=Ye[bs]=Ye[vn]=Ye[mc]=Ye[ci]=Ye[hc]=Ye[bn]=Ye[gc]=Ye[yc]=!1;var Qe={};Qe[cr]=Qe[Tn]=Qe[xc]=Qe[ws]=Qe[Sn]=Qe[Gr]=Qe[ky]=Qe[Py]=Qe[My]=Qe[Ay]=Qe[Dy]=Qe[vn]=Qe[mc]=Qe[ci]=Qe[hc]=Qe[bn]=Qe[gc]=Qe[Np]=Qe[Iy]=Qe[Fy]=Qe[Cy]=Qe[Oy]=!0,Qe[ai]=Qe[bs]=Qe[yc]=!1;var aO={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},cO={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},lO={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},pO={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},uO=parseFloat,fO=parseInt,Rw=typeof global=="object"&&global&&global.Object===Object&&global,dO=typeof self=="object"&&self&&self.Object===Object&&self,_t=Rw||dO||Function("return this")(),$y=typeof Xa=="object"&&Xa&&!Xa.nodeType&&Xa,Mo=$y&&typeof ap=="object"&&ap&&!ap.nodeType&&ap,kw=Mo&&Mo.exports===$y,jy=kw&&Rw.process,Kr=function(){try{var k=Mo&&Mo.require&&Mo.require("util").types;return k||jy&&jy.binding&&jy.binding("util")}catch{}}(),Pw=Kr&&Kr.isArrayBuffer,Mw=Kr&&Kr.isDate,Aw=Kr&&Kr.isMap,Dw=Kr&&Kr.isRegExp,Iw=Kr&&Kr.isSet,Fw=Kr&&Kr.isTypedArray;function Pr(k,V,L){switch(L.length){case 0:return k.call(V);case 1:return k.call(V,L[0]);case 2:return k.call(V,L[0],L[1]);case 3:return k.call(V,L[0],L[1],L[2])}return k.apply(V,L)}function mO(k,V,L,ee){for(var ye=-1,Ve=k==null?0:k.length;++ye<Ve;){var xt=k[ye];V(ee,xt,L(xt),k)}return ee}function Qr(k,V){for(var L=-1,ee=k==null?0:k.length;++L<ee&&V(k[L],L,k)!==!1;);return k}function hO(k,V){for(var L=k==null?0:k.length;L--&&V(k[L],L,k)!==!1;);return k}function Cw(k,V){for(var L=-1,ee=k==null?0:k.length;++L<ee;)if(!V(k[L],L,k))return!1;return!0}function Ui(k,V){for(var L=-1,ee=k==null?0:k.length,ye=0,Ve=[];++L<ee;){var xt=k[L];V(xt,L,k)&&(Ve[ye++]=xt)}return Ve}function Bp(k,V){var L=k==null?0:k.length;return!!L&&Es(k,V,0)>-1}function qy(k,V,L){for(var ee=-1,ye=k==null?0:k.length;++ee<ye;)if(L(V,k[ee]))return!0;return!1}function et(k,V){for(var L=-1,ee=k==null?0:k.length,ye=Array(ee);++L<ee;)ye[L]=V(k[L],L,k);return ye}function Vi(k,V){for(var L=-1,ee=V.length,ye=k.length;++L<ee;)k[ye+L]=V[L];return k}function zy(k,V,L,ee){var ye=-1,Ve=k==null?0:k.length;for(ee&&Ve&&(L=k[++ye]);++ye<Ve;)L=V(L,k[ye],ye,k);return L}function gO(k,V,L,ee){var ye=k==null?0:k.length;for(ee&&ye&&(L=k[--ye]);ye--;)L=V(L,k[ye],ye,k);return L}function Gy(k,V){for(var L=-1,ee=k==null?0:k.length;++L<ee;)if(V(k[L],L,k))return!0;return!1}var yO=Ky("length");function xO(k){return k.split("")}function TO(k){return k.match(kC)||[]}function Ow(k,V,L){var ee;return L(k,function(ye,Ve,xt){if(V(ye,Ve,xt))return ee=Ve,!1}),ee}function Hp(k,V,L,ee){for(var ye=k.length,Ve=L+(ee?1:-1);ee?Ve--:++Ve<ye;)if(V(k[Ve],Ve,k))return Ve;return-1}function Es(k,V,L){return V===V?DO(k,V,L):Hp(k,Nw,L)}function SO(k,V,L,ee){for(var ye=L-1,Ve=k.length;++ye<Ve;)if(ee(k[ye],V))return ye;return-1}function Nw(k){return k!==k}function Lw(k,V){var L=k==null?0:k.length;return L?Zy(k,V)/L:me}function Ky(k){return function(V){return V==null?t:V[k]}}function Qy(k){return function(V){return k==null?t:k[V]}}function Uw(k,V,L,ee,ye){return ye(k,function(Ve,xt,ze){L=ee?(ee=!1,Ve):V(L,Ve,xt,ze)}),L}function vO(k,V){var L=k.length;for(k.sort(V);L--;)k[L]=k[L].value;return k}function Zy(k,V){for(var L,ee=-1,ye=k.length;++ee<ye;){var Ve=V(k[ee]);Ve!==t&&(L=L===t?Ve:L+Ve)}return L}function Yy(k,V){for(var L=-1,ee=Array(k);++L<k;)ee[L]=V(L);return ee}function bO(k,V){return et(V,function(L){return[L,k[L]]})}function Vw(k){return k&&k.slice(0,$w(k)+1).replace(Ly,"")}function Mr(k){return function(V){return k(V)}}function Xy(k,V){return et(V,function(L){return k[L]})}function Tc(k,V){return k.has(V)}function Bw(k,V){for(var L=-1,ee=k.length;++L<ee&&Es(V,k[L],0)>-1;);return L}function Hw(k,V){for(var L=k.length;L--&&Es(V,k[L],0)>-1;);return L}function wO(k,V){for(var L=k.length,ee=0;L--;)k[L]===V&&++ee;return ee}var _O=Qy(aO),EO=Qy(cO);function RO(k){return"\\"+pO[k]}function kO(k,V){return k==null?t:k[V]}function Rs(k){return nO.test(k)}function PO(k){return iO.test(k)}function MO(k){for(var V,L=[];!(V=k.next()).done;)L.push(V.value);return L}function Jy(k){var V=-1,L=Array(k.size);return k.forEach(function(ee,ye){L[++V]=[ye,ee]}),L}function Ww(k,V){return function(L){return k(V(L))}}function Bi(k,V){for(var L=-1,ee=k.length,ye=0,Ve=[];++L<ee;){var xt=k[L];(xt===V||xt===p)&&(k[L]=p,Ve[ye++]=L)}return Ve}function Wp(k){var V=-1,L=Array(k.size);return k.forEach(function(ee){L[++V]=ee}),L}function AO(k){var V=-1,L=Array(k.size);return k.forEach(function(ee){L[++V]=[ee,ee]}),L}function DO(k,V,L){for(var ee=L-1,ye=k.length;++ee<ye;)if(k[ee]===V)return ee;return-1}function IO(k,V,L){for(var ee=L+1;ee--;)if(k[ee]===V)return ee;return ee}function ks(k){return Rs(k)?CO(k):yO(k)}function wn(k){return Rs(k)?OO(k):xO(k)}function $w(k){for(var V=k.length;V--&&wC.test(k.charAt(V)););return V}var FO=Qy(lO);function CO(k){for(var V=Wy.lastIndex=0;Wy.test(k);)++V;return V}function OO(k){return k.match(Wy)||[]}function NO(k){return k.match(rO)||[]}var LO=function k(V){V=V==null?_t:Hi.defaults(_t.Object(),V,Hi.pick(_t,oO));var L=V.Array,ee=V.Date,ye=V.Error,Ve=V.Function,xt=V.Math,ze=V.Object,ex=V.RegExp,UO=V.String,Zr=V.TypeError,$p=L.prototype,VO=Ve.prototype,Ps=ze.prototype,jp=V["__core-js_shared__"],qp=VO.toString,je=Ps.hasOwnProperty,BO=0,jw=function(){var s=/[^.]+$/.exec(jp&&jp.keys&&jp.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),zp=Ps.toString,HO=qp.call(ze),WO=_t._,$O=ex("^"+qp.call(je).replace(Ny,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Gp=kw?V.Buffer:t,Wi=V.Symbol,Kp=V.Uint8Array,qw=Gp?Gp.allocUnsafe:t,Qp=Ww(ze.getPrototypeOf,ze),zw=ze.create,Gw=Ps.propertyIsEnumerable,Zp=$p.splice,Kw=Wi?Wi.isConcatSpreadable:t,Sc=Wi?Wi.iterator:t,Ao=Wi?Wi.toStringTag:t,Yp=function(){try{var s=Oo(ze,"defineProperty");return s({},"",{}),s}catch{}}(),jO=V.clearTimeout!==_t.clearTimeout&&V.clearTimeout,qO=ee&&ee.now!==_t.Date.now&&ee.now,zO=V.setTimeout!==_t.setTimeout&&V.setTimeout,Xp=xt.ceil,Jp=xt.floor,tx=ze.getOwnPropertySymbols,GO=Gp?Gp.isBuffer:t,Qw=V.isFinite,KO=$p.join,QO=Ww(ze.keys,ze),Tt=xt.max,Vt=xt.min,ZO=ee.now,YO=V.parseInt,Zw=xt.random,XO=$p.reverse,rx=Oo(V,"DataView"),vc=Oo(V,"Map"),nx=Oo(V,"Promise"),Ms=Oo(V,"Set"),bc=Oo(V,"WeakMap"),wc=Oo(ze,"create"),eu=bc&&new bc,As={},JO=No(rx),eN=No(vc),tN=No(nx),rN=No(Ms),nN=No(bc),tu=Wi?Wi.prototype:t,_c=tu?tu.valueOf:t,Yw=tu?tu.toString:t;function T(s){if(st(s)&&!xe(s)&&!(s instanceof Ae)){if(s instanceof Yr)return s;if(je.call(s,"__wrapped__"))return X_(s)}return new Yr(s)}var Ds=function(){function s(){}return function(c){if(!nt(c))return{};if(zw)return zw(c);s.prototype=c;var f=new s;return s.prototype=t,f}}();function ru(){}function Yr(s,c){this.__wrapped__=s,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=t}T.templateSettings={escape:yC,evaluate:xC,interpolate:sw,variable:"",imports:{_:T}},T.prototype=ru.prototype,T.prototype.constructor=T,Yr.prototype=Ds(ru.prototype),Yr.prototype.constructor=Yr;function Ae(s){this.__wrapped__=s,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=re,this.__views__=[]}function iN(){var s=new Ae(this.__wrapped__);return s.__actions__=lr(this.__actions__),s.__dir__=this.__dir__,s.__filtered__=this.__filtered__,s.__iteratees__=lr(this.__iteratees__),s.__takeCount__=this.__takeCount__,s.__views__=lr(this.__views__),s}function oN(){if(this.__filtered__){var s=new Ae(this);s.__dir__=-1,s.__filtered__=!0}else s=this.clone(),s.__dir__*=-1;return s}function sN(){var s=this.__wrapped__.value(),c=this.__dir__,f=xe(s),m=c<0,y=f?s.length:0,S=xL(0,y,this.__views__),E=S.start,R=S.end,A=R-E,B=m?R:E-1,H=this.__iteratees__,j=H.length,Y=0,ie=Vt(A,this.__takeCount__);if(!f||!m&&y==A&&ie==A)return v_(s,this.__actions__);var pe=[];e:for(;A--&&Y<ie;){B+=c;for(var Ee=-1,ue=s[B];++Ee<j;){var Pe=H[Ee],Ie=Pe.iteratee,Ir=Pe.type,Yt=Ie(ue);if(Ir==$)ue=Yt;else if(!Yt){if(Ir==I)continue e;break e}}pe[Y++]=ue}return pe}Ae.prototype=Ds(ru.prototype),Ae.prototype.constructor=Ae;function Do(s){var c=-1,f=s==null?0:s.length;for(this.clear();++c<f;){var m=s[c];this.set(m[0],m[1])}}function aN(){this.__data__=wc?wc(null):{},this.size=0}function cN(s){var c=this.has(s)&&delete this.__data__[s];return this.size-=c?1:0,c}function lN(s){var c=this.__data__;if(wc){var f=c[s];return f===a?t:f}return je.call(c,s)?c[s]:t}function pN(s){var c=this.__data__;return wc?c[s]!==t:je.call(c,s)}function uN(s,c){var f=this.__data__;return this.size+=this.has(s)?0:1,f[s]=wc&&c===t?a:c,this}Do.prototype.clear=aN,Do.prototype.delete=cN,Do.prototype.get=lN,Do.prototype.has=pN,Do.prototype.set=uN;function li(s){var c=-1,f=s==null?0:s.length;for(this.clear();++c<f;){var m=s[c];this.set(m[0],m[1])}}function fN(){this.__data__=[],this.size=0}function dN(s){var c=this.__data__,f=nu(c,s);if(f<0)return!1;var m=c.length-1;return f==m?c.pop():Zp.call(c,f,1),--this.size,!0}function mN(s){var c=this.__data__,f=nu(c,s);return f<0?t:c[f][1]}function hN(s){return nu(this.__data__,s)>-1}function gN(s,c){var f=this.__data__,m=nu(f,s);return m<0?(++this.size,f.push([s,c])):f[m][1]=c,this}li.prototype.clear=fN,li.prototype.delete=dN,li.prototype.get=mN,li.prototype.has=hN,li.prototype.set=gN;function pi(s){var c=-1,f=s==null?0:s.length;for(this.clear();++c<f;){var m=s[c];this.set(m[0],m[1])}}function yN(){this.size=0,this.__data__={hash:new Do,map:new(vc||li),string:new Do}}function xN(s){var c=hu(this,s).delete(s);return this.size-=c?1:0,c}function TN(s){return hu(this,s).get(s)}function SN(s){return hu(this,s).has(s)}function vN(s,c){var f=hu(this,s),m=f.size;return f.set(s,c),this.size+=f.size==m?0:1,this}pi.prototype.clear=yN,pi.prototype.delete=xN,pi.prototype.get=TN,pi.prototype.has=SN,pi.prototype.set=vN;function Io(s){var c=-1,f=s==null?0:s.length;for(this.__data__=new pi;++c<f;)this.add(s[c])}function bN(s){return this.__data__.set(s,a),this}function wN(s){return this.__data__.has(s)}Io.prototype.add=Io.prototype.push=bN,Io.prototype.has=wN;function _n(s){var c=this.__data__=new li(s);this.size=c.size}function _N(){this.__data__=new li,this.size=0}function EN(s){var c=this.__data__,f=c.delete(s);return this.size=c.size,f}function RN(s){return this.__data__.get(s)}function kN(s){return this.__data__.has(s)}function PN(s,c){var f=this.__data__;if(f instanceof li){var m=f.__data__;if(!vc||m.length<r-1)return m.push([s,c]),this.size=++f.size,this;f=this.__data__=new pi(m)}return f.set(s,c),this.size=f.size,this}_n.prototype.clear=_N,_n.prototype.delete=EN,_n.prototype.get=RN,_n.prototype.has=kN,_n.prototype.set=PN;function Xw(s,c){var f=xe(s),m=!f&&Lo(s),y=!f&&!m&&Gi(s),S=!f&&!m&&!y&&Os(s),E=f||m||y||S,R=E?Yy(s.length,UO):[],A=R.length;for(var B in s)(c||je.call(s,B))&&!(E&&(B=="length"||y&&(B=="offset"||B=="parent")||S&&(B=="buffer"||B=="byteLength"||B=="byteOffset")||mi(B,A)))&&R.push(B);return R}function Jw(s){var c=s.length;return c?s[mx(0,c-1)]:t}function MN(s,c){return gu(lr(s),Fo(c,0,s.length))}function AN(s){return gu(lr(s))}function ix(s,c,f){(f!==t&&!En(s[c],f)||f===t&&!(c in s))&&ui(s,c,f)}function Ec(s,c,f){var m=s[c];(!(je.call(s,c)&&En(m,f))||f===t&&!(c in s))&&ui(s,c,f)}function nu(s,c){for(var f=s.length;f--;)if(En(s[f][0],c))return f;return-1}function DN(s,c,f,m){return $i(s,function(y,S,E){c(m,y,f(y),E)}),m}function e_(s,c){return s&&Hn(c,Et(c),s)}function IN(s,c){return s&&Hn(c,ur(c),s)}function ui(s,c,f){c=="__proto__"&&Yp?Yp(s,c,{configurable:!0,enumerable:!0,value:f,writable:!0}):s[c]=f}function ox(s,c){for(var f=-1,m=c.length,y=L(m),S=s==null;++f<m;)y[f]=S?t:Vx(s,c[f]);return y}function Fo(s,c,f){return s===s&&(f!==t&&(s=s<=f?s:f),c!==t&&(s=s>=c?s:c)),s}function Xr(s,c,f,m,y,S){var E,R=c&u,A=c&d,B=c&h;if(f&&(E=y?f(s,m,y,S):f(s)),E!==t)return E;if(!nt(s))return s;var H=xe(s);if(H){if(E=SL(s),!R)return lr(s,E)}else{var j=Bt(s),Y=j==bs||j==rw;if(Gi(s))return __(s,R);if(j==ci||j==cr||Y&&!y){if(E=A||Y?{}:$_(s),!R)return A?lL(s,IN(E,s)):cL(s,e_(E,s))}else{if(!Qe[j])return y?s:{};E=vL(s,j,R)}}S||(S=new _n);var ie=S.get(s);if(ie)return ie;S.set(s,E),x0(s)?s.forEach(function(ue){E.add(Xr(ue,c,f,ue,s,S))}):g0(s)&&s.forEach(function(ue,Pe){E.set(Pe,Xr(ue,c,f,Pe,s,S))});var pe=B?A?Ex:_x:A?ur:Et,Ee=H?t:pe(s);return Qr(Ee||s,function(ue,Pe){Ee&&(Pe=ue,ue=s[Pe]),Ec(E,Pe,Xr(ue,c,f,Pe,s,S))}),E}function FN(s){var c=Et(s);return function(f){return t_(f,s,c)}}function t_(s,c,f){var m=f.length;if(s==null)return!m;for(s=ze(s);m--;){var y=f[m],S=c[y],E=s[y];if(E===t&&!(y in s)||!S(E))return!1}return!0}function r_(s,c,f){if(typeof s!="function")throw new Zr(i);return Ic(function(){s.apply(t,f)},c)}function Rc(s,c,f,m){var y=-1,S=Bp,E=!0,R=s.length,A=[],B=c.length;if(!R)return A;f&&(c=et(c,Mr(f))),m?(S=qy,E=!1):c.length>=r&&(S=Tc,E=!1,c=new Io(c));e:for(;++y<R;){var H=s[y],j=f==null?H:f(H);if(H=m||H!==0?H:0,E&&j===j){for(var Y=B;Y--;)if(c[Y]===j)continue e;A.push(H)}else S(c,j,m)||A.push(H)}return A}var $i=M_(Bn),n_=M_(ax,!0);function CN(s,c){var f=!0;return $i(s,function(m,y,S){return f=!!c(m,y,S),f}),f}function iu(s,c,f){for(var m=-1,y=s.length;++m<y;){var S=s[m],E=c(S);if(E!=null&&(R===t?E===E&&!Dr(E):f(E,R)))var R=E,A=S}return A}function ON(s,c,f,m){var y=s.length;for(f=be(f),f<0&&(f=-f>y?0:y+f),m=m===t||m>y?y:be(m),m<0&&(m+=y),m=f>m?0:S0(m);f<m;)s[f++]=c;return s}function i_(s,c){var f=[];return $i(s,function(m,y,S){c(m,y,S)&&f.push(m)}),f}function Ft(s,c,f,m,y){var S=-1,E=s.length;for(f||(f=wL),y||(y=[]);++S<E;){var R=s[S];c>0&&f(R)?c>1?Ft(R,c-1,f,m,y):Vi(y,R):m||(y[y.length]=R)}return y}var sx=A_(),o_=A_(!0);function Bn(s,c){return s&&sx(s,c,Et)}function ax(s,c){return s&&o_(s,c,Et)}function ou(s,c){return Ui(c,function(f){return hi(s[f])})}function Co(s,c){c=qi(c,s);for(var f=0,m=c.length;s!=null&&f<m;)s=s[Wn(c[f++])];return f&&f==m?s:t}function s_(s,c,f){var m=c(s);return xe(s)?m:Vi(m,f(s))}function Qt(s){return s==null?s===t?pC:cC:Ao&&Ao in ze(s)?yL(s):AL(s)}function cx(s,c){return s>c}function NN(s,c){return s!=null&&je.call(s,c)}function LN(s,c){return s!=null&&c in ze(s)}function UN(s,c,f){return s>=Vt(c,f)&&s<Tt(c,f)}function lx(s,c,f){for(var m=f?qy:Bp,y=s[0].length,S=s.length,E=S,R=L(S),A=1/0,B=[];E--;){var H=s[E];E&&c&&(H=et(H,Mr(c))),A=Vt(H.length,A),R[E]=!f&&(c||y>=120&&H.length>=120)?new Io(E&&H):t}H=s[0];var j=-1,Y=R[0];e:for(;++j<y&&B.length<A;){var ie=H[j],pe=c?c(ie):ie;if(ie=f||ie!==0?ie:0,!(Y?Tc(Y,pe):m(B,pe,f))){for(E=S;--E;){var Ee=R[E];if(!(Ee?Tc(Ee,pe):m(s[E],pe,f)))continue e}Y&&Y.push(pe),B.push(ie)}}return B}function VN(s,c,f,m){return Bn(s,function(y,S,E){c(m,f(y),S,E)}),m}function kc(s,c,f){c=qi(c,s),s=G_(s,c);var m=s==null?s:s[Wn(en(c))];return m==null?t:Pr(m,s,f)}function a_(s){return st(s)&&Qt(s)==cr}function BN(s){return st(s)&&Qt(s)==xc}function HN(s){return st(s)&&Qt(s)==Gr}function Pc(s,c,f,m,y){return s===c?!0:s==null||c==null||!st(s)&&!st(c)?s!==s&&c!==c:WN(s,c,f,m,Pc,y)}function WN(s,c,f,m,y,S){var E=xe(s),R=xe(c),A=E?Tn:Bt(s),B=R?Tn:Bt(c);A=A==cr?ci:A,B=B==cr?ci:B;var H=A==ci,j=B==ci,Y=A==B;if(Y&&Gi(s)){if(!Gi(c))return!1;E=!0,H=!1}if(Y&&!H)return S||(S=new _n),E||Os(s)?B_(s,c,f,m,y,S):hL(s,c,A,f,m,y,S);if(!(f&g)){var ie=H&&je.call(s,"__wrapped__"),pe=j&&je.call(c,"__wrapped__");if(ie||pe){var Ee=ie?s.value():s,ue=pe?c.value():c;return S||(S=new _n),y(Ee,ue,f,m,S)}}return Y?(S||(S=new _n),gL(s,c,f,m,y,S)):!1}function $N(s){return st(s)&&Bt(s)==vn}function px(s,c,f,m){var y=f.length,S=y,E=!m;if(s==null)return!S;for(s=ze(s);y--;){var R=f[y];if(E&&R[2]?R[1]!==s[R[0]]:!(R[0]in s))return!1}for(;++y<S;){R=f[y];var A=R[0],B=s[A],H=R[1];if(E&&R[2]){if(B===t&&!(A in s))return!1}else{var j=new _n;if(m)var Y=m(B,H,A,s,c,j);if(!(Y===t?Pc(H,B,g|x,m,j):Y))return!1}}return!0}function c_(s){if(!nt(s)||EL(s))return!1;var c=hi(s)?$O:FC;return c.test(No(s))}function jN(s){return st(s)&&Qt(s)==hc}function qN(s){return st(s)&&Bt(s)==bn}function zN(s){return st(s)&&bu(s.length)&&!!Ye[Qt(s)]}function l_(s){return typeof s=="function"?s:s==null?fr:typeof s=="object"?xe(s)?f_(s[0],s[1]):u_(s):D0(s)}function ux(s){if(!Dc(s))return QO(s);var c=[];for(var f in ze(s))je.call(s,f)&&f!="constructor"&&c.push(f);return c}function GN(s){if(!nt(s))return ML(s);var c=Dc(s),f=[];for(var m in s)m=="constructor"&&(c||!je.call(s,m))||f.push(m);return f}function fx(s,c){return s<c}function p_(s,c){var f=-1,m=pr(s)?L(s.length):[];return $i(s,function(y,S,E){m[++f]=c(y,S,E)}),m}function u_(s){var c=kx(s);return c.length==1&&c[0][2]?q_(c[0][0],c[0][1]):function(f){return f===s||px(f,s,c)}}function f_(s,c){return Mx(s)&&j_(c)?q_(Wn(s),c):function(f){var m=Vx(f,s);return m===t&&m===c?Bx(f,s):Pc(c,m,g|x)}}function su(s,c,f,m,y){s!==c&&sx(c,function(S,E){if(y||(y=new _n),nt(S))KN(s,c,E,f,su,m,y);else{var R=m?m(Dx(s,E),S,E+"",s,c,y):t;R===t&&(R=S),ix(s,E,R)}},ur)}function KN(s,c,f,m,y,S,E){var R=Dx(s,f),A=Dx(c,f),B=E.get(A);if(B){ix(s,f,B);return}var H=S?S(R,A,f+"",s,c,E):t,j=H===t;if(j){var Y=xe(A),ie=!Y&&Gi(A),pe=!Y&&!ie&&Os(A);H=A,Y||ie||pe?xe(R)?H=R:ct(R)?H=lr(R):ie?(j=!1,H=__(A,!0)):pe?(j=!1,H=E_(A,!0)):H=[]:Fc(A)||Lo(A)?(H=R,Lo(R)?H=v0(R):(!nt(R)||hi(R))&&(H=$_(A))):j=!1}j&&(E.set(A,H),y(H,A,m,S,E),E.delete(A)),ix(s,f,H)}function d_(s,c){var f=s.length;if(f)return c+=c<0?f:0,mi(c,f)?s[c]:t}function m_(s,c,f){c.length?c=et(c,function(S){return xe(S)?function(E){return Co(E,S.length===1?S[0]:S)}:S}):c=[fr];var m=-1;c=et(c,Mr(le()));var y=p_(s,function(S,E,R){var A=et(c,function(B){return B(S)});return{criteria:A,index:++m,value:S}});return vO(y,function(S,E){return aL(S,E,f)})}function QN(s,c){return h_(s,c,function(f,m){return Bx(s,m)})}function h_(s,c,f){for(var m=-1,y=c.length,S={};++m<y;){var E=c[m],R=Co(s,E);f(R,E)&&Mc(S,qi(E,s),R)}return S}function ZN(s){return function(c){return Co(c,s)}}function dx(s,c,f,m){var y=m?SO:Es,S=-1,E=c.length,R=s;for(s===c&&(c=lr(c)),f&&(R=et(s,Mr(f)));++S<E;)for(var A=0,B=c[S],H=f?f(B):B;(A=y(R,H,A,m))>-1;)R!==s&&Zp.call(R,A,1),Zp.call(s,A,1);return s}function g_(s,c){for(var f=s?c.length:0,m=f-1;f--;){var y=c[f];if(f==m||y!==S){var S=y;mi(y)?Zp.call(s,y,1):yx(s,y)}}return s}function mx(s,c){return s+Jp(Zw()*(c-s+1))}function YN(s,c,f,m){for(var y=-1,S=Tt(Xp((c-s)/(f||1)),0),E=L(S);S--;)E[m?S:++y]=s,s+=f;return E}function hx(s,c){var f="";if(!s||c<1||c>Q)return f;do c%2&&(f+=s),c=Jp(c/2),c&&(s+=s);while(c);return f}function ke(s,c){return Ix(z_(s,c,fr),s+"")}function XN(s){return Jw(Ns(s))}function JN(s,c){var f=Ns(s);return gu(f,Fo(c,0,f.length))}function Mc(s,c,f,m){if(!nt(s))return s;c=qi(c,s);for(var y=-1,S=c.length,E=S-1,R=s;R!=null&&++y<S;){var A=Wn(c[y]),B=f;if(A==="__proto__"||A==="constructor"||A==="prototype")return s;if(y!=E){var H=R[A];B=m?m(H,A,R):t,B===t&&(B=nt(H)?H:mi(c[y+1])?[]:{})}Ec(R,A,B),R=R[A]}return s}var y_=eu?function(s,c){return eu.set(s,c),s}:fr,eL=Yp?function(s,c){return Yp(s,"toString",{configurable:!0,enumerable:!1,value:Wx(c),writable:!0})}:fr;function tL(s){return gu(Ns(s))}function Jr(s,c,f){var m=-1,y=s.length;c<0&&(c=-c>y?0:y+c),f=f>y?y:f,f<0&&(f+=y),y=c>f?0:f-c>>>0,c>>>=0;for(var S=L(y);++m<y;)S[m]=s[m+c];return S}function rL(s,c){var f;return $i(s,function(m,y,S){return f=c(m,y,S),!f}),!!f}function au(s,c,f){var m=0,y=s==null?m:s.length;if(typeof c=="number"&&c===c&&y<=ar){for(;m<y;){var S=m+y>>>1,E=s[S];E!==null&&!Dr(E)&&(f?E<=c:E<c)?m=S+1:y=S}return y}return gx(s,c,fr,f)}function gx(s,c,f,m){var y=0,S=s==null?0:s.length;if(S===0)return 0;c=f(c);for(var E=c!==c,R=c===null,A=Dr(c),B=c===t;y<S;){var H=Jp((y+S)/2),j=f(s[H]),Y=j!==t,ie=j===null,pe=j===j,Ee=Dr(j);if(E)var ue=m||pe;else B?ue=pe&&(m||Y):R?ue=pe&&Y&&(m||!ie):A?ue=pe&&Y&&!ie&&(m||!Ee):ie||Ee?ue=!1:ue=m?j<=c:j<c;ue?y=H+1:S=H}return Vt(S,Re)}function x_(s,c){for(var f=-1,m=s.length,y=0,S=[];++f<m;){var E=s[f],R=c?c(E):E;if(!f||!En(R,A)){var A=R;S[y++]=E===0?0:E}}return S}function T_(s){return typeof s=="number"?s:Dr(s)?me:+s}function Ar(s){if(typeof s=="string")return s;if(xe(s))return et(s,Ar)+"";if(Dr(s))return Yw?Yw.call(s):"";var c=s+"";return c=="0"&&1/s==-K?"-0":c}function ji(s,c,f){var m=-1,y=Bp,S=s.length,E=!0,R=[],A=R;if(f)E=!1,y=qy;else if(S>=r){var B=c?null:dL(s);if(B)return Wp(B);E=!1,y=Tc,A=new Io}else A=c?[]:R;e:for(;++m<S;){var H=s[m],j=c?c(H):H;if(H=f||H!==0?H:0,E&&j===j){for(var Y=A.length;Y--;)if(A[Y]===j)continue e;c&&A.push(j),R.push(H)}else y(A,j,f)||(A!==R&&A.push(j),R.push(H))}return R}function yx(s,c){return c=qi(c,s),s=G_(s,c),s==null||delete s[Wn(en(c))]}function S_(s,c,f,m){return Mc(s,c,f(Co(s,c)),m)}function cu(s,c,f,m){for(var y=s.length,S=m?y:-1;(m?S--:++S<y)&&c(s[S],S,s););return f?Jr(s,m?0:S,m?S+1:y):Jr(s,m?S+1:0,m?y:S)}function v_(s,c){var f=s;return f instanceof Ae&&(f=f.value()),zy(c,function(m,y){return y.func.apply(y.thisArg,Vi([m],y.args))},f)}function xx(s,c,f){var m=s.length;if(m<2)return m?ji(s[0]):[];for(var y=-1,S=L(m);++y<m;)for(var E=s[y],R=-1;++R<m;)R!=y&&(S[y]=Rc(S[y]||E,s[R],c,f));return ji(Ft(S,1),c,f)}function b_(s,c,f){for(var m=-1,y=s.length,S=c.length,E={};++m<y;){var R=m<S?c[m]:t;f(E,s[m],R)}return E}function Tx(s){return ct(s)?s:[]}function Sx(s){return typeof s=="function"?s:fr}function qi(s,c){return xe(s)?s:Mx(s,c)?[s]:Y_(We(s))}var nL=ke;function zi(s,c,f){var m=s.length;return f=f===t?m:f,!c&&f>=m?s:Jr(s,c,f)}var w_=jO||function(s){return _t.clearTimeout(s)};function __(s,c){if(c)return s.slice();var f=s.length,m=qw?qw(f):new s.constructor(f);return s.copy(m),m}function vx(s){var c=new s.constructor(s.byteLength);return new Kp(c).set(new Kp(s)),c}function iL(s,c){var f=c?vx(s.buffer):s.buffer;return new s.constructor(f,s.byteOffset,s.byteLength)}function oL(s){var c=new s.constructor(s.source,aw.exec(s));return c.lastIndex=s.lastIndex,c}function sL(s){return _c?ze(_c.call(s)):{}}function E_(s,c){var f=c?vx(s.buffer):s.buffer;return new s.constructor(f,s.byteOffset,s.length)}function R_(s,c){if(s!==c){var f=s!==t,m=s===null,y=s===s,S=Dr(s),E=c!==t,R=c===null,A=c===c,B=Dr(c);if(!R&&!B&&!S&&s>c||S&&E&&A&&!R&&!B||m&&E&&A||!f&&A||!y)return 1;if(!m&&!S&&!B&&s<c||B&&f&&y&&!m&&!S||R&&f&&y||!E&&y||!A)return-1}return 0}function aL(s,c,f){for(var m=-1,y=s.criteria,S=c.criteria,E=y.length,R=f.length;++m<E;){var A=R_(y[m],S[m]);if(A){if(m>=R)return A;var B=f[m];return A*(B=="desc"?-1:1)}}return s.index-c.index}function k_(s,c,f,m){for(var y=-1,S=s.length,E=f.length,R=-1,A=c.length,B=Tt(S-E,0),H=L(A+B),j=!m;++R<A;)H[R]=c[R];for(;++y<E;)(j||y<S)&&(H[f[y]]=s[y]);for(;B--;)H[R++]=s[y++];return H}function P_(s,c,f,m){for(var y=-1,S=s.length,E=-1,R=f.length,A=-1,B=c.length,H=Tt(S-R,0),j=L(H+B),Y=!m;++y<H;)j[y]=s[y];for(var ie=y;++A<B;)j[ie+A]=c[A];for(;++E<R;)(Y||y<S)&&(j[ie+f[E]]=s[y++]);return j}function lr(s,c){var f=-1,m=s.length;for(c||(c=L(m));++f<m;)c[f]=s[f];return c}function Hn(s,c,f,m){var y=!f;f||(f={});for(var S=-1,E=c.length;++S<E;){var R=c[S],A=m?m(f[R],s[R],R,f,s):t;A===t&&(A=s[R]),y?ui(f,R,A):Ec(f,R,A)}return f}function cL(s,c){return Hn(s,Px(s),c)}function lL(s,c){return Hn(s,H_(s),c)}function lu(s,c){return function(f,m){var y=xe(f)?mO:DN,S=c?c():{};return y(f,s,le(m,2),S)}}function Is(s){return ke(function(c,f){var m=-1,y=f.length,S=y>1?f[y-1]:t,E=y>2?f[2]:t;for(S=s.length>3&&typeof S=="function"?(y--,S):t,E&&Zt(f[0],f[1],E)&&(S=y<3?t:S,y=1),c=ze(c);++m<y;){var R=f[m];R&&s(c,R,m,S)}return c})}function M_(s,c){return function(f,m){if(f==null)return f;if(!pr(f))return s(f,m);for(var y=f.length,S=c?y:-1,E=ze(f);(c?S--:++S<y)&&m(E[S],S,E)!==!1;);return f}}function A_(s){return function(c,f,m){for(var y=-1,S=ze(c),E=m(c),R=E.length;R--;){var A=E[s?R:++y];if(f(S[A],A,S)===!1)break}return c}}function pL(s,c,f){var m=c&_,y=Ac(s);function S(){var E=this&&this!==_t&&this instanceof S?y:s;return E.apply(m?f:this,arguments)}return S}function D_(s){return function(c){c=We(c);var f=Rs(c)?wn(c):t,m=f?f[0]:c.charAt(0),y=f?zi(f,1).join(""):c.slice(1);return m[s]()+y}}function Fs(s){return function(c){return zy(M0(P0(c).replace(eO,"")),s,"")}}function Ac(s){return function(){var c=arguments;switch(c.length){case 0:return new s;case 1:return new s(c[0]);case 2:return new s(c[0],c[1]);case 3:return new s(c[0],c[1],c[2]);case 4:return new s(c[0],c[1],c[2],c[3]);case 5:return new s(c[0],c[1],c[2],c[3],c[4]);case 6:return new s(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new s(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var f=Ds(s.prototype),m=s.apply(f,c);return nt(m)?m:f}}function uL(s,c,f){var m=Ac(s);function y(){for(var S=arguments.length,E=L(S),R=S,A=Cs(y);R--;)E[R]=arguments[R];var B=S<3&&E[0]!==A&&E[S-1]!==A?[]:Bi(E,A);if(S-=B.length,S<f)return N_(s,c,pu,y.placeholder,t,E,B,t,t,f-S);var H=this&&this!==_t&&this instanceof y?m:s;return Pr(H,this,E)}return y}function I_(s){return function(c,f,m){var y=ze(c);if(!pr(c)){var S=le(f,3);c=Et(c),f=function(R){return S(y[R],R,y)}}var E=s(c,f,m);return E>-1?y[S?c[E]:E]:t}}function F_(s){return di(function(c){var f=c.length,m=f,y=Yr.prototype.thru;for(s&&c.reverse();m--;){var S=c[m];if(typeof S!="function")throw new Zr(i);if(y&&!E&&mu(S)=="wrapper")var E=new Yr([],!0)}for(m=E?m:f;++m<f;){S=c[m];var R=mu(S),A=R=="wrapper"?Rx(S):t;A&&Ax(A[0])&&A[1]==(ge|M|Z|de)&&!A[4].length&&A[9]==1?E=E[mu(A[0])].apply(E,A[3]):E=S.length==1&&Ax(S)?E[R]():E.thru(S)}return function(){var B=arguments,H=B[0];if(E&&B.length==1&&xe(H))return E.plant(H).value();for(var j=0,Y=f?c[j].apply(this,B):H;++j<f;)Y=c[j].call(this,Y);return Y}})}function pu(s,c,f,m,y,S,E,R,A,B){var H=c&ge,j=c&_,Y=c&w,ie=c&(M|U),pe=c&mt,Ee=Y?t:Ac(s);function ue(){for(var Pe=arguments.length,Ie=L(Pe),Ir=Pe;Ir--;)Ie[Ir]=arguments[Ir];if(ie)var Yt=Cs(ue),Fr=wO(Ie,Yt);if(m&&(Ie=k_(Ie,m,y,ie)),S&&(Ie=P_(Ie,S,E,ie)),Pe-=Fr,ie&&Pe<B){var lt=Bi(Ie,Yt);return N_(s,c,pu,ue.placeholder,f,Ie,lt,R,A,B-Pe)}var Rn=j?f:this,yi=Y?Rn[s]:s;return Pe=Ie.length,R?Ie=DL(Ie,R):pe&&Pe>1&&Ie.reverse(),H&&A<Pe&&(Ie.length=A),this&&this!==_t&&this instanceof ue&&(yi=Ee||Ac(yi)),yi.apply(Rn,Ie)}return ue}function C_(s,c){return function(f,m){return VN(f,s,c(m),{})}}function uu(s,c){return function(f,m){var y;if(f===t&&m===t)return c;if(f!==t&&(y=f),m!==t){if(y===t)return m;typeof f=="string"||typeof m=="string"?(f=Ar(f),m=Ar(m)):(f=T_(f),m=T_(m)),y=s(f,m)}return y}}function bx(s){return di(function(c){return c=et(c,Mr(le())),ke(function(f){var m=this;return s(c,function(y){return Pr(y,m,f)})})})}function fu(s,c){c=c===t?" ":Ar(c);var f=c.length;if(f<2)return f?hx(c,s):c;var m=hx(c,Xp(s/ks(c)));return Rs(c)?zi(wn(m),0,s).join(""):m.slice(0,s)}function fL(s,c,f,m){var y=c&_,S=Ac(s);function E(){for(var R=-1,A=arguments.length,B=-1,H=m.length,j=L(H+A),Y=this&&this!==_t&&this instanceof E?S:s;++B<H;)j[B]=m[B];for(;A--;)j[B++]=arguments[++R];return Pr(Y,y?f:this,j)}return E}function O_(s){return function(c,f,m){return m&&typeof m!="number"&&Zt(c,f,m)&&(f=m=t),c=gi(c),f===t?(f=c,c=0):f=gi(f),m=m===t?c<f?1:-1:gi(m),YN(c,f,m,s)}}function du(s){return function(c,f){return typeof c=="string"&&typeof f=="string"||(c=tn(c),f=tn(f)),s(c,f)}}function N_(s,c,f,m,y,S,E,R,A,B){var H=c&M,j=H?E:t,Y=H?t:E,ie=H?S:t,pe=H?t:S;c|=H?Z:ne,c&=~(H?ne:Z),c&C||(c&=~(_|w));var Ee=[s,c,y,ie,j,pe,Y,R,A,B],ue=f.apply(t,Ee);return Ax(s)&&K_(ue,Ee),ue.placeholder=m,Q_(ue,s,c)}function wx(s){var c=xt[s];return function(f,m){if(f=tn(f),m=m==null?0:Vt(be(m),292),m&&Qw(f)){var y=(We(f)+"e").split("e"),S=c(y[0]+"e"+(+y[1]+m));return y=(We(S)+"e").split("e"),+(y[0]+"e"+(+y[1]-m))}return c(f)}}var dL=Ms&&1/Wp(new Ms([,-0]))[1]==K?function(s){return new Ms(s)}:qx;function L_(s){return function(c){var f=Bt(c);return f==vn?Jy(c):f==bn?AO(c):bO(c,s(c))}}function fi(s,c,f,m,y,S,E,R){var A=c&w;if(!A&&typeof s!="function")throw new Zr(i);var B=m?m.length:0;if(B||(c&=~(Z|ne),m=y=t),E=E===t?E:Tt(be(E),0),R=R===t?R:be(R),B-=y?y.length:0,c&ne){var H=m,j=y;m=y=t}var Y=A?t:Rx(s),ie=[s,c,f,m,y,H,j,S,E,R];if(Y&&PL(ie,Y),s=ie[0],c=ie[1],f=ie[2],m=ie[3],y=ie[4],R=ie[9]=ie[9]===t?A?0:s.length:Tt(ie[9]-B,0),!R&&c&(M|U)&&(c&=~(M|U)),!c||c==_)var pe=pL(s,c,f);else c==M||c==U?pe=uL(s,c,R):(c==Z||c==(_|Z))&&!y.length?pe=fL(s,c,f,m):pe=pu.apply(t,ie);var Ee=Y?y_:K_;return Q_(Ee(pe,ie),s,c)}function U_(s,c,f,m){return s===t||En(s,Ps[f])&&!je.call(m,f)?c:s}function V_(s,c,f,m,y,S){return nt(s)&&nt(c)&&(S.set(c,s),su(s,c,t,V_,S),S.delete(c)),s}function mL(s){return Fc(s)?t:s}function B_(s,c,f,m,y,S){var E=f&g,R=s.length,A=c.length;if(R!=A&&!(E&&A>R))return!1;var B=S.get(s),H=S.get(c);if(B&&H)return B==c&&H==s;var j=-1,Y=!0,ie=f&x?new Io:t;for(S.set(s,c),S.set(c,s);++j<R;){var pe=s[j],Ee=c[j];if(m)var ue=E?m(Ee,pe,j,c,s,S):m(pe,Ee,j,s,c,S);if(ue!==t){if(ue)continue;Y=!1;break}if(ie){if(!Gy(c,function(Pe,Ie){if(!Tc(ie,Ie)&&(pe===Pe||y(pe,Pe,f,m,S)))return ie.push(Ie)})){Y=!1;break}}else if(!(pe===Ee||y(pe,Ee,f,m,S))){Y=!1;break}}return S.delete(s),S.delete(c),Y}function hL(s,c,f,m,y,S,E){switch(f){case ws:if(s.byteLength!=c.byteLength||s.byteOffset!=c.byteOffset)return!1;s=s.buffer,c=c.buffer;case xc:return!(s.byteLength!=c.byteLength||!S(new Kp(s),new Kp(c)));case Sn:case Gr:case mc:return En(+s,+c);case ai:return s.name==c.name&&s.message==c.message;case hc:case gc:return s==c+"";case vn:var R=Jy;case bn:var A=m&g;if(R||(R=Wp),s.size!=c.size&&!A)return!1;var B=E.get(s);if(B)return B==c;m|=x,E.set(s,c);var H=B_(R(s),R(c),m,y,S,E);return E.delete(s),H;case Np:if(_c)return _c.call(s)==_c.call(c)}return!1}function gL(s,c,f,m,y,S){var E=f&g,R=_x(s),A=R.length,B=_x(c),H=B.length;if(A!=H&&!E)return!1;for(var j=A;j--;){var Y=R[j];if(!(E?Y in c:je.call(c,Y)))return!1}var ie=S.get(s),pe=S.get(c);if(ie&&pe)return ie==c&&pe==s;var Ee=!0;S.set(s,c),S.set(c,s);for(var ue=E;++j<A;){Y=R[j];var Pe=s[Y],Ie=c[Y];if(m)var Ir=E?m(Ie,Pe,Y,c,s,S):m(Pe,Ie,Y,s,c,S);if(!(Ir===t?Pe===Ie||y(Pe,Ie,f,m,S):Ir)){Ee=!1;break}ue||(ue=Y=="constructor")}if(Ee&&!ue){var Yt=s.constructor,Fr=c.constructor;Yt!=Fr&&"constructor"in s&&"constructor"in c&&!(typeof Yt=="function"&&Yt instanceof Yt&&typeof Fr=="function"&&Fr instanceof Fr)&&(Ee=!1)}return S.delete(s),S.delete(c),Ee}function di(s){return Ix(z_(s,t,t0),s+"")}function _x(s){return s_(s,Et,Px)}function Ex(s){return s_(s,ur,H_)}var Rx=eu?function(s){return eu.get(s)}:qx;function mu(s){for(var c=s.name+"",f=As[c],m=je.call(As,c)?f.length:0;m--;){var y=f[m],S=y.func;if(S==null||S==s)return y.name}return c}function Cs(s){var c=je.call(T,"placeholder")?T:s;return c.placeholder}function le(){var s=T.iteratee||$x;return s=s===$x?l_:s,arguments.length?s(arguments[0],arguments[1]):s}function hu(s,c){var f=s.__data__;return _L(c)?f[typeof c=="string"?"string":"hash"]:f.map}function kx(s){for(var c=Et(s),f=c.length;f--;){var m=c[f],y=s[m];c[f]=[m,y,j_(y)]}return c}function Oo(s,c){var f=kO(s,c);return c_(f)?f:t}function yL(s){var c=je.call(s,Ao),f=s[Ao];try{s[Ao]=t;var m=!0}catch{}var y=zp.call(s);return m&&(c?s[Ao]=f:delete s[Ao]),y}var Px=tx?function(s){return s==null?[]:(s=ze(s),Ui(tx(s),function(c){return Gw.call(s,c)}))}:zx,H_=tx?function(s){for(var c=[];s;)Vi(c,Px(s)),s=Qp(s);return c}:zx,Bt=Qt;(rx&&Bt(new rx(new ArrayBuffer(1)))!=ws||vc&&Bt(new vc)!=vn||nx&&Bt(nx.resolve())!=nw||Ms&&Bt(new Ms)!=bn||bc&&Bt(new bc)!=yc)&&(Bt=function(s){var c=Qt(s),f=c==ci?s.constructor:t,m=f?No(f):"";if(m)switch(m){case JO:return ws;case eN:return vn;case tN:return nw;case rN:return bn;case nN:return yc}return c});function xL(s,c,f){for(var m=-1,y=f.length;++m<y;){var S=f[m],E=S.size;switch(S.type){case"drop":s+=E;break;case"dropRight":c-=E;break;case"take":c=Vt(c,s+E);break;case"takeRight":s=Tt(s,c-E);break}}return{start:s,end:c}}function TL(s){var c=s.match(EC);return c?c[1].split(RC):[]}function W_(s,c,f){c=qi(c,s);for(var m=-1,y=c.length,S=!1;++m<y;){var E=Wn(c[m]);if(!(S=s!=null&&f(s,E)))break;s=s[E]}return S||++m!=y?S:(y=s==null?0:s.length,!!y&&bu(y)&&mi(E,y)&&(xe(s)||Lo(s)))}function SL(s){var c=s.length,f=new s.constructor(c);return c&&typeof s[0]=="string"&&je.call(s,"index")&&(f.index=s.index,f.input=s.input),f}function $_(s){return typeof s.constructor=="function"&&!Dc(s)?Ds(Qp(s)):{}}function vL(s,c,f){var m=s.constructor;switch(c){case xc:return vx(s);case Sn:case Gr:return new m(+s);case ws:return iL(s,f);case ky:case Py:case My:case Ay:case Dy:case Iy:case Fy:case Cy:case Oy:return E_(s,f);case vn:return new m;case mc:case gc:return new m(s);case hc:return oL(s);case bn:return new m;case Np:return sL(s)}}function bL(s,c){var f=c.length;if(!f)return s;var m=f-1;return c[m]=(f>1?"& ":"")+c[m],c=c.join(f>2?", ":" "),s.replace(_C,`{
/* [wrapped with `+c+`] */
`)}function wL(s){return xe(s)||Lo(s)||!!(Kw&&s&&s[Kw])}function mi(s,c){var f=typeof s;return c=c??Q,!!c&&(f=="number"||f!="symbol"&&OC.test(s))&&s>-1&&s%1==0&&s<c}function Zt(s,c,f){if(!nt(f))return!1;var m=typeof c;return(m=="number"?pr(f)&&mi(c,f.length):m=="string"&&c in f)?En(f[c],s):!1}function Mx(s,c){if(xe(s))return!1;var f=typeof s;return f=="number"||f=="symbol"||f=="boolean"||s==null||Dr(s)?!0:SC.test(s)||!TC.test(s)||c!=null&&s in ze(c)}function _L(s){var c=typeof s;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?s!=="__proto__":s===null}function Ax(s){var c=mu(s),f=T[c];if(typeof f!="function"||!(c in Ae.prototype))return!1;if(s===f)return!0;var m=Rx(f);return!!m&&s===m[0]}function EL(s){return!!jw&&jw in s}var RL=jp?hi:Gx;function Dc(s){var c=s&&s.constructor,f=typeof c=="function"&&c.prototype||Ps;return s===f}function j_(s){return s===s&&!nt(s)}function q_(s,c){return function(f){return f==null?!1:f[s]===c&&(c!==t||s in ze(f))}}function kL(s){var c=Su(s,function(m){return f.size===l&&f.clear(),m}),f=c.cache;return c}function PL(s,c){var f=s[1],m=c[1],y=f|m,S=y<(_|w|ge),E=m==ge&&f==M||m==ge&&f==de&&s[7].length<=c[8]||m==(ge|de)&&c[7].length<=c[8]&&f==M;if(!(S||E))return s;m&_&&(s[2]=c[2],y|=f&_?0:C);var R=c[3];if(R){var A=s[3];s[3]=A?k_(A,R,c[4]):R,s[4]=A?Bi(s[3],p):c[4]}return R=c[5],R&&(A=s[5],s[5]=A?P_(A,R,c[6]):R,s[6]=A?Bi(s[5],p):c[6]),R=c[7],R&&(s[7]=R),m&ge&&(s[8]=s[8]==null?c[8]:Vt(s[8],c[8])),s[9]==null&&(s[9]=c[9]),s[0]=c[0],s[1]=y,s}function ML(s){var c=[];if(s!=null)for(var f in ze(s))c.push(f);return c}function AL(s){return zp.call(s)}function z_(s,c,f){return c=Tt(c===t?s.length-1:c,0),function(){for(var m=arguments,y=-1,S=Tt(m.length-c,0),E=L(S);++y<S;)E[y]=m[c+y];y=-1;for(var R=L(c+1);++y<c;)R[y]=m[y];return R[c]=f(E),Pr(s,this,R)}}function G_(s,c){return c.length<2?s:Co(s,Jr(c,0,-1))}function DL(s,c){for(var f=s.length,m=Vt(c.length,f),y=lr(s);m--;){var S=c[m];s[m]=mi(S,f)?y[S]:t}return s}function Dx(s,c){if(!(c==="constructor"&&typeof s[c]=="function")&&c!="__proto__")return s[c]}var K_=Z_(y_),Ic=zO||function(s,c){return _t.setTimeout(s,c)},Ix=Z_(eL);function Q_(s,c,f){var m=c+"";return Ix(s,bL(m,IL(TL(m),f)))}function Z_(s){var c=0,f=0;return function(){var m=ZO(),y=O-(m-f);if(f=m,y>0){if(++c>=N)return arguments[0]}else c=0;return s.apply(t,arguments)}}function gu(s,c){var f=-1,m=s.length,y=m-1;for(c=c===t?m:c;++f<c;){var S=mx(f,y),E=s[S];s[S]=s[f],s[f]=E}return s.length=c,s}var Y_=kL(function(s){var c=[];return s.charCodeAt(0)===46&&c.push(""),s.replace(vC,function(f,m,y,S){c.push(y?S.replace(MC,"$1"):m||f)}),c});function Wn(s){if(typeof s=="string"||Dr(s))return s;var c=s+"";return c=="0"&&1/s==-K?"-0":c}function No(s){if(s!=null){try{return qp.call(s)}catch{}try{return s+""}catch{}}return""}function IL(s,c){return Qr(si,function(f){var m="_."+f[0];c&f[1]&&!Bp(s,m)&&s.push(m)}),s.sort()}function X_(s){if(s instanceof Ae)return s.clone();var c=new Yr(s.__wrapped__,s.__chain__);return c.__actions__=lr(s.__actions__),c.__index__=s.__index__,c.__values__=s.__values__,c}function FL(s,c,f){(f?Zt(s,c,f):c===t)?c=1:c=Tt(be(c),0);var m=s==null?0:s.length;if(!m||c<1)return[];for(var y=0,S=0,E=L(Xp(m/c));y<m;)E[S++]=Jr(s,y,y+=c);return E}function CL(s){for(var c=-1,f=s==null?0:s.length,m=0,y=[];++c<f;){var S=s[c];S&&(y[m++]=S)}return y}function OL(){var s=arguments.length;if(!s)return[];for(var c=L(s-1),f=arguments[0],m=s;m--;)c[m-1]=arguments[m];return Vi(xe(f)?lr(f):[f],Ft(c,1))}var NL=ke(function(s,c){return ct(s)?Rc(s,Ft(c,1,ct,!0)):[]}),LL=ke(function(s,c){var f=en(c);return ct(f)&&(f=t),ct(s)?Rc(s,Ft(c,1,ct,!0),le(f,2)):[]}),UL=ke(function(s,c){var f=en(c);return ct(f)&&(f=t),ct(s)?Rc(s,Ft(c,1,ct,!0),t,f):[]});function VL(s,c,f){var m=s==null?0:s.length;return m?(c=f||c===t?1:be(c),Jr(s,c<0?0:c,m)):[]}function BL(s,c,f){var m=s==null?0:s.length;return m?(c=f||c===t?1:be(c),c=m-c,Jr(s,0,c<0?0:c)):[]}function HL(s,c){return s&&s.length?cu(s,le(c,3),!0,!0):[]}function WL(s,c){return s&&s.length?cu(s,le(c,3),!0):[]}function $L(s,c,f,m){var y=s==null?0:s.length;return y?(f&&typeof f!="number"&&Zt(s,c,f)&&(f=0,m=y),ON(s,c,f,m)):[]}function J_(s,c,f){var m=s==null?0:s.length;if(!m)return-1;var y=f==null?0:be(f);return y<0&&(y=Tt(m+y,0)),Hp(s,le(c,3),y)}function e0(s,c,f){var m=s==null?0:s.length;if(!m)return-1;var y=m-1;return f!==t&&(y=be(f),y=f<0?Tt(m+y,0):Vt(y,m-1)),Hp(s,le(c,3),y,!0)}function t0(s){var c=s==null?0:s.length;return c?Ft(s,1):[]}function jL(s){var c=s==null?0:s.length;return c?Ft(s,K):[]}function qL(s,c){var f=s==null?0:s.length;return f?(c=c===t?1:be(c),Ft(s,c)):[]}function zL(s){for(var c=-1,f=s==null?0:s.length,m={};++c<f;){var y=s[c];m[y[0]]=y[1]}return m}function r0(s){return s&&s.length?s[0]:t}function GL(s,c,f){var m=s==null?0:s.length;if(!m)return-1;var y=f==null?0:be(f);return y<0&&(y=Tt(m+y,0)),Es(s,c,y)}function KL(s){var c=s==null?0:s.length;return c?Jr(s,0,-1):[]}var QL=ke(function(s){var c=et(s,Tx);return c.length&&c[0]===s[0]?lx(c):[]}),ZL=ke(function(s){var c=en(s),f=et(s,Tx);return c===en(f)?c=t:f.pop(),f.length&&f[0]===s[0]?lx(f,le(c,2)):[]}),YL=ke(function(s){var c=en(s),f=et(s,Tx);return c=typeof c=="function"?c:t,c&&f.pop(),f.length&&f[0]===s[0]?lx(f,t,c):[]});function XL(s,c){return s==null?"":KO.call(s,c)}function en(s){var c=s==null?0:s.length;return c?s[c-1]:t}function JL(s,c,f){var m=s==null?0:s.length;if(!m)return-1;var y=m;return f!==t&&(y=be(f),y=y<0?Tt(m+y,0):Vt(y,m-1)),c===c?IO(s,c,y):Hp(s,Nw,y,!0)}function eU(s,c){return s&&s.length?d_(s,be(c)):t}var tU=ke(n0);function n0(s,c){return s&&s.length&&c&&c.length?dx(s,c):s}function rU(s,c,f){return s&&s.length&&c&&c.length?dx(s,c,le(f,2)):s}function nU(s,c,f){return s&&s.length&&c&&c.length?dx(s,c,t,f):s}var iU=di(function(s,c){var f=s==null?0:s.length,m=ox(s,c);return g_(s,et(c,function(y){return mi(y,f)?+y:y}).sort(R_)),m});function oU(s,c){var f=[];if(!(s&&s.length))return f;var m=-1,y=[],S=s.length;for(c=le(c,3);++m<S;){var E=s[m];c(E,m,s)&&(f.push(E),y.push(m))}return g_(s,y),f}function Fx(s){return s==null?s:XO.call(s)}function sU(s,c,f){var m=s==null?0:s.length;return m?(f&&typeof f!="number"&&Zt(s,c,f)?(c=0,f=m):(c=c==null?0:be(c),f=f===t?m:be(f)),Jr(s,c,f)):[]}function aU(s,c){return au(s,c)}function cU(s,c,f){return gx(s,c,le(f,2))}function lU(s,c){var f=s==null?0:s.length;if(f){var m=au(s,c);if(m<f&&En(s[m],c))return m}return-1}function pU(s,c){return au(s,c,!0)}function uU(s,c,f){return gx(s,c,le(f,2),!0)}function fU(s,c){var f=s==null?0:s.length;if(f){var m=au(s,c,!0)-1;if(En(s[m],c))return m}return-1}function dU(s){return s&&s.length?x_(s):[]}function mU(s,c){return s&&s.length?x_(s,le(c,2)):[]}function hU(s){var c=s==null?0:s.length;return c?Jr(s,1,c):[]}function gU(s,c,f){return s&&s.length?(c=f||c===t?1:be(c),Jr(s,0,c<0?0:c)):[]}function yU(s,c,f){var m=s==null?0:s.length;return m?(c=f||c===t?1:be(c),c=m-c,Jr(s,c<0?0:c,m)):[]}function xU(s,c){return s&&s.length?cu(s,le(c,3),!1,!0):[]}function TU(s,c){return s&&s.length?cu(s,le(c,3)):[]}var SU=ke(function(s){return ji(Ft(s,1,ct,!0))}),vU=ke(function(s){var c=en(s);return ct(c)&&(c=t),ji(Ft(s,1,ct,!0),le(c,2))}),bU=ke(function(s){var c=en(s);return c=typeof c=="function"?c:t,ji(Ft(s,1,ct,!0),t,c)});function wU(s){return s&&s.length?ji(s):[]}function _U(s,c){return s&&s.length?ji(s,le(c,2)):[]}function EU(s,c){return c=typeof c=="function"?c:t,s&&s.length?ji(s,t,c):[]}function Cx(s){if(!(s&&s.length))return[];var c=0;return s=Ui(s,function(f){if(ct(f))return c=Tt(f.length,c),!0}),Yy(c,function(f){return et(s,Ky(f))})}function i0(s,c){if(!(s&&s.length))return[];var f=Cx(s);return c==null?f:et(f,function(m){return Pr(c,t,m)})}var RU=ke(function(s,c){return ct(s)?Rc(s,c):[]}),kU=ke(function(s){return xx(Ui(s,ct))}),PU=ke(function(s){var c=en(s);return ct(c)&&(c=t),xx(Ui(s,ct),le(c,2))}),MU=ke(function(s){var c=en(s);return c=typeof c=="function"?c:t,xx(Ui(s,ct),t,c)}),AU=ke(Cx);function DU(s,c){return b_(s||[],c||[],Ec)}function IU(s,c){return b_(s||[],c||[],Mc)}var FU=ke(function(s){var c=s.length,f=c>1?s[c-1]:t;return f=typeof f=="function"?(s.pop(),f):t,i0(s,f)});function o0(s){var c=T(s);return c.__chain__=!0,c}function CU(s,c){return c(s),s}function yu(s,c){return c(s)}var OU=di(function(s){var c=s.length,f=c?s[0]:0,m=this.__wrapped__,y=function(S){return ox(S,s)};return c>1||this.__actions__.length||!(m instanceof Ae)||!mi(f)?this.thru(y):(m=m.slice(f,+f+(c?1:0)),m.__actions__.push({func:yu,args:[y],thisArg:t}),new Yr(m,this.__chain__).thru(function(S){return c&&!S.length&&S.push(t),S}))});function NU(){return o0(this)}function LU(){return new Yr(this.value(),this.__chain__)}function UU(){this.__values__===t&&(this.__values__=T0(this.value()));var s=this.__index__>=this.__values__.length,c=s?t:this.__values__[this.__index__++];return{done:s,value:c}}function VU(){return this}function BU(s){for(var c,f=this;f instanceof ru;){var m=X_(f);m.__index__=0,m.__values__=t,c?y.__wrapped__=m:c=m;var y=m;f=f.__wrapped__}return y.__wrapped__=s,c}function HU(){var s=this.__wrapped__;if(s instanceof Ae){var c=s;return this.__actions__.length&&(c=new Ae(this)),c=c.reverse(),c.__actions__.push({func:yu,args:[Fx],thisArg:t}),new Yr(c,this.__chain__)}return this.thru(Fx)}function WU(){return v_(this.__wrapped__,this.__actions__)}var $U=lu(function(s,c,f){je.call(s,f)?++s[f]:ui(s,f,1)});function jU(s,c,f){var m=xe(s)?Cw:CN;return f&&Zt(s,c,f)&&(c=t),m(s,le(c,3))}function qU(s,c){var f=xe(s)?Ui:i_;return f(s,le(c,3))}var zU=I_(J_),GU=I_(e0);function KU(s,c){return Ft(xu(s,c),1)}function QU(s,c){return Ft(xu(s,c),K)}function ZU(s,c,f){return f=f===t?1:be(f),Ft(xu(s,c),f)}function s0(s,c){var f=xe(s)?Qr:$i;return f(s,le(c,3))}function a0(s,c){var f=xe(s)?hO:n_;return f(s,le(c,3))}var YU=lu(function(s,c,f){je.call(s,f)?s[f].push(c):ui(s,f,[c])});function XU(s,c,f,m){s=pr(s)?s:Ns(s),f=f&&!m?be(f):0;var y=s.length;return f<0&&(f=Tt(y+f,0)),wu(s)?f<=y&&s.indexOf(c,f)>-1:!!y&&Es(s,c,f)>-1}var JU=ke(function(s,c,f){var m=-1,y=typeof c=="function",S=pr(s)?L(s.length):[];return $i(s,function(E){S[++m]=y?Pr(c,E,f):kc(E,c,f)}),S}),e2=lu(function(s,c,f){ui(s,f,c)});function xu(s,c){var f=xe(s)?et:p_;return f(s,le(c,3))}function t2(s,c,f,m){return s==null?[]:(xe(c)||(c=c==null?[]:[c]),f=m?t:f,xe(f)||(f=f==null?[]:[f]),m_(s,c,f))}var r2=lu(function(s,c,f){s[f?0:1].push(c)},function(){return[[],[]]});function n2(s,c,f){var m=xe(s)?zy:Uw,y=arguments.length<3;return m(s,le(c,4),f,y,$i)}function i2(s,c,f){var m=xe(s)?gO:Uw,y=arguments.length<3;return m(s,le(c,4),f,y,n_)}function o2(s,c){var f=xe(s)?Ui:i_;return f(s,vu(le(c,3)))}function s2(s){var c=xe(s)?Jw:XN;return c(s)}function a2(s,c,f){(f?Zt(s,c,f):c===t)?c=1:c=be(c);var m=xe(s)?MN:JN;return m(s,c)}function c2(s){var c=xe(s)?AN:tL;return c(s)}function l2(s){if(s==null)return 0;if(pr(s))return wu(s)?ks(s):s.length;var c=Bt(s);return c==vn||c==bn?s.size:ux(s).length}function p2(s,c,f){var m=xe(s)?Gy:rL;return f&&Zt(s,c,f)&&(c=t),m(s,le(c,3))}var u2=ke(function(s,c){if(s==null)return[];var f=c.length;return f>1&&Zt(s,c[0],c[1])?c=[]:f>2&&Zt(c[0],c[1],c[2])&&(c=[c[0]]),m_(s,Ft(c,1),[])}),Tu=qO||function(){return _t.Date.now()};function f2(s,c){if(typeof c!="function")throw new Zr(i);return s=be(s),function(){if(--s<1)return c.apply(this,arguments)}}function c0(s,c,f){return c=f?t:c,c=s&&c==null?s.length:c,fi(s,ge,t,t,t,t,c)}function l0(s,c){var f;if(typeof c!="function")throw new Zr(i);return s=be(s),function(){return--s>0&&(f=c.apply(this,arguments)),s<=1&&(c=t),f}}var Ox=ke(function(s,c,f){var m=_;if(f.length){var y=Bi(f,Cs(Ox));m|=Z}return fi(s,m,c,f,y)}),p0=ke(function(s,c,f){var m=_|w;if(f.length){var y=Bi(f,Cs(p0));m|=Z}return fi(c,m,s,f,y)});function u0(s,c,f){c=f?t:c;var m=fi(s,M,t,t,t,t,t,c);return m.placeholder=u0.placeholder,m}function f0(s,c,f){c=f?t:c;var m=fi(s,U,t,t,t,t,t,c);return m.placeholder=f0.placeholder,m}function d0(s,c,f){var m,y,S,E,R,A,B=0,H=!1,j=!1,Y=!0;if(typeof s!="function")throw new Zr(i);c=tn(c)||0,nt(f)&&(H=!!f.leading,j="maxWait"in f,S=j?Tt(tn(f.maxWait)||0,c):S,Y="trailing"in f?!!f.trailing:Y);function ie(lt){var Rn=m,yi=y;return m=y=t,B=lt,E=s.apply(yi,Rn),E}function pe(lt){return B=lt,R=Ic(Pe,c),H?ie(lt):E}function Ee(lt){var Rn=lt-A,yi=lt-B,I0=c-Rn;return j?Vt(I0,S-yi):I0}function ue(lt){var Rn=lt-A,yi=lt-B;return A===t||Rn>=c||Rn<0||j&&yi>=S}function Pe(){var lt=Tu();if(ue(lt))return Ie(lt);R=Ic(Pe,Ee(lt))}function Ie(lt){return R=t,Y&&m?ie(lt):(m=y=t,E)}function Ir(){R!==t&&w_(R),B=0,m=A=y=R=t}function Yt(){return R===t?E:Ie(Tu())}function Fr(){var lt=Tu(),Rn=ue(lt);if(m=arguments,y=this,A=lt,Rn){if(R===t)return pe(A);if(j)return w_(R),R=Ic(Pe,c),ie(A)}return R===t&&(R=Ic(Pe,c)),E}return Fr.cancel=Ir,Fr.flush=Yt,Fr}var d2=ke(function(s,c){return r_(s,1,c)}),m2=ke(function(s,c,f){return r_(s,tn(c)||0,f)});function h2(s){return fi(s,mt)}function Su(s,c){if(typeof s!="function"||c!=null&&typeof c!="function")throw new Zr(i);var f=function(){var m=arguments,y=c?c.apply(this,m):m[0],S=f.cache;if(S.has(y))return S.get(y);var E=s.apply(this,m);return f.cache=S.set(y,E)||S,E};return f.cache=new(Su.Cache||pi),f}Su.Cache=pi;function vu(s){if(typeof s!="function")throw new Zr(i);return function(){var c=arguments;switch(c.length){case 0:return!s.call(this);case 1:return!s.call(this,c[0]);case 2:return!s.call(this,c[0],c[1]);case 3:return!s.call(this,c[0],c[1],c[2])}return!s.apply(this,c)}}function g2(s){return l0(2,s)}var y2=nL(function(s,c){c=c.length==1&&xe(c[0])?et(c[0],Mr(le())):et(Ft(c,1),Mr(le()));var f=c.length;return ke(function(m){for(var y=-1,S=Vt(m.length,f);++y<S;)m[y]=c[y].call(this,m[y]);return Pr(s,this,m)})}),Nx=ke(function(s,c){var f=Bi(c,Cs(Nx));return fi(s,Z,t,c,f)}),m0=ke(function(s,c){var f=Bi(c,Cs(m0));return fi(s,ne,t,c,f)}),x2=di(function(s,c){return fi(s,de,t,t,t,c)});function T2(s,c){if(typeof s!="function")throw new Zr(i);return c=c===t?c:be(c),ke(s,c)}function S2(s,c){if(typeof s!="function")throw new Zr(i);return c=c==null?0:Tt(be(c),0),ke(function(f){var m=f[c],y=zi(f,0,c);return m&&Vi(y,m),Pr(s,this,y)})}function v2(s,c,f){var m=!0,y=!0;if(typeof s!="function")throw new Zr(i);return nt(f)&&(m="leading"in f?!!f.leading:m,y="trailing"in f?!!f.trailing:y),d0(s,c,{leading:m,maxWait:c,trailing:y})}function b2(s){return c0(s,1)}function w2(s,c){return Nx(Sx(c),s)}function _2(){if(!arguments.length)return[];var s=arguments[0];return xe(s)?s:[s]}function E2(s){return Xr(s,h)}function R2(s,c){return c=typeof c=="function"?c:t,Xr(s,h,c)}function k2(s){return Xr(s,u|h)}function P2(s,c){return c=typeof c=="function"?c:t,Xr(s,u|h,c)}function M2(s,c){return c==null||t_(s,c,Et(c))}function En(s,c){return s===c||s!==s&&c!==c}var A2=du(cx),D2=du(function(s,c){return s>=c}),Lo=a_(function(){return arguments}())?a_:function(s){return st(s)&&je.call(s,"callee")&&!Gw.call(s,"callee")},xe=L.isArray,I2=Pw?Mr(Pw):BN;function pr(s){return s!=null&&bu(s.length)&&!hi(s)}function ct(s){return st(s)&&pr(s)}function F2(s){return s===!0||s===!1||st(s)&&Qt(s)==Sn}var Gi=GO||Gx,C2=Mw?Mr(Mw):HN;function O2(s){return st(s)&&s.nodeType===1&&!Fc(s)}function N2(s){if(s==null)return!0;if(pr(s)&&(xe(s)||typeof s=="string"||typeof s.splice=="function"||Gi(s)||Os(s)||Lo(s)))return!s.length;var c=Bt(s);if(c==vn||c==bn)return!s.size;if(Dc(s))return!ux(s).length;for(var f in s)if(je.call(s,f))return!1;return!0}function L2(s,c){return Pc(s,c)}function U2(s,c,f){f=typeof f=="function"?f:t;var m=f?f(s,c):t;return m===t?Pc(s,c,t,f):!!m}function Lx(s){if(!st(s))return!1;var c=Qt(s);return c==ai||c==Po||typeof s.message=="string"&&typeof s.name=="string"&&!Fc(s)}function V2(s){return typeof s=="number"&&Qw(s)}function hi(s){if(!nt(s))return!1;var c=Qt(s);return c==bs||c==rw||c==kr||c==lC}function h0(s){return typeof s=="number"&&s==be(s)}function bu(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=Q}function nt(s){var c=typeof s;return s!=null&&(c=="object"||c=="function")}function st(s){return s!=null&&typeof s=="object"}var g0=Aw?Mr(Aw):$N;function B2(s,c){return s===c||px(s,c,kx(c))}function H2(s,c,f){return f=typeof f=="function"?f:t,px(s,c,kx(c),f)}function W2(s){return y0(s)&&s!=+s}function $2(s){if(RL(s))throw new ye(n);return c_(s)}function j2(s){return s===null}function q2(s){return s==null}function y0(s){return typeof s=="number"||st(s)&&Qt(s)==mc}function Fc(s){if(!st(s)||Qt(s)!=ci)return!1;var c=Qp(s);if(c===null)return!0;var f=je.call(c,"constructor")&&c.constructor;return typeof f=="function"&&f instanceof f&&qp.call(f)==HO}var Ux=Dw?Mr(Dw):jN;function z2(s){return h0(s)&&s>=-Q&&s<=Q}var x0=Iw?Mr(Iw):qN;function wu(s){return typeof s=="string"||!xe(s)&&st(s)&&Qt(s)==gc}function Dr(s){return typeof s=="symbol"||st(s)&&Qt(s)==Np}var Os=Fw?Mr(Fw):zN;function G2(s){return s===t}function K2(s){return st(s)&&Bt(s)==yc}function Q2(s){return st(s)&&Qt(s)==uC}var Z2=du(fx),Y2=du(function(s,c){return s<=c});function T0(s){if(!s)return[];if(pr(s))return wu(s)?wn(s):lr(s);if(Sc&&s[Sc])return MO(s[Sc]());var c=Bt(s),f=c==vn?Jy:c==bn?Wp:Ns;return f(s)}function gi(s){if(!s)return s===0?s:0;if(s=tn(s),s===K||s===-K){var c=s<0?-1:1;return c*te}return s===s?s:0}function be(s){var c=gi(s),f=c%1;return c===c?f?c-f:c:0}function S0(s){return s?Fo(be(s),0,re):0}function tn(s){if(typeof s=="number")return s;if(Dr(s))return me;if(nt(s)){var c=typeof s.valueOf=="function"?s.valueOf():s;s=nt(c)?c+"":c}if(typeof s!="string")return s===0?s:+s;s=Vw(s);var f=IC.test(s);return f||CC.test(s)?fO(s.slice(2),f?2:8):DC.test(s)?me:+s}function v0(s){return Hn(s,ur(s))}function X2(s){return s?Fo(be(s),-Q,Q):s===0?s:0}function We(s){return s==null?"":Ar(s)}var J2=Is(function(s,c){if(Dc(c)||pr(c)){Hn(c,Et(c),s);return}for(var f in c)je.call(c,f)&&Ec(s,f,c[f])}),b0=Is(function(s,c){Hn(c,ur(c),s)}),_u=Is(function(s,c,f,m){Hn(c,ur(c),s,m)}),eV=Is(function(s,c,f,m){Hn(c,Et(c),s,m)}),tV=di(ox);function rV(s,c){var f=Ds(s);return c==null?f:e_(f,c)}var nV=ke(function(s,c){s=ze(s);var f=-1,m=c.length,y=m>2?c[2]:t;for(y&&Zt(c[0],c[1],y)&&(m=1);++f<m;)for(var S=c[f],E=ur(S),R=-1,A=E.length;++R<A;){var B=E[R],H=s[B];(H===t||En(H,Ps[B])&&!je.call(s,B))&&(s[B]=S[B])}return s}),iV=ke(function(s){return s.push(t,V_),Pr(w0,t,s)});function oV(s,c){return Ow(s,le(c,3),Bn)}function sV(s,c){return Ow(s,le(c,3),ax)}function aV(s,c){return s==null?s:sx(s,le(c,3),ur)}function cV(s,c){return s==null?s:o_(s,le(c,3),ur)}function lV(s,c){return s&&Bn(s,le(c,3))}function pV(s,c){return s&&ax(s,le(c,3))}function uV(s){return s==null?[]:ou(s,Et(s))}function fV(s){return s==null?[]:ou(s,ur(s))}function Vx(s,c,f){var m=s==null?t:Co(s,c);return m===t?f:m}function dV(s,c){return s!=null&&W_(s,c,NN)}function Bx(s,c){return s!=null&&W_(s,c,LN)}var mV=C_(function(s,c,f){c!=null&&typeof c.toString!="function"&&(c=zp.call(c)),s[c]=f},Wx(fr)),hV=C_(function(s,c,f){c!=null&&typeof c.toString!="function"&&(c=zp.call(c)),je.call(s,c)?s[c].push(f):s[c]=[f]},le),gV=ke(kc);function Et(s){return pr(s)?Xw(s):ux(s)}function ur(s){return pr(s)?Xw(s,!0):GN(s)}function yV(s,c){var f={};return c=le(c,3),Bn(s,function(m,y,S){ui(f,c(m,y,S),m)}),f}function xV(s,c){var f={};return c=le(c,3),Bn(s,function(m,y,S){ui(f,y,c(m,y,S))}),f}var TV=Is(function(s,c,f){su(s,c,f)}),w0=Is(function(s,c,f,m){su(s,c,f,m)}),SV=di(function(s,c){var f={};if(s==null)return f;var m=!1;c=et(c,function(S){return S=qi(S,s),m||(m=S.length>1),S}),Hn(s,Ex(s),f),m&&(f=Xr(f,u|d|h,mL));for(var y=c.length;y--;)yx(f,c[y]);return f});function vV(s,c){return _0(s,vu(le(c)))}var bV=di(function(s,c){return s==null?{}:QN(s,c)});function _0(s,c){if(s==null)return{};var f=et(Ex(s),function(m){return[m]});return c=le(c),h_(s,f,function(m,y){return c(m,y[0])})}function wV(s,c,f){c=qi(c,s);var m=-1,y=c.length;for(y||(y=1,s=t);++m<y;){var S=s==null?t:s[Wn(c[m])];S===t&&(m=y,S=f),s=hi(S)?S.call(s):S}return s}function _V(s,c,f){return s==null?s:Mc(s,c,f)}function EV(s,c,f,m){return m=typeof m=="function"?m:t,s==null?s:Mc(s,c,f,m)}var E0=L_(Et),R0=L_(ur);function RV(s,c,f){var m=xe(s),y=m||Gi(s)||Os(s);if(c=le(c,4),f==null){var S=s&&s.constructor;y?f=m?new S:[]:nt(s)?f=hi(S)?Ds(Qp(s)):{}:f={}}return(y?Qr:Bn)(s,function(E,R,A){return c(f,E,R,A)}),f}function kV(s,c){return s==null?!0:yx(s,c)}function PV(s,c,f){return s==null?s:S_(s,c,Sx(f))}function MV(s,c,f,m){return m=typeof m=="function"?m:t,s==null?s:S_(s,c,Sx(f),m)}function Ns(s){return s==null?[]:Xy(s,Et(s))}function AV(s){return s==null?[]:Xy(s,ur(s))}function DV(s,c,f){return f===t&&(f=c,c=t),f!==t&&(f=tn(f),f=f===f?f:0),c!==t&&(c=tn(c),c=c===c?c:0),Fo(tn(s),c,f)}function IV(s,c,f){return c=gi(c),f===t?(f=c,c=0):f=gi(f),s=tn(s),UN(s,c,f)}function FV(s,c,f){if(f&&typeof f!="boolean"&&Zt(s,c,f)&&(c=f=t),f===t&&(typeof c=="boolean"?(f=c,c=t):typeof s=="boolean"&&(f=s,s=t)),s===t&&c===t?(s=0,c=1):(s=gi(s),c===t?(c=s,s=0):c=gi(c)),s>c){var m=s;s=c,c=m}if(f||s%1||c%1){var y=Zw();return Vt(s+y*(c-s+uO("1e-"+((y+"").length-1))),c)}return mx(s,c)}var CV=Fs(function(s,c,f){return c=c.toLowerCase(),s+(f?k0(c):c)});function k0(s){return Hx(We(s).toLowerCase())}function P0(s){return s=We(s),s&&s.replace(NC,_O).replace(tO,"")}function OV(s,c,f){s=We(s),c=Ar(c);var m=s.length;f=f===t?m:Fo(be(f),0,m);var y=f;return f-=c.length,f>=0&&s.slice(f,y)==c}function NV(s){return s=We(s),s&&gC.test(s)?s.replace(ow,EO):s}function LV(s){return s=We(s),s&&bC.test(s)?s.replace(Ny,"\\$&"):s}var UV=Fs(function(s,c,f){return s+(f?"-":"")+c.toLowerCase()}),VV=Fs(function(s,c,f){return s+(f?" ":"")+c.toLowerCase()}),BV=D_("toLowerCase");function HV(s,c,f){s=We(s),c=be(c);var m=c?ks(s):0;if(!c||m>=c)return s;var y=(c-m)/2;return fu(Jp(y),f)+s+fu(Xp(y),f)}function WV(s,c,f){s=We(s),c=be(c);var m=c?ks(s):0;return c&&m<c?s+fu(c-m,f):s}function $V(s,c,f){s=We(s),c=be(c);var m=c?ks(s):0;return c&&m<c?fu(c-m,f)+s:s}function jV(s,c,f){return f||c==null?c=0:c&&(c=+c),YO(We(s).replace(Ly,""),c||0)}function qV(s,c,f){return(f?Zt(s,c,f):c===t)?c=1:c=be(c),hx(We(s),c)}function zV(){var s=arguments,c=We(s[0]);return s.length<3?c:c.replace(s[1],s[2])}var GV=Fs(function(s,c,f){return s+(f?"_":"")+c.toLowerCase()});function KV(s,c,f){return f&&typeof f!="number"&&Zt(s,c,f)&&(c=f=t),f=f===t?re:f>>>0,f?(s=We(s),s&&(typeof c=="string"||c!=null&&!Ux(c))&&(c=Ar(c),!c&&Rs(s))?zi(wn(s),0,f):s.split(c,f)):[]}var QV=Fs(function(s,c,f){return s+(f?" ":"")+Hx(c)});function ZV(s,c,f){return s=We(s),f=f==null?0:Fo(be(f),0,s.length),c=Ar(c),s.slice(f,f+c.length)==c}function YV(s,c,f){var m=T.templateSettings;f&&Zt(s,c,f)&&(c=t),s=We(s),c=_u({},c,m,U_);var y=_u({},c.imports,m.imports,U_),S=Et(y),E=Xy(y,S),R,A,B=0,H=c.interpolate||Lp,j="__p += '",Y=ex((c.escape||Lp).source+"|"+H.source+"|"+(H===sw?AC:Lp).source+"|"+(c.evaluate||Lp).source+"|$","g"),ie="//# sourceURL="+(je.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++sO+"]")+`
`;s.replace(Y,function(ue,Pe,Ie,Ir,Yt,Fr){return Ie||(Ie=Ir),j+=s.slice(B,Fr).replace(LC,RO),Pe&&(R=!0,j+=`' +
__e(`+Pe+`) +
'`),Yt&&(A=!0,j+=`';
`+Yt+`;
__p += '`),Ie&&(j+=`' +
((__t = (`+Ie+`)) == null ? '' : __t) +
'`),B=Fr+ue.length,ue}),j+=`';
`;var pe=je.call(c,"variable")&&c.variable;if(!pe)j=`with (obj) {
`+j+`
}
`;else if(PC.test(pe))throw new ye(o);j=(A?j.replace(fC,""):j).replace(dC,"$1").replace(mC,"$1;"),j="function("+(pe||"obj")+`) {
`+(pe?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(R?", __e = _.escape":"")+(A?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+j+`return __p
}`;var Ee=A0(function(){return Ve(S,ie+"return "+j).apply(t,E)});if(Ee.source=j,Lx(Ee))throw Ee;return Ee}function XV(s){return We(s).toLowerCase()}function JV(s){return We(s).toUpperCase()}function eB(s,c,f){if(s=We(s),s&&(f||c===t))return Vw(s);if(!s||!(c=Ar(c)))return s;var m=wn(s),y=wn(c),S=Bw(m,y),E=Hw(m,y)+1;return zi(m,S,E).join("")}function tB(s,c,f){if(s=We(s),s&&(f||c===t))return s.slice(0,$w(s)+1);if(!s||!(c=Ar(c)))return s;var m=wn(s),y=Hw(m,wn(c))+1;return zi(m,0,y).join("")}function rB(s,c,f){if(s=We(s),s&&(f||c===t))return s.replace(Ly,"");if(!s||!(c=Ar(c)))return s;var m=wn(s),y=Bw(m,wn(c));return zi(m,y).join("")}function nB(s,c){var f=It,m=ot;if(nt(c)){var y="separator"in c?c.separator:y;f="length"in c?be(c.length):f,m="omission"in c?Ar(c.omission):m}s=We(s);var S=s.length;if(Rs(s)){var E=wn(s);S=E.length}if(f>=S)return s;var R=f-ks(m);if(R<1)return m;var A=E?zi(E,0,R).join(""):s.slice(0,R);if(y===t)return A+m;if(E&&(R+=A.length-R),Ux(y)){if(s.slice(R).search(y)){var B,H=A;for(y.global||(y=ex(y.source,We(aw.exec(y))+"g")),y.lastIndex=0;B=y.exec(H);)var j=B.index;A=A.slice(0,j===t?R:j)}}else if(s.indexOf(Ar(y),R)!=R){var Y=A.lastIndexOf(y);Y>-1&&(A=A.slice(0,Y))}return A+m}function iB(s){return s=We(s),s&&hC.test(s)?s.replace(iw,FO):s}var oB=Fs(function(s,c,f){return s+(f?" ":"")+c.toUpperCase()}),Hx=D_("toUpperCase");function M0(s,c,f){return s=We(s),c=f?t:c,c===t?PO(s)?NO(s):TO(s):s.match(c)||[]}var A0=ke(function(s,c){try{return Pr(s,t,c)}catch(f){return Lx(f)?f:new ye(f)}}),sB=di(function(s,c){return Qr(c,function(f){f=Wn(f),ui(s,f,Ox(s[f],s))}),s});function aB(s){var c=s==null?0:s.length,f=le();return s=c?et(s,function(m){if(typeof m[1]!="function")throw new Zr(i);return[f(m[0]),m[1]]}):[],ke(function(m){for(var y=-1;++y<c;){var S=s[y];if(Pr(S[0],this,m))return Pr(S[1],this,m)}})}function cB(s){return FN(Xr(s,u))}function Wx(s){return function(){return s}}function lB(s,c){return s==null||s!==s?c:s}var pB=F_(),uB=F_(!0);function fr(s){return s}function $x(s){return l_(typeof s=="function"?s:Xr(s,u))}function fB(s){return u_(Xr(s,u))}function dB(s,c){return f_(s,Xr(c,u))}var mB=ke(function(s,c){return function(f){return kc(f,s,c)}}),hB=ke(function(s,c){return function(f){return kc(s,f,c)}});function jx(s,c,f){var m=Et(c),y=ou(c,m);f==null&&!(nt(c)&&(y.length||!m.length))&&(f=c,c=s,s=this,y=ou(c,Et(c)));var S=!(nt(f)&&"chain"in f)||!!f.chain,E=hi(s);return Qr(y,function(R){var A=c[R];s[R]=A,E&&(s.prototype[R]=function(){var B=this.__chain__;if(S||B){var H=s(this.__wrapped__),j=H.__actions__=lr(this.__actions__);return j.push({func:A,args:arguments,thisArg:s}),H.__chain__=B,H}return A.apply(s,Vi([this.value()],arguments))})}),s}function gB(){return _t._===this&&(_t._=WO),this}function qx(){}function yB(s){return s=be(s),ke(function(c){return d_(c,s)})}var xB=bx(et),TB=bx(Cw),SB=bx(Gy);function D0(s){return Mx(s)?Ky(Wn(s)):ZN(s)}function vB(s){return function(c){return s==null?t:Co(s,c)}}var bB=O_(),wB=O_(!0);function zx(){return[]}function Gx(){return!1}function _B(){return{}}function EB(){return""}function RB(){return!0}function kB(s,c){if(s=be(s),s<1||s>Q)return[];var f=re,m=Vt(s,re);c=le(c),s-=re;for(var y=Yy(m,c);++f<s;)c(f);return y}function PB(s){return xe(s)?et(s,Wn):Dr(s)?[s]:lr(Y_(We(s)))}function MB(s){var c=++BO;return We(s)+c}var AB=uu(function(s,c){return s+c},0),DB=wx("ceil"),IB=uu(function(s,c){return s/c},1),FB=wx("floor");function CB(s){return s&&s.length?iu(s,fr,cx):t}function OB(s,c){return s&&s.length?iu(s,le(c,2),cx):t}function NB(s){return Lw(s,fr)}function LB(s,c){return Lw(s,le(c,2))}function UB(s){return s&&s.length?iu(s,fr,fx):t}function VB(s,c){return s&&s.length?iu(s,le(c,2),fx):t}var BB=uu(function(s,c){return s*c},1),HB=wx("round"),WB=uu(function(s,c){return s-c},0);function $B(s){return s&&s.length?Zy(s,fr):0}function jB(s,c){return s&&s.length?Zy(s,le(c,2)):0}return T.after=f2,T.ary=c0,T.assign=J2,T.assignIn=b0,T.assignInWith=_u,T.assignWith=eV,T.at=tV,T.before=l0,T.bind=Ox,T.bindAll=sB,T.bindKey=p0,T.castArray=_2,T.chain=o0,T.chunk=FL,T.compact=CL,T.concat=OL,T.cond=aB,T.conforms=cB,T.constant=Wx,T.countBy=$U,T.create=rV,T.curry=u0,T.curryRight=f0,T.debounce=d0,T.defaults=nV,T.defaultsDeep=iV,T.defer=d2,T.delay=m2,T.difference=NL,T.differenceBy=LL,T.differenceWith=UL,T.drop=VL,T.dropRight=BL,T.dropRightWhile=HL,T.dropWhile=WL,T.fill=$L,T.filter=qU,T.flatMap=KU,T.flatMapDeep=QU,T.flatMapDepth=ZU,T.flatten=t0,T.flattenDeep=jL,T.flattenDepth=qL,T.flip=h2,T.flow=pB,T.flowRight=uB,T.fromPairs=zL,T.functions=uV,T.functionsIn=fV,T.groupBy=YU,T.initial=KL,T.intersection=QL,T.intersectionBy=ZL,T.intersectionWith=YL,T.invert=mV,T.invertBy=hV,T.invokeMap=JU,T.iteratee=$x,T.keyBy=e2,T.keys=Et,T.keysIn=ur,T.map=xu,T.mapKeys=yV,T.mapValues=xV,T.matches=fB,T.matchesProperty=dB,T.memoize=Su,T.merge=TV,T.mergeWith=w0,T.method=mB,T.methodOf=hB,T.mixin=jx,T.negate=vu,T.nthArg=yB,T.omit=SV,T.omitBy=vV,T.once=g2,T.orderBy=t2,T.over=xB,T.overArgs=y2,T.overEvery=TB,T.overSome=SB,T.partial=Nx,T.partialRight=m0,T.partition=r2,T.pick=bV,T.pickBy=_0,T.property=D0,T.propertyOf=vB,T.pull=tU,T.pullAll=n0,T.pullAllBy=rU,T.pullAllWith=nU,T.pullAt=iU,T.range=bB,T.rangeRight=wB,T.rearg=x2,T.reject=o2,T.remove=oU,T.rest=T2,T.reverse=Fx,T.sampleSize=a2,T.set=_V,T.setWith=EV,T.shuffle=c2,T.slice=sU,T.sortBy=u2,T.sortedUniq=dU,T.sortedUniqBy=mU,T.split=KV,T.spread=S2,T.tail=hU,T.take=gU,T.takeRight=yU,T.takeRightWhile=xU,T.takeWhile=TU,T.tap=CU,T.throttle=v2,T.thru=yu,T.toArray=T0,T.toPairs=E0,T.toPairsIn=R0,T.toPath=PB,T.toPlainObject=v0,T.transform=RV,T.unary=b2,T.union=SU,T.unionBy=vU,T.unionWith=bU,T.uniq=wU,T.uniqBy=_U,T.uniqWith=EU,T.unset=kV,T.unzip=Cx,T.unzipWith=i0,T.update=PV,T.updateWith=MV,T.values=Ns,T.valuesIn=AV,T.without=RU,T.words=M0,T.wrap=w2,T.xor=kU,T.xorBy=PU,T.xorWith=MU,T.zip=AU,T.zipObject=DU,T.zipObjectDeep=IU,T.zipWith=FU,T.entries=E0,T.entriesIn=R0,T.extend=b0,T.extendWith=_u,jx(T,T),T.add=AB,T.attempt=A0,T.camelCase=CV,T.capitalize=k0,T.ceil=DB,T.clamp=DV,T.clone=E2,T.cloneDeep=k2,T.cloneDeepWith=P2,T.cloneWith=R2,T.conformsTo=M2,T.deburr=P0,T.defaultTo=lB,T.divide=IB,T.endsWith=OV,T.eq=En,T.escape=NV,T.escapeRegExp=LV,T.every=jU,T.find=zU,T.findIndex=J_,T.findKey=oV,T.findLast=GU,T.findLastIndex=e0,T.findLastKey=sV,T.floor=FB,T.forEach=s0,T.forEachRight=a0,T.forIn=aV,T.forInRight=cV,T.forOwn=lV,T.forOwnRight=pV,T.get=Vx,T.gt=A2,T.gte=D2,T.has=dV,T.hasIn=Bx,T.head=r0,T.identity=fr,T.includes=XU,T.indexOf=GL,T.inRange=IV,T.invoke=gV,T.isArguments=Lo,T.isArray=xe,T.isArrayBuffer=I2,T.isArrayLike=pr,T.isArrayLikeObject=ct,T.isBoolean=F2,T.isBuffer=Gi,T.isDate=C2,T.isElement=O2,T.isEmpty=N2,T.isEqual=L2,T.isEqualWith=U2,T.isError=Lx,T.isFinite=V2,T.isFunction=hi,T.isInteger=h0,T.isLength=bu,T.isMap=g0,T.isMatch=B2,T.isMatchWith=H2,T.isNaN=W2,T.isNative=$2,T.isNil=q2,T.isNull=j2,T.isNumber=y0,T.isObject=nt,T.isObjectLike=st,T.isPlainObject=Fc,T.isRegExp=Ux,T.isSafeInteger=z2,T.isSet=x0,T.isString=wu,T.isSymbol=Dr,T.isTypedArray=Os,T.isUndefined=G2,T.isWeakMap=K2,T.isWeakSet=Q2,T.join=XL,T.kebabCase=UV,T.last=en,T.lastIndexOf=JL,T.lowerCase=VV,T.lowerFirst=BV,T.lt=Z2,T.lte=Y2,T.max=CB,T.maxBy=OB,T.mean=NB,T.meanBy=LB,T.min=UB,T.minBy=VB,T.stubArray=zx,T.stubFalse=Gx,T.stubObject=_B,T.stubString=EB,T.stubTrue=RB,T.multiply=BB,T.nth=eU,T.noConflict=gB,T.noop=qx,T.now=Tu,T.pad=HV,T.padEnd=WV,T.padStart=$V,T.parseInt=jV,T.random=FV,T.reduce=n2,T.reduceRight=i2,T.repeat=qV,T.replace=zV,T.result=wV,T.round=HB,T.runInContext=k,T.sample=s2,T.size=l2,T.snakeCase=GV,T.some=p2,T.sortedIndex=aU,T.sortedIndexBy=cU,T.sortedIndexOf=lU,T.sortedLastIndex=pU,T.sortedLastIndexBy=uU,T.sortedLastIndexOf=fU,T.startCase=QV,T.startsWith=ZV,T.subtract=WB,T.sum=$B,T.sumBy=jB,T.template=YV,T.times=kB,T.toFinite=gi,T.toInteger=be,T.toLength=S0,T.toLower=XV,T.toNumber=tn,T.toSafeInteger=X2,T.toString=We,T.toUpper=JV,T.trim=eB,T.trimEnd=tB,T.trimStart=rB,T.truncate=nB,T.unescape=iB,T.uniqueId=MB,T.upperCase=oB,T.upperFirst=Hx,T.each=s0,T.eachRight=a0,T.first=r0,jx(T,function(){var s={};return Bn(T,function(c,f){je.call(T.prototype,f)||(s[f]=c)}),s}(),{chain:!1}),T.VERSION=e,Qr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(s){T[s].placeholder=T}),Qr(["drop","take"],function(s,c){Ae.prototype[s]=function(f){f=f===t?1:Tt(be(f),0);var m=this.__filtered__&&!c?new Ae(this):this.clone();return m.__filtered__?m.__takeCount__=Vt(f,m.__takeCount__):m.__views__.push({size:Vt(f,re),type:s+(m.__dir__<0?"Right":"")}),m},Ae.prototype[s+"Right"]=function(f){return this.reverse()[s](f).reverse()}}),Qr(["filter","map","takeWhile"],function(s,c){var f=c+1,m=f==I||f==q;Ae.prototype[s]=function(y){var S=this.clone();return S.__iteratees__.push({iteratee:le(y,3),type:f}),S.__filtered__=S.__filtered__||m,S}}),Qr(["head","last"],function(s,c){var f="take"+(c?"Right":"");Ae.prototype[s]=function(){return this[f](1).value()[0]}}),Qr(["initial","tail"],function(s,c){var f="drop"+(c?"":"Right");Ae.prototype[s]=function(){return this.__filtered__?new Ae(this):this[f](1)}}),Ae.prototype.compact=function(){return this.filter(fr)},Ae.prototype.find=function(s){return this.filter(s).head()},Ae.prototype.findLast=function(s){return this.reverse().find(s)},Ae.prototype.invokeMap=ke(function(s,c){return typeof s=="function"?new Ae(this):this.map(function(f){return kc(f,s,c)})}),Ae.prototype.reject=function(s){return this.filter(vu(le(s)))},Ae.prototype.slice=function(s,c){s=be(s);var f=this;return f.__filtered__&&(s>0||c<0)?new Ae(f):(s<0?f=f.takeRight(-s):s&&(f=f.drop(s)),c!==t&&(c=be(c),f=c<0?f.dropRight(-c):f.take(c-s)),f)},Ae.prototype.takeRightWhile=function(s){return this.reverse().takeWhile(s).reverse()},Ae.prototype.toArray=function(){return this.take(re)},Bn(Ae.prototype,function(s,c){var f=/^(?:filter|find|map|reject)|While$/.test(c),m=/^(?:head|last)$/.test(c),y=T[m?"take"+(c=="last"?"Right":""):c],S=m||/^find/.test(c);y&&(T.prototype[c]=function(){var E=this.__wrapped__,R=m?[1]:arguments,A=E instanceof Ae,B=R[0],H=A||xe(E),j=function(Pe){var Ie=y.apply(T,Vi([Pe],R));return m&&Y?Ie[0]:Ie};H&&f&&typeof B=="function"&&B.length!=1&&(A=H=!1);var Y=this.__chain__,ie=!!this.__actions__.length,pe=S&&!Y,Ee=A&&!ie;if(!S&&H){E=Ee?E:new Ae(this);var ue=s.apply(E,R);return ue.__actions__.push({func:yu,args:[j],thisArg:t}),new Yr(ue,Y)}return pe&&Ee?s.apply(this,R):(ue=this.thru(j),pe?m?ue.value()[0]:ue.value():ue)})}),Qr(["pop","push","shift","sort","splice","unshift"],function(s){var c=$p[s],f=/^(?:push|sort|unshift)$/.test(s)?"tap":"thru",m=/^(?:pop|shift)$/.test(s);T.prototype[s]=function(){var y=arguments;if(m&&!this.__chain__){var S=this.value();return c.apply(xe(S)?S:[],y)}return this[f](function(E){return c.apply(xe(E)?E:[],y)})}}),Bn(Ae.prototype,function(s,c){var f=T[c];if(f){var m=f.name+"";je.call(As,m)||(As[m]=[]),As[m].push({name:c,func:f})}}),As[pu(t,w).name]=[{name:"wrapper",func:t}],Ae.prototype.clone=iN,Ae.prototype.reverse=oN,Ae.prototype.value=sN,T.prototype.at=OU,T.prototype.chain=NU,T.prototype.commit=LU,T.prototype.next=UU,T.prototype.plant=BU,T.prototype.reverse=HU,T.prototype.toJSON=T.prototype.valueOf=T.prototype.value=WU,T.prototype.first=T.prototype.head,Sc&&(T.prototype[Sc]=VU),T},Hi=LO();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(_t._=Hi,define(function(){return Hi})):Mo?((Mo.exports=Hi)._=Hi,$y._=Hi):_t._=Hi}).call(Xa)});var aF=Ge((vNe,sF)=>{"use strict";sF.exports=iF;function iF(t,e,r){t instanceof RegExp&&(t=nF(t,r)),e instanceof RegExp&&(e=nF(e,r));var n=oF(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}function nF(t,e){var r=e.match(t);return r?r[0]:null}iF.range=oF;function oF(t,e,r){var n,i,o,a,l,p=r.indexOf(t),u=r.indexOf(e,p+1),d=p;if(p>=0&&u>0){if(t===e)return[p,u];for(n=[],o=r.length;d>=0&&!l;)d==p?(n.push(d),p=r.indexOf(t,d+1)):n.length==1?l=[n.pop(),u]:(i=n.pop(),i<o&&(o=i,a=u),u=r.indexOf(e,d+1)),d=p<u&&p>=0?p:u;n.length&&(l=[o,a])}return l}});var hF=Ge((bNe,mF)=>{var cF=aF();mF.exports=rZ;var lF="\0SLASH"+Math.random()+"\0",pF="\0OPEN"+Math.random()+"\0",Nv="\0CLOSE"+Math.random()+"\0",uF="\0COMMA"+Math.random()+"\0",fF="\0PERIOD"+Math.random()+"\0";function Ov(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function eZ(t){return t.split("\\\\").join(lF).split("\\{").join(pF).split("\\}").join(Nv).split("\\,").join(uF).split("\\.").join(fF)}function tZ(t){return t.split(lF).join("\\").split(pF).join("{").split(Nv).join("}").split(uF).join(",").split(fF).join(".")}function dF(t){if(!t)return[""];var e=[],r=cF("{","}",t);if(!r)return t.split(",");var n=r.pre,i=r.body,o=r.post,a=n.split(",");a[a.length-1]+="{"+i+"}";var l=dF(o);return o.length&&(a[a.length-1]+=l.shift(),a.push.apply(a,l)),e.push.apply(e,a),e}function rZ(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),up(eZ(t),!0).map(tZ)):[]}function nZ(t){return"{"+t+"}"}function iZ(t){return/^-?0\d/.test(t)}function oZ(t,e){return t<=e}function sZ(t,e){return t>=e}function up(t,e){var r=[],n=cF("{","}",t);if(!n)return[t];var i=n.pre,o=n.post.length?up(n.post,!1):[""];if(/\$$/.test(n.pre))for(var a=0;a<o.length;a++){var l=i+"{"+n.body+"}"+o[a];r.push(l)}else{var p=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),u=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),d=p||u,h=n.body.indexOf(",")>=0;if(!d&&!h)return n.post.match(/,.*\}/)?(t=n.pre+"{"+n.body+Nv+n.post,up(t)):[t];var g;if(d)g=n.body.split(/\.\./);else if(g=dF(n.body),g.length===1&&(g=up(g[0],!1).map(nZ),g.length===1))return o.map(function(N){return n.pre+g[0]+N});var x;if(d){var _=Ov(g[0]),w=Ov(g[1]),C=Math.max(g[0].length,g[1].length),M=g.length==3?Math.abs(Ov(g[2])):1,U=oZ,Z=w<_;Z&&(M*=-1,U=sZ);var ne=g.some(iZ);x=[];for(var ge=_;U(ge,w);ge+=M){var de;if(u)de=String.fromCharCode(ge),de==="\\"&&(de="");else if(de=String(ge),ne){var mt=C-de.length;if(mt>0){var It=new Array(mt+1).join("0");ge<0?de="-"+It+de.slice(1):de=It+de}}x.push(de)}}else{x=[];for(var ot=0;ot<g.length;ot++)x.push.apply(x,up(g[ot],!1))}for(var ot=0;ot<x.length;ot++)for(var a=0;a<o.length;a++){var l=i+x[ot]+o[a];(!e||d||l)&&r.push(l)}}return r}});var zY={};ZB(zY,{default:()=>aC});module.exports=YB(zY);var Kx="cursorless.command",Ru=class{constructor(e){this.baseTitle=e}get title(){return`Cursorless: ${this.baseTitle}`}},pt=class extends Ru{constructor(){super(...arguments);this.isVisible=!1}},ht=class extends Ru{constructor(){super(...arguments);this.isVisible=!0}};var KY={"cursorless.toggleDecorations":new ht("Toggle decorations"),"cursorless.recomputeDecorationStyles":new ht("Recompute decoration styles"),"cursorless.recordTestCase":new ht("Record test case"),"cursorless.recordOneTestCaseThenPause":new ht("Record one test case, then pause"),"cursorless.pauseRecording":new ht("Pause test case recording"),"cursorless.resumeRecording":new ht("Resume test case recording"),"cursorless.recordScopeTests.showUnimplementedFacets":new ht("Bulk record unimplemented scope facets"),"cursorless.recordScopeTests.saveActiveDocument":new ht("Bulk save scope tests for the active document"),"cursorless.showDocumentation":new ht("Show documentation"),"cursorless.showScopeVisualizer":new ht("Show the scope visualizer"),"cursorless.hideScopeVisualizer":new ht("Hide the scope visualizer"),"cursorless.analyzeCommandHistory":new ht("Analyze collected command history"),"cursorless.tutorial.start":new pt("Start a tutorial"),"cursorless.tutorial.next":new ht("Tutorial next"),"cursorless.tutorial.previous":new ht("Tutorial previous"),"cursorless.tutorial.restart":new ht("Tutorial restart"),"cursorless.tutorial.resume":new ht("Tutorial resume"),"cursorless.tutorial.list":new ht("Tutorial list"),"cursorless.documentationOpened":new pt("Used by talon to notify us that the docs have been opened; for use with tutorial"),"cursorless.command":new pt("The core cursorless command"),"cursorless.repeatPreviousCommand":new ht("Repeat the previous Cursorless command"),"cursorless.showQuickPick":new pt("Pop up a quick pick of all cursorless commands"),"cursorless.showCheatsheet":new pt("Display the cursorless cheatsheet"),"cursorless.internal.updateCheatsheetDefaults":new pt("Update the default values of the cheatsheet payload used on the website and for local development. Be sure to run this on stock community and cursorless."),"cursorless.private.logQuickActions":new pt("Log the quick actions available at the current cursor position"),"cursorless.takeSnapshot":new pt("Take a snapshot of the current editor state"),"cursorless.keyboard.escape":new pt("Should be mapped to the escape key when using cursorless keyboard. By default, exits modal keyboard mode, but changes behaviour when Cursorless is expecting a continuation keystroke.  For example, when you type a color and Cursorless is waiting for a character, it cancels the color and switches back to modal mode."),"cursorless.keyboard.targeted.targetHat":new pt("Sets the keyboard target to the given hat"),"cursorless.keyboard.targeted.targetScope":new pt("Sets the keyboard target to the scope containing the current target"),"cursorless.keyboard.targeted.targetSelection":new pt("Sets the keyboard target to the current selection"),"cursorless.keyboard.targeted.clearTarget":new pt("Clears the current keyboard target"),"cursorless.keyboard.targeted.runActionOnTarget":new pt("Run the given action on the current keyboard target"),"cursorless.keyboard.modal.modeOn":new pt("Turn on the cursorless modal mode"),"cursorless.keyboard.modal.modeOff":new pt("Turn off the cursorless modal mode"),"cursorless.keyboard.modal.modeToggle":new pt("Toggle the cursorless modal mode"),"cursorless.keyboard.undoTarget":new pt("Undo keyboard targeting changes"),"cursorless.keyboard.redoTarget":new pt("Redo keyboard targeting changes")};var ku=class{constructor(e,r){this.callback=e;this.debounceDelayMs=r;this.timeoutHandle=null;this.run=this.run.bind(this)}run(){this.timeoutHandle!=null&&clearTimeout(this.timeoutHandle),this.timeoutHandle=setTimeout(()=>{this.callback(),this.timeoutHandle=null},this.debounceDelayMs)}dispose(){this.timeoutHandle!=null&&clearTimeout(this.timeoutHandle)}};var Pu=class extends Error{constructor(e){super(`Language '${e}' is not implemented yet; See https://www.cursorless.org/docs/contributing/adding-a-new-language/`),this.name="UnsupportedLanguageError"}};var Mu=class extends Error{constructor(){super("Cursorless Talon version is ahead of Cursorless VSCode extension version. Please update Cursorless VSCode.")}},Rt=class extends Error{constructor(e){super(`Couldn't find containing ${e}.`),this.name="NoContainingScopeError"}};var Au=class{constructor(){this.signals={prePhrase:{getVersion:async()=>null}}}async getFocusedElementType(){return this.focusedElementType}setFocusedElementType(e){this.focusedElementType=e}};var XB=typeof global=="object"&&global&&global.Object===Object&&global,Du=XB;var JB=typeof self=="object"&&self&&self.Object===Object&&self,eH=Du||JB||Function("return this")(),kt=eH;var tH=kt.Symbol,Xt=tH;var C0=Object.prototype,rH=C0.hasOwnProperty,nH=C0.toString,Cc=Xt?Xt.toStringTag:void 0;function iH(t){var e=rH.call(t,Cc),r=t[Cc];try{t[Cc]=void 0;var n=!0}catch{}var i=nH.call(t);return n&&(e?t[Cc]=r:delete t[Cc]),i}var O0=iH;var oH=Object.prototype,sH=oH.toString;function aH(t){return sH.call(t)}var N0=aH;var cH="[object Null]",lH="[object Undefined]",L0=Xt?Xt.toStringTag:void 0;function pH(t){return t==null?t===void 0?lH:cH:L0&&L0 in Object(t)?O0(t):N0(t)}var kn=pH;function uH(t){return t!=null&&typeof t=="object"}var Jt=uH;var fH="[object Symbol]";function dH(t){return typeof t=="symbol"||Jt(t)&&kn(t)==fH}var Cr=dH;function mH(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var rn=mH;var hH=Array.isArray,Be=hH;var gH=1/0,U0=Xt?Xt.prototype:void 0,V0=U0?U0.toString:void 0;function B0(t){if(typeof t=="string")return t;if(Be(t))return rn(t,B0)+"";if(Cr(t))return V0?V0.call(t):"";var e=t+"";return e=="0"&&1/t==-gH?"-0":e}var H0=B0;var yH=/\s/;function xH(t){for(var e=t.length;e--&&yH.test(t.charAt(e)););return e}var W0=xH;var TH=/^\s+/;function SH(t){return t&&t.slice(0,W0(t)+1).replace(TH,"")}var $0=SH;function vH(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Or=vH;var j0=NaN,bH=/^[-+]0x[0-9a-f]+$/i,wH=/^0b[01]+$/i,_H=/^0o[0-7]+$/i,EH=parseInt;function RH(t){if(typeof t=="number")return t;if(Cr(t))return j0;if(Or(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Or(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=$0(t);var r=wH.test(t);return r||_H.test(t)?EH(t.slice(2),r?2:8):bH.test(t)?j0:+t}var q0=RH;var z0=1/0,kH=17976931348623157e292;function PH(t){if(!t)return t===0?t:0;if(t=q0(t),t===z0||t===-z0){var e=t<0?-1:1;return e*kH}return t===t?t:0}var Ls=PH;function MH(t){var e=Ls(t),r=e%1;return e===e?r?e-r:e:0}var Iu=MH;function AH(t){return t}var Ht=AH;var DH="[object AsyncFunction]",IH="[object Function]",FH="[object GeneratorFunction]",CH="[object Proxy]";function OH(t){if(!Or(t))return!1;var e=kn(t);return e==IH||e==FH||e==DH||e==CH}var Fu=OH;var NH=kt["__core-js_shared__"],Cu=NH;var G0=function(){var t=/[^.]+$/.exec(Cu&&Cu.keys&&Cu.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function LH(t){return!!G0&&G0 in t}var K0=LH;var UH=Function.prototype,VH=UH.toString;function BH(t){if(t!=null){try{return VH.call(t)}catch{}try{return t+""}catch{}}return""}var xi=BH;var HH=/[\\^$.*+?()[\]{}|]/g,WH=/^\[object .+?Constructor\]$/,$H=Function.prototype,jH=Object.prototype,qH=$H.toString,zH=jH.hasOwnProperty,GH=RegExp("^"+qH.call(zH).replace(HH,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function KH(t){if(!Or(t)||K0(t))return!1;var e=Fu(t)?GH:WH;return e.test(xi(t))}var Q0=KH;function QH(t,e){return t?.[e]}var Z0=QH;function ZH(t,e){var r=Z0(t,e);return Q0(r)?r:void 0}var mr=ZH;var YH=mr(kt,"WeakMap"),Uo=YH;var XH=Uo&&new Uo,Qx=XH;var Y0=Object.create,JH=function(){function t(){}return function(e){if(!Or(e))return{};if(Y0)return Y0(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),Ou=JH;function eW(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var X0=eW;function tW(){}var Us=tW;var rW=4294967295;function Nu(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=rW,this.__views__=[]}Nu.prototype=Ou(Us.prototype);Nu.prototype.constructor=Nu;var Vs=Nu;function nW(){}var Lu=nW;var iW=Qx?function(t){return Qx.get(t)}:Lu,Uu=iW;var oW={},Zx=oW;var sW=Object.prototype,aW=sW.hasOwnProperty;function cW(t){for(var e=t.name+"",r=Zx[e],n=aW.call(Zx,e)?r.length:0;n--;){var i=r[n],o=i.func;if(o==null||o==t)return i.name}return e}var Bs=cW;function Vu(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}Vu.prototype=Ou(Us.prototype);Vu.prototype.constructor=Vu;var Ki=Vu;function lW(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var Qi=lW;function pW(t){if(t instanceof Vs)return t.clone();var e=new Ki(t.__wrapped__,t.__chain__);return e.__actions__=Qi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var J0=pW;var uW=Object.prototype,fW=uW.hasOwnProperty;function Bu(t){if(Jt(t)&&!Be(t)&&!(t instanceof Vs)){if(t instanceof Ki)return t;if(fW.call(t,"__wrapped__"))return J0(t)}return new Ki(t)}Bu.prototype=Us.prototype;Bu.prototype.constructor=Bu;var eE=Bu;function dW(t){var e=Bs(t),r=eE[e];if(typeof r!="function"||!(e in Vs.prototype))return!1;if(t===r)return!0;var n=Uu(r);return!!n&&t===n[0]}var Yx=dW;var mW=800,hW=16,gW=Date.now;function yW(t){var e=0,r=0;return function(){var n=gW(),i=hW-(n-r);if(r=n,i>0){if(++e>=mW)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var tE=yW;function xW(t){return function(){return t}}var rE=xW;var TW=function(){try{var t=mr(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Hs=TW;var SW=Hs?function(t,e){return Hs(t,"toString",{configurable:!0,enumerable:!1,value:rE(e),writable:!0})}:Ht,nE=SW;var vW=tE(nE),Hu=vW;function bW(t,e,r,n){for(var i=t.length,o=r+(n?1:-1);n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}var Wu=bW;function wW(t){return t!==t}var iE=wW;function _W(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}var oE=_W;function EW(t,e,r){return e===e?oE(t,e,r):Wu(t,iE,r)}var $u=EW;function RW(t,e){var r=t==null?0:t.length;return!!r&&$u(t,e,0)>-1}var sE=RW;var kW=9007199254740991,PW=/^(?:0|[1-9]\d*)$/;function MW(t,e){var r=typeof t;return e=e??kW,!!e&&(r=="number"||r!="symbol"&&PW.test(t))&&t>-1&&t%1==0&&t<e}var Ws=MW;function AW(t,e,r){e=="__proto__"&&Hs?Hs(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var aE=AW;function DW(t,e){return t===e||t!==t&&e!==e}var $s=DW;var cE=Math.max;function IW(t,e,r){return e=cE(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,o=cE(n.length-e,0),a=Array(o);++i<o;)a[i]=n[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=n[i];return l[e]=r(a),X0(t,this,l)}}var ju=IW;function FW(t,e){return Hu(ju(t,e,Ht),t+"")}var js=FW;var CW=9007199254740991;function OW(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=CW}var qs=OW;function NW(t){return t!=null&&qs(t.length)&&!Fu(t)}var $n=NW;function LW(t,e,r){if(!Or(r))return!1;var n=typeof e;return(n=="number"?$n(r)&&Ws(e,r.length):n=="string"&&e in r)?$s(r[e],t):!1}var Vo=LW;var UW=Object.prototype;function VW(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||UW;return t===r}var lE=VW;function BW(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var qu=BW;var HW="[object Arguments]";function WW(t){return Jt(t)&&kn(t)==HW}var Xx=WW;var pE=Object.prototype,$W=pE.hasOwnProperty,jW=pE.propertyIsEnumerable,qW=Xx(function(){return arguments}())?Xx:function(t){return Jt(t)&&$W.call(t,"callee")&&!jW.call(t,"callee")},zs=qW;function zW(){return!1}var uE=zW;var mE=typeof exports=="object"&&exports&&!exports.nodeType&&exports,fE=mE&&typeof module=="object"&&module&&!module.nodeType&&module,GW=fE&&fE.exports===mE,dE=GW?kt.Buffer:void 0,KW=dE?dE.isBuffer:void 0,QW=KW||uE,Oc=QW;var ZW="[object Arguments]",YW="[object Array]",XW="[object Boolean]",JW="[object Date]",e$="[object Error]",t$="[object Function]",r$="[object Map]",n$="[object Number]",i$="[object Object]",o$="[object RegExp]",s$="[object Set]",a$="[object String]",c$="[object WeakMap]",l$="[object ArrayBuffer]",p$="[object DataView]",u$="[object Float32Array]",f$="[object Float64Array]",d$="[object Int8Array]",m$="[object Int16Array]",h$="[object Int32Array]",g$="[object Uint8Array]",y$="[object Uint8ClampedArray]",x$="[object Uint16Array]",T$="[object Uint32Array]",Xe={};Xe[u$]=Xe[f$]=Xe[d$]=Xe[m$]=Xe[h$]=Xe[g$]=Xe[y$]=Xe[x$]=Xe[T$]=!0;Xe[ZW]=Xe[YW]=Xe[l$]=Xe[XW]=Xe[p$]=Xe[JW]=Xe[e$]=Xe[t$]=Xe[r$]=Xe[n$]=Xe[i$]=Xe[o$]=Xe[s$]=Xe[a$]=Xe[c$]=!1;function S$(t){return Jt(t)&&qs(t.length)&&!!Xe[kn(t)]}var hE=S$;function v$(t){return function(e){return t(e)}}var Gs=v$;var gE=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Nc=gE&&typeof module=="object"&&module&&!module.nodeType&&module,b$=Nc&&Nc.exports===gE,Jx=b$&&Du.process,w$=function(){try{var t=Nc&&Nc.require&&Nc.require("util").types;return t||Jx&&Jx.binding&&Jx.binding("util")}catch{}}(),eT=w$;var yE=eT&&eT.isTypedArray,_$=yE?Gs(yE):hE,zu=_$;var E$=Object.prototype,R$=E$.hasOwnProperty;function k$(t,e){var r=Be(t),n=!r&&zs(t),i=!r&&!n&&Oc(t),o=!r&&!n&&!i&&zu(t),a=r||n||i||o,l=a?qu(t.length,String):[],p=l.length;for(var u in t)(e||R$.call(t,u))&&!(a&&(u=="length"||i&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Ws(u,p)))&&l.push(u);return l}var xE=k$;function P$(t,e){return function(r){return t(e(r))}}var TE=P$;var M$=TE(Object.keys,Object),SE=M$;var A$=Object.prototype,D$=A$.hasOwnProperty;function I$(t){if(!lE(t))return SE(t);var e=[];for(var r in Object(t))D$.call(t,r)&&r!="constructor"&&e.push(r);return e}var vE=I$;function F$(t){return $n(t)?xE(t):vE(t)}var Zi=F$;var C$=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,O$=/^\w*$/;function N$(t,e){if(Be(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||Cr(t)?!0:O$.test(t)||!C$.test(t)||e!=null&&t in Object(e)}var Ks=N$;var L$=mr(Object,"create"),Ti=L$;function U$(){this.__data__=Ti?Ti(null):{},this.size=0}var bE=U$;function V$(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var wE=V$;var B$="__lodash_hash_undefined__",H$=Object.prototype,W$=H$.hasOwnProperty;function $$(t){var e=this.__data__;if(Ti){var r=e[t];return r===B$?void 0:r}return W$.call(e,t)?e[t]:void 0}var _E=$$;var j$=Object.prototype,q$=j$.hasOwnProperty;function z$(t){var e=this.__data__;return Ti?e[t]!==void 0:q$.call(e,t)}var EE=z$;var G$="__lodash_hash_undefined__";function K$(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Ti&&e===void 0?G$:e,this}var RE=K$;function Qs(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Qs.prototype.clear=bE;Qs.prototype.delete=wE;Qs.prototype.get=_E;Qs.prototype.has=EE;Qs.prototype.set=RE;var tT=Qs;function Q$(){this.__data__=[],this.size=0}var kE=Q$;function Z$(t,e){for(var r=t.length;r--;)if($s(t[r][0],e))return r;return-1}var Yi=Z$;var Y$=Array.prototype,X$=Y$.splice;function J$(t){var e=this.__data__,r=Yi(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():X$.call(e,r,1),--this.size,!0}var PE=J$;function ej(t){var e=this.__data__,r=Yi(e,t);return r<0?void 0:e[r][1]}var ME=ej;function tj(t){return Yi(this.__data__,t)>-1}var AE=tj;function rj(t,e){var r=this.__data__,n=Yi(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var DE=rj;function Zs(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Zs.prototype.clear=kE;Zs.prototype.delete=PE;Zs.prototype.get=ME;Zs.prototype.has=AE;Zs.prototype.set=DE;var Xi=Zs;var nj=mr(kt,"Map"),Ji=nj;function ij(){this.size=0,this.__data__={hash:new tT,map:new(Ji||Xi),string:new tT}}var IE=ij;function oj(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var FE=oj;function sj(t,e){var r=t.__data__;return FE(e)?r[typeof e=="string"?"string":"hash"]:r.map}var eo=sj;function aj(t){var e=eo(this,t).delete(t);return this.size-=e?1:0,e}var CE=aj;function cj(t){return eo(this,t).get(t)}var OE=cj;function lj(t){return eo(this,t).has(t)}var NE=lj;function pj(t,e){var r=eo(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var LE=pj;function Ys(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Ys.prototype.clear=IE;Ys.prototype.delete=CE;Ys.prototype.get=OE;Ys.prototype.has=NE;Ys.prototype.set=LE;var Bo=Ys;var uj="Expected a function";function rT(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(uj);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=t.apply(this,n);return r.cache=o.set(i,a)||o,a};return r.cache=new(rT.Cache||Bo),r}rT.Cache=Bo;var Lc=rT;var fj=500;function dj(t){var e=Lc(t,function(n){return r.size===fj&&r.clear(),n}),r=e.cache;return e}var UE=dj;var mj=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,hj=/\\(\\)?/g,gj=UE(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(mj,function(r,n,i,o){e.push(i?o.replace(hj,"$1"):n||r)}),e}),VE=gj;function yj(t){return t==null?"":H0(t)}var Pn=yj;function xj(t,e){return Be(t)?t:Ks(t,e)?[t]:VE(Pn(t))}var Gu=xj;var Tj=1/0;function Sj(t){if(typeof t=="string"||Cr(t))return t;var e=t+"";return e=="0"&&1/t==-Tj?"-0":e}var to=Sj;function vj(t,e){e=Gu(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[to(e[r++])];return r&&r==n?t:void 0}var Xs=vj;function bj(t,e,r){var n=t==null?void 0:Xs(t,e);return n===void 0?r:n}var Ho=bj;function wj(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var Js=wj;var BE=Xt?Xt.isConcatSpreadable:void 0;function _j(t){return Be(t)||zs(t)||!!(BE&&t&&t[BE])}var HE=_j;function WE(t,e,r,n,i){var o=-1,a=t.length;for(r||(r=HE),i||(i=[]);++o<a;){var l=t[o];e>0&&r(l)?e>1?WE(l,e-1,r,n,i):Js(i,l):n||(i[i.length]=l)}return i}var ea=WE;function Ej(t){var e=t==null?0:t.length;return e?ea(t,1):[]}var Je=Ej;function Rj(t){return Hu(ju(t,void 0,Je),t+"")}var $E=Rj;function kj(t){return function(e){return t?.[e]}}var jE=kj;var Pj={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Mj=jE(Pj),qE=Mj;var Aj=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Dj="\\u0300-\\u036f",Ij="\\ufe20-\\ufe2f",Fj="\\u20d0-\\u20ff",Cj=Dj+Ij+Fj,Oj="["+Cj+"]",Nj=RegExp(Oj,"g");function Lj(t){return t=Pn(t),t&&t.replace(Aj,qE).replace(Nj,"")}var nT=Lj;function Uj(){this.__data__=new Xi,this.size=0}var zE=Uj;function Vj(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var GE=Vj;function Bj(t){return this.__data__.get(t)}var KE=Bj;function Hj(t){return this.__data__.has(t)}var QE=Hj;var Wj=200;function $j(t,e){var r=this.__data__;if(r instanceof Xi){var n=r.__data__;if(!Ji||n.length<Wj-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Bo(n)}return r.set(t,e),this.size=r.size,this}var ZE=$j;function ta(t){var e=this.__data__=new Xi(t);this.size=e.size}ta.prototype.clear=zE;ta.prototype.delete=GE;ta.prototype.get=KE;ta.prototype.has=QE;ta.prototype.set=ZE;var ra=ta;function jj(t,e){for(var r=-1,n=t==null?0:t.length,i=0,o=[];++r<n;){var a=t[r];e(a,r,t)&&(o[i++]=a)}return o}var Ku=jj;function qj(){return[]}var YE=qj;var zj=Object.prototype,Gj=zj.propertyIsEnumerable,XE=Object.getOwnPropertySymbols,Kj=XE?function(t){return t==null?[]:(t=Object(t),Ku(XE(t),function(e){return Gj.call(t,e)}))}:YE,JE=Kj;function Qj(t,e,r){var n=e(t);return Be(t)?n:Js(n,r(t))}var eR=Qj;function Zj(t){return eR(t,Zi,JE)}var iT=Zj;var Yj=mr(kt,"DataView"),Qu=Yj;var Xj=mr(kt,"Promise"),Zu=Xj;var Jj=mr(kt,"Set"),ro=Jj;var tR="[object Map]",eq="[object Object]",rR="[object Promise]",nR="[object Set]",iR="[object WeakMap]",oR="[object DataView]",tq=xi(Qu),rq=xi(Ji),nq=xi(Zu),iq=xi(ro),oq=xi(Uo),Wo=kn;(Qu&&Wo(new Qu(new ArrayBuffer(1)))!=oR||Ji&&Wo(new Ji)!=tR||Zu&&Wo(Zu.resolve())!=rR||ro&&Wo(new ro)!=nR||Uo&&Wo(new Uo)!=iR)&&(Wo=function(t){var e=kn(t),r=e==eq?t.constructor:void 0,n=r?xi(r):"";if(n)switch(n){case tq:return oR;case rq:return tR;case nq:return rR;case iq:return nR;case oq:return iR}return e});var oT=Wo;var sq=kt.Uint8Array,sT=sq;function aq(){var t=arguments.length;if(!t)return[];for(var e=Array(t-1),r=arguments[0],n=t;n--;)e[n-1]=arguments[n];return Js(Be(r)?Qi(r):[r],ea(e,1))}var Uc=aq;var cq="__lodash_hash_undefined__";function lq(t){return this.__data__.set(t,cq),this}var sR=lq;function pq(t){return this.__data__.has(t)}var aR=pq;function Yu(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new Bo;++e<r;)this.add(t[e])}Yu.prototype.add=Yu.prototype.push=sR;Yu.prototype.has=aR;var Xu=Yu;function uq(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var cR=uq;function fq(t,e){return t.has(e)}var Ju=fq;var dq=1,mq=2;function hq(t,e,r,n,i,o){var a=r&dq,l=t.length,p=e.length;if(l!=p&&!(a&&p>l))return!1;var u=o.get(t),d=o.get(e);if(u&&d)return u==e&&d==t;var h=-1,g=!0,x=r&mq?new Xu:void 0;for(o.set(t,e),o.set(e,t);++h<l;){var _=t[h],w=e[h];if(n)var C=a?n(w,_,h,e,t,o):n(_,w,h,t,e,o);if(C!==void 0){if(C)continue;g=!1;break}if(x){if(!cR(e,function(M,U){if(!Ju(x,U)&&(_===M||i(_,M,r,n,o)))return x.push(U)})){g=!1;break}}else if(!(_===w||i(_,w,r,n,o))){g=!1;break}}return o.delete(t),o.delete(e),g}var ef=hq;function gq(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}var lR=gq;function yq(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var na=yq;var xq=1,Tq=2,Sq="[object Boolean]",vq="[object Date]",bq="[object Error]",wq="[object Map]",_q="[object Number]",Eq="[object RegExp]",Rq="[object Set]",kq="[object String]",Pq="[object Symbol]",Mq="[object ArrayBuffer]",Aq="[object DataView]",pR=Xt?Xt.prototype:void 0,aT=pR?pR.valueOf:void 0;function Dq(t,e,r,n,i,o,a){switch(r){case Aq:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Mq:return!(t.byteLength!=e.byteLength||!o(new sT(t),new sT(e)));case Sq:case vq:case _q:return $s(+t,+e);case bq:return t.name==e.name&&t.message==e.message;case Eq:case kq:return t==e+"";case wq:var l=lR;case Rq:var p=n&xq;if(l||(l=na),t.size!=e.size&&!p)return!1;var u=a.get(t);if(u)return u==e;n|=Tq,a.set(t,e);var d=ef(l(t),l(e),n,i,o,a);return a.delete(t),d;case Pq:if(aT)return aT.call(t)==aT.call(e)}return!1}var uR=Dq;var Iq=1,Fq=Object.prototype,Cq=Fq.hasOwnProperty;function Oq(t,e,r,n,i,o){var a=r&Iq,l=iT(t),p=l.length,u=iT(e),d=u.length;if(p!=d&&!a)return!1;for(var h=p;h--;){var g=l[h];if(!(a?g in e:Cq.call(e,g)))return!1}var x=o.get(t),_=o.get(e);if(x&&_)return x==e&&_==t;var w=!0;o.set(t,e),o.set(e,t);for(var C=a;++h<p;){g=l[h];var M=t[g],U=e[g];if(n)var Z=a?n(U,M,g,e,t,o):n(M,U,g,t,e,o);if(!(Z===void 0?M===U||i(M,U,r,n,o):Z)){w=!1;break}C||(C=g=="constructor")}if(w&&!C){var ne=t.constructor,ge=e.constructor;ne!=ge&&"constructor"in t&&"constructor"in e&&!(typeof ne=="function"&&ne instanceof ne&&typeof ge=="function"&&ge instanceof ge)&&(w=!1)}return o.delete(t),o.delete(e),w}var fR=Oq;var Nq=1,dR="[object Arguments]",mR="[object Array]",tf="[object Object]",Lq=Object.prototype,hR=Lq.hasOwnProperty;function Uq(t,e,r,n,i,o){var a=Be(t),l=Be(e),p=a?mR:oT(t),u=l?mR:oT(e);p=p==dR?tf:p,u=u==dR?tf:u;var d=p==tf,h=u==tf,g=p==u;if(g&&Oc(t)){if(!Oc(e))return!1;a=!0,d=!1}if(g&&!d)return o||(o=new ra),a||zu(t)?ef(t,e,r,n,i,o):uR(t,e,p,r,n,i,o);if(!(r&Nq)){var x=d&&hR.call(t,"__wrapped__"),_=h&&hR.call(e,"__wrapped__");if(x||_){var w=x?t.value():t,C=_?e.value():e;return o||(o=new ra),i(w,C,r,n,o)}}return g?(o||(o=new ra),fR(t,e,r,n,i,o)):!1}var gR=Uq;function yR(t,e,r,n,i){return t===e?!0:t==null||e==null||!Jt(t)&&!Jt(e)?t!==t&&e!==e:gR(t,e,r,n,yR,i)}var ia=yR;var Vq=1,Bq=2;function Hq(t,e,r,n){var i=r.length,o=i,a=!n;if(t==null)return!o;for(t=Object(t);i--;){var l=r[i];if(a&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++i<o;){l=r[i];var p=l[0],u=t[p],d=l[1];if(a&&l[2]){if(u===void 0&&!(p in t))return!1}else{var h=new ra;if(n)var g=n(u,d,p,t,e,h);if(!(g===void 0?ia(d,u,Vq|Bq,n,h):g))return!1}}return!0}var xR=Hq;function Wq(t){return t===t&&!Or(t)}var rf=Wq;function $q(t){for(var e=Zi(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,rf(i)]}return e}var TR=$q;function jq(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var nf=jq;function qq(t){var e=TR(t);return e.length==1&&e[0][2]?nf(e[0][0],e[0][1]):function(r){return r===t||xR(r,t,e)}}var SR=qq;function zq(t,e){return t!=null&&e in Object(t)}var vR=zq;function Gq(t,e,r){e=Gu(e,t);for(var n=-1,i=e.length,o=!1;++n<i;){var a=to(e[n]);if(!(o=t!=null&&r(t,a)))break;t=t[a]}return o||++n!=i?o:(i=t==null?0:t.length,!!i&&qs(i)&&Ws(a,i)&&(Be(t)||zs(t)))}var bR=Gq;function Kq(t,e){return t!=null&&bR(t,e,vR)}var wR=Kq;var Qq=1,Zq=2;function Yq(t,e){return Ks(t)&&rf(e)?nf(to(t),e):function(r){var n=Ho(r,t);return n===void 0&&n===e?wR(r,t):ia(e,n,Qq|Zq)}}var _R=Yq;function Xq(t){return function(e){return e?.[t]}}var of=Xq;function Jq(t){return function(e){return Xs(e,t)}}var ER=Jq;function e3(t){return Ks(t)?of(to(t)):ER(t)}var RR=e3;function t3(t){return typeof t=="function"?t:t==null?Ht:typeof t=="object"?Be(t)?_R(t[0],t[1]):SR(t):RR(t)}var jn=t3;function r3(t,e,r,n){for(var i=-1,o=t==null?0:t.length;++i<o;){var a=t[i];e(n,a,r(a),t)}return n}var kR=r3;function n3(t){return function(e,r,n){for(var i=-1,o=Object(e),a=n(e),l=a.length;l--;){var p=a[t?l:++i];if(r(o[p],p,o)===!1)break}return e}}var PR=n3;var i3=PR(),MR=i3;function o3(t,e){return t&&MR(t,e,Zi)}var AR=o3;function s3(t,e){return function(r,n){if(r==null)return r;if(!$n(r))return t(r,n);for(var i=r.length,o=e?i:-1,a=Object(r);(e?o--:++o<i)&&n(a[o],o,a)!==!1;);return r}}var DR=s3;var a3=DR(AR),sf=a3;function c3(t,e,r,n){return sf(t,function(i,o,a){e(n,i,r(i),a)}),n}var IR=c3;function l3(t,e){return function(r,n){var i=Be(r)?kR:IR,o=e?e():{};return i(r,t,jn(n,2),o)}}var FR=l3;function p3(t){return Jt(t)&&$n(t)}var CR=p3;function u3(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}var OR=u3;function f3(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var af=f3;var NR=/[\\^$.*+?()[\]{}|]/g,d3=RegExp(NR.source);function m3(t){return t=Pn(t),t&&d3.test(t)?t.replace(NR,"\\$&"):t}var Nr=m3;var h3=Math.max,g3=Math.min;function y3(t,e,r){var n=t==null?0:t.length;if(!n)return-1;var i=n-1;return r!==void 0&&(i=Iu(r),i=r<0?h3(n+i,0):g3(i,n-1)),Wu(t,jn(e,3),i,!0)}var Vc=y3;function x3(t,e){var r=-1,n=$n(t)?Array(t.length):[];return sf(t,function(i,o,a){n[++r]=e(i,o,a)}),n}var LR=x3;var T3="Expected a function",S3=8,v3=32,b3=128,w3=256;function _3(t){return $E(function(e){var r=e.length,n=r,i=Ki.prototype.thru;for(t&&e.reverse();n--;){var o=e[n];if(typeof o!="function")throw new TypeError(T3);if(i&&!a&&Bs(o)=="wrapper")var a=new Ki([],!0)}for(n=a?n:r;++n<r;){o=e[n];var l=Bs(o),p=l=="wrapper"?Uu(o):void 0;p&&Yx(p[0])&&p[1]==(b3|S3|v3|w3)&&!p[4].length&&p[9]==1?a=a[Bs(p[0])].apply(a,p[3]):a=o.length==1&&Yx(o)?a[l]():a.thru(o)}return function(){var u=arguments,d=u[0];if(a&&u.length==1&&Be(d))return a.plant(d).value();for(var h=0,g=r?e[h].apply(this,u):d;++h<r;)g=e[h].call(this,g);return g}})}var UR=_3;var E3=UR(),cT=E3;var R3=Object.prototype,k3=R3.hasOwnProperty,P3=FR(function(t,e,r){k3.call(t,r)?t[r].push(e):aE(t,r,[e])}),lT=P3;function M3(t,e){return t>e}var VR=M3;function A3(t,e){return rn(e,function(r){return t[r]})}var BR=A3;function D3(t){return t==null?[]:BR(t,Zi(t))}var HR=D3;function I3(t,e){return ia(t,e)}var Si=I3;function F3(t,e){return t<e}var WR=F3;function C3(t,e,r){for(var n=-1,i=t.length;++n<i;){var o=t[n],a=e(o);if(a!=null&&(l===void 0?a===a&&!Cr(a):r(a,l)))var l=a,p=o}return p}var cf=C3;function O3(t,e){return t&&t.length?cf(t,jn(e,2),VR):void 0}var pT=O3;function N3(t,e){for(var r,n=-1,i=t.length;++n<i;){var o=e(t[n]);o!==void 0&&(r=r===void 0?o:r+o)}return r}var $R=N3;function L3(t){return t&&t.length?cf(t,Ht,WR):void 0}var uT=L3;function U3(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}var jR=U3;function V3(t,e){if(t!==e){var r=t!==void 0,n=t===null,i=t===t,o=Cr(t),a=e!==void 0,l=e===null,p=e===e,u=Cr(e);if(!l&&!u&&!o&&t>e||o&&a&&p&&!l&&!u||n&&a&&p||!r&&p||!i)return 1;if(!n&&!o&&!u&&t<e||u&&r&&i&&!n&&!o||l&&r&&i||!a&&i||!p)return-1}return 0}var qR=V3;function B3(t,e,r){for(var n=-1,i=t.criteria,o=e.criteria,a=i.length,l=r.length;++n<a;){var p=qR(i[n],o[n]);if(p){if(n>=l)return p;var u=r[n];return p*(u=="desc"?-1:1)}}return t.index-e.index}var zR=B3;function H3(t,e,r){e.length?e=rn(e,function(o){return Be(o)?function(a){return Xs(a,o.length===1?o[0]:o)}:o}):e=[Ht];var n=-1;e=rn(e,Gs(jn));var i=LR(t,function(o,a,l){var p=rn(e,function(u){return u(o)});return{criteria:p,index:++n,value:o}});return jR(i,function(o,a){return zR(o,a,r)})}var GR=H3;var W3=9007199254740991,$3=Math.floor;function j3(t,e){var r="";if(!t||e<1||e>W3)return r;do e%2&&(r+=t),e=$3(e/2),e&&(t+=t);while(e);return r}var KR=j3;function q3(t,e,r,n){for(var i=r-1,o=t.length;++i<o;)if(n(t[i],e))return i;return-1}var QR=q3;var z3=Array.prototype,ZR=z3.splice;function G3(t,e,r,n){var i=n?QR:$u,o=-1,a=e.length,l=t;for(t===e&&(e=Qi(e)),r&&(l=rn(t,Gs(r)));++o<a;)for(var p=0,u=e[o],d=r?r(u):u;(p=i(l,d,p,n))>-1;)l!==t&&ZR.call(l,p,1),ZR.call(t,p,1);return t}var YR=G3;function K3(t,e){return t&&t.length&&e&&e.length?YR(t,e):t}var XR=K3;var Q3=js(XR),er=Q3;var Z3=Math.floor,Y3=Math.random;function X3(t,e){return t+Z3(Y3()*(e-t+1))}var JR=X3;var J3=Math.ceil,ez=Math.max;function tz(t,e,r,n){for(var i=-1,o=ez(J3((e-t)/(r||1)),0),a=Array(o);o--;)a[n?o:++i]=t,t+=r;return a}var ek=tz;function rz(t){return function(e,r,n){return n&&typeof n!="number"&&Vo(e,r,n)&&(r=n=void 0),e=Ls(e),r===void 0?(r=e,e=0):r=Ls(r),n=n===void 0?e<r?1:-1:Ls(n),ek(e,r,n,t)}}var tk=rz;var nz=tk(),fT=nz;function iz(t,e,r){return(r?Vo(t,e,r):e===void 0)?e=1:e=Iu(e),KR(Pn(t),e)}var dT=iz;function oz(t,e){var r=-1,n=t.length,i=n-1;for(e=e===void 0?n:e;++r<e;){var o=JR(r,i),a=t[o];t[o]=t[r],t[r]=a}return t.length=e,t}var lf=oz;function sz(t){return lf(Qi(t))}var rk=sz;function az(t){return lf(HR(t))}var nk=az;function cz(t){var e=Be(t)?rk:nk;return e(t)}var mT=cz;var lz=js(function(t,e){if(t==null)return[];var r=e.length;return r>1&&Vo(t,e[0],e[1])?e=[]:r>2&&Vo(e[0],e[1],e[2])&&(e=[e[0]]),GR(t,ea(e,1),[])}),hT=lz;function pz(t,e){return t&&t.length?$R(t,jn(e,2)):0}var pf=pz;var uz=1/0,fz=ro&&1/na(new ro([,-0]))[1]==uz?function(t){return new ro(t)}:Lu,ik=fz;var dz=200;function mz(t,e,r){var n=-1,i=sE,o=t.length,a=!0,l=[],p=l;if(r)a=!1,i=OR;else if(o>=dz){var u=e?null:ik(t);if(u)return na(u);a=!1,i=Ju,p=new Xu}else p=e?[]:l;e:for(;++n<o;){var d=t[n],h=e?e(d):d;if(d=r||d!==0?d:0,a&&h===h){for(var g=p.length;g--;)if(p[g]===h)continue e;e&&p.push(h),l.push(d)}else i(p,h,r)||(p!==l&&p.push(h),l.push(d))}return l}var uf=mz;function hz(t){return t&&t.length?uf(t):[]}var vi=hz;function gz(t,e){return e=typeof e=="function"?e:void 0,t&&t.length?uf(t,void 0,e):[]}var Bc=gz;var yz=Math.max;function xz(t){if(!(t&&t.length))return[];var e=0;return t=Ku(t,function(r){if(CR(r))return e=yz(r.length,e),!0}),qu(e,function(r){return rn(t,of(r))})}var ok=xz;var Tz=js(ok),St=Tz;var ff=class{constructor(){this.commands={clipboardPaste:void 0,clipboardCopy:void 0,toggleLineComment:void 0,indentLine:void 0,outdentLine:void 0,rename:void 0,quickFix:void 0,revealDefinition:void 0,revealTypeDefinition:void 0,showHover:void 0,showDebugHover:void 0,extractVariable:void 0,fold:void 0,highlight:{acceptsLocation:!0},unfold:void 0,showReferences:void 0,insertLineAfter:void 0}}};var Hc=class{constructor(){this.clipboardContents=""}async readText(){return this.clipboardContents}async writeText(e){this.clipboardContents=e}};var Wt=class{constructor(){this.listeners=[];this.notifyListeners=(...e)=>{this.listeners.forEach(r=>r(...e))};this.registerListener=this.registerListener.bind(this)}registerListener(e){return this.listeners.push(e),{dispose:()=>{er(this.listeners,e)}}}};var df={tokenHatSplittingMode:{preserveCase:!1,lettersToPreserve:[],symbolsToPreserve:[]},wordSeparators:["_"],decorationDebounceDelayMs:50,experimental:{snippetsDir:void 0,hatStability:"balanced",keyboardTargetFollowsSelection:!1},commandHistory:!1,debug:!1};var Wc=class{constructor(){this.notifier=new Wt;this.mocks={...df};this.scopes=[];this.onDidChangeConfiguration=this.notifier.registerListener;this.onDidChangeConfiguration=this.onDidChangeConfiguration.bind(this)}getOwnConfiguration(e,r){if(r!=null){for(let{scope:n,values:i}of this.scopes)if(vz(n,r))return Ho(i,e)??Ho(this.mocks,e)}return Ho(this.mocks,e)}mockConfiguration(e,r){this.mocks[e]=r,this.notifier.notifyListeners()}mockConfigurationScope(e,r,n=!1){this.scopes.push({scope:e,values:r}),n||this.notifier.notifyListeners()}};function vz(t,e){return t.languageId===e.languageId}var mf={hideInferenceWarning:!1,tutorialProgress:{}};var $c=class{constructor(){this.data={...mf}}get(e){return this.data[e]}set(e,r){return this.data[e]=r,Promise.resolve()}};var jc=class{async showMessage(e,r,n,...i){}};var hf=class{constructor(){this.configuration=new Wc;this.messages=new jc;this.keyValueStore=new $c;this.clipboard=new Hc;this.capabilities=new ff;this.runMode="test";this.cursorlessVersion="0.0.0";this.workspaceFolders=void 0;this.disposables=[];this.quickPickReturnValue=void 0;this.onDidOpenTextDocument=oa;this.onDidCloseTextDocument=oa;this.onDidChangeActiveTextEditor=oa;this.onDidChangeVisibleTextEditors=oa;this.onDidChangeTextEditorSelection=oa;this.onDidChangeTextEditorVisibleRanges=oa}async flashRanges(e){}async setHighlightRanges(e,r,n){}mockAssetsRoot(e){this.assetsRoot_=e}get assetsRoot(){if(this.assetsRoot_==null)throw Error("Field `assetsRoot` has not yet been mocked");return this.assetsRoot_}get activeTextEditor(){throw Error("Not implemented")}get activeEditableTextEditor(){throw Error("Not implemented")}get visibleTextEditors(){throw Error("Not implemented")}getEditableTextEditor(e){throw Error("Not implemented")}findInDocument(e,r){throw Error("Not implemented")}findInWorkspace(e){throw Error("Not implemented")}openTextDocument(e){throw Error("Not implemented")}openUntitledTextDocument(e){throw Error("Not implemented")}setQuickPickReturnValue(e){this.quickPickReturnValue=e}async showQuickPick(e,r){return this.quickPickReturnValue}showInputBox(e){throw Error("Not implemented")}executeCommand(e,...r){throw new Error("Method not implemented.")}onDidChangeTextDocument(e){throw Error("Not implemented")}disposeOnExit(...e){return this.disposables.push(...e),()=>er(this.disposables,...e)}exit(){this.disposables.forEach(e=>e.dispose())}};function oa(){return{dispose(){}}}var ce=class t{constructor(e,r){this.line=e,this.character=r}isEqual(e){return this.line===e.line&&this.character===e.character}isBefore(e){return this.line<e.line?!0:this.line>e.line?!1:this.character<e.character}isAfter(e){return this.line>e.line?!0:this.line<e.line?!1:this.character>e.character}isBeforeOrEqual(e){return this.isEqual(e)||this.isBefore(e)}isAfterOrEqual(e){return this.isEqual(e)||this.isAfter(e)}compareTo(e){return this.isBefore(e)?-1:this.isAfter(e)?1:0}with(e,r){return new t(e??this.line,r??this.character)}translate(e,r){return new t(this.line+(e??0),this.character+(r??0))}toEmptyRange(){return new W(this,this)}concise(){return`${this.line}:${this.character}`}toString(){return this.concise()}};function sk(t,e,r){return t.positionAt(t.offsetAt(e)+r)}var W=class t{constructor(...e){let[r,n]=e.length===2?e:[new ce(e[0],e[1]),new ce(e[2],e[3])];r.isBefore(n)?(this.start=r,this.end=n):(this.start=n,this.end=r)}get isEmpty(){return this.start.isEqual(this.end)}get isSingleLine(){return this.start.line===this.end.line}isRangeEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}contains(e){let[r,n]=e instanceof ce?[e,e]:[e.start,e.end];return r.isAfterOrEqual(this.start)&&n.isBeforeOrEqual(this.end)}intersection(e){let r=this.start.isAfter(e.start)?this.start:e.start,n=this.end.isBefore(e.end)?this.end:e.end;return r.isBeforeOrEqual(n)?new t(r,n):void 0}union(e){return new t(this.start.isBefore(e.start)?this.start:e.start,this.end.isAfter(e.end)?this.end:e.end)}with(e,r){return new t(e??this.start,r??this.end)}toSelection(e){return e?new Te(this.end,this.start):new Te(this.start,this.end)}concise(){return`${this.start.concise()}-${this.end.concise()}`}toString(){return this.concise()}};function bz(t){let{source:e,flags:r}=t;return new RegExp(`(${e})$`,r.replace("m",""))}function wz(t){let{source:e,flags:r}=t;return new RegExp(`^(${e})`,r.replace("m",""))}function ak(t){let e=new Map;function r(n){let i=e.get(n);return i==null&&(i=t(n),e.set(n,i)),i}return r}var gf=ak(bz),yf=ak(wz);function nn(t,e,r){return e.lastIndex=0,Array.from(t.matchAll(e),r)}function qc(t,e){return t.lastIndex=0,t.test(e)}function ck(t,e){return t.lastIndex=0,e.match(t)}function zc(t,e){return nn(t,e,r=>({index:r.index,text:r[0]}))}var sa=class{constructor(e){this.original=e;this.configuration=e.configuration,this.keyValueStore=e.keyValueStore,this.clipboard=e.clipboard,this.messages=e.messages,this.capabilities=e.capabilities}flashRanges(e){return this.original.flashRanges(e)}setHighlightRanges(e,r,n){return this.original.setHighlightRanges(e,r,n)}onDidOpenTextDocument(e,r,n){return this.original.onDidOpenTextDocument(e,r,n)}onDidCloseTextDocument(e,r,n){return this.original.onDidCloseTextDocument(e,r,n)}onDidChangeActiveTextEditor(e,r,n){return this.original.onDidChangeActiveTextEditor(e,r,n)}onDidChangeVisibleTextEditors(e,r,n){return this.original.onDidChangeVisibleTextEditors(e,r,n)}onDidChangeTextEditorSelection(e,r,n){return this.original.onDidChangeTextEditorSelection(e,r,n)}onDidChangeTextEditorVisibleRanges(e,r,n){return this.original.onDidChangeTextEditorVisibleRanges(e,r,n)}get activeTextEditor(){return this.original.activeTextEditor}get activeEditableTextEditor(){return this.original.activeEditableTextEditor}get visibleTextEditors(){return this.original.visibleTextEditors}get cursorlessVersion(){return this.original.cursorlessVersion}get assetsRoot(){return this.original.assetsRoot}get runMode(){return this.original.runMode}get workspaceFolders(){return this.original.workspaceFolders}findInDocument(e,r){return this.original.findInDocument(e,r)}findInWorkspace(e){return this.original.findInWorkspace(e)}openTextDocument(e){return this.original.openTextDocument(e)}openUntitledTextDocument(e){return this.original.openUntitledTextDocument(e)}showQuickPick(e,r){return this.original.showQuickPick(e,r)}showInputBox(e){return this.original.showInputBox(e)}getEditableTextEditor(e){return this.original.getEditableTextEditor(e)}executeCommand(e,...r){return this.original.executeCommand(e,...r)}onDidChangeTextDocument(e){return this.original.onDidChangeTextDocument(e)}disposeOnExit(...e){return this.original.disposeOnExit(...e)}};var xf=class extends sa{constructor(r,n,i,o){super(r);this.fakeIde=n;this.isSilent=i;this.cursorlessSnippetsDir=o;this.messages=i?n.messages:r.messages,this.configuration=n.configuration,this.keyValueStore=n.keyValueStore,this.initializeConfiguration()}initializeConfiguration(){this.configuration.mockConfigurationScope({languageId:"css"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfigurationScope({languageId:"scss"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfigurationScope({languageId:"shellscript"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfiguration("experimental",{hatStability:this.configuration.getOwnConfiguration("experimental.hatStability"),snippetsDir:this.cursorlessSnippetsDir,keyboardTargetFollowsSelection:!1})}flashRanges(r){return this.isSilent?this.fakeIde.flashRanges(r):super.flashRanges(r)}setHighlightRanges(r,n,i){return this.isSilent?this.fakeIde.setHighlightRanges(r,n,i):super.setHighlightRanges(r,n,i)}async showQuickPick(r,n){return this.isSilent?this.fakeIde.showQuickPick(r,n):super.showQuickPick(r,n)}};function Gc(t,e,r,...n){return t.showMessage("warning",e,r,...n)}function it(t,e,r,...n){return t.showMessage("error",e,r,...n)}var oe=(i=>(i[i.supported=0]="supported",i[i.supportedLegacy=1]="supportedLegacy",i[i.unsupported=2]="unsupported",i[i.notApplicable=3]="notApplicable",i))(oe||{});var{supported:tt,unsupported:$le,notApplicable:lk}=oe,gT={ifStatement:tt,disqualifyDelimiter:tt,"comment.line":tt,"comment.block":tt,"string.singleLine":tt,"textFragment.comment.line":tt,"textFragment.comment.block":tt,"textFragment.string.singleLine":tt,class:tt,className:tt,namedFunction:tt,"name.function":tt,"name.class":tt,"name.field":tt,functionName:tt,"name.argument.formal":tt,"name.argument.formal.iteration":tt,"name.variable":tt,"value.variable":tt,"name.assignment":tt,"value.assignment":tt,"statement.class":tt,"type.class":tt,"type.field":tt,"value.argument.formal":lk,"value.argument.formal.iteration":lk};var{supported:zle,unsupported:Gle,notApplicable:Kle}=oe;var{supported:pk,unsupported:Xle,notApplicable:Jle}=oe,_z={...gT,"value.argument.formal":pk,"value.argument.formal.iteration":pk};var{supported:rpe,unsupported:npe,notApplicable:ipe}=oe;var{supported:Kc,unsupported:Ez,notApplicable:ape}=oe,yT={"comment.block":Kc,"string.singleLine":Kc,"name.iteration.block":Kc,"name.iteration.document":Kc,disqualifyDelimiter:Kc,"comment.line":Ez};var{supported:ppe,unsupported:upe,notApplicable:fpe}=oe;var{supported:hpe,unsupported:gpe,notApplicable:ype}=oe;var{supported:Spe,notApplicable:vpe}=oe;var{supported:_pe,notApplicable:Epe}=oe;var{supported:z,unsupported:Ppe,notApplicable:on}=oe,xT={list:z,map:z,ifStatement:z,regularExpression:z,switchStatementSubject:z,fieldAccess:z,disqualifyDelimiter:z,"textFragment.string.singleLine":z,"textFragment.string.multiLine":z,"textFragment.comment.line":z,"textFragment.comment.block":z,statement:z,"statement.iteration.document":z,"statement.iteration.block":z,class:z,className:z,anonymousFunction:z,namedFunction:z,"namedFunction.iteration.document":z,"namedFunction.method":z,"namedFunction.method.iteration.class":z,"namedFunction.constructor":z,functionName:z,"functionName.iteration.document":z,"functionName.method":z,"functionName.method.iteration.class":z,"functionName.constructor":z,functionCall:z,"functionCall.constructor":z,functionCallee:z,"functionCallee.constructor":z,"argument.actual":z,"argument.actual.iteration":z,"argument.actual.method":z,"argument.actual.method.iteration":z,"argument.actual.constructor":z,"argument.actual.constructor.iteration":z,"argument.formal":z,"argument.formal.iteration":z,"argument.formal.method":z,"argument.formal.method.iteration":z,"argument.formal.constructor":z,"argument.formal.constructor.iteration":z,"comment.line":z,"comment.block":z,"string.singleLine":z,"string.multiLine":z,"branch.if":z,"branch.if.iteration":z,"branch.try":z,"branch.switchCase":z,"branch.switchCase.iteration":z,"branch.ternary":z,"condition.if":z,"condition.while":z,"condition.doWhile":z,"condition.for":z,"condition.ternary":z,"condition.switchCase":z,"name.argument.formal":z,"name.argument.formal.iteration":z,"name.argument.formal.method":z,"name.argument.formal.method.iteration":z,"name.argument.formal.constructor":z,"name.argument.formal.constructor.iteration":z,"name.foreach":z,"name.assignment":z,"name.assignment.pattern":z,"name.variable":z,"name.variable.pattern":z,"name.function":z,"name.method":z,"name.constructor":z,"name.class":z,"name.field":z,"key.mapPair":z,"key.mapPair.iteration":z,"value.argument.formal":z,"value.argument.formal.iteration":z,"value.argument.formal.method":z,"value.argument.formal.method.iteration":z,"value.argument.formal.constructor":z,"value.argument.formal.constructor.iteration":z,"value.mapPair":z,"value.mapPair.iteration":z,"value.assignment":z,"value.variable":z,"value.variable.pattern":z,"value.foreach":z,"value.return":z,"value.return.lambda":z,"value.field":z},TT={element:z,tags:z,startTag:z,endTag:z,attribute:z,"key.attribute":z,"value.attribute":z},Rz={...xT,...TT,"type.variable":on,"type.argument.formal":on,"type.argument.formal.iteration":on,"type.argument.formal.method":on,"type.argument.formal.method.iteration":on,"type.argument.formal.constructor":on,"type.argument.formal.constructor.iteration":on,"type.return":on,"type.field":on,"type.foreach":on,"type.interface":on,command:on};var{supported:ST}=oe,Qc={"comment.line":ST,"comment.block":ST,map:ST};var{supported:Cpe,unsupported:Ope,notApplicable:Npe}=oe,kz={...Qc};var{supported:Bpe,unsupported:Hpe,notApplicable:Wpe}=oe,Pz={...Qc};var{supported:qpe,unsupported:zpe,notApplicable:Gpe}=oe;var{supported:Zpe,notApplicable:Ype}=oe;var{supported:eue,unsupported:tue,notApplicable:rue}=oe;var{supported:oue,unsupported:sue,notApplicable:aue}=oe;var{supported:pue,notApplicable:uue}=oe;var{supported:mue,unsupported:hue,notApplicable:gue}=oe;var{supported:Tue,unsupported:Sue,notApplicable:vue}=oe;var{supported:_ue,unsupported:Eue,notApplicable:Rue}=oe;var{supported:Mue,unsupported:Aue,notApplicable:Due}=oe;var{supported:aa,unsupported:Oue,notApplicable:Nue}=oe,Mz={...yT,"namedFunction.iteration":aa,"namedFunction.iteration.document":aa,"functionName.iteration":aa,"functionName.iteration.document":aa,"comment.line":aa,disqualifyDelimiter:aa};var{supported:Vue}=oe;var{supported:tr}=oe,vT={...xT,"name.field":tr,"type.argument.formal":tr,"type.argument.formal.iteration":tr,"type.argument.formal.method":tr,"type.argument.formal.method.iteration":tr,"type.argument.formal.constructor":tr,"type.argument.formal.constructor.iteration":tr,"type.alias":tr,"type.cast":tr,"type.field":tr,"type.interface":tr,"type.return":tr,"type.variable":tr,"value.field":tr,"value.typeAlias":tr};var{supported:Gue,unsupported:Kue,notApplicable:Que}=oe,Az={...vT,...TT};var{supported:Xue,unsupported:Jue,notApplicable:efe}=oe;var{supported:nfe,unsupported:ife,notApplicable:ofe}=oe;var ca=["that","source","instanceReference","keyboard"];var Te=class extends W{get isReversed(){return this.active.isBefore(this.anchor)}constructor(...e){let[r,n]=e.length===2?e:[new ce(e[0],e[1]),new ce(e[2],e[3])];super(r,n),this.anchor=r,this.active=n}isEqual(e){return this.anchor.isEqual(e.anchor)&&this.active.isEqual(e.active)}concise(){return`${this.anchor.concise()}->${this.active.concise()}`}toString(){return this.concise()}};function fk({line:t,character:e}){return new ce(t,e)}function Tf({start:t,end:e}){return new W(fk(t),fk(e))}function sn({start:t,end:e}){return{type:"line",start:t.line,end:e.line}}function vt({start:t,end:e}){return{type:"character",start:t,end:e}}function Zc(t){return{start:Sf(t.start),end:Sf(t.end)}}function dk(t){return{anchor:Sf(t.anchor),active:Sf(t.active)}}function Sf({line:t,character:e}){return{line:t,character:e}}function Dk(t){return typeof t>"u"||t===null}function Dz(t){return typeof t=="object"&&t!==null}function Iz(t){return Array.isArray(t)?t:Dk(t)?[]:[t]}function Fz(t,e){var r,n,i,o;if(e)for(o=Object.keys(e),r=0,n=o.length;r<n;r+=1)i=o[r],t[i]=e[i];return t}function Cz(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}function Oz(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var Nz=Dk,Lz=Dz,Uz=Iz,Vz=Cz,Bz=Oz,Hz=Fz,bt={isNothing:Nz,isObject:Lz,toArray:Uz,repeat:Vz,isNegativeZero:Bz,extend:Hz};function Ik(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}function Xc(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=Ik(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Xc.prototype=Object.create(Error.prototype);Xc.prototype.constructor=Xc;Xc.prototype.toString=function(e){return this.name+": "+Ik(this,e)};var hr=Xc;function bT(t,e,r,n,i){var o="",a="",l=Math.floor(i/2)-1;return n-e>l&&(o=" ... ",e=n-l+o.length),r-n>l&&(a=" ...",r=n+l-a.length),{str:o+t.slice(e,r).replace(/\t/g,"\u2192")+a,pos:n-e+o.length}}function wT(t,e){return bt.repeat(" ",e-t.length)+t}function Wz(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],o,a=-1;o=r.exec(t.buffer);)i.push(o.index),n.push(o.index+o[0].length),t.position<=o.index&&a<0&&(a=n.length-2);a<0&&(a=n.length-1);var l="",p,u,d=Math.min(t.line+e.linesAfter,i.length).toString().length,h=e.maxLength-(e.indent+d+3);for(p=1;p<=e.linesBefore&&!(a-p<0);p++)u=bT(t.buffer,n[a-p],i[a-p],t.position-(n[a]-n[a-p]),h),l=bt.repeat(" ",e.indent)+wT((t.line-p+1).toString(),d)+" | "+u.str+`
`+l;for(u=bT(t.buffer,n[a],i[a],t.position,h),l+=bt.repeat(" ",e.indent)+wT((t.line+1).toString(),d)+" | "+u.str+`
`,l+=bt.repeat("-",e.indent+d+3+u.pos)+`^
`,p=1;p<=e.linesAfter&&!(a+p>=i.length);p++)u=bT(t.buffer,n[a+p],i[a+p],t.position-(n[a]-n[a+p]),h),l+=bt.repeat(" ",e.indent)+wT((t.line+p+1).toString(),d)+" | "+u.str+`
`;return l.replace(/\n$/,"")}var $z=Wz,jz=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],qz=["scalar","sequence","mapping"];function zz(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}function Gz(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(jz.indexOf(r)===-1)throw new hr('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=zz(e.styleAliases||null),qz.indexOf(this.kind)===-1)throw new hr('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var Ct=Gz;function gk(t,e){var r=[];return t[e].forEach(function(n){var i=r.length;r.forEach(function(o,a){o.tag===n.tag&&o.kind===n.kind&&o.multi===n.multi&&(i=a)}),r[i]=n}),r}function Kz(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}function ET(t){return this.extend(t)}ET.prototype.extend=function(e){var r=[],n=[];if(e instanceof Ct)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new hr("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(o){if(!(o instanceof Ct))throw new hr("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new hr("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new hr("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(o){if(!(o instanceof Ct))throw new hr("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(ET.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=gk(i,"implicit"),i.compiledExplicit=gk(i,"explicit"),i.compiledTypeMap=Kz(i.compiledImplicit,i.compiledExplicit),i};var Qz=ET,Zz=new Ct("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),Yz=new Ct("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),Xz=new Ct("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),Jz=new Qz({explicit:[Zz,Yz,Xz]});function eG(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function tG(){return null}function rG(t){return t===null}var nG=new Ct("tag:yaml.org,2002:null",{kind:"scalar",resolve:eG,construct:tG,predicate:rG,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function iG(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function oG(t){return t==="true"||t==="True"||t==="TRUE"}function sG(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var aG=new Ct("tag:yaml.org,2002:bool",{kind:"scalar",resolve:iG,construct:oG,predicate:sG,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function cG(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function lG(t){return 48<=t&&t<=55}function pG(t){return 48<=t&&t<=57}function uG(t){if(t===null)return!1;var e=t.length,r=0,n=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!cG(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!lG(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!pG(t.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function fG(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}function dG(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!bt.isNegativeZero(t)}var mG=new Ct("tag:yaml.org,2002:int",{kind:"scalar",resolve:uG,construct:fG,predicate:dG,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),hG=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function gG(t){return!(t===null||!hG.test(t)||t[t.length-1]==="_")}function yG(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}var xG=/^[-+]?[0-9]+e/;function TG(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(bt.isNegativeZero(t))return"-0.0";return r=t.toString(10),xG.test(r)?r.replace("e",".e"):r}function SG(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||bt.isNegativeZero(t))}var vG=new Ct("tag:yaml.org,2002:float",{kind:"scalar",resolve:gG,construct:yG,predicate:SG,represent:TG,defaultStyle:"lowercase"}),bG=Jz.extend({implicit:[nG,aG,mG,vG]}),wG=bG,Fk=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Ck=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function _G(t){return t===null?!1:Fk.exec(t)!==null||Ck.exec(t)!==null}function EG(t){var e,r,n,i,o,a,l,p=0,u=null,d,h,g;if(e=Fk.exec(t),e===null&&(e=Ck.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(o=+e[4],a=+e[5],l=+e[6],e[7]){for(p=e[7].slice(0,3);p.length<3;)p+="0";p=+p}return e[9]&&(d=+e[10],h=+(e[11]||0),u=(d*60+h)*6e4,e[9]==="-"&&(u=-u)),g=new Date(Date.UTC(r,n,i,o,a,l,p)),u&&g.setTime(g.getTime()-u),g}function RG(t){return t.toISOString()}var kG=new Ct("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:_G,construct:EG,instanceOf:Date,represent:RG});function PG(t){return t==="<<"||t===null}var MG=new Ct("tag:yaml.org,2002:merge",{kind:"scalar",resolve:PG}),AT=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function AG(t){if(t===null)return!1;var e,r,n=0,i=t.length,o=AT;for(r=0;r<i;r++)if(e=o.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}function DG(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,o=AT,a=0,l=[];for(e=0;e<i;e++)e%4===0&&e&&(l.push(a>>16&255),l.push(a>>8&255),l.push(a&255)),a=a<<6|o.indexOf(n.charAt(e));return r=i%4*6,r===0?(l.push(a>>16&255),l.push(a>>8&255),l.push(a&255)):r===18?(l.push(a>>10&255),l.push(a>>2&255)):r===12&&l.push(a>>4&255),new Uint8Array(l)}function IG(t){var e="",r=0,n,i,o=t.length,a=AT;for(n=0;n<o;n++)n%3===0&&n&&(e+=a[r>>18&63],e+=a[r>>12&63],e+=a[r>>6&63],e+=a[r&63]),r=(r<<8)+t[n];return i=o%3,i===0?(e+=a[r>>18&63],e+=a[r>>12&63],e+=a[r>>6&63],e+=a[r&63]):i===2?(e+=a[r>>10&63],e+=a[r>>4&63],e+=a[r<<2&63],e+=a[64]):i===1&&(e+=a[r>>2&63],e+=a[r<<4&63],e+=a[64],e+=a[64]),e}function FG(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var CG=new Ct("tag:yaml.org,2002:binary",{kind:"scalar",resolve:AG,construct:DG,predicate:FG,represent:IG}),OG=Object.prototype.hasOwnProperty,NG=Object.prototype.toString;function LG(t){if(t===null)return!0;var e=[],r,n,i,o,a,l=t;for(r=0,n=l.length;r<n;r+=1){if(i=l[r],a=!1,NG.call(i)!=="[object Object]")return!1;for(o in i)if(OG.call(i,o))if(!a)a=!0;else return!1;if(!a)return!1;if(e.indexOf(o)===-1)e.push(o);else return!1}return!0}function UG(t){return t!==null?t:[]}var VG=new Ct("tag:yaml.org,2002:omap",{kind:"sequence",resolve:LG,construct:UG}),BG=Object.prototype.toString;function HG(t){if(t===null)return!0;var e,r,n,i,o,a=t;for(o=new Array(a.length),e=0,r=a.length;e<r;e+=1){if(n=a[e],BG.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;o[e]=[i[0],n[i[0]]]}return!0}function WG(t){if(t===null)return[];var e,r,n,i,o,a=t;for(o=new Array(a.length),e=0,r=a.length;e<r;e+=1)n=a[e],i=Object.keys(n),o[e]=[i[0],n[i[0]]];return o}var $G=new Ct("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:HG,construct:WG}),jG=Object.prototype.hasOwnProperty;function qG(t){if(t===null)return!0;var e,r=t;for(e in r)if(jG.call(r,e)&&r[e]!==null)return!1;return!0}function zG(t){return t!==null?t:{}}var GG=new Ct("tag:yaml.org,2002:set",{kind:"mapping",resolve:qG,construct:zG}),DT=wG.extend({implicit:[kG,MG],explicit:[CG,VG,$G,GG]}),io=Object.prototype.hasOwnProperty,vf=1,Ok=2,Nk=3,bf=4,_T=1,KG=2,yk=3,QG=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,ZG=/[\x85\u2028\u2029]/,YG=/[,\[\]\{\}]/,Lk=/^(?:!|!!|![a-z\-]+!)$/i,Uk=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function xk(t){return Object.prototype.toString.call(t)}function qn(t){return t===10||t===13}function jo(t){return t===9||t===32}function gr(t){return t===9||t===32||t===10||t===13}function pa(t){return t===44||t===91||t===93||t===123||t===125}function XG(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function JG(t){return t===120?2:t===117?4:t===85?8:0}function eK(t){return 48<=t&&t<=57?t-48:-1}function Tk(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}function tK(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var Vk=new Array(256),Bk=new Array(256);for($o=0;$o<256;$o++)Vk[$o]=Tk($o)?1:0,Bk[$o]=Tk($o);var $o;function rK(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||DT,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Hk(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=$z(r),new hr(e,r)}function ae(t,e){throw Hk(t,e)}function wf(t,e){t.onWarning&&t.onWarning.call(null,Hk(t,e))}var Sk={YAML:function(e,r,n){var i,o,a;e.version!==null&&ae(e,"duplication of %YAML directive"),n.length!==1&&ae(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&ae(e,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),a=parseInt(i[2],10),o!==1&&ae(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=a<2,a!==1&&a!==2&&wf(e,"unsupported YAML version of the document")},TAG:function(e,r,n){var i,o;n.length!==2&&ae(e,"TAG directive accepts exactly two arguments"),i=n[0],o=n[1],Lk.test(i)||ae(e,"ill-formed tag handle (first argument) of the TAG directive"),io.call(e.tagMap,i)&&ae(e,'there is a previously declared suffix for "'+i+'" tag handle'),Uk.test(o)||ae(e,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{ae(e,"tag prefix is malformed: "+o)}e.tagMap[i]=o}};function no(t,e,r,n){var i,o,a,l;if(e<r){if(l=t.input.slice(e,r),n)for(i=0,o=l.length;i<o;i+=1)a=l.charCodeAt(i),a===9||32<=a&&a<=1114111||ae(t,"expected valid JSON character");else QG.test(l)&&ae(t,"the stream contains non-printable characters");t.result+=l}}function vk(t,e,r,n){var i,o,a,l;for(bt.isObject(r)||ae(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),a=0,l=i.length;a<l;a+=1)o=i[a],io.call(e,o)||(e[o]=r[o],n[o]=!0)}function ua(t,e,r,n,i,o,a,l,p){var u,d;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),u=0,d=i.length;u<d;u+=1)Array.isArray(i[u])&&ae(t,"nested arrays are not supported inside keys"),typeof i=="object"&&xk(i[u])==="[object Object]"&&(i[u]="[object Object]");if(typeof i=="object"&&xk(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(u=0,d=o.length;u<d;u+=1)vk(t,e,o[u],r);else vk(t,e,o,r);else!t.json&&!io.call(r,i)&&io.call(e,i)&&(t.line=a||t.line,t.lineStart=l||t.lineStart,t.position=p||t.position,ae(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):e[i]=o,delete r[i];return e}function IT(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):ae(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function gt(t,e,r){for(var n=0,i=t.input.charCodeAt(t.position);i!==0;){for(;jo(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(qn(i))for(IT(t),i=t.input.charCodeAt(t.position),n++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return r!==-1&&n!==0&&t.lineIndent<r&&wf(t,"deficient indentation"),n}function Rf(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||gr(r)))}function FT(t,e){e===1?t.result+=" ":e>1&&(t.result+=bt.repeat(`
`,e-1))}function nK(t,e,r){var n,i,o,a,l,p,u,d,h=t.kind,g=t.result,x;if(x=t.input.charCodeAt(t.position),gr(x)||pa(x)||x===35||x===38||x===42||x===33||x===124||x===62||x===39||x===34||x===37||x===64||x===96||(x===63||x===45)&&(i=t.input.charCodeAt(t.position+1),gr(i)||r&&pa(i)))return!1;for(t.kind="scalar",t.result="",o=a=t.position,l=!1;x!==0;){if(x===58){if(i=t.input.charCodeAt(t.position+1),gr(i)||r&&pa(i))break}else if(x===35){if(n=t.input.charCodeAt(t.position-1),gr(n))break}else{if(t.position===t.lineStart&&Rf(t)||r&&pa(x))break;if(qn(x))if(p=t.line,u=t.lineStart,d=t.lineIndent,gt(t,!1,-1),t.lineIndent>=e){l=!0,x=t.input.charCodeAt(t.position);continue}else{t.position=a,t.line=p,t.lineStart=u,t.lineIndent=d;break}}l&&(no(t,o,a,!1),FT(t,t.line-p),o=a=t.position,l=!1),jo(x)||(a=t.position+1),x=t.input.charCodeAt(++t.position)}return no(t,o,a,!1),t.result?!0:(t.kind=h,t.result=g,!1)}function iK(t,e){var r,n,i;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(no(t,n,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)n=t.position,t.position++,i=t.position;else return!0;else qn(r)?(no(t,n,i,!0),FT(t,gt(t,!1,e)),n=i=t.position):t.position===t.lineStart&&Rf(t)?ae(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);ae(t,"unexpected end of the stream within a single quoted scalar")}function oK(t,e){var r,n,i,o,a,l;if(l=t.input.charCodeAt(t.position),l!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(l=t.input.charCodeAt(t.position))!==0;){if(l===34)return no(t,r,t.position,!0),t.position++,!0;if(l===92){if(no(t,r,t.position,!0),l=t.input.charCodeAt(++t.position),qn(l))gt(t,!1,e);else if(l<256&&Vk[l])t.result+=Bk[l],t.position++;else if((a=JG(l))>0){for(i=a,o=0;i>0;i--)l=t.input.charCodeAt(++t.position),(a=XG(l))>=0?o=(o<<4)+a:ae(t,"expected hexadecimal character");t.result+=tK(o),t.position++}else ae(t,"unknown escape sequence");r=n=t.position}else qn(l)?(no(t,r,n,!0),FT(t,gt(t,!1,e)),r=n=t.position):t.position===t.lineStart&&Rf(t)?ae(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}ae(t,"unexpected end of the stream within a double quoted scalar")}function sK(t,e){var r=!0,n,i,o,a=t.tag,l,p=t.anchor,u,d,h,g,x,_=Object.create(null),w,C,M,U;if(U=t.input.charCodeAt(t.position),U===91)d=93,x=!1,l=[];else if(U===123)d=125,x=!0,l={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=l),U=t.input.charCodeAt(++t.position);U!==0;){if(gt(t,!0,e),U=t.input.charCodeAt(t.position),U===d)return t.position++,t.tag=a,t.anchor=p,t.kind=x?"mapping":"sequence",t.result=l,!0;r?U===44&&ae(t,"expected the node content, but found ','"):ae(t,"missed comma between flow collection entries"),C=w=M=null,h=g=!1,U===63&&(u=t.input.charCodeAt(t.position+1),gr(u)&&(h=g=!0,t.position++,gt(t,!0,e))),n=t.line,i=t.lineStart,o=t.position,fa(t,e,vf,!1,!0),C=t.tag,w=t.result,gt(t,!0,e),U=t.input.charCodeAt(t.position),(g||t.line===n)&&U===58&&(h=!0,U=t.input.charCodeAt(++t.position),gt(t,!0,e),fa(t,e,vf,!1,!0),M=t.result),x?ua(t,l,_,C,w,M,n,i,o):h?l.push(ua(t,null,_,C,w,M,n,i,o)):l.push(w),gt(t,!0,e),U=t.input.charCodeAt(t.position),U===44?(r=!0,U=t.input.charCodeAt(++t.position)):r=!1}ae(t,"unexpected end of the stream within a flow collection")}function aK(t,e){var r,n,i=_T,o=!1,a=!1,l=e,p=0,u=!1,d,h;if(h=t.input.charCodeAt(t.position),h===124)n=!1;else if(h===62)n=!0;else return!1;for(t.kind="scalar",t.result="";h!==0;)if(h=t.input.charCodeAt(++t.position),h===43||h===45)_T===i?i=h===43?yk:KG:ae(t,"repeat of a chomping mode identifier");else if((d=eK(h))>=0)d===0?ae(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):a?ae(t,"repeat of an indentation width identifier"):(l=e+d-1,a=!0);else break;if(jo(h)){do h=t.input.charCodeAt(++t.position);while(jo(h));if(h===35)do h=t.input.charCodeAt(++t.position);while(!qn(h)&&h!==0)}for(;h!==0;){for(IT(t),t.lineIndent=0,h=t.input.charCodeAt(t.position);(!a||t.lineIndent<l)&&h===32;)t.lineIndent++,h=t.input.charCodeAt(++t.position);if(!a&&t.lineIndent>l&&(l=t.lineIndent),qn(h)){p++;continue}if(t.lineIndent<l){i===yk?t.result+=bt.repeat(`
`,o?1+p:p):i===_T&&o&&(t.result+=`
`);break}for(n?jo(h)?(u=!0,t.result+=bt.repeat(`
`,o?1+p:p)):u?(u=!1,t.result+=bt.repeat(`
`,p+1)):p===0?o&&(t.result+=" "):t.result+=bt.repeat(`
`,p):t.result+=bt.repeat(`
`,o?1+p:p),o=!0,a=!0,p=0,r=t.position;!qn(h)&&h!==0;)h=t.input.charCodeAt(++t.position);no(t,r,t.position,!1)}return!0}function bk(t,e){var r,n=t.tag,i=t.anchor,o=[],a,l=!1,p;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),p=t.input.charCodeAt(t.position);p!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,ae(t,"tab characters must not be used in indentation")),!(p!==45||(a=t.input.charCodeAt(t.position+1),!gr(a))));){if(l=!0,t.position++,gt(t,!0,-1)&&t.lineIndent<=e){o.push(null),p=t.input.charCodeAt(t.position);continue}if(r=t.line,fa(t,e,Nk,!1,!0),o.push(t.result),gt(t,!0,-1),p=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&p!==0)ae(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return l?(t.tag=n,t.anchor=i,t.kind="sequence",t.result=o,!0):!1}function cK(t,e,r){var n,i,o,a,l,p,u=t.tag,d=t.anchor,h={},g=Object.create(null),x=null,_=null,w=null,C=!1,M=!1,U;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=h),U=t.input.charCodeAt(t.position);U!==0;){if(!C&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,ae(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),o=t.line,(U===63||U===58)&&gr(n))U===63?(C&&(ua(t,h,g,x,_,null,a,l,p),x=_=w=null),M=!0,C=!0,i=!0):C?(C=!1,i=!0):ae(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,U=n;else{if(a=t.line,l=t.lineStart,p=t.position,!fa(t,r,Ok,!1,!0))break;if(t.line===o){for(U=t.input.charCodeAt(t.position);jo(U);)U=t.input.charCodeAt(++t.position);if(U===58)U=t.input.charCodeAt(++t.position),gr(U)||ae(t,"a whitespace character is expected after the key-value separator within a block mapping"),C&&(ua(t,h,g,x,_,null,a,l,p),x=_=w=null),M=!0,C=!1,i=!1,x=t.tag,_=t.result;else if(M)ae(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=u,t.anchor=d,!0}else if(M)ae(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=u,t.anchor=d,!0}if((t.line===o||t.lineIndent>e)&&(C&&(a=t.line,l=t.lineStart,p=t.position),fa(t,e,bf,!0,i)&&(C?_=t.result:w=t.result),C||(ua(t,h,g,x,_,w,a,l,p),x=_=w=null),gt(t,!0,-1),U=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&U!==0)ae(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return C&&ua(t,h,g,x,_,null,a,l,p),M&&(t.tag=u,t.anchor=d,t.kind="mapping",t.result=h),M}function lK(t){var e,r=!1,n=!1,i,o,a;if(a=t.input.charCodeAt(t.position),a!==33)return!1;if(t.tag!==null&&ae(t,"duplication of a tag property"),a=t.input.charCodeAt(++t.position),a===60?(r=!0,a=t.input.charCodeAt(++t.position)):a===33?(n=!0,i="!!",a=t.input.charCodeAt(++t.position)):i="!",e=t.position,r){do a=t.input.charCodeAt(++t.position);while(a!==0&&a!==62);t.position<t.length?(o=t.input.slice(e,t.position),a=t.input.charCodeAt(++t.position)):ae(t,"unexpected end of the stream within a verbatim tag")}else{for(;a!==0&&!gr(a);)a===33&&(n?ae(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),Lk.test(i)||ae(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),a=t.input.charCodeAt(++t.position);o=t.input.slice(e,t.position),YG.test(o)&&ae(t,"tag suffix cannot contain flow indicator characters")}o&&!Uk.test(o)&&ae(t,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{ae(t,"tag name is malformed: "+o)}return r?t.tag=o:io.call(t.tagMap,i)?t.tag=t.tagMap[i]+o:i==="!"?t.tag="!"+o:i==="!!"?t.tag="tag:yaml.org,2002:"+o:ae(t,'undeclared tag handle "'+i+'"'),!0}function pK(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&ae(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!gr(r)&&!pa(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&ae(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function uK(t){var e,r,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!gr(n)&&!pa(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&ae(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),io.call(t.anchorMap,r)||ae(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],gt(t,!0,-1),!0}function fa(t,e,r,n,i){var o,a,l,p=1,u=!1,d=!1,h,g,x,_,w,C;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=a=l=bf===r||Nk===r,n&&gt(t,!0,-1)&&(u=!0,t.lineIndent>e?p=1:t.lineIndent===e?p=0:t.lineIndent<e&&(p=-1)),p===1)for(;lK(t)||pK(t);)gt(t,!0,-1)?(u=!0,l=o,t.lineIndent>e?p=1:t.lineIndent===e?p=0:t.lineIndent<e&&(p=-1)):l=!1;if(l&&(l=u||i),(p===1||bf===r)&&(vf===r||Ok===r?w=e:w=e+1,C=t.position-t.lineStart,p===1?l&&(bk(t,C)||cK(t,C,w))||sK(t,w)?d=!0:(a&&aK(t,w)||iK(t,w)||oK(t,w)?d=!0:uK(t)?(d=!0,(t.tag!==null||t.anchor!==null)&&ae(t,"alias node should not have any properties")):nK(t,w,vf===r)&&(d=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):p===0&&(d=l&&bk(t,C))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&ae(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),h=0,g=t.implicitTypes.length;h<g;h+=1)if(_=t.implicitTypes[h],_.resolve(t.result)){t.result=_.construct(t.result),t.tag=_.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(io.call(t.typeMap[t.kind||"fallback"],t.tag))_=t.typeMap[t.kind||"fallback"][t.tag];else for(_=null,x=t.typeMap.multi[t.kind||"fallback"],h=0,g=x.length;h<g;h+=1)if(t.tag.slice(0,x[h].tag.length)===x[h].tag){_=x[h];break}_||ae(t,"unknown tag !<"+t.tag+">"),t.result!==null&&_.kind!==t.kind&&ae(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+_.kind+'", not "'+t.kind+'"'),_.resolve(t.result,t.tag)?(t.result=_.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):ae(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||d}function fK(t){var e=t.position,r,n,i,o=!1,a;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(a=t.input.charCodeAt(t.position))!==0&&(gt(t,!0,-1),a=t.input.charCodeAt(t.position),!(t.lineIndent>0||a!==37));){for(o=!0,a=t.input.charCodeAt(++t.position),r=t.position;a!==0&&!gr(a);)a=t.input.charCodeAt(++t.position);for(n=t.input.slice(r,t.position),i=[],n.length<1&&ae(t,"directive name must not be less than one character in length");a!==0;){for(;jo(a);)a=t.input.charCodeAt(++t.position);if(a===35){do a=t.input.charCodeAt(++t.position);while(a!==0&&!qn(a));break}if(qn(a))break;for(r=t.position;a!==0&&!gr(a);)a=t.input.charCodeAt(++t.position);i.push(t.input.slice(r,t.position))}a!==0&&IT(t),io.call(Sk,n)?Sk[n](t,n,i):wf(t,'unknown document directive "'+n+'"')}if(gt(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,gt(t,!0,-1)):o&&ae(t,"directives end mark is expected"),fa(t,t.lineIndent-1,bf,!1,!0),gt(t,!0,-1),t.checkLineBreaks&&ZG.test(t.input.slice(e,t.position))&&wf(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&Rf(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,gt(t,!0,-1));return}if(t.position<t.length-1)ae(t,"end of the stream or a document separator is expected");else return}function Wk(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new rK(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,ae(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)fK(r);return r.documents}function dK(t,e,r){e!==null&&typeof e=="object"&&typeof r>"u"&&(r=e,e=null);var n=Wk(t,r);if(typeof e!="function")return n;for(var i=0,o=n.length;i<o;i+=1)e(n[i])}function mK(t,e){var r=Wk(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new hr("expected a single document in the stream, but found more")}}var hK=dK,gK=mK,$k={loadAll:hK,load:gK},jk=Object.prototype.toString,qk=Object.prototype.hasOwnProperty,CT=65279,yK=9,Jc=10,xK=13,TK=32,SK=33,vK=34,RT=35,bK=37,wK=38,_K=39,EK=42,zk=44,RK=45,_f=58,kK=61,PK=62,MK=63,AK=64,Gk=91,Kk=93,DK=96,Qk=123,IK=124,Zk=125,$t={};$t[0]="\\0";$t[7]="\\a";$t[8]="\\b";$t[9]="\\t";$t[10]="\\n";$t[11]="\\v";$t[12]="\\f";$t[13]="\\r";$t[27]="\\e";$t[34]='\\"';$t[92]="\\\\";$t[133]="\\N";$t[160]="\\_";$t[8232]="\\L";$t[8233]="\\P";var FK=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],CK=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function OK(t,e){var r,n,i,o,a,l,p;if(e===null)return{};for(r={},n=Object.keys(e),i=0,o=n.length;i<o;i+=1)a=n[i],l=String(e[a]),a.slice(0,2)==="!!"&&(a="tag:yaml.org,2002:"+a.slice(2)),p=t.compiledTypeMap.fallback[a],p&&qk.call(p.styleAliases,l)&&(l=p.styleAliases[l]),r[a]=l;return r}function NK(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else if(t<=4294967295)r="U",n=8;else throw new hr("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+bt.repeat("0",n-e.length)+e}var LK=1,el=2;function UK(t){this.schema=t.schema||DT,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=bt.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=OK(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?el:LK,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function wk(t,e){for(var r=bt.repeat(" ",e),n=0,i=-1,o="",a,l=t.length;n<l;)i=t.indexOf(`
`,n),i===-1?(a=t.slice(n),n=l):(a=t.slice(n,i+1),n=i+1),a.length&&a!==`
`&&(o+=r),o+=a;return o}function kT(t,e){return`
`+bt.repeat(" ",t.indent*e)}function VK(t,e){var r,n,i;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(i=t.implicitTypes[r],i.resolve(e))return!0;return!1}function Ef(t){return t===TK||t===yK}function tl(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==CT||65536<=t&&t<=1114111}function _k(t){return tl(t)&&t!==CT&&t!==xK&&t!==Jc}function Ek(t,e,r){var n=_k(t),i=n&&!Ef(t);return(r?n:n&&t!==zk&&t!==Gk&&t!==Kk&&t!==Qk&&t!==Zk)&&t!==RT&&!(e===_f&&!i)||_k(e)&&!Ef(e)&&t===RT||e===_f&&i}function BK(t){return tl(t)&&t!==CT&&!Ef(t)&&t!==RK&&t!==MK&&t!==_f&&t!==zk&&t!==Gk&&t!==Kk&&t!==Qk&&t!==Zk&&t!==RT&&t!==wK&&t!==EK&&t!==SK&&t!==IK&&t!==kK&&t!==PK&&t!==_K&&t!==vK&&t!==bK&&t!==AK&&t!==DK}function HK(t){return!Ef(t)&&t!==_f}function Yc(t,e){var r=t.charCodeAt(e),n;return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function Yk(t){var e=/^\n* /;return e.test(t)}var Xk=1,PT=2,Jk=3,eP=4,la=5;function WK(t,e,r,n,i,o,a,l){var p,u=0,d=null,h=!1,g=!1,x=n!==-1,_=-1,w=BK(Yc(t,0))&&HK(Yc(t,t.length-1));if(e||a)for(p=0;p<t.length;u>=65536?p+=2:p++){if(u=Yc(t,p),!tl(u))return la;w=w&&Ek(u,d,l),d=u}else{for(p=0;p<t.length;u>=65536?p+=2:p++){if(u=Yc(t,p),u===Jc)h=!0,x&&(g=g||p-_-1>n&&t[_+1]!==" ",_=p);else if(!tl(u))return la;w=w&&Ek(u,d,l),d=u}g=g||x&&p-_-1>n&&t[_+1]!==" "}return!h&&!g?w&&!a&&!i(t)?Xk:o===el?la:PT:r>9&&Yk(t)?la:a?o===el?la:PT:g?eP:Jk}function $K(t,e,r,n,i){t.dump=function(){if(e.length===0)return t.quotingType===el?'""':"''";if(!t.noCompatMode&&(FK.indexOf(e)!==-1||CK.test(e)))return t.quotingType===el?'"'+e+'"':"'"+e+"'";var o=t.indent*Math.max(1,r),a=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),l=n||t.flowLevel>-1&&r>=t.flowLevel;function p(u){return VK(t,u)}switch(WK(e,l,t.indent,a,p,t.quotingType,t.forceQuotes&&!n,i)){case Xk:return e;case PT:return"'"+e.replace(/'/g,"''")+"'";case Jk:return"|"+Rk(e,t.indent)+kk(wk(e,o));case eP:return">"+Rk(e,t.indent)+kk(wk(jK(e,a),o));case la:return'"'+qK(e)+'"';default:throw new hr("impossible error: invalid scalar style")}}()}function Rk(t,e){var r=Yk(t)?String(e):"",n=t[t.length-1]===`
`,i=n&&(t[t.length-2]===`
`||t===`
`),o=i?"+":n?"":"-";return r+o+`
`}function kk(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function jK(t,e){for(var r=/(\n+)([^\n]*)/g,n=function(){var u=t.indexOf(`
`);return u=u!==-1?u:t.length,r.lastIndex=u,Pk(t.slice(0,u),e)}(),i=t[0]===`
`||t[0]===" ",o,a;a=r.exec(t);){var l=a[1],p=a[2];o=p[0]===" ",n+=l+(!i&&!o&&p!==""?`
`:"")+Pk(p,e),i=o}return n}function Pk(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,n,i=0,o,a=0,l=0,p="";n=r.exec(t);)l=n.index,l-i>e&&(o=a>i?a:l,p+=`
`+t.slice(i,o),i=o+1),a=l;return p+=`
`,t.length-i>e&&a>i?p+=t.slice(i,a)+`
`+t.slice(a+1):p+=t.slice(i),p.slice(1)}function qK(t){for(var e="",r=0,n,i=0;i<t.length;r>=65536?i+=2:i++)r=Yc(t,i),n=$t[r],!n&&tl(r)?(e+=t[i],r>=65536&&(e+=t[i+1])):e+=n||NK(r);return e}function zK(t,e,r){var n="",i=t.tag,o,a,l;for(o=0,a=r.length;o<a;o+=1)l=r[o],t.replacer&&(l=t.replacer.call(r,String(o),l)),(bi(t,e,l,!1,!1)||typeof l>"u"&&bi(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=i,t.dump="["+n+"]"}function Mk(t,e,r,n){var i="",o=t.tag,a,l,p;for(a=0,l=r.length;a<l;a+=1)p=r[a],t.replacer&&(p=t.replacer.call(r,String(a),p)),(bi(t,e+1,p,!0,!0,!1,!0)||typeof p>"u"&&bi(t,e+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=kT(t,e)),t.dump&&Jc===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=o,t.dump=i||"[]"}function GK(t,e,r){var n="",i=t.tag,o=Object.keys(r),a,l,p,u,d;for(a=0,l=o.length;a<l;a+=1)d="",n!==""&&(d+=", "),t.condenseFlow&&(d+='"'),p=o[a],u=r[p],t.replacer&&(u=t.replacer.call(r,p,u)),bi(t,e,p,!1,!1)&&(t.dump.length>1024&&(d+="? "),d+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),bi(t,e,u,!1,!1)&&(d+=t.dump,n+=d));t.tag=i,t.dump="{"+n+"}"}function KK(t,e,r,n){var i="",o=t.tag,a=Object.keys(r),l,p,u,d,h,g;if(t.sortKeys===!0)a.sort();else if(typeof t.sortKeys=="function")a.sort(t.sortKeys);else if(t.sortKeys)throw new hr("sortKeys must be a boolean or a function");for(l=0,p=a.length;l<p;l+=1)g="",(!n||i!=="")&&(g+=kT(t,e)),u=a[l],d=r[u],t.replacer&&(d=t.replacer.call(r,u,d)),bi(t,e+1,u,!0,!0,!0)&&(h=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,h&&(t.dump&&Jc===t.dump.charCodeAt(0)?g+="?":g+="? "),g+=t.dump,h&&(g+=kT(t,e)),bi(t,e+1,d,!0,h)&&(t.dump&&Jc===t.dump.charCodeAt(0)?g+=":":g+=": ",g+=t.dump,i+=g));t.tag=o,t.dump=i||"{}"}function Ak(t,e,r){var n,i,o,a,l,p;for(i=r?t.explicitTypes:t.implicitTypes,o=0,a=i.length;o<a;o+=1)if(l=i[o],(l.instanceOf||l.predicate)&&(!l.instanceOf||typeof e=="object"&&e instanceof l.instanceOf)&&(!l.predicate||l.predicate(e))){if(r?l.multi&&l.representName?t.tag=l.representName(e):t.tag=l.tag:t.tag="?",l.represent){if(p=t.styleMap[l.tag]||l.defaultStyle,jk.call(l.represent)==="[object Function]")n=l.represent(e,p);else if(qk.call(l.represent,p))n=l.represent[p](e,p);else throw new hr("!<"+l.tag+'> tag resolver accepts not "'+p+'" style');t.dump=n}return!0}return!1}function bi(t,e,r,n,i,o,a){t.tag=null,t.dump=r,Ak(t,r,!1)||Ak(t,r,!0);var l=jk.call(t.dump),p=n,u;n&&(n=t.flowLevel<0||t.flowLevel>e);var d=l==="[object Object]"||l==="[object Array]",h,g;if(d&&(h=t.duplicates.indexOf(r),g=h!==-1),(t.tag!==null&&t.tag!=="?"||g||t.indent!==2&&e>0)&&(i=!1),g&&t.usedDuplicates[h])t.dump="*ref_"+h;else{if(d&&g&&!t.usedDuplicates[h]&&(t.usedDuplicates[h]=!0),l==="[object Object]")n&&Object.keys(t.dump).length!==0?(KK(t,e,t.dump,i),g&&(t.dump="&ref_"+h+t.dump)):(GK(t,e,t.dump),g&&(t.dump="&ref_"+h+" "+t.dump));else if(l==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!a&&e>0?Mk(t,e-1,t.dump,i):Mk(t,e,t.dump,i),g&&(t.dump="&ref_"+h+t.dump)):(zK(t,e,t.dump),g&&(t.dump="&ref_"+h+" "+t.dump));else if(l==="[object String]")t.tag!=="?"&&$K(t,t.dump,e,o,p);else{if(l==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new hr("unacceptable kind of an object to dump "+l)}t.tag!==null&&t.tag!=="?"&&(u=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?u="!"+u:u.slice(0,18)==="tag:yaml.org,2002:"?u="!!"+u.slice(18):u="!<"+u+">",t.dump=u+" "+t.dump)}return!0}function QK(t,e){var r=[],n=[],i,o;for(MT(t,r,n),i=0,o=n.length;i<o;i+=1)e.duplicates.push(r[n[i]]);e.usedDuplicates=new Array(o)}function MT(t,e,r){var n,i,o;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(e.push(t),Array.isArray(t))for(i=0,o=t.length;i<o;i+=1)MT(t[i],e,r);else for(n=Object.keys(t),i=0,o=n.length;i<o;i+=1)MT(t[n[i]],e,r)}function ZK(t,e){e=e||{};var r=new UK(e);r.noRefs||QK(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),bi(r,0,n,!0,!0)?r.dump+`
`:""}var YK=ZK,XK={dump:YK};function OT(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var tP=Ct;var rP=DT,JK=$k.load,Sde=$k.loadAll,nP=XK.dump;var vde=OT("safeLoad","load"),bde=OT("safeLoadAll","loadAll"),wde=OT("safeDump","dump");var kf=class{constructor(e,r){this.data=e;this.opts=r}represent(){let e=nP(this.data,Object.assign({replacer:n4,schema:t4},this.opts));return e=e.trim(),e.includes(`
`)&&(e=`
`+e),e}},e4=new tP("!format",{kind:"scalar",resolve:()=>!1,instanceOf:kf,represent:t=>t.represent()}),t4=rP.extend({implicit:[e4]}),NT=t=>typeof t=="object"&&t!=null;function r4(t){if(NT(t))return Object.values(t).every(e=>!NT(e)&&!Array.isArray(e));if(Array.isArray(t))return t.every(e=>!NT(e)&&!Array.isArray(e))}function n4(t,e){return t===""?e:r4(e)?new kf(e,{flowLevel:0}):e}var LT=["breakLine","clearAndSetSelection","copyToClipboard","cutToClipboard","decrement","deselect","editNewLineAfter","editNewLineBefore","experimental.setInstanceReference","extractVariable","findInDocument","findInWorkspace","foldRegion","followLink","followLinkAside","increment","indentLine","insertCopyAfter","insertCopyBefore","insertEmptyLineAfter","insertEmptyLineBefore","insertEmptyLinesAround","joinLines","outdentLine","randomizeTargets","remove","rename","revealDefinition","revealTypeDefinition","reverseTargets","scrollToBottom","scrollToCenter","scrollToTop","setSelection","setSelectionAfter","setSelectionBefore","showDebugHover","showHover","showQuickFix","showReferences","sortTargets","toggleLineBreakpoint","toggleLineComment","unfoldRegion","private.setKeyboardTarget","private.showParseTree","private.getTargets"],o4=["callAsFunction","editNew","executeCommand","generateSnippet","getText","highlight","insertSnippet","moveToTarget","pasteFromClipboard","replace","replaceWithTarget","rewrapWithPairedDelimiter","swapTargets","wrapWithPairedDelimiter","wrapWithSnippet","parsed"],oP=[...LT,...o4];var s4=["angleBrackets","backtickQuotes","curlyBrackets","doubleQuotes","escapedDoubleQuotes","escapedParentheses","escapedSingleQuotes","escapedSquareBrackets","parentheses","singleQuotes","squareBrackets","tripleDoubleQuotes","tripleSingleQuotes"],a4=["string","any","collectionBoundary"],Pf=[...s4,...a4],qo=["argumentOrParameter","anonymousFunction","attribute","branch","class","className","collectionItem","collectionKey","comment","private.fieldAccess","functionCall","functionCallee","functionName","ifStatement","instance","list","map","name","namedFunction","regularExpression","statement","string","type","value","condition","section","sectionLevelOne","sectionLevelTwo","sectionLevelThree","sectionLevelFour","sectionLevelFive","sectionLevelSix","selector","private.switchStatementSubject","unit","xmlBothTags","xmlElement","xmlEndTag","xmlStartTag","part","chapter","subSection","subSubSection","namedParagraph","subParagraph","environment","character","word","token","identifier","line","sentence","paragraph","boundedParagraph","document","nonWhitespaceSequence","boundedNonWhitespaceSequence","url","notebookCell","command","textFragment","disqualifyDelimiter"];function sP(t){return qo.includes(t.type)}var aP=["simpleScopeTypeType","complexScopeTypeType","customRegex","pairedDelimiter","action","customAction","grapheme"],rl=class extends Error{constructor(e){super(e),this.name="NeedsInitialTalonUpdateError"}},da=class extends Error{constructor(){super("Custom spoken forms are not currently supported in this ide"),this.name="DisabledCustomSpokenFormsError"}};function nl(t){return t.replace(/([A-Z])/g," $1").split(" ").map(e=>e.toLowerCase()).join(" ")}function zo(t){return t.version>=7}var oo=class{constructor(e){this.hashFunction=e;this.map={}}hash(e){return this.hashFunction(e).join("\0")}set(e,r){return this.map[this.hash(e)]=r,this}has(e){return this.hash(e)in this.map}get(e){return this.map[this.hash(e)]}delete(e){return delete this.map[this.hash(e)],this}clear(){return this.map={},this}};var so=class extends Map{constructor(r){super();this.getDefaultValue=r}get(r){let n=super.get(r);if(n!=null)return n;let i=this.getDefaultValue(r);return this.set(r,i),i}};function cP(...t){return{dispose(){t.forEach(({dispose:e})=>{try{e()}catch(r){console.error(r)}})}}}function il(t){return typeof t=="string"||t instanceof String}function Mf(t){let[e,...r]=t;return l4(e,r)}function l4(t,e){let r;if(il(t)){let n=t,[i,o,...a]=e;r={version:0,spokenForm:n,action:i,targets:o,extraArgs:a,usePrePhraseSnapshot:!1}}else r=t;return r}function ol(t,e){let r=new Map;return t.forEach(n=>{let i=e(n),o;r.has(i)?o=r.get(i):(o=[],r.set(i,o)),o.push(n)}),r}function lP(t){for(let e of t)return!1;return!0}function wi(t){return Object.keys(t)}function sl(t,e){return`${t}.${e}`}var uP={camelCase(t){if(t.length===0)return"";let[e,...r]=t;return e+r.map(pP).join("")},snakeCase(t){return t.join("_")},upperSnakeCase(t){return t.map(e=>e.toUpperCase()).join("_")},pascalCase(t){return t.map(pP).join("")}};function pP(t){return t.length===0?"":t[0].toUpperCase()+t.substr(1)}function fP(t,e,r){if(t.length<2)return[...t];if(t.length===2)return e(t[0],t[1])?[t[0]]:[...t];let n=[],i=t.reduce((o,a)=>{let l=r(a),p=o.get(l);return p==null?(o.set(l,[a]),o):(o.get(l).push(a),p.length===2&&n.push(l),o)},new Map);return n.length===0?[...t]:(n.forEach(o=>{i.set(o,Bc(i.get(o),e))}),t.flatMap(o=>{let a=r(o),l=i.get(a);if(l==null||l.length===0)return[];let p=l[0];return e(p,o)?(l.shift(),p):[]}))}function Go(t,e){if(t.length!==e.length)throw new Error("Lists must have the same length");return t.map((r,n)=>[r,e[n]])}var xP=Symbol.for("immer-nothing"),dP=Symbol.for("immer-draftable"),Lr=Symbol.for("immer-state"),p4=process.env.NODE_ENV!=="production"?[function(t){return`The plugin for '${t}' has not been loaded into Immer. To enable the plugin, import and call \`enable${t}()\` when initializing your application.`},function(t){return`produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '${t}'`},"This object has been frozen and should not be mutated",function(t){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+t},"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.","Immer forbids circular references","The first or second argument to `produce` must be a function","The third argument to `produce` must be a function or undefined","First argument to `createDraft` must be a plain object, an array, or an immerable object","First argument to `finishDraft` must be a draft returned by `createDraft`",function(t){return`'current' expects a draft, got: ${t}`},"Object.defineProperty() cannot be used on an Immer draft","Object.setPrototypeOf() cannot be used on an Immer draft","Immer only supports deleting array indices","Immer only supports setting array indices and the 'length' property",function(t){return`'original' expects a draft, got: ${t}`}]:[];function yr(t,...e){if(process.env.NODE_ENV!=="production"){let r=p4[t],n=typeof r=="function"?r.apply(null,e):r;throw new Error(`[Immer] ${n}`)}throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var ma=Object.getPrototypeOf;function ha(t){return!!t&&!!t[Lr]}function Qo(t){return t?TP(t)||Array.isArray(t)||!!t[dP]||!!t.constructor?.[dP]||Cf(t)||Of(t):!1}var u4=Object.prototype.constructor.toString();function TP(t){if(!t||typeof t!="object")return!1;let e=ma(t);if(e===null)return!0;let r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===u4}function Af(t,e){Ff(t)===0?Reflect.ownKeys(t).forEach(r=>{e(r,t[r],t)}):t.forEach((r,n)=>e(n,r,t))}function Ff(t){let e=t[Lr];return e?e.type_:Array.isArray(t)?1:Cf(t)?2:Of(t)?3:0}function BT(t,e){return Ff(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function SP(t,e,r){let n=Ff(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function f4(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Cf(t){return t instanceof Map}function Of(t){return t instanceof Set}function Ko(t){return t.copy_||t.base_}function HT(t,e){if(Cf(t))return new Map(t);if(Of(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);let r=TP(t);if(e===!0||e==="class_only"&&!r){let n=Object.getOwnPropertyDescriptors(t);delete n[Lr];let i=Reflect.ownKeys(n);for(let o=0;o<i.length;o++){let a=i[o],l=n[a];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[a]={configurable:!0,writable:!0,enumerable:l.enumerable,value:t[a]})}return Object.create(ma(t),n)}else{let n=ma(t);if(n!==null&&r)return{...t};let i=Object.create(n);return Object.assign(i,t)}}function zT(t,e=!1){return Nf(t)||ha(t)||!Qo(t)||(Ff(t)>1&&(t.set=t.add=t.clear=t.delete=d4),Object.freeze(t),e&&Object.entries(t).forEach(([r,n])=>zT(n,!0))),t}function d4(){yr(2)}function Nf(t){return Object.isFrozen(t)}var m4={};function Zo(t){let e=m4[t];return e||yr(0,t),e}var al;function vP(){return al}function h4(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function mP(t,e){e&&(Zo("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function WT(t){$T(t),t.drafts_.forEach(g4),t.drafts_=null}function $T(t){t===al&&(al=t.parent_)}function hP(t){return al=h4(al,t)}function g4(t){let e=t[Lr];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function gP(t,e){e.unfinalizedDrafts_=e.drafts_.length;let r=e.drafts_[0];return t!==void 0&&t!==r?(r[Lr].modified_&&(WT(e),yr(4)),Qo(t)&&(t=Df(e,t),e.parent_||If(e,t)),e.patches_&&Zo("Patches").generateReplacementPatches_(r[Lr].base_,t,e.patches_,e.inversePatches_)):t=Df(e,r,[]),WT(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==xP?t:void 0}function Df(t,e,r){if(Nf(e))return e;let n=e[Lr];if(!n)return Af(e,(i,o)=>yP(t,n,e,i,o,r)),e;if(n.scope_!==t)return e;if(!n.modified_)return If(t,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;let i=n.copy_,o=i,a=!1;n.type_===3&&(o=new Set(i),i.clear(),a=!0),Af(o,(l,p)=>yP(t,n,i,l,p,r,a)),If(t,i,!1),r&&t.patches_&&Zo("Patches").generatePatches_(n,r,t.patches_,t.inversePatches_)}return n.copy_}function yP(t,e,r,n,i,o,a){if(process.env.NODE_ENV!=="production"&&i===r&&yr(5),ha(i)){let l=o&&e&&e.type_!==3&&!BT(e.assigned_,n)?o.concat(n):void 0,p=Df(t,i,l);if(SP(r,n,p),ha(p))t.canAutoFreeze_=!1;else return}else a&&r.add(i);if(Qo(i)&&!Nf(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;Df(t,i),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&If(t,i)}}function If(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&zT(e,r)}function y4(t,e){let r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:vP(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1},i=n,o=GT;r&&(i=[n],o=cl);let{revoke:a,proxy:l}=Proxy.revocable(i,o);return n.draft_=l,n.revoke_=a,l}var GT={get(t,e){if(e===Lr)return t;let r=Ko(t);if(!BT(r,e))return x4(t,r,e);let n=r[e];return t.finalized_||!Qo(n)?n:n===UT(t.base_,e)?(VT(t),t.copy_[e]=qT(n,t)):n},has(t,e){return e in Ko(t)},ownKeys(t){return Reflect.ownKeys(Ko(t))},set(t,e,r){let n=bP(Ko(t),e);if(n?.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){let i=UT(Ko(t),e),o=i?.[Lr];if(o&&o.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(f4(r,i)&&(r!==void 0||BT(t.base_,e)))return!0;VT(t),jT(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return UT(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,VT(t),jT(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){let r=Ko(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){yr(11)},getPrototypeOf(t){return ma(t.base_)},setPrototypeOf(){yr(12)}},cl={};Af(GT,(t,e)=>{cl[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});cl.deleteProperty=function(t,e){return process.env.NODE_ENV!=="production"&&isNaN(parseInt(e))&&yr(13),cl.set.call(this,t,e,void 0)};cl.set=function(t,e,r){return process.env.NODE_ENV!=="production"&&e!=="length"&&isNaN(parseInt(e))&&yr(14),GT.set.call(this,t[0],e,r,t[0])};function UT(t,e){let r=t[Lr];return(r?Ko(r):t)[e]}function x4(t,e,r){let n=bP(e,r);return n?"value"in n?n.value:n.get?.call(t.draft_):void 0}function bP(t,e){if(!(e in t))return;let r=ma(t);for(;r;){let n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=ma(r)}}function jT(t){t.modified_||(t.modified_=!0,t.parent_&&jT(t.parent_))}function VT(t){t.copy_||(t.copy_=HT(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var T4=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){let o=r;r=e;let a=this;return function(p=o,...u){return a.produce(p,d=>r.call(this,d,...u))}}typeof r!="function"&&yr(6),n!==void 0&&typeof n!="function"&&yr(7);let i;if(Qo(e)){let o=hP(this),a=qT(e,void 0),l=!0;try{i=r(a),l=!1}finally{l?WT(o):$T(o)}return mP(o,n),gP(i,o)}else if(!e||typeof e!="object"){if(i=r(e),i===void 0&&(i=e),i===xP&&(i=void 0),this.autoFreeze_&&zT(i,!0),n){let o=[],a=[];Zo("Patches").generateReplacementPatches_(e,i,o,a),n(o,a)}return i}else yr(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(a,...l)=>this.produceWithPatches(a,p=>e(p,...l));let n,i;return[this.produce(e,r,(a,l)=>{n=a,i=l}),n,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){Qo(t)||yr(8),ha(t)&&(t=S4(t));let e=hP(this),r=qT(t,void 0);return r[Lr].isManual_=!0,$T(e),r}finishDraft(t,e){let r=t&&t[Lr];(!r||!r.isManual_)&&yr(9);let{scope_:n}=r;return mP(n,e),gP(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){let i=e[r];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}r>-1&&(e=e.slice(r+1));let n=Zo("Patches").applyPatches_;return ha(t)?n(t,e):this.produce(t,i=>n(i,e))}};function qT(t,e){let r=Cf(t)?Zo("MapSet").proxyMap_(t,e):Of(t)?Zo("MapSet").proxySet_(t,e):y4(t,e);return(e?e.scope_:vP()).drafts_.push(r),r}function S4(t){return ha(t)||yr(10,t),wP(t)}function wP(t){if(!Qo(t)||Nf(t))return t;let e=t[Lr],r;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=HT(t,e.scope_.immer_.useStrictShallowCopy_)}else r=HT(t,!0);return Af(r,(n,i)=>{SP(r,n,wP(i))}),e&&(e.finalized_=!1),r}var Ur=new T4,Lf=Ur.produce,Tge=Ur.produceWithPatches.bind(Ur),Sge=Ur.setAutoFreeze.bind(Ur),vge=Ur.setUseStrictShallowCopy.bind(Ur),bge=Ur.applyPatches.bind(Ur),wge=Ur.createDraft.bind(Ur),_ge=Ur.finishDraft.bind(Ur);var rr=dr(qP(),1),lye=rr.default.v1,pye=rr.default.v1ToV6,uye=rr.default.v3,zP=rr.default.v4,fye=rr.default.v5,dye=rr.default.v6,mye=rr.default.v6ToV1,hye=rr.default.v7,gye=rr.default.NIL,yye=rr.default.MAX,xye=rr.default.version,Tye=rr.default.validate,Sye=rr.default.stringify,vye=rr.default.parse;function GP(t,e,r){if(e>=t.length)throw Error(`Expected at least ${e+1} ${r} but received only ${t.length}`);return t[e]}function rd(t,e){if(Array.isArray(t))return t.map(r=>rd(r,e));if(typeof t=="object"&&t!=null){if(W6(t))return GP(e,t.index,"placeholder value");let r={};for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=rd(t[n],e));return r}return t}function W6(t){return typeof t=="object"&&t!=null&&"type"in t&&t.type==="placeholder"}var ld=dr(QP(),1);var $6={blue:"blue",green:"green",red:"red",pink:"pink",yellow:"yellow",userColor1:"navy",userColor2:"apricot",default:null},j6={ex:"ex",fox:"fox",wing:"wing",hole:"hole",frame:"frame",curve:"curve",eye:"eye",play:"play",crosshairs:"cross",bolt:"bolt",default:null},id={cursor:"this",that:"that",source:"source",nothing:"nothing",keyboard:null,explicit:null,decoratedSymbol:null,lineNumber:null,range:null,target:null},od={modulo100:"row",relativeUp:"up",relativeDown:"down"};function ZP(t){let e=$6[t];if(e==null)throw Error(`Unknown hat color '${t}'`);return e}function YP(t){let e=j6[t];if(e==null)throw Error(`Unknown hat shape '${t}'`);return e}function iS(t,e){return Object.fromEntries(Object.entries(t).map(([r,n])=>[r,Object.fromEntries(Object.entries(n).map(([i,o])=>[i,e(o,r,i)]))]))}var q6=Object.fromEntries("air bat cap drum each fine gust harp sit jury crunch look made near odd pit quench red sun trap urge vest whale plex yank zip".split(" ").map((t,e)=>[String.fromCharCode(97+e),t])),z6=Object.fromEntries("zero one two three four five six seven eight nine".split(" ").map((t,e)=>[e.toString(),t])),G6={".":"dot",",":"comma",";":"semicolon",":":"colon","!":"bang","*":"asterisk","@":"at sign","&":"ampersand","?":"question","/":"slash","\\":"backslash","-":"dash","=":"equals","+":"plus","~":"tilde",_:"underscore","#":"hash","%":"percent","^":"caret","|":"pipe",$:"dollar","\xA3":"pound","'":"quote",'"':"double quote","`":"back tick","(":"paren",")":"right paren","{":"brace","}":"right brace","[":"square","]":"right square","<":"angle",">":"right angle","\uFFFD":"special"},XP={...q6,...z6,...G6};function ao(...t){return{defaultSpokenForms:t,isDisabledByDefault:!0,isPrivate:!1}}function Nt(...t){return{defaultSpokenForms:t,isDisabledByDefault:!0,isPrivate:!0}}var JP={pairedDelimiter:{curlyBrackets:"curly",angleBrackets:"diamond",escapedDoubleQuotes:"escaped quad",escapedSingleQuotes:"escaped twin",escapedParentheses:"escaped round",escapedSquareBrackets:"escaped box",doubleQuotes:"quad",parentheses:"round",backtickQuotes:"skis",squareBrackets:"box",singleQuotes:"twin",tripleDoubleQuotes:Nt("triple quad"),tripleSingleQuotes:Nt("triple twin"),any:"pair",string:"string",whitespace:"void",collectionBoundary:Nt("collection boundary")},simpleScopeTypeType:{argumentOrParameter:"arg",attribute:"attribute",functionCall:"call",functionCallee:"callee",className:"class name",class:"class",comment:"comment",functionName:"funk name",namedFunction:"funk",ifStatement:"if state",instance:"instance",collectionItem:"item",collectionKey:"key",anonymousFunction:"lambda",list:"list",map:"map",name:"name",regularExpression:"regex",section:"section",sectionLevelOne:ao("one section"),sectionLevelTwo:ao("two section"),sectionLevelThree:ao("three section"),sectionLevelFour:ao("four section"),sectionLevelFive:ao("five section"),sectionLevelSix:ao("six section"),selector:"selector",statement:"state",branch:"branch",type:"type",value:"value",condition:"condition",unit:"unit",xmlElement:"element",xmlBothTags:"tags",xmlStartTag:"start tag",xmlEndTag:"end tag",part:"part",chapter:"chapter",subSection:"subsection",subSubSection:"subsubsection",namedParagraph:"paragraph",subParagraph:"subparagraph",environment:"environment",command:"command",character:"char",word:"sub",token:"token",identifier:"identifier",line:"line",sentence:"sentence",paragraph:"block",boundedParagraph:"short block",document:"file",nonWhitespaceSequence:"paint",boundedNonWhitespaceSequence:"short paint",url:"link",notebookCell:"cell",string:Nt("parse tree string"),textFragment:Nt("text fragment"),disqualifyDelimiter:Nt("disqualify delimiter"),"private.fieldAccess":Nt("access"),"private.switchStatementSubject":Nt("subject")},complexScopeTypeType:{glyph:"glyph"},surroundingPairForceDirection:{left:"left",right:"right"},simpleModifier:{excludeInterior:"bounds",toRawSelection:"just",leading:"leading",trailing:"trailing",keepContentFilter:"content",keepEmptyFilter:"empty",inferPreviousMark:"its",startOf:"start of",endOf:"end of",interiorOnly:"inside",visible:"visible",extendThroughStartOf:"head",extendThroughEndOf:"tail",everyScope:"every"},modifierExtra:{first:"first",last:"last",previous:"previous",next:"next",forward:"forward",backward:"backward",ancestor:"grand"},customRegex:{},action:{breakLine:"break",scrollToBottom:"bottom",toggleLineBreakpoint:"break point",cutToClipboard:"carve",scrollToCenter:"center",clearAndSetSelection:"change",remove:"chuck",insertCopyBefore:"clone up",insertCopyAfter:"clone",toggleLineComment:"comment",copyToClipboard:"copy",scrollToTop:"crown",outdentLine:"dedent",revealDefinition:"define",editNewLineBefore:"drink",insertEmptyLineBefore:"drop",extractVariable:"extract",insertEmptyLineAfter:"float",foldRegion:"fold",followLink:"follow",followLinkAside:"follow split",deselect:"give",highlight:"highlight",showHover:"hover",increment:"increment",decrement:"decrement",indentLine:"indent",showDebugHover:"inspect",setSelectionAfter:"post",editNewLineAfter:"pour",setSelectionBefore:"pre",insertEmptyLinesAround:"puff",showQuickFix:"quick fix",showReferences:"reference",rename:"rename",reverseTargets:"reverse",findInDocument:"scout",findInWorkspace:"scout all",randomizeTargets:"shuffle",generateSnippet:"snippet make",sortTargets:"sort",setSelection:"take",revealTypeDefinition:"type deaf",unfoldRegion:"unfold",callAsFunction:"call",swapTargets:"swap",replaceWithTarget:"bring",moveToTarget:"move",wrapWithPairedDelimiter:"wrap",wrapWithSnippet:"wrap",rewrapWithPairedDelimiter:"repack",insertSnippet:"snippet",pasteFromClipboard:"paste",joinLines:"join","private.showParseTree":Nt("parse tree"),"experimental.setInstanceReference":ao("from"),editNew:Nt("edit new"),executeCommand:Nt("execute command"),parsed:Nt("parsed"),getText:Nt("get text"),replace:Nt("replace"),"private.getTargets":Nt("get targets"),"private.setKeyboardTarget":Nt("set keyboard target")},customAction:{},grapheme:XP};var oS=iS(JP,t=>typeof t=="string"?{defaultSpokenForms:[t],isDisabledByDefault:!1,isPrivate:!1}:t),Ei=iS(oS,({defaultSpokenForms:t,isDisabledByDefault:e,isPrivate:r})=>({spokenForms:e?[]:t,isCustom:!1,defaultSpokenForms:t,requiresTalonUpdate:!1,isPrivate:r}));var ut={rangeExclusive:"between",rangeInclusive:"past",rangeExcludingStart:null,rangeExcludingEnd:"until",listConnective:"and",swapConnective:"with",sourceDestinationConnective:"to",before:"before",after:"after",verticalRange:"slice",previous:"previous",next:"next",forward:"forward",backward:"backward"};var rM=dr(tM(),1),ad=class{constructor(e){this.mooLexer=rM.default.compile(e)}reset(e,r){let{mooState:n}=r??{};return this.mooLexer.reset(e,n),this}formatError(e,r){return this.mooLexer.formatError(e,r)}has(e){return this.mooLexer.has(e)}save(){return{mooState:this.mooLexer.save()}}next(){let e=this.mooLexer.next();return this.skipToken(e)?this.next():e}transform({value:e}){return e}skipToken(e){return e?.type==="ws"}};var Ri={};for(let t of LT){let{spokenForms:e}=Ei.action[t];for(let r of e)Ri[r]={type:"simpleActionName",value:t}}var K6=["replaceWithTarget","moveToTarget"];for(let t of K6){let{spokenForms:e}=Ei.action[t];for(let r of e)Ri[r]={type:"bringMove",value:t}}var Q6=["before","after","to"];for(let t of Q6){let e=ut[t==="to"?"sourceDestinationConnective":t];Ri[e]={type:"insertionMode",value:t}}for(let t of qo){let{spokenForms:e}=Ei.simpleScopeTypeType[t];for(let r of e)Ri[r]={type:"simpleScopeTypeType",value:t}}for(let t of Pf){let{spokenForms:e}=Ei.pairedDelimiter[t];for(let r of e)Ri[r]={type:"pairedDelimiter",value:t}}for(let[t,e]of Object.entries(id))e!=null&&(Ri[e]={type:"simpleMarkType",value:t});var ki=new ad({ws:/[ \t]+/,placeholderTarget:{match:/<target\d*>/,value:t=>t.slice(7,-1)},token:{match:Object.keys(Ri),type:t=>Ri[t].type,value:t=>Ri[t].value}});function nM(t,e){return{name:t,target:e}}function iM(t,e,r){return{name:t,source:e,destination:r}}function cd(t,e){let r={type:"primitive"};return t!=null&&(r.modifiers=t),e!=null&&(r.mark=e),r}function oM(t,e){return{type:"primitive",insertionMode:t,target:e}}function sM(t){return{type:"containingScope",scopeType:t}}function aM(t){return{type:t}}function cM(t){return{type:"surroundingPair",delimiter:t}}function lM(t){return{type:t}}function pM(t){return{type:"target",target:{type:"placeholder",index:t.length===0?0:parseInt(t)-1}}}function sS(t){return t[0]}var Z6={Lexer:ki,ParserRules:[{name:"main",symbols:["action"],postprocess:sS},{name:"action",symbols:[ki.has("simpleActionName")?{type:"simpleActionName"}:simpleActionName,"target"],postprocess:([t,e])=>nM(t,e)},{name:"action",symbols:[ki.has("bringMove")?{type:"bringMove"}:bringMove,"target","destination"],postprocess:([t,e,r])=>iM(t,e,r)},{name:"destination",symbols:["primitiveDestination"],postprocess:sS},{name:"destination",symbols:[ki.has("insertionMode")?{type:"insertionMode"}:insertionMode,"target"],postprocess:([t,e])=>oM(t,e)},{name:"target",symbols:["primitiveTarget"],postprocess:sS},{name:"primitiveTarget$ebnf$1",symbols:["modifier"]},{name:"primitiveTarget$ebnf$1",symbols:["primitiveTarget$ebnf$1","modifier"],postprocess:t=>t[0].concat([t[1]])},{name:"primitiveTarget",symbols:["primitiveTarget$ebnf$1"],postprocess:([t])=>cd(t,void 0)},{name:"primitiveTarget",symbols:["mark"],postprocess:([t])=>cd(void 0,t)},{name:"primitiveTarget$ebnf$2",symbols:["modifier"]},{name:"primitiveTarget$ebnf$2",symbols:["primitiveTarget$ebnf$2","modifier"],postprocess:t=>t[0].concat([t[1]])},{name:"primitiveTarget",symbols:["primitiveTarget$ebnf$2","mark"],postprocess:([t,e])=>cd(t,e)},{name:"modifier",symbols:["containingScopeModifier"],postprocess:([t])=>t},{name:"containingScopeModifier",symbols:["scopeType"],postprocess:([t])=>sM(t)},{name:"scopeType",symbols:[ki.has("simpleScopeTypeType")?{type:"simpleScopeTypeType"}:simpleScopeTypeType],postprocess:([t])=>aM(t)},{name:"scopeType",symbols:[ki.has("pairedDelimiter")?{type:"pairedDelimiter"}:pairedDelimiter],postprocess:([t])=>cM(t)},{name:"mark",symbols:[ki.has("simpleMarkType")?{type:"simpleMarkType"}:simpleMarkType],postprocess:([t])=>lM(t)},{name:"mark",symbols:[ki.has("placeholderTarget")?{type:"placeholderTarget"}:placeholderTarget],postprocess:([t])=>pM(t)}],ParserStart:"main"},uM=Z6;function Y6(){return new ld.Parser(ld.Grammar.fromCompiled(uM))}function fM(t){let e=Y6();if(e.feed(t),e.results.length!==1)throw new Error(`Expected exactly one result, got ${e.results.length}`);return e.results[0]}function pd(t,e){let r=fM(t);return rd(r,e)}function fl(t){switch(t.name){case"callAsFunction":return[t.callee,t.argument];case"replaceWithTarget":case"moveToTarget":return[t.source,...dM(t.destination)];case"swapTargets":return[t.target1,t.target2];case"pasteFromClipboard":case"insertSnippet":case"replace":case"editNew":return dM(t.destination);case"parsed":return fl(pd(t.content,t.arguments));default:return[t.target]}}function dM(t){switch(t.type){case"list":return t.destinations.map(({target:e})=>e);case"primitive":return[t.target];case"implicit":return[]}}function cS(t){return t.flatMap(aS)}function aS(t){switch(t.type){case"primitive":return[t];case"list":return t.elements.flatMap(aS);case"range":return[t.anchor,t.active].flatMap(aS);case"implicit":return[]}}var X6={arrowFunction:"anonymousFunction",dictionary:"map",regex:"regularExpression"},J6={purple:"pink"};function e9(t){t.modifiers?.forEach(e=>{(e.type==="containingScope"||e.type==="everyScope")&&(e.scopeType.type=X6[e.scopeType.type]??e.scopeType.type)})}function t9(t){t.mark?.type==="decoratedSymbol"&&(t.mark.symbolColor=J6[t.mark.symbolColor]??t.mark.symbolColor)}function lS(t){cS(t).forEach(e=>{e9(e),t9(e)})}function mM(t){return{...t,version:1}}var r9={type:"primitive",mark:{type:"cursor"},selectionType:"token",position:"contents",modifier:{type:"identity"},insideOutsideType:"inside"},n9={type:"primitive",isImplicit:!0},hM=t=>Si(t,r9)?n9:t;function gM(t){let e=t.action;return{spokenForm:t.spokenForm,action:{name:e,args:t.extraArgs},targets:o9(t.targets,e),usePrePhraseSnapshot:t.usePrePhraseSnapshot??!1,version:2}}function i9(t){switch(t.type){case"identity":return[];case"containingScope":{let{includeSiblings:e,scopeType:r,type:n,...i}=t;return[{type:e?"everyScope":"containingScope",scopeType:{type:r},...i}]}case"surroundingPair":{let{delimiterInclusion:e,...r}=t,n={type:"containingScope",scopeType:r};return e==="interiorOnly"||e==="excludeInterior"?n.scopeType.delimiter==="any"?[{type:e}]:[{type:e},n]:[n]}case"subpiece":{let{type:e,pieceType:r,...n}=t;return[{type:"ordinalRange",scopeType:{type:r},...n}]}case"head":return[{type:"extendThroughStartOf"}];case"tail":return[{type:"extendThroughEndOf"}];default:return[t]}}function pS(t,e){let{type:r,isImplicit:n,mark:i,insideOutsideType:o,modifier:a,selectionType:l,position:p}=t,u=[];if(p&&p!=="contents"&&(p==="before"?o==="inside"?u.push({type:"position",position:"start"}):e==="remove"?u.push({type:"leading"}):u.push({type:"position",position:"before"}):o==="inside"?u.push({type:"position",position:"end"}):e==="remove"?u.push({type:"trailing"}):u.push({type:"position",position:"after"})),l)switch(l){case"token":if(a?.type==="subpiece")break;case"line":if(i?.type==="lineNumber")break;default:u.push({type:"containingScope",scopeType:{type:l}})}return a&&u.push(...i9(a)),{type:r,isImplicit:n,modifiers:u.length>0?u:void 0,mark:i?.type==="cursorToken"?void 0:i}}function yM(t,e){switch(t.type){case"list":return{...t,elements:t.elements.map(r=>yM(r,e))};case"range":{let{type:r,rangeType:n,start:i,end:o,excludeStart:a,excludeEnd:l}=t;return{type:r,rangeType:n,anchor:pS(i,e),active:pS(o,e),excludeAnchor:a??!1,excludeActive:l??!1}}case"primitive":return pS(t,e)}}function o9(t,e){return t.map(r=>yM(r,e)).map(r=>r.type==="primitive"?hM(r):r)}function xM(t){return{...t,version:3,targets:t.targets.map(TM)}}function TM(t){switch(t.type){case"list":return{...t,elements:t.elements.map(e=>TM(e))};case"range":{let{anchor:e,active:r,...n}=t;return{anchor:uS(e),active:uS(r),...n}}case"primitive":return uS(t)}}function uS(t){let e=t.modifiers!=null?t.modifiers.map(a9):void 0;if(t.mark?.type==="lineNumber"){let{anchor:r,active:n}=t.mark;if(r.type!==n.type||r.lineNumber<0!=n.lineNumber<0)return{type:"range",anchor:{type:"primitive",mark:ml(r),modifiers:e},active:{type:"primitive",mark:ml(n)},excludeAnchor:!1,excludeActive:!1}}return{...t,mark:t.mark!=null?s9(t.mark):void 0,modifiers:e}}function s9(t){switch(t.type){case"lineNumber":return c9(t);default:return t}}function a9(t){switch(t.type){case"ordinalRange":return l9(t);default:return t}}function c9(t){return Si(t.anchor,t.active)?ml(t.anchor):{type:"range",anchor:ml(t.anchor),active:ml(t.active)}}function l9(t){return t.anchor===t.active?dl(t.scopeType,t.anchor):t.anchor===0&&t.active>t.anchor?dl(t.scopeType,t.anchor,t.active-t.anchor+1):t.anchor<0&&t.active===-1?dl(t.scopeType,t.anchor,-t.anchor):{type:"range",anchor:dl(t.scopeType,t.anchor),active:dl(t.scopeType,t.active),excludeAnchor:t.excludeAnchor,excludeActive:t.excludeActive}}function ml(t){return{type:"lineNumber",lineNumberType:t.type,lineNumber:t.lineNumber}}function dl(t,e,r=1){return{type:"ordinalScope",scopeType:t,start:e,length:r}}function vM(t){return{...t,version:4,targets:t.targets.map(bM)}}function bM(t){switch(t.type){case"primitive":return SM(t);case"range":{let{anchor:e,...r}=t;return{...r,anchor:SM(e)}}case"list":{let{elements:e,...r}=t;return{...r,elements:e.map(bM)}}}}function SM(t){return t.mark==null&&t.modifiers==null||t.isImplicit?{type:"implicit"}:t}function wM(t){return{...t,version:5,action:p9(t.action),targets:t.targets.map(ud)}}function p9(t){switch(t.name){case"wrapWithSnippet":{let[e,r]=u9(t.args[0]);return{name:"wrapWithSnippet",args:[{type:"named",name:e,variableName:r}]}}case"insertSnippet":{let[e,r]=t.args,n={type:"named",name:e};return r!=null&&(n.substitutions=r),{name:"insertSnippet",args:[n]}}default:return t}}function u9(t){let[e,r]=t.split(".");if(e==null||r==null)throw new Error("Snippet location missing '.'");return[e,r]}function ud(t){switch(t.type){case"implicit":return t;case"list":return{...t,elements:t.elements.map(ud)};case"range":return{...t,anchor:ud(t.anchor),active:ud(t.active)};case"primitive":return{...t,mark:t.mark!=null?fS(t.mark):void 0,modifiers:t.modifiers!=null&&t.modifiers.length>0?t.modifiers.map(dS):void 0}}}function fS(t){return t.type==="range"?{...t,anchor:fS(t.anchor),active:fS(t.active),excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1}:t}function dS(t){return t.type==="range"?{...t,anchor:dS(t.anchor),active:dS(t.active),excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1}:t}var f9={bring:"replaceWithTarget",call:"callAsFunction",clear:"clearAndSetSelection",commentLines:"toggleLineComment",copy:"copyToClipboard",cut:"cutToClipboard",delete:"remove",editNewLineAbove:"editNewLineBefore",editNewLineBelow:"editNewLineAfter",findInFiles:"findInWorkspace",fold:"foldRegion",indentLines:"indentLine",insertEmptyLineAbove:"insertEmptyLineBefore",insertEmptyLineBelow:"insertEmptyLineAfter",insertLineAfter:"editNewLineAfter",insertLineBefore:"editNewLineBefore",move:"moveToTarget",outdentLines:"outdentLine",paste:"pasteFromClipboard",reverse:"reverseTargets",setBreakpoint:"toggleLineBreakpoint",sort:"sortTargets",swap:"swapTargets",unfold:"unfoldRegion",use:"replaceWithTarget",wrap:"wrapWithPairedDelimiter"};function mS(t){let e=f9[t]??t;if(!oP.includes(e))throw new Error(`Unknown action name: ${e}`);return e}function _M(t){return{version:6,spokenForm:t.spokenForm,usePrePhraseSnapshot:t.usePrePhraseSnapshot,action:d9(t.action,t.targets)}}function d9(t,e){let r=mS(t.name);switch(r){case"replaceWithTarget":case"moveToTarget":return{name:r,source:an(e[0]),destination:hl(e[1])};case"swapTargets":return{name:r,target1:an(e[0]),target2:an(e[1])};case"callAsFunction":return{name:r,callee:an(e[0]),argument:an(e[1])};case"pasteFromClipboard":return{name:r,destination:hl(e[0])};case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return{name:r,left:t.args[0],right:t.args[1],target:an(e[0])};case"generateSnippet":return{name:r,snippetName:t.args?.[0],target:an(e[0])};case"insertSnippet":return{name:r,snippetDescription:t.args[0],destination:hl(e[0])};case"wrapWithSnippet":return{name:r,snippetDescription:t.args[0],target:an(e[0])};case"executeCommand":return{name:r,commandId:t.args[0],options:t.args?.[1],target:an(e[0])};case"replace":return{name:r,replaceWith:t.args[0],destination:hl(e[0])};case"highlight":{let n={name:r,target:an(e[0])};return t.args?.[0]!=null&&(n.highlightId=t.args?.[0]),n}case"editNew":return{name:r,destination:hl(e[0])};case"getText":return{name:r,options:t.args?.[0],target:an(e[0])};case"parsed":throw Error("Parsed action should not be present in V5");default:return{name:r,target:an(e[0])}}}function an(t){switch(t.type){case"list":case"range":case"primitive":return m9(t);case"implicit":return t}}function m9(t){switch(t.type){case"list":return h9(t);case"range":case"primitive":return fd(t)}}function h9(t){return{...t,elements:t.elements.map(fd)}}function fd(t){switch(t.type){case"range":return EM(t);case"primitive":return dd(t)}}function EM(t){let{anchor:e,active:r}=t,n={type:"range",anchor:e.type==="implicit"?e:dd(e),active:dd(r),excludeAnchor:t.excludeAnchor,excludeActive:t.excludeActive};return t.rangeType!=null&&(n.rangeType=t.rangeType),n}function dd(t){let e={type:"primitive"},r=v9(t.modifiers);return r!=null&&(e.modifiers=r),t.mark!=null&&(e.mark=t.mark),e}function hl(t){switch(t.type){case"list":return g9(t);case"range":return y9(t);case"primitive":return x9(t);case"implicit":return T9()}}function g9(t){let e=[],r=[],n,i=()=>{r.length>0&&e.push({type:"primitive",insertionMode:n??"to",target:r.length===1?r[0]:{type:"list",elements:r}})};return t.elements.forEach(o=>{let a=md(o);a!=null?(i(),r=[fd(o)],n=a):r.push(fd(o))}),i(),e.length>1?{type:"list",destinations:e}:e[0]}function y9(t){return{type:"primitive",insertionMode:md(t.anchor)??"to",target:EM(t)}}function x9(t){return{type:"primitive",insertionMode:md(t)??"to",target:dd(t)}}function T9(){return{type:"implicit"}}function md(t){switch(t.type){case"implicit":return"to";case"primitive":return S9(t);case"range":return md(t.anchor)}}function S9(t){let e=t.modifiers?.find(r=>r.type==="position");if(e!=null){if(t.modifiers.indexOf(e)!==0)throw Error("Position modifier has to be at first index");if(e?.position==="before"||e?.position==="after")return e.position}}function v9(t){let e=[];if(t!=null)for(let r of t)r.type==="position"?r.position==="start"?e.push({type:"startOf"}):r.position==="end"&&e.push({type:"endOf"}):e.push(r);return e.length>0?e:void 0}function RM(t){return{...t,version:7}}function gS(t){let e=b9(t,7),{action:r,usePrePhraseSnapshot:n=!1,spokenForm:i}=e;return{version:7,spokenForm:i,action:Lf(r,o=>{let a=fl(o);lS(a),r.name}),usePrePhraseSnapshot:n}}function b9(t,e){if(t.version>7)throw new Mu;for(;t.version<e;)switch(t.version){case 0:t=mM(t);break;case 1:t=gM(t);break;case 2:t=xM(t);break;case 3:t=vM(t);break;case 4:t=wM(t);break;case 5:t=_M(t);break;case 6:t=RM(t);break;default:throw new Error(`Can't upgrade from unknown version ${t.version}`)}return t}var yS;function hd(t){yS=t}function D(){if(yS==null)throw Error("Tried to access ide before it was injected");return yS}var gd=class{constructor(e){this.maxLength=e;this.stack=[];this.index=void 0}push(e){this.index!=null?this.stack.splice(this.index+1,this.stack.length-this.index-1,e):this.stack.push(e),this.stack.length>this.maxLength&&this.stack.shift(),this.index=this.stack.length-1}undo(){if(this.index!=null&&this.index>0)return this.index--,this.stack[this.index]}redo(){if(this.index!=null&&this.index<this.stack.length-1)return this.index++,this.stack[this.index]}};var w9=25,yd=class{constructor(){this.targetMap=new Map;this.targetHistory=new so(()=>new gd(w9));this.notifier=new Wt}set(e,r,{history:n=!1}={}){this.targetMap.set(e,r),n&&r!=null&&this.targetHistory.get(e).push(r),this.notifier.notifyListeners(e,r)}get(e){return this.targetMap.get(e)}undo(e){let r=this.targetHistory.get(e).undo();r!=null&&this.set(e,r,{history:!1})}redo(e){let r=this.targetHistory.get(e).redo();r!=null&&this.set(e,r,{history:!1})}onStoredTargets(e){for(let r of ca)e(r,this.get(r));return this.notifier.registerListener(e)}};function co(t,e){return new W(new ce(e.start.line,0),t.document.lineAt(e.end).range.end)}function xS(t,e){return e.isEmpty?0:t.document.offsetAt(e.end)-t.document.offsetAt(e.start)}function kM(t,e){let[r,n]=e instanceof ce?[e,e]:[e.start,e.end];return t.start.isBefore(r)&&t.end.isAfter(n)}function Xo(t,...e){for(let r of e)r!=null&&(t=t.union(r));return t}var xd=class t{constructor(e,r,n){this.target=e;this.insertionMode=r;this.contentRange=E9(e.contentRange,r),this.isBefore=r==="before",this.isLineDelimiter=e.insertionDelimiter.includes(`
`),this.indentationString=n??this.isLineDelimiter?_9(e.editor,e.contentRange):"",this.insertionPrefix=e.prefixRange!=null?e.editor.document.getText(e.prefixRange):void 0}get contentSelection(){return this.contentRange.toSelection(this.target.isReversed)}get editor(){return this.target.editor}get insertionDelimiter(){return this.target.insertionDelimiter}get isRaw(){return this.target.isRaw}withTarget(e){return new t(e,this.insertionMode,this.indentationString)}getEditNewActionType(){return this.insertionMode==="after"&&this.target.contentRange.isSingleLine&&this.insertionDelimiter===`
`&&this.insertionPrefix==null?"insertLineAfter":"edit"}constructChangeEdit(e,r=!1){return this.insertionMode==="before"||this.insertionMode==="after"?this.constructEditWithDelimiters(e,r):this.constructEditWithoutDelimiters(e)}constructEditWithDelimiters(e,r){let n=this.getEditRange(),i=this.getEditText(e,r),o=a=>this.updateRange(a,e,r);return{range:n,text:i,isReplace:this.insertionMode==="after",updateRange:o}}constructEditWithoutDelimiters(e){return{range:this.contentRange,text:e,updateRange:r=>r}}getEditRange(){let e=(()=>{let r=this.isBefore?Xo(this.target.contentRange,this.target.prefixRange).start:this.target.contentRange.end;if(this.isLineDelimiter){let n=this.editor.document.lineAt(r),i=this.isBefore?n.rangeTrimmed?.start??n.range.start:n.rangeTrimmed?.end??n.range.end;if(r.isEqual(i))return this.isBefore?n.range.start:n.range.end}return r})();return new W(e,e)}getEditText(e,r){let i=(r?"":this.indentationString)+(this.insertionPrefix??"")+e;return this.isBefore?i+this.insertionDelimiter:this.insertionDelimiter+i}updateRange(e,r,n){let i=this.editor.document.offsetAt(e.start)+(n?0:this.indentationString.length)+(this.insertionPrefix?.length??0),o=this.isBefore?i:i+this.getLengthOfInsertionDelimiter(),a=o+r.length;return new W(this.editor.document.positionAt(o),this.editor.document.positionAt(a))}getLengthOfInsertionDelimiter(){if(this.editor.document.eol==="CRLF"){let e=this.insertionDelimiter.match(/\n/g);if(e!=null)return this.insertionDelimiter.length+e.length}return this.insertionDelimiter.length}};function _9(t,e){let r=Number.MAX_SAFE_INTEGER,n="";for(let i=e.start.line;i<=e.end.line;++i){let o=t.document.lineAt(i);if(o.range.isEmpty||o.isEmptyOrWhitespace&&!e.isSingleLine)continue;let a=o.rangeTrimmed?.start??o.range.end;a.character<r&&(r=a.character,n=o.text.slice(0,r))}return n}function E9(t,e){switch(e){case"before":return t.start.toEmptyRange();case"after":return t.end.toEmptyRange();case"to":return t}}function lo(t,e,r,n){return gl(t.contentRange,e.contentRange,r,n)}function gl(t,e,r,n){return new W(r?t.start:t.end,n?e.end:e.start)}function ga(t,e,r,n){let i=r?t.contentRange.start:new ce(t.contentRange.end.line+1,0),o=n?e.contentRange.end:e.editor.document.lineAt(e.contentRange.start.line-1).range.end;return new W(i,o)}var Ue=class t{constructor(e){this.isLine=!1;this.isToken=!0;this.hasExplicitScopeType=!0;this.hasExplicitRange=!0;this.isRaw=!1;this.isImplicit=!1;this.isNotebookCell=!1;this.isWord=!1;this.joinAs="line";this.state={editor:e.editor,isReversed:e.isReversed,contentRange:e.contentRange,thatTarget:e.thatTarget}}get editor(){return this.state.editor}get isReversed(){return this.state.isReversed}get thatTarget(){return this.state.thatTarget!=null?this.state.thatTarget.thatTarget:this}get contentText(){return this.editor.document.getText(this.contentRange)}get contentSelection(){return this.contentRange.toSelection(this.isReversed)}get contentRange(){return this.state.contentRange}constructRemovalEdit(){return{range:this.getRemovalRange(),text:"",updateRange:e=>e}}getRemovalHighlightRange(){return this.getRemovalRange()}withThatTarget(e){return this.cloneWith({thatTarget:e})}withContentRange(e){return this.cloneWith({contentRange:e})}getInterior(){}getBoundary(){}cloneWith(e){let r=Object.getPrototypeOf(this).constructor;return new r({...this.getCloneParameters(),...e})}maybeCreateRichRangeTarget(e,r){let{constructor:n}=Object.getPrototypeOf(this);return new n({...this.getCloneParameters(),isReversed:e,contentRange:lo(this,r,!0,!0)})}isEqual(e){return e instanceof t&&Si(this.getEqualityParameters(),e.getEqualityParameters())}getEqualityParameters(){let{thatTarget:e,...r}=this.getCloneParameters();return{...r}}toDestination(e){return new xd(this,e)}toPlainObject(){return{type:this.type,contentRange:Zc(this.contentRange),isReversed:this.isReversed,hasExplicitRange:this.hasExplicitRange}}};function Td(t,e){return R9(t,e.start,e.end)}function R9(t,e,r){return{editor:t.editor,selection:k9(t.selection,e,r)}}function k9(t,e,r){return t.isReversed?new Te(r,e):new Te(e,r)}function Sd(t,e){let{document:r}=t,n=r.getText(e),i=n.length-n.trimStart().length,o=n.length-n.trimEnd().length,a=r.offsetAt(e.start)+i,l=r.offsetAt(e.end)-o,p=r.positionAt(a),u=r.positionAt(l);return new W(p,u)}function vd(t,e,r,n){return r==null?void 0:new t({editor:e,isReversed:n,contentRange:r})}var He=class extends Ue{constructor(r){super(r);this.type="PlainTarget";this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.isToken=r.isToken??!0,this.insertionDelimiter=r.insertionDelimiter??""}getCloneParameters(){return{...this.state,isToken:this.isToken,insertionDelimiter:this.insertionDelimiter}}};function ya(t,e,r){return vd(He,t,e,r)}var bd=class extends Ue{constructor(r){super(r);this.type="DocumentTarget";this.insertionDelimiter=`
`;this.isLine=!0}getLeadingDelimiterTarget(){}getTrailingDelimiterTarget(){}getRemovalRange(){return this.contentRange}getInterior(){return[new He({editor:this.editor,isReversed:this.isReversed,contentRange:Sd(this.editor,this.contentRange)})]}getCloneParameters(){return this.state}};var Vr=class t extends Ue{constructor(){super(...arguments);this.type="LineTarget";this.insertionDelimiter=`
`;this.isLine=!0;this.getRemovalHighlightRange=()=>this.fullLineContentRange}get fullLineContentRange(){return co(this.editor,this.contentRange)}getLeadingDelimiterTarget(){return ya(this.editor,P9(this.editor,this.fullLineContentRange),this.isReversed)}getTrailingDelimiterTarget(){return ya(this.editor,M9(this.editor,this.fullLineContentRange),this.isReversed)}getRemovalRange(){let r=this.fullLineContentRange,n=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return n==null?r:r.union(n.contentRange)}maybeCreateRichRangeTarget(r,n){return new t({editor:this.editor,isReversed:r,contentRange:ga(this,n,!0,!0)})}getCloneParameters(){return this.state}};function P9(t,e){let{start:r}=e;return r.line>0?new W(t.document.lineAt(r.line-1).range.end,e.start):void 0}function M9(t,e){let{end:r}=e;return r.line+1<t.document.lineCount?new W(e.end,new ce(r.line+1,0)):void 0}function TS(t,e,r){return vd(Vr,t,e,r)}var wd=class t{constructor(e,r){this.target=e;this.insertionMode=r}get editor(){return this.target.editor}get contentRange(){return this.target.contentRange}get contentSelection(){return this.target.contentSelection}get insertionDelimiter(){return this.target.insertionDelimiter}get isRaw(){return this.target.isRaw}withTarget(e){return new t(e,this.insertionMode)}getEditNewActionType(){throw new Error("Method not implemented.")}constructChangeEdit(e){throw new Error("Method not implemented.")}};var _d=class extends Ue{constructor(r){super(r);this.type="NotebookCellTarget";this.insertionDelimiter=`
`;this.isNotebookCell=!0;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange}getCloneParameters(){return this.state}toDestination(r){return new wd(this,r)}};var xa=class t extends Ue{constructor(){super(...arguments);this.type="ParagraphTarget";this.insertionDelimiter=`

`;this.isLine=!0}getLeadingDelimiterTarget(){return TS(this.editor,A9(this.editor,this.fullLineContentRange),this.isReversed)}getTrailingDelimiterTarget(){return TS(this.editor,D9(this.editor,this.fullLineContentRange),this.isReversed)}getRemovalRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.contentRange.union(r.contentRange):this.contentRange;return new Vr({contentRange:n,editor:this.editor,isReversed:this.isReversed}).getRemovalRange()}get fullLineContentRange(){return co(this.editor,this.contentRange)}getRemovalHighlightRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return r!=null?this.fullLineContentRange.union(r.contentRange):this.fullLineContentRange}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,contentRange:ga(this,n,!0,!0)})}getCloneParameters(){return this.state}};function A9(t,e){let{document:r}=t,n=r.lineAt(e.start),i=I9(r,n);if(i!=null)return i.lineNumber+1===n.lineNumber?void 0:new W(new ce(i.lineNumber+1,0),r.lineAt(n.lineNumber-1).range.end);if(n.lineNumber>0)return new W(new ce(0,0),r.lineAt(n.lineNumber-1).range.end)}function D9(t,e){let{document:r}=t,n=r.lineAt(e.end),i=F9(r,n);if(i!=null)return i.lineNumber-1===n.lineNumber?void 0:new W(new ce(n.lineNumber+1,0),r.lineAt(i.lineNumber-1).range.end);if(n.lineNumber<r.lineCount-1)return new W(new ce(n.lineNumber+1,0),r.lineAt(r.lineCount-1).range.end)}function I9(t,e){for(;e.lineNumber>0;){let r=t.lineAt(e.lineNumber-1);if(!r.isEmptyOrWhitespace)return r;e=r}return null}function F9(t,e){for(;e.lineNumber+1<t.lineCount;){let r=t.lineAt(e.lineNumber+1);if(!r.isEmptyOrWhitespace)return r;e=r}return null}var po=class extends Ue{constructor(){super(...arguments);this.type="RawSelectionTarget";this.insertionDelimiter="";this.isRaw=!0;this.isToken=!1;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.getCloneParameters=()=>this.state}};var Ta=class t extends Ue{constructor(r){super({...r,contentRange:Sd(r.editor,r.fullInteriorRange)});this.type="InteriorTarget";this.insertionDelimiter=" ";this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.fullInteriorRange;this.fullInteriorRange=r.fullInteriorRange}getCloneParameters(){return{...this.state,fullInteriorRange:this.fullInteriorRange}}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,fullInteriorRange:gl(this.fullInteriorRange,n.fullInteriorRange,!0,!0)})}};function Ed(t){let e=Xo(t.contentRange,t.prefixRange),r=t.getTrailingDelimiterTarget()??t.getLeadingDelimiterTarget();return r!=null?e.union(r.contentRange):e}var C9=['"',"'","(","[","{","<"],O9=['"',"'",")","]","}",">",",",";",":"];function zn(t){let{editor:e}=t,{start:r}=Xo(t.contentRange,t.prefixRange),o=e.document.lineAt(r).text.slice(0,r.character).match(/\s+$/);return o==null?void 0:new He({contentRange:new W(r.line,r.character-o[0].length,r.line,r.character),editor:e,isReversed:t.isReversed})}function Gn(t){let{editor:e}=t,{end:r}=t.contentRange,o=e.document.lineAt(r).text.slice(r.character).match(/^\s+/);return o==null?void 0:new He({contentRange:new W(r.line,r.character,r.line,r.character+o[0].length),editor:e,isReversed:t.isReversed})}function Kn(t){let{editor:e}=t,r=Xo(t.contentRange,t.prefixRange),{start:n,end:i}=r,o=t.getLeadingDelimiterTarget()?.contentRange??n.toEmptyRange(),a=t.getTrailingDelimiterTarget()?.contentRange??i.toEmptyRange(),l=co(e,r);return o.union(a).isRangeEqual(l)?l:!a.isEmpty&&(!o.isEmpty||r.start.isEqual(l.start)||C9.includes(N9(e,r)))?r.union(a):!o.isEmpty&&(r.end.isEqual(l.end)||O9.includes(L9(e,r)))?r.union(o):r}function N9(t,e){let{start:r}=e,n=t.document.lineAt(r);return r.isAfter(n.range.start)?t.document.getText(new W(r.translate(void 0,-1),r)):""}function L9(t,e){let{end:r}=e,n=t.document.lineAt(r);return r.isBefore(n.range.end)?t.document.getText(new W(r.translate(void 0,1),r)):""}var uo=class t extends Ue{constructor(r){super(r);this.type="ScopeTypeTarget";this.scopeTypeType_=r.scopeTypeType,this.removalRange_=r.removalRange,this.interiorRange_=r.interiorRange,this.leadingDelimiterRange_=r.leadingDelimiterRange,this.trailingDelimiterRange_=r.trailingDelimiterRange,this.prefixRange=r.prefixRange,this.insertionDelimiter=r.insertionDelimiter??U9(r.scopeTypeType),this.hasDelimiterRange_=!!this.leadingDelimiterRange_||!!this.trailingDelimiterRange_}getLeadingDelimiterTarget(){if(this.leadingDelimiterRange_!=null)return new He({editor:this.editor,isReversed:this.isReversed,contentRange:this.leadingDelimiterRange_});if(!this.hasDelimiterRange_)return zn(this)}getTrailingDelimiterTarget(){if(this.trailingDelimiterRange_!=null)return new He({editor:this.editor,isReversed:this.isReversed,contentRange:this.trailingDelimiterRange_});if(!this.hasDelimiterRange_)return Gn(this)}getInterior(){return this.interiorRange_==null?super.getInterior():[new Ta({editor:this.editor,isReversed:this.isReversed,fullInteriorRange:this.interiorRange_})]}getRemovalRange(){return this.removalRange_!=null?this.removalRange_:this.hasDelimiterRange_?Ed(this):Kn(this)}maybeCreateRichRangeTarget(r,n){if(this.scopeTypeType_!==n.scopeTypeType_)return null;let i=this.removalRange_!=null||n.removalRange_!=null?gl(this.removalRange_??this.contentRange,n.removalRange_??n.contentRange,!0,!0):void 0;return new t({...this.getCloneParameters(),isReversed:r,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:n.trailingDelimiterRange_,removalRange:i,contentRange:lo(this,n,!0,!0)})}getCloneParameters(){return{...this.state,insertionDelimiter:this.insertionDelimiter,prefixRange:this.prefixRange,removalRange:void 0,interiorRange:void 0,scopeTypeType:this.scopeTypeType_,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:this.trailingDelimiterRange_}}};function U9(t){switch(t){case"class":case"namedFunction":case"section":case"sectionLevelOne":case"sectionLevelTwo":case"sectionLevelThree":case"sectionLevelFour":case"sectionLevelFive":case"sectionLevelSix":case"part":case"chapter":case"subSection":case"subSubSection":case"namedParagraph":case"subParagraph":return`

`;case"anonymousFunction":case"statement":case"ifStatement":case"comment":case"xmlElement":case"collectionItem":case"branch":case"environment":return`
`;default:return" "}}var Rd=class t extends Ue{constructor(r){super(r);this.type="SubTokenWordTarget";this.isToken=!1;this.isWord=!0;this.leadingDelimiterRange_=r.leadingDelimiterRange,this.trailingDelimiterRange_=r.trailingDelimiterRange,this.insertionDelimiter=r.insertionDelimiter}getLeadingDelimiterTarget(){return ya(this.editor,this.leadingDelimiterRange_,this.isReversed)}getTrailingDelimiterTarget(){return ya(this.editor,this.trailingDelimiterRange_,this.isReversed)}getRemovalRange(){return Ed(this)}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,contentRange:lo(this,n,!0,!0),trailingDelimiterRange:n.trailingDelimiterRange_})}getCloneParameters(){return{...this.state,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:this.trailingDelimiterRange_,insertionDelimiter:this.insertionDelimiter}}};var Tr=class extends Ue{constructor(){super(...arguments);this.type="TokenTarget";this.insertionDelimiter=" ";this.joinAs="token"}getLeadingDelimiterTarget(){return zn(this)}getTrailingDelimiterTarget(){return Gn(this)}getRemovalRange(){return Kn(this)}getCloneParameters(){return this.state}};var kd=class extends Ue{constructor(r){super(r);this.type="SurroundingPairTarget";this.insertionDelimiter=" ";this.boundary_=r.boundary,this.interiorRange_=r.interiorRange}getLeadingDelimiterTarget(){return zn(this)}getTrailingDelimiterTarget(){return Gn(this)}getRemovalRange(){return Kn(this)}getInterior(){return[new Ta({editor:this.editor,isReversed:this.isReversed,fullInteriorRange:this.interiorRange_})]}getBoundary(){return this.boundary_.map(r=>new Tr({editor:this.editor,isReversed:this.isReversed,contentRange:r}))}getCloneParameters(){return{...this.state,interiorRange:this.interiorRange_,boundary:this.boundary_}}};var Pt=class extends Ue{constructor(r){super(r);this.type="UntypedTarget";this.insertionDelimiter=" ";this.hasExplicitScopeType=!1;this.hasExplicitRange=r.hasExplicitRange,this.isToken=r.isToken??!0}getLeadingDelimiterTarget(){return zn(this)}getTrailingDelimiterTarget(){return Gn(this)}getRemovalRange(){return this.editor.document.getText(this.contentRange).trim().length===0?this.contentRange:Kn(this)}maybeCreateRichRangeTarget(){return null}getCloneParameters(){return{...this.state,isToken:this.isToken,hasExplicitRange:this.hasExplicitRange}}};var Pd=class extends Ue{constructor(){super(...arguments);this.type="ImplicitTarget";this.insertionDelimiter="";this.isRaw=!0;this.hasExplicitScopeType=!1;this.isImplicit=!0;this.isToken=!1;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.getCloneParameters=()=>this.state}};var Md=class extends Ue{constructor(r){let{inputTarget:n,modifiedTarget:i,isHead:o}=r;super({...r,contentRange:PM(n.contentRange,i.contentRange,o)});this.type="HeadTailTarget";this.insertionDelimiter=" ";this.inputTarget=n,this.modifiedTarget=i,this.isHead=o}getLeadingDelimiterTarget(){return zn(this)}getTrailingDelimiterTarget(){return Gn(this)}getRemovalRange(){return Kn(this)}getInterior(){let r=this.modifiedTarget.getInterior();if(r!=null)return r.map(n=>new He({editor:this.editor,contentRange:PM(this.inputTarget.contentRange,n.contentRange,this.isHead),isReversed:this.isReversed}))}getCloneParameters(){return{...this.state,inputTarget:this.inputTarget,modifiedTarget:this.modifiedTarget,isHead:this.isHead}}};function PM(t,e,r){return r?new W(e.start,t.end):new W(t.start,e.end)}var Ad=class t extends Ue{constructor(r){super({...r,contentRange:V9(r.paragraphTarget.contentRange,r.containingInterior.contentRange)});this.type="BoundedParagraphTarget";this.insertionDelimiter=`

`;this.isLine=!0;this.containingInterior=r.containingInterior,this.paragraphTarget=r.paragraphTarget,this.startLineGap=this.contentRange.start.line-this.containingInterior.fullInteriorRange.start.line,this.endLineGap=this.containingInterior.fullInteriorRange.end.line-this.contentRange.end.line}getLeadingDelimiterTarget(){return this.startLineGap>1?this.paragraphTarget.getLeadingDelimiterTarget():void 0}getTrailingDelimiterTarget(){return this.endLineGap>1?this.paragraphTarget.getTrailingDelimiterTarget():void 0}getRemovalRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.contentRange.union(r.contentRange):this.contentRange;return this.startLineGap<=0||this.endLineGap<=0?n:new Vr({contentRange:n,editor:this.editor,isReversed:this.isReversed}).getRemovalRange()}get fullLineContentRange(){return co(this.editor,this.contentRange)}getRemovalHighlightRange(){if(this.startLineGap<1||this.endLineGap<1)return this.getRemovalRange();let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return r!=null?this.fullLineContentRange.union(r.contentRange):this.fullLineContentRange}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,containingInterior:this.containingInterior.maybeCreateRichRangeTarget(r,n.containingInterior),paragraphTarget:this.paragraphTarget.maybeCreateRichRangeTarget(r,n.paragraphTarget)})}getCloneParameters(){return{...this.state,paragraphTarget:this.paragraphTarget,containingInterior:this.containingInterior}}};function V9(t,e){let r=t.intersection(e);if(r==null||r.isEmpty)throw new Error("Ranges do not intersect");return r}function Dd(t){return t.activeTextEditor?.selections.map(e=>({selection:e,editor:t.activeTextEditor}))??[]}var Sa=class{run(){return Dd(D()).map(e=>new Pt({editor:e.editor,isReversed:e.selection.isReversed,contentRange:e.selection,hasExplicitRange:!e.selection.isEmpty,isToken:!1}))}};var Qn=class{constructor(e,r){this.debouncer=new ku(r,e.getOwnConfiguration("decorationDebounceDelayMs")),this.run=this.run.bind(this)}run(){this.debouncer.run()}dispose(){this.debouncer.dispose()}};var Id=class{constructor(e,r){this.ide=e;this.storedTargets=r;this.disposables=[];this.debouncer=new Qn(e.configuration,()=>this.updateKeyboardTarget()),this.disposables.push(e.configuration.onDidChangeConfiguration(()=>this.maybeActivate()),this.debouncer),this.maybeActivate()}maybeActivate(){if(this.ide.configuration.getOwnConfiguration("experimental.keyboardTargetFollowsSelection")){this.selectionWatcherDisposable==null&&(this.selectionWatcherDisposable=this.ide.onDidChangeTextEditorSelection(this.debouncer.run));return}this.selectionWatcherDisposable!=null&&(this.selectionWatcherDisposable.dispose(),this.selectionWatcherDisposable=void 0)}updateKeyboardTarget(){this.ide.activeTextEditor==null||this.storedTargets.get("keyboard")==null||this.storedTargets.set("keyboard",new Sa().run())}dispose(){this.disposables.forEach(e=>e.dispose()),this.selectionWatcherDisposable?.dispose()}};var Fd=class{constructor(e){this.ide=e;switch(e.disposeOnExit(this),this.evaluateSetting=this.evaluateSetting.bind(this),this.active=!0,e.runMode){case"development":this.enableDebugLog();break;case"test":this.disableDebugLog();break;case"production":this.evaluateSetting(),this.disposableConfiguration=e.configuration.onDidChangeConfiguration(this.evaluateSetting);break}}log(...e){this.active&&console.log(...e)}dispose(){this.disposableConfiguration&&this.disposableConfiguration.dispose()}enableDebugLog(){this.active=!0}disableDebugLog(){this.active=!1}evaluateSetting(){this.ide.configuration.getOwnConfiguration("debug")?this.enableDebugLog():this.disableDebugLog()}};var B9=["!","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_","`","{","|","}","~","\xA3",'"'],H9=B9.map(Nr).join("|"),W9=["[a-zA-Z0-9]",H9].join("|"),$9=new RegExp(`^(${W9})$`,"u"),j9="[unk]",q9=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}]/gu,Cd=class{constructor(){this.disposables=[];this.algorithmChangeNotifier=new Wt;this.getTokenGraphemes=e=>nn(e,q9,r=>({text:this.normalizeGrapheme(r[0]),tokenStartOffset:r.index,tokenEndOffset:r.index+r[0].length}));this.registerAlgorithmChangeListener=this.algorithmChangeNotifier.registerListener;D().disposeOnExit(this),this.updateTokenHatSplittingMode=this.updateTokenHatSplittingMode.bind(this),this.getTokenGraphemes=this.getTokenGraphemes.bind(this),this.updateTokenHatSplittingMode(),this.disposables.push(D().configuration.onDidChangeConfiguration(this.updateTokenHatSplittingMode))}updateTokenHatSplittingMode(){let{lettersToPreserve:e,symbolsToPreserve:r,...n}=D().configuration.getOwnConfiguration("tokenHatSplittingMode");this.tokenHatSplittingMode={lettersToPreserve:e.map(i=>i.toLowerCase().normalize("NFC")),symbolsToPreserve:r.map(i=>i.normalize("NFC")),...n},this.algorithmChangeNotifier.notifyListeners()}normalizeGrapheme(e){let{preserveCase:r,lettersToPreserve:n,symbolsToPreserve:i}=this.tokenHatSplittingMode,o=e.normalize("NFC");return i.includes(o)||(r||(o=o.toLowerCase()),n.includes(o.toLowerCase()))||(o=nT(o),$9.test(o)||(o=j9)),o}dispose(){this.disposables.forEach(({dispose:e})=>e())}};function Jo(){return SS==null&&(SS=new Cd),SS}var SS;var MM=({penalty:t})=>-t;function AM(t){return({grapheme:{text:e},style:r})=>{let n=t.get({grapheme:e,hatStyle:r});return n==null?1/0:-n}}function DM(t,e){let r=Lc(n=>uT(e[n].filter(i=>i>t))??1/0);return({grapheme:{text:n}})=>r(n)}function vS(t){return e=>e.grapheme.text===t?.grapheme&&e.style===t?.hatStyle?1:0}function IM(t){switch(t){case"greedy":return({penalty:e})=>-e;case"balanced":return({penalty:e})=>-(e<2?0:1);case"stable":return e=>0}}function FM(t,e){if(t.length===0)return;let r=t;for(let n of e){if(r.length===1)return r[0];r=z9(r,n)}return r[0]}function z9(t,e){let r=-1/0,n=[];for(let i of t){let o=e(i);o<r||(o>r&&(r=o,n.length=0),n.push(i))}return n}function CM({hatOldTokenRanks:t,graphemeTokenRanks:e},r,n,i,o,a){return FM(a,[vS(i),IM(r),vS(o),AM(t),MM,DM(n,e)])}function OM(t,e,r){let n={},i=new oo(({grapheme:o,hatStyle:a})=>[o,a]);return t.forEach(({token:o,rank:a})=>{let l=e.get(o);l!=null&&i.set(l,a),r.getTokenGraphemes(o.text).forEach(({text:p})=>{let u;p in n?u=n[p]:(u=[],n[p]=u),u.push(a)})}),{hatOldTokenRanks:i,graphemeTokenRanks:n}}function NM(t,e=[]){return new Map(cT(Je,vi)(Uc([e],t.visibleRanges.map(r=>fT(r.start.line,r.end.line+1)))).sort((r,n)=>r-n).map((r,n)=>[r,n]))}function LM(t,e){return(r,n)=>{let i=Math.abs(r.displayLine-t),o=Math.abs(n.displayLine-t);if(i<o)return-1;if(i>o)return 1;let a=Math.abs(r.range.start.character-e),l=Math.abs(n.range.start.character-e);return a-l}}var G9=["-","+","*","/","=","<",">","_","#",".","|","&",":"],K9=["!==","!=","+=","-=","*=","/=","%=","<=",">=","=>","->","??",'"""',"```","/*","*/","<!--","-->"],Q9=["\\p{L}","\\p{M}","\\p{N}"],Z9="[^\\s\\w]",Y9="(?<![.\\d])\\d+\\.\\d+(?![.\\d])";function X9(t){let{fixedTokens:e,repeatableSymbols:r,identifierWordRegexes:n,identifierWordDelimiters:i,numbersRegex:o,singleSymbolsRegex:a}=t,l=r.map(Nr).map(x=>`${x}+`).join("|"),p=e.map(Nr).join("|"),d=`(${n.concat(i.map(Nr)).join("|")})+`,h=`(${n.join("|")})+`,g=[p,o,d,l,a].join("|");return{identifierMatcher:new RegExp(d,"gu"),wordMatcher:new RegExp(h,"gu"),tokenMatcher:new RegExp(g,"gu")}}var bS=new Map;function Sr(t){let e=D().configuration.getOwnConfiguration("wordSeparators",{languageId:t}),r=e.join("\0");if(!bS.has(r)){let n={fixedTokens:K9,repeatableSymbols:G9,identifierWordRegexes:Q9,identifierWordDelimiters:e,numbersRegex:Y9,singleSymbolsRegex:Z9};bS.set(r,X9(n))}return bS.get(r)}function UM(t,e,r){return nn(t,Sr(e).tokenMatcher,r)}function VM(t,e){let r=t.document.languageId,n=t.document.getText(e),i=t.document.offsetAt(e.start);return UM(n,r,o=>{let a=i+o.index,l=i+o.index+o[0].length,p=new W(t.document.positionAt(a),t.document.positionAt(l));return{editor:t,text:o[0],range:p,offsets:{start:a,end:l}}})}function BM(t,e,r){let i=e5(t,e).flatMap(o=>{let a=o.selections[0].active,l=NM(o,[a.line]),p=Je(o.visibleRanges.map(u=>VM(o,u).map(d=>({...d,displayLine:l.get(d.range.start.line)}))));return p.sort(LM(l.get(a.line),a.character)),p});return J9(r,i).map((o,a)=>({token:o,rank:-a}))}function J9(t,e){return t==null?e:e.sort((r,n)=>{let i=t.has(r),o=t.has(n);return i&&!o?-1:!i&&o?1:0})}function e5(t,e){let r;return t==null?r=e:r=[t,...e.filter(n=>n!==t)],r}function wS({tokenGraphemeSplitter:t,enabledHatStyles:e,forceTokenHats:r,oldTokenHats:n,hatStability:i,activeTextEditor:o,visibleTextEditors:a}){let l=r==null?void 0:HM(r),p=HM(n),u=BM(o,a,l),d=OM(u,p,t),h=Object.keys(e),g=new so(()=>[...h]);return u.map(({token:x,rank:_})=>{let w=t5(t,x,g,e),C=CM(d,i,_,l?.get(x),p.get(x),w);if(C!=null)return g.set(C.grapheme.text,g.get(C.grapheme.text).filter(M=>M!==C.style)),r5(x,C)}).filter(x=>x!=null)}function HM(t){let e=new oo(({editor:r,offsets:n})=>[r.id,n.start,n.end]);return t.forEach(r=>e.set(r.token,r)),e}function t5(t,e,r,n){let i=[],o=t.getTokenGraphemes(e.text);for(let a of o)for(let l of r.get(a.text))i.push({grapheme:a,style:l,penalty:n[l].penalty});return i}function r5(t,e){return{hatStyle:e.style,grapheme:e.grapheme.text,token:t,hatRange:new W(t.range.start.translate(void 0,e.grapheme.tokenStartOffset),t.range.start.translate(void 0,e.grapheme.tokenEndOffset))}}var Od=class{constructor(e,r){this.hats=e;this.context=r;this.disposables=[];D().disposeOnExit(this);let n=new Qn(D().configuration,()=>this.allocateHats());this.disposables.push(this.hats.onDidChangeEnabledHatStyles(n.run),this.hats.onDidChangeIsEnabled(n.run),D().onDidOpenTextDocument(n.run),D().onDidCloseTextDocument(n.run),D().onDidChangeActiveTextEditor(n.run),D().onDidChangeVisibleTextEditors(n.run),D().onDidChangeTextDocument(n.run),D().onDidChangeTextEditorSelection(n.run),D().onDidChangeTextEditorVisibleRanges(n.run),Jo().registerAlgorithmChangeListener(n.run),n)}async allocateHats(e){let r=await this.context.getActiveMap();e=e?.map(i=>({...i,grapheme:Jo().normalizeGrapheme(i.grapheme)}));let n=this.hats.isEnabled?wS({tokenGraphemeSplitter:Jo(),enabledHatStyles:this.hats.enabledHatStyles,forceTokenHats:e,oldTokenHats:r.tokenHats,hatStability:D().configuration.getOwnConfiguration("experimental.hatStability"),activeTextEditor:D().activeTextEditor,visibleTextEditors:D().visibleTextEditors}):[];r.setTokenHats(n),await this.hats.setHatRanges(n.map(({hatStyle:i,hatRange:o,token:{editor:a}})=>({editor:a,range:o,styleName:i})))}dispose(){this.disposables.forEach(({dispose:e})=>e())}};var Nd=class t{constructor(e){this.rangeUpdater=e;this.isExpired=!1;this.documentTokenLists=new Map;this.deregisterFunctions=[];this.map={};this._tokenHats=[]}get tokenHats(){return this._tokenHats}getDocumentTokenList(e){let r=e.uri.toString(),n=this.documentTokenLists.get(r);return n==null&&(n=[],this.documentTokenLists.set(r,n),this.deregisterFunctions.push(this.rangeUpdater.registerRangeInfoList(e,n))),n}clone(){let e=new t(this.rangeUpdater);return e.setTokenHats(this._tokenHats),e}setTokenHats(e){this.map={},this.documentTokenLists=new Map,this.deregisterFunctions.forEach(n=>n());let r=e.map(n=>{let{hatStyle:i,grapheme:o,token:a}=n,l=this.makeTokenLive(a);return this.map[sl(i,o)]=l,{...n,token:l}});this._tokenHats=r}makeTokenLive(e){let{tokenMatcher:r}=Sr(e.editor.document.languageId),n={...e,expansionBehavior:{start:{type:"regex",regex:r},end:{type:"regex",regex:r}}};return this.getDocumentTokenList(e.editor.document).push(n),n}getEntries(){return this.checkExpired(),Object.entries(this.map)}getToken(e,r){return this.checkExpired(),this.map[sl(e,Jo().normalizeGrapheme(r))]}checkExpired(){if(this.isExpired)throw Error("Map snapshot has expired")}dispose(){this.isExpired=!0,this.deregisterFunctions.forEach(e=>e())}};var n5=6e4,Ld=class{constructor(e,r,n,i){this.debug=r;this.commandServerApi=i;this.prePhraseMapsSnapshotTimestamp=null;this.lastSignalVersion=null;D().disposeOnExit(this),this.activeMap=new Nd(e),this.getActiveMap=this.getActiveMap.bind(this),this.allocateHats=this.allocateHats.bind(this),this.hatAllocator=new Od(n,{getActiveMap:this.getActiveMap})}allocateHats(e){return this.hatAllocator.allocateHats(e)}async getActiveMap(){return await this.maybeTakePrePhraseSnapshot(),this.activeMap}async getReadableMap(e){return await this.maybeTakePrePhraseSnapshot(),e?this.lastSignalVersion==null?(console.error("Pre phrase snapshot requested but no signal was present; please upgrade command client"),this.activeMap):this.prePhraseMapSnapshot==null?(console.error("Navigation map pre-phrase snapshot requested, but no snapshot has been taken"),this.activeMap):performance.now()-this.prePhraseMapsSnapshotTimestamp>n5?(console.error("Navigation map pre-phrase snapshot requested, but snapshot is more than a minute old"),this.activeMap):this.prePhraseMapSnapshot:this.activeMap}dispose(){this.activeMap.dispose(),this.prePhraseMapSnapshot!=null&&this.prePhraseMapSnapshot.dispose()}async maybeTakePrePhraseSnapshot(){let e=await this.commandServerApi.signals.prePhrase.getVersion();e!==this.lastSignalVersion&&(this.debug.log("taking snapshot"),this.lastSignalVersion=e,e!=null&&this.takePrePhraseSnapshot())}takePrePhraseSnapshot(){this.prePhraseMapSnapshot!=null&&this.prePhraseMapSnapshot.dispose(),this.prePhraseMapSnapshot=this.activeMap.clone(),this.prePhraseMapsSnapshotTimestamp=performance.now()}};function _S(t,e,r){let n=t.get(e);return n==null&&(n=r(),t.set(e,n)),n}var PS=dr(xl(),1);function MS(t,e){let{originalOffsets:{start:r,end:n},finalOffsets:{end:i},displacement:o}=t,{offsets:{start:a,end:l}}=e;return(0,PS.invariant)(n>r,()=>"Change range expected to be nonempty"),(0,PS.invariant)(n>=a&&r<=l,()=>"Change range expected to intersect with selection range"),{start:n<=a?a+o:Math.min(a,i),end:n<=l?l+o:Math.min(l,i)}}var GM=dr(xl(),1);function AS(t,e){let{event:{text:r,isReplace:n},finalOffsets:{start:i,end:o}}=t;if((0,GM.invariant)(i===t.originalOffsets.end&&i===e.offsets.start&&i===e.offsets.end,()=>"Selection range and change range expected to be same empty range"),n){let a=e.expansionBehavior.end;switch(a.type){case"closed":return{start:i,end:i};case"open":return{start:i,end:o};case"regex":{let l=r.match(yf(a.regex));return l==null?{start:i,end:i}:{start:i,end:i+l[0].length}}}}else{let a=e.expansionBehavior.start;switch(a.type){case"closed":return{start:o,end:o};case"open":return{start:i,end:o};case"regex":{let l=r.search(gf(a.regex));return l===-1?{start:o,end:o}:{start:i+l,end:o}}}}}var DS=dr(xl(),1);function IS(t,e){let{event:{text:r},originalOffsets:{start:n},displacement:i}=t,{offsets:{start:o,end:a},text:l}=e;if((0,DS.invariant)(a>o,()=>"Selection range expected to be nonempty"),(0,DS.invariant)(n>=o&&n<=a,()=>"Insertion offset expected to intersect with selection range"),n>o&&n<a)return{start:o,end:a+i};if(n===o){let p=e.expansionBehavior.start,u=a+i;switch(p.type){case"closed":return{start:o+i,end:u};case"open":return{start:o,end:u};case"regex":{let d=r+l,h=gf(p.regex),g=d.search(h);for(;g>r.length;)d=d.slice(0,g),g=d.search(h);return g===-1?{start:o,end:u}:{start:o+g,end:u}}}}else{let p=e.expansionBehavior.end,u=o;switch(p.type){case"closed":return{start:u,end:a};case"open":return{start:u,end:a+i};case"regex":{let d=l+r,h=yf(p.regex),g=d.match(h),x=g==null?0:g[0].length;for(;x!==0&&x<l.length;)d=l.slice(x)+r,g=d.match(h),x=g==null?0:x+g[0].length;return x===0?{start:u,end:a}:{start:u,end:o+x}}}}}function KM(t,e,r){let{start:n,end:i}=t.originalOffsets,{start:o,end:a}=e.offsets,l=Math.min(n,o),p="";return o<n&&(p+=e.text.substring(0,n-o)),p+=t.event.text,i<a&&(p+=e.text.substring(a-i,e.text.length)),p.substring(r.start-l,r.end-l)}function QM(t,e){let{document:r,contentChanges:n}=t,i=n.map(o=>{let a=o.text.length-o.rangeLength,l=o.rangeOffset,p=l+o.rangeLength,u=l,d=p+a;return{displacement:a,event:o,originalOffsets:{start:l,end:p},finalOffsets:{start:u,end:d}}});for(let o of e){let a=o.offsets,l=i.map(u=>{let d;return u.originalOffsets.start>a.end?{start:0,end:0}:u.originalOffsets.end<a.start?{start:u.displacement,end:u.displacement}:(u.event.rangeLength===0?o.range.isEmpty?d=AS(u,o):d=IS(u,o):d=MS(u,o),o.text=KM(u,o,d),{start:d.start-a.start,end:d.end-a.end})}),p={start:a.start+pf(l,({start:u})=>u),end:a.end+pf(l,({end:u})=>u)};o.range=o.range.with(r.positionAt(p.start),r.positionAt(p.end)),o.offsets=p}}var Vd=class{constructor(){this.rangeInfoLists=new Map;this.replaceEditLists=new Map;this.listenForDocumentChanges()}getDocumentRangeInfoLists(e){return _S(this.rangeInfoLists,e.uri.toString(),()=>[])}getDocumentReplaceEditLists(e){return _S(this.replaceEditLists,e.uri.toString(),()=>[])}registerRangeInfoList(e,r){let n=this.getDocumentRangeInfoLists(e);return n.push(r),()=>er(n,r)}registerReplaceEditList(e,r){let n=this.getDocumentReplaceEditLists(e);return n.push(r),()=>er(n,r)}*documentRangeInfoGenerator(e){let r=this.getDocumentRangeInfoLists(e);for(let n of r)for(let i of n)yield i}listenForDocumentChanges(){this.disposable=D().onDidChangeTextDocument(e=>{let r=this.getDocumentReplaceEditLists(e.document),n={...e,contentChanges:e.contentChanges.map(i=>f5(r,i)?{...i,isReplace:!0}:i)};QM(n,this.documentRangeInfoGenerator(e.document))})}dispose(){this.disposable.dispose()}};function f5(t,e){for(let r of t)for(let n of r)if(n.range.isRangeEqual(e.range)&&n.text===e.text)return!0;return!1}var Bd=class{constructor(){this.signals={prePhrase:{getVersion(){return Promise.resolve(null)}}}}getFocusedElementType(){return Promise.resolve(void 0)}};var Hd=class{async allocateHats(){}async getReadableMap(){return{getEntries(){return[]},getToken(){throw new Error("Hat map is disabled")}}}dispose(){}};var Wd=class{onDidChangeDefinition(e){return{dispose:()=>{}}}loadLanguage(e){return Promise.resolve()}get(e){}getNodeAtLocation(e,r){}dispose(){}};var $d=class{updateUserSnippets(){throw new Error("Snippets are not implemented.")}registerThirdPartySnippets(e,r){throw new Error("Snippets are not implemented.")}getSnippetStrict(e){throw new Error("Snippets are not implemented.")}openNewSnippetFile(e){throw new Error("Snippets are not implemented.")}};var jd=class{getSpokenFormEntries(){throw new da}onDidChange(){return{dispose:()=>{}}}};var qd=class{getTree(e){throw new Error("Tree sitter not provided")}loadLanguage(e){return Promise.resolve(!1)}getLanguage(e){throw new Error("Tree sitter not provided")}getNodeAtLocation(e,r){throw new Error("Tree sitter not provided")}};var Ke=class extends Error{constructor(r,n=!1,i=!1){super(`No spoken form for: ${r}`);this.reason=r;this.requiresTalonUpdate=n;this.isPrivate=i}};var ZM={curlyBrackets:["{","}"],angleBrackets:["<",">"],escapedDoubleQuotes:['\\"','\\"'],escapedSingleQuotes:["\\'","\\'"],escapedParentheses:["\\(","\\)"],escapedSquareBrackets:["\\[","\\]"],doubleQuotes:['"','"'],parentheses:["(",")"],backtickQuotes:["`","`"],squareBrackets:["[","]"],singleQuotes:["'","'"],tripleDoubleQuotes:['"""','"""'],tripleSingleQuotes:["'''","'''"],whitespace:[" "," "],any:null,string:null,collectionBoundary:null};var YM=new oo(t=>t);for(let[t,e]of Object.entries(ZM))e!=null&&YM.set(e,t);function XM(t,e,r){let n=YM.get([e,r]);if(n==null)throw Error(`Unknown surrounding pair delimiters '${e} ${r}'`);return t.pairedDelimiter[n]}var d5={ifStatement:"if",ifElseStatement:"if else",tryCatchStatement:"try",functionDeclaration:"funk",link:"link"},m5={"ifElseStatement.alternative":"else","functionDeclaration.body":"funk","ifElseStatement.consequence":"if else","ifStatement.consequence":"if","tryCatchStatement.body":"try","link.text":"link"};function JM(t){if(t.type==="custom")throw new Ke("Custom insertion snippet");let e=d5[t.name];if(e==null)throw new Ke(`Named insertion snippet '${t.name}'`);if(t.substitutions!=null){let r=Object.values(t.substitutions);return`${e} ${r.join(" ")}`}return e}function eA(t){if(t.type==="custom")throw new Ke("Custom wrap with snippet");let e=`${t.name}.${t.variableName}`,r=m5[e];if(r==null)throw new Ke(`Named wrap with snippet '${e}'`);return r}function Tl(t,e,r){let n=r==="vertical"?`${ut.verticalRange} `:"";if(t&&e)return n+ut.rangeExclusive;if(t)throw new Ke("Range exclude anchor");return e?n+ut.rangeExcludingEnd:r==="vertical"?ut.verticalRange:ut.rangeInclusive}function tA(t){return Object.fromEntries(Object.entries(t).map(([e,r])=>[e,Object.fromEntries(Object.entries(r).map(([n,i])=>[n,{type:"customizable",spokenForms:i,spokenFormType:e,id:n}]))]))}var h5=["zero","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen","twenty","twenty one","twenty two","twenty three","twenty four","twenty five","twenty six","twenty seven","twenty eight","twenty nine","thirty","thirty one","thirty two","thirty three","thirty four","thirty five","thirty six","thirty seven","thirty eight","thirty nine","forty","forty one","forty two","forty three","forty four","forty five","forty six","forty seven","forty eight","forty nine","fifty","fifty one","fifty two","fifty three","fifty four","fifty five","fifty six","fifty seven","fifty eight","fifty nine","sixty","sixty one","sixty two","sixty three","sixty four","sixty five","sixty six","sixty seven","sixty eight","sixty nine","seventy","seventy one","seventy two","seventy three","seventy four","seventy five","seventy six","seventy seven","seventy eight","seventy nine","eighty","eighty one","eighty two","eighty three","eighty four","eighty five","eighty six","eighty seven","eighty eight","eighty nine","ninety","ninety one","ninety two","ninety three","ninety four","ninety five","ninety six","ninety seven","ninety eight","ninety nine"],g5=["zeroth","first","second","third","fourth","fifth","sixth","seventh","eighth","ninth","tenth","eleventh","twelfth","thirteenth","fourteenth","fifteenth","sixteenth","seventeenth","eighteenth","nineteenth","twentieth"];function va(t){let e=h5[t];if(e==null)throw Error(`Unknown number '${t}'`);return e}function Sl(t){let e=g5[t];if(e==null)throw Error(`Unknown ordinal '${t}'`);return e}var zd=class{constructor(e){this.spokenFormMap=e;this.handleModifier=this.handleModifier.bind(this)}handlePrimitiveTarget(e){let r=[];return e.modifiers!=null&&r.push(e.modifiers.map(this.handleModifier)),e.mark!=null&&r.push(this.handleMark(e.mark)),r}handleModifier(e){switch(e.type){case"cascading":case"modifyIfUntyped":case"preferredScope":throw new Ke(`Modifier '${e.type}'`);case"containingScope":if(e.ancestorIndex==null||e.ancestorIndex===0)return this.handleScopeType(e.scopeType);if(e.ancestorIndex===1)return[this.spokenFormMap.modifierExtra.ancestor,this.handleScopeType(e.scopeType)];throw new Ke(`Modifier '${e.type}' with ancestor index ${e.ancestorIndex}`);case"everyScope":return[this.spokenFormMap.simpleModifier.everyScope,this.handleScopeType(e.scopeType)];case"extendThroughStartOf":case"extendThroughEndOf":{let r=this.spokenFormMap.simpleModifier[e.type];return e.modifiers!=null?[r,e.modifiers.map(this.handleModifier)]:[r]}case"relativeScope":return e.offset===0?this.handleRelativeScopeInclusive(e):this.handleRelativeScopeExclusive(e);case"ordinalScope":{let r=this.handleScopeType(e.scopeType),n=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.length===1)return e.start===-1?[n,this.spokenFormMap.modifierExtra.last,r]:e.start===0?[n,this.spokenFormMap.modifierExtra.first,r]:e.start<0?[n,Sl(Math.abs(e.start)),this.spokenFormMap.modifierExtra.last,r]:[n,Sl(e.start+1),r];let i=va(e.length);if(e.start===0)return[n,this.spokenFormMap.modifierExtra.first,i,vl(r)];if(e.start===-e.length)return[n,this.spokenFormMap.modifierExtra.last,i,vl(r)];throw new Ke(`'${e.type}' with count > 1 and offset away from start / end`)}case"range":{if(e.anchor.type==="ordinalScope"&&e.active.type==="ordinalScope"&&e.anchor.length===1&&e.active.length===1&&e.anchor.scopeType.type===e.active.scopeType.type){let r=e.anchor.start===-1?this.spokenFormMap.modifierExtra.last:Sl(e.anchor.start+1),n=this.handleModifier(e.active),i=Tl(e.excludeAnchor,e.excludeActive);return[r,i,n]}throw Error(`Modifier '${e.type}' is not fully implemented`)}default:return[this.spokenFormMap.simpleModifier[e.type]]}}handleRelativeScopeInclusive(e){let r=this.handleScopeType(e.scopeType),n=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.length===1){let a=e.direction==="forward"?ut.forward:ut.backward;return[n,r,a]}let i=va(e.length),o=vl(r);return e.direction==="forward"?[n,i,o]:[n,i,o,ut.backward]}handleRelativeScopeExclusive(e){let r=this.handleScopeType(e.scopeType),n=e.direction==="forward"?ut.next:ut.previous,i=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.offset===1){let o=va(e.length);if(e.length===1)return[i,n,r];let a=vl(r);return[i,n,o,a]}if(e.length===1){let o=Sl(e.offset);return[i,o,n,r]}throw new Ke(`${e.type} modifier with offset > 1 and length > 1`)}handleScopeType(e){switch(e.type){case"oneOf":case"surroundingPairInterior":throw new Ke(`Scope type '${e.type}'`);case"glyph":return[this.spokenFormMap.complexScopeTypeType.glyph,nA(this.spokenFormMap.grapheme,"grapheme",e.character)];case"surroundingPair":{let r=this.spokenFormMap.pairedDelimiter[e.delimiter];return e.forceDirection!=null?[this.spokenFormMap.surroundingPairForceDirection[e.forceDirection],r]:r}case"customRegex":return this.spokenFormMap.customRegex[e.regex]??{type:"customizable",spokenForms:{spokenForms:[],isCustom:!0,defaultSpokenForms:[],requiresTalonUpdate:!1,isPrivate:!1},spokenFormType:"customRegex",id:e.regex};default:return this.spokenFormMap.simpleScopeTypeType[e.type]}}handleMark(e){switch(e.type){case"decoratedSymbol":{let[r,n]=e.symbolColor.split("-"),i=[];return r!=="default"&&i.push(ZP(r)),n!=null&&i.push(YP(n)),i.push(nA(this.spokenFormMap.grapheme,"grapheme",e.character)),i}case"lineNumber":return this.handleLineNumberMark(e);case"range":{if(e.anchor.type==="lineNumber"&&e.active.type==="lineNumber"){let[r,n]=this.handleLineNumberMark(e.anchor),[i,o]=this.handleLineNumberMark(e.active);if(r===i){let a=Tl(e.excludeAnchor,e.excludeActive);return[r,n,a,o]}}throw Error(`Mark '${e.type}' is not fully implemented`)}case"explicit":case"keyboard":case"target":throw new Ke(`Mark '${e.type}'`);default:return[id[e.type]]}}handleLineNumberMark(e){switch(e.lineNumberType){case"absolute":throw new Ke("Absolute line numbers");case"modulo100":return[od.modulo100,va(e.lineNumber+1)];case"relative":return[e.lineNumber<0?od.relativeUp:od.relativeDown,va(Math.abs(e.lineNumber))]}}};function vl(t){if(typeof t=="string")return rA(t);if(Array.isArray(t)){if(t.length===0)return t;let e=t[t.length-1];return[...t.slice(0,-1),vl(e)]}return{...t,spokenForms:{...t.spokenForms,spokenForms:t.spokenForms.spokenForms.map(rA)}}}function rA(t){return`${t}s`}function nA(t,e,r){let n=t[r];if(n==null)throw new Ke(`${e} '${r}'`);return n}var ba=class{constructor(e){this.spokenFormMap=tA(e),this.primitiveGenerator=new zd(this.spokenFormMap)}getSpokenFormForSingleTerm(e,r){return this.componentsToSpokenForm(()=>{let n=this.spokenFormMap[e][r];if(n==null)throw new Ke(`${e} with id ${r}`);return n})}processCommand(e){return this.componentsToSpokenForm(()=>this.handleAction(e.action))}processScopeType(e){return this.componentsToSpokenForm(()=>[this.primitiveGenerator.handleScopeType(e)])}componentsToSpokenForm(e){try{return{type:"success",spokenForms:iA(e())}}catch(r){if(r instanceof Ke)return{type:"error",reason:r.reason,requiresTalonUpdate:r.requiresTalonUpdate,isPrivate:r.isPrivate};throw r}}handleAction(e){switch(e.name){case"editNew":case"getText":case"replace":case"executeCommand":case"parsed":case"private.getTargets":case"private.setKeyboardTarget":throw new Ke(`Action '${e.name}'`);case"replaceWithTarget":case"moveToTarget":return[this.spokenFormMap.action[e.name],this.handleTarget(e.source),this.handleDestination(e.destination)];case"swapTargets":return[this.spokenFormMap.action[e.name],this.handleTarget(e.target1),ut.swapConnective,this.handleTarget(e.target2)];case"callAsFunction":return e.argument.type==="implicit"?[this.spokenFormMap.action[e.name],this.handleTarget(e.callee)]:[this.spokenFormMap.action[e.name],this.handleTarget(e.callee),"on",this.handleTarget(e.argument)];case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return[XM(this.spokenFormMap,e.left,e.right),this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"pasteFromClipboard":return[this.spokenFormMap.action[e.name],this.handleDestination(e.destination)];case"insertSnippet":return[this.spokenFormMap.action[e.name],JM(e.snippetDescription),this.handleDestination(e.destination)];case"generateSnippet":if(e.snippetName!=null)throw new Ke(`${e.name}.snippetName`);return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"wrapWithSnippet":return[eA(e.snippetDescription),this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"highlight":{if(e.highlightId!=null)throw new Ke(`${e.name}.highlightId`);return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)]}default:return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)]}}handleTarget(e){switch(e.type){case"list":if(e.elements.length<2)throw new Ke("List target with < 2 elements");return e.elements.map((r,n)=>n===0?this.handleTarget(r):[ut.listConnective,this.handleTarget(r)]);case"range":{let r=this.handleTarget(e.anchor),n=this.handleTarget(e.active),i=Tl(e.excludeAnchor,e.excludeActive,e.rangeType);return[r,i,n]}case"primitive":return this.primitiveGenerator.handlePrimitiveTarget(e);case"implicit":return[]}}handleDestination(e){switch(e.type){case"list":if(e.destinations.length<2)throw new Ke("List destination with < 2 elements");return e.destinations.map((r,n)=>n===0?this.handleDestination(r):[ut.listConnective,this.handleDestination(r)]);case"primitive":return[this.handleInsertionMode(e.insertionMode),this.handleTarget(e.target)];case"implicit":return[]}}handleInsertionMode(e){switch(e){case"to":return ut.sourceDestinationConnective;case"before":return ut.before;case"after":return ut.after}}};function iA(t){if(typeof t=="string")return[t];if(Array.isArray(t))return t.length===0?[""]:oA(t.map(iA)).map(e=>e.filter(r=>r.length!==0).join(" "));if(t.spokenForms.spokenForms.length===0){let e=`${nl(t.spokenFormType)} with id ${t.id}`,r;throw t.spokenForms.isPrivate?r="this is a private spoken form currently only for internal experimentation":t.spokenForms.requiresTalonUpdate?r="please update talon to the latest version (see https://www.cursorless.org/docs/user/updating/)":r="please see https://www.cursorless.org/docs/user/customization/ for more information",new Ke(`${e}; ${r}`,t.spokenForms.requiresTalonUpdate,t.spokenForms.isPrivate)}return t.spokenForms.spokenForms}function oA(t){if(t.length===0)return[];if(t.length===1)return t[0].map(i=>[i]);let[e,...r]=t,n=oA(r);return e.flatMap(i=>n.map(o=>[i,...o]))}var Gd=class{constructor(e){this.talonSpokenForms=e;this.notifier=new Wt;this.spokenFormMap_={...Ei};this.onDidChangeCustomSpokenForms=this.notifier.registerListener;this.disposable=e.onDidChange(()=>this.updateSpokenFormMaps().catch(()=>{})),this.customSpokenFormsInitialized=this.updateSpokenFormMaps(),this.customSpokenFormsInitialized.catch(()=>{})}get spokenFormMap(){return this.spokenFormMap_}get needsInitialTalonUpdate(){return this.needsInitialTalonUpdate_}async updateSpokenFormMaps(){let e;try{if(e=await this.talonSpokenForms.getSpokenFormEntries(),e.length===0)throw new Error("Custom spoken forms list empty")}catch(r){if(r instanceof rl)this.needsInitialTalonUpdate_=!0;else if(!(r instanceof da)){console.error("Error loading custom spoken forms",r);let n=r.message.replace(/\.$/,"");it(D().messages,"CustomSpokenForms.updateSpokenFormMaps",`Error loading custom spoken forms: ${n}. Falling back to default spoken forms.`)}throw this.spokenFormMap_={...Ei},this.notifier.notifyListeners(),r}for(let r of aP)y5(this.spokenFormMap_,r,oS[r],Object.fromEntries(e.filter(n=>n.type===r).map(({id:n,spokenForms:i})=>[n,i])));this.notifier.notifyListeners()}getCustomRegexScopeTypes(){return Object.keys(this.spokenFormMap_.customRegex).map(e=>({type:"customRegex",regex:e}))}dispose(){this.disposable.dispose()}};function y5(t,e,r,n){let i=Array.from(new Set([...Object.keys(r),...Object.keys(n)])),o={};for(let a of i){let{defaultSpokenForms:l=[],isPrivate:p=!1}=r[a]??{},u=n[a];o[a]=u==null?{defaultSpokenForms:l,spokenForms:[],requiresTalonUpdate:!p,isCustom:!1,isPrivate:p}:{defaultSpokenForms:l,spokenForms:u,requiresTalonUpdate:!1,isCustom:!Si(l,u),isPrivate:p}}t[e]=o}var Kd=class{constructor(e){this.customSpokenForms=new Gd(e),this.customSpokenFormsInitialized=this.customSpokenForms.customSpokenFormsInitialized,this.spokenFormGenerator=new ba(this.customSpokenForms.spokenFormMap),this.disposable=this.customSpokenForms.onDidChangeCustomSpokenForms(()=>{this.spokenFormGenerator=new ba(this.customSpokenForms.spokenFormMap)})}onDidChangeCustomSpokenForms(e){return this.customSpokenForms.onDidChangeCustomSpokenForms(e)}commandToSpokenForm(e){return this.spokenFormGenerator.processCommand(e)}scopeTypeToSpokenForm(e){return this.spokenFormGenerator.processScopeType(e)}actionIdToSpokenForm(e){return this.spokenFormGenerator.getSpokenFormForSingleTerm("action",e)}graphemeToSpokenForm(e){return this.spokenFormGenerator.getSpokenFormForSingleTerm("grapheme",e)}getCustomRegexScopeTypes(){return this.customSpokenForms.getCustomRegexScopeTypes()}get needsInitialTalonUpdate(){return this.customSpokenForms.needsInitialTalonUpdate}dispose(){this.disposable.dispose()}};function*x5(t){for(let e of t)for(let r of e)yield r}function*bl(t,e){let r=Qd(e),n=t;for(;n-- >0;){let i=r.next();if(!i.done)yield i.value;else return}}function*FS(t){let e=Qd(t),r=e.next();if(r.done)return;let n=r.value;for(let i of e)yield[n,i],n=i}var xwe=Symbol();function*T5(t=0,e=1){let r=t;for(;;)yield r,r+=e}function*aA(t,e){for(let r of t)e(r)&&(yield r)}function*Lt(t,e){for(let r of t)yield e(r)}function*cA(t,e,r,n=1){let i,o;if(r!==void 0?(i=e,o=r):(i=0,o=e),i<0)throw new Error("start cannot be negative");if(o!==null&&o<0)throw new Error("stop cannot be negative");if(n<=0)throw new Error("step cannot be negative");let a=-1,l=Qd(t),p;for(;;){if(a++,o!==null&&a>=o||(p=l.next(),p.done))return;a<i||(a-i)%n===0&&(yield p.value)}}function*S5(t,e){let r=Qd(t),n;for(;!(n=r.next()).done;){let i=n.value;if(!e(i))return;yield i}}function Qd(t){return t[Symbol.iterator]()}function wa(t,e){return Array.from(Lt(t,e))}function sA(t,e,r){let n=T5(t,r),i=r>=0?o=>o<e:o=>o>e;return S5(n,i)}function lA(t,e,r=1){return e!==void 0?sA(t,e,r):sA(0,t,r)}function Zd(t,e){return x5(Lt(t,e))}function Dn(t,e,{domain:r},{domain:n}){return t==="forward"?v5(e,r,n):b5(e,r,n)}function v5(t,e,r){let n=e.start.isAfterOrEqual(t),i=r.start.isAfterOrEqual(t);if(n&&i){let a=e.start.compareTo(r.start);return a===0?e.end.compareTo(r.end):a}if(!n&&!i){let a=e.end.compareTo(r.end);return a===0?-e.start.compareTo(r.start):a}if(!n&&i){let a=e.end.compareTo(r.start);return a!==0?a:r.isEmpty?1:-1}let o=e.start.compareTo(r.end);return o!==0?o:e.isEmpty?-1:1}function b5(t,e,r){let n=e.end.isBeforeOrEqual(t),i=r.end.isBeforeOrEqual(t);if(n&&i){let a=-e.end.compareTo(r.end);return a===0?-e.start.compareTo(r.start):a}if(!n&&!i){let a=-e.start.compareTo(r.start);return a===0?e.end.compareTo(r.end):a}if(!n&&i){let a=-e.start.compareTo(r.end);return a!==0?a:r.isEmpty?1:-1}let o=-e.end.compareTo(r.start);return o!==0?o:e.isEmpty?-1:1}function pA(t,e,r,n,i,o){return w5(t,n,i,o)&&(i==null||Dn(r,n.includeDescendantScopes?t:e,i,o)<0)}function w5(t,e,r,n){let{containment:i,distalPosition:o,allowAdjacentScopes:a,skipAncestorScopes:l}=e,{domain:p}=n;switch(i){case"disallowed":if(p.contains(t))return!1;break;case"disallowedIfStrict":if(kM(p,t))return!1;break;case"required":if(!p.contains(t))return!1;break}return l&&r!=null&&p.contains(r.domain)?!1:_5(new W(t,o),p,a)}function _5(t,e,r){let n=t.intersection(e);return n==null?!1:!n.isEmpty||r||e.isEmpty}var E5={containment:null,allowAdjacentScopes:!1,skipAncestorScopes:!1,includeDescendantScopes:!1},yt=class{constructor(){this.includeAdjacentInEvery=!1}*generateScopes(e,r,n,i={}){let o={...E5,...i,distalPosition:i.distalPosition??(n==="forward"?e.document.range.end:e.document.range.start)},a,l=r;for(let p of this.generateScopeCandidates(e,r,n,o))if(pA(r,l,n,o,a,p)&&(yield p,a=p,l=n==="forward"?p.domain.end:p.domain.start),this.canStopEarly(r,n,o,a,p))return}canStopEarly(e,r,n,i,o){let{containment:a,distalPosition:l,skipAncestorScopes:p}=n;if(this.isHierarchical&&!p)return!1;let u=this.isHierarchical&&p?i:o;return u==null?!1:!!(a==="required"&&(r==="forward"?u.domain.end.isAfter(e):u.domain.start.isBefore(e))||(r==="forward"?u.domain.end.isAfterOrEqual(l):u.domain.start.isBeforeOrEqual(l)))}};var vr=class extends yt{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.scopeType=n;this.languageId=i;this.isHierarchical=!1}get searchScopeType(){return this.iterationScopeType}get searchScopeHandler(){return this._searchScopeHandler==null&&(this._searchScopeHandler=this.scopeHandlerFactory.create(this.searchScopeType,this.languageId)),this._searchScopeHandler}generateScopeCandidates(r,n,i,o){let{containment:a,...l}=o,p=this.searchScopeHandler.generateScopes(r,n,i,{containment:a==="required"?"required":void 0,...l});return Zd(p,u=>this.generateScopesInSearchScope(i,u))}};var Yd=class extends yt{constructor(r,n){super();this.scopeType={type:"line"};this.iterationScopeType={type:"paragraph"};this.isHierarchical=!1;this.includeAdjacentInEvery=!0}*generateScopeCandidates(r,n,i){if(i==="forward")for(let o=n.line;o<r.document.lineCount;o++)yield uA(r,o);else for(let o=n.line;o>=0;o--)yield uA(r,o)}};function uA(t,e){let{range:r}=t.document.lineAt(e);return{editor:t,domain:r,getTargets:n=>[CS(t,n,r)]}}function CS(t,e,r){return new Vr({editor:t,isReversed:e,contentRange:wl(t,r)})}function wl(t,e){let r=t.document.lineAt(e.start),n=t.document.lineAt(e.end);return new W(r.rangeTrimmed?.start??r.range.start,n.rangeTrimmed?.end??n.range.end)}function ln(t,e,r,n){let i=e.document.offsetAt(r.start),o=e.document.getText(r),a=l=>new W(e.document.positionAt(i+l.index),e.document.positionAt(i+l.index+l[0].length));return t.lastIndex=0,n==="forward"?Lt(o.matchAll(t),a):Array.from(o.matchAll(t),a).reverse()}var Xd=class extends vr{constructor(){super(...arguments);this.scopeType={type:"identifier"};this.iterationScopeType={type:"line"};this.regex=Sr(this.languageId).identifierMatcher}generateScopesInSearchScope(r,{editor:n,domain:i}){return Lt(ln(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:a=>[new Tr({editor:n,contentRange:o,isReversed:a})]}))}};function Jd(t,e,r){let n=t.editor.document.getText(t.domain),i=e.editor.document.getText(e.domain);for(let o of r){let a=qc(o,n),l=qc(o,i);if(a&&!l)return!0;if(l&&!a)return!1}}var R5=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}\p{Z}\p{C}]/gu,k5=/[$]/g,P5=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}]/gu,em=class extends vr{constructor(){super(...arguments);this.scopeType={type:"character"};this.iterationScopeType={type:"token"}}get searchScopeType(){return{type:"line"}}generateScopesInSearchScope(r,{editor:n,domain:i}){return Lt(ln(R5,n,i,r),o=>({editor:n,domain:o,getTargets:a=>[new He({editor:n,contentRange:o,isReversed:a,isToken:!1})]}))}isPreferredOver(r,n){let{identifierMatcher:i}=Sr(this.languageId);return Jd(r,n,[i,k5,P5])}};var M5=/\p{Lu}?\p{Ll}+|\p{Lu}+(?!\p{Ll})|\p{N}+/gu,tm=class{constructor(e){this.wordRegex=Sr(e).wordMatcher}splitIdentifier(e){let r=zc(e,this.wordRegex);return r.length>1?r:zc(e,M5)}};var rm=class extends vr{constructor(){super(...arguments);this.scopeType={type:"word"};this.iterationScopeType={type:"identifier"};this.wordTokenizer=new tm(this.languageId)}getScopesInSearchScope({editor:r,domain:n}){let{document:i}=r,o=i.offsetAt(n.start),l=this.wordTokenizer.splitIdentifier(i.getText(n)).map(p=>new W(i.positionAt(o+p.index),i.positionAt(o+p.index+p.text.length)));return l.map((p,u)=>({editor:r,domain:p,getTargets:d=>{let h=u>0?l[u-1]:null,g=u+1<l.length?l[u+1]:null;return[A5(d,r,h,p,g)]}}))}generateScopesInSearchScope(r,n){let i=this.getScopesInSearchScope(n);return r==="backward"&&i.reverse(),i}};function A5(t,e,r,n,i){let o=r!=null&&n.start.isAfter(r.end)?new W(r.end,n.start):void 0,a=i!=null&&i.start.isAfter(n.end)?new W(n.end,i.start):void 0,p=o!=null||a!=null?e.document.getText(o??a):"";return new Rd({editor:e,isReversed:t,contentRange:n,insertionDelimiter:p,leadingDelimiterRange:o,trailingDelimiterRange:a})}var D5=/[$]/g,nm=class extends vr{constructor(){super(...arguments);this.scopeType={type:"token"};this.iterationScopeType={type:"line"};this.regex=Sr(this.languageId).tokenMatcher}generateScopesInSearchScope(r,{editor:n,domain:i}){return Lt(ln(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:a=>[new Tr({editor:n,contentRange:o,isReversed:a})]}))}isPreferredOver(r,n){let{identifierMatcher:i}=Sr(this.languageId);return Jd(r,n,[i,D5])}};var im=class extends yt{constructor(r,n){super();this.scopeType={type:"document"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i){let o=r.document.range;yield{editor:r,domain:o,getTargets:a=>[new bd({editor:r,isReversed:a,contentRange:o})]}}};function fA(t,e,r){let n=[],i=[];for(let o of t)i.length===0||e(i[i.length-1],o)?i.push(o):(n.push(r(i)),i=[o]);return i.length>0&&n.push(r(i)),n}var _a=class extends yt{constructor(r){super();this.query=r}*generateScopeCandidates(r,n,i,o){let{document:a}=r,l=this.query.matches(a).map(p=>this.matchToScope(r,p)).filter(p=>p!=null).sort((p,u)=>Dn(i,n,p,u));yield*fA(l,(p,u)=>p.domain.isRangeEqual(u.domain),p=>p.length===1?p[0]:{...p[0],getTargets(u){let d=Bc(p.flatMap(h=>h.getTargets(u)),(h,g)=>h.isEqual(g));if(d.length>1&&!p.every(h=>h.allowMultiple)){let h="Please use #allow-multiple! predicate in your query to allow multiple matches for this scope type";if(it(D().messages,"BaseTreeSitterScopeHandler.allow-multiple",h),D().runMode==="test")throw Error(h)}return d}})}};function OS(t,e,r,n){return n?Ea(t,`${e}.${r}`,`_.${r}`):Ea(t,`${e}.${r}`)??(Ea(t,e)!=null?Ea(t,`_.${r}`):void 0)}function Pi(t,e,r,n){return OS(t,e,r,n)?.range}function Ea(t,...e){return t.captures.find(r=>e.some(n=>r.name===n))}var om=class extends _a{constructor(r,n){super(r);this.iterateeScopeType=n;this.isHierarchical=!0;this.scopeType=void 0}get iterationScopeType(){throw Error("Not implemented")}matchToScope(r,n){let i=this.iterateeScopeType.type,o=OS(n,i,"iteration",!1);if(o==null)return;let{range:a,allowMultiple:l}=o,p=Pi(n,i,"iteration.domain",!1)??a;return{editor:r,domain:p,allowMultiple:l,getTargets:u=>[new He({editor:r,isReversed:u,contentRange:a})]}}};var sm=class extends _a{constructor(r,n){super(r);this.scopeType=n;this.isHierarchical=!0}get iterationScopeType(){return{type:"custom",scopeHandler:new om(this.query,this.scopeType)}}matchToScope(r,n){let i=this.scopeType.type,o=Ea(n,i);if(o==null)return;let{range:a,allowMultiple:l,insertionDelimiter:p}=o,u=Pi(n,i,"domain",!0)??a,d=Pi(n,i,"removal",!0),h=Pi(n,i,"interior",!0),g=Pi(n,i,"prefix",!0)?.with(void 0,a.start),x=Pi(n,i,"leading",!0)?.with(void 0,g?.start??a.start),_=Pi(n,i,"trailing",!0)?.with(a.end);return{editor:r,domain:u,allowMultiple:l,getTargets:w=>[new uo({scopeTypeType:i,editor:r,isReversed:w,contentRange:a,prefixRange:g,removalRange:d,leadingDelimiterRange:x,trailingDelimiterRange:_,interiorRange:h,insertionDelimiter:p})]}}};function dA(t){return t.flatMap(e=>{let{value:r,done:n}=e.next();return n?[]:[{iterator:e,value:r}]})}function mA(t,e){return t.flatMap(r=>{let{iterator:n}=r,{value:i}=r,o=!1;for(;!o&&!e(i);)({value:i,done:o}=n.next());return o?[]:[{iterator:n,value:i}]})}var am=class t extends yt{constructor(r,n,i){super();this.scopeType=r;this.scopeHandlers=n;this.getIterationScopeType=i;this.isHierarchical=!0}static create(r,n,i){let o=n.scopeTypes.map(l=>{let p=r.create(l,i);if(p==null)throw new Error(`No available scope handler for '${l.type}'`);return p}),a=()=>({type:"custom",scopeHandler:new t(void 0,o.map(l=>r.create(l.iterationScopeType,i)),()=>{throw new Error("Not implemented")})});return new t(n,o,a)}get iterationScopeType(){return this.getIterationScopeType()}*generateScopeCandidates(r,n,i,o){let a=this.scopeHandlers.map(p=>p.generateScopes(r,n,i,o)[Symbol.iterator]()),l=dA(a);for(;l.length>0;){l.sort((u,d)=>Dn(i,n,u.value,d.value));let p=l[0].value;yield p,l=mA(l,u=>Dn(i,n,p,u)<0)}}};var cm=class extends yt{constructor(r,n){super();this.scopeType={type:"paragraph"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i){let{document:o}=r,a=i==="forward"?1:-1,l=i==="forward"?o.lineCount:-1,p=I5(o,n,i),u=r.document.lineAt(n);for(let d=n.line+a;d!==l;d+=a){let h=r.document.lineAt(d);h.isEmptyOrWhitespace?p!=null&&(yield hA(r,p.range.union(u.range)),p=void 0):p==null&&(p=h),u=h}p!=null&&(yield hA(r,p.range.union(u.range)))}};function I5(t,e,r){let n=r==="forward"?-1:1,i=r==="forward"?-1:t.lineCount,o=t.lineAt(e);if(!o.isEmptyOrWhitespace){for(let a=e.line+n;a!==i;a+=n){let l=t.lineAt(a);if(l.isEmptyOrWhitespace)break;o=l}return o}}function hA(t,e){return{editor:t,domain:e,getTargets:r=>[new xa({editor:t,isReversed:r,contentRange:wl(t,e)})]}}function _l(t,e){return e.length>1?e.indexOf(t.slice(-1))>-1:t.slice(-1)===e}function gA(t,e){return t.slice(t.length-e.length)===e}var NS,C5=["al","adj","assn","Ave","BSc","MSc","Cell","Ch","Co","cc","Corp","Dem","Dept","ed","eg","Eq","Eqs","est","est","etc","Ex","ext","Fig","fig","Figs","figs","i.e","ie","Inc","inc","Jan","Feb","Mar","Apr","Jun","Jul","Aug","Sep","Sept","Oct","Nov","Dec","jr","mi","Miss","Mrs","Mr","Ms","Mol","mt","mts","no","Nos","PhD","MD","BA","MA","MM","pl","pop","pp","Prof","Dr","pt","Ref","Refs","Rep","repr","rev","Sec","Secs","Sgt","Col","Gen","Rep","Sen","Gov","Lt","Maj","Capt","St","Sr","sr","Jr","jr","Rev","Sun","Mon","Tu","Tue","Tues","Wed","Th","Thu","Thur","Thurs","Fri","Sat","trans","Univ","Viz","Vol","vs","v"];function yA(t){t?NS=t:NS=C5}function LS(t){return/^[A-Z][a-z].*/.test(t)||lm(t)}function xA(t){return LS(t)||/``|"|'/.test(t.substring(0,2))}function TA(t){let e=t.replace(/[-'`~!@#$%^&*()_|+=?;:'",.<>{}[\]\\/]/gi,"");return~NS.indexOf(e)}function SA(t,e){return(t==="a.m."||t==="p.m.")&&e.replace(/\W+/g,"").slice(-3).toLowerCase()==="day"}function US(t){let e=t.replace(/[()[]{}]/g,"").match(/(.\.)*/);return e&&e[0].length>0}function vA(t){return t.length<=3?!0:LS(t)}function VS(t,e){return e.length>0?t<5&&e[0].length<6&&LS(e[0])?!0:e.filter(function(n){return/[A-Z]/.test(n.charAt(0))}).length>=3:!1}function lm(t,e){return e&&(t=t.slice(e-1,e+2)),!isNaN(t)}function bA(t){return t.match(/^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/)}function wA(t){return t.match(/[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/)}function _A(t){let e=0;return((e=t.indexOf("."))>-1||(e=t.indexOf("!"))>-1||(e=t.indexOf("?"))>-1)&&t.charAt(e+1).match(/[a-zA-Z].*/)?[t.slice(0,e),t.slice(e+1)]:!1}function EA(t){return t==="."||t==="!"||t==="?"}var kA=" @~@ ",RA=kA.trim(),N5=new RegExp("\\S",""),L5=new RegExp("\\n+|[-#=_+*]{4,}","g"),U5=new RegExp("\\S+|\\n","g"),V5={newlineBoundaries:!1,preserveWhitespace:!1,abbreviations:void 0};function PA(t,e){if(!t)return[];if(!N5.test(t))return[];let r={...V5,...e};yA(r.abbreviations),r.newlineBoundaries&&(t=t.replace(L5,kA));let n,i;r.preserveWhitespace?(i=t.split(/(<br\s*\/?>|\S+|\n+)/),n=i.filter(function(h,g){return g%2})):n=t.trim().match(U5)??[];let o=0,a=0,l=[],p=[],u=[];if(!n||!n.length)return[];for(let h=0,g=n.length;h<g;h++){if(o++,u.push(n[h]),~n[h].indexOf(",")&&(o=0),EA(n[h])||_l(n[h],"?!")||n[h]===RA){r.newlineBoundaries&&n[h]===RA&&u.pop(),p.push(u),o=0,u=[];continue}if((_l(n[h],'"')||_l(n[h],"\u201D"))&&(n[h]=n[h].slice(0,-1)),_l(n[h],".")){if(h+1<g){if(n[h].length===2&&isNaN(n[h].charAt(0))||TA(n[h]))continue;if(xA(n[h+1])){if(SA(n[h],n[h+1])||VS(o,n.slice(h,6))||lm(n[h+1])&&vA(n[h]))continue}else if(gA(n[h],"..")||US(n[h])||VS(o,n.slice(h,5)))continue}p.push(u),u=[],o=0;continue}(a=n[h].indexOf("."))>-1&&(lm(n[h],a)||US(n[h])||wA(n[h])||bA(n[h]))||(l=_A(n[h]))&&(u.pop(),u.push(l[0]),p.push(u),u=[],o=0,u.push(l[1]))}return u.length&&p.push(u),p=p.filter(function(h){return h.length>0}),p.slice(1).reduce(function(h,g){let x=h[h.length-1];return x.length===1&&/^.{1,2}[.]$/.test(x[0])&&!/[.]/.test(g[0])?(h.pop(),h.push(x.concat(g)),h):(h.push(g),h)},[p[0]]).map(function(h,g){if(r.preserveWhitespace&&!r.newlineBoundaries){let x=h.length*2;return g===0&&(x+=1),i.splice(0,x).join("")}return h.join(" ")})}var B5=/\S*\p{L}/u,MA=/(\r?\n[^\p{L}]*\r?\n)|(?<=[.!?])(\s*\r?\n)/gu,H5={newlineBoundaries:!1,preserveWhitespace:!0},pm=class{*segment(e){let r=PA(e,H5),n=0;for(let i of r){let o=i.split(MA).filter(a=>a!=null);for(let a of o){if(!$5(a)){let l=W5(a,n);l!=null&&(yield l)}n+=a.length}}}};function W5(t,e){let r=ck(B5,t);if(r==null)return;let n=r.index;return n!==0&&(e+=n,t=t.slice(n)),{text:t.trimEnd(),index:e}}function $5(t){return qc(MA,t)}var um=class extends vr{constructor(){super(...arguments);this.scopeType={type:"sentence"};this.iterationScopeType={type:"paragraph"};this.segmenter=new pm}generateScopesInSearchScope(r,{editor:n,domain:i}){let o=n.document.offsetAt(i.start),a=n.document.getText(i),l=u=>{let d=new W(n.document.positionAt(o+u.index),n.document.positionAt(o+u.index+u.text.length));return{editor:n,domain:d,getTargets:h=>[new Tr({editor:n,contentRange:d,isReversed:h})]}},p=this.segmenter.segment(a);return r==="forward"?Lt(p,l):Array.from(p,l).reverse()}};var Ra=class extends vr{constructor(){super(...arguments);this.iterationScopeType={type:"line"}}generateScopesInSearchScope(r,{editor:n,domain:i}){return Lt(ln(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:a=>[new Tr({editor:n,contentRange:o,isReversed:a})]}))}},fm=class extends Ra{constructor(){super(...arguments);this.regex=/\S+/g}},dm=class extends Ra{constructor(r,n,i){super(r,n,i);this.scopeType=n;this.regex=/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/g}},mm=class extends Ra{constructor(r,n,i){super(r,n,i);this.scopeType=n}get regex(){return new RegExp(this.scopeType.regex,this.scopeType.flags??"gu")}},hm=class extends Ra{constructor(r,n,i){super(r,n,i);this.scopeType=n}get regex(){return new RegExp(Nr(this.scopeType.character),"gui")}};var gm=class extends yt{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.languageId=n;this.targetScopeType=i;this.isHierarchical=!0;this.targetScopeHandler=this.scopeHandlerFactory.create(this.targetScopeType,this.languageId),this.surroundingPairInteriorScopeHandler=this.scopeHandlerFactory.create({type:"surroundingPairInterior",delimiter:"any"},this.languageId)}get iterationScopeType(){if(this.targetScopeHandler.iterationScopeType.type==="custom")throw Error("Iteration scope type can't be custom for BoundedBaseScopeHandler");return{type:"oneOf",scopeTypes:[this.targetScopeHandler.iterationScopeType,{type:"surroundingPairInterior",delimiter:"any"}]}}*generateScopeCandidates(r,n,i,o){let a=this.targetScopeHandler.generateScopes(r,n,i,{...o,containment:o.containment!=="disallowed"?o.containment:void 0}),l=Array.from(this.surroundingPairInteriorScopeHandler.generateScopes(r,n,i,{...o,containment:o.containment==null&&o.skipAncestorScopes?"required":o.containment}));for(let p of a){let u=[];for(let d of l){let h=p.domain.intersection(d.domain);h!=null&&!h.isEmpty&&u.push({editor:r,domain:h,getTargets:g=>[this.getTargets(AA(p,g),AA(d,g))]})}u.push(p),u.sort((d,h)=>Dn(i,n,d,h)),yield*u}}};function AA(t,e){let r=t.getTargets(e);if(r.length!==1)throw Error(`Expected one target but got ${r.length}`);return r[0]}var ym=class extends gm{constructor(r,n,i){super(r,i,{type:"nonWhitespaceSequence"});this.scopeType={type:"boundedNonWhitespaceSequence"}}getTargets(r,n){let i=r.contentRange.intersection(n.contentRange);if(i==null||i.isEmpty)throw Error("Expected non empty intersection");return new Tr({editor:r.editor,isReversed:r.isReversed,contentRange:i})}},xm=class extends gm{constructor(r,n,i){super(r,i,{type:"paragraph"});this.scopeType={type:"boundedParagraph"}}getTargets(r,n){if(!(r instanceof xa))throw Error("Expected ParagraphTarget");return new Ad({editor:r.editor,isReversed:r.isReversed,paragraphTarget:r,containingInterior:n})}};var Tm=class extends yt{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.scopeType=n;this.languageId=i;this.isHierarchical=!0;this.surroundingPairScopeHandler=this.scopeHandlerFactory.create({type:"surroundingPair",delimiter:this.scopeType.delimiter,requireStrongContainment:!0},this.languageId)}get iterationScopeType(){return this.surroundingPairScopeHandler.iterationScopeType}*generateScopeCandidates(r,n,i,o){let a=this.surroundingPairScopeHandler.generateScopes(r,n,i,o);for(let l of a)this.scopeType.requireSingleLine&&!l.domain.isSingleLine||(yield{editor:r,domain:l.domain,getTargets(p){return l.getTargets(p).flatMap(u=>u.getInterior())}})}};function DA(t,{openingDelimiterRange:e,closingDelimiterRange:r},n){let i=e.union(r),o=new W(e.end,r.start);return{editor:t,domain:n?o:i,getTargets:a=>[new kd({editor:t,isReversed:a,contentRange:i,interiorRange:o,boundary:[e,r]})]}}function IA(t){let e=vi(t.map(({text:r})=>r)).map(Nr).join("|");return new RegExp(`(?<!\\\\)(${e})`,"gu")}function FA(t,e,r){if(r.length===0)return[];let n=IA(r),i=t?.getCaptures(e,"disqualifyDelimiter")??[],o=t?.getCaptures(e,"textFragment")??[],a=Object.fromEntries(r.map(p=>[p.text,p])),l=e.getText();return nn(l,n,p=>{let u=p[0],d=new W(e.positionAt(p.index),e.positionAt(p.index+u.length)),h=i.some(x=>x.range.contains(d)&&!x.hasError()),g=o.find(x=>x.range.contains(d))?.range;return{delimiterInfo:a[u],isDisqualified:h,textFragmentRange:g,range:d}})}var vm=Object.freeze({angleBrackets:[["</","<"],[">","/>"]],backtickQuotes:["`","`"],curlyBrackets:[["{","${"],"}"],tripleDoubleQuotes:[[],[]],tripleSingleQuotes:[[],[]],doubleQuotes:['"','"',{isSingleLine:!0}],escapedDoubleQuotes:['\\"','\\"',{isSingleLine:!0}],escapedParentheses:["\\(","\\)"],escapedSquareBrackets:["\\[","\\]"],escapedSingleQuotes:["\\'","\\'",{isSingleLine:!0}],parentheses:[["(","$("],")"],singleQuotes:["'","'",{isSingleLine:!0}],squareBrackets:["[","]"]}),Sm=["","r","u","R","U","f","F","fr","Fr","fR","FR","rf","rF","Rf","RF","b","B","br","Br","bR","BR","rb","rB","Rb","RB"],CA={nix:{singleQuotes:["''","''"]},lua:{doubleQuotes:[['"',"[["],['"',"]]"]]},python:{singleQuotes:[Sm.map(t=>`${t}'`),"'",{isSingleLine:!0,isUnknownSide:!0}],doubleQuotes:[Sm.map(t=>`${t}"`),'"',{isSingleLine:!0,isUnknownSide:!0}],tripleSingleQuotes:[Sm.map(t=>`${t}'''`),"'''",{isUnknownSide:!0}],tripleDoubleQuotes:[Sm.map(t=>`${t}"""`),'"""',{isUnknownSide:!0}]},ruby:{tripleDoubleQuotes:["%Q(",")"]}},_0e=Object.fromEntries(Object.values(vm)),OA={any:wi(vm),string:["tripleDoubleQuotes","tripleSingleQuotes","doubleQuotes","singleQuotes","backtickQuotes"],collectionBoundary:["parentheses","squareBrackets","curlyBrackets","angleBrackets"]};function NA(t){return t!=null&&t in CA?{...vm,...CA[t]}:vm}function LA(t,e){let r=OA[t]??[t];return j5(e,r)}function j5(t,e){let r=NA(t);return e.flatMap(n=>{let[i,o,a]=r[n],{isSingleLine:l=!1,isUnknownSide:p=!1}=a??{},u=il(i)?[i]:i,d=il(o)?[o]:o;return vi(Uc(u,d)).map(g=>{let x=u.includes(g),_=d.includes(g);return{text:g,side:p?"unknown":x&&!_?"left":!x&&_?"right":"unknown",delimiterName:n,isSingleLine:l}})})}function UA(t){let e=[],r=new so(()=>[]);for(let n of t){let{delimiterInfo:{delimiterName:i,side:o,isSingleLine:a},isDisqualified:l,textFragmentRange:p,range:u}=n;if(l)continue;let d=r.get(i);a&&(d=d.filter(g=>g.range.start.line===u.start.line),r.set(i,d));let h=d.filter(g=>p==null&&g.textFragmentRange==null||p!=null&&g.textFragmentRange!=null&&g.textFragmentRange.isRangeEqual(p));if(o==="left"||o==="unknown"&&h.length%2===0)d.push(n);else{let g=h.at(-1);if(g==null)continue;d.splice(d.lastIndexOf(g),1),e.push({delimiterName:i,openingDelimiterRange:g.range,closingDelimiterRange:u})}}return e}var bm=class extends yt{constructor(r,n,i){super();this.languageDefinitions=r;this.scopeType=n;this.languageId=i;this.iterationScopeType={type:"line"};this.isHierarchical=!0}*generateScopeCandidates(r,n,i,o){if(this.scopeType.forceDirection!=null){it(D().messages,"deprecatedForceDirection","forceDirection is deprecated. If this is important to you please file an issue on the cursorless repo.");return}let a=FA(this.languageDefinitions.get(this.languageId),r.document,LA(this.scopeType.delimiter,this.languageId)),l=UA(a);l=q5(i,o,n,l),yield*l.map(p=>DA(r,p,this.scopeType.requireStrongContainment??!1)).sort((p,u)=>Dn(i,n,p,u))}};function q5(t,e,r,n){return t==="forward"&&e.containment==="required"&&e.allowAdjacentScopes&&e.skipAncestorScopes?n.filter((i,o)=>!(i.closingDelimiterRange.end.isEqual(r)&&n[o+1]?.closingDelimiterRange.start.isEqual(r))):n}var ka=class{constructor(e){this.languageDefinitions=e;this.create=this.create.bind(this)}create(e,r){switch(e.type){case"character":return new em(this,e,r);case"word":return new rm(this,e,r);case"token":return new nm(this,e,r);case"identifier":return new Xd(this,e,r);case"line":return new Yd(e,r);case"sentence":return new um(this,e,r);case"paragraph":return new cm(e,r);case"boundedParagraph":return new xm(this,e,r);case"document":return new im(e,r);case"oneOf":return am.create(this,e,r);case"nonWhitespaceSequence":return new fm(this,e,r);case"boundedNonWhitespaceSequence":return new ym(this,e,r);case"url":return new dm(this,e,r);case"customRegex":return new mm(this,e,r);case"glyph":return new hm(this,e,r);case"surroundingPair":return new bm(this.languageDefinitions,e,r);case"surroundingPairInterior":return new Tm(this,e,r);case"custom":return e.scopeHandler;case"instance":throw Error("Unexpected scope type 'instance'");default:return this.languageDefinitions.get(r)?.getScopeHandler(e)}}};function pn(t,e){return new W(t.row,t.column,e.row,e.column)}function BS(t){return new ce(t.row,t.column)}function VA(t){return new W(t.startPosition.row,t.startPosition.column,t.endPosition.row,t.endPosition.column)}function BA(t,e){return new Te(t.startPosition.row,t.startPosition.column,e.endPosition.row,e.endPosition.column)}function Yn(t,e){return{selection:new Te(new ce(e.startPosition.row,e.startPosition.column),new ce(e.endPosition.row,e.endPosition.column)),context:{}}}function z5(t,e,r){let n=e.startIndex<r.startIndex,i=n?e:r,o=n?r:e;return{selection:new Te(new ce(i.startPosition.row,i.startPosition.column),new ce(o.endPosition.row,o.endPosition.column)),context:{}}}function HA(){return El(t=>t.type===","||t.type==="("||t.type===")"||t.type==="["||t.type==="]"||t.type===">"||t.type==="<"||t.type==="}"||t.type==="{",", ")}function WA(t,e){let r=e.startIndex,n=e.endIndex;return e.text.startsWith("(")&&e.text.endsWith(")")?(r+=1,n-=1):e.text.endsWith(";")&&(n-=1),{selection:new Te(t.document.positionAt(r),t.document.positionAt(n)),context:{}}}function $A(...t){return function(e,r){let n=r.previousSibling,i=n?.previousSibling,o;return n&&(t.includes(n.type)?i?o=pn(i.endPosition,r.startPosition):o=pn(n.startPosition,r.startPosition):o=pn(n.endPosition,r.startPosition)),{...Yn(e,r),context:{leadingDelimiterRange:o}}}}function Xn(t=[],e=[],{includeUnnamedChildren:r=!1}={}){return function(n,i){if(t.length>0&&e.length>0)throw new Error("Cannot have both exclusions and inclusions.");let o=r?i.children:i.namedChildren,a=new Set(t),l=new Set(e);return o=o.filter(p=>a.size>0?!a.has(p.type):l.size>0?l.has(p.type):!0),z5(n,o[0],o[o.length-1])}}function jA(...t){return function(e,r){let n=r.nextSibling,i=n?.nextSibling,o;return n&&(t.includes(n.type)?i?o=pn(r.endPosition,i.startPosition):o=pn(r.endPosition,n.endPosition):o=pn(r.endPosition,n.startPosition)),{...Yn(e,r),context:{trailingDelimiterRange:o}}}}function G5(t,e){let r=t.nextSibling;for(;r!=null;){if(!e(r))return r;r=r.nextSibling}return r}function K5(t,e){let r=t.previousSibling;for(;r!=null;){if(!e(r))return r;r=r.previousSibling}return r}function El(t,e,r=Ht,n=Ht){return(i,o)=>{let a,l,p=r(o),u=n(o),d=K5(p,t),h=G5(u,t);d!=null&&(a=pn(d.endPosition,p.startPosition)),h!=null&&(l=pn(u.endPosition,h.startPosition));let g=Q5(i,a,l,e);return{selection:new Te(new ce(p.startPosition.row,p.startPosition.column),new ce(u.endPosition.row,u.endPosition.column)),context:{containingListDelimiter:g,leadingDelimiterRange:a,trailingDelimiterRange:l}}}}function Q5(t,e,r,n){let{document:i}=t,o=[r!=null?i.getText(r):n,e!=null?i.getText(e):n];return pT(o,"length")}function qA(t,e){if(t.length===1)return!0;let r=!1,n=t.filter(({name:p})=>p.endsWith(".start")).map(({range:{end:p}})=>p).sort((p,u)=>p.compareTo(u)).at(-1),i=t.filter(({name:p})=>p.endsWith(".end")).map(({range:{start:p}})=>p).sort((p,u)=>p.compareTo(u)).at(0);n!=null&&i!=null&&n.isAfter(i)&&(it(e,"TreeSitterQuery.checkCaptures.badOrder",`Start capture must be before end capture: ${t}`),r=!0);let o=t.filter(({name:p})=>p.endsWith(".start")).length,a=t.filter(({name:p})=>p.endsWith(".end")).length,l=t.length-o-a;return l>0&&(o>0||a>0)&&(it(e,"TreeSitterQuery.checkCaptures.mixRegularStartEnd",`Please do not mix regular captures and start/end captures: ${t.map(({name:p,range:u})=>p+" "+u.toString())}`),r=!0),l>1&&(it(e,"TreeSitterQuery.checkCaptures.duplicate",`A capture with the same name may only appear once in a single pattern: ${t.map(({name:p,range:u})=>p+" "+u.toString())}`),r=!0),!r}function zA(t){let e=t;for(;e!=null;){if(e.hasError)return!0;e=e.parent}return!1}var Ce;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{let o={};for(let a of i)o[a]=a;return o},t.getValidEnumValues=i=>{let o=t.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),a={};for(let l of o)a[l]=i[l];return t.objectValues(a)},t.objectValues=i=>t.objectKeys(i).map(function(o){return i[o]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let o=[];for(let a in i)Object.prototype.hasOwnProperty.call(i,a)&&o.push(a);return o},t.find=(i,o)=>{for(let a of i)if(o(a))return a},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,o=" | "){return i.map(a=>typeof a=="string"?`'${a}'`:a).join(o)}t.joinValues=n,t.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(Ce||(Ce={}));var WS;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(WS||(WS={}));var J=Ce.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),mo=t=>{switch(typeof t){case"undefined":return J.undefined;case"string":return J.string;case"number":return isNaN(t)?J.nan:J.number;case"boolean":return J.boolean;case"function":return J.function;case"bigint":return J.bigint;case"symbol":return J.symbol;case"object":return Array.isArray(t)?J.array:t===null?J.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?J.promise:typeof Map<"u"&&t instanceof Map?J.map:typeof Set<"u"&&t instanceof Set?J.set:typeof Date<"u"&&t instanceof Date?J.date:J.object;default:return J.unknown}},G=Ce.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Z5=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),Br=class t extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let r=e||function(o){return o.message},n={_errors:[]},i=o=>{for(let a of o.issues)if(a.code==="invalid_union")a.unionErrors.map(i);else if(a.code==="invalid_return_type")i(a.returnTypeError);else if(a.code==="invalid_arguments")i(a.argumentsError);else if(a.path.length===0)n._errors.push(r(a));else{let l=n,p=0;for(;p<a.path.length;){let u=a.path[p];p===a.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(r(a))):l[u]=l[u]||{_errors:[]},l=l[u],p++}}};return i(this),n}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ce.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};Br.create=t=>new Br(t);var Aa=(t,e)=>{let r;switch(t.code){case G.invalid_type:t.received===J.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case G.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,Ce.jsonStringifyReplacer)}`;break;case G.unrecognized_keys:r=`Unrecognized key(s) in object: ${Ce.joinValues(t.keys,", ")}`;break;case G.invalid_union:r="Invalid input";break;case G.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Ce.joinValues(t.options)}`;break;case G.invalid_enum_value:r=`Invalid enum value. Expected ${Ce.joinValues(t.options)}, received '${t.received}'`;break;case G.invalid_arguments:r="Invalid function arguments";break;case G.invalid_return_type:r="Invalid function return type";break;case G.invalid_date:r="Invalid date";break;case G.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:Ce.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case G.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case G.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case G.custom:r="Invalid input";break;case G.invalid_intersection_types:r="Intersection results could not be merged";break;case G.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case G.not_finite:r="Number must be finite";break;default:r=e.defaultError,Ce.assertNever(t)}return{message:r}},QA=Aa;function Y5(t){QA=t}function wm(){return QA}var _m=t=>{let{data:e,path:r,errorMaps:n,issueData:i}=t,o=[...r,...i.path||[]],a={...i,path:o};if(i.message!==void 0)return{...i,path:o,message:i.message};let l="",p=n.filter(u=>!!u).slice().reverse();for(let u of p)l=u(a,{data:e,defaultError:l}).message;return{...i,path:o,message:l}},X5=[];function X(t,e){let r=wm(),n=_m({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===Aa?void 0:Aa].filter(i=>!!i)});t.common.issues.push(n)}var qt=class t{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let i of r){if(i.status==="aborted")return he;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let i of r){let o=await i.key,a=await i.value;n.push({key:o,value:a})}return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let i of r){let{key:o,value:a}=i;if(o.status==="aborted"||a.status==="aborted")return he;o.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof a.value<"u"||i.alwaysSet)&&(n[o.value]=a.value)}return{status:e.value,value:n}}},he=Object.freeze({status:"aborted"}),Ma=t=>({status:"dirty",value:t}),nr=t=>({status:"valid",value:t}),$S=t=>t.status==="aborted",jS=t=>t.status==="dirty",Pl=t=>t.status==="valid",Ml=t=>typeof Promise<"u"&&t instanceof Promise;function Em(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function ZA(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}var se;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(se||(se={}));var Rl,kl,fn=class{constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},GA=(t,e)=>{if(Pl(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new Br(t.common.issues);return this._error=r,this._error}}};function Se(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(a,l)=>{var p,u;let{message:d}=t;return a.code==="invalid_enum_value"?{message:d??l.defaultError}:typeof l.data>"u"?{message:(p=d??n)!==null&&p!==void 0?p:l.defaultError}:a.code!=="invalid_type"?{message:l.defaultError}:{message:(u=d??r)!==null&&u!==void 0?u:l.defaultError}},description:i}}var ve=class{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return mo(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:mo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new qt,ctx:{common:e.parent.common,data:e.data,parsedType:mo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(Ml(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;let i={common:{issues:[],async:(n=r?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:mo(e)},o=this._parseSync({data:e,path:i.path,parent:i});return GA(i,o)}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:mo(e)},i=this._parse({data:e,path:n.path,parent:n}),o=await(Ml(i)?i:Promise.resolve(i));return GA(n,o)}refine(e,r){let n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,o)=>{let a=e(i),l=()=>o.addIssue({code:G.custom,...n(i)});return typeof Promise<"u"&&a instanceof Promise?a.then(p=>p?!0:(l(),!1)):a?!0:(l(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new Hr({schema:this,typeName:fe.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return un.create(this,this._def)}nullable(){return ei.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Di.create(this,this._def)}promise(){return yo.create(this,this._def)}or(e){return as.create([this,e],this._def)}and(e){return cs.create(this,e,this._def)}transform(e){return new Hr({...Se(this._def),schema:this,typeName:fe.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new ds({...Se(this._def),innerType:this,defaultValue:r,typeName:fe.ZodDefault})}brand(){return new Al({typeName:fe.ZodBranded,type:this,...Se(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new ms({...Se(this._def),innerType:this,catchValue:r,typeName:fe.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return Dl.create(this,e)}readonly(){return hs.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},J5=/^c[^\s-]{8,}$/i,e8=/^[0-9a-z]+$/,t8=/^[0-9A-HJKMNP-TV-Z]{26}$/,r8=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,n8=/^[a-z0-9_-]{21}$/i,i8=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,o8=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,s8="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",HS,a8=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,c8=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,l8=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,YA="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",p8=new RegExp(`^${YA}$`);function XA(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function u8(t){return new RegExp(`^${XA(t)}$`)}function JA(t){let e=`${YA}T${XA(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function f8(t,e){return!!((e==="v4"||!e)&&a8.test(t)||(e==="v6"||!e)&&c8.test(t))}var ho=class t extends ve{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==J.string){let o=this._getOrReturnCtx(e);return X(o,{code:G.invalid_type,expected:J.string,received:o.parsedType}),he}let n=new qt,i;for(let o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(i=this._getOrReturnCtx(e,i),X(i,{code:G.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="max")e.data.length>o.value&&(i=this._getOrReturnCtx(e,i),X(i,{code:G.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="length"){let a=e.data.length>o.value,l=e.data.length<o.value;(a||l)&&(i=this._getOrReturnCtx(e,i),a?X(i,{code:G.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):l&&X(i,{code:G.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),n.dirty())}else if(o.kind==="email")o8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"email",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="emoji")HS||(HS=new RegExp(s8,"u")),HS.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"emoji",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="uuid")r8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"uuid",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="nanoid")n8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"nanoid",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid")J5.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"cuid",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid2")e8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"cuid2",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="ulid")t8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"ulid",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),X(i,{validation:"url",code:G.invalid_string,message:o.message}),n.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"regex",code:G.invalid_string,message:o.message}),n.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(e,i),X(i,{code:G.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),n.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(i=this._getOrReturnCtx(e,i),X(i,{code:G.invalid_string,validation:{startsWith:o.value},message:o.message}),n.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(i=this._getOrReturnCtx(e,i),X(i,{code:G.invalid_string,validation:{endsWith:o.value},message:o.message}),n.dirty()):o.kind==="datetime"?JA(o).test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{code:G.invalid_string,validation:"datetime",message:o.message}),n.dirty()):o.kind==="date"?p8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{code:G.invalid_string,validation:"date",message:o.message}),n.dirty()):o.kind==="time"?u8(o).test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{code:G.invalid_string,validation:"time",message:o.message}),n.dirty()):o.kind==="duration"?i8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"duration",code:G.invalid_string,message:o.message}),n.dirty()):o.kind==="ip"?f8(e.data,o.version)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"ip",code:G.invalid_string,message:o.message}),n.dirty()):o.kind==="base64"?l8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"base64",code:G.invalid_string,message:o.message}),n.dirty()):Ce.assertNever(o);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(i=>e.test(i),{validation:r,code:G.invalid_string,...se.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...se.errToObj(e)})}url(e){return this._addCheck({kind:"url",...se.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...se.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...se.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...se.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...se.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...se.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...se.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...se.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...se.errToObj(e)})}datetime(e){var r,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,local:(n=e?.local)!==null&&n!==void 0?n:!1,...se.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...se.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...se.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...se.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...se.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...se.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...se.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...se.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...se.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...se.errToObj(r)})}nonempty(e){return this.min(1,se.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};ho.create=t=>{var e;return new ho({checks:[],typeName:fe.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Se(t)})};function d8(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,o=parseInt(t.toFixed(i).replace(".","")),a=parseInt(e.toFixed(i).replace(".",""));return o%a/Math.pow(10,i)}var ts=class t extends ve{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==J.number){let o=this._getOrReturnCtx(e);return X(o,{code:G.invalid_type,expected:J.number,received:o.parsedType}),he}let n,i=new qt;for(let o of this._def.checks)o.kind==="int"?Ce.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),X(n,{code:G.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),X(n,{code:G.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),X(n,{code:G.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?d8(e.data,o.value)!==0&&(n=this._getOrReturnCtx(e,n),X(n,{code:G.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),X(n,{code:G.not_finite,message:o.message}),i.dirty()):Ce.assertNever(o);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,se.toString(r))}gt(e,r){return this.setLimit("min",e,!1,se.toString(r))}lte(e,r){return this.setLimit("max",e,!0,se.toString(r))}lt(e,r){return this.setLimit("max",e,!1,se.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:se.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:se.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:se.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:se.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:se.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:se.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:se.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:se.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:se.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:se.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Ce.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};ts.create=t=>new ts({checks:[],typeName:fe.ZodNumber,coerce:t?.coerce||!1,...Se(t)});var rs=class t extends ve{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==J.bigint){let o=this._getOrReturnCtx(e);return X(o,{code:G.invalid_type,expected:J.bigint,received:o.parsedType}),he}let n,i=new qt;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),X(n,{code:G.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),X(n,{code:G.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),X(n,{code:G.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):Ce.assertNever(o);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,se.toString(r))}gt(e,r){return this.setLimit("min",e,!1,se.toString(r))}lte(e,r){return this.setLimit("max",e,!0,se.toString(r))}lt(e,r){return this.setLimit("max",e,!1,se.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:se.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:se.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:se.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:se.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:se.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:se.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};rs.create=t=>{var e;return new rs({checks:[],typeName:fe.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Se(t)})};var ns=class extends ve{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==J.boolean){let n=this._getOrReturnCtx(e);return X(n,{code:G.invalid_type,expected:J.boolean,received:n.parsedType}),he}return nr(e.data)}};ns.create=t=>new ns({typeName:fe.ZodBoolean,coerce:t?.coerce||!1,...Se(t)});var is=class t extends ve{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==J.date){let o=this._getOrReturnCtx(e);return X(o,{code:G.invalid_type,expected:J.date,received:o.parsedType}),he}if(isNaN(e.data.getTime())){let o=this._getOrReturnCtx(e);return X(o,{code:G.invalid_date}),he}let n=new qt,i;for(let o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(i=this._getOrReturnCtx(e,i),X(i,{code:G.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),n.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(i=this._getOrReturnCtx(e,i),X(i,{code:G.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),n.dirty()):Ce.assertNever(o);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:se.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:se.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};is.create=t=>new is({checks:[],coerce:t?.coerce||!1,typeName:fe.ZodDate,...Se(t)});var Da=class extends ve{_parse(e){if(this._getType(e)!==J.symbol){let n=this._getOrReturnCtx(e);return X(n,{code:G.invalid_type,expected:J.symbol,received:n.parsedType}),he}return nr(e.data)}};Da.create=t=>new Da({typeName:fe.ZodSymbol,...Se(t)});var os=class extends ve{_parse(e){if(this._getType(e)!==J.undefined){let n=this._getOrReturnCtx(e);return X(n,{code:G.invalid_type,expected:J.undefined,received:n.parsedType}),he}return nr(e.data)}};os.create=t=>new os({typeName:fe.ZodUndefined,...Se(t)});var ss=class extends ve{_parse(e){if(this._getType(e)!==J.null){let n=this._getOrReturnCtx(e);return X(n,{code:G.invalid_type,expected:J.null,received:n.parsedType}),he}return nr(e.data)}};ss.create=t=>new ss({typeName:fe.ZodNull,...Se(t)});var go=class extends ve{constructor(){super(...arguments),this._any=!0}_parse(e){return nr(e.data)}};go.create=t=>new go({typeName:fe.ZodAny,...Se(t)});var Ai=class extends ve{constructor(){super(...arguments),this._unknown=!0}_parse(e){return nr(e.data)}};Ai.create=t=>new Ai({typeName:fe.ZodUnknown,...Se(t)});var In=class extends ve{_parse(e){let r=this._getOrReturnCtx(e);return X(r,{code:G.invalid_type,expected:J.never,received:r.parsedType}),he}};In.create=t=>new In({typeName:fe.ZodNever,...Se(t)});var Ia=class extends ve{_parse(e){if(this._getType(e)!==J.undefined){let n=this._getOrReturnCtx(e);return X(n,{code:G.invalid_type,expected:J.void,received:n.parsedType}),he}return nr(e.data)}};Ia.create=t=>new Ia({typeName:fe.ZodVoid,...Se(t)});var Di=class t extends ve{_parse(e){let{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==J.array)return X(r,{code:G.invalid_type,expected:J.array,received:r.parsedType}),he;if(i.exactLength!==null){let a=r.data.length>i.exactLength.value,l=r.data.length<i.exactLength.value;(a||l)&&(X(r,{code:a?G.too_big:G.too_small,minimum:l?i.exactLength.value:void 0,maximum:a?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(X(r,{code:G.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(X(r,{code:G.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((a,l)=>i.type._parseAsync(new fn(r,a,r.path,l)))).then(a=>qt.mergeArray(n,a));let o=[...r.data].map((a,l)=>i.type._parseSync(new fn(r,a,r.path,l)));return qt.mergeArray(n,o)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:se.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:se.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:se.toString(r)}})}nonempty(e){return this.min(1,e)}};Di.create=(t,e)=>new Di({type:t,minLength:null,maxLength:null,exactLength:null,typeName:fe.ZodArray,...Se(e)});function Pa(t){if(t instanceof br){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=un.create(Pa(n))}return new br({...t._def,shape:()=>e})}else return t instanceof Di?new Di({...t._def,type:Pa(t.element)}):t instanceof un?un.create(Pa(t.unwrap())):t instanceof ei?ei.create(Pa(t.unwrap())):t instanceof Jn?Jn.create(t.items.map(e=>Pa(e))):t}var br=class t extends ve{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=Ce.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==J.object){let u=this._getOrReturnCtx(e);return X(u,{code:G.invalid_type,expected:J.object,received:u.parsedType}),he}let{status:n,ctx:i}=this._processInputParams(e),{shape:o,keys:a}=this._getCached(),l=[];if(!(this._def.catchall instanceof In&&this._def.unknownKeys==="strip"))for(let u in i.data)a.includes(u)||l.push(u);let p=[];for(let u of a){let d=o[u],h=i.data[u];p.push({key:{status:"valid",value:u},value:d._parse(new fn(i,h,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof In){let u=this._def.unknownKeys;if(u==="passthrough")for(let d of l)p.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(u==="strict")l.length>0&&(X(i,{code:G.unrecognized_keys,keys:l}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let u=this._def.catchall;for(let d of l){let h=i.data[d];p.push({key:{status:"valid",value:d},value:u._parse(new fn(i,h,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let u=[];for(let d of p){let h=await d.key,g=await d.value;u.push({key:h,value:g,alwaysSet:d.alwaysSet})}return u}).then(u=>qt.mergeObjectSync(n,u)):qt.mergeObjectSync(n,p)}get shape(){return this._def.shape()}strict(e){return se.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var i,o,a,l;let p=(a=(o=(i=this._def).errorMap)===null||o===void 0?void 0:o.call(i,r,n).message)!==null&&a!==void 0?a:n.defaultError;return r.code==="unrecognized_keys"?{message:(l=se.errToObj(e).message)!==null&&l!==void 0?l:p}:{message:p}}}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:fe.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};return Ce.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new t({...this._def,shape:()=>r})}omit(e){let r={};return Ce.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new t({...this._def,shape:()=>r})}deepPartial(){return Pa(this)}partial(e){let r={};return Ce.objectKeys(this.shape).forEach(n=>{let i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}),new t({...this._def,shape:()=>r})}required(e){let r={};return Ce.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let o=this.shape[n];for(;o instanceof un;)o=o._def.innerType;r[n]=o}}),new t({...this._def,shape:()=>r})}keyof(){return eD(Ce.objectKeys(this.shape))}};br.create=(t,e)=>new br({shape:()=>t,unknownKeys:"strip",catchall:In.create(),typeName:fe.ZodObject,...Se(e)});br.strictCreate=(t,e)=>new br({shape:()=>t,unknownKeys:"strict",catchall:In.create(),typeName:fe.ZodObject,...Se(e)});br.lazycreate=(t,e)=>new br({shape:t,unknownKeys:"strip",catchall:In.create(),typeName:fe.ZodObject,...Se(e)});var as=class extends ve{_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function i(o){for(let l of o)if(l.result.status==="valid")return l.result;for(let l of o)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;let a=o.map(l=>new Br(l.ctx.common.issues));return X(r,{code:G.invalid_union,unionErrors:a}),he}if(r.common.async)return Promise.all(n.map(async o=>{let a={...r,common:{...r.common,issues:[]},parent:null};return{result:await o._parseAsync({data:r.data,path:r.path,parent:a}),ctx:a}})).then(i);{let o,a=[];for(let p of n){let u={...r,common:{...r.common,issues:[]},parent:null},d=p._parseSync({data:r.data,path:r.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!o&&(o={result:d,ctx:u}),u.common.issues.length&&a.push(u.common.issues)}if(o)return r.common.issues.push(...o.ctx.common.issues),o.result;let l=a.map(p=>new Br(p));return X(r,{code:G.invalid_union,unionErrors:l}),he}}get options(){return this._def.options}};as.create=(t,e)=>new as({options:t,typeName:fe.ZodUnion,...Se(e)});var Mi=t=>t instanceof ls?Mi(t.schema):t instanceof Hr?Mi(t.innerType()):t instanceof ps?[t.value]:t instanceof us?t.options:t instanceof fs?Ce.objectValues(t.enum):t instanceof ds?Mi(t._def.innerType):t instanceof os?[void 0]:t instanceof ss?[null]:t instanceof un?[void 0,...Mi(t.unwrap())]:t instanceof ei?[null,...Mi(t.unwrap())]:t instanceof Al||t instanceof hs?Mi(t.unwrap()):t instanceof ms?Mi(t._def.innerType):[],Rm=class t extends ve{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==J.object)return X(r,{code:G.invalid_type,expected:J.object,received:r.parsedType}),he;let n=this.discriminator,i=r.data[n],o=this.optionsMap.get(i);return o?r.common.async?o._parseAsync({data:r.data,path:r.path,parent:r}):o._parseSync({data:r.data,path:r.path,parent:r}):(X(r,{code:G.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),he)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let i=new Map;for(let o of r){let a=Mi(o.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let l of a){if(i.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);i.set(l,o)}}return new t({typeName:fe.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...Se(n)})}};function qS(t,e){let r=mo(t),n=mo(e);if(t===e)return{valid:!0,data:t};if(r===J.object&&n===J.object){let i=Ce.objectKeys(e),o=Ce.objectKeys(t).filter(l=>i.indexOf(l)!==-1),a={...t,...e};for(let l of o){let p=qS(t[l],e[l]);if(!p.valid)return{valid:!1};a[l]=p.data}return{valid:!0,data:a}}else if(r===J.array&&n===J.array){if(t.length!==e.length)return{valid:!1};let i=[];for(let o=0;o<t.length;o++){let a=t[o],l=e[o],p=qS(a,l);if(!p.valid)return{valid:!1};i.push(p.data)}return{valid:!0,data:i}}else return r===J.date&&n===J.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var cs=class extends ve{_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=(o,a)=>{if($S(o)||$S(a))return he;let l=qS(o.value,a.value);return l.valid?((jS(o)||jS(a))&&r.dirty(),{status:r.value,value:l.data}):(X(n,{code:G.invalid_intersection_types}),he)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([o,a])=>i(o,a)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};cs.create=(t,e,r)=>new cs({left:t,right:e,typeName:fe.ZodIntersection,...Se(r)});var Jn=class t extends ve{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==J.array)return X(n,{code:G.invalid_type,expected:J.array,received:n.parsedType}),he;if(n.data.length<this._def.items.length)return X(n,{code:G.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),he;!this._def.rest&&n.data.length>this._def.items.length&&(X(n,{code:G.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let o=[...n.data].map((a,l)=>{let p=this._def.items[l]||this._def.rest;return p?p._parse(new fn(n,a,n.path,l)):null}).filter(a=>!!a);return n.common.async?Promise.all(o).then(a=>qt.mergeArray(r,a)):qt.mergeArray(r,o)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};Jn.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Jn({items:t,typeName:fe.ZodTuple,rest:null,...Se(e)})};var km=class t extends ve{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==J.object)return X(n,{code:G.invalid_type,expected:J.object,received:n.parsedType}),he;let i=[],o=this._def.keyType,a=this._def.valueType;for(let l in n.data)i.push({key:o._parse(new fn(n,l,n.path,l)),value:a._parse(new fn(n,n.data[l],n.path,l)),alwaysSet:l in n.data});return n.common.async?qt.mergeObjectAsync(r,i):qt.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof ve?new t({keyType:e,valueType:r,typeName:fe.ZodRecord,...Se(n)}):new t({keyType:ho.create(),valueType:e,typeName:fe.ZodRecord,...Se(r)})}},Fa=class extends ve{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==J.map)return X(n,{code:G.invalid_type,expected:J.map,received:n.parsedType}),he;let i=this._def.keyType,o=this._def.valueType,a=[...n.data.entries()].map(([l,p],u)=>({key:i._parse(new fn(n,l,n.path,[u,"key"])),value:o._parse(new fn(n,p,n.path,[u,"value"]))}));if(n.common.async){let l=new Map;return Promise.resolve().then(async()=>{for(let p of a){let u=await p.key,d=await p.value;if(u.status==="aborted"||d.status==="aborted")return he;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}})}else{let l=new Map;for(let p of a){let u=p.key,d=p.value;if(u.status==="aborted"||d.status==="aborted")return he;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(u.value,d.value)}return{status:r.value,value:l}}}};Fa.create=(t,e,r)=>new Fa({valueType:e,keyType:t,typeName:fe.ZodMap,...Se(r)});var Ca=class t extends ve{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==J.set)return X(n,{code:G.invalid_type,expected:J.set,received:n.parsedType}),he;let i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(X(n,{code:G.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(X(n,{code:G.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());let o=this._def.valueType;function a(p){let u=new Set;for(let d of p){if(d.status==="aborted")return he;d.status==="dirty"&&r.dirty(),u.add(d.value)}return{status:r.value,value:u}}let l=[...n.data.values()].map((p,u)=>o._parse(new fn(n,p,n.path,u)));return n.common.async?Promise.all(l).then(p=>a(p)):a(l)}min(e,r){return new t({...this._def,minSize:{value:e,message:se.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:se.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};Ca.create=(t,e)=>new Ca({valueType:t,minSize:null,maxSize:null,typeName:fe.ZodSet,...Se(e)});var Pm=class t extends ve{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==J.function)return X(r,{code:G.invalid_type,expected:J.function,received:r.parsedType}),he;function n(l,p){return _m({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,wm(),Aa].filter(u=>!!u),issueData:{code:G.invalid_arguments,argumentsError:p}})}function i(l,p){return _m({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,wm(),Aa].filter(u=>!!u),issueData:{code:G.invalid_return_type,returnTypeError:p}})}let o={errorMap:r.common.contextualErrorMap},a=r.data;if(this._def.returns instanceof yo){let l=this;return nr(async function(...p){let u=new Br([]),d=await l._def.args.parseAsync(p,o).catch(x=>{throw u.addIssue(n(p,x)),u}),h=await Reflect.apply(a,this,d);return await l._def.returns._def.type.parseAsync(h,o).catch(x=>{throw u.addIssue(i(h,x)),u})})}else{let l=this;return nr(function(...p){let u=l._def.args.safeParse(p,o);if(!u.success)throw new Br([n(p,u.error)]);let d=Reflect.apply(a,this,u.data),h=l._def.returns.safeParse(d,o);if(!h.success)throw new Br([i(d,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:Jn.create(e).rest(Ai.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||Jn.create([]).rest(Ai.create()),returns:r||Ai.create(),typeName:fe.ZodFunction,...Se(n)})}},ls=class extends ve{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};ls.create=(t,e)=>new ls({getter:t,typeName:fe.ZodLazy,...Se(e)});var ps=class extends ve{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return X(r,{received:r.data,code:G.invalid_literal,expected:this._def.value}),he}return{status:"valid",value:e.data}}get value(){return this._def.value}};ps.create=(t,e)=>new ps({value:t,typeName:fe.ZodLiteral,...Se(e)});function eD(t,e){return new us({values:t,typeName:fe.ZodEnum,...Se(e)})}var us=class t extends ve{constructor(){super(...arguments),Rl.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return X(r,{expected:Ce.joinValues(n),received:r.parsedType,code:G.invalid_type}),he}if(Em(this,Rl,"f")||ZA(this,Rl,new Set(this._def.values),"f"),!Em(this,Rl,"f").has(e.data)){let r=this._getOrReturnCtx(e),n=this._def.values;return X(r,{received:r.data,code:G.invalid_enum_value,options:n}),he}return nr(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}};Rl=new WeakMap;us.create=eD;var fs=class extends ve{constructor(){super(...arguments),kl.set(this,void 0)}_parse(e){let r=Ce.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==J.string&&n.parsedType!==J.number){let i=Ce.objectValues(r);return X(n,{expected:Ce.joinValues(i),received:n.parsedType,code:G.invalid_type}),he}if(Em(this,kl,"f")||ZA(this,kl,new Set(Ce.getValidEnumValues(this._def.values)),"f"),!Em(this,kl,"f").has(e.data)){let i=Ce.objectValues(r);return X(n,{received:n.data,code:G.invalid_enum_value,options:i}),he}return nr(e.data)}get enum(){return this._def.values}};kl=new WeakMap;fs.create=(t,e)=>new fs({values:t,typeName:fe.ZodNativeEnum,...Se(e)});var yo=class extends ve{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==J.promise&&r.common.async===!1)return X(r,{code:G.invalid_type,expected:J.promise,received:r.parsedType}),he;let n=r.parsedType===J.promise?r.data:Promise.resolve(r.data);return nr(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}};yo.create=(t,e)=>new yo({type:t,typeName:fe.ZodPromise,...Se(e)});var Hr=class extends ve{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===fe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,o={addIssue:a=>{X(n,a),a.fatal?r.abort():r.dirty()},get path(){return n.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){let a=i.transform(n.data,o);if(n.common.async)return Promise.resolve(a).then(async l=>{if(r.value==="aborted")return he;let p=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return p.status==="aborted"?he:p.status==="dirty"||r.value==="dirty"?Ma(p.value):p});{if(r.value==="aborted")return he;let l=this._def.schema._parseSync({data:a,path:n.path,parent:n});return l.status==="aborted"?he:l.status==="dirty"||r.value==="dirty"?Ma(l.value):l}}if(i.type==="refinement"){let a=l=>{let p=i.refinement(l,o);if(n.common.async)return Promise.resolve(p);if(p instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){let l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?he:(l.status==="dirty"&&r.dirty(),a(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?he:(l.status==="dirty"&&r.dirty(),a(l.value).then(()=>({status:r.value,value:l.value}))))}if(i.type==="transform")if(n.common.async===!1){let a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Pl(a))return a;let l=i.transform(a.value,o);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>Pl(a)?Promise.resolve(i.transform(a.value,o)).then(l=>({status:r.value,value:l})):a);Ce.assertNever(i)}};Hr.create=(t,e,r)=>new Hr({schema:t,typeName:fe.ZodEffects,effect:e,...Se(r)});Hr.createWithPreprocess=(t,e,r)=>new Hr({schema:e,effect:{type:"preprocess",transform:t},typeName:fe.ZodEffects,...Se(r)});var un=class extends ve{_parse(e){return this._getType(e)===J.undefined?nr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};un.create=(t,e)=>new un({innerType:t,typeName:fe.ZodOptional,...Se(e)});var ei=class extends ve{_parse(e){return this._getType(e)===J.null?nr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};ei.create=(t,e)=>new ei({innerType:t,typeName:fe.ZodNullable,...Se(e)});var ds=class extends ve{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===J.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};ds.create=(t,e)=>new ds({innerType:t,typeName:fe.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Se(e)});var ms=class extends ve{_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Ml(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Br(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Br(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};ms.create=(t,e)=>new ms({innerType:t,typeName:fe.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Se(e)});var Oa=class extends ve{_parse(e){if(this._getType(e)!==J.nan){let n=this._getOrReturnCtx(e);return X(n,{code:G.invalid_type,expected:J.nan,received:n.parsedType}),he}return{status:"valid",value:e.data}}};Oa.create=t=>new Oa({typeName:fe.ZodNaN,...Se(t)});var m8=Symbol("zod_brand"),Al=class extends ve{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},Dl=class t extends ve{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let o=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?he:o.status==="dirty"?(r.dirty(),Ma(o.value)):this._def.out._parseAsync({data:o.value,path:n.path,parent:n})})();{let i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?he:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:fe.ZodPipeline})}},hs=class extends ve{_parse(e){let r=this._def.innerType._parse(e),n=i=>(Pl(i)&&(i.value=Object.freeze(i.value)),i);return Ml(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}};hs.create=(t,e)=>new hs({innerType:t,typeName:fe.ZodReadonly,...Se(e)});function tD(t,e={},r){return t?go.create().superRefine((n,i)=>{var o,a;if(!t(n)){let l=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,p=(a=(o=l.fatal)!==null&&o!==void 0?o:r)!==null&&a!==void 0?a:!0,u=typeof l=="string"?{message:l}:l;i.addIssue({code:"custom",...u,fatal:p})}}):go.create()}var h8={object:br.lazycreate},fe;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(fe||(fe={}));var g8=(t,e={message:`Input not instance of ${t.name}`})=>tD(r=>r instanceof t,e),rD=ho.create,nD=ts.create,y8=Oa.create,x8=rs.create,iD=ns.create,T8=is.create,S8=Da.create,v8=os.create,b8=ss.create,w8=go.create,_8=Ai.create,E8=In.create,R8=Ia.create,k8=Di.create,P8=br.create,M8=br.strictCreate,A8=as.create,D8=Rm.create,I8=cs.create,F8=Jn.create,C8=km.create,O8=Fa.create,N8=Ca.create,L8=Pm.create,U8=ls.create,V8=ps.create,B8=us.create,H8=fs.create,W8=yo.create,KA=Hr.create,$8=un.create,j8=ei.create,q8=Hr.createWithPreprocess,z8=Dl.create,G8=()=>rD().optional(),K8=()=>nD().optional(),Q8=()=>iD().optional(),Z8={string:t=>ho.create({...t,coerce:!0}),number:t=>ts.create({...t,coerce:!0}),boolean:t=>ns.create({...t,coerce:!0}),bigint:t=>rs.create({...t,coerce:!0}),date:t=>is.create({...t,coerce:!0})},Y8=he,$e=Object.freeze({__proto__:null,defaultErrorMap:Aa,setErrorMap:Y5,getErrorMap:wm,makeIssue:_m,EMPTY_PATH:X5,addIssueToContext:X,ParseStatus:qt,INVALID:he,DIRTY:Ma,OK:nr,isAborted:$S,isDirty:jS,isValid:Pl,isAsync:Ml,get util(){return Ce},get objectUtil(){return WS},ZodParsedType:J,getParsedType:mo,ZodType:ve,datetimeRegex:JA,ZodString:ho,ZodNumber:ts,ZodBigInt:rs,ZodBoolean:ns,ZodDate:is,ZodSymbol:Da,ZodUndefined:os,ZodNull:ss,ZodAny:go,ZodUnknown:Ai,ZodNever:In,ZodVoid:Ia,ZodArray:Di,ZodObject:br,ZodUnion:as,ZodDiscriminatedUnion:Rm,ZodIntersection:cs,ZodTuple:Jn,ZodRecord:km,ZodMap:Fa,ZodSet:Ca,ZodFunction:Pm,ZodLazy:ls,ZodLiteral:ps,ZodEnum:us,ZodNativeEnum:fs,ZodPromise:yo,ZodEffects:Hr,ZodTransformer:Hr,ZodOptional:un,ZodNullable:ei,ZodDefault:ds,ZodCatch:ms,ZodNaN:Oa,BRAND:m8,ZodBranded:Al,ZodPipeline:Dl,ZodReadonly:hs,custom:tD,Schema:ve,ZodSchema:ve,late:h8,get ZodFirstPartyTypeKind(){return fe},coerce:Z8,any:w8,array:k8,bigint:x8,boolean:iD,date:T8,discriminatedUnion:D8,effect:KA,enum:B8,function:L8,instanceof:g8,intersection:I8,lazy:U8,literal:V8,map:O8,nan:y8,nativeEnum:H8,never:E8,null:b8,nullable:j8,number:nD,object:P8,oboolean:Q8,onumber:K8,optional:$8,ostring:G8,pipeline:z8,preprocess:q8,promise:W8,record:C8,set:N8,strictObject:M8,string:rD,symbol:S8,transformer:KA,tuple:F8,undefined:v8,union:A8,unknown:_8,void:R8,NEVER:Y8,ZodIssueCode:G,quotelessJson:Z5,ZodError:Br});function oD(t){let e=t.operands.map(zS).join(" ");return`(#${t.operator} ${e})`}function zS(t){return t.type==="capture"?`@${t.name}`:t.value}function sD(t,e){return e.errors.filter(r=>!(r.code==="invalid_type"&&r.path.length===2&&(r.path[1]==="name"||r.path[1]==="value"))).map(r=>X8(t,r))}function X8(t,e){if(e.path.length===0)return e.code==="too_small"?"Too few arguments":e.code==="too_big"?"Too many arguments":e.message;let r=e.message;e.code==="invalid_literal"&&e.path[1]==="type"&&(r=e.expected==="capture"?"Capture names must be prefixed with @":"Expected string, but received capture");let n=e.path[0],i=zS(t[n]);return`Error on argument ${n} (\`${i}\`): ${r}`}var ir=class{allowMissingNode(){return!1}createPredicate(e){let r=this.schema.safeParse(e);return r.success?{success:!0,predicate:n=>{try{let i=this.constructAcceptArgs(r.data,n);return this.run(...i)}catch(i){if(i instanceof Mm&&this.allowMissingNode())return!0;throw i}}}:{success:!1,errors:sD(e,r.error)}}constructAcceptArgs(e,r){return e.map(n=>{if(n.type==="capture"){let i=r.captures.find(o=>o.name===n.name);if(i==null)throw new Mm(n.name);return i}else return n.value})}},Mm=class extends Error{constructor(e){super(`Could not find capture ${e}`)}};var GS=$e.object({type:$e.literal("string"),value:$e.string()}),we={node:$e.object({type:$e.literal("capture"),name:$e.string()}),string:GS,integer:GS.transform((t,e)=>{let r=parseInt(t.value);return isNaN(r)?(e.addIssue({code:$e.ZodIssueCode.custom,message:"Expected an integer"}),$e.NEVER):{type:"integer",value:r}}),boolean:GS.transform((t,e)=>t.value==="true"?{type:"boolean",value:!0}:t.value==="false"?{type:"boolean",value:!1}:(e.addIssue({code:$e.ZodIssueCode.custom,message:"Expected true or false"}),$e.NEVER))};var KS=class extends ir{constructor(){super(...arguments);this.name="not-type?";this.schema=$e.tuple([we.node,we.string]).rest(we.string)}run({node:r},...n){return!n.includes(r.type)}},QS=class extends ir{constructor(){super(...arguments);this.name="not-parent-type?";this.schema=$e.tuple([we.node,we.string]).rest(we.string)}run({node:r},...n){return r.parent==null||!n.includes(r.parent.type)}},ZS=class extends ir{constructor(){super(...arguments);this.name="is-nth-child?";this.schema=$e.tuple([we.node,we.integer])}run({node:r},n){return r.parent?.children.findIndex(i=>i.id===r.id)===n}},YS=class extends ir{constructor(){super(...arguments);this.name="has-multiple-children-of-type?";this.schema=$e.tuple([we.node,we.string])}run({node:r},n){return r.children.filter(o=>o.type===n).length>1}},XS=class extends ir{constructor(){super(...arguments);this.name="child-range!";this.schema=$e.union([$e.tuple([we.node,we.integer]),$e.tuple([we.node,we.integer,we.integer]),$e.tuple([we.node,we.integer,we.integer,we.boolean]),$e.tuple([we.node,we.integer,we.integer,we.boolean,we.boolean])])}run(r,n,i,o,a){let{node:{children:l}}=r;n=n<0?l.length+n:n,i=i??-1,i=i<0?l.length+i:i;let p=l[n],u=l[i];return r.range=pn(o?p.endPosition:p.startPosition,a?u.startPosition:u.endPosition),!0}},JS=class extends ir{constructor(){super(...arguments);this.name="character-range!";this.schema=$e.union([$e.tuple([we.node,we.integer]),$e.tuple([we.node,we.integer,we.integer])])}run(r,n,i){return r.range=new W(r.range.start.translate(void 0,n),r.range.end.translate(void 0,i??0)),!0}},ev=class extends ir{constructor(){super(...arguments);this.name="shrink-to-match!";this.schema=$e.tuple([we.node,we.string])}run(r,n){let{document:i,range:o}=r,l=i.getText(o).match(new RegExp(n,"ds"));if(l?.index==null)throw Error(`No match for pattern '${n}'`);let[p,u]=l.indices?.groups?.keep??l.indices[0],d=i.offsetAt(o.start);return r.range=new W(i.positionAt(d+p),i.positionAt(d+u)),!0}},tv=class extends ir{constructor(){super(...arguments);this.name="trim-end!";this.schema=$e.tuple([we.node])}run(r){let{document:n,range:i}=r,o=n.getText(i),a=o.length-o.trimEnd().length;return a>0&&(r.range=new W(i.start,sk(n,i.end,-a))),!0}},rv=class extends ir{constructor(){super(...arguments);this.name="allow-multiple!";this.schema=$e.tuple([we.node])}allowMissingNode(){return!0}run(r){return r.allowMultiple=!0,!0}},nv=class extends ir{constructor(){super(...arguments);this.name="log!";this.schema=$e.tuple([we.node])}run(r){return console.log(`#log!: ${r.name}@${r.range}`),!0}},iv=class extends ir{constructor(){super(...arguments);this.name="insertion-delimiter!";this.schema=$e.tuple([we.node,we.string])}run(r,n){return r.insertionDelimiter=n,!0}},ov=class extends ir{constructor(){super(...arguments);this.name="single-or-multi-line-delimiter!";this.schema=$e.tuple([we.node,we.node,we.string,we.string])}run(r,n,i,o){return r.insertionDelimiter=n.range.isSingleLine?i:o,!0}},aD=[new nv,new KS,new tv,new QS,new ZS,new XS,new JS,new ev,new rv,new iv,new ov,new YS];function cD(t){let e=[],r=[];return t.forEach((n,i)=>{let o=[];n.forEach((a,l)=>{let p=aD.find(({name:d})=>d===a.operator);if(p==null){e.push({patternIdx:i,predicateIdx:l,error:`Unknown predicate operator "${a.operator}"`});return}let u=p.createPredicate(a.operands);if(!u.success){e.push(...u.errors.map(d=>({patternIdx:i,predicateIdx:l,error:d})));return}o.push(u.predicate)}),r.push(o)}),{errors:e,predicates:r}}function lD(t){return t.map(e=>e.name.endsWith(".startOf")?{...e,name:e.name.replace(/\.startOf$/,""),range:e.range.start.toEmptyRange()}:e.name.endsWith(".endOf")?{...e,name:e.name.replace(/\.endOf$/,""),range:e.range.end.toEmptyRange()}:e)}var Il=class t{constructor(e,r,n){this.treeSitter=e;this.query=r;this.patternPredicates=n}static create(e,r,n){let{errors:i,predicates:o}=cD(n.predicates);if(i.length>0){for(let a of i){let l=[`language ${e}`,`pattern ${a.patternIdx}`,`predicate \`${oD(n.predicates[a.patternIdx][a.predicateIdx])}\``].join(", ");it(D().messages,"TreeSitterQuery.parsePredicates",`Error parsing predicate for ${l}: ${a.error}`)}if(D().runMode==="test")throw new Error("Invalid predicates")}return new t(r,n,o)}matches(e,r,n){return this.query.matches(this.treeSitter.getTree(e).rootNode,{startPosition:r==null?void 0:uD(r),endPosition:n==null?void 0:uD(n)}).map(({pattern:i,captures:o})=>({patternIdx:i,captures:o.map(({name:a,node:l})=>({name:a,node:l,document:e,range:VA(l),insertionDelimiter:void 0,allowMultiple:!1,hasError:()=>zA(l)}))})).filter(i=>this.patternPredicates[i.patternIdx].every(o=>o(i))).map(i=>{let o=Object.entries(lT(i.captures,({name:a})=>pD(a))).map(([a,l])=>{if(l=lD(l),!qA(l,D().messages)&&D().runMode==="test")throw new Error("Invalid captures");return{name:a,range:l.map(({range:u})=>u).reduce((u,d)=>d.union(u)),allowMultiple:l.some(u=>u.allowMultiple),insertionDelimiter:l.find(u=>u.insertionDelimiter!=null)?.insertionDelimiter,hasError:()=>l.some(u=>u.hasError())}});return{...i,captures:o}})}get captureNames(){return vi(this.query.captureNames.map(pD))}};function pD(t){return t.replace(/(\.(start|end))?(\.(startOf|endOf))?$/,"")}function uD(t){return{row:t.line,column:t.character}}var dD="_",J8=[dD,...qo],e7=["prefix","leading","trailing"],t7=["startOf","endOf"],r7=["domain","removal","interior","iteration","iteration.domain"],fD=["start","end","start.startOf","start.endOf","end.startOf","end.endOf"],gs=new Set;for(let t of J8){if(t!==dD){gs.add(t);for(let e of fD)gs.add(`${t}.${e}`)}for(let e of e7){gs.add(`${t}.${e}`);for(let r of t7)gs.add(`${t}.${e}.${r}`)}for(let e of r7){gs.add(`${t}.${e}`);for(let r of fD)gs.add(`${t}.${e}.${r}`)}}var n7=new RegExp("^(?!;;).*@([\\w.]*)","gm");function mD(t,e){let r=e.matchAll(n7),n=[];for(let o of r){let a=o[1];if(!(a.length>1&&!a.includes(".")&&a.startsWith("_"))&&!gs.has(a)){let l=o.input.slice(0,o.index).split(`
`).length;n.push(`${t}(${l}) invalid capture '@${a}'.`)}}if(n.length===0)return;let i=n.join(`
`);if(it(D().messages,"validateQueryCaptures.invalidCaptureName",i),D().runMode==="test")throw new Error(i)}var Am=class t{constructor(e){this.query=e}static async create(e,r,n,i){let o=await i7(e,r,`${i}.scm`);if(o==null||!await n.loadLanguage(i))return;let a=n.getLanguage(i).query(o),l=Il.create(i,n,a);return new t(l)}getScopeHandler(e){if(this.query.captureNames.includes(e.type))return new sm(this.query,e)}getCaptures(e,r){return this.query.matches(e).map(n=>n.captures.find(({name:i})=>i===r)).filter(n=>n!=null)}};async function i7(t,e,r){let n={[r]:null},i=t.runMode!=="production";for(;Object.values(n).some(o=>o==null);)for(let[o,a]of Object.entries(n)){if(a!=null)continue;let l=await e.readQuery(o);if(l==null){if(o===r)return;if(it(t.messages,"LanguageDefinition.readQueryFileAndImports.queryNotFound",`Could not find imported query file ${o}`),t.runMode==="test")throw new Error("Invalid import statement");l=""}i&&mD(o,l),n[o]=l,nn(l,/^[^\S\r\n]*;;?[^\S\r\n]*(?:import|include)[^\S\r\n]+['"]?([\w|/\\.]+)['"]?[^\S\r\n]*$/gm,p=>{let u=p[1];i&&o7(t,o,u,p[0]),n[u]=n[u]??null})}return Object.values(n).join(`
`)}function o7(t,e,r,n){let i=!1;/[/\\]/g.test(r)&&(it(t.messages,"LanguageDefinition.readQueryFileAndImports.invalidImport",`Invalid import statement in ${e}: "${n}". Relative import paths not supported`),i=!0);let o=`;; import ${r}`;if(n!==o&&(it(t.messages,"LanguageDefinition.readQueryFileAndImports.malformedImport",`Malformed import statement in ${e}: "${n}". Import statements must be of the form "${o}"`),i=!0),i&&t.runMode==="test")throw new Error("Invalid import statement")}var hD=Symbol("LANGUAGE_UNDEFINED"),Dm=class t{constructor(e,r,n){this.ide=e;this.treeSitter=r;this.treeSitterQueryProvider=n;this.notifier=new Wt;this.languageDefinitions=new Map;this.disposables=[];this.onDidChangeDefinition=this.notifier.registerListener;e.onDidOpenTextDocument(i=>{this.loadLanguage(i.languageId)}),e.onDidChangeVisibleTextEditors(i=>{i.forEach(({document:o})=>this.loadLanguage(o.languageId))}),this.disposables.push(n.onChanges(()=>this.reloadLanguageDefinitions()))}static async create(e,r,n){let i=new t(e,r,n);return await i.loadAllLanguages(),i}async loadAllLanguages(){let e=this.ide.visibleTextEditors.map(({document:r})=>r.languageId);try{await Promise.all(e.map(r=>this.loadLanguage(r)))}catch(r){if(it(this.ide.messages,"Failed to load language definitions",Pn(r)),this.ide.runMode==="test")throw r}}async loadLanguage(e){if(this.languageDefinitions.has(e))return;let r=await Am.create(this.ide,this.treeSitterQueryProvider,this.treeSitter,e)??hD;this.languageDefinitions.set(e,r)}async reloadLanguageDefinitions(){this.languageDefinitions.clear(),await this.loadAllLanguages(),this.notifier.notifyListeners()}get(e){let r=this.languageDefinitions.get(e);if(r==null)throw new Error("Expected language definition entry is missing for languageId "+e);return r===hD?void 0:r}getNodeAtLocation(e,r){return this.treeSitter.getNodeAtLocation(e,r)}dispose(){this.disposables.forEach(e=>e.dispose())}};var Im=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}get nestedStages(){return this.nestedStages_==null&&(this.nestedStages_=this.modifier.modifiers.map(this.modifierStageFactory.create)),this.nestedStages_}run(e){for(let r of this.nestedStages)try{return r.run(e)}catch{continue}throw new Error("No modifier could be applied")}};var Na=class{constructor(e,r){this.modifierStageFactory=e;this.nestedModifier=r;this.suppressErrors=!1}run(e){if(this.shouldModify(e))try{return this.nestedStage.run(e).map(r=>r.withThatTarget(e))}catch(r){if(!this.suppressErrors)throw r}return[e]}get nestedStage(){return this.nestedStage_==null&&(this.nestedStage_=this.modifierStageFactory.create(this.nestedModifier)),this.nestedStage_}},La=class extends Na{constructor(e,r){super(e,r.modifier)}shouldModify(e){return!e.hasExplicitScopeType}},Fl=class extends Na{constructor(r,n,i){super(r,n);this.modificationCondition=i}shouldModify(r){return this.modificationCondition(r)}},Fm=class extends Na{shouldModify(e){return!e.hasExplicitScopeType&&!e.isImplicit}},Ua=class extends Na{constructor(r){super(r,{type:"containingScope",scopeType:{type:"token"}});this.suppressErrors=!0}shouldModify(r){return!r.hasExplicitScopeType&&!r.hasExplicitRange&&r.contentRange.isEmpty}};function gD(t,e){return Object.getPrototypeOf(t).constructor===Object.getPrototypeOf(e).constructor}function Va(t,e,r,n,i){if(n&&i&&gD(e,r)){let o=e.maybeCreateRichRangeTarget(t,r);if(o!=null)return o}return e.isLine&&r.isLine?new Vr({editor:e.editor,isReversed:t,contentRange:ga(e,r,n,i)}):new Pt({editor:e.editor,isReversed:t,hasExplicitRange:!0,contentRange:lo(e,r,n,i),isToken:n&&i&&e.isToken&&r.isToken})}function Cm(t,e,r){if(e===r)return e.getTargets(t);let n=e.getTargets(t),i=r.getTargets(t);if(n.length!==1||i.length!==1)throw Error("Scope range targets must be single-target");let[o]=n,[a]=i,l=a.contentRange.start.isAfterOrEqual(o.contentRange.start),[p,u]=l?[o,a]:[a,o];return[Va(t,p,u,!0,!0)]}function Om(t,e,r,n){let i=Array.from(t.generateScopes(e,r,"forward",{containment:"required",allowAdjacentScopes:!0,skipAncestorScopes:!0}));switch(i.length){case 0:return;case 1:return i[0];case 2:{let[o,a]=i;return n==="forward"?a:n==="backward"||(t.isPreferredOver?.(o,a)??!1)?o:a}default:throw new Error("Expected no more than 2 scope candidates")}}function Nm(t,e,r=0){let{isReversed:n,editor:i,contentRange:{start:o,end:a}}=t;if(a.isEqual(o)){let u=Om(e,i,o);return u==null||(r>0&&(u=sv(e,i,u.domain.end,"forward",r,!0)),u==null)?void 0:u.getTargets(n)}let l=sv(e,i,o,"forward",r);if(l==null)return;if(l.domain.contains(a))return l.getTargets(n);let p=sv(e,i,a,"backward",r);if(p!=null)return Cm(n,l,p)}function sv(t,e,r,n,i,o=!1){let a=0;for(let l of t.generateScopes(e,r,n,{containment:"required",allowAdjacentScopes:o})){if(a===i)return l;a+=1}}var Ba=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let{scopeType:r,ancestorIndex:n=0}=this.modifier,i=this.scopeHandlerFactory.create(r,e.editor.document.languageId);if(i==null)return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e);let o=Nm(e,i,n);if(o==null){if(r.type==="collectionItem")return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e);throw new Rt(this.modifier.scopeType.type)}return o}};var Lm=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let{scopeType:r}=this.modifier,{editor:n,isReversed:i}=e,o=this.scopeHandlerFactory.create(r,n.document.languageId);if(o==null)return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e);let a;if(e.hasExplicitRange&&(a=yD(o,n,e.contentRange),a.length===1&&a[0].domain.contains(e.contentRange)&&(a=void 0)),a==null)try{a=this.getDefaultIterationRange(o,this.scopeHandlerFactory,e).flatMap(l=>yD(o,n,l))}catch(l){if(!(l instanceof Rt))throw l;a=[]}if(a.length===0){if(r.type==="collectionItem")return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e);throw new Rt(r.type)}return a.flatMap(l=>l.getTargets(i))}getDefaultIterationRange(e,r,n){let i=r.create(e.iterationScopeType,n.editor.document.languageId);if(i==null)throw Error("Could not find iteration scope handler");let o=Nm(n,i);if(o==null)throw new Rt(`iteration scope for ${e.scopeType.type}`);return o.map(a=>a.contentRange)}};function yD(t,e,{start:r,end:n}){return Array.from(t.generateScopes(e,r,"forward",{distalPosition:n,skipAncestorScopes:!0,allowAdjacentScopes:t.includeAdjacentInEvery}))}var Um=class{constructor(e){this.modifier=e}run(e){return e.contentText.trim()!==""?[e]:[]}},Vm=class{constructor(e){this.modifier=e}run(e){return e.contentText.trim()===""?[e]:[]}};var Bm=class{run(){return Dd(D()).map(e=>new Pd({editor:e.editor,isReversed:e.selection.isReversed,contentRange:e.selection}))}};var Hm=class{constructor(e,r){this.modifierStageFactory=e;this.markStageFactory=r}run(e,{actionFinalStages:r=[],noAutomaticTokenExpansion:n=!1}={}){return new av(this.modifierStageFactory,this.markStageFactory,e,{actionFinalStages:r,noAutomaticTokenExpansion:n}).run()}},av=class{constructor(e,r,n,i){this.modifierStageFactory=e;this.markStageFactory=r;this.target=n;this.opts=i}run(){return s7(this.processTarget(this.target))}processTarget(e){switch(e.type){case"list":return e.elements.flatMap(r=>this.processTarget(r));case"range":return this.processRangeTarget(e);case"primitive":case"implicit":return this.processPrimitiveTarget(e)}}processRangeTarget(e){let r=this.processPrimitiveTarget(e.anchor),n=this.processPrimitiveTarget(e.active);return St(r,n).flatMap(([i,o])=>{if(i==null||o==null)throw new Error("AnchorTargets and activeTargets lengths don't match");switch(e.rangeType){case"continuous":return this.processContinuousRangeTarget(i,o,e);case"vertical":return a7(i,o,e.excludeAnchor,e.excludeActive)}})}processContinuousRangeTarget(e,r,{excludeAnchor:n,excludeActive:i,exclusionScopeType:o}){if(o==null)return[xo(e,r,n,i)];let a=pv(e,r);return[xo(n?xD(this.modifierStageFactory,e,o,a?"backward":"forward"):e,i?xD(this.modifierStageFactory,r,o,a?"forward":"backward"):r,!1,!1)]}processPrimitiveTarget(e){let r,n;e.type==="implicit"?(r=new Bm,n=[]):(r=this.markStageFactory.create(e.mark),n=cv(this.modifierStageFactory,e.modifiers));let i=r.run(),o=[...n,...this.opts.actionFinalStages,...this.opts.noAutomaticTokenExpansion?[]:[new Ua(this.modifierStageFactory)]];return lv(o,i)}};function cv(t,e){return e.map(t.create).reverse()}function lv(t,e){return t.forEach(r=>{e=e.flatMap(n=>r.run(n))}),e}function xD(t,e,r,n){return t.create({type:"relativeScope",scopeType:r,direction:n,length:1,offset:1}).run(e)[0]}function pv(t,e){return t.contentRange.start.isAfter(e.contentRange.start)?!0:t.contentRange.start.isBefore(e.contentRange.start)?!1:t.contentRange.end.isAfter(e.contentRange.end)}function s7(t){return fP(t,(e,r)=>e.isEqual(r),e=>e.contentRange.concise())}function TD(t,e){if(t.editor!==e.editor)throw new Error("Cannot form range between targets in different editors")}function xo(t,e,r=!1,n=!1){TD(t,e);let i=pv(t,e);return Va(i,i?e:t,i?t:e,!(i?n:r),!(i?r:n))}function a7(t,e,r,n){TD(t,e);let i=pv(t,e),o=i?-1:1,l=(i?t.contentRange.start:t.contentRange.end).line+(r?o:0),u=(i?e.contentRange.start:e.contentRange.end).line-(n?o:0),d=[];for(let h=l;;h+=o){let g=new W(h,t.contentRange.start.character,h,t.contentRange.end.character);if(d.push(new He({editor:t.editor,isReversed:t.isReversed,contentRange:g,insertionDelimiter:t.insertionDelimiter})),h===u)return d}}var Wm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=this.modifier.modifiers??[{type:"containingScope",scopeType:{type:"oneOf",scopeTypes:[{type:"line"},{type:"surroundingPairInterior",delimiter:"any",requireSingleLine:!0}]}}],n=cv(this.modifierStageFactory,r);return lv(n,[e]).map(o=>{let a=this.modifier.type==="extendThroughStartOf";return new Md({editor:e.editor,isReversed:a,inputTarget:e,modifiedTarget:o,isHead:a})})}};var Ii=class extends Error{constructor(){super("Scope index out of range"),this.name="OutOfRangeError"}};function SD(t,e,r){return uv(t,e,r),t.slice(e,r+1)}function uv(t,e,r){if(e<0||r>=t.length)throw new Ii}var Ha=class{constructor(e,r,n){this.modifierStageFactory=e;this.storedTargets=r;this.modifier=n}run(e){let r=new Ua(this.modifierStageFactory).run(e)[0];switch(this.modifier.type){case"everyScope":return this.handleEveryScope(r);case"ordinalScope":return this.handleOrdinalScope(r,this.modifier);case"relativeScope":return this.handleRelativeScope(r,this.modifier);default:throw Error(`${this.modifier.type} instance scope not supported`)}}handleEveryScope(e){return Array.from(Zd(this.getEveryRanges(e),([r,n])=>this.getTargetIterable(e,r,n,"forward")))}handleOrdinalScope(e,{start:r,length:n}){return this.getEveryRanges(e).flatMap(([i,o])=>vD(this.getTargetIterable(e,i,o,r>=0?"forward":"backward"),r>=0?r:-(n+r),n))}handleRelativeScope(e,{direction:r,offset:n,length:i}){return(this.storedTargets.get("instanceReference")??[e]).flatMap(a=>{let{editor:l}=a,p=r==="forward"?new W(n===0?a.contentRange.start:a.contentRange.end,l.document.range.end):new W(l.document.range.start,n===0?a.contentRange.end:a.contentRange.start);return vD(this.getTargetIterable(e,l,p,r),n===0?0:n-1,i)})}getEveryRanges({editor:e}){return this.storedTargets.get("instanceReference")?.map(({editor:r,contentRange:n})=>[r,n])??[[e,e.document.range]]}getTargetIterable(e,r,n,i){let o=Lt(ln(new RegExp(Nr(e.contentText),"g"),r,n,i),l=>new He({contentRange:l,editor:r,isReversed:!1,isToken:!1})),a=c7(e);if(a!=null){let l=this.modifierStageFactory.create({type:"containingScope",scopeType:a});return aA(Lt(o,p=>{try{let u=l.run(p);return u.length===1&&u[0].contentRange.isRangeEqual(p.contentRange)?u[0]:null}catch{return null}}),p=>p!=null)}return o}};function c7(t){return t.isLine?{type:"line"}:t.isToken?{type:"token"}:t.isWord?{type:"word"}:null}function vD(t,e,r){Array.from(bl(e,t));let n=Array.from(bl(r,t));if(n.length<r)throw new Ii;return n}var $m=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r;this.containingSurroundingPairIfNoInteriorStage=l7(this.modifierStageFactory)}run(e){return this.containingSurroundingPairIfNoInteriorStage.run(e).flatMap(r=>r.getInterior())}},jm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r;this.containingSurroundingPairIfNoBoundaryStage=fv(this.modifierStageFactory)}run(e){return this.containingSurroundingPairIfNoBoundaryStage.run(e).flatMap(r=>r.getBoundary())}};function l7(t){return new Fl(t,{type:"containingScope",scopeType:{type:"surroundingPair",delimiter:"any"}},e=>e.getInterior()==null)}function fv(t){return new Fl(t,{type:"containingScope",scopeType:{type:"surroundingPair",delimiter:"any"}},e=>e.getBoundary()==null)}function bD(...t){return e=>{let r=e;for(let n of t)if(r=n(r),r==null)return null;return r}}function wD(t,...e){return r=>{let n=r,i=[],o=[...e].reverse();for(let a of o){if(n==null||(n=a(n),n==null))return null;i.push(n),n=n.parent??null}return i.reverse()[t]}}var dv=t=>new ce(t.row,t.column),_D=(...t)=>{let e=["(","{","[","<"],r=[")","}","]",">"],n=e.concat(r),i=(a,l)=>a!=null&&l.includes(a.type),o=a=>a!=null&&!i(a,n);return(a,l)=>{let p,{start:u,end:d}=l;if(i(a.parent,t))return i(a,e)?p=a.nextNamedSibling:i(a,r)?p=a.previousNamedSibling:a.type===","?p=d.isBeforeOrEqual(dv(a.startPosition))?a.previousNamedSibling:a.nextNamedSibling:p=a,o(p)?p:null;if(i(a,t)){let h=[...a.children],g=h.find(({startPosition:_})=>dv(_).isAfterOrEqual(d))??null;if(o(g))return g;h.reverse();let x=h.find(({endPosition:_})=>dv(_).isBeforeOrEqual(u))??null;if(o(x))return x}return null}};function Oe(...t){let e=p7(t);return r=>{for(let n of e){let i=u7(r,n);if(i!=null)return i}return null}}function p7(t){return t.map(e=>e.split(".").map(r=>new mv(r)))}function u7(t,e){let r=f7(t,e);!r&&e.length>1&&(r=d7(t,e));let n=null,i;return r!=null&&([n,i]=r),n!=null&&i!=null&&i.fields!=null&&i.fields.forEach(o=>{n=(o.isIndex?n?.namedChild(o.value):n?.childForFieldName(o.value))??null}),n}function f7(t,e){let r=null,n=t;for(let i=e.length-1;i>-1;--i){let o=e[i];if(n==null||!o.typeEquals(n)){if(o.isOptional)continue;return null}(!r||!r[1].isImportant)&&(r=[n,o]),n=n.parent}return r}function d7(t,e){let r=null,n=t;for(let i=0;i<e.length;++i){let o=e[i];if(n==null||!o.typeEquals(n)){if(o.isOptional)continue;return null}if((!r||o.isImportant)&&(r=[n,o]),i+1<e.length){let a=n.namedChildren.filter(l=>e[i+1].typeEquals(l));n=a.length===1?a[0]:null}}return r}var mv=class{constructor(e){this.anyType=!1;this.notType=!1;this.type=e.match(/^[\w*~]+/)[0],this.type==="*"?this.anyType=!0:this.type.startsWith("~")&&(this.type=this.type.slice(1),this.notType=!0),this.isImportant=e.indexOf("!")>-1,this.isOptional=e.indexOf("?")>-1,this.fields=[...e.matchAll(/(?<=\[).+?(?=\])/g)].map(r=>r[0]).map(r=>/\d+/.test(r)?{isIndex:!0,value:Number(r)}:{isIndex:!1,value:r})}typeEquals(e){return this.anyType?!0:this.notType?this.type!==e.type:this.type===e.type}};function Me(t,e=Yn){return function(r,n){let i=t(n,r.selection);return i!=null?[{node:i,selection:e(r.editor,i)}]:null}}function qm(t,e=Yn){let r=bD(...t);return function(n,i){let o=r(i);return o==null?null:[{node:o,selection:e(n.editor,o)}]}}function Wa(t,e=0,r=Yn){return Me(wD(e,...t),r)}function wt(...t){return Me(Oe(...t))}function To(...t){return Me(_D(...t),HA())}function $a(...t){return Me(Oe(...t),WA)}function Fn(t,e=[]){return Me(Oe(...t),$A(...e))}function So(t,e=[]){return Me(Oe(...t),jA(...e))}function at(...t){return(e,r)=>{for(let n of t){let i=n(e,r);if(i!=null)return i}return null}}function ED(t){return(e,r)=>{throw new Error(`Node type '${t}' not supported`)}}function dn(t){return Object.freeze(Object.fromEntries(wi(t).map(e=>{let r=t[e];return Array.isArray(r)?[e,wt(...r)]:typeof r=="string"?[e,wt(r)]:[e,r]})))}function RD(t,e){let r=t.walk();r.gotoFirstChild();let n=[],i=!0;for(;i;)r.currentFieldName===e&&n.push(r.currentNode),i=r.gotoNextSibling();return n}function m7(t,e){return gv(t,r=>Math.floor(r/2)*2+e)}function zm(t){return m7(Oe("map_lit"),t)}function gv(t,e){return r=>{let n=r.parent;if(n==null||t(n)==null)return null;let i=Cl(n),o=i.findIndex(({id:l})=>l===r.id);if(o===-1)return null;let a=e(o);return a===-1?null:i[a]}}function h7(){return gv(t=>t,t=>t)}var Cl=t=>RD(t,"value"),hv="~quoting_lit.list_lit!",PD=Oe(hv);function yv(...t){return e=>{let r=PD(e);if(r==null)return null;let n=Cl(r)[0];return t.includes(n?.text)?r:null}}function g7(...t){return Me(yv(...t))}var MD=yv("defn","defmacro"),kD=qm([MD,t=>Cl(t)[1]]),AD=yv("if","if-let","when","when-let"),y7=Me(AD),x7={collectionKey:Me(zm(0)),collectionItem:at(Me(zm(0),El(t=>t.type==="{"||t.type==="}",", ",Ht,zm(1))),Me(h7())),value:Me(zm(1)),argumentOrParameter:Me(gv(Oe(hv),t=>t!==0?t:-1)),functionCall:hv,functionCallee:qm([PD,t=>Cl(t)[0]]),namedFunction:Me(MD),functionName:kD,name:kD,anonymousFunction:at(g7("fn"),wt("anon_fn_lit")),ifStatement:y7,condition:qm([AD,t=>Cl(t)[1]])},DD=dn(x7);var ID=["command","displayed_equation","inline_formula","math_set","block_comment","package_include","class_include","latex_include","biblatex_include","bibtex_include","graphics_include","svg_include","inkscape_include","verbatim_include","import_include","caption","citation","label_definition","label_reference","label_reference_range","label_number","new_command_definition","old_command_definition","let_command_definition","environment_definition","glossary_entry_definition","glossary_entry_reference","acronym_definition","acronym_reference","theorem_definition","color_definition","color_set_definition","color_reference","tikz_library_import"],T7=["curly_group","curly_group_text","curly_group_text_list","curly_group_path","curly_group_path_list","curly_group_command_name","curly_group_key_value","curly_group_glob_pattern","curly_group_impl","brack_group","brack_group_text","brack_group_argc","brack_group_key_value","mixed_group"],CD=["subparagraph","paragraph","subsubsection","subsection","section","chapter","part"],FD=CD.map(t=>`${t}[text]`),S7=CD.map(t=>`${t}[command]`);function xv(t,e){return{selection:new Te(t.document.positionAt(e.startIndex+1),t.document.positionAt(e.endIndex-1)),context:{removalRange:new Te(t.document.positionAt(e.startIndex),t.document.positionAt(e.endIndex))}}}function v7(t,e){let r=e.startIndex,n=e.endIndex,i=e.nextNamedSibling;return i!=null&&i.isNamed&&(n=i.endIndex),{selection:new Te(t.document.positionAt(r),t.document.positionAt(n)),context:{}}}function b7(t,e){let r=e.startIndex,n=e.childForFieldName("label");if(n==null){let i=e.childForFieldName("command");i!=null&&(r=i.endIndex+1)}else r=n.endIndex+1;return{selection:new Te(t.document.positionAt(r),t.document.positionAt(e.endIndex)),context:{leadingDelimiterRange:new W(t.document.positionAt(e.startIndex),t.document.positionAt(r-1))}}}var w7={argumentOrParameter:at(Wa([Oe(...ID),Oe(...T7)],1,xv),Me(Oe("begin[name]","end[name]",...FD),xv)),functionCall:at(Me(Oe(...ID,"begin","end")),Me(Oe(...S7),v7)),name:at(Me(Oe(...FD),xv),wt("begin[name][text]","end[name][text]")),collectionItem:Me(Oe("enum_item"),b7)},OD=dn(w7);var _7=["alias","begin_block","end_block","if_modifier","rescue_modifier","undef","unless_modifier","until_modifier","while_modifier"],E7=["array","assignment","begin","binary","break","call","case","case_match","chained_string","character","class","class_variable","complex","conditional","constant","delimited_symbol","element_reference","false","float","for","global_variable","hash","heredoc_beginning","identifier","if","instance_variable","integer","lambda","method","module","next","nil","operator_assignment","parenthesized_statements","range","rational","redo","regex","retry","return","scope_resolution","self","simple_symbol","singleton_class","singleton_method","string","string_array","subshell","super","symbol_array","true","unary","unless","until","while","yield"],R7=["begin_block","begin","block_body","block","body_statement","do_block","do","else","end_block","ensure","heredoc_beginning","interpolation","lambda","method","parenthesized_statements","program","singleton_class","singleton_method","then"],k7=["hash"],P7=["array","string_array","symbol_array"],M7=["=","+=","-=","*=","**=","/=","||=","|=","&&=","&=","%=",">>=","<<=","^="],A7=[":","=>"];function D7(t){if(t.type!=="call")return null;let e=t.childForFieldName("receiver"),r=t.childForFieldName("method"),n=t.childForFieldName("block");return e?.text==="Proc"&&r?.text==="new"||e==null&&r?.text==="lambda"?t:n}var I7={statement:at(wt(..._7),Wa([Oe(...R7),Oe(...E7)],1)),anonymousFunction:at(wt("lambda","do_block"),Me(D7)),condition:$a("*[condition]"),argumentOrParameter:To("lambda_parameters","method_parameters","block_parameters","argument_list"),collectionKey:So(["pair[key]"],[":"]),value:Fn(["pair[value]","assignment[right]","operator_assignment[right]","return.argument_list!"],M7.concat(A7)),collectionItem:To(...k7,...P7)},ND=dn(I7);function Tv(){let t=Xn(["else_clause"],[],{includeUnnamedChildren:!0});return function(e,r){let n=t(e,r),i=r.parent;if(i?.type!=="else_clause"){let a=r.childForFieldName("alternative");if(a==null)return n;let{selection:l}=n;return{selection:l,context:{removalRange:new Te(l.start,BS(a.namedChild(0).startPosition))}}}let{selection:o}=n;return{selection:new Te(BS(i.child(0).startPosition),o.end),context:{}}}}function LD(t){let e=Tv();return function(r,n){return n.namedChild(0).type===t?e(r,n.namedChild(0)):Yn(r,n)}}var UD=["associated_type","attribute_item","const_item","empty_statement","enum_item","extern_crate_declaration","foreign_mod_item","impl_item","inner_attribute_item","let_declaration","macro_definition","macro_invocation","function_item","function_signature_item","mod_item","static_item","struct_item","trait_item","type_item","union_item","use_declaration","expression_statement"],F7=["source_file","block","declaration_list"];function C7(t){return t.parent?.type==="impl_item"&&t.parent?.childForFieldName("type")?.equals(t)?t:null}function O7(t,e){return{selection:BA(e.children[1],e.lastNamedChild),context:{leadingDelimiterRange:pn(e.children[0].startPosition,e.children[1].startPosition)}}}function N7(t){if(t.type!=="block")return null;let{lastNamedChild:e}=t;if(e==null)return null;if(e.type==="expression_statement"){let r=e.child(0);return r.type==="return_expression"?r.child(1):null}return UD.includes(e.type)?null:e.type==="return_expression"?e.child(1):e}var L7={statement:Wa([Oe(...F7),Oe(...UD)],1),condition:at(wt("while_expression[condition]","if_expression[condition]"),Me(Oe("while_let_expression","if_let_expression"),Xn(["while","if","block"],[],{includeUnnamedChildren:!0})),Fn(["*.match_pattern![condition]"],["if"])),collectionItem:To("array_expression","tuple_expression","tuple_type"),type:at(Fn(["let_declaration[type]","parameter[type]","field_declaration[type]","const_item[type]"],[":"]),Me(Oe("constrained_type_parameter[bounds]","where_predicate[bounds]"),O7),Fn(["function_item[return_type]"],["->"]),Me(C7),wt("struct_item","trait_item","impl_item","array_type[element]")),argumentOrParameter:To("arguments","parameters","meta_arguments","type_parameters","ordered_field_declaration_list"),collectionKey:at(So(["field_initializer[name]","field_pattern[name]"],[":"])),name:at(wt("let_declaration.identifier!","parameter.identifier!","function_item[name]","struct_item[name]","enum_item[name]","enum_variant[name]","trait_item[name]","const_item[name]","meta_item.identifier!","let_declaration[pattern]","constrained_type_parameter[left]","where_predicate[left]","field_declaration[name]"),So(["field_initializer[name]","field_pattern[name]"],[":"])),value:at(Fn(["let_declaration[value]"],["="]),Fn(["field_initializer[value]","field_pattern[pattern]"],[":"]),wt("meta_item[value]","const_item[value]"),Me(N7)),attribute:So(["mutable_specifier","attribute_item"]),branch:at(wt("match_arm"),Me(Oe("else_clause"),LD("if_expression")),Me(Oe("if_expression"),Tv()))},VD=dn(L7);var U7={argumentOrParameter:To("arguments","parameters","class_parameters","bindings"),branch:Me(Oe("case_clause"),Xn([],[],{includeUnnamedChildren:!0})),type:Fn(["upper_bound[type]","lower_bound[type]","view_bound[type]","context_bound[type]","val_definition[type]","val_declaration[type]","var_definition[type]","var_declaration[type]","type_definition","extends_clause[type]","class_parameter[type]","parameter[type]","function_definition[return_type]","typed_pattern[type]","binding[type]"],[":"]),value:Fn(["*[value]","*[default_value]","type_definition[type]"],["="]),condition:$a("*[condition]")},BD=dn(U7);var V7=["apply_statement","at_rule","charset_statement","debug_statement","each_statement","error_statement","for_statement","forward_statement","function_statement","if_statement","import_statement","include_statement","keyframes_statement","media_statement","mixin_statement","namespace_statement","placeholder","rule_set","supports_statement","use_statement","warn_statement","while_statement"];function WD(t){return[",","(",")"].includes(t.type)||$D(t)}function $D(t){return t.type==="plain_value"&&t.text==="at"}function HD(t){return e=>{($D(e)||e.type===",")&&(e=e.previousSibling);let r=t(e);for(;r&&!WD(r);)e=r,r=t(r);return e}}function B7(t,e){return e.type!=="declaration"?null:e.descendantsOfType("unit").map(r=>({node:r,selection:Yn(t.editor,r)}))}var H7={condition:$a("condition"),statement:at(wt(...V7),Me(Oe("attribute_selector"),Xn([],["attribute_name","string_value"]))),argumentOrParameter:at(Me(Oe("arguments.*!","parameters.*!"),El(t=>WD(t),", ",HD(t=>t.previousSibling),HD(t=>t.nextSibling)))),collectionKey:So(["declaration.property_name!"],[":"]),value:at(Me(Oe("declaration"),Xn(["property_name","variable_name"])),Me(Oe("include_statement","namespace_statement"),Xn()),wt("return_statement.*!","import_statement.*!","attribute_selector.plain_value!","attribute_selector.string_value!","parameter.default_value!")),unit:at(wt("integer_value.unit!"),B7)},Sv=dn(H7);function jD(t,e,r){let n=Ol[t];if(n==null)throw new Pu(t);let i=n[e];return i==null?ED(e):r?W7(i):i}var Ol={clojure:DD,css:Sv,latex:OD,ruby:ND,rust:VD,scala:BD,scss:Sv};function W7(t){return(e,r)=>{let n=t(e,r);return n==null?null:(n=n.flatMap(i=>$7(i.node,Td(e,i.selection.selection),t)),n.length>0?n:null)}}function $7(t,e,r){let n=t.parent;for(;n!=null;){let i=n.namedChildren.flatMap(o=>r(e,o)).filter(o=>o!=null);if(i.length>0)return i;n=n.parent}return[]}var ja=class{constructor(e,r){this.languageDefinitions=e;this.modifier=r}run(e){let r=jD(e.editor.document.languageId,this.modifier.scopeType.type,this.modifier.type==="everyScope"),n=this.languageDefinitions.getNodeAtLocation(e.editor.document,e.contentRange);if(n==null)throw new Rt(this.modifier.scopeType.type);let i=j7(n,r,{editor:e.editor,selection:new Te(e.contentRange.start,e.contentRange.end)});if(i==null)throw new Rt(this.modifier.scopeType.type);return i.map(o=>{let{containingListDelimiter:a,leadingDelimiterRange:l,trailingDelimiterRange:p,removalRange:u,interiorRange:d}=o.context;if(u!=null&&(l!=null||p!=null))throw Error("Removal range is mutually exclusive with leading or trailing delimiter range");let{editor:h,selection:g}=o.selection;return new uo({scopeTypeType:this.modifier.scopeType.type,editor:h,isReversed:e.isReversed,contentRange:g,removalRange:u,interiorRange:d,insertionDelimiter:a,leadingDelimiterRange:l,trailingDelimiterRange:p})})}};function j7(t,e,r){let n=t;for(;n!=null;){let i=e(r,n);if(i!=null)return i.map(o=>o.selection).map(o=>({selection:Td(r,o.selection),context:o.context}));n=n.parent}return null}function zD(t,e){let r=GD(t,e);for(;r!=null;){if(q7(t,e,r))return{range:r.getInterior()[0].contentRange,boundary:vv(r)};r=z7(t,e.editor,r)}return{range:wl(e.editor,e.contentRange)}}function q7(t,e,r){let{contentRange:n}=e;if(n.isEmpty){let[o,a]=vv(r),l=n.start;if(l.isEqual(o.start)||l.isEqual(a.end))return!1;let p=e.editor.document.lineAt(l);if(l.isEqual(o.end)&&qD(p,l.character)||l.isEqual(a.start)&&qD(p,l.character-1))return!1}else{if(n.isRangeEqual(r.contentRange))return!1;let[o,a]=vv(r);if(n.isRangeEqual(o)||n.isRangeEqual(a))return!1}let i=G7(t,r);return!(i!=null&&r.contentRange.start.isBeforeOrEqual(i.contentRange.start))}function vv(t){return t.getBoundary().map(e=>e.contentRange)}function qD(t,e){return e<t.range.start.character||e>=t.range.end.character||t.text[e].trim()===""}function z7(t,e,r){let n=e.document.offsetAt(r.contentRange.start);if(n===0)return;let i=e.document.positionAt(n-1);return GD(t,new He({editor:e,contentRange:new W(i,i),isReversed:!1}))}function GD(t,e){return KD(t,e,{type:"surroundingPair",delimiter:"collectionBoundary",requireStrongContainment:!0})}function G7(t,e){return KD(t,e,{type:"surroundingPair",delimiter:"string",requireStrongContainment:!0})}function KD(t,e,r){let n=t.create({type:"containingScope",scopeType:r}),i=(()=>{try{return n.run(e)}catch{return[]}})();if(i.length>1)throw Error("Expected only one surrounding pair target");return i[0]}function QD(t,e,r){let{document:n}=t,o=n.getText(e).split(/([,(){}<>[\]"'`])|(?<!\\)(\\"|\\'|\\`)/g).filter(u=>u!=null&&u.length>0),a=K7(o),l=[],p=n.offsetAt(e.start);return a.forEach(u=>{if(u.trim().length===0){p+=u.length;return}if(u===ZD)l.push({type:"separator",range:new W(n.positionAt(p),n.positionAt(p+u.length))});else{let d=p+(u.length-u.trimStart().length);l.push({type:"item",range:new W(n.positionAt(d),n.positionAt(d+u.trim().length))})}p+=u.length}),r!=null?[{type:"boundary",range:r[0]},...l,{type:"boundary",range:r[1]}]:l}function K7(t){let e=[],r=0,n=null,i=null,o=-1;return t.forEach((a,l)=>{r>0?a===i?--r:a===n&&++r:(bv[a]!=null&&t.indexOf(bv[a],l+1)>-1&&(n=a,i=bv[a],r=1),o<0&&(o=l));let p=a===ZD&&r===0;if(p||l===t.length-1){let u=p?l:l+1;e.push(t.slice(o,u).join("")),o=-1,p&&e.push(a)}}),e}var ZD=",",bv={"(":")","{":"}","<":">","[":"]",'"':'"',"'":"'","`":"`"};var Gm=class{constructor(e,r,n){this.languageDefinitions=e;this.modifierStageFactory=r;this.modifier=n}run(e){try{return new ja(this.languageDefinitions,this.modifier).run(e)}catch{}return this.modifier.type==="everyScope"?this.getEveryTarget(this.modifierStageFactory,e):[this.getSingleTarget(this.modifierStageFactory,e)]}getEveryTarget(e,r){let n=XD(e,r),i=r.hasExplicitRange?YD(r,n):n;if(i.length===0)throw new Rt(this.modifier.scopeType.type);return i.map(o=>this.itemInfoToTarget(r,o))}getSingleTarget(e,r){let n=XD(e,r),i=YD(r,n);if(i.length===0)throw new Rt(this.modifier.scopeType.type);let o=i[0],a=i[i.length-1],l={contentRange:o.contentRange.union(a.contentRange),domain:o.domain.union(a.domain),leadingDelimiterRange:o.leadingDelimiterRange,trailingDelimiterRange:a.trailingDelimiterRange},p=l.leadingDelimiterRange!=null&&l.trailingDelimiterRange!=null&&xS(r.editor,l.leadingDelimiterRange)>xS(r.editor,l.trailingDelimiterRange)?l.contentRange.union(l.leadingDelimiterRange):void 0;return this.itemInfoToTarget(r,l,p)}itemInfoToTarget(e,r,n){let i=Q7(r.leadingDelimiterRange,r.trailingDelimiterRange);return new uo({scopeTypeType:this.modifier.scopeType.type,editor:e.editor,isReversed:e.isReversed,contentRange:r.contentRange,insertionDelimiter:i,leadingDelimiterRange:r.leadingDelimiterRange,trailingDelimiterRange:r.trailingDelimiterRange,removalRange:n})}};function Q7(t,e){return t!=null&&!t.isSingleLine||e!=null&&!e.isSingleLine?`,
`:", "}function YD(t,e){return e.filter(r=>r.domain.intersection(t.contentRange)!=null)}function XD(t,e){let{range:r,boundary:n}=zD(t,e);return Z7(e.editor,r,n)}function Z7(t,e,r){let n=QD(t,e,r),i=[];return n.forEach((o,a)=>{if(o.type==="separator"||o.type==="boundary")return;let l=(()=>{if(n[a-2]?.type==="item")return new W(n[a-2].range.end,o.range.start);if(n[a-1]?.type==="separator")return new W(n[a-1].range.start,o.range.start)})(),p=(()=>{if(n[a+2]?.type==="item")return new W(o.range.end,n[a+2].range.start);if(n[a+1]?.type==="separator")return new W(o.range.end,n[a+1].range.end)})(),u=n[a-1]?.type==="boundary"||n[a-1]?.type==="separator"?n[a-1].range.end:o.range.start,d=n[a+1]?.type==="boundary"||n[a+1]?.type==="separator"?n[a+1].range.start:o.range.end;i.push({contentRange:o.range,leadingDelimiterRange:l,trailingDelimiterRange:p,domain:new W(u,d)})}),i}var ti={type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:{type:"line"}}},wv={type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:{type:"token"}}};var Km=class extends Error{constructor(e){super(`Target has no ${e} delimiter.`),this.name="NoDelimiterError"}},Qm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){return this.modifierStageFactory.create(wv).run(e).map(r=>{let n=r.getLeadingDelimiterTarget();if(n==null)throw new Km("leading");return n})}},Zm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){return this.modifierStageFactory.create(wv).run(e).map(r=>{let n=r.getTrailingDelimiterTarget();if(n==null)throw new Km("trailing");return n})}};function Ym(t,e,r,n){return uv(e,r,n),r===n?e[r]:Va(t,e[r],e[n],!0,!0)}function Xm(t,e,r){return t.create({type:"everyScope",scopeType:r}).run(e)}var Jm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=Xm(this.modifierStageFactory,e,this.modifier.scopeType),n=this.modifier.start+(this.modifier.start<0?r.length:0),i=n+this.modifier.length-1;return this.modifier.isEvery?SD(r,n,i):[Ym(e.isReversed,r,n,i)]}};var eh=class{run(e){let r={editor:e.editor,isReversed:e.isReversed,contentRange:this.getContentRange(e.contentRange)};return[e.isRaw?new po(r):new He({...r,isToken:!1})]}},th=class extends eh{getContentRange(e){return e.start.toEmptyRange()}},rh=class extends eh{getContentRange(e){return e.end.toEmptyRange()}};var nh=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let{scopeType:r}=this.modifier,n=new Ba(this.modifierStageFactory,this.scopeHandlerFactory,{type:"containingScope",scopeType:r});try{return n.run(e)}catch(a){if(!(a instanceof Rt))throw a}let i=this.scopeHandlerFactory.create(this.modifier.scopeType,e.editor.document.languageId);if(i==null)throw Error(`Couldn't create scope handler for: ${r.type}`);let o=Y7(e,i);if(o==null)throw Error(`No scopes found for scope type: ${r.type}`);return o}};function Y7(t,e){let r=e.generateScopes(t.editor,t.contentRange.start,"backward"),n=e.generateScopes(t.editor,t.contentRange.end,"forward"),{active:i}=t.contentSelection,o=JD(r,i),a=JD(n,i),l=o.distance<a.distance?o.scope:a.scope;return l?.getTargets(t.isReversed)}function JD(t,e){let r,n=1/0;for(let i of t){let o=Math.min(eI(e,i.domain.start),eI(e,i.domain.end));if(o<n)r=i,n=o;else break}return{scope:r,distance:n}}function eI(t,e){return Math.abs(t.line-e.line)*1e4+Math.abs(t.character-e.character)}var ih=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=this.modifierStageFactory.create(this.modifier.anchor),n=this.modifierStageFactory.create(this.modifier.active),i=r.run(e),o=n.run(e);if(i.length!==1||o.length!==1)throw new Error("Expected single anchor and active target");return[xo(i[0],o[0],this.modifier.excludeAnchor,this.modifier.excludeActive)]}};var oh=class{constructor(e){this.modifier=e}run(e){return[new po({editor:e.editor,contentRange:e.contentRange,isReversed:e.isReversed})]}};var sh=class extends Error{constructor(e,r,n){super(`Requested ${e} ${n}s, but ${r} are already selected.`),this.name="TooFewScopesError"}};function tI(t,e,r){let n=Xm(t,tQ(r),e.scopeType),i=eQ(r.contentRange,n);return X7(e,r,n,i)}function X7(t,e,r,n){let i=t.direction==="forward",o=J7(t,e.contentRange,r,i,n),a=i?o+t.length-1:o-t.length+1,l=Math.min(o,a),p=Math.max(o,a);return[Ym(e.isReversed,r,l,p)]}function J7(t,e,r,n,i){let o=t.offset===0;if(i==null){let p=n?r.findIndex(u=>u.contentRange.start.isAfter(e.start)):Vc(r,u=>u.contentRange.start.isBefore(e.start));if(p===-1)throw new Ii;return o?p:n?p+t.offset-1:p-t.offset+1}let a=i.start,l=i.end;if(o){let p=l-a+1;if(p>t.length)throw new sh(t.length,p,t.scopeType.type);return n?a:l}return n?l+t.offset:a-t.offset}function eQ(t,e){let r=e.map((i,o)=>({index:o,intersection:i.contentRange.intersection(t)})).filter(i=>i.intersection!=null);if(t.isEmpty){if(r.length===0)return;let i=r.at(-1).index;return{start:i,end:i}}let n=r.filter(i=>!i.intersection.isEmpty).map(i=>i.index);if(n.length!==0)return{start:n[0],end:n.at(-1)}}function tQ(t){return new Pt({editor:t.editor,isReversed:t.isReversed,contentRange:t.contentRange,hasExplicitRange:!1})}var ah=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let r=this.scopeHandlerFactory.create(this.modifier.scopeType,e.editor.document.languageId);if(r==null)return tI(this.modifierStageFactory,this.modifier,e);let n=Array.from(this.modifier.offset===0?rQ(r,e,this.modifier):nQ(r,e,this.modifier));if(n.length<this.modifier.length)throw new Ii;let{isReversed:i}=e;return this.modifier.isEvery?n.flatMap(o=>o.getTargets(i)):Cm(i,n[0],n[n.length-1])}};function rQ(t,e,r){let{editor:n,contentRange:i}=e,{length:o,direction:a}=r,l=Om(t,n,a==="forward"?i.start:i.end,a)?.domain;if(l==null)throw new Rt(r.scopeType.type);return bl(o,t.generateScopes(n,a==="forward"?l.start:l.end,a,{skipAncestorScopes:!0}))}function nQ(t,e,r){let{editor:n,contentRange:i}=e,{length:o,direction:a,offset:l}=r,p=a==="forward"?i.end:i.start,u=i.isEmpty?"disallowed":"disallowedIfStrict";return cA(t.generateScopes(n,p,a,{containment:u,skipAncestorScopes:!0}),l-1,l+o-1)}var ch=class{constructor(e){this.modifier=e}run(e){return e.editor.visibleRanges.map(r=>new He({editor:e.editor,isReversed:e.isReversed,contentRange:r}))}};var lh=class{constructor(e){this.modifier=e}run(e){if(this.modifier.type==="everyScope")throw new Error(`Every ${this.modifier.type} not yet implemented`);return[new _d({editor:e.editor,isReversed:e.isReversed,contentRange:e.contentRange})]}};var qa=class{constructor(e,r,n){this.languageDefinitions=e;this.storedTargets=r;this.scopeHandlerFactory=n;this.create=this.create.bind(this)}create(e){switch(e.type){case"startOf":return new th;case"endOf":return new rh;case"extendThroughStartOf":case"extendThroughEndOf":return new Wm(this,e);case"toRawSelection":return new oh(e);case"interiorOnly":return new $m(this,e);case"excludeInterior":return new jm(this,e);case"leading":return new Qm(this,e);case"trailing":return new Zm(this,e);case"visible":return new ch(e);case"containingScope":return new Ba(this,this.scopeHandlerFactory,e);case"preferredScope":return new nh(this,this.scopeHandlerFactory,e);case"everyScope":return e.scopeType.type==="instance"?new Ha(this,this.storedTargets,e):new Lm(this,this.scopeHandlerFactory,e);case"ordinalScope":return e.scopeType.type==="instance"?new Ha(this,this.storedTargets,e):new Jm(this,e);case"relativeScope":return e.scopeType.type==="instance"?new Ha(this,this.storedTargets,e):new ah(this,this.scopeHandlerFactory,e);case"keepContentFilter":return new Um(e);case"keepEmptyFilter":return new Vm(e);case"cascading":return new Im(this,e);case"modifyIfUntyped":return new La(this,e);case"range":return new ih(this,e);case"inferPreviousMark":throw Error(`Unexpected modifier '${e.type}'; it should have been removed during inference`)}}getLegacyScopeStage(e){switch(e.scopeType.type){case"notebookCell":return new lh(e);case"collectionItem":return new Gm(this.languageDefinitions,this,e);default:return new ja(this.languageDefinitions,e)}}};async function rI(t,e,r){let n=t.registerReplaceEditList(e.document,r.filter(o=>o.isReplace)),i=await e.edit(r);return n(),i}async function Fe({rangeUpdater:t,editor:e,selections:r,preserveCursorSelections:n,...i}){let o=wi(r),a=o.map(u=>{let d=r[u],h=iQ(d);return nI(e.document,h.selections,h.behavior)});n||a.push(nI(e.document,e.selections,1));let l=await("edits"in i?aQ(t,e,i.edits,a):iI(t,i.callback,e.document,a));return n||await e.setSelections(l.pop()),Object.fromEntries(o.map((u,d)=>[u,l[d]]))}function nI(t,e,r){return e.map(n=>oQ(t,n,n instanceof Te?!n.isReversed:!0,r))}function iQ(t){return"selections"in t?t:{selections:t,behavior:1}}function oQ(t,e,r,n){return{range:e,isForward:r,expansionBehavior:{start:{type:n===1||n===3?"closed":"open"},end:{type:n===1||n===2?"closed":"open"}},offsets:{start:t.offsetAt(e.start),end:t.offsetAt(e.end)},text:t.getText(e)}}function sQ(t){return t.map(e=>e.map(({range:{start:r,end:n},isForward:i})=>i?new Te(r,n):new Te(n,r)))}async function iI(t,e,r,n){let i=t.registerRangeInfoList(r,Je(n));return await e(),i(),sQ(n)}async function aQ(t,e,r,n){return await iI(t,async()=>{if(!await rI(t,e,r))throw new Error("Could not apply edits")},e.document,n)}function wr(t){if(t.length===0)throw new Error("Require at least one target with this action");let e=t.map(r=>r.editor);if(new Set(e).size>1)throw new Error("Can only have one editor with this action");return e[0]}function _r(t){if(t.length!==1)throw new Error("Can only have one target with this action");return t[0]}async function Ci(t,e,r){return Promise.all(_v(t,e).map(([n,i])=>r(n,i)))}async function rt(t,e){return Ci(t,r=>r.editor,e)}async function oI(t,e){let r=_v(t,i=>i.editor),n=[];for(let[i,o]of r)n.push(await e(i,o));return n}function sI(t){return _v(t,e=>e.editor)}function _v(t,e){let n=ol(t,i=>e(i).document.uri);return Array.from(n.values(),i=>[e(i[0]),i])}function ph(t){return t.contentRange}function mn(t,e){return e!=null?St(t,e).map(([n,i])=>({editor:n.editor,selection:n?.isReversed?new Te(i.end,i.start):new Te(i.start,i.end)})):t.map(n=>({editor:n.editor,selection:n.contentSelection}))}function aI(t){let e=t.contentRange;return t.isLine?sn(e):vt(e)}function Ne(t,e,r,n=ph){return t.flashRanges(e.map(i=>{let o=n(i);return o==null?null:{editor:i.editor,range:i.isLine?sn(o):vt(o),style:r}}).filter(i=>i!=null))}var uh=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e){return await Ne(D(),e,"pendingModification0"),{thatSelections:Je(await rt(e,async(n,i)=>{let o=i.map(({contentRange:u})=>u),a=cQ(n,o),l=D().getEditableTextEditor(n),{contentRanges:p}=await Fe({rangeUpdater:this.rangeUpdater,editor:l,edits:a,selections:{contentRanges:o}});return St(i,p).map(([u,d])=>({editor:u.editor,selection:d.toSelection(u.isReversed)}))}))}}};function cQ(t,e){let{document:r}=t,n=[];for(let i of e){let o=i.start,a=r.lineAt(o),l=a.text.slice(0,a.rangeTrimmed?.start?.character??a.range.start.character),p=a.text.slice(0,o.character).search(/\s+$/),u=p>-1?new W(new ce(a.lineNumber,p),o):o.toEmptyRange();n.push({range:u,text:`
`+l,isReplace:!u.isEmpty})}return n}function fh(t){return t.length<2?t:sI(t).flatMap(([e,r])=>{if(r.length<2)return r;let n=[...r];n.sort((o,a)=>o.contentRange.start.compareTo(a.contentRange.start));let i=!0;for(;i;)[n,i]=lQ(n);return n})}function lQ(t){if(t.length<2)return[t,!1];let e=[],r=[];return t.forEach(n=>{r.length&&!pQ(r[r.length-1],n)?(e.push(cI(r)),r=[n]):r.push(n)}),e.push(cI(r)),[e,e.length!==t.length]}function cI(t){if(t.length===1)return t[0];let e=t[0],r=t[t.length-1];return xo(e,r)}function pQ(t,e){return!!t.getRemovalRange().intersection(e.getRemovalRange())}var Nl=class{constructor(e,r){this.rangeUpdater=e;this.type=r}async decorateTargets(e,r){await Promise.all([Ne(D(),e,this.decoration.sourceStyle,this.decoration.getSourceRangeCallback),Ne(D(),r,this.decoration.destinationStyle)])}getEditsBringMove(e,r){let n=[],i=[],o=e.length!==r.length&&r.length===1;return e.forEach((a,l)=>{let p=r[l];if((a==null||p==null)&&!o)throw new Error("Targets must have same number of args");if(p!=null){let u;o?u=e.map((d,h)=>{let g=d.contentText,x=(p.isRaw?null:p.insertionDelimiter)??(d.isRaw?null:d.insertionDelimiter);return h>0&&x!=null?x+g:g}).join(""):u=a.contentText,i.push({edit:p.constructChangeEdit(u),editor:p.editor,originalTarget:p.target,isSource:!1})}else p=r[0];n.includes(a)||(n.push(a),this.type==="bring"&&i.push({edit:a.toDestination("to").constructChangeEdit(p.target.contentText),editor:a.editor,originalTarget:a,isSource:!0}))}),this.type==="move"&&fh(n).forEach(a=>{i.push({edit:a.constructRemovalEdit(),editor:a.editor,originalTarget:a,isSource:!0})}),i}async performEditsAndComputeThatMark(e){return Je(await Ci(e,r=>r.editor,async(r,n)=>{let i=this.type!=="bring"?n:n.filter(({isSource:x})=>!x),o=this.type==="swap"?[]:n.filter(({isSource:x})=>x),a=this.type==="swap"?n:n.filter(({isSource:x})=>!x),l=o.map(({edit:x})=>x.range),p=a.map(({edit:x})=>x.range),u=D().getEditableTextEditor(r),{sourceEditRanges:d,destinationEditRanges:h}=await Fe({rangeUpdater:this.rangeUpdater,editor:u,edits:i.map(({edit:x})=>x),selections:{sourceEditRanges:l,destinationEditRanges:{selections:p,behavior:0}}}),g=[...this.getMarks(o,d),...this.getMarks(a,h)];return g.sort((x,_)=>n.findIndex(w=>w.originalTarget===x.target)-n.findIndex(w=>w.originalTarget===_.target)),g}))}getMarks(e,r){return e.map((n,i)=>{let o=r[i],a=n.edit.updateRange(o),l=n.originalTarget;return{editor:n.editor,selection:a.toSelection(l.isReversed),isSource:n.isSource,target:l}})}async decorateThatMark(e){let r=n=>e.find(i=>i.target===n).selection;return Promise.all([Ne(D(),e.filter(({isSource:n})=>n).map(({target:n})=>n),this.decoration.sourceStyle,r),Ne(D(),e.filter(({isSource:n})=>!n).map(({target:n})=>n),this.decoration.destinationStyle,r)])}calculateMarksBringMove(e){return{thatMark:e.filter(({isSource:r})=>!r),sourceMark:e.filter(({isSource:r})=>r)}}};function lI(t,e){return t.length===1?Array(e.length).fill(t[0]):t}var dh=class extends Nl{constructor(r){super(r,"bring");this.decoration={sourceStyle:"referenced",destinationStyle:"pendingModification0",getSourceRangeCallback:ph};this.run=this.run.bind(this)}async run(r,n){r=lI(r,n),await this.decorateTargets(r,n.map(p=>p.target));let i=this.getEditsBringMove(r,n),o=await this.performEditsAndComputeThatMark(i),{thatMark:a,sourceMark:l}=this.calculateMarksBringMove(o);return await this.decorateThatMark(a),{thatSelections:a,sourceSelections:l}}},mh=class extends Nl{constructor(r){super(r,"move");this.decoration={sourceStyle:"pendingDelete",destinationStyle:"pendingModification0",getSourceRangeCallback:uQ};this.run=this.run.bind(this)}async run(r,n){r=lI(r,n),await this.decorateTargets(r,n.map(p=>p.target));let i=this.getEditsBringMove(r,n),o=await this.performEditsAndComputeThatMark(i),{thatMark:a,sourceMark:l}=this.calculateMarksBringMove(o);return await this.decorateThatMark(a),{thatSelections:a,sourceSelections:l}}},hh=class extends Nl{constructor(r){super(r,"swap");this.decoration={sourceStyle:"pendingModification1",destinationStyle:"pendingModification0",getSourceRangeCallback:ph};this.run=this.run.bind(this)}async run(r,n){await this.decorateTargets(r,n);let i=this.getEditsSwap(r,n),o=await this.performEditsAndComputeThatMark(i);return await this.decorateThatMark(o),{thatSelections:o,sourceSelections:[]}}getEditsSwap(r,n){let i=[];return r.forEach((o,a)=>{let l=n[a];if(o==null||l==null)throw new Error("Targets must have same number of args");i.push({edit:l.toDestination("to").constructChangeEdit(o.contentText),editor:l.editor,originalTarget:l,isSource:!1}),i.push({edit:o.toDestination("to").constructChangeEdit(l.contentText),editor:o.editor,originalTarget:o,isSource:!0})}),i}};function uQ(t){return t.getRemovalHighlightRange()}var Ll=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e,r){_r(e);let{returnValue:n}=await this.actions.getText.run(e,{showDecorations:!1}),{thatSelections:i}=await this.actions.wrapWithPairedDelimiter.run(r,n[0]+"(",")");return{thatSelections:i}}};var Ul=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){let r=wr(e),n=e.map(o=>new He({editor:o.editor,isReversed:o.isReversed,contentRange:o.contentRange})),{thatTargets:i}=await this.actions.remove.run(n);return i!=null&&await D().getEditableTextEditor(r).setSelections(i.map(({contentSelection:o})=>o),{focusEditor:!0}),{thatTargets:i}}};var za=t=>new Pt({editor:t.editor,isReversed:t.selection.isReversed,contentRange:t.selection,hasExplicitRange:!0});var Ga=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e,r){r.showDecorations&&await Ne(D(),e,"referenced"),r.ensureSingleEditor&&wr(e),r.ensureSingleTarget&&_r(e);let n=D().activeEditableTextEditor,i=r.setSelection?oI:rt,o=Je(await i(e,(a,l)=>this.runForEditor(r,a,l)));return r.setSelection&&r.restoreSelection&&n!=null&&!n.isActive&&await n.focus(),{thatTargets:o}}async runForEditor(e,r,n){let i=D().getEditableTextEditor(r),o=r.selections,a=r.document.version,l=n.map(d=>d.contentSelection);e.setSelection&&await i.setSelections(l,{focusEditor:!0,revealRange:!1});let{originalSelections:p,targetSelections:u}=await Fe({rangeUpdater:this.rangeUpdater,editor:i,callback:()=>e.callback(i,n),preserveCursorSelections:!0,selections:{originalSelections:o,targetSelections:l}});return e.setSelection&&e.restoreSelection&&await i.setSelections(p),r.document.version===a?n:u.map(d=>za({editor:r,selection:d}))}};var zt=class{constructor(e){this.ensureSingleEditor=!1;this.ensureSingleTarget=!1;this.restoreSelection=!0;this.showDecorations=!0;this.callbackAction=new Ga(e),this.run=this.run.bind(this)}async run(e,{showDecorations:r}={}){let n=D().capabilities.commands[this.command];if(n==null)throw Error(`Action ${this.command} is not supported by your ide`);let{acceptsLocation:i}=n;return this.callbackAction.run(e,{callback:(o,a)=>fQ(o,i?a.map(l=>l.contentRange):void 0,this.command),setSelection:!i,ensureSingleEditor:this.ensureSingleEditor,ensureSingleTarget:this.ensureSingleTarget,restoreSelection:this.restoreSelection,showDecorations:r??this.showDecorations})}},gh=class extends zt{constructor(){super(...arguments);this.command="clipboardCopy";this.ensureSingleEditor=!0}},yh=class extends zt{constructor(){super(...arguments);this.command="toggleLineComment"}},xh=class extends zt{constructor(){super(...arguments);this.command="indentLine"}},Th=class extends zt{constructor(){super(...arguments);this.command="outdentLine"}},Sh=class extends zt{constructor(){super(...arguments);this.command="fold"}},vh=class extends zt{constructor(){super(...arguments);this.command="unfold"}},bh=class extends zt{constructor(){super(...arguments);this.command="rename";this.ensureSingleTarget=!0}},wh=class extends zt{constructor(){super(...arguments);this.command="showReferences";this.ensureSingleTarget=!0}},_h=class extends zt{constructor(){super(...arguments);this.command="quickFix";this.ensureSingleTarget=!0}},Eh=class extends zt{constructor(){super(...arguments);this.command="revealDefinition";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Rh=class extends zt{constructor(){super(...arguments);this.command="revealTypeDefinition";this.ensureSingleTarget=!0;this.restoreSelection=!1}},kh=class extends zt{constructor(){super(...arguments);this.command="showHover";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Ph=class extends zt{constructor(){super(...arguments);this.command="showDebugHover";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Mh=class extends zt{constructor(){super(...arguments);this.command="extractVariable";this.ensureSingleTarget=!0;this.restoreSelection=!1}};function fQ(t,e,r){switch(r){case"toggleLineComment":return t.toggleLineComment(e);case"indentLine":return t.indentLine(e);case"outdentLine":return t.outdentLine(e);case"clipboardCopy":return t.clipboardCopy(e);case"fold":return t.fold(e);case"unfold":return t.unfold(e);case"insertLineAfter":return t.insertLineAfter(e);case"rename":return t.rename(e?.[0]);case"showReferences":return t.showReferences(e?.[0]);case"quickFix":return t.quickFix(e?.[0]);case"revealDefinition":return t.revealDefinition(e?.[0]);case"revealTypeDefinition":return t.revealTypeDefinition(e?.[0]);case"showHover":return t.showHover(e?.[0]);case"showDebugHover":return t.showDebugHover(e?.[0]);case"extractVariable":return t.extractVariable(e?.[0]);case"highlight":throw Error("Highlight command not supported as simple action")}}var Ah=class{constructor(e,r){this.actions=e;this.rangeUpdater=r;this.run=this.run.bind(this)}async run(e,r={showDecorations:!0}){if(D().capabilities.commands.clipboardCopy!=null)return new gh(this.rangeUpdater).run(e,r);r.showDecorations&&await Ne(D(),e,"referenced",i=>i.contentRange);let n=e.map(i=>i.contentText).join(`
`);return await D().clipboard.writeText(n),{thatTargets:e}}};var Dh=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){await D().flashRanges(e.flatMap(i=>{let{editor:o,contentRange:a}=i,l=i.getRemovalHighlightRange();return i.isLine?[{editor:o,range:vt(a),style:"referenced"},{editor:o,range:sn(l),style:"pendingDelete"}]:[{editor:o,range:vt(a),style:"referenced"},...dQ(a,l).map(p=>({editor:o,range:vt(p),style:"pendingDelete"}))]}));let r={showDecorations:!1};await this.actions.copyToClipboard.run(e,r);let{thatTargets:n}=await this.actions.remove.run(e,r);return{thatTargets:n}}};function dQ(t,e){let{start:r,end:n}=t,{start:i,end:o}=e,a=[];return i.isBefore(r)&&a.push(new W(i,r)),o.isAfter(n)&&a.push(new W(n,o)),a}var Vl=class{constructor(){this.run=this.run.bind(this)}async run(e){return await rt(e,async(r,n)=>{let i=r.selections.filter(o=>!n.some(a=>{let l=a.contentRange.intersection(o);return l&&(!l.isEmpty||o.isEmpty)}));if(i.length===0)throw new Ev;await D().getEditableTextEditor(r).setSelections(i)}),{thatTargets:e}}},Ev=class extends Error{constructor(){super("Can't deselect every selection. At least one is required"),this.name="SelectionRequiredError"}};async function pI(t,e,r,n){let i=r.destinations.map((_,w)=>{if(n||_.getEditNewActionType()==="edit")return{destination:_,index:w}}).filter(_=>!!_);if(i.length===0)return r;let o=i.map(_=>_.destination.constructChangeEdit("")),a=r.cursorRanges.map((_,w)=>({range:_,index:w})).filter(({range:_})=>_!=null),l=a.map(({index:_})=>_),p=a.map(({range:_})=>_),u=o.map(_=>_.range),{thatRanges:d,cursorRanges:h,editRanges:g}=await Fe({rangeUpdater:t,editor:e,edits:o,preserveCursorSelections:!0,selections:{thatRanges:r.thatRanges,cursorRanges:p,editRanges:{selections:u,behavior:0}}}),x=[...r.cursorRanges];return St(l,h).forEach(([_,w])=>{x[_]=w}),i.forEach((_,w)=>{let M=o[w].updateRange(g[w]);x[_.index]=M}),{destinations:r.destinations,thatRanges:d,cursorRanges:x}}async function uI({acceptsLocation:t},e,r,n){let i=n.destinations.map((h,g)=>{if(h.getEditNewActionType()==="insertLineAfter")return{destination:h,index:g}}).filter(h=>!!h);if(i.length===0)return n;let o=i.map(({destination:h})=>h.contentRange),a=n.destinations.map(({contentRange:h})=>h),l=async()=>{t?await r.insertLineAfter(o):(await r.setSelections(o.map(h=>h.toSelection(!1))),await r.focus(),await r.insertLineAfter())},{targetRanges:p,thatRanges:u}=await Fe({rangeUpdater:e,editor:r,callback:l,preserveCursorSelections:!0,selections:{targetRanges:a,thatRanges:n.thatRanges}}),d=[...n.cursorRanges];return i.forEach((h,g)=>{d[h.index]=r.selections[g]}),{destinations:n.destinations.map((h,g)=>h.withTarget(h.target.withContentRange(p[g]))),thatRanges:u,cursorRanges:d}}async function fI(t,e){let r=_r(e),n=D().getEditableTextEditor(r.editor),i=r.insertionMode==="before";if(r.insertionMode==="to")throw Error(`Unsupported insertion mode '${r.insertionMode}' for notebookcapell`);await t.setSelection.run([r.target]);let o=l=>l;i?o=await n.editNewNotebookCellAbove():await n.editNewNotebookCellBelow();let a=mn([r.target.thatTarget]);return a[0].selection=o(a[0].selection),{thatSelections:a}}var Ih=class{constructor(e,r){this.rangeUpdater=e;this.actions=r;this.run=this.run.bind(this)}async run(e){if(e.some(({target:l})=>l.isNotebookCell))return fI(this.actions,e);let r=D().getEditableTextEditor(wr(e)),n={destinations:e,thatRanges:e.map(({target:l})=>l.thatTarget.contentRange),cursorRanges:new Array(e.length).fill(void 0)},i=D().capabilities.commands.insertLineAfter,o=i!=null;o&&(n=await uI(i,this.rangeUpdater,r,n)),n=await pI(this.rangeUpdater,r,n,!o);let a=n.destinations.map((l,p)=>n.cursorRanges[p].toSelection(l.target.isReversed));return await r.setSelections(a,{focusEditor:!0}),{thatSelections:mn(n.destinations.map(l=>l.target),n.thatRanges)}}};var Fh=class{constructor(e,r){this.actions=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(ti)]}run(e){return this.actions.editNew.run(e.map(r=>r.toDestination(this.insertionMode)))}},Ch=class extends Fh{constructor(){super(...arguments);this.insertionMode="before"}},Oh=class extends Fh{constructor(){super(...arguments);this.insertionMode="after"}};var Bl=class{constructor(e){this.callbackAction=new Ga(e),this.run=this.run.bind(this)}async run(e,r,{commandArgs:n,ensureSingleEditor:i,ensureSingleTarget:o,restoreSelection:a,showDecorations:l}={}){let p=n??[];return this.callbackAction.run(e,{callback:()=>D().executeCommand(r,...p),setSelection:!0,ensureSingleEditor:i??!1,ensureSingleTarget:o??!1,restoreSelection:a??!0,showDecorations:l??!0})}};var Nh=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){_r(e);let{returnValue:r,thatTargets:n}=await this.actions.getText.run(e),[i]=r,o;return i.length>200?(o=i.substring(0,200),Gc(D().messages,"truncatedSearchText","Search text is longer than 200 characters; truncating")):o=i,await this.find(o),{thatTargets:n}}},Lh=class extends Nh{find(e){return D().findInDocument(e)}},Uh=class extends Nh{find(e){return D().findInWorkspace(e)}};var Ka=class{constructor(e){this.options=e;this.run=this.run.bind(this)}async run(e){let r=_r(e);return await Ne(D(),e,"referenced"),await D().getEditableTextEditor(r.editor).openLink(r.contentRange,this.options),{thatSelections:mn(e)}}};function dI(t,e){let r=[],n=0,i=null,[o,...a]=t.split(/\r?\n/);return[{text:e+o,startIndex:e.length},...a.map(p=>({text:p,startIndex:0}))].forEach(({text:p,startIndex:u})=>{let d=p.match(/^\s*/)?.[0]??"",h=d.length;i!=null&&(d.length>i.length?n++:d.length<i.length&&n--),i=d;let g=Math.max(h,u),x=dT("	",n),_=p.slice(g);r.push(x+_)}),r}function mI(t,e){let r=hT(e,o=>o.offsets.start),n="",i=0;for(let o of r)n+=t.slice(i,o.offsets.start)+o.text,i=o.offsets.end;return n+=t.slice(i),n}var Hl=class{constructor(){this.substitutions=[]}addSubstitution(e,r=!1){let n=mQ(10);return this.substitutions.push({to:e,randomId:n,isQuoted:r}),n}makeSubstitutions(e){return this.substitutions.forEach(({to:r,randomId:n,isQuoted:i})=>{let o=i?`"${n}"`:n;e=e.split(o).join(r)}),e}};function mQ(t){let e="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=r.length;for(let i=0;i<t;i++)e+=r.charAt(Math.floor(Math.random()*n));return e}var Qa=class{constructor(e){this.snippets=e;this.run=this.run.bind(this)}async run(e,r){let n=_r(e),i=n.editor;if(Ne(D(),e,"referenced"),r==null&&(r=await D().showInputBox({prompt:"Name of snippet",placeHolder:"helloWorld"})),r==null)return{};let o=1,a=i.document.offsetAt(n.contentRange.start),l=i.selections.filter(M=>n.contentRange.contains(M)).map((M,U)=>({offsets:{start:i.document.offsetAt(M.start)-a,end:i.document.offsetAt(M.end)-a},defaultName:`variable${U+1}`,placeholderIndex:o++})),p=new Hl,u=i.document.getText(new W(n.contentRange.start.with(void 0,0),n.contentRange.start)),d=i.document.getText(n.contentRange),h=mI(d,[...nn(d,/\$|\\/g,M=>({offsets:{start:M.index,end:M.index+M[0].length},text:M[0]==="\\"?`\\${M[0]}`:`\\\\${M[0]}`})),...l.map(({offsets:M,defaultName:U,placeholderIndex:Z})=>({offsets:M,text:p.addSubstitution(["\\$","${",Z,":",U,"}"].join(""))}))]),g=dI(h,u),x=({placeholderIndex:M})=>{let U="$"+M,Z=p.addSubstitution("{$"+o+++"}",!0);return[U,Z]},_={[r]:{definitions:[{scope:{langIds:[i.document.languageId]},body:g}],description:"$"+o++,variables:l.length===0?void 0:Object.fromEntries(l.map(x))}},w=p.makeSubstitutions(JSON.stringify(_,null,2)),C=D().getEditableTextEditor(i);return D().runMode==="test"?await C.setSelections([i.document.range.toSelection(!1)]):await this.snippets.openNewSnippetFile(r),await C.insertSnippet(w),{thatSelections:e.map(({editor:M,contentSelection:U})=>({editor:M,selection:U}))}}};var Wl=class{constructor(){this.run=this.run.bind(this)}async run(e){return{returnValue:e.map(({contentRange:r})=>({contentRange:r})),thatTargets:e}}};var $l=class{constructor(){this.run=this.run.bind(this)}async run(e,{showDecorations:r=!0,ensureSingleTarget:n=!1}={}){return r&&await Ne(D(),e,"referenced"),n&&_r(e),{returnValue:e.map(i=>i.contentText),thatTargets:e}}};var jl=class{constructor(){this.run=this.run.bind(this)}async run(e,r){if(D().capabilities.commands.highlight==null)throw Error("The highlight action is not supported by your ide");return e.length===0?await Promise.all(D().visibleTextEditors.map(n=>D().setHighlightRanges(r,n,[]))):await rt(e,(n,i)=>D().setHighlightRanges(r,n,i.map(aI))),{thatTargets:e}}};var Vh=class{constructor(e,r,n){this.rangeUpdater=e;this.modifierStageFactory=r;this.isBefore=n;this.getFinalStages=()=>[this.modifierStageFactory.create(ti)];this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e){let r=Je(await rt(e,this.runForEditor));return await D().flashRanges(r.flatMap(n=>n.thatMark.map(i=>({editor:i.editor,range:vt(i.selection),style:"justAdded"})))),{sourceSelections:r.flatMap(({sourceMark:n})=>n),thatSelections:r.flatMap(({thatMark:n})=>n)}}async runForEditor(e,r){let n=this.isBefore?"after":"before",i=r.flatMap(g=>g.toDestination(n).constructChangeEdit(g.contentText)),o=r.map(({contentSelection:g})=>g),a=i.map(({range:g})=>g),l=D().getEditableTextEditor(e),{contentSelections:p,editRanges:u}=await Fe({rangeUpdater:this.rangeUpdater,editor:l,edits:i,selections:{contentSelections:o,editRanges:{selections:a,behavior:0}}}),d=St(i,u).map(([g,x])=>g.updateRange(x)),h=e.selections[0];return p.some(g=>g.intersection(h)!=null)&&await l.revealRange(h),{sourceMark:mn(r,d),thatMark:mn(r,p)}}},Bh=class extends Vh{constructor(e,r){super(e,r,!0)}},Hh=class extends Vh{constructor(e,r){super(e,r,!1)}};var ql=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(ti)]}async run(e){let r=await rt(e,async(i,o)=>{let a=this.getEdits(o),l=o.map(d=>d.thatTarget.contentSelection),{contentSelections:p,editRanges:u}=await Fe({rangeUpdater:this.rangeUpdater,editor:D().getEditableTextEditor(i),edits:a,selections:{contentSelections:l,editRanges:{selections:a.map(d=>d.range),behavior:0}}});return{thatMark:p.map(d=>({editor:i,selection:d})),flashRanges:Go(a,u).map(([d,h])=>({editor:i,range:d.isLine?d.updateRange(h):h,isLine:d.isLine}))}});return await D().flashRanges(r.flatMap(i=>i.flashRanges.map(({editor:o,range:a,isLine:l})=>({editor:o,range:l?sn(a):vt(a),style:"justAdded"})))),{thatSelections:r.flatMap(i=>i.thatMark)}}},Wh=class extends ql{constructor(e,r){super(e,r)}getEdits(e){return e.flatMap(r=>[qh(r,"before"),qh(r,"after")])}},$h=class extends ql{constructor(e,r){super(e,r)}getEdits(e){return e.map(r=>qh(r,"before"))}},jh=class extends ql{constructor(e,r){super(e,r)}getEdits(e){return e.map(r=>qh(r,"after"))}};function qh(t,e){return{...t.toDestination(e).constructChangeEdit("",!0),isLine:t.isLine}}var Rv=class t{constructor(){this.value="";this.pos=0}static{this._table={36:0,58:1,44:2,123:3,125:4,92:5,47:6,124:7,43:11,45:12,63:13}}static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return e===95||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};let e=this.pos,r=0,n=this.value.charCodeAt(e),i;if(i=t._table[n],typeof i=="number")return this.pos+=1,{type:i,pos:e,len:1};if(t.isDigitCharacter(n)){i=8;do r+=1,n=this.value.charCodeAt(e+r);while(t.isDigitCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}if(t.isVariableCharacter(n)){i=9;do n=this.value.charCodeAt(e+ ++r);while(t.isVariableCharacter(n)||t.isDigitCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}i=10;do r+=1,n=this.value.charCodeAt(e+r);while(!isNaN(n)&&typeof t._table[n]>"u"&&!t.isDigitCharacter(n)&&!t.isVariableCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}},vo=class{constructor(){this._children=[]}appendChild(e){return e instanceof Er&&this._children[this._children.length-1]instanceof Er?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,r){let{parent:n}=e,i=n.children.indexOf(e),o=n.children.slice(0);o.splice(i,1,...r),n._children=o,function a(l,p){for(let u of l)u.parent=p,a(u.children,u)}(r,n)}get children(){return this._children}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof Kh)return e;e=e.parent}}toString(){return this.children.reduce((e,r)=>e+r.toString(),"")}len(){return 0}},Er=class t extends vo{constructor(r){super();this.value=r}static escape(r){return r.replace(/\$|}|\\/g,"\\$&")}toString(){return this.value}toTextmateString(){return t.escape(this.value)}len(){return this.value.length}clone(){return new t(this.value)}},zh=class extends vo{},Wr=class t extends zh{constructor(r){super();this.index=r}static compareByIndex(r,n){return r.index===n.index?0:r.isFinalTabstop?1:n.isFinalTabstop||r.index<n.index?-1:r.index>n.index?1:0}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof Gh?this._children[0]:void 0}toTextmateString(){let r="";return this.transform&&(r=this.transform.toTextmateString()),this.children.length===0&&!this.transform?`$${this.index}`:this.children.length===0?`\${${this.index}${r}}`:this.choice?`\${${this.index}|${this.choice.toTextmateString()}|${r}}`:`\${${this.index}:${this.children.map(n=>n.toTextmateString()).join("")}${r}}`}clone(){let r=new t(this.index);return this.transform&&(r.transform=this.transform.clone()),r._children=this.children.map(n=>n.clone()),r}},Gh=class t extends vo{constructor(){super(...arguments);this.options=[]}appendChild(r){return r instanceof Er&&(r.parent=this,this.options.push(r)),this}toString(){return this.options[0].value}toTextmateString(){return this.options.map(r=>r.value.replace(/\||,|\\/g,"\\$&")).join(",")}len(){return this.options[0].len()}clone(){let r=new t;return this.options.forEach(r.appendChild,r),r}},kv=class t extends vo{constructor(){super(...arguments);this.regexp=new RegExp("")}resolve(r){let n=this,i=!1,o=r.replace(this.regexp,function(){return i=!0,n._replace(Array.prototype.slice.call(arguments,0,-2))});return!i&&this._children.some(a=>a instanceof Cn&&!!a.elseValue)&&(o=this._replace([])),o}_replace(r){let n="";for(let i of this._children)if(i instanceof Cn){let o=r[i.index]||"";o=i.resolve(o),n+=o}else n+=i.toString();return n}toString(){return""}toTextmateString(){return`/${this.regexp.source}/${this.children.map(r=>r.toTextmateString())}/${(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")}`}clone(){let r=new t;return r.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),r._children=this.children.map(n=>n.clone()),r}},Cn=class t extends vo{constructor(r,n,i,o){super();this.index=r;this.shorthandName=n;this.ifValue=i;this.elseValue=o}resolve(r){return this.shorthandName==="upcase"?r?r.toLocaleUpperCase():"":this.shorthandName==="downcase"?r?r.toLocaleLowerCase():"":this.shorthandName==="capitalize"?r?r[0].toLocaleUpperCase()+r.substr(1):"":this.shorthandName==="pascalcase"?r?this._toPascalCase(r):"":this.shorthandName==="camelcase"?r?this._toCamelCase(r):"":r&&typeof this.ifValue=="string"?this.ifValue:!r&&typeof this.elseValue=="string"?this.elseValue:r||""}_toPascalCase(r){let n=r.match(/[a-z0-9]+/gi);return n?n.map(i=>i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()).join(""):r}_toCamelCase(r){let n=r.match(/[a-z0-9]+/gi);return n?n.map((i,o)=>o===0?i.toLowerCase():i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()).join(""):r}toTextmateString(){let r="${";return r+=this.index,this.shorthandName?r+=`:/${this.shorthandName}`:this.ifValue&&this.elseValue?r+=`:?${this.ifValue}:${this.elseValue}`:this.ifValue?r+=`:+${this.ifValue}`:this.elseValue&&(r+=`:-${this.elseValue}`),r+="}",r}clone(){return new t(this.index,this.shorthandName,this.ifValue,this.elseValue)}},bo=class t extends zh{constructor(r){super();this.name=r}resolve(r){let n=r.resolve(this);return this.transform&&(n=this.transform.resolve(n||"")),n!==void 0?(this._children=[new Er(n)],!0):!1}toTextmateString(){let r="";return this.transform&&(r=this.transform.toTextmateString()),this.children.length===0?`\${${this.name}${r}}`:`\${${this.name}:${this.children.map(n=>n.toTextmateString()).join("")}${r}}`}clone(){let r=new t(this.name);return this.transform&&(r.transform=this.transform.clone()),r._children=this.children.map(n=>n.clone()),r}};function hI(t,e){let r=[...t];for(;r.length>0;){let n=r.shift();if(!e(n))break;r.unshift(...n.children)}}var Kh=class t extends vo{get placeholderInfo(){if(!this._placeholders){let e=[],r;this.walk(function(n){return n instanceof Wr&&(e.push(n),r=!r||r.index<n.index?n:r),!0}),this._placeholders={all:e,last:r}}return this._placeholders}get placeholders(){let{all:e}=this.placeholderInfo;return e}offset(e){let r=0,n=!1;return this.walk(i=>i===e?(n=!0,!1):(r+=i.len(),!0)),n?r:-1}fullLen(e){let r=0;return hI([e],n=>(r+=n.len(),!0)),r}enclosingPlaceholders(e){let r=[],{parent:n}=e;for(;n;)n instanceof Wr&&r.push(n),n=n.parent;return r}resolveVariables(e){return this.walk(r=>(r instanceof bo&&r.resolve(e)&&(this._placeholders=void 0),!0)),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,r){return this._placeholders=void 0,super.replace(e,r)}toTextmateString(){return this.children.reduce((e,r)=>e+r.toTextmateString(),"")}clone(){let e=new t;return this._children=this.children.map(r=>r.clone()),e}walk(e){hI(this.children,e)}},Za=class{constructor(){this._scanner=new Rv;this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}text(e){return this.parse(e).toString()}parse(e,r,n){this._scanner.text(e),this._token=this._scanner.next();let i=new Kh;for(;this._parse(i););let o=new Map,a=[],l=0;i.walk(p=>(p instanceof Wr&&(l+=1,p.isFinalTabstop?o.set(0,void 0):!o.has(p.index)&&p.children.length>0?o.set(p.index,p.children):a.push(p)),!0));for(let p of a){let u=o.get(p.index);if(u){let d=new Wr(p.index);d.transform=p.transform;for(let h of u)d.appendChild(h.clone());i.replace(p,[d])}}return n||(n=l>0&&r),!o.has(0)&&n&&i.appendChild(new Wr(0)),i}_accept(e,r){if(e===void 0||this._token.type===e){let n=r?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),n}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){let r=this._token;for(;this._token.type!==e;){if(this._token.type===14)return!1;if(this._token.type===5){let i=this._scanner.next();if(i.type!==0&&i.type!==4&&i.type!==5)return!1}this._token=this._scanner.next()}let n=this._scanner.value.substring(r.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),n}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let r;return(r=this._accept(5,!0))?(r=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||r,e.appendChild(new Er(r)),!0):!1}_parseTabstopOrVariableName(e){let r,n=this._token;return this._accept(0)&&(r=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(r)?new Wr(Number(r)):new bo(r)),!0):this._backTo(n)}_parseComplexPlaceholder(e){let r,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(r=this._accept(8,!0))))return this._backTo(n);let o=new Wr(Number(r));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new Er("${"+r+":")),o.children.forEach(e.appendChild,e),!0}else if(o.index>0&&this._accept(7)){let a=new Gh;for(;;){if(this._parseChoiceElement(a)){if(this._accept(2))continue;if(this._accept(7)&&(o.appendChild(a),this._accept(4)))return e.appendChild(o),!0}return this._backTo(n),!1}}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseChoiceElement(e){let r=this._token,n=[];for(;!(this._token.type===2||this._token.type===7);){let i;if((i=this._accept(5,!0))?i=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||i:i=this._accept(void 0,!0),!i)return this._backTo(r),!1;n.push(i)}return n.length===0?(this._backTo(r),!1):(e.appendChild(new Er(n.join(""))),!0)}_parseComplexVariable(e){let r,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(r=this._accept(9,!0))))return this._backTo(n);let o=new bo(r);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new Er("${"+r+":")),o.children.forEach(e.appendChild,e),!0}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseTransform(e){let r=new kv,n="",i="";for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(6,!0)||o,n+=o;continue}if(this._token.type!==14){n+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(5,!0)||this._accept(6,!0)||o,r.appendChild(new Er(o));continue}if(!(this._parseFormatString(r)||this._parseAnything(r)))return!1}for(;!this._accept(4);){if(this._token.type!==14){i+=this._accept(void 0,!0);continue}return!1}try{r.regexp=new RegExp(n,i)}catch{return!1}return e.transform=r,!0}_parseFormatString(e){let r=this._token;if(!this._accept(0))return!1;let n=!1;this._accept(3)&&(n=!0);let i=this._accept(8,!0);if(i)if(n){if(this._accept(4))return e.appendChild(new Cn(Number(i))),!0;if(!this._accept(1))return this._backTo(r),!1}else return e.appendChild(new Cn(Number(i))),!0;else return this._backTo(r),!1;if(this._accept(6)){let o=this._accept(9,!0);return!o||!this._accept(4)?(this._backTo(r),!1):(e.appendChild(new Cn(Number(i),o)),!0)}else if(this._accept(11)){let o=this._until(4);if(o)return e.appendChild(new Cn(Number(i),void 0,o,void 0)),!0}else if(this._accept(12)){let o=this._until(4);if(o)return e.appendChild(new Cn(Number(i),void 0,void 0,o)),!0}else if(this._accept(13)){let o=this._until(1);if(o){let a=this._until(4);if(a)return e.appendChild(new Cn(Number(i),void 0,o,a)),!0}}else{let o=this._until(4);if(o)return e.appendChild(new Cn(Number(i),void 0,void 0,o)),!0}return this._backTo(r),!1}_parseAnything(e){return this._token.type!==14?(e.appendChild(new Er(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}};var gI=Object.freeze({CURRENT_YEAR:!0,CURRENT_YEAR_SHORT:!0,CURRENT_MONTH:!0,CURRENT_DATE:!0,CURRENT_HOUR:!0,CURRENT_MINUTE:!0,CURRENT_SECOND:!0,CURRENT_DAY_NAME:!0,CURRENT_DAY_NAME_SHORT:!0,CURRENT_MONTH_NAME:!0,CURRENT_MONTH_NAME_SHORT:!0,CURRENT_SECONDS_UNIX:!0,SELECTION:!0,CLIPBOARD:!0,TM_SELECTED_TEXT:!0,TM_CURRENT_LINE:!0,TM_CURRENT_WORD:!0,TM_LINE_INDEX:!0,TM_LINE_NUMBER:!0,TM_FILENAME:!0,TM_FILENAME_BASE:!0,TM_DIRECTORY:!0,TM_FILEPATH:!0,RELATIVE_FILEPATH:!0,BLOCK_COMMENT_START:!0,BLOCK_COMMENT_END:!0,LINE_COMMENT:!0,WORKSPACE_NAME:!0,WORKSPACE_FOLDER:!0,RANDOM:!0,RANDOM_HEX:!0,UUID:!0});function Qh(t,e,r){let n=hQ(t)+1,i={};t.walk(o=>{if(o instanceof bo){if(o.name===e)o.name="TM_SELECTED_TEXT";else if(r!=null&&Object.prototype.hasOwnProperty.call(r,o.name))o.parent.replace(o,[new Er(r[o.name])]);else if(!gI[o.name]){let a;o.name in i?a=i[o.name]:(a=n++,i[o.name]=a);let l=new Wr(a);o.children.forEach(p=>l.appendChild(p)),o.parent.replace(o,[l])}}else o instanceof Wr&&o.index.toString()===e&&o.parent.replace(o,[new bo("TM_SELECTED_TEXT")]);return!0})}function hQ(t){let e=0;return t.walk(r=>(r instanceof Wr&&(e=Math.max(e,r.index)),!0)),e}function Zh(t,e,r){let n=e.map(o=>gQ(t,o,r)),i=n[0];if(!n.every(o=>o===i))throw new Error("Multiple snippet definitions match the given context");if(i===-1)throw new Error("Couldn't find matching snippet definition");return r[i]}function gQ(t,e,r){let n=e.editor.document.languageId;return r.findIndex(({scope:i})=>{if(i==null)return!0;let{langIds:o,scopeTypes:a,excludeDescendantScopeTypes:l}=i;if(o!=null&&!o.includes(n))return!1;if(a!=null){let p=a.concat(l??[]),u,d;for(let h of p)try{let g=t.create({type:"containingScope",scopeType:{type:h}}).run(e)[0];e.contentRange.isRangeEqual(g.contentRange)&&(g=t.create({type:"containingScope",scopeType:{type:h},ancestorIndex:1}).run(e)[0]),(u==null||u.contentRange.contains(g.contentRange))&&(u=g,d=h)}catch{continue}return d==null?!1:u!=null&&!(l??[]).includes(d)}return!0})}var zl=class{constructor(e,r,n,i){this.rangeUpdater=e;this.snippets=r;this.actions=n;this.modifierStageFactory=i;this.snippetParser=new Za;this.run=this.run.bind(this)}getFinalStages(e){let r=this.getScopeTypes(e);return r.length===0?[]:[new Fm(this.modifierStageFactory,{type:"cascading",modifiers:r.map(n=>({type:"containingScope",scopeType:n}))})]}getScopeTypes(e){if(e.type==="named"){let{name:r}=e,i=this.snippets.getSnippetStrict(r).insertionScopeTypes;return i==null?[]:i.map(o=>({type:o}))}else return e.scopeTypes??[]}getSnippetInfo(e,r){if(e.type==="named"){let{name:n}=e,i=this.snippets.getSnippetStrict(n),o=Zh(this.modifierStageFactory,r,i.definitions);return{body:o.body.join(`
`),formatSubstitutions(a){return a==null?void 0:yQ(i,o,a)}}}else return{body:e.body,formatSubstitutions(n){return n}}}async run(e,r){let n=D().getEditableTextEditor(wr(e));await this.actions.editNew.run(e);let{body:i,formatSubstitutions:o}=this.getSnippetInfo(r,n.selections.map(u=>new Pt({editor:n,contentRange:u,isReversed:!1,hasExplicitRange:!0}))),a=this.snippetParser.parse(i);Qh(a,null,o(r.substitutions));let l=a.toTextmateString(),{editorSelections:p}=await Fe({rangeUpdater:this.rangeUpdater,editor:n,callback:()=>n.insertSnippet(l),preserveCursorSelections:!0,selections:{editorSelections:{selections:n.selections,behavior:0}}});return{thatSelections:p.map(u=>({editor:n,selection:u}))}}};function yQ(t,e,r){return Object.fromEntries(Object.entries(r).map(([n,i])=>{let o=(e.variables??{})[n]?.formatter??(t.variables??{})[n]?.formatter;if(o==null)return[n,i];let a=uP[o];if(a==null)throw new Error(`Couldn't find formatter ${o} for variable ${n}`);return[n,a(i.split(" "))]}))}var Gl=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(ti)]}async run(e){return await Ne(D(),e.map(({thatTarget:n})=>n),"pendingModification0"),{thatSelections:Je(await rt(e,async(n,i)=>{let{thatRanges:o}=await Fe({rangeUpdater:this.rangeUpdater,editor:D().getEditableTextEditor(n),edits:xQ(n,i),selections:{thatRanges:i.map(({contentRange:a})=>a)}});return Go(i,o).map(([a,l])=>({editor:n,selection:l.toSelection(a.isReversed)}))}))}}};function xQ(t,e){let r=[];for(let n of e){let i=n.joinAs==="line"?SQ(n):TQ(n);r.push(...i)}return r}function TQ(t){let{editor:e,contentRange:r}=t,n=Sr(e.document.languageId).tokenMatcher,i=ln(n,e,r,"forward");return Array.from(FS(i)).map(([o,a])=>({range:new W(o.end,a.start),text:"",isReplace:!0}))}function SQ(t){let{document:e}=t.editor,r=t.contentRange,n=r.start.line,i=r.isSingleLine?Math.min(n+1,e.lineCount-1):r.end.line,o=wa(lA(n,i+1),a=>e.lineAt(a));return Array.from(FS(o)).map(([a,l])=>({range:new W(a.rangeTrimmed?.end??a.range.end,l.rangeTrimmed?.start??l.range.start),text:l.isEmptyOrWhitespace?"":" ",isReplace:!0}))}var Yh=class{constructor(e,r){this.rangeUpdater=e;this.actions=r;this.run=this.run.bind(this)}async run(e){let r=D().getEditableTextEditor(wr(e)),n=D().activeEditableTextEditor,i=async()=>{await this.actions.editNew.run(e)},{cursorSelections:o}=await Fe({rangeUpdater:this.rangeUpdater,editor:r,preserveCursorSelections:!0,callback:i,selections:{cursorSelections:r.selections}}),{originalCursorSelections:a,editorSelections:l}=await Fe({rangeUpdater:this.rangeUpdater,editor:r,callback:()=>r.clipboardPaste(),selections:{originalCursorSelections:o,editorSelections:{selections:r.selections,behavior:0}}});return await r.setSelections(a),n!=null&&!n.isActive&&await n.focus(),await D().flashRanges(l.map(p=>({editor:r,range:vt(p),style:"justAdded"}))),{thatSelections:l.map(p=>({editor:r,selection:p}))}}};var Xh=class{constructor(e){this.rangeUpdater=e;this.runForEditor=this.runForEditor.bind(this)}async run(e){let r=await D().clipboard.readText(),n=r.split(/\r?\n/g),i=e.length===n.length?Go(e,n).map(([a,l])=>({destination:a,text:l})):e.map(a=>({destination:a,text:r}));return{thatSelections:Je(await Ci(i,({destination:a})=>a.editor,this.runForEditor))}}async runForEditor(e,r){let n=r.map(({destination:a,text:l})=>a.constructChangeEdit(l)),{editSelections:i}=await Fe({rangeUpdater:this.rangeUpdater,editor:D().getEditableTextEditor(e),edits:n,selections:{editSelections:{selections:n.map(({range:a})=>a),behavior:0}}}),o=Go(n,i).map(([a,l])=>a.updateRange(l).toSelection(l.isReversed));return await D().flashRanges(o.map(a=>({editor:e,range:vt(a),style:"justAdded"}))),o.map(a=>({editor:e,selection:a}))}};var Jh=class{constructor(e,r){this.run=this.run.bind(this),this.runner=D().capabilities.commands.clipboardPaste!=null?new Yh(e,r):new Xh(e)}run(e){return this.runner.run(e)}};var Kl=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e,{showDecorations:r=!0}={}){return e=fh(e),r&&await Ne(D(),e,"pendingDelete",i=>i.getRemovalHighlightRange()),{thatTargets:Je(await rt(e,this.runForEditor))}}async runForEditor(e,r){let n=r.map(a=>a.constructRemovalEdit()),i=D().getEditableTextEditor(e),{editRanges:o}=await Fe({rangeUpdater:this.rangeUpdater,editor:i,edits:n,selections:{editRanges:n.map(({range:a})=>a)}});return St(r,o).map(([a,l])=>new po({editor:a.editor,isReversed:a.isReversed,contentRange:l}))}};var Ql=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}getTexts(e,r){if(Array.isArray(r))return r.length===1?Array(e.length).fill(r[0]):r;let n=[];for(let i=0;i<e.length;++i)n[i]=(r.start+i).toString();return n}async run(e,r){await Ne(D(),e.map(l=>l.target),"pendingModification0");let n=this.getTexts(e,r);if(e.length!==n.length)throw new Error("Targets and texts must have same length");let i=St(e,n).map(([l,p])=>({editor:l.editor,target:l.target,edit:l.constructChangeEdit(p)})),o=[],a=[];return await Ci(i,l=>l.editor,async(l,p)=>{let u=p.map(({edit:g})=>g),{contentSelections:d,editRanges:h}=await Fe({rangeUpdater:this.rangeUpdater,editor:D().getEditableTextEditor(l),edits:u,selections:{contentSelections:p.map(({target:g})=>g.contentSelection),editRanges:{selections:u.map(({range:g})=>g),behavior:0}}});for(let[g,x]of St(p,d))o.push(g.target.withContentRange(x));for(let[g,x]of St(p,h))a.push({editor:l,selection:g.edit.updateRange(x).toSelection(!1)})}),{sourceTargets:o,thatSelections:a}}};var Zl=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.getFinalStages=()=>[fv(this.modifierStageFactory)];this.run=this.run.bind(this)}async run(e,r,n){let i=e.flatMap(a=>{let l=a.getBoundary();if(l.length!==2)throw Error("Target must have an opening and closing delimiter");return l});await Ne(D(),i,"pendingModification0");let o=await rt(i,async(a,l)=>{let p=l.map((h,g)=>({editor:a,range:h.contentRange,text:g%2===0?r:n})),{sourceRanges:u,thatRanges:d}=await Fe({rangeUpdater:this.rangeUpdater,editor:D().getEditableTextEditor(a),edits:p,selections:{sourceRanges:e.map(h=>h.thatTarget.contentRange),thatRanges:e.map(h=>h.contentRange)}});return{sourceMark:mn(e,u),thatMark:mn(e,d)}});return{sourceSelections:o.flatMap(({sourceMark:a})=>a),thatSelections:o.flatMap(({thatMark:a})=>a)}}};var Yl=class{constructor(e){this.at=e;this.run=this.run.bind(this)}async run(e){let r=ol(e,a=>a.editor),n=Array.from(r,([a,l])=>({lineNumber:vQ(l,this.at),editor:a})),i=D().activeEditableTextEditor;for(let a of n)await D().getEditableTextEditor(a.editor).revealLine(a.lineNumber,this.at);i!=null&&!i.isActive&&await i.focus();let o=e.filter(a=>{let l=a.editor.visibleRanges,p=l[0].start.line,u=l[l.length-1].end.line;return a.contentRange.start.line>p||a.contentRange.end.line<u||a.contentRange.start.line===p&&a.contentRange.end.line===u});return await D().flashRanges(o.map(a=>({editor:a.editor,range:sn(a.contentRange),style:"referenced"}))),{thatTargets:e}}},eg=class extends Yl{constructor(){super("top")}},tg=class extends Yl{constructor(){super("center")}},rg=class extends Yl{constructor(){super("bottom")}};function vQ(t,e){let r=Number.MAX_SAFE_INTEGER,n=0;return t.forEach(i=>{r=Math.min(r,i.contentRange.start.line),n=Math.max(n,i.contentRange.end.line)}),e==="top"?r:e==="bottom"?n:Math.floor((r+n)/2)}var Ya=class{constructor(){this.run=this.run.bind(this)}getSelection(e){return e.contentSelection}async run(e){let r=wr(e),n=e.map(this.getSelection);return await D().getEditableTextEditor(r).setSelections(n,{focusEditor:!0}),{thatTargets:e}}},ng=class extends Ya{getSelection(e){return new Te(e.contentRange.start,e.contentRange.start)}},ig=class extends Ya{getSelection(e){return new Te(e.contentRange.end,e.contentRange.end)}};var Xl=class{constructor(e){this.key=e;this.noAutomaticTokenExpansion=!0;this.run=this.run.bind(this)}async run(e){return{thatTargets:e,[`${this.key}Targets`]:e}}};var Jl=class{constructor(e){this.treeSitter=e;this.run=this.run.bind(this)}async run(e){await Ne(D(),e,"referenced");let r=["# Cursorless parse tree"];for(let n of e){let{editor:i,contentRange:o}=n,a=this.treeSitter.getTree(i.document);r.push(bQ(i.document,a,o))}return D().openUntitledTextDocument({language:"markdown",content:r.join(`

`)}),{thatTargets:e}}};function bQ(t,e,r){let n=[],i=[];return yI(n,i,r,e.walk(),0),[`## ${t.filename} [${r}]
`,`\`\`\`${t.languageId}`,t.getText(r),"```","","```scm",...i,"```","","```js",...n,"```",""].join(`
`)}function yI(t,e,r,n,i){for(;;){let o=new W(n.startPosition.row,n.startPosition.column,n.endPosition.row,n.endPosition.column);if(r.intersection(o)!=null){let a="  ".repeat(i),l=wQ(n),p=a+l;if(n.nodeIsNamed)t.push(`${p}${n.nodeType} [${o}]`),e.push(`${p}(${n.nodeType}`),n.gotoFirstChild()?(yI(t,e,r,n,i+1),n.gotoParent(),e.push(`${a})`)):e[e.length-1]+=")";else{let u=`"${n.nodeType}"`;t.push(`${p}${u} [${o}]`),e.push(`${p}${u}`)}}if(!n.gotoNextSibling())return}}function wQ(t){let e=t.currentFieldName;return e!=null?`${e}: `:""}var og=class{constructor(e,r){this.rangeUpdater=e;this.isIndent=r;this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e){return this.hasCapability()?this.runSimpleCommandAction(e):(await Ne(D(),e,"pendingModification0"),{thatTargets:Je(await rt(e,this.runForEditor))})}hasCapability(){return this.isIndent?D().capabilities.commands.indentLine!=null:D().capabilities.commands.outdentLine!=null}runSimpleCommandAction(e){return(this.isIndent?new xh(this.rangeUpdater):new Th(this.rangeUpdater)).run(e)}async runForEditor(e,r){let n=this.isIndent?_Q(e,r):EQ(e,r),{targetSelections:i}=await Fe({rangeUpdater:this.rangeUpdater,editor:D().getEditableTextEditor(e),edits:n,selections:{targetSelections:r.map(({contentSelection:o})=>o)}});return St(r,i).map(([o,a])=>za({editor:e,selection:a.toSelection(o.isReversed)}))}},sg=class extends og{constructor(e){super(e,!0)}},ag=class extends og{constructor(e){super(e,!1)}};function _Q(t,e){let{document:r}=t,n=xI(e),i=RQ(t);return n.map(o=>({range:r.lineAt(o).range.start.toEmptyRange(),text:i}))}function EQ(t,e){let{document:r}=t,n=xI(e),i=kQ(t);return n.map(o=>{let a=r.lineAt(o),l=a.text.match(i),{start:p}=a.range,u=p.translate(void 0,l?.[0].length);return{range:new W(p,u),text:""}})}function xI(t){let e=new Set;for(let r of t){let{start:n,end:i}=r.contentRange;for(let o=n.line;o<=i.line;++o)e.add(o)}return[...e]}function RQ(t){if(t.options.insertSpaces){let e=TI(t);return" ".repeat(e)}return"	"}function kQ(t){if(t.options.insertSpaces){let e=TI(t);return new RegExp(`^[ ]{1,${e}}`)}return/^\t/}function TI(t){return typeof t.options.tabSize=="number"?t.options.tabSize:4}var ep=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){e.length<2&&Gc(D().messages,"tooFewTargets",'This action works on multiple targets, e.g. "sort every line block" instead of "sort block".');let r=e.slice().sort((a,l)=>a.contentRange.start.compareTo(l.contentRange.start)),{returnValue:n}=await this.actions.getText.run(r,{showDecorations:!1}),i=this.sortTexts(n),{thatSelections:o}=await this.actions.replace.run(r.map(a=>a.toDestination("to")),i);return{thatSelections:o}}},cg=class extends ep{sortTexts(e){return e.sort((r,n)=>r.localeCompare(n,void 0,{numeric:!0,caseFirst:"upper"}))}},lg=class extends ep{sortTexts(e){return e.reverse()}},pg=class extends ep{sortTexts(e){return mT(e)}};var tp=class{constructor(e){this.modifierStageFactory=e;this.getFinalStages=()=>[this.modifierStageFactory.create(ti)];this.run=this.run.bind(this)}async run(e){let r=e.map(({thatTarget:n})=>n);return await Ne(D(),r,"referenced"),await rt(e,async(n,i)=>{let o=i.map(a=>{let l=a.contentRange;return a.isLine?{type:"line",startLine:l.start.line,endLine:l.end.line}:{type:"inline",range:l}});await D().getEditableTextEditor(n).toggleBreakpoint(o)}),{thatTargets:e}}};var rp=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e,r,n){let i=await rt(e,async(o,a)=>{let l=a.map(w=>({start:new Te(w.contentRange.start,w.contentRange.start),end:new Te(w.contentRange.end,w.contentRange.end)})),p=l.flatMap(({start:w,end:C})=>[{text:r,range:w},{text:n,range:C,isReplace:!0}]),u=a.map(w=>w.contentSelection),{boundariesStartSelections:d,boundariesEndSelections:h,sourceSelections:g,thatSelections:x}=await Fe({rangeUpdater:this.rangeUpdater,editor:D().getEditableTextEditor(o),edits:p,selections:{boundariesStartSelections:{selections:l.map(({start:w})=>w),behavior:2},boundariesEndSelections:{selections:l.map(({end:w})=>w),behavior:3},sourceSelections:{selections:u,behavior:1},thatSelections:{selections:u,behavior:0}}}),_=[...d,...h];return await D().flashRanges(_.map(w=>({editor:o,range:vt(w),style:"justAdded"}))),{sourceMark:g.map(w=>({editor:o,selection:w})),thatMark:x.map(w=>({editor:o,selection:w}))}});return{sourceSelections:i.flatMap(({sourceMark:o})=>o),thatSelections:i.flatMap(({thatMark:o})=>o)}}};var np=class{constructor(e,r,n){this.rangeUpdater=e;this.snippets=r;this.modifierStageFactory=n;this.snippetParser=new Za;this.run=this.run.bind(this)}getFinalStages(e){let r=this.getScopeType(e);return r==null?[]:[new La(this.modifierStageFactory,{type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:r}})]}getScopeType(e){if(e.type==="named"){let{name:r,variableName:n}=e,a=(this.snippets.getSnippetStrict(r).variables??{})[n]?.wrapperScopeType;return a==null?void 0:{type:a}}else return e.scopeType}getBody(e,r){if(e.type==="named"){let{name:n}=e,i=this.snippets.getSnippetStrict(n);return Zh(this.modifierStageFactory,r,i.definitions).body.join(`
`)}else return e.body}async run(e,r){let n=D().getEditableTextEditor(wr(e)),i=this.getBody(r,e),o=this.snippetParser.parse(i);Qh(o,r.variableName);let a=o.toTextmateString();await Ne(D(),e,"pendingModification0");let l=e.map(d=>d.contentSelection),p=()=>n.insertSnippet(a,l),{targetSelections:u}=await Fe({rangeUpdater:this.rangeUpdater,editor:n,callback:p,preserveCursorSelections:!0,selections:{targetSelections:l}});return{thatSelections:u.map(d=>({editor:n,selection:d}))}}};var PQ=/-?\d+(\.\d+)?/g,ug=class{constructor(e,r){this.actions=e;this.isIncrement=r;this.run=this.run.bind(this)}async run(e){let r=[];return await Ci(e,n=>n.editor,async(n,i)=>{let o=await this.runOnEditor(n,i);r.push(...o)}),{thatSelections:r}}async runOnEditor(e,r){let{document:n}=e,i=[],o=[];for(let l of r){let p=n.offsetAt(l.contentRange.start),u=l.contentText,d=zc(u,PQ);for(let h of d)i.push(MQ(e,p,h)),o.push(AQ(this.isIncrement,h.text))}let{thatSelections:a}=await this.actions.replace.run(i,o);return a}},fg=class extends ug{constructor(e){super(e,!0)}},dg=class extends ug{constructor(e){super(e,!1)}};function MQ(t,e,r){return new He({editor:t,isReversed:!1,contentRange:new W(t.document.positionAt(e+r.index),t.document.positionAt(e+r.index+r.text.length))}).toDestination("to")}function AQ(t,e){return e.includes(".")?IQ(t,e).toString():DQ(t,e).toString()}function DQ(t,e){let r=parseInt(e),n=1;return r+(t?n:-n)}function IQ(t,e){let r=parseFloat(e),i=Math.abs(r)<=1?.1:1,o=r+(t?i:-i);return parseFloat(o.toPrecision(15))/1}var mg=class{constructor(e,r,n,i){this.treeSitter=e;this.snippets=r;this.rangeUpdater=n;this.modifierStageFactory=i;this.callAsFunction=new Ll(this);this.clearAndSetSelection=new Ul(this);this.copyToClipboard=new Ah(this,this.rangeUpdater);this.cutToClipboard=new Dh(this);this.decrement=new dg(this);this.deselect=new Vl;this.editNew=new Ih(this.rangeUpdater,this);this.editNewLineAfter=new Oh(this,this.modifierStageFactory);this.editNewLineBefore=new Ch(this,this.modifierStageFactory);this.executeCommand=new Bl(this.rangeUpdater);this.extractVariable=new Mh(this.rangeUpdater);this.findInDocument=new Lh(this);this.findInWorkspace=new Uh(this);this.foldRegion=new Sh(this.rangeUpdater);this.followLink=new Ka({openAside:!1});this.followLinkAside=new Ka({openAside:!0});this.generateSnippet=new Qa(this.snippets);this.getText=new $l;this.highlight=new jl;this.increment=new fg(this);this.indentLine=new sg(this.rangeUpdater);this.insertCopyAfter=new Hh(this.rangeUpdater,this.modifierStageFactory);this.insertCopyBefore=new Bh(this.rangeUpdater,this.modifierStageFactory);this.insertEmptyLineAfter=new jh(this.rangeUpdater,this.modifierStageFactory);this.insertEmptyLineBefore=new $h(this.rangeUpdater,this.modifierStageFactory);this.insertEmptyLinesAround=new Wh(this.rangeUpdater,this.modifierStageFactory);this.insertSnippet=new zl(this.rangeUpdater,this.snippets,this,this.modifierStageFactory);this.joinLines=new Gl(this.rangeUpdater,this.modifierStageFactory);this.breakLine=new uh(this.rangeUpdater);this.moveToTarget=new mh(this.rangeUpdater);this.outdentLine=new ag(this.rangeUpdater);this.pasteFromClipboard=new Jh(this.rangeUpdater,this);this.randomizeTargets=new pg(this);this.remove=new Kl(this.rangeUpdater);this.rename=new bh(this.rangeUpdater);this.replace=new Ql(this.rangeUpdater);this.replaceWithTarget=new dh(this.rangeUpdater);this.revealDefinition=new Eh(this.rangeUpdater);this.revealTypeDefinition=new Rh(this.rangeUpdater);this.reverseTargets=new lg(this);this.rewrapWithPairedDelimiter=new Zl(this.rangeUpdater,this.modifierStageFactory);this.scrollToBottom=new rg;this.scrollToCenter=new tg;this.scrollToTop=new eg;this["private.setKeyboardTarget"]=new Xl("keyboard");this["experimental.setInstanceReference"]=new Xl("instanceReference");this.setSelection=new Ya;this.setSelectionAfter=new ig;this.setSelectionBefore=new ng;this.showDebugHover=new Ph(this.rangeUpdater);this.showHover=new kh(this.rangeUpdater);this.showQuickFix=new _h(this.rangeUpdater);this.showReferences=new wh(this.rangeUpdater);this.sortTargets=new cg(this);this.swapTargets=new hh(this.rangeUpdater);this.toggleLineBreakpoint=new tp(this.modifierStageFactory);this.toggleLineComment=new yh(this.rangeUpdater);this.unfoldRegion=new vh(this.rangeUpdater);this.wrapWithPairedDelimiter=new rp(this.rangeUpdater);this.wrapWithSnippet=new np(this.rangeUpdater,this.snippets,this.modifierStageFactory);this["private.showParseTree"]=new Jl(this.treeSitter);this["private.getTargets"]=new Wl}};async function SI(t,e,r){let n=await t.getFocusedElementType();if(n==null||n==="textEditor")return null;let i=r.action;switch(i.name){case"replace":return hg(i.destination)&&Array.isArray(i.replaceWith)?{action:"insert",modifiers:gg(i.destination),text:i.replaceWith.join(`
`)}:null;case"replaceWithTarget":return hg(i.destination)?{action:"insert",modifiers:gg(i.destination),text:await Pv(e,i.source)}:null;case"moveToTarget":if(hg(i.destination)){let o=await Pv(e,i.source);return await FQ(e,i.source),{action:"insert",modifiers:gg(i.destination),text:o}}return null;case"callAsFunction":return yg(i.argument)?{action:i.name,modifiers:xg(i.argument),callee:await Pv(e,i.callee)}:null;case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return yg(i.target)?{action:i.name,modifiers:xg(i.target),left:i.left,right:i.right}:null;case"pasteFromClipboard":return hg(i.destination)?{action:i.name,modifiers:gg(i.destination)}:null;case"swapTargets":case"editNew":case"insertSnippet":case"generateSnippet":case"wrapWithSnippet":case"parsed":return null;default:return yg(i.target)?{action:i.name,modifiers:xg(i.target)}:null}}function hg(t){return t.type==="implicit"?!0:t.type==="primitive"?t.insertionMode==="to"&&yg(t.target):!1}function yg(t){return t.type==="implicit"?!0:t.type==="primitive"?t.mark==null||t.mark.type==="cursor":!1}function gg(t){return t.type==="primitive"?xg(t.target):[]}function xg(t){if(t.type==="primitive"){if(t.modifiers!=null&&t.modifiers.length>0)return t.modifiers;if(t.mark?.type==="cursor")return[{type:"containingTokenIfEmpty"}]}return[]}async function Pv(t,e){return(await t({name:"getText",target:e})).returnValue.join(`
`)}async function FQ(t,e){await t({name:"remove",target:e})}function vI(t,e){let{anchor:r,rangeType:n,active:i}=t;if(r.type!=="primitive"||n!=="continuous")return t;let o=r.modifiers.map((a,l)=>[a,l]);for(let[a,l]of o.reverse())for(let p of CQ){let u=p.accept(a);if(u.accepted){let[d,h]=[r.modifiers.slice(0,l+1),r.modifiers.slice(l+1)],g={...t,anchor:h.length===0&&e?{type:"implicit"}:{type:"primitive",mark:r.mark,modifiers:h},active:Lf(i,x=>{x.modifiers=x.modifiers.slice(Vc(x.modifiers,_=>p.accept(_).accepted)+1)})};return g=u.transformTarget?.(g)??g,{type:"primitive",mark:{type:"target",target:g},modifiers:d}}}return t}var CQ=[{accept(t){return t.type==="everyScope"&&t.scopeType.type!=="instance"?{accepted:!0,transformTarget(e){return{...e,exclusionScopeType:t.scopeType}}}:{accepted:!1}}},{accept(t){return{accepted:(t.type==="everyScope"||t.type==="relativeScope"||t.type==="ordinalScope")&&t.scopeType.type==="instance"}}}];function Av(t,e){switch(t.type){case"list":return OQ(t,e);case"range":return bI(t,e);case"primitive":return Tg(t,e);case"implicit":return t}}function OQ(t,e){return{...t,elements:t.elements.map((r,n)=>{let i=e.concat(t.elements.slice(0,n));switch(r.type){case"range":return bI(r,i);case"primitive":return Tg(r,i)}})}}function bI(t,e){let r=NQ(t,e),n=t.anchor.type==="implicit"||t.anchor.mark==null;return vI(r,n)}function NQ(t,e){return{type:"range",rangeType:t.rangeType??"continuous",excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1,anchor:t.anchor.type==="implicit"?t.anchor:Tg(t.anchor,e),active:Tg(t.active,e.concat(t.anchor))}}function Tg(t,e){let r=Mv(t.mark??(LQ(t)?BQ(e):null)??{type:"cursor"}),n=wI(t)??HQ(e)??WQ(e)??[];return{type:t.type,mark:r,modifiers:n}}function LQ(t){return t.modifiers?.some(e=>e.type==="inferPreviousMark")??!1}function wI(t){let e=t.modifiers?.filter(r=>r.type!=="inferPreviousMark")??[];return e.length!==0?e:void 0}function UQ(t){if(VQ(t))return[{type:"containingScope",scopeType:{type:"line"}}]}function VQ(t){let e=r=>r?.type==="lineNumber";return e(t.mark)?!0:t.mark?.type==="range"?e(t.mark.anchor)&&e(t.mark.active):!1}function BQ(t){return ip(t,e=>e.mark)}function HQ(t){return ip(t,wI)}function WQ(t){return ip(t,UQ)}function ip(t,e){for(let r=t.length-1;r>-1;--r){let n=t[r];switch(n.type){case"primitive":{let i=e(n);if(i!=null)return i;break}case"range":{let i=ip([n.anchor],e);if(i!=null)return i;break}case"list":{let i=ip(n.elements,e);if(i!=null)return i;break}}}}function Mv(t){switch(t.type){case"range":return{...t,anchor:Mv(t.anchor),active:Mv(t.active)};case"target":return{type:"target",target:Av(t.target,[])};default:return t}}var Sg=class{constructor(e,r,n,i,o){this.commandServerApi=e;this.debug=r;this.storedTargets=n;this.pipelineRunner=i;this.actions=o;this.finalStages=[];this.runAction=this.runAction.bind(this),this.inferenceContext=new Dv(this.debug)}async run(e){if(zo(e)){let u=await SI(this.commandServerApi,this.runAction,e);if(u!=null)return{fallback:u}}let{returnValue:r,thatSelections:n,thatTargets:i,sourceSelections:o,sourceTargets:a,instanceReferenceTargets:l,keyboardTargets:p}=await this.runAction(e.action);return this.storedTargets.set("that",_I(i,n)),this.storedTargets.set("source",_I(a,o)),this.storedTargets.set("instanceReference",l),this.storedTargets.set("keyboard",p,{history:!0}),{returnValue:r}}runAction(e){switch(this.inferenceContext.reset(),this.finalStages=[],e.name){case"replaceWithTarget":return this.actions.replaceWithTarget.run(this.getTargets(e.source),this.getDestinations(e.destination));case"moveToTarget":return this.actions.moveToTarget.run(this.getTargets(e.source),this.getDestinations(e.destination));case"swapTargets":return this.actions.swapTargets.run(this.getTargets(e.target1),this.getTargets(e.target2));case"callAsFunction":return this.actions.callAsFunction.run(this.getTargets(e.callee),this.getTargets(e.argument));case"wrapWithPairedDelimiter":return this.actions.wrapWithPairedDelimiter.run(this.getTargets(e.target),e.left,e.right);case"rewrapWithPairedDelimiter":return this.finalStages=this.actions.rewrapWithPairedDelimiter.getFinalStages(),this.actions.rewrapWithPairedDelimiter.run(this.getTargets(e.target),e.left,e.right);case"pasteFromClipboard":return this.actions.pasteFromClipboard.run(this.getDestinations(e.destination));case"executeCommand":return this.actions.executeCommand.run(this.getTargets(e.target),e.commandId,e.options);case"replace":return this.actions.replace.run(this.getDestinations(e.destination),e.replaceWith);case"highlight":return this.actions.highlight.run(this.getTargets(e.target),e.highlightId);case"generateSnippet":return this.actions.generateSnippet.run(this.getTargets(e.target),e.snippetName);case"insertSnippet":return this.finalStages=this.actions.insertSnippet.getFinalStages(e.snippetDescription),this.actions.insertSnippet.run(this.getDestinations(e.destination),e.snippetDescription);case"wrapWithSnippet":return this.finalStages=this.actions.wrapWithSnippet.getFinalStages(e.snippetDescription),this.actions.wrapWithSnippet.run(this.getTargets(e.target),e.snippetDescription);case"editNew":return this.actions.editNew.run(this.getDestinations(e.destination));case"getText":return this.actions.getText.run(this.getTargets(e.target),e.options);case"parsed":return this.runAction(pd(e.content,e.arguments));default:{let r=this.actions[e.name];return this.finalStages=r.getFinalStages?.()??[],this.noAutomaticTokenExpansion=r.noAutomaticTokenExpansion??!1,r.run(this.getTargets(e.target))}}}getTargets(e){let r=this.inferenceContext.run(e);return this.pipelineRunner.run(r,{actionFinalStages:this.finalStages,noAutomaticTokenExpansion:this.noAutomaticTokenExpansion})}getDestinations(e){switch(e.type){case"list":return e.destinations.flatMap(r=>this.getDestinations(r));case"primitive":return this.getTargets(e.target).map(r=>r.toDestination(e.insertionMode));case"implicit":return this.getTargets({type:"implicit"}).map(r=>r.toDestination("to"))}}},Dv=class{constructor(e){this.debug=e;this.previousTargets=[]}run(e){let r=Av(e,this.previousTargets);return this.debug.active&&(this.debug.log("Full target:"),this.debug.log(JSON.stringify(r,null,2))),this.previousTargets.push(e),r}reset(){this.previousTargets=[]}};function _I(t,e){if(t!=null&&e!=null)throw Error("Actions may only return full targets or selections for that mark");return e!=null?e.map(za):t}var vg=class{constructor(e,r){this.readableHatMap=e;this.mark=r}run(){let e=this.readableHatMap.getToken(this.mark.symbolColor,this.mark.character);if(e==null)throw new Error(`Couldn't find mark ${this.mark.symbolColor} '${this.mark.character}'`);return[new Pt({editor:e.editor,contentRange:e.range,isReversed:!1,hasExplicitRange:!1})]}};var bg=class{constructor(e){this.mark=e}run(){let{editorId:e,range:{start:r,end:n}}=this.mark,i=D().visibleTextEditors.find(a=>a.id===e);if(i==null)throw new Error(`Couldn't find editor '${e}'`);let o=new W(r.line,r.character,n.line,n.character);return[new Pt({editor:i,contentRange:o,isReversed:!1,hasExplicitRange:!1})]}};var wg=class{constructor(e){this.mark=e}run(){let e=D().activeTextEditor;if(e==null)return[];let r=$Q(e,this.mark.lineNumberType,this.mark.lineNumber),n=e.document.lineAt(r).range;return[CS(e,!1,n)]}},$Q=(t,e,r)=>{switch(e){case"absolute":return r;case"relative":return t.selections[0].active.line+r;case"modulo100":{let i=t.visibleRanges[0].start.line,o=t.visibleRanges[t.visibleRanges.length-1].end.line,a=Math.floor(i/100)*100,l=[],p=[],u=a+r;for(;u<=o;)u>=i&&(t.visibleRanges.find(h=>u>=h.start.line&&u<=h.end.line)?l.push(u):p.push(u)),u+=100;if(l.length===1)return l[0];if(l.length+p.length>1)throw new Error("Multiple lines matching");if(p.length===1)return p[0];throw new Error("Line is not in viewport")}}};var _g=class{constructor(e){this.mark=e}run(){return[]}};var Eg=class{constructor(e,r){this.markStageFactory=e;this.mark=r}run(){let e=this.markStageFactory.create(this.mark.anchor),r=this.markStageFactory.create(this.mark.active),n=e.run(),i=r.run();if(n.length!==1||i.length!==1)throw new Error("Expected single anchor and active target");return[xo(n[0],i[0],this.mark.excludeAnchor,this.mark.excludeActive)]}};var Rg=class{constructor(e,r){this.storedTargets=e;this.key=r}run(){let e=this.storedTargets.get(this.key);if(e==null||e.length===0)throw Error(`No available ${this.key} marks`);return e}};var kg=class{constructor(e,r){this.targetPipelineRunner=e;this.mark=r}run(){return this.targetPipelineRunner.run(this.mark.target)}};var Pg=class{constructor(e,r){this.readableHatMap=e;this.storedTargets=r;this.create=this.create.bind(this)}setPipelineRunner(e){this.targetPipelineRunner=e}create(e){switch(e.type){case"cursor":return new Sa;case"that":case"source":case"keyboard":return new Rg(this.storedTargets,e.type);case"decoratedSymbol":return new vg(this.readableHatMap,e);case"lineNumber":return new wg(e);case"range":return new Eg(this,e);case"nothing":return new _g(e);case"target":return new kg(this.targetPipelineRunner,e);case"explicit":return new bg(e)}}};async function EI(t,e,r,n,i,o,a,l,p,u){r.active&&(r.log("command:"),r.log(JSON.stringify(u,null,2)));let d=gS(u),h=await n.getReadableMap(d.usePrePhraseSnapshot),g=qQ(t,e,a,r,o,h,i,l);for(let _ of p)g=_.wrapCommandRunner(h,g);let x=await g.run(d);return await jQ(u,x)}async function jQ(t,e){if(zo(t))return e;if("returnValue"in e)return e.returnValue}function qQ(t,e,r,n,i,o,a,l){let p=new qa(r,i,new ka(r)),u=new Pg(o,i),d=new Hm(p,u);return u.setPipelineRunner(d),new Sg(e,n,i,d,new mg(t,a,l,p))}var RI=["clojure","css","latex","ruby","rust","scala","scss"];async function kI(t,e){await zQ(t,e)}async function zQ(t,e){let r=[];for(let n of RI)await t.loadLanguage(n),await e.loadLanguage(n),wi(Ol[n]??{}).map(i=>{e.get(n)?.getScopeHandler({type:i})!=null&&r.push(`Scope '${i}' defined as both legacy and new for language ${n}`)});if(r.length>0)throw Error(r.join(`
`))}function PI(t){return sP(t)?nl(t.type).replace("."," "):t.type==="surroundingPair"?`Matching pair of ${nl(t.delimiter)}`:t.type==="customRegex"?`Regex \`${t.regex}\``:"Unknown scope type"}var Mg=class{constructor(e){this.customSpokenFormGenerator=e;this.listeners=[];this.disposable=e.onDidChangeCustomSpokenForms(()=>this.onChange()),this.onDidChangeScopeInfo=this.onDidChangeScopeInfo.bind(this),this.getScopeTypeInfo=this.getScopeTypeInfo.bind(this),this.updateScopeTypeInfos()}onDidChangeScopeInfo(e){return e(this.getScopeTypeInfos()),this.listeners.push(e),{dispose:()=>{er(this.listeners,e)}}}async onChange(){this.updateScopeTypeInfos(),this.listeners.forEach(e=>e(this.scopeInfos))}updateScopeTypeInfos(){let e=[...qo.filter(r=>r!=="instance").map(r=>({type:r})),...Pf.map(r=>({type:"surroundingPair",delimiter:r})),...this.customSpokenFormGenerator.getCustomRegexScopeTypes()];this.scopeInfos=e.map(r=>this.getScopeTypeInfo(r))}getScopeTypeInfos(){return this.scopeInfos}getScopeTypeInfo(e){return{scopeType:e,spokenForm:this.customSpokenFormGenerator.scopeTypeToSpokenForm(e),humanReadableName:PI(e),isLanguageSpecific:GQ(e)}}dispose(){this.disposable.dispose()}};function GQ(t){switch(t.type){case"string":case"argumentOrParameter":case"anonymousFunction":case"attribute":case"branch":case"class":case"className":case"collectionItem":case"collectionKey":case"command":case"comment":case"private.fieldAccess":case"functionCall":case"functionCallee":case"functionName":case"ifStatement":case"instance":case"list":case"map":case"name":case"namedFunction":case"regularExpression":case"statement":case"type":case"value":case"condition":case"section":case"sectionLevelOne":case"sectionLevelTwo":case"sectionLevelThree":case"sectionLevelFour":case"sectionLevelFive":case"sectionLevelSix":case"selector":case"private.switchStatementSubject":case"unit":case"xmlBothTags":case"xmlElement":case"xmlEndTag":case"xmlStartTag":case"part":case"chapter":case"subSection":case"subSubSection":case"namedParagraph":case"subParagraph":case"environment":case"textFragment":case"disqualifyDelimiter":return!0;case"character":case"word":case"token":case"identifier":case"line":case"sentence":case"paragraph":case"boundedParagraph":case"document":case"nonWhitespaceSequence":case"boundedNonWhitespaceSequence":case"url":case"notebookCell":case"surroundingPair":case"surroundingPairInterior":case"customRegex":case"glyph":return!1;case"oneOf":throw Error(`Can't decide whether scope type ${JSON.stringify(t,void 0,3)} is language-specific`)}}function Iv(t,e,r){if(!r)return t.document.range;let n=t.visibleRanges.reduce((a,l)=>a.union(l));n=t.document.range.intersection(n.with(n.start.translate(-10),n.end.translate(10)));let i=af(Array.from(e.generateScopes(t,n.start,"forward",{containment:"required"})))?.domain??n,o=af(Array.from(e.generateScopes(t,n.end,"forward",{containment:"required"})))?.domain??n;return i.union(o)}function ys(t){return{contentRange:t.contentRange,removalRange:t.getRemovalRange(),removalHighlightRange:t.isLine?sn(t.getRemovalHighlightRange()):vt(t.getRemovalHighlightRange()),leadingDelimiter:MI(t.getLeadingDelimiterTarget()),trailingDelimiter:MI(t.getTrailingDelimiterTarget()),interior:t.getInterior()?.map(ys),boundary:t.getBoundary()?.map(ys),insertionDelimiter:t.insertionDelimiter}}function MI(t){return t!=null?ys(t):void 0}function AI(t,e,r,n,i){return wa(e.generateScopes(t,n.start,"forward",{includeDescendantScopes:!0,distalPosition:n.end}),o=>({domain:o.domain,ranges:o.getTargets(!1).map(a=>({range:a.contentRange,targets:i?KQ(r,a).map(ys):void 0}))}))}function KQ(t,e){try{return t.run(e)}catch(r){if(r.name==="NoContainingScopeError")return[];throw r}}function DI(t,e,r){return wa(e.generateScopes(t,r.start,"forward",{includeDescendantScopes:!0,distalPosition:r.end}),n=>({domain:n.domain,targets:n.getTargets(!1).map(ys)}))}var Ag=class{constructor(e,r){this.scopeHandlerFactory=e;this.modifierStageFactory=r;this.provideScopeRanges=this.provideScopeRanges.bind(this),this.provideIterationScopeRanges=this.provideIterationScopeRanges.bind(this)}provideScopeRanges(e,{scopeType:r,visibleOnly:n}){let i=this.scopeHandlerFactory.create(r,e.document.languageId);return i==null?[]:DI(e,i,Iv(e,i,n))}provideIterationScopeRanges(e,{scopeType:r,visibleOnly:n,includeNestedTargets:i}){let{languageId:o}=e.document,a=this.scopeHandlerFactory.create(r,o);if(a==null)return[];let l=this.scopeHandlerFactory.create(a.iterationScopeType,o);return l==null?[]:AI(e,l,this.modifierStageFactory.create({type:"everyScope",scopeType:r}),Iv(e,a,n),i)}};var Dg=class{constructor(e,r){this.scopeRangeProvider=r;this.disposables=[];this.listeners=[];this.onChange=this.onChange.bind(this),this.onDidChangeScopeRanges=this.onDidChangeScopeRanges.bind(this),this.onDidChangeIterationScopeRanges=this.onDidChangeIterationScopeRanges.bind(this);let n=new Qn(D().configuration,()=>this.onChange());this.disposables.push(D().onDidChangeVisibleTextEditors(n.run),D().onDidOpenTextDocument(n.run),D().onDidCloseTextDocument(n.run),D().onDidChangeTextDocument(n.run),D().onDidChangeTextEditorVisibleRanges(n.run),e.onDidChangeDefinition(this.onChange),n)}onDidChangeScopeRanges(e,r){let n=()=>{D().visibleTextEditors.forEach(i=>{let o;try{o=this.scopeRangeProvider.provideScopeRanges(i,r)}catch(a){if(it(D().messages,"ScopeRangeWatcher.provide",a.message),o=[],D().runMode==="test")throw a}e(i,o)})};return this.listeners.push(n),n(),{dispose:()=>{er(this.listeners,n)}}}onDidChangeIterationScopeRanges(e,r){let n=()=>{D().visibleTextEditors.forEach(i=>{e(i,this.scopeRangeProvider.provideIterationScopeRanges(i,r))})};return this.listeners.push(n),n(),{dispose:()=>{er(this.listeners,n)}}}onChange(){this.listeners.forEach(e=>e())}dispose(){this.disposables.forEach(({dispose:e})=>{try{e()}catch{}})}};var Ig=class{constructor(e){this.scopeHandlerFactory=e;this.getScopeSupport=this.getScopeSupport.bind(this),this.getIterationScopeSupport=this.getIterationScopeSupport.bind(this)}getScopeSupport(e,r){let{languageId:n}=e.document,i=this.scopeHandlerFactory.create(r,n);return i==null?FI(n,r):II(e,i)?0:1}getIterationScopeSupport(e,r){let{languageId:n}=e.document,i=this.scopeHandlerFactory.create(r,n);if(i==null)return FI(n,r);let o=this.scopeHandlerFactory.create(i.iterationScopeType,n);return o==null?3:II(e,o)?0:1}};function II(t,e){return!lP(e.generateScopes(t,new ce(0,0),"forward"))}function FI(t,e){switch(e.type){case"boundedNonWhitespaceSequence":case"surroundingPair":return 2;case"notebookCell":return 3;default:return Ol[t]?.[e.type]!=null?2:3}}var Fg=class{constructor(e,r,n){this.scopeSupportChecker=r;this.scopeInfoProvider=n;this.listeners=[];this.onChange=this.onChange.bind(this),this.onDidChangeScopeSupport=this.onDidChangeScopeSupport.bind(this);let i=new Qn(D().configuration,()=>this.onChange());this.disposable=cP(D().onDidOpenTextDocument(i.run),D().onDidCloseTextDocument(i.run),D().onDidChangeActiveTextEditor(i.run),D().onDidChangeTextDocument(i.run),e.onDidChangeDefinition(i.run),this.scopeInfoProvider.onDidChangeScopeInfo(this.onChange),i)}onDidChangeScopeSupport(e){return e(this.getSupportLevels()),this.listeners.push(e),{dispose:()=>{er(this.listeners,e)}}}onChange(){if(this.listeners.length===0)return;let e=this.getSupportLevels();this.listeners.forEach(r=>r(e))}getSupportLevels(){let e=D().activeTextEditor,r=e==null?()=>3:o=>this.scopeSupportChecker.getScopeSupport(e,o),n=e==null?()=>3:o=>this.scopeSupportChecker.getIterationScopeSupport(e,o);return this.scopeInfoProvider.getScopeTypeInfos().map(o=>({...o,support:r(o.scopeType),iterationScopeSupport:n(o.scopeType)}))}dispose(){this.disposable.dispose()}};async function CI({ide:t,hats:e,treeSitterQueryProvider:r,treeSitter:n=new qd,commandServerApi:i=new Bd,talonSpokenForms:o=new jd,snippets:a=new $d}){hd(t);let l=new Fd(t),p=new Vd,u=new yd,d=new Id(t,u),h=new Kd(o),g=e!=null?new Ld(p,l,e,i):new Hd;g.allocateHats();let x=r?await Dm.create(t,n,r):new Wd;t.disposeOnExit(p,x,g,l,d);let _=[],w,C=M=>(w=M,EI(n,i,l,g,a,u,x,p,_,M));return{commandApi:{runCommand(M){return C(M)},runCommandSafe(...M){return C(Mf(M))},repeatPreviousCommand(){if(w==null)throw new Error("No previous command");return C(w)}},scopeProvider:ZQ(x,u,h),customSpokenFormGenerator:h,storedTargets:u,hatTokenMap:g,injectIde:hd,runIntegrationTests:()=>kI(n,x),addCommandRunnerDecorator:M=>{_.push(M)}}}function ZQ(t,e,r){let n=new ka(t),i=new Ag(n,new qa(t,e,n)),o=new Dg(t,i),a=new Ig(n),l=new Mg(r),p=new Fg(t,a,l);return{provideScopeRanges:i.provideScopeRanges,provideIterationScopeRanges:i.provideIterationScopeRanges,onDidChangeScopeRanges:o.onDidChangeScopeRanges,onDidChangeIterationScopeRanges:o.onDidChangeIterationScopeRanges,getScopeSupport:a.getScopeSupport,getIterationScopeSupport:a.getIterationScopeSupport,onDidChangeScopeSupport:p.onDidChangeScopeSupport,getScopeInfo:l.getScopeTypeInfo,onDidChangeScopeInfo:l.onDidChangeScopeInfo}}function OI(t,e){switch(e.type){case"UntypedTarget":return new Pt({editor:t,isReversed:e.isReversed,contentRange:Tf(e.contentRange),hasExplicitRange:e.hasExplicitRange});case"LineTarget":return new Vr({editor:t,isReversed:e.isReversed,contentRange:Tf(e.contentRange)});default:throw Error(`Unsupported target type ${e.type}`)}}var TOe=Symbol("unused");var op=class{constructor(e){this.position=e}},SOe={$0:new op(0),$1:new op(1),$2:new op(2)};var NI=require("node:events"),Cg=class{constructor(){this.apis=new Map,this.commands=new Map,this.eventEmitter=new NI.EventEmitter}registerExtensionApi(e,r){this.apis.set(e,r)}getExtensionApi(e){return this.apis.get(e)}registerCommand(e,r){this.commands.set(e,r)}async executeCommand(e,...r){return await this.commands.get(e)(...r)}onEvent(e,r){return this.eventEmitter.on(e,r)}emitEvent(e,...r){return this.eventEmitter.emit(e,...r)}};function $r(){return global._neovimRegistry==null&&(global._neovimRegistry=new Cg),global._neovimRegistry}var LI="pokey.cursorless";async function Og(t,e){let r='return require("cursorless").buffer_get_selection()',[n,i,o,a,l]=await e.executeLua(r,[]),p;return l===!0?p=[new Te(new ce(o-1,a-1),new ce(n-1,i-1))]:p=[new Te(new ce(n-1,i-1),new ce(o-1,a-1))],console.debug(`bufferGetSelections(): selections=(${p[0].start.line}, ${p[0].start.character}), (${p[0].end.line}, ${p[0].end.character}) neovim=(${n},${i}),(${o},${a}),reverse=${l}`),p}async function UI(t,e){if(e.length!==1)throw new Error("bufferSetSelections() only supports one selection");let r=`return require("cursorless").select_range(${e[0].start.line+1}, ${e[0].start.character}, ${e[0].end.line+1}, ${e[0].end.character})`;console.debug(`bufferSetSelections() selections=(${e[0].start.line},${e[0].start.character}),(${e[0].end.line},${e[0].end.character}) luaCode="${r}"`),await t.executeLua(r,[])}async function VI(t,e,r){let n='return require("cursorless").window_get_visible_lines()',[i,o]=await e.executeLua(n,[]),a=new W(new ce(i-1,0),new ce(o-1,r[o-1].length-1));return console.debug(`windowGetVisibleRanges(): range=(${a.start.line}, ${a.start.character}), (${a.end.line}, ${a.end.character})`),[a]}async function BI(t){return await t.executeLua('return require("cursorless.utils").cursorless_nvim_path()',[])}async function Ng(t,e){await e.callFunction("setreg",["*",t])}async function HI(t){return await t.callFunction("getreg",["*"])}async function WI(t){await t.executeLua('return require("cursorless.utils").paste()',[])}async function $I(t){await t.executeLua('return require("cursorless.utils").mode_switch_nt()',[])}async function jI(t){await t.executeLua('return require("cursorless.utils").mode_switch_t()',[])}async function qI(t,e){let r=`vim.notify("${e}")`;await t.executeLua(r,[])}var YQ={clipboardCopy:{acceptsLocation:!1},clipboardPaste:!0,toggleLineComment:void 0,indentLine:void 0,outdentLine:void 0,rename:void 0,quickFix:void 0,revealDefinition:void 0,revealTypeDefinition:void 0,showHover:void 0,showDebugHover:void 0,extractVariable:void 0,fold:void 0,highlight:{acceptsLocation:!0},unfold:void 0,showReferences:void 0,insertLineAfter:void 0},Lg=class{constructor(){this.commands=YQ}};var sp=class{constructor(e){this.client=e}async readText(){return await HI(this.client)}async writeText(e){return await Ng(e,this.client)}};var Ug=dr(Fv(),1);var cp=class{constructor(){this.notifier=new Wt;this.mocks={...df};this.scopes=[];this.onDidChangeConfiguration=this.notifier.registerListener;this.onDidChangeConfiguration=this.onDidChangeConfiguration.bind(this)}getOwnConfiguration(e,r){if(r!=null){for(let{scope:n,values:i}of this.scopes)if(XQ(n,r))return(0,Ug.get)(i,e)??(0,Ug.get)(this.mocks,e)}return(0,Ug.get)(this.mocks,e)}mockConfiguration(e,r){this.mocks[e]=r,this.notifier.notifyListeners()}mockConfigurationScope(e,r,n=!1){this.scopes.push({scope:e,values:r}),n||this.notifier.notifyListeners()}};function XQ(t,e){return t.languageId===e.languageId}async function Cv(t,e,r,n){console.debug("neovimEdit() [unsorted]:");for(let a of n)console.debug(`	range=${JSON.stringify(a.range)}, text='${a.text}', isReplace=${a.isReplace}`);n.sort((a,l)=>(zI(a)||GI(a))&&(zI(l)||GI(l))?1:a.range.start.line===l.range.start.line?l.range.start.character-a.range.start.character:l.range.start.line-a.range.start.line),console.debug("neovimEdit() [sorted]:");for(let a of n)console.debug(`	range=${JSON.stringify(a.range)}, text='${a.text}', isReplace=${a.isReplace}`);let i=e.getTextDocument(await t.window.buffer),o=[];for(let a of n)o.push({range:a.range,rangeOffset:i.offsetAt(a.range.start),rangeLength:i.offsetAt(a.range.end)-i.offsetAt(a.range.start),text:a.text});$r().emitEvent("onDidChangeTextDocument",{document:i,contentChanges:o});for(let a of n){let{range:l,text:p,isReplace:u}=a;p===""?await KI(t,l):l.isEmpty&&!u?await QI(t,l.start,p):await JQ(t,l,p)}return await e.updateTextEditor(),!0}async function KI(t,e){console.debug(`neovimDelete(): range=${JSON.stringify(e)}`);let r=await t.window.buffer,n=(await r.getLines({start:e.end.line,end:e.end.line+1,strictIndexing:!0}))[0],i=n.slice(e.end.character);if(e.start.line===e.end.line){let l=n.slice(0,e.start.character)+i;await r.setLines(l,{start:e.start.line,end:e.start.line+1,strictIndexing:!0});return}if(e.start.character===0){await r.setLines(i,{start:e.start.line,end:e.end.line+1,strictIndexing:!0});return}let o=(await r.getLines({start:e.start.line,end:e.start.line+1,strictIndexing:!0}))[0],a=o.slice(0,e.start.character);if(e.start.character<=o.length){await r.setLines(a+i,{start:e.start.line,end:e.end.line+1,strictIndexing:!0});return}await r.setLines([a,i],{start:e.start.line,end:e.end.line+1,strictIndexing:!0})}async function QI(t,e,r){console.debug(`neovimInsert(): position=${JSON.stringify(e)}, text='${r}'`);let n=r.replace(/(?:\r\n|\r|\n)/g,`
`).split(`
`),i=await t.window.buffer,o=(await i.getLines({start:e.line,end:e.line+1,strictIndexing:!0}))[0],a=o.slice(0,e.character),l=o.slice(e.character);if(n.length===1){let d=a+n[0]+l;await i.setLines(d,{start:e.line,end:e.line+1,strictIndexing:!0});return}let p=a+n[0],u=n[n.length-1]+l;await i.setLines([p,...n.slice(1,n.length-1),u],{start:e.line,end:e.line+1,strictIndexing:!0})}async function JQ(t,e,r){console.debug(`neovimReplace(): range=${JSON.stringify(e)}, text='${r}'`),await KI(t,e),await QI(t,e.start,r)}function zI(t){return t.range.isEmpty&&!t.isReplace}function GI(t){return t.text!==""&&!!(!t.range.isEmpty||t.isReplace)}function ZI(t){return $r().onEvent("onDidChangeTextDocument",t),XI()}function YI(t,e,r){return $r().onEvent("onDidOpenTextDocument",t),XI()}function XI(){return{dispose(){}}}var lp=class{constructor(){this.data={...mf}}get(e){return this.data[e]}set(e,r){return this.data[e]=r,Promise.resolve()}};var rC=dr(Fv(),1);var pp=class{async showMessage(e,r,n,...i){}};async function JI(t,e){let r=e.activeTextEditor,n=await t.window,i=await Og(n,t),o=r.document.getText(i[0]);await Ng(o,t)}async function eF(t,e){await WI(t)}var Vg=class{constructor(e,r,n,i,o,a,l){this.id=e;this.client=r;this.neovimIDE=n;this.window=i;this._document=o,this._selections=l,this._visibleRanges=a}get document(){return this._document}updateDocument(e,r,n,i){if(n)this._document=n;else if(i)this._document.update(i);else throw Error("updateDocument(): invalid arguments");return this._selections=r,this._visibleRanges=e,this._document}get selections(){return this._selections}async setSelections(e){this._selections=e,await UI(this.client,e)}get visibleRanges(){return this._visibleRanges}get options(){throw Error("get options Not implemented")}set options(e){throw Error("set options Not implemented")}get isActive(){return!0}isEqual(e){return this.id===e.id}async revealRange(e){}revealLine(e,r){throw Error("revealLine Not implemented")}async edit(e){return await Cv(this.client,this.neovimIDE,this.window,e)}focus(){return Promise.resolve()}editNewNotebookCellAbove(){throw Error("editNewNotebookCellAbove Not implemented")}editNewNotebookCellBelow(){throw Error("editNewNotebookCellBelow Not implemented")}openLink(e,r){throw Error("openLink Not implemented")}fold(e){throw Error("fold Not implemented")}unfold(e){throw Error("unfold Not implemented")}toggleBreakpoint(e){throw Error("toggleBreakpoint Not implemented")}async toggleLineComment(e){throw Error("toggleLineComment Not implemented")}async clipboardCopy(e){await JI(this.client,this.neovimIDE)}async clipboardPaste(){await eF(this.client,this.neovimIDE)}async indentLine(e){throw Error("indentLine Not implemented")}async outdentLine(e){throw Error("outdentLine Not implemented")}async insertLineAfter(e){throw Error("insertLineAfter Not implemented")}insertSnippet(e,r){throw Error("insertSnippet Not implemented")}async rename(e){throw Error("rename Not implemented")}async showReferences(e){throw Error("showReferences Not implemented")}async quickFix(e){throw Error("quickFix Not implemented")}async revealDefinition(e){throw Error("revealDefinition Not implemented")}async revealTypeDefinition(e){throw Error("revealTypeDefinition Not implemented")}async showHover(e){throw Error("showHover Not implemented")}async showDebugHover(e){throw Error("showDebugHover Not implemented")}async extractVariable(e){throw Error("extractVariable Not implemented")}};var tw=dr(require("path"),1);var tF;(()=>{"use strict";var t={470:i=>{function o(p){if(typeof p!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(p))}function a(p,u){for(var d,h="",g=0,x=-1,_=0,w=0;w<=p.length;++w){if(w<p.length)d=p.charCodeAt(w);else{if(d===47)break;d=47}if(d===47){if(!(x===w-1||_===1))if(x!==w-1&&_===2){if(h.length<2||g!==2||h.charCodeAt(h.length-1)!==46||h.charCodeAt(h.length-2)!==46){if(h.length>2){var C=h.lastIndexOf("/");if(C!==h.length-1){C===-1?(h="",g=0):g=(h=h.slice(0,C)).length-1-h.lastIndexOf("/"),x=w,_=0;continue}}else if(h.length===2||h.length===1){h="",g=0,x=w,_=0;continue}}u&&(h.length>0?h+="/..":h="..",g=2)}else h.length>0?h+="/"+p.slice(x+1,w):h=p.slice(x+1,w),g=w-x-1;x=w,_=0}else d===46&&_!==-1?++_:_=-1}return h}var l={resolve:function(){for(var p,u="",d=!1,h=arguments.length-1;h>=-1&&!d;h--){var g;h>=0?g=arguments[h]:(p===void 0&&(p=process.cwd()),g=p),o(g),g.length!==0&&(u=g+"/"+u,d=g.charCodeAt(0)===47)}return u=a(u,!d),d?u.length>0?"/"+u:"/":u.length>0?u:"."},normalize:function(p){if(o(p),p.length===0)return".";var u=p.charCodeAt(0)===47,d=p.charCodeAt(p.length-1)===47;return(p=a(p,!u)).length!==0||u||(p="."),p.length>0&&d&&(p+="/"),u?"/"+p:p},isAbsolute:function(p){return o(p),p.length>0&&p.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var p,u=0;u<arguments.length;++u){var d=arguments[u];o(d),d.length>0&&(p===void 0?p=d:p+="/"+d)}return p===void 0?".":l.normalize(p)},relative:function(p,u){if(o(p),o(u),p===u||(p=l.resolve(p))===(u=l.resolve(u)))return"";for(var d=1;d<p.length&&p.charCodeAt(d)===47;++d);for(var h=p.length,g=h-d,x=1;x<u.length&&u.charCodeAt(x)===47;++x);for(var _=u.length-x,w=g<_?g:_,C=-1,M=0;M<=w;++M){if(M===w){if(_>w){if(u.charCodeAt(x+M)===47)return u.slice(x+M+1);if(M===0)return u.slice(x+M)}else g>w&&(p.charCodeAt(d+M)===47?C=M:M===0&&(C=0));break}var U=p.charCodeAt(d+M);if(U!==u.charCodeAt(x+M))break;U===47&&(C=M)}var Z="";for(M=d+C+1;M<=h;++M)M!==h&&p.charCodeAt(M)!==47||(Z.length===0?Z+="..":Z+="/..");return Z.length>0?Z+u.slice(x+C):(x+=C,u.charCodeAt(x)===47&&++x,u.slice(x))},_makeLong:function(p){return p},dirname:function(p){if(o(p),p.length===0)return".";for(var u=p.charCodeAt(0),d=u===47,h=-1,g=!0,x=p.length-1;x>=1;--x)if((u=p.charCodeAt(x))===47){if(!g){h=x;break}}else g=!1;return h===-1?d?"/":".":d&&h===1?"//":p.slice(0,h)},basename:function(p,u){if(u!==void 0&&typeof u!="string")throw new TypeError('"ext" argument must be a string');o(p);var d,h=0,g=-1,x=!0;if(u!==void 0&&u.length>0&&u.length<=p.length){if(u.length===p.length&&u===p)return"";var _=u.length-1,w=-1;for(d=p.length-1;d>=0;--d){var C=p.charCodeAt(d);if(C===47){if(!x){h=d+1;break}}else w===-1&&(x=!1,w=d+1),_>=0&&(C===u.charCodeAt(_)?--_==-1&&(g=d):(_=-1,g=w))}return h===g?g=w:g===-1&&(g=p.length),p.slice(h,g)}for(d=p.length-1;d>=0;--d)if(p.charCodeAt(d)===47){if(!x){h=d+1;break}}else g===-1&&(x=!1,g=d+1);return g===-1?"":p.slice(h,g)},extname:function(p){o(p);for(var u=-1,d=0,h=-1,g=!0,x=0,_=p.length-1;_>=0;--_){var w=p.charCodeAt(_);if(w!==47)h===-1&&(g=!1,h=_+1),w===46?u===-1?u=_:x!==1&&(x=1):u!==-1&&(x=-1);else if(!g){d=_+1;break}}return u===-1||h===-1||x===0||x===1&&u===h-1&&u===d+1?"":p.slice(u,h)},format:function(p){if(p===null||typeof p!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof p);return function(u,d){var h=d.dir||d.root,g=d.base||(d.name||"")+(d.ext||"");return h?h===d.root?h+g:h+"/"+g:g}(0,p)},parse:function(p){o(p);var u={root:"",dir:"",base:"",ext:"",name:""};if(p.length===0)return u;var d,h=p.charCodeAt(0),g=h===47;g?(u.root="/",d=1):d=0;for(var x=-1,_=0,w=-1,C=!0,M=p.length-1,U=0;M>=d;--M)if((h=p.charCodeAt(M))!==47)w===-1&&(C=!1,w=M+1),h===46?x===-1?x=M:U!==1&&(U=1):x!==-1&&(U=-1);else if(!C){_=M+1;break}return x===-1||w===-1||U===0||U===1&&x===w-1&&x===_+1?w!==-1&&(u.base=u.name=_===0&&g?p.slice(1,w):p.slice(_,w)):(_===0&&g?(u.name=p.slice(1,x),u.base=p.slice(1,w)):(u.name=p.slice(_,x),u.base=p.slice(_,w)),u.ext=p.slice(x,w)),_>0?u.dir=p.slice(0,_-1):g&&(u.dir="/"),u},sep:"/",delimiter:":",win32:null,posix:null};l.posix=l,i.exports=l}},e={};function r(i){var o=e[i];if(o!==void 0)return o.exports;var a=e[i]={exports:{}};return t[i](a,a.exports,r),a.exports}r.d=(i,o)=>{for(var a in o)r.o(o,a)&&!r.o(i,a)&&Object.defineProperty(i,a,{enumerable:!0,get:o[a]})},r.o=(i,o)=>Object.prototype.hasOwnProperty.call(i,o),r.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})};var n={};(()=>{let i;r.r(n),r.d(n,{URI:()=>g,Utils:()=>N}),typeof process=="object"?i=process.platform==="win32":typeof navigator=="object"&&(i=navigator.userAgent.indexOf("Windows")>=0);let o=/^\w[\w\d+.-]*$/,a=/^\//,l=/^\/\//;function p(O,I){if(!O.scheme&&I)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${O.authority}", path: "${O.path}", query: "${O.query}", fragment: "${O.fragment}"}`);if(O.scheme&&!o.test(O.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(O.path){if(O.authority){if(!a.test(O.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(l.test(O.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}let u="",d="/",h=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class g{static isUri(I){return I instanceof g||!!I&&typeof I.authority=="string"&&typeof I.fragment=="string"&&typeof I.path=="string"&&typeof I.query=="string"&&typeof I.scheme=="string"&&typeof I.fsPath=="string"&&typeof I.with=="function"&&typeof I.toString=="function"}scheme;authority;path;query;fragment;constructor(I,$,q,K,Q,te=!1){typeof I=="object"?(this.scheme=I.scheme||u,this.authority=I.authority||u,this.path=I.path||u,this.query=I.query||u,this.fragment=I.fragment||u):(this.scheme=function(me,re){return me||re?me:"file"}(I,te),this.authority=$||u,this.path=function(me,re){switch(me){case"https":case"http":case"file":re?re[0]!==d&&(re=d+re):re=d}return re}(this.scheme,q||u),this.query=K||u,this.fragment=Q||u,p(this,te))}get fsPath(){return U(this,!1)}with(I){if(!I)return this;let{scheme:$,authority:q,path:K,query:Q,fragment:te}=I;return $===void 0?$=this.scheme:$===null&&($=u),q===void 0?q=this.authority:q===null&&(q=u),K===void 0?K=this.path:K===null&&(K=u),Q===void 0?Q=this.query:Q===null&&(Q=u),te===void 0?te=this.fragment:te===null&&(te=u),$===this.scheme&&q===this.authority&&K===this.path&&Q===this.query&&te===this.fragment?this:new _($,q,K,Q,te)}static parse(I,$=!1){let q=h.exec(I);return q?new _(q[2]||u,de(q[4]||u),de(q[5]||u),de(q[7]||u),de(q[9]||u),$):new _(u,u,u,u,u)}static file(I){let $=u;if(i&&(I=I.replace(/\\/g,d)),I[0]===d&&I[1]===d){let q=I.indexOf(d,2);q===-1?($=I.substring(2),I=d):($=I.substring(2,q),I=I.substring(q)||d)}return new _("file",$,I,u,u)}static from(I){let $=new _(I.scheme,I.authority,I.path,I.query,I.fragment);return p($,!0),$}toString(I=!1){return Z(this,I)}toJSON(){return this}static revive(I){if(I){if(I instanceof g)return I;{let $=new _(I);return $._formatted=I.external,$._fsPath=I._sep===x?I.fsPath:null,$}}return I}}let x=i?1:void 0;class _ extends g{_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=U(this,!1)),this._fsPath}toString(I=!1){return I?Z(this,!0):(this._formatted||(this._formatted=Z(this,!1)),this._formatted)}toJSON(){let I={$mid:1};return this._fsPath&&(I.fsPath=this._fsPath,I._sep=x),this._formatted&&(I.external=this._formatted),this.path&&(I.path=this.path),this.scheme&&(I.scheme=this.scheme),this.authority&&(I.authority=this.authority),this.query&&(I.query=this.query),this.fragment&&(I.fragment=this.fragment),I}}let w={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function C(O,I,$){let q,K=-1;for(let Q=0;Q<O.length;Q++){let te=O.charCodeAt(Q);if(te>=97&&te<=122||te>=65&&te<=90||te>=48&&te<=57||te===45||te===46||te===95||te===126||I&&te===47||$&&te===91||$&&te===93||$&&te===58)K!==-1&&(q+=encodeURIComponent(O.substring(K,Q)),K=-1),q!==void 0&&(q+=O.charAt(Q));else{q===void 0&&(q=O.substr(0,Q));let me=w[te];me!==void 0?(K!==-1&&(q+=encodeURIComponent(O.substring(K,Q)),K=-1),q+=me):K===-1&&(K=Q)}}return K!==-1&&(q+=encodeURIComponent(O.substring(K))),q!==void 0?q:O}function M(O){let I;for(let $=0;$<O.length;$++){let q=O.charCodeAt($);q===35||q===63?(I===void 0&&(I=O.substr(0,$)),I+=w[q]):I!==void 0&&(I+=O[$])}return I!==void 0?I:O}function U(O,I){let $;return $=O.authority&&O.path.length>1&&O.scheme==="file"?`//${O.authority}${O.path}`:O.path.charCodeAt(0)===47&&(O.path.charCodeAt(1)>=65&&O.path.charCodeAt(1)<=90||O.path.charCodeAt(1)>=97&&O.path.charCodeAt(1)<=122)&&O.path.charCodeAt(2)===58?I?O.path.substr(1):O.path[1].toLowerCase()+O.path.substr(2):O.path,i&&($=$.replace(/\//g,"\\")),$}function Z(O,I){let $=I?M:C,q="",{scheme:K,authority:Q,path:te,query:me,fragment:re}=O;if(K&&(q+=K,q+=":"),(Q||K==="file")&&(q+=d,q+=d),Q){let Re=Q.indexOf("@");if(Re!==-1){let ar=Q.substr(0,Re);Q=Q.substr(Re+1),Re=ar.lastIndexOf(":"),Re===-1?q+=$(ar,!1,!1):(q+=$(ar.substr(0,Re),!1,!1),q+=":",q+=$(ar.substr(Re+1),!1,!0)),q+="@"}Q=Q.toLowerCase(),Re=Q.lastIndexOf(":"),Re===-1?q+=$(Q,!1,!0):(q+=$(Q.substr(0,Re),!1,!0),q+=Q.substr(Re))}if(te){if(te.length>=3&&te.charCodeAt(0)===47&&te.charCodeAt(2)===58){let Re=te.charCodeAt(1);Re>=65&&Re<=90&&(te=`/${String.fromCharCode(Re+32)}:${te.substr(3)}`)}else if(te.length>=2&&te.charCodeAt(1)===58){let Re=te.charCodeAt(0);Re>=65&&Re<=90&&(te=`${String.fromCharCode(Re+32)}:${te.substr(2)}`)}q+=$(te,!0,!1)}return me&&(q+="?",q+=$(me,!1,!1)),re&&(q+="#",q+=I?re:C(re,!1,!1)),q}function ne(O){try{return decodeURIComponent(O)}catch{return O.length>3?O.substr(0,3)+ne(O.substr(3)):O}}let ge=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function de(O){return O.match(ge)?O.replace(ge,I=>ne(I)):O}var mt=r(470);let It=mt.posix||mt,ot="/";var N;(function(O){O.joinPath=function(I,...$){return I.with({path:It.join(I.path,...$)})},O.resolvePath=function(I,...$){let q=I.path,K=!1;q[0]!==ot&&(q=ot+q,K=!0);let Q=It.resolve(q,...$);return K&&Q[0]===ot&&!I.authority&&(Q=Q.substring(1)),I.with({path:Q})},O.dirname=function(I){if(I.path.length===0||I.path===ot)return I;let $=It.dirname(I.path);return $.length===1&&$.charCodeAt(0)===46&&($=""),I.with({path:$})},O.basename=function(I){return It.basename(I.path)},O.extname=function(I){return It.extname(I.path)}})(N||(N={}))})(),tF=n})();var{URI:rF,Utils:TNe}=tF;var wF=dr(hF(),1);var fp=t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>65536)throw new TypeError("pattern is too long")};var aZ={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},dp=t=>t.replace(/[[\]\\-]/g,"\\$&"),cZ=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),gF=t=>t.join(""),yF=(t,e)=>{let r=e;if(t.charAt(r)!=="[")throw new Error("not in a brace expression");let n=[],i=[],o=r+1,a=!1,l=!1,p=!1,u=!1,d=r,h="";e:for(;o<t.length;){let w=t.charAt(o);if((w==="!"||w==="^")&&o===r+1){u=!0,o++;continue}if(w==="]"&&a&&!p){d=o+1;break}if(a=!0,w==="\\"&&!p){p=!0,o++;continue}if(w==="["&&!p){for(let[C,[M,U,Z]]of Object.entries(aZ))if(t.startsWith(C,o)){if(h)return["$.",!1,t.length-r,!0];o+=C.length,Z?i.push(M):n.push(M),l=l||U;continue e}}if(p=!1,h){w>h?n.push(dp(h)+"-"+dp(w)):w===h&&n.push(dp(w)),h="",o++;continue}if(t.startsWith("-]",o+1)){n.push(dp(w+"-")),o+=2;continue}if(t.startsWith("-",o+1)){h=w,o+=2;continue}n.push(dp(w)),o++}if(d<o)return["",!1,0,!1];if(!n.length&&!i.length)return["$.",!1,t.length-r,!0];if(i.length===0&&n.length===1&&/^\\?.$/.test(n[0])&&!u){let w=n[0].length===2?n[0].slice(-1):n[0];return[cZ(w),!1,d-r,!1]}let g="["+(u?"^":"")+gF(n)+"]",x="["+(u?"":"^")+gF(i)+"]";return[n.length&&i.length?"("+g+"|"+x+")":n.length?g:x,l,d-r,!0]};var On=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");var lZ=new Set(["!","?","+","*","@"]),xF=t=>lZ.has(t),pZ="(?!(?:^|/)\\.\\.?(?:$|/))",Bg="(?!\\.)",uZ=new Set(["[","."]),fZ=new Set(["..","."]),dZ=new Set("().*{}+?[]^$\\!"),mZ=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Lv="[^/]",TF=Lv+"*?",SF=Lv+"+?",Ja=class t{type;#e;#t;#o=!1;#n=[];#s;#S;#l;#u=!1;#a;#c;#i=!1;constructor(e,r,n={}){this.type=e,e&&(this.#t=!0),this.#s=r,this.#e=this.#s?this.#s.#e:this,this.#a=this.#e===this?n:this.#e.#a,this.#l=this.#e===this?[]:this.#e.#l,e==="!"&&!this.#e.#u&&this.#l.push(this),this.#S=this.#s?this.#s.#n.length:0}get hasMagic(){if(this.#t!==void 0)return this.#t;for(let e of this.#n)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#t=!0;return this.#t}toString(){return this.#c!==void 0?this.#c:this.type?this.#c=this.type+"("+this.#n.map(e=>String(e)).join("|")+")":this.#c=this.#n.map(e=>String(e)).join("")}#g(){if(this!==this.#e)throw new Error("should only call on root");if(this.#u)return this;this.toString(),this.#u=!0;let e;for(;e=this.#l.pop();){if(e.type!=="!")continue;let r=e,n=r.#s;for(;n;){for(let i=r.#S+1;!n.type&&i<n.#n.length;i++)for(let o of e.#n){if(typeof o=="string")throw new Error("string part in extglob AST??");o.copyIn(n.#n[i])}r=n,n=r.#s}}return this}push(...e){for(let r of e)if(r!==""){if(typeof r!="string"&&!(r instanceof t&&r.#s===this))throw new Error("invalid part: "+r);this.#n.push(r)}}toJSON(){let e=this.type===null?this.#n.slice().map(r=>typeof r=="string"?r:r.toJSON()):[this.type,...this.#n.map(r=>r.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#u&&this.#s?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#s?.isStart())return!1;if(this.#S===0)return!0;let e=this.#s;for(let r=0;r<this.#S;r++){let n=e.#n[r];if(!(n instanceof t&&n.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#s?.type==="!")return!0;if(!this.#s?.isEnd())return!1;if(!this.type)return this.#s?.isEnd();let e=this.#s?this.#s.#n.length:0;return this.#S===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let r=new t(this.type,e);for(let n of this.#n)r.copyIn(n);return r}static#y(e,r,n,i){let o=!1,a=!1,l=-1,p=!1;if(r.type===null){let x=n,_="";for(;x<e.length;){let w=e.charAt(x++);if(o||w==="\\"){o=!o,_+=w;continue}if(a){x===l+1?(w==="^"||w==="!")&&(p=!0):w==="]"&&!(x===l+2&&p)&&(a=!1),_+=w;continue}else if(w==="["){a=!0,l=x,p=!1,_+=w;continue}if(!i.noext&&xF(w)&&e.charAt(x)==="("){r.push(_),_="";let C=new t(w,r);x=t.#y(e,C,x,i),r.push(C);continue}_+=w}return r.push(_),x}let u=n+1,d=new t(null,r),h=[],g="";for(;u<e.length;){let x=e.charAt(u++);if(o||x==="\\"){o=!o,g+=x;continue}if(a){u===l+1?(x==="^"||x==="!")&&(p=!0):x==="]"&&!(u===l+2&&p)&&(a=!1),g+=x;continue}else if(x==="["){a=!0,l=u,p=!1,g+=x;continue}if(xF(x)&&e.charAt(u)==="("){d.push(g),g="";let _=new t(x,d);d.push(_),u=t.#y(e,_,u,i);continue}if(x==="|"){d.push(g),g="",h.push(d),d=new t(null,r);continue}if(x===")")return g===""&&r.#n.length===0&&(r.#i=!0),d.push(g),g="",r.push(...h,d),u;g+=x}return r.type=null,r.#t=void 0,r.#n=[e.substring(n-1)],u}static fromGlob(e,r={}){let n=new t(null,void 0,r);return t.#y(e,n,0,r),n}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[r,n,i,o]=this.toRegExpSource();if(!(i||this.#t||this.#a.nocase&&!this.#a.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return n;let l=(this.#a.nocase?"i":"")+(o?"u":"");return Object.assign(new RegExp(`^${r}$`,l),{_src:r,_glob:e})}get options(){return this.#a}toRegExpSource(e){let r=e??!!this.#a.dot;if(this.#e===this&&this.#g(),!this.type){let p=this.isStart()&&this.isEnd(),u=this.#n.map(x=>{let[_,w,C,M]=typeof x=="string"?t.#f(x,this.#t,p):x.toRegExpSource(e);return this.#t=this.#t||C,this.#o=this.#o||M,_}).join(""),d="";if(this.isStart()&&typeof this.#n[0]=="string"&&!(this.#n.length===1&&fZ.has(this.#n[0]))){let _=uZ,w=r&&_.has(u.charAt(0))||u.startsWith("\\.")&&_.has(u.charAt(2))||u.startsWith("\\.\\.")&&_.has(u.charAt(4)),C=!r&&!e&&_.has(u.charAt(0));d=w?pZ:C?Bg:""}let h="";return this.isEnd()&&this.#e.#u&&this.#s?.type==="!"&&(h="(?:$|\\/)"),[d+u+h,On(u),this.#t=!!this.#t,this.#o]}let n=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",o=this.#d(r);if(this.isStart()&&this.isEnd()&&!o&&this.type!=="!"){let p=this.toString();return this.#n=[p],this.type=null,this.#t=void 0,[p,On(this.toString()),!1,!1]}let a=!n||e||r||!Bg?"":this.#d(!0);a===o&&(a=""),a&&(o=`(?:${o})(?:${a})*?`);let l="";if(this.type==="!"&&this.#i)l=(this.isStart()&&!r?Bg:"")+SF;else{let p=this.type==="!"?"))"+(this.isStart()&&!r&&!e?Bg:"")+TF+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&a?")":this.type==="*"&&a?")?":`)${this.type}`;l=i+o+p}return[l,On(o),this.#t=!!this.#t,this.#o]}#d(e){return this.#n.map(r=>{if(typeof r=="string")throw new Error("string type in extglob ast??");let[n,i,o,a]=r.toRegExpSource(e);return this.#o=this.#o||a,n}).filter(r=>!(this.isStart()&&this.isEnd())||!!r).join("|")}static#f(e,r,n=!1){let i=!1,o="",a=!1;for(let l=0;l<e.length;l++){let p=e.charAt(l);if(i){i=!1,o+=(dZ.has(p)?"\\":"")+p;continue}if(p==="\\"){l===e.length-1?o+="\\\\":i=!0;continue}if(p==="["){let[u,d,h,g]=yF(e,l);if(h){o+=u,a=a||d,l+=h-1,r=r||g;continue}}if(p==="*"){n&&e==="*"?o+=SF:o+=TF,r=!0;continue}if(p==="?"){o+=Lv,r=!0;continue}o+=mZ(p)}return[o,On(e),!!r,a]}};var ec=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&");var or=(t,e,r={})=>(fp(e),!r.nocomment&&e.charAt(0)==="#"?!1:new jr(e,r).match(t)),hZ=/^\*+([^+@!?\*\[\(]*)$/,gZ=t=>e=>!e.startsWith(".")&&e.endsWith(t),yZ=t=>e=>e.endsWith(t),xZ=t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),TZ=t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),SZ=/^\*+\.\*+$/,vZ=t=>!t.startsWith(".")&&t.includes("."),bZ=t=>t!=="."&&t!==".."&&t.includes("."),wZ=/^\.\*+$/,_Z=t=>t!=="."&&t!==".."&&t.startsWith("."),EZ=/^\*+$/,RZ=t=>t.length!==0&&!t.startsWith("."),kZ=t=>t.length!==0&&t!=="."&&t!=="..",PZ=/^\?+([^+@!?\*\[\(]*)?$/,MZ=([t,e=""])=>{let r=_F([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},AZ=([t,e=""])=>{let r=EF([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},DZ=([t,e=""])=>{let r=EF([t]);return e?n=>r(n)&&n.endsWith(e):r},IZ=([t,e=""])=>{let r=_F([t]);return e?n=>r(n)&&n.endsWith(e):r},_F=([t])=>{let e=t.length;return r=>r.length===e&&!r.startsWith(".")},EF=([t])=>{let e=t.length;return r=>r.length===e&&r!=="."&&r!==".."},RF=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",vF={win32:{sep:"\\"},posix:{sep:"/"}},FZ=RF==="win32"?vF.win32.sep:vF.posix.sep;or.sep=FZ;var Ut=Symbol("globstar **");or.GLOBSTAR=Ut;var CZ="[^/]",OZ=CZ+"*?",NZ="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",LZ="(?:(?!(?:\\/|^)\\.).)*?",UZ=(t,e={})=>r=>or(r,t,e);or.filter=UZ;var hn=(t,e={})=>Object.assign({},t,e),VZ=t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return or;let e=or;return Object.assign((n,i,o={})=>e(n,i,hn(t,o)),{Minimatch:class extends e.Minimatch{constructor(i,o={}){super(i,hn(t,o))}static defaults(i){return e.defaults(hn(t,i)).Minimatch}},AST:class extends e.AST{constructor(i,o,a={}){super(i,o,hn(t,a))}static fromGlob(i,o={}){return e.AST.fromGlob(i,hn(t,o))}},unescape:(n,i={})=>e.unescape(n,hn(t,i)),escape:(n,i={})=>e.escape(n,hn(t,i)),filter:(n,i={})=>e.filter(n,hn(t,i)),defaults:n=>e.defaults(hn(t,n)),makeRe:(n,i={})=>e.makeRe(n,hn(t,i)),braceExpand:(n,i={})=>e.braceExpand(n,hn(t,i)),match:(n,i,o={})=>e.match(n,i,hn(t,o)),sep:e.sep,GLOBSTAR:Ut})};or.defaults=VZ;var kF=(t,e={})=>(fp(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:(0,wF.default)(t));or.braceExpand=kF;var BZ=(t,e={})=>new jr(t,e).makeRe();or.makeRe=BZ;var HZ=(t,e,r={})=>{let n=new jr(e,r);return t=t.filter(i=>n.match(i)),n.options.nonull&&!t.length&&t.push(e),t};or.match=HZ;var bF=/[?*]|[+@!]\(.*?\)|\[|\]/,WZ=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),jr=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,r={}){fp(e),r=r||{},this.options=r,this.pattern=e,this.platform=r.platform||RF,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!r.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!r.nonegate,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=r.windowsNoMagicRoot!==void 0?r.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let r of e)if(typeof r!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],r.debug&&(this.debug=(...o)=>console.error(...o)),this.debug(this.pattern,this.globSet);let n=this.globSet.map(o=>this.slashSplit(o));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let i=this.globParts.map((o,a,l)=>{if(this.isWindows&&this.windowsNoMagicRoot){let p=o[0]===""&&o[1]===""&&(o[2]==="?"||!bF.test(o[2]))&&!bF.test(o[3]),u=/^[a-z]:/i.test(o[0]);if(p)return[...o.slice(0,4),...o.slice(4).map(d=>this.parse(d))];if(u)return[o[0],...o.slice(1).map(d=>this.parse(d))]}return o.map(p=>this.parse(p))});if(this.debug(this.pattern,i),this.set=i.filter(o=>o.indexOf(!1)===-1),this.isWindows)for(let o=0;o<this.set.length;o++){let a=this.set[o];a[0]===""&&a[1]===""&&this.globParts[o][2]==="?"&&typeof a[3]=="string"&&/^[a-z]:$/i.test(a[3])&&(a[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let n=0;n<e.length;n++)for(let i=0;i<e[n].length;i++)e[n][i]==="**"&&(e[n][i]="*");let{optimizationLevel:r=1}=this.options;return r>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):r>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(r=>{let n=-1;for(;(n=r.indexOf("**",n+1))!==-1;){let i=n;for(;r[i+1]==="**";)i++;i!==n&&r.splice(n,i-n)}return r})}levelOneOptimize(e){return e.map(r=>(r=r.reduce((n,i)=>{let o=n[n.length-1];return i==="**"&&o==="**"?n:i===".."&&o&&o!==".."&&o!=="."&&o!=="**"?(n.pop(),n):(n.push(i),n)},[]),r.length===0?[""]:r))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let r=!1;do{if(r=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let o=e[i];i===1&&o===""&&e[0]===""||(o==="."||o==="")&&(r=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(r=!0,e.pop())}let n=0;for(;(n=e.indexOf("..",n+1))!==-1;){let i=e[n-1];i&&i!=="."&&i!==".."&&i!=="**"&&(r=!0,e.splice(n-1,2),n-=2)}}while(r);return e.length===0?[""]:e}firstPhasePreProcess(e){let r=!1;do{r=!1;for(let n of e){let i=-1;for(;(i=n.indexOf("**",i+1))!==-1;){let a=i;for(;n[a+1]==="**";)a++;a>i&&n.splice(i+1,a-i);let l=n[i+1],p=n[i+2],u=n[i+3];if(l!==".."||!p||p==="."||p===".."||!u||u==="."||u==="..")continue;r=!0,n.splice(i,1);let d=n.slice(0);d[i]="**",e.push(d),i--}if(!this.preserveMultipleSlashes){for(let a=1;a<n.length-1;a++){let l=n[a];a===1&&l===""&&n[0]===""||(l==="."||l==="")&&(r=!0,n.splice(a,1),a--)}n[0]==="."&&n.length===2&&(n[1]==="."||n[1]==="")&&(r=!0,n.pop())}let o=0;for(;(o=n.indexOf("..",o+1))!==-1;){let a=n[o-1];if(a&&a!=="."&&a!==".."&&a!=="**"){r=!0;let p=o===1&&n[o+1]==="**"?["."]:[];n.splice(o-1,2,...p),n.length===0&&n.push(""),o-=2}}}}while(r);return e}secondPhasePreProcess(e){for(let r=0;r<e.length-1;r++)for(let n=r+1;n<e.length;n++){let i=this.partsMatch(e[r],e[n],!this.preserveMultipleSlashes);if(i){e[r]=[],e[n]=i;break}}return e.filter(r=>r.length)}partsMatch(e,r,n=!1){let i=0,o=0,a=[],l="";for(;i<e.length&&o<r.length;)if(e[i]===r[o])a.push(l==="b"?r[o]:e[i]),i++,o++;else if(n&&e[i]==="**"&&r[o]===e[i+1])a.push(e[i]),i++;else if(n&&r[o]==="**"&&e[i]===r[o+1])a.push(r[o]),o++;else if(e[i]==="*"&&r[o]&&(this.options.dot||!r[o].startsWith("."))&&r[o]!=="**"){if(l==="b")return!1;l="a",a.push(e[i]),i++,o++}else if(r[o]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(l==="a")return!1;l="b",a.push(r[o]),i++,o++}else return!1;return e.length===r.length&&a}parseNegate(){if(this.nonegate)return;let e=this.pattern,r=!1,n=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)r=!r,n++;n&&(this.pattern=e.slice(n)),this.negate=r}matchOne(e,r,n=!1){let i=this.options;if(this.isWindows){let w=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),C=!w&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),M=typeof r[0]=="string"&&/^[a-z]:$/i.test(r[0]),U=!M&&r[0]===""&&r[1]===""&&r[2]==="?"&&typeof r[3]=="string"&&/^[a-z]:$/i.test(r[3]),Z=C?3:w?0:void 0,ne=U?3:M?0:void 0;if(typeof Z=="number"&&typeof ne=="number"){let[ge,de]=[e[Z],r[ne]];ge.toLowerCase()===de.toLowerCase()&&(r[ne]=ge,ne>Z?r=r.slice(ne):Z>ne&&(e=e.slice(Z)))}}let{optimizationLevel:o=1}=this.options;o>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var a=0,l=0,p=e.length,u=r.length;a<p&&l<u;a++,l++){this.debug("matchOne loop");var d=r[l],h=e[a];if(this.debug(r,d,h),d===!1)return!1;if(d===Ut){this.debug("GLOBSTAR",[r,d,h]);var g=a,x=l+1;if(x===u){for(this.debug("** at the end");a<p;a++)if(e[a]==="."||e[a]===".."||!i.dot&&e[a].charAt(0)===".")return!1;return!0}for(;g<p;){var _=e[g];if(this.debug(`
globstar while`,e,g,r,x,_),this.matchOne(e.slice(g),r.slice(x),n))return this.debug("globstar found match!",g,p,_),!0;if(_==="."||_===".."||!i.dot&&_.charAt(0)==="."){this.debug("dot detected!",e,g,r,x);break}this.debug("globstar swallow a segment, and continue"),g++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,g,r,x),g===p))}let w;if(typeof d=="string"?(w=h===d,this.debug("string match",d,h,w)):(w=d.test(h),this.debug("pattern match",d,h,w)),!w)return!1}if(a===p&&l===u)return!0;if(a===p)return n;if(l===u)return a===p-1&&e[a]==="";throw new Error("wtf?")}braceExpand(){return kF(this.pattern,this.options)}parse(e){fp(e);let r=this.options;if(e==="**")return Ut;if(e==="")return"";let n,i=null;(n=e.match(EZ))?i=r.dot?kZ:RZ:(n=e.match(hZ))?i=(r.nocase?r.dot?TZ:xZ:r.dot?yZ:gZ)(n[1]):(n=e.match(PZ))?i=(r.nocase?r.dot?AZ:MZ:r.dot?DZ:IZ)(n):(n=e.match(SZ))?i=r.dot?bZ:vZ:(n=e.match(wZ))&&(i=_Z);let o=Ja.fromGlob(e,this.options).toMMPattern();return i&&typeof o=="object"&&Reflect.defineProperty(o,"test",{value:i}),o}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let r=this.options,n=r.noglobstar?OZ:r.dot?NZ:LZ,i=new Set(r.nocase?["i"]:[]),o=e.map(p=>{let u=p.map(d=>{if(d instanceof RegExp)for(let h of d.flags.split(""))i.add(h);return typeof d=="string"?WZ(d):d===Ut?Ut:d._src});return u.forEach((d,h)=>{let g=u[h+1],x=u[h-1];d!==Ut||x===Ut||(x===void 0?g!==void 0&&g!==Ut?u[h+1]="(?:\\/|"+n+"\\/)?"+g:u[h]=n:g===void 0?u[h-1]=x+"(?:\\/|"+n+")?":g!==Ut&&(u[h-1]=x+"(?:\\/|\\/"+n+"\\/)"+g,u[h+1]=Ut))}),u.filter(d=>d!==Ut).join("/")}).join("|"),[a,l]=e.length>1?["(?:",")"]:["",""];o="^"+a+o+l+"$",this.negate&&(o="^(?!"+o+").+$");try{this.regexp=new RegExp(o,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;let n=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let o=this.set;this.debug(this.pattern,"set",o);let a=i[i.length-1];if(!a)for(let l=i.length-2;!a&&l>=0;l--)a=i[l];for(let l=0;l<o.length;l++){let p=o[l],u=i;if(n.matchBase&&p.length===1&&(u=[a]),this.matchOne(u,p,r))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return or.defaults(e).Minimatch}};or.AST=Ja;or.Minimatch=jr;or.escape=ec;or.unescape=On;var YF=require("node:url");var tc=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,MF=new Set,Uv=typeof process=="object"&&process?process:{},AF=(t,e,r,n)=>{typeof Uv.emitWarning=="function"?Uv.emitWarning(t,e,r,n):console.error(`[${r}] ${e}: ${t}`)},Hg=globalThis.AbortController,PF=globalThis.AbortSignal;if(typeof Hg>"u"){PF=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(n,i){this._onabort.push(i)}},Hg=class{constructor(){e()}signal=new PF;abort(n){if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(let i of this.signal._onabort)i(n);this.signal.onabort?.(n)}}};let t=Uv.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{t&&(t=!1,AF("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var $Z=t=>!MF.has(t),WNe=Symbol("type"),wo=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),DF=t=>wo(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?rc:null:null,rc=class extends Array{constructor(e){super(e),this.fill(0)}},Vv=class t{heap;length;static#e=!1;static create(e){let r=DF(e);if(!r)return[];t.#e=!0;let n=new t(e,r);return t.#e=!1,n}constructor(e,r){if(!t.#e)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},mp=class t{#e;#t;#o;#n;#s;#S;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#l;#u;#a;#c;#i;#g;#y;#d;#f;#w;#h;#_;#E;#T;#v;#b;#m;static unsafeExposeInternals(e){return{starts:e.#E,ttls:e.#T,sizes:e.#_,keyMap:e.#a,keyList:e.#c,valList:e.#i,next:e.#g,prev:e.#y,get head(){return e.#d},get tail(){return e.#f},free:e.#w,isBackgroundFetch:r=>e.#p(r),backgroundFetch:(r,n,i,o)=>e.#U(r,n,i,o),moveToTail:r=>e.#B(r),indexes:r=>e.#k(r),rindexes:r=>e.#P(r),isStale:r=>e.#x(r)}}get max(){return this.#e}get maxSize(){return this.#t}get calculatedSize(){return this.#u}get size(){return this.#l}get fetchMethod(){return this.#s}get memoMethod(){return this.#S}get dispose(){return this.#o}get disposeAfter(){return this.#n}constructor(e){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:a,updateAgeOnHas:l,allowStale:p,dispose:u,disposeAfter:d,noDisposeOnSet:h,noUpdateTTL:g,maxSize:x=0,maxEntrySize:_=0,sizeCalculation:w,fetchMethod:C,memoMethod:M,noDeleteOnFetchRejection:U,noDeleteOnStaleGet:Z,allowStaleOnFetchRejection:ne,allowStaleOnFetchAbort:ge,ignoreFetchAbort:de}=e;if(r!==0&&!wo(r))throw new TypeError("max option must be a nonnegative integer");let mt=r?DF(r):Array;if(!mt)throw new Error("invalid max value: "+r);if(this.#e=r,this.#t=x,this.maxEntrySize=_||this.#t,this.sizeCalculation=w,this.sizeCalculation){if(!this.#t&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(M!==void 0&&typeof M!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#S=M,C!==void 0&&typeof C!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#s=C,this.#b=!!C,this.#a=new Map,this.#c=new Array(r).fill(void 0),this.#i=new Array(r).fill(void 0),this.#g=new mt(r),this.#y=new mt(r),this.#d=0,this.#f=0,this.#w=Vv.create(r),this.#l=0,this.#u=0,typeof u=="function"&&(this.#o=u),typeof d=="function"?(this.#n=d,this.#h=[]):(this.#n=void 0,this.#h=void 0),this.#v=!!this.#o,this.#m=!!this.#n,this.noDisposeOnSet=!!h,this.noUpdateTTL=!!g,this.noDeleteOnFetchRejection=!!U,this.allowStaleOnFetchRejection=!!ne,this.allowStaleOnFetchAbort=!!ge,this.ignoreFetchAbort=!!de,this.maxEntrySize!==0){if(this.#t!==0&&!wo(this.#t))throw new TypeError("maxSize must be a positive integer if specified");if(!wo(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#A()}if(this.allowStale=!!p,this.noDeleteOnStaleGet=!!Z,this.updateAgeOnGet=!!a,this.updateAgeOnHas=!!l,this.ttlResolution=wo(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=n||0,this.ttl){if(!wo(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#M()}if(this.#e===0&&this.ttl===0&&this.#t===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#e&&!this.#t){let It="LRU_CACHE_UNBOUNDED";$Z(It)&&(MF.add(It),AF("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",It,t))}}getRemainingTTL(e){return this.#a.has(e)?1/0:0}#M(){let e=new rc(this.#e),r=new rc(this.#e);this.#T=e,this.#E=r,this.#I=(o,a,l=tc.now())=>{if(r[o]=a!==0?l:0,e[o]=a,a!==0&&this.ttlAutopurge){let p=setTimeout(()=>{this.#x(o)&&this.#D(this.#c[o],"expire")},a+1);p.unref&&p.unref()}},this.#R=o=>{r[o]=e[o]!==0?tc.now():0},this.#r=(o,a)=>{if(e[a]){let l=e[a],p=r[a];if(!l||!p)return;o.ttl=l,o.start=p,o.now=n||i();let u=o.now-p;o.remainingTTL=l-u}};let n=0,i=()=>{let o=tc.now();if(this.ttlResolution>0){n=o;let a=setTimeout(()=>n=0,this.ttlResolution);a.unref&&a.unref()}return o};this.getRemainingTTL=o=>{let a=this.#a.get(o);if(a===void 0)return 0;let l=e[a],p=r[a];if(!l||!p)return 1/0;let u=(n||i())-p;return l-u},this.#x=o=>{let a=r[o],l=e[o];return!!l&&!!a&&(n||i())-a>l}}#R=()=>{};#r=()=>{};#I=()=>{};#x=()=>!1;#A(){let e=new rc(this.#e);this.#u=0,this.#_=e,this.#F=r=>{this.#u-=e[r],e[r]=0},this.#O=(r,n,i,o)=>{if(this.#p(n))return 0;if(!wo(i))if(o){if(typeof o!="function")throw new TypeError("sizeCalculation must be a function");if(i=o(n,r),!wo(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#C=(r,n,i)=>{if(e[r]=n,this.#t){let o=this.#t-e[r];for(;this.#u>o;)this.#L(!0)}this.#u+=e[r],i&&(i.entrySize=n,i.totalCalculatedSize=this.#u)}}#F=e=>{};#C=(e,r,n)=>{};#O=(e,r,n,i)=>{if(n||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#k({allowStale:e=this.allowStale}={}){if(this.#l)for(let r=this.#f;!(!this.#N(r)||((e||!this.#x(r))&&(yield r),r===this.#d));)r=this.#y[r]}*#P({allowStale:e=this.allowStale}={}){if(this.#l)for(let r=this.#d;!(!this.#N(r)||((e||!this.#x(r))&&(yield r),r===this.#f));)r=this.#g[r]}#N(e){return e!==void 0&&this.#a.get(this.#c[e])===e}*entries(){for(let e of this.#k())this.#i[e]!==void 0&&this.#c[e]!==void 0&&!this.#p(this.#i[e])&&(yield[this.#c[e],this.#i[e]])}*rentries(){for(let e of this.#P())this.#i[e]!==void 0&&this.#c[e]!==void 0&&!this.#p(this.#i[e])&&(yield[this.#c[e],this.#i[e]])}*keys(){for(let e of this.#k()){let r=this.#c[e];r!==void 0&&!this.#p(this.#i[e])&&(yield r)}}*rkeys(){for(let e of this.#P()){let r=this.#c[e];r!==void 0&&!this.#p(this.#i[e])&&(yield r)}}*values(){for(let e of this.#k())this.#i[e]!==void 0&&!this.#p(this.#i[e])&&(yield this.#i[e])}*rvalues(){for(let e of this.#P())this.#i[e]!==void 0&&!this.#p(this.#i[e])&&(yield this.#i[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,r={}){for(let n of this.#k()){let i=this.#i[n],o=this.#p(i)?i.__staleWhileFetching:i;if(o!==void 0&&e(o,this.#c[n],this))return this.get(this.#c[n],r)}}forEach(e,r=this){for(let n of this.#k()){let i=this.#i[n],o=this.#p(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#c[n],this)}}rforEach(e,r=this){for(let n of this.#P()){let i=this.#i[n],o=this.#p(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#c[n],this)}}purgeStale(){let e=!1;for(let r of this.#P({allowStale:!0}))this.#x(r)&&(this.#D(this.#c[r],"expire"),e=!0);return e}info(e){let r=this.#a.get(e);if(r===void 0)return;let n=this.#i[r],i=this.#p(n)?n.__staleWhileFetching:n;if(i===void 0)return;let o={value:i};if(this.#T&&this.#E){let a=this.#T[r],l=this.#E[r];if(a&&l){let p=a-(tc.now()-l);o.ttl=p,o.start=Date.now()}}return this.#_&&(o.size=this.#_[r]),o}dump(){let e=[];for(let r of this.#k({allowStale:!0})){let n=this.#c[r],i=this.#i[r],o=this.#p(i)?i.__staleWhileFetching:i;if(o===void 0||n===void 0)continue;let a={value:o};if(this.#T&&this.#E){a.ttl=this.#T[r];let l=tc.now()-this.#E[r];a.start=Math.floor(Date.now()-l)}this.#_&&(a.size=this.#_[r]),e.unshift([n,a])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let i=Date.now()-n.start;n.start=tc.now()-i}this.set(r,n.value,n)}}set(e,r,n={}){if(r===void 0)return this.delete(e),this;let{ttl:i=this.ttl,start:o,noDisposeOnSet:a=this.noDisposeOnSet,sizeCalculation:l=this.sizeCalculation,status:p}=n,{noUpdateTTL:u=this.noUpdateTTL}=n,d=this.#O(e,r,n.size||0,l);if(this.maxEntrySize&&d>this.maxEntrySize)return p&&(p.set="miss",p.maxEntrySizeExceeded=!0),this.#D(e,"set"),this;let h=this.#l===0?void 0:this.#a.get(e);if(h===void 0)h=this.#l===0?this.#f:this.#w.length!==0?this.#w.pop():this.#l===this.#e?this.#L(!1):this.#l,this.#c[h]=e,this.#i[h]=r,this.#a.set(e,h),this.#g[this.#f]=h,this.#y[h]=this.#f,this.#f=h,this.#l++,this.#C(h,d,p),p&&(p.set="add"),u=!1;else{this.#B(h);let g=this.#i[h];if(r!==g){if(this.#b&&this.#p(g)){g.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:x}=g;x!==void 0&&!a&&(this.#v&&this.#o?.(x,e,"set"),this.#m&&this.#h?.push([x,e,"set"]))}else a||(this.#v&&this.#o?.(g,e,"set"),this.#m&&this.#h?.push([g,e,"set"]));if(this.#F(h),this.#C(h,d,p),this.#i[h]=r,p){p.set="replace";let x=g&&this.#p(g)?g.__staleWhileFetching:g;x!==void 0&&(p.oldValue=x)}}else p&&(p.set="update")}if(i!==0&&!this.#T&&this.#M(),this.#T&&(u||this.#I(h,i,o),p&&this.#r(p,h)),!a&&this.#m&&this.#h){let g=this.#h,x;for(;x=g?.shift();)this.#n?.(...x)}return this}pop(){try{for(;this.#l;){let e=this.#i[this.#d];if(this.#L(!0),this.#p(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#m&&this.#h){let e=this.#h,r;for(;r=e?.shift();)this.#n?.(...r)}}}#L(e){let r=this.#d,n=this.#c[r],i=this.#i[r];return this.#b&&this.#p(i)?i.__abortController.abort(new Error("evicted")):(this.#v||this.#m)&&(this.#v&&this.#o?.(i,n,"evict"),this.#m&&this.#h?.push([i,n,"evict"])),this.#F(r),e&&(this.#c[r]=void 0,this.#i[r]=void 0,this.#w.push(r)),this.#l===1?(this.#d=this.#f=0,this.#w.length=0):this.#d=this.#g[r],this.#a.delete(n),this.#l--,r}has(e,r={}){let{updateAgeOnHas:n=this.updateAgeOnHas,status:i}=r,o=this.#a.get(e);if(o!==void 0){let a=this.#i[o];if(this.#p(a)&&a.__staleWhileFetching===void 0)return!1;if(this.#x(o))i&&(i.has="stale",this.#r(i,o));else return n&&this.#R(o),i&&(i.has="hit",this.#r(i,o)),!0}else i&&(i.has="miss");return!1}peek(e,r={}){let{allowStale:n=this.allowStale}=r,i=this.#a.get(e);if(i===void 0||!n&&this.#x(i))return;let o=this.#i[i];return this.#p(o)?o.__staleWhileFetching:o}#U(e,r,n,i){let o=r===void 0?void 0:this.#i[r];if(this.#p(o))return o;let a=new Hg,{signal:l}=n;l?.addEventListener("abort",()=>a.abort(l.reason),{signal:a.signal});let p={signal:a.signal,options:n,context:i},u=(w,C=!1)=>{let{aborted:M}=a.signal,U=n.ignoreFetchAbort&&w!==void 0;if(n.status&&(M&&!C?(n.status.fetchAborted=!0,n.status.fetchError=a.signal.reason,U&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),M&&!U&&!C)return h(a.signal.reason);let Z=x;return this.#i[r]===x&&(w===void 0?Z.__staleWhileFetching?this.#i[r]=Z.__staleWhileFetching:this.#D(e,"fetch"):(n.status&&(n.status.fetchUpdated=!0),this.set(e,w,p.options))),w},d=w=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=w),h(w)),h=w=>{let{aborted:C}=a.signal,M=C&&n.allowStaleOnFetchAbort,U=M||n.allowStaleOnFetchRejection,Z=U||n.noDeleteOnFetchRejection,ne=x;if(this.#i[r]===x&&(!Z||ne.__staleWhileFetching===void 0?this.#D(e,"fetch"):M||(this.#i[r]=ne.__staleWhileFetching)),U)return n.status&&ne.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),ne.__staleWhileFetching;if(ne.__returned===ne)throw w},g=(w,C)=>{let M=this.#s?.(e,o,p);M&&M instanceof Promise&&M.then(U=>w(U===void 0?void 0:U),C),a.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(w(void 0),n.allowStaleOnFetchAbort&&(w=U=>u(U,!0)))})};n.status&&(n.status.fetchDispatched=!0);let x=new Promise(g).then(u,d),_=Object.assign(x,{__abortController:a,__staleWhileFetching:o,__returned:void 0});return r===void 0?(this.set(e,_,{...p.options,status:void 0}),r=this.#a.get(e)):this.#i[r]=_,_}#p(e){if(!this.#b)return!1;let r=e;return!!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof Hg}async fetch(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:a=this.ttl,noDisposeOnSet:l=this.noDisposeOnSet,size:p=0,sizeCalculation:u=this.sizeCalculation,noUpdateTTL:d=this.noUpdateTTL,noDeleteOnFetchRejection:h=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:g=this.allowStaleOnFetchRejection,ignoreFetchAbort:x=this.ignoreFetchAbort,allowStaleOnFetchAbort:_=this.allowStaleOnFetchAbort,context:w,forceRefresh:C=!1,status:M,signal:U}=r;if(!this.#b)return M&&(M.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,status:M});let Z={allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,ttl:a,noDisposeOnSet:l,size:p,sizeCalculation:u,noUpdateTTL:d,noDeleteOnFetchRejection:h,allowStaleOnFetchRejection:g,allowStaleOnFetchAbort:_,ignoreFetchAbort:x,status:M,signal:U},ne=this.#a.get(e);if(ne===void 0){M&&(M.fetch="miss");let ge=this.#U(e,ne,Z,w);return ge.__returned=ge}else{let ge=this.#i[ne];if(this.#p(ge)){let N=n&&ge.__staleWhileFetching!==void 0;return M&&(M.fetch="inflight",N&&(M.returnedStale=!0)),N?ge.__staleWhileFetching:ge.__returned=ge}let de=this.#x(ne);if(!C&&!de)return M&&(M.fetch="hit"),this.#B(ne),i&&this.#R(ne),M&&this.#r(M,ne),ge;let mt=this.#U(e,ne,Z,w),ot=mt.__staleWhileFetching!==void 0&&n;return M&&(M.fetch=de?"stale":"refresh",ot&&de&&(M.returnedStale=!0)),ot?mt.__staleWhileFetching:mt.__returned=mt}}async forceFetch(e,r={}){let n=await this.fetch(e,r);if(n===void 0)throw new Error("fetch() returned undefined");return n}memo(e,r={}){let n=this.#S;if(!n)throw new Error("no memoMethod provided to constructor");let{context:i,forceRefresh:o,...a}=r,l=this.get(e,a);if(!o&&l!==void 0)return l;let p=n(e,l,{options:a,context:i});return this.set(e,p,a),p}get(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:a}=r,l=this.#a.get(e);if(l!==void 0){let p=this.#i[l],u=this.#p(p);return a&&this.#r(a,l),this.#x(l)?(a&&(a.get="stale"),u?(a&&n&&p.__staleWhileFetching!==void 0&&(a.returnedStale=!0),n?p.__staleWhileFetching:void 0):(o||this.#D(e,"expire"),a&&n&&(a.returnedStale=!0),n?p:void 0)):(a&&(a.get="hit"),u?p.__staleWhileFetching:(this.#B(l),i&&this.#R(l),p))}else a&&(a.get="miss")}#V(e,r){this.#y[r]=e,this.#g[e]=r}#B(e){e!==this.#f&&(e===this.#d?this.#d=this.#g[e]:this.#V(this.#y[e],this.#g[e]),this.#V(this.#f,e),this.#f=e)}delete(e){return this.#D(e,"delete")}#D(e,r){let n=!1;if(this.#l!==0){let i=this.#a.get(e);if(i!==void 0)if(n=!0,this.#l===1)this.#H(r);else{this.#F(i);let o=this.#i[i];if(this.#p(o)?o.__abortController.abort(new Error("deleted")):(this.#v||this.#m)&&(this.#v&&this.#o?.(o,e,r),this.#m&&this.#h?.push([o,e,r])),this.#a.delete(e),this.#c[i]=void 0,this.#i[i]=void 0,i===this.#f)this.#f=this.#y[i];else if(i===this.#d)this.#d=this.#g[i];else{let a=this.#y[i];this.#g[a]=this.#g[i];let l=this.#g[i];this.#y[l]=this.#y[i]}this.#l--,this.#w.push(i)}}if(this.#m&&this.#h?.length){let i=this.#h,o;for(;o=i?.shift();)this.#n?.(...o)}return n}clear(){return this.#H("delete")}#H(e){for(let r of this.#P({allowStale:!0})){let n=this.#i[r];if(this.#p(n))n.__abortController.abort(new Error("deleted"));else{let i=this.#c[r];this.#v&&this.#o?.(n,i,e),this.#m&&this.#h?.push([n,i,e])}}if(this.#a.clear(),this.#i.fill(void 0),this.#c.fill(void 0),this.#T&&this.#E&&(this.#T.fill(0),this.#E.fill(0)),this.#_&&this.#_.fill(0),this.#d=0,this.#f=0,this.#w.length=0,this.#u=0,this.#l=0,this.#m&&this.#h){let r=this.#h,n;for(;n=r?.shift();)this.#n?.(...n)}}};var oc=require("node:path"),HF=require("node:url"),ii=require("fs"),JZ=dr(require("node:fs"),1),Ro=require("node:fs/promises");var Kg=require("node:events"),zv=dr(require("node:stream"),1),NF=require("node:string_decoder"),IF=typeof process=="object"&&process?process:{stdout:null,stderr:null},jZ=t=>!!t&&typeof t=="object"&&(t instanceof Eo||t instanceof zv.default||qZ(t)||zZ(t)),qZ=t=>!!t&&typeof t=="object"&&t instanceof Kg.EventEmitter&&typeof t.pipe=="function"&&t.pipe!==zv.default.Writable.prototype.pipe,zZ=t=>!!t&&typeof t=="object"&&t instanceof Kg.EventEmitter&&typeof t.write=="function"&&typeof t.end=="function",Oi=Symbol("EOF"),Ni=Symbol("maybeEmitEnd"),_o=Symbol("emittedEnd"),Wg=Symbol("emittingEnd"),hp=Symbol("emittedError"),$g=Symbol("closed"),FF=Symbol("read"),jg=Symbol("flush"),CF=Symbol("flushChunk"),Nn=Symbol("encoding"),nc=Symbol("decoder"),Mt=Symbol("flowing"),gp=Symbol("paused"),ic=Symbol("resume"),At=Symbol("buffer"),sr=Symbol("pipes"),Dt=Symbol("bufferLength"),Bv=Symbol("bufferPush"),qg=Symbol("bufferShift"),Gt=Symbol("objectMode"),dt=Symbol("destroyed"),Hv=Symbol("error"),Wv=Symbol("emitData"),OF=Symbol("emitEnd"),$v=Symbol("emitEnd2"),ri=Symbol("async"),jv=Symbol("abort"),zg=Symbol("aborted"),yp=Symbol("signal"),xs=Symbol("dataListeners"),qr=Symbol("discarded"),xp=t=>Promise.resolve().then(t),GZ=t=>t(),KZ=t=>t==="end"||t==="finish"||t==="prefinish",QZ=t=>t instanceof ArrayBuffer||!!t&&typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,ZZ=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),Gg=class{src;dest;opts;ondrain;constructor(e,r,n){this.src=e,this.dest=r,this.opts=n,this.ondrain=()=>e[ic](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(e){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},qv=class extends Gg{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,r,n){super(e,r,n),this.proxyErrors=i=>r.emit("error",i),e.on("error",this.proxyErrors)}},YZ=t=>!!t.objectMode,XZ=t=>!t.objectMode&&!!t.encoding&&t.encoding!=="buffer",Eo=class extends Kg.EventEmitter{[Mt]=!1;[gp]=!1;[sr]=[];[At]=[];[Gt];[Nn];[ri];[nc];[Oi]=!1;[_o]=!1;[Wg]=!1;[$g]=!1;[hp]=null;[Dt]=0;[dt]=!1;[yp];[zg]=!1;[xs]=0;[qr]=!1;writable=!0;readable=!0;constructor(...e){let r=e[0]||{};if(super(),r.objectMode&&typeof r.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");YZ(r)?(this[Gt]=!0,this[Nn]=null):XZ(r)?(this[Nn]=r.encoding,this[Gt]=!1):(this[Gt]=!1,this[Nn]=null),this[ri]=!!r.async,this[nc]=this[Nn]?new NF.StringDecoder(this[Nn]):null,r&&r.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[At]}),r&&r.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[sr]});let{signal:n}=r;n&&(this[yp]=n,n.aborted?this[jv]():n.addEventListener("abort",()=>this[jv]()))}get bufferLength(){return this[Dt]}get encoding(){return this[Nn]}set encoding(e){throw new Error("Encoding must be set at instantiation time")}setEncoding(e){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[Gt]}set objectMode(e){throw new Error("objectMode must be set at instantiation time")}get async(){return this[ri]}set async(e){this[ri]=this[ri]||!!e}[jv](){this[zg]=!0,this.emit("abort",this[yp]?.reason),this.destroy(this[yp]?.reason)}get aborted(){return this[zg]}set aborted(e){}write(e,r,n){if(this[zg])return!1;if(this[Oi])throw new Error("write after end");if(this[dt])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof r=="function"&&(n=r,r="utf8"),r||(r="utf8");let i=this[ri]?xp:GZ;if(!this[Gt]&&!Buffer.isBuffer(e)){if(ZZ(e))e=Buffer.from(e.buffer,e.byteOffset,e.byteLength);else if(QZ(e))e=Buffer.from(e);else if(typeof e!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[Gt]?(this[Mt]&&this[Dt]!==0&&this[jg](!0),this[Mt]?this.emit("data",e):this[Bv](e),this[Dt]!==0&&this.emit("readable"),n&&i(n),this[Mt]):e.length?(typeof e=="string"&&!(r===this[Nn]&&!this[nc]?.lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[Nn]&&(e=this[nc].write(e)),this[Mt]&&this[Dt]!==0&&this[jg](!0),this[Mt]?this.emit("data",e):this[Bv](e),this[Dt]!==0&&this.emit("readable"),n&&i(n),this[Mt]):(this[Dt]!==0&&this.emit("readable"),n&&i(n),this[Mt])}read(e){if(this[dt])return null;if(this[qr]=!1,this[Dt]===0||e===0||e&&e>this[Dt])return this[Ni](),null;this[Gt]&&(e=null),this[At].length>1&&!this[Gt]&&(this[At]=[this[Nn]?this[At].join(""):Buffer.concat(this[At],this[Dt])]);let r=this[FF](e||null,this[At][0]);return this[Ni](),r}[FF](e,r){if(this[Gt])this[qg]();else{let n=r;e===n.length||e===null?this[qg]():typeof n=="string"?(this[At][0]=n.slice(e),r=n.slice(0,e),this[Dt]-=e):(this[At][0]=n.subarray(e),r=n.subarray(0,e),this[Dt]-=e)}return this.emit("data",r),!this[At].length&&!this[Oi]&&this.emit("drain"),r}end(e,r,n){return typeof e=="function"&&(n=e,e=void 0),typeof r=="function"&&(n=r,r="utf8"),e!==void 0&&this.write(e,r),n&&this.once("end",n),this[Oi]=!0,this.writable=!1,(this[Mt]||!this[gp])&&this[Ni](),this}[ic](){this[dt]||(!this[xs]&&!this[sr].length&&(this[qr]=!0),this[gp]=!1,this[Mt]=!0,this.emit("resume"),this[At].length?this[jg]():this[Oi]?this[Ni]():this.emit("drain"))}resume(){return this[ic]()}pause(){this[Mt]=!1,this[gp]=!0,this[qr]=!1}get destroyed(){return this[dt]}get flowing(){return this[Mt]}get paused(){return this[gp]}[Bv](e){this[Gt]?this[Dt]+=1:this[Dt]+=e.length,this[At].push(e)}[qg](){return this[Gt]?this[Dt]-=1:this[Dt]-=this[At][0].length,this[At].shift()}[jg](e=!1){do;while(this[CF](this[qg]())&&this[At].length);!e&&!this[At].length&&!this[Oi]&&this.emit("drain")}[CF](e){return this.emit("data",e),this[Mt]}pipe(e,r){if(this[dt])return e;this[qr]=!1;let n=this[_o];return r=r||{},e===IF.stdout||e===IF.stderr?r.end=!1:r.end=r.end!==!1,r.proxyErrors=!!r.proxyErrors,n?r.end&&e.end():(this[sr].push(r.proxyErrors?new qv(this,e,r):new Gg(this,e,r)),this[ri]?xp(()=>this[ic]()):this[ic]()),e}unpipe(e){let r=this[sr].find(n=>n.dest===e);r&&(this[sr].length===1?(this[Mt]&&this[xs]===0&&(this[Mt]=!1),this[sr]=[]):this[sr].splice(this[sr].indexOf(r),1),r.unpipe())}addListener(e,r){return this.on(e,r)}on(e,r){let n=super.on(e,r);if(e==="data")this[qr]=!1,this[xs]++,!this[sr].length&&!this[Mt]&&this[ic]();else if(e==="readable"&&this[Dt]!==0)super.emit("readable");else if(KZ(e)&&this[_o])super.emit(e),this.removeAllListeners(e);else if(e==="error"&&this[hp]){let i=r;this[ri]?xp(()=>i.call(this,this[hp])):i.call(this,this[hp])}return n}removeListener(e,r){return this.off(e,r)}off(e,r){let n=super.off(e,r);return e==="data"&&(this[xs]=this.listeners("data").length,this[xs]===0&&!this[qr]&&!this[sr].length&&(this[Mt]=!1)),n}removeAllListeners(e){let r=super.removeAllListeners(e);return(e==="data"||e===void 0)&&(this[xs]=0,!this[qr]&&!this[sr].length&&(this[Mt]=!1)),r}get emittedEnd(){return this[_o]}[Ni](){!this[Wg]&&!this[_o]&&!this[dt]&&this[At].length===0&&this[Oi]&&(this[Wg]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[$g]&&this.emit("close"),this[Wg]=!1)}emit(e,...r){let n=r[0];if(e!=="error"&&e!=="close"&&e!==dt&&this[dt])return!1;if(e==="data")return!this[Gt]&&!n?!1:this[ri]?(xp(()=>this[Wv](n)),!0):this[Wv](n);if(e==="end")return this[OF]();if(e==="close"){if(this[$g]=!0,!this[_o]&&!this[dt])return!1;let o=super.emit("close");return this.removeAllListeners("close"),o}else if(e==="error"){this[hp]=n,super.emit(Hv,n);let o=!this[yp]||this.listeners("error").length?super.emit("error",n):!1;return this[Ni](),o}else if(e==="resume"){let o=super.emit("resume");return this[Ni](),o}else if(e==="finish"||e==="prefinish"){let o=super.emit(e);return this.removeAllListeners(e),o}let i=super.emit(e,...r);return this[Ni](),i}[Wv](e){for(let n of this[sr])n.dest.write(e)===!1&&this.pause();let r=this[qr]?!1:super.emit("data",e);return this[Ni](),r}[OF](){return this[_o]?!1:(this[_o]=!0,this.readable=!1,this[ri]?(xp(()=>this[$v]()),!0):this[$v]())}[$v](){if(this[nc]){let r=this[nc].end();if(r){for(let n of this[sr])n.dest.write(r);this[qr]||super.emit("data",r)}}for(let r of this[sr])r.end();let e=super.emit("end");return this.removeAllListeners("end"),e}async collect(){let e=Object.assign([],{dataLength:0});this[Gt]||(e.dataLength=0);let r=this.promise();return this.on("data",n=>{e.push(n),this[Gt]||(e.dataLength+=n.length)}),await r,e}async concat(){if(this[Gt])throw new Error("cannot concat in objectMode");let e=await this.collect();return this[Nn]?e.join(""):Buffer.concat(e,e.dataLength)}async promise(){return new Promise((e,r)=>{this.on(dt,()=>r(new Error("stream destroyed"))),this.on("error",n=>r(n)),this.on("end",()=>e())})}[Symbol.asyncIterator](){this[qr]=!1;let e=!1,r=async()=>(this.pause(),e=!0,{value:void 0,done:!0});return{next:()=>{if(e)return r();let i=this.read();if(i!==null)return Promise.resolve({done:!1,value:i});if(this[Oi])return r();let o,a,l=h=>{this.off("data",p),this.off("end",u),this.off(dt,d),r(),a(h)},p=h=>{this.off("error",l),this.off("end",u),this.off(dt,d),this.pause(),o({value:h,done:!!this[Oi]})},u=()=>{this.off("error",l),this.off("data",p),this.off(dt,d),r(),o({done:!0,value:void 0})},d=()=>l(new Error("stream destroyed"));return new Promise((h,g)=>{a=g,o=h,this.once(dt,d),this.once("error",l),this.once("end",u),this.once("data",p)})},throw:r,return:r,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[qr]=!1;let e=!1,r=()=>(this.pause(),this.off(Hv,r),this.off(dt,r),this.off("end",r),e=!0,{done:!0,value:void 0}),n=()=>{if(e)return r();let i=this.read();return i===null?r():{done:!1,value:i}};return this.once("end",r),this.once(Hv,r),this.once(dt,r),{next:n,throw:r,return:r,[Symbol.iterator](){return this}}}destroy(e){if(this[dt])return e?this.emit("error",e):this.emit(dt),this;this[dt]=!0,this[qr]=!0,this[At].length=0,this[Dt]=0;let r=this;return typeof r.close=="function"&&!this[$g]&&r.close(),e?this.emit("error",e):this.emit(dt),this}static get isStream(){return jZ}};var eY=ii.realpathSync.native,Sp={lstatSync:ii.lstatSync,readdir:ii.readdir,readdirSync:ii.readdirSync,readlinkSync:ii.readlinkSync,realpathSync:eY,promises:{lstat:Ro.lstat,readdir:Ro.readdir,readlink:Ro.readlink,realpath:Ro.realpath}},WF=t=>!t||t===Sp||t===JZ?Sp:{...Sp,...t,promises:{...Sp.promises,...t.promises||{}}},$F=/^\\\\\?\\([a-z]:)\\?$/i,tY=t=>t.replace(/\//g,"\\").replace($F,"$1\\"),rY=/[\\\/]/,yn=0,jF=1,qF=2,ni=4,zF=6,GF=8,Ts=10,KF=12,gn=15,Tp=~gn,Gv=16,LF=32,vp=64,Ln=128,Qg=256,Yg=512,UF=vp|Ln|Yg,nY=1023,Kv=t=>t.isFile()?GF:t.isDirectory()?ni:t.isSymbolicLink()?Ts:t.isCharacterDevice()?qF:t.isBlockDevice()?zF:t.isSocket()?KF:t.isFIFO()?jF:yn,VF=new Map,bp=t=>{let e=VF.get(t);if(e)return e;let r=t.normalize("NFKD");return VF.set(t,r),r},BF=new Map,Zg=t=>{let e=BF.get(t);if(e)return e;let r=bp(t.toLowerCase());return BF.set(t,r),r},Xg=class extends mp{constructor(){super({max:256})}},Qv=class extends mp{constructor(e=16*1024){super({maxSize:e,sizeCalculation:r=>r.length+1})}},QF=Symbol("PathScurry setAsCwd"),Kt=class{name;root;roots;parent;nocase;isCWD=!1;#e;#t;get dev(){return this.#t}#o;get mode(){return this.#o}#n;get nlink(){return this.#n}#s;get uid(){return this.#s}#S;get gid(){return this.#S}#l;get rdev(){return this.#l}#u;get blksize(){return this.#u}#a;get ino(){return this.#a}#c;get size(){return this.#c}#i;get blocks(){return this.#i}#g;get atimeMs(){return this.#g}#y;get mtimeMs(){return this.#y}#d;get ctimeMs(){return this.#d}#f;get birthtimeMs(){return this.#f}#w;get atime(){return this.#w}#h;get mtime(){return this.#h}#_;get ctime(){return this.#_}#E;get birthtime(){return this.#E}#T;#v;#b;#m;#M;#R;#r;#I;#x;#A;get parentPath(){return(this.parent||this).fullpath()}get path(){return this.parentPath}constructor(e,r=yn,n,i,o,a,l){this.name=e,this.#T=o?Zg(e):bp(e),this.#r=r&nY,this.nocase=o,this.roots=i,this.root=n||this,this.#I=a,this.#b=l.fullpath,this.#M=l.relative,this.#R=l.relativePosix,this.parent=l.parent,this.parent?this.#e=this.parent.#e:this.#e=WF(l.fs)}depth(){return this.#v!==void 0?this.#v:this.parent?this.#v=this.parent.depth()+1:this.#v=0}childrenCache(){return this.#I}resolve(e){if(!e)return this;let r=this.getRootString(e),i=e.substring(r.length).split(this.splitSep);return r?this.getRoot(r).#F(i):this.#F(i)}#F(e){let r=this;for(let n of e)r=r.child(n);return r}children(){let e=this.#I.get(this);if(e)return e;let r=Object.assign([],{provisional:0});return this.#I.set(this,r),this.#r&=~Gv,r}child(e,r){if(e===""||e===".")return this;if(e==="..")return this.parent||this;let n=this.children(),i=this.nocase?Zg(e):bp(e);for(let p of n)if(p.#T===i)return p;let o=this.parent?this.sep:"",a=this.#b?this.#b+o+e:void 0,l=this.newChild(e,yn,{...r,parent:this,fullpath:a});return this.canReaddir()||(l.#r|=Ln),n.push(l),l}relative(){if(this.isCWD)return"";if(this.#M!==void 0)return this.#M;let e=this.name,r=this.parent;if(!r)return this.#M=this.name;let n=r.relative();return n+(!n||!r.parent?"":this.sep)+e}relativePosix(){if(this.sep==="/")return this.relative();if(this.isCWD)return"";if(this.#R!==void 0)return this.#R;let e=this.name,r=this.parent;if(!r)return this.#R=this.fullpathPosix();let n=r.relativePosix();return n+(!n||!r.parent?"":"/")+e}fullpath(){if(this.#b!==void 0)return this.#b;let e=this.name,r=this.parent;if(!r)return this.#b=this.name;let i=r.fullpath()+(r.parent?this.sep:"")+e;return this.#b=i}fullpathPosix(){if(this.#m!==void 0)return this.#m;if(this.sep==="/")return this.#m=this.fullpath();if(!this.parent){let i=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(i)?this.#m=`//?/${i}`:this.#m=i}let e=this.parent,r=e.fullpathPosix(),n=r+(!r||!e.parent?"":"/")+this.name;return this.#m=n}isUnknown(){return(this.#r&gn)===yn}isType(e){return this[`is${e}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#r&gn)===GF}isDirectory(){return(this.#r&gn)===ni}isCharacterDevice(){return(this.#r&gn)===qF}isBlockDevice(){return(this.#r&gn)===zF}isFIFO(){return(this.#r&gn)===jF}isSocket(){return(this.#r&gn)===KF}isSymbolicLink(){return(this.#r&Ts)===Ts}lstatCached(){return this.#r&LF?this:void 0}readlinkCached(){return this.#x}realpathCached(){return this.#A}readdirCached(){let e=this.children();return e.slice(0,e.provisional)}canReadlink(){if(this.#x)return!0;if(!this.parent)return!1;let e=this.#r&gn;return!(e!==yn&&e!==Ts||this.#r&Qg||this.#r&Ln)}calledReaddir(){return!!(this.#r&Gv)}isENOENT(){return!!(this.#r&Ln)}isNamed(e){return this.nocase?this.#T===Zg(e):this.#T===bp(e)}async readlink(){let e=this.#x;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=await this.#e.promises.readlink(this.fullpath()),n=(await this.parent.realpath())?.resolve(r);if(n)return this.#x=n}catch(r){this.#p(r.code);return}}readlinkSync(){let e=this.#x;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=this.#e.readlinkSync(this.fullpath()),n=this.parent.realpathSync()?.resolve(r);if(n)return this.#x=n}catch(r){this.#p(r.code);return}}#C(e){this.#r|=Gv;for(let r=e.provisional;r<e.length;r++){let n=e[r];n&&n.#O()}}#O(){this.#r&Ln||(this.#r=(this.#r|Ln)&Tp,this.#k())}#k(){let e=this.children();e.provisional=0;for(let r of e)r.#O()}#P(){this.#r|=Yg,this.#N()}#N(){if(this.#r&vp)return;let e=this.#r;(e&gn)===ni&&(e&=Tp),this.#r=e|vp,this.#k()}#L(e=""){e==="ENOTDIR"||e==="EPERM"?this.#N():e==="ENOENT"?this.#O():this.children().provisional=0}#U(e=""){e==="ENOTDIR"?this.parent.#N():e==="ENOENT"&&this.#O()}#p(e=""){let r=this.#r;r|=Qg,e==="ENOENT"&&(r|=Ln),(e==="EINVAL"||e==="UNKNOWN")&&(r&=Tp),this.#r=r,e==="ENOTDIR"&&this.parent&&this.parent.#N()}#V(e,r){return this.#D(e,r)||this.#B(e,r)}#B(e,r){let n=Kv(e),i=this.newChild(e.name,n,{parent:this}),o=i.#r&gn;return o!==ni&&o!==Ts&&o!==yn&&(i.#r|=vp),r.unshift(i),r.provisional++,i}#D(e,r){for(let n=r.provisional;n<r.length;n++){let i=r[n];if((this.nocase?Zg(e.name):bp(e.name))===i.#T)return this.#H(e,i,n,r)}}#H(e,r,n,i){let o=r.name;return r.#r=r.#r&Tp|Kv(e),o!==e.name&&(r.name=e.name),n!==i.provisional&&(n===i.length-1?i.pop():i.splice(n,1),i.unshift(r)),i.provisional++,r}async lstat(){if(!(this.#r&Ln))try{return this.#q(await this.#e.promises.lstat(this.fullpath())),this}catch(e){this.#U(e.code)}}lstatSync(){if(!(this.#r&Ln))try{return this.#q(this.#e.lstatSync(this.fullpath())),this}catch(e){this.#U(e.code)}}#q(e){let{atime:r,atimeMs:n,birthtime:i,birthtimeMs:o,blksize:a,blocks:l,ctime:p,ctimeMs:u,dev:d,gid:h,ino:g,mode:x,mtime:_,mtimeMs:w,nlink:C,rdev:M,size:U,uid:Z}=e;this.#w=r,this.#g=n,this.#E=i,this.#f=o,this.#u=a,this.#i=l,this.#_=p,this.#d=u,this.#t=d,this.#S=h,this.#a=g,this.#o=x,this.#h=_,this.#y=w,this.#n=C,this.#l=M,this.#c=U,this.#s=Z;let ne=Kv(e);this.#r=this.#r&Tp|ne|LF,ne!==yn&&ne!==ni&&ne!==Ts&&(this.#r|=vp)}#$=[];#j=!1;#z(e){this.#j=!1;let r=this.#$.slice();this.#$.length=0,r.forEach(n=>n(null,e))}readdirCB(e,r=!1){if(!this.canReaddir()){r?e(null,[]):queueMicrotask(()=>e(null,[]));return}let n=this.children();if(this.calledReaddir()){let o=n.slice(0,n.provisional);r?e(null,o):queueMicrotask(()=>e(null,o));return}if(this.#$.push(e),this.#j)return;this.#j=!0;let i=this.fullpath();this.#e.readdir(i,{withFileTypes:!0},(o,a)=>{if(o)this.#L(o.code),n.provisional=0;else{for(let l of a)this.#V(l,n);this.#C(n)}this.#z(n.slice(0,n.provisional))})}#W;async readdir(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();if(this.#W)await this.#W;else{let n=()=>{};this.#W=new Promise(i=>n=i);try{for(let i of await this.#e.promises.readdir(r,{withFileTypes:!0}))this.#V(i,e);this.#C(e)}catch(i){this.#L(i.code),e.provisional=0}this.#W=void 0,n()}return e.slice(0,e.provisional)}readdirSync(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();try{for(let n of this.#e.readdirSync(r,{withFileTypes:!0}))this.#V(n,e);this.#C(e)}catch(n){this.#L(n.code),e.provisional=0}return e.slice(0,e.provisional)}canReaddir(){if(this.#r&UF)return!1;let e=gn&this.#r;return e===yn||e===ni||e===Ts}shouldWalk(e,r){return(this.#r&ni)===ni&&!(this.#r&UF)&&!e.has(this)&&(!r||r(this))}async realpath(){if(this.#A)return this.#A;if(!((Yg|Qg|Ln)&this.#r))try{let e=await this.#e.promises.realpath(this.fullpath());return this.#A=this.resolve(e)}catch{this.#P()}}realpathSync(){if(this.#A)return this.#A;if(!((Yg|Qg|Ln)&this.#r))try{let e=this.#e.realpathSync(this.fullpath());return this.#A=this.resolve(e)}catch{this.#P()}}[QF](e){if(e===this)return;e.isCWD=!1,this.isCWD=!0;let r=new Set([]),n=[],i=this;for(;i&&i.parent;)r.add(i),i.#M=n.join(this.sep),i.#R=n.join("/"),i=i.parent,n.push("..");for(i=e;i&&i.parent&&!r.has(i);)i.#M=void 0,i.#R=void 0,i=i.parent}},Jg=class t extends Kt{sep="\\";splitSep=rY;constructor(e,r=yn,n,i,o,a,l){super(e,r,n,i,o,a,l)}newChild(e,r=yn,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}getRootString(e){return oc.win32.parse(e).root}getRoot(e){if(e=tY(e.toUpperCase()),e===this.root.name)return this.root;for(let[r,n]of Object.entries(this.roots))if(this.sameRoot(e,r))return this.roots[e]=n;return this.roots[e]=new sc(e,this).root}sameRoot(e,r=this.root.name){return e=e.toUpperCase().replace(/\//g,"\\").replace($F,"$1\\"),e===r}},ey=class t extends Kt{splitSep="/";sep="/";constructor(e,r=yn,n,i,o,a,l){super(e,r,n,i,o,a,l)}getRootString(e){return e.startsWith("/")?"/":""}getRoot(e){return this.root}newChild(e,r=yn,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}},ty=class{root;rootPath;roots;cwd;#e;#t;#o;nocase;#n;constructor(e=process.cwd(),r,n,{nocase:i,childrenCacheSize:o=16*1024,fs:a=Sp}={}){this.#n=WF(a),(e instanceof URL||e.startsWith("file://"))&&(e=(0,HF.fileURLToPath)(e));let l=r.resolve(e);this.roots=Object.create(null),this.rootPath=this.parseRootPath(l),this.#e=new Xg,this.#t=new Xg,this.#o=new Qv(o);let p=l.substring(this.rootPath.length).split(n);if(p.length===1&&!p[0]&&p.pop(),i===void 0)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=i,this.root=this.newRoot(this.#n),this.roots[this.rootPath]=this.root;let u=this.root,d=p.length-1,h=r.sep,g=this.rootPath,x=!1;for(let _ of p){let w=d--;u=u.child(_,{relative:new Array(w).fill("..").join(h),relativePosix:new Array(w).fill("..").join("/"),fullpath:g+=(x?"":h)+_}),x=!0}this.cwd=u}depth(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.depth()}childrenCache(){return this.#o}resolve(...e){let r="";for(let o=e.length-1;o>=0;o--){let a=e[o];if(!(!a||a===".")&&(r=r?`${a}/${r}`:a,this.isAbsolute(a)))break}let n=this.#e.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpath();return this.#e.set(r,i),i}resolvePosix(...e){let r="";for(let o=e.length-1;o>=0;o--){let a=e[o];if(!(!a||a===".")&&(r=r?`${a}/${r}`:a,this.isAbsolute(a)))break}let n=this.#t.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpathPosix();return this.#t.set(r,i),i}relative(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relative()}relativePosix(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relativePosix()}basename(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.name}dirname(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),(e.parent||e).fullpath()}async readdir(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Kt||(r=e,e=this.cwd);let{withFileTypes:n}=r;if(e.canReaddir()){let i=await e.readdir();return n?i:i.map(o=>o.name)}else return[]}readdirSync(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Kt||(r=e,e=this.cwd);let{withFileTypes:n=!0}=r;return e.canReaddir()?n?e.readdirSync():e.readdirSync().map(i=>i.name):[]}async lstat(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstat()}lstatSync(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstatSync()}async readlink(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Kt||(r=e.withFileTypes,e=this.cwd);let n=await e.readlink();return r?n:n?.fullpath()}readlinkSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Kt||(r=e.withFileTypes,e=this.cwd);let n=e.readlinkSync();return r?n:n?.fullpath()}async realpath(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Kt||(r=e.withFileTypes,e=this.cwd);let n=await e.realpath();return r?n:n?.fullpath()}realpathSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Kt||(r=e.withFileTypes,e=this.cwd);let n=e.realpathSync();return r?n:n?.fullpath()}async walk(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Kt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:a}=r,l=[];(!o||o(e))&&l.push(n?e:e.fullpath());let p=new Set,u=(h,g)=>{p.add(h),h.readdirCB((x,_)=>{if(x)return g(x);let w=_.length;if(!w)return g();let C=()=>{--w===0&&g()};for(let M of _)(!o||o(M))&&l.push(n?M:M.fullpath()),i&&M.isSymbolicLink()?M.realpath().then(U=>U?.isUnknown()?U.lstat():U).then(U=>U?.shouldWalk(p,a)?u(U,C):C()):M.shouldWalk(p,a)?u(M,C):C()},!0)},d=e;return new Promise((h,g)=>{u(d,x=>{if(x)return g(x);h(l)})})}walkSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Kt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:a}=r,l=[];(!o||o(e))&&l.push(n?e:e.fullpath());let p=new Set([e]);for(let u of p){let d=u.readdirSync();for(let h of d){(!o||o(h))&&l.push(n?h:h.fullpath());let g=h;if(h.isSymbolicLink()){if(!(i&&(g=h.realpathSync())))continue;g.isUnknown()&&g.lstatSync()}g.shouldWalk(p,a)&&p.add(g)}}return l}[Symbol.asyncIterator](){return this.iterate()}iterate(e=this.cwd,r={}){return typeof e=="string"?e=this.cwd.resolve(e):e instanceof Kt||(r=e,e=this.cwd),this.stream(e,r)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Kt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:a}=r;(!o||o(e))&&(yield n?e:e.fullpath());let l=new Set([e]);for(let p of l){let u=p.readdirSync();for(let d of u){(!o||o(d))&&(yield n?d:d.fullpath());let h=d;if(d.isSymbolicLink()){if(!(i&&(h=d.realpathSync())))continue;h.isUnknown()&&h.lstatSync()}h.shouldWalk(l,a)&&l.add(h)}}}stream(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Kt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:a}=r,l=new Eo({objectMode:!0});(!o||o(e))&&l.write(n?e:e.fullpath());let p=new Set,u=[e],d=0,h=()=>{let g=!1;for(;!g;){let x=u.shift();if(!x){d===0&&l.end();return}d++,p.add(x);let _=(C,M,U=!1)=>{if(C)return l.emit("error",C);if(i&&!U){let Z=[];for(let ne of M)ne.isSymbolicLink()&&Z.push(ne.realpath().then(ge=>ge?.isUnknown()?ge.lstat():ge));if(Z.length){Promise.all(Z).then(()=>_(null,M,!0));return}}for(let Z of M)Z&&(!o||o(Z))&&(l.write(n?Z:Z.fullpath())||(g=!0));d--;for(let Z of M){let ne=Z.realpathCached()||Z;ne.shouldWalk(p,a)&&u.push(ne)}g&&!l.flowing?l.once("drain",h):w||h()},w=!0;x.readdirCB(_,!0),w=!1}};return h(),l}streamSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Kt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:a}=r,l=new Eo({objectMode:!0}),p=new Set;(!o||o(e))&&l.write(n?e:e.fullpath());let u=[e],d=0,h=()=>{let g=!1;for(;!g;){let x=u.shift();if(!x){d===0&&l.end();return}d++,p.add(x);let _=x.readdirSync();for(let w of _)(!o||o(w))&&(l.write(n?w:w.fullpath())||(g=!0));d--;for(let w of _){let C=w;if(w.isSymbolicLink()){if(!(i&&(C=w.realpathSync())))continue;C.isUnknown()&&C.lstatSync()}C.shouldWalk(p,a)&&u.push(C)}}g&&!l.flowing&&l.once("drain",h)};return h(),l}chdir(e=this.cwd){let r=this.cwd;this.cwd=typeof e=="string"?this.cwd.resolve(e):e,this.cwd[QF](r)}},sc=class extends ty{sep="\\";constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,oc.win32,"\\",{...r,nocase:n}),this.nocase=n;for(let i=this.cwd;i;i=i.parent)i.nocase=this.nocase}parseRootPath(e){return oc.win32.parse(e).root.toUpperCase()}newRoot(e){return new Jg(this.rootPath,ni,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")||e.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(e)}},ac=class extends ty{sep="/";constructor(e=process.cwd(),r={}){let{nocase:n=!1}=r;super(e,oc.posix,"/",{...r,nocase:n}),this.nocase=n}parseRootPath(e){return"/"}newRoot(e){return new ey(this.rootPath,ni,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")}},wp=class extends ac{constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,{...r,nocase:n})}},GNe=process.platform==="win32"?Jg:ey,ZF=process.platform==="win32"?sc:process.platform==="darwin"?wp:ac;var iY=t=>t.length>=1,oY=t=>t.length>=1,cc=class t{#e;#t;#o;length;#n;#s;#S;#l;#u;#a;#c=!0;constructor(e,r,n,i){if(!iY(e))throw new TypeError("empty pattern list");if(!oY(r))throw new TypeError("empty glob list");if(r.length!==e.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=e.length,n<0||n>=this.length)throw new TypeError("index out of range");if(this.#e=e,this.#t=r,this.#o=n,this.#n=i,this.#o===0){if(this.isUNC()){let[o,a,l,p,...u]=this.#e,[d,h,g,x,..._]=this.#t;u[0]===""&&(u.shift(),_.shift());let w=[o,a,l,p,""].join("/"),C=[d,h,g,x,""].join("/");this.#e=[w,...u],this.#t=[C,..._],this.length=this.#e.length}else if(this.isDrive()||this.isAbsolute()){let[o,...a]=this.#e,[l,...p]=this.#t;a[0]===""&&(a.shift(),p.shift());let u=o+"/",d=l+"/";this.#e=[u,...a],this.#t=[d,...p],this.length=this.#e.length}}}pattern(){return this.#e[this.#o]}isString(){return typeof this.#e[this.#o]=="string"}isGlobstar(){return this.#e[this.#o]===Ut}isRegExp(){return this.#e[this.#o]instanceof RegExp}globString(){return this.#S=this.#S||(this.#o===0?this.isAbsolute()?this.#t[0]+this.#t.slice(1).join("/"):this.#t.join("/"):this.#t.slice(this.#o).join("/"))}hasMore(){return this.length>this.#o+1}rest(){return this.#s!==void 0?this.#s:this.hasMore()?(this.#s=new t(this.#e,this.#t,this.#o+1,this.#n),this.#s.#a=this.#a,this.#s.#u=this.#u,this.#s.#l=this.#l,this.#s):this.#s=null}isUNC(){let e=this.#e;return this.#u!==void 0?this.#u:this.#u=this.#n==="win32"&&this.#o===0&&e[0]===""&&e[1]===""&&typeof e[2]=="string"&&!!e[2]&&typeof e[3]=="string"&&!!e[3]}isDrive(){let e=this.#e;return this.#l!==void 0?this.#l:this.#l=this.#n==="win32"&&this.#o===0&&this.length>1&&typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0])}isAbsolute(){let e=this.#e;return this.#a!==void 0?this.#a:this.#a=e[0]===""&&e.length>1||this.isDrive()||this.isUNC()}root(){let e=this.#e[0];return typeof e=="string"&&this.isAbsolute()&&this.#o===0?e:""}checkFollowGlobstar(){return!(this.#o===0||!this.isGlobstar()||!this.#c)}markFollowGlobstar(){return this.#o===0||!this.isGlobstar()||!this.#c?!1:(this.#c=!1,!0)}};var sY=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",lc=class{relative;relativeChildren;absolute;absoluteChildren;platform;mmopts;constructor(e,{nobrace:r,nocase:n,noext:i,noglobstar:o,platform:a=sY}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[],this.platform=a,this.mmopts={dot:!0,nobrace:r,nocase:n,noext:i,noglobstar:o,optimizationLevel:2,platform:a,nocomment:!0,nonegate:!0};for(let l of e)this.add(l)}add(e){let r=new jr(e,this.mmopts);for(let n=0;n<r.set.length;n++){let i=r.set[n],o=r.globParts[n];if(!i||!o)throw new Error("invalid pattern object");for(;i[0]==="."&&o[0]===".";)i.shift(),o.shift();let a=new cc(i,o,0,this.platform),l=new jr(a.globString(),this.mmopts),p=o[o.length-1]==="**",u=a.isAbsolute();u?this.absolute.push(l):this.relative.push(l),p&&(u?this.absoluteChildren.push(l):this.relativeChildren.push(l))}}ignored(e){let r=e.fullpath(),n=`${r}/`,i=e.relative()||".",o=`${i}/`;for(let a of this.relative)if(a.match(i)||a.match(o))return!0;for(let a of this.absolute)if(a.match(r)||a.match(n))return!0;return!1}childrenIgnored(e){let r=e.fullpath()+"/",n=(e.relative()||".")+"/";for(let i of this.relativeChildren)if(i.match(n))return!0;for(let i of this.absoluteChildren)if(i.match(r))return!0;return!1}};var Zv=class t{store;constructor(e=new Map){this.store=e}copy(){return new t(new Map(this.store))}hasWalked(e,r){return this.store.get(e.fullpath())?.has(r.globString())}storeWalked(e,r){let n=e.fullpath(),i=this.store.get(n);i?i.add(r.globString()):this.store.set(n,new Set([r.globString()]))}},Yv=class{store=new Map;add(e,r,n){let i=(r?2:0)|(n?1:0),o=this.store.get(e);this.store.set(e,o===void 0?i:i&o)}entries(){return[...this.store.entries()].map(([e,r])=>[e,!!(r&2),!!(r&1)])}},Xv=class{store=new Map;add(e,r){if(!e.canReaddir())return;let n=this.store.get(e);n?n.find(i=>i.globString()===r.globString())||n.push(r):this.store.set(e,[r])}get(e){let r=this.store.get(e);if(!r)throw new Error("attempting to walk unknown path");return r}entries(){return this.keys().map(e=>[e,this.store.get(e)])}keys(){return[...this.store.keys()].filter(e=>e.canReaddir())}},_p=class t{hasWalkedCache;matches=new Yv;subwalks=new Xv;patterns;follow;dot;opts;constructor(e,r){this.opts=e,this.follow=!!e.follow,this.dot=!!e.dot,this.hasWalkedCache=r?r.copy():new Zv}processPatterns(e,r){this.patterns=r;let n=r.map(i=>[e,i]);for(let[i,o]of n){this.hasWalkedCache.storeWalked(i,o);let a=o.root(),l=o.isAbsolute()&&this.opts.absolute!==!1;if(a){i=i.resolve(a==="/"&&this.opts.root!==void 0?this.opts.root:a);let h=o.rest();if(h)o=h;else{this.matches.add(i,!0,!1);continue}}if(i.isENOENT())continue;let p,u,d=!1;for(;typeof(p=o.pattern())=="string"&&(u=o.rest());)i=i.resolve(p),o=u,d=!0;if(p=o.pattern(),u=o.rest(),d){if(this.hasWalkedCache.hasWalked(i,o))continue;this.hasWalkedCache.storeWalked(i,o)}if(typeof p=="string"){let h=p===".."||p===""||p===".";this.matches.add(i.resolve(p),l,h);continue}else if(p===Ut){(!i.isSymbolicLink()||this.follow||o.checkFollowGlobstar())&&this.subwalks.add(i,o);let h=u?.pattern(),g=u?.rest();if(!u||(h===""||h===".")&&!g)this.matches.add(i,l,h===""||h===".");else if(h===".."){let x=i.parent||i;g?this.hasWalkedCache.hasWalked(x,g)||this.subwalks.add(x,g):this.matches.add(x,l,!0)}}else p instanceof RegExp&&this.subwalks.add(i,o)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new t(this.opts,this.hasWalkedCache)}filterEntries(e,r){let n=this.subwalks.get(e),i=this.child();for(let o of r)for(let a of n){let l=a.isAbsolute(),p=a.pattern(),u=a.rest();p===Ut?i.testGlobstar(o,a,u,l):p instanceof RegExp?i.testRegExp(o,p,u,l):i.testString(o,p,u,l)}return i}testGlobstar(e,r,n,i){if((this.dot||!e.name.startsWith("."))&&(r.hasMore()||this.matches.add(e,i,!1),e.canReaddir()&&(this.follow||!e.isSymbolicLink()?this.subwalks.add(e,r):e.isSymbolicLink()&&(n&&r.checkFollowGlobstar()?this.subwalks.add(e,n):r.markFollowGlobstar()&&this.subwalks.add(e,r)))),n){let o=n.pattern();if(typeof o=="string"&&o!==".."&&o!==""&&o!==".")this.testString(e,o,n.rest(),i);else if(o===".."){let a=e.parent||e;this.subwalks.add(a,n)}else o instanceof RegExp&&this.testRegExp(e,o,n.rest(),i)}}testRegExp(e,r,n,i){r.test(e.name)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}testString(e,r,n,i){e.isNamed(r)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}};var aY=(t,e)=>typeof t=="string"?new lc([t],e):Array.isArray(t)?new lc(t,e):t,ry=class{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#e=[];#t;#o;signal;maxDepth;includeChildMatches;constructor(e,r,n){if(this.patterns=e,this.path=r,this.opts=n,this.#o=!n.posix&&n.platform==="win32"?"\\":"/",this.includeChildMatches=n.includeChildMatches!==!1,(n.ignore||!this.includeChildMatches)&&(this.#t=aY(n.ignore??[],n),!this.includeChildMatches&&typeof this.#t.add!="function")){let i="cannot ignore child matches, ignore lacks add() method.";throw new Error(i)}this.maxDepth=n.maxDepth||1/0,n.signal&&(this.signal=n.signal,this.signal.addEventListener("abort",()=>{this.#e.length=0}))}#n(e){return this.seen.has(e)||!!this.#t?.ignored?.(e)}#s(e){return!!this.#t?.childrenIgnored?.(e)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;this.paused=!1;let e;for(;!this.paused&&(e=this.#e.shift());)e()}onResume(e){this.signal?.aborted||(this.paused?this.#e.push(e):e())}async matchCheck(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||await e.realpath(),!n)return;e=n}let o=e.isUnknown()||this.opts.stat?await e.lstat():e;if(this.opts.follow&&this.opts.nodir&&o?.isSymbolicLink()){let a=await o.realpath();a&&(a.isUnknown()||this.opts.stat)&&await a.lstat()}return this.matchCheckTest(o,r)}matchCheckTest(e,r){return e&&(this.maxDepth===1/0||e.depth()<=this.maxDepth)&&(!r||e.canReaddir())&&(!this.opts.nodir||!e.isDirectory())&&(!this.opts.nodir||!this.opts.follow||!e.isSymbolicLink()||!e.realpathCached()?.isDirectory())&&!this.#n(e)?e:void 0}matchCheckSync(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||e.realpathSync(),!n)return;e=n}let o=e.isUnknown()||this.opts.stat?e.lstatSync():e;if(this.opts.follow&&this.opts.nodir&&o?.isSymbolicLink()){let a=o.realpathSync();a&&(a?.isUnknown()||this.opts.stat)&&a.lstatSync()}return this.matchCheckTest(o,r)}matchFinish(e,r){if(this.#n(e))return;if(!this.includeChildMatches&&this.#t?.add){let o=`${e.relativePosix()}/**`;this.#t.add(o)}let n=this.opts.absolute===void 0?r:this.opts.absolute;this.seen.add(e);let i=this.opts.mark&&e.isDirectory()?this.#o:"";if(this.opts.withFileTypes)this.matchEmit(e);else if(n){let o=this.opts.posix?e.fullpathPosix():e.fullpath();this.matchEmit(o+i)}else{let o=this.opts.posix?e.relativePosix():e.relative(),a=this.opts.dotRelative&&!o.startsWith(".."+this.#o)?"."+this.#o:"";this.matchEmit(o?a+o+i:"."+i)}}async match(e,r,n){let i=await this.matchCheck(e,n);i&&this.matchFinish(i,r)}matchSync(e,r,n){let i=this.matchCheckSync(e,n);i&&this.matchFinish(i,r)}walkCB(e,r,n){this.signal?.aborted&&n(),this.walkCB2(e,r,new _p(this.opts),n)}walkCB2(e,r,n,i){if(this.#s(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2(e,r,n,i));return}n.processPatterns(e,r);let o=1,a=()=>{--o===0&&i()};for(let[l,p,u]of n.matches.entries())this.#n(l)||(o++,this.match(l,p,u).then(()=>a()));for(let l of n.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;o++;let p=l.readdirCached();l.calledReaddir()?this.walkCB3(l,p,n,a):l.readdirCB((u,d)=>this.walkCB3(l,d,n,a),!0)}a()}walkCB3(e,r,n,i){n=n.filterEntries(e,r);let o=1,a=()=>{--o===0&&i()};for(let[l,p,u]of n.matches.entries())this.#n(l)||(o++,this.match(l,p,u).then(()=>a()));for(let[l,p]of n.subwalks.entries())o++,this.walkCB2(l,p,n.child(),a);a()}walkCBSync(e,r,n){this.signal?.aborted&&n(),this.walkCB2Sync(e,r,new _p(this.opts),n)}walkCB2Sync(e,r,n,i){if(this.#s(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2Sync(e,r,n,i));return}n.processPatterns(e,r);let o=1,a=()=>{--o===0&&i()};for(let[l,p,u]of n.matches.entries())this.#n(l)||this.matchSync(l,p,u);for(let l of n.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;o++;let p=l.readdirSync();this.walkCB3Sync(l,p,n,a)}a()}walkCB3Sync(e,r,n,i){n=n.filterEntries(e,r);let o=1,a=()=>{--o===0&&i()};for(let[l,p,u]of n.matches.entries())this.#n(l)||this.matchSync(l,p,u);for(let[l,p]of n.subwalks.entries())o++,this.walkCB2Sync(l,p,n.child(),a);a()}},Ep=class extends ry{matches=new Set;constructor(e,r,n){super(e,r,n)}matchEmit(e){this.matches.add(e)}async walk(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise((e,r)=>{this.walkCB(this.path,this.patterns,()=>{this.signal?.aborted?r(this.signal.reason):e(this.matches)})}),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>{if(this.signal?.aborted)throw this.signal.reason}),this.matches}},Rp=class extends ry{results;constructor(e,r,n){super(e,r,n),this.results=new Eo({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(e){this.results.write(e),this.results.flowing||this.pause()}stream(){let e=this.path;return e.isUnknown()?e.lstat().then(()=>{this.walkCB(e,this.patterns,()=>this.results.end())}):this.walkCB(e,this.patterns,()=>this.results.end()),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}};var cY=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",Un=class{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;includeChildMatches;opts;patterns;constructor(e,r){if(!r)throw new TypeError("glob options required");if(this.withFileTypes=!!r.withFileTypes,this.signal=r.signal,this.follow=!!r.follow,this.dot=!!r.dot,this.dotRelative=!!r.dotRelative,this.nodir=!!r.nodir,this.mark=!!r.mark,r.cwd?(r.cwd instanceof URL||r.cwd.startsWith("file://"))&&(r.cwd=(0,YF.fileURLToPath)(r.cwd)):this.cwd="",this.cwd=r.cwd||"",this.root=r.root,this.magicalBraces=!!r.magicalBraces,this.nobrace=!!r.nobrace,this.noext=!!r.noext,this.realpath=!!r.realpath,this.absolute=r.absolute,this.includeChildMatches=r.includeChildMatches!==!1,this.noglobstar=!!r.noglobstar,this.matchBase=!!r.matchBase,this.maxDepth=typeof r.maxDepth=="number"?r.maxDepth:1/0,this.stat=!!r.stat,this.ignore=r.ignore,this.withFileTypes&&this.absolute!==void 0)throw new Error("cannot set absolute and withFileTypes:true");if(typeof e=="string"&&(e=[e]),this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(e=e.map(p=>p.replace(/\\/g,"/"))),this.matchBase){if(r.noglobstar)throw new TypeError("base matching requires globstar");e=e.map(p=>p.includes("/")?p:`./**/${p}`)}if(this.pattern=e,this.platform=r.platform||cY,this.opts={...r,platform:this.platform},r.scurry){if(this.scurry=r.scurry,r.nocase!==void 0&&r.nocase!==r.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{let p=r.platform==="win32"?sc:r.platform==="darwin"?wp:r.platform?ac:ZF;this.scurry=new p(this.cwd,{nocase:r.nocase,fs:r.fs})}this.nocase=this.scurry.nocase;let n=this.platform==="darwin"||this.platform==="win32",i={...r,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:n,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},o=this.pattern.map(p=>new jr(p,i)),[a,l]=o.reduce((p,u)=>(p[0].push(...u.set),p[1].push(...u.globParts),p),[[],[]]);this.patterns=a.map((p,u)=>{let d=l[u];if(!d)throw new Error("invalid pattern object");return new cc(p,d,0,this.platform)})}async walk(){return[...await new Ep(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walk()]}walkSync(){return[...new Ep(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walkSync()]}stream(){return new Rp(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).stream()}streamSync(){return new Rp(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}};var Jv=(t,e={})=>{Array.isArray(t)||(t=[t]);for(let r of t)if(new jr(r,e).hasMagic())return!0;return!1};function ny(t,e={}){return new Un(t,e).streamSync()}function JF(t,e={}){return new Un(t,e).stream()}function e1(t,e={}){return new Un(t,e).walkSync()}async function XF(t,e={}){return new Un(t,e).walk()}function iy(t,e={}){return new Un(t,e).iterateSync()}function t1(t,e={}){return new Un(t,e).iterate()}var lY=ny,pY=Object.assign(JF,{sync:ny}),uY=iy,fY=Object.assign(t1,{sync:iy}),dY=Object.assign(e1,{stream:ny,iterate:iy}),eb=Object.assign(XF,{glob:XF,globSync:e1,sync:dY,globStream:JF,stream:pY,globStreamSync:ny,streamSync:lY,globIterate:t1,iterate:fY,globIterateSync:iy,iterateSync:uY,Glob:Un,hasMagic:Jv,escape:ec,unescape:On});eb.glob=eb;function r1(){let t=process.env.CURSORLESS_MODE;switch(t){case void 0:case"production":return"production";case"development":return"development";case"test":return"test";default:throw new Error(`Unexpected value for environment variable CURSORLESS_MODE: ${t}`)}}var f1=Object.defineProperty,gY=Object.getOwnPropertyNames,F=(t,e)=>f1(t,"name",{value:e,configurable:!0}),yY=(t,e)=>function(){return e||(0,t[gY(t)[0]])((e={exports:{}}).exports,e),e.exports},yb=(t,e)=>{for(var r in e)f1(t,r,{get:e[r],enumerable:!0})},xY=yY({"(disabled):util"(){}}),oy={};yb(oy,{addChainableMethod:()=>Mb,addLengthGuard:()=>Dp,addMethod:()=>Rb,addProperty:()=>Eb,checkError:()=>zr,compareByInspect:()=>ly,eql:()=>V1,expectTypes:()=>S1,flag:()=>_e,getActual:()=>my,getMessage:()=>Sb,getName:()=>gy,getOperator:()=>Fb,getOwnEnumerableProperties:()=>Ib,getOwnEnumerablePropertySymbols:()=>Db,getPathInfo:()=>_b,hasProperty:()=>hy,inspect:()=>Le,isNaN:()=>py,isProxyEnabled:()=>Ap,isRegExp:()=>uy,objDisplay:()=>Ss,overwriteChainableMethod:()=>Ab,overwriteMethod:()=>Pb,overwriteProperty:()=>kb,proxify:()=>dc,test:()=>xb,transferFlags:()=>Vn,type:()=>Ze});var zr={};yb(zr,{compatibleConstructor:()=>h1,compatibleInstance:()=>m1,compatibleMessage:()=>g1,getConstructorName:()=>y1,getMessage:()=>x1});function dy(t){return t instanceof Error||Object.prototype.toString.call(t)==="[object Error]"}F(dy,"isErrorInstance");function d1(t){return Object.prototype.toString.call(t)==="[object RegExp]"}F(d1,"isRegExp");function m1(t,e){return dy(e)&&t===e}F(m1,"compatibleInstance");function h1(t,e){return dy(e)?t.constructor===e.constructor||t instanceof e.constructor:(typeof e=="object"||typeof e=="function")&&e.prototype?t.constructor===e||t instanceof e:!1}F(h1,"compatibleConstructor");function g1(t,e){let r=typeof t=="string"?t:t.message;return d1(e)?e.test(r):typeof e=="string"?r.indexOf(e)!==-1:!1}F(g1,"compatibleMessage");function y1(t){let e=t;return dy(t)?e=t.constructor.name:typeof t=="function"&&(e=t.name,e===""&&(e=new t().name||e)),e}F(y1,"getConstructorName");function x1(t){let e="";return t&&t.message?e=t.message:typeof t=="string"&&(e=t),e}F(x1,"getMessage");function _e(t,e,r){var n=t.__flags||(t.__flags=Object.create(null));if(arguments.length===3)n[e]=r;else return n[e]}F(_e,"flag");function xb(t,e){var r=_e(t,"negate"),n=e[0];return r?!n:n}F(xb,"test");function Ze(t){if(typeof t>"u")return"undefined";if(t===null)return"null";let e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}F(Ze,"type");var TY="captureStackTrace"in Error,qe=class T1 extends Error{static{F(this,"AssertionError")}message;get name(){return"AssertionError"}get ok(){return!1}constructor(e="Unspecified AssertionError",r,n){super(e),this.message=e,TY&&Error.captureStackTrace(this,n||T1);for(let i in r)i in this||(this[i]=r[i])}toJSON(e){return{...this,name:this.name,message:this.message,ok:!1,stack:e!==!1?this.stack:void 0}}};function S1(t,e){var r=_e(t,"message"),n=_e(t,"ssfi");r=r?r+": ":"",t=_e(t,"object"),e=e.map(function(a){return a.toLowerCase()}),e.sort();var i=e.map(function(a,l){var p=~["a","e","i","o","u"].indexOf(a.charAt(0))?"an":"a",u=e.length>1&&l===e.length-1?"or ":"";return u+p+" "+a}).join(", "),o=Ze(t).toLowerCase();if(!e.some(function(a){return o===a}))throw new qe(r+"object tested must be "+i+", but "+o+" given",void 0,n)}F(S1,"expectTypes");function my(t,e){return e.length>4?e[4]:t._obj}F(my,"getActual");var n1={bold:["1","22"],dim:["2","22"],italic:["3","23"],underline:["4","24"],inverse:["7","27"],hidden:["8","28"],strike:["9","29"],black:["30","39"],red:["31","39"],green:["32","39"],yellow:["33","39"],blue:["34","39"],magenta:["35","39"],cyan:["36","39"],white:["37","39"],brightblack:["30;1","39"],brightred:["31;1","39"],brightgreen:["32;1","39"],brightyellow:["33;1","39"],brightblue:["34;1","39"],brightmagenta:["35;1","39"],brightcyan:["36;1","39"],brightwhite:["37;1","39"],grey:["90","39"]},SY={special:"cyan",number:"yellow",bigint:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",symbol:"green",date:"magenta",regexp:"red"},uc="\u2026";function v1(t,e){let r=n1[SY[e]]||n1[e]||"";return r?`\x1B[${r[0]}m${String(t)}\x1B[${r[1]}m`:String(t)}F(v1,"colorise");function b1({showHidden:t=!1,depth:e=2,colors:r=!1,customInspect:n=!0,showProxy:i=!1,maxArrayLength:o=1/0,breakLength:a=1/0,seen:l=[],truncate:p=1/0,stylize:u=String}={},d){let h={showHidden:!!t,depth:Number(e),colors:!!r,customInspect:!!n,showProxy:!!i,maxArrayLength:Number(o),breakLength:Number(a),truncate:Number(p),seen:l,inspect:d,stylize:u};return h.colors&&(h.stylize=v1),h}F(b1,"normaliseOptions");function Li(t,e,r=uc){t=String(t);let n=r.length,i=t.length;return n>e&&i>n?r:i>e&&i>n?`${t.slice(0,e-n)}${r}`:t}F(Li,"truncate");function xn(t,e,r,n=", "){r=r||e.inspect;let i=t.length;if(i===0)return"";let o=e.truncate,a="",l="",p="";for(let u=0;u<i;u+=1){let d=u+1===t.length,h=u+2===t.length;p=`${uc}(${t.length-u})`;let g=t[u];e.truncate=o-a.length-(d?0:n.length);let x=l||r(g,e)+(d?"":n),_=a.length+x.length,w=_+p.length;if(d&&_>o&&a.length+p.length<=o||!d&&!h&&w>o||(l=d?"":r(t[u+1],e)+(h?"":n),!d&&h&&w>o&&_+l.length>o))break;if(a+=x,!d&&!h&&_+l.length>=o){p=`${uc}(${t.length-u-1})`;break}p=""}return`${a}${p}`}F(xn,"inspectList");function w1(t){return t.match(/^[a-zA-Z_][a-zA-Z_0-9]*$/)?t:JSON.stringify(t).replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'")}F(w1,"quoteComplexKey");function fc([t,e],r){return r.truncate-=2,typeof t=="string"?t=w1(t):typeof t!="number"&&(t=`[${r.inspect(t,r)}]`),r.truncate-=t.length,e=r.inspect(e,r),`${t}: ${e}`}F(fc,"inspectProperty");function _1(t,e){let r=Object.keys(t).slice(t.length);if(!t.length&&!r.length)return"[]";e.truncate-=4;let n=xn(t,e);e.truncate-=n.length;let i="";return r.length&&(i=xn(r.map(o=>[o,t[o]]),e,fc)),`[ ${n}${i?`, ${i}`:""} ]`}F(_1,"inspectArray");var vY=F(t=>typeof Buffer=="function"&&t instanceof Buffer?"Buffer":t[Symbol.toStringTag]?t[Symbol.toStringTag]:t.constructor.name,"getArrayName");function oi(t,e){let r=vY(t);e.truncate-=r.length+4;let n=Object.keys(t).slice(t.length);if(!t.length&&!n.length)return`${r}[]`;let i="";for(let a=0;a<t.length;a++){let l=`${e.stylize(Li(t[a],e.truncate),"number")}${a===t.length-1?"":", "}`;if(e.truncate-=l.length,t[a]!==t.length&&e.truncate<=3){i+=`${uc}(${t.length-t[a]+1})`;break}i+=l}let o="";return n.length&&(o=xn(n.map(a=>[a,t[a]]),e,fc)),`${r}[ ${i}${o?`, ${o}`:""} ]`}F(oi,"inspectTypedArray");function E1(t,e){let r=t.toJSON();if(r===null)return"Invalid Date";let n=r.split("T"),i=n[0];return e.stylize(`${i}T${Li(n[1],e.truncate-i.length-1)}`,"date")}F(E1,"inspectDate");function nb(t,e){let r=t[Symbol.toStringTag]||"Function",n=t.name;return n?e.stylize(`[${r} ${Li(n,e.truncate-11)}]`,"special"):e.stylize(`[${r}]`,"special")}F(nb,"inspectFunction");function R1([t,e],r){return r.truncate-=4,t=r.inspect(t,r),r.truncate-=t.length,e=r.inspect(e,r),`${t} => ${e}`}F(R1,"inspectMapEntry");function k1(t){let e=[];return t.forEach((r,n)=>{e.push([n,r])}),e}F(k1,"mapToEntries");function P1(t,e){return t.size-1<=0?"Map{}":(e.truncate-=7,`Map{ ${xn(k1(t),e,R1)} }`)}F(P1,"inspectMap");var bY=Number.isNaN||(t=>t!==t);function ib(t,e){return bY(t)?e.stylize("NaN","number"):t===1/0?e.stylize("Infinity","number"):t===-1/0?e.stylize("-Infinity","number"):t===0?e.stylize(1/t===1/0?"+0":"-0","number"):e.stylize(Li(String(t),e.truncate),"number")}F(ib,"inspectNumber");function ob(t,e){let r=Li(t.toString(),e.truncate-1);return r!==uc&&(r+="n"),e.stylize(r,"bigint")}F(ob,"inspectBigInt");function M1(t,e){let r=t.toString().split("/")[2],n=e.truncate-(2+r.length),i=t.source;return e.stylize(`/${Li(i,n)}/${r}`,"regexp")}F(M1,"inspectRegExp");function A1(t){let e=[];return t.forEach(r=>{e.push(r)}),e}F(A1,"arrayFromSet");function D1(t,e){return t.size===0?"Set{}":(e.truncate-=7,`Set{ ${xn(A1(t),e)} }`)}F(D1,"inspectSet");var i1=new RegExp("['\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]","g"),wY={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"},_Y=16,EY=4;function I1(t){return wY[t]||`\\u${`0000${t.charCodeAt(0).toString(_Y)}`.slice(-EY)}`}F(I1,"escape");function sb(t,e){return i1.test(t)&&(t=t.replace(i1,I1)),e.stylize(`'${Li(t,e.truncate-2)}'`,"string")}F(sb,"inspectString");function ab(t){return"description"in Symbol.prototype?t.description?`Symbol(${t.description})`:"Symbol()":t.toString()}F(ab,"inspectSymbol");var F1=F(()=>"Promise{\u2026}","getPromiseValue");try{let{getPromiseDetails:t,kPending:e,kRejected:r}=process.binding("util");Array.isArray(t(Promise.resolve()))&&(F1=F((n,i)=>{let[o,a]=t(n);return o===e?"Promise{<pending>}":`Promise${o===r?"!":""}{${i.inspect(a,i)}}`},"getPromiseValue"))}catch{}var RY=F1;function Pp(t,e){let r=Object.getOwnPropertyNames(t),n=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[];if(r.length===0&&n.length===0)return"{}";if(e.truncate-=4,e.seen=e.seen||[],e.seen.indexOf(t)>=0)return"[Circular]";e.seen.push(t);let i=xn(r.map(l=>[l,t[l]]),e,fc),o=xn(n.map(l=>[l,t[l]]),e,fc);e.seen.pop();let a="";return i&&o&&(a=", "),`{ ${i}${a}${o} }`}F(Pp,"inspectObject");var tb=typeof Symbol<"u"&&Symbol.toStringTag?Symbol.toStringTag:!1;function C1(t,e){let r="";return tb&&tb in t&&(r=t[tb]),r=r||t.constructor.name,(!r||r==="_class")&&(r="<Anonymous Class>"),e.truncate-=r.length,`${r}${Pp(t,e)}`}F(C1,"inspectClass");function O1(t,e){return t.length===0?"Arguments[]":(e.truncate-=13,`Arguments[ ${xn(t,e)} ]`)}F(O1,"inspectArguments");var kY=["stack","line","column","name","message","fileName","lineNumber","columnNumber","number","description"];function N1(t,e){let r=Object.getOwnPropertyNames(t).filter(a=>kY.indexOf(a)===-1),n=t.name;e.truncate-=n.length;let i="";typeof t.message=="string"?i=Li(t.message,e.truncate):r.unshift("message"),i=i?`: ${i}`:"",e.truncate-=i.length+5;let o=xn(r.map(a=>[a,t[a]]),e,fc);return`${n}${i}${o?` { ${o} }`:""}`}F(N1,"inspectObject");function L1([t,e],r){return r.truncate-=3,e?`${r.stylize(String(t),"yellow")}=${r.stylize(`"${e}"`,"string")}`:`${r.stylize(String(t),"yellow")}`}F(L1,"inspectAttribute");function sy(t,e){return xn(t,e,Tb,`
`)}F(sy,"inspectHTMLCollection");function Tb(t,e){let r=t.getAttributeNames(),n=t.tagName.toLowerCase(),i=e.stylize(`<${n}`,"special"),o=e.stylize(">","special"),a=e.stylize(`</${n}>`,"special");e.truncate-=n.length*2+5;let l="";r.length>0&&(l+=" ",l+=xn(r.map(d=>[d,t.getAttribute(d)]),e,L1," ")),e.truncate-=l.length;let p=e.truncate,u=sy(t.children,e);return u&&u.length>p&&(u=`${uc}(${t.children.length})`),`${i}${l}${o}${u}${a}`}F(Tb,"inspectHTML");var PY=typeof Symbol=="function"&&typeof Symbol.for=="function",rb=PY?Symbol.for("chai/inspect"):"@@chai/inspect",pc=!1;try{let t=xY();pc=t.inspect?t.inspect.custom:!1}catch{pc=!1}var o1=new WeakMap,s1={},a1={undefined:(t,e)=>e.stylize("undefined","undefined"),null:(t,e)=>e.stylize("null","null"),boolean:(t,e)=>e.stylize(String(t),"boolean"),Boolean:(t,e)=>e.stylize(String(t),"boolean"),number:ib,Number:ib,bigint:ob,BigInt:ob,string:sb,String:sb,function:nb,Function:nb,symbol:ab,Symbol:ab,Array:_1,Date:E1,Map:P1,Set:D1,RegExp:M1,Promise:RY,WeakSet:(t,e)=>e.stylize("WeakSet{\u2026}","special"),WeakMap:(t,e)=>e.stylize("WeakMap{\u2026}","special"),Arguments:O1,Int8Array:oi,Uint8Array:oi,Uint8ClampedArray:oi,Int16Array:oi,Uint16Array:oi,Int32Array:oi,Uint32Array:oi,Float32Array:oi,Float64Array:oi,Generator:()=>"",DataView:()=>"",ArrayBuffer:()=>"",Error:N1,HTMLCollection:sy,NodeList:sy},MY=F((t,e,r)=>rb in t&&typeof t[rb]=="function"?t[rb](e):pc&&pc in t&&typeof t[pc]=="function"?t[pc](e.depth,e):"inspect"in t&&typeof t.inspect=="function"?t.inspect(e.depth,e):"constructor"in t&&o1.has(t.constructor)?o1.get(t.constructor)(t,e):s1[r]?s1[r](t,e):"","inspectCustom"),AY=Object.prototype.toString;function ay(t,e={}){let r=b1(e,ay),{customInspect:n}=r,i=t===null?"null":typeof t;if(i==="object"&&(i=AY.call(t).slice(8,-1)),i in a1)return a1[i](t,r);if(n&&t){let a=MY(t,r,i);if(a)return typeof a=="string"?a:ay(a,r)}let o=t?Object.getPrototypeOf(t):!1;return o===Object.prototype||o===null?Pp(t,r):t&&typeof HTMLElement=="function"&&t instanceof HTMLElement?Tb(t,r):"constructor"in t?t.constructor!==Object?C1(t,r):Pp(t,r):t===Object(t)?Pp(t,r):r.stylize(String(t),i)}F(ay,"inspect");var Rr={includeStack:!1,showDiff:!0,truncateThreshold:40,useProxy:!0,proxyExcludedKeys:["then","catch","inspect","toJSON"],deepEqual:null};function Le(t,e,r,n){var i={colors:n,depth:typeof r>"u"?2:r,showHidden:e,truncate:Rr.truncateThreshold?Rr.truncateThreshold:1/0};return ay(t,i)}F(Le,"inspect");function Ss(t){var e=Le(t),r=Object.prototype.toString.call(t);if(Rr.truncateThreshold&&e.length>=Rr.truncateThreshold){if(r==="[object Function]")return!t.name||t.name===""?"[Function]":"[Function: "+t.name+"]";if(r==="[object Array]")return"[ Array("+t.length+") ]";if(r==="[object Object]"){var n=Object.keys(t),i=n.length>2?n.splice(0,2).join(", ")+", ...":n.join(", ");return"{ Object ("+i+") }"}else return e}else return e}F(Ss,"objDisplay");function Sb(t,e){var r=_e(t,"negate"),n=_e(t,"object"),i=e[3],o=my(t,e),a=r?e[2]:e[1],l=_e(t,"message");return typeof a=="function"&&(a=a()),a=a||"",a=a.replace(/#\{this\}/g,function(){return Ss(n)}).replace(/#\{act\}/g,function(){return Ss(o)}).replace(/#\{exp\}/g,function(){return Ss(i)}),l?l+": "+a:a}F(Sb,"getMessage");function Vn(t,e,r){var n=t.__flags||(t.__flags=Object.create(null));e.__flags||(e.__flags=Object.create(null)),r=arguments.length===3?r:!0;for(var i in n)(r||i!=="object"&&i!=="ssfi"&&i!=="lockSsfi"&&i!="message")&&(e.__flags[i]=n[i])}F(Vn,"transferFlags");function cb(t){if(typeof t>"u")return"undefined";if(t===null)return"null";let e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}F(cb,"type");function vb(){this._key="chai/deep-eql__"+Math.random()+Date.now()}F(vb,"FakeMap");vb.prototype={get:F(function(e){return e[this._key]},"get"),set:F(function(e,r){Object.isExtensible(e)&&Object.defineProperty(e,this._key,{value:r,configurable:!0})},"set")};var U1=typeof WeakMap=="function"?WeakMap:vb;function lb(t,e,r){if(!r||vs(t)||vs(e))return null;var n=r.get(t);if(n){var i=n.get(e);if(typeof i=="boolean")return i}return null}F(lb,"memoizeCompare");function kp(t,e,r,n){if(!(!r||vs(t)||vs(e))){var i=r.get(t);i?i.set(e,n):(i=new U1,i.set(e,n),r.set(t,i))}}F(kp,"memoizeSet");var V1=Mp;function Mp(t,e,r){if(r&&r.comparator)return pb(t,e,r);var n=bb(t,e);return n!==null?n:pb(t,e,r)}F(Mp,"deepEqual");function bb(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e?!0:vs(t)||vs(e)?!1:null}F(bb,"simpleEqual");function pb(t,e,r){r=r||{},r.memoize=r.memoize===!1?!1:r.memoize||new U1;var n=r&&r.comparator,i=lb(t,e,r.memoize);if(i!==null)return i;var o=lb(e,t,r.memoize);if(o!==null)return o;if(n){var a=n(t,e);if(a===!1||a===!0)return kp(t,e,r.memoize,a),a;var l=bb(t,e);if(l!==null)return l}var p=cb(t);if(p!==cb(e))return kp(t,e,r.memoize,!1),!1;kp(t,e,r.memoize,!0);var u=B1(t,e,p,r);return kp(t,e,r.memoize,u),u}F(pb,"extensiveDeepEqual");function B1(t,e,r,n){switch(r){case"String":case"Number":case"Boolean":case"Date":return Mp(t.valueOf(),e.valueOf());case"Promise":case"Symbol":case"function":case"WeakMap":case"WeakSet":return t===e;case"Error":return wb(t,e,["name","message","code"],n);case"Arguments":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"Array":return ko(t,e,n);case"RegExp":return H1(t,e);case"Generator":return W1(t,e,n);case"DataView":return ko(new Uint8Array(t.buffer),new Uint8Array(e.buffer),n);case"ArrayBuffer":return ko(new Uint8Array(t),new Uint8Array(e),n);case"Set":return ub(t,e,n);case"Map":return ub(t,e,n);case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.Instant":case"Temporal.ZonedDateTime":case"Temporal.PlainYearMonth":case"Temporal.PlainMonthDay":return t.equals(e);case"Temporal.Duration":return t.total("nanoseconds")===e.total("nanoseconds");case"Temporal.TimeZone":case"Temporal.Calendar":return t.toString()===e.toString();default:return j1(t,e,n)}}F(B1,"extensiveDeepEqualByType");function H1(t,e){return t.toString()===e.toString()}F(H1,"regexpEqual");function ub(t,e,r){if(t.size!==e.size)return!1;if(t.size===0)return!0;var n=[],i=[];return t.forEach(F(function(a,l){n.push([a,l])},"gatherEntries")),e.forEach(F(function(a,l){i.push([a,l])},"gatherEntries")),ko(n.sort(),i.sort(),r)}F(ub,"entriesEqual");function ko(t,e,r){var n=t.length;if(n!==e.length)return!1;if(n===0)return!0;for(var i=-1;++i<n;)if(Mp(t[i],e[i],r)===!1)return!1;return!0}F(ko,"iterableEqual");function W1(t,e,r){return ko(cy(t),cy(e),r)}F(W1,"generatorEqual");function $1(t){return typeof Symbol<"u"&&typeof t=="object"&&typeof Symbol.iterator<"u"&&typeof t[Symbol.iterator]=="function"}F($1,"hasIteratorFunction");function fb(t){if($1(t))try{return cy(t[Symbol.iterator]())}catch{return[]}return[]}F(fb,"getIteratorEntries");function cy(t){for(var e=t.next(),r=[e.value];e.done===!1;)e=t.next(),r.push(e.value);return r}F(cy,"getGeneratorEntries");function db(t){var e=[];for(var r in t)e.push(r);return e}F(db,"getEnumerableKeys");function mb(t){for(var e=[],r=Object.getOwnPropertySymbols(t),n=0;n<r.length;n+=1){var i=r[n];Object.getOwnPropertyDescriptor(t,i).enumerable&&e.push(i)}return e}F(mb,"getEnumerableSymbols");function wb(t,e,r,n){var i=r.length;if(i===0)return!0;for(var o=0;o<i;o+=1)if(Mp(t[r[o]],e[r[o]],n)===!1)return!1;return!0}F(wb,"keysEqual");function j1(t,e,r){var n=db(t),i=db(e),o=mb(t),a=mb(e);if(n=n.concat(o),i=i.concat(a),n.length&&n.length===i.length)return ko(hb(n).sort(),hb(i).sort())===!1?!1:wb(t,e,n,r);var l=fb(t),p=fb(e);return l.length&&l.length===p.length?(l.sort(),p.sort(),ko(l,p,r)):n.length===0&&l.length===0&&i.length===0&&p.length===0}F(j1,"objectEqual");function vs(t){return t===null||typeof t!="object"}F(vs,"isPrimitive");function hb(t){return t.map(F(function(r){return typeof r=="symbol"?r.toString():r},"mapSymbol"))}F(hb,"mapSymbols");function hy(t,e){return typeof t>"u"||t===null?!1:e in Object(t)}F(hy,"hasProperty");function q1(t){return t.replace(/([^\\])\[/g,"$1.[").match(/(\\\.|[^.]+?)+/g).map(n=>{if(n==="constructor"||n==="__proto__"||n==="prototype")return{};let o=/^\[(\d+)\]$/.exec(n),a=null;return o?a={i:parseFloat(o[1])}:a={p:n.replace(/\\([.[\]])/g,"$1")},a})}F(q1,"parsePath");function gb(t,e,r){let n=t,i=null;r=typeof r>"u"?e.length:r;for(let o=0;o<r;o++){let a=e[o];n&&(typeof a.p>"u"?n=n[a.i]:n=n[a.p],o===r-1&&(i=n))}return i}F(gb,"internalGetPathValue");function _b(t,e){let r=q1(e),n=r[r.length-1],i={parent:r.length>1?gb(t,r,r.length-1):t,name:n.p||n.i,value:gb(t,r)};return i.exists=hy(i.parent,i.name),i}F(_b,"getPathInfo");function b(t,e,r,n){return _e(this,"ssfi",r||b),_e(this,"lockSsfi",n),_e(this,"object",t),_e(this,"message",e),_e(this,"eql",Rr.deepEqual||V1),dc(this)}F(b,"Assertion");Object.defineProperty(b,"includeStack",{get:function(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),Rr.includeStack},set:function(t){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),Rr.includeStack=t}});Object.defineProperty(b,"showDiff",{get:function(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),Rr.showDiff},set:function(t){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),Rr.showDiff=t}});b.addProperty=function(t,e){Eb(this.prototype,t,e)};b.addMethod=function(t,e){Rb(this.prototype,t,e)};b.addChainableMethod=function(t,e,r){Mb(this.prototype,t,e,r)};b.overwriteProperty=function(t,e){kb(this.prototype,t,e)};b.overwriteMethod=function(t,e){Pb(this.prototype,t,e)};b.overwriteChainableMethod=function(t,e,r){Ab(this.prototype,t,e,r)};b.prototype.assert=function(t,e,r,n,i,o){var a=xb(this,arguments);if(o!==!1&&(o=!0),n===void 0&&i===void 0&&(o=!1),Rr.showDiff!==!0&&(o=!1),!a){e=Sb(this,arguments);var l=my(this,arguments),p={actual:l,expected:n,showDiff:o},u=Fb(this,arguments);throw u&&(p.operator=u),new qe(e,p,Rr.includeStack?this.assert:_e(this,"ssfi"))}};Object.defineProperty(b.prototype,"_obj",{get:function(){return _e(this,"object")},set:function(t){_e(this,"object",t)}});function Ap(){return Rr.useProxy&&typeof Proxy<"u"&&typeof Reflect<"u"}F(Ap,"isProxyEnabled");function Eb(t,e,r){r=r===void 0?function(){}:r,Object.defineProperty(t,e,{get:F(function n(){!Ap()&&!_e(this,"lockSsfi")&&_e(this,"ssfi",n);var i=r.call(this);if(i!==void 0)return i;var o=new b;return Vn(this,o),o},"propertyGetter"),configurable:!0})}F(Eb,"addProperty");var DY=Object.getOwnPropertyDescriptor(function(){},"length");function Dp(t,e,r){return DY.configurable&&Object.defineProperty(t,"length",{get:function(){throw Error(r?"Invalid Chai property: "+e+'.length. Due to a compatibility issue, "length" cannot directly follow "'+e+'". Use "'+e+'.lengthOf" instead.':"Invalid Chai property: "+e+'.length. See docs for proper usage of "'+e+'".')}}),t}F(Dp,"addLengthGuard");function z1(t){var e=Object.getOwnPropertyNames(t);function r(i){e.indexOf(i)===-1&&e.push(i)}F(r,"addProperty");for(var n=Object.getPrototypeOf(t);n!==null;)Object.getOwnPropertyNames(n).forEach(r),n=Object.getPrototypeOf(n);return e}F(z1,"getProperties");var c1=["__flags","__methods","_obj","assert"];function dc(t,e){return Ap()?new Proxy(t,{get:F(function r(n,i){if(typeof i=="string"&&Rr.proxyExcludedKeys.indexOf(i)===-1&&!Reflect.has(n,i)){if(e)throw Error("Invalid Chai property: "+e+"."+i+'. See docs for proper usage of "'+e+'".');var o=null,a=4;throw z1(n).forEach(function(l){if(!Object.prototype.hasOwnProperty(l)&&c1.indexOf(l)===-1){var p=G1(i,l,a);p<a&&(o=l,a=p)}}),Error(o!==null?"Invalid Chai property: "+i+'. Did you mean "'+o+'"?':"Invalid Chai property: "+i)}return c1.indexOf(i)===-1&&!_e(n,"lockSsfi")&&_e(n,"ssfi",r),Reflect.get(n,i)},"proxyGetter")}):t}F(dc,"proxify");function G1(t,e,r){if(Math.abs(t.length-e.length)>=r)return r;for(var n=[],i=0;i<=t.length;i++)n[i]=Array(e.length+1).fill(0),n[i][0]=i;for(var o=0;o<e.length;o++)n[0][o]=o;for(var i=1;i<=t.length;i++)for(var a=t.charCodeAt(i-1),o=1;o<=e.length;o++){if(Math.abs(i-o)>=r){n[i][o]=r;continue}n[i][o]=Math.min(n[i-1][o]+1,n[i][o-1]+1,n[i-1][o-1]+(a===e.charCodeAt(o-1)?0:1))}return n[t.length][e.length]}F(G1,"stringDistanceCapped");function Rb(t,e,r){var n=F(function(){_e(this,"lockSsfi")||_e(this,"ssfi",n);var i=r.apply(this,arguments);if(i!==void 0)return i;var o=new b;return Vn(this,o),o},"methodWrapper");Dp(n,e,!1),t[e]=dc(n,e)}F(Rb,"addMethod");function kb(t,e,r){var n=Object.getOwnPropertyDescriptor(t,e),i=F(function(){},"_super");n&&typeof n.get=="function"&&(i=n.get),Object.defineProperty(t,e,{get:F(function o(){!Ap()&&!_e(this,"lockSsfi")&&_e(this,"ssfi",o);var a=_e(this,"lockSsfi");_e(this,"lockSsfi",!0);var l=r(i).call(this);if(_e(this,"lockSsfi",a),l!==void 0)return l;var p=new b;return Vn(this,p),p},"overwritingPropertyGetter"),configurable:!0})}F(kb,"overwriteProperty");function Pb(t,e,r){var n=t[e],i=F(function(){throw new Error(e+" is not a function")},"_super");n&&typeof n=="function"&&(i=n);var o=F(function(){_e(this,"lockSsfi")||_e(this,"ssfi",o);var a=_e(this,"lockSsfi");_e(this,"lockSsfi",!0);var l=r(i).apply(this,arguments);if(_e(this,"lockSsfi",a),l!==void 0)return l;var p=new b;return Vn(this,p),p},"overwritingMethodWrapper");Dp(o,e,!1),t[e]=dc(o,e)}F(Pb,"overwriteMethod");var IY=typeof Object.setPrototypeOf=="function",l1=F(function(){},"testFn"),FY=Object.getOwnPropertyNames(l1).filter(function(t){var e=Object.getOwnPropertyDescriptor(l1,t);return typeof e!="object"?!0:!e.configurable}),CY=Function.prototype.call,OY=Function.prototype.apply;function Mb(t,e,r,n){typeof n!="function"&&(n=F(function(){},"chainingBehavior"));var i={method:r,chainingBehavior:n};t.__methods||(t.__methods={}),t.__methods[e]=i,Object.defineProperty(t,e,{get:F(function(){i.chainingBehavior.call(this);var a=F(function(){_e(this,"lockSsfi")||_e(this,"ssfi",a);var u=i.method.apply(this,arguments);if(u!==void 0)return u;var d=new b;return Vn(this,d),d},"chainableMethodWrapper");if(Dp(a,e,!0),IY){var l=Object.create(this);l.call=CY,l.apply=OY,Object.setPrototypeOf(a,l)}else{var p=Object.getOwnPropertyNames(t);p.forEach(function(u){if(FY.indexOf(u)===-1){var d=Object.getOwnPropertyDescriptor(t,u);Object.defineProperty(a,u,d)}})}return Vn(this,a),dc(a)},"chainableMethodGetter"),configurable:!0})}F(Mb,"addChainableMethod");function Ab(t,e,r,n){var i=t.__methods[e],o=i.chainingBehavior;i.chainingBehavior=F(function(){var p=n(o).call(this);if(p!==void 0)return p;var u=new b;return Vn(this,u),u},"overwritingChainableMethodGetter");var a=i.method;i.method=F(function(){var p=r(a).apply(this,arguments);if(p!==void 0)return p;var u=new b;return Vn(this,u),u},"overwritingChainableMethodWrapper")}F(Ab,"overwriteChainableMethod");function ly(t,e){return Le(t)<Le(e)?-1:1}F(ly,"compareByInspect");function Db(t){return typeof Object.getOwnPropertySymbols!="function"?[]:Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})}F(Db,"getOwnEnumerablePropertySymbols");function Ib(t){return Object.keys(t).concat(Db(t))}F(Ib,"getOwnEnumerableProperties");function K1(t){return t!==t}F(K1,"_isNaN");var py=Number.isNaN||K1;function Q1(t){var e=Ze(t),r=["Array","Object","Function"];return r.indexOf(e)!==-1}F(Q1,"isObjectType");function Fb(t,e){var r=_e(t,"operator"),n=_e(t,"negate"),i=e[3],o=n?e[2]:e[1];if(r)return r;if(typeof o=="function"&&(o=o()),o=o||"",!!o&&!/\shave\s/.test(o)){var a=Q1(i);return/\snot\s/.test(o)?a?"notDeepStrictEqual":"notStrictEqual":a?"deepStrictEqual":"strictEqual"}}F(Fb,"getOperator");function gy(t){return t.name}F(gy,"getName");function uy(t){return Object.prototype.toString.call(t)==="[object RegExp]"}F(uy,"isRegExp");var{flag:P}=oy;["to","be","been","is","and","has","have","with","that","which","at","of","same","but","does","still","also"].forEach(function(t){b.addProperty(t)});b.addProperty("not",function(){P(this,"negate",!0)});b.addProperty("deep",function(){P(this,"deep",!0)});b.addProperty("nested",function(){P(this,"nested",!0)});b.addProperty("own",function(){P(this,"own",!0)});b.addProperty("ordered",function(){P(this,"ordered",!0)});b.addProperty("any",function(){P(this,"any",!0),P(this,"all",!1)});b.addProperty("all",function(){P(this,"all",!0),P(this,"any",!1)});var p1={function:["function","asyncfunction","generatorfunction","asyncgeneratorfunction"],asyncfunction:["asyncfunction","asyncgeneratorfunction"],generatorfunction:["generatorfunction","asyncgeneratorfunction"],asyncgeneratorfunction:["asyncgeneratorfunction"]};function Cb(t,e){e&&P(this,"message",e),t=t.toLowerCase();var r=P(this,"object"),n=~["a","e","i","o","u"].indexOf(t.charAt(0))?"an ":"a ";let i=Ze(r).toLowerCase();p1.function.includes(t)?this.assert(p1[t].includes(i),"expected #{this} to be "+n+t,"expected #{this} not to be "+n+t):this.assert(t===i,"expected #{this} to be "+n+t,"expected #{this} not to be "+n+t)}F(Cb,"an");b.addChainableMethod("an",Cb);b.addChainableMethod("a",Cb);function Z1(t,e){return py(t)&&py(e)||t===e}F(Z1,"SameValueZero");function Ip(){P(this,"contains",!0)}F(Ip,"includeChainingBehavior");function Fp(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=Ze(r).toLowerCase(),i=P(this,"message"),o=P(this,"negate"),a=P(this,"ssfi"),l=P(this,"deep"),p=l?"deep ":"",u=l?P(this,"eql"):Z1;i=i?i+": ":"";var d=!1;switch(n){case"string":d=r.indexOf(t)!==-1;break;case"weakset":if(l)throw new qe(i+"unable to use .deep.include with WeakSet",void 0,a);d=r.has(t);break;case"map":r.forEach(function(_){d=d||u(_,t)});break;case"set":l?r.forEach(function(_){d=d||u(_,t)}):d=r.has(t);break;case"array":l?d=r.some(function(_){return u(_,t)}):d=r.indexOf(t)!==-1;break;default:if(t!==Object(t))throw new qe(i+"the given combination of arguments ("+n+" and "+Ze(t).toLowerCase()+") is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a "+Ze(t).toLowerCase(),void 0,a);var h=Object.keys(t),g=null,x=0;if(h.forEach(function(_){var w=new b(r);if(Vn(this,w,!0),P(w,"lockSsfi",!0),!o||h.length===1){w.property(_,t[_]);return}try{w.property(_,t[_])}catch(C){if(!zr.compatibleConstructor(C,qe))throw C;g===null&&(g=C),x++}},this),o&&h.length>1&&x===h.length)throw g;return}this.assert(d,"expected #{this} to "+p+"include "+Le(t),"expected #{this} to not "+p+"include "+Le(t))}F(Fp,"include");b.addChainableMethod("include",Fp,Ip);b.addChainableMethod("contain",Fp,Ip);b.addChainableMethod("contains",Fp,Ip);b.addChainableMethod("includes",Fp,Ip);b.addProperty("ok",function(){this.assert(P(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")});b.addProperty("true",function(){this.assert(P(this,"object")===!0,"expected #{this} to be true","expected #{this} to be false",!P(this,"negate"))});b.addProperty("callable",function(){let t=P(this,"object"),e=P(this,"ssfi"),r=P(this,"message"),n=r?`${r}: `:"",i=P(this,"negate"),o=i?`${n}expected ${Le(t)} not to be a callable function`:`${n}expected ${Le(t)} to be a callable function`,a=["Function","AsyncFunction","GeneratorFunction","AsyncGeneratorFunction"].includes(Ze(t));if(a&&i||!a&&!i)throw new qe(o,void 0,e)});b.addProperty("false",function(){this.assert(P(this,"object")===!1,"expected #{this} to be false","expected #{this} to be true",!!P(this,"negate"))});b.addProperty("null",function(){this.assert(P(this,"object")===null,"expected #{this} to be null","expected #{this} not to be null")});b.addProperty("undefined",function(){this.assert(P(this,"object")===void 0,"expected #{this} to be undefined","expected #{this} not to be undefined")});b.addProperty("NaN",function(){this.assert(py(P(this,"object")),"expected #{this} to be NaN","expected #{this} not to be NaN")});function Ob(){var t=P(this,"object");this.assert(t!=null,"expected #{this} to exist","expected #{this} to not exist")}F(Ob,"assertExist");b.addProperty("exist",Ob);b.addProperty("exists",Ob);b.addProperty("empty",function(){var t=P(this,"object"),e=P(this,"ssfi"),r=P(this,"message"),n;switch(r=r?r+": ":"",Ze(t).toLowerCase()){case"array":case"string":n=t.length;break;case"map":case"set":n=t.size;break;case"weakmap":case"weakset":throw new qe(r+".empty was passed a weak collection",void 0,e);case"function":var i=r+".empty was passed a function "+gy(t);throw new qe(i.trim(),void 0,e);default:if(t!==Object(t))throw new qe(r+".empty was passed non-string primitive "+Le(t),void 0,e);n=Object.keys(t).length}this.assert(n===0,"expected #{this} to be empty","expected #{this} not to be empty")});function Nb(){var t=P(this,"object"),e=Ze(t);this.assert(e==="Arguments","expected #{this} to be arguments but got "+e,"expected #{this} to not be arguments")}F(Nb,"checkArguments");b.addProperty("arguments",Nb);b.addProperty("Arguments",Nb);function yy(t,e){e&&P(this,"message",e);var r=P(this,"object");if(P(this,"deep")){var n=P(this,"lockSsfi");P(this,"lockSsfi",!0),this.eql(t),P(this,"lockSsfi",n)}else this.assert(t===r,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",t,this._obj,!0)}F(yy,"assertEqual");b.addMethod("equal",yy);b.addMethod("equals",yy);b.addMethod("eq",yy);function Lb(t,e){e&&P(this,"message",e);var r=P(this,"eql");this.assert(r(t,P(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",t,this._obj,!0)}F(Lb,"assertEql");b.addMethod("eql",Lb);b.addMethod("eqls",Lb);function xy(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"doLength"),i=P(this,"message"),o=i?i+": ":"",a=P(this,"ssfi"),l=Ze(r).toLowerCase(),p=Ze(t).toLowerCase(),u,d=!0;if(n&&l!=="map"&&l!=="set"&&new b(r,i,a,!0).to.have.property("length"),!n&&l==="date"&&p!=="date")u=o+"the argument to above must be a date";else if(p!=="number"&&(n||l==="number"))u=o+"the argument to above must be a number";else if(!n&&l!=="date"&&l!=="number"){var h=l==="string"?"'"+r+"'":r;u=o+"expected "+h+" to be a number or a date"}else d=!1;if(d)throw new qe(u,void 0,a);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x>t,"expected #{this} to have a "+g+" above #{exp} but got #{act}","expected #{this} to not have a "+g+" above #{exp}",t,x)}else this.assert(r>t,"expected #{this} to be above #{exp}","expected #{this} to be at most #{exp}",t)}F(xy,"assertAbove");b.addMethod("above",xy);b.addMethod("gt",xy);b.addMethod("greaterThan",xy);function Ty(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"doLength"),i=P(this,"message"),o=i?i+": ":"",a=P(this,"ssfi"),l=Ze(r).toLowerCase(),p=Ze(t).toLowerCase(),u,d=!0;if(n&&l!=="map"&&l!=="set"&&new b(r,i,a,!0).to.have.property("length"),!n&&l==="date"&&p!=="date")u=o+"the argument to least must be a date";else if(p!=="number"&&(n||l==="number"))u=o+"the argument to least must be a number";else if(!n&&l!=="date"&&l!=="number"){var h=l==="string"?"'"+r+"'":r;u=o+"expected "+h+" to be a number or a date"}else d=!1;if(d)throw new qe(u,void 0,a);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x>=t,"expected #{this} to have a "+g+" at least #{exp} but got #{act}","expected #{this} to have a "+g+" below #{exp}",t,x)}else this.assert(r>=t,"expected #{this} to be at least #{exp}","expected #{this} to be below #{exp}",t)}F(Ty,"assertLeast");b.addMethod("least",Ty);b.addMethod("gte",Ty);b.addMethod("greaterThanOrEqual",Ty);function Sy(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"doLength"),i=P(this,"message"),o=i?i+": ":"",a=P(this,"ssfi"),l=Ze(r).toLowerCase(),p=Ze(t).toLowerCase(),u,d=!0;if(n&&l!=="map"&&l!=="set"&&new b(r,i,a,!0).to.have.property("length"),!n&&l==="date"&&p!=="date")u=o+"the argument to below must be a date";else if(p!=="number"&&(n||l==="number"))u=o+"the argument to below must be a number";else if(!n&&l!=="date"&&l!=="number"){var h=l==="string"?"'"+r+"'":r;u=o+"expected "+h+" to be a number or a date"}else d=!1;if(d)throw new qe(u,void 0,a);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x<t,"expected #{this} to have a "+g+" below #{exp} but got #{act}","expected #{this} to not have a "+g+" below #{exp}",t,x)}else this.assert(r<t,"expected #{this} to be below #{exp}","expected #{this} to be at least #{exp}",t)}F(Sy,"assertBelow");b.addMethod("below",Sy);b.addMethod("lt",Sy);b.addMethod("lessThan",Sy);function vy(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"doLength"),i=P(this,"message"),o=i?i+": ":"",a=P(this,"ssfi"),l=Ze(r).toLowerCase(),p=Ze(t).toLowerCase(),u,d=!0;if(n&&l!=="map"&&l!=="set"&&new b(r,i,a,!0).to.have.property("length"),!n&&l==="date"&&p!=="date")u=o+"the argument to most must be a date";else if(p!=="number"&&(n||l==="number"))u=o+"the argument to most must be a number";else if(!n&&l!=="date"&&l!=="number"){var h=l==="string"?"'"+r+"'":r;u=o+"expected "+h+" to be a number or a date"}else d=!1;if(d)throw new qe(u,void 0,a);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x<=t,"expected #{this} to have a "+g+" at most #{exp} but got #{act}","expected #{this} to have a "+g+" above #{exp}",t,x)}else this.assert(r<=t,"expected #{this} to be at most #{exp}","expected #{this} to be above #{exp}",t)}F(vy,"assertMost");b.addMethod("most",vy);b.addMethod("lte",vy);b.addMethod("lessThanOrEqual",vy);b.addMethod("within",function(t,e,r){r&&P(this,"message",r);var n=P(this,"object"),i=P(this,"doLength"),o=P(this,"message"),a=o?o+": ":"",l=P(this,"ssfi"),p=Ze(n).toLowerCase(),u=Ze(t).toLowerCase(),d=Ze(e).toLowerCase(),h,g=!0,x=u==="date"&&d==="date"?t.toISOString()+".."+e.toISOString():t+".."+e;if(i&&p!=="map"&&p!=="set"&&new b(n,o,l,!0).to.have.property("length"),!i&&p==="date"&&(u!=="date"||d!=="date"))h=a+"the arguments to within must be dates";else if((u!=="number"||d!=="number")&&(i||p==="number"))h=a+"the arguments to within must be numbers";else if(!i&&p!=="date"&&p!=="number"){var _=p==="string"?"'"+n+"'":n;h=a+"expected "+_+" to be a number or a date"}else g=!1;if(g)throw new qe(h,void 0,l);if(i){var w="length",C;p==="map"||p==="set"?(w="size",C=n.size):C=n.length,this.assert(C>=t&&C<=e,"expected #{this} to have a "+w+" within "+x,"expected #{this} to not have a "+w+" within "+x)}else this.assert(n>=t&&n<=e,"expected #{this} to be within "+x,"expected #{this} to not be within "+x)});function Ub(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"ssfi"),i=P(this,"message");try{var o=r instanceof t}catch(l){throw l instanceof TypeError?(i=i?i+": ":"",new qe(i+"The instanceof assertion needs a constructor but "+Ze(t)+" was given.",void 0,n)):l}var a=gy(t);a==null&&(a="an unnamed constructor"),this.assert(o,"expected #{this} to be an instance of "+a,"expected #{this} to not be an instance of "+a)}F(Ub,"assertInstanceOf");b.addMethod("instanceof",Ub);b.addMethod("instanceOf",Ub);function Vb(t,e,r){r&&P(this,"message",r);var n=P(this,"nested"),i=P(this,"own"),o=P(this,"message"),a=P(this,"object"),l=P(this,"ssfi"),p=typeof t;if(o=o?o+": ":"",n){if(p!=="string")throw new qe(o+"the argument to property must be a string when using nested syntax",void 0,l)}else if(p!=="string"&&p!=="number"&&p!=="symbol")throw new qe(o+"the argument to property must be a string, number, or symbol",void 0,l);if(n&&i)throw new qe(o+'The "nested" and "own" flags cannot be combined.',void 0,l);if(a==null)throw new qe(o+"Target cannot be null or undefined.",void 0,l);var u=P(this,"deep"),d=P(this,"negate"),h=n?_b(a,t):null,g=n?h.value:a[t],x=u?P(this,"eql"):(C,M)=>C===M,_="";u&&(_+="deep "),i&&(_+="own "),n&&(_+="nested "),_+="property ";var w;i?w=Object.prototype.hasOwnProperty.call(a,t):n?w=h.exists:w=hy(a,t),(!d||arguments.length===1)&&this.assert(w,"expected #{this} to have "+_+Le(t),"expected #{this} to not have "+_+Le(t)),arguments.length>1&&this.assert(w&&x(e,g),"expected #{this} to have "+_+Le(t)+" of #{exp}, but got #{act}","expected #{this} to not have "+_+Le(t)+" of #{act}",e,g),P(this,"object",g)}F(Vb,"assertProperty");b.addMethod("property",Vb);function Bb(t,e,r){P(this,"own",!0),Vb.apply(this,arguments)}F(Bb,"assertOwnProperty");b.addMethod("ownProperty",Bb);b.addMethod("haveOwnProperty",Bb);function Hb(t,e,r){typeof e=="string"&&(r=e,e=null),r&&P(this,"message",r);var n=P(this,"object"),i=Object.getOwnPropertyDescriptor(Object(n),t),o=P(this,"eql");i&&e?this.assert(o(e,i),"expected the own property descriptor for "+Le(t)+" on #{this} to match "+Le(e)+", got "+Le(i),"expected the own property descriptor for "+Le(t)+" on #{this} to not match "+Le(e),e,i,!0):this.assert(i,"expected #{this} to have an own property descriptor for "+Le(t),"expected #{this} to not have an own property descriptor for "+Le(t)),P(this,"object",i)}F(Hb,"assertOwnPropertyDescriptor");b.addMethod("ownPropertyDescriptor",Hb);b.addMethod("haveOwnPropertyDescriptor",Hb);function Wb(){P(this,"doLength",!0)}F(Wb,"assertLengthChain");function $b(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=Ze(r).toLowerCase(),i=P(this,"message"),o=P(this,"ssfi"),a="length",l;switch(n){case"map":case"set":a="size",l=r.size;break;default:new b(r,i,o,!0).to.have.property("length"),l=r.length}this.assert(l==t,"expected #{this} to have a "+a+" of #{exp} but got #{act}","expected #{this} to not have a "+a+" of #{act}",t,l)}F($b,"assertLength");b.addChainableMethod("length",$b,Wb);b.addChainableMethod("lengthOf",$b,Wb);function jb(t,e){e&&P(this,"message",e);var r=P(this,"object");this.assert(t.exec(r),"expected #{this} to match "+t,"expected #{this} not to match "+t)}F(jb,"assertMatch");b.addMethod("match",jb);b.addMethod("matches",jb);b.addMethod("string",function(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"message"),i=P(this,"ssfi");new b(r,n,i,!0).is.a("string"),this.assert(~r.indexOf(t),"expected #{this} to contain "+Le(t),"expected #{this} to not contain "+Le(t))});function qb(t){var e=P(this,"object"),r=Ze(e),n=Ze(t),i=P(this,"ssfi"),o=P(this,"deep"),a,l="",p,u=!0,d=P(this,"message");d=d?d+": ":"";var h=d+"when testing keys against an object or an array you must give a single Array|Object|String argument or multiple String arguments";if(r==="Map"||r==="Set")l=o?"deeply ":"",p=[],e.forEach(function(U,Z){p.push(Z)}),n!=="Array"&&(t=Array.prototype.slice.call(arguments));else{switch(p=Ib(e),n){case"Array":if(arguments.length>1)throw new qe(h,void 0,i);break;case"Object":if(arguments.length>1)throw new qe(h,void 0,i);t=Object.keys(t);break;default:t=Array.prototype.slice.call(arguments)}t=t.map(function(U){return typeof U=="symbol"?U:String(U)})}if(!t.length)throw new qe(d+"keys required",void 0,i);var g=t.length,x=P(this,"any"),_=P(this,"all"),w=t,C=o?P(this,"eql"):(U,Z)=>U===Z;if(!x&&!_&&(_=!0),x&&(u=w.some(function(U){return p.some(function(Z){return C(U,Z)})})),_&&(u=w.every(function(U){return p.some(function(Z){return C(U,Z)})}),P(this,"contains")||(u=u&&t.length==p.length)),g>1){t=t.map(function(U){return Le(U)});var M=t.pop();_&&(a=t.join(", ")+", and "+M),x&&(a=t.join(", ")+", or "+M)}else a=Le(t[0]);a=(g>1?"keys ":"key ")+a,a=(P(this,"contains")?"contain ":"have ")+a,this.assert(u,"expected #{this} to "+l+a,"expected #{this} to not "+l+a,w.slice(0).sort(ly),p.sort(ly),!0)}F(qb,"assertKeys");b.addMethod("keys",qb);b.addMethod("key",qb);function by(t,e,r){r&&P(this,"message",r);var n=P(this,"object"),i=P(this,"ssfi"),o=P(this,"message"),a=P(this,"negate")||!1;new b(n,o,i,!0).is.a("function"),(uy(t)||typeof t=="string")&&(e=t,t=null);let l,p=!1;try{n()}catch(U){p=!0,l=U}var u=t===void 0&&e===void 0,d=!!(t&&e),h=!1,g=!1;if(u||!u&&!a){var x="an error";t instanceof Error?x="#{exp}":t&&(x=zr.getConstructorName(t));let U=l;if(l instanceof Error)U=l.toString();else if(typeof l=="string")U=l;else if(l&&(typeof l=="object"||typeof l=="function"))try{U=zr.getConstructorName(l)}catch{}this.assert(p,"expected #{this} to throw "+x,"expected #{this} to not throw an error but #{act} was thrown",t&&t.toString(),U)}if(t&&l){if(t instanceof Error){var _=zr.compatibleInstance(l,t);_===a&&(d&&a?h=!0:this.assert(a,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l&&!a?" but #{act} was thrown":""),t.toString(),l.toString()))}var w=zr.compatibleConstructor(l,t);w===a&&(d&&a?h=!0:this.assert(a,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&zr.getConstructorName(t),l instanceof Error?l.toString():l&&zr.getConstructorName(l)))}if(l&&e!==void 0&&e!==null){var C="including";uy(e)&&(C="matching");var M=zr.compatibleMessage(l,e);M===a&&(d&&a?g=!0:this.assert(a,"expected #{this} to throw error "+C+" #{exp} but got #{act}","expected #{this} to throw error not "+C+" #{exp}",e,zr.getMessage(l)))}h&&g&&this.assert(a,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&zr.getConstructorName(t),l instanceof Error?l.toString():l&&zr.getConstructorName(l)),P(this,"object",l)}F(by,"assertThrows");b.addMethod("throw",by);b.addMethod("throws",by);b.addMethod("Throw",by);function zb(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"itself"),i=typeof r=="function"&&!n?r.prototype[t]:r[t];this.assert(typeof i=="function","expected #{this} to respond to "+Le(t),"expected #{this} to not respond to "+Le(t))}F(zb,"respondTo");b.addMethod("respondTo",zb);b.addMethod("respondsTo",zb);b.addProperty("itself",function(){P(this,"itself",!0)});function Gb(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=t(r);this.assert(n,"expected #{this} to satisfy "+Ss(t),"expected #{this} to not satisfy"+Ss(t),!P(this,"negate"),n)}F(Gb,"satisfy");b.addMethod("satisfy",Gb);b.addMethod("satisfies",Gb);function Kb(t,e,r){r&&P(this,"message",r);var n=P(this,"object"),i=P(this,"message"),o=P(this,"ssfi");if(new b(n,i,o,!0).is.a("number"),typeof t!="number"||typeof e!="number"){i=i?i+": ":"";var a=e===void 0?", and a delta is required":"";throw new qe(i+"the arguments to closeTo or approximately must be numbers"+a,void 0,o)}this.assert(Math.abs(n-t)<=e,"expected #{this} to be close to "+t+" +/- "+e,"expected #{this} not to be close to "+t+" +/- "+e)}F(Kb,"closeTo");b.addMethod("closeTo",Kb);b.addMethod("approximately",Kb);function Y1(t,e,r,n,i){let o=Array.from(e),a=Array.from(t);if(!n){if(a.length!==o.length)return!1;o=o.slice()}return a.every(function(l,p){if(i)return r?r(l,o[p]):l===o[p];if(!r){var u=o.indexOf(l);return u===-1?!1:(n||o.splice(u,1),!0)}return o.some(function(d,h){return r(l,d)?(n||o.splice(h,1),!0):!1})})}F(Y1,"isSubsetOf");b.addMethod("members",function(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"message"),i=P(this,"ssfi");new b(r,n,i,!0).to.be.iterable,new b(t,n,i,!0).to.be.iterable;var o=P(this,"contains"),a=P(this,"ordered"),l,p,u;o?(l=a?"an ordered superset":"a superset",p="expected #{this} to be "+l+" of #{exp}",u="expected #{this} to not be "+l+" of #{exp}"):(l=a?"ordered members":"members",p="expected #{this} to have the same "+l+" as #{exp}",u="expected #{this} to not have the same "+l+" as #{exp}");var d=P(this,"deep")?P(this,"eql"):void 0;this.assert(Y1(t,r,d,o,a),p,u,t,r,!0)});b.addProperty("iterable",function(t){t&&P(this,"message",t);var e=P(this,"object");this.assert(e!=null&&e[Symbol.iterator],"expected #{this} to be an iterable","expected #{this} to not be an iterable",e)});function X1(t,e){e&&P(this,"message",e);var r=P(this,"object"),n=P(this,"message"),i=P(this,"ssfi"),o=P(this,"contains"),a=P(this,"deep"),l=P(this,"eql");new b(t,n,i,!0).to.be.an("array"),o?this.assert(t.some(function(p){return r.indexOf(p)>-1}),"expected #{this} to contain one of #{exp}","expected #{this} to not contain one of #{exp}",t,r):a?this.assert(t.some(function(p){return l(r,p)}),"expected #{this} to deeply equal one of #{exp}","expected #{this} to deeply equal one of #{exp}",t,r):this.assert(t.indexOf(r)>-1,"expected #{this} to be one of #{exp}","expected #{this} to not be one of #{exp}",t,r)}F(X1,"oneOf");b.addMethod("oneOf",X1);function Qb(t,e,r){r&&P(this,"message",r);var n=P(this,"object"),i=P(this,"message"),o=P(this,"ssfi");new b(n,i,o,!0).is.a("function");var a;e?(new b(t,i,o,!0).to.have.property(e),a=t[e]):(new b(t,i,o,!0).is.a("function"),a=t()),n();var l=e==null?t():t[e],p=e==null?a:"."+e;P(this,"deltaMsgObj",p),P(this,"initialDeltaValue",a),P(this,"finalDeltaValue",l),P(this,"deltaBehavior","change"),P(this,"realDelta",l!==a),this.assert(a!==l,"expected "+p+" to change","expected "+p+" to not change")}F(Qb,"assertChanges");b.addMethod("change",Qb);b.addMethod("changes",Qb);function Zb(t,e,r){r&&P(this,"message",r);var n=P(this,"object"),i=P(this,"message"),o=P(this,"ssfi");new b(n,i,o,!0).is.a("function");var a;e?(new b(t,i,o,!0).to.have.property(e),a=t[e]):(new b(t,i,o,!0).is.a("function"),a=t()),new b(a,i,o,!0).is.a("number"),n();var l=e==null?t():t[e],p=e==null?a:"."+e;P(this,"deltaMsgObj",p),P(this,"initialDeltaValue",a),P(this,"finalDeltaValue",l),P(this,"deltaBehavior","increase"),P(this,"realDelta",l-a),this.assert(l-a>0,"expected "+p+" to increase","expected "+p+" to not increase")}F(Zb,"assertIncreases");b.addMethod("increase",Zb);b.addMethod("increases",Zb);function Yb(t,e,r){r&&P(this,"message",r);var n=P(this,"object"),i=P(this,"message"),o=P(this,"ssfi");new b(n,i,o,!0).is.a("function");var a;e?(new b(t,i,o,!0).to.have.property(e),a=t[e]):(new b(t,i,o,!0).is.a("function"),a=t()),new b(a,i,o,!0).is.a("number"),n();var l=e==null?t():t[e],p=e==null?a:"."+e;P(this,"deltaMsgObj",p),P(this,"initialDeltaValue",a),P(this,"finalDeltaValue",l),P(this,"deltaBehavior","decrease"),P(this,"realDelta",a-l),this.assert(l-a<0,"expected "+p+" to decrease","expected "+p+" to not decrease")}F(Yb,"assertDecreases");b.addMethod("decrease",Yb);b.addMethod("decreases",Yb);function J1(t,e){e&&P(this,"message",e);var r=P(this,"deltaMsgObj"),n=P(this,"initialDeltaValue"),i=P(this,"finalDeltaValue"),o=P(this,"deltaBehavior"),a=P(this,"realDelta"),l;o==="change"?l=Math.abs(i-n)===Math.abs(t):l=a===Math.abs(t),this.assert(l,"expected "+r+" to "+o+" by "+t,"expected "+r+" to not "+o+" by "+t)}F(J1,"assertDelta");b.addMethod("by",J1);b.addProperty("extensible",function(){var t=P(this,"object"),e=t===Object(t)&&Object.isExtensible(t);this.assert(e,"expected #{this} to be extensible","expected #{this} to not be extensible")});b.addProperty("sealed",function(){var t=P(this,"object"),e=t===Object(t)?Object.isSealed(t):!0;this.assert(e,"expected #{this} to be sealed","expected #{this} to not be sealed")});b.addProperty("frozen",function(){var t=P(this,"object"),e=t===Object(t)?Object.isFrozen(t):!0;this.assert(e,"expected #{this} to be frozen","expected #{this} to not be frozen")});b.addProperty("finite",function(t){var e=P(this,"object");this.assert(typeof e=="number"&&isFinite(e),"expected #{this} to be a finite number","expected #{this} to not be a finite number")});function fy(t,e){return new b(t,e)}F(fy,"expect");fy.fail=function(t,e,r,n){throw arguments.length<2&&(r=t,t=void 0),r=r||"expect.fail()",new qe(r,{actual:t,expected:e,operator:n},fy.fail)};var eC={};yb(eC,{Should:()=>LY,should:()=>NY});function Xb(){function t(){return this instanceof String||this instanceof Number||this instanceof Boolean||typeof Symbol=="function"&&this instanceof Symbol||typeof BigInt=="function"&&this instanceof BigInt?new b(this.valueOf(),null,t):new b(this,null,t)}F(t,"shouldGetter");function e(n){Object.defineProperty(this,"should",{value:n,enumerable:!0,configurable:!0,writable:!0})}F(e,"shouldSetter"),Object.defineProperty(Object.prototype,"should",{set:e,get:t,configurable:!0});var r={};return r.fail=function(n,i,o,a){throw arguments.length<2&&(o=n,n=void 0),o=o||"should.fail()",new qe(o,{actual:n,expected:i,operator:a},r.fail)},r.equal=function(n,i,o){new b(n,o).to.equal(i)},r.Throw=function(n,i,o,a){new b(n,a).to.Throw(i,o)},r.exist=function(n,i){new b(n,i).to.exist},r.not={},r.not.equal=function(n,i,o){new b(n,o).to.not.equal(i)},r.not.Throw=function(n,i,o,a){new b(n,a).to.not.Throw(i,o)},r.not.exist=function(n,i){new b(n,i).to.not.exist},r.throw=r.Throw,r.not.throw=r.not.Throw,r}F(Xb,"loadShould");var NY=Xb,LY=Xb;function v(t,e){var r=new b(null,null,v,!0);r.assert(t,e,"[ negation message unavailable ]")}F(v,"assert");v.fail=function(t,e,r,n){throw arguments.length<2&&(r=t,t=void 0),r=r||"assert.fail()",new qe(r,{actual:t,expected:e,operator:n},v.fail)};v.isOk=function(t,e){new b(t,e,v.isOk,!0).is.ok};v.isNotOk=function(t,e){new b(t,e,v.isNotOk,!0).is.not.ok};v.equal=function(t,e,r){var n=new b(t,r,v.equal,!0);n.assert(e==_e(n,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",e,t,!0)};v.notEqual=function(t,e,r){var n=new b(t,r,v.notEqual,!0);n.assert(e!=_e(n,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",e,t,!0)};v.strictEqual=function(t,e,r){new b(t,r,v.strictEqual,!0).to.equal(e)};v.notStrictEqual=function(t,e,r){new b(t,r,v.notStrictEqual,!0).to.not.equal(e)};v.deepEqual=v.deepStrictEqual=function(t,e,r){new b(t,r,v.deepEqual,!0).to.eql(e)};v.notDeepEqual=function(t,e,r){new b(t,r,v.notDeepEqual,!0).to.not.eql(e)};v.isAbove=function(t,e,r){new b(t,r,v.isAbove,!0).to.be.above(e)};v.isAtLeast=function(t,e,r){new b(t,r,v.isAtLeast,!0).to.be.least(e)};v.isBelow=function(t,e,r){new b(t,r,v.isBelow,!0).to.be.below(e)};v.isAtMost=function(t,e,r){new b(t,r,v.isAtMost,!0).to.be.most(e)};v.isTrue=function(t,e){new b(t,e,v.isTrue,!0).is.true};v.isNotTrue=function(t,e){new b(t,e,v.isNotTrue,!0).to.not.equal(!0)};v.isFalse=function(t,e){new b(t,e,v.isFalse,!0).is.false};v.isNotFalse=function(t,e){new b(t,e,v.isNotFalse,!0).to.not.equal(!1)};v.isNull=function(t,e){new b(t,e,v.isNull,!0).to.equal(null)};v.isNotNull=function(t,e){new b(t,e,v.isNotNull,!0).to.not.equal(null)};v.isNaN=function(t,e){new b(t,e,v.isNaN,!0).to.be.NaN};v.isNotNaN=function(t,e){new b(t,e,v.isNotNaN,!0).not.to.be.NaN};v.exists=function(t,e){new b(t,e,v.exists,!0).to.exist};v.notExists=function(t,e){new b(t,e,v.notExists,!0).to.not.exist};v.isUndefined=function(t,e){new b(t,e,v.isUndefined,!0).to.equal(void 0)};v.isDefined=function(t,e){new b(t,e,v.isDefined,!0).to.not.equal(void 0)};v.isCallable=function(t,e){new b(t,e,v.isCallable,!0).is.callable};v.isNotCallable=function(t,e){new b(t,e,v.isNotCallable,!0).is.not.callable};v.isObject=function(t,e){new b(t,e,v.isObject,!0).to.be.a("object")};v.isNotObject=function(t,e){new b(t,e,v.isNotObject,!0).to.not.be.a("object")};v.isArray=function(t,e){new b(t,e,v.isArray,!0).to.be.an("array")};v.isNotArray=function(t,e){new b(t,e,v.isNotArray,!0).to.not.be.an("array")};v.isString=function(t,e){new b(t,e,v.isString,!0).to.be.a("string")};v.isNotString=function(t,e){new b(t,e,v.isNotString,!0).to.not.be.a("string")};v.isNumber=function(t,e){new b(t,e,v.isNumber,!0).to.be.a("number")};v.isNotNumber=function(t,e){new b(t,e,v.isNotNumber,!0).to.not.be.a("number")};v.isFinite=function(t,e){new b(t,e,v.isFinite,!0).to.be.finite};v.isBoolean=function(t,e){new b(t,e,v.isBoolean,!0).to.be.a("boolean")};v.isNotBoolean=function(t,e){new b(t,e,v.isNotBoolean,!0).to.not.be.a("boolean")};v.typeOf=function(t,e,r){new b(t,r,v.typeOf,!0).to.be.a(e)};v.notTypeOf=function(t,e,r){new b(t,r,v.notTypeOf,!0).to.not.be.a(e)};v.instanceOf=function(t,e,r){new b(t,r,v.instanceOf,!0).to.be.instanceOf(e)};v.notInstanceOf=function(t,e,r){new b(t,r,v.notInstanceOf,!0).to.not.be.instanceOf(e)};v.include=function(t,e,r){new b(t,r,v.include,!0).include(e)};v.notInclude=function(t,e,r){new b(t,r,v.notInclude,!0).not.include(e)};v.deepInclude=function(t,e,r){new b(t,r,v.deepInclude,!0).deep.include(e)};v.notDeepInclude=function(t,e,r){new b(t,r,v.notDeepInclude,!0).not.deep.include(e)};v.nestedInclude=function(t,e,r){new b(t,r,v.nestedInclude,!0).nested.include(e)};v.notNestedInclude=function(t,e,r){new b(t,r,v.notNestedInclude,!0).not.nested.include(e)};v.deepNestedInclude=function(t,e,r){new b(t,r,v.deepNestedInclude,!0).deep.nested.include(e)};v.notDeepNestedInclude=function(t,e,r){new b(t,r,v.notDeepNestedInclude,!0).not.deep.nested.include(e)};v.ownInclude=function(t,e,r){new b(t,r,v.ownInclude,!0).own.include(e)};v.notOwnInclude=function(t,e,r){new b(t,r,v.notOwnInclude,!0).not.own.include(e)};v.deepOwnInclude=function(t,e,r){new b(t,r,v.deepOwnInclude,!0).deep.own.include(e)};v.notDeepOwnInclude=function(t,e,r){new b(t,r,v.notDeepOwnInclude,!0).not.deep.own.include(e)};v.match=function(t,e,r){new b(t,r,v.match,!0).to.match(e)};v.notMatch=function(t,e,r){new b(t,r,v.notMatch,!0).to.not.match(e)};v.property=function(t,e,r){new b(t,r,v.property,!0).to.have.property(e)};v.notProperty=function(t,e,r){new b(t,r,v.notProperty,!0).to.not.have.property(e)};v.propertyVal=function(t,e,r,n){new b(t,n,v.propertyVal,!0).to.have.property(e,r)};v.notPropertyVal=function(t,e,r,n){new b(t,n,v.notPropertyVal,!0).to.not.have.property(e,r)};v.deepPropertyVal=function(t,e,r,n){new b(t,n,v.deepPropertyVal,!0).to.have.deep.property(e,r)};v.notDeepPropertyVal=function(t,e,r,n){new b(t,n,v.notDeepPropertyVal,!0).to.not.have.deep.property(e,r)};v.ownProperty=function(t,e,r){new b(t,r,v.ownProperty,!0).to.have.own.property(e)};v.notOwnProperty=function(t,e,r){new b(t,r,v.notOwnProperty,!0).to.not.have.own.property(e)};v.ownPropertyVal=function(t,e,r,n){new b(t,n,v.ownPropertyVal,!0).to.have.own.property(e,r)};v.notOwnPropertyVal=function(t,e,r,n){new b(t,n,v.notOwnPropertyVal,!0).to.not.have.own.property(e,r)};v.deepOwnPropertyVal=function(t,e,r,n){new b(t,n,v.deepOwnPropertyVal,!0).to.have.deep.own.property(e,r)};v.notDeepOwnPropertyVal=function(t,e,r,n){new b(t,n,v.notDeepOwnPropertyVal,!0).to.not.have.deep.own.property(e,r)};v.nestedProperty=function(t,e,r){new b(t,r,v.nestedProperty,!0).to.have.nested.property(e)};v.notNestedProperty=function(t,e,r){new b(t,r,v.notNestedProperty,!0).to.not.have.nested.property(e)};v.nestedPropertyVal=function(t,e,r,n){new b(t,n,v.nestedPropertyVal,!0).to.have.nested.property(e,r)};v.notNestedPropertyVal=function(t,e,r,n){new b(t,n,v.notNestedPropertyVal,!0).to.not.have.nested.property(e,r)};v.deepNestedPropertyVal=function(t,e,r,n){new b(t,n,v.deepNestedPropertyVal,!0).to.have.deep.nested.property(e,r)};v.notDeepNestedPropertyVal=function(t,e,r,n){new b(t,n,v.notDeepNestedPropertyVal,!0).to.not.have.deep.nested.property(e,r)};v.lengthOf=function(t,e,r){new b(t,r,v.lengthOf,!0).to.have.lengthOf(e)};v.hasAnyKeys=function(t,e,r){new b(t,r,v.hasAnyKeys,!0).to.have.any.keys(e)};v.hasAllKeys=function(t,e,r){new b(t,r,v.hasAllKeys,!0).to.have.all.keys(e)};v.containsAllKeys=function(t,e,r){new b(t,r,v.containsAllKeys,!0).to.contain.all.keys(e)};v.doesNotHaveAnyKeys=function(t,e,r){new b(t,r,v.doesNotHaveAnyKeys,!0).to.not.have.any.keys(e)};v.doesNotHaveAllKeys=function(t,e,r){new b(t,r,v.doesNotHaveAllKeys,!0).to.not.have.all.keys(e)};v.hasAnyDeepKeys=function(t,e,r){new b(t,r,v.hasAnyDeepKeys,!0).to.have.any.deep.keys(e)};v.hasAllDeepKeys=function(t,e,r){new b(t,r,v.hasAllDeepKeys,!0).to.have.all.deep.keys(e)};v.containsAllDeepKeys=function(t,e,r){new b(t,r,v.containsAllDeepKeys,!0).to.contain.all.deep.keys(e)};v.doesNotHaveAnyDeepKeys=function(t,e,r){new b(t,r,v.doesNotHaveAnyDeepKeys,!0).to.not.have.any.deep.keys(e)};v.doesNotHaveAllDeepKeys=function(t,e,r){new b(t,r,v.doesNotHaveAllDeepKeys,!0).to.not.have.all.deep.keys(e)};v.throws=function(t,e,r,n){(typeof e=="string"||e instanceof RegExp)&&(r=e,e=null);var i=new b(t,n,v.throws,!0).to.throw(e,r);return _e(i,"object")};v.doesNotThrow=function(t,e,r,n){(typeof e=="string"||e instanceof RegExp)&&(r=e,e=null),new b(t,n,v.doesNotThrow,!0).to.not.throw(e,r)};v.operator=function(t,e,r,n){var i;switch(e){case"==":i=t==r;break;case"===":i=t===r;break;case">":i=t>r;break;case">=":i=t>=r;break;case"<":i=t<r;break;case"<=":i=t<=r;break;case"!=":i=t!=r;break;case"!==":i=t!==r;break;default:throw n=n&&n+": ",new qe(n+'Invalid operator "'+e+'"',void 0,v.operator)}var o=new b(i,n,v.operator,!0);o.assert(_e(o,"object")===!0,"expected "+Le(t)+" to be "+e+" "+Le(r),"expected "+Le(t)+" to not be "+e+" "+Le(r))};v.closeTo=function(t,e,r,n){new b(t,n,v.closeTo,!0).to.be.closeTo(e,r)};v.approximately=function(t,e,r,n){new b(t,n,v.approximately,!0).to.be.approximately(e,r)};v.sameMembers=function(t,e,r){new b(t,r,v.sameMembers,!0).to.have.same.members(e)};v.notSameMembers=function(t,e,r){new b(t,r,v.notSameMembers,!0).to.not.have.same.members(e)};v.sameDeepMembers=function(t,e,r){new b(t,r,v.sameDeepMembers,!0).to.have.same.deep.members(e)};v.notSameDeepMembers=function(t,e,r){new b(t,r,v.notSameDeepMembers,!0).to.not.have.same.deep.members(e)};v.sameOrderedMembers=function(t,e,r){new b(t,r,v.sameOrderedMembers,!0).to.have.same.ordered.members(e)};v.notSameOrderedMembers=function(t,e,r){new b(t,r,v.notSameOrderedMembers,!0).to.not.have.same.ordered.members(e)};v.sameDeepOrderedMembers=function(t,e,r){new b(t,r,v.sameDeepOrderedMembers,!0).to.have.same.deep.ordered.members(e)};v.notSameDeepOrderedMembers=function(t,e,r){new b(t,r,v.notSameDeepOrderedMembers,!0).to.not.have.same.deep.ordered.members(e)};v.includeMembers=function(t,e,r){new b(t,r,v.includeMembers,!0).to.include.members(e)};v.notIncludeMembers=function(t,e,r){new b(t,r,v.notIncludeMembers,!0).to.not.include.members(e)};v.includeDeepMembers=function(t,e,r){new b(t,r,v.includeDeepMembers,!0).to.include.deep.members(e)};v.notIncludeDeepMembers=function(t,e,r){new b(t,r,v.notIncludeDeepMembers,!0).to.not.include.deep.members(e)};v.includeOrderedMembers=function(t,e,r){new b(t,r,v.includeOrderedMembers,!0).to.include.ordered.members(e)};v.notIncludeOrderedMembers=function(t,e,r){new b(t,r,v.notIncludeOrderedMembers,!0).to.not.include.ordered.members(e)};v.includeDeepOrderedMembers=function(t,e,r){new b(t,r,v.includeDeepOrderedMembers,!0).to.include.deep.ordered.members(e)};v.notIncludeDeepOrderedMembers=function(t,e,r){new b(t,r,v.notIncludeDeepOrderedMembers,!0).to.not.include.deep.ordered.members(e)};v.oneOf=function(t,e,r){new b(t,r,v.oneOf,!0).to.be.oneOf(e)};v.isIterable=function(t,e){if(t==null||!t[Symbol.iterator])throw e=e?`${e} expected ${Le(t)} to be an iterable`:`expected ${Le(t)} to be an iterable`,new qe(e,void 0,v.isIterable)};v.changes=function(t,e,r,n){arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.changes,!0).to.change(e,r)};v.changesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.changesBy,!0).to.change(e,r).by(n)};v.doesNotChange=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.doesNotChange,!0).to.not.change(e,r)};v.changesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.changesButNotBy,!0).to.change(e,r).but.not.by(n)};v.increases=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.increases,!0).to.increase(e,r)};v.increasesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.increasesBy,!0).to.increase(e,r).by(n)};v.doesNotIncrease=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.doesNotIncrease,!0).to.not.increase(e,r)};v.increasesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.increasesButNotBy,!0).to.increase(e,r).but.not.by(n)};v.decreases=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.decreases,!0).to.decrease(e,r)};v.decreasesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.decreasesBy,!0).to.decrease(e,r).by(n)};v.doesNotDecrease=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.doesNotDecrease,!0).to.not.decrease(e,r)};v.doesNotDecreaseBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);return new b(t,i,v.doesNotDecreaseBy,!0).to.not.decrease(e,r).by(n)};v.decreasesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.decreasesButNotBy,!0).to.decrease(e,r).but.not.by(n)};v.ifError=function(t){if(t)throw t};v.isExtensible=function(t,e){new b(t,e,v.isExtensible,!0).to.be.extensible};v.isNotExtensible=function(t,e){new b(t,e,v.isNotExtensible,!0).to.not.be.extensible};v.isSealed=function(t,e){new b(t,e,v.isSealed,!0).to.be.sealed};v.isNotSealed=function(t,e){new b(t,e,v.isNotSealed,!0).to.not.be.sealed};v.isFrozen=function(t,e){new b(t,e,v.isFrozen,!0).to.be.frozen};v.isNotFrozen=function(t,e){new b(t,e,v.isNotFrozen,!0).to.not.be.frozen};v.isEmpty=function(t,e){new b(t,e,v.isEmpty,!0).to.be.empty};v.isNotEmpty=function(t,e){new b(t,e,v.isNotEmpty,!0).to.not.be.empty};F(function t(e,r){return v[r]=v[e],t},"alias")("isOk","ok")("isNotOk","notOk")("throws","throw")("throws","Throw")("isExtensible","extensible")("isNotExtensible","notExtensible")("isSealed","sealed")("isNotSealed","notSealed")("isFrozen","frozen")("isNotFrozen","notFrozen")("isEmpty","empty")("isNotEmpty","notEmpty")("isCallable","isFunction")("isNotCallable","isNotFunction");var u1=[];function UY(t){let e={AssertionError:qe,util:oy,config:Rr,expect:fy,assert:v,Assertion:b,...eC};return~u1.indexOf(t)||(t(e,oy),u1.push(t)),e}F(UY,"use");var Cp=class{constructor(e,r,n){this._lineNumber=e,this._text=r,this._isLastLine=n}get lineNumber(){return this._lineNumber}get text(){return this._text}get range(){return new W(this._lineNumber,0,this._lineNumber,this._text.length)}get rangeIncludingLineBreak(){return this._isLastLine?this.range:new W(this._lineNumber,0,this._lineNumber+1,0)}get rangeTrimmed(){let e=/^(\s*)/.exec(this._text)[1].length;if(e===this._text.length)return;let r=this.text.trimEnd().length;return new W(this._lineNumber,e,this._lineNumber,r)}get isEmptyOrWhitespace(){return this.rangeTrimmed==null}};var tC=dr(require("node:path"),1),wy=class{get uri(){return this._uri}get filename(){return tC.default.basename(this._uri.path)}get languageId(){return this._languageId}get version(){return this._version}get lineCount(){return this._lineCount}get range(){let{end:e}=this.lineAt(this.lineCount-1).range;return new W(0,0,e.line,e.character)}get eol(){return this._eol===`
`?"LF":"CRLF"}constructor(e,r,n,i,o){this._uri=e,this._languageId=r,this._version=n,this._eol=i,this._lines=o,this._lineCount=o.length,this._lineStarts=null,this._cachedTextValue=null}update(e){this._lines=e,this._lineCount=e.length,this._lineStarts=null,this._cachedTextValue=null}lineAt(e){let r;if(e instanceof ce?r=e.line:typeof e=="number"&&(r=e),typeof r!="number"||r<0||Math.floor(r)!==r)throw new Error("Illegal value for `line`");return r=Math.min(r,this._lines.length-1),new Cp(r,this._lines[r],r===this._lines.length-1)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.line-1)+e.character}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();let r=this._lineStarts.getIndexOf(e),n=this._lines[r.index].length;return new ce(r.index,Math.min(r.remainder,n))}getText(e){if(e===void 0)return this._cachedTextValue==null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue;if(e=this._validateRange(e),e.isEmpty)return"";if(e.isSingleLine)return this._lines[e.start.line].substring(e.start.character,e.end.character);let r=this._eol,n=e.start.line,i=e.end.line,o=[];o.push(this._lines[n].substring(e.start.character));for(let a=n+1;a<i;a++)o.push(this._lines[a]);return o.push(this._lines[i].substring(0,e.end.character)),o.join(r)}_validateRange(e){if(!(e instanceof W))throw new Error("Invalid argument");let r=this._validatePosition(e.start),n=this._validatePosition(e.end);return r===e.start&&n===e.end?e:new W(r.line,r.character,n.line,n.character)}_validatePosition(e){if(!(e instanceof ce))throw new Error("Invalid argument");if(this._lines.length===0)return e.with(0,0);let{line:r,character:n}=e,i=!1;if(r<0)r=0,n=0,i=!0;else if(r>=this._lines.length)r=this._lines.length-1,n=this._lines[r].length,i=!0;else{let o=this._lines[r].length;n<0?(n=0,i=!0):n>o&&(n=o,i=!0)}return i?new ce(r,n):e}_ensureLineStarts(){if(!this._lineStarts){let e=this._eol.length,r=this._lines.length,n=new Uint32Array(r);for(let i=0;i<r;i++)n[i]=this._lines[i].length+e;this._lineStarts=new Jb(n)}}};function HY(t){if(t<0)return 0;let e=4294967295;return t>e?e:t|0}var Jb=class{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}getCount(){return this.values.length}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=HY(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let r=this.prefixSumValidIndex[0]+1;r===0&&(this.prefixSum[0]=this.values[0],r++),e>=this.values.length&&(e=this.values.length-1);for(let n=r;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let r=0,n=this.values.length-1,i=0,o=0,a=0;for(;r<=n;)if(i=r+(n-r)/2|0,o=this.prefixSum[i],a=o-this.values[i],e<a)n=i-1;else if(e>=o)r=i+1;else break;return new ew(i,e-a)}},ew=class{constructor(e,r){this.index=e;this.remainder=r;this._prefixSumIndexOfResultBrand=void 0;this.index=e,this.remainder=r}};var _y=class{constructor(e){this.client=e;this.cursorlessVersion="0.0.0";this.workspaceFolders=void 0;this.disposables=[];this.quickPickReturnValue=void 0;this.onDidCloseTextDocument=Op;this.onDidChangeActiveTextEditor=Op;this.onDidChangeVisibleTextEditors=Op;this.onDidChangeTextEditorSelection=Op;this.onDidChangeTextEditorVisibleRanges=Op;this.configuration=new cp,this.keyValueStore=new lp,this.messages=new pp,this.clipboard=new sp(this.client),this.capabilities=new Lg,this.editorMap=new Map,this.documentMap=new Map,this.activeWindow=void 0,this.activeBuffer=void 0}async init(){let e=await BI(this.client);this.assetsRoot_=tw.default.join(e,"assets"),this.cursorlessNeovimPath=tw.default.join(e,"node","cursorless-neovim")}async showQuickPick(e,r){throw Error("showQuickPick Not implemented")}async setHighlightRanges(e,r,n){throw Error("setHighlightRanges Not implemented")}async flashRanges(e){console.debug("flashRanges Not implemented")}get assetsRoot(){if(this.assetsRoot_==null)throw Error("Field `assetsRoot` has not yet been mocked");return this.assetsRoot_}get runMode(){return r1()}get activeTextEditor(){return this.getActiveTextEditor()}get activeEditableTextEditor(){return this.getActiveTextEditor()}getActiveTextEditor(){let e=this.activeWindow?this.getTextEditor(this.activeWindow):void 0;return e===void 0&&console.debug("getActiveTextEditor: editor is undefined"),e}getTextEditor(e){for(let[r,n]of this.editorMap)if(r.id===e.id)return n}getTextDocument(e){for(let[r,n]of this.documentMap)if(r.id===e.id)return n}get visibleTextEditors(){return Array.from(this.editorMap.values())}getEditableTextEditor(e){return e}async findInDocument(e,r){throw Error("findInDocument Not implemented")}async findInWorkspace(e){throw Error("findInWorkspace Not implemented")}async openTextDocument(e){throw Error("openTextDocument Not implemented")}async openUntitledTextDocument(e){throw Error("openUntitledTextDocument Not implemented")}async showInputBox(e){throw Error("TextDocumentChangeEvent Not implemented")}async executeCommand(e,...r){throw new Error("executeCommand Method not implemented.")}onDidChangeTextDocument(e){return ZI(e)}onDidOpenTextDocument(e,r,n){return YI(e,r,n)}async updateTextEditor(e=!1){let r=await this.client.window,n=await r.buffer,i=await n.lines,o=i;i.length>=30&&(o=i.slice(0,15).concat(["..."]).concat(i.slice(-15))),console.debug(`updateTextEditor(): window:${r.id}, buffer:${n.id}, lines=${JSON.stringify(o)}`);let a,l;e?(a=[],l=[]):(a=await Og(r,this.client),l=await VI(r,this.client,i));let p=this.toNeovimEditor(r,n,i,l,a);return $r().emitEvent("onDidOpenTextDocument",p.document),p}toNeovimEditor(e,r,n,i,o){let a=this.getTextDocument(r),l=this.getTextEditor(e);return a?(console.debug(`toNeovimEditor(): updating document: buffer=${r.id}`),a.update(n)):(console.debug(`toNeovimEditor(): creating new document: buffer=${r.id}`),a=new wy(rF.parse(`neovim://${r.id}`),"plaintext",1,`
`,n),this.documentMap.set(r,a)),l?(console.debug(`toNeovimEditor(): updating editor: window=${e.id}`),l.updateDocument(i,o,a)):(console.debug(`toNeovimEditor(): creating new editor: window=${e.id}`),l=new Vg(zP(),this.client,this,e,a,i,o),this.editorMap.set(e,l)),this.activeBuffer=r,this.activeWindow=e,this.activeTextEditor}handleCommandError(e){qI(this.client,e.message)}disposeOnExit(...e){return this.disposables.push(...e),()=>(0,rC.pull)(this.disposables,...e)}};function Op(){return{dispose(){}}}var Ey=class{constructor(e){this.client=e;this.signals={prePhrase:{getVersion:async()=>null}}}async getFocusedElementType(){let e=await this.client.mode;return e.mode==="t"||e.mode==="nt"?"terminal":"textEditor"}};var $Y=BigInt(1e9);function nC(t,e=BigInt(1e6)){return Number(t*e/$Y)/Number(e)}async function Ry(t,e=[],r=[],n,i,o,a,l){let p={documentContents:n.document.getText(),selections:n.selections.map(dk)};o!=null&&(p.marks=o),l!=null&&(p.metadata=l),e.includes("clipboard")||(p.clipboard=await i.clipboard.readText()),e.includes("visibleRanges")||(p.visibleRanges=n.visibleRanges.map(Zc));for(let u of ca){let d=t?.get(u),h=`${u}Mark`;d!=null&&!e.includes(h)&&(p[h]=d.map(g=>g.toPlainObject()))}if(r.includes("timeOffsetSeconds")){let u=a?.startTimestamp;if(u==null)throw new Error("No start timestamp provided but time offset was requested");let d=process.hrtime.bigint()-u;p.timeOffsetSeconds=nC(d)}return p}var jY=dr(xl(),1);function iC(t,e,r,n,i,o,a,l){return{commandServerApi:t,ide:i,neovimIDE:n,injectIde:a,scopeProvider:o,takeSnapshot(p,u,d,h,g){return Ry(e,p,u,d,h,g,void 0,void 0)},setStoredTarget(p,u,d){e.set(u,d?.map(h=>OI(p,h)))},hatTokenMap:r,runIntegrationTests:l}}async function oC(t,e,r,n){let i={[Kx]:async(...o)=>{(await t.mode).mode==="t"&&$I(t);try{await e.updateTextEditor();let l=await r.runCommandSafe(...o),p=Mf(o);if(await n.getFocusedElementType()==="terminal"&&zo(p)){let d=l;"fallback"in d&&d.fallback.action==="insert"&&jI(t)}return l}catch(l){if(e.runMode!=="test"){let p=l;console.error(p.stack),e.handleCommandError(p)}throw l}},"cursorless.repeatPreviousCommand":De,"cursorless.showCheatsheet":De,"cursorless.internal.updateCheatsheetDefaults":De,"cursorless.recordTestCase":De,"cursorless.recordOneTestCaseThenPause":De,"cursorless.pauseRecording":De,"cursorless.resumeRecording":De,"cursorless.takeSnapshot":De,"cursorless.recordScopeTests.showUnimplementedFacets":De,"cursorless.recordScopeTests.saveActiveDocument":De,"cursorless.showQuickPick":De,"cursorless.showDocumentation":De,"cursorless.private.logQuickActions":De,"cursorless.toggleDecorations":De,"cursorless.recomputeDecorationStyles":De,"cursorless.showScopeVisualizer":De,"cursorless.hideScopeVisualizer":De,"cursorless.analyzeCommandHistory":De,"cursorless.keyboard.escape":De,"cursorless.keyboard.targeted.targetHat":De,"cursorless.keyboard.targeted.targetScope":De,"cursorless.keyboard.targeted.targetSelection":De,"cursorless.keyboard.targeted.clearTarget":De,"cursorless.keyboard.targeted.runActionOnTarget":De,"cursorless.keyboard.modal.modeOn":De,"cursorless.keyboard.modal.modeOff":De,"cursorless.keyboard.modal.modeToggle":De,"cursorless.keyboard.undoTarget":De,"cursorless.keyboard.redoTarget":De,"cursorless.tutorial.start":De,"cursorless.tutorial.next":De,"cursorless.tutorial.previous":De,"cursorless.tutorial.restart":De,"cursorless.tutorial.resume":De,"cursorless.tutorial.list":De,"cursorless.documentationOpened":De};Object.entries(i).map(([o,a])=>$r().registerCommand(o,a))}async function De(...t){console.debug(`dummyCommandHandler(): args=${t}`)}async function sC(t){let e=t.nvim,r=new _y(e);await r.init();let n=r.runMode==="production"?r:new xf(r,new hf,r.runMode==="test",void 0),i=new Au,o=new Ey(e),a=r.runMode==="test"?i:o,{commandApi:l,storedTargets:p,hatTokenMap:u,scopeProvider:d,injectIde:h,runIntegrationTests:g}=await CI({ide:n,commandServerApi:a});await oC(e,r,l,a);let x={testHelpers:r.runMode==="test"?iC(i,p,u,r,n,d,h,g):void 0};$r().registerExtensionApi(LI,x),console.log("activate(): Cursorless extension loaded")}function aC(t){t.setOptions({dev:!1}),t.registerFunction("CursorlessLoadExtension",async()=>await qY(t),{sync:!1})}async function qY(t){console.log("==============================================================================================="),console.log("loadExtension(cursorless-neovim): start"),await sC(t),console.log("loadExtension(cursorless-neovim): done")}
/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)

itertools/dist/index.js:
  (* istanbul ignore else -- @preserve *)
  (* istanbul ignore if -- @preserve *)

chai/chai.js:
  (*!
   * Chai - flag utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - test utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - expectTypes utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getActual utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - message composition utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - transferFlags utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * http://chaijs.com
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - isProxyEnabled helper
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addLengthGuard utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getProperties utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - proxify utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addChainingMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteChainableMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - compareByInspect utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getOwnEnumerablePropertySymbols utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getOwnEnumerableProperties utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - isNaN utility
   * Copyright(c) 2012-2015 Sakthipriyan Vairamani <thechargingvolcano@gmail.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*! Bundled license information:
  
  deep-eql/index.js:
    (*!
     * deep-eql
     * Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>
     * MIT Licensed
     *)
    (*!
     * Check to see if the MemoizeMap has recorded a result of the two operands
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {MemoizeMap} memoizeMap
     * @returns {Boolean|null} result
    *)
    (*!
     * Set the result of the equality into the MemoizeMap
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {MemoizeMap} memoizeMap
     * @param {Boolean} result
    *)
    (*!
     * Primary Export
     *)
    (*!
     * The main logic of the `deepEqual` function.
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Object} [options] (optional) Additional options
     * @param {Array} [options.comparator] (optional) Override default algorithm, determining custom equality.
     * @param {Array} [options.memoize] (optional) Provide a custom memoization object which will cache the results of
        complex objects for a speed boost. By passing `false` you can disable memoization, but this will cause circular
        references to blow the stack.
     * @return {Boolean} equal match
    *)
    (*!
     * Compare two Regular Expressions for equality.
     *
     * @param {RegExp} leftHandOperand
     * @param {RegExp} rightHandOperand
     * @return {Boolean} result
     *)
    (*!
     * Compare two Sets/Maps for equality. Faster than other equality functions.
     *
     * @param {Set} leftHandOperand
     * @param {Set} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Simple equality for flat iterable objects such as Arrays, TypedArrays or Node.js buffers.
     *
     * @param {Iterable} leftHandOperand
     * @param {Iterable} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Simple equality for generator objects such as those returned by generator functions.
     *
     * @param {Iterable} leftHandOperand
     * @param {Iterable} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Determine if the given object has an @@iterator function.
     *
     * @param {Object} target
     * @return {Boolean} `true` if the object has an @@iterator function.
     *)
    (*!
     * Gets all iterator entries from the given Object. If the Object has no @@iterator function, returns an empty array.
     * This will consume the iterator - which could have side effects depending on the @@iterator implementation.
     *
     * @param {Object} target
     * @returns {Array} an array of entries from the @@iterator function
     *)
    (*!
     * Gets all entries from a Generator. This will consume the generator - which could have side effects.
     *
     * @param {Generator} target
     * @returns {Array} an array of entries from the Generator.
     *)
    (*!
     * Gets all own and inherited enumerable keys from a target.
     *
     * @param {Object} target
     * @returns {Array} an array of own and inherited enumerable keys from the target.
     *)
    (*!
     * Determines if two objects have matching values, given a set of keys. Defers to deepEqual for the equality check of
     * each key. If any value of the given key is not equal, the function will return false (early).
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Array} keys An array of keys to compare the values of leftHandOperand and rightHandOperand against
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Recursively check the equality of two Objects. Once basic sameness has been established it will defer to `deepEqual`
     * for each enumerable key in the object.
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Returns true if the argument is a primitive.
     *
     * This intentionally returns true for all objects that can be compared by reference,
     * including functions and symbols.
     *
     * @param {Mixed} value
     * @return {Boolean} result
     *)
  *)
*/
