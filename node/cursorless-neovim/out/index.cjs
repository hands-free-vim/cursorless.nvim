"use strict";var P2=Object.create;var Sp=Object.defineProperty;var L2=Object.getOwnPropertyDescriptor;var D2=Object.getOwnPropertyNames;var M2=Object.getPrototypeOf,F2=Object.prototype.hasOwnProperty;var vp=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),w_=(t,e)=>{for(var r in e)Sp(t,r,{get:e[r],enumerable:!0})},E_=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of D2(e))!F2.call(t,i)&&i!==r&&Sp(t,i,{get:()=>e[i],enumerable:!(n=L2(e,i))||n.enumerable});return t};var an=(t,e,r)=>(r=t!=null?P2(M2(t)):{},E_(e||!t||!t.__esModule?Sp(r,"default",{value:t,enumerable:!0}):r,t)),C2=t=>E_(Sp({},"__esModule",{value:!0}),t);var gA=vp((dA,Fm)=>{(function(t,e){typeof Fm=="object"&&Fm.exports?Fm.exports=e():t.nearley=e()})(dA,function(){function t(u,m,d){return this.id=++t.highestId,this.name=u,this.symbols=m,this.postprocess=d,this}t.highestId=0,t.prototype.toString=function(u){var m=typeof u>"u"?this.symbols.map(l).join(" "):this.symbols.slice(0,u).map(l).join(" ")+" \u25CF "+this.symbols.slice(u).map(l).join(" ");return this.name+" \u2192 "+m};function e(u,m,d,g){this.rule=u,this.dot=m,this.reference=d,this.data=[],this.wantedBy=g,this.isComplete=this.dot===u.symbols.length}e.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},e.prototype.nextState=function(u){var m=new e(this.rule,this.dot+1,this.reference,this.wantedBy);return m.left=this,m.right=u,m.isComplete&&(m.data=m.build(),m.right=void 0),m},e.prototype.build=function(){var u=[],m=this;do u.push(m.right.data),m=m.left;while(m.left);return u.reverse(),u},e.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,o.fail))};function r(u,m){this.grammar=u,this.index=m,this.states=[],this.wants={},this.scannable=[],this.completed={}}r.prototype.process=function(u){for(var m=this.states,d=this.wants,g=this.completed,y=0;y<m.length;y++){var x=m[y];if(x.isComplete){if(x.finish(),x.data!==o.fail){for(var E=x.wantedBy,w=E.length;w--;){var H=E[w];this.complete(H,x)}if(x.reference===this.index){var W=x.rule.name;(this.completed[W]=this.completed[W]||[]).push(x)}}}else{var W=x.rule.symbols[x.dot];if(typeof W!="string"){this.scannable.push(x);continue}if(d[W]){if(d[W].push(x),g.hasOwnProperty(W))for(var G=g[W],w=0;w<G.length;w++){var ie=G[w];this.complete(x,ie)}}else d[W]=[x],this.predict(W)}}},r.prototype.predict=function(u){for(var m=this.grammar.byName[u]||[],d=0;d<m.length;d++){var g=m[d],y=this.wants[u],x=new e(g,0,this.index,y);this.states.push(x)}},r.prototype.complete=function(u,m){var d=u.nextState(m);this.states.push(d)};function n(u,m){this.rules=u,this.start=m||this.rules[0].name;var d=this.byName={};this.rules.forEach(function(g){d.hasOwnProperty(g.name)||(d[g.name]=[]),d[g.name].push(g)})}n.fromCompiled=function(g,m){var d=g.Lexer;g.ParserStart&&(m=g.ParserStart,g=g.ParserRules);var g=g.map(function(x){return new t(x.name,x.symbols,x.postprocess)}),y=new n(g,m);return y.lexer=d,y};function i(){this.reset("")}i.prototype.reset=function(u,m){this.buffer=u,this.index=0,this.line=m?m.line:1,this.lastLineBreak=m?-m.col:0},i.prototype.next=function(){if(this.index<this.buffer.length){var u=this.buffer[this.index++];return u===`
`&&(this.line+=1,this.lastLineBreak=this.index),{value:u}}},i.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},i.prototype.formatError=function(u,m){var d=this.buffer;if(typeof d=="string"){var g=d.split(`
`).slice(Math.max(0,this.line-5),this.line),y=d.indexOf(`
`,this.index);y===-1&&(y=d.length);var x=this.index-this.lastLineBreak,E=String(this.line).length;return m+=" at line "+this.line+" col "+x+`:

`,m+=g.map(function(H,W){return w(this.line-g.length+W+1,E)+" "+H},this).join(`
`),m+=`
`+w("",E+x)+`^
`,m}else return m+" at index "+(this.index-1);function w(H,W){var G=String(H);return Array(W-G.length+1).join(" ")+G}};function o(u,m,d){if(u instanceof n)var g=u,d=m;else var g=n.fromCompiled(u,m);this.grammar=g,this.options={keepHistory:!1,lexer:g.lexer||new i};for(var y in d||{})this.options[y]=d[y];this.lexer=this.options.lexer,this.lexerState=void 0;var x=new r(g,0),E=this.table=[x];x.wants[g.start]=[],x.predict(g.start),x.process(),this.current=0}o.fail={},o.prototype.feed=function(u){var m=this.lexer;m.reset(u,this.lexerState);for(var d;;){try{if(d=m.next(),!d)break}catch(be){var E=new r(this.grammar,this.current+1);this.table.push(E);var g=new Error(this.reportLexerError(be));throw g.offset=this.current,g.token=be.token,g}var y=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var x=this.current+1,E=new r(this.grammar,x);this.table.push(E);for(var w=d.text!==void 0?d.text:d.value,H=m.constructor===i?d.value:m.transform?.(d)??d,W=y.scannable,G=W.length;G--;){var ie=W[G],se=ie.rule.symbols[ie.dot];if(se.test?se.test(H):se.type?se.type===d.type:se.literal===w){var ge=ie.nextState({data:H,token:d,isToken:!0,reference:x-1});E.states.push(ge)}}if(E.process(),E.states.length===0){var g=new Error(this.reportError(d));throw g.offset=this.current,g.token=d,g}this.options.keepHistory&&(y.lexerState=m.save()),this.current++}return y&&(this.lexerState=m.save()),this.results=this.finish(),this},o.prototype.reportLexerError=function(u){var m,d,g=u.token;return g?(m="input "+JSON.stringify(g.text[0])+" (lexer error)",d=this.lexer.formatError(g,"Syntax error")):(m="input (lexer error)",d=u.message),this.reportErrorCommon(d,m)},o.prototype.reportError=function(u){var m=(u.type?u.type+" token: ":"")+JSON.stringify(u.value!==void 0?u.value:u),d=this.lexer.formatError(u,"Syntax error");return this.reportErrorCommon(d,m)},o.prototype.reportErrorCommon=function(u,m){var d=[];d.push(u);var g=this.table.length-2,y=this.table[g],x=y.states.filter(function(w){var H=w.rule.symbols[w.dot];return H&&typeof H!="string"});if(x.length===0)d.push("Unexpected "+m+`. I did not expect any more input. Here is the state of my parse table:
`),this.displayStateStack(y.states,d);else{d.push("Unexpected "+m+`. Instead, I was expecting to see one of the following:
`);var E=x.map(function(w){return this.buildFirstStateStack(w,[])||[w]},this);E.forEach(function(w){var H=w[0],W=H.rule.symbols[H.dot],G=this.getSymbolDisplay(W);d.push("A "+G+" based on:"),this.displayStateStack(w,d)},this)}return d.push(""),d.join(`
`)},o.prototype.displayStateStack=function(u,m){for(var d,g=0,y=0;y<u.length;y++){var x=u[y],E=x.rule.toString(x.dot);E===d?g++:(g>0&&m.push("    ^ "+g+" more lines identical to this"),g=0,m.push("    "+E)),d=E}},o.prototype.getSymbolDisplay=function(u){return s(u)},o.prototype.buildFirstStateStack=function(u,m){if(m.indexOf(u)!==-1)return null;if(u.wantedBy.length===0)return[u];var d=u.wantedBy[0],g=[u].concat(m),y=this.buildFirstStateStack(d,g);return y===null?null:[u].concat(y)},o.prototype.save=function(){var u=this.table[this.current];return u.lexerState=this.lexerState,u},o.prototype.restore=function(u){var m=u.index;this.current=m,this.table[m]=u,this.table.splice(m+1),this.lexerState=u.lexerState,this.results=this.finish()},o.prototype.rewind=function(u){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[u])},o.prototype.finish=function(){var u=[],m=this.grammar.start,d=this.table[this.table.length-1];return d.states.forEach(function(g){g.rule.name===m&&g.dot===g.rule.symbols.length&&g.reference===0&&g.data!==o.fail&&u.push(g)}),u.map(function(g){return g.data})};function s(u){var m=typeof u;if(m==="string")return u;if(m==="object"){if(u.literal)return JSON.stringify(u.literal);if(u instanceof RegExp)return"character matching "+u;if(u.type)return u.type+" token";if(u.test)return"token matching "+String(u.test);throw new Error("Unknown symbol type: "+u)}}function l(u){var m=typeof u;if(m==="string")return u;if(m==="object"){if(u.literal)return JSON.stringify(u.literal);if(u instanceof RegExp)return u.toString();if(u.type)return"%"+u.type;if(u.test)return"<"+String(u.test)+">";throw new Error("Unknown symbol type: "+u)}}return{Parser:o,Grammar:n,Rule:t}})});var vA=vp((SA,Om)=>{(function(t,e){typeof define=="function"&&define.amd?define([],e):typeof Om=="object"&&Om.exports?Om.exports=e():t.moo=e()})(SA,function(){"use strict";var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,r=typeof new RegExp().sticky=="boolean";function n(B){return B&&e.call(B)==="[object RegExp]"}function i(B){return B&&typeof B=="object"&&!n(B)&&!Array.isArray(B)}function o(B){return B.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function s(B){var O=new RegExp("|"+B);return O.exec("").length-1}function l(B){return"("+B+")"}function u(B){if(!B.length)return"(?!)";var O=B.map(function(L){return"(?:"+L+")"}).join("|");return"(?:"+O+")"}function m(B){if(typeof B=="string")return"(?:"+o(B)+")";if(n(B)){if(B.ignoreCase)throw new Error("RegExp /i flag not allowed");if(B.global)throw new Error("RegExp /g flag is implied");if(B.sticky)throw new Error("RegExp /y flag is implied");if(B.multiline)throw new Error("RegExp /m flag is implied");return B.source}else throw new Error("Not a pattern: "+B)}function d(B,O){return B.length>O?B:Array(O-B.length+1).join(" ")+B}function g(B,O){for(var L=B.length,q=0;;){var X=B.lastIndexOf(`
`,L-1);if(X===-1||(q++,L=X,q===O)||L===0)break}var C=q<O?0:L+1;return B.substring(C).split(`
`)}function y(B){for(var O=Object.getOwnPropertyNames(B),L=[],q=0;q<O.length;q++){var X=O[q],C=B[X],U=[].concat(C);if(X==="include"){for(var z=0;z<U.length;z++)L.push({include:U[z]});continue}var J=[];U.forEach(function(Y){i(Y)?(J.length&&L.push(E(X,J)),L.push(E(X,Y)),J=[]):J.push(Y)}),J.length&&L.push(E(X,J))}return L}function x(B){for(var O=[],L=0;L<B.length;L++){var q=B[L];if(q.include){for(var X=[].concat(q.include),C=0;C<X.length;C++)O.push({include:X[C]});continue}if(!q.type)throw new Error("Rule has no type: "+JSON.stringify(q));O.push(E(q.type,q))}return O}function E(B,O){if(i(O)||(O={match:O}),O.include)throw new Error("Matching rules cannot also include states");var L={defaultType:B,lineBreaks:!!O.error||!!O.fallback,pop:!1,next:null,push:null,error:!1,fallback:!1,value:null,type:null,shouldThrow:!1};for(var q in O)t.call(O,q)&&(L[q]=O[q]);if(typeof L.type=="string"&&B!==L.type)throw new Error("Type transform cannot be a string (type '"+L.type+"' for token '"+B+"')");var X=L.match;return L.match=Array.isArray(X)?X:X?[X]:[],L.match.sort(function(C,U){return n(C)&&n(U)?0:n(U)?-1:n(C)?1:U.length-C.length}),L}function w(B){return Array.isArray(B)?x(B):y(B)}var H=E("error",{lineBreaks:!0,shouldThrow:!0});function W(B,O){for(var L=null,q=Object.create(null),X=!0,C=null,U=[],z=[],J=0;J<B.length;J++)B[J].fallback&&(X=!1);for(var J=0;J<B.length;J++){var Y=B[J];if(Y.include)throw new Error("Inheritance is not allowed in stateless lexers");if(Y.error||Y.fallback){if(L)throw!Y.fallback==!L.fallback?new Error("Multiple "+(Y.fallback?"fallback":"error")+" rules not allowed (for token '"+Y.defaultType+"')"):new Error("fallback and error are mutually exclusive (for token '"+Y.defaultType+"')");L=Y}var ne=Y.match.slice();if(X)for(;ne.length&&typeof ne[0]=="string"&&ne[0].length===1;){var we=ne.shift();q[we.charCodeAt(0)]=Y}if(Y.pop||Y.push||Y.next){if(!O)throw new Error("State-switching options are not allowed in stateless lexers (for token '"+Y.defaultType+"')");if(Y.fallback)throw new Error("State-switching options are not allowed on fallback tokens (for token '"+Y.defaultType+"')")}if(ne.length!==0){X=!1,U.push(Y);for(var _e=0;_e<ne.length;_e++){var Ye=ne[_e];if(n(Ye)){if(C===null)C=Ye.unicode;else if(C!==Ye.unicode&&Y.fallback===!1)throw new Error("If one rule is /u then all must be")}}var Ue=u(ne.map(m)),yt=new RegExp(Ue);if(yt.test(""))throw new Error("RegExp matches empty string: "+yt);var jt=s(Ue);if(jt>0)throw new Error("RegExp has capture groups: "+yt+`
Use (?: \u2026 ) instead`);if(!Y.lineBreaks&&yt.test(`
`))throw new Error("Rule should declare lineBreaks: "+yt);z.push(l(Ue))}}var Yr=L&&L.fallback,Ao=r&&!Yr?"ym":"gm",mi=r||Yr?"":"|";C===!0&&(Ao+="u");var ka=new RegExp(u(z)+mi,Ao);return{regexp:ka,groups:U,fast:q,error:L||H}}function G(B){var O=W(w(B));return new be({start:O},"start")}function ie(B,O,L){var q=B&&(B.push||B.next);if(q&&!L[q])throw new Error("Missing state '"+q+"' (in token '"+B.defaultType+"' of state '"+O+"')");if(B&&B.pop&&+B.pop!=1)throw new Error("pop must be 1 (in token '"+B.defaultType+"' of state '"+O+"')")}function se(B,O){var L=B.$all?w(B.$all):[];delete B.$all;var q=Object.getOwnPropertyNames(B);O||(O=q[0]);for(var X=Object.create(null),C=0;C<q.length;C++){var U=q[C];X[U]=w(B[U]).concat(L)}for(var C=0;C<q.length;C++)for(var U=q[C],z=X[U],J=Object.create(null),Y=0;Y<z.length;Y++){var ne=z[Y];if(ne.include){var we=[Y,1];if(ne.include!==U&&!J[ne.include]){J[ne.include]=!0;var _e=X[ne.include];if(!_e)throw new Error("Cannot include nonexistent state '"+ne.include+"' (in state '"+U+"')");for(var Ye=0;Ye<_e.length;Ye++){var Ue=_e[Ye];z.indexOf(Ue)===-1&&we.push(Ue)}}z.splice.apply(z,we),Y--}}for(var yt=Object.create(null),C=0;C<q.length;C++){var U=q[C];yt[U]=W(X[U],!0)}for(var C=0;C<q.length;C++){for(var jt=q[C],Yr=yt[jt],Ao=Yr.groups,Y=0;Y<Ao.length;Y++)ie(Ao[Y],jt,yt);for(var mi=Object.getOwnPropertyNames(Yr.fast),Y=0;Y<mi.length;Y++)ie(Yr.fast[mi[Y]],jt,yt)}return new be(yt,O)}function ge(B){for(var O=typeof Map<"u",L=O?new Map:Object.create(null),q=Object.getOwnPropertyNames(B),X=0;X<q.length;X++){var C=q[X],U=B[C],z=Array.isArray(U)?U:[U];z.forEach(function(J){if(typeof J!="string")throw new Error("keyword must be string (in keyword '"+C+"')");O?L.set(J,C):L[J]=C})}return function(J){return O?L.get(J):L[J]}}var be=function(B,O){this.startState=O,this.states=B,this.buffer="",this.stack=[],this.reset()};be.prototype.reset=function(B,O){return this.buffer=B||"",this.index=0,this.line=O?O.line:1,this.col=O?O.col:1,this.queuedToken=O?O.queuedToken:null,this.queuedText=O?O.queuedText:"",this.queuedThrow=O?O.queuedThrow:null,this.setState(O?O.state:this.startState),this.stack=O&&O.stack?O.stack.slice():[],this},be.prototype.save=function(){return{line:this.line,col:this.col,state:this.state,stack:this.stack.slice(),queuedToken:this.queuedToken,queuedText:this.queuedText,queuedThrow:this.queuedThrow}},be.prototype.setState=function(B){if(!(!B||this.state===B)){this.state=B;var O=this.states[B];this.groups=O.groups,this.error=O.error,this.re=O.regexp,this.fast=O.fast}},be.prototype.popState=function(){this.setState(this.stack.pop())},be.prototype.pushState=function(B){this.stack.push(this.state),this.setState(B)};var kt=r?function(B,O){return B.exec(O)}:function(B,O){var L=B.exec(O);return L[0].length===0?null:L};be.prototype._getGroup=function(B){for(var O=this.groups.length,L=0;L<O;L++)if(B[L+1]!==void 0)return this.groups[L];throw new Error("Cannot find token type for matched text")};function Tr(){return this.value}if(be.prototype.next=function(){var B=this.index;if(this.queuedGroup){var O=this._token(this.queuedGroup,this.queuedText,B);return this.queuedGroup=null,this.queuedText="",O}var L=this.buffer;if(B!==L.length){var U=this.fast[L.charCodeAt(B)];if(U)return this._token(U,L.charAt(B),B);var q=this.re;q.lastIndex=B;var X=kt(q,L),C=this.error;if(X==null)return this._token(C,L.slice(B,L.length),B);var U=this._getGroup(X),z=X[0];return C.fallback&&X.index!==B?(this.queuedGroup=U,this.queuedText=z,this._token(C,L.slice(B,X.index),B)):this._token(U,z,B)}},be.prototype._token=function(B,O,L){var q=0;if(B.lineBreaks){var X=/\n/g,C=1;if(O===`
`)q=1;else for(;X.exec(O);)q++,C=X.lastIndex}var U={type:typeof B.type=="function"&&B.type(O)||B.defaultType,value:typeof B.value=="function"?B.value(O):O,text:O,toString:Tr,offset:L,lineBreaks:q,line:this.line,col:this.col},z=O.length;if(this.index+=z,this.line+=q,q!==0?this.col=z-C+1:this.col+=z,B.shouldThrow){var J=new Error(this.formatError(U,"invalid syntax"));throw J}return B.pop?this.popState():B.push?this.pushState(B.push):B.next&&this.setState(B.next),U},typeof Symbol<"u"&&Symbol.iterator){var xr=function(B){this.lexer=B};xr.prototype.next=function(){var B=this.lexer.next();return{value:B,done:!B}},xr.prototype[Symbol.iterator]=function(){return this},be.prototype[Symbol.iterator]=function(){return new xr(this)}}return be.prototype.formatError=function(B,O){if(B==null)var L=this.buffer.slice(this.index),B={text:L,offset:this.index,lineBreaks:L.indexOf(`
`)===-1?0:1,line:this.line,col:this.col};var q=2,X=Math.max(B.line-q,1),C=B.line+q,U=String(C).length,z=g(this.buffer,this.line-B.line+q+1).slice(0,5),J=[];J.push(O+" at line "+B.line+" col "+B.col+":"),J.push("");for(var Y=0;Y<z.length;Y++){var ne=z[Y],we=X+Y;J.push(d(String(we),U)+"  "+ne),we===B.line&&J.push(d("",U+B.col+1)+"^")}return J.join(`
`)},be.prototype.clone=function(){return new be(this.states,this.state)},be.prototype.has=function(B){return!0},{compile:G,states:se,error:Object.freeze({error:!0}),fallback:Object.freeze({fallback:!0}),keywords:ge}})});var xl=vp((Xn,hP)=>{"use strict";Object.defineProperty(Xn,"__esModule",{value:!0});function Mn(t){return typeof t=="object"&&!("toString"in t)?Object.prototype.toString.call(t).slice(8,-1):t}var y4=typeof process=="object"&&process.env.NODE_ENV==="production";function fn(t,e){if(!t)throw y4?new Error("Invariant failed"):new Error(e())}Xn.invariant=fn;var sS=Object.prototype.hasOwnProperty,T4=Array.prototype.splice,x4=Object.prototype.toString;function na(t){return x4.call(t).slice(8,-1)}var mf=Object.assign||function(t,e){return cS(e).forEach(function(r){sS.call(e,r)&&(t[r]=e[r])}),t},cS=typeof Object.getOwnPropertySymbols=="function"?function(t){return Object.keys(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.keys(t)};function po(t){return Array.isArray(t)?mf(t.constructor(t.length),t):na(t)==="Map"?new Map(t):na(t)==="Set"?new Set(t):t&&typeof t=="object"?mf(Object.create(Object.getPrototypeOf(t)),t):t}var dP=function(){function t(){this.commands=mf({},S4),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(e,r){return e===r},this.update.newContext=function(){return new t().update}}return Object.defineProperty(t.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(e){this.update.isEquals=e},enumerable:!0,configurable:!0}),t.prototype.extend=function(e,r){this.commands[e]=r},t.prototype.update=function(e,r){var n=this,i=typeof r=="function"?{$apply:r}:r;Array.isArray(e)&&Array.isArray(i)||fn(!Array.isArray(i),function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."}),fn(typeof i=="object"&&i!==null,function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the "+("following commands: "+Object.keys(n.commands).join(", ")+".")});var o=e;return cS(i).forEach(function(s){if(sS.call(n.commands,s)){var l=e===o;o=n.commands[s](i[s],o,i,e),l&&n.isEquals(o,e)&&(o=e)}else{var u=na(e)==="Map"?n.update(e.get(s),i[s]):n.update(e[s],i[s]),m=na(o)==="Map"?o.get(s):o[s];(!n.isEquals(u,m)||typeof u>"u"&&!sS.call(e,s))&&(o===e&&(o=po(e)),na(o)==="Map"?o.set(s,u):o[s]=u)}}),o},t}();Xn.Context=dP;var S4={$push:function(t,e,r){return mP(e,r,"$push"),t.length?e.concat(t):e},$unshift:function(t,e,r){return mP(e,r,"$unshift"),t.length?t.concat(e):e},$splice:function(t,e,r,n){return v4(e,r),t.forEach(function(i){gP(i),e===n&&i.length&&(e=po(n)),T4.apply(e,i)}),e},$set:function(t,e,r){return w4(r),t},$toggle:function(t,e){Tl(t,"$toggle");var r=t.length?po(e):e;return t.forEach(function(n){r[n]=!e[n]}),r},$unset:function(t,e,r,n){return Tl(t,"$unset"),t.forEach(function(i){Object.hasOwnProperty.call(e,i)&&(e===n&&(e=po(n)),delete e[i])}),e},$add:function(t,e,r,n){return fP(e,"$add"),Tl(t,"$add"),na(e)==="Map"?t.forEach(function(i){var o=i[0],s=i[1];e===n&&e.get(o)!==s&&(e=po(n)),e.set(o,s)}):t.forEach(function(i){e===n&&!e.has(i)&&(e=po(n)),e.add(i)}),e},$remove:function(t,e,r,n){return fP(e,"$remove"),Tl(t,"$remove"),t.forEach(function(i){e===n&&e.has(i)&&(e=po(n)),e.delete(i)}),e},$merge:function(t,e,r,n){return E4(e,t),cS(t).forEach(function(i){t[i]!==e[i]&&(e===n&&(e=po(n)),e[i]=t[i])}),e},$apply:function(t,e){return b4(t),t(e)}},lS=new dP;Xn.isEquals=lS.update.isEquals;Xn.extend=lS.extend;Xn.default=lS.update;Xn.default.default=hP.exports=mf(Xn.default,Xn);function mP(t,e,r){fn(Array.isArray(t),function(){return"update(): expected target of "+Mn(r)+" to be an array; got "+Mn(t)+"."}),Tl(e[r],r)}function Tl(t,e){fn(Array.isArray(t),function(){return"update(): expected spec of "+Mn(e)+" to be an array; got "+Mn(t)+". Did you forget to wrap your parameter in an array?"})}function v4(t,e){fn(Array.isArray(t),function(){return"Expected $splice target to be an array; got "+Mn(t)}),gP(e.$splice)}function gP(t){fn(Array.isArray(t),function(){return"update(): expected spec of $splice to be an array of arrays; got "+Mn(t)+". Did you forget to wrap your parameters in an array?"})}function b4(t){fn(typeof t=="function",function(){return"update(): expected spec of $apply to be a function; got "+Mn(t)+"."})}function w4(t){fn(Object.keys(t).length===1,function(){return"Cannot have more than one key in an object with $set"})}function E4(t,e){fn(e&&typeof e=="object",function(){return"update(): $merge expects a spec of type 'object'; got "+Mn(e)}),fn(t&&typeof t=="object",function(){return"update(): $merge expects a target of type 'object'; got "+Mn(t)})}function fP(t,e){var r=na(t);fn(r==="Map"||r==="Set",function(){return"update(): "+Mn(e)+" expects a target of type Set or Map; got "+Mn(r)})}});var bv=vp((oc,ru)=>{(function(){var t,e="4.17.21",r=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",i="Expected a function",o="Invalid `variable` option passed into `_.template`",s="__lodash_hash_undefined__",l=500,u="__lodash_placeholder__",m=1,d=2,g=4,y=1,x=2,E=1,w=2,H=4,W=8,G=16,ie=32,se=64,ge=128,be=256,kt=512,Tr=30,xr="...",B=800,O=16,L=1,q=2,X=3,C=1/0,U=9007199254740991,z=17976931348623157e292,J=NaN,Y=4294967295,ne=Y-1,we=Y>>>1,_e=[["ary",ge],["bind",E],["bindKey",w],["curry",W],["curryRight",G],["flip",kt],["partial",ie],["partialRight",se],["rearg",be]],Ye="[object Arguments]",Ue="[object Array]",yt="[object AsyncFunction]",jt="[object Boolean]",Yr="[object Date]",Ao="[object DOMException]",mi="[object Error]",ka="[object Function]",qb="[object GeneratorFunction]",bn="[object Map]",vc="[object Number]",qF="[object Null]",fi="[object Object]",Gb="[object Promise]",GF="[object Proxy]",bc="[object RegExp]",wn="[object Set]",wc="[object String]",Du="[object Symbol]",KF="[object Undefined]",Ec="[object WeakMap]",QF="[object WeakSet]",_c="[object ArrayBuffer]",Aa="[object DataView]",fy="[object Float32Array]",dy="[object Float64Array]",gy="[object Int8Array]",hy="[object Int16Array]",yy="[object Int32Array]",Ty="[object Uint8Array]",xy="[object Uint8ClampedArray]",Sy="[object Uint16Array]",vy="[object Uint32Array]",YF=/\b__p \+= '';/g,ZF=/\b(__p \+=) '' \+/g,XF=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Kb=/&(?:amp|lt|gt|quot|#39);/g,Qb=/[&<>"']/g,JF=RegExp(Kb.source),eC=RegExp(Qb.source),tC=/<%-([\s\S]+?)%>/g,rC=/<%([\s\S]+?)%>/g,Yb=/<%=([\s\S]+?)%>/g,nC=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,iC=/^\w*$/,oC=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,by=/[\\^$.*+?()[\]{}|]/g,aC=RegExp(by.source),wy=/^\s+/,sC=/\s/,cC=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,lC=/\{\n\/\* \[wrapped with (.+)\] \*/,uC=/,? & /,pC=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,mC=/[()=,{}\[\]\/\s]/,fC=/\\(\\)?/g,dC=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Zb=/\w*$/,gC=/^[-+]0x[0-9a-f]+$/i,hC=/^0b[01]+$/i,yC=/^\[object .+?Constructor\]$/,TC=/^0o[0-7]+$/i,xC=/^(?:0|[1-9]\d*)$/,SC=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Mu=/($^)/,vC=/['\n\r\u2028\u2029\\]/g,Fu="\\ud800-\\udfff",bC="\\u0300-\\u036f",wC="\\ufe20-\\ufe2f",EC="\\u20d0-\\u20ff",Xb=bC+wC+EC,Jb="\\u2700-\\u27bf",ew="a-z\\xdf-\\xf6\\xf8-\\xff",_C="\\xac\\xb1\\xd7\\xf7",RC="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",kC="\\u2000-\\u206f",AC=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",tw="A-Z\\xc0-\\xd6\\xd8-\\xde",rw="\\ufe0e\\ufe0f",nw=_C+RC+kC+AC,Ey="['\u2019]",PC="["+Fu+"]",iw="["+nw+"]",Cu="["+Xb+"]",ow="\\d+",LC="["+Jb+"]",aw="["+ew+"]",sw="[^"+Fu+nw+ow+Jb+ew+tw+"]",_y="\\ud83c[\\udffb-\\udfff]",DC="(?:"+Cu+"|"+_y+")",cw="[^"+Fu+"]",Ry="(?:\\ud83c[\\udde6-\\uddff]){2}",ky="[\\ud800-\\udbff][\\udc00-\\udfff]",Pa="["+tw+"]",lw="\\u200d",uw="(?:"+aw+"|"+sw+")",MC="(?:"+Pa+"|"+sw+")",pw="(?:"+Ey+"(?:d|ll|m|re|s|t|ve))?",mw="(?:"+Ey+"(?:D|LL|M|RE|S|T|VE))?",fw=DC+"?",dw="["+rw+"]?",FC="(?:"+lw+"(?:"+[cw,Ry,ky].join("|")+")"+dw+fw+")*",CC="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",IC="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",gw=dw+fw+FC,OC="(?:"+[LC,Ry,ky].join("|")+")"+gw,NC="(?:"+[cw+Cu+"?",Cu,Ry,ky,PC].join("|")+")",UC=RegExp(Ey,"g"),HC=RegExp(Cu,"g"),Ay=RegExp(_y+"(?="+_y+")|"+NC+gw,"g"),BC=RegExp([Pa+"?"+aw+"+"+pw+"(?="+[iw,Pa,"$"].join("|")+")",MC+"+"+mw+"(?="+[iw,Pa+uw,"$"].join("|")+")",Pa+"?"+uw+"+"+pw,Pa+"+"+mw,IC,CC,ow,OC].join("|"),"g"),VC=RegExp("["+lw+Fu+Xb+rw+"]"),WC=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,$C=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],jC=-1,ot={};ot[fy]=ot[dy]=ot[gy]=ot[hy]=ot[yy]=ot[Ty]=ot[xy]=ot[Sy]=ot[vy]=!0,ot[Ye]=ot[Ue]=ot[_c]=ot[jt]=ot[Aa]=ot[Yr]=ot[mi]=ot[ka]=ot[bn]=ot[vc]=ot[fi]=ot[bc]=ot[wn]=ot[wc]=ot[Ec]=!1;var it={};it[Ye]=it[Ue]=it[_c]=it[Aa]=it[jt]=it[Yr]=it[fy]=it[dy]=it[gy]=it[hy]=it[yy]=it[bn]=it[vc]=it[fi]=it[bc]=it[wn]=it[wc]=it[Du]=it[Ty]=it[xy]=it[Sy]=it[vy]=!0,it[mi]=it[ka]=it[Ec]=!1;var zC={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},qC={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},GC={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},KC={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},QC=parseFloat,YC=parseInt,hw=typeof global=="object"&&global&&global.Object===Object&&global,ZC=typeof self=="object"&&self&&self.Object===Object&&self,Ot=hw||ZC||Function("return this")(),Py=typeof oc=="object"&&oc&&!oc.nodeType&&oc,Po=Py&&typeof ru=="object"&&ru&&!ru.nodeType&&ru,yw=Po&&Po.exports===Py,Ly=yw&&hw.process,Zr=function(){try{var D=Po&&Po.require&&Po.require("util").types;return D||Ly&&Ly.binding&&Ly.binding("util")}catch{}}(),Tw=Zr&&Zr.isArrayBuffer,xw=Zr&&Zr.isDate,Sw=Zr&&Zr.isMap,vw=Zr&&Zr.isRegExp,bw=Zr&&Zr.isSet,ww=Zr&&Zr.isTypedArray;function Fr(D,j,V){switch(V.length){case 0:return D.call(j);case 1:return D.call(j,V[0]);case 2:return D.call(j,V[0],V[1]);case 3:return D.call(j,V[0],V[1],V[2])}return D.apply(j,V)}function XC(D,j,V,ue){for(var ke=-1,Ze=D==null?0:D.length;++ke<Ze;){var Dt=D[ke];j(ue,Dt,V(Dt),D)}return ue}function Xr(D,j){for(var V=-1,ue=D==null?0:D.length;++V<ue&&j(D[V],V,D)!==!1;);return D}function JC(D,j){for(var V=D==null?0:D.length;V--&&j(D[V],V,D)!==!1;);return D}function Ew(D,j){for(var V=-1,ue=D==null?0:D.length;++V<ue;)if(!j(D[V],V,D))return!1;return!0}function Ni(D,j){for(var V=-1,ue=D==null?0:D.length,ke=0,Ze=[];++V<ue;){var Dt=D[V];j(Dt,V,D)&&(Ze[ke++]=Dt)}return Ze}function Iu(D,j){var V=D==null?0:D.length;return!!V&&La(D,j,0)>-1}function Dy(D,j,V){for(var ue=-1,ke=D==null?0:D.length;++ue<ke;)if(V(j,D[ue]))return!0;return!1}function lt(D,j){for(var V=-1,ue=D==null?0:D.length,ke=Array(ue);++V<ue;)ke[V]=j(D[V],V,D);return ke}function Ui(D,j){for(var V=-1,ue=j.length,ke=D.length;++V<ue;)D[ke+V]=j[V];return D}function My(D,j,V,ue){var ke=-1,Ze=D==null?0:D.length;for(ue&&Ze&&(V=D[++ke]);++ke<Ze;)V=j(V,D[ke],ke,D);return V}function eI(D,j,V,ue){var ke=D==null?0:D.length;for(ue&&ke&&(V=D[--ke]);ke--;)V=j(V,D[ke],ke,D);return V}function Fy(D,j){for(var V=-1,ue=D==null?0:D.length;++V<ue;)if(j(D[V],V,D))return!0;return!1}var tI=Cy("length");function rI(D){return D.split("")}function nI(D){return D.match(pC)||[]}function _w(D,j,V){var ue;return V(D,function(ke,Ze,Dt){if(j(ke,Ze,Dt))return ue=Ze,!1}),ue}function Ou(D,j,V,ue){for(var ke=D.length,Ze=V+(ue?1:-1);ue?Ze--:++Ze<ke;)if(j(D[Ze],Ze,D))return Ze;return-1}function La(D,j,V){return j===j?gI(D,j,V):Ou(D,Rw,V)}function iI(D,j,V,ue){for(var ke=V-1,Ze=D.length;++ke<Ze;)if(ue(D[ke],j))return ke;return-1}function Rw(D){return D!==D}function kw(D,j){var V=D==null?0:D.length;return V?Oy(D,j)/V:J}function Cy(D){return function(j){return j==null?t:j[D]}}function Iy(D){return function(j){return D==null?t:D[j]}}function Aw(D,j,V,ue,ke){return ke(D,function(Ze,Dt,nt){V=ue?(ue=!1,Ze):j(V,Ze,Dt,nt)}),V}function oI(D,j){var V=D.length;for(D.sort(j);V--;)D[V]=D[V].value;return D}function Oy(D,j){for(var V,ue=-1,ke=D.length;++ue<ke;){var Ze=j(D[ue]);Ze!==t&&(V=V===t?Ze:V+Ze)}return V}function Ny(D,j){for(var V=-1,ue=Array(D);++V<D;)ue[V]=j(V);return ue}function aI(D,j){return lt(j,function(V){return[V,D[V]]})}function Pw(D){return D&&D.slice(0,Fw(D)+1).replace(wy,"")}function Cr(D){return function(j){return D(j)}}function Uy(D,j){return lt(j,function(V){return D[V]})}function Rc(D,j){return D.has(j)}function Lw(D,j){for(var V=-1,ue=D.length;++V<ue&&La(j,D[V],0)>-1;);return V}function Dw(D,j){for(var V=D.length;V--&&La(j,D[V],0)>-1;);return V}function sI(D,j){for(var V=D.length,ue=0;V--;)D[V]===j&&++ue;return ue}var cI=Iy(zC),lI=Iy(qC);function uI(D){return"\\"+KC[D]}function pI(D,j){return D==null?t:D[j]}function Da(D){return VC.test(D)}function mI(D){return WC.test(D)}function fI(D){for(var j,V=[];!(j=D.next()).done;)V.push(j.value);return V}function Hy(D){var j=-1,V=Array(D.size);return D.forEach(function(ue,ke){V[++j]=[ke,ue]}),V}function Mw(D,j){return function(V){return D(j(V))}}function Hi(D,j){for(var V=-1,ue=D.length,ke=0,Ze=[];++V<ue;){var Dt=D[V];(Dt===j||Dt===u)&&(D[V]=u,Ze[ke++]=V)}return Ze}function Nu(D){var j=-1,V=Array(D.size);return D.forEach(function(ue){V[++j]=ue}),V}function dI(D){var j=-1,V=Array(D.size);return D.forEach(function(ue){V[++j]=[ue,ue]}),V}function gI(D,j,V){for(var ue=V-1,ke=D.length;++ue<ke;)if(D[ue]===j)return ue;return-1}function hI(D,j,V){for(var ue=V+1;ue--;)if(D[ue]===j)return ue;return ue}function Ma(D){return Da(D)?TI(D):tI(D)}function En(D){return Da(D)?xI(D):rI(D)}function Fw(D){for(var j=D.length;j--&&sC.test(D.charAt(j)););return j}var yI=Iy(GC);function TI(D){for(var j=Ay.lastIndex=0;Ay.test(D);)++j;return j}function xI(D){return D.match(Ay)||[]}function SI(D){return D.match(BC)||[]}var vI=function D(j){j=j==null?Ot:Bi.defaults(Ot.Object(),j,Bi.pick(Ot,$C));var V=j.Array,ue=j.Date,ke=j.Error,Ze=j.Function,Dt=j.Math,nt=j.Object,By=j.RegExp,bI=j.String,Jr=j.TypeError,Uu=V.prototype,wI=Ze.prototype,Fa=nt.prototype,Hu=j["__core-js_shared__"],Bu=wI.toString,et=Fa.hasOwnProperty,EI=0,Cw=function(){var a=/[^.]+$/.exec(Hu&&Hu.keys&&Hu.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),Vu=Fa.toString,_I=Bu.call(nt),RI=Ot._,kI=By("^"+Bu.call(et).replace(by,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Wu=yw?j.Buffer:t,Vi=j.Symbol,$u=j.Uint8Array,Iw=Wu?Wu.allocUnsafe:t,ju=Mw(nt.getPrototypeOf,nt),Ow=nt.create,Nw=Fa.propertyIsEnumerable,zu=Uu.splice,Uw=Vi?Vi.isConcatSpreadable:t,kc=Vi?Vi.iterator:t,Lo=Vi?Vi.toStringTag:t,qu=function(){try{var a=Io(nt,"defineProperty");return a({},"",{}),a}catch{}}(),AI=j.clearTimeout!==Ot.clearTimeout&&j.clearTimeout,PI=ue&&ue.now!==Ot.Date.now&&ue.now,LI=j.setTimeout!==Ot.setTimeout&&j.setTimeout,Gu=Dt.ceil,Ku=Dt.floor,Vy=nt.getOwnPropertySymbols,DI=Wu?Wu.isBuffer:t,Hw=j.isFinite,MI=Uu.join,FI=Mw(nt.keys,nt),Mt=Dt.max,Jt=Dt.min,CI=ue.now,II=j.parseInt,Bw=Dt.random,OI=Uu.reverse,Wy=Io(j,"DataView"),Ac=Io(j,"Map"),$y=Io(j,"Promise"),Ca=Io(j,"Set"),Pc=Io(j,"WeakMap"),Lc=Io(nt,"create"),Qu=Pc&&new Pc,Ia={},NI=Oo(Wy),UI=Oo(Ac),HI=Oo($y),BI=Oo(Ca),VI=Oo(Pc),Yu=Vi?Vi.prototype:t,Dc=Yu?Yu.valueOf:t,Vw=Yu?Yu.toString:t;function T(a){if(Tt(a)&&!Ae(a)&&!(a instanceof je)){if(a instanceof en)return a;if(et.call(a,"__wrapped__"))return WE(a)}return new en(a)}var Oa=function(){function a(){}return function(c){if(!dt(c))return{};if(Ow)return Ow(c);a.prototype=c;var p=new a;return a.prototype=t,p}}();function Zu(){}function en(a,c){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=t}T.templateSettings={escape:tC,evaluate:rC,interpolate:Yb,variable:"",imports:{_:T}},T.prototype=Zu.prototype,T.prototype.constructor=T,en.prototype=Oa(Zu.prototype),en.prototype.constructor=en;function je(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Y,this.__views__=[]}function WI(){var a=new je(this.__wrapped__);return a.__actions__=Sr(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=Sr(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=Sr(this.__views__),a}function $I(){if(this.__filtered__){var a=new je(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a}function jI(){var a=this.__wrapped__.value(),c=this.__dir__,p=Ae(a),f=c<0,h=p?a.length:0,S=rO(0,h,this.__views__),_=S.start,A=S.end,F=A-_,K=f?A:_-1,Q=this.__iteratees__,te=Q.length,ae=0,de=Jt(F,this.__takeCount__);if(!p||!f&&h==F&&de==F)return pE(a,this.__actions__);var Se=[];e:for(;F--&&ae<de;){K+=c;for(var Fe=-1,ve=a[K];++Fe<te;){var He=Q[Fe],ze=He.iteratee,Nr=He.type,lr=ze(ve);if(Nr==q)ve=lr;else if(!lr){if(Nr==L)continue e;break e}}Se[ae++]=ve}return Se}je.prototype=Oa(Zu.prototype),je.prototype.constructor=je;function Do(a){var c=-1,p=a==null?0:a.length;for(this.clear();++c<p;){var f=a[c];this.set(f[0],f[1])}}function zI(){this.__data__=Lc?Lc(null):{},this.size=0}function qI(a){var c=this.has(a)&&delete this.__data__[a];return this.size-=c?1:0,c}function GI(a){var c=this.__data__;if(Lc){var p=c[a];return p===s?t:p}return et.call(c,a)?c[a]:t}function KI(a){var c=this.__data__;return Lc?c[a]!==t:et.call(c,a)}function QI(a,c){var p=this.__data__;return this.size+=this.has(a)?0:1,p[a]=Lc&&c===t?s:c,this}Do.prototype.clear=zI,Do.prototype.delete=qI,Do.prototype.get=GI,Do.prototype.has=KI,Do.prototype.set=QI;function di(a){var c=-1,p=a==null?0:a.length;for(this.clear();++c<p;){var f=a[c];this.set(f[0],f[1])}}function YI(){this.__data__=[],this.size=0}function ZI(a){var c=this.__data__,p=Xu(c,a);if(p<0)return!1;var f=c.length-1;return p==f?c.pop():zu.call(c,p,1),--this.size,!0}function XI(a){var c=this.__data__,p=Xu(c,a);return p<0?t:c[p][1]}function JI(a){return Xu(this.__data__,a)>-1}function e1(a,c){var p=this.__data__,f=Xu(p,a);return f<0?(++this.size,p.push([a,c])):p[f][1]=c,this}di.prototype.clear=YI,di.prototype.delete=ZI,di.prototype.get=XI,di.prototype.has=JI,di.prototype.set=e1;function gi(a){var c=-1,p=a==null?0:a.length;for(this.clear();++c<p;){var f=a[c];this.set(f[0],f[1])}}function t1(){this.size=0,this.__data__={hash:new Do,map:new(Ac||di),string:new Do}}function r1(a){var c=up(this,a).delete(a);return this.size-=c?1:0,c}function n1(a){return up(this,a).get(a)}function i1(a){return up(this,a).has(a)}function o1(a,c){var p=up(this,a),f=p.size;return p.set(a,c),this.size+=p.size==f?0:1,this}gi.prototype.clear=t1,gi.prototype.delete=r1,gi.prototype.get=n1,gi.prototype.has=i1,gi.prototype.set=o1;function Mo(a){var c=-1,p=a==null?0:a.length;for(this.__data__=new gi;++c<p;)this.add(a[c])}function a1(a){return this.__data__.set(a,s),this}function s1(a){return this.__data__.has(a)}Mo.prototype.add=Mo.prototype.push=a1,Mo.prototype.has=s1;function _n(a){var c=this.__data__=new di(a);this.size=c.size}function c1(){this.__data__=new di,this.size=0}function l1(a){var c=this.__data__,p=c.delete(a);return this.size=c.size,p}function u1(a){return this.__data__.get(a)}function p1(a){return this.__data__.has(a)}function m1(a,c){var p=this.__data__;if(p instanceof di){var f=p.__data__;if(!Ac||f.length<r-1)return f.push([a,c]),this.size=++p.size,this;p=this.__data__=new gi(f)}return p.set(a,c),this.size=p.size,this}_n.prototype.clear=c1,_n.prototype.delete=l1,_n.prototype.get=u1,_n.prototype.has=p1,_n.prototype.set=m1;function Ww(a,c){var p=Ae(a),f=!p&&No(a),h=!p&&!f&&qi(a),S=!p&&!f&&!h&&Ba(a),_=p||f||h||S,A=_?Ny(a.length,bI):[],F=A.length;for(var K in a)(c||et.call(a,K))&&!(_&&(K=="length"||h&&(K=="offset"||K=="parent")||S&&(K=="buffer"||K=="byteLength"||K=="byteOffset")||xi(K,F)))&&A.push(K);return A}function $w(a){var c=a.length;return c?a[eT(0,c-1)]:t}function f1(a,c){return pp(Sr(a),Fo(c,0,a.length))}function d1(a){return pp(Sr(a))}function jy(a,c,p){(p!==t&&!Rn(a[c],p)||p===t&&!(c in a))&&hi(a,c,p)}function Mc(a,c,p){var f=a[c];(!(et.call(a,c)&&Rn(f,p))||p===t&&!(c in a))&&hi(a,c,p)}function Xu(a,c){for(var p=a.length;p--;)if(Rn(a[p][0],c))return p;return-1}function g1(a,c,p,f){return Wi(a,function(h,S,_){c(f,h,p(h),_)}),f}function jw(a,c){return a&&Wn(c,Nt(c),a)}function h1(a,c){return a&&Wn(c,br(c),a)}function hi(a,c,p){c=="__proto__"&&qu?qu(a,c,{configurable:!0,enumerable:!0,value:p,writable:!0}):a[c]=p}function zy(a,c){for(var p=-1,f=c.length,h=V(f),S=a==null;++p<f;)h[p]=S?t:_T(a,c[p]);return h}function Fo(a,c,p){return a===a&&(p!==t&&(a=a<=p?a:p),c!==t&&(a=a>=c?a:c)),a}function tn(a,c,p,f,h,S){var _,A=c&m,F=c&d,K=c&g;if(p&&(_=h?p(a,f,h,S):p(a)),_!==t)return _;if(!dt(a))return a;var Q=Ae(a);if(Q){if(_=iO(a),!A)return Sr(a,_)}else{var te=er(a),ae=te==ka||te==qb;if(qi(a))return dE(a,A);if(te==fi||te==Ye||ae&&!h){if(_=F||ae?{}:FE(a),!A)return F?G1(a,h1(_,a)):q1(a,jw(_,a))}else{if(!it[te])return h?a:{};_=oO(a,te,A)}}S||(S=new _n);var de=S.get(a);if(de)return de;S.set(a,_),c_(a)?a.forEach(function(ve){_.add(tn(ve,c,p,ve,a,S))}):a_(a)&&a.forEach(function(ve,He){_.set(He,tn(ve,c,p,He,a,S))});var Se=K?F?pT:uT:F?br:Nt,Fe=Q?t:Se(a);return Xr(Fe||a,function(ve,He){Fe&&(He=ve,ve=a[He]),Mc(_,He,tn(ve,c,p,He,a,S))}),_}function y1(a){var c=Nt(a);return function(p){return zw(p,a,c)}}function zw(a,c,p){var f=p.length;if(a==null)return!f;for(a=nt(a);f--;){var h=p[f],S=c[h],_=a[h];if(_===t&&!(h in a)||!S(_))return!1}return!0}function qw(a,c,p){if(typeof a!="function")throw new Jr(i);return Hc(function(){a.apply(t,p)},c)}function Fc(a,c,p,f){var h=-1,S=Iu,_=!0,A=a.length,F=[],K=c.length;if(!A)return F;p&&(c=lt(c,Cr(p))),f?(S=Dy,_=!1):c.length>=r&&(S=Rc,_=!1,c=new Mo(c));e:for(;++h<A;){var Q=a[h],te=p==null?Q:p(Q);if(Q=f||Q!==0?Q:0,_&&te===te){for(var ae=K;ae--;)if(c[ae]===te)continue e;F.push(Q)}else S(c,te,f)||F.push(Q)}return F}var Wi=xE(Vn),Gw=xE(Gy,!0);function T1(a,c){var p=!0;return Wi(a,function(f,h,S){return p=!!c(f,h,S),p}),p}function Ju(a,c,p){for(var f=-1,h=a.length;++f<h;){var S=a[f],_=c(S);if(_!=null&&(A===t?_===_&&!Or(_):p(_,A)))var A=_,F=S}return F}function x1(a,c,p,f){var h=a.length;for(p=De(p),p<0&&(p=-p>h?0:h+p),f=f===t||f>h?h:De(f),f<0&&(f+=h),f=p>f?0:u_(f);p<f;)a[p++]=c;return a}function Kw(a,c){var p=[];return Wi(a,function(f,h,S){c(f,h,S)&&p.push(f)}),p}function zt(a,c,p,f,h){var S=-1,_=a.length;for(p||(p=sO),h||(h=[]);++S<_;){var A=a[S];c>0&&p(A)?c>1?zt(A,c-1,p,f,h):Ui(h,A):f||(h[h.length]=A)}return h}var qy=SE(),Qw=SE(!0);function Vn(a,c){return a&&qy(a,c,Nt)}function Gy(a,c){return a&&Qw(a,c,Nt)}function ep(a,c){return Ni(c,function(p){return Si(a[p])})}function Co(a,c){c=ji(c,a);for(var p=0,f=c.length;a!=null&&p<f;)a=a[$n(c[p++])];return p&&p==f?a:t}function Yw(a,c,p){var f=c(a);return Ae(a)?f:Ui(f,p(a))}function sr(a){return a==null?a===t?KF:qF:Lo&&Lo in nt(a)?tO(a):dO(a)}function Ky(a,c){return a>c}function S1(a,c){return a!=null&&et.call(a,c)}function v1(a,c){return a!=null&&c in nt(a)}function b1(a,c,p){return a>=Jt(c,p)&&a<Mt(c,p)}function Qy(a,c,p){for(var f=p?Dy:Iu,h=a[0].length,S=a.length,_=S,A=V(S),F=1/0,K=[];_--;){var Q=a[_];_&&c&&(Q=lt(Q,Cr(c))),F=Jt(Q.length,F),A[_]=!p&&(c||h>=120&&Q.length>=120)?new Mo(_&&Q):t}Q=a[0];var te=-1,ae=A[0];e:for(;++te<h&&K.length<F;){var de=Q[te],Se=c?c(de):de;if(de=p||de!==0?de:0,!(ae?Rc(ae,Se):f(K,Se,p))){for(_=S;--_;){var Fe=A[_];if(!(Fe?Rc(Fe,Se):f(a[_],Se,p)))continue e}ae&&ae.push(Se),K.push(de)}}return K}function w1(a,c,p,f){return Vn(a,function(h,S,_){c(f,p(h),S,_)}),f}function Cc(a,c,p){c=ji(c,a),a=NE(a,c);var f=a==null?a:a[$n(nn(c))];return f==null?t:Fr(f,a,p)}function Zw(a){return Tt(a)&&sr(a)==Ye}function E1(a){return Tt(a)&&sr(a)==_c}function _1(a){return Tt(a)&&sr(a)==Yr}function Ic(a,c,p,f,h){return a===c?!0:a==null||c==null||!Tt(a)&&!Tt(c)?a!==a&&c!==c:R1(a,c,p,f,Ic,h)}function R1(a,c,p,f,h,S){var _=Ae(a),A=Ae(c),F=_?Ue:er(a),K=A?Ue:er(c);F=F==Ye?fi:F,K=K==Ye?fi:K;var Q=F==fi,te=K==fi,ae=F==K;if(ae&&qi(a)){if(!qi(c))return!1;_=!0,Q=!1}if(ae&&!Q)return S||(S=new _n),_||Ba(a)?LE(a,c,p,f,h,S):J1(a,c,F,p,f,h,S);if(!(p&y)){var de=Q&&et.call(a,"__wrapped__"),Se=te&&et.call(c,"__wrapped__");if(de||Se){var Fe=de?a.value():a,ve=Se?c.value():c;return S||(S=new _n),h(Fe,ve,p,f,S)}}return ae?(S||(S=new _n),eO(a,c,p,f,h,S)):!1}function k1(a){return Tt(a)&&er(a)==bn}function Yy(a,c,p,f){var h=p.length,S=h,_=!f;if(a==null)return!S;for(a=nt(a);h--;){var A=p[h];if(_&&A[2]?A[1]!==a[A[0]]:!(A[0]in a))return!1}for(;++h<S;){A=p[h];var F=A[0],K=a[F],Q=A[1];if(_&&A[2]){if(K===t&&!(F in a))return!1}else{var te=new _n;if(f)var ae=f(K,Q,F,a,c,te);if(!(ae===t?Ic(Q,K,y|x,f,te):ae))return!1}}return!0}function Xw(a){if(!dt(a)||lO(a))return!1;var c=Si(a)?kI:yC;return c.test(Oo(a))}function A1(a){return Tt(a)&&sr(a)==bc}function P1(a){return Tt(a)&&er(a)==wn}function L1(a){return Tt(a)&&yp(a.length)&&!!ot[sr(a)]}function Jw(a){return typeof a=="function"?a:a==null?wr:typeof a=="object"?Ae(a)?rE(a[0],a[1]):tE(a):v_(a)}function Zy(a){if(!Uc(a))return FI(a);var c=[];for(var p in nt(a))et.call(a,p)&&p!="constructor"&&c.push(p);return c}function D1(a){if(!dt(a))return fO(a);var c=Uc(a),p=[];for(var f in a)f=="constructor"&&(c||!et.call(a,f))||p.push(f);return p}function Xy(a,c){return a<c}function eE(a,c){var p=-1,f=vr(a)?V(a.length):[];return Wi(a,function(h,S,_){f[++p]=c(h,S,_)}),f}function tE(a){var c=fT(a);return c.length==1&&c[0][2]?IE(c[0][0],c[0][1]):function(p){return p===a||Yy(p,a,c)}}function rE(a,c){return gT(a)&&CE(c)?IE($n(a),c):function(p){var f=_T(p,a);return f===t&&f===c?RT(p,a):Ic(c,f,y|x)}}function tp(a,c,p,f,h){a!==c&&qy(c,function(S,_){if(h||(h=new _n),dt(S))M1(a,c,_,p,tp,f,h);else{var A=f?f(yT(a,_),S,_+"",a,c,h):t;A===t&&(A=S),jy(a,_,A)}},br)}function M1(a,c,p,f,h,S,_){var A=yT(a,p),F=yT(c,p),K=_.get(F);if(K){jy(a,p,K);return}var Q=S?S(A,F,p+"",a,c,_):t,te=Q===t;if(te){var ae=Ae(F),de=!ae&&qi(F),Se=!ae&&!de&&Ba(F);Q=F,ae||de||Se?Ae(A)?Q=A:vt(A)?Q=Sr(A):de?(te=!1,Q=dE(F,!0)):Se?(te=!1,Q=gE(F,!0)):Q=[]:Bc(F)||No(F)?(Q=A,No(A)?Q=p_(A):(!dt(A)||Si(A))&&(Q=FE(F))):te=!1}te&&(_.set(F,Q),h(Q,F,f,S,_),_.delete(F)),jy(a,p,Q)}function nE(a,c){var p=a.length;if(p)return c+=c<0?p:0,xi(c,p)?a[c]:t}function iE(a,c,p){c.length?c=lt(c,function(S){return Ae(S)?function(_){return Co(_,S.length===1?S[0]:S)}:S}):c=[wr];var f=-1;c=lt(c,Cr(Te()));var h=eE(a,function(S,_,A){var F=lt(c,function(K){return K(S)});return{criteria:F,index:++f,value:S}});return oI(h,function(S,_){return z1(S,_,p)})}function F1(a,c){return oE(a,c,function(p,f){return RT(a,f)})}function oE(a,c,p){for(var f=-1,h=c.length,S={};++f<h;){var _=c[f],A=Co(a,_);p(A,_)&&Oc(S,ji(_,a),A)}return S}function C1(a){return function(c){return Co(c,a)}}function Jy(a,c,p,f){var h=f?iI:La,S=-1,_=c.length,A=a;for(a===c&&(c=Sr(c)),p&&(A=lt(a,Cr(p)));++S<_;)for(var F=0,K=c[S],Q=p?p(K):K;(F=h(A,Q,F,f))>-1;)A!==a&&zu.call(A,F,1),zu.call(a,F,1);return a}function aE(a,c){for(var p=a?c.length:0,f=p-1;p--;){var h=c[p];if(p==f||h!==S){var S=h;xi(h)?zu.call(a,h,1):nT(a,h)}}return a}function eT(a,c){return a+Ku(Bw()*(c-a+1))}function I1(a,c,p,f){for(var h=-1,S=Mt(Gu((c-a)/(p||1)),0),_=V(S);S--;)_[f?S:++h]=a,a+=p;return _}function tT(a,c){var p="";if(!a||c<1||c>U)return p;do c%2&&(p+=a),c=Ku(c/2),c&&(a+=a);while(c);return p}function Ie(a,c){return TT(OE(a,c,wr),a+"")}function O1(a){return $w(Va(a))}function N1(a,c){var p=Va(a);return pp(p,Fo(c,0,p.length))}function Oc(a,c,p,f){if(!dt(a))return a;c=ji(c,a);for(var h=-1,S=c.length,_=S-1,A=a;A!=null&&++h<S;){var F=$n(c[h]),K=p;if(F==="__proto__"||F==="constructor"||F==="prototype")return a;if(h!=_){var Q=A[F];K=f?f(Q,F,A):t,K===t&&(K=dt(Q)?Q:xi(c[h+1])?[]:{})}Mc(A,F,K),A=A[F]}return a}var sE=Qu?function(a,c){return Qu.set(a,c),a}:wr,U1=qu?function(a,c){return qu(a,"toString",{configurable:!0,enumerable:!1,value:AT(c),writable:!0})}:wr;function H1(a){return pp(Va(a))}function rn(a,c,p){var f=-1,h=a.length;c<0&&(c=-c>h?0:h+c),p=p>h?h:p,p<0&&(p+=h),h=c>p?0:p-c>>>0,c>>>=0;for(var S=V(h);++f<h;)S[f]=a[f+c];return S}function B1(a,c){var p;return Wi(a,function(f,h,S){return p=c(f,h,S),!p}),!!p}function rp(a,c,p){var f=0,h=a==null?f:a.length;if(typeof c=="number"&&c===c&&h<=we){for(;f<h;){var S=f+h>>>1,_=a[S];_!==null&&!Or(_)&&(p?_<=c:_<c)?f=S+1:h=S}return h}return rT(a,c,wr,p)}function rT(a,c,p,f){var h=0,S=a==null?0:a.length;if(S===0)return 0;c=p(c);for(var _=c!==c,A=c===null,F=Or(c),K=c===t;h<S;){var Q=Ku((h+S)/2),te=p(a[Q]),ae=te!==t,de=te===null,Se=te===te,Fe=Or(te);if(_)var ve=f||Se;else K?ve=Se&&(f||ae):A?ve=Se&&ae&&(f||!de):F?ve=Se&&ae&&!de&&(f||!Fe):de||Fe?ve=!1:ve=f?te<=c:te<c;ve?h=Q+1:S=Q}return Jt(S,ne)}function cE(a,c){for(var p=-1,f=a.length,h=0,S=[];++p<f;){var _=a[p],A=c?c(_):_;if(!p||!Rn(A,F)){var F=A;S[h++]=_===0?0:_}}return S}function lE(a){return typeof a=="number"?a:Or(a)?J:+a}function Ir(a){if(typeof a=="string")return a;if(Ae(a))return lt(a,Ir)+"";if(Or(a))return Vw?Vw.call(a):"";var c=a+"";return c=="0"&&1/a==-C?"-0":c}function $i(a,c,p){var f=-1,h=Iu,S=a.length,_=!0,A=[],F=A;if(p)_=!1,h=Dy;else if(S>=r){var K=c?null:Z1(a);if(K)return Nu(K);_=!1,h=Rc,F=new Mo}else F=c?[]:A;e:for(;++f<S;){var Q=a[f],te=c?c(Q):Q;if(Q=p||Q!==0?Q:0,_&&te===te){for(var ae=F.length;ae--;)if(F[ae]===te)continue e;c&&F.push(te),A.push(Q)}else h(F,te,p)||(F!==A&&F.push(te),A.push(Q))}return A}function nT(a,c){return c=ji(c,a),a=NE(a,c),a==null||delete a[$n(nn(c))]}function uE(a,c,p,f){return Oc(a,c,p(Co(a,c)),f)}function np(a,c,p,f){for(var h=a.length,S=f?h:-1;(f?S--:++S<h)&&c(a[S],S,a););return p?rn(a,f?0:S,f?S+1:h):rn(a,f?S+1:0,f?h:S)}function pE(a,c){var p=a;return p instanceof je&&(p=p.value()),My(c,function(f,h){return h.func.apply(h.thisArg,Ui([f],h.args))},p)}function iT(a,c,p){var f=a.length;if(f<2)return f?$i(a[0]):[];for(var h=-1,S=V(f);++h<f;)for(var _=a[h],A=-1;++A<f;)A!=h&&(S[h]=Fc(S[h]||_,a[A],c,p));return $i(zt(S,1),c,p)}function mE(a,c,p){for(var f=-1,h=a.length,S=c.length,_={};++f<h;){var A=f<S?c[f]:t;p(_,a[f],A)}return _}function oT(a){return vt(a)?a:[]}function aT(a){return typeof a=="function"?a:wr}function ji(a,c){return Ae(a)?a:gT(a,c)?[a]:VE(Je(a))}var V1=Ie;function zi(a,c,p){var f=a.length;return p=p===t?f:p,!c&&p>=f?a:rn(a,c,p)}var fE=AI||function(a){return Ot.clearTimeout(a)};function dE(a,c){if(c)return a.slice();var p=a.length,f=Iw?Iw(p):new a.constructor(p);return a.copy(f),f}function sT(a){var c=new a.constructor(a.byteLength);return new $u(c).set(new $u(a)),c}function W1(a,c){var p=c?sT(a.buffer):a.buffer;return new a.constructor(p,a.byteOffset,a.byteLength)}function $1(a){var c=new a.constructor(a.source,Zb.exec(a));return c.lastIndex=a.lastIndex,c}function j1(a){return Dc?nt(Dc.call(a)):{}}function gE(a,c){var p=c?sT(a.buffer):a.buffer;return new a.constructor(p,a.byteOffset,a.length)}function hE(a,c){if(a!==c){var p=a!==t,f=a===null,h=a===a,S=Or(a),_=c!==t,A=c===null,F=c===c,K=Or(c);if(!A&&!K&&!S&&a>c||S&&_&&F&&!A&&!K||f&&_&&F||!p&&F||!h)return 1;if(!f&&!S&&!K&&a<c||K&&p&&h&&!f&&!S||A&&p&&h||!_&&h||!F)return-1}return 0}function z1(a,c,p){for(var f=-1,h=a.criteria,S=c.criteria,_=h.length,A=p.length;++f<_;){var F=hE(h[f],S[f]);if(F){if(f>=A)return F;var K=p[f];return F*(K=="desc"?-1:1)}}return a.index-c.index}function yE(a,c,p,f){for(var h=-1,S=a.length,_=p.length,A=-1,F=c.length,K=Mt(S-_,0),Q=V(F+K),te=!f;++A<F;)Q[A]=c[A];for(;++h<_;)(te||h<S)&&(Q[p[h]]=a[h]);for(;K--;)Q[A++]=a[h++];return Q}function TE(a,c,p,f){for(var h=-1,S=a.length,_=-1,A=p.length,F=-1,K=c.length,Q=Mt(S-A,0),te=V(Q+K),ae=!f;++h<Q;)te[h]=a[h];for(var de=h;++F<K;)te[de+F]=c[F];for(;++_<A;)(ae||h<S)&&(te[de+p[_]]=a[h++]);return te}function Sr(a,c){var p=-1,f=a.length;for(c||(c=V(f));++p<f;)c[p]=a[p];return c}function Wn(a,c,p,f){var h=!p;p||(p={});for(var S=-1,_=c.length;++S<_;){var A=c[S],F=f?f(p[A],a[A],A,p,a):t;F===t&&(F=a[A]),h?hi(p,A,F):Mc(p,A,F)}return p}function q1(a,c){return Wn(a,dT(a),c)}function G1(a,c){return Wn(a,DE(a),c)}function ip(a,c){return function(p,f){var h=Ae(p)?XC:g1,S=c?c():{};return h(p,a,Te(f,2),S)}}function Na(a){return Ie(function(c,p){var f=-1,h=p.length,S=h>1?p[h-1]:t,_=h>2?p[2]:t;for(S=a.length>3&&typeof S=="function"?(h--,S):t,_&&cr(p[0],p[1],_)&&(S=h<3?t:S,h=1),c=nt(c);++f<h;){var A=p[f];A&&a(c,A,f,S)}return c})}function xE(a,c){return function(p,f){if(p==null)return p;if(!vr(p))return a(p,f);for(var h=p.length,S=c?h:-1,_=nt(p);(c?S--:++S<h)&&f(_[S],S,_)!==!1;);return p}}function SE(a){return function(c,p,f){for(var h=-1,S=nt(c),_=f(c),A=_.length;A--;){var F=_[a?A:++h];if(p(S[F],F,S)===!1)break}return c}}function K1(a,c,p){var f=c&E,h=Nc(a);function S(){var _=this&&this!==Ot&&this instanceof S?h:a;return _.apply(f?p:this,arguments)}return S}function vE(a){return function(c){c=Je(c);var p=Da(c)?En(c):t,f=p?p[0]:c.charAt(0),h=p?zi(p,1).join(""):c.slice(1);return f[a]()+h}}function Ua(a){return function(c){return My(x_(T_(c).replace(UC,"")),a,"")}}function Nc(a){return function(){var c=arguments;switch(c.length){case 0:return new a;case 1:return new a(c[0]);case 2:return new a(c[0],c[1]);case 3:return new a(c[0],c[1],c[2]);case 4:return new a(c[0],c[1],c[2],c[3]);case 5:return new a(c[0],c[1],c[2],c[3],c[4]);case 6:return new a(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new a(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var p=Oa(a.prototype),f=a.apply(p,c);return dt(f)?f:p}}function Q1(a,c,p){var f=Nc(a);function h(){for(var S=arguments.length,_=V(S),A=S,F=Ha(h);A--;)_[A]=arguments[A];var K=S<3&&_[0]!==F&&_[S-1]!==F?[]:Hi(_,F);if(S-=K.length,S<p)return RE(a,c,op,h.placeholder,t,_,K,t,t,p-S);var Q=this&&this!==Ot&&this instanceof h?f:a;return Fr(Q,this,_)}return h}function bE(a){return function(c,p,f){var h=nt(c);if(!vr(c)){var S=Te(p,3);c=Nt(c),p=function(A){return S(h[A],A,h)}}var _=a(c,p,f);return _>-1?h[S?c[_]:_]:t}}function wE(a){return Ti(function(c){var p=c.length,f=p,h=en.prototype.thru;for(a&&c.reverse();f--;){var S=c[f];if(typeof S!="function")throw new Jr(i);if(h&&!_&&lp(S)=="wrapper")var _=new en([],!0)}for(f=_?f:p;++f<p;){S=c[f];var A=lp(S),F=A=="wrapper"?mT(S):t;F&&hT(F[0])&&F[1]==(ge|W|ie|be)&&!F[4].length&&F[9]==1?_=_[lp(F[0])].apply(_,F[3]):_=S.length==1&&hT(S)?_[A]():_.thru(S)}return function(){var K=arguments,Q=K[0];if(_&&K.length==1&&Ae(Q))return _.plant(Q).value();for(var te=0,ae=p?c[te].apply(this,K):Q;++te<p;)ae=c[te].call(this,ae);return ae}})}function op(a,c,p,f,h,S,_,A,F,K){var Q=c&ge,te=c&E,ae=c&w,de=c&(W|G),Se=c&kt,Fe=ae?t:Nc(a);function ve(){for(var He=arguments.length,ze=V(He),Nr=He;Nr--;)ze[Nr]=arguments[Nr];if(de)var lr=Ha(ve),Ur=sI(ze,lr);if(f&&(ze=yE(ze,f,h,de)),S&&(ze=TE(ze,S,_,de)),He-=Ur,de&&He<K){var bt=Hi(ze,lr);return RE(a,c,op,ve.placeholder,p,ze,bt,A,F,K-He)}var kn=te?p:this,bi=ae?kn[a]:a;return He=ze.length,A?ze=gO(ze,A):Se&&He>1&&ze.reverse(),Q&&F<He&&(ze.length=F),this&&this!==Ot&&this instanceof ve&&(bi=Fe||Nc(bi)),bi.apply(kn,ze)}return ve}function EE(a,c){return function(p,f){return w1(p,a,c(f),{})}}function ap(a,c){return function(p,f){var h;if(p===t&&f===t)return c;if(p!==t&&(h=p),f!==t){if(h===t)return f;typeof p=="string"||typeof f=="string"?(p=Ir(p),f=Ir(f)):(p=lE(p),f=lE(f)),h=a(p,f)}return h}}function cT(a){return Ti(function(c){return c=lt(c,Cr(Te())),Ie(function(p){var f=this;return a(c,function(h){return Fr(h,f,p)})})})}function sp(a,c){c=c===t?" ":Ir(c);var p=c.length;if(p<2)return p?tT(c,a):c;var f=tT(c,Gu(a/Ma(c)));return Da(c)?zi(En(f),0,a).join(""):f.slice(0,a)}function Y1(a,c,p,f){var h=c&E,S=Nc(a);function _(){for(var A=-1,F=arguments.length,K=-1,Q=f.length,te=V(Q+F),ae=this&&this!==Ot&&this instanceof _?S:a;++K<Q;)te[K]=f[K];for(;F--;)te[K++]=arguments[++A];return Fr(ae,h?p:this,te)}return _}function _E(a){return function(c,p,f){return f&&typeof f!="number"&&cr(c,p,f)&&(p=f=t),c=vi(c),p===t?(p=c,c=0):p=vi(p),f=f===t?c<p?1:-1:vi(f),I1(c,p,f,a)}}function cp(a){return function(c,p){return typeof c=="string"&&typeof p=="string"||(c=on(c),p=on(p)),a(c,p)}}function RE(a,c,p,f,h,S,_,A,F,K){var Q=c&W,te=Q?_:t,ae=Q?t:_,de=Q?S:t,Se=Q?t:S;c|=Q?ie:se,c&=~(Q?se:ie),c&H||(c&=~(E|w));var Fe=[a,c,h,de,te,Se,ae,A,F,K],ve=p.apply(t,Fe);return hT(a)&&UE(ve,Fe),ve.placeholder=f,HE(ve,a,c)}function lT(a){var c=Dt[a];return function(p,f){if(p=on(p),f=f==null?0:Jt(De(f),292),f&&Hw(p)){var h=(Je(p)+"e").split("e"),S=c(h[0]+"e"+(+h[1]+f));return h=(Je(S)+"e").split("e"),+(h[0]+"e"+(+h[1]-f))}return c(p)}}var Z1=Ca&&1/Nu(new Ca([,-0]))[1]==C?function(a){return new Ca(a)}:DT;function kE(a){return function(c){var p=er(c);return p==bn?Hy(c):p==wn?dI(c):aI(c,a(c))}}function yi(a,c,p,f,h,S,_,A){var F=c&w;if(!F&&typeof a!="function")throw new Jr(i);var K=f?f.length:0;if(K||(c&=~(ie|se),f=h=t),_=_===t?_:Mt(De(_),0),A=A===t?A:De(A),K-=h?h.length:0,c&se){var Q=f,te=h;f=h=t}var ae=F?t:mT(a),de=[a,c,p,f,h,Q,te,S,_,A];if(ae&&mO(de,ae),a=de[0],c=de[1],p=de[2],f=de[3],h=de[4],A=de[9]=de[9]===t?F?0:a.length:Mt(de[9]-K,0),!A&&c&(W|G)&&(c&=~(W|G)),!c||c==E)var Se=K1(a,c,p);else c==W||c==G?Se=Q1(a,c,A):(c==ie||c==(E|ie))&&!h.length?Se=Y1(a,c,p,f):Se=op.apply(t,de);var Fe=ae?sE:UE;return HE(Fe(Se,de),a,c)}function AE(a,c,p,f){return a===t||Rn(a,Fa[p])&&!et.call(f,p)?c:a}function PE(a,c,p,f,h,S){return dt(a)&&dt(c)&&(S.set(c,a),tp(a,c,t,PE,S),S.delete(c)),a}function X1(a){return Bc(a)?t:a}function LE(a,c,p,f,h,S){var _=p&y,A=a.length,F=c.length;if(A!=F&&!(_&&F>A))return!1;var K=S.get(a),Q=S.get(c);if(K&&Q)return K==c&&Q==a;var te=-1,ae=!0,de=p&x?new Mo:t;for(S.set(a,c),S.set(c,a);++te<A;){var Se=a[te],Fe=c[te];if(f)var ve=_?f(Fe,Se,te,c,a,S):f(Se,Fe,te,a,c,S);if(ve!==t){if(ve)continue;ae=!1;break}if(de){if(!Fy(c,function(He,ze){if(!Rc(de,ze)&&(Se===He||h(Se,He,p,f,S)))return de.push(ze)})){ae=!1;break}}else if(!(Se===Fe||h(Se,Fe,p,f,S))){ae=!1;break}}return S.delete(a),S.delete(c),ae}function J1(a,c,p,f,h,S,_){switch(p){case Aa:if(a.byteLength!=c.byteLength||a.byteOffset!=c.byteOffset)return!1;a=a.buffer,c=c.buffer;case _c:return!(a.byteLength!=c.byteLength||!S(new $u(a),new $u(c)));case jt:case Yr:case vc:return Rn(+a,+c);case mi:return a.name==c.name&&a.message==c.message;case bc:case wc:return a==c+"";case bn:var A=Hy;case wn:var F=f&y;if(A||(A=Nu),a.size!=c.size&&!F)return!1;var K=_.get(a);if(K)return K==c;f|=x,_.set(a,c);var Q=LE(A(a),A(c),f,h,S,_);return _.delete(a),Q;case Du:if(Dc)return Dc.call(a)==Dc.call(c)}return!1}function eO(a,c,p,f,h,S){var _=p&y,A=uT(a),F=A.length,K=uT(c),Q=K.length;if(F!=Q&&!_)return!1;for(var te=F;te--;){var ae=A[te];if(!(_?ae in c:et.call(c,ae)))return!1}var de=S.get(a),Se=S.get(c);if(de&&Se)return de==c&&Se==a;var Fe=!0;S.set(a,c),S.set(c,a);for(var ve=_;++te<F;){ae=A[te];var He=a[ae],ze=c[ae];if(f)var Nr=_?f(ze,He,ae,c,a,S):f(He,ze,ae,a,c,S);if(!(Nr===t?He===ze||h(He,ze,p,f,S):Nr)){Fe=!1;break}ve||(ve=ae=="constructor")}if(Fe&&!ve){var lr=a.constructor,Ur=c.constructor;lr!=Ur&&"constructor"in a&&"constructor"in c&&!(typeof lr=="function"&&lr instanceof lr&&typeof Ur=="function"&&Ur instanceof Ur)&&(Fe=!1)}return S.delete(a),S.delete(c),Fe}function Ti(a){return TT(OE(a,t,zE),a+"")}function uT(a){return Yw(a,Nt,dT)}function pT(a){return Yw(a,br,DE)}var mT=Qu?function(a){return Qu.get(a)}:DT;function lp(a){for(var c=a.name+"",p=Ia[c],f=et.call(Ia,c)?p.length:0;f--;){var h=p[f],S=h.func;if(S==null||S==a)return h.name}return c}function Ha(a){var c=et.call(T,"placeholder")?T:a;return c.placeholder}function Te(){var a=T.iteratee||PT;return a=a===PT?Jw:a,arguments.length?a(arguments[0],arguments[1]):a}function up(a,c){var p=a.__data__;return cO(c)?p[typeof c=="string"?"string":"hash"]:p.map}function fT(a){for(var c=Nt(a),p=c.length;p--;){var f=c[p],h=a[f];c[p]=[f,h,CE(h)]}return c}function Io(a,c){var p=pI(a,c);return Xw(p)?p:t}function tO(a){var c=et.call(a,Lo),p=a[Lo];try{a[Lo]=t;var f=!0}catch{}var h=Vu.call(a);return f&&(c?a[Lo]=p:delete a[Lo]),h}var dT=Vy?function(a){return a==null?[]:(a=nt(a),Ni(Vy(a),function(c){return Nw.call(a,c)}))}:MT,DE=Vy?function(a){for(var c=[];a;)Ui(c,dT(a)),a=ju(a);return c}:MT,er=sr;(Wy&&er(new Wy(new ArrayBuffer(1)))!=Aa||Ac&&er(new Ac)!=bn||$y&&er($y.resolve())!=Gb||Ca&&er(new Ca)!=wn||Pc&&er(new Pc)!=Ec)&&(er=function(a){var c=sr(a),p=c==fi?a.constructor:t,f=p?Oo(p):"";if(f)switch(f){case NI:return Aa;case UI:return bn;case HI:return Gb;case BI:return wn;case VI:return Ec}return c});function rO(a,c,p){for(var f=-1,h=p.length;++f<h;){var S=p[f],_=S.size;switch(S.type){case"drop":a+=_;break;case"dropRight":c-=_;break;case"take":c=Jt(c,a+_);break;case"takeRight":a=Mt(a,c-_);break}}return{start:a,end:c}}function nO(a){var c=a.match(lC);return c?c[1].split(uC):[]}function ME(a,c,p){c=ji(c,a);for(var f=-1,h=c.length,S=!1;++f<h;){var _=$n(c[f]);if(!(S=a!=null&&p(a,_)))break;a=a[_]}return S||++f!=h?S:(h=a==null?0:a.length,!!h&&yp(h)&&xi(_,h)&&(Ae(a)||No(a)))}function iO(a){var c=a.length,p=new a.constructor(c);return c&&typeof a[0]=="string"&&et.call(a,"index")&&(p.index=a.index,p.input=a.input),p}function FE(a){return typeof a.constructor=="function"&&!Uc(a)?Oa(ju(a)):{}}function oO(a,c,p){var f=a.constructor;switch(c){case _c:return sT(a);case jt:case Yr:return new f(+a);case Aa:return W1(a,p);case fy:case dy:case gy:case hy:case yy:case Ty:case xy:case Sy:case vy:return gE(a,p);case bn:return new f;case vc:case wc:return new f(a);case bc:return $1(a);case wn:return new f;case Du:return j1(a)}}function aO(a,c){var p=c.length;if(!p)return a;var f=p-1;return c[f]=(p>1?"& ":"")+c[f],c=c.join(p>2?", ":" "),a.replace(cC,`{
/* [wrapped with `+c+`] */
`)}function sO(a){return Ae(a)||No(a)||!!(Uw&&a&&a[Uw])}function xi(a,c){var p=typeof a;return c=c??U,!!c&&(p=="number"||p!="symbol"&&xC.test(a))&&a>-1&&a%1==0&&a<c}function cr(a,c,p){if(!dt(p))return!1;var f=typeof c;return(f=="number"?vr(p)&&xi(c,p.length):f=="string"&&c in p)?Rn(p[c],a):!1}function gT(a,c){if(Ae(a))return!1;var p=typeof a;return p=="number"||p=="symbol"||p=="boolean"||a==null||Or(a)?!0:iC.test(a)||!nC.test(a)||c!=null&&a in nt(c)}function cO(a){var c=typeof a;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?a!=="__proto__":a===null}function hT(a){var c=lp(a),p=T[c];if(typeof p!="function"||!(c in je.prototype))return!1;if(a===p)return!0;var f=mT(p);return!!f&&a===f[0]}function lO(a){return!!Cw&&Cw in a}var uO=Hu?Si:FT;function Uc(a){var c=a&&a.constructor,p=typeof c=="function"&&c.prototype||Fa;return a===p}function CE(a){return a===a&&!dt(a)}function IE(a,c){return function(p){return p==null?!1:p[a]===c&&(c!==t||a in nt(p))}}function pO(a){var c=gp(a,function(f){return p.size===l&&p.clear(),f}),p=c.cache;return c}function mO(a,c){var p=a[1],f=c[1],h=p|f,S=h<(E|w|ge),_=f==ge&&p==W||f==ge&&p==be&&a[7].length<=c[8]||f==(ge|be)&&c[7].length<=c[8]&&p==W;if(!(S||_))return a;f&E&&(a[2]=c[2],h|=p&E?0:H);var A=c[3];if(A){var F=a[3];a[3]=F?yE(F,A,c[4]):A,a[4]=F?Hi(a[3],u):c[4]}return A=c[5],A&&(F=a[5],a[5]=F?TE(F,A,c[6]):A,a[6]=F?Hi(a[5],u):c[6]),A=c[7],A&&(a[7]=A),f&ge&&(a[8]=a[8]==null?c[8]:Jt(a[8],c[8])),a[9]==null&&(a[9]=c[9]),a[0]=c[0],a[1]=h,a}function fO(a){var c=[];if(a!=null)for(var p in nt(a))c.push(p);return c}function dO(a){return Vu.call(a)}function OE(a,c,p){return c=Mt(c===t?a.length-1:c,0),function(){for(var f=arguments,h=-1,S=Mt(f.length-c,0),_=V(S);++h<S;)_[h]=f[c+h];h=-1;for(var A=V(c+1);++h<c;)A[h]=f[h];return A[c]=p(_),Fr(a,this,A)}}function NE(a,c){return c.length<2?a:Co(a,rn(c,0,-1))}function gO(a,c){for(var p=a.length,f=Jt(c.length,p),h=Sr(a);f--;){var S=c[f];a[f]=xi(S,p)?h[S]:t}return a}function yT(a,c){if(!(c==="constructor"&&typeof a[c]=="function")&&c!="__proto__")return a[c]}var UE=BE(sE),Hc=LI||function(a,c){return Ot.setTimeout(a,c)},TT=BE(U1);function HE(a,c,p){var f=c+"";return TT(a,aO(f,hO(nO(f),p)))}function BE(a){var c=0,p=0;return function(){var f=CI(),h=O-(f-p);if(p=f,h>0){if(++c>=B)return arguments[0]}else c=0;return a.apply(t,arguments)}}function pp(a,c){var p=-1,f=a.length,h=f-1;for(c=c===t?f:c;++p<c;){var S=eT(p,h),_=a[S];a[S]=a[p],a[p]=_}return a.length=c,a}var VE=pO(function(a){var c=[];return a.charCodeAt(0)===46&&c.push(""),a.replace(oC,function(p,f,h,S){c.push(h?S.replace(fC,"$1"):f||p)}),c});function $n(a){if(typeof a=="string"||Or(a))return a;var c=a+"";return c=="0"&&1/a==-C?"-0":c}function Oo(a){if(a!=null){try{return Bu.call(a)}catch{}try{return a+""}catch{}}return""}function hO(a,c){return Xr(_e,function(p){var f="_."+p[0];c&p[1]&&!Iu(a,f)&&a.push(f)}),a.sort()}function WE(a){if(a instanceof je)return a.clone();var c=new en(a.__wrapped__,a.__chain__);return c.__actions__=Sr(a.__actions__),c.__index__=a.__index__,c.__values__=a.__values__,c}function yO(a,c,p){(p?cr(a,c,p):c===t)?c=1:c=Mt(De(c),0);var f=a==null?0:a.length;if(!f||c<1)return[];for(var h=0,S=0,_=V(Gu(f/c));h<f;)_[S++]=rn(a,h,h+=c);return _}function TO(a){for(var c=-1,p=a==null?0:a.length,f=0,h=[];++c<p;){var S=a[c];S&&(h[f++]=S)}return h}function xO(){var a=arguments.length;if(!a)return[];for(var c=V(a-1),p=arguments[0],f=a;f--;)c[f-1]=arguments[f];return Ui(Ae(p)?Sr(p):[p],zt(c,1))}var SO=Ie(function(a,c){return vt(a)?Fc(a,zt(c,1,vt,!0)):[]}),vO=Ie(function(a,c){var p=nn(c);return vt(p)&&(p=t),vt(a)?Fc(a,zt(c,1,vt,!0),Te(p,2)):[]}),bO=Ie(function(a,c){var p=nn(c);return vt(p)&&(p=t),vt(a)?Fc(a,zt(c,1,vt,!0),t,p):[]});function wO(a,c,p){var f=a==null?0:a.length;return f?(c=p||c===t?1:De(c),rn(a,c<0?0:c,f)):[]}function EO(a,c,p){var f=a==null?0:a.length;return f?(c=p||c===t?1:De(c),c=f-c,rn(a,0,c<0?0:c)):[]}function _O(a,c){return a&&a.length?np(a,Te(c,3),!0,!0):[]}function RO(a,c){return a&&a.length?np(a,Te(c,3),!0):[]}function kO(a,c,p,f){var h=a==null?0:a.length;return h?(p&&typeof p!="number"&&cr(a,c,p)&&(p=0,f=h),x1(a,c,p,f)):[]}function $E(a,c,p){var f=a==null?0:a.length;if(!f)return-1;var h=p==null?0:De(p);return h<0&&(h=Mt(f+h,0)),Ou(a,Te(c,3),h)}function jE(a,c,p){var f=a==null?0:a.length;if(!f)return-1;var h=f-1;return p!==t&&(h=De(p),h=p<0?Mt(f+h,0):Jt(h,f-1)),Ou(a,Te(c,3),h,!0)}function zE(a){var c=a==null?0:a.length;return c?zt(a,1):[]}function AO(a){var c=a==null?0:a.length;return c?zt(a,C):[]}function PO(a,c){var p=a==null?0:a.length;return p?(c=c===t?1:De(c),zt(a,c)):[]}function LO(a){for(var c=-1,p=a==null?0:a.length,f={};++c<p;){var h=a[c];f[h[0]]=h[1]}return f}function qE(a){return a&&a.length?a[0]:t}function DO(a,c,p){var f=a==null?0:a.length;if(!f)return-1;var h=p==null?0:De(p);return h<0&&(h=Mt(f+h,0)),La(a,c,h)}function MO(a){var c=a==null?0:a.length;return c?rn(a,0,-1):[]}var FO=Ie(function(a){var c=lt(a,oT);return c.length&&c[0]===a[0]?Qy(c):[]}),CO=Ie(function(a){var c=nn(a),p=lt(a,oT);return c===nn(p)?c=t:p.pop(),p.length&&p[0]===a[0]?Qy(p,Te(c,2)):[]}),IO=Ie(function(a){var c=nn(a),p=lt(a,oT);return c=typeof c=="function"?c:t,c&&p.pop(),p.length&&p[0]===a[0]?Qy(p,t,c):[]});function OO(a,c){return a==null?"":MI.call(a,c)}function nn(a){var c=a==null?0:a.length;return c?a[c-1]:t}function NO(a,c,p){var f=a==null?0:a.length;if(!f)return-1;var h=f;return p!==t&&(h=De(p),h=h<0?Mt(f+h,0):Jt(h,f-1)),c===c?hI(a,c,h):Ou(a,Rw,h,!0)}function UO(a,c){return a&&a.length?nE(a,De(c)):t}var HO=Ie(GE);function GE(a,c){return a&&a.length&&c&&c.length?Jy(a,c):a}function BO(a,c,p){return a&&a.length&&c&&c.length?Jy(a,c,Te(p,2)):a}function VO(a,c,p){return a&&a.length&&c&&c.length?Jy(a,c,t,p):a}var WO=Ti(function(a,c){var p=a==null?0:a.length,f=zy(a,c);return aE(a,lt(c,function(h){return xi(h,p)?+h:h}).sort(hE)),f});function $O(a,c){var p=[];if(!(a&&a.length))return p;var f=-1,h=[],S=a.length;for(c=Te(c,3);++f<S;){var _=a[f];c(_,f,a)&&(p.push(_),h.push(f))}return aE(a,h),p}function xT(a){return a==null?a:OI.call(a)}function jO(a,c,p){var f=a==null?0:a.length;return f?(p&&typeof p!="number"&&cr(a,c,p)?(c=0,p=f):(c=c==null?0:De(c),p=p===t?f:De(p)),rn(a,c,p)):[]}function zO(a,c){return rp(a,c)}function qO(a,c,p){return rT(a,c,Te(p,2))}function GO(a,c){var p=a==null?0:a.length;if(p){var f=rp(a,c);if(f<p&&Rn(a[f],c))return f}return-1}function KO(a,c){return rp(a,c,!0)}function QO(a,c,p){return rT(a,c,Te(p,2),!0)}function YO(a,c){var p=a==null?0:a.length;if(p){var f=rp(a,c,!0)-1;if(Rn(a[f],c))return f}return-1}function ZO(a){return a&&a.length?cE(a):[]}function XO(a,c){return a&&a.length?cE(a,Te(c,2)):[]}function JO(a){var c=a==null?0:a.length;return c?rn(a,1,c):[]}function eN(a,c,p){return a&&a.length?(c=p||c===t?1:De(c),rn(a,0,c<0?0:c)):[]}function tN(a,c,p){var f=a==null?0:a.length;return f?(c=p||c===t?1:De(c),c=f-c,rn(a,c<0?0:c,f)):[]}function rN(a,c){return a&&a.length?np(a,Te(c,3),!1,!0):[]}function nN(a,c){return a&&a.length?np(a,Te(c,3)):[]}var iN=Ie(function(a){return $i(zt(a,1,vt,!0))}),oN=Ie(function(a){var c=nn(a);return vt(c)&&(c=t),$i(zt(a,1,vt,!0),Te(c,2))}),aN=Ie(function(a){var c=nn(a);return c=typeof c=="function"?c:t,$i(zt(a,1,vt,!0),t,c)});function sN(a){return a&&a.length?$i(a):[]}function cN(a,c){return a&&a.length?$i(a,Te(c,2)):[]}function lN(a,c){return c=typeof c=="function"?c:t,a&&a.length?$i(a,t,c):[]}function ST(a){if(!(a&&a.length))return[];var c=0;return a=Ni(a,function(p){if(vt(p))return c=Mt(p.length,c),!0}),Ny(c,function(p){return lt(a,Cy(p))})}function KE(a,c){if(!(a&&a.length))return[];var p=ST(a);return c==null?p:lt(p,function(f){return Fr(c,t,f)})}var uN=Ie(function(a,c){return vt(a)?Fc(a,c):[]}),pN=Ie(function(a){return iT(Ni(a,vt))}),mN=Ie(function(a){var c=nn(a);return vt(c)&&(c=t),iT(Ni(a,vt),Te(c,2))}),fN=Ie(function(a){var c=nn(a);return c=typeof c=="function"?c:t,iT(Ni(a,vt),t,c)}),dN=Ie(ST);function gN(a,c){return mE(a||[],c||[],Mc)}function hN(a,c){return mE(a||[],c||[],Oc)}var yN=Ie(function(a){var c=a.length,p=c>1?a[c-1]:t;return p=typeof p=="function"?(a.pop(),p):t,KE(a,p)});function QE(a){var c=T(a);return c.__chain__=!0,c}function TN(a,c){return c(a),a}function mp(a,c){return c(a)}var xN=Ti(function(a){var c=a.length,p=c?a[0]:0,f=this.__wrapped__,h=function(S){return zy(S,a)};return c>1||this.__actions__.length||!(f instanceof je)||!xi(p)?this.thru(h):(f=f.slice(p,+p+(c?1:0)),f.__actions__.push({func:mp,args:[h],thisArg:t}),new en(f,this.__chain__).thru(function(S){return c&&!S.length&&S.push(t),S}))});function SN(){return QE(this)}function vN(){return new en(this.value(),this.__chain__)}function bN(){this.__values__===t&&(this.__values__=l_(this.value()));var a=this.__index__>=this.__values__.length,c=a?t:this.__values__[this.__index__++];return{done:a,value:c}}function wN(){return this}function EN(a){for(var c,p=this;p instanceof Zu;){var f=WE(p);f.__index__=0,f.__values__=t,c?h.__wrapped__=f:c=f;var h=f;p=p.__wrapped__}return h.__wrapped__=a,c}function _N(){var a=this.__wrapped__;if(a instanceof je){var c=a;return this.__actions__.length&&(c=new je(this)),c=c.reverse(),c.__actions__.push({func:mp,args:[xT],thisArg:t}),new en(c,this.__chain__)}return this.thru(xT)}function RN(){return pE(this.__wrapped__,this.__actions__)}var kN=ip(function(a,c,p){et.call(a,p)?++a[p]:hi(a,p,1)});function AN(a,c,p){var f=Ae(a)?Ew:T1;return p&&cr(a,c,p)&&(c=t),f(a,Te(c,3))}function PN(a,c){var p=Ae(a)?Ni:Kw;return p(a,Te(c,3))}var LN=bE($E),DN=bE(jE);function MN(a,c){return zt(fp(a,c),1)}function FN(a,c){return zt(fp(a,c),C)}function CN(a,c,p){return p=p===t?1:De(p),zt(fp(a,c),p)}function YE(a,c){var p=Ae(a)?Xr:Wi;return p(a,Te(c,3))}function ZE(a,c){var p=Ae(a)?JC:Gw;return p(a,Te(c,3))}var IN=ip(function(a,c,p){et.call(a,p)?a[p].push(c):hi(a,p,[c])});function ON(a,c,p,f){a=vr(a)?a:Va(a),p=p&&!f?De(p):0;var h=a.length;return p<0&&(p=Mt(h+p,0)),Tp(a)?p<=h&&a.indexOf(c,p)>-1:!!h&&La(a,c,p)>-1}var NN=Ie(function(a,c,p){var f=-1,h=typeof c=="function",S=vr(a)?V(a.length):[];return Wi(a,function(_){S[++f]=h?Fr(c,_,p):Cc(_,c,p)}),S}),UN=ip(function(a,c,p){hi(a,p,c)});function fp(a,c){var p=Ae(a)?lt:eE;return p(a,Te(c,3))}function HN(a,c,p,f){return a==null?[]:(Ae(c)||(c=c==null?[]:[c]),p=f?t:p,Ae(p)||(p=p==null?[]:[p]),iE(a,c,p))}var BN=ip(function(a,c,p){a[p?0:1].push(c)},function(){return[[],[]]});function VN(a,c,p){var f=Ae(a)?My:Aw,h=arguments.length<3;return f(a,Te(c,4),p,h,Wi)}function WN(a,c,p){var f=Ae(a)?eI:Aw,h=arguments.length<3;return f(a,Te(c,4),p,h,Gw)}function $N(a,c){var p=Ae(a)?Ni:Kw;return p(a,hp(Te(c,3)))}function jN(a){var c=Ae(a)?$w:O1;return c(a)}function zN(a,c,p){(p?cr(a,c,p):c===t)?c=1:c=De(c);var f=Ae(a)?f1:N1;return f(a,c)}function qN(a){var c=Ae(a)?d1:H1;return c(a)}function GN(a){if(a==null)return 0;if(vr(a))return Tp(a)?Ma(a):a.length;var c=er(a);return c==bn||c==wn?a.size:Zy(a).length}function KN(a,c,p){var f=Ae(a)?Fy:B1;return p&&cr(a,c,p)&&(c=t),f(a,Te(c,3))}var QN=Ie(function(a,c){if(a==null)return[];var p=c.length;return p>1&&cr(a,c[0],c[1])?c=[]:p>2&&cr(c[0],c[1],c[2])&&(c=[c[0]]),iE(a,zt(c,1),[])}),dp=PI||function(){return Ot.Date.now()};function YN(a,c){if(typeof c!="function")throw new Jr(i);return a=De(a),function(){if(--a<1)return c.apply(this,arguments)}}function XE(a,c,p){return c=p?t:c,c=a&&c==null?a.length:c,yi(a,ge,t,t,t,t,c)}function JE(a,c){var p;if(typeof c!="function")throw new Jr(i);return a=De(a),function(){return--a>0&&(p=c.apply(this,arguments)),a<=1&&(c=t),p}}var vT=Ie(function(a,c,p){var f=E;if(p.length){var h=Hi(p,Ha(vT));f|=ie}return yi(a,f,c,p,h)}),e_=Ie(function(a,c,p){var f=E|w;if(p.length){var h=Hi(p,Ha(e_));f|=ie}return yi(c,f,a,p,h)});function t_(a,c,p){c=p?t:c;var f=yi(a,W,t,t,t,t,t,c);return f.placeholder=t_.placeholder,f}function r_(a,c,p){c=p?t:c;var f=yi(a,G,t,t,t,t,t,c);return f.placeholder=r_.placeholder,f}function n_(a,c,p){var f,h,S,_,A,F,K=0,Q=!1,te=!1,ae=!0;if(typeof a!="function")throw new Jr(i);c=on(c)||0,dt(p)&&(Q=!!p.leading,te="maxWait"in p,S=te?Mt(on(p.maxWait)||0,c):S,ae="trailing"in p?!!p.trailing:ae);function de(bt){var kn=f,bi=h;return f=h=t,K=bt,_=a.apply(bi,kn),_}function Se(bt){return K=bt,A=Hc(He,c),Q?de(bt):_}function Fe(bt){var kn=bt-F,bi=bt-K,b_=c-kn;return te?Jt(b_,S-bi):b_}function ve(bt){var kn=bt-F,bi=bt-K;return F===t||kn>=c||kn<0||te&&bi>=S}function He(){var bt=dp();if(ve(bt))return ze(bt);A=Hc(He,Fe(bt))}function ze(bt){return A=t,ae&&f?de(bt):(f=h=t,_)}function Nr(){A!==t&&fE(A),K=0,f=F=h=A=t}function lr(){return A===t?_:ze(dp())}function Ur(){var bt=dp(),kn=ve(bt);if(f=arguments,h=this,F=bt,kn){if(A===t)return Se(F);if(te)return fE(A),A=Hc(He,c),de(F)}return A===t&&(A=Hc(He,c)),_}return Ur.cancel=Nr,Ur.flush=lr,Ur}var ZN=Ie(function(a,c){return qw(a,1,c)}),XN=Ie(function(a,c,p){return qw(a,on(c)||0,p)});function JN(a){return yi(a,kt)}function gp(a,c){if(typeof a!="function"||c!=null&&typeof c!="function")throw new Jr(i);var p=function(){var f=arguments,h=c?c.apply(this,f):f[0],S=p.cache;if(S.has(h))return S.get(h);var _=a.apply(this,f);return p.cache=S.set(h,_)||S,_};return p.cache=new(gp.Cache||gi),p}gp.Cache=gi;function hp(a){if(typeof a!="function")throw new Jr(i);return function(){var c=arguments;switch(c.length){case 0:return!a.call(this);case 1:return!a.call(this,c[0]);case 2:return!a.call(this,c[0],c[1]);case 3:return!a.call(this,c[0],c[1],c[2])}return!a.apply(this,c)}}function eU(a){return JE(2,a)}var tU=V1(function(a,c){c=c.length==1&&Ae(c[0])?lt(c[0],Cr(Te())):lt(zt(c,1),Cr(Te()));var p=c.length;return Ie(function(f){for(var h=-1,S=Jt(f.length,p);++h<S;)f[h]=c[h].call(this,f[h]);return Fr(a,this,f)})}),bT=Ie(function(a,c){var p=Hi(c,Ha(bT));return yi(a,ie,t,c,p)}),i_=Ie(function(a,c){var p=Hi(c,Ha(i_));return yi(a,se,t,c,p)}),rU=Ti(function(a,c){return yi(a,be,t,t,t,c)});function nU(a,c){if(typeof a!="function")throw new Jr(i);return c=c===t?c:De(c),Ie(a,c)}function iU(a,c){if(typeof a!="function")throw new Jr(i);return c=c==null?0:Mt(De(c),0),Ie(function(p){var f=p[c],h=zi(p,0,c);return f&&Ui(h,f),Fr(a,this,h)})}function oU(a,c,p){var f=!0,h=!0;if(typeof a!="function")throw new Jr(i);return dt(p)&&(f="leading"in p?!!p.leading:f,h="trailing"in p?!!p.trailing:h),n_(a,c,{leading:f,maxWait:c,trailing:h})}function aU(a){return XE(a,1)}function sU(a,c){return bT(aT(c),a)}function cU(){if(!arguments.length)return[];var a=arguments[0];return Ae(a)?a:[a]}function lU(a){return tn(a,g)}function uU(a,c){return c=typeof c=="function"?c:t,tn(a,g,c)}function pU(a){return tn(a,m|g)}function mU(a,c){return c=typeof c=="function"?c:t,tn(a,m|g,c)}function fU(a,c){return c==null||zw(a,c,Nt(c))}function Rn(a,c){return a===c||a!==a&&c!==c}var dU=cp(Ky),gU=cp(function(a,c){return a>=c}),No=Zw(function(){return arguments}())?Zw:function(a){return Tt(a)&&et.call(a,"callee")&&!Nw.call(a,"callee")},Ae=V.isArray,hU=Tw?Cr(Tw):E1;function vr(a){return a!=null&&yp(a.length)&&!Si(a)}function vt(a){return Tt(a)&&vr(a)}function yU(a){return a===!0||a===!1||Tt(a)&&sr(a)==jt}var qi=DI||FT,TU=xw?Cr(xw):_1;function xU(a){return Tt(a)&&a.nodeType===1&&!Bc(a)}function SU(a){if(a==null)return!0;if(vr(a)&&(Ae(a)||typeof a=="string"||typeof a.splice=="function"||qi(a)||Ba(a)||No(a)))return!a.length;var c=er(a);if(c==bn||c==wn)return!a.size;if(Uc(a))return!Zy(a).length;for(var p in a)if(et.call(a,p))return!1;return!0}function vU(a,c){return Ic(a,c)}function bU(a,c,p){p=typeof p=="function"?p:t;var f=p?p(a,c):t;return f===t?Ic(a,c,t,p):!!f}function wT(a){if(!Tt(a))return!1;var c=sr(a);return c==mi||c==Ao||typeof a.message=="string"&&typeof a.name=="string"&&!Bc(a)}function wU(a){return typeof a=="number"&&Hw(a)}function Si(a){if(!dt(a))return!1;var c=sr(a);return c==ka||c==qb||c==yt||c==GF}function o_(a){return typeof a=="number"&&a==De(a)}function yp(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=U}function dt(a){var c=typeof a;return a!=null&&(c=="object"||c=="function")}function Tt(a){return a!=null&&typeof a=="object"}var a_=Sw?Cr(Sw):k1;function EU(a,c){return a===c||Yy(a,c,fT(c))}function _U(a,c,p){return p=typeof p=="function"?p:t,Yy(a,c,fT(c),p)}function RU(a){return s_(a)&&a!=+a}function kU(a){if(uO(a))throw new ke(n);return Xw(a)}function AU(a){return a===null}function PU(a){return a==null}function s_(a){return typeof a=="number"||Tt(a)&&sr(a)==vc}function Bc(a){if(!Tt(a)||sr(a)!=fi)return!1;var c=ju(a);if(c===null)return!0;var p=et.call(c,"constructor")&&c.constructor;return typeof p=="function"&&p instanceof p&&Bu.call(p)==_I}var ET=vw?Cr(vw):A1;function LU(a){return o_(a)&&a>=-U&&a<=U}var c_=bw?Cr(bw):P1;function Tp(a){return typeof a=="string"||!Ae(a)&&Tt(a)&&sr(a)==wc}function Or(a){return typeof a=="symbol"||Tt(a)&&sr(a)==Du}var Ba=ww?Cr(ww):L1;function DU(a){return a===t}function MU(a){return Tt(a)&&er(a)==Ec}function FU(a){return Tt(a)&&sr(a)==QF}var CU=cp(Xy),IU=cp(function(a,c){return a<=c});function l_(a){if(!a)return[];if(vr(a))return Tp(a)?En(a):Sr(a);if(kc&&a[kc])return fI(a[kc]());var c=er(a),p=c==bn?Hy:c==wn?Nu:Va;return p(a)}function vi(a){if(!a)return a===0?a:0;if(a=on(a),a===C||a===-C){var c=a<0?-1:1;return c*z}return a===a?a:0}function De(a){var c=vi(a),p=c%1;return c===c?p?c-p:c:0}function u_(a){return a?Fo(De(a),0,Y):0}function on(a){if(typeof a=="number")return a;if(Or(a))return J;if(dt(a)){var c=typeof a.valueOf=="function"?a.valueOf():a;a=dt(c)?c+"":c}if(typeof a!="string")return a===0?a:+a;a=Pw(a);var p=hC.test(a);return p||TC.test(a)?YC(a.slice(2),p?2:8):gC.test(a)?J:+a}function p_(a){return Wn(a,br(a))}function OU(a){return a?Fo(De(a),-U,U):a===0?a:0}function Je(a){return a==null?"":Ir(a)}var NU=Na(function(a,c){if(Uc(c)||vr(c)){Wn(c,Nt(c),a);return}for(var p in c)et.call(c,p)&&Mc(a,p,c[p])}),m_=Na(function(a,c){Wn(c,br(c),a)}),xp=Na(function(a,c,p,f){Wn(c,br(c),a,f)}),UU=Na(function(a,c,p,f){Wn(c,Nt(c),a,f)}),HU=Ti(zy);function BU(a,c){var p=Oa(a);return c==null?p:jw(p,c)}var VU=Ie(function(a,c){a=nt(a);var p=-1,f=c.length,h=f>2?c[2]:t;for(h&&cr(c[0],c[1],h)&&(f=1);++p<f;)for(var S=c[p],_=br(S),A=-1,F=_.length;++A<F;){var K=_[A],Q=a[K];(Q===t||Rn(Q,Fa[K])&&!et.call(a,K))&&(a[K]=S[K])}return a}),WU=Ie(function(a){return a.push(t,PE),Fr(f_,t,a)});function $U(a,c){return _w(a,Te(c,3),Vn)}function jU(a,c){return _w(a,Te(c,3),Gy)}function zU(a,c){return a==null?a:qy(a,Te(c,3),br)}function qU(a,c){return a==null?a:Qw(a,Te(c,3),br)}function GU(a,c){return a&&Vn(a,Te(c,3))}function KU(a,c){return a&&Gy(a,Te(c,3))}function QU(a){return a==null?[]:ep(a,Nt(a))}function YU(a){return a==null?[]:ep(a,br(a))}function _T(a,c,p){var f=a==null?t:Co(a,c);return f===t?p:f}function ZU(a,c){return a!=null&&ME(a,c,S1)}function RT(a,c){return a!=null&&ME(a,c,v1)}var XU=EE(function(a,c,p){c!=null&&typeof c.toString!="function"&&(c=Vu.call(c)),a[c]=p},AT(wr)),JU=EE(function(a,c,p){c!=null&&typeof c.toString!="function"&&(c=Vu.call(c)),et.call(a,c)?a[c].push(p):a[c]=[p]},Te),eH=Ie(Cc);function Nt(a){return vr(a)?Ww(a):Zy(a)}function br(a){return vr(a)?Ww(a,!0):D1(a)}function tH(a,c){var p={};return c=Te(c,3),Vn(a,function(f,h,S){hi(p,c(f,h,S),f)}),p}function rH(a,c){var p={};return c=Te(c,3),Vn(a,function(f,h,S){hi(p,h,c(f,h,S))}),p}var nH=Na(function(a,c,p){tp(a,c,p)}),f_=Na(function(a,c,p,f){tp(a,c,p,f)}),iH=Ti(function(a,c){var p={};if(a==null)return p;var f=!1;c=lt(c,function(S){return S=ji(S,a),f||(f=S.length>1),S}),Wn(a,pT(a),p),f&&(p=tn(p,m|d|g,X1));for(var h=c.length;h--;)nT(p,c[h]);return p});function oH(a,c){return d_(a,hp(Te(c)))}var aH=Ti(function(a,c){return a==null?{}:F1(a,c)});function d_(a,c){if(a==null)return{};var p=lt(pT(a),function(f){return[f]});return c=Te(c),oE(a,p,function(f,h){return c(f,h[0])})}function sH(a,c,p){c=ji(c,a);var f=-1,h=c.length;for(h||(h=1,a=t);++f<h;){var S=a==null?t:a[$n(c[f])];S===t&&(f=h,S=p),a=Si(S)?S.call(a):S}return a}function cH(a,c,p){return a==null?a:Oc(a,c,p)}function lH(a,c,p,f){return f=typeof f=="function"?f:t,a==null?a:Oc(a,c,p,f)}var g_=kE(Nt),h_=kE(br);function uH(a,c,p){var f=Ae(a),h=f||qi(a)||Ba(a);if(c=Te(c,4),p==null){var S=a&&a.constructor;h?p=f?new S:[]:dt(a)?p=Si(S)?Oa(ju(a)):{}:p={}}return(h?Xr:Vn)(a,function(_,A,F){return c(p,_,A,F)}),p}function pH(a,c){return a==null?!0:nT(a,c)}function mH(a,c,p){return a==null?a:uE(a,c,aT(p))}function fH(a,c,p,f){return f=typeof f=="function"?f:t,a==null?a:uE(a,c,aT(p),f)}function Va(a){return a==null?[]:Uy(a,Nt(a))}function dH(a){return a==null?[]:Uy(a,br(a))}function gH(a,c,p){return p===t&&(p=c,c=t),p!==t&&(p=on(p),p=p===p?p:0),c!==t&&(c=on(c),c=c===c?c:0),Fo(on(a),c,p)}function hH(a,c,p){return c=vi(c),p===t?(p=c,c=0):p=vi(p),a=on(a),b1(a,c,p)}function yH(a,c,p){if(p&&typeof p!="boolean"&&cr(a,c,p)&&(c=p=t),p===t&&(typeof c=="boolean"?(p=c,c=t):typeof a=="boolean"&&(p=a,a=t)),a===t&&c===t?(a=0,c=1):(a=vi(a),c===t?(c=a,a=0):c=vi(c)),a>c){var f=a;a=c,c=f}if(p||a%1||c%1){var h=Bw();return Jt(a+h*(c-a+QC("1e-"+((h+"").length-1))),c)}return eT(a,c)}var TH=Ua(function(a,c,p){return c=c.toLowerCase(),a+(p?y_(c):c)});function y_(a){return kT(Je(a).toLowerCase())}function T_(a){return a=Je(a),a&&a.replace(SC,cI).replace(HC,"")}function xH(a,c,p){a=Je(a),c=Ir(c);var f=a.length;p=p===t?f:Fo(De(p),0,f);var h=p;return p-=c.length,p>=0&&a.slice(p,h)==c}function SH(a){return a=Je(a),a&&eC.test(a)?a.replace(Qb,lI):a}function vH(a){return a=Je(a),a&&aC.test(a)?a.replace(by,"\\$&"):a}var bH=Ua(function(a,c,p){return a+(p?"-":"")+c.toLowerCase()}),wH=Ua(function(a,c,p){return a+(p?" ":"")+c.toLowerCase()}),EH=vE("toLowerCase");function _H(a,c,p){a=Je(a),c=De(c);var f=c?Ma(a):0;if(!c||f>=c)return a;var h=(c-f)/2;return sp(Ku(h),p)+a+sp(Gu(h),p)}function RH(a,c,p){a=Je(a),c=De(c);var f=c?Ma(a):0;return c&&f<c?a+sp(c-f,p):a}function kH(a,c,p){a=Je(a),c=De(c);var f=c?Ma(a):0;return c&&f<c?sp(c-f,p)+a:a}function AH(a,c,p){return p||c==null?c=0:c&&(c=+c),II(Je(a).replace(wy,""),c||0)}function PH(a,c,p){return(p?cr(a,c,p):c===t)?c=1:c=De(c),tT(Je(a),c)}function LH(){var a=arguments,c=Je(a[0]);return a.length<3?c:c.replace(a[1],a[2])}var DH=Ua(function(a,c,p){return a+(p?"_":"")+c.toLowerCase()});function MH(a,c,p){return p&&typeof p!="number"&&cr(a,c,p)&&(c=p=t),p=p===t?Y:p>>>0,p?(a=Je(a),a&&(typeof c=="string"||c!=null&&!ET(c))&&(c=Ir(c),!c&&Da(a))?zi(En(a),0,p):a.split(c,p)):[]}var FH=Ua(function(a,c,p){return a+(p?" ":"")+kT(c)});function CH(a,c,p){return a=Je(a),p=p==null?0:Fo(De(p),0,a.length),c=Ir(c),a.slice(p,p+c.length)==c}function IH(a,c,p){var f=T.templateSettings;p&&cr(a,c,p)&&(c=t),a=Je(a),c=xp({},c,f,AE);var h=xp({},c.imports,f.imports,AE),S=Nt(h),_=Uy(h,S),A,F,K=0,Q=c.interpolate||Mu,te="__p += '",ae=By((c.escape||Mu).source+"|"+Q.source+"|"+(Q===Yb?dC:Mu).source+"|"+(c.evaluate||Mu).source+"|$","g"),de="//# sourceURL="+(et.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++jC+"]")+`
`;a.replace(ae,function(ve,He,ze,Nr,lr,Ur){return ze||(ze=Nr),te+=a.slice(K,Ur).replace(vC,uI),He&&(A=!0,te+=`' +
__e(`+He+`) +
'`),lr&&(F=!0,te+=`';
`+lr+`;
__p += '`),ze&&(te+=`' +
((__t = (`+ze+`)) == null ? '' : __t) +
'`),K=Ur+ve.length,ve}),te+=`';
`;var Se=et.call(c,"variable")&&c.variable;if(!Se)te=`with (obj) {
`+te+`
}
`;else if(mC.test(Se))throw new ke(o);te=(F?te.replace(YF,""):te).replace(ZF,"$1").replace(XF,"$1;"),te="function("+(Se||"obj")+`) {
`+(Se?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(A?", __e = _.escape":"")+(F?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+te+`return __p
}`;var Fe=S_(function(){return Ze(S,de+"return "+te).apply(t,_)});if(Fe.source=te,wT(Fe))throw Fe;return Fe}function OH(a){return Je(a).toLowerCase()}function NH(a){return Je(a).toUpperCase()}function UH(a,c,p){if(a=Je(a),a&&(p||c===t))return Pw(a);if(!a||!(c=Ir(c)))return a;var f=En(a),h=En(c),S=Lw(f,h),_=Dw(f,h)+1;return zi(f,S,_).join("")}function HH(a,c,p){if(a=Je(a),a&&(p||c===t))return a.slice(0,Fw(a)+1);if(!a||!(c=Ir(c)))return a;var f=En(a),h=Dw(f,En(c))+1;return zi(f,0,h).join("")}function BH(a,c,p){if(a=Je(a),a&&(p||c===t))return a.replace(wy,"");if(!a||!(c=Ir(c)))return a;var f=En(a),h=Lw(f,En(c));return zi(f,h).join("")}function VH(a,c){var p=Tr,f=xr;if(dt(c)){var h="separator"in c?c.separator:h;p="length"in c?De(c.length):p,f="omission"in c?Ir(c.omission):f}a=Je(a);var S=a.length;if(Da(a)){var _=En(a);S=_.length}if(p>=S)return a;var A=p-Ma(f);if(A<1)return f;var F=_?zi(_,0,A).join(""):a.slice(0,A);if(h===t)return F+f;if(_&&(A+=F.length-A),ET(h)){if(a.slice(A).search(h)){var K,Q=F;for(h.global||(h=By(h.source,Je(Zb.exec(h))+"g")),h.lastIndex=0;K=h.exec(Q);)var te=K.index;F=F.slice(0,te===t?A:te)}}else if(a.indexOf(Ir(h),A)!=A){var ae=F.lastIndexOf(h);ae>-1&&(F=F.slice(0,ae))}return F+f}function WH(a){return a=Je(a),a&&JF.test(a)?a.replace(Kb,yI):a}var $H=Ua(function(a,c,p){return a+(p?" ":"")+c.toUpperCase()}),kT=vE("toUpperCase");function x_(a,c,p){return a=Je(a),c=p?t:c,c===t?mI(a)?SI(a):nI(a):a.match(c)||[]}var S_=Ie(function(a,c){try{return Fr(a,t,c)}catch(p){return wT(p)?p:new ke(p)}}),jH=Ti(function(a,c){return Xr(c,function(p){p=$n(p),hi(a,p,vT(a[p],a))}),a});function zH(a){var c=a==null?0:a.length,p=Te();return a=c?lt(a,function(f){if(typeof f[1]!="function")throw new Jr(i);return[p(f[0]),f[1]]}):[],Ie(function(f){for(var h=-1;++h<c;){var S=a[h];if(Fr(S[0],this,f))return Fr(S[1],this,f)}})}function qH(a){return y1(tn(a,m))}function AT(a){return function(){return a}}function GH(a,c){return a==null||a!==a?c:a}var KH=wE(),QH=wE(!0);function wr(a){return a}function PT(a){return Jw(typeof a=="function"?a:tn(a,m))}function YH(a){return tE(tn(a,m))}function ZH(a,c){return rE(a,tn(c,m))}var XH=Ie(function(a,c){return function(p){return Cc(p,a,c)}}),JH=Ie(function(a,c){return function(p){return Cc(a,p,c)}});function LT(a,c,p){var f=Nt(c),h=ep(c,f);p==null&&!(dt(c)&&(h.length||!f.length))&&(p=c,c=a,a=this,h=ep(c,Nt(c)));var S=!(dt(p)&&"chain"in p)||!!p.chain,_=Si(a);return Xr(h,function(A){var F=c[A];a[A]=F,_&&(a.prototype[A]=function(){var K=this.__chain__;if(S||K){var Q=a(this.__wrapped__),te=Q.__actions__=Sr(this.__actions__);return te.push({func:F,args:arguments,thisArg:a}),Q.__chain__=K,Q}return F.apply(a,Ui([this.value()],arguments))})}),a}function e2(){return Ot._===this&&(Ot._=RI),this}function DT(){}function t2(a){return a=De(a),Ie(function(c){return nE(c,a)})}var r2=cT(lt),n2=cT(Ew),i2=cT(Fy);function v_(a){return gT(a)?Cy($n(a)):C1(a)}function o2(a){return function(c){return a==null?t:Co(a,c)}}var a2=_E(),s2=_E(!0);function MT(){return[]}function FT(){return!1}function c2(){return{}}function l2(){return""}function u2(){return!0}function p2(a,c){if(a=De(a),a<1||a>U)return[];var p=Y,f=Jt(a,Y);c=Te(c),a-=Y;for(var h=Ny(f,c);++p<a;)c(p);return h}function m2(a){return Ae(a)?lt(a,$n):Or(a)?[a]:Sr(VE(Je(a)))}function f2(a){var c=++EI;return Je(a)+c}var d2=ap(function(a,c){return a+c},0),g2=lT("ceil"),h2=ap(function(a,c){return a/c},1),y2=lT("floor");function T2(a){return a&&a.length?Ju(a,wr,Ky):t}function x2(a,c){return a&&a.length?Ju(a,Te(c,2),Ky):t}function S2(a){return kw(a,wr)}function v2(a,c){return kw(a,Te(c,2))}function b2(a){return a&&a.length?Ju(a,wr,Xy):t}function w2(a,c){return a&&a.length?Ju(a,Te(c,2),Xy):t}var E2=ap(function(a,c){return a*c},1),_2=lT("round"),R2=ap(function(a,c){return a-c},0);function k2(a){return a&&a.length?Oy(a,wr):0}function A2(a,c){return a&&a.length?Oy(a,Te(c,2)):0}return T.after=YN,T.ary=XE,T.assign=NU,T.assignIn=m_,T.assignInWith=xp,T.assignWith=UU,T.at=HU,T.before=JE,T.bind=vT,T.bindAll=jH,T.bindKey=e_,T.castArray=cU,T.chain=QE,T.chunk=yO,T.compact=TO,T.concat=xO,T.cond=zH,T.conforms=qH,T.constant=AT,T.countBy=kN,T.create=BU,T.curry=t_,T.curryRight=r_,T.debounce=n_,T.defaults=VU,T.defaultsDeep=WU,T.defer=ZN,T.delay=XN,T.difference=SO,T.differenceBy=vO,T.differenceWith=bO,T.drop=wO,T.dropRight=EO,T.dropRightWhile=_O,T.dropWhile=RO,T.fill=kO,T.filter=PN,T.flatMap=MN,T.flatMapDeep=FN,T.flatMapDepth=CN,T.flatten=zE,T.flattenDeep=AO,T.flattenDepth=PO,T.flip=JN,T.flow=KH,T.flowRight=QH,T.fromPairs=LO,T.functions=QU,T.functionsIn=YU,T.groupBy=IN,T.initial=MO,T.intersection=FO,T.intersectionBy=CO,T.intersectionWith=IO,T.invert=XU,T.invertBy=JU,T.invokeMap=NN,T.iteratee=PT,T.keyBy=UN,T.keys=Nt,T.keysIn=br,T.map=fp,T.mapKeys=tH,T.mapValues=rH,T.matches=YH,T.matchesProperty=ZH,T.memoize=gp,T.merge=nH,T.mergeWith=f_,T.method=XH,T.methodOf=JH,T.mixin=LT,T.negate=hp,T.nthArg=t2,T.omit=iH,T.omitBy=oH,T.once=eU,T.orderBy=HN,T.over=r2,T.overArgs=tU,T.overEvery=n2,T.overSome=i2,T.partial=bT,T.partialRight=i_,T.partition=BN,T.pick=aH,T.pickBy=d_,T.property=v_,T.propertyOf=o2,T.pull=HO,T.pullAll=GE,T.pullAllBy=BO,T.pullAllWith=VO,T.pullAt=WO,T.range=a2,T.rangeRight=s2,T.rearg=rU,T.reject=$N,T.remove=$O,T.rest=nU,T.reverse=xT,T.sampleSize=zN,T.set=cH,T.setWith=lH,T.shuffle=qN,T.slice=jO,T.sortBy=QN,T.sortedUniq=ZO,T.sortedUniqBy=XO,T.split=MH,T.spread=iU,T.tail=JO,T.take=eN,T.takeRight=tN,T.takeRightWhile=rN,T.takeWhile=nN,T.tap=TN,T.throttle=oU,T.thru=mp,T.toArray=l_,T.toPairs=g_,T.toPairsIn=h_,T.toPath=m2,T.toPlainObject=p_,T.transform=uH,T.unary=aU,T.union=iN,T.unionBy=oN,T.unionWith=aN,T.uniq=sN,T.uniqBy=cN,T.uniqWith=lN,T.unset=pH,T.unzip=ST,T.unzipWith=KE,T.update=mH,T.updateWith=fH,T.values=Va,T.valuesIn=dH,T.without=uN,T.words=x_,T.wrap=sU,T.xor=pN,T.xorBy=mN,T.xorWith=fN,T.zip=dN,T.zipObject=gN,T.zipObjectDeep=hN,T.zipWith=yN,T.entries=g_,T.entriesIn=h_,T.extend=m_,T.extendWith=xp,LT(T,T),T.add=d2,T.attempt=S_,T.camelCase=TH,T.capitalize=y_,T.ceil=g2,T.clamp=gH,T.clone=lU,T.cloneDeep=pU,T.cloneDeepWith=mU,T.cloneWith=uU,T.conformsTo=fU,T.deburr=T_,T.defaultTo=GH,T.divide=h2,T.endsWith=xH,T.eq=Rn,T.escape=SH,T.escapeRegExp=vH,T.every=AN,T.find=LN,T.findIndex=$E,T.findKey=$U,T.findLast=DN,T.findLastIndex=jE,T.findLastKey=jU,T.floor=y2,T.forEach=YE,T.forEachRight=ZE,T.forIn=zU,T.forInRight=qU,T.forOwn=GU,T.forOwnRight=KU,T.get=_T,T.gt=dU,T.gte=gU,T.has=ZU,T.hasIn=RT,T.head=qE,T.identity=wr,T.includes=ON,T.indexOf=DO,T.inRange=hH,T.invoke=eH,T.isArguments=No,T.isArray=Ae,T.isArrayBuffer=hU,T.isArrayLike=vr,T.isArrayLikeObject=vt,T.isBoolean=yU,T.isBuffer=qi,T.isDate=TU,T.isElement=xU,T.isEmpty=SU,T.isEqual=vU,T.isEqualWith=bU,T.isError=wT,T.isFinite=wU,T.isFunction=Si,T.isInteger=o_,T.isLength=yp,T.isMap=a_,T.isMatch=EU,T.isMatchWith=_U,T.isNaN=RU,T.isNative=kU,T.isNil=PU,T.isNull=AU,T.isNumber=s_,T.isObject=dt,T.isObjectLike=Tt,T.isPlainObject=Bc,T.isRegExp=ET,T.isSafeInteger=LU,T.isSet=c_,T.isString=Tp,T.isSymbol=Or,T.isTypedArray=Ba,T.isUndefined=DU,T.isWeakMap=MU,T.isWeakSet=FU,T.join=OO,T.kebabCase=bH,T.last=nn,T.lastIndexOf=NO,T.lowerCase=wH,T.lowerFirst=EH,T.lt=CU,T.lte=IU,T.max=T2,T.maxBy=x2,T.mean=S2,T.meanBy=v2,T.min=b2,T.minBy=w2,T.stubArray=MT,T.stubFalse=FT,T.stubObject=c2,T.stubString=l2,T.stubTrue=u2,T.multiply=E2,T.nth=UO,T.noConflict=e2,T.noop=DT,T.now=dp,T.pad=_H,T.padEnd=RH,T.padStart=kH,T.parseInt=AH,T.random=yH,T.reduce=VN,T.reduceRight=WN,T.repeat=PH,T.replace=LH,T.result=sH,T.round=_2,T.runInContext=D,T.sample=jN,T.size=GN,T.snakeCase=DH,T.some=KN,T.sortedIndex=zO,T.sortedIndexBy=qO,T.sortedIndexOf=GO,T.sortedLastIndex=KO,T.sortedLastIndexBy=QO,T.sortedLastIndexOf=YO,T.startCase=FH,T.startsWith=CH,T.subtract=R2,T.sum=k2,T.sumBy=A2,T.template=IH,T.times=p2,T.toFinite=vi,T.toInteger=De,T.toLength=u_,T.toLower=OH,T.toNumber=on,T.toSafeInteger=OU,T.toString=Je,T.toUpper=NH,T.trim=UH,T.trimEnd=HH,T.trimStart=BH,T.truncate=VH,T.unescape=WH,T.uniqueId=f2,T.upperCase=$H,T.upperFirst=kT,T.each=YE,T.eachRight=ZE,T.first=qE,LT(T,function(){var a={};return Vn(T,function(c,p){et.call(T.prototype,p)||(a[p]=c)}),a}(),{chain:!1}),T.VERSION=e,Xr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){T[a].placeholder=T}),Xr(["drop","take"],function(a,c){je.prototype[a]=function(p){p=p===t?1:Mt(De(p),0);var f=this.__filtered__&&!c?new je(this):this.clone();return f.__filtered__?f.__takeCount__=Jt(p,f.__takeCount__):f.__views__.push({size:Jt(p,Y),type:a+(f.__dir__<0?"Right":"")}),f},je.prototype[a+"Right"]=function(p){return this.reverse()[a](p).reverse()}}),Xr(["filter","map","takeWhile"],function(a,c){var p=c+1,f=p==L||p==X;je.prototype[a]=function(h){var S=this.clone();return S.__iteratees__.push({iteratee:Te(h,3),type:p}),S.__filtered__=S.__filtered__||f,S}}),Xr(["head","last"],function(a,c){var p="take"+(c?"Right":"");je.prototype[a]=function(){return this[p](1).value()[0]}}),Xr(["initial","tail"],function(a,c){var p="drop"+(c?"":"Right");je.prototype[a]=function(){return this.__filtered__?new je(this):this[p](1)}}),je.prototype.compact=function(){return this.filter(wr)},je.prototype.find=function(a){return this.filter(a).head()},je.prototype.findLast=function(a){return this.reverse().find(a)},je.prototype.invokeMap=Ie(function(a,c){return typeof a=="function"?new je(this):this.map(function(p){return Cc(p,a,c)})}),je.prototype.reject=function(a){return this.filter(hp(Te(a)))},je.prototype.slice=function(a,c){a=De(a);var p=this;return p.__filtered__&&(a>0||c<0)?new je(p):(a<0?p=p.takeRight(-a):a&&(p=p.drop(a)),c!==t&&(c=De(c),p=c<0?p.dropRight(-c):p.take(c-a)),p)},je.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},je.prototype.toArray=function(){return this.take(Y)},Vn(je.prototype,function(a,c){var p=/^(?:filter|find|map|reject)|While$/.test(c),f=/^(?:head|last)$/.test(c),h=T[f?"take"+(c=="last"?"Right":""):c],S=f||/^find/.test(c);h&&(T.prototype[c]=function(){var _=this.__wrapped__,A=f?[1]:arguments,F=_ instanceof je,K=A[0],Q=F||Ae(_),te=function(He){var ze=h.apply(T,Ui([He],A));return f&&ae?ze[0]:ze};Q&&p&&typeof K=="function"&&K.length!=1&&(F=Q=!1);var ae=this.__chain__,de=!!this.__actions__.length,Se=S&&!ae,Fe=F&&!de;if(!S&&Q){_=Fe?_:new je(this);var ve=a.apply(_,A);return ve.__actions__.push({func:mp,args:[te],thisArg:t}),new en(ve,ae)}return Se&&Fe?a.apply(this,A):(ve=this.thru(te),Se?f?ve.value()[0]:ve.value():ve)})}),Xr(["pop","push","shift","sort","splice","unshift"],function(a){var c=Uu[a],p=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",f=/^(?:pop|shift)$/.test(a);T.prototype[a]=function(){var h=arguments;if(f&&!this.__chain__){var S=this.value();return c.apply(Ae(S)?S:[],h)}return this[p](function(_){return c.apply(Ae(_)?_:[],h)})}}),Vn(je.prototype,function(a,c){var p=T[c];if(p){var f=p.name+"";et.call(Ia,f)||(Ia[f]=[]),Ia[f].push({name:c,func:p})}}),Ia[op(t,w).name]=[{name:"wrapper",func:t}],je.prototype.clone=WI,je.prototype.reverse=$I,je.prototype.value=jI,T.prototype.at=xN,T.prototype.chain=SN,T.prototype.commit=vN,T.prototype.next=bN,T.prototype.plant=EN,T.prototype.reverse=_N,T.prototype.toJSON=T.prototype.valueOf=T.prototype.value=RN,T.prototype.first=T.prototype.head,kc&&(T.prototype[kc]=wN),T},Bi=vI();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Ot._=Bi,define(function(){return Bi})):Po?((Po.exports=Bi)._=Bi,Py._=Bi):Ot._=Bi}).call(oc)});var Z7={};w_(Z7,{default:()=>zF});module.exports=C2(Z7);var CT="cursorless.command",bp=class{constructor(e){this.baseTitle=e}get title(){return`Cursorless: ${this.baseTitle}`}},xt=class extends bp{constructor(){super(...arguments);this.isVisible=!1}},wt=class extends bp{constructor(){super(...arguments);this.isVisible=!0}};var J7={"cursorless.toggleDecorations":new wt("Toggle decorations"),"cursorless.recomputeDecorationStyles":new wt("Recompute decoration styles"),"cursorless.recordTestCase":new wt("Record test case"),"cursorless.recordOneTestCaseThenPause":new wt("Record one test case, then pause"),"cursorless.pauseRecording":new wt("Pause test case recording"),"cursorless.resumeRecording":new wt("Resume test case recording"),"cursorless.recordScopeTests.showUnimplementedFacets":new wt("Bulk record unimplemented scope facets"),"cursorless.recordScopeTests.saveActiveDocument":new wt("Bulk save scope tests for the active document"),"cursorless.showDocumentation":new wt("Show documentation"),"cursorless.showInstallationDependencies":new wt("Show installation dependencies"),"cursorless.showScopeVisualizer":new wt("Show the scope visualizer"),"cursorless.hideScopeVisualizer":new wt("Hide the scope visualizer"),"cursorless.analyzeCommandHistory":new wt("Analyze collected command history"),"cursorless.tutorial.start":new xt("Start a tutorial"),"cursorless.tutorial.next":new wt("Tutorial next"),"cursorless.tutorial.previous":new wt("Tutorial previous"),"cursorless.tutorial.restart":new wt("Tutorial restart"),"cursorless.tutorial.resume":new wt("Tutorial resume"),"cursorless.tutorial.list":new wt("Tutorial list"),"cursorless.documentationOpened":new xt("Used by talon to notify us that the docs have been opened; for use with tutorial"),"cursorless.command":new xt("The core cursorless command"),"cursorless.repeatPreviousCommand":new wt("Repeat the previous Cursorless command"),"cursorless.showQuickPick":new xt("Pop up a quick pick of all cursorless commands"),"cursorless.showCheatsheet":new xt("Display the cursorless cheatsheet"),"cursorless.internal.updateCheatsheetDefaults":new xt("Update the default values of the cheatsheet payload used on the website and for local development. Be sure to run this on stock community and cursorless."),"cursorless.private.logQuickActions":new xt("Log the quick actions available at the current cursor position"),"cursorless.takeSnapshot":new xt("Take a snapshot of the current editor state"),"cursorless.keyboard.escape":new xt("Should be mapped to the escape key when using cursorless keyboard. By default, exits modal keyboard mode, but changes behaviour when Cursorless is expecting a continuation keystroke.  For example, when you type a color and Cursorless is waiting for a character, it cancels the color and switches back to modal mode."),"cursorless.keyboard.targeted.targetHat":new xt("Sets the keyboard target to the given hat"),"cursorless.keyboard.targeted.targetScope":new xt("Sets the keyboard target to the scope containing the current target"),"cursorless.keyboard.targeted.targetSelection":new xt("Sets the keyboard target to the current selection"),"cursorless.keyboard.targeted.clearTarget":new xt("Clears the current keyboard target"),"cursorless.keyboard.targeted.runActionOnTarget":new xt("Run the given action on the current keyboard target"),"cursorless.keyboard.modal.modeOn":new xt("Turn on the cursorless modal mode"),"cursorless.keyboard.modal.modeOff":new xt("Turn off the cursorless modal mode"),"cursorless.keyboard.modal.modeToggle":new xt("Toggle the cursorless modal mode"),"cursorless.keyboard.undoTarget":new xt("Undo keyboard targeting changes"),"cursorless.keyboard.redoTarget":new xt("Redo keyboard targeting changes"),"cursorless.migrateSnippets":new xt("Migrate snippets from the old Cursorless format to the new community format")};var wp=class{constructor(e,r){this.callback=e;this.debounceDelayMs=r;this.timeoutHandle=null;this.run=this.run.bind(this)}run(){this.timeoutHandle!=null&&clearTimeout(this.timeoutHandle),this.timeoutHandle=setTimeout(()=>{this.callback(),this.timeoutHandle=null},this.debounceDelayMs)}dispose(){this.timeoutHandle!=null&&clearTimeout(this.timeoutHandle)}};var Ep=class extends Error{constructor(){super("Cursorless Talon version is ahead of Cursorless VSCode extension version. Please update Cursorless VSCode.")}},Et=class extends Error{constructor(e){super(`Couldn't find containing ${e}.`),this.name="NoContainingScopeError"}};var _p=class{constructor(){this.signals={prePhrase:{getVersion:async()=>null}}}async getFocusedElementType(){return this.focusedElementType}setFocusedElementType(e){this.focusedElementType=e}};var I2=typeof global=="object"&&global&&global.Object===Object&&global,Rp=I2;var O2=typeof self=="object"&&self&&self.Object===Object&&self,N2=Rp||O2||Function("return this")(),Ut=N2;var U2=Ut.Symbol,ur=U2;var __=Object.prototype,H2=__.hasOwnProperty,B2=__.toString,Vc=ur?ur.toStringTag:void 0;function V2(t){var e=H2.call(t,Vc),r=t[Vc];try{t[Vc]=void 0;var n=!0}catch{}var i=B2.call(t);return n&&(e?t[Vc]=r:delete t[Vc]),i}var R_=V2;var W2=Object.prototype,$2=W2.toString;function j2(t){return $2.call(t)}var k_=j2;var z2="[object Null]",q2="[object Undefined]",A_=ur?ur.toStringTag:void 0;function G2(t){return t==null?t===void 0?q2:z2:A_&&A_ in Object(t)?R_(t):k_(t)}var An=G2;function K2(t){return t!=null&&typeof t=="object"}var pr=K2;var Q2="[object Symbol]";function Y2(t){return typeof t=="symbol"||pr(t)&&An(t)==Q2}var Hr=Y2;function Z2(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var sn=Z2;var X2=Array.isArray,tt=X2;var J2=1/0,P_=ur?ur.prototype:void 0,L_=P_?P_.toString:void 0;function D_(t){if(typeof t=="string")return t;if(tt(t))return sn(t,D_)+"";if(Hr(t))return L_?L_.call(t):"";var e=t+"";return e=="0"&&1/t==-J2?"-0":e}var M_=D_;var eB=/\s/;function tB(t){for(var e=t.length;e--&&eB.test(t.charAt(e)););return e}var F_=tB;var rB=/^\s+/;function nB(t){return t&&t.slice(0,F_(t)+1).replace(rB,"")}var C_=nB;function iB(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Br=iB;var I_=NaN,oB=/^[-+]0x[0-9a-f]+$/i,aB=/^0b[01]+$/i,sB=/^0o[0-7]+$/i,cB=parseInt;function lB(t){if(typeof t=="number")return t;if(Hr(t))return I_;if(Br(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Br(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=C_(t);var r=aB.test(t);return r||sB.test(t)?cB(t.slice(2),r?2:8):oB.test(t)?I_:+t}var O_=lB;var N_=1/0,uB=17976931348623157e292;function pB(t){if(!t)return t===0?t:0;if(t=O_(t),t===N_||t===-N_){var e=t<0?-1:1;return e*uB}return t===t?t:0}var Wa=pB;function mB(t){var e=Wa(t),r=e%1;return e===e?r?e-r:e:0}var kp=mB;function fB(t){return t}var jn=fB;var dB="[object AsyncFunction]",gB="[object Function]",hB="[object GeneratorFunction]",yB="[object Proxy]";function TB(t){if(!Br(t))return!1;var e=An(t);return e==gB||e==hB||e==dB||e==yB}var Ap=TB;var xB=Ut["__core-js_shared__"],Pp=xB;var U_=function(){var t=/[^.]+$/.exec(Pp&&Pp.keys&&Pp.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function SB(t){return!!U_&&U_ in t}var H_=SB;var vB=Function.prototype,bB=vB.toString;function wB(t){if(t!=null){try{return bB.call(t)}catch{}try{return t+""}catch{}}return""}var wi=wB;var EB=/[\\^$.*+?()[\]{}|]/g,_B=/^\[object .+?Constructor\]$/,RB=Function.prototype,kB=Object.prototype,AB=RB.toString,PB=kB.hasOwnProperty,LB=RegExp("^"+AB.call(PB).replace(EB,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function DB(t){if(!Br(t)||H_(t))return!1;var e=Ap(t)?LB:_B;return e.test(wi(t))}var B_=DB;function MB(t,e){return t?.[e]}var V_=MB;function FB(t,e){var r=V_(t,e);return B_(r)?r:void 0}var Er=FB;var CB=Er(Ut,"WeakMap"),Uo=CB;var IB=Uo&&new Uo,IT=IB;var W_=Object.create,OB=function(){function t(){}return function(e){if(!Br(e))return{};if(W_)return W_(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),Lp=OB;function NB(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var $_=NB;function UB(){}var $a=UB;var HB=4294967295;function Dp(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=HB,this.__views__=[]}Dp.prototype=Lp($a.prototype);Dp.prototype.constructor=Dp;var ja=Dp;function BB(){}var Mp=BB;var VB=IT?function(t){return IT.get(t)}:Mp,Fp=VB;var WB={},OT=WB;var $B=Object.prototype,jB=$B.hasOwnProperty;function zB(t){for(var e=t.name+"",r=OT[e],n=jB.call(OT,e)?r.length:0;n--;){var i=r[n],o=i.func;if(o==null||o==t)return i.name}return e}var za=zB;function Cp(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}Cp.prototype=Lp($a.prototype);Cp.prototype.constructor=Cp;var Gi=Cp;function qB(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var Ki=qB;function GB(t){if(t instanceof ja)return t.clone();var e=new Gi(t.__wrapped__,t.__chain__);return e.__actions__=Ki(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var j_=GB;var KB=Object.prototype,QB=KB.hasOwnProperty;function Ip(t){if(pr(t)&&!tt(t)&&!(t instanceof ja)){if(t instanceof Gi)return t;if(QB.call(t,"__wrapped__"))return j_(t)}return new Gi(t)}Ip.prototype=$a.prototype;Ip.prototype.constructor=Ip;var z_=Ip;function YB(t){var e=za(t),r=z_[e];if(typeof r!="function"||!(e in ja.prototype))return!1;if(t===r)return!0;var n=Fp(r);return!!n&&t===n[0]}var NT=YB;var ZB=800,XB=16,JB=Date.now;function eV(t){var e=0,r=0;return function(){var n=JB(),i=XB-(n-r);if(r=n,i>0){if(++e>=ZB)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var q_=eV;function tV(t){return function(){return t}}var G_=tV;var rV=function(){try{var t=Er(Object,"defineProperty");return t({},"",{}),t}catch{}}(),UT=rV;var nV=UT?function(t,e){return UT(t,"toString",{configurable:!0,enumerable:!1,value:G_(e),writable:!0})}:jn,K_=nV;var iV=q_(K_),Op=iV;function oV(t,e,r,n){for(var i=t.length,o=r+(n?1:-1);n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}var Np=oV;function aV(t){return t!==t}var Q_=aV;function sV(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}var Y_=sV;function cV(t,e,r){return e===e?Y_(t,e,r):Np(t,Q_,r)}var Up=cV;function lV(t,e){var r=t==null?0:t.length;return!!r&&Up(t,e,0)>-1}var Z_=lV;var uV=9007199254740991,pV=/^(?:0|[1-9]\d*)$/;function mV(t,e){var r=typeof t;return e=e??uV,!!e&&(r=="number"||r!="symbol"&&pV.test(t))&&t>-1&&t%1==0&&t<e}var qa=mV;function fV(t,e){return t===e||t!==t&&e!==e}var Ga=fV;var X_=Math.max;function dV(t,e,r){return e=X_(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,o=X_(n.length-e,0),s=Array(o);++i<o;)s[i]=n[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=n[i];return l[e]=r(s),$_(t,this,l)}}var Hp=dV;function gV(t,e){return Op(Hp(t,e,jn),t+"")}var Ka=gV;var hV=9007199254740991;function yV(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=hV}var Qa=yV;function TV(t){return t!=null&&Qa(t.length)&&!Ap(t)}var zn=TV;function xV(t,e,r){if(!Br(r))return!1;var n=typeof e;return(n=="number"?zn(r)&&qa(e,r.length):n=="string"&&e in r)?Ga(r[e],t):!1}var Ho=xV;var SV=Object.prototype;function vV(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||SV;return t===r}var J_=vV;function bV(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var Bp=bV;var wV="[object Arguments]";function EV(t){return pr(t)&&An(t)==wV}var HT=EV;var e0=Object.prototype,_V=e0.hasOwnProperty,RV=e0.propertyIsEnumerable,kV=HT(function(){return arguments}())?HT:function(t){return pr(t)&&_V.call(t,"callee")&&!RV.call(t,"callee")},Ya=kV;function AV(){return!1}var t0=AV;var i0=typeof exports=="object"&&exports&&!exports.nodeType&&exports,r0=i0&&typeof module=="object"&&module&&!module.nodeType&&module,PV=r0&&r0.exports===i0,n0=PV?Ut.Buffer:void 0,LV=n0?n0.isBuffer:void 0,DV=LV||t0,Wc=DV;var MV="[object Arguments]",FV="[object Array]",CV="[object Boolean]",IV="[object Date]",OV="[object Error]",NV="[object Function]",UV="[object Map]",HV="[object Number]",BV="[object Object]",VV="[object RegExp]",WV="[object Set]",$V="[object String]",jV="[object WeakMap]",zV="[object ArrayBuffer]",qV="[object DataView]",GV="[object Float32Array]",KV="[object Float64Array]",QV="[object Int8Array]",YV="[object Int16Array]",ZV="[object Int32Array]",XV="[object Uint8Array]",JV="[object Uint8ClampedArray]",eW="[object Uint16Array]",tW="[object Uint32Array]",at={};at[GV]=at[KV]=at[QV]=at[YV]=at[ZV]=at[XV]=at[JV]=at[eW]=at[tW]=!0;at[MV]=at[FV]=at[zV]=at[CV]=at[qV]=at[IV]=at[OV]=at[NV]=at[UV]=at[HV]=at[BV]=at[VV]=at[WV]=at[$V]=at[jV]=!1;function rW(t){return pr(t)&&Qa(t.length)&&!!at[An(t)]}var o0=rW;function nW(t){return function(e){return t(e)}}var Za=nW;var a0=typeof exports=="object"&&exports&&!exports.nodeType&&exports,$c=a0&&typeof module=="object"&&module&&!module.nodeType&&module,iW=$c&&$c.exports===a0,BT=iW&&Rp.process,oW=function(){try{var t=$c&&$c.require&&$c.require("util").types;return t||BT&&BT.binding&&BT.binding("util")}catch{}}(),VT=oW;var s0=VT&&VT.isTypedArray,aW=s0?Za(s0):o0,Vp=aW;var sW=Object.prototype,cW=sW.hasOwnProperty;function lW(t,e){var r=tt(t),n=!r&&Ya(t),i=!r&&!n&&Wc(t),o=!r&&!n&&!i&&Vp(t),s=r||n||i||o,l=s?Bp(t.length,String):[],u=l.length;for(var m in t)(e||cW.call(t,m))&&!(s&&(m=="length"||i&&(m=="offset"||m=="parent")||o&&(m=="buffer"||m=="byteLength"||m=="byteOffset")||qa(m,u)))&&l.push(m);return l}var c0=lW;function uW(t,e){return function(r){return t(e(r))}}var l0=uW;var pW=l0(Object.keys,Object),u0=pW;var mW=Object.prototype,fW=mW.hasOwnProperty;function dW(t){if(!J_(t))return u0(t);var e=[];for(var r in Object(t))fW.call(t,r)&&r!="constructor"&&e.push(r);return e}var p0=dW;function gW(t){return zn(t)?c0(t):p0(t)}var Qi=gW;var hW=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,yW=/^\w*$/;function TW(t,e){if(tt(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||Hr(t)?!0:yW.test(t)||!hW.test(t)||e!=null&&t in Object(e)}var Xa=TW;var xW=Er(Object,"create"),Ei=xW;function SW(){this.__data__=Ei?Ei(null):{},this.size=0}var m0=SW;function vW(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var f0=vW;var bW="__lodash_hash_undefined__",wW=Object.prototype,EW=wW.hasOwnProperty;function _W(t){var e=this.__data__;if(Ei){var r=e[t];return r===bW?void 0:r}return EW.call(e,t)?e[t]:void 0}var d0=_W;var RW=Object.prototype,kW=RW.hasOwnProperty;function AW(t){var e=this.__data__;return Ei?e[t]!==void 0:kW.call(e,t)}var g0=AW;var PW="__lodash_hash_undefined__";function LW(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Ei&&e===void 0?PW:e,this}var h0=LW;function Ja(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Ja.prototype.clear=m0;Ja.prototype.delete=f0;Ja.prototype.get=d0;Ja.prototype.has=g0;Ja.prototype.set=h0;var WT=Ja;function DW(){this.__data__=[],this.size=0}var y0=DW;function MW(t,e){for(var r=t.length;r--;)if(Ga(t[r][0],e))return r;return-1}var Yi=MW;var FW=Array.prototype,CW=FW.splice;function IW(t){var e=this.__data__,r=Yi(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():CW.call(e,r,1),--this.size,!0}var T0=IW;function OW(t){var e=this.__data__,r=Yi(e,t);return r<0?void 0:e[r][1]}var x0=OW;function NW(t){return Yi(this.__data__,t)>-1}var S0=NW;function UW(t,e){var r=this.__data__,n=Yi(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var v0=UW;function es(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}es.prototype.clear=y0;es.prototype.delete=T0;es.prototype.get=x0;es.prototype.has=S0;es.prototype.set=v0;var Zi=es;var HW=Er(Ut,"Map"),Xi=HW;function BW(){this.size=0,this.__data__={hash:new WT,map:new(Xi||Zi),string:new WT}}var b0=BW;function VW(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var w0=VW;function WW(t,e){var r=t.__data__;return w0(e)?r[typeof e=="string"?"string":"hash"]:r.map}var Ji=WW;function $W(t){var e=Ji(this,t).delete(t);return this.size-=e?1:0,e}var E0=$W;function jW(t){return Ji(this,t).get(t)}var _0=jW;function zW(t){return Ji(this,t).has(t)}var R0=zW;function qW(t,e){var r=Ji(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var k0=qW;function ts(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ts.prototype.clear=b0;ts.prototype.delete=E0;ts.prototype.get=_0;ts.prototype.has=R0;ts.prototype.set=k0;var Bo=ts;var GW="Expected a function";function $T(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(GW);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=t.apply(this,n);return r.cache=o.set(i,s)||o,s};return r.cache=new($T.Cache||Bo),r}$T.Cache=Bo;var jc=$T;var KW=500;function QW(t){var e=jc(t,function(n){return r.size===KW&&r.clear(),n}),r=e.cache;return e}var A0=QW;var YW=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ZW=/\\(\\)?/g,XW=A0(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(YW,function(r,n,i,o){e.push(i?o.replace(ZW,"$1"):n||r)}),e}),P0=XW;function JW(t){return t==null?"":M_(t)}var Pn=JW;function e$(t,e){return tt(t)?t:Xa(t,e)?[t]:P0(Pn(t))}var Wp=e$;var t$=1/0;function r$(t){if(typeof t=="string"||Hr(t))return t;var e=t+"";return e=="0"&&1/t==-t$?"-0":e}var eo=r$;function n$(t,e){e=Wp(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[eo(e[r++])];return r&&r==n?t:void 0}var rs=n$;function i$(t,e,r){var n=t==null?void 0:rs(t,e);return n===void 0?r:n}var Vo=i$;function o$(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var ns=o$;var L0=ur?ur.isConcatSpreadable:void 0;function a$(t){return tt(t)||Ya(t)||!!(L0&&t&&t[L0])}var D0=a$;function M0(t,e,r,n,i){var o=-1,s=t.length;for(r||(r=D0),i||(i=[]);++o<s;){var l=t[o];e>0&&r(l)?e>1?M0(l,e-1,r,n,i):ns(i,l):n||(i[i.length]=l)}return i}var is=M0;function s$(t){var e=t==null?0:t.length;return e?is(t,1):[]}var st=s$;function c$(t){return Op(Hp(t,void 0,st),t+"")}var F0=c$;function l$(t){return function(e){return t?.[e]}}var C0=l$;var u$={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},p$=C0(u$),I0=p$;var m$=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,f$="\\u0300-\\u036f",d$="\\ufe20-\\ufe2f",g$="\\u20d0-\\u20ff",h$=f$+d$+g$,y$="["+h$+"]",T$=RegExp(y$,"g");function x$(t){return t=Pn(t),t&&t.replace(m$,I0).replace(T$,"")}var jT=x$;function S$(){this.__data__=new Zi,this.size=0}var O0=S$;function v$(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var N0=v$;function b$(t){return this.__data__.get(t)}var U0=b$;function w$(t){return this.__data__.has(t)}var H0=w$;var E$=200;function _$(t,e){var r=this.__data__;if(r instanceof Zi){var n=r.__data__;if(!Xi||n.length<E$-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Bo(n)}return r.set(t,e),this.size=r.size,this}var B0=_$;function os(t){var e=this.__data__=new Zi(t);this.size=e.size}os.prototype.clear=O0;os.prototype.delete=N0;os.prototype.get=U0;os.prototype.has=H0;os.prototype.set=B0;var as=os;function R$(t,e){for(var r=-1,n=t==null?0:t.length,i=0,o=[];++r<n;){var s=t[r];e(s,r,t)&&(o[i++]=s)}return o}var $p=R$;function k$(){return[]}var V0=k$;var A$=Object.prototype,P$=A$.propertyIsEnumerable,W0=Object.getOwnPropertySymbols,L$=W0?function(t){return t==null?[]:(t=Object(t),$p(W0(t),function(e){return P$.call(t,e)}))}:V0,$0=L$;function D$(t,e,r){var n=e(t);return tt(t)?n:ns(n,r(t))}var j0=D$;function M$(t){return j0(t,Qi,$0)}var zT=M$;var F$=Er(Ut,"DataView"),jp=F$;var C$=Er(Ut,"Promise"),zp=C$;var I$=Er(Ut,"Set"),to=I$;var z0="[object Map]",O$="[object Object]",q0="[object Promise]",G0="[object Set]",K0="[object WeakMap]",Q0="[object DataView]",N$=wi(jp),U$=wi(Xi),H$=wi(zp),B$=wi(to),V$=wi(Uo),Wo=An;(jp&&Wo(new jp(new ArrayBuffer(1)))!=Q0||Xi&&Wo(new Xi)!=z0||zp&&Wo(zp.resolve())!=q0||to&&Wo(new to)!=G0||Uo&&Wo(new Uo)!=K0)&&(Wo=function(t){var e=An(t),r=e==O$?t.constructor:void 0,n=r?wi(r):"";if(n)switch(n){case N$:return Q0;case U$:return z0;case H$:return q0;case B$:return G0;case V$:return K0}return e});var qT=Wo;var W$=Ut.Uint8Array,GT=W$;function $$(){var t=arguments.length;if(!t)return[];for(var e=Array(t-1),r=arguments[0],n=t;n--;)e[n-1]=arguments[n];return ns(tt(r)?Ki(r):[r],is(e,1))}var zc=$$;var j$="__lodash_hash_undefined__";function z$(t){return this.__data__.set(t,j$),this}var Y0=z$;function q$(t){return this.__data__.has(t)}var Z0=q$;function qp(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new Bo;++e<r;)this.add(t[e])}qp.prototype.add=qp.prototype.push=Y0;qp.prototype.has=Z0;var Gp=qp;function G$(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var X0=G$;function K$(t,e){return t.has(e)}var Kp=K$;var Q$=1,Y$=2;function Z$(t,e,r,n,i,o){var s=r&Q$,l=t.length,u=e.length;if(l!=u&&!(s&&u>l))return!1;var m=o.get(t),d=o.get(e);if(m&&d)return m==e&&d==t;var g=-1,y=!0,x=r&Y$?new Gp:void 0;for(o.set(t,e),o.set(e,t);++g<l;){var E=t[g],w=e[g];if(n)var H=s?n(w,E,g,e,t,o):n(E,w,g,t,e,o);if(H!==void 0){if(H)continue;y=!1;break}if(x){if(!X0(e,function(W,G){if(!Kp(x,G)&&(E===W||i(E,W,r,n,o)))return x.push(G)})){y=!1;break}}else if(!(E===w||i(E,w,r,n,o))){y=!1;break}}return o.delete(t),o.delete(e),y}var Qp=Z$;function X$(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}var J0=X$;function J$(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var ss=J$;var ej=1,tj=2,rj="[object Boolean]",nj="[object Date]",ij="[object Error]",oj="[object Map]",aj="[object Number]",sj="[object RegExp]",cj="[object Set]",lj="[object String]",uj="[object Symbol]",pj="[object ArrayBuffer]",mj="[object DataView]",eR=ur?ur.prototype:void 0,KT=eR?eR.valueOf:void 0;function fj(t,e,r,n,i,o,s){switch(r){case mj:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case pj:return!(t.byteLength!=e.byteLength||!o(new GT(t),new GT(e)));case rj:case nj:case aj:return Ga(+t,+e);case ij:return t.name==e.name&&t.message==e.message;case sj:case lj:return t==e+"";case oj:var l=J0;case cj:var u=n&ej;if(l||(l=ss),t.size!=e.size&&!u)return!1;var m=s.get(t);if(m)return m==e;n|=tj,s.set(t,e);var d=Qp(l(t),l(e),n,i,o,s);return s.delete(t),d;case uj:if(KT)return KT.call(t)==KT.call(e)}return!1}var tR=fj;var dj=1,gj=Object.prototype,hj=gj.hasOwnProperty;function yj(t,e,r,n,i,o){var s=r&dj,l=zT(t),u=l.length,m=zT(e),d=m.length;if(u!=d&&!s)return!1;for(var g=u;g--;){var y=l[g];if(!(s?y in e:hj.call(e,y)))return!1}var x=o.get(t),E=o.get(e);if(x&&E)return x==e&&E==t;var w=!0;o.set(t,e),o.set(e,t);for(var H=s;++g<u;){y=l[g];var W=t[y],G=e[y];if(n)var ie=s?n(G,W,y,e,t,o):n(W,G,y,t,e,o);if(!(ie===void 0?W===G||i(W,G,r,n,o):ie)){w=!1;break}H||(H=y=="constructor")}if(w&&!H){var se=t.constructor,ge=e.constructor;se!=ge&&"constructor"in t&&"constructor"in e&&!(typeof se=="function"&&se instanceof se&&typeof ge=="function"&&ge instanceof ge)&&(w=!1)}return o.delete(t),o.delete(e),w}var rR=yj;var Tj=1,nR="[object Arguments]",iR="[object Array]",Yp="[object Object]",xj=Object.prototype,oR=xj.hasOwnProperty;function Sj(t,e,r,n,i,o){var s=tt(t),l=tt(e),u=s?iR:qT(t),m=l?iR:qT(e);u=u==nR?Yp:u,m=m==nR?Yp:m;var d=u==Yp,g=m==Yp,y=u==m;if(y&&Wc(t)){if(!Wc(e))return!1;s=!0,d=!1}if(y&&!d)return o||(o=new as),s||Vp(t)?Qp(t,e,r,n,i,o):tR(t,e,u,r,n,i,o);if(!(r&Tj)){var x=d&&oR.call(t,"__wrapped__"),E=g&&oR.call(e,"__wrapped__");if(x||E){var w=x?t.value():t,H=E?e.value():e;return o||(o=new as),i(w,H,r,n,o)}}return y?(o||(o=new as),rR(t,e,r,n,i,o)):!1}var aR=Sj;function sR(t,e,r,n,i){return t===e?!0:t==null||e==null||!pr(t)&&!pr(e)?t!==t&&e!==e:aR(t,e,r,n,sR,i)}var cs=sR;var vj=1,bj=2;function wj(t,e,r,n){var i=r.length,o=i,s=!n;if(t==null)return!o;for(t=Object(t);i--;){var l=r[i];if(s&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++i<o;){l=r[i];var u=l[0],m=t[u],d=l[1];if(s&&l[2]){if(m===void 0&&!(u in t))return!1}else{var g=new as;if(n)var y=n(m,d,u,t,e,g);if(!(y===void 0?cs(d,m,vj|bj,n,g):y))return!1}}return!0}var cR=wj;function Ej(t){return t===t&&!Br(t)}var Zp=Ej;function _j(t){for(var e=Qi(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,Zp(i)]}return e}var lR=_j;function Rj(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var Xp=Rj;function kj(t){var e=lR(t);return e.length==1&&e[0][2]?Xp(e[0][0],e[0][1]):function(r){return r===t||cR(r,t,e)}}var uR=kj;function Aj(t,e){return t!=null&&e in Object(t)}var pR=Aj;function Pj(t,e,r){e=Wp(e,t);for(var n=-1,i=e.length,o=!1;++n<i;){var s=eo(e[n]);if(!(o=t!=null&&r(t,s)))break;t=t[s]}return o||++n!=i?o:(i=t==null?0:t.length,!!i&&Qa(i)&&qa(s,i)&&(tt(t)||Ya(t)))}var mR=Pj;function Lj(t,e){return t!=null&&mR(t,e,pR)}var fR=Lj;var Dj=1,Mj=2;function Fj(t,e){return Xa(t)&&Zp(e)?Xp(eo(t),e):function(r){var n=Vo(r,t);return n===void 0&&n===e?fR(r,t):cs(e,n,Dj|Mj)}}var dR=Fj;function Cj(t){return function(e){return e?.[t]}}var Jp=Cj;function Ij(t){return function(e){return rs(e,t)}}var gR=Ij;function Oj(t){return Xa(t)?Jp(eo(t)):gR(t)}var hR=Oj;function Nj(t){return typeof t=="function"?t:t==null?jn:typeof t=="object"?tt(t)?dR(t[0],t[1]):uR(t):hR(t)}var ls=Nj;function Uj(t){return function(e,r,n){for(var i=-1,o=Object(e),s=n(e),l=s.length;l--;){var u=s[t?l:++i];if(r(o[u],u,o)===!1)break}return e}}var yR=Uj;var Hj=yR(),TR=Hj;function Bj(t,e){return t&&TR(t,e,Qi)}var xR=Bj;function Vj(t,e){return function(r,n){if(r==null)return r;if(!zn(r))return t(r,n);for(var i=r.length,o=e?i:-1,s=Object(r);(e?o--:++o<i)&&n(s[o],o,s)!==!1;);return r}}var SR=Vj;var Wj=SR(xR),vR=Wj;function $j(t){return pr(t)&&zn(t)}var bR=$j;function jj(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}var wR=jj;function zj(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var em=zj;var ER=/[\\^$.*+?()[\]{}|]/g,qj=RegExp(ER.source);function Gj(t){return t=Pn(t),t&&qj.test(t)?t.replace(ER,"\\$&"):t}var Vr=Gj;var Kj=Math.max,Qj=Math.min;function Yj(t,e,r){var n=t==null?0:t.length;if(!n)return-1;var i=n-1;return r!==void 0&&(i=kp(r),i=r<0?Kj(n+i,0):Qj(i,n-1)),Np(t,ls(e,3),i,!0)}var $o=Yj;function Zj(t,e){var r=-1,n=zn(t)?Array(t.length):[];return vR(t,function(i,o,s){n[++r]=e(i,o,s)}),n}var _R=Zj;var Xj="Expected a function",Jj=8,e3=32,t3=128,r3=256;function n3(t){return F0(function(e){var r=e.length,n=r,i=Gi.prototype.thru;for(t&&e.reverse();n--;){var o=e[n];if(typeof o!="function")throw new TypeError(Xj);if(i&&!s&&za(o)=="wrapper")var s=new Gi([],!0)}for(n=s?n:r;++n<r;){o=e[n];var l=za(o),u=l=="wrapper"?Fp(o):void 0;u&&NT(u[0])&&u[1]==(t3|Jj|e3|r3)&&!u[4].length&&u[9]==1?s=s[za(u[0])].apply(s,u[3]):s=o.length==1&&NT(o)?s[l]():s.thru(o)}return function(){var m=arguments,d=m[0];if(s&&m.length==1&&tt(d))return s.plant(d).value();for(var g=0,y=r?e[g].apply(this,m):d;++g<r;)y=e[g].call(this,y);return y}})}var RR=n3;var i3=RR(),QT=i3;function o3(t,e){return sn(e,function(r){return t[r]})}var kR=o3;function a3(t){return t==null?[]:kR(t,Qi(t))}var AR=a3;function s3(t,e){return cs(t,e)}var _i=s3;function c3(t,e){return t<e}var PR=c3;function l3(t,e,r){for(var n=-1,i=t.length;++n<i;){var o=t[n],s=e(o);if(s!=null&&(l===void 0?s===s&&!Hr(s):r(s,l)))var l=s,u=o}return u}var LR=l3;function u3(t,e){for(var r,n=-1,i=t.length;++n<i;){var o=e(t[n]);o!==void 0&&(r=r===void 0?o:r+o)}return r}var DR=u3;function p3(t){return t&&t.length?LR(t,jn,PR):void 0}var YT=p3;function m3(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}var MR=m3;function f3(t,e){if(t!==e){var r=t!==void 0,n=t===null,i=t===t,o=Hr(t),s=e!==void 0,l=e===null,u=e===e,m=Hr(e);if(!l&&!m&&!o&&t>e||o&&s&&u&&!l&&!m||n&&s&&u||!r&&u||!i)return 1;if(!n&&!o&&!m&&t<e||m&&r&&i&&!n&&!o||l&&r&&i||!s&&i||!u)return-1}return 0}var FR=f3;function d3(t,e,r){for(var n=-1,i=t.criteria,o=e.criteria,s=i.length,l=r.length;++n<s;){var u=FR(i[n],o[n]);if(u){if(n>=l)return u;var m=r[n];return u*(m=="desc"?-1:1)}}return t.index-e.index}var CR=d3;function g3(t,e,r){e.length?e=sn(e,function(o){return tt(o)?function(s){return rs(s,o.length===1?o[0]:o)}:o}):e=[jn];var n=-1;e=sn(e,Za(ls));var i=_R(t,function(o,s,l){var u=sn(e,function(m){return m(o)});return{criteria:u,index:++n,value:o}});return MR(i,function(o,s){return CR(o,s,r)})}var IR=g3;var h3=9007199254740991,y3=Math.floor;function T3(t,e){var r="";if(!t||e<1||e>h3)return r;do e%2&&(r+=t),e=y3(e/2),e&&(t+=t);while(e);return r}var OR=T3;function x3(t,e,r,n){for(var i=r-1,o=t.length;++i<o;)if(n(t[i],e))return i;return-1}var NR=x3;var S3=Array.prototype,UR=S3.splice;function v3(t,e,r,n){var i=n?NR:Up,o=-1,s=e.length,l=t;for(t===e&&(e=Ki(e)),r&&(l=sn(t,Za(r)));++o<s;)for(var u=0,m=e[o],d=r?r(m):m;(u=i(l,d,u,n))>-1;)l!==t&&UR.call(l,u,1),UR.call(t,u,1);return t}var HR=v3;function b3(t,e){return t&&t.length&&e&&e.length?HR(t,e):t}var BR=b3;var w3=Ka(BR),mr=w3;var E3=Math.floor,_3=Math.random;function R3(t,e){return t+E3(_3()*(e-t+1))}var VR=R3;var k3=Math.ceil,A3=Math.max;function P3(t,e,r,n){for(var i=-1,o=A3(k3((e-t)/(r||1)),0),s=Array(o);o--;)s[n?o:++i]=t,t+=r;return s}var WR=P3;function L3(t){return function(e,r,n){return n&&typeof n!="number"&&Ho(e,r,n)&&(r=n=void 0),e=Wa(e),r===void 0?(r=e,e=0):r=Wa(r),n=n===void 0?e<r?1:-1:Wa(n),WR(e,r,n,t)}}var $R=L3;var D3=$R(),ZT=D3;function M3(t,e,r){return(r?Ho(t,e,r):e===void 0)?e=1:e=kp(e),OR(Pn(t),e)}var XT=M3;function F3(t,e){var r=-1,n=t.length,i=n-1;for(e=e===void 0?n:e;++r<e;){var o=VR(r,i),s=t[o];t[o]=t[r],t[r]=s}return t.length=e,t}var tm=F3;function C3(t){return tm(Ki(t))}var jR=C3;function I3(t){return tm(AR(t))}var zR=I3;function O3(t){var e=tt(t)?jR:zR;return e(t)}var JT=O3;var N3=Ka(function(t,e){if(t==null)return[];var r=e.length;return r>1&&Ho(t,e[0],e[1])?e=[]:r>2&&Ho(e[0],e[1],e[2])&&(e=[e[0]]),IR(t,is(e,1),[])}),ex=N3;function U3(t,e){return t&&t.length?DR(t,ls(e,2)):0}var rm=U3;var H3=1/0,B3=to&&1/ss(new to([,-0]))[1]==H3?function(t){return new to(t)}:Mp,qR=B3;var V3=200;function W3(t,e,r){var n=-1,i=Z_,o=t.length,s=!0,l=[],u=l;if(r)s=!1,i=wR;else if(o>=V3){var m=e?null:qR(t);if(m)return ss(m);s=!1,i=Kp,u=new Gp}else u=e?[]:l;e:for(;++n<o;){var d=t[n],g=e?e(d):d;if(d=r||d!==0?d:0,s&&g===g){for(var y=u.length;y--;)if(u[y]===g)continue e;e&&u.push(g),l.push(d)}else i(u,g,r)||(u!==l&&u.push(g),l.push(d))}return l}var nm=W3;function $3(t){return t&&t.length?nm(t):[]}var jo=$3;function j3(t,e){return e=typeof e=="function"?e:void 0,t&&t.length?nm(t,void 0,e):[]}var qc=j3;var z3=Math.max;function q3(t){if(!(t&&t.length))return[];var e=0;return t=$p(t,function(r){if(bR(r))return e=z3(r.length,e),!0}),Bp(e,function(r){return sn(t,Jp(r))})}var GR=q3;var G3=Ka(GR),Ft=G3;var im=class{constructor(){this.commands={clipboardPaste:void 0,clipboardCopy:void 0,toggleLineComment:void 0,indentLine:void 0,outdentLine:void 0,rename:void 0,quickFix:void 0,revealDefinition:void 0,revealTypeDefinition:void 0,showHover:void 0,showDebugHover:void 0,extractVariable:void 0,fold:void 0,highlight:{acceptsLocation:!0},unfold:void 0,showReferences:void 0,insertLineAfter:void 0,gitAccept:void 0,gitRevert:void 0,gitStage:void 0,gitUnstage:void 0}}};var Gc=class{constructor(){this.clipboardContents=""}async readText(){return this.clipboardContents}async writeText(e){this.clipboardContents=e}};var tr=class{constructor(){this.listeners=[];this.notifyListeners=(...e)=>{this.listeners.forEach(r=>r(...e))};this.registerListener=this.registerListener.bind(this)}registerListener(e){return this.listeners.push(e),{dispose:()=>{mr(this.listeners,e)}}}};var om={tokenHatSplittingMode:{preserveCase:!1,lettersToPreserve:[],symbolsToPreserve:[]},wordSeparators:["_"],decorationDebounceDelayMs:50,experimental:{snippetsDir:void 0,hatStability:"balanced",keyboardTargetFollowsSelection:!1},commandHistory:!1,debug:!1};var Kc=class{constructor(){this.notifier=new tr;this.mocks={...om};this.scopes=[];this.onDidChangeConfiguration=this.notifier.registerListener;this.onDidChangeConfiguration=this.onDidChangeConfiguration.bind(this)}getOwnConfiguration(e,r){if(r!=null){for(let{scope:n,values:i}of this.scopes)if(Q3(n,r))return Vo(i,e)??Vo(this.mocks,e)}return Vo(this.mocks,e)}mockConfiguration(e,r){this.mocks[e]=r,this.notifier.notifyListeners()}mockConfigurationScope(e,r,n=!1){this.scopes.push({scope:e,values:r}),n||this.notifier.notifyListeners()}};function Q3(t,e){return t.languageId===e.languageId}var am={hideInferenceWarning:!1,tutorialProgress:{}};var Qc=class{constructor(){this.data={...am}}get(e){return this.data[e]}set(e,r){return this.data[e]=r,Promise.resolve()}};var Yc=class{async showMessage(e,r,n,...i){}};var sm=class{constructor(){this.configuration=new Kc;this.messages=new Yc;this.keyValueStore=new Qc;this.clipboard=new Gc;this.capabilities=new im;this.runMode="test";this.cursorlessVersion="0.0.0";this.workspaceFolders=void 0;this.disposables=[];this.quickPickReturnValue=void 0;this.onDidOpenTextDocument=us;this.onDidCloseTextDocument=us;this.onDidChangeActiveTextEditor=us;this.onDidChangeVisibleTextEditors=us;this.onDidChangeTextEditorSelection=us;this.onDidChangeTextEditorVisibleRanges=us}async flashRanges(e){}async setHighlightRanges(e,r,n){}mockAssetsRoot(e){this.assetsRoot_=e}get assetsRoot(){if(this.assetsRoot_==null)throw Error("Field `assetsRoot` has not yet been mocked");return this.assetsRoot_}get activeTextEditor(){throw Error("Not implemented")}get activeEditableTextEditor(){throw Error("Not implemented")}get visibleTextEditors(){throw Error("Not implemented")}get visibleNotebookEditors(){throw Error("Not implemented")}getEditableTextEditor(e){throw Error("Not implemented")}findInDocument(e,r){throw Error("Not implemented")}findInWorkspace(e){throw Error("Not implemented")}openTextDocument(e){throw Error("Not implemented")}openUntitledTextDocument(e){throw Error("Not implemented")}setQuickPickReturnValue(e){this.quickPickReturnValue=e}async showQuickPick(e,r){return this.quickPickReturnValue}showInputBox(e){throw Error("Not implemented")}executeCommand(e,...r){throw new Error("Method not implemented.")}onDidChangeTextDocument(e){throw Error("Not implemented")}disposeOnExit(...e){return this.disposables.push(...e),()=>mr(this.disposables,...e)}exit(){this.disposables.forEach(e=>e.dispose())}};function us(){return{dispose(){}}}var Re=class t{constructor(e,r){this.line=e,this.character=r}isEqual(e){return this.line===e.line&&this.character===e.character}isBefore(e){return this.line<e.line?!0:this.line>e.line?!1:this.character<e.character}isAfter(e){return this.line>e.line?!0:this.line<e.line?!1:this.character>e.character}isBeforeOrEqual(e){return this.isEqual(e)||this.isBefore(e)}isAfterOrEqual(e){return this.isEqual(e)||this.isAfter(e)}compareTo(e){return this.isBefore(e)?-1:this.isAfter(e)?1:0}with(e,r){return new t(e??this.line,r??this.character)}translate(e,r){return new t(this.line+(e??0),this.character+(r??0))}toEmptyRange(){return new Z(this,this)}concise(){return`${this.line}:${this.character}`}conciseOneBased(){return`${this.line+1}:${this.character+1}`}toString(){return this.concise()}};function KR(t,e,r){return t.positionAt(t.offsetAt(e)+r)}var Z=class t{constructor(...e){let[r,n]=e.length===2?e:[new Re(e[0],e[1]),new Re(e[2],e[3])];r.isBefore(n)?(this.start=r,this.end=n):(this.start=n,this.end=r)}get isEmpty(){return this.start.isEqual(this.end)}get isSingleLine(){return this.start.line===this.end.line}isRangeEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}contains(e){let[r,n]=e instanceof Re?[e,e]:[e.start,e.end];return r.isAfterOrEqual(this.start)&&n.isBeforeOrEqual(this.end)}intersection(e){let r=this.start.isAfter(e.start)?this.start:e.start,n=this.end.isBefore(e.end)?this.end:e.end;return r.isBeforeOrEqual(n)?new t(r,n):void 0}union(e){return new t(this.start.isBefore(e.start)?this.start:e.start,this.end.isAfter(e.end)?this.end:e.end)}with(e,r){return new t(e??this.start,r??this.end)}toSelection(e){return e?new ut(this.end,this.start):new ut(this.start,this.end)}concise(){return`${this.start.concise()}-${this.end.concise()}`}conciseOneBased(){return`${this.start.conciseOneBased()}-${this.end.conciseOneBased()}`}toString(){return`${this.start.concise()}-${this.end.concise()}`}};function Y3(t){let{source:e,flags:r}=t;return new RegExp(`(${e})$`,r.replace("m",""))}function Z3(t){let{source:e,flags:r}=t;return new RegExp(`^(${e})`,r.replace("m",""))}function QR(t){let e=new Map;function r(n){let i=e.get(n);return i==null&&(i=t(n),e.set(n,i)),i}return r}var cm=QR(Y3),lm=QR(Z3);function tx(t,e){return e.lastIndex=0,t.matchAll(e)}function cn(t,e,r){return Array.from(tx(t,e),r)}function zo(t,e){return t.lastIndex=0,t.test(e)}function YR(t,e){return t.lastIndex=0,e.match(t)}function Zc(t,e){return cn(t,e,r=>({index:r.index,text:r[0]}))}var ps=class{constructor(e){this.original=e;this.configuration=e.configuration,this.keyValueStore=e.keyValueStore,this.clipboard=e.clipboard,this.messages=e.messages,this.capabilities=e.capabilities}flashRanges(e){return this.original.flashRanges(e)}setHighlightRanges(e,r,n){return this.original.setHighlightRanges(e,r,n)}onDidOpenTextDocument(e,r,n){return this.original.onDidOpenTextDocument(e,r,n)}onDidCloseTextDocument(e,r,n){return this.original.onDidCloseTextDocument(e,r,n)}onDidChangeActiveTextEditor(e,r,n){return this.original.onDidChangeActiveTextEditor(e,r,n)}onDidChangeVisibleTextEditors(e,r,n){return this.original.onDidChangeVisibleTextEditors(e,r,n)}onDidChangeTextEditorSelection(e,r,n){return this.original.onDidChangeTextEditorSelection(e,r,n)}onDidChangeTextEditorVisibleRanges(e,r,n){return this.original.onDidChangeTextEditorVisibleRanges(e,r,n)}get activeTextEditor(){return this.original.activeTextEditor}get activeEditableTextEditor(){return this.original.activeEditableTextEditor}get visibleTextEditors(){return this.original.visibleTextEditors}get visibleNotebookEditors(){return this.original.visibleNotebookEditors}get cursorlessVersion(){return this.original.cursorlessVersion}get assetsRoot(){return this.original.assetsRoot}get runMode(){return this.original.runMode}get workspaceFolders(){return this.original.workspaceFolders}findInDocument(e,r){return this.original.findInDocument(e,r)}findInWorkspace(e){return this.original.findInWorkspace(e)}openTextDocument(e){return this.original.openTextDocument(e)}openUntitledTextDocument(e){return this.original.openUntitledTextDocument(e)}showQuickPick(e,r){return this.original.showQuickPick(e,r)}showInputBox(e){return this.original.showInputBox(e)}getEditableTextEditor(e){return this.original.getEditableTextEditor(e)}executeCommand(e,...r){return this.original.executeCommand(e,...r)}onDidChangeTextDocument(e){return this.original.onDidChangeTextDocument(e)}disposeOnExit(...e){return this.original.disposeOnExit(...e)}};var um=class extends ps{constructor(r,n,i,o){super(r);this.fakeIde=n;this.isSilent=i;this.cursorlessSnippetsDir=o;this.messages=i?n.messages:r.messages,this.configuration=n.configuration,this.keyValueStore=n.keyValueStore,this.initializeConfiguration()}initializeConfiguration(){this.configuration.mockConfigurationScope({languageId:"css"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfigurationScope({languageId:"scss"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfigurationScope({languageId:"shellscript"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfiguration("experimental",{hatStability:this.configuration.getOwnConfiguration("experimental.hatStability"),snippetsDir:this.cursorlessSnippetsDir,keyboardTargetFollowsSelection:!1})}flashRanges(r){return this.isSilent?this.fakeIde.flashRanges(r):super.flashRanges(r)}setHighlightRanges(r,n,i){return this.isSilent?this.fakeIde.setHighlightRanges(r,n,i):super.setHighlightRanges(r,n,i)}async showQuickPick(r,n){return this.isSilent?this.fakeIde.showQuickPick(r,n):super.showQuickPick(r,n)}};function qo(t,e,r,...n){return t.showMessage("warning",e,r,...n)}function gt(t,e,r,...n){return t.showMessage("error",e,r,...n)}var he=(n=>(n[n.supported=0]="supported",n[n.unsupported=1]="unsupported",n[n.notApplicable=2]="notApplicable",n))(he||{});var{supported:ee,unsupported:X3,notApplicable:$}=he,rx={list:ee,disqualifyDelimiter:ee,switchStatementSubject:ee,ifStatement:ee,statement:ee,"statement.class":ee,"statement.enum":ee,"statement.field.class":ee,"statement.iteration.document":ee,"statement.iteration.class":ee,"statement.iteration.block":ee,class:ee,"class.iteration.document":ee,className:ee,"className.iteration.document":ee,"collectionItem.unenclosed":ee,"collectionItem.unenclosed.iteration":ee,namedFunction:ee,functionName:ee,"functionName.iteration.document":ee,"namedFunction.iteration.document":ee,functionCall:ee,functionCallee:ee,"argument.actual.singleLine":ee,"argument.actual.multiLine":ee,"argument.actual.iteration":ee,"argument.actual.method.singleLine":ee,"argument.actual.method.multiLine":ee,"argument.actual.method.iteration":ee,"argument.formal.singleLine":ee,"argument.formal.multiLine":ee,"argument.formal.iteration":ee,"argumentList.actual.empty":ee,"argumentList.actual.singleLine":ee,"argumentList.actual.multiLine":ee,"argumentList.actual.method.empty":ee,"argumentList.actual.method.singleLine":ee,"argumentList.actual.method.multiLine":ee,"argumentList.formal.empty":ee,"argumentList.formal.singleLine":ee,"argumentList.formal.multiLine":ee,"branch.if":ee,"branch.if.elif.else":ee,"branch.if.else":ee,"branch.if.iteration":ee,"branch.switchCase":ee,"branch.switchCase.iteration":ee,"branch.ternary":ee,"branch.ternary.iteration":ee,"comment.line":ee,"comment.block":ee,"string.singleLine":ee,"textFragment.comment.line":ee,"textFragment.comment.block":ee,"textFragment.string.singleLine":ee,"condition.if":ee,"condition.while":ee,"condition.doWhile":ee,"condition.for":ee,"condition.ternary":ee,"condition.switchCase":ee,"condition.switchCase.iteration":ee,"name.assignment":ee,"name.variable":ee,"name.function":ee,"name.class":ee,"name.enum":ee,"name.field.class":ee,"name.field.enum":ee,"name.argument.formal":ee,"name.argument.formal.iteration":ee,"name.iteration.block":ee,"name.iteration.class":ee,"name.iteration.enum":ee,"name.iteration.document":ee,"value.assignment":ee,"value.variable":ee,"value.return":ee,"value.field.enum":ee,"value.iteration.block":ee,"value.iteration.class":ee,"value.iteration.enum":ee,"value.iteration.document":ee,"type.variable":ee,"type.argument.formal":ee,"type.argument.formal.iteration":ee,"type.field.class":ee,"type.enum":ee,"type.cast":ee,"type.class":ee,"type.return":ee,"type.iteration.block":ee,"type.iteration.class":ee,"type.iteration.document":ee,"interior.class":ee,"interior.enum":ee,"interior.function":ee,"interior.if":ee,"interior.switch":ee,"interior.switchCase":ee,"interior.ternary":ee,"interior.for":ee,"interior.while":ee,"interior.doWhile":ee,fieldAccess:X3,element:$,tags:$,startTag:$,endTag:$,"interior.element":$,"textFragment.element":$,"interior.resource":$,"type.resource":$,"type.resource.iteration":$,"name.resource":$,"name.resource.iteration":$,"value.resource":$,"value.resource.iteration":$,map:$,"key.mapPair":$,"key.mapPair.iteration":$,"value.mapPair":$,"value.mapPair.iteration":$,"name.argument.actual":$,"name.argument.actual.iteration":$,"value.argument.actual":$,"value.argument.actual.iteration":$,"string.multiLine":$,"textFragment.string.multiLine":$,section:$,"section.iteration.document":$,"section.iteration.parent":$,"name.assignment.pattern":$,"name.variable.pattern":$,"value.variable.pattern":$,command:$,"name.command":$,"value.command":$,"interior.command":$,"type.alias":$,"value.typeAlias":$,notebookCell:$,"interior.cell":$,"class.iteration.block":$,"className.iteration.block":$,"functionName.iteration.block":$,"namedFunction.iteration.block":$,"branch.try":$,"branch.try.iteration":$,"interior.try":$,"argument.catch":$,"name.argument.catch":$,"type.argument.catch":$,"statement.interface":$,"statement.field.interface":$,"statement.iteration.interface":$,"name.interface":$,"name.field.interface":$,"name.iteration.interface":$,"type.interface":$,"type.field.interface":$,"type.iteration.interface":$,"interior.interface":$,"key.attribute":$,"value.attribute":$,"value.yield":$,"value.field.class":$,"interior.static":$,"branch.loop":$,"branch.loop.iteration":$,environment:$,pairDelimiter:$,regularExpression:$,selector:$,unit:$},J3={...rx,attribute:$,"argument.formal.lambda.iteration":$,"argument.formal.lambda.singleLine":$,"argument.formal.lambda.multiLine":$,"argumentList.formal.lambda.empty":$,"argumentList.formal.lambda.multiLine":$,"argumentList.formal.lambda.singleLine":$,"interior.lambda.block":$,"interior.lambda.expression":$,"value.return.lambda":$,anonymousFunction:$,"argument.actual.constructor.iteration":$,"argument.actual.constructor.singleLine":$,"argument.actual.constructor.multiLine":$,"argument.formal.constructor.iteration":$,"argument.formal.constructor.singleLine":$,"argument.formal.constructor.multiLine":$,"argumentList.actual.constructor.empty":$,"argumentList.actual.constructor.multiLine":$,"argumentList.actual.constructor.singleLine":$,"argumentList.formal.constructor.empty":$,"argumentList.formal.constructor.multiLine":$,"argumentList.formal.constructor.singleLine":$,"functionCall.constructor":$,"functionCallee.constructor":$,"functionName.constructor":$,"name.argument.formal.constructor.iteration":$,"name.argument.formal.constructor":$,"name.constructor":$,"namedFunction.constructor":$,"type.argument.formal.constructor.iteration":$,"type.argument.formal.constructor":$,"value.argument.formal.constructor.iteration":$,"value.argument.formal.constructor":$,"interior.constructor":$,"argument.formal.method.iteration":$,"argument.formal.method.singleLine":$,"argument.formal.method.multiLine":$,"argumentList.formal.method.empty":$,"argumentList.formal.method.multiLine":$,"argumentList.formal.method.singleLine":$,"functionName.method.iteration.class":$,"functionName.method":$,"name.argument.formal.method.iteration":$,"name.argument.formal.method":$,"name.method":$,"namedFunction.method.iteration.class":$,"namedFunction.method":$,"type.argument.formal.method.iteration":$,"type.argument.formal.method":$,"value.argument.formal.method.iteration":$,"value.argument.formal.method":$,"interior.method":$,"name.foreach":$,"type.foreach":$,"value.foreach":$,"interior.foreach":$,"value.argument.formal":$,"value.argument.formal.iteration":$,"type.typeArgument":$,"type.typeArgument.iteration":$,"name.namespace":$,"interior.namespace":$};var{supported:Pae,unsupported:Lae,notApplicable:Dae}=he;var{supported:pe,notApplicable:ZR}=he,ez={...rx,attribute:pe,anonymousFunction:pe,"branch.try":pe,"branch.try.iteration":pe,"argument.actual.constructor.singleLine":pe,"argument.actual.constructor.multiLine":pe,"argument.actual.constructor.iteration":pe,"argument.formal.method.singleLine":pe,"argument.formal.method.multiLine":pe,"argument.formal.method.iteration":pe,"argument.formal.constructor.singleLine":pe,"argument.formal.constructor.multiLine":pe,"argument.formal.constructor.iteration":pe,"argument.formal.lambda.singleLine":pe,"argument.formal.lambda.multiLine":pe,"argument.formal.lambda.iteration":pe,"argumentList.actual.constructor.empty":pe,"argumentList.actual.constructor.singleLine":pe,"argumentList.actual.constructor.multiLine":pe,"argumentList.formal.constructor.empty":pe,"argumentList.formal.constructor.singleLine":pe,"argumentList.formal.constructor.multiLine":pe,"argumentList.formal.lambda.empty":pe,"argumentList.formal.lambda.singleLine":pe,"argumentList.formal.lambda.multiLine":pe,"argumentList.formal.method.empty":pe,"argumentList.formal.method.singleLine":pe,"argumentList.formal.method.multiLine":pe,"functionCall.constructor":pe,"functionCallee.constructor":pe,"functionName.constructor":pe,"functionName.method":pe,"functionName.method.iteration.class":pe,"namedFunction.method":pe,"namedFunction.method.iteration.class":pe,"namedFunction.constructor":pe,"name.argument.formal.method":pe,"name.argument.formal.method.iteration":pe,"name.argument.formal.constructor":pe,"name.argument.formal.constructor.iteration":pe,"name.constructor":pe,"name.foreach":pe,"name.method":pe,"name.namespace":pe,"value.argument.formal":pe,"value.argument.formal.iteration":pe,"value.argument.formal.method":pe,"value.argument.formal.method.iteration":pe,"value.argument.formal.constructor":pe,"value.argument.formal.constructor.iteration":pe,"value.foreach":pe,"value.field.class":pe,"type.argument.formal.method":pe,"type.argument.formal.method.iteration":pe,"type.argument.formal.constructor":pe,"type.argument.formal.constructor.iteration":pe,"type.foreach":pe,"type.typeArgument":pe,"type.typeArgument.iteration":pe,"interior.lambda.block":pe,"interior.try":pe,"interior.foreach":pe,"interior.constructor":pe,"interior.method":pe,"interior.namespace":pe,"interior.lambda.expression":ZR,"value.return.lambda":ZR};var{supported:Nae,unsupported:Uae,notApplicable:Hae}=he;var{supported:ct,notApplicable:k}=he,nx={"comment.block":ct,"string.singleLine":ct,disqualifyDelimiter:ct,map:ct,functionCall:ct,functionCallee:ct,"argument.actual.singleLine":ct,"argument.actual.iteration":ct,"argumentList.actual.empty":ct,"argumentList.actual.singleLine":ct,"argumentList.actual.multiLine":ct,"name.iteration.document":ct,"name.iteration.block":ct,"textFragment.comment.block":ct,"textFragment.string.singleLine":ct,"key.mapPair":ct,"key.mapPair.iteration":ct,"value.mapPair":ct,"value.mapPair.iteration":ct,"collectionItem.unenclosed":ct,"collectionItem.unenclosed.iteration":ct,statement:ct,"statement.iteration.document":ct,selector:ct,unit:ct,class:k,"class.iteration.block":k,"class.iteration.document":k,className:k,"className.iteration.block":k,"className.iteration.document":k,"name.class":k,"name.field.class":k,"name.iteration.class":k,"statement.class":k,"statement.field.class":k,"statement.iteration.class":k,"type.class":k,"type.field.class":k,"type.iteration.class":k,"value.field.class":k,"value.iteration.class":k,"interior.class":k,"namedFunction.method.iteration.class":k,"functionName.method.iteration.class":k,"statement.interface":k,"statement.field.interface":k,"statement.iteration.interface":k,"name.interface":k,"name.field.interface":k,"name.iteration.interface":k,"type.interface":k,"type.field.interface":k,"type.iteration.interface":k,"interior.interface":k,"statement.enum":k,"name.enum":k,"name.field.enum":k,"name.iteration.enum":k,"value.field.enum":k,"value.iteration.enum":k,"type.enum":k,"interior.enum":k,command:k,"name.command":k,"value.command":k,"interior.command":k,"branch.try":k,"branch.try.iteration":k,"interior.try":k,"argument.catch":k,"name.argument.catch":k,"type.argument.catch":k,anonymousFunction:k,"argument.actual.multiLine":k,"argument.actual.constructor.iteration":k,"argument.actual.constructor.singleLine":k,"argument.actual.constructor.multiLine":k,"argument.actual.method.iteration":k,"argument.actual.method.singleLine":k,"argument.actual.method.multiLine":k,"argument.formal.constructor.iteration":k,"argument.formal.constructor.singleLine":k,"argument.formal.constructor.multiLine":k,"argument.formal.iteration":k,"argument.formal.method.iteration":k,"argument.formal.method.singleLine":k,"argument.formal.method.multiLine":k,"argument.formal.singleLine":k,"argument.formal.multiLine":k,"argument.formal.lambda.singleLine":k,"argument.formal.lambda.multiLine":k,"argument.formal.lambda.iteration":k,"argumentList.actual.method.empty":k,"argumentList.actual.method.singleLine":k,"argumentList.actual.method.multiLine":k,"argumentList.actual.constructor.empty":k,"argumentList.actual.constructor.singleLine":k,"argumentList.actual.constructor.multiLine":k,"argumentList.formal.empty":k,"argumentList.formal.singleLine":k,"argumentList.formal.multiLine":k,"argumentList.formal.lambda.empty":k,"argumentList.formal.lambda.singleLine":k,"argumentList.formal.lambda.multiLine":k,"argumentList.formal.method.empty":k,"argumentList.formal.method.singleLine":k,"argumentList.formal.method.multiLine":k,"argumentList.formal.constructor.empty":k,"argumentList.formal.constructor.singleLine":k,"argumentList.formal.constructor.multiLine":k,attribute:k,"branch.if.iteration":k,"branch.if":k,"branch.if.elif.else":k,"branch.if.else":k,"branch.loop":k,"branch.loop.iteration":k,"branch.switchCase.iteration":k,"branch.switchCase":k,"branch.ternary":k,"branch.ternary.iteration":k,"comment.line":k,"condition.doWhile":k,"condition.for":k,"condition.if":k,"condition.switchCase.iteration":k,"condition.switchCase":k,"condition.ternary":k,"condition.while":k,element:k,endTag:k,environment:k,fieldAccess:k,"functionCall.constructor":k,"functionCallee.constructor":k,"functionName.constructor":k,"functionName.iteration.block":k,"functionName.iteration.document":k,"functionName.method":k,functionName:k,ifStatement:k,"interior.cell":k,"interior.element":k,"interior.function":k,"interior.constructor":k,"interior.method":k,"interior.if":k,"interior.lambda.block":k,"interior.lambda.expression":k,"interior.for":k,"interior.foreach":k,"interior.while":k,"interior.doWhile":k,"interior.resource":k,"interior.switch":k,"interior.switchCase":k,"interior.ternary":k,"interior.namespace":k,"interior.static":k,"key.attribute":k,list:k,"name.argument.actual.iteration":k,"name.argument.actual":k,"name.argument.formal.constructor.iteration":k,"name.argument.formal.constructor":k,"name.argument.formal.iteration":k,"name.argument.formal.method.iteration":k,"name.argument.formal.method":k,"name.argument.formal":k,"name.assignment.pattern":k,"name.assignment":k,"name.namespace":k,"name.constructor":k,"name.foreach":k,"name.function":k,"name.method":k,"name.resource.iteration":k,"name.resource":k,"name.variable.pattern":k,"name.variable":k,"namedFunction.constructor":k,"namedFunction.iteration.block":k,"namedFunction.iteration.document":k,"namedFunction.method":k,namedFunction:k,notebookCell:k,pairDelimiter:k,regularExpression:k,"section.iteration.document":k,"section.iteration.parent":k,section:k,startTag:k,"statement.iteration.block":k,"string.multiLine":k,switchStatementSubject:k,tags:k,"textFragment.comment.line":k,"textFragment.element":k,"textFragment.string.multiLine":k,"type.alias":k,"type.argument.formal.constructor.iteration":k,"type.argument.formal.constructor":k,"type.argument.formal.iteration":k,"type.argument.formal.method.iteration":k,"type.argument.formal.method":k,"type.argument.formal":k,"type.cast":k,"type.foreach":k,"type.resource":k,"type.resource.iteration":k,"type.return":k,"type.typeArgument.iteration":k,"type.typeArgument":k,"type.variable":k,"type.iteration.block":k,"type.iteration.document":k,"value.argument.actual.iteration":k,"value.argument.actual":k,"value.argument.formal.constructor.iteration":k,"value.argument.formal.constructor":k,"value.argument.formal.iteration":k,"value.argument.formal.method.iteration":k,"value.argument.formal.method":k,"value.argument.formal":k,"value.assignment":k,"value.attribute":k,"value.foreach":k,"value.resource.iteration":k,"value.resource":k,"value.return.lambda":k,"value.return":k,"value.typeAlias":k,"value.variable.pattern":k,"value.variable":k,"value.yield":k,"value.iteration.block":k,"value.iteration.document":k};var{supported:jae,unsupported:zae,notApplicable:qae}=he;var{supported:Qae,unsupported:Yae,notApplicable:Zae}=he;var{supported:ese,notApplicable:tse}=he;var{supported:ise,unsupported:ose,notApplicable:ase}=he;var{supported:I,notApplicable:le}=he,ix={list:I,map:I,regularExpression:I,switchStatementSubject:I,fieldAccess:I,disqualifyDelimiter:I,pairDelimiter:I,"collectionItem.unenclosed":I,"collectionItem.unenclosed.iteration":I,"textFragment.string.singleLine":I,"textFragment.string.multiLine":I,"textFragment.comment.line":I,"textFragment.comment.block":I,ifStatement:I,statement:I,"statement.class":I,"statement.field.class":I,"statement.iteration.document":I,"statement.iteration.class":I,"statement.iteration.block":I,class:I,"class.iteration.document":I,className:I,"className.iteration.document":I,anonymousFunction:I,namedFunction:I,"namedFunction.iteration.document":I,"namedFunction.method":I,"namedFunction.method.iteration.class":I,"namedFunction.constructor":I,functionName:I,"functionName.iteration.document":I,"functionName.method":I,"functionName.method.iteration.class":I,"functionName.constructor":I,functionCall:I,"functionCall.constructor":I,functionCallee:I,"functionCallee.constructor":I,"argument.actual.singleLine":I,"argument.actual.multiLine":I,"argument.actual.iteration":I,"argument.actual.method.singleLine":I,"argument.actual.method.multiLine":I,"argument.actual.method.iteration":I,"argument.actual.constructor.singleLine":I,"argument.actual.constructor.multiLine":I,"argument.actual.constructor.iteration":I,"argument.formal.singleLine":I,"argument.formal.multiLine":I,"argument.formal.iteration":I,"argument.formal.method.singleLine":I,"argument.formal.method.multiLine":I,"argument.formal.method.iteration":I,"argument.formal.constructor.singleLine":I,"argument.formal.constructor.multiLine":I,"argument.formal.constructor.iteration":I,"argument.formal.lambda.singleLine":I,"argument.formal.lambda.multiLine":I,"argument.formal.lambda.iteration":I,"argument.catch":I,"argumentList.actual.empty":I,"argumentList.actual.singleLine":I,"argumentList.actual.multiLine":I,"argumentList.actual.method.empty":I,"argumentList.actual.method.singleLine":I,"argumentList.actual.method.multiLine":I,"argumentList.actual.constructor.empty":I,"argumentList.actual.constructor.singleLine":I,"argumentList.actual.constructor.multiLine":I,"argumentList.formal.empty":I,"argumentList.formal.singleLine":I,"argumentList.formal.multiLine":I,"argumentList.formal.lambda.empty":I,"argumentList.formal.lambda.singleLine":I,"argumentList.formal.lambda.multiLine":I,"argumentList.formal.method.empty":I,"argumentList.formal.method.singleLine":I,"argumentList.formal.method.multiLine":I,"argumentList.formal.constructor.empty":I,"argumentList.formal.constructor.singleLine":I,"argumentList.formal.constructor.multiLine":I,"comment.line":I,"comment.block":I,"string.singleLine":I,"string.multiLine":I,"branch.if":I,"branch.if.elif.else":I,"branch.if.else":I,"branch.if.iteration":I,"branch.try":I,"branch.try.iteration":I,"branch.switchCase":I,"branch.switchCase.iteration":I,"branch.ternary":I,"branch.ternary.iteration":I,"condition.if":I,"condition.while":I,"condition.doWhile":I,"condition.for":I,"condition.ternary":I,"condition.switchCase":I,"condition.switchCase.iteration":I,"name.argument.formal":I,"name.argument.formal.iteration":I,"name.argument.formal.method":I,"name.argument.formal.method.iteration":I,"name.argument.formal.constructor":I,"name.argument.formal.constructor.iteration":I,"name.argument.catch":I,"name.foreach":I,"name.assignment":I,"name.assignment.pattern":I,"name.variable":I,"name.variable.pattern":I,"name.function":I,"name.method":I,"name.constructor":I,"name.class":I,"name.field.class":I,"name.iteration.document":I,"name.iteration.class":I,"name.iteration.block":I,"key.mapPair":I,"key.mapPair.iteration":I,"value.argument.formal":I,"value.argument.formal.iteration":I,"value.argument.formal.method":I,"value.argument.formal.method.iteration":I,"value.argument.formal.constructor":I,"value.argument.formal.constructor.iteration":I,"value.mapPair":I,"value.mapPair.iteration":I,"value.assignment":I,"value.variable":I,"value.variable.pattern":I,"value.foreach":I,"value.return":I,"value.return.lambda":I,"value.field.class":I,"value.yield":I,"value.iteration.block":I,"value.iteration.class":I,"value.iteration.document":I,"interior.class":I,"interior.function":I,"interior.constructor":I,"interior.method":I,"interior.if":I,"interior.lambda.block":I,"interior.lambda.expression":I,"interior.for":I,"interior.foreach":I,"interior.while":I,"interior.doWhile":I,"interior.switch":I,"interior.switchCase":I,"interior.ternary":I,"interior.try":I,"interior.static":I,"class.iteration.block":le,"className.iteration.block":le,section:le,"section.iteration.document":le,"section.iteration.parent":le,command:le,"name.command":le,"value.command":le,"interior.command":le,notebookCell:le,"interior.cell":le,"interior.resource":le,"name.resource.iteration":le,"name.resource":le,"type.resource.iteration":le,"type.resource":le,"value.resource.iteration":le,"value.resource":le,"name.argument.actual.iteration":le,"name.argument.actual":le,"value.argument.actual.iteration":le,"value.argument.actual":le,"functionName.iteration.block":le,"namedFunction.iteration.block":le,"name.namespace":le,"interior.namespace":le,"branch.loop":le,"branch.loop.iteration":le,environment:le,selector:le,unit:le},ox={element:I,tags:I,startTag:I,endTag:I,attribute:I,"key.attribute":I,"value.attribute":I,"interior.element":I,"textFragment.element":I},ax={...ix,...ox,"type.argument.formal":le,"type.argument.formal.iteration":le,"type.argument.formal.method":le,"type.argument.formal.method.iteration":le,"type.argument.formal.constructor":le,"type.argument.formal.constructor.iteration":le,"type.argument.catch":le,"type.alias":le,"type.cast":le,"type.class":le,"type.field.class":le,"type.foreach":le,"type.return":le,"type.variable":le,"type.typeArgument":le,"type.typeArgument.iteration":le,"type.iteration.block":le,"type.iteration.class":le,"type.iteration.document":le,"value.typeAlias":le,"statement.interface":le,"statement.field.interface":le,"statement.iteration.interface":le,"name.interface":le,"name.field.interface":le,"name.iteration.interface":le,"type.interface":le,"type.field.interface":le,"type.iteration.interface":le,"interior.interface":le,"statement.enum":le,"name.enum":le,"name.field.enum":le,"name.iteration.enum":le,"value.field.enum":le,"value.iteration.enum":le,"type.enum":le,"interior.enum":le};var tz={...ax};var{supported:ln,notApplicable:R}=he,Xc={list:ln,map:ln,"string.singleLine":ln,"key.mapPair.iteration":ln,"key.mapPair":ln,"value.mapPair.iteration":ln,"value.mapPair":ln,"comment.block":ln,"comment.line":ln,"textFragment.comment.block":ln,"textFragment.comment.line":ln,"textFragment.string.singleLine":ln,class:R,"class.iteration.block":R,"class.iteration.document":R,className:R,"className.iteration.block":R,"className.iteration.document":R,"name.class":R,"name.field.class":R,"name.iteration.class":R,"statement.class":R,"statement.field.class":R,"statement.iteration.class":R,"type.class":R,"type.field.class":R,"type.iteration.class":R,"value.field.class":R,"value.iteration.class":R,"interior.class":R,"namedFunction.method.iteration.class":R,"functionName.method.iteration.class":R,"statement.interface":R,"statement.field.interface":R,"statement.iteration.interface":R,"interior.interface":R,"name.interface":R,"name.field.interface":R,"name.iteration.interface":R,"type.interface":R,"type.field.interface":R,"type.iteration.interface":R,"statement.enum":R,"name.enum":R,"name.field.enum":R,"name.iteration.enum":R,"value.field.enum":R,"value.iteration.enum":R,"type.enum":R,"interior.enum":R,command:R,"name.command":R,"value.command":R,"interior.command":R,"branch.try":R,"branch.try.iteration":R,"interior.try":R,"argument.catch":R,"name.argument.catch":R,"type.argument.catch":R,anonymousFunction:R,"argument.actual.singleLine":R,"argument.actual.multiLine":R,"argument.actual.constructor.singleLine":R,"argument.actual.constructor.multiLine":R,"argument.actual.constructor.iteration":R,"argument.actual.iteration":R,"argument.actual.method.singleLine":R,"argument.actual.method.multiLine":R,"argument.actual.method.iteration":R,"argument.formal.singleLine":R,"argument.formal.multiLine":R,"argument.formal.constructor.singleLine":R,"argument.formal.constructor.multiLine":R,"argument.formal.constructor.iteration":R,"argument.formal.iteration":R,"argument.formal.method.singleLine":R,"argument.formal.method.multiLine":R,"argument.formal.method.iteration":R,"argument.formal.lambda.singleLine":R,"argument.formal.lambda.multiLine":R,"argument.formal.lambda.iteration":R,"argumentList.actual.empty":R,"argumentList.actual.singleLine":R,"argumentList.actual.multiLine":R,"argumentList.actual.method.empty":R,"argumentList.actual.method.singleLine":R,"argumentList.actual.method.multiLine":R,"argumentList.actual.constructor.empty":R,"argumentList.actual.constructor.singleLine":R,"argumentList.actual.constructor.multiLine":R,"argumentList.formal.empty":R,"argumentList.formal.singleLine":R,"argumentList.formal.multiLine":R,"argumentList.formal.lambda.empty":R,"argumentList.formal.lambda.singleLine":R,"argumentList.formal.lambda.multiLine":R,"argumentList.formal.method.empty":R,"argumentList.formal.method.singleLine":R,"argumentList.formal.method.multiLine":R,"argumentList.formal.constructor.empty":R,"argumentList.formal.constructor.singleLine":R,"argumentList.formal.constructor.multiLine":R,attribute:R,"branch.if":R,"branch.if.elif.else":R,"branch.if.else":R,"branch.if.iteration":R,"branch.loop":R,"branch.loop.iteration":R,"branch.switchCase":R,"branch.switchCase.iteration":R,"branch.ternary":R,"branch.ternary.iteration":R,"collectionItem.unenclosed":R,"collectionItem.unenclosed.iteration":R,"condition.doWhile":R,"condition.for":R,"condition.if":R,"condition.switchCase":R,"condition.switchCase.iteration":R,"condition.ternary":R,"condition.while":R,disqualifyDelimiter:R,element:R,endTag:R,environment:R,fieldAccess:R,functionCall:R,"functionCall.constructor":R,functionCallee:R,"functionCallee.constructor":R,functionName:R,"functionName.constructor":R,"functionName.iteration.block":R,"functionName.iteration.document":R,"functionName.method":R,ifStatement:R,"interior.cell":R,"interior.element":R,"interior.function":R,"interior.constructor":R,"interior.method":R,"interior.if":R,"interior.lambda.block":R,"interior.lambda.expression":R,"interior.for":R,"interior.foreach":R,"interior.while":R,"interior.doWhile":R,"interior.resource":R,"interior.switch":R,"interior.switchCase":R,"interior.ternary":R,"interior.static":R,"interior.namespace":R,"key.attribute":R,"name.argument.actual":R,"name.argument.actual.iteration":R,"name.argument.formal":R,"name.argument.formal.constructor":R,"name.argument.formal.constructor.iteration":R,"name.argument.formal.iteration":R,"name.argument.formal.method":R,"name.argument.formal.method.iteration":R,"name.assignment":R,"name.assignment.pattern":R,"name.namespace":R,"name.constructor":R,"name.foreach":R,"name.function":R,"name.iteration.block":R,"name.iteration.document":R,"name.method":R,"name.resource":R,"name.resource.iteration":R,"name.variable":R,"name.variable.pattern":R,namedFunction:R,"namedFunction.constructor":R,"namedFunction.iteration.block":R,"namedFunction.iteration.document":R,"namedFunction.method":R,notebookCell:R,pairDelimiter:R,regularExpression:R,section:R,"section.iteration.document":R,"section.iteration.parent":R,startTag:R,statement:R,"statement.iteration.block":R,"statement.iteration.document":R,"string.multiLine":R,switchStatementSubject:R,tags:R,"textFragment.element":R,"textFragment.string.multiLine":R,"type.alias":R,"type.argument.formal":R,"type.argument.formal.constructor":R,"type.argument.formal.constructor.iteration":R,"type.argument.formal.iteration":R,"type.argument.formal.method":R,"type.argument.formal.method.iteration":R,"type.cast":R,"type.foreach":R,"type.variable":R,"type.return":R,"type.resource":R,"type.resource.iteration":R,"type.typeArgument":R,"type.typeArgument.iteration":R,"type.iteration.block":R,"type.iteration.document":R,"value.argument.actual":R,"value.argument.actual.iteration":R,"value.argument.formal":R,"value.argument.formal.constructor":R,"value.argument.formal.constructor.iteration":R,"value.argument.formal.iteration":R,"value.argument.formal.method":R,"value.argument.formal.method.iteration":R,"value.assignment":R,"value.attribute":R,"value.foreach":R,"value.resource":R,"value.resource.iteration":R,"value.return":R,"value.return.lambda":R,"value.typeAlias":R,"value.variable":R,"value.variable.pattern":R,"value.yield":R,"value.iteration.block":R,"value.iteration.document":R,selector:R,unit:R};var{supported:hse,unsupported:yse,notApplicable:Tse}=he,rz={...Xc};var{supported:bse,unsupported:wse,notApplicable:Ese}=he,nz={...Xc};var{supported:kse,unsupported:Ase,notApplicable:Pse}=he;var{supported:Mse,notApplicable:Fse}=he;var{supported:Ose,notApplicable:Nse}=he;var{supported:Bse,unsupported:Vse,notApplicable:Wse}=he;var{supported:zse,notApplicable:qse}=he;var{supported:Qse,unsupported:Yse,notApplicable:Zse}=he;var{supported:ece,unsupported:tce,notApplicable:rce}=he;var{supported:oce,unsupported:ace,notApplicable:sce}=he;var{supported:uce,unsupported:pce,notApplicable:mce}=he;var{supported:gce,notApplicable:hce}=he;var{supported:pt}=he,iz={...nx,"comment.line":pt,namedFunction:pt,"namedFunction.iteration.block":pt,"namedFunction.iteration.document":pt,functionName:pt,"functionName.iteration.block":pt,"functionName.iteration.document":pt,"name.argument.formal":pt,"name.argument.formal.iteration":pt,"name.function":pt,"value.argument.formal":pt,"value.argument.formal.iteration":pt,"value.return":pt,"textFragment.comment.line":pt,ifStatement:pt,"branch.if":pt,"branch.if.elif.else":pt,"branch.if.else":pt,"branch.if.iteration":pt,"condition.if":pt,"interior.if":pt,"interior.function":pt,"argument.actual.singleLine":pt,"argument.actual.multiLine":pt};var{supported:bce,unsupported:wce,notApplicable:Ece}=he;var{supported:Be,notApplicable:qn}=he,sx={...ix,"type.argument.formal":Be,"type.argument.formal.iteration":Be,"type.argument.formal.method":Be,"type.argument.formal.method.iteration":Be,"type.argument.formal.constructor":Be,"type.argument.formal.constructor.iteration":Be,"type.argument.catch":Be,"type.alias":Be,"type.cast":Be,"type.class":Be,"type.field.class":Be,"type.field.interface":Be,"type.interface":Be,"type.enum":Be,"type.return":Be,"type.variable":Be,"type.typeArgument":Be,"type.typeArgument.iteration":Be,"type.iteration.block":Be,"type.iteration.class":Be,"type.iteration.interface":Be,"type.iteration.document":Be,"name.interface":Be,"name.enum":Be,"name.field.interface":Be,"name.field.enum":Be,"name.iteration.interface":Be,"name.iteration.enum":Be,"statement.interface":Be,"statement.enum":Be,"statement.field.interface":Be,"statement.iteration.interface":Be,"value.typeAlias":Be,"value.field.enum":Be,"value.iteration.enum":Be,"interior.interface":Be,"interior.enum":Be,element:qn,tags:qn,startTag:qn,endTag:qn,attribute:qn,"key.attribute":qn,"value.attribute":qn,"interior.element":qn,"textFragment.element":qn,"type.foreach":qn};var oz={...sx,...ox};var{supported:Fce,notApplicable:Cce}=he;var{supported:Nce,unsupported:Uce,notApplicable:Hce}=he;var az={command:{description:"A command, for example Talon spoken command or bash",scopeType:"command"},element:{description:"A xml/html element. Also used for LaTeX environments",scopeType:"xmlElement"},startTag:{description:"The start tag of a xml element",scopeType:"xmlStartTag"},endTag:{description:"The end tag of a xml element",scopeType:"xmlEndTag"},tags:{description:"Both tags in a xml element",scopeType:"xmlBothTags"},attribute:{description:"A attribute, eg of a html element or a C++ attribute",scopeType:"attribute"},environment:{description:"An environment, eg in LaTeX",scopeType:"environment"},section:{description:"A document section",scopeType:"section"},"section.iteration.document":Ri("section","sections"),"section.iteration.parent":Ve("section","sections","the parent section"),list:{description:"A list/array",scopeType:"list"},map:{description:"A map/dictionary",scopeType:"map"},regularExpression:{description:"A regular expression",scopeType:"regularExpression"},switchStatementSubject:{description:"The subject of a switch statement",scopeType:"private.switchStatementSubject"},fieldAccess:{description:"A field access",scopeType:"private.fieldAccess"},ifStatement:{description:"An if statement",scopeType:"ifStatement"},statement:{description:"A statement, eg assignment, for loop, etc",scopeType:"statement"},"statement.class":{description:"A class declaration",scopeType:"statement"},"statement.interface":{description:"An interface declaration",scopeType:"statement"},"statement.enum":{description:"An enum declaration",scopeType:"statement"},"statement.field.class":{description:"A field declaration in a class",scopeType:"statement"},"statement.field.interface":{description:"A field declaration in a interface",scopeType:"statement"},"statement.iteration.document":Ri("statement","statements"),"statement.iteration.class":ms("statement","statements"),"statement.iteration.interface":cx("statement","statements"),"statement.iteration.block":ro("statement","statements"),class:{description:"A class in an object-oriented language",scopeType:"class"},"class.iteration.document":Ri("class","classes"),"class.iteration.block":ro("class","classes"),className:{description:"The name of a class",scopeType:"className"},"className.iteration.document":Ri("className","class names"),"className.iteration.block":ro("className","class names"),namedFunction:{description:"A named function declaration",scopeType:"namedFunction"},"namedFunction.method":{description:"A named method declaration in a class",scopeType:"namedFunction"},"namedFunction.method.iteration.class":ms("namedFunction","named functions"),"namedFunction.constructor":{description:"A constructor declaration in a class",scopeType:"namedFunction"},"namedFunction.iteration.block":ro("namedFunction","named functions"),"namedFunction.iteration.document":Ri("namedFunction","named functions"),anonymousFunction:{description:"An anonymous function, eg a lambda function, an arrow function, etc",scopeType:"anonymousFunction"},functionName:{description:"The name of a function",scopeType:"functionName"},"functionName.method":{description:"The name of a method in a class",scopeType:"functionName"},"functionName.method.iteration.class":ms("functionName","method names"),"functionName.constructor":{description:"The name of a constructor in a class",scopeType:"functionName"},"functionName.iteration.block":ro("functionName","function names"),"functionName.iteration.document":Ri("functionName","function names"),functionCall:{description:"A function call",scopeType:"functionCall"},"functionCall.constructor":{description:"A constructor call",scopeType:"functionCall"},functionCallee:{description:"The function being called in a function call",scopeType:"functionCallee"},"functionCallee.constructor":{description:"The class being constructed in a class instantiation, including the `new` keyword",scopeType:"functionCallee"},"argument.actual.singleLine":{description:"A single line argument in a function call",scopeType:"argumentOrParameter"},"argument.actual.multiLine":{description:"A multiline argument in a function call. Insertion delimiter should include new line.",scopeType:"argumentOrParameter"},"argument.actual.iteration":Ve("argumentOrParameter","arguments in a function call","the argument list. The domain should be the entire function call"),"argument.actual.method.singleLine":{description:"A single line argument in a method call",scopeType:"argumentOrParameter"},"argument.actual.method.multiLine":{description:"A multi line argument in a method call. Insertion delimiter should include new line.",scopeType:"argumentOrParameter"},"argument.actual.method.iteration":Ve("argumentOrParameter","arguments in a method call","the argument list. The domain should be the entire method call"),"argument.actual.constructor.singleLine":{description:"A single line argument in a constructor call",scopeType:"argumentOrParameter"},"argument.actual.constructor.multiLine":{description:"A multi line argument in a constructor call. Insertion delimiter should include new line.",scopeType:"argumentOrParameter"},"argument.actual.constructor.iteration":Ve("argumentOrParameter","arguments in a constructor call","the argument list. The domain should be the entire constructor call"),"argument.formal.singleLine":{description:"A single line parameter in a function declaration",scopeType:"argumentOrParameter"},"argument.formal.multiLine":{description:"A multi line parameter in a function declaration. Insertion delimiter should include new line.",scopeType:"argumentOrParameter"},"argument.formal.iteration":Ve("argumentOrParameter","formal parameters in a function declaration","the parameters list. The domain should be the entire function"),"argument.formal.method.singleLine":{description:"A single line parameter in a class method declaration",scopeType:"argumentOrParameter"},"argument.formal.method.multiLine":{description:"A multi line parameter in a class method declaration. Insertion delimiter should include new line.",scopeType:"argumentOrParameter"},"argument.formal.method.iteration":Ve("argumentOrParameter","formal parameters in a method declaration","the parameter list. The domain should be the entire method"),"argument.formal.constructor.singleLine":{description:"A single line parameter in a constructor declaration",scopeType:"argumentOrParameter"},"argument.formal.constructor.multiLine":{description:"A multi line parameter in a constructor declaration. Insertion delimiter should include new line.",scopeType:"argumentOrParameter"},"argument.formal.constructor.iteration":Ve("argumentOrParameter","formal parameters in a constructor declaration","the parameter list. The domain should be the entire constructor"),"argument.formal.lambda.singleLine":{description:"A single line parameter in a lambda declaration",scopeType:"argumentOrParameter"},"argument.formal.lambda.multiLine":{description:"A multi line parameter in a lambda declaration. Insertion delimiter should include new line.",scopeType:"argumentOrParameter"},"argument.formal.lambda.iteration":Ve("argumentOrParameter","formal parameters in a lambda declaration","the parameter list. The domain should be the entire lambda"),"argument.catch":{description:"A parameter in a catch clause",scopeType:"argumentOrParameter"},"argumentList.actual.empty":{description:"An empty list of arguments in a function call. Insertion delimiter should be empty.",scopeType:"argumentList"},"argumentList.actual.singleLine":{description:"A single line list of arguments in a function call",scopeType:"argumentList"},"argumentList.actual.multiLine":{description:"A multi line list of arguments in a function call. Insertion delimiter should include new line.",scopeType:"argumentList"},"argumentList.actual.method.empty":{description:"An empty list of arguments in a method call. Insertion delimiter should be empty.",scopeType:"argumentList"},"argumentList.actual.method.singleLine":{description:"A single line list of arguments in a method call",scopeType:"argumentList"},"argumentList.actual.method.multiLine":{description:"A multi line list of arguments in a method call. Insertion delimiter should include new line.",scopeType:"argumentList"},"argumentList.actual.constructor.empty":{description:"An empty list of arguments in a constructor call. Insertion delimiter should be empty.",scopeType:"argumentList"},"argumentList.actual.constructor.singleLine":{description:"A single line list of arguments in a constructor call",scopeType:"argumentList"},"argumentList.actual.constructor.multiLine":{description:"A multi line list of arguments in a constructor call. Insertion delimiter should include new line.",scopeType:"argumentList"},"argumentList.formal.empty":{description:"An empty list of parameters in a function declaration. Insertion delimiter should be empty.",scopeType:"argumentList"},"argumentList.formal.singleLine":{description:"A single line list of parameters in a function declaration",scopeType:"argumentList"},"argumentList.formal.multiLine":{description:"A multi line list of parameters in a function declaration. Insertion delimiter should include new line.",scopeType:"argumentList"},"argumentList.formal.lambda.empty":{description:"An empty list of parameters in a lambda declaration. Insertion delimiter should be empty.",scopeType:"argumentList"},"argumentList.formal.lambda.singleLine":{description:"A single line list of parameters in a lambda declaration",scopeType:"argumentList"},"argumentList.formal.lambda.multiLine":{description:"A multi line list of parameters in a lambda declaration. Insertion delimiter should include new line.",scopeType:"argumentList"},"argumentList.formal.method.empty":{description:"An empty list of parameters in a class method declaration. Insertion delimiter should be empty.",scopeType:"argumentList"},"argumentList.formal.method.singleLine":{description:"A single line list of parameters in a class method declaration",scopeType:"argumentList"},"argumentList.formal.method.multiLine":{description:"A multi line list of parameters in a class method declaration. Insertion delimiter should include new line.",scopeType:"argumentList"},"argumentList.formal.constructor.empty":{description:"An empty list of parameters in a constructor declaration. Insertion delimiter should be empty.",scopeType:"argumentList"},"argumentList.formal.constructor.singleLine":{description:"A single line list of parameters in a constructor declaration",scopeType:"argumentList"},"argumentList.formal.constructor.multiLine":{description:"A multi line list of parameters in a constructor declaration. Insertion delimiter should include new line.",scopeType:"argumentList"},"comment.line":{description:"A line comment",scopeType:"comment"},"comment.block":{description:"A block comment",scopeType:"comment"},"string.singleLine":{description:"A single-line string",scopeType:"string"},"string.multiLine":{description:"A multi-line string",scopeType:"string"},"textFragment.comment.line":{description:"Text fragment consisting of a line comment",scopeType:"textFragment"},"textFragment.comment.block":{description:"Text fragment consisting of a block comment",scopeType:"textFragment"},"textFragment.string.singleLine":{description:"Text fragment consisting of a single-line string",scopeType:"textFragment"},"textFragment.string.multiLine":{description:"Text fragment consisting of a multi-line string",scopeType:"textFragment"},"textFragment.element":{description:"Text fragment consisting of a xml element interior",scopeType:"textFragment"},disqualifyDelimiter:{description:"Used to disqualify a token from being treated as a surrounding pair delimiter. This will usually be operators containing `>` or `<`, eg `<`, `<=`, `->`, etc",scopeType:"disqualifyDelimiter"},pairDelimiter:{description:"A pair delimiter, eg parentheses, brackets, braces, quotes, etc",scopeType:"pairDelimiter"},"branch.if":{description:"An if branch",scopeType:"branch"},"branch.if.elif.else":{description:"An if-elif-else branch. The removal range for the if branch should include the trailing `else` keyword.",scopeType:"branch"},"branch.if.else":{description:"An if-else branch",scopeType:"branch"},"branch.if.iteration":Ve("branch","if/elif/else branches","the if-else statement"),"branch.loop":{description:"A for / while loop branch. For most languages this is not supported, but eg in Python you can have an else branch for a loop.",scopeType:"branch"},"branch.loop.iteration":Ve("branch","loop branches","the loop statement"),"branch.try":{description:"A try/catch/finally branch",scopeType:"branch"},"branch.try.iteration":Ve("branch","try/catch/finally branches","the try-catch statement"),"branch.switchCase":{description:"A case/default branch in a switch statement",scopeType:"branch"},"branch.switchCase.iteration":Ve("branch","switch branches","the switch statement body"),"branch.ternary":{description:"A branch in a ternary expression",scopeType:"branch"},"branch.ternary.iteration":Ve("branch","ternary expression branches","the ternary expression"),"collectionItem.unenclosed":{description:"An item in a comma-separated list without enclosing delimiters. This could be multi-variable declarations, import statements, etc.",scopeType:"collectionItem"},"collectionItem.unenclosed.iteration":Ve("collectionItem","items in a comma-separated list without enclosing delimiters"),"condition.if":{description:"A condition in an if statement",scopeType:"condition"},"condition.while":{description:"A condition in a while loop",scopeType:"condition"},"condition.doWhile":{description:"A condition in a do while loop",scopeType:"condition"},"condition.for":{description:"A condition in a for loop",scopeType:"condition"},"condition.ternary":{description:"A condition in a ternary expression",scopeType:"condition"},"condition.switchCase":{description:"A condition in a switch statement",scopeType:"condition"},"condition.switchCase.iteration":Ve("condition","conditions in a switch statement","the switch statement body"),"name.assignment":{description:"Name (LHS) of an assignment",scopeType:"name"},"name.assignment.pattern":{description:"LHS of an assignment with pattern destructuring",scopeType:"name"},"name.command":{description:"LHS of a command, eg Talon spoken command or bash",scopeType:"name"},"name.variable":{description:"Name (LHS) of a variable declaration",scopeType:"name"},"name.variable.pattern":{description:"Name (LHS) of a variable declaration with pattern destructuring",scopeType:"name"},"name.foreach":{description:"Iteration variable name in a for each loop",scopeType:"name"},"name.function":{description:"Name of a function",scopeType:"name"},"name.method":{description:"Name of a class method",scopeType:"name"},"name.constructor":{description:"Name of a constructor",scopeType:"name"},"name.class":{description:"Name of a class",scopeType:"name"},"name.interface":{description:"Name of a interface",scopeType:"name"},"name.enum":{description:"Name of an enum",scopeType:"name"},"name.namespace":{description:"Name of a namespace",scopeType:"name"},"name.field.class":{description:"Name (LHS) of a field in a class",scopeType:"name"},"name.field.interface":{description:"Name (LHS) of a field in an interface",scopeType:"name"},"name.field.enum":{description:"Name (LHS) of a field in an enum",scopeType:"name"},"name.iteration.block":ro("name","names"),"name.iteration.class":ms("name","names"),"name.iteration.interface":cx("name","names"),"name.iteration.enum":XR("name","names"),"name.iteration.document":Ri("name","names"),"name.resource":{description:"Name in a 'with' / 'use' / 'using' statement",scopeType:"name"},"name.resource.iteration":Ve("name","names in a 'with' / 'use' / 'using' statement","the resource list. The domain should be the entire statement"),"name.argument.actual":{description:"Name of a (keyword) argument in a function call",scopeType:"name"},"name.argument.actual.iteration":Ve("name","names of the arguments in a function call","the argument list. The domain should be the whole function call"),"name.argument.formal":{description:"Name of a parameter in a function declaration",scopeType:"name"},"name.argument.formal.iteration":Ve("name","names of formal parameters in a function declaration","the parameters list. The domain should be the entire function"),"name.argument.formal.method":{description:"Name of a parameter in a class method declaration",scopeType:"name"},"name.argument.formal.method.iteration":Ve("name","names of formal parameters in a method declaration","the parameters list. The domain should be the entire method"),"name.argument.formal.constructor":{description:"The name of a parameter in a constructor declaration",scopeType:"name"},"name.argument.formal.constructor.iteration":Ve("name","names of formal parameters in a constructor declaration","the parameters list. The domain should be the entire constructor"),"name.argument.catch":{description:"Name of a parameter in a catch clause",scopeType:"name"},"key.attribute":{description:"Key (LHS) of an attribute eg in a xml element",scopeType:"collectionKey"},"key.mapPair":{description:"Key (LHS) of a key-value pair of a map",scopeType:"collectionKey"},"key.mapPair.iteration":Ve("collectionKey","keys of key-value pairs in a map","should be between the braces"),"value.assignment":{description:"Value (RHS) of an assignment",scopeType:"value"},"value.command":{description:"Value (RHS) of an command, eg Talon spoken command",scopeType:"value"},"value.variable":{description:"Value (RHS) of a variable declaration",scopeType:"value"},"value.variable.pattern":{description:"Value (RHS) of a variable declaration with pattern destructuring",scopeType:"value"},"value.mapPair":{description:"Value (RHS) of a key-value pair in a map",scopeType:"value"},"value.mapPair.iteration":Ve("value","values of key-value pairs in a map","should be between the braces"),"value.foreach":{description:"Iterable in a for each loop",scopeType:"value"},"value.attribute":{description:"Value (RHS) of an attribute eg in a xml element",scopeType:"value"},"value.return":{description:"Return value of a function",scopeType:"value"},"value.return.lambda":{description:"Implicit return value from a lambda",scopeType:"value"},"value.field.class":{description:"Value (RHS) of a field in a class",scopeType:"value"},"value.field.enum":{description:"Value (RHS) of a field in an enum",scopeType:"value"},"value.yield":{description:"Value of a yield statement",scopeType:"value"},"value.iteration.block":ro("value","values"),"value.iteration.class":ms("value","values"),"value.iteration.enum":XR("value","values"),"value.iteration.document":Ri("value","values"),"value.resource":{description:"Value of a 'with' / 'use' / 'using' statement",scopeType:"value"},"value.resource.iteration":Ve("value","values in a 'with' / 'use' / 'using' statement","the resource list. The domain should be the entire statement"),"value.argument.actual":{description:"The value of a (keyword) argument in a function call",scopeType:"value"},"value.argument.actual.iteration":Ve("value","values of arguments in a function call","the arguments list. The domain should be the entire function call"),"value.argument.formal":{description:"The value of a (keyword) argument in a function declaration",scopeType:"value"},"value.argument.formal.iteration":Ve("value","values of formal parameters in a function declaration","the parameters list. The domain should be the entire function"),"value.argument.formal.method":{description:"The value of a parameter in a class method declaration",scopeType:"value"},"value.argument.formal.method.iteration":Ve("value","values of formal parameters in a method declaration","the parameters list. The domain should be the entire method"),"value.argument.formal.constructor":{description:"The value of a parameter in a constructor declaration",scopeType:"value"},"value.argument.formal.constructor.iteration":Ve("value","values of formal parameters in a constructor declaration","the parameters list. The domain should be the entire constructor"),"value.typeAlias":{description:"Value of a type alias declaration",scopeType:"value"},"type.variable":{description:"Type of variable in a variable declaration",scopeType:"type"},"type.argument.formal":{description:"Type of formal parameter in a function declaration",scopeType:"type"},"type.argument.formal.iteration":Ve("type","types of formal parameters in a function declaration","the parameters list. The domain should be the entire function"),"type.argument.formal.method":{description:"Type of formal parameter in a class method declaration",scopeType:"type"},"type.argument.formal.method.iteration":Ve("type","types of formal parameters in a method declaration","the parameters list. The domain should be the entire method"),"type.argument.formal.constructor":{description:"Type of formal parameter in a constructor declaration",scopeType:"type"},"type.argument.formal.constructor.iteration":Ve("type","types of formal parameters in a constructor declaration","the parameters list. The domain should be the entire constructor"),"type.argument.catch":{description:"Type of parameter in a catch clause",scopeType:"type"},"type.return":{description:"Type of return value in a function declaration",scopeType:"type"},"type.field.class":{description:"Type of field in a class",scopeType:"type"},"type.field.interface":{description:"Type of field in a interface",scopeType:"type"},"type.foreach":{description:"Type of variable in a for each loop",scopeType:"type"},"type.enum":{description:"An enum declaration",scopeType:"type"},"type.class":{description:"A class declaration",scopeType:"type"},"type.interface":{description:"An interface declaration",scopeType:"type"},"type.alias":{description:"A type alias declaration",scopeType:"type"},"type.cast":{description:"A type cast",scopeType:"type"},"type.typeArgument":{description:"Type argument to a generic / parametrized type",scopeType:"type"},"type.typeArgument.iteration":Ve("type","type arguments to a generic / parametrized type","the type argument list"),"type.resource":{description:"Type in a 'with' / 'use' / 'using' statement",scopeType:"type"},"type.resource.iteration":Ve("type","types in a 'with' / 'use' / 'using' statement","the resource list. The domain should be the entire statement"),"type.iteration.block":ro("type","types"),"type.iteration.class":ms("type","types"),"type.iteration.interface":cx("type","types"),"type.iteration.document":Ri("type","types"),"interior.element":{description:"The interior/children of a XML element",scopeType:{type:"interior"}},"interior.command":{description:"The body of a command, eg Talon spoken command",scopeType:{type:"interior"}},"interior.cell":{description:"The body of a code cell in markdown",scopeType:{type:"interior"}},"interior.class":{description:"The body of a class",scopeType:{type:"interior"}},"interior.interface":{description:"The body of a interface",scopeType:{type:"interior"}},"interior.enum":{description:"The body of an enum",scopeType:{type:"interior"}},"interior.function":{description:"The body of a function declaration",scopeType:{type:"interior"}},"interior.constructor":{description:"The body of a constructor declaration",scopeType:{type:"interior"}},"interior.method":{description:"The body of a method declaration",scopeType:{type:"interior"}},"interior.lambda.block":{description:"The block body of a lambda/anonymous function",scopeType:{type:"interior"}},"interior.lambda.expression":{description:"The expression body of a lambda/anonymous function",scopeType:{type:"interior"}},"interior.if":{description:"The body of an if/elif/else branch",scopeType:{type:"interior"}},"interior.try":{description:"The body of a try/catch/finally branch",scopeType:{type:"interior"}},"interior.switch":{description:"The body of a switch statement",scopeType:{type:"interior"}},"interior.switchCase":{description:"The body of a switch case branch",scopeType:{type:"interior"}},"interior.ternary":{description:"The body of a ternary condition/branch",scopeType:{type:"interior"}},"interior.for":{description:"The body of a for loop",scopeType:{type:"interior"}},"interior.foreach":{description:"The body of a for-each loop",scopeType:{type:"interior"}},"interior.while":{description:"The body of a while loop",scopeType:{type:"interior"}},"interior.doWhile":{description:"The body of a do-while loop",scopeType:{type:"interior"}},"interior.resource":{description:"the body of a 'with' / 'use' / 'using' statement",scopeType:{type:"interior"}},"interior.namespace":{description:"the body of a namespace statement",scopeType:{type:"interior"}},"interior.static":{description:"the body of a static statement",scopeType:{type:"interior"}},notebookCell:{description:"A cell in a notebook or a markdown code block",scopeType:"notebookCell"},selector:{description:"A selector in a css rule set",scopeType:"selector"},unit:{description:"A unit in a css rule set",scopeType:"unit"}};function Ri(t,e){return Ve(t,e,"the entire document including leading and trailing empty lines")}function ms(t,e){return Ve(t,e,"class bodies")}function cx(t,e){return Ve(t,e,"interface bodies")}function XR(t,e){return Ve(t,e,"enum bodies")}function ro(t,e){return Ve(t,e,"statement blocks (body of functions/if-statements/for-loops/etc)")}function Ve(t,e,r){return{description:r!=null?`Iteration scope for ${e}: ${r}.`:`Iteration scope for ${e}`,scopeType:t,isIteration:!0}}var fs=["that","source","instanceReference","keyboard"];var ut=class extends Z{get isReversed(){return this.active.isBefore(this.anchor)}constructor(...e){let[r,n]=e.length===2?e:[new Re(e[0],e[1]),new Re(e[2],e[3])];super(r,n),this.anchor=r,this.active=n}isEqual(e){return this.anchor.isEqual(e.anchor)&&this.active.isEqual(e.active)}concise(){return`${this.anchor.concise()}->${this.active.concise()}`}conciseOneBased(){return`${this.start.conciseOneBased()}->${this.end.conciseOneBased()}`}toString(){return this.concise()}};function ek({line:t,character:e}){return new Re(t,e)}function pm({start:t,end:e}){return new Z(ek(t),ek(e))}function Wr({start:t,end:e}){return{type:"line",start:t.line,end:e.line}}function fr({start:t,end:e}){return{type:"character",start:t,end:e}}function Jc(t){return{start:mm(t.start),end:mm(t.end)}}function tk(t){return{anchor:mm(t.anchor),active:mm(t.active)}}function mm({line:t,character:e}){return{line:t,character:e}}function xk(t){return typeof t>"u"||t===null}function sz(t){return typeof t=="object"&&t!==null}function cz(t){return Array.isArray(t)?t:xk(t)?[]:[t]}function lz(t,e){var r,n,i,o;if(e)for(o=Object.keys(e),r=0,n=o.length;r<n;r+=1)i=o[r],t[i]=e[i];return t}function uz(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}function pz(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var mz=xk,fz=sz,dz=cz,gz=uz,hz=pz,yz=lz,Ct={isNothing:mz,isObject:fz,toArray:dz,repeat:gz,isNegativeZero:hz,extend:yz};function Sk(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}function tl(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=Sk(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}tl.prototype=Object.create(Error.prototype);tl.prototype.constructor=tl;tl.prototype.toString=function(e){return this.name+": "+Sk(this,e)};var _r=tl;function lx(t,e,r,n,i){var o="",s="",l=Math.floor(i/2)-1;return n-e>l&&(o=" ... ",e=n-l+o.length),r-n>l&&(s=" ...",r=n+l-s.length),{str:o+t.slice(e,r).replace(/\t/g,"\u2192")+s,pos:n-e+o.length}}function ux(t,e){return Ct.repeat(" ",e-t.length)+t}function Tz(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],o,s=-1;o=r.exec(t.buffer);)i.push(o.index),n.push(o.index+o[0].length),t.position<=o.index&&s<0&&(s=n.length-2);s<0&&(s=n.length-1);var l="",u,m,d=Math.min(t.line+e.linesAfter,i.length).toString().length,g=e.maxLength-(e.indent+d+3);for(u=1;u<=e.linesBefore&&!(s-u<0);u++)m=lx(t.buffer,n[s-u],i[s-u],t.position-(n[s]-n[s-u]),g),l=Ct.repeat(" ",e.indent)+ux((t.line-u+1).toString(),d)+" | "+m.str+`
`+l;for(m=lx(t.buffer,n[s],i[s],t.position,g),l+=Ct.repeat(" ",e.indent)+ux((t.line+1).toString(),d)+" | "+m.str+`
`,l+=Ct.repeat("-",e.indent+d+3+m.pos)+`^
`,u=1;u<=e.linesAfter&&!(s+u>=i.length);u++)m=lx(t.buffer,n[s+u],i[s+u],t.position-(n[s]-n[s+u]),g),l+=Ct.repeat(" ",e.indent)+ux((t.line+u+1).toString(),d)+" | "+m.str+`
`;return l.replace(/\n$/,"")}var xz=Tz,Sz=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],vz=["scalar","sequence","mapping"];function bz(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}function wz(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(Sz.indexOf(r)===-1)throw new _r('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=bz(e.styleAliases||null),vz.indexOf(this.kind)===-1)throw new _r('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var qt=wz;function ik(t,e){var r=[];return t[e].forEach(function(n){var i=r.length;r.forEach(function(o,s){o.tag===n.tag&&o.kind===n.kind&&o.multi===n.multi&&(i=s)}),r[i]=n}),r}function Ez(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}function mx(t){return this.extend(t)}mx.prototype.extend=function(e){var r=[],n=[];if(e instanceof qt)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new _r("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(o){if(!(o instanceof qt))throw new _r("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new _r("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new _r("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(o){if(!(o instanceof qt))throw new _r("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(mx.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=ik(i,"implicit"),i.compiledExplicit=ik(i,"explicit"),i.compiledTypeMap=Ez(i.compiledImplicit,i.compiledExplicit),i};var _z=mx,Rz=new qt("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),kz=new qt("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),Az=new qt("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),Pz=new _z({explicit:[Rz,kz,Az]});function Lz(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function Dz(){return null}function Mz(t){return t===null}var Fz=new qt("tag:yaml.org,2002:null",{kind:"scalar",resolve:Lz,construct:Dz,predicate:Mz,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function Cz(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function Iz(t){return t==="true"||t==="True"||t==="TRUE"}function Oz(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var Nz=new qt("tag:yaml.org,2002:bool",{kind:"scalar",resolve:Cz,construct:Iz,predicate:Oz,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function Uz(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function Hz(t){return 48<=t&&t<=55}function Bz(t){return 48<=t&&t<=57}function Vz(t){if(t===null)return!1;var e=t.length,r=0,n=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!Uz(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!Hz(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!Bz(t.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function Wz(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}function $z(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!Ct.isNegativeZero(t)}var jz=new qt("tag:yaml.org,2002:int",{kind:"scalar",resolve:Vz,construct:Wz,predicate:$z,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),zz=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function qz(t){return!(t===null||!zz.test(t)||t[t.length-1]==="_")}function Gz(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}var Kz=/^[-+]?[0-9]+e/;function Qz(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Ct.isNegativeZero(t))return"-0.0";return r=t.toString(10),Kz.test(r)?r.replace("e",".e"):r}function Yz(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||Ct.isNegativeZero(t))}var Zz=new qt("tag:yaml.org,2002:float",{kind:"scalar",resolve:qz,construct:Gz,predicate:Yz,represent:Qz,defaultStyle:"lowercase"}),Xz=Pz.extend({implicit:[Fz,Nz,jz,Zz]}),Jz=Xz,vk=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),bk=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function eq(t){return t===null?!1:vk.exec(t)!==null||bk.exec(t)!==null}function tq(t){var e,r,n,i,o,s,l,u=0,m=null,d,g,y;if(e=vk.exec(t),e===null&&(e=bk.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(o=+e[4],s=+e[5],l=+e[6],e[7]){for(u=e[7].slice(0,3);u.length<3;)u+="0";u=+u}return e[9]&&(d=+e[10],g=+(e[11]||0),m=(d*60+g)*6e4,e[9]==="-"&&(m=-m)),y=new Date(Date.UTC(r,n,i,o,s,l,u)),m&&y.setTime(y.getTime()-m),y}function rq(t){return t.toISOString()}var nq=new qt("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:eq,construct:tq,instanceOf:Date,represent:rq});function iq(t){return t==="<<"||t===null}var oq=new qt("tag:yaml.org,2002:merge",{kind:"scalar",resolve:iq}),yx=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function aq(t){if(t===null)return!1;var e,r,n=0,i=t.length,o=yx;for(r=0;r<i;r++)if(e=o.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}function sq(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,o=yx,s=0,l=[];for(e=0;e<i;e++)e%4===0&&e&&(l.push(s>>16&255),l.push(s>>8&255),l.push(s&255)),s=s<<6|o.indexOf(n.charAt(e));return r=i%4*6,r===0?(l.push(s>>16&255),l.push(s>>8&255),l.push(s&255)):r===18?(l.push(s>>10&255),l.push(s>>2&255)):r===12&&l.push(s>>4&255),new Uint8Array(l)}function cq(t){var e="",r=0,n,i,o=t.length,s=yx;for(n=0;n<o;n++)n%3===0&&n&&(e+=s[r>>18&63],e+=s[r>>12&63],e+=s[r>>6&63],e+=s[r&63]),r=(r<<8)+t[n];return i=o%3,i===0?(e+=s[r>>18&63],e+=s[r>>12&63],e+=s[r>>6&63],e+=s[r&63]):i===2?(e+=s[r>>10&63],e+=s[r>>4&63],e+=s[r<<2&63],e+=s[64]):i===1&&(e+=s[r>>2&63],e+=s[r<<4&63],e+=s[64],e+=s[64]),e}function lq(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var uq=new qt("tag:yaml.org,2002:binary",{kind:"scalar",resolve:aq,construct:sq,predicate:lq,represent:cq}),pq=Object.prototype.hasOwnProperty,mq=Object.prototype.toString;function fq(t){if(t===null)return!0;var e=[],r,n,i,o,s,l=t;for(r=0,n=l.length;r<n;r+=1){if(i=l[r],s=!1,mq.call(i)!=="[object Object]")return!1;for(o in i)if(pq.call(i,o))if(!s)s=!0;else return!1;if(!s)return!1;if(e.indexOf(o)===-1)e.push(o);else return!1}return!0}function dq(t){return t!==null?t:[]}var gq=new qt("tag:yaml.org,2002:omap",{kind:"sequence",resolve:fq,construct:dq}),hq=Object.prototype.toString;function yq(t){if(t===null)return!0;var e,r,n,i,o,s=t;for(o=new Array(s.length),e=0,r=s.length;e<r;e+=1){if(n=s[e],hq.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;o[e]=[i[0],n[i[0]]]}return!0}function Tq(t){if(t===null)return[];var e,r,n,i,o,s=t;for(o=new Array(s.length),e=0,r=s.length;e<r;e+=1)n=s[e],i=Object.keys(n),o[e]=[i[0],n[i[0]]];return o}var xq=new qt("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:yq,construct:Tq}),Sq=Object.prototype.hasOwnProperty;function vq(t){if(t===null)return!0;var e,r=t;for(e in r)if(Sq.call(r,e)&&r[e]!==null)return!1;return!0}function bq(t){return t!==null?t:{}}var wq=new qt("tag:yaml.org,2002:set",{kind:"mapping",resolve:vq,construct:bq}),Tx=Jz.extend({implicit:[nq,oq],explicit:[uq,gq,xq,wq]}),io=Object.prototype.hasOwnProperty,fm=1,wk=2,Ek=3,dm=4,px=1,Eq=2,ok=3,_q=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Rq=/[\x85\u2028\u2029]/,kq=/[,\[\]\{\}]/,_k=/^(?:!|!!|![a-z\-]+!)$/i,Rk=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function ak(t){return Object.prototype.toString.call(t)}function Gn(t){return t===10||t===13}function Ko(t){return t===9||t===32}function Rr(t){return t===9||t===32||t===10||t===13}function gs(t){return t===44||t===91||t===93||t===123||t===125}function Aq(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function Pq(t){return t===120?2:t===117?4:t===85?8:0}function Lq(t){return 48<=t&&t<=57?t-48:-1}function sk(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}function Dq(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var kk=new Array(256),Ak=new Array(256);for(Go=0;Go<256;Go++)kk[Go]=sk(Go)?1:0,Ak[Go]=sk(Go);var Go;function Mq(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||Tx,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Pk(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=xz(r),new _r(e,r)}function ye(t,e){throw Pk(t,e)}function gm(t,e){t.onWarning&&t.onWarning.call(null,Pk(t,e))}var ck={YAML:function(e,r,n){var i,o,s;e.version!==null&&ye(e,"duplication of %YAML directive"),n.length!==1&&ye(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&ye(e,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),s=parseInt(i[2],10),o!==1&&ye(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=s<2,s!==1&&s!==2&&gm(e,"unsupported YAML version of the document")},TAG:function(e,r,n){var i,o;n.length!==2&&ye(e,"TAG directive accepts exactly two arguments"),i=n[0],o=n[1],_k.test(i)||ye(e,"ill-formed tag handle (first argument) of the TAG directive"),io.call(e.tagMap,i)&&ye(e,'there is a previously declared suffix for "'+i+'" tag handle'),Rk.test(o)||ye(e,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{ye(e,"tag prefix is malformed: "+o)}e.tagMap[i]=o}};function no(t,e,r,n){var i,o,s,l;if(e<r){if(l=t.input.slice(e,r),n)for(i=0,o=l.length;i<o;i+=1)s=l.charCodeAt(i),s===9||32<=s&&s<=1114111||ye(t,"expected valid JSON character");else _q.test(l)&&ye(t,"the stream contains non-printable characters");t.result+=l}}function lk(t,e,r,n){var i,o,s,l;for(Ct.isObject(r)||ye(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),s=0,l=i.length;s<l;s+=1)o=i[s],io.call(e,o)||(e[o]=r[o],n[o]=!0)}function hs(t,e,r,n,i,o,s,l,u){var m,d;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),m=0,d=i.length;m<d;m+=1)Array.isArray(i[m])&&ye(t,"nested arrays are not supported inside keys"),typeof i=="object"&&ak(i[m])==="[object Object]"&&(i[m]="[object Object]");if(typeof i=="object"&&ak(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(m=0,d=o.length;m<d;m+=1)lk(t,e,o[m],r);else lk(t,e,o,r);else!t.json&&!io.call(r,i)&&io.call(e,i)&&(t.line=s||t.line,t.lineStart=l||t.lineStart,t.position=u||t.position,ye(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):e[i]=o,delete r[i];return e}function xx(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):ye(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function At(t,e,r){for(var n=0,i=t.input.charCodeAt(t.position);i!==0;){for(;Ko(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(Gn(i))for(xx(t),i=t.input.charCodeAt(t.position),n++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return r!==-1&&n!==0&&t.lineIndent<r&&gm(t,"deficient indentation"),n}function Tm(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||Rr(r)))}function Sx(t,e){e===1?t.result+=" ":e>1&&(t.result+=Ct.repeat(`
`,e-1))}function Fq(t,e,r){var n,i,o,s,l,u,m,d,g=t.kind,y=t.result,x;if(x=t.input.charCodeAt(t.position),Rr(x)||gs(x)||x===35||x===38||x===42||x===33||x===124||x===62||x===39||x===34||x===37||x===64||x===96||(x===63||x===45)&&(i=t.input.charCodeAt(t.position+1),Rr(i)||r&&gs(i)))return!1;for(t.kind="scalar",t.result="",o=s=t.position,l=!1;x!==0;){if(x===58){if(i=t.input.charCodeAt(t.position+1),Rr(i)||r&&gs(i))break}else if(x===35){if(n=t.input.charCodeAt(t.position-1),Rr(n))break}else{if(t.position===t.lineStart&&Tm(t)||r&&gs(x))break;if(Gn(x))if(u=t.line,m=t.lineStart,d=t.lineIndent,At(t,!1,-1),t.lineIndent>=e){l=!0,x=t.input.charCodeAt(t.position);continue}else{t.position=s,t.line=u,t.lineStart=m,t.lineIndent=d;break}}l&&(no(t,o,s,!1),Sx(t,t.line-u),o=s=t.position,l=!1),Ko(x)||(s=t.position+1),x=t.input.charCodeAt(++t.position)}return no(t,o,s,!1),t.result?!0:(t.kind=g,t.result=y,!1)}function Cq(t,e){var r,n,i;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(no(t,n,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)n=t.position,t.position++,i=t.position;else return!0;else Gn(r)?(no(t,n,i,!0),Sx(t,At(t,!1,e)),n=i=t.position):t.position===t.lineStart&&Tm(t)?ye(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);ye(t,"unexpected end of the stream within a single quoted scalar")}function Iq(t,e){var r,n,i,o,s,l;if(l=t.input.charCodeAt(t.position),l!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(l=t.input.charCodeAt(t.position))!==0;){if(l===34)return no(t,r,t.position,!0),t.position++,!0;if(l===92){if(no(t,r,t.position,!0),l=t.input.charCodeAt(++t.position),Gn(l))At(t,!1,e);else if(l<256&&kk[l])t.result+=Ak[l],t.position++;else if((s=Pq(l))>0){for(i=s,o=0;i>0;i--)l=t.input.charCodeAt(++t.position),(s=Aq(l))>=0?o=(o<<4)+s:ye(t,"expected hexadecimal character");t.result+=Dq(o),t.position++}else ye(t,"unknown escape sequence");r=n=t.position}else Gn(l)?(no(t,r,n,!0),Sx(t,At(t,!1,e)),r=n=t.position):t.position===t.lineStart&&Tm(t)?ye(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}ye(t,"unexpected end of the stream within a double quoted scalar")}function Oq(t,e){var r=!0,n,i,o,s=t.tag,l,u=t.anchor,m,d,g,y,x,E=Object.create(null),w,H,W,G;if(G=t.input.charCodeAt(t.position),G===91)d=93,x=!1,l=[];else if(G===123)d=125,x=!0,l={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=l),G=t.input.charCodeAt(++t.position);G!==0;){if(At(t,!0,e),G=t.input.charCodeAt(t.position),G===d)return t.position++,t.tag=s,t.anchor=u,t.kind=x?"mapping":"sequence",t.result=l,!0;r?G===44&&ye(t,"expected the node content, but found ','"):ye(t,"missed comma between flow collection entries"),H=w=W=null,g=y=!1,G===63&&(m=t.input.charCodeAt(t.position+1),Rr(m)&&(g=y=!0,t.position++,At(t,!0,e))),n=t.line,i=t.lineStart,o=t.position,ys(t,e,fm,!1,!0),H=t.tag,w=t.result,At(t,!0,e),G=t.input.charCodeAt(t.position),(y||t.line===n)&&G===58&&(g=!0,G=t.input.charCodeAt(++t.position),At(t,!0,e),ys(t,e,fm,!1,!0),W=t.result),x?hs(t,l,E,H,w,W,n,i,o):g?l.push(hs(t,null,E,H,w,W,n,i,o)):l.push(w),At(t,!0,e),G=t.input.charCodeAt(t.position),G===44?(r=!0,G=t.input.charCodeAt(++t.position)):r=!1}ye(t,"unexpected end of the stream within a flow collection")}function Nq(t,e){var r,n,i=px,o=!1,s=!1,l=e,u=0,m=!1,d,g;if(g=t.input.charCodeAt(t.position),g===124)n=!1;else if(g===62)n=!0;else return!1;for(t.kind="scalar",t.result="";g!==0;)if(g=t.input.charCodeAt(++t.position),g===43||g===45)px===i?i=g===43?ok:Eq:ye(t,"repeat of a chomping mode identifier");else if((d=Lq(g))>=0)d===0?ye(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?ye(t,"repeat of an indentation width identifier"):(l=e+d-1,s=!0);else break;if(Ko(g)){do g=t.input.charCodeAt(++t.position);while(Ko(g));if(g===35)do g=t.input.charCodeAt(++t.position);while(!Gn(g)&&g!==0)}for(;g!==0;){for(xx(t),t.lineIndent=0,g=t.input.charCodeAt(t.position);(!s||t.lineIndent<l)&&g===32;)t.lineIndent++,g=t.input.charCodeAt(++t.position);if(!s&&t.lineIndent>l&&(l=t.lineIndent),Gn(g)){u++;continue}if(t.lineIndent<l){i===ok?t.result+=Ct.repeat(`
`,o?1+u:u):i===px&&o&&(t.result+=`
`);break}for(n?Ko(g)?(m=!0,t.result+=Ct.repeat(`
`,o?1+u:u)):m?(m=!1,t.result+=Ct.repeat(`
`,u+1)):u===0?o&&(t.result+=" "):t.result+=Ct.repeat(`
`,u):t.result+=Ct.repeat(`
`,o?1+u:u),o=!0,s=!0,u=0,r=t.position;!Gn(g)&&g!==0;)g=t.input.charCodeAt(++t.position);no(t,r,t.position,!1)}return!0}function uk(t,e){var r,n=t.tag,i=t.anchor,o=[],s,l=!1,u;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),u=t.input.charCodeAt(t.position);u!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,ye(t,"tab characters must not be used in indentation")),!(u!==45||(s=t.input.charCodeAt(t.position+1),!Rr(s))));){if(l=!0,t.position++,At(t,!0,-1)&&t.lineIndent<=e){o.push(null),u=t.input.charCodeAt(t.position);continue}if(r=t.line,ys(t,e,Ek,!1,!0),o.push(t.result),At(t,!0,-1),u=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&u!==0)ye(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return l?(t.tag=n,t.anchor=i,t.kind="sequence",t.result=o,!0):!1}function Uq(t,e,r){var n,i,o,s,l,u,m=t.tag,d=t.anchor,g={},y=Object.create(null),x=null,E=null,w=null,H=!1,W=!1,G;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=g),G=t.input.charCodeAt(t.position);G!==0;){if(!H&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,ye(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),o=t.line,(G===63||G===58)&&Rr(n))G===63?(H&&(hs(t,g,y,x,E,null,s,l,u),x=E=w=null),W=!0,H=!0,i=!0):H?(H=!1,i=!0):ye(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,G=n;else{if(s=t.line,l=t.lineStart,u=t.position,!ys(t,r,wk,!1,!0))break;if(t.line===o){for(G=t.input.charCodeAt(t.position);Ko(G);)G=t.input.charCodeAt(++t.position);if(G===58)G=t.input.charCodeAt(++t.position),Rr(G)||ye(t,"a whitespace character is expected after the key-value separator within a block mapping"),H&&(hs(t,g,y,x,E,null,s,l,u),x=E=w=null),W=!0,H=!1,i=!1,x=t.tag,E=t.result;else if(W)ye(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=m,t.anchor=d,!0}else if(W)ye(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=m,t.anchor=d,!0}if((t.line===o||t.lineIndent>e)&&(H&&(s=t.line,l=t.lineStart,u=t.position),ys(t,e,dm,!0,i)&&(H?E=t.result:w=t.result),H||(hs(t,g,y,x,E,w,s,l,u),x=E=w=null),At(t,!0,-1),G=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&G!==0)ye(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return H&&hs(t,g,y,x,E,null,s,l,u),W&&(t.tag=m,t.anchor=d,t.kind="mapping",t.result=g),W}function Hq(t){var e,r=!1,n=!1,i,o,s;if(s=t.input.charCodeAt(t.position),s!==33)return!1;if(t.tag!==null&&ye(t,"duplication of a tag property"),s=t.input.charCodeAt(++t.position),s===60?(r=!0,s=t.input.charCodeAt(++t.position)):s===33?(n=!0,i="!!",s=t.input.charCodeAt(++t.position)):i="!",e=t.position,r){do s=t.input.charCodeAt(++t.position);while(s!==0&&s!==62);t.position<t.length?(o=t.input.slice(e,t.position),s=t.input.charCodeAt(++t.position)):ye(t,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!Rr(s);)s===33&&(n?ye(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),_k.test(i)||ye(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),s=t.input.charCodeAt(++t.position);o=t.input.slice(e,t.position),kq.test(o)&&ye(t,"tag suffix cannot contain flow indicator characters")}o&&!Rk.test(o)&&ye(t,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{ye(t,"tag name is malformed: "+o)}return r?t.tag=o:io.call(t.tagMap,i)?t.tag=t.tagMap[i]+o:i==="!"?t.tag="!"+o:i==="!!"?t.tag="tag:yaml.org,2002:"+o:ye(t,'undeclared tag handle "'+i+'"'),!0}function Bq(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&ye(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!Rr(r)&&!gs(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&ye(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function Vq(t){var e,r,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!Rr(n)&&!gs(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&ye(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),io.call(t.anchorMap,r)||ye(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],At(t,!0,-1),!0}function ys(t,e,r,n,i){var o,s,l,u=1,m=!1,d=!1,g,y,x,E,w,H;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=s=l=dm===r||Ek===r,n&&At(t,!0,-1)&&(m=!0,t.lineIndent>e?u=1:t.lineIndent===e?u=0:t.lineIndent<e&&(u=-1)),u===1)for(;Hq(t)||Bq(t);)At(t,!0,-1)?(m=!0,l=o,t.lineIndent>e?u=1:t.lineIndent===e?u=0:t.lineIndent<e&&(u=-1)):l=!1;if(l&&(l=m||i),(u===1||dm===r)&&(fm===r||wk===r?w=e:w=e+1,H=t.position-t.lineStart,u===1?l&&(uk(t,H)||Uq(t,H,w))||Oq(t,w)?d=!0:(s&&Nq(t,w)||Cq(t,w)||Iq(t,w)?d=!0:Vq(t)?(d=!0,(t.tag!==null||t.anchor!==null)&&ye(t,"alias node should not have any properties")):Fq(t,w,fm===r)&&(d=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):u===0&&(d=l&&uk(t,H))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&ye(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),g=0,y=t.implicitTypes.length;g<y;g+=1)if(E=t.implicitTypes[g],E.resolve(t.result)){t.result=E.construct(t.result),t.tag=E.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(io.call(t.typeMap[t.kind||"fallback"],t.tag))E=t.typeMap[t.kind||"fallback"][t.tag];else for(E=null,x=t.typeMap.multi[t.kind||"fallback"],g=0,y=x.length;g<y;g+=1)if(t.tag.slice(0,x[g].tag.length)===x[g].tag){E=x[g];break}E||ye(t,"unknown tag !<"+t.tag+">"),t.result!==null&&E.kind!==t.kind&&ye(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+E.kind+'", not "'+t.kind+'"'),E.resolve(t.result,t.tag)?(t.result=E.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):ye(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||d}function Wq(t){var e=t.position,r,n,i,o=!1,s;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(s=t.input.charCodeAt(t.position))!==0&&(At(t,!0,-1),s=t.input.charCodeAt(t.position),!(t.lineIndent>0||s!==37));){for(o=!0,s=t.input.charCodeAt(++t.position),r=t.position;s!==0&&!Rr(s);)s=t.input.charCodeAt(++t.position);for(n=t.input.slice(r,t.position),i=[],n.length<1&&ye(t,"directive name must not be less than one character in length");s!==0;){for(;Ko(s);)s=t.input.charCodeAt(++t.position);if(s===35){do s=t.input.charCodeAt(++t.position);while(s!==0&&!Gn(s));break}if(Gn(s))break;for(r=t.position;s!==0&&!Rr(s);)s=t.input.charCodeAt(++t.position);i.push(t.input.slice(r,t.position))}s!==0&&xx(t),io.call(ck,n)?ck[n](t,n,i):gm(t,'unknown document directive "'+n+'"')}if(At(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,At(t,!0,-1)):o&&ye(t,"directives end mark is expected"),ys(t,t.lineIndent-1,dm,!1,!0),At(t,!0,-1),t.checkLineBreaks&&Rq.test(t.input.slice(e,t.position))&&gm(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&Tm(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,At(t,!0,-1));return}if(t.position<t.length-1)ye(t,"end of the stream or a document separator is expected");else return}function Lk(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new Mq(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,ye(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)Wq(r);return r.documents}function $q(t,e,r){e!==null&&typeof e=="object"&&typeof r>"u"&&(r=e,e=null);var n=Lk(t,r);if(typeof e!="function")return n;for(var i=0,o=n.length;i<o;i+=1)e(n[i])}function jq(t,e){var r=Lk(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new _r("expected a single document in the stream, but found more")}}var zq=$q,qq=jq,Dk={loadAll:zq,load:qq},Mk=Object.prototype.toString,Fk=Object.prototype.hasOwnProperty,vx=65279,Gq=9,rl=10,Kq=13,Qq=32,Yq=33,Zq=34,fx=35,Xq=37,Jq=38,eG=39,tG=42,Ck=44,rG=45,hm=58,nG=61,iG=62,oG=63,aG=64,Ik=91,Ok=93,sG=96,Nk=123,cG=124,Uk=125,rr={};rr[0]="\\0";rr[7]="\\a";rr[8]="\\b";rr[9]="\\t";rr[10]="\\n";rr[11]="\\v";rr[12]="\\f";rr[13]="\\r";rr[27]="\\e";rr[34]='\\"';rr[92]="\\\\";rr[133]="\\N";rr[160]="\\_";rr[8232]="\\L";rr[8233]="\\P";var lG=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],uG=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function pG(t,e){var r,n,i,o,s,l,u;if(e===null)return{};for(r={},n=Object.keys(e),i=0,o=n.length;i<o;i+=1)s=n[i],l=String(e[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),u=t.compiledTypeMap.fallback[s],u&&Fk.call(u.styleAliases,l)&&(l=u.styleAliases[l]),r[s]=l;return r}function mG(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else if(t<=4294967295)r="U",n=8;else throw new _r("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+Ct.repeat("0",n-e.length)+e}var fG=1,nl=2;function dG(t){this.schema=t.schema||Tx,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=Ct.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=pG(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?nl:fG,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function pk(t,e){for(var r=Ct.repeat(" ",e),n=0,i=-1,o="",s,l=t.length;n<l;)i=t.indexOf(`
`,n),i===-1?(s=t.slice(n),n=l):(s=t.slice(n,i+1),n=i+1),s.length&&s!==`
`&&(o+=r),o+=s;return o}function dx(t,e){return`
`+Ct.repeat(" ",t.indent*e)}function gG(t,e){var r,n,i;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(i=t.implicitTypes[r],i.resolve(e))return!0;return!1}function ym(t){return t===Qq||t===Gq}function il(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==vx||65536<=t&&t<=1114111}function mk(t){return il(t)&&t!==vx&&t!==Kq&&t!==rl}function fk(t,e,r){var n=mk(t),i=n&&!ym(t);return(r?n:n&&t!==Ck&&t!==Ik&&t!==Ok&&t!==Nk&&t!==Uk)&&t!==fx&&!(e===hm&&!i)||mk(e)&&!ym(e)&&t===fx||e===hm&&i}function hG(t){return il(t)&&t!==vx&&!ym(t)&&t!==rG&&t!==oG&&t!==hm&&t!==Ck&&t!==Ik&&t!==Ok&&t!==Nk&&t!==Uk&&t!==fx&&t!==Jq&&t!==tG&&t!==Yq&&t!==cG&&t!==nG&&t!==iG&&t!==eG&&t!==Zq&&t!==Xq&&t!==aG&&t!==sG}function yG(t){return!ym(t)&&t!==hm}function el(t,e){var r=t.charCodeAt(e),n;return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function Hk(t){var e=/^\n* /;return e.test(t)}var Bk=1,gx=2,Vk=3,Wk=4,ds=5;function TG(t,e,r,n,i,o,s,l){var u,m=0,d=null,g=!1,y=!1,x=n!==-1,E=-1,w=hG(el(t,0))&&yG(el(t,t.length-1));if(e||s)for(u=0;u<t.length;m>=65536?u+=2:u++){if(m=el(t,u),!il(m))return ds;w=w&&fk(m,d,l),d=m}else{for(u=0;u<t.length;m>=65536?u+=2:u++){if(m=el(t,u),m===rl)g=!0,x&&(y=y||u-E-1>n&&t[E+1]!==" ",E=u);else if(!il(m))return ds;w=w&&fk(m,d,l),d=m}y=y||x&&u-E-1>n&&t[E+1]!==" "}return!g&&!y?w&&!s&&!i(t)?Bk:o===nl?ds:gx:r>9&&Hk(t)?ds:s?o===nl?ds:gx:y?Wk:Vk}function xG(t,e,r,n,i){t.dump=function(){if(e.length===0)return t.quotingType===nl?'""':"''";if(!t.noCompatMode&&(lG.indexOf(e)!==-1||uG.test(e)))return t.quotingType===nl?'"'+e+'"':"'"+e+"'";var o=t.indent*Math.max(1,r),s=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),l=n||t.flowLevel>-1&&r>=t.flowLevel;function u(m){return gG(t,m)}switch(TG(e,l,t.indent,s,u,t.quotingType,t.forceQuotes&&!n,i)){case Bk:return e;case gx:return"'"+e.replace(/'/g,"''")+"'";case Vk:return"|"+dk(e,t.indent)+gk(pk(e,o));case Wk:return">"+dk(e,t.indent)+gk(pk(SG(e,s),o));case ds:return'"'+vG(e)+'"';default:throw new _r("impossible error: invalid scalar style")}}()}function dk(t,e){var r=Hk(t)?String(e):"",n=t[t.length-1]===`
`,i=n&&(t[t.length-2]===`
`||t===`
`),o=i?"+":n?"":"-";return r+o+`
`}function gk(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function SG(t,e){for(var r=/(\n+)([^\n]*)/g,n=function(){var m=t.indexOf(`
`);return m=m!==-1?m:t.length,r.lastIndex=m,hk(t.slice(0,m),e)}(),i=t[0]===`
`||t[0]===" ",o,s;s=r.exec(t);){var l=s[1],u=s[2];o=u[0]===" ",n+=l+(!i&&!o&&u!==""?`
`:"")+hk(u,e),i=o}return n}function hk(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,n,i=0,o,s=0,l=0,u="";n=r.exec(t);)l=n.index,l-i>e&&(o=s>i?s:l,u+=`
`+t.slice(i,o),i=o+1),s=l;return u+=`
`,t.length-i>e&&s>i?u+=t.slice(i,s)+`
`+t.slice(s+1):u+=t.slice(i),u.slice(1)}function vG(t){for(var e="",r=0,n,i=0;i<t.length;r>=65536?i+=2:i++)r=el(t,i),n=rr[r],!n&&il(r)?(e+=t[i],r>=65536&&(e+=t[i+1])):e+=n||mG(r);return e}function bG(t,e,r){var n="",i=t.tag,o,s,l;for(o=0,s=r.length;o<s;o+=1)l=r[o],t.replacer&&(l=t.replacer.call(r,String(o),l)),(ki(t,e,l,!1,!1)||typeof l>"u"&&ki(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=i,t.dump="["+n+"]"}function yk(t,e,r,n){var i="",o=t.tag,s,l,u;for(s=0,l=r.length;s<l;s+=1)u=r[s],t.replacer&&(u=t.replacer.call(r,String(s),u)),(ki(t,e+1,u,!0,!0,!1,!0)||typeof u>"u"&&ki(t,e+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=dx(t,e)),t.dump&&rl===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=o,t.dump=i||"[]"}function wG(t,e,r){var n="",i=t.tag,o=Object.keys(r),s,l,u,m,d;for(s=0,l=o.length;s<l;s+=1)d="",n!==""&&(d+=", "),t.condenseFlow&&(d+='"'),u=o[s],m=r[u],t.replacer&&(m=t.replacer.call(r,u,m)),ki(t,e,u,!1,!1)&&(t.dump.length>1024&&(d+="? "),d+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),ki(t,e,m,!1,!1)&&(d+=t.dump,n+=d));t.tag=i,t.dump="{"+n+"}"}function EG(t,e,r,n){var i="",o=t.tag,s=Object.keys(r),l,u,m,d,g,y;if(t.sortKeys===!0)s.sort();else if(typeof t.sortKeys=="function")s.sort(t.sortKeys);else if(t.sortKeys)throw new _r("sortKeys must be a boolean or a function");for(l=0,u=s.length;l<u;l+=1)y="",(!n||i!=="")&&(y+=dx(t,e)),m=s[l],d=r[m],t.replacer&&(d=t.replacer.call(r,m,d)),ki(t,e+1,m,!0,!0,!0)&&(g=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,g&&(t.dump&&rl===t.dump.charCodeAt(0)?y+="?":y+="? "),y+=t.dump,g&&(y+=dx(t,e)),ki(t,e+1,d,!0,g)&&(t.dump&&rl===t.dump.charCodeAt(0)?y+=":":y+=": ",y+=t.dump,i+=y));t.tag=o,t.dump=i||"{}"}function Tk(t,e,r){var n,i,o,s,l,u;for(i=r?t.explicitTypes:t.implicitTypes,o=0,s=i.length;o<s;o+=1)if(l=i[o],(l.instanceOf||l.predicate)&&(!l.instanceOf||typeof e=="object"&&e instanceof l.instanceOf)&&(!l.predicate||l.predicate(e))){if(r?l.multi&&l.representName?t.tag=l.representName(e):t.tag=l.tag:t.tag="?",l.represent){if(u=t.styleMap[l.tag]||l.defaultStyle,Mk.call(l.represent)==="[object Function]")n=l.represent(e,u);else if(Fk.call(l.represent,u))n=l.represent[u](e,u);else throw new _r("!<"+l.tag+'> tag resolver accepts not "'+u+'" style');t.dump=n}return!0}return!1}function ki(t,e,r,n,i,o,s){t.tag=null,t.dump=r,Tk(t,r,!1)||Tk(t,r,!0);var l=Mk.call(t.dump),u=n,m;n&&(n=t.flowLevel<0||t.flowLevel>e);var d=l==="[object Object]"||l==="[object Array]",g,y;if(d&&(g=t.duplicates.indexOf(r),y=g!==-1),(t.tag!==null&&t.tag!=="?"||y||t.indent!==2&&e>0)&&(i=!1),y&&t.usedDuplicates[g])t.dump="*ref_"+g;else{if(d&&y&&!t.usedDuplicates[g]&&(t.usedDuplicates[g]=!0),l==="[object Object]")n&&Object.keys(t.dump).length!==0?(EG(t,e,t.dump,i),y&&(t.dump="&ref_"+g+t.dump)):(wG(t,e,t.dump),y&&(t.dump="&ref_"+g+" "+t.dump));else if(l==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!s&&e>0?yk(t,e-1,t.dump,i):yk(t,e,t.dump,i),y&&(t.dump="&ref_"+g+t.dump)):(bG(t,e,t.dump),y&&(t.dump="&ref_"+g+" "+t.dump));else if(l==="[object String]")t.tag!=="?"&&xG(t,t.dump,e,o,u);else{if(l==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new _r("unacceptable kind of an object to dump "+l)}t.tag!==null&&t.tag!=="?"&&(m=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?m="!"+m:m.slice(0,18)==="tag:yaml.org,2002:"?m="!!"+m.slice(18):m="!<"+m+">",t.dump=m+" "+t.dump)}return!0}function _G(t,e){var r=[],n=[],i,o;for(hx(t,r,n),i=0,o=n.length;i<o;i+=1)e.duplicates.push(r[n[i]]);e.usedDuplicates=new Array(o)}function hx(t,e,r){var n,i,o;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(e.push(t),Array.isArray(t))for(i=0,o=t.length;i<o;i+=1)hx(t[i],e,r);else for(n=Object.keys(t),i=0,o=n.length;i<o;i+=1)hx(t[n[i]],e,r)}function RG(t,e){e=e||{};var r=new dG(e);r.noRefs||_G(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),ki(r,0,n,!0,!0)?r.dump+`
`:""}var kG=RG,AG={dump:kG};function bx(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var $k=qt;var jk=Tx,PG=Dk.load,nue=Dk.loadAll,zk=AG.dump;var iue=bx("safeLoad","load"),oue=bx("safeLoadAll","loadAll"),aue=bx("safeDump","dump");var xm=class{constructor(e,r){this.data=e;this.opts=r}represent(){let e=zk(this.data,Object.assign({replacer:FG,schema:DG},this.opts));return e=e.trim(),e.includes(`
`)&&(e=`
`+e),e}},LG=new $k("!format",{kind:"scalar",resolve:()=>!1,instanceOf:xm,represent:t=>t.represent()}),DG=jk.extend({implicit:[LG]}),wx=t=>typeof t=="object"&&t!=null;function MG(t){if(wx(t))return Object.values(t).every(e=>!wx(e)&&!Array.isArray(e));if(Array.isArray(t))return t.every(e=>!wx(e)&&!Array.isArray(e))}function FG(t,e){return t===""?e:MG(e)?new xm(e,{flowLevel:0}):e}var Ex=["addSelection","addSelectionAfter","addSelectionBefore","breakLine","clearAndSetSelection","copyToClipboard","cutToClipboard","decrement","deselect","editNewLineAfter","editNewLineBefore","experimental.setInstanceReference","extractVariable","findInDocument","findInWorkspace","flashTargets","foldRegion","followLink","followLinkAside","gitAccept","gitRevert","gitStage","gitUnstage","increment","indentLine","insertCopyAfter","insertCopyBefore","insertEmptyLineAfter","insertEmptyLineBefore","insertEmptyLinesAround","joinLines","outdentLine","randomizeTargets","remove","rename","revealDefinition","revealTypeDefinition","reverseTargets","scrollToBottom","scrollToCenter","scrollToTop","setSelection","setSelectionAfter","setSelectionBefore","showDebugHover","showHover","showQuickFix","showReferences","sortTargets","toggleLineBreakpoint","toggleLineComment","unfoldRegion","private.getTargets","private.setKeyboardTarget","private.showParseTree"],IG=["callAsFunction","editNew","executeCommand","generateSnippet","getText","highlight","insertSnippet","moveToTarget","pasteFromClipboard","replace","replaceWithTarget","rewrapWithPairedDelimiter","swapTargets","wrapWithPairedDelimiter","wrapWithSnippet","parsed"],Gk=[...Ex,...IG];var OG=["angleBrackets","backtickQuotes","curlyBrackets","doubleQuotes","escapedDoubleQuotes","escapedParentheses","escapedSingleQuotes","escapedSquareBrackets","parentheses","singleQuotes","squareBrackets","tripleBacktickQuotes","tripleDoubleQuotes","tripleSingleQuotes"],NG=["string","any","collectionBoundary"],Sm=[...OG,...NG],Qo=["argumentOrParameter","argumentList","anonymousFunction","attribute","branch","class","className","collectionItem","collectionKey","comment","private.fieldAccess","functionCall","functionCallee","functionName","ifStatement","instance","list","map","name","namedFunction","regularExpression","statement","string","type","value","condition","section","sectionLevelOne","sectionLevelTwo","sectionLevelThree","sectionLevelFour","sectionLevelFive","sectionLevelSix","selector","private.switchStatementSubject","unit","xmlBothTags","xmlElement","xmlEndTag","xmlStartTag","part","chapter","subSection","subSubSection","namedParagraph","subParagraph","environment","character","word","token","identifier","line","sentence","paragraph","boundedParagraph","document","nonWhitespaceSequence","boundedNonWhitespaceSequence","url","notebookCell","command","textFragment","disqualifyDelimiter","pairDelimiter"];function Kk(t){return Qo.includes(t.type)}var Qk=["simpleScopeTypeType","complexScopeTypeType","customRegex","pairedDelimiter","action","customAction","grapheme"],ol=class extends Error{constructor(e){super(e),this.name="NeedsInitialTalonUpdateError"}},Ts=class extends Error{constructor(){super("Custom spoken forms are not currently supported in this ide"),this.name="DisabledCustomSpokenFormsError"}};function al(t){return t.replace(/([A-Z])/g," $1").split(" ").map(e=>e.toLowerCase()).join(" ")}function Yo(t){return t.version>=7}var oo=class{constructor(e){this.hashFunction=e;this.map={}}hash(e){return this.hashFunction(e).join("\0")}set(e,r){return this.map[this.hash(e)]=r,this}has(e){return this.hash(e)in this.map}get(e){return this.map[this.hash(e)]}delete(e){return delete this.map[this.hash(e)],this}clear(){return this.map={},this}};var xs=class extends Map{constructor(r){super();this.getDefaultValue=r}get(r){let n=super.get(r);if(n!=null)return n;let i=this.getDefaultValue(r);return this.set(r,i),i}};function Yk(...t){return{dispose(){t.forEach(({dispose:e})=>{try{e()}catch(r){console.error(r)}})}}}function sl(t){return typeof t=="string"||t instanceof String}function vm(t){let[e,...r]=t;return HG(e,r)}function HG(t,e){let r;if(sl(t)){let n=t,[i,o,...s]=e;r={version:0,spokenForm:n,action:i,targets:o,extraArgs:s,usePrePhraseSnapshot:!1}}else r=t;return r}function cl(t,e){let r=new Map;return t.forEach(n=>{let i=e(n),o;r.has(i)?o=r.get(i):(o=[],r.set(i,o)),o.push(n)}),r}function Zk(t){for(let e of t)return!1;return!0}function ll(t){return Object.keys(t)}function ul(t,e){return`${t}.${e}`}function Xk(t,e,r){if(t.length<2)return[...t];if(t.length===2)return e(t[0],t[1])?[t[0]]:[...t];let n=[],i=t.reduce((o,s)=>{let l=r(s),u=o.get(l);return u==null?(o.set(l,[s]),o):(o.get(l).push(s),u.length===2&&n.push(l),o)},new Map);return n.length===0?[...t]:(n.forEach(o=>{i.set(o,qc(i.get(o),e))}),t.flatMap(o=>{let s=r(o),l=i.get(s);if(l==null||l.length===0)return[];let u=l[0];return e(u,o)?(l.shift(),u):[]}))}function Zo(t,e){if(t.length!==e.length)throw new Error("Lists must have the same length");return t.map((r,n)=>[r,e[n]])}var iA=Symbol.for("immer-nothing"),Jk=Symbol.for("immer-draftable"),$r=Symbol.for("immer-state"),BG=process.env.NODE_ENV!=="production"?[function(t){return`The plugin for '${t}' has not been loaded into Immer. To enable the plugin, import and call \`enable${t}()\` when initializing your application.`},function(t){return`produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '${t}'`},"This object has been frozen and should not be mutated",function(t){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+t},"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.","Immer forbids circular references","The first or second argument to `produce` must be a function","The third argument to `produce` must be a function or undefined","First argument to `createDraft` must be a plain object, an array, or an immerable object","First argument to `finishDraft` must be a draft returned by `createDraft`",function(t){return`'current' expects a draft, got: ${t}`},"Object.defineProperty() cannot be used on an Immer draft","Object.setPrototypeOf() cannot be used on an Immer draft","Immer only supports deleting array indices","Immer only supports setting array indices and the 'length' property",function(t){return`'original' expects a draft, got: ${t}`}]:[];function kr(t,...e){if(process.env.NODE_ENV!=="production"){let r=BG[t],n=typeof r=="function"?r.apply(null,e):r;throw new Error(`[Immer] ${n}`)}throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Ss=Object.getPrototypeOf;function vs(t){return!!t&&!!t[$r]}function Jo(t){return t?oA(t)||Array.isArray(t)||!!t[Jk]||!!t.constructor?.[Jk]||Rm(t)||km(t):!1}var VG=Object.prototype.constructor.toString();function oA(t){if(!t||typeof t!="object")return!1;let e=Ss(t);if(e===null)return!0;let r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===VG}function bm(t,e){_m(t)===0?Reflect.ownKeys(t).forEach(r=>{e(r,t[r],t)}):t.forEach((r,n)=>e(n,r,t))}function _m(t){let e=t[$r];return e?e.type_:Array.isArray(t)?1:Rm(t)?2:km(t)?3:0}function kx(t,e){return _m(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function aA(t,e,r){let n=_m(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function WG(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Rm(t){return t instanceof Map}function km(t){return t instanceof Set}function Xo(t){return t.copy_||t.base_}function Ax(t,e){if(Rm(t))return new Map(t);if(km(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);let r=oA(t);if(e===!0||e==="class_only"&&!r){let n=Object.getOwnPropertyDescriptors(t);delete n[$r];let i=Reflect.ownKeys(n);for(let o=0;o<i.length;o++){let s=i[o],l=n[s];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[s]={configurable:!0,writable:!0,enumerable:l.enumerable,value:t[s]})}return Object.create(Ss(t),n)}else{let n=Ss(t);if(n!==null&&r)return{...t};let i=Object.create(n);return Object.assign(i,t)}}function Fx(t,e=!1){return Am(t)||vs(t)||!Jo(t)||(_m(t)>1&&(t.set=t.add=t.clear=t.delete=$G),Object.freeze(t),e&&Object.entries(t).forEach(([r,n])=>Fx(n,!0))),t}function $G(){kr(2)}function Am(t){return Object.isFrozen(t)}var jG={};function ea(t){let e=jG[t];return e||kr(0,t),e}var pl;function sA(){return pl}function zG(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function eA(t,e){e&&(ea("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function Px(t){Lx(t),t.drafts_.forEach(qG),t.drafts_=null}function Lx(t){t===pl&&(pl=t.parent_)}function tA(t){return pl=zG(pl,t)}function qG(t){let e=t[$r];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function rA(t,e){e.unfinalizedDrafts_=e.drafts_.length;let r=e.drafts_[0];return t!==void 0&&t!==r?(r[$r].modified_&&(Px(e),kr(4)),Jo(t)&&(t=wm(e,t),e.parent_||Em(e,t)),e.patches_&&ea("Patches").generateReplacementPatches_(r[$r].base_,t,e.patches_,e.inversePatches_)):t=wm(e,r,[]),Px(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==iA?t:void 0}function wm(t,e,r){if(Am(e))return e;let n=e[$r];if(!n)return bm(e,(i,o)=>nA(t,n,e,i,o,r)),e;if(n.scope_!==t)return e;if(!n.modified_)return Em(t,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;let i=n.copy_,o=i,s=!1;n.type_===3&&(o=new Set(i),i.clear(),s=!0),bm(o,(l,u)=>nA(t,n,i,l,u,r,s)),Em(t,i,!1),r&&t.patches_&&ea("Patches").generatePatches_(n,r,t.patches_,t.inversePatches_)}return n.copy_}function nA(t,e,r,n,i,o,s){if(process.env.NODE_ENV!=="production"&&i===r&&kr(5),vs(i)){let l=o&&e&&e.type_!==3&&!kx(e.assigned_,n)?o.concat(n):void 0,u=wm(t,i,l);if(aA(r,n,u),vs(u))t.canAutoFreeze_=!1;else return}else s&&r.add(i);if(Jo(i)&&!Am(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;wm(t,i),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&Em(t,i)}}function Em(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&Fx(e,r)}function GG(t,e){let r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:sA(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1},i=n,o=Cx;r&&(i=[n],o=ml);let{revoke:s,proxy:l}=Proxy.revocable(i,o);return n.draft_=l,n.revoke_=s,l}var Cx={get(t,e){if(e===$r)return t;let r=Xo(t);if(!kx(r,e))return KG(t,r,e);let n=r[e];return t.finalized_||!Jo(n)?n:n===_x(t.base_,e)?(Rx(t),t.copy_[e]=Mx(n,t)):n},has(t,e){return e in Xo(t)},ownKeys(t){return Reflect.ownKeys(Xo(t))},set(t,e,r){let n=cA(Xo(t),e);if(n?.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){let i=_x(Xo(t),e),o=i?.[$r];if(o&&o.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(WG(r,i)&&(r!==void 0||kx(t.base_,e)))return!0;Rx(t),Dx(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return _x(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,Rx(t),Dx(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){let r=Xo(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){kr(11)},getPrototypeOf(t){return Ss(t.base_)},setPrototypeOf(){kr(12)}},ml={};bm(Cx,(t,e)=>{ml[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});ml.deleteProperty=function(t,e){return process.env.NODE_ENV!=="production"&&isNaN(parseInt(e))&&kr(13),ml.set.call(this,t,e,void 0)};ml.set=function(t,e,r){return process.env.NODE_ENV!=="production"&&e!=="length"&&isNaN(parseInt(e))&&kr(14),Cx.set.call(this,t[0],e,r,t[0])};function _x(t,e){let r=t[$r];return(r?Xo(r):t)[e]}function KG(t,e,r){let n=cA(e,r);return n?"value"in n?n.value:n.get?.call(t.draft_):void 0}function cA(t,e){if(!(e in t))return;let r=Ss(t);for(;r;){let n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Ss(r)}}function Dx(t){t.modified_||(t.modified_=!0,t.parent_&&Dx(t.parent_))}function Rx(t){t.copy_||(t.copy_=Ax(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var QG=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){let o=r;r=e;let s=this;return function(u=o,...m){return s.produce(u,d=>r.call(this,d,...m))}}typeof r!="function"&&kr(6),n!==void 0&&typeof n!="function"&&kr(7);let i;if(Jo(e)){let o=tA(this),s=Mx(e,void 0),l=!0;try{i=r(s),l=!1}finally{l?Px(o):Lx(o)}return eA(o,n),rA(i,o)}else if(!e||typeof e!="object"){if(i=r(e),i===void 0&&(i=e),i===iA&&(i=void 0),this.autoFreeze_&&Fx(i,!0),n){let o=[],s=[];ea("Patches").generateReplacementPatches_(e,i,o,s),n(o,s)}return i}else kr(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(s,...l)=>this.produceWithPatches(s,u=>e(u,...l));let n,i;return[this.produce(e,r,(s,l)=>{n=s,i=l}),n,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){Jo(t)||kr(8),vs(t)&&(t=YG(t));let e=tA(this),r=Mx(t,void 0);return r[$r].isManual_=!0,Lx(e),r}finishDraft(t,e){let r=t&&t[$r];(!r||!r.isManual_)&&kr(9);let{scope_:n}=r;return eA(n,e),rA(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){let i=e[r];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}r>-1&&(e=e.slice(r+1));let n=ea("Patches").applyPatches_;return vs(t)?n(t,e):this.produce(t,i=>n(i,e))}};function Mx(t,e){let r=Rm(t)?ea("MapSet").proxyMap_(t,e):km(t)?ea("MapSet").proxySet_(t,e):GG(t,e);return(e?e.scope_:sA()).drafts_.push(r),r}function YG(t){return vs(t)||kr(10,t),lA(t)}function lA(t){if(!Jo(t)||Am(t))return t;let e=t[$r],r;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=Ax(t,e.scope_.immer_.useStrictShallowCopy_)}else r=Ax(t,!0);return bm(r,(n,i)=>{aA(r,n,lA(i))}),e&&(e.finalized_=!1),r}var jr=new QG,Pm=jr.produce,cfe=jr.produceWithPatches.bind(jr),lfe=jr.setAutoFreeze.bind(jr),ufe=jr.setUseStrictShallowCopy.bind(jr),pfe=jr.applyPatches.bind(jr),mfe=jr.createDraft.bind(jr),ffe=jr.finishDraft.bind(jr);var Gt=[];for(let t=0;t<256;++t)Gt.push((t+256).toString(16).slice(1));function uA(t,e=0){return(Gt[t[e+0]]+Gt[t[e+1]]+Gt[t[e+2]]+Gt[t[e+3]]+"-"+Gt[t[e+4]]+Gt[t[e+5]]+"-"+Gt[t[e+6]]+Gt[t[e+7]]+"-"+Gt[t[e+8]]+Gt[t[e+9]]+"-"+Gt[t[e+10]]+Gt[t[e+11]]+Gt[t[e+12]]+Gt[t[e+13]]+Gt[t[e+14]]+Gt[t[e+15]]).toLowerCase()}var pA=require("crypto"),Dm=new Uint8Array(256),Lm=Dm.length;function Ix(){return Lm>Dm.length-16&&((0,pA.randomFillSync)(Dm),Lm=0),Dm.slice(Lm,Lm+=16)}var mA=require("crypto"),Ox={randomUUID:mA.randomUUID};function ZG(t,e,r){if(Ox.randomUUID&&!e&&!t)return Ox.randomUUID();t=t||{};let n=t.random??t.rng?.()??Ix();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){if(r=r||0,r<0||r+16>e.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let i=0;i<16;++i)e[r+i]=n[i];return e}return uA(n)}var Nx=ZG;function fA(t,e,r){if(e>=t.length)throw Error(`Expected at least ${e+1} ${r} but received only ${t.length}`);return t[e]}function Mm(t,e){if(Array.isArray(t))return t.map(r=>Mm(r,e));if(typeof t=="object"&&t!=null){if(XG(t))return fA(e,t.index,"placeholder value");let r={};for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=Mm(t[n],e));return r}return t}function XG(t){return typeof t=="object"&&t!=null&&"type"in t&&t.type==="placeholder"}var Hm=an(gA(),1);var JG={blue:"blue",green:"green",red:"red",pink:"pink",yellow:"yellow",userColor1:"navy",userColor2:"apricot",default:null},eK={ex:"ex",fox:"fox",wing:"wing",hole:"hole",frame:"frame",curve:"curve",eye:"eye",play:"play",crosshairs:"cross",bolt:"bolt",default:null},Cm={cursor:"this",that:"that",source:"source",nothing:"nothing",keyboard:null,explicit:null,decoratedSymbol:null,lineNumber:null,range:null,target:null},Im={modulo100:"row",relativeUp:"up",relativeDown:"down"};function hA(t){let e=JG[t];if(e==null)throw Error(`Unknown hat color '${t}'`);return e}function yA(t){let e=eK[t];if(e==null)throw Error(`Unknown hat shape '${t}'`);return e}function Ux(t,e){return Object.fromEntries(Object.entries(t).map(([r,n])=>[r,Object.fromEntries(Object.entries(n).map(([i,o])=>[i,e(o,r,i)]))]))}var tK=Object.fromEntries("air bat cap drum each fine gust harp sit jury crunch look made near odd pit quench red sun trap urge vest whale plex yank zip".split(" ").map((t,e)=>[String.fromCharCode(97+e),t])),rK=Object.fromEntries("zero one two three four five six seven eight nine".split(" ").map((t,e)=>[e.toString(),t])),nK={".":"dot",",":"comma",";":"semicolon",":":"colon","!":"bang","*":"asterisk","@":"at sign","&":"ampersand","?":"question","/":"slash","\\":"backslash","-":"dash","=":"equals","+":"plus","~":"tilde",_:"underscore","#":"hash","%":"percent","^":"caret","|":"pipe",$:"dollar","\xA3":"pound","'":"quote",'"':"double quote","`":"back tick","(":"paren",")":"right paren","{":"brace","}":"right brace","[":"square","]":"right square","<":"angle",">":"right angle","\uFFFD":"special"},TA={...tK,...rK,...nK};function ao(...t){return{defaultSpokenForms:t,isDisabledByDefault:!0,isPrivate:!1}}function It(...t){return{defaultSpokenForms:t,isDisabledByDefault:!0,isPrivate:!0}}var xA={pairedDelimiter:{curlyBrackets:"curly",angleBrackets:"diamond",escapedDoubleQuotes:"escaped quad",escapedSingleQuotes:"escaped twin",escapedParentheses:"escaped round",escapedSquareBrackets:"escaped box",doubleQuotes:"quad",parentheses:"round",backtickQuotes:"skis",squareBrackets:"box",singleQuotes:"twin",tripleDoubleQuotes:It("triple quad"),tripleSingleQuotes:It("triple twin"),tripleBacktickQuotes:It("triple skis"),any:"pair",string:"string",whitespace:"void",collectionBoundary:It("collection boundary")},simpleScopeTypeType:{argumentOrParameter:"arg",argumentList:"arg list",attribute:"attribute",functionCall:"call",functionCallee:"callee",className:"class name",class:"class",comment:"comment",functionName:"funk name",namedFunction:"funk",ifStatement:"if state",instance:"instance",collectionItem:"item",collectionKey:"key",anonymousFunction:"lambda",list:"list",map:"map",name:"name",regularExpression:"regex",section:"section",sectionLevelOne:ao("one section"),sectionLevelTwo:ao("two section"),sectionLevelThree:ao("three section"),sectionLevelFour:ao("four section"),sectionLevelFive:ao("five section"),sectionLevelSix:ao("six section"),selector:"selector",statement:"state",branch:"branch",type:"type",value:"value",condition:"condition",unit:"unit",xmlElement:"element",xmlBothTags:"tags",xmlStartTag:"start tag",xmlEndTag:"end tag",part:"part",chapter:"chapter",subSection:"subsection",subSubSection:"subsubsection",namedParagraph:"paragraph",subParagraph:"subparagraph",environment:"environment",command:"command",character:"char",word:"sub",token:"token",identifier:"identifier",line:"line",sentence:"sentence",paragraph:"block",boundedParagraph:"short block",document:"file",nonWhitespaceSequence:"paint",boundedNonWhitespaceSequence:"short paint",url:"link",notebookCell:"cell",string:It("parse tree string"),textFragment:It("text fragment"),disqualifyDelimiter:It("disqualify delimiter"),pairDelimiter:It("pair delimiter"),"private.fieldAccess":It("access"),"private.switchStatementSubject":It("subject")},complexScopeTypeType:{glyph:"glyph"},surroundingPairForceDirection:{left:"left",right:"right"},simpleModifier:{excludeInterior:"bounds",toRawSelection:"just",leading:"leading",trailing:"trailing",keepContentFilter:"content",keepEmptyFilter:"empty",inferPreviousMark:"its",startOf:"start of",endOf:"end of",interiorOnly:"inside",visible:"visible",extendThroughStartOf:"head",extendThroughEndOf:"tail",everyScope:"every"},modifierExtra:{first:"first",last:"last",previous:"previous",next:"next",forward:"forward",backward:"backward",ancestor:"grand"},customRegex:{},action:{addSelection:"append",addSelectionAfter:"append post",addSelectionBefore:"append pre",breakLine:"break",scrollToBottom:"bottom",toggleLineBreakpoint:"break point",cutToClipboard:"carve",scrollToCenter:"center",clearAndSetSelection:"change",remove:"chuck",insertCopyBefore:"clone up",insertCopyAfter:"clone",toggleLineComment:"comment",copyToClipboard:"copy",scrollToTop:"crown",outdentLine:"dedent",revealDefinition:"define",editNewLineBefore:"drink",insertEmptyLineBefore:"drop",extractVariable:"extract",insertEmptyLineAfter:"float",foldRegion:"fold",followLink:"follow",followLinkAside:"follow split",flashTargets:"flash",deselect:"give",highlight:"highlight",showHover:"hover",increment:"increment",decrement:"decrement",indentLine:"indent",showDebugHover:"inspect",setSelectionAfter:"post",editNewLineAfter:"pour",setSelectionBefore:"pre",insertEmptyLinesAround:"puff",showQuickFix:"quick fix",showReferences:"reference",rename:"rename",reverseTargets:"reverse",findInDocument:"scout",findInWorkspace:"scout all",randomizeTargets:"shuffle",generateSnippet:"snippet make",sortTargets:"sort",setSelection:"take",revealTypeDefinition:"type deaf",unfoldRegion:"unfold",callAsFunction:"call",swapTargets:"swap",replaceWithTarget:"bring",moveToTarget:"move",wrapWithPairedDelimiter:"wrap",wrapWithSnippet:"wrap",rewrapWithPairedDelimiter:"repack",insertSnippet:"snippet",pasteFromClipboard:"paste",joinLines:"join",gitAccept:"git accept",gitRevert:"git revert",gitStage:"git stage",gitUnstage:"git unstage","private.showParseTree":It("parse tree"),"experimental.setInstanceReference":ao("from"),editNew:It("edit new"),executeCommand:It("execute command"),parsed:It("parsed"),getText:It("get text"),replace:It("replace"),"private.getTargets":It("get targets"),"private.setKeyboardTarget":It("set keyboard target")},customAction:{},grapheme:TA};var Hx=Ux(xA,t=>typeof t=="string"?{defaultSpokenForms:[t],isDisabledByDefault:!1,isPrivate:!1}:t),Ln=Ux(Hx,({defaultSpokenForms:t,isDisabledByDefault:e,isPrivate:r})=>({spokenForms:e?[]:t,isCustom:!1,defaultSpokenForms:t,requiresTalonUpdate:!1,isPrivate:r}));var _t={rangeExclusive:"between",rangeInclusive:"past",rangeExcludingStart:null,rangeExcludingEnd:"until",listConnective:"and",swapConnective:"with",sourceDestinationConnective:"to",before:"before",after:"after",verticalRange:"slice",previous:"previous",next:"next",forward:"forward",backward:"backward"};var bA=an(vA(),1),Nm=class{constructor(e){this.mooLexer=bA.default.compile(e)}reset(e,r){let{mooState:n}=r??{};return this.mooLexer.reset(e,n),this}formatError(e,r){return this.mooLexer.formatError(e,r)}has(e){return this.mooLexer.has(e)}save(){return{mooState:this.mooLexer.save()}}next(){let e=this.mooLexer.next();return this.skipToken(e)?this.next():e}transform({value:e}){return e}skipToken(e){return e?.type==="ws"}};var Dn={};for(let t of Ex){let{spokenForms:e}=Ln.action[t];for(let r of e)Dn[r]={type:"simpleActionName",value:t}}var iK=["replaceWithTarget","moveToTarget"];for(let t of iK){let{spokenForms:e}=Ln.action[t];for(let r of e)Dn[r]={type:"bringMove",value:t}}var oK=["before","after","to"];for(let t of oK){let e=_t[t==="to"?"sourceDestinationConnective":t];Dn[e]={type:"insertionMode",value:t}}for(let t of Qo){let{spokenForms:e}=Ln.simpleScopeTypeType[t];for(let r of e)Dn[r]={type:"simpleScopeTypeType",value:t}}for(let t of Sm){let{spokenForms:e}=Ln.pairedDelimiter[t];for(let r of e)Dn[r]={type:"pairedDelimiter",value:t}}for(let[t,e]of Object.entries(Cm))e!=null&&(Dn[e]={type:"simpleMarkType",value:t});Ln.modifierExtra.next.spokenForms.forEach(t=>{Dn[t]={type:"direction",value:"forward"}});Ln.modifierExtra.previous.spokenForms.forEach(t=>{Dn[t]={type:"direction",value:"backward"}});var Kn=new Nm({ws:/[ \t]+/,placeholderTarget:{match:/<target\d*>/,value:t=>t.slice(7,-1)},token:{match:Object.keys(Dn),type:t=>Dn[t].type,value:t=>Dn[t].value}});function wA(t,e){return{name:t,target:e}}function EA(t,e,r){return{name:t,source:e,destination:r}}function Um(t,e){let r={type:"primitive"};return t!=null&&(r.modifiers=t),e!=null&&(r.mark=e),r}function _A(t,e){return{type:"primitive",insertionMode:t,target:e}}function RA(t){return{type:"containingScope",scopeType:t}}function kA(t,e){return{type:"relativeScope",scopeType:t,offset:1,length:1,direction:e}}function AA(t){return{type:t}}function PA(t){return{type:"surroundingPair",delimiter:t}}function LA(t){return{type:t}}function DA(t){return{type:"target",target:{type:"placeholder",index:t.length===0?0:parseInt(t)-1}}}function Bx(t){return t[0]}var aK={Lexer:Kn,ParserRules:[{name:"main",symbols:["action"],postprocess:Bx},{name:"action",symbols:[Kn.has("simpleActionName")?{type:"simpleActionName"}:simpleActionName,"target"],postprocess:([t,e])=>wA(t,e)},{name:"action",symbols:[Kn.has("bringMove")?{type:"bringMove"}:bringMove,"target","destination"],postprocess:([t,e,r])=>EA(t,e,r)},{name:"destination",symbols:["primitiveDestination"],postprocess:Bx},{name:"destination",symbols:[Kn.has("insertionMode")?{type:"insertionMode"}:insertionMode,"target"],postprocess:([t,e])=>_A(t,e)},{name:"target",symbols:["primitiveTarget"],postprocess:Bx},{name:"primitiveTarget$ebnf$1",symbols:["modifier"]},{name:"primitiveTarget$ebnf$1",symbols:["primitiveTarget$ebnf$1","modifier"],postprocess:t=>t[0].concat([t[1]])},{name:"primitiveTarget",symbols:["primitiveTarget$ebnf$1"],postprocess:([t])=>Um(t,void 0)},{name:"primitiveTarget",symbols:["mark"],postprocess:([t])=>Um(void 0,t)},{name:"primitiveTarget$ebnf$2",symbols:["modifier"]},{name:"primitiveTarget$ebnf$2",symbols:["primitiveTarget$ebnf$2","modifier"],postprocess:t=>t[0].concat([t[1]])},{name:"primitiveTarget",symbols:["primitiveTarget$ebnf$2","mark"],postprocess:([t,e])=>Um(t,e)},{name:"modifier",symbols:["scopeType"],postprocess:([t])=>RA(t)},{name:"modifier",symbols:[Kn.has("direction")?{type:"direction"}:direction,"scopeType"],postprocess:([t,e])=>kA(e,t)},{name:"scopeType",symbols:[Kn.has("simpleScopeTypeType")?{type:"simpleScopeTypeType"}:simpleScopeTypeType],postprocess:([t])=>AA(t)},{name:"scopeType",symbols:[Kn.has("pairedDelimiter")?{type:"pairedDelimiter"}:pairedDelimiter],postprocess:([t])=>PA(t)},{name:"mark",symbols:[Kn.has("simpleMarkType")?{type:"simpleMarkType"}:simpleMarkType],postprocess:([t])=>LA(t)},{name:"mark",symbols:[Kn.has("placeholderTarget")?{type:"placeholderTarget"}:placeholderTarget],postprocess:([t])=>DA(t)}],ParserStart:"main"},MA=aK;function sK(){return new Hm.Parser(Hm.Grammar.fromCompiled(MA))}function FA(t){let e=sK();if(e.feed(t),e.results.length!==1)throw new Error(`Expected exactly one result, got ${e.results.length}`);return e.results[0]}function Bm(t,e){let r=FA(t);return Mm(r,e)}function fl(t){switch(t.name){case"callAsFunction":return[t.callee,t.argument];case"replaceWithTarget":case"moveToTarget":return[t.source,...CA(t.destination)];case"swapTargets":return[t.target1,t.target2];case"pasteFromClipboard":case"insertSnippet":case"replace":case"editNew":return CA(t.destination);case"parsed":return fl(Bm(t.content,t.arguments));default:return[t.target]}}function CA(t){switch(t.type){case"list":return t.destinations.map(({target:e})=>e);case"primitive":return[t.target];case"implicit":return[]}}function Wx(t){return t.flatMap(Vx)}function Vx(t){switch(t.type){case"primitive":return[t];case"list":return t.elements.flatMap(Vx);case"range":return[t.anchor,t.active].flatMap(Vx);case"implicit":return[]}}var cK={arrowFunction:"anonymousFunction",dictionary:"map",regex:"regularExpression"},lK={purple:"pink"};function uK(t){t.modifiers?.forEach(e=>{(e.type==="containingScope"||e.type==="everyScope")&&(e.scopeType.type=cK[e.scopeType.type]??e.scopeType.type)})}function pK(t){t.mark?.type==="decoratedSymbol"&&(t.mark.symbolColor=lK[t.mark.symbolColor]??t.mark.symbolColor)}function $x(t){Wx(t).forEach(e=>{uK(e),pK(e)})}function IA(t){return{...t,version:1}}var mK={type:"primitive",mark:{type:"cursor"},selectionType:"token",position:"contents",modifier:{type:"identity"},insideOutsideType:"inside"},fK={type:"primitive",isImplicit:!0},OA=t=>_i(t,mK)?fK:t;function NA(t){let e=t.action;return{spokenForm:t.spokenForm,action:{name:e,args:t.extraArgs},targets:gK(t.targets,e),usePrePhraseSnapshot:t.usePrePhraseSnapshot??!1,version:2}}function dK(t){switch(t.type){case"identity":return[];case"containingScope":{let{includeSiblings:e,scopeType:r,type:n,...i}=t;return[{type:e?"everyScope":"containingScope",scopeType:{type:r},...i}]}case"surroundingPair":{let{delimiterInclusion:e,...r}=t,n={type:"containingScope",scopeType:r};return e==="interiorOnly"||e==="excludeInterior"?n.scopeType.delimiter==="any"?[{type:e}]:[{type:e},n]:[n]}case"subpiece":{let{type:e,pieceType:r,...n}=t;return[{type:"ordinalRange",scopeType:{type:r},...n}]}case"head":return[{type:"extendThroughStartOf"}];case"tail":return[{type:"extendThroughEndOf"}];default:return[t]}}function jx(t,e){let{type:r,isImplicit:n,mark:i,insideOutsideType:o,modifier:s,selectionType:l,position:u}=t,m=[];if(u&&u!=="contents"&&(u==="before"?o==="inside"?m.push({type:"position",position:"start"}):e==="remove"?m.push({type:"leading"}):m.push({type:"position",position:"before"}):o==="inside"?m.push({type:"position",position:"end"}):e==="remove"?m.push({type:"trailing"}):m.push({type:"position",position:"after"})),l)switch(l){case"token":if(s?.type==="subpiece")break;case"line":if(i?.type==="lineNumber")break;default:m.push({type:"containingScope",scopeType:{type:l}})}return s&&m.push(...dK(s)),{type:r,isImplicit:n,modifiers:m.length>0?m:void 0,mark:i?.type==="cursorToken"?void 0:i}}function UA(t,e){switch(t.type){case"list":return{...t,elements:t.elements.map(r=>UA(r,e))};case"range":{let{type:r,rangeType:n,start:i,end:o,excludeStart:s,excludeEnd:l}=t;return{type:r,rangeType:n,anchor:jx(i,e),active:jx(o,e),excludeAnchor:s??!1,excludeActive:l??!1}}case"primitive":return jx(t,e)}}function gK(t,e){return t.map(r=>UA(r,e)).map(r=>r.type==="primitive"?OA(r):r)}function HA(t){return{...t,version:3,targets:t.targets.map(BA)}}function BA(t){switch(t.type){case"list":return{...t,elements:t.elements.map(e=>BA(e))};case"range":{let{anchor:e,active:r,...n}=t;return{anchor:zx(e),active:zx(r),...n}}case"primitive":return zx(t)}}function zx(t){let e=t.modifiers!=null?t.modifiers.map(yK):void 0;if(t.mark?.type==="lineNumber"){let{anchor:r,active:n}=t.mark;if(r.type!==n.type||r.lineNumber<0!=n.lineNumber<0)return{type:"range",anchor:{type:"primitive",mark:gl(r),modifiers:e},active:{type:"primitive",mark:gl(n)},excludeAnchor:!1,excludeActive:!1}}return{...t,mark:t.mark!=null?hK(t.mark):void 0,modifiers:e}}function hK(t){switch(t.type){case"lineNumber":return TK(t);default:return t}}function yK(t){switch(t.type){case"ordinalRange":return xK(t);default:return t}}function TK(t){return _i(t.anchor,t.active)?gl(t.anchor):{type:"range",anchor:gl(t.anchor),active:gl(t.active)}}function xK(t){return t.anchor===t.active?dl(t.scopeType,t.anchor):t.anchor===0&&t.active>t.anchor?dl(t.scopeType,t.anchor,t.active-t.anchor+1):t.anchor<0&&t.active===-1?dl(t.scopeType,t.anchor,-t.anchor):{type:"range",anchor:dl(t.scopeType,t.anchor),active:dl(t.scopeType,t.active),excludeAnchor:t.excludeAnchor,excludeActive:t.excludeActive}}function gl(t){return{type:"lineNumber",lineNumberType:t.type,lineNumber:t.lineNumber}}function dl(t,e,r=1){return{type:"ordinalScope",scopeType:t,start:e,length:r}}function WA(t){return{...t,version:4,targets:t.targets.map($A)}}function $A(t){switch(t.type){case"primitive":return VA(t);case"range":{let{anchor:e,...r}=t;return{...r,anchor:VA(e)}}case"list":{let{elements:e,...r}=t;return{...r,elements:e.map($A)}}}}function VA(t){return t.mark==null&&t.modifiers==null||t.isImplicit?{type:"implicit"}:t}function jA(t){return{...t,version:5,action:SK(t.action),targets:t.targets.map(Vm)}}function SK(t){switch(t.name){case"wrapWithSnippet":{let[e,r]=vK(t.args[0]);return{name:"wrapWithSnippet",args:[{type:"named",name:e,variableName:r}]}}case"insertSnippet":{let[e,r]=t.args,n={type:"named",name:e};return r!=null&&(n.substitutions=r),{name:"insertSnippet",args:[n]}}default:return t}}function vK(t){let[e,r]=t.split(".");if(e==null||r==null)throw new Error("Snippet location missing '.'");return[e,r]}function Vm(t){switch(t.type){case"implicit":return t;case"list":return{...t,elements:t.elements.map(Vm)};case"range":return{...t,anchor:Vm(t.anchor),active:Vm(t.active)};case"primitive":return{...t,mark:t.mark!=null?qx(t.mark):void 0,modifiers:t.modifiers!=null&&t.modifiers.length>0?t.modifiers.map(Gx):void 0}}}function qx(t){return t.type==="range"?{...t,anchor:qx(t.anchor),active:qx(t.active),excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1}:t}function Gx(t){return t.type==="range"?{...t,anchor:Gx(t.anchor),active:Gx(t.active),excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1}:t}var bK={bring:"replaceWithTarget",call:"callAsFunction",clear:"clearAndSetSelection",commentLines:"toggleLineComment",copy:"copyToClipboard",cut:"cutToClipboard",delete:"remove",editNewLineAbove:"editNewLineBefore",editNewLineBelow:"editNewLineAfter",findInFiles:"findInWorkspace",fold:"foldRegion",indentLines:"indentLine",insertEmptyLineAbove:"insertEmptyLineBefore",insertEmptyLineBelow:"insertEmptyLineAfter",insertLineAfter:"editNewLineAfter",insertLineBefore:"editNewLineBefore",move:"moveToTarget",outdentLines:"outdentLine",paste:"pasteFromClipboard",reverse:"reverseTargets",setBreakpoint:"toggleLineBreakpoint",sort:"sortTargets",swap:"swapTargets",unfold:"unfoldRegion",use:"replaceWithTarget",wrap:"wrapWithPairedDelimiter"};function Kx(t){let e=bK[t]??t;if(!Gk.includes(e))throw new Error(`Unknown action name: ${e}`);return e}function zA(t){return{version:6,spokenForm:t.spokenForm,usePrePhraseSnapshot:t.usePrePhraseSnapshot,action:wK(t.action,t.targets)}}function wK(t,e){let r=Kx(t.name);switch(r){case"replaceWithTarget":case"moveToTarget":return{name:r,source:un(e[0]),destination:hl(e[1])};case"swapTargets":return{name:r,target1:un(e[0]),target2:un(e[1])};case"callAsFunction":return{name:r,callee:un(e[0]),argument:un(e[1])};case"pasteFromClipboard":return{name:r,destination:hl(e[0])};case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return{name:r,left:t.args[0],right:t.args[1],target:un(e[0])};case"generateSnippet":return{name:r,snippetName:t.args?.[0],target:un(e[0])};case"insertSnippet":return{name:r,snippetDescription:t.args[0],destination:hl(e[0])};case"wrapWithSnippet":return{name:r,snippetDescription:t.args[0],target:un(e[0])};case"executeCommand":return{name:r,commandId:t.args[0],options:t.args?.[1],target:un(e[0])};case"replace":return{name:r,replaceWith:t.args[0],destination:hl(e[0])};case"highlight":{let n={name:r,target:un(e[0])};return t.args?.[0]!=null&&(n.highlightId=t.args?.[0]),n}case"editNew":return{name:r,destination:hl(e[0])};case"getText":return{name:r,options:t.args?.[0],target:un(e[0])};case"parsed":throw Error("Parsed action should not be present in V5");default:return{name:r,target:un(e[0])}}}function un(t){switch(t.type){case"list":case"range":case"primitive":return EK(t);case"implicit":return t}}function EK(t){switch(t.type){case"list":return _K(t);case"range":case"primitive":return Wm(t)}}function _K(t){return{...t,elements:t.elements.map(Wm)}}function Wm(t){switch(t.type){case"range":return qA(t);case"primitive":return $m(t)}}function qA(t){let{anchor:e,active:r}=t,n={type:"range",anchor:e.type==="implicit"?e:$m(e),active:$m(r),excludeAnchor:t.excludeAnchor,excludeActive:t.excludeActive};return t.rangeType!=null&&(n.rangeType=t.rangeType),n}function $m(t){let e={type:"primitive"},r=DK(t.modifiers);return r!=null&&(e.modifiers=r),t.mark!=null&&(e.mark=t.mark),e}function hl(t){switch(t.type){case"list":return RK(t);case"range":return kK(t);case"primitive":return AK(t);case"implicit":return PK()}}function RK(t){let e=[],r=[],n,i=()=>{r.length>0&&e.push({type:"primitive",insertionMode:n??"to",target:r.length===1?r[0]:{type:"list",elements:r}})};return t.elements.forEach(o=>{let s=jm(o);s!=null?(i(),r=[Wm(o)],n=s):r.push(Wm(o))}),i(),e.length>1?{type:"list",destinations:e}:e[0]}function kK(t){return{type:"primitive",insertionMode:jm(t.anchor)??"to",target:qA(t)}}function AK(t){return{type:"primitive",insertionMode:jm(t)??"to",target:$m(t)}}function PK(){return{type:"implicit"}}function jm(t){switch(t.type){case"implicit":return"to";case"primitive":return LK(t);case"range":return jm(t.anchor)}}function LK(t){let e=t.modifiers?.find(r=>r.type==="position");if(e!=null){if(t.modifiers.indexOf(e)!==0)throw Error("Position modifier has to be at first index");if(e?.position==="before"||e?.position==="after")return e.position}}function DK(t){let e=[];if(t!=null)for(let r of t)r.type==="position"?r.position==="start"?e.push({type:"startOf"}):r.position==="end"&&e.push({type:"endOf"}):e.push(r);return e.length>0?e:void 0}function GA(t){return{...t,version:7}}function Yx(t){let e=MK(t,7),{action:r,usePrePhraseSnapshot:n=!1,spokenForm:i}=e;return{version:7,spokenForm:i,action:Pm(r,o=>{let s=fl(o);$x(s),r.name}),usePrePhraseSnapshot:n}}function MK(t,e){if(t.version>7)throw new Ep;for(;t.version<e;)switch(t.version){case 0:t=IA(t);break;case 1:t=NA(t);break;case 2:t=HA(t);break;case 3:t=WA(t);break;case 4:t=jA(t);break;case 5:t=zA(t);break;case 6:t=GA(t);break;default:throw new Error(`Can't upgrade from unknown version ${t.version}`)}return t}var Zx;function zm(t){Zx=t}function P(){if(Zx==null)throw Error("Tried to access ide before it was injected");return Zx}var qm=class{constructor(e){this.maxLength=e;this.stack=[];this.index=void 0}push(e){this.index!=null?this.stack.splice(this.index+1,this.stack.length-this.index-1,e):this.stack.push(e),this.stack.length>this.maxLength&&this.stack.shift(),this.index=this.stack.length-1}undo(){if(this.index!=null&&this.index>0)return this.index--,this.stack[this.index]}redo(){if(this.index!=null&&this.index<this.stack.length-1)return this.index++,this.stack[this.index]}};var FK=25,Gm=class{constructor(){this.targetMap=new Map;this.targetHistory=new xs(()=>new qm(FK));this.notifier=new tr}set(e,r,{history:n=!1}={}){this.targetMap.set(e,r),n&&r!=null&&this.targetHistory.get(e).push(r),this.notifier.notifyListeners(e,r)}get(e){return this.targetMap.get(e)}undo(e){let r=this.targetHistory.get(e).undo();r!=null&&this.set(e,r,{history:!1})}redo(e){let r=this.targetHistory.get(e).redo();r!=null&&this.set(e,r,{history:!1})}onStoredTargets(e){for(let r of fs)e(r,this.get(r));return this.notifier.registerListener(e)}};function Pt(t){if(t.length===0)throw new Error("Require at least one target with this action");let e=t.map(r=>r.editor);if(new Set(e).size>1)throw new Error("Can only have one editor with this action");return e[0]}function Ar(t){if(t.length!==1)throw new Error("Can only have one target with this action");return t[0]}async function Ai(t,e,r){return Promise.all(Xx(t,e).map(([n,i])=>r(n,i)))}async function mt(t,e){return Ai(t,r=>r.editor,e)}async function KA(t,e){let r=Xx(t,i=>i.editor),n=[];for(let[i,o]of r)n.push(await e(i,o));return n}function QA(t){return Xx(t,e=>e.editor)}function Xx(t,e){let n=cl(t,i=>e(i).document.uri);return Array.from(n.values(),i=>[e(i[0]),i])}function pn(t,e){return e!=null?Ft(t,e).map(([n,i])=>({editor:n.editor,selection:n?.isReversed?new ut(i.end,i.start):new ut(i.start,i.end)})):t.map(n=>({editor:n.editor,selection:n.contentSelection}))}function mn(t,e){return t.textualType==="line"?Wr(e):fr(e)}function CK(t){return mn(t,t.contentRange)}function We(t,e,r,n=CK){return t.flashRanges(e.map(i=>({editor:i.editor,range:n(i),style:r})))}function so(t,e){return new Z(new Re(e.start.line,0),t.document.lineAt(e.end).range.end)}function Jx(t,e){return e.isEmpty?0:t.document.offsetAt(e.end)-t.document.offsetAt(e.start)}function YA(t,e){let[r,n]=e instanceof Re?[e,e]:[e.start,e.end];return t.start.isBefore(r)&&t.end.isAfter(n)}function Pi(t,...e){for(let r of e)r!=null&&(t=t.union(r));return t}var Km=class t{constructor(e,r,n){this.target=e;this.insertionMode=r;this.contentRange=OK(e.contentRange,r),this.isBefore=r==="before",this.isLineDelimiter=e.insertionDelimiter.includes(`
`),this.indentationString=n??this.isLineDelimiter?IK(e.editor,e.contentRange):"",this.insertionPrefix=e.prefixRange!=null?e.editor.document.getText(e.prefixRange):void 0}get contentSelection(){return this.contentRange.toSelection(this.target.isReversed)}get editor(){return this.target.editor}get insertionDelimiter(){return this.target.insertionDelimiter}get isRaw(){return this.target.isRaw}withTarget(e){return new t(e,this.insertionMode,this.indentationString)}getEditNewActionType(){return this.insertionMode==="after"&&this.target.contentRange.isSingleLine&&this.insertionDelimiter===`
`&&this.insertionPrefix==null?"insertLineAfter":"edit"}constructChangeEdit(e,r=!1){return this.insertionMode==="before"||this.insertionMode==="after"?this.constructEditWithDelimiters(e,r):this.constructEditWithoutDelimiters(e)}constructEditWithDelimiters(e,r){let n=this.getEditRange(),i=this.getEditText(e,r),o=s=>this.updateRange(s,e,r);return{range:n,text:i,isReplace:this.insertionMode==="after",updateRange:o}}constructEditWithoutDelimiters(e){return{range:this.contentRange,text:e,updateRange:r=>r}}getEditRange(){let e=(()=>{let r=this.isBefore?Pi(this.target.contentRange,this.target.prefixRange).start:this.target.contentRange.end;if(this.isLineDelimiter){let n=this.editor.document.lineAt(r),i=this.isBefore?n.rangeTrimmed?.start??n.range.start:n.rangeTrimmed?.end??n.range.end;if(r.isEqual(i))return this.isBefore?n.range.start:n.range.end}return r})();return new Z(e,e)}getEditText(e,r){let i=(r?"":this.indentationString)+(this.insertionPrefix??"")+e;return this.isBefore?i+this.insertionDelimiter:this.insertionDelimiter+i}updateRange(e,r,n){let i=this.editor.document.offsetAt(e.start)+(n?0:this.indentationString.length)+(this.insertionPrefix?.length??0),o=this.isBefore?i:i+this.getLengthOfInsertionDelimiter(),s=o+r.length;return new Z(this.editor.document.positionAt(o),this.editor.document.positionAt(s))}getLengthOfInsertionDelimiter(){if(this.editor.document.eol==="CRLF"){let e=this.insertionDelimiter.match(/\n/g);if(e!=null)return this.insertionDelimiter.length+e.length}return this.insertionDelimiter.length}};function IK(t,e){let r=Number.MAX_SAFE_INTEGER,n="";for(let i=e.start.line;i<=e.end.line;++i){let o=t.document.lineAt(i);if(o.range.isEmpty||o.isEmptyOrWhitespace&&!e.isSingleLine)continue;let s=o.rangeTrimmed?.start??o.range.end;s.character<r&&(r=s.character,n=o.text.slice(0,r))}return n}function OK(t,e){switch(e){case"before":return t.start.toEmptyRange();case"after":return t.end.toEmptyRange();case"to":return t}}function bs(t,e,r,n){return NK(t.contentRange,e.contentRange,r,n)}function NK(t,e,r,n){return new Z(r?t.start:t.end,n?e.end:e.start)}function ws(t,e,r,n){let i=r?t.contentRange.start:new Re(t.contentRange.end.line+1,0),o=n?e.contentRange.end:e.editor.document.lineAt(e.contentRange.start.line-1).range.end;return new Z(i,o)}var Ke=class t{constructor(e){this.hasExplicitScopeType=!0;this.hasExplicitRange=!0;this.isRaw=!1;this.isImplicit=!1;this.isNotebookCell=!1;this.textualType="token";this.state={editor:e.editor,isReversed:e.isReversed,contentRange:e.contentRange,thatTarget:e.thatTarget}}get editor(){return this.state.editor}get isReversed(){return this.state.isReversed}get thatTarget(){return this.state.thatTarget!=null?this.state.thatTarget.thatTarget:this}get contentText(){return this.editor.document.getText(this.contentRange)}get contentSelection(){return this.contentRange.toSelection(this.isReversed)}get contentRange(){return this.state.contentRange}constructRemovalEdit(){return{range:this.getRemovalRange(),text:"",updateRange:e=>e}}getRemovalHighlightRange(){return mn(this,this.getRemovalRange())}withThatTarget(e){return this.cloneWith({thatTarget:e})}withContentRange(e){return this.cloneWith({contentRange:e})}getInterior(){}getBoundary(){}cloneWith(e){let r=Object.getPrototypeOf(this).constructor;return new r({...this.getCloneParameters(),...e})}maybeCreateRichRangeTarget(e,r){let{constructor:n}=Object.getPrototypeOf(this);return new n({...this.getCloneParameters(),isReversed:e,contentRange:bs(this,r,!0,!0)})}isEqual(e){return e instanceof t&&_i(this.getEqualityParameters(),e.getEqualityParameters())}getEqualityParameters(){let{thatTarget:e,...r}=this.getCloneParameters();return{...r}}toDestination(e){return new Km(this,e)}toPlainObject(){return{type:this.type,contentRange:Jc(this.contentRange),isReversed:this.isReversed,hasExplicitRange:this.hasExplicitRange}}};function ta(t,e){let{document:r}=t,n=r.getText(e),i=n.length-n.trimStart().length,o=n.length-n.trimEnd().length,s=r.offsetAt(e.start)+i,l=r.offsetAt(e.end)-o,u=r.positionAt(s),m=r.positionAt(l);return new Z(u,m)}function Qm(t,e,r,n){return r==null?void 0:new t({editor:e,isReversed:n,contentRange:r})}var Xe=class extends Ke{constructor(r){super(r);this.type="PlainTarget";this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.textualType=r.textualType??"token",this.insertionDelimiter=r.insertionDelimiter??""}getCloneParameters(){return{...this.state,textualType:this.textualType,insertionDelimiter:this.insertionDelimiter}}};function Es(t,e,r){return Qm(Xe,t,e,r)}var Ym=class extends Ke{constructor(r){super(r);this.type="DocumentTarget";this.textualType="line";this.insertionDelimiter=`

`}getInterior(){return[new Xe({editor:this.editor,isReversed:this.isReversed,contentRange:ta(this.editor,this.contentRange)})]}getRemovalRange(){return this.contentRange}getLeadingDelimiterTarget(){}getTrailingDelimiterTarget(){}getCloneParameters(){return this.state}};var dr=class t extends Ke{constructor(){super(...arguments);this.type="LineTarget";this.textualType="line";this.insertionDelimiter=`
`;this.getRemovalHighlightRange=()=>Wr(this.fullLineContentRange)}get fullLineContentRange(){return so(this.editor,this.contentRange)}getLeadingDelimiterTarget(){return Es(this.editor,UK(this.editor,this.fullLineContentRange),this.isReversed)}getTrailingDelimiterTarget(){return Es(this.editor,HK(this.editor,this.fullLineContentRange),this.isReversed)}getRemovalRange(){let r=this.fullLineContentRange,n=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return n==null?r:r.union(n.contentRange)}maybeCreateRichRangeTarget(r,n){return new t({editor:this.editor,isReversed:r,contentRange:ws(this,n,!0,!0)})}getCloneParameters(){return this.state}};function UK(t,e){let{start:r}=e;return r.line>0?new Z(t.document.lineAt(r.line-1).range.end,e.start):void 0}function HK(t,e){let{end:r}=e;return r.line+1<t.document.lineCount?new Z(e.end,new Re(r.line+1,0)):void 0}function eS(t,e,r){return Qm(dr,t,e,r)}var Zm=class t{constructor(e,r){this.target=e;this.insertionMode=r}get editor(){return this.target.editor}get contentRange(){return this.target.contentRange}get contentSelection(){return this.target.contentSelection}get insertionDelimiter(){return this.target.insertionDelimiter}get isRaw(){return this.target.isRaw}withTarget(e){return new t(e,this.insertionMode)}getEditNewActionType(){throw new Error("Method not implemented.")}constructChangeEdit(e){throw new Error("Method not implemented.")}};var Xm=class extends Ke{constructor(r){super(r);this.type="NotebookCellTarget";this.insertionDelimiter=`
`;this.isNotebookCell=!0;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange}getCloneParameters(){return this.state}toDestination(r){return new Zm(this,r)}};var co=class t extends Ke{constructor(){super(...arguments);this.type="ParagraphTarget";this.textualType="line";this.insertionDelimiter=`

`}getLeadingDelimiterTarget(){return eS(this.editor,BK(this.editor,this.fullLineContentRange),this.isReversed)}getTrailingDelimiterTarget(){return eS(this.editor,VK(this.editor,this.fullLineContentRange),this.isReversed)}getRemovalRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.contentRange.union(r.contentRange):this.contentRange;return new dr({contentRange:n,editor:this.editor,isReversed:this.isReversed}).getRemovalRange()}get fullLineContentRange(){return so(this.editor,this.contentRange)}getRemovalHighlightRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.fullLineContentRange.union(r.contentRange):this.fullLineContentRange;return Wr(n)}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,contentRange:ws(this,n,!0,!0)})}getCloneParameters(){return this.state}};function BK(t,e){let{document:r}=t,n=r.lineAt(e.start),i=WK(r,n);if(i!=null)return i.lineNumber+1===n.lineNumber?void 0:new Z(new Re(i.lineNumber+1,0),r.lineAt(n.lineNumber-1).range.end);if(n.lineNumber>0)return new Z(new Re(0,0),r.lineAt(n.lineNumber-1).range.end)}function VK(t,e){let{document:r}=t,n=r.lineAt(e.end),i=$K(r,n);if(i!=null)return i.lineNumber-1===n.lineNumber?void 0:new Z(new Re(n.lineNumber+1,0),r.lineAt(i.lineNumber-1).range.end);if(n.lineNumber<r.lineCount-1)return new Z(new Re(n.lineNumber+1,0),r.lineAt(r.lineCount-1).range.end)}function WK(t,e){for(;e.lineNumber>0;){let r=t.lineAt(e.lineNumber-1);if(!r.isEmptyOrWhitespace)return r;e=r}return null}function $K(t,e){for(;e.lineNumber+1<t.lineCount;){let r=t.lineAt(e.lineNumber+1);if(!r.isEmptyOrWhitespace)return r;e=r}return null}var lo=class extends Ke{constructor(){super(...arguments);this.type="RawSelectionTarget";this.textualType="character";this.insertionDelimiter="";this.isRaw=!0;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.getCloneParameters=()=>this.state}};function yl(t){let e=Pi(t.contentRange,t.prefixRange),r=t.getTrailingDelimiterTarget()??t.getLeadingDelimiterTarget();return r!=null?e.union(r.contentRange):e}var jK=['"',"'","(","[","{","<"],zK=['"',"'",")","]","}",">",",",";",":"];function Qn(t){let{editor:e}=t,{start:r}=Pi(t.contentRange,t.prefixRange),o=e.document.lineAt(r).text.slice(0,r.character).match(/\s+$/);return o==null?void 0:new Xe({contentRange:new Z(r.line,r.character-o[0].length,r.line,r.character),editor:e,isReversed:t.isReversed})}function Yn(t){let{editor:e}=t,{end:r}=t.contentRange,o=e.document.lineAt(r).text.slice(r.character).match(/^\s+/);return o==null?void 0:new Xe({contentRange:new Z(r.line,r.character,r.line,r.character+o[0].length),editor:e,isReversed:t.isReversed})}function uo(t){let{editor:e}=t,r=Pi(t.contentRange,t.prefixRange),{start:n,end:i}=r,o=t.getLeadingDelimiterTarget()?.contentRange??n.toEmptyRange(),s=t.getTrailingDelimiterTarget()?.contentRange??i.toEmptyRange(),l=so(e,r);return o.union(s).isRangeEqual(l)?l:!s.isEmpty&&(!o.isEmpty||r.start.isEqual(l.start)||jK.includes(qK(e,r)))?r.union(s):!o.isEmpty&&(r.end.isEqual(l.end)||zK.includes(GK(e,r)))?r.union(o):r}function qK(t,e){let{start:r}=e,n=t.document.lineAt(r);return r.isAfter(n.range.start)?t.document.getText(new Z(r.translate(void 0,-1),r)):""}function GK(t,e){let{end:r}=e,n=t.document.lineAt(r);return r.isBefore(n.range.end)?t.document.getText(new Z(r.translate(void 0,1),r)):""}var nr=class extends Ke{constructor(){super(...arguments);this.type="TokenTarget";this.textualType="token";this.insertionDelimiter=" "}getLeadingDelimiterTarget(){return Qn(this)}getTrailingDelimiterTarget(){return Yn(this)}getRemovalRange(){return uo(this)}getCloneParameters(){return this.state}};function tS(t){let{editor:e,isReversed:r}=t,{document:n}=e,i=Pi(t.contentRange,t.prefixRange);return KK(n,i)?QK(n,i)?new co({editor:e,isReversed:r,contentRange:i}):new dr({editor:e,isReversed:r,contentRange:i}):new nr({editor:e,isReversed:r,contentRange:i})}function KK(t,e){let r=t.lineAt(e.start).rangeTrimmed?.start,n=t.lineAt(e.end).rangeTrimmed?.end;return r!=null&&n!=null&&r.isEqual(e.start)&&n.isEqual(e.end)}function QK(t,e){let{start:r,end:n}=e;return(r.line===0||t.lineAt(r.line-1).isEmptyOrWhitespace)&&(n.line===t.lineCount-1||t.lineAt(n.line+1).isEmptyOrWhitespace)}var _s=class t extends Ke{constructor(r){super(r);this.type="ScopeTypeTarget";this.scopeTypeType_=r.scopeTypeType,this.removalRange_=r.removalRange,this.leadingDelimiterRange_=r.leadingDelimiterRange,this.trailingDelimiterRange_=r.trailingDelimiterRange,this.prefixRange=r.prefixRange,this.insertionDelimiter=r.insertionDelimiter??YK(r.scopeTypeType),this.hasDelimiterRange_=!!this.leadingDelimiterRange_||!!this.trailingDelimiterRange_}getLeadingDelimiterTarget(){if(this.leadingDelimiterRange_!=null)return new Xe({editor:this.editor,isReversed:this.isReversed,contentRange:this.leadingDelimiterRange_});if(!this.hasDelimiterRange_)return Qn(this)}getTrailingDelimiterTarget(){if(this.trailingDelimiterRange_!=null)return new Xe({editor:this.editor,isReversed:this.isReversed,contentRange:this.trailingDelimiterRange_});if(!this.hasDelimiterRange_)return Yn(this)}getRemovalRange(){return this.removalRange_!=null?this.removalRange_:this.hasDelimiterRange_?yl(this):tS(this).getRemovalRange()}getRemovalHighlightRange(){return this.removalRange_!=null?mn(this,this.removalRange_):this.hasDelimiterRange_?mn(this,yl(this)):tS(this).getRemovalHighlightRange()}maybeCreateRichRangeTarget(r,n){if(this.scopeTypeType_!==n.scopeTypeType_)return null;let i=this.removalRange_!=null||n.removalRange_!=null?(this.removalRange_??this.contentRange).union(n.removalRange_??n.contentRange):void 0;return new t({...this.getCloneParameters(),isReversed:r,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:n.trailingDelimiterRange_,removalRange:i,contentRange:this.contentRange.union(n.contentRange)})}getCloneParameters(){return{...this.state,insertionDelimiter:this.insertionDelimiter,prefixRange:this.prefixRange,removalRange:void 0,interiorRange:void 0,scopeTypeType:this.scopeTypeType_,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:this.trailingDelimiterRange_}}};function YK(t){switch(t){case"class":case"namedFunction":case"section":case"sectionLevelOne":case"sectionLevelTwo":case"sectionLevelThree":case"sectionLevelFour":case"sectionLevelFive":case"sectionLevelSix":case"part":case"chapter":case"subSection":case"subSubSection":case"namedParagraph":case"subParagraph":return`

`;case"anonymousFunction":case"statement":case"ifStatement":case"comment":case"xmlElement":case"collectionItem":case"branch":case"environment":return`
`;default:return" "}}var Jm=class t extends Ke{constructor(r){super(r);this.type="SubTokenWordTarget";this.textualType="word";this.leadingDelimiterRange_=r.leadingDelimiterRange,this.trailingDelimiterRange_=r.trailingDelimiterRange,this.insertionDelimiter=r.insertionDelimiter}getLeadingDelimiterTarget(){return Es(this.editor,this.leadingDelimiterRange_,this.isReversed)}getTrailingDelimiterTarget(){return Es(this.editor,this.trailingDelimiterRange_,this.isReversed)}getRemovalRange(){return yl(this)}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,contentRange:bs(this,n,!0,!0),trailingDelimiterRange:n.trailingDelimiterRange_})}getCloneParameters(){return{...this.state,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:this.trailingDelimiterRange_,insertionDelimiter:this.insertionDelimiter}}};var Rs=class t extends Ke{constructor(r){super({...r,contentRange:ta(r.editor,r.fullInteriorRange)});this.type="InteriorTarget";this.insertionDelimiter=" ";this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.fullInteriorRange;this.fullInteriorRange=r.fullInteriorRange}getCloneParameters(){return{...this.state,fullInteriorRange:this.fullInteriorRange}}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,fullInteriorRange:this.fullInteriorRange.union(n.fullInteriorRange)})}};var ef=class extends Ke{constructor(r){super(r);this.type="SurroundingPairTarget";this.insertionDelimiter=" ";this.boundary_=r.boundary,this.interiorRange_=r.interiorRange}getLeadingDelimiterTarget(){return Qn(this)}getTrailingDelimiterTarget(){return Yn(this)}getRemovalRange(){return uo(this)}getInterior(){return[new Rs({editor:this.editor,isReversed:this.isReversed,fullInteriorRange:this.interiorRange_})]}getBoundary(){return this.boundary_.map(r=>new nr({editor:this.editor,isReversed:this.isReversed,contentRange:r}))}getCloneParameters(){return{...this.state,interiorRange:this.interiorRange_,boundary:this.boundary_}}};var Ht=class extends Ke{constructor(r){super(r);this.type="UntypedTarget";this.insertionDelimiter=" ";this.hasExplicitScopeType=!1;this.hasExplicitRange=r.hasExplicitRange,this.textualType=r.textualType??"token"}getLeadingDelimiterTarget(){return Qn(this)}getTrailingDelimiterTarget(){return Yn(this)}getRemovalRange(){return this.editor.document.getText(this.contentRange).trim().length===0?this.contentRange:uo(this)}maybeCreateRichRangeTarget(){return null}getCloneParameters(){return{...this.state,textualType:this.textualType,hasExplicitRange:this.hasExplicitRange}}};var tf=class extends Ke{constructor(){super(...arguments);this.type="ImplicitTarget";this.textualType="character";this.insertionDelimiter="";this.isRaw=!0;this.hasExplicitScopeType=!1;this.isImplicit=!0;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.getCloneParameters=()=>this.state}};var rf=class extends Ke{constructor(r){let{inputTarget:n,modifiedTarget:i,isHead:o}=r;super({...r,contentRange:ZA(n.contentRange,i.contentRange,o)});this.type="HeadTailTarget";this.insertionDelimiter=" ";this.inputTarget=n,this.modifiedTarget=i,this.isHead=o}getLeadingDelimiterTarget(){return Qn(this)}getTrailingDelimiterTarget(){return Yn(this)}getRemovalRange(){return uo(this)}getInterior(){let r=this.modifiedTarget.getInterior();if(r!=null)return r.map(n=>new Xe({editor:this.editor,contentRange:ZA(this.inputTarget.contentRange,n.contentRange,this.isHead),isReversed:this.isReversed}))}getCloneParameters(){return{...this.state,inputTarget:this.inputTarget,modifiedTarget:this.modifiedTarget,isHead:this.isHead}}};function ZA(t,e,r){return r?new Z(e.start,t.end):new Z(t.start,e.end)}var nf=class t extends Ke{constructor(r){super({...r,contentRange:ZK(r.paragraphTarget.contentRange,r.containingInterior.contentRange)});this.type="BoundedParagraphTarget";this.textualType="line";this.insertionDelimiter=`

`;this.containingInterior=r.containingInterior,this.paragraphTarget=r.paragraphTarget,this.startLineGap=this.contentRange.start.line-this.containingInterior.fullInteriorRange.start.line,this.endLineGap=this.containingInterior.fullInteriorRange.end.line-this.contentRange.end.line}getLeadingDelimiterTarget(){return this.startLineGap>1?this.paragraphTarget.getLeadingDelimiterTarget():void 0}getTrailingDelimiterTarget(){return this.endLineGap>1?this.paragraphTarget.getTrailingDelimiterTarget():void 0}getRemovalRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.contentRange.union(r.contentRange):this.contentRange;return this.startLineGap<=0||this.endLineGap<=0?n:new dr({contentRange:n,editor:this.editor,isReversed:this.isReversed}).getRemovalRange()}get fullLineContentRange(){return so(this.editor,this.contentRange)}getRemovalHighlightRange(){let r=(()=>{if(this.startLineGap<1||this.endLineGap<1)return this.getRemovalRange();let n=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return n!=null?this.fullLineContentRange.union(n.contentRange):this.fullLineContentRange})();return Wr(r)}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,containingInterior:this.containingInterior.maybeCreateRichRangeTarget(r,n.containingInterior),paragraphTarget:this.paragraphTarget.maybeCreateRichRangeTarget(r,n.paragraphTarget)})}getCloneParameters(){return{...this.state,paragraphTarget:this.paragraphTarget,containingInterior:this.containingInterior}}};function ZK(t,e){let r=t.intersection(e);if(r==null||r.isEmpty)throw new Error("Ranges do not intersect");return r}function of(t){return t.activeTextEditor?.selections.map(e=>({selection:e,editor:t.activeTextEditor}))??[]}var ks=class{run(){return of(P()).map(e=>new Ht({editor:e.editor,isReversed:e.selection.isReversed,contentRange:e.selection,hasExplicitRange:!e.selection.isEmpty,textualType:"character"}))}};var Zn=class{constructor(e,r){this.debouncer=new wp(r,e.getOwnConfiguration("decorationDebounceDelayMs")),this.run=this.run.bind(this)}run(){this.debouncer.run()}dispose(){this.debouncer.dispose()}};var af=class{constructor(e,r){this.ide=e;this.storedTargets=r;this.disposables=[];this.debouncer=new Zn(e.configuration,()=>this.updateKeyboardTarget()),this.disposables.push(e.configuration.onDidChangeConfiguration(()=>this.maybeActivate()),this.debouncer),this.maybeActivate()}maybeActivate(){if(this.ide.configuration.getOwnConfiguration("experimental.keyboardTargetFollowsSelection")){this.selectionWatcherDisposable==null&&(this.selectionWatcherDisposable=this.ide.onDidChangeTextEditorSelection(this.debouncer.run));return}this.selectionWatcherDisposable!=null&&(this.selectionWatcherDisposable.dispose(),this.selectionWatcherDisposable=void 0)}updateKeyboardTarget(){this.ide.activeTextEditor==null||this.storedTargets.get("keyboard")==null||this.storedTargets.set("keyboard",new ks().run())}dispose(){this.disposables.forEach(e=>e.dispose()),this.selectionWatcherDisposable?.dispose()}};var sf=class{constructor(e){this.ide=e;switch(e.disposeOnExit(this),this.evaluateSetting=this.evaluateSetting.bind(this),this.active=!0,e.runMode){case"development":this.enableDebugLog();break;case"test":this.disableDebugLog();break;case"production":this.evaluateSetting(),this.disposableConfiguration=e.configuration.onDidChangeConfiguration(this.evaluateSetting);break}}log(...e){this.active&&console.log(...e)}dispose(){this.disposableConfiguration&&this.disposableConfiguration.dispose()}enableDebugLog(){this.active=!0}disableDebugLog(){this.active=!1}evaluateSetting(){this.ide.configuration.getOwnConfiguration("debug")?this.enableDebugLog():this.disableDebugLog()}};var XK=["!","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_","`","{","|","}","~","\xA3",'"'],JK=XK.map(Vr).join("|"),e4=["[a-zA-Z0-9]",JK].join("|"),t4=new RegExp(`^(${e4})$`,"u"),r4="[unk]",n4=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}]/gu,cf=class{constructor(){this.disposables=[];this.algorithmChangeNotifier=new tr;this.getTokenGraphemes=e=>cn(e,n4,r=>({text:this.normalizeGrapheme(r[0]),tokenStartOffset:r.index,tokenEndOffset:r.index+r[0].length}));this.registerAlgorithmChangeListener=this.algorithmChangeNotifier.registerListener;P().disposeOnExit(this),this.updateTokenHatSplittingMode=this.updateTokenHatSplittingMode.bind(this),this.getTokenGraphemes=this.getTokenGraphemes.bind(this),this.updateTokenHatSplittingMode(),this.disposables.push(P().configuration.onDidChangeConfiguration(this.updateTokenHatSplittingMode))}updateTokenHatSplittingMode(){let{lettersToPreserve:e,symbolsToPreserve:r,...n}=P().configuration.getOwnConfiguration("tokenHatSplittingMode");this.tokenHatSplittingMode={lettersToPreserve:e.map(i=>i.toLowerCase().normalize("NFC")),symbolsToPreserve:r.map(i=>i.normalize("NFC")),...n},this.algorithmChangeNotifier.notifyListeners()}normalizeGrapheme(e){let{preserveCase:r,lettersToPreserve:n,symbolsToPreserve:i}=this.tokenHatSplittingMode,o=e.normalize("NFC");return i.includes(o)||(r||(o=o.toLowerCase()),n.includes(o.toLowerCase()))||(o=jT(o),t4.test(o)||(o=r4)),o}dispose(){this.disposables.forEach(({dispose:e})=>e())}};function ra(){return rS==null&&(rS=new cf),rS}var rS;var i4=["-","+","*","/","=","<",">","_","#",".","|","&",":"],o4=["!==","!=","+=","-=","*=","/=","%=","<=",">=","=>","->","??",'"""',"```","/*","*/","<!--","-->"],a4=["\\p{L}","\\p{M}","\\p{N}"],s4="[^\\s\\w]",c4="(?<![.\\d])\\d+\\.\\d+(?![.\\d])";function l4(t){let{fixedTokens:e,repeatableSymbols:r,identifierWordRegexes:n,identifierWordDelimiters:i,numbersRegex:o,singleSymbolsRegex:s}=t,l=r.map(Vr).map(x=>`${x}+`).join("|"),u=e.map(Vr).join("|"),d=`(${n.concat(i.map(Vr)).join("|")})+`,g=`(${n.join("|")})+`,y=[u,o,d,l,s].join("|");return{identifierMatcher:new RegExp(d,"gu"),wordMatcher:new RegExp(g,"gu"),tokenMatcher:new RegExp(y,"gu")}}var nS=new Map;function Pr(t){let e=P().configuration.getOwnConfiguration("wordSeparators",{languageId:t}),r=e.join("\0");if(!nS.has(r)){let n={fixedTokens:o4,repeatableSymbols:i4,identifierWordRegexes:a4,identifierWordDelimiters:e,numbersRegex:c4,singleSymbolsRegex:s4};nS.set(r,l4(n))}return nS.get(r)}function XA(t,e,r){return cn(t,Pr(e).tokenMatcher,r)}var u4=/\p{Lu}?\p{Ll}+|\p{Lu}+(?!\p{Ll})|\p{N}+/gu,As=class{constructor(e){this.wordRegex=Pr(e).wordMatcher}splitIdentifier(e){let r=Zc(e,this.wordRegex);return r.length>1?r:Zc(e,u4)}};var JA=({penalty:t})=>-t,eP=({isFirstLetter:t})=>t?-1:0;function tP(t){return({grapheme:{text:e},style:r})=>{let n=t.get({grapheme:e,hatStyle:r});return n==null?1/0:-n}}function rP(t,e){let r=jc(n=>YT(e[n].filter(i=>i>t))??1/0);return({grapheme:{text:n}})=>r(n)}function iS(t){return e=>e.grapheme.text===t?.grapheme&&e.style===t?.hatStyle?1:0}function nP(t){switch(t){case"greedy":return({penalty:e})=>-e;case"balanced":return({penalty:e})=>-(e<2?0:1);case"stable":return e=>0}}function iP(t,e){if(t.length===0)return;let r=t;for(let n of e){if(r.length===1)return r[0];r=p4(r,n)}return r[0]}function p4(t,e){let r=-1/0,n=[];for(let i of t){let o=e(i);o<r||(o>r&&(r=o,n.length=0),n.push(i))}return n}function oP({hatOldTokenRanks:t,graphemeTokenRanks:e},r,n,i,o,s){return iP(s,[iS(i),nP(r),iS(o),tP(t),JA,eP,rP(n,e)])}function aP(t,e,r){let n={},i=new oo(({grapheme:o,hatStyle:s})=>[o,s]);return t.forEach(({token:o,rank:s})=>{let l=e.get(o);l!=null&&i.set(l,s),r.getTokenGraphemes(o.text).forEach(({text:u})=>{let m;u in n?m=n[u]:(m=[],n[u]=m),m.push(s)})}),{hatOldTokenRanks:i,graphemeTokenRanks:n}}function sP(t,e=[]){return new Map(QT(st,jo)(zc([e],t.visibleRanges.map(r=>ZT(r.start.line,r.end.line+1)))).sort((r,n)=>r-n).map((r,n)=>[r,n]))}function cP(t,e){return(r,n)=>{let i=Math.abs(r.displayLine-t),o=Math.abs(n.displayLine-t);if(i<o)return-1;if(i>o)return 1;let s=Math.abs(r.range.start.character-e),l=Math.abs(n.range.start.character-e);return s-l}}function lP(t,e){let r=t.document.languageId,n=t.document.getText(e),i=t.document.offsetAt(e.start);return XA(n,r,o=>{let s=i+o.index,l=i+o.index+o[0].length,u=new Z(t.document.positionAt(s),t.document.positionAt(l));return{editor:t,text:o[0],range:u,offsets:{start:s,end:l}}})}function uP(t,e,r){let i=f4(t,e).flatMap(o=>{let s=o.selections[0].active,l=sP(o,[s.line]),u=st(o.visibleRanges.map(m=>lP(o,m).map(d=>({...d,displayLine:l.get(d.range.start.line)}))));return u.sort(cP(l.get(s.line),s.character)),u});return m4(r,i).map((o,s)=>({token:o,rank:-s}))}function m4(t,e){return t==null?e:e.sort((r,n)=>{let i=t.has(r),o=t.has(n);return i&&!o?-1:!i&&o?1:0})}function f4(t,e){let r;return t==null?r=e:r=[t,...e.filter(n=>n!==t)],r}function oS({tokenGraphemeSplitter:t,enabledHatStyles:e,forceTokenHats:r,oldTokenHats:n,hatStability:i,activeTextEditor:o,visibleTextEditors:s}){let l=r==null?void 0:pP(r),u=pP(n),m=uP(o,s,l),d=aP(m,u,t),g=Object.keys(e),y=new xs(()=>[...g]);return m.map(({token:x,rank:E})=>{let w=d4(t,x,y,e),H=oP(d,i,E,l?.get(x),u.get(x),w);if(H!=null)return y.set(H.grapheme.text,y.get(H.grapheme.text).filter(W=>W!==H.style)),g4(x,H)}).filter(x=>x!=null)}function pP(t){let e=new oo(({editor:r,offsets:n})=>[r.id,n.start,n.end]);return t.forEach(r=>e.set(r.token,r)),e}function d4(t,e,r,n){let i=[],o=t.getTokenGraphemes(e.text),s=new Set(new As(e.editor.document.languageId).splitIdentifier(e.text).map(l=>l.index));for(let l of o){let u=s.has(l.tokenStartOffset);for(let m of r.get(l.text))i.push({grapheme:l,style:m,penalty:n[m].penalty,isFirstLetter:u})}return i}function g4(t,e){return{hatStyle:e.style,grapheme:e.grapheme.text,token:t,hatRange:new Z(t.range.start.translate(void 0,e.grapheme.tokenStartOffset),t.range.start.translate(void 0,e.grapheme.tokenEndOffset))}}var lf=class{constructor(e,r){this.hats=e;this.context=r;this.disposables=[];P().disposeOnExit(this);let n=new Zn(P().configuration,()=>this.allocateHats());this.disposables.push(this.hats.onDidChangeEnabledHatStyles(n.run),this.hats.onDidChangeIsEnabled(n.run),P().onDidOpenTextDocument(n.run),P().onDidCloseTextDocument(n.run),P().onDidChangeActiveTextEditor(n.run),P().onDidChangeVisibleTextEditors(n.run),P().onDidChangeTextDocument(n.run),P().onDidChangeTextEditorSelection(n.run),P().onDidChangeTextEditorVisibleRanges(n.run),ra().registerAlgorithmChangeListener(n.run),n)}async allocateHats(e){let r=await this.context.getActiveMap();e=e?.map(i=>({...i,grapheme:ra().normalizeGrapheme(i.grapheme)}));let n=this.hats.isEnabled?oS({tokenGraphemeSplitter:ra(),enabledHatStyles:this.hats.enabledHatStyles,forceTokenHats:e,oldTokenHats:r.tokenHats,hatStability:P().configuration.getOwnConfiguration("experimental.hatStability"),activeTextEditor:P().activeTextEditor,visibleTextEditors:P().visibleTextEditors}):[];r.setTokenHats(n),await this.hats.setHatRanges(n.map(({hatStyle:i,hatRange:o,token:{editor:s}})=>({editor:s,range:o,styleName:i})))}dispose(){this.disposables.forEach(({dispose:e})=>e())}};var uf=class t{constructor(e){this.rangeUpdater=e;this.isExpired=!1;this.documentTokenLists=new Map;this.deregisterFunctions=[];this.map={};this._tokenHats=[]}get tokenHats(){return this._tokenHats}getDocumentTokenList(e){let r=e.uri.toString(),n=this.documentTokenLists.get(r);return n==null&&(n=[],this.documentTokenLists.set(r,n),this.deregisterFunctions.push(this.rangeUpdater.registerRangeInfoList(e,n))),n}clone(){let e=new t(this.rangeUpdater);return e.setTokenHats(this._tokenHats),e}setTokenHats(e){this.map={},this.documentTokenLists=new Map,this.deregisterFunctions.forEach(n=>n());let r=e.map(n=>{let{hatStyle:i,grapheme:o,token:s}=n,l=this.makeTokenLive(s);return this.map[ul(i,o)]=l,{...n,token:l}});this._tokenHats=r}makeTokenLive(e){let{tokenMatcher:r}=Pr(e.editor.document.languageId),n={...e,expansionBehavior:{start:{type:"regex",regex:r},end:{type:"regex",regex:r}}};return this.getDocumentTokenList(e.editor.document).push(n),n}getEntries(){return this.checkExpired(),Object.entries(this.map)}getToken(e,r){return this.checkExpired(),this.map[ul(e,ra().normalizeGrapheme(r))]}checkExpired(){if(this.isExpired)throw Error("Map snapshot has expired")}dispose(){this.isExpired=!0,this.deregisterFunctions.forEach(e=>e())}};var h4=6e4,pf=class{constructor(e,r,n,i){this.debug=r;this.commandServerApi=i;this.prePhraseMapsSnapshotTimestamp=null;this.lastSignalVersion=null;P().disposeOnExit(this),this.activeMap=new uf(e),this.getActiveMap=this.getActiveMap.bind(this),this.allocateHats=this.allocateHats.bind(this),this.hatAllocator=new lf(n,{getActiveMap:this.getActiveMap})}allocateHats(e){return this.hatAllocator.allocateHats(e)}async getActiveMap(){return await this.maybeTakePrePhraseSnapshot(),this.activeMap}async getReadableMap(e){return await this.maybeTakePrePhraseSnapshot(),e?this.lastSignalVersion==null?(console.error("Pre phrase snapshot requested but no signal was present; please upgrade command client"),this.activeMap):this.prePhraseMapSnapshot==null?(console.error("Navigation map pre-phrase snapshot requested, but no snapshot has been taken"),this.activeMap):performance.now()-this.prePhraseMapsSnapshotTimestamp>h4?(console.error("Navigation map pre-phrase snapshot requested, but snapshot is more than a minute old"),this.activeMap):this.prePhraseMapSnapshot:this.activeMap}dispose(){this.activeMap.dispose(),this.prePhraseMapSnapshot!=null&&this.prePhraseMapSnapshot.dispose()}async maybeTakePrePhraseSnapshot(){let e=await this.commandServerApi.signals.prePhrase.getVersion();e!==this.lastSignalVersion&&(this.debug.log("taking snapshot"),this.lastSignalVersion=e,e!=null&&this.takePrePhraseSnapshot())}takePrePhraseSnapshot(){this.prePhraseMapSnapshot!=null&&this.prePhraseMapSnapshot.dispose(),this.prePhraseMapSnapshot=this.activeMap.clone(),this.prePhraseMapsSnapshotTimestamp=performance.now()}};function aS(t,e,r){let n=t.get(e);return n==null&&(n=r(),t.set(e,n)),n}var uS=an(xl(),1);function pS(t,e){let{originalOffsets:{start:r,end:n},finalOffsets:{end:i},displacement:o}=t,{offsets:{start:s,end:l}}=e;return(0,uS.invariant)(n>r,()=>"Change range expected to be nonempty"),(0,uS.invariant)(n>=s&&r<=l,()=>"Change range expected to intersect with selection range"),{start:n<=s?s+o:Math.min(s,i),end:n<=l?l+o:Math.min(l,i)}}var yP=an(xl(),1);function mS(t,e){let{event:{text:r,isReplace:n},finalOffsets:{start:i,end:o}}=t;if((0,yP.invariant)(i===t.originalOffsets.end&&i===e.offsets.start&&i===e.offsets.end,()=>"Selection range and change range expected to be same empty range"),n){let s=e.expansionBehavior.end;switch(s.type){case"closed":return{start:i,end:i};case"open":return{start:i,end:o};case"regex":{let l=r.match(lm(s.regex));return l==null?{start:i,end:i}:{start:i,end:i+l[0].length}}}}else{let s=e.expansionBehavior.start;switch(s.type){case"closed":return{start:o,end:o};case"open":return{start:i,end:o};case"regex":{let l=r.search(cm(s.regex));return l===-1?{start:o,end:o}:{start:i+l,end:o}}}}}var fS=an(xl(),1);function dS(t,e){let{event:{text:r},originalOffsets:{start:n},displacement:i}=t,{offsets:{start:o,end:s},text:l}=e;if((0,fS.invariant)(s>o,()=>"Selection range expected to be nonempty"),(0,fS.invariant)(n>=o&&n<=s,()=>"Insertion offset expected to intersect with selection range"),n>o&&n<s)return{start:o,end:s+i};if(n===o){let u=e.expansionBehavior.start,m=s+i;switch(u.type){case"closed":return{start:o+i,end:m};case"open":return{start:o,end:m};case"regex":{let d=r+l,g=cm(u.regex),y=d.search(g);for(;y>r.length;)d=d.slice(0,y),y=d.search(g);return y===-1?{start:o,end:m}:{start:o+y,end:m}}}}else{let u=e.expansionBehavior.end,m=o;switch(u.type){case"closed":return{start:m,end:s};case"open":return{start:m,end:s+i};case"regex":{let d=l+r,g=lm(u.regex),y=d.match(g),x=y==null?0:y[0].length;for(;x!==0&&x<l.length;)d=l.slice(x)+r,y=d.match(g),x=y==null?0:x+y[0].length;return x===0?{start:m,end:s}:{start:m,end:o+x}}}}}function TP(t,e,r){let{start:n,end:i}=t.originalOffsets,{start:o,end:s}=e.offsets,l=Math.min(n,o),u="";return o<n&&(u+=e.text.substring(0,n-o)),u+=t.event.text,i<s&&(u+=e.text.substring(s-i,e.text.length)),u.substring(r.start-l,r.end-l)}function xP(t,e){let{document:r,contentChanges:n}=t,i=n.map(o=>{let s=o.text.length-o.rangeLength,l=o.rangeOffset,u=l+o.rangeLength,m=l,d=u+s;return{displacement:s,event:o,originalOffsets:{start:l,end:u},finalOffsets:{start:m,end:d}}});for(let o of e){let s=o.offsets,l=i.map(m=>{let d;return m.originalOffsets.start>s.end?{start:0,end:0}:m.originalOffsets.end<s.start?{start:m.displacement,end:m.displacement}:(m.event.rangeLength===0?o.range.isEmpty?d=mS(m,o):d=dS(m,o):d=pS(m,o),o.text=TP(m,o,d),{start:d.start-s.start,end:d.end-s.end})}),u={start:s.start+rm(l,({start:m})=>m),end:s.end+rm(l,({end:m})=>m)};o.range=o.range.with(r.positionAt(u.start),r.positionAt(u.end)),o.offsets=u}}var ff=class{constructor(){this.rangeInfoLists=new Map;this.replaceEditLists=new Map;this.listenForDocumentChanges()}getDocumentRangeInfoLists(e){return aS(this.rangeInfoLists,e.uri.toString(),()=>[])}getDocumentReplaceEditLists(e){return aS(this.replaceEditLists,e.uri.toString(),()=>[])}registerRangeInfoList(e,r){let n=this.getDocumentRangeInfoLists(e);return n.push(r),()=>mr(n,r)}registerReplaceEditList(e,r){let n=this.getDocumentReplaceEditLists(e);return n.push(r),()=>mr(n,r)}*documentRangeInfoGenerator(e){let r=this.getDocumentRangeInfoLists(e);for(let n of r)for(let i of n)yield i}listenForDocumentChanges(){this.disposable=P().onDidChangeTextDocument(e=>{let r=this.getDocumentReplaceEditLists(e.document),n={...e,contentChanges:e.contentChanges.map(i=>_4(r,i)?{...i,isReplace:!0}:i)};xP(n,this.documentRangeInfoGenerator(e.document))})}dispose(){this.disposable.dispose()}};function _4(t,e){for(let r of t)for(let n of r)if(n.range.isRangeEqual(e.range)&&n.text===e.text)return!0;return!1}var df=class{constructor(){this.signals={prePhrase:{getVersion(){return Promise.resolve(null)}}}}getFocusedElementType(){return Promise.resolve(void 0)}};var gf=class{async allocateHats(){}async getReadableMap(){return{getEntries(){return[]},getToken(){throw new Error("Hat map is disabled")}}}dispose(){}};var hf=class{onDidChangeDefinition(e){return{dispose:()=>{}}}loadLanguage(e){return Promise.resolve()}get(e){}getNodeAtLocation(e,r){}dispose(){}};var yf=class{getSnippetStrict(e){throw new Error("Snippets are not implemented.")}openNewSnippetFile(e,r){throw new Error("Snippets are not implemented.")}};var Tf=class{getSpokenFormEntries(){throw new Ts}onDidChange(){return{dispose:()=>{}}}};var xf=class{getTree(e){throw new Error("Tree sitter not provided")}loadLanguage(e){return Promise.resolve(!1)}getNodeAtLocation(e,r){throw new Error("Tree sitter not provided")}createQuery(e,r){throw new Error("Tree sitter not provided")}};var ft=class extends Error{constructor(r,n=!1,i=!1){super(`No spoken form for: ${r}`);this.reason=r;this.requiresTalonUpdate=n;this.isPrivate=i}};var SP={curlyBrackets:["{","}"],angleBrackets:["<",">"],escapedDoubleQuotes:['\\"','\\"'],escapedSingleQuotes:["\\'","\\'"],escapedParentheses:["\\(","\\)"],escapedSquareBrackets:["\\[","\\]"],doubleQuotes:['"','"'],parentheses:["(",")"],backtickQuotes:["`","`"],squareBrackets:["[","]"],singleQuotes:["'","'"],tripleBacktickQuotes:["```","```"],tripleDoubleQuotes:['"""','"""'],tripleSingleQuotes:["'''","'''"],whitespace:[" "," "],any:null,string:null,collectionBoundary:null};var vP=new oo(t=>t);for(let[t,e]of Object.entries(SP))e!=null&&vP.set(e,t);function bP(t,e,r){let n=vP.get([e,r]);if(n==null)throw Error(`Unknown surrounding pair delimiters '${e} ${r}'`);return t.pairedDelimiter[n]}function wP(t){throw new ft(`${t.type} insertion snippet`)}function EP(t){throw new ft(`${t.type} wrap with snippet`)}function Sl(t,e,r){let n=r==="vertical"?`${_t.verticalRange} `:"";if(t&&e)return n+_t.rangeExclusive;if(t)throw new ft("Range exclude anchor");return e?n+_t.rangeExcludingEnd:r==="vertical"?_t.verticalRange:_t.rangeInclusive}function _P(t){return Object.fromEntries(Object.entries(t).map(([e,r])=>[e,Object.fromEntries(Object.entries(r).map(([n,i])=>[n,{type:"customizable",spokenForms:i,spokenFormType:e,id:n}]))]))}var R4=["zero","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen","twenty","twenty one","twenty two","twenty three","twenty four","twenty five","twenty six","twenty seven","twenty eight","twenty nine","thirty","thirty one","thirty two","thirty three","thirty four","thirty five","thirty six","thirty seven","thirty eight","thirty nine","forty","forty one","forty two","forty three","forty four","forty five","forty six","forty seven","forty eight","forty nine","fifty","fifty one","fifty two","fifty three","fifty four","fifty five","fifty six","fifty seven","fifty eight","fifty nine","sixty","sixty one","sixty two","sixty three","sixty four","sixty five","sixty six","sixty seven","sixty eight","sixty nine","seventy","seventy one","seventy two","seventy three","seventy four","seventy five","seventy six","seventy seven","seventy eight","seventy nine","eighty","eighty one","eighty two","eighty three","eighty four","eighty five","eighty six","eighty seven","eighty eight","eighty nine","ninety","ninety one","ninety two","ninety three","ninety four","ninety five","ninety six","ninety seven","ninety eight","ninety nine"],k4=["zeroth","first","second","third","fourth","fifth","sixth","seventh","eighth","ninth","tenth","eleventh","twelfth","thirteenth","fourteenth","fifteenth","sixteenth","seventeenth","eighteenth","nineteenth","twentieth"];function Ps(t){let e=R4[t];if(e==null)throw Error(`Unknown number '${t}'`);return e}function vl(t){let e=k4[t];if(e==null)throw Error(`Unknown ordinal '${t}'`);return e}var Sf=class{constructor(e){this.spokenFormMap=e;this.handleModifier=this.handleModifier.bind(this)}handlePrimitiveTarget(e){let r=[];return e.modifiers!=null&&r.push(e.modifiers.map(this.handleModifier)),e.mark!=null&&r.push(this.handleMark(e.mark)),r}handleModifier(e){switch(e.type){case"cascading":case"modifyIfUntyped":case"preferredScope":throw new ft(`Modifier '${e.type}'`);case"containingScope":return e.ancestorIndex==null||e.ancestorIndex===0?this.handleScopeType(e.scopeType):[new Array(e.ancestorIndex).fill(this.spokenFormMap.modifierExtra.ancestor),this.handleScopeType(e.scopeType)];case"everyScope":return[this.spokenFormMap.simpleModifier.everyScope,this.handleScopeType(e.scopeType)];case"extendThroughStartOf":case"extendThroughEndOf":{let r=this.spokenFormMap.simpleModifier[e.type];return e.modifiers!=null?[r,e.modifiers.map(this.handleModifier)]:[r]}case"relativeScope":return e.offset===0?this.handleRelativeScopeInclusive(e):this.handleRelativeScopeExclusive(e);case"ordinalScope":{let r=this.handleScopeType(e.scopeType),n=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.length===1)return e.start===-1?[n,this.spokenFormMap.modifierExtra.last,r]:e.start===0?[n,this.spokenFormMap.modifierExtra.first,r]:e.start<0?[n,vl(Math.abs(e.start)),this.spokenFormMap.modifierExtra.last,r]:[n,vl(e.start+1),r];let i=Ps(e.length);if(e.start===0)return[n,this.spokenFormMap.modifierExtra.first,i,bl(r)];if(e.start===-e.length)return[n,this.spokenFormMap.modifierExtra.last,i,bl(r)];throw new ft(`'${e.type}' with count > 1 and offset away from start / end`)}case"range":{if(e.anchor.type==="ordinalScope"&&e.active.type==="ordinalScope"&&e.anchor.length===1&&e.active.length===1&&e.anchor.scopeType.type===e.active.scopeType.type){let r=e.anchor.start===-1?this.spokenFormMap.modifierExtra.last:vl(e.anchor.start+1),n=this.handleModifier(e.active),i=Sl(e.excludeAnchor,e.excludeActive);return[r,i,n]}throw Error(`Modifier '${e.type}' is not fully implemented`)}default:return[this.spokenFormMap.simpleModifier[e.type]]}}handleRelativeScopeInclusive(e){let r=this.handleScopeType(e.scopeType),n=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.length===1){let s=e.direction==="forward"?_t.forward:_t.backward;return[n,r,s]}let i=Ps(e.length),o=bl(r);return e.direction==="forward"?[n,i,o]:[n,i,o,_t.backward]}handleRelativeScopeExclusive(e){let r=this.handleScopeType(e.scopeType),n=e.direction==="forward"?_t.next:_t.previous,i=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.offset===1){let o=Ps(e.length);if(e.length===1)return[i,n,r];let s=bl(r);return[i,n,o,s]}if(e.length===1){let o=vl(e.offset);return[i,o,n,r]}throw new ft(`${e.type} modifier with offset > 1 and length > 1`)}handleScopeType(e){switch(e.type){case"oneOf":case"surroundingPairInterior":throw new ft(`Scope type '${e.type}'`);case"glyph":return[this.spokenFormMap.complexScopeTypeType.glyph,kP(this.spokenFormMap.grapheme,"grapheme",e.character)];case"surroundingPair":{let r=this.spokenFormMap.pairedDelimiter[e.delimiter];return e.forceDirection!=null?[this.spokenFormMap.surroundingPairForceDirection[e.forceDirection],r]:r}case"customRegex":return this.spokenFormMap.customRegex[e.regex]??{type:"customizable",spokenForms:{spokenForms:[],isCustom:!0,defaultSpokenForms:[],requiresTalonUpdate:!1,isPrivate:!1},spokenFormType:"customRegex",id:e.regex};case"interior":return this.spokenFormMap.simpleModifier.interiorOnly;default:return this.spokenFormMap.simpleScopeTypeType[e.type]}}handleMark(e){switch(e.type){case"decoratedSymbol":{let[r,n]=e.symbolColor.split("-"),i=[];return r!=="default"&&i.push(hA(r)),n!=null&&i.push(yA(n)),i.push(kP(this.spokenFormMap.grapheme,"grapheme",e.character)),i}case"lineNumber":return this.handleLineNumberMark(e);case"range":{if(e.anchor.type==="lineNumber"&&e.active.type==="lineNumber"){let[r,n]=this.handleLineNumberMark(e.anchor),[i,o]=this.handleLineNumberMark(e.active);if(r===i){let s=Sl(e.excludeAnchor,e.excludeActive);return[r,n,s,o]}}throw Error(`Mark '${e.type}' is not fully implemented`)}case"explicit":case"keyboard":case"target":throw new ft(`Mark '${e.type}'`);default:return[Cm[e.type]]}}handleLineNumberMark(e){switch(e.lineNumberType){case"absolute":throw new ft("Absolute line numbers");case"modulo100":return[Im.modulo100,Ps(e.lineNumber+1)];case"relative":return[e.lineNumber<0?Im.relativeUp:Im.relativeDown,Ps(Math.abs(e.lineNumber))]}}};function bl(t){if(typeof t=="string")return RP(t);if(Array.isArray(t)){if(t.length===0)return t;let e=t[t.length-1];return[...t.slice(0,-1),bl(e)]}return{...t,spokenForms:{...t.spokenForms,spokenForms:t.spokenForms.spokenForms.map(RP)}}}function RP(t){return`${t}s`}function kP(t,e,r){let n=t[r];if(n==null)throw new ft(`${e} '${r}'`);return n}var Ls=class{constructor(e){this.spokenFormMap=_P(e),this.primitiveGenerator=new Sf(this.spokenFormMap)}getSpokenFormForSingleTerm(e,r){return this.componentsToSpokenForm(()=>{let n=this.spokenFormMap[e][r];if(n==null)throw new ft(`${e} with id ${r}`);return n})}processCommand(e){return this.componentsToSpokenForm(()=>this.handleAction(e.action))}processScopeType(e){return this.componentsToSpokenForm(()=>[this.primitiveGenerator.handleScopeType(e)])}componentsToSpokenForm(e){try{return{type:"success",spokenForms:AP(e())}}catch(r){if(r instanceof ft)return{type:"error",reason:r.reason,requiresTalonUpdate:r.requiresTalonUpdate,isPrivate:r.isPrivate};throw r}}handleAction(e){switch(e.name){case"editNew":case"getText":case"replace":case"executeCommand":case"parsed":case"private.getTargets":case"private.setKeyboardTarget":throw new ft(`Action '${e.name}'`);case"replaceWithTarget":case"moveToTarget":return[this.spokenFormMap.action[e.name],this.handleTarget(e.source),this.handleDestination(e.destination)];case"swapTargets":return[this.spokenFormMap.action[e.name],this.handleTarget(e.target1),_t.swapConnective,this.handleTarget(e.target2)];case"callAsFunction":return e.argument.type==="implicit"?[this.spokenFormMap.action[e.name],this.handleTarget(e.callee)]:[this.spokenFormMap.action[e.name],this.handleTarget(e.callee),"on",this.handleTarget(e.argument)];case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return[bP(this.spokenFormMap,e.left,e.right),this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"pasteFromClipboard":return[this.spokenFormMap.action[e.name],this.handleDestination(e.destination)];case"insertSnippet":return[this.spokenFormMap.action[e.name],wP(e.snippetDescription),this.handleDestination(e.destination)];case"generateSnippet":if(e.snippetName!=null)throw new ft(`${e.name}.snippetName`);return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"wrapWithSnippet":return[EP(e.snippetDescription),this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"highlight":{if(e.highlightId!=null)throw new ft(`${e.name}.highlightId`);return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)]}default:return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)]}}handleTarget(e){switch(e.type){case"list":if(e.elements.length<2)throw new ft("List target with < 2 elements");return e.elements.map((r,n)=>n===0?this.handleTarget(r):[_t.listConnective,this.handleTarget(r)]);case"range":{let r=this.handleTarget(e.anchor),n=this.handleTarget(e.active),i=Sl(e.excludeAnchor,e.excludeActive,e.rangeType);return[r,i,n]}case"primitive":return this.primitiveGenerator.handlePrimitiveTarget(e);case"implicit":return[]}}handleDestination(e){switch(e.type){case"list":if(e.destinations.length<2)throw new ft("List destination with < 2 elements");return e.destinations.map((r,n)=>n===0?this.handleDestination(r):[_t.listConnective,this.handleDestination(r)]);case"primitive":return[this.handleInsertionMode(e.insertionMode),this.handleTarget(e.target)];case"implicit":return[]}}handleInsertionMode(e){switch(e){case"to":return _t.sourceDestinationConnective;case"before":return _t.before;case"after":return _t.after}}};function AP(t){if(typeof t=="string")return[t];if(Array.isArray(t))return t.length===0?[""]:PP(t.map(AP)).map(e=>e.filter(r=>r.length!==0).join(" "));if(t.spokenForms.spokenForms.length===0){let e=`${al(t.spokenFormType)} with id ${t.id}`,r;throw t.spokenForms.isPrivate?r="this is a private spoken form currently only for internal experimentation":t.spokenForms.requiresTalonUpdate?r="please update talon to the latest version (see https://www.cursorless.org/docs/user/updating/)":r="please see https://www.cursorless.org/docs/user/customization/ for more information",new ft(`${e}; ${r}`,t.spokenForms.requiresTalonUpdate,t.spokenForms.isPrivate)}return t.spokenForms.spokenForms}function PP(t){if(t.length===0)return[];if(t.length===1)return t[0].map(i=>[i]);let[e,...r]=t,n=PP(r);return e.flatMap(i=>n.map(o=>[i,...o]))}var vf=class{constructor(e){this.talonSpokenForms=e;this.notifier=new tr;this.spokenFormMap_={...Ln};this.onDidChangeCustomSpokenForms=this.notifier.registerListener;this.disposable=e.onDidChange(()=>this.updateSpokenFormMaps()),this.customSpokenFormsInitialized=this.updateSpokenFormMaps()}get spokenFormMap(){return this.spokenFormMap_}get needsInitialTalonUpdate(){return this.needsInitialTalonUpdate_}async updateSpokenFormMaps(){let e;try{if(e=await this.talonSpokenForms.getSpokenFormEntries(),e.length===0)throw new Error("Custom spoken forms list empty")}catch(r){if(r instanceof ol)this.needsInitialTalonUpdate_=!0;else if(!(r instanceof Ts)){console.error("Error loading custom spoken forms",r);let n=r.message.replace(/\.$/,"");gt(P().messages,"CustomSpokenForms.updateSpokenFormMaps",`Error loading custom spoken forms: ${n}. Falling back to default spoken forms.`)}this.spokenFormMap_={...Ln},this.notifier.notifyListeners();return}for(let r of Qk)A4(this.spokenFormMap_,r,Hx[r],Object.fromEntries(e.filter(n=>n.type===r).map(({id:n,spokenForms:i})=>[n,i])));this.notifier.notifyListeners()}getCustomRegexScopeTypes(){return Object.keys(this.spokenFormMap_.customRegex).map(e=>({type:"customRegex",regex:e}))}dispose(){this.disposable.dispose()}};function A4(t,e,r,n){let i=Array.from(new Set([...Object.keys(r),...Object.keys(n)])),o={};for(let s of i){let{defaultSpokenForms:l=[],isPrivate:u=!1}=r[s]??{},m=n[s];o[s]=m==null?{defaultSpokenForms:l,spokenForms:[],requiresTalonUpdate:!u,isCustom:!1,isPrivate:u}:{defaultSpokenForms:l,spokenForms:m,requiresTalonUpdate:!1,isCustom:!_i(l,m),isPrivate:u}}t[e]=o}var bf=class{constructor(e){this.customSpokenForms=new vf(e),this.customSpokenFormsInitialized=this.customSpokenForms.customSpokenFormsInitialized,this.spokenFormGenerator=new Ls(this.customSpokenForms.spokenFormMap),this.disposable=this.customSpokenForms.onDidChangeCustomSpokenForms(()=>{this.spokenFormGenerator=new Ls(this.customSpokenForms.spokenFormMap)})}onDidChangeCustomSpokenForms(e){return this.customSpokenForms.onDidChangeCustomSpokenForms(e)}commandToSpokenForm(e){return this.spokenFormGenerator.processCommand(e)}scopeTypeToSpokenForm(e){return this.spokenFormGenerator.processScopeType(e)}actionIdToSpokenForm(e){return this.spokenFormGenerator.getSpokenFormForSingleTerm("action",e)}graphemeToSpokenForm(e){return this.spokenFormGenerator.getSpokenFormForSingleTerm("grapheme",e)}getCustomRegexScopeTypes(){return this.customSpokenForms.getCustomRegexScopeTypes()}get needsInitialTalonUpdate(){return this.customSpokenForms.needsInitialTalonUpdate}dispose(){this.disposable.dispose()}};function*P4(t){for(let e of t)for(let r of e)yield r}function*wl(t,e){let r=Ef(e),n=t;for(;n-- >0;){let i=r.next();if(!i.done)yield i.value;else return}}function*gS(t){let e=Ef(t),r=e.next();if(r.done)return;let n=r.value;for(let i of e)yield[n,i],n=i}var Axe=Symbol();function*L4(t=0,e=1){let r=t;for(;;)yield r,r+=e}function*wf(t,e){let r=0;for(let n of t)e(n,r++)&&(yield n)}function*Kt(t,e){for(let r of t)yield e(r)}function*DP(t,e,r,n=1){let i,o;if(r!==void 0?(i=e,o=r):(i=0,o=e),i<0)throw new Error("start cannot be negative");if(o!==null&&o<0)throw new Error("stop cannot be negative");if(n<=0)throw new Error("step cannot be negative");let s=-1,l=Ef(t),u;for(;;){if(s++,o!==null&&s>=o||(u=l.next(),u.done))return;s<i||(s-i)%n===0&&(yield u.value)}}function*D4(t,e){let r=0,n=Ef(t),i;for(;!(i=n.next()).done;){let o=i.value;if(!e(o,r++))return;yield o}}function Ef(t){return t[Symbol.iterator]()}function Ds(t,e){return Array.from(Kt(t,e))}function LP(t,e,r){let n=L4(t,r),i=r>=0?o=>o<e:o=>o>e;return D4(n,i)}function MP(t,e,r=1){return e!==void 0?LP(t,e,r):LP(0,t,r)}function _f(t,e){return P4(Kt(t,e))}function zr(t,e,{domain:r},{domain:n}){return t==="forward"?M4(e,r,n):F4(e,r,n)}function M4(t,e,r){let n=e.start.isAfterOrEqual(t),i=r.start.isAfterOrEqual(t);if(n&&i){let s=e.start.compareTo(r.start);return s===0?e.end.compareTo(r.end):s}if(!n&&!i){let s=e.end.compareTo(r.end);return s===0?-e.start.compareTo(r.start):s}if(!n&&i){let s=e.end.compareTo(r.start);return s!==0?s:r.isEmpty?1:-1}let o=e.start.compareTo(r.end);return o!==0?o:e.isEmpty?-1:1}function F4(t,e,r){let n=e.end.isBeforeOrEqual(t),i=r.end.isBeforeOrEqual(t);if(n&&i){let s=-e.end.compareTo(r.end);return s===0?-e.start.compareTo(r.start):s}if(!n&&!i){let s=-e.start.compareTo(r.start);return s===0?e.end.compareTo(r.end):s}if(!n&&i){let s=-e.start.compareTo(r.end);return s!==0?s:r.isEmpty?1:-1}let o=-e.end.compareTo(r.start);return o!==0?o:e.isEmpty?-1:1}function FP(t,e,r,n,i,o){return C4(t,n,i,o)&&(i==null||zr(r,n.includeDescendantScopes?t:e,i,o)<0)}function C4(t,e,r,n){let{containment:i,distalPosition:o,allowAdjacentScopes:s,skipAncestorScopes:l}=e,{domain:u}=n;switch(i){case"disallowed":if(u.contains(t))return!1;break;case"disallowedIfStrict":if(YA(u,t))return!1;break;case"required":if(!u.contains(t))return!1;break}return l&&r!=null&&u.contains(r.domain)?!1:I4(new Z(t,o),u,s)}function I4(t,e,r){let n=t.intersection(e);return n==null?!1:!n.isEmpty||r||e.isEmpty}var O4={containment:null,allowAdjacentScopes:!1,skipAncestorScopes:!1,includeDescendantScopes:!1},qe=class{constructor(){this.includeAdjacentInEvery=!1}*generateScopes(e,r,n,i={}){let o={...O4,...i,distalPosition:i.distalPosition??(n==="forward"?e.document.range.end:e.document.range.start)},s,l=r;for(let u of this.generateScopeCandidates(e,r,n,o))if(FP(r,l,n,o,s,u)&&(yield u,s=u,l=n==="forward"?u.domain.end:u.domain.start),this.canStopEarly(r,n,o,s,u))return}canStopEarly(e,r,n,i,o){let{containment:s,distalPosition:l,skipAncestorScopes:u}=n;if(this.isHierarchical&&!u)return!1;let m=this.isHierarchical&&u?i:o;return m==null?!1:!!(s==="required"&&(r==="forward"?m.domain.end.isAfter(e):m.domain.start.isBefore(e))||(r==="forward"?m.domain.end.isAfterOrEqual(l):m.domain.start.isBeforeOrEqual(l)))}};var Lr=class extends qe{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.scopeType=n;this.languageId=i;this.isHierarchical=!1}get searchScopeType(){return this.iterationScopeType}get searchScopeHandler(){return this._searchScopeHandler==null&&(this._searchScopeHandler=this.scopeHandlerFactory.create(this.searchScopeType,this.languageId)),this._searchScopeHandler}generateScopeCandidates(r,n,i,o){let{containment:s,...l}=o,u=this.searchScopeHandler.generateScopes(r,n,i,{containment:s==="required"?"required":void 0,...l});return _f(u,m=>this.generateScopesInSearchScope(i,m))}};var Rf=class extends qe{constructor(r,n){super();this.scopeType={type:"line"};this.iterationScopeType={type:"paragraph"};this.isHierarchical=!1;this.includeAdjacentInEvery=!0}*generateScopeCandidates(r,n,i){if(i==="forward")for(let o=n.line;o<r.document.lineCount;o++)yield CP(r,o);else for(let o=n.line;o>=0;o--)yield CP(r,o)}};function CP(t,e){let{range:r}=t.document.lineAt(e);return{editor:t,domain:r,getTargets:n=>[hS(t,n,r)]}}function hS(t,e,r){return new dr({editor:t,isReversed:e,contentRange:yS(t,r)})}function yS(t,e){let r=t.document.lineAt(e.start),n=t.document.lineAt(e.end);return new Z(r.rangeTrimmed?.start??r.range.start,n.rangeTrimmed?.end??n.range.end)}function dn(t,e,r,n){let i=e.document.offsetAt(r.start),o=e.document.getText(r),s=l=>new Z(e.document.positionAt(i+l.index),e.document.positionAt(i+l.index+l[0].length));return t.lastIndex=0,n==="forward"?Kt(o.matchAll(t),s):Array.from(o.matchAll(t),s).reverse()}var kf=class extends Lr{constructor(){super(...arguments);this.scopeType={type:"identifier"};this.iterationScopeType={type:"line"};this.regex=Pr(this.languageId).identifierMatcher}generateScopesInSearchScope(r,{editor:n,domain:i}){return Kt(dn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new nr({editor:n,contentRange:o,isReversed:s})]}))}};function Af(t,e,r){let n=t.editor.document.getText(t.domain),i=e.editor.document.getText(e.domain);for(let o of r){let s=zo(o,n),l=zo(o,i);if(s&&!l)return!0;if(l&&!s)return!1}}var N4=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}\p{Z}\p{C}]/gu,U4=/[$]/g,H4=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}]/gu,Pf=class extends Lr{constructor(){super(...arguments);this.scopeType={type:"character"};this.iterationScopeType={type:"token"}}get searchScopeType(){return{type:"line"}}generateScopesInSearchScope(r,{editor:n,domain:i}){return Kt(dn(N4,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new Xe({editor:n,contentRange:o,isReversed:s,textualType:"character"})]}))}isPreferredOver(r,n){let{identifierMatcher:i}=Pr(this.languageId);return Af(r,n,[i,U4,H4])}};var Lf=class extends Lr{constructor(){super(...arguments);this.scopeType={type:"word"};this.iterationScopeType={type:"identifier"};this.wordTokenizer=new As(this.languageId)}getScopesInSearchScope({editor:r,domain:n}){let{document:i}=r,o=i.offsetAt(n.start),l=this.wordTokenizer.splitIdentifier(i.getText(n)).map(u=>new Z(i.positionAt(o+u.index),i.positionAt(o+u.index+u.text.length)));return l.map((u,m)=>({editor:r,domain:u,getTargets:d=>{let g=m>0?l[m-1]:null,y=m+1<l.length?l[m+1]:null;return[B4(d,r,g,u,y)]}}))}generateScopesInSearchScope(r,n){let i=this.getScopesInSearchScope(n);return r==="backward"&&i.reverse(),i}};function B4(t,e,r,n,i){let o=r!=null&&n.start.isAfter(r.end)?new Z(r.end,n.start):void 0,s=i!=null&&i.start.isAfter(n.end)?new Z(n.end,i.start):void 0,u=o!=null||s!=null?e.document.getText(o??s):"";return new Jm({editor:e,isReversed:t,contentRange:n,insertionDelimiter:u,leadingDelimiterRange:o,trailingDelimiterRange:s})}var V4=/[$]/g,Df=class extends Lr{constructor(){super(...arguments);this.scopeType={type:"token"};this.iterationScopeType={type:"line"};this.regex=Pr(this.languageId).tokenMatcher}generateScopesInSearchScope(r,{editor:n,domain:i}){return Kt(dn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new nr({editor:n,contentRange:o,isReversed:s})]}))}isPreferredOver(r,n){let{identifierMatcher:i}=Pr(this.languageId);return Af(r,n,[i,V4])}};var Mf=class extends qe{constructor(r,n){super();this.scopeType={type:"document"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i){let o=r.document.range;yield{editor:r,domain:o,getTargets:s=>[new Ym({editor:r,isReversed:s,contentRange:o})]}}};function Ff(t,e,r,n,i){if(!t&&n!=null&&i!=null&&Jx(e,n)>Jx(e,i))return r.union(n)}function Ms(t){return t.containment==null&&t.skipAncestorScopes}function IP(t,e,r,{containment:n,distalPosition:i,allowAdjacentScopes:o}){let{start:s,end:l}=W4(t.offsetAt(e),t.offsetAt(i),r,n,o);return{start:t.positionAt(s),end:t.positionAt(l)}}function W4(t,e,r,n,i){let o=i?1:0;if(n==="required")return r==="forward"?{start:t-o,end:t+1}:{start:t-1,end:t+o};let s=n==="disallowed"?1:-o;return r==="forward"?{start:t+s,end:e+o}:{start:e-o,end:t-s}}function OP(t,e,r){let n=[],i=[];for(let o of t)i.length===0||e(i[i.length-1],o)?i.push(o):(n.push(r(i)),i=[o]);return i.length>0&&n.push(r(i)),n}var Fs=class extends qe{constructor(r){super();this.query=r}*generateScopeCandidates(r,n,i,o){let{document:s}=r,l=Ms(o),{start:u,end:m}=IP(s,n,i,o),d=this.query.matches(s,u,m).map(g=>this.matchToScope(r,g,l)).filter(g=>g!=null).sort((g,y)=>zr(i,n,g,y));yield*OP(d,(g,y)=>g.domain.isRangeEqual(y.domain),g=>g.length===1?g[0]:{...g[0],getTargets(y){let x=qc(g.flatMap(E=>E.getTargets(y)),(E,w)=>E.isEqual(w));if(x.length>1&&!g.every(E=>E.allowMultiple)){let E="Please use #allow-multiple! predicate in your query to allow multiple matches for this scope type";if(gt(P().messages,"BaseTreeSitterScopeHandler.allow-multiple",E),P().runMode==="test")throw Error(E)}return x}})}};function TS(t,e,r,n){return n?Cs(t,`${e}.${r}`,`_.${r}`):Cs(t,`${e}.${r}`)??(Cs(t,e)!=null?Cs(t,`_.${r}`):void 0)}function mo(t,e,r,n){return TS(t,e,r,n)?.range}function Cs(t,...e){return t.captures.find(r=>e.some(n=>r.name===n))}var Cf=class extends Fs{constructor(r,n){super(r);this.iterateeScopeType=n;this.isHierarchical=!0;this.scopeType=void 0}get iterationScopeType(){throw Error("Not implemented")}matchToScope(r,n,i){let o=this.iterateeScopeType.type,s=TS(n,o,"iteration",!1);if(s==null)return;let{range:l,allowMultiple:u}=s;if(l.isEmpty)return;let m=mo(n,o,"iteration.domain",!1)??l;return{editor:r,domain:m,allowMultiple:u,getTargets:d=>[new Xe({editor:r,isReversed:d,contentRange:l})]}}};var If=class extends Fs{constructor(r,n){super(r);this.scopeType=n;this.isHierarchical=!0}get iterationScopeType(){return{type:"custom",scopeHandler:new Cf(this.query,this.scopeType)}}matchToScope(r,n,i){let o=this.scopeType.type,s=Cs(n,o);if(s==null)return;let{range:l,allowMultiple:u,insertionDelimiter:m}=s,d=mo(n,o,"domain",!0)??l,g=mo(n,o,"prefix",!0)?.with(void 0,l.start),y=mo(n,o,"leading",!0)?.with(void 0,g?.start??l.start),x=mo(n,o,"trailing",!0)?.with(l.end),E=mo(n,o,"removal",!0);return E==null&&(o==="collectionItem"||o==="argumentOrParameter")&&(E=Ff(i,r,l,y,x)),{editor:r,domain:d,allowMultiple:u,getTargets:w=>[new _s({scopeTypeType:o,editor:r,isReversed:w,contentRange:l,prefixRange:g,removalRange:E,leadingDelimiterRange:y,trailingDelimiterRange:x,insertionDelimiter:m})]}}};function NP(t){return t.flatMap((e,r)=>{let{value:n,done:i}=e.next();return i?[]:[{iterator:e,value:n,index:r}]})}function UP(t,e){return t.flatMap(r=>{let{iterator:n,index:i}=r,{value:o}=r,s=!1;for(;!s&&!e(o);)({value:o,done:s}=n.next());return s?[]:[{iterator:n,value:o,index:i}]})}var Jn=class t extends qe{constructor(r,n){super();this.scopeHandlers=r;this.getIterationScopeHandler=n;this.isHierarchical=!0;this.scopeType=void 0}static create(r,n,i){let o=n.scopeTypes.map(s=>r.create(s,i));return this.createFromScopeHandlers(r,i,o)}static createFromScopeHandlers(r,n,i){let o=()=>new t(i.map(s=>r.create(s.iterationScopeType,n)),()=>{throw new Error("Not implemented")});return new t(i,o)}get iterationScopeType(){return this.iterationScopeHandler==null&&(this.iterationScopeHandler=this.getIterationScopeHandler()),{type:"custom",scopeHandler:this.iterationScopeHandler}}*generateScopeCandidates(r,n,i,o){if(this.iterationScopeHandler?.lastYieldedIndex!=null){let u=this.iterationScopeHandler.lastYieldedIndex;yield*this.scopeHandlers[u].generateScopes(r,n,i,o);return}let s=this.scopeHandlers.map(u=>u.generateScopes(r,n,i,o)[Symbol.iterator]()),l=NP(s);for(;l.length>0;){l.sort((d,g)=>zr(i,n,d.value,g.value));let u=l[0],m=u.value;this.lastYieldedIndex=u.index,yield m,l=UP(l,d=>zr(i,n,m,d)<0)}}};var Of=class extends qe{constructor(r,n){super();this.scopeType={type:"paragraph"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i){let{document:o}=r,s=i==="forward"?1:-1,l=i==="forward"?o.lineCount:-1,u=$4(o,n,i),m=r.document.lineAt(n);for(let d=n.line+s;d!==l;d+=s){let g=r.document.lineAt(d);g.isEmptyOrWhitespace?u!=null&&(yield HP(r,u.range.union(m.range)),u=void 0):u==null&&(u=g),m=g}u!=null&&(yield HP(r,u.range.union(m.range)))}};function $4(t,e,r){let n=r==="forward"?-1:1,i=r==="forward"?-1:t.lineCount,o=t.lineAt(e);if(!o.isEmptyOrWhitespace){for(let s=e.line+n;s!==i;s+=n){let l=t.lineAt(s);if(l.isEmptyOrWhitespace)break;o=l}return o}}function HP(t,e){return{editor:t,domain:e,getTargets:r=>[new co({editor:t,isReversed:r,contentRange:yS(t,e)})]}}function El(t,e){return e.length>1?e.indexOf(t.slice(-1))>-1:t.slice(-1)===e}function BP(t,e){return t.slice(t.length-e.length)===e}var xS,z4=["al","adj","assn","Ave","BSc","MSc","Cell","Ch","Co","cc","Corp","Dem","Dept","ed","eg","Eq","Eqs","est","est","etc","Ex","ext","Fig","fig","Figs","figs","i.e","ie","Inc","inc","Jan","Feb","Mar","Apr","Jun","Jul","Aug","Sep","Sept","Oct","Nov","Dec","jr","mi","Miss","Mrs","Mr","Ms","Mol","mt","mts","no","Nos","PhD","MD","BA","MA","MM","pl","pop","pp","Prof","Dr","pt","Ref","Refs","Rep","repr","rev","Sec","Secs","Sgt","Col","Gen","Rep","Sen","Gov","Lt","Maj","Capt","St","Sr","sr","Jr","jr","Rev","Sun","Mon","Tu","Tue","Tues","Wed","Th","Thu","Thur","Thurs","Fri","Sat","trans","Univ","Viz","Vol","vs","v"];function VP(t){t?xS=t:xS=z4}function SS(t){return/^[A-Z][a-z].*/.test(t)||Nf(t)}function WP(t){return SS(t)||/``|"|'/.test(t.substring(0,2))}function $P(t){let e=t.replace(/[-'`~!@#$%^&*()_|+=?;:'",.<>{}[\]\\/]/gi,"");return~xS.indexOf(e)}function jP(t,e){return(t==="a.m."||t==="p.m.")&&e.replace(/\W+/g,"").slice(-3).toLowerCase()==="day"}function vS(t){let e=t.replace(/[()[]{}]/g,"").match(/(.\.)*/);return e&&e[0].length>0}function zP(t){return t.length<=3?!0:SS(t)}function bS(t,e){return e.length>0?t<5&&e[0].length<6&&SS(e[0])?!0:e.filter(function(n){return/[A-Z]/.test(n.charAt(0))}).length>=3:!1}function Nf(t,e){return e&&(t=t.slice(e-1,e+2)),!isNaN(t)}function qP(t){return t.match(/^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/)}function GP(t){return t.match(/[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/)}function KP(t){let e=0;return((e=t.indexOf("."))>-1||(e=t.indexOf("!"))>-1||(e=t.indexOf("?"))>-1)&&t.charAt(e+1).match(/[a-zA-Z].*/)?[t.slice(0,e),t.slice(e+1)]:!1}function QP(t){return t==="."||t==="!"||t==="?"}var ZP=" @~@ ",YP=ZP.trim(),G4=new RegExp("\\S",""),K4=new RegExp("\\n+|[-#=_+*]{4,}","g"),Q4=new RegExp("\\S+|\\n","g"),Y4={newlineBoundaries:!1,preserveWhitespace:!1,abbreviations:void 0};function XP(t,e){if(!t)return[];if(!G4.test(t))return[];let r={...Y4,...e};VP(r.abbreviations),r.newlineBoundaries&&(t=t.replace(K4,ZP));let n,i;r.preserveWhitespace?(i=t.split(/(<br\s*\/?>|\S+|\n+)/),n=i.filter(function(g,y){return y%2})):n=t.trim().match(Q4)??[];let o=0,s=0,l=[],u=[],m=[];if(!n||!n.length)return[];for(let g=0,y=n.length;g<y;g++){if(o++,m.push(n[g]),~n[g].indexOf(",")&&(o=0),QP(n[g])||El(n[g],"?!")||n[g]===YP){r.newlineBoundaries&&n[g]===YP&&m.pop(),u.push(m),o=0,m=[];continue}if((El(n[g],'"')||El(n[g],"\u201D"))&&(n[g]=n[g].slice(0,-1)),El(n[g],".")){if(g+1<y){if(n[g].length===2&&isNaN(n[g].charAt(0))||$P(n[g]))continue;if(WP(n[g+1])){if(jP(n[g],n[g+1])||bS(o,n.slice(g,6))||Nf(n[g+1])&&zP(n[g]))continue}else if(BP(n[g],"..")||vS(n[g])||bS(o,n.slice(g,5)))continue}u.push(m),m=[],o=0;continue}(s=n[g].indexOf("."))>-1&&(Nf(n[g],s)||vS(n[g])||GP(n[g])||qP(n[g]))||(l=KP(n[g]))&&(m.pop(),m.push(l[0]),u.push(m),m=[],o=0,m.push(l[1]))}return m.length&&u.push(m),u=u.filter(function(g){return g.length>0}),u.slice(1).reduce(function(g,y){let x=g[g.length-1];return x.length===1&&/^.{1,2}[.]$/.test(x[0])&&!/[.]/.test(y[0])?(g.pop(),g.push(x.concat(y)),g):(g.push(y),g)},[u[0]]).map(function(g,y){if(r.preserveWhitespace&&!r.newlineBoundaries){let x=g.length*2;return y===0&&(x+=1),i.splice(0,x).join("")}return g.join(" ")})}var Z4=/\S*\p{L}/u,JP=/(\r?\n[^\p{L}]*\r?\n)|(?<=[.!?])(\s*\r?\n)/gu,X4={newlineBoundaries:!1,preserveWhitespace:!0},Uf=class{*segment(e){let r=XP(e,X4),n=0;for(let i of r){let o=i.split(JP).filter(s=>s!=null);for(let s of o){if(!e9(s)){let l=J4(s,n);l!=null&&(yield l)}n+=s.length}}}};function J4(t,e){let r=YR(Z4,t);if(r==null)return;let n=r.index;return n!==0&&(e+=n,t=t.slice(n)),{text:t.trimEnd(),index:e}}function e9(t){return zo(JP,t)}var Hf=class extends Lr{constructor(){super(...arguments);this.scopeType={type:"sentence"};this.iterationScopeType={type:"paragraph"};this.segmenter=new Uf}generateScopesInSearchScope(r,{editor:n,domain:i}){let o=n.document.offsetAt(i.start),s=n.document.getText(i),l=m=>{let d=new Z(n.document.positionAt(o+m.index),n.document.positionAt(o+m.index+m.text.length));return{editor:n,domain:d,getTargets:g=>[new nr({editor:n,contentRange:d,isReversed:g})]}},u=this.segmenter.segment(s);return r==="forward"?Kt(u,l):Array.from(u,l).reverse()}};var Is=class extends Lr{constructor(){super(...arguments);this.iterationScopeType={type:"line"}}generateScopesInSearchScope(r,{editor:n,domain:i}){return Kt(dn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new nr({editor:n,contentRange:o,isReversed:s})]}))}},Bf=class extends Is{constructor(){super(...arguments);this.regex=/\S+/g}},Vf=class extends Is{constructor(r,n,i){super(r,n,i);this.scopeType=n;this.regex=/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/g}},Wf=class extends Is{constructor(r,n,i){super(r,n,i);this.scopeType=n}get regex(){return new RegExp(this.scopeType.regex,this.scopeType.flags??"gu")}},$f=class extends Is{constructor(r,n,i){super(r,n,i);this.scopeType=n}get regex(){return new RegExp(Vr(this.scopeType.character),"gui")}};var jf=class extends qe{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.languageId=n;this.targetScopeType=i;this.isHierarchical=!0;this.targetScopeHandler=this.scopeHandlerFactory.create(this.targetScopeType,this.languageId),this.surroundingPairInteriorScopeHandler=this.scopeHandlerFactory.create({type:"surroundingPairInterior",delimiter:"any"},this.languageId)}get iterationScopeType(){switch(this.targetScopeHandler.iterationScopeType.type){case"custom":case"fallback":case"conditional":throw Error(`Iteration scope type can't be '${this.targetScopeHandler.iterationScopeType.type}' for BoundedBaseScopeHandler`)}return{type:"oneOf",scopeTypes:[this.targetScopeHandler.iterationScopeType,{type:"surroundingPairInterior",delimiter:"any"}]}}*generateScopeCandidates(r,n,i,o){let s=this.targetScopeHandler.generateScopes(r,n,i,{...o,containment:o.containment!=="disallowed"?o.containment:void 0}),l=Array.from(this.surroundingPairInteriorScopeHandler.generateScopes(r,n,i,{...o,containment:Ms(o)?"required":o.containment}));for(let u of s){let m=[];for(let d of l){let g=u.domain.intersection(d.domain);g!=null&&!g.isEmpty&&m.push({editor:r,domain:g,getTargets:y=>[this.getTargets(eL(u,y),eL(d,y))]})}m.push(u),m.sort((d,g)=>zr(i,n,d,g)),yield*m}}};function eL(t,e){let r=t.getTargets(e);if(r.length!==1)throw Error(`Expected one target but got ${r.length}`);return r[0]}var zf=class extends jf{constructor(r,n,i){super(r,i,{type:"nonWhitespaceSequence"});this.scopeType={type:"boundedNonWhitespaceSequence"}}getTargets(r,n){let i=r.contentRange.intersection(n.contentRange);if(i==null||i.isEmpty)throw Error("Expected non empty intersection");return new nr({editor:r.editor,isReversed:r.isReversed,contentRange:i})}},qf=class extends jf{constructor(r,n,i){super(r,i,{type:"paragraph"});this.scopeType={type:"boundedParagraph"}}getTargets(r,n){if(!(r instanceof co))throw Error("Expected ParagraphTarget");return new nf({editor:r.editor,isReversed:r.isReversed,paragraphTarget:r,containingInterior:n})}};var ei=class{constructor(e){this.items=e;this.index=0}add(e){this.items.push(e)}contains(e){return this.advance(e)}getContaining(e){if(this.advance(e))return this.items[this.index]}advance(e){for(;this.index<this.items.length;){let r=this.items[this.index].range;if(r.contains(e))return!0;if(e.end.isBeforeOrEqual(r.start))return!1;this.index++}return!1}};var Os=class{constructor(e){this.children=t9(e)}getSmallestContaining(e){return this.children.getContaining(e)?.getSmallestContaining(e)}};function t9(t){let e=[],r=[];for(let n of t){let i=new wS(n);for(;r.length>0&&!r[r.length-1].range.contains(n.range);)r.pop();let o=r[r.length-1];o!=null?o.children.add(i):e.push(i),r.push(i)}return new ei(e)}var wS=class{constructor(e){this.item=e;this.children=new ei([])}get range(){return this.item.range}getSmallestContaining(e){return this.children.getContaining(e)?.getSmallestContaining(e)??this.item}};var r9=",",ES=new RegExp(r9,"g");function tL(t){let e=t.getText();return cn(e,ES,r=>new Z(t.positionAt(r.index),t.positionAt(r.index+r[0].length)))}var rL={type:"fallback",scopeTypes:[{type:"conditional",scopeType:{type:"surroundingPairInterior",delimiter:"collectionBoundary"},predicate:t=>!t.domain.isEmpty},{type:"conditional",scopeType:{type:"line"},predicate:t=>{let e=t.editor.document.getText(t.domain);return zo(ES,e)}}]};function _S(t,e,r,n,i,o){let s=i!=null?new Z(i.end,n.start):void 0,l=o!=null?new Z(n.end,o.start):void 0,u=Ff(t,e,n,s,l),m=r.isSingleLine?", ":`,
`;return{editor:e,domain:n,getTargets(d){return[new _s({scopeTypeType:"collectionItem",editor:e,isReversed:d,contentRange:n,insertionDelimiter:m,leadingDelimiterRange:s,trailingDelimiterRange:l,removalRange:u})]}}}function RS(t,e,r,n){let i=t.create({type:"surroundingPairInterior",delimiter:n},e);return Array.from(i.generateScopes(r,new Re(0,0),"forward",{containment:void 0,skipAncestorScopes:!1,includeDescendantScopes:!0}),o=>({range:o.domain}))}var Gf=class extends qe{constructor(r,n){super();this.scopeHandlerFactory=r;this.languageId=n;this.scopeType={type:"collectionItem"};this.isHierarchical=!0}get iterationScopeType(){return rL}*generateScopeCandidates(r,n,i,o){let s=Ms(o),l=tL(r.document),u=RS(this.scopeHandlerFactory,this.languageId,r,"collectionBoundary"),m=new Os(u),d=RS(this.scopeHandlerFactory,this.languageId,r,"string"),g=new ei(d),y=[],x=new Set,E=[];for(let w of l){if(g.contains(w))continue;let H;for(;E.length>0;){let ie=E[E.length-1];if(ie.iterationRange.contains(w)){H=ie;break}this.addScopes(y,ie),E.pop()}let W=m.getSmallestContaining(w)?.range,G=W??r.document.lineAt(w.start.line).range;if(H!=null&&H.iterationRange.isRangeEqual(G)){H.delimiters.push(w);continue}W!=null&&x.add(W),E.push({editor:r,isEveryScope:s,iterationRange:G,delimiters:[w]})}for(let w of E)this.addScopes(y,w);for(let w of u)if(!x.has(w.range)&&!w.range.isEmpty){let H=ta(r,w.range);H.isEmpty||y.push(_S(s,r,w.range,H))}y.sort((w,H)=>zr(i,n,w,H)),yield*y}addScopes(r,n){let{editor:i,iterationRange:o,isEveryScope:s,delimiters:l}=n;if(l.length===0)return;let u=[];for(let g=0;g<l.length;++g){let y=l[g],x=l[g-1]?.end??o.start;u.push(new Z(x,y.start))}let m=l[l.length-1];u.push(new Z(m.end,o.end));let d=u.map(g=>ta(i,g));for(let g=0;g<d.length;++g)g===d.length-1&&i.document.getText(d[g]).trim()===""||r.push(_S(s,i,o,d[g],d[g-1],d[g+1]))}};var Kf=class extends qe{constructor(r,n,i){super();this.scopeType={type:"collectionItem"};this.isHierarchical=!0;this.scopeHandler=(()=>{let o=new Gf(r,i),s=n.get(i)?.getScopeHandler(this.scopeType);return s==null?o:Jn.createFromScopeHandlers(r,i,[s,o])})()}get iterationScopeType(){return this.scopeHandler.iterationScopeType}generateScopeCandidates(r,n,i,o){return this.scopeHandler.generateScopes(r,n,i,o)}};var Qf=class extends qe{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.conditionalScopeType=n;this.languageId=i;this.scopeType=void 0;this.isHierarchical=!0}get iterationScopeType(){throw new Et("Iteration scope for ConditionalScopeHandler")}generateScopeCandidates(r,n,i,o){let s=this.scopeHandlerFactory.create(this.conditionalScopeType.scopeType,this.languageId);return wf(s.generateScopes(r,n,i,o),this.conditionalScopeType.predicate)}};var Ns=class t extends qe{constructor(r){super();this.scopeHandlers=r;this.scopeType=void 0;this.isHierarchical=!0}static create(r,n,i){let o=n.scopeTypes.map(s=>r.create(s,i));return this.createFromScopeHandlers(o)}static createFromScopeHandlers(r){return new t(r)}get iterationScopeType(){throw new Et("Iteration scope for FallbackScopeHandler")}*generateScopeCandidates(r,n,i,o){for(let s of this.scopeHandlers)yield*s.generateScopes(r,n,i,o)}};var Yf=class extends qe{constructor(){super();this.scopeType={type:"notebookCell"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i,o){let s=n9(r,n,i,o);for(let l of s)yield o9(l)}};function n9(t,e,r,n){let i=i9(t);if(i==null)return[];let{notebook:o,cell:s}=i;return n.containment==="required"?[s]:n.containment==="disallowed"||n.containment==="disallowedIfStrict"?r==="forward"?o.cells.slice(s.index+1):o.cells.slice(0,s.index).reverse():n.distalPosition!=null&&new Z(e,n.distalPosition).isRangeEqual(t.document.range)?o.cells:r==="forward"?o.cells.slice(s.index):o.cells.slice(0,s.index+1).reverse()}function i9(t){let e=t.document.uri.toString();for(let r of P().visibleNotebookEditors)for(let n of r.cells)if(n.document.uri.toString()===e)return{notebook:r,cell:n}}function o9(t){let e=a9(t),r=e.document.range;return{editor:e,domain:r,getTargets:n=>[new Xm({editor:e,isReversed:n,contentRange:r})]}}function a9(t){let e=t.document.uri.toString();for(let r of P().visibleTextEditors)if(r.document.uri.toString()===e)return r;throw new Error("Editor not found notebook cell")}var Zf=class extends qe{constructor(r,n,i,o){super();this.scopeType={type:"notebookCell"};this.isHierarchical=!1;this.scopeHandler=(()=>{let s=new Yf,l=n.get(o)?.getScopeHandler(this.scopeType);return l==null?s:Jn.createFromScopeHandlers(r,o,[l,s])})()}get iterationScopeType(){return this.scopeHandler.iterationScopeType}generateScopeCandidates(r,n,i,o){return this.scopeHandler.generateScopes(r,n,i,o)}};var Xf=class extends qe{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.scopeType=n;this.languageId=i;this.isHierarchical=!0;this.surroundingPairScopeHandler=this.scopeHandlerFactory.create({type:"surroundingPair",delimiter:this.scopeType.delimiter,requireStrongContainment:!0},this.languageId)}get iterationScopeType(){return this.surroundingPairScopeHandler.iterationScopeType}*generateScopeCandidates(r,n,i,o){let s=this.surroundingPairScopeHandler.generateScopes(r,n,i,o);for(let l of s)yield{editor:r,domain:l.domain,getTargets(u){return l.getTargets(u).flatMap(m=>m.getInterior())}}}};function nL(t,{openingDelimiterRange:e,closingDelimiterRange:r},n){let i=e.union(r),o=new Z(e.end,r.start);return{editor:t,domain:n?o:i,getTargets:s=>[new ef({editor:t,isReversed:s,contentRange:i,interiorRange:o,boundary:[e,r]})]}}function iL(t){let e=jo(t.map(({text:r})=>r)).map(Vr).join("|");return new RegExp(`(?<!\\\\)(${e})`,"gu")}function aL(t,e,r){if(r.length===0)return[];let n=t?.getCapturesMap(e)??{},i=new ei(kS(n.disqualifyDelimiter)),o=new ei(kS(n.pairDelimiter)),s=new Os(kS(n.textFragment)),l=Object.fromEntries(r.map(d=>[d.text,d])),u=tx(e.getText(),iL(r)),m=[];for(let d of u){let g=d[0],y=new Z(e.positionAt(d.index),e.positionAt(d.index+g.length));oL(i.getContaining(y))==null&&m.push({delimiterInfo:l[g],textFragmentRange:s.getSmallestContaining(y)?.range,range:oL(o.getContaining(y))?.range??y})}return m}function oL(t){return t!=null&&!t.hasError()?t:void 0}function kS(t){return t==null?[]:(t.sort((e,r)=>e.range.start.compareTo(r.range.start)),t)}var Jf=Object.freeze({angleBrackets:[["</","<"],[">","/>"]],curlyBrackets:[["{","${"],"}"],tripleBacktickQuotes:[[],[]],tripleDoubleQuotes:[[],[]],tripleSingleQuotes:[[],[]],doubleQuotes:['"','"',{isSingleLine:!0}],escapedDoubleQuotes:['\\"','\\"',{isSingleLine:!0}],escapedParentheses:["\\(","\\)"],escapedSquareBrackets:["\\[","\\]"],escapedSingleQuotes:["\\'","\\'",{isSingleLine:!0}],parentheses:[["(","$("],")"],backtickQuotes:["`","`"],singleQuotes:["'","'",{isSingleLine:!0}],squareBrackets:["[","]"]}),sL={nix:{singleQuotes:["''","''"]},lua:{doubleQuotes:[['"',"[["],['"',"]]"]]},python:{tripleSingleQuotes:["'''","'''"],tripleDoubleQuotes:['"""','"""']},markdown:{tripleBacktickQuotes:["```","```"]},ruby:{tripleDoubleQuotes:["%Q(",")"]},csharp:{doubleQuotes:[['@"','"'],['"','"']]}},Fbe=Object.fromEntries(Object.values(Jf)),cL={any:ll(Jf),string:["tripleDoubleQuotes","tripleSingleQuotes","tripleBacktickQuotes","doubleQuotes","singleQuotes","backtickQuotes"],collectionBoundary:["parentheses","squareBrackets","curlyBrackets","angleBrackets"]};function lL(t){return t!=null&&t in sL?{...Jf,...sL[t]}:Jf}function uL(t,e){let r=cL[t]??[t];return s9(e,r)}function s9(t,e){let r=lL(t);return e.flatMap(n=>{let[i,o,s]=r[n],{isSingleLine:l=!1}=s??{},u=sl(i)?[i]:i,m=sl(o)?[o]:o;return jo(zc(u,m)).map(g=>{let y=u.includes(g),x=m.includes(g);return{text:g,side:y&&!x?"left":!y&&x?"right":"unknown",delimiterName:n,isSingleLine:l}})})}function pL(t){let e=[],r=[];for(let n of t){let{delimiterInfo:{delimiterName:i,side:o,isSingleLine:s},textFragmentRange:l,range:u}=n;if(o==="left")r.push(n);else{let m=$o(r,g=>g.delimiterInfo.delimiterName===i&&c9(g.textFragmentRange,l)&&l9(s,g.range,u));if(m===-1){o==="unknown"&&r.push(n);continue}let d=r[m];r.length=m,e.push({delimiterName:i,openingDelimiterRange:d.range,closingDelimiterRange:u})}}return e}function c9(t,e){return t==null||e==null?t===e:t.isRangeEqual(e)}function l9(t,e,r){return!t||e.start.line===r.start.line}var ed=class extends qe{constructor(r,n,i){super();this.languageDefinitions=r;this.scopeType=n;this.languageId=i;this.iterationScopeType={type:"conditional",scopeType:{type:"line"},predicate:r=>!r.domain.isEmpty};this.isHierarchical=!0}*generateScopeCandidates(r,n,i,o){if(this.scopeType.forceDirection!=null){gt(P().messages,"deprecatedForceDirection","forceDirection is deprecated. If this is important to you please file an issue on the cursorless repo.");return}let s=aL(this.languageDefinitions.get(this.languageId),r.document,uL(this.scopeType.delimiter,this.languageId)),l=pL(s);l=u9(i,o,n,l),yield*l.map(u=>nL(r,u,this.scopeType.requireStrongContainment??!1)).sort((u,m)=>zr(i,n,u,m))}};function u9(t,e,r,n){return t==="forward"&&e.containment==="required"&&e.allowAdjacentScopes&&e.skipAncestorScopes?n.filter((i,o)=>!(i.closingDelimiterRange.end.isEqual(r)&&n[o+1]?.closingDelimiterRange.start.isEqual(r))):n}var td=class extends qe{constructor(r,n,i,o){super();this.scopeHandlerFactory=r;this.languageDefinitions=n;this.scopeType=i;this.languageId=o;this.isHierarchical=!0}get iterationScopeType(){throw new Et("Iteration scope for InteriorScopeHandler")}*generateScopeCandidates(r,n,i,o){let s=new Z(n,o.distalPosition),l=this.getScopeHandler();if(l==null)return;let u=l.generateScopes(r,n,i,o);for(let m of u)this.shouldYield(s,m)&&(yield p9(m))}getScopeHandler(){let r=this.languageDefinitions.get(this.languageId)?.getScopeHandler(this.scopeType),n=this.scopeHandlerFactory.create({type:"surroundingPair",delimiter:"any"},this.languageId);return this.scopeType.explicitScopeType?r==null?n:Ns.createFromScopeHandlers([r,n]):r==null?n:Jn.createFromScopeHandlers(this.scopeHandlerFactory,this.languageId,[r,n])}shouldYield(r,n){return!this.scopeType.explicitScopeType||r.contains(n.domain)}};function p9(t){return{editor:t.editor,domain:t.domain,getTargets(e){return t.getTargets(e).flatMap(m9)}}}function m9(t){let e=t.getInterior();return e??[new Rs({editor:t.editor,isReversed:t.isReversed,fullInteriorRange:t.contentRange})]}var Us=class{constructor(e){this.languageDefinitions=e;this.maybeCreate=this.maybeCreate.bind(this),this.create=this.create.bind(this)}maybeCreate(e,r){switch(e.type){case"character":return new Pf(this,e,r);case"word":return new Lf(this,e,r);case"token":return new Df(this,e,r);case"identifier":return new kf(this,e,r);case"line":return new Rf(e,r);case"sentence":return new Hf(this,e,r);case"paragraph":return new Of(e,r);case"boundedParagraph":return new qf(this,e,r);case"document":return new Mf(e,r);case"nonWhitespaceSequence":return new Bf(this,e,r);case"boundedNonWhitespaceSequence":return new zf(this,e,r);case"url":return new Vf(this,e,r);case"customRegex":return new Wf(this,e,r);case"glyph":return new $f(this,e,r);case"collectionItem":return new Kf(this,this.languageDefinitions,r);case"surroundingPair":return new ed(this.languageDefinitions,e,r);case"surroundingPairInterior":return new Xf(this,e,r);case"notebookCell":return new Zf(this,this.languageDefinitions,e,r);case"interior":return new td(this,this.languageDefinitions,e,r);case"custom":return e.scopeHandler;case"oneOf":return Jn.create(this,e,r);case"fallback":return Ns.create(this,e,r);case"conditional":return new Qf(this,e,r);case"instance":throw Error("Unexpected scope type 'instance'");default:return this.languageDefinitions.get(r)?.getScopeHandler(e)}}create(e,r){let n=this.maybeCreate(e,r);if(n==null)throw new Error(`Couldn't create scope handler for '${e.type}'`);return n}};function mL(t){return new Z(t.startPosition.row,t.startPosition.column,t.endPosition.row,t.endPosition.column)}function fL(t,e){if(t.length===1)return!0;let r=!1,n=t.filter(({name:u})=>u.endsWith(".start")).map(({range:{end:u}})=>u).sort((u,m)=>u.compareTo(m)).at(-1),i=t.filter(({name:u})=>u.endsWith(".end")).map(({range:{start:u}})=>u).sort((u,m)=>u.compareTo(m)).at(0);n!=null&&i!=null&&n.isAfter(i)&&(gt(e,"TreeSitterQuery.checkCaptures.badOrder",`Start capture must be before end capture: ${t.map(u=>u.name)}`),r=!0);let o=t.filter(({name:u})=>u.endsWith(".start")).length,s=t.filter(({name:u})=>u.endsWith(".end")).length,l=t.length-o-s;return l>0&&(o>0||s>0)&&(gt(e,"TreeSitterQuery.checkCaptures.mixRegularStartEnd",`Please do not mix regular captures and start/end captures: ${t.map(({name:u,range:m})=>u+" "+m.toString())}`),r=!0),l>1&&(gt(e,"TreeSitterQuery.checkCaptures.duplicate",`A capture with the same name may only appear once in a single pattern: ${t.map(({name:u,range:m})=>u+" "+m.toString())}`),r=!0),!r}function dL(t){if(t.hasError)return!0;let e=t.parent;for(;e!=null;){if(e.isError)return!0;if(e.hasError)return!1;if(e.previousSibling?.isError||e.nextSibling?.isError)return!0;e=e.parent}return!1}function AS(t){return t.replace(/(\.(start|end))?(\.(startOf|endOf))?$/,"")}var Me={};w_(Me,{BRAND:()=>U9,DIRTY:()=>ia,EMPTY_PATH:()=>h9,INVALID:()=>xe,NEVER:()=>b6,OK:()=>ir,ParseStatus:()=>Qt,Schema:()=>Ce,ZodAny:()=>ho,ZodArray:()=>Fi,ZodBigInt:()=>aa,ZodBoolean:()=>sa,ZodBranded:()=>Rl,ZodCatch:()=>Ta,ZodDate:()=>ca,ZodDefault:()=>ya,ZodDiscriminatedUnion:()=>id,ZodEffects:()=>yn,ZodEnum:()=>ga,ZodError:()=>Dr,ZodFirstPartyTypeKind:()=>Ee,ZodFunction:()=>ad,ZodIntersection:()=>ma,ZodIssueCode:()=>re,ZodLazy:()=>fa,ZodLiteral:()=>da,ZodMap:()=>js,ZodNaN:()=>qs,ZodNativeEnum:()=>ha,ZodNever:()=>Fn,ZodNull:()=>ua,ZodNullable:()=>ni,ZodNumber:()=>oa,ZodObject:()=>Mr,ZodOptional:()=>gn,ZodParsedType:()=>ce,ZodPipeline:()=>kl,ZodPromise:()=>yo,ZodReadonly:()=>xa,ZodRecord:()=>od,ZodSchema:()=>Ce,ZodSet:()=>zs,ZodString:()=>go,ZodSymbol:()=>Ws,ZodTransformer:()=>yn,ZodTuple:()=>ri,ZodType:()=>Ce,ZodUndefined:()=>la,ZodUnion:()=>pa,ZodUnknown:()=>Mi,ZodVoid:()=>$s,addIssueToContext:()=>oe,any:()=>G9,array:()=>Z9,bigint:()=>W9,boolean:()=>_L,coerce:()=>v6,custom:()=>bL,date:()=>$9,datetimeRegex:()=>SL,defaultErrorMap:()=>Li,discriminatedUnion:()=>t6,effect:()=>f6,enum:()=>u6,function:()=>s6,getErrorMap:()=>Hs,getParsedType:()=>ti,instanceof:()=>B9,intersection:()=>r6,isAborted:()=>rd,isAsync:()=>Bs,isDirty:()=>nd,isValid:()=>fo,late:()=>H9,lazy:()=>c6,literal:()=>l6,makeIssue:()=>_l,map:()=>o6,nan:()=>V9,nativeEnum:()=>p6,never:()=>Q9,null:()=>q9,nullable:()=>g6,number:()=>EL,object:()=>X9,objectUtil:()=>PS,oboolean:()=>S6,onumber:()=>x6,optional:()=>d6,ostring:()=>T6,pipeline:()=>y6,preprocess:()=>h6,promise:()=>m6,quotelessJson:()=>f9,record:()=>i6,set:()=>a6,setErrorMap:()=>g9,strictObject:()=>J9,string:()=>wL,symbol:()=>j9,transformer:()=>f6,tuple:()=>n6,undefined:()=>z9,union:()=>e6,unknown:()=>K9,util:()=>$e,void:()=>Y9});var $e;(function(t){t.assertEqual=i=>{};function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{let o={};for(let s of i)o[s]=s;return o},t.getValidEnumValues=i=>{let o=t.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),s={};for(let l of o)s[l]=i[l];return t.objectValues(s)},t.objectValues=i=>t.objectKeys(i).map(function(o){return i[o]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let o=[];for(let s in i)Object.prototype.hasOwnProperty.call(i,s)&&o.push(s);return o},t.find=(i,o)=>{for(let s of i)if(o(s))return s},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function n(i,o=" | "){return i.map(s=>typeof s=="string"?`'${s}'`:s).join(o)}t.joinValues=n,t.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})($e||($e={}));var PS;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(PS||(PS={}));var ce=$e.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ti=t=>{switch(typeof t){case"undefined":return ce.undefined;case"string":return ce.string;case"number":return Number.isNaN(t)?ce.nan:ce.number;case"boolean":return ce.boolean;case"function":return ce.function;case"bigint":return ce.bigint;case"symbol":return ce.symbol;case"object":return Array.isArray(t)?ce.array:t===null?ce.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ce.promise:typeof Map<"u"&&t instanceof Map?ce.map:typeof Set<"u"&&t instanceof Set?ce.set:typeof Date<"u"&&t instanceof Date?ce.date:ce.object;default:return ce.unknown}};var re=$e.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),f9=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),Dr=class t extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){let r=e||function(o){return o.message},n={_errors:[]},i=o=>{for(let s of o.issues)if(s.code==="invalid_union")s.unionErrors.map(i);else if(s.code==="invalid_return_type")i(s.returnTypeError);else if(s.code==="invalid_arguments")i(s.argumentsError);else if(s.path.length===0)n._errors.push(r(s));else{let l=n,u=0;for(;u<s.path.length;){let m=s.path[u];u===s.path.length-1?(l[m]=l[m]||{_errors:[]},l[m]._errors.push(r(s))):l[m]=l[m]||{_errors:[]},l=l[m],u++}}};return i(this),n}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,$e.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};Dr.create=t=>new Dr(t);var d9=(t,e)=>{let r;switch(t.code){case re.invalid_type:t.received===ce.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case re.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,$e.jsonStringifyReplacer)}`;break;case re.unrecognized_keys:r=`Unrecognized key(s) in object: ${$e.joinValues(t.keys,", ")}`;break;case re.invalid_union:r="Invalid input";break;case re.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${$e.joinValues(t.options)}`;break;case re.invalid_enum_value:r=`Invalid enum value. Expected ${$e.joinValues(t.options)}, received '${t.received}'`;break;case re.invalid_arguments:r="Invalid function arguments";break;case re.invalid_return_type:r="Invalid function return type";break;case re.invalid_date:r="Invalid date";break;case re.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:$e.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case re.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case re.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case re.custom:r="Invalid input";break;case re.invalid_intersection_types:r="Intersection results could not be merged";break;case re.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case re.not_finite:r="Number must be finite";break;default:r=e.defaultError,$e.assertNever(t)}return{message:r}},Li=d9;var gL=Li;function g9(t){gL=t}function Hs(){return gL}var _l=t=>{let{data:e,path:r,errorMaps:n,issueData:i}=t,o=[...r,...i.path||[]],s={...i,path:o};if(i.message!==void 0)return{...i,path:o,message:i.message};let l="",u=n.filter(m=>!!m).slice().reverse();for(let m of u)l=m(s,{data:e,defaultError:l}).message;return{...i,path:o,message:l}},h9=[];function oe(t,e){let r=Hs(),n=_l({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===Li?void 0:Li].filter(i=>!!i)});t.common.issues.push(n)}var Qt=class t{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let i of r){if(i.status==="aborted")return xe;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let i of r){let o=await i.key,s=await i.value;n.push({key:o,value:s})}return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let i of r){let{key:o,value:s}=i;if(o.status==="aborted"||s.status==="aborted")return xe;o.status==="dirty"&&e.dirty(),s.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof s.value<"u"||i.alwaysSet)&&(n[o.value]=s.value)}return{status:e.value,value:n}}},xe=Object.freeze({status:"aborted"}),ia=t=>({status:"dirty",value:t}),ir=t=>({status:"valid",value:t}),rd=t=>t.status==="aborted",nd=t=>t.status==="dirty",fo=t=>t.status==="valid",Bs=t=>typeof Promise<"u"&&t instanceof Promise;var fe;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(fe||(fe={}));var hn=class{constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},hL=(t,e)=>{if(fo(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new Dr(t.common.issues);return this._error=r,this._error}}};function Pe(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(s,l)=>{let{message:u}=t;return s.code==="invalid_enum_value"?{message:u??l.defaultError}:typeof l.data>"u"?{message:u??n??l.defaultError}:s.code!=="invalid_type"?{message:l.defaultError}:{message:u??r??l.defaultError}},description:i}}var Ce=class{get description(){return this._def.description}_getType(e){return ti(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:ti(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Qt,ctx:{common:e.parent.common,data:e.data,parsedType:ti(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(Bs(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){let n={common:{issues:[],async:r?.async??!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ti(e)},i=this._parseSync({data:e,path:n.path,parent:n});return hL(n,i)}"~validate"(e){let r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ti(e)};if(!this["~standard"].async)try{let n=this._parseSync({data:e,path:[],parent:r});return fo(n)?{value:n.value}:{issues:r.common.issues}}catch(n){n?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then(n=>fo(n)?{value:n.value}:{issues:r.common.issues})}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:ti(e)},i=this._parse({data:e,path:n.path,parent:n}),o=await(Bs(i)?i:Promise.resolve(i));return hL(n,o)}refine(e,r){let n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,o)=>{let s=e(i),l=()=>o.addIssue({code:re.custom,...n(i)});return typeof Promise<"u"&&s instanceof Promise?s.then(u=>u?!0:(l(),!1)):s?!0:(l(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new yn({schema:this,typeName:Ee.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return gn.create(this,this._def)}nullable(){return ni.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Fi.create(this)}promise(){return yo.create(this,this._def)}or(e){return pa.create([this,e],this._def)}and(e){return ma.create(this,e,this._def)}transform(e){return new yn({...Pe(this._def),schema:this,typeName:Ee.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new ya({...Pe(this._def),innerType:this,defaultValue:r,typeName:Ee.ZodDefault})}brand(){return new Rl({typeName:Ee.ZodBranded,type:this,...Pe(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new Ta({...Pe(this._def),innerType:this,catchValue:r,typeName:Ee.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return kl.create(this,e)}readonly(){return xa.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},y9=/^c[^\s-]{8,}$/i,T9=/^[0-9a-z]+$/,x9=/^[0-9A-HJKMNP-TV-Z]{26}$/i,S9=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,v9=/^[a-z0-9_-]{21}$/i,b9=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,w9=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,E9=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,_9="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",LS,R9=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,k9=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,A9=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,P9=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,L9=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,D9=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,TL="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",M9=new RegExp(`^${TL}$`);function xL(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);let r=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${r}`}function F9(t){return new RegExp(`^${xL(t)}$`)}function SL(t){let e=`${TL}T${xL(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function C9(t,e){return!!((e==="v4"||!e)&&R9.test(t)||(e==="v6"||!e)&&A9.test(t))}function I9(t,e){if(!b9.test(t))return!1;try{let[r]=t.split("."),n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));return!(typeof i!="object"||i===null||"typ"in i&&i?.typ!=="JWT"||!i.alg||e&&i.alg!==e)}catch{return!1}}function O9(t,e){return!!((e==="v4"||!e)&&k9.test(t)||(e==="v6"||!e)&&P9.test(t))}var go=class t extends Ce{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ce.string){let o=this._getOrReturnCtx(e);return oe(o,{code:re.invalid_type,expected:ce.string,received:o.parsedType}),xe}let n=new Qt,i;for(let o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(i=this._getOrReturnCtx(e,i),oe(i,{code:re.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="max")e.data.length>o.value&&(i=this._getOrReturnCtx(e,i),oe(i,{code:re.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="length"){let s=e.data.length>o.value,l=e.data.length<o.value;(s||l)&&(i=this._getOrReturnCtx(e,i),s?oe(i,{code:re.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):l&&oe(i,{code:re.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),n.dirty())}else if(o.kind==="email")E9.test(e.data)||(i=this._getOrReturnCtx(e,i),oe(i,{validation:"email",code:re.invalid_string,message:o.message}),n.dirty());else if(o.kind==="emoji")LS||(LS=new RegExp(_9,"u")),LS.test(e.data)||(i=this._getOrReturnCtx(e,i),oe(i,{validation:"emoji",code:re.invalid_string,message:o.message}),n.dirty());else if(o.kind==="uuid")S9.test(e.data)||(i=this._getOrReturnCtx(e,i),oe(i,{validation:"uuid",code:re.invalid_string,message:o.message}),n.dirty());else if(o.kind==="nanoid")v9.test(e.data)||(i=this._getOrReturnCtx(e,i),oe(i,{validation:"nanoid",code:re.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid")y9.test(e.data)||(i=this._getOrReturnCtx(e,i),oe(i,{validation:"cuid",code:re.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid2")T9.test(e.data)||(i=this._getOrReturnCtx(e,i),oe(i,{validation:"cuid2",code:re.invalid_string,message:o.message}),n.dirty());else if(o.kind==="ulid")x9.test(e.data)||(i=this._getOrReturnCtx(e,i),oe(i,{validation:"ulid",code:re.invalid_string,message:o.message}),n.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),oe(i,{validation:"url",code:re.invalid_string,message:o.message}),n.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),oe(i,{validation:"regex",code:re.invalid_string,message:o.message}),n.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(e,i),oe(i,{code:re.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),n.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(i=this._getOrReturnCtx(e,i),oe(i,{code:re.invalid_string,validation:{startsWith:o.value},message:o.message}),n.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(i=this._getOrReturnCtx(e,i),oe(i,{code:re.invalid_string,validation:{endsWith:o.value},message:o.message}),n.dirty()):o.kind==="datetime"?SL(o).test(e.data)||(i=this._getOrReturnCtx(e,i),oe(i,{code:re.invalid_string,validation:"datetime",message:o.message}),n.dirty()):o.kind==="date"?M9.test(e.data)||(i=this._getOrReturnCtx(e,i),oe(i,{code:re.invalid_string,validation:"date",message:o.message}),n.dirty()):o.kind==="time"?F9(o).test(e.data)||(i=this._getOrReturnCtx(e,i),oe(i,{code:re.invalid_string,validation:"time",message:o.message}),n.dirty()):o.kind==="duration"?w9.test(e.data)||(i=this._getOrReturnCtx(e,i),oe(i,{validation:"duration",code:re.invalid_string,message:o.message}),n.dirty()):o.kind==="ip"?C9(e.data,o.version)||(i=this._getOrReturnCtx(e,i),oe(i,{validation:"ip",code:re.invalid_string,message:o.message}),n.dirty()):o.kind==="jwt"?I9(e.data,o.alg)||(i=this._getOrReturnCtx(e,i),oe(i,{validation:"jwt",code:re.invalid_string,message:o.message}),n.dirty()):o.kind==="cidr"?O9(e.data,o.version)||(i=this._getOrReturnCtx(e,i),oe(i,{validation:"cidr",code:re.invalid_string,message:o.message}),n.dirty()):o.kind==="base64"?L9.test(e.data)||(i=this._getOrReturnCtx(e,i),oe(i,{validation:"base64",code:re.invalid_string,message:o.message}),n.dirty()):o.kind==="base64url"?D9.test(e.data)||(i=this._getOrReturnCtx(e,i),oe(i,{validation:"base64url",code:re.invalid_string,message:o.message}),n.dirty()):$e.assertNever(o);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(i=>e.test(i),{validation:r,code:re.invalid_string,...fe.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...fe.errToObj(e)})}url(e){return this._addCheck({kind:"url",...fe.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...fe.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...fe.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...fe.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...fe.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...fe.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...fe.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...fe.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...fe.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...fe.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...fe.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...fe.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...fe.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...fe.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...fe.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...fe.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...fe.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...fe.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...fe.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...fe.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...fe.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...fe.errToObj(r)})}nonempty(e){return this.min(1,fe.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};go.create=t=>new go({checks:[],typeName:Ee.ZodString,coerce:t?.coerce??!1,...Pe(t)});function N9(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,o=Number.parseInt(t.toFixed(i).replace(".","")),s=Number.parseInt(e.toFixed(i).replace(".",""));return o%s/10**i}var oa=class t extends Ce{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ce.number){let o=this._getOrReturnCtx(e);return oe(o,{code:re.invalid_type,expected:ce.number,received:o.parsedType}),xe}let n,i=new Qt;for(let o of this._def.checks)o.kind==="int"?$e.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),oe(n,{code:re.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),oe(n,{code:re.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),oe(n,{code:re.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?N9(e.data,o.value)!==0&&(n=this._getOrReturnCtx(e,n),oe(n,{code:re.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),oe(n,{code:re.not_finite,message:o.message}),i.dirty()):$e.assertNever(o);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,fe.toString(r))}gt(e,r){return this.setLimit("min",e,!1,fe.toString(r))}lte(e,r){return this.setLimit("max",e,!0,fe.toString(r))}lt(e,r){return this.setLimit("max",e,!1,fe.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:fe.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:fe.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:fe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:fe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:fe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:fe.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:fe.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:fe.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:fe.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:fe.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&$e.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};oa.create=t=>new oa({checks:[],typeName:Ee.ZodNumber,coerce:t?.coerce||!1,...Pe(t)});var aa=class t extends Ce{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ce.bigint)return this._getInvalidInput(e);let n,i=new Qt;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),oe(n,{code:re.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),oe(n,{code:re.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),oe(n,{code:re.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):$e.assertNever(o);return{status:i.value,value:e.data}}_getInvalidInput(e){let r=this._getOrReturnCtx(e);return oe(r,{code:re.invalid_type,expected:ce.bigint,received:r.parsedType}),xe}gte(e,r){return this.setLimit("min",e,!0,fe.toString(r))}gt(e,r){return this.setLimit("min",e,!1,fe.toString(r))}lte(e,r){return this.setLimit("max",e,!0,fe.toString(r))}lt(e,r){return this.setLimit("max",e,!1,fe.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:fe.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:fe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:fe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:fe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:fe.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:fe.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};aa.create=t=>new aa({checks:[],typeName:Ee.ZodBigInt,coerce:t?.coerce??!1,...Pe(t)});var sa=class extends Ce{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ce.boolean){let n=this._getOrReturnCtx(e);return oe(n,{code:re.invalid_type,expected:ce.boolean,received:n.parsedType}),xe}return ir(e.data)}};sa.create=t=>new sa({typeName:Ee.ZodBoolean,coerce:t?.coerce||!1,...Pe(t)});var ca=class t extends Ce{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ce.date){let o=this._getOrReturnCtx(e);return oe(o,{code:re.invalid_type,expected:ce.date,received:o.parsedType}),xe}if(Number.isNaN(e.data.getTime())){let o=this._getOrReturnCtx(e);return oe(o,{code:re.invalid_date}),xe}let n=new Qt,i;for(let o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(i=this._getOrReturnCtx(e,i),oe(i,{code:re.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),n.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(i=this._getOrReturnCtx(e,i),oe(i,{code:re.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),n.dirty()):$e.assertNever(o);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:fe.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:fe.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};ca.create=t=>new ca({checks:[],coerce:t?.coerce||!1,typeName:Ee.ZodDate,...Pe(t)});var Ws=class extends Ce{_parse(e){if(this._getType(e)!==ce.symbol){let n=this._getOrReturnCtx(e);return oe(n,{code:re.invalid_type,expected:ce.symbol,received:n.parsedType}),xe}return ir(e.data)}};Ws.create=t=>new Ws({typeName:Ee.ZodSymbol,...Pe(t)});var la=class extends Ce{_parse(e){if(this._getType(e)!==ce.undefined){let n=this._getOrReturnCtx(e);return oe(n,{code:re.invalid_type,expected:ce.undefined,received:n.parsedType}),xe}return ir(e.data)}};la.create=t=>new la({typeName:Ee.ZodUndefined,...Pe(t)});var ua=class extends Ce{_parse(e){if(this._getType(e)!==ce.null){let n=this._getOrReturnCtx(e);return oe(n,{code:re.invalid_type,expected:ce.null,received:n.parsedType}),xe}return ir(e.data)}};ua.create=t=>new ua({typeName:Ee.ZodNull,...Pe(t)});var ho=class extends Ce{constructor(){super(...arguments),this._any=!0}_parse(e){return ir(e.data)}};ho.create=t=>new ho({typeName:Ee.ZodAny,...Pe(t)});var Mi=class extends Ce{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ir(e.data)}};Mi.create=t=>new Mi({typeName:Ee.ZodUnknown,...Pe(t)});var Fn=class extends Ce{_parse(e){let r=this._getOrReturnCtx(e);return oe(r,{code:re.invalid_type,expected:ce.never,received:r.parsedType}),xe}};Fn.create=t=>new Fn({typeName:Ee.ZodNever,...Pe(t)});var $s=class extends Ce{_parse(e){if(this._getType(e)!==ce.undefined){let n=this._getOrReturnCtx(e);return oe(n,{code:re.invalid_type,expected:ce.void,received:n.parsedType}),xe}return ir(e.data)}};$s.create=t=>new $s({typeName:Ee.ZodVoid,...Pe(t)});var Fi=class t extends Ce{_parse(e){let{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==ce.array)return oe(r,{code:re.invalid_type,expected:ce.array,received:r.parsedType}),xe;if(i.exactLength!==null){let s=r.data.length>i.exactLength.value,l=r.data.length<i.exactLength.value;(s||l)&&(oe(r,{code:s?re.too_big:re.too_small,minimum:l?i.exactLength.value:void 0,maximum:s?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(oe(r,{code:re.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(oe(r,{code:re.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((s,l)=>i.type._parseAsync(new hn(r,s,r.path,l)))).then(s=>Qt.mergeArray(n,s));let o=[...r.data].map((s,l)=>i.type._parseSync(new hn(r,s,r.path,l)));return Qt.mergeArray(n,o)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:fe.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:fe.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:fe.toString(r)}})}nonempty(e){return this.min(1,e)}};Fi.create=(t,e)=>new Fi({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Ee.ZodArray,...Pe(e)});function Vs(t){if(t instanceof Mr){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=gn.create(Vs(n))}return new Mr({...t._def,shape:()=>e})}else return t instanceof Fi?new Fi({...t._def,type:Vs(t.element)}):t instanceof gn?gn.create(Vs(t.unwrap())):t instanceof ni?ni.create(Vs(t.unwrap())):t instanceof ri?ri.create(t.items.map(e=>Vs(e))):t}var Mr=class t extends Ce{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=$e.objectKeys(e);return this._cached={shape:e,keys:r},this._cached}_parse(e){if(this._getType(e)!==ce.object){let m=this._getOrReturnCtx(e);return oe(m,{code:re.invalid_type,expected:ce.object,received:m.parsedType}),xe}let{status:n,ctx:i}=this._processInputParams(e),{shape:o,keys:s}=this._getCached(),l=[];if(!(this._def.catchall instanceof Fn&&this._def.unknownKeys==="strip"))for(let m in i.data)s.includes(m)||l.push(m);let u=[];for(let m of s){let d=o[m],g=i.data[m];u.push({key:{status:"valid",value:m},value:d._parse(new hn(i,g,i.path,m)),alwaysSet:m in i.data})}if(this._def.catchall instanceof Fn){let m=this._def.unknownKeys;if(m==="passthrough")for(let d of l)u.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(m==="strict")l.length>0&&(oe(i,{code:re.unrecognized_keys,keys:l}),n.dirty());else if(m!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let m=this._def.catchall;for(let d of l){let g=i.data[d];u.push({key:{status:"valid",value:d},value:m._parse(new hn(i,g,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let m=[];for(let d of u){let g=await d.key,y=await d.value;m.push({key:g,value:y,alwaysSet:d.alwaysSet})}return m}).then(m=>Qt.mergeObjectSync(n,m)):Qt.mergeObjectSync(n,u)}get shape(){return this._def.shape()}strict(e){return fe.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{let i=this._def.errorMap?.(r,n).message??n.defaultError;return r.code==="unrecognized_keys"?{message:fe.errToObj(e).message??i}:{message:i}}}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:Ee.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};for(let n of $e.objectKeys(e))e[n]&&this.shape[n]&&(r[n]=this.shape[n]);return new t({...this._def,shape:()=>r})}omit(e){let r={};for(let n of $e.objectKeys(this.shape))e[n]||(r[n]=this.shape[n]);return new t({...this._def,shape:()=>r})}deepPartial(){return Vs(this)}partial(e){let r={};for(let n of $e.objectKeys(this.shape)){let i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}return new t({...this._def,shape:()=>r})}required(e){let r={};for(let n of $e.objectKeys(this.shape))if(e&&!e[n])r[n]=this.shape[n];else{let o=this.shape[n];for(;o instanceof gn;)o=o._def.innerType;r[n]=o}return new t({...this._def,shape:()=>r})}keyof(){return vL($e.objectKeys(this.shape))}};Mr.create=(t,e)=>new Mr({shape:()=>t,unknownKeys:"strip",catchall:Fn.create(),typeName:Ee.ZodObject,...Pe(e)});Mr.strictCreate=(t,e)=>new Mr({shape:()=>t,unknownKeys:"strict",catchall:Fn.create(),typeName:Ee.ZodObject,...Pe(e)});Mr.lazycreate=(t,e)=>new Mr({shape:t,unknownKeys:"strip",catchall:Fn.create(),typeName:Ee.ZodObject,...Pe(e)});var pa=class extends Ce{_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function i(o){for(let l of o)if(l.result.status==="valid")return l.result;for(let l of o)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;let s=o.map(l=>new Dr(l.ctx.common.issues));return oe(r,{code:re.invalid_union,unionErrors:s}),xe}if(r.common.async)return Promise.all(n.map(async o=>{let s={...r,common:{...r.common,issues:[]},parent:null};return{result:await o._parseAsync({data:r.data,path:r.path,parent:s}),ctx:s}})).then(i);{let o,s=[];for(let u of n){let m={...r,common:{...r.common,issues:[]},parent:null},d=u._parseSync({data:r.data,path:r.path,parent:m});if(d.status==="valid")return d;d.status==="dirty"&&!o&&(o={result:d,ctx:m}),m.common.issues.length&&s.push(m.common.issues)}if(o)return r.common.issues.push(...o.ctx.common.issues),o.result;let l=s.map(u=>new Dr(u));return oe(r,{code:re.invalid_union,unionErrors:l}),xe}}get options(){return this._def.options}};pa.create=(t,e)=>new pa({options:t,typeName:Ee.ZodUnion,...Pe(e)});var Di=t=>t instanceof fa?Di(t.schema):t instanceof yn?Di(t.innerType()):t instanceof da?[t.value]:t instanceof ga?t.options:t instanceof ha?$e.objectValues(t.enum):t instanceof ya?Di(t._def.innerType):t instanceof la?[void 0]:t instanceof ua?[null]:t instanceof gn?[void 0,...Di(t.unwrap())]:t instanceof ni?[null,...Di(t.unwrap())]:t instanceof Rl||t instanceof xa?Di(t.unwrap()):t instanceof Ta?Di(t._def.innerType):[],id=class t extends Ce{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==ce.object)return oe(r,{code:re.invalid_type,expected:ce.object,received:r.parsedType}),xe;let n=this.discriminator,i=r.data[n],o=this.optionsMap.get(i);return o?r.common.async?o._parseAsync({data:r.data,path:r.path,parent:r}):o._parseSync({data:r.data,path:r.path,parent:r}):(oe(r,{code:re.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),xe)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let i=new Map;for(let o of r){let s=Di(o.shape[e]);if(!s.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let l of s){if(i.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);i.set(l,o)}}return new t({typeName:Ee.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...Pe(n)})}};function DS(t,e){let r=ti(t),n=ti(e);if(t===e)return{valid:!0,data:t};if(r===ce.object&&n===ce.object){let i=$e.objectKeys(e),o=$e.objectKeys(t).filter(l=>i.indexOf(l)!==-1),s={...t,...e};for(let l of o){let u=DS(t[l],e[l]);if(!u.valid)return{valid:!1};s[l]=u.data}return{valid:!0,data:s}}else if(r===ce.array&&n===ce.array){if(t.length!==e.length)return{valid:!1};let i=[];for(let o=0;o<t.length;o++){let s=t[o],l=e[o],u=DS(s,l);if(!u.valid)return{valid:!1};i.push(u.data)}return{valid:!0,data:i}}else return r===ce.date&&n===ce.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var ma=class extends Ce{_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=(o,s)=>{if(rd(o)||rd(s))return xe;let l=DS(o.value,s.value);return l.valid?((nd(o)||nd(s))&&r.dirty(),{status:r.value,value:l.data}):(oe(n,{code:re.invalid_intersection_types}),xe)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([o,s])=>i(o,s)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};ma.create=(t,e,r)=>new ma({left:t,right:e,typeName:Ee.ZodIntersection,...Pe(r)});var ri=class t extends Ce{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==ce.array)return oe(n,{code:re.invalid_type,expected:ce.array,received:n.parsedType}),xe;if(n.data.length<this._def.items.length)return oe(n,{code:re.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),xe;!this._def.rest&&n.data.length>this._def.items.length&&(oe(n,{code:re.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let o=[...n.data].map((s,l)=>{let u=this._def.items[l]||this._def.rest;return u?u._parse(new hn(n,s,n.path,l)):null}).filter(s=>!!s);return n.common.async?Promise.all(o).then(s=>Qt.mergeArray(r,s)):Qt.mergeArray(r,o)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};ri.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ri({items:t,typeName:Ee.ZodTuple,rest:null,...Pe(e)})};var od=class t extends Ce{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==ce.object)return oe(n,{code:re.invalid_type,expected:ce.object,received:n.parsedType}),xe;let i=[],o=this._def.keyType,s=this._def.valueType;for(let l in n.data)i.push({key:o._parse(new hn(n,l,n.path,l)),value:s._parse(new hn(n,n.data[l],n.path,l)),alwaysSet:l in n.data});return n.common.async?Qt.mergeObjectAsync(r,i):Qt.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof Ce?new t({keyType:e,valueType:r,typeName:Ee.ZodRecord,...Pe(n)}):new t({keyType:go.create(),valueType:e,typeName:Ee.ZodRecord,...Pe(r)})}},js=class extends Ce{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==ce.map)return oe(n,{code:re.invalid_type,expected:ce.map,received:n.parsedType}),xe;let i=this._def.keyType,o=this._def.valueType,s=[...n.data.entries()].map(([l,u],m)=>({key:i._parse(new hn(n,l,n.path,[m,"key"])),value:o._parse(new hn(n,u,n.path,[m,"value"]))}));if(n.common.async){let l=new Map;return Promise.resolve().then(async()=>{for(let u of s){let m=await u.key,d=await u.value;if(m.status==="aborted"||d.status==="aborted")return xe;(m.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(m.value,d.value)}return{status:r.value,value:l}})}else{let l=new Map;for(let u of s){let m=u.key,d=u.value;if(m.status==="aborted"||d.status==="aborted")return xe;(m.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(m.value,d.value)}return{status:r.value,value:l}}}};js.create=(t,e,r)=>new js({valueType:e,keyType:t,typeName:Ee.ZodMap,...Pe(r)});var zs=class t extends Ce{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==ce.set)return oe(n,{code:re.invalid_type,expected:ce.set,received:n.parsedType}),xe;let i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(oe(n,{code:re.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(oe(n,{code:re.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());let o=this._def.valueType;function s(u){let m=new Set;for(let d of u){if(d.status==="aborted")return xe;d.status==="dirty"&&r.dirty(),m.add(d.value)}return{status:r.value,value:m}}let l=[...n.data.values()].map((u,m)=>o._parse(new hn(n,u,n.path,m)));return n.common.async?Promise.all(l).then(u=>s(u)):s(l)}min(e,r){return new t({...this._def,minSize:{value:e,message:fe.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:fe.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};zs.create=(t,e)=>new zs({valueType:t,minSize:null,maxSize:null,typeName:Ee.ZodSet,...Pe(e)});var ad=class t extends Ce{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==ce.function)return oe(r,{code:re.invalid_type,expected:ce.function,received:r.parsedType}),xe;function n(l,u){return _l({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Hs(),Li].filter(m=>!!m),issueData:{code:re.invalid_arguments,argumentsError:u}})}function i(l,u){return _l({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Hs(),Li].filter(m=>!!m),issueData:{code:re.invalid_return_type,returnTypeError:u}})}let o={errorMap:r.common.contextualErrorMap},s=r.data;if(this._def.returns instanceof yo){let l=this;return ir(async function(...u){let m=new Dr([]),d=await l._def.args.parseAsync(u,o).catch(x=>{throw m.addIssue(n(u,x)),m}),g=await Reflect.apply(s,this,d);return await l._def.returns._def.type.parseAsync(g,o).catch(x=>{throw m.addIssue(i(g,x)),m})})}else{let l=this;return ir(function(...u){let m=l._def.args.safeParse(u,o);if(!m.success)throw new Dr([n(u,m.error)]);let d=Reflect.apply(s,this,m.data),g=l._def.returns.safeParse(d,o);if(!g.success)throw new Dr([i(d,g.error)]);return g.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:ri.create(e).rest(Mi.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||ri.create([]).rest(Mi.create()),returns:r||Mi.create(),typeName:Ee.ZodFunction,...Pe(n)})}},fa=class extends Ce{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};fa.create=(t,e)=>new fa({getter:t,typeName:Ee.ZodLazy,...Pe(e)});var da=class extends Ce{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return oe(r,{received:r.data,code:re.invalid_literal,expected:this._def.value}),xe}return{status:"valid",value:e.data}}get value(){return this._def.value}};da.create=(t,e)=>new da({value:t,typeName:Ee.ZodLiteral,...Pe(e)});function vL(t,e){return new ga({values:t,typeName:Ee.ZodEnum,...Pe(e)})}var ga=class t extends Ce{_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return oe(r,{expected:$e.joinValues(n),received:r.parsedType,code:re.invalid_type}),xe}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){let r=this._getOrReturnCtx(e),n=this._def.values;return oe(r,{received:r.data,code:re.invalid_enum_value,options:n}),xe}return ir(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}};ga.create=vL;var ha=class extends Ce{_parse(e){let r=$e.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==ce.string&&n.parsedType!==ce.number){let i=$e.objectValues(r);return oe(n,{expected:$e.joinValues(i),received:n.parsedType,code:re.invalid_type}),xe}if(this._cache||(this._cache=new Set($e.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){let i=$e.objectValues(r);return oe(n,{received:n.data,code:re.invalid_enum_value,options:i}),xe}return ir(e.data)}get enum(){return this._def.values}};ha.create=(t,e)=>new ha({values:t,typeName:Ee.ZodNativeEnum,...Pe(e)});var yo=class extends Ce{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==ce.promise&&r.common.async===!1)return oe(r,{code:re.invalid_type,expected:ce.promise,received:r.parsedType}),xe;let n=r.parsedType===ce.promise?r.data:Promise.resolve(r.data);return ir(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}};yo.create=(t,e)=>new yo({type:t,typeName:Ee.ZodPromise,...Pe(e)});var yn=class extends Ce{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ee.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,o={addIssue:s=>{oe(n,s),s.fatal?r.abort():r.dirty()},get path(){return n.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){let s=i.transform(n.data,o);if(n.common.async)return Promise.resolve(s).then(async l=>{if(r.value==="aborted")return xe;let u=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return u.status==="aborted"?xe:u.status==="dirty"?ia(u.value):r.value==="dirty"?ia(u.value):u});{if(r.value==="aborted")return xe;let l=this._def.schema._parseSync({data:s,path:n.path,parent:n});return l.status==="aborted"?xe:l.status==="dirty"?ia(l.value):r.value==="dirty"?ia(l.value):l}}if(i.type==="refinement"){let s=l=>{let u=i.refinement(l,o);if(n.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){let l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?xe:(l.status==="dirty"&&r.dirty(),s(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?xe:(l.status==="dirty"&&r.dirty(),s(l.value).then(()=>({status:r.value,value:l.value}))))}if(i.type==="transform")if(n.common.async===!1){let s=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!fo(s))return xe;let l=i.transform(s.value,o);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(s=>fo(s)?Promise.resolve(i.transform(s.value,o)).then(l=>({status:r.value,value:l})):xe);$e.assertNever(i)}};yn.create=(t,e,r)=>new yn({schema:t,typeName:Ee.ZodEffects,effect:e,...Pe(r)});yn.createWithPreprocess=(t,e,r)=>new yn({schema:e,effect:{type:"preprocess",transform:t},typeName:Ee.ZodEffects,...Pe(r)});var gn=class extends Ce{_parse(e){return this._getType(e)===ce.undefined?ir(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};gn.create=(t,e)=>new gn({innerType:t,typeName:Ee.ZodOptional,...Pe(e)});var ni=class extends Ce{_parse(e){return this._getType(e)===ce.null?ir(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};ni.create=(t,e)=>new ni({innerType:t,typeName:Ee.ZodNullable,...Pe(e)});var ya=class extends Ce{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===ce.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};ya.create=(t,e)=>new ya({innerType:t,typeName:Ee.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Pe(e)});var Ta=class extends Ce{_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Bs(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Dr(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Dr(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};Ta.create=(t,e)=>new Ta({innerType:t,typeName:Ee.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Pe(e)});var qs=class extends Ce{_parse(e){if(this._getType(e)!==ce.nan){let n=this._getOrReturnCtx(e);return oe(n,{code:re.invalid_type,expected:ce.nan,received:n.parsedType}),xe}return{status:"valid",value:e.data}}};qs.create=t=>new qs({typeName:Ee.ZodNaN,...Pe(t)});var U9=Symbol("zod_brand"),Rl=class extends Ce{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},kl=class t extends Ce{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let o=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?xe:o.status==="dirty"?(r.dirty(),ia(o.value)):this._def.out._parseAsync({data:o.value,path:n.path,parent:n})})();{let i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?xe:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:Ee.ZodPipeline})}},xa=class extends Ce{_parse(e){let r=this._def.innerType._parse(e),n=i=>(fo(i)&&(i.value=Object.freeze(i.value)),i);return Bs(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}};xa.create=(t,e)=>new xa({innerType:t,typeName:Ee.ZodReadonly,...Pe(e)});function yL(t,e){let r=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof r=="string"?{message:r}:r}function bL(t,e={},r){return t?ho.create().superRefine((n,i)=>{let o=t(n);if(o instanceof Promise)return o.then(s=>{if(!s){let l=yL(e,n),u=l.fatal??r??!0;i.addIssue({code:"custom",...l,fatal:u})}});if(!o){let s=yL(e,n),l=s.fatal??r??!0;i.addIssue({code:"custom",...s,fatal:l})}}):ho.create()}var H9={object:Mr.lazycreate},Ee;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Ee||(Ee={}));var B9=(t,e={message:`Input not instance of ${t.name}`})=>bL(r=>r instanceof t,e),wL=go.create,EL=oa.create,V9=qs.create,W9=aa.create,_L=sa.create,$9=ca.create,j9=Ws.create,z9=la.create,q9=ua.create,G9=ho.create,K9=Mi.create,Q9=Fn.create,Y9=$s.create,Z9=Fi.create,X9=Mr.create,J9=Mr.strictCreate,e6=pa.create,t6=id.create,r6=ma.create,n6=ri.create,i6=od.create,o6=js.create,a6=zs.create,s6=ad.create,c6=fa.create,l6=da.create,u6=ga.create,p6=ha.create,m6=yo.create,f6=yn.create,d6=gn.create,g6=ni.create,h6=yn.createWithPreprocess,y6=kl.create,T6=()=>wL().optional(),x6=()=>EL().optional(),S6=()=>_L().optional(),v6={string:t=>go.create({...t,coerce:!0}),number:t=>oa.create({...t,coerce:!0}),boolean:t=>sa.create({...t,coerce:!0}),bigint:t=>aa.create({...t,coerce:!0}),date:t=>ca.create({...t,coerce:!0})};var b6=xe;function MS(t,e){return new Z(t.row,t.column,e.row,e.column)}function RL(t){let e=t.operands.map(FS).join(" ");return`(#${t.operator} ${e})`}function FS(t){return t.type==="capture"?`@${t.name}`:t.value}function kL(t,e){return e.errors.filter(r=>!(r.code==="invalid_type"&&r.path.length===2&&(r.path[1]==="name"||r.path[1]==="value"))).map(r=>w6(t,r))}function w6(t,e){if(e.path.length===0)return e.code==="too_small"?"Too few arguments":e.code==="too_big"?"Too many arguments":e.message;let r=e.message;e.code==="invalid_literal"&&e.path[1]==="type"&&(r=e.expected==="capture"?"Capture names must be prefixed with @":"Expected string, but received capture");let n=e.path[0],i=FS(t[n]);return`Error on argument ${n} (\`${i}\`): ${r}`}var St=class{allowMissingNode(){return!1}createPredicate(e){let r=this.schema.safeParse(e);return r.success?{success:!0,predicate:n=>{try{let i=this.constructAcceptArgs(r.data,n);return this.run(...i)}catch(i){if(i instanceof sd&&this.allowMissingNode())return!0;throw i}}}:{success:!1,errors:kL(e,r.error)}}constructAcceptArgs(e,r){return e.map(n=>{if(n.type==="capture"){let i=r.captures.find(o=>o.name===n.name);if(i==null)throw new sd(n.name);return i}else return n.value})}},sd=class extends Error{constructor(e){super(`Could not find capture ${e}`)}};function CS(t,e){if(t.parent==null)throw Error("Node has no parent");let r=t.parent.walk(),n=r.gotoFirstChild(),i=!0;for(;n;){if(r.currentFieldName===e){if(r.currentNode.id===t.id)return i;i=!i}n=r.gotoNextSibling()}throw Error(`Node not found in parent for field: ${e}`)}var IS=Me.object({type:Me.literal("string"),value:Me.string()}),me={node:Me.object({type:Me.literal("capture"),name:Me.string()}),string:IS,integer:IS.transform((t,e)=>{let r=parseInt(t.value);return isNaN(r)?(e.addIssue({code:Me.ZodIssueCode.custom,message:"Expected an integer"}),Me.NEVER):{type:"integer",value:r}}),boolean:IS.transform((t,e)=>t.value==="true"?{type:"boolean",value:!0}:t.value==="false"?{type:"boolean",value:!1}:(e.addIssue({code:Me.ZodIssueCode.custom,message:"Expected true or false"}),Me.NEVER))};var OS=class extends St{constructor(){super(...arguments);this.name="even?";this.schema=Me.tuple([me.node,me.string])}run({node:r},n){return CS(r,n)}},NS=class extends St{constructor(){super(...arguments);this.name="odd?";this.schema=Me.tuple([me.node,me.string])}run({node:r},n){return!CS(r,n)}},US=class extends St{constructor(){super(...arguments);this.name="text?";this.schema=Me.tuple([me.node,me.string]).rest(me.string)}run({document:r,range:n},...i){return i.includes(r.getText(n))}},HS=class extends St{constructor(){super(...arguments);this.name="type?";this.schema=Me.tuple([me.node,me.string]).rest(me.string)}run({node:r},...n){return n.includes(r.type)}},BS=class extends St{constructor(){super(...arguments);this.name="not-type?";this.schema=Me.tuple([me.node,me.string]).rest(me.string)}run({node:r},...n){return!n.includes(r.type)}},VS=class extends St{constructor(){super(...arguments);this.name="not-parent-type?";this.schema=Me.tuple([me.node,me.string]).rest(me.string)}run({node:r},...n){return r.parent==null||!n.includes(r.parent.type)}},WS=class extends St{constructor(){super(...arguments);this.name="is-nth-child?";this.schema=Me.tuple([me.node,me.integer])}run({node:r},n){return r.parent?.children.findIndex(i=>i.id===r.id)===n}},$S=class extends St{constructor(){super(...arguments);this.name="has-multiple-children-of-type?";this.schema=Me.tuple([me.node,me.string])}run({node:r},n){return r.children.filter(o=>o.type===n).length>1}},jS=class extends St{constructor(){super(...arguments);this.name="child-range!";this.schema=Me.union([Me.tuple([me.node,me.integer]),Me.tuple([me.node,me.integer,me.integer]),Me.tuple([me.node,me.integer,me.integer,me.boolean]),Me.tuple([me.node,me.integer,me.integer,me.boolean,me.boolean])])}run(r,n,i,o,s){let{node:{children:l}}=r;n=n<0?l.length+n:n,i=i??-1,i=i<0?l.length+i:i;let u=l[n],m=l[i];return r.range=MS(o?u.endPosition:u.startPosition,s?m.startPosition:m.endPosition),!0}},zS=class extends St{constructor(){super(...arguments);this.name="character-range!";this.schema=Me.union([Me.tuple([me.node,me.integer]),Me.tuple([me.node,me.integer,me.integer])])}run(r,n,i){return r.range=new Z(r.range.start.translate(void 0,n),r.range.end.translate(void 0,i??0)),!0}},qS=class extends St{constructor(){super(...arguments);this.name="shrink-to-match!";this.schema=Me.tuple([me.node,me.string])}run(r,n){let{document:i,range:o}=r,l=i.getText(o).match(new RegExp(n,"ds"));if(l?.index==null)throw Error(`No match for pattern '${n}'`);let[u,m]=l.indices?.groups?.keep??l.indices[0],d=i.offsetAt(o.start);return r.range=new Z(i.positionAt(d+u),i.positionAt(d+m)),!0}},GS=class extends St{constructor(){super(...arguments);this.name="grow-to-named-siblings!";this.schema=Me.union([Me.tuple([me.node]),Me.tuple([me.node,me.string])])}run(r,n){let{node:i,range:o,document:s}=r;if(i.parent==null)throw Error("Node has no parent");let{children:l}=i.parent,u=l.findIndex(d=>d.id===i.id),m=null;if(u===-1)throw Error("Node not found in parent");for(let d=u+1;d<l.length;++d){let g=l[d];if(!g.isNamed)break;let y=MS(g.startPosition,g.endPosition);if(n!=null&&n===s.getText(y))break;m=y.end}return m!=null&&(r.range=new Z(o.start,m)),!0}},KS=class extends St{constructor(){super(...arguments);this.name="trim-end!";this.schema=Me.tuple([me.node])}run(r){let{document:n,range:i}=r,o=n.getText(i),s=o.length-o.trimEnd().length;return s>0&&(r.range=new Z(i.start,KR(n,i.end,-s))),!0}},QS=class extends St{constructor(){super(...arguments);this.name="document-range!";this.schema=Me.tuple([me.node]).rest(me.node)}run(...r){for(let n of r)n.range=n.document.range;return!0}},YS=class extends St{constructor(){super(...arguments);this.name="allow-multiple!";this.schema=Me.tuple([me.node]).rest(me.node)}allowMissingNode(){return!0}run(...r){for(let n of r)n.allowMultiple=!0;return!0}},ZS=class extends St{constructor(){super(...arguments);this.name="log!";this.schema=Me.tuple([me.node])}run(r){return console.log(`#log!: ${r.name}@${r.range}`),!0}},XS=class extends St{constructor(){super(...arguments);this.name="insertion-delimiter!";this.schema=Me.tuple([me.node,me.string])}run(r,n){return r.insertionDelimiter=n,!0}},JS=class extends St{constructor(){super(...arguments);this.name="single-or-multi-line-delimiter!";this.schema=Me.tuple([me.node,me.node,me.string,me.string])}run(r,n,i,o){return r.insertionDelimiter=n.range.isSingleLine?i:o,!0}},ev=class extends St{constructor(){super(...arguments);this.name="empty-single-multi-delimiter!";this.schema=Me.tuple([me.node,me.node,me.string,me.string,me.string])}run(r,n,i,o,s){let l=!n.node.children.some(u=>u.isNamed);return r.insertionDelimiter=l?i:n.range.isSingleLine?o:s,!0}},AL=[new ZS,new OS,new NS,new US,new HS,new BS,new KS,new QS,new VS,new WS,new jS,new zS,new qS,new GS,new YS,new XS,new JS,new ev,new $S];function PL(t){let e=[],r=[];return t.forEach((n,i)=>{let o=[];n.forEach((s,l)=>{let u=AL.find(({name:d})=>d===s.operator);if(u==null){e.push({patternIdx:i,predicateIdx:l,error:`Unknown predicate operator "${s.operator}"`});return}let m=u.createPredicate(s.operands);if(!m.success){e.push(...m.errors.map(d=>({patternIdx:i,predicateIdx:l,error:d})));return}o.push(m.predicate)}),r.push(o)}),{errors:e,predicates:r}}function LL(t,e){let{errors:r,predicates:n}=PL(e.predicates);if(r.length>0){for(let i of r){let o=[`language ${t}`,`pattern ${i.patternIdx}`,`predicate \`${RL(e.predicates[i.patternIdx][i.predicateIdx])}\``].join(", ");gt(P().messages,"TreeSitterQuery.parsePredicates",`Error parsing predicate for ${o}: ${i.error}`)}if(P().runMode==="test")throw new Error("Invalid predicates")}return n}function tv(t){return{row:t.line,column:t.character}}function DL(t){return t.map(e=>({...e,range:rv(e),name:E6(e)}))}function rv(t){return t.name.endsWith(".startOf")?t.range.start.toEmptyRange():t.name.endsWith(".endOf")?t.range.end.toEmptyRange():t.range}function E6(t){return t.name.endsWith(".startOf")?t.name.slice(0,-8):t.name.endsWith(".endOf")?t.name.slice(0,-6):t.name}var nv=class{constructor(){this.documentVersion=-1;this.documentUri="";this.documentLanguageId="";this.matches=[]}clear(){this.documentUri="",this.documentVersion=-1,this.documentLanguageId="",this.startPosition=void 0,this.endPosition=void 0,this.matches=[]}isValid(e,r,n){return this.documentVersion===e.version&&this.documentUri===e.uri.toString()&&this.documentLanguageId===e.languageId&&ML(this.startPosition,r)&&ML(this.endPosition,n)}update(e,r,n,i){this.documentVersion=e.version,this.documentUri=e.uri.toString(),this.documentLanguageId=e.languageId,this.startPosition=r,this.endPosition=n,this.matches=i}get(){return this.matches}};function ML(t,e){return t==null||e==null?t===e:t.isEqual(e)}var Sa=new nv;var Al=class t{constructor(e,r,n){this.treeSitter=e;this.query=r;this.patternPredicates=n;this.shouldCheckCaptures=P().runMode!=="production"}static create(e,r,n){let i=LL(e,n);return new t(r,n,i)}hasCapture(e){return this.query.captureNames.some(r=>AS(r)===e)}matches(e,r,n){if(!Sa.isValid(e,r,n)){let i=this.getAllMatches(e,r,n);Sa.update(e,r,n,i)}return Sa.get()}getAllMatches(e,r,n){let i=this.getTreeMatches(e,r,n),o=[];for(let s of i){let l=this.createMutableQueryMatch(e,s);this.runPredicates(l)&&o.push(this.createQueryMatch(l))}return o}getTreeMatches(e,r,n){let{rootNode:i}=this.treeSitter.getTree(e);return this.query.matches(i,{startPosition:r!=null?tv(r):void 0,endPosition:n!=null?tv(n):void 0})}createMutableQueryMatch(e,r){return{patternIdx:r.patternIndex,captures:r.captures.map(({name:n,node:i})=>({name:n,node:i,document:e,range:mL(i),insertionDelimiter:void 0,allowMultiple:!1,hasError:()=>dL(i)}))}}runPredicates(e){for(let r of this.patternPredicates[e.patternIdx])if(!r(e))return!1;return!0}createQueryMatch(e){let r=[],n=new Map;for(let i of e.captures){let o=AS(i.name),s=rv(i),l=n.get(o);if(l==null){let u=[i],m={...i,name:o,range:s,hasError:()=>u.some(d=>d.hasError())};r.push(m),n.set(o,{acc:m,captures:u})}else l.acc.range=l.acc.range.union(s),l.acc.allowMultiple=l.acc.allowMultiple||i.allowMultiple,l.acc.insertionDelimiter=l.acc.insertionDelimiter??i.insertionDelimiter,l.captures.push(i)}return this.shouldCheckCaptures&&this.checkCaptures(Array.from(n.values())),{captures:r}}checkCaptures(e){for(let r of e)if(!fL(DL(r.captures),P().messages)&&P().runMode==="test")throw new Error("Invalid captures")}};var CL="_",_6=[CL,"interior",...Qo],R6=["prefix","leading","trailing"],k6=["startOf","endOf","start.startOf","start.endOf","end.startOf","end.endOf"],A6=["domain","removal","iteration","iteration.domain"],FL=["start","end","start.startOf","start.endOf","end.startOf","end.endOf"],va=new Set;for(let t of _6){if(t!==CL){va.add(t);for(let e of FL)va.add(`${t}.${e}`)}for(let e of R6){va.add(`${t}.${e}`);for(let r of k6)va.add(`${t}.${e}.${r}`)}for(let e of A6){va.add(`${t}.${e}`);for(let r of FL)va.add(`${t}.${e}.${r}`)}}var P6=/^(?!;;).*(?<!"\w*)@([\w.]*)/gm;function IL(t,e){let r=e.matchAll(P6),n=[];for(let o of r){let s=o[1];if(!(s.length>1&&!s.includes(".")&&s.startsWith("_"))&&!va.has(s)){let l=o.input.slice(0,o.index).split(`
`).length;n.push(`${t}(${l}) invalid capture '@${s}'.`)}}if(n.length===0)return;let i=n.join(`
`);if(gt(P().messages,"validateQueryCaptures.invalidCaptureName",i),P().runMode==="test")throw new Error(i)}var cd=class t{constructor(e){this.query=e}static async create(e,r,n,i){let o=await L6(e,r,`${i}.scm`);if(o==null||!await n.loadLanguage(i))return;let s=n.createQuery(i,o);if(s==null)throw Error(`Could not create Tree sitter query for language ${i}`);let l=Al.create(i,n,s);return new t(l)}getScopeHandler(e){if(this.query.hasCapture(e.type))return new If(this.query,e)}getCapturesMap(e){let r=this.query.matches(e),n={};for(let i of r)for(let o of i.captures){let s=o.name;n[s]==null&&(n[s]=[]),n[s].push(o)}return n}};async function L6(t,e,r){let n={[r]:null},i=t.runMode!=="production";for(;Object.values(n).some(o=>o==null);)for(let[o,s]of Object.entries(n)){if(s!=null)continue;let l=await e.readQuery(o);if(l==null){if(o===r)return;if(gt(t.messages,"LanguageDefinition.readQueryFileAndImports.queryNotFound",`Could not find imported query file ${o}`),t.runMode==="test")throw new Error("Invalid import statement");l=""}i&&IL(o,l),n[o]=l,cn(l,/^[^\S\r\n]*;;?[^\S\r\n]*(?:import|include)[^\S\r\n]+['"]?([\w|/\\.]+)['"]?[^\S\r\n]*$/gm,u=>{let m=u[1];i&&D6(t,o,m,u[0]),n[m]=n[m]??null})}return Object.values(n).join(`
`)}function D6(t,e,r,n){let i=!1;/[/\\]/g.test(r)&&(gt(t.messages,"LanguageDefinition.readQueryFileAndImports.invalidImport",`Invalid import statement in ${e}: "${n}". Relative import paths not supported`),i=!0);let o=`;; import ${r}`;if(n!==o&&(gt(t.messages,"LanguageDefinition.readQueryFileAndImports.malformedImport",`Malformed import statement in ${e}: "${n}". Import statements must be of the form "${o}"`),i=!0),i&&t.runMode==="test")throw new Error("Invalid import statement")}var OL=Symbol("LANGUAGE_UNDEFINED"),ld=class t{constructor(e,r,n){this.ide=e;this.treeSitter=r;this.treeSitterQueryProvider=n;this.notifier=new tr;this.languageDefinitions=new Map;this.disposables=[];this.onDidChangeDefinition=this.notifier.registerListener;let i=e.runMode==="test";e.onDidOpenTextDocument(o=>{i&&Sa.clear(),this.loadLanguage(o.languageId)}),e.onDidChangeVisibleTextEditors(o=>{o.forEach(({document:s})=>this.loadLanguage(s.languageId))}),this.disposables.push(n.onChanges(()=>this.reloadLanguageDefinitions()))}static async create(e,r,n){let i=new t(e,r,n);return await i.loadAllLanguages(),i}async loadAllLanguages(){let e=this.ide.visibleTextEditors.map(({document:r})=>r.languageId);try{await Promise.all(e.map(r=>this.loadLanguage(r)))}catch(r){if(gt(this.ide.messages,"Failed to load language definitions",Pn(r)),this.ide.runMode==="test")throw r}}async loadLanguage(e){if(this.languageDefinitions.has(e))return;let r=await cd.create(this.ide,this.treeSitterQueryProvider,this.treeSitter,e)??OL;this.languageDefinitions.set(e,r)}async reloadLanguageDefinitions(){this.languageDefinitions.clear(),await this.loadAllLanguages(),Sa.clear(),this.notifier.notifyListeners()}get(e){let r=this.languageDefinitions.get(e);if(r==null)throw new Error("Expected language definition entry is missing for languageId "+e);return r===OL?void 0:r}getNodeAtLocation(e,r){return this.treeSitter.getNodeAtLocation(e,r)}dispose(){this.disposables.forEach(e=>e.dispose())}};var ud=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}get nestedStages(){return this.nestedStages_==null&&(this.nestedStages_=this.modifier.modifiers.map(this.modifierStageFactory.create)),this.nestedStages_}run(e,r){for(let n of this.nestedStages)try{return n.run(e,r)}catch{continue}throw new Error("No modifier could be applied")}};var Gs=class{constructor(e,r){this.modifierStageFactory=e;this.nestedModifier=r;this.suppressErrors=!1}run(e,r){if(this.shouldModify(e))try{return this.nestedStage.run(e,r).map(n=>n.withThatTarget(e))}catch(n){if(!this.suppressErrors)throw n}return[e]}get nestedStage(){return this.nestedStage_==null&&(this.nestedStage_=this.modifierStageFactory.create(this.nestedModifier)),this.nestedStage_}},To=class extends Gs{constructor(e,r){super(e,r.modifier)}shouldModify(e){return!e.hasExplicitScopeType}},pd=class extends Gs{constructor(r,n,i){super(r,n);this.modificationCondition=i}shouldModify(r){return this.modificationCondition(r)}},Ks=class extends Gs{shouldModify(e){return!e.hasExplicitScopeType&&!e.isImplicit}},Qs=class extends Gs{constructor(r){super(r,{type:"containingScope",scopeType:{type:"token"}});this.suppressErrors=!0}shouldModify(r){return!r.hasExplicitScopeType&&!r.hasExplicitRange&&r.contentRange.isEmpty}};function NL(t,e){return Object.getPrototypeOf(t).constructor===Object.getPrototypeOf(e).constructor}function Ys(t,e,r,n,i){if(e.editor!==r.editor)throw Error("Continuous targets must be in the same editor");if(n&&i&&NL(e,r)){let o=e.maybeCreateRichRangeTarget(t,r);if(o!=null)return o}return e.textualType==="line"&&r.textualType==="line"?new dr({editor:e.editor,isReversed:t,contentRange:ws(e,r,n,i)}):new Ht({editor:e.editor,isReversed:t,hasExplicitRange:!0,contentRange:bs(e,r,n,i),textualType:n&&i&&e.textualType==="token"&&r.textualType==="token"?"token":"character"})}function md(t,e,r){if(e===r)return e.getTargets(t);let n=e.getTargets(t),i=r.getTargets(t);if(n.length!==1||i.length!==1)throw Error("Scope range targets must be single-target");let[o]=n,[s]=i,l=s.contentRange.start.isAfterOrEqual(o.contentRange.start),[u,m]=l?[o,s]:[s,o];return[Ys(t,u,m,!0,!0)]}function fd(t,e,r,n){let i=Array.from(t.generateScopes(e,r,"forward",{containment:"required",allowAdjacentScopes:!0,skipAncestorScopes:!0}));switch(i.length){case 0:return;case 1:return i[0];case 2:{let[o,s]=i;return n==="forward"?s:n==="backward"||(t.isPreferredOver?.(o,s)??!1)?o:s}default:throw new Error("Expected no more than 2 scope candidates")}}function dd(t,e,r=0){let{isReversed:n,editor:i,contentRange:{start:o,end:s}}=t;if(s.isEqual(o)){let m=fd(e,i,o);return m==null||(r>0&&(m=iv(e,i,m.domain.end,"forward",r,!0)),m==null)?void 0:m.getTargets(n)}let l=iv(e,i,o,"forward",r);if(l==null)return;if(l.domain.contains(s))return l.getTargets(n);let u=iv(e,i,s,"backward",r);if(u!=null)return md(n,l,u)}function iv(t,e,r,n,i,o=!1){let s=0;for(let l of t.generateScopes(e,r,n,{containment:"required",allowAdjacentScopes:o})){if(s===i)return l;s+=1}}var Zs=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let{scopeType:r,ancestorIndex:n=0}=this.modifier,i=this.scopeHandlerFactory.maybeCreate(r,e.editor.document.languageId);if(i==null)throw new Et(r.type);let o=dd(e,i,n);if(o==null)throw new Et(r.type);return o}};var gd=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e,r){let{scopeType:n}=this.modifier,{editor:i,isReversed:o}=e,s=this.scopeHandlerFactory.maybeCreate(n,i.document.languageId);if(s==null)throw new Et(n.type);let l;if(e.hasExplicitRange&&(l=UL(s,i,e.contentRange),l.length===1&&l[0].domain.contains(e.contentRange)&&!e.hasExplicitScopeType&&!r.multipleTargets&&(l=void 0)),l==null&&(l=this.getDefaultIterationRange(s,this.scopeHandlerFactory,e).flatMap(u=>UL(s,i,u))),l.length===0)throw new Et(n.type);return l.flatMap(u=>u.getTargets(o))}getDefaultIterationRange(e,r,n){let i=r.maybeCreate(e.iterationScopeType,n.editor.document.languageId);if(i==null)throw Error("Could not find iteration scope handler");let o=dd(n,i);if(o==null)throw new Et(`iteration scope for ${e.scopeType.type}`);return o.map(s=>s.contentRange)}};function UL(t,e,{start:r,end:n}){return Array.from(t.generateScopes(e,r,"forward",{distalPosition:n,skipAncestorScopes:!0,allowAdjacentScopes:t.includeAdjacentInEvery}))}var hd=class{constructor(e){this.modifier=e}run(e){return e.contentText.trim()!==""?[e]:[]}},yd=class{constructor(e){this.modifier=e}run(e){return e.contentText.trim()===""?[e]:[]}};var Td=class{run(){return of(P()).map(e=>new tf({editor:e.editor,isReversed:e.selection.isReversed,contentRange:e.selection}))}};var xd=class{constructor(e,r){this.modifierStageFactory=e;this.markStageFactory=r}run(e,{actionFinalStages:r=[],noAutomaticTokenExpansion:n=!1}={}){return new ov(this.modifierStageFactory,this.markStageFactory,e,{actionFinalStages:r,noAutomaticTokenExpansion:n}).run()}},ov=class{constructor(e,r,n,i){this.modifierStageFactory=e;this.markStageFactory=r;this.target=n;this.opts=i}run(){return F6(this.processTarget(this.target))}processTarget(e){switch(e.type){case"list":return e.elements.flatMap(r=>this.processTarget(r));case"range":return this.processRangeTarget(e);case"primitive":case"implicit":return this.processPrimitiveTarget(e)}}processRangeTarget(e){let r=this.processPrimitiveTarget(e.anchor),n=this.processPrimitiveTarget(e.active);return Ft(r,n).flatMap(([i,o])=>{if(i==null||o==null)throw new Error("AnchorTargets and activeTargets lengths don't match");switch(e.rangeType){case"continuous":return this.processContinuousRangeTarget(i,o,e);case"vertical":return C6(i,o,e.excludeAnchor,e.excludeActive)}})}processContinuousRangeTarget(e,r,{excludeAnchor:n,excludeActive:i,exclusionScopeType:o}){if(o==null)return[xo(e,r,n,i)];let s=cv(e,r);return[xo(n?HL(this.modifierStageFactory,e,o,s?"backward":"forward"):e,i?HL(this.modifierStageFactory,r,o,s?"forward":"backward"):r,!1,!1)]}processPrimitiveTarget(e){let r,n,i=!1;e.type==="implicit"?(r=new Td,n=[]):(r=this.markStageFactory.create(e.mark),n=av(this.modifierStageFactory,e.modifiers),i=M6(e));let o=r.run(),[s,l]=this.getPreAndPostStages(i),u=[...s,...n,...this.opts.actionFinalStages,...l];return sv(u,o)}getPreAndPostStages(e){if(this.opts.noAutomaticTokenExpansion)return[[],[]];let r=new Qs(this.modifierStageFactory);return e?[[r],[]]:[[],[r]]}};function M6(t){return t.modifiers.length>0&&t.modifiers.every(({type:e})=>e==="startOf"||e==="endOf")}function av(t,e){return e.map(t.create).reverse()}function sv(t,e){return t.forEach(r=>{let n={multipleTargets:e.length>1};e=e.flatMap(i=>r.run(i,n))}),e}function HL(t,e,r,n){let i={multipleTargets:!1};return t.create({type:"relativeScope",scopeType:r,direction:n,length:1,offset:1}).run(e,i)[0]}function cv(t,e){return t.contentRange.start.isAfter(e.contentRange.start)?!0:t.contentRange.start.isBefore(e.contentRange.start)?!1:t.contentRange.end.isAfter(e.contentRange.end)}function F6(t){return Xk(t,(e,r)=>e.isEqual(r),e=>e.contentRange.concise())}function BL(t,e){if(t.editor!==e.editor)throw new Error("Cannot form range between targets in different editors")}function xo(t,e,r=!1,n=!1){BL(t,e);let i=cv(t,e);return Ys(i,i?e:t,i?t:e,!(i?n:r),!(i?r:n))}function C6(t,e,r,n){BL(t,e);let i=cv(t,e),o=i?-1:1,l=(i?t.contentRange.start:t.contentRange.end).line+(r?o:0),m=(i?e.contentRange.start:e.contentRange.end).line-(n?o:0),d=[];for(let g=l;;g+=o){let y=new Z(g,t.contentRange.start.character,g,t.contentRange.end.character);if(d.push(new Xe({editor:t.editor,isReversed:t.isReversed,contentRange:y,insertionDelimiter:t.insertionDelimiter})),g===m)return d}}var Sd=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=this.getModifierStages(),n=sv(r,[e]),i=this.modifier.type==="extendThroughStartOf";return n.map(o=>new rf({editor:e.editor,isReversed:i,inputTarget:e,modifiedTarget:o,isHead:i}))}getModifierStages(){return this.modifier.modifiers!=null?av(this.modifierStageFactory,this.modifier.modifiers):[new lv(this.modifierStageFactory,this.modifier)]}},lv=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e,r){let n=this.getContainingLine(e,r),i=this.getContainingPairInterior(e,r),o=i!=null?n.contentRange.intersection(i.contentRange):null;return o==null||o.isEmpty?[n]:[new Xe({editor:e.editor,isReversed:e.isReversed,contentRange:o})]}getContainingPairInterior(e,r){try{return this.getContaining(e,r,{type:"surroundingPairInterior",delimiter:"any"})[0]}catch(n){if(n instanceof Et)return;throw n}}getContainingLine(e,r){return this.getContaining(e,r,{type:"line"})[0]}getContaining(e,r,n){return this.modifierStageFactory.create({type:"containingScope",scopeType:n}).run(e,r)}};var ii=class extends Error{constructor(e,r){let n=r!=null?` #${r+1}`:"";super(`Scope '${e.type}'${n} is out of range`),this.name="OutOfRangeError"}};function VL(t,e,r,n){return uv(t,e,r,n),e.slice(r,n+1)}function uv(t,e,r,n){if(r<0||r>=e.length)throw new ii(t,r);if(n<0||n>=e.length)throw new ii(t,n)}var Xs=class{constructor(e,r,n){this.modifierStageFactory=e;this.storedTargets=r;this.modifier=n}run(e,r){let n=new Qs(this.modifierStageFactory).run(e,r)[0];switch(this.modifier.type){case"everyScope":return this.handleEveryScope(n,r);case"ordinalScope":return this.handleOrdinalScope(n,r,this.modifier);case"relativeScope":return this.handleRelativeScope(n,r,this.modifier);default:throw Error(`${this.modifier.type} instance scope not supported`)}}handleEveryScope(e,r){return Array.from(_f(this.getEveryRanges(e),([n,i])=>this.getTargetIterable(e,r,n,i,"forward")))}handleOrdinalScope(e,r,{start:n,length:i,scopeType:o}){return this.getEveryRanges(e).flatMap(([s,l])=>WL(o,this.getTargetIterable(e,r,s,l,n>=0?"forward":"backward"),n>=0?n:-(i+n),i))}handleRelativeScope(e,r,{direction:n,offset:i,length:o,scopeType:s}){return(this.storedTargets.get("instanceReference")??[e]).flatMap(u=>{let{editor:m}=u,d=n==="forward"?new Z(i===0?u.contentRange.start:u.contentRange.end,m.document.range.end):new Z(m.document.range.start,i===0?u.contentRange.end:u.contentRange.start);return WL(s,this.getTargetIterable(e,r,m,d,n),i===0?0:i-1,o)})}getEveryRanges({editor:e}){return this.storedTargets.get("instanceReference")?.map(({editor:r,contentRange:n})=>[r,n])??[[e,e.document.range]]}getTargetIterable(e,r,n,i,o){let s=Kt(dn(new RegExp(Vr(e.contentText),"g"),n,i,o),u=>new Xe({contentRange:u,editor:n,isReversed:!1,textualType:"character"})),l=I6(e);if(l!=null){let u=this.modifierStageFactory.create({type:"containingScope",scopeType:l});return wf(Kt(s,m=>{try{let d=u.run(m,r);return d.length===1&&d[0].contentRange.isRangeEqual(m.contentRange)?d[0]:null}catch{return null}}),m=>m!=null)}return s}};function I6(t){switch(t.textualType){case"line":case"token":case"word":return{type:t.textualType};default:return null}}function WL(t,e,r,n){Array.from(wl(r,e));let i=Array.from(wl(n,e));if(i.length<n)throw new ii(t,r+n-1);return i}var vd=class{constructor(e,r){this.modifierHandlerFactory=e;this.modifier=r}run(e,r){let n=e.getInterior();return n??this.modifierHandlerFactory.create({type:"containingScope",scopeType:{type:"interior",explicitScopeType:e.hasExplicitScopeType}}).run(e,r)}},bd=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r;this.containingSurroundingPairIfNoBoundaryStage=pv(this.modifierStageFactory)}run(e,r){return this.containingSurroundingPairIfNoBoundaryStage.run(e,r).flatMap(n=>n.getBoundary())}};function pv(t){return new pd(t,{type:"containingScope",scopeType:{type:"surroundingPair",delimiter:"any"}},e=>e.getBoundary()==null)}var oi={type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:{type:"line"}}},mv={type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:{type:"token"}}};var wd=class extends Error{constructor(e){super(`Target has no ${e} delimiter.`),this.name="NoDelimiterError"}},Ed=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e,r){return this.modifierStageFactory.create(mv).run(e,r).map(n=>{let i=n.getLeadingDelimiterTarget();if(i==null)throw new wd("leading");return i})}},_d=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e,r){return this.modifierStageFactory.create(mv).run(e,r).map(n=>{let i=n.getTrailingDelimiterTarget();if(i==null)throw new wd("trailing");return i})}};function Rd(t,e,r,n,i){return uv(t,r,n,i),n===i?r[n]:Ys(e,r[n],r[i],!0,!0)}function kd(t,e,r,n){return t.create({type:"everyScope",scopeType:n}).run(e,r)}var Ad=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e,r){let n=kd(this.modifierStageFactory,e,r,this.modifier.scopeType),i=this.modifier.start+(this.modifier.start<0?n.length:0),o=i+this.modifier.length-1;return this.modifier.isEvery?VL(this.modifier.scopeType,n,i,o):[Rd(this.modifier.scopeType,e.isReversed,n,i,o)]}};var Pd=class{run(e){let r={editor:e.editor,isReversed:e.isReversed,contentRange:this.getContentRange(e.contentRange)};return[e.isRaw?new lo(r):new Xe({...r,textualType:"character"})]}},Ld=class extends Pd{getContentRange(e){return e.start.toEmptyRange()}},Dd=class extends Pd{getContentRange(e){return e.end.toEmptyRange()}};var Md=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let{scopeType:r}=this.modifier,n=new Zs(this.modifierStageFactory,this.scopeHandlerFactory,{type:"containingScope",scopeType:r});try{return n.run(e)}catch(s){if(!(s instanceof Et))throw s}let i=this.scopeHandlerFactory.create(this.modifier.scopeType,e.editor.document.languageId),o=O6(e,i);if(o==null)throw Error(`No scopes found for scope type: ${r.type}`);return o}};function O6(t,e){let r=e.generateScopes(t.editor,t.contentRange.start,"backward"),n=e.generateScopes(t.editor,t.contentRange.end,"forward"),{active:i}=t.contentSelection,o=$L(r,i),s=$L(n,i),l=o.distance<s.distance?o.scope:s.scope;return l?.getTargets(t.isReversed)}function $L(t,e){let r,n=1/0;for(let i of t){let o=Math.min(jL(e,i.domain.start),jL(e,i.domain.end));if(o<n)r=i,n=o;else break}return{scope:r,distance:n}}function jL(t,e){return Math.abs(t.line-e.line)*1e4+Math.abs(t.character-e.character)}var Fd=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e,r){let n=this.modifierStageFactory.create(this.modifier.anchor),i=this.modifierStageFactory.create(this.modifier.active),o=n.run(e,r),s=i.run(e,r);if(o.length!==1||s.length!==1)throw new Error("Expected single anchor and active target");return[xo(o[0],s[0],this.modifier.excludeAnchor,this.modifier.excludeActive)]}};var Cd=class{constructor(e){this.modifier=e}run(e){return[new lo({editor:e.editor,contentRange:e.contentRange,isReversed:e.isReversed})]}};var Id=class extends Error{constructor(e,r,n){super(`Requested ${e} ${n}s, but ${r} are already selected.`),this.name="TooFewScopesError"}};function zL(t,e,r,n){let i=kd(t,B6(r),n,e.scopeType),o=H6(r.contentRange,i);return N6(e,r,i,o)}function N6(t,e,r,n){let i=t.direction==="forward",o=U6(t,e.contentRange,r,i,n),s=i?o+t.length-1:o-t.length+1,l=Math.min(o,s),u=Math.max(o,s);return[Rd(t.scopeType,e.isReversed,r,l,u)]}function U6(t,e,r,n,i){let o=t.offset===0;if(i==null){let u=n?r.findIndex(m=>m.contentRange.start.isAfter(e.start)):$o(r,m=>m.contentRange.start.isBefore(e.start));if(u===-1)throw new ii(t.scopeType);return o?u:n?u+t.offset-1:u-t.offset+1}let s=i.start,l=i.end;if(o){let u=l-s+1;if(u>t.length)throw new Id(t.length,u,t.scopeType.type);return n?s:l}return n?l+t.offset:s-t.offset}function H6(t,e){let r=e.map((i,o)=>({index:o,intersection:i.contentRange.intersection(t)})).filter(i=>i.intersection!=null);if(t.isEmpty){if(r.length===0)return;let i=r.at(-1).index;return{start:i,end:i}}let n=r.filter(i=>!i.intersection.isEmpty).map(i=>i.index);if(n.length!==0)return{start:n[0],end:n.at(-1)}}function B6(t){return new Ht({editor:t.editor,isReversed:t.isReversed,contentRange:t.contentRange,hasExplicitRange:!1})}var Od=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e,r){let n=this.scopeHandlerFactory.maybeCreate(this.modifier.scopeType,e.editor.document.languageId);if(n==null)return zL(this.modifierStageFactory,this.modifier,e,r);let i=Array.from(this.modifier.offset===0?V6(n,e,this.modifier):W6(n,e,this.modifier));if(i.length<this.modifier.length)throw new ii(this.modifier.scopeType,this.modifier.offset+this.modifier.length-1);let{isReversed:o}=e;return this.modifier.isEvery?i.flatMap(s=>s.getTargets(o)):md(o,i[0],i[i.length-1])}};function V6(t,e,r){let{editor:n,contentRange:i}=e,{length:o,direction:s}=r,l=fd(t,n,s==="forward"?i.start:i.end,s)?.domain;if(l==null)throw new Et(r.scopeType.type);return wl(o,t.generateScopes(n,s==="forward"?l.start:l.end,s,{skipAncestorScopes:!0}))}function W6(t,e,r){let{editor:n,contentRange:i}=e,{length:o,direction:s,offset:l}=r,u=s==="forward"?i.end:i.start,m=i.isEmpty?"disallowed":"disallowedIfStrict";return DP(t.generateScopes(n,u,s,{containment:m,skipAncestorScopes:!0}),l-1,l+o-1)}var Nd=class{constructor(e){this.modifier=e}run(e){return e.editor.visibleRanges.map(r=>new Xe({editor:e.editor,isReversed:e.isReversed,contentRange:r}))}};var Js=class{constructor(e,r,n){this.languageDefinitions=e;this.storedTargets=r;this.scopeHandlerFactory=n;this.create=this.create.bind(this)}create(e){switch(e.type){case"startOf":return new Ld;case"endOf":return new Dd;case"extendThroughStartOf":case"extendThroughEndOf":return new Sd(this,e);case"toRawSelection":return new Cd(e);case"interiorOnly":return new vd(this,e);case"excludeInterior":return new bd(this,e);case"leading":return new Ed(this,e);case"trailing":return new _d(this,e);case"visible":return new Nd(e);case"containingScope":return new Zs(this,this.scopeHandlerFactory,e);case"preferredScope":return new Md(this,this.scopeHandlerFactory,e);case"everyScope":return e.scopeType.type==="instance"?new Xs(this,this.storedTargets,e):new gd(this,this.scopeHandlerFactory,e);case"ordinalScope":return e.scopeType.type==="instance"?new Xs(this,this.storedTargets,e):new Ad(this,e);case"relativeScope":return e.scopeType.type==="instance"?new Xs(this,this.storedTargets,e):new Od(this,this.scopeHandlerFactory,e);case"keepContentFilter":return new hd(e);case"keepEmptyFilter":return new yd(e);case"cascading":return new ud(this,e);case"modifyIfUntyped":return new To(this,e);case"range":return new Fd(this,e);case"inferPreviousMark":throw Error(`Unexpected modifier '${e.type}'; it should have been removed during inference`);default:{let r=e,{type:n}=e;throw new Error(`Unknown modifier: ${n}`)}}}};async function qL(t,e,r){let n=t.registerReplaceEditList(e.document,r.filter(o=>o.isReplace)),i=await e.edit(r);return n(),i}async function Oe({rangeUpdater:t,editor:e,selections:r,preserveCursorSelections:n,...i}){let o=ll(r),s=o.map(m=>{let d=r[m],g=$6(d);return GL(e.document,g.selections,g.behavior)});n||s.push(GL(e.document,e.selections,1));let l=await("edits"in i?q6(t,e,i.edits,s):KL(t,i.callback,e.document,s));return n||await e.setSelections(l.pop()),Object.fromEntries(o.map((m,d)=>[m,l[d]]))}function GL(t,e,r){return e.map(n=>j6(t,n,n instanceof ut?!n.isReversed:!0,r))}function $6(t){return"selections"in t?t:{selections:t,behavior:1}}function j6(t,e,r,n){return{range:e,isForward:r,expansionBehavior:{start:{type:n===1||n===3?"closed":"open"},end:{type:n===1||n===2?"closed":"open"}},offsets:{start:t.offsetAt(e.start),end:t.offsetAt(e.end)},text:t.getText(e)}}function z6(t){return t.map(e=>e.map(({range:{start:r,end:n},isForward:i})=>i?new ut(r,n):new ut(n,r)))}async function KL(t,e,r,n){let i=t.registerRangeInfoList(r,st(n));return await e(),i(),z6(n)}async function q6(t,e,r,n){return await KL(t,async()=>{if(!await qL(t,e,r))throw new Error("Could not apply edits")},e.document,n)}var Ud=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e){return await We(P(),e,"pendingModification0"),{thatSelections:st(await mt(e,async(n,i)=>{let o=i.map(({contentRange:m})=>m),s=G6(n,o),l=P().getEditableTextEditor(n),{contentRanges:u}=await Oe({rangeUpdater:this.rangeUpdater,editor:l,edits:s,selections:{contentRanges:o}});return Ft(i,u).map(([m,d])=>({editor:m.editor,selection:d.toSelection(m.isReversed)}))}))}}};function G6(t,e){let{document:r}=t,n=[];for(let i of e){let o=i.start,s=r.lineAt(o),l=s.text.slice(0,s.rangeTrimmed?.start?.character??s.range.start.character),u=s.text.slice(0,o.character).search(/\s+$/),m=u>-1?new Z(new Re(s.lineNumber,u),o):o.toEmptyRange();n.push({range:m,text:`
`+l,isReplace:!m.isEmpty})}return n}function Hd(t){return t.length<2?t:QA(t).flatMap(([e,r])=>{if(r.length<2)return r;let n=[...r];n.sort((o,s)=>o.contentRange.start.compareTo(s.contentRange.start));let i=!0;for(;i;)[n,i]=K6(n);return n})}function K6(t){if(t.length<2)return[t,!1];let e=[],r=[];return t.forEach(n=>{r.length&&!Q6(r[r.length-1],n)?(e.push(QL(r)),r=[n]):r.push(n)}),e.push(QL(r)),[e,e.length!==t.length]}function QL(t){if(t.length===1)return t[0];let e=t[0],r=t[t.length-1];return xo(e,r)}function Q6(t,e){return!!t.getRemovalRange().intersection(e.getRemovalRange())}var Pl=class{constructor(e,r){this.rangeUpdater=e;this.type=r}async decorateTargets(e,r){await Promise.all([We(P(),e,this.decoration.sourceStyle,this.decoration.getSourceRangeCallback),We(P(),r,this.decoration.destinationStyle)])}getEditsBringMove(e,r){let n=[],i=[],o=e.length!==r.length&&r.length===1;return e.forEach((s,l)=>{let u=r[l];if((s==null||u==null)&&!o)throw new Error("Targets must have same number of args");if(u!=null){let m;o?m=e.map((d,g)=>{let y=d.contentText,x=(u.isRaw?null:u.insertionDelimiter)??(d.isRaw?null:d.insertionDelimiter);return g>0&&x!=null?x+y:y}).join(""):m=s.contentText,i.push({edit:u.constructChangeEdit(m),editor:u.editor,originalTarget:u.target,isSource:!1})}else u=r[0];n.includes(s)||(n.push(s),this.type==="bring"&&i.push({edit:s.toDestination("to").constructChangeEdit(u.target.contentText),editor:s.editor,originalTarget:s,isSource:!0}))}),this.type==="move"&&Hd(n).forEach(s=>{i.push({edit:s.constructRemovalEdit(),editor:s.editor,originalTarget:s,isSource:!0})}),i}async performEditsAndComputeThatMark(e){return st(await Ai(e,r=>r.editor,async(r,n)=>{let i=this.type!=="bring"?n:n.filter(({isSource:x})=>!x),o=this.type==="swap"?[]:n.filter(({isSource:x})=>x),s=this.type==="swap"?n:n.filter(({isSource:x})=>!x),l=o.map(({edit:x})=>x.range),u=s.map(({edit:x})=>x.range),m=P().getEditableTextEditor(r),{sourceEditRanges:d,destinationEditRanges:g}=await Oe({rangeUpdater:this.rangeUpdater,editor:m,edits:i.map(({edit:x})=>x),selections:{sourceEditRanges:l,destinationEditRanges:{selections:u,behavior:0}}}),y=[...this.getMarks(o,d),...this.getMarks(s,g)];return y.sort((x,E)=>n.findIndex(w=>w.originalTarget===x.target)-n.findIndex(w=>w.originalTarget===E.target)),y}))}getMarks(e,r){return e.map((n,i)=>{let o=r[i],s=n.edit.updateRange(o),l=n.originalTarget;return{editor:n.editor,selection:s.toSelection(l.isReversed),isSource:n.isSource,target:l}})}async decorateThatMark(e){let r=n=>mn(n,e.find(i=>i.target===n).selection);return Promise.all([We(P(),e.filter(({isSource:n})=>n).map(({target:n})=>n),this.decoration.sourceStyle,r),We(P(),e.filter(({isSource:n})=>!n).map(({target:n})=>n),this.decoration.destinationStyle,r)])}calculateMarksBringMove(e){return{thatMark:e.filter(({isSource:r})=>!r),sourceMark:e.filter(({isSource:r})=>r)}}};function YL(t,e){return t.length===1?Array(e.length).fill(t[0]):t}var Bd=class extends Pl{constructor(r){super(r,"bring");this.decoration={sourceStyle:"referenced",destinationStyle:"pendingModification0"};this.run=this.run.bind(this)}async run(r,n){r=YL(r,n),await this.decorateTargets(r,n.map(u=>u.target));let i=this.getEditsBringMove(r,n),o=await this.performEditsAndComputeThatMark(i),{thatMark:s,sourceMark:l}=this.calculateMarksBringMove(o);return await this.decorateThatMark(s),{thatSelections:s,sourceSelections:l}}},Vd=class extends Pl{constructor(r){super(r,"move");this.decoration={sourceStyle:"pendingDelete",destinationStyle:"pendingModification0",getSourceRangeCallback:Y6};this.run=this.run.bind(this)}async run(r,n){r=YL(r,n),await this.decorateTargets(r,n.map(u=>u.target));let i=this.getEditsBringMove(r,n),o=await this.performEditsAndComputeThatMark(i),{thatMark:s,sourceMark:l}=this.calculateMarksBringMove(o);return await this.decorateThatMark(s),{thatSelections:s,sourceSelections:l}}},Wd=class extends Pl{constructor(r){super(r,"swap");this.decoration={sourceStyle:"pendingModification1",destinationStyle:"pendingModification0"};this.run=this.run.bind(this)}async run(r,n){await this.decorateTargets(r,n);let i=this.getEditsSwap(r,n),o=await this.performEditsAndComputeThatMark(i);return await this.decorateThatMark(o),{thatSelections:o,sourceSelections:[]}}getEditsSwap(r,n){let i=[];return r.forEach((o,s)=>{let l=n[s];if(o==null||l==null)throw new Error("Targets must have same number of args");i.push({edit:l.toDestination("to").constructChangeEdit(o.contentText),editor:l.editor,originalTarget:l,isSource:!1}),i.push({edit:o.toDestination("to").constructChangeEdit(l.contentText),editor:o.editor,originalTarget:o,isSource:!0})}),i}};function Y6(t){return t.getRemovalHighlightRange()}var Ll=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e,r){Ar(e);let{returnValue:n}=await this.actions.getText.run(e,{showDecorations:!1}),{thatSelections:i}=await this.actions.wrapWithPairedDelimiter.run(r,n[0]+"(",")");return{thatSelections:i}}};var Dl=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){let r=Pt(e),n=e.map(o=>new Xe({editor:o.editor,isReversed:o.isReversed,contentRange:o.contentRange})),{thatTargets:i}=await this.actions.remove.run(n);return i!=null&&await P().getEditableTextEditor(r).setSelections(i.map(({contentSelection:o})=>o),{focusEditor:!0}),{thatTargets:i}}};var ec=t=>new Ht({editor:t.editor,isReversed:t.selection.isReversed,contentRange:t.selection,hasExplicitRange:!0});var tc=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e,r){r.showDecorations&&await We(P(),e,"referenced"),r.ensureSingleEditor&&Pt(e),r.ensureSingleTarget&&Ar(e);let n=P().activeEditableTextEditor,i=r.setSelection?KA:mt,o=st(await i(e,(s,l)=>this.runForEditor(r,s,l)));return r.setSelection&&r.restoreSelection&&n!=null&&!n.isActive&&await n.focus(),{thatTargets:o}}async runForEditor(e,r,n){let i=P().getEditableTextEditor(r),o=r.selections,s=r.document.version,l=n.map(d=>d.contentSelection);e.setSelection&&await i.setSelections(l,{focusEditor:!0,revealRange:!1});let{originalSelections:u,targetSelections:m}=await Oe({rangeUpdater:this.rangeUpdater,editor:i,callback:()=>e.callback(i,n),preserveCursorSelections:!0,selections:{originalSelections:o,targetSelections:l}});return e.setSelection&&e.restoreSelection&&await i.setSelections(u),r.document.version===s?n:m.map(d=>ec({editor:r,selection:d}))}};var Lt=class{constructor(e){this.ensureSingleEditor=!1;this.ensureSingleTarget=!1;this.restoreSelection=!0;this.showDecorations=!0;this.callbackAction=new tc(e),this.run=this.run.bind(this)}async run(e,{showDecorations:r}={}){let n=P().capabilities.commands[this.command];if(n==null)throw Error(`Action ${this.command} is not supported by your ide`);let{acceptsLocation:i}=n;return this.callbackAction.run(e,{callback:(o,s)=>Z6(o,i?s.map(l=>l.contentRange):void 0,this.command),setSelection:!i,ensureSingleEditor:this.ensureSingleEditor,ensureSingleTarget:this.ensureSingleTarget,restoreSelection:this.restoreSelection,showDecorations:r??this.showDecorations})}},$d=class extends Lt{constructor(){super(...arguments);this.command="clipboardCopy";this.ensureSingleEditor=!0}},jd=class extends Lt{constructor(){super(...arguments);this.command="toggleLineComment"}},zd=class extends Lt{constructor(){super(...arguments);this.command="indentLine"}},qd=class extends Lt{constructor(){super(...arguments);this.command="outdentLine"}},Gd=class extends Lt{constructor(){super(...arguments);this.command="fold"}},Kd=class extends Lt{constructor(){super(...arguments);this.command="unfold"}},Qd=class extends Lt{constructor(){super(...arguments);this.command="rename";this.ensureSingleTarget=!0}},Yd=class extends Lt{constructor(){super(...arguments);this.command="showReferences";this.ensureSingleTarget=!0}},Zd=class extends Lt{constructor(){super(...arguments);this.command="quickFix";this.ensureSingleTarget=!0}},Xd=class extends Lt{constructor(){super(...arguments);this.command="revealDefinition";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Jd=class extends Lt{constructor(){super(...arguments);this.command="revealTypeDefinition";this.ensureSingleTarget=!0;this.restoreSelection=!1}},eg=class extends Lt{constructor(){super(...arguments);this.command="showHover";this.ensureSingleTarget=!0;this.restoreSelection=!1}},tg=class extends Lt{constructor(){super(...arguments);this.command="showDebugHover";this.ensureSingleTarget=!0;this.restoreSelection=!1}},rg=class extends Lt{constructor(){super(...arguments);this.command="extractVariable";this.ensureSingleTarget=!0;this.restoreSelection=!1}},ng=class extends Lt{constructor(){super(...arguments);this.command="gitAccept";this.ensureSingleTarget=!0}},ig=class extends Lt{constructor(){super(...arguments);this.command="gitRevert";this.ensureSingleTarget=!0}},og=class extends Lt{constructor(){super(...arguments);this.command="gitStage";this.ensureSingleTarget=!0}},ag=class extends Lt{constructor(){super(...arguments);this.command="gitUnstage";this.ensureSingleTarget=!0}};function Z6(t,e,r){switch(r){case"toggleLineComment":return t.toggleLineComment(e);case"indentLine":return t.indentLine(e);case"outdentLine":return t.outdentLine(e);case"clipboardCopy":return t.clipboardCopy(e);case"fold":return t.fold(e);case"unfold":return t.unfold(e);case"insertLineAfter":return t.insertLineAfter(e);case"rename":return t.rename(e?.[0]);case"showReferences":return t.showReferences(e?.[0]);case"quickFix":return t.quickFix(e?.[0]);case"revealDefinition":return t.revealDefinition(e?.[0]);case"revealTypeDefinition":return t.revealTypeDefinition(e?.[0]);case"showHover":return t.showHover(e?.[0]);case"showDebugHover":return t.showDebugHover(e?.[0]);case"extractVariable":return t.extractVariable(e?.[0]);case"gitAccept":return t.gitAccept(e?.[0]);case"gitRevert":return t.gitRevert(e?.[0]);case"gitStage":return t.gitStage(e?.[0]);case"gitUnstage":return t.gitUnstage(e?.[0]);case"highlight":throw Error("Highlight command not supported as simple action")}}var sg=class{constructor(e,r){this.actions=e;this.rangeUpdater=r;this.run=this.run.bind(this)}async run(e,r={showDecorations:!0}){if(P().capabilities.commands.clipboardCopy!=null)return new $d(this.rangeUpdater).run(e,r);r.showDecorations&&await We(P(),e,"referenced");let n=e.map(i=>i.contentText).join(`
`);return await P().clipboard.writeText(n),{thatTargets:e}}};var cg=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){await P().flashRanges(e.flatMap(X6));let r={showDecorations:!1};await this.actions.copyToClipboard.run(e,r);let{thatTargets:n}=await this.actions.remove.run(e,r);return{thatTargets:n}}};function X6(t){let{editor:e,contentRange:r}=t,n=t.getRemovalHighlightRange(),i=[{editor:e,range:fr(r),style:"referenced"}];return n.type==="line"?i.push({editor:e,range:n,style:"pendingDelete"}):i.push(...J6(r,n).map(o=>({editor:e,range:fr(o),style:"pendingDelete"}))),i}function J6(t,e){let{start:r,end:n}=t,{start:i,end:o}=e,s=[];return i.isBefore(r)&&s.push(new Z(i,r)),o.isAfter(n)&&s.push(new Z(n,o)),s}var Ml=class{constructor(){this.run=this.run.bind(this)}async run(e){return await mt(e,async(r,n)=>{let i=r.selections.filter(o=>!n.some(s=>{let l=s.contentRange.intersection(o);return l&&(!l.isEmpty||o.isEmpty)}));if(i.length===0)throw new fv;await P().getEditableTextEditor(r).setSelections(i)}),{thatTargets:e}}},fv=class extends Error{constructor(){super("Can't deselect every selection. At least one is required"),this.name="SelectionRequiredError"}};async function ZL(t,e,r,n){let i=r.destinations.map((E,w)=>{if(n||r.actionTypes[w]==="edit")return{destination:E,index:w}}).filter(E=>!!E);if(i.length===0)return r;let o=i.map(E=>E.destination.constructChangeEdit("")),s=r.cursorRanges.map((E,w)=>({range:E,index:w})).filter(({range:E})=>E!=null),l=s.map(({index:E})=>E),u=s.map(({range:E})=>E),m=o.map(E=>E.range),{thatRanges:d,cursorRanges:g,editRanges:y}=await Oe({rangeUpdater:t,editor:e,edits:o,preserveCursorSelections:!0,selections:{thatRanges:r.thatRanges,cursorRanges:u,editRanges:{selections:m,behavior:0}}}),x=[...r.cursorRanges];return Ft(l,g).forEach(([E,w])=>{x[E]=w}),i.forEach((E,w)=>{let W=o[w].updateRange(y[w]);x[E.index]=W}),{destinations:r.destinations,actionTypes:r.actionTypes,thatRanges:d,cursorRanges:x}}async function XL({acceptsLocation:t},e,r,n){let i=n.destinations.map((g,y)=>{if(n.actionTypes[y]==="insertLineAfter")return{destination:g,index:y}}).filter(g=>!!g);if(i.length===0)return n;let o=i.map(({destination:g})=>g.contentRange),s=n.destinations.map(({contentRange:g})=>g),l=async()=>{t?await r.insertLineAfter(o):(await r.setSelections(o.map(g=>g.toSelection(!1))),await r.focus(),await r.insertLineAfter())},{targetRanges:u,thatRanges:m}=await Oe({rangeUpdater:e,editor:r,callback:l,preserveCursorSelections:!0,selections:{targetRanges:s,thatRanges:n.thatRanges}}),d=[...n.cursorRanges];return i.forEach((g,y)=>{d[g.index]=r.selections[y]}),{destinations:n.destinations.map((g,y)=>g.withTarget(g.target.withContentRange(u[y]))),actionTypes:n.actionTypes,thatRanges:m,cursorRanges:d}}async function JL(t,e){let r=Ar(e),n=P().getEditableTextEditor(r.editor),i=r.insertionMode==="before";if(r.insertionMode==="to")throw Error(`Unsupported insertion mode '${r.insertionMode}' for notebookcapell`);return await t.setSelection.run([r.target]),i?await n.editNewNotebookCellAbove():await n.editNewNotebookCellBelow(),{thatSelections:pn([r.target.thatTarget])}}var lg=class{constructor(e,r){this.rangeUpdater=e;this.actions=r;this.run=this.run.bind(this)}async run(e){if(e.some(({target:l})=>l.isNotebookCell))return JL(this.actions,e);let r=P().getEditableTextEditor(Pt(e)),n={destinations:e,actionTypes:e.map(l=>l.getEditNewActionType()),thatRanges:e.map(({target:l})=>l.thatTarget.contentRange),cursorRanges:new Array(e.length).fill(void 0)},i=P().capabilities.commands.insertLineAfter,o=i!=null;o&&(n=await XL(i,this.rangeUpdater,r,n)),n=await ZL(this.rangeUpdater,r,n,!o);let s=n.destinations.map((l,u)=>{let m=n.cursorRanges[u];if(m==null)throw Error("Cursor range is undefined for destination");return m.toSelection(l.target.isReversed)});return await r.setSelections(s,{focusEditor:!0}),{thatSelections:pn(n.destinations.map(l=>l.target),n.thatRanges)}}};var ug=class{constructor(e,r){this.actions=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(oi)]}run(e){return this.actions.editNew.run(e.map(r=>r.toDestination(this.insertionMode)))}},pg=class extends ug{constructor(){super(...arguments);this.insertionMode="before"}},mg=class extends ug{constructor(){super(...arguments);this.insertionMode="after"}};var Fl=class{constructor(e){this.callbackAction=new tc(e),this.run=this.run.bind(this)}async run(e,r,{commandArgs:n,ensureSingleEditor:i,ensureSingleTarget:o,restoreSelection:s,showDecorations:l}={}){let u=n??[];return this.callbackAction.run(e,{callback:()=>P().executeCommand(r,...u),setSelection:!0,ensureSingleEditor:i??!1,ensureSingleTarget:o??!1,restoreSelection:s??!0,showDecorations:l??!0})}};var fg=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){Ar(e);let{returnValue:r,thatTargets:n}=await this.actions.getText.run(e),[i]=r,o;return i.length>200?(o=i.substring(0,200),qo(P().messages,"truncatedSearchText","Search text is longer than 200 characters; truncating")):o=i,await this.find(o),{thatTargets:n}}},dg=class extends fg{find(e){return P().findInDocument(e)}},gg=class extends fg{find(e){return P().findInWorkspace(e)}};var hg=class{constructor(){this.run=this.run.bind(this)}async run(e){return await We(P(),e,"referenced"),{thatTargets:e}}};var rc=class{constructor(e){this.options=e;this.run=this.run.bind(this)}async run(e){let r=Ar(e);return await We(P(),e,"referenced"),await P().getEditableTextEditor(r.editor).openLink(r.contentRange,this.options),{thatSelections:pn(e)}}};function eD(t){let e=t.split(/^---$/m),r={snippets:[]};for(let n of e){let i=n.match(/^-$/m),o=i!=null?n.slice(0,i.index):n,s=i!=null?n.slice(i.index+i[0].length):null,l=s?n5(s):null,u=e5(o);if(l!=null){u==null&&(u={variables:[]});let{variables:m,...d}=u;r.snippets.push({...d,body:l,variables:m})}else if(u!=null){if(r.header!=null||r.snippets.length!==0)throw Error("Header snippet must be first in file");r.header=u}}return r}function e5(t){let e={variables:[]},r=t5(t);if(Object.keys(r).length===0)return;let n={};for(let[i,o]of Object.entries(r))switch(i){case"name":e.name=o;break;case"description":e.description=o;break;case"phrase":e.phrases=Cl(o);break;case"insertionScope":e.insertionScopes=Cl(o);break;case"language":e.languages=Cl(o);break;default:if(!i.startsWith("$"))throw Error(`Invalid key '${i}'`);n[i]=o}return e.variables=r5(n),e}function t5(t){let e=t.split(/\r?\n/).map(n=>n.trim()).filter(Boolean),r={};for(let n of e){let i=n.split(":");if(i.length!==2)throw Error(`Invalid line '${n}'`);let o=i[0].trim(),s=i[1].trim();if(o.length===0||s.length===0)throw Error(`Invalid line '${n}'`);if(r[o]!=null)throw Error(`Duplicate key '${o}' in '${t}'`);r[o]=s}return r}function r5(t){let e={},r=n=>(e[n]==null&&(e[n]={name:n}),e[n]);for(let[n,i]of Object.entries(t)){let o=n.split(".");if(o.length!==2)throw Error(`Invalid variable key '${n}'`);let s=o[0].slice(1);switch(o[1]){case"insertionFormatter":r(s).insertionFormatters=Cl(i);break;case"wrapperPhrase":r(s).wrapperPhrases=Cl(i);break;case"wrapperScope":r(s).wrapperScope=i;break;default:throw Error(`Invalid variable key '${n}'`)}}return Object.values(e)}function n5(t){let e=t.match(/^[ \t]*\S/m);if(e?.index!=null)return t.slice(e.index).trimEnd().split(/\r?\n/).map(r=>r.trimEnd())}function Cl(t){return t.split("|").map(e=>e.trim())}function rD(t){let e=[];t.header!=null&&e.push(tD(t.header)),e.push(...t.snippets.map(tD));let r=e.filter(Boolean).join(`
---

`);return r?r+`
---
`:""}function tD(t){let e=[So("name",t.name),So("description",t.description),So("language",t.languages),So("phrase",t.phrases),So("insertionScope",t.insertionScopes)].filter(Boolean);return t.variables.length>0&&(e.length>0&&e.push(""),e.push(...i5(t.variables))),"body"in t&&e.push("-",...t.body),e.join(`
`)}function i5(t){let e=[...t];return e.sort(o5),e.flatMap(r=>[So(`$${r.name}.insertionFormatter`,r.insertionFormatters),So(`$${r.name}.wrapperPhrase`,r.wrapperPhrases),So(`$${r.name}.wrapperScope`,r.wrapperScope)]).filter(Boolean)}function So(t,e){return e==null?"":Array.isArray(e)?`${t}: ${e.join(" | ")}`:`${t}: ${e}`}function o5(t,e){return t.name==="0"?1:e.name==="0"?-1:t.name.localeCompare(e.name)}function nD(t,e){let r=[],n=0,i=null,[o,...s]=t.split(/\r?\n/);return[{text:e+o,startIndex:e.length},...s.map(u=>({text:u,startIndex:0}))].forEach(({text:u,startIndex:m})=>{let d=u.match(/^\s*/)?.[0]??"",g=d.length;i!=null&&(d.length>i.length?n++:d.length<i.length&&n--),i=d;let y=Math.max(g,m),x=XT("	",n),E=u.slice(y);r.push(x+E)}),r}function iD(t,e){let r=ex(e,o=>o.offsets.start),n="",i=0;for(let o of r)n+=t.slice(i,o.offsets.start)+o.text,i=o.offsets.end;return n+=t.slice(i),n}var nc=class{constructor(e){this.snippets=e;this.run=this.run.bind(this)}async run(e,r,n){if(r==null)throw new Error("Directory argument is required for GenerateSnippet action. Please update Cursorless Talon");let i=Ar(e),o=i.editor;if(We(P(),e,"referenced"),n==null&&(n=await P().showInputBox({prompt:"Name of snippet",placeHolder:"helloWorld"}),!n))return{};let s=o.document.offsetAt(i.contentRange.start),l=s5(o,i.contentRange),u=l.map((ge,be)=>({offsets:{start:o.document.offsetAt(ge.start)-s,end:o.document.offsetAt(ge.end)-s},name:be===l.length-1?"0":`${be+1}`})),m=o.document.getText(new Z(i.contentRange.start.with(void 0,0),i.contentRange.start)),d=o.document.getText(i.contentRange),g=iD(d,[...cn(d,/\$|\\/g,ge=>({offsets:{start:ge.index,end:ge.index+ge[0].length},text:`\\${ge[0]}`})),...u.map(({offsets:ge,name:be})=>({offsets:ge,text:`$${be}`}))]),y=nD(g,m),x,E={snippets:[]};P().runMode==="test"?x=P().getEditableTextEditor(o):(x=P().getEditableTextEditor(await this.snippets.openNewSnippetFile(n,r)),E=eD(x.document.getText())),await x.setSelections([x.document.range.toSelection(!1)]);let w=1,{header:H}=E,W=E.header?.phrases!=null?void 0:[`${dv}${w++}`],G=ge=>{let be=H?.variables?.some(kt=>kt.name===ge.name&&kt.wrapperPhrases!=null);return{name:ge.name,wrapperPhrases:be?void 0:[`${dv}${w++}`]}},ie={name:H?.name===n?void 0:n,phrases:W,languages:a5(o,H),body:y,variables:u.map(G)};E.snippets.push(ie);let se=rD(E).replace(/\$/g,"\\$").replaceAll(dv,"$");return await x.insertSnippet(se),{thatSelections:e.map(({editor:ge,contentSelection:be})=>({editor:ge,selection:be}))}}};function a5(t,e){if(!e?.languages?.includes(t.document.languageId))return[t.document.languageId]}function s5(t,e){let r=t.selections.filter(n=>e.contains(n));return r.sort((n,i)=>n.start.compareTo(i.start)),r}var dv="PLACEHOLDER_VFA77zcbLD6wXNmfMAay";var Il=class{constructor(){this.run=this.run.bind(this)}async run(e){return{returnValue:e.map(({contentRange:r})=>({contentRange:r})),thatTargets:e}}};var Ol=class{constructor(){this.run=this.run.bind(this)}async run(e,{showDecorations:r=!0,ensureSingleTarget:n=!1}={}){return r&&await We(P(),e,"referenced"),n&&Ar(e),{returnValue:e.map(i=>i.contentText),thatTargets:e}}};var Nl=class{constructor(){this.run=this.run.bind(this)}async run(e,r){if(P().capabilities.commands.highlight==null)throw Error("The highlight action is not supported by your ide");return e.length===0?await Promise.all(P().visibleTextEditors.map(n=>P().setHighlightRanges(r,n,[]))):await mt(e,(n,i)=>P().setHighlightRanges(r,n,i.map(o=>mn(o,o.contentRange)))),{thatTargets:e}}};var yg=class{constructor(e,r){this.rangeUpdater=e;this.isIndent=r;this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e){return this.hasCapability()?this.runSimpleCommandAction(e):(await We(P(),e,"pendingModification0"),{thatTargets:st(await mt(e,this.runForEditor))})}hasCapability(){return this.isIndent?P().capabilities.commands.indentLine!=null:P().capabilities.commands.outdentLine!=null}runSimpleCommandAction(e){return(this.isIndent?new zd(this.rangeUpdater):new qd(this.rangeUpdater)).run(e)}async runForEditor(e,r){let n=this.isIndent?c5(e,r):l5(e,r),{targetSelections:i}=await Oe({rangeUpdater:this.rangeUpdater,editor:P().getEditableTextEditor(e),edits:n,selections:{targetSelections:r.map(({contentSelection:o})=>o)}});return Ft(r,i).map(([o,s])=>ec({editor:e,selection:s.toSelection(o.isReversed)}))}},Tg=class extends yg{constructor(e){super(e,!0)}},xg=class extends yg{constructor(e){super(e,!1)}};function c5(t,e){let{document:r}=t,n=oD(e),i=u5(t);return n.map(o=>({range:r.lineAt(o).range.start.toEmptyRange(),text:i}))}function l5(t,e){let{document:r}=t,n=oD(e),i=p5(t);return n.map(o=>{let s=r.lineAt(o),l=s.text.match(i),{start:u}=s.range,m=u.translate(void 0,l?.[0].length);return{range:new Z(u,m),text:""}})}function oD(t){let e=new Set;for(let r of t){let{start:n,end:i}=r.contentRange;for(let o=n.line;o<=i.line;++o)e.add(o)}return[...e]}function u5(t){if(t.options.insertSpaces){let e=aD(t);return" ".repeat(e)}return"	"}function p5(t){if(t.options.insertSpaces){let e=aD(t);return new RegExp(`^[ ]{1,${e}}`)}return/^\t/}function aD(t){return typeof t.options.tabSize=="number"?t.options.tabSize:4}var Sg=class{constructor(e,r,n){this.rangeUpdater=e;this.modifierStageFactory=r;this.isBefore=n;this.getFinalStages=()=>[this.modifierStageFactory.create(oi)];this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e){let r=st(await mt(e,this.runForEditor));return await P().flashRanges(r.flatMap(n=>n.thatMark.map(i=>({editor:i.editor,range:fr(i.selection),style:"justAdded"})))),{sourceSelections:r.flatMap(({sourceMark:n})=>n),thatSelections:r.flatMap(({thatMark:n})=>n)}}async runForEditor(e,r){let n=this.isBefore?"after":"before",i=r.flatMap(y=>y.toDestination(n).constructChangeEdit(y.contentText)),o=r.map(({contentSelection:y})=>y),s=i.map(({range:y})=>y),l=P().getEditableTextEditor(e),{contentSelections:u,editRanges:m}=await Oe({rangeUpdater:this.rangeUpdater,editor:l,edits:i,selections:{contentSelections:o,editRanges:{selections:s,behavior:0}}}),d=Ft(i,m).map(([y,x])=>y.updateRange(x)),g=e.selections[0];return u.some(y=>y.intersection(g)!=null)&&await l.revealRange(g),{sourceMark:pn(r,d),thatMark:pn(r,u)}}},vg=class extends Sg{constructor(e,r){super(e,r,!0)}},bg=class extends Sg{constructor(e,r){super(e,r,!1)}};var Ul=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(oi)]}async run(e){let r=await mt(e,async(i,o)=>{let s=this.getEdits(o),l=o.map(d=>d.thatTarget.contentSelection),{contentSelections:u,editRanges:m}=await Oe({rangeUpdater:this.rangeUpdater,editor:P().getEditableTextEditor(i),edits:s,selections:{contentSelections:l,editRanges:{selections:s.map(d=>d.range),behavior:0}}});return{thatMark:u.map(d=>({editor:i,selection:d})),flashRanges:Zo(s,m).map(([d,g])=>({editor:i,range:d.isLine?d.updateRange(g):g,isLine:d.isLine}))}});return await P().flashRanges(r.flatMap(i=>i.flashRanges.map(({editor:o,range:s,isLine:l})=>({editor:o,range:l?Wr(s):fr(s),style:"justAdded"})))),{thatSelections:r.flatMap(i=>i.thatMark)}}},wg=class extends Ul{constructor(e,r){super(e,r)}getEdits(e){return e.flatMap(r=>[Rg(r,"before"),Rg(r,"after")])}},Eg=class extends Ul{constructor(e,r){super(e,r)}getEdits(e){return e.map(r=>Rg(r,"before"))}},_g=class extends Ul{constructor(e,r){super(e,r)}getEdits(e){return e.map(r=>Rg(r,"after"))}};function Rg(t,e){return{...t.toDestination(e).constructChangeEdit("",!0),isLine:t.textualType==="line"}}function ic(t,e){if(t.type==="named")throw new Error("Cursorless snippets are deprecated. Please use community snippets. Update to latest cursorless-talon and say 'cursorless migrate snippets'.");if(t.type==="custom")return t;let r=f5(t.snippets,e,t.fallbackLanguage);if(r==null){let n=m5(t.snippets);throw new Error(`No snippet available for language '${e}'. Available languages: ${n}`)}return r}function m5(t){let e=new Set(t.flatMap(r=>r.languages??[]));return Array.from(e).sort().join(", ")}function f5(t,e,r){let n=sD(t.filter(i=>i.languages?.includes(e)));return n==null&&r!=null&&(n=sD(t.filter(i=>i.languages?.includes(r)))),n==null&&(n=t.find(i=>i.languages==null)),n}function sD(t){if(t.length!==0)return t.reduce((e,r)=>{if(e.languages==null||r.languages==null)throw Error("Snippet must have languages defined to find the one with the fewest languages");return r.languages.length<e.languages.length?r:e})}var gv=class t{constructor(){this.value="";this.pos=0}static{this._table={36:0,58:1,44:2,123:3,125:4,92:5,47:6,124:7,43:11,45:12,63:13}}static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return e===95||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};let e=this.pos,r=0,n=this.value.charCodeAt(e),i;if(i=t._table[n],typeof i=="number")return this.pos+=1,{type:i,pos:e,len:1};if(t.isDigitCharacter(n)){i=8;do r+=1,n=this.value.charCodeAt(e+r);while(t.isDigitCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}if(t.isVariableCharacter(n)){i=9;do n=this.value.charCodeAt(e+ ++r);while(t.isVariableCharacter(n)||t.isDigitCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}i=10;do r+=1,n=this.value.charCodeAt(e+r);while(!isNaN(n)&&typeof t._table[n]>"u"&&!t.isDigitCharacter(n)&&!t.isVariableCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}},vo=class{constructor(){this._children=[]}appendChild(e){return e instanceof Yt&&this._children[this._children.length-1]instanceof Yt?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,r){let{parent:n}=e,i=n.children.indexOf(e),o=n.children.slice(0);o.splice(i,1,...r),n._children=o,function s(l,u){for(let m of l)m.parent=u,s(m.children,m)}(r,n)}get children(){return this._children}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof Pg)return e;e=e.parent}}toString(){return this.children.reduce((e,r)=>e+r.toString(),"")}len(){return 0}},Yt=class t extends vo{constructor(r){super();this.value=r}static escape(r){return r.replace(/\$|}|\\/g,"\\$&")}toString(){return this.value}toTextmateString(){return t.escape(this.value)}len(){return this.value.length}clone(){return new t(this.value)}},kg=class extends vo{},Zt=class t extends kg{constructor(r){super();this.index=r}static compareByIndex(r,n){return r.index===n.index?0:r.isFinalTabstop?1:n.isFinalTabstop||r.index<n.index?-1:r.index>n.index?1:0}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof Ag?this._children[0]:void 0}toTextmateString(){let r="";return this.transform&&(r=this.transform.toTextmateString()),this.children.length===0&&!this.transform?`$${this.index}`:this.children.length===0?`\${${this.index}${r}}`:this.choice?`\${${this.index}|${this.choice.toTextmateString()}|${r}}`:`\${${this.index}:${this.children.map(n=>n.toTextmateString()).join("")}${r}}`}clone(){let r=new t(this.index);return this.transform&&(r.transform=this.transform.clone()),r._children=this.children.map(n=>n.clone()),r}},Ag=class t extends vo{constructor(){super(...arguments);this.options=[]}appendChild(r){return r instanceof Yt&&(r.parent=this,this.options.push(r)),this}toString(){return this.options[0].value}toTextmateString(){return this.options.map(r=>r.value.replace(/\||,|\\/g,"\\$&")).join(",")}len(){return this.options[0].len()}clone(){let r=new t;return this.options.forEach(r.appendChild,r),r}},hv=class t extends vo{constructor(){super(...arguments);this.regexp=new RegExp("")}resolve(r){let n=this,i=!1,o=r.replace(this.regexp,function(){return i=!0,n._replace(Array.prototype.slice.call(arguments,0,-2))});return!i&&this._children.some(s=>s instanceof Cn&&!!s.elseValue)&&(o=this._replace([])),o}_replace(r){let n="";for(let i of this._children)if(i instanceof Cn){let o=r[i.index]||"";o=i.resolve(o),n+=o}else n+=i.toString();return n}toString(){return""}toTextmateString(){return`/${this.regexp.source}/${this.children.map(r=>r.toTextmateString())}/${(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")}`}clone(){let r=new t;return r.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),r._children=this.children.map(n=>n.clone()),r}},Cn=class t extends vo{constructor(r,n,i,o){super();this.index=r;this.shorthandName=n;this.ifValue=i;this.elseValue=o}resolve(r){return this.shorthandName==="upcase"?r?r.toLocaleUpperCase():"":this.shorthandName==="downcase"?r?r.toLocaleLowerCase():"":this.shorthandName==="capitalize"?r?r[0].toLocaleUpperCase()+r.substr(1):"":this.shorthandName==="pascalcase"?r?this._toPascalCase(r):"":this.shorthandName==="camelcase"?r?this._toCamelCase(r):"":r&&typeof this.ifValue=="string"?this.ifValue:!r&&typeof this.elseValue=="string"?this.elseValue:r||""}_toPascalCase(r){let n=r.match(/[a-z0-9]+/gi);return n?n.map(i=>i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()).join(""):r}_toCamelCase(r){let n=r.match(/[a-z0-9]+/gi);return n?n.map((i,o)=>o===0?i.toLowerCase():i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()).join(""):r}toTextmateString(){let r="${";return r+=this.index,this.shorthandName?r+=`:/${this.shorthandName}`:this.ifValue&&this.elseValue?r+=`:?${this.ifValue}:${this.elseValue}`:this.ifValue?r+=`:+${this.ifValue}`:this.elseValue&&(r+=`:-${this.elseValue}`),r+="}",r}clone(){return new t(this.index,this.shorthandName,this.ifValue,this.elseValue)}},In=class t extends kg{constructor(r){super();this.name=r}resolve(r){let n=r.resolve(this);return this.transform&&(n=this.transform.resolve(n||"")),n!==void 0?(this._children=[new Yt(n)],!0):!1}toTextmateString(){let r="";return this.transform&&(r=this.transform.toTextmateString()),this.children.length===0?`\${${this.name}${r}}`:`\${${this.name}:${this.children.map(n=>n.toTextmateString()).join("")}${r}}`}clone(){let r=new t(this.name);return this.transform&&(r.transform=this.transform.clone()),r._children=this.children.map(n=>n.clone()),r}};function cD(t,e){let r=[...t];for(;r.length>0;){let n=r.shift();if(!e(n))break;r.unshift(...n.children)}}var Pg=class t extends vo{get placeholderInfo(){if(!this._placeholders){let e=[],r;this.walk(function(n){return n instanceof Zt&&(e.push(n),r=!r||r.index<n.index?n:r),!0}),this._placeholders={all:e,last:r}}return this._placeholders}get placeholders(){let{all:e}=this.placeholderInfo;return e}offset(e){let r=0,n=!1;return this.walk(i=>i===e?(n=!0,!1):(r+=i.len(),!0)),n?r:-1}fullLen(e){let r=0;return cD([e],n=>(r+=n.len(),!0)),r}enclosingPlaceholders(e){let r=[],{parent:n}=e;for(;n;)n instanceof Zt&&r.push(n),n=n.parent;return r}resolveVariables(e){return this.walk(r=>(r instanceof In&&r.resolve(e)&&(this._placeholders=void 0),!0)),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,r){return this._placeholders=void 0,super.replace(e,r)}toTextmateString(){return this.children.reduce((e,r)=>e+r.toTextmateString(),"")}clone(){let e=new t;return this._children=this.children.map(r=>r.clone()),e}walk(e){cD(this.children,e)}},si=class{constructor(){this._scanner=new gv;this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}text(e){return this.parse(e).toString()}parse(e,r,n){this._scanner.text(e),this._token=this._scanner.next();let i=new Pg;for(;this._parse(i););let o=new Map,s=[],l=0;i.walk(u=>(u instanceof Zt&&(l+=1,u.isFinalTabstop?o.set(0,void 0):!o.has(u.index)&&u.children.length>0?o.set(u.index,u.children):s.push(u)),!0));for(let u of s){let m=o.get(u.index);if(m){let d=new Zt(u.index);d.transform=u.transform;for(let g of m)d.appendChild(g.clone());i.replace(u,[d])}}return n||(n=l>0&&r),!o.has(0)&&n&&i.appendChild(new Zt(0)),i}_accept(e,r){if(e===void 0||this._token.type===e){let n=r?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),n}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){let r=this._token;for(;this._token.type!==e;){if(this._token.type===14)return!1;if(this._token.type===5){let i=this._scanner.next();if(i.type!==0&&i.type!==4&&i.type!==5)return!1}this._token=this._scanner.next()}let n=this._scanner.value.substring(r.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),n}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let r;return(r=this._accept(5,!0))?(r=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||r,e.appendChild(new Yt(r)),!0):!1}_parseTabstopOrVariableName(e){let r,n=this._token;return this._accept(0)&&(r=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(r)?new Zt(Number(r)):new In(r)),!0):this._backTo(n)}_parseComplexPlaceholder(e){let r,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(r=this._accept(8,!0))))return this._backTo(n);let o=new Zt(Number(r));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new Yt("${"+r+":")),o.children.forEach(e.appendChild,e),!0}else if(o.index>0&&this._accept(7)){let s=new Ag;for(;;){if(this._parseChoiceElement(s)){if(this._accept(2))continue;if(this._accept(7)&&(o.appendChild(s),this._accept(4)))return e.appendChild(o),!0}return this._backTo(n),!1}}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseChoiceElement(e){let r=this._token,n=[];for(;!(this._token.type===2||this._token.type===7);){let i;if((i=this._accept(5,!0))?i=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||i:i=this._accept(void 0,!0),!i)return this._backTo(r),!1;n.push(i)}return n.length===0?(this._backTo(r),!1):(e.appendChild(new Yt(n.join(""))),!0)}_parseComplexVariable(e){let r,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(r=this._accept(9,!0))))return this._backTo(n);let o=new In(r);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new Yt("${"+r+":")),o.children.forEach(e.appendChild,e),!0}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseTransform(e){let r=new hv,n="",i="";for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(6,!0)||o,n+=o;continue}if(this._token.type!==14){n+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(5,!0)||this._accept(6,!0)||o,r.appendChild(new Yt(o));continue}if(!(this._parseFormatString(r)||this._parseAnything(r)))return!1}for(;!this._accept(4);){if(this._token.type!==14){i+=this._accept(void 0,!0);continue}return!1}try{r.regexp=new RegExp(n,i)}catch{return!1}return e.transform=r,!0}_parseFormatString(e){let r=this._token;if(!this._accept(0))return!1;let n=!1;this._accept(3)&&(n=!0);let i=this._accept(8,!0);if(i)if(n){if(this._accept(4))return e.appendChild(new Cn(Number(i))),!0;if(!this._accept(1))return this._backTo(r),!1}else return e.appendChild(new Cn(Number(i))),!0;else return this._backTo(r),!1;if(this._accept(6)){let o=this._accept(9,!0);return!o||!this._accept(4)?(this._backTo(r),!1):(e.appendChild(new Cn(Number(i),o)),!0)}else if(this._accept(11)){let o=this._until(4);if(o)return e.appendChild(new Cn(Number(i),void 0,o,void 0)),!0}else if(this._accept(12)){let o=this._until(4);if(o)return e.appendChild(new Cn(Number(i),void 0,void 0,o)),!0}else if(this._accept(13)){let o=this._until(1);if(o){let s=this._until(4);if(s)return e.appendChild(new Cn(Number(i),void 0,o,s)),!0}}else{let o=this._until(4);if(o)return e.appendChild(new Cn(Number(i),void 0,void 0,o)),!0}return this._backTo(r),!1}_parseAnything(e){return this._token.type!==14?(e.appendChild(new Yt(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}};var Lg=Object.freeze({CURRENT_YEAR:!0,CURRENT_YEAR_SHORT:!0,CURRENT_MONTH:!0,CURRENT_DATE:!0,CURRENT_HOUR:!0,CURRENT_MINUTE:!0,CURRENT_SECOND:!0,CURRENT_DAY_NAME:!0,CURRENT_DAY_NAME_SHORT:!0,CURRENT_MONTH_NAME:!0,CURRENT_MONTH_NAME_SHORT:!0,CURRENT_SECONDS_UNIX:!0,SELECTION:!0,CLIPBOARD:!0,TM_SELECTED_TEXT:!0,TM_CURRENT_LINE:!0,TM_CURRENT_WORD:!0,TM_LINE_INDEX:!0,TM_LINE_NUMBER:!0,TM_FILENAME:!0,TM_FILENAME_BASE:!0,TM_DIRECTORY:!0,TM_FILEPATH:!0,RELATIVE_FILEPATH:!0,BLOCK_COMMENT_START:!0,BLOCK_COMMENT_END:!0,LINE_COMMENT:!0,WORKSPACE_NAME:!0,WORKSPACE_FOLDER:!0,RANDOM:!0,RANDOM_HEX:!0,UUID:!0});function Dg(t,e,r){let n=d5(t)+1,i={};t.walk(o=>{if(o instanceof In){if(o.name===e)o.name="TM_SELECTED_TEXT";else if(r!=null&&Object.prototype.hasOwnProperty.call(r,o.name))o.parent.replace(o,[new Yt(r[o.name])]);else if(!Lg[o.name]){let s;o.name in i?s=i[o.name]:(s=n++,i[o.name]=s);let l=new Zt(s);o.children.forEach(u=>l.appendChild(u)),o.parent.replace(o,[l])}}else o instanceof Zt&&(o.index.toString()===e?o.parent.replace(o,[new In("TM_SELECTED_TEXT")]):r!=null&&Object.prototype.hasOwnProperty.call(r,o.index)&&o.parent.replace(o,[new Yt(r[o.index])]));return!0})}function d5(t){let e=0;return t.walk(r=>(r instanceof Zt&&(e=Math.max(e,r.index)),!0)),e}function Mg(t,e,r){let n=g5(t)+1,i={};t.walk(o=>{if(o instanceof In){if(o.name===e)o.name="TM_SELECTED_TEXT";else if(r!=null&&Object.prototype.hasOwnProperty.call(r,o.name))o.parent.replace(o,[new Yt(r[o.name])]);else if(!Lg[o.name]){let s;o.name in i?s=i[o.name]:(s=n++,i[o.name]=s);let l=new Zt(s);o.children.forEach(u=>l.appendChild(u)),o.parent.replace(o,[l])}}else o instanceof Zt&&o.index.toString()===e&&o.parent.replace(o,[new In("TM_SELECTED_TEXT")]);return!0})}function g5(t){let e=0;return t.walk(r=>(r instanceof Zt&&(e=Math.max(e,r.index)),!0)),e}function Fg(t,e,r){let n=e.map(o=>h5(t,o,r)),i=n[0];if(!n.every(o=>o===i))throw new Error("Multiple snippet definitions match the given context");if(i===-1)throw new Error("Couldn't find matching snippet definition");return r[i]}function h5(t,e,r){let n=e.editor.document.languageId,i={multipleTargets:!1};return r.findIndex(({scope:o})=>{if(o==null)return!0;let{langIds:s,scopeTypes:l,excludeDescendantScopeTypes:u}=o;if(s!=null&&!s.includes(n))return!1;if(l!=null){let m=l.concat(u??[]),d,g;for(let y of m)try{let x=t.create({type:"containingScope",scopeType:{type:y}}).run(e,i)[0];e.contentRange.isRangeEqual(x.contentRange)&&(x=t.create({type:"containingScope",scopeType:{type:y},ancestorIndex:1}).run(e,i)[0]),(d==null||d.contentRange.contains(x.contentRange))&&(d=x,g=y)}catch{continue}return g==null?!1:d!=null&&!(u??[]).includes(g)}return!0})}var lD=!1;function Cg(){lD||(qo(P().messages,"legacySnippets","Talon community snippets are now fully supported in Cursorless! Cursorless's experimental snippets are now deprecated, but in most cases we can help you migrate automatically. Update cursorless-talon and say 'cursorless migrate snippets'."),lD=!0)}var pD={camelCase(t){if(t.length===0)return"";let[e,...r]=t;return e+r.map(uD).join("")},snakeCase(t){return t.join("_")},upperSnakeCase(t){return t.map(e=>e.toUpperCase()).join("_")},pascalCase(t){return t.map(uD).join("")}};function uD(t){return t.length===0?"":t[0].toUpperCase()+t.substr(1)}var Hl=class{constructor(e,r,n,i){this.rangeUpdater=e;this.snippets=r;this.actions=n;this.modifierStageFactory=i;this.snippetParser=new si;this.run=this.run.bind(this)}getFinalStages(e){let r=this.getScopeTypes(e);return r.length===0?[]:[new Ks(this.modifierStageFactory,{type:"cascading",modifiers:r.map(n=>({type:"containingScope",scopeType:n}))})]}getScopeTypes(e){let{name:r}=e,i=this.snippets.getSnippetStrict(r).insertionScopeTypes;return i==null?[]:i.map(o=>({type:o}))}getSnippetInfo(e,r){let{name:n}=e,i=this.snippets.getSnippetStrict(n),o=Fg(this.modifierStageFactory,r,i.definitions);return{body:o.body.join(`
`),formatSubstitutions(s){return s==null?void 0:y5(i,o,s)}}}async run(e,r){Cg();let n=P().getEditableTextEditor(Pt(e));await this.actions.editNew.run(e);let{body:i,formatSubstitutions:o}=this.getSnippetInfo(r,n.selections.map(m=>new Ht({editor:n,contentRange:m,isReversed:!1,hasExplicitRange:!0}))),s=this.snippetParser.parse(i);Mg(s,null,o(r.substitutions));let l=s.toTextmateString(),{editorSelections:u}=await Oe({rangeUpdater:this.rangeUpdater,editor:n,callback:()=>n.insertSnippet(l),preserveCursorSelections:!0,selections:{editorSelections:{selections:n.selections,behavior:0}}});return{thatSelections:u.map(m=>({editor:n,selection:m}))}}};function y5(t,e,r){return Object.fromEntries(Object.entries(r).map(([n,i])=>{let o=(e.variables??{})[n]?.formatter??(t.variables??{})[n]?.formatter;if(o==null)return[n,i];let s=pD[o];if(s==null)throw new Error(`Couldn't find formatter ${o} for variable ${n}`);return[n,s(i.split(" "))]}))}var Bl=class{constructor(e,r,n,i){this.rangeUpdater=e;this.snippets=r;this.actions=n;this.modifierStageFactory=i;this.snippetParser=new si;this.run=this.run.bind(this)}getFinalStages(e,r){if(r.type==="named")return this.legacy().getFinalStages(r);let n=Pt(e),o=ic(r,n.document.languageId).scopeTypes??[];return o.length===0?[]:[new Ks(this.modifierStageFactory,{type:"cascading",modifiers:o.map(s=>({type:"containingScope",scopeType:s}))})]}async run(e,r){if(r.type==="named")return this.legacy().run(e,r);let n=P().getEditableTextEditor(Pt(e)),i=ic(r,n.document.languageId),o=this.snippetParser.parse(i.body),s=i.substitutions??r.substitutions;Dg(o,null,s);let l=o.toTextmateString();await this.actions.editNew.run(e);let{editorSelections:u}=await Oe({rangeUpdater:this.rangeUpdater,editor:n,callback:()=>n.insertSnippet(l),preserveCursorSelections:!0,selections:{editorSelections:{selections:n.selections,behavior:0}}});return{thatSelections:u.map(m=>({editor:n,selection:m}))}}legacy(){return new Hl(this.rangeUpdater,this.snippets,this.actions,this.modifierStageFactory)}};var Vl=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(oi)]}async run(e){return await We(P(),e.map(({thatTarget:n})=>n),"pendingModification0"),{thatSelections:st(await mt(e,async(n,i)=>{let{thatRanges:o}=await Oe({rangeUpdater:this.rangeUpdater,editor:P().getEditableTextEditor(n),edits:T5(n,i),selections:{thatRanges:i.map(({contentRange:s})=>s)}});return Zo(i,o).map(([s,l])=>({editor:n,selection:l.toSelection(s.isReversed)}))}))}}};function T5(t,e){let r=[];for(let n of e){let i=n.textualType==="token"?x5(n):S5(n);r.push(...i)}return r}function x5(t){let{editor:e,contentRange:r}=t,n=Pr(e.document.languageId).tokenMatcher,i=dn(n,e,r,"forward");return Array.from(gS(i)).map(([o,s])=>({range:new Z(o.end,s.start),text:"",isReplace:!0}))}function S5(t){let{document:e}=t.editor,r=t.contentRange,n=r.start.line,i=r.isSingleLine?Math.min(n+1,e.lineCount-1):r.end.line,o=Ds(MP(n,i+1),s=>e.lineAt(s));return Array.from(gS(o)).map(([s,l])=>({range:new Z(s.rangeTrimmed?.end??s.range.end,l.rangeTrimmed?.start??l.range.start),text:l.isEmptyOrWhitespace?"":" ",isReplace:!0}))}var Ig=class{constructor(e,r){this.rangeUpdater=e;this.actions=r;this.run=this.run.bind(this)}async run(e){let r=P().getEditableTextEditor(Pt(e)),n=P().activeEditableTextEditor,i=async()=>{await this.actions.editNew.run(e)},{cursorSelections:o}=await Oe({rangeUpdater:this.rangeUpdater,editor:r,preserveCursorSelections:!0,callback:i,selections:{cursorSelections:r.selections}}),{originalCursorSelections:s,editorSelections:l}=await Oe({rangeUpdater:this.rangeUpdater,editor:r,callback:()=>r.clipboardPaste(),selections:{originalCursorSelections:o,editorSelections:{selections:r.selections,behavior:0}}});return await r.setSelections(s),n!=null&&!n.isActive&&await n.focus(),await P().flashRanges(l.map(u=>({editor:r,range:fr(u),style:"justAdded"}))),{thatSelections:l.map(u=>({editor:r,selection:u}))}}};var Og=class{constructor(e){this.rangeUpdater=e;this.runForEditor=this.runForEditor.bind(this)}async run(e){let r=await P().clipboard.readText(),n=r.split(/\r?\n/g),i=e.length===n.length?Zo(e,n).map(([s,l])=>({destination:s,text:l})):e.map(s=>({destination:s,text:r}));return{thatSelections:st(await Ai(i,({destination:s})=>s.editor,this.runForEditor))}}async runForEditor(e,r){let n=r.map(({destination:s,text:l})=>s.constructChangeEdit(l)),{editSelections:i}=await Oe({rangeUpdater:this.rangeUpdater,editor:P().getEditableTextEditor(e),edits:n,selections:{editSelections:{selections:n.map(({range:s})=>s),behavior:0}}}),o=Zo(n,i).map(([s,l])=>s.updateRange(l).toSelection(l.isReversed));return await P().flashRanges(o.map(s=>({editor:e,range:fr(s),style:"justAdded"}))),o.map(s=>({editor:e,selection:s}))}};var Ng=class{constructor(e,r){this.run=this.run.bind(this),this.runner=P().capabilities.commands.clipboardPaste!=null?new Ig(e,r):new Og(e)}run(e){return this.runner.run(e)}};var Wl=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e,{showDecorations:r=!0}={}){return e=Hd(e),r&&await We(P(),e,"pendingDelete",i=>i.getRemovalHighlightRange()),{thatTargets:st(await mt(e,this.runForEditor))}}async runForEditor(e,r){let n=r.map(s=>s.constructRemovalEdit()),i=P().getEditableTextEditor(e),{editRanges:o}=await Oe({rangeUpdater:this.rangeUpdater,editor:i,edits:n,selections:{editRanges:n.map(({range:s})=>s)}});return Ft(r,o).map(([s,l])=>new lo({editor:s.editor,isReversed:s.isReversed,contentRange:l}))}};var $l=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}getTexts(e,r){if(Array.isArray(r))return r.length===1?Array(e.length).fill(r[0]):r;let n=[];for(let i=0;i<e.length;++i)n[i]=(r.start+i).toString();return n}async run(e,r){await We(P(),e.map(l=>l.target),"pendingModification0");let n=this.getTexts(e,r);if(e.length!==n.length)throw new Error("Targets and texts must have same length");let i=Ft(e,n).map(([l,u])=>({editor:l.editor,target:l.target,edit:l.constructChangeEdit(u)})),o=[],s=[];return await Ai(i,l=>l.editor,async(l,u)=>{let m=u.map(({edit:y})=>y),{contentSelections:d,editRanges:g}=await Oe({rangeUpdater:this.rangeUpdater,editor:P().getEditableTextEditor(l),edits:m,selections:{contentSelections:u.map(({target:y})=>y.contentSelection),editRanges:{selections:m.map(({range:y})=>y),behavior:0}}});for(let[y,x]of Ft(u,d))o.push(y.target.withContentRange(x));for(let[y,x]of Ft(u,g))s.push({editor:l,selection:y.edit.updateRange(x).toSelection(!1)})}),{sourceTargets:o,thatSelections:s}}};var jl=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.getFinalStages=()=>[pv(this.modifierStageFactory)];this.run=this.run.bind(this)}async run(e,r,n){let i=e.flatMap(s=>{let l=s.getBoundary();if(l.length!==2)throw Error("Target must have an opening and closing delimiter");return l});await We(P(),i,"pendingModification0");let o=await mt(i,async(s,l)=>{let u=l.map((g,y)=>({editor:s,range:g.contentRange,text:y%2===0?r:n})),{sourceRanges:m,thatRanges:d}=await Oe({rangeUpdater:this.rangeUpdater,editor:P().getEditableTextEditor(s),edits:u,selections:{sourceRanges:e.map(g=>g.thatTarget.contentRange),thatRanges:e.map(g=>g.contentRange)}});return{sourceMark:pn(e,m),thatMark:pn(e,d)}});return{sourceSelections:o.flatMap(({sourceMark:s})=>s),thatSelections:o.flatMap(({thatMark:s})=>s)}}};var zl=class{constructor(e){this.at=e;this.run=this.run.bind(this)}async run(e){let r=cl(e,s=>s.editor),n=Array.from(r,([s,l])=>({lineNumber:v5(l,this.at),editor:s})),i=P().activeEditableTextEditor;for(let s of n)await P().getEditableTextEditor(s.editor).revealLine(s.lineNumber,this.at);i!=null&&!i.isActive&&await i.focus();let o=e.filter(s=>{let l=s.editor.visibleRanges,u=l[0].start.line,m=l[l.length-1].end.line;return s.contentRange.start.line>u||s.contentRange.end.line<m||s.contentRange.start.line===u&&s.contentRange.end.line===m});return await P().flashRanges(o.map(s=>({editor:s.editor,range:Wr(s.contentRange),style:"referenced"}))),{thatTargets:e}}},Ug=class extends zl{constructor(){super("top")}},Hg=class extends zl{constructor(){super("center")}},Bg=class extends zl{constructor(){super("bottom")}};function v5(t,e){let r=Number.MAX_SAFE_INTEGER,n=0;return t.forEach(i=>{r=Math.min(r,i.contentRange.start.line),n=Math.max(n,i.contentRange.end.line)}),e==="top"?r:e==="bottom"?n:Math.floor((r+n)/2)}var bo=class{constructor(e,r){this.selectionMode=e;this.rangeMode=r;this.run=this.run.bind(this)}async run(e){let r=Pt(e),n=this.getSelections(e),i=this.selectionMode==="add"?r.selections.concat(n):n,o=this.selectionMode==="set"&&i.length===1&&i[0].isEmpty;return await P().getEditableTextEditor(r).setSelections(i,{focusEditor:!0,highlightWord:o}),{thatTargets:e}}getSelections(e){switch(this.rangeMode){case"content":return e.map(r=>r.contentSelection);case"before":return e.map(r=>new ut(r.contentRange.start,r.contentRange.start));case"after":return e.map(r=>new ut(r.contentRange.end,r.contentRange.end))}}},Vg=class extends bo{constructor(){super("set","content")}},Wg=class extends bo{constructor(){super("set","before")}},$g=class extends bo{constructor(){super("set","after")}},jg=class extends bo{constructor(){super("add","content")}},zg=class extends bo{constructor(){super("add","before")}},qg=class extends bo{constructor(){super("add","after")}};var ql=class{constructor(e){this.key=e;this.noAutomaticTokenExpansion=!0;this.run=this.run.bind(this)}async run(e){return{thatTargets:e,[`${this.key}Targets`]:e}}};var Gl=class{constructor(e){this.treeSitter=e;this.run=this.run.bind(this)}async run(e){await We(P(),e,"referenced");let r=["# Cursorless parse tree"];for(let n of e){let{editor:i,contentRange:o}=n,s=this.treeSitter.getTree(i.document);r.push(b5(i.document,s,o))}return P().openUntitledTextDocument({language:"markdown",content:r.join(`

`)}),{thatTargets:e}}};function b5(t,e,r){let n=[],i=[];return mD(n,i,r,e.walk(),0),[`## ${t.filename} [${r}]
`,`\`\`\`${t.languageId}`,t.getText(r),"```","","```scm",...i,"```","","```js",...n,"```",""].join(`
`)}function mD(t,e,r,n,i){for(;;){let o=new Z(n.startPosition.row,n.startPosition.column,n.endPosition.row,n.endPosition.column);if(r.intersection(o)!=null){let s="  ".repeat(i),l=w5(n),u=s+l;if(n.nodeIsNamed)t.push(`${u}${n.nodeType} [${o}]`),e.push(`${u}(${n.nodeType}`),n.gotoFirstChild()?(mD(t,e,r,n,i+1),n.gotoParent(),e.push(`${s})`)):e[e.length-1]+=")";else{let m=`"${n.nodeType}"`;t.push(`${u}${m} [${o}]`),e.push(`${u}${m}`)}}if(!n.gotoNextSibling())return}}function w5(t){let e=t.currentFieldName;return e!=null?`${e}: `:""}var Kl=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){e.length<2&&qo(P().messages,"tooFewTargets",'This action works on multiple targets, e.g. "sort every line block" instead of "sort block".');let r=e.slice().sort((s,l)=>s.contentRange.start.compareTo(l.contentRange.start)),{returnValue:n}=await this.actions.getText.run(r,{showDecorations:!1}),i=this.sortTexts(n),{thatSelections:o}=await this.actions.replace.run(r.map(s=>s.toDestination("to")),i);return{thatSelections:o}}},Gg=class extends Kl{sortTexts(e){return e.sort((r,n)=>r.localeCompare(n,void 0,{numeric:!0,caseFirst:"upper"}))}},Kg=class extends Kl{sortTexts(e){return e.reverse()}},Qg=class extends Kl{sortTexts(e){return JT(e)}};var Ql=class{constructor(e){this.modifierStageFactory=e;this.getFinalStages=()=>[this.modifierStageFactory.create(oi)];this.run=this.run.bind(this)}async run(e){let r=e.map(({thatTarget:n})=>n);return await We(P(),r,"referenced"),await mt(e,async(n,i)=>{let o=i.map(s=>mn(s,s.contentRange));await P().getEditableTextEditor(n).toggleBreakpoint(o)}),{thatTargets:e}}};var Yl=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e,r,n){let i=await mt(e,async(o,s)=>{let l=s.map(w=>({start:new ut(w.contentRange.start,w.contentRange.start),end:new ut(w.contentRange.end,w.contentRange.end)})),u=l.flatMap(({start:w,end:H})=>[{text:r,range:w},{text:n,range:H,isReplace:!0}]),m=s.map(w=>w.contentSelection),{boundariesStartSelections:d,boundariesEndSelections:g,sourceSelections:y,thatSelections:x}=await Oe({rangeUpdater:this.rangeUpdater,editor:P().getEditableTextEditor(o),edits:u,selections:{boundariesStartSelections:{selections:l.map(({start:w})=>w),behavior:2},boundariesEndSelections:{selections:l.map(({end:w})=>w),behavior:3},sourceSelections:{selections:m,behavior:1},thatSelections:{selections:m,behavior:0}}}),E=[...d,...g];return await P().flashRanges(E.map(w=>({editor:o,range:fr(w),style:"justAdded"}))),{sourceMark:y.map(w=>({editor:o,selection:w})),thatMark:x.map(w=>({editor:o,selection:w}))}});return{sourceSelections:i.flatMap(({sourceMark:o})=>o),thatSelections:i.flatMap(({thatMark:o})=>o)}}};var Zl=class{constructor(e,r,n){this.rangeUpdater=e;this.snippets=r;this.modifierStageFactory=n;this.snippetParser=new si;this.run=this.run.bind(this)}getFinalStages(e){let r=this.getScopeType(e);return r==null?[]:[new To(this.modifierStageFactory,{type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:r}})]}getScopeType(e){let{name:r,variableName:n}=e,s=(this.snippets.getSnippetStrict(r).variables??{})[n]?.wrapperScopeType;return s==null?void 0:{type:s}}getBody(e,r){let{name:n}=e,i=this.snippets.getSnippetStrict(n);return Fg(this.modifierStageFactory,r,i.definitions).body.join(`
`)}async run(e,r){Cg();let n=P().getEditableTextEditor(Pt(e)),i=this.getBody(r,e),o=this.snippetParser.parse(i);Mg(o,r.variableName);let s=o.toTextmateString();await We(P(),e,"pendingModification0");let l=e.map(d=>d.contentSelection),u=()=>n.insertSnippet(s,l),{targetSelections:m}=await Oe({rangeUpdater:this.rangeUpdater,editor:n,callback:u,preserveCursorSelections:!0,selections:{targetSelections:l}});return{thatSelections:m.map(d=>({editor:n,selection:d}))}}};var Xl=class{constructor(e,r,n){this.rangeUpdater=e;this.snippets=r;this.modifierStageFactory=n;this.snippetParser=new si;this.run=this.run.bind(this)}getFinalStages(e,r){if(r.type==="named")return this.legacy().getFinalStages(r);let n=Pt(e),i=ic(r,n.document.languageId);return i.scopeType==null?[]:[new To(this.modifierStageFactory,{type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:i.scopeType}})]}async run(e,r){if(r.type==="named")return this.legacy().run(e,r);let n=P().getEditableTextEditor(Pt(e)),i=ic(r,n.document.languageId),o=this.snippetParser.parse(i.body);Dg(o,i.variableName);let s=o.toTextmateString();await We(P(),e,"pendingModification0");let l=e.map(m=>m.contentSelection),{targetSelections:u}=await Oe({rangeUpdater:this.rangeUpdater,editor:n,callback:()=>n.insertSnippet(s,l),preserveCursorSelections:!0,selections:{targetSelections:l}});return{thatSelections:u.map(m=>({editor:n,selection:m}))}}legacy(){return new Zl(this.rangeUpdater,this.snippets,this.modifierStageFactory)}};var E5=/-?\d+(\.\d+)?/g,Yg=class{constructor(e,r){this.actions=e;this.isIncrement=r;this.run=this.run.bind(this)}async run(e){let r=[];return await Ai(e,n=>n.editor,async(n,i)=>{let o=await this.runOnEditor(n,i);r.push(...o)}),{thatSelections:r}}async runOnEditor(e,r){let{document:n}=e,i=[],o=[];for(let l of r){let u=n.offsetAt(l.contentRange.start),m=l.contentText,d=Zc(m,E5);for(let g of d)i.push(_5(e,u,g)),o.push(R5(this.isIncrement,g.text))}let{thatSelections:s}=await this.actions.replace.run(i,o);return s}},Zg=class extends Yg{constructor(e){super(e,!0)}},Xg=class extends Yg{constructor(e){super(e,!1)}};function _5(t,e,r){return new Xe({editor:t,isReversed:!1,contentRange:new Z(t.document.positionAt(e+r.index),t.document.positionAt(e+r.index+r.text.length))}).toDestination("to")}function R5(t,e){return e.includes(".")?A5(t,e).toString():k5(t,e).toString()}function k5(t,e){let r=parseInt(e),n=1;return r+(t?n:-n)}function A5(t,e){let r=parseFloat(e),i=Math.abs(r)<=1?.1:1,o=r+(t?i:-i);return parseFloat(o.toPrecision(15))/1}var Jg=class{constructor(e,r,n,i){this.addSelection=new jg,this.addSelectionBefore=new zg,this.addSelectionAfter=new qg,this.callAsFunction=new Ll(this),this.clearAndSetSelection=new Dl(this),this.copyToClipboard=new sg(this,n),this.cutToClipboard=new cg(this),this.decrement=new Xg(this),this.deselect=new Ml,this.editNew=new lg(n,this),this.editNewLineAfter=new mg(this,i),this.editNewLineBefore=new pg(this,i),this.executeCommand=new Fl(n),this.extractVariable=new rg(n),this.findInDocument=new dg(this),this.findInWorkspace=new gg(this),this.flashTargets=new hg,this.foldRegion=new Gd(n),this.followLink=new rc({openAside:!1}),this.followLinkAside=new rc({openAside:!0}),this.generateSnippet=new nc(r),this.getText=new Ol,this.gitAccept=new ng(n),this.gitRevert=new ig(n),this.gitStage=new og(n),this.gitUnstage=new ag(n),this.highlight=new Nl,this.increment=new Zg(this),this.indentLine=new Tg(n),this.insertCopyAfter=new bg(n,i),this.insertCopyBefore=new vg(n,i),this.insertEmptyLineAfter=new _g(n,i),this.insertEmptyLineBefore=new Eg(n,i),this.insertEmptyLinesAround=new wg(n,i),this.insertSnippet=new Bl(n,r,this,i),this.joinLines=new Vl(n,i),this.breakLine=new Ud(n),this.moveToTarget=new Vd(n),this.outdentLine=new xg(n),this.pasteFromClipboard=new Ng(n,this),this.randomizeTargets=new Qg(this),this.remove=new Wl(n),this.rename=new Qd(n),this.replace=new $l(n),this.replaceWithTarget=new Bd(n),this.revealDefinition=new Xd(n),this.revealTypeDefinition=new Jd(n),this.reverseTargets=new Kg(this),this.rewrapWithPairedDelimiter=new jl(n,i),this.scrollToBottom=new Bg,this.scrollToCenter=new Hg,this.scrollToTop=new Ug,this.setSelection=new Vg,this.setSelectionAfter=new $g,this.setSelectionBefore=new Wg,this.showDebugHover=new tg(n),this.showHover=new eg(n),this.showQuickFix=new Zd(n),this.showReferences=new Yd(n),this.sortTargets=new Gg(this),this.swapTargets=new Wd(n),this.toggleLineBreakpoint=new Ql(i),this.toggleLineComment=new jd(n),this.unfoldRegion=new Kd(n),this.wrapWithPairedDelimiter=new Yl(n),this.wrapWithSnippet=new Xl(n,r,i),this["experimental.setInstanceReference"]=new ql("instanceReference"),this["private.showParseTree"]=new Gl(e),this["private.getTargets"]=new Il,this["private.setKeyboardTarget"]=new ql("keyboard")}};async function fD(t,e,r){let n=await t.getFocusedElementType();if(n==null||n==="textEditor")return null;let i=r.action;switch(i.name){case"replace":return eh(i.destination)&&Array.isArray(i.replaceWith)?{action:"insert",modifiers:th(i.destination),text:i.replaceWith.join(`
`)}:null;case"replaceWithTarget":return eh(i.destination)?{action:"insert",modifiers:th(i.destination),text:await yv(e,i.source)}:null;case"moveToTarget":if(eh(i.destination)){let o=await yv(e,i.source);return await P5(e,i.source),{action:"insert",modifiers:th(i.destination),text:o}}return null;case"callAsFunction":return rh(i.argument)?{action:i.name,modifiers:nh(i.argument),callee:await yv(e,i.callee)}:null;case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return rh(i.target)?{action:i.name,modifiers:nh(i.target),left:i.left,right:i.right}:null;case"pasteFromClipboard":return eh(i.destination)?{action:i.name,modifiers:th(i.destination)}:null;case"swapTargets":case"editNew":case"insertSnippet":case"generateSnippet":case"wrapWithSnippet":case"parsed":return null;default:return rh(i.target)?{action:i.name,modifiers:nh(i.target)}:null}}function eh(t){return t.type==="implicit"?!0:t.type==="primitive"?t.insertionMode==="to"&&rh(t.target):!1}function rh(t){return t.type==="implicit"?!0:t.type==="primitive"?t.mark==null||t.mark.type==="cursor":!1}function th(t){return t.type==="primitive"?nh(t.target):[]}function nh(t){return t.type==="primitive"&&t.modifiers!=null&&t.modifiers.length>0?t.modifiers:[]}async function yv(t,e){return(await t({name:"getText",target:e})).returnValue.join(`
`)}async function P5(t,e){await t({name:"remove",target:e})}function dD(t,e){let{anchor:r,rangeType:n,active:i}=t;if(r.type!=="primitive"||n!=="continuous")return t;let o=r.modifiers.map((s,l)=>[s,l]);for(let[s,l]of o.reverse())for(let u of L5){let m=u.accept(s);if(m.accepted){let[d,g]=[r.modifiers.slice(0,l+1),r.modifiers.slice(l+1)],y={...t,anchor:g.length===0&&e?{type:"implicit"}:{type:"primitive",mark:r.mark,modifiers:g},active:Pm(i,x=>{x.modifiers=x.modifiers.slice($o(x.modifiers,E=>u.accept(E).accepted)+1)})};return y=m.transformTarget?.(y)??y,{type:"primitive",mark:{type:"target",target:y},modifiers:d}}}return t}var L5=[{accept(t){return t.type==="everyScope"&&t.scopeType.type!=="instance"?{accepted:!0,transformTarget(e){return{...e,exclusionScopeType:t.scopeType}}}:{accepted:!1}}},{accept(t){return{accepted:(t.type==="everyScope"||t.type==="relativeScope"||t.type==="ordinalScope")&&t.scopeType.type==="instance"}}}];function xv(t,e){switch(t.type){case"list":return D5(t,e);case"range":return gD(t,e);case"primitive":return ih(t,e);case"implicit":return t}}function D5(t,e){return{...t,elements:t.elements.map((r,n)=>{let i=e.concat(t.elements.slice(0,n));switch(r.type){case"range":return gD(r,i);case"primitive":return ih(r,i)}})}}function gD(t,e){let r=M5(t,e),n=t.anchor.type==="implicit"||t.anchor.mark==null;return dD(r,n)}function M5(t,e){return{type:"range",rangeType:t.rangeType??"continuous",excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1,anchor:t.anchor.type==="implicit"?t.anchor:ih(t.anchor,e),active:ih(t.active,e.concat(t.anchor))}}function ih(t,e){let r=Tv(t.mark??(F5(t)?O5(e):null)??{type:"cursor"}),n=hD(t)??N5(e)??U5(e)??[];return{type:t.type,mark:r,modifiers:n}}function F5(t){return t.modifiers?.some(e=>e.type==="inferPreviousMark")??!1}function hD(t){let e=t.modifiers?.filter(r=>r.type!=="inferPreviousMark")??[];return e.length!==0?e:void 0}function C5(t){if(I5(t))return[{type:"containingScope",scopeType:{type:"line"}}]}function I5(t){let e=r=>r?.type==="lineNumber";return e(t.mark)?!0:t.mark?.type==="range"?e(t.mark.anchor)&&e(t.mark.active):!1}function O5(t){return Jl(t,e=>e.mark)}function N5(t){return Jl(t,hD)}function U5(t){return Jl(t,C5)}function Jl(t,e){for(let r=t.length-1;r>-1;--r){let n=t[r];switch(n.type){case"primitive":{let i=e(n);if(i!=null)return i;break}case"range":{let i=Jl([n.anchor],e);if(i!=null)return i;break}case"list":{let i=Jl(n.elements,e);if(i!=null)return i;break}}}}function Tv(t){switch(t.type){case"range":return{...t,anchor:Tv(t.anchor),active:Tv(t.active)};case"target":return{type:"target",target:xv(t.target,[])};default:return t}}var oh=class{constructor(e,r,n,i,o){this.commandServerApi=e;this.debug=r;this.storedTargets=n;this.pipelineRunner=i;this.actions=o;this.finalStages=[];this.runAction=this.runAction.bind(this),this.inferenceContext=new Sv(this.debug)}async run(e){if(Yo(e)){let m=await fD(this.commandServerApi,this.runAction,e);if(m!=null)return{fallback:m}}let{returnValue:r,thatSelections:n,thatTargets:i,sourceSelections:o,sourceTargets:s,instanceReferenceTargets:l,keyboardTargets:u}=await this.runAction(e.action);return this.storedTargets.set("that",yD(i,n)),this.storedTargets.set("source",yD(s,o)),this.storedTargets.set("instanceReference",l),this.storedTargets.set("keyboard",u,{history:!0}),{returnValue:r}}runAction(e){switch(this.inferenceContext.reset(),this.finalStages=[],e.name){case"replaceWithTarget":return this.actions.replaceWithTarget.run(this.getTargets(e.source),this.getDestinations(e.destination));case"moveToTarget":return this.actions.moveToTarget.run(this.getTargets(e.source),this.getDestinations(e.destination));case"swapTargets":return this.actions.swapTargets.run(this.getTargets(e.target1),this.getTargets(e.target2));case"callAsFunction":return this.actions.callAsFunction.run(this.getTargets(e.callee),this.getTargets(e.argument));case"wrapWithPairedDelimiter":return this.actions.wrapWithPairedDelimiter.run(this.getTargets(e.target),e.left,e.right);case"rewrapWithPairedDelimiter":return this.finalStages=this.actions.rewrapWithPairedDelimiter.getFinalStages(),this.actions.rewrapWithPairedDelimiter.run(this.getTargets(e.target),e.left,e.right);case"pasteFromClipboard":return this.actions.pasteFromClipboard.run(this.getDestinations(e.destination));case"executeCommand":return this.actions.executeCommand.run(this.getTargets(e.target),e.commandId,e.options);case"replace":return this.actions.replace.run(this.getDestinations(e.destination),e.replaceWith);case"highlight":return this.actions.highlight.run(this.getTargets(e.target),e.highlightId);case"generateSnippet":return this.actions.generateSnippet.run(this.getTargets(e.target),e.directory,e.snippetName);case"insertSnippet":return this.finalStages=this.actions.insertSnippet.getFinalStages(this.getDestinations(e.destination),e.snippetDescription),this.actions.insertSnippet.run(this.getDestinations(e.destination),e.snippetDescription);case"wrapWithSnippet":return this.finalStages=this.actions.wrapWithSnippet.getFinalStages(this.getTargets(e.target),e.snippetDescription),this.actions.wrapWithSnippet.run(this.getTargets(e.target),e.snippetDescription);case"editNew":return this.actions.editNew.run(this.getDestinations(e.destination));case"getText":return this.actions.getText.run(this.getTargets(e.target),e.options);case"parsed":return this.runAction(Bm(e.content,e.arguments));default:{let r=this.actions[e.name];if(r==null)throw new Error(`Unknown action: ${e.name}`);return this.finalStages=r.getFinalStages?.()??[],this.noAutomaticTokenExpansion=r.noAutomaticTokenExpansion??!1,r.run(this.getTargets(e.target))}}}getTargets(e){let r=this.inferenceContext.run(e);return this.pipelineRunner.run(r,{actionFinalStages:this.finalStages,noAutomaticTokenExpansion:this.noAutomaticTokenExpansion})}getDestinations(e){switch(e.type){case"list":return e.destinations.flatMap(r=>this.getDestinations(r));case"primitive":return this.getTargets(e.target).map(r=>r.toDestination(e.insertionMode));case"implicit":return this.getTargets({type:"implicit"}).map(r=>r.toDestination("to"))}}},Sv=class{constructor(e){this.debug=e;this.previousTargets=[]}run(e){let r=xv(e,this.previousTargets);return this.debug.active&&(this.debug.log("Full target:"),this.debug.log(JSON.stringify(r,null,2))),this.previousTargets.push(e),r}reset(){this.previousTargets=[]}};function yD(t,e){if(t!=null&&e!=null)throw Error("Actions may only return full targets or selections for that mark");return e!=null?e.map(ec):t}var ah=class{constructor(e,r){this.readableHatMap=e;this.mark=r}run(){let e=this.readableHatMap.getToken(this.mark.symbolColor,this.mark.character);if(e==null)throw new Error(`Couldn't find mark ${this.mark.symbolColor} '${this.mark.character}'`);return[new Ht({editor:e.editor,contentRange:e.range,isReversed:!1,hasExplicitRange:!1})]}};var sh=class{constructor(e){this.mark=e}run(){let{editorId:e,range:{start:r,end:n}}=this.mark,i=P().visibleTextEditors.find(s=>s.id===e);if(i==null)throw new Error(`Couldn't find editor '${e}'`);let o=new Z(r.line,r.character,n.line,n.character);return[new Ht({editor:i,contentRange:o,isReversed:!1,hasExplicitRange:!1})]}};var ch=class{constructor(e){this.mark=e}run(){let e=P().activeTextEditor;if(e==null)return[];let r=H5(e,this.mark.lineNumberType,this.mark.lineNumber),n=e.document.lineAt(r).range;return[hS(e,!1,n)]}},H5=(t,e,r)=>{switch(e){case"absolute":return r;case"relative":return t.selections[0].active.line+r;case"modulo100":{let i=t.visibleRanges[0].start.line,o=t.visibleRanges[t.visibleRanges.length-1].end.line,s=Math.floor(i/100)*100,l=[],u=[],m=s+r;for(;m<=o;)m>=i&&(t.visibleRanges.find(g=>m>=g.start.line&&m<=g.end.line)?l.push(m):u.push(m)),m+=100;if(l.length===1)return l[0];if(l.length+u.length>1)throw new Error("Multiple lines matching");if(u.length===1)return u[0];throw new Error("Line is not in viewport")}}};var lh=class{constructor(e){this.mark=e}run(){return[]}};var uh=class{constructor(e,r){this.markStageFactory=e;this.mark=r}run(){let e=this.markStageFactory.create(this.mark.anchor),r=this.markStageFactory.create(this.mark.active),n=e.run(),i=r.run();if(n.length!==1||i.length!==1)throw new Error("Expected single anchor and active target");return[xo(n[0],i[0],this.mark.excludeAnchor,this.mark.excludeActive)]}};var ph=class{constructor(e,r){this.storedTargets=e;this.key=r}run(){let e=this.storedTargets.get(this.key);if(e==null||e.length===0)throw Error(`No available ${this.key} marks`);return e}};var mh=class{constructor(e,r){this.targetPipelineRunner=e;this.mark=r}run(){return this.targetPipelineRunner.run(this.mark.target)}};var fh=class{constructor(e,r){this.readableHatMap=e;this.storedTargets=r;this.create=this.create.bind(this)}setPipelineRunner(e){this.targetPipelineRunner=e}create(e){switch(e.type){case"cursor":return new ks;case"that":case"source":case"keyboard":return new ph(this.storedTargets,e.type);case"decoratedSymbol":return new ah(this.readableHatMap,e);case"lineNumber":return new ch(e);case"range":return new uh(this,e);case"nothing":return new lh(e);case"target":return new mh(this.targetPipelineRunner,e);case"explicit":return new sh(e);default:{let r=e,{type:n}=e;throw new Error(`Unknown mark: ${n}`)}}}};async function TD(t,e,r,n,i,o,s,l,u,m){r.active&&(r.log("command:"),r.log(JSON.stringify(m,null,2)));let d=Yx(m),g=await n.getReadableMap(d.usePrePhraseSnapshot),y=V5(t,e,s,r,o,g,i,l);for(let E of u)y=E.wrapCommandRunner(g,y);let x=await y.run(d);return await B5(m,x)}async function B5(t,e){if(Yo(t))return e;if("returnValue"in e)return e.returnValue}function V5(t,e,r,n,i,o,s,l){let u=new Js(r,i,new Us(r)),m=new fh(o,i),d=new xd(u,m);return m.setPipelineRunner(d),new oh(e,n,i,d,new Jg(t,s,l,u))}function xD(t){return Kk(t)?al(t.type).replace("."," "):t.type==="surroundingPair"?`Matching pair of ${al(t.delimiter)}`:t.type==="customRegex"?`Regex \`${t.regex}\``:"Unknown scope type"}var dh=class{constructor(e){this.customSpokenFormGenerator=e;this.listeners=[];this.disposable=e.onDidChangeCustomSpokenForms(()=>this.onChange()),this.onDidChangeScopeInfo=this.onDidChangeScopeInfo.bind(this),this.getScopeTypeInfo=this.getScopeTypeInfo.bind(this),this.updateScopeTypeInfos()}onDidChangeScopeInfo(e){return e(this.getScopeTypeInfos()),this.listeners.push(e),{dispose:()=>{mr(this.listeners,e)}}}async onChange(){this.updateScopeTypeInfos(),this.listeners.forEach(e=>e(this.scopeInfos))}updateScopeTypeInfos(){let e=[...Qo.filter(r=>r!=="instance").map(r=>({type:r})),...Sm.map(r=>({type:"surroundingPair",delimiter:r})),...this.customSpokenFormGenerator.getCustomRegexScopeTypes()];this.scopeInfos=e.map(r=>this.getScopeTypeInfo(r))}getScopeTypeInfos(){return this.scopeInfos}getScopeTypeInfo(e){return{scopeType:e,spokenForm:this.customSpokenFormGenerator.scopeTypeToSpokenForm(e),humanReadableName:xD(e),isLanguageSpecific:W5(e)}}dispose(){this.disposable.dispose()}};function W5(t){switch(t.type){case"string":case"argumentOrParameter":case"argumentList":case"anonymousFunction":case"attribute":case"branch":case"class":case"className":case"collectionItem":case"collectionKey":case"command":case"comment":case"private.fieldAccess":case"functionCall":case"functionCallee":case"functionName":case"ifStatement":case"instance":case"interior":case"list":case"map":case"name":case"namedFunction":case"regularExpression":case"statement":case"type":case"value":case"condition":case"section":case"sectionLevelOne":case"sectionLevelTwo":case"sectionLevelThree":case"sectionLevelFour":case"sectionLevelFive":case"sectionLevelSix":case"selector":case"private.switchStatementSubject":case"unit":case"xmlBothTags":case"xmlElement":case"xmlEndTag":case"xmlStartTag":case"part":case"chapter":case"subSection":case"subSubSection":case"namedParagraph":case"subParagraph":case"environment":case"textFragment":case"disqualifyDelimiter":case"pairDelimiter":return!0;case"character":case"word":case"token":case"identifier":case"line":case"sentence":case"paragraph":case"boundedParagraph":case"document":case"nonWhitespaceSequence":case"boundedNonWhitespaceSequence":case"url":case"notebookCell":case"surroundingPair":case"surroundingPairInterior":case"customRegex":case"glyph":return!1;case"oneOf":throw Error(`Can't decide whether scope type ${JSON.stringify(t,void 0,3)} is language-specific`)}}function vv(t,e,r){if(!r)return t.document.range;let n=t.visibleRanges.reduce((s,l)=>s.union(l));n=t.document.range.intersection(n.with(n.start.translate(-10),n.end.translate(10)));let i=em(Array.from(e.generateScopes(t,n.start,"forward",{containment:"required"})))?.domain??n,o=em(Array.from(e.generateScopes(t,n.end,"forward",{containment:"required"})))?.domain??n;return i.union(o)}function ba(t){return{contentRange:t.contentRange,removalRange:t.getRemovalRange(),removalHighlightRange:t.getRemovalHighlightRange(),leadingDelimiter:SD(t.getLeadingDelimiterTarget()),trailingDelimiter:SD(t.getTrailingDelimiterTarget()),interior:t.getInterior()?.map(ba),boundary:t.getBoundary()?.map(ba),insertionDelimiter:t.insertionDelimiter}}function SD(t){return t!=null?ba(t):void 0}function vD(t,e,r,n,i){let o={multipleTargets:!0};return Ds(e.generateScopes(t,n.start,"forward",{includeDescendantScopes:!0,distalPosition:n.end}),s=>({domain:s.domain,ranges:s.getTargets(!1).map(l=>({range:l.contentRange,targets:i?$5(r,l,o).map(ba):void 0}))}))}function $5(t,e,r){try{return t.run(e,r)}catch(n){if(n.name==="NoContainingScopeError")return[];throw n}}function bD(t,e,r){return Ds(e.generateScopes(t,r.start,"forward",{includeDescendantScopes:!0,distalPosition:r.end}),n=>({domain:n.domain,targets:n.getTargets(!1).map(ba)}))}var gh=class{constructor(e,r){this.scopeHandlerFactory=e;this.modifierStageFactory=r;this.provideScopeRanges=this.provideScopeRanges.bind(this),this.provideIterationScopeRanges=this.provideIterationScopeRanges.bind(this)}provideScopeRanges(e,{scopeType:r,visibleOnly:n}){let i=this.scopeHandlerFactory.maybeCreate(r,e.document.languageId);return i==null?[]:bD(e,i,vv(e,i,n))}provideIterationScopeRanges(e,{scopeType:r,visibleOnly:n,includeNestedTargets:i}){let{languageId:o}=e.document,s=this.scopeHandlerFactory.maybeCreate(r,o);if(s==null)return[];let l=this.scopeHandlerFactory.maybeCreate(s.iterationScopeType,o);return l==null?[]:vD(e,l,this.modifierStageFactory.create({type:"everyScope",scopeType:r}),vv(e,s,n),i)}};var hh=class{constructor(e,r){this.scopeRangeProvider=r;this.disposables=[];this.listeners=[];this.onChange=this.onChange.bind(this),this.onDidChangeScopeRanges=this.onDidChangeScopeRanges.bind(this),this.onDidChangeIterationScopeRanges=this.onDidChangeIterationScopeRanges.bind(this);let n=new Zn(P().configuration,()=>this.onChange());this.disposables.push(P().onDidChangeVisibleTextEditors(n.run),P().onDidOpenTextDocument(n.run),P().onDidCloseTextDocument(n.run),P().onDidChangeTextDocument(n.run),P().onDidChangeTextEditorVisibleRanges(n.run),e.onDidChangeDefinition(this.onChange),n)}onDidChangeScopeRanges(e,r){let n=()=>{P().visibleTextEditors.forEach(i=>{let o;try{o=this.scopeRangeProvider.provideScopeRanges(i,r)}catch(s){if(gt(P().messages,"ScopeRangeWatcher.provide",s.message),o=[],P().runMode==="test")throw s}e(i,o)})};return this.listeners.push(n),n(),{dispose:()=>{mr(this.listeners,n)}}}onDidChangeIterationScopeRanges(e,r){let n=()=>{P().visibleTextEditors.forEach(i=>{e(i,this.scopeRangeProvider.provideIterationScopeRanges(i,r))})};return this.listeners.push(n),n(),{dispose:()=>{mr(this.listeners,n)}}}onChange(){this.listeners.forEach(e=>e())}dispose(){this.disposables.forEach(({dispose:e})=>{try{e()}catch{}})}};var yh=class{constructor(e){this.scopeHandlerFactory=e;this.getScopeSupport=this.getScopeSupport.bind(this),this.getIterationScopeSupport=this.getIterationScopeSupport.bind(this)}getScopeSupport(e,r){let{languageId:n}=e.document,i=this.scopeHandlerFactory.maybeCreate(r,n);return i==null?2:wD(e,i)?0:1}getIterationScopeSupport(e,r){let{languageId:n}=e.document,i=this.scopeHandlerFactory.maybeCreate(r,n);if(i==null)return 2;let o=this.scopeHandlerFactory.maybeCreate(i.iterationScopeType,n);return o==null?2:wD(e,o)?0:1}};function wD(t,e){return!Zk(e.generateScopes(t,new Re(0,0),"forward"))}var Th=class{constructor(e,r,n){this.scopeSupportChecker=r;this.scopeInfoProvider=n;this.listeners=[];this.onChange=this.onChange.bind(this),this.onDidChangeScopeSupport=this.onDidChangeScopeSupport.bind(this);let i=new Zn(P().configuration,()=>this.onChange());this.disposable=Yk(P().onDidOpenTextDocument(i.run),P().onDidCloseTextDocument(i.run),P().onDidChangeActiveTextEditor(i.run),P().onDidChangeTextDocument(i.run),e.onDidChangeDefinition(i.run),this.scopeInfoProvider.onDidChangeScopeInfo(this.onChange),i)}onDidChangeScopeSupport(e){return e(this.getSupportLevels()),this.listeners.push(e),{dispose:()=>{mr(this.listeners,e)}}}onChange(){if(this.listeners.length===0)return;let e=this.getSupportLevels();this.listeners.forEach(r=>r(e))}getSupportLevels(){let e=P().activeTextEditor,r=e==null?()=>2:o=>this.scopeSupportChecker.getScopeSupport(e,o),n=e==null?()=>2:o=>this.scopeSupportChecker.getIterationScopeSupport(e,o);return this.scopeInfoProvider.getScopeTypeInfos().map(o=>({...o,support:r(o.scopeType),iterationScopeSupport:n(o.scopeType)}))}dispose(){this.disposable.dispose()}};async function ED({ide:t,hats:e,treeSitterQueryProvider:r,treeSitter:n=new xf,commandServerApi:i=new df,talonSpokenForms:o=new Tf,snippets:s=new yf}){zm(t);let l=new sf(t),u=new ff,m=new Gm,d=new af(t,m),g=new bf(o),y=e!=null?new pf(u,l,e,i):new gf;y.allocateHats();let x=r?await ld.create(t,n,r):new hf;t.disposeOnExit(u,x,y,l,d);let E=[],w,H=W=>(w=W,TD(n,i,l,y,s,m,x,u,E,W));return{commandApi:{runCommand(W){return H(W)},runCommandSafe(...W){return H(vm(W))},repeatPreviousCommand(){if(w==null)throw new Error("No previous command");return H(w)}},scopeProvider:z5(x,m,g),customSpokenFormGenerator:g,storedTargets:m,hatTokenMap:y,injectIde:zm,addCommandRunnerDecorator:W=>{E.push(W)}}}function z5(t,e,r){let n=new Us(t),i=new gh(n,new Js(t,e,n)),o=new hh(t,i),s=new yh(n),l=new dh(r),u=new Th(t,s,l);return{provideScopeRanges:i.provideScopeRanges,provideIterationScopeRanges:i.provideIterationScopeRanges,onDidChangeScopeRanges:o.onDidChangeScopeRanges,onDidChangeIterationScopeRanges:o.onDidChangeIterationScopeRanges,getScopeSupport:s.getScopeSupport,getIterationScopeSupport:s.getIterationScopeSupport,onDidChangeScopeSupport:u.onDidChangeScopeSupport,getScopeInfo:l.getScopeTypeInfo,onDidChangeScopeInfo:l.onDidChangeScopeInfo}}function _D(t,e){switch(e.type){case"UntypedTarget":return new Ht({editor:t,isReversed:e.isReversed,contentRange:pm(e.contentRange),hasExplicitRange:e.hasExplicitRange});case"LineTarget":return new dr({editor:t,isReversed:e.isReversed,contentRange:pm(e.contentRange)});default:throw Error(`Unsupported target type ${e.type}`)}}var HFe=Symbol("unused");var eu=class{constructor(e){this.position=e}},BFe={$0:new eu(0),$1:new eu(1),$2:new eu(2)};var RD=require("node:events"),xh=class{constructor(){this.apis=new Map,this.commands=new Map,this.eventEmitter=new RD.EventEmitter}registerExtensionApi(e,r){this.apis.set(e,r)}getExtensionApi(e){return this.apis.get(e)}registerCommand(e,r){this.commands.set(e,r)}async executeCommand(e,...r){return await this.commands.get(e)(...r)}onEvent(e,r){return this.eventEmitter.on(e,r)}emitEvent(e,...r){return this.eventEmitter.emit(e,...r)}};function qr(){return global._neovimRegistry==null&&(global._neovimRegistry=new xh),global._neovimRegistry}var kD="pokey.cursorless";async function Sh(t,e){let r='return require("cursorless").buffer_get_selection()',[n,i,o,s,l]=await e.executeLua(r,[]),u;return l===!0?u=[new ut(new Re(o-1,s-1),new Re(n-1,i-1))]:u=[new ut(new Re(n-1,i-1),new Re(o-1,s-1))],console.debug(`bufferGetSelections(): selections=(${u[0].start.line}, ${u[0].start.character}), (${u[0].end.line}, ${u[0].end.character}) neovim=(${n},${i}),(${o},${s}),reverse=${l}`),u}async function AD(t,e){if(e.length!==1)throw new Error("bufferSetSelections() only supports one selection");let r=`return require("cursorless").select_range(${e[0].start.line+1}, ${e[0].start.character}, ${e[0].end.line+1}, ${e[0].end.character})`;console.debug(`bufferSetSelections() selections=(${e[0].start.line},${e[0].start.character}),(${e[0].end.line},${e[0].end.character}) luaCode="${r}"`),await t.executeLua(r,[])}async function PD(t,e,r){let n='return require("cursorless").window_get_visible_lines()',[i,o]=await e.executeLua(n,[]),s=new Z(new Re(i-1,0),new Re(o-1,r[o-1].length-1));return console.debug(`windowGetVisibleRanges(): range=(${s.start.line}, ${s.start.character}), (${s.end.line}, ${s.end.character})`),[s]}async function LD(t){return await t.executeLua('return require("cursorless.utils").cursorless_nvim_path()',[])}async function vh(t,e){await e.callFunction("setreg",["*",t])}async function DD(t){return await t.callFunction("getreg",["*"])}async function MD(t){await t.executeLua('return require("cursorless.utils").paste()',[])}async function FD(t){await t.executeLua('return require("cursorless.utils").mode_switch_nt()',[])}async function CD(t){await t.executeLua('return require("cursorless.utils").mode_switch_t()',[])}async function ID(t,e){let r=`vim.notify("${e}")`;await t.executeLua(r,[])}var q5={clipboardCopy:{acceptsLocation:!1},clipboardPaste:!0,toggleLineComment:void 0,indentLine:void 0,outdentLine:void 0,rename:void 0,quickFix:void 0,revealDefinition:void 0,revealTypeDefinition:void 0,showHover:void 0,showDebugHover:void 0,extractVariable:void 0,fold:void 0,highlight:{acceptsLocation:!0},unfold:void 0,showReferences:void 0,insertLineAfter:void 0,gitAccept:void 0,gitRevert:void 0,gitStage:void 0,gitUnstage:void 0},bh=class{constructor(){this.commands=q5}};var tu=class{constructor(e){this.client=e}async readText(){return await DD(this.client)}async writeText(e){return await vh(e,this.client)}};var wh=an(bv(),1);var nu=class{constructor(){this.notifier=new tr;this.mocks={...om};this.scopes=[];this.onDidChangeConfiguration=this.notifier.registerListener;this.onDidChangeConfiguration=this.onDidChangeConfiguration.bind(this)}getOwnConfiguration(e,r){if(r!=null){for(let{scope:n,values:i}of this.scopes)if(G5(n,r))return(0,wh.get)(i,e)??(0,wh.get)(this.mocks,e)}return(0,wh.get)(this.mocks,e)}mockConfiguration(e,r){this.mocks[e]=r,this.notifier.notifyListeners()}mockConfigurationScope(e,r,n=!1){this.scopes.push({scope:e,values:r}),n||this.notifier.notifyListeners()}};function G5(t,e){return t.languageId===e.languageId}async function wv(t,e,r,n){console.debug("neovimEdit() [unsorted]:");for(let s of n)console.debug(`	range=${JSON.stringify(s.range)}, text='${s.text}', isReplace=${s.isReplace}`);n.sort((s,l)=>(OD(s)||ND(s))&&(OD(l)||ND(l))?1:s.range.start.line===l.range.start.line?l.range.start.character-s.range.start.character:l.range.start.line-s.range.start.line),console.debug("neovimEdit() [sorted]:");for(let s of n)console.debug(`	range=${JSON.stringify(s.range)}, text='${s.text}', isReplace=${s.isReplace}`);let i=e.getTextDocument(await t.window.buffer),o=[];for(let s of n)o.push({range:s.range,rangeOffset:i.offsetAt(s.range.start),rangeLength:i.offsetAt(s.range.end)-i.offsetAt(s.range.start),text:s.text});qr().emitEvent("onDidChangeTextDocument",{document:i,contentChanges:o});for(let s of n){let{range:l,text:u,isReplace:m}=s;u===""?await UD(t,l):l.isEmpty&&!m?await HD(t,l.start,u):await K5(t,l,u)}return await e.updateTextEditor(),!0}async function UD(t,e){console.debug(`neovimDelete(): range=${JSON.stringify(e)}`);let r=await t.window.buffer,n=(await r.getLines({start:e.end.line,end:e.end.line+1,strictIndexing:!0}))[0],i=n.slice(e.end.character);if(e.start.line===e.end.line){let l=n.slice(0,e.start.character)+i;await r.setLines(l,{start:e.start.line,end:e.start.line+1,strictIndexing:!0});return}if(e.start.character===0){await r.setLines(i,{start:e.start.line,end:e.end.line+1,strictIndexing:!0});return}let o=(await r.getLines({start:e.start.line,end:e.start.line+1,strictIndexing:!0}))[0],s=o.slice(0,e.start.character);if(e.start.character<=o.length){await r.setLines(s+i,{start:e.start.line,end:e.end.line+1,strictIndexing:!0});return}await r.setLines([s,i],{start:e.start.line,end:e.end.line+1,strictIndexing:!0})}async function HD(t,e,r){console.debug(`neovimInsert(): position=${JSON.stringify(e)}, text='${r}'`);let n=r.replace(/(?:\r\n|\r|\n)/g,`
`).split(`
`),i=await t.window.buffer,o=(await i.getLines({start:e.line,end:e.line+1,strictIndexing:!0}))[0],s=o.slice(0,e.character),l=o.slice(e.character);if(n.length===1){let d=s+n[0]+l;await i.setLines(d,{start:e.line,end:e.line+1,strictIndexing:!0});return}let u=s+n[0],m=n[n.length-1]+l;await i.setLines([u,...n.slice(1,n.length-1),m],{start:e.line,end:e.line+1,strictIndexing:!0})}async function K5(t,e,r){console.debug(`neovimReplace(): range=${JSON.stringify(e)}, text='${r}'`),await UD(t,e),await HD(t,e.start,r)}function OD(t){return t.range.isEmpty&&!t.isReplace}function ND(t){return t.text!==""&&!!(!t.range.isEmpty||t.isReplace)}function BD(t){return qr().onEvent("onDidChangeTextDocument",t),WD()}function VD(t,e,r){return qr().onEvent("onDidOpenTextDocument",t),WD()}function WD(){return{dispose(){}}}var iu=class{constructor(){this.data={...am}}get(e){return this.data[e]}set(e,r){return this.data[e]=r,Promise.resolve()}};var BF=an(bv(),1);var ou=class{async showMessage(e,r,n,...i){}};async function $D(t,e){let r=e.activeTextEditor,n=await t.window,i=await Sh(n,t),o=r.document.getText(i[0]);await vh(o,t)}async function jD(t,e){await MD(t)}var Eh=class{constructor(e,r,n,i,o,s,l){this.id=e;this.client=r;this.neovimIDE=n;this.window=i;this._document=o,this._selections=l,this._visibleRanges=s}get document(){return this._document}updateDocument(e,r,n,i){if(n)this._document=n;else if(i)this._document.update(i);else throw Error("updateDocument(): invalid arguments");return this._selections=r,this._visibleRanges=e,this._document}get selections(){return this._selections}async setSelections(e){this._selections=e,await AD(this.client,e)}get visibleRanges(){return this._visibleRanges}get options(){throw Error("get options Not implemented")}set options(e){throw Error("set options Not implemented")}get isActive(){return!0}isEqual(e){return this.id===e.id}async revealRange(e){}revealLine(e,r){throw Error("revealLine Not implemented")}async edit(e){return await wv(this.client,this.neovimIDE,this.window,e)}focus(){return Promise.resolve()}editNewNotebookCellAbove(){throw Error("editNewNotebookCellAbove Not implemented")}editNewNotebookCellBelow(){throw Error("editNewNotebookCellBelow Not implemented")}openLink(e,r){throw Error("openLink Not implemented")}fold(e){throw Error("fold Not implemented")}unfold(e){throw Error("unfold Not implemented")}toggleBreakpoint(e){throw Error("toggleBreakpoint Not implemented")}async toggleLineComment(e){throw Error("toggleLineComment Not implemented")}async clipboardCopy(e){await $D(this.client,this.neovimIDE)}async clipboardPaste(){await jD(this.client,this.neovimIDE)}async indentLine(e){throw Error("indentLine Not implemented")}async outdentLine(e){throw Error("outdentLine Not implemented")}async insertLineAfter(e){throw Error("insertLineAfter Not implemented")}insertSnippet(e,r){throw Error("insertSnippet Not implemented")}async rename(e){throw Error("rename Not implemented")}async showReferences(e){throw Error("showReferences Not implemented")}async quickFix(e){throw Error("quickFix Not implemented")}async revealDefinition(e){throw Error("revealDefinition Not implemented")}async revealTypeDefinition(e){throw Error("revealTypeDefinition Not implemented")}async showHover(e){throw Error("showHover Not implemented")}async showDebugHover(e){throw Error("showDebugHover Not implemented")}async extractVariable(e){throw Error("extractVariable Not implemented")}async gitAccept(e){throw Error("gitAccept Not implemented")}async gitRevert(e){throw Error("gitRevert Not implemented")}async gitStage(e){throw Error("gitStage Not implemented")}async gitUnstage(e){throw Error("gitUnstage Not implemented")}};var zb=an(require("path"),1);var zD;(()=>{"use strict";var t={975:O=>{function L(C){if(typeof C!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(C))}function q(C,U){for(var z,J="",Y=0,ne=-1,we=0,_e=0;_e<=C.length;++_e){if(_e<C.length)z=C.charCodeAt(_e);else{if(z===47)break;z=47}if(z===47){if(!(ne===_e-1||we===1))if(ne!==_e-1&&we===2){if(J.length<2||Y!==2||J.charCodeAt(J.length-1)!==46||J.charCodeAt(J.length-2)!==46){if(J.length>2){var Ye=J.lastIndexOf("/");if(Ye!==J.length-1){Ye===-1?(J="",Y=0):Y=(J=J.slice(0,Ye)).length-1-J.lastIndexOf("/"),ne=_e,we=0;continue}}else if(J.length===2||J.length===1){J="",Y=0,ne=_e,we=0;continue}}U&&(J.length>0?J+="/..":J="..",Y=2)}else J.length>0?J+="/"+C.slice(ne+1,_e):J=C.slice(ne+1,_e),Y=_e-ne-1;ne=_e,we=0}else z===46&&we!==-1?++we:we=-1}return J}var X={resolve:function(){for(var C,U="",z=!1,J=arguments.length-1;J>=-1&&!z;J--){var Y;J>=0?Y=arguments[J]:(C===void 0&&(C=process.cwd()),Y=C),L(Y),Y.length!==0&&(U=Y+"/"+U,z=Y.charCodeAt(0)===47)}return U=q(U,!z),z?U.length>0?"/"+U:"/":U.length>0?U:"."},normalize:function(C){if(L(C),C.length===0)return".";var U=C.charCodeAt(0)===47,z=C.charCodeAt(C.length-1)===47;return(C=q(C,!U)).length!==0||U||(C="."),C.length>0&&z&&(C+="/"),U?"/"+C:C},isAbsolute:function(C){return L(C),C.length>0&&C.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var C,U=0;U<arguments.length;++U){var z=arguments[U];L(z),z.length>0&&(C===void 0?C=z:C+="/"+z)}return C===void 0?".":X.normalize(C)},relative:function(C,U){if(L(C),L(U),C===U||(C=X.resolve(C))===(U=X.resolve(U)))return"";for(var z=1;z<C.length&&C.charCodeAt(z)===47;++z);for(var J=C.length,Y=J-z,ne=1;ne<U.length&&U.charCodeAt(ne)===47;++ne);for(var we=U.length-ne,_e=Y<we?Y:we,Ye=-1,Ue=0;Ue<=_e;++Ue){if(Ue===_e){if(we>_e){if(U.charCodeAt(ne+Ue)===47)return U.slice(ne+Ue+1);if(Ue===0)return U.slice(ne+Ue)}else Y>_e&&(C.charCodeAt(z+Ue)===47?Ye=Ue:Ue===0&&(Ye=0));break}var yt=C.charCodeAt(z+Ue);if(yt!==U.charCodeAt(ne+Ue))break;yt===47&&(Ye=Ue)}var jt="";for(Ue=z+Ye+1;Ue<=J;++Ue)Ue!==J&&C.charCodeAt(Ue)!==47||(jt.length===0?jt+="..":jt+="/..");return jt.length>0?jt+U.slice(ne+Ye):(ne+=Ye,U.charCodeAt(ne)===47&&++ne,U.slice(ne))},_makeLong:function(C){return C},dirname:function(C){if(L(C),C.length===0)return".";for(var U=C.charCodeAt(0),z=U===47,J=-1,Y=!0,ne=C.length-1;ne>=1;--ne)if((U=C.charCodeAt(ne))===47){if(!Y){J=ne;break}}else Y=!1;return J===-1?z?"/":".":z&&J===1?"//":C.slice(0,J)},basename:function(C,U){if(U!==void 0&&typeof U!="string")throw new TypeError('"ext" argument must be a string');L(C);var z,J=0,Y=-1,ne=!0;if(U!==void 0&&U.length>0&&U.length<=C.length){if(U.length===C.length&&U===C)return"";var we=U.length-1,_e=-1;for(z=C.length-1;z>=0;--z){var Ye=C.charCodeAt(z);if(Ye===47){if(!ne){J=z+1;break}}else _e===-1&&(ne=!1,_e=z+1),we>=0&&(Ye===U.charCodeAt(we)?--we==-1&&(Y=z):(we=-1,Y=_e))}return J===Y?Y=_e:Y===-1&&(Y=C.length),C.slice(J,Y)}for(z=C.length-1;z>=0;--z)if(C.charCodeAt(z)===47){if(!ne){J=z+1;break}}else Y===-1&&(ne=!1,Y=z+1);return Y===-1?"":C.slice(J,Y)},extname:function(C){L(C);for(var U=-1,z=0,J=-1,Y=!0,ne=0,we=C.length-1;we>=0;--we){var _e=C.charCodeAt(we);if(_e!==47)J===-1&&(Y=!1,J=we+1),_e===46?U===-1?U=we:ne!==1&&(ne=1):U!==-1&&(ne=-1);else if(!Y){z=we+1;break}}return U===-1||J===-1||ne===0||ne===1&&U===J-1&&U===z+1?"":C.slice(U,J)},format:function(C){if(C===null||typeof C!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof C);return function(U,z){var J=z.dir||z.root,Y=z.base||(z.name||"")+(z.ext||"");return J?J===z.root?J+Y:J+"/"+Y:Y}(0,C)},parse:function(C){L(C);var U={root:"",dir:"",base:"",ext:"",name:""};if(C.length===0)return U;var z,J=C.charCodeAt(0),Y=J===47;Y?(U.root="/",z=1):z=0;for(var ne=-1,we=0,_e=-1,Ye=!0,Ue=C.length-1,yt=0;Ue>=z;--Ue)if((J=C.charCodeAt(Ue))!==47)_e===-1&&(Ye=!1,_e=Ue+1),J===46?ne===-1?ne=Ue:yt!==1&&(yt=1):ne!==-1&&(yt=-1);else if(!Ye){we=Ue+1;break}return ne===-1||_e===-1||yt===0||yt===1&&ne===_e-1&&ne===we+1?_e!==-1&&(U.base=U.name=we===0&&Y?C.slice(1,_e):C.slice(we,_e)):(we===0&&Y?(U.name=C.slice(1,ne),U.base=C.slice(1,_e)):(U.name=C.slice(we,ne),U.base=C.slice(we,_e)),U.ext=C.slice(ne,_e)),we>0?U.dir=C.slice(0,we-1):Y&&(U.dir="/"),U},sep:"/",delimiter:":",win32:null,posix:null};X.posix=X,O.exports=X}},e={};function r(O){var L=e[O];if(L!==void 0)return L.exports;var q=e[O]={exports:{}};return t[O](q,q.exports,r),q.exports}r.d=(O,L)=>{for(var q in L)r.o(L,q)&&!r.o(O,q)&&Object.defineProperty(O,q,{enumerable:!0,get:L[q]})},r.o=(O,L)=>Object.prototype.hasOwnProperty.call(O,L),r.r=O=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(O,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(O,"__esModule",{value:!0})};var n={};let i;r.r(n),r.d(n,{URI:()=>y,Utils:()=>B}),typeof process=="object"?i=process.platform==="win32":typeof navigator=="object"&&(i=navigator.userAgent.indexOf("Windows")>=0);let o=/^\w[\w\d+.-]*$/,s=/^\//,l=/^\/\//;function u(O,L){if(!O.scheme&&L)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${O.authority}", path: "${O.path}", query: "${O.query}", fragment: "${O.fragment}"}`);if(O.scheme&&!o.test(O.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(O.path){if(O.authority){if(!s.test(O.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(l.test(O.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}let m="",d="/",g=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class y{static isUri(L){return L instanceof y||!!L&&typeof L.authority=="string"&&typeof L.fragment=="string"&&typeof L.path=="string"&&typeof L.query=="string"&&typeof L.scheme=="string"&&typeof L.fsPath=="string"&&typeof L.with=="function"&&typeof L.toString=="function"}scheme;authority;path;query;fragment;constructor(L,q,X,C,U,z=!1){typeof L=="object"?(this.scheme=L.scheme||m,this.authority=L.authority||m,this.path=L.path||m,this.query=L.query||m,this.fragment=L.fragment||m):(this.scheme=function(J,Y){return J||Y?J:"file"}(L,z),this.authority=q||m,this.path=function(J,Y){switch(J){case"https":case"http":case"file":Y?Y[0]!==d&&(Y=d+Y):Y=d}return Y}(this.scheme,X||m),this.query=C||m,this.fragment=U||m,u(this,z))}get fsPath(){return G(this,!1)}with(L){if(!L)return this;let{scheme:q,authority:X,path:C,query:U,fragment:z}=L;return q===void 0?q=this.scheme:q===null&&(q=m),X===void 0?X=this.authority:X===null&&(X=m),C===void 0?C=this.path:C===null&&(C=m),U===void 0?U=this.query:U===null&&(U=m),z===void 0?z=this.fragment:z===null&&(z=m),q===this.scheme&&X===this.authority&&C===this.path&&U===this.query&&z===this.fragment?this:new E(q,X,C,U,z)}static parse(L,q=!1){let X=g.exec(L);return X?new E(X[2]||m,be(X[4]||m),be(X[5]||m),be(X[7]||m),be(X[9]||m),q):new E(m,m,m,m,m)}static file(L){let q=m;if(i&&(L=L.replace(/\\/g,d)),L[0]===d&&L[1]===d){let X=L.indexOf(d,2);X===-1?(q=L.substring(2),L=d):(q=L.substring(2,X),L=L.substring(X)||d)}return new E("file",q,L,m,m)}static from(L){let q=new E(L.scheme,L.authority,L.path,L.query,L.fragment);return u(q,!0),q}toString(L=!1){return ie(this,L)}toJSON(){return this}static revive(L){if(L){if(L instanceof y)return L;{let q=new E(L);return q._formatted=L.external,q._fsPath=L._sep===x?L.fsPath:null,q}}return L}}let x=i?1:void 0;class E extends y{_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=G(this,!1)),this._fsPath}toString(L=!1){return L?ie(this,!0):(this._formatted||(this._formatted=ie(this,!1)),this._formatted)}toJSON(){let L={$mid:1};return this._fsPath&&(L.fsPath=this._fsPath,L._sep=x),this._formatted&&(L.external=this._formatted),this.path&&(L.path=this.path),this.scheme&&(L.scheme=this.scheme),this.authority&&(L.authority=this.authority),this.query&&(L.query=this.query),this.fragment&&(L.fragment=this.fragment),L}}let w={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function H(O,L,q){let X,C=-1;for(let U=0;U<O.length;U++){let z=O.charCodeAt(U);if(z>=97&&z<=122||z>=65&&z<=90||z>=48&&z<=57||z===45||z===46||z===95||z===126||L&&z===47||q&&z===91||q&&z===93||q&&z===58)C!==-1&&(X+=encodeURIComponent(O.substring(C,U)),C=-1),X!==void 0&&(X+=O.charAt(U));else{X===void 0&&(X=O.substr(0,U));let J=w[z];J!==void 0?(C!==-1&&(X+=encodeURIComponent(O.substring(C,U)),C=-1),X+=J):C===-1&&(C=U)}}return C!==-1&&(X+=encodeURIComponent(O.substring(C))),X!==void 0?X:O}function W(O){let L;for(let q=0;q<O.length;q++){let X=O.charCodeAt(q);X===35||X===63?(L===void 0&&(L=O.substr(0,q)),L+=w[X]):L!==void 0&&(L+=O[q])}return L!==void 0?L:O}function G(O,L){let q;return q=O.authority&&O.path.length>1&&O.scheme==="file"?`//${O.authority}${O.path}`:O.path.charCodeAt(0)===47&&(O.path.charCodeAt(1)>=65&&O.path.charCodeAt(1)<=90||O.path.charCodeAt(1)>=97&&O.path.charCodeAt(1)<=122)&&O.path.charCodeAt(2)===58?L?O.path.substr(1):O.path[1].toLowerCase()+O.path.substr(2):O.path,i&&(q=q.replace(/\//g,"\\")),q}function ie(O,L){let q=L?W:H,X="",{scheme:C,authority:U,path:z,query:J,fragment:Y}=O;if(C&&(X+=C,X+=":"),(U||C==="file")&&(X+=d,X+=d),U){let ne=U.indexOf("@");if(ne!==-1){let we=U.substr(0,ne);U=U.substr(ne+1),ne=we.lastIndexOf(":"),ne===-1?X+=q(we,!1,!1):(X+=q(we.substr(0,ne),!1,!1),X+=":",X+=q(we.substr(ne+1),!1,!0)),X+="@"}U=U.toLowerCase(),ne=U.lastIndexOf(":"),ne===-1?X+=q(U,!1,!0):(X+=q(U.substr(0,ne),!1,!0),X+=U.substr(ne))}if(z){if(z.length>=3&&z.charCodeAt(0)===47&&z.charCodeAt(2)===58){let ne=z.charCodeAt(1);ne>=65&&ne<=90&&(z=`/${String.fromCharCode(ne+32)}:${z.substr(3)}`)}else if(z.length>=2&&z.charCodeAt(1)===58){let ne=z.charCodeAt(0);ne>=65&&ne<=90&&(z=`${String.fromCharCode(ne+32)}:${z.substr(2)}`)}X+=q(z,!0,!1)}return J&&(X+="?",X+=q(J,!1,!1)),Y&&(X+="#",X+=L?Y:H(Y,!1,!1)),X}function se(O){try{return decodeURIComponent(O)}catch{return O.length>3?O.substr(0,3)+se(O.substr(3)):O}}let ge=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function be(O){return O.match(ge)?O.replace(ge,L=>se(L)):O}var kt=r(975);let Tr=kt.posix||kt,xr="/";var B;(function(O){O.joinPath=function(L,...q){return L.with({path:Tr.join(L.path,...q)})},O.resolvePath=function(L,...q){let X=L.path,C=!1;X[0]!==xr&&(X=xr+X,C=!0);let U=Tr.resolve(X,...q);return C&&U[0]===xr&&!L.authority&&(U=U.substring(1)),L.with({path:U})},O.dirname=function(L){if(L.path.length===0||L.path===xr)return L;let q=Tr.dirname(L.path);return q.length===1&&q.charCodeAt(0)===46&&(q=""),L.with({path:q})},O.basename=function(L){return Tr.basename(L.path)},O.extname=function(L){return Tr.extname(L.path)}})(B||(B={})),zD=n})();var{URI:qD,Utils:UCe}=zD;var Ev=(t,e,r)=>{let n=t instanceof RegExp?GD(t,r):t,i=e instanceof RegExp?GD(e,r):e,o=n!==null&&i!=null&&Q5(n,i,r);return o&&{start:o[0],end:o[1],pre:r.slice(0,o[0]),body:r.slice(o[0]+n.length,o[1]),post:r.slice(o[1]+i.length)}},GD=(t,e)=>{let r=e.match(t);return r?r[0]:null},Q5=(t,e,r)=>{let n,i,o,s,l,u=r.indexOf(t),m=r.indexOf(e,u+1),d=u;if(u>=0&&m>0){if(t===e)return[u,m];for(n=[],o=r.length;d>=0&&!l;){if(d===u)n.push(d),u=r.indexOf(t,d+1);else if(n.length===1){let g=n.pop();g!==void 0&&(l=[g,m])}else i=n.pop(),i!==void 0&&i<o&&(o=i,s=m),m=r.indexOf(e,d+1);d=u<m&&u>=0?u:m}n.length&&s!==void 0&&(l=[o,s])}return l};var KD="\0SLASH"+Math.random()+"\0",QD="\0OPEN"+Math.random()+"\0",Rv="\0CLOSE"+Math.random()+"\0",YD="\0COMMA"+Math.random()+"\0",ZD="\0PERIOD"+Math.random()+"\0",Y5=new RegExp(KD,"g"),Z5=new RegExp(QD,"g"),X5=new RegExp(Rv,"g"),J5=new RegExp(YD,"g"),eQ=new RegExp(ZD,"g"),tQ=/\\\\/g,rQ=/\\{/g,nQ=/\\}/g,iQ=/\\,/g,oQ=/\\./g;function _v(t){return isNaN(t)?t.charCodeAt(0):parseInt(t,10)}function aQ(t){return t.replace(tQ,KD).replace(rQ,QD).replace(nQ,Rv).replace(iQ,YD).replace(oQ,ZD)}function sQ(t){return t.replace(Y5,"\\").replace(Z5,"{").replace(X5,"}").replace(J5,",").replace(eQ,".")}function XD(t){if(!t)return[""];let e=[],r=Ev("{","}",t);if(!r)return t.split(",");let{pre:n,body:i,post:o}=r,s=n.split(",");s[s.length-1]+="{"+i+"}";let l=XD(o);return o.length&&(s[s.length-1]+=l.shift(),s.push.apply(s,l)),e.push.apply(e,s),e}function JD(t){return t?(t.slice(0,2)==="{}"&&(t="\\{\\}"+t.slice(2)),au(aQ(t),!0).map(sQ)):[]}function cQ(t){return"{"+t+"}"}function lQ(t){return/^-?0\d/.test(t)}function uQ(t,e){return t<=e}function pQ(t,e){return t>=e}function au(t,e){let r=[],n=Ev("{","}",t);if(!n)return[t];let i=n.pre,o=n.post.length?au(n.post,!1):[""];if(/\$$/.test(n.pre))for(let s=0;s<o.length;s++){let l=i+"{"+n.body+"}"+o[s];r.push(l)}else{let s=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),l=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),u=s||l,m=n.body.indexOf(",")>=0;if(!u&&!m)return n.post.match(/,(?!,).*\}/)?(t=n.pre+"{"+n.body+Rv+n.post,au(t)):[t];let d;if(u)d=n.body.split(/\.\./);else if(d=XD(n.body),d.length===1&&d[0]!==void 0&&(d=au(d[0],!1).map(cQ),d.length===1))return o.map(y=>n.pre+d[0]+y);let g;if(u&&d[0]!==void 0&&d[1]!==void 0){let y=_v(d[0]),x=_v(d[1]),E=Math.max(d[0].length,d[1].length),w=d.length===3&&d[2]!==void 0?Math.abs(_v(d[2])):1,H=uQ;x<y&&(w*=-1,H=pQ);let G=d.some(lQ);g=[];for(let ie=y;H(ie,x);ie+=w){let se;if(l)se=String.fromCharCode(ie),se==="\\"&&(se="");else if(se=String(ie),G){let ge=E-se.length;if(ge>0){let be=new Array(ge+1).join("0");ie<0?se="-"+be+se.slice(1):se=be+se}}g.push(se)}}else{g=[];for(let y=0;y<d.length;y++)g.push.apply(g,au(d[y],!1))}for(let y=0;y<g.length;y++)for(let x=0;x<o.length;x++){let E=i+g[y]+o[x];(!e||u||E)&&r.push(E)}}return r}var su=t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>65536)throw new TypeError("pattern is too long")};var mQ={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},cu=t=>t.replace(/[[\]\\-]/g,"\\$&"),fQ=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),eM=t=>t.join(""),tM=(t,e)=>{let r=e;if(t.charAt(r)!=="[")throw new Error("not in a brace expression");let n=[],i=[],o=r+1,s=!1,l=!1,u=!1,m=!1,d=r,g="";e:for(;o<t.length;){let w=t.charAt(o);if((w==="!"||w==="^")&&o===r+1){m=!0,o++;continue}if(w==="]"&&s&&!u){d=o+1;break}if(s=!0,w==="\\"&&!u){u=!0,o++;continue}if(w==="["&&!u){for(let[H,[W,G,ie]]of Object.entries(mQ))if(t.startsWith(H,o)){if(g)return["$.",!1,t.length-r,!0];o+=H.length,ie?i.push(W):n.push(W),l=l||G;continue e}}if(u=!1,g){w>g?n.push(cu(g)+"-"+cu(w)):w===g&&n.push(cu(w)),g="",o++;continue}if(t.startsWith("-]",o+1)){n.push(cu(w+"-")),o+=2;continue}if(t.startsWith("-",o+1)){g=w,o+=2;continue}n.push(cu(w)),o++}if(d<o)return["",!1,0,!1];if(!n.length&&!i.length)return["$.",!1,t.length-r,!0];if(i.length===0&&n.length===1&&/^\\?.$/.test(n[0])&&!m){let w=n[0].length===2?n[0].slice(-1):n[0];return[fQ(w),!1,d-r,!1]}let y="["+(m?"^":"")+eM(n)+"]",x="["+(m?"":"^")+eM(i)+"]";return[n.length&&i.length?"("+y+"|"+x+")":n.length?y:x,l,d-r,!0]};var On=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");var dQ=new Set(["!","?","+","*","@"]),rM=t=>dQ.has(t),gQ="(?!(?:^|/)\\.\\.?(?:$|/))",_h="(?!\\.)",hQ=new Set(["[","."]),yQ=new Set(["..","."]),TQ=new Set("().*{}+?[]^$\\!"),xQ=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),kv="[^/]",nM=kv+"*?",iM=kv+"+?",ac=class t{type;#e;#t;#o=!1;#n=[];#a;#S;#l;#p=!1;#s;#c;#i=!1;constructor(e,r,n={}){this.type=e,e&&(this.#t=!0),this.#a=r,this.#e=this.#a?this.#a.#e:this,this.#s=this.#e===this?n:this.#e.#s,this.#l=this.#e===this?[]:this.#e.#l,e==="!"&&!this.#e.#p&&this.#l.push(this),this.#S=this.#a?this.#a.#n.length:0}get hasMagic(){if(this.#t!==void 0)return this.#t;for(let e of this.#n)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#t=!0;return this.#t}toString(){return this.#c!==void 0?this.#c:this.type?this.#c=this.type+"("+this.#n.map(e=>String(e)).join("|")+")":this.#c=this.#n.map(e=>String(e)).join("")}#h(){if(this!==this.#e)throw new Error("should only call on root");if(this.#p)return this;this.toString(),this.#p=!0;let e;for(;e=this.#l.pop();){if(e.type!=="!")continue;let r=e,n=r.#a;for(;n;){for(let i=r.#S+1;!n.type&&i<n.#n.length;i++)for(let o of e.#n){if(typeof o=="string")throw new Error("string part in extglob AST??");o.copyIn(n.#n[i])}r=n,n=r.#a}}return this}push(...e){for(let r of e)if(r!==""){if(typeof r!="string"&&!(r instanceof t&&r.#a===this))throw new Error("invalid part: "+r);this.#n.push(r)}}toJSON(){let e=this.type===null?this.#n.slice().map(r=>typeof r=="string"?r:r.toJSON()):[this.type,...this.#n.map(r=>r.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#p&&this.#a?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#a?.isStart())return!1;if(this.#S===0)return!0;let e=this.#a;for(let r=0;r<this.#S;r++){let n=e.#n[r];if(!(n instanceof t&&n.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#a?.type==="!")return!0;if(!this.#a?.isEnd())return!1;if(!this.type)return this.#a?.isEnd();let e=this.#a?this.#a.#n.length:0;return this.#S===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let r=new t(this.type,e);for(let n of this.#n)r.copyIn(n);return r}static#y(e,r,n,i){let o=!1,s=!1,l=-1,u=!1;if(r.type===null){let x=n,E="";for(;x<e.length;){let w=e.charAt(x++);if(o||w==="\\"){o=!o,E+=w;continue}if(s){x===l+1?(w==="^"||w==="!")&&(u=!0):w==="]"&&!(x===l+2&&u)&&(s=!1),E+=w;continue}else if(w==="["){s=!0,l=x,u=!1,E+=w;continue}if(!i.noext&&rM(w)&&e.charAt(x)==="("){r.push(E),E="";let H=new t(w,r);x=t.#y(e,H,x,i),r.push(H);continue}E+=w}return r.push(E),x}let m=n+1,d=new t(null,r),g=[],y="";for(;m<e.length;){let x=e.charAt(m++);if(o||x==="\\"){o=!o,y+=x;continue}if(s){m===l+1?(x==="^"||x==="!")&&(u=!0):x==="]"&&!(m===l+2&&u)&&(s=!1),y+=x;continue}else if(x==="["){s=!0,l=m,u=!1,y+=x;continue}if(rM(x)&&e.charAt(m)==="("){d.push(y),y="";let E=new t(x,d);d.push(E),m=t.#y(e,E,m,i);continue}if(x==="|"){d.push(y),y="",g.push(d),d=new t(null,r);continue}if(x===")")return y===""&&r.#n.length===0&&(r.#i=!0),d.push(y),y="",r.push(...g,d),m;y+=x}return r.type=null,r.#t=void 0,r.#n=[e.substring(n-1)],m}static fromGlob(e,r={}){let n=new t(null,void 0,r);return t.#y(e,n,0,r),n}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[r,n,i,o]=this.toRegExpSource();if(!(i||this.#t||this.#s.nocase&&!this.#s.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return n;let l=(this.#s.nocase?"i":"")+(o?"u":"");return Object.assign(new RegExp(`^${r}$`,l),{_src:r,_glob:e})}get options(){return this.#s}toRegExpSource(e){let r=e??!!this.#s.dot;if(this.#e===this&&this.#h(),!this.type){let u=this.isStart()&&this.isEnd(),m=this.#n.map(x=>{let[E,w,H,W]=typeof x=="string"?t.#m(x,this.#t,u):x.toRegExpSource(e);return this.#t=this.#t||H,this.#o=this.#o||W,E}).join(""),d="";if(this.isStart()&&typeof this.#n[0]=="string"&&!(this.#n.length===1&&yQ.has(this.#n[0]))){let E=hQ,w=r&&E.has(m.charAt(0))||m.startsWith("\\.")&&E.has(m.charAt(2))||m.startsWith("\\.\\.")&&E.has(m.charAt(4)),H=!r&&!e&&E.has(m.charAt(0));d=w?gQ:H?_h:""}let g="";return this.isEnd()&&this.#e.#p&&this.#a?.type==="!"&&(g="(?:$|\\/)"),[d+m+g,On(m),this.#t=!!this.#t,this.#o]}let n=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",o=this.#f(r);if(this.isStart()&&this.isEnd()&&!o&&this.type!=="!"){let u=this.toString();return this.#n=[u],this.type=null,this.#t=void 0,[u,On(this.toString()),!1,!1]}let s=!n||e||r||!_h?"":this.#f(!0);s===o&&(s=""),s&&(o=`(?:${o})(?:${s})*?`);let l="";if(this.type==="!"&&this.#i)l=(this.isStart()&&!r?_h:"")+iM;else{let u=this.type==="!"?"))"+(this.isStart()&&!r&&!e?_h:"")+nM+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&s?")":this.type==="*"&&s?")?":`)${this.type}`;l=i+o+u}return[l,On(o),this.#t=!!this.#t,this.#o]}#f(e){return this.#n.map(r=>{if(typeof r=="string")throw new Error("string type in extglob ast??");let[n,i,o,s]=r.toRegExpSource(e);return this.#o=this.#o||s,n}).filter(r=>!(this.isStart()&&this.isEnd())||!!r).join("|")}static#m(e,r,n=!1){let i=!1,o="",s=!1;for(let l=0;l<e.length;l++){let u=e.charAt(l);if(i){i=!1,o+=(TQ.has(u)?"\\":"")+u;continue}if(u==="\\"){l===e.length-1?o+="\\\\":i=!0;continue}if(u==="["){let[m,d,g,y]=tM(e,l);if(g){o+=m,s=s||d,l+=g-1,r=r||y;continue}}if(u==="*"){n&&e==="*"?o+=iM:o+=nM,r=!0;continue}if(u==="?"){o+=kv,r=!0;continue}o+=xQ(u)}return[o,On(e),!!r,s]}};var sc=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&");var gr=(t,e,r={})=>(su(e),!r.nocomment&&e.charAt(0)==="#"?!1:new Gr(e,r).match(t)),SQ=/^\*+([^+@!?\*\[\(]*)$/,vQ=t=>e=>!e.startsWith(".")&&e.endsWith(t),bQ=t=>e=>e.endsWith(t),wQ=t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),EQ=t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),_Q=/^\*+\.\*+$/,RQ=t=>!t.startsWith(".")&&t.includes("."),kQ=t=>t!=="."&&t!==".."&&t.includes("."),AQ=/^\.\*+$/,PQ=t=>t!=="."&&t!==".."&&t.startsWith("."),LQ=/^\*+$/,DQ=t=>t.length!==0&&!t.startsWith("."),MQ=t=>t.length!==0&&t!=="."&&t!=="..",FQ=/^\?+([^+@!?\*\[\(]*)?$/,CQ=([t,e=""])=>{let r=sM([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},IQ=([t,e=""])=>{let r=cM([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},OQ=([t,e=""])=>{let r=cM([t]);return e?n=>r(n)&&n.endsWith(e):r},NQ=([t,e=""])=>{let r=sM([t]);return e?n=>r(n)&&n.endsWith(e):r},sM=([t])=>{let e=t.length;return r=>r.length===e&&!r.startsWith(".")},cM=([t])=>{let e=t.length;return r=>r.length===e&&r!=="."&&r!==".."},lM=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",oM={win32:{sep:"\\"},posix:{sep:"/"}},UQ=lM==="win32"?oM.win32.sep:oM.posix.sep;gr.sep=UQ;var Xt=Symbol("globstar **");gr.GLOBSTAR=Xt;var HQ="[^/]",BQ=HQ+"*?",VQ="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",WQ="(?:(?!(?:\\/|^)\\.).)*?",$Q=(t,e={})=>r=>gr(r,t,e);gr.filter=$Q;var Tn=(t,e={})=>Object.assign({},t,e),jQ=t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return gr;let e=gr;return Object.assign((n,i,o={})=>e(n,i,Tn(t,o)),{Minimatch:class extends e.Minimatch{constructor(i,o={}){super(i,Tn(t,o))}static defaults(i){return e.defaults(Tn(t,i)).Minimatch}},AST:class extends e.AST{constructor(i,o,s={}){super(i,o,Tn(t,s))}static fromGlob(i,o={}){return e.AST.fromGlob(i,Tn(t,o))}},unescape:(n,i={})=>e.unescape(n,Tn(t,i)),escape:(n,i={})=>e.escape(n,Tn(t,i)),filter:(n,i={})=>e.filter(n,Tn(t,i)),defaults:n=>e.defaults(Tn(t,n)),makeRe:(n,i={})=>e.makeRe(n,Tn(t,i)),braceExpand:(n,i={})=>e.braceExpand(n,Tn(t,i)),match:(n,i,o={})=>e.match(n,i,Tn(t,o)),sep:e.sep,GLOBSTAR:Xt})};gr.defaults=jQ;var uM=(t,e={})=>(su(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:JD(t));gr.braceExpand=uM;var zQ=(t,e={})=>new Gr(t,e).makeRe();gr.makeRe=zQ;var qQ=(t,e,r={})=>{let n=new Gr(e,r);return t=t.filter(i=>n.match(i)),n.options.nonull&&!t.length&&t.push(e),t};gr.match=qQ;var aM=/[?*]|[+@!]\(.*?\)|\[|\]/,GQ=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Gr=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,r={}){su(e),r=r||{},this.options=r,this.pattern=e,this.platform=r.platform||lM,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!r.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!r.nonegate,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=r.windowsNoMagicRoot!==void 0?r.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let r of e)if(typeof r!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],r.debug&&(this.debug=(...o)=>console.error(...o)),this.debug(this.pattern,this.globSet);let n=this.globSet.map(o=>this.slashSplit(o));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let i=this.globParts.map((o,s,l)=>{if(this.isWindows&&this.windowsNoMagicRoot){let u=o[0]===""&&o[1]===""&&(o[2]==="?"||!aM.test(o[2]))&&!aM.test(o[3]),m=/^[a-z]:/i.test(o[0]);if(u)return[...o.slice(0,4),...o.slice(4).map(d=>this.parse(d))];if(m)return[o[0],...o.slice(1).map(d=>this.parse(d))]}return o.map(u=>this.parse(u))});if(this.debug(this.pattern,i),this.set=i.filter(o=>o.indexOf(!1)===-1),this.isWindows)for(let o=0;o<this.set.length;o++){let s=this.set[o];s[0]===""&&s[1]===""&&this.globParts[o][2]==="?"&&typeof s[3]=="string"&&/^[a-z]:$/i.test(s[3])&&(s[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let n=0;n<e.length;n++)for(let i=0;i<e[n].length;i++)e[n][i]==="**"&&(e[n][i]="*");let{optimizationLevel:r=1}=this.options;return r>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):r>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(r=>{let n=-1;for(;(n=r.indexOf("**",n+1))!==-1;){let i=n;for(;r[i+1]==="**";)i++;i!==n&&r.splice(n,i-n)}return r})}levelOneOptimize(e){return e.map(r=>(r=r.reduce((n,i)=>{let o=n[n.length-1];return i==="**"&&o==="**"?n:i===".."&&o&&o!==".."&&o!=="."&&o!=="**"?(n.pop(),n):(n.push(i),n)},[]),r.length===0?[""]:r))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let r=!1;do{if(r=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let o=e[i];i===1&&o===""&&e[0]===""||(o==="."||o==="")&&(r=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(r=!0,e.pop())}let n=0;for(;(n=e.indexOf("..",n+1))!==-1;){let i=e[n-1];i&&i!=="."&&i!==".."&&i!=="**"&&(r=!0,e.splice(n-1,2),n-=2)}}while(r);return e.length===0?[""]:e}firstPhasePreProcess(e){let r=!1;do{r=!1;for(let n of e){let i=-1;for(;(i=n.indexOf("**",i+1))!==-1;){let s=i;for(;n[s+1]==="**";)s++;s>i&&n.splice(i+1,s-i);let l=n[i+1],u=n[i+2],m=n[i+3];if(l!==".."||!u||u==="."||u===".."||!m||m==="."||m==="..")continue;r=!0,n.splice(i,1);let d=n.slice(0);d[i]="**",e.push(d),i--}if(!this.preserveMultipleSlashes){for(let s=1;s<n.length-1;s++){let l=n[s];s===1&&l===""&&n[0]===""||(l==="."||l==="")&&(r=!0,n.splice(s,1),s--)}n[0]==="."&&n.length===2&&(n[1]==="."||n[1]==="")&&(r=!0,n.pop())}let o=0;for(;(o=n.indexOf("..",o+1))!==-1;){let s=n[o-1];if(s&&s!=="."&&s!==".."&&s!=="**"){r=!0;let u=o===1&&n[o+1]==="**"?["."]:[];n.splice(o-1,2,...u),n.length===0&&n.push(""),o-=2}}}}while(r);return e}secondPhasePreProcess(e){for(let r=0;r<e.length-1;r++)for(let n=r+1;n<e.length;n++){let i=this.partsMatch(e[r],e[n],!this.preserveMultipleSlashes);if(i){e[r]=[],e[n]=i;break}}return e.filter(r=>r.length)}partsMatch(e,r,n=!1){let i=0,o=0,s=[],l="";for(;i<e.length&&o<r.length;)if(e[i]===r[o])s.push(l==="b"?r[o]:e[i]),i++,o++;else if(n&&e[i]==="**"&&r[o]===e[i+1])s.push(e[i]),i++;else if(n&&r[o]==="**"&&e[i]===r[o+1])s.push(r[o]),o++;else if(e[i]==="*"&&r[o]&&(this.options.dot||!r[o].startsWith("."))&&r[o]!=="**"){if(l==="b")return!1;l="a",s.push(e[i]),i++,o++}else if(r[o]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(l==="a")return!1;l="b",s.push(r[o]),i++,o++}else return!1;return e.length===r.length&&s}parseNegate(){if(this.nonegate)return;let e=this.pattern,r=!1,n=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)r=!r,n++;n&&(this.pattern=e.slice(n)),this.negate=r}matchOne(e,r,n=!1){let i=this.options;if(this.isWindows){let w=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),H=!w&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),W=typeof r[0]=="string"&&/^[a-z]:$/i.test(r[0]),G=!W&&r[0]===""&&r[1]===""&&r[2]==="?"&&typeof r[3]=="string"&&/^[a-z]:$/i.test(r[3]),ie=H?3:w?0:void 0,se=G?3:W?0:void 0;if(typeof ie=="number"&&typeof se=="number"){let[ge,be]=[e[ie],r[se]];ge.toLowerCase()===be.toLowerCase()&&(r[se]=ge,se>ie?r=r.slice(se):ie>se&&(e=e.slice(ie)))}}let{optimizationLevel:o=1}=this.options;o>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var s=0,l=0,u=e.length,m=r.length;s<u&&l<m;s++,l++){this.debug("matchOne loop");var d=r[l],g=e[s];if(this.debug(r,d,g),d===!1)return!1;if(d===Xt){this.debug("GLOBSTAR",[r,d,g]);var y=s,x=l+1;if(x===m){for(this.debug("** at the end");s<u;s++)if(e[s]==="."||e[s]===".."||!i.dot&&e[s].charAt(0)===".")return!1;return!0}for(;y<u;){var E=e[y];if(this.debug(`
globstar while`,e,y,r,x,E),this.matchOne(e.slice(y),r.slice(x),n))return this.debug("globstar found match!",y,u,E),!0;if(E==="."||E===".."||!i.dot&&E.charAt(0)==="."){this.debug("dot detected!",e,y,r,x);break}this.debug("globstar swallow a segment, and continue"),y++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,y,r,x),y===u))}let w;if(typeof d=="string"?(w=g===d,this.debug("string match",d,g,w)):(w=d.test(g),this.debug("pattern match",d,g,w)),!w)return!1}if(s===u&&l===m)return!0;if(s===u)return n;if(l===m)return s===u-1&&e[s]==="";throw new Error("wtf?")}braceExpand(){return uM(this.pattern,this.options)}parse(e){su(e);let r=this.options;if(e==="**")return Xt;if(e==="")return"";let n,i=null;(n=e.match(LQ))?i=r.dot?MQ:DQ:(n=e.match(SQ))?i=(r.nocase?r.dot?EQ:wQ:r.dot?bQ:vQ)(n[1]):(n=e.match(FQ))?i=(r.nocase?r.dot?IQ:CQ:r.dot?OQ:NQ)(n):(n=e.match(_Q))?i=r.dot?kQ:RQ:(n=e.match(AQ))&&(i=PQ);let o=ac.fromGlob(e,this.options).toMMPattern();return i&&typeof o=="object"&&Reflect.defineProperty(o,"test",{value:i}),o}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let r=this.options,n=r.noglobstar?BQ:r.dot?VQ:WQ,i=new Set(r.nocase?["i"]:[]),o=e.map(u=>{let m=u.map(d=>{if(d instanceof RegExp)for(let g of d.flags.split(""))i.add(g);return typeof d=="string"?GQ(d):d===Xt?Xt:d._src});return m.forEach((d,g)=>{let y=m[g+1],x=m[g-1];d!==Xt||x===Xt||(x===void 0?y!==void 0&&y!==Xt?m[g+1]="(?:\\/|"+n+"\\/)?"+y:m[g]=n:y===void 0?m[g-1]=x+"(?:\\/|"+n+")?":y!==Xt&&(m[g-1]=x+"(?:\\/|\\/"+n+"\\/)"+y,m[g+1]=Xt))}),m.filter(d=>d!==Xt).join("/")}).join("|"),[s,l]=e.length>1?["(?:",")"]:["",""];o="^"+s+o+l+"$",this.negate&&(o="^(?!"+o+").+$");try{this.regexp=new RegExp(o,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;let n=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let o=this.set;this.debug(this.pattern,"set",o);let s=i[i.length-1];if(!s)for(let l=i.length-2;!s&&l>=0;l--)s=i[l];for(let l=0;l<o.length;l++){let u=o[l],m=i;if(n.matchBase&&u.length===1&&(m=[s]),this.matchOne(m,u,r))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return gr.defaults(e).Minimatch}};gr.AST=ac;gr.Minimatch=Gr;gr.escape=sc;gr.unescape=On;var CM=require("node:url");var cc=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,mM=new Set,Av=typeof process=="object"&&process?process:{},fM=(t,e,r,n)=>{typeof Av.emitWarning=="function"?Av.emitWarning(t,e,r,n):console.error(`[${r}] ${e}: ${t}`)},Rh=globalThis.AbortController,pM=globalThis.AbortSignal;if(typeof Rh>"u"){pM=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(n,i){this._onabort.push(i)}},Rh=class{constructor(){e()}signal=new pM;abort(n){if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(let i of this.signal._onabort)i(n);this.signal.onabort?.(n)}}};let t=Av.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{t&&(t=!1,fM("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var KQ=t=>!mM.has(t),lIe=Symbol("type"),wo=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),dM=t=>wo(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?lc:null:null,lc=class extends Array{constructor(e){super(e),this.fill(0)}},Pv=class t{heap;length;static#e=!1;static create(e){let r=dM(e);if(!r)return[];t.#e=!0;let n=new t(e,r);return t.#e=!1,n}constructor(e,r){if(!t.#e)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},lu=class t{#e;#t;#o;#n;#a;#S;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#l;#p;#s;#c;#i;#h;#y;#f;#m;#w;#g;#E;#_;#x;#v;#b;#d;static unsafeExposeInternals(e){return{starts:e.#_,ttls:e.#x,sizes:e.#E,keyMap:e.#s,keyList:e.#c,valList:e.#i,next:e.#h,prev:e.#y,get head(){return e.#f},get tail(){return e.#m},free:e.#w,isBackgroundFetch:r=>e.#u(r),backgroundFetch:(r,n,i,o)=>e.#U(r,n,i,o),moveToTail:r=>e.#B(r),indexes:r=>e.#k(r),rindexes:r=>e.#A(r),isStale:r=>e.#T(r)}}get max(){return this.#e}get maxSize(){return this.#t}get calculatedSize(){return this.#p}get size(){return this.#l}get fetchMethod(){return this.#a}get memoMethod(){return this.#S}get dispose(){return this.#o}get disposeAfter(){return this.#n}constructor(e){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:s,updateAgeOnHas:l,allowStale:u,dispose:m,disposeAfter:d,noDisposeOnSet:g,noUpdateTTL:y,maxSize:x=0,maxEntrySize:E=0,sizeCalculation:w,fetchMethod:H,memoMethod:W,noDeleteOnFetchRejection:G,noDeleteOnStaleGet:ie,allowStaleOnFetchRejection:se,allowStaleOnFetchAbort:ge,ignoreFetchAbort:be}=e;if(r!==0&&!wo(r))throw new TypeError("max option must be a nonnegative integer");let kt=r?dM(r):Array;if(!kt)throw new Error("invalid max value: "+r);if(this.#e=r,this.#t=x,this.maxEntrySize=E||this.#t,this.sizeCalculation=w,this.sizeCalculation){if(!this.#t&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(W!==void 0&&typeof W!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#S=W,H!==void 0&&typeof H!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#a=H,this.#b=!!H,this.#s=new Map,this.#c=new Array(r).fill(void 0),this.#i=new Array(r).fill(void 0),this.#h=new kt(r),this.#y=new kt(r),this.#f=0,this.#m=0,this.#w=Pv.create(r),this.#l=0,this.#p=0,typeof m=="function"&&(this.#o=m),typeof d=="function"?(this.#n=d,this.#g=[]):(this.#n=void 0,this.#g=void 0),this.#v=!!this.#o,this.#d=!!this.#n,this.noDisposeOnSet=!!g,this.noUpdateTTL=!!y,this.noDeleteOnFetchRejection=!!G,this.allowStaleOnFetchRejection=!!se,this.allowStaleOnFetchAbort=!!ge,this.ignoreFetchAbort=!!be,this.maxEntrySize!==0){if(this.#t!==0&&!wo(this.#t))throw new TypeError("maxSize must be a positive integer if specified");if(!wo(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#L()}if(this.allowStale=!!u,this.noDeleteOnStaleGet=!!ie,this.updateAgeOnGet=!!s,this.updateAgeOnHas=!!l,this.ttlResolution=wo(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=n||0,this.ttl){if(!wo(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#P()}if(this.#e===0&&this.ttl===0&&this.#t===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#e&&!this.#t){let Tr="LRU_CACHE_UNBOUNDED";KQ(Tr)&&(mM.add(Tr),fM("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",Tr,t))}}getRemainingTTL(e){return this.#s.has(e)?1/0:0}#P(){let e=new lc(this.#e),r=new lc(this.#e);this.#x=e,this.#_=r,this.#M=(o,s,l=cc.now())=>{if(r[o]=s!==0?l:0,e[o]=s,s!==0&&this.ttlAutopurge){let u=setTimeout(()=>{this.#T(o)&&this.#D(this.#c[o],"expire")},s+1);u.unref&&u.unref()}},this.#R=o=>{r[o]=e[o]!==0?cc.now():0},this.#r=(o,s)=>{if(e[s]){let l=e[s],u=r[s];if(!l||!u)return;o.ttl=l,o.start=u,o.now=n||i();let m=o.now-u;o.remainingTTL=l-m}};let n=0,i=()=>{let o=cc.now();if(this.ttlResolution>0){n=o;let s=setTimeout(()=>n=0,this.ttlResolution);s.unref&&s.unref()}return o};this.getRemainingTTL=o=>{let s=this.#s.get(o);if(s===void 0)return 0;let l=e[s],u=r[s];if(!l||!u)return 1/0;let m=(n||i())-u;return l-m},this.#T=o=>{let s=r[o],l=e[o];return!!l&&!!s&&(n||i())-s>l}}#R=()=>{};#r=()=>{};#M=()=>{};#T=()=>!1;#L(){let e=new lc(this.#e);this.#p=0,this.#E=e,this.#F=r=>{this.#p-=e[r],e[r]=0},this.#I=(r,n,i,o)=>{if(this.#u(n))return 0;if(!wo(i))if(o){if(typeof o!="function")throw new TypeError("sizeCalculation must be a function");if(i=o(n,r),!wo(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#C=(r,n,i)=>{if(e[r]=n,this.#t){let o=this.#t-e[r];for(;this.#p>o;)this.#N(!0)}this.#p+=e[r],i&&(i.entrySize=n,i.totalCalculatedSize=this.#p)}}#F=e=>{};#C=(e,r,n)=>{};#I=(e,r,n,i)=>{if(n||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#k({allowStale:e=this.allowStale}={}){if(this.#l)for(let r=this.#m;!(!this.#O(r)||((e||!this.#T(r))&&(yield r),r===this.#f));)r=this.#y[r]}*#A({allowStale:e=this.allowStale}={}){if(this.#l)for(let r=this.#f;!(!this.#O(r)||((e||!this.#T(r))&&(yield r),r===this.#m));)r=this.#h[r]}#O(e){return e!==void 0&&this.#s.get(this.#c[e])===e}*entries(){for(let e of this.#k())this.#i[e]!==void 0&&this.#c[e]!==void 0&&!this.#u(this.#i[e])&&(yield[this.#c[e],this.#i[e]])}*rentries(){for(let e of this.#A())this.#i[e]!==void 0&&this.#c[e]!==void 0&&!this.#u(this.#i[e])&&(yield[this.#c[e],this.#i[e]])}*keys(){for(let e of this.#k()){let r=this.#c[e];r!==void 0&&!this.#u(this.#i[e])&&(yield r)}}*rkeys(){for(let e of this.#A()){let r=this.#c[e];r!==void 0&&!this.#u(this.#i[e])&&(yield r)}}*values(){for(let e of this.#k())this.#i[e]!==void 0&&!this.#u(this.#i[e])&&(yield this.#i[e])}*rvalues(){for(let e of this.#A())this.#i[e]!==void 0&&!this.#u(this.#i[e])&&(yield this.#i[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,r={}){for(let n of this.#k()){let i=this.#i[n],o=this.#u(i)?i.__staleWhileFetching:i;if(o!==void 0&&e(o,this.#c[n],this))return this.get(this.#c[n],r)}}forEach(e,r=this){for(let n of this.#k()){let i=this.#i[n],o=this.#u(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#c[n],this)}}rforEach(e,r=this){for(let n of this.#A()){let i=this.#i[n],o=this.#u(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#c[n],this)}}purgeStale(){let e=!1;for(let r of this.#A({allowStale:!0}))this.#T(r)&&(this.#D(this.#c[r],"expire"),e=!0);return e}info(e){let r=this.#s.get(e);if(r===void 0)return;let n=this.#i[r],i=this.#u(n)?n.__staleWhileFetching:n;if(i===void 0)return;let o={value:i};if(this.#x&&this.#_){let s=this.#x[r],l=this.#_[r];if(s&&l){let u=s-(cc.now()-l);o.ttl=u,o.start=Date.now()}}return this.#E&&(o.size=this.#E[r]),o}dump(){let e=[];for(let r of this.#k({allowStale:!0})){let n=this.#c[r],i=this.#i[r],o=this.#u(i)?i.__staleWhileFetching:i;if(o===void 0||n===void 0)continue;let s={value:o};if(this.#x&&this.#_){s.ttl=this.#x[r];let l=cc.now()-this.#_[r];s.start=Math.floor(Date.now()-l)}this.#E&&(s.size=this.#E[r]),e.unshift([n,s])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let i=Date.now()-n.start;n.start=cc.now()-i}this.set(r,n.value,n)}}set(e,r,n={}){if(r===void 0)return this.delete(e),this;let{ttl:i=this.ttl,start:o,noDisposeOnSet:s=this.noDisposeOnSet,sizeCalculation:l=this.sizeCalculation,status:u}=n,{noUpdateTTL:m=this.noUpdateTTL}=n,d=this.#I(e,r,n.size||0,l);if(this.maxEntrySize&&d>this.maxEntrySize)return u&&(u.set="miss",u.maxEntrySizeExceeded=!0),this.#D(e,"set"),this;let g=this.#l===0?void 0:this.#s.get(e);if(g===void 0)g=this.#l===0?this.#m:this.#w.length!==0?this.#w.pop():this.#l===this.#e?this.#N(!1):this.#l,this.#c[g]=e,this.#i[g]=r,this.#s.set(e,g),this.#h[this.#m]=g,this.#y[g]=this.#m,this.#m=g,this.#l++,this.#C(g,d,u),u&&(u.set="add"),m=!1;else{this.#B(g);let y=this.#i[g];if(r!==y){if(this.#b&&this.#u(y)){y.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:x}=y;x!==void 0&&!s&&(this.#v&&this.#o?.(x,e,"set"),this.#d&&this.#g?.push([x,e,"set"]))}else s||(this.#v&&this.#o?.(y,e,"set"),this.#d&&this.#g?.push([y,e,"set"]));if(this.#F(g),this.#C(g,d,u),this.#i[g]=r,u){u.set="replace";let x=y&&this.#u(y)?y.__staleWhileFetching:y;x!==void 0&&(u.oldValue=x)}}else u&&(u.set="update")}if(i!==0&&!this.#x&&this.#P(),this.#x&&(m||this.#M(g,i,o),u&&this.#r(u,g)),!s&&this.#d&&this.#g){let y=this.#g,x;for(;x=y?.shift();)this.#n?.(...x)}return this}pop(){try{for(;this.#l;){let e=this.#i[this.#f];if(this.#N(!0),this.#u(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#d&&this.#g){let e=this.#g,r;for(;r=e?.shift();)this.#n?.(...r)}}}#N(e){let r=this.#f,n=this.#c[r],i=this.#i[r];return this.#b&&this.#u(i)?i.__abortController.abort(new Error("evicted")):(this.#v||this.#d)&&(this.#v&&this.#o?.(i,n,"evict"),this.#d&&this.#g?.push([i,n,"evict"])),this.#F(r),e&&(this.#c[r]=void 0,this.#i[r]=void 0,this.#w.push(r)),this.#l===1?(this.#f=this.#m=0,this.#w.length=0):this.#f=this.#h[r],this.#s.delete(n),this.#l--,r}has(e,r={}){let{updateAgeOnHas:n=this.updateAgeOnHas,status:i}=r,o=this.#s.get(e);if(o!==void 0){let s=this.#i[o];if(this.#u(s)&&s.__staleWhileFetching===void 0)return!1;if(this.#T(o))i&&(i.has="stale",this.#r(i,o));else return n&&this.#R(o),i&&(i.has="hit",this.#r(i,o)),!0}else i&&(i.has="miss");return!1}peek(e,r={}){let{allowStale:n=this.allowStale}=r,i=this.#s.get(e);if(i===void 0||!n&&this.#T(i))return;let o=this.#i[i];return this.#u(o)?o.__staleWhileFetching:o}#U(e,r,n,i){let o=r===void 0?void 0:this.#i[r];if(this.#u(o))return o;let s=new Rh,{signal:l}=n;l?.addEventListener("abort",()=>s.abort(l.reason),{signal:s.signal});let u={signal:s.signal,options:n,context:i},m=(w,H=!1)=>{let{aborted:W}=s.signal,G=n.ignoreFetchAbort&&w!==void 0;if(n.status&&(W&&!H?(n.status.fetchAborted=!0,n.status.fetchError=s.signal.reason,G&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),W&&!G&&!H)return g(s.signal.reason);let ie=x;return this.#i[r]===x&&(w===void 0?ie.__staleWhileFetching?this.#i[r]=ie.__staleWhileFetching:this.#D(e,"fetch"):(n.status&&(n.status.fetchUpdated=!0),this.set(e,w,u.options))),w},d=w=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=w),g(w)),g=w=>{let{aborted:H}=s.signal,W=H&&n.allowStaleOnFetchAbort,G=W||n.allowStaleOnFetchRejection,ie=G||n.noDeleteOnFetchRejection,se=x;if(this.#i[r]===x&&(!ie||se.__staleWhileFetching===void 0?this.#D(e,"fetch"):W||(this.#i[r]=se.__staleWhileFetching)),G)return n.status&&se.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),se.__staleWhileFetching;if(se.__returned===se)throw w},y=(w,H)=>{let W=this.#a?.(e,o,u);W&&W instanceof Promise&&W.then(G=>w(G===void 0?void 0:G),H),s.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(w(void 0),n.allowStaleOnFetchAbort&&(w=G=>m(G,!0)))})};n.status&&(n.status.fetchDispatched=!0);let x=new Promise(y).then(m,d),E=Object.assign(x,{__abortController:s,__staleWhileFetching:o,__returned:void 0});return r===void 0?(this.set(e,E,{...u.options,status:void 0}),r=this.#s.get(e)):this.#i[r]=E,E}#u(e){if(!this.#b)return!1;let r=e;return!!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof Rh}async fetch(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:s=this.ttl,noDisposeOnSet:l=this.noDisposeOnSet,size:u=0,sizeCalculation:m=this.sizeCalculation,noUpdateTTL:d=this.noUpdateTTL,noDeleteOnFetchRejection:g=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:y=this.allowStaleOnFetchRejection,ignoreFetchAbort:x=this.ignoreFetchAbort,allowStaleOnFetchAbort:E=this.allowStaleOnFetchAbort,context:w,forceRefresh:H=!1,status:W,signal:G}=r;if(!this.#b)return W&&(W.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,status:W});let ie={allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,ttl:s,noDisposeOnSet:l,size:u,sizeCalculation:m,noUpdateTTL:d,noDeleteOnFetchRejection:g,allowStaleOnFetchRejection:y,allowStaleOnFetchAbort:E,ignoreFetchAbort:x,status:W,signal:G},se=this.#s.get(e);if(se===void 0){W&&(W.fetch="miss");let ge=this.#U(e,se,ie,w);return ge.__returned=ge}else{let ge=this.#i[se];if(this.#u(ge)){let B=n&&ge.__staleWhileFetching!==void 0;return W&&(W.fetch="inflight",B&&(W.returnedStale=!0)),B?ge.__staleWhileFetching:ge.__returned=ge}let be=this.#T(se);if(!H&&!be)return W&&(W.fetch="hit"),this.#B(se),i&&this.#R(se),W&&this.#r(W,se),ge;let kt=this.#U(e,se,ie,w),xr=kt.__staleWhileFetching!==void 0&&n;return W&&(W.fetch=be?"stale":"refresh",xr&&be&&(W.returnedStale=!0)),xr?kt.__staleWhileFetching:kt.__returned=kt}}async forceFetch(e,r={}){let n=await this.fetch(e,r);if(n===void 0)throw new Error("fetch() returned undefined");return n}memo(e,r={}){let n=this.#S;if(!n)throw new Error("no memoMethod provided to constructor");let{context:i,forceRefresh:o,...s}=r,l=this.get(e,s);if(!o&&l!==void 0)return l;let u=n(e,l,{options:s,context:i});return this.set(e,u,s),u}get(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:s}=r,l=this.#s.get(e);if(l!==void 0){let u=this.#i[l],m=this.#u(u);return s&&this.#r(s,l),this.#T(l)?(s&&(s.get="stale"),m?(s&&n&&u.__staleWhileFetching!==void 0&&(s.returnedStale=!0),n?u.__staleWhileFetching:void 0):(o||this.#D(e,"expire"),s&&n&&(s.returnedStale=!0),n?u:void 0)):(s&&(s.get="hit"),m?u.__staleWhileFetching:(this.#B(l),i&&this.#R(l),u))}else s&&(s.get="miss")}#H(e,r){this.#y[r]=e,this.#h[e]=r}#B(e){e!==this.#m&&(e===this.#f?this.#f=this.#h[e]:this.#H(this.#y[e],this.#h[e]),this.#H(this.#m,e),this.#m=e)}delete(e){return this.#D(e,"delete")}#D(e,r){let n=!1;if(this.#l!==0){let i=this.#s.get(e);if(i!==void 0)if(n=!0,this.#l===1)this.#V(r);else{this.#F(i);let o=this.#i[i];if(this.#u(o)?o.__abortController.abort(new Error("deleted")):(this.#v||this.#d)&&(this.#v&&this.#o?.(o,e,r),this.#d&&this.#g?.push([o,e,r])),this.#s.delete(e),this.#c[i]=void 0,this.#i[i]=void 0,i===this.#m)this.#m=this.#y[i];else if(i===this.#f)this.#f=this.#h[i];else{let s=this.#y[i];this.#h[s]=this.#h[i];let l=this.#h[i];this.#y[l]=this.#y[i]}this.#l--,this.#w.push(i)}}if(this.#d&&this.#g?.length){let i=this.#g,o;for(;o=i?.shift();)this.#n?.(...o)}return n}clear(){return this.#V("delete")}#V(e){for(let r of this.#A({allowStale:!0})){let n=this.#i[r];if(this.#u(n))n.__abortController.abort(new Error("deleted"));else{let i=this.#c[r];this.#v&&this.#o?.(n,i,e),this.#d&&this.#g?.push([n,i,e])}}if(this.#s.clear(),this.#i.fill(void 0),this.#c.fill(void 0),this.#x&&this.#_&&(this.#x.fill(0),this.#_.fill(0)),this.#E&&this.#E.fill(0),this.#f=0,this.#m=0,this.#w.length=0,this.#p=0,this.#l=0,this.#d&&this.#g){let r=this.#g,n;for(;n=r?.shift();)this.#n?.(...n)}}};var mc=require("node:path"),EM=require("node:url"),ui=require("fs"),i7=an(require("node:fs"),1),Ro=require("node:fs/promises");var Fh=require("node:events"),Ov=an(require("node:stream"),1),xM=require("node:string_decoder"),gM=typeof process=="object"&&process?process:{stdout:null,stderr:null},QQ=t=>!!t&&typeof t=="object"&&(t instanceof _o||t instanceof Ov.default||YQ(t)||ZQ(t)),YQ=t=>!!t&&typeof t=="object"&&t instanceof Fh.EventEmitter&&typeof t.pipe=="function"&&t.pipe!==Ov.default.Writable.prototype.pipe,ZQ=t=>!!t&&typeof t=="object"&&t instanceof Fh.EventEmitter&&typeof t.write=="function"&&typeof t.end=="function",Ci=Symbol("EOF"),Ii=Symbol("maybeEmitEnd"),Eo=Symbol("emittedEnd"),kh=Symbol("emittingEnd"),uu=Symbol("emittedError"),Ah=Symbol("closed"),hM=Symbol("read"),Ph=Symbol("flush"),yM=Symbol("flushChunk"),Nn=Symbol("encoding"),uc=Symbol("decoder"),Bt=Symbol("flowing"),pu=Symbol("paused"),pc=Symbol("resume"),Vt=Symbol("buffer"),hr=Symbol("pipes"),Wt=Symbol("bufferLength"),Lv=Symbol("bufferPush"),Lh=Symbol("bufferShift"),or=Symbol("objectMode"),Rt=Symbol("destroyed"),Dv=Symbol("error"),Mv=Symbol("emitData"),TM=Symbol("emitEnd"),Fv=Symbol("emitEnd2"),ci=Symbol("async"),Cv=Symbol("abort"),Dh=Symbol("aborted"),mu=Symbol("signal"),wa=Symbol("dataListeners"),Kr=Symbol("discarded"),fu=t=>Promise.resolve().then(t),XQ=t=>t(),JQ=t=>t==="end"||t==="finish"||t==="prefinish",e7=t=>t instanceof ArrayBuffer||!!t&&typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,t7=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),Mh=class{src;dest;opts;ondrain;constructor(e,r,n){this.src=e,this.dest=r,this.opts=n,this.ondrain=()=>e[pc](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(e){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},Iv=class extends Mh{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,r,n){super(e,r,n),this.proxyErrors=i=>r.emit("error",i),e.on("error",this.proxyErrors)}},r7=t=>!!t.objectMode,n7=t=>!t.objectMode&&!!t.encoding&&t.encoding!=="buffer",_o=class extends Fh.EventEmitter{[Bt]=!1;[pu]=!1;[hr]=[];[Vt]=[];[or];[Nn];[ci];[uc];[Ci]=!1;[Eo]=!1;[kh]=!1;[Ah]=!1;[uu]=null;[Wt]=0;[Rt]=!1;[mu];[Dh]=!1;[wa]=0;[Kr]=!1;writable=!0;readable=!0;constructor(...e){let r=e[0]||{};if(super(),r.objectMode&&typeof r.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");r7(r)?(this[or]=!0,this[Nn]=null):n7(r)?(this[Nn]=r.encoding,this[or]=!1):(this[or]=!1,this[Nn]=null),this[ci]=!!r.async,this[uc]=this[Nn]?new xM.StringDecoder(this[Nn]):null,r&&r.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[Vt]}),r&&r.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[hr]});let{signal:n}=r;n&&(this[mu]=n,n.aborted?this[Cv]():n.addEventListener("abort",()=>this[Cv]()))}get bufferLength(){return this[Wt]}get encoding(){return this[Nn]}set encoding(e){throw new Error("Encoding must be set at instantiation time")}setEncoding(e){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[or]}set objectMode(e){throw new Error("objectMode must be set at instantiation time")}get async(){return this[ci]}set async(e){this[ci]=this[ci]||!!e}[Cv](){this[Dh]=!0,this.emit("abort",this[mu]?.reason),this.destroy(this[mu]?.reason)}get aborted(){return this[Dh]}set aborted(e){}write(e,r,n){if(this[Dh])return!1;if(this[Ci])throw new Error("write after end");if(this[Rt])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof r=="function"&&(n=r,r="utf8"),r||(r="utf8");let i=this[ci]?fu:XQ;if(!this[or]&&!Buffer.isBuffer(e)){if(t7(e))e=Buffer.from(e.buffer,e.byteOffset,e.byteLength);else if(e7(e))e=Buffer.from(e);else if(typeof e!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[or]?(this[Bt]&&this[Wt]!==0&&this[Ph](!0),this[Bt]?this.emit("data",e):this[Lv](e),this[Wt]!==0&&this.emit("readable"),n&&i(n),this[Bt]):e.length?(typeof e=="string"&&!(r===this[Nn]&&!this[uc]?.lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[Nn]&&(e=this[uc].write(e)),this[Bt]&&this[Wt]!==0&&this[Ph](!0),this[Bt]?this.emit("data",e):this[Lv](e),this[Wt]!==0&&this.emit("readable"),n&&i(n),this[Bt]):(this[Wt]!==0&&this.emit("readable"),n&&i(n),this[Bt])}read(e){if(this[Rt])return null;if(this[Kr]=!1,this[Wt]===0||e===0||e&&e>this[Wt])return this[Ii](),null;this[or]&&(e=null),this[Vt].length>1&&!this[or]&&(this[Vt]=[this[Nn]?this[Vt].join(""):Buffer.concat(this[Vt],this[Wt])]);let r=this[hM](e||null,this[Vt][0]);return this[Ii](),r}[hM](e,r){if(this[or])this[Lh]();else{let n=r;e===n.length||e===null?this[Lh]():typeof n=="string"?(this[Vt][0]=n.slice(e),r=n.slice(0,e),this[Wt]-=e):(this[Vt][0]=n.subarray(e),r=n.subarray(0,e),this[Wt]-=e)}return this.emit("data",r),!this[Vt].length&&!this[Ci]&&this.emit("drain"),r}end(e,r,n){return typeof e=="function"&&(n=e,e=void 0),typeof r=="function"&&(n=r,r="utf8"),e!==void 0&&this.write(e,r),n&&this.once("end",n),this[Ci]=!0,this.writable=!1,(this[Bt]||!this[pu])&&this[Ii](),this}[pc](){this[Rt]||(!this[wa]&&!this[hr].length&&(this[Kr]=!0),this[pu]=!1,this[Bt]=!0,this.emit("resume"),this[Vt].length?this[Ph]():this[Ci]?this[Ii]():this.emit("drain"))}resume(){return this[pc]()}pause(){this[Bt]=!1,this[pu]=!0,this[Kr]=!1}get destroyed(){return this[Rt]}get flowing(){return this[Bt]}get paused(){return this[pu]}[Lv](e){this[or]?this[Wt]+=1:this[Wt]+=e.length,this[Vt].push(e)}[Lh](){return this[or]?this[Wt]-=1:this[Wt]-=this[Vt][0].length,this[Vt].shift()}[Ph](e=!1){do;while(this[yM](this[Lh]())&&this[Vt].length);!e&&!this[Vt].length&&!this[Ci]&&this.emit("drain")}[yM](e){return this.emit("data",e),this[Bt]}pipe(e,r){if(this[Rt])return e;this[Kr]=!1;let n=this[Eo];return r=r||{},e===gM.stdout||e===gM.stderr?r.end=!1:r.end=r.end!==!1,r.proxyErrors=!!r.proxyErrors,n?r.end&&e.end():(this[hr].push(r.proxyErrors?new Iv(this,e,r):new Mh(this,e,r)),this[ci]?fu(()=>this[pc]()):this[pc]()),e}unpipe(e){let r=this[hr].find(n=>n.dest===e);r&&(this[hr].length===1?(this[Bt]&&this[wa]===0&&(this[Bt]=!1),this[hr]=[]):this[hr].splice(this[hr].indexOf(r),1),r.unpipe())}addListener(e,r){return this.on(e,r)}on(e,r){let n=super.on(e,r);if(e==="data")this[Kr]=!1,this[wa]++,!this[hr].length&&!this[Bt]&&this[pc]();else if(e==="readable"&&this[Wt]!==0)super.emit("readable");else if(JQ(e)&&this[Eo])super.emit(e),this.removeAllListeners(e);else if(e==="error"&&this[uu]){let i=r;this[ci]?fu(()=>i.call(this,this[uu])):i.call(this,this[uu])}return n}removeListener(e,r){return this.off(e,r)}off(e,r){let n=super.off(e,r);return e==="data"&&(this[wa]=this.listeners("data").length,this[wa]===0&&!this[Kr]&&!this[hr].length&&(this[Bt]=!1)),n}removeAllListeners(e){let r=super.removeAllListeners(e);return(e==="data"||e===void 0)&&(this[wa]=0,!this[Kr]&&!this[hr].length&&(this[Bt]=!1)),r}get emittedEnd(){return this[Eo]}[Ii](){!this[kh]&&!this[Eo]&&!this[Rt]&&this[Vt].length===0&&this[Ci]&&(this[kh]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[Ah]&&this.emit("close"),this[kh]=!1)}emit(e,...r){let n=r[0];if(e!=="error"&&e!=="close"&&e!==Rt&&this[Rt])return!1;if(e==="data")return!this[or]&&!n?!1:this[ci]?(fu(()=>this[Mv](n)),!0):this[Mv](n);if(e==="end")return this[TM]();if(e==="close"){if(this[Ah]=!0,!this[Eo]&&!this[Rt])return!1;let o=super.emit("close");return this.removeAllListeners("close"),o}else if(e==="error"){this[uu]=n,super.emit(Dv,n);let o=!this[mu]||this.listeners("error").length?super.emit("error",n):!1;return this[Ii](),o}else if(e==="resume"){let o=super.emit("resume");return this[Ii](),o}else if(e==="finish"||e==="prefinish"){let o=super.emit(e);return this.removeAllListeners(e),o}let i=super.emit(e,...r);return this[Ii](),i}[Mv](e){for(let n of this[hr])n.dest.write(e)===!1&&this.pause();let r=this[Kr]?!1:super.emit("data",e);return this[Ii](),r}[TM](){return this[Eo]?!1:(this[Eo]=!0,this.readable=!1,this[ci]?(fu(()=>this[Fv]()),!0):this[Fv]())}[Fv](){if(this[uc]){let r=this[uc].end();if(r){for(let n of this[hr])n.dest.write(r);this[Kr]||super.emit("data",r)}}for(let r of this[hr])r.end();let e=super.emit("end");return this.removeAllListeners("end"),e}async collect(){let e=Object.assign([],{dataLength:0});this[or]||(e.dataLength=0);let r=this.promise();return this.on("data",n=>{e.push(n),this[or]||(e.dataLength+=n.length)}),await r,e}async concat(){if(this[or])throw new Error("cannot concat in objectMode");let e=await this.collect();return this[Nn]?e.join(""):Buffer.concat(e,e.dataLength)}async promise(){return new Promise((e,r)=>{this.on(Rt,()=>r(new Error("stream destroyed"))),this.on("error",n=>r(n)),this.on("end",()=>e())})}[Symbol.asyncIterator](){this[Kr]=!1;let e=!1,r=async()=>(this.pause(),e=!0,{value:void 0,done:!0});return{next:()=>{if(e)return r();let i=this.read();if(i!==null)return Promise.resolve({done:!1,value:i});if(this[Ci])return r();let o,s,l=g=>{this.off("data",u),this.off("end",m),this.off(Rt,d),r(),s(g)},u=g=>{this.off("error",l),this.off("end",m),this.off(Rt,d),this.pause(),o({value:g,done:!!this[Ci]})},m=()=>{this.off("error",l),this.off("data",u),this.off(Rt,d),r(),o({done:!0,value:void 0})},d=()=>l(new Error("stream destroyed"));return new Promise((g,y)=>{s=y,o=g,this.once(Rt,d),this.once("error",l),this.once("end",m),this.once("data",u)})},throw:r,return:r,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[Kr]=!1;let e=!1,r=()=>(this.pause(),this.off(Dv,r),this.off(Rt,r),this.off("end",r),e=!0,{done:!0,value:void 0}),n=()=>{if(e)return r();let i=this.read();return i===null?r():{done:!1,value:i}};return this.once("end",r),this.once(Dv,r),this.once(Rt,r),{next:n,throw:r,return:r,[Symbol.iterator](){return this}}}destroy(e){if(this[Rt])return e?this.emit("error",e):this.emit(Rt),this;this[Rt]=!0,this[Kr]=!0,this[Vt].length=0,this[Wt]=0;let r=this;return typeof r.close=="function"&&!this[Ah]&&r.close(),e?this.emit("error",e):this.emit(Rt),this}static get isStream(){return QQ}};var o7=ui.realpathSync.native,gu={lstatSync:ui.lstatSync,readdir:ui.readdir,readdirSync:ui.readdirSync,readlinkSync:ui.readlinkSync,realpathSync:o7,promises:{lstat:Ro.lstat,readdir:Ro.readdir,readlink:Ro.readlink,realpath:Ro.realpath}},_M=t=>!t||t===gu||t===i7?gu:{...gu,...t,promises:{...gu.promises,...t.promises||{}}},RM=/^\\\\\?\\([a-z]:)\\?$/i,a7=t=>t.replace(/\//g,"\\").replace(RM,"$1\\"),s7=/[\\\/]/,Sn=0,kM=1,AM=2,li=4,PM=6,LM=8,Ea=10,DM=12,xn=15,du=~xn,Nv=16,SM=32,hu=64,Un=128,Ch=256,Oh=512,vM=hu|Un|Oh,c7=1023,Uv=t=>t.isFile()?LM:t.isDirectory()?li:t.isSymbolicLink()?Ea:t.isCharacterDevice()?AM:t.isBlockDevice()?PM:t.isSocket()?DM:t.isFIFO()?kM:Sn,bM=new Map,yu=t=>{let e=bM.get(t);if(e)return e;let r=t.normalize("NFKD");return bM.set(t,r),r},wM=new Map,Ih=t=>{let e=wM.get(t);if(e)return e;let r=yu(t.toLowerCase());return wM.set(t,r),r},Nh=class extends lu{constructor(){super({max:256})}},Hv=class extends lu{constructor(e=16*1024){super({maxSize:e,sizeCalculation:r=>r.length+1})}},MM=Symbol("PathScurry setAsCwd"),ar=class{name;root;roots;parent;nocase;isCWD=!1;#e;#t;get dev(){return this.#t}#o;get mode(){return this.#o}#n;get nlink(){return this.#n}#a;get uid(){return this.#a}#S;get gid(){return this.#S}#l;get rdev(){return this.#l}#p;get blksize(){return this.#p}#s;get ino(){return this.#s}#c;get size(){return this.#c}#i;get blocks(){return this.#i}#h;get atimeMs(){return this.#h}#y;get mtimeMs(){return this.#y}#f;get ctimeMs(){return this.#f}#m;get birthtimeMs(){return this.#m}#w;get atime(){return this.#w}#g;get mtime(){return this.#g}#E;get ctime(){return this.#E}#_;get birthtime(){return this.#_}#x;#v;#b;#d;#P;#R;#r;#M;#T;#L;get parentPath(){return(this.parent||this).fullpath()}get path(){return this.parentPath}constructor(e,r=Sn,n,i,o,s,l){this.name=e,this.#x=o?Ih(e):yu(e),this.#r=r&c7,this.nocase=o,this.roots=i,this.root=n||this,this.#M=s,this.#b=l.fullpath,this.#P=l.relative,this.#R=l.relativePosix,this.parent=l.parent,this.parent?this.#e=this.parent.#e:this.#e=_M(l.fs)}depth(){return this.#v!==void 0?this.#v:this.parent?this.#v=this.parent.depth()+1:this.#v=0}childrenCache(){return this.#M}resolve(e){if(!e)return this;let r=this.getRootString(e),i=e.substring(r.length).split(this.splitSep);return r?this.getRoot(r).#F(i):this.#F(i)}#F(e){let r=this;for(let n of e)r=r.child(n);return r}children(){let e=this.#M.get(this);if(e)return e;let r=Object.assign([],{provisional:0});return this.#M.set(this,r),this.#r&=~Nv,r}child(e,r){if(e===""||e===".")return this;if(e==="..")return this.parent||this;let n=this.children(),i=this.nocase?Ih(e):yu(e);for(let u of n)if(u.#x===i)return u;let o=this.parent?this.sep:"",s=this.#b?this.#b+o+e:void 0,l=this.newChild(e,Sn,{...r,parent:this,fullpath:s});return this.canReaddir()||(l.#r|=Un),n.push(l),l}relative(){if(this.isCWD)return"";if(this.#P!==void 0)return this.#P;let e=this.name,r=this.parent;if(!r)return this.#P=this.name;let n=r.relative();return n+(!n||!r.parent?"":this.sep)+e}relativePosix(){if(this.sep==="/")return this.relative();if(this.isCWD)return"";if(this.#R!==void 0)return this.#R;let e=this.name,r=this.parent;if(!r)return this.#R=this.fullpathPosix();let n=r.relativePosix();return n+(!n||!r.parent?"":"/")+e}fullpath(){if(this.#b!==void 0)return this.#b;let e=this.name,r=this.parent;if(!r)return this.#b=this.name;let i=r.fullpath()+(r.parent?this.sep:"")+e;return this.#b=i}fullpathPosix(){if(this.#d!==void 0)return this.#d;if(this.sep==="/")return this.#d=this.fullpath();if(!this.parent){let i=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(i)?this.#d=`//?/${i}`:this.#d=i}let e=this.parent,r=e.fullpathPosix(),n=r+(!r||!e.parent?"":"/")+this.name;return this.#d=n}isUnknown(){return(this.#r&xn)===Sn}isType(e){return this[`is${e}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#r&xn)===LM}isDirectory(){return(this.#r&xn)===li}isCharacterDevice(){return(this.#r&xn)===AM}isBlockDevice(){return(this.#r&xn)===PM}isFIFO(){return(this.#r&xn)===kM}isSocket(){return(this.#r&xn)===DM}isSymbolicLink(){return(this.#r&Ea)===Ea}lstatCached(){return this.#r&SM?this:void 0}readlinkCached(){return this.#T}realpathCached(){return this.#L}readdirCached(){let e=this.children();return e.slice(0,e.provisional)}canReadlink(){if(this.#T)return!0;if(!this.parent)return!1;let e=this.#r&xn;return!(e!==Sn&&e!==Ea||this.#r&Ch||this.#r&Un)}calledReaddir(){return!!(this.#r&Nv)}isENOENT(){return!!(this.#r&Un)}isNamed(e){return this.nocase?this.#x===Ih(e):this.#x===yu(e)}async readlink(){let e=this.#T;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=await this.#e.promises.readlink(this.fullpath()),n=(await this.parent.realpath())?.resolve(r);if(n)return this.#T=n}catch(r){this.#u(r.code);return}}readlinkSync(){let e=this.#T;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=this.#e.readlinkSync(this.fullpath()),n=this.parent.realpathSync()?.resolve(r);if(n)return this.#T=n}catch(r){this.#u(r.code);return}}#C(e){this.#r|=Nv;for(let r=e.provisional;r<e.length;r++){let n=e[r];n&&n.#I()}}#I(){this.#r&Un||(this.#r=(this.#r|Un)&du,this.#k())}#k(){let e=this.children();e.provisional=0;for(let r of e)r.#I()}#A(){this.#r|=Oh,this.#O()}#O(){if(this.#r&hu)return;let e=this.#r;(e&xn)===li&&(e&=du),this.#r=e|hu,this.#k()}#N(e=""){e==="ENOTDIR"||e==="EPERM"?this.#O():e==="ENOENT"?this.#I():this.children().provisional=0}#U(e=""){e==="ENOTDIR"?this.parent.#O():e==="ENOENT"&&this.#I()}#u(e=""){let r=this.#r;r|=Ch,e==="ENOENT"&&(r|=Un),(e==="EINVAL"||e==="UNKNOWN")&&(r&=du),this.#r=r,e==="ENOTDIR"&&this.parent&&this.parent.#O()}#H(e,r){return this.#D(e,r)||this.#B(e,r)}#B(e,r){let n=Uv(e),i=this.newChild(e.name,n,{parent:this}),o=i.#r&xn;return o!==li&&o!==Ea&&o!==Sn&&(i.#r|=hu),r.unshift(i),r.provisional++,i}#D(e,r){for(let n=r.provisional;n<r.length;n++){let i=r[n];if((this.nocase?Ih(e.name):yu(e.name))===i.#x)return this.#V(e,i,n,r)}}#V(e,r,n,i){let o=r.name;return r.#r=r.#r&du|Uv(e),o!==e.name&&(r.name=e.name),n!==i.provisional&&(n===i.length-1?i.pop():i.splice(n,1),i.unshift(r)),i.provisional++,r}async lstat(){if((this.#r&Un)===0)try{return this.#z(await this.#e.promises.lstat(this.fullpath())),this}catch(e){this.#U(e.code)}}lstatSync(){if((this.#r&Un)===0)try{return this.#z(this.#e.lstatSync(this.fullpath())),this}catch(e){this.#U(e.code)}}#z(e){let{atime:r,atimeMs:n,birthtime:i,birthtimeMs:o,blksize:s,blocks:l,ctime:u,ctimeMs:m,dev:d,gid:g,ino:y,mode:x,mtime:E,mtimeMs:w,nlink:H,rdev:W,size:G,uid:ie}=e;this.#w=r,this.#h=n,this.#_=i,this.#m=o,this.#p=s,this.#i=l,this.#E=u,this.#f=m,this.#t=d,this.#S=g,this.#s=y,this.#o=x,this.#g=E,this.#y=w,this.#n=H,this.#l=W,this.#c=G,this.#a=ie;let se=Uv(e);this.#r=this.#r&du|se|SM,se!==Sn&&se!==li&&se!==Ea&&(this.#r|=hu)}#$=[];#j=!1;#q(e){this.#j=!1;let r=this.#$.slice();this.#$.length=0,r.forEach(n=>n(null,e))}readdirCB(e,r=!1){if(!this.canReaddir()){r?e(null,[]):queueMicrotask(()=>e(null,[]));return}let n=this.children();if(this.calledReaddir()){let o=n.slice(0,n.provisional);r?e(null,o):queueMicrotask(()=>e(null,o));return}if(this.#$.push(e),this.#j)return;this.#j=!0;let i=this.fullpath();this.#e.readdir(i,{withFileTypes:!0},(o,s)=>{if(o)this.#N(o.code),n.provisional=0;else{for(let l of s)this.#H(l,n);this.#C(n)}this.#q(n.slice(0,n.provisional))})}#W;async readdir(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();if(this.#W)await this.#W;else{let n=()=>{};this.#W=new Promise(i=>n=i);try{for(let i of await this.#e.promises.readdir(r,{withFileTypes:!0}))this.#H(i,e);this.#C(e)}catch(i){this.#N(i.code),e.provisional=0}this.#W=void 0,n()}return e.slice(0,e.provisional)}readdirSync(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();try{for(let n of this.#e.readdirSync(r,{withFileTypes:!0}))this.#H(n,e);this.#C(e)}catch(n){this.#N(n.code),e.provisional=0}return e.slice(0,e.provisional)}canReaddir(){if(this.#r&vM)return!1;let e=xn&this.#r;return e===Sn||e===li||e===Ea}shouldWalk(e,r){return(this.#r&li)===li&&!(this.#r&vM)&&!e.has(this)&&(!r||r(this))}async realpath(){if(this.#L)return this.#L;if(!((Oh|Ch|Un)&this.#r))try{let e=await this.#e.promises.realpath(this.fullpath());return this.#L=this.resolve(e)}catch{this.#A()}}realpathSync(){if(this.#L)return this.#L;if(!((Oh|Ch|Un)&this.#r))try{let e=this.#e.realpathSync(this.fullpath());return this.#L=this.resolve(e)}catch{this.#A()}}[MM](e){if(e===this)return;e.isCWD=!1,this.isCWD=!0;let r=new Set([]),n=[],i=this;for(;i&&i.parent;)r.add(i),i.#P=n.join(this.sep),i.#R=n.join("/"),i=i.parent,n.push("..");for(i=e;i&&i.parent&&!r.has(i);)i.#P=void 0,i.#R=void 0,i=i.parent}},Uh=class t extends ar{sep="\\";splitSep=s7;constructor(e,r=Sn,n,i,o,s,l){super(e,r,n,i,o,s,l)}newChild(e,r=Sn,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}getRootString(e){return mc.win32.parse(e).root}getRoot(e){if(e=a7(e.toUpperCase()),e===this.root.name)return this.root;for(let[r,n]of Object.entries(this.roots))if(this.sameRoot(e,r))return this.roots[e]=n;return this.roots[e]=new fc(e,this).root}sameRoot(e,r=this.root.name){return e=e.toUpperCase().replace(/\//g,"\\").replace(RM,"$1\\"),e===r}},Hh=class t extends ar{splitSep="/";sep="/";constructor(e,r=Sn,n,i,o,s,l){super(e,r,n,i,o,s,l)}getRootString(e){return e.startsWith("/")?"/":""}getRoot(e){return this.root}newChild(e,r=Sn,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}},Bh=class{root;rootPath;roots;cwd;#e;#t;#o;nocase;#n;constructor(e=process.cwd(),r,n,{nocase:i,childrenCacheSize:o=16*1024,fs:s=gu}={}){this.#n=_M(s),(e instanceof URL||e.startsWith("file://"))&&(e=(0,EM.fileURLToPath)(e));let l=r.resolve(e);this.roots=Object.create(null),this.rootPath=this.parseRootPath(l),this.#e=new Nh,this.#t=new Nh,this.#o=new Hv(o);let u=l.substring(this.rootPath.length).split(n);if(u.length===1&&!u[0]&&u.pop(),i===void 0)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=i,this.root=this.newRoot(this.#n),this.roots[this.rootPath]=this.root;let m=this.root,d=u.length-1,g=r.sep,y=this.rootPath,x=!1;for(let E of u){let w=d--;m=m.child(E,{relative:new Array(w).fill("..").join(g),relativePosix:new Array(w).fill("..").join("/"),fullpath:y+=(x?"":g)+E}),x=!0}this.cwd=m}depth(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.depth()}childrenCache(){return this.#o}resolve(...e){let r="";for(let o=e.length-1;o>=0;o--){let s=e[o];if(!(!s||s===".")&&(r=r?`${s}/${r}`:s,this.isAbsolute(s)))break}let n=this.#e.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpath();return this.#e.set(r,i),i}resolvePosix(...e){let r="";for(let o=e.length-1;o>=0;o--){let s=e[o];if(!(!s||s===".")&&(r=r?`${s}/${r}`:s,this.isAbsolute(s)))break}let n=this.#t.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpathPosix();return this.#t.set(r,i),i}relative(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relative()}relativePosix(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relativePosix()}basename(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.name}dirname(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),(e.parent||e).fullpath()}async readdir(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof ar||(r=e,e=this.cwd);let{withFileTypes:n}=r;if(e.canReaddir()){let i=await e.readdir();return n?i:i.map(o=>o.name)}else return[]}readdirSync(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof ar||(r=e,e=this.cwd);let{withFileTypes:n=!0}=r;return e.canReaddir()?n?e.readdirSync():e.readdirSync().map(i=>i.name):[]}async lstat(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstat()}lstatSync(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstatSync()}async readlink(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof ar||(r=e.withFileTypes,e=this.cwd);let n=await e.readlink();return r?n:n?.fullpath()}readlinkSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof ar||(r=e.withFileTypes,e=this.cwd);let n=e.readlinkSync();return r?n:n?.fullpath()}async realpath(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof ar||(r=e.withFileTypes,e=this.cwd);let n=await e.realpath();return r?n:n?.fullpath()}realpathSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof ar||(r=e.withFileTypes,e=this.cwd);let n=e.realpathSync();return r?n:n?.fullpath()}async walk(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof ar||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=[];(!o||o(e))&&l.push(n?e:e.fullpath());let u=new Set,m=(g,y)=>{u.add(g),g.readdirCB((x,E)=>{if(x)return y(x);let w=E.length;if(!w)return y();let H=()=>{--w===0&&y()};for(let W of E)(!o||o(W))&&l.push(n?W:W.fullpath()),i&&W.isSymbolicLink()?W.realpath().then(G=>G?.isUnknown()?G.lstat():G).then(G=>G?.shouldWalk(u,s)?m(G,H):H()):W.shouldWalk(u,s)?m(W,H):H()},!0)},d=e;return new Promise((g,y)=>{m(d,x=>{if(x)return y(x);g(l)})})}walkSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof ar||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=[];(!o||o(e))&&l.push(n?e:e.fullpath());let u=new Set([e]);for(let m of u){let d=m.readdirSync();for(let g of d){(!o||o(g))&&l.push(n?g:g.fullpath());let y=g;if(g.isSymbolicLink()){if(!(i&&(y=g.realpathSync())))continue;y.isUnknown()&&y.lstatSync()}y.shouldWalk(u,s)&&u.add(y)}}return l}[Symbol.asyncIterator](){return this.iterate()}iterate(e=this.cwd,r={}){return typeof e=="string"?e=this.cwd.resolve(e):e instanceof ar||(r=e,e=this.cwd),this.stream(e,r)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof ar||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r;(!o||o(e))&&(yield n?e:e.fullpath());let l=new Set([e]);for(let u of l){let m=u.readdirSync();for(let d of m){(!o||o(d))&&(yield n?d:d.fullpath());let g=d;if(d.isSymbolicLink()){if(!(i&&(g=d.realpathSync())))continue;g.isUnknown()&&g.lstatSync()}g.shouldWalk(l,s)&&l.add(g)}}}stream(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof ar||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=new _o({objectMode:!0});(!o||o(e))&&l.write(n?e:e.fullpath());let u=new Set,m=[e],d=0,g=()=>{let y=!1;for(;!y;){let x=m.shift();if(!x){d===0&&l.end();return}d++,u.add(x);let E=(H,W,G=!1)=>{if(H)return l.emit("error",H);if(i&&!G){let ie=[];for(let se of W)se.isSymbolicLink()&&ie.push(se.realpath().then(ge=>ge?.isUnknown()?ge.lstat():ge));if(ie.length){Promise.all(ie).then(()=>E(null,W,!0));return}}for(let ie of W)ie&&(!o||o(ie))&&(l.write(n?ie:ie.fullpath())||(y=!0));d--;for(let ie of W){let se=ie.realpathCached()||ie;se.shouldWalk(u,s)&&m.push(se)}y&&!l.flowing?l.once("drain",g):w||g()},w=!0;x.readdirCB(E,!0),w=!1}};return g(),l}streamSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof ar||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=new _o({objectMode:!0}),u=new Set;(!o||o(e))&&l.write(n?e:e.fullpath());let m=[e],d=0,g=()=>{let y=!1;for(;!y;){let x=m.shift();if(!x){d===0&&l.end();return}d++,u.add(x);let E=x.readdirSync();for(let w of E)(!o||o(w))&&(l.write(n?w:w.fullpath())||(y=!0));d--;for(let w of E){let H=w;if(w.isSymbolicLink()){if(!(i&&(H=w.realpathSync())))continue;H.isUnknown()&&H.lstatSync()}H.shouldWalk(u,s)&&m.push(H)}}y&&!l.flowing&&l.once("drain",g)};return g(),l}chdir(e=this.cwd){let r=this.cwd;this.cwd=typeof e=="string"?this.cwd.resolve(e):e,this.cwd[MM](r)}},fc=class extends Bh{sep="\\";constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,mc.win32,"\\",{...r,nocase:n}),this.nocase=n;for(let i=this.cwd;i;i=i.parent)i.nocase=this.nocase}parseRootPath(e){return mc.win32.parse(e).root.toUpperCase()}newRoot(e){return new Uh(this.rootPath,li,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")||e.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(e)}},dc=class extends Bh{sep="/";constructor(e=process.cwd(),r={}){let{nocase:n=!1}=r;super(e,mc.posix,"/",{...r,nocase:n}),this.nocase=n}parseRootPath(e){return"/"}newRoot(e){return new Hh(this.rootPath,li,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")}},Tu=class extends dc{constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,{...r,nocase:n})}},dIe=process.platform==="win32"?Uh:Hh,FM=process.platform==="win32"?fc:process.platform==="darwin"?Tu:dc;var l7=t=>t.length>=1,u7=t=>t.length>=1,gc=class t{#e;#t;#o;length;#n;#a;#S;#l;#p;#s;#c=!0;constructor(e,r,n,i){if(!l7(e))throw new TypeError("empty pattern list");if(!u7(r))throw new TypeError("empty glob list");if(r.length!==e.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=e.length,n<0||n>=this.length)throw new TypeError("index out of range");if(this.#e=e,this.#t=r,this.#o=n,this.#n=i,this.#o===0){if(this.isUNC()){let[o,s,l,u,...m]=this.#e,[d,g,y,x,...E]=this.#t;m[0]===""&&(m.shift(),E.shift());let w=[o,s,l,u,""].join("/"),H=[d,g,y,x,""].join("/");this.#e=[w,...m],this.#t=[H,...E],this.length=this.#e.length}else if(this.isDrive()||this.isAbsolute()){let[o,...s]=this.#e,[l,...u]=this.#t;s[0]===""&&(s.shift(),u.shift());let m=o+"/",d=l+"/";this.#e=[m,...s],this.#t=[d,...u],this.length=this.#e.length}}}pattern(){return this.#e[this.#o]}isString(){return typeof this.#e[this.#o]=="string"}isGlobstar(){return this.#e[this.#o]===Xt}isRegExp(){return this.#e[this.#o]instanceof RegExp}globString(){return this.#S=this.#S||(this.#o===0?this.isAbsolute()?this.#t[0]+this.#t.slice(1).join("/"):this.#t.join("/"):this.#t.slice(this.#o).join("/"))}hasMore(){return this.length>this.#o+1}rest(){return this.#a!==void 0?this.#a:this.hasMore()?(this.#a=new t(this.#e,this.#t,this.#o+1,this.#n),this.#a.#s=this.#s,this.#a.#p=this.#p,this.#a.#l=this.#l,this.#a):this.#a=null}isUNC(){let e=this.#e;return this.#p!==void 0?this.#p:this.#p=this.#n==="win32"&&this.#o===0&&e[0]===""&&e[1]===""&&typeof e[2]=="string"&&!!e[2]&&typeof e[3]=="string"&&!!e[3]}isDrive(){let e=this.#e;return this.#l!==void 0?this.#l:this.#l=this.#n==="win32"&&this.#o===0&&this.length>1&&typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0])}isAbsolute(){let e=this.#e;return this.#s!==void 0?this.#s:this.#s=e[0]===""&&e.length>1||this.isDrive()||this.isUNC()}root(){let e=this.#e[0];return typeof e=="string"&&this.isAbsolute()&&this.#o===0?e:""}checkFollowGlobstar(){return!(this.#o===0||!this.isGlobstar()||!this.#c)}markFollowGlobstar(){return this.#o===0||!this.isGlobstar()||!this.#c?!1:(this.#c=!1,!0)}};var p7=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",hc=class{relative;relativeChildren;absolute;absoluteChildren;platform;mmopts;constructor(e,{nobrace:r,nocase:n,noext:i,noglobstar:o,platform:s=p7}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[],this.platform=s,this.mmopts={dot:!0,nobrace:r,nocase:n,noext:i,noglobstar:o,optimizationLevel:2,platform:s,nocomment:!0,nonegate:!0};for(let l of e)this.add(l)}add(e){let r=new Gr(e,this.mmopts);for(let n=0;n<r.set.length;n++){let i=r.set[n],o=r.globParts[n];if(!i||!o)throw new Error("invalid pattern object");for(;i[0]==="."&&o[0]===".";)i.shift(),o.shift();let s=new gc(i,o,0,this.platform),l=new Gr(s.globString(),this.mmopts),u=o[o.length-1]==="**",m=s.isAbsolute();m?this.absolute.push(l):this.relative.push(l),u&&(m?this.absoluteChildren.push(l):this.relativeChildren.push(l))}}ignored(e){let r=e.fullpath(),n=`${r}/`,i=e.relative()||".",o=`${i}/`;for(let s of this.relative)if(s.match(i)||s.match(o))return!0;for(let s of this.absolute)if(s.match(r)||s.match(n))return!0;return!1}childrenIgnored(e){let r=e.fullpath()+"/",n=(e.relative()||".")+"/";for(let i of this.relativeChildren)if(i.match(n))return!0;for(let i of this.absoluteChildren)if(i.match(r))return!0;return!1}};var Bv=class t{store;constructor(e=new Map){this.store=e}copy(){return new t(new Map(this.store))}hasWalked(e,r){return this.store.get(e.fullpath())?.has(r.globString())}storeWalked(e,r){let n=e.fullpath(),i=this.store.get(n);i?i.add(r.globString()):this.store.set(n,new Set([r.globString()]))}},Vv=class{store=new Map;add(e,r,n){let i=(r?2:0)|(n?1:0),o=this.store.get(e);this.store.set(e,o===void 0?i:i&o)}entries(){return[...this.store.entries()].map(([e,r])=>[e,!!(r&2),!!(r&1)])}},Wv=class{store=new Map;add(e,r){if(!e.canReaddir())return;let n=this.store.get(e);n?n.find(i=>i.globString()===r.globString())||n.push(r):this.store.set(e,[r])}get(e){let r=this.store.get(e);if(!r)throw new Error("attempting to walk unknown path");return r}entries(){return this.keys().map(e=>[e,this.store.get(e)])}keys(){return[...this.store.keys()].filter(e=>e.canReaddir())}},xu=class t{hasWalkedCache;matches=new Vv;subwalks=new Wv;patterns;follow;dot;opts;constructor(e,r){this.opts=e,this.follow=!!e.follow,this.dot=!!e.dot,this.hasWalkedCache=r?r.copy():new Bv}processPatterns(e,r){this.patterns=r;let n=r.map(i=>[e,i]);for(let[i,o]of n){this.hasWalkedCache.storeWalked(i,o);let s=o.root(),l=o.isAbsolute()&&this.opts.absolute!==!1;if(s){i=i.resolve(s==="/"&&this.opts.root!==void 0?this.opts.root:s);let g=o.rest();if(g)o=g;else{this.matches.add(i,!0,!1);continue}}if(i.isENOENT())continue;let u,m,d=!1;for(;typeof(u=o.pattern())=="string"&&(m=o.rest());)i=i.resolve(u),o=m,d=!0;if(u=o.pattern(),m=o.rest(),d){if(this.hasWalkedCache.hasWalked(i,o))continue;this.hasWalkedCache.storeWalked(i,o)}if(typeof u=="string"){let g=u===".."||u===""||u===".";this.matches.add(i.resolve(u),l,g);continue}else if(u===Xt){(!i.isSymbolicLink()||this.follow||o.checkFollowGlobstar())&&this.subwalks.add(i,o);let g=m?.pattern(),y=m?.rest();if(!m||(g===""||g===".")&&!y)this.matches.add(i,l,g===""||g===".");else if(g===".."){let x=i.parent||i;y?this.hasWalkedCache.hasWalked(x,y)||this.subwalks.add(x,y):this.matches.add(x,l,!0)}}else u instanceof RegExp&&this.subwalks.add(i,o)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new t(this.opts,this.hasWalkedCache)}filterEntries(e,r){let n=this.subwalks.get(e),i=this.child();for(let o of r)for(let s of n){let l=s.isAbsolute(),u=s.pattern(),m=s.rest();u===Xt?i.testGlobstar(o,s,m,l):u instanceof RegExp?i.testRegExp(o,u,m,l):i.testString(o,u,m,l)}return i}testGlobstar(e,r,n,i){if((this.dot||!e.name.startsWith("."))&&(r.hasMore()||this.matches.add(e,i,!1),e.canReaddir()&&(this.follow||!e.isSymbolicLink()?this.subwalks.add(e,r):e.isSymbolicLink()&&(n&&r.checkFollowGlobstar()?this.subwalks.add(e,n):r.markFollowGlobstar()&&this.subwalks.add(e,r)))),n){let o=n.pattern();if(typeof o=="string"&&o!==".."&&o!==""&&o!==".")this.testString(e,o,n.rest(),i);else if(o===".."){let s=e.parent||e;this.subwalks.add(s,n)}else o instanceof RegExp&&this.testRegExp(e,o,n.rest(),i)}}testRegExp(e,r,n,i){r.test(e.name)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}testString(e,r,n,i){e.isNamed(r)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}};var m7=(t,e)=>typeof t=="string"?new hc([t],e):Array.isArray(t)?new hc(t,e):t,Vh=class{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#e=[];#t;#o;signal;maxDepth;includeChildMatches;constructor(e,r,n){if(this.patterns=e,this.path=r,this.opts=n,this.#o=!n.posix&&n.platform==="win32"?"\\":"/",this.includeChildMatches=n.includeChildMatches!==!1,(n.ignore||!this.includeChildMatches)&&(this.#t=m7(n.ignore??[],n),!this.includeChildMatches&&typeof this.#t.add!="function")){let i="cannot ignore child matches, ignore lacks add() method.";throw new Error(i)}this.maxDepth=n.maxDepth||1/0,n.signal&&(this.signal=n.signal,this.signal.addEventListener("abort",()=>{this.#e.length=0}))}#n(e){return this.seen.has(e)||!!this.#t?.ignored?.(e)}#a(e){return!!this.#t?.childrenIgnored?.(e)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;this.paused=!1;let e;for(;!this.paused&&(e=this.#e.shift());)e()}onResume(e){this.signal?.aborted||(this.paused?this.#e.push(e):e())}async matchCheck(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||await e.realpath(),!n)return;e=n}let o=e.isUnknown()||this.opts.stat?await e.lstat():e;if(this.opts.follow&&this.opts.nodir&&o?.isSymbolicLink()){let s=await o.realpath();s&&(s.isUnknown()||this.opts.stat)&&await s.lstat()}return this.matchCheckTest(o,r)}matchCheckTest(e,r){return e&&(this.maxDepth===1/0||e.depth()<=this.maxDepth)&&(!r||e.canReaddir())&&(!this.opts.nodir||!e.isDirectory())&&(!this.opts.nodir||!this.opts.follow||!e.isSymbolicLink()||!e.realpathCached()?.isDirectory())&&!this.#n(e)?e:void 0}matchCheckSync(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||e.realpathSync(),!n)return;e=n}let o=e.isUnknown()||this.opts.stat?e.lstatSync():e;if(this.opts.follow&&this.opts.nodir&&o?.isSymbolicLink()){let s=o.realpathSync();s&&(s?.isUnknown()||this.opts.stat)&&s.lstatSync()}return this.matchCheckTest(o,r)}matchFinish(e,r){if(this.#n(e))return;if(!this.includeChildMatches&&this.#t?.add){let o=`${e.relativePosix()}/**`;this.#t.add(o)}let n=this.opts.absolute===void 0?r:this.opts.absolute;this.seen.add(e);let i=this.opts.mark&&e.isDirectory()?this.#o:"";if(this.opts.withFileTypes)this.matchEmit(e);else if(n){let o=this.opts.posix?e.fullpathPosix():e.fullpath();this.matchEmit(o+i)}else{let o=this.opts.posix?e.relativePosix():e.relative(),s=this.opts.dotRelative&&!o.startsWith(".."+this.#o)?"."+this.#o:"";this.matchEmit(o?s+o+i:"."+i)}}async match(e,r,n){let i=await this.matchCheck(e,n);i&&this.matchFinish(i,r)}matchSync(e,r,n){let i=this.matchCheckSync(e,n);i&&this.matchFinish(i,r)}walkCB(e,r,n){this.signal?.aborted&&n(),this.walkCB2(e,r,new xu(this.opts),n)}walkCB2(e,r,n,i){if(this.#a(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2(e,r,n,i));return}n.processPatterns(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,u,m]of n.matches.entries())this.#n(l)||(o++,this.match(l,u,m).then(()=>s()));for(let l of n.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;o++;let u=l.readdirCached();l.calledReaddir()?this.walkCB3(l,u,n,s):l.readdirCB((m,d)=>this.walkCB3(l,d,n,s),!0)}s()}walkCB3(e,r,n,i){n=n.filterEntries(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,u,m]of n.matches.entries())this.#n(l)||(o++,this.match(l,u,m).then(()=>s()));for(let[l,u]of n.subwalks.entries())o++,this.walkCB2(l,u,n.child(),s);s()}walkCBSync(e,r,n){this.signal?.aborted&&n(),this.walkCB2Sync(e,r,new xu(this.opts),n)}walkCB2Sync(e,r,n,i){if(this.#a(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2Sync(e,r,n,i));return}n.processPatterns(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,u,m]of n.matches.entries())this.#n(l)||this.matchSync(l,u,m);for(let l of n.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;o++;let u=l.readdirSync();this.walkCB3Sync(l,u,n,s)}s()}walkCB3Sync(e,r,n,i){n=n.filterEntries(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,u,m]of n.matches.entries())this.#n(l)||this.matchSync(l,u,m);for(let[l,u]of n.subwalks.entries())o++,this.walkCB2Sync(l,u,n.child(),s);s()}},Su=class extends Vh{matches=new Set;constructor(e,r,n){super(e,r,n)}matchEmit(e){this.matches.add(e)}async walk(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise((e,r)=>{this.walkCB(this.path,this.patterns,()=>{this.signal?.aborted?r(this.signal.reason):e(this.matches)})}),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>{if(this.signal?.aborted)throw this.signal.reason}),this.matches}},vu=class extends Vh{results;constructor(e,r,n){super(e,r,n),this.results=new _o({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(e){this.results.write(e),this.results.flowing||this.pause()}stream(){let e=this.path;return e.isUnknown()?e.lstat().then(()=>{this.walkCB(e,this.patterns,()=>this.results.end())}):this.walkCB(e,this.patterns,()=>this.results.end()),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}};var f7=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",Hn=class{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;includeChildMatches;opts;patterns;constructor(e,r){if(!r)throw new TypeError("glob options required");if(this.withFileTypes=!!r.withFileTypes,this.signal=r.signal,this.follow=!!r.follow,this.dot=!!r.dot,this.dotRelative=!!r.dotRelative,this.nodir=!!r.nodir,this.mark=!!r.mark,r.cwd?(r.cwd instanceof URL||r.cwd.startsWith("file://"))&&(r.cwd=(0,CM.fileURLToPath)(r.cwd)):this.cwd="",this.cwd=r.cwd||"",this.root=r.root,this.magicalBraces=!!r.magicalBraces,this.nobrace=!!r.nobrace,this.noext=!!r.noext,this.realpath=!!r.realpath,this.absolute=r.absolute,this.includeChildMatches=r.includeChildMatches!==!1,this.noglobstar=!!r.noglobstar,this.matchBase=!!r.matchBase,this.maxDepth=typeof r.maxDepth=="number"?r.maxDepth:1/0,this.stat=!!r.stat,this.ignore=r.ignore,this.withFileTypes&&this.absolute!==void 0)throw new Error("cannot set absolute and withFileTypes:true");if(typeof e=="string"&&(e=[e]),this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(e=e.map(u=>u.replace(/\\/g,"/"))),this.matchBase){if(r.noglobstar)throw new TypeError("base matching requires globstar");e=e.map(u=>u.includes("/")?u:`./**/${u}`)}if(this.pattern=e,this.platform=r.platform||f7,this.opts={...r,platform:this.platform},r.scurry){if(this.scurry=r.scurry,r.nocase!==void 0&&r.nocase!==r.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{let u=r.platform==="win32"?fc:r.platform==="darwin"?Tu:r.platform?dc:FM;this.scurry=new u(this.cwd,{nocase:r.nocase,fs:r.fs})}this.nocase=this.scurry.nocase;let n=this.platform==="darwin"||this.platform==="win32",i={...r,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:n,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},o=this.pattern.map(u=>new Gr(u,i)),[s,l]=o.reduce((u,m)=>(u[0].push(...m.set),u[1].push(...m.globParts),u),[[],[]]);this.patterns=s.map((u,m)=>{let d=l[m];if(!d)throw new Error("invalid pattern object");return new gc(u,d,0,this.platform)})}async walk(){return[...await new Su(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walk()]}walkSync(){return[...new Su(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walkSync()]}stream(){return new vu(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).stream()}streamSync(){return new vu(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}};var $v=(t,e={})=>{Array.isArray(t)||(t=[t]);for(let r of t)if(new Gr(r,e).hasMagic())return!0;return!1};function Wh(t,e={}){return new Hn(t,e).streamSync()}function OM(t,e={}){return new Hn(t,e).stream()}function NM(t,e={}){return new Hn(t,e).walkSync()}async function IM(t,e={}){return new Hn(t,e).walk()}function $h(t,e={}){return new Hn(t,e).iterateSync()}function UM(t,e={}){return new Hn(t,e).iterate()}var d7=Wh,g7=Object.assign(OM,{sync:Wh}),h7=$h,y7=Object.assign(UM,{sync:$h}),T7=Object.assign(NM,{stream:Wh,iterate:$h}),jv=Object.assign(IM,{glob:IM,globSync:NM,sync:T7,globStream:OM,stream:g7,globStreamSync:Wh,streamSync:d7,globIterate:UM,iterate:y7,globIterateSync:$h,iterateSync:h7,Glob:Hn,hasMagic:$v,escape:sc,unescape:On});jv.glob=jv;function HM(){let t=process.env.CURSORLESS_MODE;switch(t){case void 0:case"production":return"production";case"development":return"development";case"test":return"test";default:throw new Error(`Unexpected value for environment variable CURSORLESS_MODE: ${t}`)}}var QM=Object.defineProperty,v7=Object.getOwnPropertyNames,N=(t,e)=>QM(t,"name",{value:e,configurable:!0}),b7=(t,e)=>function(){return e||(0,t[v7(t)[0]])((e={exports:{}}).exports,e),e.exports},sb=(t,e)=>{for(var r in e)QM(t,r,{get:e[r],enumerable:!0})},w7=b7({"(disabled):util"(){}}),jh={};sb(jh,{addChainableMethod:()=>xb,addLengthGuard:()=>Ru,addMethod:()=>hb,addProperty:()=>gb,checkError:()=>Qr,compareByInspect:()=>Kh,eql:()=>wF,expectTypes:()=>nF,flag:()=>Le,getActual:()=>ey,getMessage:()=>ub,getName:()=>ry,getOperator:()=>wb,getOwnEnumerableProperties:()=>bb,getOwnEnumerablePropertySymbols:()=>vb,getPathInfo:()=>db,hasProperty:()=>ty,inspect:()=>Ge,isNaN:()=>Qh,isNumeric:()=>$t,isProxyEnabled:()=>_u,isRegExp:()=>Yh,objDisplay:()=>_a,overwriteChainableMethod:()=>Sb,overwriteMethod:()=>Tb,overwriteProperty:()=>yb,proxify:()=>Sc,test:()=>cb,transferFlags:()=>Bn,type:()=>rt});var Qr={};sb(Qr,{compatibleConstructor:()=>XM,compatibleInstance:()=>ZM,compatibleMessage:()=>JM,getConstructorName:()=>eF,getMessage:()=>tF});function Jh(t){return t instanceof Error||Object.prototype.toString.call(t)==="[object Error]"}N(Jh,"isErrorInstance");function YM(t){return Object.prototype.toString.call(t)==="[object RegExp]"}N(YM,"isRegExp");function ZM(t,e){return Jh(e)&&t===e}N(ZM,"compatibleInstance");function XM(t,e){return Jh(e)?t.constructor===e.constructor||t instanceof e.constructor:(typeof e=="object"||typeof e=="function")&&e.prototype?t.constructor===e||t instanceof e:!1}N(XM,"compatibleConstructor");function JM(t,e){let r=typeof t=="string"?t:t.message;return YM(e)?e.test(r):typeof e=="string"?r.indexOf(e)!==-1:!1}N(JM,"compatibleMessage");function eF(t){let e=t;return Jh(t)?e=t.constructor.name:typeof t=="function"&&(e=t.name,e===""&&(e=new t().name||e)),e}N(eF,"getConstructorName");function tF(t){let e="";return t&&t.message?e=t.message:typeof t=="string"&&(e=t),e}N(tF,"getMessage");function Le(t,e,r){var n=t.__flags||(t.__flags=Object.create(null));if(arguments.length===3)n[e]=r;else return n[e]}N(Le,"flag");function cb(t,e){var r=Le(t,"negate"),n=e[0];return r?!n:n}N(cb,"test");function rt(t){if(typeof t>"u")return"undefined";if(t===null)return"null";let e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}N(rt,"type");var E7="captureStackTrace"in Error,Qe=class rF extends Error{static{N(this,"AssertionError")}message;get name(){return"AssertionError"}get ok(){return!1}constructor(e="Unspecified AssertionError",r,n){super(e),this.message=e,E7&&Error.captureStackTrace(this,n||rF);for(let i in r)i in this||(this[i]=r[i])}toJSON(e){return{...this,name:this.name,message:this.message,ok:!1,stack:e!==!1?this.stack:void 0}}};function nF(t,e){var r=Le(t,"message"),n=Le(t,"ssfi");r=r?r+": ":"",t=Le(t,"object"),e=e.map(function(s){return s.toLowerCase()}),e.sort();var i=e.map(function(s,l){var u=~["a","e","i","o","u"].indexOf(s.charAt(0))?"an":"a",m=e.length>1&&l===e.length-1?"or ":"";return m+u+" "+s}).join(", "),o=rt(t).toLowerCase();if(!e.some(function(s){return o===s}))throw new Qe(r+"object tested must be "+i+", but "+o+" given",void 0,n)}N(nF,"expectTypes");function ey(t,e){return e.length>4?e[4]:t._obj}N(ey,"getActual");var BM={bold:["1","22"],dim:["2","22"],italic:["3","23"],underline:["4","24"],inverse:["7","27"],hidden:["8","28"],strike:["9","29"],black:["30","39"],red:["31","39"],green:["32","39"],yellow:["33","39"],blue:["34","39"],magenta:["35","39"],cyan:["36","39"],white:["37","39"],brightblack:["30;1","39"],brightred:["31;1","39"],brightgreen:["32;1","39"],brightyellow:["33;1","39"],brightblue:["34;1","39"],brightmagenta:["35;1","39"],brightcyan:["36;1","39"],brightwhite:["37;1","39"],grey:["90","39"]},_7={special:"cyan",number:"yellow",bigint:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",symbol:"green",date:"magenta",regexp:"red"},Tc="\u2026";function iF(t,e){let r=BM[_7[e]]||BM[e]||"";return r?`\x1B[${r[0]}m${String(t)}\x1B[${r[1]}m`:String(t)}N(iF,"colorise");function oF({showHidden:t=!1,depth:e=2,colors:r=!1,customInspect:n=!0,showProxy:i=!1,maxArrayLength:o=1/0,breakLength:s=1/0,seen:l=[],truncate:u=1/0,stylize:m=String}={},d){let g={showHidden:!!t,depth:Number(e),colors:!!r,customInspect:!!n,showProxy:!!i,maxArrayLength:Number(o),breakLength:Number(s),truncate:Number(u),seen:l,inspect:d,stylize:m};return g.colors&&(g.stylize=iF),g}N(oF,"normaliseOptions");function aF(t){return t>="\uD800"&&t<="\uDBFF"}N(aF,"isHighSurrogate");function Oi(t,e,r=Tc){t=String(t);let n=r.length,i=t.length;if(n>e&&i>n)return r;if(i>e&&i>n){let o=e-n;return o>0&&aF(t[o-1])&&(o=o-1),`${t.slice(0,o)}${r}`}return t}N(Oi,"truncate");function vn(t,e,r,n=", "){r=r||e.inspect;let i=t.length;if(i===0)return"";let o=e.truncate,s="",l="",u="";for(let m=0;m<i;m+=1){let d=m+1===t.length,g=m+2===t.length;u=`${Tc}(${t.length-m})`;let y=t[m];e.truncate=o-s.length-(d?0:n.length);let x=l||r(y,e)+(d?"":n),E=s.length+x.length,w=E+u.length;if(d&&E>o&&s.length+u.length<=o||!d&&!g&&w>o||(l=d?"":r(t[m+1],e)+(g?"":n),!d&&g&&w>o&&E+l.length>o))break;if(s+=x,!d&&!g&&E+l.length>=o){u=`${Tc}(${t.length-m-1})`;break}u=""}return`${s}${u}`}N(vn,"inspectList");function sF(t){return t.match(/^[a-zA-Z_][a-zA-Z_0-9]*$/)?t:JSON.stringify(t).replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'")}N(sF,"quoteComplexKey");function xc([t,e],r){return r.truncate-=2,typeof t=="string"?t=sF(t):typeof t!="number"&&(t=`[${r.inspect(t,r)}]`),r.truncate-=t.length,e=r.inspect(e,r),`${t}: ${e}`}N(xc,"inspectProperty");function cF(t,e){let r=Object.keys(t).slice(t.length);if(!t.length&&!r.length)return"[]";e.truncate-=4;let n=vn(t,e);e.truncate-=n.length;let i="";return r.length&&(i=vn(r.map(o=>[o,t[o]]),e,xc)),`[ ${n}${i?`, ${i}`:""} ]`}N(cF,"inspectArray");var R7=N(t=>typeof Buffer=="function"&&t instanceof Buffer?"Buffer":t[Symbol.toStringTag]?t[Symbol.toStringTag]:t.constructor.name,"getArrayName");function pi(t,e){let r=R7(t);e.truncate-=r.length+4;let n=Object.keys(t).slice(t.length);if(!t.length&&!n.length)return`${r}[]`;let i="";for(let s=0;s<t.length;s++){let l=`${e.stylize(Oi(t[s],e.truncate),"number")}${s===t.length-1?"":", "}`;if(e.truncate-=l.length,t[s]!==t.length&&e.truncate<=3){i+=`${Tc}(${t.length-t[s]+1})`;break}i+=l}let o="";return n.length&&(o=vn(n.map(s=>[s,t[s]]),e,xc)),`${r}[ ${i}${o?`, ${o}`:""} ]`}N(pi,"inspectTypedArray");function lF(t,e){let r=t.toJSON();if(r===null)return"Invalid Date";let n=r.split("T"),i=n[0];return e.stylize(`${i}T${Oi(n[1],e.truncate-i.length-1)}`,"date")}N(lF,"inspectDate");function Gv(t,e){let r=t[Symbol.toStringTag]||"Function",n=t.name;return n?e.stylize(`[${r} ${Oi(n,e.truncate-11)}]`,"special"):e.stylize(`[${r}]`,"special")}N(Gv,"inspectFunction");function uF([t,e],r){return r.truncate-=4,t=r.inspect(t,r),r.truncate-=t.length,e=r.inspect(e,r),`${t} => ${e}`}N(uF,"inspectMapEntry");function pF(t){let e=[];return t.forEach((r,n)=>{e.push([n,r])}),e}N(pF,"mapToEntries");function mF(t,e){return t.size-1<=0?"Map{}":(e.truncate-=7,`Map{ ${vn(pF(t),e,uF)} }`)}N(mF,"inspectMap");var k7=Number.isNaN||(t=>t!==t);function Kv(t,e){return k7(t)?e.stylize("NaN","number"):t===1/0?e.stylize("Infinity","number"):t===-1/0?e.stylize("-Infinity","number"):t===0?e.stylize(1/t===1/0?"+0":"-0","number"):e.stylize(Oi(String(t),e.truncate),"number")}N(Kv,"inspectNumber");function Qv(t,e){let r=Oi(t.toString(),e.truncate-1);return r!==Tc&&(r+="n"),e.stylize(r,"bigint")}N(Qv,"inspectBigInt");function fF(t,e){let r=t.toString().split("/")[2],n=e.truncate-(2+r.length),i=t.source;return e.stylize(`/${Oi(i,n)}/${r}`,"regexp")}N(fF,"inspectRegExp");function dF(t){let e=[];return t.forEach(r=>{e.push(r)}),e}N(dF,"arrayFromSet");function gF(t,e){return t.size===0?"Set{}":(e.truncate-=7,`Set{ ${vn(dF(t),e)} }`)}N(gF,"inspectSet");var VM=new RegExp("['\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]","g"),A7={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"},P7=16,L7=4;function hF(t){return A7[t]||`\\u${`0000${t.charCodeAt(0).toString(P7)}`.slice(-L7)}`}N(hF,"escape");function Yv(t,e){return VM.test(t)&&(t=t.replace(VM,hF)),e.stylize(`'${Oi(t,e.truncate-2)}'`,"string")}N(Yv,"inspectString");function Zv(t){return"description"in Symbol.prototype?t.description?`Symbol(${t.description})`:"Symbol()":t.toString()}N(Zv,"inspectSymbol");var yF=N(()=>"Promise{\u2026}","getPromiseValue");try{let{getPromiseDetails:t,kPending:e,kRejected:r}=process.binding("util");Array.isArray(t(Promise.resolve()))&&(yF=N((n,i)=>{let[o,s]=t(n);return o===e?"Promise{<pending>}":`Promise${o===r?"!":""}{${i.inspect(s,i)}}`},"getPromiseValue"))}catch{}var D7=yF;function wu(t,e){let r=Object.getOwnPropertyNames(t),n=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[];if(r.length===0&&n.length===0)return"{}";if(e.truncate-=4,e.seen=e.seen||[],e.seen.includes(t))return"[Circular]";e.seen.push(t);let i=vn(r.map(l=>[l,t[l]]),e,xc),o=vn(n.map(l=>[l,t[l]]),e,xc);e.seen.pop();let s="";return i&&o&&(s=", "),`{ ${i}${s}${o} }`}N(wu,"inspectObject");var zv=typeof Symbol<"u"&&Symbol.toStringTag?Symbol.toStringTag:!1;function TF(t,e){let r="";return zv&&zv in t&&(r=t[zv]),r=r||t.constructor.name,(!r||r==="_class")&&(r="<Anonymous Class>"),e.truncate-=r.length,`${r}${wu(t,e)}`}N(TF,"inspectClass");function xF(t,e){return t.length===0?"Arguments[]":(e.truncate-=13,`Arguments[ ${vn(t,e)} ]`)}N(xF,"inspectArguments");var M7=["stack","line","column","name","message","fileName","lineNumber","columnNumber","number","description","cause"];function SF(t,e){let r=Object.getOwnPropertyNames(t).filter(s=>M7.indexOf(s)===-1),n=t.name;e.truncate-=n.length;let i="";if(typeof t.message=="string"?i=Oi(t.message,e.truncate):r.unshift("message"),i=i?`: ${i}`:"",e.truncate-=i.length+5,e.seen=e.seen||[],e.seen.includes(t))return"[Circular]";e.seen.push(t);let o=vn(r.map(s=>[s,t[s]]),e,xc);return`${n}${i}${o?` { ${o} }`:""}`}N(SF,"inspectObject");function vF([t,e],r){return r.truncate-=3,e?`${r.stylize(String(t),"yellow")}=${r.stylize(`"${e}"`,"string")}`:`${r.stylize(String(t),"yellow")}`}N(vF,"inspectAttribute");function zh(t,e){return vn(t,e,lb,`
`)}N(zh,"inspectHTMLCollection");function lb(t,e){let r=t.getAttributeNames(),n=t.tagName.toLowerCase(),i=e.stylize(`<${n}`,"special"),o=e.stylize(">","special"),s=e.stylize(`</${n}>`,"special");e.truncate-=n.length*2+5;let l="";r.length>0&&(l+=" ",l+=vn(r.map(d=>[d,t.getAttribute(d)]),e,vF," ")),e.truncate-=l.length;let u=e.truncate,m=zh(t.children,e);return m&&m.length>u&&(m=`${Tc}(${t.children.length})`),`${i}${l}${o}${m}${s}`}N(lb,"inspectHTML");var F7=typeof Symbol=="function"&&typeof Symbol.for=="function",qv=F7?Symbol.for("chai/inspect"):"@@chai/inspect",yc=!1;try{let t=w7();yc=t.inspect?t.inspect.custom:!1}catch{yc=!1}var WM=new WeakMap,$M={},jM={undefined:(t,e)=>e.stylize("undefined","undefined"),null:(t,e)=>e.stylize("null","null"),boolean:(t,e)=>e.stylize(String(t),"boolean"),Boolean:(t,e)=>e.stylize(String(t),"boolean"),number:Kv,Number:Kv,bigint:Qv,BigInt:Qv,string:Yv,String:Yv,function:Gv,Function:Gv,symbol:Zv,Symbol:Zv,Array:cF,Date:lF,Map:mF,Set:gF,RegExp:fF,Promise:D7,WeakSet:(t,e)=>e.stylize("WeakSet{\u2026}","special"),WeakMap:(t,e)=>e.stylize("WeakMap{\u2026}","special"),Arguments:xF,Int8Array:pi,Uint8Array:pi,Uint8ClampedArray:pi,Int16Array:pi,Uint16Array:pi,Int32Array:pi,Uint32Array:pi,Float32Array:pi,Float64Array:pi,Generator:()=>"",DataView:()=>"",ArrayBuffer:()=>"",Error:SF,HTMLCollection:zh,NodeList:zh},C7=N((t,e,r)=>qv in t&&typeof t[qv]=="function"?t[qv](e):yc&&yc in t&&typeof t[yc]=="function"?t[yc](e.depth,e):"inspect"in t&&typeof t.inspect=="function"?t.inspect(e.depth,e):"constructor"in t&&WM.has(t.constructor)?WM.get(t.constructor)(t,e):$M[r]?$M[r](t,e):"","inspectCustom"),I7=Object.prototype.toString;function qh(t,e={}){let r=oF(e,qh),{customInspect:n}=r,i=t===null?"null":typeof t;if(i==="object"&&(i=I7.call(t).slice(8,-1)),i in jM)return jM[i](t,r);if(n&&t){let s=C7(t,r,i);if(s)return typeof s=="string"?s:qh(s,r)}let o=t?Object.getPrototypeOf(t):!1;return o===Object.prototype||o===null?wu(t,r):t&&typeof HTMLElement=="function"&&t instanceof HTMLElement?lb(t,r):"constructor"in t?t.constructor!==Object?TF(t,r):wu(t,r):t===Object(t)?wu(t,r):r.stylize(String(t),i)}N(qh,"inspect");var yr={includeStack:!1,showDiff:!0,truncateThreshold:40,useProxy:!0,proxyExcludedKeys:["then","catch","inspect","toJSON"],deepEqual:null};function Ge(t,e,r,n){var i={colors:n,depth:typeof r>"u"?2:r,showHidden:e,truncate:yr.truncateThreshold?yr.truncateThreshold:1/0};return qh(t,i)}N(Ge,"inspect");function _a(t){var e=Ge(t),r=Object.prototype.toString.call(t);if(yr.truncateThreshold&&e.length>=yr.truncateThreshold){if(r==="[object Function]")return!t.name||t.name===""?"[Function]":"[Function: "+t.name+"]";if(r==="[object Array]")return"[ Array("+t.length+") ]";if(r==="[object Object]"){var n=Object.keys(t),i=n.length>2?n.splice(0,2).join(", ")+", ...":n.join(", ");return"{ Object ("+i+") }"}else return e}else return e}N(_a,"objDisplay");function ub(t,e){var r=Le(t,"negate"),n=Le(t,"object"),i=e[3],o=ey(t,e),s=r?e[2]:e[1],l=Le(t,"message");return typeof s=="function"&&(s=s()),s=s||"",s=s.replace(/#\{this\}/g,function(){return _a(n)}).replace(/#\{act\}/g,function(){return _a(o)}).replace(/#\{exp\}/g,function(){return _a(i)}),l?l+": "+s:s}N(ub,"getMessage");function Bn(t,e,r){var n=t.__flags||(t.__flags=Object.create(null));e.__flags||(e.__flags=Object.create(null)),r=arguments.length===3?r:!0;for(var i in n)(r||i!=="object"&&i!=="ssfi"&&i!=="lockSsfi"&&i!="message")&&(e.__flags[i]=n[i])}N(Bn,"transferFlags");function Xv(t){if(typeof t>"u")return"undefined";if(t===null)return"null";let e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}N(Xv,"type");function pb(){this._key="chai/deep-eql__"+Math.random()+Date.now()}N(pb,"FakeMap");pb.prototype={get:N(function(e){return e[this._key]},"get"),set:N(function(e,r){Object.isExtensible(e)&&Object.defineProperty(e,this._key,{value:r,configurable:!0})},"set")};var bF=typeof WeakMap=="function"?WeakMap:pb;function Jv(t,e,r){if(!r||Ra(t)||Ra(e))return null;var n=r.get(t);if(n){var i=n.get(e);if(typeof i=="boolean")return i}return null}N(Jv,"memoizeCompare");function bu(t,e,r,n){if(!(!r||Ra(t)||Ra(e))){var i=r.get(t);i?i.set(e,n):(i=new bF,i.set(e,n),r.set(t,i))}}N(bu,"memoizeSet");var wF=Eu;function Eu(t,e,r){if(r&&r.comparator)return eb(t,e,r);var n=mb(t,e);return n!==null?n:eb(t,e,r)}N(Eu,"deepEqual");function mb(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e?!0:Ra(t)||Ra(e)?!1:null}N(mb,"simpleEqual");function eb(t,e,r){r=r||{},r.memoize=r.memoize===!1?!1:r.memoize||new bF;var n=r&&r.comparator,i=Jv(t,e,r.memoize);if(i!==null)return i;var o=Jv(e,t,r.memoize);if(o!==null)return o;if(n){var s=n(t,e);if(s===!1||s===!0)return bu(t,e,r.memoize,s),s;var l=mb(t,e);if(l!==null)return l}var u=Xv(t);if(u!==Xv(e))return bu(t,e,r.memoize,!1),!1;bu(t,e,r.memoize,!0);var m=EF(t,e,u,r);return bu(t,e,r.memoize,m),m}N(eb,"extensiveDeepEqual");function EF(t,e,r,n){switch(r){case"String":case"Number":case"Boolean":case"Date":return Eu(t.valueOf(),e.valueOf());case"Promise":case"Symbol":case"function":case"WeakMap":case"WeakSet":return t===e;case"Error":return fb(t,e,["name","message","code"],n);case"Arguments":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"Array":return ko(t,e,n);case"RegExp":return _F(t,e);case"Generator":return RF(t,e,n);case"DataView":return ko(new Uint8Array(t.buffer),new Uint8Array(e.buffer),n);case"ArrayBuffer":return ko(new Uint8Array(t),new Uint8Array(e),n);case"Set":return tb(t,e,n);case"Map":return tb(t,e,n);case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.Instant":case"Temporal.ZonedDateTime":case"Temporal.PlainYearMonth":case"Temporal.PlainMonthDay":return t.equals(e);case"Temporal.Duration":return t.total("nanoseconds")===e.total("nanoseconds");case"Temporal.TimeZone":case"Temporal.Calendar":return t.toString()===e.toString();default:return AF(t,e,n)}}N(EF,"extensiveDeepEqualByType");function _F(t,e){return t.toString()===e.toString()}N(_F,"regexpEqual");function tb(t,e,r){try{if(t.size!==e.size)return!1;if(t.size===0)return!0}catch{return!1}var n=[],i=[];return t.forEach(N(function(s,l){n.push([s,l])},"gatherEntries")),e.forEach(N(function(s,l){i.push([s,l])},"gatherEntries")),ko(n.sort(),i.sort(),r)}N(tb,"entriesEqual");function ko(t,e,r){var n=t.length;if(n!==e.length)return!1;if(n===0)return!0;for(var i=-1;++i<n;)if(Eu(t[i],e[i],r)===!1)return!1;return!0}N(ko,"iterableEqual");function RF(t,e,r){return ko(Gh(t),Gh(e),r)}N(RF,"generatorEqual");function kF(t){return typeof Symbol<"u"&&typeof t=="object"&&typeof Symbol.iterator<"u"&&typeof t[Symbol.iterator]=="function"}N(kF,"hasIteratorFunction");function rb(t){if(kF(t))try{return Gh(t[Symbol.iterator]())}catch{return[]}return[]}N(rb,"getIteratorEntries");function Gh(t){for(var e=t.next(),r=[e.value];e.done===!1;)e=t.next(),r.push(e.value);return r}N(Gh,"getGeneratorEntries");function nb(t){var e=[];for(var r in t)e.push(r);return e}N(nb,"getEnumerableKeys");function ib(t){for(var e=[],r=Object.getOwnPropertySymbols(t),n=0;n<r.length;n+=1){var i=r[n];Object.getOwnPropertyDescriptor(t,i).enumerable&&e.push(i)}return e}N(ib,"getEnumerableSymbols");function fb(t,e,r,n){var i=r.length;if(i===0)return!0;for(var o=0;o<i;o+=1)if(Eu(t[r[o]],e[r[o]],n)===!1)return!1;return!0}N(fb,"keysEqual");function AF(t,e,r){var n=nb(t),i=nb(e),o=ib(t),s=ib(e);if(n=n.concat(o),i=i.concat(s),n.length&&n.length===i.length)return ko(ob(n).sort(),ob(i).sort())===!1?!1:fb(t,e,n,r);var l=rb(t),u=rb(e);return l.length&&l.length===u.length?(l.sort(),u.sort(),ko(l,u,r)):n.length===0&&l.length===0&&i.length===0&&u.length===0}N(AF,"objectEqual");function Ra(t){return t===null||typeof t!="object"}N(Ra,"isPrimitive");function ob(t){return t.map(N(function(r){return typeof r=="symbol"?r.toString():r},"mapSymbol"))}N(ob,"mapSymbols");function ty(t,e){return typeof t>"u"||t===null?!1:e in Object(t)}N(ty,"hasProperty");function PF(t){return t.replace(/([^\\])\[/g,"$1.[").match(/(\\\.|[^.]+?)+/g).map(n=>{if(n==="constructor"||n==="__proto__"||n==="prototype")return{};let o=/^\[(\d+)\]$/.exec(n),s=null;return o?s={i:parseFloat(o[1])}:s={p:n.replace(/\\([.[\]])/g,"$1")},s})}N(PF,"parsePath");function ab(t,e,r){let n=t,i=null;r=typeof r>"u"?e.length:r;for(let o=0;o<r;o++){let s=e[o];n&&(typeof s.p>"u"?n=n[s.i]:n=n[s.p],o===r-1&&(i=n))}return i}N(ab,"internalGetPathValue");function db(t,e){let r=PF(e),n=r[r.length-1],i={parent:r.length>1?ab(t,r,r.length-1):t,name:n.p||n.i,value:ab(t,r)};return i.exists=ty(i.parent,i.name),i}N(db,"getPathInfo");function b(t,e,r,n){return Le(this,"ssfi",r||b),Le(this,"lockSsfi",n),Le(this,"object",t),Le(this,"message",e),Le(this,"eql",yr.deepEqual||wF),Sc(this)}N(b,"Assertion");Object.defineProperty(b,"includeStack",{get:function(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),yr.includeStack},set:function(t){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),yr.includeStack=t}});Object.defineProperty(b,"showDiff",{get:function(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),yr.showDiff},set:function(t){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),yr.showDiff=t}});b.addProperty=function(t,e){gb(this.prototype,t,e)};b.addMethod=function(t,e){hb(this.prototype,t,e)};b.addChainableMethod=function(t,e,r){xb(this.prototype,t,e,r)};b.overwriteProperty=function(t,e){yb(this.prototype,t,e)};b.overwriteMethod=function(t,e){Tb(this.prototype,t,e)};b.overwriteChainableMethod=function(t,e,r){Sb(this.prototype,t,e,r)};b.prototype.assert=function(t,e,r,n,i,o){var s=cb(this,arguments);if(o!==!1&&(o=!0),n===void 0&&i===void 0&&(o=!1),yr.showDiff!==!0&&(o=!1),!s){e=ub(this,arguments);var l=ey(this,arguments),u={actual:l,expected:n,showDiff:o},m=wb(this,arguments);throw m&&(u.operator=m),new Qe(e,u,yr.includeStack?this.assert:Le(this,"ssfi"))}};Object.defineProperty(b.prototype,"_obj",{get:function(){return Le(this,"object")},set:function(t){Le(this,"object",t)}});function _u(){return yr.useProxy&&typeof Proxy<"u"&&typeof Reflect<"u"}N(_u,"isProxyEnabled");function gb(t,e,r){r=r===void 0?function(){}:r,Object.defineProperty(t,e,{get:N(function n(){!_u()&&!Le(this,"lockSsfi")&&Le(this,"ssfi",n);var i=r.call(this);if(i!==void 0)return i;var o=new b;return Bn(this,o),o},"propertyGetter"),configurable:!0})}N(gb,"addProperty");var O7=Object.getOwnPropertyDescriptor(function(){},"length");function Ru(t,e,r){return O7.configurable&&Object.defineProperty(t,"length",{get:function(){throw Error(r?"Invalid Chai property: "+e+'.length. Due to a compatibility issue, "length" cannot directly follow "'+e+'". Use "'+e+'.lengthOf" instead.':"Invalid Chai property: "+e+'.length. See docs for proper usage of "'+e+'".')}}),t}N(Ru,"addLengthGuard");function LF(t){var e=Object.getOwnPropertyNames(t);function r(i){e.indexOf(i)===-1&&e.push(i)}N(r,"addProperty");for(var n=Object.getPrototypeOf(t);n!==null;)Object.getOwnPropertyNames(n).forEach(r),n=Object.getPrototypeOf(n);return e}N(LF,"getProperties");var zM=["__flags","__methods","_obj","assert"];function Sc(t,e){return _u()?new Proxy(t,{get:N(function r(n,i){if(typeof i=="string"&&yr.proxyExcludedKeys.indexOf(i)===-1&&!Reflect.has(n,i)){if(e)throw Error("Invalid Chai property: "+e+"."+i+'. See docs for proper usage of "'+e+'".');var o=null,s=4;throw LF(n).forEach(function(l){if(!Object.prototype.hasOwnProperty(l)&&zM.indexOf(l)===-1){var u=DF(i,l,s);u<s&&(o=l,s=u)}}),Error(o!==null?"Invalid Chai property: "+i+'. Did you mean "'+o+'"?':"Invalid Chai property: "+i)}return zM.indexOf(i)===-1&&!Le(n,"lockSsfi")&&Le(n,"ssfi",r),Reflect.get(n,i)},"proxyGetter")}):t}N(Sc,"proxify");function DF(t,e,r){if(Math.abs(t.length-e.length)>=r)return r;var n=[];for(let o=0;o<=t.length;o++)n[o]=Array(e.length+1).fill(0),n[o][0]=o;for(let o=0;o<e.length;o++)n[0][o]=o;for(let o=1;o<=t.length;o++){var i=t.charCodeAt(o-1);for(let s=1;s<=e.length;s++){if(Math.abs(o-s)>=r){n[o][s]=r;continue}n[o][s]=Math.min(n[o-1][s]+1,n[o][s-1]+1,n[o-1][s-1]+(i===e.charCodeAt(s-1)?0:1))}}return n[t.length][e.length]}N(DF,"stringDistanceCapped");function hb(t,e,r){var n=N(function(){Le(this,"lockSsfi")||Le(this,"ssfi",n);var i=r.apply(this,arguments);if(i!==void 0)return i;var o=new b;return Bn(this,o),o},"methodWrapper");Ru(n,e,!1),t[e]=Sc(n,e)}N(hb,"addMethod");function yb(t,e,r){var n=Object.getOwnPropertyDescriptor(t,e),i=N(function(){},"_super");n&&typeof n.get=="function"&&(i=n.get),Object.defineProperty(t,e,{get:N(function o(){!_u()&&!Le(this,"lockSsfi")&&Le(this,"ssfi",o);var s=Le(this,"lockSsfi");Le(this,"lockSsfi",!0);var l=r(i).call(this);if(Le(this,"lockSsfi",s),l!==void 0)return l;var u=new b;return Bn(this,u),u},"overwritingPropertyGetter"),configurable:!0})}N(yb,"overwriteProperty");function Tb(t,e,r){var n=t[e],i=N(function(){throw new Error(e+" is not a function")},"_super");n&&typeof n=="function"&&(i=n);var o=N(function(){Le(this,"lockSsfi")||Le(this,"ssfi",o);var s=Le(this,"lockSsfi");Le(this,"lockSsfi",!0);var l=r(i).apply(this,arguments);if(Le(this,"lockSsfi",s),l!==void 0)return l;var u=new b;return Bn(this,u),u},"overwritingMethodWrapper");Ru(o,e,!1),t[e]=Sc(o,e)}N(Tb,"overwriteMethod");var N7=typeof Object.setPrototypeOf=="function",qM=N(function(){},"testFn"),U7=Object.getOwnPropertyNames(qM).filter(function(t){var e=Object.getOwnPropertyDescriptor(qM,t);return typeof e!="object"?!0:!e.configurable}),H7=Function.prototype.call,B7=Function.prototype.apply;function xb(t,e,r,n){typeof n!="function"&&(n=N(function(){},"chainingBehavior"));var i={method:r,chainingBehavior:n};t.__methods||(t.__methods={}),t.__methods[e]=i,Object.defineProperty(t,e,{get:N(function(){i.chainingBehavior.call(this);var s=N(function(){Le(this,"lockSsfi")||Le(this,"ssfi",s);var m=i.method.apply(this,arguments);if(m!==void 0)return m;var d=new b;return Bn(this,d),d},"chainableMethodWrapper");if(Ru(s,e,!0),N7){var l=Object.create(this);l.call=H7,l.apply=B7,Object.setPrototypeOf(s,l)}else{var u=Object.getOwnPropertyNames(t);u.forEach(function(m){if(U7.indexOf(m)===-1){var d=Object.getOwnPropertyDescriptor(t,m);Object.defineProperty(s,m,d)}})}return Bn(this,s),Sc(s)},"chainableMethodGetter"),configurable:!0})}N(xb,"addChainableMethod");function Sb(t,e,r,n){var i=t.__methods[e],o=i.chainingBehavior;i.chainingBehavior=N(function(){var u=n(o).call(this);if(u!==void 0)return u;var m=new b;return Bn(this,m),m},"overwritingChainableMethodGetter");var s=i.method;i.method=N(function(){var u=r(s).apply(this,arguments);if(u!==void 0)return u;var m=new b;return Bn(this,m),m},"overwritingChainableMethodWrapper")}N(Sb,"overwriteChainableMethod");function Kh(t,e){return Ge(t)<Ge(e)?-1:1}N(Kh,"compareByInspect");function vb(t){return typeof Object.getOwnPropertySymbols!="function"?[]:Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})}N(vb,"getOwnEnumerablePropertySymbols");function bb(t){return Object.keys(t).concat(vb(t))}N(bb,"getOwnEnumerableProperties");var Qh=Number.isNaN;function MF(t){var e=rt(t),r=["Array","Object","Function"];return r.indexOf(e)!==-1}N(MF,"isObjectType");function wb(t,e){var r=Le(t,"operator"),n=Le(t,"negate"),i=e[3],o=n?e[2]:e[1];if(r)return r;if(typeof o=="function"&&(o=o()),o=o||"",!!o&&!/\shave\s/.test(o)){var s=MF(i);return/\snot\s/.test(o)?s?"notDeepStrictEqual":"notStrictEqual":s?"deepStrictEqual":"strictEqual"}}N(wb,"getOperator");function ry(t){return t.name}N(ry,"getName");function Yh(t){return Object.prototype.toString.call(t)==="[object RegExp]"}N(Yh,"isRegExp");function $t(t){return["Number","BigInt"].includes(rt(t))}N($t,"isNumeric");var{flag:M}=jh;["to","be","been","is","and","has","have","with","that","which","at","of","same","but","does","still","also"].forEach(function(t){b.addProperty(t)});b.addProperty("not",function(){M(this,"negate",!0)});b.addProperty("deep",function(){M(this,"deep",!0)});b.addProperty("nested",function(){M(this,"nested",!0)});b.addProperty("own",function(){M(this,"own",!0)});b.addProperty("ordered",function(){M(this,"ordered",!0)});b.addProperty("any",function(){M(this,"any",!0),M(this,"all",!1)});b.addProperty("all",function(){M(this,"all",!0),M(this,"any",!1)});var GM={function:["function","asyncfunction","generatorfunction","asyncgeneratorfunction"],asyncfunction:["asyncfunction","asyncgeneratorfunction"],generatorfunction:["generatorfunction","asyncgeneratorfunction"],asyncgeneratorfunction:["asyncgeneratorfunction"]};function Eb(t,e){e&&M(this,"message",e),t=t.toLowerCase();var r=M(this,"object"),n=~["a","e","i","o","u"].indexOf(t.charAt(0))?"an ":"a ";let i=rt(r).toLowerCase();GM.function.includes(t)?this.assert(GM[t].includes(i),"expected #{this} to be "+n+t,"expected #{this} not to be "+n+t):this.assert(t===i,"expected #{this} to be "+n+t,"expected #{this} not to be "+n+t)}N(Eb,"an");b.addChainableMethod("an",Eb);b.addChainableMethod("a",Eb);function FF(t,e){return Qh(t)&&Qh(e)||t===e}N(FF,"SameValueZero");function ku(){M(this,"contains",!0)}N(ku,"includeChainingBehavior");function Au(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=rt(r).toLowerCase(),i=M(this,"message"),o=M(this,"negate"),s=M(this,"ssfi"),l=M(this,"deep"),u=l?"deep ":"",m=l?M(this,"eql"):FF;i=i?i+": ":"";var d=!1;switch(n){case"string":d=r.indexOf(t)!==-1;break;case"weakset":if(l)throw new Qe(i+"unable to use .deep.include with WeakSet",void 0,s);d=r.has(t);break;case"map":r.forEach(function(E){d=d||m(E,t)});break;case"set":l?r.forEach(function(E){d=d||m(E,t)}):d=r.has(t);break;case"array":l?d=r.some(function(E){return m(E,t)}):d=r.indexOf(t)!==-1;break;default:if(t!==Object(t))throw new Qe(i+"the given combination of arguments ("+n+" and "+rt(t).toLowerCase()+") is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a "+rt(t).toLowerCase(),void 0,s);var g=Object.keys(t),y=null,x=0;if(g.forEach(function(E){var w=new b(r);if(Bn(this,w,!0),M(w,"lockSsfi",!0),!o||g.length===1){w.property(E,t[E]);return}try{w.property(E,t[E])}catch(H){if(!Qr.compatibleConstructor(H,Qe))throw H;y===null&&(y=H),x++}},this),o&&g.length>1&&x===g.length)throw y;return}this.assert(d,"expected #{this} to "+u+"include "+Ge(t),"expected #{this} to not "+u+"include "+Ge(t))}N(Au,"include");b.addChainableMethod("include",Au,ku);b.addChainableMethod("contain",Au,ku);b.addChainableMethod("contains",Au,ku);b.addChainableMethod("includes",Au,ku);b.addProperty("ok",function(){this.assert(M(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")});b.addProperty("true",function(){this.assert(M(this,"object")===!0,"expected #{this} to be true","expected #{this} to be false",!M(this,"negate"))});b.addProperty("numeric",function(){let t=M(this,"object");this.assert(["Number","BigInt"].includes(rt(t)),"expected #{this} to be numeric","expected #{this} to not be numeric",!M(this,"negate"))});b.addProperty("callable",function(){let t=M(this,"object"),e=M(this,"ssfi"),r=M(this,"message"),n=r?`${r}: `:"",i=M(this,"negate"),o=i?`${n}expected ${Ge(t)} not to be a callable function`:`${n}expected ${Ge(t)} to be a callable function`,s=["Function","AsyncFunction","GeneratorFunction","AsyncGeneratorFunction"].includes(rt(t));if(s&&i||!s&&!i)throw new Qe(o,void 0,e)});b.addProperty("false",function(){this.assert(M(this,"object")===!1,"expected #{this} to be false","expected #{this} to be true",!!M(this,"negate"))});b.addProperty("null",function(){this.assert(M(this,"object")===null,"expected #{this} to be null","expected #{this} not to be null")});b.addProperty("undefined",function(){this.assert(M(this,"object")===void 0,"expected #{this} to be undefined","expected #{this} not to be undefined")});b.addProperty("NaN",function(){this.assert(Qh(M(this,"object")),"expected #{this} to be NaN","expected #{this} not to be NaN")});function _b(){var t=M(this,"object");this.assert(t!=null,"expected #{this} to exist","expected #{this} to not exist")}N(_b,"assertExist");b.addProperty("exist",_b);b.addProperty("exists",_b);b.addProperty("empty",function(){var t=M(this,"object"),e=M(this,"ssfi"),r=M(this,"message"),n;switch(r=r?r+": ":"",rt(t).toLowerCase()){case"array":case"string":n=t.length;break;case"map":case"set":n=t.size;break;case"weakmap":case"weakset":throw new Qe(r+".empty was passed a weak collection",void 0,e);case"function":var i=r+".empty was passed a function "+ry(t);throw new Qe(i.trim(),void 0,e);default:if(t!==Object(t))throw new Qe(r+".empty was passed non-string primitive "+Ge(t),void 0,e);n=Object.keys(t).length}this.assert(n===0,"expected #{this} to be empty","expected #{this} not to be empty")});function Rb(){var t=M(this,"object"),e=rt(t);this.assert(e==="Arguments","expected #{this} to be arguments but got "+e,"expected #{this} to not be arguments")}N(Rb,"checkArguments");b.addProperty("arguments",Rb);b.addProperty("Arguments",Rb);function ny(t,e){e&&M(this,"message",e);var r=M(this,"object");if(M(this,"deep")){var n=M(this,"lockSsfi");M(this,"lockSsfi",!0),this.eql(t),M(this,"lockSsfi",n)}else this.assert(t===r,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",t,this._obj,!0)}N(ny,"assertEqual");b.addMethod("equal",ny);b.addMethod("equals",ny);b.addMethod("eq",ny);function kb(t,e){e&&M(this,"message",e);var r=M(this,"eql");this.assert(r(t,M(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",t,this._obj,!0)}N(kb,"assertEql");b.addMethod("eql",kb);b.addMethod("eqls",kb);function iy(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"doLength"),i=M(this,"message"),o=i?i+": ":"",s=M(this,"ssfi"),l=rt(r).toLowerCase(),u=rt(t).toLowerCase();if(n&&l!=="map"&&l!=="set"&&new b(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&u!=="date")throw new Qe(o+"the argument to above must be a date",void 0,s);if(!$t(t)&&(n||$t(r)))throw new Qe(o+"the argument to above must be a number",void 0,s);if(!n&&l!=="date"&&!$t(r)){var m=l==="string"?"'"+r+"'":r;throw new Qe(o+"expected "+m+" to be a number or a date",void 0,s)}if(n){var d="length",g;l==="map"||l==="set"?(d="size",g=r.size):g=r.length,this.assert(g>t,"expected #{this} to have a "+d+" above #{exp} but got #{act}","expected #{this} to not have a "+d+" above #{exp}",t,g)}else this.assert(r>t,"expected #{this} to be above #{exp}","expected #{this} to be at most #{exp}",t)}N(iy,"assertAbove");b.addMethod("above",iy);b.addMethod("gt",iy);b.addMethod("greaterThan",iy);function oy(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"doLength"),i=M(this,"message"),o=i?i+": ":"",s=M(this,"ssfi"),l=rt(r).toLowerCase(),u=rt(t).toLowerCase(),m,d=!0;if(n&&l!=="map"&&l!=="set"&&new b(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&u!=="date")m=o+"the argument to least must be a date";else if(!$t(t)&&(n||$t(r)))m=o+"the argument to least must be a number";else if(!n&&l!=="date"&&!$t(r)){var g=l==="string"?"'"+r+"'":r;m=o+"expected "+g+" to be a number or a date"}else d=!1;if(d)throw new Qe(m,void 0,s);if(n){var y="length",x;l==="map"||l==="set"?(y="size",x=r.size):x=r.length,this.assert(x>=t,"expected #{this} to have a "+y+" at least #{exp} but got #{act}","expected #{this} to have a "+y+" below #{exp}",t,x)}else this.assert(r>=t,"expected #{this} to be at least #{exp}","expected #{this} to be below #{exp}",t)}N(oy,"assertLeast");b.addMethod("least",oy);b.addMethod("gte",oy);b.addMethod("greaterThanOrEqual",oy);function ay(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"doLength"),i=M(this,"message"),o=i?i+": ":"",s=M(this,"ssfi"),l=rt(r).toLowerCase(),u=rt(t).toLowerCase(),m,d=!0;if(n&&l!=="map"&&l!=="set"&&new b(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&u!=="date")m=o+"the argument to below must be a date";else if(!$t(t)&&(n||$t(r)))m=o+"the argument to below must be a number";else if(!n&&l!=="date"&&!$t(r)){var g=l==="string"?"'"+r+"'":r;m=o+"expected "+g+" to be a number or a date"}else d=!1;if(d)throw new Qe(m,void 0,s);if(n){var y="length",x;l==="map"||l==="set"?(y="size",x=r.size):x=r.length,this.assert(x<t,"expected #{this} to have a "+y+" below #{exp} but got #{act}","expected #{this} to not have a "+y+" below #{exp}",t,x)}else this.assert(r<t,"expected #{this} to be below #{exp}","expected #{this} to be at least #{exp}",t)}N(ay,"assertBelow");b.addMethod("below",ay);b.addMethod("lt",ay);b.addMethod("lessThan",ay);function sy(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"doLength"),i=M(this,"message"),o=i?i+": ":"",s=M(this,"ssfi"),l=rt(r).toLowerCase(),u=rt(t).toLowerCase(),m,d=!0;if(n&&l!=="map"&&l!=="set"&&new b(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&u!=="date")m=o+"the argument to most must be a date";else if(!$t(t)&&(n||$t(r)))m=o+"the argument to most must be a number";else if(!n&&l!=="date"&&!$t(r)){var g=l==="string"?"'"+r+"'":r;m=o+"expected "+g+" to be a number or a date"}else d=!1;if(d)throw new Qe(m,void 0,s);if(n){var y="length",x;l==="map"||l==="set"?(y="size",x=r.size):x=r.length,this.assert(x<=t,"expected #{this} to have a "+y+" at most #{exp} but got #{act}","expected #{this} to have a "+y+" above #{exp}",t,x)}else this.assert(r<=t,"expected #{this} to be at most #{exp}","expected #{this} to be above #{exp}",t)}N(sy,"assertMost");b.addMethod("most",sy);b.addMethod("lte",sy);b.addMethod("lessThanOrEqual",sy);b.addMethod("within",function(t,e,r){r&&M(this,"message",r);var n=M(this,"object"),i=M(this,"doLength"),o=M(this,"message"),s=o?o+": ":"",l=M(this,"ssfi"),u=rt(n).toLowerCase(),m=rt(t).toLowerCase(),d=rt(e).toLowerCase(),g,y=!0,x=m==="date"&&d==="date"?t.toISOString()+".."+e.toISOString():t+".."+e;if(i&&u!=="map"&&u!=="set"&&new b(n,o,l,!0).to.have.property("length"),!i&&u==="date"&&(m!=="date"||d!=="date"))g=s+"the arguments to within must be dates";else if((!$t(t)||!$t(e))&&(i||$t(n)))g=s+"the arguments to within must be numbers";else if(!i&&u!=="date"&&!$t(n)){var E=u==="string"?"'"+n+"'":n;g=s+"expected "+E+" to be a number or a date"}else y=!1;if(y)throw new Qe(g,void 0,l);if(i){var w="length",H;u==="map"||u==="set"?(w="size",H=n.size):H=n.length,this.assert(H>=t&&H<=e,"expected #{this} to have a "+w+" within "+x,"expected #{this} to not have a "+w+" within "+x)}else this.assert(n>=t&&n<=e,"expected #{this} to be within "+x,"expected #{this} to not be within "+x)});function Ab(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"ssfi"),i=M(this,"message");try{var o=r instanceof t}catch(l){throw l instanceof TypeError?(i=i?i+": ":"",new Qe(i+"The instanceof assertion needs a constructor but "+rt(t)+" was given.",void 0,n)):l}var s=ry(t);s==null&&(s="an unnamed constructor"),this.assert(o,"expected #{this} to be an instance of "+s,"expected #{this} to not be an instance of "+s)}N(Ab,"assertInstanceOf");b.addMethod("instanceof",Ab);b.addMethod("instanceOf",Ab);function Pb(t,e,r){r&&M(this,"message",r);var n=M(this,"nested"),i=M(this,"own"),o=M(this,"message"),s=M(this,"object"),l=M(this,"ssfi"),u=typeof t;if(o=o?o+": ":"",n){if(u!=="string")throw new Qe(o+"the argument to property must be a string when using nested syntax",void 0,l)}else if(u!=="string"&&u!=="number"&&u!=="symbol")throw new Qe(o+"the argument to property must be a string, number, or symbol",void 0,l);if(n&&i)throw new Qe(o+'The "nested" and "own" flags cannot be combined.',void 0,l);if(s==null)throw new Qe(o+"Target cannot be null or undefined.",void 0,l);var m=M(this,"deep"),d=M(this,"negate"),g=n?db(s,t):null,y=n?g.value:s[t],x=m?M(this,"eql"):(H,W)=>H===W,E="";m&&(E+="deep "),i&&(E+="own "),n&&(E+="nested "),E+="property ";var w;i?w=Object.prototype.hasOwnProperty.call(s,t):n?w=g.exists:w=ty(s,t),(!d||arguments.length===1)&&this.assert(w,"expected #{this} to have "+E+Ge(t),"expected #{this} to not have "+E+Ge(t)),arguments.length>1&&this.assert(w&&x(e,y),"expected #{this} to have "+E+Ge(t)+" of #{exp}, but got #{act}","expected #{this} to not have "+E+Ge(t)+" of #{act}",e,y),M(this,"object",y)}N(Pb,"assertProperty");b.addMethod("property",Pb);function Lb(t,e,r){M(this,"own",!0),Pb.apply(this,arguments)}N(Lb,"assertOwnProperty");b.addMethod("ownProperty",Lb);b.addMethod("haveOwnProperty",Lb);function Db(t,e,r){typeof e=="string"&&(r=e,e=null),r&&M(this,"message",r);var n=M(this,"object"),i=Object.getOwnPropertyDescriptor(Object(n),t),o=M(this,"eql");i&&e?this.assert(o(e,i),"expected the own property descriptor for "+Ge(t)+" on #{this} to match "+Ge(e)+", got "+Ge(i),"expected the own property descriptor for "+Ge(t)+" on #{this} to not match "+Ge(e),e,i,!0):this.assert(i,"expected #{this} to have an own property descriptor for "+Ge(t),"expected #{this} to not have an own property descriptor for "+Ge(t)),M(this,"object",i)}N(Db,"assertOwnPropertyDescriptor");b.addMethod("ownPropertyDescriptor",Db);b.addMethod("haveOwnPropertyDescriptor",Db);function Mb(){M(this,"doLength",!0)}N(Mb,"assertLengthChain");function Fb(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=rt(r).toLowerCase(),i=M(this,"message"),o=M(this,"ssfi"),s="length",l;switch(n){case"map":case"set":s="size",l=r.size;break;default:new b(r,i,o,!0).to.have.property("length"),l=r.length}this.assert(l==t,"expected #{this} to have a "+s+" of #{exp} but got #{act}","expected #{this} to not have a "+s+" of #{act}",t,l)}N(Fb,"assertLength");b.addChainableMethod("length",Fb,Mb);b.addChainableMethod("lengthOf",Fb,Mb);function Cb(t,e){e&&M(this,"message",e);var r=M(this,"object");this.assert(t.exec(r),"expected #{this} to match "+t,"expected #{this} not to match "+t)}N(Cb,"assertMatch");b.addMethod("match",Cb);b.addMethod("matches",Cb);b.addMethod("string",function(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"message"),i=M(this,"ssfi");new b(r,n,i,!0).is.a("string"),this.assert(~r.indexOf(t),"expected #{this} to contain "+Ge(t),"expected #{this} to not contain "+Ge(t))});function Ib(t){var e=M(this,"object"),r=rt(e),n=rt(t),i=M(this,"ssfi"),o=M(this,"deep"),s,l="",u,m=!0,d=M(this,"message");d=d?d+": ":"";var g=d+"when testing keys against an object or an array you must give a single Array|Object|String argument or multiple String arguments";if(r==="Map"||r==="Set")l=o?"deeply ":"",u=[],e.forEach(function(G,ie){u.push(ie)}),n!=="Array"&&(t=Array.prototype.slice.call(arguments));else{switch(u=bb(e),n){case"Array":if(arguments.length>1)throw new Qe(g,void 0,i);break;case"Object":if(arguments.length>1)throw new Qe(g,void 0,i);t=Object.keys(t);break;default:t=Array.prototype.slice.call(arguments)}t=t.map(function(G){return typeof G=="symbol"?G:String(G)})}if(!t.length)throw new Qe(d+"keys required",void 0,i);var y=t.length,x=M(this,"any"),E=M(this,"all"),w=t,H=o?M(this,"eql"):(G,ie)=>G===ie;if(!x&&!E&&(E=!0),x&&(m=w.some(function(G){return u.some(function(ie){return H(G,ie)})})),E&&(m=w.every(function(G){return u.some(function(ie){return H(G,ie)})}),M(this,"contains")||(m=m&&t.length==u.length)),y>1){t=t.map(function(G){return Ge(G)});var W=t.pop();E&&(s=t.join(", ")+", and "+W),x&&(s=t.join(", ")+", or "+W)}else s=Ge(t[0]);s=(y>1?"keys ":"key ")+s,s=(M(this,"contains")?"contain ":"have ")+s,this.assert(m,"expected #{this} to "+l+s,"expected #{this} to not "+l+s,w.slice(0).sort(Kh),u.sort(Kh),!0)}N(Ib,"assertKeys");b.addMethod("keys",Ib);b.addMethod("key",Ib);function cy(t,e,r){r&&M(this,"message",r);var n=M(this,"object"),i=M(this,"ssfi"),o=M(this,"message"),s=M(this,"negate")||!1;new b(n,o,i,!0).is.a("function"),(Yh(t)||typeof t=="string")&&(e=t,t=null);let l,u=!1;try{n()}catch(G){u=!0,l=G}var m=t===void 0&&e===void 0,d=!!(t&&e),g=!1,y=!1;if(m||!m&&!s){var x="an error";t instanceof Error?x="#{exp}":t&&(x=Qr.getConstructorName(t));let G=l;if(l instanceof Error)G=l.toString();else if(typeof l=="string")G=l;else if(l&&(typeof l=="object"||typeof l=="function"))try{G=Qr.getConstructorName(l)}catch{}this.assert(u,"expected #{this} to throw "+x,"expected #{this} to not throw an error but #{act} was thrown",t&&t.toString(),G)}if(t&&l){if(t instanceof Error){var E=Qr.compatibleInstance(l,t);E===s&&(d&&s?g=!0:this.assert(s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l&&!s?" but #{act} was thrown":""),t.toString(),l.toString()))}var w=Qr.compatibleConstructor(l,t);w===s&&(d&&s?g=!0:this.assert(s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&Qr.getConstructorName(t),l instanceof Error?l.toString():l&&Qr.getConstructorName(l)))}if(l&&e!==void 0&&e!==null){var H="including";Yh(e)&&(H="matching");var W=Qr.compatibleMessage(l,e);W===s&&(d&&s?y=!0:this.assert(s,"expected #{this} to throw error "+H+" #{exp} but got #{act}","expected #{this} to throw error not "+H+" #{exp}",e,Qr.getMessage(l)))}g&&y&&this.assert(s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&Qr.getConstructorName(t),l instanceof Error?l.toString():l&&Qr.getConstructorName(l)),M(this,"object",l)}N(cy,"assertThrows");b.addMethod("throw",cy);b.addMethod("throws",cy);b.addMethod("Throw",cy);function Ob(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"itself"),i=typeof r=="function"&&!n?r.prototype[t]:r[t];this.assert(typeof i=="function","expected #{this} to respond to "+Ge(t),"expected #{this} to not respond to "+Ge(t))}N(Ob,"respondTo");b.addMethod("respondTo",Ob);b.addMethod("respondsTo",Ob);b.addProperty("itself",function(){M(this,"itself",!0)});function Nb(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=t(r);this.assert(n,"expected #{this} to satisfy "+_a(t),"expected #{this} to not satisfy"+_a(t),!M(this,"negate"),n)}N(Nb,"satisfy");b.addMethod("satisfy",Nb);b.addMethod("satisfies",Nb);function Ub(t,e,r){r&&M(this,"message",r);var n=M(this,"object"),i=M(this,"message"),o=M(this,"ssfi");new b(n,i,o,!0).is.numeric;let s="A `delta` value is required for `closeTo`";if(e==null)throw new Qe(i?`${i}: ${s}`:s,void 0,o);if(new b(e,i,o,!0).is.numeric,s="A `expected` value is required for `closeTo`",t==null)throw new Qe(i?`${i}: ${s}`:s,void 0,o);new b(t,i,o,!0).is.numeric;let l=N(m=>m<0n?-m:m,"abs"),u=N(m=>parseFloat(parseFloat(m).toPrecision(12)),"strip");this.assert(u(l(n-t))<=e,"expected #{this} to be close to "+t+" +/- "+e,"expected #{this} not to be close to "+t+" +/- "+e)}N(Ub,"closeTo");b.addMethod("closeTo",Ub);b.addMethod("approximately",Ub);function CF(t,e,r,n,i){let o=Array.from(e),s=Array.from(t);if(!n){if(s.length!==o.length)return!1;o=o.slice()}return s.every(function(l,u){if(i)return r?r(l,o[u]):l===o[u];if(!r){var m=o.indexOf(l);return m===-1?!1:(n||o.splice(m,1),!0)}return o.some(function(d,g){return r(l,d)?(n||o.splice(g,1),!0):!1})})}N(CF,"isSubsetOf");b.addMethod("members",function(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"message"),i=M(this,"ssfi");new b(r,n,i,!0).to.be.iterable,new b(t,n,i,!0).to.be.iterable;var o=M(this,"contains"),s=M(this,"ordered"),l,u,m;o?(l=s?"an ordered superset":"a superset",u="expected #{this} to be "+l+" of #{exp}",m="expected #{this} to not be "+l+" of #{exp}"):(l=s?"ordered members":"members",u="expected #{this} to have the same "+l+" as #{exp}",m="expected #{this} to not have the same "+l+" as #{exp}");var d=M(this,"deep")?M(this,"eql"):void 0;this.assert(CF(t,r,d,o,s),u,m,t,r,!0)});b.addProperty("iterable",function(t){t&&M(this,"message",t);var e=M(this,"object");this.assert(e!=null&&e[Symbol.iterator],"expected #{this} to be an iterable","expected #{this} to not be an iterable",e)});function IF(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"message"),i=M(this,"ssfi"),o=M(this,"contains"),s=M(this,"deep"),l=M(this,"eql");new b(t,n,i,!0).to.be.an("array"),o?this.assert(t.some(function(u){return r.indexOf(u)>-1}),"expected #{this} to contain one of #{exp}","expected #{this} to not contain one of #{exp}",t,r):s?this.assert(t.some(function(u){return l(r,u)}),"expected #{this} to deeply equal one of #{exp}","expected #{this} to deeply equal one of #{exp}",t,r):this.assert(t.indexOf(r)>-1,"expected #{this} to be one of #{exp}","expected #{this} to not be one of #{exp}",t,r)}N(IF,"oneOf");b.addMethod("oneOf",IF);function Hb(t,e,r){r&&M(this,"message",r);var n=M(this,"object"),i=M(this,"message"),o=M(this,"ssfi");new b(n,i,o,!0).is.a("function");var s;e?(new b(t,i,o,!0).to.have.property(e),s=t[e]):(new b(t,i,o,!0).is.a("function"),s=t()),n();var l=e==null?t():t[e],u=e==null?s:"."+e;M(this,"deltaMsgObj",u),M(this,"initialDeltaValue",s),M(this,"finalDeltaValue",l),M(this,"deltaBehavior","change"),M(this,"realDelta",l!==s),this.assert(s!==l,"expected "+u+" to change","expected "+u+" to not change")}N(Hb,"assertChanges");b.addMethod("change",Hb);b.addMethod("changes",Hb);function Bb(t,e,r){r&&M(this,"message",r);var n=M(this,"object"),i=M(this,"message"),o=M(this,"ssfi");new b(n,i,o,!0).is.a("function");var s;e?(new b(t,i,o,!0).to.have.property(e),s=t[e]):(new b(t,i,o,!0).is.a("function"),s=t()),new b(s,i,o,!0).is.a("number"),n();var l=e==null?t():t[e],u=e==null?s:"."+e;M(this,"deltaMsgObj",u),M(this,"initialDeltaValue",s),M(this,"finalDeltaValue",l),M(this,"deltaBehavior","increase"),M(this,"realDelta",l-s),this.assert(l-s>0,"expected "+u+" to increase","expected "+u+" to not increase")}N(Bb,"assertIncreases");b.addMethod("increase",Bb);b.addMethod("increases",Bb);function Vb(t,e,r){r&&M(this,"message",r);var n=M(this,"object"),i=M(this,"message"),o=M(this,"ssfi");new b(n,i,o,!0).is.a("function");var s;e?(new b(t,i,o,!0).to.have.property(e),s=t[e]):(new b(t,i,o,!0).is.a("function"),s=t()),new b(s,i,o,!0).is.a("number"),n();var l=e==null?t():t[e],u=e==null?s:"."+e;M(this,"deltaMsgObj",u),M(this,"initialDeltaValue",s),M(this,"finalDeltaValue",l),M(this,"deltaBehavior","decrease"),M(this,"realDelta",s-l),this.assert(l-s<0,"expected "+u+" to decrease","expected "+u+" to not decrease")}N(Vb,"assertDecreases");b.addMethod("decrease",Vb);b.addMethod("decreases",Vb);function OF(t,e){e&&M(this,"message",e);var r=M(this,"deltaMsgObj"),n=M(this,"initialDeltaValue"),i=M(this,"finalDeltaValue"),o=M(this,"deltaBehavior"),s=M(this,"realDelta"),l;o==="change"?l=Math.abs(i-n)===Math.abs(t):l=s===Math.abs(t),this.assert(l,"expected "+r+" to "+o+" by "+t,"expected "+r+" to not "+o+" by "+t)}N(OF,"assertDelta");b.addMethod("by",OF);b.addProperty("extensible",function(){var t=M(this,"object"),e=t===Object(t)&&Object.isExtensible(t);this.assert(e,"expected #{this} to be extensible","expected #{this} to not be extensible")});b.addProperty("sealed",function(){var t=M(this,"object"),e=t===Object(t)?Object.isSealed(t):!0;this.assert(e,"expected #{this} to be sealed","expected #{this} to not be sealed")});b.addProperty("frozen",function(){var t=M(this,"object"),e=t===Object(t)?Object.isFrozen(t):!0;this.assert(e,"expected #{this} to be frozen","expected #{this} to not be frozen")});b.addProperty("finite",function(t){var e=M(this,"object");this.assert(typeof e=="number"&&isFinite(e),"expected #{this} to be a finite number","expected #{this} to not be a finite number")});function Zh(t,e){return t===e?!0:typeof e!=typeof t?!1:typeof t!="object"||t===null?t===e:e?Array.isArray(t)?Array.isArray(e)?t.every(function(r){return e.some(function(n){return Zh(r,n)})}):!1:t instanceof Date?e instanceof Date?t.getTime()===e.getTime():!1:Object.keys(t).every(function(r){var n=t[r],i=e[r];return typeof n=="object"&&n!==null&&i!==null?Zh(n,i):typeof n=="function"?n(i):i===n}):!1}N(Zh,"compareSubset");b.addMethod("containSubset",function(t){let e=Le(this,"object"),r=yr.showDiff;this.assert(Zh(t,e),"expected #{act} to contain subset #{exp}","expected #{act} to not contain subset #{exp}",t,e,r)});function Xh(t,e){return new b(t,e)}N(Xh,"expect");Xh.fail=function(t,e,r,n){throw arguments.length<2&&(r=t,t=void 0),r=r||"expect.fail()",new Qe(r,{actual:t,expected:e,operator:n},Xh.fail)};var NF={};sb(NF,{Should:()=>W7,should:()=>V7});function Wb(){function t(){return this instanceof String||this instanceof Number||this instanceof Boolean||typeof Symbol=="function"&&this instanceof Symbol||typeof BigInt=="function"&&this instanceof BigInt?new b(this.valueOf(),null,t):new b(this,null,t)}N(t,"shouldGetter");function e(n){Object.defineProperty(this,"should",{value:n,enumerable:!0,configurable:!0,writable:!0})}N(e,"shouldSetter"),Object.defineProperty(Object.prototype,"should",{set:e,get:t,configurable:!0});var r={};return r.fail=function(n,i,o,s){throw arguments.length<2&&(o=n,n=void 0),o=o||"should.fail()",new Qe(o,{actual:n,expected:i,operator:s},r.fail)},r.equal=function(n,i,o){new b(n,o).to.equal(i)},r.Throw=function(n,i,o,s){new b(n,s).to.Throw(i,o)},r.exist=function(n,i){new b(n,i).to.exist},r.not={},r.not.equal=function(n,i,o){new b(n,o).to.not.equal(i)},r.not.Throw=function(n,i,o,s){new b(n,s).to.not.Throw(i,o)},r.not.exist=function(n,i){new b(n,i).to.not.exist},r.throw=r.Throw,r.not.throw=r.not.Throw,r}N(Wb,"loadShould");var V7=Wb,W7=Wb;function v(t,e){var r=new b(null,null,v,!0);r.assert(t,e,"[ negation message unavailable ]")}N(v,"assert");v.fail=function(t,e,r,n){throw arguments.length<2&&(r=t,t=void 0),r=r||"assert.fail()",new Qe(r,{actual:t,expected:e,operator:n},v.fail)};v.isOk=function(t,e){new b(t,e,v.isOk,!0).is.ok};v.isNotOk=function(t,e){new b(t,e,v.isNotOk,!0).is.not.ok};v.equal=function(t,e,r){var n=new b(t,r,v.equal,!0);n.assert(e==Le(n,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",e,t,!0)};v.notEqual=function(t,e,r){var n=new b(t,r,v.notEqual,!0);n.assert(e!=Le(n,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",e,t,!0)};v.strictEqual=function(t,e,r){new b(t,r,v.strictEqual,!0).to.equal(e)};v.notStrictEqual=function(t,e,r){new b(t,r,v.notStrictEqual,!0).to.not.equal(e)};v.deepEqual=v.deepStrictEqual=function(t,e,r){new b(t,r,v.deepEqual,!0).to.eql(e)};v.notDeepEqual=function(t,e,r){new b(t,r,v.notDeepEqual,!0).to.not.eql(e)};v.isAbove=function(t,e,r){new b(t,r,v.isAbove,!0).to.be.above(e)};v.isAtLeast=function(t,e,r){new b(t,r,v.isAtLeast,!0).to.be.least(e)};v.isBelow=function(t,e,r){new b(t,r,v.isBelow,!0).to.be.below(e)};v.isAtMost=function(t,e,r){new b(t,r,v.isAtMost,!0).to.be.most(e)};v.isTrue=function(t,e){new b(t,e,v.isTrue,!0).is.true};v.isNotTrue=function(t,e){new b(t,e,v.isNotTrue,!0).to.not.equal(!0)};v.isFalse=function(t,e){new b(t,e,v.isFalse,!0).is.false};v.isNotFalse=function(t,e){new b(t,e,v.isNotFalse,!0).to.not.equal(!1)};v.isNull=function(t,e){new b(t,e,v.isNull,!0).to.equal(null)};v.isNotNull=function(t,e){new b(t,e,v.isNotNull,!0).to.not.equal(null)};v.isNaN=function(t,e){new b(t,e,v.isNaN,!0).to.be.NaN};v.isNotNaN=function(t,e){new b(t,e,v.isNotNaN,!0).not.to.be.NaN};v.exists=function(t,e){new b(t,e,v.exists,!0).to.exist};v.notExists=function(t,e){new b(t,e,v.notExists,!0).to.not.exist};v.isUndefined=function(t,e){new b(t,e,v.isUndefined,!0).to.equal(void 0)};v.isDefined=function(t,e){new b(t,e,v.isDefined,!0).to.not.equal(void 0)};v.isCallable=function(t,e){new b(t,e,v.isCallable,!0).is.callable};v.isNotCallable=function(t,e){new b(t,e,v.isNotCallable,!0).is.not.callable};v.isObject=function(t,e){new b(t,e,v.isObject,!0).to.be.a("object")};v.isNotObject=function(t,e){new b(t,e,v.isNotObject,!0).to.not.be.a("object")};v.isArray=function(t,e){new b(t,e,v.isArray,!0).to.be.an("array")};v.isNotArray=function(t,e){new b(t,e,v.isNotArray,!0).to.not.be.an("array")};v.isString=function(t,e){new b(t,e,v.isString,!0).to.be.a("string")};v.isNotString=function(t,e){new b(t,e,v.isNotString,!0).to.not.be.a("string")};v.isNumber=function(t,e){new b(t,e,v.isNumber,!0).to.be.a("number")};v.isNotNumber=function(t,e){new b(t,e,v.isNotNumber,!0).to.not.be.a("number")};v.isNumeric=function(t,e){new b(t,e,v.isNumeric,!0).is.numeric};v.isNotNumeric=function(t,e){new b(t,e,v.isNotNumeric,!0).is.not.numeric};v.isFinite=function(t,e){new b(t,e,v.isFinite,!0).to.be.finite};v.isBoolean=function(t,e){new b(t,e,v.isBoolean,!0).to.be.a("boolean")};v.isNotBoolean=function(t,e){new b(t,e,v.isNotBoolean,!0).to.not.be.a("boolean")};v.typeOf=function(t,e,r){new b(t,r,v.typeOf,!0).to.be.a(e)};v.notTypeOf=function(t,e,r){new b(t,r,v.notTypeOf,!0).to.not.be.a(e)};v.instanceOf=function(t,e,r){new b(t,r,v.instanceOf,!0).to.be.instanceOf(e)};v.notInstanceOf=function(t,e,r){new b(t,r,v.notInstanceOf,!0).to.not.be.instanceOf(e)};v.include=function(t,e,r){new b(t,r,v.include,!0).include(e)};v.notInclude=function(t,e,r){new b(t,r,v.notInclude,!0).not.include(e)};v.deepInclude=function(t,e,r){new b(t,r,v.deepInclude,!0).deep.include(e)};v.notDeepInclude=function(t,e,r){new b(t,r,v.notDeepInclude,!0).not.deep.include(e)};v.nestedInclude=function(t,e,r){new b(t,r,v.nestedInclude,!0).nested.include(e)};v.notNestedInclude=function(t,e,r){new b(t,r,v.notNestedInclude,!0).not.nested.include(e)};v.deepNestedInclude=function(t,e,r){new b(t,r,v.deepNestedInclude,!0).deep.nested.include(e)};v.notDeepNestedInclude=function(t,e,r){new b(t,r,v.notDeepNestedInclude,!0).not.deep.nested.include(e)};v.ownInclude=function(t,e,r){new b(t,r,v.ownInclude,!0).own.include(e)};v.notOwnInclude=function(t,e,r){new b(t,r,v.notOwnInclude,!0).not.own.include(e)};v.deepOwnInclude=function(t,e,r){new b(t,r,v.deepOwnInclude,!0).deep.own.include(e)};v.notDeepOwnInclude=function(t,e,r){new b(t,r,v.notDeepOwnInclude,!0).not.deep.own.include(e)};v.match=function(t,e,r){new b(t,r,v.match,!0).to.match(e)};v.notMatch=function(t,e,r){new b(t,r,v.notMatch,!0).to.not.match(e)};v.property=function(t,e,r){new b(t,r,v.property,!0).to.have.property(e)};v.notProperty=function(t,e,r){new b(t,r,v.notProperty,!0).to.not.have.property(e)};v.propertyVal=function(t,e,r,n){new b(t,n,v.propertyVal,!0).to.have.property(e,r)};v.notPropertyVal=function(t,e,r,n){new b(t,n,v.notPropertyVal,!0).to.not.have.property(e,r)};v.deepPropertyVal=function(t,e,r,n){new b(t,n,v.deepPropertyVal,!0).to.have.deep.property(e,r)};v.notDeepPropertyVal=function(t,e,r,n){new b(t,n,v.notDeepPropertyVal,!0).to.not.have.deep.property(e,r)};v.ownProperty=function(t,e,r){new b(t,r,v.ownProperty,!0).to.have.own.property(e)};v.notOwnProperty=function(t,e,r){new b(t,r,v.notOwnProperty,!0).to.not.have.own.property(e)};v.ownPropertyVal=function(t,e,r,n){new b(t,n,v.ownPropertyVal,!0).to.have.own.property(e,r)};v.notOwnPropertyVal=function(t,e,r,n){new b(t,n,v.notOwnPropertyVal,!0).to.not.have.own.property(e,r)};v.deepOwnPropertyVal=function(t,e,r,n){new b(t,n,v.deepOwnPropertyVal,!0).to.have.deep.own.property(e,r)};v.notDeepOwnPropertyVal=function(t,e,r,n){new b(t,n,v.notDeepOwnPropertyVal,!0).to.not.have.deep.own.property(e,r)};v.nestedProperty=function(t,e,r){new b(t,r,v.nestedProperty,!0).to.have.nested.property(e)};v.notNestedProperty=function(t,e,r){new b(t,r,v.notNestedProperty,!0).to.not.have.nested.property(e)};v.nestedPropertyVal=function(t,e,r,n){new b(t,n,v.nestedPropertyVal,!0).to.have.nested.property(e,r)};v.notNestedPropertyVal=function(t,e,r,n){new b(t,n,v.notNestedPropertyVal,!0).to.not.have.nested.property(e,r)};v.deepNestedPropertyVal=function(t,e,r,n){new b(t,n,v.deepNestedPropertyVal,!0).to.have.deep.nested.property(e,r)};v.notDeepNestedPropertyVal=function(t,e,r,n){new b(t,n,v.notDeepNestedPropertyVal,!0).to.not.have.deep.nested.property(e,r)};v.lengthOf=function(t,e,r){new b(t,r,v.lengthOf,!0).to.have.lengthOf(e)};v.hasAnyKeys=function(t,e,r){new b(t,r,v.hasAnyKeys,!0).to.have.any.keys(e)};v.hasAllKeys=function(t,e,r){new b(t,r,v.hasAllKeys,!0).to.have.all.keys(e)};v.containsAllKeys=function(t,e,r){new b(t,r,v.containsAllKeys,!0).to.contain.all.keys(e)};v.doesNotHaveAnyKeys=function(t,e,r){new b(t,r,v.doesNotHaveAnyKeys,!0).to.not.have.any.keys(e)};v.doesNotHaveAllKeys=function(t,e,r){new b(t,r,v.doesNotHaveAllKeys,!0).to.not.have.all.keys(e)};v.hasAnyDeepKeys=function(t,e,r){new b(t,r,v.hasAnyDeepKeys,!0).to.have.any.deep.keys(e)};v.hasAllDeepKeys=function(t,e,r){new b(t,r,v.hasAllDeepKeys,!0).to.have.all.deep.keys(e)};v.containsAllDeepKeys=function(t,e,r){new b(t,r,v.containsAllDeepKeys,!0).to.contain.all.deep.keys(e)};v.doesNotHaveAnyDeepKeys=function(t,e,r){new b(t,r,v.doesNotHaveAnyDeepKeys,!0).to.not.have.any.deep.keys(e)};v.doesNotHaveAllDeepKeys=function(t,e,r){new b(t,r,v.doesNotHaveAllDeepKeys,!0).to.not.have.all.deep.keys(e)};v.throws=function(t,e,r,n){(typeof e=="string"||e instanceof RegExp)&&(r=e,e=null);var i=new b(t,n,v.throws,!0).to.throw(e,r);return Le(i,"object")};v.doesNotThrow=function(t,e,r,n){(typeof e=="string"||e instanceof RegExp)&&(r=e,e=null),new b(t,n,v.doesNotThrow,!0).to.not.throw(e,r)};v.operator=function(t,e,r,n){var i;switch(e){case"==":i=t==r;break;case"===":i=t===r;break;case">":i=t>r;break;case">=":i=t>=r;break;case"<":i=t<r;break;case"<=":i=t<=r;break;case"!=":i=t!=r;break;case"!==":i=t!==r;break;default:throw n=n&&n+": ",new Qe(n+'Invalid operator "'+e+'"',void 0,v.operator)}var o=new b(i,n,v.operator,!0);o.assert(Le(o,"object")===!0,"expected "+Ge(t)+" to be "+e+" "+Ge(r),"expected "+Ge(t)+" to not be "+e+" "+Ge(r))};v.closeTo=function(t,e,r,n){new b(t,n,v.closeTo,!0).to.be.closeTo(e,r)};v.approximately=function(t,e,r,n){new b(t,n,v.approximately,!0).to.be.approximately(e,r)};v.sameMembers=function(t,e,r){new b(t,r,v.sameMembers,!0).to.have.same.members(e)};v.notSameMembers=function(t,e,r){new b(t,r,v.notSameMembers,!0).to.not.have.same.members(e)};v.sameDeepMembers=function(t,e,r){new b(t,r,v.sameDeepMembers,!0).to.have.same.deep.members(e)};v.notSameDeepMembers=function(t,e,r){new b(t,r,v.notSameDeepMembers,!0).to.not.have.same.deep.members(e)};v.sameOrderedMembers=function(t,e,r){new b(t,r,v.sameOrderedMembers,!0).to.have.same.ordered.members(e)};v.notSameOrderedMembers=function(t,e,r){new b(t,r,v.notSameOrderedMembers,!0).to.not.have.same.ordered.members(e)};v.sameDeepOrderedMembers=function(t,e,r){new b(t,r,v.sameDeepOrderedMembers,!0).to.have.same.deep.ordered.members(e)};v.notSameDeepOrderedMembers=function(t,e,r){new b(t,r,v.notSameDeepOrderedMembers,!0).to.not.have.same.deep.ordered.members(e)};v.includeMembers=function(t,e,r){new b(t,r,v.includeMembers,!0).to.include.members(e)};v.notIncludeMembers=function(t,e,r){new b(t,r,v.notIncludeMembers,!0).to.not.include.members(e)};v.includeDeepMembers=function(t,e,r){new b(t,r,v.includeDeepMembers,!0).to.include.deep.members(e)};v.notIncludeDeepMembers=function(t,e,r){new b(t,r,v.notIncludeDeepMembers,!0).to.not.include.deep.members(e)};v.includeOrderedMembers=function(t,e,r){new b(t,r,v.includeOrderedMembers,!0).to.include.ordered.members(e)};v.notIncludeOrderedMembers=function(t,e,r){new b(t,r,v.notIncludeOrderedMembers,!0).to.not.include.ordered.members(e)};v.includeDeepOrderedMembers=function(t,e,r){new b(t,r,v.includeDeepOrderedMembers,!0).to.include.deep.ordered.members(e)};v.notIncludeDeepOrderedMembers=function(t,e,r){new b(t,r,v.notIncludeDeepOrderedMembers,!0).to.not.include.deep.ordered.members(e)};v.oneOf=function(t,e,r){new b(t,r,v.oneOf,!0).to.be.oneOf(e)};v.isIterable=function(t,e){if(t==null||!t[Symbol.iterator])throw e=e?`${e} expected ${Ge(t)} to be an iterable`:`expected ${Ge(t)} to be an iterable`,new Qe(e,void 0,v.isIterable)};v.changes=function(t,e,r,n){arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.changes,!0).to.change(e,r)};v.changesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.changesBy,!0).to.change(e,r).by(n)};v.doesNotChange=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.doesNotChange,!0).to.not.change(e,r)};v.changesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.changesButNotBy,!0).to.change(e,r).but.not.by(n)};v.increases=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.increases,!0).to.increase(e,r)};v.increasesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.increasesBy,!0).to.increase(e,r).by(n)};v.doesNotIncrease=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.doesNotIncrease,!0).to.not.increase(e,r)};v.increasesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.increasesButNotBy,!0).to.increase(e,r).but.not.by(n)};v.decreases=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.decreases,!0).to.decrease(e,r)};v.decreasesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.decreasesBy,!0).to.decrease(e,r).by(n)};v.doesNotDecrease=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new b(t,n,v.doesNotDecrease,!0).to.not.decrease(e,r)};v.doesNotDecreaseBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);return new b(t,i,v.doesNotDecreaseBy,!0).to.not.decrease(e,r).by(n)};v.decreasesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new b(t,i,v.decreasesButNotBy,!0).to.decrease(e,r).but.not.by(n)};v.ifError=function(t){if(t)throw t};v.isExtensible=function(t,e){new b(t,e,v.isExtensible,!0).to.be.extensible};v.isNotExtensible=function(t,e){new b(t,e,v.isNotExtensible,!0).to.not.be.extensible};v.isSealed=function(t,e){new b(t,e,v.isSealed,!0).to.be.sealed};v.isNotSealed=function(t,e){new b(t,e,v.isNotSealed,!0).to.not.be.sealed};v.isFrozen=function(t,e){new b(t,e,v.isFrozen,!0).to.be.frozen};v.isNotFrozen=function(t,e){new b(t,e,v.isNotFrozen,!0).to.not.be.frozen};v.isEmpty=function(t,e){new b(t,e,v.isEmpty,!0).to.be.empty};v.isNotEmpty=function(t,e){new b(t,e,v.isNotEmpty,!0).to.not.be.empty};v.containsSubset=function(t,e,r){new b(t,r).to.containSubset(e)};v.doesNotContainSubset=function(t,e,r){new b(t,r).to.not.containSubset(e)};var $7=[["isOk","ok"],["isNotOk","notOk"],["throws","throw"],["throws","Throw"],["isExtensible","extensible"],["isNotExtensible","notExtensible"],["isSealed","sealed"],["isNotSealed","notSealed"],["isFrozen","frozen"],["isNotFrozen","notFrozen"],["isEmpty","empty"],["isNotEmpty","notEmpty"],["isCallable","isFunction"],["isNotCallable","isNotFunction"],["containsSubset","containSubset"]];for(let[t,e]of $7)v[e]=v[t];var KM=[];function UF(t){let e={use:UF,AssertionError:Qe,util:jh,config:yr,expect:Xh,assert:v,Assertion:b,...NF};return~KM.indexOf(t)||(t(e,jh),KM.push(t)),e}N(UF,"use");var Pu=class{constructor(e,r,n){this._lineNumber=e,this._text=r,this._isLastLine=n}get lineNumber(){return this._lineNumber}get text(){return this._text}get range(){return new Z(this._lineNumber,0,this._lineNumber,this._text.length)}get rangeIncludingLineBreak(){return this._isLastLine?this.range:new Z(this._lineNumber,0,this._lineNumber+1,0)}get rangeTrimmed(){let e=/^(\s*)/.exec(this._text)[1].length;if(e===this._text.length)return;let r=this.text.trimEnd().length;return new Z(this._lineNumber,e,this._lineNumber,r)}get isEmptyOrWhitespace(){return this.rangeTrimmed==null}};var HF=an(require("node:path"),1),ly=class{get uri(){return this._uri}get filename(){return HF.default.basename(this._uri.path)}get languageId(){return this._languageId}get version(){return this._version}get lineCount(){return this._lineCount}get range(){let{end:e}=this.lineAt(this.lineCount-1).range;return new Z(0,0,e.line,e.character)}get eol(){return this._eol===`
`?"LF":"CRLF"}constructor(e,r,n,i,o){this._uri=e,this._languageId=r,this._version=n,this._eol=i,this._lines=o,this._lineCount=o.length,this._lineStarts=null,this._cachedTextValue=null}update(e){this._lines=e,this._lineCount=e.length,this._lineStarts=null,this._cachedTextValue=null}lineAt(e){let r;if(e instanceof Re?r=e.line:typeof e=="number"&&(r=e),typeof r!="number"||r<0||Math.floor(r)!==r)throw new Error("Illegal value for `line`");return r=Math.min(r,this._lines.length-1),new Pu(r,this._lines[r],r===this._lines.length-1)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.line-1)+e.character}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();let r=this._lineStarts.getIndexOf(e),n=this._lines[r.index].length;return new Re(r.index,Math.min(r.remainder,n))}getText(e){if(e===void 0)return this._cachedTextValue==null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue;if(e=this._validateRange(e),e.isEmpty)return"";if(e.isSingleLine)return this._lines[e.start.line].substring(e.start.character,e.end.character);let r=this._eol,n=e.start.line,i=e.end.line,o=[];o.push(this._lines[n].substring(e.start.character));for(let s=n+1;s<i;s++)o.push(this._lines[s]);return o.push(this._lines[i].substring(0,e.end.character)),o.join(r)}_validateRange(e){if(!(e instanceof Z))throw new Error("Invalid argument");let r=this._validatePosition(e.start),n=this._validatePosition(e.end);return r===e.start&&n===e.end?e:new Z(r.line,r.character,n.line,n.character)}_validatePosition(e){if(!(e instanceof Re))throw new Error("Invalid argument");if(this._lines.length===0)return e.with(0,0);let{line:r,character:n}=e,i=!1;if(r<0)r=0,n=0,i=!0;else if(r>=this._lines.length)r=this._lines.length-1,n=this._lines[r].length,i=!0;else{let o=this._lines[r].length;n<0?(n=0,i=!0):n>o&&(n=o,i=!0)}return i?new Re(r,n):e}_ensureLineStarts(){if(!this._lineStarts){let e=this._eol.length,r=this._lines.length,n=new Uint32Array(r);for(let i=0;i<r;i++)n[i]=this._lines[i].length+e;this._lineStarts=new $b(n)}}};function q7(t){if(t<0)return 0;let e=4294967295;return t>e?e:t|0}var $b=class{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}getCount(){return this.values.length}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=q7(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let r=this.prefixSumValidIndex[0]+1;r===0&&(this.prefixSum[0]=this.values[0],r++),e>=this.values.length&&(e=this.values.length-1);for(let n=r;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let r=0,n=this.values.length-1,i=0,o=0,s=0;for(;r<=n;)if(i=r+(n-r)/2|0,o=this.prefixSum[i],s=o-this.values[i],e<s)n=i-1;else if(e>=o)r=i+1;else break;return new jb(i,e-s)}},jb=class{constructor(e,r){this.index=e;this.remainder=r;this._prefixSumIndexOfResultBrand=void 0;this.index=e,this.remainder=r}};var uy=class{constructor(e){this.client=e;this.cursorlessVersion="0.0.0";this.workspaceFolders=void 0;this.disposables=[];this.quickPickReturnValue=void 0;this.onDidCloseTextDocument=Lu;this.onDidChangeActiveTextEditor=Lu;this.onDidChangeVisibleTextEditors=Lu;this.onDidChangeTextEditorSelection=Lu;this.onDidChangeTextEditorVisibleRanges=Lu;this.configuration=new nu,this.keyValueStore=new iu,this.messages=new ou,this.clipboard=new tu(this.client),this.capabilities=new bh,this.editorMap=new Map,this.documentMap=new Map,this.activeWindow=void 0,this.activeBuffer=void 0}async init(){let e=await LD(this.client);this.assetsRoot_=zb.default.join(e,"assets"),this.cursorlessNeovimPath=zb.default.join(e,"node","cursorless-neovim")}async showQuickPick(e,r){throw Error("showQuickPick Not implemented")}async setHighlightRanges(e,r,n){throw Error("setHighlightRanges Not implemented")}async flashRanges(e){console.debug("flashRanges Not implemented")}get assetsRoot(){if(this.assetsRoot_==null)throw Error("Field `assetsRoot` has not yet been mocked");return this.assetsRoot_}get runMode(){return HM()}get activeTextEditor(){return this.getActiveTextEditor()}get activeEditableTextEditor(){return this.getActiveTextEditor()}getActiveTextEditor(){let e=this.activeWindow?this.getTextEditor(this.activeWindow):void 0;return e===void 0&&console.debug("getActiveTextEditor: editor is undefined"),e}getTextEditor(e){for(let[r,n]of this.editorMap)if(r.id===e.id)return n}getTextDocument(e){for(let[r,n]of this.documentMap)if(r.id===e.id)return n}get visibleTextEditors(){return Array.from(this.editorMap.values())}get visibleNotebookEditors(){return[]}getEditableTextEditor(e){return e}async findInDocument(e,r){throw Error("findInDocument Not implemented")}async findInWorkspace(e){throw Error("findInWorkspace Not implemented")}async openTextDocument(e){throw Error("openTextDocument Not implemented")}async openUntitledTextDocument(e){throw Error("openUntitledTextDocument Not implemented")}async showInputBox(e){throw Error("TextDocumentChangeEvent Not implemented")}async executeCommand(e,...r){throw new Error("executeCommand Method not implemented.")}onDidChangeTextDocument(e){return BD(e)}onDidOpenTextDocument(e,r,n){return VD(e,r,n)}async updateTextEditor(e=!1){let r=await this.client.window,n=await r.buffer,i=await n.lines,o=i;i.length>=30&&(o=i.slice(0,15).concat(["..."]).concat(i.slice(-15))),console.debug(`updateTextEditor(): window:${r.id}, buffer:${n.id}, lines=${JSON.stringify(o)}`);let s,l;e?(s=[],l=[]):(s=await Sh(r,this.client),l=await PD(r,this.client,i));let u=this.toNeovimEditor(r,n,i,l,s);return qr().emitEvent("onDidOpenTextDocument",u.document),u}toNeovimEditor(e,r,n,i,o){let s=this.getTextDocument(r),l=this.getTextEditor(e);return s?(console.debug(`toNeovimEditor(): updating document: buffer=${r.id}`),s.update(n)):(console.debug(`toNeovimEditor(): creating new document: buffer=${r.id}`),s=new ly(qD.parse(`neovim://${r.id}`),"plaintext",1,`
`,n),this.documentMap.set(r,s)),l?(console.debug(`toNeovimEditor(): updating editor: window=${e.id}`),l.updateDocument(i,o,s)):(console.debug(`toNeovimEditor(): creating new editor: window=${e.id}`),l=new Eh(Nx(),this.client,this,e,s,i,o),this.editorMap.set(e,l)),this.activeBuffer=r,this.activeWindow=e,this.activeTextEditor}handleCommandError(e){ID(this.client,e.message)}disposeOnExit(...e){return this.disposables.push(...e),()=>(0,BF.pull)(this.disposables,...e)}};function Lu(){return{dispose(){}}}var py=class{constructor(e){this.client=e;this.signals={prePhrase:{getVersion:async()=>null}}}async getFocusedElementType(){let e=await this.client.mode;return e.mode==="t"||e.mode==="nt"?"terminal":"textEditor"}};var K7=BigInt(1e9);function VF(t,e=BigInt(1e6)){return Number(t*e/K7)/Number(e)}async function my(t,e=[],r=[],n,i,o,s,l){let u={documentContents:n.document.getText(),selections:n.selections.map(tk)};o!=null&&(u.marks=o),l!=null&&(u.metadata=l),e.includes("clipboard")||(u.clipboard=await i.clipboard.readText()),e.includes("visibleRanges")||(u.visibleRanges=n.visibleRanges.map(Jc));for(let m of fs){let d=t?.get(m),g=`${m}Mark`;d!=null&&!e.includes(g)&&(u[g]=d.map(y=>y.toPlainObject()))}if(r.includes("timeOffsetSeconds")){let m=s?.startTimestamp;if(m==null)throw new Error("No start timestamp provided but time offset was requested");let d=process.hrtime.bigint()-m;u.timeOffsetSeconds=VF(d)}return u}var Q7=an(xl(),1);function WF(t,e,r,n,i,o,s){return{commandServerApi:t,ide:i,neovimIDE:n,injectIde:s,scopeProvider:o,takeSnapshot(l,u,m,d,g){return my(e,l,u,m,d,g,void 0,void 0)},setStoredTarget(l,u,m){e.set(u,m?.map(d=>_D(l,d)))},hatTokenMap:r}}async function $F(t,e,r,n){let i={[CT]:async(...o)=>{(await t.mode).mode==="t"&&FD(t);try{await e.updateTextEditor();let l=await r.runCommandSafe(...o),u=vm(o);if(await n.getFocusedElementType()==="terminal"&&Yo(u)){let d=l;"fallback"in d&&d.fallback.action==="insert"&&CD(t)}return l}catch(l){if(e.runMode!=="test"){let u=l;console.error(u.stack),e.handleCommandError(u)}throw l}},"cursorless.repeatPreviousCommand":Ne,"cursorless.showCheatsheet":Ne,"cursorless.internal.updateCheatsheetDefaults":Ne,"cursorless.recordTestCase":Ne,"cursorless.recordOneTestCaseThenPause":Ne,"cursorless.pauseRecording":Ne,"cursorless.resumeRecording":Ne,"cursorless.takeSnapshot":Ne,"cursorless.recordScopeTests.showUnimplementedFacets":Ne,"cursorless.recordScopeTests.saveActiveDocument":Ne,"cursorless.showQuickPick":Ne,"cursorless.showDocumentation":Ne,"cursorless.showInstallationDependencies":Ne,"cursorless.migrateSnippets":Ne,"cursorless.private.logQuickActions":Ne,"cursorless.toggleDecorations":Ne,"cursorless.recomputeDecorationStyles":Ne,"cursorless.showScopeVisualizer":Ne,"cursorless.hideScopeVisualizer":Ne,"cursorless.analyzeCommandHistory":Ne,"cursorless.keyboard.escape":Ne,"cursorless.keyboard.targeted.targetHat":Ne,"cursorless.keyboard.targeted.targetScope":Ne,"cursorless.keyboard.targeted.targetSelection":Ne,"cursorless.keyboard.targeted.clearTarget":Ne,"cursorless.keyboard.targeted.runActionOnTarget":Ne,"cursorless.keyboard.modal.modeOn":Ne,"cursorless.keyboard.modal.modeOff":Ne,"cursorless.keyboard.modal.modeToggle":Ne,"cursorless.keyboard.undoTarget":Ne,"cursorless.keyboard.redoTarget":Ne,"cursorless.tutorial.start":Ne,"cursorless.tutorial.next":Ne,"cursorless.tutorial.previous":Ne,"cursorless.tutorial.restart":Ne,"cursorless.tutorial.resume":Ne,"cursorless.tutorial.list":Ne,"cursorless.documentationOpened":Ne};Object.entries(i).map(([o,s])=>qr().registerCommand(o,s))}async function Ne(...t){console.debug(`dummyCommandHandler(): args=${t}`)}async function jF(t){let e=t.nvim,r=new uy(e);await r.init();let n=r.runMode==="production"?r:new um(r,new sm,r.runMode==="test",void 0),i=new _p,o=new py(e),s=r.runMode==="test"?i:o,{commandApi:l,storedTargets:u,hatTokenMap:m,scopeProvider:d,injectIde:g}=await ED({ide:n,commandServerApi:s});await $F(e,r,l,s);let y={testHelpers:r.runMode==="test"?WF(i,u,m,r,n,d,g):void 0};qr().registerExtensionApi(kD,y),console.log("activate(): Cursorless extension loaded")}function zF(t){t.setOptions({dev:!1}),t.registerFunction("CursorlessLoadExtension",async()=>await Y7(t),{sync:!1})}async function Y7(t){console.log("==============================================================================================="),console.log("loadExtension(cursorless-neovim): start"),await jF(t),console.log("loadExtension(cursorless-neovim): done")}
/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)

itertools/dist/index.js:
  (* istanbul ignore else -- @preserve *)
  (* istanbul ignore if -- @preserve *)

chai/chai.js:
  (*!
   * Chai - flag utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - test utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - expectTypes utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getActual utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - message composition utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - transferFlags utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * http://chaijs.com
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - isProxyEnabled helper
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addLengthGuard utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getProperties utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - proxify utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addChainingMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteChainableMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - compareByInspect utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getOwnEnumerablePropertySymbols utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getOwnEnumerableProperties utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - isNaN utility
   * Copyright(c) 2012-2015 Sakthipriyan Vairamani <thechargingvolcano@gmail.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*! Bundled license information:
  
  deep-eql/index.js:
    (*!
     * deep-eql
     * Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>
     * MIT Licensed
     *)
    (*!
     * Check to see if the MemoizeMap has recorded a result of the two operands
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {MemoizeMap} memoizeMap
     * @returns {Boolean|null} result
    *)
    (*!
     * Set the result of the equality into the MemoizeMap
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {MemoizeMap} memoizeMap
     * @param {Boolean} result
    *)
    (*!
     * Primary Export
     *)
    (*!
     * The main logic of the `deepEqual` function.
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Object} [options] (optional) Additional options
     * @param {Array} [options.comparator] (optional) Override default algorithm, determining custom equality.
     * @param {Array} [options.memoize] (optional) Provide a custom memoization object which will cache the results of
        complex objects for a speed boost. By passing `false` you can disable memoization, but this will cause circular
        references to blow the stack.
     * @return {Boolean} equal match
    *)
    (*!
     * Compare two Regular Expressions for equality.
     *
     * @param {RegExp} leftHandOperand
     * @param {RegExp} rightHandOperand
     * @return {Boolean} result
     *)
    (*!
     * Compare two Sets/Maps for equality. Faster than other equality functions.
     *
     * @param {Set} leftHandOperand
     * @param {Set} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Simple equality for flat iterable objects such as Arrays, TypedArrays or Node.js buffers.
     *
     * @param {Iterable} leftHandOperand
     * @param {Iterable} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Simple equality for generator objects such as those returned by generator functions.
     *
     * @param {Iterable} leftHandOperand
     * @param {Iterable} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Determine if the given object has an @@iterator function.
     *
     * @param {Object} target
     * @return {Boolean} `true` if the object has an @@iterator function.
     *)
    (*!
     * Gets all iterator entries from the given Object. If the Object has no @@iterator function, returns an empty array.
     * This will consume the iterator - which could have side effects depending on the @@iterator implementation.
     *
     * @param {Object} target
     * @returns {Array} an array of entries from the @@iterator function
     *)
    (*!
     * Gets all entries from a Generator. This will consume the generator - which could have side effects.
     *
     * @param {Generator} target
     * @returns {Array} an array of entries from the Generator.
     *)
    (*!
     * Gets all own and inherited enumerable keys from a target.
     *
     * @param {Object} target
     * @returns {Array} an array of own and inherited enumerable keys from the target.
     *)
    (*!
     * Determines if two objects have matching values, given a set of keys. Defers to deepEqual for the equality check of
     * each key. If any value of the given key is not equal, the function will return false (early).
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Array} keys An array of keys to compare the values of leftHandOperand and rightHandOperand against
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Recursively check the equality of two Objects. Once basic sameness has been established it will defer to `deepEqual`
     * for each enumerable key in the object.
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Returns true if the argument is a primitive.
     *
     * This intentionally returns true for all objects that can be compared by reference,
     * including functions and symbols.
     *
     * @param {Mixed} value
     * @return {Boolean} result
     *)
  *)
*/
