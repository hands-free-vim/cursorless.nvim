"use strict";var EB=Object.create;var Lu=Object.defineProperty;var RB=Object.getOwnPropertyDescriptor;var kB=Object.getOwnPropertyNames;var PB=Object.getPrototypeOf,AB=Object.prototype.hasOwnProperty;var Ze=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),MB=(t,e)=>{for(var r in e)Lu(t,r,{get:e[r],enumerable:!0})},dE=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of kB(e))!AB.call(t,i)&&i!==r&&Lu(t,i,{get:()=>e[i],enumerable:!(n=RB(e,i))||n.enumerable});return t};var Sr=(t,e,r)=>(r=t!=null?EB(PB(t)):{},dE(e||!t||!t.__esModule?Lu(r,"default",{value:t,enumerable:!0}):r,t)),DB=t=>dE(Lu({},"__esModule",{value:!0}),t);var eA=Ze(Qf=>{"use strict";Object.defineProperty(Qf,"__esModule",{value:!0});Qf.default=void 0;var fye=Qf.default="ffffffff-ffff-ffff-ffff-ffffffffffff"});var tA=Ze(Zf=>{"use strict";Object.defineProperty(Zf,"__esModule",{value:!0});Zf.default=void 0;var dye=Zf.default="00000000-0000-0000-0000-000000000000"});var rA=Ze(Yf=>{"use strict";Object.defineProperty(Yf,"__esModule",{value:!0});Yf.default=void 0;var gye=Yf.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i});var bl=Ze(Xf=>{"use strict";Object.defineProperty(Xf,"__esModule",{value:!0});Xf.default=void 0;var Q4=Z4(rA());function Z4(t){return t&&t.__esModule?t:{default:t}}function Y4(t){return typeof t=="string"&&Q4.default.test(t)}var xye=Xf.default=Y4});var wl=Ze(Jf=>{"use strict";Object.defineProperty(Jf,"__esModule",{value:!0});Jf.default=void 0;var X4=J4(bl());function J4(t){return t&&t.__esModule?t:{default:t}}function e6(t){if(!(0,X4.default)(t))throw TypeError("Invalid UUID");let e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}var Tye=Jf.default=e6});var Di=Ze(_l=>{"use strict";Object.defineProperty(_l,"__esModule",{value:!0});_l.default=void 0;_l.unsafeStringify=nA;var t6=r6(bl());function r6(t){return t&&t.__esModule?t:{default:t}}var Vt=[];for(let t=0;t<256;++t)Vt.push((t+256).toString(16).slice(1));function nA(t,e=0){return(Vt[t[e+0]]+Vt[t[e+1]]+Vt[t[e+2]]+Vt[t[e+3]]+"-"+Vt[t[e+4]]+Vt[t[e+5]]+"-"+Vt[t[e+6]]+Vt[t[e+7]]+"-"+Vt[t[e+8]]+Vt[t[e+9]]+"-"+Vt[t[e+10]]+Vt[t[e+11]]+Vt[t[e+12]]+Vt[t[e+13]]+Vt[t[e+14]]+Vt[t[e+15]]).toLowerCase()}function n6(t,e=0){let r=nA(t,e);if(!(0,t6.default)(r))throw TypeError("Stringified UUID is invalid");return r}var bye=_l.default=n6});var rm=Ze(xT=>{"use strict";Object.defineProperty(xT,"__esModule",{value:!0});xT.default=a6;var i6=o6(require("node:crypto"));function o6(t){return t&&t.__esModule?t:{default:t}}var tm=new Uint8Array(256),em=tm.length;function a6(){return em>tm.length-16&&(i6.default.randomFillSync(tm),em=0),tm.slice(em,em+=16)}});var bT=Ze(im=>{"use strict";Object.defineProperty(im,"__esModule",{value:!0});im.default=void 0;var s6=l6(rm()),c6=Di();function l6(t){return t&&t.__esModule?t:{default:t}}var ST,nm,TT=0,vT=0;function p6(t,e,r){let n=e&&r||0,i=e||new Array(16);t=t||{};let o=t.node,s=t.clockseq;if(t._v6||(o||(o=ST),s==null&&(s=nm)),o==null||s==null){let g=t.random||(t.rng||s6.default)();o==null&&(o=[g[0],g[1],g[2],g[3],g[4],g[5]],!ST&&!t._v6&&(o[0]|=1,ST=o)),s==null&&(s=(g[6]<<8|g[7])&16383,nm===void 0&&!t._v6&&(nm=s))}let l=t.msecs!==void 0?t.msecs:Date.now(),p=t.nsecs!==void 0?t.nsecs:vT+1,u=l-TT+(p-vT)/1e4;if(u<0&&t.clockseq===void 0&&(s=s+1&16383),(u<0||l>TT)&&t.nsecs===void 0&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");TT=l,vT=p,nm=s,l+=122192928e5;let m=((l&268435455)*1e4+p)%4294967296;i[n++]=m>>>24&255,i[n++]=m>>>16&255,i[n++]=m>>>8&255,i[n++]=m&255;let d=l/4294967296*1e4&268435455;i[n++]=d>>>8&255,i[n++]=d&255,i[n++]=d>>>24&15|16,i[n++]=d>>>16&255,i[n++]=s>>>8|128,i[n++]=s&255;for(let g=0;g<6;++g)i[n+g]=o[g];return e||(0,c6.unsafeStringify)(i)}var Eye=im.default=p6});var _T=Ze(wT=>{"use strict";Object.defineProperty(wT,"__esModule",{value:!0});wT.default=d6;var u6=m6(wl()),f6=Di();function m6(t){return t&&t.__esModule?t:{default:t}}function d6(t){let e=typeof t=="string"?(0,u6.default)(t):t,r=h6(e);return typeof t=="string"?(0,f6.unsafeStringify)(r):r}function h6(t,e=!1){return Uint8Array.of((t[6]&15)<<4|t[7]>>4&15,(t[7]&15)<<4|(t[4]&240)>>4,(t[4]&15)<<4|(t[5]&240)>>4,(t[5]&15)<<4|(t[0]&240)>>4,(t[0]&15)<<4|(t[1]&240)>>4,(t[1]&15)<<4|(t[2]&240)>>4,96|t[2]&15,t[3],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}});var ET=Ze(la=>{"use strict";Object.defineProperty(la,"__esModule",{value:!0});la.URL=la.DNS=void 0;la.default=b6;var g6=Di(),y6=x6(wl());function x6(t){return t&&t.__esModule?t:{default:t}}function S6(t){t=unescape(encodeURIComponent(t));let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}var T6=la.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",v6=la.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function b6(t,e,r){function n(i,o,s,l){var p;if(typeof i=="string"&&(i=S6(i)),typeof o=="string"&&(o=(0,y6.default)(o)),((p=o)===null||p===void 0?void 0:p.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+i.length);if(u.set(o),u.set(i,o.length),u=r(u),u[6]=u[6]&15|e,u[8]=u[8]&63|128,s){l=l||0;for(let m=0;m<16;++m)s[l+m]=u[m];return s}return(0,g6.unsafeStringify)(u)}try{n.name=t}catch{}return n.DNS=T6,n.URL=v6,n}});var iA=Ze(om=>{"use strict";Object.defineProperty(om,"__esModule",{value:!0});om.default=void 0;var w6=_6(require("node:crypto"));function _6(t){return t&&t.__esModule?t:{default:t}}function E6(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),w6.default.createHash("md5").update(t).digest()}var Aye=om.default=E6});var aA=Ze(am=>{"use strict";Object.defineProperty(am,"__esModule",{value:!0});am.default=void 0;var R6=oA(ET()),k6=oA(iA());function oA(t){return t&&t.__esModule?t:{default:t}}var P6=(0,R6.default)("v3",48,k6.default),Dye=am.default=P6});var sA=Ze(sm=>{"use strict";Object.defineProperty(sm,"__esModule",{value:!0});sm.default=void 0;var A6=M6(require("node:crypto"));function M6(t){return t&&t.__esModule?t:{default:t}}var Iye=sm.default={randomUUID:A6.default.randomUUID}});var pA=Ze(cm=>{"use strict";Object.defineProperty(cm,"__esModule",{value:!0});cm.default=void 0;var cA=lA(sA()),D6=lA(rm()),F6=Di();function lA(t){return t&&t.__esModule?t:{default:t}}function I6(t,e,r){if(cA.default.randomUUID&&!e&&!t)return cA.default.randomUUID();t=t||{};let n=t.random||(t.rng||D6.default)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return(0,F6.unsafeStringify)(n)}var Nye=cm.default=I6});var uA=Ze(lm=>{"use strict";Object.defineProperty(lm,"__esModule",{value:!0});lm.default=void 0;var C6=N6(require("node:crypto"));function N6(t){return t&&t.__esModule?t:{default:t}}function O6(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),C6.default.createHash("sha1").update(t).digest()}var Lye=lm.default=O6});var mA=Ze(pm=>{"use strict";Object.defineProperty(pm,"__esModule",{value:!0});pm.default=void 0;var L6=fA(ET()),U6=fA(uA());function fA(t){return t&&t.__esModule?t:{default:t}}var H6=(0,L6.default)("v5",80,U6.default),Hye=pm.default=H6});var hA=Ze(RT=>{"use strict";Object.defineProperty(RT,"__esModule",{value:!0});RT.default=$6;var V6=Di(),B6=dA(bT()),W6=dA(_T());function dA(t){return t&&t.__esModule?t:{default:t}}function $6(t={},e,r=0){let n=(0,B6.default)({...t,_v6:!0},new Uint8Array(16));if(n=(0,W6.default)(n),e){for(let i=0;i<16;i++)e[r+i]=n[i];return e}return(0,V6.unsafeStringify)(n)}});var gA=Ze(kT=>{"use strict";Object.defineProperty(kT,"__esModule",{value:!0});kT.default=G6;var j6=z6(wl()),q6=Di();function z6(t){return t&&t.__esModule?t:{default:t}}function G6(t){let e=typeof t=="string"?(0,j6.default)(t):t,r=K6(e);return typeof t=="string"?(0,q6.unsafeStringify)(r):r}function K6(t){return Uint8Array.of((t[3]&15)<<4|t[4]>>4&15,(t[4]&15)<<4|(t[5]&240)>>4,(t[5]&15)<<4|t[6]&15,t[7],(t[1]&15)<<4|(t[2]&240)>>4,(t[2]&15)<<4|(t[3]&240)>>4,16|(t[0]&240)>>4,(t[0]&15)<<4|(t[1]&240)>>4,t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}});var SA=Ze(um=>{"use strict";Object.defineProperty(um,"__esModule",{value:!0});um.default=void 0;var Q6=Y6(rm()),Z6=Di();function Y6(t){return t&&t.__esModule?t:{default:t}}var yA=null,xA=null,Cn=0;function X6(t,e,r){t=t||{};let n=e&&r||0,i=e||new Uint8Array(16),o=t.random||(t.rng||Q6.default)(),s=t.msecs!==void 0?t.msecs:Date.now(),l=t.seq!==void 0?t.seq:null,p=xA,u=yA;return s>Cn&&t.msecs===void 0&&(Cn=s,l!==null&&(p=null,u=null)),l!==null&&(l>2147483647&&(l=2147483647),p=l>>>19&4095,u=l&524287),(p===null||u===null)&&(p=o[6]&127,p=p<<8|o[7],u=o[8]&63,u=u<<8|o[9],u=u<<5|o[10]>>>3),s+1e4>Cn&&l===null?++u>524287&&(u=0,++p>4095&&(p=0,Cn++)):Cn=s,xA=p,yA=u,i[n++]=Cn/1099511627776&255,i[n++]=Cn/4294967296&255,i[n++]=Cn/16777216&255,i[n++]=Cn/65536&255,i[n++]=Cn/256&255,i[n++]=Cn&255,i[n++]=p>>>4&15|112,i[n++]=p&255,i[n++]=u>>>13&63|128,i[n++]=u>>>5&255,i[n++]=u<<3&255|o[10]&7,i[n++]=o[11],i[n++]=o[12],i[n++]=o[13],i[n++]=o[14],i[n++]=o[15],e||(0,Z6.unsafeStringify)(i)}var $ye=um.default=X6});var TA=Ze(fm=>{"use strict";Object.defineProperty(fm,"__esModule",{value:!0});fm.default=void 0;var J6=e9(bl());function e9(t){return t&&t.__esModule?t:{default:t}}function t9(t){if(!(0,J6.default)(t))throw TypeError("Invalid UUID");return parseInt(t.slice(14,15),16)}var qye=fm.default=t9});var vA=Ze(Qt=>{"use strict";Object.defineProperty(Qt,"__esModule",{value:!0});Object.defineProperty(Qt,"MAX",{enumerable:!0,get:function(){return r9.default}});Object.defineProperty(Qt,"NIL",{enumerable:!0,get:function(){return n9.default}});Object.defineProperty(Qt,"parse",{enumerable:!0,get:function(){return i9.default}});Object.defineProperty(Qt,"stringify",{enumerable:!0,get:function(){return o9.default}});Object.defineProperty(Qt,"v1",{enumerable:!0,get:function(){return a9.default}});Object.defineProperty(Qt,"v1ToV6",{enumerable:!0,get:function(){return s9.default}});Object.defineProperty(Qt,"v3",{enumerable:!0,get:function(){return c9.default}});Object.defineProperty(Qt,"v4",{enumerable:!0,get:function(){return l9.default}});Object.defineProperty(Qt,"v5",{enumerable:!0,get:function(){return p9.default}});Object.defineProperty(Qt,"v6",{enumerable:!0,get:function(){return u9.default}});Object.defineProperty(Qt,"v6ToV1",{enumerable:!0,get:function(){return f9.default}});Object.defineProperty(Qt,"v7",{enumerable:!0,get:function(){return m9.default}});Object.defineProperty(Qt,"validate",{enumerable:!0,get:function(){return d9.default}});Object.defineProperty(Qt,"version",{enumerable:!0,get:function(){return h9.default}});var r9=Rr(eA()),n9=Rr(tA()),i9=Rr(wl()),o9=Rr(Di()),a9=Rr(bT()),s9=Rr(_T()),c9=Rr(aA()),l9=Rr(pA()),p9=Rr(mA()),u9=Rr(hA()),f9=Rr(gA()),m9=Rr(SA()),d9=Rr(bl()),h9=Rr(TA());function Rr(t){return t&&t.__esModule?t:{default:t}}});var EA=Ze((_A,dm)=>{(function(t,e){typeof dm=="object"&&dm.exports?dm.exports=e():t.nearley=e()})(_A,function(){function t(p,u,m){return this.id=++t.highestId,this.name=p,this.symbols=u,this.postprocess=m,this}t.highestId=0,t.prototype.toString=function(p){var u=typeof p>"u"?this.symbols.map(l).join(" "):this.symbols.slice(0,p).map(l).join(" ")+" \u25CF "+this.symbols.slice(p).map(l).join(" ");return this.name+" \u2192 "+u};function e(p,u,m,d){this.rule=p,this.dot=u,this.reference=m,this.data=[],this.wantedBy=d,this.isComplete=this.dot===p.symbols.length}e.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},e.prototype.nextState=function(p){var u=new e(this.rule,this.dot+1,this.reference,this.wantedBy);return u.left=this,u.right=p,u.isComplete&&(u.data=u.build(),u.right=void 0),u},e.prototype.build=function(){var p=[],u=this;do p.push(u.right.data),u=u.left;while(u.left);return p.reverse(),p},e.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,o.fail))};function r(p,u){this.grammar=p,this.index=u,this.states=[],this.wants={},this.scannable=[],this.completed={}}r.prototype.process=function(p){for(var u=this.states,m=this.wants,d=this.completed,g=0;g<u.length;g++){var x=u[g];if(x.isComplete){if(x.finish(),x.data!==o.fail){for(var b=x.wantedBy,v=b.length;v--;){var I=b[v];this.complete(I,x)}if(x.reference===this.index){var F=x.rule.name;(this.completed[F]=this.completed[F]||[]).push(x)}}}else{var F=x.rule.symbols[x.dot];if(typeof F!="string"){this.scannable.push(x);continue}if(m[F]){if(m[F].push(x),d.hasOwnProperty(F))for(var H=d[F],v=0;v<H.length;v++){var Q=H[v];this.complete(x,Q)}}else m[F]=[x],this.predict(F)}}},r.prototype.predict=function(p){for(var u=this.grammar.byName[p]||[],m=0;m<u.length;m++){var d=u[m],g=this.wants[p],x=new e(d,0,this.index,g);this.states.push(x)}},r.prototype.complete=function(p,u){var m=p.nextState(u);this.states.push(m)};function n(p,u){this.rules=p,this.start=u||this.rules[0].name;var m=this.byName={};this.rules.forEach(function(d){m.hasOwnProperty(d.name)||(m[d.name]=[]),m[d.name].push(d)})}n.fromCompiled=function(d,u){var m=d.Lexer;d.ParserStart&&(u=d.ParserStart,d=d.ParserRules);var d=d.map(function(x){return new t(x.name,x.symbols,x.postprocess)}),g=new n(d,u);return g.lexer=m,g};function i(){this.reset("")}i.prototype.reset=function(p,u){this.buffer=p,this.index=0,this.line=u?u.line:1,this.lastLineBreak=u?-u.col:0},i.prototype.next=function(){if(this.index<this.buffer.length){var p=this.buffer[this.index++];return p===`
`&&(this.line+=1,this.lastLineBreak=this.index),{value:p}}},i.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},i.prototype.formatError=function(p,u){var m=this.buffer;if(typeof m=="string"){var d=m.split(`
`).slice(Math.max(0,this.line-5),this.line),g=m.indexOf(`
`,this.index);g===-1&&(g=m.length);var x=this.index-this.lastLineBreak,b=String(this.line).length;return u+=" at line "+this.line+" col "+x+`:

`,u+=d.map(function(I,F){return v(this.line-d.length+F+1,b)+" "+I},this).join(`
`),u+=`
`+v("",b+x)+`^
`,u}else return u+" at index "+(this.index-1);function v(I,F){var H=String(I);return Array(F-H.length+1).join(" ")+H}};function o(p,u,m){if(p instanceof n)var d=p,m=u;else var d=n.fromCompiled(p,u);this.grammar=d,this.options={keepHistory:!1,lexer:d.lexer||new i};for(var g in m||{})this.options[g]=m[g];this.lexer=this.options.lexer,this.lexerState=void 0;var x=new r(d,0),b=this.table=[x];x.wants[d.start]=[],x.predict(d.start),x.process(),this.current=0}o.fail={},o.prototype.feed=function(p){var u=this.lexer;u.reset(p,this.lexerState);for(var m;;){try{if(m=u.next(),!m)break}catch(ce){var b=new r(this.grammar,this.current+1);this.table.push(b);var d=new Error(this.reportLexerError(ce));throw d.offset=this.current,d.token=ce.token,d}var g=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var x=this.current+1,b=new r(this.grammar,x);this.table.push(b);for(var v=m.text!==void 0?m.text:m.value,I=u.constructor===i?m.value:u.transform?.(m)??m,F=g.scannable,H=F.length;H--;){var Q=F[H],ie=Q.rule.symbols[Q.dot];if(ie.test?ie.test(I):ie.type?ie.type===m.type:ie.literal===v){var oe=Q.nextState({data:I,token:m,isToken:!0,reference:x-1});b.states.push(oe)}}if(b.process(),b.states.length===0){var d=new Error(this.reportError(m));throw d.offset=this.current,d.token=m,d}this.options.keepHistory&&(g.lexerState=u.save()),this.current++}return g&&(this.lexerState=u.save()),this.results=this.finish(),this},o.prototype.reportLexerError=function(p){var u,m,d=p.token;return d?(u="input "+JSON.stringify(d.text[0])+" (lexer error)",m=this.lexer.formatError(d,"Syntax error")):(u="input (lexer error)",m=p.message),this.reportErrorCommon(m,u)},o.prototype.reportError=function(p){var u=(p.type?p.type+" token: ":"")+JSON.stringify(p.value!==void 0?p.value:p),m=this.lexer.formatError(p,"Syntax error");return this.reportErrorCommon(m,u)},o.prototype.reportErrorCommon=function(p,u){var m=[];m.push(p);var d=this.table.length-2,g=this.table[d],x=g.states.filter(function(v){var I=v.rule.symbols[v.dot];return I&&typeof I!="string"});if(x.length===0)m.push("Unexpected "+u+`. I did not expect any more input. Here is the state of my parse table:
`),this.displayStateStack(g.states,m);else{m.push("Unexpected "+u+`. Instead, I was expecting to see one of the following:
`);var b=x.map(function(v){return this.buildFirstStateStack(v,[])||[v]},this);b.forEach(function(v){var I=v[0],F=I.rule.symbols[I.dot],H=this.getSymbolDisplay(F);m.push("A "+H+" based on:"),this.displayStateStack(v,m)},this)}return m.push(""),m.join(`
`)},o.prototype.displayStateStack=function(p,u){for(var m,d=0,g=0;g<p.length;g++){var x=p[g],b=x.rule.toString(x.dot);b===m?d++:(d>0&&u.push("    ^ "+d+" more lines identical to this"),d=0,u.push("    "+b)),m=b}},o.prototype.getSymbolDisplay=function(p){return s(p)},o.prototype.buildFirstStateStack=function(p,u){if(u.indexOf(p)!==-1)return null;if(p.wantedBy.length===0)return[p];var m=p.wantedBy[0],d=[p].concat(u),g=this.buildFirstStateStack(m,d);return g===null?null:[p].concat(g)},o.prototype.save=function(){var p=this.table[this.current];return p.lexerState=this.lexerState,p},o.prototype.restore=function(p){var u=p.index;this.current=u,this.table[u]=p,this.table.splice(u+1),this.lexerState=p.lexerState,this.results=this.finish()},o.prototype.rewind=function(p){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[p])},o.prototype.finish=function(){var p=[],u=this.grammar.start,m=this.table[this.table.length-1];return m.states.forEach(function(d){d.rule.name===u&&d.dot===d.rule.symbols.length&&d.reference===0&&d.data!==o.fail&&p.push(d)}),p.map(function(d){return d.data})};function s(p){var u=typeof p;if(u==="string")return p;if(u==="object"){if(p.literal)return JSON.stringify(p.literal);if(p instanceof RegExp)return"character matching "+p;if(p.type)return p.type+" token";if(p.test)return"token matching "+String(p.test);throw new Error("Unknown symbol type: "+p)}}function l(p){var u=typeof p;if(u==="string")return p;if(u==="object"){if(p.literal)return JSON.stringify(p.literal);if(p instanceof RegExp)return p.toString();if(p.type)return"%"+p.type;if(p.test)return"<"+String(p.test)+">";throw new Error("Unknown symbol type: "+p)}}return{Parser:o,Grammar:n,Rule:t}})});var DA=Ze((MA,ym)=>{(function(t,e){typeof define=="function"&&define.amd?define([],e):typeof ym=="object"&&ym.exports?ym.exports=e():t.moo=e()})(MA,function(){"use strict";var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,r=typeof new RegExp().sticky=="boolean";function n(L){return L&&e.call(L)==="[object RegExp]"}function i(L){return L&&typeof L=="object"&&!n(L)&&!Array.isArray(L)}function o(L){return L.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function s(L){var O=new RegExp("|"+L);return O.exec("").length-1}function l(L){return"("+L+")"}function p(L){if(!L.length)return"(?!)";var O=L.map(function(D){return"(?:"+D+")"}).join("|");return"(?:"+O+")"}function u(L){if(typeof L=="string")return"(?:"+o(L)+")";if(n(L)){if(L.ignoreCase)throw new Error("RegExp /i flag not allowed");if(L.global)throw new Error("RegExp /g flag is implied");if(L.sticky)throw new Error("RegExp /y flag is implied");if(L.multiline)throw new Error("RegExp /m flag is implied");return L.source}else throw new Error("Not a pattern: "+L)}function m(L,O){return L.length>O?L:Array(O-L.length+1).join(" ")+L}function d(L,O){for(var D=L.length,j=0;;){var G=L.lastIndexOf(`
`,D-1);if(G===-1||(j++,D=G,j===O)||D===0)break}var Z=j<O?0:D+1;return L.substring(Z).split(`
`)}function g(L){for(var O=Object.getOwnPropertyNames(L),D=[],j=0;j<O.length;j++){var G=O[j],Z=L[G],Y=[].concat(Z);if(G==="include"){for(var re=0;re<Y.length;re++)D.push({include:Y[re]});continue}var ge=[];Y.forEach(function(ne){i(ne)?(ge.length&&D.push(b(G,ge)),D.push(b(G,ne)),ge=[]):ge.push(ne)}),ge.length&&D.push(b(G,ge))}return D}function x(L){for(var O=[],D=0;D<L.length;D++){var j=L[D];if(j.include){for(var G=[].concat(j.include),Z=0;Z<G.length;Z++)O.push({include:G[Z]});continue}if(!j.type)throw new Error("Rule has no type: "+JSON.stringify(j));O.push(b(j.type,j))}return O}function b(L,O){if(i(O)||(O={match:O}),O.include)throw new Error("Matching rules cannot also include states");var D={defaultType:L,lineBreaks:!!O.error||!!O.fallback,pop:!1,next:null,push:null,error:!1,fallback:!1,value:null,type:null,shouldThrow:!1};for(var j in O)t.call(O,j)&&(D[j]=O[j]);if(typeof D.type=="string"&&L!==D.type)throw new Error("Type transform cannot be a string (type '"+D.type+"' for token '"+L+"')");var G=D.match;return D.match=Array.isArray(G)?G:G?[G]:[],D.match.sort(function(Z,Y){return n(Z)&&n(Y)?0:n(Y)?-1:n(Z)?1:Y.length-Z.length}),D}function v(L){return Array.isArray(L)?x(L):g(L)}var I=b("error",{lineBreaks:!0,shouldThrow:!0});function F(L,O){for(var D=null,j=Object.create(null),G=!0,Z=null,Y=[],re=[],ge=0;ge<L.length;ge++)L[ge].fallback&&(G=!1);for(var ge=0;ge<L.length;ge++){var ne=L[ge];if(ne.include)throw new Error("Inheritance is not allowed in stateless lexers");if(ne.error||ne.fallback){if(D)throw!ne.fallback==!D.fallback?new Error("Multiple "+(ne.fallback?"fallback":"error")+" rules not allowed (for token '"+ne.defaultType+"')"):new Error("fallback and error are mutually exclusive (for token '"+ne.defaultType+"')");D=ne}var ke=ne.match.slice();if(G)for(;ke.length&&typeof ke[0]=="string"&&ke[0].length===1;){var mr=ke.shift();j[mr.charCodeAt(0)]=ne}if(ne.pop||ne.push||ne.next){if(!O)throw new Error("State-switching options are not allowed in stateless lexers (for token '"+ne.defaultType+"')");if(ne.fallback)throw new Error("State-switching options are not allowed on fallback tokens (for token '"+ne.defaultType+"')")}if(ke.length!==0){G=!1,Y.push(ne);for(var di=0;di<ke.length;di++){var dr=ke[di];if(n(dr)){if(Z===null)Z=dr.unicode;else if(Z!==dr.unicode&&ne.fallback===!1)throw new Error("If one rule is /u then all must be")}}var _n=p(ke.map(u)),Fr=new RegExp(_n);if(Fr.test(""))throw new Error("RegExp matches empty string: "+Fr);var En=s(_n);if(En>0)throw new Error("RegExp has capture groups: "+Fr+`
Use (?: \u2026 ) instead`);if(!ne.lineBreaks&&Fr.test(`
`))throw new Error("Rule should declare lineBreaks: "+Fr);re.push(l(_n))}}var Xr=D&&D.fallback,Oo=r&&!Xr?"ym":"gm",hi=r||Xr?"":"|";Z===!0&&(Oo+="u");var Na=new RegExp(p(re)+hi,Oo);return{regexp:Na,groups:Y,fast:j,error:D||I}}function H(L){var O=F(v(L));return new ce({start:O},"start")}function Q(L,O,D){var j=L&&(L.push||L.next);if(j&&!D[j])throw new Error("Missing state '"+j+"' (in token '"+L.defaultType+"' of state '"+O+"')");if(L&&L.pop&&+L.pop!=1)throw new Error("pop must be 1 (in token '"+L.defaultType+"' of state '"+O+"')")}function ie(L,O){var D=L.$all?v(L.$all):[];delete L.$all;var j=Object.getOwnPropertyNames(L);O||(O=j[0]);for(var G=Object.create(null),Z=0;Z<j.length;Z++){var Y=j[Z];G[Y]=v(L[Y]).concat(D)}for(var Z=0;Z<j.length;Z++)for(var Y=j[Z],re=G[Y],ge=Object.create(null),ne=0;ne<re.length;ne++){var ke=re[ne];if(ke.include){var mr=[ne,1];if(ke.include!==Y&&!ge[ke.include]){ge[ke.include]=!0;var di=G[ke.include];if(!di)throw new Error("Cannot include nonexistent state '"+ke.include+"' (in state '"+Y+"')");for(var dr=0;dr<di.length;dr++){var _n=di[dr];re.indexOf(_n)===-1&&mr.push(_n)}}re.splice.apply(re,mr),ne--}}for(var Fr=Object.create(null),Z=0;Z<j.length;Z++){var Y=j[Z];Fr[Y]=F(G[Y],!0)}for(var Z=0;Z<j.length;Z++){for(var En=j[Z],Xr=Fr[En],Oo=Xr.groups,ne=0;ne<Oo.length;ne++)Q(Oo[ne],En,Fr);for(var hi=Object.getOwnPropertyNames(Xr.fast),ne=0;ne<hi.length;ne++)Q(Xr.fast[hi[ne]],En,Fr)}return new ce(Fr,O)}function oe(L){for(var O=typeof Map<"u",D=O?new Map:Object.create(null),j=Object.getOwnPropertyNames(L),G=0;G<j.length;G++){var Z=j[G],Y=L[Z],re=Array.isArray(Y)?Y:[Y];re.forEach(function(ge){if(typeof ge!="string")throw new Error("keyword must be string (in keyword '"+Z+"')");O?D.set(ge,Z):D[ge]=Z})}return function(ge){return O?D.get(ge):D[ge]}}var ce=function(L,O){this.startState=O,this.states=L,this.buffer="",this.stack=[],this.reset()};ce.prototype.reset=function(L,O){return this.buffer=L||"",this.index=0,this.line=O?O.line:1,this.col=O?O.col:1,this.queuedToken=O?O.queuedToken:null,this.queuedText=O?O.queuedText:"",this.queuedThrow=O?O.queuedThrow:null,this.setState(O?O.state:this.startState),this.stack=O&&O.stack?O.stack.slice():[],this},ce.prototype.save=function(){return{line:this.line,col:this.col,state:this.state,stack:this.stack.slice(),queuedToken:this.queuedToken,queuedText:this.queuedText,queuedThrow:this.queuedThrow}},ce.prototype.setState=function(L){if(!(!L||this.state===L)){this.state=L;var O=this.states[L];this.groups=O.groups,this.error=O.error,this.re=O.regexp,this.fast=O.fast}},ce.prototype.popState=function(){this.setState(this.stack.pop())},ce.prototype.pushState=function(L){this.stack.push(this.state),this.setState(L)};var at=r?function(L,O){return L.exec(O)}:function(L,O){var D=L.exec(O);return D[0].length===0?null:D};ce.prototype._getGroup=function(L){for(var O=this.groups.length,D=0;D<O;D++)if(L[D+1]!==void 0)return this.groups[D];throw new Error("Cannot find token type for matched text")};function Lt(){return this.value}if(ce.prototype.next=function(){var L=this.index;if(this.queuedGroup){var O=this._token(this.queuedGroup,this.queuedText,L);return this.queuedGroup=null,this.queuedText="",O}var D=this.buffer;if(L!==D.length){var Y=this.fast[D.charCodeAt(L)];if(Y)return this._token(Y,D.charAt(L),L);var j=this.re;j.lastIndex=L;var G=at(j,D),Z=this.error;if(G==null)return this._token(Z,D.slice(L,D.length),L);var Y=this._getGroup(G),re=G[0];return Z.fallback&&G.index!==L?(this.queuedGroup=Y,this.queuedText=re,this._token(Z,D.slice(L,G.index),L)):this._token(Y,re,L)}},ce.prototype._token=function(L,O,D){var j=0;if(L.lineBreaks){var G=/\n/g,Z=1;if(O===`
`)j=1;else for(;G.exec(O);)j++,Z=G.lastIndex}var Y={type:typeof L.type=="function"&&L.type(O)||L.defaultType,value:typeof L.value=="function"?L.value(O):O,text:O,toString:Lt,offset:D,lineBreaks:j,line:this.line,col:this.col},re=O.length;if(this.index+=re,this.line+=j,j!==0?this.col=re-Z+1:this.col+=re,L.shouldThrow){var ge=new Error(this.formatError(Y,"invalid syntax"));throw ge}return L.pop?this.popState():L.push?this.pushState(L.push):L.next&&this.setState(L.next),Y},typeof Symbol<"u"&&Symbol.iterator){var pt=function(L){this.lexer=L};pt.prototype.next=function(){var L=this.lexer.next();return{value:L,done:!L}},pt.prototype[Symbol.iterator]=function(){return this},ce.prototype[Symbol.iterator]=function(){return new pt(this)}}return ce.prototype.formatError=function(L,O){if(L==null)var D=this.buffer.slice(this.index),L={text:D,offset:this.index,lineBreaks:D.indexOf(`
`)===-1?0:1,line:this.line,col:this.col};var j=2,G=Math.max(L.line-j,1),Z=L.line+j,Y=String(Z).length,re=d(this.buffer,this.line-L.line+j+1).slice(0,5),ge=[];ge.push(O+" at line "+L.line+" col "+L.col+":"),ge.push("");for(var ne=0;ne<re.length;ne++){var ke=re[ne],mr=G+ne;ge.push(m(String(mr),Y)+"  "+ke),mr===L.line&&ge.push(m("",Y+L.col+1)+"^")}return ge.join(`
`)},ce.prototype.clone=function(){return new ce(this.states,this.state)},ce.prototype.has=function(L){return!0},{compile:H,states:ie,error:Object.freeze({error:!0}),fallback:Object.freeze({fallback:!0}),keywords:oe}})});var Dl=Ze((Jn,EM)=>{"use strict";Object.defineProperty(Jn,"__esModule",{value:!0});function Nn(t){return typeof t=="object"&&!("toString"in t)?Object.prototype.toString.call(t).slice(8,-1):t}var L5=typeof process=="object"&&process.env.NODE_ENV==="production";function dn(t,e){if(!t)throw L5?new Error("Invariant failed"):new Error(e())}Jn.invariant=dn;var YT=Object.prototype.hasOwnProperty,U5=Array.prototype.splice,H5=Object.prototype.toString;function fa(t){return H5.call(t).slice(8,-1)}var Gm=Object.assign||function(t,e){return XT(e).forEach(function(r){YT.call(e,r)&&(t[r]=e[r])}),t},XT=typeof Object.getOwnPropertySymbols=="function"?function(t){return Object.keys(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.keys(t)};function So(t){return Array.isArray(t)?Gm(t.constructor(t.length),t):fa(t)==="Map"?new Map(t):fa(t)==="Set"?new Set(t):t&&typeof t=="object"?Gm(Object.create(Object.getPrototypeOf(t)),t):t}var wM=function(){function t(){this.commands=Gm({},V5),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(e,r){return e===r},this.update.newContext=function(){return new t().update}}return Object.defineProperty(t.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(e){this.update.isEquals=e},enumerable:!0,configurable:!0}),t.prototype.extend=function(e,r){this.commands[e]=r},t.prototype.update=function(e,r){var n=this,i=typeof r=="function"?{$apply:r}:r;Array.isArray(e)&&Array.isArray(i)||dn(!Array.isArray(i),function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."}),dn(typeof i=="object"&&i!==null,function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the "+("following commands: "+Object.keys(n.commands).join(", ")+".")});var o=e;return XT(i).forEach(function(s){if(YT.call(n.commands,s)){var l=e===o;o=n.commands[s](i[s],o,i,e),l&&n.isEquals(o,e)&&(o=e)}else{var p=fa(e)==="Map"?n.update(e.get(s),i[s]):n.update(e[s],i[s]),u=fa(o)==="Map"?o.get(s):o[s];(!n.isEquals(p,u)||typeof p>"u"&&!YT.call(e,s))&&(o===e&&(o=So(e)),fa(o)==="Map"?o.set(s,p):o[s]=p)}}),o},t}();Jn.Context=wM;var V5={$push:function(t,e,r){return vM(e,r,"$push"),t.length?e.concat(t):e},$unshift:function(t,e,r){return vM(e,r,"$unshift"),t.length?t.concat(e):e},$splice:function(t,e,r,n){return B5(e,r),t.forEach(function(i){_M(i),e===n&&i.length&&(e=So(n)),U5.apply(e,i)}),e},$set:function(t,e,r){return $5(r),t},$toggle:function(t,e){Ml(t,"$toggle");var r=t.length?So(e):e;return t.forEach(function(n){r[n]=!e[n]}),r},$unset:function(t,e,r,n){return Ml(t,"$unset"),t.forEach(function(i){Object.hasOwnProperty.call(e,i)&&(e===n&&(e=So(n)),delete e[i])}),e},$add:function(t,e,r,n){return bM(e,"$add"),Ml(t,"$add"),fa(e)==="Map"?t.forEach(function(i){var o=i[0],s=i[1];e===n&&e.get(o)!==s&&(e=So(n)),e.set(o,s)}):t.forEach(function(i){e===n&&!e.has(i)&&(e=So(n)),e.add(i)}),e},$remove:function(t,e,r,n){return bM(e,"$remove"),Ml(t,"$remove"),t.forEach(function(i){e===n&&e.has(i)&&(e=So(n)),e.delete(i)}),e},$merge:function(t,e,r,n){return j5(e,t),XT(t).forEach(function(i){t[i]!==e[i]&&(e===n&&(e=So(n)),e[i]=t[i])}),e},$apply:function(t,e){return W5(t),t(e)}},JT=new wM;Jn.isEquals=JT.update.isEquals;Jn.extend=JT.extend;Jn.default=JT.update;Jn.default.default=EM.exports=Gm(Jn.default,Jn);function vM(t,e,r){dn(Array.isArray(t),function(){return"update(): expected target of "+Nn(r)+" to be an array; got "+Nn(t)+"."}),Ml(e[r],r)}function Ml(t,e){dn(Array.isArray(t),function(){return"update(): expected spec of "+Nn(e)+" to be an array; got "+Nn(t)+". Did you forget to wrap your parameter in an array?"})}function B5(t,e){dn(Array.isArray(t),function(){return"Expected $splice target to be an array; got "+Nn(t)}),_M(e.$splice)}function _M(t){dn(Array.isArray(t),function(){return"update(): expected spec of $splice to be an array of arrays; got "+Nn(t)+". Did you forget to wrap your parameters in an array?"})}function W5(t){dn(typeof t=="function",function(){return"update(): expected spec of $apply to be a function; got "+Nn(t)+"."})}function $5(t){dn(Object.keys(t).length===1,function(){return"Cannot have more than one key in an object with $set"})}function j5(t,e){dn(e&&typeof e=="object",function(){return"update(): $merge expects a spec of type 'object'; got "+Nn(e)}),dn(t&&typeof t=="object",function(){return"update(): $merge expects a target of type 'object'; got "+Nn(t)})}function bM(t,e){var r=fa(t);dn(r==="Map"||r==="Set",function(){return"update(): "+Nn(e)+" expects a target of type Set or Map; got "+Nn(r)})}});var db=Ze((dc,Sp)=>{(function(){var t,e="4.17.21",r=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",i="Expected a function",o="Invalid `variable` option passed into `_.template`",s="__lodash_hash_undefined__",l=500,p="__lodash_placeholder__",u=1,m=2,d=4,g=1,x=2,b=1,v=2,I=4,F=8,H=16,Q=32,ie=64,oe=128,ce=256,at=512,Lt=30,pt="...",L=800,O=16,D=1,j=2,G=3,Z=1/0,Y=9007199254740991,re=17976931348623157e292,ge=NaN,ne=4294967295,ke=ne-1,mr=ne>>>1,di=[["ary",oe],["bind",b],["bindKey",v],["curry",F],["curryRight",H],["flip",at],["partial",Q],["partialRight",ie],["rearg",ce]],dr="[object Arguments]",_n="[object Array]",Fr="[object AsyncFunction]",En="[object Boolean]",Xr="[object Date]",Oo="[object DOMException]",hi="[object Error]",Na="[object Function]",Lw="[object GeneratorFunction]",Rn="[object Map]",Mc="[object Number]",W1="[object Null]",gi="[object Object]",Uw="[object Promise]",$1="[object Proxy]",Dc="[object RegExp]",kn="[object Set]",Fc="[object String]",Kp="[object Symbol]",j1="[object Undefined]",Ic="[object WeakMap]",q1="[object WeakSet]",Cc="[object ArrayBuffer]",Oa="[object DataView]",Zy="[object Float32Array]",Yy="[object Float64Array]",Xy="[object Int8Array]",Jy="[object Int16Array]",ex="[object Int32Array]",tx="[object Uint8Array]",rx="[object Uint8ClampedArray]",nx="[object Uint16Array]",ix="[object Uint32Array]",z1=/\b__p \+= '';/g,G1=/\b(__p \+=) '' \+/g,K1=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Hw=/&(?:amp|lt|gt|quot|#39);/g,Vw=/[&<>"']/g,Q1=RegExp(Hw.source),Z1=RegExp(Vw.source),Y1=/<%-([\s\S]+?)%>/g,X1=/<%([\s\S]+?)%>/g,Bw=/<%=([\s\S]+?)%>/g,J1=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,eN=/^\w*$/,tN=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ox=/[\\^$.*+?()[\]{}|]/g,rN=RegExp(ox.source),ax=/^\s+/,nN=/\s/,iN=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,oN=/\{\n\/\* \[wrapped with (.+)\] \*/,aN=/,? & /,sN=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,cN=/[()=,{}\[\]\/\s]/,lN=/\\(\\)?/g,pN=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ww=/\w*$/,uN=/^[-+]0x[0-9a-f]+$/i,fN=/^0b[01]+$/i,mN=/^\[object .+?Constructor\]$/,dN=/^0o[0-7]+$/i,hN=/^(?:0|[1-9]\d*)$/,gN=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Qp=/($^)/,yN=/['\n\r\u2028\u2029\\]/g,Zp="\\ud800-\\udfff",xN="\\u0300-\\u036f",SN="\\ufe20-\\ufe2f",TN="\\u20d0-\\u20ff",$w=xN+SN+TN,jw="\\u2700-\\u27bf",qw="a-z\\xdf-\\xf6\\xf8-\\xff",vN="\\xac\\xb1\\xd7\\xf7",bN="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",wN="\\u2000-\\u206f",_N=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",zw="A-Z\\xc0-\\xd6\\xd8-\\xde",Gw="\\ufe0e\\ufe0f",Kw=vN+bN+wN+_N,sx="['\u2019]",EN="["+Zp+"]",Qw="["+Kw+"]",Yp="["+$w+"]",Zw="\\d+",RN="["+jw+"]",Yw="["+qw+"]",Xw="[^"+Zp+Kw+Zw+jw+qw+zw+"]",cx="\\ud83c[\\udffb-\\udfff]",kN="(?:"+Yp+"|"+cx+")",Jw="[^"+Zp+"]",lx="(?:\\ud83c[\\udde6-\\uddff]){2}",px="[\\ud800-\\udbff][\\udc00-\\udfff]",La="["+zw+"]",e_="\\u200d",t_="(?:"+Yw+"|"+Xw+")",PN="(?:"+La+"|"+Xw+")",r_="(?:"+sx+"(?:d|ll|m|re|s|t|ve))?",n_="(?:"+sx+"(?:D|LL|M|RE|S|T|VE))?",i_=kN+"?",o_="["+Gw+"]?",AN="(?:"+e_+"(?:"+[Jw,lx,px].join("|")+")"+o_+i_+")*",MN="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",DN="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",a_=o_+i_+AN,FN="(?:"+[RN,lx,px].join("|")+")"+a_,IN="(?:"+[Jw+Yp+"?",Yp,lx,px,EN].join("|")+")",CN=RegExp(sx,"g"),NN=RegExp(Yp,"g"),ux=RegExp(cx+"(?="+cx+")|"+IN+a_,"g"),ON=RegExp([La+"?"+Yw+"+"+r_+"(?="+[Qw,La,"$"].join("|")+")",PN+"+"+n_+"(?="+[Qw,La+t_,"$"].join("|")+")",La+"?"+t_+"+"+r_,La+"+"+n_,DN,MN,Zw,FN].join("|"),"g"),LN=RegExp("["+e_+Zp+$w+Gw+"]"),UN=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,HN=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],VN=-1,Je={};Je[Zy]=Je[Yy]=Je[Xy]=Je[Jy]=Je[ex]=Je[tx]=Je[rx]=Je[nx]=Je[ix]=!0,Je[dr]=Je[_n]=Je[Cc]=Je[En]=Je[Oa]=Je[Xr]=Je[hi]=Je[Na]=Je[Rn]=Je[Mc]=Je[gi]=Je[Dc]=Je[kn]=Je[Fc]=Je[Ic]=!1;var Ye={};Ye[dr]=Ye[_n]=Ye[Cc]=Ye[Oa]=Ye[En]=Ye[Xr]=Ye[Zy]=Ye[Yy]=Ye[Xy]=Ye[Jy]=Ye[ex]=Ye[Rn]=Ye[Mc]=Ye[gi]=Ye[Dc]=Ye[kn]=Ye[Fc]=Ye[Kp]=Ye[tx]=Ye[rx]=Ye[nx]=Ye[ix]=!0,Ye[hi]=Ye[Na]=Ye[Ic]=!1;var BN={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},WN={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},$N={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},jN={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},qN=parseFloat,zN=parseInt,s_=typeof global=="object"&&global&&global.Object===Object&&global,GN=typeof self=="object"&&self&&self.Object===Object&&self,Mt=s_||GN||Function("return this")(),fx=typeof dc=="object"&&dc&&!dc.nodeType&&dc,Lo=fx&&typeof Sp=="object"&&Sp&&!Sp.nodeType&&Sp,c_=Lo&&Lo.exports===fx,mx=c_&&s_.process,Jr=function(){try{var P=Lo&&Lo.require&&Lo.require("util").types;return P||mx&&mx.binding&&mx.binding("util")}catch{}}(),l_=Jr&&Jr.isArrayBuffer,p_=Jr&&Jr.isDate,u_=Jr&&Jr.isMap,f_=Jr&&Jr.isRegExp,m_=Jr&&Jr.isSet,d_=Jr&&Jr.isTypedArray;function Ir(P,V,U){switch(U.length){case 0:return P.call(V);case 1:return P.call(V,U[0]);case 2:return P.call(V,U[0],U[1]);case 3:return P.call(V,U[0],U[1],U[2])}return P.apply(V,U)}function KN(P,V,U,te){for(var xe=-1,We=P==null?0:P.length;++xe<We;){var _t=P[xe];V(te,_t,U(_t),P)}return te}function en(P,V){for(var U=-1,te=P==null?0:P.length;++U<te&&V(P[U],U,P)!==!1;);return P}function QN(P,V){for(var U=P==null?0:P.length;U--&&V(P[U],U,P)!==!1;);return P}function h_(P,V){for(var U=-1,te=P==null?0:P.length;++U<te;)if(!V(P[U],U,P))return!1;return!0}function $i(P,V){for(var U=-1,te=P==null?0:P.length,xe=0,We=[];++U<te;){var _t=P[U];V(_t,U,P)&&(We[xe++]=_t)}return We}function Xp(P,V){var U=P==null?0:P.length;return!!U&&Ua(P,V,0)>-1}function dx(P,V,U){for(var te=-1,xe=P==null?0:P.length;++te<xe;)if(U(V,P[te]))return!0;return!1}function rt(P,V){for(var U=-1,te=P==null?0:P.length,xe=Array(te);++U<te;)xe[U]=V(P[U],U,P);return xe}function ji(P,V){for(var U=-1,te=V.length,xe=P.length;++U<te;)P[xe+U]=V[U];return P}function hx(P,V,U,te){var xe=-1,We=P==null?0:P.length;for(te&&We&&(U=P[++xe]);++xe<We;)U=V(U,P[xe],xe,P);return U}function ZN(P,V,U,te){var xe=P==null?0:P.length;for(te&&xe&&(U=P[--xe]);xe--;)U=V(U,P[xe],xe,P);return U}function gx(P,V){for(var U=-1,te=P==null?0:P.length;++U<te;)if(V(P[U],U,P))return!0;return!1}var YN=yx("length");function XN(P){return P.split("")}function JN(P){return P.match(sN)||[]}function g_(P,V,U){var te;return U(P,function(xe,We,_t){if(V(xe,We,_t))return te=We,!1}),te}function Jp(P,V,U,te){for(var xe=P.length,We=U+(te?1:-1);te?We--:++We<xe;)if(V(P[We],We,P))return We;return-1}function Ua(P,V,U){return V===V?uO(P,V,U):Jp(P,y_,U)}function eO(P,V,U,te){for(var xe=U-1,We=P.length;++xe<We;)if(te(P[xe],V))return xe;return-1}function y_(P){return P!==P}function x_(P,V){var U=P==null?0:P.length;return U?Sx(P,V)/U:ge}function yx(P){return function(V){return V==null?t:V[P]}}function xx(P){return function(V){return P==null?t:P[V]}}function S_(P,V,U,te,xe){return xe(P,function(We,_t,Qe){U=te?(te=!1,We):V(U,We,_t,Qe)}),U}function tO(P,V){var U=P.length;for(P.sort(V);U--;)P[U]=P[U].value;return P}function Sx(P,V){for(var U,te=-1,xe=P.length;++te<xe;){var We=V(P[te]);We!==t&&(U=U===t?We:U+We)}return U}function Tx(P,V){for(var U=-1,te=Array(P);++U<P;)te[U]=V(U);return te}function rO(P,V){return rt(V,function(U){return[U,P[U]]})}function T_(P){return P&&P.slice(0,__(P)+1).replace(ax,"")}function Cr(P){return function(V){return P(V)}}function vx(P,V){return rt(V,function(U){return P[U]})}function Nc(P,V){return P.has(V)}function v_(P,V){for(var U=-1,te=P.length;++U<te&&Ua(V,P[U],0)>-1;);return U}function b_(P,V){for(var U=P.length;U--&&Ua(V,P[U],0)>-1;);return U}function nO(P,V){for(var U=P.length,te=0;U--;)P[U]===V&&++te;return te}var iO=xx(BN),oO=xx(WN);function aO(P){return"\\"+jN[P]}function sO(P,V){return P==null?t:P[V]}function Ha(P){return LN.test(P)}function cO(P){return UN.test(P)}function lO(P){for(var V,U=[];!(V=P.next()).done;)U.push(V.value);return U}function bx(P){var V=-1,U=Array(P.size);return P.forEach(function(te,xe){U[++V]=[xe,te]}),U}function w_(P,V){return function(U){return P(V(U))}}function qi(P,V){for(var U=-1,te=P.length,xe=0,We=[];++U<te;){var _t=P[U];(_t===V||_t===p)&&(P[U]=p,We[xe++]=U)}return We}function eu(P){var V=-1,U=Array(P.size);return P.forEach(function(te){U[++V]=te}),U}function pO(P){var V=-1,U=Array(P.size);return P.forEach(function(te){U[++V]=[te,te]}),U}function uO(P,V,U){for(var te=U-1,xe=P.length;++te<xe;)if(P[te]===V)return te;return-1}function fO(P,V,U){for(var te=U+1;te--;)if(P[te]===V)return te;return te}function Va(P){return Ha(P)?dO(P):YN(P)}function Pn(P){return Ha(P)?hO(P):XN(P)}function __(P){for(var V=P.length;V--&&nN.test(P.charAt(V)););return V}var mO=xx($N);function dO(P){for(var V=ux.lastIndex=0;ux.test(P);)++V;return V}function hO(P){return P.match(ux)||[]}function gO(P){return P.match(ON)||[]}var yO=function P(V){V=V==null?Mt:zi.defaults(Mt.Object(),V,zi.pick(Mt,HN));var U=V.Array,te=V.Date,xe=V.Error,We=V.Function,_t=V.Math,Qe=V.Object,wx=V.RegExp,xO=V.String,tn=V.TypeError,tu=U.prototype,SO=We.prototype,Ba=Qe.prototype,ru=V["__core-js_shared__"],nu=SO.toString,ze=Ba.hasOwnProperty,TO=0,E_=function(){var a=/[^.]+$/.exec(ru&&ru.keys&&ru.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),iu=Ba.toString,vO=nu.call(Qe),bO=Mt._,wO=wx("^"+nu.call(ze).replace(ox,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ou=c_?V.Buffer:t,Gi=V.Symbol,au=V.Uint8Array,R_=ou?ou.allocUnsafe:t,su=w_(Qe.getPrototypeOf,Qe),k_=Qe.create,P_=Ba.propertyIsEnumerable,cu=tu.splice,A_=Gi?Gi.isConcatSpreadable:t,Oc=Gi?Gi.iterator:t,Uo=Gi?Gi.toStringTag:t,lu=function(){try{var a=$o(Qe,"defineProperty");return a({},"",{}),a}catch{}}(),_O=V.clearTimeout!==Mt.clearTimeout&&V.clearTimeout,EO=te&&te.now!==Mt.Date.now&&te.now,RO=V.setTimeout!==Mt.setTimeout&&V.setTimeout,pu=_t.ceil,uu=_t.floor,_x=Qe.getOwnPropertySymbols,kO=ou?ou.isBuffer:t,M_=V.isFinite,PO=tu.join,AO=w_(Qe.keys,Qe),Et=_t.max,qt=_t.min,MO=te.now,DO=V.parseInt,D_=_t.random,FO=tu.reverse,Ex=$o(V,"DataView"),Lc=$o(V,"Map"),Rx=$o(V,"Promise"),Wa=$o(V,"Set"),Uc=$o(V,"WeakMap"),Hc=$o(Qe,"create"),fu=Uc&&new Uc,$a={},IO=jo(Ex),CO=jo(Lc),NO=jo(Rx),OO=jo(Wa),LO=jo(Uc),mu=Gi?Gi.prototype:t,Vc=mu?mu.valueOf:t,F_=mu?mu.toString:t;function S(a){if(ut(a)&&!Se(a)&&!(a instanceof Ie)){if(a instanceof rn)return a;if(ze.call(a,"__wrapped__"))return I0(a)}return new rn(a)}var ja=function(){function a(){}return function(c){if(!st(c))return{};if(k_)return k_(c);a.prototype=c;var f=new a;return a.prototype=t,f}}();function du(){}function rn(a,c){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=t}S.templateSettings={escape:Y1,evaluate:X1,interpolate:Bw,variable:"",imports:{_:S}},S.prototype=du.prototype,S.prototype.constructor=S,rn.prototype=ja(du.prototype),rn.prototype.constructor=rn;function Ie(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ne,this.__views__=[]}function UO(){var a=new Ie(this.__wrapped__);return a.__actions__=hr(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=hr(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=hr(this.__views__),a}function HO(){if(this.__filtered__){var a=new Ie(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a}function VO(){var a=this.__wrapped__.value(),c=this.__dir__,f=Se(a),h=c<0,y=f?a.length:0,T=XL(0,y,this.__views__),E=T.start,R=T.end,M=R-E,B=h?R:E-1,W=this.__iteratees__,z=W.length,X=0,ae=qt(M,this.__takeCount__);if(!f||!h&&y==M&&ae==M)return r0(a,this.__actions__);var me=[];e:for(;M--&&X<ae;){B+=c;for(var Re=-1,de=a[B];++Re<z;){var De=W[Re],Ce=De.iteratee,Lr=De.type,rr=Ce(de);if(Lr==j)de=rr;else if(!rr){if(Lr==D)continue e;break e}}me[X++]=de}return me}Ie.prototype=ja(du.prototype),Ie.prototype.constructor=Ie;function Ho(a){var c=-1,f=a==null?0:a.length;for(this.clear();++c<f;){var h=a[c];this.set(h[0],h[1])}}function BO(){this.__data__=Hc?Hc(null):{},this.size=0}function WO(a){var c=this.has(a)&&delete this.__data__[a];return this.size-=c?1:0,c}function $O(a){var c=this.__data__;if(Hc){var f=c[a];return f===s?t:f}return ze.call(c,a)?c[a]:t}function jO(a){var c=this.__data__;return Hc?c[a]!==t:ze.call(c,a)}function qO(a,c){var f=this.__data__;return this.size+=this.has(a)?0:1,f[a]=Hc&&c===t?s:c,this}Ho.prototype.clear=BO,Ho.prototype.delete=WO,Ho.prototype.get=$O,Ho.prototype.has=jO,Ho.prototype.set=qO;function yi(a){var c=-1,f=a==null?0:a.length;for(this.clear();++c<f;){var h=a[c];this.set(h[0],h[1])}}function zO(){this.__data__=[],this.size=0}function GO(a){var c=this.__data__,f=hu(c,a);if(f<0)return!1;var h=c.length-1;return f==h?c.pop():cu.call(c,f,1),--this.size,!0}function KO(a){var c=this.__data__,f=hu(c,a);return f<0?t:c[f][1]}function QO(a){return hu(this.__data__,a)>-1}function ZO(a,c){var f=this.__data__,h=hu(f,a);return h<0?(++this.size,f.push([a,c])):f[h][1]=c,this}yi.prototype.clear=zO,yi.prototype.delete=GO,yi.prototype.get=KO,yi.prototype.has=QO,yi.prototype.set=ZO;function xi(a){var c=-1,f=a==null?0:a.length;for(this.clear();++c<f;){var h=a[c];this.set(h[0],h[1])}}function YO(){this.size=0,this.__data__={hash:new Ho,map:new(Lc||yi),string:new Ho}}function XO(a){var c=ku(this,a).delete(a);return this.size-=c?1:0,c}function JO(a){return ku(this,a).get(a)}function eL(a){return ku(this,a).has(a)}function tL(a,c){var f=ku(this,a),h=f.size;return f.set(a,c),this.size+=f.size==h?0:1,this}xi.prototype.clear=YO,xi.prototype.delete=XO,xi.prototype.get=JO,xi.prototype.has=eL,xi.prototype.set=tL;function Vo(a){var c=-1,f=a==null?0:a.length;for(this.__data__=new xi;++c<f;)this.add(a[c])}function rL(a){return this.__data__.set(a,s),this}function nL(a){return this.__data__.has(a)}Vo.prototype.add=Vo.prototype.push=rL,Vo.prototype.has=nL;function An(a){var c=this.__data__=new yi(a);this.size=c.size}function iL(){this.__data__=new yi,this.size=0}function oL(a){var c=this.__data__,f=c.delete(a);return this.size=c.size,f}function aL(a){return this.__data__.get(a)}function sL(a){return this.__data__.has(a)}function cL(a,c){var f=this.__data__;if(f instanceof yi){var h=f.__data__;if(!Lc||h.length<r-1)return h.push([a,c]),this.size=++f.size,this;f=this.__data__=new xi(h)}return f.set(a,c),this.size=f.size,this}An.prototype.clear=iL,An.prototype.delete=oL,An.prototype.get=aL,An.prototype.has=sL,An.prototype.set=cL;function I_(a,c){var f=Se(a),h=!f&&qo(a),y=!f&&!h&&Xi(a),T=!f&&!h&&!y&&Ka(a),E=f||h||y||T,R=E?Tx(a.length,xO):[],M=R.length;for(var B in a)(c||ze.call(a,B))&&!(E&&(B=="length"||y&&(B=="offset"||B=="parent")||T&&(B=="buffer"||B=="byteLength"||B=="byteOffset")||bi(B,M)))&&R.push(B);return R}function C_(a){var c=a.length;return c?a[Lx(0,c-1)]:t}function lL(a,c){return Pu(hr(a),Bo(c,0,a.length))}function pL(a){return Pu(hr(a))}function kx(a,c,f){(f!==t&&!Mn(a[c],f)||f===t&&!(c in a))&&Si(a,c,f)}function Bc(a,c,f){var h=a[c];(!(ze.call(a,c)&&Mn(h,f))||f===t&&!(c in a))&&Si(a,c,f)}function hu(a,c){for(var f=a.length;f--;)if(Mn(a[f][0],c))return f;return-1}function uL(a,c,f,h){return Ki(a,function(y,T,E){c(h,y,f(y),E)}),h}function N_(a,c){return a&&zn(c,Dt(c),a)}function fL(a,c){return a&&zn(c,yr(c),a)}function Si(a,c,f){c=="__proto__"&&lu?lu(a,c,{configurable:!0,enumerable:!0,value:f,writable:!0}):a[c]=f}function Px(a,c){for(var f=-1,h=c.length,y=U(h),T=a==null;++f<h;)y[f]=T?t:cS(a,c[f]);return y}function Bo(a,c,f){return a===a&&(f!==t&&(a=a<=f?a:f),c!==t&&(a=a>=c?a:c)),a}function nn(a,c,f,h,y,T){var E,R=c&u,M=c&m,B=c&d;if(f&&(E=y?f(a,h,y,T):f(a)),E!==t)return E;if(!st(a))return a;var W=Se(a);if(W){if(E=eU(a),!R)return hr(a,E)}else{var z=zt(a),X=z==Na||z==Lw;if(Xi(a))return o0(a,R);if(z==gi||z==dr||X&&!y){if(E=M||X?{}:_0(a),!R)return M?$L(a,fL(E,a)):WL(a,N_(E,a))}else{if(!Ye[z])return y?a:{};E=tU(a,z,R)}}T||(T=new An);var ae=T.get(a);if(ae)return ae;T.set(a,E),J0(a)?a.forEach(function(de){E.add(nn(de,c,f,de,a,T))}):Y0(a)&&a.forEach(function(de,De){E.set(De,nn(de,c,f,De,a,T))});var me=B?M?Kx:Gx:M?yr:Dt,Re=W?t:me(a);return en(Re||a,function(de,De){Re&&(De=de,de=a[De]),Bc(E,De,nn(de,c,f,De,a,T))}),E}function mL(a){var c=Dt(a);return function(f){return O_(f,a,c)}}function O_(a,c,f){var h=f.length;if(a==null)return!h;for(a=Qe(a);h--;){var y=f[h],T=c[y],E=a[y];if(E===t&&!(y in a)||!T(E))return!1}return!0}function L_(a,c,f){if(typeof a!="function")throw new tn(i);return Kc(function(){a.apply(t,f)},c)}function Wc(a,c,f,h){var y=-1,T=Xp,E=!0,R=a.length,M=[],B=c.length;if(!R)return M;f&&(c=rt(c,Cr(f))),h?(T=dx,E=!1):c.length>=r&&(T=Nc,E=!1,c=new Vo(c));e:for(;++y<R;){var W=a[y],z=f==null?W:f(W);if(W=h||W!==0?W:0,E&&z===z){for(var X=B;X--;)if(c[X]===z)continue e;M.push(W)}else T(c,z,h)||M.push(W)}return M}var Ki=p0(qn),U_=p0(Mx,!0);function dL(a,c){var f=!0;return Ki(a,function(h,y,T){return f=!!c(h,y,T),f}),f}function gu(a,c,f){for(var h=-1,y=a.length;++h<y;){var T=a[h],E=c(T);if(E!=null&&(R===t?E===E&&!Or(E):f(E,R)))var R=E,M=T}return M}function hL(a,c,f,h){var y=a.length;for(f=be(f),f<0&&(f=-f>y?0:y+f),h=h===t||h>y?y:be(h),h<0&&(h+=y),h=f>h?0:tE(h);f<h;)a[f++]=c;return a}function H_(a,c){var f=[];return Ki(a,function(h,y,T){c(h,y,T)&&f.push(h)}),f}function Ut(a,c,f,h,y){var T=-1,E=a.length;for(f||(f=nU),y||(y=[]);++T<E;){var R=a[T];c>0&&f(R)?c>1?Ut(R,c-1,f,h,y):ji(y,R):h||(y[y.length]=R)}return y}var Ax=u0(),V_=u0(!0);function qn(a,c){return a&&Ax(a,c,Dt)}function Mx(a,c){return a&&V_(a,c,Dt)}function yu(a,c){return $i(c,function(f){return wi(a[f])})}function Wo(a,c){c=Zi(c,a);for(var f=0,h=c.length;a!=null&&f<h;)a=a[Gn(c[f++])];return f&&f==h?a:t}function B_(a,c,f){var h=c(a);return Se(a)?h:ji(h,f(a))}function er(a){return a==null?a===t?j1:W1:Uo&&Uo in Qe(a)?YL(a):pU(a)}function Dx(a,c){return a>c}function gL(a,c){return a!=null&&ze.call(a,c)}function yL(a,c){return a!=null&&c in Qe(a)}function xL(a,c,f){return a>=qt(c,f)&&a<Et(c,f)}function Fx(a,c,f){for(var h=f?dx:Xp,y=a[0].length,T=a.length,E=T,R=U(T),M=1/0,B=[];E--;){var W=a[E];E&&c&&(W=rt(W,Cr(c))),M=qt(W.length,M),R[E]=!f&&(c||y>=120&&W.length>=120)?new Vo(E&&W):t}W=a[0];var z=-1,X=R[0];e:for(;++z<y&&B.length<M;){var ae=W[z],me=c?c(ae):ae;if(ae=f||ae!==0?ae:0,!(X?Nc(X,me):h(B,me,f))){for(E=T;--E;){var Re=R[E];if(!(Re?Nc(Re,me):h(a[E],me,f)))continue e}X&&X.push(me),B.push(ae)}}return B}function SL(a,c,f,h){return qn(a,function(y,T,E){c(h,f(y),T,E)}),h}function $c(a,c,f){c=Zi(c,a),a=P0(a,c);var h=a==null?a:a[Gn(an(c))];return h==null?t:Ir(h,a,f)}function W_(a){return ut(a)&&er(a)==dr}function TL(a){return ut(a)&&er(a)==Cc}function vL(a){return ut(a)&&er(a)==Xr}function jc(a,c,f,h,y){return a===c?!0:a==null||c==null||!ut(a)&&!ut(c)?a!==a&&c!==c:bL(a,c,f,h,jc,y)}function bL(a,c,f,h,y,T){var E=Se(a),R=Se(c),M=E?_n:zt(a),B=R?_n:zt(c);M=M==dr?gi:M,B=B==dr?gi:B;var W=M==gi,z=B==gi,X=M==B;if(X&&Xi(a)){if(!Xi(c))return!1;E=!0,W=!1}if(X&&!W)return T||(T=new An),E||Ka(a)?v0(a,c,f,h,y,T):QL(a,c,M,f,h,y,T);if(!(f&g)){var ae=W&&ze.call(a,"__wrapped__"),me=z&&ze.call(c,"__wrapped__");if(ae||me){var Re=ae?a.value():a,de=me?c.value():c;return T||(T=new An),y(Re,de,f,h,T)}}return X?(T||(T=new An),ZL(a,c,f,h,y,T)):!1}function wL(a){return ut(a)&&zt(a)==Rn}function Ix(a,c,f,h){var y=f.length,T=y,E=!h;if(a==null)return!T;for(a=Qe(a);y--;){var R=f[y];if(E&&R[2]?R[1]!==a[R[0]]:!(R[0]in a))return!1}for(;++y<T;){R=f[y];var M=R[0],B=a[M],W=R[1];if(E&&R[2]){if(B===t&&!(M in a))return!1}else{var z=new An;if(h)var X=h(B,W,M,a,c,z);if(!(X===t?jc(W,B,g|x,h,z):X))return!1}}return!0}function $_(a){if(!st(a)||oU(a))return!1;var c=wi(a)?wO:mN;return c.test(jo(a))}function _L(a){return ut(a)&&er(a)==Dc}function EL(a){return ut(a)&&zt(a)==kn}function RL(a){return ut(a)&&Cu(a.length)&&!!Je[er(a)]}function j_(a){return typeof a=="function"?a:a==null?xr:typeof a=="object"?Se(a)?G_(a[0],a[1]):z_(a):fE(a)}function Cx(a){if(!Gc(a))return AO(a);var c=[];for(var f in Qe(a))ze.call(a,f)&&f!="constructor"&&c.push(f);return c}function kL(a){if(!st(a))return lU(a);var c=Gc(a),f=[];for(var h in a)h=="constructor"&&(c||!ze.call(a,h))||f.push(h);return f}function Nx(a,c){return a<c}function q_(a,c){var f=-1,h=gr(a)?U(a.length):[];return Ki(a,function(y,T,E){h[++f]=c(y,T,E)}),h}function z_(a){var c=Zx(a);return c.length==1&&c[0][2]?R0(c[0][0],c[0][1]):function(f){return f===a||Ix(f,a,c)}}function G_(a,c){return Xx(a)&&E0(c)?R0(Gn(a),c):function(f){var h=cS(f,a);return h===t&&h===c?lS(f,a):jc(c,h,g|x)}}function xu(a,c,f,h,y){a!==c&&Ax(c,function(T,E){if(y||(y=new An),st(T))PL(a,c,E,f,xu,h,y);else{var R=h?h(eS(a,E),T,E+"",a,c,y):t;R===t&&(R=T),kx(a,E,R)}},yr)}function PL(a,c,f,h,y,T,E){var R=eS(a,f),M=eS(c,f),B=E.get(M);if(B){kx(a,f,B);return}var W=T?T(R,M,f+"",a,c,E):t,z=W===t;if(z){var X=Se(M),ae=!X&&Xi(M),me=!X&&!ae&&Ka(M);W=M,X||ae||me?Se(R)?W=R:ht(R)?W=hr(R):ae?(z=!1,W=o0(M,!0)):me?(z=!1,W=a0(M,!0)):W=[]:Qc(M)||qo(M)?(W=R,qo(R)?W=rE(R):(!st(R)||wi(R))&&(W=_0(M))):z=!1}z&&(E.set(M,W),y(W,M,h,T,E),E.delete(M)),kx(a,f,W)}function K_(a,c){var f=a.length;if(f)return c+=c<0?f:0,bi(c,f)?a[c]:t}function Q_(a,c,f){c.length?c=rt(c,function(T){return Se(T)?function(E){return Wo(E,T.length===1?T[0]:T)}:T}):c=[xr];var h=-1;c=rt(c,Cr(fe()));var y=q_(a,function(T,E,R){var M=rt(c,function(B){return B(T)});return{criteria:M,index:++h,value:T}});return tO(y,function(T,E){return BL(T,E,f)})}function AL(a,c){return Z_(a,c,function(f,h){return lS(a,h)})}function Z_(a,c,f){for(var h=-1,y=c.length,T={};++h<y;){var E=c[h],R=Wo(a,E);f(R,E)&&qc(T,Zi(E,a),R)}return T}function ML(a){return function(c){return Wo(c,a)}}function Ox(a,c,f,h){var y=h?eO:Ua,T=-1,E=c.length,R=a;for(a===c&&(c=hr(c)),f&&(R=rt(a,Cr(f)));++T<E;)for(var M=0,B=c[T],W=f?f(B):B;(M=y(R,W,M,h))>-1;)R!==a&&cu.call(R,M,1),cu.call(a,M,1);return a}function Y_(a,c){for(var f=a?c.length:0,h=f-1;f--;){var y=c[f];if(f==h||y!==T){var T=y;bi(y)?cu.call(a,y,1):Vx(a,y)}}return a}function Lx(a,c){return a+uu(D_()*(c-a+1))}function DL(a,c,f,h){for(var y=-1,T=Et(pu((c-a)/(f||1)),0),E=U(T);T--;)E[h?T:++y]=a,a+=f;return E}function Ux(a,c){var f="";if(!a||c<1||c>Y)return f;do c%2&&(f+=a),c=uu(c/2),c&&(a+=a);while(c);return f}function Pe(a,c){return tS(k0(a,c,xr),a+"")}function FL(a){return C_(Qa(a))}function IL(a,c){var f=Qa(a);return Pu(f,Bo(c,0,f.length))}function qc(a,c,f,h){if(!st(a))return a;c=Zi(c,a);for(var y=-1,T=c.length,E=T-1,R=a;R!=null&&++y<T;){var M=Gn(c[y]),B=f;if(M==="__proto__"||M==="constructor"||M==="prototype")return a;if(y!=E){var W=R[M];B=h?h(W,M,R):t,B===t&&(B=st(W)?W:bi(c[y+1])?[]:{})}Bc(R,M,B),R=R[M]}return a}var X_=fu?function(a,c){return fu.set(a,c),a}:xr,CL=lu?function(a,c){return lu(a,"toString",{configurable:!0,enumerable:!1,value:uS(c),writable:!0})}:xr;function NL(a){return Pu(Qa(a))}function on(a,c,f){var h=-1,y=a.length;c<0&&(c=-c>y?0:y+c),f=f>y?y:f,f<0&&(f+=y),y=c>f?0:f-c>>>0,c>>>=0;for(var T=U(y);++h<y;)T[h]=a[h+c];return T}function OL(a,c){var f;return Ki(a,function(h,y,T){return f=c(h,y,T),!f}),!!f}function Su(a,c,f){var h=0,y=a==null?h:a.length;if(typeof c=="number"&&c===c&&y<=mr){for(;h<y;){var T=h+y>>>1,E=a[T];E!==null&&!Or(E)&&(f?E<=c:E<c)?h=T+1:y=T}return y}return Hx(a,c,xr,f)}function Hx(a,c,f,h){var y=0,T=a==null?0:a.length;if(T===0)return 0;c=f(c);for(var E=c!==c,R=c===null,M=Or(c),B=c===t;y<T;){var W=uu((y+T)/2),z=f(a[W]),X=z!==t,ae=z===null,me=z===z,Re=Or(z);if(E)var de=h||me;else B?de=me&&(h||X):R?de=me&&X&&(h||!ae):M?de=me&&X&&!ae&&(h||!Re):ae||Re?de=!1:de=h?z<=c:z<c;de?y=W+1:T=W}return qt(T,ke)}function J_(a,c){for(var f=-1,h=a.length,y=0,T=[];++f<h;){var E=a[f],R=c?c(E):E;if(!f||!Mn(R,M)){var M=R;T[y++]=E===0?0:E}}return T}function e0(a){return typeof a=="number"?a:Or(a)?ge:+a}function Nr(a){if(typeof a=="string")return a;if(Se(a))return rt(a,Nr)+"";if(Or(a))return F_?F_.call(a):"";var c=a+"";return c=="0"&&1/a==-Z?"-0":c}function Qi(a,c,f){var h=-1,y=Xp,T=a.length,E=!0,R=[],M=R;if(f)E=!1,y=dx;else if(T>=r){var B=c?null:GL(a);if(B)return eu(B);E=!1,y=Nc,M=new Vo}else M=c?[]:R;e:for(;++h<T;){var W=a[h],z=c?c(W):W;if(W=f||W!==0?W:0,E&&z===z){for(var X=M.length;X--;)if(M[X]===z)continue e;c&&M.push(z),R.push(W)}else y(M,z,f)||(M!==R&&M.push(z),R.push(W))}return R}function Vx(a,c){return c=Zi(c,a),a=P0(a,c),a==null||delete a[Gn(an(c))]}function t0(a,c,f,h){return qc(a,c,f(Wo(a,c)),h)}function Tu(a,c,f,h){for(var y=a.length,T=h?y:-1;(h?T--:++T<y)&&c(a[T],T,a););return f?on(a,h?0:T,h?T+1:y):on(a,h?T+1:0,h?y:T)}function r0(a,c){var f=a;return f instanceof Ie&&(f=f.value()),hx(c,function(h,y){return y.func.apply(y.thisArg,ji([h],y.args))},f)}function Bx(a,c,f){var h=a.length;if(h<2)return h?Qi(a[0]):[];for(var y=-1,T=U(h);++y<h;)for(var E=a[y],R=-1;++R<h;)R!=y&&(T[y]=Wc(T[y]||E,a[R],c,f));return Qi(Ut(T,1),c,f)}function n0(a,c,f){for(var h=-1,y=a.length,T=c.length,E={};++h<y;){var R=h<T?c[h]:t;f(E,a[h],R)}return E}function Wx(a){return ht(a)?a:[]}function $x(a){return typeof a=="function"?a:xr}function Zi(a,c){return Se(a)?a:Xx(a,c)?[a]:F0(je(a))}var LL=Pe;function Yi(a,c,f){var h=a.length;return f=f===t?h:f,!c&&f>=h?a:on(a,c,f)}var i0=_O||function(a){return Mt.clearTimeout(a)};function o0(a,c){if(c)return a.slice();var f=a.length,h=R_?R_(f):new a.constructor(f);return a.copy(h),h}function jx(a){var c=new a.constructor(a.byteLength);return new au(c).set(new au(a)),c}function UL(a,c){var f=c?jx(a.buffer):a.buffer;return new a.constructor(f,a.byteOffset,a.byteLength)}function HL(a){var c=new a.constructor(a.source,Ww.exec(a));return c.lastIndex=a.lastIndex,c}function VL(a){return Vc?Qe(Vc.call(a)):{}}function a0(a,c){var f=c?jx(a.buffer):a.buffer;return new a.constructor(f,a.byteOffset,a.length)}function s0(a,c){if(a!==c){var f=a!==t,h=a===null,y=a===a,T=Or(a),E=c!==t,R=c===null,M=c===c,B=Or(c);if(!R&&!B&&!T&&a>c||T&&E&&M&&!R&&!B||h&&E&&M||!f&&M||!y)return 1;if(!h&&!T&&!B&&a<c||B&&f&&y&&!h&&!T||R&&f&&y||!E&&y||!M)return-1}return 0}function BL(a,c,f){for(var h=-1,y=a.criteria,T=c.criteria,E=y.length,R=f.length;++h<E;){var M=s0(y[h],T[h]);if(M){if(h>=R)return M;var B=f[h];return M*(B=="desc"?-1:1)}}return a.index-c.index}function c0(a,c,f,h){for(var y=-1,T=a.length,E=f.length,R=-1,M=c.length,B=Et(T-E,0),W=U(M+B),z=!h;++R<M;)W[R]=c[R];for(;++y<E;)(z||y<T)&&(W[f[y]]=a[y]);for(;B--;)W[R++]=a[y++];return W}function l0(a,c,f,h){for(var y=-1,T=a.length,E=-1,R=f.length,M=-1,B=c.length,W=Et(T-R,0),z=U(W+B),X=!h;++y<W;)z[y]=a[y];for(var ae=y;++M<B;)z[ae+M]=c[M];for(;++E<R;)(X||y<T)&&(z[ae+f[E]]=a[y++]);return z}function hr(a,c){var f=-1,h=a.length;for(c||(c=U(h));++f<h;)c[f]=a[f];return c}function zn(a,c,f,h){var y=!f;f||(f={});for(var T=-1,E=c.length;++T<E;){var R=c[T],M=h?h(f[R],a[R],R,f,a):t;M===t&&(M=a[R]),y?Si(f,R,M):Bc(f,R,M)}return f}function WL(a,c){return zn(a,Yx(a),c)}function $L(a,c){return zn(a,b0(a),c)}function vu(a,c){return function(f,h){var y=Se(f)?KN:uL,T=c?c():{};return y(f,a,fe(h,2),T)}}function qa(a){return Pe(function(c,f){var h=-1,y=f.length,T=y>1?f[y-1]:t,E=y>2?f[2]:t;for(T=a.length>3&&typeof T=="function"?(y--,T):t,E&&tr(f[0],f[1],E)&&(T=y<3?t:T,y=1),c=Qe(c);++h<y;){var R=f[h];R&&a(c,R,h,T)}return c})}function p0(a,c){return function(f,h){if(f==null)return f;if(!gr(f))return a(f,h);for(var y=f.length,T=c?y:-1,E=Qe(f);(c?T--:++T<y)&&h(E[T],T,E)!==!1;);return f}}function u0(a){return function(c,f,h){for(var y=-1,T=Qe(c),E=h(c),R=E.length;R--;){var M=E[a?R:++y];if(f(T[M],M,T)===!1)break}return c}}function jL(a,c,f){var h=c&b,y=zc(a);function T(){var E=this&&this!==Mt&&this instanceof T?y:a;return E.apply(h?f:this,arguments)}return T}function f0(a){return function(c){c=je(c);var f=Ha(c)?Pn(c):t,h=f?f[0]:c.charAt(0),y=f?Yi(f,1).join(""):c.slice(1);return h[a]()+y}}function za(a){return function(c){return hx(pE(lE(c).replace(CN,"")),a,"")}}function zc(a){return function(){var c=arguments;switch(c.length){case 0:return new a;case 1:return new a(c[0]);case 2:return new a(c[0],c[1]);case 3:return new a(c[0],c[1],c[2]);case 4:return new a(c[0],c[1],c[2],c[3]);case 5:return new a(c[0],c[1],c[2],c[3],c[4]);case 6:return new a(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new a(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var f=ja(a.prototype),h=a.apply(f,c);return st(h)?h:f}}function qL(a,c,f){var h=zc(a);function y(){for(var T=arguments.length,E=U(T),R=T,M=Ga(y);R--;)E[R]=arguments[R];var B=T<3&&E[0]!==M&&E[T-1]!==M?[]:qi(E,M);if(T-=B.length,T<f)return y0(a,c,bu,y.placeholder,t,E,B,t,t,f-T);var W=this&&this!==Mt&&this instanceof y?h:a;return Ir(W,this,E)}return y}function m0(a){return function(c,f,h){var y=Qe(c);if(!gr(c)){var T=fe(f,3);c=Dt(c),f=function(R){return T(y[R],R,y)}}var E=a(c,f,h);return E>-1?y[T?c[E]:E]:t}}function d0(a){return vi(function(c){var f=c.length,h=f,y=rn.prototype.thru;for(a&&c.reverse();h--;){var T=c[h];if(typeof T!="function")throw new tn(i);if(y&&!E&&Ru(T)=="wrapper")var E=new rn([],!0)}for(h=E?h:f;++h<f;){T=c[h];var R=Ru(T),M=R=="wrapper"?Qx(T):t;M&&Jx(M[0])&&M[1]==(oe|F|Q|ce)&&!M[4].length&&M[9]==1?E=E[Ru(M[0])].apply(E,M[3]):E=T.length==1&&Jx(T)?E[R]():E.thru(T)}return function(){var B=arguments,W=B[0];if(E&&B.length==1&&Se(W))return E.plant(W).value();for(var z=0,X=f?c[z].apply(this,B):W;++z<f;)X=c[z].call(this,X);return X}})}function bu(a,c,f,h,y,T,E,R,M,B){var W=c&oe,z=c&b,X=c&v,ae=c&(F|H),me=c&at,Re=X?t:zc(a);function de(){for(var De=arguments.length,Ce=U(De),Lr=De;Lr--;)Ce[Lr]=arguments[Lr];if(ae)var rr=Ga(de),Ur=nO(Ce,rr);if(h&&(Ce=c0(Ce,h,y,ae)),T&&(Ce=l0(Ce,T,E,ae)),De-=Ur,ae&&De<B){var gt=qi(Ce,rr);return y0(a,c,bu,de.placeholder,f,Ce,gt,R,M,B-De)}var Dn=z?f:this,Ei=X?Dn[a]:a;return De=Ce.length,R?Ce=uU(Ce,R):me&&De>1&&Ce.reverse(),W&&M<De&&(Ce.length=M),this&&this!==Mt&&this instanceof de&&(Ei=Re||zc(Ei)),Ei.apply(Dn,Ce)}return de}function h0(a,c){return function(f,h){return SL(f,a,c(h),{})}}function wu(a,c){return function(f,h){var y;if(f===t&&h===t)return c;if(f!==t&&(y=f),h!==t){if(y===t)return h;typeof f=="string"||typeof h=="string"?(f=Nr(f),h=Nr(h)):(f=e0(f),h=e0(h)),y=a(f,h)}return y}}function qx(a){return vi(function(c){return c=rt(c,Cr(fe())),Pe(function(f){var h=this;return a(c,function(y){return Ir(y,h,f)})})})}function _u(a,c){c=c===t?" ":Nr(c);var f=c.length;if(f<2)return f?Ux(c,a):c;var h=Ux(c,pu(a/Va(c)));return Ha(c)?Yi(Pn(h),0,a).join(""):h.slice(0,a)}function zL(a,c,f,h){var y=c&b,T=zc(a);function E(){for(var R=-1,M=arguments.length,B=-1,W=h.length,z=U(W+M),X=this&&this!==Mt&&this instanceof E?T:a;++B<W;)z[B]=h[B];for(;M--;)z[B++]=arguments[++R];return Ir(X,y?f:this,z)}return E}function g0(a){return function(c,f,h){return h&&typeof h!="number"&&tr(c,f,h)&&(f=h=t),c=_i(c),f===t?(f=c,c=0):f=_i(f),h=h===t?c<f?1:-1:_i(h),DL(c,f,h,a)}}function Eu(a){return function(c,f){return typeof c=="string"&&typeof f=="string"||(c=sn(c),f=sn(f)),a(c,f)}}function y0(a,c,f,h,y,T,E,R,M,B){var W=c&F,z=W?E:t,X=W?t:E,ae=W?T:t,me=W?t:T;c|=W?Q:ie,c&=~(W?ie:Q),c&I||(c&=~(b|v));var Re=[a,c,y,ae,z,me,X,R,M,B],de=f.apply(t,Re);return Jx(a)&&A0(de,Re),de.placeholder=h,M0(de,a,c)}function zx(a){var c=_t[a];return function(f,h){if(f=sn(f),h=h==null?0:qt(be(h),292),h&&M_(f)){var y=(je(f)+"e").split("e"),T=c(y[0]+"e"+(+y[1]+h));return y=(je(T)+"e").split("e"),+(y[0]+"e"+(+y[1]-h))}return c(f)}}var GL=Wa&&1/eu(new Wa([,-0]))[1]==Z?function(a){return new Wa(a)}:dS;function x0(a){return function(c){var f=zt(c);return f==Rn?bx(c):f==kn?pO(c):rO(c,a(c))}}function Ti(a,c,f,h,y,T,E,R){var M=c&v;if(!M&&typeof a!="function")throw new tn(i);var B=h?h.length:0;if(B||(c&=~(Q|ie),h=y=t),E=E===t?E:Et(be(E),0),R=R===t?R:be(R),B-=y?y.length:0,c&ie){var W=h,z=y;h=y=t}var X=M?t:Qx(a),ae=[a,c,f,h,y,W,z,T,E,R];if(X&&cU(ae,X),a=ae[0],c=ae[1],f=ae[2],h=ae[3],y=ae[4],R=ae[9]=ae[9]===t?M?0:a.length:Et(ae[9]-B,0),!R&&c&(F|H)&&(c&=~(F|H)),!c||c==b)var me=jL(a,c,f);else c==F||c==H?me=qL(a,c,R):(c==Q||c==(b|Q))&&!y.length?me=zL(a,c,f,h):me=bu.apply(t,ae);var Re=X?X_:A0;return M0(Re(me,ae),a,c)}function S0(a,c,f,h){return a===t||Mn(a,Ba[f])&&!ze.call(h,f)?c:a}function T0(a,c,f,h,y,T){return st(a)&&st(c)&&(T.set(c,a),xu(a,c,t,T0,T),T.delete(c)),a}function KL(a){return Qc(a)?t:a}function v0(a,c,f,h,y,T){var E=f&g,R=a.length,M=c.length;if(R!=M&&!(E&&M>R))return!1;var B=T.get(a),W=T.get(c);if(B&&W)return B==c&&W==a;var z=-1,X=!0,ae=f&x?new Vo:t;for(T.set(a,c),T.set(c,a);++z<R;){var me=a[z],Re=c[z];if(h)var de=E?h(Re,me,z,c,a,T):h(me,Re,z,a,c,T);if(de!==t){if(de)continue;X=!1;break}if(ae){if(!gx(c,function(De,Ce){if(!Nc(ae,Ce)&&(me===De||y(me,De,f,h,T)))return ae.push(Ce)})){X=!1;break}}else if(!(me===Re||y(me,Re,f,h,T))){X=!1;break}}return T.delete(a),T.delete(c),X}function QL(a,c,f,h,y,T,E){switch(f){case Oa:if(a.byteLength!=c.byteLength||a.byteOffset!=c.byteOffset)return!1;a=a.buffer,c=c.buffer;case Cc:return!(a.byteLength!=c.byteLength||!T(new au(a),new au(c)));case En:case Xr:case Mc:return Mn(+a,+c);case hi:return a.name==c.name&&a.message==c.message;case Dc:case Fc:return a==c+"";case Rn:var R=bx;case kn:var M=h&g;if(R||(R=eu),a.size!=c.size&&!M)return!1;var B=E.get(a);if(B)return B==c;h|=x,E.set(a,c);var W=v0(R(a),R(c),h,y,T,E);return E.delete(a),W;case Kp:if(Vc)return Vc.call(a)==Vc.call(c)}return!1}function ZL(a,c,f,h,y,T){var E=f&g,R=Gx(a),M=R.length,B=Gx(c),W=B.length;if(M!=W&&!E)return!1;for(var z=M;z--;){var X=R[z];if(!(E?X in c:ze.call(c,X)))return!1}var ae=T.get(a),me=T.get(c);if(ae&&me)return ae==c&&me==a;var Re=!0;T.set(a,c),T.set(c,a);for(var de=E;++z<M;){X=R[z];var De=a[X],Ce=c[X];if(h)var Lr=E?h(Ce,De,X,c,a,T):h(De,Ce,X,a,c,T);if(!(Lr===t?De===Ce||y(De,Ce,f,h,T):Lr)){Re=!1;break}de||(de=X=="constructor")}if(Re&&!de){var rr=a.constructor,Ur=c.constructor;rr!=Ur&&"constructor"in a&&"constructor"in c&&!(typeof rr=="function"&&rr instanceof rr&&typeof Ur=="function"&&Ur instanceof Ur)&&(Re=!1)}return T.delete(a),T.delete(c),Re}function vi(a){return tS(k0(a,t,O0),a+"")}function Gx(a){return B_(a,Dt,Yx)}function Kx(a){return B_(a,yr,b0)}var Qx=fu?function(a){return fu.get(a)}:dS;function Ru(a){for(var c=a.name+"",f=$a[c],h=ze.call($a,c)?f.length:0;h--;){var y=f[h],T=y.func;if(T==null||T==a)return y.name}return c}function Ga(a){var c=ze.call(S,"placeholder")?S:a;return c.placeholder}function fe(){var a=S.iteratee||fS;return a=a===fS?j_:a,arguments.length?a(arguments[0],arguments[1]):a}function ku(a,c){var f=a.__data__;return iU(c)?f[typeof c=="string"?"string":"hash"]:f.map}function Zx(a){for(var c=Dt(a),f=c.length;f--;){var h=c[f],y=a[h];c[f]=[h,y,E0(y)]}return c}function $o(a,c){var f=sO(a,c);return $_(f)?f:t}function YL(a){var c=ze.call(a,Uo),f=a[Uo];try{a[Uo]=t;var h=!0}catch{}var y=iu.call(a);return h&&(c?a[Uo]=f:delete a[Uo]),y}var Yx=_x?function(a){return a==null?[]:(a=Qe(a),$i(_x(a),function(c){return P_.call(a,c)}))}:hS,b0=_x?function(a){for(var c=[];a;)ji(c,Yx(a)),a=su(a);return c}:hS,zt=er;(Ex&&zt(new Ex(new ArrayBuffer(1)))!=Oa||Lc&&zt(new Lc)!=Rn||Rx&&zt(Rx.resolve())!=Uw||Wa&&zt(new Wa)!=kn||Uc&&zt(new Uc)!=Ic)&&(zt=function(a){var c=er(a),f=c==gi?a.constructor:t,h=f?jo(f):"";if(h)switch(h){case IO:return Oa;case CO:return Rn;case NO:return Uw;case OO:return kn;case LO:return Ic}return c});function XL(a,c,f){for(var h=-1,y=f.length;++h<y;){var T=f[h],E=T.size;switch(T.type){case"drop":a+=E;break;case"dropRight":c-=E;break;case"take":c=qt(c,a+E);break;case"takeRight":a=Et(a,c-E);break}}return{start:a,end:c}}function JL(a){var c=a.match(oN);return c?c[1].split(aN):[]}function w0(a,c,f){c=Zi(c,a);for(var h=-1,y=c.length,T=!1;++h<y;){var E=Gn(c[h]);if(!(T=a!=null&&f(a,E)))break;a=a[E]}return T||++h!=y?T:(y=a==null?0:a.length,!!y&&Cu(y)&&bi(E,y)&&(Se(a)||qo(a)))}function eU(a){var c=a.length,f=new a.constructor(c);return c&&typeof a[0]=="string"&&ze.call(a,"index")&&(f.index=a.index,f.input=a.input),f}function _0(a){return typeof a.constructor=="function"&&!Gc(a)?ja(su(a)):{}}function tU(a,c,f){var h=a.constructor;switch(c){case Cc:return jx(a);case En:case Xr:return new h(+a);case Oa:return UL(a,f);case Zy:case Yy:case Xy:case Jy:case ex:case tx:case rx:case nx:case ix:return a0(a,f);case Rn:return new h;case Mc:case Fc:return new h(a);case Dc:return HL(a);case kn:return new h;case Kp:return VL(a)}}function rU(a,c){var f=c.length;if(!f)return a;var h=f-1;return c[h]=(f>1?"& ":"")+c[h],c=c.join(f>2?", ":" "),a.replace(iN,`{
/* [wrapped with `+c+`] */
`)}function nU(a){return Se(a)||qo(a)||!!(A_&&a&&a[A_])}function bi(a,c){var f=typeof a;return c=c??Y,!!c&&(f=="number"||f!="symbol"&&hN.test(a))&&a>-1&&a%1==0&&a<c}function tr(a,c,f){if(!st(f))return!1;var h=typeof c;return(h=="number"?gr(f)&&bi(c,f.length):h=="string"&&c in f)?Mn(f[c],a):!1}function Xx(a,c){if(Se(a))return!1;var f=typeof a;return f=="number"||f=="symbol"||f=="boolean"||a==null||Or(a)?!0:eN.test(a)||!J1.test(a)||c!=null&&a in Qe(c)}function iU(a){var c=typeof a;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?a!=="__proto__":a===null}function Jx(a){var c=Ru(a),f=S[c];if(typeof f!="function"||!(c in Ie.prototype))return!1;if(a===f)return!0;var h=Qx(f);return!!h&&a===h[0]}function oU(a){return!!E_&&E_ in a}var aU=ru?wi:gS;function Gc(a){var c=a&&a.constructor,f=typeof c=="function"&&c.prototype||Ba;return a===f}function E0(a){return a===a&&!st(a)}function R0(a,c){return function(f){return f==null?!1:f[a]===c&&(c!==t||a in Qe(f))}}function sU(a){var c=Fu(a,function(h){return f.size===l&&f.clear(),h}),f=c.cache;return c}function cU(a,c){var f=a[1],h=c[1],y=f|h,T=y<(b|v|oe),E=h==oe&&f==F||h==oe&&f==ce&&a[7].length<=c[8]||h==(oe|ce)&&c[7].length<=c[8]&&f==F;if(!(T||E))return a;h&b&&(a[2]=c[2],y|=f&b?0:I);var R=c[3];if(R){var M=a[3];a[3]=M?c0(M,R,c[4]):R,a[4]=M?qi(a[3],p):c[4]}return R=c[5],R&&(M=a[5],a[5]=M?l0(M,R,c[6]):R,a[6]=M?qi(a[5],p):c[6]),R=c[7],R&&(a[7]=R),h&oe&&(a[8]=a[8]==null?c[8]:qt(a[8],c[8])),a[9]==null&&(a[9]=c[9]),a[0]=c[0],a[1]=y,a}function lU(a){var c=[];if(a!=null)for(var f in Qe(a))c.push(f);return c}function pU(a){return iu.call(a)}function k0(a,c,f){return c=Et(c===t?a.length-1:c,0),function(){for(var h=arguments,y=-1,T=Et(h.length-c,0),E=U(T);++y<T;)E[y]=h[c+y];y=-1;for(var R=U(c+1);++y<c;)R[y]=h[y];return R[c]=f(E),Ir(a,this,R)}}function P0(a,c){return c.length<2?a:Wo(a,on(c,0,-1))}function uU(a,c){for(var f=a.length,h=qt(c.length,f),y=hr(a);h--;){var T=c[h];a[h]=bi(T,f)?y[T]:t}return a}function eS(a,c){if(!(c==="constructor"&&typeof a[c]=="function")&&c!="__proto__")return a[c]}var A0=D0(X_),Kc=RO||function(a,c){return Mt.setTimeout(a,c)},tS=D0(CL);function M0(a,c,f){var h=c+"";return tS(a,rU(h,fU(JL(h),f)))}function D0(a){var c=0,f=0;return function(){var h=MO(),y=O-(h-f);if(f=h,y>0){if(++c>=L)return arguments[0]}else c=0;return a.apply(t,arguments)}}function Pu(a,c){var f=-1,h=a.length,y=h-1;for(c=c===t?h:c;++f<c;){var T=Lx(f,y),E=a[T];a[T]=a[f],a[f]=E}return a.length=c,a}var F0=sU(function(a){var c=[];return a.charCodeAt(0)===46&&c.push(""),a.replace(tN,function(f,h,y,T){c.push(y?T.replace(lN,"$1"):h||f)}),c});function Gn(a){if(typeof a=="string"||Or(a))return a;var c=a+"";return c=="0"&&1/a==-Z?"-0":c}function jo(a){if(a!=null){try{return nu.call(a)}catch{}try{return a+""}catch{}}return""}function fU(a,c){return en(di,function(f){var h="_."+f[0];c&f[1]&&!Xp(a,h)&&a.push(h)}),a.sort()}function I0(a){if(a instanceof Ie)return a.clone();var c=new rn(a.__wrapped__,a.__chain__);return c.__actions__=hr(a.__actions__),c.__index__=a.__index__,c.__values__=a.__values__,c}function mU(a,c,f){(f?tr(a,c,f):c===t)?c=1:c=Et(be(c),0);var h=a==null?0:a.length;if(!h||c<1)return[];for(var y=0,T=0,E=U(pu(h/c));y<h;)E[T++]=on(a,y,y+=c);return E}function dU(a){for(var c=-1,f=a==null?0:a.length,h=0,y=[];++c<f;){var T=a[c];T&&(y[h++]=T)}return y}function hU(){var a=arguments.length;if(!a)return[];for(var c=U(a-1),f=arguments[0],h=a;h--;)c[h-1]=arguments[h];return ji(Se(f)?hr(f):[f],Ut(c,1))}var gU=Pe(function(a,c){return ht(a)?Wc(a,Ut(c,1,ht,!0)):[]}),yU=Pe(function(a,c){var f=an(c);return ht(f)&&(f=t),ht(a)?Wc(a,Ut(c,1,ht,!0),fe(f,2)):[]}),xU=Pe(function(a,c){var f=an(c);return ht(f)&&(f=t),ht(a)?Wc(a,Ut(c,1,ht,!0),t,f):[]});function SU(a,c,f){var h=a==null?0:a.length;return h?(c=f||c===t?1:be(c),on(a,c<0?0:c,h)):[]}function TU(a,c,f){var h=a==null?0:a.length;return h?(c=f||c===t?1:be(c),c=h-c,on(a,0,c<0?0:c)):[]}function vU(a,c){return a&&a.length?Tu(a,fe(c,3),!0,!0):[]}function bU(a,c){return a&&a.length?Tu(a,fe(c,3),!0):[]}function wU(a,c,f,h){var y=a==null?0:a.length;return y?(f&&typeof f!="number"&&tr(a,c,f)&&(f=0,h=y),hL(a,c,f,h)):[]}function C0(a,c,f){var h=a==null?0:a.length;if(!h)return-1;var y=f==null?0:be(f);return y<0&&(y=Et(h+y,0)),Jp(a,fe(c,3),y)}function N0(a,c,f){var h=a==null?0:a.length;if(!h)return-1;var y=h-1;return f!==t&&(y=be(f),y=f<0?Et(h+y,0):qt(y,h-1)),Jp(a,fe(c,3),y,!0)}function O0(a){var c=a==null?0:a.length;return c?Ut(a,1):[]}function _U(a){var c=a==null?0:a.length;return c?Ut(a,Z):[]}function EU(a,c){var f=a==null?0:a.length;return f?(c=c===t?1:be(c),Ut(a,c)):[]}function RU(a){for(var c=-1,f=a==null?0:a.length,h={};++c<f;){var y=a[c];h[y[0]]=y[1]}return h}function L0(a){return a&&a.length?a[0]:t}function kU(a,c,f){var h=a==null?0:a.length;if(!h)return-1;var y=f==null?0:be(f);return y<0&&(y=Et(h+y,0)),Ua(a,c,y)}function PU(a){var c=a==null?0:a.length;return c?on(a,0,-1):[]}var AU=Pe(function(a){var c=rt(a,Wx);return c.length&&c[0]===a[0]?Fx(c):[]}),MU=Pe(function(a){var c=an(a),f=rt(a,Wx);return c===an(f)?c=t:f.pop(),f.length&&f[0]===a[0]?Fx(f,fe(c,2)):[]}),DU=Pe(function(a){var c=an(a),f=rt(a,Wx);return c=typeof c=="function"?c:t,c&&f.pop(),f.length&&f[0]===a[0]?Fx(f,t,c):[]});function FU(a,c){return a==null?"":PO.call(a,c)}function an(a){var c=a==null?0:a.length;return c?a[c-1]:t}function IU(a,c,f){var h=a==null?0:a.length;if(!h)return-1;var y=h;return f!==t&&(y=be(f),y=y<0?Et(h+y,0):qt(y,h-1)),c===c?fO(a,c,y):Jp(a,y_,y,!0)}function CU(a,c){return a&&a.length?K_(a,be(c)):t}var NU=Pe(U0);function U0(a,c){return a&&a.length&&c&&c.length?Ox(a,c):a}function OU(a,c,f){return a&&a.length&&c&&c.length?Ox(a,c,fe(f,2)):a}function LU(a,c,f){return a&&a.length&&c&&c.length?Ox(a,c,t,f):a}var UU=vi(function(a,c){var f=a==null?0:a.length,h=Px(a,c);return Y_(a,rt(c,function(y){return bi(y,f)?+y:y}).sort(s0)),h});function HU(a,c){var f=[];if(!(a&&a.length))return f;var h=-1,y=[],T=a.length;for(c=fe(c,3);++h<T;){var E=a[h];c(E,h,a)&&(f.push(E),y.push(h))}return Y_(a,y),f}function rS(a){return a==null?a:FO.call(a)}function VU(a,c,f){var h=a==null?0:a.length;return h?(f&&typeof f!="number"&&tr(a,c,f)?(c=0,f=h):(c=c==null?0:be(c),f=f===t?h:be(f)),on(a,c,f)):[]}function BU(a,c){return Su(a,c)}function WU(a,c,f){return Hx(a,c,fe(f,2))}function $U(a,c){var f=a==null?0:a.length;if(f){var h=Su(a,c);if(h<f&&Mn(a[h],c))return h}return-1}function jU(a,c){return Su(a,c,!0)}function qU(a,c,f){return Hx(a,c,fe(f,2),!0)}function zU(a,c){var f=a==null?0:a.length;if(f){var h=Su(a,c,!0)-1;if(Mn(a[h],c))return h}return-1}function GU(a){return a&&a.length?J_(a):[]}function KU(a,c){return a&&a.length?J_(a,fe(c,2)):[]}function QU(a){var c=a==null?0:a.length;return c?on(a,1,c):[]}function ZU(a,c,f){return a&&a.length?(c=f||c===t?1:be(c),on(a,0,c<0?0:c)):[]}function YU(a,c,f){var h=a==null?0:a.length;return h?(c=f||c===t?1:be(c),c=h-c,on(a,c<0?0:c,h)):[]}function XU(a,c){return a&&a.length?Tu(a,fe(c,3),!1,!0):[]}function JU(a,c){return a&&a.length?Tu(a,fe(c,3)):[]}var eH=Pe(function(a){return Qi(Ut(a,1,ht,!0))}),tH=Pe(function(a){var c=an(a);return ht(c)&&(c=t),Qi(Ut(a,1,ht,!0),fe(c,2))}),rH=Pe(function(a){var c=an(a);return c=typeof c=="function"?c:t,Qi(Ut(a,1,ht,!0),t,c)});function nH(a){return a&&a.length?Qi(a):[]}function iH(a,c){return a&&a.length?Qi(a,fe(c,2)):[]}function oH(a,c){return c=typeof c=="function"?c:t,a&&a.length?Qi(a,t,c):[]}function nS(a){if(!(a&&a.length))return[];var c=0;return a=$i(a,function(f){if(ht(f))return c=Et(f.length,c),!0}),Tx(c,function(f){return rt(a,yx(f))})}function H0(a,c){if(!(a&&a.length))return[];var f=nS(a);return c==null?f:rt(f,function(h){return Ir(c,t,h)})}var aH=Pe(function(a,c){return ht(a)?Wc(a,c):[]}),sH=Pe(function(a){return Bx($i(a,ht))}),cH=Pe(function(a){var c=an(a);return ht(c)&&(c=t),Bx($i(a,ht),fe(c,2))}),lH=Pe(function(a){var c=an(a);return c=typeof c=="function"?c:t,Bx($i(a,ht),t,c)}),pH=Pe(nS);function uH(a,c){return n0(a||[],c||[],Bc)}function fH(a,c){return n0(a||[],c||[],qc)}var mH=Pe(function(a){var c=a.length,f=c>1?a[c-1]:t;return f=typeof f=="function"?(a.pop(),f):t,H0(a,f)});function V0(a){var c=S(a);return c.__chain__=!0,c}function dH(a,c){return c(a),a}function Au(a,c){return c(a)}var hH=vi(function(a){var c=a.length,f=c?a[0]:0,h=this.__wrapped__,y=function(T){return Px(T,a)};return c>1||this.__actions__.length||!(h instanceof Ie)||!bi(f)?this.thru(y):(h=h.slice(f,+f+(c?1:0)),h.__actions__.push({func:Au,args:[y],thisArg:t}),new rn(h,this.__chain__).thru(function(T){return c&&!T.length&&T.push(t),T}))});function gH(){return V0(this)}function yH(){return new rn(this.value(),this.__chain__)}function xH(){this.__values__===t&&(this.__values__=eE(this.value()));var a=this.__index__>=this.__values__.length,c=a?t:this.__values__[this.__index__++];return{done:a,value:c}}function SH(){return this}function TH(a){for(var c,f=this;f instanceof du;){var h=I0(f);h.__index__=0,h.__values__=t,c?y.__wrapped__=h:c=h;var y=h;f=f.__wrapped__}return y.__wrapped__=a,c}function vH(){var a=this.__wrapped__;if(a instanceof Ie){var c=a;return this.__actions__.length&&(c=new Ie(this)),c=c.reverse(),c.__actions__.push({func:Au,args:[rS],thisArg:t}),new rn(c,this.__chain__)}return this.thru(rS)}function bH(){return r0(this.__wrapped__,this.__actions__)}var wH=vu(function(a,c,f){ze.call(a,f)?++a[f]:Si(a,f,1)});function _H(a,c,f){var h=Se(a)?h_:dL;return f&&tr(a,c,f)&&(c=t),h(a,fe(c,3))}function EH(a,c){var f=Se(a)?$i:H_;return f(a,fe(c,3))}var RH=m0(C0),kH=m0(N0);function PH(a,c){return Ut(Mu(a,c),1)}function AH(a,c){return Ut(Mu(a,c),Z)}function MH(a,c,f){return f=f===t?1:be(f),Ut(Mu(a,c),f)}function B0(a,c){var f=Se(a)?en:Ki;return f(a,fe(c,3))}function W0(a,c){var f=Se(a)?QN:U_;return f(a,fe(c,3))}var DH=vu(function(a,c,f){ze.call(a,f)?a[f].push(c):Si(a,f,[c])});function FH(a,c,f,h){a=gr(a)?a:Qa(a),f=f&&!h?be(f):0;var y=a.length;return f<0&&(f=Et(y+f,0)),Nu(a)?f<=y&&a.indexOf(c,f)>-1:!!y&&Ua(a,c,f)>-1}var IH=Pe(function(a,c,f){var h=-1,y=typeof c=="function",T=gr(a)?U(a.length):[];return Ki(a,function(E){T[++h]=y?Ir(c,E,f):$c(E,c,f)}),T}),CH=vu(function(a,c,f){Si(a,f,c)});function Mu(a,c){var f=Se(a)?rt:q_;return f(a,fe(c,3))}function NH(a,c,f,h){return a==null?[]:(Se(c)||(c=c==null?[]:[c]),f=h?t:f,Se(f)||(f=f==null?[]:[f]),Q_(a,c,f))}var OH=vu(function(a,c,f){a[f?0:1].push(c)},function(){return[[],[]]});function LH(a,c,f){var h=Se(a)?hx:S_,y=arguments.length<3;return h(a,fe(c,4),f,y,Ki)}function UH(a,c,f){var h=Se(a)?ZN:S_,y=arguments.length<3;return h(a,fe(c,4),f,y,U_)}function HH(a,c){var f=Se(a)?$i:H_;return f(a,Iu(fe(c,3)))}function VH(a){var c=Se(a)?C_:FL;return c(a)}function BH(a,c,f){(f?tr(a,c,f):c===t)?c=1:c=be(c);var h=Se(a)?lL:IL;return h(a,c)}function WH(a){var c=Se(a)?pL:NL;return c(a)}function $H(a){if(a==null)return 0;if(gr(a))return Nu(a)?Va(a):a.length;var c=zt(a);return c==Rn||c==kn?a.size:Cx(a).length}function jH(a,c,f){var h=Se(a)?gx:OL;return f&&tr(a,c,f)&&(c=t),h(a,fe(c,3))}var qH=Pe(function(a,c){if(a==null)return[];var f=c.length;return f>1&&tr(a,c[0],c[1])?c=[]:f>2&&tr(c[0],c[1],c[2])&&(c=[c[0]]),Q_(a,Ut(c,1),[])}),Du=EO||function(){return Mt.Date.now()};function zH(a,c){if(typeof c!="function")throw new tn(i);return a=be(a),function(){if(--a<1)return c.apply(this,arguments)}}function $0(a,c,f){return c=f?t:c,c=a&&c==null?a.length:c,Ti(a,oe,t,t,t,t,c)}function j0(a,c){var f;if(typeof c!="function")throw new tn(i);return a=be(a),function(){return--a>0&&(f=c.apply(this,arguments)),a<=1&&(c=t),f}}var iS=Pe(function(a,c,f){var h=b;if(f.length){var y=qi(f,Ga(iS));h|=Q}return Ti(a,h,c,f,y)}),q0=Pe(function(a,c,f){var h=b|v;if(f.length){var y=qi(f,Ga(q0));h|=Q}return Ti(c,h,a,f,y)});function z0(a,c,f){c=f?t:c;var h=Ti(a,F,t,t,t,t,t,c);return h.placeholder=z0.placeholder,h}function G0(a,c,f){c=f?t:c;var h=Ti(a,H,t,t,t,t,t,c);return h.placeholder=G0.placeholder,h}function K0(a,c,f){var h,y,T,E,R,M,B=0,W=!1,z=!1,X=!0;if(typeof a!="function")throw new tn(i);c=sn(c)||0,st(f)&&(W=!!f.leading,z="maxWait"in f,T=z?Et(sn(f.maxWait)||0,c):T,X="trailing"in f?!!f.trailing:X);function ae(gt){var Dn=h,Ei=y;return h=y=t,B=gt,E=a.apply(Ei,Dn),E}function me(gt){return B=gt,R=Kc(De,c),W?ae(gt):E}function Re(gt){var Dn=gt-M,Ei=gt-B,mE=c-Dn;return z?qt(mE,T-Ei):mE}function de(gt){var Dn=gt-M,Ei=gt-B;return M===t||Dn>=c||Dn<0||z&&Ei>=T}function De(){var gt=Du();if(de(gt))return Ce(gt);R=Kc(De,Re(gt))}function Ce(gt){return R=t,X&&h?ae(gt):(h=y=t,E)}function Lr(){R!==t&&i0(R),B=0,h=M=y=R=t}function rr(){return R===t?E:Ce(Du())}function Ur(){var gt=Du(),Dn=de(gt);if(h=arguments,y=this,M=gt,Dn){if(R===t)return me(M);if(z)return i0(R),R=Kc(De,c),ae(M)}return R===t&&(R=Kc(De,c)),E}return Ur.cancel=Lr,Ur.flush=rr,Ur}var GH=Pe(function(a,c){return L_(a,1,c)}),KH=Pe(function(a,c,f){return L_(a,sn(c)||0,f)});function QH(a){return Ti(a,at)}function Fu(a,c){if(typeof a!="function"||c!=null&&typeof c!="function")throw new tn(i);var f=function(){var h=arguments,y=c?c.apply(this,h):h[0],T=f.cache;if(T.has(y))return T.get(y);var E=a.apply(this,h);return f.cache=T.set(y,E)||T,E};return f.cache=new(Fu.Cache||xi),f}Fu.Cache=xi;function Iu(a){if(typeof a!="function")throw new tn(i);return function(){var c=arguments;switch(c.length){case 0:return!a.call(this);case 1:return!a.call(this,c[0]);case 2:return!a.call(this,c[0],c[1]);case 3:return!a.call(this,c[0],c[1],c[2])}return!a.apply(this,c)}}function ZH(a){return j0(2,a)}var YH=LL(function(a,c){c=c.length==1&&Se(c[0])?rt(c[0],Cr(fe())):rt(Ut(c,1),Cr(fe()));var f=c.length;return Pe(function(h){for(var y=-1,T=qt(h.length,f);++y<T;)h[y]=c[y].call(this,h[y]);return Ir(a,this,h)})}),oS=Pe(function(a,c){var f=qi(c,Ga(oS));return Ti(a,Q,t,c,f)}),Q0=Pe(function(a,c){var f=qi(c,Ga(Q0));return Ti(a,ie,t,c,f)}),XH=vi(function(a,c){return Ti(a,ce,t,t,t,c)});function JH(a,c){if(typeof a!="function")throw new tn(i);return c=c===t?c:be(c),Pe(a,c)}function e2(a,c){if(typeof a!="function")throw new tn(i);return c=c==null?0:Et(be(c),0),Pe(function(f){var h=f[c],y=Yi(f,0,c);return h&&ji(y,h),Ir(a,this,y)})}function t2(a,c,f){var h=!0,y=!0;if(typeof a!="function")throw new tn(i);return st(f)&&(h="leading"in f?!!f.leading:h,y="trailing"in f?!!f.trailing:y),K0(a,c,{leading:h,maxWait:c,trailing:y})}function r2(a){return $0(a,1)}function n2(a,c){return oS($x(c),a)}function i2(){if(!arguments.length)return[];var a=arguments[0];return Se(a)?a:[a]}function o2(a){return nn(a,d)}function a2(a,c){return c=typeof c=="function"?c:t,nn(a,d,c)}function s2(a){return nn(a,u|d)}function c2(a,c){return c=typeof c=="function"?c:t,nn(a,u|d,c)}function l2(a,c){return c==null||O_(a,c,Dt(c))}function Mn(a,c){return a===c||a!==a&&c!==c}var p2=Eu(Dx),u2=Eu(function(a,c){return a>=c}),qo=W_(function(){return arguments}())?W_:function(a){return ut(a)&&ze.call(a,"callee")&&!P_.call(a,"callee")},Se=U.isArray,f2=l_?Cr(l_):TL;function gr(a){return a!=null&&Cu(a.length)&&!wi(a)}function ht(a){return ut(a)&&gr(a)}function m2(a){return a===!0||a===!1||ut(a)&&er(a)==En}var Xi=kO||gS,d2=p_?Cr(p_):vL;function h2(a){return ut(a)&&a.nodeType===1&&!Qc(a)}function g2(a){if(a==null)return!0;if(gr(a)&&(Se(a)||typeof a=="string"||typeof a.splice=="function"||Xi(a)||Ka(a)||qo(a)))return!a.length;var c=zt(a);if(c==Rn||c==kn)return!a.size;if(Gc(a))return!Cx(a).length;for(var f in a)if(ze.call(a,f))return!1;return!0}function y2(a,c){return jc(a,c)}function x2(a,c,f){f=typeof f=="function"?f:t;var h=f?f(a,c):t;return h===t?jc(a,c,t,f):!!h}function aS(a){if(!ut(a))return!1;var c=er(a);return c==hi||c==Oo||typeof a.message=="string"&&typeof a.name=="string"&&!Qc(a)}function S2(a){return typeof a=="number"&&M_(a)}function wi(a){if(!st(a))return!1;var c=er(a);return c==Na||c==Lw||c==Fr||c==$1}function Z0(a){return typeof a=="number"&&a==be(a)}function Cu(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=Y}function st(a){var c=typeof a;return a!=null&&(c=="object"||c=="function")}function ut(a){return a!=null&&typeof a=="object"}var Y0=u_?Cr(u_):wL;function T2(a,c){return a===c||Ix(a,c,Zx(c))}function v2(a,c,f){return f=typeof f=="function"?f:t,Ix(a,c,Zx(c),f)}function b2(a){return X0(a)&&a!=+a}function w2(a){if(aU(a))throw new xe(n);return $_(a)}function _2(a){return a===null}function E2(a){return a==null}function X0(a){return typeof a=="number"||ut(a)&&er(a)==Mc}function Qc(a){if(!ut(a)||er(a)!=gi)return!1;var c=su(a);if(c===null)return!0;var f=ze.call(c,"constructor")&&c.constructor;return typeof f=="function"&&f instanceof f&&nu.call(f)==vO}var sS=f_?Cr(f_):_L;function R2(a){return Z0(a)&&a>=-Y&&a<=Y}var J0=m_?Cr(m_):EL;function Nu(a){return typeof a=="string"||!Se(a)&&ut(a)&&er(a)==Fc}function Or(a){return typeof a=="symbol"||ut(a)&&er(a)==Kp}var Ka=d_?Cr(d_):RL;function k2(a){return a===t}function P2(a){return ut(a)&&zt(a)==Ic}function A2(a){return ut(a)&&er(a)==q1}var M2=Eu(Nx),D2=Eu(function(a,c){return a<=c});function eE(a){if(!a)return[];if(gr(a))return Nu(a)?Pn(a):hr(a);if(Oc&&a[Oc])return lO(a[Oc]());var c=zt(a),f=c==Rn?bx:c==kn?eu:Qa;return f(a)}function _i(a){if(!a)return a===0?a:0;if(a=sn(a),a===Z||a===-Z){var c=a<0?-1:1;return c*re}return a===a?a:0}function be(a){var c=_i(a),f=c%1;return c===c?f?c-f:c:0}function tE(a){return a?Bo(be(a),0,ne):0}function sn(a){if(typeof a=="number")return a;if(Or(a))return ge;if(st(a)){var c=typeof a.valueOf=="function"?a.valueOf():a;a=st(c)?c+"":c}if(typeof a!="string")return a===0?a:+a;a=T_(a);var f=fN.test(a);return f||dN.test(a)?zN(a.slice(2),f?2:8):uN.test(a)?ge:+a}function rE(a){return zn(a,yr(a))}function F2(a){return a?Bo(be(a),-Y,Y):a===0?a:0}function je(a){return a==null?"":Nr(a)}var I2=qa(function(a,c){if(Gc(c)||gr(c)){zn(c,Dt(c),a);return}for(var f in c)ze.call(c,f)&&Bc(a,f,c[f])}),nE=qa(function(a,c){zn(c,yr(c),a)}),Ou=qa(function(a,c,f,h){zn(c,yr(c),a,h)}),C2=qa(function(a,c,f,h){zn(c,Dt(c),a,h)}),N2=vi(Px);function O2(a,c){var f=ja(a);return c==null?f:N_(f,c)}var L2=Pe(function(a,c){a=Qe(a);var f=-1,h=c.length,y=h>2?c[2]:t;for(y&&tr(c[0],c[1],y)&&(h=1);++f<h;)for(var T=c[f],E=yr(T),R=-1,M=E.length;++R<M;){var B=E[R],W=a[B];(W===t||Mn(W,Ba[B])&&!ze.call(a,B))&&(a[B]=T[B])}return a}),U2=Pe(function(a){return a.push(t,T0),Ir(iE,t,a)});function H2(a,c){return g_(a,fe(c,3),qn)}function V2(a,c){return g_(a,fe(c,3),Mx)}function B2(a,c){return a==null?a:Ax(a,fe(c,3),yr)}function W2(a,c){return a==null?a:V_(a,fe(c,3),yr)}function $2(a,c){return a&&qn(a,fe(c,3))}function j2(a,c){return a&&Mx(a,fe(c,3))}function q2(a){return a==null?[]:yu(a,Dt(a))}function z2(a){return a==null?[]:yu(a,yr(a))}function cS(a,c,f){var h=a==null?t:Wo(a,c);return h===t?f:h}function G2(a,c){return a!=null&&w0(a,c,gL)}function lS(a,c){return a!=null&&w0(a,c,yL)}var K2=h0(function(a,c,f){c!=null&&typeof c.toString!="function"&&(c=iu.call(c)),a[c]=f},uS(xr)),Q2=h0(function(a,c,f){c!=null&&typeof c.toString!="function"&&(c=iu.call(c)),ze.call(a,c)?a[c].push(f):a[c]=[f]},fe),Z2=Pe($c);function Dt(a){return gr(a)?I_(a):Cx(a)}function yr(a){return gr(a)?I_(a,!0):kL(a)}function Y2(a,c){var f={};return c=fe(c,3),qn(a,function(h,y,T){Si(f,c(h,y,T),h)}),f}function X2(a,c){var f={};return c=fe(c,3),qn(a,function(h,y,T){Si(f,y,c(h,y,T))}),f}var J2=qa(function(a,c,f){xu(a,c,f)}),iE=qa(function(a,c,f,h){xu(a,c,f,h)}),eV=vi(function(a,c){var f={};if(a==null)return f;var h=!1;c=rt(c,function(T){return T=Zi(T,a),h||(h=T.length>1),T}),zn(a,Kx(a),f),h&&(f=nn(f,u|m|d,KL));for(var y=c.length;y--;)Vx(f,c[y]);return f});function tV(a,c){return oE(a,Iu(fe(c)))}var rV=vi(function(a,c){return a==null?{}:AL(a,c)});function oE(a,c){if(a==null)return{};var f=rt(Kx(a),function(h){return[h]});return c=fe(c),Z_(a,f,function(h,y){return c(h,y[0])})}function nV(a,c,f){c=Zi(c,a);var h=-1,y=c.length;for(y||(y=1,a=t);++h<y;){var T=a==null?t:a[Gn(c[h])];T===t&&(h=y,T=f),a=wi(T)?T.call(a):T}return a}function iV(a,c,f){return a==null?a:qc(a,c,f)}function oV(a,c,f,h){return h=typeof h=="function"?h:t,a==null?a:qc(a,c,f,h)}var aE=x0(Dt),sE=x0(yr);function aV(a,c,f){var h=Se(a),y=h||Xi(a)||Ka(a);if(c=fe(c,4),f==null){var T=a&&a.constructor;y?f=h?new T:[]:st(a)?f=wi(T)?ja(su(a)):{}:f={}}return(y?en:qn)(a,function(E,R,M){return c(f,E,R,M)}),f}function sV(a,c){return a==null?!0:Vx(a,c)}function cV(a,c,f){return a==null?a:t0(a,c,$x(f))}function lV(a,c,f,h){return h=typeof h=="function"?h:t,a==null?a:t0(a,c,$x(f),h)}function Qa(a){return a==null?[]:vx(a,Dt(a))}function pV(a){return a==null?[]:vx(a,yr(a))}function uV(a,c,f){return f===t&&(f=c,c=t),f!==t&&(f=sn(f),f=f===f?f:0),c!==t&&(c=sn(c),c=c===c?c:0),Bo(sn(a),c,f)}function fV(a,c,f){return c=_i(c),f===t?(f=c,c=0):f=_i(f),a=sn(a),xL(a,c,f)}function mV(a,c,f){if(f&&typeof f!="boolean"&&tr(a,c,f)&&(c=f=t),f===t&&(typeof c=="boolean"?(f=c,c=t):typeof a=="boolean"&&(f=a,a=t)),a===t&&c===t?(a=0,c=1):(a=_i(a),c===t?(c=a,a=0):c=_i(c)),a>c){var h=a;a=c,c=h}if(f||a%1||c%1){var y=D_();return qt(a+y*(c-a+qN("1e-"+((y+"").length-1))),c)}return Lx(a,c)}var dV=za(function(a,c,f){return c=c.toLowerCase(),a+(f?cE(c):c)});function cE(a){return pS(je(a).toLowerCase())}function lE(a){return a=je(a),a&&a.replace(gN,iO).replace(NN,"")}function hV(a,c,f){a=je(a),c=Nr(c);var h=a.length;f=f===t?h:Bo(be(f),0,h);var y=f;return f-=c.length,f>=0&&a.slice(f,y)==c}function gV(a){return a=je(a),a&&Z1.test(a)?a.replace(Vw,oO):a}function yV(a){return a=je(a),a&&rN.test(a)?a.replace(ox,"\\$&"):a}var xV=za(function(a,c,f){return a+(f?"-":"")+c.toLowerCase()}),SV=za(function(a,c,f){return a+(f?" ":"")+c.toLowerCase()}),TV=f0("toLowerCase");function vV(a,c,f){a=je(a),c=be(c);var h=c?Va(a):0;if(!c||h>=c)return a;var y=(c-h)/2;return _u(uu(y),f)+a+_u(pu(y),f)}function bV(a,c,f){a=je(a),c=be(c);var h=c?Va(a):0;return c&&h<c?a+_u(c-h,f):a}function wV(a,c,f){a=je(a),c=be(c);var h=c?Va(a):0;return c&&h<c?_u(c-h,f)+a:a}function _V(a,c,f){return f||c==null?c=0:c&&(c=+c),DO(je(a).replace(ax,""),c||0)}function EV(a,c,f){return(f?tr(a,c,f):c===t)?c=1:c=be(c),Ux(je(a),c)}function RV(){var a=arguments,c=je(a[0]);return a.length<3?c:c.replace(a[1],a[2])}var kV=za(function(a,c,f){return a+(f?"_":"")+c.toLowerCase()});function PV(a,c,f){return f&&typeof f!="number"&&tr(a,c,f)&&(c=f=t),f=f===t?ne:f>>>0,f?(a=je(a),a&&(typeof c=="string"||c!=null&&!sS(c))&&(c=Nr(c),!c&&Ha(a))?Yi(Pn(a),0,f):a.split(c,f)):[]}var AV=za(function(a,c,f){return a+(f?" ":"")+pS(c)});function MV(a,c,f){return a=je(a),f=f==null?0:Bo(be(f),0,a.length),c=Nr(c),a.slice(f,f+c.length)==c}function DV(a,c,f){var h=S.templateSettings;f&&tr(a,c,f)&&(c=t),a=je(a),c=Ou({},c,h,S0);var y=Ou({},c.imports,h.imports,S0),T=Dt(y),E=vx(y,T),R,M,B=0,W=c.interpolate||Qp,z="__p += '",X=wx((c.escape||Qp).source+"|"+W.source+"|"+(W===Bw?pN:Qp).source+"|"+(c.evaluate||Qp).source+"|$","g"),ae="//# sourceURL="+(ze.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++VN+"]")+`
`;a.replace(X,function(de,De,Ce,Lr,rr,Ur){return Ce||(Ce=Lr),z+=a.slice(B,Ur).replace(yN,aO),De&&(R=!0,z+=`' +
__e(`+De+`) +
'`),rr&&(M=!0,z+=`';
`+rr+`;
__p += '`),Ce&&(z+=`' +
((__t = (`+Ce+`)) == null ? '' : __t) +
'`),B=Ur+de.length,de}),z+=`';
`;var me=ze.call(c,"variable")&&c.variable;if(!me)z=`with (obj) {
`+z+`
}
`;else if(cN.test(me))throw new xe(o);z=(M?z.replace(z1,""):z).replace(G1,"$1").replace(K1,"$1;"),z="function("+(me||"obj")+`) {
`+(me?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(R?", __e = _.escape":"")+(M?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+z+`return __p
}`;var Re=uE(function(){return We(T,ae+"return "+z).apply(t,E)});if(Re.source=z,aS(Re))throw Re;return Re}function FV(a){return je(a).toLowerCase()}function IV(a){return je(a).toUpperCase()}function CV(a,c,f){if(a=je(a),a&&(f||c===t))return T_(a);if(!a||!(c=Nr(c)))return a;var h=Pn(a),y=Pn(c),T=v_(h,y),E=b_(h,y)+1;return Yi(h,T,E).join("")}function NV(a,c,f){if(a=je(a),a&&(f||c===t))return a.slice(0,__(a)+1);if(!a||!(c=Nr(c)))return a;var h=Pn(a),y=b_(h,Pn(c))+1;return Yi(h,0,y).join("")}function OV(a,c,f){if(a=je(a),a&&(f||c===t))return a.replace(ax,"");if(!a||!(c=Nr(c)))return a;var h=Pn(a),y=v_(h,Pn(c));return Yi(h,y).join("")}function LV(a,c){var f=Lt,h=pt;if(st(c)){var y="separator"in c?c.separator:y;f="length"in c?be(c.length):f,h="omission"in c?Nr(c.omission):h}a=je(a);var T=a.length;if(Ha(a)){var E=Pn(a);T=E.length}if(f>=T)return a;var R=f-Va(h);if(R<1)return h;var M=E?Yi(E,0,R).join(""):a.slice(0,R);if(y===t)return M+h;if(E&&(R+=M.length-R),sS(y)){if(a.slice(R).search(y)){var B,W=M;for(y.global||(y=wx(y.source,je(Ww.exec(y))+"g")),y.lastIndex=0;B=y.exec(W);)var z=B.index;M=M.slice(0,z===t?R:z)}}else if(a.indexOf(Nr(y),R)!=R){var X=M.lastIndexOf(y);X>-1&&(M=M.slice(0,X))}return M+h}function UV(a){return a=je(a),a&&Q1.test(a)?a.replace(Hw,mO):a}var HV=za(function(a,c,f){return a+(f?" ":"")+c.toUpperCase()}),pS=f0("toUpperCase");function pE(a,c,f){return a=je(a),c=f?t:c,c===t?cO(a)?gO(a):JN(a):a.match(c)||[]}var uE=Pe(function(a,c){try{return Ir(a,t,c)}catch(f){return aS(f)?f:new xe(f)}}),VV=vi(function(a,c){return en(c,function(f){f=Gn(f),Si(a,f,iS(a[f],a))}),a});function BV(a){var c=a==null?0:a.length,f=fe();return a=c?rt(a,function(h){if(typeof h[1]!="function")throw new tn(i);return[f(h[0]),h[1]]}):[],Pe(function(h){for(var y=-1;++y<c;){var T=a[y];if(Ir(T[0],this,h))return Ir(T[1],this,h)}})}function WV(a){return mL(nn(a,u))}function uS(a){return function(){return a}}function $V(a,c){return a==null||a!==a?c:a}var jV=d0(),qV=d0(!0);function xr(a){return a}function fS(a){return j_(typeof a=="function"?a:nn(a,u))}function zV(a){return z_(nn(a,u))}function GV(a,c){return G_(a,nn(c,u))}var KV=Pe(function(a,c){return function(f){return $c(f,a,c)}}),QV=Pe(function(a,c){return function(f){return $c(a,f,c)}});function mS(a,c,f){var h=Dt(c),y=yu(c,h);f==null&&!(st(c)&&(y.length||!h.length))&&(f=c,c=a,a=this,y=yu(c,Dt(c)));var T=!(st(f)&&"chain"in f)||!!f.chain,E=wi(a);return en(y,function(R){var M=c[R];a[R]=M,E&&(a.prototype[R]=function(){var B=this.__chain__;if(T||B){var W=a(this.__wrapped__),z=W.__actions__=hr(this.__actions__);return z.push({func:M,args:arguments,thisArg:a}),W.__chain__=B,W}return M.apply(a,ji([this.value()],arguments))})}),a}function ZV(){return Mt._===this&&(Mt._=bO),this}function dS(){}function YV(a){return a=be(a),Pe(function(c){return K_(c,a)})}var XV=qx(rt),JV=qx(h_),eB=qx(gx);function fE(a){return Xx(a)?yx(Gn(a)):ML(a)}function tB(a){return function(c){return a==null?t:Wo(a,c)}}var rB=g0(),nB=g0(!0);function hS(){return[]}function gS(){return!1}function iB(){return{}}function oB(){return""}function aB(){return!0}function sB(a,c){if(a=be(a),a<1||a>Y)return[];var f=ne,h=qt(a,ne);c=fe(c),a-=ne;for(var y=Tx(h,c);++f<a;)c(f);return y}function cB(a){return Se(a)?rt(a,Gn):Or(a)?[a]:hr(F0(je(a)))}function lB(a){var c=++TO;return je(a)+c}var pB=wu(function(a,c){return a+c},0),uB=zx("ceil"),fB=wu(function(a,c){return a/c},1),mB=zx("floor");function dB(a){return a&&a.length?gu(a,xr,Dx):t}function hB(a,c){return a&&a.length?gu(a,fe(c,2),Dx):t}function gB(a){return x_(a,xr)}function yB(a,c){return x_(a,fe(c,2))}function xB(a){return a&&a.length?gu(a,xr,Nx):t}function SB(a,c){return a&&a.length?gu(a,fe(c,2),Nx):t}var TB=wu(function(a,c){return a*c},1),vB=zx("round"),bB=wu(function(a,c){return a-c},0);function wB(a){return a&&a.length?Sx(a,xr):0}function _B(a,c){return a&&a.length?Sx(a,fe(c,2)):0}return S.after=zH,S.ary=$0,S.assign=I2,S.assignIn=nE,S.assignInWith=Ou,S.assignWith=C2,S.at=N2,S.before=j0,S.bind=iS,S.bindAll=VV,S.bindKey=q0,S.castArray=i2,S.chain=V0,S.chunk=mU,S.compact=dU,S.concat=hU,S.cond=BV,S.conforms=WV,S.constant=uS,S.countBy=wH,S.create=O2,S.curry=z0,S.curryRight=G0,S.debounce=K0,S.defaults=L2,S.defaultsDeep=U2,S.defer=GH,S.delay=KH,S.difference=gU,S.differenceBy=yU,S.differenceWith=xU,S.drop=SU,S.dropRight=TU,S.dropRightWhile=vU,S.dropWhile=bU,S.fill=wU,S.filter=EH,S.flatMap=PH,S.flatMapDeep=AH,S.flatMapDepth=MH,S.flatten=O0,S.flattenDeep=_U,S.flattenDepth=EU,S.flip=QH,S.flow=jV,S.flowRight=qV,S.fromPairs=RU,S.functions=q2,S.functionsIn=z2,S.groupBy=DH,S.initial=PU,S.intersection=AU,S.intersectionBy=MU,S.intersectionWith=DU,S.invert=K2,S.invertBy=Q2,S.invokeMap=IH,S.iteratee=fS,S.keyBy=CH,S.keys=Dt,S.keysIn=yr,S.map=Mu,S.mapKeys=Y2,S.mapValues=X2,S.matches=zV,S.matchesProperty=GV,S.memoize=Fu,S.merge=J2,S.mergeWith=iE,S.method=KV,S.methodOf=QV,S.mixin=mS,S.negate=Iu,S.nthArg=YV,S.omit=eV,S.omitBy=tV,S.once=ZH,S.orderBy=NH,S.over=XV,S.overArgs=YH,S.overEvery=JV,S.overSome=eB,S.partial=oS,S.partialRight=Q0,S.partition=OH,S.pick=rV,S.pickBy=oE,S.property=fE,S.propertyOf=tB,S.pull=NU,S.pullAll=U0,S.pullAllBy=OU,S.pullAllWith=LU,S.pullAt=UU,S.range=rB,S.rangeRight=nB,S.rearg=XH,S.reject=HH,S.remove=HU,S.rest=JH,S.reverse=rS,S.sampleSize=BH,S.set=iV,S.setWith=oV,S.shuffle=WH,S.slice=VU,S.sortBy=qH,S.sortedUniq=GU,S.sortedUniqBy=KU,S.split=PV,S.spread=e2,S.tail=QU,S.take=ZU,S.takeRight=YU,S.takeRightWhile=XU,S.takeWhile=JU,S.tap=dH,S.throttle=t2,S.thru=Au,S.toArray=eE,S.toPairs=aE,S.toPairsIn=sE,S.toPath=cB,S.toPlainObject=rE,S.transform=aV,S.unary=r2,S.union=eH,S.unionBy=tH,S.unionWith=rH,S.uniq=nH,S.uniqBy=iH,S.uniqWith=oH,S.unset=sV,S.unzip=nS,S.unzipWith=H0,S.update=cV,S.updateWith=lV,S.values=Qa,S.valuesIn=pV,S.without=aH,S.words=pE,S.wrap=n2,S.xor=sH,S.xorBy=cH,S.xorWith=lH,S.zip=pH,S.zipObject=uH,S.zipObjectDeep=fH,S.zipWith=mH,S.entries=aE,S.entriesIn=sE,S.extend=nE,S.extendWith=Ou,mS(S,S),S.add=pB,S.attempt=uE,S.camelCase=dV,S.capitalize=cE,S.ceil=uB,S.clamp=uV,S.clone=o2,S.cloneDeep=s2,S.cloneDeepWith=c2,S.cloneWith=a2,S.conformsTo=l2,S.deburr=lE,S.defaultTo=$V,S.divide=fB,S.endsWith=hV,S.eq=Mn,S.escape=gV,S.escapeRegExp=yV,S.every=_H,S.find=RH,S.findIndex=C0,S.findKey=H2,S.findLast=kH,S.findLastIndex=N0,S.findLastKey=V2,S.floor=mB,S.forEach=B0,S.forEachRight=W0,S.forIn=B2,S.forInRight=W2,S.forOwn=$2,S.forOwnRight=j2,S.get=cS,S.gt=p2,S.gte=u2,S.has=G2,S.hasIn=lS,S.head=L0,S.identity=xr,S.includes=FH,S.indexOf=kU,S.inRange=fV,S.invoke=Z2,S.isArguments=qo,S.isArray=Se,S.isArrayBuffer=f2,S.isArrayLike=gr,S.isArrayLikeObject=ht,S.isBoolean=m2,S.isBuffer=Xi,S.isDate=d2,S.isElement=h2,S.isEmpty=g2,S.isEqual=y2,S.isEqualWith=x2,S.isError=aS,S.isFinite=S2,S.isFunction=wi,S.isInteger=Z0,S.isLength=Cu,S.isMap=Y0,S.isMatch=T2,S.isMatchWith=v2,S.isNaN=b2,S.isNative=w2,S.isNil=E2,S.isNull=_2,S.isNumber=X0,S.isObject=st,S.isObjectLike=ut,S.isPlainObject=Qc,S.isRegExp=sS,S.isSafeInteger=R2,S.isSet=J0,S.isString=Nu,S.isSymbol=Or,S.isTypedArray=Ka,S.isUndefined=k2,S.isWeakMap=P2,S.isWeakSet=A2,S.join=FU,S.kebabCase=xV,S.last=an,S.lastIndexOf=IU,S.lowerCase=SV,S.lowerFirst=TV,S.lt=M2,S.lte=D2,S.max=dB,S.maxBy=hB,S.mean=gB,S.meanBy=yB,S.min=xB,S.minBy=SB,S.stubArray=hS,S.stubFalse=gS,S.stubObject=iB,S.stubString=oB,S.stubTrue=aB,S.multiply=TB,S.nth=CU,S.noConflict=ZV,S.noop=dS,S.now=Du,S.pad=vV,S.padEnd=bV,S.padStart=wV,S.parseInt=_V,S.random=mV,S.reduce=LH,S.reduceRight=UH,S.repeat=EV,S.replace=RV,S.result=nV,S.round=vB,S.runInContext=P,S.sample=VH,S.size=$H,S.snakeCase=kV,S.some=jH,S.sortedIndex=BU,S.sortedIndexBy=WU,S.sortedIndexOf=$U,S.sortedLastIndex=jU,S.sortedLastIndexBy=qU,S.sortedLastIndexOf=zU,S.startCase=AV,S.startsWith=MV,S.subtract=bB,S.sum=wB,S.sumBy=_B,S.template=DV,S.times=sB,S.toFinite=_i,S.toInteger=be,S.toLength=tE,S.toLower=FV,S.toNumber=sn,S.toSafeInteger=F2,S.toString=je,S.toUpper=IV,S.trim=CV,S.trimEnd=NV,S.trimStart=OV,S.truncate=LV,S.unescape=UV,S.uniqueId=lB,S.upperCase=HV,S.upperFirst=pS,S.each=B0,S.eachRight=W0,S.first=L0,mS(S,function(){var a={};return qn(S,function(c,f){ze.call(S.prototype,f)||(a[f]=c)}),a}(),{chain:!1}),S.VERSION=e,en(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){S[a].placeholder=S}),en(["drop","take"],function(a,c){Ie.prototype[a]=function(f){f=f===t?1:Et(be(f),0);var h=this.__filtered__&&!c?new Ie(this):this.clone();return h.__filtered__?h.__takeCount__=qt(f,h.__takeCount__):h.__views__.push({size:qt(f,ne),type:a+(h.__dir__<0?"Right":"")}),h},Ie.prototype[a+"Right"]=function(f){return this.reverse()[a](f).reverse()}}),en(["filter","map","takeWhile"],function(a,c){var f=c+1,h=f==D||f==G;Ie.prototype[a]=function(y){var T=this.clone();return T.__iteratees__.push({iteratee:fe(y,3),type:f}),T.__filtered__=T.__filtered__||h,T}}),en(["head","last"],function(a,c){var f="take"+(c?"Right":"");Ie.prototype[a]=function(){return this[f](1).value()[0]}}),en(["initial","tail"],function(a,c){var f="drop"+(c?"":"Right");Ie.prototype[a]=function(){return this.__filtered__?new Ie(this):this[f](1)}}),Ie.prototype.compact=function(){return this.filter(xr)},Ie.prototype.find=function(a){return this.filter(a).head()},Ie.prototype.findLast=function(a){return this.reverse().find(a)},Ie.prototype.invokeMap=Pe(function(a,c){return typeof a=="function"?new Ie(this):this.map(function(f){return $c(f,a,c)})}),Ie.prototype.reject=function(a){return this.filter(Iu(fe(a)))},Ie.prototype.slice=function(a,c){a=be(a);var f=this;return f.__filtered__&&(a>0||c<0)?new Ie(f):(a<0?f=f.takeRight(-a):a&&(f=f.drop(a)),c!==t&&(c=be(c),f=c<0?f.dropRight(-c):f.take(c-a)),f)},Ie.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},Ie.prototype.toArray=function(){return this.take(ne)},qn(Ie.prototype,function(a,c){var f=/^(?:filter|find|map|reject)|While$/.test(c),h=/^(?:head|last)$/.test(c),y=S[h?"take"+(c=="last"?"Right":""):c],T=h||/^find/.test(c);y&&(S.prototype[c]=function(){var E=this.__wrapped__,R=h?[1]:arguments,M=E instanceof Ie,B=R[0],W=M||Se(E),z=function(De){var Ce=y.apply(S,ji([De],R));return h&&X?Ce[0]:Ce};W&&f&&typeof B=="function"&&B.length!=1&&(M=W=!1);var X=this.__chain__,ae=!!this.__actions__.length,me=T&&!X,Re=M&&!ae;if(!T&&W){E=Re?E:new Ie(this);var de=a.apply(E,R);return de.__actions__.push({func:Au,args:[z],thisArg:t}),new rn(de,X)}return me&&Re?a.apply(this,R):(de=this.thru(z),me?h?de.value()[0]:de.value():de)})}),en(["pop","push","shift","sort","splice","unshift"],function(a){var c=tu[a],f=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",h=/^(?:pop|shift)$/.test(a);S.prototype[a]=function(){var y=arguments;if(h&&!this.__chain__){var T=this.value();return c.apply(Se(T)?T:[],y)}return this[f](function(E){return c.apply(Se(E)?E:[],y)})}}),qn(Ie.prototype,function(a,c){var f=S[c];if(f){var h=f.name+"";ze.call($a,h)||($a[h]=[]),$a[h].push({name:c,func:f})}}),$a[bu(t,v).name]=[{name:"wrapper",func:t}],Ie.prototype.clone=UO,Ie.prototype.reverse=HO,Ie.prototype.value=VO,S.prototype.at=hH,S.prototype.chain=gH,S.prototype.commit=yH,S.prototype.next=xH,S.prototype.plant=TH,S.prototype.reverse=vH,S.prototype.toJSON=S.prototype.valueOf=S.prototype.value=bH,S.prototype.first=S.prototype.head,Oc&&(S.prototype[Oc]=SH),S},zi=yO();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Mt._=zi,define(function(){return zi})):Lo?((Lo.exports=zi)._=zi,fx._=zi):Mt._=zi}).call(dc)});var BI=Ze((YUe,VI)=>{"use strict";VI.exports=UI;function UI(t,e,r){t instanceof RegExp&&(t=LI(t,r)),e instanceof RegExp&&(e=LI(e,r));var n=HI(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}function LI(t,e){var r=e.match(t);return r?r[0]:null}UI.range=HI;function HI(t,e,r){var n,i,o,s,l,p=r.indexOf(t),u=r.indexOf(e,p+1),m=p;if(p>=0&&u>0){if(t===e)return[p,u];for(n=[],o=r.length;m>=0&&!l;)m==p?(n.push(m),p=r.indexOf(t,m+1)):n.length==1?l=[n.pop(),u]:(i=n.pop(),i<o&&(o=i,s=u),u=r.indexOf(e,m+1)),m=p<u&&p>=0?p:u;n.length&&(l=[o,s])}return l}});var QI=Ze((XUe,KI)=>{var WI=BI();KI.exports=zZ;var $I="\0SLASH"+Math.random()+"\0",jI="\0OPEN"+Math.random()+"\0",yb="\0CLOSE"+Math.random()+"\0",qI="\0COMMA"+Math.random()+"\0",zI="\0PERIOD"+Math.random()+"\0";function gb(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function jZ(t){return t.split("\\\\").join($I).split("\\{").join(jI).split("\\}").join(yb).split("\\,").join(qI).split("\\.").join(zI)}function qZ(t){return t.split($I).join("\\").split(jI).join("{").split(yb).join("}").split(qI).join(",").split(zI).join(".")}function GI(t){if(!t)return[""];var e=[],r=WI("{","}",t);if(!r)return t.split(",");var n=r.pre,i=r.body,o=r.post,s=n.split(",");s[s.length-1]+="{"+i+"}";var l=GI(o);return o.length&&(s[s.length-1]+=l.shift(),s.push.apply(s,l)),e.push.apply(e,s),e}function zZ(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),wp(jZ(t),!0).map(qZ)):[]}function GZ(t){return"{"+t+"}"}function KZ(t){return/^-?0\d/.test(t)}function QZ(t,e){return t<=e}function ZZ(t,e){return t>=e}function wp(t,e){var r=[],n=WI("{","}",t);if(!n)return[t];var i=n.pre,o=n.post.length?wp(n.post,!1):[""];if(/\$$/.test(n.pre))for(var s=0;s<o.length;s++){var l=i+"{"+n.body+"}"+o[s];r.push(l)}else{var p=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),u=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),m=p||u,d=n.body.indexOf(",")>=0;if(!m&&!d)return n.post.match(/,.*\}/)?(t=n.pre+"{"+n.body+yb+n.post,wp(t)):[t];var g;if(m)g=n.body.split(/\.\./);else if(g=GI(n.body),g.length===1&&(g=wp(g[0],!1).map(GZ),g.length===1))return o.map(function(L){return n.pre+g[0]+L});var x;if(m){var b=gb(g[0]),v=gb(g[1]),I=Math.max(g[0].length,g[1].length),F=g.length==3?Math.abs(gb(g[2])):1,H=QZ,Q=v<b;Q&&(F*=-1,H=ZZ);var ie=g.some(KZ);x=[];for(var oe=b;H(oe,v);oe+=F){var ce;if(u)ce=String.fromCharCode(oe),ce==="\\"&&(ce="");else if(ce=String(oe),ie){var at=I-ce.length;if(at>0){var Lt=new Array(at+1).join("0");oe<0?ce="-"+Lt+ce.slice(1):ce=Lt+ce}}x.push(ce)}}else{x=[];for(var pt=0;pt<g.length;pt++)x.push.apply(x,wp(g[pt],!1))}for(var pt=0;pt<x.length;pt++)for(var s=0;s<o.length;s++){var l=i+x[pt]+o[s];(!e||m||l)&&r.push(l)}}return r}});var OX={};MB(OX,{default:()=>B1});module.exports=DB(OX);var yS="cursorless.command",Uu=class{constructor(e){this.baseTitle=e}get title(){return`Cursorless: ${this.baseTitle}`}},ft=class extends Uu{constructor(){super(...arguments);this.isVisible=!1}},yt=class extends Uu{constructor(){super(...arguments);this.isVisible=!0}};var UX={"cursorless.toggleDecorations":new yt("Toggle decorations"),"cursorless.recomputeDecorationStyles":new yt("Recompute decoration styles"),"cursorless.recordTestCase":new yt("Record test case"),"cursorless.recordOneTestCaseThenPause":new yt("Record one test case, then pause"),"cursorless.pauseRecording":new yt("Pause test case recording"),"cursorless.resumeRecording":new yt("Resume test case recording"),"cursorless.recordScopeTests.showUnimplementedFacets":new yt("Bulk record unimplemented scope facets"),"cursorless.recordScopeTests.saveActiveDocument":new yt("Bulk save scope tests for the active document"),"cursorless.showDocumentation":new yt("Show documentation"),"cursorless.showInstallationDependencies":new yt("Show installation dependencies"),"cursorless.showScopeVisualizer":new yt("Show the scope visualizer"),"cursorless.hideScopeVisualizer":new yt("Hide the scope visualizer"),"cursorless.analyzeCommandHistory":new yt("Analyze collected command history"),"cursorless.tutorial.start":new ft("Start a tutorial"),"cursorless.tutorial.next":new yt("Tutorial next"),"cursorless.tutorial.previous":new yt("Tutorial previous"),"cursorless.tutorial.restart":new yt("Tutorial restart"),"cursorless.tutorial.resume":new yt("Tutorial resume"),"cursorless.tutorial.list":new yt("Tutorial list"),"cursorless.documentationOpened":new ft("Used by talon to notify us that the docs have been opened; for use with tutorial"),"cursorless.command":new ft("The core cursorless command"),"cursorless.repeatPreviousCommand":new yt("Repeat the previous Cursorless command"),"cursorless.showQuickPick":new ft("Pop up a quick pick of all cursorless commands"),"cursorless.showCheatsheet":new ft("Display the cursorless cheatsheet"),"cursorless.internal.updateCheatsheetDefaults":new ft("Update the default values of the cheatsheet payload used on the website and for local development. Be sure to run this on stock community and cursorless."),"cursorless.private.logQuickActions":new ft("Log the quick actions available at the current cursor position"),"cursorless.takeSnapshot":new ft("Take a snapshot of the current editor state"),"cursorless.keyboard.escape":new ft("Should be mapped to the escape key when using cursorless keyboard. By default, exits modal keyboard mode, but changes behaviour when Cursorless is expecting a continuation keystroke.  For example, when you type a color and Cursorless is waiting for a character, it cancels the color and switches back to modal mode."),"cursorless.keyboard.targeted.targetHat":new ft("Sets the keyboard target to the given hat"),"cursorless.keyboard.targeted.targetScope":new ft("Sets the keyboard target to the scope containing the current target"),"cursorless.keyboard.targeted.targetSelection":new ft("Sets the keyboard target to the current selection"),"cursorless.keyboard.targeted.clearTarget":new ft("Clears the current keyboard target"),"cursorless.keyboard.targeted.runActionOnTarget":new ft("Run the given action on the current keyboard target"),"cursorless.keyboard.modal.modeOn":new ft("Turn on the cursorless modal mode"),"cursorless.keyboard.modal.modeOff":new ft("Turn off the cursorless modal mode"),"cursorless.keyboard.modal.modeToggle":new ft("Toggle the cursorless modal mode"),"cursorless.keyboard.undoTarget":new ft("Undo keyboard targeting changes"),"cursorless.keyboard.redoTarget":new ft("Redo keyboard targeting changes"),"cursorless.migrateSnippets":new ft("Migrate snippets from the old Cursorless format to the new community format")};var Hu=class{constructor(e,r){this.callback=e;this.debounceDelayMs=r;this.timeoutHandle=null;this.run=this.run.bind(this)}run(){this.timeoutHandle!=null&&clearTimeout(this.timeoutHandle),this.timeoutHandle=setTimeout(()=>{this.callback(),this.timeoutHandle=null},this.debounceDelayMs)}dispose(){this.timeoutHandle!=null&&clearTimeout(this.timeoutHandle)}};var Vu=class extends Error{constructor(e){super(`Language '${e}' is not implemented yet; See https://www.cursorless.org/docs/contributing/adding-a-new-language/`),this.name="UnsupportedLanguageError"}};var Bu=class extends Error{constructor(){super("Cursorless Talon version is ahead of Cursorless VSCode extension version. Please update Cursorless VSCode.")}},mt=class extends Error{constructor(e){super(`Couldn't find containing ${e}.`),this.name="NoContainingScopeError"}};var Wu=class{constructor(){this.signals={prePhrase:{getVersion:async()=>null}}}async getFocusedElementType(){return this.focusedElementType}setFocusedElementType(e){this.focusedElementType=e}};var FB=typeof global=="object"&&global&&global.Object===Object&&global,$u=FB;var IB=typeof self=="object"&&self&&self.Object===Object&&self,CB=$u||IB||Function("return this")(),Ft=CB;var NB=Ft.Symbol,nr=NB;var hE=Object.prototype,OB=hE.hasOwnProperty,LB=hE.toString,Zc=nr?nr.toStringTag:void 0;function UB(t){var e=OB.call(t,Zc),r=t[Zc];try{t[Zc]=void 0;var n=!0}catch{}var i=LB.call(t);return n&&(e?t[Zc]=r:delete t[Zc]),i}var gE=UB;var HB=Object.prototype,VB=HB.toString;function BB(t){return VB.call(t)}var yE=BB;var WB="[object Null]",$B="[object Undefined]",xE=nr?nr.toStringTag:void 0;function jB(t){return t==null?t===void 0?$B:WB:xE&&xE in Object(t)?gE(t):yE(t)}var Fn=jB;function qB(t){return t!=null&&typeof t=="object"}var ir=qB;var zB="[object Symbol]";function GB(t){return typeof t=="symbol"||ir(t)&&Fn(t)==zB}var Hr=GB;function KB(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var cn=KB;var QB=Array.isArray,Ge=QB;var ZB=1/0,SE=nr?nr.prototype:void 0,TE=SE?SE.toString:void 0;function vE(t){if(typeof t=="string")return t;if(Ge(t))return cn(t,vE)+"";if(Hr(t))return TE?TE.call(t):"";var e=t+"";return e=="0"&&1/t==-ZB?"-0":e}var bE=vE;var YB=/\s/;function XB(t){for(var e=t.length;e--&&YB.test(t.charAt(e)););return e}var wE=XB;var JB=/^\s+/;function eW(t){return t&&t.slice(0,wE(t)+1).replace(JB,"")}var _E=eW;function tW(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Vr=tW;var EE=NaN,rW=/^[-+]0x[0-9a-f]+$/i,nW=/^0b[01]+$/i,iW=/^0o[0-7]+$/i,oW=parseInt;function aW(t){if(typeof t=="number")return t;if(Hr(t))return EE;if(Vr(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Vr(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=_E(t);var r=nW.test(t);return r||iW.test(t)?oW(t.slice(2),r?2:8):rW.test(t)?EE:+t}var RE=aW;var kE=1/0,sW=17976931348623157e292;function cW(t){if(!t)return t===0?t:0;if(t=RE(t),t===kE||t===-kE){var e=t<0?-1:1;return e*sW}return t===t?t:0}var Za=cW;function lW(t){var e=Za(t),r=e%1;return e===e?r?e-r:e:0}var ju=lW;function pW(t){return t}var Tr=pW;var uW="[object AsyncFunction]",fW="[object Function]",mW="[object GeneratorFunction]",dW="[object Proxy]";function hW(t){if(!Vr(t))return!1;var e=Fn(t);return e==fW||e==mW||e==uW||e==dW}var qu=hW;var gW=Ft["__core-js_shared__"],zu=gW;var PE=function(){var t=/[^.]+$/.exec(zu&&zu.keys&&zu.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function yW(t){return!!PE&&PE in t}var AE=yW;var xW=Function.prototype,SW=xW.toString;function TW(t){if(t!=null){try{return SW.call(t)}catch{}try{return t+""}catch{}}return""}var Ri=TW;var vW=/[\\^$.*+?()[\]{}|]/g,bW=/^\[object .+?Constructor\]$/,wW=Function.prototype,_W=Object.prototype,EW=wW.toString,RW=_W.hasOwnProperty,kW=RegExp("^"+EW.call(RW).replace(vW,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function PW(t){if(!Vr(t)||AE(t))return!1;var e=qu(t)?kW:bW;return e.test(Ri(t))}var ME=PW;function AW(t,e){return t?.[e]}var DE=AW;function MW(t,e){var r=DE(t,e);return ME(r)?r:void 0}var vr=MW;var DW=vr(Ft,"WeakMap"),zo=DW;var FW=zo&&new zo,xS=FW;var FE=Object.create,IW=function(){function t(){}return function(e){if(!Vr(e))return{};if(FE)return FE(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),Gu=IW;function CW(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var IE=CW;function NW(){}var Ya=NW;var OW=4294967295;function Ku(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=OW,this.__views__=[]}Ku.prototype=Gu(Ya.prototype);Ku.prototype.constructor=Ku;var Xa=Ku;function LW(){}var Qu=LW;var UW=xS?function(t){return xS.get(t)}:Qu,Zu=UW;var HW={},SS=HW;var VW=Object.prototype,BW=VW.hasOwnProperty;function WW(t){for(var e=t.name+"",r=SS[e],n=BW.call(SS,e)?r.length:0;n--;){var i=r[n],o=i.func;if(o==null||o==t)return i.name}return e}var Ja=WW;function Yu(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}Yu.prototype=Gu(Ya.prototype);Yu.prototype.constructor=Yu;var Ji=Yu;function $W(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var eo=$W;function jW(t){if(t instanceof Xa)return t.clone();var e=new Ji(t.__wrapped__,t.__chain__);return e.__actions__=eo(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var CE=jW;var qW=Object.prototype,zW=qW.hasOwnProperty;function Xu(t){if(ir(t)&&!Ge(t)&&!(t instanceof Xa)){if(t instanceof Ji)return t;if(zW.call(t,"__wrapped__"))return CE(t)}return new Ji(t)}Xu.prototype=Ya.prototype;Xu.prototype.constructor=Xu;var NE=Xu;function GW(t){var e=Ja(t),r=NE[e];if(typeof r!="function"||!(e in Xa.prototype))return!1;if(t===r)return!0;var n=Zu(r);return!!n&&t===n[0]}var TS=GW;var KW=800,QW=16,ZW=Date.now;function YW(t){var e=0,r=0;return function(){var n=ZW(),i=QW-(n-r);if(r=n,i>0){if(++e>=KW)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var OE=YW;function XW(t){return function(){return t}}var LE=XW;var JW=function(){try{var t=vr(Object,"defineProperty");return t({},"",{}),t}catch{}}(),vS=JW;var e$=vS?function(t,e){return vS(t,"toString",{configurable:!0,enumerable:!1,value:LE(e),writable:!0})}:Tr,UE=e$;var t$=OE(UE),Ju=t$;function r$(t,e,r,n){for(var i=t.length,o=r+(n?1:-1);n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}var ef=r$;function n$(t){return t!==t}var HE=n$;function i$(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}var VE=i$;function o$(t,e,r){return e===e?VE(t,e,r):ef(t,HE,r)}var tf=o$;function a$(t,e){var r=t==null?0:t.length;return!!r&&tf(t,e,0)>-1}var BE=a$;var s$=9007199254740991,c$=/^(?:0|[1-9]\d*)$/;function l$(t,e){var r=typeof t;return e=e??s$,!!e&&(r=="number"||r!="symbol"&&c$.test(t))&&t>-1&&t%1==0&&t<e}var es=l$;function p$(t,e){return t===e||t!==t&&e!==e}var ts=p$;var WE=Math.max;function u$(t,e,r){return e=WE(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,o=WE(n.length-e,0),s=Array(o);++i<o;)s[i]=n[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=n[i];return l[e]=r(s),IE(t,this,l)}}var rf=u$;function f$(t,e){return Ju(rf(t,e,Tr),t+"")}var rs=f$;var m$=9007199254740991;function d$(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=m$}var ns=d$;function h$(t){return t!=null&&ns(t.length)&&!qu(t)}var Kn=h$;function g$(t,e,r){if(!Vr(r))return!1;var n=typeof e;return(n=="number"?Kn(r)&&es(e,r.length):n=="string"&&e in r)?ts(r[e],t):!1}var Go=g$;var y$=Object.prototype;function x$(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||y$;return t===r}var $E=x$;function S$(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var nf=S$;var T$="[object Arguments]";function v$(t){return ir(t)&&Fn(t)==T$}var bS=v$;var jE=Object.prototype,b$=jE.hasOwnProperty,w$=jE.propertyIsEnumerable,_$=bS(function(){return arguments}())?bS:function(t){return ir(t)&&b$.call(t,"callee")&&!w$.call(t,"callee")},is=_$;function E$(){return!1}var qE=E$;var KE=typeof exports=="object"&&exports&&!exports.nodeType&&exports,zE=KE&&typeof module=="object"&&module&&!module.nodeType&&module,R$=zE&&zE.exports===KE,GE=R$?Ft.Buffer:void 0,k$=GE?GE.isBuffer:void 0,P$=k$||qE,Yc=P$;var A$="[object Arguments]",M$="[object Array]",D$="[object Boolean]",F$="[object Date]",I$="[object Error]",C$="[object Function]",N$="[object Map]",O$="[object Number]",L$="[object Object]",U$="[object RegExp]",H$="[object Set]",V$="[object String]",B$="[object WeakMap]",W$="[object ArrayBuffer]",$$="[object DataView]",j$="[object Float32Array]",q$="[object Float64Array]",z$="[object Int8Array]",G$="[object Int16Array]",K$="[object Int32Array]",Q$="[object Uint8Array]",Z$="[object Uint8ClampedArray]",Y$="[object Uint16Array]",X$="[object Uint32Array]",et={};et[j$]=et[q$]=et[z$]=et[G$]=et[K$]=et[Q$]=et[Z$]=et[Y$]=et[X$]=!0;et[A$]=et[M$]=et[W$]=et[D$]=et[$$]=et[F$]=et[I$]=et[C$]=et[N$]=et[O$]=et[L$]=et[U$]=et[H$]=et[V$]=et[B$]=!1;function J$(t){return ir(t)&&ns(t.length)&&!!et[Fn(t)]}var QE=J$;function ej(t){return function(e){return t(e)}}var os=ej;var ZE=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Xc=ZE&&typeof module=="object"&&module&&!module.nodeType&&module,tj=Xc&&Xc.exports===ZE,wS=tj&&$u.process,rj=function(){try{var t=Xc&&Xc.require&&Xc.require("util").types;return t||wS&&wS.binding&&wS.binding("util")}catch{}}(),_S=rj;var YE=_S&&_S.isTypedArray,nj=YE?os(YE):QE,of=nj;var ij=Object.prototype,oj=ij.hasOwnProperty;function aj(t,e){var r=Ge(t),n=!r&&is(t),i=!r&&!n&&Yc(t),o=!r&&!n&&!i&&of(t),s=r||n||i||o,l=s?nf(t.length,String):[],p=l.length;for(var u in t)(e||oj.call(t,u))&&!(s&&(u=="length"||i&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||es(u,p)))&&l.push(u);return l}var XE=aj;function sj(t,e){return function(r){return t(e(r))}}var JE=sj;var cj=JE(Object.keys,Object),eR=cj;var lj=Object.prototype,pj=lj.hasOwnProperty;function uj(t){if(!$E(t))return eR(t);var e=[];for(var r in Object(t))pj.call(t,r)&&r!="constructor"&&e.push(r);return e}var tR=uj;function fj(t){return Kn(t)?XE(t):tR(t)}var to=fj;var mj=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,dj=/^\w*$/;function hj(t,e){if(Ge(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||Hr(t)?!0:dj.test(t)||!mj.test(t)||e!=null&&t in Object(e)}var as=hj;var gj=vr(Object,"create"),ki=gj;function yj(){this.__data__=ki?ki(null):{},this.size=0}var rR=yj;function xj(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var nR=xj;var Sj="__lodash_hash_undefined__",Tj=Object.prototype,vj=Tj.hasOwnProperty;function bj(t){var e=this.__data__;if(ki){var r=e[t];return r===Sj?void 0:r}return vj.call(e,t)?e[t]:void 0}var iR=bj;var wj=Object.prototype,_j=wj.hasOwnProperty;function Ej(t){var e=this.__data__;return ki?e[t]!==void 0:_j.call(e,t)}var oR=Ej;var Rj="__lodash_hash_undefined__";function kj(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=ki&&e===void 0?Rj:e,this}var aR=kj;function ss(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ss.prototype.clear=rR;ss.prototype.delete=nR;ss.prototype.get=iR;ss.prototype.has=oR;ss.prototype.set=aR;var ES=ss;function Pj(){this.__data__=[],this.size=0}var sR=Pj;function Aj(t,e){for(var r=t.length;r--;)if(ts(t[r][0],e))return r;return-1}var ro=Aj;var Mj=Array.prototype,Dj=Mj.splice;function Fj(t){var e=this.__data__,r=ro(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():Dj.call(e,r,1),--this.size,!0}var cR=Fj;function Ij(t){var e=this.__data__,r=ro(e,t);return r<0?void 0:e[r][1]}var lR=Ij;function Cj(t){return ro(this.__data__,t)>-1}var pR=Cj;function Nj(t,e){var r=this.__data__,n=ro(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var uR=Nj;function cs(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}cs.prototype.clear=sR;cs.prototype.delete=cR;cs.prototype.get=lR;cs.prototype.has=pR;cs.prototype.set=uR;var no=cs;var Oj=vr(Ft,"Map"),io=Oj;function Lj(){this.size=0,this.__data__={hash:new ES,map:new(io||no),string:new ES}}var fR=Lj;function Uj(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var mR=Uj;function Hj(t,e){var r=t.__data__;return mR(e)?r[typeof e=="string"?"string":"hash"]:r.map}var oo=Hj;function Vj(t){var e=oo(this,t).delete(t);return this.size-=e?1:0,e}var dR=Vj;function Bj(t){return oo(this,t).get(t)}var hR=Bj;function Wj(t){return oo(this,t).has(t)}var gR=Wj;function $j(t,e){var r=oo(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var yR=$j;function ls(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ls.prototype.clear=fR;ls.prototype.delete=dR;ls.prototype.get=hR;ls.prototype.has=gR;ls.prototype.set=yR;var Ko=ls;var jj="Expected a function";function RS(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(jj);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=t.apply(this,n);return r.cache=o.set(i,s)||o,s};return r.cache=new(RS.Cache||Ko),r}RS.Cache=Ko;var Jc=RS;var qj=500;function zj(t){var e=Jc(t,function(n){return r.size===qj&&r.clear(),n}),r=e.cache;return e}var xR=zj;var Gj=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Kj=/\\(\\)?/g,Qj=xR(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Gj,function(r,n,i,o){e.push(i?o.replace(Kj,"$1"):n||r)}),e}),SR=Qj;function Zj(t){return t==null?"":bE(t)}var In=Zj;function Yj(t,e){return Ge(t)?t:as(t,e)?[t]:SR(In(t))}var af=Yj;var Xj=1/0;function Jj(t){if(typeof t=="string"||Hr(t))return t;var e=t+"";return e=="0"&&1/t==-Xj?"-0":e}var ao=Jj;function eq(t,e){e=af(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[ao(e[r++])];return r&&r==n?t:void 0}var ps=eq;function tq(t,e,r){var n=t==null?void 0:ps(t,e);return n===void 0?r:n}var Qo=tq;function rq(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var us=rq;var TR=nr?nr.isConcatSpreadable:void 0;function nq(t){return Ge(t)||is(t)||!!(TR&&t&&t[TR])}var vR=nq;function bR(t,e,r,n,i){var o=-1,s=t.length;for(r||(r=vR),i||(i=[]);++o<s;){var l=t[o];e>0&&r(l)?e>1?bR(l,e-1,r,n,i):us(i,l):n||(i[i.length]=l)}return i}var fs=bR;function iq(t){var e=t==null?0:t.length;return e?fs(t,1):[]}var tt=iq;function oq(t){return Ju(rf(t,void 0,tt),t+"")}var wR=oq;function aq(t){return function(e){return t?.[e]}}var _R=aq;var sq={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},cq=_R(sq),ER=cq;var lq=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,pq="\\u0300-\\u036f",uq="\\ufe20-\\ufe2f",fq="\\u20d0-\\u20ff",mq=pq+uq+fq,dq="["+mq+"]",hq=RegExp(dq,"g");function gq(t){return t=In(t),t&&t.replace(lq,ER).replace(hq,"")}var kS=gq;function yq(){this.__data__=new no,this.size=0}var RR=yq;function xq(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var kR=xq;function Sq(t){return this.__data__.get(t)}var PR=Sq;function Tq(t){return this.__data__.has(t)}var AR=Tq;var vq=200;function bq(t,e){var r=this.__data__;if(r instanceof no){var n=r.__data__;if(!io||n.length<vq-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Ko(n)}return r.set(t,e),this.size=r.size,this}var MR=bq;function ms(t){var e=this.__data__=new no(t);this.size=e.size}ms.prototype.clear=RR;ms.prototype.delete=kR;ms.prototype.get=PR;ms.prototype.has=AR;ms.prototype.set=MR;var ds=ms;function wq(t,e){for(var r=-1,n=t==null?0:t.length,i=0,o=[];++r<n;){var s=t[r];e(s,r,t)&&(o[i++]=s)}return o}var sf=wq;function _q(){return[]}var DR=_q;var Eq=Object.prototype,Rq=Eq.propertyIsEnumerable,FR=Object.getOwnPropertySymbols,kq=FR?function(t){return t==null?[]:(t=Object(t),sf(FR(t),function(e){return Rq.call(t,e)}))}:DR,IR=kq;function Pq(t,e,r){var n=e(t);return Ge(t)?n:us(n,r(t))}var CR=Pq;function Aq(t){return CR(t,to,IR)}var PS=Aq;var Mq=vr(Ft,"DataView"),cf=Mq;var Dq=vr(Ft,"Promise"),lf=Dq;var Fq=vr(Ft,"Set"),so=Fq;var NR="[object Map]",Iq="[object Object]",OR="[object Promise]",LR="[object Set]",UR="[object WeakMap]",HR="[object DataView]",Cq=Ri(cf),Nq=Ri(io),Oq=Ri(lf),Lq=Ri(so),Uq=Ri(zo),Zo=Fn;(cf&&Zo(new cf(new ArrayBuffer(1)))!=HR||io&&Zo(new io)!=NR||lf&&Zo(lf.resolve())!=OR||so&&Zo(new so)!=LR||zo&&Zo(new zo)!=UR)&&(Zo=function(t){var e=Fn(t),r=e==Iq?t.constructor:void 0,n=r?Ri(r):"";if(n)switch(n){case Cq:return HR;case Nq:return NR;case Oq:return OR;case Lq:return LR;case Uq:return UR}return e});var AS=Zo;var Hq=Ft.Uint8Array,MS=Hq;function Vq(){var t=arguments.length;if(!t)return[];for(var e=Array(t-1),r=arguments[0],n=t;n--;)e[n-1]=arguments[n];return us(Ge(r)?eo(r):[r],fs(e,1))}var el=Vq;var Bq="__lodash_hash_undefined__";function Wq(t){return this.__data__.set(t,Bq),this}var VR=Wq;function $q(t){return this.__data__.has(t)}var BR=$q;function pf(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new Ko;++e<r;)this.add(t[e])}pf.prototype.add=pf.prototype.push=VR;pf.prototype.has=BR;var uf=pf;function jq(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var WR=jq;function qq(t,e){return t.has(e)}var ff=qq;var zq=1,Gq=2;function Kq(t,e,r,n,i,o){var s=r&zq,l=t.length,p=e.length;if(l!=p&&!(s&&p>l))return!1;var u=o.get(t),m=o.get(e);if(u&&m)return u==e&&m==t;var d=-1,g=!0,x=r&Gq?new uf:void 0;for(o.set(t,e),o.set(e,t);++d<l;){var b=t[d],v=e[d];if(n)var I=s?n(v,b,d,e,t,o):n(b,v,d,t,e,o);if(I!==void 0){if(I)continue;g=!1;break}if(x){if(!WR(e,function(F,H){if(!ff(x,H)&&(b===F||i(b,F,r,n,o)))return x.push(H)})){g=!1;break}}else if(!(b===v||i(b,v,r,n,o))){g=!1;break}}return o.delete(t),o.delete(e),g}var mf=Kq;function Qq(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}var $R=Qq;function Zq(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var hs=Zq;var Yq=1,Xq=2,Jq="[object Boolean]",e3="[object Date]",t3="[object Error]",r3="[object Map]",n3="[object Number]",i3="[object RegExp]",o3="[object Set]",a3="[object String]",s3="[object Symbol]",c3="[object ArrayBuffer]",l3="[object DataView]",jR=nr?nr.prototype:void 0,DS=jR?jR.valueOf:void 0;function p3(t,e,r,n,i,o,s){switch(r){case l3:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case c3:return!(t.byteLength!=e.byteLength||!o(new MS(t),new MS(e)));case Jq:case e3:case n3:return ts(+t,+e);case t3:return t.name==e.name&&t.message==e.message;case i3:case a3:return t==e+"";case r3:var l=$R;case o3:var p=n&Yq;if(l||(l=hs),t.size!=e.size&&!p)return!1;var u=s.get(t);if(u)return u==e;n|=Xq,s.set(t,e);var m=mf(l(t),l(e),n,i,o,s);return s.delete(t),m;case s3:if(DS)return DS.call(t)==DS.call(e)}return!1}var qR=p3;var u3=1,f3=Object.prototype,m3=f3.hasOwnProperty;function d3(t,e,r,n,i,o){var s=r&u3,l=PS(t),p=l.length,u=PS(e),m=u.length;if(p!=m&&!s)return!1;for(var d=p;d--;){var g=l[d];if(!(s?g in e:m3.call(e,g)))return!1}var x=o.get(t),b=o.get(e);if(x&&b)return x==e&&b==t;var v=!0;o.set(t,e),o.set(e,t);for(var I=s;++d<p;){g=l[d];var F=t[g],H=e[g];if(n)var Q=s?n(H,F,g,e,t,o):n(F,H,g,t,e,o);if(!(Q===void 0?F===H||i(F,H,r,n,o):Q)){v=!1;break}I||(I=g=="constructor")}if(v&&!I){var ie=t.constructor,oe=e.constructor;ie!=oe&&"constructor"in t&&"constructor"in e&&!(typeof ie=="function"&&ie instanceof ie&&typeof oe=="function"&&oe instanceof oe)&&(v=!1)}return o.delete(t),o.delete(e),v}var zR=d3;var h3=1,GR="[object Arguments]",KR="[object Array]",df="[object Object]",g3=Object.prototype,QR=g3.hasOwnProperty;function y3(t,e,r,n,i,o){var s=Ge(t),l=Ge(e),p=s?KR:AS(t),u=l?KR:AS(e);p=p==GR?df:p,u=u==GR?df:u;var m=p==df,d=u==df,g=p==u;if(g&&Yc(t)){if(!Yc(e))return!1;s=!0,m=!1}if(g&&!m)return o||(o=new ds),s||of(t)?mf(t,e,r,n,i,o):qR(t,e,p,r,n,i,o);if(!(r&h3)){var x=m&&QR.call(t,"__wrapped__"),b=d&&QR.call(e,"__wrapped__");if(x||b){var v=x?t.value():t,I=b?e.value():e;return o||(o=new ds),i(v,I,r,n,o)}}return g?(o||(o=new ds),zR(t,e,r,n,i,o)):!1}var ZR=y3;function YR(t,e,r,n,i){return t===e?!0:t==null||e==null||!ir(t)&&!ir(e)?t!==t&&e!==e:ZR(t,e,r,n,YR,i)}var gs=YR;var x3=1,S3=2;function T3(t,e,r,n){var i=r.length,o=i,s=!n;if(t==null)return!o;for(t=Object(t);i--;){var l=r[i];if(s&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++i<o;){l=r[i];var p=l[0],u=t[p],m=l[1];if(s&&l[2]){if(u===void 0&&!(p in t))return!1}else{var d=new ds;if(n)var g=n(u,m,p,t,e,d);if(!(g===void 0?gs(m,u,x3|S3,n,d):g))return!1}}return!0}var XR=T3;function v3(t){return t===t&&!Vr(t)}var hf=v3;function b3(t){for(var e=to(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,hf(i)]}return e}var JR=b3;function w3(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var gf=w3;function _3(t){var e=JR(t);return e.length==1&&e[0][2]?gf(e[0][0],e[0][1]):function(r){return r===t||XR(r,t,e)}}var ek=_3;function E3(t,e){return t!=null&&e in Object(t)}var tk=E3;function R3(t,e,r){e=af(e,t);for(var n=-1,i=e.length,o=!1;++n<i;){var s=ao(e[n]);if(!(o=t!=null&&r(t,s)))break;t=t[s]}return o||++n!=i?o:(i=t==null?0:t.length,!!i&&ns(i)&&es(s,i)&&(Ge(t)||is(t)))}var rk=R3;function k3(t,e){return t!=null&&rk(t,e,tk)}var nk=k3;var P3=1,A3=2;function M3(t,e){return as(t)&&hf(e)?gf(ao(t),e):function(r){var n=Qo(r,t);return n===void 0&&n===e?nk(r,t):gs(e,n,P3|A3)}}var ik=M3;function D3(t){return function(e){return e?.[t]}}var yf=D3;function F3(t){return function(e){return ps(e,t)}}var ok=F3;function I3(t){return as(t)?yf(ao(t)):ok(t)}var ak=I3;function C3(t){return typeof t=="function"?t:t==null?Tr:typeof t=="object"?Ge(t)?ik(t[0],t[1]):ek(t):ak(t)}var co=C3;function N3(t){return function(e,r,n){for(var i=-1,o=Object(e),s=n(e),l=s.length;l--;){var p=s[t?l:++i];if(r(o[p],p,o)===!1)break}return e}}var sk=N3;var O3=sk(),ck=O3;function L3(t,e){return t&&ck(t,e,to)}var lk=L3;function U3(t,e){return function(r,n){if(r==null)return r;if(!Kn(r))return t(r,n);for(var i=r.length,o=e?i:-1,s=Object(r);(e?o--:++o<i)&&n(s[o],o,s)!==!1;);return r}}var pk=U3;var H3=pk(lk),uk=H3;function V3(t){return ir(t)&&Kn(t)}var fk=V3;function B3(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}var mk=B3;function W3(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var xf=W3;var dk=/[\\^$.*+?()[\]{}|]/g,$3=RegExp(dk.source);function j3(t){return t=In(t),t&&$3.test(t)?t.replace(dk,"\\$&"):t}var Br=j3;var q3=Math.max,z3=Math.min;function G3(t,e,r){var n=t==null?0:t.length;if(!n)return-1;var i=n-1;return r!==void 0&&(i=ju(r),i=r<0?q3(n+i,0):z3(i,n-1)),ef(t,co(e,3),i,!0)}var Yo=G3;function K3(t,e){var r=-1,n=Kn(t)?Array(t.length):[];return uk(t,function(i,o,s){n[++r]=e(i,o,s)}),n}var hk=K3;var Q3="Expected a function",Z3=8,Y3=32,X3=128,J3=256;function ez(t){return wR(function(e){var r=e.length,n=r,i=Ji.prototype.thru;for(t&&e.reverse();n--;){var o=e[n];if(typeof o!="function")throw new TypeError(Q3);if(i&&!s&&Ja(o)=="wrapper")var s=new Ji([],!0)}for(n=s?n:r;++n<r;){o=e[n];var l=Ja(o),p=l=="wrapper"?Zu(o):void 0;p&&TS(p[0])&&p[1]==(X3|Z3|Y3|J3)&&!p[4].length&&p[9]==1?s=s[Ja(p[0])].apply(s,p[3]):s=o.length==1&&TS(o)?s[l]():s.thru(o)}return function(){var u=arguments,m=u[0];if(s&&u.length==1&&Ge(m))return s.plant(m).value();for(var d=0,g=r?e[d].apply(this,u):m;++d<r;)g=e[d].call(this,g);return g}})}var gk=ez;var tz=gk(),FS=tz;function rz(t,e){return t>e}var yk=rz;function nz(t,e){return cn(e,function(r){return t[r]})}var xk=nz;function iz(t){return t==null?[]:xk(t,to(t))}var Sk=iz;function oz(t,e){return gs(t,e)}var Pi=oz;function az(t,e){return t<e}var Tk=az;function sz(t,e,r){for(var n=-1,i=t.length;++n<i;){var o=t[n],s=e(o);if(s!=null&&(l===void 0?s===s&&!Hr(s):r(s,l)))var l=s,p=o}return p}var Sf=sz;function cz(t,e){return t&&t.length?Sf(t,co(e,2),yk):void 0}var IS=cz;function lz(t,e){for(var r,n=-1,i=t.length;++n<i;){var o=e(t[n]);o!==void 0&&(r=r===void 0?o:r+o)}return r}var vk=lz;function pz(t){return t&&t.length?Sf(t,Tr,Tk):void 0}var CS=pz;function uz(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}var bk=uz;function fz(t,e){if(t!==e){var r=t!==void 0,n=t===null,i=t===t,o=Hr(t),s=e!==void 0,l=e===null,p=e===e,u=Hr(e);if(!l&&!u&&!o&&t>e||o&&s&&p&&!l&&!u||n&&s&&p||!r&&p||!i)return 1;if(!n&&!o&&!u&&t<e||u&&r&&i&&!n&&!o||l&&r&&i||!s&&i||!p)return-1}return 0}var wk=fz;function mz(t,e,r){for(var n=-1,i=t.criteria,o=e.criteria,s=i.length,l=r.length;++n<s;){var p=wk(i[n],o[n]);if(p){if(n>=l)return p;var u=r[n];return p*(u=="desc"?-1:1)}}return t.index-e.index}var _k=mz;function dz(t,e,r){e.length?e=cn(e,function(o){return Ge(o)?function(s){return ps(s,o.length===1?o[0]:o)}:o}):e=[Tr];var n=-1;e=cn(e,os(co));var i=hk(t,function(o,s,l){var p=cn(e,function(u){return u(o)});return{criteria:p,index:++n,value:o}});return bk(i,function(o,s){return _k(o,s,r)})}var Ek=dz;var hz=9007199254740991,gz=Math.floor;function yz(t,e){var r="";if(!t||e<1||e>hz)return r;do e%2&&(r+=t),e=gz(e/2),e&&(t+=t);while(e);return r}var Rk=yz;function xz(t,e,r,n){for(var i=r-1,o=t.length;++i<o;)if(n(t[i],e))return i;return-1}var kk=xz;var Sz=Array.prototype,Pk=Sz.splice;function Tz(t,e,r,n){var i=n?kk:tf,o=-1,s=e.length,l=t;for(t===e&&(e=eo(e)),r&&(l=cn(t,os(r)));++o<s;)for(var p=0,u=e[o],m=r?r(u):u;(p=i(l,m,p,n))>-1;)l!==t&&Pk.call(l,p,1),Pk.call(t,p,1);return t}var Ak=Tz;function vz(t,e){return t&&t.length&&e&&e.length?Ak(t,e):t}var Mk=vz;var bz=rs(Mk),or=bz;var wz=Math.floor,_z=Math.random;function Ez(t,e){return t+wz(_z()*(e-t+1))}var Dk=Ez;var Rz=Math.ceil,kz=Math.max;function Pz(t,e,r,n){for(var i=-1,o=kz(Rz((e-t)/(r||1)),0),s=Array(o);o--;)s[n?o:++i]=t,t+=r;return s}var Fk=Pz;function Az(t){return function(e,r,n){return n&&typeof n!="number"&&Go(e,r,n)&&(r=n=void 0),e=Za(e),r===void 0?(r=e,e=0):r=Za(r),n=n===void 0?e<r?1:-1:Za(n),Fk(e,r,n,t)}}var Ik=Az;var Mz=Ik(),NS=Mz;function Dz(t,e,r){return(r?Go(t,e,r):e===void 0)?e=1:e=ju(e),Rk(In(t),e)}var OS=Dz;function Fz(t,e){var r=-1,n=t.length,i=n-1;for(e=e===void 0?n:e;++r<e;){var o=Dk(r,i),s=t[o];t[o]=t[r],t[r]=s}return t.length=e,t}var Tf=Fz;function Iz(t){return Tf(eo(t))}var Ck=Iz;function Cz(t){return Tf(Sk(t))}var Nk=Cz;function Nz(t){var e=Ge(t)?Ck:Nk;return e(t)}var LS=Nz;var Oz=rs(function(t,e){if(t==null)return[];var r=e.length;return r>1&&Go(t,e[0],e[1])?e=[]:r>2&&Go(e[0],e[1],e[2])&&(e=[e[0]]),Ek(t,fs(e,1),[])}),US=Oz;function Lz(t,e){return t&&t.length?vk(t,co(e,2)):0}var vf=Lz;var Uz=1/0,Hz=so&&1/hs(new so([,-0]))[1]==Uz?function(t){return new so(t)}:Qu,Ok=Hz;var Vz=200;function Bz(t,e,r){var n=-1,i=BE,o=t.length,s=!0,l=[],p=l;if(r)s=!1,i=mk;else if(o>=Vz){var u=e?null:Ok(t);if(u)return hs(u);s=!1,i=ff,p=new uf}else p=e?[]:l;e:for(;++n<o;){var m=t[n],d=e?e(m):m;if(m=r||m!==0?m:0,s&&d===d){for(var g=p.length;g--;)if(p[g]===d)continue e;e&&p.push(d),l.push(m)}else i(p,d,r)||(p!==l&&p.push(d),l.push(m))}return l}var bf=Bz;function Wz(t){return t&&t.length?bf(t):[]}var Xo=Wz;function $z(t,e){return e=typeof e=="function"?e:void 0,t&&t.length?bf(t,void 0,e):[]}var tl=$z;var jz=Math.max;function qz(t){if(!(t&&t.length))return[];var e=0;return t=sf(t,function(r){if(fk(r))return e=jz(r.length,e),!0}),nf(e,function(r){return cn(t,yf(r))})}var Lk=qz;var zz=rs(Lk),Rt=zz;var wf=class{constructor(){this.commands={clipboardPaste:void 0,clipboardCopy:void 0,toggleLineComment:void 0,indentLine:void 0,outdentLine:void 0,rename:void 0,quickFix:void 0,revealDefinition:void 0,revealTypeDefinition:void 0,showHover:void 0,showDebugHover:void 0,extractVariable:void 0,fold:void 0,highlight:{acceptsLocation:!0},unfold:void 0,showReferences:void 0,insertLineAfter:void 0,gitAccept:void 0,gitRevert:void 0,gitStage:void 0,gitUnstage:void 0}}};var rl=class{constructor(){this.clipboardContents=""}async readText(){return this.clipboardContents}async writeText(e){this.clipboardContents=e}};var Gt=class{constructor(){this.listeners=[];this.notifyListeners=(...e)=>{this.listeners.forEach(r=>r(...e))};this.registerListener=this.registerListener.bind(this)}registerListener(e){return this.listeners.push(e),{dispose:()=>{or(this.listeners,e)}}}};var _f={tokenHatSplittingMode:{preserveCase:!1,lettersToPreserve:[],symbolsToPreserve:[]},wordSeparators:["_"],decorationDebounceDelayMs:50,experimental:{snippetsDir:void 0,hatStability:"balanced",keyboardTargetFollowsSelection:!1},commandHistory:!1,debug:!1};var nl=class{constructor(){this.notifier=new Gt;this.mocks={..._f};this.scopes=[];this.onDidChangeConfiguration=this.notifier.registerListener;this.onDidChangeConfiguration=this.onDidChangeConfiguration.bind(this)}getOwnConfiguration(e,r){if(r!=null){for(let{scope:n,values:i}of this.scopes)if(Kz(n,r))return Qo(i,e)??Qo(this.mocks,e)}return Qo(this.mocks,e)}mockConfiguration(e,r){this.mocks[e]=r,this.notifier.notifyListeners()}mockConfigurationScope(e,r,n=!1){this.scopes.push({scope:e,values:r}),n||this.notifier.notifyListeners()}};function Kz(t,e){return t.languageId===e.languageId}var Ef={hideInferenceWarning:!1,tutorialProgress:{}};var il=class{constructor(){this.data={...Ef}}get(e){return this.data[e]}set(e,r){return this.data[e]=r,Promise.resolve()}};var ol=class{async showMessage(e,r,n,...i){}};var Rf=class{constructor(){this.configuration=new nl;this.messages=new ol;this.keyValueStore=new il;this.clipboard=new rl;this.capabilities=new wf;this.runMode="test";this.cursorlessVersion="0.0.0";this.workspaceFolders=void 0;this.disposables=[];this.quickPickReturnValue=void 0;this.onDidOpenTextDocument=ys;this.onDidCloseTextDocument=ys;this.onDidChangeActiveTextEditor=ys;this.onDidChangeVisibleTextEditors=ys;this.onDidChangeTextEditorSelection=ys;this.onDidChangeTextEditorVisibleRanges=ys}async flashRanges(e){}async setHighlightRanges(e,r,n){}mockAssetsRoot(e){this.assetsRoot_=e}get assetsRoot(){if(this.assetsRoot_==null)throw Error("Field `assetsRoot` has not yet been mocked");return this.assetsRoot_}get activeTextEditor(){throw Error("Not implemented")}get activeEditableTextEditor(){throw Error("Not implemented")}get visibleTextEditors(){throw Error("Not implemented")}get visibleNotebookEditors(){throw Error("Not implemented")}getEditableTextEditor(e){throw Error("Not implemented")}findInDocument(e,r){throw Error("Not implemented")}findInWorkspace(e){throw Error("Not implemented")}openTextDocument(e){throw Error("Not implemented")}openUntitledTextDocument(e){throw Error("Not implemented")}setQuickPickReturnValue(e){this.quickPickReturnValue=e}async showQuickPick(e,r){return this.quickPickReturnValue}showInputBox(e){throw Error("Not implemented")}executeCommand(e,...r){throw new Error("Method not implemented.")}onDidChangeTextDocument(e){throw Error("Not implemented")}disposeOnExit(...e){return this.disposables.push(...e),()=>or(this.disposables,...e)}exit(){this.disposables.forEach(e=>e.dispose())}};function ys(){return{dispose(){}}}var ue=class t{constructor(e,r){this.line=e,this.character=r}isEqual(e){return this.line===e.line&&this.character===e.character}isBefore(e){return this.line<e.line?!0:this.line>e.line?!1:this.character<e.character}isAfter(e){return this.line>e.line?!0:this.line<e.line?!1:this.character>e.character}isBeforeOrEqual(e){return this.isEqual(e)||this.isBefore(e)}isAfterOrEqual(e){return this.isEqual(e)||this.isAfter(e)}compareTo(e){return this.isBefore(e)?-1:this.isAfter(e)?1:0}with(e,r){return new t(e??this.line,r??this.character)}translate(e,r){return new t(this.line+(e??0),this.character+(r??0))}toEmptyRange(){return new $(this,this)}concise(){return`${this.line}:${this.character}`}conciseOneBased(){return`${this.line+1}:${this.character+1}`}toString(){return this.concise()}};function Uk(t,e,r){return t.positionAt(t.offsetAt(e)+r)}var $=class t{constructor(...e){let[r,n]=e.length===2?e:[new ue(e[0],e[1]),new ue(e[2],e[3])];r.isBefore(n)?(this.start=r,this.end=n):(this.start=n,this.end=r)}get isEmpty(){return this.start.isEqual(this.end)}get isSingleLine(){return this.start.line===this.end.line}isRangeEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}contains(e){let[r,n]=e instanceof ue?[e,e]:[e.start,e.end];return r.isAfterOrEqual(this.start)&&n.isBeforeOrEqual(this.end)}intersection(e){let r=this.start.isAfter(e.start)?this.start:e.start,n=this.end.isBefore(e.end)?this.end:e.end;return r.isBeforeOrEqual(n)?new t(r,n):void 0}union(e){return new t(this.start.isBefore(e.start)?this.start:e.start,this.end.isAfter(e.end)?this.end:e.end)}with(e,r){return new t(e??this.start,r??this.end)}toSelection(e){return e?new we(this.end,this.start):new we(this.start,this.end)}concise(){return`${this.start.concise()}-${this.end.concise()}`}conciseOneBased(){return`${this.start.conciseOneBased()}-${this.end.conciseOneBased()}`}toString(){return`${this.start.concise()}-${this.end.concise()}`}};function Qz(t){let{source:e,flags:r}=t;return new RegExp(`(${e})$`,r.replace("m",""))}function Zz(t){let{source:e,flags:r}=t;return new RegExp(`^(${e})`,r.replace("m",""))}function Hk(t){let e=new Map;function r(n){let i=e.get(n);return i==null&&(i=t(n),e.set(n,i)),i}return r}var kf=Hk(Qz),Pf=Hk(Zz);function HS(t,e){return e.lastIndex=0,t.matchAll(e)}function ln(t,e,r){return Array.from(HS(t,e),r)}function Jo(t,e){return t.lastIndex=0,t.test(e)}function Vk(t,e){return t.lastIndex=0,e.match(t)}function al(t,e){return ln(t,e,r=>({index:r.index,text:r[0]}))}var xs=class{constructor(e){this.original=e;this.configuration=e.configuration,this.keyValueStore=e.keyValueStore,this.clipboard=e.clipboard,this.messages=e.messages,this.capabilities=e.capabilities}flashRanges(e){return this.original.flashRanges(e)}setHighlightRanges(e,r,n){return this.original.setHighlightRanges(e,r,n)}onDidOpenTextDocument(e,r,n){return this.original.onDidOpenTextDocument(e,r,n)}onDidCloseTextDocument(e,r,n){return this.original.onDidCloseTextDocument(e,r,n)}onDidChangeActiveTextEditor(e,r,n){return this.original.onDidChangeActiveTextEditor(e,r,n)}onDidChangeVisibleTextEditors(e,r,n){return this.original.onDidChangeVisibleTextEditors(e,r,n)}onDidChangeTextEditorSelection(e,r,n){return this.original.onDidChangeTextEditorSelection(e,r,n)}onDidChangeTextEditorVisibleRanges(e,r,n){return this.original.onDidChangeTextEditorVisibleRanges(e,r,n)}get activeTextEditor(){return this.original.activeTextEditor}get activeEditableTextEditor(){return this.original.activeEditableTextEditor}get visibleTextEditors(){return this.original.visibleTextEditors}get visibleNotebookEditors(){return this.original.visibleNotebookEditors}get cursorlessVersion(){return this.original.cursorlessVersion}get assetsRoot(){return this.original.assetsRoot}get runMode(){return this.original.runMode}get workspaceFolders(){return this.original.workspaceFolders}findInDocument(e,r){return this.original.findInDocument(e,r)}findInWorkspace(e){return this.original.findInWorkspace(e)}openTextDocument(e){return this.original.openTextDocument(e)}openUntitledTextDocument(e){return this.original.openUntitledTextDocument(e)}showQuickPick(e,r){return this.original.showQuickPick(e,r)}showInputBox(e){return this.original.showInputBox(e)}getEditableTextEditor(e){return this.original.getEditableTextEditor(e)}executeCommand(e,...r){return this.original.executeCommand(e,...r)}onDidChangeTextDocument(e){return this.original.onDidChangeTextDocument(e)}disposeOnExit(...e){return this.original.disposeOnExit(...e)}};var Af=class extends xs{constructor(r,n,i,o){super(r);this.fakeIde=n;this.isSilent=i;this.cursorlessSnippetsDir=o;this.messages=i?n.messages:r.messages,this.configuration=n.configuration,this.keyValueStore=n.keyValueStore,this.initializeConfiguration()}initializeConfiguration(){this.configuration.mockConfigurationScope({languageId:"css"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfigurationScope({languageId:"scss"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfigurationScope({languageId:"shellscript"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfiguration("experimental",{hatStability:this.configuration.getOwnConfiguration("experimental.hatStability"),snippetsDir:this.cursorlessSnippetsDir,keyboardTargetFollowsSelection:!1})}flashRanges(r){return this.isSilent?this.fakeIde.flashRanges(r):super.flashRanges(r)}setHighlightRanges(r,n,i){return this.isSilent?this.fakeIde.setHighlightRanges(r,n,i):super.setHighlightRanges(r,n,i)}async showQuickPick(r,n){return this.isSilent?this.fakeIde.showQuickPick(r,n):super.showQuickPick(r,n)}};function ea(t,e,r,...n){return t.showMessage("warning",e,r,...n)}function ct(t,e,r,...n){return t.showMessage("error",e,r,...n)}var se=(i=>(i[i.supported=0]="supported",i[i.supportedLegacy=1]="supportedLegacy",i[i.unsupported=2]="unsupported",i[i.notApplicable=3]="notApplicable",i))(se||{});var{supported:nt,unsupported:Spe,notApplicable:Bk}=se,VS={ifStatement:nt,disqualifyDelimiter:nt,"comment.line":nt,"comment.block":nt,"string.singleLine":nt,"textFragment.comment.line":nt,"textFragment.comment.block":nt,"textFragment.string.singleLine":nt,class:nt,className:nt,namedFunction:nt,"name.function":nt,"name.class":nt,"name.field":nt,functionName:nt,"name.argument.formal":nt,"name.argument.formal.iteration":nt,"name.variable":nt,"value.variable":nt,"name.assignment":nt,"value.assignment":nt,"statement.class":nt,"type.class":nt,"type.field":nt,"value.argument.formal":Bk,"value.argument.formal.iteration":Bk};var{supported:bpe,unsupported:wpe,notApplicable:_pe}=se;var{supported:Wk,unsupported:Ppe,notApplicable:Ape}=se,Yz={...VS,"value.argument.formal":Wk,"value.argument.formal.iteration":Wk};var{supported:Fpe,unsupported:Ipe,notApplicable:Cpe}=se;var{supported:sl,unsupported:Xz,notApplicable:Lpe}=se,BS={"comment.block":sl,"string.singleLine":sl,"name.iteration.block":sl,"name.iteration.document":sl,disqualifyDelimiter:sl,"comment.line":Xz};var{supported:Vpe,unsupported:Bpe,notApplicable:Wpe}=se;var{supported:qpe,unsupported:zpe,notApplicable:Gpe}=se;var{supported:Zpe,notApplicable:Ype}=se;var{supported:eue,unsupported:tue,notApplicable:rue}=se;var{supported:q,unsupported:dt,notApplicable:Ve}=se,WS={list:q,map:q,regularExpression:q,switchStatementSubject:q,fieldAccess:q,disqualifyDelimiter:q,pairDelimiter:q,"collectionItem.unenclosed":q,"textFragment.string.singleLine":q,"textFragment.string.multiLine":q,"textFragment.comment.line":q,"textFragment.comment.block":q,ifStatement:q,statement:q,"statement.iteration.document":q,"statement.iteration.block":q,"statement.class":q,class:q,className:q,anonymousFunction:q,namedFunction:q,"namedFunction.iteration.document":q,"namedFunction.method":q,"namedFunction.method.iteration.class":q,"namedFunction.constructor":q,functionName:q,"functionName.iteration.document":q,"functionName.method":q,"functionName.method.iteration.class":q,"functionName.constructor":q,functionCall:q,"functionCall.constructor":q,functionCallee:q,"functionCallee.constructor":q,"argument.actual":q,"argument.actual.iteration":q,"argument.actual.method":q,"argument.actual.method.iteration":q,"argument.actual.constructor":q,"argument.actual.constructor.iteration":q,"argument.formal":q,"argument.formal.iteration":q,"argument.formal.method":q,"argument.formal.method.iteration":q,"argument.formal.constructor":q,"argument.formal.constructor.iteration":q,"comment.line":q,"comment.block":q,"string.singleLine":q,"string.multiLine":q,"branch.if":q,"branch.if.iteration":q,"branch.try":q,"branch.try.iteration":q,"branch.switchCase":q,"branch.switchCase.iteration":q,"branch.ternary":q,"condition.if":q,"condition.while":q,"condition.doWhile":q,"condition.for":q,"condition.ternary":q,"condition.switchCase":q,"condition.switchCase.iteration":q,"name.argument.formal":q,"name.argument.formal.iteration":q,"name.argument.formal.method":q,"name.argument.formal.method.iteration":q,"name.argument.formal.constructor":q,"name.argument.formal.constructor.iteration":q,"name.foreach":q,"name.assignment":q,"name.assignment.pattern":q,"name.variable":q,"name.variable.pattern":q,"name.function":q,"name.method":q,"name.constructor":q,"name.class":q,"name.field":q,"name.iteration.document":q,"key.mapPair":q,"key.mapPair.iteration":q,"value.argument.formal":q,"value.argument.formal.iteration":q,"value.argument.formal.method":q,"value.argument.formal.method.iteration":q,"value.argument.formal.constructor":q,"value.argument.formal.constructor.iteration":q,"value.mapPair":q,"value.mapPair.iteration":q,"value.assignment":q,"value.variable":q,"value.variable.pattern":q,"value.foreach":q,"value.return":q,"value.return.lambda":q,"value.field":q,"value.yield":q,"collectionItem.unenclosed.iteration":dt,"branch.loop":dt,"namedFunction.iteration.block":dt,"functionName.iteration.block":dt,"class.iteration.block":dt,"class.iteration.document":dt,"className.iteration.block":dt,"className.iteration.document":dt,"name.iteration.block":dt,"name.resource":dt,"name.resource.iteration":dt,"value.resource":dt,"value.resource.iteration":dt,"interior.class":dt,"interior.function":dt,"interior.if":dt,"interior.lambda":dt,"interior.loop":dt,"interior.switchCase":dt,"interior.ternary":dt,"interior.try":dt,"interior.resource":dt,"interior.cell":Ve,"interior.command":Ve,"name.argument.actual.iteration":Ve,"name.argument.actual":Ve,"value.argument.actual":Ve,"value.argument.actual.iteration":Ve,"section.iteration.document":Ve,"section.iteration.parent":Ve,"textFragment.element":Ve,command:Ve,environment:Ve,notebookCell:Ve,section:Ve},$S={element:q,tags:q,startTag:q,endTag:q,attribute:q,"key.attribute":q,"value.attribute":q,"interior.element":q},jS={...WS,...$S,"value.typeAlias":Ve,"type.alias":Ve,"type.argument.formal.constructor.iteration":Ve,"type.argument.formal.constructor":Ve,"type.argument.formal.iteration":Ve,"type.argument.formal.method.iteration":Ve,"type.argument.formal.method":Ve,"type.argument.formal":Ve,"type.cast":Ve,"type.class":Ve,"type.enum":Ve,"type.field.iteration":Ve,"type.field":Ve,"type.foreach":Ve,"type.interface":Ve,"type.return":Ve,"type.typeArgument.iteration":Ve,"type.typeArgument":Ve,"type.variable":Ve};var{supported:Jz,unsupported:cue,notApplicable:lue}=se,eG={...jS,"textFragment.element":Jz};var{supported:pn,notApplicable:N}=se,cl={list:pn,map:pn,"string.singleLine":pn,"key.mapPair.iteration":pn,"key.mapPair":pn,"value.mapPair.iteration":pn,"value.mapPair":pn,"comment.block":pn,"comment.line":pn,"textFragment.comment.block":pn,"textFragment.comment.line":pn,"textFragment.string.singleLine":pn,anonymousFunction:N,"argument.actual":N,"argument.actual.constructor":N,"argument.actual.constructor.iteration":N,"argument.actual.iteration":N,"argument.actual.method":N,"argument.actual.method.iteration":N,"argument.formal":N,"argument.formal.constructor":N,"argument.formal.constructor.iteration":N,"argument.formal.iteration":N,"argument.formal.method":N,"argument.formal.method.iteration":N,attribute:N,"branch.if":N,"branch.if.iteration":N,"branch.loop":N,"branch.switchCase":N,"branch.switchCase.iteration":N,"branch.ternary":N,"branch.try":N,"branch.try.iteration":N,class:N,"class.iteration.block":N,"class.iteration.document":N,className:N,"className.iteration.block":N,"className.iteration.document":N,"collectionItem.unenclosed":N,"collectionItem.unenclosed.iteration":N,command:N,"condition.doWhile":N,"condition.for":N,"condition.if":N,"condition.switchCase":N,"condition.switchCase.iteration":N,"condition.ternary":N,"condition.while":N,disqualifyDelimiter:N,element:N,endTag:N,environment:N,fieldAccess:N,functionCall:N,"functionCall.constructor":N,functionCallee:N,"functionCallee.constructor":N,functionName:N,"functionName.constructor":N,"functionName.iteration.block":N,"functionName.iteration.document":N,"functionName.method":N,"functionName.method.iteration.class":N,ifStatement:N,"interior.cell":N,"interior.class":N,"interior.command":N,"interior.element":N,"interior.function":N,"interior.if":N,"interior.lambda":N,"interior.loop":N,"interior.resource":N,"interior.switchCase":N,"interior.ternary":N,"interior.try":N,"key.attribute":N,"name.argument.actual":N,"name.argument.actual.iteration":N,"name.argument.formal":N,"name.argument.formal.constructor":N,"name.argument.formal.constructor.iteration":N,"name.argument.formal.iteration":N,"name.argument.formal.method":N,"name.argument.formal.method.iteration":N,"name.assignment":N,"name.assignment.pattern":N,"name.class":N,"name.constructor":N,"name.field":N,"name.foreach":N,"name.function":N,"name.iteration.block":N,"name.iteration.document":N,"name.method":N,"name.resource":N,"name.resource.iteration":N,"name.variable":N,"name.variable.pattern":N,namedFunction:N,"namedFunction.constructor":N,"namedFunction.iteration.block":N,"namedFunction.iteration.document":N,"namedFunction.method":N,"namedFunction.method.iteration.class":N,notebookCell:N,pairDelimiter:N,regularExpression:N,section:N,"section.iteration.document":N,"section.iteration.parent":N,startTag:N,statement:N,"statement.class":N,"statement.iteration.block":N,"statement.iteration.document":N,"string.multiLine":N,switchStatementSubject:N,tags:N,"textFragment.element":N,"textFragment.string.multiLine":N,"type.alias":N,"type.argument.formal":N,"type.argument.formal.constructor":N,"type.argument.formal.constructor.iteration":N,"type.argument.formal.iteration":N,"type.argument.formal.method":N,"type.argument.formal.method.iteration":N,"type.cast":N,"type.class":N,"type.enum":N,"type.field":N,"type.field.iteration":N,"type.foreach":N,"type.interface":N,"type.return":N,"type.typeArgument":N,"type.typeArgument.iteration":N,"type.variable":N,"value.argument.actual":N,"value.argument.actual.iteration":N,"value.argument.formal":N,"value.argument.formal.constructor":N,"value.argument.formal.constructor.iteration":N,"value.argument.formal.iteration":N,"value.argument.formal.method":N,"value.argument.formal.method.iteration":N,"value.assignment":N,"value.attribute":N,"value.field":N,"value.foreach":N,"value.resource":N,"value.resource.iteration":N,"value.return":N,"value.return.lambda":N,"value.typeAlias":N,"value.variable":N,"value.variable.pattern":N,"value.yield":N};var{supported:hue,unsupported:gue,notApplicable:yue}=se,tG={...cl};var{supported:vue,unsupported:bue,notApplicable:wue}=se,rG={...cl};var{supported:Rue,unsupported:kue,notApplicable:Pue}=se;var{supported:Due,notApplicable:Fue}=se;var{supported:Nue,unsupported:Oue,notApplicable:Lue}=se;var{supported:Vue,unsupported:Bue,notApplicable:Wue}=se;var{supported:que,unsupported:zue,notApplicable:Gue}=se;var{supported:Zue,unsupported:Yue,notApplicable:Xue}=se;var{supported:tfe,unsupported:rfe,notApplicable:nfe}=se;var{supported:afe,unsupported:sfe,notApplicable:cfe}=se;var{supported:ufe,notApplicable:ffe}=se;var{supported:Ss,unsupported:gfe,notApplicable:yfe}=se,nG={...BS,"namedFunction.iteration.block":Ss,"namedFunction.iteration.document":Ss,"functionName.iteration.block":Ss,"functionName.iteration.document":Ss,"comment.line":Ss,disqualifyDelimiter:Ss};var{supported:Tfe,unsupported:vfe,notApplicable:bfe}=se;var{supported:br}=se,qS={...WS,"type.argument.formal":br,"type.argument.formal.iteration":br,"type.argument.formal.method":br,"type.argument.formal.method.iteration":br,"type.argument.formal.constructor":br,"type.argument.formal.constructor.iteration":br,"type.alias":br,"type.cast":br,"type.field":br,"type.interface":br,"type.enum":br,"type.return":br,"type.variable":br,"value.typeAlias":br};var{supported:Mfe,unsupported:Dfe,notApplicable:Ffe}=se,iG={...qS,...$S};var{supported:Nfe,notApplicable:Ofe}=se;var{supported:Hfe,unsupported:Vfe,notApplicable:Bfe}=se;var Ts=["that","source","instanceReference","keyboard"];var we=class extends ${get isReversed(){return this.active.isBefore(this.anchor)}constructor(...e){let[r,n]=e.length===2?e:[new ue(e[0],e[1]),new ue(e[2],e[3])];super(r,n),this.anchor=r,this.active=n}isEqual(e){return this.anchor.isEqual(e.anchor)&&this.active.isEqual(e.active)}concise(){return`${this.anchor.concise()}->${this.active.concise()}`}conciseOneBased(){return`${this.start.conciseOneBased()}->${this.end.conciseOneBased()}`}toString(){return this.concise()}};function jk({line:t,character:e}){return new ue(t,e)}function Mf({start:t,end:e}){return new $(jk(t),jk(e))}function Wr({start:t,end:e}){return{type:"line",start:t.line,end:e.line}}function ar({start:t,end:e}){return{type:"character",start:t,end:e}}function ll(t){return{start:Df(t.start),end:Df(t.end)}}function qk(t){return{anchor:Df(t.anchor),active:Df(t.active)}}function Df({line:t,character:e}){return{line:t,character:e}}function lP(t){return typeof t>"u"||t===null}function oG(t){return typeof t=="object"&&t!==null}function aG(t){return Array.isArray(t)?t:lP(t)?[]:[t]}function sG(t,e){var r,n,i,o;if(e)for(o=Object.keys(e),r=0,n=o.length;r<n;r+=1)i=o[r],t[i]=e[i];return t}function cG(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}function lG(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var pG=lP,uG=oG,fG=aG,mG=cG,dG=lG,hG=sG,kt={isNothing:pG,isObject:uG,toArray:fG,repeat:mG,isNegativeZero:dG,extend:hG};function pP(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}function ul(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=pP(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}ul.prototype=Object.create(Error.prototype);ul.prototype.constructor=ul;ul.prototype.toString=function(e){return this.name+": "+pP(this,e)};var wr=ul;function zS(t,e,r,n,i){var o="",s="",l=Math.floor(i/2)-1;return n-e>l&&(o=" ... ",e=n-l+o.length),r-n>l&&(s=" ...",r=n+l-s.length),{str:o+t.slice(e,r).replace(/\t/g,"\u2192")+s,pos:n-e+o.length}}function GS(t,e){return kt.repeat(" ",e-t.length)+t}function gG(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],o,s=-1;o=r.exec(t.buffer);)i.push(o.index),n.push(o.index+o[0].length),t.position<=o.index&&s<0&&(s=n.length-2);s<0&&(s=n.length-1);var l="",p,u,m=Math.min(t.line+e.linesAfter,i.length).toString().length,d=e.maxLength-(e.indent+m+3);for(p=1;p<=e.linesBefore&&!(s-p<0);p++)u=zS(t.buffer,n[s-p],i[s-p],t.position-(n[s]-n[s-p]),d),l=kt.repeat(" ",e.indent)+GS((t.line-p+1).toString(),m)+" | "+u.str+`
`+l;for(u=zS(t.buffer,n[s],i[s],t.position,d),l+=kt.repeat(" ",e.indent)+GS((t.line+1).toString(),m)+" | "+u.str+`
`,l+=kt.repeat("-",e.indent+m+3+u.pos)+`^
`,p=1;p<=e.linesAfter&&!(s+p>=i.length);p++)u=zS(t.buffer,n[s+p],i[s+p],t.position-(n[s]-n[s+p]),d),l+=kt.repeat(" ",e.indent)+GS((t.line+p+1).toString(),m)+" | "+u.str+`
`;return l.replace(/\n$/,"")}var yG=gG,xG=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],SG=["scalar","sequence","mapping"];function TG(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}function vG(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(xG.indexOf(r)===-1)throw new wr('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=TG(e.styleAliases||null),SG.indexOf(this.kind)===-1)throw new wr('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var Ht=vG;function Kk(t,e){var r=[];return t[e].forEach(function(n){var i=r.length;r.forEach(function(o,s){o.tag===n.tag&&o.kind===n.kind&&o.multi===n.multi&&(i=s)}),r[i]=n}),r}function bG(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}function QS(t){return this.extend(t)}QS.prototype.extend=function(e){var r=[],n=[];if(e instanceof Ht)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new wr("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(o){if(!(o instanceof Ht))throw new wr("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new wr("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new wr("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(o){if(!(o instanceof Ht))throw new wr("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(QS.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=Kk(i,"implicit"),i.compiledExplicit=Kk(i,"explicit"),i.compiledTypeMap=bG(i.compiledImplicit,i.compiledExplicit),i};var wG=QS,_G=new Ht("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),EG=new Ht("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),RG=new Ht("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),kG=new wG({explicit:[_G,EG,RG]});function PG(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function AG(){return null}function MG(t){return t===null}var DG=new Ht("tag:yaml.org,2002:null",{kind:"scalar",resolve:PG,construct:AG,predicate:MG,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function FG(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function IG(t){return t==="true"||t==="True"||t==="TRUE"}function CG(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var NG=new Ht("tag:yaml.org,2002:bool",{kind:"scalar",resolve:FG,construct:IG,predicate:CG,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function OG(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function LG(t){return 48<=t&&t<=55}function UG(t){return 48<=t&&t<=57}function HG(t){if(t===null)return!1;var e=t.length,r=0,n=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!OG(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!LG(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!UG(t.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function VG(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}function BG(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!kt.isNegativeZero(t)}var WG=new Ht("tag:yaml.org,2002:int",{kind:"scalar",resolve:HG,construct:VG,predicate:BG,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),$G=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function jG(t){return!(t===null||!$G.test(t)||t[t.length-1]==="_")}function qG(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}var zG=/^[-+]?[0-9]+e/;function GG(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(kt.isNegativeZero(t))return"-0.0";return r=t.toString(10),zG.test(r)?r.replace("e",".e"):r}function KG(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||kt.isNegativeZero(t))}var QG=new Ht("tag:yaml.org,2002:float",{kind:"scalar",resolve:jG,construct:qG,predicate:KG,represent:GG,defaultStyle:"lowercase"}),ZG=kG.extend({implicit:[DG,NG,WG,QG]}),YG=ZG,uP=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),fP=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function XG(t){return t===null?!1:uP.exec(t)!==null||fP.exec(t)!==null}function JG(t){var e,r,n,i,o,s,l,p=0,u=null,m,d,g;if(e=uP.exec(t),e===null&&(e=fP.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(o=+e[4],s=+e[5],l=+e[6],e[7]){for(p=e[7].slice(0,3);p.length<3;)p+="0";p=+p}return e[9]&&(m=+e[10],d=+(e[11]||0),u=(m*60+d)*6e4,e[9]==="-"&&(u=-u)),g=new Date(Date.UTC(r,n,i,o,s,l,p)),u&&g.setTime(g.getTime()-u),g}function eK(t){return t.toISOString()}var tK=new Ht("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:XG,construct:JG,instanceOf:Date,represent:eK});function rK(t){return t==="<<"||t===null}var nK=new Ht("tag:yaml.org,2002:merge",{kind:"scalar",resolve:rK}),eT=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function iK(t){if(t===null)return!1;var e,r,n=0,i=t.length,o=eT;for(r=0;r<i;r++)if(e=o.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}function oK(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,o=eT,s=0,l=[];for(e=0;e<i;e++)e%4===0&&e&&(l.push(s>>16&255),l.push(s>>8&255),l.push(s&255)),s=s<<6|o.indexOf(n.charAt(e));return r=i%4*6,r===0?(l.push(s>>16&255),l.push(s>>8&255),l.push(s&255)):r===18?(l.push(s>>10&255),l.push(s>>2&255)):r===12&&l.push(s>>4&255),new Uint8Array(l)}function aK(t){var e="",r=0,n,i,o=t.length,s=eT;for(n=0;n<o;n++)n%3===0&&n&&(e+=s[r>>18&63],e+=s[r>>12&63],e+=s[r>>6&63],e+=s[r&63]),r=(r<<8)+t[n];return i=o%3,i===0?(e+=s[r>>18&63],e+=s[r>>12&63],e+=s[r>>6&63],e+=s[r&63]):i===2?(e+=s[r>>10&63],e+=s[r>>4&63],e+=s[r<<2&63],e+=s[64]):i===1&&(e+=s[r>>2&63],e+=s[r<<4&63],e+=s[64],e+=s[64]),e}function sK(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var cK=new Ht("tag:yaml.org,2002:binary",{kind:"scalar",resolve:iK,construct:oK,predicate:sK,represent:aK}),lK=Object.prototype.hasOwnProperty,pK=Object.prototype.toString;function uK(t){if(t===null)return!0;var e=[],r,n,i,o,s,l=t;for(r=0,n=l.length;r<n;r+=1){if(i=l[r],s=!1,pK.call(i)!=="[object Object]")return!1;for(o in i)if(lK.call(i,o))if(!s)s=!0;else return!1;if(!s)return!1;if(e.indexOf(o)===-1)e.push(o);else return!1}return!0}function fK(t){return t!==null?t:[]}var mK=new Ht("tag:yaml.org,2002:omap",{kind:"sequence",resolve:uK,construct:fK}),dK=Object.prototype.toString;function hK(t){if(t===null)return!0;var e,r,n,i,o,s=t;for(o=new Array(s.length),e=0,r=s.length;e<r;e+=1){if(n=s[e],dK.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;o[e]=[i[0],n[i[0]]]}return!0}function gK(t){if(t===null)return[];var e,r,n,i,o,s=t;for(o=new Array(s.length),e=0,r=s.length;e<r;e+=1)n=s[e],i=Object.keys(n),o[e]=[i[0],n[i[0]]];return o}var yK=new Ht("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:hK,construct:gK}),xK=Object.prototype.hasOwnProperty;function SK(t){if(t===null)return!0;var e,r=t;for(e in r)if(xK.call(r,e)&&r[e]!==null)return!1;return!0}function TK(t){return t!==null?t:{}}var vK=new Ht("tag:yaml.org,2002:set",{kind:"mapping",resolve:SK,construct:TK}),tT=YG.extend({implicit:[tK,nK],explicit:[cK,mK,yK,vK]}),po=Object.prototype.hasOwnProperty,Ff=1,mP=2,dP=3,If=4,KS=1,bK=2,Qk=3,wK=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,_K=/[\x85\u2028\u2029]/,EK=/[,\[\]\{\}]/,hP=/^(?:!|!!|![a-z\-]+!)$/i,gP=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Zk(t){return Object.prototype.toString.call(t)}function Qn(t){return t===10||t===13}function ra(t){return t===9||t===32}function _r(t){return t===9||t===32||t===10||t===13}function bs(t){return t===44||t===91||t===93||t===123||t===125}function RK(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function kK(t){return t===120?2:t===117?4:t===85?8:0}function PK(t){return 48<=t&&t<=57?t-48:-1}function Yk(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}function AK(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var yP=new Array(256),xP=new Array(256);for(ta=0;ta<256;ta++)yP[ta]=Yk(ta)?1:0,xP[ta]=Yk(ta);var ta;function MK(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||tT,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function SP(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=yG(r),new wr(e,r)}function pe(t,e){throw SP(t,e)}function Cf(t,e){t.onWarning&&t.onWarning.call(null,SP(t,e))}var Xk={YAML:function(e,r,n){var i,o,s;e.version!==null&&pe(e,"duplication of %YAML directive"),n.length!==1&&pe(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&pe(e,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),s=parseInt(i[2],10),o!==1&&pe(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=s<2,s!==1&&s!==2&&Cf(e,"unsupported YAML version of the document")},TAG:function(e,r,n){var i,o;n.length!==2&&pe(e,"TAG directive accepts exactly two arguments"),i=n[0],o=n[1],hP.test(i)||pe(e,"ill-formed tag handle (first argument) of the TAG directive"),po.call(e.tagMap,i)&&pe(e,'there is a previously declared suffix for "'+i+'" tag handle'),gP.test(o)||pe(e,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{pe(e,"tag prefix is malformed: "+o)}e.tagMap[i]=o}};function lo(t,e,r,n){var i,o,s,l;if(e<r){if(l=t.input.slice(e,r),n)for(i=0,o=l.length;i<o;i+=1)s=l.charCodeAt(i),s===9||32<=s&&s<=1114111||pe(t,"expected valid JSON character");else wK.test(l)&&pe(t,"the stream contains non-printable characters");t.result+=l}}function Jk(t,e,r,n){var i,o,s,l;for(kt.isObject(r)||pe(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),s=0,l=i.length;s<l;s+=1)o=i[s],po.call(e,o)||(e[o]=r[o],n[o]=!0)}function ws(t,e,r,n,i,o,s,l,p){var u,m;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),u=0,m=i.length;u<m;u+=1)Array.isArray(i[u])&&pe(t,"nested arrays are not supported inside keys"),typeof i=="object"&&Zk(i[u])==="[object Object]"&&(i[u]="[object Object]");if(typeof i=="object"&&Zk(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(u=0,m=o.length;u<m;u+=1)Jk(t,e,o[u],r);else Jk(t,e,o,r);else!t.json&&!po.call(r,i)&&po.call(e,i)&&(t.line=s||t.line,t.lineStart=l||t.lineStart,t.position=p||t.position,pe(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):e[i]=o,delete r[i];return e}function rT(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):pe(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function vt(t,e,r){for(var n=0,i=t.input.charCodeAt(t.position);i!==0;){for(;ra(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(Qn(i))for(rT(t),i=t.input.charCodeAt(t.position),n++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return r!==-1&&n!==0&&t.lineIndent<r&&Cf(t,"deficient indentation"),n}function Lf(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||_r(r)))}function nT(t,e){e===1?t.result+=" ":e>1&&(t.result+=kt.repeat(`
`,e-1))}function DK(t,e,r){var n,i,o,s,l,p,u,m,d=t.kind,g=t.result,x;if(x=t.input.charCodeAt(t.position),_r(x)||bs(x)||x===35||x===38||x===42||x===33||x===124||x===62||x===39||x===34||x===37||x===64||x===96||(x===63||x===45)&&(i=t.input.charCodeAt(t.position+1),_r(i)||r&&bs(i)))return!1;for(t.kind="scalar",t.result="",o=s=t.position,l=!1;x!==0;){if(x===58){if(i=t.input.charCodeAt(t.position+1),_r(i)||r&&bs(i))break}else if(x===35){if(n=t.input.charCodeAt(t.position-1),_r(n))break}else{if(t.position===t.lineStart&&Lf(t)||r&&bs(x))break;if(Qn(x))if(p=t.line,u=t.lineStart,m=t.lineIndent,vt(t,!1,-1),t.lineIndent>=e){l=!0,x=t.input.charCodeAt(t.position);continue}else{t.position=s,t.line=p,t.lineStart=u,t.lineIndent=m;break}}l&&(lo(t,o,s,!1),nT(t,t.line-p),o=s=t.position,l=!1),ra(x)||(s=t.position+1),x=t.input.charCodeAt(++t.position)}return lo(t,o,s,!1),t.result?!0:(t.kind=d,t.result=g,!1)}function FK(t,e){var r,n,i;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(lo(t,n,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)n=t.position,t.position++,i=t.position;else return!0;else Qn(r)?(lo(t,n,i,!0),nT(t,vt(t,!1,e)),n=i=t.position):t.position===t.lineStart&&Lf(t)?pe(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);pe(t,"unexpected end of the stream within a single quoted scalar")}function IK(t,e){var r,n,i,o,s,l;if(l=t.input.charCodeAt(t.position),l!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(l=t.input.charCodeAt(t.position))!==0;){if(l===34)return lo(t,r,t.position,!0),t.position++,!0;if(l===92){if(lo(t,r,t.position,!0),l=t.input.charCodeAt(++t.position),Qn(l))vt(t,!1,e);else if(l<256&&yP[l])t.result+=xP[l],t.position++;else if((s=kK(l))>0){for(i=s,o=0;i>0;i--)l=t.input.charCodeAt(++t.position),(s=RK(l))>=0?o=(o<<4)+s:pe(t,"expected hexadecimal character");t.result+=AK(o),t.position++}else pe(t,"unknown escape sequence");r=n=t.position}else Qn(l)?(lo(t,r,n,!0),nT(t,vt(t,!1,e)),r=n=t.position):t.position===t.lineStart&&Lf(t)?pe(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}pe(t,"unexpected end of the stream within a double quoted scalar")}function CK(t,e){var r=!0,n,i,o,s=t.tag,l,p=t.anchor,u,m,d,g,x,b=Object.create(null),v,I,F,H;if(H=t.input.charCodeAt(t.position),H===91)m=93,x=!1,l=[];else if(H===123)m=125,x=!0,l={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=l),H=t.input.charCodeAt(++t.position);H!==0;){if(vt(t,!0,e),H=t.input.charCodeAt(t.position),H===m)return t.position++,t.tag=s,t.anchor=p,t.kind=x?"mapping":"sequence",t.result=l,!0;r?H===44&&pe(t,"expected the node content, but found ','"):pe(t,"missed comma between flow collection entries"),I=v=F=null,d=g=!1,H===63&&(u=t.input.charCodeAt(t.position+1),_r(u)&&(d=g=!0,t.position++,vt(t,!0,e))),n=t.line,i=t.lineStart,o=t.position,_s(t,e,Ff,!1,!0),I=t.tag,v=t.result,vt(t,!0,e),H=t.input.charCodeAt(t.position),(g||t.line===n)&&H===58&&(d=!0,H=t.input.charCodeAt(++t.position),vt(t,!0,e),_s(t,e,Ff,!1,!0),F=t.result),x?ws(t,l,b,I,v,F,n,i,o):d?l.push(ws(t,null,b,I,v,F,n,i,o)):l.push(v),vt(t,!0,e),H=t.input.charCodeAt(t.position),H===44?(r=!0,H=t.input.charCodeAt(++t.position)):r=!1}pe(t,"unexpected end of the stream within a flow collection")}function NK(t,e){var r,n,i=KS,o=!1,s=!1,l=e,p=0,u=!1,m,d;if(d=t.input.charCodeAt(t.position),d===124)n=!1;else if(d===62)n=!0;else return!1;for(t.kind="scalar",t.result="";d!==0;)if(d=t.input.charCodeAt(++t.position),d===43||d===45)KS===i?i=d===43?Qk:bK:pe(t,"repeat of a chomping mode identifier");else if((m=PK(d))>=0)m===0?pe(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?pe(t,"repeat of an indentation width identifier"):(l=e+m-1,s=!0);else break;if(ra(d)){do d=t.input.charCodeAt(++t.position);while(ra(d));if(d===35)do d=t.input.charCodeAt(++t.position);while(!Qn(d)&&d!==0)}for(;d!==0;){for(rT(t),t.lineIndent=0,d=t.input.charCodeAt(t.position);(!s||t.lineIndent<l)&&d===32;)t.lineIndent++,d=t.input.charCodeAt(++t.position);if(!s&&t.lineIndent>l&&(l=t.lineIndent),Qn(d)){p++;continue}if(t.lineIndent<l){i===Qk?t.result+=kt.repeat(`
`,o?1+p:p):i===KS&&o&&(t.result+=`
`);break}for(n?ra(d)?(u=!0,t.result+=kt.repeat(`
`,o?1+p:p)):u?(u=!1,t.result+=kt.repeat(`
`,p+1)):p===0?o&&(t.result+=" "):t.result+=kt.repeat(`
`,p):t.result+=kt.repeat(`
`,o?1+p:p),o=!0,s=!0,p=0,r=t.position;!Qn(d)&&d!==0;)d=t.input.charCodeAt(++t.position);lo(t,r,t.position,!1)}return!0}function eP(t,e){var r,n=t.tag,i=t.anchor,o=[],s,l=!1,p;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),p=t.input.charCodeAt(t.position);p!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,pe(t,"tab characters must not be used in indentation")),!(p!==45||(s=t.input.charCodeAt(t.position+1),!_r(s))));){if(l=!0,t.position++,vt(t,!0,-1)&&t.lineIndent<=e){o.push(null),p=t.input.charCodeAt(t.position);continue}if(r=t.line,_s(t,e,dP,!1,!0),o.push(t.result),vt(t,!0,-1),p=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&p!==0)pe(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return l?(t.tag=n,t.anchor=i,t.kind="sequence",t.result=o,!0):!1}function OK(t,e,r){var n,i,o,s,l,p,u=t.tag,m=t.anchor,d={},g=Object.create(null),x=null,b=null,v=null,I=!1,F=!1,H;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=d),H=t.input.charCodeAt(t.position);H!==0;){if(!I&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,pe(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),o=t.line,(H===63||H===58)&&_r(n))H===63?(I&&(ws(t,d,g,x,b,null,s,l,p),x=b=v=null),F=!0,I=!0,i=!0):I?(I=!1,i=!0):pe(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,H=n;else{if(s=t.line,l=t.lineStart,p=t.position,!_s(t,r,mP,!1,!0))break;if(t.line===o){for(H=t.input.charCodeAt(t.position);ra(H);)H=t.input.charCodeAt(++t.position);if(H===58)H=t.input.charCodeAt(++t.position),_r(H)||pe(t,"a whitespace character is expected after the key-value separator within a block mapping"),I&&(ws(t,d,g,x,b,null,s,l,p),x=b=v=null),F=!0,I=!1,i=!1,x=t.tag,b=t.result;else if(F)pe(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=u,t.anchor=m,!0}else if(F)pe(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=u,t.anchor=m,!0}if((t.line===o||t.lineIndent>e)&&(I&&(s=t.line,l=t.lineStart,p=t.position),_s(t,e,If,!0,i)&&(I?b=t.result:v=t.result),I||(ws(t,d,g,x,b,v,s,l,p),x=b=v=null),vt(t,!0,-1),H=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&H!==0)pe(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return I&&ws(t,d,g,x,b,null,s,l,p),F&&(t.tag=u,t.anchor=m,t.kind="mapping",t.result=d),F}function LK(t){var e,r=!1,n=!1,i,o,s;if(s=t.input.charCodeAt(t.position),s!==33)return!1;if(t.tag!==null&&pe(t,"duplication of a tag property"),s=t.input.charCodeAt(++t.position),s===60?(r=!0,s=t.input.charCodeAt(++t.position)):s===33?(n=!0,i="!!",s=t.input.charCodeAt(++t.position)):i="!",e=t.position,r){do s=t.input.charCodeAt(++t.position);while(s!==0&&s!==62);t.position<t.length?(o=t.input.slice(e,t.position),s=t.input.charCodeAt(++t.position)):pe(t,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!_r(s);)s===33&&(n?pe(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),hP.test(i)||pe(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),s=t.input.charCodeAt(++t.position);o=t.input.slice(e,t.position),EK.test(o)&&pe(t,"tag suffix cannot contain flow indicator characters")}o&&!gP.test(o)&&pe(t,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{pe(t,"tag name is malformed: "+o)}return r?t.tag=o:po.call(t.tagMap,i)?t.tag=t.tagMap[i]+o:i==="!"?t.tag="!"+o:i==="!!"?t.tag="tag:yaml.org,2002:"+o:pe(t,'undeclared tag handle "'+i+'"'),!0}function UK(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&pe(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!_r(r)&&!bs(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&pe(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function HK(t){var e,r,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!_r(n)&&!bs(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&pe(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),po.call(t.anchorMap,r)||pe(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],vt(t,!0,-1),!0}function _s(t,e,r,n,i){var o,s,l,p=1,u=!1,m=!1,d,g,x,b,v,I;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=s=l=If===r||dP===r,n&&vt(t,!0,-1)&&(u=!0,t.lineIndent>e?p=1:t.lineIndent===e?p=0:t.lineIndent<e&&(p=-1)),p===1)for(;LK(t)||UK(t);)vt(t,!0,-1)?(u=!0,l=o,t.lineIndent>e?p=1:t.lineIndent===e?p=0:t.lineIndent<e&&(p=-1)):l=!1;if(l&&(l=u||i),(p===1||If===r)&&(Ff===r||mP===r?v=e:v=e+1,I=t.position-t.lineStart,p===1?l&&(eP(t,I)||OK(t,I,v))||CK(t,v)?m=!0:(s&&NK(t,v)||FK(t,v)||IK(t,v)?m=!0:HK(t)?(m=!0,(t.tag!==null||t.anchor!==null)&&pe(t,"alias node should not have any properties")):DK(t,v,Ff===r)&&(m=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):p===0&&(m=l&&eP(t,I))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&pe(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),d=0,g=t.implicitTypes.length;d<g;d+=1)if(b=t.implicitTypes[d],b.resolve(t.result)){t.result=b.construct(t.result),t.tag=b.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(po.call(t.typeMap[t.kind||"fallback"],t.tag))b=t.typeMap[t.kind||"fallback"][t.tag];else for(b=null,x=t.typeMap.multi[t.kind||"fallback"],d=0,g=x.length;d<g;d+=1)if(t.tag.slice(0,x[d].tag.length)===x[d].tag){b=x[d];break}b||pe(t,"unknown tag !<"+t.tag+">"),t.result!==null&&b.kind!==t.kind&&pe(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+b.kind+'", not "'+t.kind+'"'),b.resolve(t.result,t.tag)?(t.result=b.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):pe(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||m}function VK(t){var e=t.position,r,n,i,o=!1,s;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(s=t.input.charCodeAt(t.position))!==0&&(vt(t,!0,-1),s=t.input.charCodeAt(t.position),!(t.lineIndent>0||s!==37));){for(o=!0,s=t.input.charCodeAt(++t.position),r=t.position;s!==0&&!_r(s);)s=t.input.charCodeAt(++t.position);for(n=t.input.slice(r,t.position),i=[],n.length<1&&pe(t,"directive name must not be less than one character in length");s!==0;){for(;ra(s);)s=t.input.charCodeAt(++t.position);if(s===35){do s=t.input.charCodeAt(++t.position);while(s!==0&&!Qn(s));break}if(Qn(s))break;for(r=t.position;s!==0&&!_r(s);)s=t.input.charCodeAt(++t.position);i.push(t.input.slice(r,t.position))}s!==0&&rT(t),po.call(Xk,n)?Xk[n](t,n,i):Cf(t,'unknown document directive "'+n+'"')}if(vt(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,vt(t,!0,-1)):o&&pe(t,"directives end mark is expected"),_s(t,t.lineIndent-1,If,!1,!0),vt(t,!0,-1),t.checkLineBreaks&&_K.test(t.input.slice(e,t.position))&&Cf(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&Lf(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,vt(t,!0,-1));return}if(t.position<t.length-1)pe(t,"end of the stream or a document separator is expected");else return}function TP(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new MK(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,pe(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)VK(r);return r.documents}function BK(t,e,r){e!==null&&typeof e=="object"&&typeof r>"u"&&(r=e,e=null);var n=TP(t,r);if(typeof e!="function")return n;for(var i=0,o=n.length;i<o;i+=1)e(n[i])}function WK(t,e){var r=TP(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new wr("expected a single document in the stream, but found more")}}var $K=BK,jK=WK,vP={loadAll:$K,load:jK},bP=Object.prototype.toString,wP=Object.prototype.hasOwnProperty,iT=65279,qK=9,fl=10,zK=13,GK=32,KK=33,QK=34,ZS=35,ZK=37,YK=38,XK=39,JK=42,_P=44,e4=45,Nf=58,t4=61,r4=62,n4=63,i4=64,EP=91,RP=93,o4=96,kP=123,a4=124,PP=125,Kt={};Kt[0]="\\0";Kt[7]="\\a";Kt[8]="\\b";Kt[9]="\\t";Kt[10]="\\n";Kt[11]="\\v";Kt[12]="\\f";Kt[13]="\\r";Kt[27]="\\e";Kt[34]='\\"';Kt[92]="\\\\";Kt[133]="\\N";Kt[160]="\\_";Kt[8232]="\\L";Kt[8233]="\\P";var s4=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],c4=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function l4(t,e){var r,n,i,o,s,l,p;if(e===null)return{};for(r={},n=Object.keys(e),i=0,o=n.length;i<o;i+=1)s=n[i],l=String(e[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),p=t.compiledTypeMap.fallback[s],p&&wP.call(p.styleAliases,l)&&(l=p.styleAliases[l]),r[s]=l;return r}function p4(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else if(t<=4294967295)r="U",n=8;else throw new wr("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+kt.repeat("0",n-e.length)+e}var u4=1,ml=2;function f4(t){this.schema=t.schema||tT,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=kt.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=l4(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?ml:u4,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function tP(t,e){for(var r=kt.repeat(" ",e),n=0,i=-1,o="",s,l=t.length;n<l;)i=t.indexOf(`
`,n),i===-1?(s=t.slice(n),n=l):(s=t.slice(n,i+1),n=i+1),s.length&&s!==`
`&&(o+=r),o+=s;return o}function YS(t,e){return`
`+kt.repeat(" ",t.indent*e)}function m4(t,e){var r,n,i;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(i=t.implicitTypes[r],i.resolve(e))return!0;return!1}function Of(t){return t===GK||t===qK}function dl(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==iT||65536<=t&&t<=1114111}function rP(t){return dl(t)&&t!==iT&&t!==zK&&t!==fl}function nP(t,e,r){var n=rP(t),i=n&&!Of(t);return(r?n:n&&t!==_P&&t!==EP&&t!==RP&&t!==kP&&t!==PP)&&t!==ZS&&!(e===Nf&&!i)||rP(e)&&!Of(e)&&t===ZS||e===Nf&&i}function d4(t){return dl(t)&&t!==iT&&!Of(t)&&t!==e4&&t!==n4&&t!==Nf&&t!==_P&&t!==EP&&t!==RP&&t!==kP&&t!==PP&&t!==ZS&&t!==YK&&t!==JK&&t!==KK&&t!==a4&&t!==t4&&t!==r4&&t!==XK&&t!==QK&&t!==ZK&&t!==i4&&t!==o4}function h4(t){return!Of(t)&&t!==Nf}function pl(t,e){var r=t.charCodeAt(e),n;return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function AP(t){var e=/^\n* /;return e.test(t)}var MP=1,XS=2,DP=3,FP=4,vs=5;function g4(t,e,r,n,i,o,s,l){var p,u=0,m=null,d=!1,g=!1,x=n!==-1,b=-1,v=d4(pl(t,0))&&h4(pl(t,t.length-1));if(e||s)for(p=0;p<t.length;u>=65536?p+=2:p++){if(u=pl(t,p),!dl(u))return vs;v=v&&nP(u,m,l),m=u}else{for(p=0;p<t.length;u>=65536?p+=2:p++){if(u=pl(t,p),u===fl)d=!0,x&&(g=g||p-b-1>n&&t[b+1]!==" ",b=p);else if(!dl(u))return vs;v=v&&nP(u,m,l),m=u}g=g||x&&p-b-1>n&&t[b+1]!==" "}return!d&&!g?v&&!s&&!i(t)?MP:o===ml?vs:XS:r>9&&AP(t)?vs:s?o===ml?vs:XS:g?FP:DP}function y4(t,e,r,n,i){t.dump=function(){if(e.length===0)return t.quotingType===ml?'""':"''";if(!t.noCompatMode&&(s4.indexOf(e)!==-1||c4.test(e)))return t.quotingType===ml?'"'+e+'"':"'"+e+"'";var o=t.indent*Math.max(1,r),s=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),l=n||t.flowLevel>-1&&r>=t.flowLevel;function p(u){return m4(t,u)}switch(g4(e,l,t.indent,s,p,t.quotingType,t.forceQuotes&&!n,i)){case MP:return e;case XS:return"'"+e.replace(/'/g,"''")+"'";case DP:return"|"+iP(e,t.indent)+oP(tP(e,o));case FP:return">"+iP(e,t.indent)+oP(tP(x4(e,s),o));case vs:return'"'+S4(e)+'"';default:throw new wr("impossible error: invalid scalar style")}}()}function iP(t,e){var r=AP(t)?String(e):"",n=t[t.length-1]===`
`,i=n&&(t[t.length-2]===`
`||t===`
`),o=i?"+":n?"":"-";return r+o+`
`}function oP(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function x4(t,e){for(var r=/(\n+)([^\n]*)/g,n=function(){var u=t.indexOf(`
`);return u=u!==-1?u:t.length,r.lastIndex=u,aP(t.slice(0,u),e)}(),i=t[0]===`
`||t[0]===" ",o,s;s=r.exec(t);){var l=s[1],p=s[2];o=p[0]===" ",n+=l+(!i&&!o&&p!==""?`
`:"")+aP(p,e),i=o}return n}function aP(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,n,i=0,o,s=0,l=0,p="";n=r.exec(t);)l=n.index,l-i>e&&(o=s>i?s:l,p+=`
`+t.slice(i,o),i=o+1),s=l;return p+=`
`,t.length-i>e&&s>i?p+=t.slice(i,s)+`
`+t.slice(s+1):p+=t.slice(i),p.slice(1)}function S4(t){for(var e="",r=0,n,i=0;i<t.length;r>=65536?i+=2:i++)r=pl(t,i),n=Kt[r],!n&&dl(r)?(e+=t[i],r>=65536&&(e+=t[i+1])):e+=n||p4(r);return e}function T4(t,e,r){var n="",i=t.tag,o,s,l;for(o=0,s=r.length;o<s;o+=1)l=r[o],t.replacer&&(l=t.replacer.call(r,String(o),l)),(Ai(t,e,l,!1,!1)||typeof l>"u"&&Ai(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=i,t.dump="["+n+"]"}function sP(t,e,r,n){var i="",o=t.tag,s,l,p;for(s=0,l=r.length;s<l;s+=1)p=r[s],t.replacer&&(p=t.replacer.call(r,String(s),p)),(Ai(t,e+1,p,!0,!0,!1,!0)||typeof p>"u"&&Ai(t,e+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=YS(t,e)),t.dump&&fl===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=o,t.dump=i||"[]"}function v4(t,e,r){var n="",i=t.tag,o=Object.keys(r),s,l,p,u,m;for(s=0,l=o.length;s<l;s+=1)m="",n!==""&&(m+=", "),t.condenseFlow&&(m+='"'),p=o[s],u=r[p],t.replacer&&(u=t.replacer.call(r,p,u)),Ai(t,e,p,!1,!1)&&(t.dump.length>1024&&(m+="? "),m+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),Ai(t,e,u,!1,!1)&&(m+=t.dump,n+=m));t.tag=i,t.dump="{"+n+"}"}function b4(t,e,r,n){var i="",o=t.tag,s=Object.keys(r),l,p,u,m,d,g;if(t.sortKeys===!0)s.sort();else if(typeof t.sortKeys=="function")s.sort(t.sortKeys);else if(t.sortKeys)throw new wr("sortKeys must be a boolean or a function");for(l=0,p=s.length;l<p;l+=1)g="",(!n||i!=="")&&(g+=YS(t,e)),u=s[l],m=r[u],t.replacer&&(m=t.replacer.call(r,u,m)),Ai(t,e+1,u,!0,!0,!0)&&(d=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,d&&(t.dump&&fl===t.dump.charCodeAt(0)?g+="?":g+="? "),g+=t.dump,d&&(g+=YS(t,e)),Ai(t,e+1,m,!0,d)&&(t.dump&&fl===t.dump.charCodeAt(0)?g+=":":g+=": ",g+=t.dump,i+=g));t.tag=o,t.dump=i||"{}"}function cP(t,e,r){var n,i,o,s,l,p;for(i=r?t.explicitTypes:t.implicitTypes,o=0,s=i.length;o<s;o+=1)if(l=i[o],(l.instanceOf||l.predicate)&&(!l.instanceOf||typeof e=="object"&&e instanceof l.instanceOf)&&(!l.predicate||l.predicate(e))){if(r?l.multi&&l.representName?t.tag=l.representName(e):t.tag=l.tag:t.tag="?",l.represent){if(p=t.styleMap[l.tag]||l.defaultStyle,bP.call(l.represent)==="[object Function]")n=l.represent(e,p);else if(wP.call(l.represent,p))n=l.represent[p](e,p);else throw new wr("!<"+l.tag+'> tag resolver accepts not "'+p+'" style');t.dump=n}return!0}return!1}function Ai(t,e,r,n,i,o,s){t.tag=null,t.dump=r,cP(t,r,!1)||cP(t,r,!0);var l=bP.call(t.dump),p=n,u;n&&(n=t.flowLevel<0||t.flowLevel>e);var m=l==="[object Object]"||l==="[object Array]",d,g;if(m&&(d=t.duplicates.indexOf(r),g=d!==-1),(t.tag!==null&&t.tag!=="?"||g||t.indent!==2&&e>0)&&(i=!1),g&&t.usedDuplicates[d])t.dump="*ref_"+d;else{if(m&&g&&!t.usedDuplicates[d]&&(t.usedDuplicates[d]=!0),l==="[object Object]")n&&Object.keys(t.dump).length!==0?(b4(t,e,t.dump,i),g&&(t.dump="&ref_"+d+t.dump)):(v4(t,e,t.dump),g&&(t.dump="&ref_"+d+" "+t.dump));else if(l==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!s&&e>0?sP(t,e-1,t.dump,i):sP(t,e,t.dump,i),g&&(t.dump="&ref_"+d+t.dump)):(T4(t,e,t.dump),g&&(t.dump="&ref_"+d+" "+t.dump));else if(l==="[object String]")t.tag!=="?"&&y4(t,t.dump,e,o,p);else{if(l==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new wr("unacceptable kind of an object to dump "+l)}t.tag!==null&&t.tag!=="?"&&(u=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?u="!"+u:u.slice(0,18)==="tag:yaml.org,2002:"?u="!!"+u.slice(18):u="!<"+u+">",t.dump=u+" "+t.dump)}return!0}function w4(t,e){var r=[],n=[],i,o;for(JS(t,r,n),i=0,o=n.length;i<o;i+=1)e.duplicates.push(r[n[i]]);e.usedDuplicates=new Array(o)}function JS(t,e,r){var n,i,o;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(e.push(t),Array.isArray(t))for(i=0,o=t.length;i<o;i+=1)JS(t[i],e,r);else for(n=Object.keys(t),i=0,o=n.length;i<o;i+=1)JS(t[n[i]],e,r)}function _4(t,e){e=e||{};var r=new f4(e);r.noRefs||w4(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),Ai(r,0,n,!0,!0)?r.dump+`
`:""}var E4=_4,R4={dump:E4};function oT(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var IP=Ht;var CP=tT,k4=vP.load,nde=vP.loadAll,NP=R4.dump;var ide=oT("safeLoad","load"),ode=oT("safeLoadAll","loadAll"),ade=oT("safeDump","dump");var Uf=class{constructor(e,r){this.data=e;this.opts=r}represent(){let e=NP(this.data,Object.assign({replacer:D4,schema:A4},this.opts));return e=e.trim(),e.includes(`
`)&&(e=`
`+e),e}},P4=new IP("!format",{kind:"scalar",resolve:()=>!1,instanceOf:Uf,represent:t=>t.represent()}),A4=CP.extend({implicit:[P4]}),aT=t=>typeof t=="object"&&t!=null;function M4(t){if(aT(t))return Object.values(t).every(e=>!aT(e)&&!Array.isArray(e));if(Array.isArray(t))return t.every(e=>!aT(e)&&!Array.isArray(e))}function D4(t,e){return t===""?e:M4(e)?new Uf(e,{flowLevel:0}):e}var sT=["addSelection","addSelectionAfter","addSelectionBefore","breakLine","clearAndSetSelection","copyToClipboard","cutToClipboard","decrement","deselect","editNewLineAfter","editNewLineBefore","experimental.setInstanceReference","extractVariable","findInDocument","findInWorkspace","flashTargets","foldRegion","followLink","followLinkAside","gitAccept","gitRevert","gitStage","gitUnstage","increment","indentLine","insertCopyAfter","insertCopyBefore","insertEmptyLineAfter","insertEmptyLineBefore","insertEmptyLinesAround","joinLines","outdentLine","randomizeTargets","remove","rename","revealDefinition","revealTypeDefinition","reverseTargets","scrollToBottom","scrollToCenter","scrollToTop","setSelection","setSelectionAfter","setSelectionBefore","showDebugHover","showHover","showQuickFix","showReferences","sortTargets","toggleLineBreakpoint","toggleLineComment","unfoldRegion","private.getTargets","private.setKeyboardTarget","private.showParseTree"],I4=["callAsFunction","editNew","executeCommand","generateSnippet","getText","highlight","insertSnippet","moveToTarget","pasteFromClipboard","replace","replaceWithTarget","rewrapWithPairedDelimiter","swapTargets","wrapWithPairedDelimiter","wrapWithSnippet","parsed"],LP=[...sT,...I4];var C4=["angleBrackets","backtickQuotes","curlyBrackets","doubleQuotes","escapedDoubleQuotes","escapedParentheses","escapedSingleQuotes","escapedSquareBrackets","parentheses","singleQuotes","squareBrackets","tripleBacktickQuotes","tripleDoubleQuotes","tripleSingleQuotes"],N4=["string","any","collectionBoundary"],Hf=[...C4,...N4],na=["argumentOrParameter","anonymousFunction","attribute","branch","class","className","collectionItem","collectionKey","comment","private.fieldAccess","functionCall","functionCallee","functionName","ifStatement","instance","list","map","name","namedFunction","regularExpression","statement","string","type","value","condition","section","sectionLevelOne","sectionLevelTwo","sectionLevelThree","sectionLevelFour","sectionLevelFive","sectionLevelSix","selector","private.switchStatementSubject","unit","xmlBothTags","xmlElement","xmlEndTag","xmlStartTag","part","chapter","subSection","subSubSection","namedParagraph","subParagraph","environment","character","word","token","identifier","line","sentence","paragraph","boundedParagraph","document","nonWhitespaceSequence","boundedNonWhitespaceSequence","url","notebookCell","command","textFragment","disqualifyDelimiter","pairDelimiter"];function UP(t){return na.includes(t.type)}var HP=["simpleScopeTypeType","complexScopeTypeType","customRegex","pairedDelimiter","action","customAction","grapheme"],hl=class extends Error{constructor(e){super(e),this.name="NeedsInitialTalonUpdateError"}},Es=class extends Error{constructor(){super("Custom spoken forms are not currently supported in this ide"),this.name="DisabledCustomSpokenFormsError"}};function gl(t){return t.replace(/([A-Z])/g," $1").split(" ").map(e=>e.toLowerCase()).join(" ")}function ia(t){return t.version>=7}var uo=class{constructor(e){this.hashFunction=e;this.map={}}hash(e){return this.hashFunction(e).join("\0")}set(e,r){return this.map[this.hash(e)]=r,this}has(e){return this.hash(e)in this.map}get(e){return this.map[this.hash(e)]}delete(e){return delete this.map[this.hash(e)],this}clear(){return this.map={},this}};var Rs=class extends Map{constructor(r){super();this.getDefaultValue=r}get(r){let n=super.get(r);if(n!=null)return n;let i=this.getDefaultValue(r);return this.set(r,i),i}};function VP(...t){return{dispose(){t.forEach(({dispose:e})=>{try{e()}catch(r){console.error(r)}})}}}function yl(t){return typeof t=="string"||t instanceof String}function Vf(t){let[e,...r]=t;return L4(e,r)}function L4(t,e){let r;if(yl(t)){let n=t,[i,o,...s]=e;r={version:0,spokenForm:n,action:i,targets:o,extraArgs:s,usePrePhraseSnapshot:!1}}else r=t;return r}function xl(t,e){let r=new Map;return t.forEach(n=>{let i=e(n),o;r.has(i)?o=r.get(i):(o=[],r.set(i,o)),o.push(n)}),r}function BP(t){for(let e of t)return!1;return!0}function Mi(t){return Object.keys(t)}function Sl(t,e){return`${t}.${e}`}function WP(t,e,r){if(t.length<2)return[...t];if(t.length===2)return e(t[0],t[1])?[t[0]]:[...t];let n=[],i=t.reduce((o,s)=>{let l=r(s),p=o.get(l);return p==null?(o.set(l,[s]),o):(o.get(l).push(s),p.length===2&&n.push(l),o)},new Map);return n.length===0?[...t]:(n.forEach(o=>{i.set(o,tl(i.get(o),e))}),t.flatMap(o=>{let s=r(o),l=i.get(s);if(l==null||l.length===0)return[];let p=l[0];return e(p,o)?(l.shift(),p):[]}))}function oa(t,e){if(t.length!==e.length)throw new Error("Lists must have the same length");return t.map((r,n)=>[r,e[n]])}var KP=Symbol.for("immer-nothing"),$P=Symbol.for("immer-draftable"),$r=Symbol.for("immer-state"),U4=process.env.NODE_ENV!=="production"?[function(t){return`The plugin for '${t}' has not been loaded into Immer. To enable the plugin, import and call \`enable${t}()\` when initializing your application.`},function(t){return`produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '${t}'`},"This object has been frozen and should not be mutated",function(t){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+t},"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.","Immer forbids circular references","The first or second argument to `produce` must be a function","The third argument to `produce` must be a function or undefined","First argument to `createDraft` must be a plain object, an array, or an immerable object","First argument to `finishDraft` must be a draft returned by `createDraft`",function(t){return`'current' expects a draft, got: ${t}`},"Object.defineProperty() cannot be used on an Immer draft","Object.setPrototypeOf() cannot be used on an Immer draft","Immer only supports deleting array indices","Immer only supports setting array indices and the 'length' property",function(t){return`'original' expects a draft, got: ${t}`}]:[];function Er(t,...e){if(process.env.NODE_ENV!=="production"){let r=U4[t],n=typeof r=="function"?r.apply(null,e):r;throw new Error(`[Immer] ${n}`)}throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var ks=Object.getPrototypeOf;function Ps(t){return!!t&&!!t[$r]}function sa(t){return t?QP(t)||Array.isArray(t)||!!t[$P]||!!t.constructor?.[$P]||qf(t)||zf(t):!1}var H4=Object.prototype.constructor.toString();function QP(t){if(!t||typeof t!="object")return!1;let e=ks(t);if(e===null)return!0;let r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===H4}function Bf(t,e){jf(t)===0?Reflect.ownKeys(t).forEach(r=>{e(r,t[r],t)}):t.forEach((r,n)=>e(n,r,t))}function jf(t){let e=t[$r];return e?e.type_:Array.isArray(t)?1:qf(t)?2:zf(t)?3:0}function pT(t,e){return jf(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function ZP(t,e,r){let n=jf(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function V4(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function qf(t){return t instanceof Map}function zf(t){return t instanceof Set}function aa(t){return t.copy_||t.base_}function uT(t,e){if(qf(t))return new Map(t);if(zf(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);let r=QP(t);if(e===!0||e==="class_only"&&!r){let n=Object.getOwnPropertyDescriptors(t);delete n[$r];let i=Reflect.ownKeys(n);for(let o=0;o<i.length;o++){let s=i[o],l=n[s];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[s]={configurable:!0,writable:!0,enumerable:l.enumerable,value:t[s]})}return Object.create(ks(t),n)}else{let n=ks(t);if(n!==null&&r)return{...t};let i=Object.create(n);return Object.assign(i,t)}}function gT(t,e=!1){return Gf(t)||Ps(t)||!sa(t)||(jf(t)>1&&(t.set=t.add=t.clear=t.delete=B4),Object.freeze(t),e&&Object.entries(t).forEach(([r,n])=>gT(n,!0))),t}function B4(){Er(2)}function Gf(t){return Object.isFrozen(t)}var W4={};function ca(t){let e=W4[t];return e||Er(0,t),e}var Tl;function YP(){return Tl}function $4(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function jP(t,e){e&&(ca("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function fT(t){mT(t),t.drafts_.forEach(j4),t.drafts_=null}function mT(t){t===Tl&&(Tl=t.parent_)}function qP(t){return Tl=$4(Tl,t)}function j4(t){let e=t[$r];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function zP(t,e){e.unfinalizedDrafts_=e.drafts_.length;let r=e.drafts_[0];return t!==void 0&&t!==r?(r[$r].modified_&&(fT(e),Er(4)),sa(t)&&(t=Wf(e,t),e.parent_||$f(e,t)),e.patches_&&ca("Patches").generateReplacementPatches_(r[$r].base_,t,e.patches_,e.inversePatches_)):t=Wf(e,r,[]),fT(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==KP?t:void 0}function Wf(t,e,r){if(Gf(e))return e;let n=e[$r];if(!n)return Bf(e,(i,o)=>GP(t,n,e,i,o,r)),e;if(n.scope_!==t)return e;if(!n.modified_)return $f(t,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;let i=n.copy_,o=i,s=!1;n.type_===3&&(o=new Set(i),i.clear(),s=!0),Bf(o,(l,p)=>GP(t,n,i,l,p,r,s)),$f(t,i,!1),r&&t.patches_&&ca("Patches").generatePatches_(n,r,t.patches_,t.inversePatches_)}return n.copy_}function GP(t,e,r,n,i,o,s){if(process.env.NODE_ENV!=="production"&&i===r&&Er(5),Ps(i)){let l=o&&e&&e.type_!==3&&!pT(e.assigned_,n)?o.concat(n):void 0,p=Wf(t,i,l);if(ZP(r,n,p),Ps(p))t.canAutoFreeze_=!1;else return}else s&&r.add(i);if(sa(i)&&!Gf(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;Wf(t,i),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&$f(t,i)}}function $f(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&gT(e,r)}function q4(t,e){let r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:YP(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1},i=n,o=yT;r&&(i=[n],o=vl);let{revoke:s,proxy:l}=Proxy.revocable(i,o);return n.draft_=l,n.revoke_=s,l}var yT={get(t,e){if(e===$r)return t;let r=aa(t);if(!pT(r,e))return z4(t,r,e);let n=r[e];return t.finalized_||!sa(n)?n:n===cT(t.base_,e)?(lT(t),t.copy_[e]=hT(n,t)):n},has(t,e){return e in aa(t)},ownKeys(t){return Reflect.ownKeys(aa(t))},set(t,e,r){let n=XP(aa(t),e);if(n?.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){let i=cT(aa(t),e),o=i?.[$r];if(o&&o.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(V4(r,i)&&(r!==void 0||pT(t.base_,e)))return!0;lT(t),dT(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return cT(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,lT(t),dT(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){let r=aa(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){Er(11)},getPrototypeOf(t){return ks(t.base_)},setPrototypeOf(){Er(12)}},vl={};Bf(yT,(t,e)=>{vl[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});vl.deleteProperty=function(t,e){return process.env.NODE_ENV!=="production"&&isNaN(parseInt(e))&&Er(13),vl.set.call(this,t,e,void 0)};vl.set=function(t,e,r){return process.env.NODE_ENV!=="production"&&e!=="length"&&isNaN(parseInt(e))&&Er(14),yT.set.call(this,t[0],e,r,t[0])};function cT(t,e){let r=t[$r];return(r?aa(r):t)[e]}function z4(t,e,r){let n=XP(e,r);return n?"value"in n?n.value:n.get?.call(t.draft_):void 0}function XP(t,e){if(!(e in t))return;let r=ks(t);for(;r;){let n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=ks(r)}}function dT(t){t.modified_||(t.modified_=!0,t.parent_&&dT(t.parent_))}function lT(t){t.copy_||(t.copy_=uT(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var G4=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){let o=r;r=e;let s=this;return function(p=o,...u){return s.produce(p,m=>r.call(this,m,...u))}}typeof r!="function"&&Er(6),n!==void 0&&typeof n!="function"&&Er(7);let i;if(sa(e)){let o=qP(this),s=hT(e,void 0),l=!0;try{i=r(s),l=!1}finally{l?fT(o):mT(o)}return jP(o,n),zP(i,o)}else if(!e||typeof e!="object"){if(i=r(e),i===void 0&&(i=e),i===KP&&(i=void 0),this.autoFreeze_&&gT(i,!0),n){let o=[],s=[];ca("Patches").generateReplacementPatches_(e,i,o,s),n(o,s)}return i}else Er(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(s,...l)=>this.produceWithPatches(s,p=>e(p,...l));let n,i;return[this.produce(e,r,(s,l)=>{n=s,i=l}),n,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){sa(t)||Er(8),Ps(t)&&(t=K4(t));let e=qP(this),r=hT(t,void 0);return r[$r].isManual_=!0,mT(e),r}finishDraft(t,e){let r=t&&t[$r];(!r||!r.isManual_)&&Er(9);let{scope_:n}=r;return jP(n,e),zP(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){let i=e[r];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}r>-1&&(e=e.slice(r+1));let n=ca("Patches").applyPatches_;return Ps(t)?n(t,e):this.produce(t,i=>n(i,e))}};function hT(t,e){let r=qf(t)?ca("MapSet").proxyMap_(t,e):zf(t)?ca("MapSet").proxySet_(t,e):q4(t,e);return(e?e.scope_:YP()).drafts_.push(r),r}function K4(t){return Ps(t)||Er(10,t),JP(t)}function JP(t){if(!sa(t)||Gf(t))return t;let e=t[$r],r;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=uT(t,e.scope_.immer_.useStrictShallowCopy_)}else r=uT(t,!0);return Bf(r,(n,i)=>{ZP(r,n,JP(i))}),e&&(e.finalized_=!1),r}var jr=new G4,Kf=jr.produce,iye=jr.produceWithPatches.bind(jr),oye=jr.setAutoFreeze.bind(jr),aye=jr.setUseStrictShallowCopy.bind(jr),sye=jr.applyPatches.bind(jr),cye=jr.createDraft.bind(jr),lye=jr.finishDraft.bind(jr);var sr=Sr(vA(),1),Kye=sr.default.v1,Qye=sr.default.v1ToV6,Zye=sr.default.v3,bA=sr.default.v4,Yye=sr.default.v5,Xye=sr.default.v6,Jye=sr.default.v6ToV1,exe=sr.default.v7,txe=sr.default.NIL,rxe=sr.default.MAX,nxe=sr.default.version,ixe=sr.default.validate,oxe=sr.default.stringify,axe=sr.default.parse;function wA(t,e,r){if(e>=t.length)throw Error(`Expected at least ${e+1} ${r} but received only ${t.length}`);return t[e]}function mm(t,e){if(Array.isArray(t))return t.map(r=>mm(r,e));if(typeof t=="object"&&t!=null){if(g9(t))return wA(e,t.index,"placeholder value");let r={};for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=mm(t[n],e));return r}return t}function g9(t){return typeof t=="object"&&t!=null&&"type"in t&&t.type==="placeholder"}var Tm=Sr(EA(),1);var y9={blue:"blue",green:"green",red:"red",pink:"pink",yellow:"yellow",userColor1:"navy",userColor2:"apricot",default:null},x9={ex:"ex",fox:"fox",wing:"wing",hole:"hole",frame:"frame",curve:"curve",eye:"eye",play:"play",crosshairs:"cross",bolt:"bolt",default:null},hm={cursor:"this",that:"that",source:"source",nothing:"nothing",keyboard:null,explicit:null,decoratedSymbol:null,lineNumber:null,range:null,target:null},gm={modulo100:"row",relativeUp:"up",relativeDown:"down"};function RA(t){let e=y9[t];if(e==null)throw Error(`Unknown hat color '${t}'`);return e}function kA(t){let e=x9[t];if(e==null)throw Error(`Unknown hat shape '${t}'`);return e}function PT(t,e){return Object.fromEntries(Object.entries(t).map(([r,n])=>[r,Object.fromEntries(Object.entries(n).map(([i,o])=>[i,e(o,r,i)]))]))}var S9=Object.fromEntries("air bat cap drum each fine gust harp sit jury crunch look made near odd pit quench red sun trap urge vest whale plex yank zip".split(" ").map((t,e)=>[String.fromCharCode(97+e),t])),T9=Object.fromEntries("zero one two three four five six seven eight nine".split(" ").map((t,e)=>[e.toString(),t])),v9={".":"dot",",":"comma",";":"semicolon",":":"colon","!":"bang","*":"asterisk","@":"at sign","&":"ampersand","?":"question","/":"slash","\\":"backslash","-":"dash","=":"equals","+":"plus","~":"tilde",_:"underscore","#":"hash","%":"percent","^":"caret","|":"pipe",$:"dollar","\xA3":"pound","'":"quote",'"':"double quote","`":"back tick","(":"paren",")":"right paren","{":"brace","}":"right brace","[":"square","]":"right square","<":"angle",">":"right angle","\uFFFD":"special"},PA={...S9,...T9,...v9};function fo(...t){return{defaultSpokenForms:t,isDisabledByDefault:!0,isPrivate:!1}}function Pt(...t){return{defaultSpokenForms:t,isDisabledByDefault:!0,isPrivate:!0}}var AA={pairedDelimiter:{curlyBrackets:"curly",angleBrackets:"diamond",escapedDoubleQuotes:"escaped quad",escapedSingleQuotes:"escaped twin",escapedParentheses:"escaped round",escapedSquareBrackets:"escaped box",doubleQuotes:"quad",parentheses:"round",backtickQuotes:"skis",squareBrackets:"box",singleQuotes:"twin",tripleDoubleQuotes:Pt("triple quad"),tripleSingleQuotes:Pt("triple twin"),tripleBacktickQuotes:Pt("triple skis"),any:"pair",string:"string",whitespace:"void",collectionBoundary:Pt("collection boundary")},simpleScopeTypeType:{argumentOrParameter:"arg",attribute:"attribute",functionCall:"call",functionCallee:"callee",className:"class name",class:"class",comment:"comment",functionName:"funk name",namedFunction:"funk",ifStatement:"if state",instance:"instance",collectionItem:"item",collectionKey:"key",anonymousFunction:"lambda",list:"list",map:"map",name:"name",regularExpression:"regex",section:"section",sectionLevelOne:fo("one section"),sectionLevelTwo:fo("two section"),sectionLevelThree:fo("three section"),sectionLevelFour:fo("four section"),sectionLevelFive:fo("five section"),sectionLevelSix:fo("six section"),selector:"selector",statement:"state",branch:"branch",type:"type",value:"value",condition:"condition",unit:"unit",xmlElement:"element",xmlBothTags:"tags",xmlStartTag:"start tag",xmlEndTag:"end tag",part:"part",chapter:"chapter",subSection:"subsection",subSubSection:"subsubsection",namedParagraph:"paragraph",subParagraph:"subparagraph",environment:"environment",command:"command",character:"char",word:"sub",token:"token",identifier:"identifier",line:"line",sentence:"sentence",paragraph:"block",boundedParagraph:"short block",document:"file",nonWhitespaceSequence:"paint",boundedNonWhitespaceSequence:"short paint",url:"link",notebookCell:"cell",string:Pt("parse tree string"),textFragment:Pt("text fragment"),disqualifyDelimiter:Pt("disqualify delimiter"),pairDelimiter:Pt("pair delimiter"),"private.fieldAccess":Pt("access"),"private.switchStatementSubject":Pt("subject")},complexScopeTypeType:{glyph:"glyph"},surroundingPairForceDirection:{left:"left",right:"right"},simpleModifier:{excludeInterior:"bounds",toRawSelection:"just",leading:"leading",trailing:"trailing",keepContentFilter:"content",keepEmptyFilter:"empty",inferPreviousMark:"its",startOf:"start of",endOf:"end of",interiorOnly:"inside",visible:"visible",extendThroughStartOf:"head",extendThroughEndOf:"tail",everyScope:"every"},modifierExtra:{first:"first",last:"last",previous:"previous",next:"next",forward:"forward",backward:"backward",ancestor:"grand"},customRegex:{},action:{addSelection:"append",addSelectionAfter:"append post",addSelectionBefore:"append pre",breakLine:"break",scrollToBottom:"bottom",toggleLineBreakpoint:"break point",cutToClipboard:"carve",scrollToCenter:"center",clearAndSetSelection:"change",remove:"chuck",insertCopyBefore:"clone up",insertCopyAfter:"clone",toggleLineComment:"comment",copyToClipboard:"copy",scrollToTop:"crown",outdentLine:"dedent",revealDefinition:"define",editNewLineBefore:"drink",insertEmptyLineBefore:"drop",extractVariable:"extract",insertEmptyLineAfter:"float",foldRegion:"fold",followLink:"follow",followLinkAside:"follow split",flashTargets:"flash",deselect:"give",highlight:"highlight",showHover:"hover",increment:"increment",decrement:"decrement",indentLine:"indent",showDebugHover:"inspect",setSelectionAfter:"post",editNewLineAfter:"pour",setSelectionBefore:"pre",insertEmptyLinesAround:"puff",showQuickFix:"quick fix",showReferences:"reference",rename:"rename",reverseTargets:"reverse",findInDocument:"scout",findInWorkspace:"scout all",randomizeTargets:"shuffle",generateSnippet:"snippet make",sortTargets:"sort",setSelection:"take",revealTypeDefinition:"type deaf",unfoldRegion:"unfold",callAsFunction:"call",swapTargets:"swap",replaceWithTarget:"bring",moveToTarget:"move",wrapWithPairedDelimiter:"wrap",wrapWithSnippet:"wrap",rewrapWithPairedDelimiter:"repack",insertSnippet:"snippet",pasteFromClipboard:"paste",joinLines:"join",gitAccept:"git accept",gitRevert:"git revert",gitStage:"git stage",gitUnstage:"git unstage","private.showParseTree":Pt("parse tree"),"experimental.setInstanceReference":fo("from"),editNew:Pt("edit new"),executeCommand:Pt("execute command"),parsed:Pt("parsed"),getText:Pt("get text"),replace:Pt("replace"),"private.getTargets":Pt("get targets"),"private.setKeyboardTarget":Pt("set keyboard target")},customAction:{},grapheme:PA};var AT=PT(AA,t=>typeof t=="string"?{defaultSpokenForms:[t],isDisabledByDefault:!1,isPrivate:!1}:t),Fi=PT(AT,({defaultSpokenForms:t,isDisabledByDefault:e,isPrivate:r})=>({spokenForms:e?[]:t,isCustom:!1,defaultSpokenForms:t,requiresTalonUpdate:!1,isPrivate:r}));var xt={rangeExclusive:"between",rangeInclusive:"past",rangeExcludingStart:null,rangeExcludingEnd:"until",listConnective:"and",swapConnective:"with",sourceDestinationConnective:"to",before:"before",after:"after",verticalRange:"slice",previous:"previous",next:"next",forward:"forward",backward:"backward"};var FA=Sr(DA(),1),xm=class{constructor(e){this.mooLexer=FA.default.compile(e)}reset(e,r){let{mooState:n}=r??{};return this.mooLexer.reset(e,n),this}formatError(e,r){return this.mooLexer.formatError(e,r)}has(e){return this.mooLexer.has(e)}save(){return{mooState:this.mooLexer.save()}}next(){let e=this.mooLexer.next();return this.skipToken(e)?this.next():e}transform({value:e}){return e}skipToken(e){return e?.type==="ws"}};var Ii={};for(let t of sT){let{spokenForms:e}=Fi.action[t];for(let r of e)Ii[r]={type:"simpleActionName",value:t}}var b9=["replaceWithTarget","moveToTarget"];for(let t of b9){let{spokenForms:e}=Fi.action[t];for(let r of e)Ii[r]={type:"bringMove",value:t}}var w9=["before","after","to"];for(let t of w9){let e=xt[t==="to"?"sourceDestinationConnective":t];Ii[e]={type:"insertionMode",value:t}}for(let t of na){let{spokenForms:e}=Fi.simpleScopeTypeType[t];for(let r of e)Ii[r]={type:"simpleScopeTypeType",value:t}}for(let t of Hf){let{spokenForms:e}=Fi.pairedDelimiter[t];for(let r of e)Ii[r]={type:"pairedDelimiter",value:t}}for(let[t,e]of Object.entries(hm))e!=null&&(Ii[e]={type:"simpleMarkType",value:t});var Ci=new xm({ws:/[ \t]+/,placeholderTarget:{match:/<target\d*>/,value:t=>t.slice(7,-1)},token:{match:Object.keys(Ii),type:t=>Ii[t].type,value:t=>Ii[t].value}});function IA(t,e){return{name:t,target:e}}function CA(t,e,r){return{name:t,source:e,destination:r}}function Sm(t,e){let r={type:"primitive"};return t!=null&&(r.modifiers=t),e!=null&&(r.mark=e),r}function NA(t,e){return{type:"primitive",insertionMode:t,target:e}}function OA(t){return{type:"containingScope",scopeType:t}}function LA(t){return{type:t}}function UA(t){return{type:"surroundingPair",delimiter:t}}function HA(t){return{type:t}}function VA(t){return{type:"target",target:{type:"placeholder",index:t.length===0?0:parseInt(t)-1}}}function MT(t){return t[0]}var _9={Lexer:Ci,ParserRules:[{name:"main",symbols:["action"],postprocess:MT},{name:"action",symbols:[Ci.has("simpleActionName")?{type:"simpleActionName"}:simpleActionName,"target"],postprocess:([t,e])=>IA(t,e)},{name:"action",symbols:[Ci.has("bringMove")?{type:"bringMove"}:bringMove,"target","destination"],postprocess:([t,e,r])=>CA(t,e,r)},{name:"destination",symbols:["primitiveDestination"],postprocess:MT},{name:"destination",symbols:[Ci.has("insertionMode")?{type:"insertionMode"}:insertionMode,"target"],postprocess:([t,e])=>NA(t,e)},{name:"target",symbols:["primitiveTarget"],postprocess:MT},{name:"primitiveTarget$ebnf$1",symbols:["modifier"]},{name:"primitiveTarget$ebnf$1",symbols:["primitiveTarget$ebnf$1","modifier"],postprocess:t=>t[0].concat([t[1]])},{name:"primitiveTarget",symbols:["primitiveTarget$ebnf$1"],postprocess:([t])=>Sm(t,void 0)},{name:"primitiveTarget",symbols:["mark"],postprocess:([t])=>Sm(void 0,t)},{name:"primitiveTarget$ebnf$2",symbols:["modifier"]},{name:"primitiveTarget$ebnf$2",symbols:["primitiveTarget$ebnf$2","modifier"],postprocess:t=>t[0].concat([t[1]])},{name:"primitiveTarget",symbols:["primitiveTarget$ebnf$2","mark"],postprocess:([t,e])=>Sm(t,e)},{name:"modifier",symbols:["containingScopeModifier"],postprocess:([t])=>t},{name:"containingScopeModifier",symbols:["scopeType"],postprocess:([t])=>OA(t)},{name:"scopeType",symbols:[Ci.has("simpleScopeTypeType")?{type:"simpleScopeTypeType"}:simpleScopeTypeType],postprocess:([t])=>LA(t)},{name:"scopeType",symbols:[Ci.has("pairedDelimiter")?{type:"pairedDelimiter"}:pairedDelimiter],postprocess:([t])=>UA(t)},{name:"mark",symbols:[Ci.has("simpleMarkType")?{type:"simpleMarkType"}:simpleMarkType],postprocess:([t])=>HA(t)},{name:"mark",symbols:[Ci.has("placeholderTarget")?{type:"placeholderTarget"}:placeholderTarget],postprocess:([t])=>VA(t)}],ParserStart:"main"},BA=_9;function E9(){return new Tm.Parser(Tm.Grammar.fromCompiled(BA))}function WA(t){let e=E9();if(e.feed(t),e.results.length!==1)throw new Error(`Expected exactly one result, got ${e.results.length}`);return e.results[0]}function vm(t,e){let r=WA(t);return mm(r,e)}function El(t){switch(t.name){case"callAsFunction":return[t.callee,t.argument];case"replaceWithTarget":case"moveToTarget":return[t.source,...$A(t.destination)];case"swapTargets":return[t.target1,t.target2];case"pasteFromClipboard":case"insertSnippet":case"replace":case"editNew":return $A(t.destination);case"parsed":return El(vm(t.content,t.arguments));default:return[t.target]}}function $A(t){switch(t.type){case"list":return t.destinations.map(({target:e})=>e);case"primitive":return[t.target];case"implicit":return[]}}function FT(t){return t.flatMap(DT)}function DT(t){switch(t.type){case"primitive":return[t];case"list":return t.elements.flatMap(DT);case"range":return[t.anchor,t.active].flatMap(DT);case"implicit":return[]}}var R9={arrowFunction:"anonymousFunction",dictionary:"map",regex:"regularExpression"},k9={purple:"pink"};function P9(t){t.modifiers?.forEach(e=>{(e.type==="containingScope"||e.type==="everyScope")&&(e.scopeType.type=R9[e.scopeType.type]??e.scopeType.type)})}function A9(t){t.mark?.type==="decoratedSymbol"&&(t.mark.symbolColor=k9[t.mark.symbolColor]??t.mark.symbolColor)}function IT(t){FT(t).forEach(e=>{P9(e),A9(e)})}function jA(t){return{...t,version:1}}var M9={type:"primitive",mark:{type:"cursor"},selectionType:"token",position:"contents",modifier:{type:"identity"},insideOutsideType:"inside"},D9={type:"primitive",isImplicit:!0},qA=t=>Pi(t,M9)?D9:t;function zA(t){let e=t.action;return{spokenForm:t.spokenForm,action:{name:e,args:t.extraArgs},targets:I9(t.targets,e),usePrePhraseSnapshot:t.usePrePhraseSnapshot??!1,version:2}}function F9(t){switch(t.type){case"identity":return[];case"containingScope":{let{includeSiblings:e,scopeType:r,type:n,...i}=t;return[{type:e?"everyScope":"containingScope",scopeType:{type:r},...i}]}case"surroundingPair":{let{delimiterInclusion:e,...r}=t,n={type:"containingScope",scopeType:r};return e==="interiorOnly"||e==="excludeInterior"?n.scopeType.delimiter==="any"?[{type:e}]:[{type:e},n]:[n]}case"subpiece":{let{type:e,pieceType:r,...n}=t;return[{type:"ordinalRange",scopeType:{type:r},...n}]}case"head":return[{type:"extendThroughStartOf"}];case"tail":return[{type:"extendThroughEndOf"}];default:return[t]}}function CT(t,e){let{type:r,isImplicit:n,mark:i,insideOutsideType:o,modifier:s,selectionType:l,position:p}=t,u=[];if(p&&p!=="contents"&&(p==="before"?o==="inside"?u.push({type:"position",position:"start"}):e==="remove"?u.push({type:"leading"}):u.push({type:"position",position:"before"}):o==="inside"?u.push({type:"position",position:"end"}):e==="remove"?u.push({type:"trailing"}):u.push({type:"position",position:"after"})),l)switch(l){case"token":if(s?.type==="subpiece")break;case"line":if(i?.type==="lineNumber")break;default:u.push({type:"containingScope",scopeType:{type:l}})}return s&&u.push(...F9(s)),{type:r,isImplicit:n,modifiers:u.length>0?u:void 0,mark:i?.type==="cursorToken"?void 0:i}}function GA(t,e){switch(t.type){case"list":return{...t,elements:t.elements.map(r=>GA(r,e))};case"range":{let{type:r,rangeType:n,start:i,end:o,excludeStart:s,excludeEnd:l}=t;return{type:r,rangeType:n,anchor:CT(i,e),active:CT(o,e),excludeAnchor:s??!1,excludeActive:l??!1}}case"primitive":return CT(t,e)}}function I9(t,e){return t.map(r=>GA(r,e)).map(r=>r.type==="primitive"?qA(r):r)}function KA(t){return{...t,version:3,targets:t.targets.map(QA)}}function QA(t){switch(t.type){case"list":return{...t,elements:t.elements.map(e=>QA(e))};case"range":{let{anchor:e,active:r,...n}=t;return{anchor:NT(e),active:NT(r),...n}}case"primitive":return NT(t)}}function NT(t){let e=t.modifiers!=null?t.modifiers.map(N9):void 0;if(t.mark?.type==="lineNumber"){let{anchor:r,active:n}=t.mark;if(r.type!==n.type||r.lineNumber<0!=n.lineNumber<0)return{type:"range",anchor:{type:"primitive",mark:kl(r),modifiers:e},active:{type:"primitive",mark:kl(n)},excludeAnchor:!1,excludeActive:!1}}return{...t,mark:t.mark!=null?C9(t.mark):void 0,modifiers:e}}function C9(t){switch(t.type){case"lineNumber":return O9(t);default:return t}}function N9(t){switch(t.type){case"ordinalRange":return L9(t);default:return t}}function O9(t){return Pi(t.anchor,t.active)?kl(t.anchor):{type:"range",anchor:kl(t.anchor),active:kl(t.active)}}function L9(t){return t.anchor===t.active?Rl(t.scopeType,t.anchor):t.anchor===0&&t.active>t.anchor?Rl(t.scopeType,t.anchor,t.active-t.anchor+1):t.anchor<0&&t.active===-1?Rl(t.scopeType,t.anchor,-t.anchor):{type:"range",anchor:Rl(t.scopeType,t.anchor),active:Rl(t.scopeType,t.active),excludeAnchor:t.excludeAnchor,excludeActive:t.excludeActive}}function kl(t){return{type:"lineNumber",lineNumberType:t.type,lineNumber:t.lineNumber}}function Rl(t,e,r=1){return{type:"ordinalScope",scopeType:t,start:e,length:r}}function YA(t){return{...t,version:4,targets:t.targets.map(XA)}}function XA(t){switch(t.type){case"primitive":return ZA(t);case"range":{let{anchor:e,...r}=t;return{...r,anchor:ZA(e)}}case"list":{let{elements:e,...r}=t;return{...r,elements:e.map(XA)}}}}function ZA(t){return t.mark==null&&t.modifiers==null||t.isImplicit?{type:"implicit"}:t}function JA(t){return{...t,version:5,action:U9(t.action),targets:t.targets.map(bm)}}function U9(t){switch(t.name){case"wrapWithSnippet":{let[e,r]=H9(t.args[0]);return{name:"wrapWithSnippet",args:[{type:"named",name:e,variableName:r}]}}case"insertSnippet":{let[e,r]=t.args,n={type:"named",name:e};return r!=null&&(n.substitutions=r),{name:"insertSnippet",args:[n]}}default:return t}}function H9(t){let[e,r]=t.split(".");if(e==null||r==null)throw new Error("Snippet location missing '.'");return[e,r]}function bm(t){switch(t.type){case"implicit":return t;case"list":return{...t,elements:t.elements.map(bm)};case"range":return{...t,anchor:bm(t.anchor),active:bm(t.active)};case"primitive":return{...t,mark:t.mark!=null?OT(t.mark):void 0,modifiers:t.modifiers!=null&&t.modifiers.length>0?t.modifiers.map(LT):void 0}}}function OT(t){return t.type==="range"?{...t,anchor:OT(t.anchor),active:OT(t.active),excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1}:t}function LT(t){return t.type==="range"?{...t,anchor:LT(t.anchor),active:LT(t.active),excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1}:t}var V9={bring:"replaceWithTarget",call:"callAsFunction",clear:"clearAndSetSelection",commentLines:"toggleLineComment",copy:"copyToClipboard",cut:"cutToClipboard",delete:"remove",editNewLineAbove:"editNewLineBefore",editNewLineBelow:"editNewLineAfter",findInFiles:"findInWorkspace",fold:"foldRegion",indentLines:"indentLine",insertEmptyLineAbove:"insertEmptyLineBefore",insertEmptyLineBelow:"insertEmptyLineAfter",insertLineAfter:"editNewLineAfter",insertLineBefore:"editNewLineBefore",move:"moveToTarget",outdentLines:"outdentLine",paste:"pasteFromClipboard",reverse:"reverseTargets",setBreakpoint:"toggleLineBreakpoint",sort:"sortTargets",swap:"swapTargets",unfold:"unfoldRegion",use:"replaceWithTarget",wrap:"wrapWithPairedDelimiter"};function UT(t){let e=V9[t]??t;if(!LP.includes(e))throw new Error(`Unknown action name: ${e}`);return e}function eM(t){return{version:6,spokenForm:t.spokenForm,usePrePhraseSnapshot:t.usePrePhraseSnapshot,action:B9(t.action,t.targets)}}function B9(t,e){let r=UT(t.name);switch(r){case"replaceWithTarget":case"moveToTarget":return{name:r,source:un(e[0]),destination:Pl(e[1])};case"swapTargets":return{name:r,target1:un(e[0]),target2:un(e[1])};case"callAsFunction":return{name:r,callee:un(e[0]),argument:un(e[1])};case"pasteFromClipboard":return{name:r,destination:Pl(e[0])};case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return{name:r,left:t.args[0],right:t.args[1],target:un(e[0])};case"generateSnippet":return{name:r,snippetName:t.args?.[0],target:un(e[0])};case"insertSnippet":return{name:r,snippetDescription:t.args[0],destination:Pl(e[0])};case"wrapWithSnippet":return{name:r,snippetDescription:t.args[0],target:un(e[0])};case"executeCommand":return{name:r,commandId:t.args[0],options:t.args?.[1],target:un(e[0])};case"replace":return{name:r,replaceWith:t.args[0],destination:Pl(e[0])};case"highlight":{let n={name:r,target:un(e[0])};return t.args?.[0]!=null&&(n.highlightId=t.args?.[0]),n}case"editNew":return{name:r,destination:Pl(e[0])};case"getText":return{name:r,options:t.args?.[0],target:un(e[0])};case"parsed":throw Error("Parsed action should not be present in V5");default:return{name:r,target:un(e[0])}}}function un(t){switch(t.type){case"list":case"range":case"primitive":return W9(t);case"implicit":return t}}function W9(t){switch(t.type){case"list":return $9(t);case"range":case"primitive":return wm(t)}}function $9(t){return{...t,elements:t.elements.map(wm)}}function wm(t){switch(t.type){case"range":return tM(t);case"primitive":return _m(t)}}function tM(t){let{anchor:e,active:r}=t,n={type:"range",anchor:e.type==="implicit"?e:_m(e),active:_m(r),excludeAnchor:t.excludeAnchor,excludeActive:t.excludeActive};return t.rangeType!=null&&(n.rangeType=t.rangeType),n}function _m(t){let e={type:"primitive"},r=Q9(t.modifiers);return r!=null&&(e.modifiers=r),t.mark!=null&&(e.mark=t.mark),e}function Pl(t){switch(t.type){case"list":return j9(t);case"range":return q9(t);case"primitive":return z9(t);case"implicit":return G9()}}function j9(t){let e=[],r=[],n,i=()=>{r.length>0&&e.push({type:"primitive",insertionMode:n??"to",target:r.length===1?r[0]:{type:"list",elements:r}})};return t.elements.forEach(o=>{let s=Em(o);s!=null?(i(),r=[wm(o)],n=s):r.push(wm(o))}),i(),e.length>1?{type:"list",destinations:e}:e[0]}function q9(t){return{type:"primitive",insertionMode:Em(t.anchor)??"to",target:tM(t)}}function z9(t){return{type:"primitive",insertionMode:Em(t)??"to",target:_m(t)}}function G9(){return{type:"implicit"}}function Em(t){switch(t.type){case"implicit":return"to";case"primitive":return K9(t);case"range":return Em(t.anchor)}}function K9(t){let e=t.modifiers?.find(r=>r.type==="position");if(e!=null){if(t.modifiers.indexOf(e)!==0)throw Error("Position modifier has to be at first index");if(e?.position==="before"||e?.position==="after")return e.position}}function Q9(t){let e=[];if(t!=null)for(let r of t)r.type==="position"?r.position==="start"?e.push({type:"startOf"}):r.position==="end"&&e.push({type:"endOf"}):e.push(r);return e.length>0?e:void 0}function rM(t){return{...t,version:7}}function VT(t){let e=Z9(t,7),{action:r,usePrePhraseSnapshot:n=!1,spokenForm:i}=e;return{version:7,spokenForm:i,action:Kf(r,o=>{let s=El(o);IT(s),r.name}),usePrePhraseSnapshot:n}}function Z9(t,e){if(t.version>7)throw new Bu;for(;t.version<e;)switch(t.version){case 0:t=jA(t);break;case 1:t=zA(t);break;case 2:t=KA(t);break;case 3:t=YA(t);break;case 4:t=JA(t);break;case 5:t=eM(t);break;case 6:t=rM(t);break;default:throw new Error(`Can't upgrade from unknown version ${t.version}`)}return t}var BT;function Rm(t){BT=t}function k(){if(BT==null)throw Error("Tried to access ide before it was injected");return BT}var km=class{constructor(e){this.maxLength=e;this.stack=[];this.index=void 0}push(e){this.index!=null?this.stack.splice(this.index+1,this.stack.length-this.index-1,e):this.stack.push(e),this.stack.length>this.maxLength&&this.stack.shift(),this.index=this.stack.length-1}undo(){if(this.index!=null&&this.index>0)return this.index--,this.stack[this.index]}redo(){if(this.index!=null&&this.index<this.stack.length-1)return this.index++,this.stack[this.index]}};var Y9=25,Pm=class{constructor(){this.targetMap=new Map;this.targetHistory=new Rs(()=>new km(Y9));this.notifier=new Gt}set(e,r,{history:n=!1}={}){this.targetMap.set(e,r),n&&r!=null&&this.targetHistory.get(e).push(r),this.notifier.notifyListeners(e,r)}get(e){return this.targetMap.get(e)}undo(e){let r=this.targetHistory.get(e).undo();r!=null&&this.set(e,r,{history:!1})}redo(e){let r=this.targetHistory.get(e).redo();r!=null&&this.set(e,r,{history:!1})}onStoredTargets(e){for(let r of Ts)e(r,this.get(r));return this.notifier.registerListener(e)}};function bt(t){if(t.length===0)throw new Error("Require at least one target with this action");let e=t.map(r=>r.editor);if(new Set(e).size>1)throw new Error("Can only have one editor with this action");return e[0]}function kr(t){if(t.length!==1)throw new Error("Can only have one target with this action");return t[0]}async function Ni(t,e,r){return Promise.all(WT(t,e).map(([n,i])=>r(n,i)))}async function it(t,e){return Ni(t,r=>r.editor,e)}async function nM(t,e){let r=WT(t,i=>i.editor),n=[];for(let[i,o]of r)n.push(await e(i,o));return n}function iM(t){return WT(t,e=>e.editor)}function WT(t,e){let n=xl(t,i=>e(i).document.uri);return Array.from(n.values(),i=>[e(i[0]),i])}function fn(t,e){return e!=null?Rt(t,e).map(([n,i])=>({editor:n.editor,selection:n?.isReversed?new we(i.end,i.start):new we(i.start,i.end)})):t.map(n=>({editor:n.editor,selection:n.contentSelection}))}function mn(t,e){return t.textualType==="line"?Wr(e):ar(e)}function X9(t){return mn(t,t.contentRange)}function Fe(t,e,r,n=X9){return t.flashRanges(e.map(i=>({editor:i.editor,range:n(i),style:r})))}function mo(t,e){return new $(new ue(e.start.line,0),t.document.lineAt(e.end).range.end)}function $T(t,e){return e.isEmpty?0:t.document.offsetAt(e.end)-t.document.offsetAt(e.start)}function oM(t,e){let[r,n]=e instanceof ue?[e,e]:[e.start,e.end];return t.start.isBefore(r)&&t.end.isAfter(n)}function Oi(t,...e){for(let r of e)r!=null&&(t=t.union(r));return t}var Am=class t{constructor(e,r,n){this.target=e;this.insertionMode=r;this.contentRange=e5(e.contentRange,r),this.isBefore=r==="before",this.isLineDelimiter=e.insertionDelimiter.includes(`
`),this.indentationString=n??this.isLineDelimiter?J9(e.editor,e.contentRange):"",this.insertionPrefix=e.prefixRange!=null?e.editor.document.getText(e.prefixRange):void 0}get contentSelection(){return this.contentRange.toSelection(this.target.isReversed)}get editor(){return this.target.editor}get insertionDelimiter(){return this.target.insertionDelimiter}get isRaw(){return this.target.isRaw}withTarget(e){return new t(e,this.insertionMode,this.indentationString)}getEditNewActionType(){return this.insertionMode==="after"&&this.target.contentRange.isSingleLine&&this.insertionDelimiter===`
`&&this.insertionPrefix==null?"insertLineAfter":"edit"}constructChangeEdit(e,r=!1){return this.insertionMode==="before"||this.insertionMode==="after"?this.constructEditWithDelimiters(e,r):this.constructEditWithoutDelimiters(e)}constructEditWithDelimiters(e,r){let n=this.getEditRange(),i=this.getEditText(e,r),o=s=>this.updateRange(s,e,r);return{range:n,text:i,isReplace:this.insertionMode==="after",updateRange:o}}constructEditWithoutDelimiters(e){return{range:this.contentRange,text:e,updateRange:r=>r}}getEditRange(){let e=(()=>{let r=this.isBefore?Oi(this.target.contentRange,this.target.prefixRange).start:this.target.contentRange.end;if(this.isLineDelimiter){let n=this.editor.document.lineAt(r),i=this.isBefore?n.rangeTrimmed?.start??n.range.start:n.rangeTrimmed?.end??n.range.end;if(r.isEqual(i))return this.isBefore?n.range.start:n.range.end}return r})();return new $(e,e)}getEditText(e,r){let i=(r?"":this.indentationString)+(this.insertionPrefix??"")+e;return this.isBefore?i+this.insertionDelimiter:this.insertionDelimiter+i}updateRange(e,r,n){let i=this.editor.document.offsetAt(e.start)+(n?0:this.indentationString.length)+(this.insertionPrefix?.length??0),o=this.isBefore?i:i+this.getLengthOfInsertionDelimiter(),s=o+r.length;return new $(this.editor.document.positionAt(o),this.editor.document.positionAt(s))}getLengthOfInsertionDelimiter(){if(this.editor.document.eol==="CRLF"){let e=this.insertionDelimiter.match(/\n/g);if(e!=null)return this.insertionDelimiter.length+e.length}return this.insertionDelimiter.length}};function J9(t,e){let r=Number.MAX_SAFE_INTEGER,n="";for(let i=e.start.line;i<=e.end.line;++i){let o=t.document.lineAt(i);if(o.range.isEmpty||o.isEmptyOrWhitespace&&!e.isSingleLine)continue;let s=o.rangeTrimmed?.start??o.range.end;s.character<r&&(r=s.character,n=o.text.slice(0,r))}return n}function e5(t,e){switch(e){case"before":return t.start.toEmptyRange();case"after":return t.end.toEmptyRange();case"to":return t}}function As(t,e,r,n){return t5(t.contentRange,e.contentRange,r,n)}function t5(t,e,r,n){return new $(r?t.start:t.end,n?e.end:e.start)}function Ms(t,e,r,n){let i=r?t.contentRange.start:new ue(t.contentRange.end.line+1,0),o=n?e.contentRange.end:e.editor.document.lineAt(e.contentRange.start.line-1).range.end;return new $(i,o)}var Be=class t{constructor(e){this.hasExplicitScopeType=!0;this.hasExplicitRange=!0;this.isRaw=!1;this.isImplicit=!1;this.isNotebookCell=!1;this.textualType="token";this.state={editor:e.editor,isReversed:e.isReversed,contentRange:e.contentRange,thatTarget:e.thatTarget}}get editor(){return this.state.editor}get isReversed(){return this.state.isReversed}get thatTarget(){return this.state.thatTarget!=null?this.state.thatTarget.thatTarget:this}get contentText(){return this.editor.document.getText(this.contentRange)}get contentSelection(){return this.contentRange.toSelection(this.isReversed)}get contentRange(){return this.state.contentRange}constructRemovalEdit(){return{range:this.getRemovalRange(),text:"",updateRange:e=>e}}getRemovalHighlightRange(){return mn(this,this.getRemovalRange())}withThatTarget(e){return this.cloneWith({thatTarget:e})}withContentRange(e){return this.cloneWith({contentRange:e})}getInterior(){}getBoundary(){}cloneWith(e){let r=Object.getPrototypeOf(this).constructor;return new r({...this.getCloneParameters(),...e})}maybeCreateRichRangeTarget(e,r){let{constructor:n}=Object.getPrototypeOf(this);return new n({...this.getCloneParameters(),isReversed:e,contentRange:As(this,r,!0,!0)})}isEqual(e){return e instanceof t&&Pi(this.getEqualityParameters(),e.getEqualityParameters())}getEqualityParameters(){let{thatTarget:e,...r}=this.getCloneParameters();return{...r}}toDestination(e){return new Am(this,e)}toPlainObject(){return{type:this.type,contentRange:ll(this.contentRange),isReversed:this.isReversed,hasExplicitRange:this.hasExplicitRange}}};function Mm(t,e){return r5(t,e.start,e.end)}function r5(t,e,r){return{editor:t.editor,selection:n5(t.selection,e,r)}}function n5(t,e,r){return t.isReversed?new we(r,e):new we(e,r)}function pa(t,e){let{document:r}=t,n=r.getText(e),i=n.length-n.trimStart().length,o=n.length-n.trimEnd().length,s=r.offsetAt(e.start)+i,l=r.offsetAt(e.end)-o,p=r.positionAt(s),u=r.positionAt(l);return new $(p,u)}function Dm(t,e,r,n){return r==null?void 0:new t({editor:e,isReversed:n,contentRange:r})}var $e=class extends Be{constructor(r){super(r);this.type="PlainTarget";this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.textualType=r.textualType??"token",this.insertionDelimiter=r.insertionDelimiter??""}getCloneParameters(){return{...this.state,textualType:this.textualType,insertionDelimiter:this.insertionDelimiter}}};function Ds(t,e,r){return Dm($e,t,e,r)}var Fm=class extends Be{constructor(r){super(r);this.type="DocumentTarget";this.textualType="line";this.insertionDelimiter=`
`}getInterior(){return[new $e({editor:this.editor,isReversed:this.isReversed,contentRange:pa(this.editor,this.contentRange)})]}getRemovalRange(){return this.contentRange}getLeadingDelimiterTarget(){}getTrailingDelimiterTarget(){}getCloneParameters(){return this.state}};var cr=class t extends Be{constructor(){super(...arguments);this.type="LineTarget";this.textualType="line";this.insertionDelimiter=`
`;this.getRemovalHighlightRange=()=>Wr(this.fullLineContentRange)}get fullLineContentRange(){return mo(this.editor,this.contentRange)}getLeadingDelimiterTarget(){return Ds(this.editor,i5(this.editor,this.fullLineContentRange),this.isReversed)}getTrailingDelimiterTarget(){return Ds(this.editor,o5(this.editor,this.fullLineContentRange),this.isReversed)}getRemovalRange(){let r=this.fullLineContentRange,n=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return n==null?r:r.union(n.contentRange)}maybeCreateRichRangeTarget(r,n){return new t({editor:this.editor,isReversed:r,contentRange:Ms(this,n,!0,!0)})}getCloneParameters(){return this.state}};function i5(t,e){let{start:r}=e;return r.line>0?new $(t.document.lineAt(r.line-1).range.end,e.start):void 0}function o5(t,e){let{end:r}=e;return r.line+1<t.document.lineCount?new $(e.end,new ue(r.line+1,0)):void 0}function jT(t,e,r){return Dm(cr,t,e,r)}var Im=class t{constructor(e,r){this.target=e;this.insertionMode=r}get editor(){return this.target.editor}get contentRange(){return this.target.contentRange}get contentSelection(){return this.target.contentSelection}get insertionDelimiter(){return this.target.insertionDelimiter}get isRaw(){return this.target.isRaw}withTarget(e){return new t(e,this.insertionMode)}getEditNewActionType(){throw new Error("Method not implemented.")}constructChangeEdit(e){throw new Error("Method not implemented.")}};var Cm=class extends Be{constructor(r){super(r);this.type="NotebookCellTarget";this.insertionDelimiter=`
`;this.isNotebookCell=!0;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange}getCloneParameters(){return this.state}toDestination(r){return new Im(this,r)}};var ho=class t extends Be{constructor(){super(...arguments);this.type="ParagraphTarget";this.textualType="line";this.insertionDelimiter=`

`}getLeadingDelimiterTarget(){return jT(this.editor,a5(this.editor,this.fullLineContentRange),this.isReversed)}getTrailingDelimiterTarget(){return jT(this.editor,s5(this.editor,this.fullLineContentRange),this.isReversed)}getRemovalRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.contentRange.union(r.contentRange):this.contentRange;return new cr({contentRange:n,editor:this.editor,isReversed:this.isReversed}).getRemovalRange()}get fullLineContentRange(){return mo(this.editor,this.contentRange)}getRemovalHighlightRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.fullLineContentRange.union(r.contentRange):this.fullLineContentRange;return Wr(n)}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,contentRange:Ms(this,n,!0,!0)})}getCloneParameters(){return this.state}};function a5(t,e){let{document:r}=t,n=r.lineAt(e.start),i=c5(r,n);if(i!=null)return i.lineNumber+1===n.lineNumber?void 0:new $(new ue(i.lineNumber+1,0),r.lineAt(n.lineNumber-1).range.end);if(n.lineNumber>0)return new $(new ue(0,0),r.lineAt(n.lineNumber-1).range.end)}function s5(t,e){let{document:r}=t,n=r.lineAt(e.end),i=l5(r,n);if(i!=null)return i.lineNumber-1===n.lineNumber?void 0:new $(new ue(n.lineNumber+1,0),r.lineAt(i.lineNumber-1).range.end);if(n.lineNumber<r.lineCount-1)return new $(new ue(n.lineNumber+1,0),r.lineAt(r.lineCount-1).range.end)}function c5(t,e){for(;e.lineNumber>0;){let r=t.lineAt(e.lineNumber-1);if(!r.isEmptyOrWhitespace)return r;e=r}return null}function l5(t,e){for(;e.lineNumber+1<t.lineCount;){let r=t.lineAt(e.lineNumber+1);if(!r.isEmptyOrWhitespace)return r;e=r}return null}var go=class extends Be{constructor(){super(...arguments);this.type="RawSelectionTarget";this.textualType="character";this.insertionDelimiter="";this.isRaw=!0;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.getCloneParameters=()=>this.state}};function Al(t){let e=Oi(t.contentRange,t.prefixRange),r=t.getTrailingDelimiterTarget()??t.getLeadingDelimiterTarget();return r!=null?e.union(r.contentRange):e}var p5=['"',"'","(","[","{","<"],u5=['"',"'",")","]","}",">",",",";",":"];function Zn(t){let{editor:e}=t,{start:r}=Oi(t.contentRange,t.prefixRange),o=e.document.lineAt(r).text.slice(0,r.character).match(/\s+$/);return o==null?void 0:new $e({contentRange:new $(r.line,r.character-o[0].length,r.line,r.character),editor:e,isReversed:t.isReversed})}function Yn(t){let{editor:e}=t,{end:r}=t.contentRange,o=e.document.lineAt(r).text.slice(r.character).match(/^\s+/);return o==null?void 0:new $e({contentRange:new $(r.line,r.character,r.line,r.character+o[0].length),editor:e,isReversed:t.isReversed})}function yo(t){let{editor:e}=t,r=Oi(t.contentRange,t.prefixRange),{start:n,end:i}=r,o=t.getLeadingDelimiterTarget()?.contentRange??n.toEmptyRange(),s=t.getTrailingDelimiterTarget()?.contentRange??i.toEmptyRange(),l=mo(e,r);return o.union(s).isRangeEqual(l)?l:!s.isEmpty&&(!o.isEmpty||r.start.isEqual(l.start)||p5.includes(f5(e,r)))?r.union(s):!o.isEmpty&&(r.end.isEqual(l.end)||u5.includes(m5(e,r)))?r.union(o):r}function f5(t,e){let{start:r}=e,n=t.document.lineAt(r);return r.isAfter(n.range.start)?t.document.getText(new $(r.translate(void 0,-1),r)):""}function m5(t,e){let{end:r}=e,n=t.document.lineAt(r);return r.isBefore(n.range.end)?t.document.getText(new $(r.translate(void 0,1),r)):""}var Zt=class extends Be{constructor(){super(...arguments);this.type="TokenTarget";this.textualType="token";this.insertionDelimiter=" "}getLeadingDelimiterTarget(){return Zn(this)}getTrailingDelimiterTarget(){return Yn(this)}getRemovalRange(){return yo(this)}getCloneParameters(){return this.state}};function qT(t){let{editor:e,isReversed:r}=t,{document:n}=e,i=Oi(t.contentRange,t.prefixRange);return d5(n,i)?h5(n,i)?new ho({editor:e,isReversed:r,contentRange:i}):new cr({editor:e,isReversed:r,contentRange:i}):new Zt({editor:e,isReversed:r,contentRange:i})}function d5(t,e){let r=t.lineAt(e.start).rangeTrimmed?.start,n=t.lineAt(e.end).rangeTrimmed?.end;return r!=null&&n!=null&&r.isEqual(e.start)&&n.isEqual(e.end)}function h5(t,e){let{start:r,end:n}=e;return(r.line===0||t.lineAt(r.line-1).isEmptyOrWhitespace)&&(n.line===t.lineCount-1||t.lineAt(n.line+1).isEmptyOrWhitespace)}var xo=class t extends Be{constructor(r){super(r);this.type="ScopeTypeTarget";this.scopeTypeType_=r.scopeTypeType,this.removalRange_=r.removalRange,this.leadingDelimiterRange_=r.leadingDelimiterRange,this.trailingDelimiterRange_=r.trailingDelimiterRange,this.prefixRange=r.prefixRange,this.insertionDelimiter=r.insertionDelimiter??g5(r.scopeTypeType),this.hasDelimiterRange_=!!this.leadingDelimiterRange_||!!this.trailingDelimiterRange_}getLeadingDelimiterTarget(){if(this.leadingDelimiterRange_!=null)return new $e({editor:this.editor,isReversed:this.isReversed,contentRange:this.leadingDelimiterRange_});if(!this.hasDelimiterRange_)return Zn(this)}getTrailingDelimiterTarget(){if(this.trailingDelimiterRange_!=null)return new $e({editor:this.editor,isReversed:this.isReversed,contentRange:this.trailingDelimiterRange_});if(!this.hasDelimiterRange_)return Yn(this)}getRemovalRange(){return this.removalRange_!=null?this.removalRange_:this.hasDelimiterRange_?Al(this):qT(this).getRemovalRange()}getRemovalHighlightRange(){return this.removalRange_!=null?mn(this,this.removalRange_):this.hasDelimiterRange_?mn(this,Al(this)):qT(this).getRemovalHighlightRange()}maybeCreateRichRangeTarget(r,n){if(this.scopeTypeType_!==n.scopeTypeType_)return null;let i=this.removalRange_!=null||n.removalRange_!=null?(this.removalRange_??this.contentRange).union(n.removalRange_??n.contentRange):void 0;return new t({...this.getCloneParameters(),isReversed:r,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:n.trailingDelimiterRange_,removalRange:i,contentRange:this.contentRange.union(n.contentRange)})}getCloneParameters(){return{...this.state,insertionDelimiter:this.insertionDelimiter,prefixRange:this.prefixRange,removalRange:void 0,interiorRange:void 0,scopeTypeType:this.scopeTypeType_,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:this.trailingDelimiterRange_}}};function g5(t){switch(t){case"class":case"namedFunction":case"section":case"sectionLevelOne":case"sectionLevelTwo":case"sectionLevelThree":case"sectionLevelFour":case"sectionLevelFive":case"sectionLevelSix":case"part":case"chapter":case"subSection":case"subSubSection":case"namedParagraph":case"subParagraph":return`

`;case"anonymousFunction":case"statement":case"ifStatement":case"comment":case"xmlElement":case"collectionItem":case"branch":case"environment":return`
`;default:return" "}}var Nm=class t extends Be{constructor(r){super(r);this.type="SubTokenWordTarget";this.textualType="word";this.leadingDelimiterRange_=r.leadingDelimiterRange,this.trailingDelimiterRange_=r.trailingDelimiterRange,this.insertionDelimiter=r.insertionDelimiter}getLeadingDelimiterTarget(){return Ds(this.editor,this.leadingDelimiterRange_,this.isReversed)}getTrailingDelimiterTarget(){return Ds(this.editor,this.trailingDelimiterRange_,this.isReversed)}getRemovalRange(){return Al(this)}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,contentRange:As(this,n,!0,!0),trailingDelimiterRange:n.trailingDelimiterRange_})}getCloneParameters(){return{...this.state,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:this.trailingDelimiterRange_,insertionDelimiter:this.insertionDelimiter}}};var Fs=class t extends Be{constructor(r){super({...r,contentRange:pa(r.editor,r.fullInteriorRange)});this.type="InteriorTarget";this.insertionDelimiter=" ";this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.fullInteriorRange;this.fullInteriorRange=r.fullInteriorRange}getCloneParameters(){return{...this.state,fullInteriorRange:this.fullInteriorRange}}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,fullInteriorRange:this.fullInteriorRange.union(n.fullInteriorRange)})}};var Om=class extends Be{constructor(r){super(r);this.type="SurroundingPairTarget";this.insertionDelimiter=" ";this.boundary_=r.boundary,this.interiorRange_=r.interiorRange}getLeadingDelimiterTarget(){return Zn(this)}getTrailingDelimiterTarget(){return Yn(this)}getRemovalRange(){return yo(this)}getInterior(){return[new Fs({editor:this.editor,isReversed:this.isReversed,fullInteriorRange:this.interiorRange_})]}getBoundary(){return this.boundary_.map(r=>new Zt({editor:this.editor,isReversed:this.isReversed,contentRange:r}))}getCloneParameters(){return{...this.state,interiorRange:this.interiorRange_,boundary:this.boundary_}}};var It=class extends Be{constructor(r){super(r);this.type="UntypedTarget";this.insertionDelimiter=" ";this.hasExplicitScopeType=!1;this.hasExplicitRange=r.hasExplicitRange,this.textualType=r.textualType??"token"}getLeadingDelimiterTarget(){return Zn(this)}getTrailingDelimiterTarget(){return Yn(this)}getRemovalRange(){return this.editor.document.getText(this.contentRange).trim().length===0?this.contentRange:yo(this)}maybeCreateRichRangeTarget(){return null}getCloneParameters(){return{...this.state,textualType:this.textualType,hasExplicitRange:this.hasExplicitRange}}};var Lm=class extends Be{constructor(){super(...arguments);this.type="ImplicitTarget";this.textualType="character";this.insertionDelimiter="";this.isRaw=!0;this.hasExplicitScopeType=!1;this.isImplicit=!0;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.getCloneParameters=()=>this.state}};var Um=class extends Be{constructor(r){let{inputTarget:n,modifiedTarget:i,isHead:o}=r;super({...r,contentRange:aM(n.contentRange,i.contentRange,o)});this.type="HeadTailTarget";this.insertionDelimiter=" ";this.inputTarget=n,this.modifiedTarget=i,this.isHead=o}getLeadingDelimiterTarget(){return Zn(this)}getTrailingDelimiterTarget(){return Yn(this)}getRemovalRange(){return yo(this)}getInterior(){let r=this.modifiedTarget.getInterior();if(r!=null)return r.map(n=>new $e({editor:this.editor,contentRange:aM(this.inputTarget.contentRange,n.contentRange,this.isHead),isReversed:this.isReversed}))}getCloneParameters(){return{...this.state,inputTarget:this.inputTarget,modifiedTarget:this.modifiedTarget,isHead:this.isHead}}};function aM(t,e,r){return r?new $(e.start,t.end):new $(t.start,e.end)}var Hm=class t extends Be{constructor(r){super({...r,contentRange:y5(r.paragraphTarget.contentRange,r.containingInterior.contentRange)});this.type="BoundedParagraphTarget";this.textualType="line";this.insertionDelimiter=`

`;this.containingInterior=r.containingInterior,this.paragraphTarget=r.paragraphTarget,this.startLineGap=this.contentRange.start.line-this.containingInterior.fullInteriorRange.start.line,this.endLineGap=this.containingInterior.fullInteriorRange.end.line-this.contentRange.end.line}getLeadingDelimiterTarget(){return this.startLineGap>1?this.paragraphTarget.getLeadingDelimiterTarget():void 0}getTrailingDelimiterTarget(){return this.endLineGap>1?this.paragraphTarget.getTrailingDelimiterTarget():void 0}getRemovalRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.contentRange.union(r.contentRange):this.contentRange;return this.startLineGap<=0||this.endLineGap<=0?n:new cr({contentRange:n,editor:this.editor,isReversed:this.isReversed}).getRemovalRange()}get fullLineContentRange(){return mo(this.editor,this.contentRange)}getRemovalHighlightRange(){let r=(()=>{if(this.startLineGap<1||this.endLineGap<1)return this.getRemovalRange();let n=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return n!=null?this.fullLineContentRange.union(n.contentRange):this.fullLineContentRange})();return Wr(r)}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,containingInterior:this.containingInterior.maybeCreateRichRangeTarget(r,n.containingInterior),paragraphTarget:this.paragraphTarget.maybeCreateRichRangeTarget(r,n.paragraphTarget)})}getCloneParameters(){return{...this.state,paragraphTarget:this.paragraphTarget,containingInterior:this.containingInterior}}};function y5(t,e){let r=t.intersection(e);if(r==null||r.isEmpty)throw new Error("Ranges do not intersect");return r}function Vm(t){return t.activeTextEditor?.selections.map(e=>({selection:e,editor:t.activeTextEditor}))??[]}var Is=class{run(){return Vm(k()).map(e=>new It({editor:e.editor,isReversed:e.selection.isReversed,contentRange:e.selection,hasExplicitRange:!e.selection.isEmpty,textualType:"character"}))}};var Xn=class{constructor(e,r){this.debouncer=new Hu(r,e.getOwnConfiguration("decorationDebounceDelayMs")),this.run=this.run.bind(this)}run(){this.debouncer.run()}dispose(){this.debouncer.dispose()}};var Bm=class{constructor(e,r){this.ide=e;this.storedTargets=r;this.disposables=[];this.debouncer=new Xn(e.configuration,()=>this.updateKeyboardTarget()),this.disposables.push(e.configuration.onDidChangeConfiguration(()=>this.maybeActivate()),this.debouncer),this.maybeActivate()}maybeActivate(){if(this.ide.configuration.getOwnConfiguration("experimental.keyboardTargetFollowsSelection")){this.selectionWatcherDisposable==null&&(this.selectionWatcherDisposable=this.ide.onDidChangeTextEditorSelection(this.debouncer.run));return}this.selectionWatcherDisposable!=null&&(this.selectionWatcherDisposable.dispose(),this.selectionWatcherDisposable=void 0)}updateKeyboardTarget(){this.ide.activeTextEditor==null||this.storedTargets.get("keyboard")==null||this.storedTargets.set("keyboard",new Is().run())}dispose(){this.disposables.forEach(e=>e.dispose()),this.selectionWatcherDisposable?.dispose()}};var Wm=class{constructor(e){this.ide=e;switch(e.disposeOnExit(this),this.evaluateSetting=this.evaluateSetting.bind(this),this.active=!0,e.runMode){case"development":this.enableDebugLog();break;case"test":this.disableDebugLog();break;case"production":this.evaluateSetting(),this.disposableConfiguration=e.configuration.onDidChangeConfiguration(this.evaluateSetting);break}}log(...e){this.active&&console.log(...e)}dispose(){this.disposableConfiguration&&this.disposableConfiguration.dispose()}enableDebugLog(){this.active=!0}disableDebugLog(){this.active=!1}evaluateSetting(){this.ide.configuration.getOwnConfiguration("debug")?this.enableDebugLog():this.disableDebugLog()}};var x5=["!","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_","`","{","|","}","~","\xA3",'"'],S5=x5.map(Br).join("|"),T5=["[a-zA-Z0-9]",S5].join("|"),v5=new RegExp(`^(${T5})$`,"u"),b5="[unk]",w5=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}]/gu,$m=class{constructor(){this.disposables=[];this.algorithmChangeNotifier=new Gt;this.getTokenGraphemes=e=>ln(e,w5,r=>({text:this.normalizeGrapheme(r[0]),tokenStartOffset:r.index,tokenEndOffset:r.index+r[0].length}));this.registerAlgorithmChangeListener=this.algorithmChangeNotifier.registerListener;k().disposeOnExit(this),this.updateTokenHatSplittingMode=this.updateTokenHatSplittingMode.bind(this),this.getTokenGraphemes=this.getTokenGraphemes.bind(this),this.updateTokenHatSplittingMode(),this.disposables.push(k().configuration.onDidChangeConfiguration(this.updateTokenHatSplittingMode))}updateTokenHatSplittingMode(){let{lettersToPreserve:e,symbolsToPreserve:r,...n}=k().configuration.getOwnConfiguration("tokenHatSplittingMode");this.tokenHatSplittingMode={lettersToPreserve:e.map(i=>i.toLowerCase().normalize("NFC")),symbolsToPreserve:r.map(i=>i.normalize("NFC")),...n},this.algorithmChangeNotifier.notifyListeners()}normalizeGrapheme(e){let{preserveCase:r,lettersToPreserve:n,symbolsToPreserve:i}=this.tokenHatSplittingMode,o=e.normalize("NFC");return i.includes(o)||(r||(o=o.toLowerCase()),n.includes(o.toLowerCase()))||(o=kS(o),v5.test(o)||(o=b5)),o}dispose(){this.disposables.forEach(({dispose:e})=>e())}};function ua(){return zT==null&&(zT=new $m),zT}var zT;var _5=["-","+","*","/","=","<",">","_","#",".","|","&",":"],E5=["!==","!=","+=","-=","*=","/=","%=","<=",">=","=>","->","??",'"""',"```","/*","*/","<!--","-->"],R5=["\\p{L}","\\p{M}","\\p{N}"],k5="[^\\s\\w]",P5="(?<![.\\d])\\d+\\.\\d+(?![.\\d])";function A5(t){let{fixedTokens:e,repeatableSymbols:r,identifierWordRegexes:n,identifierWordDelimiters:i,numbersRegex:o,singleSymbolsRegex:s}=t,l=r.map(Br).map(x=>`${x}+`).join("|"),p=e.map(Br).join("|"),m=`(${n.concat(i.map(Br)).join("|")})+`,d=`(${n.join("|")})+`,g=[p,o,m,l,s].join("|");return{identifierMatcher:new RegExp(m,"gu"),wordMatcher:new RegExp(d,"gu"),tokenMatcher:new RegExp(g,"gu")}}var GT=new Map;function Pr(t){let e=k().configuration.getOwnConfiguration("wordSeparators",{languageId:t}),r=e.join("\0");if(!GT.has(r)){let n={fixedTokens:E5,repeatableSymbols:_5,identifierWordRegexes:R5,identifierWordDelimiters:e,numbersRegex:P5,singleSymbolsRegex:k5};GT.set(r,A5(n))}return GT.get(r)}function sM(t,e,r){return ln(t,Pr(e).tokenMatcher,r)}var M5=/\p{Lu}?\p{Ll}+|\p{Lu}+(?!\p{Ll})|\p{N}+/gu,Cs=class{constructor(e){this.wordRegex=Pr(e).wordMatcher}splitIdentifier(e){let r=al(e,this.wordRegex);return r.length>1?r:al(e,M5)}};var cM=({penalty:t})=>-t,lM=({isFirstLetter:t})=>t?-1:0;function pM(t){return({grapheme:{text:e},style:r})=>{let n=t.get({grapheme:e,hatStyle:r});return n==null?1/0:-n}}function uM(t,e){let r=Jc(n=>CS(e[n].filter(i=>i>t))??1/0);return({grapheme:{text:n}})=>r(n)}function KT(t){return e=>e.grapheme.text===t?.grapheme&&e.style===t?.hatStyle?1:0}function fM(t){switch(t){case"greedy":return({penalty:e})=>-e;case"balanced":return({penalty:e})=>-(e<2?0:1);case"stable":return e=>0}}function mM(t,e){if(t.length===0)return;let r=t;for(let n of e){if(r.length===1)return r[0];r=D5(r,n)}return r[0]}function D5(t,e){let r=-1/0,n=[];for(let i of t){let o=e(i);o<r||(o>r&&(r=o,n.length=0),n.push(i))}return n}function dM({hatOldTokenRanks:t,graphemeTokenRanks:e},r,n,i,o,s){return mM(s,[KT(i),fM(r),KT(o),pM(t),cM,lM,uM(n,e)])}function hM(t,e,r){let n={},i=new uo(({grapheme:o,hatStyle:s})=>[o,s]);return t.forEach(({token:o,rank:s})=>{let l=e.get(o);l!=null&&i.set(l,s),r.getTokenGraphemes(o.text).forEach(({text:p})=>{let u;p in n?u=n[p]:(u=[],n[p]=u),u.push(s)})}),{hatOldTokenRanks:i,graphemeTokenRanks:n}}function gM(t,e=[]){return new Map(FS(tt,Xo)(el([e],t.visibleRanges.map(r=>NS(r.start.line,r.end.line+1)))).sort((r,n)=>r-n).map((r,n)=>[r,n]))}function yM(t,e){return(r,n)=>{let i=Math.abs(r.displayLine-t),o=Math.abs(n.displayLine-t);if(i<o)return-1;if(i>o)return 1;let s=Math.abs(r.range.start.character-e),l=Math.abs(n.range.start.character-e);return s-l}}function xM(t,e){let r=t.document.languageId,n=t.document.getText(e),i=t.document.offsetAt(e.start);return sM(n,r,o=>{let s=i+o.index,l=i+o.index+o[0].length,p=new $(t.document.positionAt(s),t.document.positionAt(l));return{editor:t,text:o[0],range:p,offsets:{start:s,end:l}}})}function SM(t,e,r){let i=I5(t,e).flatMap(o=>{let s=o.selections[0].active,l=gM(o,[s.line]),p=tt(o.visibleRanges.map(u=>xM(o,u).map(m=>({...m,displayLine:l.get(m.range.start.line)}))));return p.sort(yM(l.get(s.line),s.character)),p});return F5(r,i).map((o,s)=>({token:o,rank:-s}))}function F5(t,e){return t==null?e:e.sort((r,n)=>{let i=t.has(r),o=t.has(n);return i&&!o?-1:!i&&o?1:0})}function I5(t,e){let r;return t==null?r=e:r=[t,...e.filter(n=>n!==t)],r}function QT({tokenGraphemeSplitter:t,enabledHatStyles:e,forceTokenHats:r,oldTokenHats:n,hatStability:i,activeTextEditor:o,visibleTextEditors:s}){let l=r==null?void 0:TM(r),p=TM(n),u=SM(o,s,l),m=hM(u,p,t),d=Object.keys(e),g=new Rs(()=>[...d]);return u.map(({token:x,rank:b})=>{let v=C5(t,x,g,e),I=dM(m,i,b,l?.get(x),p.get(x),v);if(I!=null)return g.set(I.grapheme.text,g.get(I.grapheme.text).filter(F=>F!==I.style)),N5(x,I)}).filter(x=>x!=null)}function TM(t){let e=new uo(({editor:r,offsets:n})=>[r.id,n.start,n.end]);return t.forEach(r=>e.set(r.token,r)),e}function C5(t,e,r,n){let i=[],o=t.getTokenGraphemes(e.text),s=new Set(new Cs(e.editor.document.languageId).splitIdentifier(e.text).map(l=>l.index));for(let l of o){let p=s.has(l.tokenStartOffset);for(let u of r.get(l.text))i.push({grapheme:l,style:u,penalty:n[u].penalty,isFirstLetter:p})}return i}function N5(t,e){return{hatStyle:e.style,grapheme:e.grapheme.text,token:t,hatRange:new $(t.range.start.translate(void 0,e.grapheme.tokenStartOffset),t.range.start.translate(void 0,e.grapheme.tokenEndOffset))}}var jm=class{constructor(e,r){this.hats=e;this.context=r;this.disposables=[];k().disposeOnExit(this);let n=new Xn(k().configuration,()=>this.allocateHats());this.disposables.push(this.hats.onDidChangeEnabledHatStyles(n.run),this.hats.onDidChangeIsEnabled(n.run),k().onDidOpenTextDocument(n.run),k().onDidCloseTextDocument(n.run),k().onDidChangeActiveTextEditor(n.run),k().onDidChangeVisibleTextEditors(n.run),k().onDidChangeTextDocument(n.run),k().onDidChangeTextEditorSelection(n.run),k().onDidChangeTextEditorVisibleRanges(n.run),ua().registerAlgorithmChangeListener(n.run),n)}async allocateHats(e){let r=await this.context.getActiveMap();e=e?.map(i=>({...i,grapheme:ua().normalizeGrapheme(i.grapheme)}));let n=this.hats.isEnabled?QT({tokenGraphemeSplitter:ua(),enabledHatStyles:this.hats.enabledHatStyles,forceTokenHats:e,oldTokenHats:r.tokenHats,hatStability:k().configuration.getOwnConfiguration("experimental.hatStability"),activeTextEditor:k().activeTextEditor,visibleTextEditors:k().visibleTextEditors}):[];r.setTokenHats(n),await this.hats.setHatRanges(n.map(({hatStyle:i,hatRange:o,token:{editor:s}})=>({editor:s,range:o,styleName:i})))}dispose(){this.disposables.forEach(({dispose:e})=>e())}};var qm=class t{constructor(e){this.rangeUpdater=e;this.isExpired=!1;this.documentTokenLists=new Map;this.deregisterFunctions=[];this.map={};this._tokenHats=[]}get tokenHats(){return this._tokenHats}getDocumentTokenList(e){let r=e.uri.toString(),n=this.documentTokenLists.get(r);return n==null&&(n=[],this.documentTokenLists.set(r,n),this.deregisterFunctions.push(this.rangeUpdater.registerRangeInfoList(e,n))),n}clone(){let e=new t(this.rangeUpdater);return e.setTokenHats(this._tokenHats),e}setTokenHats(e){this.map={},this.documentTokenLists=new Map,this.deregisterFunctions.forEach(n=>n());let r=e.map(n=>{let{hatStyle:i,grapheme:o,token:s}=n,l=this.makeTokenLive(s);return this.map[Sl(i,o)]=l,{...n,token:l}});this._tokenHats=r}makeTokenLive(e){let{tokenMatcher:r}=Pr(e.editor.document.languageId),n={...e,expansionBehavior:{start:{type:"regex",regex:r},end:{type:"regex",regex:r}}};return this.getDocumentTokenList(e.editor.document).push(n),n}getEntries(){return this.checkExpired(),Object.entries(this.map)}getToken(e,r){return this.checkExpired(),this.map[Sl(e,ua().normalizeGrapheme(r))]}checkExpired(){if(this.isExpired)throw Error("Map snapshot has expired")}dispose(){this.isExpired=!0,this.deregisterFunctions.forEach(e=>e())}};var O5=6e4,zm=class{constructor(e,r,n,i){this.debug=r;this.commandServerApi=i;this.prePhraseMapsSnapshotTimestamp=null;this.lastSignalVersion=null;k().disposeOnExit(this),this.activeMap=new qm(e),this.getActiveMap=this.getActiveMap.bind(this),this.allocateHats=this.allocateHats.bind(this),this.hatAllocator=new jm(n,{getActiveMap:this.getActiveMap})}allocateHats(e){return this.hatAllocator.allocateHats(e)}async getActiveMap(){return await this.maybeTakePrePhraseSnapshot(),this.activeMap}async getReadableMap(e){return await this.maybeTakePrePhraseSnapshot(),e?this.lastSignalVersion==null?(console.error("Pre phrase snapshot requested but no signal was present; please upgrade command client"),this.activeMap):this.prePhraseMapSnapshot==null?(console.error("Navigation map pre-phrase snapshot requested, but no snapshot has been taken"),this.activeMap):performance.now()-this.prePhraseMapsSnapshotTimestamp>O5?(console.error("Navigation map pre-phrase snapshot requested, but snapshot is more than a minute old"),this.activeMap):this.prePhraseMapSnapshot:this.activeMap}dispose(){this.activeMap.dispose(),this.prePhraseMapSnapshot!=null&&this.prePhraseMapSnapshot.dispose()}async maybeTakePrePhraseSnapshot(){let e=await this.commandServerApi.signals.prePhrase.getVersion();e!==this.lastSignalVersion&&(this.debug.log("taking snapshot"),this.lastSignalVersion=e,e!=null&&this.takePrePhraseSnapshot())}takePrePhraseSnapshot(){this.prePhraseMapSnapshot!=null&&this.prePhraseMapSnapshot.dispose(),this.prePhraseMapSnapshot=this.activeMap.clone(),this.prePhraseMapsSnapshotTimestamp=performance.now()}};function ZT(t,e,r){let n=t.get(e);return n==null&&(n=r(),t.set(e,n)),n}var ev=Sr(Dl(),1);function tv(t,e){let{originalOffsets:{start:r,end:n},finalOffsets:{end:i},displacement:o}=t,{offsets:{start:s,end:l}}=e;return(0,ev.invariant)(n>r,()=>"Change range expected to be nonempty"),(0,ev.invariant)(n>=s&&r<=l,()=>"Change range expected to intersect with selection range"),{start:n<=s?s+o:Math.min(s,i),end:n<=l?l+o:Math.min(l,i)}}var RM=Sr(Dl(),1);function rv(t,e){let{event:{text:r,isReplace:n},finalOffsets:{start:i,end:o}}=t;if((0,RM.invariant)(i===t.originalOffsets.end&&i===e.offsets.start&&i===e.offsets.end,()=>"Selection range and change range expected to be same empty range"),n){let s=e.expansionBehavior.end;switch(s.type){case"closed":return{start:i,end:i};case"open":return{start:i,end:o};case"regex":{let l=r.match(Pf(s.regex));return l==null?{start:i,end:i}:{start:i,end:i+l[0].length}}}}else{let s=e.expansionBehavior.start;switch(s.type){case"closed":return{start:o,end:o};case"open":return{start:i,end:o};case"regex":{let l=r.search(kf(s.regex));return l===-1?{start:o,end:o}:{start:i+l,end:o}}}}}var nv=Sr(Dl(),1);function iv(t,e){let{event:{text:r},originalOffsets:{start:n},displacement:i}=t,{offsets:{start:o,end:s},text:l}=e;if((0,nv.invariant)(s>o,()=>"Selection range expected to be nonempty"),(0,nv.invariant)(n>=o&&n<=s,()=>"Insertion offset expected to intersect with selection range"),n>o&&n<s)return{start:o,end:s+i};if(n===o){let p=e.expansionBehavior.start,u=s+i;switch(p.type){case"closed":return{start:o+i,end:u};case"open":return{start:o,end:u};case"regex":{let m=r+l,d=kf(p.regex),g=m.search(d);for(;g>r.length;)m=m.slice(0,g),g=m.search(d);return g===-1?{start:o,end:u}:{start:o+g,end:u}}}}else{let p=e.expansionBehavior.end,u=o;switch(p.type){case"closed":return{start:u,end:s};case"open":return{start:u,end:s+i};case"regex":{let m=l+r,d=Pf(p.regex),g=m.match(d),x=g==null?0:g[0].length;for(;x!==0&&x<l.length;)m=l.slice(x)+r,g=m.match(d),x=g==null?0:x+g[0].length;return x===0?{start:u,end:s}:{start:u,end:o+x}}}}}function kM(t,e,r){let{start:n,end:i}=t.originalOffsets,{start:o,end:s}=e.offsets,l=Math.min(n,o),p="";return o<n&&(p+=e.text.substring(0,n-o)),p+=t.event.text,i<s&&(p+=e.text.substring(s-i,e.text.length)),p.substring(r.start-l,r.end-l)}function PM(t,e){let{document:r,contentChanges:n}=t,i=n.map(o=>{let s=o.text.length-o.rangeLength,l=o.rangeOffset,p=l+o.rangeLength,u=l,m=p+s;return{displacement:s,event:o,originalOffsets:{start:l,end:p},finalOffsets:{start:u,end:m}}});for(let o of e){let s=o.offsets,l=i.map(u=>{let m;return u.originalOffsets.start>s.end?{start:0,end:0}:u.originalOffsets.end<s.start?{start:u.displacement,end:u.displacement}:(u.event.rangeLength===0?o.range.isEmpty?m=rv(u,o):m=iv(u,o):m=tv(u,o),o.text=kM(u,o,m),{start:m.start-s.start,end:m.end-s.end})}),p={start:s.start+vf(l,({start:u})=>u),end:s.end+vf(l,({end:u})=>u)};o.range=o.range.with(r.positionAt(p.start),r.positionAt(p.end)),o.offsets=p}}var Km=class{constructor(){this.rangeInfoLists=new Map;this.replaceEditLists=new Map;this.listenForDocumentChanges()}getDocumentRangeInfoLists(e){return ZT(this.rangeInfoLists,e.uri.toString(),()=>[])}getDocumentReplaceEditLists(e){return ZT(this.replaceEditLists,e.uri.toString(),()=>[])}registerRangeInfoList(e,r){let n=this.getDocumentRangeInfoLists(e);return n.push(r),()=>or(n,r)}registerReplaceEditList(e,r){let n=this.getDocumentReplaceEditLists(e);return n.push(r),()=>or(n,r)}*documentRangeInfoGenerator(e){let r=this.getDocumentRangeInfoLists(e);for(let n of r)for(let i of n)yield i}listenForDocumentChanges(){this.disposable=k().onDidChangeTextDocument(e=>{let r=this.getDocumentReplaceEditLists(e.document),n={...e,contentChanges:e.contentChanges.map(i=>q5(r,i)?{...i,isReplace:!0}:i)};PM(n,this.documentRangeInfoGenerator(e.document))})}dispose(){this.disposable.dispose()}};function q5(t,e){for(let r of t)for(let n of r)if(n.range.isRangeEqual(e.range)&&n.text===e.text)return!0;return!1}var Qm=class{constructor(){this.signals={prePhrase:{getVersion(){return Promise.resolve(null)}}}}getFocusedElementType(){return Promise.resolve(void 0)}};var Zm=class{async allocateHats(){}async getReadableMap(){return{getEntries(){return[]},getToken(){throw new Error("Hat map is disabled")}}}dispose(){}};var Ym=class{onDidChangeDefinition(e){return{dispose:()=>{}}}loadLanguage(e){return Promise.resolve()}get(e){}getNodeAtLocation(e,r){}dispose(){}};var Xm=class{getSnippetStrict(e){throw new Error("Snippets are not implemented.")}openNewSnippetFile(e,r){throw new Error("Snippets are not implemented.")}};var Jm=class{getSpokenFormEntries(){throw new Es}onDidChange(){return{dispose:()=>{}}}};var ed=class{getTree(e){throw new Error("Tree sitter not provided")}loadLanguage(e){return Promise.resolve(!1)}getLanguage(e){throw new Error("Tree sitter not provided")}getNodeAtLocation(e,r){throw new Error("Tree sitter not provided")}};var ot=class extends Error{constructor(r,n=!1,i=!1){super(`No spoken form for: ${r}`);this.reason=r;this.requiresTalonUpdate=n;this.isPrivate=i}};var AM={curlyBrackets:["{","}"],angleBrackets:["<",">"],escapedDoubleQuotes:['\\"','\\"'],escapedSingleQuotes:["\\'","\\'"],escapedParentheses:["\\(","\\)"],escapedSquareBrackets:["\\[","\\]"],doubleQuotes:['"','"'],parentheses:["(",")"],backtickQuotes:["`","`"],squareBrackets:["[","]"],singleQuotes:["'","'"],tripleBacktickQuotes:["```","```"],tripleDoubleQuotes:['"""','"""'],tripleSingleQuotes:["'''","'''"],whitespace:[" "," "],any:null,string:null,collectionBoundary:null};var MM=new uo(t=>t);for(let[t,e]of Object.entries(AM))e!=null&&MM.set(e,t);function DM(t,e,r){let n=MM.get([e,r]);if(n==null)throw Error(`Unknown surrounding pair delimiters '${e} ${r}'`);return t.pairedDelimiter[n]}function FM(t){throw new ot(`${t.type} insertion snippet`)}function IM(t){throw new ot(`${t.type} wrap with snippet`)}function Fl(t,e,r){let n=r==="vertical"?`${xt.verticalRange} `:"";if(t&&e)return n+xt.rangeExclusive;if(t)throw new ot("Range exclude anchor");return e?n+xt.rangeExcludingEnd:r==="vertical"?xt.verticalRange:xt.rangeInclusive}function CM(t){return Object.fromEntries(Object.entries(t).map(([e,r])=>[e,Object.fromEntries(Object.entries(r).map(([n,i])=>[n,{type:"customizable",spokenForms:i,spokenFormType:e,id:n}]))]))}var z5=["zero","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen","twenty","twenty one","twenty two","twenty three","twenty four","twenty five","twenty six","twenty seven","twenty eight","twenty nine","thirty","thirty one","thirty two","thirty three","thirty four","thirty five","thirty six","thirty seven","thirty eight","thirty nine","forty","forty one","forty two","forty three","forty four","forty five","forty six","forty seven","forty eight","forty nine","fifty","fifty one","fifty two","fifty three","fifty four","fifty five","fifty six","fifty seven","fifty eight","fifty nine","sixty","sixty one","sixty two","sixty three","sixty four","sixty five","sixty six","sixty seven","sixty eight","sixty nine","seventy","seventy one","seventy two","seventy three","seventy four","seventy five","seventy six","seventy seven","seventy eight","seventy nine","eighty","eighty one","eighty two","eighty three","eighty four","eighty five","eighty six","eighty seven","eighty eight","eighty nine","ninety","ninety one","ninety two","ninety three","ninety four","ninety five","ninety six","ninety seven","ninety eight","ninety nine"],G5=["zeroth","first","second","third","fourth","fifth","sixth","seventh","eighth","ninth","tenth","eleventh","twelfth","thirteenth","fourteenth","fifteenth","sixteenth","seventeenth","eighteenth","nineteenth","twentieth"];function Ns(t){let e=z5[t];if(e==null)throw Error(`Unknown number '${t}'`);return e}function Il(t){let e=G5[t];if(e==null)throw Error(`Unknown ordinal '${t}'`);return e}var td=class{constructor(e){this.spokenFormMap=e;this.handleModifier=this.handleModifier.bind(this)}handlePrimitiveTarget(e){let r=[];return e.modifiers!=null&&r.push(e.modifiers.map(this.handleModifier)),e.mark!=null&&r.push(this.handleMark(e.mark)),r}handleModifier(e){switch(e.type){case"cascading":case"modifyIfUntyped":case"preferredScope":throw new ot(`Modifier '${e.type}'`);case"containingScope":return e.ancestorIndex==null||e.ancestorIndex===0?this.handleScopeType(e.scopeType):[new Array(e.ancestorIndex).fill(this.spokenFormMap.modifierExtra.ancestor),this.handleScopeType(e.scopeType)];case"everyScope":return[this.spokenFormMap.simpleModifier.everyScope,this.handleScopeType(e.scopeType)];case"extendThroughStartOf":case"extendThroughEndOf":{let r=this.spokenFormMap.simpleModifier[e.type];return e.modifiers!=null?[r,e.modifiers.map(this.handleModifier)]:[r]}case"relativeScope":return e.offset===0?this.handleRelativeScopeInclusive(e):this.handleRelativeScopeExclusive(e);case"ordinalScope":{let r=this.handleScopeType(e.scopeType),n=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.length===1)return e.start===-1?[n,this.spokenFormMap.modifierExtra.last,r]:e.start===0?[n,this.spokenFormMap.modifierExtra.first,r]:e.start<0?[n,Il(Math.abs(e.start)),this.spokenFormMap.modifierExtra.last,r]:[n,Il(e.start+1),r];let i=Ns(e.length);if(e.start===0)return[n,this.spokenFormMap.modifierExtra.first,i,Cl(r)];if(e.start===-e.length)return[n,this.spokenFormMap.modifierExtra.last,i,Cl(r)];throw new ot(`'${e.type}' with count > 1 and offset away from start / end`)}case"range":{if(e.anchor.type==="ordinalScope"&&e.active.type==="ordinalScope"&&e.anchor.length===1&&e.active.length===1&&e.anchor.scopeType.type===e.active.scopeType.type){let r=e.anchor.start===-1?this.spokenFormMap.modifierExtra.last:Il(e.anchor.start+1),n=this.handleModifier(e.active),i=Fl(e.excludeAnchor,e.excludeActive);return[r,i,n]}throw Error(`Modifier '${e.type}' is not fully implemented`)}default:return[this.spokenFormMap.simpleModifier[e.type]]}}handleRelativeScopeInclusive(e){let r=this.handleScopeType(e.scopeType),n=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.length===1){let s=e.direction==="forward"?xt.forward:xt.backward;return[n,r,s]}let i=Ns(e.length),o=Cl(r);return e.direction==="forward"?[n,i,o]:[n,i,o,xt.backward]}handleRelativeScopeExclusive(e){let r=this.handleScopeType(e.scopeType),n=e.direction==="forward"?xt.next:xt.previous,i=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.offset===1){let o=Ns(e.length);if(e.length===1)return[i,n,r];let s=Cl(r);return[i,n,o,s]}if(e.length===1){let o=Il(e.offset);return[i,o,n,r]}throw new ot(`${e.type} modifier with offset > 1 and length > 1`)}handleScopeType(e){switch(e.type){case"oneOf":case"surroundingPairInterior":throw new ot(`Scope type '${e.type}'`);case"glyph":return[this.spokenFormMap.complexScopeTypeType.glyph,OM(this.spokenFormMap.grapheme,"grapheme",e.character)];case"surroundingPair":{let r=this.spokenFormMap.pairedDelimiter[e.delimiter];return e.forceDirection!=null?[this.spokenFormMap.surroundingPairForceDirection[e.forceDirection],r]:r}case"customRegex":return this.spokenFormMap.customRegex[e.regex]??{type:"customizable",spokenForms:{spokenForms:[],isCustom:!0,defaultSpokenForms:[],requiresTalonUpdate:!1,isPrivate:!1},spokenFormType:"customRegex",id:e.regex};case"interior":return this.spokenFormMap.simpleModifier.interiorOnly;default:return this.spokenFormMap.simpleScopeTypeType[e.type]}}handleMark(e){switch(e.type){case"decoratedSymbol":{let[r,n]=e.symbolColor.split("-"),i=[];return r!=="default"&&i.push(RA(r)),n!=null&&i.push(kA(n)),i.push(OM(this.spokenFormMap.grapheme,"grapheme",e.character)),i}case"lineNumber":return this.handleLineNumberMark(e);case"range":{if(e.anchor.type==="lineNumber"&&e.active.type==="lineNumber"){let[r,n]=this.handleLineNumberMark(e.anchor),[i,o]=this.handleLineNumberMark(e.active);if(r===i){let s=Fl(e.excludeAnchor,e.excludeActive);return[r,n,s,o]}}throw Error(`Mark '${e.type}' is not fully implemented`)}case"explicit":case"keyboard":case"target":throw new ot(`Mark '${e.type}'`);default:return[hm[e.type]]}}handleLineNumberMark(e){switch(e.lineNumberType){case"absolute":throw new ot("Absolute line numbers");case"modulo100":return[gm.modulo100,Ns(e.lineNumber+1)];case"relative":return[e.lineNumber<0?gm.relativeUp:gm.relativeDown,Ns(Math.abs(e.lineNumber))]}}};function Cl(t){if(typeof t=="string")return NM(t);if(Array.isArray(t)){if(t.length===0)return t;let e=t[t.length-1];return[...t.slice(0,-1),Cl(e)]}return{...t,spokenForms:{...t.spokenForms,spokenForms:t.spokenForms.spokenForms.map(NM)}}}function NM(t){return`${t}s`}function OM(t,e,r){let n=t[r];if(n==null)throw new ot(`${e} '${r}'`);return n}var Os=class{constructor(e){this.spokenFormMap=CM(e),this.primitiveGenerator=new td(this.spokenFormMap)}getSpokenFormForSingleTerm(e,r){return this.componentsToSpokenForm(()=>{let n=this.spokenFormMap[e][r];if(n==null)throw new ot(`${e} with id ${r}`);return n})}processCommand(e){return this.componentsToSpokenForm(()=>this.handleAction(e.action))}processScopeType(e){return this.componentsToSpokenForm(()=>[this.primitiveGenerator.handleScopeType(e)])}componentsToSpokenForm(e){try{return{type:"success",spokenForms:LM(e())}}catch(r){if(r instanceof ot)return{type:"error",reason:r.reason,requiresTalonUpdate:r.requiresTalonUpdate,isPrivate:r.isPrivate};throw r}}handleAction(e){switch(e.name){case"editNew":case"getText":case"replace":case"executeCommand":case"parsed":case"private.getTargets":case"private.setKeyboardTarget":throw new ot(`Action '${e.name}'`);case"replaceWithTarget":case"moveToTarget":return[this.spokenFormMap.action[e.name],this.handleTarget(e.source),this.handleDestination(e.destination)];case"swapTargets":return[this.spokenFormMap.action[e.name],this.handleTarget(e.target1),xt.swapConnective,this.handleTarget(e.target2)];case"callAsFunction":return e.argument.type==="implicit"?[this.spokenFormMap.action[e.name],this.handleTarget(e.callee)]:[this.spokenFormMap.action[e.name],this.handleTarget(e.callee),"on",this.handleTarget(e.argument)];case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return[DM(this.spokenFormMap,e.left,e.right),this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"pasteFromClipboard":return[this.spokenFormMap.action[e.name],this.handleDestination(e.destination)];case"insertSnippet":return[this.spokenFormMap.action[e.name],FM(e.snippetDescription),this.handleDestination(e.destination)];case"generateSnippet":if(e.snippetName!=null)throw new ot(`${e.name}.snippetName`);return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"wrapWithSnippet":return[IM(e.snippetDescription),this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"highlight":{if(e.highlightId!=null)throw new ot(`${e.name}.highlightId`);return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)]}default:return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)]}}handleTarget(e){switch(e.type){case"list":if(e.elements.length<2)throw new ot("List target with < 2 elements");return e.elements.map((r,n)=>n===0?this.handleTarget(r):[xt.listConnective,this.handleTarget(r)]);case"range":{let r=this.handleTarget(e.anchor),n=this.handleTarget(e.active),i=Fl(e.excludeAnchor,e.excludeActive,e.rangeType);return[r,i,n]}case"primitive":return this.primitiveGenerator.handlePrimitiveTarget(e);case"implicit":return[]}}handleDestination(e){switch(e.type){case"list":if(e.destinations.length<2)throw new ot("List destination with < 2 elements");return e.destinations.map((r,n)=>n===0?this.handleDestination(r):[xt.listConnective,this.handleDestination(r)]);case"primitive":return[this.handleInsertionMode(e.insertionMode),this.handleTarget(e.target)];case"implicit":return[]}}handleInsertionMode(e){switch(e){case"to":return xt.sourceDestinationConnective;case"before":return xt.before;case"after":return xt.after}}};function LM(t){if(typeof t=="string")return[t];if(Array.isArray(t))return t.length===0?[""]:UM(t.map(LM)).map(e=>e.filter(r=>r.length!==0).join(" "));if(t.spokenForms.spokenForms.length===0){let e=`${gl(t.spokenFormType)} with id ${t.id}`,r;throw t.spokenForms.isPrivate?r="this is a private spoken form currently only for internal experimentation":t.spokenForms.requiresTalonUpdate?r="please update talon to the latest version (see https://www.cursorless.org/docs/user/updating/)":r="please see https://www.cursorless.org/docs/user/customization/ for more information",new ot(`${e}; ${r}`,t.spokenForms.requiresTalonUpdate,t.spokenForms.isPrivate)}return t.spokenForms.spokenForms}function UM(t){if(t.length===0)return[];if(t.length===1)return t[0].map(i=>[i]);let[e,...r]=t,n=UM(r);return e.flatMap(i=>n.map(o=>[i,...o]))}var rd=class{constructor(e){this.talonSpokenForms=e;this.notifier=new Gt;this.spokenFormMap_={...Fi};this.onDidChangeCustomSpokenForms=this.notifier.registerListener;this.disposable=e.onDidChange(()=>this.updateSpokenFormMaps().catch(()=>{})),this.customSpokenFormsInitialized=this.updateSpokenFormMaps(),this.customSpokenFormsInitialized.catch(()=>{})}get spokenFormMap(){return this.spokenFormMap_}get needsInitialTalonUpdate(){return this.needsInitialTalonUpdate_}async updateSpokenFormMaps(){let e;try{if(e=await this.talonSpokenForms.getSpokenFormEntries(),e.length===0)throw new Error("Custom spoken forms list empty")}catch(r){if(r instanceof hl)this.needsInitialTalonUpdate_=!0;else if(!(r instanceof Es)){console.error("Error loading custom spoken forms",r);let n=r.message.replace(/\.$/,"");ct(k().messages,"CustomSpokenForms.updateSpokenFormMaps",`Error loading custom spoken forms: ${n}. Falling back to default spoken forms.`)}throw this.spokenFormMap_={...Fi},this.notifier.notifyListeners(),r}for(let r of HP)K5(this.spokenFormMap_,r,AT[r],Object.fromEntries(e.filter(n=>n.type===r).map(({id:n,spokenForms:i})=>[n,i])));this.notifier.notifyListeners()}getCustomRegexScopeTypes(){return Object.keys(this.spokenFormMap_.customRegex).map(e=>({type:"customRegex",regex:e}))}dispose(){this.disposable.dispose()}};function K5(t,e,r,n){let i=Array.from(new Set([...Object.keys(r),...Object.keys(n)])),o={};for(let s of i){let{defaultSpokenForms:l=[],isPrivate:p=!1}=r[s]??{},u=n[s];o[s]=u==null?{defaultSpokenForms:l,spokenForms:[],requiresTalonUpdate:!p,isCustom:!1,isPrivate:p}:{defaultSpokenForms:l,spokenForms:u,requiresTalonUpdate:!1,isCustom:!Pi(l,u),isPrivate:p}}t[e]=o}var nd=class{constructor(e){this.customSpokenForms=new rd(e),this.customSpokenFormsInitialized=this.customSpokenForms.customSpokenFormsInitialized,this.spokenFormGenerator=new Os(this.customSpokenForms.spokenFormMap),this.disposable=this.customSpokenForms.onDidChangeCustomSpokenForms(()=>{this.spokenFormGenerator=new Os(this.customSpokenForms.spokenFormMap)})}onDidChangeCustomSpokenForms(e){return this.customSpokenForms.onDidChangeCustomSpokenForms(e)}commandToSpokenForm(e){return this.spokenFormGenerator.processCommand(e)}scopeTypeToSpokenForm(e){return this.spokenFormGenerator.processScopeType(e)}actionIdToSpokenForm(e){return this.spokenFormGenerator.getSpokenFormForSingleTerm("action",e)}graphemeToSpokenForm(e){return this.spokenFormGenerator.getSpokenFormForSingleTerm("grapheme",e)}getCustomRegexScopeTypes(){return this.customSpokenForms.getCustomRegexScopeTypes()}get needsInitialTalonUpdate(){return this.customSpokenForms.needsInitialTalonUpdate}dispose(){this.disposable.dispose()}};function*Q5(t){for(let e of t)for(let r of e)yield r}function*Nl(t,e){let r=od(e),n=t;for(;n-- >0;){let i=r.next();if(!i.done)yield i.value;else return}}function*ov(t){let e=od(t),r=e.next();if(r.done)return;let n=r.value;for(let i of e)yield[n,i],n=i}var u_e=Symbol();function*Z5(t=0,e=1){let r=t;for(;;)yield r,r+=e}function*id(t,e){for(let r of t)e(r)&&(yield r)}function*Bt(t,e){for(let r of t)yield e(r)}function*VM(t,e,r,n=1){let i,o;if(r!==void 0?(i=e,o=r):(i=0,o=e),i<0)throw new Error("start cannot be negative");if(o!==null&&o<0)throw new Error("stop cannot be negative");if(n<=0)throw new Error("step cannot be negative");let s=-1,l=od(t),p;for(;;){if(s++,o!==null&&s>=o||(p=l.next(),p.done))return;s<i||(s-i)%n===0&&(yield p.value)}}function*Y5(t,e){let r=od(t),n;for(;!(n=r.next()).done;){let i=n.value;if(!e(i))return;yield i}}function od(t){return t[Symbol.iterator]()}function Ls(t,e){return Array.from(Bt(t,e))}function HM(t,e,r){let n=Z5(t,r),i=r>=0?o=>o<e:o=>o>e;return Y5(n,i)}function BM(t,e,r=1){return e!==void 0?HM(t,e,r):HM(0,t,r)}function ad(t,e){return Q5(Bt(t,e))}function qr(t,e,{domain:r},{domain:n}){return t==="forward"?X5(e,r,n):J5(e,r,n)}function X5(t,e,r){let n=e.start.isAfterOrEqual(t),i=r.start.isAfterOrEqual(t);if(n&&i){let s=e.start.compareTo(r.start);return s===0?e.end.compareTo(r.end):s}if(!n&&!i){let s=e.end.compareTo(r.end);return s===0?-e.start.compareTo(r.start):s}if(!n&&i){let s=e.end.compareTo(r.start);return s!==0?s:r.isEmpty?1:-1}let o=e.start.compareTo(r.end);return o!==0?o:e.isEmpty?-1:1}function J5(t,e,r){let n=e.end.isBeforeOrEqual(t),i=r.end.isBeforeOrEqual(t);if(n&&i){let s=-e.end.compareTo(r.end);return s===0?-e.start.compareTo(r.start):s}if(!n&&!i){let s=-e.start.compareTo(r.start);return s===0?e.end.compareTo(r.end):s}if(!n&&i){let s=-e.start.compareTo(r.end);return s!==0?s:r.isEmpty?1:-1}let o=-e.end.compareTo(r.start);return o!==0?o:e.isEmpty?-1:1}function WM(t,e,r,n,i,o){return e8(t,n,i,o)&&(i==null||qr(r,n.includeDescendantScopes?t:e,i,o)<0)}function e8(t,e,r,n){let{containment:i,distalPosition:o,allowAdjacentScopes:s,skipAncestorScopes:l}=e,{domain:p}=n;switch(i){case"disallowed":if(p.contains(t))return!1;break;case"disallowedIfStrict":if(oM(p,t))return!1;break;case"required":if(!p.contains(t))return!1;break}return l&&r!=null&&p.contains(r.domain)?!1:t8(new $(t,o),p,s)}function t8(t,e,r){let n=t.intersection(e);return n==null?!1:!n.isEmpty||r||e.isEmpty}var r8={containment:null,allowAdjacentScopes:!1,skipAncestorScopes:!1,includeDescendantScopes:!1},Ne=class{constructor(){this.includeAdjacentInEvery=!1}*generateScopes(e,r,n,i={}){let o={...r8,...i,distalPosition:i.distalPosition??(n==="forward"?e.document.range.end:e.document.range.start)},s,l=r;for(let p of this.generateScopeCandidates(e,r,n,o))if(WM(r,l,n,o,s,p)&&(yield p,s=p,l=n==="forward"?p.domain.end:p.domain.start),this.canStopEarly(r,n,o,s,p))return}canStopEarly(e,r,n,i,o){let{containment:s,distalPosition:l,skipAncestorScopes:p}=n;if(this.isHierarchical&&!p)return!1;let u=this.isHierarchical&&p?i:o;return u==null?!1:!!(s==="required"&&(r==="forward"?u.domain.end.isAfter(e):u.domain.start.isBefore(e))||(r==="forward"?u.domain.end.isAfterOrEqual(l):u.domain.start.isBeforeOrEqual(l)))}};var Ar=class extends Ne{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.scopeType=n;this.languageId=i;this.isHierarchical=!1}get searchScopeType(){return this.iterationScopeType}get searchScopeHandler(){return this._searchScopeHandler==null&&(this._searchScopeHandler=this.scopeHandlerFactory.create(this.searchScopeType,this.languageId)),this._searchScopeHandler}generateScopeCandidates(r,n,i,o){let{containment:s,...l}=o,p=this.searchScopeHandler.generateScopes(r,n,i,{containment:s==="required"?"required":void 0,...l});return ad(p,u=>this.generateScopesInSearchScope(i,u))}};var sd=class extends Ne{constructor(r,n){super();this.scopeType={type:"line"};this.iterationScopeType={type:"paragraph"};this.isHierarchical=!1;this.includeAdjacentInEvery=!0}*generateScopeCandidates(r,n,i){if(i==="forward")for(let o=n.line;o<r.document.lineCount;o++)yield $M(r,o);else for(let o=n.line;o>=0;o--)yield $M(r,o)}};function $M(t,e){let{range:r}=t.document.lineAt(e);return{editor:t,domain:r,getTargets:n=>[av(t,n,r)]}}function av(t,e,r){return new cr({editor:t,isReversed:e,contentRange:sv(t,r)})}function sv(t,e){let r=t.document.lineAt(e.start),n=t.document.lineAt(e.end);return new $(r.rangeTrimmed?.start??r.range.start,n.rangeTrimmed?.end??n.range.end)}function hn(t,e,r,n){let i=e.document.offsetAt(r.start),o=e.document.getText(r),s=l=>new $(e.document.positionAt(i+l.index),e.document.positionAt(i+l.index+l[0].length));return t.lastIndex=0,n==="forward"?Bt(o.matchAll(t),s):Array.from(o.matchAll(t),s).reverse()}var cd=class extends Ar{constructor(){super(...arguments);this.scopeType={type:"identifier"};this.iterationScopeType={type:"line"};this.regex=Pr(this.languageId).identifierMatcher}generateScopesInSearchScope(r,{editor:n,domain:i}){return Bt(hn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new Zt({editor:n,contentRange:o,isReversed:s})]}))}};function ld(t,e,r){let n=t.editor.document.getText(t.domain),i=e.editor.document.getText(e.domain);for(let o of r){let s=Jo(o,n),l=Jo(o,i);if(s&&!l)return!0;if(l&&!s)return!1}}var n8=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}\p{Z}\p{C}]/gu,i8=/[$]/g,o8=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}]/gu,pd=class extends Ar{constructor(){super(...arguments);this.scopeType={type:"character"};this.iterationScopeType={type:"token"}}get searchScopeType(){return{type:"line"}}generateScopesInSearchScope(r,{editor:n,domain:i}){return Bt(hn(n8,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new $e({editor:n,contentRange:o,isReversed:s,textualType:"character"})]}))}isPreferredOver(r,n){let{identifierMatcher:i}=Pr(this.languageId);return ld(r,n,[i,i8,o8])}};var ud=class extends Ar{constructor(){super(...arguments);this.scopeType={type:"word"};this.iterationScopeType={type:"identifier"};this.wordTokenizer=new Cs(this.languageId)}getScopesInSearchScope({editor:r,domain:n}){let{document:i}=r,o=i.offsetAt(n.start),l=this.wordTokenizer.splitIdentifier(i.getText(n)).map(p=>new $(i.positionAt(o+p.index),i.positionAt(o+p.index+p.text.length)));return l.map((p,u)=>({editor:r,domain:p,getTargets:m=>{let d=u>0?l[u-1]:null,g=u+1<l.length?l[u+1]:null;return[a8(m,r,d,p,g)]}}))}generateScopesInSearchScope(r,n){let i=this.getScopesInSearchScope(n);return r==="backward"&&i.reverse(),i}};function a8(t,e,r,n,i){let o=r!=null&&n.start.isAfter(r.end)?new $(r.end,n.start):void 0,s=i!=null&&i.start.isAfter(n.end)?new $(n.end,i.start):void 0,p=o!=null||s!=null?e.document.getText(o??s):"";return new Nm({editor:e,isReversed:t,contentRange:n,insertionDelimiter:p,leadingDelimiterRange:o,trailingDelimiterRange:s})}var s8=/[$]/g,fd=class extends Ar{constructor(){super(...arguments);this.scopeType={type:"token"};this.iterationScopeType={type:"line"};this.regex=Pr(this.languageId).tokenMatcher}generateScopesInSearchScope(r,{editor:n,domain:i}){return Bt(hn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new Zt({editor:n,contentRange:o,isReversed:s})]}))}isPreferredOver(r,n){let{identifierMatcher:i}=Pr(this.languageId);return ld(r,n,[i,s8])}};var md=class extends Ne{constructor(r,n){super();this.scopeType={type:"document"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i){let o=r.document.range;yield{editor:r,domain:o,getTargets:s=>[new Fm({editor:r,isReversed:s,contentRange:o})]}}};function dd(t,e,r,n,i){if(!t&&n!=null&&i!=null&&$T(e,n)>$T(e,i))return r.union(n)}function Us(t){return t.containment==null&&t.skipAncestorScopes}function jM(t,e,r,{containment:n,distalPosition:i,allowAdjacentScopes:o}){let{start:s,end:l}=c8(t.offsetAt(e),t.offsetAt(i),r,n,o);return{start:t.positionAt(s),end:t.positionAt(l)}}function c8(t,e,r,n,i){let o=i?1:0;if(n==="required")return r==="forward"?{start:t-o,end:t+1}:{start:t-1,end:t+o};let s=n==="disallowed"?1:-o;return r==="forward"?{start:t+s,end:e+o}:{start:e-o,end:t-s}}function qM(t,e,r){let n=[],i=[];for(let o of t)i.length===0||e(i[i.length-1],o)?i.push(o):(n.push(r(i)),i=[o]);return i.length>0&&n.push(r(i)),n}var Hs=class extends Ne{constructor(r){super();this.query=r}*generateScopeCandidates(r,n,i,o){let{document:s}=r,l=Us(o),{start:p,end:u}=jM(s,n,i,o),m=this.query.matches(s,p,u).map(d=>this.matchToScope(r,d,l)).filter(d=>d!=null).sort((d,g)=>qr(i,n,d,g));yield*qM(m,(d,g)=>d.domain.isRangeEqual(g.domain),d=>d.length===1?d[0]:{...d[0],getTargets(g){let x=tl(d.flatMap(b=>b.getTargets(g)),(b,v)=>b.isEqual(v));if(x.length>1&&!d.every(b=>b.allowMultiple)){let b="Please use #allow-multiple! predicate in your query to allow multiple matches for this scope type";if(ct(k().messages,"BaseTreeSitterScopeHandler.allow-multiple",b),k().runMode==="test")throw Error(b)}return x}})}};function cv(t,e,r,n){return n?Vs(t,`${e}.${r}`,`_.${r}`):Vs(t,`${e}.${r}`)??(Vs(t,e)!=null?Vs(t,`_.${r}`):void 0)}function To(t,e,r,n){return cv(t,e,r,n)?.range}function Vs(t,...e){return t.captures.find(r=>e.some(n=>r.name===n))}var hd=class extends Hs{constructor(r,n){super(r);this.iterateeScopeType=n;this.isHierarchical=!0;this.scopeType=void 0}get iterationScopeType(){throw Error("Not implemented")}matchToScope(r,n,i){let o=this.iterateeScopeType.type,s=cv(n,o,"iteration",!1);if(s==null)return;let{range:l,allowMultiple:p}=s,u=To(n,o,"iteration.domain",!1)??l;return{editor:r,domain:u,allowMultiple:p,getTargets:m=>[new $e({editor:r,isReversed:m,contentRange:l})]}}};var gd=class extends Hs{constructor(r,n){super(r);this.scopeType=n;this.isHierarchical=!0}get iterationScopeType(){return{type:"custom",scopeHandler:new hd(this.query,this.scopeType)}}matchToScope(r,n,i){let o=this.scopeType.type,s=Vs(n,o);if(s==null)return;let{range:l,allowMultiple:p,insertionDelimiter:u}=s,m=To(n,o,"domain",!0)??l,d=To(n,o,"prefix",!0)?.with(void 0,l.start),g=To(n,o,"leading",!0)?.with(void 0,d?.start??l.start),x=To(n,o,"trailing",!0)?.with(l.end),b=To(n,o,"removal",!0);return b==null&&(o==="collectionItem"||o==="argumentOrParameter")&&(b=dd(i,r,l,g,x)),{editor:r,domain:m,allowMultiple:p,getTargets:v=>[new xo({scopeTypeType:o,editor:r,isReversed:v,contentRange:l,prefixRange:d,removalRange:b,leadingDelimiterRange:g,trailingDelimiterRange:x,insertionDelimiter:u})]}}};function zM(t){return t.flatMap((e,r)=>{let{value:n,done:i}=e.next();return i?[]:[{iterator:e,value:n,index:r}]})}function GM(t,e){return t.flatMap(r=>{let{iterator:n,index:i}=r,{value:o}=r,s=!1;for(;!s&&!e(o);)({value:o,done:s}=n.next());return s?[]:[{iterator:n,value:o,index:i}]})}var ei=class t extends Ne{constructor(r,n){super();this.scopeHandlers=r;this.getIterationScopeHandler=n;this.isHierarchical=!0;this.scopeType=void 0}static create(r,n,i){let o=n.scopeTypes.map(s=>r.create(s,i));return this.createFromScopeHandlers(r,i,o)}static createFromScopeHandlers(r,n,i){let o=()=>new t(i.map(s=>r.create(s.iterationScopeType,n)),()=>{throw new Error("Not implemented")});return new t(i,o)}get iterationScopeType(){return this.iterationScopeHandler==null&&(this.iterationScopeHandler=this.getIterationScopeHandler()),{type:"custom",scopeHandler:this.iterationScopeHandler}}*generateScopeCandidates(r,n,i,o){if(this.iterationScopeHandler?.lastYieldedIndex!=null){let p=this.iterationScopeHandler.lastYieldedIndex;yield*this.scopeHandlers[p].generateScopes(r,n,i,o);return}let s=this.scopeHandlers.map(p=>p.generateScopes(r,n,i,o)[Symbol.iterator]()),l=zM(s);for(;l.length>0;){l.sort((m,d)=>qr(i,n,m.value,d.value));let p=l[0],u=p.value;this.lastYieldedIndex=p.index,yield u,l=GM(l,m=>qr(i,n,u,m)<0)}}};var yd=class extends Ne{constructor(r,n){super();this.scopeType={type:"paragraph"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i){let{document:o}=r,s=i==="forward"?1:-1,l=i==="forward"?o.lineCount:-1,p=l8(o,n,i),u=r.document.lineAt(n);for(let m=n.line+s;m!==l;m+=s){let d=r.document.lineAt(m);d.isEmptyOrWhitespace?p!=null&&(yield KM(r,p.range.union(u.range)),p=void 0):p==null&&(p=d),u=d}p!=null&&(yield KM(r,p.range.union(u.range)))}};function l8(t,e,r){let n=r==="forward"?-1:1,i=r==="forward"?-1:t.lineCount,o=t.lineAt(e);if(!o.isEmptyOrWhitespace){for(let s=e.line+n;s!==i;s+=n){let l=t.lineAt(s);if(l.isEmptyOrWhitespace)break;o=l}return o}}function KM(t,e){return{editor:t,domain:e,getTargets:r=>[new ho({editor:t,isReversed:r,contentRange:sv(t,e)})]}}function Ol(t,e){return e.length>1?e.indexOf(t.slice(-1))>-1:t.slice(-1)===e}function QM(t,e){return t.slice(t.length-e.length)===e}var lv,u8=["al","adj","assn","Ave","BSc","MSc","Cell","Ch","Co","cc","Corp","Dem","Dept","ed","eg","Eq","Eqs","est","est","etc","Ex","ext","Fig","fig","Figs","figs","i.e","ie","Inc","inc","Jan","Feb","Mar","Apr","Jun","Jul","Aug","Sep","Sept","Oct","Nov","Dec","jr","mi","Miss","Mrs","Mr","Ms","Mol","mt","mts","no","Nos","PhD","MD","BA","MA","MM","pl","pop","pp","Prof","Dr","pt","Ref","Refs","Rep","repr","rev","Sec","Secs","Sgt","Col","Gen","Rep","Sen","Gov","Lt","Maj","Capt","St","Sr","sr","Jr","jr","Rev","Sun","Mon","Tu","Tue","Tues","Wed","Th","Thu","Thur","Thurs","Fri","Sat","trans","Univ","Viz","Vol","vs","v"];function ZM(t){t?lv=t:lv=u8}function pv(t){return/^[A-Z][a-z].*/.test(t)||xd(t)}function YM(t){return pv(t)||/``|"|'/.test(t.substring(0,2))}function XM(t){let e=t.replace(/[-'`~!@#$%^&*()_|+=?;:'",.<>{}[\]\\/]/gi,"");return~lv.indexOf(e)}function JM(t,e){return(t==="a.m."||t==="p.m.")&&e.replace(/\W+/g,"").slice(-3).toLowerCase()==="day"}function uv(t){let e=t.replace(/[()[]{}]/g,"").match(/(.\.)*/);return e&&e[0].length>0}function eD(t){return t.length<=3?!0:pv(t)}function fv(t,e){return e.length>0?t<5&&e[0].length<6&&pv(e[0])?!0:e.filter(function(n){return/[A-Z]/.test(n.charAt(0))}).length>=3:!1}function xd(t,e){return e&&(t=t.slice(e-1,e+2)),!isNaN(t)}function tD(t){return t.match(/^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/)}function rD(t){return t.match(/[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/)}function nD(t){let e=0;return((e=t.indexOf("."))>-1||(e=t.indexOf("!"))>-1||(e=t.indexOf("?"))>-1)&&t.charAt(e+1).match(/[a-zA-Z].*/)?[t.slice(0,e),t.slice(e+1)]:!1}function iD(t){return t==="."||t==="!"||t==="?"}var aD=" @~@ ",oD=aD.trim(),m8=new RegExp("\\S",""),d8=new RegExp("\\n+|[-#=_+*]{4,}","g"),h8=new RegExp("\\S+|\\n","g"),g8={newlineBoundaries:!1,preserveWhitespace:!1,abbreviations:void 0};function sD(t,e){if(!t)return[];if(!m8.test(t))return[];let r={...g8,...e};ZM(r.abbreviations),r.newlineBoundaries&&(t=t.replace(d8,aD));let n,i;r.preserveWhitespace?(i=t.split(/(<br\s*\/?>|\S+|\n+)/),n=i.filter(function(d,g){return g%2})):n=t.trim().match(h8)??[];let o=0,s=0,l=[],p=[],u=[];if(!n||!n.length)return[];for(let d=0,g=n.length;d<g;d++){if(o++,u.push(n[d]),~n[d].indexOf(",")&&(o=0),iD(n[d])||Ol(n[d],"?!")||n[d]===oD){r.newlineBoundaries&&n[d]===oD&&u.pop(),p.push(u),o=0,u=[];continue}if((Ol(n[d],'"')||Ol(n[d],"\u201D"))&&(n[d]=n[d].slice(0,-1)),Ol(n[d],".")){if(d+1<g){if(n[d].length===2&&isNaN(n[d].charAt(0))||XM(n[d]))continue;if(YM(n[d+1])){if(JM(n[d],n[d+1])||fv(o,n.slice(d,6))||xd(n[d+1])&&eD(n[d]))continue}else if(QM(n[d],"..")||uv(n[d])||fv(o,n.slice(d,5)))continue}p.push(u),u=[],o=0;continue}(s=n[d].indexOf("."))>-1&&(xd(n[d],s)||uv(n[d])||rD(n[d])||tD(n[d]))||(l=nD(n[d]))&&(u.pop(),u.push(l[0]),p.push(u),u=[],o=0,u.push(l[1]))}return u.length&&p.push(u),p=p.filter(function(d){return d.length>0}),p.slice(1).reduce(function(d,g){let x=d[d.length-1];return x.length===1&&/^.{1,2}[.]$/.test(x[0])&&!/[.]/.test(g[0])?(d.pop(),d.push(x.concat(g)),d):(d.push(g),d)},[p[0]]).map(function(d,g){if(r.preserveWhitespace&&!r.newlineBoundaries){let x=d.length*2;return g===0&&(x+=1),i.splice(0,x).join("")}return d.join(" ")})}var y8=/\S*\p{L}/u,cD=/(\r?\n[^\p{L}]*\r?\n)|(?<=[.!?])(\s*\r?\n)/gu,x8={newlineBoundaries:!1,preserveWhitespace:!0},Sd=class{*segment(e){let r=sD(e,x8),n=0;for(let i of r){let o=i.split(cD).filter(s=>s!=null);for(let s of o){if(!T8(s)){let l=S8(s,n);l!=null&&(yield l)}n+=s.length}}}};function S8(t,e){let r=Vk(y8,t);if(r==null)return;let n=r.index;return n!==0&&(e+=n,t=t.slice(n)),{text:t.trimEnd(),index:e}}function T8(t){return Jo(cD,t)}var Td=class extends Ar{constructor(){super(...arguments);this.scopeType={type:"sentence"};this.iterationScopeType={type:"paragraph"};this.segmenter=new Sd}generateScopesInSearchScope(r,{editor:n,domain:i}){let o=n.document.offsetAt(i.start),s=n.document.getText(i),l=u=>{let m=new $(n.document.positionAt(o+u.index),n.document.positionAt(o+u.index+u.text.length));return{editor:n,domain:m,getTargets:d=>[new Zt({editor:n,contentRange:m,isReversed:d})]}},p=this.segmenter.segment(s);return r==="forward"?Bt(p,l):Array.from(p,l).reverse()}};var Bs=class extends Ar{constructor(){super(...arguments);this.iterationScopeType={type:"line"}}generateScopesInSearchScope(r,{editor:n,domain:i}){return Bt(hn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new Zt({editor:n,contentRange:o,isReversed:s})]}))}},vd=class extends Bs{constructor(){super(...arguments);this.regex=/\S+/g}},bd=class extends Bs{constructor(r,n,i){super(r,n,i);this.scopeType=n;this.regex=/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/g}},wd=class extends Bs{constructor(r,n,i){super(r,n,i);this.scopeType=n}get regex(){return new RegExp(this.scopeType.regex,this.scopeType.flags??"gu")}},_d=class extends Bs{constructor(r,n,i){super(r,n,i);this.scopeType=n}get regex(){return new RegExp(Br(this.scopeType.character),"gui")}};var Ed=class extends Ne{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.languageId=n;this.targetScopeType=i;this.isHierarchical=!0;this.targetScopeHandler=this.scopeHandlerFactory.create(this.targetScopeType,this.languageId),this.surroundingPairInteriorScopeHandler=this.scopeHandlerFactory.create({type:"surroundingPairInterior",delimiter:"any"},this.languageId)}get iterationScopeType(){switch(this.targetScopeHandler.iterationScopeType.type){case"custom":case"fallback":case"conditional":throw Error(`Iteration scope type can't be '${this.targetScopeHandler.iterationScopeType.type}' for BoundedBaseScopeHandler`)}return{type:"oneOf",scopeTypes:[this.targetScopeHandler.iterationScopeType,{type:"surroundingPairInterior",delimiter:"any"}]}}*generateScopeCandidates(r,n,i,o){let s=this.targetScopeHandler.generateScopes(r,n,i,{...o,containment:o.containment!=="disallowed"?o.containment:void 0}),l=Array.from(this.surroundingPairInteriorScopeHandler.generateScopes(r,n,i,{...o,containment:Us(o)?"required":o.containment}));for(let p of s){let u=[];for(let m of l){let d=p.domain.intersection(m.domain);d!=null&&!d.isEmpty&&u.push({editor:r,domain:d,getTargets:g=>[this.getTargets(lD(p,g),lD(m,g))]})}u.push(p),u.sort((m,d)=>qr(i,n,m,d)),yield*u}}};function lD(t,e){let r=t.getTargets(e);if(r.length!==1)throw Error(`Expected one target but got ${r.length}`);return r[0]}var Rd=class extends Ed{constructor(r,n,i){super(r,i,{type:"nonWhitespaceSequence"});this.scopeType={type:"boundedNonWhitespaceSequence"}}getTargets(r,n){let i=r.contentRange.intersection(n.contentRange);if(i==null||i.isEmpty)throw Error("Expected non empty intersection");return new Zt({editor:r.editor,isReversed:r.isReversed,contentRange:i})}},kd=class extends Ed{constructor(r,n,i){super(r,i,{type:"paragraph"});this.scopeType={type:"boundedParagraph"}}getTargets(r,n){if(!(r instanceof ho))throw Error("Expected ParagraphTarget");return new Hm({editor:r.editor,isReversed:r.isReversed,paragraphTarget:r,containingInterior:n})}};var ti=class{constructor(e){this.items=e;this.index=0}add(e){this.items.push(e)}contains(e){return this.advance(e)}getContaining(e){if(this.advance(e))return this.items[this.index]}advance(e){for(;this.index<this.items.length;){let r=this.items[this.index].range;if(r.contains(e))return!0;if(e.end.isBeforeOrEqual(r.start))return!1;this.index++}return!1}};var Ws=class{constructor(e){this.children=v8(e)}getSmallestContaining(e){return this.children.getContaining(e)?.getSmallestContaining(e)}};function v8(t){let e=[],r=[];for(let n of t){let i=new mv(n);for(;r.length>0&&!r[r.length-1].range.contains(n.range);)r.pop();let o=r[r.length-1];o!=null?o.children.add(i):e.push(i),r.push(i)}return new ti(e)}var mv=class{constructor(e){this.item=e;this.children=new ti([])}get range(){return this.item.range}getSmallestContaining(e){return this.children.getContaining(e)?.getSmallestContaining(e)??this.item}};var b8=",",dv=new RegExp(b8,"g");function pD(t){let e=t.getText();return ln(e,dv,r=>new $(t.positionAt(r.index),t.positionAt(r.index+r[0].length)))}var uD={type:"fallback",scopeTypes:[{type:"surroundingPairInterior",delimiter:"collectionBoundary"},{type:"conditional",scopeType:{type:"line"},predicate:t=>{let e=t.editor.document.getText(t.domain);return Jo(dv,e)}}]};function hv(t,e,r,n,i,o){let s=i!=null?new $(i.end,n.start):void 0,l=o!=null?new $(n.end,o.start):void 0,p=dd(t,e,n,s,l),u=r.isSingleLine?", ":`,
`;return{editor:e,domain:n,getTargets(m){return[new xo({scopeTypeType:"collectionItem",editor:e,isReversed:m,contentRange:n,insertionDelimiter:u,leadingDelimiterRange:s,trailingDelimiterRange:l,removalRange:p})]}}}function gv(t,e,r,n){let i=t.create({type:"surroundingPairInterior",delimiter:n},e);return Array.from(i.generateScopes(r,new ue(0,0),"forward",{containment:void 0,skipAncestorScopes:!1,includeDescendantScopes:!0}),o=>({range:o.domain}))}var Pd=class extends Ne{constructor(r,n){super();this.scopeHandlerFactory=r;this.languageId=n;this.scopeType={type:"collectionItem"};this.isHierarchical=!0}get iterationScopeType(){return uD}*generateScopeCandidates(r,n,i,o){let s=Us(o),l=pD(r.document),p=gv(this.scopeHandlerFactory,this.languageId,r,"collectionBoundary"),u=new Ws(p),m=gv(this.scopeHandlerFactory,this.languageId,r,"string"),d=new ti(m),g=[],x=new Set,b=[];for(let v of l){if(d.contains(v))continue;let I;for(;b.length>0;){let Q=b[b.length-1];if(Q.iterationRange.contains(v)){I=Q;break}this.addScopes(g,Q),b.pop()}let F=u.getSmallestContaining(v)?.range,H=F??r.document.lineAt(v.start.line).range;if(I!=null&&I.iterationRange.isRangeEqual(H)){I.delimiters.push(v);continue}F!=null&&x.add(F),b.push({editor:r,isEveryScope:s,iterationRange:H,delimiters:[v]})}for(let v of b)this.addScopes(g,v);for(let v of p)if(!x.has(v.range)&&!v.range.isEmpty){let I=pa(r,v.range);I.isEmpty||g.push(hv(s,r,v.range,I))}g.sort((v,I)=>qr(i,n,v,I)),yield*g}addScopes(r,n){let{editor:i,iterationRange:o,isEveryScope:s,delimiters:l}=n;if(l.length===0)return;let p=[];for(let d=0;d<l.length;++d){let g=l[d],x=l[d-1]?.end??o.start;p.push(new $(x,g.start))}let u=l[l.length-1];p.push(new $(u.end,o.end));let m=p.map(d=>pa(i,d));for(let d=0;d<m.length;++d)d===m.length-1&&i.document.getText(m[d]).trim()===""||r.push(hv(s,i,o,m[d],m[d-1],m[d+1]))}};var Ad=class extends Ne{constructor(r,n,i){super();this.scopeType={type:"collectionItem"};this.isHierarchical=!0;this.scopeHandler=(()=>{let o=new Pd(r,i),s=n.get(i)?.getScopeHandler(this.scopeType);return s==null?o:ei.createFromScopeHandlers(r,i,[s,o])})()}get iterationScopeType(){return this.scopeHandler.iterationScopeType}generateScopeCandidates(r,n,i,o){return this.scopeHandler.generateScopes(r,n,i,o)}};var Md=class extends Ne{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.conditionalScopeType=n;this.languageId=i;this.scopeType=void 0;this.isHierarchical=!0}get iterationScopeType(){throw new mt("Iteration scope for ConditionalScopeHandler")}generateScopeCandidates(r,n,i,o){let s=this.scopeHandlerFactory.create(this.conditionalScopeType.scopeType,this.languageId);return id(s.generateScopes(r,n,i,o),this.conditionalScopeType.predicate)}};var $s=class t extends Ne{constructor(r){super();this.scopeHandlers=r;this.scopeType=void 0;this.isHierarchical=!0}static create(r,n,i){let o=n.scopeTypes.map(s=>r.create(s,i));return this.createFromScopeHandlers(o)}static createFromScopeHandlers(r){return new t(r)}get iterationScopeType(){throw new mt("Iteration scope for FallbackScopeHandler")}*generateScopeCandidates(r,n,i,o){for(let s of this.scopeHandlers)yield*s.generateScopes(r,n,i,o)}};var Dd=class extends Ne{constructor(){super();this.scopeType={type:"notebookCell"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i,o){let s=w8(r,n,i,o);for(let l of s)yield E8(l)}};function w8(t,e,r,n){let i=_8(t);if(i==null)return[];let{notebook:o,cell:s}=i;return n.containment==="required"?[s]:n.containment==="disallowed"||n.containment==="disallowedIfStrict"?r==="forward"?o.cells.slice(s.index+1):o.cells.slice(0,s.index).reverse():n.distalPosition!=null&&new $(e,n.distalPosition).isRangeEqual(t.document.range)?o.cells:r==="forward"?o.cells.slice(s.index):o.cells.slice(0,s.index+1).reverse()}function _8(t){let e=t.document.uri.toString();for(let r of k().visibleNotebookEditors)for(let n of r.cells)if(n.document.uri.toString()===e)return{notebook:r,cell:n}}function E8(t){let e=R8(t),r=e.document.range;return{editor:e,domain:r,getTargets:n=>[new Cm({editor:e,isReversed:n,contentRange:r})]}}function R8(t){let e=t.document.uri.toString();for(let r of k().visibleTextEditors)if(r.document.uri.toString()===e)return r;throw new Error("Editor not found notebook cell")}var Fd=class extends Ne{constructor(r,n,i,o){super();this.scopeType={type:"notebookCell"};this.isHierarchical=!1;this.scopeHandler=(()=>{let s=new Dd,l=n.get(o)?.getScopeHandler(this.scopeType);return l==null?s:ei.createFromScopeHandlers(r,o,[l,s])})()}get iterationScopeType(){return this.scopeHandler.iterationScopeType}generateScopeCandidates(r,n,i,o){return this.scopeHandler.generateScopes(r,n,i,o)}};var Id=class extends Ne{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.scopeType=n;this.languageId=i;this.isHierarchical=!0;this.surroundingPairScopeHandler=this.scopeHandlerFactory.create({type:"surroundingPair",delimiter:this.scopeType.delimiter,requireStrongContainment:!0},this.languageId)}get iterationScopeType(){return this.surroundingPairScopeHandler.iterationScopeType}*generateScopeCandidates(r,n,i,o){let s=this.surroundingPairScopeHandler.generateScopes(r,n,i,o);for(let l of s)yield{editor:r,domain:l.domain,getTargets(p){return l.getTargets(p).flatMap(u=>u.getInterior())}}}};function fD(t,{openingDelimiterRange:e,closingDelimiterRange:r},n){let i=e.union(r),o=new $(e.end,r.start);return{editor:t,domain:n?o:i,getTargets:s=>[new Om({editor:t,isReversed:s,contentRange:i,interiorRange:o,boundary:[e,r]})]}}function mD(t){let e=Xo(t.map(({text:r})=>r)).map(Br).join("|");return new RegExp(`(?<!\\\\)(${e})`,"gu")}function hD(t,e,r){if(r.length===0)return[];let n=t?.getCapturesMap(e)??{},i=new ti(yv(n.disqualifyDelimiter)),o=new ti(yv(n.pairDelimiter)),s=new Ws(yv(n.textFragment)),l=Object.fromEntries(r.map(m=>[m.text,m])),p=HS(e.getText(),mD(r)),u=[];for(let m of p){let d=m[0],g=new $(e.positionAt(m.index),e.positionAt(m.index+d.length));dD(i.getContaining(g))==null&&u.push({delimiterInfo:l[d],textFragmentRange:s.getSmallestContaining(g)?.range,range:dD(o.getContaining(g))?.range??g})}return u}function dD(t){return t!=null&&!t.hasError()?t:void 0}function yv(t){return t==null?[]:(t.sort((e,r)=>e.range.start.compareTo(r.range.start)),t)}var Cd=Object.freeze({angleBrackets:[["</","<"],[">","/>"]],curlyBrackets:[["{","${"],"}"],tripleBacktickQuotes:[[],[]],tripleDoubleQuotes:[[],[]],tripleSingleQuotes:[[],[]],doubleQuotes:['"','"',{isSingleLine:!0}],escapedDoubleQuotes:['\\"','\\"',{isSingleLine:!0}],escapedParentheses:["\\(","\\)"],escapedSquareBrackets:["\\[","\\]"],escapedSingleQuotes:["\\'","\\'",{isSingleLine:!0}],parentheses:[["(","$("],")"],backtickQuotes:["`","`"],singleQuotes:["'","'",{isSingleLine:!0}],squareBrackets:["[","]"]}),gD={nix:{singleQuotes:["''","''"]},lua:{doubleQuotes:[['"',"[["],['"',"]]"]]},python:{tripleSingleQuotes:["'''","'''"],tripleDoubleQuotes:['"""','"""']},markdown:{tripleBacktickQuotes:["```","```"]},ruby:{tripleDoubleQuotes:["%Q(",")"]}},gRe=Object.fromEntries(Object.values(Cd)),yD={any:Mi(Cd),string:["tripleDoubleQuotes","tripleSingleQuotes","tripleBacktickQuotes","doubleQuotes","singleQuotes","backtickQuotes"],collectionBoundary:["parentheses","squareBrackets","curlyBrackets","angleBrackets"]};function xD(t){return t!=null&&t in gD?{...Cd,...gD[t]}:Cd}function SD(t,e){let r=yD[t]??[t];return k8(e,r)}function k8(t,e){let r=xD(t);return e.flatMap(n=>{let[i,o,s]=r[n],{isSingleLine:l=!1}=s??{},p=yl(i)?[i]:i,u=yl(o)?[o]:o;return Xo(el(p,u)).map(d=>{let g=p.includes(d),x=u.includes(d);return{text:d,side:g&&!x?"left":!g&&x?"right":"unknown",delimiterName:n,isSingleLine:l}})})}function TD(t){let e=[],r=[];for(let n of t){let{delimiterInfo:{delimiterName:i,side:o,isSingleLine:s},textFragmentRange:l,range:p}=n;if(o==="left")r.push(n);else{let u=Yo(r,d=>d.delimiterInfo.delimiterName===i&&P8(d.textFragmentRange,l)&&A8(s,d.range,p));if(u===-1){o==="unknown"&&r.push(n);continue}let m=r[u];r.length=u,e.push({delimiterName:i,openingDelimiterRange:m.range,closingDelimiterRange:p})}}return e}function P8(t,e){return t==null||e==null?t===e:t.isRangeEqual(e)}function A8(t,e,r){return!t||e.start.line===r.start.line}var Nd=class extends Ne{constructor(r,n,i){super();this.languageDefinitions=r;this.scopeType=n;this.languageId=i;this.iterationScopeType={type:"line"};this.isHierarchical=!0}*generateScopeCandidates(r,n,i,o){if(this.scopeType.forceDirection!=null){ct(k().messages,"deprecatedForceDirection","forceDirection is deprecated. If this is important to you please file an issue on the cursorless repo.");return}let s=hD(this.languageDefinitions.get(this.languageId),r.document,SD(this.scopeType.delimiter,this.languageId)),l=TD(s);l=M8(i,o,n,l),yield*l.map(p=>fD(r,p,this.scopeType.requireStrongContainment??!1)).sort((p,u)=>qr(i,n,p,u))}};function M8(t,e,r,n){return t==="forward"&&e.containment==="required"&&e.allowAdjacentScopes&&e.skipAncestorScopes?n.filter((i,o)=>!(i.closingDelimiterRange.end.isEqual(r)&&n[o+1]?.closingDelimiterRange.start.isEqual(r))):n}var Od=class extends Ne{constructor(r,n,i,o){super();this.scopeHandlerFactory=r;this.languageDefinitions=n;this.scopeType=i;this.languageId=o;this.isHierarchical=!0}get iterationScopeType(){throw new mt("Iteration scope for InteriorScopeHandler")}*generateScopeCandidates(r,n,i,o){let s=new $(n,o.distalPosition),l=this.getScopeHandler();if(l==null)return;let p=l.generateScopes(r,n,i,o);for(let u of p)this.shouldYield(s,u)&&(yield D8(u))}getScopeHandler(){let r=this.languageDefinitions.get(this.languageId)?.getScopeHandler(this.scopeType),n=this.scopeHandlerFactory.create({type:"surroundingPair",delimiter:"any"},this.languageId);return this.scopeType.explicitScopeType?r==null?n:$s.createFromScopeHandlers([r,n]):r==null?n:ei.createFromScopeHandlers(this.scopeHandlerFactory,this.languageId,[r,n])}shouldYield(r,n){return!this.scopeType.explicitScopeType||r.contains(n.domain)}};function D8(t){return{editor:t.editor,domain:t.domain,getTargets(e){return t.getTargets(e).flatMap(F8)}}}function F8(t){let e=t.getInterior();return e??[new Fs({editor:t.editor,isReversed:t.isReversed,fullInteriorRange:t.contentRange})]}var js=class{constructor(e){this.languageDefinitions=e;this.maybeCreate=this.maybeCreate.bind(this),this.create=this.create.bind(this)}maybeCreate(e,r){switch(e.type){case"character":return new pd(this,e,r);case"word":return new ud(this,e,r);case"token":return new fd(this,e,r);case"identifier":return new cd(this,e,r);case"line":return new sd(e,r);case"sentence":return new Td(this,e,r);case"paragraph":return new yd(e,r);case"boundedParagraph":return new kd(this,e,r);case"document":return new md(e,r);case"nonWhitespaceSequence":return new vd(this,e,r);case"boundedNonWhitespaceSequence":return new Rd(this,e,r);case"url":return new bd(this,e,r);case"customRegex":return new wd(this,e,r);case"glyph":return new _d(this,e,r);case"collectionItem":return new Ad(this,this.languageDefinitions,r);case"surroundingPair":return new Nd(this.languageDefinitions,e,r);case"surroundingPairInterior":return new Id(this,e,r);case"notebookCell":return new Fd(this,this.languageDefinitions,e,r);case"interior":return new Od(this,this.languageDefinitions,e,r);case"custom":return e.scopeHandler;case"oneOf":return ei.create(this,e,r);case"fallback":return $s.create(this,e,r);case"conditional":return new Md(this,e,r);case"instance":throw Error("Unexpected scope type 'instance'");default:return this.languageDefinitions.get(r)?.getScopeHandler(e)}}create(e,r){let n=this.maybeCreate(e,r);if(n==null)throw new Error(`Couldn't create scope handler for '${e.type}'`);return n}};function gn(t,e){return new $(t.row,t.column,e.row,e.column)}function xv(t){return new ue(t.row,t.column)}function vD(t){return new $(t.startPosition.row,t.startPosition.column,t.endPosition.row,t.endPosition.column)}function bD(t,e){return new we(t.startPosition.row,t.startPosition.column,e.endPosition.row,e.endPosition.column)}function ri(t,e){return{selection:new we(new ue(e.startPosition.row,e.startPosition.column),new ue(e.endPosition.row,e.endPosition.column)),context:{}}}function I8(t,e,r){let n=e.startIndex<r.startIndex,i=n?e:r,o=n?r:e;return{selection:new we(new ue(i.startPosition.row,i.startPosition.column),new ue(o.endPosition.row,o.endPosition.column)),context:{}}}function wD(){return Sv(t=>t.type===","||t.type==="("||t.type===")"||t.type==="["||t.type==="]"||t.type===">"||t.type==="<"||t.type==="}"||t.type==="{",", ")}function _D(t,e){let r=e.startIndex,n=e.endIndex;return e.text.startsWith("(")&&e.text.endsWith(")")?(r+=1,n-=1):e.text.endsWith(";")&&(n-=1),{selection:new we(t.document.positionAt(r),t.document.positionAt(n)),context:{}}}function ED(...t){return function(e,r){let n=r.previousSibling,i=n?.previousSibling,o;return n&&(t.includes(n.type)?i?o=gn(i.endPosition,r.startPosition):o=gn(n.startPosition,r.startPosition):o=gn(n.endPosition,r.startPosition)),{...ri(e,r),context:{leadingDelimiterRange:o}}}}function ni(t=[],e=[],{includeUnnamedChildren:r=!1}={}){return function(n,i){if(t.length>0&&e.length>0)throw new Error("Cannot have both exclusions and inclusions.");let o=r?i.children:i.namedChildren,s=new Set(t),l=new Set(e);return o=o.filter(p=>s.size>0?!s.has(p.type):l.size>0?l.has(p.type):!0),I8(n,o[0],o[o.length-1])}}function RD(...t){return function(e,r){let n=r.nextSibling,i=n?.nextSibling,o;return n&&(t.includes(n.type)?i?o=gn(r.endPosition,i.startPosition):o=gn(r.endPosition,n.endPosition):o=gn(r.endPosition,n.startPosition)),{...ri(e,r),context:{trailingDelimiterRange:o}}}}function C8(t,e){let r=t.nextSibling;for(;r!=null;){if(!e(r))return r;r=r.nextSibling}return r}function N8(t,e){let r=t.previousSibling;for(;r!=null;){if(!e(r))return r;r=r.previousSibling}return r}function Sv(t,e,r=Tr,n=Tr){return(i,o)=>{let s,l,p=r(o),u=n(o),m=N8(p,t),d=C8(u,t);m!=null&&(s=gn(m.endPosition,p.startPosition)),d!=null&&(l=gn(u.endPosition,d.startPosition));let g=O8(i,s,l,e);return{selection:new we(new ue(p.startPosition.row,p.startPosition.column),new ue(u.endPosition.row,u.endPosition.column)),context:{containingListDelimiter:g,leadingDelimiterRange:s,trailingDelimiterRange:l}}}}function O8(t,e,r,n){let{document:i}=t,o=[r!=null?i.getText(r):n,e!=null?i.getText(e):n];return IS(o,"length")}function kD(t,e){if(t.length===1)return!0;let r=!1,n=t.filter(({name:p})=>p.endsWith(".start")).map(({range:{end:p}})=>p).sort((p,u)=>p.compareTo(u)).at(-1),i=t.filter(({name:p})=>p.endsWith(".end")).map(({range:{start:p}})=>p).sort((p,u)=>p.compareTo(u)).at(0);n!=null&&i!=null&&n.isAfter(i)&&(ct(e,"TreeSitterQuery.checkCaptures.badOrder",`Start capture must be before end capture: ${t}`),r=!0);let o=t.filter(({name:p})=>p.endsWith(".start")).length,s=t.filter(({name:p})=>p.endsWith(".end")).length,l=t.length-o-s;return l>0&&(o>0||s>0)&&(ct(e,"TreeSitterQuery.checkCaptures.mixRegularStartEnd",`Please do not mix regular captures and start/end captures: ${t.map(({name:p,range:u})=>p+" "+u.toString())}`),r=!0),l>1&&(ct(e,"TreeSitterQuery.checkCaptures.duplicate",`A capture with the same name may only appear once in a single pattern: ${t.map(({name:p,range:u})=>p+" "+u.toString())}`),r=!0),!r}function PD(t){let e=t;for(;e!=null;){if(e.hasError)return!0;e=e.parent}return!1}function Tv(t){return t.replace(/(\.(start|end))?(\.(startOf|endOf))?$/,"")}var Oe;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{let o={};for(let s of i)o[s]=s;return o},t.getValidEnumValues=i=>{let o=t.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),s={};for(let l of o)s[l]=i[l];return t.objectValues(s)},t.objectValues=i=>t.objectKeys(i).map(function(o){return i[o]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let o=[];for(let s in i)Object.prototype.hasOwnProperty.call(i,s)&&o.push(s);return o},t.find=(i,o)=>{for(let s of i)if(o(s))return s},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,o=" | "){return i.map(s=>typeof s=="string"?`'${s}'`:s).join(o)}t.joinValues=n,t.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(Oe||(Oe={}));var bv;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(bv||(bv={}));var ee=Oe.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),vo=t=>{switch(typeof t){case"undefined":return ee.undefined;case"string":return ee.string;case"number":return isNaN(t)?ee.nan:ee.number;case"boolean":return ee.boolean;case"function":return ee.function;case"bigint":return ee.bigint;case"symbol":return ee.symbol;case"object":return Array.isArray(t)?ee.array:t===null?ee.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ee.promise:typeof Map<"u"&&t instanceof Map?ee.map:typeof Set<"u"&&t instanceof Set?ee.set:typeof Date<"u"&&t instanceof Date?ee.date:ee.object;default:return ee.unknown}},K=Oe.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),L8=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),zr=class t extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let r=e||function(o){return o.message},n={_errors:[]},i=o=>{for(let s of o.issues)if(s.code==="invalid_union")s.unionErrors.map(i);else if(s.code==="invalid_return_type")i(s.returnTypeError);else if(s.code==="invalid_arguments")i(s.argumentsError);else if(s.path.length===0)n._errors.push(r(s));else{let l=n,p=0;for(;p<s.path.length;){let u=s.path[p];p===s.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(r(s))):l[u]=l[u]||{_errors:[]},l=l[u],p++}}};return i(this),n}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Oe.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};zr.create=t=>new zr(t);var Gs=(t,e)=>{let r;switch(t.code){case K.invalid_type:t.received===ee.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case K.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,Oe.jsonStringifyReplacer)}`;break;case K.unrecognized_keys:r=`Unrecognized key(s) in object: ${Oe.joinValues(t.keys,", ")}`;break;case K.invalid_union:r="Invalid input";break;case K.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Oe.joinValues(t.options)}`;break;case K.invalid_enum_value:r=`Invalid enum value. Expected ${Oe.joinValues(t.options)}, received '${t.received}'`;break;case K.invalid_arguments:r="Invalid function arguments";break;case K.invalid_return_type:r="Invalid function return type";break;case K.invalid_date:r="Invalid date";break;case K.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:Oe.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case K.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case K.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case K.custom:r="Invalid input";break;case K.invalid_intersection_types:r="Intersection results could not be merged";break;case K.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case K.not_finite:r="Number must be finite";break;default:r=e.defaultError,Oe.assertNever(t)}return{message:r}},DD=Gs;function U8(t){DD=t}function Ld(){return DD}var Ud=t=>{let{data:e,path:r,errorMaps:n,issueData:i}=t,o=[...r,...i.path||[]],s={...i,path:o};if(i.message!==void 0)return{...i,path:o,message:i.message};let l="",p=n.filter(u=>!!u).slice().reverse();for(let u of p)l=u(s,{data:e,defaultError:l}).message;return{...i,path:o,message:l}},H8=[];function J(t,e){let r=Ld(),n=Ud({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===Gs?void 0:Gs].filter(i=>!!i)});t.common.issues.push(n)}var Yt=class t{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let i of r){if(i.status==="aborted")return ye;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let i of r){let o=await i.key,s=await i.value;n.push({key:o,value:s})}return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let i of r){let{key:o,value:s}=i;if(o.status==="aborted"||s.status==="aborted")return ye;o.status==="dirty"&&e.dirty(),s.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof s.value<"u"||i.alwaysSet)&&(n[o.value]=s.value)}return{status:e.value,value:n}}},ye=Object.freeze({status:"aborted"}),zs=t=>({status:"dirty",value:t}),lr=t=>({status:"valid",value:t}),wv=t=>t.status==="aborted",_v=t=>t.status==="dirty",Hl=t=>t.status==="valid",Vl=t=>typeof Promise<"u"&&t instanceof Promise;function Hd(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function FD(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}var le;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(le||(le={}));var Ll,Ul,xn=class{constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},AD=(t,e)=>{if(Hl(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new zr(t.common.issues);return this._error=r,this._error}}};function Te(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(s,l)=>{var p,u;let{message:m}=t;return s.code==="invalid_enum_value"?{message:m??l.defaultError}:typeof l.data>"u"?{message:(p=m??n)!==null&&p!==void 0?p:l.defaultError}:s.code!=="invalid_type"?{message:l.defaultError}:{message:(u=m??r)!==null&&u!==void 0?u:l.defaultError}},description:i}}var ve=class{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return vo(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:vo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Yt,ctx:{common:e.parent.common,data:e.data,parsedType:vo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(Vl(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;let i={common:{issues:[],async:(n=r?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:vo(e)},o=this._parseSync({data:e,path:i.path,parent:i});return AD(i,o)}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:vo(e)},i=this._parse({data:e,path:n.path,parent:n}),o=await(Vl(i)?i:Promise.resolve(i));return AD(n,o)}refine(e,r){let n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,o)=>{let s=e(i),l=()=>o.addIssue({code:K.custom,...n(i)});return typeof Promise<"u"&&s instanceof Promise?s.then(p=>p?!0:(l(),!1)):s?!0:(l(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new Gr({schema:this,typeName:he.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return yn.create(this,this._def)}nullable(){return oi.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Hi.create(this,this._def)}promise(){return _o.create(this,this._def)}or(e){return Sa.create([this,e],this._def)}and(e){return Ta.create(this,e,this._def)}transform(e){return new Gr({...Te(this._def),schema:this,typeName:he.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new Ea({...Te(this._def),innerType:this,defaultValue:r,typeName:he.ZodDefault})}brand(){return new Bl({typeName:he.ZodBranded,type:this,...Te(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new Ra({...Te(this._def),innerType:this,catchValue:r,typeName:he.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return Wl.create(this,e)}readonly(){return ka.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},V8=/^c[^\s-]{8,}$/i,B8=/^[0-9a-z]+$/,W8=/^[0-9A-HJKMNP-TV-Z]{26}$/,$8=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,j8=/^[a-z0-9_-]{21}$/i,q8=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,z8=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,G8="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",vv,K8=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Q8=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Z8=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,ID="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Y8=new RegExp(`^${ID}$`);function CD(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function X8(t){return new RegExp(`^${CD(t)}$`)}function ND(t){let e=`${ID}T${CD(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function J8(t,e){return!!((e==="v4"||!e)&&K8.test(t)||(e==="v6"||!e)&&Q8.test(t))}var bo=class t extends ve{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ee.string){let o=this._getOrReturnCtx(e);return J(o,{code:K.invalid_type,expected:ee.string,received:o.parsedType}),ye}let n=new Yt,i;for(let o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(i=this._getOrReturnCtx(e,i),J(i,{code:K.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="max")e.data.length>o.value&&(i=this._getOrReturnCtx(e,i),J(i,{code:K.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="length"){let s=e.data.length>o.value,l=e.data.length<o.value;(s||l)&&(i=this._getOrReturnCtx(e,i),s?J(i,{code:K.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):l&&J(i,{code:K.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),n.dirty())}else if(o.kind==="email")z8.test(e.data)||(i=this._getOrReturnCtx(e,i),J(i,{validation:"email",code:K.invalid_string,message:o.message}),n.dirty());else if(o.kind==="emoji")vv||(vv=new RegExp(G8,"u")),vv.test(e.data)||(i=this._getOrReturnCtx(e,i),J(i,{validation:"emoji",code:K.invalid_string,message:o.message}),n.dirty());else if(o.kind==="uuid")$8.test(e.data)||(i=this._getOrReturnCtx(e,i),J(i,{validation:"uuid",code:K.invalid_string,message:o.message}),n.dirty());else if(o.kind==="nanoid")j8.test(e.data)||(i=this._getOrReturnCtx(e,i),J(i,{validation:"nanoid",code:K.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid")V8.test(e.data)||(i=this._getOrReturnCtx(e,i),J(i,{validation:"cuid",code:K.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid2")B8.test(e.data)||(i=this._getOrReturnCtx(e,i),J(i,{validation:"cuid2",code:K.invalid_string,message:o.message}),n.dirty());else if(o.kind==="ulid")W8.test(e.data)||(i=this._getOrReturnCtx(e,i),J(i,{validation:"ulid",code:K.invalid_string,message:o.message}),n.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),J(i,{validation:"url",code:K.invalid_string,message:o.message}),n.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),J(i,{validation:"regex",code:K.invalid_string,message:o.message}),n.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(e,i),J(i,{code:K.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),n.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(i=this._getOrReturnCtx(e,i),J(i,{code:K.invalid_string,validation:{startsWith:o.value},message:o.message}),n.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(i=this._getOrReturnCtx(e,i),J(i,{code:K.invalid_string,validation:{endsWith:o.value},message:o.message}),n.dirty()):o.kind==="datetime"?ND(o).test(e.data)||(i=this._getOrReturnCtx(e,i),J(i,{code:K.invalid_string,validation:"datetime",message:o.message}),n.dirty()):o.kind==="date"?Y8.test(e.data)||(i=this._getOrReturnCtx(e,i),J(i,{code:K.invalid_string,validation:"date",message:o.message}),n.dirty()):o.kind==="time"?X8(o).test(e.data)||(i=this._getOrReturnCtx(e,i),J(i,{code:K.invalid_string,validation:"time",message:o.message}),n.dirty()):o.kind==="duration"?q8.test(e.data)||(i=this._getOrReturnCtx(e,i),J(i,{validation:"duration",code:K.invalid_string,message:o.message}),n.dirty()):o.kind==="ip"?J8(e.data,o.version)||(i=this._getOrReturnCtx(e,i),J(i,{validation:"ip",code:K.invalid_string,message:o.message}),n.dirty()):o.kind==="base64"?Z8.test(e.data)||(i=this._getOrReturnCtx(e,i),J(i,{validation:"base64",code:K.invalid_string,message:o.message}),n.dirty()):Oe.assertNever(o);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(i=>e.test(i),{validation:r,code:K.invalid_string,...le.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...le.errToObj(e)})}url(e){return this._addCheck({kind:"url",...le.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...le.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...le.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...le.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...le.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...le.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...le.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...le.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...le.errToObj(e)})}datetime(e){var r,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,local:(n=e?.local)!==null&&n!==void 0?n:!1,...le.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...le.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...le.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...le.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...le.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...le.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...le.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...le.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...le.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...le.errToObj(r)})}nonempty(e){return this.min(1,le.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};bo.create=t=>{var e;return new bo({checks:[],typeName:he.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Te(t)})};function e7(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,o=parseInt(t.toFixed(i).replace(".","")),s=parseInt(e.toFixed(i).replace(".",""));return o%s/Math.pow(10,i)}var ma=class t extends ve{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ee.number){let o=this._getOrReturnCtx(e);return J(o,{code:K.invalid_type,expected:ee.number,received:o.parsedType}),ye}let n,i=new Yt;for(let o of this._def.checks)o.kind==="int"?Oe.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),J(n,{code:K.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),J(n,{code:K.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),J(n,{code:K.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?e7(e.data,o.value)!==0&&(n=this._getOrReturnCtx(e,n),J(n,{code:K.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),J(n,{code:K.not_finite,message:o.message}),i.dirty()):Oe.assertNever(o);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,le.toString(r))}gt(e,r){return this.setLimit("min",e,!1,le.toString(r))}lte(e,r){return this.setLimit("max",e,!0,le.toString(r))}lt(e,r){return this.setLimit("max",e,!1,le.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:le.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:le.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:le.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:le.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:le.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:le.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:le.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:le.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:le.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:le.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Oe.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};ma.create=t=>new ma({checks:[],typeName:he.ZodNumber,coerce:t?.coerce||!1,...Te(t)});var da=class t extends ve{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==ee.bigint){let o=this._getOrReturnCtx(e);return J(o,{code:K.invalid_type,expected:ee.bigint,received:o.parsedType}),ye}let n,i=new Yt;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),J(n,{code:K.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),J(n,{code:K.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),J(n,{code:K.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):Oe.assertNever(o);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,le.toString(r))}gt(e,r){return this.setLimit("min",e,!1,le.toString(r))}lte(e,r){return this.setLimit("max",e,!0,le.toString(r))}lt(e,r){return this.setLimit("max",e,!1,le.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:le.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:le.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:le.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:le.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:le.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:le.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};da.create=t=>{var e;return new da({checks:[],typeName:he.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Te(t)})};var ha=class extends ve{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ee.boolean){let n=this._getOrReturnCtx(e);return J(n,{code:K.invalid_type,expected:ee.boolean,received:n.parsedType}),ye}return lr(e.data)}};ha.create=t=>new ha({typeName:he.ZodBoolean,coerce:t?.coerce||!1,...Te(t)});var ga=class t extends ve{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ee.date){let o=this._getOrReturnCtx(e);return J(o,{code:K.invalid_type,expected:ee.date,received:o.parsedType}),ye}if(isNaN(e.data.getTime())){let o=this._getOrReturnCtx(e);return J(o,{code:K.invalid_date}),ye}let n=new Yt,i;for(let o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(i=this._getOrReturnCtx(e,i),J(i,{code:K.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),n.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(i=this._getOrReturnCtx(e,i),J(i,{code:K.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),n.dirty()):Oe.assertNever(o);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:le.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:le.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};ga.create=t=>new ga({checks:[],coerce:t?.coerce||!1,typeName:he.ZodDate,...Te(t)});var Ks=class extends ve{_parse(e){if(this._getType(e)!==ee.symbol){let n=this._getOrReturnCtx(e);return J(n,{code:K.invalid_type,expected:ee.symbol,received:n.parsedType}),ye}return lr(e.data)}};Ks.create=t=>new Ks({typeName:he.ZodSymbol,...Te(t)});var ya=class extends ve{_parse(e){if(this._getType(e)!==ee.undefined){let n=this._getOrReturnCtx(e);return J(n,{code:K.invalid_type,expected:ee.undefined,received:n.parsedType}),ye}return lr(e.data)}};ya.create=t=>new ya({typeName:he.ZodUndefined,...Te(t)});var xa=class extends ve{_parse(e){if(this._getType(e)!==ee.null){let n=this._getOrReturnCtx(e);return J(n,{code:K.invalid_type,expected:ee.null,received:n.parsedType}),ye}return lr(e.data)}};xa.create=t=>new xa({typeName:he.ZodNull,...Te(t)});var wo=class extends ve{constructor(){super(...arguments),this._any=!0}_parse(e){return lr(e.data)}};wo.create=t=>new wo({typeName:he.ZodAny,...Te(t)});var Ui=class extends ve{constructor(){super(...arguments),this._unknown=!0}_parse(e){return lr(e.data)}};Ui.create=t=>new Ui({typeName:he.ZodUnknown,...Te(t)});var On=class extends ve{_parse(e){let r=this._getOrReturnCtx(e);return J(r,{code:K.invalid_type,expected:ee.never,received:r.parsedType}),ye}};On.create=t=>new On({typeName:he.ZodNever,...Te(t)});var Qs=class extends ve{_parse(e){if(this._getType(e)!==ee.undefined){let n=this._getOrReturnCtx(e);return J(n,{code:K.invalid_type,expected:ee.void,received:n.parsedType}),ye}return lr(e.data)}};Qs.create=t=>new Qs({typeName:he.ZodVoid,...Te(t)});var Hi=class t extends ve{_parse(e){let{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==ee.array)return J(r,{code:K.invalid_type,expected:ee.array,received:r.parsedType}),ye;if(i.exactLength!==null){let s=r.data.length>i.exactLength.value,l=r.data.length<i.exactLength.value;(s||l)&&(J(r,{code:s?K.too_big:K.too_small,minimum:l?i.exactLength.value:void 0,maximum:s?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(J(r,{code:K.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(J(r,{code:K.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((s,l)=>i.type._parseAsync(new xn(r,s,r.path,l)))).then(s=>Yt.mergeArray(n,s));let o=[...r.data].map((s,l)=>i.type._parseSync(new xn(r,s,r.path,l)));return Yt.mergeArray(n,o)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:le.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:le.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:le.toString(r)}})}nonempty(e){return this.min(1,e)}};Hi.create=(t,e)=>new Hi({type:t,minLength:null,maxLength:null,exactLength:null,typeName:he.ZodArray,...Te(e)});function qs(t){if(t instanceof Mr){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=yn.create(qs(n))}return new Mr({...t._def,shape:()=>e})}else return t instanceof Hi?new Hi({...t._def,type:qs(t.element)}):t instanceof yn?yn.create(qs(t.unwrap())):t instanceof oi?oi.create(qs(t.unwrap())):t instanceof ii?ii.create(t.items.map(e=>qs(e))):t}var Mr=class t extends ve{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=Oe.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==ee.object){let u=this._getOrReturnCtx(e);return J(u,{code:K.invalid_type,expected:ee.object,received:u.parsedType}),ye}let{status:n,ctx:i}=this._processInputParams(e),{shape:o,keys:s}=this._getCached(),l=[];if(!(this._def.catchall instanceof On&&this._def.unknownKeys==="strip"))for(let u in i.data)s.includes(u)||l.push(u);let p=[];for(let u of s){let m=o[u],d=i.data[u];p.push({key:{status:"valid",value:u},value:m._parse(new xn(i,d,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof On){let u=this._def.unknownKeys;if(u==="passthrough")for(let m of l)p.push({key:{status:"valid",value:m},value:{status:"valid",value:i.data[m]}});else if(u==="strict")l.length>0&&(J(i,{code:K.unrecognized_keys,keys:l}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let u=this._def.catchall;for(let m of l){let d=i.data[m];p.push({key:{status:"valid",value:m},value:u._parse(new xn(i,d,i.path,m)),alwaysSet:m in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let u=[];for(let m of p){let d=await m.key,g=await m.value;u.push({key:d,value:g,alwaysSet:m.alwaysSet})}return u}).then(u=>Yt.mergeObjectSync(n,u)):Yt.mergeObjectSync(n,p)}get shape(){return this._def.shape()}strict(e){return le.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var i,o,s,l;let p=(s=(o=(i=this._def).errorMap)===null||o===void 0?void 0:o.call(i,r,n).message)!==null&&s!==void 0?s:n.defaultError;return r.code==="unrecognized_keys"?{message:(l=le.errToObj(e).message)!==null&&l!==void 0?l:p}:{message:p}}}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:he.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};return Oe.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new t({...this._def,shape:()=>r})}omit(e){let r={};return Oe.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new t({...this._def,shape:()=>r})}deepPartial(){return qs(this)}partial(e){let r={};return Oe.objectKeys(this.shape).forEach(n=>{let i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}),new t({...this._def,shape:()=>r})}required(e){let r={};return Oe.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let o=this.shape[n];for(;o instanceof yn;)o=o._def.innerType;r[n]=o}}),new t({...this._def,shape:()=>r})}keyof(){return OD(Oe.objectKeys(this.shape))}};Mr.create=(t,e)=>new Mr({shape:()=>t,unknownKeys:"strip",catchall:On.create(),typeName:he.ZodObject,...Te(e)});Mr.strictCreate=(t,e)=>new Mr({shape:()=>t,unknownKeys:"strict",catchall:On.create(),typeName:he.ZodObject,...Te(e)});Mr.lazycreate=(t,e)=>new Mr({shape:t,unknownKeys:"strip",catchall:On.create(),typeName:he.ZodObject,...Te(e)});var Sa=class extends ve{_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function i(o){for(let l of o)if(l.result.status==="valid")return l.result;for(let l of o)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;let s=o.map(l=>new zr(l.ctx.common.issues));return J(r,{code:K.invalid_union,unionErrors:s}),ye}if(r.common.async)return Promise.all(n.map(async o=>{let s={...r,common:{...r.common,issues:[]},parent:null};return{result:await o._parseAsync({data:r.data,path:r.path,parent:s}),ctx:s}})).then(i);{let o,s=[];for(let p of n){let u={...r,common:{...r.common,issues:[]},parent:null},m=p._parseSync({data:r.data,path:r.path,parent:u});if(m.status==="valid")return m;m.status==="dirty"&&!o&&(o={result:m,ctx:u}),u.common.issues.length&&s.push(u.common.issues)}if(o)return r.common.issues.push(...o.ctx.common.issues),o.result;let l=s.map(p=>new zr(p));return J(r,{code:K.invalid_union,unionErrors:l}),ye}}get options(){return this._def.options}};Sa.create=(t,e)=>new Sa({options:t,typeName:he.ZodUnion,...Te(e)});var Li=t=>t instanceof va?Li(t.schema):t instanceof Gr?Li(t.innerType()):t instanceof ba?[t.value]:t instanceof wa?t.options:t instanceof _a?Oe.objectValues(t.enum):t instanceof Ea?Li(t._def.innerType):t instanceof ya?[void 0]:t instanceof xa?[null]:t instanceof yn?[void 0,...Li(t.unwrap())]:t instanceof oi?[null,...Li(t.unwrap())]:t instanceof Bl||t instanceof ka?Li(t.unwrap()):t instanceof Ra?Li(t._def.innerType):[],Vd=class t extends ve{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==ee.object)return J(r,{code:K.invalid_type,expected:ee.object,received:r.parsedType}),ye;let n=this.discriminator,i=r.data[n],o=this.optionsMap.get(i);return o?r.common.async?o._parseAsync({data:r.data,path:r.path,parent:r}):o._parseSync({data:r.data,path:r.path,parent:r}):(J(r,{code:K.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),ye)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let i=new Map;for(let o of r){let s=Li(o.shape[e]);if(!s.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let l of s){if(i.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);i.set(l,o)}}return new t({typeName:he.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...Te(n)})}};function Ev(t,e){let r=vo(t),n=vo(e);if(t===e)return{valid:!0,data:t};if(r===ee.object&&n===ee.object){let i=Oe.objectKeys(e),o=Oe.objectKeys(t).filter(l=>i.indexOf(l)!==-1),s={...t,...e};for(let l of o){let p=Ev(t[l],e[l]);if(!p.valid)return{valid:!1};s[l]=p.data}return{valid:!0,data:s}}else if(r===ee.array&&n===ee.array){if(t.length!==e.length)return{valid:!1};let i=[];for(let o=0;o<t.length;o++){let s=t[o],l=e[o],p=Ev(s,l);if(!p.valid)return{valid:!1};i.push(p.data)}return{valid:!0,data:i}}else return r===ee.date&&n===ee.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var Ta=class extends ve{_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=(o,s)=>{if(wv(o)||wv(s))return ye;let l=Ev(o.value,s.value);return l.valid?((_v(o)||_v(s))&&r.dirty(),{status:r.value,value:l.data}):(J(n,{code:K.invalid_intersection_types}),ye)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([o,s])=>i(o,s)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};Ta.create=(t,e,r)=>new Ta({left:t,right:e,typeName:he.ZodIntersection,...Te(r)});var ii=class t extends ve{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==ee.array)return J(n,{code:K.invalid_type,expected:ee.array,received:n.parsedType}),ye;if(n.data.length<this._def.items.length)return J(n,{code:K.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ye;!this._def.rest&&n.data.length>this._def.items.length&&(J(n,{code:K.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let o=[...n.data].map((s,l)=>{let p=this._def.items[l]||this._def.rest;return p?p._parse(new xn(n,s,n.path,l)):null}).filter(s=>!!s);return n.common.async?Promise.all(o).then(s=>Yt.mergeArray(r,s)):Yt.mergeArray(r,o)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};ii.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ii({items:t,typeName:he.ZodTuple,rest:null,...Te(e)})};var Bd=class t extends ve{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==ee.object)return J(n,{code:K.invalid_type,expected:ee.object,received:n.parsedType}),ye;let i=[],o=this._def.keyType,s=this._def.valueType;for(let l in n.data)i.push({key:o._parse(new xn(n,l,n.path,l)),value:s._parse(new xn(n,n.data[l],n.path,l)),alwaysSet:l in n.data});return n.common.async?Yt.mergeObjectAsync(r,i):Yt.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof ve?new t({keyType:e,valueType:r,typeName:he.ZodRecord,...Te(n)}):new t({keyType:bo.create(),valueType:e,typeName:he.ZodRecord,...Te(r)})}},Zs=class extends ve{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==ee.map)return J(n,{code:K.invalid_type,expected:ee.map,received:n.parsedType}),ye;let i=this._def.keyType,o=this._def.valueType,s=[...n.data.entries()].map(([l,p],u)=>({key:i._parse(new xn(n,l,n.path,[u,"key"])),value:o._parse(new xn(n,p,n.path,[u,"value"]))}));if(n.common.async){let l=new Map;return Promise.resolve().then(async()=>{for(let p of s){let u=await p.key,m=await p.value;if(u.status==="aborted"||m.status==="aborted")return ye;(u.status==="dirty"||m.status==="dirty")&&r.dirty(),l.set(u.value,m.value)}return{status:r.value,value:l}})}else{let l=new Map;for(let p of s){let u=p.key,m=p.value;if(u.status==="aborted"||m.status==="aborted")return ye;(u.status==="dirty"||m.status==="dirty")&&r.dirty(),l.set(u.value,m.value)}return{status:r.value,value:l}}}};Zs.create=(t,e,r)=>new Zs({valueType:e,keyType:t,typeName:he.ZodMap,...Te(r)});var Ys=class t extends ve{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==ee.set)return J(n,{code:K.invalid_type,expected:ee.set,received:n.parsedType}),ye;let i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(J(n,{code:K.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(J(n,{code:K.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());let o=this._def.valueType;function s(p){let u=new Set;for(let m of p){if(m.status==="aborted")return ye;m.status==="dirty"&&r.dirty(),u.add(m.value)}return{status:r.value,value:u}}let l=[...n.data.values()].map((p,u)=>o._parse(new xn(n,p,n.path,u)));return n.common.async?Promise.all(l).then(p=>s(p)):s(l)}min(e,r){return new t({...this._def,minSize:{value:e,message:le.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:le.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};Ys.create=(t,e)=>new Ys({valueType:t,minSize:null,maxSize:null,typeName:he.ZodSet,...Te(e)});var Wd=class t extends ve{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==ee.function)return J(r,{code:K.invalid_type,expected:ee.function,received:r.parsedType}),ye;function n(l,p){return Ud({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Ld(),Gs].filter(u=>!!u),issueData:{code:K.invalid_arguments,argumentsError:p}})}function i(l,p){return Ud({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Ld(),Gs].filter(u=>!!u),issueData:{code:K.invalid_return_type,returnTypeError:p}})}let o={errorMap:r.common.contextualErrorMap},s=r.data;if(this._def.returns instanceof _o){let l=this;return lr(async function(...p){let u=new zr([]),m=await l._def.args.parseAsync(p,o).catch(x=>{throw u.addIssue(n(p,x)),u}),d=await Reflect.apply(s,this,m);return await l._def.returns._def.type.parseAsync(d,o).catch(x=>{throw u.addIssue(i(d,x)),u})})}else{let l=this;return lr(function(...p){let u=l._def.args.safeParse(p,o);if(!u.success)throw new zr([n(p,u.error)]);let m=Reflect.apply(s,this,u.data),d=l._def.returns.safeParse(m,o);if(!d.success)throw new zr([i(m,d.error)]);return d.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:ii.create(e).rest(Ui.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||ii.create([]).rest(Ui.create()),returns:r||Ui.create(),typeName:he.ZodFunction,...Te(n)})}},va=class extends ve{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};va.create=(t,e)=>new va({getter:t,typeName:he.ZodLazy,...Te(e)});var ba=class extends ve{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return J(r,{received:r.data,code:K.invalid_literal,expected:this._def.value}),ye}return{status:"valid",value:e.data}}get value(){return this._def.value}};ba.create=(t,e)=>new ba({value:t,typeName:he.ZodLiteral,...Te(e)});function OD(t,e){return new wa({values:t,typeName:he.ZodEnum,...Te(e)})}var wa=class t extends ve{constructor(){super(...arguments),Ll.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return J(r,{expected:Oe.joinValues(n),received:r.parsedType,code:K.invalid_type}),ye}if(Hd(this,Ll,"f")||FD(this,Ll,new Set(this._def.values),"f"),!Hd(this,Ll,"f").has(e.data)){let r=this._getOrReturnCtx(e),n=this._def.values;return J(r,{received:r.data,code:K.invalid_enum_value,options:n}),ye}return lr(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}};Ll=new WeakMap;wa.create=OD;var _a=class extends ve{constructor(){super(...arguments),Ul.set(this,void 0)}_parse(e){let r=Oe.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==ee.string&&n.parsedType!==ee.number){let i=Oe.objectValues(r);return J(n,{expected:Oe.joinValues(i),received:n.parsedType,code:K.invalid_type}),ye}if(Hd(this,Ul,"f")||FD(this,Ul,new Set(Oe.getValidEnumValues(this._def.values)),"f"),!Hd(this,Ul,"f").has(e.data)){let i=Oe.objectValues(r);return J(n,{received:n.data,code:K.invalid_enum_value,options:i}),ye}return lr(e.data)}get enum(){return this._def.values}};Ul=new WeakMap;_a.create=(t,e)=>new _a({values:t,typeName:he.ZodNativeEnum,...Te(e)});var _o=class extends ve{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==ee.promise&&r.common.async===!1)return J(r,{code:K.invalid_type,expected:ee.promise,received:r.parsedType}),ye;let n=r.parsedType===ee.promise?r.data:Promise.resolve(r.data);return lr(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}};_o.create=(t,e)=>new _o({type:t,typeName:he.ZodPromise,...Te(e)});var Gr=class extends ve{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===he.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,o={addIssue:s=>{J(n,s),s.fatal?r.abort():r.dirty()},get path(){return n.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){let s=i.transform(n.data,o);if(n.common.async)return Promise.resolve(s).then(async l=>{if(r.value==="aborted")return ye;let p=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return p.status==="aborted"?ye:p.status==="dirty"||r.value==="dirty"?zs(p.value):p});{if(r.value==="aborted")return ye;let l=this._def.schema._parseSync({data:s,path:n.path,parent:n});return l.status==="aborted"?ye:l.status==="dirty"||r.value==="dirty"?zs(l.value):l}}if(i.type==="refinement"){let s=l=>{let p=i.refinement(l,o);if(n.common.async)return Promise.resolve(p);if(p instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){let l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?ye:(l.status==="dirty"&&r.dirty(),s(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?ye:(l.status==="dirty"&&r.dirty(),s(l.value).then(()=>({status:r.value,value:l.value}))))}if(i.type==="transform")if(n.common.async===!1){let s=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Hl(s))return s;let l=i.transform(s.value,o);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(s=>Hl(s)?Promise.resolve(i.transform(s.value,o)).then(l=>({status:r.value,value:l})):s);Oe.assertNever(i)}};Gr.create=(t,e,r)=>new Gr({schema:t,typeName:he.ZodEffects,effect:e,...Te(r)});Gr.createWithPreprocess=(t,e,r)=>new Gr({schema:e,effect:{type:"preprocess",transform:t},typeName:he.ZodEffects,...Te(r)});var yn=class extends ve{_parse(e){return this._getType(e)===ee.undefined?lr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};yn.create=(t,e)=>new yn({innerType:t,typeName:he.ZodOptional,...Te(e)});var oi=class extends ve{_parse(e){return this._getType(e)===ee.null?lr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};oi.create=(t,e)=>new oi({innerType:t,typeName:he.ZodNullable,...Te(e)});var Ea=class extends ve{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===ee.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};Ea.create=(t,e)=>new Ea({innerType:t,typeName:he.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Te(e)});var Ra=class extends ve{_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Vl(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new zr(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new zr(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};Ra.create=(t,e)=>new Ra({innerType:t,typeName:he.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Te(e)});var Xs=class extends ve{_parse(e){if(this._getType(e)!==ee.nan){let n=this._getOrReturnCtx(e);return J(n,{code:K.invalid_type,expected:ee.nan,received:n.parsedType}),ye}return{status:"valid",value:e.data}}};Xs.create=t=>new Xs({typeName:he.ZodNaN,...Te(t)});var t7=Symbol("zod_brand"),Bl=class extends ve{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},Wl=class t extends ve{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let o=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?ye:o.status==="dirty"?(r.dirty(),zs(o.value)):this._def.out._parseAsync({data:o.value,path:n.path,parent:n})})();{let i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?ye:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:he.ZodPipeline})}},ka=class extends ve{_parse(e){let r=this._def.innerType._parse(e),n=i=>(Hl(i)&&(i.value=Object.freeze(i.value)),i);return Vl(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}};ka.create=(t,e)=>new ka({innerType:t,typeName:he.ZodReadonly,...Te(e)});function LD(t,e={},r){return t?wo.create().superRefine((n,i)=>{var o,s;if(!t(n)){let l=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,p=(s=(o=l.fatal)!==null&&o!==void 0?o:r)!==null&&s!==void 0?s:!0,u=typeof l=="string"?{message:l}:l;i.addIssue({code:"custom",...u,fatal:p})}}):wo.create()}var r7={object:Mr.lazycreate},he;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(he||(he={}));var n7=(t,e={message:`Input not instance of ${t.name}`})=>LD(r=>r instanceof t,e),UD=bo.create,HD=ma.create,i7=Xs.create,o7=da.create,VD=ha.create,a7=ga.create,s7=Ks.create,c7=ya.create,l7=xa.create,p7=wo.create,u7=Ui.create,f7=On.create,m7=Qs.create,d7=Hi.create,h7=Mr.create,g7=Mr.strictCreate,y7=Sa.create,x7=Vd.create,S7=Ta.create,T7=ii.create,v7=Bd.create,b7=Zs.create,w7=Ys.create,_7=Wd.create,E7=va.create,R7=ba.create,k7=wa.create,P7=_a.create,A7=_o.create,MD=Gr.create,M7=yn.create,D7=oi.create,F7=Gr.createWithPreprocess,I7=Wl.create,C7=()=>UD().optional(),N7=()=>HD().optional(),O7=()=>VD().optional(),L7={string:t=>bo.create({...t,coerce:!0}),number:t=>ma.create({...t,coerce:!0}),boolean:t=>ha.create({...t,coerce:!0}),bigint:t=>da.create({...t,coerce:!0}),date:t=>ga.create({...t,coerce:!0})},U7=ye,qe=Object.freeze({__proto__:null,defaultErrorMap:Gs,setErrorMap:U8,getErrorMap:Ld,makeIssue:Ud,EMPTY_PATH:H8,addIssueToContext:J,ParseStatus:Yt,INVALID:ye,DIRTY:zs,OK:lr,isAborted:wv,isDirty:_v,isValid:Hl,isAsync:Vl,get util(){return Oe},get objectUtil(){return bv},ZodParsedType:ee,getParsedType:vo,ZodType:ve,datetimeRegex:ND,ZodString:bo,ZodNumber:ma,ZodBigInt:da,ZodBoolean:ha,ZodDate:ga,ZodSymbol:Ks,ZodUndefined:ya,ZodNull:xa,ZodAny:wo,ZodUnknown:Ui,ZodNever:On,ZodVoid:Qs,ZodArray:Hi,ZodObject:Mr,ZodUnion:Sa,ZodDiscriminatedUnion:Vd,ZodIntersection:Ta,ZodTuple:ii,ZodRecord:Bd,ZodMap:Zs,ZodSet:Ys,ZodFunction:Wd,ZodLazy:va,ZodLiteral:ba,ZodEnum:wa,ZodNativeEnum:_a,ZodPromise:_o,ZodEffects:Gr,ZodTransformer:Gr,ZodOptional:yn,ZodNullable:oi,ZodDefault:Ea,ZodCatch:Ra,ZodNaN:Xs,BRAND:t7,ZodBranded:Bl,ZodPipeline:Wl,ZodReadonly:ka,custom:LD,Schema:ve,ZodSchema:ve,late:r7,get ZodFirstPartyTypeKind(){return he},coerce:L7,any:p7,array:d7,bigint:o7,boolean:VD,date:a7,discriminatedUnion:x7,effect:MD,enum:k7,function:_7,instanceof:n7,intersection:S7,lazy:E7,literal:R7,map:b7,nan:i7,nativeEnum:P7,never:f7,null:l7,nullable:D7,number:HD,object:h7,oboolean:O7,onumber:N7,optional:M7,ostring:C7,pipeline:I7,preprocess:F7,promise:A7,record:v7,set:w7,strictObject:g7,string:UD,symbol:s7,transformer:MD,tuple:T7,undefined:c7,union:y7,unknown:u7,void:m7,NEVER:U7,ZodIssueCode:K,quotelessJson:L8,ZodError:zr});function BD(t){let e=t.operands.map(Rv).join(" ");return`(#${t.operator} ${e})`}function Rv(t){return t.type==="capture"?`@${t.name}`:t.value}function WD(t,e){return e.errors.filter(r=>!(r.code==="invalid_type"&&r.path.length===2&&(r.path[1]==="name"||r.path[1]==="value"))).map(r=>H7(t,r))}function H7(t,e){if(e.path.length===0)return e.code==="too_small"?"Too few arguments":e.code==="too_big"?"Too many arguments":e.message;let r=e.message;e.code==="invalid_literal"&&e.path[1]==="type"&&(r=e.expected==="capture"?"Capture names must be prefixed with @":"Expected string, but received capture");let n=e.path[0],i=Rv(t[n]);return`Error on argument ${n} (\`${i}\`): ${r}`}var pr=class{allowMissingNode(){return!1}createPredicate(e){let r=this.schema.safeParse(e);return r.success?{success:!0,predicate:n=>{try{let i=this.constructAcceptArgs(r.data,n);return this.run(...i)}catch(i){if(i instanceof $d&&this.allowMissingNode())return!0;throw i}}}:{success:!1,errors:WD(e,r.error)}}constructAcceptArgs(e,r){return e.map(n=>{if(n.type==="capture"){let i=r.captures.find(o=>o.name===n.name);if(i==null)throw new $d(n.name);return i}else return n.value})}},$d=class extends Error{constructor(e){super(`Could not find capture ${e}`)}};var kv=qe.object({type:qe.literal("string"),value:qe.string()}),_e={node:qe.object({type:qe.literal("capture"),name:qe.string()}),string:kv,integer:kv.transform((t,e)=>{let r=parseInt(t.value);return isNaN(r)?(e.addIssue({code:qe.ZodIssueCode.custom,message:"Expected an integer"}),qe.NEVER):{type:"integer",value:r}}),boolean:kv.transform((t,e)=>t.value==="true"?{type:"boolean",value:!0}:t.value==="false"?{type:"boolean",value:!1}:(e.addIssue({code:qe.ZodIssueCode.custom,message:"Expected true or false"}),qe.NEVER))};var Pv=class extends pr{constructor(){super(...arguments);this.name="not-type?";this.schema=qe.tuple([_e.node,_e.string]).rest(_e.string)}run({node:r},...n){return!n.includes(r.type)}},Av=class extends pr{constructor(){super(...arguments);this.name="not-parent-type?";this.schema=qe.tuple([_e.node,_e.string]).rest(_e.string)}run({node:r},...n){return r.parent==null||!n.includes(r.parent.type)}},Mv=class extends pr{constructor(){super(...arguments);this.name="is-nth-child?";this.schema=qe.tuple([_e.node,_e.integer])}run({node:r},n){return r.parent?.children.findIndex(i=>i.id===r.id)===n}},Dv=class extends pr{constructor(){super(...arguments);this.name="has-multiple-children-of-type?";this.schema=qe.tuple([_e.node,_e.string])}run({node:r},n){return r.children.filter(o=>o.type===n).length>1}},Fv=class extends pr{constructor(){super(...arguments);this.name="child-range!";this.schema=qe.union([qe.tuple([_e.node,_e.integer]),qe.tuple([_e.node,_e.integer,_e.integer]),qe.tuple([_e.node,_e.integer,_e.integer,_e.boolean]),qe.tuple([_e.node,_e.integer,_e.integer,_e.boolean,_e.boolean])])}run(r,n,i,o,s){let{node:{children:l}}=r;n=n<0?l.length+n:n,i=i??-1,i=i<0?l.length+i:i;let p=l[n],u=l[i];return r.range=gn(o?p.endPosition:p.startPosition,s?u.startPosition:u.endPosition),!0}},Iv=class extends pr{constructor(){super(...arguments);this.name="character-range!";this.schema=qe.union([qe.tuple([_e.node,_e.integer]),qe.tuple([_e.node,_e.integer,_e.integer])])}run(r,n,i){return r.range=new $(r.range.start.translate(void 0,n),r.range.end.translate(void 0,i??0)),!0}},Cv=class extends pr{constructor(){super(...arguments);this.name="shrink-to-match!";this.schema=qe.tuple([_e.node,_e.string])}run(r,n){let{document:i,range:o}=r,l=i.getText(o).match(new RegExp(n,"ds"));if(l?.index==null)throw Error(`No match for pattern '${n}'`);let[p,u]=l.indices?.groups?.keep??l.indices[0],m=i.offsetAt(o.start);return r.range=new $(i.positionAt(m+p),i.positionAt(m+u)),!0}},Nv=class extends pr{constructor(){super(...arguments);this.name="trim-end!";this.schema=qe.tuple([_e.node])}run(r){let{document:n,range:i}=r,o=n.getText(i),s=o.length-o.trimEnd().length;return s>0&&(r.range=new $(i.start,Uk(n,i.end,-s))),!0}},Ov=class extends pr{constructor(){super(...arguments);this.name="allow-multiple!";this.schema=qe.tuple([_e.node])}allowMissingNode(){return!0}run(r){return r.allowMultiple=!0,!0}},Lv=class extends pr{constructor(){super(...arguments);this.name="log!";this.schema=qe.tuple([_e.node])}run(r){return console.log(`#log!: ${r.name}@${r.range}`),!0}},Uv=class extends pr{constructor(){super(...arguments);this.name="insertion-delimiter!";this.schema=qe.tuple([_e.node,_e.string])}run(r,n){return r.insertionDelimiter=n,!0}},Hv=class extends pr{constructor(){super(...arguments);this.name="single-or-multi-line-delimiter!";this.schema=qe.tuple([_e.node,_e.node,_e.string,_e.string])}run(r,n,i,o){return r.insertionDelimiter=n.range.isSingleLine?i:o,!0}},$D=[new Lv,new Pv,new Nv,new Av,new Mv,new Fv,new Iv,new Cv,new Ov,new Uv,new Hv,new Dv];function jD(t){let e=[],r=[];return t.forEach((n,i)=>{let o=[];n.forEach((s,l)=>{let p=$D.find(({name:m})=>m===s.operator);if(p==null){e.push({patternIdx:i,predicateIdx:l,error:`Unknown predicate operator "${s.operator}"`});return}let u=p.createPredicate(s.operands);if(!u.success){e.push(...u.errors.map(m=>({patternIdx:i,predicateIdx:l,error:m})));return}o.push(u.predicate)}),r.push(o)}),{errors:e,predicates:r}}function qD(t,e){let{errors:r,predicates:n}=jD(e.predicates);if(r.length>0){for(let i of r){let o=[`language ${t}`,`pattern ${i.patternIdx}`,`predicate \`${BD(e.predicates[i.patternIdx][i.predicateIdx])}\``].join(", ");ct(k().messages,"TreeSitterQuery.parsePredicates",`Error parsing predicate for ${o}: ${i.error}`)}if(k().runMode==="test")throw new Error("Invalid predicates")}return n}function Vv(t){return{row:t.line,column:t.character}}function zD(t){return t.map(e=>({...e,range:Bv(e),name:V7(e)}))}function Bv(t){return t.name.endsWith(".startOf")?t.range.start.toEmptyRange():t.name.endsWith(".endOf")?t.range.end.toEmptyRange():t.range}function V7(t){return t.name.endsWith(".startOf")?t.name.slice(0,-8):t.name.endsWith(".endOf")?t.name.slice(0,-6):t.name}var Wv=class{constructor(){this.documentVersion=-1;this.documentUri="";this.documentLanguageId="";this.matches=[]}clear(){this.documentUri="",this.documentVersion=-1,this.documentLanguageId="",this.startPosition=void 0,this.endPosition=void 0,this.matches=[]}isValid(e,r,n){return this.documentVersion===e.version&&this.documentUri===e.uri.toString()&&this.documentLanguageId===e.languageId&&GD(this.startPosition,r)&&GD(this.endPosition,n)}update(e,r,n,i){this.documentVersion=e.version,this.documentUri=e.uri.toString(),this.documentLanguageId=e.languageId,this.startPosition=r,this.endPosition=n,this.matches=i}get(){return this.matches}};function GD(t,e){return t==null||e==null?t===e:t.isEqual(e)}var Pa=new Wv;var $l=class t{constructor(e,r,n){this.treeSitter=e;this.query=r;this.patternPredicates=n;this.shouldCheckCaptures=k().runMode!=="production"}static create(e,r,n){let i=qD(e,n);return new t(r,n,i)}hasCapture(e){return this.query.captureNames.some(r=>Tv(r)===e)}matches(e,r,n){if(!Pa.isValid(e,r,n)){let i=this.getAllMatches(e,r,n);Pa.update(e,r,n,i)}return Pa.get()}getAllMatches(e,r,n){let i=this.getTreeMatches(e,r,n),o=[];for(let s of i){let l=this.createMutableQueryMatch(e,s);this.runPredicates(l)&&o.push(this.createQueryMatch(l))}return o}getTreeMatches(e,r,n){let{rootNode:i}=this.treeSitter.getTree(e);return this.query.matches(i,{startPosition:r!=null?Vv(r):void 0,endPosition:n!=null?Vv(n):void 0})}createMutableQueryMatch(e,r){return{patternIdx:r.pattern,captures:r.captures.map(({name:n,node:i})=>({name:n,node:i,document:e,range:vD(i),insertionDelimiter:void 0,allowMultiple:!1,hasError:()=>PD(i)}))}}runPredicates(e){for(let r of this.patternPredicates[e.patternIdx])if(!r(e))return!1;return!0}createQueryMatch(e){let r=[],n=new Map;for(let i of e.captures){let o=Tv(i.name),s=Bv(i),l=n.get(o);if(l==null){let p=[i],u={...i,name:o,range:s,hasError:()=>p.some(m=>m.hasError())};r.push(u),n.set(o,{acc:u,captures:p})}else l.acc.range=l.acc.range.union(s),l.acc.allowMultiple=l.acc.allowMultiple||i.allowMultiple,l.acc.insertionDelimiter=l.acc.insertionDelimiter??i.insertionDelimiter,l.captures.push(i)}return this.shouldCheckCaptures&&this.checkCaptures(Array.from(n.values())),{captures:r}}checkCaptures(e){for(let r of e)if(!kD(zD(r.captures),k().messages)&&k().runMode==="test")throw new Error("Invalid captures")}};var QD="_",B7=[QD,"interior",...na],W7=["prefix","leading","trailing"],$7=["startOf","endOf","start.startOf","start.endOf","end.startOf","end.endOf"],j7=["domain","removal","iteration","iteration.domain"],KD=["start","end","start.startOf","start.endOf","end.startOf","end.endOf"],Aa=new Set;for(let t of B7){if(t!==QD){Aa.add(t);for(let e of KD)Aa.add(`${t}.${e}`)}for(let e of W7){Aa.add(`${t}.${e}`);for(let r of $7)Aa.add(`${t}.${e}.${r}`)}for(let e of j7){Aa.add(`${t}.${e}`);for(let r of KD)Aa.add(`${t}.${e}.${r}`)}}var q7=/^(?!;;).*(?<!"\w*)@([\w.]*)/gm;function ZD(t,e){let r=e.matchAll(q7),n=[];for(let o of r){let s=o[1];if(!(s.length>1&&!s.includes(".")&&s.startsWith("_"))&&!Aa.has(s)){let l=o.input.slice(0,o.index).split(`
`).length;n.push(`${t}(${l}) invalid capture '@${s}'.`)}}if(n.length===0)return;let i=n.join(`
`);if(ct(k().messages,"validateQueryCaptures.invalidCaptureName",i),k().runMode==="test")throw new Error(i)}var jd=class t{constructor(e){this.query=e}static async create(e,r,n,i){let o=await z7(e,r,`${i}.scm`);if(o==null||!await n.loadLanguage(i))return;let s=n.getLanguage(i).query(o),l=$l.create(i,n,s);return new t(l)}getScopeHandler(e){if(this.query.hasCapture(e.type))return new gd(this.query,e)}getCapturesMap(e){let r=this.query.matches(e),n={};for(let i of r)for(let o of i.captures){let s=o.name;n[s]==null&&(n[s]=[]),n[s].push(o)}return n}};async function z7(t,e,r){let n={[r]:null},i=t.runMode!=="production";for(;Object.values(n).some(o=>o==null);)for(let[o,s]of Object.entries(n)){if(s!=null)continue;let l=await e.readQuery(o);if(l==null){if(o===r)return;if(ct(t.messages,"LanguageDefinition.readQueryFileAndImports.queryNotFound",`Could not find imported query file ${o}`),t.runMode==="test")throw new Error("Invalid import statement");l=""}i&&ZD(o,l),n[o]=l,ln(l,/^[^\S\r\n]*;;?[^\S\r\n]*(?:import|include)[^\S\r\n]+['"]?([\w|/\\.]+)['"]?[^\S\r\n]*$/gm,p=>{let u=p[1];i&&G7(t,o,u,p[0]),n[u]=n[u]??null})}return Object.values(n).join(`
`)}function G7(t,e,r,n){let i=!1;/[/\\]/g.test(r)&&(ct(t.messages,"LanguageDefinition.readQueryFileAndImports.invalidImport",`Invalid import statement in ${e}: "${n}". Relative import paths not supported`),i=!0);let o=`;; import ${r}`;if(n!==o&&(ct(t.messages,"LanguageDefinition.readQueryFileAndImports.malformedImport",`Malformed import statement in ${e}: "${n}". Import statements must be of the form "${o}"`),i=!0),i&&t.runMode==="test")throw new Error("Invalid import statement")}var YD=Symbol("LANGUAGE_UNDEFINED"),qd=class t{constructor(e,r,n){this.ide=e;this.treeSitter=r;this.treeSitterQueryProvider=n;this.notifier=new Gt;this.languageDefinitions=new Map;this.disposables=[];this.onDidChangeDefinition=this.notifier.registerListener;let i=e.runMode==="test";e.onDidOpenTextDocument(o=>{i&&Pa.clear(),this.loadLanguage(o.languageId)}),e.onDidChangeVisibleTextEditors(o=>{o.forEach(({document:s})=>this.loadLanguage(s.languageId))}),this.disposables.push(n.onChanges(()=>this.reloadLanguageDefinitions()))}static async create(e,r,n){let i=new t(e,r,n);return await i.loadAllLanguages(),i}async loadAllLanguages(){let e=this.ide.visibleTextEditors.map(({document:r})=>r.languageId);try{await Promise.all(e.map(r=>this.loadLanguage(r)))}catch(r){if(ct(this.ide.messages,"Failed to load language definitions",In(r)),this.ide.runMode==="test")throw r}}async loadLanguage(e){if(this.languageDefinitions.has(e))return;let r=await jd.create(this.ide,this.treeSitterQueryProvider,this.treeSitter,e)??YD;this.languageDefinitions.set(e,r)}async reloadLanguageDefinitions(){this.languageDefinitions.clear(),await this.loadAllLanguages(),Pa.clear(),this.notifier.notifyListeners()}get(e){let r=this.languageDefinitions.get(e);if(r==null)throw new Error("Expected language definition entry is missing for languageId "+e);return r===YD?void 0:r}getNodeAtLocation(e,r){return this.treeSitter.getNodeAtLocation(e,r)}dispose(){this.disposables.forEach(e=>e.dispose())}};var zd=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}get nestedStages(){return this.nestedStages_==null&&(this.nestedStages_=this.modifier.modifiers.map(this.modifierStageFactory.create)),this.nestedStages_}run(e){for(let r of this.nestedStages)try{return r.run(e)}catch{continue}throw new Error("No modifier could be applied")}};var Js=class{constructor(e,r){this.modifierStageFactory=e;this.nestedModifier=r;this.suppressErrors=!1}run(e){if(this.shouldModify(e))try{return this.nestedStage.run(e).map(r=>r.withThatTarget(e))}catch(r){if(!this.suppressErrors)throw r}return[e]}get nestedStage(){return this.nestedStage_==null&&(this.nestedStage_=this.modifierStageFactory.create(this.nestedModifier)),this.nestedStage_}},Eo=class extends Js{constructor(e,r){super(e,r.modifier)}shouldModify(e){return!e.hasExplicitScopeType}},Gd=class extends Js{constructor(r,n,i){super(r,n);this.modificationCondition=i}shouldModify(r){return this.modificationCondition(r)}},ec=class extends Js{shouldModify(e){return!e.hasExplicitScopeType&&!e.isImplicit}},tc=class extends Js{constructor(r){super(r,{type:"containingScope",scopeType:{type:"token"}});this.suppressErrors=!0}shouldModify(r){return!r.hasExplicitScopeType&&!r.hasExplicitRange&&r.contentRange.isEmpty}};function XD(t,e){return Object.getPrototypeOf(t).constructor===Object.getPrototypeOf(e).constructor}function rc(t,e,r,n,i){if(e.editor!==r.editor)throw Error("Continuous targets must be in the same editor");if(n&&i&&XD(e,r)){let o=e.maybeCreateRichRangeTarget(t,r);if(o!=null)return o}return e.textualType==="line"&&r.textualType==="line"?new cr({editor:e.editor,isReversed:t,contentRange:Ms(e,r,n,i)}):new It({editor:e.editor,isReversed:t,hasExplicitRange:!0,contentRange:As(e,r,n,i),textualType:n&&i&&e.textualType==="token"&&r.textualType==="token"?"token":"character"})}function Kd(t,e,r){if(e===r)return e.getTargets(t);let n=e.getTargets(t),i=r.getTargets(t);if(n.length!==1||i.length!==1)throw Error("Scope range targets must be single-target");let[o]=n,[s]=i,l=s.contentRange.start.isAfterOrEqual(o.contentRange.start),[p,u]=l?[o,s]:[s,o];return[rc(t,p,u,!0,!0)]}function Qd(t,e,r,n){let i=Array.from(t.generateScopes(e,r,"forward",{containment:"required",allowAdjacentScopes:!0,skipAncestorScopes:!0}));switch(i.length){case 0:return;case 1:return i[0];case 2:{let[o,s]=i;return n==="forward"?s:n==="backward"||(t.isPreferredOver?.(o,s)??!1)?o:s}default:throw new Error("Expected no more than 2 scope candidates")}}function Zd(t,e,r=0){let{isReversed:n,editor:i,contentRange:{start:o,end:s}}=t;if(s.isEqual(o)){let u=Qd(e,i,o);return u==null||(r>0&&(u=$v(e,i,u.domain.end,"forward",r,!0)),u==null)?void 0:u.getTargets(n)}let l=$v(e,i,o,"forward",r);if(l==null)return;if(l.domain.contains(s))return l.getTargets(n);let p=$v(e,i,s,"backward",r);if(p!=null)return Kd(n,l,p)}function $v(t,e,r,n,i,o=!1){let s=0;for(let l of t.generateScopes(e,r,n,{containment:"required",allowAdjacentScopes:o})){if(s===i)return l;s+=1}}var nc=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let{scopeType:r,ancestorIndex:n=0}=this.modifier,i=this.scopeHandlerFactory.maybeCreate(r,e.editor.document.languageId);if(i==null)return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e);let o=Zd(e,i,n);if(o==null)throw new mt(r.type);return o}};var Yd=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let{scopeType:r}=this.modifier,{editor:n,isReversed:i}=e,o=this.scopeHandlerFactory.maybeCreate(r,n.document.languageId);if(o==null)return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e);let s;if(e.hasExplicitRange&&(s=JD(o,n,e.contentRange),s.length===1&&s[0].domain.contains(e.contentRange)&&!e.hasExplicitScopeType&&(s=void 0)),s==null&&(s=this.getDefaultIterationRange(o,this.scopeHandlerFactory,e).flatMap(l=>JD(o,n,l))),s.length===0)throw new mt(r.type);return s.flatMap(l=>l.getTargets(i))}getDefaultIterationRange(e,r,n){let i=r.maybeCreate(e.iterationScopeType,n.editor.document.languageId);if(i==null)throw Error("Could not find iteration scope handler");let o=Zd(n,i);if(o==null)throw new mt(`iteration scope for ${e.scopeType.type}`);return o.map(s=>s.contentRange)}};function JD(t,e,{start:r,end:n}){return Array.from(t.generateScopes(e,r,"forward",{distalPosition:n,skipAncestorScopes:!0,allowAdjacentScopes:t.includeAdjacentInEvery}))}var Xd=class{constructor(e){this.modifier=e}run(e){return e.contentText.trim()!==""?[e]:[]}},Jd=class{constructor(e){this.modifier=e}run(e){return e.contentText.trim()===""?[e]:[]}};var eh=class{run(){return Vm(k()).map(e=>new Lm({editor:e.editor,isReversed:e.selection.isReversed,contentRange:e.selection}))}};var th=class{constructor(e,r){this.modifierStageFactory=e;this.markStageFactory=r}run(e,{actionFinalStages:r=[],noAutomaticTokenExpansion:n=!1}={}){return new jv(this.modifierStageFactory,this.markStageFactory,e,{actionFinalStages:r,noAutomaticTokenExpansion:n}).run()}},jv=class{constructor(e,r,n,i){this.modifierStageFactory=e;this.markStageFactory=r;this.target=n;this.opts=i}run(){return Q7(this.processTarget(this.target))}processTarget(e){switch(e.type){case"list":return e.elements.flatMap(r=>this.processTarget(r));case"range":return this.processRangeTarget(e);case"primitive":case"implicit":return this.processPrimitiveTarget(e)}}processRangeTarget(e){let r=this.processPrimitiveTarget(e.anchor),n=this.processPrimitiveTarget(e.active);return Rt(r,n).flatMap(([i,o])=>{if(i==null||o==null)throw new Error("AnchorTargets and activeTargets lengths don't match");switch(e.rangeType){case"continuous":return this.processContinuousRangeTarget(i,o,e);case"vertical":return Z7(i,o,e.excludeAnchor,e.excludeActive)}})}processContinuousRangeTarget(e,r,{excludeAnchor:n,excludeActive:i,exclusionScopeType:o}){if(o==null)return[Ro(e,r,n,i)];let s=Gv(e,r);return[Ro(n?eF(this.modifierStageFactory,e,o,s?"backward":"forward"):e,i?eF(this.modifierStageFactory,r,o,s?"forward":"backward"):r,!1,!1)]}processPrimitiveTarget(e){let r,n,i=!1;e.type==="implicit"?(r=new eh,n=[]):(r=this.markStageFactory.create(e.mark),n=qv(this.modifierStageFactory,e.modifiers),i=K7(e));let o=r.run(),[s,l]=this.getPreAndPostStages(i),p=[...s,...n,...this.opts.actionFinalStages,...l];return zv(p,o)}getPreAndPostStages(e){if(this.opts.noAutomaticTokenExpansion)return[[],[]];let r=new tc(this.modifierStageFactory);return e?[[r],[]]:[[],[r]]}};function K7(t){return t.modifiers.length>0&&t.modifiers.every(({type:e})=>e==="startOf"||e==="endOf")}function qv(t,e){return e.map(t.create).reverse()}function zv(t,e){return t.forEach(r=>{e=e.flatMap(n=>r.run(n))}),e}function eF(t,e,r,n){return t.create({type:"relativeScope",scopeType:r,direction:n,length:1,offset:1}).run(e)[0]}function Gv(t,e){return t.contentRange.start.isAfter(e.contentRange.start)?!0:t.contentRange.start.isBefore(e.contentRange.start)?!1:t.contentRange.end.isAfter(e.contentRange.end)}function Q7(t){return WP(t,(e,r)=>e.isEqual(r),e=>e.contentRange.concise())}function tF(t,e){if(t.editor!==e.editor)throw new Error("Cannot form range between targets in different editors")}function Ro(t,e,r=!1,n=!1){tF(t,e);let i=Gv(t,e);return rc(i,i?e:t,i?t:e,!(i?n:r),!(i?r:n))}function Z7(t,e,r,n){tF(t,e);let i=Gv(t,e),o=i?-1:1,l=(i?t.contentRange.start:t.contentRange.end).line+(r?o:0),u=(i?e.contentRange.start:e.contentRange.end).line-(n?o:0),m=[];for(let d=l;;d+=o){let g=new $(d,t.contentRange.start.character,d,t.contentRange.end.character);if(m.push(new $e({editor:t.editor,isReversed:t.isReversed,contentRange:g,insertionDelimiter:t.insertionDelimiter})),d===u)return m}}var rh=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=this.getModifierStages(),n=zv(r,[e]),i=this.modifier.type==="extendThroughStartOf";return n.map(o=>new Um({editor:e.editor,isReversed:i,inputTarget:e,modifiedTarget:o,isHead:i}))}getModifierStages(){return this.modifier.modifiers!=null?qv(this.modifierStageFactory,this.modifier.modifiers):[new Kv(this.modifierStageFactory,this.modifier)]}},Kv=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=this.getContainingLine(e),n=this.getContainingPairInterior(e),i=n!=null?r.contentRange.intersection(n.contentRange):null;return i==null||i.isEmpty?[r]:[new $e({editor:e.editor,isReversed:e.isReversed,contentRange:i})]}getContainingPairInterior(e){try{return this.getContaining(e,{type:"surroundingPairInterior",delimiter:"any"})[0]}catch(r){if(r instanceof mt)return;throw r}}getContainingLine(e){return this.getContaining(e,{type:"line"})[0]}getContaining(e,r){return this.modifierStageFactory.create({type:"containingScope",scopeType:r}).run(e)}};var ai=class extends Error{constructor(e,r){let n=r!=null?` #${r+1}`:"";super(`Scope '${e.type}'${n} is out of range`),this.name="OutOfRangeError"}};function rF(t,e,r,n){return Qv(t,e,r,n),e.slice(r,n+1)}function Qv(t,e,r,n){if(r<0||r>=e.length)throw new ai(t,r);if(n<0||n>=e.length)throw new ai(t,n)}var ic=class{constructor(e,r,n){this.modifierStageFactory=e;this.storedTargets=r;this.modifier=n}run(e){let r=new tc(this.modifierStageFactory).run(e)[0];switch(this.modifier.type){case"everyScope":return this.handleEveryScope(r);case"ordinalScope":return this.handleOrdinalScope(r,this.modifier);case"relativeScope":return this.handleRelativeScope(r,this.modifier);default:throw Error(`${this.modifier.type} instance scope not supported`)}}handleEveryScope(e){return Array.from(ad(this.getEveryRanges(e),([r,n])=>this.getTargetIterable(e,r,n,"forward")))}handleOrdinalScope(e,{start:r,length:n,scopeType:i}){return this.getEveryRanges(e).flatMap(([o,s])=>nF(i,this.getTargetIterable(e,o,s,r>=0?"forward":"backward"),r>=0?r:-(n+r),n))}handleRelativeScope(e,{direction:r,offset:n,length:i,scopeType:o}){return(this.storedTargets.get("instanceReference")??[e]).flatMap(l=>{let{editor:p}=l,u=r==="forward"?new $(n===0?l.contentRange.start:l.contentRange.end,p.document.range.end):new $(p.document.range.start,n===0?l.contentRange.end:l.contentRange.start);return nF(o,this.getTargetIterable(e,p,u,r),n===0?0:n-1,i)})}getEveryRanges({editor:e}){return this.storedTargets.get("instanceReference")?.map(({editor:r,contentRange:n})=>[r,n])??[[e,e.document.range]]}getTargetIterable(e,r,n,i){let o=Bt(hn(new RegExp(Br(e.contentText),"g"),r,n,i),l=>new $e({contentRange:l,editor:r,isReversed:!1,textualType:"character"})),s=Y7(e);if(s!=null){let l=this.modifierStageFactory.create({type:"containingScope",scopeType:s});return id(Bt(o,p=>{try{let u=l.run(p);return u.length===1&&u[0].contentRange.isRangeEqual(p.contentRange)?u[0]:null}catch{return null}}),p=>p!=null)}return o}};function Y7(t){switch(t.textualType){case"line":case"token":case"word":return{type:t.textualType};default:return null}}function nF(t,e,r,n){Array.from(Nl(r,e));let i=Array.from(Nl(n,e));if(i.length<n)throw new ai(t,r+n-1);return i}var nh=class{constructor(e,r){this.modifierHandlerFactory=e;this.modifier=r}run(e){let r=e.getInterior();return r??this.modifierHandlerFactory.create({type:"containingScope",scopeType:{type:"interior",explicitScopeType:e.hasExplicitScopeType}}).run(e)}},ih=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r;this.containingSurroundingPairIfNoBoundaryStage=Zv(this.modifierStageFactory)}run(e){return this.containingSurroundingPairIfNoBoundaryStage.run(e).flatMap(r=>r.getBoundary())}};function Zv(t){return new Gd(t,{type:"containingScope",scopeType:{type:"surroundingPair",delimiter:"any"}},e=>e.getBoundary()==null)}var si={type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:{type:"line"}}},Yv={type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:{type:"token"}}};var oh=class extends Error{constructor(e){super(`Target has no ${e} delimiter.`),this.name="NoDelimiterError"}},ah=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){return this.modifierStageFactory.create(Yv).run(e).map(r=>{let n=r.getLeadingDelimiterTarget();if(n==null)throw new oh("leading");return n})}},sh=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){return this.modifierStageFactory.create(Yv).run(e).map(r=>{let n=r.getTrailingDelimiterTarget();if(n==null)throw new oh("trailing");return n})}};function ch(t,e,r,n,i){return Qv(t,r,n,i),n===i?r[n]:rc(e,r[n],r[i],!0,!0)}function lh(t,e,r){return t.create({type:"everyScope",scopeType:r}).run(e)}var ph=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=lh(this.modifierStageFactory,e,this.modifier.scopeType),n=this.modifier.start+(this.modifier.start<0?r.length:0),i=n+this.modifier.length-1;return this.modifier.isEvery?rF(this.modifier.scopeType,r,n,i):[ch(this.modifier.scopeType,e.isReversed,r,n,i)]}};var uh=class{run(e){let r={editor:e.editor,isReversed:e.isReversed,contentRange:this.getContentRange(e.contentRange)};return[e.isRaw?new go(r):new $e({...r,textualType:"character"})]}},fh=class extends uh{getContentRange(e){return e.start.toEmptyRange()}},mh=class extends uh{getContentRange(e){return e.end.toEmptyRange()}};var dh=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let{scopeType:r}=this.modifier,n=new nc(this.modifierStageFactory,this.scopeHandlerFactory,{type:"containingScope",scopeType:r});try{return n.run(e)}catch(s){if(!(s instanceof mt))throw s}let i=this.scopeHandlerFactory.create(this.modifier.scopeType,e.editor.document.languageId),o=X7(e,i);if(o==null)throw Error(`No scopes found for scope type: ${r.type}`);return o}};function X7(t,e){let r=e.generateScopes(t.editor,t.contentRange.start,"backward"),n=e.generateScopes(t.editor,t.contentRange.end,"forward"),{active:i}=t.contentSelection,o=iF(r,i),s=iF(n,i),l=o.distance<s.distance?o.scope:s.scope;return l?.getTargets(t.isReversed)}function iF(t,e){let r,n=1/0;for(let i of t){let o=Math.min(oF(e,i.domain.start),oF(e,i.domain.end));if(o<n)r=i,n=o;else break}return{scope:r,distance:n}}function oF(t,e){return Math.abs(t.line-e.line)*1e4+Math.abs(t.character-e.character)}var hh=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=this.modifierStageFactory.create(this.modifier.anchor),n=this.modifierStageFactory.create(this.modifier.active),i=r.run(e),o=n.run(e);if(i.length!==1||o.length!==1)throw new Error("Expected single anchor and active target");return[Ro(i[0],o[0],this.modifier.excludeAnchor,this.modifier.excludeActive)]}};var gh=class{constructor(e){this.modifier=e}run(e){return[new go({editor:e.editor,contentRange:e.contentRange,isReversed:e.isReversed})]}};var yh=class extends Error{constructor(e,r,n){super(`Requested ${e} ${n}s, but ${r} are already selected.`),this.name="TooFewScopesError"}};function aF(t,e,r){let n=lh(t,rQ(r),e.scopeType),i=tQ(r.contentRange,n);return J7(e,r,n,i)}function J7(t,e,r,n){let i=t.direction==="forward",o=eQ(t,e.contentRange,r,i,n),s=i?o+t.length-1:o-t.length+1,l=Math.min(o,s),p=Math.max(o,s);return[ch(t.scopeType,e.isReversed,r,l,p)]}function eQ(t,e,r,n,i){let o=t.offset===0;if(i==null){let p=n?r.findIndex(u=>u.contentRange.start.isAfter(e.start)):Yo(r,u=>u.contentRange.start.isBefore(e.start));if(p===-1)throw new ai(t.scopeType);return o?p:n?p+t.offset-1:p-t.offset+1}let s=i.start,l=i.end;if(o){let p=l-s+1;if(p>t.length)throw new yh(t.length,p,t.scopeType.type);return n?s:l}return n?l+t.offset:s-t.offset}function tQ(t,e){let r=e.map((i,o)=>({index:o,intersection:i.contentRange.intersection(t)})).filter(i=>i.intersection!=null);if(t.isEmpty){if(r.length===0)return;let i=r.at(-1).index;return{start:i,end:i}}let n=r.filter(i=>!i.intersection.isEmpty).map(i=>i.index);if(n.length!==0)return{start:n[0],end:n.at(-1)}}function rQ(t){return new It({editor:t.editor,isReversed:t.isReversed,contentRange:t.contentRange,hasExplicitRange:!1})}var xh=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let r=this.scopeHandlerFactory.maybeCreate(this.modifier.scopeType,e.editor.document.languageId);if(r==null)return aF(this.modifierStageFactory,this.modifier,e);let n=Array.from(this.modifier.offset===0?nQ(r,e,this.modifier):iQ(r,e,this.modifier));if(n.length<this.modifier.length)throw new ai(this.modifier.scopeType,this.modifier.offset+this.modifier.length-1);let{isReversed:i}=e;return this.modifier.isEvery?n.flatMap(o=>o.getTargets(i)):Kd(i,n[0],n[n.length-1])}};function nQ(t,e,r){let{editor:n,contentRange:i}=e,{length:o,direction:s}=r,l=Qd(t,n,s==="forward"?i.start:i.end,s)?.domain;if(l==null)throw new mt(r.scopeType.type);return Nl(o,t.generateScopes(n,s==="forward"?l.start:l.end,s,{skipAncestorScopes:!0}))}function iQ(t,e,r){let{editor:n,contentRange:i}=e,{length:o,direction:s,offset:l}=r,p=s==="forward"?i.end:i.start,u=i.isEmpty?"disallowed":"disallowedIfStrict";return VM(t.generateScopes(n,p,s,{containment:u,skipAncestorScopes:!0}),l-1,l+o-1)}var Sh=class{constructor(e){this.modifier=e}run(e){return e.editor.visibleRanges.map(r=>new $e({editor:e.editor,isReversed:e.isReversed,contentRange:r}))}};function sF(...t){return e=>{let r=e;for(let n of t)if(r=n(r),r==null)return null;return r}}function cF(t,...e){return r=>{let n=r,i=[],o=[...e].reverse();for(let s of o){if(n==null||(n=s(n),n==null))return null;i.push(n),n=n.parent??null}return i.reverse()[t]}}var Xv=t=>new ue(t.row,t.column),lF=(...t)=>{let e=["(","{","[","<"],r=[")","}","]",">"],n=e.concat(r),i=(s,l)=>s!=null&&l.includes(s.type),o=s=>s!=null&&!i(s,n);return(s,l)=>{let p,{start:u,end:m}=l;if(i(s.parent,t))return i(s,e)?p=s.nextNamedSibling:i(s,r)?p=s.previousNamedSibling:s.type===","?p=m.isBeforeOrEqual(Xv(s.startPosition))?s.previousNamedSibling:s.nextNamedSibling:p=s,o(p)?p:null;if(i(s,t)){let d=[...s.children],g=d.find(({startPosition:b})=>Xv(b).isAfterOrEqual(m))??null;if(o(g))return g;d.reverse();let x=d.find(({endPosition:b})=>Xv(b).isBeforeOrEqual(u))??null;if(o(x))return x}return null}};function Ue(...t){let e=oQ(t);return r=>{for(let n of e){let i=aQ(r,n);if(i!=null)return i}return null}}function oQ(t){return t.map(e=>e.split(".").map(r=>new Jv(r)))}function aQ(t,e){let r=sQ(t,e);!r&&e.length>1&&(r=cQ(t,e));let n=null,i;return r!=null&&([n,i]=r),n!=null&&i!=null&&i.fields!=null&&i.fields.forEach(o=>{n=(o.isIndex?n?.namedChild(o.value):n?.childForFieldName(o.value))??null}),n}function sQ(t,e){let r=null,n=t;for(let i=e.length-1;i>-1;--i){let o=e[i];if(n==null||!o.typeEquals(n)){if(o.isOptional)continue;return null}(!r||!r[1].isImportant)&&(r=[n,o]),n=n.parent}return r}function cQ(t,e){let r=null,n=t;for(let i=0;i<e.length;++i){let o=e[i];if(n==null||!o.typeEquals(n)){if(o.isOptional)continue;return null}if((!r||o.isImportant)&&(r=[n,o]),i+1<e.length){let s=n.namedChildren.filter(l=>e[i+1].typeEquals(l));n=s.length===1?s[0]:null}}return r}var Jv=class{constructor(e){this.anyType=!1;this.notType=!1;this.type=e.match(/^[\w*~]+/)[0],this.type==="*"?this.anyType=!0:this.type.startsWith("~")&&(this.type=this.type.slice(1),this.notType=!0),this.isImportant=e.indexOf("!")>-1,this.isOptional=e.indexOf("?")>-1,this.fields=[...e.matchAll(/(?<=\[).+?(?=\])/g)].map(r=>r[0]).map(r=>/\d+/.test(r)?{isIndex:!0,value:Number(r)}:{isIndex:!1,value:r})}typeEquals(e){return this.anyType?!0:this.notType?this.type!==e.type:this.type===e.type}};function Le(t,e=ri){return function(r,n){let i=t(n,r.selection);return i!=null?[{node:i,selection:e(r.editor,i)}]:null}}function Th(t,e=ri){let r=sF(...t);return function(n,i){let o=r(i);return o==null?null:[{node:o,selection:e(n.editor,o)}]}}function oc(t,e=0,r=ri){return Le(cF(e,...t),r)}function At(...t){return Le(Ue(...t))}function ac(...t){return Le(lF(...t),wD())}function sc(...t){return Le(Ue(...t),_D)}function Ln(t,e=[]){return Le(Ue(...t),ED(...e))}function ko(t,e=[]){return Le(Ue(...t),RD(...e))}function St(...t){return(e,r)=>{for(let n of t){let i=n(e,r);if(i!=null)return i}return null}}function pF(t){return(e,r)=>{throw new Error(`Node type '${t}' not supported`)}}function Sn(t){return Object.freeze(Object.fromEntries(Mi(t).map(e=>{let r=t[e];return Array.isArray(r)?[e,At(...r)]:typeof r=="string"?[e,At(r)]:[e,r]})))}function uF(t,e){let r=t.walk();r.gotoFirstChild();let n=[],i=!0;for(;i;)r.currentFieldName===e&&n.push(r.currentNode),i=r.gotoNextSibling();return n}function lQ(t,e){return dF(t,r=>Math.floor(r/2)*2+e)}function fF(t){return lQ(Ue("map_lit"),t)}function dF(t,e){return r=>{let n=r.parent;if(n==null||t(n)==null)return null;let i=jl(n),o=i.findIndex(({id:l})=>l===r.id);if(o===-1)return null;let s=e(o);return s===-1?null:i[s]}}var jl=t=>uF(t,"value"),eb="~quoting_lit.list_lit!",hF=Ue(eb);function tb(...t){return e=>{let r=hF(e);if(r==null)return null;let n=jl(r)[0];return t.includes(n?.text)?r:null}}function pQ(...t){return Le(tb(...t))}var gF=tb("defn","defmacro"),mF=Th([gF,t=>jl(t)[1]]),yF=tb("if","if-let","when","when-let"),uQ=Le(yF),fQ={collectionKey:Le(fF(0)),value:Le(fF(1)),argumentOrParameter:Le(dF(Ue(eb),t=>t!==0?t:-1)),functionCall:eb,functionCallee:Th([hF,t=>jl(t)[0]]),namedFunction:Le(gF),functionName:mF,name:mF,anonymousFunction:St(pQ("fn"),At("anon_fn_lit")),ifStatement:uQ,condition:Th([yF,t=>jl(t)[1]])},xF=Sn(fQ);var SF=["command","displayed_equation","inline_formula","math_set","block_comment","package_include","class_include","latex_include","biblatex_include","bibtex_include","graphics_include","svg_include","inkscape_include","verbatim_include","import_include","caption","citation","label_definition","label_reference","label_reference_range","label_number","new_command_definition","old_command_definition","let_command_definition","environment_definition","glossary_entry_definition","glossary_entry_reference","acronym_definition","acronym_reference","theorem_definition","color_definition","color_set_definition","color_reference","tikz_library_import"],mQ=["curly_group","curly_group_text","curly_group_text_list","curly_group_path","curly_group_path_list","curly_group_command_name","curly_group_key_value","curly_group_glob_pattern","curly_group_impl","brack_group","brack_group_text","brack_group_argc","brack_group_key_value","mixed_group"],vF=["subparagraph","paragraph","subsubsection","subsection","section","chapter","part"],TF=vF.map(t=>`${t}[text]`),dQ=vF.map(t=>`${t}[command]`);function rb(t,e){return{selection:new we(t.document.positionAt(e.startIndex+1),t.document.positionAt(e.endIndex-1)),context:{removalRange:new we(t.document.positionAt(e.startIndex),t.document.positionAt(e.endIndex))}}}function hQ(t,e){let r=e.startIndex,n=e.endIndex,i=e.nextNamedSibling;return i!=null&&i.isNamed&&(n=i.endIndex),{selection:new we(t.document.positionAt(r),t.document.positionAt(n)),context:{}}}var gQ={argumentOrParameter:St(oc([Ue(...SF),Ue(...mQ)],1,rb),Le(Ue("begin[name]","end[name]",...TF),rb)),functionCall:St(Le(Ue(...SF,"begin","end")),Le(Ue(...dQ),hQ)),name:St(Le(Ue(...TF),rb),At("begin[name][text]","end[name][text]"))},bF=Sn(gQ);var yQ=["alias","begin_block","end_block","if_modifier","rescue_modifier","undef","unless_modifier","until_modifier","while_modifier"],xQ=["array","assignment","begin","binary","break","call","case","case_match","chained_string","character","class","class_variable","complex","conditional","constant","delimited_symbol","element_reference","false","float","for","global_variable","hash","heredoc_beginning","identifier","if","instance_variable","integer","lambda","method","module","next","nil","operator_assignment","parenthesized_statements","range","rational","redo","regex","retry","return","scope_resolution","self","simple_symbol","singleton_class","singleton_method","string","string_array","subshell","super","symbol_array","true","unary","unless","until","while","yield"],SQ=["begin_block","begin","block_body","block","body_statement","do_block","do","else","end_block","ensure","heredoc_beginning","interpolation","lambda","method","parenthesized_statements","program","singleton_class","singleton_method","then"],TQ=["=","+=","-=","*=","**=","/=","||=","|=","&&=","&=","%=",">>=","<<=","^="],vQ=[":","=>"];function bQ(t){if(t.type!=="call")return null;let e=t.childForFieldName("receiver"),r=t.childForFieldName("method"),n=t.childForFieldName("block");return e?.text==="Proc"&&r?.text==="new"||e==null&&r?.text==="lambda"?t:n}var wQ={statement:St(At(...yQ),oc([Ue(...SQ),Ue(...xQ)],1)),anonymousFunction:St(At("lambda","do_block"),Le(bQ)),condition:sc("*[condition]"),argumentOrParameter:ac("lambda_parameters","method_parameters","block_parameters","argument_list"),collectionKey:ko(["pair[key]"],[":"]),value:Ln(["pair[value]","assignment[right]","operator_assignment[right]","return.argument_list!"],TQ.concat(vQ))},wF=Sn(wQ);function nb(){let t=ni(["else_clause"],[],{includeUnnamedChildren:!0});return function(e,r){let n=t(e,r),i=r.parent;if(i?.type!=="else_clause"){let s=r.childForFieldName("alternative");if(s==null)return n;let{selection:l}=n;return{selection:l,context:{removalRange:new we(l.start,xv(s.namedChild(0).startPosition))}}}let{selection:o}=n;return{selection:new we(xv(i.child(0).startPosition),o.end),context:{}}}}function _F(t){let e=nb();return function(r,n){return n.namedChild(0).type===t?e(r,n.namedChild(0)):ri(r,n)}}var EF=["associated_type","attribute_item","const_item","empty_statement","enum_item","extern_crate_declaration","foreign_mod_item","impl_item","inner_attribute_item","let_declaration","macro_definition","macro_invocation","function_item","function_signature_item","mod_item","static_item","struct_item","trait_item","type_item","union_item","use_declaration","expression_statement"],_Q=["source_file","block","declaration_list"];function EQ(t){return t.parent?.type==="impl_item"&&t.parent?.childForFieldName("type")?.equals(t)?t:null}function RQ(t,e){return{selection:bD(e.children[1],e.lastNamedChild),context:{leadingDelimiterRange:gn(e.children[0].startPosition,e.children[1].startPosition)}}}function kQ(t){if(t.type!=="block")return null;let{lastNamedChild:e}=t;if(e==null)return null;if(e.type==="expression_statement"){let r=e.child(0);return r.type==="return_expression"?r.child(1):null}return EF.includes(e.type)?null:e.type==="return_expression"?e.child(1):e}var PQ={statement:oc([Ue(..._Q),Ue(...EF)],1),condition:St(At("while_expression[condition]","if_expression[condition]"),Le(Ue("while_let_expression","if_let_expression"),ni(["while","if","block"],[],{includeUnnamedChildren:!0})),Ln(["*.match_pattern![condition]"],["if"])),type:St(Ln(["let_declaration[type]","parameter[type]","field_declaration[type]","const_item[type]"],[":"]),Le(Ue("constrained_type_parameter[bounds]","where_predicate[bounds]"),RQ),Ln(["function_item[return_type]"],["->"]),Le(EQ),At("struct_item","trait_item","impl_item","array_type[element]")),argumentOrParameter:ac("arguments","parameters","meta_arguments","type_parameters","ordered_field_declaration_list"),collectionKey:St(ko(["field_initializer[name]","field_pattern[name]"],[":"])),name:St(At("let_declaration.identifier!","parameter.identifier!","function_item[name]","struct_item[name]","enum_item[name]","enum_variant[name]","trait_item[name]","const_item[name]","meta_item.identifier!","let_declaration[pattern]","constrained_type_parameter[left]","where_predicate[left]","field_declaration[name]"),ko(["field_initializer[name]","field_pattern[name]"],[":"])),value:St(Ln(["let_declaration[value]"],["="]),Ln(["field_initializer[value]","field_pattern[pattern]"],[":"]),At("meta_item[value]","const_item[value]"),Le(kQ)),attribute:ko(["mutable_specifier","attribute_item"]),branch:St(At("match_arm"),Le(Ue("else_clause"),_F("if_expression")),Le(Ue("if_expression"),nb()))},RF=Sn(PQ);var AQ={argumentOrParameter:ac("arguments","parameters","class_parameters","bindings"),branch:Le(Ue("case_clause"),ni([],[],{includeUnnamedChildren:!0})),type:Ln(["upper_bound[type]","lower_bound[type]","view_bound[type]","context_bound[type]","val_definition[type]","val_declaration[type]","var_definition[type]","var_declaration[type]","type_definition","extends_clause[type]","class_parameter[type]","parameter[type]","function_definition[return_type]","typed_pattern[type]","binding[type]"],[":"]),value:Ln(["*[value]","*[default_value]","type_definition[type]"],["="]),condition:sc("*[condition]")},kF=Sn(AQ);var MQ=["apply_statement","at_rule","charset_statement","debug_statement","each_statement","error_statement","for_statement","forward_statement","function_statement","if_statement","import_statement","include_statement","keyframes_statement","media_statement","mixin_statement","namespace_statement","placeholder","rule_set","supports_statement","use_statement","warn_statement","while_statement"];function AF(t){return[",","(",")"].includes(t.type)||MF(t)}function MF(t){return t.type==="plain_value"&&t.text==="at"}function PF(t){return e=>{(MF(e)||e.type===",")&&(e=e.previousSibling);let r=t(e);for(;r&&!AF(r);)e=r,r=t(r);return e}}function DQ(t,e){return e.type!=="declaration"?null:e.descendantsOfType("unit").map(r=>({node:r,selection:ri(t.editor,r)}))}var FQ={condition:sc("condition"),statement:St(At(...MQ),Le(Ue("attribute_selector"),ni([],["attribute_name","string_value"]))),argumentOrParameter:St(Le(Ue("arguments.*!","parameters.*!"),Sv(t=>AF(t),", ",PF(t=>t.previousSibling),PF(t=>t.nextSibling)))),collectionKey:ko(["declaration.property_name!"],[":"]),value:St(Le(Ue("declaration"),ni(["property_name","variable_name"])),Le(Ue("include_statement","namespace_statement"),ni()),At("return_statement.*!","import_statement.*!","attribute_selector.plain_value!","attribute_selector.string_value!","parameter.default_value!")),unit:St(At("integer_value.unit!"),DQ)},ib=Sn(FQ);function DF(t,e,r){let n=ql[t];if(n==null)throw new Vu(t);let i=n[e];return i==null?pF(e):r?IQ(i):i}var ql={clojure:xF,css:ib,latex:bF,ruby:wF,rust:RF,scala:kF,scss:ib};function IQ(t){return(e,r)=>{let n=t(e,r);return n==null?null:(n=n.flatMap(i=>CQ(i.node,Mm(e,i.selection.selection),t)),n.length>0?n:null)}}function CQ(t,e,r){let n=t.parent;for(;n!=null;){let i=n.namedChildren.flatMap(o=>r(e,o)).filter(o=>o!=null);if(i.length>0)return i;n=n.parent}return[]}var vh=class{constructor(e,r){this.languageDefinitions=e;this.modifier=r}run(e){let r=DF(e.editor.document.languageId,this.modifier.scopeType.type,this.modifier.type==="everyScope"),n=this.languageDefinitions.getNodeAtLocation(e.editor.document,e.contentRange);if(n==null)throw new mt(this.modifier.scopeType.type);let i=NQ(n,r,{editor:e.editor,selection:new we(e.contentRange.start,e.contentRange.end)});if(i==null)throw new mt(this.modifier.scopeType.type);return i.map(o=>{let{containingListDelimiter:s,leadingDelimiterRange:l,trailingDelimiterRange:p,removalRange:u}=o.context;if(u!=null&&(l!=null||p!=null))throw Error("Removal range is mutually exclusive with leading or trailing delimiter range");let{editor:m,selection:d}=o.selection;return new xo({scopeTypeType:this.modifier.scopeType.type,editor:m,isReversed:e.isReversed,contentRange:d,removalRange:u,insertionDelimiter:s,leadingDelimiterRange:l,trailingDelimiterRange:p})})}};function NQ(t,e,r){let n=t;for(;n!=null;){let i=e(r,n);if(i!=null)return i.map(o=>o.selection).map(o=>({selection:Mm(r,o.selection),context:o.context}));n=n.parent}return null}var cc=class{constructor(e,r,n){this.languageDefinitions=e;this.storedTargets=r;this.scopeHandlerFactory=n;this.create=this.create.bind(this)}create(e){switch(e.type){case"startOf":return new fh;case"endOf":return new mh;case"extendThroughStartOf":case"extendThroughEndOf":return new rh(this,e);case"toRawSelection":return new gh(e);case"interiorOnly":return new nh(this,e);case"excludeInterior":return new ih(this,e);case"leading":return new ah(this,e);case"trailing":return new sh(this,e);case"visible":return new Sh(e);case"containingScope":return new nc(this,this.scopeHandlerFactory,e);case"preferredScope":return new dh(this,this.scopeHandlerFactory,e);case"everyScope":return e.scopeType.type==="instance"?new ic(this,this.storedTargets,e):new Yd(this,this.scopeHandlerFactory,e);case"ordinalScope":return e.scopeType.type==="instance"?new ic(this,this.storedTargets,e):new ph(this,e);case"relativeScope":return e.scopeType.type==="instance"?new ic(this,this.storedTargets,e):new xh(this,this.scopeHandlerFactory,e);case"keepContentFilter":return new Xd(e);case"keepEmptyFilter":return new Jd(e);case"cascading":return new zd(this,e);case"modifyIfUntyped":return new Eo(this,e);case"range":return new hh(this,e);case"inferPreviousMark":throw Error(`Unexpected modifier '${e.type}'; it should have been removed during inference`);default:{let r=e,{type:n}=e;throw new Error(`Unknown modifier: ${n}`)}}}getLegacyScopeStage(e){switch(e.scopeType.type){default:return new vh(this.languageDefinitions,e)}}};async function FF(t,e,r){let n=t.registerReplaceEditList(e.document,r.filter(o=>o.isReplace)),i=await e.edit(r);return n(),i}async function Ae({rangeUpdater:t,editor:e,selections:r,preserveCursorSelections:n,...i}){let o=Mi(r),s=o.map(u=>{let m=r[u],d=OQ(m);return IF(e.document,d.selections,d.behavior)});n||s.push(IF(e.document,e.selections,1));let l=await("edits"in i?HQ(t,e,i.edits,s):CF(t,i.callback,e.document,s));return n||await e.setSelections(l.pop()),Object.fromEntries(o.map((u,m)=>[u,l[m]]))}function IF(t,e,r){return e.map(n=>LQ(t,n,n instanceof we?!n.isReversed:!0,r))}function OQ(t){return"selections"in t?t:{selections:t,behavior:1}}function LQ(t,e,r,n){return{range:e,isForward:r,expansionBehavior:{start:{type:n===1||n===3?"closed":"open"},end:{type:n===1||n===2?"closed":"open"}},offsets:{start:t.offsetAt(e.start),end:t.offsetAt(e.end)},text:t.getText(e)}}function UQ(t){return t.map(e=>e.map(({range:{start:r,end:n},isForward:i})=>i?new we(r,n):new we(n,r)))}async function CF(t,e,r,n){let i=t.registerRangeInfoList(r,tt(n));return await e(),i(),UQ(n)}async function HQ(t,e,r,n){return await CF(t,async()=>{if(!await FF(t,e,r))throw new Error("Could not apply edits")},e.document,n)}var bh=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e){return await Fe(k(),e,"pendingModification0"),{thatSelections:tt(await it(e,async(n,i)=>{let o=i.map(({contentRange:u})=>u),s=VQ(n,o),l=k().getEditableTextEditor(n),{contentRanges:p}=await Ae({rangeUpdater:this.rangeUpdater,editor:l,edits:s,selections:{contentRanges:o}});return Rt(i,p).map(([u,m])=>({editor:u.editor,selection:m.toSelection(u.isReversed)}))}))}}};function VQ(t,e){let{document:r}=t,n=[];for(let i of e){let o=i.start,s=r.lineAt(o),l=s.text.slice(0,s.rangeTrimmed?.start?.character??s.range.start.character),p=s.text.slice(0,o.character).search(/\s+$/),u=p>-1?new $(new ue(s.lineNumber,p),o):o.toEmptyRange();n.push({range:u,text:`
`+l,isReplace:!u.isEmpty})}return n}function wh(t){return t.length<2?t:iM(t).flatMap(([e,r])=>{if(r.length<2)return r;let n=[...r];n.sort((o,s)=>o.contentRange.start.compareTo(s.contentRange.start));let i=!0;for(;i;)[n,i]=BQ(n);return n})}function BQ(t){if(t.length<2)return[t,!1];let e=[],r=[];return t.forEach(n=>{r.length&&!WQ(r[r.length-1],n)?(e.push(NF(r)),r=[n]):r.push(n)}),e.push(NF(r)),[e,e.length!==t.length]}function NF(t){if(t.length===1)return t[0];let e=t[0],r=t[t.length-1];return Ro(e,r)}function WQ(t,e){return!!t.getRemovalRange().intersection(e.getRemovalRange())}var zl=class{constructor(e,r){this.rangeUpdater=e;this.type=r}async decorateTargets(e,r){await Promise.all([Fe(k(),e,this.decoration.sourceStyle,this.decoration.getSourceRangeCallback),Fe(k(),r,this.decoration.destinationStyle)])}getEditsBringMove(e,r){let n=[],i=[],o=e.length!==r.length&&r.length===1;return e.forEach((s,l)=>{let p=r[l];if((s==null||p==null)&&!o)throw new Error("Targets must have same number of args");if(p!=null){let u;o?u=e.map((m,d)=>{let g=m.contentText,x=(p.isRaw?null:p.insertionDelimiter)??(m.isRaw?null:m.insertionDelimiter);return d>0&&x!=null?x+g:g}).join(""):u=s.contentText,i.push({edit:p.constructChangeEdit(u),editor:p.editor,originalTarget:p.target,isSource:!1})}else p=r[0];n.includes(s)||(n.push(s),this.type==="bring"&&i.push({edit:s.toDestination("to").constructChangeEdit(p.target.contentText),editor:s.editor,originalTarget:s,isSource:!0}))}),this.type==="move"&&wh(n).forEach(s=>{i.push({edit:s.constructRemovalEdit(),editor:s.editor,originalTarget:s,isSource:!0})}),i}async performEditsAndComputeThatMark(e){return tt(await Ni(e,r=>r.editor,async(r,n)=>{let i=this.type!=="bring"?n:n.filter(({isSource:x})=>!x),o=this.type==="swap"?[]:n.filter(({isSource:x})=>x),s=this.type==="swap"?n:n.filter(({isSource:x})=>!x),l=o.map(({edit:x})=>x.range),p=s.map(({edit:x})=>x.range),u=k().getEditableTextEditor(r),{sourceEditRanges:m,destinationEditRanges:d}=await Ae({rangeUpdater:this.rangeUpdater,editor:u,edits:i.map(({edit:x})=>x),selections:{sourceEditRanges:l,destinationEditRanges:{selections:p,behavior:0}}}),g=[...this.getMarks(o,m),...this.getMarks(s,d)];return g.sort((x,b)=>n.findIndex(v=>v.originalTarget===x.target)-n.findIndex(v=>v.originalTarget===b.target)),g}))}getMarks(e,r){return e.map((n,i)=>{let o=r[i],s=n.edit.updateRange(o),l=n.originalTarget;return{editor:n.editor,selection:s.toSelection(l.isReversed),isSource:n.isSource,target:l}})}async decorateThatMark(e){let r=n=>mn(n,e.find(i=>i.target===n).selection);return Promise.all([Fe(k(),e.filter(({isSource:n})=>n).map(({target:n})=>n),this.decoration.sourceStyle,r),Fe(k(),e.filter(({isSource:n})=>!n).map(({target:n})=>n),this.decoration.destinationStyle,r)])}calculateMarksBringMove(e){return{thatMark:e.filter(({isSource:r})=>!r),sourceMark:e.filter(({isSource:r})=>r)}}};function OF(t,e){return t.length===1?Array(e.length).fill(t[0]):t}var _h=class extends zl{constructor(r){super(r,"bring");this.decoration={sourceStyle:"referenced",destinationStyle:"pendingModification0"};this.run=this.run.bind(this)}async run(r,n){r=OF(r,n),await this.decorateTargets(r,n.map(p=>p.target));let i=this.getEditsBringMove(r,n),o=await this.performEditsAndComputeThatMark(i),{thatMark:s,sourceMark:l}=this.calculateMarksBringMove(o);return await this.decorateThatMark(s),{thatSelections:s,sourceSelections:l}}},Eh=class extends zl{constructor(r){super(r,"move");this.decoration={sourceStyle:"pendingDelete",destinationStyle:"pendingModification0",getSourceRangeCallback:$Q};this.run=this.run.bind(this)}async run(r,n){r=OF(r,n),await this.decorateTargets(r,n.map(p=>p.target));let i=this.getEditsBringMove(r,n),o=await this.performEditsAndComputeThatMark(i),{thatMark:s,sourceMark:l}=this.calculateMarksBringMove(o);return await this.decorateThatMark(s),{thatSelections:s,sourceSelections:l}}},Rh=class extends zl{constructor(r){super(r,"swap");this.decoration={sourceStyle:"pendingModification1",destinationStyle:"pendingModification0"};this.run=this.run.bind(this)}async run(r,n){await this.decorateTargets(r,n);let i=this.getEditsSwap(r,n),o=await this.performEditsAndComputeThatMark(i);return await this.decorateThatMark(o),{thatSelections:o,sourceSelections:[]}}getEditsSwap(r,n){let i=[];return r.forEach((o,s)=>{let l=n[s];if(o==null||l==null)throw new Error("Targets must have same number of args");i.push({edit:l.toDestination("to").constructChangeEdit(o.contentText),editor:l.editor,originalTarget:l,isSource:!1}),i.push({edit:o.toDestination("to").constructChangeEdit(l.contentText),editor:o.editor,originalTarget:o,isSource:!0})}),i}};function $Q(t){return t.getRemovalHighlightRange()}var Gl=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e,r){kr(e);let{returnValue:n}=await this.actions.getText.run(e,{showDecorations:!1}),{thatSelections:i}=await this.actions.wrapWithPairedDelimiter.run(r,n[0]+"(",")");return{thatSelections:i}}};var Kl=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){let r=bt(e),n=e.map(o=>new $e({editor:o.editor,isReversed:o.isReversed,contentRange:o.contentRange})),{thatTargets:i}=await this.actions.remove.run(n);return i!=null&&await k().getEditableTextEditor(r).setSelections(i.map(({contentSelection:o})=>o),{focusEditor:!0}),{thatTargets:i}}};var lc=t=>new It({editor:t.editor,isReversed:t.selection.isReversed,contentRange:t.selection,hasExplicitRange:!0});var pc=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e,r){r.showDecorations&&await Fe(k(),e,"referenced"),r.ensureSingleEditor&&bt(e),r.ensureSingleTarget&&kr(e);let n=k().activeEditableTextEditor,i=r.setSelection?nM:it,o=tt(await i(e,(s,l)=>this.runForEditor(r,s,l)));return r.setSelection&&r.restoreSelection&&n!=null&&!n.isActive&&await n.focus(),{thatTargets:o}}async runForEditor(e,r,n){let i=k().getEditableTextEditor(r),o=r.selections,s=r.document.version,l=n.map(m=>m.contentSelection);e.setSelection&&await i.setSelections(l,{focusEditor:!0,revealRange:!1});let{originalSelections:p,targetSelections:u}=await Ae({rangeUpdater:this.rangeUpdater,editor:i,callback:()=>e.callback(i,n),preserveCursorSelections:!0,selections:{originalSelections:o,targetSelections:l}});return e.setSelection&&e.restoreSelection&&await i.setSelections(p),r.document.version===s?n:u.map(m=>lc({editor:r,selection:m}))}};var wt=class{constructor(e){this.ensureSingleEditor=!1;this.ensureSingleTarget=!1;this.restoreSelection=!0;this.showDecorations=!0;this.callbackAction=new pc(e),this.run=this.run.bind(this)}async run(e,{showDecorations:r}={}){let n=k().capabilities.commands[this.command];if(n==null)throw Error(`Action ${this.command} is not supported by your ide`);let{acceptsLocation:i}=n;return this.callbackAction.run(e,{callback:(o,s)=>jQ(o,i?s.map(l=>l.contentRange):void 0,this.command),setSelection:!i,ensureSingleEditor:this.ensureSingleEditor,ensureSingleTarget:this.ensureSingleTarget,restoreSelection:this.restoreSelection,showDecorations:r??this.showDecorations})}},kh=class extends wt{constructor(){super(...arguments);this.command="clipboardCopy";this.ensureSingleEditor=!0}},Ph=class extends wt{constructor(){super(...arguments);this.command="toggleLineComment"}},Ah=class extends wt{constructor(){super(...arguments);this.command="indentLine"}},Mh=class extends wt{constructor(){super(...arguments);this.command="outdentLine"}},Dh=class extends wt{constructor(){super(...arguments);this.command="fold"}},Fh=class extends wt{constructor(){super(...arguments);this.command="unfold"}},Ih=class extends wt{constructor(){super(...arguments);this.command="rename";this.ensureSingleTarget=!0}},Ch=class extends wt{constructor(){super(...arguments);this.command="showReferences";this.ensureSingleTarget=!0}},Nh=class extends wt{constructor(){super(...arguments);this.command="quickFix";this.ensureSingleTarget=!0}},Oh=class extends wt{constructor(){super(...arguments);this.command="revealDefinition";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Lh=class extends wt{constructor(){super(...arguments);this.command="revealTypeDefinition";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Uh=class extends wt{constructor(){super(...arguments);this.command="showHover";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Hh=class extends wt{constructor(){super(...arguments);this.command="showDebugHover";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Vh=class extends wt{constructor(){super(...arguments);this.command="extractVariable";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Bh=class extends wt{constructor(){super(...arguments);this.command="gitAccept";this.ensureSingleTarget=!0}},Wh=class extends wt{constructor(){super(...arguments);this.command="gitRevert";this.ensureSingleTarget=!0}},$h=class extends wt{constructor(){super(...arguments);this.command="gitStage";this.ensureSingleTarget=!0}},jh=class extends wt{constructor(){super(...arguments);this.command="gitUnstage";this.ensureSingleTarget=!0}};function jQ(t,e,r){switch(r){case"toggleLineComment":return t.toggleLineComment(e);case"indentLine":return t.indentLine(e);case"outdentLine":return t.outdentLine(e);case"clipboardCopy":return t.clipboardCopy(e);case"fold":return t.fold(e);case"unfold":return t.unfold(e);case"insertLineAfter":return t.insertLineAfter(e);case"rename":return t.rename(e?.[0]);case"showReferences":return t.showReferences(e?.[0]);case"quickFix":return t.quickFix(e?.[0]);case"revealDefinition":return t.revealDefinition(e?.[0]);case"revealTypeDefinition":return t.revealTypeDefinition(e?.[0]);case"showHover":return t.showHover(e?.[0]);case"showDebugHover":return t.showDebugHover(e?.[0]);case"extractVariable":return t.extractVariable(e?.[0]);case"gitAccept":return t.gitAccept(e?.[0]);case"gitRevert":return t.gitRevert(e?.[0]);case"gitStage":return t.gitStage(e?.[0]);case"gitUnstage":return t.gitUnstage(e?.[0]);case"highlight":throw Error("Highlight command not supported as simple action")}}var qh=class{constructor(e,r){this.actions=e;this.rangeUpdater=r;this.run=this.run.bind(this)}async run(e,r={showDecorations:!0}){if(k().capabilities.commands.clipboardCopy!=null)return new kh(this.rangeUpdater).run(e,r);r.showDecorations&&await Fe(k(),e,"referenced");let n=e.map(i=>i.contentText).join(`
`);return await k().clipboard.writeText(n),{thatTargets:e}}};var zh=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){await k().flashRanges(e.flatMap(qQ));let r={showDecorations:!1};await this.actions.copyToClipboard.run(e,r);let{thatTargets:n}=await this.actions.remove.run(e,r);return{thatTargets:n}}};function qQ(t){let{editor:e,contentRange:r}=t,n=t.getRemovalHighlightRange(),i=[{editor:e,range:ar(r),style:"referenced"}];return n.type==="line"?i.push({editor:e,range:n,style:"pendingDelete"}):i.push(...zQ(r,n).map(o=>({editor:e,range:ar(o),style:"pendingDelete"}))),i}function zQ(t,e){let{start:r,end:n}=t,{start:i,end:o}=e,s=[];return i.isBefore(r)&&s.push(new $(i,r)),o.isAfter(n)&&s.push(new $(n,o)),s}var Ql=class{constructor(){this.run=this.run.bind(this)}async run(e){return await it(e,async(r,n)=>{let i=r.selections.filter(o=>!n.some(s=>{let l=s.contentRange.intersection(o);return l&&(!l.isEmpty||o.isEmpty)}));if(i.length===0)throw new ob;await k().getEditableTextEditor(r).setSelections(i)}),{thatTargets:e}}},ob=class extends Error{constructor(){super("Can't deselect every selection. At least one is required"),this.name="SelectionRequiredError"}};async function LF(t,e,r,n){let i=r.destinations.map((b,v)=>{if(n||r.actionTypes[v]==="edit")return{destination:b,index:v}}).filter(b=>!!b);if(i.length===0)return r;let o=i.map(b=>b.destination.constructChangeEdit("")),s=r.cursorRanges.map((b,v)=>({range:b,index:v})).filter(({range:b})=>b!=null),l=s.map(({index:b})=>b),p=s.map(({range:b})=>b),u=o.map(b=>b.range),{thatRanges:m,cursorRanges:d,editRanges:g}=await Ae({rangeUpdater:t,editor:e,edits:o,preserveCursorSelections:!0,selections:{thatRanges:r.thatRanges,cursorRanges:p,editRanges:{selections:u,behavior:0}}}),x=[...r.cursorRanges];return Rt(l,d).forEach(([b,v])=>{x[b]=v}),i.forEach((b,v)=>{let F=o[v].updateRange(g[v]);x[b.index]=F}),{destinations:r.destinations,actionTypes:r.actionTypes,thatRanges:m,cursorRanges:x}}async function UF({acceptsLocation:t},e,r,n){let i=n.destinations.map((d,g)=>{if(n.actionTypes[g]==="insertLineAfter")return{destination:d,index:g}}).filter(d=>!!d);if(i.length===0)return n;let o=i.map(({destination:d})=>d.contentRange),s=n.destinations.map(({contentRange:d})=>d),l=async()=>{t?await r.insertLineAfter(o):(await r.setSelections(o.map(d=>d.toSelection(!1))),await r.focus(),await r.insertLineAfter())},{targetRanges:p,thatRanges:u}=await Ae({rangeUpdater:e,editor:r,callback:l,preserveCursorSelections:!0,selections:{targetRanges:s,thatRanges:n.thatRanges}}),m=[...n.cursorRanges];return i.forEach((d,g)=>{m[d.index]=r.selections[g]}),{destinations:n.destinations.map((d,g)=>d.withTarget(d.target.withContentRange(p[g]))),actionTypes:n.actionTypes,thatRanges:u,cursorRanges:m}}async function HF(t,e){let r=kr(e),n=k().getEditableTextEditor(r.editor),i=r.insertionMode==="before";if(r.insertionMode==="to")throw Error(`Unsupported insertion mode '${r.insertionMode}' for notebookcapell`);return await t.setSelection.run([r.target]),i?await n.editNewNotebookCellAbove():await n.editNewNotebookCellBelow(),{thatSelections:fn([r.target.thatTarget])}}var Gh=class{constructor(e,r){this.rangeUpdater=e;this.actions=r;this.run=this.run.bind(this)}async run(e){if(e.some(({target:l})=>l.isNotebookCell))return HF(this.actions,e);let r=k().getEditableTextEditor(bt(e)),n={destinations:e,actionTypes:e.map(l=>l.getEditNewActionType()),thatRanges:e.map(({target:l})=>l.thatTarget.contentRange),cursorRanges:new Array(e.length).fill(void 0)},i=k().capabilities.commands.insertLineAfter,o=i!=null;o&&(n=await UF(i,this.rangeUpdater,r,n)),n=await LF(this.rangeUpdater,r,n,!o);let s=n.destinations.map((l,p)=>{let u=n.cursorRanges[p];if(u==null)throw Error("Cursor range is undefined for destination");return u.toSelection(l.target.isReversed)});return await r.setSelections(s,{focusEditor:!0}),{thatSelections:fn(n.destinations.map(l=>l.target),n.thatRanges)}}};var Kh=class{constructor(e,r){this.actions=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(si)]}run(e){return this.actions.editNew.run(e.map(r=>r.toDestination(this.insertionMode)))}},Qh=class extends Kh{constructor(){super(...arguments);this.insertionMode="before"}},Zh=class extends Kh{constructor(){super(...arguments);this.insertionMode="after"}};var Zl=class{constructor(e){this.callbackAction=new pc(e),this.run=this.run.bind(this)}async run(e,r,{commandArgs:n,ensureSingleEditor:i,ensureSingleTarget:o,restoreSelection:s,showDecorations:l}={}){let p=n??[];return this.callbackAction.run(e,{callback:()=>k().executeCommand(r,...p),setSelection:!0,ensureSingleEditor:i??!1,ensureSingleTarget:o??!1,restoreSelection:s??!0,showDecorations:l??!0})}};var Yh=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){kr(e);let{returnValue:r,thatTargets:n}=await this.actions.getText.run(e),[i]=r,o;return i.length>200?(o=i.substring(0,200),ea(k().messages,"truncatedSearchText","Search text is longer than 200 characters; truncating")):o=i,await this.find(o),{thatTargets:n}}},Xh=class extends Yh{find(e){return k().findInDocument(e)}},Jh=class extends Yh{find(e){return k().findInWorkspace(e)}};var eg=class{constructor(){this.run=this.run.bind(this)}async run(e){return await Fe(k(),e,"referenced"),{thatTargets:e}}};var uc=class{constructor(e){this.options=e;this.run=this.run.bind(this)}async run(e){let r=kr(e);return await Fe(k(),e,"referenced"),await k().getEditableTextEditor(r.editor).openLink(r.contentRange,this.options),{thatSelections:fn(e)}}};function VF(t){let e=t.split(/^---$/m),r={snippets:[]};for(let n of e){let i=n.match(/^-$/m),o=i!=null?n.slice(0,i.index):n,s=i!=null?n.slice(i.index+i[0].length):null,l=s?ZQ(s):null,p=GQ(o);if(l!=null){p==null&&(p={variables:[]});let{variables:u,...m}=p;r.snippets.push({...m,body:l,variables:u})}else if(p!=null){if(r.header!=null||r.snippets.length!==0)throw Error("Header snippet must be first in file");r.header=p}}return r}function GQ(t){let e={variables:[]},r=KQ(t);if(Object.keys(r).length===0)return;let n={};for(let[i,o]of Object.entries(r))switch(i){case"name":e.name=o;break;case"description":e.description=o;break;case"phrase":e.phrases=Yl(o);break;case"insertionScope":e.insertionScopes=Yl(o);break;case"language":e.languages=Yl(o);break;default:if(!i.startsWith("$"))throw Error(`Invalid key '${i}'`);n[i]=o}return e.variables=QQ(n),e}function KQ(t){let e=t.split(/\r?\n/).map(n=>n.trim()).filter(Boolean),r={};for(let n of e){let i=n.split(":");if(i.length!==2)throw Error(`Invalid line '${n}'`);let o=i[0].trim(),s=i[1].trim();if(o.length===0||s.length===0)throw Error(`Invalid line '${n}'`);if(r[o]!=null)throw Error(`Duplicate key '${o}' in '${t}'`);r[o]=s}return r}function QQ(t){let e={},r=n=>(e[n]==null&&(e[n]={name:n}),e[n]);for(let[n,i]of Object.entries(t)){let o=n.split(".");if(o.length!==2)throw Error(`Invalid variable key '${n}'`);let s=o[0].slice(1);switch(o[1]){case"insertionFormatter":r(s).insertionFormatters=Yl(i);break;case"wrapperPhrase":r(s).wrapperPhrases=Yl(i);break;case"wrapperScope":r(s).wrapperScope=i;break;default:throw Error(`Invalid variable key '${n}'`)}}return Object.values(e)}function ZQ(t){let e=t.match(/^[ \t]*\S/m);if(e?.index!=null)return t.slice(e.index).trimEnd().split(/\r?\n/).map(r=>r.trimEnd())}function Yl(t){return t.split("|").map(e=>e.trim())}function WF(t){let e=[];t.header!=null&&e.push(BF(t.header)),e.push(...t.snippets.map(BF));let r=e.filter(Boolean).join(`
---

`);return r?r+`
---
`:""}function BF(t){let e=[Po("name",t.name),Po("description",t.description),Po("language",t.languages),Po("phrase",t.phrases),Po("insertionScope",t.insertionScopes)].filter(Boolean);return t.variables.length>0&&(e.length>0&&e.push(""),e.push(...YQ(t.variables))),"body"in t&&e.push("-",...t.body),e.join(`
`)}function YQ(t){let e=[...t];return e.sort(XQ),e.flatMap(r=>[Po(`$${r.name}.insertionFormatter`,r.insertionFormatters),Po(`$${r.name}.wrapperPhrase`,r.wrapperPhrases),Po(`$${r.name}.wrapperScope`,r.wrapperScope)]).filter(Boolean)}function Po(t,e){return e==null?"":Array.isArray(e)?`${t}: ${e.join(" | ")}`:`${t}: ${e}`}function XQ(t,e){return t.name==="0"?1:e.name==="0"?-1:t.name.localeCompare(e.name)}function $F(t,e){let r=[],n=0,i=null,[o,...s]=t.split(/\r?\n/);return[{text:e+o,startIndex:e.length},...s.map(p=>({text:p,startIndex:0}))].forEach(({text:p,startIndex:u})=>{let m=p.match(/^\s*/)?.[0]??"",d=m.length;i!=null&&(m.length>i.length?n++:m.length<i.length&&n--),i=m;let g=Math.max(d,u),x=OS("	",n),b=p.slice(g);r.push(x+b)}),r}function jF(t,e){let r=US(e,o=>o.offsets.start),n="",i=0;for(let o of r)n+=t.slice(i,o.offsets.start)+o.text,i=o.offsets.end;return n+=t.slice(i),n}var fc=class{constructor(e){this.snippets=e;this.run=this.run.bind(this)}async run(e,r,n){if(r==null)throw new Error("Directory argument is required for GenerateSnippet action. Please update Cursorless Talon");let i=kr(e),o=i.editor;if(Fe(k(),e,"referenced"),n==null&&(n=await k().showInputBox({prompt:"Name of snippet",placeHolder:"helloWorld"}),!n))return{};let s=o.document.offsetAt(i.contentRange.start),l=eZ(o,i.contentRange),p=l.map((oe,ce)=>({offsets:{start:o.document.offsetAt(oe.start)-s,end:o.document.offsetAt(oe.end)-s},name:ce===l.length-1?"0":`${ce+1}`})),u=o.document.getText(new $(i.contentRange.start.with(void 0,0),i.contentRange.start)),m=o.document.getText(i.contentRange),d=jF(m,[...ln(m,/\$|\\/g,oe=>({offsets:{start:oe.index,end:oe.index+oe[0].length},text:`\\${oe[0]}`})),...p.map(({offsets:oe,name:ce})=>({offsets:oe,text:`$${ce}`}))]),g=$F(d,u),x,b={snippets:[]};k().runMode==="test"?x=k().getEditableTextEditor(o):(x=k().getEditableTextEditor(await this.snippets.openNewSnippetFile(n,r)),b=VF(x.document.getText())),await x.setSelections([x.document.range.toSelection(!1)]);let v=1,{header:I}=b,F=b.header?.phrases!=null?void 0:[`${ab}${v++}`],H=oe=>{let ce=I?.variables?.some(at=>at.name===oe.name&&at.wrapperPhrases!=null);return{name:oe.name,wrapperPhrases:ce?void 0:[`${ab}${v++}`]}},Q={name:I?.name===n?void 0:n,phrases:F,languages:JQ(o,I),body:g,variables:p.map(H)};b.snippets.push(Q);let ie=WF(b).replace(/\$/g,"\\$").replaceAll(ab,"$");return await x.insertSnippet(ie),{thatSelections:e.map(({editor:oe,contentSelection:ce})=>({editor:oe,selection:ce}))}}};function JQ(t,e){if(!e?.languages?.includes(t.document.languageId))return[t.document.languageId]}function eZ(t,e){let r=t.selections.filter(n=>e.contains(n));return r.sort((n,i)=>n.start.compareTo(i.start)),r}var ab="PLACEHOLDER_VFA77zcbLD6wXNmfMAay";var Xl=class{constructor(){this.run=this.run.bind(this)}async run(e){return{returnValue:e.map(({contentRange:r})=>({contentRange:r})),thatTargets:e}}};var Jl=class{constructor(){this.run=this.run.bind(this)}async run(e,{showDecorations:r=!0,ensureSingleTarget:n=!1}={}){return r&&await Fe(k(),e,"referenced"),n&&kr(e),{returnValue:e.map(i=>i.contentText),thatTargets:e}}};var ep=class{constructor(){this.run=this.run.bind(this)}async run(e,r){if(k().capabilities.commands.highlight==null)throw Error("The highlight action is not supported by your ide");return e.length===0?await Promise.all(k().visibleTextEditors.map(n=>k().setHighlightRanges(r,n,[]))):await it(e,(n,i)=>k().setHighlightRanges(r,n,i.map(o=>mn(o,o.contentRange)))),{thatTargets:e}}};var tg=class{constructor(e,r){this.rangeUpdater=e;this.isIndent=r;this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e){return this.hasCapability()?this.runSimpleCommandAction(e):(await Fe(k(),e,"pendingModification0"),{thatTargets:tt(await it(e,this.runForEditor))})}hasCapability(){return this.isIndent?k().capabilities.commands.indentLine!=null:k().capabilities.commands.outdentLine!=null}runSimpleCommandAction(e){return(this.isIndent?new Ah(this.rangeUpdater):new Mh(this.rangeUpdater)).run(e)}async runForEditor(e,r){let n=this.isIndent?tZ(e,r):rZ(e,r),{targetSelections:i}=await Ae({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(e),edits:n,selections:{targetSelections:r.map(({contentSelection:o})=>o)}});return Rt(r,i).map(([o,s])=>lc({editor:e,selection:s.toSelection(o.isReversed)}))}},rg=class extends tg{constructor(e){super(e,!0)}},ng=class extends tg{constructor(e){super(e,!1)}};function tZ(t,e){let{document:r}=t,n=qF(e),i=nZ(t);return n.map(o=>({range:r.lineAt(o).range.start.toEmptyRange(),text:i}))}function rZ(t,e){let{document:r}=t,n=qF(e),i=iZ(t);return n.map(o=>{let s=r.lineAt(o),l=s.text.match(i),{start:p}=s.range,u=p.translate(void 0,l?.[0].length);return{range:new $(p,u),text:""}})}function qF(t){let e=new Set;for(let r of t){let{start:n,end:i}=r.contentRange;for(let o=n.line;o<=i.line;++o)e.add(o)}return[...e]}function nZ(t){if(t.options.insertSpaces){let e=zF(t);return" ".repeat(e)}return"	"}function iZ(t){if(t.options.insertSpaces){let e=zF(t);return new RegExp(`^[ ]{1,${e}}`)}return/^\t/}function zF(t){return typeof t.options.tabSize=="number"?t.options.tabSize:4}var ig=class{constructor(e,r,n){this.rangeUpdater=e;this.modifierStageFactory=r;this.isBefore=n;this.getFinalStages=()=>[this.modifierStageFactory.create(si)];this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e){let r=tt(await it(e,this.runForEditor));return await k().flashRanges(r.flatMap(n=>n.thatMark.map(i=>({editor:i.editor,range:ar(i.selection),style:"justAdded"})))),{sourceSelections:r.flatMap(({sourceMark:n})=>n),thatSelections:r.flatMap(({thatMark:n})=>n)}}async runForEditor(e,r){let n=this.isBefore?"after":"before",i=r.flatMap(g=>g.toDestination(n).constructChangeEdit(g.contentText)),o=r.map(({contentSelection:g})=>g),s=i.map(({range:g})=>g),l=k().getEditableTextEditor(e),{contentSelections:p,editRanges:u}=await Ae({rangeUpdater:this.rangeUpdater,editor:l,edits:i,selections:{contentSelections:o,editRanges:{selections:s,behavior:0}}}),m=Rt(i,u).map(([g,x])=>g.updateRange(x)),d=e.selections[0];return p.some(g=>g.intersection(d)!=null)&&await l.revealRange(d),{sourceMark:fn(r,m),thatMark:fn(r,p)}}},og=class extends ig{constructor(e,r){super(e,r,!0)}},ag=class extends ig{constructor(e,r){super(e,r,!1)}};var tp=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(si)]}async run(e){let r=await it(e,async(i,o)=>{let s=this.getEdits(o),l=o.map(m=>m.thatTarget.contentSelection),{contentSelections:p,editRanges:u}=await Ae({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(i),edits:s,selections:{contentSelections:l,editRanges:{selections:s.map(m=>m.range),behavior:0}}});return{thatMark:p.map(m=>({editor:i,selection:m})),flashRanges:oa(s,u).map(([m,d])=>({editor:i,range:m.isLine?m.updateRange(d):d,isLine:m.isLine}))}});return await k().flashRanges(r.flatMap(i=>i.flashRanges.map(({editor:o,range:s,isLine:l})=>({editor:o,range:l?Wr(s):ar(s),style:"justAdded"})))),{thatSelections:r.flatMap(i=>i.thatMark)}}},sg=class extends tp{constructor(e,r){super(e,r)}getEdits(e){return e.flatMap(r=>[pg(r,"before"),pg(r,"after")])}},cg=class extends tp{constructor(e,r){super(e,r)}getEdits(e){return e.map(r=>pg(r,"before"))}},lg=class extends tp{constructor(e,r){super(e,r)}getEdits(e){return e.map(r=>pg(r,"after"))}};function pg(t,e){return{...t.toDestination(e).constructChangeEdit("",!0),isLine:t.textualType==="line"}}function KF(t,e){return oZ(GF(t),GF(e))}function GF(t){if(t.languages!=null)return{langIds:t.languages}}function oZ(t,e){if(t==null&&e==null)return 0;if(t==null)return-1;if(e==null)return 1;if(t.langIds==null&&e.langIds!=null)return-1;if(e.langIds==null&&t.langIds!=null)return 1;let r=aZ(t.scopeTypes,e.scopeTypes);return r!==0?r:t.langIds==null?0:e.langIds.length-t.langIds.length}function aZ(t,e){return t==null&&e!=null?-1:e==null&&t!=null?1:0}function mc(t,e){if(t.type==="named")throw new Error("Cursorless snippets are deprecated. Please use community snippets. Update to latest cursorless-talon and say 'cursorless migrate snippets'.");if(t.type==="custom")return t;let r=sZ(t.snippets,e);r.sort(KF);let n=r[0];if(n==null)throw new Error("No snippet available for the current language");return n}function sZ(t,e){return t.filter(r=>r.languages==null?!0:r.languages.includes(e))}var sb=class t{constructor(){this.value="";this.pos=0}static{this._table={36:0,58:1,44:2,123:3,125:4,92:5,47:6,124:7,43:11,45:12,63:13}}static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return e===95||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};let e=this.pos,r=0,n=this.value.charCodeAt(e),i;if(i=t._table[n],typeof i=="number")return this.pos+=1,{type:i,pos:e,len:1};if(t.isDigitCharacter(n)){i=8;do r+=1,n=this.value.charCodeAt(e+r);while(t.isDigitCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}if(t.isVariableCharacter(n)){i=9;do n=this.value.charCodeAt(e+ ++r);while(t.isVariableCharacter(n)||t.isDigitCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}i=10;do r+=1,n=this.value.charCodeAt(e+r);while(!isNaN(n)&&typeof t._table[n]>"u"&&!t.isDigitCharacter(n)&&!t.isVariableCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}},Ao=class{constructor(){this._children=[]}appendChild(e){return e instanceof Wt&&this._children[this._children.length-1]instanceof Wt?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,r){let{parent:n}=e,i=n.children.indexOf(e),o=n.children.slice(0);o.splice(i,1,...r),n._children=o,function s(l,p){for(let u of l)u.parent=p,s(u.children,u)}(r,n)}get children(){return this._children}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof mg)return e;e=e.parent}}toString(){return this.children.reduce((e,r)=>e+r.toString(),"")}len(){return 0}},Wt=class t extends Ao{constructor(r){super();this.value=r}static escape(r){return r.replace(/\$|}|\\/g,"\\$&")}toString(){return this.value}toTextmateString(){return t.escape(this.value)}len(){return this.value.length}clone(){return new t(this.value)}},ug=class extends Ao{},$t=class t extends ug{constructor(r){super();this.index=r}static compareByIndex(r,n){return r.index===n.index?0:r.isFinalTabstop?1:n.isFinalTabstop||r.index<n.index?-1:r.index>n.index?1:0}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof fg?this._children[0]:void 0}toTextmateString(){let r="";return this.transform&&(r=this.transform.toTextmateString()),this.children.length===0&&!this.transform?`$${this.index}`:this.children.length===0?`\${${this.index}${r}}`:this.choice?`\${${this.index}|${this.choice.toTextmateString()}|${r}}`:`\${${this.index}:${this.children.map(n=>n.toTextmateString()).join("")}${r}}`}clone(){let r=new t(this.index);return this.transform&&(r.transform=this.transform.clone()),r._children=this.children.map(n=>n.clone()),r}},fg=class t extends Ao{constructor(){super(...arguments);this.options=[]}appendChild(r){return r instanceof Wt&&(r.parent=this,this.options.push(r)),this}toString(){return this.options[0].value}toTextmateString(){return this.options.map(r=>r.value.replace(/\||,|\\/g,"\\$&")).join(",")}len(){return this.options[0].len()}clone(){let r=new t;return this.options.forEach(r.appendChild,r),r}},cb=class t extends Ao{constructor(){super(...arguments);this.regexp=new RegExp("")}resolve(r){let n=this,i=!1,o=r.replace(this.regexp,function(){return i=!0,n._replace(Array.prototype.slice.call(arguments,0,-2))});return!i&&this._children.some(s=>s instanceof Un&&!!s.elseValue)&&(o=this._replace([])),o}_replace(r){let n="";for(let i of this._children)if(i instanceof Un){let o=r[i.index]||"";o=i.resolve(o),n+=o}else n+=i.toString();return n}toString(){return""}toTextmateString(){return`/${this.regexp.source}/${this.children.map(r=>r.toTextmateString())}/${(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")}`}clone(){let r=new t;return r.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),r._children=this.children.map(n=>n.clone()),r}},Un=class t extends Ao{constructor(r,n,i,o){super();this.index=r;this.shorthandName=n;this.ifValue=i;this.elseValue=o}resolve(r){return this.shorthandName==="upcase"?r?r.toLocaleUpperCase():"":this.shorthandName==="downcase"?r?r.toLocaleLowerCase():"":this.shorthandName==="capitalize"?r?r[0].toLocaleUpperCase()+r.substr(1):"":this.shorthandName==="pascalcase"?r?this._toPascalCase(r):"":this.shorthandName==="camelcase"?r?this._toCamelCase(r):"":r&&typeof this.ifValue=="string"?this.ifValue:!r&&typeof this.elseValue=="string"?this.elseValue:r||""}_toPascalCase(r){let n=r.match(/[a-z0-9]+/gi);return n?n.map(i=>i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()).join(""):r}_toCamelCase(r){let n=r.match(/[a-z0-9]+/gi);return n?n.map((i,o)=>o===0?i.toLowerCase():i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()).join(""):r}toTextmateString(){let r="${";return r+=this.index,this.shorthandName?r+=`:/${this.shorthandName}`:this.ifValue&&this.elseValue?r+=`:?${this.ifValue}:${this.elseValue}`:this.ifValue?r+=`:+${this.ifValue}`:this.elseValue&&(r+=`:-${this.elseValue}`),r+="}",r}clone(){return new t(this.index,this.shorthandName,this.ifValue,this.elseValue)}},Hn=class t extends ug{constructor(r){super();this.name=r}resolve(r){let n=r.resolve(this);return this.transform&&(n=this.transform.resolve(n||"")),n!==void 0?(this._children=[new Wt(n)],!0):!1}toTextmateString(){let r="";return this.transform&&(r=this.transform.toTextmateString()),this.children.length===0?`\${${this.name}${r}}`:`\${${this.name}:${this.children.map(n=>n.toTextmateString()).join("")}${r}}`}clone(){let r=new t(this.name);return this.transform&&(r.transform=this.transform.clone()),r._children=this.children.map(n=>n.clone()),r}};function QF(t,e){let r=[...t];for(;r.length>0;){let n=r.shift();if(!e(n))break;r.unshift(...n.children)}}var mg=class t extends Ao{get placeholderInfo(){if(!this._placeholders){let e=[],r;this.walk(function(n){return n instanceof $t&&(e.push(n),r=!r||r.index<n.index?n:r),!0}),this._placeholders={all:e,last:r}}return this._placeholders}get placeholders(){let{all:e}=this.placeholderInfo;return e}offset(e){let r=0,n=!1;return this.walk(i=>i===e?(n=!0,!1):(r+=i.len(),!0)),n?r:-1}fullLen(e){let r=0;return QF([e],n=>(r+=n.len(),!0)),r}enclosingPlaceholders(e){let r=[],{parent:n}=e;for(;n;)n instanceof $t&&r.push(n),n=n.parent;return r}resolveVariables(e){return this.walk(r=>(r instanceof Hn&&r.resolve(e)&&(this._placeholders=void 0),!0)),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,r){return this._placeholders=void 0,super.replace(e,r)}toTextmateString(){return this.children.reduce((e,r)=>e+r.toTextmateString(),"")}clone(){let e=new t;return this._children=this.children.map(r=>r.clone()),e}walk(e){QF(this.children,e)}},li=class{constructor(){this._scanner=new sb;this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}text(e){return this.parse(e).toString()}parse(e,r,n){this._scanner.text(e),this._token=this._scanner.next();let i=new mg;for(;this._parse(i););let o=new Map,s=[],l=0;i.walk(p=>(p instanceof $t&&(l+=1,p.isFinalTabstop?o.set(0,void 0):!o.has(p.index)&&p.children.length>0?o.set(p.index,p.children):s.push(p)),!0));for(let p of s){let u=o.get(p.index);if(u){let m=new $t(p.index);m.transform=p.transform;for(let d of u)m.appendChild(d.clone());i.replace(p,[m])}}return n||(n=l>0&&r),!o.has(0)&&n&&i.appendChild(new $t(0)),i}_accept(e,r){if(e===void 0||this._token.type===e){let n=r?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),n}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){let r=this._token;for(;this._token.type!==e;){if(this._token.type===14)return!1;if(this._token.type===5){let i=this._scanner.next();if(i.type!==0&&i.type!==4&&i.type!==5)return!1}this._token=this._scanner.next()}let n=this._scanner.value.substring(r.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),n}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let r;return(r=this._accept(5,!0))?(r=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||r,e.appendChild(new Wt(r)),!0):!1}_parseTabstopOrVariableName(e){let r,n=this._token;return this._accept(0)&&(r=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(r)?new $t(Number(r)):new Hn(r)),!0):this._backTo(n)}_parseComplexPlaceholder(e){let r,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(r=this._accept(8,!0))))return this._backTo(n);let o=new $t(Number(r));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new Wt("${"+r+":")),o.children.forEach(e.appendChild,e),!0}else if(o.index>0&&this._accept(7)){let s=new fg;for(;;){if(this._parseChoiceElement(s)){if(this._accept(2))continue;if(this._accept(7)&&(o.appendChild(s),this._accept(4)))return e.appendChild(o),!0}return this._backTo(n),!1}}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseChoiceElement(e){let r=this._token,n=[];for(;!(this._token.type===2||this._token.type===7);){let i;if((i=this._accept(5,!0))?i=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||i:i=this._accept(void 0,!0),!i)return this._backTo(r),!1;n.push(i)}return n.length===0?(this._backTo(r),!1):(e.appendChild(new Wt(n.join(""))),!0)}_parseComplexVariable(e){let r,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(r=this._accept(9,!0))))return this._backTo(n);let o=new Hn(r);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new Wt("${"+r+":")),o.children.forEach(e.appendChild,e),!0}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseTransform(e){let r=new cb,n="",i="";for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(6,!0)||o,n+=o;continue}if(this._token.type!==14){n+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(5,!0)||this._accept(6,!0)||o,r.appendChild(new Wt(o));continue}if(!(this._parseFormatString(r)||this._parseAnything(r)))return!1}for(;!this._accept(4);){if(this._token.type!==14){i+=this._accept(void 0,!0);continue}return!1}try{r.regexp=new RegExp(n,i)}catch{return!1}return e.transform=r,!0}_parseFormatString(e){let r=this._token;if(!this._accept(0))return!1;let n=!1;this._accept(3)&&(n=!0);let i=this._accept(8,!0);if(i)if(n){if(this._accept(4))return e.appendChild(new Un(Number(i))),!0;if(!this._accept(1))return this._backTo(r),!1}else return e.appendChild(new Un(Number(i))),!0;else return this._backTo(r),!1;if(this._accept(6)){let o=this._accept(9,!0);return!o||!this._accept(4)?(this._backTo(r),!1):(e.appendChild(new Un(Number(i),o)),!0)}else if(this._accept(11)){let o=this._until(4);if(o)return e.appendChild(new Un(Number(i),void 0,o,void 0)),!0}else if(this._accept(12)){let o=this._until(4);if(o)return e.appendChild(new Un(Number(i),void 0,void 0,o)),!0}else if(this._accept(13)){let o=this._until(1);if(o){let s=this._until(4);if(s)return e.appendChild(new Un(Number(i),void 0,o,s)),!0}}else{let o=this._until(4);if(o)return e.appendChild(new Un(Number(i),void 0,void 0,o)),!0}return this._backTo(r),!1}_parseAnything(e){return this._token.type!==14?(e.appendChild(new Wt(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}};var dg=Object.freeze({CURRENT_YEAR:!0,CURRENT_YEAR_SHORT:!0,CURRENT_MONTH:!0,CURRENT_DATE:!0,CURRENT_HOUR:!0,CURRENT_MINUTE:!0,CURRENT_SECOND:!0,CURRENT_DAY_NAME:!0,CURRENT_DAY_NAME_SHORT:!0,CURRENT_MONTH_NAME:!0,CURRENT_MONTH_NAME_SHORT:!0,CURRENT_SECONDS_UNIX:!0,SELECTION:!0,CLIPBOARD:!0,TM_SELECTED_TEXT:!0,TM_CURRENT_LINE:!0,TM_CURRENT_WORD:!0,TM_LINE_INDEX:!0,TM_LINE_NUMBER:!0,TM_FILENAME:!0,TM_FILENAME_BASE:!0,TM_DIRECTORY:!0,TM_FILEPATH:!0,RELATIVE_FILEPATH:!0,BLOCK_COMMENT_START:!0,BLOCK_COMMENT_END:!0,LINE_COMMENT:!0,WORKSPACE_NAME:!0,WORKSPACE_FOLDER:!0,RANDOM:!0,RANDOM_HEX:!0,UUID:!0});function hg(t,e,r){let n=cZ(t)+1,i={};t.walk(o=>{if(o instanceof Hn){if(o.name===e)o.name="TM_SELECTED_TEXT";else if(r!=null&&Object.prototype.hasOwnProperty.call(r,o.name))o.parent.replace(o,[new Wt(r[o.name])]);else if(!dg[o.name]){let s;o.name in i?s=i[o.name]:(s=n++,i[o.name]=s);let l=new $t(s);o.children.forEach(p=>l.appendChild(p)),o.parent.replace(o,[l])}}else o instanceof $t&&(o.index.toString()===e?o.parent.replace(o,[new Hn("TM_SELECTED_TEXT")]):r!=null&&Object.prototype.hasOwnProperty.call(r,o.index)&&o.parent.replace(o,[new Wt(r[o.index])]));return!0})}function cZ(t){let e=0;return t.walk(r=>(r instanceof $t&&(e=Math.max(e,r.index)),!0)),e}function gg(t,e,r){let n=lZ(t)+1,i={};t.walk(o=>{if(o instanceof Hn){if(o.name===e)o.name="TM_SELECTED_TEXT";else if(r!=null&&Object.prototype.hasOwnProperty.call(r,o.name))o.parent.replace(o,[new Wt(r[o.name])]);else if(!dg[o.name]){let s;o.name in i?s=i[o.name]:(s=n++,i[o.name]=s);let l=new $t(s);o.children.forEach(p=>l.appendChild(p)),o.parent.replace(o,[l])}}else o instanceof $t&&o.index.toString()===e&&o.parent.replace(o,[new Hn("TM_SELECTED_TEXT")]);return!0})}function lZ(t){let e=0;return t.walk(r=>(r instanceof $t&&(e=Math.max(e,r.index)),!0)),e}function yg(t,e,r){let n=e.map(o=>pZ(t,o,r)),i=n[0];if(!n.every(o=>o===i))throw new Error("Multiple snippet definitions match the given context");if(i===-1)throw new Error("Couldn't find matching snippet definition");return r[i]}function pZ(t,e,r){let n=e.editor.document.languageId;return r.findIndex(({scope:i})=>{if(i==null)return!0;let{langIds:o,scopeTypes:s,excludeDescendantScopeTypes:l}=i;if(o!=null&&!o.includes(n))return!1;if(s!=null){let p=s.concat(l??[]),u,m;for(let d of p)try{let g=t.create({type:"containingScope",scopeType:{type:d}}).run(e)[0];e.contentRange.isRangeEqual(g.contentRange)&&(g=t.create({type:"containingScope",scopeType:{type:d},ancestorIndex:1}).run(e)[0]),(u==null||u.contentRange.contains(g.contentRange))&&(u=g,m=d)}catch{continue}return m==null?!1:u!=null&&!(l??[]).includes(m)}return!0})}var ZF=!1;function xg(){ZF||(ea(k().messages,"legacySnippets","Talon community snippets are now fully supported in Cursorless! Cursorless's experimental snippets are now deprecated, but in most cases we can help you migrate automatically. Update cursorless-talon and say 'cursorless migrate snippets'."),ZF=!0)}var XF={camelCase(t){if(t.length===0)return"";let[e,...r]=t;return e+r.map(YF).join("")},snakeCase(t){return t.join("_")},upperSnakeCase(t){return t.map(e=>e.toUpperCase()).join("_")},pascalCase(t){return t.map(YF).join("")}};function YF(t){return t.length===0?"":t[0].toUpperCase()+t.substr(1)}var rp=class{constructor(e,r,n,i){this.rangeUpdater=e;this.snippets=r;this.actions=n;this.modifierStageFactory=i;this.snippetParser=new li;this.run=this.run.bind(this)}getFinalStages(e){let r=this.getScopeTypes(e);return r.length===0?[]:[new ec(this.modifierStageFactory,{type:"cascading",modifiers:r.map(n=>({type:"containingScope",scopeType:n}))})]}getScopeTypes(e){let{name:r}=e,i=this.snippets.getSnippetStrict(r).insertionScopeTypes;return i==null?[]:i.map(o=>({type:o}))}getSnippetInfo(e,r){let{name:n}=e,i=this.snippets.getSnippetStrict(n),o=yg(this.modifierStageFactory,r,i.definitions);return{body:o.body.join(`
`),formatSubstitutions(s){return s==null?void 0:uZ(i,o,s)}}}async run(e,r){xg();let n=k().getEditableTextEditor(bt(e));await this.actions.editNew.run(e);let{body:i,formatSubstitutions:o}=this.getSnippetInfo(r,n.selections.map(u=>new It({editor:n,contentRange:u,isReversed:!1,hasExplicitRange:!0}))),s=this.snippetParser.parse(i);gg(s,null,o(r.substitutions));let l=s.toTextmateString(),{editorSelections:p}=await Ae({rangeUpdater:this.rangeUpdater,editor:n,callback:()=>n.insertSnippet(l),preserveCursorSelections:!0,selections:{editorSelections:{selections:n.selections,behavior:0}}});return{thatSelections:p.map(u=>({editor:n,selection:u}))}}};function uZ(t,e,r){return Object.fromEntries(Object.entries(r).map(([n,i])=>{let o=(e.variables??{})[n]?.formatter??(t.variables??{})[n]?.formatter;if(o==null)return[n,i];let s=XF[o];if(s==null)throw new Error(`Couldn't find formatter ${o} for variable ${n}`);return[n,s(i.split(" "))]}))}var np=class{constructor(e,r,n,i){this.rangeUpdater=e;this.snippets=r;this.actions=n;this.modifierStageFactory=i;this.snippetParser=new li;this.run=this.run.bind(this)}getFinalStages(e,r){if(r.type==="named")return this.legacy().getFinalStages(r);let n=bt(e),o=mc(r,n.document.languageId).scopeTypes??[];return o.length===0?[]:[new ec(this.modifierStageFactory,{type:"cascading",modifiers:o.map(s=>({type:"containingScope",scopeType:s}))})]}async run(e,r){if(r.type==="named")return this.legacy().run(e,r);let n=k().getEditableTextEditor(bt(e)),i=mc(r,n.document.languageId),o=this.snippetParser.parse(i.body),s=i.substitutions??r.substitutions;hg(o,null,s);let l=o.toTextmateString();await this.actions.editNew.run(e);let{editorSelections:p}=await Ae({rangeUpdater:this.rangeUpdater,editor:n,callback:()=>n.insertSnippet(l),preserveCursorSelections:!0,selections:{editorSelections:{selections:n.selections,behavior:0}}});return{thatSelections:p.map(u=>({editor:n,selection:u}))}}legacy(){return new rp(this.rangeUpdater,this.snippets,this.actions,this.modifierStageFactory)}};var ip=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(si)]}async run(e){return await Fe(k(),e.map(({thatTarget:n})=>n),"pendingModification0"),{thatSelections:tt(await it(e,async(n,i)=>{let{thatRanges:o}=await Ae({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(n),edits:fZ(n,i),selections:{thatRanges:i.map(({contentRange:s})=>s)}});return oa(i,o).map(([s,l])=>({editor:n,selection:l.toSelection(s.isReversed)}))}))}}};function fZ(t,e){let r=[];for(let n of e){let i=n.textualType==="token"?mZ(n):dZ(n);r.push(...i)}return r}function mZ(t){let{editor:e,contentRange:r}=t,n=Pr(e.document.languageId).tokenMatcher,i=hn(n,e,r,"forward");return Array.from(ov(i)).map(([o,s])=>({range:new $(o.end,s.start),text:"",isReplace:!0}))}function dZ(t){let{document:e}=t.editor,r=t.contentRange,n=r.start.line,i=r.isSingleLine?Math.min(n+1,e.lineCount-1):r.end.line,o=Ls(BM(n,i+1),s=>e.lineAt(s));return Array.from(ov(o)).map(([s,l])=>({range:new $(s.rangeTrimmed?.end??s.range.end,l.rangeTrimmed?.start??l.range.start),text:l.isEmptyOrWhitespace?"":" ",isReplace:!0}))}var Sg=class{constructor(e,r){this.rangeUpdater=e;this.actions=r;this.run=this.run.bind(this)}async run(e){let r=k().getEditableTextEditor(bt(e)),n=k().activeEditableTextEditor,i=async()=>{await this.actions.editNew.run(e)},{cursorSelections:o}=await Ae({rangeUpdater:this.rangeUpdater,editor:r,preserveCursorSelections:!0,callback:i,selections:{cursorSelections:r.selections}}),{originalCursorSelections:s,editorSelections:l}=await Ae({rangeUpdater:this.rangeUpdater,editor:r,callback:()=>r.clipboardPaste(),selections:{originalCursorSelections:o,editorSelections:{selections:r.selections,behavior:0}}});return await r.setSelections(s),n!=null&&!n.isActive&&await n.focus(),await k().flashRanges(l.map(p=>({editor:r,range:ar(p),style:"justAdded"}))),{thatSelections:l.map(p=>({editor:r,selection:p}))}}};var Tg=class{constructor(e){this.rangeUpdater=e;this.runForEditor=this.runForEditor.bind(this)}async run(e){let r=await k().clipboard.readText(),n=r.split(/\r?\n/g),i=e.length===n.length?oa(e,n).map(([s,l])=>({destination:s,text:l})):e.map(s=>({destination:s,text:r}));return{thatSelections:tt(await Ni(i,({destination:s})=>s.editor,this.runForEditor))}}async runForEditor(e,r){let n=r.map(({destination:s,text:l})=>s.constructChangeEdit(l)),{editSelections:i}=await Ae({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(e),edits:n,selections:{editSelections:{selections:n.map(({range:s})=>s),behavior:0}}}),o=oa(n,i).map(([s,l])=>s.updateRange(l).toSelection(l.isReversed));return await k().flashRanges(o.map(s=>({editor:e,range:ar(s),style:"justAdded"}))),o.map(s=>({editor:e,selection:s}))}};var vg=class{constructor(e,r){this.run=this.run.bind(this),this.runner=k().capabilities.commands.clipboardPaste!=null?new Sg(e,r):new Tg(e)}run(e){return this.runner.run(e)}};var op=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e,{showDecorations:r=!0}={}){return e=wh(e),r&&await Fe(k(),e,"pendingDelete",i=>i.getRemovalHighlightRange()),{thatTargets:tt(await it(e,this.runForEditor))}}async runForEditor(e,r){let n=r.map(s=>s.constructRemovalEdit()),i=k().getEditableTextEditor(e),{editRanges:o}=await Ae({rangeUpdater:this.rangeUpdater,editor:i,edits:n,selections:{editRanges:n.map(({range:s})=>s)}});return Rt(r,o).map(([s,l])=>new go({editor:s.editor,isReversed:s.isReversed,contentRange:l}))}};var ap=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}getTexts(e,r){if(Array.isArray(r))return r.length===1?Array(e.length).fill(r[0]):r;let n=[];for(let i=0;i<e.length;++i)n[i]=(r.start+i).toString();return n}async run(e,r){await Fe(k(),e.map(l=>l.target),"pendingModification0");let n=this.getTexts(e,r);if(e.length!==n.length)throw new Error("Targets and texts must have same length");let i=Rt(e,n).map(([l,p])=>({editor:l.editor,target:l.target,edit:l.constructChangeEdit(p)})),o=[],s=[];return await Ni(i,l=>l.editor,async(l,p)=>{let u=p.map(({edit:g})=>g),{contentSelections:m,editRanges:d}=await Ae({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(l),edits:u,selections:{contentSelections:p.map(({target:g})=>g.contentSelection),editRanges:{selections:u.map(({range:g})=>g),behavior:0}}});for(let[g,x]of Rt(p,m))o.push(g.target.withContentRange(x));for(let[g,x]of Rt(p,d))s.push({editor:l,selection:g.edit.updateRange(x).toSelection(!1)})}),{sourceTargets:o,thatSelections:s}}};var sp=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.getFinalStages=()=>[Zv(this.modifierStageFactory)];this.run=this.run.bind(this)}async run(e,r,n){let i=e.flatMap(s=>{let l=s.getBoundary();if(l.length!==2)throw Error("Target must have an opening and closing delimiter");return l});await Fe(k(),i,"pendingModification0");let o=await it(i,async(s,l)=>{let p=l.map((d,g)=>({editor:s,range:d.contentRange,text:g%2===0?r:n})),{sourceRanges:u,thatRanges:m}=await Ae({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(s),edits:p,selections:{sourceRanges:e.map(d=>d.thatTarget.contentRange),thatRanges:e.map(d=>d.contentRange)}});return{sourceMark:fn(e,u),thatMark:fn(e,m)}});return{sourceSelections:o.flatMap(({sourceMark:s})=>s),thatSelections:o.flatMap(({thatMark:s})=>s)}}};var cp=class{constructor(e){this.at=e;this.run=this.run.bind(this)}async run(e){let r=xl(e,s=>s.editor),n=Array.from(r,([s,l])=>({lineNumber:hZ(l,this.at),editor:s})),i=k().activeEditableTextEditor;for(let s of n)await k().getEditableTextEditor(s.editor).revealLine(s.lineNumber,this.at);i!=null&&!i.isActive&&await i.focus();let o=e.filter(s=>{let l=s.editor.visibleRanges,p=l[0].start.line,u=l[l.length-1].end.line;return s.contentRange.start.line>p||s.contentRange.end.line<u||s.contentRange.start.line===p&&s.contentRange.end.line===u});return await k().flashRanges(o.map(s=>({editor:s.editor,range:Wr(s.contentRange),style:"referenced"}))),{thatTargets:e}}},bg=class extends cp{constructor(){super("top")}},wg=class extends cp{constructor(){super("center")}},_g=class extends cp{constructor(){super("bottom")}};function hZ(t,e){let r=Number.MAX_SAFE_INTEGER,n=0;return t.forEach(i=>{r=Math.min(r,i.contentRange.start.line),n=Math.max(n,i.contentRange.end.line)}),e==="top"?r:e==="bottom"?n:Math.floor((r+n)/2)}var Mo=class{constructor(e,r){this.selectionMode=e;this.rangeMode=r;this.run=this.run.bind(this)}async run(e){let r=bt(e),n=this.getSelections(e),i=this.selectionMode==="add"?r.selections.concat(n):n,o=this.selectionMode==="set"&&i.length===1&&i[0].isEmpty;return await k().getEditableTextEditor(r).setSelections(i,{focusEditor:!0,highlightWord:o}),{thatTargets:e}}getSelections(e){switch(this.rangeMode){case"content":return e.map(r=>r.contentSelection);case"before":return e.map(r=>new we(r.contentRange.start,r.contentRange.start));case"after":return e.map(r=>new we(r.contentRange.end,r.contentRange.end))}}},Eg=class extends Mo{constructor(){super("set","content")}},Rg=class extends Mo{constructor(){super("set","before")}},kg=class extends Mo{constructor(){super("set","after")}},Pg=class extends Mo{constructor(){super("add","content")}},Ag=class extends Mo{constructor(){super("add","before")}},Mg=class extends Mo{constructor(){super("add","after")}};var lp=class{constructor(e){this.key=e;this.noAutomaticTokenExpansion=!0;this.run=this.run.bind(this)}async run(e){return{thatTargets:e,[`${this.key}Targets`]:e}}};var pp=class{constructor(e){this.treeSitter=e;this.run=this.run.bind(this)}async run(e){await Fe(k(),e,"referenced");let r=["# Cursorless parse tree"];for(let n of e){let{editor:i,contentRange:o}=n,s=this.treeSitter.getTree(i.document);r.push(gZ(i.document,s,o))}return k().openUntitledTextDocument({language:"markdown",content:r.join(`

`)}),{thatTargets:e}}};function gZ(t,e,r){let n=[],i=[];return JF(n,i,r,e.walk(),0),[`## ${t.filename} [${r}]
`,`\`\`\`${t.languageId}`,t.getText(r),"```","","```scm",...i,"```","","```js",...n,"```",""].join(`
`)}function JF(t,e,r,n,i){for(;;){let o=new $(n.startPosition.row,n.startPosition.column,n.endPosition.row,n.endPosition.column);if(r.intersection(o)!=null){let s="  ".repeat(i),l=yZ(n),p=s+l;if(n.nodeIsNamed)t.push(`${p}${n.nodeType} [${o}]`),e.push(`${p}(${n.nodeType}`),n.gotoFirstChild()?(JF(t,e,r,n,i+1),n.gotoParent(),e.push(`${s})`)):e[e.length-1]+=")";else{let u=`"${n.nodeType}"`;t.push(`${p}${u} [${o}]`),e.push(`${p}${u}`)}}if(!n.gotoNextSibling())return}}function yZ(t){let e=t.currentFieldName;return e!=null?`${e}: `:""}var up=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){e.length<2&&ea(k().messages,"tooFewTargets",'This action works on multiple targets, e.g. "sort every line block" instead of "sort block".');let r=e.slice().sort((s,l)=>s.contentRange.start.compareTo(l.contentRange.start)),{returnValue:n}=await this.actions.getText.run(r,{showDecorations:!1}),i=this.sortTexts(n),{thatSelections:o}=await this.actions.replace.run(r.map(s=>s.toDestination("to")),i);return{thatSelections:o}}},Dg=class extends up{sortTexts(e){return e.sort((r,n)=>r.localeCompare(n,void 0,{numeric:!0,caseFirst:"upper"}))}},Fg=class extends up{sortTexts(e){return e.reverse()}},Ig=class extends up{sortTexts(e){return LS(e)}};var fp=class{constructor(e){this.modifierStageFactory=e;this.getFinalStages=()=>[this.modifierStageFactory.create(si)];this.run=this.run.bind(this)}async run(e){let r=e.map(({thatTarget:n})=>n);return await Fe(k(),r,"referenced"),await it(e,async(n,i)=>{let o=i.map(s=>mn(s,s.contentRange));await k().getEditableTextEditor(n).toggleBreakpoint(o)}),{thatTargets:e}}};var mp=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e,r,n){let i=await it(e,async(o,s)=>{let l=s.map(v=>({start:new we(v.contentRange.start,v.contentRange.start),end:new we(v.contentRange.end,v.contentRange.end)})),p=l.flatMap(({start:v,end:I})=>[{text:r,range:v},{text:n,range:I,isReplace:!0}]),u=s.map(v=>v.contentSelection),{boundariesStartSelections:m,boundariesEndSelections:d,sourceSelections:g,thatSelections:x}=await Ae({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(o),edits:p,selections:{boundariesStartSelections:{selections:l.map(({start:v})=>v),behavior:2},boundariesEndSelections:{selections:l.map(({end:v})=>v),behavior:3},sourceSelections:{selections:u,behavior:1},thatSelections:{selections:u,behavior:0}}}),b=[...m,...d];return await k().flashRanges(b.map(v=>({editor:o,range:ar(v),style:"justAdded"}))),{sourceMark:g.map(v=>({editor:o,selection:v})),thatMark:x.map(v=>({editor:o,selection:v}))}});return{sourceSelections:i.flatMap(({sourceMark:o})=>o),thatSelections:i.flatMap(({thatMark:o})=>o)}}};var dp=class{constructor(e,r,n){this.rangeUpdater=e;this.snippets=r;this.modifierStageFactory=n;this.snippetParser=new li;this.run=this.run.bind(this)}getFinalStages(e){let r=this.getScopeType(e);return r==null?[]:[new Eo(this.modifierStageFactory,{type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:r}})]}getScopeType(e){let{name:r,variableName:n}=e,s=(this.snippets.getSnippetStrict(r).variables??{})[n]?.wrapperScopeType;return s==null?void 0:{type:s}}getBody(e,r){let{name:n}=e,i=this.snippets.getSnippetStrict(n);return yg(this.modifierStageFactory,r,i.definitions).body.join(`
`)}async run(e,r){xg();let n=k().getEditableTextEditor(bt(e)),i=this.getBody(r,e),o=this.snippetParser.parse(i);gg(o,r.variableName);let s=o.toTextmateString();await Fe(k(),e,"pendingModification0");let l=e.map(m=>m.contentSelection),p=()=>n.insertSnippet(s,l),{targetSelections:u}=await Ae({rangeUpdater:this.rangeUpdater,editor:n,callback:p,preserveCursorSelections:!0,selections:{targetSelections:l}});return{thatSelections:u.map(m=>({editor:n,selection:m}))}}};var hp=class{constructor(e,r,n){this.rangeUpdater=e;this.snippets=r;this.modifierStageFactory=n;this.snippetParser=new li;this.run=this.run.bind(this)}getFinalStages(e,r){if(r.type==="named")return this.legacy().getFinalStages(r);let n=bt(e),i=mc(r,n.document.languageId);return i.scopeType==null?[]:[new Eo(this.modifierStageFactory,{type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:i.scopeType}})]}async run(e,r){if(r.type==="named")return this.legacy().run(e,r);let n=k().getEditableTextEditor(bt(e)),i=mc(r,n.document.languageId),o=this.snippetParser.parse(i.body);hg(o,i.variableName);let s=o.toTextmateString();await Fe(k(),e,"pendingModification0");let l=e.map(u=>u.contentSelection),{targetSelections:p}=await Ae({rangeUpdater:this.rangeUpdater,editor:n,callback:()=>n.insertSnippet(s,l),preserveCursorSelections:!0,selections:{targetSelections:l}});return{thatSelections:p.map(u=>({editor:n,selection:u}))}}legacy(){return new dp(this.rangeUpdater,this.snippets,this.modifierStageFactory)}};var xZ=/-?\d+(\.\d+)?/g,Cg=class{constructor(e,r){this.actions=e;this.isIncrement=r;this.run=this.run.bind(this)}async run(e){let r=[];return await Ni(e,n=>n.editor,async(n,i)=>{let o=await this.runOnEditor(n,i);r.push(...o)}),{thatSelections:r}}async runOnEditor(e,r){let{document:n}=e,i=[],o=[];for(let l of r){let p=n.offsetAt(l.contentRange.start),u=l.contentText,m=al(u,xZ);for(let d of m)i.push(SZ(e,p,d)),o.push(TZ(this.isIncrement,d.text))}let{thatSelections:s}=await this.actions.replace.run(i,o);return s}},Ng=class extends Cg{constructor(e){super(e,!0)}},Og=class extends Cg{constructor(e){super(e,!1)}};function SZ(t,e,r){return new $e({editor:t,isReversed:!1,contentRange:new $(t.document.positionAt(e+r.index),t.document.positionAt(e+r.index+r.text.length))}).toDestination("to")}function TZ(t,e){return e.includes(".")?bZ(t,e).toString():vZ(t,e).toString()}function vZ(t,e){let r=parseInt(e),n=1;return r+(t?n:-n)}function bZ(t,e){let r=parseFloat(e),i=Math.abs(r)<=1?.1:1,o=r+(t?i:-i);return parseFloat(o.toPrecision(15))/1}var Lg=class{constructor(e,r,n,i){this.treeSitter=e;this.snippets=r;this.rangeUpdater=n;this.modifierStageFactory=i;this.addSelection=new Pg;this.addSelectionBefore=new Ag;this.addSelectionAfter=new Mg;this.callAsFunction=new Gl(this);this.clearAndSetSelection=new Kl(this);this.copyToClipboard=new qh(this,this.rangeUpdater);this.cutToClipboard=new zh(this);this.decrement=new Og(this);this.deselect=new Ql;this.editNew=new Gh(this.rangeUpdater,this);this.editNewLineAfter=new Zh(this,this.modifierStageFactory);this.editNewLineBefore=new Qh(this,this.modifierStageFactory);this.executeCommand=new Zl(this.rangeUpdater);this.extractVariable=new Vh(this.rangeUpdater);this.findInDocument=new Xh(this);this.findInWorkspace=new Jh(this);this.flashTargets=new eg;this.foldRegion=new Dh(this.rangeUpdater);this.followLink=new uc({openAside:!1});this.followLinkAside=new uc({openAside:!0});this.generateSnippet=new fc(this.snippets);this.getText=new Jl;this.gitAccept=new Bh(this.rangeUpdater);this.gitRevert=new Wh(this.rangeUpdater);this.gitStage=new $h(this.rangeUpdater);this.gitUnstage=new jh(this.rangeUpdater);this.highlight=new ep;this.increment=new Ng(this);this.indentLine=new rg(this.rangeUpdater);this.insertCopyAfter=new ag(this.rangeUpdater,this.modifierStageFactory);this.insertCopyBefore=new og(this.rangeUpdater,this.modifierStageFactory);this.insertEmptyLineAfter=new lg(this.rangeUpdater,this.modifierStageFactory);this.insertEmptyLineBefore=new cg(this.rangeUpdater,this.modifierStageFactory);this.insertEmptyLinesAround=new sg(this.rangeUpdater,this.modifierStageFactory);this.insertSnippet=new np(this.rangeUpdater,this.snippets,this,this.modifierStageFactory);this.joinLines=new ip(this.rangeUpdater,this.modifierStageFactory);this.breakLine=new bh(this.rangeUpdater);this.moveToTarget=new Eh(this.rangeUpdater);this.outdentLine=new ng(this.rangeUpdater);this.pasteFromClipboard=new vg(this.rangeUpdater,this);this.randomizeTargets=new Ig(this);this.remove=new op(this.rangeUpdater);this.rename=new Ih(this.rangeUpdater);this.replace=new ap(this.rangeUpdater);this.replaceWithTarget=new _h(this.rangeUpdater);this.revealDefinition=new Oh(this.rangeUpdater);this.revealTypeDefinition=new Lh(this.rangeUpdater);this.reverseTargets=new Fg(this);this.rewrapWithPairedDelimiter=new sp(this.rangeUpdater,this.modifierStageFactory);this.scrollToBottom=new _g;this.scrollToCenter=new wg;this.scrollToTop=new bg;this.setSelection=new Eg;this.setSelectionAfter=new kg;this.setSelectionBefore=new Rg;this.showDebugHover=new Hh(this.rangeUpdater);this.showHover=new Uh(this.rangeUpdater);this.showQuickFix=new Nh(this.rangeUpdater);this.showReferences=new Ch(this.rangeUpdater);this.sortTargets=new Dg(this);this.swapTargets=new Rh(this.rangeUpdater);this.toggleLineBreakpoint=new fp(this.modifierStageFactory);this.toggleLineComment=new Ph(this.rangeUpdater);this.unfoldRegion=new Fh(this.rangeUpdater);this.wrapWithPairedDelimiter=new mp(this.rangeUpdater);this.wrapWithSnippet=new hp(this.rangeUpdater,this.snippets,this.modifierStageFactory);this["experimental.setInstanceReference"]=new lp("instanceReference");this["private.showParseTree"]=new pp(this.treeSitter);this["private.getTargets"]=new Xl;this["private.setKeyboardTarget"]=new lp("keyboard")}};async function eI(t,e,r){let n=await t.getFocusedElementType();if(n==null||n==="textEditor")return null;let i=r.action;switch(i.name){case"replace":return Ug(i.destination)&&Array.isArray(i.replaceWith)?{action:"insert",modifiers:Hg(i.destination),text:i.replaceWith.join(`
`)}:null;case"replaceWithTarget":return Ug(i.destination)?{action:"insert",modifiers:Hg(i.destination),text:await lb(e,i.source)}:null;case"moveToTarget":if(Ug(i.destination)){let o=await lb(e,i.source);return await wZ(e,i.source),{action:"insert",modifiers:Hg(i.destination),text:o}}return null;case"callAsFunction":return Vg(i.argument)?{action:i.name,modifiers:Bg(i.argument),callee:await lb(e,i.callee)}:null;case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return Vg(i.target)?{action:i.name,modifiers:Bg(i.target),left:i.left,right:i.right}:null;case"pasteFromClipboard":return Ug(i.destination)?{action:i.name,modifiers:Hg(i.destination)}:null;case"swapTargets":case"editNew":case"insertSnippet":case"generateSnippet":case"wrapWithSnippet":case"parsed":return null;default:return Vg(i.target)?{action:i.name,modifiers:Bg(i.target)}:null}}function Ug(t){return t.type==="implicit"?!0:t.type==="primitive"?t.insertionMode==="to"&&Vg(t.target):!1}function Vg(t){return t.type==="implicit"?!0:t.type==="primitive"?t.mark==null||t.mark.type==="cursor":!1}function Hg(t){return t.type==="primitive"?Bg(t.target):[]}function Bg(t){return t.type==="primitive"&&t.modifiers!=null&&t.modifiers.length>0?t.modifiers:[]}async function lb(t,e){return(await t({name:"getText",target:e})).returnValue.join(`
`)}async function wZ(t,e){await t({name:"remove",target:e})}function tI(t,e){let{anchor:r,rangeType:n,active:i}=t;if(r.type!=="primitive"||n!=="continuous")return t;let o=r.modifiers.map((s,l)=>[s,l]);for(let[s,l]of o.reverse())for(let p of _Z){let u=p.accept(s);if(u.accepted){let[m,d]=[r.modifiers.slice(0,l+1),r.modifiers.slice(l+1)],g={...t,anchor:d.length===0&&e?{type:"implicit"}:{type:"primitive",mark:r.mark,modifiers:d},active:Kf(i,x=>{x.modifiers=x.modifiers.slice(Yo(x.modifiers,b=>p.accept(b).accepted)+1)})};return g=u.transformTarget?.(g)??g,{type:"primitive",mark:{type:"target",target:g},modifiers:m}}}return t}var _Z=[{accept(t){return t.type==="everyScope"&&t.scopeType.type!=="instance"?{accepted:!0,transformTarget(e){return{...e,exclusionScopeType:t.scopeType}}}:{accepted:!1}}},{accept(t){return{accepted:(t.type==="everyScope"||t.type==="relativeScope"||t.type==="ordinalScope")&&t.scopeType.type==="instance"}}}];function ub(t,e){switch(t.type){case"list":return EZ(t,e);case"range":return rI(t,e);case"primitive":return Wg(t,e);case"implicit":return t}}function EZ(t,e){return{...t,elements:t.elements.map((r,n)=>{let i=e.concat(t.elements.slice(0,n));switch(r.type){case"range":return rI(r,i);case"primitive":return Wg(r,i)}})}}function rI(t,e){let r=RZ(t,e),n=t.anchor.type==="implicit"||t.anchor.mark==null;return tI(r,n)}function RZ(t,e){return{type:"range",rangeType:t.rangeType??"continuous",excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1,anchor:t.anchor.type==="implicit"?t.anchor:Wg(t.anchor,e),active:Wg(t.active,e.concat(t.anchor))}}function Wg(t,e){let r=pb(t.mark??(kZ(t)?MZ(e):null)??{type:"cursor"}),n=nI(t)??DZ(e)??FZ(e)??[];return{type:t.type,mark:r,modifiers:n}}function kZ(t){return t.modifiers?.some(e=>e.type==="inferPreviousMark")??!1}function nI(t){let e=t.modifiers?.filter(r=>r.type!=="inferPreviousMark")??[];return e.length!==0?e:void 0}function PZ(t){if(AZ(t))return[{type:"containingScope",scopeType:{type:"line"}}]}function AZ(t){let e=r=>r?.type==="lineNumber";return e(t.mark)?!0:t.mark?.type==="range"?e(t.mark.anchor)&&e(t.mark.active):!1}function MZ(t){return gp(t,e=>e.mark)}function DZ(t){return gp(t,nI)}function FZ(t){return gp(t,PZ)}function gp(t,e){for(let r=t.length-1;r>-1;--r){let n=t[r];switch(n.type){case"primitive":{let i=e(n);if(i!=null)return i;break}case"range":{let i=gp([n.anchor],e);if(i!=null)return i;break}case"list":{let i=gp(n.elements,e);if(i!=null)return i;break}}}}function pb(t){switch(t.type){case"range":return{...t,anchor:pb(t.anchor),active:pb(t.active)};case"target":return{type:"target",target:ub(t.target,[])};default:return t}}var $g=class{constructor(e,r,n,i,o){this.commandServerApi=e;this.debug=r;this.storedTargets=n;this.pipelineRunner=i;this.actions=o;this.finalStages=[];this.runAction=this.runAction.bind(this),this.inferenceContext=new fb(this.debug)}async run(e){if(ia(e)){let u=await eI(this.commandServerApi,this.runAction,e);if(u!=null)return{fallback:u}}let{returnValue:r,thatSelections:n,thatTargets:i,sourceSelections:o,sourceTargets:s,instanceReferenceTargets:l,keyboardTargets:p}=await this.runAction(e.action);return this.storedTargets.set("that",iI(i,n)),this.storedTargets.set("source",iI(s,o)),this.storedTargets.set("instanceReference",l),this.storedTargets.set("keyboard",p,{history:!0}),{returnValue:r}}runAction(e){switch(this.inferenceContext.reset(),this.finalStages=[],e.name){case"replaceWithTarget":return this.actions.replaceWithTarget.run(this.getTargets(e.source),this.getDestinations(e.destination));case"moveToTarget":return this.actions.moveToTarget.run(this.getTargets(e.source),this.getDestinations(e.destination));case"swapTargets":return this.actions.swapTargets.run(this.getTargets(e.target1),this.getTargets(e.target2));case"callAsFunction":return this.actions.callAsFunction.run(this.getTargets(e.callee),this.getTargets(e.argument));case"wrapWithPairedDelimiter":return this.actions.wrapWithPairedDelimiter.run(this.getTargets(e.target),e.left,e.right);case"rewrapWithPairedDelimiter":return this.finalStages=this.actions.rewrapWithPairedDelimiter.getFinalStages(),this.actions.rewrapWithPairedDelimiter.run(this.getTargets(e.target),e.left,e.right);case"pasteFromClipboard":return this.actions.pasteFromClipboard.run(this.getDestinations(e.destination));case"executeCommand":return this.actions.executeCommand.run(this.getTargets(e.target),e.commandId,e.options);case"replace":return this.actions.replace.run(this.getDestinations(e.destination),e.replaceWith);case"highlight":return this.actions.highlight.run(this.getTargets(e.target),e.highlightId);case"generateSnippet":return this.actions.generateSnippet.run(this.getTargets(e.target),e.directory,e.snippetName);case"insertSnippet":return this.finalStages=this.actions.insertSnippet.getFinalStages(this.getDestinations(e.destination),e.snippetDescription),this.actions.insertSnippet.run(this.getDestinations(e.destination),e.snippetDescription);case"wrapWithSnippet":return this.finalStages=this.actions.wrapWithSnippet.getFinalStages(this.getTargets(e.target),e.snippetDescription),this.actions.wrapWithSnippet.run(this.getTargets(e.target),e.snippetDescription);case"editNew":return this.actions.editNew.run(this.getDestinations(e.destination));case"getText":return this.actions.getText.run(this.getTargets(e.target),e.options);case"parsed":return this.runAction(vm(e.content,e.arguments));default:{let r=this.actions[e.name];if(r==null)throw new Error(`Unknown action: ${e.name}`);return this.finalStages=r.getFinalStages?.()??[],this.noAutomaticTokenExpansion=r.noAutomaticTokenExpansion??!1,r.run(this.getTargets(e.target))}}}getTargets(e){let r=this.inferenceContext.run(e);return this.pipelineRunner.run(r,{actionFinalStages:this.finalStages,noAutomaticTokenExpansion:this.noAutomaticTokenExpansion})}getDestinations(e){switch(e.type){case"list":return e.destinations.flatMap(r=>this.getDestinations(r));case"primitive":return this.getTargets(e.target).map(r=>r.toDestination(e.insertionMode));case"implicit":return this.getTargets({type:"implicit"}).map(r=>r.toDestination("to"))}}},fb=class{constructor(e){this.debug=e;this.previousTargets=[]}run(e){let r=ub(e,this.previousTargets);return this.debug.active&&(this.debug.log("Full target:"),this.debug.log(JSON.stringify(r,null,2))),this.previousTargets.push(e),r}reset(){this.previousTargets=[]}};function iI(t,e){if(t!=null&&e!=null)throw Error("Actions may only return full targets or selections for that mark");return e!=null?e.map(lc):t}var jg=class{constructor(e,r){this.readableHatMap=e;this.mark=r}run(){let e=this.readableHatMap.getToken(this.mark.symbolColor,this.mark.character);if(e==null)throw new Error(`Couldn't find mark ${this.mark.symbolColor} '${this.mark.character}'`);return[new It({editor:e.editor,contentRange:e.range,isReversed:!1,hasExplicitRange:!1})]}};var qg=class{constructor(e){this.mark=e}run(){let{editorId:e,range:{start:r,end:n}}=this.mark,i=k().visibleTextEditors.find(s=>s.id===e);if(i==null)throw new Error(`Couldn't find editor '${e}'`);let o=new $(r.line,r.character,n.line,n.character);return[new It({editor:i,contentRange:o,isReversed:!1,hasExplicitRange:!1})]}};var zg=class{constructor(e){this.mark=e}run(){let e=k().activeTextEditor;if(e==null)return[];let r=IZ(e,this.mark.lineNumberType,this.mark.lineNumber),n=e.document.lineAt(r).range;return[av(e,!1,n)]}},IZ=(t,e,r)=>{switch(e){case"absolute":return r;case"relative":return t.selections[0].active.line+r;case"modulo100":{let i=t.visibleRanges[0].start.line,o=t.visibleRanges[t.visibleRanges.length-1].end.line,s=Math.floor(i/100)*100,l=[],p=[],u=s+r;for(;u<=o;)u>=i&&(t.visibleRanges.find(d=>u>=d.start.line&&u<=d.end.line)?l.push(u):p.push(u)),u+=100;if(l.length===1)return l[0];if(l.length+p.length>1)throw new Error("Multiple lines matching");if(p.length===1)return p[0];throw new Error("Line is not in viewport")}}};var Gg=class{constructor(e){this.mark=e}run(){return[]}};var Kg=class{constructor(e,r){this.markStageFactory=e;this.mark=r}run(){let e=this.markStageFactory.create(this.mark.anchor),r=this.markStageFactory.create(this.mark.active),n=e.run(),i=r.run();if(n.length!==1||i.length!==1)throw new Error("Expected single anchor and active target");return[Ro(n[0],i[0],this.mark.excludeAnchor,this.mark.excludeActive)]}};var Qg=class{constructor(e,r){this.storedTargets=e;this.key=r}run(){let e=this.storedTargets.get(this.key);if(e==null||e.length===0)throw Error(`No available ${this.key} marks`);return e}};var Zg=class{constructor(e,r){this.targetPipelineRunner=e;this.mark=r}run(){return this.targetPipelineRunner.run(this.mark.target)}};var Yg=class{constructor(e,r){this.readableHatMap=e;this.storedTargets=r;this.create=this.create.bind(this)}setPipelineRunner(e){this.targetPipelineRunner=e}create(e){switch(e.type){case"cursor":return new Is;case"that":case"source":case"keyboard":return new Qg(this.storedTargets,e.type);case"decoratedSymbol":return new jg(this.readableHatMap,e);case"lineNumber":return new zg(e);case"range":return new Kg(this,e);case"nothing":return new Gg(e);case"target":return new Zg(this.targetPipelineRunner,e);case"explicit":return new qg(e);default:{let r=e,{type:n}=e;throw new Error(`Unknown mark: ${n}`)}}}};async function oI(t,e,r,n,i,o,s,l,p,u){r.active&&(r.log("command:"),r.log(JSON.stringify(u,null,2)));let m=VT(u),d=await n.getReadableMap(m.usePrePhraseSnapshot),g=NZ(t,e,s,r,o,d,i,l);for(let b of p)g=b.wrapCommandRunner(d,g);let x=await g.run(m);return await CZ(u,x)}async function CZ(t,e){if(ia(t))return e;if("returnValue"in e)return e.returnValue}function NZ(t,e,r,n,i,o,s,l){let p=new cc(r,i,new js(r)),u=new Yg(o,i),m=new th(p,u);return u.setPipelineRunner(m),new $g(e,n,i,m,new Lg(t,s,l,p))}var aI=["clojure","css","latex","ruby","rust","scala","scss"];async function sI(t,e){await OZ(t,e)}async function OZ(t,e){let r=[];for(let n of aI)await t.loadLanguage(n),await e.loadLanguage(n),Mi(ql[n]??{}).map(i=>{e.get(n)?.getScopeHandler({type:i})!=null&&r.push(`Scope '${i}' defined as both legacy and new for language ${n}`)});if(r.length>0)throw Error(r.join(`
`))}function cI(t){return UP(t)?gl(t.type).replace("."," "):t.type==="surroundingPair"?`Matching pair of ${gl(t.delimiter)}`:t.type==="customRegex"?`Regex \`${t.regex}\``:"Unknown scope type"}var Xg=class{constructor(e){this.customSpokenFormGenerator=e;this.listeners=[];this.disposable=e.onDidChangeCustomSpokenForms(()=>this.onChange()),this.onDidChangeScopeInfo=this.onDidChangeScopeInfo.bind(this),this.getScopeTypeInfo=this.getScopeTypeInfo.bind(this),this.updateScopeTypeInfos()}onDidChangeScopeInfo(e){return e(this.getScopeTypeInfos()),this.listeners.push(e),{dispose:()=>{or(this.listeners,e)}}}async onChange(){this.updateScopeTypeInfos(),this.listeners.forEach(e=>e(this.scopeInfos))}updateScopeTypeInfos(){let e=[...na.filter(r=>r!=="instance").map(r=>({type:r})),...Hf.map(r=>({type:"surroundingPair",delimiter:r})),...this.customSpokenFormGenerator.getCustomRegexScopeTypes()];this.scopeInfos=e.map(r=>this.getScopeTypeInfo(r))}getScopeTypeInfos(){return this.scopeInfos}getScopeTypeInfo(e){return{scopeType:e,spokenForm:this.customSpokenFormGenerator.scopeTypeToSpokenForm(e),humanReadableName:cI(e),isLanguageSpecific:LZ(e)}}dispose(){this.disposable.dispose()}};function LZ(t){switch(t.type){case"string":case"argumentOrParameter":case"anonymousFunction":case"attribute":case"branch":case"class":case"className":case"collectionItem":case"collectionKey":case"command":case"comment":case"private.fieldAccess":case"functionCall":case"functionCallee":case"functionName":case"ifStatement":case"instance":case"interior":case"list":case"map":case"name":case"namedFunction":case"regularExpression":case"statement":case"type":case"value":case"condition":case"section":case"sectionLevelOne":case"sectionLevelTwo":case"sectionLevelThree":case"sectionLevelFour":case"sectionLevelFive":case"sectionLevelSix":case"selector":case"private.switchStatementSubject":case"unit":case"xmlBothTags":case"xmlElement":case"xmlEndTag":case"xmlStartTag":case"part":case"chapter":case"subSection":case"subSubSection":case"namedParagraph":case"subParagraph":case"environment":case"textFragment":case"disqualifyDelimiter":case"pairDelimiter":return!0;case"character":case"word":case"token":case"identifier":case"line":case"sentence":case"paragraph":case"boundedParagraph":case"document":case"nonWhitespaceSequence":case"boundedNonWhitespaceSequence":case"url":case"notebookCell":case"surroundingPair":case"surroundingPairInterior":case"customRegex":case"glyph":return!1;case"oneOf":throw Error(`Can't decide whether scope type ${JSON.stringify(t,void 0,3)} is language-specific`)}}function mb(t,e,r){if(!r)return t.document.range;let n=t.visibleRanges.reduce((s,l)=>s.union(l));n=t.document.range.intersection(n.with(n.start.translate(-10),n.end.translate(10)));let i=xf(Array.from(e.generateScopes(t,n.start,"forward",{containment:"required"})))?.domain??n,o=xf(Array.from(e.generateScopes(t,n.end,"forward",{containment:"required"})))?.domain??n;return i.union(o)}function Ma(t){return{contentRange:t.contentRange,removalRange:t.getRemovalRange(),removalHighlightRange:t.getRemovalHighlightRange(),leadingDelimiter:lI(t.getLeadingDelimiterTarget()),trailingDelimiter:lI(t.getTrailingDelimiterTarget()),interior:t.getInterior()?.map(Ma),boundary:t.getBoundary()?.map(Ma),insertionDelimiter:t.insertionDelimiter}}function lI(t){return t!=null?Ma(t):void 0}function pI(t,e,r,n,i){return Ls(e.generateScopes(t,n.start,"forward",{includeDescendantScopes:!0,distalPosition:n.end}),o=>({domain:o.domain,ranges:o.getTargets(!1).map(s=>({range:s.contentRange,targets:i?UZ(r,s).map(Ma):void 0}))}))}function UZ(t,e){try{return t.run(e)}catch(r){if(r.name==="NoContainingScopeError")return[];throw r}}function uI(t,e,r){return Ls(e.generateScopes(t,r.start,"forward",{includeDescendantScopes:!0,distalPosition:r.end}),n=>({domain:n.domain,targets:n.getTargets(!1).map(Ma)}))}var Jg=class{constructor(e,r){this.scopeHandlerFactory=e;this.modifierStageFactory=r;this.provideScopeRanges=this.provideScopeRanges.bind(this),this.provideIterationScopeRanges=this.provideIterationScopeRanges.bind(this)}provideScopeRanges(e,{scopeType:r,visibleOnly:n}){let i=this.scopeHandlerFactory.maybeCreate(r,e.document.languageId);return i==null?[]:uI(e,i,mb(e,i,n))}provideIterationScopeRanges(e,{scopeType:r,visibleOnly:n,includeNestedTargets:i}){let{languageId:o}=e.document,s=this.scopeHandlerFactory.maybeCreate(r,o);if(s==null)return[];let l=this.scopeHandlerFactory.maybeCreate(s.iterationScopeType,o);return l==null?[]:pI(e,l,this.modifierStageFactory.create({type:"everyScope",scopeType:r}),mb(e,s,n),i)}};var ey=class{constructor(e,r){this.scopeRangeProvider=r;this.disposables=[];this.listeners=[];this.onChange=this.onChange.bind(this),this.onDidChangeScopeRanges=this.onDidChangeScopeRanges.bind(this),this.onDidChangeIterationScopeRanges=this.onDidChangeIterationScopeRanges.bind(this);let n=new Xn(k().configuration,()=>this.onChange());this.disposables.push(k().onDidChangeVisibleTextEditors(n.run),k().onDidOpenTextDocument(n.run),k().onDidCloseTextDocument(n.run),k().onDidChangeTextDocument(n.run),k().onDidChangeTextEditorVisibleRanges(n.run),e.onDidChangeDefinition(this.onChange),n)}onDidChangeScopeRanges(e,r){let n=()=>{k().visibleTextEditors.forEach(i=>{let o;try{o=this.scopeRangeProvider.provideScopeRanges(i,r)}catch(s){if(ct(k().messages,"ScopeRangeWatcher.provide",s.message),o=[],k().runMode==="test")throw s}e(i,o)})};return this.listeners.push(n),n(),{dispose:()=>{or(this.listeners,n)}}}onDidChangeIterationScopeRanges(e,r){let n=()=>{k().visibleTextEditors.forEach(i=>{e(i,this.scopeRangeProvider.provideIterationScopeRanges(i,r))})};return this.listeners.push(n),n(),{dispose:()=>{or(this.listeners,n)}}}onChange(){this.listeners.forEach(e=>e())}dispose(){this.disposables.forEach(({dispose:e})=>{try{e()}catch{}})}};var ty=class{constructor(e){this.scopeHandlerFactory=e;this.getScopeSupport=this.getScopeSupport.bind(this),this.getIterationScopeSupport=this.getIterationScopeSupport.bind(this)}getScopeSupport(e,r){let{languageId:n}=e.document,i=this.scopeHandlerFactory.maybeCreate(r,n);return i==null?mI(n,r):fI(e,i)?0:1}getIterationScopeSupport(e,r){let{languageId:n}=e.document,i=this.scopeHandlerFactory.maybeCreate(r,n);if(i==null)return mI(n,r);let o=this.scopeHandlerFactory.maybeCreate(i.iterationScopeType,n);return o==null?3:fI(e,o)?0:1}};function fI(t,e){return!BP(e.generateScopes(t,new ue(0,0),"forward"))}function mI(t,e){switch(e.type){case"notebookCell":return 3;default:return ql[t]?.[e.type]!=null?2:3}}var ry=class{constructor(e,r,n){this.scopeSupportChecker=r;this.scopeInfoProvider=n;this.listeners=[];this.onChange=this.onChange.bind(this),this.onDidChangeScopeSupport=this.onDidChangeScopeSupport.bind(this);let i=new Xn(k().configuration,()=>this.onChange());this.disposable=VP(k().onDidOpenTextDocument(i.run),k().onDidCloseTextDocument(i.run),k().onDidChangeActiveTextEditor(i.run),k().onDidChangeTextDocument(i.run),e.onDidChangeDefinition(i.run),this.scopeInfoProvider.onDidChangeScopeInfo(this.onChange),i)}onDidChangeScopeSupport(e){return e(this.getSupportLevels()),this.listeners.push(e),{dispose:()=>{or(this.listeners,e)}}}onChange(){if(this.listeners.length===0)return;let e=this.getSupportLevels();this.listeners.forEach(r=>r(e))}getSupportLevels(){let e=k().activeTextEditor,r=e==null?()=>3:o=>this.scopeSupportChecker.getScopeSupport(e,o),n=e==null?()=>3:o=>this.scopeSupportChecker.getIterationScopeSupport(e,o);return this.scopeInfoProvider.getScopeTypeInfos().map(o=>({...o,support:r(o.scopeType),iterationScopeSupport:n(o.scopeType)}))}dispose(){this.disposable.dispose()}};async function dI({ide:t,hats:e,treeSitterQueryProvider:r,treeSitter:n=new ed,commandServerApi:i=new Qm,talonSpokenForms:o=new Jm,snippets:s=new Xm}){Rm(t);let l=new Wm(t),p=new Km,u=new Pm,m=new Bm(t,u),d=new nd(o),g=e!=null?new zm(p,l,e,i):new Zm;g.allocateHats();let x=r?await qd.create(t,n,r):new Ym;t.disposeOnExit(p,x,g,l,m);let b=[],v,I=F=>(v=F,oI(n,i,l,g,s,u,x,p,b,F));return{commandApi:{runCommand(F){return I(F)},runCommandSafe(...F){return I(Vf(F))},repeatPreviousCommand(){if(v==null)throw new Error("No previous command");return I(v)}},scopeProvider:VZ(x,u,d),customSpokenFormGenerator:d,storedTargets:u,hatTokenMap:g,injectIde:Rm,runIntegrationTests:()=>sI(n,x),addCommandRunnerDecorator:F=>{b.push(F)}}}function VZ(t,e,r){let n=new js(t),i=new Jg(n,new cc(t,e,n)),o=new ey(t,i),s=new ty(n),l=new Xg(r),p=new ry(t,s,l);return{provideScopeRanges:i.provideScopeRanges,provideIterationScopeRanges:i.provideIterationScopeRanges,onDidChangeScopeRanges:o.onDidChangeScopeRanges,onDidChangeIterationScopeRanges:o.onDidChangeIterationScopeRanges,getScopeSupport:s.getScopeSupport,getIterationScopeSupport:s.getIterationScopeSupport,onDidChangeScopeSupport:p.onDidChangeScopeSupport,getScopeInfo:l.getScopeTypeInfo,onDidChangeScopeInfo:l.onDidChangeScopeInfo}}function hI(t,e){switch(e.type){case"UntypedTarget":return new It({editor:t,isReversed:e.isReversed,contentRange:Mf(e.contentRange),hasExplicitRange:e.hasExplicitRange});case"LineTarget":return new cr({editor:t,isReversed:e.isReversed,contentRange:Mf(e.contentRange)});default:throw Error(`Unsupported target type ${e.type}`)}}var ZLe=Symbol("unused");var yp=class{constructor(e){this.position=e}},YLe={$0:new yp(0),$1:new yp(1),$2:new yp(2)};var gI=require("node:events"),ny=class{constructor(){this.apis=new Map,this.commands=new Map,this.eventEmitter=new gI.EventEmitter}registerExtensionApi(e,r){this.apis.set(e,r)}getExtensionApi(e){return this.apis.get(e)}registerCommand(e,r){this.commands.set(e,r)}async executeCommand(e,...r){return await this.commands.get(e)(...r)}onEvent(e,r){return this.eventEmitter.on(e,r)}emitEvent(e,...r){return this.eventEmitter.emit(e,...r)}};function Kr(){return global._neovimRegistry==null&&(global._neovimRegistry=new ny),global._neovimRegistry}var yI="pokey.cursorless";async function iy(t,e){let r='return require("cursorless").buffer_get_selection()',[n,i,o,s,l]=await e.executeLua(r,[]),p;return l===!0?p=[new we(new ue(o-1,s-1),new ue(n-1,i-1))]:p=[new we(new ue(n-1,i-1),new ue(o-1,s-1))],console.debug(`bufferGetSelections(): selections=(${p[0].start.line}, ${p[0].start.character}), (${p[0].end.line}, ${p[0].end.character}) neovim=(${n},${i}),(${o},${s}),reverse=${l}`),p}async function xI(t,e){if(e.length!==1)throw new Error("bufferSetSelections() only supports one selection");let r=`return require("cursorless").select_range(${e[0].start.line+1}, ${e[0].start.character}, ${e[0].end.line+1}, ${e[0].end.character})`;console.debug(`bufferSetSelections() selections=(${e[0].start.line},${e[0].start.character}),(${e[0].end.line},${e[0].end.character}) luaCode="${r}"`),await t.executeLua(r,[])}async function SI(t,e,r){let n='return require("cursorless").window_get_visible_lines()',[i,o]=await e.executeLua(n,[]),s=new $(new ue(i-1,0),new ue(o-1,r[o-1].length-1));return console.debug(`windowGetVisibleRanges(): range=(${s.start.line}, ${s.start.character}), (${s.end.line}, ${s.end.character})`),[s]}async function TI(t){return await t.executeLua('return require("cursorless.utils").cursorless_nvim_path()',[])}async function oy(t,e){await e.callFunction("setreg",["*",t])}async function vI(t){return await t.callFunction("getreg",["*"])}async function bI(t){await t.executeLua('return require("cursorless.utils").paste()',[])}async function wI(t){await t.executeLua('return require("cursorless.utils").mode_switch_nt()',[])}async function _I(t){await t.executeLua('return require("cursorless.utils").mode_switch_t()',[])}async function EI(t,e){let r=`vim.notify("${e}")`;await t.executeLua(r,[])}var BZ={clipboardCopy:{acceptsLocation:!1},clipboardPaste:!0,toggleLineComment:void 0,indentLine:void 0,outdentLine:void 0,rename:void 0,quickFix:void 0,revealDefinition:void 0,revealTypeDefinition:void 0,showHover:void 0,showDebugHover:void 0,extractVariable:void 0,fold:void 0,highlight:{acceptsLocation:!0},unfold:void 0,showReferences:void 0,insertLineAfter:void 0,gitAccept:void 0,gitRevert:void 0,gitStage:void 0,gitUnstage:void 0},ay=class{constructor(){this.commands=BZ}};var xp=class{constructor(e){this.client=e}async readText(){return await vI(this.client)}async writeText(e){return await oy(e,this.client)}};var sy=Sr(db(),1);var Tp=class{constructor(){this.notifier=new Gt;this.mocks={..._f};this.scopes=[];this.onDidChangeConfiguration=this.notifier.registerListener;this.onDidChangeConfiguration=this.onDidChangeConfiguration.bind(this)}getOwnConfiguration(e,r){if(r!=null){for(let{scope:n,values:i}of this.scopes)if(WZ(n,r))return(0,sy.get)(i,e)??(0,sy.get)(this.mocks,e)}return(0,sy.get)(this.mocks,e)}mockConfiguration(e,r){this.mocks[e]=r,this.notifier.notifyListeners()}mockConfigurationScope(e,r,n=!1){this.scopes.push({scope:e,values:r}),n||this.notifier.notifyListeners()}};function WZ(t,e){return t.languageId===e.languageId}async function hb(t,e,r,n){console.debug("neovimEdit() [unsorted]:");for(let s of n)console.debug(`	range=${JSON.stringify(s.range)}, text='${s.text}', isReplace=${s.isReplace}`);n.sort((s,l)=>(RI(s)||kI(s))&&(RI(l)||kI(l))?1:s.range.start.line===l.range.start.line?l.range.start.character-s.range.start.character:l.range.start.line-s.range.start.line),console.debug("neovimEdit() [sorted]:");for(let s of n)console.debug(`	range=${JSON.stringify(s.range)}, text='${s.text}', isReplace=${s.isReplace}`);let i=e.getTextDocument(await t.window.buffer),o=[];for(let s of n)o.push({range:s.range,rangeOffset:i.offsetAt(s.range.start),rangeLength:i.offsetAt(s.range.end)-i.offsetAt(s.range.start),text:s.text});Kr().emitEvent("onDidChangeTextDocument",{document:i,contentChanges:o});for(let s of n){let{range:l,text:p,isReplace:u}=s;p===""?await PI(t,l):l.isEmpty&&!u?await AI(t,l.start,p):await $Z(t,l,p)}return await e.updateTextEditor(),!0}async function PI(t,e){console.debug(`neovimDelete(): range=${JSON.stringify(e)}`);let r=await t.window.buffer,n=(await r.getLines({start:e.end.line,end:e.end.line+1,strictIndexing:!0}))[0],i=n.slice(e.end.character);if(e.start.line===e.end.line){let l=n.slice(0,e.start.character)+i;await r.setLines(l,{start:e.start.line,end:e.start.line+1,strictIndexing:!0});return}if(e.start.character===0){await r.setLines(i,{start:e.start.line,end:e.end.line+1,strictIndexing:!0});return}let o=(await r.getLines({start:e.start.line,end:e.start.line+1,strictIndexing:!0}))[0],s=o.slice(0,e.start.character);if(e.start.character<=o.length){await r.setLines(s+i,{start:e.start.line,end:e.end.line+1,strictIndexing:!0});return}await r.setLines([s,i],{start:e.start.line,end:e.end.line+1,strictIndexing:!0})}async function AI(t,e,r){console.debug(`neovimInsert(): position=${JSON.stringify(e)}, text='${r}'`);let n=r.replace(/(?:\r\n|\r|\n)/g,`
`).split(`
`),i=await t.window.buffer,o=(await i.getLines({start:e.line,end:e.line+1,strictIndexing:!0}))[0],s=o.slice(0,e.character),l=o.slice(e.character);if(n.length===1){let m=s+n[0]+l;await i.setLines(m,{start:e.line,end:e.line+1,strictIndexing:!0});return}let p=s+n[0],u=n[n.length-1]+l;await i.setLines([p,...n.slice(1,n.length-1),u],{start:e.line,end:e.line+1,strictIndexing:!0})}async function $Z(t,e,r){console.debug(`neovimReplace(): range=${JSON.stringify(e)}, text='${r}'`),await PI(t,e),await AI(t,e.start,r)}function RI(t){return t.range.isEmpty&&!t.isReplace}function kI(t){return t.text!==""&&!!(!t.range.isEmpty||t.isReplace)}function MI(t){return Kr().onEvent("onDidChangeTextDocument",t),FI()}function DI(t,e,r){return Kr().onEvent("onDidOpenTextDocument",t),FI()}function FI(){return{dispose(){}}}var vp=class{constructor(){this.data={...Ef}}get(e){return this.data[e]}set(e,r){return this.data[e]=r,Promise.resolve()}};var O1=Sr(db(),1);var bp=class{async showMessage(e,r,n,...i){}};async function II(t,e){let r=e.activeTextEditor,n=await t.window,i=await iy(n,t),o=r.document.getText(i[0]);await oy(o,t)}async function CI(t,e){await bI(t)}var cy=class{constructor(e,r,n,i,o,s,l){this.id=e;this.client=r;this.neovimIDE=n;this.window=i;this._document=o,this._selections=l,this._visibleRanges=s}get document(){return this._document}updateDocument(e,r,n,i){if(n)this._document=n;else if(i)this._document.update(i);else throw Error("updateDocument(): invalid arguments");return this._selections=r,this._visibleRanges=e,this._document}get selections(){return this._selections}async setSelections(e){this._selections=e,await xI(this.client,e)}get visibleRanges(){return this._visibleRanges}get options(){throw Error("get options Not implemented")}set options(e){throw Error("set options Not implemented")}get isActive(){return!0}isEqual(e){return this.id===e.id}async revealRange(e){}revealLine(e,r){throw Error("revealLine Not implemented")}async edit(e){return await hb(this.client,this.neovimIDE,this.window,e)}focus(){return Promise.resolve()}editNewNotebookCellAbove(){throw Error("editNewNotebookCellAbove Not implemented")}editNewNotebookCellBelow(){throw Error("editNewNotebookCellBelow Not implemented")}openLink(e,r){throw Error("openLink Not implemented")}fold(e){throw Error("fold Not implemented")}unfold(e){throw Error("unfold Not implemented")}toggleBreakpoint(e){throw Error("toggleBreakpoint Not implemented")}async toggleLineComment(e){throw Error("toggleLineComment Not implemented")}async clipboardCopy(e){await II(this.client,this.neovimIDE)}async clipboardPaste(){await CI(this.client,this.neovimIDE)}async indentLine(e){throw Error("indentLine Not implemented")}async outdentLine(e){throw Error("outdentLine Not implemented")}async insertLineAfter(e){throw Error("insertLineAfter Not implemented")}insertSnippet(e,r){throw Error("insertSnippet Not implemented")}async rename(e){throw Error("rename Not implemented")}async showReferences(e){throw Error("showReferences Not implemented")}async quickFix(e){throw Error("quickFix Not implemented")}async revealDefinition(e){throw Error("revealDefinition Not implemented")}async revealTypeDefinition(e){throw Error("revealTypeDefinition Not implemented")}async showHover(e){throw Error("showHover Not implemented")}async showDebugHover(e){throw Error("showDebugHover Not implemented")}async extractVariable(e){throw Error("extractVariable Not implemented")}async gitAccept(e){throw Error("gitAccept Not implemented")}async gitRevert(e){throw Error("gitRevert Not implemented")}async gitStage(e){throw Error("gitStage Not implemented")}async gitUnstage(e){throw Error("gitUnstage Not implemented")}};var Ow=Sr(require("path"),1);var NI;(()=>{"use strict";var t={470:i=>{function o(p){if(typeof p!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(p))}function s(p,u){for(var m,d="",g=0,x=-1,b=0,v=0;v<=p.length;++v){if(v<p.length)m=p.charCodeAt(v);else{if(m===47)break;m=47}if(m===47){if(!(x===v-1||b===1))if(x!==v-1&&b===2){if(d.length<2||g!==2||d.charCodeAt(d.length-1)!==46||d.charCodeAt(d.length-2)!==46){if(d.length>2){var I=d.lastIndexOf("/");if(I!==d.length-1){I===-1?(d="",g=0):g=(d=d.slice(0,I)).length-1-d.lastIndexOf("/"),x=v,b=0;continue}}else if(d.length===2||d.length===1){d="",g=0,x=v,b=0;continue}}u&&(d.length>0?d+="/..":d="..",g=2)}else d.length>0?d+="/"+p.slice(x+1,v):d=p.slice(x+1,v),g=v-x-1;x=v,b=0}else m===46&&b!==-1?++b:b=-1}return d}var l={resolve:function(){for(var p,u="",m=!1,d=arguments.length-1;d>=-1&&!m;d--){var g;d>=0?g=arguments[d]:(p===void 0&&(p=process.cwd()),g=p),o(g),g.length!==0&&(u=g+"/"+u,m=g.charCodeAt(0)===47)}return u=s(u,!m),m?u.length>0?"/"+u:"/":u.length>0?u:"."},normalize:function(p){if(o(p),p.length===0)return".";var u=p.charCodeAt(0)===47,m=p.charCodeAt(p.length-1)===47;return(p=s(p,!u)).length!==0||u||(p="."),p.length>0&&m&&(p+="/"),u?"/"+p:p},isAbsolute:function(p){return o(p),p.length>0&&p.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var p,u=0;u<arguments.length;++u){var m=arguments[u];o(m),m.length>0&&(p===void 0?p=m:p+="/"+m)}return p===void 0?".":l.normalize(p)},relative:function(p,u){if(o(p),o(u),p===u||(p=l.resolve(p))===(u=l.resolve(u)))return"";for(var m=1;m<p.length&&p.charCodeAt(m)===47;++m);for(var d=p.length,g=d-m,x=1;x<u.length&&u.charCodeAt(x)===47;++x);for(var b=u.length-x,v=g<b?g:b,I=-1,F=0;F<=v;++F){if(F===v){if(b>v){if(u.charCodeAt(x+F)===47)return u.slice(x+F+1);if(F===0)return u.slice(x+F)}else g>v&&(p.charCodeAt(m+F)===47?I=F:F===0&&(I=0));break}var H=p.charCodeAt(m+F);if(H!==u.charCodeAt(x+F))break;H===47&&(I=F)}var Q="";for(F=m+I+1;F<=d;++F)F!==d&&p.charCodeAt(F)!==47||(Q.length===0?Q+="..":Q+="/..");return Q.length>0?Q+u.slice(x+I):(x+=I,u.charCodeAt(x)===47&&++x,u.slice(x))},_makeLong:function(p){return p},dirname:function(p){if(o(p),p.length===0)return".";for(var u=p.charCodeAt(0),m=u===47,d=-1,g=!0,x=p.length-1;x>=1;--x)if((u=p.charCodeAt(x))===47){if(!g){d=x;break}}else g=!1;return d===-1?m?"/":".":m&&d===1?"//":p.slice(0,d)},basename:function(p,u){if(u!==void 0&&typeof u!="string")throw new TypeError('"ext" argument must be a string');o(p);var m,d=0,g=-1,x=!0;if(u!==void 0&&u.length>0&&u.length<=p.length){if(u.length===p.length&&u===p)return"";var b=u.length-1,v=-1;for(m=p.length-1;m>=0;--m){var I=p.charCodeAt(m);if(I===47){if(!x){d=m+1;break}}else v===-1&&(x=!1,v=m+1),b>=0&&(I===u.charCodeAt(b)?--b==-1&&(g=m):(b=-1,g=v))}return d===g?g=v:g===-1&&(g=p.length),p.slice(d,g)}for(m=p.length-1;m>=0;--m)if(p.charCodeAt(m)===47){if(!x){d=m+1;break}}else g===-1&&(x=!1,g=m+1);return g===-1?"":p.slice(d,g)},extname:function(p){o(p);for(var u=-1,m=0,d=-1,g=!0,x=0,b=p.length-1;b>=0;--b){var v=p.charCodeAt(b);if(v!==47)d===-1&&(g=!1,d=b+1),v===46?u===-1?u=b:x!==1&&(x=1):u!==-1&&(x=-1);else if(!g){m=b+1;break}}return u===-1||d===-1||x===0||x===1&&u===d-1&&u===m+1?"":p.slice(u,d)},format:function(p){if(p===null||typeof p!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof p);return function(u,m){var d=m.dir||m.root,g=m.base||(m.name||"")+(m.ext||"");return d?d===m.root?d+g:d+"/"+g:g}(0,p)},parse:function(p){o(p);var u={root:"",dir:"",base:"",ext:"",name:""};if(p.length===0)return u;var m,d=p.charCodeAt(0),g=d===47;g?(u.root="/",m=1):m=0;for(var x=-1,b=0,v=-1,I=!0,F=p.length-1,H=0;F>=m;--F)if((d=p.charCodeAt(F))!==47)v===-1&&(I=!1,v=F+1),d===46?x===-1?x=F:H!==1&&(H=1):x!==-1&&(H=-1);else if(!I){b=F+1;break}return x===-1||v===-1||H===0||H===1&&x===v-1&&x===b+1?v!==-1&&(u.base=u.name=b===0&&g?p.slice(1,v):p.slice(b,v)):(b===0&&g?(u.name=p.slice(1,x),u.base=p.slice(1,v)):(u.name=p.slice(b,x),u.base=p.slice(b,v)),u.ext=p.slice(x,v)),b>0?u.dir=p.slice(0,b-1):g&&(u.dir="/"),u},sep:"/",delimiter:":",win32:null,posix:null};l.posix=l,i.exports=l}},e={};function r(i){var o=e[i];if(o!==void 0)return o.exports;var s=e[i]={exports:{}};return t[i](s,s.exports,r),s.exports}r.d=(i,o)=>{for(var s in o)r.o(o,s)&&!r.o(i,s)&&Object.defineProperty(i,s,{enumerable:!0,get:o[s]})},r.o=(i,o)=>Object.prototype.hasOwnProperty.call(i,o),r.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})};var n={};(()=>{let i;r.r(n),r.d(n,{URI:()=>g,Utils:()=>L}),typeof process=="object"?i=process.platform==="win32":typeof navigator=="object"&&(i=navigator.userAgent.indexOf("Windows")>=0);let o=/^\w[\w\d+.-]*$/,s=/^\//,l=/^\/\//;function p(O,D){if(!O.scheme&&D)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${O.authority}", path: "${O.path}", query: "${O.query}", fragment: "${O.fragment}"}`);if(O.scheme&&!o.test(O.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(O.path){if(O.authority){if(!s.test(O.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(l.test(O.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}let u="",m="/",d=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class g{static isUri(D){return D instanceof g||!!D&&typeof D.authority=="string"&&typeof D.fragment=="string"&&typeof D.path=="string"&&typeof D.query=="string"&&typeof D.scheme=="string"&&typeof D.fsPath=="string"&&typeof D.with=="function"&&typeof D.toString=="function"}scheme;authority;path;query;fragment;constructor(D,j,G,Z,Y,re=!1){typeof D=="object"?(this.scheme=D.scheme||u,this.authority=D.authority||u,this.path=D.path||u,this.query=D.query||u,this.fragment=D.fragment||u):(this.scheme=function(ge,ne){return ge||ne?ge:"file"}(D,re),this.authority=j||u,this.path=function(ge,ne){switch(ge){case"https":case"http":case"file":ne?ne[0]!==m&&(ne=m+ne):ne=m}return ne}(this.scheme,G||u),this.query=Z||u,this.fragment=Y||u,p(this,re))}get fsPath(){return H(this,!1)}with(D){if(!D)return this;let{scheme:j,authority:G,path:Z,query:Y,fragment:re}=D;return j===void 0?j=this.scheme:j===null&&(j=u),G===void 0?G=this.authority:G===null&&(G=u),Z===void 0?Z=this.path:Z===null&&(Z=u),Y===void 0?Y=this.query:Y===null&&(Y=u),re===void 0?re=this.fragment:re===null&&(re=u),j===this.scheme&&G===this.authority&&Z===this.path&&Y===this.query&&re===this.fragment?this:new b(j,G,Z,Y,re)}static parse(D,j=!1){let G=d.exec(D);return G?new b(G[2]||u,ce(G[4]||u),ce(G[5]||u),ce(G[7]||u),ce(G[9]||u),j):new b(u,u,u,u,u)}static file(D){let j=u;if(i&&(D=D.replace(/\\/g,m)),D[0]===m&&D[1]===m){let G=D.indexOf(m,2);G===-1?(j=D.substring(2),D=m):(j=D.substring(2,G),D=D.substring(G)||m)}return new b("file",j,D,u,u)}static from(D){let j=new b(D.scheme,D.authority,D.path,D.query,D.fragment);return p(j,!0),j}toString(D=!1){return Q(this,D)}toJSON(){return this}static revive(D){if(D){if(D instanceof g)return D;{let j=new b(D);return j._formatted=D.external,j._fsPath=D._sep===x?D.fsPath:null,j}}return D}}let x=i?1:void 0;class b extends g{_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=H(this,!1)),this._fsPath}toString(D=!1){return D?Q(this,!0):(this._formatted||(this._formatted=Q(this,!1)),this._formatted)}toJSON(){let D={$mid:1};return this._fsPath&&(D.fsPath=this._fsPath,D._sep=x),this._formatted&&(D.external=this._formatted),this.path&&(D.path=this.path),this.scheme&&(D.scheme=this.scheme),this.authority&&(D.authority=this.authority),this.query&&(D.query=this.query),this.fragment&&(D.fragment=this.fragment),D}}let v={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function I(O,D,j){let G,Z=-1;for(let Y=0;Y<O.length;Y++){let re=O.charCodeAt(Y);if(re>=97&&re<=122||re>=65&&re<=90||re>=48&&re<=57||re===45||re===46||re===95||re===126||D&&re===47||j&&re===91||j&&re===93||j&&re===58)Z!==-1&&(G+=encodeURIComponent(O.substring(Z,Y)),Z=-1),G!==void 0&&(G+=O.charAt(Y));else{G===void 0&&(G=O.substr(0,Y));let ge=v[re];ge!==void 0?(Z!==-1&&(G+=encodeURIComponent(O.substring(Z,Y)),Z=-1),G+=ge):Z===-1&&(Z=Y)}}return Z!==-1&&(G+=encodeURIComponent(O.substring(Z))),G!==void 0?G:O}function F(O){let D;for(let j=0;j<O.length;j++){let G=O.charCodeAt(j);G===35||G===63?(D===void 0&&(D=O.substr(0,j)),D+=v[G]):D!==void 0&&(D+=O[j])}return D!==void 0?D:O}function H(O,D){let j;return j=O.authority&&O.path.length>1&&O.scheme==="file"?`//${O.authority}${O.path}`:O.path.charCodeAt(0)===47&&(O.path.charCodeAt(1)>=65&&O.path.charCodeAt(1)<=90||O.path.charCodeAt(1)>=97&&O.path.charCodeAt(1)<=122)&&O.path.charCodeAt(2)===58?D?O.path.substr(1):O.path[1].toLowerCase()+O.path.substr(2):O.path,i&&(j=j.replace(/\//g,"\\")),j}function Q(O,D){let j=D?F:I,G="",{scheme:Z,authority:Y,path:re,query:ge,fragment:ne}=O;if(Z&&(G+=Z,G+=":"),(Y||Z==="file")&&(G+=m,G+=m),Y){let ke=Y.indexOf("@");if(ke!==-1){let mr=Y.substr(0,ke);Y=Y.substr(ke+1),ke=mr.lastIndexOf(":"),ke===-1?G+=j(mr,!1,!1):(G+=j(mr.substr(0,ke),!1,!1),G+=":",G+=j(mr.substr(ke+1),!1,!0)),G+="@"}Y=Y.toLowerCase(),ke=Y.lastIndexOf(":"),ke===-1?G+=j(Y,!1,!0):(G+=j(Y.substr(0,ke),!1,!0),G+=Y.substr(ke))}if(re){if(re.length>=3&&re.charCodeAt(0)===47&&re.charCodeAt(2)===58){let ke=re.charCodeAt(1);ke>=65&&ke<=90&&(re=`/${String.fromCharCode(ke+32)}:${re.substr(3)}`)}else if(re.length>=2&&re.charCodeAt(1)===58){let ke=re.charCodeAt(0);ke>=65&&ke<=90&&(re=`${String.fromCharCode(ke+32)}:${re.substr(2)}`)}G+=j(re,!0,!1)}return ge&&(G+="?",G+=j(ge,!1,!1)),ne&&(G+="#",G+=D?ne:I(ne,!1,!1)),G}function ie(O){try{return decodeURIComponent(O)}catch{return O.length>3?O.substr(0,3)+ie(O.substr(3)):O}}let oe=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function ce(O){return O.match(oe)?O.replace(oe,D=>ie(D)):O}var at=r(470);let Lt=at.posix||at,pt="/";var L;(function(O){O.joinPath=function(D,...j){return D.with({path:Lt.join(D.path,...j)})},O.resolvePath=function(D,...j){let G=D.path,Z=!1;G[0]!==pt&&(G=pt+G,Z=!0);let Y=Lt.resolve(G,...j);return Z&&Y[0]===pt&&!D.authority&&(Y=Y.substring(1)),D.with({path:Y})},O.dirname=function(D){if(D.path.length===0||D.path===pt)return D;let j=Lt.dirname(D.path);return j.length===1&&j.charCodeAt(0)===46&&(j=""),D.with({path:j})},O.basename=function(D){return Lt.basename(D.path)},O.extname=function(D){return Lt.extname(D.path)}})(L||(L={}))})(),NI=n})();var{URI:OI,Utils:QUe}=NI;var nC=Sr(QI(),1);var _p=t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>65536)throw new TypeError("pattern is too long")};var YZ={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},Ep=t=>t.replace(/[[\]\\-]/g,"\\$&"),XZ=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),ZI=t=>t.join(""),YI=(t,e)=>{let r=e;if(t.charAt(r)!=="[")throw new Error("not in a brace expression");let n=[],i=[],o=r+1,s=!1,l=!1,p=!1,u=!1,m=r,d="";e:for(;o<t.length;){let v=t.charAt(o);if((v==="!"||v==="^")&&o===r+1){u=!0,o++;continue}if(v==="]"&&s&&!p){m=o+1;break}if(s=!0,v==="\\"&&!p){p=!0,o++;continue}if(v==="["&&!p){for(let[I,[F,H,Q]]of Object.entries(YZ))if(t.startsWith(I,o)){if(d)return["$.",!1,t.length-r,!0];o+=I.length,Q?i.push(F):n.push(F),l=l||H;continue e}}if(p=!1,d){v>d?n.push(Ep(d)+"-"+Ep(v)):v===d&&n.push(Ep(v)),d="",o++;continue}if(t.startsWith("-]",o+1)){n.push(Ep(v+"-")),o+=2;continue}if(t.startsWith("-",o+1)){d=v,o+=2;continue}n.push(Ep(v)),o++}if(m<o)return["",!1,0,!1];if(!n.length&&!i.length)return["$.",!1,t.length-r,!0];if(i.length===0&&n.length===1&&/^\\?.$/.test(n[0])&&!u){let v=n[0].length===2?n[0].slice(-1):n[0];return[XZ(v),!1,m-r,!1]}let g="["+(u?"^":"")+ZI(n)+"]",x="["+(u?"":"^")+ZI(i)+"]";return[n.length&&i.length?"("+g+"|"+x+")":n.length?g:x,l,m-r,!0]};var Vn=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");var JZ=new Set(["!","?","+","*","@"]),XI=t=>JZ.has(t),eY="(?!(?:^|/)\\.\\.?(?:$|/))",ly="(?!\\.)",tY=new Set(["[","."]),rY=new Set(["..","."]),nY=new Set("().*{}+?[]^$\\!"),iY=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),xb="[^/]",JI=xb+"*?",eC=xb+"+?",hc=class t{type;#e;#t;#o=!1;#n=[];#a;#T;#l;#u=!1;#s;#c;#i=!1;constructor(e,r,n={}){this.type=e,e&&(this.#t=!0),this.#a=r,this.#e=this.#a?this.#a.#e:this,this.#s=this.#e===this?n:this.#e.#s,this.#l=this.#e===this?[]:this.#e.#l,e==="!"&&!this.#e.#u&&this.#l.push(this),this.#T=this.#a?this.#a.#n.length:0}get hasMagic(){if(this.#t!==void 0)return this.#t;for(let e of this.#n)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#t=!0;return this.#t}toString(){return this.#c!==void 0?this.#c:this.type?this.#c=this.type+"("+this.#n.map(e=>String(e)).join("|")+")":this.#c=this.#n.map(e=>String(e)).join("")}#g(){if(this!==this.#e)throw new Error("should only call on root");if(this.#u)return this;this.toString(),this.#u=!0;let e;for(;e=this.#l.pop();){if(e.type!=="!")continue;let r=e,n=r.#a;for(;n;){for(let i=r.#T+1;!n.type&&i<n.#n.length;i++)for(let o of e.#n){if(typeof o=="string")throw new Error("string part in extglob AST??");o.copyIn(n.#n[i])}r=n,n=r.#a}}return this}push(...e){for(let r of e)if(r!==""){if(typeof r!="string"&&!(r instanceof t&&r.#a===this))throw new Error("invalid part: "+r);this.#n.push(r)}}toJSON(){let e=this.type===null?this.#n.slice().map(r=>typeof r=="string"?r:r.toJSON()):[this.type,...this.#n.map(r=>r.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#u&&this.#a?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#a?.isStart())return!1;if(this.#T===0)return!0;let e=this.#a;for(let r=0;r<this.#T;r++){let n=e.#n[r];if(!(n instanceof t&&n.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#a?.type==="!")return!0;if(!this.#a?.isEnd())return!1;if(!this.type)return this.#a?.isEnd();let e=this.#a?this.#a.#n.length:0;return this.#T===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let r=new t(this.type,e);for(let n of this.#n)r.copyIn(n);return r}static#y(e,r,n,i){let o=!1,s=!1,l=-1,p=!1;if(r.type===null){let x=n,b="";for(;x<e.length;){let v=e.charAt(x++);if(o||v==="\\"){o=!o,b+=v;continue}if(s){x===l+1?(v==="^"||v==="!")&&(p=!0):v==="]"&&!(x===l+2&&p)&&(s=!1),b+=v;continue}else if(v==="["){s=!0,l=x,p=!1,b+=v;continue}if(!i.noext&&XI(v)&&e.charAt(x)==="("){r.push(b),b="";let I=new t(v,r);x=t.#y(e,I,x,i),r.push(I);continue}b+=v}return r.push(b),x}let u=n+1,m=new t(null,r),d=[],g="";for(;u<e.length;){let x=e.charAt(u++);if(o||x==="\\"){o=!o,g+=x;continue}if(s){u===l+1?(x==="^"||x==="!")&&(p=!0):x==="]"&&!(u===l+2&&p)&&(s=!1),g+=x;continue}else if(x==="["){s=!0,l=u,p=!1,g+=x;continue}if(XI(x)&&e.charAt(u)==="("){m.push(g),g="";let b=new t(x,m);m.push(b),u=t.#y(e,b,u,i);continue}if(x==="|"){m.push(g),g="",d.push(m),m=new t(null,r);continue}if(x===")")return g===""&&r.#n.length===0&&(r.#i=!0),m.push(g),g="",r.push(...d,m),u;g+=x}return r.type=null,r.#t=void 0,r.#n=[e.substring(n-1)],u}static fromGlob(e,r={}){let n=new t(null,void 0,r);return t.#y(e,n,0,r),n}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[r,n,i,o]=this.toRegExpSource();if(!(i||this.#t||this.#s.nocase&&!this.#s.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return n;let l=(this.#s.nocase?"i":"")+(o?"u":"");return Object.assign(new RegExp(`^${r}$`,l),{_src:r,_glob:e})}get options(){return this.#s}toRegExpSource(e){let r=e??!!this.#s.dot;if(this.#e===this&&this.#g(),!this.type){let p=this.isStart()&&this.isEnd(),u=this.#n.map(x=>{let[b,v,I,F]=typeof x=="string"?t.#f(x,this.#t,p):x.toRegExpSource(e);return this.#t=this.#t||I,this.#o=this.#o||F,b}).join(""),m="";if(this.isStart()&&typeof this.#n[0]=="string"&&!(this.#n.length===1&&rY.has(this.#n[0]))){let b=tY,v=r&&b.has(u.charAt(0))||u.startsWith("\\.")&&b.has(u.charAt(2))||u.startsWith("\\.\\.")&&b.has(u.charAt(4)),I=!r&&!e&&b.has(u.charAt(0));m=v?eY:I?ly:""}let d="";return this.isEnd()&&this.#e.#u&&this.#a?.type==="!"&&(d="(?:$|\\/)"),[m+u+d,Vn(u),this.#t=!!this.#t,this.#o]}let n=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",o=this.#m(r);if(this.isStart()&&this.isEnd()&&!o&&this.type!=="!"){let p=this.toString();return this.#n=[p],this.type=null,this.#t=void 0,[p,Vn(this.toString()),!1,!1]}let s=!n||e||r||!ly?"":this.#m(!0);s===o&&(s=""),s&&(o=`(?:${o})(?:${s})*?`);let l="";if(this.type==="!"&&this.#i)l=(this.isStart()&&!r?ly:"")+eC;else{let p=this.type==="!"?"))"+(this.isStart()&&!r&&!e?ly:"")+JI+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&s?")":this.type==="*"&&s?")?":`)${this.type}`;l=i+o+p}return[l,Vn(o),this.#t=!!this.#t,this.#o]}#m(e){return this.#n.map(r=>{if(typeof r=="string")throw new Error("string type in extglob ast??");let[n,i,o,s]=r.toRegExpSource(e);return this.#o=this.#o||s,n}).filter(r=>!(this.isStart()&&this.isEnd())||!!r).join("|")}static#f(e,r,n=!1){let i=!1,o="",s=!1;for(let l=0;l<e.length;l++){let p=e.charAt(l);if(i){i=!1,o+=(nY.has(p)?"\\":"")+p;continue}if(p==="\\"){l===e.length-1?o+="\\\\":i=!0;continue}if(p==="["){let[u,m,d,g]=YI(e,l);if(d){o+=u,s=s||m,l+=d-1,r=r||g;continue}}if(p==="*"){n&&e==="*"?o+=eC:o+=JI,r=!0;continue}if(p==="?"){o+=xb,r=!0;continue}o+=iY(p)}return[o,Vn(e),!!r,s]}};var gc=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&");var ur=(t,e,r={})=>(_p(e),!r.nocomment&&e.charAt(0)==="#"?!1:new Qr(e,r).match(t)),oY=/^\*+([^+@!?\*\[\(]*)$/,aY=t=>e=>!e.startsWith(".")&&e.endsWith(t),sY=t=>e=>e.endsWith(t),cY=t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),lY=t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),pY=/^\*+\.\*+$/,uY=t=>!t.startsWith(".")&&t.includes("."),fY=t=>t!=="."&&t!==".."&&t.includes("."),mY=/^\.\*+$/,dY=t=>t!=="."&&t!==".."&&t.startsWith("."),hY=/^\*+$/,gY=t=>t.length!==0&&!t.startsWith("."),yY=t=>t.length!==0&&t!=="."&&t!=="..",xY=/^\?+([^+@!?\*\[\(]*)?$/,SY=([t,e=""])=>{let r=iC([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},TY=([t,e=""])=>{let r=oC([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},vY=([t,e=""])=>{let r=oC([t]);return e?n=>r(n)&&n.endsWith(e):r},bY=([t,e=""])=>{let r=iC([t]);return e?n=>r(n)&&n.endsWith(e):r},iC=([t])=>{let e=t.length;return r=>r.length===e&&!r.startsWith(".")},oC=([t])=>{let e=t.length;return r=>r.length===e&&r!=="."&&r!==".."},aC=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",tC={win32:{sep:"\\"},posix:{sep:"/"}},wY=aC==="win32"?tC.win32.sep:tC.posix.sep;ur.sep=wY;var jt=Symbol("globstar **");ur.GLOBSTAR=jt;var _Y="[^/]",EY=_Y+"*?",RY="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",kY="(?:(?!(?:\\/|^)\\.).)*?",PY=(t,e={})=>r=>ur(r,t,e);ur.filter=PY;var Tn=(t,e={})=>Object.assign({},t,e),AY=t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return ur;let e=ur;return Object.assign((n,i,o={})=>e(n,i,Tn(t,o)),{Minimatch:class extends e.Minimatch{constructor(i,o={}){super(i,Tn(t,o))}static defaults(i){return e.defaults(Tn(t,i)).Minimatch}},AST:class extends e.AST{constructor(i,o,s={}){super(i,o,Tn(t,s))}static fromGlob(i,o={}){return e.AST.fromGlob(i,Tn(t,o))}},unescape:(n,i={})=>e.unescape(n,Tn(t,i)),escape:(n,i={})=>e.escape(n,Tn(t,i)),filter:(n,i={})=>e.filter(n,Tn(t,i)),defaults:n=>e.defaults(Tn(t,n)),makeRe:(n,i={})=>e.makeRe(n,Tn(t,i)),braceExpand:(n,i={})=>e.braceExpand(n,Tn(t,i)),match:(n,i,o={})=>e.match(n,i,Tn(t,o)),sep:e.sep,GLOBSTAR:jt})};ur.defaults=AY;var sC=(t,e={})=>(_p(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:(0,nC.default)(t));ur.braceExpand=sC;var MY=(t,e={})=>new Qr(t,e).makeRe();ur.makeRe=MY;var DY=(t,e,r={})=>{let n=new Qr(e,r);return t=t.filter(i=>n.match(i)),n.options.nonull&&!t.length&&t.push(e),t};ur.match=DY;var rC=/[?*]|[+@!]\(.*?\)|\[|\]/,FY=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Qr=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,r={}){_p(e),r=r||{},this.options=r,this.pattern=e,this.platform=r.platform||aC,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!r.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!r.nonegate,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=r.windowsNoMagicRoot!==void 0?r.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let r of e)if(typeof r!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],r.debug&&(this.debug=(...o)=>console.error(...o)),this.debug(this.pattern,this.globSet);let n=this.globSet.map(o=>this.slashSplit(o));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let i=this.globParts.map((o,s,l)=>{if(this.isWindows&&this.windowsNoMagicRoot){let p=o[0]===""&&o[1]===""&&(o[2]==="?"||!rC.test(o[2]))&&!rC.test(o[3]),u=/^[a-z]:/i.test(o[0]);if(p)return[...o.slice(0,4),...o.slice(4).map(m=>this.parse(m))];if(u)return[o[0],...o.slice(1).map(m=>this.parse(m))]}return o.map(p=>this.parse(p))});if(this.debug(this.pattern,i),this.set=i.filter(o=>o.indexOf(!1)===-1),this.isWindows)for(let o=0;o<this.set.length;o++){let s=this.set[o];s[0]===""&&s[1]===""&&this.globParts[o][2]==="?"&&typeof s[3]=="string"&&/^[a-z]:$/i.test(s[3])&&(s[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let n=0;n<e.length;n++)for(let i=0;i<e[n].length;i++)e[n][i]==="**"&&(e[n][i]="*");let{optimizationLevel:r=1}=this.options;return r>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):r>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(r=>{let n=-1;for(;(n=r.indexOf("**",n+1))!==-1;){let i=n;for(;r[i+1]==="**";)i++;i!==n&&r.splice(n,i-n)}return r})}levelOneOptimize(e){return e.map(r=>(r=r.reduce((n,i)=>{let o=n[n.length-1];return i==="**"&&o==="**"?n:i===".."&&o&&o!==".."&&o!=="."&&o!=="**"?(n.pop(),n):(n.push(i),n)},[]),r.length===0?[""]:r))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let r=!1;do{if(r=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let o=e[i];i===1&&o===""&&e[0]===""||(o==="."||o==="")&&(r=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(r=!0,e.pop())}let n=0;for(;(n=e.indexOf("..",n+1))!==-1;){let i=e[n-1];i&&i!=="."&&i!==".."&&i!=="**"&&(r=!0,e.splice(n-1,2),n-=2)}}while(r);return e.length===0?[""]:e}firstPhasePreProcess(e){let r=!1;do{r=!1;for(let n of e){let i=-1;for(;(i=n.indexOf("**",i+1))!==-1;){let s=i;for(;n[s+1]==="**";)s++;s>i&&n.splice(i+1,s-i);let l=n[i+1],p=n[i+2],u=n[i+3];if(l!==".."||!p||p==="."||p===".."||!u||u==="."||u==="..")continue;r=!0,n.splice(i,1);let m=n.slice(0);m[i]="**",e.push(m),i--}if(!this.preserveMultipleSlashes){for(let s=1;s<n.length-1;s++){let l=n[s];s===1&&l===""&&n[0]===""||(l==="."||l==="")&&(r=!0,n.splice(s,1),s--)}n[0]==="."&&n.length===2&&(n[1]==="."||n[1]==="")&&(r=!0,n.pop())}let o=0;for(;(o=n.indexOf("..",o+1))!==-1;){let s=n[o-1];if(s&&s!=="."&&s!==".."&&s!=="**"){r=!0;let p=o===1&&n[o+1]==="**"?["."]:[];n.splice(o-1,2,...p),n.length===0&&n.push(""),o-=2}}}}while(r);return e}secondPhasePreProcess(e){for(let r=0;r<e.length-1;r++)for(let n=r+1;n<e.length;n++){let i=this.partsMatch(e[r],e[n],!this.preserveMultipleSlashes);if(i){e[r]=[],e[n]=i;break}}return e.filter(r=>r.length)}partsMatch(e,r,n=!1){let i=0,o=0,s=[],l="";for(;i<e.length&&o<r.length;)if(e[i]===r[o])s.push(l==="b"?r[o]:e[i]),i++,o++;else if(n&&e[i]==="**"&&r[o]===e[i+1])s.push(e[i]),i++;else if(n&&r[o]==="**"&&e[i]===r[o+1])s.push(r[o]),o++;else if(e[i]==="*"&&r[o]&&(this.options.dot||!r[o].startsWith("."))&&r[o]!=="**"){if(l==="b")return!1;l="a",s.push(e[i]),i++,o++}else if(r[o]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(l==="a")return!1;l="b",s.push(r[o]),i++,o++}else return!1;return e.length===r.length&&s}parseNegate(){if(this.nonegate)return;let e=this.pattern,r=!1,n=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)r=!r,n++;n&&(this.pattern=e.slice(n)),this.negate=r}matchOne(e,r,n=!1){let i=this.options;if(this.isWindows){let v=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),I=!v&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),F=typeof r[0]=="string"&&/^[a-z]:$/i.test(r[0]),H=!F&&r[0]===""&&r[1]===""&&r[2]==="?"&&typeof r[3]=="string"&&/^[a-z]:$/i.test(r[3]),Q=I?3:v?0:void 0,ie=H?3:F?0:void 0;if(typeof Q=="number"&&typeof ie=="number"){let[oe,ce]=[e[Q],r[ie]];oe.toLowerCase()===ce.toLowerCase()&&(r[ie]=oe,ie>Q?r=r.slice(ie):Q>ie&&(e=e.slice(Q)))}}let{optimizationLevel:o=1}=this.options;o>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var s=0,l=0,p=e.length,u=r.length;s<p&&l<u;s++,l++){this.debug("matchOne loop");var m=r[l],d=e[s];if(this.debug(r,m,d),m===!1)return!1;if(m===jt){this.debug("GLOBSTAR",[r,m,d]);var g=s,x=l+1;if(x===u){for(this.debug("** at the end");s<p;s++)if(e[s]==="."||e[s]===".."||!i.dot&&e[s].charAt(0)===".")return!1;return!0}for(;g<p;){var b=e[g];if(this.debug(`
globstar while`,e,g,r,x,b),this.matchOne(e.slice(g),r.slice(x),n))return this.debug("globstar found match!",g,p,b),!0;if(b==="."||b===".."||!i.dot&&b.charAt(0)==="."){this.debug("dot detected!",e,g,r,x);break}this.debug("globstar swallow a segment, and continue"),g++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,g,r,x),g===p))}let v;if(typeof m=="string"?(v=d===m,this.debug("string match",m,d,v)):(v=m.test(d),this.debug("pattern match",m,d,v)),!v)return!1}if(s===p&&l===u)return!0;if(s===p)return n;if(l===u)return s===p-1&&e[s]==="";throw new Error("wtf?")}braceExpand(){return sC(this.pattern,this.options)}parse(e){_p(e);let r=this.options;if(e==="**")return jt;if(e==="")return"";let n,i=null;(n=e.match(hY))?i=r.dot?yY:gY:(n=e.match(oY))?i=(r.nocase?r.dot?lY:cY:r.dot?sY:aY)(n[1]):(n=e.match(xY))?i=(r.nocase?r.dot?TY:SY:r.dot?vY:bY)(n):(n=e.match(pY))?i=r.dot?fY:uY:(n=e.match(mY))&&(i=dY);let o=hc.fromGlob(e,this.options).toMMPattern();return i&&typeof o=="object"&&Reflect.defineProperty(o,"test",{value:i}),o}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let r=this.options,n=r.noglobstar?EY:r.dot?RY:kY,i=new Set(r.nocase?["i"]:[]),o=e.map(p=>{let u=p.map(m=>{if(m instanceof RegExp)for(let d of m.flags.split(""))i.add(d);return typeof m=="string"?FY(m):m===jt?jt:m._src});return u.forEach((m,d)=>{let g=u[d+1],x=u[d-1];m!==jt||x===jt||(x===void 0?g!==void 0&&g!==jt?u[d+1]="(?:\\/|"+n+"\\/)?"+g:u[d]=n:g===void 0?u[d-1]=x+"(?:\\/|"+n+")?":g!==jt&&(u[d-1]=x+"(?:\\/|\\/"+n+"\\/)"+g,u[d+1]=jt))}),u.filter(m=>m!==jt).join("/")}).join("|"),[s,l]=e.length>1?["(?:",")"]:["",""];o="^"+s+o+l+"$",this.negate&&(o="^(?!"+o+").+$");try{this.regexp=new RegExp(o,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;let n=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let o=this.set;this.debug(this.pattern,"set",o);let s=i[i.length-1];if(!s)for(let l=i.length-2;!s&&l>=0;l--)s=i[l];for(let l=0;l<o.length;l++){let p=o[l],u=i;if(n.matchBase&&p.length===1&&(u=[s]),this.matchOne(u,p,r))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return ur.defaults(e).Minimatch}};ur.AST=hc;ur.Minimatch=Qr;ur.escape=gc;ur.unescape=Vn;var DC=require("node:url");var yc=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,lC=new Set,Sb=typeof process=="object"&&process?process:{},pC=(t,e,r,n)=>{typeof Sb.emitWarning=="function"?Sb.emitWarning(t,e,r,n):console.error(`[${r}] ${e}: ${t}`)},py=globalThis.AbortController,cC=globalThis.AbortSignal;if(typeof py>"u"){cC=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(n,i){this._onabort.push(i)}},py=class{constructor(){e()}signal=new cC;abort(n){if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(let i of this.signal._onabort)i(n);this.signal.onabort?.(n)}}};let t=Sb.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{t&&(t=!1,pC("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var IY=t=>!lC.has(t),xHe=Symbol("type"),Do=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),uC=t=>Do(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?xc:null:null,xc=class extends Array{constructor(e){super(e),this.fill(0)}},Tb=class t{heap;length;static#e=!1;static create(e){let r=uC(e);if(!r)return[];t.#e=!0;let n=new t(e,r);return t.#e=!1,n}constructor(e,r){if(!t.#e)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},Rp=class t{#e;#t;#o;#n;#a;#T;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#l;#u;#s;#c;#i;#g;#y;#m;#f;#w;#h;#_;#E;#S;#v;#b;#d;static unsafeExposeInternals(e){return{starts:e.#E,ttls:e.#S,sizes:e.#_,keyMap:e.#s,keyList:e.#c,valList:e.#i,next:e.#g,prev:e.#y,get head(){return e.#m},get tail(){return e.#f},free:e.#w,isBackgroundFetch:r=>e.#p(r),backgroundFetch:(r,n,i,o)=>e.#U(r,n,i,o),moveToTail:r=>e.#V(r),indexes:r=>e.#k(r),rindexes:r=>e.#P(r),isStale:r=>e.#x(r)}}get max(){return this.#e}get maxSize(){return this.#t}get calculatedSize(){return this.#u}get size(){return this.#l}get fetchMethod(){return this.#a}get memoMethod(){return this.#T}get dispose(){return this.#o}get disposeAfter(){return this.#n}constructor(e){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:s,updateAgeOnHas:l,allowStale:p,dispose:u,disposeAfter:m,noDisposeOnSet:d,noUpdateTTL:g,maxSize:x=0,maxEntrySize:b=0,sizeCalculation:v,fetchMethod:I,memoMethod:F,noDeleteOnFetchRejection:H,noDeleteOnStaleGet:Q,allowStaleOnFetchRejection:ie,allowStaleOnFetchAbort:oe,ignoreFetchAbort:ce}=e;if(r!==0&&!Do(r))throw new TypeError("max option must be a nonnegative integer");let at=r?uC(r):Array;if(!at)throw new Error("invalid max value: "+r);if(this.#e=r,this.#t=x,this.maxEntrySize=b||this.#t,this.sizeCalculation=v,this.sizeCalculation){if(!this.#t&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(F!==void 0&&typeof F!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#T=F,I!==void 0&&typeof I!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#a=I,this.#b=!!I,this.#s=new Map,this.#c=new Array(r).fill(void 0),this.#i=new Array(r).fill(void 0),this.#g=new at(r),this.#y=new at(r),this.#m=0,this.#f=0,this.#w=Tb.create(r),this.#l=0,this.#u=0,typeof u=="function"&&(this.#o=u),typeof m=="function"?(this.#n=m,this.#h=[]):(this.#n=void 0,this.#h=void 0),this.#v=!!this.#o,this.#d=!!this.#n,this.noDisposeOnSet=!!d,this.noUpdateTTL=!!g,this.noDeleteOnFetchRejection=!!H,this.allowStaleOnFetchRejection=!!ie,this.allowStaleOnFetchAbort=!!oe,this.ignoreFetchAbort=!!ce,this.maxEntrySize!==0){if(this.#t!==0&&!Do(this.#t))throw new TypeError("maxSize must be a positive integer if specified");if(!Do(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#M()}if(this.allowStale=!!p,this.noDeleteOnStaleGet=!!Q,this.updateAgeOnGet=!!s,this.updateAgeOnHas=!!l,this.ttlResolution=Do(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=n||0,this.ttl){if(!Do(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#A()}if(this.#e===0&&this.ttl===0&&this.#t===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#e&&!this.#t){let Lt="LRU_CACHE_UNBOUNDED";IY(Lt)&&(lC.add(Lt),pC("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",Lt,t))}}getRemainingTTL(e){return this.#s.has(e)?1/0:0}#A(){let e=new xc(this.#e),r=new xc(this.#e);this.#S=e,this.#E=r,this.#F=(o,s,l=yc.now())=>{if(r[o]=s!==0?l:0,e[o]=s,s!==0&&this.ttlAutopurge){let p=setTimeout(()=>{this.#x(o)&&this.#D(this.#c[o],"expire")},s+1);p.unref&&p.unref()}},this.#R=o=>{r[o]=e[o]!==0?yc.now():0},this.#r=(o,s)=>{if(e[s]){let l=e[s],p=r[s];if(!l||!p)return;o.ttl=l,o.start=p,o.now=n||i();let u=o.now-p;o.remainingTTL=l-u}};let n=0,i=()=>{let o=yc.now();if(this.ttlResolution>0){n=o;let s=setTimeout(()=>n=0,this.ttlResolution);s.unref&&s.unref()}return o};this.getRemainingTTL=o=>{let s=this.#s.get(o);if(s===void 0)return 0;let l=e[s],p=r[s];if(!l||!p)return 1/0;let u=(n||i())-p;return l-u},this.#x=o=>{let s=r[o],l=e[o];return!!l&&!!s&&(n||i())-s>l}}#R=()=>{};#r=()=>{};#F=()=>{};#x=()=>!1;#M(){let e=new xc(this.#e);this.#u=0,this.#_=e,this.#I=r=>{this.#u-=e[r],e[r]=0},this.#N=(r,n,i,o)=>{if(this.#p(n))return 0;if(!Do(i))if(o){if(typeof o!="function")throw new TypeError("sizeCalculation must be a function");if(i=o(n,r),!Do(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#C=(r,n,i)=>{if(e[r]=n,this.#t){let o=this.#t-e[r];for(;this.#u>o;)this.#L(!0)}this.#u+=e[r],i&&(i.entrySize=n,i.totalCalculatedSize=this.#u)}}#I=e=>{};#C=(e,r,n)=>{};#N=(e,r,n,i)=>{if(n||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#k({allowStale:e=this.allowStale}={}){if(this.#l)for(let r=this.#f;!(!this.#O(r)||((e||!this.#x(r))&&(yield r),r===this.#m));)r=this.#y[r]}*#P({allowStale:e=this.allowStale}={}){if(this.#l)for(let r=this.#m;!(!this.#O(r)||((e||!this.#x(r))&&(yield r),r===this.#f));)r=this.#g[r]}#O(e){return e!==void 0&&this.#s.get(this.#c[e])===e}*entries(){for(let e of this.#k())this.#i[e]!==void 0&&this.#c[e]!==void 0&&!this.#p(this.#i[e])&&(yield[this.#c[e],this.#i[e]])}*rentries(){for(let e of this.#P())this.#i[e]!==void 0&&this.#c[e]!==void 0&&!this.#p(this.#i[e])&&(yield[this.#c[e],this.#i[e]])}*keys(){for(let e of this.#k()){let r=this.#c[e];r!==void 0&&!this.#p(this.#i[e])&&(yield r)}}*rkeys(){for(let e of this.#P()){let r=this.#c[e];r!==void 0&&!this.#p(this.#i[e])&&(yield r)}}*values(){for(let e of this.#k())this.#i[e]!==void 0&&!this.#p(this.#i[e])&&(yield this.#i[e])}*rvalues(){for(let e of this.#P())this.#i[e]!==void 0&&!this.#p(this.#i[e])&&(yield this.#i[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,r={}){for(let n of this.#k()){let i=this.#i[n],o=this.#p(i)?i.__staleWhileFetching:i;if(o!==void 0&&e(o,this.#c[n],this))return this.get(this.#c[n],r)}}forEach(e,r=this){for(let n of this.#k()){let i=this.#i[n],o=this.#p(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#c[n],this)}}rforEach(e,r=this){for(let n of this.#P()){let i=this.#i[n],o=this.#p(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#c[n],this)}}purgeStale(){let e=!1;for(let r of this.#P({allowStale:!0}))this.#x(r)&&(this.#D(this.#c[r],"expire"),e=!0);return e}info(e){let r=this.#s.get(e);if(r===void 0)return;let n=this.#i[r],i=this.#p(n)?n.__staleWhileFetching:n;if(i===void 0)return;let o={value:i};if(this.#S&&this.#E){let s=this.#S[r],l=this.#E[r];if(s&&l){let p=s-(yc.now()-l);o.ttl=p,o.start=Date.now()}}return this.#_&&(o.size=this.#_[r]),o}dump(){let e=[];for(let r of this.#k({allowStale:!0})){let n=this.#c[r],i=this.#i[r],o=this.#p(i)?i.__staleWhileFetching:i;if(o===void 0||n===void 0)continue;let s={value:o};if(this.#S&&this.#E){s.ttl=this.#S[r];let l=yc.now()-this.#E[r];s.start=Math.floor(Date.now()-l)}this.#_&&(s.size=this.#_[r]),e.unshift([n,s])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let i=Date.now()-n.start;n.start=yc.now()-i}this.set(r,n.value,n)}}set(e,r,n={}){if(r===void 0)return this.delete(e),this;let{ttl:i=this.ttl,start:o,noDisposeOnSet:s=this.noDisposeOnSet,sizeCalculation:l=this.sizeCalculation,status:p}=n,{noUpdateTTL:u=this.noUpdateTTL}=n,m=this.#N(e,r,n.size||0,l);if(this.maxEntrySize&&m>this.maxEntrySize)return p&&(p.set="miss",p.maxEntrySizeExceeded=!0),this.#D(e,"set"),this;let d=this.#l===0?void 0:this.#s.get(e);if(d===void 0)d=this.#l===0?this.#f:this.#w.length!==0?this.#w.pop():this.#l===this.#e?this.#L(!1):this.#l,this.#c[d]=e,this.#i[d]=r,this.#s.set(e,d),this.#g[this.#f]=d,this.#y[d]=this.#f,this.#f=d,this.#l++,this.#C(d,m,p),p&&(p.set="add"),u=!1;else{this.#V(d);let g=this.#i[d];if(r!==g){if(this.#b&&this.#p(g)){g.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:x}=g;x!==void 0&&!s&&(this.#v&&this.#o?.(x,e,"set"),this.#d&&this.#h?.push([x,e,"set"]))}else s||(this.#v&&this.#o?.(g,e,"set"),this.#d&&this.#h?.push([g,e,"set"]));if(this.#I(d),this.#C(d,m,p),this.#i[d]=r,p){p.set="replace";let x=g&&this.#p(g)?g.__staleWhileFetching:g;x!==void 0&&(p.oldValue=x)}}else p&&(p.set="update")}if(i!==0&&!this.#S&&this.#A(),this.#S&&(u||this.#F(d,i,o),p&&this.#r(p,d)),!s&&this.#d&&this.#h){let g=this.#h,x;for(;x=g?.shift();)this.#n?.(...x)}return this}pop(){try{for(;this.#l;){let e=this.#i[this.#m];if(this.#L(!0),this.#p(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#d&&this.#h){let e=this.#h,r;for(;r=e?.shift();)this.#n?.(...r)}}}#L(e){let r=this.#m,n=this.#c[r],i=this.#i[r];return this.#b&&this.#p(i)?i.__abortController.abort(new Error("evicted")):(this.#v||this.#d)&&(this.#v&&this.#o?.(i,n,"evict"),this.#d&&this.#h?.push([i,n,"evict"])),this.#I(r),e&&(this.#c[r]=void 0,this.#i[r]=void 0,this.#w.push(r)),this.#l===1?(this.#m=this.#f=0,this.#w.length=0):this.#m=this.#g[r],this.#s.delete(n),this.#l--,r}has(e,r={}){let{updateAgeOnHas:n=this.updateAgeOnHas,status:i}=r,o=this.#s.get(e);if(o!==void 0){let s=this.#i[o];if(this.#p(s)&&s.__staleWhileFetching===void 0)return!1;if(this.#x(o))i&&(i.has="stale",this.#r(i,o));else return n&&this.#R(o),i&&(i.has="hit",this.#r(i,o)),!0}else i&&(i.has="miss");return!1}peek(e,r={}){let{allowStale:n=this.allowStale}=r,i=this.#s.get(e);if(i===void 0||!n&&this.#x(i))return;let o=this.#i[i];return this.#p(o)?o.__staleWhileFetching:o}#U(e,r,n,i){let o=r===void 0?void 0:this.#i[r];if(this.#p(o))return o;let s=new py,{signal:l}=n;l?.addEventListener("abort",()=>s.abort(l.reason),{signal:s.signal});let p={signal:s.signal,options:n,context:i},u=(v,I=!1)=>{let{aborted:F}=s.signal,H=n.ignoreFetchAbort&&v!==void 0;if(n.status&&(F&&!I?(n.status.fetchAborted=!0,n.status.fetchError=s.signal.reason,H&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),F&&!H&&!I)return d(s.signal.reason);let Q=x;return this.#i[r]===x&&(v===void 0?Q.__staleWhileFetching?this.#i[r]=Q.__staleWhileFetching:this.#D(e,"fetch"):(n.status&&(n.status.fetchUpdated=!0),this.set(e,v,p.options))),v},m=v=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=v),d(v)),d=v=>{let{aborted:I}=s.signal,F=I&&n.allowStaleOnFetchAbort,H=F||n.allowStaleOnFetchRejection,Q=H||n.noDeleteOnFetchRejection,ie=x;if(this.#i[r]===x&&(!Q||ie.__staleWhileFetching===void 0?this.#D(e,"fetch"):F||(this.#i[r]=ie.__staleWhileFetching)),H)return n.status&&ie.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),ie.__staleWhileFetching;if(ie.__returned===ie)throw v},g=(v,I)=>{let F=this.#a?.(e,o,p);F&&F instanceof Promise&&F.then(H=>v(H===void 0?void 0:H),I),s.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(v(void 0),n.allowStaleOnFetchAbort&&(v=H=>u(H,!0)))})};n.status&&(n.status.fetchDispatched=!0);let x=new Promise(g).then(u,m),b=Object.assign(x,{__abortController:s,__staleWhileFetching:o,__returned:void 0});return r===void 0?(this.set(e,b,{...p.options,status:void 0}),r=this.#s.get(e)):this.#i[r]=b,b}#p(e){if(!this.#b)return!1;let r=e;return!!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof py}async fetch(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:s=this.ttl,noDisposeOnSet:l=this.noDisposeOnSet,size:p=0,sizeCalculation:u=this.sizeCalculation,noUpdateTTL:m=this.noUpdateTTL,noDeleteOnFetchRejection:d=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:g=this.allowStaleOnFetchRejection,ignoreFetchAbort:x=this.ignoreFetchAbort,allowStaleOnFetchAbort:b=this.allowStaleOnFetchAbort,context:v,forceRefresh:I=!1,status:F,signal:H}=r;if(!this.#b)return F&&(F.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,status:F});let Q={allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,ttl:s,noDisposeOnSet:l,size:p,sizeCalculation:u,noUpdateTTL:m,noDeleteOnFetchRejection:d,allowStaleOnFetchRejection:g,allowStaleOnFetchAbort:b,ignoreFetchAbort:x,status:F,signal:H},ie=this.#s.get(e);if(ie===void 0){F&&(F.fetch="miss");let oe=this.#U(e,ie,Q,v);return oe.__returned=oe}else{let oe=this.#i[ie];if(this.#p(oe)){let L=n&&oe.__staleWhileFetching!==void 0;return F&&(F.fetch="inflight",L&&(F.returnedStale=!0)),L?oe.__staleWhileFetching:oe.__returned=oe}let ce=this.#x(ie);if(!I&&!ce)return F&&(F.fetch="hit"),this.#V(ie),i&&this.#R(ie),F&&this.#r(F,ie),oe;let at=this.#U(e,ie,Q,v),pt=at.__staleWhileFetching!==void 0&&n;return F&&(F.fetch=ce?"stale":"refresh",pt&&ce&&(F.returnedStale=!0)),pt?at.__staleWhileFetching:at.__returned=at}}async forceFetch(e,r={}){let n=await this.fetch(e,r);if(n===void 0)throw new Error("fetch() returned undefined");return n}memo(e,r={}){let n=this.#T;if(!n)throw new Error("no memoMethod provided to constructor");let{context:i,forceRefresh:o,...s}=r,l=this.get(e,s);if(!o&&l!==void 0)return l;let p=n(e,l,{options:s,context:i});return this.set(e,p,s),p}get(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:s}=r,l=this.#s.get(e);if(l!==void 0){let p=this.#i[l],u=this.#p(p);return s&&this.#r(s,l),this.#x(l)?(s&&(s.get="stale"),u?(s&&n&&p.__staleWhileFetching!==void 0&&(s.returnedStale=!0),n?p.__staleWhileFetching:void 0):(o||this.#D(e,"expire"),s&&n&&(s.returnedStale=!0),n?p:void 0)):(s&&(s.get="hit"),u?p.__staleWhileFetching:(this.#V(l),i&&this.#R(l),p))}else s&&(s.get="miss")}#H(e,r){this.#y[r]=e,this.#g[e]=r}#V(e){e!==this.#f&&(e===this.#m?this.#m=this.#g[e]:this.#H(this.#y[e],this.#g[e]),this.#H(this.#f,e),this.#f=e)}delete(e){return this.#D(e,"delete")}#D(e,r){let n=!1;if(this.#l!==0){let i=this.#s.get(e);if(i!==void 0)if(n=!0,this.#l===1)this.#B(r);else{this.#I(i);let o=this.#i[i];if(this.#p(o)?o.__abortController.abort(new Error("deleted")):(this.#v||this.#d)&&(this.#v&&this.#o?.(o,e,r),this.#d&&this.#h?.push([o,e,r])),this.#s.delete(e),this.#c[i]=void 0,this.#i[i]=void 0,i===this.#f)this.#f=this.#y[i];else if(i===this.#m)this.#m=this.#g[i];else{let s=this.#y[i];this.#g[s]=this.#g[i];let l=this.#g[i];this.#y[l]=this.#y[i]}this.#l--,this.#w.push(i)}}if(this.#d&&this.#h?.length){let i=this.#h,o;for(;o=i?.shift();)this.#n?.(...o)}return n}clear(){return this.#B("delete")}#B(e){for(let r of this.#P({allowStale:!0})){let n=this.#i[r];if(this.#p(n))n.__abortController.abort(new Error("deleted"));else{let i=this.#c[r];this.#v&&this.#o?.(n,i,e),this.#d&&this.#h?.push([n,i,e])}}if(this.#s.clear(),this.#i.fill(void 0),this.#c.fill(void 0),this.#S&&this.#E&&(this.#S.fill(0),this.#E.fill(0)),this.#_&&this.#_.fill(0),this.#m=0,this.#f=0,this.#w.length=0,this.#u=0,this.#l=0,this.#d&&this.#h){let r=this.#h,n;for(;n=r?.shift();)this.#n?.(...n)}}};var vc=require("node:path"),vC=require("node:url"),fi=require("fs"),$Y=Sr(require("node:fs"),1),Co=require("node:fs/promises");var yy=require("node:events"),kb=Sr(require("node:stream"),1),gC=require("node:string_decoder"),fC=typeof process=="object"&&process?process:{stdout:null,stderr:null},CY=t=>!!t&&typeof t=="object"&&(t instanceof Io||t instanceof kb.default||NY(t)||OY(t)),NY=t=>!!t&&typeof t=="object"&&t instanceof yy.EventEmitter&&typeof t.pipe=="function"&&t.pipe!==kb.default.Writable.prototype.pipe,OY=t=>!!t&&typeof t=="object"&&t instanceof yy.EventEmitter&&typeof t.write=="function"&&typeof t.end=="function",Vi=Symbol("EOF"),Bi=Symbol("maybeEmitEnd"),Fo=Symbol("emittedEnd"),uy=Symbol("emittingEnd"),kp=Symbol("emittedError"),fy=Symbol("closed"),mC=Symbol("read"),my=Symbol("flush"),dC=Symbol("flushChunk"),Bn=Symbol("encoding"),Sc=Symbol("decoder"),Ct=Symbol("flowing"),Pp=Symbol("paused"),Tc=Symbol("resume"),Nt=Symbol("buffer"),fr=Symbol("pipes"),Ot=Symbol("bufferLength"),vb=Symbol("bufferPush"),dy=Symbol("bufferShift"),Xt=Symbol("objectMode"),Tt=Symbol("destroyed"),bb=Symbol("error"),wb=Symbol("emitData"),hC=Symbol("emitEnd"),_b=Symbol("emitEnd2"),pi=Symbol("async"),Eb=Symbol("abort"),hy=Symbol("aborted"),Ap=Symbol("signal"),Da=Symbol("dataListeners"),Zr=Symbol("discarded"),Mp=t=>Promise.resolve().then(t),LY=t=>t(),UY=t=>t==="end"||t==="finish"||t==="prefinish",HY=t=>t instanceof ArrayBuffer||!!t&&typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,VY=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),gy=class{src;dest;opts;ondrain;constructor(e,r,n){this.src=e,this.dest=r,this.opts=n,this.ondrain=()=>e[Tc](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(e){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},Rb=class extends gy{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,r,n){super(e,r,n),this.proxyErrors=i=>r.emit("error",i),e.on("error",this.proxyErrors)}},BY=t=>!!t.objectMode,WY=t=>!t.objectMode&&!!t.encoding&&t.encoding!=="buffer",Io=class extends yy.EventEmitter{[Ct]=!1;[Pp]=!1;[fr]=[];[Nt]=[];[Xt];[Bn];[pi];[Sc];[Vi]=!1;[Fo]=!1;[uy]=!1;[fy]=!1;[kp]=null;[Ot]=0;[Tt]=!1;[Ap];[hy]=!1;[Da]=0;[Zr]=!1;writable=!0;readable=!0;constructor(...e){let r=e[0]||{};if(super(),r.objectMode&&typeof r.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");BY(r)?(this[Xt]=!0,this[Bn]=null):WY(r)?(this[Bn]=r.encoding,this[Xt]=!1):(this[Xt]=!1,this[Bn]=null),this[pi]=!!r.async,this[Sc]=this[Bn]?new gC.StringDecoder(this[Bn]):null,r&&r.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[Nt]}),r&&r.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[fr]});let{signal:n}=r;n&&(this[Ap]=n,n.aborted?this[Eb]():n.addEventListener("abort",()=>this[Eb]()))}get bufferLength(){return this[Ot]}get encoding(){return this[Bn]}set encoding(e){throw new Error("Encoding must be set at instantiation time")}setEncoding(e){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[Xt]}set objectMode(e){throw new Error("objectMode must be set at instantiation time")}get async(){return this[pi]}set async(e){this[pi]=this[pi]||!!e}[Eb](){this[hy]=!0,this.emit("abort",this[Ap]?.reason),this.destroy(this[Ap]?.reason)}get aborted(){return this[hy]}set aborted(e){}write(e,r,n){if(this[hy])return!1;if(this[Vi])throw new Error("write after end");if(this[Tt])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof r=="function"&&(n=r,r="utf8"),r||(r="utf8");let i=this[pi]?Mp:LY;if(!this[Xt]&&!Buffer.isBuffer(e)){if(VY(e))e=Buffer.from(e.buffer,e.byteOffset,e.byteLength);else if(HY(e))e=Buffer.from(e);else if(typeof e!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[Xt]?(this[Ct]&&this[Ot]!==0&&this[my](!0),this[Ct]?this.emit("data",e):this[vb](e),this[Ot]!==0&&this.emit("readable"),n&&i(n),this[Ct]):e.length?(typeof e=="string"&&!(r===this[Bn]&&!this[Sc]?.lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[Bn]&&(e=this[Sc].write(e)),this[Ct]&&this[Ot]!==0&&this[my](!0),this[Ct]?this.emit("data",e):this[vb](e),this[Ot]!==0&&this.emit("readable"),n&&i(n),this[Ct]):(this[Ot]!==0&&this.emit("readable"),n&&i(n),this[Ct])}read(e){if(this[Tt])return null;if(this[Zr]=!1,this[Ot]===0||e===0||e&&e>this[Ot])return this[Bi](),null;this[Xt]&&(e=null),this[Nt].length>1&&!this[Xt]&&(this[Nt]=[this[Bn]?this[Nt].join(""):Buffer.concat(this[Nt],this[Ot])]);let r=this[mC](e||null,this[Nt][0]);return this[Bi](),r}[mC](e,r){if(this[Xt])this[dy]();else{let n=r;e===n.length||e===null?this[dy]():typeof n=="string"?(this[Nt][0]=n.slice(e),r=n.slice(0,e),this[Ot]-=e):(this[Nt][0]=n.subarray(e),r=n.subarray(0,e),this[Ot]-=e)}return this.emit("data",r),!this[Nt].length&&!this[Vi]&&this.emit("drain"),r}end(e,r,n){return typeof e=="function"&&(n=e,e=void 0),typeof r=="function"&&(n=r,r="utf8"),e!==void 0&&this.write(e,r),n&&this.once("end",n),this[Vi]=!0,this.writable=!1,(this[Ct]||!this[Pp])&&this[Bi](),this}[Tc](){this[Tt]||(!this[Da]&&!this[fr].length&&(this[Zr]=!0),this[Pp]=!1,this[Ct]=!0,this.emit("resume"),this[Nt].length?this[my]():this[Vi]?this[Bi]():this.emit("drain"))}resume(){return this[Tc]()}pause(){this[Ct]=!1,this[Pp]=!0,this[Zr]=!1}get destroyed(){return this[Tt]}get flowing(){return this[Ct]}get paused(){return this[Pp]}[vb](e){this[Xt]?this[Ot]+=1:this[Ot]+=e.length,this[Nt].push(e)}[dy](){return this[Xt]?this[Ot]-=1:this[Ot]-=this[Nt][0].length,this[Nt].shift()}[my](e=!1){do;while(this[dC](this[dy]())&&this[Nt].length);!e&&!this[Nt].length&&!this[Vi]&&this.emit("drain")}[dC](e){return this.emit("data",e),this[Ct]}pipe(e,r){if(this[Tt])return e;this[Zr]=!1;let n=this[Fo];return r=r||{},e===fC.stdout||e===fC.stderr?r.end=!1:r.end=r.end!==!1,r.proxyErrors=!!r.proxyErrors,n?r.end&&e.end():(this[fr].push(r.proxyErrors?new Rb(this,e,r):new gy(this,e,r)),this[pi]?Mp(()=>this[Tc]()):this[Tc]()),e}unpipe(e){let r=this[fr].find(n=>n.dest===e);r&&(this[fr].length===1?(this[Ct]&&this[Da]===0&&(this[Ct]=!1),this[fr]=[]):this[fr].splice(this[fr].indexOf(r),1),r.unpipe())}addListener(e,r){return this.on(e,r)}on(e,r){let n=super.on(e,r);if(e==="data")this[Zr]=!1,this[Da]++,!this[fr].length&&!this[Ct]&&this[Tc]();else if(e==="readable"&&this[Ot]!==0)super.emit("readable");else if(UY(e)&&this[Fo])super.emit(e),this.removeAllListeners(e);else if(e==="error"&&this[kp]){let i=r;this[pi]?Mp(()=>i.call(this,this[kp])):i.call(this,this[kp])}return n}removeListener(e,r){return this.off(e,r)}off(e,r){let n=super.off(e,r);return e==="data"&&(this[Da]=this.listeners("data").length,this[Da]===0&&!this[Zr]&&!this[fr].length&&(this[Ct]=!1)),n}removeAllListeners(e){let r=super.removeAllListeners(e);return(e==="data"||e===void 0)&&(this[Da]=0,!this[Zr]&&!this[fr].length&&(this[Ct]=!1)),r}get emittedEnd(){return this[Fo]}[Bi](){!this[uy]&&!this[Fo]&&!this[Tt]&&this[Nt].length===0&&this[Vi]&&(this[uy]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[fy]&&this.emit("close"),this[uy]=!1)}emit(e,...r){let n=r[0];if(e!=="error"&&e!=="close"&&e!==Tt&&this[Tt])return!1;if(e==="data")return!this[Xt]&&!n?!1:this[pi]?(Mp(()=>this[wb](n)),!0):this[wb](n);if(e==="end")return this[hC]();if(e==="close"){if(this[fy]=!0,!this[Fo]&&!this[Tt])return!1;let o=super.emit("close");return this.removeAllListeners("close"),o}else if(e==="error"){this[kp]=n,super.emit(bb,n);let o=!this[Ap]||this.listeners("error").length?super.emit("error",n):!1;return this[Bi](),o}else if(e==="resume"){let o=super.emit("resume");return this[Bi](),o}else if(e==="finish"||e==="prefinish"){let o=super.emit(e);return this.removeAllListeners(e),o}let i=super.emit(e,...r);return this[Bi](),i}[wb](e){for(let n of this[fr])n.dest.write(e)===!1&&this.pause();let r=this[Zr]?!1:super.emit("data",e);return this[Bi](),r}[hC](){return this[Fo]?!1:(this[Fo]=!0,this.readable=!1,this[pi]?(Mp(()=>this[_b]()),!0):this[_b]())}[_b](){if(this[Sc]){let r=this[Sc].end();if(r){for(let n of this[fr])n.dest.write(r);this[Zr]||super.emit("data",r)}}for(let r of this[fr])r.end();let e=super.emit("end");return this.removeAllListeners("end"),e}async collect(){let e=Object.assign([],{dataLength:0});this[Xt]||(e.dataLength=0);let r=this.promise();return this.on("data",n=>{e.push(n),this[Xt]||(e.dataLength+=n.length)}),await r,e}async concat(){if(this[Xt])throw new Error("cannot concat in objectMode");let e=await this.collect();return this[Bn]?e.join(""):Buffer.concat(e,e.dataLength)}async promise(){return new Promise((e,r)=>{this.on(Tt,()=>r(new Error("stream destroyed"))),this.on("error",n=>r(n)),this.on("end",()=>e())})}[Symbol.asyncIterator](){this[Zr]=!1;let e=!1,r=async()=>(this.pause(),e=!0,{value:void 0,done:!0});return{next:()=>{if(e)return r();let i=this.read();if(i!==null)return Promise.resolve({done:!1,value:i});if(this[Vi])return r();let o,s,l=d=>{this.off("data",p),this.off("end",u),this.off(Tt,m),r(),s(d)},p=d=>{this.off("error",l),this.off("end",u),this.off(Tt,m),this.pause(),o({value:d,done:!!this[Vi]})},u=()=>{this.off("error",l),this.off("data",p),this.off(Tt,m),r(),o({done:!0,value:void 0})},m=()=>l(new Error("stream destroyed"));return new Promise((d,g)=>{s=g,o=d,this.once(Tt,m),this.once("error",l),this.once("end",u),this.once("data",p)})},throw:r,return:r,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[Zr]=!1;let e=!1,r=()=>(this.pause(),this.off(bb,r),this.off(Tt,r),this.off("end",r),e=!0,{done:!0,value:void 0}),n=()=>{if(e)return r();let i=this.read();return i===null?r():{done:!1,value:i}};return this.once("end",r),this.once(bb,r),this.once(Tt,r),{next:n,throw:r,return:r,[Symbol.iterator](){return this}}}destroy(e){if(this[Tt])return e?this.emit("error",e):this.emit(Tt),this;this[Tt]=!0,this[Zr]=!0,this[Nt].length=0,this[Ot]=0;let r=this;return typeof r.close=="function"&&!this[fy]&&r.close(),e?this.emit("error",e):this.emit(Tt),this}static get isStream(){return CY}};var jY=fi.realpathSync.native,Fp={lstatSync:fi.lstatSync,readdir:fi.readdir,readdirSync:fi.readdirSync,readlinkSync:fi.readlinkSync,realpathSync:jY,promises:{lstat:Co.lstat,readdir:Co.readdir,readlink:Co.readlink,realpath:Co.realpath}},bC=t=>!t||t===Fp||t===$Y?Fp:{...Fp,...t,promises:{...Fp.promises,...t.promises||{}}},wC=/^\\\\\?\\([a-z]:)\\?$/i,qY=t=>t.replace(/\//g,"\\").replace(wC,"$1\\"),zY=/[\\\/]/,bn=0,_C=1,EC=2,ui=4,RC=6,kC=8,Fa=10,PC=12,vn=15,Dp=~vn,Pb=16,yC=32,Ip=64,Wn=128,xy=256,Ty=512,xC=Ip|Wn|Ty,GY=1023,Ab=t=>t.isFile()?kC:t.isDirectory()?ui:t.isSymbolicLink()?Fa:t.isCharacterDevice()?EC:t.isBlockDevice()?RC:t.isSocket()?PC:t.isFIFO()?_C:bn,SC=new Map,Cp=t=>{let e=SC.get(t);if(e)return e;let r=t.normalize("NFKD");return SC.set(t,r),r},TC=new Map,Sy=t=>{let e=TC.get(t);if(e)return e;let r=Cp(t.toLowerCase());return TC.set(t,r),r},vy=class extends Rp{constructor(){super({max:256})}},Mb=class extends Rp{constructor(e=16*1024){super({maxSize:e,sizeCalculation:r=>r.length+1})}},AC=Symbol("PathScurry setAsCwd"),Jt=class{name;root;roots;parent;nocase;isCWD=!1;#e;#t;get dev(){return this.#t}#o;get mode(){return this.#o}#n;get nlink(){return this.#n}#a;get uid(){return this.#a}#T;get gid(){return this.#T}#l;get rdev(){return this.#l}#u;get blksize(){return this.#u}#s;get ino(){return this.#s}#c;get size(){return this.#c}#i;get blocks(){return this.#i}#g;get atimeMs(){return this.#g}#y;get mtimeMs(){return this.#y}#m;get ctimeMs(){return this.#m}#f;get birthtimeMs(){return this.#f}#w;get atime(){return this.#w}#h;get mtime(){return this.#h}#_;get ctime(){return this.#_}#E;get birthtime(){return this.#E}#S;#v;#b;#d;#A;#R;#r;#F;#x;#M;get parentPath(){return(this.parent||this).fullpath()}get path(){return this.parentPath}constructor(e,r=bn,n,i,o,s,l){this.name=e,this.#S=o?Sy(e):Cp(e),this.#r=r&GY,this.nocase=o,this.roots=i,this.root=n||this,this.#F=s,this.#b=l.fullpath,this.#A=l.relative,this.#R=l.relativePosix,this.parent=l.parent,this.parent?this.#e=this.parent.#e:this.#e=bC(l.fs)}depth(){return this.#v!==void 0?this.#v:this.parent?this.#v=this.parent.depth()+1:this.#v=0}childrenCache(){return this.#F}resolve(e){if(!e)return this;let r=this.getRootString(e),i=e.substring(r.length).split(this.splitSep);return r?this.getRoot(r).#I(i):this.#I(i)}#I(e){let r=this;for(let n of e)r=r.child(n);return r}children(){let e=this.#F.get(this);if(e)return e;let r=Object.assign([],{provisional:0});return this.#F.set(this,r),this.#r&=~Pb,r}child(e,r){if(e===""||e===".")return this;if(e==="..")return this.parent||this;let n=this.children(),i=this.nocase?Sy(e):Cp(e);for(let p of n)if(p.#S===i)return p;let o=this.parent?this.sep:"",s=this.#b?this.#b+o+e:void 0,l=this.newChild(e,bn,{...r,parent:this,fullpath:s});return this.canReaddir()||(l.#r|=Wn),n.push(l),l}relative(){if(this.isCWD)return"";if(this.#A!==void 0)return this.#A;let e=this.name,r=this.parent;if(!r)return this.#A=this.name;let n=r.relative();return n+(!n||!r.parent?"":this.sep)+e}relativePosix(){if(this.sep==="/")return this.relative();if(this.isCWD)return"";if(this.#R!==void 0)return this.#R;let e=this.name,r=this.parent;if(!r)return this.#R=this.fullpathPosix();let n=r.relativePosix();return n+(!n||!r.parent?"":"/")+e}fullpath(){if(this.#b!==void 0)return this.#b;let e=this.name,r=this.parent;if(!r)return this.#b=this.name;let i=r.fullpath()+(r.parent?this.sep:"")+e;return this.#b=i}fullpathPosix(){if(this.#d!==void 0)return this.#d;if(this.sep==="/")return this.#d=this.fullpath();if(!this.parent){let i=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(i)?this.#d=`//?/${i}`:this.#d=i}let e=this.parent,r=e.fullpathPosix(),n=r+(!r||!e.parent?"":"/")+this.name;return this.#d=n}isUnknown(){return(this.#r&vn)===bn}isType(e){return this[`is${e}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#r&vn)===kC}isDirectory(){return(this.#r&vn)===ui}isCharacterDevice(){return(this.#r&vn)===EC}isBlockDevice(){return(this.#r&vn)===RC}isFIFO(){return(this.#r&vn)===_C}isSocket(){return(this.#r&vn)===PC}isSymbolicLink(){return(this.#r&Fa)===Fa}lstatCached(){return this.#r&yC?this:void 0}readlinkCached(){return this.#x}realpathCached(){return this.#M}readdirCached(){let e=this.children();return e.slice(0,e.provisional)}canReadlink(){if(this.#x)return!0;if(!this.parent)return!1;let e=this.#r&vn;return!(e!==bn&&e!==Fa||this.#r&xy||this.#r&Wn)}calledReaddir(){return!!(this.#r&Pb)}isENOENT(){return!!(this.#r&Wn)}isNamed(e){return this.nocase?this.#S===Sy(e):this.#S===Cp(e)}async readlink(){let e=this.#x;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=await this.#e.promises.readlink(this.fullpath()),n=(await this.parent.realpath())?.resolve(r);if(n)return this.#x=n}catch(r){this.#p(r.code);return}}readlinkSync(){let e=this.#x;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=this.#e.readlinkSync(this.fullpath()),n=this.parent.realpathSync()?.resolve(r);if(n)return this.#x=n}catch(r){this.#p(r.code);return}}#C(e){this.#r|=Pb;for(let r=e.provisional;r<e.length;r++){let n=e[r];n&&n.#N()}}#N(){this.#r&Wn||(this.#r=(this.#r|Wn)&Dp,this.#k())}#k(){let e=this.children();e.provisional=0;for(let r of e)r.#N()}#P(){this.#r|=Ty,this.#O()}#O(){if(this.#r&Ip)return;let e=this.#r;(e&vn)===ui&&(e&=Dp),this.#r=e|Ip,this.#k()}#L(e=""){e==="ENOTDIR"||e==="EPERM"?this.#O():e==="ENOENT"?this.#N():this.children().provisional=0}#U(e=""){e==="ENOTDIR"?this.parent.#O():e==="ENOENT"&&this.#N()}#p(e=""){let r=this.#r;r|=xy,e==="ENOENT"&&(r|=Wn),(e==="EINVAL"||e==="UNKNOWN")&&(r&=Dp),this.#r=r,e==="ENOTDIR"&&this.parent&&this.parent.#O()}#H(e,r){return this.#D(e,r)||this.#V(e,r)}#V(e,r){let n=Ab(e),i=this.newChild(e.name,n,{parent:this}),o=i.#r&vn;return o!==ui&&o!==Fa&&o!==bn&&(i.#r|=Ip),r.unshift(i),r.provisional++,i}#D(e,r){for(let n=r.provisional;n<r.length;n++){let i=r[n];if((this.nocase?Sy(e.name):Cp(e.name))===i.#S)return this.#B(e,i,n,r)}}#B(e,r,n,i){let o=r.name;return r.#r=r.#r&Dp|Ab(e),o!==e.name&&(r.name=e.name),n!==i.provisional&&(n===i.length-1?i.pop():i.splice(n,1),i.unshift(r)),i.provisional++,r}async lstat(){if((this.#r&Wn)===0)try{return this.#q(await this.#e.promises.lstat(this.fullpath())),this}catch(e){this.#U(e.code)}}lstatSync(){if((this.#r&Wn)===0)try{return this.#q(this.#e.lstatSync(this.fullpath())),this}catch(e){this.#U(e.code)}}#q(e){let{atime:r,atimeMs:n,birthtime:i,birthtimeMs:o,blksize:s,blocks:l,ctime:p,ctimeMs:u,dev:m,gid:d,ino:g,mode:x,mtime:b,mtimeMs:v,nlink:I,rdev:F,size:H,uid:Q}=e;this.#w=r,this.#g=n,this.#E=i,this.#f=o,this.#u=s,this.#i=l,this.#_=p,this.#m=u,this.#t=m,this.#T=d,this.#s=g,this.#o=x,this.#h=b,this.#y=v,this.#n=I,this.#l=F,this.#c=H,this.#a=Q;let ie=Ab(e);this.#r=this.#r&Dp|ie|yC,ie!==bn&&ie!==ui&&ie!==Fa&&(this.#r|=Ip)}#$=[];#j=!1;#z(e){this.#j=!1;let r=this.#$.slice();this.#$.length=0,r.forEach(n=>n(null,e))}readdirCB(e,r=!1){if(!this.canReaddir()){r?e(null,[]):queueMicrotask(()=>e(null,[]));return}let n=this.children();if(this.calledReaddir()){let o=n.slice(0,n.provisional);r?e(null,o):queueMicrotask(()=>e(null,o));return}if(this.#$.push(e),this.#j)return;this.#j=!0;let i=this.fullpath();this.#e.readdir(i,{withFileTypes:!0},(o,s)=>{if(o)this.#L(o.code),n.provisional=0;else{for(let l of s)this.#H(l,n);this.#C(n)}this.#z(n.slice(0,n.provisional))})}#W;async readdir(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();if(this.#W)await this.#W;else{let n=()=>{};this.#W=new Promise(i=>n=i);try{for(let i of await this.#e.promises.readdir(r,{withFileTypes:!0}))this.#H(i,e);this.#C(e)}catch(i){this.#L(i.code),e.provisional=0}this.#W=void 0,n()}return e.slice(0,e.provisional)}readdirSync(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();try{for(let n of this.#e.readdirSync(r,{withFileTypes:!0}))this.#H(n,e);this.#C(e)}catch(n){this.#L(n.code),e.provisional=0}return e.slice(0,e.provisional)}canReaddir(){if(this.#r&xC)return!1;let e=vn&this.#r;return e===bn||e===ui||e===Fa}shouldWalk(e,r){return(this.#r&ui)===ui&&!(this.#r&xC)&&!e.has(this)&&(!r||r(this))}async realpath(){if(this.#M)return this.#M;if(!((Ty|xy|Wn)&this.#r))try{let e=await this.#e.promises.realpath(this.fullpath());return this.#M=this.resolve(e)}catch{this.#P()}}realpathSync(){if(this.#M)return this.#M;if(!((Ty|xy|Wn)&this.#r))try{let e=this.#e.realpathSync(this.fullpath());return this.#M=this.resolve(e)}catch{this.#P()}}[AC](e){if(e===this)return;e.isCWD=!1,this.isCWD=!0;let r=new Set([]),n=[],i=this;for(;i&&i.parent;)r.add(i),i.#A=n.join(this.sep),i.#R=n.join("/"),i=i.parent,n.push("..");for(i=e;i&&i.parent&&!r.has(i);)i.#A=void 0,i.#R=void 0,i=i.parent}},by=class t extends Jt{sep="\\";splitSep=zY;constructor(e,r=bn,n,i,o,s,l){super(e,r,n,i,o,s,l)}newChild(e,r=bn,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}getRootString(e){return vc.win32.parse(e).root}getRoot(e){if(e=qY(e.toUpperCase()),e===this.root.name)return this.root;for(let[r,n]of Object.entries(this.roots))if(this.sameRoot(e,r))return this.roots[e]=n;return this.roots[e]=new bc(e,this).root}sameRoot(e,r=this.root.name){return e=e.toUpperCase().replace(/\//g,"\\").replace(wC,"$1\\"),e===r}},wy=class t extends Jt{splitSep="/";sep="/";constructor(e,r=bn,n,i,o,s,l){super(e,r,n,i,o,s,l)}getRootString(e){return e.startsWith("/")?"/":""}getRoot(e){return this.root}newChild(e,r=bn,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}},_y=class{root;rootPath;roots;cwd;#e;#t;#o;nocase;#n;constructor(e=process.cwd(),r,n,{nocase:i,childrenCacheSize:o=16*1024,fs:s=Fp}={}){this.#n=bC(s),(e instanceof URL||e.startsWith("file://"))&&(e=(0,vC.fileURLToPath)(e));let l=r.resolve(e);this.roots=Object.create(null),this.rootPath=this.parseRootPath(l),this.#e=new vy,this.#t=new vy,this.#o=new Mb(o);let p=l.substring(this.rootPath.length).split(n);if(p.length===1&&!p[0]&&p.pop(),i===void 0)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=i,this.root=this.newRoot(this.#n),this.roots[this.rootPath]=this.root;let u=this.root,m=p.length-1,d=r.sep,g=this.rootPath,x=!1;for(let b of p){let v=m--;u=u.child(b,{relative:new Array(v).fill("..").join(d),relativePosix:new Array(v).fill("..").join("/"),fullpath:g+=(x?"":d)+b}),x=!0}this.cwd=u}depth(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.depth()}childrenCache(){return this.#o}resolve(...e){let r="";for(let o=e.length-1;o>=0;o--){let s=e[o];if(!(!s||s===".")&&(r=r?`${s}/${r}`:s,this.isAbsolute(s)))break}let n=this.#e.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpath();return this.#e.set(r,i),i}resolvePosix(...e){let r="";for(let o=e.length-1;o>=0;o--){let s=e[o];if(!(!s||s===".")&&(r=r?`${s}/${r}`:s,this.isAbsolute(s)))break}let n=this.#t.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpathPosix();return this.#t.set(r,i),i}relative(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relative()}relativePosix(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relativePosix()}basename(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.name}dirname(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),(e.parent||e).fullpath()}async readdir(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Jt||(r=e,e=this.cwd);let{withFileTypes:n}=r;if(e.canReaddir()){let i=await e.readdir();return n?i:i.map(o=>o.name)}else return[]}readdirSync(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Jt||(r=e,e=this.cwd);let{withFileTypes:n=!0}=r;return e.canReaddir()?n?e.readdirSync():e.readdirSync().map(i=>i.name):[]}async lstat(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstat()}lstatSync(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstatSync()}async readlink(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Jt||(r=e.withFileTypes,e=this.cwd);let n=await e.readlink();return r?n:n?.fullpath()}readlinkSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Jt||(r=e.withFileTypes,e=this.cwd);let n=e.readlinkSync();return r?n:n?.fullpath()}async realpath(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Jt||(r=e.withFileTypes,e=this.cwd);let n=await e.realpath();return r?n:n?.fullpath()}realpathSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Jt||(r=e.withFileTypes,e=this.cwd);let n=e.realpathSync();return r?n:n?.fullpath()}async walk(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Jt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=[];(!o||o(e))&&l.push(n?e:e.fullpath());let p=new Set,u=(d,g)=>{p.add(d),d.readdirCB((x,b)=>{if(x)return g(x);let v=b.length;if(!v)return g();let I=()=>{--v===0&&g()};for(let F of b)(!o||o(F))&&l.push(n?F:F.fullpath()),i&&F.isSymbolicLink()?F.realpath().then(H=>H?.isUnknown()?H.lstat():H).then(H=>H?.shouldWalk(p,s)?u(H,I):I()):F.shouldWalk(p,s)?u(F,I):I()},!0)},m=e;return new Promise((d,g)=>{u(m,x=>{if(x)return g(x);d(l)})})}walkSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Jt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=[];(!o||o(e))&&l.push(n?e:e.fullpath());let p=new Set([e]);for(let u of p){let m=u.readdirSync();for(let d of m){(!o||o(d))&&l.push(n?d:d.fullpath());let g=d;if(d.isSymbolicLink()){if(!(i&&(g=d.realpathSync())))continue;g.isUnknown()&&g.lstatSync()}g.shouldWalk(p,s)&&p.add(g)}}return l}[Symbol.asyncIterator](){return this.iterate()}iterate(e=this.cwd,r={}){return typeof e=="string"?e=this.cwd.resolve(e):e instanceof Jt||(r=e,e=this.cwd),this.stream(e,r)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Jt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r;(!o||o(e))&&(yield n?e:e.fullpath());let l=new Set([e]);for(let p of l){let u=p.readdirSync();for(let m of u){(!o||o(m))&&(yield n?m:m.fullpath());let d=m;if(m.isSymbolicLink()){if(!(i&&(d=m.realpathSync())))continue;d.isUnknown()&&d.lstatSync()}d.shouldWalk(l,s)&&l.add(d)}}}stream(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Jt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=new Io({objectMode:!0});(!o||o(e))&&l.write(n?e:e.fullpath());let p=new Set,u=[e],m=0,d=()=>{let g=!1;for(;!g;){let x=u.shift();if(!x){m===0&&l.end();return}m++,p.add(x);let b=(I,F,H=!1)=>{if(I)return l.emit("error",I);if(i&&!H){let Q=[];for(let ie of F)ie.isSymbolicLink()&&Q.push(ie.realpath().then(oe=>oe?.isUnknown()?oe.lstat():oe));if(Q.length){Promise.all(Q).then(()=>b(null,F,!0));return}}for(let Q of F)Q&&(!o||o(Q))&&(l.write(n?Q:Q.fullpath())||(g=!0));m--;for(let Q of F){let ie=Q.realpathCached()||Q;ie.shouldWalk(p,s)&&u.push(ie)}g&&!l.flowing?l.once("drain",d):v||d()},v=!0;x.readdirCB(b,!0),v=!1}};return d(),l}streamSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Jt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=new Io({objectMode:!0}),p=new Set;(!o||o(e))&&l.write(n?e:e.fullpath());let u=[e],m=0,d=()=>{let g=!1;for(;!g;){let x=u.shift();if(!x){m===0&&l.end();return}m++,p.add(x);let b=x.readdirSync();for(let v of b)(!o||o(v))&&(l.write(n?v:v.fullpath())||(g=!0));m--;for(let v of b){let I=v;if(v.isSymbolicLink()){if(!(i&&(I=v.realpathSync())))continue;I.isUnknown()&&I.lstatSync()}I.shouldWalk(p,s)&&u.push(I)}}g&&!l.flowing&&l.once("drain",d)};return d(),l}chdir(e=this.cwd){let r=this.cwd;this.cwd=typeof e=="string"?this.cwd.resolve(e):e,this.cwd[AC](r)}},bc=class extends _y{sep="\\";constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,vc.win32,"\\",{...r,nocase:n}),this.nocase=n;for(let i=this.cwd;i;i=i.parent)i.nocase=this.nocase}parseRootPath(e){return vc.win32.parse(e).root.toUpperCase()}newRoot(e){return new by(this.rootPath,ui,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")||e.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(e)}},wc=class extends _y{sep="/";constructor(e=process.cwd(),r={}){let{nocase:n=!1}=r;super(e,vc.posix,"/",{...r,nocase:n}),this.nocase=n}parseRootPath(e){return"/"}newRoot(e){return new wy(this.rootPath,ui,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")}},Np=class extends wc{constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,{...r,nocase:n})}},wHe=process.platform==="win32"?by:wy,MC=process.platform==="win32"?bc:process.platform==="darwin"?Np:wc;var KY=t=>t.length>=1,QY=t=>t.length>=1,_c=class t{#e;#t;#o;length;#n;#a;#T;#l;#u;#s;#c=!0;constructor(e,r,n,i){if(!KY(e))throw new TypeError("empty pattern list");if(!QY(r))throw new TypeError("empty glob list");if(r.length!==e.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=e.length,n<0||n>=this.length)throw new TypeError("index out of range");if(this.#e=e,this.#t=r,this.#o=n,this.#n=i,this.#o===0){if(this.isUNC()){let[o,s,l,p,...u]=this.#e,[m,d,g,x,...b]=this.#t;u[0]===""&&(u.shift(),b.shift());let v=[o,s,l,p,""].join("/"),I=[m,d,g,x,""].join("/");this.#e=[v,...u],this.#t=[I,...b],this.length=this.#e.length}else if(this.isDrive()||this.isAbsolute()){let[o,...s]=this.#e,[l,...p]=this.#t;s[0]===""&&(s.shift(),p.shift());let u=o+"/",m=l+"/";this.#e=[u,...s],this.#t=[m,...p],this.length=this.#e.length}}}pattern(){return this.#e[this.#o]}isString(){return typeof this.#e[this.#o]=="string"}isGlobstar(){return this.#e[this.#o]===jt}isRegExp(){return this.#e[this.#o]instanceof RegExp}globString(){return this.#T=this.#T||(this.#o===0?this.isAbsolute()?this.#t[0]+this.#t.slice(1).join("/"):this.#t.join("/"):this.#t.slice(this.#o).join("/"))}hasMore(){return this.length>this.#o+1}rest(){return this.#a!==void 0?this.#a:this.hasMore()?(this.#a=new t(this.#e,this.#t,this.#o+1,this.#n),this.#a.#s=this.#s,this.#a.#u=this.#u,this.#a.#l=this.#l,this.#a):this.#a=null}isUNC(){let e=this.#e;return this.#u!==void 0?this.#u:this.#u=this.#n==="win32"&&this.#o===0&&e[0]===""&&e[1]===""&&typeof e[2]=="string"&&!!e[2]&&typeof e[3]=="string"&&!!e[3]}isDrive(){let e=this.#e;return this.#l!==void 0?this.#l:this.#l=this.#n==="win32"&&this.#o===0&&this.length>1&&typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0])}isAbsolute(){let e=this.#e;return this.#s!==void 0?this.#s:this.#s=e[0]===""&&e.length>1||this.isDrive()||this.isUNC()}root(){let e=this.#e[0];return typeof e=="string"&&this.isAbsolute()&&this.#o===0?e:""}checkFollowGlobstar(){return!(this.#o===0||!this.isGlobstar()||!this.#c)}markFollowGlobstar(){return this.#o===0||!this.isGlobstar()||!this.#c?!1:(this.#c=!1,!0)}};var ZY=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",Ec=class{relative;relativeChildren;absolute;absoluteChildren;platform;mmopts;constructor(e,{nobrace:r,nocase:n,noext:i,noglobstar:o,platform:s=ZY}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[],this.platform=s,this.mmopts={dot:!0,nobrace:r,nocase:n,noext:i,noglobstar:o,optimizationLevel:2,platform:s,nocomment:!0,nonegate:!0};for(let l of e)this.add(l)}add(e){let r=new Qr(e,this.mmopts);for(let n=0;n<r.set.length;n++){let i=r.set[n],o=r.globParts[n];if(!i||!o)throw new Error("invalid pattern object");for(;i[0]==="."&&o[0]===".";)i.shift(),o.shift();let s=new _c(i,o,0,this.platform),l=new Qr(s.globString(),this.mmopts),p=o[o.length-1]==="**",u=s.isAbsolute();u?this.absolute.push(l):this.relative.push(l),p&&(u?this.absoluteChildren.push(l):this.relativeChildren.push(l))}}ignored(e){let r=e.fullpath(),n=`${r}/`,i=e.relative()||".",o=`${i}/`;for(let s of this.relative)if(s.match(i)||s.match(o))return!0;for(let s of this.absolute)if(s.match(r)||s.match(n))return!0;return!1}childrenIgnored(e){let r=e.fullpath()+"/",n=(e.relative()||".")+"/";for(let i of this.relativeChildren)if(i.match(n))return!0;for(let i of this.absoluteChildren)if(i.match(r))return!0;return!1}};var Db=class t{store;constructor(e=new Map){this.store=e}copy(){return new t(new Map(this.store))}hasWalked(e,r){return this.store.get(e.fullpath())?.has(r.globString())}storeWalked(e,r){let n=e.fullpath(),i=this.store.get(n);i?i.add(r.globString()):this.store.set(n,new Set([r.globString()]))}},Fb=class{store=new Map;add(e,r,n){let i=(r?2:0)|(n?1:0),o=this.store.get(e);this.store.set(e,o===void 0?i:i&o)}entries(){return[...this.store.entries()].map(([e,r])=>[e,!!(r&2),!!(r&1)])}},Ib=class{store=new Map;add(e,r){if(!e.canReaddir())return;let n=this.store.get(e);n?n.find(i=>i.globString()===r.globString())||n.push(r):this.store.set(e,[r])}get(e){let r=this.store.get(e);if(!r)throw new Error("attempting to walk unknown path");return r}entries(){return this.keys().map(e=>[e,this.store.get(e)])}keys(){return[...this.store.keys()].filter(e=>e.canReaddir())}},Op=class t{hasWalkedCache;matches=new Fb;subwalks=new Ib;patterns;follow;dot;opts;constructor(e,r){this.opts=e,this.follow=!!e.follow,this.dot=!!e.dot,this.hasWalkedCache=r?r.copy():new Db}processPatterns(e,r){this.patterns=r;let n=r.map(i=>[e,i]);for(let[i,o]of n){this.hasWalkedCache.storeWalked(i,o);let s=o.root(),l=o.isAbsolute()&&this.opts.absolute!==!1;if(s){i=i.resolve(s==="/"&&this.opts.root!==void 0?this.opts.root:s);let d=o.rest();if(d)o=d;else{this.matches.add(i,!0,!1);continue}}if(i.isENOENT())continue;let p,u,m=!1;for(;typeof(p=o.pattern())=="string"&&(u=o.rest());)i=i.resolve(p),o=u,m=!0;if(p=o.pattern(),u=o.rest(),m){if(this.hasWalkedCache.hasWalked(i,o))continue;this.hasWalkedCache.storeWalked(i,o)}if(typeof p=="string"){let d=p===".."||p===""||p===".";this.matches.add(i.resolve(p),l,d);continue}else if(p===jt){(!i.isSymbolicLink()||this.follow||o.checkFollowGlobstar())&&this.subwalks.add(i,o);let d=u?.pattern(),g=u?.rest();if(!u||(d===""||d===".")&&!g)this.matches.add(i,l,d===""||d===".");else if(d===".."){let x=i.parent||i;g?this.hasWalkedCache.hasWalked(x,g)||this.subwalks.add(x,g):this.matches.add(x,l,!0)}}else p instanceof RegExp&&this.subwalks.add(i,o)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new t(this.opts,this.hasWalkedCache)}filterEntries(e,r){let n=this.subwalks.get(e),i=this.child();for(let o of r)for(let s of n){let l=s.isAbsolute(),p=s.pattern(),u=s.rest();p===jt?i.testGlobstar(o,s,u,l):p instanceof RegExp?i.testRegExp(o,p,u,l):i.testString(o,p,u,l)}return i}testGlobstar(e,r,n,i){if((this.dot||!e.name.startsWith("."))&&(r.hasMore()||this.matches.add(e,i,!1),e.canReaddir()&&(this.follow||!e.isSymbolicLink()?this.subwalks.add(e,r):e.isSymbolicLink()&&(n&&r.checkFollowGlobstar()?this.subwalks.add(e,n):r.markFollowGlobstar()&&this.subwalks.add(e,r)))),n){let o=n.pattern();if(typeof o=="string"&&o!==".."&&o!==""&&o!==".")this.testString(e,o,n.rest(),i);else if(o===".."){let s=e.parent||e;this.subwalks.add(s,n)}else o instanceof RegExp&&this.testRegExp(e,o,n.rest(),i)}}testRegExp(e,r,n,i){r.test(e.name)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}testString(e,r,n,i){e.isNamed(r)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}};var YY=(t,e)=>typeof t=="string"?new Ec([t],e):Array.isArray(t)?new Ec(t,e):t,Ey=class{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#e=[];#t;#o;signal;maxDepth;includeChildMatches;constructor(e,r,n){if(this.patterns=e,this.path=r,this.opts=n,this.#o=!n.posix&&n.platform==="win32"?"\\":"/",this.includeChildMatches=n.includeChildMatches!==!1,(n.ignore||!this.includeChildMatches)&&(this.#t=YY(n.ignore??[],n),!this.includeChildMatches&&typeof this.#t.add!="function")){let i="cannot ignore child matches, ignore lacks add() method.";throw new Error(i)}this.maxDepth=n.maxDepth||1/0,n.signal&&(this.signal=n.signal,this.signal.addEventListener("abort",()=>{this.#e.length=0}))}#n(e){return this.seen.has(e)||!!this.#t?.ignored?.(e)}#a(e){return!!this.#t?.childrenIgnored?.(e)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;this.paused=!1;let e;for(;!this.paused&&(e=this.#e.shift());)e()}onResume(e){this.signal?.aborted||(this.paused?this.#e.push(e):e())}async matchCheck(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||await e.realpath(),!n)return;e=n}let o=e.isUnknown()||this.opts.stat?await e.lstat():e;if(this.opts.follow&&this.opts.nodir&&o?.isSymbolicLink()){let s=await o.realpath();s&&(s.isUnknown()||this.opts.stat)&&await s.lstat()}return this.matchCheckTest(o,r)}matchCheckTest(e,r){return e&&(this.maxDepth===1/0||e.depth()<=this.maxDepth)&&(!r||e.canReaddir())&&(!this.opts.nodir||!e.isDirectory())&&(!this.opts.nodir||!this.opts.follow||!e.isSymbolicLink()||!e.realpathCached()?.isDirectory())&&!this.#n(e)?e:void 0}matchCheckSync(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||e.realpathSync(),!n)return;e=n}let o=e.isUnknown()||this.opts.stat?e.lstatSync():e;if(this.opts.follow&&this.opts.nodir&&o?.isSymbolicLink()){let s=o.realpathSync();s&&(s?.isUnknown()||this.opts.stat)&&s.lstatSync()}return this.matchCheckTest(o,r)}matchFinish(e,r){if(this.#n(e))return;if(!this.includeChildMatches&&this.#t?.add){let o=`${e.relativePosix()}/**`;this.#t.add(o)}let n=this.opts.absolute===void 0?r:this.opts.absolute;this.seen.add(e);let i=this.opts.mark&&e.isDirectory()?this.#o:"";if(this.opts.withFileTypes)this.matchEmit(e);else if(n){let o=this.opts.posix?e.fullpathPosix():e.fullpath();this.matchEmit(o+i)}else{let o=this.opts.posix?e.relativePosix():e.relative(),s=this.opts.dotRelative&&!o.startsWith(".."+this.#o)?"."+this.#o:"";this.matchEmit(o?s+o+i:"."+i)}}async match(e,r,n){let i=await this.matchCheck(e,n);i&&this.matchFinish(i,r)}matchSync(e,r,n){let i=this.matchCheckSync(e,n);i&&this.matchFinish(i,r)}walkCB(e,r,n){this.signal?.aborted&&n(),this.walkCB2(e,r,new Op(this.opts),n)}walkCB2(e,r,n,i){if(this.#a(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2(e,r,n,i));return}n.processPatterns(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,p,u]of n.matches.entries())this.#n(l)||(o++,this.match(l,p,u).then(()=>s()));for(let l of n.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;o++;let p=l.readdirCached();l.calledReaddir()?this.walkCB3(l,p,n,s):l.readdirCB((u,m)=>this.walkCB3(l,m,n,s),!0)}s()}walkCB3(e,r,n,i){n=n.filterEntries(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,p,u]of n.matches.entries())this.#n(l)||(o++,this.match(l,p,u).then(()=>s()));for(let[l,p]of n.subwalks.entries())o++,this.walkCB2(l,p,n.child(),s);s()}walkCBSync(e,r,n){this.signal?.aborted&&n(),this.walkCB2Sync(e,r,new Op(this.opts),n)}walkCB2Sync(e,r,n,i){if(this.#a(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2Sync(e,r,n,i));return}n.processPatterns(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,p,u]of n.matches.entries())this.#n(l)||this.matchSync(l,p,u);for(let l of n.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;o++;let p=l.readdirSync();this.walkCB3Sync(l,p,n,s)}s()}walkCB3Sync(e,r,n,i){n=n.filterEntries(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,p,u]of n.matches.entries())this.#n(l)||this.matchSync(l,p,u);for(let[l,p]of n.subwalks.entries())o++,this.walkCB2Sync(l,p,n.child(),s);s()}},Lp=class extends Ey{matches=new Set;constructor(e,r,n){super(e,r,n)}matchEmit(e){this.matches.add(e)}async walk(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise((e,r)=>{this.walkCB(this.path,this.patterns,()=>{this.signal?.aborted?r(this.signal.reason):e(this.matches)})}),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>{if(this.signal?.aborted)throw this.signal.reason}),this.matches}},Up=class extends Ey{results;constructor(e,r,n){super(e,r,n),this.results=new Io({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(e){this.results.write(e),this.results.flowing||this.pause()}stream(){let e=this.path;return e.isUnknown()?e.lstat().then(()=>{this.walkCB(e,this.patterns,()=>this.results.end())}):this.walkCB(e,this.patterns,()=>this.results.end()),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}};var XY=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",$n=class{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;includeChildMatches;opts;patterns;constructor(e,r){if(!r)throw new TypeError("glob options required");if(this.withFileTypes=!!r.withFileTypes,this.signal=r.signal,this.follow=!!r.follow,this.dot=!!r.dot,this.dotRelative=!!r.dotRelative,this.nodir=!!r.nodir,this.mark=!!r.mark,r.cwd?(r.cwd instanceof URL||r.cwd.startsWith("file://"))&&(r.cwd=(0,DC.fileURLToPath)(r.cwd)):this.cwd="",this.cwd=r.cwd||"",this.root=r.root,this.magicalBraces=!!r.magicalBraces,this.nobrace=!!r.nobrace,this.noext=!!r.noext,this.realpath=!!r.realpath,this.absolute=r.absolute,this.includeChildMatches=r.includeChildMatches!==!1,this.noglobstar=!!r.noglobstar,this.matchBase=!!r.matchBase,this.maxDepth=typeof r.maxDepth=="number"?r.maxDepth:1/0,this.stat=!!r.stat,this.ignore=r.ignore,this.withFileTypes&&this.absolute!==void 0)throw new Error("cannot set absolute and withFileTypes:true");if(typeof e=="string"&&(e=[e]),this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(e=e.map(p=>p.replace(/\\/g,"/"))),this.matchBase){if(r.noglobstar)throw new TypeError("base matching requires globstar");e=e.map(p=>p.includes("/")?p:`./**/${p}`)}if(this.pattern=e,this.platform=r.platform||XY,this.opts={...r,platform:this.platform},r.scurry){if(this.scurry=r.scurry,r.nocase!==void 0&&r.nocase!==r.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{let p=r.platform==="win32"?bc:r.platform==="darwin"?Np:r.platform?wc:MC;this.scurry=new p(this.cwd,{nocase:r.nocase,fs:r.fs})}this.nocase=this.scurry.nocase;let n=this.platform==="darwin"||this.platform==="win32",i={...r,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:n,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},o=this.pattern.map(p=>new Qr(p,i)),[s,l]=o.reduce((p,u)=>(p[0].push(...u.set),p[1].push(...u.globParts),p),[[],[]]);this.patterns=s.map((p,u)=>{let m=l[u];if(!m)throw new Error("invalid pattern object");return new _c(p,m,0,this.platform)})}async walk(){return[...await new Lp(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walk()]}walkSync(){return[...new Lp(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walkSync()]}stream(){return new Up(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).stream()}streamSync(){return new Up(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}};var Cb=(t,e={})=>{Array.isArray(t)||(t=[t]);for(let r of t)if(new Qr(r,e).hasMagic())return!0;return!1};function Ry(t,e={}){return new $n(t,e).streamSync()}function IC(t,e={}){return new $n(t,e).stream()}function CC(t,e={}){return new $n(t,e).walkSync()}async function FC(t,e={}){return new $n(t,e).walk()}function ky(t,e={}){return new $n(t,e).iterateSync()}function NC(t,e={}){return new $n(t,e).iterate()}var JY=Ry,eX=Object.assign(IC,{sync:Ry}),tX=ky,rX=Object.assign(NC,{sync:ky}),nX=Object.assign(CC,{stream:Ry,iterate:ky}),Nb=Object.assign(FC,{glob:FC,globSync:CC,sync:nX,globStream:IC,stream:eX,globStreamSync:Ry,streamSync:JY,globIterate:NC,iterate:rX,globIterateSync:ky,iterateSync:tX,Glob:$n,hasMagic:Cb,escape:gc,unescape:Vn});Nb.glob=Nb;function OC(){let t=process.env.CURSORLESS_MODE;switch(t){case void 0:case"production":return"production";case"development":return"development";case"test":return"test";default:throw new Error(`Unexpected value for environment variable CURSORLESS_MODE: ${t}`)}}var zC=Object.defineProperty,aX=Object.getOwnPropertyNames,C=(t,e)=>zC(t,"name",{value:e,configurable:!0}),sX=(t,e)=>function(){return e||(0,t[aX(t)[0]])((e={exports:{}}).exports,e),e.exports},Xb=(t,e)=>{for(var r in e)zC(t,r,{get:e[r],enumerable:!0})},cX=sX({"(disabled):util"(){}}),Py={};Xb(Py,{addChainableMethod:()=>pw,addLengthGuard:()=>$p,addMethod:()=>sw,addProperty:()=>aw,checkError:()=>Yr,compareByInspect:()=>Fy,eql:()=>S1,expectTypes:()=>e1,flag:()=>Ee,getActual:()=>Ly,getMessage:()=>tw,getName:()=>Hy,getOperator:()=>dw,getOwnEnumerableProperties:()=>mw,getOwnEnumerablePropertySymbols:()=>fw,getPathInfo:()=>ow,hasProperty:()=>Uy,inspect:()=>He,isNaN:()=>Iy,isProxyEnabled:()=>Wp,isRegExp:()=>Cy,objDisplay:()=>Ia,overwriteChainableMethod:()=>uw,overwriteMethod:()=>lw,overwriteProperty:()=>cw,proxify:()=>Ac,test:()=>Jb,transferFlags:()=>jn,type:()=>Xe});var Yr={};Xb(Yr,{compatibleConstructor:()=>QC,compatibleInstance:()=>KC,compatibleMessage:()=>ZC,getConstructorName:()=>YC,getMessage:()=>XC});function Oy(t){return t instanceof Error||Object.prototype.toString.call(t)==="[object Error]"}C(Oy,"isErrorInstance");function GC(t){return Object.prototype.toString.call(t)==="[object RegExp]"}C(GC,"isRegExp");function KC(t,e){return Oy(e)&&t===e}C(KC,"compatibleInstance");function QC(t,e){return Oy(e)?t.constructor===e.constructor||t instanceof e.constructor:(typeof e=="object"||typeof e=="function")&&e.prototype?t.constructor===e||t instanceof e:!1}C(QC,"compatibleConstructor");function ZC(t,e){let r=typeof t=="string"?t:t.message;return GC(e)?e.test(r):typeof e=="string"?r.indexOf(e)!==-1:!1}C(ZC,"compatibleMessage");function YC(t){let e=t;return Oy(t)?e=t.constructor.name:typeof t=="function"&&(e=t.name,e===""&&(e=new t().name||e)),e}C(YC,"getConstructorName");function XC(t){let e="";return t&&t.message?e=t.message:typeof t=="string"&&(e=t),e}C(XC,"getMessage");function Ee(t,e,r){var n=t.__flags||(t.__flags=Object.create(null));if(arguments.length===3)n[e]=r;else return n[e]}C(Ee,"flag");function Jb(t,e){var r=Ee(t,"negate"),n=e[0];return r?!n:n}C(Jb,"test");function Xe(t){if(typeof t>"u")return"undefined";if(t===null)return"null";let e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}C(Xe,"type");var lX="captureStackTrace"in Error,Ke=class JC extends Error{static{C(this,"AssertionError")}message;get name(){return"AssertionError"}get ok(){return!1}constructor(e="Unspecified AssertionError",r,n){super(e),this.message=e,lX&&Error.captureStackTrace(this,n||JC);for(let i in r)i in this||(this[i]=r[i])}toJSON(e){return{...this,name:this.name,message:this.message,ok:!1,stack:e!==!1?this.stack:void 0}}};function e1(t,e){var r=Ee(t,"message"),n=Ee(t,"ssfi");r=r?r+": ":"",t=Ee(t,"object"),e=e.map(function(s){return s.toLowerCase()}),e.sort();var i=e.map(function(s,l){var p=~["a","e","i","o","u"].indexOf(s.charAt(0))?"an":"a",u=e.length>1&&l===e.length-1?"or ":"";return u+p+" "+s}).join(", "),o=Xe(t).toLowerCase();if(!e.some(function(s){return o===s}))throw new Ke(r+"object tested must be "+i+", but "+o+" given",void 0,n)}C(e1,"expectTypes");function Ly(t,e){return e.length>4?e[4]:t._obj}C(Ly,"getActual");var LC={bold:["1","22"],dim:["2","22"],italic:["3","23"],underline:["4","24"],inverse:["7","27"],hidden:["8","28"],strike:["9","29"],black:["30","39"],red:["31","39"],green:["32","39"],yellow:["33","39"],blue:["34","39"],magenta:["35","39"],cyan:["36","39"],white:["37","39"],brightblack:["30;1","39"],brightred:["31;1","39"],brightgreen:["32;1","39"],brightyellow:["33;1","39"],brightblue:["34;1","39"],brightmagenta:["35;1","39"],brightcyan:["36;1","39"],brightwhite:["37;1","39"],grey:["90","39"]},pX={special:"cyan",number:"yellow",bigint:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",symbol:"green",date:"magenta",regexp:"red"},kc="\u2026";function t1(t,e){let r=LC[pX[e]]||LC[e]||"";return r?`\x1B[${r[0]}m${String(t)}\x1B[${r[1]}m`:String(t)}C(t1,"colorise");function r1({showHidden:t=!1,depth:e=2,colors:r=!1,customInspect:n=!0,showProxy:i=!1,maxArrayLength:o=1/0,breakLength:s=1/0,seen:l=[],truncate:p=1/0,stylize:u=String}={},m){let d={showHidden:!!t,depth:Number(e),colors:!!r,customInspect:!!n,showProxy:!!i,maxArrayLength:Number(o),breakLength:Number(s),truncate:Number(p),seen:l,inspect:m,stylize:u};return d.colors&&(d.stylize=t1),d}C(r1,"normaliseOptions");function Wi(t,e,r=kc){t=String(t);let n=r.length,i=t.length;return n>e&&i>n?r:i>e&&i>n?`${t.slice(0,e-n)}${r}`:t}C(Wi,"truncate");function wn(t,e,r,n=", "){r=r||e.inspect;let i=t.length;if(i===0)return"";let o=e.truncate,s="",l="",p="";for(let u=0;u<i;u+=1){let m=u+1===t.length,d=u+2===t.length;p=`${kc}(${t.length-u})`;let g=t[u];e.truncate=o-s.length-(m?0:n.length);let x=l||r(g,e)+(m?"":n),b=s.length+x.length,v=b+p.length;if(m&&b>o&&s.length+p.length<=o||!m&&!d&&v>o||(l=m?"":r(t[u+1],e)+(d?"":n),!m&&d&&v>o&&b+l.length>o))break;if(s+=x,!m&&!d&&b+l.length>=o){p=`${kc}(${t.length-u-1})`;break}p=""}return`${s}${p}`}C(wn,"inspectList");function n1(t){return t.match(/^[a-zA-Z_][a-zA-Z_0-9]*$/)?t:JSON.stringify(t).replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'")}C(n1,"quoteComplexKey");function Pc([t,e],r){return r.truncate-=2,typeof t=="string"?t=n1(t):typeof t!="number"&&(t=`[${r.inspect(t,r)}]`),r.truncate-=t.length,e=r.inspect(e,r),`${t}: ${e}`}C(Pc,"inspectProperty");function i1(t,e){let r=Object.keys(t).slice(t.length);if(!t.length&&!r.length)return"[]";e.truncate-=4;let n=wn(t,e);e.truncate-=n.length;let i="";return r.length&&(i=wn(r.map(o=>[o,t[o]]),e,Pc)),`[ ${n}${i?`, ${i}`:""} ]`}C(i1,"inspectArray");var uX=C(t=>typeof Buffer=="function"&&t instanceof Buffer?"Buffer":t[Symbol.toStringTag]?t[Symbol.toStringTag]:t.constructor.name,"getArrayName");function mi(t,e){let r=uX(t);e.truncate-=r.length+4;let n=Object.keys(t).slice(t.length);if(!t.length&&!n.length)return`${r}[]`;let i="";for(let s=0;s<t.length;s++){let l=`${e.stylize(Wi(t[s],e.truncate),"number")}${s===t.length-1?"":", "}`;if(e.truncate-=l.length,t[s]!==t.length&&e.truncate<=3){i+=`${kc}(${t.length-t[s]+1})`;break}i+=l}let o="";return n.length&&(o=wn(n.map(s=>[s,t[s]]),e,Pc)),`${r}[ ${i}${o?`, ${o}`:""} ]`}C(mi,"inspectTypedArray");function o1(t,e){let r=t.toJSON();if(r===null)return"Invalid Date";let n=r.split("T"),i=n[0];return e.stylize(`${i}T${Wi(n[1],e.truncate-i.length-1)}`,"date")}C(o1,"inspectDate");function Ub(t,e){let r=t[Symbol.toStringTag]||"Function",n=t.name;return n?e.stylize(`[${r} ${Wi(n,e.truncate-11)}]`,"special"):e.stylize(`[${r}]`,"special")}C(Ub,"inspectFunction");function a1([t,e],r){return r.truncate-=4,t=r.inspect(t,r),r.truncate-=t.length,e=r.inspect(e,r),`${t} => ${e}`}C(a1,"inspectMapEntry");function s1(t){let e=[];return t.forEach((r,n)=>{e.push([n,r])}),e}C(s1,"mapToEntries");function c1(t,e){return t.size-1<=0?"Map{}":(e.truncate-=7,`Map{ ${wn(s1(t),e,a1)} }`)}C(c1,"inspectMap");var fX=Number.isNaN||(t=>t!==t);function Hb(t,e){return fX(t)?e.stylize("NaN","number"):t===1/0?e.stylize("Infinity","number"):t===-1/0?e.stylize("-Infinity","number"):t===0?e.stylize(1/t===1/0?"+0":"-0","number"):e.stylize(Wi(String(t),e.truncate),"number")}C(Hb,"inspectNumber");function Vb(t,e){let r=Wi(t.toString(),e.truncate-1);return r!==kc&&(r+="n"),e.stylize(r,"bigint")}C(Vb,"inspectBigInt");function l1(t,e){let r=t.toString().split("/")[2],n=e.truncate-(2+r.length),i=t.source;return e.stylize(`/${Wi(i,n)}/${r}`,"regexp")}C(l1,"inspectRegExp");function p1(t){let e=[];return t.forEach(r=>{e.push(r)}),e}C(p1,"arrayFromSet");function u1(t,e){return t.size===0?"Set{}":(e.truncate-=7,`Set{ ${wn(p1(t),e)} }`)}C(u1,"inspectSet");var UC=new RegExp("['\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]","g"),mX={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"},dX=16,hX=4;function f1(t){return mX[t]||`\\u${`0000${t.charCodeAt(0).toString(dX)}`.slice(-hX)}`}C(f1,"escape");function Bb(t,e){return UC.test(t)&&(t=t.replace(UC,f1)),e.stylize(`'${Wi(t,e.truncate-2)}'`,"string")}C(Bb,"inspectString");function Wb(t){return"description"in Symbol.prototype?t.description?`Symbol(${t.description})`:"Symbol()":t.toString()}C(Wb,"inspectSymbol");var m1=C(()=>"Promise{\u2026}","getPromiseValue");try{let{getPromiseDetails:t,kPending:e,kRejected:r}=process.binding("util");Array.isArray(t(Promise.resolve()))&&(m1=C((n,i)=>{let[o,s]=t(n);return o===e?"Promise{<pending>}":`Promise${o===r?"!":""}{${i.inspect(s,i)}}`},"getPromiseValue"))}catch{}var gX=m1;function Vp(t,e){let r=Object.getOwnPropertyNames(t),n=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[];if(r.length===0&&n.length===0)return"{}";if(e.truncate-=4,e.seen=e.seen||[],e.seen.indexOf(t)>=0)return"[Circular]";e.seen.push(t);let i=wn(r.map(l=>[l,t[l]]),e,Pc),o=wn(n.map(l=>[l,t[l]]),e,Pc);e.seen.pop();let s="";return i&&o&&(s=", "),`{ ${i}${s}${o} }`}C(Vp,"inspectObject");var Ob=typeof Symbol<"u"&&Symbol.toStringTag?Symbol.toStringTag:!1;function d1(t,e){let r="";return Ob&&Ob in t&&(r=t[Ob]),r=r||t.constructor.name,(!r||r==="_class")&&(r="<Anonymous Class>"),e.truncate-=r.length,`${r}${Vp(t,e)}`}C(d1,"inspectClass");function h1(t,e){return t.length===0?"Arguments[]":(e.truncate-=13,`Arguments[ ${wn(t,e)} ]`)}C(h1,"inspectArguments");var yX=["stack","line","column","name","message","fileName","lineNumber","columnNumber","number","description"];function g1(t,e){let r=Object.getOwnPropertyNames(t).filter(s=>yX.indexOf(s)===-1),n=t.name;e.truncate-=n.length;let i="";typeof t.message=="string"?i=Wi(t.message,e.truncate):r.unshift("message"),i=i?`: ${i}`:"",e.truncate-=i.length+5;let o=wn(r.map(s=>[s,t[s]]),e,Pc);return`${n}${i}${o?` { ${o} }`:""}`}C(g1,"inspectObject");function y1([t,e],r){return r.truncate-=3,e?`${r.stylize(String(t),"yellow")}=${r.stylize(`"${e}"`,"string")}`:`${r.stylize(String(t),"yellow")}`}C(y1,"inspectAttribute");function Ay(t,e){return wn(t,e,ew,`
`)}C(Ay,"inspectHTMLCollection");function ew(t,e){let r=t.getAttributeNames(),n=t.tagName.toLowerCase(),i=e.stylize(`<${n}`,"special"),o=e.stylize(">","special"),s=e.stylize(`</${n}>`,"special");e.truncate-=n.length*2+5;let l="";r.length>0&&(l+=" ",l+=wn(r.map(m=>[m,t.getAttribute(m)]),e,y1," ")),e.truncate-=l.length;let p=e.truncate,u=Ay(t.children,e);return u&&u.length>p&&(u=`${kc}(${t.children.length})`),`${i}${l}${o}${u}${s}`}C(ew,"inspectHTML");var xX=typeof Symbol=="function"&&typeof Symbol.for=="function",Lb=xX?Symbol.for("chai/inspect"):"@@chai/inspect",Rc=!1;try{let t=cX();Rc=t.inspect?t.inspect.custom:!1}catch{Rc=!1}var HC=new WeakMap,VC={},BC={undefined:(t,e)=>e.stylize("undefined","undefined"),null:(t,e)=>e.stylize("null","null"),boolean:(t,e)=>e.stylize(String(t),"boolean"),Boolean:(t,e)=>e.stylize(String(t),"boolean"),number:Hb,Number:Hb,bigint:Vb,BigInt:Vb,string:Bb,String:Bb,function:Ub,Function:Ub,symbol:Wb,Symbol:Wb,Array:i1,Date:o1,Map:c1,Set:u1,RegExp:l1,Promise:gX,WeakSet:(t,e)=>e.stylize("WeakSet{\u2026}","special"),WeakMap:(t,e)=>e.stylize("WeakMap{\u2026}","special"),Arguments:h1,Int8Array:mi,Uint8Array:mi,Uint8ClampedArray:mi,Int16Array:mi,Uint16Array:mi,Int32Array:mi,Uint32Array:mi,Float32Array:mi,Float64Array:mi,Generator:()=>"",DataView:()=>"",ArrayBuffer:()=>"",Error:g1,HTMLCollection:Ay,NodeList:Ay},SX=C((t,e,r)=>Lb in t&&typeof t[Lb]=="function"?t[Lb](e):Rc&&Rc in t&&typeof t[Rc]=="function"?t[Rc](e.depth,e):"inspect"in t&&typeof t.inspect=="function"?t.inspect(e.depth,e):"constructor"in t&&HC.has(t.constructor)?HC.get(t.constructor)(t,e):VC[r]?VC[r](t,e):"","inspectCustom"),TX=Object.prototype.toString;function My(t,e={}){let r=r1(e,My),{customInspect:n}=r,i=t===null?"null":typeof t;if(i==="object"&&(i=TX.call(t).slice(8,-1)),i in BC)return BC[i](t,r);if(n&&t){let s=SX(t,r,i);if(s)return typeof s=="string"?s:My(s,r)}let o=t?Object.getPrototypeOf(t):!1;return o===Object.prototype||o===null?Vp(t,r):t&&typeof HTMLElement=="function"&&t instanceof HTMLElement?ew(t,r):"constructor"in t?t.constructor!==Object?d1(t,r):Vp(t,r):t===Object(t)?Vp(t,r):r.stylize(String(t),i)}C(My,"inspect");var Dr={includeStack:!1,showDiff:!0,truncateThreshold:40,useProxy:!0,proxyExcludedKeys:["then","catch","inspect","toJSON"],deepEqual:null};function He(t,e,r,n){var i={colors:n,depth:typeof r>"u"?2:r,showHidden:e,truncate:Dr.truncateThreshold?Dr.truncateThreshold:1/0};return My(t,i)}C(He,"inspect");function Ia(t){var e=He(t),r=Object.prototype.toString.call(t);if(Dr.truncateThreshold&&e.length>=Dr.truncateThreshold){if(r==="[object Function]")return!t.name||t.name===""?"[Function]":"[Function: "+t.name+"]";if(r==="[object Array]")return"[ Array("+t.length+") ]";if(r==="[object Object]"){var n=Object.keys(t),i=n.length>2?n.splice(0,2).join(", ")+", ...":n.join(", ");return"{ Object ("+i+") }"}else return e}else return e}C(Ia,"objDisplay");function tw(t,e){var r=Ee(t,"negate"),n=Ee(t,"object"),i=e[3],o=Ly(t,e),s=r?e[2]:e[1],l=Ee(t,"message");return typeof s=="function"&&(s=s()),s=s||"",s=s.replace(/#\{this\}/g,function(){return Ia(n)}).replace(/#\{act\}/g,function(){return Ia(o)}).replace(/#\{exp\}/g,function(){return Ia(i)}),l?l+": "+s:s}C(tw,"getMessage");function jn(t,e,r){var n=t.__flags||(t.__flags=Object.create(null));e.__flags||(e.__flags=Object.create(null)),r=arguments.length===3?r:!0;for(var i in n)(r||i!=="object"&&i!=="ssfi"&&i!=="lockSsfi"&&i!="message")&&(e.__flags[i]=n[i])}C(jn,"transferFlags");function $b(t){if(typeof t>"u")return"undefined";if(t===null)return"null";let e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}C($b,"type");function rw(){this._key="chai/deep-eql__"+Math.random()+Date.now()}C(rw,"FakeMap");rw.prototype={get:C(function(e){return e[this._key]},"get"),set:C(function(e,r){Object.isExtensible(e)&&Object.defineProperty(e,this._key,{value:r,configurable:!0})},"set")};var x1=typeof WeakMap=="function"?WeakMap:rw;function jb(t,e,r){if(!r||Ca(t)||Ca(e))return null;var n=r.get(t);if(n){var i=n.get(e);if(typeof i=="boolean")return i}return null}C(jb,"memoizeCompare");function Hp(t,e,r,n){if(!(!r||Ca(t)||Ca(e))){var i=r.get(t);i?i.set(e,n):(i=new x1,i.set(e,n),r.set(t,i))}}C(Hp,"memoizeSet");var S1=Bp;function Bp(t,e,r){if(r&&r.comparator)return qb(t,e,r);var n=nw(t,e);return n!==null?n:qb(t,e,r)}C(Bp,"deepEqual");function nw(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e?!0:Ca(t)||Ca(e)?!1:null}C(nw,"simpleEqual");function qb(t,e,r){r=r||{},r.memoize=r.memoize===!1?!1:r.memoize||new x1;var n=r&&r.comparator,i=jb(t,e,r.memoize);if(i!==null)return i;var o=jb(e,t,r.memoize);if(o!==null)return o;if(n){var s=n(t,e);if(s===!1||s===!0)return Hp(t,e,r.memoize,s),s;var l=nw(t,e);if(l!==null)return l}var p=$b(t);if(p!==$b(e))return Hp(t,e,r.memoize,!1),!1;Hp(t,e,r.memoize,!0);var u=T1(t,e,p,r);return Hp(t,e,r.memoize,u),u}C(qb,"extensiveDeepEqual");function T1(t,e,r,n){switch(r){case"String":case"Number":case"Boolean":case"Date":return Bp(t.valueOf(),e.valueOf());case"Promise":case"Symbol":case"function":case"WeakMap":case"WeakSet":return t===e;case"Error":return iw(t,e,["name","message","code"],n);case"Arguments":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"Array":return No(t,e,n);case"RegExp":return v1(t,e);case"Generator":return b1(t,e,n);case"DataView":return No(new Uint8Array(t.buffer),new Uint8Array(e.buffer),n);case"ArrayBuffer":return No(new Uint8Array(t),new Uint8Array(e),n);case"Set":return zb(t,e,n);case"Map":return zb(t,e,n);case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.Instant":case"Temporal.ZonedDateTime":case"Temporal.PlainYearMonth":case"Temporal.PlainMonthDay":return t.equals(e);case"Temporal.Duration":return t.total("nanoseconds")===e.total("nanoseconds");case"Temporal.TimeZone":case"Temporal.Calendar":return t.toString()===e.toString();default:return _1(t,e,n)}}C(T1,"extensiveDeepEqualByType");function v1(t,e){return t.toString()===e.toString()}C(v1,"regexpEqual");function zb(t,e,r){if(t.size!==e.size)return!1;if(t.size===0)return!0;var n=[],i=[];return t.forEach(C(function(s,l){n.push([s,l])},"gatherEntries")),e.forEach(C(function(s,l){i.push([s,l])},"gatherEntries")),No(n.sort(),i.sort(),r)}C(zb,"entriesEqual");function No(t,e,r){var n=t.length;if(n!==e.length)return!1;if(n===0)return!0;for(var i=-1;++i<n;)if(Bp(t[i],e[i],r)===!1)return!1;return!0}C(No,"iterableEqual");function b1(t,e,r){return No(Dy(t),Dy(e),r)}C(b1,"generatorEqual");function w1(t){return typeof Symbol<"u"&&typeof t=="object"&&typeof Symbol.iterator<"u"&&typeof t[Symbol.iterator]=="function"}C(w1,"hasIteratorFunction");function Gb(t){if(w1(t))try{return Dy(t[Symbol.iterator]())}catch{return[]}return[]}C(Gb,"getIteratorEntries");function Dy(t){for(var e=t.next(),r=[e.value];e.done===!1;)e=t.next(),r.push(e.value);return r}C(Dy,"getGeneratorEntries");function Kb(t){var e=[];for(var r in t)e.push(r);return e}C(Kb,"getEnumerableKeys");function Qb(t){for(var e=[],r=Object.getOwnPropertySymbols(t),n=0;n<r.length;n+=1){var i=r[n];Object.getOwnPropertyDescriptor(t,i).enumerable&&e.push(i)}return e}C(Qb,"getEnumerableSymbols");function iw(t,e,r,n){var i=r.length;if(i===0)return!0;for(var o=0;o<i;o+=1)if(Bp(t[r[o]],e[r[o]],n)===!1)return!1;return!0}C(iw,"keysEqual");function _1(t,e,r){var n=Kb(t),i=Kb(e),o=Qb(t),s=Qb(e);if(n=n.concat(o),i=i.concat(s),n.length&&n.length===i.length)return No(Zb(n).sort(),Zb(i).sort())===!1?!1:iw(t,e,n,r);var l=Gb(t),p=Gb(e);return l.length&&l.length===p.length?(l.sort(),p.sort(),No(l,p,r)):n.length===0&&l.length===0&&i.length===0&&p.length===0}C(_1,"objectEqual");function Ca(t){return t===null||typeof t!="object"}C(Ca,"isPrimitive");function Zb(t){return t.map(C(function(r){return typeof r=="symbol"?r.toString():r},"mapSymbol"))}C(Zb,"mapSymbols");function Uy(t,e){return typeof t>"u"||t===null?!1:e in Object(t)}C(Uy,"hasProperty");function E1(t){return t.replace(/([^\\])\[/g,"$1.[").match(/(\\\.|[^.]+?)+/g).map(n=>{if(n==="constructor"||n==="__proto__"||n==="prototype")return{};let o=/^\[(\d+)\]$/.exec(n),s=null;return o?s={i:parseFloat(o[1])}:s={p:n.replace(/\\([.[\]])/g,"$1")},s})}C(E1,"parsePath");function Yb(t,e,r){let n=t,i=null;r=typeof r>"u"?e.length:r;for(let o=0;o<r;o++){let s=e[o];n&&(typeof s.p>"u"?n=n[s.i]:n=n[s.p],o===r-1&&(i=n))}return i}C(Yb,"internalGetPathValue");function ow(t,e){let r=E1(e),n=r[r.length-1],i={parent:r.length>1?Yb(t,r,r.length-1):t,name:n.p||n.i,value:Yb(t,r)};return i.exists=Uy(i.parent,i.name),i}C(ow,"getPathInfo");function _(t,e,r,n){return Ee(this,"ssfi",r||_),Ee(this,"lockSsfi",n),Ee(this,"object",t),Ee(this,"message",e),Ee(this,"eql",Dr.deepEqual||S1),Ac(this)}C(_,"Assertion");Object.defineProperty(_,"includeStack",{get:function(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),Dr.includeStack},set:function(t){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),Dr.includeStack=t}});Object.defineProperty(_,"showDiff",{get:function(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),Dr.showDiff},set:function(t){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),Dr.showDiff=t}});_.addProperty=function(t,e){aw(this.prototype,t,e)};_.addMethod=function(t,e){sw(this.prototype,t,e)};_.addChainableMethod=function(t,e,r){pw(this.prototype,t,e,r)};_.overwriteProperty=function(t,e){cw(this.prototype,t,e)};_.overwriteMethod=function(t,e){lw(this.prototype,t,e)};_.overwriteChainableMethod=function(t,e,r){uw(this.prototype,t,e,r)};_.prototype.assert=function(t,e,r,n,i,o){var s=Jb(this,arguments);if(o!==!1&&(o=!0),n===void 0&&i===void 0&&(o=!1),Dr.showDiff!==!0&&(o=!1),!s){e=tw(this,arguments);var l=Ly(this,arguments),p={actual:l,expected:n,showDiff:o},u=dw(this,arguments);throw u&&(p.operator=u),new Ke(e,p,Dr.includeStack?this.assert:Ee(this,"ssfi"))}};Object.defineProperty(_.prototype,"_obj",{get:function(){return Ee(this,"object")},set:function(t){Ee(this,"object",t)}});function Wp(){return Dr.useProxy&&typeof Proxy<"u"&&typeof Reflect<"u"}C(Wp,"isProxyEnabled");function aw(t,e,r){r=r===void 0?function(){}:r,Object.defineProperty(t,e,{get:C(function n(){!Wp()&&!Ee(this,"lockSsfi")&&Ee(this,"ssfi",n);var i=r.call(this);if(i!==void 0)return i;var o=new _;return jn(this,o),o},"propertyGetter"),configurable:!0})}C(aw,"addProperty");var vX=Object.getOwnPropertyDescriptor(function(){},"length");function $p(t,e,r){return vX.configurable&&Object.defineProperty(t,"length",{get:function(){throw Error(r?"Invalid Chai property: "+e+'.length. Due to a compatibility issue, "length" cannot directly follow "'+e+'". Use "'+e+'.lengthOf" instead.':"Invalid Chai property: "+e+'.length. See docs for proper usage of "'+e+'".')}}),t}C($p,"addLengthGuard");function R1(t){var e=Object.getOwnPropertyNames(t);function r(i){e.indexOf(i)===-1&&e.push(i)}C(r,"addProperty");for(var n=Object.getPrototypeOf(t);n!==null;)Object.getOwnPropertyNames(n).forEach(r),n=Object.getPrototypeOf(n);return e}C(R1,"getProperties");var WC=["__flags","__methods","_obj","assert"];function Ac(t,e){return Wp()?new Proxy(t,{get:C(function r(n,i){if(typeof i=="string"&&Dr.proxyExcludedKeys.indexOf(i)===-1&&!Reflect.has(n,i)){if(e)throw Error("Invalid Chai property: "+e+"."+i+'. See docs for proper usage of "'+e+'".');var o=null,s=4;throw R1(n).forEach(function(l){if(!Object.prototype.hasOwnProperty(l)&&WC.indexOf(l)===-1){var p=k1(i,l,s);p<s&&(o=l,s=p)}}),Error(o!==null?"Invalid Chai property: "+i+'. Did you mean "'+o+'"?':"Invalid Chai property: "+i)}return WC.indexOf(i)===-1&&!Ee(n,"lockSsfi")&&Ee(n,"ssfi",r),Reflect.get(n,i)},"proxyGetter")}):t}C(Ac,"proxify");function k1(t,e,r){if(Math.abs(t.length-e.length)>=r)return r;for(var n=[],i=0;i<=t.length;i++)n[i]=Array(e.length+1).fill(0),n[i][0]=i;for(var o=0;o<e.length;o++)n[0][o]=o;for(var i=1;i<=t.length;i++)for(var s=t.charCodeAt(i-1),o=1;o<=e.length;o++){if(Math.abs(i-o)>=r){n[i][o]=r;continue}n[i][o]=Math.min(n[i-1][o]+1,n[i][o-1]+1,n[i-1][o-1]+(s===e.charCodeAt(o-1)?0:1))}return n[t.length][e.length]}C(k1,"stringDistanceCapped");function sw(t,e,r){var n=C(function(){Ee(this,"lockSsfi")||Ee(this,"ssfi",n);var i=r.apply(this,arguments);if(i!==void 0)return i;var o=new _;return jn(this,o),o},"methodWrapper");$p(n,e,!1),t[e]=Ac(n,e)}C(sw,"addMethod");function cw(t,e,r){var n=Object.getOwnPropertyDescriptor(t,e),i=C(function(){},"_super");n&&typeof n.get=="function"&&(i=n.get),Object.defineProperty(t,e,{get:C(function o(){!Wp()&&!Ee(this,"lockSsfi")&&Ee(this,"ssfi",o);var s=Ee(this,"lockSsfi");Ee(this,"lockSsfi",!0);var l=r(i).call(this);if(Ee(this,"lockSsfi",s),l!==void 0)return l;var p=new _;return jn(this,p),p},"overwritingPropertyGetter"),configurable:!0})}C(cw,"overwriteProperty");function lw(t,e,r){var n=t[e],i=C(function(){throw new Error(e+" is not a function")},"_super");n&&typeof n=="function"&&(i=n);var o=C(function(){Ee(this,"lockSsfi")||Ee(this,"ssfi",o);var s=Ee(this,"lockSsfi");Ee(this,"lockSsfi",!0);var l=r(i).apply(this,arguments);if(Ee(this,"lockSsfi",s),l!==void 0)return l;var p=new _;return jn(this,p),p},"overwritingMethodWrapper");$p(o,e,!1),t[e]=Ac(o,e)}C(lw,"overwriteMethod");var bX=typeof Object.setPrototypeOf=="function",$C=C(function(){},"testFn"),wX=Object.getOwnPropertyNames($C).filter(function(t){var e=Object.getOwnPropertyDescriptor($C,t);return typeof e!="object"?!0:!e.configurable}),_X=Function.prototype.call,EX=Function.prototype.apply;function pw(t,e,r,n){typeof n!="function"&&(n=C(function(){},"chainingBehavior"));var i={method:r,chainingBehavior:n};t.__methods||(t.__methods={}),t.__methods[e]=i,Object.defineProperty(t,e,{get:C(function(){i.chainingBehavior.call(this);var s=C(function(){Ee(this,"lockSsfi")||Ee(this,"ssfi",s);var u=i.method.apply(this,arguments);if(u!==void 0)return u;var m=new _;return jn(this,m),m},"chainableMethodWrapper");if($p(s,e,!0),bX){var l=Object.create(this);l.call=_X,l.apply=EX,Object.setPrototypeOf(s,l)}else{var p=Object.getOwnPropertyNames(t);p.forEach(function(u){if(wX.indexOf(u)===-1){var m=Object.getOwnPropertyDescriptor(t,u);Object.defineProperty(s,u,m)}})}return jn(this,s),Ac(s)},"chainableMethodGetter"),configurable:!0})}C(pw,"addChainableMethod");function uw(t,e,r,n){var i=t.__methods[e],o=i.chainingBehavior;i.chainingBehavior=C(function(){var p=n(o).call(this);if(p!==void 0)return p;var u=new _;return jn(this,u),u},"overwritingChainableMethodGetter");var s=i.method;i.method=C(function(){var p=r(s).apply(this,arguments);if(p!==void 0)return p;var u=new _;return jn(this,u),u},"overwritingChainableMethodWrapper")}C(uw,"overwriteChainableMethod");function Fy(t,e){return He(t)<He(e)?-1:1}C(Fy,"compareByInspect");function fw(t){return typeof Object.getOwnPropertySymbols!="function"?[]:Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})}C(fw,"getOwnEnumerablePropertySymbols");function mw(t){return Object.keys(t).concat(fw(t))}C(mw,"getOwnEnumerableProperties");function P1(t){return t!==t}C(P1,"_isNaN");var Iy=Number.isNaN||P1;function A1(t){var e=Xe(t),r=["Array","Object","Function"];return r.indexOf(e)!==-1}C(A1,"isObjectType");function dw(t,e){var r=Ee(t,"operator"),n=Ee(t,"negate"),i=e[3],o=n?e[2]:e[1];if(r)return r;if(typeof o=="function"&&(o=o()),o=o||"",!!o&&!/\shave\s/.test(o)){var s=A1(i);return/\snot\s/.test(o)?s?"notDeepStrictEqual":"notStrictEqual":s?"deepStrictEqual":"strictEqual"}}C(dw,"getOperator");function Hy(t){return t.name}C(Hy,"getName");function Cy(t){return Object.prototype.toString.call(t)==="[object RegExp]"}C(Cy,"isRegExp");var{flag:A}=Py;["to","be","been","is","and","has","have","with","that","which","at","of","same","but","does","still","also"].forEach(function(t){_.addProperty(t)});_.addProperty("not",function(){A(this,"negate",!0)});_.addProperty("deep",function(){A(this,"deep",!0)});_.addProperty("nested",function(){A(this,"nested",!0)});_.addProperty("own",function(){A(this,"own",!0)});_.addProperty("ordered",function(){A(this,"ordered",!0)});_.addProperty("any",function(){A(this,"any",!0),A(this,"all",!1)});_.addProperty("all",function(){A(this,"all",!0),A(this,"any",!1)});var jC={function:["function","asyncfunction","generatorfunction","asyncgeneratorfunction"],asyncfunction:["asyncfunction","asyncgeneratorfunction"],generatorfunction:["generatorfunction","asyncgeneratorfunction"],asyncgeneratorfunction:["asyncgeneratorfunction"]};function hw(t,e){e&&A(this,"message",e),t=t.toLowerCase();var r=A(this,"object"),n=~["a","e","i","o","u"].indexOf(t.charAt(0))?"an ":"a ";let i=Xe(r).toLowerCase();jC.function.includes(t)?this.assert(jC[t].includes(i),"expected #{this} to be "+n+t,"expected #{this} not to be "+n+t):this.assert(t===i,"expected #{this} to be "+n+t,"expected #{this} not to be "+n+t)}C(hw,"an");_.addChainableMethod("an",hw);_.addChainableMethod("a",hw);function M1(t,e){return Iy(t)&&Iy(e)||t===e}C(M1,"SameValueZero");function jp(){A(this,"contains",!0)}C(jp,"includeChainingBehavior");function qp(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=Xe(r).toLowerCase(),i=A(this,"message"),o=A(this,"negate"),s=A(this,"ssfi"),l=A(this,"deep"),p=l?"deep ":"",u=l?A(this,"eql"):M1;i=i?i+": ":"";var m=!1;switch(n){case"string":m=r.indexOf(t)!==-1;break;case"weakset":if(l)throw new Ke(i+"unable to use .deep.include with WeakSet",void 0,s);m=r.has(t);break;case"map":r.forEach(function(b){m=m||u(b,t)});break;case"set":l?r.forEach(function(b){m=m||u(b,t)}):m=r.has(t);break;case"array":l?m=r.some(function(b){return u(b,t)}):m=r.indexOf(t)!==-1;break;default:if(t!==Object(t))throw new Ke(i+"the given combination of arguments ("+n+" and "+Xe(t).toLowerCase()+") is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a "+Xe(t).toLowerCase(),void 0,s);var d=Object.keys(t),g=null,x=0;if(d.forEach(function(b){var v=new _(r);if(jn(this,v,!0),A(v,"lockSsfi",!0),!o||d.length===1){v.property(b,t[b]);return}try{v.property(b,t[b])}catch(I){if(!Yr.compatibleConstructor(I,Ke))throw I;g===null&&(g=I),x++}},this),o&&d.length>1&&x===d.length)throw g;return}this.assert(m,"expected #{this} to "+p+"include "+He(t),"expected #{this} to not "+p+"include "+He(t))}C(qp,"include");_.addChainableMethod("include",qp,jp);_.addChainableMethod("contain",qp,jp);_.addChainableMethod("contains",qp,jp);_.addChainableMethod("includes",qp,jp);_.addProperty("ok",function(){this.assert(A(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")});_.addProperty("true",function(){this.assert(A(this,"object")===!0,"expected #{this} to be true","expected #{this} to be false",!A(this,"negate"))});_.addProperty("callable",function(){let t=A(this,"object"),e=A(this,"ssfi"),r=A(this,"message"),n=r?`${r}: `:"",i=A(this,"negate"),o=i?`${n}expected ${He(t)} not to be a callable function`:`${n}expected ${He(t)} to be a callable function`,s=["Function","AsyncFunction","GeneratorFunction","AsyncGeneratorFunction"].includes(Xe(t));if(s&&i||!s&&!i)throw new Ke(o,void 0,e)});_.addProperty("false",function(){this.assert(A(this,"object")===!1,"expected #{this} to be false","expected #{this} to be true",!!A(this,"negate"))});_.addProperty("null",function(){this.assert(A(this,"object")===null,"expected #{this} to be null","expected #{this} not to be null")});_.addProperty("undefined",function(){this.assert(A(this,"object")===void 0,"expected #{this} to be undefined","expected #{this} not to be undefined")});_.addProperty("NaN",function(){this.assert(Iy(A(this,"object")),"expected #{this} to be NaN","expected #{this} not to be NaN")});function gw(){var t=A(this,"object");this.assert(t!=null,"expected #{this} to exist","expected #{this} to not exist")}C(gw,"assertExist");_.addProperty("exist",gw);_.addProperty("exists",gw);_.addProperty("empty",function(){var t=A(this,"object"),e=A(this,"ssfi"),r=A(this,"message"),n;switch(r=r?r+": ":"",Xe(t).toLowerCase()){case"array":case"string":n=t.length;break;case"map":case"set":n=t.size;break;case"weakmap":case"weakset":throw new Ke(r+".empty was passed a weak collection",void 0,e);case"function":var i=r+".empty was passed a function "+Hy(t);throw new Ke(i.trim(),void 0,e);default:if(t!==Object(t))throw new Ke(r+".empty was passed non-string primitive "+He(t),void 0,e);n=Object.keys(t).length}this.assert(n===0,"expected #{this} to be empty","expected #{this} not to be empty")});function yw(){var t=A(this,"object"),e=Xe(t);this.assert(e==="Arguments","expected #{this} to be arguments but got "+e,"expected #{this} to not be arguments")}C(yw,"checkArguments");_.addProperty("arguments",yw);_.addProperty("Arguments",yw);function Vy(t,e){e&&A(this,"message",e);var r=A(this,"object");if(A(this,"deep")){var n=A(this,"lockSsfi");A(this,"lockSsfi",!0),this.eql(t),A(this,"lockSsfi",n)}else this.assert(t===r,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",t,this._obj,!0)}C(Vy,"assertEqual");_.addMethod("equal",Vy);_.addMethod("equals",Vy);_.addMethod("eq",Vy);function xw(t,e){e&&A(this,"message",e);var r=A(this,"eql");this.assert(r(t,A(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",t,this._obj,!0)}C(xw,"assertEql");_.addMethod("eql",xw);_.addMethod("eqls",xw);function By(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=A(this,"doLength"),i=A(this,"message"),o=i?i+": ":"",s=A(this,"ssfi"),l=Xe(r).toLowerCase(),p=Xe(t).toLowerCase(),u,m=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&p!=="date")u=o+"the argument to above must be a date";else if(p!=="number"&&(n||l==="number"))u=o+"the argument to above must be a number";else if(!n&&l!=="date"&&l!=="number"){var d=l==="string"?"'"+r+"'":r;u=o+"expected "+d+" to be a number or a date"}else m=!1;if(m)throw new Ke(u,void 0,s);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x>t,"expected #{this} to have a "+g+" above #{exp} but got #{act}","expected #{this} to not have a "+g+" above #{exp}",t,x)}else this.assert(r>t,"expected #{this} to be above #{exp}","expected #{this} to be at most #{exp}",t)}C(By,"assertAbove");_.addMethod("above",By);_.addMethod("gt",By);_.addMethod("greaterThan",By);function Wy(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=A(this,"doLength"),i=A(this,"message"),o=i?i+": ":"",s=A(this,"ssfi"),l=Xe(r).toLowerCase(),p=Xe(t).toLowerCase(),u,m=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&p!=="date")u=o+"the argument to least must be a date";else if(p!=="number"&&(n||l==="number"))u=o+"the argument to least must be a number";else if(!n&&l!=="date"&&l!=="number"){var d=l==="string"?"'"+r+"'":r;u=o+"expected "+d+" to be a number or a date"}else m=!1;if(m)throw new Ke(u,void 0,s);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x>=t,"expected #{this} to have a "+g+" at least #{exp} but got #{act}","expected #{this} to have a "+g+" below #{exp}",t,x)}else this.assert(r>=t,"expected #{this} to be at least #{exp}","expected #{this} to be below #{exp}",t)}C(Wy,"assertLeast");_.addMethod("least",Wy);_.addMethod("gte",Wy);_.addMethod("greaterThanOrEqual",Wy);function $y(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=A(this,"doLength"),i=A(this,"message"),o=i?i+": ":"",s=A(this,"ssfi"),l=Xe(r).toLowerCase(),p=Xe(t).toLowerCase(),u,m=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&p!=="date")u=o+"the argument to below must be a date";else if(p!=="number"&&(n||l==="number"))u=o+"the argument to below must be a number";else if(!n&&l!=="date"&&l!=="number"){var d=l==="string"?"'"+r+"'":r;u=o+"expected "+d+" to be a number or a date"}else m=!1;if(m)throw new Ke(u,void 0,s);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x<t,"expected #{this} to have a "+g+" below #{exp} but got #{act}","expected #{this} to not have a "+g+" below #{exp}",t,x)}else this.assert(r<t,"expected #{this} to be below #{exp}","expected #{this} to be at least #{exp}",t)}C($y,"assertBelow");_.addMethod("below",$y);_.addMethod("lt",$y);_.addMethod("lessThan",$y);function jy(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=A(this,"doLength"),i=A(this,"message"),o=i?i+": ":"",s=A(this,"ssfi"),l=Xe(r).toLowerCase(),p=Xe(t).toLowerCase(),u,m=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&p!=="date")u=o+"the argument to most must be a date";else if(p!=="number"&&(n||l==="number"))u=o+"the argument to most must be a number";else if(!n&&l!=="date"&&l!=="number"){var d=l==="string"?"'"+r+"'":r;u=o+"expected "+d+" to be a number or a date"}else m=!1;if(m)throw new Ke(u,void 0,s);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x<=t,"expected #{this} to have a "+g+" at most #{exp} but got #{act}","expected #{this} to have a "+g+" above #{exp}",t,x)}else this.assert(r<=t,"expected #{this} to be at most #{exp}","expected #{this} to be above #{exp}",t)}C(jy,"assertMost");_.addMethod("most",jy);_.addMethod("lte",jy);_.addMethod("lessThanOrEqual",jy);_.addMethod("within",function(t,e,r){r&&A(this,"message",r);var n=A(this,"object"),i=A(this,"doLength"),o=A(this,"message"),s=o?o+": ":"",l=A(this,"ssfi"),p=Xe(n).toLowerCase(),u=Xe(t).toLowerCase(),m=Xe(e).toLowerCase(),d,g=!0,x=u==="date"&&m==="date"?t.toISOString()+".."+e.toISOString():t+".."+e;if(i&&p!=="map"&&p!=="set"&&new _(n,o,l,!0).to.have.property("length"),!i&&p==="date"&&(u!=="date"||m!=="date"))d=s+"the arguments to within must be dates";else if((u!=="number"||m!=="number")&&(i||p==="number"))d=s+"the arguments to within must be numbers";else if(!i&&p!=="date"&&p!=="number"){var b=p==="string"?"'"+n+"'":n;d=s+"expected "+b+" to be a number or a date"}else g=!1;if(g)throw new Ke(d,void 0,l);if(i){var v="length",I;p==="map"||p==="set"?(v="size",I=n.size):I=n.length,this.assert(I>=t&&I<=e,"expected #{this} to have a "+v+" within "+x,"expected #{this} to not have a "+v+" within "+x)}else this.assert(n>=t&&n<=e,"expected #{this} to be within "+x,"expected #{this} to not be within "+x)});function Sw(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=A(this,"ssfi"),i=A(this,"message");try{var o=r instanceof t}catch(l){throw l instanceof TypeError?(i=i?i+": ":"",new Ke(i+"The instanceof assertion needs a constructor but "+Xe(t)+" was given.",void 0,n)):l}var s=Hy(t);s==null&&(s="an unnamed constructor"),this.assert(o,"expected #{this} to be an instance of "+s,"expected #{this} to not be an instance of "+s)}C(Sw,"assertInstanceOf");_.addMethod("instanceof",Sw);_.addMethod("instanceOf",Sw);function Tw(t,e,r){r&&A(this,"message",r);var n=A(this,"nested"),i=A(this,"own"),o=A(this,"message"),s=A(this,"object"),l=A(this,"ssfi"),p=typeof t;if(o=o?o+": ":"",n){if(p!=="string")throw new Ke(o+"the argument to property must be a string when using nested syntax",void 0,l)}else if(p!=="string"&&p!=="number"&&p!=="symbol")throw new Ke(o+"the argument to property must be a string, number, or symbol",void 0,l);if(n&&i)throw new Ke(o+'The "nested" and "own" flags cannot be combined.',void 0,l);if(s==null)throw new Ke(o+"Target cannot be null or undefined.",void 0,l);var u=A(this,"deep"),m=A(this,"negate"),d=n?ow(s,t):null,g=n?d.value:s[t],x=u?A(this,"eql"):(I,F)=>I===F,b="";u&&(b+="deep "),i&&(b+="own "),n&&(b+="nested "),b+="property ";var v;i?v=Object.prototype.hasOwnProperty.call(s,t):n?v=d.exists:v=Uy(s,t),(!m||arguments.length===1)&&this.assert(v,"expected #{this} to have "+b+He(t),"expected #{this} to not have "+b+He(t)),arguments.length>1&&this.assert(v&&x(e,g),"expected #{this} to have "+b+He(t)+" of #{exp}, but got #{act}","expected #{this} to not have "+b+He(t)+" of #{act}",e,g),A(this,"object",g)}C(Tw,"assertProperty");_.addMethod("property",Tw);function vw(t,e,r){A(this,"own",!0),Tw.apply(this,arguments)}C(vw,"assertOwnProperty");_.addMethod("ownProperty",vw);_.addMethod("haveOwnProperty",vw);function bw(t,e,r){typeof e=="string"&&(r=e,e=null),r&&A(this,"message",r);var n=A(this,"object"),i=Object.getOwnPropertyDescriptor(Object(n),t),o=A(this,"eql");i&&e?this.assert(o(e,i),"expected the own property descriptor for "+He(t)+" on #{this} to match "+He(e)+", got "+He(i),"expected the own property descriptor for "+He(t)+" on #{this} to not match "+He(e),e,i,!0):this.assert(i,"expected #{this} to have an own property descriptor for "+He(t),"expected #{this} to not have an own property descriptor for "+He(t)),A(this,"object",i)}C(bw,"assertOwnPropertyDescriptor");_.addMethod("ownPropertyDescriptor",bw);_.addMethod("haveOwnPropertyDescriptor",bw);function ww(){A(this,"doLength",!0)}C(ww,"assertLengthChain");function _w(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=Xe(r).toLowerCase(),i=A(this,"message"),o=A(this,"ssfi"),s="length",l;switch(n){case"map":case"set":s="size",l=r.size;break;default:new _(r,i,o,!0).to.have.property("length"),l=r.length}this.assert(l==t,"expected #{this} to have a "+s+" of #{exp} but got #{act}","expected #{this} to not have a "+s+" of #{act}",t,l)}C(_w,"assertLength");_.addChainableMethod("length",_w,ww);_.addChainableMethod("lengthOf",_w,ww);function Ew(t,e){e&&A(this,"message",e);var r=A(this,"object");this.assert(t.exec(r),"expected #{this} to match "+t,"expected #{this} not to match "+t)}C(Ew,"assertMatch");_.addMethod("match",Ew);_.addMethod("matches",Ew);_.addMethod("string",function(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=A(this,"message"),i=A(this,"ssfi");new _(r,n,i,!0).is.a("string"),this.assert(~r.indexOf(t),"expected #{this} to contain "+He(t),"expected #{this} to not contain "+He(t))});function Rw(t){var e=A(this,"object"),r=Xe(e),n=Xe(t),i=A(this,"ssfi"),o=A(this,"deep"),s,l="",p,u=!0,m=A(this,"message");m=m?m+": ":"";var d=m+"when testing keys against an object or an array you must give a single Array|Object|String argument or multiple String arguments";if(r==="Map"||r==="Set")l=o?"deeply ":"",p=[],e.forEach(function(H,Q){p.push(Q)}),n!=="Array"&&(t=Array.prototype.slice.call(arguments));else{switch(p=mw(e),n){case"Array":if(arguments.length>1)throw new Ke(d,void 0,i);break;case"Object":if(arguments.length>1)throw new Ke(d,void 0,i);t=Object.keys(t);break;default:t=Array.prototype.slice.call(arguments)}t=t.map(function(H){return typeof H=="symbol"?H:String(H)})}if(!t.length)throw new Ke(m+"keys required",void 0,i);var g=t.length,x=A(this,"any"),b=A(this,"all"),v=t,I=o?A(this,"eql"):(H,Q)=>H===Q;if(!x&&!b&&(b=!0),x&&(u=v.some(function(H){return p.some(function(Q){return I(H,Q)})})),b&&(u=v.every(function(H){return p.some(function(Q){return I(H,Q)})}),A(this,"contains")||(u=u&&t.length==p.length)),g>1){t=t.map(function(H){return He(H)});var F=t.pop();b&&(s=t.join(", ")+", and "+F),x&&(s=t.join(", ")+", or "+F)}else s=He(t[0]);s=(g>1?"keys ":"key ")+s,s=(A(this,"contains")?"contain ":"have ")+s,this.assert(u,"expected #{this} to "+l+s,"expected #{this} to not "+l+s,v.slice(0).sort(Fy),p.sort(Fy),!0)}C(Rw,"assertKeys");_.addMethod("keys",Rw);_.addMethod("key",Rw);function qy(t,e,r){r&&A(this,"message",r);var n=A(this,"object"),i=A(this,"ssfi"),o=A(this,"message"),s=A(this,"negate")||!1;new _(n,o,i,!0).is.a("function"),(Cy(t)||typeof t=="string")&&(e=t,t=null);let l,p=!1;try{n()}catch(H){p=!0,l=H}var u=t===void 0&&e===void 0,m=!!(t&&e),d=!1,g=!1;if(u||!u&&!s){var x="an error";t instanceof Error?x="#{exp}":t&&(x=Yr.getConstructorName(t));let H=l;if(l instanceof Error)H=l.toString();else if(typeof l=="string")H=l;else if(l&&(typeof l=="object"||typeof l=="function"))try{H=Yr.getConstructorName(l)}catch{}this.assert(p,"expected #{this} to throw "+x,"expected #{this} to not throw an error but #{act} was thrown",t&&t.toString(),H)}if(t&&l){if(t instanceof Error){var b=Yr.compatibleInstance(l,t);b===s&&(m&&s?d=!0:this.assert(s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l&&!s?" but #{act} was thrown":""),t.toString(),l.toString()))}var v=Yr.compatibleConstructor(l,t);v===s&&(m&&s?d=!0:this.assert(s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&Yr.getConstructorName(t),l instanceof Error?l.toString():l&&Yr.getConstructorName(l)))}if(l&&e!==void 0&&e!==null){var I="including";Cy(e)&&(I="matching");var F=Yr.compatibleMessage(l,e);F===s&&(m&&s?g=!0:this.assert(s,"expected #{this} to throw error "+I+" #{exp} but got #{act}","expected #{this} to throw error not "+I+" #{exp}",e,Yr.getMessage(l)))}d&&g&&this.assert(s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&Yr.getConstructorName(t),l instanceof Error?l.toString():l&&Yr.getConstructorName(l)),A(this,"object",l)}C(qy,"assertThrows");_.addMethod("throw",qy);_.addMethod("throws",qy);_.addMethod("Throw",qy);function kw(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=A(this,"itself"),i=typeof r=="function"&&!n?r.prototype[t]:r[t];this.assert(typeof i=="function","expected #{this} to respond to "+He(t),"expected #{this} to not respond to "+He(t))}C(kw,"respondTo");_.addMethod("respondTo",kw);_.addMethod("respondsTo",kw);_.addProperty("itself",function(){A(this,"itself",!0)});function Pw(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=t(r);this.assert(n,"expected #{this} to satisfy "+Ia(t),"expected #{this} to not satisfy"+Ia(t),!A(this,"negate"),n)}C(Pw,"satisfy");_.addMethod("satisfy",Pw);_.addMethod("satisfies",Pw);function Aw(t,e,r){r&&A(this,"message",r);var n=A(this,"object"),i=A(this,"message"),o=A(this,"ssfi");if(new _(n,i,o,!0).is.a("number"),typeof t!="number"||typeof e!="number"){i=i?i+": ":"";var s=e===void 0?", and a delta is required":"";throw new Ke(i+"the arguments to closeTo or approximately must be numbers"+s,void 0,o)}this.assert(Math.abs(n-t)<=e,"expected #{this} to be close to "+t+" +/- "+e,"expected #{this} not to be close to "+t+" +/- "+e)}C(Aw,"closeTo");_.addMethod("closeTo",Aw);_.addMethod("approximately",Aw);function D1(t,e,r,n,i){let o=Array.from(e),s=Array.from(t);if(!n){if(s.length!==o.length)return!1;o=o.slice()}return s.every(function(l,p){if(i)return r?r(l,o[p]):l===o[p];if(!r){var u=o.indexOf(l);return u===-1?!1:(n||o.splice(u,1),!0)}return o.some(function(m,d){return r(l,m)?(n||o.splice(d,1),!0):!1})})}C(D1,"isSubsetOf");_.addMethod("members",function(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=A(this,"message"),i=A(this,"ssfi");new _(r,n,i,!0).to.be.iterable,new _(t,n,i,!0).to.be.iterable;var o=A(this,"contains"),s=A(this,"ordered"),l,p,u;o?(l=s?"an ordered superset":"a superset",p="expected #{this} to be "+l+" of #{exp}",u="expected #{this} to not be "+l+" of #{exp}"):(l=s?"ordered members":"members",p="expected #{this} to have the same "+l+" as #{exp}",u="expected #{this} to not have the same "+l+" as #{exp}");var m=A(this,"deep")?A(this,"eql"):void 0;this.assert(D1(t,r,m,o,s),p,u,t,r,!0)});_.addProperty("iterable",function(t){t&&A(this,"message",t);var e=A(this,"object");this.assert(e!=null&&e[Symbol.iterator],"expected #{this} to be an iterable","expected #{this} to not be an iterable",e)});function F1(t,e){e&&A(this,"message",e);var r=A(this,"object"),n=A(this,"message"),i=A(this,"ssfi"),o=A(this,"contains"),s=A(this,"deep"),l=A(this,"eql");new _(t,n,i,!0).to.be.an("array"),o?this.assert(t.some(function(p){return r.indexOf(p)>-1}),"expected #{this} to contain one of #{exp}","expected #{this} to not contain one of #{exp}",t,r):s?this.assert(t.some(function(p){return l(r,p)}),"expected #{this} to deeply equal one of #{exp}","expected #{this} to deeply equal one of #{exp}",t,r):this.assert(t.indexOf(r)>-1,"expected #{this} to be one of #{exp}","expected #{this} to not be one of #{exp}",t,r)}C(F1,"oneOf");_.addMethod("oneOf",F1);function Mw(t,e,r){r&&A(this,"message",r);var n=A(this,"object"),i=A(this,"message"),o=A(this,"ssfi");new _(n,i,o,!0).is.a("function");var s;e?(new _(t,i,o,!0).to.have.property(e),s=t[e]):(new _(t,i,o,!0).is.a("function"),s=t()),n();var l=e==null?t():t[e],p=e==null?s:"."+e;A(this,"deltaMsgObj",p),A(this,"initialDeltaValue",s),A(this,"finalDeltaValue",l),A(this,"deltaBehavior","change"),A(this,"realDelta",l!==s),this.assert(s!==l,"expected "+p+" to change","expected "+p+" to not change")}C(Mw,"assertChanges");_.addMethod("change",Mw);_.addMethod("changes",Mw);function Dw(t,e,r){r&&A(this,"message",r);var n=A(this,"object"),i=A(this,"message"),o=A(this,"ssfi");new _(n,i,o,!0).is.a("function");var s;e?(new _(t,i,o,!0).to.have.property(e),s=t[e]):(new _(t,i,o,!0).is.a("function"),s=t()),new _(s,i,o,!0).is.a("number"),n();var l=e==null?t():t[e],p=e==null?s:"."+e;A(this,"deltaMsgObj",p),A(this,"initialDeltaValue",s),A(this,"finalDeltaValue",l),A(this,"deltaBehavior","increase"),A(this,"realDelta",l-s),this.assert(l-s>0,"expected "+p+" to increase","expected "+p+" to not increase")}C(Dw,"assertIncreases");_.addMethod("increase",Dw);_.addMethod("increases",Dw);function Fw(t,e,r){r&&A(this,"message",r);var n=A(this,"object"),i=A(this,"message"),o=A(this,"ssfi");new _(n,i,o,!0).is.a("function");var s;e?(new _(t,i,o,!0).to.have.property(e),s=t[e]):(new _(t,i,o,!0).is.a("function"),s=t()),new _(s,i,o,!0).is.a("number"),n();var l=e==null?t():t[e],p=e==null?s:"."+e;A(this,"deltaMsgObj",p),A(this,"initialDeltaValue",s),A(this,"finalDeltaValue",l),A(this,"deltaBehavior","decrease"),A(this,"realDelta",s-l),this.assert(l-s<0,"expected "+p+" to decrease","expected "+p+" to not decrease")}C(Fw,"assertDecreases");_.addMethod("decrease",Fw);_.addMethod("decreases",Fw);function I1(t,e){e&&A(this,"message",e);var r=A(this,"deltaMsgObj"),n=A(this,"initialDeltaValue"),i=A(this,"finalDeltaValue"),o=A(this,"deltaBehavior"),s=A(this,"realDelta"),l;o==="change"?l=Math.abs(i-n)===Math.abs(t):l=s===Math.abs(t),this.assert(l,"expected "+r+" to "+o+" by "+t,"expected "+r+" to not "+o+" by "+t)}C(I1,"assertDelta");_.addMethod("by",I1);_.addProperty("extensible",function(){var t=A(this,"object"),e=t===Object(t)&&Object.isExtensible(t);this.assert(e,"expected #{this} to be extensible","expected #{this} to not be extensible")});_.addProperty("sealed",function(){var t=A(this,"object"),e=t===Object(t)?Object.isSealed(t):!0;this.assert(e,"expected #{this} to be sealed","expected #{this} to not be sealed")});_.addProperty("frozen",function(){var t=A(this,"object"),e=t===Object(t)?Object.isFrozen(t):!0;this.assert(e,"expected #{this} to be frozen","expected #{this} to not be frozen")});_.addProperty("finite",function(t){var e=A(this,"object");this.assert(typeof e=="number"&&isFinite(e),"expected #{this} to be a finite number","expected #{this} to not be a finite number")});function Ny(t,e){return new _(t,e)}C(Ny,"expect");Ny.fail=function(t,e,r,n){throw arguments.length<2&&(r=t,t=void 0),r=r||"expect.fail()",new Ke(r,{actual:t,expected:e,operator:n},Ny.fail)};var C1={};Xb(C1,{Should:()=>kX,should:()=>RX});function Iw(){function t(){return this instanceof String||this instanceof Number||this instanceof Boolean||typeof Symbol=="function"&&this instanceof Symbol||typeof BigInt=="function"&&this instanceof BigInt?new _(this.valueOf(),null,t):new _(this,null,t)}C(t,"shouldGetter");function e(n){Object.defineProperty(this,"should",{value:n,enumerable:!0,configurable:!0,writable:!0})}C(e,"shouldSetter"),Object.defineProperty(Object.prototype,"should",{set:e,get:t,configurable:!0});var r={};return r.fail=function(n,i,o,s){throw arguments.length<2&&(o=n,n=void 0),o=o||"should.fail()",new Ke(o,{actual:n,expected:i,operator:s},r.fail)},r.equal=function(n,i,o){new _(n,o).to.equal(i)},r.Throw=function(n,i,o,s){new _(n,s).to.Throw(i,o)},r.exist=function(n,i){new _(n,i).to.exist},r.not={},r.not.equal=function(n,i,o){new _(n,o).to.not.equal(i)},r.not.Throw=function(n,i,o,s){new _(n,s).to.not.Throw(i,o)},r.not.exist=function(n,i){new _(n,i).to.not.exist},r.throw=r.Throw,r.not.throw=r.not.Throw,r}C(Iw,"loadShould");var RX=Iw,kX=Iw;function w(t,e){var r=new _(null,null,w,!0);r.assert(t,e,"[ negation message unavailable ]")}C(w,"assert");w.fail=function(t,e,r,n){throw arguments.length<2&&(r=t,t=void 0),r=r||"assert.fail()",new Ke(r,{actual:t,expected:e,operator:n},w.fail)};w.isOk=function(t,e){new _(t,e,w.isOk,!0).is.ok};w.isNotOk=function(t,e){new _(t,e,w.isNotOk,!0).is.not.ok};w.equal=function(t,e,r){var n=new _(t,r,w.equal,!0);n.assert(e==Ee(n,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",e,t,!0)};w.notEqual=function(t,e,r){var n=new _(t,r,w.notEqual,!0);n.assert(e!=Ee(n,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",e,t,!0)};w.strictEqual=function(t,e,r){new _(t,r,w.strictEqual,!0).to.equal(e)};w.notStrictEqual=function(t,e,r){new _(t,r,w.notStrictEqual,!0).to.not.equal(e)};w.deepEqual=w.deepStrictEqual=function(t,e,r){new _(t,r,w.deepEqual,!0).to.eql(e)};w.notDeepEqual=function(t,e,r){new _(t,r,w.notDeepEqual,!0).to.not.eql(e)};w.isAbove=function(t,e,r){new _(t,r,w.isAbove,!0).to.be.above(e)};w.isAtLeast=function(t,e,r){new _(t,r,w.isAtLeast,!0).to.be.least(e)};w.isBelow=function(t,e,r){new _(t,r,w.isBelow,!0).to.be.below(e)};w.isAtMost=function(t,e,r){new _(t,r,w.isAtMost,!0).to.be.most(e)};w.isTrue=function(t,e){new _(t,e,w.isTrue,!0).is.true};w.isNotTrue=function(t,e){new _(t,e,w.isNotTrue,!0).to.not.equal(!0)};w.isFalse=function(t,e){new _(t,e,w.isFalse,!0).is.false};w.isNotFalse=function(t,e){new _(t,e,w.isNotFalse,!0).to.not.equal(!1)};w.isNull=function(t,e){new _(t,e,w.isNull,!0).to.equal(null)};w.isNotNull=function(t,e){new _(t,e,w.isNotNull,!0).to.not.equal(null)};w.isNaN=function(t,e){new _(t,e,w.isNaN,!0).to.be.NaN};w.isNotNaN=function(t,e){new _(t,e,w.isNotNaN,!0).not.to.be.NaN};w.exists=function(t,e){new _(t,e,w.exists,!0).to.exist};w.notExists=function(t,e){new _(t,e,w.notExists,!0).to.not.exist};w.isUndefined=function(t,e){new _(t,e,w.isUndefined,!0).to.equal(void 0)};w.isDefined=function(t,e){new _(t,e,w.isDefined,!0).to.not.equal(void 0)};w.isCallable=function(t,e){new _(t,e,w.isCallable,!0).is.callable};w.isNotCallable=function(t,e){new _(t,e,w.isNotCallable,!0).is.not.callable};w.isObject=function(t,e){new _(t,e,w.isObject,!0).to.be.a("object")};w.isNotObject=function(t,e){new _(t,e,w.isNotObject,!0).to.not.be.a("object")};w.isArray=function(t,e){new _(t,e,w.isArray,!0).to.be.an("array")};w.isNotArray=function(t,e){new _(t,e,w.isNotArray,!0).to.not.be.an("array")};w.isString=function(t,e){new _(t,e,w.isString,!0).to.be.a("string")};w.isNotString=function(t,e){new _(t,e,w.isNotString,!0).to.not.be.a("string")};w.isNumber=function(t,e){new _(t,e,w.isNumber,!0).to.be.a("number")};w.isNotNumber=function(t,e){new _(t,e,w.isNotNumber,!0).to.not.be.a("number")};w.isFinite=function(t,e){new _(t,e,w.isFinite,!0).to.be.finite};w.isBoolean=function(t,e){new _(t,e,w.isBoolean,!0).to.be.a("boolean")};w.isNotBoolean=function(t,e){new _(t,e,w.isNotBoolean,!0).to.not.be.a("boolean")};w.typeOf=function(t,e,r){new _(t,r,w.typeOf,!0).to.be.a(e)};w.notTypeOf=function(t,e,r){new _(t,r,w.notTypeOf,!0).to.not.be.a(e)};w.instanceOf=function(t,e,r){new _(t,r,w.instanceOf,!0).to.be.instanceOf(e)};w.notInstanceOf=function(t,e,r){new _(t,r,w.notInstanceOf,!0).to.not.be.instanceOf(e)};w.include=function(t,e,r){new _(t,r,w.include,!0).include(e)};w.notInclude=function(t,e,r){new _(t,r,w.notInclude,!0).not.include(e)};w.deepInclude=function(t,e,r){new _(t,r,w.deepInclude,!0).deep.include(e)};w.notDeepInclude=function(t,e,r){new _(t,r,w.notDeepInclude,!0).not.deep.include(e)};w.nestedInclude=function(t,e,r){new _(t,r,w.nestedInclude,!0).nested.include(e)};w.notNestedInclude=function(t,e,r){new _(t,r,w.notNestedInclude,!0).not.nested.include(e)};w.deepNestedInclude=function(t,e,r){new _(t,r,w.deepNestedInclude,!0).deep.nested.include(e)};w.notDeepNestedInclude=function(t,e,r){new _(t,r,w.notDeepNestedInclude,!0).not.deep.nested.include(e)};w.ownInclude=function(t,e,r){new _(t,r,w.ownInclude,!0).own.include(e)};w.notOwnInclude=function(t,e,r){new _(t,r,w.notOwnInclude,!0).not.own.include(e)};w.deepOwnInclude=function(t,e,r){new _(t,r,w.deepOwnInclude,!0).deep.own.include(e)};w.notDeepOwnInclude=function(t,e,r){new _(t,r,w.notDeepOwnInclude,!0).not.deep.own.include(e)};w.match=function(t,e,r){new _(t,r,w.match,!0).to.match(e)};w.notMatch=function(t,e,r){new _(t,r,w.notMatch,!0).to.not.match(e)};w.property=function(t,e,r){new _(t,r,w.property,!0).to.have.property(e)};w.notProperty=function(t,e,r){new _(t,r,w.notProperty,!0).to.not.have.property(e)};w.propertyVal=function(t,e,r,n){new _(t,n,w.propertyVal,!0).to.have.property(e,r)};w.notPropertyVal=function(t,e,r,n){new _(t,n,w.notPropertyVal,!0).to.not.have.property(e,r)};w.deepPropertyVal=function(t,e,r,n){new _(t,n,w.deepPropertyVal,!0).to.have.deep.property(e,r)};w.notDeepPropertyVal=function(t,e,r,n){new _(t,n,w.notDeepPropertyVal,!0).to.not.have.deep.property(e,r)};w.ownProperty=function(t,e,r){new _(t,r,w.ownProperty,!0).to.have.own.property(e)};w.notOwnProperty=function(t,e,r){new _(t,r,w.notOwnProperty,!0).to.not.have.own.property(e)};w.ownPropertyVal=function(t,e,r,n){new _(t,n,w.ownPropertyVal,!0).to.have.own.property(e,r)};w.notOwnPropertyVal=function(t,e,r,n){new _(t,n,w.notOwnPropertyVal,!0).to.not.have.own.property(e,r)};w.deepOwnPropertyVal=function(t,e,r,n){new _(t,n,w.deepOwnPropertyVal,!0).to.have.deep.own.property(e,r)};w.notDeepOwnPropertyVal=function(t,e,r,n){new _(t,n,w.notDeepOwnPropertyVal,!0).to.not.have.deep.own.property(e,r)};w.nestedProperty=function(t,e,r){new _(t,r,w.nestedProperty,!0).to.have.nested.property(e)};w.notNestedProperty=function(t,e,r){new _(t,r,w.notNestedProperty,!0).to.not.have.nested.property(e)};w.nestedPropertyVal=function(t,e,r,n){new _(t,n,w.nestedPropertyVal,!0).to.have.nested.property(e,r)};w.notNestedPropertyVal=function(t,e,r,n){new _(t,n,w.notNestedPropertyVal,!0).to.not.have.nested.property(e,r)};w.deepNestedPropertyVal=function(t,e,r,n){new _(t,n,w.deepNestedPropertyVal,!0).to.have.deep.nested.property(e,r)};w.notDeepNestedPropertyVal=function(t,e,r,n){new _(t,n,w.notDeepNestedPropertyVal,!0).to.not.have.deep.nested.property(e,r)};w.lengthOf=function(t,e,r){new _(t,r,w.lengthOf,!0).to.have.lengthOf(e)};w.hasAnyKeys=function(t,e,r){new _(t,r,w.hasAnyKeys,!0).to.have.any.keys(e)};w.hasAllKeys=function(t,e,r){new _(t,r,w.hasAllKeys,!0).to.have.all.keys(e)};w.containsAllKeys=function(t,e,r){new _(t,r,w.containsAllKeys,!0).to.contain.all.keys(e)};w.doesNotHaveAnyKeys=function(t,e,r){new _(t,r,w.doesNotHaveAnyKeys,!0).to.not.have.any.keys(e)};w.doesNotHaveAllKeys=function(t,e,r){new _(t,r,w.doesNotHaveAllKeys,!0).to.not.have.all.keys(e)};w.hasAnyDeepKeys=function(t,e,r){new _(t,r,w.hasAnyDeepKeys,!0).to.have.any.deep.keys(e)};w.hasAllDeepKeys=function(t,e,r){new _(t,r,w.hasAllDeepKeys,!0).to.have.all.deep.keys(e)};w.containsAllDeepKeys=function(t,e,r){new _(t,r,w.containsAllDeepKeys,!0).to.contain.all.deep.keys(e)};w.doesNotHaveAnyDeepKeys=function(t,e,r){new _(t,r,w.doesNotHaveAnyDeepKeys,!0).to.not.have.any.deep.keys(e)};w.doesNotHaveAllDeepKeys=function(t,e,r){new _(t,r,w.doesNotHaveAllDeepKeys,!0).to.not.have.all.deep.keys(e)};w.throws=function(t,e,r,n){(typeof e=="string"||e instanceof RegExp)&&(r=e,e=null);var i=new _(t,n,w.throws,!0).to.throw(e,r);return Ee(i,"object")};w.doesNotThrow=function(t,e,r,n){(typeof e=="string"||e instanceof RegExp)&&(r=e,e=null),new _(t,n,w.doesNotThrow,!0).to.not.throw(e,r)};w.operator=function(t,e,r,n){var i;switch(e){case"==":i=t==r;break;case"===":i=t===r;break;case">":i=t>r;break;case">=":i=t>=r;break;case"<":i=t<r;break;case"<=":i=t<=r;break;case"!=":i=t!=r;break;case"!==":i=t!==r;break;default:throw n=n&&n+": ",new Ke(n+'Invalid operator "'+e+'"',void 0,w.operator)}var o=new _(i,n,w.operator,!0);o.assert(Ee(o,"object")===!0,"expected "+He(t)+" to be "+e+" "+He(r),"expected "+He(t)+" to not be "+e+" "+He(r))};w.closeTo=function(t,e,r,n){new _(t,n,w.closeTo,!0).to.be.closeTo(e,r)};w.approximately=function(t,e,r,n){new _(t,n,w.approximately,!0).to.be.approximately(e,r)};w.sameMembers=function(t,e,r){new _(t,r,w.sameMembers,!0).to.have.same.members(e)};w.notSameMembers=function(t,e,r){new _(t,r,w.notSameMembers,!0).to.not.have.same.members(e)};w.sameDeepMembers=function(t,e,r){new _(t,r,w.sameDeepMembers,!0).to.have.same.deep.members(e)};w.notSameDeepMembers=function(t,e,r){new _(t,r,w.notSameDeepMembers,!0).to.not.have.same.deep.members(e)};w.sameOrderedMembers=function(t,e,r){new _(t,r,w.sameOrderedMembers,!0).to.have.same.ordered.members(e)};w.notSameOrderedMembers=function(t,e,r){new _(t,r,w.notSameOrderedMembers,!0).to.not.have.same.ordered.members(e)};w.sameDeepOrderedMembers=function(t,e,r){new _(t,r,w.sameDeepOrderedMembers,!0).to.have.same.deep.ordered.members(e)};w.notSameDeepOrderedMembers=function(t,e,r){new _(t,r,w.notSameDeepOrderedMembers,!0).to.not.have.same.deep.ordered.members(e)};w.includeMembers=function(t,e,r){new _(t,r,w.includeMembers,!0).to.include.members(e)};w.notIncludeMembers=function(t,e,r){new _(t,r,w.notIncludeMembers,!0).to.not.include.members(e)};w.includeDeepMembers=function(t,e,r){new _(t,r,w.includeDeepMembers,!0).to.include.deep.members(e)};w.notIncludeDeepMembers=function(t,e,r){new _(t,r,w.notIncludeDeepMembers,!0).to.not.include.deep.members(e)};w.includeOrderedMembers=function(t,e,r){new _(t,r,w.includeOrderedMembers,!0).to.include.ordered.members(e)};w.notIncludeOrderedMembers=function(t,e,r){new _(t,r,w.notIncludeOrderedMembers,!0).to.not.include.ordered.members(e)};w.includeDeepOrderedMembers=function(t,e,r){new _(t,r,w.includeDeepOrderedMembers,!0).to.include.deep.ordered.members(e)};w.notIncludeDeepOrderedMembers=function(t,e,r){new _(t,r,w.notIncludeDeepOrderedMembers,!0).to.not.include.deep.ordered.members(e)};w.oneOf=function(t,e,r){new _(t,r,w.oneOf,!0).to.be.oneOf(e)};w.isIterable=function(t,e){if(t==null||!t[Symbol.iterator])throw e=e?`${e} expected ${He(t)} to be an iterable`:`expected ${He(t)} to be an iterable`,new Ke(e,void 0,w.isIterable)};w.changes=function(t,e,r,n){arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,w.changes,!0).to.change(e,r)};w.changesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,w.changesBy,!0).to.change(e,r).by(n)};w.doesNotChange=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,w.doesNotChange,!0).to.not.change(e,r)};w.changesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,w.changesButNotBy,!0).to.change(e,r).but.not.by(n)};w.increases=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,w.increases,!0).to.increase(e,r)};w.increasesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,w.increasesBy,!0).to.increase(e,r).by(n)};w.doesNotIncrease=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,w.doesNotIncrease,!0).to.not.increase(e,r)};w.increasesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,w.increasesButNotBy,!0).to.increase(e,r).but.not.by(n)};w.decreases=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,w.decreases,!0).to.decrease(e,r)};w.decreasesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,w.decreasesBy,!0).to.decrease(e,r).by(n)};w.doesNotDecrease=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,w.doesNotDecrease,!0).to.not.decrease(e,r)};w.doesNotDecreaseBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);return new _(t,i,w.doesNotDecreaseBy,!0).to.not.decrease(e,r).by(n)};w.decreasesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,w.decreasesButNotBy,!0).to.decrease(e,r).but.not.by(n)};w.ifError=function(t){if(t)throw t};w.isExtensible=function(t,e){new _(t,e,w.isExtensible,!0).to.be.extensible};w.isNotExtensible=function(t,e){new _(t,e,w.isNotExtensible,!0).to.not.be.extensible};w.isSealed=function(t,e){new _(t,e,w.isSealed,!0).to.be.sealed};w.isNotSealed=function(t,e){new _(t,e,w.isNotSealed,!0).to.not.be.sealed};w.isFrozen=function(t,e){new _(t,e,w.isFrozen,!0).to.be.frozen};w.isNotFrozen=function(t,e){new _(t,e,w.isNotFrozen,!0).to.not.be.frozen};w.isEmpty=function(t,e){new _(t,e,w.isEmpty,!0).to.be.empty};w.isNotEmpty=function(t,e){new _(t,e,w.isNotEmpty,!0).to.not.be.empty};C(function t(e,r){return w[r]=w[e],t},"alias")("isOk","ok")("isNotOk","notOk")("throws","throw")("throws","Throw")("isExtensible","extensible")("isNotExtensible","notExtensible")("isSealed","sealed")("isNotSealed","notSealed")("isFrozen","frozen")("isNotFrozen","notFrozen")("isEmpty","empty")("isNotEmpty","notEmpty")("isCallable","isFunction")("isNotCallable","isNotFunction");var qC=[];function PX(t){let e={AssertionError:Ke,util:Py,config:Dr,expect:Ny,assert:w,Assertion:_,...C1};return~qC.indexOf(t)||(t(e,Py),qC.push(t)),e}C(PX,"use");var zp=class{constructor(e,r,n){this._lineNumber=e,this._text=r,this._isLastLine=n}get lineNumber(){return this._lineNumber}get text(){return this._text}get range(){return new $(this._lineNumber,0,this._lineNumber,this._text.length)}get rangeIncludingLineBreak(){return this._isLastLine?this.range:new $(this._lineNumber,0,this._lineNumber+1,0)}get rangeTrimmed(){let e=/^(\s*)/.exec(this._text)[1].length;if(e===this._text.length)return;let r=this.text.trimEnd().length;return new $(this._lineNumber,e,this._lineNumber,r)}get isEmptyOrWhitespace(){return this.rangeTrimmed==null}};var N1=Sr(require("node:path"),1),zy=class{get uri(){return this._uri}get filename(){return N1.default.basename(this._uri.path)}get languageId(){return this._languageId}get version(){return this._version}get lineCount(){return this._lineCount}get range(){let{end:e}=this.lineAt(this.lineCount-1).range;return new $(0,0,e.line,e.character)}get eol(){return this._eol===`
`?"LF":"CRLF"}constructor(e,r,n,i,o){this._uri=e,this._languageId=r,this._version=n,this._eol=i,this._lines=o,this._lineCount=o.length,this._lineStarts=null,this._cachedTextValue=null}update(e){this._lines=e,this._lineCount=e.length,this._lineStarts=null,this._cachedTextValue=null}lineAt(e){let r;if(e instanceof ue?r=e.line:typeof e=="number"&&(r=e),typeof r!="number"||r<0||Math.floor(r)!==r)throw new Error("Illegal value for `line`");return r=Math.min(r,this._lines.length-1),new zp(r,this._lines[r],r===this._lines.length-1)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.line-1)+e.character}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();let r=this._lineStarts.getIndexOf(e),n=this._lines[r.index].length;return new ue(r.index,Math.min(r.remainder,n))}getText(e){if(e===void 0)return this._cachedTextValue==null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue;if(e=this._validateRange(e),e.isEmpty)return"";if(e.isSingleLine)return this._lines[e.start.line].substring(e.start.character,e.end.character);let r=this._eol,n=e.start.line,i=e.end.line,o=[];o.push(this._lines[n].substring(e.start.character));for(let s=n+1;s<i;s++)o.push(this._lines[s]);return o.push(this._lines[i].substring(0,e.end.character)),o.join(r)}_validateRange(e){if(!(e instanceof $))throw new Error("Invalid argument");let r=this._validatePosition(e.start),n=this._validatePosition(e.end);return r===e.start&&n===e.end?e:new $(r.line,r.character,n.line,n.character)}_validatePosition(e){if(!(e instanceof ue))throw new Error("Invalid argument");if(this._lines.length===0)return e.with(0,0);let{line:r,character:n}=e,i=!1;if(r<0)r=0,n=0,i=!0;else if(r>=this._lines.length)r=this._lines.length-1,n=this._lines[r].length,i=!0;else{let o=this._lines[r].length;n<0?(n=0,i=!0):n>o&&(n=o,i=!0)}return i?new ue(r,n):e}_ensureLineStarts(){if(!this._lineStarts){let e=this._eol.length,r=this._lines.length,n=new Uint32Array(r);for(let i=0;i<r;i++)n[i]=this._lines[i].length+e;this._lineStarts=new Cw(n)}}};function DX(t){if(t<0)return 0;let e=4294967295;return t>e?e:t|0}var Cw=class{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}getCount(){return this.values.length}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=DX(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let r=this.prefixSumValidIndex[0]+1;r===0&&(this.prefixSum[0]=this.values[0],r++),e>=this.values.length&&(e=this.values.length-1);for(let n=r;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let r=0,n=this.values.length-1,i=0,o=0,s=0;for(;r<=n;)if(i=r+(n-r)/2|0,o=this.prefixSum[i],s=o-this.values[i],e<s)n=i-1;else if(e>=o)r=i+1;else break;return new Nw(i,e-s)}},Nw=class{constructor(e,r){this.index=e;this.remainder=r;this._prefixSumIndexOfResultBrand=void 0;this.index=e,this.remainder=r}};var Gy=class{constructor(e){this.client=e;this.cursorlessVersion="0.0.0";this.workspaceFolders=void 0;this.disposables=[];this.quickPickReturnValue=void 0;this.onDidCloseTextDocument=Gp;this.onDidChangeActiveTextEditor=Gp;this.onDidChangeVisibleTextEditors=Gp;this.onDidChangeTextEditorSelection=Gp;this.onDidChangeTextEditorVisibleRanges=Gp;this.configuration=new Tp,this.keyValueStore=new vp,this.messages=new bp,this.clipboard=new xp(this.client),this.capabilities=new ay,this.editorMap=new Map,this.documentMap=new Map,this.activeWindow=void 0,this.activeBuffer=void 0}async init(){let e=await TI(this.client);this.assetsRoot_=Ow.default.join(e,"assets"),this.cursorlessNeovimPath=Ow.default.join(e,"node","cursorless-neovim")}async showQuickPick(e,r){throw Error("showQuickPick Not implemented")}async setHighlightRanges(e,r,n){throw Error("setHighlightRanges Not implemented")}async flashRanges(e){console.debug("flashRanges Not implemented")}get assetsRoot(){if(this.assetsRoot_==null)throw Error("Field `assetsRoot` has not yet been mocked");return this.assetsRoot_}get runMode(){return OC()}get activeTextEditor(){return this.getActiveTextEditor()}get activeEditableTextEditor(){return this.getActiveTextEditor()}getActiveTextEditor(){let e=this.activeWindow?this.getTextEditor(this.activeWindow):void 0;return e===void 0&&console.debug("getActiveTextEditor: editor is undefined"),e}getTextEditor(e){for(let[r,n]of this.editorMap)if(r.id===e.id)return n}getTextDocument(e){for(let[r,n]of this.documentMap)if(r.id===e.id)return n}get visibleTextEditors(){return Array.from(this.editorMap.values())}get visibleNotebookEditors(){return[]}getEditableTextEditor(e){return e}async findInDocument(e,r){throw Error("findInDocument Not implemented")}async findInWorkspace(e){throw Error("findInWorkspace Not implemented")}async openTextDocument(e){throw Error("openTextDocument Not implemented")}async openUntitledTextDocument(e){throw Error("openUntitledTextDocument Not implemented")}async showInputBox(e){throw Error("TextDocumentChangeEvent Not implemented")}async executeCommand(e,...r){throw new Error("executeCommand Method not implemented.")}onDidChangeTextDocument(e){return MI(e)}onDidOpenTextDocument(e,r,n){return DI(e,r,n)}async updateTextEditor(e=!1){let r=await this.client.window,n=await r.buffer,i=await n.lines,o=i;i.length>=30&&(o=i.slice(0,15).concat(["..."]).concat(i.slice(-15))),console.debug(`updateTextEditor(): window:${r.id}, buffer:${n.id}, lines=${JSON.stringify(o)}`);let s,l;e?(s=[],l=[]):(s=await iy(r,this.client),l=await SI(r,this.client,i));let p=this.toNeovimEditor(r,n,i,l,s);return Kr().emitEvent("onDidOpenTextDocument",p.document),p}toNeovimEditor(e,r,n,i,o){let s=this.getTextDocument(r),l=this.getTextEditor(e);return s?(console.debug(`toNeovimEditor(): updating document: buffer=${r.id}`),s.update(n)):(console.debug(`toNeovimEditor(): creating new document: buffer=${r.id}`),s=new zy(OI.parse(`neovim://${r.id}`),"plaintext",1,`
`,n),this.documentMap.set(r,s)),l?(console.debug(`toNeovimEditor(): updating editor: window=${e.id}`),l.updateDocument(i,o,s)):(console.debug(`toNeovimEditor(): creating new editor: window=${e.id}`),l=new cy(bA(),this.client,this,e,s,i,o),this.editorMap.set(e,l)),this.activeBuffer=r,this.activeWindow=e,this.activeTextEditor}handleCommandError(e){EI(this.client,e.message)}disposeOnExit(...e){return this.disposables.push(...e),()=>(0,O1.pull)(this.disposables,...e)}};function Gp(){return{dispose(){}}}var Ky=class{constructor(e){this.client=e;this.signals={prePhrase:{getVersion:async()=>null}}}async getFocusedElementType(){let e=await this.client.mode;return e.mode==="t"||e.mode==="nt"?"terminal":"textEditor"}};var IX=BigInt(1e9);function L1(t,e=BigInt(1e6)){return Number(t*e/IX)/Number(e)}async function Qy(t,e=[],r=[],n,i,o,s,l){let p={documentContents:n.document.getText(),selections:n.selections.map(qk)};o!=null&&(p.marks=o),l!=null&&(p.metadata=l),e.includes("clipboard")||(p.clipboard=await i.clipboard.readText()),e.includes("visibleRanges")||(p.visibleRanges=n.visibleRanges.map(ll));for(let u of Ts){let m=t?.get(u),d=`${u}Mark`;m!=null&&!e.includes(d)&&(p[d]=m.map(g=>g.toPlainObject()))}if(r.includes("timeOffsetSeconds")){let u=s?.startTimestamp;if(u==null)throw new Error("No start timestamp provided but time offset was requested");let m=process.hrtime.bigint()-u;p.timeOffsetSeconds=L1(m)}return p}var CX=Sr(Dl(),1);function U1(t,e,r,n,i,o,s,l){return{commandServerApi:t,ide:i,neovimIDE:n,injectIde:s,scopeProvider:o,takeSnapshot(p,u,m,d,g){return Qy(e,p,u,m,d,g,void 0,void 0)},setStoredTarget(p,u,m){e.set(u,m?.map(d=>hI(p,d)))},hatTokenMap:r,runIntegrationTests:l}}async function H1(t,e,r,n){let i={[yS]:async(...o)=>{(await t.mode).mode==="t"&&wI(t);try{await e.updateTextEditor();let l=await r.runCommandSafe(...o),p=Vf(o);if(await n.getFocusedElementType()==="terminal"&&ia(p)){let m=l;"fallback"in m&&m.fallback.action==="insert"&&_I(t)}return l}catch(l){if(e.runMode!=="test"){let p=l;console.error(p.stack),e.handleCommandError(p)}throw l}},"cursorless.repeatPreviousCommand":Me,"cursorless.showCheatsheet":Me,"cursorless.internal.updateCheatsheetDefaults":Me,"cursorless.recordTestCase":Me,"cursorless.recordOneTestCaseThenPause":Me,"cursorless.pauseRecording":Me,"cursorless.resumeRecording":Me,"cursorless.takeSnapshot":Me,"cursorless.recordScopeTests.showUnimplementedFacets":Me,"cursorless.recordScopeTests.saveActiveDocument":Me,"cursorless.showQuickPick":Me,"cursorless.showDocumentation":Me,"cursorless.showInstallationDependencies":Me,"cursorless.migrateSnippets":Me,"cursorless.private.logQuickActions":Me,"cursorless.toggleDecorations":Me,"cursorless.recomputeDecorationStyles":Me,"cursorless.showScopeVisualizer":Me,"cursorless.hideScopeVisualizer":Me,"cursorless.analyzeCommandHistory":Me,"cursorless.keyboard.escape":Me,"cursorless.keyboard.targeted.targetHat":Me,"cursorless.keyboard.targeted.targetScope":Me,"cursorless.keyboard.targeted.targetSelection":Me,"cursorless.keyboard.targeted.clearTarget":Me,"cursorless.keyboard.targeted.runActionOnTarget":Me,"cursorless.keyboard.modal.modeOn":Me,"cursorless.keyboard.modal.modeOff":Me,"cursorless.keyboard.modal.modeToggle":Me,"cursorless.keyboard.undoTarget":Me,"cursorless.keyboard.redoTarget":Me,"cursorless.tutorial.start":Me,"cursorless.tutorial.next":Me,"cursorless.tutorial.previous":Me,"cursorless.tutorial.restart":Me,"cursorless.tutorial.resume":Me,"cursorless.tutorial.list":Me,"cursorless.documentationOpened":Me};Object.entries(i).map(([o,s])=>Kr().registerCommand(o,s))}async function Me(...t){console.debug(`dummyCommandHandler(): args=${t}`)}async function V1(t){let e=t.nvim,r=new Gy(e);await r.init();let n=r.runMode==="production"?r:new Af(r,new Rf,r.runMode==="test",void 0),i=new Wu,o=new Ky(e),s=r.runMode==="test"?i:o,{commandApi:l,storedTargets:p,hatTokenMap:u,scopeProvider:m,injectIde:d,runIntegrationTests:g}=await dI({ide:n,commandServerApi:s});await H1(e,r,l,s);let x={testHelpers:r.runMode==="test"?U1(i,p,u,r,n,m,d,g):void 0};Kr().registerExtensionApi(yI,x),console.log("activate(): Cursorless extension loaded")}function B1(t){t.setOptions({dev:!1}),t.registerFunction("CursorlessLoadExtension",async()=>await NX(t),{sync:!1})}async function NX(t){console.log("==============================================================================================="),console.log("loadExtension(cursorless-neovim): start"),await V1(t),console.log("loadExtension(cursorless-neovim): done")}
/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)

itertools/dist/index.js:
  (* istanbul ignore else -- @preserve *)
  (* istanbul ignore if -- @preserve *)

chai/chai.js:
  (*!
   * Chai - flag utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - test utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - expectTypes utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getActual utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - message composition utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - transferFlags utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * http://chaijs.com
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - isProxyEnabled helper
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addLengthGuard utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getProperties utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - proxify utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addChainingMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteChainableMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - compareByInspect utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getOwnEnumerablePropertySymbols utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getOwnEnumerableProperties utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - isNaN utility
   * Copyright(c) 2012-2015 Sakthipriyan Vairamani <thechargingvolcano@gmail.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*! Bundled license information:
  
  deep-eql/index.js:
    (*!
     * deep-eql
     * Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>
     * MIT Licensed
     *)
    (*!
     * Check to see if the MemoizeMap has recorded a result of the two operands
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {MemoizeMap} memoizeMap
     * @returns {Boolean|null} result
    *)
    (*!
     * Set the result of the equality into the MemoizeMap
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {MemoizeMap} memoizeMap
     * @param {Boolean} result
    *)
    (*!
     * Primary Export
     *)
    (*!
     * The main logic of the `deepEqual` function.
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Object} [options] (optional) Additional options
     * @param {Array} [options.comparator] (optional) Override default algorithm, determining custom equality.
     * @param {Array} [options.memoize] (optional) Provide a custom memoization object which will cache the results of
        complex objects for a speed boost. By passing `false` you can disable memoization, but this will cause circular
        references to blow the stack.
     * @return {Boolean} equal match
    *)
    (*!
     * Compare two Regular Expressions for equality.
     *
     * @param {RegExp} leftHandOperand
     * @param {RegExp} rightHandOperand
     * @return {Boolean} result
     *)
    (*!
     * Compare two Sets/Maps for equality. Faster than other equality functions.
     *
     * @param {Set} leftHandOperand
     * @param {Set} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Simple equality for flat iterable objects such as Arrays, TypedArrays or Node.js buffers.
     *
     * @param {Iterable} leftHandOperand
     * @param {Iterable} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Simple equality for generator objects such as those returned by generator functions.
     *
     * @param {Iterable} leftHandOperand
     * @param {Iterable} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Determine if the given object has an @@iterator function.
     *
     * @param {Object} target
     * @return {Boolean} `true` if the object has an @@iterator function.
     *)
    (*!
     * Gets all iterator entries from the given Object. If the Object has no @@iterator function, returns an empty array.
     * This will consume the iterator - which could have side effects depending on the @@iterator implementation.
     *
     * @param {Object} target
     * @returns {Array} an array of entries from the @@iterator function
     *)
    (*!
     * Gets all entries from a Generator. This will consume the generator - which could have side effects.
     *
     * @param {Generator} target
     * @returns {Array} an array of entries from the Generator.
     *)
    (*!
     * Gets all own and inherited enumerable keys from a target.
     *
     * @param {Object} target
     * @returns {Array} an array of own and inherited enumerable keys from the target.
     *)
    (*!
     * Determines if two objects have matching values, given a set of keys. Defers to deepEqual for the equality check of
     * each key. If any value of the given key is not equal, the function will return false (early).
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Array} keys An array of keys to compare the values of leftHandOperand and rightHandOperand against
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Recursively check the equality of two Objects. Once basic sameness has been established it will defer to `deepEqual`
     * for each enumerable key in the object.
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Returns true if the argument is a primitive.
     *
     * This intentionally returns true for all objects that can be compared by reference,
     * including functions and symbols.
     *
     * @param {Mixed} value
     * @return {Boolean} result
     *)
  *)
*/
