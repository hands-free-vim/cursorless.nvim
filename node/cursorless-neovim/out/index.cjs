"use strict";var SB=Object.create;var Fu=Object.defineProperty;var vB=Object.getOwnPropertyDescriptor;var bB=Object.getOwnPropertyNames;var wB=Object.getPrototypeOf,_B=Object.prototype.hasOwnProperty;var Ke=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),EB=(t,e)=>{for(var r in e)Fu(t,r,{get:e[r],enumerable:!0})},uE=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of bB(e))!_B.call(t,i)&&i!==r&&Fu(t,i,{get:()=>e[i],enumerable:!(n=vB(e,i))||n.enumerable});return t};var yr=(t,e,r)=>(r=t!=null?SB(wB(t)):{},uE(e||!t||!t.__esModule?Fu(r,"default",{value:t,enumerable:!0}):r,t)),RB=t=>uE(Fu({},"__esModule",{value:!0}),t);var YP=Ke(qf=>{"use strict";Object.defineProperty(qf,"__esModule",{value:!0});qf.default=void 0;var sye=qf.default="ffffffff-ffff-ffff-ffff-ffffffffffff"});var XP=Ke(zf=>{"use strict";Object.defineProperty(zf,"__esModule",{value:!0});zf.default=void 0;var cye=zf.default="00000000-0000-0000-0000-000000000000"});var JP=Ke(Gf=>{"use strict";Object.defineProperty(Gf,"__esModule",{value:!0});Gf.default=void 0;var lye=Gf.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i});var xp=Ke(Kf=>{"use strict";Object.defineProperty(Kf,"__esModule",{value:!0});Kf.default=void 0;var j4=q4(JP());function q4(t){return t&&t.__esModule?t:{default:t}}function z4(t){return typeof t=="string"&&j4.default.test(t)}var fye=Kf.default=z4});var Tp=Ke(Qf=>{"use strict";Object.defineProperty(Qf,"__esModule",{value:!0});Qf.default=void 0;var G4=K4(xp());function K4(t){return t&&t.__esModule?t:{default:t}}function Q4(t){if(!(0,G4.default)(t))throw TypeError("Invalid UUID");let e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}var mye=Qf.default=Q4});var Pi=Ke(Sp=>{"use strict";Object.defineProperty(Sp,"__esModule",{value:!0});Sp.default=void 0;Sp.unsafeStringify=eM;var Z4=Y4(xp());function Y4(t){return t&&t.__esModule?t:{default:t}}var Ut=[];for(let t=0;t<256;++t)Ut.push((t+256).toString(16).slice(1));function eM(t,e=0){return(Ut[t[e+0]]+Ut[t[e+1]]+Ut[t[e+2]]+Ut[t[e+3]]+"-"+Ut[t[e+4]]+Ut[t[e+5]]+"-"+Ut[t[e+6]]+Ut[t[e+7]]+"-"+Ut[t[e+8]]+Ut[t[e+9]]+"-"+Ut[t[e+10]]+Ut[t[e+11]]+Ut[t[e+12]]+Ut[t[e+13]]+Ut[t[e+14]]+Ut[t[e+15]]).toLowerCase()}function X4(t,e=0){let r=eM(t,e);if(!(0,Z4.default)(r))throw TypeError("Stringified UUID is invalid");return r}var gye=Sp.default=X4});var Xf=Ke(hS=>{"use strict";Object.defineProperty(hS,"__esModule",{value:!0});hS.default=t6;var J4=e6(require("node:crypto"));function e6(t){return t&&t.__esModule?t:{default:t}}var Yf=new Uint8Array(256),Zf=Yf.length;function t6(){return Zf>Yf.length-16&&(J4.default.randomFillSync(Yf),Zf=0),Yf.slice(Zf,Zf+=16)}});var TS=Ke(ed=>{"use strict";Object.defineProperty(ed,"__esModule",{value:!0});ed.default=void 0;var r6=i6(Xf()),n6=Pi();function i6(t){return t&&t.__esModule?t:{default:t}}var gS,Jf,yS=0,xS=0;function o6(t,e,r){let n=e&&r||0,i=e||new Array(16);t=t||{};let o=t.node,a=t.clockseq;if(t._v6||(o||(o=gS),a==null&&(a=Jf)),o==null||a==null){let g=t.random||(t.rng||r6.default)();o==null&&(o=[g[0],g[1],g[2],g[3],g[4],g[5]],!gS&&!t._v6&&(o[0]|=1,gS=o)),a==null&&(a=(g[6]<<8|g[7])&16383,Jf===void 0&&!t._v6&&(Jf=a))}let p=t.msecs!==void 0?t.msecs:Date.now(),l=t.nsecs!==void 0?t.nsecs:xS+1,u=p-yS+(l-xS)/1e4;if(u<0&&t.clockseq===void 0&&(a=a+1&16383),(u<0||p>yS)&&t.nsecs===void 0&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");yS=p,xS=l,Jf=a,p+=122192928e5;let d=((p&268435455)*1e4+l)%4294967296;i[n++]=d>>>24&255,i[n++]=d>>>16&255,i[n++]=d>>>8&255,i[n++]=d&255;let m=p/4294967296*1e4&268435455;i[n++]=m>>>8&255,i[n++]=m&255,i[n++]=m>>>24&15|16,i[n++]=m>>>16&255,i[n++]=a>>>8|128,i[n++]=a&255;for(let g=0;g<6;++g)i[n+g]=o[g];return e||(0,n6.unsafeStringify)(i)}var Tye=ed.default=o6});var vS=Ke(SS=>{"use strict";Object.defineProperty(SS,"__esModule",{value:!0});SS.default=p6;var s6=c6(Tp()),a6=Pi();function c6(t){return t&&t.__esModule?t:{default:t}}function p6(t){let e=typeof t=="string"?(0,s6.default)(t):t,r=l6(e);return typeof t=="string"?(0,a6.unsafeStringify)(r):r}function l6(t,e=!1){return Uint8Array.of((t[6]&15)<<4|t[7]>>4&15,(t[7]&15)<<4|(t[4]&240)>>4,(t[4]&15)<<4|(t[5]&240)>>4,(t[5]&15)<<4|(t[0]&240)>>4,(t[0]&15)<<4|(t[1]&240)>>4,(t[1]&15)<<4|(t[2]&240)>>4,96|t[2]&15,t[3],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}});var bS=Ke(os=>{"use strict";Object.defineProperty(os,"__esModule",{value:!0});os.URL=os.DNS=void 0;os.default=y6;var u6=Pi(),f6=d6(Tp());function d6(t){return t&&t.__esModule?t:{default:t}}function m6(t){t=unescape(encodeURIComponent(t));let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}var h6=os.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",g6=os.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function y6(t,e,r){function n(i,o,a,p){var l;if(typeof i=="string"&&(i=m6(i)),typeof o=="string"&&(o=(0,f6.default)(o)),((l=o)===null||l===void 0?void 0:l.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+i.length);if(u.set(o),u.set(i,o.length),u=r(u),u[6]=u[6]&15|e,u[8]=u[8]&63|128,a){p=p||0;for(let d=0;d<16;++d)a[p+d]=u[d];return a}return(0,u6.unsafeStringify)(u)}try{n.name=t}catch{}return n.DNS=h6,n.URL=g6,n}});var tM=Ke(td=>{"use strict";Object.defineProperty(td,"__esModule",{value:!0});td.default=void 0;var x6=T6(require("node:crypto"));function T6(t){return t&&t.__esModule?t:{default:t}}function S6(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),x6.default.createHash("md5").update(t).digest()}var wye=td.default=S6});var nM=Ke(rd=>{"use strict";Object.defineProperty(rd,"__esModule",{value:!0});rd.default=void 0;var v6=rM(bS()),b6=rM(tM());function rM(t){return t&&t.__esModule?t:{default:t}}var w6=(0,v6.default)("v3",48,b6.default),Eye=rd.default=w6});var iM=Ke(nd=>{"use strict";Object.defineProperty(nd,"__esModule",{value:!0});nd.default=void 0;var _6=E6(require("node:crypto"));function E6(t){return t&&t.__esModule?t:{default:t}}var kye=nd.default={randomUUID:_6.default.randomUUID}});var aM=Ke(id=>{"use strict";Object.defineProperty(id,"__esModule",{value:!0});id.default=void 0;var oM=sM(iM()),R6=sM(Xf()),k6=Pi();function sM(t){return t&&t.__esModule?t:{default:t}}function P6(t,e,r){if(oM.default.randomUUID&&!e&&!t)return oM.default.randomUUID();t=t||{};let n=t.random||(t.rng||R6.default)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return(0,k6.unsafeStringify)(n)}var Mye=id.default=P6});var cM=Ke(od=>{"use strict";Object.defineProperty(od,"__esModule",{value:!0});od.default=void 0;var M6=A6(require("node:crypto"));function A6(t){return t&&t.__esModule?t:{default:t}}function D6(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),M6.default.createHash("sha1").update(t).digest()}var Dye=od.default=D6});var lM=Ke(sd=>{"use strict";Object.defineProperty(sd,"__esModule",{value:!0});sd.default=void 0;var I6=pM(bS()),F6=pM(cM());function pM(t){return t&&t.__esModule?t:{default:t}}var C6=(0,I6.default)("v5",80,F6.default),Fye=sd.default=C6});var fM=Ke(wS=>{"use strict";Object.defineProperty(wS,"__esModule",{value:!0});wS.default=U6;var O6=Pi(),N6=uM(TS()),L6=uM(vS());function uM(t){return t&&t.__esModule?t:{default:t}}function U6(t={},e,r=0){let n=(0,N6.default)({...t,_v6:!0},new Uint8Array(16));if(n=(0,L6.default)(n),e){for(let i=0;i<16;i++)e[r+i]=n[i];return e}return(0,O6.unsafeStringify)(n)}});var dM=Ke(_S=>{"use strict";Object.defineProperty(_S,"__esModule",{value:!0});_S.default=W6;var H6=B6(Tp()),V6=Pi();function B6(t){return t&&t.__esModule?t:{default:t}}function W6(t){let e=typeof t=="string"?(0,H6.default)(t):t,r=$6(e);return typeof t=="string"?(0,V6.unsafeStringify)(r):r}function $6(t){return Uint8Array.of((t[3]&15)<<4|t[4]>>4&15,(t[4]&15)<<4|(t[5]&240)>>4,(t[5]&15)<<4|t[6]&15,t[7],(t[1]&15)<<4|(t[2]&240)>>4,(t[2]&15)<<4|(t[3]&240)>>4,16|(t[0]&240)>>4,(t[0]&15)<<4|(t[1]&240)>>4,t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}});var gM=Ke(ad=>{"use strict";Object.defineProperty(ad,"__esModule",{value:!0});ad.default=void 0;var j6=z6(Xf()),q6=Pi();function z6(t){return t&&t.__esModule?t:{default:t}}var mM=null,hM=null,Dn=0;function G6(t,e,r){t=t||{};let n=e&&r||0,i=e||new Uint8Array(16),o=t.random||(t.rng||j6.default)(),a=t.msecs!==void 0?t.msecs:Date.now(),p=t.seq!==void 0?t.seq:null,l=hM,u=mM;return a>Dn&&t.msecs===void 0&&(Dn=a,p!==null&&(l=null,u=null)),p!==null&&(p>2147483647&&(p=2147483647),l=p>>>19&4095,u=p&524287),(l===null||u===null)&&(l=o[6]&127,l=l<<8|o[7],u=o[8]&63,u=u<<8|o[9],u=u<<5|o[10]>>>3),a+1e4>Dn&&p===null?++u>524287&&(u=0,++l>4095&&(l=0,Dn++)):Dn=a,hM=l,mM=u,i[n++]=Dn/1099511627776&255,i[n++]=Dn/4294967296&255,i[n++]=Dn/16777216&255,i[n++]=Dn/65536&255,i[n++]=Dn/256&255,i[n++]=Dn&255,i[n++]=l>>>4&15|112,i[n++]=l&255,i[n++]=u>>>13&63|128,i[n++]=u>>>5&255,i[n++]=u<<3&255|o[10]&7,i[n++]=o[11],i[n++]=o[12],i[n++]=o[13],i[n++]=o[14],i[n++]=o[15],e||(0,q6.unsafeStringify)(i)}var Lye=ad.default=G6});var yM=Ke(cd=>{"use strict";Object.defineProperty(cd,"__esModule",{value:!0});cd.default=void 0;var K6=Q6(xp());function Q6(t){return t&&t.__esModule?t:{default:t}}function Z6(t){if(!(0,K6.default)(t))throw TypeError("Invalid UUID");return parseInt(t.slice(14,15),16)}var Hye=cd.default=Z6});var xM=Ke(Gt=>{"use strict";Object.defineProperty(Gt,"__esModule",{value:!0});Object.defineProperty(Gt,"MAX",{enumerable:!0,get:function(){return Y6.default}});Object.defineProperty(Gt,"NIL",{enumerable:!0,get:function(){return X6.default}});Object.defineProperty(Gt,"parse",{enumerable:!0,get:function(){return J6.default}});Object.defineProperty(Gt,"stringify",{enumerable:!0,get:function(){return e9.default}});Object.defineProperty(Gt,"v1",{enumerable:!0,get:function(){return t9.default}});Object.defineProperty(Gt,"v1ToV6",{enumerable:!0,get:function(){return r9.default}});Object.defineProperty(Gt,"v3",{enumerable:!0,get:function(){return n9.default}});Object.defineProperty(Gt,"v4",{enumerable:!0,get:function(){return i9.default}});Object.defineProperty(Gt,"v5",{enumerable:!0,get:function(){return o9.default}});Object.defineProperty(Gt,"v6",{enumerable:!0,get:function(){return s9.default}});Object.defineProperty(Gt,"v6ToV1",{enumerable:!0,get:function(){return a9.default}});Object.defineProperty(Gt,"v7",{enumerable:!0,get:function(){return c9.default}});Object.defineProperty(Gt,"validate",{enumerable:!0,get:function(){return p9.default}});Object.defineProperty(Gt,"version",{enumerable:!0,get:function(){return l9.default}});var Y6=wr(YP()),X6=wr(XP()),J6=wr(Tp()),e9=wr(Pi()),t9=wr(TS()),r9=wr(vS()),n9=wr(nM()),i9=wr(aM()),o9=wr(lM()),s9=wr(fM()),a9=wr(dM()),c9=wr(gM()),p9=wr(xp()),l9=wr(yM());function wr(t){return t&&t.__esModule?t:{default:t}}});var bM=Ke((vM,ld)=>{(function(t,e){typeof ld=="object"&&ld.exports?ld.exports=e():t.nearley=e()})(vM,function(){function t(l,u,d){return this.id=++t.highestId,this.name=l,this.symbols=u,this.postprocess=d,this}t.highestId=0,t.prototype.toString=function(l){var u=typeof l>"u"?this.symbols.map(p).join(" "):this.symbols.slice(0,l).map(p).join(" ")+" \u25CF "+this.symbols.slice(l).map(p).join(" ");return this.name+" \u2192 "+u};function e(l,u,d,m){this.rule=l,this.dot=u,this.reference=d,this.data=[],this.wantedBy=m,this.isComplete=this.dot===l.symbols.length}e.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},e.prototype.nextState=function(l){var u=new e(this.rule,this.dot+1,this.reference,this.wantedBy);return u.left=this,u.right=l,u.isComplete&&(u.data=u.build(),u.right=void 0),u},e.prototype.build=function(){var l=[],u=this;do l.push(u.right.data),u=u.left;while(u.left);return l.reverse(),l},e.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,o.fail))};function r(l,u){this.grammar=l,this.index=u,this.states=[],this.wants={},this.scannable=[],this.completed={}}r.prototype.process=function(l){for(var u=this.states,d=this.wants,m=this.completed,g=0;g<u.length;g++){var x=u[g];if(x.isComplete){if(x.finish(),x.data!==o.fail){for(var b=x.wantedBy,v=b.length;v--;){var F=b[v];this.complete(F,x)}if(x.reference===this.index){var I=x.rule.name;(this.completed[I]=this.completed[I]||[]).push(x)}}}else{var I=x.rule.symbols[x.dot];if(typeof I!="string"){this.scannable.push(x);continue}if(d[I]){if(d[I].push(x),m.hasOwnProperty(I))for(var U=m[I],v=0;v<U.length;v++){var K=U[v];this.complete(x,K)}}else d[I]=[x],this.predict(I)}}},r.prototype.predict=function(l){for(var u=this.grammar.byName[l]||[],d=0;d<u.length;d++){var m=u[d],g=this.wants[l],x=new e(m,0,this.index,g);this.states.push(x)}},r.prototype.complete=function(l,u){var d=l.nextState(u);this.states.push(d)};function n(l,u){this.rules=l,this.start=u||this.rules[0].name;var d=this.byName={};this.rules.forEach(function(m){d.hasOwnProperty(m.name)||(d[m.name]=[]),d[m.name].push(m)})}n.fromCompiled=function(m,u){var d=m.Lexer;m.ParserStart&&(u=m.ParserStart,m=m.ParserRules);var m=m.map(function(x){return new t(x.name,x.symbols,x.postprocess)}),g=new n(m,u);return g.lexer=d,g};function i(){this.reset("")}i.prototype.reset=function(l,u){this.buffer=l,this.index=0,this.line=u?u.line:1,this.lastLineBreak=u?-u.col:0},i.prototype.next=function(){if(this.index<this.buffer.length){var l=this.buffer[this.index++];return l===`
`&&(this.line+=1,this.lastLineBreak=this.index),{value:l}}},i.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},i.prototype.formatError=function(l,u){var d=this.buffer;if(typeof d=="string"){var m=d.split(`
`).slice(Math.max(0,this.line-5),this.line),g=d.indexOf(`
`,this.index);g===-1&&(g=d.length);var x=this.index-this.lastLineBreak,b=String(this.line).length;return u+=" at line "+this.line+" col "+x+`:

`,u+=m.map(function(F,I){return v(this.line-m.length+I+1,b)+" "+F},this).join(`
`),u+=`
`+v("",b+x)+`^
`,u}else return u+" at index "+(this.index-1);function v(F,I){var U=String(F);return Array(I-U.length+1).join(" ")+U}};function o(l,u,d){if(l instanceof n)var m=l,d=u;else var m=n.fromCompiled(l,u);this.grammar=m,this.options={keepHistory:!1,lexer:m.lexer||new i};for(var g in d||{})this.options[g]=d[g];this.lexer=this.options.lexer,this.lexerState=void 0;var x=new r(m,0),b=this.table=[x];x.wants[m.start]=[],x.predict(m.start),x.process(),this.current=0}o.fail={},o.prototype.feed=function(l){var u=this.lexer;u.reset(l,this.lexerState);for(var d;;){try{if(d=u.next(),!d)break}catch(ae){var b=new r(this.grammar,this.current+1);this.table.push(b);var m=new Error(this.reportLexerError(ae));throw m.offset=this.current,m.token=ae.token,m}var g=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var x=this.current+1,b=new r(this.grammar,x);this.table.push(b);for(var v=d.text!==void 0?d.text:d.value,F=u.constructor===i?d.value:u.transform?.(d)??d,I=g.scannable,U=I.length;U--;){var K=I[U],ne=K.rule.symbols[K.dot];if(ne.test?ne.test(F):ne.type?ne.type===d.type:ne.literal===v){var ie=K.nextState({data:F,token:d,isToken:!0,reference:x-1});b.states.push(ie)}}if(b.process(),b.states.length===0){var m=new Error(this.reportError(d));throw m.offset=this.current,m.token=d,m}this.options.keepHistory&&(g.lexerState=u.save()),this.current++}return g&&(this.lexerState=u.save()),this.results=this.finish(),this},o.prototype.reportLexerError=function(l){var u,d,m=l.token;return m?(u="input "+JSON.stringify(m.text[0])+" (lexer error)",d=this.lexer.formatError(m,"Syntax error")):(u="input (lexer error)",d=l.message),this.reportErrorCommon(d,u)},o.prototype.reportError=function(l){var u=(l.type?l.type+" token: ":"")+JSON.stringify(l.value!==void 0?l.value:l),d=this.lexer.formatError(l,"Syntax error");return this.reportErrorCommon(d,u)},o.prototype.reportErrorCommon=function(l,u){var d=[];d.push(l);var m=this.table.length-2,g=this.table[m],x=g.states.filter(function(v){var F=v.rule.symbols[v.dot];return F&&typeof F!="string"});if(x.length===0)d.push("Unexpected "+u+`. I did not expect any more input. Here is the state of my parse table:
`),this.displayStateStack(g.states,d);else{d.push("Unexpected "+u+`. Instead, I was expecting to see one of the following:
`);var b=x.map(function(v){return this.buildFirstStateStack(v,[])||[v]},this);b.forEach(function(v){var F=v[0],I=F.rule.symbols[F.dot],U=this.getSymbolDisplay(I);d.push("A "+U+" based on:"),this.displayStateStack(v,d)},this)}return d.push(""),d.join(`
`)},o.prototype.displayStateStack=function(l,u){for(var d,m=0,g=0;g<l.length;g++){var x=l[g],b=x.rule.toString(x.dot);b===d?m++:(m>0&&u.push("    ^ "+m+" more lines identical to this"),m=0,u.push("    "+b)),d=b}},o.prototype.getSymbolDisplay=function(l){return a(l)},o.prototype.buildFirstStateStack=function(l,u){if(u.indexOf(l)!==-1)return null;if(l.wantedBy.length===0)return[l];var d=l.wantedBy[0],m=[l].concat(u),g=this.buildFirstStateStack(d,m);return g===null?null:[l].concat(g)},o.prototype.save=function(){var l=this.table[this.current];return l.lexerState=this.lexerState,l},o.prototype.restore=function(l){var u=l.index;this.current=u,this.table[u]=l,this.table.splice(u+1),this.lexerState=l.lexerState,this.results=this.finish()},o.prototype.rewind=function(l){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[l])},o.prototype.finish=function(){var l=[],u=this.grammar.start,d=this.table[this.table.length-1];return d.states.forEach(function(m){m.rule.name===u&&m.dot===m.rule.symbols.length&&m.reference===0&&m.data!==o.fail&&l.push(m)}),l.map(function(m){return m.data})};function a(l){var u=typeof l;if(u==="string")return l;if(u==="object"){if(l.literal)return JSON.stringify(l.literal);if(l instanceof RegExp)return"character matching "+l;if(l.type)return l.type+" token";if(l.test)return"token matching "+String(l.test);throw new Error("Unknown symbol type: "+l)}}function p(l){var u=typeof l;if(u==="string")return l;if(u==="object"){if(l.literal)return JSON.stringify(l.literal);if(l instanceof RegExp)return l.toString();if(l.type)return"%"+l.type;if(l.test)return"<"+String(l.test)+">";throw new Error("Unknown symbol type: "+l)}}return{Parser:o,Grammar:n,Rule:t}})});var PM=Ke((kM,dd)=>{(function(t,e){typeof define=="function"&&define.amd?define([],e):typeof dd=="object"&&dd.exports?dd.exports=e():t.moo=e()})(kM,function(){"use strict";var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,r=typeof new RegExp().sticky=="boolean";function n(N){return N&&e.call(N)==="[object RegExp]"}function i(N){return N&&typeof N=="object"&&!n(N)&&!Array.isArray(N)}function o(N){return N.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function a(N){var O=new RegExp("|"+N);return O.exec("").length-1}function p(N){return"("+N+")"}function l(N){if(!N.length)return"(?!)";var O=N.map(function(D){return"(?:"+D+")"}).join("|");return"(?:"+O+")"}function u(N){if(typeof N=="string")return"(?:"+o(N)+")";if(n(N)){if(N.ignoreCase)throw new Error("RegExp /i flag not allowed");if(N.global)throw new Error("RegExp /g flag is implied");if(N.sticky)throw new Error("RegExp /y flag is implied");if(N.multiline)throw new Error("RegExp /m flag is implied");return N.source}else throw new Error("Not a pattern: "+N)}function d(N,O){return N.length>O?N:Array(O-N.length+1).join(" ")+N}function m(N,O){for(var D=N.length,$=0;;){var z=N.lastIndexOf(`
`,D-1);if(z===-1||($++,D=z,$===O)||D===0)break}var Q=$<O?0:D+1;return N.substring(Q).split(`
`)}function g(N){for(var O=Object.getOwnPropertyNames(N),D=[],$=0;$<O.length;$++){var z=O[$],Q=N[z],Z=[].concat(Q);if(z==="include"){for(var te=0;te<Z.length;te++)D.push({include:Z[te]});continue}var he=[];Z.forEach(function(re){i(re)?(he.length&&D.push(b(z,he)),D.push(b(z,re)),he=[]):he.push(re)}),he.length&&D.push(b(z,he))}return D}function x(N){for(var O=[],D=0;D<N.length;D++){var $=N[D];if($.include){for(var z=[].concat($.include),Q=0;Q<z.length;Q++)O.push({include:z[Q]});continue}if(!$.type)throw new Error("Rule has no type: "+JSON.stringify($));O.push(b($.type,$))}return O}function b(N,O){if(i(O)||(O={match:O}),O.include)throw new Error("Matching rules cannot also include states");var D={defaultType:N,lineBreaks:!!O.error||!!O.fallback,pop:!1,next:null,push:null,error:!1,fallback:!1,value:null,type:null,shouldThrow:!1};for(var $ in O)t.call(O,$)&&(D[$]=O[$]);if(typeof D.type=="string"&&N!==D.type)throw new Error("Type transform cannot be a string (type '"+D.type+"' for token '"+N+"')");var z=D.match;return D.match=Array.isArray(z)?z:z?[z]:[],D.match.sort(function(Q,Z){return n(Q)&&n(Z)?0:n(Z)?-1:n(Q)?1:Z.length-Q.length}),D}function v(N){return Array.isArray(N)?x(N):g(N)}var F=b("error",{lineBreaks:!0,shouldThrow:!0});function I(N,O){for(var D=null,$=Object.create(null),z=!0,Q=null,Z=[],te=[],he=0;he<N.length;he++)N[he].fallback&&(z=!1);for(var he=0;he<N.length;he++){var re=N[he];if(re.include)throw new Error("Inheritance is not allowed in stateless lexers");if(re.error||re.fallback){if(D)throw!re.fallback==!D.fallback?new Error("Multiple "+(re.fallback?"fallback":"error")+" rules not allowed (for token '"+re.defaultType+"')"):new Error("fallback and error are mutually exclusive (for token '"+re.defaultType+"')");D=re}var Re=re.match.slice();if(z)for(;Re.length&&typeof Re[0]=="string"&&Re[0].length===1;){var ur=Re.shift();$[ur.charCodeAt(0)]=re}if(re.pop||re.push||re.next){if(!O)throw new Error("State-switching options are not allowed in stateless lexers (for token '"+re.defaultType+"')");if(re.fallback)throw new Error("State-switching options are not allowed on fallback tokens (for token '"+re.defaultType+"')")}if(Re.length!==0){z=!1,Z.push(re);for(var ui=0;ui<Re.length;ui++){var fr=Re[ui];if(n(fr)){if(Q===null)Q=fr.unicode;else if(Q!==fr.unicode&&re.fallback===!1)throw new Error("If one rule is /u then all must be")}}var vn=l(Re.map(u)),Mr=new RegExp(vn);if(Mr.test(""))throw new Error("RegExp matches empty string: "+Mr);var bn=a(vn);if(bn>0)throw new Error("RegExp has capture groups: "+Mr+`
Use (?: \u2026 ) instead`);if(!re.lineBreaks&&Mr.test(`
`))throw new Error("Rule should declare lineBreaks: "+Mr);te.push(p(vn))}}var Qr=D&&D.fallback,Fo=r&&!Qr?"ym":"gm",fi=r||Qr?"":"|";Q===!0&&(Fo+="u");var Ds=new RegExp(l(te)+fi,Fo);return{regexp:Ds,groups:Z,fast:$,error:D||F}}function U(N){var O=I(v(N));return new ae({start:O},"start")}function K(N,O,D){var $=N&&(N.push||N.next);if($&&!D[$])throw new Error("Missing state '"+$+"' (in token '"+N.defaultType+"' of state '"+O+"')");if(N&&N.pop&&+N.pop!=1)throw new Error("pop must be 1 (in token '"+N.defaultType+"' of state '"+O+"')")}function ne(N,O){var D=N.$all?v(N.$all):[];delete N.$all;var $=Object.getOwnPropertyNames(N);O||(O=$[0]);for(var z=Object.create(null),Q=0;Q<$.length;Q++){var Z=$[Q];z[Z]=v(N[Z]).concat(D)}for(var Q=0;Q<$.length;Q++)for(var Z=$[Q],te=z[Z],he=Object.create(null),re=0;re<te.length;re++){var Re=te[re];if(Re.include){var ur=[re,1];if(Re.include!==Z&&!he[Re.include]){he[Re.include]=!0;var ui=z[Re.include];if(!ui)throw new Error("Cannot include nonexistent state '"+Re.include+"' (in state '"+Z+"')");for(var fr=0;fr<ui.length;fr++){var vn=ui[fr];te.indexOf(vn)===-1&&ur.push(vn)}}te.splice.apply(te,ur),re--}}for(var Mr=Object.create(null),Q=0;Q<$.length;Q++){var Z=$[Q];Mr[Z]=I(z[Z],!0)}for(var Q=0;Q<$.length;Q++){for(var bn=$[Q],Qr=Mr[bn],Fo=Qr.groups,re=0;re<Fo.length;re++)K(Fo[re],bn,Mr);for(var fi=Object.getOwnPropertyNames(Qr.fast),re=0;re<fi.length;re++)K(Qr.fast[fi[re]],bn,Mr)}return new ae(Mr,O)}function ie(N){for(var O=typeof Map<"u",D=O?new Map:Object.create(null),$=Object.getOwnPropertyNames(N),z=0;z<$.length;z++){var Q=$[z],Z=N[Q],te=Array.isArray(Z)?Z:[Z];te.forEach(function(he){if(typeof he!="string")throw new Error("keyword must be string (in keyword '"+Q+"')");O?D.set(he,Q):D[he]=Q})}return function(he){return O?D.get(he):D[he]}}var ae=function(N,O){this.startState=O,this.states=N,this.buffer="",this.stack=[],this.reset()};ae.prototype.reset=function(N,O){return this.buffer=N||"",this.index=0,this.line=O?O.line:1,this.col=O?O.col:1,this.queuedToken=O?O.queuedToken:null,this.queuedText=O?O.queuedText:"",this.queuedThrow=O?O.queuedThrow:null,this.setState(O?O.state:this.startState),this.stack=O&&O.stack?O.stack.slice():[],this},ae.prototype.save=function(){return{line:this.line,col:this.col,state:this.state,stack:this.stack.slice(),queuedToken:this.queuedToken,queuedText:this.queuedText,queuedThrow:this.queuedThrow}},ae.prototype.setState=function(N){if(!(!N||this.state===N)){this.state=N;var O=this.states[N];this.groups=O.groups,this.error=O.error,this.re=O.regexp,this.fast=O.fast}},ae.prototype.popState=function(){this.setState(this.stack.pop())},ae.prototype.pushState=function(N){this.stack.push(this.state),this.setState(N)};var it=r?function(N,O){return N.exec(O)}:function(N,O){var D=N.exec(O);return D[0].length===0?null:D};ae.prototype._getGroup=function(N){for(var O=this.groups.length,D=0;D<O;D++)if(N[D+1]!==void 0)return this.groups[D];throw new Error("Cannot find token type for matched text")};function Ct(){return this.value}if(ae.prototype.next=function(){var N=this.index;if(this.queuedGroup){var O=this._token(this.queuedGroup,this.queuedText,N);return this.queuedGroup=null,this.queuedText="",O}var D=this.buffer;if(N!==D.length){var Z=this.fast[D.charCodeAt(N)];if(Z)return this._token(Z,D.charAt(N),N);var $=this.re;$.lastIndex=N;var z=it($,D),Q=this.error;if(z==null)return this._token(Q,D.slice(N,D.length),N);var Z=this._getGroup(z),te=z[0];return Q.fallback&&z.index!==N?(this.queuedGroup=Z,this.queuedText=te,this._token(Q,D.slice(N,z.index),N)):this._token(Z,te,N)}},ae.prototype._token=function(N,O,D){var $=0;if(N.lineBreaks){var z=/\n/g,Q=1;if(O===`
`)$=1;else for(;z.exec(O);)$++,Q=z.lastIndex}var Z={type:typeof N.type=="function"&&N.type(O)||N.defaultType,value:typeof N.value=="function"?N.value(O):O,text:O,toString:Ct,offset:D,lineBreaks:$,line:this.line,col:this.col},te=O.length;if(this.index+=te,this.line+=$,$!==0?this.col=te-Q+1:this.col+=te,N.shouldThrow){var he=new Error(this.formatError(Z,"invalid syntax"));throw he}return N.pop?this.popState():N.push?this.pushState(N.push):N.next&&this.setState(N.next),Z},typeof Symbol<"u"&&Symbol.iterator){var ct=function(N){this.lexer=N};ct.prototype.next=function(){var N=this.lexer.next();return{value:N,done:!N}},ct.prototype[Symbol.iterator]=function(){return this},ae.prototype[Symbol.iterator]=function(){return new ct(this)}}return ae.prototype.formatError=function(N,O){if(N==null)var D=this.buffer.slice(this.index),N={text:D,offset:this.index,lineBreaks:D.indexOf(`
`)===-1?0:1,line:this.line,col:this.col};var $=2,z=Math.max(N.line-$,1),Q=N.line+$,Z=String(Q).length,te=m(this.buffer,this.line-N.line+$+1).slice(0,5),he=[];he.push(O+" at line "+N.line+" col "+N.col+":"),he.push("");for(var re=0;re<te.length;re++){var Re=te[re],ur=z+re;he.push(d(String(ur),Z)+"  "+Re),ur===N.line&&he.push(d("",Z+N.col+1)+"^")}return he.join(`
`)},ae.prototype.clone=function(){return new ae(this.states,this.state)},ae.prototype.has=function(N){return!0},{compile:U,states:ne,error:Object.freeze({error:!0}),fallback:Object.freeze({fallback:!0}),keywords:ie}})});var kp=Ke((Zn,vA)=>{"use strict";Object.defineProperty(Zn,"__esModule",{value:!0});function In(t){return typeof t=="object"&&!("toString"in t)?Object.prototype.toString.call(t).slice(8,-1):t}var D5=typeof process=="object"&&process.env.NODE_ENV==="production";function un(t,e){if(!t)throw D5?new Error("Invariant failed"):new Error(e())}Zn.invariant=un;var KS=Object.prototype.hasOwnProperty,I5=Array.prototype.splice,F5=Object.prototype.toString;function cs(t){return F5.call(t).slice(8,-1)}var $d=Object.assign||function(t,e){return QS(e).forEach(function(r){KS.call(e,r)&&(t[r]=e[r])}),t},QS=typeof Object.getOwnPropertySymbols=="function"?function(t){return Object.keys(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.keys(t)};function go(t){return Array.isArray(t)?$d(t.constructor(t.length),t):cs(t)==="Map"?new Map(t):cs(t)==="Set"?new Set(t):t&&typeof t=="object"?$d(Object.create(Object.getPrototypeOf(t)),t):t}var TA=function(){function t(){this.commands=$d({},C5),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(e,r){return e===r},this.update.newContext=function(){return new t().update}}return Object.defineProperty(t.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(e){this.update.isEquals=e},enumerable:!0,configurable:!0}),t.prototype.extend=function(e,r){this.commands[e]=r},t.prototype.update=function(e,r){var n=this,i=typeof r=="function"?{$apply:r}:r;Array.isArray(e)&&Array.isArray(i)||un(!Array.isArray(i),function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."}),un(typeof i=="object"&&i!==null,function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the "+("following commands: "+Object.keys(n.commands).join(", ")+".")});var o=e;return QS(i).forEach(function(a){if(KS.call(n.commands,a)){var p=e===o;o=n.commands[a](i[a],o,i,e),p&&n.isEquals(o,e)&&(o=e)}else{var l=cs(e)==="Map"?n.update(e.get(a),i[a]):n.update(e[a],i[a]),u=cs(o)==="Map"?o.get(a):o[a];(!n.isEquals(l,u)||typeof l>"u"&&!KS.call(e,a))&&(o===e&&(o=go(e)),cs(o)==="Map"?o.set(a,l):o[a]=l)}}),o},t}();Zn.Context=TA;var C5={$push:function(t,e,r){return yA(e,r,"$push"),t.length?e.concat(t):e},$unshift:function(t,e,r){return yA(e,r,"$unshift"),t.length?t.concat(e):e},$splice:function(t,e,r,n){return O5(e,r),t.forEach(function(i){SA(i),e===n&&i.length&&(e=go(n)),I5.apply(e,i)}),e},$set:function(t,e,r){return L5(r),t},$toggle:function(t,e){Rp(t,"$toggle");var r=t.length?go(e):e;return t.forEach(function(n){r[n]=!e[n]}),r},$unset:function(t,e,r,n){return Rp(t,"$unset"),t.forEach(function(i){Object.hasOwnProperty.call(e,i)&&(e===n&&(e=go(n)),delete e[i])}),e},$add:function(t,e,r,n){return xA(e,"$add"),Rp(t,"$add"),cs(e)==="Map"?t.forEach(function(i){var o=i[0],a=i[1];e===n&&e.get(o)!==a&&(e=go(n)),e.set(o,a)}):t.forEach(function(i){e===n&&!e.has(i)&&(e=go(n)),e.add(i)}),e},$remove:function(t,e,r,n){return xA(e,"$remove"),Rp(t,"$remove"),t.forEach(function(i){e===n&&e.has(i)&&(e=go(n)),e.delete(i)}),e},$merge:function(t,e,r,n){return U5(e,t),QS(t).forEach(function(i){t[i]!==e[i]&&(e===n&&(e=go(n)),e[i]=t[i])}),e},$apply:function(t,e){return N5(t),t(e)}},ZS=new TA;Zn.isEquals=ZS.update.isEquals;Zn.extend=ZS.extend;Zn.default=ZS.update;Zn.default.default=vA.exports=$d(Zn.default,Zn);function yA(t,e,r){un(Array.isArray(t),function(){return"update(): expected target of "+In(r)+" to be an array; got "+In(t)+"."}),Rp(e[r],r)}function Rp(t,e){un(Array.isArray(t),function(){return"update(): expected spec of "+In(e)+" to be an array; got "+In(t)+". Did you forget to wrap your parameter in an array?"})}function O5(t,e){un(Array.isArray(t),function(){return"Expected $splice target to be an array; got "+In(t)}),SA(e.$splice)}function SA(t){un(Array.isArray(t),function(){return"update(): expected spec of $splice to be an array of arrays; got "+In(t)+". Did you forget to wrap your parameters in an array?"})}function N5(t){un(typeof t=="function",function(){return"update(): expected spec of $apply to be a function; got "+In(t)+"."})}function L5(t){un(Object.keys(t).length===1,function(){return"Cannot have more than one key in an object with $set"})}function U5(t,e){un(e&&typeof e=="object",function(){return"update(): $merge expects a spec of type 'object'; got "+In(e)}),un(t&&typeof t=="object",function(){return"update(): $merge expects a target of type 'object'; got "+In(t)})}function xA(t,e){var r=cs(t);un(r==="Map"||r==="Set",function(){return"update(): "+In(e)+" expects a target of type Set or Map; got "+In(r)})}});var ub=Ke((pc,hl)=>{(function(){var t,e="4.17.21",r=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",i="Expected a function",o="Invalid `variable` option passed into `_.template`",a="__lodash_hash_undefined__",p=500,l="__lodash_placeholder__",u=1,d=2,m=4,g=1,x=2,b=1,v=2,F=4,I=8,U=16,K=32,ne=64,ie=128,ae=256,it=512,Ct=30,ct="...",N=800,O=16,D=1,$=2,z=3,Q=1/0,Z=9007199254740991,te=17976931348623157e292,he=NaN,re=4294967295,Re=re-1,ur=re>>>1,ui=[["ary",ie],["bind",b],["bindKey",v],["curry",I],["curryRight",U],["flip",it],["partial",K],["partialRight",ne],["rearg",ae]],fr="[object Arguments]",vn="[object Array]",Mr="[object AsyncFunction]",bn="[object Boolean]",Qr="[object Date]",Fo="[object DOMException]",fi="[object Error]",Ds="[object Function]",Cw="[object GeneratorFunction]",wn="[object Map]",Ec="[object Number]",LC="[object Null]",di="[object Object]",Ow="[object Promise]",UC="[object Proxy]",Rc="[object RegExp]",_n="[object Set]",kc="[object String]",jl="[object Symbol]",HC="[object Undefined]",Pc="[object WeakMap]",VC="[object WeakSet]",Mc="[object ArrayBuffer]",Is="[object DataView]",zy="[object Float32Array]",Gy="[object Float64Array]",Ky="[object Int8Array]",Qy="[object Int16Array]",Zy="[object Int32Array]",Yy="[object Uint8Array]",Xy="[object Uint8ClampedArray]",Jy="[object Uint16Array]",ex="[object Uint32Array]",BC=/\b__p \+= '';/g,WC=/\b(__p \+=) '' \+/g,$C=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Nw=/&(?:amp|lt|gt|quot|#39);/g,Lw=/[&<>"']/g,jC=RegExp(Nw.source),qC=RegExp(Lw.source),zC=/<%-([\s\S]+?)%>/g,GC=/<%([\s\S]+?)%>/g,Uw=/<%=([\s\S]+?)%>/g,KC=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,QC=/^\w*$/,ZC=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,tx=/[\\^$.*+?()[\]{}|]/g,YC=RegExp(tx.source),rx=/^\s+/,XC=/\s/,JC=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,eO=/\{\n\/\* \[wrapped with (.+)\] \*/,tO=/,? & /,rO=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,nO=/[()=,{}\[\]\/\s]/,iO=/\\(\\)?/g,oO=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Hw=/\w*$/,sO=/^[-+]0x[0-9a-f]+$/i,aO=/^0b[01]+$/i,cO=/^\[object .+?Constructor\]$/,pO=/^0o[0-7]+$/i,lO=/^(?:0|[1-9]\d*)$/,uO=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ql=/($^)/,fO=/['\n\r\u2028\u2029\\]/g,zl="\\ud800-\\udfff",dO="\\u0300-\\u036f",mO="\\ufe20-\\ufe2f",hO="\\u20d0-\\u20ff",Vw=dO+mO+hO,Bw="\\u2700-\\u27bf",Ww="a-z\\xdf-\\xf6\\xf8-\\xff",gO="\\xac\\xb1\\xd7\\xf7",yO="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",xO="\\u2000-\\u206f",TO=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",$w="A-Z\\xc0-\\xd6\\xd8-\\xde",jw="\\ufe0e\\ufe0f",qw=gO+yO+xO+TO,nx="['\u2019]",SO="["+zl+"]",zw="["+qw+"]",Gl="["+Vw+"]",Gw="\\d+",vO="["+Bw+"]",Kw="["+Ww+"]",Qw="[^"+zl+qw+Gw+Bw+Ww+$w+"]",ix="\\ud83c[\\udffb-\\udfff]",bO="(?:"+Gl+"|"+ix+")",Zw="[^"+zl+"]",ox="(?:\\ud83c[\\udde6-\\uddff]){2}",sx="[\\ud800-\\udbff][\\udc00-\\udfff]",Fs="["+$w+"]",Yw="\\u200d",Xw="(?:"+Kw+"|"+Qw+")",wO="(?:"+Fs+"|"+Qw+")",Jw="(?:"+nx+"(?:d|ll|m|re|s|t|ve))?",e_="(?:"+nx+"(?:D|LL|M|RE|S|T|VE))?",t_=bO+"?",r_="["+jw+"]?",_O="(?:"+Yw+"(?:"+[Zw,ox,sx].join("|")+")"+r_+t_+")*",EO="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",RO="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",n_=r_+t_+_O,kO="(?:"+[vO,ox,sx].join("|")+")"+n_,PO="(?:"+[Zw+Gl+"?",Gl,ox,sx,SO].join("|")+")",MO=RegExp(nx,"g"),AO=RegExp(Gl,"g"),ax=RegExp(ix+"(?="+ix+")|"+PO+n_,"g"),DO=RegExp([Fs+"?"+Kw+"+"+Jw+"(?="+[zw,Fs,"$"].join("|")+")",wO+"+"+e_+"(?="+[zw,Fs+Xw,"$"].join("|")+")",Fs+"?"+Xw+"+"+Jw,Fs+"+"+e_,RO,EO,Gw,kO].join("|"),"g"),IO=RegExp("["+Yw+zl+Vw+jw+"]"),FO=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,CO=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],OO=-1,Ye={};Ye[zy]=Ye[Gy]=Ye[Ky]=Ye[Qy]=Ye[Zy]=Ye[Yy]=Ye[Xy]=Ye[Jy]=Ye[ex]=!0,Ye[fr]=Ye[vn]=Ye[Mc]=Ye[bn]=Ye[Is]=Ye[Qr]=Ye[fi]=Ye[Ds]=Ye[wn]=Ye[Ec]=Ye[di]=Ye[Rc]=Ye[_n]=Ye[kc]=Ye[Pc]=!1;var Qe={};Qe[fr]=Qe[vn]=Qe[Mc]=Qe[Is]=Qe[bn]=Qe[Qr]=Qe[zy]=Qe[Gy]=Qe[Ky]=Qe[Qy]=Qe[Zy]=Qe[wn]=Qe[Ec]=Qe[di]=Qe[Rc]=Qe[_n]=Qe[kc]=Qe[jl]=Qe[Yy]=Qe[Xy]=Qe[Jy]=Qe[ex]=!0,Qe[fi]=Qe[Ds]=Qe[Pc]=!1;var NO={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},LO={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},UO={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},HO={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},VO=parseFloat,BO=parseInt,i_=typeof global=="object"&&global&&global.Object===Object&&global,WO=typeof self=="object"&&self&&self.Object===Object&&self,kt=i_||WO||Function("return this")(),cx=typeof pc=="object"&&pc&&!pc.nodeType&&pc,Co=cx&&typeof hl=="object"&&hl&&!hl.nodeType&&hl,o_=Co&&Co.exports===cx,px=o_&&i_.process,Zr=function(){try{var P=Co&&Co.require&&Co.require("util").types;return P||px&&px.binding&&px.binding("util")}catch{}}(),s_=Zr&&Zr.isArrayBuffer,a_=Zr&&Zr.isDate,c_=Zr&&Zr.isMap,p_=Zr&&Zr.isRegExp,l_=Zr&&Zr.isSet,u_=Zr&&Zr.isTypedArray;function Ar(P,H,L){switch(L.length){case 0:return P.call(H);case 1:return P.call(H,L[0]);case 2:return P.call(H,L[0],L[1]);case 3:return P.call(H,L[0],L[1],L[2])}return P.apply(H,L)}function $O(P,H,L,ee){for(var ye=-1,Ve=P==null?0:P.length;++ye<Ve;){var vt=P[ye];H(ee,vt,L(vt),P)}return ee}function Yr(P,H){for(var L=-1,ee=P==null?0:P.length;++L<ee&&H(P[L],L,P)!==!1;);return P}function jO(P,H){for(var L=P==null?0:P.length;L--&&H(P[L],L,P)!==!1;);return P}function f_(P,H){for(var L=-1,ee=P==null?0:P.length;++L<ee;)if(!H(P[L],L,P))return!1;return!0}function Vi(P,H){for(var L=-1,ee=P==null?0:P.length,ye=0,Ve=[];++L<ee;){var vt=P[L];H(vt,L,P)&&(Ve[ye++]=vt)}return Ve}function Kl(P,H){var L=P==null?0:P.length;return!!L&&Cs(P,H,0)>-1}function lx(P,H,L){for(var ee=-1,ye=P==null?0:P.length;++ee<ye;)if(L(H,P[ee]))return!0;return!1}function et(P,H){for(var L=-1,ee=P==null?0:P.length,ye=Array(ee);++L<ee;)ye[L]=H(P[L],L,P);return ye}function Bi(P,H){for(var L=-1,ee=H.length,ye=P.length;++L<ee;)P[ye+L]=H[L];return P}function ux(P,H,L,ee){var ye=-1,Ve=P==null?0:P.length;for(ee&&Ve&&(L=P[++ye]);++ye<Ve;)L=H(L,P[ye],ye,P);return L}function qO(P,H,L,ee){var ye=P==null?0:P.length;for(ee&&ye&&(L=P[--ye]);ye--;)L=H(L,P[ye],ye,P);return L}function fx(P,H){for(var L=-1,ee=P==null?0:P.length;++L<ee;)if(H(P[L],L,P))return!0;return!1}var zO=dx("length");function GO(P){return P.split("")}function KO(P){return P.match(rO)||[]}function d_(P,H,L){var ee;return L(P,function(ye,Ve,vt){if(H(ye,Ve,vt))return ee=Ve,!1}),ee}function Ql(P,H,L,ee){for(var ye=P.length,Ve=L+(ee?1:-1);ee?Ve--:++Ve<ye;)if(H(P[Ve],Ve,P))return Ve;return-1}function Cs(P,H,L){return H===H?sN(P,H,L):Ql(P,m_,L)}function QO(P,H,L,ee){for(var ye=L-1,Ve=P.length;++ye<Ve;)if(ee(P[ye],H))return ye;return-1}function m_(P){return P!==P}function h_(P,H){var L=P==null?0:P.length;return L?hx(P,H)/L:he}function dx(P){return function(H){return H==null?t:H[P]}}function mx(P){return function(H){return P==null?t:P[H]}}function g_(P,H,L,ee,ye){return ye(P,function(Ve,vt,Ge){L=ee?(ee=!1,Ve):H(L,Ve,vt,Ge)}),L}function ZO(P,H){var L=P.length;for(P.sort(H);L--;)P[L]=P[L].value;return P}function hx(P,H){for(var L,ee=-1,ye=P.length;++ee<ye;){var Ve=H(P[ee]);Ve!==t&&(L=L===t?Ve:L+Ve)}return L}function gx(P,H){for(var L=-1,ee=Array(P);++L<P;)ee[L]=H(L);return ee}function YO(P,H){return et(H,function(L){return[L,P[L]]})}function y_(P){return P&&P.slice(0,v_(P)+1).replace(rx,"")}function Dr(P){return function(H){return P(H)}}function yx(P,H){return et(H,function(L){return P[L]})}function Ac(P,H){return P.has(H)}function x_(P,H){for(var L=-1,ee=P.length;++L<ee&&Cs(H,P[L],0)>-1;);return L}function T_(P,H){for(var L=P.length;L--&&Cs(H,P[L],0)>-1;);return L}function XO(P,H){for(var L=P.length,ee=0;L--;)P[L]===H&&++ee;return ee}var JO=mx(NO),eN=mx(LO);function tN(P){return"\\"+HO[P]}function rN(P,H){return P==null?t:P[H]}function Os(P){return IO.test(P)}function nN(P){return FO.test(P)}function iN(P){for(var H,L=[];!(H=P.next()).done;)L.push(H.value);return L}function xx(P){var H=-1,L=Array(P.size);return P.forEach(function(ee,ye){L[++H]=[ye,ee]}),L}function S_(P,H){return function(L){return P(H(L))}}function Wi(P,H){for(var L=-1,ee=P.length,ye=0,Ve=[];++L<ee;){var vt=P[L];(vt===H||vt===l)&&(P[L]=l,Ve[ye++]=L)}return Ve}function Zl(P){var H=-1,L=Array(P.size);return P.forEach(function(ee){L[++H]=ee}),L}function oN(P){var H=-1,L=Array(P.size);return P.forEach(function(ee){L[++H]=[ee,ee]}),L}function sN(P,H,L){for(var ee=L-1,ye=P.length;++ee<ye;)if(P[ee]===H)return ee;return-1}function aN(P,H,L){for(var ee=L+1;ee--;)if(P[ee]===H)return ee;return ee}function Ns(P){return Os(P)?pN(P):zO(P)}function En(P){return Os(P)?lN(P):GO(P)}function v_(P){for(var H=P.length;H--&&XC.test(P.charAt(H)););return H}var cN=mx(UO);function pN(P){for(var H=ax.lastIndex=0;ax.test(P);)++H;return H}function lN(P){return P.match(ax)||[]}function uN(P){return P.match(DO)||[]}var fN=function P(H){H=H==null?kt:$i.defaults(kt.Object(),H,$i.pick(kt,CO));var L=H.Array,ee=H.Date,ye=H.Error,Ve=H.Function,vt=H.Math,Ge=H.Object,Tx=H.RegExp,dN=H.String,Xr=H.TypeError,Yl=L.prototype,mN=Ve.prototype,Ls=Ge.prototype,Xl=H["__core-js_shared__"],Jl=mN.toString,je=Ls.hasOwnProperty,hN=0,b_=function(){var s=/[^.]+$/.exec(Xl&&Xl.keys&&Xl.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),eu=Ls.toString,gN=Jl.call(Ge),yN=kt._,xN=Tx("^"+Jl.call(je).replace(tx,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tu=o_?H.Buffer:t,ji=H.Symbol,ru=H.Uint8Array,w_=tu?tu.allocUnsafe:t,nu=S_(Ge.getPrototypeOf,Ge),__=Ge.create,E_=Ls.propertyIsEnumerable,iu=Yl.splice,R_=ji?ji.isConcatSpreadable:t,Dc=ji?ji.iterator:t,Oo=ji?ji.toStringTag:t,ou=function(){try{var s=Vo(Ge,"defineProperty");return s({},"",{}),s}catch{}}(),TN=H.clearTimeout!==kt.clearTimeout&&H.clearTimeout,SN=ee&&ee.now!==kt.Date.now&&ee.now,vN=H.setTimeout!==kt.setTimeout&&H.setTimeout,su=vt.ceil,au=vt.floor,Sx=Ge.getOwnPropertySymbols,bN=tu?tu.isBuffer:t,k_=H.isFinite,wN=Yl.join,_N=S_(Ge.keys,Ge),bt=vt.max,$t=vt.min,EN=ee.now,RN=H.parseInt,P_=vt.random,kN=Yl.reverse,vx=Vo(H,"DataView"),Ic=Vo(H,"Map"),bx=Vo(H,"Promise"),Us=Vo(H,"Set"),Fc=Vo(H,"WeakMap"),Cc=Vo(Ge,"create"),cu=Fc&&new Fc,Hs={},PN=Bo(vx),MN=Bo(Ic),AN=Bo(bx),DN=Bo(Us),IN=Bo(Fc),pu=ji?ji.prototype:t,Oc=pu?pu.valueOf:t,M_=pu?pu.toString:t;function T(s){if(pt(s)&&!xe(s)&&!(s instanceof Ie)){if(s instanceof Jr)return s;if(je.call(s,"__wrapped__"))return A0(s)}return new Jr(s)}var Vs=function(){function s(){}return function(c){if(!ot(c))return{};if(__)return __(c);s.prototype=c;var f=new s;return s.prototype=t,f}}();function lu(){}function Jr(s,c){this.__wrapped__=s,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=t}T.templateSettings={escape:zC,evaluate:GC,interpolate:Uw,variable:"",imports:{_:T}},T.prototype=lu.prototype,T.prototype.constructor=T,Jr.prototype=Vs(lu.prototype),Jr.prototype.constructor=Jr;function Ie(s){this.__wrapped__=s,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=re,this.__views__=[]}function FN(){var s=new Ie(this.__wrapped__);return s.__actions__=dr(this.__actions__),s.__dir__=this.__dir__,s.__filtered__=this.__filtered__,s.__iteratees__=dr(this.__iteratees__),s.__takeCount__=this.__takeCount__,s.__views__=dr(this.__views__),s}function CN(){if(this.__filtered__){var s=new Ie(this);s.__dir__=-1,s.__filtered__=!0}else s=this.clone(),s.__dir__*=-1;return s}function ON(){var s=this.__wrapped__.value(),c=this.__dir__,f=xe(s),h=c<0,y=f?s.length:0,S=GL(0,y,this.__views__),E=S.start,R=S.end,A=R-E,V=h?R:E-1,B=this.__iteratees__,j=B.length,Y=0,oe=$t(A,this.__takeCount__);if(!f||!h&&y==A&&oe==A)return J_(s,this.__actions__);var fe=[];e:for(;A--&&Y<oe;){V+=c;for(var Ee=-1,de=s[V];++Ee<j;){var Ae=B[Ee],Fe=Ae.iteratee,Cr=Ae.type,er=Fe(de);if(Cr==$)de=er;else if(!er){if(Cr==D)continue e;break e}}fe[Y++]=de}return fe}Ie.prototype=Vs(lu.prototype),Ie.prototype.constructor=Ie;function No(s){var c=-1,f=s==null?0:s.length;for(this.clear();++c<f;){var h=s[c];this.set(h[0],h[1])}}function NN(){this.__data__=Cc?Cc(null):{},this.size=0}function LN(s){var c=this.has(s)&&delete this.__data__[s];return this.size-=c?1:0,c}function UN(s){var c=this.__data__;if(Cc){var f=c[s];return f===a?t:f}return je.call(c,s)?c[s]:t}function HN(s){var c=this.__data__;return Cc?c[s]!==t:je.call(c,s)}function VN(s,c){var f=this.__data__;return this.size+=this.has(s)?0:1,f[s]=Cc&&c===t?a:c,this}No.prototype.clear=NN,No.prototype.delete=LN,No.prototype.get=UN,No.prototype.has=HN,No.prototype.set=VN;function mi(s){var c=-1,f=s==null?0:s.length;for(this.clear();++c<f;){var h=s[c];this.set(h[0],h[1])}}function BN(){this.__data__=[],this.size=0}function WN(s){var c=this.__data__,f=uu(c,s);if(f<0)return!1;var h=c.length-1;return f==h?c.pop():iu.call(c,f,1),--this.size,!0}function $N(s){var c=this.__data__,f=uu(c,s);return f<0?t:c[f][1]}function jN(s){return uu(this.__data__,s)>-1}function qN(s,c){var f=this.__data__,h=uu(f,s);return h<0?(++this.size,f.push([s,c])):f[h][1]=c,this}mi.prototype.clear=BN,mi.prototype.delete=WN,mi.prototype.get=$N,mi.prototype.has=jN,mi.prototype.set=qN;function hi(s){var c=-1,f=s==null?0:s.length;for(this.clear();++c<f;){var h=s[c];this.set(h[0],h[1])}}function zN(){this.size=0,this.__data__={hash:new No,map:new(Ic||mi),string:new No}}function GN(s){var c=wu(this,s).delete(s);return this.size-=c?1:0,c}function KN(s){return wu(this,s).get(s)}function QN(s){return wu(this,s).has(s)}function ZN(s,c){var f=wu(this,s),h=f.size;return f.set(s,c),this.size+=f.size==h?0:1,this}hi.prototype.clear=zN,hi.prototype.delete=GN,hi.prototype.get=KN,hi.prototype.has=QN,hi.prototype.set=ZN;function Lo(s){var c=-1,f=s==null?0:s.length;for(this.__data__=new hi;++c<f;)this.add(s[c])}function YN(s){return this.__data__.set(s,a),this}function XN(s){return this.__data__.has(s)}Lo.prototype.add=Lo.prototype.push=YN,Lo.prototype.has=XN;function Rn(s){var c=this.__data__=new mi(s);this.size=c.size}function JN(){this.__data__=new mi,this.size=0}function eL(s){var c=this.__data__,f=c.delete(s);return this.size=c.size,f}function tL(s){return this.__data__.get(s)}function rL(s){return this.__data__.has(s)}function nL(s,c){var f=this.__data__;if(f instanceof mi){var h=f.__data__;if(!Ic||h.length<r-1)return h.push([s,c]),this.size=++f.size,this;f=this.__data__=new hi(h)}return f.set(s,c),this.size=f.size,this}Rn.prototype.clear=JN,Rn.prototype.delete=eL,Rn.prototype.get=tL,Rn.prototype.has=rL,Rn.prototype.set=nL;function A_(s,c){var f=xe(s),h=!f&&Wo(s),y=!f&&!h&&Qi(s),S=!f&&!h&&!y&&js(s),E=f||h||y||S,R=E?gx(s.length,dN):[],A=R.length;for(var V in s)(c||je.call(s,V))&&!(E&&(V=="length"||y&&(V=="offset"||V=="parent")||S&&(V=="buffer"||V=="byteLength"||V=="byteOffset")||Ti(V,A)))&&R.push(V);return R}function D_(s){var c=s.length;return c?s[Fx(0,c-1)]:t}function iL(s,c){return _u(dr(s),Uo(c,0,s.length))}function oL(s){return _u(dr(s))}function wx(s,c,f){(f!==t&&!kn(s[c],f)||f===t&&!(c in s))&&gi(s,c,f)}function Nc(s,c,f){var h=s[c];(!(je.call(s,c)&&kn(h,f))||f===t&&!(c in s))&&gi(s,c,f)}function uu(s,c){for(var f=s.length;f--;)if(kn(s[f][0],c))return f;return-1}function sL(s,c,f,h){return qi(s,function(y,S,E){c(h,y,f(y),E)}),h}function I_(s,c){return s&&$n(c,Pt(c),s)}function aL(s,c){return s&&$n(c,hr(c),s)}function gi(s,c,f){c=="__proto__"&&ou?ou(s,c,{configurable:!0,enumerable:!0,value:f,writable:!0}):s[c]=f}function _x(s,c){for(var f=-1,h=c.length,y=L(h),S=s==null;++f<h;)y[f]=S?t:iT(s,c[f]);return y}function Uo(s,c,f){return s===s&&(f!==t&&(s=s<=f?s:f),c!==t&&(s=s>=c?s:c)),s}function en(s,c,f,h,y,S){var E,R=c&u,A=c&d,V=c&m;if(f&&(E=y?f(s,h,y,S):f(s)),E!==t)return E;if(!ot(s))return s;var B=xe(s);if(B){if(E=QL(s),!R)return dr(s,E)}else{var j=jt(s),Y=j==Ds||j==Cw;if(Qi(s))return r0(s,R);if(j==di||j==fr||Y&&!y){if(E=A||Y?{}:v0(s),!R)return A?UL(s,aL(E,s)):LL(s,I_(E,s))}else{if(!Qe[j])return y?s:{};E=ZL(s,j,R)}}S||(S=new Rn);var oe=S.get(s);if(oe)return oe;S.set(s,E),Z0(s)?s.forEach(function(de){E.add(en(de,c,f,de,s,S))}):K0(s)&&s.forEach(function(de,Ae){E.set(Ae,en(de,c,f,Ae,s,S))});var fe=V?A?jx:$x:A?hr:Pt,Ee=B?t:fe(s);return Yr(Ee||s,function(de,Ae){Ee&&(Ae=de,de=s[Ae]),Nc(E,Ae,en(de,c,f,Ae,s,S))}),E}function cL(s){var c=Pt(s);return function(f){return F_(f,s,c)}}function F_(s,c,f){var h=f.length;if(s==null)return!h;for(s=Ge(s);h--;){var y=f[h],S=c[y],E=s[y];if(E===t&&!(y in s)||!S(E))return!1}return!0}function C_(s,c,f){if(typeof s!="function")throw new Xr(i);return $c(function(){s.apply(t,f)},c)}function Lc(s,c,f,h){var y=-1,S=Kl,E=!0,R=s.length,A=[],V=c.length;if(!R)return A;f&&(c=et(c,Dr(f))),h?(S=lx,E=!1):c.length>=r&&(S=Ac,E=!1,c=new Lo(c));e:for(;++y<R;){var B=s[y],j=f==null?B:f(B);if(B=h||B!==0?B:0,E&&j===j){for(var Y=V;Y--;)if(c[Y]===j)continue e;A.push(B)}else S(c,j,h)||A.push(B)}return A}var qi=a0(Wn),O_=a0(Rx,!0);function pL(s,c){var f=!0;return qi(s,function(h,y,S){return f=!!c(h,y,S),f}),f}function fu(s,c,f){for(var h=-1,y=s.length;++h<y;){var S=s[h],E=c(S);if(E!=null&&(R===t?E===E&&!Fr(E):f(E,R)))var R=E,A=S}return A}function lL(s,c,f,h){var y=s.length;for(f=ve(f),f<0&&(f=-f>y?0:y+f),h=h===t||h>y?y:ve(h),h<0&&(h+=y),h=f>h?0:X0(h);f<h;)s[f++]=c;return s}function N_(s,c){var f=[];return qi(s,function(h,y,S){c(h,y,S)&&f.push(h)}),f}function Ot(s,c,f,h,y){var S=-1,E=s.length;for(f||(f=XL),y||(y=[]);++S<E;){var R=s[S];c>0&&f(R)?c>1?Ot(R,c-1,f,h,y):Bi(y,R):h||(y[y.length]=R)}return y}var Ex=c0(),L_=c0(!0);function Wn(s,c){return s&&Ex(s,c,Pt)}function Rx(s,c){return s&&L_(s,c,Pt)}function du(s,c){return Vi(c,function(f){return Si(s[f])})}function Ho(s,c){c=Gi(c,s);for(var f=0,h=c.length;s!=null&&f<h;)s=s[jn(c[f++])];return f&&f==h?s:t}function U_(s,c,f){var h=c(s);return xe(s)?h:Bi(h,f(s))}function Xt(s){return s==null?s===t?HC:LC:Oo&&Oo in Ge(s)?zL(s):oU(s)}function kx(s,c){return s>c}function uL(s,c){return s!=null&&je.call(s,c)}function fL(s,c){return s!=null&&c in Ge(s)}function dL(s,c,f){return s>=$t(c,f)&&s<bt(c,f)}function Px(s,c,f){for(var h=f?lx:Kl,y=s[0].length,S=s.length,E=S,R=L(S),A=1/0,V=[];E--;){var B=s[E];E&&c&&(B=et(B,Dr(c))),A=$t(B.length,A),R[E]=!f&&(c||y>=120&&B.length>=120)?new Lo(E&&B):t}B=s[0];var j=-1,Y=R[0];e:for(;++j<y&&V.length<A;){var oe=B[j],fe=c?c(oe):oe;if(oe=f||oe!==0?oe:0,!(Y?Ac(Y,fe):h(V,fe,f))){for(E=S;--E;){var Ee=R[E];if(!(Ee?Ac(Ee,fe):h(s[E],fe,f)))continue e}Y&&Y.push(fe),V.push(oe)}}return V}function mL(s,c,f,h){return Wn(s,function(y,S,E){c(h,f(y),S,E)}),h}function Uc(s,c,f){c=Gi(c,s),s=E0(s,c);var h=s==null?s:s[jn(rn(c))];return h==null?t:Ar(h,s,f)}function H_(s){return pt(s)&&Xt(s)==fr}function hL(s){return pt(s)&&Xt(s)==Mc}function gL(s){return pt(s)&&Xt(s)==Qr}function Hc(s,c,f,h,y){return s===c?!0:s==null||c==null||!pt(s)&&!pt(c)?s!==s&&c!==c:yL(s,c,f,h,Hc,y)}function yL(s,c,f,h,y,S){var E=xe(s),R=xe(c),A=E?vn:jt(s),V=R?vn:jt(c);A=A==fr?di:A,V=V==fr?di:V;var B=A==di,j=V==di,Y=A==V;if(Y&&Qi(s)){if(!Qi(c))return!1;E=!0,B=!1}if(Y&&!B)return S||(S=new Rn),E||js(s)?x0(s,c,f,h,y,S):jL(s,c,A,f,h,y,S);if(!(f&g)){var oe=B&&je.call(s,"__wrapped__"),fe=j&&je.call(c,"__wrapped__");if(oe||fe){var Ee=oe?s.value():s,de=fe?c.value():c;return S||(S=new Rn),y(Ee,de,f,h,S)}}return Y?(S||(S=new Rn),qL(s,c,f,h,y,S)):!1}function xL(s){return pt(s)&&jt(s)==wn}function Mx(s,c,f,h){var y=f.length,S=y,E=!h;if(s==null)return!S;for(s=Ge(s);y--;){var R=f[y];if(E&&R[2]?R[1]!==s[R[0]]:!(R[0]in s))return!1}for(;++y<S;){R=f[y];var A=R[0],V=s[A],B=R[1];if(E&&R[2]){if(V===t&&!(A in s))return!1}else{var j=new Rn;if(h)var Y=h(V,B,A,s,c,j);if(!(Y===t?Hc(B,V,g|x,h,j):Y))return!1}}return!0}function V_(s){if(!ot(s)||eU(s))return!1;var c=Si(s)?xN:cO;return c.test(Bo(s))}function TL(s){return pt(s)&&Xt(s)==Rc}function SL(s){return pt(s)&&jt(s)==_n}function vL(s){return pt(s)&&Au(s.length)&&!!Ye[Xt(s)]}function B_(s){return typeof s=="function"?s:s==null?gr:typeof s=="object"?xe(s)?j_(s[0],s[1]):$_(s):pE(s)}function Ax(s){if(!Wc(s))return _N(s);var c=[];for(var f in Ge(s))je.call(s,f)&&f!="constructor"&&c.push(f);return c}function bL(s){if(!ot(s))return iU(s);var c=Wc(s),f=[];for(var h in s)h=="constructor"&&(c||!je.call(s,h))||f.push(h);return f}function Dx(s,c){return s<c}function W_(s,c){var f=-1,h=mr(s)?L(s.length):[];return qi(s,function(y,S,E){h[++f]=c(y,S,E)}),h}function $_(s){var c=zx(s);return c.length==1&&c[0][2]?w0(c[0][0],c[0][1]):function(f){return f===s||Mx(f,s,c)}}function j_(s,c){return Kx(s)&&b0(c)?w0(jn(s),c):function(f){var h=iT(f,s);return h===t&&h===c?oT(f,s):Hc(c,h,g|x)}}function mu(s,c,f,h,y){s!==c&&Ex(c,function(S,E){if(y||(y=new Rn),ot(S))wL(s,c,E,f,mu,h,y);else{var R=h?h(Zx(s,E),S,E+"",s,c,y):t;R===t&&(R=S),wx(s,E,R)}},hr)}function wL(s,c,f,h,y,S,E){var R=Zx(s,f),A=Zx(c,f),V=E.get(A);if(V){wx(s,f,V);return}var B=S?S(R,A,f+"",s,c,E):t,j=B===t;if(j){var Y=xe(A),oe=!Y&&Qi(A),fe=!Y&&!oe&&js(A);B=A,Y||oe||fe?xe(R)?B=R:ft(R)?B=dr(R):oe?(j=!1,B=r0(A,!0)):fe?(j=!1,B=n0(A,!0)):B=[]:jc(A)||Wo(A)?(B=R,Wo(R)?B=J0(R):(!ot(R)||Si(R))&&(B=v0(A))):j=!1}j&&(E.set(A,B),y(B,A,h,S,E),E.delete(A)),wx(s,f,B)}function q_(s,c){var f=s.length;if(f)return c+=c<0?f:0,Ti(c,f)?s[c]:t}function z_(s,c,f){c.length?c=et(c,function(S){return xe(S)?function(E){return Ho(E,S.length===1?S[0]:S)}:S}):c=[gr];var h=-1;c=et(c,Dr(ue()));var y=W_(s,function(S,E,R){var A=et(c,function(V){return V(S)});return{criteria:A,index:++h,value:S}});return ZO(y,function(S,E){return NL(S,E,f)})}function _L(s,c){return G_(s,c,function(f,h){return oT(s,h)})}function G_(s,c,f){for(var h=-1,y=c.length,S={};++h<y;){var E=c[h],R=Ho(s,E);f(R,E)&&Vc(S,Gi(E,s),R)}return S}function EL(s){return function(c){return Ho(c,s)}}function Ix(s,c,f,h){var y=h?QO:Cs,S=-1,E=c.length,R=s;for(s===c&&(c=dr(c)),f&&(R=et(s,Dr(f)));++S<E;)for(var A=0,V=c[S],B=f?f(V):V;(A=y(R,B,A,h))>-1;)R!==s&&iu.call(R,A,1),iu.call(s,A,1);return s}function K_(s,c){for(var f=s?c.length:0,h=f-1;f--;){var y=c[f];if(f==h||y!==S){var S=y;Ti(y)?iu.call(s,y,1):Nx(s,y)}}return s}function Fx(s,c){return s+au(P_()*(c-s+1))}function RL(s,c,f,h){for(var y=-1,S=bt(su((c-s)/(f||1)),0),E=L(S);S--;)E[h?S:++y]=s,s+=f;return E}function Cx(s,c){var f="";if(!s||c<1||c>Z)return f;do c%2&&(f+=s),c=au(c/2),c&&(s+=s);while(c);return f}function ke(s,c){return Yx(_0(s,c,gr),s+"")}function kL(s){return D_(qs(s))}function PL(s,c){var f=qs(s);return _u(f,Uo(c,0,f.length))}function Vc(s,c,f,h){if(!ot(s))return s;c=Gi(c,s);for(var y=-1,S=c.length,E=S-1,R=s;R!=null&&++y<S;){var A=jn(c[y]),V=f;if(A==="__proto__"||A==="constructor"||A==="prototype")return s;if(y!=E){var B=R[A];V=h?h(B,A,R):t,V===t&&(V=ot(B)?B:Ti(c[y+1])?[]:{})}Nc(R,A,V),R=R[A]}return s}var Q_=cu?function(s,c){return cu.set(s,c),s}:gr,ML=ou?function(s,c){return ou(s,"toString",{configurable:!0,enumerable:!1,value:aT(c),writable:!0})}:gr;function AL(s){return _u(qs(s))}function tn(s,c,f){var h=-1,y=s.length;c<0&&(c=-c>y?0:y+c),f=f>y?y:f,f<0&&(f+=y),y=c>f?0:f-c>>>0,c>>>=0;for(var S=L(y);++h<y;)S[h]=s[h+c];return S}function DL(s,c){var f;return qi(s,function(h,y,S){return f=c(h,y,S),!f}),!!f}function hu(s,c,f){var h=0,y=s==null?h:s.length;if(typeof c=="number"&&c===c&&y<=ur){for(;h<y;){var S=h+y>>>1,E=s[S];E!==null&&!Fr(E)&&(f?E<=c:E<c)?h=S+1:y=S}return y}return Ox(s,c,gr,f)}function Ox(s,c,f,h){var y=0,S=s==null?0:s.length;if(S===0)return 0;c=f(c);for(var E=c!==c,R=c===null,A=Fr(c),V=c===t;y<S;){var B=au((y+S)/2),j=f(s[B]),Y=j!==t,oe=j===null,fe=j===j,Ee=Fr(j);if(E)var de=h||fe;else V?de=fe&&(h||Y):R?de=fe&&Y&&(h||!oe):A?de=fe&&Y&&!oe&&(h||!Ee):oe||Ee?de=!1:de=h?j<=c:j<c;de?y=B+1:S=B}return $t(S,Re)}function Z_(s,c){for(var f=-1,h=s.length,y=0,S=[];++f<h;){var E=s[f],R=c?c(E):E;if(!f||!kn(R,A)){var A=R;S[y++]=E===0?0:E}}return S}function Y_(s){return typeof s=="number"?s:Fr(s)?he:+s}function Ir(s){if(typeof s=="string")return s;if(xe(s))return et(s,Ir)+"";if(Fr(s))return M_?M_.call(s):"";var c=s+"";return c=="0"&&1/s==-Q?"-0":c}function zi(s,c,f){var h=-1,y=Kl,S=s.length,E=!0,R=[],A=R;if(f)E=!1,y=lx;else if(S>=r){var V=c?null:WL(s);if(V)return Zl(V);E=!1,y=Ac,A=new Lo}else A=c?[]:R;e:for(;++h<S;){var B=s[h],j=c?c(B):B;if(B=f||B!==0?B:0,E&&j===j){for(var Y=A.length;Y--;)if(A[Y]===j)continue e;c&&A.push(j),R.push(B)}else y(A,j,f)||(A!==R&&A.push(j),R.push(B))}return R}function Nx(s,c){return c=Gi(c,s),s=E0(s,c),s==null||delete s[jn(rn(c))]}function X_(s,c,f,h){return Vc(s,c,f(Ho(s,c)),h)}function gu(s,c,f,h){for(var y=s.length,S=h?y:-1;(h?S--:++S<y)&&c(s[S],S,s););return f?tn(s,h?0:S,h?S+1:y):tn(s,h?S+1:0,h?y:S)}function J_(s,c){var f=s;return f instanceof Ie&&(f=f.value()),ux(c,function(h,y){return y.func.apply(y.thisArg,Bi([h],y.args))},f)}function Lx(s,c,f){var h=s.length;if(h<2)return h?zi(s[0]):[];for(var y=-1,S=L(h);++y<h;)for(var E=s[y],R=-1;++R<h;)R!=y&&(S[y]=Lc(S[y]||E,s[R],c,f));return zi(Ot(S,1),c,f)}function e0(s,c,f){for(var h=-1,y=s.length,S=c.length,E={};++h<y;){var R=h<S?c[h]:t;f(E,s[h],R)}return E}function Ux(s){return ft(s)?s:[]}function Hx(s){return typeof s=="function"?s:gr}function Gi(s,c){return xe(s)?s:Kx(s,c)?[s]:M0(We(s))}var IL=ke;function Ki(s,c,f){var h=s.length;return f=f===t?h:f,!c&&f>=h?s:tn(s,c,f)}var t0=TN||function(s){return kt.clearTimeout(s)};function r0(s,c){if(c)return s.slice();var f=s.length,h=w_?w_(f):new s.constructor(f);return s.copy(h),h}function Vx(s){var c=new s.constructor(s.byteLength);return new ru(c).set(new ru(s)),c}function FL(s,c){var f=c?Vx(s.buffer):s.buffer;return new s.constructor(f,s.byteOffset,s.byteLength)}function CL(s){var c=new s.constructor(s.source,Hw.exec(s));return c.lastIndex=s.lastIndex,c}function OL(s){return Oc?Ge(Oc.call(s)):{}}function n0(s,c){var f=c?Vx(s.buffer):s.buffer;return new s.constructor(f,s.byteOffset,s.length)}function i0(s,c){if(s!==c){var f=s!==t,h=s===null,y=s===s,S=Fr(s),E=c!==t,R=c===null,A=c===c,V=Fr(c);if(!R&&!V&&!S&&s>c||S&&E&&A&&!R&&!V||h&&E&&A||!f&&A||!y)return 1;if(!h&&!S&&!V&&s<c||V&&f&&y&&!h&&!S||R&&f&&y||!E&&y||!A)return-1}return 0}function NL(s,c,f){for(var h=-1,y=s.criteria,S=c.criteria,E=y.length,R=f.length;++h<E;){var A=i0(y[h],S[h]);if(A){if(h>=R)return A;var V=f[h];return A*(V=="desc"?-1:1)}}return s.index-c.index}function o0(s,c,f,h){for(var y=-1,S=s.length,E=f.length,R=-1,A=c.length,V=bt(S-E,0),B=L(A+V),j=!h;++R<A;)B[R]=c[R];for(;++y<E;)(j||y<S)&&(B[f[y]]=s[y]);for(;V--;)B[R++]=s[y++];return B}function s0(s,c,f,h){for(var y=-1,S=s.length,E=-1,R=f.length,A=-1,V=c.length,B=bt(S-R,0),j=L(B+V),Y=!h;++y<B;)j[y]=s[y];for(var oe=y;++A<V;)j[oe+A]=c[A];for(;++E<R;)(Y||y<S)&&(j[oe+f[E]]=s[y++]);return j}function dr(s,c){var f=-1,h=s.length;for(c||(c=L(h));++f<h;)c[f]=s[f];return c}function $n(s,c,f,h){var y=!f;f||(f={});for(var S=-1,E=c.length;++S<E;){var R=c[S],A=h?h(f[R],s[R],R,f,s):t;A===t&&(A=s[R]),y?gi(f,R,A):Nc(f,R,A)}return f}function LL(s,c){return $n(s,Gx(s),c)}function UL(s,c){return $n(s,T0(s),c)}function yu(s,c){return function(f,h){var y=xe(f)?$O:sL,S=c?c():{};return y(f,s,ue(h,2),S)}}function Bs(s){return ke(function(c,f){var h=-1,y=f.length,S=y>1?f[y-1]:t,E=y>2?f[2]:t;for(S=s.length>3&&typeof S=="function"?(y--,S):t,E&&Jt(f[0],f[1],E)&&(S=y<3?t:S,y=1),c=Ge(c);++h<y;){var R=f[h];R&&s(c,R,h,S)}return c})}function a0(s,c){return function(f,h){if(f==null)return f;if(!mr(f))return s(f,h);for(var y=f.length,S=c?y:-1,E=Ge(f);(c?S--:++S<y)&&h(E[S],S,E)!==!1;);return f}}function c0(s){return function(c,f,h){for(var y=-1,S=Ge(c),E=h(c),R=E.length;R--;){var A=E[s?R:++y];if(f(S[A],A,S)===!1)break}return c}}function HL(s,c,f){var h=c&b,y=Bc(s);function S(){var E=this&&this!==kt&&this instanceof S?y:s;return E.apply(h?f:this,arguments)}return S}function p0(s){return function(c){c=We(c);var f=Os(c)?En(c):t,h=f?f[0]:c.charAt(0),y=f?Ki(f,1).join(""):c.slice(1);return h[s]()+y}}function Ws(s){return function(c){return ux(aE(sE(c).replace(MO,"")),s,"")}}function Bc(s){return function(){var c=arguments;switch(c.length){case 0:return new s;case 1:return new s(c[0]);case 2:return new s(c[0],c[1]);case 3:return new s(c[0],c[1],c[2]);case 4:return new s(c[0],c[1],c[2],c[3]);case 5:return new s(c[0],c[1],c[2],c[3],c[4]);case 6:return new s(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new s(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var f=Vs(s.prototype),h=s.apply(f,c);return ot(h)?h:f}}function VL(s,c,f){var h=Bc(s);function y(){for(var S=arguments.length,E=L(S),R=S,A=$s(y);R--;)E[R]=arguments[R];var V=S<3&&E[0]!==A&&E[S-1]!==A?[]:Wi(E,A);if(S-=V.length,S<f)return m0(s,c,xu,y.placeholder,t,E,V,t,t,f-S);var B=this&&this!==kt&&this instanceof y?h:s;return Ar(B,this,E)}return y}function l0(s){return function(c,f,h){var y=Ge(c);if(!mr(c)){var S=ue(f,3);c=Pt(c),f=function(R){return S(y[R],R,y)}}var E=s(c,f,h);return E>-1?y[S?c[E]:E]:t}}function u0(s){return xi(function(c){var f=c.length,h=f,y=Jr.prototype.thru;for(s&&c.reverse();h--;){var S=c[h];if(typeof S!="function")throw new Xr(i);if(y&&!E&&bu(S)=="wrapper")var E=new Jr([],!0)}for(h=E?h:f;++h<f;){S=c[h];var R=bu(S),A=R=="wrapper"?qx(S):t;A&&Qx(A[0])&&A[1]==(ie|I|K|ae)&&!A[4].length&&A[9]==1?E=E[bu(A[0])].apply(E,A[3]):E=S.length==1&&Qx(S)?E[R]():E.thru(S)}return function(){var V=arguments,B=V[0];if(E&&V.length==1&&xe(B))return E.plant(B).value();for(var j=0,Y=f?c[j].apply(this,V):B;++j<f;)Y=c[j].call(this,Y);return Y}})}function xu(s,c,f,h,y,S,E,R,A,V){var B=c&ie,j=c&b,Y=c&v,oe=c&(I|U),fe=c&it,Ee=Y?t:Bc(s);function de(){for(var Ae=arguments.length,Fe=L(Ae),Cr=Ae;Cr--;)Fe[Cr]=arguments[Cr];if(oe)var er=$s(de),Or=XO(Fe,er);if(h&&(Fe=o0(Fe,h,y,oe)),S&&(Fe=s0(Fe,S,E,oe)),Ae-=Or,oe&&Ae<V){var dt=Wi(Fe,er);return m0(s,c,xu,de.placeholder,f,Fe,dt,R,A,V-Ae)}var Pn=j?f:this,bi=Y?Pn[s]:s;return Ae=Fe.length,R?Fe=sU(Fe,R):fe&&Ae>1&&Fe.reverse(),B&&A<Ae&&(Fe.length=A),this&&this!==kt&&this instanceof de&&(bi=Ee||Bc(bi)),bi.apply(Pn,Fe)}return de}function f0(s,c){return function(f,h){return mL(f,s,c(h),{})}}function Tu(s,c){return function(f,h){var y;if(f===t&&h===t)return c;if(f!==t&&(y=f),h!==t){if(y===t)return h;typeof f=="string"||typeof h=="string"?(f=Ir(f),h=Ir(h)):(f=Y_(f),h=Y_(h)),y=s(f,h)}return y}}function Bx(s){return xi(function(c){return c=et(c,Dr(ue())),ke(function(f){var h=this;return s(c,function(y){return Ar(y,h,f)})})})}function Su(s,c){c=c===t?" ":Ir(c);var f=c.length;if(f<2)return f?Cx(c,s):c;var h=Cx(c,su(s/Ns(c)));return Os(c)?Ki(En(h),0,s).join(""):h.slice(0,s)}function BL(s,c,f,h){var y=c&b,S=Bc(s);function E(){for(var R=-1,A=arguments.length,V=-1,B=h.length,j=L(B+A),Y=this&&this!==kt&&this instanceof E?S:s;++V<B;)j[V]=h[V];for(;A--;)j[V++]=arguments[++R];return Ar(Y,y?f:this,j)}return E}function d0(s){return function(c,f,h){return h&&typeof h!="number"&&Jt(c,f,h)&&(f=h=t),c=vi(c),f===t?(f=c,c=0):f=vi(f),h=h===t?c<f?1:-1:vi(h),RL(c,f,h,s)}}function vu(s){return function(c,f){return typeof c=="string"&&typeof f=="string"||(c=nn(c),f=nn(f)),s(c,f)}}function m0(s,c,f,h,y,S,E,R,A,V){var B=c&I,j=B?E:t,Y=B?t:E,oe=B?S:t,fe=B?t:S;c|=B?K:ne,c&=~(B?ne:K),c&F||(c&=~(b|v));var Ee=[s,c,y,oe,j,fe,Y,R,A,V],de=f.apply(t,Ee);return Qx(s)&&R0(de,Ee),de.placeholder=h,k0(de,s,c)}function Wx(s){var c=vt[s];return function(f,h){if(f=nn(f),h=h==null?0:$t(ve(h),292),h&&k_(f)){var y=(We(f)+"e").split("e"),S=c(y[0]+"e"+(+y[1]+h));return y=(We(S)+"e").split("e"),+(y[0]+"e"+(+y[1]-h))}return c(f)}}var WL=Us&&1/Zl(new Us([,-0]))[1]==Q?function(s){return new Us(s)}:lT;function h0(s){return function(c){var f=jt(c);return f==wn?xx(c):f==_n?oN(c):YO(c,s(c))}}function yi(s,c,f,h,y,S,E,R){var A=c&v;if(!A&&typeof s!="function")throw new Xr(i);var V=h?h.length:0;if(V||(c&=~(K|ne),h=y=t),E=E===t?E:bt(ve(E),0),R=R===t?R:ve(R),V-=y?y.length:0,c&ne){var B=h,j=y;h=y=t}var Y=A?t:qx(s),oe=[s,c,f,h,y,B,j,S,E,R];if(Y&&nU(oe,Y),s=oe[0],c=oe[1],f=oe[2],h=oe[3],y=oe[4],R=oe[9]=oe[9]===t?A?0:s.length:bt(oe[9]-V,0),!R&&c&(I|U)&&(c&=~(I|U)),!c||c==b)var fe=HL(s,c,f);else c==I||c==U?fe=VL(s,c,R):(c==K||c==(b|K))&&!y.length?fe=BL(s,c,f,h):fe=xu.apply(t,oe);var Ee=Y?Q_:R0;return k0(Ee(fe,oe),s,c)}function g0(s,c,f,h){return s===t||kn(s,Ls[f])&&!je.call(h,f)?c:s}function y0(s,c,f,h,y,S){return ot(s)&&ot(c)&&(S.set(c,s),mu(s,c,t,y0,S),S.delete(c)),s}function $L(s){return jc(s)?t:s}function x0(s,c,f,h,y,S){var E=f&g,R=s.length,A=c.length;if(R!=A&&!(E&&A>R))return!1;var V=S.get(s),B=S.get(c);if(V&&B)return V==c&&B==s;var j=-1,Y=!0,oe=f&x?new Lo:t;for(S.set(s,c),S.set(c,s);++j<R;){var fe=s[j],Ee=c[j];if(h)var de=E?h(Ee,fe,j,c,s,S):h(fe,Ee,j,s,c,S);if(de!==t){if(de)continue;Y=!1;break}if(oe){if(!fx(c,function(Ae,Fe){if(!Ac(oe,Fe)&&(fe===Ae||y(fe,Ae,f,h,S)))return oe.push(Fe)})){Y=!1;break}}else if(!(fe===Ee||y(fe,Ee,f,h,S))){Y=!1;break}}return S.delete(s),S.delete(c),Y}function jL(s,c,f,h,y,S,E){switch(f){case Is:if(s.byteLength!=c.byteLength||s.byteOffset!=c.byteOffset)return!1;s=s.buffer,c=c.buffer;case Mc:return!(s.byteLength!=c.byteLength||!S(new ru(s),new ru(c)));case bn:case Qr:case Ec:return kn(+s,+c);case fi:return s.name==c.name&&s.message==c.message;case Rc:case kc:return s==c+"";case wn:var R=xx;case _n:var A=h&g;if(R||(R=Zl),s.size!=c.size&&!A)return!1;var V=E.get(s);if(V)return V==c;h|=x,E.set(s,c);var B=x0(R(s),R(c),h,y,S,E);return E.delete(s),B;case jl:if(Oc)return Oc.call(s)==Oc.call(c)}return!1}function qL(s,c,f,h,y,S){var E=f&g,R=$x(s),A=R.length,V=$x(c),B=V.length;if(A!=B&&!E)return!1;for(var j=A;j--;){var Y=R[j];if(!(E?Y in c:je.call(c,Y)))return!1}var oe=S.get(s),fe=S.get(c);if(oe&&fe)return oe==c&&fe==s;var Ee=!0;S.set(s,c),S.set(c,s);for(var de=E;++j<A;){Y=R[j];var Ae=s[Y],Fe=c[Y];if(h)var Cr=E?h(Fe,Ae,Y,c,s,S):h(Ae,Fe,Y,s,c,S);if(!(Cr===t?Ae===Fe||y(Ae,Fe,f,h,S):Cr)){Ee=!1;break}de||(de=Y=="constructor")}if(Ee&&!de){var er=s.constructor,Or=c.constructor;er!=Or&&"constructor"in s&&"constructor"in c&&!(typeof er=="function"&&er instanceof er&&typeof Or=="function"&&Or instanceof Or)&&(Ee=!1)}return S.delete(s),S.delete(c),Ee}function xi(s){return Yx(_0(s,t,F0),s+"")}function $x(s){return U_(s,Pt,Gx)}function jx(s){return U_(s,hr,T0)}var qx=cu?function(s){return cu.get(s)}:lT;function bu(s){for(var c=s.name+"",f=Hs[c],h=je.call(Hs,c)?f.length:0;h--;){var y=f[h],S=y.func;if(S==null||S==s)return y.name}return c}function $s(s){var c=je.call(T,"placeholder")?T:s;return c.placeholder}function ue(){var s=T.iteratee||cT;return s=s===cT?B_:s,arguments.length?s(arguments[0],arguments[1]):s}function wu(s,c){var f=s.__data__;return JL(c)?f[typeof c=="string"?"string":"hash"]:f.map}function zx(s){for(var c=Pt(s),f=c.length;f--;){var h=c[f],y=s[h];c[f]=[h,y,b0(y)]}return c}function Vo(s,c){var f=rN(s,c);return V_(f)?f:t}function zL(s){var c=je.call(s,Oo),f=s[Oo];try{s[Oo]=t;var h=!0}catch{}var y=eu.call(s);return h&&(c?s[Oo]=f:delete s[Oo]),y}var Gx=Sx?function(s){return s==null?[]:(s=Ge(s),Vi(Sx(s),function(c){return E_.call(s,c)}))}:uT,T0=Sx?function(s){for(var c=[];s;)Bi(c,Gx(s)),s=nu(s);return c}:uT,jt=Xt;(vx&&jt(new vx(new ArrayBuffer(1)))!=Is||Ic&&jt(new Ic)!=wn||bx&&jt(bx.resolve())!=Ow||Us&&jt(new Us)!=_n||Fc&&jt(new Fc)!=Pc)&&(jt=function(s){var c=Xt(s),f=c==di?s.constructor:t,h=f?Bo(f):"";if(h)switch(h){case PN:return Is;case MN:return wn;case AN:return Ow;case DN:return _n;case IN:return Pc}return c});function GL(s,c,f){for(var h=-1,y=f.length;++h<y;){var S=f[h],E=S.size;switch(S.type){case"drop":s+=E;break;case"dropRight":c-=E;break;case"take":c=$t(c,s+E);break;case"takeRight":s=bt(s,c-E);break}}return{start:s,end:c}}function KL(s){var c=s.match(eO);return c?c[1].split(tO):[]}function S0(s,c,f){c=Gi(c,s);for(var h=-1,y=c.length,S=!1;++h<y;){var E=jn(c[h]);if(!(S=s!=null&&f(s,E)))break;s=s[E]}return S||++h!=y?S:(y=s==null?0:s.length,!!y&&Au(y)&&Ti(E,y)&&(xe(s)||Wo(s)))}function QL(s){var c=s.length,f=new s.constructor(c);return c&&typeof s[0]=="string"&&je.call(s,"index")&&(f.index=s.index,f.input=s.input),f}function v0(s){return typeof s.constructor=="function"&&!Wc(s)?Vs(nu(s)):{}}function ZL(s,c,f){var h=s.constructor;switch(c){case Mc:return Vx(s);case bn:case Qr:return new h(+s);case Is:return FL(s,f);case zy:case Gy:case Ky:case Qy:case Zy:case Yy:case Xy:case Jy:case ex:return n0(s,f);case wn:return new h;case Ec:case kc:return new h(s);case Rc:return CL(s);case _n:return new h;case jl:return OL(s)}}function YL(s,c){var f=c.length;if(!f)return s;var h=f-1;return c[h]=(f>1?"& ":"")+c[h],c=c.join(f>2?", ":" "),s.replace(JC,`{
/* [wrapped with `+c+`] */
`)}function XL(s){return xe(s)||Wo(s)||!!(R_&&s&&s[R_])}function Ti(s,c){var f=typeof s;return c=c??Z,!!c&&(f=="number"||f!="symbol"&&lO.test(s))&&s>-1&&s%1==0&&s<c}function Jt(s,c,f){if(!ot(f))return!1;var h=typeof c;return(h=="number"?mr(f)&&Ti(c,f.length):h=="string"&&c in f)?kn(f[c],s):!1}function Kx(s,c){if(xe(s))return!1;var f=typeof s;return f=="number"||f=="symbol"||f=="boolean"||s==null||Fr(s)?!0:QC.test(s)||!KC.test(s)||c!=null&&s in Ge(c)}function JL(s){var c=typeof s;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?s!=="__proto__":s===null}function Qx(s){var c=bu(s),f=T[c];if(typeof f!="function"||!(c in Ie.prototype))return!1;if(s===f)return!0;var h=qx(f);return!!h&&s===h[0]}function eU(s){return!!b_&&b_ in s}var tU=Xl?Si:fT;function Wc(s){var c=s&&s.constructor,f=typeof c=="function"&&c.prototype||Ls;return s===f}function b0(s){return s===s&&!ot(s)}function w0(s,c){return function(f){return f==null?!1:f[s]===c&&(c!==t||s in Ge(f))}}function rU(s){var c=Pu(s,function(h){return f.size===p&&f.clear(),h}),f=c.cache;return c}function nU(s,c){var f=s[1],h=c[1],y=f|h,S=y<(b|v|ie),E=h==ie&&f==I||h==ie&&f==ae&&s[7].length<=c[8]||h==(ie|ae)&&c[7].length<=c[8]&&f==I;if(!(S||E))return s;h&b&&(s[2]=c[2],y|=f&b?0:F);var R=c[3];if(R){var A=s[3];s[3]=A?o0(A,R,c[4]):R,s[4]=A?Wi(s[3],l):c[4]}return R=c[5],R&&(A=s[5],s[5]=A?s0(A,R,c[6]):R,s[6]=A?Wi(s[5],l):c[6]),R=c[7],R&&(s[7]=R),h&ie&&(s[8]=s[8]==null?c[8]:$t(s[8],c[8])),s[9]==null&&(s[9]=c[9]),s[0]=c[0],s[1]=y,s}function iU(s){var c=[];if(s!=null)for(var f in Ge(s))c.push(f);return c}function oU(s){return eu.call(s)}function _0(s,c,f){return c=bt(c===t?s.length-1:c,0),function(){for(var h=arguments,y=-1,S=bt(h.length-c,0),E=L(S);++y<S;)E[y]=h[c+y];y=-1;for(var R=L(c+1);++y<c;)R[y]=h[y];return R[c]=f(E),Ar(s,this,R)}}function E0(s,c){return c.length<2?s:Ho(s,tn(c,0,-1))}function sU(s,c){for(var f=s.length,h=$t(c.length,f),y=dr(s);h--;){var S=c[h];s[h]=Ti(S,f)?y[S]:t}return s}function Zx(s,c){if(!(c==="constructor"&&typeof s[c]=="function")&&c!="__proto__")return s[c]}var R0=P0(Q_),$c=vN||function(s,c){return kt.setTimeout(s,c)},Yx=P0(ML);function k0(s,c,f){var h=c+"";return Yx(s,YL(h,aU(KL(h),f)))}function P0(s){var c=0,f=0;return function(){var h=EN(),y=O-(h-f);if(f=h,y>0){if(++c>=N)return arguments[0]}else c=0;return s.apply(t,arguments)}}function _u(s,c){var f=-1,h=s.length,y=h-1;for(c=c===t?h:c;++f<c;){var S=Fx(f,y),E=s[S];s[S]=s[f],s[f]=E}return s.length=c,s}var M0=rU(function(s){var c=[];return s.charCodeAt(0)===46&&c.push(""),s.replace(ZC,function(f,h,y,S){c.push(y?S.replace(iO,"$1"):h||f)}),c});function jn(s){if(typeof s=="string"||Fr(s))return s;var c=s+"";return c=="0"&&1/s==-Q?"-0":c}function Bo(s){if(s!=null){try{return Jl.call(s)}catch{}try{return s+""}catch{}}return""}function aU(s,c){return Yr(ui,function(f){var h="_."+f[0];c&f[1]&&!Kl(s,h)&&s.push(h)}),s.sort()}function A0(s){if(s instanceof Ie)return s.clone();var c=new Jr(s.__wrapped__,s.__chain__);return c.__actions__=dr(s.__actions__),c.__index__=s.__index__,c.__values__=s.__values__,c}function cU(s,c,f){(f?Jt(s,c,f):c===t)?c=1:c=bt(ve(c),0);var h=s==null?0:s.length;if(!h||c<1)return[];for(var y=0,S=0,E=L(su(h/c));y<h;)E[S++]=tn(s,y,y+=c);return E}function pU(s){for(var c=-1,f=s==null?0:s.length,h=0,y=[];++c<f;){var S=s[c];S&&(y[h++]=S)}return y}function lU(){var s=arguments.length;if(!s)return[];for(var c=L(s-1),f=arguments[0],h=s;h--;)c[h-1]=arguments[h];return Bi(xe(f)?dr(f):[f],Ot(c,1))}var uU=ke(function(s,c){return ft(s)?Lc(s,Ot(c,1,ft,!0)):[]}),fU=ke(function(s,c){var f=rn(c);return ft(f)&&(f=t),ft(s)?Lc(s,Ot(c,1,ft,!0),ue(f,2)):[]}),dU=ke(function(s,c){var f=rn(c);return ft(f)&&(f=t),ft(s)?Lc(s,Ot(c,1,ft,!0),t,f):[]});function mU(s,c,f){var h=s==null?0:s.length;return h?(c=f||c===t?1:ve(c),tn(s,c<0?0:c,h)):[]}function hU(s,c,f){var h=s==null?0:s.length;return h?(c=f||c===t?1:ve(c),c=h-c,tn(s,0,c<0?0:c)):[]}function gU(s,c){return s&&s.length?gu(s,ue(c,3),!0,!0):[]}function yU(s,c){return s&&s.length?gu(s,ue(c,3),!0):[]}function xU(s,c,f,h){var y=s==null?0:s.length;return y?(f&&typeof f!="number"&&Jt(s,c,f)&&(f=0,h=y),lL(s,c,f,h)):[]}function D0(s,c,f){var h=s==null?0:s.length;if(!h)return-1;var y=f==null?0:ve(f);return y<0&&(y=bt(h+y,0)),Ql(s,ue(c,3),y)}function I0(s,c,f){var h=s==null?0:s.length;if(!h)return-1;var y=h-1;return f!==t&&(y=ve(f),y=f<0?bt(h+y,0):$t(y,h-1)),Ql(s,ue(c,3),y,!0)}function F0(s){var c=s==null?0:s.length;return c?Ot(s,1):[]}function TU(s){var c=s==null?0:s.length;return c?Ot(s,Q):[]}function SU(s,c){var f=s==null?0:s.length;return f?(c=c===t?1:ve(c),Ot(s,c)):[]}function vU(s){for(var c=-1,f=s==null?0:s.length,h={};++c<f;){var y=s[c];h[y[0]]=y[1]}return h}function C0(s){return s&&s.length?s[0]:t}function bU(s,c,f){var h=s==null?0:s.length;if(!h)return-1;var y=f==null?0:ve(f);return y<0&&(y=bt(h+y,0)),Cs(s,c,y)}function wU(s){var c=s==null?0:s.length;return c?tn(s,0,-1):[]}var _U=ke(function(s){var c=et(s,Ux);return c.length&&c[0]===s[0]?Px(c):[]}),EU=ke(function(s){var c=rn(s),f=et(s,Ux);return c===rn(f)?c=t:f.pop(),f.length&&f[0]===s[0]?Px(f,ue(c,2)):[]}),RU=ke(function(s){var c=rn(s),f=et(s,Ux);return c=typeof c=="function"?c:t,c&&f.pop(),f.length&&f[0]===s[0]?Px(f,t,c):[]});function kU(s,c){return s==null?"":wN.call(s,c)}function rn(s){var c=s==null?0:s.length;return c?s[c-1]:t}function PU(s,c,f){var h=s==null?0:s.length;if(!h)return-1;var y=h;return f!==t&&(y=ve(f),y=y<0?bt(h+y,0):$t(y,h-1)),c===c?aN(s,c,y):Ql(s,m_,y,!0)}function MU(s,c){return s&&s.length?q_(s,ve(c)):t}var AU=ke(O0);function O0(s,c){return s&&s.length&&c&&c.length?Ix(s,c):s}function DU(s,c,f){return s&&s.length&&c&&c.length?Ix(s,c,ue(f,2)):s}function IU(s,c,f){return s&&s.length&&c&&c.length?Ix(s,c,t,f):s}var FU=xi(function(s,c){var f=s==null?0:s.length,h=_x(s,c);return K_(s,et(c,function(y){return Ti(y,f)?+y:y}).sort(i0)),h});function CU(s,c){var f=[];if(!(s&&s.length))return f;var h=-1,y=[],S=s.length;for(c=ue(c,3);++h<S;){var E=s[h];c(E,h,s)&&(f.push(E),y.push(h))}return K_(s,y),f}function Xx(s){return s==null?s:kN.call(s)}function OU(s,c,f){var h=s==null?0:s.length;return h?(f&&typeof f!="number"&&Jt(s,c,f)?(c=0,f=h):(c=c==null?0:ve(c),f=f===t?h:ve(f)),tn(s,c,f)):[]}function NU(s,c){return hu(s,c)}function LU(s,c,f){return Ox(s,c,ue(f,2))}function UU(s,c){var f=s==null?0:s.length;if(f){var h=hu(s,c);if(h<f&&kn(s[h],c))return h}return-1}function HU(s,c){return hu(s,c,!0)}function VU(s,c,f){return Ox(s,c,ue(f,2),!0)}function BU(s,c){var f=s==null?0:s.length;if(f){var h=hu(s,c,!0)-1;if(kn(s[h],c))return h}return-1}function WU(s){return s&&s.length?Z_(s):[]}function $U(s,c){return s&&s.length?Z_(s,ue(c,2)):[]}function jU(s){var c=s==null?0:s.length;return c?tn(s,1,c):[]}function qU(s,c,f){return s&&s.length?(c=f||c===t?1:ve(c),tn(s,0,c<0?0:c)):[]}function zU(s,c,f){var h=s==null?0:s.length;return h?(c=f||c===t?1:ve(c),c=h-c,tn(s,c<0?0:c,h)):[]}function GU(s,c){return s&&s.length?gu(s,ue(c,3),!1,!0):[]}function KU(s,c){return s&&s.length?gu(s,ue(c,3)):[]}var QU=ke(function(s){return zi(Ot(s,1,ft,!0))}),ZU=ke(function(s){var c=rn(s);return ft(c)&&(c=t),zi(Ot(s,1,ft,!0),ue(c,2))}),YU=ke(function(s){var c=rn(s);return c=typeof c=="function"?c:t,zi(Ot(s,1,ft,!0),t,c)});function XU(s){return s&&s.length?zi(s):[]}function JU(s,c){return s&&s.length?zi(s,ue(c,2)):[]}function eH(s,c){return c=typeof c=="function"?c:t,s&&s.length?zi(s,t,c):[]}function Jx(s){if(!(s&&s.length))return[];var c=0;return s=Vi(s,function(f){if(ft(f))return c=bt(f.length,c),!0}),gx(c,function(f){return et(s,dx(f))})}function N0(s,c){if(!(s&&s.length))return[];var f=Jx(s);return c==null?f:et(f,function(h){return Ar(c,t,h)})}var tH=ke(function(s,c){return ft(s)?Lc(s,c):[]}),rH=ke(function(s){return Lx(Vi(s,ft))}),nH=ke(function(s){var c=rn(s);return ft(c)&&(c=t),Lx(Vi(s,ft),ue(c,2))}),iH=ke(function(s){var c=rn(s);return c=typeof c=="function"?c:t,Lx(Vi(s,ft),t,c)}),oH=ke(Jx);function sH(s,c){return e0(s||[],c||[],Nc)}function aH(s,c){return e0(s||[],c||[],Vc)}var cH=ke(function(s){var c=s.length,f=c>1?s[c-1]:t;return f=typeof f=="function"?(s.pop(),f):t,N0(s,f)});function L0(s){var c=T(s);return c.__chain__=!0,c}function pH(s,c){return c(s),s}function Eu(s,c){return c(s)}var lH=xi(function(s){var c=s.length,f=c?s[0]:0,h=this.__wrapped__,y=function(S){return _x(S,s)};return c>1||this.__actions__.length||!(h instanceof Ie)||!Ti(f)?this.thru(y):(h=h.slice(f,+f+(c?1:0)),h.__actions__.push({func:Eu,args:[y],thisArg:t}),new Jr(h,this.__chain__).thru(function(S){return c&&!S.length&&S.push(t),S}))});function uH(){return L0(this)}function fH(){return new Jr(this.value(),this.__chain__)}function dH(){this.__values__===t&&(this.__values__=Y0(this.value()));var s=this.__index__>=this.__values__.length,c=s?t:this.__values__[this.__index__++];return{done:s,value:c}}function mH(){return this}function hH(s){for(var c,f=this;f instanceof lu;){var h=A0(f);h.__index__=0,h.__values__=t,c?y.__wrapped__=h:c=h;var y=h;f=f.__wrapped__}return y.__wrapped__=s,c}function gH(){var s=this.__wrapped__;if(s instanceof Ie){var c=s;return this.__actions__.length&&(c=new Ie(this)),c=c.reverse(),c.__actions__.push({func:Eu,args:[Xx],thisArg:t}),new Jr(c,this.__chain__)}return this.thru(Xx)}function yH(){return J_(this.__wrapped__,this.__actions__)}var xH=yu(function(s,c,f){je.call(s,f)?++s[f]:gi(s,f,1)});function TH(s,c,f){var h=xe(s)?f_:pL;return f&&Jt(s,c,f)&&(c=t),h(s,ue(c,3))}function SH(s,c){var f=xe(s)?Vi:N_;return f(s,ue(c,3))}var vH=l0(D0),bH=l0(I0);function wH(s,c){return Ot(Ru(s,c),1)}function _H(s,c){return Ot(Ru(s,c),Q)}function EH(s,c,f){return f=f===t?1:ve(f),Ot(Ru(s,c),f)}function U0(s,c){var f=xe(s)?Yr:qi;return f(s,ue(c,3))}function H0(s,c){var f=xe(s)?jO:O_;return f(s,ue(c,3))}var RH=yu(function(s,c,f){je.call(s,f)?s[f].push(c):gi(s,f,[c])});function kH(s,c,f,h){s=mr(s)?s:qs(s),f=f&&!h?ve(f):0;var y=s.length;return f<0&&(f=bt(y+f,0)),Du(s)?f<=y&&s.indexOf(c,f)>-1:!!y&&Cs(s,c,f)>-1}var PH=ke(function(s,c,f){var h=-1,y=typeof c=="function",S=mr(s)?L(s.length):[];return qi(s,function(E){S[++h]=y?Ar(c,E,f):Uc(E,c,f)}),S}),MH=yu(function(s,c,f){gi(s,f,c)});function Ru(s,c){var f=xe(s)?et:W_;return f(s,ue(c,3))}function AH(s,c,f,h){return s==null?[]:(xe(c)||(c=c==null?[]:[c]),f=h?t:f,xe(f)||(f=f==null?[]:[f]),z_(s,c,f))}var DH=yu(function(s,c,f){s[f?0:1].push(c)},function(){return[[],[]]});function IH(s,c,f){var h=xe(s)?ux:g_,y=arguments.length<3;return h(s,ue(c,4),f,y,qi)}function FH(s,c,f){var h=xe(s)?qO:g_,y=arguments.length<3;return h(s,ue(c,4),f,y,O_)}function CH(s,c){var f=xe(s)?Vi:N_;return f(s,Mu(ue(c,3)))}function OH(s){var c=xe(s)?D_:kL;return c(s)}function NH(s,c,f){(f?Jt(s,c,f):c===t)?c=1:c=ve(c);var h=xe(s)?iL:PL;return h(s,c)}function LH(s){var c=xe(s)?oL:AL;return c(s)}function UH(s){if(s==null)return 0;if(mr(s))return Du(s)?Ns(s):s.length;var c=jt(s);return c==wn||c==_n?s.size:Ax(s).length}function HH(s,c,f){var h=xe(s)?fx:DL;return f&&Jt(s,c,f)&&(c=t),h(s,ue(c,3))}var VH=ke(function(s,c){if(s==null)return[];var f=c.length;return f>1&&Jt(s,c[0],c[1])?c=[]:f>2&&Jt(c[0],c[1],c[2])&&(c=[c[0]]),z_(s,Ot(c,1),[])}),ku=SN||function(){return kt.Date.now()};function BH(s,c){if(typeof c!="function")throw new Xr(i);return s=ve(s),function(){if(--s<1)return c.apply(this,arguments)}}function V0(s,c,f){return c=f?t:c,c=s&&c==null?s.length:c,yi(s,ie,t,t,t,t,c)}function B0(s,c){var f;if(typeof c!="function")throw new Xr(i);return s=ve(s),function(){return--s>0&&(f=c.apply(this,arguments)),s<=1&&(c=t),f}}var eT=ke(function(s,c,f){var h=b;if(f.length){var y=Wi(f,$s(eT));h|=K}return yi(s,h,c,f,y)}),W0=ke(function(s,c,f){var h=b|v;if(f.length){var y=Wi(f,$s(W0));h|=K}return yi(c,h,s,f,y)});function $0(s,c,f){c=f?t:c;var h=yi(s,I,t,t,t,t,t,c);return h.placeholder=$0.placeholder,h}function j0(s,c,f){c=f?t:c;var h=yi(s,U,t,t,t,t,t,c);return h.placeholder=j0.placeholder,h}function q0(s,c,f){var h,y,S,E,R,A,V=0,B=!1,j=!1,Y=!0;if(typeof s!="function")throw new Xr(i);c=nn(c)||0,ot(f)&&(B=!!f.leading,j="maxWait"in f,S=j?bt(nn(f.maxWait)||0,c):S,Y="trailing"in f?!!f.trailing:Y);function oe(dt){var Pn=h,bi=y;return h=y=t,V=dt,E=s.apply(bi,Pn),E}function fe(dt){return V=dt,R=$c(Ae,c),B?oe(dt):E}function Ee(dt){var Pn=dt-A,bi=dt-V,lE=c-Pn;return j?$t(lE,S-bi):lE}function de(dt){var Pn=dt-A,bi=dt-V;return A===t||Pn>=c||Pn<0||j&&bi>=S}function Ae(){var dt=ku();if(de(dt))return Fe(dt);R=$c(Ae,Ee(dt))}function Fe(dt){return R=t,Y&&h?oe(dt):(h=y=t,E)}function Cr(){R!==t&&t0(R),V=0,h=A=y=R=t}function er(){return R===t?E:Fe(ku())}function Or(){var dt=ku(),Pn=de(dt);if(h=arguments,y=this,A=dt,Pn){if(R===t)return fe(A);if(j)return t0(R),R=$c(Ae,c),oe(A)}return R===t&&(R=$c(Ae,c)),E}return Or.cancel=Cr,Or.flush=er,Or}var WH=ke(function(s,c){return C_(s,1,c)}),$H=ke(function(s,c,f){return C_(s,nn(c)||0,f)});function jH(s){return yi(s,it)}function Pu(s,c){if(typeof s!="function"||c!=null&&typeof c!="function")throw new Xr(i);var f=function(){var h=arguments,y=c?c.apply(this,h):h[0],S=f.cache;if(S.has(y))return S.get(y);var E=s.apply(this,h);return f.cache=S.set(y,E)||S,E};return f.cache=new(Pu.Cache||hi),f}Pu.Cache=hi;function Mu(s){if(typeof s!="function")throw new Xr(i);return function(){var c=arguments;switch(c.length){case 0:return!s.call(this);case 1:return!s.call(this,c[0]);case 2:return!s.call(this,c[0],c[1]);case 3:return!s.call(this,c[0],c[1],c[2])}return!s.apply(this,c)}}function qH(s){return B0(2,s)}var zH=IL(function(s,c){c=c.length==1&&xe(c[0])?et(c[0],Dr(ue())):et(Ot(c,1),Dr(ue()));var f=c.length;return ke(function(h){for(var y=-1,S=$t(h.length,f);++y<S;)h[y]=c[y].call(this,h[y]);return Ar(s,this,h)})}),tT=ke(function(s,c){var f=Wi(c,$s(tT));return yi(s,K,t,c,f)}),z0=ke(function(s,c){var f=Wi(c,$s(z0));return yi(s,ne,t,c,f)}),GH=xi(function(s,c){return yi(s,ae,t,t,t,c)});function KH(s,c){if(typeof s!="function")throw new Xr(i);return c=c===t?c:ve(c),ke(s,c)}function QH(s,c){if(typeof s!="function")throw new Xr(i);return c=c==null?0:bt(ve(c),0),ke(function(f){var h=f[c],y=Ki(f,0,c);return h&&Bi(y,h),Ar(s,this,y)})}function ZH(s,c,f){var h=!0,y=!0;if(typeof s!="function")throw new Xr(i);return ot(f)&&(h="leading"in f?!!f.leading:h,y="trailing"in f?!!f.trailing:y),q0(s,c,{leading:h,maxWait:c,trailing:y})}function YH(s){return V0(s,1)}function XH(s,c){return tT(Hx(c),s)}function JH(){if(!arguments.length)return[];var s=arguments[0];return xe(s)?s:[s]}function e2(s){return en(s,m)}function t2(s,c){return c=typeof c=="function"?c:t,en(s,m,c)}function r2(s){return en(s,u|m)}function n2(s,c){return c=typeof c=="function"?c:t,en(s,u|m,c)}function i2(s,c){return c==null||F_(s,c,Pt(c))}function kn(s,c){return s===c||s!==s&&c!==c}var o2=vu(kx),s2=vu(function(s,c){return s>=c}),Wo=H_(function(){return arguments}())?H_:function(s){return pt(s)&&je.call(s,"callee")&&!E_.call(s,"callee")},xe=L.isArray,a2=s_?Dr(s_):hL;function mr(s){return s!=null&&Au(s.length)&&!Si(s)}function ft(s){return pt(s)&&mr(s)}function c2(s){return s===!0||s===!1||pt(s)&&Xt(s)==bn}var Qi=bN||fT,p2=a_?Dr(a_):gL;function l2(s){return pt(s)&&s.nodeType===1&&!jc(s)}function u2(s){if(s==null)return!0;if(mr(s)&&(xe(s)||typeof s=="string"||typeof s.splice=="function"||Qi(s)||js(s)||Wo(s)))return!s.length;var c=jt(s);if(c==wn||c==_n)return!s.size;if(Wc(s))return!Ax(s).length;for(var f in s)if(je.call(s,f))return!1;return!0}function f2(s,c){return Hc(s,c)}function d2(s,c,f){f=typeof f=="function"?f:t;var h=f?f(s,c):t;return h===t?Hc(s,c,t,f):!!h}function rT(s){if(!pt(s))return!1;var c=Xt(s);return c==fi||c==Fo||typeof s.message=="string"&&typeof s.name=="string"&&!jc(s)}function m2(s){return typeof s=="number"&&k_(s)}function Si(s){if(!ot(s))return!1;var c=Xt(s);return c==Ds||c==Cw||c==Mr||c==UC}function G0(s){return typeof s=="number"&&s==ve(s)}function Au(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=Z}function ot(s){var c=typeof s;return s!=null&&(c=="object"||c=="function")}function pt(s){return s!=null&&typeof s=="object"}var K0=c_?Dr(c_):xL;function h2(s,c){return s===c||Mx(s,c,zx(c))}function g2(s,c,f){return f=typeof f=="function"?f:t,Mx(s,c,zx(c),f)}function y2(s){return Q0(s)&&s!=+s}function x2(s){if(tU(s))throw new ye(n);return V_(s)}function T2(s){return s===null}function S2(s){return s==null}function Q0(s){return typeof s=="number"||pt(s)&&Xt(s)==Ec}function jc(s){if(!pt(s)||Xt(s)!=di)return!1;var c=nu(s);if(c===null)return!0;var f=je.call(c,"constructor")&&c.constructor;return typeof f=="function"&&f instanceof f&&Jl.call(f)==gN}var nT=p_?Dr(p_):TL;function v2(s){return G0(s)&&s>=-Z&&s<=Z}var Z0=l_?Dr(l_):SL;function Du(s){return typeof s=="string"||!xe(s)&&pt(s)&&Xt(s)==kc}function Fr(s){return typeof s=="symbol"||pt(s)&&Xt(s)==jl}var js=u_?Dr(u_):vL;function b2(s){return s===t}function w2(s){return pt(s)&&jt(s)==Pc}function _2(s){return pt(s)&&Xt(s)==VC}var E2=vu(Dx),R2=vu(function(s,c){return s<=c});function Y0(s){if(!s)return[];if(mr(s))return Du(s)?En(s):dr(s);if(Dc&&s[Dc])return iN(s[Dc]());var c=jt(s),f=c==wn?xx:c==_n?Zl:qs;return f(s)}function vi(s){if(!s)return s===0?s:0;if(s=nn(s),s===Q||s===-Q){var c=s<0?-1:1;return c*te}return s===s?s:0}function ve(s){var c=vi(s),f=c%1;return c===c?f?c-f:c:0}function X0(s){return s?Uo(ve(s),0,re):0}function nn(s){if(typeof s=="number")return s;if(Fr(s))return he;if(ot(s)){var c=typeof s.valueOf=="function"?s.valueOf():s;s=ot(c)?c+"":c}if(typeof s!="string")return s===0?s:+s;s=y_(s);var f=aO.test(s);return f||pO.test(s)?BO(s.slice(2),f?2:8):sO.test(s)?he:+s}function J0(s){return $n(s,hr(s))}function k2(s){return s?Uo(ve(s),-Z,Z):s===0?s:0}function We(s){return s==null?"":Ir(s)}var P2=Bs(function(s,c){if(Wc(c)||mr(c)){$n(c,Pt(c),s);return}for(var f in c)je.call(c,f)&&Nc(s,f,c[f])}),eE=Bs(function(s,c){$n(c,hr(c),s)}),Iu=Bs(function(s,c,f,h){$n(c,hr(c),s,h)}),M2=Bs(function(s,c,f,h){$n(c,Pt(c),s,h)}),A2=xi(_x);function D2(s,c){var f=Vs(s);return c==null?f:I_(f,c)}var I2=ke(function(s,c){s=Ge(s);var f=-1,h=c.length,y=h>2?c[2]:t;for(y&&Jt(c[0],c[1],y)&&(h=1);++f<h;)for(var S=c[f],E=hr(S),R=-1,A=E.length;++R<A;){var V=E[R],B=s[V];(B===t||kn(B,Ls[V])&&!je.call(s,V))&&(s[V]=S[V])}return s}),F2=ke(function(s){return s.push(t,y0),Ar(tE,t,s)});function C2(s,c){return d_(s,ue(c,3),Wn)}function O2(s,c){return d_(s,ue(c,3),Rx)}function N2(s,c){return s==null?s:Ex(s,ue(c,3),hr)}function L2(s,c){return s==null?s:L_(s,ue(c,3),hr)}function U2(s,c){return s&&Wn(s,ue(c,3))}function H2(s,c){return s&&Rx(s,ue(c,3))}function V2(s){return s==null?[]:du(s,Pt(s))}function B2(s){return s==null?[]:du(s,hr(s))}function iT(s,c,f){var h=s==null?t:Ho(s,c);return h===t?f:h}function W2(s,c){return s!=null&&S0(s,c,uL)}function oT(s,c){return s!=null&&S0(s,c,fL)}var $2=f0(function(s,c,f){c!=null&&typeof c.toString!="function"&&(c=eu.call(c)),s[c]=f},aT(gr)),j2=f0(function(s,c,f){c!=null&&typeof c.toString!="function"&&(c=eu.call(c)),je.call(s,c)?s[c].push(f):s[c]=[f]},ue),q2=ke(Uc);function Pt(s){return mr(s)?A_(s):Ax(s)}function hr(s){return mr(s)?A_(s,!0):bL(s)}function z2(s,c){var f={};return c=ue(c,3),Wn(s,function(h,y,S){gi(f,c(h,y,S),h)}),f}function G2(s,c){var f={};return c=ue(c,3),Wn(s,function(h,y,S){gi(f,y,c(h,y,S))}),f}var K2=Bs(function(s,c,f){mu(s,c,f)}),tE=Bs(function(s,c,f,h){mu(s,c,f,h)}),Q2=xi(function(s,c){var f={};if(s==null)return f;var h=!1;c=et(c,function(S){return S=Gi(S,s),h||(h=S.length>1),S}),$n(s,jx(s),f),h&&(f=en(f,u|d|m,$L));for(var y=c.length;y--;)Nx(f,c[y]);return f});function Z2(s,c){return rE(s,Mu(ue(c)))}var Y2=xi(function(s,c){return s==null?{}:_L(s,c)});function rE(s,c){if(s==null)return{};var f=et(jx(s),function(h){return[h]});return c=ue(c),G_(s,f,function(h,y){return c(h,y[0])})}function X2(s,c,f){c=Gi(c,s);var h=-1,y=c.length;for(y||(y=1,s=t);++h<y;){var S=s==null?t:s[jn(c[h])];S===t&&(h=y,S=f),s=Si(S)?S.call(s):S}return s}function J2(s,c,f){return s==null?s:Vc(s,c,f)}function eV(s,c,f,h){return h=typeof h=="function"?h:t,s==null?s:Vc(s,c,f,h)}var nE=h0(Pt),iE=h0(hr);function tV(s,c,f){var h=xe(s),y=h||Qi(s)||js(s);if(c=ue(c,4),f==null){var S=s&&s.constructor;y?f=h?new S:[]:ot(s)?f=Si(S)?Vs(nu(s)):{}:f={}}return(y?Yr:Wn)(s,function(E,R,A){return c(f,E,R,A)}),f}function rV(s,c){return s==null?!0:Nx(s,c)}function nV(s,c,f){return s==null?s:X_(s,c,Hx(f))}function iV(s,c,f,h){return h=typeof h=="function"?h:t,s==null?s:X_(s,c,Hx(f),h)}function qs(s){return s==null?[]:yx(s,Pt(s))}function oV(s){return s==null?[]:yx(s,hr(s))}function sV(s,c,f){return f===t&&(f=c,c=t),f!==t&&(f=nn(f),f=f===f?f:0),c!==t&&(c=nn(c),c=c===c?c:0),Uo(nn(s),c,f)}function aV(s,c,f){return c=vi(c),f===t?(f=c,c=0):f=vi(f),s=nn(s),dL(s,c,f)}function cV(s,c,f){if(f&&typeof f!="boolean"&&Jt(s,c,f)&&(c=f=t),f===t&&(typeof c=="boolean"?(f=c,c=t):typeof s=="boolean"&&(f=s,s=t)),s===t&&c===t?(s=0,c=1):(s=vi(s),c===t?(c=s,s=0):c=vi(c)),s>c){var h=s;s=c,c=h}if(f||s%1||c%1){var y=P_();return $t(s+y*(c-s+VO("1e-"+((y+"").length-1))),c)}return Fx(s,c)}var pV=Ws(function(s,c,f){return c=c.toLowerCase(),s+(f?oE(c):c)});function oE(s){return sT(We(s).toLowerCase())}function sE(s){return s=We(s),s&&s.replace(uO,JO).replace(AO,"")}function lV(s,c,f){s=We(s),c=Ir(c);var h=s.length;f=f===t?h:Uo(ve(f),0,h);var y=f;return f-=c.length,f>=0&&s.slice(f,y)==c}function uV(s){return s=We(s),s&&qC.test(s)?s.replace(Lw,eN):s}function fV(s){return s=We(s),s&&YC.test(s)?s.replace(tx,"\\$&"):s}var dV=Ws(function(s,c,f){return s+(f?"-":"")+c.toLowerCase()}),mV=Ws(function(s,c,f){return s+(f?" ":"")+c.toLowerCase()}),hV=p0("toLowerCase");function gV(s,c,f){s=We(s),c=ve(c);var h=c?Ns(s):0;if(!c||h>=c)return s;var y=(c-h)/2;return Su(au(y),f)+s+Su(su(y),f)}function yV(s,c,f){s=We(s),c=ve(c);var h=c?Ns(s):0;return c&&h<c?s+Su(c-h,f):s}function xV(s,c,f){s=We(s),c=ve(c);var h=c?Ns(s):0;return c&&h<c?Su(c-h,f)+s:s}function TV(s,c,f){return f||c==null?c=0:c&&(c=+c),RN(We(s).replace(rx,""),c||0)}function SV(s,c,f){return(f?Jt(s,c,f):c===t)?c=1:c=ve(c),Cx(We(s),c)}function vV(){var s=arguments,c=We(s[0]);return s.length<3?c:c.replace(s[1],s[2])}var bV=Ws(function(s,c,f){return s+(f?"_":"")+c.toLowerCase()});function wV(s,c,f){return f&&typeof f!="number"&&Jt(s,c,f)&&(c=f=t),f=f===t?re:f>>>0,f?(s=We(s),s&&(typeof c=="string"||c!=null&&!nT(c))&&(c=Ir(c),!c&&Os(s))?Ki(En(s),0,f):s.split(c,f)):[]}var _V=Ws(function(s,c,f){return s+(f?" ":"")+sT(c)});function EV(s,c,f){return s=We(s),f=f==null?0:Uo(ve(f),0,s.length),c=Ir(c),s.slice(f,f+c.length)==c}function RV(s,c,f){var h=T.templateSettings;f&&Jt(s,c,f)&&(c=t),s=We(s),c=Iu({},c,h,g0);var y=Iu({},c.imports,h.imports,g0),S=Pt(y),E=yx(y,S),R,A,V=0,B=c.interpolate||ql,j="__p += '",Y=Tx((c.escape||ql).source+"|"+B.source+"|"+(B===Uw?oO:ql).source+"|"+(c.evaluate||ql).source+"|$","g"),oe="//# sourceURL="+(je.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++OO+"]")+`
`;s.replace(Y,function(de,Ae,Fe,Cr,er,Or){return Fe||(Fe=Cr),j+=s.slice(V,Or).replace(fO,tN),Ae&&(R=!0,j+=`' +
__e(`+Ae+`) +
'`),er&&(A=!0,j+=`';
`+er+`;
__p += '`),Fe&&(j+=`' +
((__t = (`+Fe+`)) == null ? '' : __t) +
'`),V=Or+de.length,de}),j+=`';
`;var fe=je.call(c,"variable")&&c.variable;if(!fe)j=`with (obj) {
`+j+`
}
`;else if(nO.test(fe))throw new ye(o);j=(A?j.replace(BC,""):j).replace(WC,"$1").replace($C,"$1;"),j="function("+(fe||"obj")+`) {
`+(fe?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(R?", __e = _.escape":"")+(A?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+j+`return __p
}`;var Ee=cE(function(){return Ve(S,oe+"return "+j).apply(t,E)});if(Ee.source=j,rT(Ee))throw Ee;return Ee}function kV(s){return We(s).toLowerCase()}function PV(s){return We(s).toUpperCase()}function MV(s,c,f){if(s=We(s),s&&(f||c===t))return y_(s);if(!s||!(c=Ir(c)))return s;var h=En(s),y=En(c),S=x_(h,y),E=T_(h,y)+1;return Ki(h,S,E).join("")}function AV(s,c,f){if(s=We(s),s&&(f||c===t))return s.slice(0,v_(s)+1);if(!s||!(c=Ir(c)))return s;var h=En(s),y=T_(h,En(c))+1;return Ki(h,0,y).join("")}function DV(s,c,f){if(s=We(s),s&&(f||c===t))return s.replace(rx,"");if(!s||!(c=Ir(c)))return s;var h=En(s),y=x_(h,En(c));return Ki(h,y).join("")}function IV(s,c){var f=Ct,h=ct;if(ot(c)){var y="separator"in c?c.separator:y;f="length"in c?ve(c.length):f,h="omission"in c?Ir(c.omission):h}s=We(s);var S=s.length;if(Os(s)){var E=En(s);S=E.length}if(f>=S)return s;var R=f-Ns(h);if(R<1)return h;var A=E?Ki(E,0,R).join(""):s.slice(0,R);if(y===t)return A+h;if(E&&(R+=A.length-R),nT(y)){if(s.slice(R).search(y)){var V,B=A;for(y.global||(y=Tx(y.source,We(Hw.exec(y))+"g")),y.lastIndex=0;V=y.exec(B);)var j=V.index;A=A.slice(0,j===t?R:j)}}else if(s.indexOf(Ir(y),R)!=R){var Y=A.lastIndexOf(y);Y>-1&&(A=A.slice(0,Y))}return A+h}function FV(s){return s=We(s),s&&jC.test(s)?s.replace(Nw,cN):s}var CV=Ws(function(s,c,f){return s+(f?" ":"")+c.toUpperCase()}),sT=p0("toUpperCase");function aE(s,c,f){return s=We(s),c=f?t:c,c===t?nN(s)?uN(s):KO(s):s.match(c)||[]}var cE=ke(function(s,c){try{return Ar(s,t,c)}catch(f){return rT(f)?f:new ye(f)}}),OV=xi(function(s,c){return Yr(c,function(f){f=jn(f),gi(s,f,eT(s[f],s))}),s});function NV(s){var c=s==null?0:s.length,f=ue();return s=c?et(s,function(h){if(typeof h[1]!="function")throw new Xr(i);return[f(h[0]),h[1]]}):[],ke(function(h){for(var y=-1;++y<c;){var S=s[y];if(Ar(S[0],this,h))return Ar(S[1],this,h)}})}function LV(s){return cL(en(s,u))}function aT(s){return function(){return s}}function UV(s,c){return s==null||s!==s?c:s}var HV=u0(),VV=u0(!0);function gr(s){return s}function cT(s){return B_(typeof s=="function"?s:en(s,u))}function BV(s){return $_(en(s,u))}function WV(s,c){return j_(s,en(c,u))}var $V=ke(function(s,c){return function(f){return Uc(f,s,c)}}),jV=ke(function(s,c){return function(f){return Uc(s,f,c)}});function pT(s,c,f){var h=Pt(c),y=du(c,h);f==null&&!(ot(c)&&(y.length||!h.length))&&(f=c,c=s,s=this,y=du(c,Pt(c)));var S=!(ot(f)&&"chain"in f)||!!f.chain,E=Si(s);return Yr(y,function(R){var A=c[R];s[R]=A,E&&(s.prototype[R]=function(){var V=this.__chain__;if(S||V){var B=s(this.__wrapped__),j=B.__actions__=dr(this.__actions__);return j.push({func:A,args:arguments,thisArg:s}),B.__chain__=V,B}return A.apply(s,Bi([this.value()],arguments))})}),s}function qV(){return kt._===this&&(kt._=yN),this}function lT(){}function zV(s){return s=ve(s),ke(function(c){return q_(c,s)})}var GV=Bx(et),KV=Bx(f_),QV=Bx(fx);function pE(s){return Kx(s)?dx(jn(s)):EL(s)}function ZV(s){return function(c){return s==null?t:Ho(s,c)}}var YV=d0(),XV=d0(!0);function uT(){return[]}function fT(){return!1}function JV(){return{}}function eB(){return""}function tB(){return!0}function rB(s,c){if(s=ve(s),s<1||s>Z)return[];var f=re,h=$t(s,re);c=ue(c),s-=re;for(var y=gx(h,c);++f<s;)c(f);return y}function nB(s){return xe(s)?et(s,jn):Fr(s)?[s]:dr(M0(We(s)))}function iB(s){var c=++hN;return We(s)+c}var oB=Tu(function(s,c){return s+c},0),sB=Wx("ceil"),aB=Tu(function(s,c){return s/c},1),cB=Wx("floor");function pB(s){return s&&s.length?fu(s,gr,kx):t}function lB(s,c){return s&&s.length?fu(s,ue(c,2),kx):t}function uB(s){return h_(s,gr)}function fB(s,c){return h_(s,ue(c,2))}function dB(s){return s&&s.length?fu(s,gr,Dx):t}function mB(s,c){return s&&s.length?fu(s,ue(c,2),Dx):t}var hB=Tu(function(s,c){return s*c},1),gB=Wx("round"),yB=Tu(function(s,c){return s-c},0);function xB(s){return s&&s.length?hx(s,gr):0}function TB(s,c){return s&&s.length?hx(s,ue(c,2)):0}return T.after=BH,T.ary=V0,T.assign=P2,T.assignIn=eE,T.assignInWith=Iu,T.assignWith=M2,T.at=A2,T.before=B0,T.bind=eT,T.bindAll=OV,T.bindKey=W0,T.castArray=JH,T.chain=L0,T.chunk=cU,T.compact=pU,T.concat=lU,T.cond=NV,T.conforms=LV,T.constant=aT,T.countBy=xH,T.create=D2,T.curry=$0,T.curryRight=j0,T.debounce=q0,T.defaults=I2,T.defaultsDeep=F2,T.defer=WH,T.delay=$H,T.difference=uU,T.differenceBy=fU,T.differenceWith=dU,T.drop=mU,T.dropRight=hU,T.dropRightWhile=gU,T.dropWhile=yU,T.fill=xU,T.filter=SH,T.flatMap=wH,T.flatMapDeep=_H,T.flatMapDepth=EH,T.flatten=F0,T.flattenDeep=TU,T.flattenDepth=SU,T.flip=jH,T.flow=HV,T.flowRight=VV,T.fromPairs=vU,T.functions=V2,T.functionsIn=B2,T.groupBy=RH,T.initial=wU,T.intersection=_U,T.intersectionBy=EU,T.intersectionWith=RU,T.invert=$2,T.invertBy=j2,T.invokeMap=PH,T.iteratee=cT,T.keyBy=MH,T.keys=Pt,T.keysIn=hr,T.map=Ru,T.mapKeys=z2,T.mapValues=G2,T.matches=BV,T.matchesProperty=WV,T.memoize=Pu,T.merge=K2,T.mergeWith=tE,T.method=$V,T.methodOf=jV,T.mixin=pT,T.negate=Mu,T.nthArg=zV,T.omit=Q2,T.omitBy=Z2,T.once=qH,T.orderBy=AH,T.over=GV,T.overArgs=zH,T.overEvery=KV,T.overSome=QV,T.partial=tT,T.partialRight=z0,T.partition=DH,T.pick=Y2,T.pickBy=rE,T.property=pE,T.propertyOf=ZV,T.pull=AU,T.pullAll=O0,T.pullAllBy=DU,T.pullAllWith=IU,T.pullAt=FU,T.range=YV,T.rangeRight=XV,T.rearg=GH,T.reject=CH,T.remove=CU,T.rest=KH,T.reverse=Xx,T.sampleSize=NH,T.set=J2,T.setWith=eV,T.shuffle=LH,T.slice=OU,T.sortBy=VH,T.sortedUniq=WU,T.sortedUniqBy=$U,T.split=wV,T.spread=QH,T.tail=jU,T.take=qU,T.takeRight=zU,T.takeRightWhile=GU,T.takeWhile=KU,T.tap=pH,T.throttle=ZH,T.thru=Eu,T.toArray=Y0,T.toPairs=nE,T.toPairsIn=iE,T.toPath=nB,T.toPlainObject=J0,T.transform=tV,T.unary=YH,T.union=QU,T.unionBy=ZU,T.unionWith=YU,T.uniq=XU,T.uniqBy=JU,T.uniqWith=eH,T.unset=rV,T.unzip=Jx,T.unzipWith=N0,T.update=nV,T.updateWith=iV,T.values=qs,T.valuesIn=oV,T.without=tH,T.words=aE,T.wrap=XH,T.xor=rH,T.xorBy=nH,T.xorWith=iH,T.zip=oH,T.zipObject=sH,T.zipObjectDeep=aH,T.zipWith=cH,T.entries=nE,T.entriesIn=iE,T.extend=eE,T.extendWith=Iu,pT(T,T),T.add=oB,T.attempt=cE,T.camelCase=pV,T.capitalize=oE,T.ceil=sB,T.clamp=sV,T.clone=e2,T.cloneDeep=r2,T.cloneDeepWith=n2,T.cloneWith=t2,T.conformsTo=i2,T.deburr=sE,T.defaultTo=UV,T.divide=aB,T.endsWith=lV,T.eq=kn,T.escape=uV,T.escapeRegExp=fV,T.every=TH,T.find=vH,T.findIndex=D0,T.findKey=C2,T.findLast=bH,T.findLastIndex=I0,T.findLastKey=O2,T.floor=cB,T.forEach=U0,T.forEachRight=H0,T.forIn=N2,T.forInRight=L2,T.forOwn=U2,T.forOwnRight=H2,T.get=iT,T.gt=o2,T.gte=s2,T.has=W2,T.hasIn=oT,T.head=C0,T.identity=gr,T.includes=kH,T.indexOf=bU,T.inRange=aV,T.invoke=q2,T.isArguments=Wo,T.isArray=xe,T.isArrayBuffer=a2,T.isArrayLike=mr,T.isArrayLikeObject=ft,T.isBoolean=c2,T.isBuffer=Qi,T.isDate=p2,T.isElement=l2,T.isEmpty=u2,T.isEqual=f2,T.isEqualWith=d2,T.isError=rT,T.isFinite=m2,T.isFunction=Si,T.isInteger=G0,T.isLength=Au,T.isMap=K0,T.isMatch=h2,T.isMatchWith=g2,T.isNaN=y2,T.isNative=x2,T.isNil=S2,T.isNull=T2,T.isNumber=Q0,T.isObject=ot,T.isObjectLike=pt,T.isPlainObject=jc,T.isRegExp=nT,T.isSafeInteger=v2,T.isSet=Z0,T.isString=Du,T.isSymbol=Fr,T.isTypedArray=js,T.isUndefined=b2,T.isWeakMap=w2,T.isWeakSet=_2,T.join=kU,T.kebabCase=dV,T.last=rn,T.lastIndexOf=PU,T.lowerCase=mV,T.lowerFirst=hV,T.lt=E2,T.lte=R2,T.max=pB,T.maxBy=lB,T.mean=uB,T.meanBy=fB,T.min=dB,T.minBy=mB,T.stubArray=uT,T.stubFalse=fT,T.stubObject=JV,T.stubString=eB,T.stubTrue=tB,T.multiply=hB,T.nth=MU,T.noConflict=qV,T.noop=lT,T.now=ku,T.pad=gV,T.padEnd=yV,T.padStart=xV,T.parseInt=TV,T.random=cV,T.reduce=IH,T.reduceRight=FH,T.repeat=SV,T.replace=vV,T.result=X2,T.round=gB,T.runInContext=P,T.sample=OH,T.size=UH,T.snakeCase=bV,T.some=HH,T.sortedIndex=NU,T.sortedIndexBy=LU,T.sortedIndexOf=UU,T.sortedLastIndex=HU,T.sortedLastIndexBy=VU,T.sortedLastIndexOf=BU,T.startCase=_V,T.startsWith=EV,T.subtract=yB,T.sum=xB,T.sumBy=TB,T.template=RV,T.times=rB,T.toFinite=vi,T.toInteger=ve,T.toLength=X0,T.toLower=kV,T.toNumber=nn,T.toSafeInteger=k2,T.toString=We,T.toUpper=PV,T.trim=MV,T.trimEnd=AV,T.trimStart=DV,T.truncate=IV,T.unescape=FV,T.uniqueId=iB,T.upperCase=CV,T.upperFirst=sT,T.each=U0,T.eachRight=H0,T.first=C0,pT(T,function(){var s={};return Wn(T,function(c,f){je.call(T.prototype,f)||(s[f]=c)}),s}(),{chain:!1}),T.VERSION=e,Yr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(s){T[s].placeholder=T}),Yr(["drop","take"],function(s,c){Ie.prototype[s]=function(f){f=f===t?1:bt(ve(f),0);var h=this.__filtered__&&!c?new Ie(this):this.clone();return h.__filtered__?h.__takeCount__=$t(f,h.__takeCount__):h.__views__.push({size:$t(f,re),type:s+(h.__dir__<0?"Right":"")}),h},Ie.prototype[s+"Right"]=function(f){return this.reverse()[s](f).reverse()}}),Yr(["filter","map","takeWhile"],function(s,c){var f=c+1,h=f==D||f==z;Ie.prototype[s]=function(y){var S=this.clone();return S.__iteratees__.push({iteratee:ue(y,3),type:f}),S.__filtered__=S.__filtered__||h,S}}),Yr(["head","last"],function(s,c){var f="take"+(c?"Right":"");Ie.prototype[s]=function(){return this[f](1).value()[0]}}),Yr(["initial","tail"],function(s,c){var f="drop"+(c?"":"Right");Ie.prototype[s]=function(){return this.__filtered__?new Ie(this):this[f](1)}}),Ie.prototype.compact=function(){return this.filter(gr)},Ie.prototype.find=function(s){return this.filter(s).head()},Ie.prototype.findLast=function(s){return this.reverse().find(s)},Ie.prototype.invokeMap=ke(function(s,c){return typeof s=="function"?new Ie(this):this.map(function(f){return Uc(f,s,c)})}),Ie.prototype.reject=function(s){return this.filter(Mu(ue(s)))},Ie.prototype.slice=function(s,c){s=ve(s);var f=this;return f.__filtered__&&(s>0||c<0)?new Ie(f):(s<0?f=f.takeRight(-s):s&&(f=f.drop(s)),c!==t&&(c=ve(c),f=c<0?f.dropRight(-c):f.take(c-s)),f)},Ie.prototype.takeRightWhile=function(s){return this.reverse().takeWhile(s).reverse()},Ie.prototype.toArray=function(){return this.take(re)},Wn(Ie.prototype,function(s,c){var f=/^(?:filter|find|map|reject)|While$/.test(c),h=/^(?:head|last)$/.test(c),y=T[h?"take"+(c=="last"?"Right":""):c],S=h||/^find/.test(c);y&&(T.prototype[c]=function(){var E=this.__wrapped__,R=h?[1]:arguments,A=E instanceof Ie,V=R[0],B=A||xe(E),j=function(Ae){var Fe=y.apply(T,Bi([Ae],R));return h&&Y?Fe[0]:Fe};B&&f&&typeof V=="function"&&V.length!=1&&(A=B=!1);var Y=this.__chain__,oe=!!this.__actions__.length,fe=S&&!Y,Ee=A&&!oe;if(!S&&B){E=Ee?E:new Ie(this);var de=s.apply(E,R);return de.__actions__.push({func:Eu,args:[j],thisArg:t}),new Jr(de,Y)}return fe&&Ee?s.apply(this,R):(de=this.thru(j),fe?h?de.value()[0]:de.value():de)})}),Yr(["pop","push","shift","sort","splice","unshift"],function(s){var c=Yl[s],f=/^(?:push|sort|unshift)$/.test(s)?"tap":"thru",h=/^(?:pop|shift)$/.test(s);T.prototype[s]=function(){var y=arguments;if(h&&!this.__chain__){var S=this.value();return c.apply(xe(S)?S:[],y)}return this[f](function(E){return c.apply(xe(E)?E:[],y)})}}),Wn(Ie.prototype,function(s,c){var f=T[c];if(f){var h=f.name+"";je.call(Hs,h)||(Hs[h]=[]),Hs[h].push({name:c,func:f})}}),Hs[xu(t,v).name]=[{name:"wrapper",func:t}],Ie.prototype.clone=FN,Ie.prototype.reverse=CN,Ie.prototype.value=ON,T.prototype.at=lH,T.prototype.chain=uH,T.prototype.commit=fH,T.prototype.next=dH,T.prototype.plant=hH,T.prototype.reverse=gH,T.prototype.toJSON=T.prototype.valueOf=T.prototype.value=yH,T.prototype.first=T.prototype.head,Dc&&(T.prototype[Dc]=mH),T},$i=fN();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(kt._=$i,define(function(){return $i})):Co?((Co.exports=$i)._=$i,cx._=$i):kt._=$i}).call(pc)});var NF=Ke((HUe,OF)=>{"use strict";OF.exports=FF;function FF(t,e,r){t instanceof RegExp&&(t=IF(t,r)),e instanceof RegExp&&(e=IF(e,r));var n=CF(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}function IF(t,e){var r=e.match(t);return r?r[0]:null}FF.range=CF;function CF(t,e,r){var n,i,o,a,p,l=r.indexOf(t),u=r.indexOf(e,l+1),d=l;if(l>=0&&u>0){if(t===e)return[l,u];for(n=[],o=r.length;d>=0&&!p;)d==l?(n.push(d),l=r.indexOf(t,d+1)):n.length==1?p=[n.pop(),u]:(i=n.pop(),i<o&&(o=i,a=u),u=r.indexOf(e,d+1)),d=l<u&&l>=0?l:u;n.length&&(p=[o,a])}return p}});var jF=Ke((VUe,$F)=>{var LF=NF();$F.exports=BZ;var UF="\0SLASH"+Math.random()+"\0",HF="\0OPEN"+Math.random()+"\0",mb="\0CLOSE"+Math.random()+"\0",VF="\0COMMA"+Math.random()+"\0",BF="\0PERIOD"+Math.random()+"\0";function db(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function HZ(t){return t.split("\\\\").join(UF).split("\\{").join(HF).split("\\}").join(mb).split("\\,").join(VF).split("\\.").join(BF)}function VZ(t){return t.split(UF).join("\\").split(HF).join("{").split(mb).join("}").split(VF).join(",").split(BF).join(".")}function WF(t){if(!t)return[""];var e=[],r=LF("{","}",t);if(!r)return t.split(",");var n=r.pre,i=r.body,o=r.post,a=n.split(",");a[a.length-1]+="{"+i+"}";var p=WF(o);return o.length&&(a[a.length-1]+=p.shift(),a.push.apply(a,p)),e.push.apply(e,a),e}function BZ(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),Tl(HZ(t),!0).map(VZ)):[]}function WZ(t){return"{"+t+"}"}function $Z(t){return/^-?0\d/.test(t)}function jZ(t,e){return t<=e}function qZ(t,e){return t>=e}function Tl(t,e){var r=[],n=LF("{","}",t);if(!n)return[t];var i=n.pre,o=n.post.length?Tl(n.post,!1):[""];if(/\$$/.test(n.pre))for(var a=0;a<o.length;a++){var p=i+"{"+n.body+"}"+o[a];r.push(p)}else{var l=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),u=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),d=l||u,m=n.body.indexOf(",")>=0;if(!d&&!m)return n.post.match(/,.*\}/)?(t=n.pre+"{"+n.body+mb+n.post,Tl(t)):[t];var g;if(d)g=n.body.split(/\.\./);else if(g=WF(n.body),g.length===1&&(g=Tl(g[0],!1).map(WZ),g.length===1))return o.map(function(N){return n.pre+g[0]+N});var x;if(d){var b=db(g[0]),v=db(g[1]),F=Math.max(g[0].length,g[1].length),I=g.length==3?Math.abs(db(g[2])):1,U=jZ,K=v<b;K&&(I*=-1,U=qZ);var ne=g.some($Z);x=[];for(var ie=b;U(ie,v);ie+=I){var ae;if(u)ae=String.fromCharCode(ie),ae==="\\"&&(ae="");else if(ae=String(ie),ne){var it=F-ae.length;if(it>0){var Ct=new Array(it+1).join("0");ie<0?ae="-"+Ct+ae.slice(1):ae=Ct+ae}}x.push(ae)}}else{x=[];for(var ct=0;ct<g.length;ct++)x.push.apply(x,Tl(g[ct],!1))}for(var ct=0;ct<x.length;ct++)for(var a=0;a<o.length;a++){var p=i+x[ct]+o[a];(!e||d||p)&&r.push(p)}}return r}});var DX={};EB(DX,{default:()=>NC});module.exports=RB(DX);var dT="cursorless.command",Cu=class{constructor(e){this.baseTitle=e}get title(){return`Cursorless: ${this.baseTitle}`}},lt=class extends Cu{constructor(){super(...arguments);this.isVisible=!1}},mt=class extends Cu{constructor(){super(...arguments);this.isVisible=!0}};var FX={"cursorless.toggleDecorations":new mt("Toggle decorations"),"cursorless.recomputeDecorationStyles":new mt("Recompute decoration styles"),"cursorless.recordTestCase":new mt("Record test case"),"cursorless.recordOneTestCaseThenPause":new mt("Record one test case, then pause"),"cursorless.pauseRecording":new mt("Pause test case recording"),"cursorless.resumeRecording":new mt("Resume test case recording"),"cursorless.recordScopeTests.showUnimplementedFacets":new mt("Bulk record unimplemented scope facets"),"cursorless.recordScopeTests.saveActiveDocument":new mt("Bulk save scope tests for the active document"),"cursorless.showDocumentation":new mt("Show documentation"),"cursorless.showInstallationDependencies":new mt("Show installation dependencies"),"cursorless.showScopeVisualizer":new mt("Show the scope visualizer"),"cursorless.hideScopeVisualizer":new mt("Hide the scope visualizer"),"cursorless.analyzeCommandHistory":new mt("Analyze collected command history"),"cursorless.tutorial.start":new lt("Start a tutorial"),"cursorless.tutorial.next":new mt("Tutorial next"),"cursorless.tutorial.previous":new mt("Tutorial previous"),"cursorless.tutorial.restart":new mt("Tutorial restart"),"cursorless.tutorial.resume":new mt("Tutorial resume"),"cursorless.tutorial.list":new mt("Tutorial list"),"cursorless.documentationOpened":new lt("Used by talon to notify us that the docs have been opened; for use with tutorial"),"cursorless.command":new lt("The core cursorless command"),"cursorless.repeatPreviousCommand":new mt("Repeat the previous Cursorless command"),"cursorless.showQuickPick":new lt("Pop up a quick pick of all cursorless commands"),"cursorless.showCheatsheet":new lt("Display the cursorless cheatsheet"),"cursorless.internal.updateCheatsheetDefaults":new lt("Update the default values of the cheatsheet payload used on the website and for local development. Be sure to run this on stock community and cursorless."),"cursorless.private.logQuickActions":new lt("Log the quick actions available at the current cursor position"),"cursorless.takeSnapshot":new lt("Take a snapshot of the current editor state"),"cursorless.keyboard.escape":new lt("Should be mapped to the escape key when using cursorless keyboard. By default, exits modal keyboard mode, but changes behaviour when Cursorless is expecting a continuation keystroke.  For example, when you type a color and Cursorless is waiting for a character, it cancels the color and switches back to modal mode."),"cursorless.keyboard.targeted.targetHat":new lt("Sets the keyboard target to the given hat"),"cursorless.keyboard.targeted.targetScope":new lt("Sets the keyboard target to the scope containing the current target"),"cursorless.keyboard.targeted.targetSelection":new lt("Sets the keyboard target to the current selection"),"cursorless.keyboard.targeted.clearTarget":new lt("Clears the current keyboard target"),"cursorless.keyboard.targeted.runActionOnTarget":new lt("Run the given action on the current keyboard target"),"cursorless.keyboard.modal.modeOn":new lt("Turn on the cursorless modal mode"),"cursorless.keyboard.modal.modeOff":new lt("Turn off the cursorless modal mode"),"cursorless.keyboard.modal.modeToggle":new lt("Toggle the cursorless modal mode"),"cursorless.keyboard.undoTarget":new lt("Undo keyboard targeting changes"),"cursorless.keyboard.redoTarget":new lt("Redo keyboard targeting changes"),"cursorless.migrateSnippets":new lt("Migrate snippets from the old Cursorless format to the new community format")};var Ou=class{constructor(e,r){this.callback=e;this.debounceDelayMs=r;this.timeoutHandle=null;this.run=this.run.bind(this)}run(){this.timeoutHandle!=null&&clearTimeout(this.timeoutHandle),this.timeoutHandle=setTimeout(()=>{this.callback(),this.timeoutHandle=null},this.debounceDelayMs)}dispose(){this.timeoutHandle!=null&&clearTimeout(this.timeoutHandle)}};var Nu=class extends Error{constructor(e){super(`Language '${e}' is not implemented yet; See https://www.cursorless.org/docs/contributing/adding-a-new-language/`),this.name="UnsupportedLanguageError"}};var Lu=class extends Error{constructor(){super("Cursorless Talon version is ahead of Cursorless VSCode extension version. Please update Cursorless VSCode.")}},ut=class extends Error{constructor(e){super(`Couldn't find containing ${e}.`),this.name="NoContainingScopeError"}};var Uu=class{constructor(){this.signals={prePhrase:{getVersion:async()=>null}}}async getFocusedElementType(){return this.focusedElementType}setFocusedElementType(e){this.focusedElementType=e}};var kB=typeof global=="object"&&global&&global.Object===Object&&global,Hu=kB;var PB=typeof self=="object"&&self&&self.Object===Object&&self,MB=Hu||PB||Function("return this")(),Mt=MB;var AB=Mt.Symbol,tr=AB;var fE=Object.prototype,DB=fE.hasOwnProperty,IB=fE.toString,qc=tr?tr.toStringTag:void 0;function FB(t){var e=DB.call(t,qc),r=t[qc];try{t[qc]=void 0;var n=!0}catch{}var i=IB.call(t);return n&&(e?t[qc]=r:delete t[qc]),i}var dE=FB;var CB=Object.prototype,OB=CB.toString;function NB(t){return OB.call(t)}var mE=NB;var LB="[object Null]",UB="[object Undefined]",hE=tr?tr.toStringTag:void 0;function HB(t){return t==null?t===void 0?UB:LB:hE&&hE in Object(t)?dE(t):mE(t)}var Mn=HB;function VB(t){return t!=null&&typeof t=="object"}var rr=VB;var BB="[object Symbol]";function WB(t){return typeof t=="symbol"||rr(t)&&Mn(t)==BB}var Nr=WB;function $B(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var on=$B;var jB=Array.isArray,qe=jB;var qB=1/0,gE=tr?tr.prototype:void 0,yE=gE?gE.toString:void 0;function xE(t){if(typeof t=="string")return t;if(qe(t))return on(t,xE)+"";if(Nr(t))return yE?yE.call(t):"";var e=t+"";return e=="0"&&1/t==-qB?"-0":e}var TE=xE;var zB=/\s/;function GB(t){for(var e=t.length;e--&&zB.test(t.charAt(e)););return e}var SE=GB;var KB=/^\s+/;function QB(t){return t&&t.slice(0,SE(t)+1).replace(KB,"")}var vE=QB;function ZB(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Lr=ZB;var bE=NaN,YB=/^[-+]0x[0-9a-f]+$/i,XB=/^0b[01]+$/i,JB=/^0o[0-7]+$/i,eW=parseInt;function tW(t){if(typeof t=="number")return t;if(Nr(t))return bE;if(Lr(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Lr(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=vE(t);var r=XB.test(t);return r||JB.test(t)?eW(t.slice(2),r?2:8):YB.test(t)?bE:+t}var wE=tW;var _E=1/0,rW=17976931348623157e292;function nW(t){if(!t)return t===0?t:0;if(t=wE(t),t===_E||t===-_E){var e=t<0?-1:1;return e*rW}return t===t?t:0}var zs=nW;function iW(t){var e=zs(t),r=e%1;return e===e?r?e-r:e:0}var Vu=iW;function oW(t){return t}var xr=oW;var sW="[object AsyncFunction]",aW="[object Function]",cW="[object GeneratorFunction]",pW="[object Proxy]";function lW(t){if(!Lr(t))return!1;var e=Mn(t);return e==aW||e==cW||e==sW||e==pW}var Bu=lW;var uW=Mt["__core-js_shared__"],Wu=uW;var EE=function(){var t=/[^.]+$/.exec(Wu&&Wu.keys&&Wu.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function fW(t){return!!EE&&EE in t}var RE=fW;var dW=Function.prototype,mW=dW.toString;function hW(t){if(t!=null){try{return mW.call(t)}catch{}try{return t+""}catch{}}return""}var wi=hW;var gW=/[\\^$.*+?()[\]{}|]/g,yW=/^\[object .+?Constructor\]$/,xW=Function.prototype,TW=Object.prototype,SW=xW.toString,vW=TW.hasOwnProperty,bW=RegExp("^"+SW.call(vW).replace(gW,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function wW(t){if(!Lr(t)||RE(t))return!1;var e=Bu(t)?bW:yW;return e.test(wi(t))}var kE=wW;function _W(t,e){return t?.[e]}var PE=_W;function EW(t,e){var r=PE(t,e);return kE(r)?r:void 0}var Tr=EW;var RW=Tr(Mt,"WeakMap"),$o=RW;var kW=$o&&new $o,mT=kW;var ME=Object.create,PW=function(){function t(){}return function(e){if(!Lr(e))return{};if(ME)return ME(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),$u=PW;function MW(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var AE=MW;function AW(){}var Gs=AW;var DW=4294967295;function ju(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=DW,this.__views__=[]}ju.prototype=$u(Gs.prototype);ju.prototype.constructor=ju;var Ks=ju;function IW(){}var qu=IW;var FW=mT?function(t){return mT.get(t)}:qu,zu=FW;var CW={},hT=CW;var OW=Object.prototype,NW=OW.hasOwnProperty;function LW(t){for(var e=t.name+"",r=hT[e],n=NW.call(hT,e)?r.length:0;n--;){var i=r[n],o=i.func;if(o==null||o==t)return i.name}return e}var Qs=LW;function Gu(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}Gu.prototype=$u(Gs.prototype);Gu.prototype.constructor=Gu;var Zi=Gu;function UW(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var Yi=UW;function HW(t){if(t instanceof Ks)return t.clone();var e=new Zi(t.__wrapped__,t.__chain__);return e.__actions__=Yi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var DE=HW;var VW=Object.prototype,BW=VW.hasOwnProperty;function Ku(t){if(rr(t)&&!qe(t)&&!(t instanceof Ks)){if(t instanceof Zi)return t;if(BW.call(t,"__wrapped__"))return DE(t)}return new Zi(t)}Ku.prototype=Gs.prototype;Ku.prototype.constructor=Ku;var IE=Ku;function WW(t){var e=Qs(t),r=IE[e];if(typeof r!="function"||!(e in Ks.prototype))return!1;if(t===r)return!0;var n=zu(r);return!!n&&t===n[0]}var gT=WW;var $W=800,jW=16,qW=Date.now;function zW(t){var e=0,r=0;return function(){var n=qW(),i=jW-(n-r);if(r=n,i>0){if(++e>=$W)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var FE=zW;function GW(t){return function(){return t}}var CE=GW;var KW=function(){try{var t=Tr(Object,"defineProperty");return t({},"",{}),t}catch{}}(),yT=KW;var QW=yT?function(t,e){return yT(t,"toString",{configurable:!0,enumerable:!1,value:CE(e),writable:!0})}:xr,OE=QW;var ZW=FE(OE),Qu=ZW;function YW(t,e,r,n){for(var i=t.length,o=r+(n?1:-1);n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}var Zu=YW;function XW(t){return t!==t}var NE=XW;function JW(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}var LE=JW;function e$(t,e,r){return e===e?LE(t,e,r):Zu(t,NE,r)}var Yu=e$;function t$(t,e){var r=t==null?0:t.length;return!!r&&Yu(t,e,0)>-1}var UE=t$;var r$=9007199254740991,n$=/^(?:0|[1-9]\d*)$/;function i$(t,e){var r=typeof t;return e=e??r$,!!e&&(r=="number"||r!="symbol"&&n$.test(t))&&t>-1&&t%1==0&&t<e}var Zs=i$;function o$(t,e){return t===e||t!==t&&e!==e}var Ys=o$;var HE=Math.max;function s$(t,e,r){return e=HE(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,o=HE(n.length-e,0),a=Array(o);++i<o;)a[i]=n[e+i];i=-1;for(var p=Array(e+1);++i<e;)p[i]=n[i];return p[e]=r(a),AE(t,this,p)}}var Xu=s$;function a$(t,e){return Qu(Xu(t,e,xr),t+"")}var Xs=a$;var c$=9007199254740991;function p$(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=c$}var Js=p$;function l$(t){return t!=null&&Js(t.length)&&!Bu(t)}var qn=l$;function u$(t,e,r){if(!Lr(r))return!1;var n=typeof e;return(n=="number"?qn(r)&&Zs(e,r.length):n=="string"&&e in r)?Ys(r[e],t):!1}var jo=u$;var f$=Object.prototype;function d$(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||f$;return t===r}var VE=d$;function m$(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var Ju=m$;var h$="[object Arguments]";function g$(t){return rr(t)&&Mn(t)==h$}var xT=g$;var BE=Object.prototype,y$=BE.hasOwnProperty,x$=BE.propertyIsEnumerable,T$=xT(function(){return arguments}())?xT:function(t){return rr(t)&&y$.call(t,"callee")&&!x$.call(t,"callee")},ea=T$;function S$(){return!1}var WE=S$;var qE=typeof exports=="object"&&exports&&!exports.nodeType&&exports,$E=qE&&typeof module=="object"&&module&&!module.nodeType&&module,v$=$E&&$E.exports===qE,jE=v$?Mt.Buffer:void 0,b$=jE?jE.isBuffer:void 0,w$=b$||WE,zc=w$;var _$="[object Arguments]",E$="[object Array]",R$="[object Boolean]",k$="[object Date]",P$="[object Error]",M$="[object Function]",A$="[object Map]",D$="[object Number]",I$="[object Object]",F$="[object RegExp]",C$="[object Set]",O$="[object String]",N$="[object WeakMap]",L$="[object ArrayBuffer]",U$="[object DataView]",H$="[object Float32Array]",V$="[object Float64Array]",B$="[object Int8Array]",W$="[object Int16Array]",$$="[object Int32Array]",j$="[object Uint8Array]",q$="[object Uint8ClampedArray]",z$="[object Uint16Array]",G$="[object Uint32Array]",Xe={};Xe[H$]=Xe[V$]=Xe[B$]=Xe[W$]=Xe[$$]=Xe[j$]=Xe[q$]=Xe[z$]=Xe[G$]=!0;Xe[_$]=Xe[E$]=Xe[L$]=Xe[R$]=Xe[U$]=Xe[k$]=Xe[P$]=Xe[M$]=Xe[A$]=Xe[D$]=Xe[I$]=Xe[F$]=Xe[C$]=Xe[O$]=Xe[N$]=!1;function K$(t){return rr(t)&&Js(t.length)&&!!Xe[Mn(t)]}var zE=K$;function Q$(t){return function(e){return t(e)}}var ta=Q$;var GE=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Gc=GE&&typeof module=="object"&&module&&!module.nodeType&&module,Z$=Gc&&Gc.exports===GE,TT=Z$&&Hu.process,Y$=function(){try{var t=Gc&&Gc.require&&Gc.require("util").types;return t||TT&&TT.binding&&TT.binding("util")}catch{}}(),ST=Y$;var KE=ST&&ST.isTypedArray,X$=KE?ta(KE):zE,ef=X$;var J$=Object.prototype,ej=J$.hasOwnProperty;function tj(t,e){var r=qe(t),n=!r&&ea(t),i=!r&&!n&&zc(t),o=!r&&!n&&!i&&ef(t),a=r||n||i||o,p=a?Ju(t.length,String):[],l=p.length;for(var u in t)(e||ej.call(t,u))&&!(a&&(u=="length"||i&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Zs(u,l)))&&p.push(u);return p}var QE=tj;function rj(t,e){return function(r){return t(e(r))}}var ZE=rj;var nj=ZE(Object.keys,Object),YE=nj;var ij=Object.prototype,oj=ij.hasOwnProperty;function sj(t){if(!VE(t))return YE(t);var e=[];for(var r in Object(t))oj.call(t,r)&&r!="constructor"&&e.push(r);return e}var XE=sj;function aj(t){return qn(t)?QE(t):XE(t)}var Xi=aj;var cj=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,pj=/^\w*$/;function lj(t,e){if(qe(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||Nr(t)?!0:pj.test(t)||!cj.test(t)||e!=null&&t in Object(e)}var ra=lj;var uj=Tr(Object,"create"),_i=uj;function fj(){this.__data__=_i?_i(null):{},this.size=0}var JE=fj;function dj(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var eR=dj;var mj="__lodash_hash_undefined__",hj=Object.prototype,gj=hj.hasOwnProperty;function yj(t){var e=this.__data__;if(_i){var r=e[t];return r===mj?void 0:r}return gj.call(e,t)?e[t]:void 0}var tR=yj;var xj=Object.prototype,Tj=xj.hasOwnProperty;function Sj(t){var e=this.__data__;return _i?e[t]!==void 0:Tj.call(e,t)}var rR=Sj;var vj="__lodash_hash_undefined__";function bj(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=_i&&e===void 0?vj:e,this}var nR=bj;function na(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}na.prototype.clear=JE;na.prototype.delete=eR;na.prototype.get=tR;na.prototype.has=rR;na.prototype.set=nR;var vT=na;function wj(){this.__data__=[],this.size=0}var iR=wj;function _j(t,e){for(var r=t.length;r--;)if(Ys(t[r][0],e))return r;return-1}var Ji=_j;var Ej=Array.prototype,Rj=Ej.splice;function kj(t){var e=this.__data__,r=Ji(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():Rj.call(e,r,1),--this.size,!0}var oR=kj;function Pj(t){var e=this.__data__,r=Ji(e,t);return r<0?void 0:e[r][1]}var sR=Pj;function Mj(t){return Ji(this.__data__,t)>-1}var aR=Mj;function Aj(t,e){var r=this.__data__,n=Ji(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var cR=Aj;function ia(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ia.prototype.clear=iR;ia.prototype.delete=oR;ia.prototype.get=sR;ia.prototype.has=aR;ia.prototype.set=cR;var eo=ia;var Dj=Tr(Mt,"Map"),to=Dj;function Ij(){this.size=0,this.__data__={hash:new vT,map:new(to||eo),string:new vT}}var pR=Ij;function Fj(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var lR=Fj;function Cj(t,e){var r=t.__data__;return lR(e)?r[typeof e=="string"?"string":"hash"]:r.map}var ro=Cj;function Oj(t){var e=ro(this,t).delete(t);return this.size-=e?1:0,e}var uR=Oj;function Nj(t){return ro(this,t).get(t)}var fR=Nj;function Lj(t){return ro(this,t).has(t)}var dR=Lj;function Uj(t,e){var r=ro(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var mR=Uj;function oa(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}oa.prototype.clear=pR;oa.prototype.delete=uR;oa.prototype.get=fR;oa.prototype.has=dR;oa.prototype.set=mR;var qo=oa;var Hj="Expected a function";function bT(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Hj);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=t.apply(this,n);return r.cache=o.set(i,a)||o,a};return r.cache=new(bT.Cache||qo),r}bT.Cache=qo;var Kc=bT;var Vj=500;function Bj(t){var e=Kc(t,function(n){return r.size===Vj&&r.clear(),n}),r=e.cache;return e}var hR=Bj;var Wj=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$j=/\\(\\)?/g,jj=hR(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Wj,function(r,n,i,o){e.push(i?o.replace($j,"$1"):n||r)}),e}),gR=jj;function qj(t){return t==null?"":TE(t)}var An=qj;function zj(t,e){return qe(t)?t:ra(t,e)?[t]:gR(An(t))}var tf=zj;var Gj=1/0;function Kj(t){if(typeof t=="string"||Nr(t))return t;var e=t+"";return e=="0"&&1/t==-Gj?"-0":e}var no=Kj;function Qj(t,e){e=tf(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[no(e[r++])];return r&&r==n?t:void 0}var sa=Qj;function Zj(t,e,r){var n=t==null?void 0:sa(t,e);return n===void 0?r:n}var zo=Zj;function Yj(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var aa=Yj;var yR=tr?tr.isConcatSpreadable:void 0;function Xj(t){return qe(t)||ea(t)||!!(yR&&t&&t[yR])}var xR=Xj;function TR(t,e,r,n,i){var o=-1,a=t.length;for(r||(r=xR),i||(i=[]);++o<a;){var p=t[o];e>0&&r(p)?e>1?TR(p,e-1,r,n,i):aa(i,p):n||(i[i.length]=p)}return i}var ca=TR;function Jj(t){var e=t==null?0:t.length;return e?ca(t,1):[]}var Je=Jj;function eq(t){return Qu(Xu(t,void 0,Je),t+"")}var SR=eq;function tq(t){return function(e){return t?.[e]}}var vR=tq;var rq={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},nq=vR(rq),bR=nq;var iq=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,oq="\\u0300-\\u036f",sq="\\ufe20-\\ufe2f",aq="\\u20d0-\\u20ff",cq=oq+sq+aq,pq="["+cq+"]",lq=RegExp(pq,"g");function uq(t){return t=An(t),t&&t.replace(iq,bR).replace(lq,"")}var wT=uq;function fq(){this.__data__=new eo,this.size=0}var wR=fq;function dq(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var _R=dq;function mq(t){return this.__data__.get(t)}var ER=mq;function hq(t){return this.__data__.has(t)}var RR=hq;var gq=200;function yq(t,e){var r=this.__data__;if(r instanceof eo){var n=r.__data__;if(!to||n.length<gq-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new qo(n)}return r.set(t,e),this.size=r.size,this}var kR=yq;function pa(t){var e=this.__data__=new eo(t);this.size=e.size}pa.prototype.clear=wR;pa.prototype.delete=_R;pa.prototype.get=ER;pa.prototype.has=RR;pa.prototype.set=kR;var la=pa;function xq(t,e){for(var r=-1,n=t==null?0:t.length,i=0,o=[];++r<n;){var a=t[r];e(a,r,t)&&(o[i++]=a)}return o}var rf=xq;function Tq(){return[]}var PR=Tq;var Sq=Object.prototype,vq=Sq.propertyIsEnumerable,MR=Object.getOwnPropertySymbols,bq=MR?function(t){return t==null?[]:(t=Object(t),rf(MR(t),function(e){return vq.call(t,e)}))}:PR,AR=bq;function wq(t,e,r){var n=e(t);return qe(t)?n:aa(n,r(t))}var DR=wq;function _q(t){return DR(t,Xi,AR)}var _T=_q;var Eq=Tr(Mt,"DataView"),nf=Eq;var Rq=Tr(Mt,"Promise"),of=Rq;var kq=Tr(Mt,"Set"),io=kq;var IR="[object Map]",Pq="[object Object]",FR="[object Promise]",CR="[object Set]",OR="[object WeakMap]",NR="[object DataView]",Mq=wi(nf),Aq=wi(to),Dq=wi(of),Iq=wi(io),Fq=wi($o),Go=Mn;(nf&&Go(new nf(new ArrayBuffer(1)))!=NR||to&&Go(new to)!=IR||of&&Go(of.resolve())!=FR||io&&Go(new io)!=CR||$o&&Go(new $o)!=OR)&&(Go=function(t){var e=Mn(t),r=e==Pq?t.constructor:void 0,n=r?wi(r):"";if(n)switch(n){case Mq:return NR;case Aq:return IR;case Dq:return FR;case Iq:return CR;case Fq:return OR}return e});var ET=Go;var Cq=Mt.Uint8Array,RT=Cq;function Oq(){var t=arguments.length;if(!t)return[];for(var e=Array(t-1),r=arguments[0],n=t;n--;)e[n-1]=arguments[n];return aa(qe(r)?Yi(r):[r],ca(e,1))}var Qc=Oq;var Nq="__lodash_hash_undefined__";function Lq(t){return this.__data__.set(t,Nq),this}var LR=Lq;function Uq(t){return this.__data__.has(t)}var UR=Uq;function sf(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new qo;++e<r;)this.add(t[e])}sf.prototype.add=sf.prototype.push=LR;sf.prototype.has=UR;var af=sf;function Hq(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var HR=Hq;function Vq(t,e){return t.has(e)}var cf=Vq;var Bq=1,Wq=2;function $q(t,e,r,n,i,o){var a=r&Bq,p=t.length,l=e.length;if(p!=l&&!(a&&l>p))return!1;var u=o.get(t),d=o.get(e);if(u&&d)return u==e&&d==t;var m=-1,g=!0,x=r&Wq?new af:void 0;for(o.set(t,e),o.set(e,t);++m<p;){var b=t[m],v=e[m];if(n)var F=a?n(v,b,m,e,t,o):n(b,v,m,t,e,o);if(F!==void 0){if(F)continue;g=!1;break}if(x){if(!HR(e,function(I,U){if(!cf(x,U)&&(b===I||i(b,I,r,n,o)))return x.push(U)})){g=!1;break}}else if(!(b===v||i(b,v,r,n,o))){g=!1;break}}return o.delete(t),o.delete(e),g}var pf=$q;function jq(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}var VR=jq;function qq(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var ua=qq;var zq=1,Gq=2,Kq="[object Boolean]",Qq="[object Date]",Zq="[object Error]",Yq="[object Map]",Xq="[object Number]",Jq="[object RegExp]",e3="[object Set]",t3="[object String]",r3="[object Symbol]",n3="[object ArrayBuffer]",i3="[object DataView]",BR=tr?tr.prototype:void 0,kT=BR?BR.valueOf:void 0;function o3(t,e,r,n,i,o,a){switch(r){case i3:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case n3:return!(t.byteLength!=e.byteLength||!o(new RT(t),new RT(e)));case Kq:case Qq:case Xq:return Ys(+t,+e);case Zq:return t.name==e.name&&t.message==e.message;case Jq:case t3:return t==e+"";case Yq:var p=VR;case e3:var l=n&zq;if(p||(p=ua),t.size!=e.size&&!l)return!1;var u=a.get(t);if(u)return u==e;n|=Gq,a.set(t,e);var d=pf(p(t),p(e),n,i,o,a);return a.delete(t),d;case r3:if(kT)return kT.call(t)==kT.call(e)}return!1}var WR=o3;var s3=1,a3=Object.prototype,c3=a3.hasOwnProperty;function p3(t,e,r,n,i,o){var a=r&s3,p=_T(t),l=p.length,u=_T(e),d=u.length;if(l!=d&&!a)return!1;for(var m=l;m--;){var g=p[m];if(!(a?g in e:c3.call(e,g)))return!1}var x=o.get(t),b=o.get(e);if(x&&b)return x==e&&b==t;var v=!0;o.set(t,e),o.set(e,t);for(var F=a;++m<l;){g=p[m];var I=t[g],U=e[g];if(n)var K=a?n(U,I,g,e,t,o):n(I,U,g,t,e,o);if(!(K===void 0?I===U||i(I,U,r,n,o):K)){v=!1;break}F||(F=g=="constructor")}if(v&&!F){var ne=t.constructor,ie=e.constructor;ne!=ie&&"constructor"in t&&"constructor"in e&&!(typeof ne=="function"&&ne instanceof ne&&typeof ie=="function"&&ie instanceof ie)&&(v=!1)}return o.delete(t),o.delete(e),v}var $R=p3;var l3=1,jR="[object Arguments]",qR="[object Array]",lf="[object Object]",u3=Object.prototype,zR=u3.hasOwnProperty;function f3(t,e,r,n,i,o){var a=qe(t),p=qe(e),l=a?qR:ET(t),u=p?qR:ET(e);l=l==jR?lf:l,u=u==jR?lf:u;var d=l==lf,m=u==lf,g=l==u;if(g&&zc(t)){if(!zc(e))return!1;a=!0,d=!1}if(g&&!d)return o||(o=new la),a||ef(t)?pf(t,e,r,n,i,o):WR(t,e,l,r,n,i,o);if(!(r&l3)){var x=d&&zR.call(t,"__wrapped__"),b=m&&zR.call(e,"__wrapped__");if(x||b){var v=x?t.value():t,F=b?e.value():e;return o||(o=new la),i(v,F,r,n,o)}}return g?(o||(o=new la),$R(t,e,r,n,i,o)):!1}var GR=f3;function KR(t,e,r,n,i){return t===e?!0:t==null||e==null||!rr(t)&&!rr(e)?t!==t&&e!==e:GR(t,e,r,n,KR,i)}var fa=KR;var d3=1,m3=2;function h3(t,e,r,n){var i=r.length,o=i,a=!n;if(t==null)return!o;for(t=Object(t);i--;){var p=r[i];if(a&&p[2]?p[1]!==t[p[0]]:!(p[0]in t))return!1}for(;++i<o;){p=r[i];var l=p[0],u=t[l],d=p[1];if(a&&p[2]){if(u===void 0&&!(l in t))return!1}else{var m=new la;if(n)var g=n(u,d,l,t,e,m);if(!(g===void 0?fa(d,u,d3|m3,n,m):g))return!1}}return!0}var QR=h3;function g3(t){return t===t&&!Lr(t)}var uf=g3;function y3(t){for(var e=Xi(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,uf(i)]}return e}var ZR=y3;function x3(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var ff=x3;function T3(t){var e=ZR(t);return e.length==1&&e[0][2]?ff(e[0][0],e[0][1]):function(r){return r===t||QR(r,t,e)}}var YR=T3;function S3(t,e){return t!=null&&e in Object(t)}var XR=S3;function v3(t,e,r){e=tf(e,t);for(var n=-1,i=e.length,o=!1;++n<i;){var a=no(e[n]);if(!(o=t!=null&&r(t,a)))break;t=t[a]}return o||++n!=i?o:(i=t==null?0:t.length,!!i&&Js(i)&&Zs(a,i)&&(qe(t)||ea(t)))}var JR=v3;function b3(t,e){return t!=null&&JR(t,e,XR)}var ek=b3;var w3=1,_3=2;function E3(t,e){return ra(t)&&uf(e)?ff(no(t),e):function(r){var n=zo(r,t);return n===void 0&&n===e?ek(r,t):fa(e,n,w3|_3)}}var tk=E3;function R3(t){return function(e){return e?.[t]}}var df=R3;function k3(t){return function(e){return sa(e,t)}}var rk=k3;function P3(t){return ra(t)?df(no(t)):rk(t)}var nk=P3;function M3(t){return typeof t=="function"?t:t==null?xr:typeof t=="object"?qe(t)?tk(t[0],t[1]):YR(t):nk(t)}var oo=M3;function A3(t){return function(e,r,n){for(var i=-1,o=Object(e),a=n(e),p=a.length;p--;){var l=a[t?p:++i];if(r(o[l],l,o)===!1)break}return e}}var ik=A3;var D3=ik(),ok=D3;function I3(t,e){return t&&ok(t,e,Xi)}var sk=I3;function F3(t,e){return function(r,n){if(r==null)return r;if(!qn(r))return t(r,n);for(var i=r.length,o=e?i:-1,a=Object(r);(e?o--:++o<i)&&n(a[o],o,a)!==!1;);return r}}var ak=F3;var C3=ak(sk),ck=C3;function O3(t){return rr(t)&&qn(t)}var pk=O3;function N3(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}var lk=N3;function L3(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var mf=L3;var uk=/[\\^$.*+?()[\]{}|]/g,U3=RegExp(uk.source);function H3(t){return t=An(t),t&&U3.test(t)?t.replace(uk,"\\$&"):t}var Ur=H3;var V3=Math.max,B3=Math.min;function W3(t,e,r){var n=t==null?0:t.length;if(!n)return-1;var i=n-1;return r!==void 0&&(i=Vu(r),i=r<0?V3(n+i,0):B3(i,n-1)),Zu(t,oo(e,3),i,!0)}var Ko=W3;function $3(t,e){var r=-1,n=qn(t)?Array(t.length):[];return ck(t,function(i,o,a){n[++r]=e(i,o,a)}),n}var fk=$3;var j3="Expected a function",q3=8,z3=32,G3=128,K3=256;function Q3(t){return SR(function(e){var r=e.length,n=r,i=Zi.prototype.thru;for(t&&e.reverse();n--;){var o=e[n];if(typeof o!="function")throw new TypeError(j3);if(i&&!a&&Qs(o)=="wrapper")var a=new Zi([],!0)}for(n=a?n:r;++n<r;){o=e[n];var p=Qs(o),l=p=="wrapper"?zu(o):void 0;l&&gT(l[0])&&l[1]==(G3|q3|z3|K3)&&!l[4].length&&l[9]==1?a=a[Qs(l[0])].apply(a,l[3]):a=o.length==1&&gT(o)?a[p]():a.thru(o)}return function(){var u=arguments,d=u[0];if(a&&u.length==1&&qe(d))return a.plant(d).value();for(var m=0,g=r?e[m].apply(this,u):d;++m<r;)g=e[m].call(this,g);return g}})}var dk=Q3;var Z3=dk(),PT=Z3;function Y3(t,e){return t>e}var mk=Y3;function X3(t,e){return on(e,function(r){return t[r]})}var hk=X3;function J3(t){return t==null?[]:hk(t,Xi(t))}var gk=J3;function ez(t,e){return fa(t,e)}var Ei=ez;function tz(t,e){return t<e}var yk=tz;function rz(t,e,r){for(var n=-1,i=t.length;++n<i;){var o=t[n],a=e(o);if(a!=null&&(p===void 0?a===a&&!Nr(a):r(a,p)))var p=a,l=o}return l}var hf=rz;function nz(t,e){return t&&t.length?hf(t,oo(e,2),mk):void 0}var MT=nz;function iz(t,e){for(var r,n=-1,i=t.length;++n<i;){var o=e(t[n]);o!==void 0&&(r=r===void 0?o:r+o)}return r}var xk=iz;function oz(t){return t&&t.length?hf(t,xr,yk):void 0}var AT=oz;function sz(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}var Tk=sz;function az(t,e){if(t!==e){var r=t!==void 0,n=t===null,i=t===t,o=Nr(t),a=e!==void 0,p=e===null,l=e===e,u=Nr(e);if(!p&&!u&&!o&&t>e||o&&a&&l&&!p&&!u||n&&a&&l||!r&&l||!i)return 1;if(!n&&!o&&!u&&t<e||u&&r&&i&&!n&&!o||p&&r&&i||!a&&i||!l)return-1}return 0}var Sk=az;function cz(t,e,r){for(var n=-1,i=t.criteria,o=e.criteria,a=i.length,p=r.length;++n<a;){var l=Sk(i[n],o[n]);if(l){if(n>=p)return l;var u=r[n];return l*(u=="desc"?-1:1)}}return t.index-e.index}var vk=cz;function pz(t,e,r){e.length?e=on(e,function(o){return qe(o)?function(a){return sa(a,o.length===1?o[0]:o)}:o}):e=[xr];var n=-1;e=on(e,ta(oo));var i=fk(t,function(o,a,p){var l=on(e,function(u){return u(o)});return{criteria:l,index:++n,value:o}});return Tk(i,function(o,a){return vk(o,a,r)})}var bk=pz;var lz=9007199254740991,uz=Math.floor;function fz(t,e){var r="";if(!t||e<1||e>lz)return r;do e%2&&(r+=t),e=uz(e/2),e&&(t+=t);while(e);return r}var wk=fz;function dz(t,e,r,n){for(var i=r-1,o=t.length;++i<o;)if(n(t[i],e))return i;return-1}var _k=dz;var mz=Array.prototype,Ek=mz.splice;function hz(t,e,r,n){var i=n?_k:Yu,o=-1,a=e.length,p=t;for(t===e&&(e=Yi(e)),r&&(p=on(t,ta(r)));++o<a;)for(var l=0,u=e[o],d=r?r(u):u;(l=i(p,d,l,n))>-1;)p!==t&&Ek.call(p,l,1),Ek.call(t,l,1);return t}var Rk=hz;function gz(t,e){return t&&t.length&&e&&e.length?Rk(t,e):t}var kk=gz;var yz=Xs(kk),nr=yz;var xz=Math.floor,Tz=Math.random;function Sz(t,e){return t+xz(Tz()*(e-t+1))}var Pk=Sz;var vz=Math.ceil,bz=Math.max;function wz(t,e,r,n){for(var i=-1,o=bz(vz((e-t)/(r||1)),0),a=Array(o);o--;)a[n?o:++i]=t,t+=r;return a}var Mk=wz;function _z(t){return function(e,r,n){return n&&typeof n!="number"&&jo(e,r,n)&&(r=n=void 0),e=zs(e),r===void 0?(r=e,e=0):r=zs(r),n=n===void 0?e<r?1:-1:zs(n),Mk(e,r,n,t)}}var Ak=_z;var Ez=Ak(),DT=Ez;function Rz(t,e,r){return(r?jo(t,e,r):e===void 0)?e=1:e=Vu(e),wk(An(t),e)}var IT=Rz;function kz(t,e){var r=-1,n=t.length,i=n-1;for(e=e===void 0?n:e;++r<e;){var o=Pk(r,i),a=t[o];t[o]=t[r],t[r]=a}return t.length=e,t}var gf=kz;function Pz(t){return gf(Yi(t))}var Dk=Pz;function Mz(t){return gf(gk(t))}var Ik=Mz;function Az(t){var e=qe(t)?Dk:Ik;return e(t)}var FT=Az;var Dz=Xs(function(t,e){if(t==null)return[];var r=e.length;return r>1&&jo(t,e[0],e[1])?e=[]:r>2&&jo(e[0],e[1],e[2])&&(e=[e[0]]),bk(t,ca(e,1),[])}),CT=Dz;function Iz(t,e){return t&&t.length?xk(t,oo(e,2)):0}var yf=Iz;var Fz=1/0,Cz=io&&1/ua(new io([,-0]))[1]==Fz?function(t){return new io(t)}:qu,Fk=Cz;var Oz=200;function Nz(t,e,r){var n=-1,i=UE,o=t.length,a=!0,p=[],l=p;if(r)a=!1,i=lk;else if(o>=Oz){var u=e?null:Fk(t);if(u)return ua(u);a=!1,i=cf,l=new af}else l=e?[]:p;e:for(;++n<o;){var d=t[n],m=e?e(d):d;if(d=r||d!==0?d:0,a&&m===m){for(var g=l.length;g--;)if(l[g]===m)continue e;e&&l.push(m),p.push(d)}else i(l,m,r)||(l!==p&&l.push(m),p.push(d))}return p}var xf=Nz;function Lz(t){return t&&t.length?xf(t):[]}var Qo=Lz;function Uz(t,e){return e=typeof e=="function"?e:void 0,t&&t.length?xf(t,void 0,e):[]}var Zc=Uz;var Hz=Math.max;function Vz(t){if(!(t&&t.length))return[];var e=0;return t=rf(t,function(r){if(pk(r))return e=Hz(r.length,e),!0}),Ju(e,function(r){return on(t,df(r))})}var Ck=Vz;var Bz=Xs(Ck),wt=Bz;var Tf=class{constructor(){this.commands={clipboardPaste:void 0,clipboardCopy:void 0,toggleLineComment:void 0,indentLine:void 0,outdentLine:void 0,rename:void 0,quickFix:void 0,revealDefinition:void 0,revealTypeDefinition:void 0,showHover:void 0,showDebugHover:void 0,extractVariable:void 0,fold:void 0,highlight:{acceptsLocation:!0},unfold:void 0,showReferences:void 0,insertLineAfter:void 0,gitAccept:void 0,gitRevert:void 0,gitStage:void 0,gitUnstage:void 0}}};var Yc=class{constructor(){this.clipboardContents=""}async readText(){return this.clipboardContents}async writeText(e){this.clipboardContents=e}};var qt=class{constructor(){this.listeners=[];this.notifyListeners=(...e)=>{this.listeners.forEach(r=>r(...e))};this.registerListener=this.registerListener.bind(this)}registerListener(e){return this.listeners.push(e),{dispose:()=>{nr(this.listeners,e)}}}};var Sf={tokenHatSplittingMode:{preserveCase:!1,lettersToPreserve:[],symbolsToPreserve:[]},wordSeparators:["_"],decorationDebounceDelayMs:50,experimental:{snippetsDir:void 0,hatStability:"balanced",keyboardTargetFollowsSelection:!1},commandHistory:!1,debug:!1};var Xc=class{constructor(){this.notifier=new qt;this.mocks={...Sf};this.scopes=[];this.onDidChangeConfiguration=this.notifier.registerListener;this.onDidChangeConfiguration=this.onDidChangeConfiguration.bind(this)}getOwnConfiguration(e,r){if(r!=null){for(let{scope:n,values:i}of this.scopes)if($z(n,r))return zo(i,e)??zo(this.mocks,e)}return zo(this.mocks,e)}mockConfiguration(e,r){this.mocks[e]=r,this.notifier.notifyListeners()}mockConfigurationScope(e,r,n=!1){this.scopes.push({scope:e,values:r}),n||this.notifier.notifyListeners()}};function $z(t,e){return t.languageId===e.languageId}var vf={hideInferenceWarning:!1,tutorialProgress:{}};var Jc=class{constructor(){this.data={...vf}}get(e){return this.data[e]}set(e,r){return this.data[e]=r,Promise.resolve()}};var ep=class{async showMessage(e,r,n,...i){}};var bf=class{constructor(){this.configuration=new Xc;this.messages=new ep;this.keyValueStore=new Jc;this.clipboard=new Yc;this.capabilities=new Tf;this.runMode="test";this.cursorlessVersion="0.0.0";this.workspaceFolders=void 0;this.disposables=[];this.quickPickReturnValue=void 0;this.onDidOpenTextDocument=da;this.onDidCloseTextDocument=da;this.onDidChangeActiveTextEditor=da;this.onDidChangeVisibleTextEditors=da;this.onDidChangeTextEditorSelection=da;this.onDidChangeTextEditorVisibleRanges=da}async flashRanges(e){}async setHighlightRanges(e,r,n){}mockAssetsRoot(e){this.assetsRoot_=e}get assetsRoot(){if(this.assetsRoot_==null)throw Error("Field `assetsRoot` has not yet been mocked");return this.assetsRoot_}get activeTextEditor(){throw Error("Not implemented")}get activeEditableTextEditor(){throw Error("Not implemented")}get visibleTextEditors(){throw Error("Not implemented")}get visibleNotebookEditors(){throw Error("Not implemented")}getEditableTextEditor(e){throw Error("Not implemented")}findInDocument(e,r){throw Error("Not implemented")}findInWorkspace(e){throw Error("Not implemented")}openTextDocument(e){throw Error("Not implemented")}openUntitledTextDocument(e){throw Error("Not implemented")}setQuickPickReturnValue(e){this.quickPickReturnValue=e}async showQuickPick(e,r){return this.quickPickReturnValue}showInputBox(e){throw Error("Not implemented")}executeCommand(e,...r){throw new Error("Method not implemented.")}onDidChangeTextDocument(e){throw Error("Not implemented")}disposeOnExit(...e){return this.disposables.push(...e),()=>nr(this.disposables,...e)}exit(){this.disposables.forEach(e=>e.dispose())}};function da(){return{dispose(){}}}var le=class t{constructor(e,r){this.line=e,this.character=r}isEqual(e){return this.line===e.line&&this.character===e.character}isBefore(e){return this.line<e.line?!0:this.line>e.line?!1:this.character<e.character}isAfter(e){return this.line>e.line?!0:this.line<e.line?!1:this.character>e.character}isBeforeOrEqual(e){return this.isEqual(e)||this.isBefore(e)}isAfterOrEqual(e){return this.isEqual(e)||this.isAfter(e)}compareTo(e){return this.isBefore(e)?-1:this.isAfter(e)?1:0}with(e,r){return new t(e??this.line,r??this.character)}translate(e,r){return new t(this.line+(e??0),this.character+(r??0))}toEmptyRange(){return new W(this,this)}concise(){return`${this.line}:${this.character}`}conciseOneBased(){return`${this.line+1}:${this.character+1}`}toString(){return this.concise()}};function Ok(t,e,r){return t.positionAt(t.offsetAt(e)+r)}var W=class t{constructor(...e){let[r,n]=e.length===2?e:[new le(e[0],e[1]),new le(e[2],e[3])];r.isBefore(n)?(this.start=r,this.end=n):(this.start=n,this.end=r)}get isEmpty(){return this.start.isEqual(this.end)}get isSingleLine(){return this.start.line===this.end.line}isRangeEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}contains(e){let[r,n]=e instanceof le?[e,e]:[e.start,e.end];return r.isAfterOrEqual(this.start)&&n.isBeforeOrEqual(this.end)}intersection(e){let r=this.start.isAfter(e.start)?this.start:e.start,n=this.end.isBefore(e.end)?this.end:e.end;return r.isBeforeOrEqual(n)?new t(r,n):void 0}union(e){return new t(this.start.isBefore(e.start)?this.start:e.start,this.end.isAfter(e.end)?this.end:e.end)}with(e,r){return new t(e??this.start,r??this.end)}toSelection(e){return e?new be(this.end,this.start):new be(this.start,this.end)}concise(){return`${this.start.concise()}-${this.end.concise()}`}conciseOneBased(){return`${this.start.conciseOneBased()}-${this.end.conciseOneBased()}`}toString(){return`${this.start.concise()}-${this.end.concise()}`}};function jz(t){let{source:e,flags:r}=t;return new RegExp(`(${e})$`,r.replace("m",""))}function qz(t){let{source:e,flags:r}=t;return new RegExp(`^(${e})`,r.replace("m",""))}function Nk(t){let e=new Map;function r(n){let i=e.get(n);return i==null&&(i=t(n),e.set(n,i)),i}return r}var wf=Nk(jz),_f=Nk(qz);function OT(t,e){return e.lastIndex=0,t.matchAll(e)}function sn(t,e,r){return Array.from(OT(t,e),r)}function Zo(t,e){return t.lastIndex=0,t.test(e)}function Lk(t,e){return t.lastIndex=0,e.match(t)}function tp(t,e){return sn(t,e,r=>({index:r.index,text:r[0]}))}var ma=class{constructor(e){this.original=e;this.configuration=e.configuration,this.keyValueStore=e.keyValueStore,this.clipboard=e.clipboard,this.messages=e.messages,this.capabilities=e.capabilities}flashRanges(e){return this.original.flashRanges(e)}setHighlightRanges(e,r,n){return this.original.setHighlightRanges(e,r,n)}onDidOpenTextDocument(e,r,n){return this.original.onDidOpenTextDocument(e,r,n)}onDidCloseTextDocument(e,r,n){return this.original.onDidCloseTextDocument(e,r,n)}onDidChangeActiveTextEditor(e,r,n){return this.original.onDidChangeActiveTextEditor(e,r,n)}onDidChangeVisibleTextEditors(e,r,n){return this.original.onDidChangeVisibleTextEditors(e,r,n)}onDidChangeTextEditorSelection(e,r,n){return this.original.onDidChangeTextEditorSelection(e,r,n)}onDidChangeTextEditorVisibleRanges(e,r,n){return this.original.onDidChangeTextEditorVisibleRanges(e,r,n)}get activeTextEditor(){return this.original.activeTextEditor}get activeEditableTextEditor(){return this.original.activeEditableTextEditor}get visibleTextEditors(){return this.original.visibleTextEditors}get visibleNotebookEditors(){return this.original.visibleNotebookEditors}get cursorlessVersion(){return this.original.cursorlessVersion}get assetsRoot(){return this.original.assetsRoot}get runMode(){return this.original.runMode}get workspaceFolders(){return this.original.workspaceFolders}findInDocument(e,r){return this.original.findInDocument(e,r)}findInWorkspace(e){return this.original.findInWorkspace(e)}openTextDocument(e){return this.original.openTextDocument(e)}openUntitledTextDocument(e){return this.original.openUntitledTextDocument(e)}showQuickPick(e,r){return this.original.showQuickPick(e,r)}showInputBox(e){return this.original.showInputBox(e)}getEditableTextEditor(e){return this.original.getEditableTextEditor(e)}executeCommand(e,...r){return this.original.executeCommand(e,...r)}onDidChangeTextDocument(e){return this.original.onDidChangeTextDocument(e)}disposeOnExit(...e){return this.original.disposeOnExit(...e)}};var Ef=class extends ma{constructor(r,n,i,o){super(r);this.fakeIde=n;this.isSilent=i;this.cursorlessSnippetsDir=o;this.messages=i?n.messages:r.messages,this.configuration=n.configuration,this.keyValueStore=n.keyValueStore,this.initializeConfiguration()}initializeConfiguration(){this.configuration.mockConfigurationScope({languageId:"css"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfigurationScope({languageId:"scss"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfigurationScope({languageId:"shellscript"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfiguration("experimental",{hatStability:this.configuration.getOwnConfiguration("experimental.hatStability"),snippetsDir:this.cursorlessSnippetsDir,keyboardTargetFollowsSelection:!1})}flashRanges(r){return this.isSilent?this.fakeIde.flashRanges(r):super.flashRanges(r)}setHighlightRanges(r,n,i){return this.isSilent?this.fakeIde.setHighlightRanges(r,n,i):super.setHighlightRanges(r,n,i)}async showQuickPick(r,n){return this.isSilent?this.fakeIde.showQuickPick(r,n):super.showQuickPick(r,n)}};function rp(t,e,r,...n){return t.showMessage("warning",e,r,...n)}function st(t,e,r,...n){return t.showMessage("error",e,r,...n)}var se=(i=>(i[i.supported=0]="supported",i[i.supportedLegacy=1]="supportedLegacy",i[i.unsupported=2]="unsupported",i[i.notApplicable=3]="notApplicable",i))(se||{});var{supported:tt,unsupported:mle,notApplicable:Uk}=se,NT={ifStatement:tt,disqualifyDelimiter:tt,"comment.line":tt,"comment.block":tt,"string.singleLine":tt,"textFragment.comment.line":tt,"textFragment.comment.block":tt,"textFragment.string.singleLine":tt,class:tt,className:tt,namedFunction:tt,"name.function":tt,"name.class":tt,"name.field":tt,functionName:tt,"name.argument.formal":tt,"name.argument.formal.iteration":tt,"name.variable":tt,"value.variable":tt,"name.assignment":tt,"value.assignment":tt,"statement.class":tt,"type.class":tt,"type.field":tt,"value.argument.formal":Uk,"value.argument.formal.iteration":Uk};var{supported:yle,unsupported:xle,notApplicable:Tle}=se;var{supported:Hk,unsupported:wle,notApplicable:_le}=se,zz={...NT,"value.argument.formal":Hk,"value.argument.formal.iteration":Hk};var{supported:kle,unsupported:Ple,notApplicable:Mle}=se;var{supported:np,unsupported:Gz,notApplicable:Ile}=se,LT={"comment.block":np,"string.singleLine":np,"name.iteration.block":np,"name.iteration.document":np,disqualifyDelimiter:np,"comment.line":Gz};var{supported:Ole,unsupported:Nle,notApplicable:Lle}=se;var{supported:Vle,unsupported:Ble,notApplicable:Wle}=se;var{supported:qle,notApplicable:zle}=se;var{supported:Qle,notApplicable:Zle}=se;var{supported:q,unsupported:Jle,notApplicable:an}=se,UT={list:q,map:q,ifStatement:q,regularExpression:q,switchStatementSubject:q,fieldAccess:q,disqualifyDelimiter:q,pairDelimiter:q,"textFragment.string.singleLine":q,"textFragment.string.multiLine":q,"textFragment.comment.line":q,"textFragment.comment.block":q,statement:q,"statement.iteration.document":q,"statement.iteration.block":q,class:q,className:q,anonymousFunction:q,namedFunction:q,"namedFunction.iteration.document":q,"namedFunction.method":q,"namedFunction.method.iteration.class":q,"namedFunction.constructor":q,functionName:q,"functionName.iteration.document":q,"functionName.method":q,"functionName.method.iteration.class":q,"functionName.constructor":q,functionCall:q,"functionCall.constructor":q,functionCallee:q,"functionCallee.constructor":q,"argument.actual":q,"argument.actual.iteration":q,"argument.actual.method":q,"argument.actual.method.iteration":q,"argument.actual.constructor":q,"argument.actual.constructor.iteration":q,"argument.formal":q,"argument.formal.iteration":q,"argument.formal.method":q,"argument.formal.method.iteration":q,"argument.formal.constructor":q,"argument.formal.constructor.iteration":q,"comment.line":q,"comment.block":q,"string.singleLine":q,"string.multiLine":q,"branch.if":q,"branch.if.iteration":q,"branch.try":q,"branch.switchCase":q,"branch.switchCase.iteration":q,"branch.ternary":q,"condition.if":q,"condition.while":q,"condition.doWhile":q,"condition.for":q,"condition.ternary":q,"condition.switchCase":q,"name.argument.formal":q,"name.argument.formal.iteration":q,"name.argument.formal.method":q,"name.argument.formal.method.iteration":q,"name.argument.formal.constructor":q,"name.argument.formal.constructor.iteration":q,"name.foreach":q,"name.assignment":q,"name.assignment.pattern":q,"name.variable":q,"name.variable.pattern":q,"name.function":q,"name.method":q,"name.constructor":q,"name.class":q,"name.field":q,"key.mapPair":q,"key.mapPair.iteration":q,"value.argument.formal":q,"value.argument.formal.iteration":q,"value.argument.formal.method":q,"value.argument.formal.method.iteration":q,"value.argument.formal.constructor":q,"value.argument.formal.constructor.iteration":q,"value.mapPair":q,"value.mapPair.iteration":q,"value.assignment":q,"value.variable":q,"value.variable.pattern":q,"value.foreach":q,"value.return":q,"value.return.lambda":q,"value.field":q,"collectionItem.unenclosed":q},HT={element:q,tags:q,startTag:q,endTag:q,attribute:q,"key.attribute":q,"value.attribute":q,"interior.element":q},VT={...UT,...HT,"type.variable":an,"type.argument.formal":an,"type.argument.formal.iteration":an,"type.argument.formal.method":an,"type.argument.formal.method.iteration":an,"type.argument.formal.constructor":an,"type.argument.formal.constructor.iteration":an,"type.return":an,"type.field":an,"type.foreach":an,"type.interface":an,command:an};var{supported:Kz,unsupported:nue,notApplicable:iue}=se,Qz={...VT,"textFragment.element":Kz};var{supported:BT}=se,ip={"comment.line":BT,"comment.block":BT,map:BT};var{supported:lue,unsupported:uue,notApplicable:fue}=se,Zz={...ip};var{supported:gue,unsupported:yue,notApplicable:xue}=se,Yz={...ip};var{supported:vue,unsupported:bue,notApplicable:wue}=se;var{supported:Rue,notApplicable:kue}=se;var{supported:Aue,unsupported:Due,notApplicable:Iue}=se;var{supported:Oue,unsupported:Nue,notApplicable:Lue}=se;var{supported:Vue,notApplicable:Bue}=se;var{supported:jue,unsupported:que,notApplicable:zue}=se;var{supported:Que,unsupported:Zue,notApplicable:Yue}=se;var{supported:efe,unsupported:tfe,notApplicable:rfe}=se;var{supported:ofe,unsupported:sfe,notApplicable:afe}=se;var{supported:ha,unsupported:ufe,notApplicable:ffe}=se,Xz={...LT,"namedFunction.iteration.block":ha,"namedFunction.iteration.document":ha,"functionName.iteration.block":ha,"functionName.iteration.document":ha,"comment.line":ha,disqualifyDelimiter:ha};var{supported:hfe}=se;var{supported:Nt}=se,WT={...UT,"name.field":Nt,"type.argument.formal":Nt,"type.argument.formal.iteration":Nt,"type.argument.formal.method":Nt,"type.argument.formal.method.iteration":Nt,"type.argument.formal.constructor":Nt,"type.argument.formal.constructor.iteration":Nt,"type.alias":Nt,"type.cast":Nt,"type.field":Nt,"type.interface":Nt,"type.enum":Nt,"type.return":Nt,"type.variable":Nt,"value.field":Nt,"value.typeAlias":Nt,disqualifyDelimiter:Nt};var{supported:wfe,unsupported:_fe,notApplicable:Efe}=se,Jz={...WT,...HT};var{supported:Pfe,unsupported:Mfe,notApplicable:Afe}=se;var{supported:Ffe,unsupported:Cfe,notApplicable:Ofe}=se;var ga=["that","source","instanceReference","keyboard"];var be=class extends W{get isReversed(){return this.active.isBefore(this.anchor)}constructor(...e){let[r,n]=e.length===2?e:[new le(e[0],e[1]),new le(e[2],e[3])];super(r,n),this.anchor=r,this.active=n}isEqual(e){return this.anchor.isEqual(e.anchor)&&this.active.isEqual(e.active)}concise(){return`${this.anchor.concise()}->${this.active.concise()}`}conciseOneBased(){return`${this.start.conciseOneBased()}->${this.end.conciseOneBased()}`}toString(){return this.concise()}};function Bk({line:t,character:e}){return new le(t,e)}function Rf({start:t,end:e}){return new W(Bk(t),Bk(e))}function Hr({start:t,end:e}){return{type:"line",start:t.line,end:e.line}}function ir({start:t,end:e}){return{type:"character",start:t,end:e}}function op(t){return{start:kf(t.start),end:kf(t.end)}}function Wk(t){return{anchor:kf(t.anchor),active:kf(t.active)}}function kf({line:t,character:e}){return{line:t,character:e}}function sP(t){return typeof t>"u"||t===null}function eG(t){return typeof t=="object"&&t!==null}function tG(t){return Array.isArray(t)?t:sP(t)?[]:[t]}function rG(t,e){var r,n,i,o;if(e)for(o=Object.keys(e),r=0,n=o.length;r<n;r+=1)i=o[r],t[i]=e[i];return t}function nG(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}function iG(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var oG=sP,sG=eG,aG=tG,cG=nG,pG=iG,lG=rG,_t={isNothing:oG,isObject:sG,toArray:aG,repeat:cG,isNegativeZero:pG,extend:lG};function aP(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}function ap(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=aP(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}ap.prototype=Object.create(Error.prototype);ap.prototype.constructor=ap;ap.prototype.toString=function(e){return this.name+": "+aP(this,e)};var Sr=ap;function $T(t,e,r,n,i){var o="",a="",p=Math.floor(i/2)-1;return n-e>p&&(o=" ... ",e=n-p+o.length),r-n>p&&(a=" ...",r=n+p-a.length),{str:o+t.slice(e,r).replace(/\t/g,"\u2192")+a,pos:n-e+o.length}}function jT(t,e){return _t.repeat(" ",e-t.length)+t}function uG(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],o,a=-1;o=r.exec(t.buffer);)i.push(o.index),n.push(o.index+o[0].length),t.position<=o.index&&a<0&&(a=n.length-2);a<0&&(a=n.length-1);var p="",l,u,d=Math.min(t.line+e.linesAfter,i.length).toString().length,m=e.maxLength-(e.indent+d+3);for(l=1;l<=e.linesBefore&&!(a-l<0);l++)u=$T(t.buffer,n[a-l],i[a-l],t.position-(n[a]-n[a-l]),m),p=_t.repeat(" ",e.indent)+jT((t.line-l+1).toString(),d)+" | "+u.str+`
`+p;for(u=$T(t.buffer,n[a],i[a],t.position,m),p+=_t.repeat(" ",e.indent)+jT((t.line+1).toString(),d)+" | "+u.str+`
`,p+=_t.repeat("-",e.indent+d+3+u.pos)+`^
`,l=1;l<=e.linesAfter&&!(a+l>=i.length);l++)u=$T(t.buffer,n[a+l],i[a+l],t.position-(n[a]-n[a+l]),m),p+=_t.repeat(" ",e.indent)+jT((t.line+l+1).toString(),d)+" | "+u.str+`
`;return p.replace(/\n$/,"")}var fG=uG,dG=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],mG=["scalar","sequence","mapping"];function hG(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}function gG(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(dG.indexOf(r)===-1)throw new Sr('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=hG(e.styleAliases||null),mG.indexOf(this.kind)===-1)throw new Sr('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var Lt=gG;function qk(t,e){var r=[];return t[e].forEach(function(n){var i=r.length;r.forEach(function(o,a){o.tag===n.tag&&o.kind===n.kind&&o.multi===n.multi&&(i=a)}),r[i]=n}),r}function yG(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}function zT(t){return this.extend(t)}zT.prototype.extend=function(e){var r=[],n=[];if(e instanceof Lt)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new Sr("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(o){if(!(o instanceof Lt))throw new Sr("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new Sr("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new Sr("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(o){if(!(o instanceof Lt))throw new Sr("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(zT.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=qk(i,"implicit"),i.compiledExplicit=qk(i,"explicit"),i.compiledTypeMap=yG(i.compiledImplicit,i.compiledExplicit),i};var xG=zT,TG=new Lt("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),SG=new Lt("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),vG=new Lt("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),bG=new xG({explicit:[TG,SG,vG]});function wG(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function _G(){return null}function EG(t){return t===null}var RG=new Lt("tag:yaml.org,2002:null",{kind:"scalar",resolve:wG,construct:_G,predicate:EG,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function kG(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function PG(t){return t==="true"||t==="True"||t==="TRUE"}function MG(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var AG=new Lt("tag:yaml.org,2002:bool",{kind:"scalar",resolve:kG,construct:PG,predicate:MG,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function DG(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function IG(t){return 48<=t&&t<=55}function FG(t){return 48<=t&&t<=57}function CG(t){if(t===null)return!1;var e=t.length,r=0,n=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!DG(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!IG(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!FG(t.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function OG(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}function NG(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!_t.isNegativeZero(t)}var LG=new Lt("tag:yaml.org,2002:int",{kind:"scalar",resolve:CG,construct:OG,predicate:NG,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),UG=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function HG(t){return!(t===null||!UG.test(t)||t[t.length-1]==="_")}function VG(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}var BG=/^[-+]?[0-9]+e/;function WG(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(_t.isNegativeZero(t))return"-0.0";return r=t.toString(10),BG.test(r)?r.replace("e",".e"):r}function $G(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||_t.isNegativeZero(t))}var jG=new Lt("tag:yaml.org,2002:float",{kind:"scalar",resolve:HG,construct:VG,predicate:$G,represent:WG,defaultStyle:"lowercase"}),qG=bG.extend({implicit:[RG,AG,LG,jG]}),zG=qG,cP=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),pP=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function GG(t){return t===null?!1:cP.exec(t)!==null||pP.exec(t)!==null}function KG(t){var e,r,n,i,o,a,p,l=0,u=null,d,m,g;if(e=cP.exec(t),e===null&&(e=pP.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(o=+e[4],a=+e[5],p=+e[6],e[7]){for(l=e[7].slice(0,3);l.length<3;)l+="0";l=+l}return e[9]&&(d=+e[10],m=+(e[11]||0),u=(d*60+m)*6e4,e[9]==="-"&&(u=-u)),g=new Date(Date.UTC(r,n,i,o,a,p,l)),u&&g.setTime(g.getTime()-u),g}function QG(t){return t.toISOString()}var ZG=new Lt("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:GG,construct:KG,instanceOf:Date,represent:QG});function YG(t){return t==="<<"||t===null}var XG=new Lt("tag:yaml.org,2002:merge",{kind:"scalar",resolve:YG}),YT=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function JG(t){if(t===null)return!1;var e,r,n=0,i=t.length,o=YT;for(r=0;r<i;r++)if(e=o.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}function eK(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,o=YT,a=0,p=[];for(e=0;e<i;e++)e%4===0&&e&&(p.push(a>>16&255),p.push(a>>8&255),p.push(a&255)),a=a<<6|o.indexOf(n.charAt(e));return r=i%4*6,r===0?(p.push(a>>16&255),p.push(a>>8&255),p.push(a&255)):r===18?(p.push(a>>10&255),p.push(a>>2&255)):r===12&&p.push(a>>4&255),new Uint8Array(p)}function tK(t){var e="",r=0,n,i,o=t.length,a=YT;for(n=0;n<o;n++)n%3===0&&n&&(e+=a[r>>18&63],e+=a[r>>12&63],e+=a[r>>6&63],e+=a[r&63]),r=(r<<8)+t[n];return i=o%3,i===0?(e+=a[r>>18&63],e+=a[r>>12&63],e+=a[r>>6&63],e+=a[r&63]):i===2?(e+=a[r>>10&63],e+=a[r>>4&63],e+=a[r<<2&63],e+=a[64]):i===1&&(e+=a[r>>2&63],e+=a[r<<4&63],e+=a[64],e+=a[64]),e}function rK(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var nK=new Lt("tag:yaml.org,2002:binary",{kind:"scalar",resolve:JG,construct:eK,predicate:rK,represent:tK}),iK=Object.prototype.hasOwnProperty,oK=Object.prototype.toString;function sK(t){if(t===null)return!0;var e=[],r,n,i,o,a,p=t;for(r=0,n=p.length;r<n;r+=1){if(i=p[r],a=!1,oK.call(i)!=="[object Object]")return!1;for(o in i)if(iK.call(i,o))if(!a)a=!0;else return!1;if(!a)return!1;if(e.indexOf(o)===-1)e.push(o);else return!1}return!0}function aK(t){return t!==null?t:[]}var cK=new Lt("tag:yaml.org,2002:omap",{kind:"sequence",resolve:sK,construct:aK}),pK=Object.prototype.toString;function lK(t){if(t===null)return!0;var e,r,n,i,o,a=t;for(o=new Array(a.length),e=0,r=a.length;e<r;e+=1){if(n=a[e],pK.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;o[e]=[i[0],n[i[0]]]}return!0}function uK(t){if(t===null)return[];var e,r,n,i,o,a=t;for(o=new Array(a.length),e=0,r=a.length;e<r;e+=1)n=a[e],i=Object.keys(n),o[e]=[i[0],n[i[0]]];return o}var fK=new Lt("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:lK,construct:uK}),dK=Object.prototype.hasOwnProperty;function mK(t){if(t===null)return!0;var e,r=t;for(e in r)if(dK.call(r,e)&&r[e]!==null)return!1;return!0}function hK(t){return t!==null?t:{}}var gK=new Lt("tag:yaml.org,2002:set",{kind:"mapping",resolve:mK,construct:hK}),XT=zG.extend({implicit:[ZG,XG],explicit:[nK,cK,fK,gK]}),ao=Object.prototype.hasOwnProperty,Pf=1,lP=2,uP=3,Mf=4,qT=1,yK=2,zk=3,xK=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,TK=/[\x85\u2028\u2029]/,SK=/[,\[\]\{\}]/,fP=/^(?:!|!!|![a-z\-]+!)$/i,dP=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Gk(t){return Object.prototype.toString.call(t)}function zn(t){return t===10||t===13}function Xo(t){return t===9||t===32}function vr(t){return t===9||t===32||t===10||t===13}function xa(t){return t===44||t===91||t===93||t===123||t===125}function vK(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function bK(t){return t===120?2:t===117?4:t===85?8:0}function wK(t){return 48<=t&&t<=57?t-48:-1}function Kk(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}function _K(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var mP=new Array(256),hP=new Array(256);for(Yo=0;Yo<256;Yo++)mP[Yo]=Kk(Yo)?1:0,hP[Yo]=Kk(Yo);var Yo;function EK(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||XT,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function gP(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=fG(r),new Sr(e,r)}function pe(t,e){throw gP(t,e)}function Af(t,e){t.onWarning&&t.onWarning.call(null,gP(t,e))}var Qk={YAML:function(e,r,n){var i,o,a;e.version!==null&&pe(e,"duplication of %YAML directive"),n.length!==1&&pe(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&pe(e,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),a=parseInt(i[2],10),o!==1&&pe(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=a<2,a!==1&&a!==2&&Af(e,"unsupported YAML version of the document")},TAG:function(e,r,n){var i,o;n.length!==2&&pe(e,"TAG directive accepts exactly two arguments"),i=n[0],o=n[1],fP.test(i)||pe(e,"ill-formed tag handle (first argument) of the TAG directive"),ao.call(e.tagMap,i)&&pe(e,'there is a previously declared suffix for "'+i+'" tag handle'),dP.test(o)||pe(e,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{pe(e,"tag prefix is malformed: "+o)}e.tagMap[i]=o}};function so(t,e,r,n){var i,o,a,p;if(e<r){if(p=t.input.slice(e,r),n)for(i=0,o=p.length;i<o;i+=1)a=p.charCodeAt(i),a===9||32<=a&&a<=1114111||pe(t,"expected valid JSON character");else xK.test(p)&&pe(t,"the stream contains non-printable characters");t.result+=p}}function Zk(t,e,r,n){var i,o,a,p;for(_t.isObject(r)||pe(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),a=0,p=i.length;a<p;a+=1)o=i[a],ao.call(e,o)||(e[o]=r[o],n[o]=!0)}function Ta(t,e,r,n,i,o,a,p,l){var u,d;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),u=0,d=i.length;u<d;u+=1)Array.isArray(i[u])&&pe(t,"nested arrays are not supported inside keys"),typeof i=="object"&&Gk(i[u])==="[object Object]"&&(i[u]="[object Object]");if(typeof i=="object"&&Gk(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(u=0,d=o.length;u<d;u+=1)Zk(t,e,o[u],r);else Zk(t,e,o,r);else!t.json&&!ao.call(r,i)&&ao.call(e,i)&&(t.line=a||t.line,t.lineStart=p||t.lineStart,t.position=l||t.position,pe(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):e[i]=o,delete r[i];return e}function JT(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):pe(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function xt(t,e,r){for(var n=0,i=t.input.charCodeAt(t.position);i!==0;){for(;Xo(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(zn(i))for(JT(t),i=t.input.charCodeAt(t.position),n++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return r!==-1&&n!==0&&t.lineIndent<r&&Af(t,"deficient indentation"),n}function Ff(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||vr(r)))}function eS(t,e){e===1?t.result+=" ":e>1&&(t.result+=_t.repeat(`
`,e-1))}function RK(t,e,r){var n,i,o,a,p,l,u,d,m=t.kind,g=t.result,x;if(x=t.input.charCodeAt(t.position),vr(x)||xa(x)||x===35||x===38||x===42||x===33||x===124||x===62||x===39||x===34||x===37||x===64||x===96||(x===63||x===45)&&(i=t.input.charCodeAt(t.position+1),vr(i)||r&&xa(i)))return!1;for(t.kind="scalar",t.result="",o=a=t.position,p=!1;x!==0;){if(x===58){if(i=t.input.charCodeAt(t.position+1),vr(i)||r&&xa(i))break}else if(x===35){if(n=t.input.charCodeAt(t.position-1),vr(n))break}else{if(t.position===t.lineStart&&Ff(t)||r&&xa(x))break;if(zn(x))if(l=t.line,u=t.lineStart,d=t.lineIndent,xt(t,!1,-1),t.lineIndent>=e){p=!0,x=t.input.charCodeAt(t.position);continue}else{t.position=a,t.line=l,t.lineStart=u,t.lineIndent=d;break}}p&&(so(t,o,a,!1),eS(t,t.line-l),o=a=t.position,p=!1),Xo(x)||(a=t.position+1),x=t.input.charCodeAt(++t.position)}return so(t,o,a,!1),t.result?!0:(t.kind=m,t.result=g,!1)}function kK(t,e){var r,n,i;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(so(t,n,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)n=t.position,t.position++,i=t.position;else return!0;else zn(r)?(so(t,n,i,!0),eS(t,xt(t,!1,e)),n=i=t.position):t.position===t.lineStart&&Ff(t)?pe(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);pe(t,"unexpected end of the stream within a single quoted scalar")}function PK(t,e){var r,n,i,o,a,p;if(p=t.input.charCodeAt(t.position),p!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(p=t.input.charCodeAt(t.position))!==0;){if(p===34)return so(t,r,t.position,!0),t.position++,!0;if(p===92){if(so(t,r,t.position,!0),p=t.input.charCodeAt(++t.position),zn(p))xt(t,!1,e);else if(p<256&&mP[p])t.result+=hP[p],t.position++;else if((a=bK(p))>0){for(i=a,o=0;i>0;i--)p=t.input.charCodeAt(++t.position),(a=vK(p))>=0?o=(o<<4)+a:pe(t,"expected hexadecimal character");t.result+=_K(o),t.position++}else pe(t,"unknown escape sequence");r=n=t.position}else zn(p)?(so(t,r,n,!0),eS(t,xt(t,!1,e)),r=n=t.position):t.position===t.lineStart&&Ff(t)?pe(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}pe(t,"unexpected end of the stream within a double quoted scalar")}function MK(t,e){var r=!0,n,i,o,a=t.tag,p,l=t.anchor,u,d,m,g,x,b=Object.create(null),v,F,I,U;if(U=t.input.charCodeAt(t.position),U===91)d=93,x=!1,p=[];else if(U===123)d=125,x=!0,p={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=p),U=t.input.charCodeAt(++t.position);U!==0;){if(xt(t,!0,e),U=t.input.charCodeAt(t.position),U===d)return t.position++,t.tag=a,t.anchor=l,t.kind=x?"mapping":"sequence",t.result=p,!0;r?U===44&&pe(t,"expected the node content, but found ','"):pe(t,"missed comma between flow collection entries"),F=v=I=null,m=g=!1,U===63&&(u=t.input.charCodeAt(t.position+1),vr(u)&&(m=g=!0,t.position++,xt(t,!0,e))),n=t.line,i=t.lineStart,o=t.position,Sa(t,e,Pf,!1,!0),F=t.tag,v=t.result,xt(t,!0,e),U=t.input.charCodeAt(t.position),(g||t.line===n)&&U===58&&(m=!0,U=t.input.charCodeAt(++t.position),xt(t,!0,e),Sa(t,e,Pf,!1,!0),I=t.result),x?Ta(t,p,b,F,v,I,n,i,o):m?p.push(Ta(t,null,b,F,v,I,n,i,o)):p.push(v),xt(t,!0,e),U=t.input.charCodeAt(t.position),U===44?(r=!0,U=t.input.charCodeAt(++t.position)):r=!1}pe(t,"unexpected end of the stream within a flow collection")}function AK(t,e){var r,n,i=qT,o=!1,a=!1,p=e,l=0,u=!1,d,m;if(m=t.input.charCodeAt(t.position),m===124)n=!1;else if(m===62)n=!0;else return!1;for(t.kind="scalar",t.result="";m!==0;)if(m=t.input.charCodeAt(++t.position),m===43||m===45)qT===i?i=m===43?zk:yK:pe(t,"repeat of a chomping mode identifier");else if((d=wK(m))>=0)d===0?pe(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):a?pe(t,"repeat of an indentation width identifier"):(p=e+d-1,a=!0);else break;if(Xo(m)){do m=t.input.charCodeAt(++t.position);while(Xo(m));if(m===35)do m=t.input.charCodeAt(++t.position);while(!zn(m)&&m!==0)}for(;m!==0;){for(JT(t),t.lineIndent=0,m=t.input.charCodeAt(t.position);(!a||t.lineIndent<p)&&m===32;)t.lineIndent++,m=t.input.charCodeAt(++t.position);if(!a&&t.lineIndent>p&&(p=t.lineIndent),zn(m)){l++;continue}if(t.lineIndent<p){i===zk?t.result+=_t.repeat(`
`,o?1+l:l):i===qT&&o&&(t.result+=`
`);break}for(n?Xo(m)?(u=!0,t.result+=_t.repeat(`
`,o?1+l:l)):u?(u=!1,t.result+=_t.repeat(`
`,l+1)):l===0?o&&(t.result+=" "):t.result+=_t.repeat(`
`,l):t.result+=_t.repeat(`
`,o?1+l:l),o=!0,a=!0,l=0,r=t.position;!zn(m)&&m!==0;)m=t.input.charCodeAt(++t.position);so(t,r,t.position,!1)}return!0}function Yk(t,e){var r,n=t.tag,i=t.anchor,o=[],a,p=!1,l;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),l=t.input.charCodeAt(t.position);l!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,pe(t,"tab characters must not be used in indentation")),!(l!==45||(a=t.input.charCodeAt(t.position+1),!vr(a))));){if(p=!0,t.position++,xt(t,!0,-1)&&t.lineIndent<=e){o.push(null),l=t.input.charCodeAt(t.position);continue}if(r=t.line,Sa(t,e,uP,!1,!0),o.push(t.result),xt(t,!0,-1),l=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&l!==0)pe(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return p?(t.tag=n,t.anchor=i,t.kind="sequence",t.result=o,!0):!1}function DK(t,e,r){var n,i,o,a,p,l,u=t.tag,d=t.anchor,m={},g=Object.create(null),x=null,b=null,v=null,F=!1,I=!1,U;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=m),U=t.input.charCodeAt(t.position);U!==0;){if(!F&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,pe(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),o=t.line,(U===63||U===58)&&vr(n))U===63?(F&&(Ta(t,m,g,x,b,null,a,p,l),x=b=v=null),I=!0,F=!0,i=!0):F?(F=!1,i=!0):pe(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,U=n;else{if(a=t.line,p=t.lineStart,l=t.position,!Sa(t,r,lP,!1,!0))break;if(t.line===o){for(U=t.input.charCodeAt(t.position);Xo(U);)U=t.input.charCodeAt(++t.position);if(U===58)U=t.input.charCodeAt(++t.position),vr(U)||pe(t,"a whitespace character is expected after the key-value separator within a block mapping"),F&&(Ta(t,m,g,x,b,null,a,p,l),x=b=v=null),I=!0,F=!1,i=!1,x=t.tag,b=t.result;else if(I)pe(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=u,t.anchor=d,!0}else if(I)pe(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=u,t.anchor=d,!0}if((t.line===o||t.lineIndent>e)&&(F&&(a=t.line,p=t.lineStart,l=t.position),Sa(t,e,Mf,!0,i)&&(F?b=t.result:v=t.result),F||(Ta(t,m,g,x,b,v,a,p,l),x=b=v=null),xt(t,!0,-1),U=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&U!==0)pe(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return F&&Ta(t,m,g,x,b,null,a,p,l),I&&(t.tag=u,t.anchor=d,t.kind="mapping",t.result=m),I}function IK(t){var e,r=!1,n=!1,i,o,a;if(a=t.input.charCodeAt(t.position),a!==33)return!1;if(t.tag!==null&&pe(t,"duplication of a tag property"),a=t.input.charCodeAt(++t.position),a===60?(r=!0,a=t.input.charCodeAt(++t.position)):a===33?(n=!0,i="!!",a=t.input.charCodeAt(++t.position)):i="!",e=t.position,r){do a=t.input.charCodeAt(++t.position);while(a!==0&&a!==62);t.position<t.length?(o=t.input.slice(e,t.position),a=t.input.charCodeAt(++t.position)):pe(t,"unexpected end of the stream within a verbatim tag")}else{for(;a!==0&&!vr(a);)a===33&&(n?pe(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),fP.test(i)||pe(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),a=t.input.charCodeAt(++t.position);o=t.input.slice(e,t.position),SK.test(o)&&pe(t,"tag suffix cannot contain flow indicator characters")}o&&!dP.test(o)&&pe(t,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{pe(t,"tag name is malformed: "+o)}return r?t.tag=o:ao.call(t.tagMap,i)?t.tag=t.tagMap[i]+o:i==="!"?t.tag="!"+o:i==="!!"?t.tag="tag:yaml.org,2002:"+o:pe(t,'undeclared tag handle "'+i+'"'),!0}function FK(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&pe(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!vr(r)&&!xa(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&pe(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function CK(t){var e,r,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!vr(n)&&!xa(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&pe(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),ao.call(t.anchorMap,r)||pe(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],xt(t,!0,-1),!0}function Sa(t,e,r,n,i){var o,a,p,l=1,u=!1,d=!1,m,g,x,b,v,F;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=a=p=Mf===r||uP===r,n&&xt(t,!0,-1)&&(u=!0,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)),l===1)for(;IK(t)||FK(t);)xt(t,!0,-1)?(u=!0,p=o,t.lineIndent>e?l=1:t.lineIndent===e?l=0:t.lineIndent<e&&(l=-1)):p=!1;if(p&&(p=u||i),(l===1||Mf===r)&&(Pf===r||lP===r?v=e:v=e+1,F=t.position-t.lineStart,l===1?p&&(Yk(t,F)||DK(t,F,v))||MK(t,v)?d=!0:(a&&AK(t,v)||kK(t,v)||PK(t,v)?d=!0:CK(t)?(d=!0,(t.tag!==null||t.anchor!==null)&&pe(t,"alias node should not have any properties")):RK(t,v,Pf===r)&&(d=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):l===0&&(d=p&&Yk(t,F))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&pe(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),m=0,g=t.implicitTypes.length;m<g;m+=1)if(b=t.implicitTypes[m],b.resolve(t.result)){t.result=b.construct(t.result),t.tag=b.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(ao.call(t.typeMap[t.kind||"fallback"],t.tag))b=t.typeMap[t.kind||"fallback"][t.tag];else for(b=null,x=t.typeMap.multi[t.kind||"fallback"],m=0,g=x.length;m<g;m+=1)if(t.tag.slice(0,x[m].tag.length)===x[m].tag){b=x[m];break}b||pe(t,"unknown tag !<"+t.tag+">"),t.result!==null&&b.kind!==t.kind&&pe(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+b.kind+'", not "'+t.kind+'"'),b.resolve(t.result,t.tag)?(t.result=b.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):pe(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||d}function OK(t){var e=t.position,r,n,i,o=!1,a;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(a=t.input.charCodeAt(t.position))!==0&&(xt(t,!0,-1),a=t.input.charCodeAt(t.position),!(t.lineIndent>0||a!==37));){for(o=!0,a=t.input.charCodeAt(++t.position),r=t.position;a!==0&&!vr(a);)a=t.input.charCodeAt(++t.position);for(n=t.input.slice(r,t.position),i=[],n.length<1&&pe(t,"directive name must not be less than one character in length");a!==0;){for(;Xo(a);)a=t.input.charCodeAt(++t.position);if(a===35){do a=t.input.charCodeAt(++t.position);while(a!==0&&!zn(a));break}if(zn(a))break;for(r=t.position;a!==0&&!vr(a);)a=t.input.charCodeAt(++t.position);i.push(t.input.slice(r,t.position))}a!==0&&JT(t),ao.call(Qk,n)?Qk[n](t,n,i):Af(t,'unknown document directive "'+n+'"')}if(xt(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,xt(t,!0,-1)):o&&pe(t,"directives end mark is expected"),Sa(t,t.lineIndent-1,Mf,!1,!0),xt(t,!0,-1),t.checkLineBreaks&&TK.test(t.input.slice(e,t.position))&&Af(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&Ff(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,xt(t,!0,-1));return}if(t.position<t.length-1)pe(t,"end of the stream or a document separator is expected");else return}function yP(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new EK(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,pe(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)OK(r);return r.documents}function NK(t,e,r){e!==null&&typeof e=="object"&&typeof r>"u"&&(r=e,e=null);var n=yP(t,r);if(typeof e!="function")return n;for(var i=0,o=n.length;i<o;i+=1)e(n[i])}function LK(t,e){var r=yP(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new Sr("expected a single document in the stream, but found more")}}var UK=NK,HK=LK,xP={loadAll:UK,load:HK},TP=Object.prototype.toString,SP=Object.prototype.hasOwnProperty,tS=65279,VK=9,cp=10,BK=13,WK=32,$K=33,jK=34,GT=35,qK=37,zK=38,GK=39,KK=42,vP=44,QK=45,Df=58,ZK=61,YK=62,XK=63,JK=64,bP=91,wP=93,e4=96,_P=123,t4=124,EP=125,zt={};zt[0]="\\0";zt[7]="\\a";zt[8]="\\b";zt[9]="\\t";zt[10]="\\n";zt[11]="\\v";zt[12]="\\f";zt[13]="\\r";zt[27]="\\e";zt[34]='\\"';zt[92]="\\\\";zt[133]="\\N";zt[160]="\\_";zt[8232]="\\L";zt[8233]="\\P";var r4=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],n4=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function i4(t,e){var r,n,i,o,a,p,l;if(e===null)return{};for(r={},n=Object.keys(e),i=0,o=n.length;i<o;i+=1)a=n[i],p=String(e[a]),a.slice(0,2)==="!!"&&(a="tag:yaml.org,2002:"+a.slice(2)),l=t.compiledTypeMap.fallback[a],l&&SP.call(l.styleAliases,p)&&(p=l.styleAliases[p]),r[a]=p;return r}function o4(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else if(t<=4294967295)r="U",n=8;else throw new Sr("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+_t.repeat("0",n-e.length)+e}var s4=1,pp=2;function a4(t){this.schema=t.schema||XT,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=_t.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=i4(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?pp:s4,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Xk(t,e){for(var r=_t.repeat(" ",e),n=0,i=-1,o="",a,p=t.length;n<p;)i=t.indexOf(`
`,n),i===-1?(a=t.slice(n),n=p):(a=t.slice(n,i+1),n=i+1),a.length&&a!==`
`&&(o+=r),o+=a;return o}function KT(t,e){return`
`+_t.repeat(" ",t.indent*e)}function c4(t,e){var r,n,i;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(i=t.implicitTypes[r],i.resolve(e))return!0;return!1}function If(t){return t===WK||t===VK}function lp(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==tS||65536<=t&&t<=1114111}function Jk(t){return lp(t)&&t!==tS&&t!==BK&&t!==cp}function eP(t,e,r){var n=Jk(t),i=n&&!If(t);return(r?n:n&&t!==vP&&t!==bP&&t!==wP&&t!==_P&&t!==EP)&&t!==GT&&!(e===Df&&!i)||Jk(e)&&!If(e)&&t===GT||e===Df&&i}function p4(t){return lp(t)&&t!==tS&&!If(t)&&t!==QK&&t!==XK&&t!==Df&&t!==vP&&t!==bP&&t!==wP&&t!==_P&&t!==EP&&t!==GT&&t!==zK&&t!==KK&&t!==$K&&t!==t4&&t!==ZK&&t!==YK&&t!==GK&&t!==jK&&t!==qK&&t!==JK&&t!==e4}function l4(t){return!If(t)&&t!==Df}function sp(t,e){var r=t.charCodeAt(e),n;return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function RP(t){var e=/^\n* /;return e.test(t)}var kP=1,QT=2,PP=3,MP=4,ya=5;function u4(t,e,r,n,i,o,a,p){var l,u=0,d=null,m=!1,g=!1,x=n!==-1,b=-1,v=p4(sp(t,0))&&l4(sp(t,t.length-1));if(e||a)for(l=0;l<t.length;u>=65536?l+=2:l++){if(u=sp(t,l),!lp(u))return ya;v=v&&eP(u,d,p),d=u}else{for(l=0;l<t.length;u>=65536?l+=2:l++){if(u=sp(t,l),u===cp)m=!0,x&&(g=g||l-b-1>n&&t[b+1]!==" ",b=l);else if(!lp(u))return ya;v=v&&eP(u,d,p),d=u}g=g||x&&l-b-1>n&&t[b+1]!==" "}return!m&&!g?v&&!a&&!i(t)?kP:o===pp?ya:QT:r>9&&RP(t)?ya:a?o===pp?ya:QT:g?MP:PP}function f4(t,e,r,n,i){t.dump=function(){if(e.length===0)return t.quotingType===pp?'""':"''";if(!t.noCompatMode&&(r4.indexOf(e)!==-1||n4.test(e)))return t.quotingType===pp?'"'+e+'"':"'"+e+"'";var o=t.indent*Math.max(1,r),a=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),p=n||t.flowLevel>-1&&r>=t.flowLevel;function l(u){return c4(t,u)}switch(u4(e,p,t.indent,a,l,t.quotingType,t.forceQuotes&&!n,i)){case kP:return e;case QT:return"'"+e.replace(/'/g,"''")+"'";case PP:return"|"+tP(e,t.indent)+rP(Xk(e,o));case MP:return">"+tP(e,t.indent)+rP(Xk(d4(e,a),o));case ya:return'"'+m4(e)+'"';default:throw new Sr("impossible error: invalid scalar style")}}()}function tP(t,e){var r=RP(t)?String(e):"",n=t[t.length-1]===`
`,i=n&&(t[t.length-2]===`
`||t===`
`),o=i?"+":n?"":"-";return r+o+`
`}function rP(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function d4(t,e){for(var r=/(\n+)([^\n]*)/g,n=function(){var u=t.indexOf(`
`);return u=u!==-1?u:t.length,r.lastIndex=u,nP(t.slice(0,u),e)}(),i=t[0]===`
`||t[0]===" ",o,a;a=r.exec(t);){var p=a[1],l=a[2];o=l[0]===" ",n+=p+(!i&&!o&&l!==""?`
`:"")+nP(l,e),i=o}return n}function nP(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,n,i=0,o,a=0,p=0,l="";n=r.exec(t);)p=n.index,p-i>e&&(o=a>i?a:p,l+=`
`+t.slice(i,o),i=o+1),a=p;return l+=`
`,t.length-i>e&&a>i?l+=t.slice(i,a)+`
`+t.slice(a+1):l+=t.slice(i),l.slice(1)}function m4(t){for(var e="",r=0,n,i=0;i<t.length;r>=65536?i+=2:i++)r=sp(t,i),n=zt[r],!n&&lp(r)?(e+=t[i],r>=65536&&(e+=t[i+1])):e+=n||o4(r);return e}function h4(t,e,r){var n="",i=t.tag,o,a,p;for(o=0,a=r.length;o<a;o+=1)p=r[o],t.replacer&&(p=t.replacer.call(r,String(o),p)),(Ri(t,e,p,!1,!1)||typeof p>"u"&&Ri(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=i,t.dump="["+n+"]"}function iP(t,e,r,n){var i="",o=t.tag,a,p,l;for(a=0,p=r.length;a<p;a+=1)l=r[a],t.replacer&&(l=t.replacer.call(r,String(a),l)),(Ri(t,e+1,l,!0,!0,!1,!0)||typeof l>"u"&&Ri(t,e+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=KT(t,e)),t.dump&&cp===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=o,t.dump=i||"[]"}function g4(t,e,r){var n="",i=t.tag,o=Object.keys(r),a,p,l,u,d;for(a=0,p=o.length;a<p;a+=1)d="",n!==""&&(d+=", "),t.condenseFlow&&(d+='"'),l=o[a],u=r[l],t.replacer&&(u=t.replacer.call(r,l,u)),Ri(t,e,l,!1,!1)&&(t.dump.length>1024&&(d+="? "),d+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),Ri(t,e,u,!1,!1)&&(d+=t.dump,n+=d));t.tag=i,t.dump="{"+n+"}"}function y4(t,e,r,n){var i="",o=t.tag,a=Object.keys(r),p,l,u,d,m,g;if(t.sortKeys===!0)a.sort();else if(typeof t.sortKeys=="function")a.sort(t.sortKeys);else if(t.sortKeys)throw new Sr("sortKeys must be a boolean or a function");for(p=0,l=a.length;p<l;p+=1)g="",(!n||i!=="")&&(g+=KT(t,e)),u=a[p],d=r[u],t.replacer&&(d=t.replacer.call(r,u,d)),Ri(t,e+1,u,!0,!0,!0)&&(m=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,m&&(t.dump&&cp===t.dump.charCodeAt(0)?g+="?":g+="? "),g+=t.dump,m&&(g+=KT(t,e)),Ri(t,e+1,d,!0,m)&&(t.dump&&cp===t.dump.charCodeAt(0)?g+=":":g+=": ",g+=t.dump,i+=g));t.tag=o,t.dump=i||"{}"}function oP(t,e,r){var n,i,o,a,p,l;for(i=r?t.explicitTypes:t.implicitTypes,o=0,a=i.length;o<a;o+=1)if(p=i[o],(p.instanceOf||p.predicate)&&(!p.instanceOf||typeof e=="object"&&e instanceof p.instanceOf)&&(!p.predicate||p.predicate(e))){if(r?p.multi&&p.representName?t.tag=p.representName(e):t.tag=p.tag:t.tag="?",p.represent){if(l=t.styleMap[p.tag]||p.defaultStyle,TP.call(p.represent)==="[object Function]")n=p.represent(e,l);else if(SP.call(p.represent,l))n=p.represent[l](e,l);else throw new Sr("!<"+p.tag+'> tag resolver accepts not "'+l+'" style');t.dump=n}return!0}return!1}function Ri(t,e,r,n,i,o,a){t.tag=null,t.dump=r,oP(t,r,!1)||oP(t,r,!0);var p=TP.call(t.dump),l=n,u;n&&(n=t.flowLevel<0||t.flowLevel>e);var d=p==="[object Object]"||p==="[object Array]",m,g;if(d&&(m=t.duplicates.indexOf(r),g=m!==-1),(t.tag!==null&&t.tag!=="?"||g||t.indent!==2&&e>0)&&(i=!1),g&&t.usedDuplicates[m])t.dump="*ref_"+m;else{if(d&&g&&!t.usedDuplicates[m]&&(t.usedDuplicates[m]=!0),p==="[object Object]")n&&Object.keys(t.dump).length!==0?(y4(t,e,t.dump,i),g&&(t.dump="&ref_"+m+t.dump)):(g4(t,e,t.dump),g&&(t.dump="&ref_"+m+" "+t.dump));else if(p==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!a&&e>0?iP(t,e-1,t.dump,i):iP(t,e,t.dump,i),g&&(t.dump="&ref_"+m+t.dump)):(h4(t,e,t.dump),g&&(t.dump="&ref_"+m+" "+t.dump));else if(p==="[object String]")t.tag!=="?"&&f4(t,t.dump,e,o,l);else{if(p==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new Sr("unacceptable kind of an object to dump "+p)}t.tag!==null&&t.tag!=="?"&&(u=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?u="!"+u:u.slice(0,18)==="tag:yaml.org,2002:"?u="!!"+u.slice(18):u="!<"+u+">",t.dump=u+" "+t.dump)}return!0}function x4(t,e){var r=[],n=[],i,o;for(ZT(t,r,n),i=0,o=n.length;i<o;i+=1)e.duplicates.push(r[n[i]]);e.usedDuplicates=new Array(o)}function ZT(t,e,r){var n,i,o;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(e.push(t),Array.isArray(t))for(i=0,o=t.length;i<o;i+=1)ZT(t[i],e,r);else for(n=Object.keys(t),i=0,o=n.length;i<o;i+=1)ZT(t[n[i]],e,r)}function T4(t,e){e=e||{};var r=new a4(e);r.noRefs||x4(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),Ri(r,0,n,!0,!0)?r.dump+`
`:""}var S4=T4,v4={dump:S4};function rS(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var AP=Lt;var DP=XT,b4=xP.load,Yde=xP.loadAll,IP=v4.dump;var Xde=rS("safeLoad","load"),Jde=rS("safeLoadAll","loadAll"),eme=rS("safeDump","dump");var Cf=class{constructor(e,r){this.data=e;this.opts=r}represent(){let e=IP(this.data,Object.assign({replacer:R4,schema:_4},this.opts));return e=e.trim(),e.includes(`
`)&&(e=`
`+e),e}},w4=new AP("!format",{kind:"scalar",resolve:()=>!1,instanceOf:Cf,represent:t=>t.represent()}),_4=DP.extend({implicit:[w4]}),nS=t=>typeof t=="object"&&t!=null;function E4(t){if(nS(t))return Object.values(t).every(e=>!nS(e)&&!Array.isArray(e));if(Array.isArray(t))return t.every(e=>!nS(e)&&!Array.isArray(e))}function R4(t,e){return t===""?e:E4(e)?new Cf(e,{flowLevel:0}):e}var iS=["addSelection","addSelectionAfter","addSelectionBefore","breakLine","clearAndSetSelection","copyToClipboard","cutToClipboard","decrement","deselect","editNewLineAfter","editNewLineBefore","experimental.setInstanceReference","extractVariable","findInDocument","findInWorkspace","flashTargets","foldRegion","followLink","followLinkAside","gitAccept","gitRevert","gitStage","gitUnstage","increment","indentLine","insertCopyAfter","insertCopyBefore","insertEmptyLineAfter","insertEmptyLineBefore","insertEmptyLinesAround","joinLines","outdentLine","randomizeTargets","remove","rename","revealDefinition","revealTypeDefinition","reverseTargets","scrollToBottom","scrollToCenter","scrollToTop","setSelection","setSelectionAfter","setSelectionBefore","showDebugHover","showHover","showQuickFix","showReferences","sortTargets","toggleLineBreakpoint","toggleLineComment","unfoldRegion","private.getTargets","private.setKeyboardTarget","private.showParseTree"],P4=["callAsFunction","editNew","executeCommand","generateSnippet","getText","highlight","insertSnippet","moveToTarget","pasteFromClipboard","replace","replaceWithTarget","rewrapWithPairedDelimiter","swapTargets","wrapWithPairedDelimiter","wrapWithSnippet","parsed"],CP=[...iS,...P4];var M4=["angleBrackets","backtickQuotes","curlyBrackets","doubleQuotes","escapedDoubleQuotes","escapedParentheses","escapedSingleQuotes","escapedSquareBrackets","parentheses","singleQuotes","squareBrackets","tripleBacktickQuotes","tripleDoubleQuotes","tripleSingleQuotes"],A4=["string","any","collectionBoundary"],Of=[...M4,...A4],Jo=["argumentOrParameter","anonymousFunction","attribute","branch","class","className","collectionItem","collectionKey","comment","private.fieldAccess","functionCall","functionCallee","functionName","ifStatement","instance","list","map","name","namedFunction","regularExpression","statement","string","type","value","condition","section","sectionLevelOne","sectionLevelTwo","sectionLevelThree","sectionLevelFour","sectionLevelFive","sectionLevelSix","selector","private.switchStatementSubject","unit","xmlBothTags","xmlElement","xmlEndTag","xmlStartTag","part","chapter","subSection","subSubSection","namedParagraph","subParagraph","environment","character","word","token","identifier","line","sentence","paragraph","boundedParagraph","document","nonWhitespaceSequence","boundedNonWhitespaceSequence","url","notebookCell","command","textFragment","disqualifyDelimiter","pairDelimiter"];function OP(t){return Jo.includes(t.type)}var NP=["simpleScopeTypeType","complexScopeTypeType","customRegex","pairedDelimiter","action","customAction","grapheme"],up=class extends Error{constructor(e){super(e),this.name="NeedsInitialTalonUpdateError"}},va=class extends Error{constructor(){super("Custom spoken forms are not currently supported in this ide"),this.name="DisabledCustomSpokenFormsError"}};function fp(t){return t.replace(/([A-Z])/g," $1").split(" ").map(e=>e.toLowerCase()).join(" ")}function es(t){return t.version>=7}var co=class{constructor(e){this.hashFunction=e;this.map={}}hash(e){return this.hashFunction(e).join("\0")}set(e,r){return this.map[this.hash(e)]=r,this}has(e){return this.hash(e)in this.map}get(e){return this.map[this.hash(e)]}delete(e){return delete this.map[this.hash(e)],this}clear(){return this.map={},this}};var ba=class extends Map{constructor(r){super();this.getDefaultValue=r}get(r){let n=super.get(r);if(n!=null)return n;let i=this.getDefaultValue(r);return this.set(r,i),i}};function LP(...t){return{dispose(){t.forEach(({dispose:e})=>{try{e()}catch(r){console.error(r)}})}}}function dp(t){return typeof t=="string"||t instanceof String}function Nf(t){let[e,...r]=t;return I4(e,r)}function I4(t,e){let r;if(dp(t)){let n=t,[i,o,...a]=e;r={version:0,spokenForm:n,action:i,targets:o,extraArgs:a,usePrePhraseSnapshot:!1}}else r=t;return r}function mp(t,e){let r=new Map;return t.forEach(n=>{let i=e(n),o;r.has(i)?o=r.get(i):(o=[],r.set(i,o)),o.push(n)}),r}function UP(t){for(let e of t)return!1;return!0}function ki(t){return Object.keys(t)}function hp(t,e){return`${t}.${e}`}function HP(t,e,r){if(t.length<2)return[...t];if(t.length===2)return e(t[0],t[1])?[t[0]]:[...t];let n=[],i=t.reduce((o,a)=>{let p=r(a),l=o.get(p);return l==null?(o.set(p,[a]),o):(o.get(p).push(a),l.length===2&&n.push(p),o)},new Map);return n.length===0?[...t]:(n.forEach(o=>{i.set(o,Zc(i.get(o),e))}),t.flatMap(o=>{let a=r(o),p=i.get(a);if(p==null||p.length===0)return[];let l=p[0];return e(l,o)?(p.shift(),l):[]}))}function ts(t,e){if(t.length!==e.length)throw new Error("Lists must have the same length");return t.map((r,n)=>[r,e[n]])}var qP=Symbol.for("immer-nothing"),VP=Symbol.for("immer-draftable"),Vr=Symbol.for("immer-state"),F4=process.env.NODE_ENV!=="production"?[function(t){return`The plugin for '${t}' has not been loaded into Immer. To enable the plugin, import and call \`enable${t}()\` when initializing your application.`},function(t){return`produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '${t}'`},"This object has been frozen and should not be mutated",function(t){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+t},"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.","Immer forbids circular references","The first or second argument to `produce` must be a function","The third argument to `produce` must be a function or undefined","First argument to `createDraft` must be a plain object, an array, or an immerable object","First argument to `finishDraft` must be a draft returned by `createDraft`",function(t){return`'current' expects a draft, got: ${t}`},"Object.defineProperty() cannot be used on an Immer draft","Object.setPrototypeOf() cannot be used on an Immer draft","Immer only supports deleting array indices","Immer only supports setting array indices and the 'length' property",function(t){return`'original' expects a draft, got: ${t}`}]:[];function br(t,...e){if(process.env.NODE_ENV!=="production"){let r=F4[t],n=typeof r=="function"?r.apply(null,e):r;throw new Error(`[Immer] ${n}`)}throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var wa=Object.getPrototypeOf;function _a(t){return!!t&&!!t[Vr]}function ns(t){return t?zP(t)||Array.isArray(t)||!!t[VP]||!!t.constructor?.[VP]||Bf(t)||Wf(t):!1}var C4=Object.prototype.constructor.toString();function zP(t){if(!t||typeof t!="object")return!1;let e=wa(t);if(e===null)return!0;let r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===C4}function Lf(t,e){Vf(t)===0?Reflect.ownKeys(t).forEach(r=>{e(r,t[r],t)}):t.forEach((r,n)=>e(n,r,t))}function Vf(t){let e=t[Vr];return e?e.type_:Array.isArray(t)?1:Bf(t)?2:Wf(t)?3:0}function aS(t,e){return Vf(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function GP(t,e,r){let n=Vf(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function O4(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Bf(t){return t instanceof Map}function Wf(t){return t instanceof Set}function rs(t){return t.copy_||t.base_}function cS(t,e){if(Bf(t))return new Map(t);if(Wf(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);let r=zP(t);if(e===!0||e==="class_only"&&!r){let n=Object.getOwnPropertyDescriptors(t);delete n[Vr];let i=Reflect.ownKeys(n);for(let o=0;o<i.length;o++){let a=i[o],p=n[a];p.writable===!1&&(p.writable=!0,p.configurable=!0),(p.get||p.set)&&(n[a]={configurable:!0,writable:!0,enumerable:p.enumerable,value:t[a]})}return Object.create(wa(t),n)}else{let n=wa(t);if(n!==null&&r)return{...t};let i=Object.create(n);return Object.assign(i,t)}}function dS(t,e=!1){return $f(t)||_a(t)||!ns(t)||(Vf(t)>1&&(t.set=t.add=t.clear=t.delete=N4),Object.freeze(t),e&&Object.entries(t).forEach(([r,n])=>dS(n,!0))),t}function N4(){br(2)}function $f(t){return Object.isFrozen(t)}var L4={};function is(t){let e=L4[t];return e||br(0,t),e}var gp;function KP(){return gp}function U4(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function BP(t,e){e&&(is("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function pS(t){lS(t),t.drafts_.forEach(H4),t.drafts_=null}function lS(t){t===gp&&(gp=t.parent_)}function WP(t){return gp=U4(gp,t)}function H4(t){let e=t[Vr];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function $P(t,e){e.unfinalizedDrafts_=e.drafts_.length;let r=e.drafts_[0];return t!==void 0&&t!==r?(r[Vr].modified_&&(pS(e),br(4)),ns(t)&&(t=Uf(e,t),e.parent_||Hf(e,t)),e.patches_&&is("Patches").generateReplacementPatches_(r[Vr].base_,t,e.patches_,e.inversePatches_)):t=Uf(e,r,[]),pS(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==qP?t:void 0}function Uf(t,e,r){if($f(e))return e;let n=e[Vr];if(!n)return Lf(e,(i,o)=>jP(t,n,e,i,o,r)),e;if(n.scope_!==t)return e;if(!n.modified_)return Hf(t,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;let i=n.copy_,o=i,a=!1;n.type_===3&&(o=new Set(i),i.clear(),a=!0),Lf(o,(p,l)=>jP(t,n,i,p,l,r,a)),Hf(t,i,!1),r&&t.patches_&&is("Patches").generatePatches_(n,r,t.patches_,t.inversePatches_)}return n.copy_}function jP(t,e,r,n,i,o,a){if(process.env.NODE_ENV!=="production"&&i===r&&br(5),_a(i)){let p=o&&e&&e.type_!==3&&!aS(e.assigned_,n)?o.concat(n):void 0,l=Uf(t,i,p);if(GP(r,n,l),_a(l))t.canAutoFreeze_=!1;else return}else a&&r.add(i);if(ns(i)&&!$f(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;Uf(t,i),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&Hf(t,i)}}function Hf(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&dS(e,r)}function V4(t,e){let r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:KP(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1},i=n,o=mS;r&&(i=[n],o=yp);let{revoke:a,proxy:p}=Proxy.revocable(i,o);return n.draft_=p,n.revoke_=a,p}var mS={get(t,e){if(e===Vr)return t;let r=rs(t);if(!aS(r,e))return B4(t,r,e);let n=r[e];return t.finalized_||!ns(n)?n:n===oS(t.base_,e)?(sS(t),t.copy_[e]=fS(n,t)):n},has(t,e){return e in rs(t)},ownKeys(t){return Reflect.ownKeys(rs(t))},set(t,e,r){let n=QP(rs(t),e);if(n?.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){let i=oS(rs(t),e),o=i?.[Vr];if(o&&o.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(O4(r,i)&&(r!==void 0||aS(t.base_,e)))return!0;sS(t),uS(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return oS(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,sS(t),uS(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){let r=rs(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){br(11)},getPrototypeOf(t){return wa(t.base_)},setPrototypeOf(){br(12)}},yp={};Lf(mS,(t,e)=>{yp[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});yp.deleteProperty=function(t,e){return process.env.NODE_ENV!=="production"&&isNaN(parseInt(e))&&br(13),yp.set.call(this,t,e,void 0)};yp.set=function(t,e,r){return process.env.NODE_ENV!=="production"&&e!=="length"&&isNaN(parseInt(e))&&br(14),mS.set.call(this,t[0],e,r,t[0])};function oS(t,e){let r=t[Vr];return(r?rs(r):t)[e]}function B4(t,e,r){let n=QP(e,r);return n?"value"in n?n.value:n.get?.call(t.draft_):void 0}function QP(t,e){if(!(e in t))return;let r=wa(t);for(;r;){let n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=wa(r)}}function uS(t){t.modified_||(t.modified_=!0,t.parent_&&uS(t.parent_))}function sS(t){t.copy_||(t.copy_=cS(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var W4=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){let o=r;r=e;let a=this;return function(l=o,...u){return a.produce(l,d=>r.call(this,d,...u))}}typeof r!="function"&&br(6),n!==void 0&&typeof n!="function"&&br(7);let i;if(ns(e)){let o=WP(this),a=fS(e,void 0),p=!0;try{i=r(a),p=!1}finally{p?pS(o):lS(o)}return BP(o,n),$P(i,o)}else if(!e||typeof e!="object"){if(i=r(e),i===void 0&&(i=e),i===qP&&(i=void 0),this.autoFreeze_&&dS(i,!0),n){let o=[],a=[];is("Patches").generateReplacementPatches_(e,i,o,a),n(o,a)}return i}else br(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(a,...p)=>this.produceWithPatches(a,l=>e(l,...p));let n,i;return[this.produce(e,r,(a,p)=>{n=a,i=p}),n,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){ns(t)||br(8),_a(t)&&(t=$4(t));let e=WP(this),r=fS(t,void 0);return r[Vr].isManual_=!0,lS(e),r}finishDraft(t,e){let r=t&&t[Vr];(!r||!r.isManual_)&&br(9);let{scope_:n}=r;return BP(n,e),$P(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){let i=e[r];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}r>-1&&(e=e.slice(r+1));let n=is("Patches").applyPatches_;return _a(t)?n(t,e):this.produce(t,i=>n(i,e))}};function fS(t,e){let r=Bf(t)?is("MapSet").proxyMap_(t,e):Wf(t)?is("MapSet").proxySet_(t,e):V4(t,e);return(e?e.scope_:KP()).drafts_.push(r),r}function $4(t){return _a(t)||br(10,t),ZP(t)}function ZP(t){if(!ns(t)||$f(t))return t;let e=t[Vr],r;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=cS(t,e.scope_.immer_.useStrictShallowCopy_)}else r=cS(t,!0);return Lf(r,(n,i)=>{GP(r,n,ZP(i))}),e&&(e.finalized_=!1),r}var Br=new W4,jf=Br.produce,Xge=Br.produceWithPatches.bind(Br),Jge=Br.setAutoFreeze.bind(Br),eye=Br.setUseStrictShallowCopy.bind(Br),tye=Br.applyPatches.bind(Br),rye=Br.createDraft.bind(Br),nye=Br.finishDraft.bind(Br);var or=yr(xM(),1),Wye=or.default.v1,$ye=or.default.v1ToV6,jye=or.default.v3,TM=or.default.v4,qye=or.default.v5,zye=or.default.v6,Gye=or.default.v6ToV1,Kye=or.default.v7,Qye=or.default.NIL,Zye=or.default.MAX,Yye=or.default.version,Xye=or.default.validate,Jye=or.default.stringify,exe=or.default.parse;function SM(t,e,r){if(e>=t.length)throw Error(`Expected at least ${e+1} ${r} but received only ${t.length}`);return t[e]}function pd(t,e){if(Array.isArray(t))return t.map(r=>pd(r,e));if(typeof t=="object"&&t!=null){if(u9(t))return SM(e,t.index,"placeholder value");let r={};for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=pd(t[n],e));return r}return t}function u9(t){return typeof t=="object"&&t!=null&&"type"in t&&t.type==="placeholder"}var gd=yr(bM(),1);var f9={blue:"blue",green:"green",red:"red",pink:"pink",yellow:"yellow",userColor1:"navy",userColor2:"apricot",default:null},d9={ex:"ex",fox:"fox",wing:"wing",hole:"hole",frame:"frame",curve:"curve",eye:"eye",play:"play",crosshairs:"cross",bolt:"bolt",default:null},ud={cursor:"this",that:"that",source:"source",nothing:"nothing",keyboard:null,explicit:null,decoratedSymbol:null,lineNumber:null,range:null,target:null},fd={modulo100:"row",relativeUp:"up",relativeDown:"down"};function wM(t){let e=f9[t];if(e==null)throw Error(`Unknown hat color '${t}'`);return e}function _M(t){let e=d9[t];if(e==null)throw Error(`Unknown hat shape '${t}'`);return e}function ES(t,e){return Object.fromEntries(Object.entries(t).map(([r,n])=>[r,Object.fromEntries(Object.entries(n).map(([i,o])=>[i,e(o,r,i)]))]))}var m9=Object.fromEntries("air bat cap drum each fine gust harp sit jury crunch look made near odd pit quench red sun trap urge vest whale plex yank zip".split(" ").map((t,e)=>[String.fromCharCode(97+e),t])),h9=Object.fromEntries("zero one two three four five six seven eight nine".split(" ").map((t,e)=>[e.toString(),t])),g9={".":"dot",",":"comma",";":"semicolon",":":"colon","!":"bang","*":"asterisk","@":"at sign","&":"ampersand","?":"question","/":"slash","\\":"backslash","-":"dash","=":"equals","+":"plus","~":"tilde",_:"underscore","#":"hash","%":"percent","^":"caret","|":"pipe",$:"dollar","\xA3":"pound","'":"quote",'"':"double quote","`":"back tick","(":"paren",")":"right paren","{":"brace","}":"right brace","[":"square","]":"right square","<":"angle",">":"right angle","\uFFFD":"special"},EM={...m9,...h9,...g9};function po(...t){return{defaultSpokenForms:t,isDisabledByDefault:!0,isPrivate:!1}}function Et(...t){return{defaultSpokenForms:t,isDisabledByDefault:!0,isPrivate:!0}}var RM={pairedDelimiter:{curlyBrackets:"curly",angleBrackets:"diamond",escapedDoubleQuotes:"escaped quad",escapedSingleQuotes:"escaped twin",escapedParentheses:"escaped round",escapedSquareBrackets:"escaped box",doubleQuotes:"quad",parentheses:"round",backtickQuotes:"skis",squareBrackets:"box",singleQuotes:"twin",tripleDoubleQuotes:Et("triple quad"),tripleSingleQuotes:Et("triple twin"),tripleBacktickQuotes:Et("triple skis"),any:"pair",string:"string",whitespace:"void",collectionBoundary:Et("collection boundary")},simpleScopeTypeType:{argumentOrParameter:"arg",attribute:"attribute",functionCall:"call",functionCallee:"callee",className:"class name",class:"class",comment:"comment",functionName:"funk name",namedFunction:"funk",ifStatement:"if state",instance:"instance",collectionItem:"item",collectionKey:"key",anonymousFunction:"lambda",list:"list",map:"map",name:"name",regularExpression:"regex",section:"section",sectionLevelOne:po("one section"),sectionLevelTwo:po("two section"),sectionLevelThree:po("three section"),sectionLevelFour:po("four section"),sectionLevelFive:po("five section"),sectionLevelSix:po("six section"),selector:"selector",statement:"state",branch:"branch",type:"type",value:"value",condition:"condition",unit:"unit",xmlElement:"element",xmlBothTags:"tags",xmlStartTag:"start tag",xmlEndTag:"end tag",part:"part",chapter:"chapter",subSection:"subsection",subSubSection:"subsubsection",namedParagraph:"paragraph",subParagraph:"subparagraph",environment:"environment",command:"command",character:"char",word:"sub",token:"token",identifier:"identifier",line:"line",sentence:"sentence",paragraph:"block",boundedParagraph:"short block",document:"file",nonWhitespaceSequence:"paint",boundedNonWhitespaceSequence:"short paint",url:"link",notebookCell:"cell",string:Et("parse tree string"),textFragment:Et("text fragment"),disqualifyDelimiter:Et("disqualify delimiter"),pairDelimiter:Et("pair delimiter"),"private.fieldAccess":Et("access"),"private.switchStatementSubject":Et("subject")},complexScopeTypeType:{glyph:"glyph"},surroundingPairForceDirection:{left:"left",right:"right"},simpleModifier:{excludeInterior:"bounds",toRawSelection:"just",leading:"leading",trailing:"trailing",keepContentFilter:"content",keepEmptyFilter:"empty",inferPreviousMark:"its",startOf:"start of",endOf:"end of",interiorOnly:"inside",visible:"visible",extendThroughStartOf:"head",extendThroughEndOf:"tail",everyScope:"every"},modifierExtra:{first:"first",last:"last",previous:"previous",next:"next",forward:"forward",backward:"backward",ancestor:"grand"},customRegex:{},action:{addSelection:"append",addSelectionAfter:"append post",addSelectionBefore:"append pre",breakLine:"break",scrollToBottom:"bottom",toggleLineBreakpoint:"break point",cutToClipboard:"carve",scrollToCenter:"center",clearAndSetSelection:"change",remove:"chuck",insertCopyBefore:"clone up",insertCopyAfter:"clone",toggleLineComment:"comment",copyToClipboard:"copy",scrollToTop:"crown",outdentLine:"dedent",revealDefinition:"define",editNewLineBefore:"drink",insertEmptyLineBefore:"drop",extractVariable:"extract",insertEmptyLineAfter:"float",foldRegion:"fold",followLink:"follow",followLinkAside:"follow split",flashTargets:"flash",deselect:"give",highlight:"highlight",showHover:"hover",increment:"increment",decrement:"decrement",indentLine:"indent",showDebugHover:"inspect",setSelectionAfter:"post",editNewLineAfter:"pour",setSelectionBefore:"pre",insertEmptyLinesAround:"puff",showQuickFix:"quick fix",showReferences:"reference",rename:"rename",reverseTargets:"reverse",findInDocument:"scout",findInWorkspace:"scout all",randomizeTargets:"shuffle",generateSnippet:"snippet make",sortTargets:"sort",setSelection:"take",revealTypeDefinition:"type deaf",unfoldRegion:"unfold",callAsFunction:"call",swapTargets:"swap",replaceWithTarget:"bring",moveToTarget:"move",wrapWithPairedDelimiter:"wrap",wrapWithSnippet:"wrap",rewrapWithPairedDelimiter:"repack",insertSnippet:"snippet",pasteFromClipboard:"paste",joinLines:"join",gitAccept:"git accept",gitRevert:"git revert",gitStage:"git stage",gitUnstage:"git unstage","private.showParseTree":Et("parse tree"),"experimental.setInstanceReference":po("from"),editNew:Et("edit new"),executeCommand:Et("execute command"),parsed:Et("parsed"),getText:Et("get text"),replace:Et("replace"),"private.getTargets":Et("get targets"),"private.setKeyboardTarget":Et("set keyboard target")},customAction:{},grapheme:EM};var RS=ES(RM,t=>typeof t=="string"?{defaultSpokenForms:[t],isDisabledByDefault:!1,isPrivate:!1}:t),Mi=ES(RS,({defaultSpokenForms:t,isDisabledByDefault:e,isPrivate:r})=>({spokenForms:e?[]:t,isCustom:!1,defaultSpokenForms:t,requiresTalonUpdate:!1,isPrivate:r}));var ht={rangeExclusive:"between",rangeInclusive:"past",rangeExcludingStart:null,rangeExcludingEnd:"until",listConnective:"and",swapConnective:"with",sourceDestinationConnective:"to",before:"before",after:"after",verticalRange:"slice",previous:"previous",next:"next",forward:"forward",backward:"backward"};var MM=yr(PM(),1),md=class{constructor(e){this.mooLexer=MM.default.compile(e)}reset(e,r){let{mooState:n}=r??{};return this.mooLexer.reset(e,n),this}formatError(e,r){return this.mooLexer.formatError(e,r)}has(e){return this.mooLexer.has(e)}save(){return{mooState:this.mooLexer.save()}}next(){let e=this.mooLexer.next();return this.skipToken(e)?this.next():e}transform({value:e}){return e}skipToken(e){return e?.type==="ws"}};var Ai={};for(let t of iS){let{spokenForms:e}=Mi.action[t];for(let r of e)Ai[r]={type:"simpleActionName",value:t}}var y9=["replaceWithTarget","moveToTarget"];for(let t of y9){let{spokenForms:e}=Mi.action[t];for(let r of e)Ai[r]={type:"bringMove",value:t}}var x9=["before","after","to"];for(let t of x9){let e=ht[t==="to"?"sourceDestinationConnective":t];Ai[e]={type:"insertionMode",value:t}}for(let t of Jo){let{spokenForms:e}=Mi.simpleScopeTypeType[t];for(let r of e)Ai[r]={type:"simpleScopeTypeType",value:t}}for(let t of Of){let{spokenForms:e}=Mi.pairedDelimiter[t];for(let r of e)Ai[r]={type:"pairedDelimiter",value:t}}for(let[t,e]of Object.entries(ud))e!=null&&(Ai[e]={type:"simpleMarkType",value:t});var Di=new md({ws:/[ \t]+/,placeholderTarget:{match:/<target\d*>/,value:t=>t.slice(7,-1)},token:{match:Object.keys(Ai),type:t=>Ai[t].type,value:t=>Ai[t].value}});function AM(t,e){return{name:t,target:e}}function DM(t,e,r){return{name:t,source:e,destination:r}}function hd(t,e){let r={type:"primitive"};return t!=null&&(r.modifiers=t),e!=null&&(r.mark=e),r}function IM(t,e){return{type:"primitive",insertionMode:t,target:e}}function FM(t){return{type:"containingScope",scopeType:t}}function CM(t){return{type:t}}function OM(t){return{type:"surroundingPair",delimiter:t}}function NM(t){return{type:t}}function LM(t){return{type:"target",target:{type:"placeholder",index:t.length===0?0:parseInt(t)-1}}}function kS(t){return t[0]}var T9={Lexer:Di,ParserRules:[{name:"main",symbols:["action"],postprocess:kS},{name:"action",symbols:[Di.has("simpleActionName")?{type:"simpleActionName"}:simpleActionName,"target"],postprocess:([t,e])=>AM(t,e)},{name:"action",symbols:[Di.has("bringMove")?{type:"bringMove"}:bringMove,"target","destination"],postprocess:([t,e,r])=>DM(t,e,r)},{name:"destination",symbols:["primitiveDestination"],postprocess:kS},{name:"destination",symbols:[Di.has("insertionMode")?{type:"insertionMode"}:insertionMode,"target"],postprocess:([t,e])=>IM(t,e)},{name:"target",symbols:["primitiveTarget"],postprocess:kS},{name:"primitiveTarget$ebnf$1",symbols:["modifier"]},{name:"primitiveTarget$ebnf$1",symbols:["primitiveTarget$ebnf$1","modifier"],postprocess:t=>t[0].concat([t[1]])},{name:"primitiveTarget",symbols:["primitiveTarget$ebnf$1"],postprocess:([t])=>hd(t,void 0)},{name:"primitiveTarget",symbols:["mark"],postprocess:([t])=>hd(void 0,t)},{name:"primitiveTarget$ebnf$2",symbols:["modifier"]},{name:"primitiveTarget$ebnf$2",symbols:["primitiveTarget$ebnf$2","modifier"],postprocess:t=>t[0].concat([t[1]])},{name:"primitiveTarget",symbols:["primitiveTarget$ebnf$2","mark"],postprocess:([t,e])=>hd(t,e)},{name:"modifier",symbols:["containingScopeModifier"],postprocess:([t])=>t},{name:"containingScopeModifier",symbols:["scopeType"],postprocess:([t])=>FM(t)},{name:"scopeType",symbols:[Di.has("simpleScopeTypeType")?{type:"simpleScopeTypeType"}:simpleScopeTypeType],postprocess:([t])=>CM(t)},{name:"scopeType",symbols:[Di.has("pairedDelimiter")?{type:"pairedDelimiter"}:pairedDelimiter],postprocess:([t])=>OM(t)},{name:"mark",symbols:[Di.has("simpleMarkType")?{type:"simpleMarkType"}:simpleMarkType],postprocess:([t])=>NM(t)},{name:"mark",symbols:[Di.has("placeholderTarget")?{type:"placeholderTarget"}:placeholderTarget],postprocess:([t])=>LM(t)}],ParserStart:"main"},UM=T9;function S9(){return new gd.Parser(gd.Grammar.fromCompiled(UM))}function HM(t){let e=S9();if(e.feed(t),e.results.length!==1)throw new Error(`Expected exactly one result, got ${e.results.length}`);return e.results[0]}function yd(t,e){let r=HM(t);return pd(r,e)}function vp(t){switch(t.name){case"callAsFunction":return[t.callee,t.argument];case"replaceWithTarget":case"moveToTarget":return[t.source,...VM(t.destination)];case"swapTargets":return[t.target1,t.target2];case"pasteFromClipboard":case"insertSnippet":case"replace":case"editNew":return VM(t.destination);case"parsed":return vp(yd(t.content,t.arguments));default:return[t.target]}}function VM(t){switch(t.type){case"list":return t.destinations.map(({target:e})=>e);case"primitive":return[t.target];case"implicit":return[]}}function MS(t){return t.flatMap(PS)}function PS(t){switch(t.type){case"primitive":return[t];case"list":return t.elements.flatMap(PS);case"range":return[t.anchor,t.active].flatMap(PS);case"implicit":return[]}}var v9={arrowFunction:"anonymousFunction",dictionary:"map",regex:"regularExpression"},b9={purple:"pink"};function w9(t){t.modifiers?.forEach(e=>{(e.type==="containingScope"||e.type==="everyScope")&&(e.scopeType.type=v9[e.scopeType.type]??e.scopeType.type)})}function _9(t){t.mark?.type==="decoratedSymbol"&&(t.mark.symbolColor=b9[t.mark.symbolColor]??t.mark.symbolColor)}function AS(t){MS(t).forEach(e=>{w9(e),_9(e)})}function BM(t){return{...t,version:1}}var E9={type:"primitive",mark:{type:"cursor"},selectionType:"token",position:"contents",modifier:{type:"identity"},insideOutsideType:"inside"},R9={type:"primitive",isImplicit:!0},WM=t=>Ei(t,E9)?R9:t;function $M(t){let e=t.action;return{spokenForm:t.spokenForm,action:{name:e,args:t.extraArgs},targets:P9(t.targets,e),usePrePhraseSnapshot:t.usePrePhraseSnapshot??!1,version:2}}function k9(t){switch(t.type){case"identity":return[];case"containingScope":{let{includeSiblings:e,scopeType:r,type:n,...i}=t;return[{type:e?"everyScope":"containingScope",scopeType:{type:r},...i}]}case"surroundingPair":{let{delimiterInclusion:e,...r}=t,n={type:"containingScope",scopeType:r};return e==="interiorOnly"||e==="excludeInterior"?n.scopeType.delimiter==="any"?[{type:e}]:[{type:e},n]:[n]}case"subpiece":{let{type:e,pieceType:r,...n}=t;return[{type:"ordinalRange",scopeType:{type:r},...n}]}case"head":return[{type:"extendThroughStartOf"}];case"tail":return[{type:"extendThroughEndOf"}];default:return[t]}}function DS(t,e){let{type:r,isImplicit:n,mark:i,insideOutsideType:o,modifier:a,selectionType:p,position:l}=t,u=[];if(l&&l!=="contents"&&(l==="before"?o==="inside"?u.push({type:"position",position:"start"}):e==="remove"?u.push({type:"leading"}):u.push({type:"position",position:"before"}):o==="inside"?u.push({type:"position",position:"end"}):e==="remove"?u.push({type:"trailing"}):u.push({type:"position",position:"after"})),p)switch(p){case"token":if(a?.type==="subpiece")break;case"line":if(i?.type==="lineNumber")break;default:u.push({type:"containingScope",scopeType:{type:p}})}return a&&u.push(...k9(a)),{type:r,isImplicit:n,modifiers:u.length>0?u:void 0,mark:i?.type==="cursorToken"?void 0:i}}function jM(t,e){switch(t.type){case"list":return{...t,elements:t.elements.map(r=>jM(r,e))};case"range":{let{type:r,rangeType:n,start:i,end:o,excludeStart:a,excludeEnd:p}=t;return{type:r,rangeType:n,anchor:DS(i,e),active:DS(o,e),excludeAnchor:a??!1,excludeActive:p??!1}}case"primitive":return DS(t,e)}}function P9(t,e){return t.map(r=>jM(r,e)).map(r=>r.type==="primitive"?WM(r):r)}function qM(t){return{...t,version:3,targets:t.targets.map(zM)}}function zM(t){switch(t.type){case"list":return{...t,elements:t.elements.map(e=>zM(e))};case"range":{let{anchor:e,active:r,...n}=t;return{anchor:IS(e),active:IS(r),...n}}case"primitive":return IS(t)}}function IS(t){let e=t.modifiers!=null?t.modifiers.map(A9):void 0;if(t.mark?.type==="lineNumber"){let{anchor:r,active:n}=t.mark;if(r.type!==n.type||r.lineNumber<0!=n.lineNumber<0)return{type:"range",anchor:{type:"primitive",mark:wp(r),modifiers:e},active:{type:"primitive",mark:wp(n)},excludeAnchor:!1,excludeActive:!1}}return{...t,mark:t.mark!=null?M9(t.mark):void 0,modifiers:e}}function M9(t){switch(t.type){case"lineNumber":return D9(t);default:return t}}function A9(t){switch(t.type){case"ordinalRange":return I9(t);default:return t}}function D9(t){return Ei(t.anchor,t.active)?wp(t.anchor):{type:"range",anchor:wp(t.anchor),active:wp(t.active)}}function I9(t){return t.anchor===t.active?bp(t.scopeType,t.anchor):t.anchor===0&&t.active>t.anchor?bp(t.scopeType,t.anchor,t.active-t.anchor+1):t.anchor<0&&t.active===-1?bp(t.scopeType,t.anchor,-t.anchor):{type:"range",anchor:bp(t.scopeType,t.anchor),active:bp(t.scopeType,t.active),excludeAnchor:t.excludeAnchor,excludeActive:t.excludeActive}}function wp(t){return{type:"lineNumber",lineNumberType:t.type,lineNumber:t.lineNumber}}function bp(t,e,r=1){return{type:"ordinalScope",scopeType:t,start:e,length:r}}function KM(t){return{...t,version:4,targets:t.targets.map(QM)}}function QM(t){switch(t.type){case"primitive":return GM(t);case"range":{let{anchor:e,...r}=t;return{...r,anchor:GM(e)}}case"list":{let{elements:e,...r}=t;return{...r,elements:e.map(QM)}}}}function GM(t){return t.mark==null&&t.modifiers==null||t.isImplicit?{type:"implicit"}:t}function ZM(t){return{...t,version:5,action:F9(t.action),targets:t.targets.map(xd)}}function F9(t){switch(t.name){case"wrapWithSnippet":{let[e,r]=C9(t.args[0]);return{name:"wrapWithSnippet",args:[{type:"named",name:e,variableName:r}]}}case"insertSnippet":{let[e,r]=t.args,n={type:"named",name:e};return r!=null&&(n.substitutions=r),{name:"insertSnippet",args:[n]}}default:return t}}function C9(t){let[e,r]=t.split(".");if(e==null||r==null)throw new Error("Snippet location missing '.'");return[e,r]}function xd(t){switch(t.type){case"implicit":return t;case"list":return{...t,elements:t.elements.map(xd)};case"range":return{...t,anchor:xd(t.anchor),active:xd(t.active)};case"primitive":return{...t,mark:t.mark!=null?FS(t.mark):void 0,modifiers:t.modifiers!=null&&t.modifiers.length>0?t.modifiers.map(CS):void 0}}}function FS(t){return t.type==="range"?{...t,anchor:FS(t.anchor),active:FS(t.active),excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1}:t}function CS(t){return t.type==="range"?{...t,anchor:CS(t.anchor),active:CS(t.active),excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1}:t}var O9={bring:"replaceWithTarget",call:"callAsFunction",clear:"clearAndSetSelection",commentLines:"toggleLineComment",copy:"copyToClipboard",cut:"cutToClipboard",delete:"remove",editNewLineAbove:"editNewLineBefore",editNewLineBelow:"editNewLineAfter",findInFiles:"findInWorkspace",fold:"foldRegion",indentLines:"indentLine",insertEmptyLineAbove:"insertEmptyLineBefore",insertEmptyLineBelow:"insertEmptyLineAfter",insertLineAfter:"editNewLineAfter",insertLineBefore:"editNewLineBefore",move:"moveToTarget",outdentLines:"outdentLine",paste:"pasteFromClipboard",reverse:"reverseTargets",setBreakpoint:"toggleLineBreakpoint",sort:"sortTargets",swap:"swapTargets",unfold:"unfoldRegion",use:"replaceWithTarget",wrap:"wrapWithPairedDelimiter"};function OS(t){let e=O9[t]??t;if(!CP.includes(e))throw new Error(`Unknown action name: ${e}`);return e}function YM(t){return{version:6,spokenForm:t.spokenForm,usePrePhraseSnapshot:t.usePrePhraseSnapshot,action:N9(t.action,t.targets)}}function N9(t,e){let r=OS(t.name);switch(r){case"replaceWithTarget":case"moveToTarget":return{name:r,source:cn(e[0]),destination:_p(e[1])};case"swapTargets":return{name:r,target1:cn(e[0]),target2:cn(e[1])};case"callAsFunction":return{name:r,callee:cn(e[0]),argument:cn(e[1])};case"pasteFromClipboard":return{name:r,destination:_p(e[0])};case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return{name:r,left:t.args[0],right:t.args[1],target:cn(e[0])};case"generateSnippet":return{name:r,snippetName:t.args?.[0],target:cn(e[0])};case"insertSnippet":return{name:r,snippetDescription:t.args[0],destination:_p(e[0])};case"wrapWithSnippet":return{name:r,snippetDescription:t.args[0],target:cn(e[0])};case"executeCommand":return{name:r,commandId:t.args[0],options:t.args?.[1],target:cn(e[0])};case"replace":return{name:r,replaceWith:t.args[0],destination:_p(e[0])};case"highlight":{let n={name:r,target:cn(e[0])};return t.args?.[0]!=null&&(n.highlightId=t.args?.[0]),n}case"editNew":return{name:r,destination:_p(e[0])};case"getText":return{name:r,options:t.args?.[0],target:cn(e[0])};case"parsed":throw Error("Parsed action should not be present in V5");default:return{name:r,target:cn(e[0])}}}function cn(t){switch(t.type){case"list":case"range":case"primitive":return L9(t);case"implicit":return t}}function L9(t){switch(t.type){case"list":return U9(t);case"range":case"primitive":return Td(t)}}function U9(t){return{...t,elements:t.elements.map(Td)}}function Td(t){switch(t.type){case"range":return XM(t);case"primitive":return Sd(t)}}function XM(t){let{anchor:e,active:r}=t,n={type:"range",anchor:e.type==="implicit"?e:Sd(e),active:Sd(r),excludeAnchor:t.excludeAnchor,excludeActive:t.excludeActive};return t.rangeType!=null&&(n.rangeType=t.rangeType),n}function Sd(t){let e={type:"primitive"},r=j9(t.modifiers);return r!=null&&(e.modifiers=r),t.mark!=null&&(e.mark=t.mark),e}function _p(t){switch(t.type){case"list":return H9(t);case"range":return V9(t);case"primitive":return B9(t);case"implicit":return W9()}}function H9(t){let e=[],r=[],n,i=()=>{r.length>0&&e.push({type:"primitive",insertionMode:n??"to",target:r.length===1?r[0]:{type:"list",elements:r}})};return t.elements.forEach(o=>{let a=vd(o);a!=null?(i(),r=[Td(o)],n=a):r.push(Td(o))}),i(),e.length>1?{type:"list",destinations:e}:e[0]}function V9(t){return{type:"primitive",insertionMode:vd(t.anchor)??"to",target:XM(t)}}function B9(t){return{type:"primitive",insertionMode:vd(t)??"to",target:Sd(t)}}function W9(){return{type:"implicit"}}function vd(t){switch(t.type){case"implicit":return"to";case"primitive":return $9(t);case"range":return vd(t.anchor)}}function $9(t){let e=t.modifiers?.find(r=>r.type==="position");if(e!=null){if(t.modifiers.indexOf(e)!==0)throw Error("Position modifier has to be at first index");if(e?.position==="before"||e?.position==="after")return e.position}}function j9(t){let e=[];if(t!=null)for(let r of t)r.type==="position"?r.position==="start"?e.push({type:"startOf"}):r.position==="end"&&e.push({type:"endOf"}):e.push(r);return e.length>0?e:void 0}function JM(t){return{...t,version:7}}function LS(t){let e=q9(t,7),{action:r,usePrePhraseSnapshot:n=!1,spokenForm:i}=e;return{version:7,spokenForm:i,action:jf(r,o=>{let a=vp(o);AS(a),r.name}),usePrePhraseSnapshot:n}}function q9(t,e){if(t.version>7)throw new Lu;for(;t.version<e;)switch(t.version){case 0:t=BM(t);break;case 1:t=$M(t);break;case 2:t=qM(t);break;case 3:t=KM(t);break;case 4:t=ZM(t);break;case 5:t=YM(t);break;case 6:t=JM(t);break;default:throw new Error(`Can't upgrade from unknown version ${t.version}`)}return t}var US;function bd(t){US=t}function k(){if(US==null)throw Error("Tried to access ide before it was injected");return US}var wd=class{constructor(e){this.maxLength=e;this.stack=[];this.index=void 0}push(e){this.index!=null?this.stack.splice(this.index+1,this.stack.length-this.index-1,e):this.stack.push(e),this.stack.length>this.maxLength&&this.stack.shift(),this.index=this.stack.length-1}undo(){if(this.index!=null&&this.index>0)return this.index--,this.stack[this.index]}redo(){if(this.index!=null&&this.index<this.stack.length-1)return this.index++,this.stack[this.index]}};var z9=25,_d=class{constructor(){this.targetMap=new Map;this.targetHistory=new ba(()=>new wd(z9));this.notifier=new qt}set(e,r,{history:n=!1}={}){this.targetMap.set(e,r),n&&r!=null&&this.targetHistory.get(e).push(r),this.notifier.notifyListeners(e,r)}get(e){return this.targetMap.get(e)}undo(e){let r=this.targetHistory.get(e).undo();r!=null&&this.set(e,r,{history:!1})}redo(e){let r=this.targetHistory.get(e).redo();r!=null&&this.set(e,r,{history:!1})}onStoredTargets(e){for(let r of ga)e(r,this.get(r));return this.notifier.registerListener(e)}};function Tt(t){if(t.length===0)throw new Error("Require at least one target with this action");let e=t.map(r=>r.editor);if(new Set(e).size>1)throw new Error("Can only have one editor with this action");return e[0]}function _r(t){if(t.length!==1)throw new Error("Can only have one target with this action");return t[0]}async function Ii(t,e,r){return Promise.all(HS(t,e).map(([n,i])=>r(n,i)))}async function rt(t,e){return Ii(t,r=>r.editor,e)}async function eA(t,e){let r=HS(t,i=>i.editor),n=[];for(let[i,o]of r)n.push(await e(i,o));return n}function tA(t){return HS(t,e=>e.editor)}function HS(t,e){let n=mp(t,i=>e(i).document.uri);return Array.from(n.values(),i=>[e(i[0]),i])}function pn(t,e){return e!=null?wt(t,e).map(([n,i])=>({editor:n.editor,selection:n?.isReversed?new be(i.end,i.start):new be(i.start,i.end)})):t.map(n=>({editor:n.editor,selection:n.contentSelection}))}function ln(t,e){return t.textualType==="line"?Hr(e):ir(e)}function G9(t){return ln(t,t.contentRange)}function De(t,e,r,n=G9){return t.flashRanges(e.map(i=>({editor:i.editor,range:n(i),style:r})))}function lo(t,e){return new W(new le(e.start.line,0),t.document.lineAt(e.end).range.end)}function VS(t,e){return e.isEmpty?0:t.document.offsetAt(e.end)-t.document.offsetAt(e.start)}function rA(t,e){let[r,n]=e instanceof le?[e,e]:[e.start,e.end];return t.start.isBefore(r)&&t.end.isAfter(n)}function Fi(t,...e){for(let r of e)r!=null&&(t=t.union(r));return t}var Ed=class t{constructor(e,r,n){this.target=e;this.insertionMode=r;this.contentRange=Q9(e.contentRange,r),this.isBefore=r==="before",this.isLineDelimiter=e.insertionDelimiter.includes(`
`),this.indentationString=n??this.isLineDelimiter?K9(e.editor,e.contentRange):"",this.insertionPrefix=e.prefixRange!=null?e.editor.document.getText(e.prefixRange):void 0}get contentSelection(){return this.contentRange.toSelection(this.target.isReversed)}get editor(){return this.target.editor}get insertionDelimiter(){return this.target.insertionDelimiter}get isRaw(){return this.target.isRaw}withTarget(e){return new t(e,this.insertionMode,this.indentationString)}getEditNewActionType(){return this.insertionMode==="after"&&this.target.contentRange.isSingleLine&&this.insertionDelimiter===`
`&&this.insertionPrefix==null?"insertLineAfter":"edit"}constructChangeEdit(e,r=!1){return this.insertionMode==="before"||this.insertionMode==="after"?this.constructEditWithDelimiters(e,r):this.constructEditWithoutDelimiters(e)}constructEditWithDelimiters(e,r){let n=this.getEditRange(),i=this.getEditText(e,r),o=a=>this.updateRange(a,e,r);return{range:n,text:i,isReplace:this.insertionMode==="after",updateRange:o}}constructEditWithoutDelimiters(e){return{range:this.contentRange,text:e,updateRange:r=>r}}getEditRange(){let e=(()=>{let r=this.isBefore?Fi(this.target.contentRange,this.target.prefixRange).start:this.target.contentRange.end;if(this.isLineDelimiter){let n=this.editor.document.lineAt(r),i=this.isBefore?n.rangeTrimmed?.start??n.range.start:n.rangeTrimmed?.end??n.range.end;if(r.isEqual(i))return this.isBefore?n.range.start:n.range.end}return r})();return new W(e,e)}getEditText(e,r){let i=(r?"":this.indentationString)+(this.insertionPrefix??"")+e;return this.isBefore?i+this.insertionDelimiter:this.insertionDelimiter+i}updateRange(e,r,n){let i=this.editor.document.offsetAt(e.start)+(n?0:this.indentationString.length)+(this.insertionPrefix?.length??0),o=this.isBefore?i:i+this.getLengthOfInsertionDelimiter(),a=o+r.length;return new W(this.editor.document.positionAt(o),this.editor.document.positionAt(a))}getLengthOfInsertionDelimiter(){if(this.editor.document.eol==="CRLF"){let e=this.insertionDelimiter.match(/\n/g);if(e!=null)return this.insertionDelimiter.length+e.length}return this.insertionDelimiter.length}};function K9(t,e){let r=Number.MAX_SAFE_INTEGER,n="";for(let i=e.start.line;i<=e.end.line;++i){let o=t.document.lineAt(i);if(o.range.isEmpty||o.isEmptyOrWhitespace&&!e.isSingleLine)continue;let a=o.rangeTrimmed?.start??o.range.end;a.character<r&&(r=a.character,n=o.text.slice(0,r))}return n}function Q9(t,e){switch(e){case"before":return t.start.toEmptyRange();case"after":return t.end.toEmptyRange();case"to":return t}}function Ea(t,e,r,n){return Z9(t.contentRange,e.contentRange,r,n)}function Z9(t,e,r,n){return new W(r?t.start:t.end,n?e.end:e.start)}function Ra(t,e,r,n){let i=r?t.contentRange.start:new le(t.contentRange.end.line+1,0),o=n?e.contentRange.end:e.editor.document.lineAt(e.contentRange.start.line-1).range.end;return new W(i,o)}var He=class t{constructor(e){this.hasExplicitScopeType=!0;this.hasExplicitRange=!0;this.isRaw=!1;this.isImplicit=!1;this.isNotebookCell=!1;this.textualType="token";this.state={editor:e.editor,isReversed:e.isReversed,contentRange:e.contentRange,thatTarget:e.thatTarget}}get editor(){return this.state.editor}get isReversed(){return this.state.isReversed}get thatTarget(){return this.state.thatTarget!=null?this.state.thatTarget.thatTarget:this}get contentText(){return this.editor.document.getText(this.contentRange)}get contentSelection(){return this.contentRange.toSelection(this.isReversed)}get contentRange(){return this.state.contentRange}constructRemovalEdit(){return{range:this.getRemovalRange(),text:"",updateRange:e=>e}}getRemovalHighlightRange(){return ln(this,this.getRemovalRange())}withThatTarget(e){return this.cloneWith({thatTarget:e})}withContentRange(e){return this.cloneWith({contentRange:e})}getInterior(){}getBoundary(){}cloneWith(e){let r=Object.getPrototypeOf(this).constructor;return new r({...this.getCloneParameters(),...e})}maybeCreateRichRangeTarget(e,r){let{constructor:n}=Object.getPrototypeOf(this);return new n({...this.getCloneParameters(),isReversed:e,contentRange:Ea(this,r,!0,!0)})}isEqual(e){return e instanceof t&&Ei(this.getEqualityParameters(),e.getEqualityParameters())}getEqualityParameters(){let{thatTarget:e,...r}=this.getCloneParameters();return{...r}}toDestination(e){return new Ed(this,e)}toPlainObject(){return{type:this.type,contentRange:op(this.contentRange),isReversed:this.isReversed,hasExplicitRange:this.hasExplicitRange}}};function Rd(t,e){return Y9(t,e.start,e.end)}function Y9(t,e,r){return{editor:t.editor,selection:X9(t.selection,e,r)}}function X9(t,e,r){return t.isReversed?new be(r,e):new be(e,r)}function ss(t,e){let{document:r}=t,n=r.getText(e),i=n.length-n.trimStart().length,o=n.length-n.trimEnd().length,a=r.offsetAt(e.start)+i,p=r.offsetAt(e.end)-o,l=r.positionAt(a),u=r.positionAt(p);return new W(l,u)}function kd(t,e,r,n){return r==null?void 0:new t({editor:e,isReversed:n,contentRange:r})}var Be=class extends He{constructor(r){super(r);this.type="PlainTarget";this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.textualType=r.textualType??"token",this.insertionDelimiter=r.insertionDelimiter??""}getCloneParameters(){return{...this.state,textualType:this.textualType,insertionDelimiter:this.insertionDelimiter}}};function ka(t,e,r){return kd(Be,t,e,r)}var Pd=class extends He{constructor(r){super(r);this.type="DocumentTarget";this.textualType="line";this.insertionDelimiter=`
`}getInterior(){return[new Be({editor:this.editor,isReversed:this.isReversed,contentRange:ss(this.editor,this.contentRange)})]}getRemovalRange(){return this.contentRange}getLeadingDelimiterTarget(){}getTrailingDelimiterTarget(){}getCloneParameters(){return this.state}};var sr=class t extends He{constructor(){super(...arguments);this.type="LineTarget";this.textualType="line";this.insertionDelimiter=`
`;this.getRemovalHighlightRange=()=>Hr(this.fullLineContentRange)}get fullLineContentRange(){return lo(this.editor,this.contentRange)}getLeadingDelimiterTarget(){return ka(this.editor,J9(this.editor,this.fullLineContentRange),this.isReversed)}getTrailingDelimiterTarget(){return ka(this.editor,e5(this.editor,this.fullLineContentRange),this.isReversed)}getRemovalRange(){let r=this.fullLineContentRange,n=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return n==null?r:r.union(n.contentRange)}maybeCreateRichRangeTarget(r,n){return new t({editor:this.editor,isReversed:r,contentRange:Ra(this,n,!0,!0)})}getCloneParameters(){return this.state}};function J9(t,e){let{start:r}=e;return r.line>0?new W(t.document.lineAt(r.line-1).range.end,e.start):void 0}function e5(t,e){let{end:r}=e;return r.line+1<t.document.lineCount?new W(e.end,new le(r.line+1,0)):void 0}function BS(t,e,r){return kd(sr,t,e,r)}var Md=class t{constructor(e,r){this.target=e;this.insertionMode=r}get editor(){return this.target.editor}get contentRange(){return this.target.contentRange}get contentSelection(){return this.target.contentSelection}get insertionDelimiter(){return this.target.insertionDelimiter}get isRaw(){return this.target.isRaw}withTarget(e){return new t(e,this.insertionMode)}getEditNewActionType(){throw new Error("Method not implemented.")}constructChangeEdit(e){throw new Error("Method not implemented.")}};var Ad=class extends He{constructor(r){super(r);this.type="NotebookCellTarget";this.insertionDelimiter=`
`;this.isNotebookCell=!0;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange}getCloneParameters(){return this.state}toDestination(r){return new Md(this,r)}};var uo=class t extends He{constructor(){super(...arguments);this.type="ParagraphTarget";this.textualType="line";this.insertionDelimiter=`

`}getLeadingDelimiterTarget(){return BS(this.editor,t5(this.editor,this.fullLineContentRange),this.isReversed)}getTrailingDelimiterTarget(){return BS(this.editor,r5(this.editor,this.fullLineContentRange),this.isReversed)}getRemovalRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.contentRange.union(r.contentRange):this.contentRange;return new sr({contentRange:n,editor:this.editor,isReversed:this.isReversed}).getRemovalRange()}get fullLineContentRange(){return lo(this.editor,this.contentRange)}getRemovalHighlightRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.fullLineContentRange.union(r.contentRange):this.fullLineContentRange;return Hr(n)}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,contentRange:Ra(this,n,!0,!0)})}getCloneParameters(){return this.state}};function t5(t,e){let{document:r}=t,n=r.lineAt(e.start),i=n5(r,n);if(i!=null)return i.lineNumber+1===n.lineNumber?void 0:new W(new le(i.lineNumber+1,0),r.lineAt(n.lineNumber-1).range.end);if(n.lineNumber>0)return new W(new le(0,0),r.lineAt(n.lineNumber-1).range.end)}function r5(t,e){let{document:r}=t,n=r.lineAt(e.end),i=i5(r,n);if(i!=null)return i.lineNumber-1===n.lineNumber?void 0:new W(new le(n.lineNumber+1,0),r.lineAt(i.lineNumber-1).range.end);if(n.lineNumber<r.lineCount-1)return new W(new le(n.lineNumber+1,0),r.lineAt(r.lineCount-1).range.end)}function n5(t,e){for(;e.lineNumber>0;){let r=t.lineAt(e.lineNumber-1);if(!r.isEmptyOrWhitespace)return r;e=r}return null}function i5(t,e){for(;e.lineNumber+1<t.lineCount;){let r=t.lineAt(e.lineNumber+1);if(!r.isEmptyOrWhitespace)return r;e=r}return null}var fo=class extends He{constructor(){super(...arguments);this.type="RawSelectionTarget";this.textualType="character";this.insertionDelimiter="";this.isRaw=!0;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.getCloneParameters=()=>this.state}};function Ep(t){let e=Fi(t.contentRange,t.prefixRange),r=t.getTrailingDelimiterTarget()??t.getLeadingDelimiterTarget();return r!=null?e.union(r.contentRange):e}var o5=['"',"'","(","[","{","<"],s5=['"',"'",")","]","}",">",",",";",":"];function Gn(t){let{editor:e}=t,{start:r}=Fi(t.contentRange,t.prefixRange),o=e.document.lineAt(r).text.slice(0,r.character).match(/\s+$/);return o==null?void 0:new Be({contentRange:new W(r.line,r.character-o[0].length,r.line,r.character),editor:e,isReversed:t.isReversed})}function Kn(t){let{editor:e}=t,{end:r}=t.contentRange,o=e.document.lineAt(r).text.slice(r.character).match(/^\s+/);return o==null?void 0:new Be({contentRange:new W(r.line,r.character,r.line,r.character+o[0].length),editor:e,isReversed:t.isReversed})}function mo(t){let{editor:e}=t,r=Fi(t.contentRange,t.prefixRange),{start:n,end:i}=r,o=t.getLeadingDelimiterTarget()?.contentRange??n.toEmptyRange(),a=t.getTrailingDelimiterTarget()?.contentRange??i.toEmptyRange(),p=lo(e,r);return o.union(a).isRangeEqual(p)?p:!a.isEmpty&&(!o.isEmpty||r.start.isEqual(p.start)||o5.includes(a5(e,r)))?r.union(a):!o.isEmpty&&(r.end.isEqual(p.end)||s5.includes(c5(e,r)))?r.union(o):r}function a5(t,e){let{start:r}=e,n=t.document.lineAt(r);return r.isAfter(n.range.start)?t.document.getText(new W(r.translate(void 0,-1),r)):""}function c5(t,e){let{end:r}=e,n=t.document.lineAt(r);return r.isBefore(n.range.end)?t.document.getText(new W(r.translate(void 0,1),r)):""}var Kt=class extends He{constructor(){super(...arguments);this.type="TokenTarget";this.textualType="token";this.insertionDelimiter=" "}getLeadingDelimiterTarget(){return Gn(this)}getTrailingDelimiterTarget(){return Kn(this)}getRemovalRange(){return mo(this)}getCloneParameters(){return this.state}};function WS(t){let{editor:e,isReversed:r}=t,{document:n}=e,i=Fi(t.contentRange,t.prefixRange);return p5(n,i)?l5(n,i)?new uo({editor:e,isReversed:r,contentRange:i}):new sr({editor:e,isReversed:r,contentRange:i}):new Kt({editor:e,isReversed:r,contentRange:i})}function p5(t,e){let r=t.lineAt(e.start).rangeTrimmed?.start,n=t.lineAt(e.end).rangeTrimmed?.end;return r!=null&&n!=null&&r.isEqual(e.start)&&n.isEqual(e.end)}function l5(t,e){let{start:r,end:n}=e;return(r.line===0||t.lineAt(r.line-1).isEmptyOrWhitespace)&&(n.line===t.lineCount-1||t.lineAt(n.line+1).isEmptyOrWhitespace)}var ho=class t extends He{constructor(r){super(r);this.type="ScopeTypeTarget";this.scopeTypeType_=r.scopeTypeType,this.removalRange_=r.removalRange,this.leadingDelimiterRange_=r.leadingDelimiterRange,this.trailingDelimiterRange_=r.trailingDelimiterRange,this.prefixRange=r.prefixRange,this.insertionDelimiter=r.insertionDelimiter??u5(r.scopeTypeType),this.hasDelimiterRange_=!!this.leadingDelimiterRange_||!!this.trailingDelimiterRange_}getLeadingDelimiterTarget(){if(this.leadingDelimiterRange_!=null)return new Be({editor:this.editor,isReversed:this.isReversed,contentRange:this.leadingDelimiterRange_});if(!this.hasDelimiterRange_)return Gn(this)}getTrailingDelimiterTarget(){if(this.trailingDelimiterRange_!=null)return new Be({editor:this.editor,isReversed:this.isReversed,contentRange:this.trailingDelimiterRange_});if(!this.hasDelimiterRange_)return Kn(this)}getRemovalRange(){return this.removalRange_!=null?this.removalRange_:this.hasDelimiterRange_?Ep(this):WS(this).getRemovalRange()}getRemovalHighlightRange(){return this.removalRange_!=null?ln(this,this.removalRange_):this.hasDelimiterRange_?ln(this,Ep(this)):WS(this).getRemovalHighlightRange()}maybeCreateRichRangeTarget(r,n){if(this.scopeTypeType_!==n.scopeTypeType_)return null;let i=this.removalRange_!=null||n.removalRange_!=null?(this.removalRange_??this.contentRange).union(n.removalRange_??n.contentRange):void 0;return new t({...this.getCloneParameters(),isReversed:r,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:n.trailingDelimiterRange_,removalRange:i,contentRange:this.contentRange.union(n.contentRange)})}getCloneParameters(){return{...this.state,insertionDelimiter:this.insertionDelimiter,prefixRange:this.prefixRange,removalRange:void 0,interiorRange:void 0,scopeTypeType:this.scopeTypeType_,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:this.trailingDelimiterRange_}}};function u5(t){switch(t){case"class":case"namedFunction":case"section":case"sectionLevelOne":case"sectionLevelTwo":case"sectionLevelThree":case"sectionLevelFour":case"sectionLevelFive":case"sectionLevelSix":case"part":case"chapter":case"subSection":case"subSubSection":case"namedParagraph":case"subParagraph":return`

`;case"anonymousFunction":case"statement":case"ifStatement":case"comment":case"xmlElement":case"collectionItem":case"branch":case"environment":return`
`;default:return" "}}var Dd=class t extends He{constructor(r){super(r);this.type="SubTokenWordTarget";this.textualType="word";this.leadingDelimiterRange_=r.leadingDelimiterRange,this.trailingDelimiterRange_=r.trailingDelimiterRange,this.insertionDelimiter=r.insertionDelimiter}getLeadingDelimiterTarget(){return ka(this.editor,this.leadingDelimiterRange_,this.isReversed)}getTrailingDelimiterTarget(){return ka(this.editor,this.trailingDelimiterRange_,this.isReversed)}getRemovalRange(){return Ep(this)}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,contentRange:Ea(this,n,!0,!0),trailingDelimiterRange:n.trailingDelimiterRange_})}getCloneParameters(){return{...this.state,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:this.trailingDelimiterRange_,insertionDelimiter:this.insertionDelimiter}}};var Pa=class t extends He{constructor(r){super({...r,contentRange:ss(r.editor,r.fullInteriorRange)});this.type="InteriorTarget";this.insertionDelimiter=" ";this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.fullInteriorRange;this.fullInteriorRange=r.fullInteriorRange}getCloneParameters(){return{...this.state,fullInteriorRange:this.fullInteriorRange}}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,fullInteriorRange:this.fullInteriorRange.union(n.fullInteriorRange)})}};var Id=class extends He{constructor(r){super(r);this.type="SurroundingPairTarget";this.insertionDelimiter=" ";this.boundary_=r.boundary,this.interiorRange_=r.interiorRange}getLeadingDelimiterTarget(){return Gn(this)}getTrailingDelimiterTarget(){return Kn(this)}getRemovalRange(){return mo(this)}getInterior(){return[new Pa({editor:this.editor,isReversed:this.isReversed,fullInteriorRange:this.interiorRange_})]}getBoundary(){return this.boundary_.map(r=>new Kt({editor:this.editor,isReversed:this.isReversed,contentRange:r}))}getCloneParameters(){return{...this.state,interiorRange:this.interiorRange_,boundary:this.boundary_}}};var At=class extends He{constructor(r){super(r);this.type="UntypedTarget";this.insertionDelimiter=" ";this.hasExplicitScopeType=!1;this.hasExplicitRange=r.hasExplicitRange,this.textualType=r.textualType??"token"}getLeadingDelimiterTarget(){return Gn(this)}getTrailingDelimiterTarget(){return Kn(this)}getRemovalRange(){return this.editor.document.getText(this.contentRange).trim().length===0?this.contentRange:mo(this)}maybeCreateRichRangeTarget(){return null}getCloneParameters(){return{...this.state,textualType:this.textualType,hasExplicitRange:this.hasExplicitRange}}};var Fd=class extends He{constructor(){super(...arguments);this.type="ImplicitTarget";this.textualType="character";this.insertionDelimiter="";this.isRaw=!0;this.hasExplicitScopeType=!1;this.isImplicit=!0;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.getCloneParameters=()=>this.state}};var Cd=class extends He{constructor(r){let{inputTarget:n,modifiedTarget:i,isHead:o}=r;super({...r,contentRange:nA(n.contentRange,i.contentRange,o)});this.type="HeadTailTarget";this.insertionDelimiter=" ";this.inputTarget=n,this.modifiedTarget=i,this.isHead=o}getLeadingDelimiterTarget(){return Gn(this)}getTrailingDelimiterTarget(){return Kn(this)}getRemovalRange(){return mo(this)}getInterior(){let r=this.modifiedTarget.getInterior();if(r!=null)return r.map(n=>new Be({editor:this.editor,contentRange:nA(this.inputTarget.contentRange,n.contentRange,this.isHead),isReversed:this.isReversed}))}getCloneParameters(){return{...this.state,inputTarget:this.inputTarget,modifiedTarget:this.modifiedTarget,isHead:this.isHead}}};function nA(t,e,r){return r?new W(e.start,t.end):new W(t.start,e.end)}var Od=class t extends He{constructor(r){super({...r,contentRange:f5(r.paragraphTarget.contentRange,r.containingInterior.contentRange)});this.type="BoundedParagraphTarget";this.textualType="line";this.insertionDelimiter=`

`;this.containingInterior=r.containingInterior,this.paragraphTarget=r.paragraphTarget,this.startLineGap=this.contentRange.start.line-this.containingInterior.fullInteriorRange.start.line,this.endLineGap=this.containingInterior.fullInteriorRange.end.line-this.contentRange.end.line}getLeadingDelimiterTarget(){return this.startLineGap>1?this.paragraphTarget.getLeadingDelimiterTarget():void 0}getTrailingDelimiterTarget(){return this.endLineGap>1?this.paragraphTarget.getTrailingDelimiterTarget():void 0}getRemovalRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.contentRange.union(r.contentRange):this.contentRange;return this.startLineGap<=0||this.endLineGap<=0?n:new sr({contentRange:n,editor:this.editor,isReversed:this.isReversed}).getRemovalRange()}get fullLineContentRange(){return lo(this.editor,this.contentRange)}getRemovalHighlightRange(){let r=(()=>{if(this.startLineGap<1||this.endLineGap<1)return this.getRemovalRange();let n=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return n!=null?this.fullLineContentRange.union(n.contentRange):this.fullLineContentRange})();return Hr(r)}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,containingInterior:this.containingInterior.maybeCreateRichRangeTarget(r,n.containingInterior),paragraphTarget:this.paragraphTarget.maybeCreateRichRangeTarget(r,n.paragraphTarget)})}getCloneParameters(){return{...this.state,paragraphTarget:this.paragraphTarget,containingInterior:this.containingInterior}}};function f5(t,e){let r=t.intersection(e);if(r==null||r.isEmpty)throw new Error("Ranges do not intersect");return r}function Nd(t){return t.activeTextEditor?.selections.map(e=>({selection:e,editor:t.activeTextEditor}))??[]}var Ma=class{run(){return Nd(k()).map(e=>new At({editor:e.editor,isReversed:e.selection.isReversed,contentRange:e.selection,hasExplicitRange:!e.selection.isEmpty,textualType:"character"}))}};var Qn=class{constructor(e,r){this.debouncer=new Ou(r,e.getOwnConfiguration("decorationDebounceDelayMs")),this.run=this.run.bind(this)}run(){this.debouncer.run()}dispose(){this.debouncer.dispose()}};var Ld=class{constructor(e,r){this.ide=e;this.storedTargets=r;this.disposables=[];this.debouncer=new Qn(e.configuration,()=>this.updateKeyboardTarget()),this.disposables.push(e.configuration.onDidChangeConfiguration(()=>this.maybeActivate()),this.debouncer),this.maybeActivate()}maybeActivate(){if(this.ide.configuration.getOwnConfiguration("experimental.keyboardTargetFollowsSelection")){this.selectionWatcherDisposable==null&&(this.selectionWatcherDisposable=this.ide.onDidChangeTextEditorSelection(this.debouncer.run));return}this.selectionWatcherDisposable!=null&&(this.selectionWatcherDisposable.dispose(),this.selectionWatcherDisposable=void 0)}updateKeyboardTarget(){this.ide.activeTextEditor==null||this.storedTargets.get("keyboard")==null||this.storedTargets.set("keyboard",new Ma().run())}dispose(){this.disposables.forEach(e=>e.dispose()),this.selectionWatcherDisposable?.dispose()}};var Ud=class{constructor(e){this.ide=e;switch(e.disposeOnExit(this),this.evaluateSetting=this.evaluateSetting.bind(this),this.active=!0,e.runMode){case"development":this.enableDebugLog();break;case"test":this.disableDebugLog();break;case"production":this.evaluateSetting(),this.disposableConfiguration=e.configuration.onDidChangeConfiguration(this.evaluateSetting);break}}log(...e){this.active&&console.log(...e)}dispose(){this.disposableConfiguration&&this.disposableConfiguration.dispose()}enableDebugLog(){this.active=!0}disableDebugLog(){this.active=!1}evaluateSetting(){this.ide.configuration.getOwnConfiguration("debug")?this.enableDebugLog():this.disableDebugLog()}};var d5=["!","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_","`","{","|","}","~","\xA3",'"'],m5=d5.map(Ur).join("|"),h5=["[a-zA-Z0-9]",m5].join("|"),g5=new RegExp(`^(${h5})$`,"u"),y5="[unk]",x5=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}]/gu,Hd=class{constructor(){this.disposables=[];this.algorithmChangeNotifier=new qt;this.getTokenGraphemes=e=>sn(e,x5,r=>({text:this.normalizeGrapheme(r[0]),tokenStartOffset:r.index,tokenEndOffset:r.index+r[0].length}));this.registerAlgorithmChangeListener=this.algorithmChangeNotifier.registerListener;k().disposeOnExit(this),this.updateTokenHatSplittingMode=this.updateTokenHatSplittingMode.bind(this),this.getTokenGraphemes=this.getTokenGraphemes.bind(this),this.updateTokenHatSplittingMode(),this.disposables.push(k().configuration.onDidChangeConfiguration(this.updateTokenHatSplittingMode))}updateTokenHatSplittingMode(){let{lettersToPreserve:e,symbolsToPreserve:r,...n}=k().configuration.getOwnConfiguration("tokenHatSplittingMode");this.tokenHatSplittingMode={lettersToPreserve:e.map(i=>i.toLowerCase().normalize("NFC")),symbolsToPreserve:r.map(i=>i.normalize("NFC")),...n},this.algorithmChangeNotifier.notifyListeners()}normalizeGrapheme(e){let{preserveCase:r,lettersToPreserve:n,symbolsToPreserve:i}=this.tokenHatSplittingMode,o=e.normalize("NFC");return i.includes(o)||(r||(o=o.toLowerCase()),n.includes(o.toLowerCase()))||(o=wT(o),g5.test(o)||(o=y5)),o}dispose(){this.disposables.forEach(({dispose:e})=>e())}};function as(){return $S==null&&($S=new Hd),$S}var $S;var iA=({penalty:t})=>-t;function oA(t){return({grapheme:{text:e},style:r})=>{let n=t.get({grapheme:e,hatStyle:r});return n==null?1/0:-n}}function sA(t,e){let r=Kc(n=>AT(e[n].filter(i=>i>t))??1/0);return({grapheme:{text:n}})=>r(n)}function jS(t){return e=>e.grapheme.text===t?.grapheme&&e.style===t?.hatStyle?1:0}function aA(t){switch(t){case"greedy":return({penalty:e})=>-e;case"balanced":return({penalty:e})=>-(e<2?0:1);case"stable":return e=>0}}function cA(t,e){if(t.length===0)return;let r=t;for(let n of e){if(r.length===1)return r[0];r=T5(r,n)}return r[0]}function T5(t,e){let r=-1/0,n=[];for(let i of t){let o=e(i);o<r||(o>r&&(r=o,n.length=0),n.push(i))}return n}function pA({hatOldTokenRanks:t,graphemeTokenRanks:e},r,n,i,o,a){return cA(a,[jS(i),aA(r),jS(o),oA(t),iA,sA(n,e)])}function lA(t,e,r){let n={},i=new co(({grapheme:o,hatStyle:a})=>[o,a]);return t.forEach(({token:o,rank:a})=>{let p=e.get(o);p!=null&&i.set(p,a),r.getTokenGraphemes(o.text).forEach(({text:l})=>{let u;l in n?u=n[l]:(u=[],n[l]=u),u.push(a)})}),{hatOldTokenRanks:i,graphemeTokenRanks:n}}function uA(t,e=[]){return new Map(PT(Je,Qo)(Qc([e],t.visibleRanges.map(r=>DT(r.start.line,r.end.line+1)))).sort((r,n)=>r-n).map((r,n)=>[r,n]))}function fA(t,e){return(r,n)=>{let i=Math.abs(r.displayLine-t),o=Math.abs(n.displayLine-t);if(i<o)return-1;if(i>o)return 1;let a=Math.abs(r.range.start.character-e),p=Math.abs(n.range.start.character-e);return a-p}}var S5=["-","+","*","/","=","<",">","_","#",".","|","&",":"],v5=["!==","!=","+=","-=","*=","/=","%=","<=",">=","=>","->","??",'"""',"```","/*","*/","<!--","-->"],b5=["\\p{L}","\\p{M}","\\p{N}"],w5="[^\\s\\w]",_5="(?<![.\\d])\\d+\\.\\d+(?![.\\d])";function E5(t){let{fixedTokens:e,repeatableSymbols:r,identifierWordRegexes:n,identifierWordDelimiters:i,numbersRegex:o,singleSymbolsRegex:a}=t,p=r.map(Ur).map(x=>`${x}+`).join("|"),l=e.map(Ur).join("|"),d=`(${n.concat(i.map(Ur)).join("|")})+`,m=`(${n.join("|")})+`,g=[l,o,d,p,a].join("|");return{identifierMatcher:new RegExp(d,"gu"),wordMatcher:new RegExp(m,"gu"),tokenMatcher:new RegExp(g,"gu")}}var qS=new Map;function Er(t){let e=k().configuration.getOwnConfiguration("wordSeparators",{languageId:t}),r=e.join("\0");if(!qS.has(r)){let n={fixedTokens:v5,repeatableSymbols:S5,identifierWordRegexes:b5,identifierWordDelimiters:e,numbersRegex:_5,singleSymbolsRegex:w5};qS.set(r,E5(n))}return qS.get(r)}function dA(t,e,r){return sn(t,Er(e).tokenMatcher,r)}function mA(t,e){let r=t.document.languageId,n=t.document.getText(e),i=t.document.offsetAt(e.start);return dA(n,r,o=>{let a=i+o.index,p=i+o.index+o[0].length,l=new W(t.document.positionAt(a),t.document.positionAt(p));return{editor:t,text:o[0],range:l,offsets:{start:a,end:p}}})}function hA(t,e,r){let i=k5(t,e).flatMap(o=>{let a=o.selections[0].active,p=uA(o,[a.line]),l=Je(o.visibleRanges.map(u=>mA(o,u).map(d=>({...d,displayLine:p.get(d.range.start.line)}))));return l.sort(fA(p.get(a.line),a.character)),l});return R5(r,i).map((o,a)=>({token:o,rank:-a}))}function R5(t,e){return t==null?e:e.sort((r,n)=>{let i=t.has(r),o=t.has(n);return i&&!o?-1:!i&&o?1:0})}function k5(t,e){let r;return t==null?r=e:r=[t,...e.filter(n=>n!==t)],r}function zS({tokenGraphemeSplitter:t,enabledHatStyles:e,forceTokenHats:r,oldTokenHats:n,hatStability:i,activeTextEditor:o,visibleTextEditors:a}){let p=r==null?void 0:gA(r),l=gA(n),u=hA(o,a,p),d=lA(u,l,t),m=Object.keys(e),g=new ba(()=>[...m]);return u.map(({token:x,rank:b})=>{let v=P5(t,x,g,e),F=pA(d,i,b,p?.get(x),l.get(x),v);if(F!=null)return g.set(F.grapheme.text,g.get(F.grapheme.text).filter(I=>I!==F.style)),M5(x,F)}).filter(x=>x!=null)}function gA(t){let e=new co(({editor:r,offsets:n})=>[r.id,n.start,n.end]);return t.forEach(r=>e.set(r.token,r)),e}function P5(t,e,r,n){let i=[],o=t.getTokenGraphemes(e.text);for(let a of o)for(let p of r.get(a.text))i.push({grapheme:a,style:p,penalty:n[p].penalty});return i}function M5(t,e){return{hatStyle:e.style,grapheme:e.grapheme.text,token:t,hatRange:new W(t.range.start.translate(void 0,e.grapheme.tokenStartOffset),t.range.start.translate(void 0,e.grapheme.tokenEndOffset))}}var Vd=class{constructor(e,r){this.hats=e;this.context=r;this.disposables=[];k().disposeOnExit(this);let n=new Qn(k().configuration,()=>this.allocateHats());this.disposables.push(this.hats.onDidChangeEnabledHatStyles(n.run),this.hats.onDidChangeIsEnabled(n.run),k().onDidOpenTextDocument(n.run),k().onDidCloseTextDocument(n.run),k().onDidChangeActiveTextEditor(n.run),k().onDidChangeVisibleTextEditors(n.run),k().onDidChangeTextDocument(n.run),k().onDidChangeTextEditorSelection(n.run),k().onDidChangeTextEditorVisibleRanges(n.run),as().registerAlgorithmChangeListener(n.run),n)}async allocateHats(e){let r=await this.context.getActiveMap();e=e?.map(i=>({...i,grapheme:as().normalizeGrapheme(i.grapheme)}));let n=this.hats.isEnabled?zS({tokenGraphemeSplitter:as(),enabledHatStyles:this.hats.enabledHatStyles,forceTokenHats:e,oldTokenHats:r.tokenHats,hatStability:k().configuration.getOwnConfiguration("experimental.hatStability"),activeTextEditor:k().activeTextEditor,visibleTextEditors:k().visibleTextEditors}):[];r.setTokenHats(n),await this.hats.setHatRanges(n.map(({hatStyle:i,hatRange:o,token:{editor:a}})=>({editor:a,range:o,styleName:i})))}dispose(){this.disposables.forEach(({dispose:e})=>e())}};var Bd=class t{constructor(e){this.rangeUpdater=e;this.isExpired=!1;this.documentTokenLists=new Map;this.deregisterFunctions=[];this.map={};this._tokenHats=[]}get tokenHats(){return this._tokenHats}getDocumentTokenList(e){let r=e.uri.toString(),n=this.documentTokenLists.get(r);return n==null&&(n=[],this.documentTokenLists.set(r,n),this.deregisterFunctions.push(this.rangeUpdater.registerRangeInfoList(e,n))),n}clone(){let e=new t(this.rangeUpdater);return e.setTokenHats(this._tokenHats),e}setTokenHats(e){this.map={},this.documentTokenLists=new Map,this.deregisterFunctions.forEach(n=>n());let r=e.map(n=>{let{hatStyle:i,grapheme:o,token:a}=n,p=this.makeTokenLive(a);return this.map[hp(i,o)]=p,{...n,token:p}});this._tokenHats=r}makeTokenLive(e){let{tokenMatcher:r}=Er(e.editor.document.languageId),n={...e,expansionBehavior:{start:{type:"regex",regex:r},end:{type:"regex",regex:r}}};return this.getDocumentTokenList(e.editor.document).push(n),n}getEntries(){return this.checkExpired(),Object.entries(this.map)}getToken(e,r){return this.checkExpired(),this.map[hp(e,as().normalizeGrapheme(r))]}checkExpired(){if(this.isExpired)throw Error("Map snapshot has expired")}dispose(){this.isExpired=!0,this.deregisterFunctions.forEach(e=>e())}};var A5=6e4,Wd=class{constructor(e,r,n,i){this.debug=r;this.commandServerApi=i;this.prePhraseMapsSnapshotTimestamp=null;this.lastSignalVersion=null;k().disposeOnExit(this),this.activeMap=new Bd(e),this.getActiveMap=this.getActiveMap.bind(this),this.allocateHats=this.allocateHats.bind(this),this.hatAllocator=new Vd(n,{getActiveMap:this.getActiveMap})}allocateHats(e){return this.hatAllocator.allocateHats(e)}async getActiveMap(){return await this.maybeTakePrePhraseSnapshot(),this.activeMap}async getReadableMap(e){return await this.maybeTakePrePhraseSnapshot(),e?this.lastSignalVersion==null?(console.error("Pre phrase snapshot requested but no signal was present; please upgrade command client"),this.activeMap):this.prePhraseMapSnapshot==null?(console.error("Navigation map pre-phrase snapshot requested, but no snapshot has been taken"),this.activeMap):performance.now()-this.prePhraseMapsSnapshotTimestamp>A5?(console.error("Navigation map pre-phrase snapshot requested, but snapshot is more than a minute old"),this.activeMap):this.prePhraseMapSnapshot:this.activeMap}dispose(){this.activeMap.dispose(),this.prePhraseMapSnapshot!=null&&this.prePhraseMapSnapshot.dispose()}async maybeTakePrePhraseSnapshot(){let e=await this.commandServerApi.signals.prePhrase.getVersion();e!==this.lastSignalVersion&&(this.debug.log("taking snapshot"),this.lastSignalVersion=e,e!=null&&this.takePrePhraseSnapshot())}takePrePhraseSnapshot(){this.prePhraseMapSnapshot!=null&&this.prePhraseMapSnapshot.dispose(),this.prePhraseMapSnapshot=this.activeMap.clone(),this.prePhraseMapsSnapshotTimestamp=performance.now()}};function GS(t,e,r){let n=t.get(e);return n==null&&(n=r(),t.set(e,n)),n}var YS=yr(kp(),1);function XS(t,e){let{originalOffsets:{start:r,end:n},finalOffsets:{end:i},displacement:o}=t,{offsets:{start:a,end:p}}=e;return(0,YS.invariant)(n>r,()=>"Change range expected to be nonempty"),(0,YS.invariant)(n>=a&&r<=p,()=>"Change range expected to intersect with selection range"),{start:n<=a?a+o:Math.min(a,i),end:n<=p?p+o:Math.min(p,i)}}var bA=yr(kp(),1);function JS(t,e){let{event:{text:r,isReplace:n},finalOffsets:{start:i,end:o}}=t;if((0,bA.invariant)(i===t.originalOffsets.end&&i===e.offsets.start&&i===e.offsets.end,()=>"Selection range and change range expected to be same empty range"),n){let a=e.expansionBehavior.end;switch(a.type){case"closed":return{start:i,end:i};case"open":return{start:i,end:o};case"regex":{let p=r.match(_f(a.regex));return p==null?{start:i,end:i}:{start:i,end:i+p[0].length}}}}else{let a=e.expansionBehavior.start;switch(a.type){case"closed":return{start:o,end:o};case"open":return{start:i,end:o};case"regex":{let p=r.search(wf(a.regex));return p===-1?{start:o,end:o}:{start:i+p,end:o}}}}}var ev=yr(kp(),1);function tv(t,e){let{event:{text:r},originalOffsets:{start:n},displacement:i}=t,{offsets:{start:o,end:a},text:p}=e;if((0,ev.invariant)(a>o,()=>"Selection range expected to be nonempty"),(0,ev.invariant)(n>=o&&n<=a,()=>"Insertion offset expected to intersect with selection range"),n>o&&n<a)return{start:o,end:a+i};if(n===o){let l=e.expansionBehavior.start,u=a+i;switch(l.type){case"closed":return{start:o+i,end:u};case"open":return{start:o,end:u};case"regex":{let d=r+p,m=wf(l.regex),g=d.search(m);for(;g>r.length;)d=d.slice(0,g),g=d.search(m);return g===-1?{start:o,end:u}:{start:o+g,end:u}}}}else{let l=e.expansionBehavior.end,u=o;switch(l.type){case"closed":return{start:u,end:a};case"open":return{start:u,end:a+i};case"regex":{let d=p+r,m=_f(l.regex),g=d.match(m),x=g==null?0:g[0].length;for(;x!==0&&x<p.length;)d=p.slice(x)+r,g=d.match(m),x=g==null?0:x+g[0].length;return x===0?{start:u,end:a}:{start:u,end:o+x}}}}}function wA(t,e,r){let{start:n,end:i}=t.originalOffsets,{start:o,end:a}=e.offsets,p=Math.min(n,o),l="";return o<n&&(l+=e.text.substring(0,n-o)),l+=t.event.text,i<a&&(l+=e.text.substring(a-i,e.text.length)),l.substring(r.start-p,r.end-p)}function _A(t,e){let{document:r,contentChanges:n}=t,i=n.map(o=>{let a=o.text.length-o.rangeLength,p=o.rangeOffset,l=p+o.rangeLength,u=p,d=l+a;return{displacement:a,event:o,originalOffsets:{start:p,end:l},finalOffsets:{start:u,end:d}}});for(let o of e){let a=o.offsets,p=i.map(u=>{let d;return u.originalOffsets.start>a.end?{start:0,end:0}:u.originalOffsets.end<a.start?{start:u.displacement,end:u.displacement}:(u.event.rangeLength===0?o.range.isEmpty?d=JS(u,o):d=tv(u,o):d=XS(u,o),o.text=wA(u,o,d),{start:d.start-a.start,end:d.end-a.end})}),l={start:a.start+yf(p,({start:u})=>u),end:a.end+yf(p,({end:u})=>u)};o.range=o.range.with(r.positionAt(l.start),r.positionAt(l.end)),o.offsets=l}}var jd=class{constructor(){this.rangeInfoLists=new Map;this.replaceEditLists=new Map;this.listenForDocumentChanges()}getDocumentRangeInfoLists(e){return GS(this.rangeInfoLists,e.uri.toString(),()=>[])}getDocumentReplaceEditLists(e){return GS(this.replaceEditLists,e.uri.toString(),()=>[])}registerRangeInfoList(e,r){let n=this.getDocumentRangeInfoLists(e);return n.push(r),()=>nr(n,r)}registerReplaceEditList(e,r){let n=this.getDocumentReplaceEditLists(e);return n.push(r),()=>nr(n,r)}*documentRangeInfoGenerator(e){let r=this.getDocumentRangeInfoLists(e);for(let n of r)for(let i of n)yield i}listenForDocumentChanges(){this.disposable=k().onDidChangeTextDocument(e=>{let r=this.getDocumentReplaceEditLists(e.document),n={...e,contentChanges:e.contentChanges.map(i=>H5(r,i)?{...i,isReplace:!0}:i)};_A(n,this.documentRangeInfoGenerator(e.document))})}dispose(){this.disposable.dispose()}};function H5(t,e){for(let r of t)for(let n of r)if(n.range.isRangeEqual(e.range)&&n.text===e.text)return!0;return!1}var qd=class{constructor(){this.signals={prePhrase:{getVersion(){return Promise.resolve(null)}}}}getFocusedElementType(){return Promise.resolve(void 0)}};var zd=class{async allocateHats(){}async getReadableMap(){return{getEntries(){return[]},getToken(){throw new Error("Hat map is disabled")}}}dispose(){}};var Gd=class{onDidChangeDefinition(e){return{dispose:()=>{}}}loadLanguage(e){return Promise.resolve()}get(e){}getNodeAtLocation(e,r){}dispose(){}};var Kd=class{getSnippetStrict(e){throw new Error("Snippets are not implemented.")}openNewSnippetFile(e,r){throw new Error("Snippets are not implemented.")}};var Qd=class{getSpokenFormEntries(){throw new va}onDidChange(){return{dispose:()=>{}}}};var Zd=class{getTree(e){throw new Error("Tree sitter not provided")}loadLanguage(e){return Promise.resolve(!1)}getLanguage(e){throw new Error("Tree sitter not provided")}getNodeAtLocation(e,r){throw new Error("Tree sitter not provided")}};var nt=class extends Error{constructor(r,n=!1,i=!1){super(`No spoken form for: ${r}`);this.reason=r;this.requiresTalonUpdate=n;this.isPrivate=i}};var EA={curlyBrackets:["{","}"],angleBrackets:["<",">"],escapedDoubleQuotes:['\\"','\\"'],escapedSingleQuotes:["\\'","\\'"],escapedParentheses:["\\(","\\)"],escapedSquareBrackets:["\\[","\\]"],doubleQuotes:['"','"'],parentheses:["(",")"],backtickQuotes:["`","`"],squareBrackets:["[","]"],singleQuotes:["'","'"],tripleBacktickQuotes:["```","```"],tripleDoubleQuotes:['"""','"""'],tripleSingleQuotes:["'''","'''"],whitespace:[" "," "],any:null,string:null,collectionBoundary:null};var RA=new co(t=>t);for(let[t,e]of Object.entries(EA))e!=null&&RA.set(e,t);function kA(t,e,r){let n=RA.get([e,r]);if(n==null)throw Error(`Unknown surrounding pair delimiters '${e} ${r}'`);return t.pairedDelimiter[n]}function PA(t){throw new nt(`${t.type} insertion snippet`)}function MA(t){throw new nt(`${t.type} wrap with snippet`)}function Pp(t,e,r){let n=r==="vertical"?`${ht.verticalRange} `:"";if(t&&e)return n+ht.rangeExclusive;if(t)throw new nt("Range exclude anchor");return e?n+ht.rangeExcludingEnd:r==="vertical"?ht.verticalRange:ht.rangeInclusive}function AA(t){return Object.fromEntries(Object.entries(t).map(([e,r])=>[e,Object.fromEntries(Object.entries(r).map(([n,i])=>[n,{type:"customizable",spokenForms:i,spokenFormType:e,id:n}]))]))}var V5=["zero","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen","twenty","twenty one","twenty two","twenty three","twenty four","twenty five","twenty six","twenty seven","twenty eight","twenty nine","thirty","thirty one","thirty two","thirty three","thirty four","thirty five","thirty six","thirty seven","thirty eight","thirty nine","forty","forty one","forty two","forty three","forty four","forty five","forty six","forty seven","forty eight","forty nine","fifty","fifty one","fifty two","fifty three","fifty four","fifty five","fifty six","fifty seven","fifty eight","fifty nine","sixty","sixty one","sixty two","sixty three","sixty four","sixty five","sixty six","sixty seven","sixty eight","sixty nine","seventy","seventy one","seventy two","seventy three","seventy four","seventy five","seventy six","seventy seven","seventy eight","seventy nine","eighty","eighty one","eighty two","eighty three","eighty four","eighty five","eighty six","eighty seven","eighty eight","eighty nine","ninety","ninety one","ninety two","ninety three","ninety four","ninety five","ninety six","ninety seven","ninety eight","ninety nine"],B5=["zeroth","first","second","third","fourth","fifth","sixth","seventh","eighth","ninth","tenth","eleventh","twelfth","thirteenth","fourteenth","fifteenth","sixteenth","seventeenth","eighteenth","nineteenth","twentieth"];function Aa(t){let e=V5[t];if(e==null)throw Error(`Unknown number '${t}'`);return e}function Mp(t){let e=B5[t];if(e==null)throw Error(`Unknown ordinal '${t}'`);return e}var Yd=class{constructor(e){this.spokenFormMap=e;this.handleModifier=this.handleModifier.bind(this)}handlePrimitiveTarget(e){let r=[];return e.modifiers!=null&&r.push(e.modifiers.map(this.handleModifier)),e.mark!=null&&r.push(this.handleMark(e.mark)),r}handleModifier(e){switch(e.type){case"cascading":case"modifyIfUntyped":case"preferredScope":throw new nt(`Modifier '${e.type}'`);case"containingScope":return e.ancestorIndex==null||e.ancestorIndex===0?this.handleScopeType(e.scopeType):[new Array(e.ancestorIndex).fill(this.spokenFormMap.modifierExtra.ancestor),this.handleScopeType(e.scopeType)];case"everyScope":return[this.spokenFormMap.simpleModifier.everyScope,this.handleScopeType(e.scopeType)];case"extendThroughStartOf":case"extendThroughEndOf":{let r=this.spokenFormMap.simpleModifier[e.type];return e.modifiers!=null?[r,e.modifiers.map(this.handleModifier)]:[r]}case"relativeScope":return e.offset===0?this.handleRelativeScopeInclusive(e):this.handleRelativeScopeExclusive(e);case"ordinalScope":{let r=this.handleScopeType(e.scopeType),n=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.length===1)return e.start===-1?[n,this.spokenFormMap.modifierExtra.last,r]:e.start===0?[n,this.spokenFormMap.modifierExtra.first,r]:e.start<0?[n,Mp(Math.abs(e.start)),this.spokenFormMap.modifierExtra.last,r]:[n,Mp(e.start+1),r];let i=Aa(e.length);if(e.start===0)return[n,this.spokenFormMap.modifierExtra.first,i,Ap(r)];if(e.start===-e.length)return[n,this.spokenFormMap.modifierExtra.last,i,Ap(r)];throw new nt(`'${e.type}' with count > 1 and offset away from start / end`)}case"range":{if(e.anchor.type==="ordinalScope"&&e.active.type==="ordinalScope"&&e.anchor.length===1&&e.active.length===1&&e.anchor.scopeType.type===e.active.scopeType.type){let r=e.anchor.start===-1?this.spokenFormMap.modifierExtra.last:Mp(e.anchor.start+1),n=this.handleModifier(e.active),i=Pp(e.excludeAnchor,e.excludeActive);return[r,i,n]}throw Error(`Modifier '${e.type}' is not fully implemented`)}default:return[this.spokenFormMap.simpleModifier[e.type]]}}handleRelativeScopeInclusive(e){let r=this.handleScopeType(e.scopeType),n=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.length===1){let a=e.direction==="forward"?ht.forward:ht.backward;return[n,r,a]}let i=Aa(e.length),o=Ap(r);return e.direction==="forward"?[n,i,o]:[n,i,o,ht.backward]}handleRelativeScopeExclusive(e){let r=this.handleScopeType(e.scopeType),n=e.direction==="forward"?ht.next:ht.previous,i=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.offset===1){let o=Aa(e.length);if(e.length===1)return[i,n,r];let a=Ap(r);return[i,n,o,a]}if(e.length===1){let o=Mp(e.offset);return[i,o,n,r]}throw new nt(`${e.type} modifier with offset > 1 and length > 1`)}handleScopeType(e){switch(e.type){case"oneOf":case"surroundingPairInterior":throw new nt(`Scope type '${e.type}'`);case"glyph":return[this.spokenFormMap.complexScopeTypeType.glyph,IA(this.spokenFormMap.grapheme,"grapheme",e.character)];case"surroundingPair":{let r=this.spokenFormMap.pairedDelimiter[e.delimiter];return e.forceDirection!=null?[this.spokenFormMap.surroundingPairForceDirection[e.forceDirection],r]:r}case"customRegex":return this.spokenFormMap.customRegex[e.regex]??{type:"customizable",spokenForms:{spokenForms:[],isCustom:!0,defaultSpokenForms:[],requiresTalonUpdate:!1,isPrivate:!1},spokenFormType:"customRegex",id:e.regex};case"interior":return this.spokenFormMap.simpleModifier.interiorOnly;default:return this.spokenFormMap.simpleScopeTypeType[e.type]}}handleMark(e){switch(e.type){case"decoratedSymbol":{let[r,n]=e.symbolColor.split("-"),i=[];return r!=="default"&&i.push(wM(r)),n!=null&&i.push(_M(n)),i.push(IA(this.spokenFormMap.grapheme,"grapheme",e.character)),i}case"lineNumber":return this.handleLineNumberMark(e);case"range":{if(e.anchor.type==="lineNumber"&&e.active.type==="lineNumber"){let[r,n]=this.handleLineNumberMark(e.anchor),[i,o]=this.handleLineNumberMark(e.active);if(r===i){let a=Pp(e.excludeAnchor,e.excludeActive);return[r,n,a,o]}}throw Error(`Mark '${e.type}' is not fully implemented`)}case"explicit":case"keyboard":case"target":throw new nt(`Mark '${e.type}'`);default:return[ud[e.type]]}}handleLineNumberMark(e){switch(e.lineNumberType){case"absolute":throw new nt("Absolute line numbers");case"modulo100":return[fd.modulo100,Aa(e.lineNumber+1)];case"relative":return[e.lineNumber<0?fd.relativeUp:fd.relativeDown,Aa(Math.abs(e.lineNumber))]}}};function Ap(t){if(typeof t=="string")return DA(t);if(Array.isArray(t)){if(t.length===0)return t;let e=t[t.length-1];return[...t.slice(0,-1),Ap(e)]}return{...t,spokenForms:{...t.spokenForms,spokenForms:t.spokenForms.spokenForms.map(DA)}}}function DA(t){return`${t}s`}function IA(t,e,r){let n=t[r];if(n==null)throw new nt(`${e} '${r}'`);return n}var Da=class{constructor(e){this.spokenFormMap=AA(e),this.primitiveGenerator=new Yd(this.spokenFormMap)}getSpokenFormForSingleTerm(e,r){return this.componentsToSpokenForm(()=>{let n=this.spokenFormMap[e][r];if(n==null)throw new nt(`${e} with id ${r}`);return n})}processCommand(e){return this.componentsToSpokenForm(()=>this.handleAction(e.action))}processScopeType(e){return this.componentsToSpokenForm(()=>[this.primitiveGenerator.handleScopeType(e)])}componentsToSpokenForm(e){try{return{type:"success",spokenForms:FA(e())}}catch(r){if(r instanceof nt)return{type:"error",reason:r.reason,requiresTalonUpdate:r.requiresTalonUpdate,isPrivate:r.isPrivate};throw r}}handleAction(e){switch(e.name){case"editNew":case"getText":case"replace":case"executeCommand":case"parsed":case"private.getTargets":case"private.setKeyboardTarget":throw new nt(`Action '${e.name}'`);case"replaceWithTarget":case"moveToTarget":return[this.spokenFormMap.action[e.name],this.handleTarget(e.source),this.handleDestination(e.destination)];case"swapTargets":return[this.spokenFormMap.action[e.name],this.handleTarget(e.target1),ht.swapConnective,this.handleTarget(e.target2)];case"callAsFunction":return e.argument.type==="implicit"?[this.spokenFormMap.action[e.name],this.handleTarget(e.callee)]:[this.spokenFormMap.action[e.name],this.handleTarget(e.callee),"on",this.handleTarget(e.argument)];case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return[kA(this.spokenFormMap,e.left,e.right),this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"pasteFromClipboard":return[this.spokenFormMap.action[e.name],this.handleDestination(e.destination)];case"insertSnippet":return[this.spokenFormMap.action[e.name],PA(e.snippetDescription),this.handleDestination(e.destination)];case"generateSnippet":if(e.snippetName!=null)throw new nt(`${e.name}.snippetName`);return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"wrapWithSnippet":return[MA(e.snippetDescription),this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"highlight":{if(e.highlightId!=null)throw new nt(`${e.name}.highlightId`);return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)]}default:return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)]}}handleTarget(e){switch(e.type){case"list":if(e.elements.length<2)throw new nt("List target with < 2 elements");return e.elements.map((r,n)=>n===0?this.handleTarget(r):[ht.listConnective,this.handleTarget(r)]);case"range":{let r=this.handleTarget(e.anchor),n=this.handleTarget(e.active),i=Pp(e.excludeAnchor,e.excludeActive,e.rangeType);return[r,i,n]}case"primitive":return this.primitiveGenerator.handlePrimitiveTarget(e);case"implicit":return[]}}handleDestination(e){switch(e.type){case"list":if(e.destinations.length<2)throw new nt("List destination with < 2 elements");return e.destinations.map((r,n)=>n===0?this.handleDestination(r):[ht.listConnective,this.handleDestination(r)]);case"primitive":return[this.handleInsertionMode(e.insertionMode),this.handleTarget(e.target)];case"implicit":return[]}}handleInsertionMode(e){switch(e){case"to":return ht.sourceDestinationConnective;case"before":return ht.before;case"after":return ht.after}}};function FA(t){if(typeof t=="string")return[t];if(Array.isArray(t))return t.length===0?[""]:CA(t.map(FA)).map(e=>e.filter(r=>r.length!==0).join(" "));if(t.spokenForms.spokenForms.length===0){let e=`${fp(t.spokenFormType)} with id ${t.id}`,r;throw t.spokenForms.isPrivate?r="this is a private spoken form currently only for internal experimentation":t.spokenForms.requiresTalonUpdate?r="please update talon to the latest version (see https://www.cursorless.org/docs/user/updating/)":r="please see https://www.cursorless.org/docs/user/customization/ for more information",new nt(`${e}; ${r}`,t.spokenForms.requiresTalonUpdate,t.spokenForms.isPrivate)}return t.spokenForms.spokenForms}function CA(t){if(t.length===0)return[];if(t.length===1)return t[0].map(i=>[i]);let[e,...r]=t,n=CA(r);return e.flatMap(i=>n.map(o=>[i,...o]))}var Xd=class{constructor(e){this.talonSpokenForms=e;this.notifier=new qt;this.spokenFormMap_={...Mi};this.onDidChangeCustomSpokenForms=this.notifier.registerListener;this.disposable=e.onDidChange(()=>this.updateSpokenFormMaps().catch(()=>{})),this.customSpokenFormsInitialized=this.updateSpokenFormMaps(),this.customSpokenFormsInitialized.catch(()=>{})}get spokenFormMap(){return this.spokenFormMap_}get needsInitialTalonUpdate(){return this.needsInitialTalonUpdate_}async updateSpokenFormMaps(){let e;try{if(e=await this.talonSpokenForms.getSpokenFormEntries(),e.length===0)throw new Error("Custom spoken forms list empty")}catch(r){if(r instanceof up)this.needsInitialTalonUpdate_=!0;else if(!(r instanceof va)){console.error("Error loading custom spoken forms",r);let n=r.message.replace(/\.$/,"");st(k().messages,"CustomSpokenForms.updateSpokenFormMaps",`Error loading custom spoken forms: ${n}. Falling back to default spoken forms.`)}throw this.spokenFormMap_={...Mi},this.notifier.notifyListeners(),r}for(let r of NP)W5(this.spokenFormMap_,r,RS[r],Object.fromEntries(e.filter(n=>n.type===r).map(({id:n,spokenForms:i})=>[n,i])));this.notifier.notifyListeners()}getCustomRegexScopeTypes(){return Object.keys(this.spokenFormMap_.customRegex).map(e=>({type:"customRegex",regex:e}))}dispose(){this.disposable.dispose()}};function W5(t,e,r,n){let i=Array.from(new Set([...Object.keys(r),...Object.keys(n)])),o={};for(let a of i){let{defaultSpokenForms:p=[],isPrivate:l=!1}=r[a]??{},u=n[a];o[a]=u==null?{defaultSpokenForms:p,spokenForms:[],requiresTalonUpdate:!l,isCustom:!1,isPrivate:l}:{defaultSpokenForms:p,spokenForms:u,requiresTalonUpdate:!1,isCustom:!Ei(p,u),isPrivate:l}}t[e]=o}var Jd=class{constructor(e){this.customSpokenForms=new Xd(e),this.customSpokenFormsInitialized=this.customSpokenForms.customSpokenFormsInitialized,this.spokenFormGenerator=new Da(this.customSpokenForms.spokenFormMap),this.disposable=this.customSpokenForms.onDidChangeCustomSpokenForms(()=>{this.spokenFormGenerator=new Da(this.customSpokenForms.spokenFormMap)})}onDidChangeCustomSpokenForms(e){return this.customSpokenForms.onDidChangeCustomSpokenForms(e)}commandToSpokenForm(e){return this.spokenFormGenerator.processCommand(e)}scopeTypeToSpokenForm(e){return this.spokenFormGenerator.processScopeType(e)}actionIdToSpokenForm(e){return this.spokenFormGenerator.getSpokenFormForSingleTerm("action",e)}graphemeToSpokenForm(e){return this.spokenFormGenerator.getSpokenFormForSingleTerm("grapheme",e)}getCustomRegexScopeTypes(){return this.customSpokenForms.getCustomRegexScopeTypes()}get needsInitialTalonUpdate(){return this.customSpokenForms.needsInitialTalonUpdate}dispose(){this.disposable.dispose()}};function*$5(t){for(let e of t)for(let r of e)yield r}function*Dp(t,e){let r=tm(e),n=t;for(;n-- >0;){let i=r.next();if(!i.done)yield i.value;else return}}function*rv(t){let e=tm(t),r=e.next();if(r.done)return;let n=r.value;for(let i of e)yield[n,i],n=i}var t_e=Symbol();function*j5(t=0,e=1){let r=t;for(;;)yield r,r+=e}function*em(t,e){for(let r of t)e(r)&&(yield r)}function*Ht(t,e){for(let r of t)yield e(r)}function*NA(t,e,r,n=1){let i,o;if(r!==void 0?(i=e,o=r):(i=0,o=e),i<0)throw new Error("start cannot be negative");if(o!==null&&o<0)throw new Error("stop cannot be negative");if(n<=0)throw new Error("step cannot be negative");let a=-1,p=tm(t),l;for(;;){if(a++,o!==null&&a>=o||(l=p.next(),l.done))return;a<i||(a-i)%n===0&&(yield l.value)}}function*q5(t,e){let r=tm(t),n;for(;!(n=r.next()).done;){let i=n.value;if(!e(i))return;yield i}}function tm(t){return t[Symbol.iterator]()}function Ia(t,e){return Array.from(Ht(t,e))}function OA(t,e,r){let n=j5(t,r),i=r>=0?o=>o<e:o=>o>e;return q5(n,i)}function LA(t,e,r=1){return e!==void 0?OA(t,e,r):OA(0,t,r)}function rm(t,e){return $5(Ht(t,e))}function Wr(t,e,{domain:r},{domain:n}){return t==="forward"?z5(e,r,n):G5(e,r,n)}function z5(t,e,r){let n=e.start.isAfterOrEqual(t),i=r.start.isAfterOrEqual(t);if(n&&i){let a=e.start.compareTo(r.start);return a===0?e.end.compareTo(r.end):a}if(!n&&!i){let a=e.end.compareTo(r.end);return a===0?-e.start.compareTo(r.start):a}if(!n&&i){let a=e.end.compareTo(r.start);return a!==0?a:r.isEmpty?1:-1}let o=e.start.compareTo(r.end);return o!==0?o:e.isEmpty?-1:1}function G5(t,e,r){let n=e.end.isBeforeOrEqual(t),i=r.end.isBeforeOrEqual(t);if(n&&i){let a=-e.end.compareTo(r.end);return a===0?-e.start.compareTo(r.start):a}if(!n&&!i){let a=-e.start.compareTo(r.start);return a===0?e.end.compareTo(r.end):a}if(!n&&i){let a=-e.start.compareTo(r.end);return a!==0?a:r.isEmpty?1:-1}let o=-e.end.compareTo(r.start);return o!==0?o:e.isEmpty?-1:1}function UA(t,e,r,n,i,o){return K5(t,n,i,o)&&(i==null||Wr(r,n.includeDescendantScopes?t:e,i,o)<0)}function K5(t,e,r,n){let{containment:i,distalPosition:o,allowAdjacentScopes:a,skipAncestorScopes:p}=e,{domain:l}=n;switch(i){case"disallowed":if(l.contains(t))return!1;break;case"disallowedIfStrict":if(rA(l,t))return!1;break;case"required":if(!l.contains(t))return!1;break}return p&&r!=null&&l.contains(r.domain)?!1:Q5(new W(t,o),l,a)}function Q5(t,e,r){let n=t.intersection(e);return n==null?!1:!n.isEmpty||r||e.isEmpty}var Z5={containment:null,allowAdjacentScopes:!1,skipAncestorScopes:!1,includeDescendantScopes:!1},Ce=class{constructor(){this.includeAdjacentInEvery=!1}*generateScopes(e,r,n,i={}){let o={...Z5,...i,distalPosition:i.distalPosition??(n==="forward"?e.document.range.end:e.document.range.start)},a,p=r;for(let l of this.generateScopeCandidates(e,r,n,o))if(UA(r,p,n,o,a,l)&&(yield l,a=l,p=n==="forward"?l.domain.end:l.domain.start),this.canStopEarly(r,n,o,a,l))return}canStopEarly(e,r,n,i,o){let{containment:a,distalPosition:p,skipAncestorScopes:l}=n;if(this.isHierarchical&&!l)return!1;let u=this.isHierarchical&&l?i:o;return u==null?!1:!!(a==="required"&&(r==="forward"?u.domain.end.isAfter(e):u.domain.start.isBefore(e))||(r==="forward"?u.domain.end.isAfterOrEqual(p):u.domain.start.isBeforeOrEqual(p)))}};var Rr=class extends Ce{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.scopeType=n;this.languageId=i;this.isHierarchical=!1}get searchScopeType(){return this.iterationScopeType}get searchScopeHandler(){return this._searchScopeHandler==null&&(this._searchScopeHandler=this.scopeHandlerFactory.create(this.searchScopeType,this.languageId)),this._searchScopeHandler}generateScopeCandidates(r,n,i,o){let{containment:a,...p}=o,l=this.searchScopeHandler.generateScopes(r,n,i,{containment:a==="required"?"required":void 0,...p});return rm(l,u=>this.generateScopesInSearchScope(i,u))}};var nm=class extends Ce{constructor(r,n){super();this.scopeType={type:"line"};this.iterationScopeType={type:"paragraph"};this.isHierarchical=!1;this.includeAdjacentInEvery=!0}*generateScopeCandidates(r,n,i){if(i==="forward")for(let o=n.line;o<r.document.lineCount;o++)yield HA(r,o);else for(let o=n.line;o>=0;o--)yield HA(r,o)}};function HA(t,e){let{range:r}=t.document.lineAt(e);return{editor:t,domain:r,getTargets:n=>[nv(t,n,r)]}}function nv(t,e,r){return new sr({editor:t,isReversed:e,contentRange:iv(t,r)})}function iv(t,e){let r=t.document.lineAt(e.start),n=t.document.lineAt(e.end);return new W(r.rangeTrimmed?.start??r.range.start,n.rangeTrimmed?.end??n.range.end)}function fn(t,e,r,n){let i=e.document.offsetAt(r.start),o=e.document.getText(r),a=p=>new W(e.document.positionAt(i+p.index),e.document.positionAt(i+p.index+p[0].length));return t.lastIndex=0,n==="forward"?Ht(o.matchAll(t),a):Array.from(o.matchAll(t),a).reverse()}var im=class extends Rr{constructor(){super(...arguments);this.scopeType={type:"identifier"};this.iterationScopeType={type:"line"};this.regex=Er(this.languageId).identifierMatcher}generateScopesInSearchScope(r,{editor:n,domain:i}){return Ht(fn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:a=>[new Kt({editor:n,contentRange:o,isReversed:a})]}))}};function om(t,e,r){let n=t.editor.document.getText(t.domain),i=e.editor.document.getText(e.domain);for(let o of r){let a=Zo(o,n),p=Zo(o,i);if(a&&!p)return!0;if(p&&!a)return!1}}var Y5=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}\p{Z}\p{C}]/gu,X5=/[$]/g,J5=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}]/gu,sm=class extends Rr{constructor(){super(...arguments);this.scopeType={type:"character"};this.iterationScopeType={type:"token"}}get searchScopeType(){return{type:"line"}}generateScopesInSearchScope(r,{editor:n,domain:i}){return Ht(fn(Y5,n,i,r),o=>({editor:n,domain:o,getTargets:a=>[new Be({editor:n,contentRange:o,isReversed:a,textualType:"character"})]}))}isPreferredOver(r,n){let{identifierMatcher:i}=Er(this.languageId);return om(r,n,[i,X5,J5])}};var e8=/\p{Lu}?\p{Ll}+|\p{Lu}+(?!\p{Ll})|\p{N}+/gu,am=class{constructor(e){this.wordRegex=Er(e).wordMatcher}splitIdentifier(e){let r=tp(e,this.wordRegex);return r.length>1?r:tp(e,e8)}};var cm=class extends Rr{constructor(){super(...arguments);this.scopeType={type:"word"};this.iterationScopeType={type:"identifier"};this.wordTokenizer=new am(this.languageId)}getScopesInSearchScope({editor:r,domain:n}){let{document:i}=r,o=i.offsetAt(n.start),p=this.wordTokenizer.splitIdentifier(i.getText(n)).map(l=>new W(i.positionAt(o+l.index),i.positionAt(o+l.index+l.text.length)));return p.map((l,u)=>({editor:r,domain:l,getTargets:d=>{let m=u>0?p[u-1]:null,g=u+1<p.length?p[u+1]:null;return[t8(d,r,m,l,g)]}}))}generateScopesInSearchScope(r,n){let i=this.getScopesInSearchScope(n);return r==="backward"&&i.reverse(),i}};function t8(t,e,r,n,i){let o=r!=null&&n.start.isAfter(r.end)?new W(r.end,n.start):void 0,a=i!=null&&i.start.isAfter(n.end)?new W(n.end,i.start):void 0,l=o!=null||a!=null?e.document.getText(o??a):"";return new Dd({editor:e,isReversed:t,contentRange:n,insertionDelimiter:l,leadingDelimiterRange:o,trailingDelimiterRange:a})}var r8=/[$]/g,pm=class extends Rr{constructor(){super(...arguments);this.scopeType={type:"token"};this.iterationScopeType={type:"line"};this.regex=Er(this.languageId).tokenMatcher}generateScopesInSearchScope(r,{editor:n,domain:i}){return Ht(fn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:a=>[new Kt({editor:n,contentRange:o,isReversed:a})]}))}isPreferredOver(r,n){let{identifierMatcher:i}=Er(this.languageId);return om(r,n,[i,r8])}};var lm=class extends Ce{constructor(r,n){super();this.scopeType={type:"document"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i){let o=r.document.range;yield{editor:r,domain:o,getTargets:a=>[new Pd({editor:r,isReversed:a,contentRange:o})]}}};function um(t,e,r,n,i){if(!t&&n!=null&&i!=null&&VS(e,n)>VS(e,i))return r.union(n)}function Fa(t){return t.containment==null&&t.skipAncestorScopes}function VA(t,e,r,{containment:n,distalPosition:i,allowAdjacentScopes:o}){let{start:a,end:p}=n8(t.offsetAt(e),t.offsetAt(i),r,n,o);return{start:t.positionAt(a),end:t.positionAt(p)}}function n8(t,e,r,n,i){let o=i?1:0;if(n==="required")return r==="forward"?{start:t-o,end:t+1}:{start:t-1,end:t+o};let a=n==="disallowed"?1:-o;return r==="forward"?{start:t+a,end:e+o}:{start:e-o,end:t-a}}function BA(t,e,r){let n=[],i=[];for(let o of t)i.length===0||e(i[i.length-1],o)?i.push(o):(n.push(r(i)),i=[o]);return i.length>0&&n.push(r(i)),n}var Ca=class extends Ce{constructor(r){super();this.query=r}*generateScopeCandidates(r,n,i,o){let{document:a}=r,p=Fa(o),{start:l,end:u}=VA(a,n,i,o),d=this.query.matches(a,l,u).map(m=>this.matchToScope(r,m,p)).filter(m=>m!=null).sort((m,g)=>Wr(i,n,m,g));yield*BA(d,(m,g)=>m.domain.isRangeEqual(g.domain),m=>m.length===1?m[0]:{...m[0],getTargets(g){let x=Zc(m.flatMap(b=>b.getTargets(g)),(b,v)=>b.isEqual(v));if(x.length>1&&!m.every(b=>b.allowMultiple)){let b="Please use #allow-multiple! predicate in your query to allow multiple matches for this scope type";if(st(k().messages,"BaseTreeSitterScopeHandler.allow-multiple",b),k().runMode==="test")throw Error(b)}return x}})}};function ov(t,e,r,n){return n?Oa(t,`${e}.${r}`,`_.${r}`):Oa(t,`${e}.${r}`)??(Oa(t,e)!=null?Oa(t,`_.${r}`):void 0)}function yo(t,e,r,n){return ov(t,e,r,n)?.range}function Oa(t,...e){return t.captures.find(r=>e.some(n=>r.name===n))}var fm=class extends Ca{constructor(r,n){super(r);this.iterateeScopeType=n;this.isHierarchical=!0;this.scopeType=void 0}get iterationScopeType(){throw Error("Not implemented")}matchToScope(r,n,i){let o=this.iterateeScopeType.type,a=ov(n,o,"iteration",!1);if(a==null)return;let{range:p,allowMultiple:l}=a,u=yo(n,o,"iteration.domain",!1)??p;return{editor:r,domain:u,allowMultiple:l,getTargets:d=>[new Be({editor:r,isReversed:d,contentRange:p})]}}};var dm=class extends Ca{constructor(r,n){super(r);this.scopeType=n;this.isHierarchical=!0}get iterationScopeType(){return{type:"custom",scopeHandler:new fm(this.query,this.scopeType)}}matchToScope(r,n,i){let o=this.scopeType.type,a=Oa(n,o);if(a==null)return;let{range:p,allowMultiple:l,insertionDelimiter:u}=a,d=yo(n,o,"domain",!0)??p,m=yo(n,o,"prefix",!0)?.with(void 0,p.start),g=yo(n,o,"leading",!0)?.with(void 0,m?.start??p.start),x=yo(n,o,"trailing",!0)?.with(p.end),b=yo(n,o,"removal",!0);return b==null&&(o==="collectionItem"||o==="argumentOrParameter")&&(b=um(i,r,p,g,x)),{editor:r,domain:d,allowMultiple:l,getTargets:v=>[new ho({scopeTypeType:o,editor:r,isReversed:v,contentRange:p,prefixRange:m,removalRange:b,leadingDelimiterRange:g,trailingDelimiterRange:x,insertionDelimiter:u})]}}};function WA(t){return t.flatMap((e,r)=>{let{value:n,done:i}=e.next();return i?[]:[{iterator:e,value:n,index:r}]})}function $A(t,e){return t.flatMap(r=>{let{iterator:n,index:i}=r,{value:o}=r,a=!1;for(;!a&&!e(o);)({value:o,done:a}=n.next());return a?[]:[{iterator:n,value:o,index:i}]})}var Yn=class t extends Ce{constructor(r,n){super();this.scopeHandlers=r;this.getIterationScopeHandler=n;this.isHierarchical=!0;this.scopeType=void 0}static create(r,n,i){let o=n.scopeTypes.map(a=>r.create(a,i));return this.createFromScopeHandlers(r,i,o)}static createFromScopeHandlers(r,n,i){let o=()=>new t(i.map(a=>r.create(a.iterationScopeType,n)),()=>{throw new Error("Not implemented")});return new t(i,o)}get iterationScopeType(){return this.iterationScopeHandler==null&&(this.iterationScopeHandler=this.getIterationScopeHandler()),{type:"custom",scopeHandler:this.iterationScopeHandler}}*generateScopeCandidates(r,n,i,o){if(this.iterationScopeHandler?.lastYieldedIndex!=null){let l=this.iterationScopeHandler.lastYieldedIndex;yield*this.scopeHandlers[l].generateScopes(r,n,i,o);return}let a=this.scopeHandlers.map(l=>l.generateScopes(r,n,i,o)[Symbol.iterator]()),p=WA(a);for(;p.length>0;){p.sort((d,m)=>Wr(i,n,d.value,m.value));let l=p[0],u=l.value;this.lastYieldedIndex=l.index,yield u,p=$A(p,d=>Wr(i,n,u,d)<0)}}};var mm=class extends Ce{constructor(r,n){super();this.scopeType={type:"paragraph"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i){let{document:o}=r,a=i==="forward"?1:-1,p=i==="forward"?o.lineCount:-1,l=i8(o,n,i),u=r.document.lineAt(n);for(let d=n.line+a;d!==p;d+=a){let m=r.document.lineAt(d);m.isEmptyOrWhitespace?l!=null&&(yield jA(r,l.range.union(u.range)),l=void 0):l==null&&(l=m),u=m}l!=null&&(yield jA(r,l.range.union(u.range)))}};function i8(t,e,r){let n=r==="forward"?-1:1,i=r==="forward"?-1:t.lineCount,o=t.lineAt(e);if(!o.isEmptyOrWhitespace){for(let a=e.line+n;a!==i;a+=n){let p=t.lineAt(a);if(p.isEmptyOrWhitespace)break;o=p}return o}}function jA(t,e){return{editor:t,domain:e,getTargets:r=>[new uo({editor:t,isReversed:r,contentRange:iv(t,e)})]}}function Ip(t,e){return e.length>1?e.indexOf(t.slice(-1))>-1:t.slice(-1)===e}function qA(t,e){return t.slice(t.length-e.length)===e}var sv,s8=["al","adj","assn","Ave","BSc","MSc","Cell","Ch","Co","cc","Corp","Dem","Dept","ed","eg","Eq","Eqs","est","est","etc","Ex","ext","Fig","fig","Figs","figs","i.e","ie","Inc","inc","Jan","Feb","Mar","Apr","Jun","Jul","Aug","Sep","Sept","Oct","Nov","Dec","jr","mi","Miss","Mrs","Mr","Ms","Mol","mt","mts","no","Nos","PhD","MD","BA","MA","MM","pl","pop","pp","Prof","Dr","pt","Ref","Refs","Rep","repr","rev","Sec","Secs","Sgt","Col","Gen","Rep","Sen","Gov","Lt","Maj","Capt","St","Sr","sr","Jr","jr","Rev","Sun","Mon","Tu","Tue","Tues","Wed","Th","Thu","Thur","Thurs","Fri","Sat","trans","Univ","Viz","Vol","vs","v"];function zA(t){t?sv=t:sv=s8}function av(t){return/^[A-Z][a-z].*/.test(t)||hm(t)}function GA(t){return av(t)||/``|"|'/.test(t.substring(0,2))}function KA(t){let e=t.replace(/[-'`~!@#$%^&*()_|+=?;:'",.<>{}[\]\\/]/gi,"");return~sv.indexOf(e)}function QA(t,e){return(t==="a.m."||t==="p.m.")&&e.replace(/\W+/g,"").slice(-3).toLowerCase()==="day"}function cv(t){let e=t.replace(/[()[]{}]/g,"").match(/(.\.)*/);return e&&e[0].length>0}function ZA(t){return t.length<=3?!0:av(t)}function pv(t,e){return e.length>0?t<5&&e[0].length<6&&av(e[0])?!0:e.filter(function(n){return/[A-Z]/.test(n.charAt(0))}).length>=3:!1}function hm(t,e){return e&&(t=t.slice(e-1,e+2)),!isNaN(t)}function YA(t){return t.match(/^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/)}function XA(t){return t.match(/[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/)}function JA(t){let e=0;return((e=t.indexOf("."))>-1||(e=t.indexOf("!"))>-1||(e=t.indexOf("?"))>-1)&&t.charAt(e+1).match(/[a-zA-Z].*/)?[t.slice(0,e),t.slice(e+1)]:!1}function eD(t){return t==="."||t==="!"||t==="?"}var rD=" @~@ ",tD=rD.trim(),c8=new RegExp("\\S",""),p8=new RegExp("\\n+|[-#=_+*]{4,}","g"),l8=new RegExp("\\S+|\\n","g"),u8={newlineBoundaries:!1,preserveWhitespace:!1,abbreviations:void 0};function nD(t,e){if(!t)return[];if(!c8.test(t))return[];let r={...u8,...e};zA(r.abbreviations),r.newlineBoundaries&&(t=t.replace(p8,rD));let n,i;r.preserveWhitespace?(i=t.split(/(<br\s*\/?>|\S+|\n+)/),n=i.filter(function(m,g){return g%2})):n=t.trim().match(l8)??[];let o=0,a=0,p=[],l=[],u=[];if(!n||!n.length)return[];for(let m=0,g=n.length;m<g;m++){if(o++,u.push(n[m]),~n[m].indexOf(",")&&(o=0),eD(n[m])||Ip(n[m],"?!")||n[m]===tD){r.newlineBoundaries&&n[m]===tD&&u.pop(),l.push(u),o=0,u=[];continue}if((Ip(n[m],'"')||Ip(n[m],"\u201D"))&&(n[m]=n[m].slice(0,-1)),Ip(n[m],".")){if(m+1<g){if(n[m].length===2&&isNaN(n[m].charAt(0))||KA(n[m]))continue;if(GA(n[m+1])){if(QA(n[m],n[m+1])||pv(o,n.slice(m,6))||hm(n[m+1])&&ZA(n[m]))continue}else if(qA(n[m],"..")||cv(n[m])||pv(o,n.slice(m,5)))continue}l.push(u),u=[],o=0;continue}(a=n[m].indexOf("."))>-1&&(hm(n[m],a)||cv(n[m])||XA(n[m])||YA(n[m]))||(p=JA(n[m]))&&(u.pop(),u.push(p[0]),l.push(u),u=[],o=0,u.push(p[1]))}return u.length&&l.push(u),l=l.filter(function(m){return m.length>0}),l.slice(1).reduce(function(m,g){let x=m[m.length-1];return x.length===1&&/^.{1,2}[.]$/.test(x[0])&&!/[.]/.test(g[0])?(m.pop(),m.push(x.concat(g)),m):(m.push(g),m)},[l[0]]).map(function(m,g){if(r.preserveWhitespace&&!r.newlineBoundaries){let x=m.length*2;return g===0&&(x+=1),i.splice(0,x).join("")}return m.join(" ")})}var f8=/\S*\p{L}/u,iD=/(\r?\n[^\p{L}]*\r?\n)|(?<=[.!?])(\s*\r?\n)/gu,d8={newlineBoundaries:!1,preserveWhitespace:!0},gm=class{*segment(e){let r=nD(e,d8),n=0;for(let i of r){let o=i.split(iD).filter(a=>a!=null);for(let a of o){if(!h8(a)){let p=m8(a,n);p!=null&&(yield p)}n+=a.length}}}};function m8(t,e){let r=Lk(f8,t);if(r==null)return;let n=r.index;return n!==0&&(e+=n,t=t.slice(n)),{text:t.trimEnd(),index:e}}function h8(t){return Zo(iD,t)}var ym=class extends Rr{constructor(){super(...arguments);this.scopeType={type:"sentence"};this.iterationScopeType={type:"paragraph"};this.segmenter=new gm}generateScopesInSearchScope(r,{editor:n,domain:i}){let o=n.document.offsetAt(i.start),a=n.document.getText(i),p=u=>{let d=new W(n.document.positionAt(o+u.index),n.document.positionAt(o+u.index+u.text.length));return{editor:n,domain:d,getTargets:m=>[new Kt({editor:n,contentRange:d,isReversed:m})]}},l=this.segmenter.segment(a);return r==="forward"?Ht(l,p):Array.from(l,p).reverse()}};var Na=class extends Rr{constructor(){super(...arguments);this.iterationScopeType={type:"line"}}generateScopesInSearchScope(r,{editor:n,domain:i}){return Ht(fn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:a=>[new Kt({editor:n,contentRange:o,isReversed:a})]}))}},xm=class extends Na{constructor(){super(...arguments);this.regex=/\S+/g}},Tm=class extends Na{constructor(r,n,i){super(r,n,i);this.scopeType=n;this.regex=/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/g}},Sm=class extends Na{constructor(r,n,i){super(r,n,i);this.scopeType=n}get regex(){return new RegExp(this.scopeType.regex,this.scopeType.flags??"gu")}},vm=class extends Na{constructor(r,n,i){super(r,n,i);this.scopeType=n}get regex(){return new RegExp(Ur(this.scopeType.character),"gui")}};var bm=class extends Ce{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.languageId=n;this.targetScopeType=i;this.isHierarchical=!0;this.targetScopeHandler=this.scopeHandlerFactory.create(this.targetScopeType,this.languageId),this.surroundingPairInteriorScopeHandler=this.scopeHandlerFactory.create({type:"surroundingPairInterior",delimiter:"any"},this.languageId)}get iterationScopeType(){switch(this.targetScopeHandler.iterationScopeType.type){case"custom":case"fallback":case"conditional":throw Error(`Iteration scope type can't be '${this.targetScopeHandler.iterationScopeType.type}' for BoundedBaseScopeHandler`)}return{type:"oneOf",scopeTypes:[this.targetScopeHandler.iterationScopeType,{type:"surroundingPairInterior",delimiter:"any"}]}}*generateScopeCandidates(r,n,i,o){let a=this.targetScopeHandler.generateScopes(r,n,i,{...o,containment:o.containment!=="disallowed"?o.containment:void 0}),p=Array.from(this.surroundingPairInteriorScopeHandler.generateScopes(r,n,i,{...o,containment:Fa(o)?"required":o.containment}));for(let l of a){let u=[];for(let d of p){let m=l.domain.intersection(d.domain);m!=null&&!m.isEmpty&&u.push({editor:r,domain:m,getTargets:g=>[this.getTargets(oD(l,g),oD(d,g))]})}u.push(l),u.sort((d,m)=>Wr(i,n,d,m)),yield*u}}};function oD(t,e){let r=t.getTargets(e);if(r.length!==1)throw Error(`Expected one target but got ${r.length}`);return r[0]}var wm=class extends bm{constructor(r,n,i){super(r,i,{type:"nonWhitespaceSequence"});this.scopeType={type:"boundedNonWhitespaceSequence"}}getTargets(r,n){let i=r.contentRange.intersection(n.contentRange);if(i==null||i.isEmpty)throw Error("Expected non empty intersection");return new Kt({editor:r.editor,isReversed:r.isReversed,contentRange:i})}},_m=class extends bm{constructor(r,n,i){super(r,i,{type:"paragraph"});this.scopeType={type:"boundedParagraph"}}getTargets(r,n){if(!(r instanceof uo))throw Error("Expected ParagraphTarget");return new Od({editor:r.editor,isReversed:r.isReversed,paragraphTarget:r,containingInterior:n})}};var Xn=class{constructor(e){this.items=e;this.index=0}add(e){this.items.push(e)}contains(e){return this.advance(e)}getContaining(e){if(this.advance(e))return this.items[this.index]}advance(e){for(;this.index<this.items.length;){let r=this.items[this.index].range;if(r.contains(e))return!0;if(e.end.isBeforeOrEqual(r.start))return!1;this.index++}return!1}};var La=class{constructor(e){this.children=g8(e)}getSmallestContaining(e){return this.children.getContaining(e)?.getSmallestContaining(e)}};function g8(t){let e=[],r=[];for(let n of t){let i=new lv(n);for(;r.length>0&&!r[r.length-1].range.contains(n.range);)r.pop();let o=r[r.length-1];o!=null?o.children.add(i):e.push(i),r.push(i)}return new Xn(e)}var lv=class{constructor(e){this.item=e;this.children=new Xn([])}get range(){return this.item.range}getSmallestContaining(e){return this.children.getContaining(e)?.getSmallestContaining(e)??this.item}};var y8=",",uv=new RegExp(y8,"g");function sD(t){let e=t.getText();return sn(e,uv,r=>new W(t.positionAt(r.index),t.positionAt(r.index+r[0].length)))}var aD={type:"fallback",scopeTypes:[{type:"surroundingPairInterior",delimiter:"collectionBoundary"},{type:"conditional",scopeType:{type:"line"},predicate:t=>{let e=t.editor.document.getText(t.domain);return Zo(uv,e)}}]};function fv(t,e,r,n,i,o){let a=i!=null?new W(i.end,n.start):void 0,p=o!=null?new W(n.end,o.start):void 0,l=um(t,e,n,a,p),u=r.isSingleLine?", ":`,
`;return{editor:e,domain:n,getTargets(d){return[new ho({scopeTypeType:"collectionItem",editor:e,isReversed:d,contentRange:n,insertionDelimiter:u,leadingDelimiterRange:a,trailingDelimiterRange:p,removalRange:l})]}}}function dv(t,e,r,n){let i=t.create({type:"surroundingPairInterior",delimiter:n},e);return Array.from(i.generateScopes(r,new le(0,0),"forward",{containment:void 0,skipAncestorScopes:!1,includeDescendantScopes:!0}),o=>({range:o.domain}))}var Em=class extends Ce{constructor(r,n){super();this.scopeHandlerFactory=r;this.languageId=n;this.scopeType={type:"collectionItem"};this.isHierarchical=!0}get iterationScopeType(){return aD}*generateScopeCandidates(r,n,i,o){let a=Fa(o),p=sD(r.document),l=dv(this.scopeHandlerFactory,this.languageId,r,"collectionBoundary"),u=new La(l),d=dv(this.scopeHandlerFactory,this.languageId,r,"string"),m=new Xn(d),g=[],x=new Set,b=[];for(let v of p){if(m.contains(v))continue;let F;for(;b.length>0;){let K=b[b.length-1];if(K.iterationRange.contains(v)){F=K;break}this.addScopes(g,K),b.pop()}let I=u.getSmallestContaining(v)?.range,U=I??r.document.lineAt(v.start.line).range;if(F!=null&&F.iterationRange.isRangeEqual(U)){F.delimiters.push(v);continue}I!=null&&x.add(I),b.push({editor:r,isEveryScope:a,iterationRange:U,delimiters:[v]})}for(let v of b)this.addScopes(g,v);for(let v of l)if(!x.has(v.range)&&!v.range.isEmpty){let F=ss(r,v.range);F.isEmpty||g.push(fv(a,r,v.range,F))}g.sort((v,F)=>Wr(i,n,v,F)),yield*g}addScopes(r,n){let{editor:i,iterationRange:o,isEveryScope:a,delimiters:p}=n;if(p.length===0)return;let l=[];for(let m=0;m<p.length;++m){let g=p[m],x=p[m-1]?.end??o.start;l.push(new W(x,g.start))}let u=p[p.length-1];l.push(new W(u.end,o.end));let d=l.map(m=>ss(i,m));for(let m=0;m<d.length;++m)m===d.length-1&&i.document.getText(d[m]).trim()===""||r.push(fv(a,i,o,d[m],d[m-1],d[m+1]))}};var Rm=class extends Ce{constructor(r,n,i){super();this.scopeType={type:"collectionItem"};this.isHierarchical=!0;this.scopeHandler=(()=>{let o=new Em(r,i),a=n.get(i)?.getScopeHandler(this.scopeType);return a==null?o:Yn.createFromScopeHandlers(r,i,[a,o])})()}get iterationScopeType(){return this.scopeHandler.iterationScopeType}generateScopeCandidates(r,n,i,o){return this.scopeHandler.generateScopes(r,n,i,o)}};var km=class extends Ce{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.conditionalScopeType=n;this.languageId=i;this.scopeType=void 0;this.isHierarchical=!0}get iterationScopeType(){throw new ut("Iteration scope for ConditionalScopeHandler")}generateScopeCandidates(r,n,i,o){let a=this.scopeHandlerFactory.create(this.conditionalScopeType.scopeType,this.languageId);return em(a.generateScopes(r,n,i,o),this.conditionalScopeType.predicate)}};var Ua=class t extends Ce{constructor(r){super();this.scopeHandlers=r;this.scopeType=void 0;this.isHierarchical=!0}static create(r,n,i){let o=n.scopeTypes.map(a=>r.create(a,i));return this.createFromScopeHandlers(o)}static createFromScopeHandlers(r){return new t(r)}get iterationScopeType(){throw new ut("Iteration scope for FallbackScopeHandler")}*generateScopeCandidates(r,n,i,o){for(let a of this.scopeHandlers)yield*a.generateScopes(r,n,i,o)}};var Pm=class extends Ce{constructor(){super();this.scopeType={type:"notebookCell"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i,o){let a=x8(r,n,i,o);for(let p of a)yield S8(p)}};function x8(t,e,r,n){let i=T8(t);if(i==null)return[];let{notebook:o,cell:a}=i;return n.containment==="required"?[a]:n.containment==="disallowed"||n.containment==="disallowedIfStrict"?r==="forward"?o.cells.slice(a.index+1):o.cells.slice(0,a.index).reverse():n.distalPosition!=null&&new W(e,n.distalPosition).isRangeEqual(t.document.range)?o.cells:r==="forward"?o.cells.slice(a.index):o.cells.slice(0,a.index+1).reverse()}function T8(t){let e=t.document.uri.toString();for(let r of k().visibleNotebookEditors)for(let n of r.cells)if(n.document.uri.toString()===e)return{notebook:r,cell:n}}function S8(t){let e=v8(t),r=e.document.range;return{editor:e,domain:r,getTargets:n=>[new Ad({editor:e,isReversed:n,contentRange:r})]}}function v8(t){let e=t.document.uri.toString();for(let r of k().visibleTextEditors)if(r.document.uri.toString()===e)return r;throw new Error("Editor not found notebook cell")}var Mm=class extends Ce{constructor(r,n,i,o){super();this.scopeType={type:"notebookCell"};this.isHierarchical=!1;this.scopeHandler=(()=>{let a=new Pm,p=n.get(o)?.getScopeHandler(this.scopeType);return p==null?a:Yn.createFromScopeHandlers(r,o,[p,a])})()}get iterationScopeType(){return this.scopeHandler.iterationScopeType}generateScopeCandidates(r,n,i,o){return this.scopeHandler.generateScopes(r,n,i,o)}};var Am=class extends Ce{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.scopeType=n;this.languageId=i;this.isHierarchical=!0;this.surroundingPairScopeHandler=this.scopeHandlerFactory.create({type:"surroundingPair",delimiter:this.scopeType.delimiter,requireStrongContainment:!0},this.languageId)}get iterationScopeType(){return this.surroundingPairScopeHandler.iterationScopeType}*generateScopeCandidates(r,n,i,o){let a=this.surroundingPairScopeHandler.generateScopes(r,n,i,o);for(let p of a)yield{editor:r,domain:p.domain,getTargets(l){return p.getTargets(l).flatMap(u=>u.getInterior())}}}};function cD(t,{openingDelimiterRange:e,closingDelimiterRange:r},n){let i=e.union(r),o=new W(e.end,r.start);return{editor:t,domain:n?o:i,getTargets:a=>[new Id({editor:t,isReversed:a,contentRange:i,interiorRange:o,boundary:[e,r]})]}}function pD(t){let e=Qo(t.map(({text:r})=>r)).map(Ur).join("|");return new RegExp(`(?<!\\\\)(${e})`,"gu")}function uD(t,e,r){if(r.length===0)return[];let n=t?.getCapturesMap(e)??{},i=new Xn(mv(n.disqualifyDelimiter)),o=new Xn(mv(n.pairDelimiter)),a=new La(mv(n.textFragment)),p=Object.fromEntries(r.map(d=>[d.text,d])),l=OT(e.getText(),pD(r)),u=[];for(let d of l){let m=d[0],g=new W(e.positionAt(d.index),e.positionAt(d.index+m.length));lD(i.getContaining(g))==null&&u.push({delimiterInfo:p[m],textFragmentRange:a.getSmallestContaining(g)?.range,range:lD(o.getContaining(g))?.range??g})}return u}function lD(t){return t!=null&&!t.hasError()?t:void 0}function mv(t){return t==null?[]:(t.sort((e,r)=>e.range.start.compareTo(r.range.start)),t)}var Dm=Object.freeze({angleBrackets:[["</","<"],[">","/>"]],curlyBrackets:[["{","${"],"}"],tripleBacktickQuotes:[[],[]],tripleDoubleQuotes:[[],[]],tripleSingleQuotes:[[],[]],doubleQuotes:['"','"',{isSingleLine:!0}],escapedDoubleQuotes:['\\"','\\"',{isSingleLine:!0}],escapedParentheses:["\\(","\\)"],escapedSquareBrackets:["\\[","\\]"],escapedSingleQuotes:["\\'","\\'",{isSingleLine:!0}],parentheses:[["(","$("],")"],backtickQuotes:["`","`"],singleQuotes:["'","'",{isSingleLine:!0}],squareBrackets:["[","]"]}),fD={nix:{singleQuotes:["''","''"]},lua:{doubleQuotes:[['"',"[["],['"',"]]"]]},python:{tripleSingleQuotes:["'''","'''"],tripleDoubleQuotes:['"""','"""']},markdown:{tripleBacktickQuotes:["```","```"]},ruby:{tripleDoubleQuotes:["%Q(",")"]}},pRe=Object.fromEntries(Object.values(Dm)),dD={any:ki(Dm),string:["tripleDoubleQuotes","tripleSingleQuotes","tripleBacktickQuotes","doubleQuotes","singleQuotes","backtickQuotes"],collectionBoundary:["parentheses","squareBrackets","curlyBrackets","angleBrackets"]};function mD(t){return t!=null&&t in fD?{...Dm,...fD[t]}:Dm}function hD(t,e){let r=dD[t]??[t];return b8(e,r)}function b8(t,e){let r=mD(t);return e.flatMap(n=>{let[i,o,a]=r[n],{isSingleLine:p=!1}=a??{},l=dp(i)?[i]:i,u=dp(o)?[o]:o;return Qo(Qc(l,u)).map(m=>{let g=l.includes(m),x=u.includes(m);return{text:m,side:g&&!x?"left":!g&&x?"right":"unknown",delimiterName:n,isSingleLine:p}})})}function gD(t){let e=[],r=[];for(let n of t){let{delimiterInfo:{delimiterName:i,side:o,isSingleLine:a},textFragmentRange:p,range:l}=n;if(o==="left")r.push(n);else{let u=Ko(r,m=>m.delimiterInfo.delimiterName===i&&w8(m.textFragmentRange,p)&&_8(a,m.range,l));if(u===-1){o==="unknown"&&r.push(n);continue}let d=r[u];r.length=u,e.push({delimiterName:i,openingDelimiterRange:d.range,closingDelimiterRange:l})}}return e}function w8(t,e){return t==null||e==null?t===e:t.isRangeEqual(e)}function _8(t,e,r){return!t||e.start.line===r.start.line}var Im=class extends Ce{constructor(r,n,i){super();this.languageDefinitions=r;this.scopeType=n;this.languageId=i;this.iterationScopeType={type:"line"};this.isHierarchical=!0}*generateScopeCandidates(r,n,i,o){if(this.scopeType.forceDirection!=null){st(k().messages,"deprecatedForceDirection","forceDirection is deprecated. If this is important to you please file an issue on the cursorless repo.");return}let a=uD(this.languageDefinitions.get(this.languageId),r.document,hD(this.scopeType.delimiter,this.languageId)),p=gD(a);p=E8(i,o,n,p),yield*p.map(l=>cD(r,l,this.scopeType.requireStrongContainment??!1)).sort((l,u)=>Wr(i,n,l,u))}};function E8(t,e,r,n){return t==="forward"&&e.containment==="required"&&e.allowAdjacentScopes&&e.skipAncestorScopes?n.filter((i,o)=>!(i.closingDelimiterRange.end.isEqual(r)&&n[o+1]?.closingDelimiterRange.start.isEqual(r))):n}var Fm=class extends Ce{constructor(r,n,i,o){super();this.scopeHandlerFactory=r;this.languageDefinitions=n;this.scopeType=i;this.languageId=o;this.isHierarchical=!0}get iterationScopeType(){throw new ut("Iteration scope for InteriorScopeHandler")}*generateScopeCandidates(r,n,i,o){let a=new W(n,o.distalPosition),p=this.getScopeHandler();if(p==null)return;let l=p.generateScopes(r,n,i,o);for(let u of l)this.shouldYield(a,u)&&(yield R8(u))}getScopeHandler(){let r=this.languageDefinitions.get(this.languageId)?.getScopeHandler(this.scopeType),n=this.scopeHandlerFactory.create({type:"surroundingPair",delimiter:"any"},this.languageId);return this.scopeType.explicitScopeType?r==null?n:Ua.createFromScopeHandlers([r,n]):r==null?n:Yn.createFromScopeHandlers(this.scopeHandlerFactory,this.languageId,[r,n])}shouldYield(r,n){return!this.scopeType.explicitScopeType||r.contains(n.domain)}};function R8(t){return{editor:t.editor,domain:t.domain,getTargets(e){return t.getTargets(e).flatMap(k8)}}}function k8(t){let e=t.getInterior();return e??[new Pa({editor:t.editor,isReversed:t.isReversed,fullInteriorRange:t.contentRange})]}var Ha=class{constructor(e){this.languageDefinitions=e;this.maybeCreate=this.maybeCreate.bind(this),this.create=this.create.bind(this)}maybeCreate(e,r){switch(e.type){case"character":return new sm(this,e,r);case"word":return new cm(this,e,r);case"token":return new pm(this,e,r);case"identifier":return new im(this,e,r);case"line":return new nm(e,r);case"sentence":return new ym(this,e,r);case"paragraph":return new mm(e,r);case"boundedParagraph":return new _m(this,e,r);case"document":return new lm(e,r);case"nonWhitespaceSequence":return new xm(this,e,r);case"boundedNonWhitespaceSequence":return new wm(this,e,r);case"url":return new Tm(this,e,r);case"customRegex":return new Sm(this,e,r);case"glyph":return new vm(this,e,r);case"collectionItem":return new Rm(this,this.languageDefinitions,r);case"surroundingPair":return new Im(this.languageDefinitions,e,r);case"surroundingPairInterior":return new Am(this,e,r);case"notebookCell":return new Mm(this,this.languageDefinitions,e,r);case"interior":return new Fm(this,this.languageDefinitions,e,r);case"custom":return e.scopeHandler;case"oneOf":return Yn.create(this,e,r);case"fallback":return Ua.create(this,e,r);case"conditional":return new km(this,e,r);case"instance":throw Error("Unexpected scope type 'instance'");default:return this.languageDefinitions.get(r)?.getScopeHandler(e)}}create(e,r){let n=this.maybeCreate(e,r);if(n==null)throw new Error(`Couldn't create scope handler for '${e.type}'`);return n}};function dn(t,e){return new W(t.row,t.column,e.row,e.column)}function hv(t){return new le(t.row,t.column)}function yD(t){return new W(t.startPosition.row,t.startPosition.column,t.endPosition.row,t.endPosition.column)}function xD(t,e){return new be(t.startPosition.row,t.startPosition.column,e.endPosition.row,e.endPosition.column)}function Jn(t,e){return{selection:new be(new le(e.startPosition.row,e.startPosition.column),new le(e.endPosition.row,e.endPosition.column)),context:{}}}function P8(t,e,r){let n=e.startIndex<r.startIndex,i=n?e:r,o=n?r:e;return{selection:new be(new le(i.startPosition.row,i.startPosition.column),new le(o.endPosition.row,o.endPosition.column)),context:{}}}function TD(){return gv(t=>t.type===","||t.type==="("||t.type===")"||t.type==="["||t.type==="]"||t.type===">"||t.type==="<"||t.type==="}"||t.type==="{",", ")}function SD(t,e){let r=e.startIndex,n=e.endIndex;return e.text.startsWith("(")&&e.text.endsWith(")")?(r+=1,n-=1):e.text.endsWith(";")&&(n-=1),{selection:new be(t.document.positionAt(r),t.document.positionAt(n)),context:{}}}function vD(...t){return function(e,r){let n=r.previousSibling,i=n?.previousSibling,o;return n&&(t.includes(n.type)?i?o=dn(i.endPosition,r.startPosition):o=dn(n.startPosition,r.startPosition):o=dn(n.endPosition,r.startPosition)),{...Jn(e,r),context:{leadingDelimiterRange:o}}}}function ei(t=[],e=[],{includeUnnamedChildren:r=!1}={}){return function(n,i){if(t.length>0&&e.length>0)throw new Error("Cannot have both exclusions and inclusions.");let o=r?i.children:i.namedChildren,a=new Set(t),p=new Set(e);return o=o.filter(l=>a.size>0?!a.has(l.type):p.size>0?p.has(l.type):!0),P8(n,o[0],o[o.length-1])}}function bD(...t){return function(e,r){let n=r.nextSibling,i=n?.nextSibling,o;return n&&(t.includes(n.type)?i?o=dn(r.endPosition,i.startPosition):o=dn(r.endPosition,n.endPosition):o=dn(r.endPosition,n.startPosition)),{...Jn(e,r),context:{trailingDelimiterRange:o}}}}function M8(t,e){let r=t.nextSibling;for(;r!=null;){if(!e(r))return r;r=r.nextSibling}return r}function A8(t,e){let r=t.previousSibling;for(;r!=null;){if(!e(r))return r;r=r.previousSibling}return r}function gv(t,e,r=xr,n=xr){return(i,o)=>{let a,p,l=r(o),u=n(o),d=A8(l,t),m=M8(u,t);d!=null&&(a=dn(d.endPosition,l.startPosition)),m!=null&&(p=dn(u.endPosition,m.startPosition));let g=D8(i,a,p,e);return{selection:new be(new le(l.startPosition.row,l.startPosition.column),new le(u.endPosition.row,u.endPosition.column)),context:{containingListDelimiter:g,leadingDelimiterRange:a,trailingDelimiterRange:p}}}}function D8(t,e,r,n){let{document:i}=t,o=[r!=null?i.getText(r):n,e!=null?i.getText(e):n];return MT(o,"length")}function wD(t,e){if(t.length===1)return!0;let r=!1,n=t.filter(({name:l})=>l.endsWith(".start")).map(({range:{end:l}})=>l).sort((l,u)=>l.compareTo(u)).at(-1),i=t.filter(({name:l})=>l.endsWith(".end")).map(({range:{start:l}})=>l).sort((l,u)=>l.compareTo(u)).at(0);n!=null&&i!=null&&n.isAfter(i)&&(st(e,"TreeSitterQuery.checkCaptures.badOrder",`Start capture must be before end capture: ${t}`),r=!0);let o=t.filter(({name:l})=>l.endsWith(".start")).length,a=t.filter(({name:l})=>l.endsWith(".end")).length,p=t.length-o-a;return p>0&&(o>0||a>0)&&(st(e,"TreeSitterQuery.checkCaptures.mixRegularStartEnd",`Please do not mix regular captures and start/end captures: ${t.map(({name:l,range:u})=>l+" "+u.toString())}`),r=!0),p>1&&(st(e,"TreeSitterQuery.checkCaptures.duplicate",`A capture with the same name may only appear once in a single pattern: ${t.map(({name:l,range:u})=>l+" "+u.toString())}`),r=!0),!r}function _D(t){let e=t;for(;e!=null;){if(e.hasError)return!0;e=e.parent}return!1}function yv(t){return t.replace(/(\.(start|end))?(\.(startOf|endOf))?$/,"")}var Oe;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{let o={};for(let a of i)o[a]=a;return o},t.getValidEnumValues=i=>{let o=t.objectKeys(i).filter(p=>typeof i[i[p]]!="number"),a={};for(let p of o)a[p]=i[p];return t.objectValues(a)},t.objectValues=i=>t.objectKeys(i).map(function(o){return i[o]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let o=[];for(let a in i)Object.prototype.hasOwnProperty.call(i,a)&&o.push(a);return o},t.find=(i,o)=>{for(let a of i)if(o(a))return a},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,o=" | "){return i.map(a=>typeof a=="string"?`'${a}'`:a).join(o)}t.joinValues=n,t.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(Oe||(Oe={}));var Tv;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(Tv||(Tv={}));var J=Oe.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),xo=t=>{switch(typeof t){case"undefined":return J.undefined;case"string":return J.string;case"number":return isNaN(t)?J.nan:J.number;case"boolean":return J.boolean;case"function":return J.function;case"bigint":return J.bigint;case"symbol":return J.symbol;case"object":return Array.isArray(t)?J.array:t===null?J.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?J.promise:typeof Map<"u"&&t instanceof Map?J.map:typeof Set<"u"&&t instanceof Set?J.set:typeof Date<"u"&&t instanceof Date?J.date:J.object;default:return J.unknown}},G=Oe.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),I8=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),$r=class t extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let r=e||function(o){return o.message},n={_errors:[]},i=o=>{for(let a of o.issues)if(a.code==="invalid_union")a.unionErrors.map(i);else if(a.code==="invalid_return_type")i(a.returnTypeError);else if(a.code==="invalid_arguments")i(a.argumentsError);else if(a.path.length===0)n._errors.push(r(a));else{let p=n,l=0;for(;l<a.path.length;){let u=a.path[l];l===a.path.length-1?(p[u]=p[u]||{_errors:[]},p[u]._errors.push(r(a))):p[u]=p[u]||{_errors:[]},p=p[u],l++}}};return i(this),n}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Oe.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};$r.create=t=>new $r(t);var Wa=(t,e)=>{let r;switch(t.code){case G.invalid_type:t.received===J.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case G.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,Oe.jsonStringifyReplacer)}`;break;case G.unrecognized_keys:r=`Unrecognized key(s) in object: ${Oe.joinValues(t.keys,", ")}`;break;case G.invalid_union:r="Invalid input";break;case G.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Oe.joinValues(t.options)}`;break;case G.invalid_enum_value:r=`Invalid enum value. Expected ${Oe.joinValues(t.options)}, received '${t.received}'`;break;case G.invalid_arguments:r="Invalid function arguments";break;case G.invalid_return_type:r="Invalid function return type";break;case G.invalid_date:r="Invalid date";break;case G.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:Oe.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case G.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case G.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case G.custom:r="Invalid input";break;case G.invalid_intersection_types:r="Intersection results could not be merged";break;case G.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case G.not_finite:r="Number must be finite";break;default:r=e.defaultError,Oe.assertNever(t)}return{message:r}},kD=Wa;function F8(t){kD=t}function Cm(){return kD}var Om=t=>{let{data:e,path:r,errorMaps:n,issueData:i}=t,o=[...r,...i.path||[]],a={...i,path:o};if(i.message!==void 0)return{...i,path:o,message:i.message};let p="",l=n.filter(u=>!!u).slice().reverse();for(let u of l)p=u(a,{data:e,defaultError:p}).message;return{...i,path:o,message:p}},C8=[];function X(t,e){let r=Cm(),n=Om({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===Wa?void 0:Wa].filter(i=>!!i)});t.common.issues.push(n)}var Qt=class t{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let i of r){if(i.status==="aborted")return ge;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let i of r){let o=await i.key,a=await i.value;n.push({key:o,value:a})}return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let i of r){let{key:o,value:a}=i;if(o.status==="aborted"||a.status==="aborted")return ge;o.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof a.value<"u"||i.alwaysSet)&&(n[o.value]=a.value)}return{status:e.value,value:n}}},ge=Object.freeze({status:"aborted"}),Ba=t=>({status:"dirty",value:t}),ar=t=>({status:"valid",value:t}),Sv=t=>t.status==="aborted",vv=t=>t.status==="dirty",Op=t=>t.status==="valid",Np=t=>typeof Promise<"u"&&t instanceof Promise;function Nm(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function PD(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}var ce;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(ce||(ce={}));var Fp,Cp,hn=class{constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},ED=(t,e)=>{if(Op(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new $r(t.common.issues);return this._error=r,this._error}}};function Te(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(a,p)=>{var l,u;let{message:d}=t;return a.code==="invalid_enum_value"?{message:d??p.defaultError}:typeof p.data>"u"?{message:(l=d??n)!==null&&l!==void 0?l:p.defaultError}:a.code!=="invalid_type"?{message:p.defaultError}:{message:(u=d??r)!==null&&u!==void 0?u:p.defaultError}},description:i}}var Se=class{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return xo(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:xo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Qt,ctx:{common:e.parent.common,data:e.data,parsedType:xo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(Np(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;let i={common:{issues:[],async:(n=r?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:xo(e)},o=this._parseSync({data:e,path:i.path,parent:i});return ED(i,o)}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:xo(e)},i=this._parse({data:e,path:n.path,parent:n}),o=await(Np(i)?i:Promise.resolve(i));return ED(n,o)}refine(e,r){let n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,o)=>{let a=e(i),p=()=>o.addIssue({code:G.custom,...n(i)});return typeof Promise<"u"&&a instanceof Promise?a.then(l=>l?!0:(p(),!1)):a?!0:(p(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new jr({schema:this,typeName:me.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return mn.create(this,this._def)}nullable(){return ri.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ni.create(this,this._def)}promise(){return vo.create(this,this._def)}or(e){return hs.create([this,e],this._def)}and(e){return gs.create(this,e,this._def)}transform(e){return new jr({...Te(this._def),schema:this,typeName:me.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new vs({...Te(this._def),innerType:this,defaultValue:r,typeName:me.ZodDefault})}brand(){return new Lp({typeName:me.ZodBranded,type:this,...Te(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new bs({...Te(this._def),innerType:this,catchValue:r,typeName:me.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return Up.create(this,e)}readonly(){return ws.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},O8=/^c[^\s-]{8,}$/i,N8=/^[0-9a-z]+$/,L8=/^[0-9A-HJKMNP-TV-Z]{26}$/,U8=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,H8=/^[a-z0-9_-]{21}$/i,V8=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,B8=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,W8="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",xv,$8=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,j8=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,q8=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,MD="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",z8=new RegExp(`^${MD}$`);function AD(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function G8(t){return new RegExp(`^${AD(t)}$`)}function DD(t){let e=`${MD}T${AD(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function K8(t,e){return!!((e==="v4"||!e)&&$8.test(t)||(e==="v6"||!e)&&j8.test(t))}var To=class t extends Se{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==J.string){let o=this._getOrReturnCtx(e);return X(o,{code:G.invalid_type,expected:J.string,received:o.parsedType}),ge}let n=new Qt,i;for(let o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(i=this._getOrReturnCtx(e,i),X(i,{code:G.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="max")e.data.length>o.value&&(i=this._getOrReturnCtx(e,i),X(i,{code:G.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="length"){let a=e.data.length>o.value,p=e.data.length<o.value;(a||p)&&(i=this._getOrReturnCtx(e,i),a?X(i,{code:G.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):p&&X(i,{code:G.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),n.dirty())}else if(o.kind==="email")B8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"email",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="emoji")xv||(xv=new RegExp(W8,"u")),xv.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"emoji",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="uuid")U8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"uuid",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="nanoid")H8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"nanoid",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid")O8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"cuid",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid2")N8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"cuid2",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="ulid")L8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"ulid",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),X(i,{validation:"url",code:G.invalid_string,message:o.message}),n.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"regex",code:G.invalid_string,message:o.message}),n.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(e,i),X(i,{code:G.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),n.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(i=this._getOrReturnCtx(e,i),X(i,{code:G.invalid_string,validation:{startsWith:o.value},message:o.message}),n.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(i=this._getOrReturnCtx(e,i),X(i,{code:G.invalid_string,validation:{endsWith:o.value},message:o.message}),n.dirty()):o.kind==="datetime"?DD(o).test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{code:G.invalid_string,validation:"datetime",message:o.message}),n.dirty()):o.kind==="date"?z8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{code:G.invalid_string,validation:"date",message:o.message}),n.dirty()):o.kind==="time"?G8(o).test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{code:G.invalid_string,validation:"time",message:o.message}),n.dirty()):o.kind==="duration"?V8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"duration",code:G.invalid_string,message:o.message}),n.dirty()):o.kind==="ip"?K8(e.data,o.version)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"ip",code:G.invalid_string,message:o.message}),n.dirty()):o.kind==="base64"?q8.test(e.data)||(i=this._getOrReturnCtx(e,i),X(i,{validation:"base64",code:G.invalid_string,message:o.message}),n.dirty()):Oe.assertNever(o);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(i=>e.test(i),{validation:r,code:G.invalid_string,...ce.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ce.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ce.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ce.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ce.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ce.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ce.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ce.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ce.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ce.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ce.errToObj(e)})}datetime(e){var r,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,local:(n=e?.local)!==null&&n!==void 0?n:!1,...ce.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...ce.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...ce.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...ce.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...ce.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...ce.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...ce.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...ce.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...ce.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...ce.errToObj(r)})}nonempty(e){return this.min(1,ce.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};To.create=t=>{var e;return new To({checks:[],typeName:me.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Te(t)})};function Q8(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,o=parseInt(t.toFixed(i).replace(".","")),a=parseInt(e.toFixed(i).replace(".",""));return o%a/Math.pow(10,i)}var ps=class t extends Se{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==J.number){let o=this._getOrReturnCtx(e);return X(o,{code:G.invalid_type,expected:J.number,received:o.parsedType}),ge}let n,i=new Qt;for(let o of this._def.checks)o.kind==="int"?Oe.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),X(n,{code:G.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),X(n,{code:G.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),X(n,{code:G.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?Q8(e.data,o.value)!==0&&(n=this._getOrReturnCtx(e,n),X(n,{code:G.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),X(n,{code:G.not_finite,message:o.message}),i.dirty()):Oe.assertNever(o);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,ce.toString(r))}gt(e,r){return this.setLimit("min",e,!1,ce.toString(r))}lte(e,r){return this.setLimit("max",e,!0,ce.toString(r))}lt(e,r){return this.setLimit("max",e,!1,ce.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:ce.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ce.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ce.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ce.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ce.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ce.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:ce.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:ce.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ce.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ce.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Oe.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};ps.create=t=>new ps({checks:[],typeName:me.ZodNumber,coerce:t?.coerce||!1,...Te(t)});var ls=class t extends Se{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==J.bigint){let o=this._getOrReturnCtx(e);return X(o,{code:G.invalid_type,expected:J.bigint,received:o.parsedType}),ge}let n,i=new Qt;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),X(n,{code:G.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),X(n,{code:G.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),X(n,{code:G.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):Oe.assertNever(o);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,ce.toString(r))}gt(e,r){return this.setLimit("min",e,!1,ce.toString(r))}lte(e,r){return this.setLimit("max",e,!0,ce.toString(r))}lt(e,r){return this.setLimit("max",e,!1,ce.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:ce.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ce.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ce.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ce.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ce.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:ce.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};ls.create=t=>{var e;return new ls({checks:[],typeName:me.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Te(t)})};var us=class extends Se{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==J.boolean){let n=this._getOrReturnCtx(e);return X(n,{code:G.invalid_type,expected:J.boolean,received:n.parsedType}),ge}return ar(e.data)}};us.create=t=>new us({typeName:me.ZodBoolean,coerce:t?.coerce||!1,...Te(t)});var fs=class t extends Se{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==J.date){let o=this._getOrReturnCtx(e);return X(o,{code:G.invalid_type,expected:J.date,received:o.parsedType}),ge}if(isNaN(e.data.getTime())){let o=this._getOrReturnCtx(e);return X(o,{code:G.invalid_date}),ge}let n=new Qt,i;for(let o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(i=this._getOrReturnCtx(e,i),X(i,{code:G.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),n.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(i=this._getOrReturnCtx(e,i),X(i,{code:G.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),n.dirty()):Oe.assertNever(o);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:ce.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:ce.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};fs.create=t=>new fs({checks:[],coerce:t?.coerce||!1,typeName:me.ZodDate,...Te(t)});var $a=class extends Se{_parse(e){if(this._getType(e)!==J.symbol){let n=this._getOrReturnCtx(e);return X(n,{code:G.invalid_type,expected:J.symbol,received:n.parsedType}),ge}return ar(e.data)}};$a.create=t=>new $a({typeName:me.ZodSymbol,...Te(t)});var ds=class extends Se{_parse(e){if(this._getType(e)!==J.undefined){let n=this._getOrReturnCtx(e);return X(n,{code:G.invalid_type,expected:J.undefined,received:n.parsedType}),ge}return ar(e.data)}};ds.create=t=>new ds({typeName:me.ZodUndefined,...Te(t)});var ms=class extends Se{_parse(e){if(this._getType(e)!==J.null){let n=this._getOrReturnCtx(e);return X(n,{code:G.invalid_type,expected:J.null,received:n.parsedType}),ge}return ar(e.data)}};ms.create=t=>new ms({typeName:me.ZodNull,...Te(t)});var So=class extends Se{constructor(){super(...arguments),this._any=!0}_parse(e){return ar(e.data)}};So.create=t=>new So({typeName:me.ZodAny,...Te(t)});var Oi=class extends Se{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ar(e.data)}};Oi.create=t=>new Oi({typeName:me.ZodUnknown,...Te(t)});var Fn=class extends Se{_parse(e){let r=this._getOrReturnCtx(e);return X(r,{code:G.invalid_type,expected:J.never,received:r.parsedType}),ge}};Fn.create=t=>new Fn({typeName:me.ZodNever,...Te(t)});var ja=class extends Se{_parse(e){if(this._getType(e)!==J.undefined){let n=this._getOrReturnCtx(e);return X(n,{code:G.invalid_type,expected:J.void,received:n.parsedType}),ge}return ar(e.data)}};ja.create=t=>new ja({typeName:me.ZodVoid,...Te(t)});var Ni=class t extends Se{_parse(e){let{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==J.array)return X(r,{code:G.invalid_type,expected:J.array,received:r.parsedType}),ge;if(i.exactLength!==null){let a=r.data.length>i.exactLength.value,p=r.data.length<i.exactLength.value;(a||p)&&(X(r,{code:a?G.too_big:G.too_small,minimum:p?i.exactLength.value:void 0,maximum:a?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(X(r,{code:G.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(X(r,{code:G.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((a,p)=>i.type._parseAsync(new hn(r,a,r.path,p)))).then(a=>Qt.mergeArray(n,a));let o=[...r.data].map((a,p)=>i.type._parseSync(new hn(r,a,r.path,p)));return Qt.mergeArray(n,o)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:ce.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:ce.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:ce.toString(r)}})}nonempty(e){return this.min(1,e)}};Ni.create=(t,e)=>new Ni({type:t,minLength:null,maxLength:null,exactLength:null,typeName:me.ZodArray,...Te(e)});function Va(t){if(t instanceof kr){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=mn.create(Va(n))}return new kr({...t._def,shape:()=>e})}else return t instanceof Ni?new Ni({...t._def,type:Va(t.element)}):t instanceof mn?mn.create(Va(t.unwrap())):t instanceof ri?ri.create(Va(t.unwrap())):t instanceof ti?ti.create(t.items.map(e=>Va(e))):t}var kr=class t extends Se{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=Oe.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==J.object){let u=this._getOrReturnCtx(e);return X(u,{code:G.invalid_type,expected:J.object,received:u.parsedType}),ge}let{status:n,ctx:i}=this._processInputParams(e),{shape:o,keys:a}=this._getCached(),p=[];if(!(this._def.catchall instanceof Fn&&this._def.unknownKeys==="strip"))for(let u in i.data)a.includes(u)||p.push(u);let l=[];for(let u of a){let d=o[u],m=i.data[u];l.push({key:{status:"valid",value:u},value:d._parse(new hn(i,m,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof Fn){let u=this._def.unknownKeys;if(u==="passthrough")for(let d of p)l.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(u==="strict")p.length>0&&(X(i,{code:G.unrecognized_keys,keys:p}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let u=this._def.catchall;for(let d of p){let m=i.data[d];l.push({key:{status:"valid",value:d},value:u._parse(new hn(i,m,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let u=[];for(let d of l){let m=await d.key,g=await d.value;u.push({key:m,value:g,alwaysSet:d.alwaysSet})}return u}).then(u=>Qt.mergeObjectSync(n,u)):Qt.mergeObjectSync(n,l)}get shape(){return this._def.shape()}strict(e){return ce.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var i,o,a,p;let l=(a=(o=(i=this._def).errorMap)===null||o===void 0?void 0:o.call(i,r,n).message)!==null&&a!==void 0?a:n.defaultError;return r.code==="unrecognized_keys"?{message:(p=ce.errToObj(e).message)!==null&&p!==void 0?p:l}:{message:l}}}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:me.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};return Oe.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new t({...this._def,shape:()=>r})}omit(e){let r={};return Oe.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new t({...this._def,shape:()=>r})}deepPartial(){return Va(this)}partial(e){let r={};return Oe.objectKeys(this.shape).forEach(n=>{let i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}),new t({...this._def,shape:()=>r})}required(e){let r={};return Oe.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let o=this.shape[n];for(;o instanceof mn;)o=o._def.innerType;r[n]=o}}),new t({...this._def,shape:()=>r})}keyof(){return ID(Oe.objectKeys(this.shape))}};kr.create=(t,e)=>new kr({shape:()=>t,unknownKeys:"strip",catchall:Fn.create(),typeName:me.ZodObject,...Te(e)});kr.strictCreate=(t,e)=>new kr({shape:()=>t,unknownKeys:"strict",catchall:Fn.create(),typeName:me.ZodObject,...Te(e)});kr.lazycreate=(t,e)=>new kr({shape:t,unknownKeys:"strip",catchall:Fn.create(),typeName:me.ZodObject,...Te(e)});var hs=class extends Se{_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function i(o){for(let p of o)if(p.result.status==="valid")return p.result;for(let p of o)if(p.result.status==="dirty")return r.common.issues.push(...p.ctx.common.issues),p.result;let a=o.map(p=>new $r(p.ctx.common.issues));return X(r,{code:G.invalid_union,unionErrors:a}),ge}if(r.common.async)return Promise.all(n.map(async o=>{let a={...r,common:{...r.common,issues:[]},parent:null};return{result:await o._parseAsync({data:r.data,path:r.path,parent:a}),ctx:a}})).then(i);{let o,a=[];for(let l of n){let u={...r,common:{...r.common,issues:[]},parent:null},d=l._parseSync({data:r.data,path:r.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!o&&(o={result:d,ctx:u}),u.common.issues.length&&a.push(u.common.issues)}if(o)return r.common.issues.push(...o.ctx.common.issues),o.result;let p=a.map(l=>new $r(l));return X(r,{code:G.invalid_union,unionErrors:p}),ge}}get options(){return this._def.options}};hs.create=(t,e)=>new hs({options:t,typeName:me.ZodUnion,...Te(e)});var Ci=t=>t instanceof ys?Ci(t.schema):t instanceof jr?Ci(t.innerType()):t instanceof xs?[t.value]:t instanceof Ts?t.options:t instanceof Ss?Oe.objectValues(t.enum):t instanceof vs?Ci(t._def.innerType):t instanceof ds?[void 0]:t instanceof ms?[null]:t instanceof mn?[void 0,...Ci(t.unwrap())]:t instanceof ri?[null,...Ci(t.unwrap())]:t instanceof Lp||t instanceof ws?Ci(t.unwrap()):t instanceof bs?Ci(t._def.innerType):[],Lm=class t extends Se{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==J.object)return X(r,{code:G.invalid_type,expected:J.object,received:r.parsedType}),ge;let n=this.discriminator,i=r.data[n],o=this.optionsMap.get(i);return o?r.common.async?o._parseAsync({data:r.data,path:r.path,parent:r}):o._parseSync({data:r.data,path:r.path,parent:r}):(X(r,{code:G.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),ge)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let i=new Map;for(let o of r){let a=Ci(o.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let p of a){if(i.has(p))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(p)}`);i.set(p,o)}}return new t({typeName:me.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...Te(n)})}};function bv(t,e){let r=xo(t),n=xo(e);if(t===e)return{valid:!0,data:t};if(r===J.object&&n===J.object){let i=Oe.objectKeys(e),o=Oe.objectKeys(t).filter(p=>i.indexOf(p)!==-1),a={...t,...e};for(let p of o){let l=bv(t[p],e[p]);if(!l.valid)return{valid:!1};a[p]=l.data}return{valid:!0,data:a}}else if(r===J.array&&n===J.array){if(t.length!==e.length)return{valid:!1};let i=[];for(let o=0;o<t.length;o++){let a=t[o],p=e[o],l=bv(a,p);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return r===J.date&&n===J.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var gs=class extends Se{_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=(o,a)=>{if(Sv(o)||Sv(a))return ge;let p=bv(o.value,a.value);return p.valid?((vv(o)||vv(a))&&r.dirty(),{status:r.value,value:p.data}):(X(n,{code:G.invalid_intersection_types}),ge)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([o,a])=>i(o,a)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};gs.create=(t,e,r)=>new gs({left:t,right:e,typeName:me.ZodIntersection,...Te(r)});var ti=class t extends Se{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==J.array)return X(n,{code:G.invalid_type,expected:J.array,received:n.parsedType}),ge;if(n.data.length<this._def.items.length)return X(n,{code:G.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ge;!this._def.rest&&n.data.length>this._def.items.length&&(X(n,{code:G.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let o=[...n.data].map((a,p)=>{let l=this._def.items[p]||this._def.rest;return l?l._parse(new hn(n,a,n.path,p)):null}).filter(a=>!!a);return n.common.async?Promise.all(o).then(a=>Qt.mergeArray(r,a)):Qt.mergeArray(r,o)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};ti.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ti({items:t,typeName:me.ZodTuple,rest:null,...Te(e)})};var Um=class t extends Se{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==J.object)return X(n,{code:G.invalid_type,expected:J.object,received:n.parsedType}),ge;let i=[],o=this._def.keyType,a=this._def.valueType;for(let p in n.data)i.push({key:o._parse(new hn(n,p,n.path,p)),value:a._parse(new hn(n,n.data[p],n.path,p)),alwaysSet:p in n.data});return n.common.async?Qt.mergeObjectAsync(r,i):Qt.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof Se?new t({keyType:e,valueType:r,typeName:me.ZodRecord,...Te(n)}):new t({keyType:To.create(),valueType:e,typeName:me.ZodRecord,...Te(r)})}},qa=class extends Se{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==J.map)return X(n,{code:G.invalid_type,expected:J.map,received:n.parsedType}),ge;let i=this._def.keyType,o=this._def.valueType,a=[...n.data.entries()].map(([p,l],u)=>({key:i._parse(new hn(n,p,n.path,[u,"key"])),value:o._parse(new hn(n,l,n.path,[u,"value"]))}));if(n.common.async){let p=new Map;return Promise.resolve().then(async()=>{for(let l of a){let u=await l.key,d=await l.value;if(u.status==="aborted"||d.status==="aborted")return ge;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),p.set(u.value,d.value)}return{status:r.value,value:p}})}else{let p=new Map;for(let l of a){let u=l.key,d=l.value;if(u.status==="aborted"||d.status==="aborted")return ge;(u.status==="dirty"||d.status==="dirty")&&r.dirty(),p.set(u.value,d.value)}return{status:r.value,value:p}}}};qa.create=(t,e,r)=>new qa({valueType:e,keyType:t,typeName:me.ZodMap,...Te(r)});var za=class t extends Se{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==J.set)return X(n,{code:G.invalid_type,expected:J.set,received:n.parsedType}),ge;let i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(X(n,{code:G.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(X(n,{code:G.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());let o=this._def.valueType;function a(l){let u=new Set;for(let d of l){if(d.status==="aborted")return ge;d.status==="dirty"&&r.dirty(),u.add(d.value)}return{status:r.value,value:u}}let p=[...n.data.values()].map((l,u)=>o._parse(new hn(n,l,n.path,u)));return n.common.async?Promise.all(p).then(l=>a(l)):a(p)}min(e,r){return new t({...this._def,minSize:{value:e,message:ce.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:ce.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};za.create=(t,e)=>new za({valueType:t,minSize:null,maxSize:null,typeName:me.ZodSet,...Te(e)});var Hm=class t extends Se{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==J.function)return X(r,{code:G.invalid_type,expected:J.function,received:r.parsedType}),ge;function n(p,l){return Om({data:p,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Cm(),Wa].filter(u=>!!u),issueData:{code:G.invalid_arguments,argumentsError:l}})}function i(p,l){return Om({data:p,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Cm(),Wa].filter(u=>!!u),issueData:{code:G.invalid_return_type,returnTypeError:l}})}let o={errorMap:r.common.contextualErrorMap},a=r.data;if(this._def.returns instanceof vo){let p=this;return ar(async function(...l){let u=new $r([]),d=await p._def.args.parseAsync(l,o).catch(x=>{throw u.addIssue(n(l,x)),u}),m=await Reflect.apply(a,this,d);return await p._def.returns._def.type.parseAsync(m,o).catch(x=>{throw u.addIssue(i(m,x)),u})})}else{let p=this;return ar(function(...l){let u=p._def.args.safeParse(l,o);if(!u.success)throw new $r([n(l,u.error)]);let d=Reflect.apply(a,this,u.data),m=p._def.returns.safeParse(d,o);if(!m.success)throw new $r([i(d,m.error)]);return m.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:ti.create(e).rest(Oi.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||ti.create([]).rest(Oi.create()),returns:r||Oi.create(),typeName:me.ZodFunction,...Te(n)})}},ys=class extends Se{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};ys.create=(t,e)=>new ys({getter:t,typeName:me.ZodLazy,...Te(e)});var xs=class extends Se{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return X(r,{received:r.data,code:G.invalid_literal,expected:this._def.value}),ge}return{status:"valid",value:e.data}}get value(){return this._def.value}};xs.create=(t,e)=>new xs({value:t,typeName:me.ZodLiteral,...Te(e)});function ID(t,e){return new Ts({values:t,typeName:me.ZodEnum,...Te(e)})}var Ts=class t extends Se{constructor(){super(...arguments),Fp.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return X(r,{expected:Oe.joinValues(n),received:r.parsedType,code:G.invalid_type}),ge}if(Nm(this,Fp,"f")||PD(this,Fp,new Set(this._def.values),"f"),!Nm(this,Fp,"f").has(e.data)){let r=this._getOrReturnCtx(e),n=this._def.values;return X(r,{received:r.data,code:G.invalid_enum_value,options:n}),ge}return ar(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}};Fp=new WeakMap;Ts.create=ID;var Ss=class extends Se{constructor(){super(...arguments),Cp.set(this,void 0)}_parse(e){let r=Oe.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==J.string&&n.parsedType!==J.number){let i=Oe.objectValues(r);return X(n,{expected:Oe.joinValues(i),received:n.parsedType,code:G.invalid_type}),ge}if(Nm(this,Cp,"f")||PD(this,Cp,new Set(Oe.getValidEnumValues(this._def.values)),"f"),!Nm(this,Cp,"f").has(e.data)){let i=Oe.objectValues(r);return X(n,{received:n.data,code:G.invalid_enum_value,options:i}),ge}return ar(e.data)}get enum(){return this._def.values}};Cp=new WeakMap;Ss.create=(t,e)=>new Ss({values:t,typeName:me.ZodNativeEnum,...Te(e)});var vo=class extends Se{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==J.promise&&r.common.async===!1)return X(r,{code:G.invalid_type,expected:J.promise,received:r.parsedType}),ge;let n=r.parsedType===J.promise?r.data:Promise.resolve(r.data);return ar(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}};vo.create=(t,e)=>new vo({type:t,typeName:me.ZodPromise,...Te(e)});var jr=class extends Se{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===me.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,o={addIssue:a=>{X(n,a),a.fatal?r.abort():r.dirty()},get path(){return n.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){let a=i.transform(n.data,o);if(n.common.async)return Promise.resolve(a).then(async p=>{if(r.value==="aborted")return ge;let l=await this._def.schema._parseAsync({data:p,path:n.path,parent:n});return l.status==="aborted"?ge:l.status==="dirty"||r.value==="dirty"?Ba(l.value):l});{if(r.value==="aborted")return ge;let p=this._def.schema._parseSync({data:a,path:n.path,parent:n});return p.status==="aborted"?ge:p.status==="dirty"||r.value==="dirty"?Ba(p.value):p}}if(i.type==="refinement"){let a=p=>{let l=i.refinement(p,o);if(n.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return p};if(n.common.async===!1){let p=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return p.status==="aborted"?ge:(p.status==="dirty"&&r.dirty(),a(p.value),{status:r.value,value:p.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(p=>p.status==="aborted"?ge:(p.status==="dirty"&&r.dirty(),a(p.value).then(()=>({status:r.value,value:p.value}))))}if(i.type==="transform")if(n.common.async===!1){let a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Op(a))return a;let p=i.transform(a.value,o);if(p instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:p}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>Op(a)?Promise.resolve(i.transform(a.value,o)).then(p=>({status:r.value,value:p})):a);Oe.assertNever(i)}};jr.create=(t,e,r)=>new jr({schema:t,typeName:me.ZodEffects,effect:e,...Te(r)});jr.createWithPreprocess=(t,e,r)=>new jr({schema:e,effect:{type:"preprocess",transform:t},typeName:me.ZodEffects,...Te(r)});var mn=class extends Se{_parse(e){return this._getType(e)===J.undefined?ar(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};mn.create=(t,e)=>new mn({innerType:t,typeName:me.ZodOptional,...Te(e)});var ri=class extends Se{_parse(e){return this._getType(e)===J.null?ar(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};ri.create=(t,e)=>new ri({innerType:t,typeName:me.ZodNullable,...Te(e)});var vs=class extends Se{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===J.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};vs.create=(t,e)=>new vs({innerType:t,typeName:me.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Te(e)});var bs=class extends Se{_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Np(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new $r(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new $r(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};bs.create=(t,e)=>new bs({innerType:t,typeName:me.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Te(e)});var Ga=class extends Se{_parse(e){if(this._getType(e)!==J.nan){let n=this._getOrReturnCtx(e);return X(n,{code:G.invalid_type,expected:J.nan,received:n.parsedType}),ge}return{status:"valid",value:e.data}}};Ga.create=t=>new Ga({typeName:me.ZodNaN,...Te(t)});var Z8=Symbol("zod_brand"),Lp=class extends Se{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},Up=class t extends Se{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let o=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?ge:o.status==="dirty"?(r.dirty(),Ba(o.value)):this._def.out._parseAsync({data:o.value,path:n.path,parent:n})})();{let i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?ge:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:me.ZodPipeline})}},ws=class extends Se{_parse(e){let r=this._def.innerType._parse(e),n=i=>(Op(i)&&(i.value=Object.freeze(i.value)),i);return Np(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}};ws.create=(t,e)=>new ws({innerType:t,typeName:me.ZodReadonly,...Te(e)});function FD(t,e={},r){return t?So.create().superRefine((n,i)=>{var o,a;if(!t(n)){let p=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,l=(a=(o=p.fatal)!==null&&o!==void 0?o:r)!==null&&a!==void 0?a:!0,u=typeof p=="string"?{message:p}:p;i.addIssue({code:"custom",...u,fatal:l})}}):So.create()}var Y8={object:kr.lazycreate},me;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(me||(me={}));var X8=(t,e={message:`Input not instance of ${t.name}`})=>FD(r=>r instanceof t,e),CD=To.create,OD=ps.create,J8=Ga.create,e7=ls.create,ND=us.create,t7=fs.create,r7=$a.create,n7=ds.create,i7=ms.create,o7=So.create,s7=Oi.create,a7=Fn.create,c7=ja.create,p7=Ni.create,l7=kr.create,u7=kr.strictCreate,f7=hs.create,d7=Lm.create,m7=gs.create,h7=ti.create,g7=Um.create,y7=qa.create,x7=za.create,T7=Hm.create,S7=ys.create,v7=xs.create,b7=Ts.create,w7=Ss.create,_7=vo.create,RD=jr.create,E7=mn.create,R7=ri.create,k7=jr.createWithPreprocess,P7=Up.create,M7=()=>CD().optional(),A7=()=>OD().optional(),D7=()=>ND().optional(),I7={string:t=>To.create({...t,coerce:!0}),number:t=>ps.create({...t,coerce:!0}),boolean:t=>us.create({...t,coerce:!0}),bigint:t=>ls.create({...t,coerce:!0}),date:t=>fs.create({...t,coerce:!0})},F7=ge,$e=Object.freeze({__proto__:null,defaultErrorMap:Wa,setErrorMap:F8,getErrorMap:Cm,makeIssue:Om,EMPTY_PATH:C8,addIssueToContext:X,ParseStatus:Qt,INVALID:ge,DIRTY:Ba,OK:ar,isAborted:Sv,isDirty:vv,isValid:Op,isAsync:Np,get util(){return Oe},get objectUtil(){return Tv},ZodParsedType:J,getParsedType:xo,ZodType:Se,datetimeRegex:DD,ZodString:To,ZodNumber:ps,ZodBigInt:ls,ZodBoolean:us,ZodDate:fs,ZodSymbol:$a,ZodUndefined:ds,ZodNull:ms,ZodAny:So,ZodUnknown:Oi,ZodNever:Fn,ZodVoid:ja,ZodArray:Ni,ZodObject:kr,ZodUnion:hs,ZodDiscriminatedUnion:Lm,ZodIntersection:gs,ZodTuple:ti,ZodRecord:Um,ZodMap:qa,ZodSet:za,ZodFunction:Hm,ZodLazy:ys,ZodLiteral:xs,ZodEnum:Ts,ZodNativeEnum:Ss,ZodPromise:vo,ZodEffects:jr,ZodTransformer:jr,ZodOptional:mn,ZodNullable:ri,ZodDefault:vs,ZodCatch:bs,ZodNaN:Ga,BRAND:Z8,ZodBranded:Lp,ZodPipeline:Up,ZodReadonly:ws,custom:FD,Schema:Se,ZodSchema:Se,late:Y8,get ZodFirstPartyTypeKind(){return me},coerce:I7,any:o7,array:p7,bigint:e7,boolean:ND,date:t7,discriminatedUnion:d7,effect:RD,enum:b7,function:T7,instanceof:X8,intersection:m7,lazy:S7,literal:v7,map:y7,nan:J8,nativeEnum:w7,never:a7,null:i7,nullable:R7,number:OD,object:l7,oboolean:D7,onumber:A7,optional:E7,ostring:M7,pipeline:P7,preprocess:k7,promise:_7,record:g7,set:x7,strictObject:u7,string:CD,symbol:r7,transformer:RD,tuple:h7,undefined:n7,union:f7,unknown:s7,void:c7,NEVER:F7,ZodIssueCode:G,quotelessJson:I8,ZodError:$r});function LD(t){let e=t.operands.map(wv).join(" ");return`(#${t.operator} ${e})`}function wv(t){return t.type==="capture"?`@${t.name}`:t.value}function UD(t,e){return e.errors.filter(r=>!(r.code==="invalid_type"&&r.path.length===2&&(r.path[1]==="name"||r.path[1]==="value"))).map(r=>C7(t,r))}function C7(t,e){if(e.path.length===0)return e.code==="too_small"?"Too few arguments":e.code==="too_big"?"Too many arguments":e.message;let r=e.message;e.code==="invalid_literal"&&e.path[1]==="type"&&(r=e.expected==="capture"?"Capture names must be prefixed with @":"Expected string, but received capture");let n=e.path[0],i=wv(t[n]);return`Error on argument ${n} (\`${i}\`): ${r}`}var cr=class{allowMissingNode(){return!1}createPredicate(e){let r=this.schema.safeParse(e);return r.success?{success:!0,predicate:n=>{try{let i=this.constructAcceptArgs(r.data,n);return this.run(...i)}catch(i){if(i instanceof Vm&&this.allowMissingNode())return!0;throw i}}}:{success:!1,errors:UD(e,r.error)}}constructAcceptArgs(e,r){return e.map(n=>{if(n.type==="capture"){let i=r.captures.find(o=>o.name===n.name);if(i==null)throw new Vm(n.name);return i}else return n.value})}},Vm=class extends Error{constructor(e){super(`Could not find capture ${e}`)}};var _v=$e.object({type:$e.literal("string"),value:$e.string()}),we={node:$e.object({type:$e.literal("capture"),name:$e.string()}),string:_v,integer:_v.transform((t,e)=>{let r=parseInt(t.value);return isNaN(r)?(e.addIssue({code:$e.ZodIssueCode.custom,message:"Expected an integer"}),$e.NEVER):{type:"integer",value:r}}),boolean:_v.transform((t,e)=>t.value==="true"?{type:"boolean",value:!0}:t.value==="false"?{type:"boolean",value:!1}:(e.addIssue({code:$e.ZodIssueCode.custom,message:"Expected true or false"}),$e.NEVER))};var Ev=class extends cr{constructor(){super(...arguments);this.name="not-type?";this.schema=$e.tuple([we.node,we.string]).rest(we.string)}run({node:r},...n){return!n.includes(r.type)}},Rv=class extends cr{constructor(){super(...arguments);this.name="not-parent-type?";this.schema=$e.tuple([we.node,we.string]).rest(we.string)}run({node:r},...n){return r.parent==null||!n.includes(r.parent.type)}},kv=class extends cr{constructor(){super(...arguments);this.name="is-nth-child?";this.schema=$e.tuple([we.node,we.integer])}run({node:r},n){return r.parent?.children.findIndex(i=>i.id===r.id)===n}},Pv=class extends cr{constructor(){super(...arguments);this.name="has-multiple-children-of-type?";this.schema=$e.tuple([we.node,we.string])}run({node:r},n){return r.children.filter(o=>o.type===n).length>1}},Mv=class extends cr{constructor(){super(...arguments);this.name="child-range!";this.schema=$e.union([$e.tuple([we.node,we.integer]),$e.tuple([we.node,we.integer,we.integer]),$e.tuple([we.node,we.integer,we.integer,we.boolean]),$e.tuple([we.node,we.integer,we.integer,we.boolean,we.boolean])])}run(r,n,i,o,a){let{node:{children:p}}=r;n=n<0?p.length+n:n,i=i??-1,i=i<0?p.length+i:i;let l=p[n],u=p[i];return r.range=dn(o?l.endPosition:l.startPosition,a?u.startPosition:u.endPosition),!0}},Av=class extends cr{constructor(){super(...arguments);this.name="character-range!";this.schema=$e.union([$e.tuple([we.node,we.integer]),$e.tuple([we.node,we.integer,we.integer])])}run(r,n,i){return r.range=new W(r.range.start.translate(void 0,n),r.range.end.translate(void 0,i??0)),!0}},Dv=class extends cr{constructor(){super(...arguments);this.name="shrink-to-match!";this.schema=$e.tuple([we.node,we.string])}run(r,n){let{document:i,range:o}=r,p=i.getText(o).match(new RegExp(n,"ds"));if(p?.index==null)throw Error(`No match for pattern '${n}'`);let[l,u]=p.indices?.groups?.keep??p.indices[0],d=i.offsetAt(o.start);return r.range=new W(i.positionAt(d+l),i.positionAt(d+u)),!0}},Iv=class extends cr{constructor(){super(...arguments);this.name="trim-end!";this.schema=$e.tuple([we.node])}run(r){let{document:n,range:i}=r,o=n.getText(i),a=o.length-o.trimEnd().length;return a>0&&(r.range=new W(i.start,Ok(n,i.end,-a))),!0}},Fv=class extends cr{constructor(){super(...arguments);this.name="allow-multiple!";this.schema=$e.tuple([we.node])}allowMissingNode(){return!0}run(r){return r.allowMultiple=!0,!0}},Cv=class extends cr{constructor(){super(...arguments);this.name="log!";this.schema=$e.tuple([we.node])}run(r){return console.log(`#log!: ${r.name}@${r.range}`),!0}},Ov=class extends cr{constructor(){super(...arguments);this.name="insertion-delimiter!";this.schema=$e.tuple([we.node,we.string])}run(r,n){return r.insertionDelimiter=n,!0}},Nv=class extends cr{constructor(){super(...arguments);this.name="single-or-multi-line-delimiter!";this.schema=$e.tuple([we.node,we.node,we.string,we.string])}run(r,n,i,o){return r.insertionDelimiter=n.range.isSingleLine?i:o,!0}},HD=[new Cv,new Ev,new Iv,new Rv,new kv,new Mv,new Av,new Dv,new Fv,new Ov,new Nv,new Pv];function VD(t){let e=[],r=[];return t.forEach((n,i)=>{let o=[];n.forEach((a,p)=>{let l=HD.find(({name:d})=>d===a.operator);if(l==null){e.push({patternIdx:i,predicateIdx:p,error:`Unknown predicate operator "${a.operator}"`});return}let u=l.createPredicate(a.operands);if(!u.success){e.push(...u.errors.map(d=>({patternIdx:i,predicateIdx:p,error:d})));return}o.push(u.predicate)}),r.push(o)}),{errors:e,predicates:r}}function BD(t,e){let{errors:r,predicates:n}=VD(e.predicates);if(r.length>0){for(let i of r){let o=[`language ${t}`,`pattern ${i.patternIdx}`,`predicate \`${LD(e.predicates[i.patternIdx][i.predicateIdx])}\``].join(", ");st(k().messages,"TreeSitterQuery.parsePredicates",`Error parsing predicate for ${o}: ${i.error}`)}if(k().runMode==="test")throw new Error("Invalid predicates")}return n}function Lv(t){return{row:t.line,column:t.character}}function WD(t){return t.map(e=>({...e,range:Uv(e),name:O7(e)}))}function Uv(t){return t.name.endsWith(".startOf")?t.range.start.toEmptyRange():t.name.endsWith(".endOf")?t.range.end.toEmptyRange():t.range}function O7(t){return t.name.endsWith(".startOf")?t.name.slice(0,-8):t.name.endsWith(".endOf")?t.name.slice(0,-6):t.name}var Hv=class{constructor(){this.documentVersion=-1;this.documentUri="";this.documentLanguageId="";this.matches=[]}clear(){this.documentUri="",this.documentVersion=-1,this.documentLanguageId="",this.startPosition=void 0,this.endPosition=void 0,this.matches=[]}isValid(e,r,n){return this.documentVersion===e.version&&this.documentUri===e.uri.toString()&&this.documentLanguageId===e.languageId&&$D(this.startPosition,r)&&$D(this.endPosition,n)}update(e,r,n,i){this.documentVersion=e.version,this.documentUri=e.uri.toString(),this.documentLanguageId=e.languageId,this.startPosition=r,this.endPosition=n,this.matches=i}get(){return this.matches}};function $D(t,e){return t==null||e==null?t===e:t.isEqual(e)}var _s=new Hv;var Hp=class t{constructor(e,r,n){this.treeSitter=e;this.query=r;this.patternPredicates=n;this.shouldCheckCaptures=k().runMode!=="production"}static create(e,r,n){let i=BD(e,n);return new t(r,n,i)}hasCapture(e){return this.query.captureNames.some(r=>yv(r)===e)}matches(e,r,n){if(!_s.isValid(e,r,n)){let i=this.getAllMatches(e,r,n);_s.update(e,r,n,i)}return _s.get()}getAllMatches(e,r,n){let i=this.getTreeMatches(e,r,n),o=[];for(let a of i){let p=this.createMutableQueryMatch(e,a);this.runPredicates(p)&&o.push(this.createQueryMatch(p))}return o}getTreeMatches(e,r,n){let{rootNode:i}=this.treeSitter.getTree(e);return this.query.matches(i,{startPosition:r!=null?Lv(r):void 0,endPosition:n!=null?Lv(n):void 0})}createMutableQueryMatch(e,r){return{patternIdx:r.pattern,captures:r.captures.map(({name:n,node:i})=>({name:n,node:i,document:e,range:yD(i),insertionDelimiter:void 0,allowMultiple:!1,hasError:()=>_D(i)}))}}runPredicates(e){for(let r of this.patternPredicates[e.patternIdx])if(!r(e))return!1;return!0}createQueryMatch(e){let r=[],n=new Map;for(let i of e.captures){let o=yv(i.name),a=Uv(i),p=n.get(o);if(p==null){let l=[i],u={...i,name:o,range:a,hasError:()=>l.some(d=>d.hasError())};r.push(u),n.set(o,{acc:u,captures:l})}else p.acc.range=p.acc.range.union(a),p.acc.allowMultiple=p.acc.allowMultiple||i.allowMultiple,p.acc.insertionDelimiter=p.acc.insertionDelimiter??i.insertionDelimiter,p.captures.push(i)}return this.shouldCheckCaptures&&this.checkCaptures(Array.from(n.values())),{captures:r}}checkCaptures(e){for(let r of e)if(!wD(WD(r.captures),k().messages)&&k().runMode==="test")throw new Error("Invalid captures")}};var qD="_",N7=[qD,"interior",...Jo],L7=["prefix","leading","trailing"],U7=["startOf","endOf","start.startOf","start.endOf","end.startOf","end.endOf"],H7=["domain","removal","iteration","iteration.domain"],jD=["start","end","start.startOf","start.endOf","end.startOf","end.endOf"],Es=new Set;for(let t of N7){if(t!==qD){Es.add(t);for(let e of jD)Es.add(`${t}.${e}`)}for(let e of L7){Es.add(`${t}.${e}`);for(let r of U7)Es.add(`${t}.${e}.${r}`)}for(let e of H7){Es.add(`${t}.${e}`);for(let r of jD)Es.add(`${t}.${e}.${r}`)}}var V7=/^(?!;;).*(?<!"\w*)@([\w.]*)/gm;function zD(t,e){let r=e.matchAll(V7),n=[];for(let o of r){let a=o[1];if(!(a.length>1&&!a.includes(".")&&a.startsWith("_"))&&!Es.has(a)){let p=o.input.slice(0,o.index).split(`
`).length;n.push(`${t}(${p}) invalid capture '@${a}'.`)}}if(n.length===0)return;let i=n.join(`
`);if(st(k().messages,"validateQueryCaptures.invalidCaptureName",i),k().runMode==="test")throw new Error(i)}var Bm=class t{constructor(e){this.query=e}static async create(e,r,n,i){let o=await B7(e,r,`${i}.scm`);if(o==null||!await n.loadLanguage(i))return;let a=n.getLanguage(i).query(o),p=Hp.create(i,n,a);return new t(p)}getScopeHandler(e){if(this.query.hasCapture(e.type))return new dm(this.query,e)}getCapturesMap(e){let r=this.query.matches(e),n={};for(let i of r)for(let o of i.captures){let a=o.name;n[a]==null&&(n[a]=[]),n[a].push(o)}return n}};async function B7(t,e,r){let n={[r]:null},i=t.runMode!=="production";for(;Object.values(n).some(o=>o==null);)for(let[o,a]of Object.entries(n)){if(a!=null)continue;let p=await e.readQuery(o);if(p==null){if(o===r)return;if(st(t.messages,"LanguageDefinition.readQueryFileAndImports.queryNotFound",`Could not find imported query file ${o}`),t.runMode==="test")throw new Error("Invalid import statement");p=""}i&&zD(o,p),n[o]=p,sn(p,/^[^\S\r\n]*;;?[^\S\r\n]*(?:import|include)[^\S\r\n]+['"]?([\w|/\\.]+)['"]?[^\S\r\n]*$/gm,l=>{let u=l[1];i&&W7(t,o,u,l[0]),n[u]=n[u]??null})}return Object.values(n).join(`
`)}function W7(t,e,r,n){let i=!1;/[/\\]/g.test(r)&&(st(t.messages,"LanguageDefinition.readQueryFileAndImports.invalidImport",`Invalid import statement in ${e}: "${n}". Relative import paths not supported`),i=!0);let o=`;; import ${r}`;if(n!==o&&(st(t.messages,"LanguageDefinition.readQueryFileAndImports.malformedImport",`Malformed import statement in ${e}: "${n}". Import statements must be of the form "${o}"`),i=!0),i&&t.runMode==="test")throw new Error("Invalid import statement")}var GD=Symbol("LANGUAGE_UNDEFINED"),Wm=class t{constructor(e,r,n){this.ide=e;this.treeSitter=r;this.treeSitterQueryProvider=n;this.notifier=new qt;this.languageDefinitions=new Map;this.disposables=[];this.onDidChangeDefinition=this.notifier.registerListener;let i=e.runMode==="test";e.onDidOpenTextDocument(o=>{i&&_s.clear(),this.loadLanguage(o.languageId)}),e.onDidChangeVisibleTextEditors(o=>{o.forEach(({document:a})=>this.loadLanguage(a.languageId))}),this.disposables.push(n.onChanges(()=>this.reloadLanguageDefinitions()))}static async create(e,r,n){let i=new t(e,r,n);return await i.loadAllLanguages(),i}async loadAllLanguages(){let e=this.ide.visibleTextEditors.map(({document:r})=>r.languageId);try{await Promise.all(e.map(r=>this.loadLanguage(r)))}catch(r){if(st(this.ide.messages,"Failed to load language definitions",An(r)),this.ide.runMode==="test")throw r}}async loadLanguage(e){if(this.languageDefinitions.has(e))return;let r=await Bm.create(this.ide,this.treeSitterQueryProvider,this.treeSitter,e)??GD;this.languageDefinitions.set(e,r)}async reloadLanguageDefinitions(){this.languageDefinitions.clear(),await this.loadAllLanguages(),_s.clear(),this.notifier.notifyListeners()}get(e){let r=this.languageDefinitions.get(e);if(r==null)throw new Error("Expected language definition entry is missing for languageId "+e);return r===GD?void 0:r}getNodeAtLocation(e,r){return this.treeSitter.getNodeAtLocation(e,r)}dispose(){this.disposables.forEach(e=>e.dispose())}};var $m=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}get nestedStages(){return this.nestedStages_==null&&(this.nestedStages_=this.modifier.modifiers.map(this.modifierStageFactory.create)),this.nestedStages_}run(e){for(let r of this.nestedStages)try{return r.run(e)}catch{continue}throw new Error("No modifier could be applied")}};var Ka=class{constructor(e,r){this.modifierStageFactory=e;this.nestedModifier=r;this.suppressErrors=!1}run(e){if(this.shouldModify(e))try{return this.nestedStage.run(e).map(r=>r.withThatTarget(e))}catch(r){if(!this.suppressErrors)throw r}return[e]}get nestedStage(){return this.nestedStage_==null&&(this.nestedStage_=this.modifierStageFactory.create(this.nestedModifier)),this.nestedStage_}},bo=class extends Ka{constructor(e,r){super(e,r.modifier)}shouldModify(e){return!e.hasExplicitScopeType}},jm=class extends Ka{constructor(r,n,i){super(r,n);this.modificationCondition=i}shouldModify(r){return this.modificationCondition(r)}},Qa=class extends Ka{shouldModify(e){return!e.hasExplicitScopeType&&!e.isImplicit}},Za=class extends Ka{constructor(r){super(r,{type:"containingScope",scopeType:{type:"token"}});this.suppressErrors=!0}shouldModify(r){return!r.hasExplicitScopeType&&!r.hasExplicitRange&&r.contentRange.isEmpty}};function KD(t,e){return Object.getPrototypeOf(t).constructor===Object.getPrototypeOf(e).constructor}function Ya(t,e,r,n,i){if(e.editor!==r.editor)throw Error("Continuous targets must be in the same editor");if(n&&i&&KD(e,r)){let o=e.maybeCreateRichRangeTarget(t,r);if(o!=null)return o}return e.textualType==="line"&&r.textualType==="line"?new sr({editor:e.editor,isReversed:t,contentRange:Ra(e,r,n,i)}):new At({editor:e.editor,isReversed:t,hasExplicitRange:!0,contentRange:Ea(e,r,n,i),textualType:n&&i&&e.textualType==="token"&&r.textualType==="token"?"token":"character"})}function qm(t,e,r){if(e===r)return e.getTargets(t);let n=e.getTargets(t),i=r.getTargets(t);if(n.length!==1||i.length!==1)throw Error("Scope range targets must be single-target");let[o]=n,[a]=i,p=a.contentRange.start.isAfterOrEqual(o.contentRange.start),[l,u]=p?[o,a]:[a,o];return[Ya(t,l,u,!0,!0)]}function zm(t,e,r,n){let i=Array.from(t.generateScopes(e,r,"forward",{containment:"required",allowAdjacentScopes:!0,skipAncestorScopes:!0}));switch(i.length){case 0:return;case 1:return i[0];case 2:{let[o,a]=i;return n==="forward"?a:n==="backward"||(t.isPreferredOver?.(o,a)??!1)?o:a}default:throw new Error("Expected no more than 2 scope candidates")}}function Gm(t,e,r=0){let{isReversed:n,editor:i,contentRange:{start:o,end:a}}=t;if(a.isEqual(o)){let u=zm(e,i,o);return u==null||(r>0&&(u=Vv(e,i,u.domain.end,"forward",r,!0)),u==null)?void 0:u.getTargets(n)}let p=Vv(e,i,o,"forward",r);if(p==null)return;if(p.domain.contains(a))return p.getTargets(n);let l=Vv(e,i,a,"backward",r);if(l!=null)return qm(n,p,l)}function Vv(t,e,r,n,i,o=!1){let a=0;for(let p of t.generateScopes(e,r,n,{containment:"required",allowAdjacentScopes:o})){if(a===i)return p;a+=1}}var Xa=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let{scopeType:r,ancestorIndex:n=0}=this.modifier,i=this.scopeHandlerFactory.maybeCreate(r,e.editor.document.languageId);if(i==null)return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e);let o=Gm(e,i,n);if(o==null)throw new ut(r.type);return o}};var Km=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let{scopeType:r}=this.modifier,{editor:n,isReversed:i}=e,o=this.scopeHandlerFactory.maybeCreate(r,n.document.languageId);if(o==null)return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e);let a;if(e.hasExplicitRange&&(a=QD(o,n,e.contentRange),a.length===1&&a[0].domain.contains(e.contentRange)&&!e.hasExplicitScopeType&&(a=void 0)),a==null&&(a=this.getDefaultIterationRange(o,this.scopeHandlerFactory,e).flatMap(p=>QD(o,n,p))),a.length===0)throw new ut(r.type);return a.flatMap(p=>p.getTargets(i))}getDefaultIterationRange(e,r,n){let i=r.maybeCreate(e.iterationScopeType,n.editor.document.languageId);if(i==null)throw Error("Could not find iteration scope handler");let o=Gm(n,i);if(o==null)throw new ut(`iteration scope for ${e.scopeType.type}`);return o.map(a=>a.contentRange)}};function QD(t,e,{start:r,end:n}){return Array.from(t.generateScopes(e,r,"forward",{distalPosition:n,skipAncestorScopes:!0,allowAdjacentScopes:t.includeAdjacentInEvery}))}var Qm=class{constructor(e){this.modifier=e}run(e){return e.contentText.trim()!==""?[e]:[]}},Zm=class{constructor(e){this.modifier=e}run(e){return e.contentText.trim()===""?[e]:[]}};var Ym=class{run(){return Nd(k()).map(e=>new Fd({editor:e.editor,isReversed:e.selection.isReversed,contentRange:e.selection}))}};var Xm=class{constructor(e,r){this.modifierStageFactory=e;this.markStageFactory=r}run(e,{actionFinalStages:r=[],noAutomaticTokenExpansion:n=!1}={}){return new Bv(this.modifierStageFactory,this.markStageFactory,e,{actionFinalStages:r,noAutomaticTokenExpansion:n}).run()}},Bv=class{constructor(e,r,n,i){this.modifierStageFactory=e;this.markStageFactory=r;this.target=n;this.opts=i}run(){return j7(this.processTarget(this.target))}processTarget(e){switch(e.type){case"list":return e.elements.flatMap(r=>this.processTarget(r));case"range":return this.processRangeTarget(e);case"primitive":case"implicit":return this.processPrimitiveTarget(e)}}processRangeTarget(e){let r=this.processPrimitiveTarget(e.anchor),n=this.processPrimitiveTarget(e.active);return wt(r,n).flatMap(([i,o])=>{if(i==null||o==null)throw new Error("AnchorTargets and activeTargets lengths don't match");switch(e.rangeType){case"continuous":return this.processContinuousRangeTarget(i,o,e);case"vertical":return q7(i,o,e.excludeAnchor,e.excludeActive)}})}processContinuousRangeTarget(e,r,{excludeAnchor:n,excludeActive:i,exclusionScopeType:o}){if(o==null)return[wo(e,r,n,i)];let a=jv(e,r);return[wo(n?ZD(this.modifierStageFactory,e,o,a?"backward":"forward"):e,i?ZD(this.modifierStageFactory,r,o,a?"forward":"backward"):r,!1,!1)]}processPrimitiveTarget(e){let r,n,i=!1;e.type==="implicit"?(r=new Ym,n=[]):(r=this.markStageFactory.create(e.mark),n=Wv(this.modifierStageFactory,e.modifiers),i=$7(e));let o=r.run(),[a,p]=this.getPreAndPostStages(i),l=[...a,...n,...this.opts.actionFinalStages,...p];return $v(l,o)}getPreAndPostStages(e){if(this.opts.noAutomaticTokenExpansion)return[[],[]];let r=new Za(this.modifierStageFactory);return e?[[r],[]]:[[],[r]]}};function $7(t){return t.modifiers.length>0&&t.modifiers.every(({type:e})=>e==="startOf"||e==="endOf")}function Wv(t,e){return e.map(t.create).reverse()}function $v(t,e){return t.forEach(r=>{e=e.flatMap(n=>r.run(n))}),e}function ZD(t,e,r,n){return t.create({type:"relativeScope",scopeType:r,direction:n,length:1,offset:1}).run(e)[0]}function jv(t,e){return t.contentRange.start.isAfter(e.contentRange.start)?!0:t.contentRange.start.isBefore(e.contentRange.start)?!1:t.contentRange.end.isAfter(e.contentRange.end)}function j7(t){return HP(t,(e,r)=>e.isEqual(r),e=>e.contentRange.concise())}function YD(t,e){if(t.editor!==e.editor)throw new Error("Cannot form range between targets in different editors")}function wo(t,e,r=!1,n=!1){YD(t,e);let i=jv(t,e);return Ya(i,i?e:t,i?t:e,!(i?n:r),!(i?r:n))}function q7(t,e,r,n){YD(t,e);let i=jv(t,e),o=i?-1:1,p=(i?t.contentRange.start:t.contentRange.end).line+(r?o:0),u=(i?e.contentRange.start:e.contentRange.end).line-(n?o:0),d=[];for(let m=p;;m+=o){let g=new W(m,t.contentRange.start.character,m,t.contentRange.end.character);if(d.push(new Be({editor:t.editor,isReversed:t.isReversed,contentRange:g,insertionDelimiter:t.insertionDelimiter})),m===u)return d}}var Jm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=this.getModifierStages(),n=$v(r,[e]),i=this.modifier.type==="extendThroughStartOf";return n.map(o=>new Cd({editor:e.editor,isReversed:i,inputTarget:e,modifiedTarget:o,isHead:i}))}getModifierStages(){return this.modifier.modifiers!=null?Wv(this.modifierStageFactory,this.modifier.modifiers):[new qv(this.modifierStageFactory,this.modifier)]}},qv=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=this.getContainingLine(e),n=this.getContainingPairInterior(e),i=n!=null?r.contentRange.intersection(n.contentRange):null;return i==null||i.isEmpty?[r]:[new Be({editor:e.editor,isReversed:e.isReversed,contentRange:i})]}getContainingPairInterior(e){try{return this.getContaining(e,{type:"surroundingPairInterior",delimiter:"any"})[0]}catch(r){if(r instanceof ut)return;throw r}}getContainingLine(e){return this.getContaining(e,{type:"line"})[0]}getContaining(e,r){return this.modifierStageFactory.create({type:"containingScope",scopeType:r}).run(e)}};var ni=class extends Error{constructor(e,r){let n=r!=null?` #${r+1}`:"";super(`Scope '${e.type}'${n} is out of range`),this.name="OutOfRangeError"}};function XD(t,e,r,n){return zv(t,e,r,n),e.slice(r,n+1)}function zv(t,e,r,n){if(r<0||r>=e.length)throw new ni(t,r);if(n<0||n>=e.length)throw new ni(t,n)}var Ja=class{constructor(e,r,n){this.modifierStageFactory=e;this.storedTargets=r;this.modifier=n}run(e){let r=new Za(this.modifierStageFactory).run(e)[0];switch(this.modifier.type){case"everyScope":return this.handleEveryScope(r);case"ordinalScope":return this.handleOrdinalScope(r,this.modifier);case"relativeScope":return this.handleRelativeScope(r,this.modifier);default:throw Error(`${this.modifier.type} instance scope not supported`)}}handleEveryScope(e){return Array.from(rm(this.getEveryRanges(e),([r,n])=>this.getTargetIterable(e,r,n,"forward")))}handleOrdinalScope(e,{start:r,length:n,scopeType:i}){return this.getEveryRanges(e).flatMap(([o,a])=>JD(i,this.getTargetIterable(e,o,a,r>=0?"forward":"backward"),r>=0?r:-(n+r),n))}handleRelativeScope(e,{direction:r,offset:n,length:i,scopeType:o}){return(this.storedTargets.get("instanceReference")??[e]).flatMap(p=>{let{editor:l}=p,u=r==="forward"?new W(n===0?p.contentRange.start:p.contentRange.end,l.document.range.end):new W(l.document.range.start,n===0?p.contentRange.end:p.contentRange.start);return JD(o,this.getTargetIterable(e,l,u,r),n===0?0:n-1,i)})}getEveryRanges({editor:e}){return this.storedTargets.get("instanceReference")?.map(({editor:r,contentRange:n})=>[r,n])??[[e,e.document.range]]}getTargetIterable(e,r,n,i){let o=Ht(fn(new RegExp(Ur(e.contentText),"g"),r,n,i),p=>new Be({contentRange:p,editor:r,isReversed:!1,textualType:"character"})),a=z7(e);if(a!=null){let p=this.modifierStageFactory.create({type:"containingScope",scopeType:a});return em(Ht(o,l=>{try{let u=p.run(l);return u.length===1&&u[0].contentRange.isRangeEqual(l.contentRange)?u[0]:null}catch{return null}}),l=>l!=null)}return o}};function z7(t){switch(t.textualType){case"line":case"token":case"word":return{type:t.textualType};default:return null}}function JD(t,e,r,n){Array.from(Dp(r,e));let i=Array.from(Dp(n,e));if(i.length<n)throw new ni(t,r+n-1);return i}var eh=class{constructor(e,r){this.modifierHandlerFactory=e;this.modifier=r}run(e){let r=e.getInterior();return r??this.modifierHandlerFactory.create({type:"containingScope",scopeType:{type:"interior",explicitScopeType:e.hasExplicitScopeType}}).run(e)}},th=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r;this.containingSurroundingPairIfNoBoundaryStage=Gv(this.modifierStageFactory)}run(e){return this.containingSurroundingPairIfNoBoundaryStage.run(e).flatMap(r=>r.getBoundary())}};function Gv(t){return new jm(t,{type:"containingScope",scopeType:{type:"surroundingPair",delimiter:"any"}},e=>e.getBoundary()==null)}var ii={type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:{type:"line"}}},Kv={type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:{type:"token"}}};var rh=class extends Error{constructor(e){super(`Target has no ${e} delimiter.`),this.name="NoDelimiterError"}},nh=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){return this.modifierStageFactory.create(Kv).run(e).map(r=>{let n=r.getLeadingDelimiterTarget();if(n==null)throw new rh("leading");return n})}},ih=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){return this.modifierStageFactory.create(Kv).run(e).map(r=>{let n=r.getTrailingDelimiterTarget();if(n==null)throw new rh("trailing");return n})}};function oh(t,e,r,n,i){return zv(t,r,n,i),n===i?r[n]:Ya(e,r[n],r[i],!0,!0)}function sh(t,e,r){return t.create({type:"everyScope",scopeType:r}).run(e)}var ah=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=sh(this.modifierStageFactory,e,this.modifier.scopeType),n=this.modifier.start+(this.modifier.start<0?r.length:0),i=n+this.modifier.length-1;return this.modifier.isEvery?XD(this.modifier.scopeType,r,n,i):[oh(this.modifier.scopeType,e.isReversed,r,n,i)]}};var ch=class{run(e){let r={editor:e.editor,isReversed:e.isReversed,contentRange:this.getContentRange(e.contentRange)};return[e.isRaw?new fo(r):new Be({...r,textualType:"character"})]}},ph=class extends ch{getContentRange(e){return e.start.toEmptyRange()}},lh=class extends ch{getContentRange(e){return e.end.toEmptyRange()}};var uh=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let{scopeType:r}=this.modifier,n=new Xa(this.modifierStageFactory,this.scopeHandlerFactory,{type:"containingScope",scopeType:r});try{return n.run(e)}catch(a){if(!(a instanceof ut))throw a}let i=this.scopeHandlerFactory.create(this.modifier.scopeType,e.editor.document.languageId),o=G7(e,i);if(o==null)throw Error(`No scopes found for scope type: ${r.type}`);return o}};function G7(t,e){let r=e.generateScopes(t.editor,t.contentRange.start,"backward"),n=e.generateScopes(t.editor,t.contentRange.end,"forward"),{active:i}=t.contentSelection,o=eI(r,i),a=eI(n,i),p=o.distance<a.distance?o.scope:a.scope;return p?.getTargets(t.isReversed)}function eI(t,e){let r,n=1/0;for(let i of t){let o=Math.min(tI(e,i.domain.start),tI(e,i.domain.end));if(o<n)r=i,n=o;else break}return{scope:r,distance:n}}function tI(t,e){return Math.abs(t.line-e.line)*1e4+Math.abs(t.character-e.character)}var fh=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=this.modifierStageFactory.create(this.modifier.anchor),n=this.modifierStageFactory.create(this.modifier.active),i=r.run(e),o=n.run(e);if(i.length!==1||o.length!==1)throw new Error("Expected single anchor and active target");return[wo(i[0],o[0],this.modifier.excludeAnchor,this.modifier.excludeActive)]}};var dh=class{constructor(e){this.modifier=e}run(e){return[new fo({editor:e.editor,contentRange:e.contentRange,isReversed:e.isReversed})]}};var mh=class extends Error{constructor(e,r,n){super(`Requested ${e} ${n}s, but ${r} are already selected.`),this.name="TooFewScopesError"}};function rI(t,e,r){let n=sh(t,Y7(r),e.scopeType),i=Z7(r.contentRange,n);return K7(e,r,n,i)}function K7(t,e,r,n){let i=t.direction==="forward",o=Q7(t,e.contentRange,r,i,n),a=i?o+t.length-1:o-t.length+1,p=Math.min(o,a),l=Math.max(o,a);return[oh(t.scopeType,e.isReversed,r,p,l)]}function Q7(t,e,r,n,i){let o=t.offset===0;if(i==null){let l=n?r.findIndex(u=>u.contentRange.start.isAfter(e.start)):Ko(r,u=>u.contentRange.start.isBefore(e.start));if(l===-1)throw new ni(t.scopeType);return o?l:n?l+t.offset-1:l-t.offset+1}let a=i.start,p=i.end;if(o){let l=p-a+1;if(l>t.length)throw new mh(t.length,l,t.scopeType.type);return n?a:p}return n?p+t.offset:a-t.offset}function Z7(t,e){let r=e.map((i,o)=>({index:o,intersection:i.contentRange.intersection(t)})).filter(i=>i.intersection!=null);if(t.isEmpty){if(r.length===0)return;let i=r.at(-1).index;return{start:i,end:i}}let n=r.filter(i=>!i.intersection.isEmpty).map(i=>i.index);if(n.length!==0)return{start:n[0],end:n.at(-1)}}function Y7(t){return new At({editor:t.editor,isReversed:t.isReversed,contentRange:t.contentRange,hasExplicitRange:!1})}var hh=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let r=this.scopeHandlerFactory.maybeCreate(this.modifier.scopeType,e.editor.document.languageId);if(r==null)return rI(this.modifierStageFactory,this.modifier,e);let n=Array.from(this.modifier.offset===0?X7(r,e,this.modifier):J7(r,e,this.modifier));if(n.length<this.modifier.length)throw new ni(this.modifier.scopeType,this.modifier.offset+this.modifier.length-1);let{isReversed:i}=e;return this.modifier.isEvery?n.flatMap(o=>o.getTargets(i)):qm(i,n[0],n[n.length-1])}};function X7(t,e,r){let{editor:n,contentRange:i}=e,{length:o,direction:a}=r,p=zm(t,n,a==="forward"?i.start:i.end,a)?.domain;if(p==null)throw new ut(r.scopeType.type);return Dp(o,t.generateScopes(n,a==="forward"?p.start:p.end,a,{skipAncestorScopes:!0}))}function J7(t,e,r){let{editor:n,contentRange:i}=e,{length:o,direction:a,offset:p}=r,l=a==="forward"?i.end:i.start,u=i.isEmpty?"disallowed":"disallowedIfStrict";return NA(t.generateScopes(n,l,a,{containment:u,skipAncestorScopes:!0}),p-1,p+o-1)}var gh=class{constructor(e){this.modifier=e}run(e){return e.editor.visibleRanges.map(r=>new Be({editor:e.editor,isReversed:e.isReversed,contentRange:r}))}};function nI(...t){return e=>{let r=e;for(let n of t)if(r=n(r),r==null)return null;return r}}function iI(t,...e){return r=>{let n=r,i=[],o=[...e].reverse();for(let a of o){if(n==null||(n=a(n),n==null))return null;i.push(n),n=n.parent??null}return i.reverse()[t]}}var Qv=t=>new le(t.row,t.column),oI=(...t)=>{let e=["(","{","[","<"],r=[")","}","]",">"],n=e.concat(r),i=(a,p)=>a!=null&&p.includes(a.type),o=a=>a!=null&&!i(a,n);return(a,p)=>{let l,{start:u,end:d}=p;if(i(a.parent,t))return i(a,e)?l=a.nextNamedSibling:i(a,r)?l=a.previousNamedSibling:a.type===","?l=d.isBeforeOrEqual(Qv(a.startPosition))?a.previousNamedSibling:a.nextNamedSibling:l=a,o(l)?l:null;if(i(a,t)){let m=[...a.children],g=m.find(({startPosition:b})=>Qv(b).isAfterOrEqual(d))??null;if(o(g))return g;m.reverse();let x=m.find(({endPosition:b})=>Qv(b).isBeforeOrEqual(u))??null;if(o(x))return x}return null}};function Le(...t){let e=eQ(t);return r=>{for(let n of e){let i=tQ(r,n);if(i!=null)return i}return null}}function eQ(t){return t.map(e=>e.split(".").map(r=>new Zv(r)))}function tQ(t,e){let r=rQ(t,e);!r&&e.length>1&&(r=nQ(t,e));let n=null,i;return r!=null&&([n,i]=r),n!=null&&i!=null&&i.fields!=null&&i.fields.forEach(o=>{n=(o.isIndex?n?.namedChild(o.value):n?.childForFieldName(o.value))??null}),n}function rQ(t,e){let r=null,n=t;for(let i=e.length-1;i>-1;--i){let o=e[i];if(n==null||!o.typeEquals(n)){if(o.isOptional)continue;return null}(!r||!r[1].isImportant)&&(r=[n,o]),n=n.parent}return r}function nQ(t,e){let r=null,n=t;for(let i=0;i<e.length;++i){let o=e[i];if(n==null||!o.typeEquals(n)){if(o.isOptional)continue;return null}if((!r||o.isImportant)&&(r=[n,o]),i+1<e.length){let a=n.namedChildren.filter(p=>e[i+1].typeEquals(p));n=a.length===1?a[0]:null}}return r}var Zv=class{constructor(e){this.anyType=!1;this.notType=!1;this.type=e.match(/^[\w*~]+/)[0],this.type==="*"?this.anyType=!0:this.type.startsWith("~")&&(this.type=this.type.slice(1),this.notType=!0),this.isImportant=e.indexOf("!")>-1,this.isOptional=e.indexOf("?")>-1,this.fields=[...e.matchAll(/(?<=\[).+?(?=\])/g)].map(r=>r[0]).map(r=>/\d+/.test(r)?{isIndex:!0,value:Number(r)}:{isIndex:!1,value:r})}typeEquals(e){return this.anyType?!0:this.notType?this.type!==e.type:this.type===e.type}};function Ne(t,e=Jn){return function(r,n){let i=t(n,r.selection);return i!=null?[{node:i,selection:e(r.editor,i)}]:null}}function yh(t,e=Jn){let r=nI(...t);return function(n,i){let o=r(i);return o==null?null:[{node:o,selection:e(n.editor,o)}]}}function ec(t,e=0,r=Jn){return Ne(iI(e,...t),r)}function Rt(...t){return Ne(Le(...t))}function tc(...t){return Ne(oI(...t),TD())}function rc(...t){return Ne(Le(...t),SD)}function Cn(t,e=[]){return Ne(Le(...t),vD(...e))}function _o(t,e=[]){return Ne(Le(...t),bD(...e))}function gt(...t){return(e,r)=>{for(let n of t){let i=n(e,r);if(i!=null)return i}return null}}function sI(t){return(e,r)=>{throw new Error(`Node type '${t}' not supported`)}}function gn(t){return Object.freeze(Object.fromEntries(ki(t).map(e=>{let r=t[e];return Array.isArray(r)?[e,Rt(...r)]:typeof r=="string"?[e,Rt(r)]:[e,r]})))}function aI(t,e){let r=t.walk();r.gotoFirstChild();let n=[],i=!0;for(;i;)r.currentFieldName===e&&n.push(r.currentNode),i=r.gotoNextSibling();return n}function iQ(t,e){return lI(t,r=>Math.floor(r/2)*2+e)}function cI(t){return iQ(Le("map_lit"),t)}function lI(t,e){return r=>{let n=r.parent;if(n==null||t(n)==null)return null;let i=Vp(n),o=i.findIndex(({id:p})=>p===r.id);if(o===-1)return null;let a=e(o);return a===-1?null:i[a]}}var Vp=t=>aI(t,"value"),Yv="~quoting_lit.list_lit!",uI=Le(Yv);function Xv(...t){return e=>{let r=uI(e);if(r==null)return null;let n=Vp(r)[0];return t.includes(n?.text)?r:null}}function oQ(...t){return Ne(Xv(...t))}var fI=Xv("defn","defmacro"),pI=yh([fI,t=>Vp(t)[1]]),dI=Xv("if","if-let","when","when-let"),sQ=Ne(dI),aQ={collectionKey:Ne(cI(0)),value:Ne(cI(1)),argumentOrParameter:Ne(lI(Le(Yv),t=>t!==0?t:-1)),functionCall:Yv,functionCallee:yh([uI,t=>Vp(t)[0]]),namedFunction:Ne(fI),functionName:pI,name:pI,anonymousFunction:gt(oQ("fn"),Rt("anon_fn_lit")),ifStatement:sQ,condition:yh([dI,t=>Vp(t)[1]])},mI=gn(aQ);var hI=["command","displayed_equation","inline_formula","math_set","block_comment","package_include","class_include","latex_include","biblatex_include","bibtex_include","graphics_include","svg_include","inkscape_include","verbatim_include","import_include","caption","citation","label_definition","label_reference","label_reference_range","label_number","new_command_definition","old_command_definition","let_command_definition","environment_definition","glossary_entry_definition","glossary_entry_reference","acronym_definition","acronym_reference","theorem_definition","color_definition","color_set_definition","color_reference","tikz_library_import"],cQ=["curly_group","curly_group_text","curly_group_text_list","curly_group_path","curly_group_path_list","curly_group_command_name","curly_group_key_value","curly_group_glob_pattern","curly_group_impl","brack_group","brack_group_text","brack_group_argc","brack_group_key_value","mixed_group"],yI=["subparagraph","paragraph","subsubsection","subsection","section","chapter","part"],gI=yI.map(t=>`${t}[text]`),pQ=yI.map(t=>`${t}[command]`);function Jv(t,e){return{selection:new be(t.document.positionAt(e.startIndex+1),t.document.positionAt(e.endIndex-1)),context:{removalRange:new be(t.document.positionAt(e.startIndex),t.document.positionAt(e.endIndex))}}}function lQ(t,e){let r=e.startIndex,n=e.endIndex,i=e.nextNamedSibling;return i!=null&&i.isNamed&&(n=i.endIndex),{selection:new be(t.document.positionAt(r),t.document.positionAt(n)),context:{}}}var uQ={argumentOrParameter:gt(ec([Le(...hI),Le(...cQ)],1,Jv),Ne(Le("begin[name]","end[name]",...gI),Jv)),functionCall:gt(Ne(Le(...hI,"begin","end")),Ne(Le(...pQ),lQ)),name:gt(Ne(Le(...gI),Jv),Rt("begin[name][text]","end[name][text]"))},xI=gn(uQ);var fQ=["alias","begin_block","end_block","if_modifier","rescue_modifier","undef","unless_modifier","until_modifier","while_modifier"],dQ=["array","assignment","begin","binary","break","call","case","case_match","chained_string","character","class","class_variable","complex","conditional","constant","delimited_symbol","element_reference","false","float","for","global_variable","hash","heredoc_beginning","identifier","if","instance_variable","integer","lambda","method","module","next","nil","operator_assignment","parenthesized_statements","range","rational","redo","regex","retry","return","scope_resolution","self","simple_symbol","singleton_class","singleton_method","string","string_array","subshell","super","symbol_array","true","unary","unless","until","while","yield"],mQ=["begin_block","begin","block_body","block","body_statement","do_block","do","else","end_block","ensure","heredoc_beginning","interpolation","lambda","method","parenthesized_statements","program","singleton_class","singleton_method","then"],hQ=["=","+=","-=","*=","**=","/=","||=","|=","&&=","&=","%=",">>=","<<=","^="],gQ=[":","=>"];function yQ(t){if(t.type!=="call")return null;let e=t.childForFieldName("receiver"),r=t.childForFieldName("method"),n=t.childForFieldName("block");return e?.text==="Proc"&&r?.text==="new"||e==null&&r?.text==="lambda"?t:n}var xQ={statement:gt(Rt(...fQ),ec([Le(...mQ),Le(...dQ)],1)),anonymousFunction:gt(Rt("lambda","do_block"),Ne(yQ)),condition:rc("*[condition]"),argumentOrParameter:tc("lambda_parameters","method_parameters","block_parameters","argument_list"),collectionKey:_o(["pair[key]"],[":"]),value:Cn(["pair[value]","assignment[right]","operator_assignment[right]","return.argument_list!"],hQ.concat(gQ))},TI=gn(xQ);function eb(){let t=ei(["else_clause"],[],{includeUnnamedChildren:!0});return function(e,r){let n=t(e,r),i=r.parent;if(i?.type!=="else_clause"){let a=r.childForFieldName("alternative");if(a==null)return n;let{selection:p}=n;return{selection:p,context:{removalRange:new be(p.start,hv(a.namedChild(0).startPosition))}}}let{selection:o}=n;return{selection:new be(hv(i.child(0).startPosition),o.end),context:{}}}}function SI(t){let e=eb();return function(r,n){return n.namedChild(0).type===t?e(r,n.namedChild(0)):Jn(r,n)}}var vI=["associated_type","attribute_item","const_item","empty_statement","enum_item","extern_crate_declaration","foreign_mod_item","impl_item","inner_attribute_item","let_declaration","macro_definition","macro_invocation","function_item","function_signature_item","mod_item","static_item","struct_item","trait_item","type_item","union_item","use_declaration","expression_statement"],TQ=["source_file","block","declaration_list"];function SQ(t){return t.parent?.type==="impl_item"&&t.parent?.childForFieldName("type")?.equals(t)?t:null}function vQ(t,e){return{selection:xD(e.children[1],e.lastNamedChild),context:{leadingDelimiterRange:dn(e.children[0].startPosition,e.children[1].startPosition)}}}function bQ(t){if(t.type!=="block")return null;let{lastNamedChild:e}=t;if(e==null)return null;if(e.type==="expression_statement"){let r=e.child(0);return r.type==="return_expression"?r.child(1):null}return vI.includes(e.type)?null:e.type==="return_expression"?e.child(1):e}var wQ={statement:ec([Le(...TQ),Le(...vI)],1),condition:gt(Rt("while_expression[condition]","if_expression[condition]"),Ne(Le("while_let_expression","if_let_expression"),ei(["while","if","block"],[],{includeUnnamedChildren:!0})),Cn(["*.match_pattern![condition]"],["if"])),type:gt(Cn(["let_declaration[type]","parameter[type]","field_declaration[type]","const_item[type]"],[":"]),Ne(Le("constrained_type_parameter[bounds]","where_predicate[bounds]"),vQ),Cn(["function_item[return_type]"],["->"]),Ne(SQ),Rt("struct_item","trait_item","impl_item","array_type[element]")),argumentOrParameter:tc("arguments","parameters","meta_arguments","type_parameters","ordered_field_declaration_list"),collectionKey:gt(_o(["field_initializer[name]","field_pattern[name]"],[":"])),name:gt(Rt("let_declaration.identifier!","parameter.identifier!","function_item[name]","struct_item[name]","enum_item[name]","enum_variant[name]","trait_item[name]","const_item[name]","meta_item.identifier!","let_declaration[pattern]","constrained_type_parameter[left]","where_predicate[left]","field_declaration[name]"),_o(["field_initializer[name]","field_pattern[name]"],[":"])),value:gt(Cn(["let_declaration[value]"],["="]),Cn(["field_initializer[value]","field_pattern[pattern]"],[":"]),Rt("meta_item[value]","const_item[value]"),Ne(bQ)),attribute:_o(["mutable_specifier","attribute_item"]),branch:gt(Rt("match_arm"),Ne(Le("else_clause"),SI("if_expression")),Ne(Le("if_expression"),eb()))},bI=gn(wQ);var _Q={argumentOrParameter:tc("arguments","parameters","class_parameters","bindings"),branch:Ne(Le("case_clause"),ei([],[],{includeUnnamedChildren:!0})),type:Cn(["upper_bound[type]","lower_bound[type]","view_bound[type]","context_bound[type]","val_definition[type]","val_declaration[type]","var_definition[type]","var_declaration[type]","type_definition","extends_clause[type]","class_parameter[type]","parameter[type]","function_definition[return_type]","typed_pattern[type]","binding[type]"],[":"]),value:Cn(["*[value]","*[default_value]","type_definition[type]"],["="]),condition:rc("*[condition]")},wI=gn(_Q);var EQ=["apply_statement","at_rule","charset_statement","debug_statement","each_statement","error_statement","for_statement","forward_statement","function_statement","if_statement","import_statement","include_statement","keyframes_statement","media_statement","mixin_statement","namespace_statement","placeholder","rule_set","supports_statement","use_statement","warn_statement","while_statement"];function EI(t){return[",","(",")"].includes(t.type)||RI(t)}function RI(t){return t.type==="plain_value"&&t.text==="at"}function _I(t){return e=>{(RI(e)||e.type===",")&&(e=e.previousSibling);let r=t(e);for(;r&&!EI(r);)e=r,r=t(r);return e}}function RQ(t,e){return e.type!=="declaration"?null:e.descendantsOfType("unit").map(r=>({node:r,selection:Jn(t.editor,r)}))}var kQ={condition:rc("condition"),statement:gt(Rt(...EQ),Ne(Le("attribute_selector"),ei([],["attribute_name","string_value"]))),argumentOrParameter:gt(Ne(Le("arguments.*!","parameters.*!"),gv(t=>EI(t),", ",_I(t=>t.previousSibling),_I(t=>t.nextSibling)))),collectionKey:_o(["declaration.property_name!"],[":"]),value:gt(Ne(Le("declaration"),ei(["property_name","variable_name"])),Ne(Le("include_statement","namespace_statement"),ei()),Rt("return_statement.*!","import_statement.*!","attribute_selector.plain_value!","attribute_selector.string_value!","parameter.default_value!")),unit:gt(Rt("integer_value.unit!"),RQ)},tb=gn(kQ);function kI(t,e,r){let n=Bp[t];if(n==null)throw new Nu(t);let i=n[e];return i==null?sI(e):r?PQ(i):i}var Bp={clojure:mI,css:tb,latex:xI,ruby:TI,rust:bI,scala:wI,scss:tb};function PQ(t){return(e,r)=>{let n=t(e,r);return n==null?null:(n=n.flatMap(i=>MQ(i.node,Rd(e,i.selection.selection),t)),n.length>0?n:null)}}function MQ(t,e,r){let n=t.parent;for(;n!=null;){let i=n.namedChildren.flatMap(o=>r(e,o)).filter(o=>o!=null);if(i.length>0)return i;n=n.parent}return[]}var xh=class{constructor(e,r){this.languageDefinitions=e;this.modifier=r}run(e){let r=kI(e.editor.document.languageId,this.modifier.scopeType.type,this.modifier.type==="everyScope"),n=this.languageDefinitions.getNodeAtLocation(e.editor.document,e.contentRange);if(n==null)throw new ut(this.modifier.scopeType.type);let i=AQ(n,r,{editor:e.editor,selection:new be(e.contentRange.start,e.contentRange.end)});if(i==null)throw new ut(this.modifier.scopeType.type);return i.map(o=>{let{containingListDelimiter:a,leadingDelimiterRange:p,trailingDelimiterRange:l,removalRange:u}=o.context;if(u!=null&&(p!=null||l!=null))throw Error("Removal range is mutually exclusive with leading or trailing delimiter range");let{editor:d,selection:m}=o.selection;return new ho({scopeTypeType:this.modifier.scopeType.type,editor:d,isReversed:e.isReversed,contentRange:m,removalRange:u,insertionDelimiter:a,leadingDelimiterRange:p,trailingDelimiterRange:l})})}};function AQ(t,e,r){let n=t;for(;n!=null;){let i=e(r,n);if(i!=null)return i.map(o=>o.selection).map(o=>({selection:Rd(r,o.selection),context:o.context}));n=n.parent}return null}var nc=class{constructor(e,r,n){this.languageDefinitions=e;this.storedTargets=r;this.scopeHandlerFactory=n;this.create=this.create.bind(this)}create(e){switch(e.type){case"startOf":return new ph;case"endOf":return new lh;case"extendThroughStartOf":case"extendThroughEndOf":return new Jm(this,e);case"toRawSelection":return new dh(e);case"interiorOnly":return new eh(this,e);case"excludeInterior":return new th(this,e);case"leading":return new nh(this,e);case"trailing":return new ih(this,e);case"visible":return new gh(e);case"containingScope":return new Xa(this,this.scopeHandlerFactory,e);case"preferredScope":return new uh(this,this.scopeHandlerFactory,e);case"everyScope":return e.scopeType.type==="instance"?new Ja(this,this.storedTargets,e):new Km(this,this.scopeHandlerFactory,e);case"ordinalScope":return e.scopeType.type==="instance"?new Ja(this,this.storedTargets,e):new ah(this,e);case"relativeScope":return e.scopeType.type==="instance"?new Ja(this,this.storedTargets,e):new hh(this,this.scopeHandlerFactory,e);case"keepContentFilter":return new Qm(e);case"keepEmptyFilter":return new Zm(e);case"cascading":return new $m(this,e);case"modifyIfUntyped":return new bo(this,e);case"range":return new fh(this,e);case"inferPreviousMark":throw Error(`Unexpected modifier '${e.type}'; it should have been removed during inference`);default:{let r=e,{type:n}=e;throw new Error(`Unknown modifier: ${n}`)}}}getLegacyScopeStage(e){switch(e.scopeType.type){default:return new xh(this.languageDefinitions,e)}}};async function PI(t,e,r){let n=t.registerReplaceEditList(e.document,r.filter(o=>o.isReplace)),i=await e.edit(r);return n(),i}async function Pe({rangeUpdater:t,editor:e,selections:r,preserveCursorSelections:n,...i}){let o=ki(r),a=o.map(u=>{let d=r[u],m=DQ(d);return MI(e.document,m.selections,m.behavior)});n||a.push(MI(e.document,e.selections,1));let p=await("edits"in i?CQ(t,e,i.edits,a):AI(t,i.callback,e.document,a));return n||await e.setSelections(p.pop()),Object.fromEntries(o.map((u,d)=>[u,p[d]]))}function MI(t,e,r){return e.map(n=>IQ(t,n,n instanceof be?!n.isReversed:!0,r))}function DQ(t){return"selections"in t?t:{selections:t,behavior:1}}function IQ(t,e,r,n){return{range:e,isForward:r,expansionBehavior:{start:{type:n===1||n===3?"closed":"open"},end:{type:n===1||n===2?"closed":"open"}},offsets:{start:t.offsetAt(e.start),end:t.offsetAt(e.end)},text:t.getText(e)}}function FQ(t){return t.map(e=>e.map(({range:{start:r,end:n},isForward:i})=>i?new be(r,n):new be(n,r)))}async function AI(t,e,r,n){let i=t.registerRangeInfoList(r,Je(n));return await e(),i(),FQ(n)}async function CQ(t,e,r,n){return await AI(t,async()=>{if(!await PI(t,e,r))throw new Error("Could not apply edits")},e.document,n)}var Th=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e){return await De(k(),e,"pendingModification0"),{thatSelections:Je(await rt(e,async(n,i)=>{let o=i.map(({contentRange:u})=>u),a=OQ(n,o),p=k().getEditableTextEditor(n),{contentRanges:l}=await Pe({rangeUpdater:this.rangeUpdater,editor:p,edits:a,selections:{contentRanges:o}});return wt(i,l).map(([u,d])=>({editor:u.editor,selection:d.toSelection(u.isReversed)}))}))}}};function OQ(t,e){let{document:r}=t,n=[];for(let i of e){let o=i.start,a=r.lineAt(o),p=a.text.slice(0,a.rangeTrimmed?.start?.character??a.range.start.character),l=a.text.slice(0,o.character).search(/\s+$/),u=l>-1?new W(new le(a.lineNumber,l),o):o.toEmptyRange();n.push({range:u,text:`
`+p,isReplace:!u.isEmpty})}return n}function Sh(t){return t.length<2?t:tA(t).flatMap(([e,r])=>{if(r.length<2)return r;let n=[...r];n.sort((o,a)=>o.contentRange.start.compareTo(a.contentRange.start));let i=!0;for(;i;)[n,i]=NQ(n);return n})}function NQ(t){if(t.length<2)return[t,!1];let e=[],r=[];return t.forEach(n=>{r.length&&!LQ(r[r.length-1],n)?(e.push(DI(r)),r=[n]):r.push(n)}),e.push(DI(r)),[e,e.length!==t.length]}function DI(t){if(t.length===1)return t[0];let e=t[0],r=t[t.length-1];return wo(e,r)}function LQ(t,e){return!!t.getRemovalRange().intersection(e.getRemovalRange())}var Wp=class{constructor(e,r){this.rangeUpdater=e;this.type=r}async decorateTargets(e,r){await Promise.all([De(k(),e,this.decoration.sourceStyle,this.decoration.getSourceRangeCallback),De(k(),r,this.decoration.destinationStyle)])}getEditsBringMove(e,r){let n=[],i=[],o=e.length!==r.length&&r.length===1;return e.forEach((a,p)=>{let l=r[p];if((a==null||l==null)&&!o)throw new Error("Targets must have same number of args");if(l!=null){let u;o?u=e.map((d,m)=>{let g=d.contentText,x=(l.isRaw?null:l.insertionDelimiter)??(d.isRaw?null:d.insertionDelimiter);return m>0&&x!=null?x+g:g}).join(""):u=a.contentText,i.push({edit:l.constructChangeEdit(u),editor:l.editor,originalTarget:l.target,isSource:!1})}else l=r[0];n.includes(a)||(n.push(a),this.type==="bring"&&i.push({edit:a.toDestination("to").constructChangeEdit(l.target.contentText),editor:a.editor,originalTarget:a,isSource:!0}))}),this.type==="move"&&Sh(n).forEach(a=>{i.push({edit:a.constructRemovalEdit(),editor:a.editor,originalTarget:a,isSource:!0})}),i}async performEditsAndComputeThatMark(e){return Je(await Ii(e,r=>r.editor,async(r,n)=>{let i=this.type!=="bring"?n:n.filter(({isSource:x})=>!x),o=this.type==="swap"?[]:n.filter(({isSource:x})=>x),a=this.type==="swap"?n:n.filter(({isSource:x})=>!x),p=o.map(({edit:x})=>x.range),l=a.map(({edit:x})=>x.range),u=k().getEditableTextEditor(r),{sourceEditRanges:d,destinationEditRanges:m}=await Pe({rangeUpdater:this.rangeUpdater,editor:u,edits:i.map(({edit:x})=>x),selections:{sourceEditRanges:p,destinationEditRanges:{selections:l,behavior:0}}}),g=[...this.getMarks(o,d),...this.getMarks(a,m)];return g.sort((x,b)=>n.findIndex(v=>v.originalTarget===x.target)-n.findIndex(v=>v.originalTarget===b.target)),g}))}getMarks(e,r){return e.map((n,i)=>{let o=r[i],a=n.edit.updateRange(o),p=n.originalTarget;return{editor:n.editor,selection:a.toSelection(p.isReversed),isSource:n.isSource,target:p}})}async decorateThatMark(e){let r=n=>ln(n,e.find(i=>i.target===n).selection);return Promise.all([De(k(),e.filter(({isSource:n})=>n).map(({target:n})=>n),this.decoration.sourceStyle,r),De(k(),e.filter(({isSource:n})=>!n).map(({target:n})=>n),this.decoration.destinationStyle,r)])}calculateMarksBringMove(e){return{thatMark:e.filter(({isSource:r})=>!r),sourceMark:e.filter(({isSource:r})=>r)}}};function II(t,e){return t.length===1?Array(e.length).fill(t[0]):t}var vh=class extends Wp{constructor(r){super(r,"bring");this.decoration={sourceStyle:"referenced",destinationStyle:"pendingModification0"};this.run=this.run.bind(this)}async run(r,n){r=II(r,n),await this.decorateTargets(r,n.map(l=>l.target));let i=this.getEditsBringMove(r,n),o=await this.performEditsAndComputeThatMark(i),{thatMark:a,sourceMark:p}=this.calculateMarksBringMove(o);return await this.decorateThatMark(a),{thatSelections:a,sourceSelections:p}}},bh=class extends Wp{constructor(r){super(r,"move");this.decoration={sourceStyle:"pendingDelete",destinationStyle:"pendingModification0",getSourceRangeCallback:UQ};this.run=this.run.bind(this)}async run(r,n){r=II(r,n),await this.decorateTargets(r,n.map(l=>l.target));let i=this.getEditsBringMove(r,n),o=await this.performEditsAndComputeThatMark(i),{thatMark:a,sourceMark:p}=this.calculateMarksBringMove(o);return await this.decorateThatMark(a),{thatSelections:a,sourceSelections:p}}},wh=class extends Wp{constructor(r){super(r,"swap");this.decoration={sourceStyle:"pendingModification1",destinationStyle:"pendingModification0"};this.run=this.run.bind(this)}async run(r,n){await this.decorateTargets(r,n);let i=this.getEditsSwap(r,n),o=await this.performEditsAndComputeThatMark(i);return await this.decorateThatMark(o),{thatSelections:o,sourceSelections:[]}}getEditsSwap(r,n){let i=[];return r.forEach((o,a)=>{let p=n[a];if(o==null||p==null)throw new Error("Targets must have same number of args");i.push({edit:p.toDestination("to").constructChangeEdit(o.contentText),editor:p.editor,originalTarget:p,isSource:!1}),i.push({edit:o.toDestination("to").constructChangeEdit(p.contentText),editor:o.editor,originalTarget:o,isSource:!0})}),i}};function UQ(t){return t.getRemovalHighlightRange()}var $p=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e,r){_r(e);let{returnValue:n}=await this.actions.getText.run(e,{showDecorations:!1}),{thatSelections:i}=await this.actions.wrapWithPairedDelimiter.run(r,n[0]+"(",")");return{thatSelections:i}}};var jp=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){let r=Tt(e),n=e.map(o=>new Be({editor:o.editor,isReversed:o.isReversed,contentRange:o.contentRange})),{thatTargets:i}=await this.actions.remove.run(n);return i!=null&&await k().getEditableTextEditor(r).setSelections(i.map(({contentSelection:o})=>o),{focusEditor:!0}),{thatTargets:i}}};var ic=t=>new At({editor:t.editor,isReversed:t.selection.isReversed,contentRange:t.selection,hasExplicitRange:!0});var oc=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e,r){r.showDecorations&&await De(k(),e,"referenced"),r.ensureSingleEditor&&Tt(e),r.ensureSingleTarget&&_r(e);let n=k().activeEditableTextEditor,i=r.setSelection?eA:rt,o=Je(await i(e,(a,p)=>this.runForEditor(r,a,p)));return r.setSelection&&r.restoreSelection&&n!=null&&!n.isActive&&await n.focus(),{thatTargets:o}}async runForEditor(e,r,n){let i=k().getEditableTextEditor(r),o=r.selections,a=r.document.version,p=n.map(d=>d.contentSelection);e.setSelection&&await i.setSelections(p,{focusEditor:!0,revealRange:!1});let{originalSelections:l,targetSelections:u}=await Pe({rangeUpdater:this.rangeUpdater,editor:i,callback:()=>e.callback(i,n),preserveCursorSelections:!0,selections:{originalSelections:o,targetSelections:p}});return e.setSelection&&e.restoreSelection&&await i.setSelections(l),r.document.version===a?n:u.map(d=>ic({editor:r,selection:d}))}};var St=class{constructor(e){this.ensureSingleEditor=!1;this.ensureSingleTarget=!1;this.restoreSelection=!0;this.showDecorations=!0;this.callbackAction=new oc(e),this.run=this.run.bind(this)}async run(e,{showDecorations:r}={}){let n=k().capabilities.commands[this.command];if(n==null)throw Error(`Action ${this.command} is not supported by your ide`);let{acceptsLocation:i}=n;return this.callbackAction.run(e,{callback:(o,a)=>HQ(o,i?a.map(p=>p.contentRange):void 0,this.command),setSelection:!i,ensureSingleEditor:this.ensureSingleEditor,ensureSingleTarget:this.ensureSingleTarget,restoreSelection:this.restoreSelection,showDecorations:r??this.showDecorations})}},_h=class extends St{constructor(){super(...arguments);this.command="clipboardCopy";this.ensureSingleEditor=!0}},Eh=class extends St{constructor(){super(...arguments);this.command="toggleLineComment"}},Rh=class extends St{constructor(){super(...arguments);this.command="indentLine"}},kh=class extends St{constructor(){super(...arguments);this.command="outdentLine"}},Ph=class extends St{constructor(){super(...arguments);this.command="fold"}},Mh=class extends St{constructor(){super(...arguments);this.command="unfold"}},Ah=class extends St{constructor(){super(...arguments);this.command="rename";this.ensureSingleTarget=!0}},Dh=class extends St{constructor(){super(...arguments);this.command="showReferences";this.ensureSingleTarget=!0}},Ih=class extends St{constructor(){super(...arguments);this.command="quickFix";this.ensureSingleTarget=!0}},Fh=class extends St{constructor(){super(...arguments);this.command="revealDefinition";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Ch=class extends St{constructor(){super(...arguments);this.command="revealTypeDefinition";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Oh=class extends St{constructor(){super(...arguments);this.command="showHover";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Nh=class extends St{constructor(){super(...arguments);this.command="showDebugHover";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Lh=class extends St{constructor(){super(...arguments);this.command="extractVariable";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Uh=class extends St{constructor(){super(...arguments);this.command="gitAccept";this.ensureSingleTarget=!0}},Hh=class extends St{constructor(){super(...arguments);this.command="gitRevert";this.ensureSingleTarget=!0}},Vh=class extends St{constructor(){super(...arguments);this.command="gitStage";this.ensureSingleTarget=!0}},Bh=class extends St{constructor(){super(...arguments);this.command="gitUnstage";this.ensureSingleTarget=!0}};function HQ(t,e,r){switch(r){case"toggleLineComment":return t.toggleLineComment(e);case"indentLine":return t.indentLine(e);case"outdentLine":return t.outdentLine(e);case"clipboardCopy":return t.clipboardCopy(e);case"fold":return t.fold(e);case"unfold":return t.unfold(e);case"insertLineAfter":return t.insertLineAfter(e);case"rename":return t.rename(e?.[0]);case"showReferences":return t.showReferences(e?.[0]);case"quickFix":return t.quickFix(e?.[0]);case"revealDefinition":return t.revealDefinition(e?.[0]);case"revealTypeDefinition":return t.revealTypeDefinition(e?.[0]);case"showHover":return t.showHover(e?.[0]);case"showDebugHover":return t.showDebugHover(e?.[0]);case"extractVariable":return t.extractVariable(e?.[0]);case"gitAccept":return t.gitAccept(e?.[0]);case"gitRevert":return t.gitRevert(e?.[0]);case"gitStage":return t.gitStage(e?.[0]);case"gitUnstage":return t.gitUnstage(e?.[0]);case"highlight":throw Error("Highlight command not supported as simple action")}}var Wh=class{constructor(e,r){this.actions=e;this.rangeUpdater=r;this.run=this.run.bind(this)}async run(e,r={showDecorations:!0}){if(k().capabilities.commands.clipboardCopy!=null)return new _h(this.rangeUpdater).run(e,r);r.showDecorations&&await De(k(),e,"referenced");let n=e.map(i=>i.contentText).join(`
`);return await k().clipboard.writeText(n),{thatTargets:e}}};var $h=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){await k().flashRanges(e.flatMap(VQ));let r={showDecorations:!1};await this.actions.copyToClipboard.run(e,r);let{thatTargets:n}=await this.actions.remove.run(e,r);return{thatTargets:n}}};function VQ(t){let{editor:e,contentRange:r}=t,n=t.getRemovalHighlightRange(),i=[{editor:e,range:ir(r),style:"referenced"}];return n.type==="line"?i.push({editor:e,range:n,style:"pendingDelete"}):i.push(...BQ(r,n).map(o=>({editor:e,range:ir(o),style:"pendingDelete"}))),i}function BQ(t,e){let{start:r,end:n}=t,{start:i,end:o}=e,a=[];return i.isBefore(r)&&a.push(new W(i,r)),o.isAfter(n)&&a.push(new W(n,o)),a}var qp=class{constructor(){this.run=this.run.bind(this)}async run(e){return await rt(e,async(r,n)=>{let i=r.selections.filter(o=>!n.some(a=>{let p=a.contentRange.intersection(o);return p&&(!p.isEmpty||o.isEmpty)}));if(i.length===0)throw new rb;await k().getEditableTextEditor(r).setSelections(i)}),{thatTargets:e}}},rb=class extends Error{constructor(){super("Can't deselect every selection. At least one is required"),this.name="SelectionRequiredError"}};async function FI(t,e,r,n){let i=r.destinations.map((b,v)=>{if(n||r.actionTypes[v]==="edit")return{destination:b,index:v}}).filter(b=>!!b);if(i.length===0)return r;let o=i.map(b=>b.destination.constructChangeEdit("")),a=r.cursorRanges.map((b,v)=>({range:b,index:v})).filter(({range:b})=>b!=null),p=a.map(({index:b})=>b),l=a.map(({range:b})=>b),u=o.map(b=>b.range),{thatRanges:d,cursorRanges:m,editRanges:g}=await Pe({rangeUpdater:t,editor:e,edits:o,preserveCursorSelections:!0,selections:{thatRanges:r.thatRanges,cursorRanges:l,editRanges:{selections:u,behavior:0}}}),x=[...r.cursorRanges];return wt(p,m).forEach(([b,v])=>{x[b]=v}),i.forEach((b,v)=>{let I=o[v].updateRange(g[v]);x[b.index]=I}),{destinations:r.destinations,actionTypes:r.actionTypes,thatRanges:d,cursorRanges:x}}async function CI({acceptsLocation:t},e,r,n){let i=n.destinations.map((m,g)=>{if(n.actionTypes[g]==="insertLineAfter")return{destination:m,index:g}}).filter(m=>!!m);if(i.length===0)return n;let o=i.map(({destination:m})=>m.contentRange),a=n.destinations.map(({contentRange:m})=>m),p=async()=>{t?await r.insertLineAfter(o):(await r.setSelections(o.map(m=>m.toSelection(!1))),await r.focus(),await r.insertLineAfter())},{targetRanges:l,thatRanges:u}=await Pe({rangeUpdater:e,editor:r,callback:p,preserveCursorSelections:!0,selections:{targetRanges:a,thatRanges:n.thatRanges}}),d=[...n.cursorRanges];return i.forEach((m,g)=>{d[m.index]=r.selections[g]}),{destinations:n.destinations.map((m,g)=>m.withTarget(m.target.withContentRange(l[g]))),actionTypes:n.actionTypes,thatRanges:u,cursorRanges:d}}async function OI(t,e){let r=_r(e),n=k().getEditableTextEditor(r.editor),i=r.insertionMode==="before";if(r.insertionMode==="to")throw Error(`Unsupported insertion mode '${r.insertionMode}' for notebookcapell`);return await t.setSelection.run([r.target]),i?await n.editNewNotebookCellAbove():await n.editNewNotebookCellBelow(),{thatSelections:pn([r.target.thatTarget])}}var jh=class{constructor(e,r){this.rangeUpdater=e;this.actions=r;this.run=this.run.bind(this)}async run(e){if(e.some(({target:p})=>p.isNotebookCell))return OI(this.actions,e);let r=k().getEditableTextEditor(Tt(e)),n={destinations:e,actionTypes:e.map(p=>p.getEditNewActionType()),thatRanges:e.map(({target:p})=>p.thatTarget.contentRange),cursorRanges:new Array(e.length).fill(void 0)},i=k().capabilities.commands.insertLineAfter,o=i!=null;o&&(n=await CI(i,this.rangeUpdater,r,n)),n=await FI(this.rangeUpdater,r,n,!o);let a=n.destinations.map((p,l)=>{let u=n.cursorRanges[l];if(u==null)throw Error("Cursor range is undefined for destination");return u.toSelection(p.target.isReversed)});return await r.setSelections(a,{focusEditor:!0}),{thatSelections:pn(n.destinations.map(p=>p.target),n.thatRanges)}}};var qh=class{constructor(e,r){this.actions=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(ii)]}run(e){return this.actions.editNew.run(e.map(r=>r.toDestination(this.insertionMode)))}},zh=class extends qh{constructor(){super(...arguments);this.insertionMode="before"}},Gh=class extends qh{constructor(){super(...arguments);this.insertionMode="after"}};var zp=class{constructor(e){this.callbackAction=new oc(e),this.run=this.run.bind(this)}async run(e,r,{commandArgs:n,ensureSingleEditor:i,ensureSingleTarget:o,restoreSelection:a,showDecorations:p}={}){let l=n??[];return this.callbackAction.run(e,{callback:()=>k().executeCommand(r,...l),setSelection:!0,ensureSingleEditor:i??!1,ensureSingleTarget:o??!1,restoreSelection:a??!0,showDecorations:p??!0})}};var Kh=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){_r(e);let{returnValue:r,thatTargets:n}=await this.actions.getText.run(e),[i]=r,o;return i.length>200?(o=i.substring(0,200),rp(k().messages,"truncatedSearchText","Search text is longer than 200 characters; truncating")):o=i,await this.find(o),{thatTargets:n}}},Qh=class extends Kh{find(e){return k().findInDocument(e)}},Zh=class extends Kh{find(e){return k().findInWorkspace(e)}};var Yh=class{constructor(){this.run=this.run.bind(this)}async run(e){return await De(k(),e,"referenced"),{thatTargets:e}}};var sc=class{constructor(e){this.options=e;this.run=this.run.bind(this)}async run(e){let r=_r(e);return await De(k(),e,"referenced"),await k().getEditableTextEditor(r.editor).openLink(r.contentRange,this.options),{thatSelections:pn(e)}}};function NI(t){let e=t.split(/^---$/m),r={snippets:[]};for(let n of e){let i=n.match(/^-$/m),o=i!=null?n.slice(0,i.index):n,a=i!=null?n.slice(i.index+i[0].length):null,p=a?qQ(a):null,l=WQ(o);if(p!=null){l==null&&(l={variables:[]});let{variables:u,...d}=l;r.snippets.push({...d,body:p,variables:u})}else if(l!=null){if(r.header!=null||r.snippets.length!==0)throw Error("Header snippet must be first in file");r.header=l}}return r}function WQ(t){let e={variables:[]},r=$Q(t);if(Object.keys(r).length===0)return;let n={};for(let[i,o]of Object.entries(r))switch(i){case"name":e.name=o;break;case"description":e.description=o;break;case"phrase":e.phrases=Gp(o);break;case"insertionScope":e.insertionScopes=Gp(o);break;case"language":e.languages=Gp(o);break;default:if(!i.startsWith("$"))throw Error(`Invalid key '${i}'`);n[i]=o}return e.variables=jQ(n),e}function $Q(t){let e=t.split(/\r?\n/).map(n=>n.trim()).filter(Boolean),r={};for(let n of e){let i=n.split(":");if(i.length!==2)throw Error(`Invalid line '${n}'`);let o=i[0].trim(),a=i[1].trim();if(o.length===0||a.length===0)throw Error(`Invalid line '${n}'`);if(r[o]!=null)throw Error(`Duplicate key '${o}' in '${t}'`);r[o]=a}return r}function jQ(t){let e={},r=n=>(e[n]==null&&(e[n]={name:n}),e[n]);for(let[n,i]of Object.entries(t)){let o=n.split(".");if(o.length!==2)throw Error(`Invalid variable key '${n}'`);let a=o[0].slice(1);switch(o[1]){case"insertionFormatter":r(a).insertionFormatters=Gp(i);break;case"wrapperPhrase":r(a).wrapperPhrases=Gp(i);break;case"wrapperScope":r(a).wrapperScope=i;break;default:throw Error(`Invalid variable key '${n}'`)}}return Object.values(e)}function qQ(t){let e=t.match(/^[ \t]*\S/m);if(e?.index!=null)return t.slice(e.index).trimEnd().split(/\r?\n/).map(r=>r.trimEnd())}function Gp(t){return t.split("|").map(e=>e.trim())}function UI(t){let e=[];t.header!=null&&e.push(LI(t.header)),e.push(...t.snippets.map(LI));let r=e.filter(Boolean).join(`
---

`);return r?r+`
---
`:""}function LI(t){let e=[Eo("name",t.name),Eo("description",t.description),Eo("language",t.languages),Eo("phrase",t.phrases),Eo("insertionScope",t.insertionScopes)].filter(Boolean);return t.variables.length>0&&(e.length>0&&e.push(""),e.push(...zQ(t.variables))),"body"in t&&e.push("-",...t.body),e.join(`
`)}function zQ(t){let e=[...t];return e.sort(GQ),e.flatMap(r=>[Eo(`$${r.name}.insertionFormatter`,r.insertionFormatters),Eo(`$${r.name}.wrapperPhrase`,r.wrapperPhrases),Eo(`$${r.name}.wrapperScope`,r.wrapperScope)]).filter(Boolean)}function Eo(t,e){return e==null?"":Array.isArray(e)?`${t}: ${e.join(" | ")}`:`${t}: ${e}`}function GQ(t,e){return t.name==="0"?1:e.name==="0"?-1:t.name.localeCompare(e.name)}function HI(t,e){let r=[],n=0,i=null,[o,...a]=t.split(/\r?\n/);return[{text:e+o,startIndex:e.length},...a.map(l=>({text:l,startIndex:0}))].forEach(({text:l,startIndex:u})=>{let d=l.match(/^\s*/)?.[0]??"",m=d.length;i!=null&&(d.length>i.length?n++:d.length<i.length&&n--),i=d;let g=Math.max(m,u),x=IT("	",n),b=l.slice(g);r.push(x+b)}),r}function VI(t,e){let r=CT(e,o=>o.offsets.start),n="",i=0;for(let o of r)n+=t.slice(i,o.offsets.start)+o.text,i=o.offsets.end;return n+=t.slice(i),n}var ac=class{constructor(e){this.snippets=e;this.run=this.run.bind(this)}async run(e,r,n){if(r==null)throw new Error("Directory argument is required for GenerateSnippet action. Please update Cursorless Talon");let i=_r(e),o=i.editor;if(De(k(),e,"referenced"),n==null&&(n=await k().showInputBox({prompt:"Name of snippet",placeHolder:"helloWorld"}),!n))return{};let a=o.document.offsetAt(i.contentRange.start),p=QQ(o,i.contentRange),l=p.map((ie,ae)=>({offsets:{start:o.document.offsetAt(ie.start)-a,end:o.document.offsetAt(ie.end)-a},name:ae===p.length-1?"0":`${ae+1}`})),u=o.document.getText(new W(i.contentRange.start.with(void 0,0),i.contentRange.start)),d=o.document.getText(i.contentRange),m=VI(d,[...sn(d,/\$|\\/g,ie=>({offsets:{start:ie.index,end:ie.index+ie[0].length},text:`\\${ie[0]}`})),...l.map(({offsets:ie,name:ae})=>({offsets:ie,text:`$${ae}`}))]),g=HI(m,u),x,b={snippets:[]};k().runMode==="test"?x=k().getEditableTextEditor(o):(x=k().getEditableTextEditor(await this.snippets.openNewSnippetFile(n,r)),b=NI(x.document.getText())),await x.setSelections([x.document.range.toSelection(!1)]);let v=1,{header:F}=b,I=b.header?.phrases!=null?void 0:[`${nb}${v++}`],U=ie=>{let ae=F?.variables?.some(it=>it.name===ie.name&&it.wrapperPhrases!=null);return{name:ie.name,wrapperPhrases:ae?void 0:[`${nb}${v++}`]}},K={name:F?.name===n?void 0:n,phrases:I,languages:KQ(o,F),body:g,variables:l.map(U)};b.snippets.push(K);let ne=UI(b).replace(/\$/g,"\\$").replaceAll(nb,"$");return await x.insertSnippet(ne),{thatSelections:e.map(({editor:ie,contentSelection:ae})=>({editor:ie,selection:ae}))}}};function KQ(t,e){if(!e?.languages?.includes(t.document.languageId))return[t.document.languageId]}function QQ(t,e){let r=t.selections.filter(n=>e.contains(n));return r.sort((n,i)=>n.start.compareTo(i.start)),r}var nb="PLACEHOLDER_VFA77zcbLD6wXNmfMAay";var Kp=class{constructor(){this.run=this.run.bind(this)}async run(e){return{returnValue:e.map(({contentRange:r})=>({contentRange:r})),thatTargets:e}}};var Qp=class{constructor(){this.run=this.run.bind(this)}async run(e,{showDecorations:r=!0,ensureSingleTarget:n=!1}={}){return r&&await De(k(),e,"referenced"),n&&_r(e),{returnValue:e.map(i=>i.contentText),thatTargets:e}}};var Zp=class{constructor(){this.run=this.run.bind(this)}async run(e,r){if(k().capabilities.commands.highlight==null)throw Error("The highlight action is not supported by your ide");return e.length===0?await Promise.all(k().visibleTextEditors.map(n=>k().setHighlightRanges(r,n,[]))):await rt(e,(n,i)=>k().setHighlightRanges(r,n,i.map(o=>ln(o,o.contentRange)))),{thatTargets:e}}};var Xh=class{constructor(e,r){this.rangeUpdater=e;this.isIndent=r;this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e){return this.hasCapability()?this.runSimpleCommandAction(e):(await De(k(),e,"pendingModification0"),{thatTargets:Je(await rt(e,this.runForEditor))})}hasCapability(){return this.isIndent?k().capabilities.commands.indentLine!=null:k().capabilities.commands.outdentLine!=null}runSimpleCommandAction(e){return(this.isIndent?new Rh(this.rangeUpdater):new kh(this.rangeUpdater)).run(e)}async runForEditor(e,r){let n=this.isIndent?ZQ(e,r):YQ(e,r),{targetSelections:i}=await Pe({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(e),edits:n,selections:{targetSelections:r.map(({contentSelection:o})=>o)}});return wt(r,i).map(([o,a])=>ic({editor:e,selection:a.toSelection(o.isReversed)}))}},Jh=class extends Xh{constructor(e){super(e,!0)}},eg=class extends Xh{constructor(e){super(e,!1)}};function ZQ(t,e){let{document:r}=t,n=BI(e),i=XQ(t);return n.map(o=>({range:r.lineAt(o).range.start.toEmptyRange(),text:i}))}function YQ(t,e){let{document:r}=t,n=BI(e),i=JQ(t);return n.map(o=>{let a=r.lineAt(o),p=a.text.match(i),{start:l}=a.range,u=l.translate(void 0,p?.[0].length);return{range:new W(l,u),text:""}})}function BI(t){let e=new Set;for(let r of t){let{start:n,end:i}=r.contentRange;for(let o=n.line;o<=i.line;++o)e.add(o)}return[...e]}function XQ(t){if(t.options.insertSpaces){let e=WI(t);return" ".repeat(e)}return"	"}function JQ(t){if(t.options.insertSpaces){let e=WI(t);return new RegExp(`^[ ]{1,${e}}`)}return/^\t/}function WI(t){return typeof t.options.tabSize=="number"?t.options.tabSize:4}var tg=class{constructor(e,r,n){this.rangeUpdater=e;this.modifierStageFactory=r;this.isBefore=n;this.getFinalStages=()=>[this.modifierStageFactory.create(ii)];this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e){let r=Je(await rt(e,this.runForEditor));return await k().flashRanges(r.flatMap(n=>n.thatMark.map(i=>({editor:i.editor,range:ir(i.selection),style:"justAdded"})))),{sourceSelections:r.flatMap(({sourceMark:n})=>n),thatSelections:r.flatMap(({thatMark:n})=>n)}}async runForEditor(e,r){let n=this.isBefore?"after":"before",i=r.flatMap(g=>g.toDestination(n).constructChangeEdit(g.contentText)),o=r.map(({contentSelection:g})=>g),a=i.map(({range:g})=>g),p=k().getEditableTextEditor(e),{contentSelections:l,editRanges:u}=await Pe({rangeUpdater:this.rangeUpdater,editor:p,edits:i,selections:{contentSelections:o,editRanges:{selections:a,behavior:0}}}),d=wt(i,u).map(([g,x])=>g.updateRange(x)),m=e.selections[0];return l.some(g=>g.intersection(m)!=null)&&await p.revealRange(m),{sourceMark:pn(r,d),thatMark:pn(r,l)}}},rg=class extends tg{constructor(e,r){super(e,r,!0)}},ng=class extends tg{constructor(e,r){super(e,r,!1)}};var Yp=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(ii)]}async run(e){let r=await rt(e,async(i,o)=>{let a=this.getEdits(o),p=o.map(d=>d.thatTarget.contentSelection),{contentSelections:l,editRanges:u}=await Pe({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(i),edits:a,selections:{contentSelections:p,editRanges:{selections:a.map(d=>d.range),behavior:0}}});return{thatMark:l.map(d=>({editor:i,selection:d})),flashRanges:ts(a,u).map(([d,m])=>({editor:i,range:d.isLine?d.updateRange(m):m,isLine:d.isLine}))}});return await k().flashRanges(r.flatMap(i=>i.flashRanges.map(({editor:o,range:a,isLine:p})=>({editor:o,range:p?Hr(a):ir(a),style:"justAdded"})))),{thatSelections:r.flatMap(i=>i.thatMark)}}},ig=class extends Yp{constructor(e,r){super(e,r)}getEdits(e){return e.flatMap(r=>[ag(r,"before"),ag(r,"after")])}},og=class extends Yp{constructor(e,r){super(e,r)}getEdits(e){return e.map(r=>ag(r,"before"))}},sg=class extends Yp{constructor(e,r){super(e,r)}getEdits(e){return e.map(r=>ag(r,"after"))}};function ag(t,e){return{...t.toDestination(e).constructChangeEdit("",!0),isLine:t.textualType==="line"}}function jI(t,e){return eZ($I(t),$I(e))}function $I(t){if(t.languages!=null)return{langIds:t.languages}}function eZ(t,e){if(t==null&&e==null)return 0;if(t==null)return-1;if(e==null)return 1;if(t.langIds==null&&e.langIds!=null)return-1;if(e.langIds==null&&t.langIds!=null)return 1;let r=tZ(t.scopeTypes,e.scopeTypes);return r!==0?r:t.langIds==null?0:e.langIds.length-t.langIds.length}function tZ(t,e){return t==null&&e!=null?-1:e==null&&t!=null?1:0}function cc(t,e){if(t.type==="named")throw new Error("Cursorless snippets are deprecated. Please use community snippets. Update to latest cursorless-talon and say 'cursorless migrate snippets'.");if(t.type==="custom")return t;let r=rZ(t.snippets,e);r.sort(jI);let n=r[0];if(n==null)throw new Error("No snippet available for the current language");return n}function rZ(t,e){return t.filter(r=>r.languages==null?!0:r.languages.includes(e))}var ib=class t{constructor(){this.value="";this.pos=0}static{this._table={36:0,58:1,44:2,123:3,125:4,92:5,47:6,124:7,43:11,45:12,63:13}}static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return e===95||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};let e=this.pos,r=0,n=this.value.charCodeAt(e),i;if(i=t._table[n],typeof i=="number")return this.pos+=1,{type:i,pos:e,len:1};if(t.isDigitCharacter(n)){i=8;do r+=1,n=this.value.charCodeAt(e+r);while(t.isDigitCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}if(t.isVariableCharacter(n)){i=9;do n=this.value.charCodeAt(e+ ++r);while(t.isVariableCharacter(n)||t.isDigitCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}i=10;do r+=1,n=this.value.charCodeAt(e+r);while(!isNaN(n)&&typeof t._table[n]>"u"&&!t.isDigitCharacter(n)&&!t.isVariableCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}},Ro=class{constructor(){this._children=[]}appendChild(e){return e instanceof Vt&&this._children[this._children.length-1]instanceof Vt?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,r){let{parent:n}=e,i=n.children.indexOf(e),o=n.children.slice(0);o.splice(i,1,...r),n._children=o,function a(p,l){for(let u of p)u.parent=l,a(u.children,u)}(r,n)}get children(){return this._children}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof lg)return e;e=e.parent}}toString(){return this.children.reduce((e,r)=>e+r.toString(),"")}len(){return 0}},Vt=class t extends Ro{constructor(r){super();this.value=r}static escape(r){return r.replace(/\$|}|\\/g,"\\$&")}toString(){return this.value}toTextmateString(){return t.escape(this.value)}len(){return this.value.length}clone(){return new t(this.value)}},cg=class extends Ro{},Bt=class t extends cg{constructor(r){super();this.index=r}static compareByIndex(r,n){return r.index===n.index?0:r.isFinalTabstop?1:n.isFinalTabstop||r.index<n.index?-1:r.index>n.index?1:0}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof pg?this._children[0]:void 0}toTextmateString(){let r="";return this.transform&&(r=this.transform.toTextmateString()),this.children.length===0&&!this.transform?`$${this.index}`:this.children.length===0?`\${${this.index}${r}}`:this.choice?`\${${this.index}|${this.choice.toTextmateString()}|${r}}`:`\${${this.index}:${this.children.map(n=>n.toTextmateString()).join("")}${r}}`}clone(){let r=new t(this.index);return this.transform&&(r.transform=this.transform.clone()),r._children=this.children.map(n=>n.clone()),r}},pg=class t extends Ro{constructor(){super(...arguments);this.options=[]}appendChild(r){return r instanceof Vt&&(r.parent=this,this.options.push(r)),this}toString(){return this.options[0].value}toTextmateString(){return this.options.map(r=>r.value.replace(/\||,|\\/g,"\\$&")).join(",")}len(){return this.options[0].len()}clone(){let r=new t;return this.options.forEach(r.appendChild,r),r}},ob=class t extends Ro{constructor(){super(...arguments);this.regexp=new RegExp("")}resolve(r){let n=this,i=!1,o=r.replace(this.regexp,function(){return i=!0,n._replace(Array.prototype.slice.call(arguments,0,-2))});return!i&&this._children.some(a=>a instanceof On&&!!a.elseValue)&&(o=this._replace([])),o}_replace(r){let n="";for(let i of this._children)if(i instanceof On){let o=r[i.index]||"";o=i.resolve(o),n+=o}else n+=i.toString();return n}toString(){return""}toTextmateString(){return`/${this.regexp.source}/${this.children.map(r=>r.toTextmateString())}/${(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")}`}clone(){let r=new t;return r.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),r._children=this.children.map(n=>n.clone()),r}},On=class t extends Ro{constructor(r,n,i,o){super();this.index=r;this.shorthandName=n;this.ifValue=i;this.elseValue=o}resolve(r){return this.shorthandName==="upcase"?r?r.toLocaleUpperCase():"":this.shorthandName==="downcase"?r?r.toLocaleLowerCase():"":this.shorthandName==="capitalize"?r?r[0].toLocaleUpperCase()+r.substr(1):"":this.shorthandName==="pascalcase"?r?this._toPascalCase(r):"":this.shorthandName==="camelcase"?r?this._toCamelCase(r):"":r&&typeof this.ifValue=="string"?this.ifValue:!r&&typeof this.elseValue=="string"?this.elseValue:r||""}_toPascalCase(r){let n=r.match(/[a-z0-9]+/gi);return n?n.map(i=>i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()).join(""):r}_toCamelCase(r){let n=r.match(/[a-z0-9]+/gi);return n?n.map((i,o)=>o===0?i.toLowerCase():i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()).join(""):r}toTextmateString(){let r="${";return r+=this.index,this.shorthandName?r+=`:/${this.shorthandName}`:this.ifValue&&this.elseValue?r+=`:?${this.ifValue}:${this.elseValue}`:this.ifValue?r+=`:+${this.ifValue}`:this.elseValue&&(r+=`:-${this.elseValue}`),r+="}",r}clone(){return new t(this.index,this.shorthandName,this.ifValue,this.elseValue)}},Nn=class t extends cg{constructor(r){super();this.name=r}resolve(r){let n=r.resolve(this);return this.transform&&(n=this.transform.resolve(n||"")),n!==void 0?(this._children=[new Vt(n)],!0):!1}toTextmateString(){let r="";return this.transform&&(r=this.transform.toTextmateString()),this.children.length===0?`\${${this.name}${r}}`:`\${${this.name}:${this.children.map(n=>n.toTextmateString()).join("")}${r}}`}clone(){let r=new t(this.name);return this.transform&&(r.transform=this.transform.clone()),r._children=this.children.map(n=>n.clone()),r}};function qI(t,e){let r=[...t];for(;r.length>0;){let n=r.shift();if(!e(n))break;r.unshift(...n.children)}}var lg=class t extends Ro{get placeholderInfo(){if(!this._placeholders){let e=[],r;this.walk(function(n){return n instanceof Bt&&(e.push(n),r=!r||r.index<n.index?n:r),!0}),this._placeholders={all:e,last:r}}return this._placeholders}get placeholders(){let{all:e}=this.placeholderInfo;return e}offset(e){let r=0,n=!1;return this.walk(i=>i===e?(n=!0,!1):(r+=i.len(),!0)),n?r:-1}fullLen(e){let r=0;return qI([e],n=>(r+=n.len(),!0)),r}enclosingPlaceholders(e){let r=[],{parent:n}=e;for(;n;)n instanceof Bt&&r.push(n),n=n.parent;return r}resolveVariables(e){return this.walk(r=>(r instanceof Nn&&r.resolve(e)&&(this._placeholders=void 0),!0)),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,r){return this._placeholders=void 0,super.replace(e,r)}toTextmateString(){return this.children.reduce((e,r)=>e+r.toTextmateString(),"")}clone(){let e=new t;return this._children=this.children.map(r=>r.clone()),e}walk(e){qI(this.children,e)}},si=class{constructor(){this._scanner=new ib;this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}text(e){return this.parse(e).toString()}parse(e,r,n){this._scanner.text(e),this._token=this._scanner.next();let i=new lg;for(;this._parse(i););let o=new Map,a=[],p=0;i.walk(l=>(l instanceof Bt&&(p+=1,l.isFinalTabstop?o.set(0,void 0):!o.has(l.index)&&l.children.length>0?o.set(l.index,l.children):a.push(l)),!0));for(let l of a){let u=o.get(l.index);if(u){let d=new Bt(l.index);d.transform=l.transform;for(let m of u)d.appendChild(m.clone());i.replace(l,[d])}}return n||(n=p>0&&r),!o.has(0)&&n&&i.appendChild(new Bt(0)),i}_accept(e,r){if(e===void 0||this._token.type===e){let n=r?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),n}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){let r=this._token;for(;this._token.type!==e;){if(this._token.type===14)return!1;if(this._token.type===5){let i=this._scanner.next();if(i.type!==0&&i.type!==4&&i.type!==5)return!1}this._token=this._scanner.next()}let n=this._scanner.value.substring(r.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),n}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let r;return(r=this._accept(5,!0))?(r=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||r,e.appendChild(new Vt(r)),!0):!1}_parseTabstopOrVariableName(e){let r,n=this._token;return this._accept(0)&&(r=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(r)?new Bt(Number(r)):new Nn(r)),!0):this._backTo(n)}_parseComplexPlaceholder(e){let r,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(r=this._accept(8,!0))))return this._backTo(n);let o=new Bt(Number(r));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new Vt("${"+r+":")),o.children.forEach(e.appendChild,e),!0}else if(o.index>0&&this._accept(7)){let a=new pg;for(;;){if(this._parseChoiceElement(a)){if(this._accept(2))continue;if(this._accept(7)&&(o.appendChild(a),this._accept(4)))return e.appendChild(o),!0}return this._backTo(n),!1}}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseChoiceElement(e){let r=this._token,n=[];for(;!(this._token.type===2||this._token.type===7);){let i;if((i=this._accept(5,!0))?i=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||i:i=this._accept(void 0,!0),!i)return this._backTo(r),!1;n.push(i)}return n.length===0?(this._backTo(r),!1):(e.appendChild(new Vt(n.join(""))),!0)}_parseComplexVariable(e){let r,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(r=this._accept(9,!0))))return this._backTo(n);let o=new Nn(r);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new Vt("${"+r+":")),o.children.forEach(e.appendChild,e),!0}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseTransform(e){let r=new ob,n="",i="";for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(6,!0)||o,n+=o;continue}if(this._token.type!==14){n+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(5,!0)||this._accept(6,!0)||o,r.appendChild(new Vt(o));continue}if(!(this._parseFormatString(r)||this._parseAnything(r)))return!1}for(;!this._accept(4);){if(this._token.type!==14){i+=this._accept(void 0,!0);continue}return!1}try{r.regexp=new RegExp(n,i)}catch{return!1}return e.transform=r,!0}_parseFormatString(e){let r=this._token;if(!this._accept(0))return!1;let n=!1;this._accept(3)&&(n=!0);let i=this._accept(8,!0);if(i)if(n){if(this._accept(4))return e.appendChild(new On(Number(i))),!0;if(!this._accept(1))return this._backTo(r),!1}else return e.appendChild(new On(Number(i))),!0;else return this._backTo(r),!1;if(this._accept(6)){let o=this._accept(9,!0);return!o||!this._accept(4)?(this._backTo(r),!1):(e.appendChild(new On(Number(i),o)),!0)}else if(this._accept(11)){let o=this._until(4);if(o)return e.appendChild(new On(Number(i),void 0,o,void 0)),!0}else if(this._accept(12)){let o=this._until(4);if(o)return e.appendChild(new On(Number(i),void 0,void 0,o)),!0}else if(this._accept(13)){let o=this._until(1);if(o){let a=this._until(4);if(a)return e.appendChild(new On(Number(i),void 0,o,a)),!0}}else{let o=this._until(4);if(o)return e.appendChild(new On(Number(i),void 0,void 0,o)),!0}return this._backTo(r),!1}_parseAnything(e){return this._token.type!==14?(e.appendChild(new Vt(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}};var ug=Object.freeze({CURRENT_YEAR:!0,CURRENT_YEAR_SHORT:!0,CURRENT_MONTH:!0,CURRENT_DATE:!0,CURRENT_HOUR:!0,CURRENT_MINUTE:!0,CURRENT_SECOND:!0,CURRENT_DAY_NAME:!0,CURRENT_DAY_NAME_SHORT:!0,CURRENT_MONTH_NAME:!0,CURRENT_MONTH_NAME_SHORT:!0,CURRENT_SECONDS_UNIX:!0,SELECTION:!0,CLIPBOARD:!0,TM_SELECTED_TEXT:!0,TM_CURRENT_LINE:!0,TM_CURRENT_WORD:!0,TM_LINE_INDEX:!0,TM_LINE_NUMBER:!0,TM_FILENAME:!0,TM_FILENAME_BASE:!0,TM_DIRECTORY:!0,TM_FILEPATH:!0,RELATIVE_FILEPATH:!0,BLOCK_COMMENT_START:!0,BLOCK_COMMENT_END:!0,LINE_COMMENT:!0,WORKSPACE_NAME:!0,WORKSPACE_FOLDER:!0,RANDOM:!0,RANDOM_HEX:!0,UUID:!0});function fg(t,e,r){let n=nZ(t)+1,i={};t.walk(o=>{if(o instanceof Nn){if(o.name===e)o.name="TM_SELECTED_TEXT";else if(r!=null&&Object.prototype.hasOwnProperty.call(r,o.name))o.parent.replace(o,[new Vt(r[o.name])]);else if(!ug[o.name]){let a;o.name in i?a=i[o.name]:(a=n++,i[o.name]=a);let p=new Bt(a);o.children.forEach(l=>p.appendChild(l)),o.parent.replace(o,[p])}}else o instanceof Bt&&(o.index.toString()===e?o.parent.replace(o,[new Nn("TM_SELECTED_TEXT")]):r!=null&&Object.prototype.hasOwnProperty.call(r,o.index)&&o.parent.replace(o,[new Vt(r[o.index])]));return!0})}function nZ(t){let e=0;return t.walk(r=>(r instanceof Bt&&(e=Math.max(e,r.index)),!0)),e}function dg(t,e,r){let n=iZ(t)+1,i={};t.walk(o=>{if(o instanceof Nn){if(o.name===e)o.name="TM_SELECTED_TEXT";else if(r!=null&&Object.prototype.hasOwnProperty.call(r,o.name))o.parent.replace(o,[new Vt(r[o.name])]);else if(!ug[o.name]){let a;o.name in i?a=i[o.name]:(a=n++,i[o.name]=a);let p=new Bt(a);o.children.forEach(l=>p.appendChild(l)),o.parent.replace(o,[p])}}else o instanceof Bt&&o.index.toString()===e&&o.parent.replace(o,[new Nn("TM_SELECTED_TEXT")]);return!0})}function iZ(t){let e=0;return t.walk(r=>(r instanceof Bt&&(e=Math.max(e,r.index)),!0)),e}function mg(t,e,r){let n=e.map(o=>oZ(t,o,r)),i=n[0];if(!n.every(o=>o===i))throw new Error("Multiple snippet definitions match the given context");if(i===-1)throw new Error("Couldn't find matching snippet definition");return r[i]}function oZ(t,e,r){let n=e.editor.document.languageId;return r.findIndex(({scope:i})=>{if(i==null)return!0;let{langIds:o,scopeTypes:a,excludeDescendantScopeTypes:p}=i;if(o!=null&&!o.includes(n))return!1;if(a!=null){let l=a.concat(p??[]),u,d;for(let m of l)try{let g=t.create({type:"containingScope",scopeType:{type:m}}).run(e)[0];e.contentRange.isRangeEqual(g.contentRange)&&(g=t.create({type:"containingScope",scopeType:{type:m},ancestorIndex:1}).run(e)[0]),(u==null||u.contentRange.contains(g.contentRange))&&(u=g,d=m)}catch{continue}return d==null?!1:u!=null&&!(p??[]).includes(d)}return!0})}var GI={camelCase(t){if(t.length===0)return"";let[e,...r]=t;return e+r.map(zI).join("")},snakeCase(t){return t.join("_")},upperSnakeCase(t){return t.map(e=>e.toUpperCase()).join("_")},pascalCase(t){return t.map(zI).join("")}};function zI(t){return t.length===0?"":t[0].toUpperCase()+t.substr(1)}var Xp=class{constructor(e,r,n,i){this.rangeUpdater=e;this.snippets=r;this.actions=n;this.modifierStageFactory=i;this.snippetParser=new si;this.run=this.run.bind(this)}getFinalStages(e){let r=this.getScopeTypes(e);return r.length===0?[]:[new Qa(this.modifierStageFactory,{type:"cascading",modifiers:r.map(n=>({type:"containingScope",scopeType:n}))})]}getScopeTypes(e){let{name:r}=e,i=this.snippets.getSnippetStrict(r).insertionScopeTypes;return i==null?[]:i.map(o=>({type:o}))}getSnippetInfo(e,r){let{name:n}=e,i=this.snippets.getSnippetStrict(n),o=mg(this.modifierStageFactory,r,i.definitions);return{body:o.body.join(`
`),formatSubstitutions(a){return a==null?void 0:sZ(i,o,a)}}}async run(e,r){let n=k().getEditableTextEditor(Tt(e));await this.actions.editNew.run(e);let{body:i,formatSubstitutions:o}=this.getSnippetInfo(r,n.selections.map(u=>new At({editor:n,contentRange:u,isReversed:!1,hasExplicitRange:!0}))),a=this.snippetParser.parse(i);dg(a,null,o(r.substitutions));let p=a.toTextmateString(),{editorSelections:l}=await Pe({rangeUpdater:this.rangeUpdater,editor:n,callback:()=>n.insertSnippet(p),preserveCursorSelections:!0,selections:{editorSelections:{selections:n.selections,behavior:0}}});return{thatSelections:l.map(u=>({editor:n,selection:u}))}}};function sZ(t,e,r){return Object.fromEntries(Object.entries(r).map(([n,i])=>{let o=(e.variables??{})[n]?.formatter??(t.variables??{})[n]?.formatter;if(o==null)return[n,i];let a=GI[o];if(a==null)throw new Error(`Couldn't find formatter ${o} for variable ${n}`);return[n,a(i.split(" "))]}))}var Jp=class{constructor(e,r,n,i){this.rangeUpdater=e;this.snippets=r;this.actions=n;this.modifierStageFactory=i;this.snippetParser=new si;this.run=this.run.bind(this)}getFinalStages(e,r){if(r.type==="named")return this.legacy().getFinalStages(r);let n=Tt(e),o=cc(r,n.document.languageId).scopeTypes??[];return o.length===0?[]:[new Qa(this.modifierStageFactory,{type:"cascading",modifiers:o.map(a=>({type:"containingScope",scopeType:a}))})]}async run(e,r){if(r.type==="named")return this.legacy().run(e,r);let n=k().getEditableTextEditor(Tt(e)),i=cc(r,n.document.languageId),o=this.snippetParser.parse(i.body),a=i.substitutions??r.substitutions;fg(o,null,a);let p=o.toTextmateString();await this.actions.editNew.run(e);let{editorSelections:l}=await Pe({rangeUpdater:this.rangeUpdater,editor:n,callback:()=>n.insertSnippet(p),preserveCursorSelections:!0,selections:{editorSelections:{selections:n.selections,behavior:0}}});return{thatSelections:l.map(u=>({editor:n,selection:u}))}}legacy(){return new Xp(this.rangeUpdater,this.snippets,this.actions,this.modifierStageFactory)}};var el=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(ii)]}async run(e){return await De(k(),e.map(({thatTarget:n})=>n),"pendingModification0"),{thatSelections:Je(await rt(e,async(n,i)=>{let{thatRanges:o}=await Pe({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(n),edits:aZ(n,i),selections:{thatRanges:i.map(({contentRange:a})=>a)}});return ts(i,o).map(([a,p])=>({editor:n,selection:p.toSelection(a.isReversed)}))}))}}};function aZ(t,e){let r=[];for(let n of e){let i=n.textualType==="token"?cZ(n):pZ(n);r.push(...i)}return r}function cZ(t){let{editor:e,contentRange:r}=t,n=Er(e.document.languageId).tokenMatcher,i=fn(n,e,r,"forward");return Array.from(rv(i)).map(([o,a])=>({range:new W(o.end,a.start),text:"",isReplace:!0}))}function pZ(t){let{document:e}=t.editor,r=t.contentRange,n=r.start.line,i=r.isSingleLine?Math.min(n+1,e.lineCount-1):r.end.line,o=Ia(LA(n,i+1),a=>e.lineAt(a));return Array.from(rv(o)).map(([a,p])=>({range:new W(a.rangeTrimmed?.end??a.range.end,p.rangeTrimmed?.start??p.range.start),text:p.isEmptyOrWhitespace?"":" ",isReplace:!0}))}var hg=class{constructor(e,r){this.rangeUpdater=e;this.actions=r;this.run=this.run.bind(this)}async run(e){let r=k().getEditableTextEditor(Tt(e)),n=k().activeEditableTextEditor,i=async()=>{await this.actions.editNew.run(e)},{cursorSelections:o}=await Pe({rangeUpdater:this.rangeUpdater,editor:r,preserveCursorSelections:!0,callback:i,selections:{cursorSelections:r.selections}}),{originalCursorSelections:a,editorSelections:p}=await Pe({rangeUpdater:this.rangeUpdater,editor:r,callback:()=>r.clipboardPaste(),selections:{originalCursorSelections:o,editorSelections:{selections:r.selections,behavior:0}}});return await r.setSelections(a),n!=null&&!n.isActive&&await n.focus(),await k().flashRanges(p.map(l=>({editor:r,range:ir(l),style:"justAdded"}))),{thatSelections:p.map(l=>({editor:r,selection:l}))}}};var gg=class{constructor(e){this.rangeUpdater=e;this.runForEditor=this.runForEditor.bind(this)}async run(e){let r=await k().clipboard.readText(),n=r.split(/\r?\n/g),i=e.length===n.length?ts(e,n).map(([a,p])=>({destination:a,text:p})):e.map(a=>({destination:a,text:r}));return{thatSelections:Je(await Ii(i,({destination:a})=>a.editor,this.runForEditor))}}async runForEditor(e,r){let n=r.map(({destination:a,text:p})=>a.constructChangeEdit(p)),{editSelections:i}=await Pe({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(e),edits:n,selections:{editSelections:{selections:n.map(({range:a})=>a),behavior:0}}}),o=ts(n,i).map(([a,p])=>a.updateRange(p).toSelection(p.isReversed));return await k().flashRanges(o.map(a=>({editor:e,range:ir(a),style:"justAdded"}))),o.map(a=>({editor:e,selection:a}))}};var yg=class{constructor(e,r){this.run=this.run.bind(this),this.runner=k().capabilities.commands.clipboardPaste!=null?new hg(e,r):new gg(e)}run(e){return this.runner.run(e)}};var tl=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e,{showDecorations:r=!0}={}){return e=Sh(e),r&&await De(k(),e,"pendingDelete",i=>i.getRemovalHighlightRange()),{thatTargets:Je(await rt(e,this.runForEditor))}}async runForEditor(e,r){let n=r.map(a=>a.constructRemovalEdit()),i=k().getEditableTextEditor(e),{editRanges:o}=await Pe({rangeUpdater:this.rangeUpdater,editor:i,edits:n,selections:{editRanges:n.map(({range:a})=>a)}});return wt(r,o).map(([a,p])=>new fo({editor:a.editor,isReversed:a.isReversed,contentRange:p}))}};var rl=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}getTexts(e,r){if(Array.isArray(r))return r.length===1?Array(e.length).fill(r[0]):r;let n=[];for(let i=0;i<e.length;++i)n[i]=(r.start+i).toString();return n}async run(e,r){await De(k(),e.map(p=>p.target),"pendingModification0");let n=this.getTexts(e,r);if(e.length!==n.length)throw new Error("Targets and texts must have same length");let i=wt(e,n).map(([p,l])=>({editor:p.editor,target:p.target,edit:p.constructChangeEdit(l)})),o=[],a=[];return await Ii(i,p=>p.editor,async(p,l)=>{let u=l.map(({edit:g})=>g),{contentSelections:d,editRanges:m}=await Pe({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(p),edits:u,selections:{contentSelections:l.map(({target:g})=>g.contentSelection),editRanges:{selections:u.map(({range:g})=>g),behavior:0}}});for(let[g,x]of wt(l,d))o.push(g.target.withContentRange(x));for(let[g,x]of wt(l,m))a.push({editor:p,selection:g.edit.updateRange(x).toSelection(!1)})}),{sourceTargets:o,thatSelections:a}}};var nl=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.getFinalStages=()=>[Gv(this.modifierStageFactory)];this.run=this.run.bind(this)}async run(e,r,n){let i=e.flatMap(a=>{let p=a.getBoundary();if(p.length!==2)throw Error("Target must have an opening and closing delimiter");return p});await De(k(),i,"pendingModification0");let o=await rt(i,async(a,p)=>{let l=p.map((m,g)=>({editor:a,range:m.contentRange,text:g%2===0?r:n})),{sourceRanges:u,thatRanges:d}=await Pe({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(a),edits:l,selections:{sourceRanges:e.map(m=>m.thatTarget.contentRange),thatRanges:e.map(m=>m.contentRange)}});return{sourceMark:pn(e,u),thatMark:pn(e,d)}});return{sourceSelections:o.flatMap(({sourceMark:a})=>a),thatSelections:o.flatMap(({thatMark:a})=>a)}}};var il=class{constructor(e){this.at=e;this.run=this.run.bind(this)}async run(e){let r=mp(e,a=>a.editor),n=Array.from(r,([a,p])=>({lineNumber:lZ(p,this.at),editor:a})),i=k().activeEditableTextEditor;for(let a of n)await k().getEditableTextEditor(a.editor).revealLine(a.lineNumber,this.at);i!=null&&!i.isActive&&await i.focus();let o=e.filter(a=>{let p=a.editor.visibleRanges,l=p[0].start.line,u=p[p.length-1].end.line;return a.contentRange.start.line>l||a.contentRange.end.line<u||a.contentRange.start.line===l&&a.contentRange.end.line===u});return await k().flashRanges(o.map(a=>({editor:a.editor,range:Hr(a.contentRange),style:"referenced"}))),{thatTargets:e}}},xg=class extends il{constructor(){super("top")}},Tg=class extends il{constructor(){super("center")}},Sg=class extends il{constructor(){super("bottom")}};function lZ(t,e){let r=Number.MAX_SAFE_INTEGER,n=0;return t.forEach(i=>{r=Math.min(r,i.contentRange.start.line),n=Math.max(n,i.contentRange.end.line)}),e==="top"?r:e==="bottom"?n:Math.floor((r+n)/2)}var ko=class{constructor(e,r){this.selectionMode=e;this.rangeMode=r;this.run=this.run.bind(this)}async run(e){let r=Tt(e),n=this.getSelections(e),i=this.selectionMode==="add"?r.selections.concat(n):n,o=this.selectionMode==="set"&&i.length===1&&i[0].isEmpty;return await k().getEditableTextEditor(r).setSelections(i,{focusEditor:!0,highlightWord:o}),{thatTargets:e}}getSelections(e){switch(this.rangeMode){case"content":return e.map(r=>r.contentSelection);case"before":return e.map(r=>new be(r.contentRange.start,r.contentRange.start));case"after":return e.map(r=>new be(r.contentRange.end,r.contentRange.end))}}},vg=class extends ko{constructor(){super("set","content")}},bg=class extends ko{constructor(){super("set","before")}},wg=class extends ko{constructor(){super("set","after")}},_g=class extends ko{constructor(){super("add","content")}},Eg=class extends ko{constructor(){super("add","before")}},Rg=class extends ko{constructor(){super("add","after")}};var ol=class{constructor(e){this.key=e;this.noAutomaticTokenExpansion=!0;this.run=this.run.bind(this)}async run(e){return{thatTargets:e,[`${this.key}Targets`]:e}}};var sl=class{constructor(e){this.treeSitter=e;this.run=this.run.bind(this)}async run(e){await De(k(),e,"referenced");let r=["# Cursorless parse tree"];for(let n of e){let{editor:i,contentRange:o}=n,a=this.treeSitter.getTree(i.document);r.push(uZ(i.document,a,o))}return k().openUntitledTextDocument({language:"markdown",content:r.join(`

`)}),{thatTargets:e}}};function uZ(t,e,r){let n=[],i=[];return KI(n,i,r,e.walk(),0),[`## ${t.filename} [${r}]
`,`\`\`\`${t.languageId}`,t.getText(r),"```","","```scm",...i,"```","","```js",...n,"```",""].join(`
`)}function KI(t,e,r,n,i){for(;;){let o=new W(n.startPosition.row,n.startPosition.column,n.endPosition.row,n.endPosition.column);if(r.intersection(o)!=null){let a="  ".repeat(i),p=fZ(n),l=a+p;if(n.nodeIsNamed)t.push(`${l}${n.nodeType} [${o}]`),e.push(`${l}(${n.nodeType}`),n.gotoFirstChild()?(KI(t,e,r,n,i+1),n.gotoParent(),e.push(`${a})`)):e[e.length-1]+=")";else{let u=`"${n.nodeType}"`;t.push(`${l}${u} [${o}]`),e.push(`${l}${u}`)}}if(!n.gotoNextSibling())return}}function fZ(t){let e=t.currentFieldName;return e!=null?`${e}: `:""}var al=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){e.length<2&&rp(k().messages,"tooFewTargets",'This action works on multiple targets, e.g. "sort every line block" instead of "sort block".');let r=e.slice().sort((a,p)=>a.contentRange.start.compareTo(p.contentRange.start)),{returnValue:n}=await this.actions.getText.run(r,{showDecorations:!1}),i=this.sortTexts(n),{thatSelections:o}=await this.actions.replace.run(r.map(a=>a.toDestination("to")),i);return{thatSelections:o}}},kg=class extends al{sortTexts(e){return e.sort((r,n)=>r.localeCompare(n,void 0,{numeric:!0,caseFirst:"upper"}))}},Pg=class extends al{sortTexts(e){return e.reverse()}},Mg=class extends al{sortTexts(e){return FT(e)}};var cl=class{constructor(e){this.modifierStageFactory=e;this.getFinalStages=()=>[this.modifierStageFactory.create(ii)];this.run=this.run.bind(this)}async run(e){let r=e.map(({thatTarget:n})=>n);return await De(k(),r,"referenced"),await rt(e,async(n,i)=>{let o=i.map(a=>ln(a,a.contentRange));await k().getEditableTextEditor(n).toggleBreakpoint(o)}),{thatTargets:e}}};var pl=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e,r,n){let i=await rt(e,async(o,a)=>{let p=a.map(v=>({start:new be(v.contentRange.start,v.contentRange.start),end:new be(v.contentRange.end,v.contentRange.end)})),l=p.flatMap(({start:v,end:F})=>[{text:r,range:v},{text:n,range:F,isReplace:!0}]),u=a.map(v=>v.contentSelection),{boundariesStartSelections:d,boundariesEndSelections:m,sourceSelections:g,thatSelections:x}=await Pe({rangeUpdater:this.rangeUpdater,editor:k().getEditableTextEditor(o),edits:l,selections:{boundariesStartSelections:{selections:p.map(({start:v})=>v),behavior:2},boundariesEndSelections:{selections:p.map(({end:v})=>v),behavior:3},sourceSelections:{selections:u,behavior:1},thatSelections:{selections:u,behavior:0}}}),b=[...d,...m];return await k().flashRanges(b.map(v=>({editor:o,range:ir(v),style:"justAdded"}))),{sourceMark:g.map(v=>({editor:o,selection:v})),thatMark:x.map(v=>({editor:o,selection:v}))}});return{sourceSelections:i.flatMap(({sourceMark:o})=>o),thatSelections:i.flatMap(({thatMark:o})=>o)}}};var ll=class{constructor(e,r,n){this.rangeUpdater=e;this.snippets=r;this.modifierStageFactory=n;this.snippetParser=new si;this.run=this.run.bind(this)}getFinalStages(e){let r=this.getScopeType(e);return r==null?[]:[new bo(this.modifierStageFactory,{type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:r}})]}getScopeType(e){let{name:r,variableName:n}=e,a=(this.snippets.getSnippetStrict(r).variables??{})[n]?.wrapperScopeType;return a==null?void 0:{type:a}}getBody(e,r){let{name:n}=e,i=this.snippets.getSnippetStrict(n);return mg(this.modifierStageFactory,r,i.definitions).body.join(`
`)}async run(e,r){let n=k().getEditableTextEditor(Tt(e)),i=this.getBody(r,e),o=this.snippetParser.parse(i);dg(o,r.variableName);let a=o.toTextmateString();await De(k(),e,"pendingModification0");let p=e.map(d=>d.contentSelection),l=()=>n.insertSnippet(a,p),{targetSelections:u}=await Pe({rangeUpdater:this.rangeUpdater,editor:n,callback:l,preserveCursorSelections:!0,selections:{targetSelections:p}});return{thatSelections:u.map(d=>({editor:n,selection:d}))}}};var ul=class{constructor(e,r,n){this.rangeUpdater=e;this.snippets=r;this.modifierStageFactory=n;this.snippetParser=new si;this.run=this.run.bind(this)}getFinalStages(e,r){if(r.type==="named")return this.legacy().getFinalStages(r);let n=Tt(e),i=cc(r,n.document.languageId);return i.scopeType==null?[]:[new bo(this.modifierStageFactory,{type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:i.scopeType}})]}async run(e,r){if(r.type==="named")return this.legacy().run(e,r);let n=k().getEditableTextEditor(Tt(e)),i=cc(r,n.document.languageId),o=this.snippetParser.parse(i.body);fg(o,i.variableName);let a=o.toTextmateString();await De(k(),e,"pendingModification0");let p=e.map(u=>u.contentSelection),{targetSelections:l}=await Pe({rangeUpdater:this.rangeUpdater,editor:n,callback:()=>n.insertSnippet(a,p),preserveCursorSelections:!0,selections:{targetSelections:p}});return{thatSelections:l.map(u=>({editor:n,selection:u}))}}legacy(){return new ll(this.rangeUpdater,this.snippets,this.modifierStageFactory)}};var dZ=/-?\d+(\.\d+)?/g,Ag=class{constructor(e,r){this.actions=e;this.isIncrement=r;this.run=this.run.bind(this)}async run(e){let r=[];return await Ii(e,n=>n.editor,async(n,i)=>{let o=await this.runOnEditor(n,i);r.push(...o)}),{thatSelections:r}}async runOnEditor(e,r){let{document:n}=e,i=[],o=[];for(let p of r){let l=n.offsetAt(p.contentRange.start),u=p.contentText,d=tp(u,dZ);for(let m of d)i.push(mZ(e,l,m)),o.push(hZ(this.isIncrement,m.text))}let{thatSelections:a}=await this.actions.replace.run(i,o);return a}},Dg=class extends Ag{constructor(e){super(e,!0)}},Ig=class extends Ag{constructor(e){super(e,!1)}};function mZ(t,e,r){return new Be({editor:t,isReversed:!1,contentRange:new W(t.document.positionAt(e+r.index),t.document.positionAt(e+r.index+r.text.length))}).toDestination("to")}function hZ(t,e){return e.includes(".")?yZ(t,e).toString():gZ(t,e).toString()}function gZ(t,e){let r=parseInt(e),n=1;return r+(t?n:-n)}function yZ(t,e){let r=parseFloat(e),i=Math.abs(r)<=1?.1:1,o=r+(t?i:-i);return parseFloat(o.toPrecision(15))/1}var Fg=class{constructor(e,r,n,i){this.treeSitter=e;this.snippets=r;this.rangeUpdater=n;this.modifierStageFactory=i;this.addSelection=new _g;this.addSelectionBefore=new Eg;this.addSelectionAfter=new Rg;this.callAsFunction=new $p(this);this.clearAndSetSelection=new jp(this);this.copyToClipboard=new Wh(this,this.rangeUpdater);this.cutToClipboard=new $h(this);this.decrement=new Ig(this);this.deselect=new qp;this.editNew=new jh(this.rangeUpdater,this);this.editNewLineAfter=new Gh(this,this.modifierStageFactory);this.editNewLineBefore=new zh(this,this.modifierStageFactory);this.executeCommand=new zp(this.rangeUpdater);this.extractVariable=new Lh(this.rangeUpdater);this.findInDocument=new Qh(this);this.findInWorkspace=new Zh(this);this.flashTargets=new Yh;this.foldRegion=new Ph(this.rangeUpdater);this.followLink=new sc({openAside:!1});this.followLinkAside=new sc({openAside:!0});this.generateSnippet=new ac(this.snippets);this.getText=new Qp;this.gitAccept=new Uh(this.rangeUpdater);this.gitRevert=new Hh(this.rangeUpdater);this.gitStage=new Vh(this.rangeUpdater);this.gitUnstage=new Bh(this.rangeUpdater);this.highlight=new Zp;this.increment=new Dg(this);this.indentLine=new Jh(this.rangeUpdater);this.insertCopyAfter=new ng(this.rangeUpdater,this.modifierStageFactory);this.insertCopyBefore=new rg(this.rangeUpdater,this.modifierStageFactory);this.insertEmptyLineAfter=new sg(this.rangeUpdater,this.modifierStageFactory);this.insertEmptyLineBefore=new og(this.rangeUpdater,this.modifierStageFactory);this.insertEmptyLinesAround=new ig(this.rangeUpdater,this.modifierStageFactory);this.insertSnippet=new Jp(this.rangeUpdater,this.snippets,this,this.modifierStageFactory);this.joinLines=new el(this.rangeUpdater,this.modifierStageFactory);this.breakLine=new Th(this.rangeUpdater);this.moveToTarget=new bh(this.rangeUpdater);this.outdentLine=new eg(this.rangeUpdater);this.pasteFromClipboard=new yg(this.rangeUpdater,this);this.randomizeTargets=new Mg(this);this.remove=new tl(this.rangeUpdater);this.rename=new Ah(this.rangeUpdater);this.replace=new rl(this.rangeUpdater);this.replaceWithTarget=new vh(this.rangeUpdater);this.revealDefinition=new Fh(this.rangeUpdater);this.revealTypeDefinition=new Ch(this.rangeUpdater);this.reverseTargets=new Pg(this);this.rewrapWithPairedDelimiter=new nl(this.rangeUpdater,this.modifierStageFactory);this.scrollToBottom=new Sg;this.scrollToCenter=new Tg;this.scrollToTop=new xg;this.setSelection=new vg;this.setSelectionAfter=new wg;this.setSelectionBefore=new bg;this.showDebugHover=new Nh(this.rangeUpdater);this.showHover=new Oh(this.rangeUpdater);this.showQuickFix=new Ih(this.rangeUpdater);this.showReferences=new Dh(this.rangeUpdater);this.sortTargets=new kg(this);this.swapTargets=new wh(this.rangeUpdater);this.toggleLineBreakpoint=new cl(this.modifierStageFactory);this.toggleLineComment=new Eh(this.rangeUpdater);this.unfoldRegion=new Mh(this.rangeUpdater);this.wrapWithPairedDelimiter=new pl(this.rangeUpdater);this.wrapWithSnippet=new ul(this.rangeUpdater,this.snippets,this.modifierStageFactory);this["experimental.setInstanceReference"]=new ol("instanceReference");this["private.showParseTree"]=new sl(this.treeSitter);this["private.getTargets"]=new Kp;this["private.setKeyboardTarget"]=new ol("keyboard")}};async function QI(t,e,r){let n=await t.getFocusedElementType();if(n==null||n==="textEditor")return null;let i=r.action;switch(i.name){case"replace":return Cg(i.destination)&&Array.isArray(i.replaceWith)?{action:"insert",modifiers:Og(i.destination),text:i.replaceWith.join(`
`)}:null;case"replaceWithTarget":return Cg(i.destination)?{action:"insert",modifiers:Og(i.destination),text:await sb(e,i.source)}:null;case"moveToTarget":if(Cg(i.destination)){let o=await sb(e,i.source);return await xZ(e,i.source),{action:"insert",modifiers:Og(i.destination),text:o}}return null;case"callAsFunction":return Ng(i.argument)?{action:i.name,modifiers:Lg(i.argument),callee:await sb(e,i.callee)}:null;case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return Ng(i.target)?{action:i.name,modifiers:Lg(i.target),left:i.left,right:i.right}:null;case"pasteFromClipboard":return Cg(i.destination)?{action:i.name,modifiers:Og(i.destination)}:null;case"swapTargets":case"editNew":case"insertSnippet":case"generateSnippet":case"wrapWithSnippet":case"parsed":return null;default:return Ng(i.target)?{action:i.name,modifiers:Lg(i.target)}:null}}function Cg(t){return t.type==="implicit"?!0:t.type==="primitive"?t.insertionMode==="to"&&Ng(t.target):!1}function Ng(t){return t.type==="implicit"?!0:t.type==="primitive"?t.mark==null||t.mark.type==="cursor":!1}function Og(t){return t.type==="primitive"?Lg(t.target):[]}function Lg(t){return t.type==="primitive"&&t.modifiers!=null&&t.modifiers.length>0?t.modifiers:[]}async function sb(t,e){return(await t({name:"getText",target:e})).returnValue.join(`
`)}async function xZ(t,e){await t({name:"remove",target:e})}function ZI(t,e){let{anchor:r,rangeType:n,active:i}=t;if(r.type!=="primitive"||n!=="continuous")return t;let o=r.modifiers.map((a,p)=>[a,p]);for(let[a,p]of o.reverse())for(let l of TZ){let u=l.accept(a);if(u.accepted){let[d,m]=[r.modifiers.slice(0,p+1),r.modifiers.slice(p+1)],g={...t,anchor:m.length===0&&e?{type:"implicit"}:{type:"primitive",mark:r.mark,modifiers:m},active:jf(i,x=>{x.modifiers=x.modifiers.slice(Ko(x.modifiers,b=>l.accept(b).accepted)+1)})};return g=u.transformTarget?.(g)??g,{type:"primitive",mark:{type:"target",target:g},modifiers:d}}}return t}var TZ=[{accept(t){return t.type==="everyScope"&&t.scopeType.type!=="instance"?{accepted:!0,transformTarget(e){return{...e,exclusionScopeType:t.scopeType}}}:{accepted:!1}}},{accept(t){return{accepted:(t.type==="everyScope"||t.type==="relativeScope"||t.type==="ordinalScope")&&t.scopeType.type==="instance"}}}];function cb(t,e){switch(t.type){case"list":return SZ(t,e);case"range":return YI(t,e);case"primitive":return Ug(t,e);case"implicit":return t}}function SZ(t,e){return{...t,elements:t.elements.map((r,n)=>{let i=e.concat(t.elements.slice(0,n));switch(r.type){case"range":return YI(r,i);case"primitive":return Ug(r,i)}})}}function YI(t,e){let r=vZ(t,e),n=t.anchor.type==="implicit"||t.anchor.mark==null;return ZI(r,n)}function vZ(t,e){return{type:"range",rangeType:t.rangeType??"continuous",excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1,anchor:t.anchor.type==="implicit"?t.anchor:Ug(t.anchor,e),active:Ug(t.active,e.concat(t.anchor))}}function Ug(t,e){let r=ab(t.mark??(bZ(t)?EZ(e):null)??{type:"cursor"}),n=XI(t)??RZ(e)??kZ(e)??[];return{type:t.type,mark:r,modifiers:n}}function bZ(t){return t.modifiers?.some(e=>e.type==="inferPreviousMark")??!1}function XI(t){let e=t.modifiers?.filter(r=>r.type!=="inferPreviousMark")??[];return e.length!==0?e:void 0}function wZ(t){if(_Z(t))return[{type:"containingScope",scopeType:{type:"line"}}]}function _Z(t){let e=r=>r?.type==="lineNumber";return e(t.mark)?!0:t.mark?.type==="range"?e(t.mark.anchor)&&e(t.mark.active):!1}function EZ(t){return fl(t,e=>e.mark)}function RZ(t){return fl(t,XI)}function kZ(t){return fl(t,wZ)}function fl(t,e){for(let r=t.length-1;r>-1;--r){let n=t[r];switch(n.type){case"primitive":{let i=e(n);if(i!=null)return i;break}case"range":{let i=fl([n.anchor],e);if(i!=null)return i;break}case"list":{let i=fl(n.elements,e);if(i!=null)return i;break}}}}function ab(t){switch(t.type){case"range":return{...t,anchor:ab(t.anchor),active:ab(t.active)};case"target":return{type:"target",target:cb(t.target,[])};default:return t}}var Hg=class{constructor(e,r,n,i,o){this.commandServerApi=e;this.debug=r;this.storedTargets=n;this.pipelineRunner=i;this.actions=o;this.finalStages=[];this.runAction=this.runAction.bind(this),this.inferenceContext=new pb(this.debug)}async run(e){if(es(e)){let u=await QI(this.commandServerApi,this.runAction,e);if(u!=null)return{fallback:u}}let{returnValue:r,thatSelections:n,thatTargets:i,sourceSelections:o,sourceTargets:a,instanceReferenceTargets:p,keyboardTargets:l}=await this.runAction(e.action);return this.storedTargets.set("that",JI(i,n)),this.storedTargets.set("source",JI(a,o)),this.storedTargets.set("instanceReference",p),this.storedTargets.set("keyboard",l,{history:!0}),{returnValue:r}}runAction(e){switch(this.inferenceContext.reset(),this.finalStages=[],e.name){case"replaceWithTarget":return this.actions.replaceWithTarget.run(this.getTargets(e.source),this.getDestinations(e.destination));case"moveToTarget":return this.actions.moveToTarget.run(this.getTargets(e.source),this.getDestinations(e.destination));case"swapTargets":return this.actions.swapTargets.run(this.getTargets(e.target1),this.getTargets(e.target2));case"callAsFunction":return this.actions.callAsFunction.run(this.getTargets(e.callee),this.getTargets(e.argument));case"wrapWithPairedDelimiter":return this.actions.wrapWithPairedDelimiter.run(this.getTargets(e.target),e.left,e.right);case"rewrapWithPairedDelimiter":return this.finalStages=this.actions.rewrapWithPairedDelimiter.getFinalStages(),this.actions.rewrapWithPairedDelimiter.run(this.getTargets(e.target),e.left,e.right);case"pasteFromClipboard":return this.actions.pasteFromClipboard.run(this.getDestinations(e.destination));case"executeCommand":return this.actions.executeCommand.run(this.getTargets(e.target),e.commandId,e.options);case"replace":return this.actions.replace.run(this.getDestinations(e.destination),e.replaceWith);case"highlight":return this.actions.highlight.run(this.getTargets(e.target),e.highlightId);case"generateSnippet":return this.actions.generateSnippet.run(this.getTargets(e.target),e.directory,e.snippetName);case"insertSnippet":return this.finalStages=this.actions.insertSnippet.getFinalStages(this.getDestinations(e.destination),e.snippetDescription),this.actions.insertSnippet.run(this.getDestinations(e.destination),e.snippetDescription);case"wrapWithSnippet":return this.finalStages=this.actions.wrapWithSnippet.getFinalStages(this.getTargets(e.target),e.snippetDescription),this.actions.wrapWithSnippet.run(this.getTargets(e.target),e.snippetDescription);case"editNew":return this.actions.editNew.run(this.getDestinations(e.destination));case"getText":return this.actions.getText.run(this.getTargets(e.target),e.options);case"parsed":return this.runAction(yd(e.content,e.arguments));default:{let r=this.actions[e.name];if(r==null)throw new Error(`Unknown action: ${e.name}`);return this.finalStages=r.getFinalStages?.()??[],this.noAutomaticTokenExpansion=r.noAutomaticTokenExpansion??!1,r.run(this.getTargets(e.target))}}}getTargets(e){let r=this.inferenceContext.run(e);return this.pipelineRunner.run(r,{actionFinalStages:this.finalStages,noAutomaticTokenExpansion:this.noAutomaticTokenExpansion})}getDestinations(e){switch(e.type){case"list":return e.destinations.flatMap(r=>this.getDestinations(r));case"primitive":return this.getTargets(e.target).map(r=>r.toDestination(e.insertionMode));case"implicit":return this.getTargets({type:"implicit"}).map(r=>r.toDestination("to"))}}},pb=class{constructor(e){this.debug=e;this.previousTargets=[]}run(e){let r=cb(e,this.previousTargets);return this.debug.active&&(this.debug.log("Full target:"),this.debug.log(JSON.stringify(r,null,2))),this.previousTargets.push(e),r}reset(){this.previousTargets=[]}};function JI(t,e){if(t!=null&&e!=null)throw Error("Actions may only return full targets or selections for that mark");return e!=null?e.map(ic):t}var Vg=class{constructor(e,r){this.readableHatMap=e;this.mark=r}run(){let e=this.readableHatMap.getToken(this.mark.symbolColor,this.mark.character);if(e==null)throw new Error(`Couldn't find mark ${this.mark.symbolColor} '${this.mark.character}'`);return[new At({editor:e.editor,contentRange:e.range,isReversed:!1,hasExplicitRange:!1})]}};var Bg=class{constructor(e){this.mark=e}run(){let{editorId:e,range:{start:r,end:n}}=this.mark,i=k().visibleTextEditors.find(a=>a.id===e);if(i==null)throw new Error(`Couldn't find editor '${e}'`);let o=new W(r.line,r.character,n.line,n.character);return[new At({editor:i,contentRange:o,isReversed:!1,hasExplicitRange:!1})]}};var Wg=class{constructor(e){this.mark=e}run(){let e=k().activeTextEditor;if(e==null)return[];let r=PZ(e,this.mark.lineNumberType,this.mark.lineNumber),n=e.document.lineAt(r).range;return[nv(e,!1,n)]}},PZ=(t,e,r)=>{switch(e){case"absolute":return r;case"relative":return t.selections[0].active.line+r;case"modulo100":{let i=t.visibleRanges[0].start.line,o=t.visibleRanges[t.visibleRanges.length-1].end.line,a=Math.floor(i/100)*100,p=[],l=[],u=a+r;for(;u<=o;)u>=i&&(t.visibleRanges.find(m=>u>=m.start.line&&u<=m.end.line)?p.push(u):l.push(u)),u+=100;if(p.length===1)return p[0];if(p.length+l.length>1)throw new Error("Multiple lines matching");if(l.length===1)return l[0];throw new Error("Line is not in viewport")}}};var $g=class{constructor(e){this.mark=e}run(){return[]}};var jg=class{constructor(e,r){this.markStageFactory=e;this.mark=r}run(){let e=this.markStageFactory.create(this.mark.anchor),r=this.markStageFactory.create(this.mark.active),n=e.run(),i=r.run();if(n.length!==1||i.length!==1)throw new Error("Expected single anchor and active target");return[wo(n[0],i[0],this.mark.excludeAnchor,this.mark.excludeActive)]}};var qg=class{constructor(e,r){this.storedTargets=e;this.key=r}run(){let e=this.storedTargets.get(this.key);if(e==null||e.length===0)throw Error(`No available ${this.key} marks`);return e}};var zg=class{constructor(e,r){this.targetPipelineRunner=e;this.mark=r}run(){return this.targetPipelineRunner.run(this.mark.target)}};var Gg=class{constructor(e,r){this.readableHatMap=e;this.storedTargets=r;this.create=this.create.bind(this)}setPipelineRunner(e){this.targetPipelineRunner=e}create(e){switch(e.type){case"cursor":return new Ma;case"that":case"source":case"keyboard":return new qg(this.storedTargets,e.type);case"decoratedSymbol":return new Vg(this.readableHatMap,e);case"lineNumber":return new Wg(e);case"range":return new jg(this,e);case"nothing":return new $g(e);case"target":return new zg(this.targetPipelineRunner,e);case"explicit":return new Bg(e);default:{let r=e,{type:n}=e;throw new Error(`Unknown mark: ${n}`)}}}};async function eF(t,e,r,n,i,o,a,p,l,u){r.active&&(r.log("command:"),r.log(JSON.stringify(u,null,2)));let d=LS(u),m=await n.getReadableMap(d.usePrePhraseSnapshot),g=AZ(t,e,a,r,o,m,i,p);for(let b of l)g=b.wrapCommandRunner(m,g);let x=await g.run(d);return await MZ(u,x)}async function MZ(t,e){if(es(t))return e;if("returnValue"in e)return e.returnValue}function AZ(t,e,r,n,i,o,a,p){let l=new nc(r,i,new Ha(r)),u=new Gg(o,i),d=new Xm(l,u);return u.setPipelineRunner(d),new Hg(e,n,i,d,new Fg(t,a,p,l))}var tF=["clojure","css","latex","ruby","rust","scala","scss"];async function rF(t,e){await DZ(t,e)}async function DZ(t,e){let r=[];for(let n of tF)await t.loadLanguage(n),await e.loadLanguage(n),ki(Bp[n]??{}).map(i=>{e.get(n)?.getScopeHandler({type:i})!=null&&r.push(`Scope '${i}' defined as both legacy and new for language ${n}`)});if(r.length>0)throw Error(r.join(`
`))}function nF(t){return OP(t)?fp(t.type).replace("."," "):t.type==="surroundingPair"?`Matching pair of ${fp(t.delimiter)}`:t.type==="customRegex"?`Regex \`${t.regex}\``:"Unknown scope type"}var Kg=class{constructor(e){this.customSpokenFormGenerator=e;this.listeners=[];this.disposable=e.onDidChangeCustomSpokenForms(()=>this.onChange()),this.onDidChangeScopeInfo=this.onDidChangeScopeInfo.bind(this),this.getScopeTypeInfo=this.getScopeTypeInfo.bind(this),this.updateScopeTypeInfos()}onDidChangeScopeInfo(e){return e(this.getScopeTypeInfos()),this.listeners.push(e),{dispose:()=>{nr(this.listeners,e)}}}async onChange(){this.updateScopeTypeInfos(),this.listeners.forEach(e=>e(this.scopeInfos))}updateScopeTypeInfos(){let e=[...Jo.filter(r=>r!=="instance").map(r=>({type:r})),...Of.map(r=>({type:"surroundingPair",delimiter:r})),...this.customSpokenFormGenerator.getCustomRegexScopeTypes()];this.scopeInfos=e.map(r=>this.getScopeTypeInfo(r))}getScopeTypeInfos(){return this.scopeInfos}getScopeTypeInfo(e){return{scopeType:e,spokenForm:this.customSpokenFormGenerator.scopeTypeToSpokenForm(e),humanReadableName:nF(e),isLanguageSpecific:IZ(e)}}dispose(){this.disposable.dispose()}};function IZ(t){switch(t.type){case"string":case"argumentOrParameter":case"anonymousFunction":case"attribute":case"branch":case"class":case"className":case"collectionItem":case"collectionKey":case"command":case"comment":case"private.fieldAccess":case"functionCall":case"functionCallee":case"functionName":case"ifStatement":case"instance":case"interior":case"list":case"map":case"name":case"namedFunction":case"regularExpression":case"statement":case"type":case"value":case"condition":case"section":case"sectionLevelOne":case"sectionLevelTwo":case"sectionLevelThree":case"sectionLevelFour":case"sectionLevelFive":case"sectionLevelSix":case"selector":case"private.switchStatementSubject":case"unit":case"xmlBothTags":case"xmlElement":case"xmlEndTag":case"xmlStartTag":case"part":case"chapter":case"subSection":case"subSubSection":case"namedParagraph":case"subParagraph":case"environment":case"textFragment":case"disqualifyDelimiter":case"pairDelimiter":return!0;case"character":case"word":case"token":case"identifier":case"line":case"sentence":case"paragraph":case"boundedParagraph":case"document":case"nonWhitespaceSequence":case"boundedNonWhitespaceSequence":case"url":case"notebookCell":case"surroundingPair":case"surroundingPairInterior":case"customRegex":case"glyph":return!1;case"oneOf":throw Error(`Can't decide whether scope type ${JSON.stringify(t,void 0,3)} is language-specific`)}}function lb(t,e,r){if(!r)return t.document.range;let n=t.visibleRanges.reduce((a,p)=>a.union(p));n=t.document.range.intersection(n.with(n.start.translate(-10),n.end.translate(10)));let i=mf(Array.from(e.generateScopes(t,n.start,"forward",{containment:"required"})))?.domain??n,o=mf(Array.from(e.generateScopes(t,n.end,"forward",{containment:"required"})))?.domain??n;return i.union(o)}function Rs(t){return{contentRange:t.contentRange,removalRange:t.getRemovalRange(),removalHighlightRange:t.getRemovalHighlightRange(),leadingDelimiter:iF(t.getLeadingDelimiterTarget()),trailingDelimiter:iF(t.getTrailingDelimiterTarget()),interior:t.getInterior()?.map(Rs),boundary:t.getBoundary()?.map(Rs),insertionDelimiter:t.insertionDelimiter}}function iF(t){return t!=null?Rs(t):void 0}function oF(t,e,r,n,i){return Ia(e.generateScopes(t,n.start,"forward",{includeDescendantScopes:!0,distalPosition:n.end}),o=>({domain:o.domain,ranges:o.getTargets(!1).map(a=>({range:a.contentRange,targets:i?FZ(r,a).map(Rs):void 0}))}))}function FZ(t,e){try{return t.run(e)}catch(r){if(r.name==="NoContainingScopeError")return[];throw r}}function sF(t,e,r){return Ia(e.generateScopes(t,r.start,"forward",{includeDescendantScopes:!0,distalPosition:r.end}),n=>({domain:n.domain,targets:n.getTargets(!1).map(Rs)}))}var Qg=class{constructor(e,r){this.scopeHandlerFactory=e;this.modifierStageFactory=r;this.provideScopeRanges=this.provideScopeRanges.bind(this),this.provideIterationScopeRanges=this.provideIterationScopeRanges.bind(this)}provideScopeRanges(e,{scopeType:r,visibleOnly:n}){let i=this.scopeHandlerFactory.maybeCreate(r,e.document.languageId);return i==null?[]:sF(e,i,lb(e,i,n))}provideIterationScopeRanges(e,{scopeType:r,visibleOnly:n,includeNestedTargets:i}){let{languageId:o}=e.document,a=this.scopeHandlerFactory.maybeCreate(r,o);if(a==null)return[];let p=this.scopeHandlerFactory.maybeCreate(a.iterationScopeType,o);return p==null?[]:oF(e,p,this.modifierStageFactory.create({type:"everyScope",scopeType:r}),lb(e,a,n),i)}};var Zg=class{constructor(e,r){this.scopeRangeProvider=r;this.disposables=[];this.listeners=[];this.onChange=this.onChange.bind(this),this.onDidChangeScopeRanges=this.onDidChangeScopeRanges.bind(this),this.onDidChangeIterationScopeRanges=this.onDidChangeIterationScopeRanges.bind(this);let n=new Qn(k().configuration,()=>this.onChange());this.disposables.push(k().onDidChangeVisibleTextEditors(n.run),k().onDidOpenTextDocument(n.run),k().onDidCloseTextDocument(n.run),k().onDidChangeTextDocument(n.run),k().onDidChangeTextEditorVisibleRanges(n.run),e.onDidChangeDefinition(this.onChange),n)}onDidChangeScopeRanges(e,r){let n=()=>{k().visibleTextEditors.forEach(i=>{let o;try{o=this.scopeRangeProvider.provideScopeRanges(i,r)}catch(a){if(st(k().messages,"ScopeRangeWatcher.provide",a.message),o=[],k().runMode==="test")throw a}e(i,o)})};return this.listeners.push(n),n(),{dispose:()=>{nr(this.listeners,n)}}}onDidChangeIterationScopeRanges(e,r){let n=()=>{k().visibleTextEditors.forEach(i=>{e(i,this.scopeRangeProvider.provideIterationScopeRanges(i,r))})};return this.listeners.push(n),n(),{dispose:()=>{nr(this.listeners,n)}}}onChange(){this.listeners.forEach(e=>e())}dispose(){this.disposables.forEach(({dispose:e})=>{try{e()}catch{}})}};var Yg=class{constructor(e){this.scopeHandlerFactory=e;this.getScopeSupport=this.getScopeSupport.bind(this),this.getIterationScopeSupport=this.getIterationScopeSupport.bind(this)}getScopeSupport(e,r){let{languageId:n}=e.document,i=this.scopeHandlerFactory.maybeCreate(r,n);return i==null?cF(n,r):aF(e,i)?0:1}getIterationScopeSupport(e,r){let{languageId:n}=e.document,i=this.scopeHandlerFactory.maybeCreate(r,n);if(i==null)return cF(n,r);let o=this.scopeHandlerFactory.maybeCreate(i.iterationScopeType,n);return o==null?3:aF(e,o)?0:1}};function aF(t,e){return!UP(e.generateScopes(t,new le(0,0),"forward"))}function cF(t,e){switch(e.type){case"notebookCell":return 3;default:return Bp[t]?.[e.type]!=null?2:3}}var Xg=class{constructor(e,r,n){this.scopeSupportChecker=r;this.scopeInfoProvider=n;this.listeners=[];this.onChange=this.onChange.bind(this),this.onDidChangeScopeSupport=this.onDidChangeScopeSupport.bind(this);let i=new Qn(k().configuration,()=>this.onChange());this.disposable=LP(k().onDidOpenTextDocument(i.run),k().onDidCloseTextDocument(i.run),k().onDidChangeActiveTextEditor(i.run),k().onDidChangeTextDocument(i.run),e.onDidChangeDefinition(i.run),this.scopeInfoProvider.onDidChangeScopeInfo(this.onChange),i)}onDidChangeScopeSupport(e){return e(this.getSupportLevels()),this.listeners.push(e),{dispose:()=>{nr(this.listeners,e)}}}onChange(){if(this.listeners.length===0)return;let e=this.getSupportLevels();this.listeners.forEach(r=>r(e))}getSupportLevels(){let e=k().activeTextEditor,r=e==null?()=>3:o=>this.scopeSupportChecker.getScopeSupport(e,o),n=e==null?()=>3:o=>this.scopeSupportChecker.getIterationScopeSupport(e,o);return this.scopeInfoProvider.getScopeTypeInfos().map(o=>({...o,support:r(o.scopeType),iterationScopeSupport:n(o.scopeType)}))}dispose(){this.disposable.dispose()}};async function pF({ide:t,hats:e,treeSitterQueryProvider:r,treeSitter:n=new Zd,commandServerApi:i=new qd,talonSpokenForms:o=new Qd,snippets:a=new Kd}){bd(t);let p=new Ud(t),l=new jd,u=new _d,d=new Ld(t,u),m=new Jd(o),g=e!=null?new Wd(l,p,e,i):new zd;g.allocateHats();let x=r?await Wm.create(t,n,r):new Gd;t.disposeOnExit(l,x,g,p,d);let b=[],v,F=I=>(v=I,eF(n,i,p,g,a,u,x,l,b,I));return{commandApi:{runCommand(I){return F(I)},runCommandSafe(...I){return F(Nf(I))},repeatPreviousCommand(){if(v==null)throw new Error("No previous command");return F(v)}},scopeProvider:OZ(x,u,m),customSpokenFormGenerator:m,storedTargets:u,hatTokenMap:g,injectIde:bd,runIntegrationTests:()=>rF(n,x),addCommandRunnerDecorator:I=>{b.push(I)}}}function OZ(t,e,r){let n=new Ha(t),i=new Qg(n,new nc(t,e,n)),o=new Zg(t,i),a=new Yg(n),p=new Kg(r),l=new Xg(t,a,p);return{provideScopeRanges:i.provideScopeRanges,provideIterationScopeRanges:i.provideIterationScopeRanges,onDidChangeScopeRanges:o.onDidChangeScopeRanges,onDidChangeIterationScopeRanges:o.onDidChangeIterationScopeRanges,getScopeSupport:a.getScopeSupport,getIterationScopeSupport:a.getIterationScopeSupport,onDidChangeScopeSupport:l.onDidChangeScopeSupport,getScopeInfo:p.getScopeTypeInfo,onDidChangeScopeInfo:p.onDidChangeScopeInfo}}function lF(t,e){switch(e.type){case"UntypedTarget":return new At({editor:t,isReversed:e.isReversed,contentRange:Rf(e.contentRange),hasExplicitRange:e.hasExplicitRange});case"LineTarget":return new sr({editor:t,isReversed:e.isReversed,contentRange:Rf(e.contentRange)});default:throw Error(`Unsupported target type ${e.type}`)}}var ULe=Symbol("unused");var dl=class{constructor(e){this.position=e}},HLe={$0:new dl(0),$1:new dl(1),$2:new dl(2)};var uF=require("node:events"),Jg=class{constructor(){this.apis=new Map,this.commands=new Map,this.eventEmitter=new uF.EventEmitter}registerExtensionApi(e,r){this.apis.set(e,r)}getExtensionApi(e){return this.apis.get(e)}registerCommand(e,r){this.commands.set(e,r)}async executeCommand(e,...r){return await this.commands.get(e)(...r)}onEvent(e,r){return this.eventEmitter.on(e,r)}emitEvent(e,...r){return this.eventEmitter.emit(e,...r)}};function qr(){return global._neovimRegistry==null&&(global._neovimRegistry=new Jg),global._neovimRegistry}var fF="pokey.cursorless";async function ey(t,e){let r='return require("cursorless").buffer_get_selection()',[n,i,o,a,p]=await e.executeLua(r,[]),l;return p===!0?l=[new be(new le(o-1,a-1),new le(n-1,i-1))]:l=[new be(new le(n-1,i-1),new le(o-1,a-1))],console.debug(`bufferGetSelections(): selections=(${l[0].start.line}, ${l[0].start.character}), (${l[0].end.line}, ${l[0].end.character}) neovim=(${n},${i}),(${o},${a}),reverse=${p}`),l}async function dF(t,e){if(e.length!==1)throw new Error("bufferSetSelections() only supports one selection");let r=`return require("cursorless").select_range(${e[0].start.line+1}, ${e[0].start.character}, ${e[0].end.line+1}, ${e[0].end.character})`;console.debug(`bufferSetSelections() selections=(${e[0].start.line},${e[0].start.character}),(${e[0].end.line},${e[0].end.character}) luaCode="${r}"`),await t.executeLua(r,[])}async function mF(t,e,r){let n='return require("cursorless").window_get_visible_lines()',[i,o]=await e.executeLua(n,[]),a=new W(new le(i-1,0),new le(o-1,r[o-1].length-1));return console.debug(`windowGetVisibleRanges(): range=(${a.start.line}, ${a.start.character}), (${a.end.line}, ${a.end.character})`),[a]}async function hF(t){return await t.executeLua('return require("cursorless.utils").cursorless_nvim_path()',[])}async function ty(t,e){await e.callFunction("setreg",["*",t])}async function gF(t){return await t.callFunction("getreg",["*"])}async function yF(t){await t.executeLua('return require("cursorless.utils").paste()',[])}async function xF(t){await t.executeLua('return require("cursorless.utils").mode_switch_nt()',[])}async function TF(t){await t.executeLua('return require("cursorless.utils").mode_switch_t()',[])}async function SF(t,e){let r=`vim.notify("${e}")`;await t.executeLua(r,[])}var NZ={clipboardCopy:{acceptsLocation:!1},clipboardPaste:!0,toggleLineComment:void 0,indentLine:void 0,outdentLine:void 0,rename:void 0,quickFix:void 0,revealDefinition:void 0,revealTypeDefinition:void 0,showHover:void 0,showDebugHover:void 0,extractVariable:void 0,fold:void 0,highlight:{acceptsLocation:!0},unfold:void 0,showReferences:void 0,insertLineAfter:void 0,gitAccept:void 0,gitRevert:void 0,gitStage:void 0,gitUnstage:void 0},ry=class{constructor(){this.commands=NZ}};var ml=class{constructor(e){this.client=e}async readText(){return await gF(this.client)}async writeText(e){return await ty(e,this.client)}};var ny=yr(ub(),1);var gl=class{constructor(){this.notifier=new qt;this.mocks={...Sf};this.scopes=[];this.onDidChangeConfiguration=this.notifier.registerListener;this.onDidChangeConfiguration=this.onDidChangeConfiguration.bind(this)}getOwnConfiguration(e,r){if(r!=null){for(let{scope:n,values:i}of this.scopes)if(LZ(n,r))return(0,ny.get)(i,e)??(0,ny.get)(this.mocks,e)}return(0,ny.get)(this.mocks,e)}mockConfiguration(e,r){this.mocks[e]=r,this.notifier.notifyListeners()}mockConfigurationScope(e,r,n=!1){this.scopes.push({scope:e,values:r}),n||this.notifier.notifyListeners()}};function LZ(t,e){return t.languageId===e.languageId}async function fb(t,e,r,n){console.debug("neovimEdit() [unsorted]:");for(let a of n)console.debug(`	range=${JSON.stringify(a.range)}, text='${a.text}', isReplace=${a.isReplace}`);n.sort((a,p)=>(vF(a)||bF(a))&&(vF(p)||bF(p))?1:a.range.start.line===p.range.start.line?p.range.start.character-a.range.start.character:p.range.start.line-a.range.start.line),console.debug("neovimEdit() [sorted]:");for(let a of n)console.debug(`	range=${JSON.stringify(a.range)}, text='${a.text}', isReplace=${a.isReplace}`);let i=e.getTextDocument(await t.window.buffer),o=[];for(let a of n)o.push({range:a.range,rangeOffset:i.offsetAt(a.range.start),rangeLength:i.offsetAt(a.range.end)-i.offsetAt(a.range.start),text:a.text});qr().emitEvent("onDidChangeTextDocument",{document:i,contentChanges:o});for(let a of n){let{range:p,text:l,isReplace:u}=a;l===""?await wF(t,p):p.isEmpty&&!u?await _F(t,p.start,l):await UZ(t,p,l)}return await e.updateTextEditor(),!0}async function wF(t,e){console.debug(`neovimDelete(): range=${JSON.stringify(e)}`);let r=await t.window.buffer,n=(await r.getLines({start:e.end.line,end:e.end.line+1,strictIndexing:!0}))[0],i=n.slice(e.end.character);if(e.start.line===e.end.line){let p=n.slice(0,e.start.character)+i;await r.setLines(p,{start:e.start.line,end:e.start.line+1,strictIndexing:!0});return}if(e.start.character===0){await r.setLines(i,{start:e.start.line,end:e.end.line+1,strictIndexing:!0});return}let o=(await r.getLines({start:e.start.line,end:e.start.line+1,strictIndexing:!0}))[0],a=o.slice(0,e.start.character);if(e.start.character<=o.length){await r.setLines(a+i,{start:e.start.line,end:e.end.line+1,strictIndexing:!0});return}await r.setLines([a,i],{start:e.start.line,end:e.end.line+1,strictIndexing:!0})}async function _F(t,e,r){console.debug(`neovimInsert(): position=${JSON.stringify(e)}, text='${r}'`);let n=r.replace(/(?:\r\n|\r|\n)/g,`
`).split(`
`),i=await t.window.buffer,o=(await i.getLines({start:e.line,end:e.line+1,strictIndexing:!0}))[0],a=o.slice(0,e.character),p=o.slice(e.character);if(n.length===1){let d=a+n[0]+p;await i.setLines(d,{start:e.line,end:e.line+1,strictIndexing:!0});return}let l=a+n[0],u=n[n.length-1]+p;await i.setLines([l,...n.slice(1,n.length-1),u],{start:e.line,end:e.line+1,strictIndexing:!0})}async function UZ(t,e,r){console.debug(`neovimReplace(): range=${JSON.stringify(e)}, text='${r}'`),await wF(t,e),await _F(t,e.start,r)}function vF(t){return t.range.isEmpty&&!t.isReplace}function bF(t){return t.text!==""&&!!(!t.range.isEmpty||t.isReplace)}function EF(t){return qr().onEvent("onDidChangeTextDocument",t),kF()}function RF(t,e,r){return qr().onEvent("onDidOpenTextDocument",t),kF()}function kF(){return{dispose(){}}}var yl=class{constructor(){this.data={...vf}}get(e){return this.data[e]}set(e,r){return this.data[e]=r,Promise.resolve()}};var DC=yr(ub(),1);var xl=class{async showMessage(e,r,n,...i){}};async function PF(t,e){let r=e.activeTextEditor,n=await t.window,i=await ey(n,t),o=r.document.getText(i[0]);await ty(o,t)}async function MF(t,e){await yF(t)}var iy=class{constructor(e,r,n,i,o,a,p){this.id=e;this.client=r;this.neovimIDE=n;this.window=i;this._document=o,this._selections=p,this._visibleRanges=a}get document(){return this._document}updateDocument(e,r,n,i){if(n)this._document=n;else if(i)this._document.update(i);else throw Error("updateDocument(): invalid arguments");return this._selections=r,this._visibleRanges=e,this._document}get selections(){return this._selections}async setSelections(e){this._selections=e,await dF(this.client,e)}get visibleRanges(){return this._visibleRanges}get options(){throw Error("get options Not implemented")}set options(e){throw Error("set options Not implemented")}get isActive(){return!0}isEqual(e){return this.id===e.id}async revealRange(e){}revealLine(e,r){throw Error("revealLine Not implemented")}async edit(e){return await fb(this.client,this.neovimIDE,this.window,e)}focus(){return Promise.resolve()}editNewNotebookCellAbove(){throw Error("editNewNotebookCellAbove Not implemented")}editNewNotebookCellBelow(){throw Error("editNewNotebookCellBelow Not implemented")}openLink(e,r){throw Error("openLink Not implemented")}fold(e){throw Error("fold Not implemented")}unfold(e){throw Error("unfold Not implemented")}toggleBreakpoint(e){throw Error("toggleBreakpoint Not implemented")}async toggleLineComment(e){throw Error("toggleLineComment Not implemented")}async clipboardCopy(e){await PF(this.client,this.neovimIDE)}async clipboardPaste(){await MF(this.client,this.neovimIDE)}async indentLine(e){throw Error("indentLine Not implemented")}async outdentLine(e){throw Error("outdentLine Not implemented")}async insertLineAfter(e){throw Error("insertLineAfter Not implemented")}insertSnippet(e,r){throw Error("insertSnippet Not implemented")}async rename(e){throw Error("rename Not implemented")}async showReferences(e){throw Error("showReferences Not implemented")}async quickFix(e){throw Error("quickFix Not implemented")}async revealDefinition(e){throw Error("revealDefinition Not implemented")}async revealTypeDefinition(e){throw Error("revealTypeDefinition Not implemented")}async showHover(e){throw Error("showHover Not implemented")}async showDebugHover(e){throw Error("showDebugHover Not implemented")}async extractVariable(e){throw Error("extractVariable Not implemented")}async gitAccept(e){throw Error("gitAccept Not implemented")}async gitRevert(e){throw Error("gitRevert Not implemented")}async gitStage(e){throw Error("gitStage Not implemented")}async gitUnstage(e){throw Error("gitUnstage Not implemented")}};var Fw=yr(require("path"),1);var AF;(()=>{"use strict";var t={470:i=>{function o(l){if(typeof l!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(l))}function a(l,u){for(var d,m="",g=0,x=-1,b=0,v=0;v<=l.length;++v){if(v<l.length)d=l.charCodeAt(v);else{if(d===47)break;d=47}if(d===47){if(!(x===v-1||b===1))if(x!==v-1&&b===2){if(m.length<2||g!==2||m.charCodeAt(m.length-1)!==46||m.charCodeAt(m.length-2)!==46){if(m.length>2){var F=m.lastIndexOf("/");if(F!==m.length-1){F===-1?(m="",g=0):g=(m=m.slice(0,F)).length-1-m.lastIndexOf("/"),x=v,b=0;continue}}else if(m.length===2||m.length===1){m="",g=0,x=v,b=0;continue}}u&&(m.length>0?m+="/..":m="..",g=2)}else m.length>0?m+="/"+l.slice(x+1,v):m=l.slice(x+1,v),g=v-x-1;x=v,b=0}else d===46&&b!==-1?++b:b=-1}return m}var p={resolve:function(){for(var l,u="",d=!1,m=arguments.length-1;m>=-1&&!d;m--){var g;m>=0?g=arguments[m]:(l===void 0&&(l=process.cwd()),g=l),o(g),g.length!==0&&(u=g+"/"+u,d=g.charCodeAt(0)===47)}return u=a(u,!d),d?u.length>0?"/"+u:"/":u.length>0?u:"."},normalize:function(l){if(o(l),l.length===0)return".";var u=l.charCodeAt(0)===47,d=l.charCodeAt(l.length-1)===47;return(l=a(l,!u)).length!==0||u||(l="."),l.length>0&&d&&(l+="/"),u?"/"+l:l},isAbsolute:function(l){return o(l),l.length>0&&l.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var l,u=0;u<arguments.length;++u){var d=arguments[u];o(d),d.length>0&&(l===void 0?l=d:l+="/"+d)}return l===void 0?".":p.normalize(l)},relative:function(l,u){if(o(l),o(u),l===u||(l=p.resolve(l))===(u=p.resolve(u)))return"";for(var d=1;d<l.length&&l.charCodeAt(d)===47;++d);for(var m=l.length,g=m-d,x=1;x<u.length&&u.charCodeAt(x)===47;++x);for(var b=u.length-x,v=g<b?g:b,F=-1,I=0;I<=v;++I){if(I===v){if(b>v){if(u.charCodeAt(x+I)===47)return u.slice(x+I+1);if(I===0)return u.slice(x+I)}else g>v&&(l.charCodeAt(d+I)===47?F=I:I===0&&(F=0));break}var U=l.charCodeAt(d+I);if(U!==u.charCodeAt(x+I))break;U===47&&(F=I)}var K="";for(I=d+F+1;I<=m;++I)I!==m&&l.charCodeAt(I)!==47||(K.length===0?K+="..":K+="/..");return K.length>0?K+u.slice(x+F):(x+=F,u.charCodeAt(x)===47&&++x,u.slice(x))},_makeLong:function(l){return l},dirname:function(l){if(o(l),l.length===0)return".";for(var u=l.charCodeAt(0),d=u===47,m=-1,g=!0,x=l.length-1;x>=1;--x)if((u=l.charCodeAt(x))===47){if(!g){m=x;break}}else g=!1;return m===-1?d?"/":".":d&&m===1?"//":l.slice(0,m)},basename:function(l,u){if(u!==void 0&&typeof u!="string")throw new TypeError('"ext" argument must be a string');o(l);var d,m=0,g=-1,x=!0;if(u!==void 0&&u.length>0&&u.length<=l.length){if(u.length===l.length&&u===l)return"";var b=u.length-1,v=-1;for(d=l.length-1;d>=0;--d){var F=l.charCodeAt(d);if(F===47){if(!x){m=d+1;break}}else v===-1&&(x=!1,v=d+1),b>=0&&(F===u.charCodeAt(b)?--b==-1&&(g=d):(b=-1,g=v))}return m===g?g=v:g===-1&&(g=l.length),l.slice(m,g)}for(d=l.length-1;d>=0;--d)if(l.charCodeAt(d)===47){if(!x){m=d+1;break}}else g===-1&&(x=!1,g=d+1);return g===-1?"":l.slice(m,g)},extname:function(l){o(l);for(var u=-1,d=0,m=-1,g=!0,x=0,b=l.length-1;b>=0;--b){var v=l.charCodeAt(b);if(v!==47)m===-1&&(g=!1,m=b+1),v===46?u===-1?u=b:x!==1&&(x=1):u!==-1&&(x=-1);else if(!g){d=b+1;break}}return u===-1||m===-1||x===0||x===1&&u===m-1&&u===d+1?"":l.slice(u,m)},format:function(l){if(l===null||typeof l!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof l);return function(u,d){var m=d.dir||d.root,g=d.base||(d.name||"")+(d.ext||"");return m?m===d.root?m+g:m+"/"+g:g}(0,l)},parse:function(l){o(l);var u={root:"",dir:"",base:"",ext:"",name:""};if(l.length===0)return u;var d,m=l.charCodeAt(0),g=m===47;g?(u.root="/",d=1):d=0;for(var x=-1,b=0,v=-1,F=!0,I=l.length-1,U=0;I>=d;--I)if((m=l.charCodeAt(I))!==47)v===-1&&(F=!1,v=I+1),m===46?x===-1?x=I:U!==1&&(U=1):x!==-1&&(U=-1);else if(!F){b=I+1;break}return x===-1||v===-1||U===0||U===1&&x===v-1&&x===b+1?v!==-1&&(u.base=u.name=b===0&&g?l.slice(1,v):l.slice(b,v)):(b===0&&g?(u.name=l.slice(1,x),u.base=l.slice(1,v)):(u.name=l.slice(b,x),u.base=l.slice(b,v)),u.ext=l.slice(x,v)),b>0?u.dir=l.slice(0,b-1):g&&(u.dir="/"),u},sep:"/",delimiter:":",win32:null,posix:null};p.posix=p,i.exports=p}},e={};function r(i){var o=e[i];if(o!==void 0)return o.exports;var a=e[i]={exports:{}};return t[i](a,a.exports,r),a.exports}r.d=(i,o)=>{for(var a in o)r.o(o,a)&&!r.o(i,a)&&Object.defineProperty(i,a,{enumerable:!0,get:o[a]})},r.o=(i,o)=>Object.prototype.hasOwnProperty.call(i,o),r.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})};var n={};(()=>{let i;r.r(n),r.d(n,{URI:()=>g,Utils:()=>N}),typeof process=="object"?i=process.platform==="win32":typeof navigator=="object"&&(i=navigator.userAgent.indexOf("Windows")>=0);let o=/^\w[\w\d+.-]*$/,a=/^\//,p=/^\/\//;function l(O,D){if(!O.scheme&&D)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${O.authority}", path: "${O.path}", query: "${O.query}", fragment: "${O.fragment}"}`);if(O.scheme&&!o.test(O.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(O.path){if(O.authority){if(!a.test(O.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(p.test(O.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}let u="",d="/",m=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class g{static isUri(D){return D instanceof g||!!D&&typeof D.authority=="string"&&typeof D.fragment=="string"&&typeof D.path=="string"&&typeof D.query=="string"&&typeof D.scheme=="string"&&typeof D.fsPath=="string"&&typeof D.with=="function"&&typeof D.toString=="function"}scheme;authority;path;query;fragment;constructor(D,$,z,Q,Z,te=!1){typeof D=="object"?(this.scheme=D.scheme||u,this.authority=D.authority||u,this.path=D.path||u,this.query=D.query||u,this.fragment=D.fragment||u):(this.scheme=function(he,re){return he||re?he:"file"}(D,te),this.authority=$||u,this.path=function(he,re){switch(he){case"https":case"http":case"file":re?re[0]!==d&&(re=d+re):re=d}return re}(this.scheme,z||u),this.query=Q||u,this.fragment=Z||u,l(this,te))}get fsPath(){return U(this,!1)}with(D){if(!D)return this;let{scheme:$,authority:z,path:Q,query:Z,fragment:te}=D;return $===void 0?$=this.scheme:$===null&&($=u),z===void 0?z=this.authority:z===null&&(z=u),Q===void 0?Q=this.path:Q===null&&(Q=u),Z===void 0?Z=this.query:Z===null&&(Z=u),te===void 0?te=this.fragment:te===null&&(te=u),$===this.scheme&&z===this.authority&&Q===this.path&&Z===this.query&&te===this.fragment?this:new b($,z,Q,Z,te)}static parse(D,$=!1){let z=m.exec(D);return z?new b(z[2]||u,ae(z[4]||u),ae(z[5]||u),ae(z[7]||u),ae(z[9]||u),$):new b(u,u,u,u,u)}static file(D){let $=u;if(i&&(D=D.replace(/\\/g,d)),D[0]===d&&D[1]===d){let z=D.indexOf(d,2);z===-1?($=D.substring(2),D=d):($=D.substring(2,z),D=D.substring(z)||d)}return new b("file",$,D,u,u)}static from(D){let $=new b(D.scheme,D.authority,D.path,D.query,D.fragment);return l($,!0),$}toString(D=!1){return K(this,D)}toJSON(){return this}static revive(D){if(D){if(D instanceof g)return D;{let $=new b(D);return $._formatted=D.external,$._fsPath=D._sep===x?D.fsPath:null,$}}return D}}let x=i?1:void 0;class b extends g{_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=U(this,!1)),this._fsPath}toString(D=!1){return D?K(this,!0):(this._formatted||(this._formatted=K(this,!1)),this._formatted)}toJSON(){let D={$mid:1};return this._fsPath&&(D.fsPath=this._fsPath,D._sep=x),this._formatted&&(D.external=this._formatted),this.path&&(D.path=this.path),this.scheme&&(D.scheme=this.scheme),this.authority&&(D.authority=this.authority),this.query&&(D.query=this.query),this.fragment&&(D.fragment=this.fragment),D}}let v={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function F(O,D,$){let z,Q=-1;for(let Z=0;Z<O.length;Z++){let te=O.charCodeAt(Z);if(te>=97&&te<=122||te>=65&&te<=90||te>=48&&te<=57||te===45||te===46||te===95||te===126||D&&te===47||$&&te===91||$&&te===93||$&&te===58)Q!==-1&&(z+=encodeURIComponent(O.substring(Q,Z)),Q=-1),z!==void 0&&(z+=O.charAt(Z));else{z===void 0&&(z=O.substr(0,Z));let he=v[te];he!==void 0?(Q!==-1&&(z+=encodeURIComponent(O.substring(Q,Z)),Q=-1),z+=he):Q===-1&&(Q=Z)}}return Q!==-1&&(z+=encodeURIComponent(O.substring(Q))),z!==void 0?z:O}function I(O){let D;for(let $=0;$<O.length;$++){let z=O.charCodeAt($);z===35||z===63?(D===void 0&&(D=O.substr(0,$)),D+=v[z]):D!==void 0&&(D+=O[$])}return D!==void 0?D:O}function U(O,D){let $;return $=O.authority&&O.path.length>1&&O.scheme==="file"?`//${O.authority}${O.path}`:O.path.charCodeAt(0)===47&&(O.path.charCodeAt(1)>=65&&O.path.charCodeAt(1)<=90||O.path.charCodeAt(1)>=97&&O.path.charCodeAt(1)<=122)&&O.path.charCodeAt(2)===58?D?O.path.substr(1):O.path[1].toLowerCase()+O.path.substr(2):O.path,i&&($=$.replace(/\//g,"\\")),$}function K(O,D){let $=D?I:F,z="",{scheme:Q,authority:Z,path:te,query:he,fragment:re}=O;if(Q&&(z+=Q,z+=":"),(Z||Q==="file")&&(z+=d,z+=d),Z){let Re=Z.indexOf("@");if(Re!==-1){let ur=Z.substr(0,Re);Z=Z.substr(Re+1),Re=ur.lastIndexOf(":"),Re===-1?z+=$(ur,!1,!1):(z+=$(ur.substr(0,Re),!1,!1),z+=":",z+=$(ur.substr(Re+1),!1,!0)),z+="@"}Z=Z.toLowerCase(),Re=Z.lastIndexOf(":"),Re===-1?z+=$(Z,!1,!0):(z+=$(Z.substr(0,Re),!1,!0),z+=Z.substr(Re))}if(te){if(te.length>=3&&te.charCodeAt(0)===47&&te.charCodeAt(2)===58){let Re=te.charCodeAt(1);Re>=65&&Re<=90&&(te=`/${String.fromCharCode(Re+32)}:${te.substr(3)}`)}else if(te.length>=2&&te.charCodeAt(1)===58){let Re=te.charCodeAt(0);Re>=65&&Re<=90&&(te=`${String.fromCharCode(Re+32)}:${te.substr(2)}`)}z+=$(te,!0,!1)}return he&&(z+="?",z+=$(he,!1,!1)),re&&(z+="#",z+=D?re:F(re,!1,!1)),z}function ne(O){try{return decodeURIComponent(O)}catch{return O.length>3?O.substr(0,3)+ne(O.substr(3)):O}}let ie=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function ae(O){return O.match(ie)?O.replace(ie,D=>ne(D)):O}var it=r(470);let Ct=it.posix||it,ct="/";var N;(function(O){O.joinPath=function(D,...$){return D.with({path:Ct.join(D.path,...$)})},O.resolvePath=function(D,...$){let z=D.path,Q=!1;z[0]!==ct&&(z=ct+z,Q=!0);let Z=Ct.resolve(z,...$);return Q&&Z[0]===ct&&!D.authority&&(Z=Z.substring(1)),D.with({path:Z})},O.dirname=function(D){if(D.path.length===0||D.path===ct)return D;let $=Ct.dirname(D.path);return $.length===1&&$.charCodeAt(0)===46&&($=""),D.with({path:$})},O.basename=function(D){return Ct.basename(D.path)},O.extname=function(D){return Ct.extname(D.path)}})(N||(N={}))})(),AF=n})();var{URI:DF,Utils:LUe}=AF;var XF=yr(jF(),1);var Sl=t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>65536)throw new TypeError("pattern is too long")};var zZ={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},vl=t=>t.replace(/[[\]\\-]/g,"\\$&"),GZ=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),qF=t=>t.join(""),zF=(t,e)=>{let r=e;if(t.charAt(r)!=="[")throw new Error("not in a brace expression");let n=[],i=[],o=r+1,a=!1,p=!1,l=!1,u=!1,d=r,m="";e:for(;o<t.length;){let v=t.charAt(o);if((v==="!"||v==="^")&&o===r+1){u=!0,o++;continue}if(v==="]"&&a&&!l){d=o+1;break}if(a=!0,v==="\\"&&!l){l=!0,o++;continue}if(v==="["&&!l){for(let[F,[I,U,K]]of Object.entries(zZ))if(t.startsWith(F,o)){if(m)return["$.",!1,t.length-r,!0];o+=F.length,K?i.push(I):n.push(I),p=p||U;continue e}}if(l=!1,m){v>m?n.push(vl(m)+"-"+vl(v)):v===m&&n.push(vl(v)),m="",o++;continue}if(t.startsWith("-]",o+1)){n.push(vl(v+"-")),o+=2;continue}if(t.startsWith("-",o+1)){m=v,o+=2;continue}n.push(vl(v)),o++}if(d<o)return["",!1,0,!1];if(!n.length&&!i.length)return["$.",!1,t.length-r,!0];if(i.length===0&&n.length===1&&/^\\?.$/.test(n[0])&&!u){let v=n[0].length===2?n[0].slice(-1):n[0];return[GZ(v),!1,d-r,!1]}let g="["+(u?"^":"")+qF(n)+"]",x="["+(u?"":"^")+qF(i)+"]";return[n.length&&i.length?"("+g+"|"+x+")":n.length?g:x,p,d-r,!0]};var Ln=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");var KZ=new Set(["!","?","+","*","@"]),GF=t=>KZ.has(t),QZ="(?!(?:^|/)\\.\\.?(?:$|/))",oy="(?!\\.)",ZZ=new Set(["[","."]),YZ=new Set(["..","."]),XZ=new Set("().*{}+?[]^$\\!"),JZ=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),hb="[^/]",KF=hb+"*?",QF=hb+"+?",lc=class t{type;#e;#t;#o=!1;#n=[];#s;#S;#p;#u=!1;#a;#c;#i=!1;constructor(e,r,n={}){this.type=e,e&&(this.#t=!0),this.#s=r,this.#e=this.#s?this.#s.#e:this,this.#a=this.#e===this?n:this.#e.#a,this.#p=this.#e===this?[]:this.#e.#p,e==="!"&&!this.#e.#u&&this.#p.push(this),this.#S=this.#s?this.#s.#n.length:0}get hasMagic(){if(this.#t!==void 0)return this.#t;for(let e of this.#n)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#t=!0;return this.#t}toString(){return this.#c!==void 0?this.#c:this.type?this.#c=this.type+"("+this.#n.map(e=>String(e)).join("|")+")":this.#c=this.#n.map(e=>String(e)).join("")}#g(){if(this!==this.#e)throw new Error("should only call on root");if(this.#u)return this;this.toString(),this.#u=!0;let e;for(;e=this.#p.pop();){if(e.type!=="!")continue;let r=e,n=r.#s;for(;n;){for(let i=r.#S+1;!n.type&&i<n.#n.length;i++)for(let o of e.#n){if(typeof o=="string")throw new Error("string part in extglob AST??");o.copyIn(n.#n[i])}r=n,n=r.#s}}return this}push(...e){for(let r of e)if(r!==""){if(typeof r!="string"&&!(r instanceof t&&r.#s===this))throw new Error("invalid part: "+r);this.#n.push(r)}}toJSON(){let e=this.type===null?this.#n.slice().map(r=>typeof r=="string"?r:r.toJSON()):[this.type,...this.#n.map(r=>r.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#u&&this.#s?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#s?.isStart())return!1;if(this.#S===0)return!0;let e=this.#s;for(let r=0;r<this.#S;r++){let n=e.#n[r];if(!(n instanceof t&&n.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#s?.type==="!")return!0;if(!this.#s?.isEnd())return!1;if(!this.type)return this.#s?.isEnd();let e=this.#s?this.#s.#n.length:0;return this.#S===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let r=new t(this.type,e);for(let n of this.#n)r.copyIn(n);return r}static#y(e,r,n,i){let o=!1,a=!1,p=-1,l=!1;if(r.type===null){let x=n,b="";for(;x<e.length;){let v=e.charAt(x++);if(o||v==="\\"){o=!o,b+=v;continue}if(a){x===p+1?(v==="^"||v==="!")&&(l=!0):v==="]"&&!(x===p+2&&l)&&(a=!1),b+=v;continue}else if(v==="["){a=!0,p=x,l=!1,b+=v;continue}if(!i.noext&&GF(v)&&e.charAt(x)==="("){r.push(b),b="";let F=new t(v,r);x=t.#y(e,F,x,i),r.push(F);continue}b+=v}return r.push(b),x}let u=n+1,d=new t(null,r),m=[],g="";for(;u<e.length;){let x=e.charAt(u++);if(o||x==="\\"){o=!o,g+=x;continue}if(a){u===p+1?(x==="^"||x==="!")&&(l=!0):x==="]"&&!(u===p+2&&l)&&(a=!1),g+=x;continue}else if(x==="["){a=!0,p=u,l=!1,g+=x;continue}if(GF(x)&&e.charAt(u)==="("){d.push(g),g="";let b=new t(x,d);d.push(b),u=t.#y(e,b,u,i);continue}if(x==="|"){d.push(g),g="",m.push(d),d=new t(null,r);continue}if(x===")")return g===""&&r.#n.length===0&&(r.#i=!0),d.push(g),g="",r.push(...m,d),u;g+=x}return r.type=null,r.#t=void 0,r.#n=[e.substring(n-1)],u}static fromGlob(e,r={}){let n=new t(null,void 0,r);return t.#y(e,n,0,r),n}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[r,n,i,o]=this.toRegExpSource();if(!(i||this.#t||this.#a.nocase&&!this.#a.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return n;let p=(this.#a.nocase?"i":"")+(o?"u":"");return Object.assign(new RegExp(`^${r}$`,p),{_src:r,_glob:e})}get options(){return this.#a}toRegExpSource(e){let r=e??!!this.#a.dot;if(this.#e===this&&this.#g(),!this.type){let l=this.isStart()&&this.isEnd(),u=this.#n.map(x=>{let[b,v,F,I]=typeof x=="string"?t.#f(x,this.#t,l):x.toRegExpSource(e);return this.#t=this.#t||F,this.#o=this.#o||I,b}).join(""),d="";if(this.isStart()&&typeof this.#n[0]=="string"&&!(this.#n.length===1&&YZ.has(this.#n[0]))){let b=ZZ,v=r&&b.has(u.charAt(0))||u.startsWith("\\.")&&b.has(u.charAt(2))||u.startsWith("\\.\\.")&&b.has(u.charAt(4)),F=!r&&!e&&b.has(u.charAt(0));d=v?QZ:F?oy:""}let m="";return this.isEnd()&&this.#e.#u&&this.#s?.type==="!"&&(m="(?:$|\\/)"),[d+u+m,Ln(u),this.#t=!!this.#t,this.#o]}let n=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",o=this.#d(r);if(this.isStart()&&this.isEnd()&&!o&&this.type!=="!"){let l=this.toString();return this.#n=[l],this.type=null,this.#t=void 0,[l,Ln(this.toString()),!1,!1]}let a=!n||e||r||!oy?"":this.#d(!0);a===o&&(a=""),a&&(o=`(?:${o})(?:${a})*?`);let p="";if(this.type==="!"&&this.#i)p=(this.isStart()&&!r?oy:"")+QF;else{let l=this.type==="!"?"))"+(this.isStart()&&!r&&!e?oy:"")+KF+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&a?")":this.type==="*"&&a?")?":`)${this.type}`;p=i+o+l}return[p,Ln(o),this.#t=!!this.#t,this.#o]}#d(e){return this.#n.map(r=>{if(typeof r=="string")throw new Error("string type in extglob ast??");let[n,i,o,a]=r.toRegExpSource(e);return this.#o=this.#o||a,n}).filter(r=>!(this.isStart()&&this.isEnd())||!!r).join("|")}static#f(e,r,n=!1){let i=!1,o="",a=!1;for(let p=0;p<e.length;p++){let l=e.charAt(p);if(i){i=!1,o+=(XZ.has(l)?"\\":"")+l;continue}if(l==="\\"){p===e.length-1?o+="\\\\":i=!0;continue}if(l==="["){let[u,d,m,g]=zF(e,p);if(m){o+=u,a=a||d,p+=m-1,r=r||g;continue}}if(l==="*"){n&&e==="*"?o+=QF:o+=KF,r=!0;continue}if(l==="?"){o+=hb,r=!0;continue}o+=JZ(l)}return[o,Ln(e),!!r,a]}};var uc=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&");var pr=(t,e,r={})=>(Sl(e),!r.nocomment&&e.charAt(0)==="#"?!1:new zr(e,r).match(t)),eY=/^\*+([^+@!?\*\[\(]*)$/,tY=t=>e=>!e.startsWith(".")&&e.endsWith(t),rY=t=>e=>e.endsWith(t),nY=t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),iY=t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),oY=/^\*+\.\*+$/,sY=t=>!t.startsWith(".")&&t.includes("."),aY=t=>t!=="."&&t!==".."&&t.includes("."),cY=/^\.\*+$/,pY=t=>t!=="."&&t!==".."&&t.startsWith("."),lY=/^\*+$/,uY=t=>t.length!==0&&!t.startsWith("."),fY=t=>t.length!==0&&t!=="."&&t!=="..",dY=/^\?+([^+@!?\*\[\(]*)?$/,mY=([t,e=""])=>{let r=JF([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},hY=([t,e=""])=>{let r=e1([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},gY=([t,e=""])=>{let r=e1([t]);return e?n=>r(n)&&n.endsWith(e):r},yY=([t,e=""])=>{let r=JF([t]);return e?n=>r(n)&&n.endsWith(e):r},JF=([t])=>{let e=t.length;return r=>r.length===e&&!r.startsWith(".")},e1=([t])=>{let e=t.length;return r=>r.length===e&&r!=="."&&r!==".."},t1=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",ZF={win32:{sep:"\\"},posix:{sep:"/"}},xY=t1==="win32"?ZF.win32.sep:ZF.posix.sep;pr.sep=xY;var Wt=Symbol("globstar **");pr.GLOBSTAR=Wt;var TY="[^/]",SY=TY+"*?",vY="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",bY="(?:(?!(?:\\/|^)\\.).)*?",wY=(t,e={})=>r=>pr(r,t,e);pr.filter=wY;var yn=(t,e={})=>Object.assign({},t,e),_Y=t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return pr;let e=pr;return Object.assign((n,i,o={})=>e(n,i,yn(t,o)),{Minimatch:class extends e.Minimatch{constructor(i,o={}){super(i,yn(t,o))}static defaults(i){return e.defaults(yn(t,i)).Minimatch}},AST:class extends e.AST{constructor(i,o,a={}){super(i,o,yn(t,a))}static fromGlob(i,o={}){return e.AST.fromGlob(i,yn(t,o))}},unescape:(n,i={})=>e.unescape(n,yn(t,i)),escape:(n,i={})=>e.escape(n,yn(t,i)),filter:(n,i={})=>e.filter(n,yn(t,i)),defaults:n=>e.defaults(yn(t,n)),makeRe:(n,i={})=>e.makeRe(n,yn(t,i)),braceExpand:(n,i={})=>e.braceExpand(n,yn(t,i)),match:(n,i,o={})=>e.match(n,i,yn(t,o)),sep:e.sep,GLOBSTAR:Wt})};pr.defaults=_Y;var r1=(t,e={})=>(Sl(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:(0,XF.default)(t));pr.braceExpand=r1;var EY=(t,e={})=>new zr(t,e).makeRe();pr.makeRe=EY;var RY=(t,e,r={})=>{let n=new zr(e,r);return t=t.filter(i=>n.match(i)),n.options.nonull&&!t.length&&t.push(e),t};pr.match=RY;var YF=/[?*]|[+@!]\(.*?\)|\[|\]/,kY=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),zr=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,r={}){Sl(e),r=r||{},this.options=r,this.pattern=e,this.platform=r.platform||t1,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!r.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!r.nonegate,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=r.windowsNoMagicRoot!==void 0?r.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let r of e)if(typeof r!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],r.debug&&(this.debug=(...o)=>console.error(...o)),this.debug(this.pattern,this.globSet);let n=this.globSet.map(o=>this.slashSplit(o));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let i=this.globParts.map((o,a,p)=>{if(this.isWindows&&this.windowsNoMagicRoot){let l=o[0]===""&&o[1]===""&&(o[2]==="?"||!YF.test(o[2]))&&!YF.test(o[3]),u=/^[a-z]:/i.test(o[0]);if(l)return[...o.slice(0,4),...o.slice(4).map(d=>this.parse(d))];if(u)return[o[0],...o.slice(1).map(d=>this.parse(d))]}return o.map(l=>this.parse(l))});if(this.debug(this.pattern,i),this.set=i.filter(o=>o.indexOf(!1)===-1),this.isWindows)for(let o=0;o<this.set.length;o++){let a=this.set[o];a[0]===""&&a[1]===""&&this.globParts[o][2]==="?"&&typeof a[3]=="string"&&/^[a-z]:$/i.test(a[3])&&(a[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let n=0;n<e.length;n++)for(let i=0;i<e[n].length;i++)e[n][i]==="**"&&(e[n][i]="*");let{optimizationLevel:r=1}=this.options;return r>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):r>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(r=>{let n=-1;for(;(n=r.indexOf("**",n+1))!==-1;){let i=n;for(;r[i+1]==="**";)i++;i!==n&&r.splice(n,i-n)}return r})}levelOneOptimize(e){return e.map(r=>(r=r.reduce((n,i)=>{let o=n[n.length-1];return i==="**"&&o==="**"?n:i===".."&&o&&o!==".."&&o!=="."&&o!=="**"?(n.pop(),n):(n.push(i),n)},[]),r.length===0?[""]:r))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let r=!1;do{if(r=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let o=e[i];i===1&&o===""&&e[0]===""||(o==="."||o==="")&&(r=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(r=!0,e.pop())}let n=0;for(;(n=e.indexOf("..",n+1))!==-1;){let i=e[n-1];i&&i!=="."&&i!==".."&&i!=="**"&&(r=!0,e.splice(n-1,2),n-=2)}}while(r);return e.length===0?[""]:e}firstPhasePreProcess(e){let r=!1;do{r=!1;for(let n of e){let i=-1;for(;(i=n.indexOf("**",i+1))!==-1;){let a=i;for(;n[a+1]==="**";)a++;a>i&&n.splice(i+1,a-i);let p=n[i+1],l=n[i+2],u=n[i+3];if(p!==".."||!l||l==="."||l===".."||!u||u==="."||u==="..")continue;r=!0,n.splice(i,1);let d=n.slice(0);d[i]="**",e.push(d),i--}if(!this.preserveMultipleSlashes){for(let a=1;a<n.length-1;a++){let p=n[a];a===1&&p===""&&n[0]===""||(p==="."||p==="")&&(r=!0,n.splice(a,1),a--)}n[0]==="."&&n.length===2&&(n[1]==="."||n[1]==="")&&(r=!0,n.pop())}let o=0;for(;(o=n.indexOf("..",o+1))!==-1;){let a=n[o-1];if(a&&a!=="."&&a!==".."&&a!=="**"){r=!0;let l=o===1&&n[o+1]==="**"?["."]:[];n.splice(o-1,2,...l),n.length===0&&n.push(""),o-=2}}}}while(r);return e}secondPhasePreProcess(e){for(let r=0;r<e.length-1;r++)for(let n=r+1;n<e.length;n++){let i=this.partsMatch(e[r],e[n],!this.preserveMultipleSlashes);if(i){e[r]=[],e[n]=i;break}}return e.filter(r=>r.length)}partsMatch(e,r,n=!1){let i=0,o=0,a=[],p="";for(;i<e.length&&o<r.length;)if(e[i]===r[o])a.push(p==="b"?r[o]:e[i]),i++,o++;else if(n&&e[i]==="**"&&r[o]===e[i+1])a.push(e[i]),i++;else if(n&&r[o]==="**"&&e[i]===r[o+1])a.push(r[o]),o++;else if(e[i]==="*"&&r[o]&&(this.options.dot||!r[o].startsWith("."))&&r[o]!=="**"){if(p==="b")return!1;p="a",a.push(e[i]),i++,o++}else if(r[o]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(p==="a")return!1;p="b",a.push(r[o]),i++,o++}else return!1;return e.length===r.length&&a}parseNegate(){if(this.nonegate)return;let e=this.pattern,r=!1,n=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)r=!r,n++;n&&(this.pattern=e.slice(n)),this.negate=r}matchOne(e,r,n=!1){let i=this.options;if(this.isWindows){let v=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),F=!v&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),I=typeof r[0]=="string"&&/^[a-z]:$/i.test(r[0]),U=!I&&r[0]===""&&r[1]===""&&r[2]==="?"&&typeof r[3]=="string"&&/^[a-z]:$/i.test(r[3]),K=F?3:v?0:void 0,ne=U?3:I?0:void 0;if(typeof K=="number"&&typeof ne=="number"){let[ie,ae]=[e[K],r[ne]];ie.toLowerCase()===ae.toLowerCase()&&(r[ne]=ie,ne>K?r=r.slice(ne):K>ne&&(e=e.slice(K)))}}let{optimizationLevel:o=1}=this.options;o>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var a=0,p=0,l=e.length,u=r.length;a<l&&p<u;a++,p++){this.debug("matchOne loop");var d=r[p],m=e[a];if(this.debug(r,d,m),d===!1)return!1;if(d===Wt){this.debug("GLOBSTAR",[r,d,m]);var g=a,x=p+1;if(x===u){for(this.debug("** at the end");a<l;a++)if(e[a]==="."||e[a]===".."||!i.dot&&e[a].charAt(0)===".")return!1;return!0}for(;g<l;){var b=e[g];if(this.debug(`
globstar while`,e,g,r,x,b),this.matchOne(e.slice(g),r.slice(x),n))return this.debug("globstar found match!",g,l,b),!0;if(b==="."||b===".."||!i.dot&&b.charAt(0)==="."){this.debug("dot detected!",e,g,r,x);break}this.debug("globstar swallow a segment, and continue"),g++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,g,r,x),g===l))}let v;if(typeof d=="string"?(v=m===d,this.debug("string match",d,m,v)):(v=d.test(m),this.debug("pattern match",d,m,v)),!v)return!1}if(a===l&&p===u)return!0;if(a===l)return n;if(p===u)return a===l-1&&e[a]==="";throw new Error("wtf?")}braceExpand(){return r1(this.pattern,this.options)}parse(e){Sl(e);let r=this.options;if(e==="**")return Wt;if(e==="")return"";let n,i=null;(n=e.match(lY))?i=r.dot?fY:uY:(n=e.match(eY))?i=(r.nocase?r.dot?iY:nY:r.dot?rY:tY)(n[1]):(n=e.match(dY))?i=(r.nocase?r.dot?hY:mY:r.dot?gY:yY)(n):(n=e.match(oY))?i=r.dot?aY:sY:(n=e.match(cY))&&(i=pY);let o=lc.fromGlob(e,this.options).toMMPattern();return i&&typeof o=="object"&&Reflect.defineProperty(o,"test",{value:i}),o}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let r=this.options,n=r.noglobstar?SY:r.dot?vY:bY,i=new Set(r.nocase?["i"]:[]),o=e.map(l=>{let u=l.map(d=>{if(d instanceof RegExp)for(let m of d.flags.split(""))i.add(m);return typeof d=="string"?kY(d):d===Wt?Wt:d._src});return u.forEach((d,m)=>{let g=u[m+1],x=u[m-1];d!==Wt||x===Wt||(x===void 0?g!==void 0&&g!==Wt?u[m+1]="(?:\\/|"+n+"\\/)?"+g:u[m]=n:g===void 0?u[m-1]=x+"(?:\\/|"+n+")?":g!==Wt&&(u[m-1]=x+"(?:\\/|\\/"+n+"\\/)"+g,u[m+1]=Wt))}),u.filter(d=>d!==Wt).join("/")}).join("|"),[a,p]=e.length>1?["(?:",")"]:["",""];o="^"+a+o+p+"$",this.negate&&(o="^(?!"+o+").+$");try{this.regexp=new RegExp(o,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;let n=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let o=this.set;this.debug(this.pattern,"set",o);let a=i[i.length-1];if(!a)for(let p=i.length-2;!a&&p>=0;p--)a=i[p];for(let p=0;p<o.length;p++){let l=o[p],u=i;if(n.matchBase&&l.length===1&&(u=[a]),this.matchOne(u,l,r))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return pr.defaults(e).Minimatch}};pr.AST=lc;pr.Minimatch=zr;pr.escape=uc;pr.unescape=Ln;var R1=require("node:url");var fc=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,i1=new Set,gb=typeof process=="object"&&process?process:{},o1=(t,e,r,n)=>{typeof gb.emitWarning=="function"?gb.emitWarning(t,e,r,n):console.error(`[${r}] ${e}: ${t}`)},sy=globalThis.AbortController,n1=globalThis.AbortSignal;if(typeof sy>"u"){n1=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(n,i){this._onabort.push(i)}},sy=class{constructor(){e()}signal=new n1;abort(n){if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(let i of this.signal._onabort)i(n);this.signal.onabort?.(n)}}};let t=gb.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{t&&(t=!1,o1("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var PY=t=>!i1.has(t),sHe=Symbol("type"),Po=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),s1=t=>Po(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?dc:null:null,dc=class extends Array{constructor(e){super(e),this.fill(0)}},yb=class t{heap;length;static#e=!1;static create(e){let r=s1(e);if(!r)return[];t.#e=!0;let n=new t(e,r);return t.#e=!1,n}constructor(e,r){if(!t.#e)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},bl=class t{#e;#t;#o;#n;#s;#S;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#p;#u;#a;#c;#i;#g;#y;#d;#f;#w;#h;#_;#E;#T;#v;#b;#m;static unsafeExposeInternals(e){return{starts:e.#E,ttls:e.#T,sizes:e.#_,keyMap:e.#a,keyList:e.#c,valList:e.#i,next:e.#g,prev:e.#y,get head(){return e.#d},get tail(){return e.#f},free:e.#w,isBackgroundFetch:r=>e.#l(r),backgroundFetch:(r,n,i,o)=>e.#U(r,n,i,o),moveToTail:r=>e.#V(r),indexes:r=>e.#k(r),rindexes:r=>e.#P(r),isStale:r=>e.#x(r)}}get max(){return this.#e}get maxSize(){return this.#t}get calculatedSize(){return this.#u}get size(){return this.#p}get fetchMethod(){return this.#s}get memoMethod(){return this.#S}get dispose(){return this.#o}get disposeAfter(){return this.#n}constructor(e){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:a,updateAgeOnHas:p,allowStale:l,dispose:u,disposeAfter:d,noDisposeOnSet:m,noUpdateTTL:g,maxSize:x=0,maxEntrySize:b=0,sizeCalculation:v,fetchMethod:F,memoMethod:I,noDeleteOnFetchRejection:U,noDeleteOnStaleGet:K,allowStaleOnFetchRejection:ne,allowStaleOnFetchAbort:ie,ignoreFetchAbort:ae}=e;if(r!==0&&!Po(r))throw new TypeError("max option must be a nonnegative integer");let it=r?s1(r):Array;if(!it)throw new Error("invalid max value: "+r);if(this.#e=r,this.#t=x,this.maxEntrySize=b||this.#t,this.sizeCalculation=v,this.sizeCalculation){if(!this.#t&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(I!==void 0&&typeof I!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#S=I,F!==void 0&&typeof F!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#s=F,this.#b=!!F,this.#a=new Map,this.#c=new Array(r).fill(void 0),this.#i=new Array(r).fill(void 0),this.#g=new it(r),this.#y=new it(r),this.#d=0,this.#f=0,this.#w=yb.create(r),this.#p=0,this.#u=0,typeof u=="function"&&(this.#o=u),typeof d=="function"?(this.#n=d,this.#h=[]):(this.#n=void 0,this.#h=void 0),this.#v=!!this.#o,this.#m=!!this.#n,this.noDisposeOnSet=!!m,this.noUpdateTTL=!!g,this.noDeleteOnFetchRejection=!!U,this.allowStaleOnFetchRejection=!!ne,this.allowStaleOnFetchAbort=!!ie,this.ignoreFetchAbort=!!ae,this.maxEntrySize!==0){if(this.#t!==0&&!Po(this.#t))throw new TypeError("maxSize must be a positive integer if specified");if(!Po(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#A()}if(this.allowStale=!!l,this.noDeleteOnStaleGet=!!K,this.updateAgeOnGet=!!a,this.updateAgeOnHas=!!p,this.ttlResolution=Po(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=n||0,this.ttl){if(!Po(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#M()}if(this.#e===0&&this.ttl===0&&this.#t===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#e&&!this.#t){let Ct="LRU_CACHE_UNBOUNDED";PY(Ct)&&(i1.add(Ct),o1("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",Ct,t))}}getRemainingTTL(e){return this.#a.has(e)?1/0:0}#M(){let e=new dc(this.#e),r=new dc(this.#e);this.#T=e,this.#E=r,this.#I=(o,a,p=fc.now())=>{if(r[o]=a!==0?p:0,e[o]=a,a!==0&&this.ttlAutopurge){let l=setTimeout(()=>{this.#x(o)&&this.#D(this.#c[o],"expire")},a+1);l.unref&&l.unref()}},this.#R=o=>{r[o]=e[o]!==0?fc.now():0},this.#r=(o,a)=>{if(e[a]){let p=e[a],l=r[a];if(!p||!l)return;o.ttl=p,o.start=l,o.now=n||i();let u=o.now-l;o.remainingTTL=p-u}};let n=0,i=()=>{let o=fc.now();if(this.ttlResolution>0){n=o;let a=setTimeout(()=>n=0,this.ttlResolution);a.unref&&a.unref()}return o};this.getRemainingTTL=o=>{let a=this.#a.get(o);if(a===void 0)return 0;let p=e[a],l=r[a];if(!p||!l)return 1/0;let u=(n||i())-l;return p-u},this.#x=o=>{let a=r[o],p=e[o];return!!p&&!!a&&(n||i())-a>p}}#R=()=>{};#r=()=>{};#I=()=>{};#x=()=>!1;#A(){let e=new dc(this.#e);this.#u=0,this.#_=e,this.#F=r=>{this.#u-=e[r],e[r]=0},this.#O=(r,n,i,o)=>{if(this.#l(n))return 0;if(!Po(i))if(o){if(typeof o!="function")throw new TypeError("sizeCalculation must be a function");if(i=o(n,r),!Po(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#C=(r,n,i)=>{if(e[r]=n,this.#t){let o=this.#t-e[r];for(;this.#u>o;)this.#L(!0)}this.#u+=e[r],i&&(i.entrySize=n,i.totalCalculatedSize=this.#u)}}#F=e=>{};#C=(e,r,n)=>{};#O=(e,r,n,i)=>{if(n||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#k({allowStale:e=this.allowStale}={}){if(this.#p)for(let r=this.#f;!(!this.#N(r)||((e||!this.#x(r))&&(yield r),r===this.#d));)r=this.#y[r]}*#P({allowStale:e=this.allowStale}={}){if(this.#p)for(let r=this.#d;!(!this.#N(r)||((e||!this.#x(r))&&(yield r),r===this.#f));)r=this.#g[r]}#N(e){return e!==void 0&&this.#a.get(this.#c[e])===e}*entries(){for(let e of this.#k())this.#i[e]!==void 0&&this.#c[e]!==void 0&&!this.#l(this.#i[e])&&(yield[this.#c[e],this.#i[e]])}*rentries(){for(let e of this.#P())this.#i[e]!==void 0&&this.#c[e]!==void 0&&!this.#l(this.#i[e])&&(yield[this.#c[e],this.#i[e]])}*keys(){for(let e of this.#k()){let r=this.#c[e];r!==void 0&&!this.#l(this.#i[e])&&(yield r)}}*rkeys(){for(let e of this.#P()){let r=this.#c[e];r!==void 0&&!this.#l(this.#i[e])&&(yield r)}}*values(){for(let e of this.#k())this.#i[e]!==void 0&&!this.#l(this.#i[e])&&(yield this.#i[e])}*rvalues(){for(let e of this.#P())this.#i[e]!==void 0&&!this.#l(this.#i[e])&&(yield this.#i[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,r={}){for(let n of this.#k()){let i=this.#i[n],o=this.#l(i)?i.__staleWhileFetching:i;if(o!==void 0&&e(o,this.#c[n],this))return this.get(this.#c[n],r)}}forEach(e,r=this){for(let n of this.#k()){let i=this.#i[n],o=this.#l(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#c[n],this)}}rforEach(e,r=this){for(let n of this.#P()){let i=this.#i[n],o=this.#l(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#c[n],this)}}purgeStale(){let e=!1;for(let r of this.#P({allowStale:!0}))this.#x(r)&&(this.#D(this.#c[r],"expire"),e=!0);return e}info(e){let r=this.#a.get(e);if(r===void 0)return;let n=this.#i[r],i=this.#l(n)?n.__staleWhileFetching:n;if(i===void 0)return;let o={value:i};if(this.#T&&this.#E){let a=this.#T[r],p=this.#E[r];if(a&&p){let l=a-(fc.now()-p);o.ttl=l,o.start=Date.now()}}return this.#_&&(o.size=this.#_[r]),o}dump(){let e=[];for(let r of this.#k({allowStale:!0})){let n=this.#c[r],i=this.#i[r],o=this.#l(i)?i.__staleWhileFetching:i;if(o===void 0||n===void 0)continue;let a={value:o};if(this.#T&&this.#E){a.ttl=this.#T[r];let p=fc.now()-this.#E[r];a.start=Math.floor(Date.now()-p)}this.#_&&(a.size=this.#_[r]),e.unshift([n,a])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let i=Date.now()-n.start;n.start=fc.now()-i}this.set(r,n.value,n)}}set(e,r,n={}){if(r===void 0)return this.delete(e),this;let{ttl:i=this.ttl,start:o,noDisposeOnSet:a=this.noDisposeOnSet,sizeCalculation:p=this.sizeCalculation,status:l}=n,{noUpdateTTL:u=this.noUpdateTTL}=n,d=this.#O(e,r,n.size||0,p);if(this.maxEntrySize&&d>this.maxEntrySize)return l&&(l.set="miss",l.maxEntrySizeExceeded=!0),this.#D(e,"set"),this;let m=this.#p===0?void 0:this.#a.get(e);if(m===void 0)m=this.#p===0?this.#f:this.#w.length!==0?this.#w.pop():this.#p===this.#e?this.#L(!1):this.#p,this.#c[m]=e,this.#i[m]=r,this.#a.set(e,m),this.#g[this.#f]=m,this.#y[m]=this.#f,this.#f=m,this.#p++,this.#C(m,d,l),l&&(l.set="add"),u=!1;else{this.#V(m);let g=this.#i[m];if(r!==g){if(this.#b&&this.#l(g)){g.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:x}=g;x!==void 0&&!a&&(this.#v&&this.#o?.(x,e,"set"),this.#m&&this.#h?.push([x,e,"set"]))}else a||(this.#v&&this.#o?.(g,e,"set"),this.#m&&this.#h?.push([g,e,"set"]));if(this.#F(m),this.#C(m,d,l),this.#i[m]=r,l){l.set="replace";let x=g&&this.#l(g)?g.__staleWhileFetching:g;x!==void 0&&(l.oldValue=x)}}else l&&(l.set="update")}if(i!==0&&!this.#T&&this.#M(),this.#T&&(u||this.#I(m,i,o),l&&this.#r(l,m)),!a&&this.#m&&this.#h){let g=this.#h,x;for(;x=g?.shift();)this.#n?.(...x)}return this}pop(){try{for(;this.#p;){let e=this.#i[this.#d];if(this.#L(!0),this.#l(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#m&&this.#h){let e=this.#h,r;for(;r=e?.shift();)this.#n?.(...r)}}}#L(e){let r=this.#d,n=this.#c[r],i=this.#i[r];return this.#b&&this.#l(i)?i.__abortController.abort(new Error("evicted")):(this.#v||this.#m)&&(this.#v&&this.#o?.(i,n,"evict"),this.#m&&this.#h?.push([i,n,"evict"])),this.#F(r),e&&(this.#c[r]=void 0,this.#i[r]=void 0,this.#w.push(r)),this.#p===1?(this.#d=this.#f=0,this.#w.length=0):this.#d=this.#g[r],this.#a.delete(n),this.#p--,r}has(e,r={}){let{updateAgeOnHas:n=this.updateAgeOnHas,status:i}=r,o=this.#a.get(e);if(o!==void 0){let a=this.#i[o];if(this.#l(a)&&a.__staleWhileFetching===void 0)return!1;if(this.#x(o))i&&(i.has="stale",this.#r(i,o));else return n&&this.#R(o),i&&(i.has="hit",this.#r(i,o)),!0}else i&&(i.has="miss");return!1}peek(e,r={}){let{allowStale:n=this.allowStale}=r,i=this.#a.get(e);if(i===void 0||!n&&this.#x(i))return;let o=this.#i[i];return this.#l(o)?o.__staleWhileFetching:o}#U(e,r,n,i){let o=r===void 0?void 0:this.#i[r];if(this.#l(o))return o;let a=new sy,{signal:p}=n;p?.addEventListener("abort",()=>a.abort(p.reason),{signal:a.signal});let l={signal:a.signal,options:n,context:i},u=(v,F=!1)=>{let{aborted:I}=a.signal,U=n.ignoreFetchAbort&&v!==void 0;if(n.status&&(I&&!F?(n.status.fetchAborted=!0,n.status.fetchError=a.signal.reason,U&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),I&&!U&&!F)return m(a.signal.reason);let K=x;return this.#i[r]===x&&(v===void 0?K.__staleWhileFetching?this.#i[r]=K.__staleWhileFetching:this.#D(e,"fetch"):(n.status&&(n.status.fetchUpdated=!0),this.set(e,v,l.options))),v},d=v=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=v),m(v)),m=v=>{let{aborted:F}=a.signal,I=F&&n.allowStaleOnFetchAbort,U=I||n.allowStaleOnFetchRejection,K=U||n.noDeleteOnFetchRejection,ne=x;if(this.#i[r]===x&&(!K||ne.__staleWhileFetching===void 0?this.#D(e,"fetch"):I||(this.#i[r]=ne.__staleWhileFetching)),U)return n.status&&ne.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),ne.__staleWhileFetching;if(ne.__returned===ne)throw v},g=(v,F)=>{let I=this.#s?.(e,o,l);I&&I instanceof Promise&&I.then(U=>v(U===void 0?void 0:U),F),a.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(v(void 0),n.allowStaleOnFetchAbort&&(v=U=>u(U,!0)))})};n.status&&(n.status.fetchDispatched=!0);let x=new Promise(g).then(u,d),b=Object.assign(x,{__abortController:a,__staleWhileFetching:o,__returned:void 0});return r===void 0?(this.set(e,b,{...l.options,status:void 0}),r=this.#a.get(e)):this.#i[r]=b,b}#l(e){if(!this.#b)return!1;let r=e;return!!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof sy}async fetch(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:a=this.ttl,noDisposeOnSet:p=this.noDisposeOnSet,size:l=0,sizeCalculation:u=this.sizeCalculation,noUpdateTTL:d=this.noUpdateTTL,noDeleteOnFetchRejection:m=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:g=this.allowStaleOnFetchRejection,ignoreFetchAbort:x=this.ignoreFetchAbort,allowStaleOnFetchAbort:b=this.allowStaleOnFetchAbort,context:v,forceRefresh:F=!1,status:I,signal:U}=r;if(!this.#b)return I&&(I.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,status:I});let K={allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,ttl:a,noDisposeOnSet:p,size:l,sizeCalculation:u,noUpdateTTL:d,noDeleteOnFetchRejection:m,allowStaleOnFetchRejection:g,allowStaleOnFetchAbort:b,ignoreFetchAbort:x,status:I,signal:U},ne=this.#a.get(e);if(ne===void 0){I&&(I.fetch="miss");let ie=this.#U(e,ne,K,v);return ie.__returned=ie}else{let ie=this.#i[ne];if(this.#l(ie)){let N=n&&ie.__staleWhileFetching!==void 0;return I&&(I.fetch="inflight",N&&(I.returnedStale=!0)),N?ie.__staleWhileFetching:ie.__returned=ie}let ae=this.#x(ne);if(!F&&!ae)return I&&(I.fetch="hit"),this.#V(ne),i&&this.#R(ne),I&&this.#r(I,ne),ie;let it=this.#U(e,ne,K,v),ct=it.__staleWhileFetching!==void 0&&n;return I&&(I.fetch=ae?"stale":"refresh",ct&&ae&&(I.returnedStale=!0)),ct?it.__staleWhileFetching:it.__returned=it}}async forceFetch(e,r={}){let n=await this.fetch(e,r);if(n===void 0)throw new Error("fetch() returned undefined");return n}memo(e,r={}){let n=this.#S;if(!n)throw new Error("no memoMethod provided to constructor");let{context:i,forceRefresh:o,...a}=r,p=this.get(e,a);if(!o&&p!==void 0)return p;let l=n(e,p,{options:a,context:i});return this.set(e,l,a),l}get(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:a}=r,p=this.#a.get(e);if(p!==void 0){let l=this.#i[p],u=this.#l(l);return a&&this.#r(a,p),this.#x(p)?(a&&(a.get="stale"),u?(a&&n&&l.__staleWhileFetching!==void 0&&(a.returnedStale=!0),n?l.__staleWhileFetching:void 0):(o||this.#D(e,"expire"),a&&n&&(a.returnedStale=!0),n?l:void 0)):(a&&(a.get="hit"),u?l.__staleWhileFetching:(this.#V(p),i&&this.#R(p),l))}else a&&(a.get="miss")}#H(e,r){this.#y[r]=e,this.#g[e]=r}#V(e){e!==this.#f&&(e===this.#d?this.#d=this.#g[e]:this.#H(this.#y[e],this.#g[e]),this.#H(this.#f,e),this.#f=e)}delete(e){return this.#D(e,"delete")}#D(e,r){let n=!1;if(this.#p!==0){let i=this.#a.get(e);if(i!==void 0)if(n=!0,this.#p===1)this.#B(r);else{this.#F(i);let o=this.#i[i];if(this.#l(o)?o.__abortController.abort(new Error("deleted")):(this.#v||this.#m)&&(this.#v&&this.#o?.(o,e,r),this.#m&&this.#h?.push([o,e,r])),this.#a.delete(e),this.#c[i]=void 0,this.#i[i]=void 0,i===this.#f)this.#f=this.#y[i];else if(i===this.#d)this.#d=this.#g[i];else{let a=this.#y[i];this.#g[a]=this.#g[i];let p=this.#g[i];this.#y[p]=this.#y[i]}this.#p--,this.#w.push(i)}}if(this.#m&&this.#h?.length){let i=this.#h,o;for(;o=i?.shift();)this.#n?.(...o)}return n}clear(){return this.#B("delete")}#B(e){for(let r of this.#P({allowStale:!0})){let n=this.#i[r];if(this.#l(n))n.__abortController.abort(new Error("deleted"));else{let i=this.#c[r];this.#v&&this.#o?.(n,i,e),this.#m&&this.#h?.push([n,i,e])}}if(this.#a.clear(),this.#i.fill(void 0),this.#c.fill(void 0),this.#T&&this.#E&&(this.#T.fill(0),this.#E.fill(0)),this.#_&&this.#_.fill(0),this.#d=0,this.#f=0,this.#w.length=0,this.#u=0,this.#p=0,this.#m&&this.#h){let r=this.#h,n;for(;n=r?.shift();)this.#n?.(...n)}}};var gc=require("node:path"),g1=require("node:url"),pi=require("fs"),UY=yr(require("node:fs"),1),Do=require("node:fs/promises");var dy=require("node:events"),_b=yr(require("node:stream"),1),u1=require("node:string_decoder"),a1=typeof process=="object"&&process?process:{stdout:null,stderr:null},MY=t=>!!t&&typeof t=="object"&&(t instanceof Ao||t instanceof _b.default||AY(t)||DY(t)),AY=t=>!!t&&typeof t=="object"&&t instanceof dy.EventEmitter&&typeof t.pipe=="function"&&t.pipe!==_b.default.Writable.prototype.pipe,DY=t=>!!t&&typeof t=="object"&&t instanceof dy.EventEmitter&&typeof t.write=="function"&&typeof t.end=="function",Li=Symbol("EOF"),Ui=Symbol("maybeEmitEnd"),Mo=Symbol("emittedEnd"),ay=Symbol("emittingEnd"),wl=Symbol("emittedError"),cy=Symbol("closed"),c1=Symbol("read"),py=Symbol("flush"),p1=Symbol("flushChunk"),Un=Symbol("encoding"),mc=Symbol("decoder"),Dt=Symbol("flowing"),_l=Symbol("paused"),hc=Symbol("resume"),It=Symbol("buffer"),lr=Symbol("pipes"),Ft=Symbol("bufferLength"),xb=Symbol("bufferPush"),ly=Symbol("bufferShift"),Zt=Symbol("objectMode"),yt=Symbol("destroyed"),Tb=Symbol("error"),Sb=Symbol("emitData"),l1=Symbol("emitEnd"),vb=Symbol("emitEnd2"),ai=Symbol("async"),bb=Symbol("abort"),uy=Symbol("aborted"),El=Symbol("signal"),ks=Symbol("dataListeners"),Gr=Symbol("discarded"),Rl=t=>Promise.resolve().then(t),IY=t=>t(),FY=t=>t==="end"||t==="finish"||t==="prefinish",CY=t=>t instanceof ArrayBuffer||!!t&&typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,OY=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),fy=class{src;dest;opts;ondrain;constructor(e,r,n){this.src=e,this.dest=r,this.opts=n,this.ondrain=()=>e[hc](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(e){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},wb=class extends fy{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,r,n){super(e,r,n),this.proxyErrors=i=>r.emit("error",i),e.on("error",this.proxyErrors)}},NY=t=>!!t.objectMode,LY=t=>!t.objectMode&&!!t.encoding&&t.encoding!=="buffer",Ao=class extends dy.EventEmitter{[Dt]=!1;[_l]=!1;[lr]=[];[It]=[];[Zt];[Un];[ai];[mc];[Li]=!1;[Mo]=!1;[ay]=!1;[cy]=!1;[wl]=null;[Ft]=0;[yt]=!1;[El];[uy]=!1;[ks]=0;[Gr]=!1;writable=!0;readable=!0;constructor(...e){let r=e[0]||{};if(super(),r.objectMode&&typeof r.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");NY(r)?(this[Zt]=!0,this[Un]=null):LY(r)?(this[Un]=r.encoding,this[Zt]=!1):(this[Zt]=!1,this[Un]=null),this[ai]=!!r.async,this[mc]=this[Un]?new u1.StringDecoder(this[Un]):null,r&&r.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[It]}),r&&r.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[lr]});let{signal:n}=r;n&&(this[El]=n,n.aborted?this[bb]():n.addEventListener("abort",()=>this[bb]()))}get bufferLength(){return this[Ft]}get encoding(){return this[Un]}set encoding(e){throw new Error("Encoding must be set at instantiation time")}setEncoding(e){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[Zt]}set objectMode(e){throw new Error("objectMode must be set at instantiation time")}get async(){return this[ai]}set async(e){this[ai]=this[ai]||!!e}[bb](){this[uy]=!0,this.emit("abort",this[El]?.reason),this.destroy(this[El]?.reason)}get aborted(){return this[uy]}set aborted(e){}write(e,r,n){if(this[uy])return!1;if(this[Li])throw new Error("write after end");if(this[yt])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof r=="function"&&(n=r,r="utf8"),r||(r="utf8");let i=this[ai]?Rl:IY;if(!this[Zt]&&!Buffer.isBuffer(e)){if(OY(e))e=Buffer.from(e.buffer,e.byteOffset,e.byteLength);else if(CY(e))e=Buffer.from(e);else if(typeof e!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[Zt]?(this[Dt]&&this[Ft]!==0&&this[py](!0),this[Dt]?this.emit("data",e):this[xb](e),this[Ft]!==0&&this.emit("readable"),n&&i(n),this[Dt]):e.length?(typeof e=="string"&&!(r===this[Un]&&!this[mc]?.lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[Un]&&(e=this[mc].write(e)),this[Dt]&&this[Ft]!==0&&this[py](!0),this[Dt]?this.emit("data",e):this[xb](e),this[Ft]!==0&&this.emit("readable"),n&&i(n),this[Dt]):(this[Ft]!==0&&this.emit("readable"),n&&i(n),this[Dt])}read(e){if(this[yt])return null;if(this[Gr]=!1,this[Ft]===0||e===0||e&&e>this[Ft])return this[Ui](),null;this[Zt]&&(e=null),this[It].length>1&&!this[Zt]&&(this[It]=[this[Un]?this[It].join(""):Buffer.concat(this[It],this[Ft])]);let r=this[c1](e||null,this[It][0]);return this[Ui](),r}[c1](e,r){if(this[Zt])this[ly]();else{let n=r;e===n.length||e===null?this[ly]():typeof n=="string"?(this[It][0]=n.slice(e),r=n.slice(0,e),this[Ft]-=e):(this[It][0]=n.subarray(e),r=n.subarray(0,e),this[Ft]-=e)}return this.emit("data",r),!this[It].length&&!this[Li]&&this.emit("drain"),r}end(e,r,n){return typeof e=="function"&&(n=e,e=void 0),typeof r=="function"&&(n=r,r="utf8"),e!==void 0&&this.write(e,r),n&&this.once("end",n),this[Li]=!0,this.writable=!1,(this[Dt]||!this[_l])&&this[Ui](),this}[hc](){this[yt]||(!this[ks]&&!this[lr].length&&(this[Gr]=!0),this[_l]=!1,this[Dt]=!0,this.emit("resume"),this[It].length?this[py]():this[Li]?this[Ui]():this.emit("drain"))}resume(){return this[hc]()}pause(){this[Dt]=!1,this[_l]=!0,this[Gr]=!1}get destroyed(){return this[yt]}get flowing(){return this[Dt]}get paused(){return this[_l]}[xb](e){this[Zt]?this[Ft]+=1:this[Ft]+=e.length,this[It].push(e)}[ly](){return this[Zt]?this[Ft]-=1:this[Ft]-=this[It][0].length,this[It].shift()}[py](e=!1){do;while(this[p1](this[ly]())&&this[It].length);!e&&!this[It].length&&!this[Li]&&this.emit("drain")}[p1](e){return this.emit("data",e),this[Dt]}pipe(e,r){if(this[yt])return e;this[Gr]=!1;let n=this[Mo];return r=r||{},e===a1.stdout||e===a1.stderr?r.end=!1:r.end=r.end!==!1,r.proxyErrors=!!r.proxyErrors,n?r.end&&e.end():(this[lr].push(r.proxyErrors?new wb(this,e,r):new fy(this,e,r)),this[ai]?Rl(()=>this[hc]()):this[hc]()),e}unpipe(e){let r=this[lr].find(n=>n.dest===e);r&&(this[lr].length===1?(this[Dt]&&this[ks]===0&&(this[Dt]=!1),this[lr]=[]):this[lr].splice(this[lr].indexOf(r),1),r.unpipe())}addListener(e,r){return this.on(e,r)}on(e,r){let n=super.on(e,r);if(e==="data")this[Gr]=!1,this[ks]++,!this[lr].length&&!this[Dt]&&this[hc]();else if(e==="readable"&&this[Ft]!==0)super.emit("readable");else if(FY(e)&&this[Mo])super.emit(e),this.removeAllListeners(e);else if(e==="error"&&this[wl]){let i=r;this[ai]?Rl(()=>i.call(this,this[wl])):i.call(this,this[wl])}return n}removeListener(e,r){return this.off(e,r)}off(e,r){let n=super.off(e,r);return e==="data"&&(this[ks]=this.listeners("data").length,this[ks]===0&&!this[Gr]&&!this[lr].length&&(this[Dt]=!1)),n}removeAllListeners(e){let r=super.removeAllListeners(e);return(e==="data"||e===void 0)&&(this[ks]=0,!this[Gr]&&!this[lr].length&&(this[Dt]=!1)),r}get emittedEnd(){return this[Mo]}[Ui](){!this[ay]&&!this[Mo]&&!this[yt]&&this[It].length===0&&this[Li]&&(this[ay]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[cy]&&this.emit("close"),this[ay]=!1)}emit(e,...r){let n=r[0];if(e!=="error"&&e!=="close"&&e!==yt&&this[yt])return!1;if(e==="data")return!this[Zt]&&!n?!1:this[ai]?(Rl(()=>this[Sb](n)),!0):this[Sb](n);if(e==="end")return this[l1]();if(e==="close"){if(this[cy]=!0,!this[Mo]&&!this[yt])return!1;let o=super.emit("close");return this.removeAllListeners("close"),o}else if(e==="error"){this[wl]=n,super.emit(Tb,n);let o=!this[El]||this.listeners("error").length?super.emit("error",n):!1;return this[Ui](),o}else if(e==="resume"){let o=super.emit("resume");return this[Ui](),o}else if(e==="finish"||e==="prefinish"){let o=super.emit(e);return this.removeAllListeners(e),o}let i=super.emit(e,...r);return this[Ui](),i}[Sb](e){for(let n of this[lr])n.dest.write(e)===!1&&this.pause();let r=this[Gr]?!1:super.emit("data",e);return this[Ui](),r}[l1](){return this[Mo]?!1:(this[Mo]=!0,this.readable=!1,this[ai]?(Rl(()=>this[vb]()),!0):this[vb]())}[vb](){if(this[mc]){let r=this[mc].end();if(r){for(let n of this[lr])n.dest.write(r);this[Gr]||super.emit("data",r)}}for(let r of this[lr])r.end();let e=super.emit("end");return this.removeAllListeners("end"),e}async collect(){let e=Object.assign([],{dataLength:0});this[Zt]||(e.dataLength=0);let r=this.promise();return this.on("data",n=>{e.push(n),this[Zt]||(e.dataLength+=n.length)}),await r,e}async concat(){if(this[Zt])throw new Error("cannot concat in objectMode");let e=await this.collect();return this[Un]?e.join(""):Buffer.concat(e,e.dataLength)}async promise(){return new Promise((e,r)=>{this.on(yt,()=>r(new Error("stream destroyed"))),this.on("error",n=>r(n)),this.on("end",()=>e())})}[Symbol.asyncIterator](){this[Gr]=!1;let e=!1,r=async()=>(this.pause(),e=!0,{value:void 0,done:!0});return{next:()=>{if(e)return r();let i=this.read();if(i!==null)return Promise.resolve({done:!1,value:i});if(this[Li])return r();let o,a,p=m=>{this.off("data",l),this.off("end",u),this.off(yt,d),r(),a(m)},l=m=>{this.off("error",p),this.off("end",u),this.off(yt,d),this.pause(),o({value:m,done:!!this[Li]})},u=()=>{this.off("error",p),this.off("data",l),this.off(yt,d),r(),o({done:!0,value:void 0})},d=()=>p(new Error("stream destroyed"));return new Promise((m,g)=>{a=g,o=m,this.once(yt,d),this.once("error",p),this.once("end",u),this.once("data",l)})},throw:r,return:r,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[Gr]=!1;let e=!1,r=()=>(this.pause(),this.off(Tb,r),this.off(yt,r),this.off("end",r),e=!0,{done:!0,value:void 0}),n=()=>{if(e)return r();let i=this.read();return i===null?r():{done:!1,value:i}};return this.once("end",r),this.once(Tb,r),this.once(yt,r),{next:n,throw:r,return:r,[Symbol.iterator](){return this}}}destroy(e){if(this[yt])return e?this.emit("error",e):this.emit(yt),this;this[yt]=!0,this[Gr]=!0,this[It].length=0,this[Ft]=0;let r=this;return typeof r.close=="function"&&!this[cy]&&r.close(),e?this.emit("error",e):this.emit(yt),this}static get isStream(){return MY}};var HY=pi.realpathSync.native,Pl={lstatSync:pi.lstatSync,readdir:pi.readdir,readdirSync:pi.readdirSync,readlinkSync:pi.readlinkSync,realpathSync:HY,promises:{lstat:Do.lstat,readdir:Do.readdir,readlink:Do.readlink,realpath:Do.realpath}},y1=t=>!t||t===Pl||t===UY?Pl:{...Pl,...t,promises:{...Pl.promises,...t.promises||{}}},x1=/^\\\\\?\\([a-z]:)\\?$/i,VY=t=>t.replace(/\//g,"\\").replace(x1,"$1\\"),BY=/[\\\/]/,Tn=0,T1=1,S1=2,ci=4,v1=6,b1=8,Ps=10,w1=12,xn=15,kl=~xn,Eb=16,f1=32,Ml=64,Hn=128,my=256,gy=512,d1=Ml|Hn|gy,WY=1023,Rb=t=>t.isFile()?b1:t.isDirectory()?ci:t.isSymbolicLink()?Ps:t.isCharacterDevice()?S1:t.isBlockDevice()?v1:t.isSocket()?w1:t.isFIFO()?T1:Tn,m1=new Map,Al=t=>{let e=m1.get(t);if(e)return e;let r=t.normalize("NFKD");return m1.set(t,r),r},h1=new Map,hy=t=>{let e=h1.get(t);if(e)return e;let r=Al(t.toLowerCase());return h1.set(t,r),r},yy=class extends bl{constructor(){super({max:256})}},kb=class extends bl{constructor(e=16*1024){super({maxSize:e,sizeCalculation:r=>r.length+1})}},_1=Symbol("PathScurry setAsCwd"),Yt=class{name;root;roots;parent;nocase;isCWD=!1;#e;#t;get dev(){return this.#t}#o;get mode(){return this.#o}#n;get nlink(){return this.#n}#s;get uid(){return this.#s}#S;get gid(){return this.#S}#p;get rdev(){return this.#p}#u;get blksize(){return this.#u}#a;get ino(){return this.#a}#c;get size(){return this.#c}#i;get blocks(){return this.#i}#g;get atimeMs(){return this.#g}#y;get mtimeMs(){return this.#y}#d;get ctimeMs(){return this.#d}#f;get birthtimeMs(){return this.#f}#w;get atime(){return this.#w}#h;get mtime(){return this.#h}#_;get ctime(){return this.#_}#E;get birthtime(){return this.#E}#T;#v;#b;#m;#M;#R;#r;#I;#x;#A;get parentPath(){return(this.parent||this).fullpath()}get path(){return this.parentPath}constructor(e,r=Tn,n,i,o,a,p){this.name=e,this.#T=o?hy(e):Al(e),this.#r=r&WY,this.nocase=o,this.roots=i,this.root=n||this,this.#I=a,this.#b=p.fullpath,this.#M=p.relative,this.#R=p.relativePosix,this.parent=p.parent,this.parent?this.#e=this.parent.#e:this.#e=y1(p.fs)}depth(){return this.#v!==void 0?this.#v:this.parent?this.#v=this.parent.depth()+1:this.#v=0}childrenCache(){return this.#I}resolve(e){if(!e)return this;let r=this.getRootString(e),i=e.substring(r.length).split(this.splitSep);return r?this.getRoot(r).#F(i):this.#F(i)}#F(e){let r=this;for(let n of e)r=r.child(n);return r}children(){let e=this.#I.get(this);if(e)return e;let r=Object.assign([],{provisional:0});return this.#I.set(this,r),this.#r&=~Eb,r}child(e,r){if(e===""||e===".")return this;if(e==="..")return this.parent||this;let n=this.children(),i=this.nocase?hy(e):Al(e);for(let l of n)if(l.#T===i)return l;let o=this.parent?this.sep:"",a=this.#b?this.#b+o+e:void 0,p=this.newChild(e,Tn,{...r,parent:this,fullpath:a});return this.canReaddir()||(p.#r|=Hn),n.push(p),p}relative(){if(this.isCWD)return"";if(this.#M!==void 0)return this.#M;let e=this.name,r=this.parent;if(!r)return this.#M=this.name;let n=r.relative();return n+(!n||!r.parent?"":this.sep)+e}relativePosix(){if(this.sep==="/")return this.relative();if(this.isCWD)return"";if(this.#R!==void 0)return this.#R;let e=this.name,r=this.parent;if(!r)return this.#R=this.fullpathPosix();let n=r.relativePosix();return n+(!n||!r.parent?"":"/")+e}fullpath(){if(this.#b!==void 0)return this.#b;let e=this.name,r=this.parent;if(!r)return this.#b=this.name;let i=r.fullpath()+(r.parent?this.sep:"")+e;return this.#b=i}fullpathPosix(){if(this.#m!==void 0)return this.#m;if(this.sep==="/")return this.#m=this.fullpath();if(!this.parent){let i=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(i)?this.#m=`//?/${i}`:this.#m=i}let e=this.parent,r=e.fullpathPosix(),n=r+(!r||!e.parent?"":"/")+this.name;return this.#m=n}isUnknown(){return(this.#r&xn)===Tn}isType(e){return this[`is${e}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#r&xn)===b1}isDirectory(){return(this.#r&xn)===ci}isCharacterDevice(){return(this.#r&xn)===S1}isBlockDevice(){return(this.#r&xn)===v1}isFIFO(){return(this.#r&xn)===T1}isSocket(){return(this.#r&xn)===w1}isSymbolicLink(){return(this.#r&Ps)===Ps}lstatCached(){return this.#r&f1?this:void 0}readlinkCached(){return this.#x}realpathCached(){return this.#A}readdirCached(){let e=this.children();return e.slice(0,e.provisional)}canReadlink(){if(this.#x)return!0;if(!this.parent)return!1;let e=this.#r&xn;return!(e!==Tn&&e!==Ps||this.#r&my||this.#r&Hn)}calledReaddir(){return!!(this.#r&Eb)}isENOENT(){return!!(this.#r&Hn)}isNamed(e){return this.nocase?this.#T===hy(e):this.#T===Al(e)}async readlink(){let e=this.#x;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=await this.#e.promises.readlink(this.fullpath()),n=(await this.parent.realpath())?.resolve(r);if(n)return this.#x=n}catch(r){this.#l(r.code);return}}readlinkSync(){let e=this.#x;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=this.#e.readlinkSync(this.fullpath()),n=this.parent.realpathSync()?.resolve(r);if(n)return this.#x=n}catch(r){this.#l(r.code);return}}#C(e){this.#r|=Eb;for(let r=e.provisional;r<e.length;r++){let n=e[r];n&&n.#O()}}#O(){this.#r&Hn||(this.#r=(this.#r|Hn)&kl,this.#k())}#k(){let e=this.children();e.provisional=0;for(let r of e)r.#O()}#P(){this.#r|=gy,this.#N()}#N(){if(this.#r&Ml)return;let e=this.#r;(e&xn)===ci&&(e&=kl),this.#r=e|Ml,this.#k()}#L(e=""){e==="ENOTDIR"||e==="EPERM"?this.#N():e==="ENOENT"?this.#O():this.children().provisional=0}#U(e=""){e==="ENOTDIR"?this.parent.#N():e==="ENOENT"&&this.#O()}#l(e=""){let r=this.#r;r|=my,e==="ENOENT"&&(r|=Hn),(e==="EINVAL"||e==="UNKNOWN")&&(r&=kl),this.#r=r,e==="ENOTDIR"&&this.parent&&this.parent.#N()}#H(e,r){return this.#D(e,r)||this.#V(e,r)}#V(e,r){let n=Rb(e),i=this.newChild(e.name,n,{parent:this}),o=i.#r&xn;return o!==ci&&o!==Ps&&o!==Tn&&(i.#r|=Ml),r.unshift(i),r.provisional++,i}#D(e,r){for(let n=r.provisional;n<r.length;n++){let i=r[n];if((this.nocase?hy(e.name):Al(e.name))===i.#T)return this.#B(e,i,n,r)}}#B(e,r,n,i){let o=r.name;return r.#r=r.#r&kl|Rb(e),o!==e.name&&(r.name=e.name),n!==i.provisional&&(n===i.length-1?i.pop():i.splice(n,1),i.unshift(r)),i.provisional++,r}async lstat(){if(!(this.#r&Hn))try{return this.#q(await this.#e.promises.lstat(this.fullpath())),this}catch(e){this.#U(e.code)}}lstatSync(){if(!(this.#r&Hn))try{return this.#q(this.#e.lstatSync(this.fullpath())),this}catch(e){this.#U(e.code)}}#q(e){let{atime:r,atimeMs:n,birthtime:i,birthtimeMs:o,blksize:a,blocks:p,ctime:l,ctimeMs:u,dev:d,gid:m,ino:g,mode:x,mtime:b,mtimeMs:v,nlink:F,rdev:I,size:U,uid:K}=e;this.#w=r,this.#g=n,this.#E=i,this.#f=o,this.#u=a,this.#i=p,this.#_=l,this.#d=u,this.#t=d,this.#S=m,this.#a=g,this.#o=x,this.#h=b,this.#y=v,this.#n=F,this.#p=I,this.#c=U,this.#s=K;let ne=Rb(e);this.#r=this.#r&kl|ne|f1,ne!==Tn&&ne!==ci&&ne!==Ps&&(this.#r|=Ml)}#$=[];#j=!1;#z(e){this.#j=!1;let r=this.#$.slice();this.#$.length=0,r.forEach(n=>n(null,e))}readdirCB(e,r=!1){if(!this.canReaddir()){r?e(null,[]):queueMicrotask(()=>e(null,[]));return}let n=this.children();if(this.calledReaddir()){let o=n.slice(0,n.provisional);r?e(null,o):queueMicrotask(()=>e(null,o));return}if(this.#$.push(e),this.#j)return;this.#j=!0;let i=this.fullpath();this.#e.readdir(i,{withFileTypes:!0},(o,a)=>{if(o)this.#L(o.code),n.provisional=0;else{for(let p of a)this.#H(p,n);this.#C(n)}this.#z(n.slice(0,n.provisional))})}#W;async readdir(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();if(this.#W)await this.#W;else{let n=()=>{};this.#W=new Promise(i=>n=i);try{for(let i of await this.#e.promises.readdir(r,{withFileTypes:!0}))this.#H(i,e);this.#C(e)}catch(i){this.#L(i.code),e.provisional=0}this.#W=void 0,n()}return e.slice(0,e.provisional)}readdirSync(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();try{for(let n of this.#e.readdirSync(r,{withFileTypes:!0}))this.#H(n,e);this.#C(e)}catch(n){this.#L(n.code),e.provisional=0}return e.slice(0,e.provisional)}canReaddir(){if(this.#r&d1)return!1;let e=xn&this.#r;return e===Tn||e===ci||e===Ps}shouldWalk(e,r){return(this.#r&ci)===ci&&!(this.#r&d1)&&!e.has(this)&&(!r||r(this))}async realpath(){if(this.#A)return this.#A;if(!((gy|my|Hn)&this.#r))try{let e=await this.#e.promises.realpath(this.fullpath());return this.#A=this.resolve(e)}catch{this.#P()}}realpathSync(){if(this.#A)return this.#A;if(!((gy|my|Hn)&this.#r))try{let e=this.#e.realpathSync(this.fullpath());return this.#A=this.resolve(e)}catch{this.#P()}}[_1](e){if(e===this)return;e.isCWD=!1,this.isCWD=!0;let r=new Set([]),n=[],i=this;for(;i&&i.parent;)r.add(i),i.#M=n.join(this.sep),i.#R=n.join("/"),i=i.parent,n.push("..");for(i=e;i&&i.parent&&!r.has(i);)i.#M=void 0,i.#R=void 0,i=i.parent}},xy=class t extends Yt{sep="\\";splitSep=BY;constructor(e,r=Tn,n,i,o,a,p){super(e,r,n,i,o,a,p)}newChild(e,r=Tn,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}getRootString(e){return gc.win32.parse(e).root}getRoot(e){if(e=VY(e.toUpperCase()),e===this.root.name)return this.root;for(let[r,n]of Object.entries(this.roots))if(this.sameRoot(e,r))return this.roots[e]=n;return this.roots[e]=new yc(e,this).root}sameRoot(e,r=this.root.name){return e=e.toUpperCase().replace(/\//g,"\\").replace(x1,"$1\\"),e===r}},Ty=class t extends Yt{splitSep="/";sep="/";constructor(e,r=Tn,n,i,o,a,p){super(e,r,n,i,o,a,p)}getRootString(e){return e.startsWith("/")?"/":""}getRoot(e){return this.root}newChild(e,r=Tn,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}},Sy=class{root;rootPath;roots;cwd;#e;#t;#o;nocase;#n;constructor(e=process.cwd(),r,n,{nocase:i,childrenCacheSize:o=16*1024,fs:a=Pl}={}){this.#n=y1(a),(e instanceof URL||e.startsWith("file://"))&&(e=(0,g1.fileURLToPath)(e));let p=r.resolve(e);this.roots=Object.create(null),this.rootPath=this.parseRootPath(p),this.#e=new yy,this.#t=new yy,this.#o=new kb(o);let l=p.substring(this.rootPath.length).split(n);if(l.length===1&&!l[0]&&l.pop(),i===void 0)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=i,this.root=this.newRoot(this.#n),this.roots[this.rootPath]=this.root;let u=this.root,d=l.length-1,m=r.sep,g=this.rootPath,x=!1;for(let b of l){let v=d--;u=u.child(b,{relative:new Array(v).fill("..").join(m),relativePosix:new Array(v).fill("..").join("/"),fullpath:g+=(x?"":m)+b}),x=!0}this.cwd=u}depth(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.depth()}childrenCache(){return this.#o}resolve(...e){let r="";for(let o=e.length-1;o>=0;o--){let a=e[o];if(!(!a||a===".")&&(r=r?`${a}/${r}`:a,this.isAbsolute(a)))break}let n=this.#e.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpath();return this.#e.set(r,i),i}resolvePosix(...e){let r="";for(let o=e.length-1;o>=0;o--){let a=e[o];if(!(!a||a===".")&&(r=r?`${a}/${r}`:a,this.isAbsolute(a)))break}let n=this.#t.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpathPosix();return this.#t.set(r,i),i}relative(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relative()}relativePosix(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relativePosix()}basename(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.name}dirname(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),(e.parent||e).fullpath()}async readdir(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Yt||(r=e,e=this.cwd);let{withFileTypes:n}=r;if(e.canReaddir()){let i=await e.readdir();return n?i:i.map(o=>o.name)}else return[]}readdirSync(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Yt||(r=e,e=this.cwd);let{withFileTypes:n=!0}=r;return e.canReaddir()?n?e.readdirSync():e.readdirSync().map(i=>i.name):[]}async lstat(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstat()}lstatSync(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstatSync()}async readlink(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Yt||(r=e.withFileTypes,e=this.cwd);let n=await e.readlink();return r?n:n?.fullpath()}readlinkSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Yt||(r=e.withFileTypes,e=this.cwd);let n=e.readlinkSync();return r?n:n?.fullpath()}async realpath(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Yt||(r=e.withFileTypes,e=this.cwd);let n=await e.realpath();return r?n:n?.fullpath()}realpathSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Yt||(r=e.withFileTypes,e=this.cwd);let n=e.realpathSync();return r?n:n?.fullpath()}async walk(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Yt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:a}=r,p=[];(!o||o(e))&&p.push(n?e:e.fullpath());let l=new Set,u=(m,g)=>{l.add(m),m.readdirCB((x,b)=>{if(x)return g(x);let v=b.length;if(!v)return g();let F=()=>{--v===0&&g()};for(let I of b)(!o||o(I))&&p.push(n?I:I.fullpath()),i&&I.isSymbolicLink()?I.realpath().then(U=>U?.isUnknown()?U.lstat():U).then(U=>U?.shouldWalk(l,a)?u(U,F):F()):I.shouldWalk(l,a)?u(I,F):F()},!0)},d=e;return new Promise((m,g)=>{u(d,x=>{if(x)return g(x);m(p)})})}walkSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Yt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:a}=r,p=[];(!o||o(e))&&p.push(n?e:e.fullpath());let l=new Set([e]);for(let u of l){let d=u.readdirSync();for(let m of d){(!o||o(m))&&p.push(n?m:m.fullpath());let g=m;if(m.isSymbolicLink()){if(!(i&&(g=m.realpathSync())))continue;g.isUnknown()&&g.lstatSync()}g.shouldWalk(l,a)&&l.add(g)}}return p}[Symbol.asyncIterator](){return this.iterate()}iterate(e=this.cwd,r={}){return typeof e=="string"?e=this.cwd.resolve(e):e instanceof Yt||(r=e,e=this.cwd),this.stream(e,r)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Yt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:a}=r;(!o||o(e))&&(yield n?e:e.fullpath());let p=new Set([e]);for(let l of p){let u=l.readdirSync();for(let d of u){(!o||o(d))&&(yield n?d:d.fullpath());let m=d;if(d.isSymbolicLink()){if(!(i&&(m=d.realpathSync())))continue;m.isUnknown()&&m.lstatSync()}m.shouldWalk(p,a)&&p.add(m)}}}stream(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Yt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:a}=r,p=new Ao({objectMode:!0});(!o||o(e))&&p.write(n?e:e.fullpath());let l=new Set,u=[e],d=0,m=()=>{let g=!1;for(;!g;){let x=u.shift();if(!x){d===0&&p.end();return}d++,l.add(x);let b=(F,I,U=!1)=>{if(F)return p.emit("error",F);if(i&&!U){let K=[];for(let ne of I)ne.isSymbolicLink()&&K.push(ne.realpath().then(ie=>ie?.isUnknown()?ie.lstat():ie));if(K.length){Promise.all(K).then(()=>b(null,I,!0));return}}for(let K of I)K&&(!o||o(K))&&(p.write(n?K:K.fullpath())||(g=!0));d--;for(let K of I){let ne=K.realpathCached()||K;ne.shouldWalk(l,a)&&u.push(ne)}g&&!p.flowing?p.once("drain",m):v||m()},v=!0;x.readdirCB(b,!0),v=!1}};return m(),p}streamSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Yt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:a}=r,p=new Ao({objectMode:!0}),l=new Set;(!o||o(e))&&p.write(n?e:e.fullpath());let u=[e],d=0,m=()=>{let g=!1;for(;!g;){let x=u.shift();if(!x){d===0&&p.end();return}d++,l.add(x);let b=x.readdirSync();for(let v of b)(!o||o(v))&&(p.write(n?v:v.fullpath())||(g=!0));d--;for(let v of b){let F=v;if(v.isSymbolicLink()){if(!(i&&(F=v.realpathSync())))continue;F.isUnknown()&&F.lstatSync()}F.shouldWalk(l,a)&&u.push(F)}}g&&!p.flowing&&p.once("drain",m)};return m(),p}chdir(e=this.cwd){let r=this.cwd;this.cwd=typeof e=="string"?this.cwd.resolve(e):e,this.cwd[_1](r)}},yc=class extends Sy{sep="\\";constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,gc.win32,"\\",{...r,nocase:n}),this.nocase=n;for(let i=this.cwd;i;i=i.parent)i.nocase=this.nocase}parseRootPath(e){return gc.win32.parse(e).root.toUpperCase()}newRoot(e){return new xy(this.rootPath,ci,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")||e.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(e)}},xc=class extends Sy{sep="/";constructor(e=process.cwd(),r={}){let{nocase:n=!1}=r;super(e,gc.posix,"/",{...r,nocase:n}),this.nocase=n}parseRootPath(e){return"/"}newRoot(e){return new Ty(this.rootPath,ci,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")}},Dl=class extends xc{constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,{...r,nocase:n})}},uHe=process.platform==="win32"?xy:Ty,E1=process.platform==="win32"?yc:process.platform==="darwin"?Dl:xc;var $Y=t=>t.length>=1,jY=t=>t.length>=1,Tc=class t{#e;#t;#o;length;#n;#s;#S;#p;#u;#a;#c=!0;constructor(e,r,n,i){if(!$Y(e))throw new TypeError("empty pattern list");if(!jY(r))throw new TypeError("empty glob list");if(r.length!==e.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=e.length,n<0||n>=this.length)throw new TypeError("index out of range");if(this.#e=e,this.#t=r,this.#o=n,this.#n=i,this.#o===0){if(this.isUNC()){let[o,a,p,l,...u]=this.#e,[d,m,g,x,...b]=this.#t;u[0]===""&&(u.shift(),b.shift());let v=[o,a,p,l,""].join("/"),F=[d,m,g,x,""].join("/");this.#e=[v,...u],this.#t=[F,...b],this.length=this.#e.length}else if(this.isDrive()||this.isAbsolute()){let[o,...a]=this.#e,[p,...l]=this.#t;a[0]===""&&(a.shift(),l.shift());let u=o+"/",d=p+"/";this.#e=[u,...a],this.#t=[d,...l],this.length=this.#e.length}}}pattern(){return this.#e[this.#o]}isString(){return typeof this.#e[this.#o]=="string"}isGlobstar(){return this.#e[this.#o]===Wt}isRegExp(){return this.#e[this.#o]instanceof RegExp}globString(){return this.#S=this.#S||(this.#o===0?this.isAbsolute()?this.#t[0]+this.#t.slice(1).join("/"):this.#t.join("/"):this.#t.slice(this.#o).join("/"))}hasMore(){return this.length>this.#o+1}rest(){return this.#s!==void 0?this.#s:this.hasMore()?(this.#s=new t(this.#e,this.#t,this.#o+1,this.#n),this.#s.#a=this.#a,this.#s.#u=this.#u,this.#s.#p=this.#p,this.#s):this.#s=null}isUNC(){let e=this.#e;return this.#u!==void 0?this.#u:this.#u=this.#n==="win32"&&this.#o===0&&e[0]===""&&e[1]===""&&typeof e[2]=="string"&&!!e[2]&&typeof e[3]=="string"&&!!e[3]}isDrive(){let e=this.#e;return this.#p!==void 0?this.#p:this.#p=this.#n==="win32"&&this.#o===0&&this.length>1&&typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0])}isAbsolute(){let e=this.#e;return this.#a!==void 0?this.#a:this.#a=e[0]===""&&e.length>1||this.isDrive()||this.isUNC()}root(){let e=this.#e[0];return typeof e=="string"&&this.isAbsolute()&&this.#o===0?e:""}checkFollowGlobstar(){return!(this.#o===0||!this.isGlobstar()||!this.#c)}markFollowGlobstar(){return this.#o===0||!this.isGlobstar()||!this.#c?!1:(this.#c=!1,!0)}};var qY=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",Sc=class{relative;relativeChildren;absolute;absoluteChildren;platform;mmopts;constructor(e,{nobrace:r,nocase:n,noext:i,noglobstar:o,platform:a=qY}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[],this.platform=a,this.mmopts={dot:!0,nobrace:r,nocase:n,noext:i,noglobstar:o,optimizationLevel:2,platform:a,nocomment:!0,nonegate:!0};for(let p of e)this.add(p)}add(e){let r=new zr(e,this.mmopts);for(let n=0;n<r.set.length;n++){let i=r.set[n],o=r.globParts[n];if(!i||!o)throw new Error("invalid pattern object");for(;i[0]==="."&&o[0]===".";)i.shift(),o.shift();let a=new Tc(i,o,0,this.platform),p=new zr(a.globString(),this.mmopts),l=o[o.length-1]==="**",u=a.isAbsolute();u?this.absolute.push(p):this.relative.push(p),l&&(u?this.absoluteChildren.push(p):this.relativeChildren.push(p))}}ignored(e){let r=e.fullpath(),n=`${r}/`,i=e.relative()||".",o=`${i}/`;for(let a of this.relative)if(a.match(i)||a.match(o))return!0;for(let a of this.absolute)if(a.match(r)||a.match(n))return!0;return!1}childrenIgnored(e){let r=e.fullpath()+"/",n=(e.relative()||".")+"/";for(let i of this.relativeChildren)if(i.match(n))return!0;for(let i of this.absoluteChildren)if(i.match(r))return!0;return!1}};var Pb=class t{store;constructor(e=new Map){this.store=e}copy(){return new t(new Map(this.store))}hasWalked(e,r){return this.store.get(e.fullpath())?.has(r.globString())}storeWalked(e,r){let n=e.fullpath(),i=this.store.get(n);i?i.add(r.globString()):this.store.set(n,new Set([r.globString()]))}},Mb=class{store=new Map;add(e,r,n){let i=(r?2:0)|(n?1:0),o=this.store.get(e);this.store.set(e,o===void 0?i:i&o)}entries(){return[...this.store.entries()].map(([e,r])=>[e,!!(r&2),!!(r&1)])}},Ab=class{store=new Map;add(e,r){if(!e.canReaddir())return;let n=this.store.get(e);n?n.find(i=>i.globString()===r.globString())||n.push(r):this.store.set(e,[r])}get(e){let r=this.store.get(e);if(!r)throw new Error("attempting to walk unknown path");return r}entries(){return this.keys().map(e=>[e,this.store.get(e)])}keys(){return[...this.store.keys()].filter(e=>e.canReaddir())}},Il=class t{hasWalkedCache;matches=new Mb;subwalks=new Ab;patterns;follow;dot;opts;constructor(e,r){this.opts=e,this.follow=!!e.follow,this.dot=!!e.dot,this.hasWalkedCache=r?r.copy():new Pb}processPatterns(e,r){this.patterns=r;let n=r.map(i=>[e,i]);for(let[i,o]of n){this.hasWalkedCache.storeWalked(i,o);let a=o.root(),p=o.isAbsolute()&&this.opts.absolute!==!1;if(a){i=i.resolve(a==="/"&&this.opts.root!==void 0?this.opts.root:a);let m=o.rest();if(m)o=m;else{this.matches.add(i,!0,!1);continue}}if(i.isENOENT())continue;let l,u,d=!1;for(;typeof(l=o.pattern())=="string"&&(u=o.rest());)i=i.resolve(l),o=u,d=!0;if(l=o.pattern(),u=o.rest(),d){if(this.hasWalkedCache.hasWalked(i,o))continue;this.hasWalkedCache.storeWalked(i,o)}if(typeof l=="string"){let m=l===".."||l===""||l===".";this.matches.add(i.resolve(l),p,m);continue}else if(l===Wt){(!i.isSymbolicLink()||this.follow||o.checkFollowGlobstar())&&this.subwalks.add(i,o);let m=u?.pattern(),g=u?.rest();if(!u||(m===""||m===".")&&!g)this.matches.add(i,p,m===""||m===".");else if(m===".."){let x=i.parent||i;g?this.hasWalkedCache.hasWalked(x,g)||this.subwalks.add(x,g):this.matches.add(x,p,!0)}}else l instanceof RegExp&&this.subwalks.add(i,o)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new t(this.opts,this.hasWalkedCache)}filterEntries(e,r){let n=this.subwalks.get(e),i=this.child();for(let o of r)for(let a of n){let p=a.isAbsolute(),l=a.pattern(),u=a.rest();l===Wt?i.testGlobstar(o,a,u,p):l instanceof RegExp?i.testRegExp(o,l,u,p):i.testString(o,l,u,p)}return i}testGlobstar(e,r,n,i){if((this.dot||!e.name.startsWith("."))&&(r.hasMore()||this.matches.add(e,i,!1),e.canReaddir()&&(this.follow||!e.isSymbolicLink()?this.subwalks.add(e,r):e.isSymbolicLink()&&(n&&r.checkFollowGlobstar()?this.subwalks.add(e,n):r.markFollowGlobstar()&&this.subwalks.add(e,r)))),n){let o=n.pattern();if(typeof o=="string"&&o!==".."&&o!==""&&o!==".")this.testString(e,o,n.rest(),i);else if(o===".."){let a=e.parent||e;this.subwalks.add(a,n)}else o instanceof RegExp&&this.testRegExp(e,o,n.rest(),i)}}testRegExp(e,r,n,i){r.test(e.name)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}testString(e,r,n,i){e.isNamed(r)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}};var zY=(t,e)=>typeof t=="string"?new Sc([t],e):Array.isArray(t)?new Sc(t,e):t,vy=class{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#e=[];#t;#o;signal;maxDepth;includeChildMatches;constructor(e,r,n){if(this.patterns=e,this.path=r,this.opts=n,this.#o=!n.posix&&n.platform==="win32"?"\\":"/",this.includeChildMatches=n.includeChildMatches!==!1,(n.ignore||!this.includeChildMatches)&&(this.#t=zY(n.ignore??[],n),!this.includeChildMatches&&typeof this.#t.add!="function")){let i="cannot ignore child matches, ignore lacks add() method.";throw new Error(i)}this.maxDepth=n.maxDepth||1/0,n.signal&&(this.signal=n.signal,this.signal.addEventListener("abort",()=>{this.#e.length=0}))}#n(e){return this.seen.has(e)||!!this.#t?.ignored?.(e)}#s(e){return!!this.#t?.childrenIgnored?.(e)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;this.paused=!1;let e;for(;!this.paused&&(e=this.#e.shift());)e()}onResume(e){this.signal?.aborted||(this.paused?this.#e.push(e):e())}async matchCheck(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||await e.realpath(),!n)return;e=n}let o=e.isUnknown()||this.opts.stat?await e.lstat():e;if(this.opts.follow&&this.opts.nodir&&o?.isSymbolicLink()){let a=await o.realpath();a&&(a.isUnknown()||this.opts.stat)&&await a.lstat()}return this.matchCheckTest(o,r)}matchCheckTest(e,r){return e&&(this.maxDepth===1/0||e.depth()<=this.maxDepth)&&(!r||e.canReaddir())&&(!this.opts.nodir||!e.isDirectory())&&(!this.opts.nodir||!this.opts.follow||!e.isSymbolicLink()||!e.realpathCached()?.isDirectory())&&!this.#n(e)?e:void 0}matchCheckSync(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||e.realpathSync(),!n)return;e=n}let o=e.isUnknown()||this.opts.stat?e.lstatSync():e;if(this.opts.follow&&this.opts.nodir&&o?.isSymbolicLink()){let a=o.realpathSync();a&&(a?.isUnknown()||this.opts.stat)&&a.lstatSync()}return this.matchCheckTest(o,r)}matchFinish(e,r){if(this.#n(e))return;if(!this.includeChildMatches&&this.#t?.add){let o=`${e.relativePosix()}/**`;this.#t.add(o)}let n=this.opts.absolute===void 0?r:this.opts.absolute;this.seen.add(e);let i=this.opts.mark&&e.isDirectory()?this.#o:"";if(this.opts.withFileTypes)this.matchEmit(e);else if(n){let o=this.opts.posix?e.fullpathPosix():e.fullpath();this.matchEmit(o+i)}else{let o=this.opts.posix?e.relativePosix():e.relative(),a=this.opts.dotRelative&&!o.startsWith(".."+this.#o)?"."+this.#o:"";this.matchEmit(o?a+o+i:"."+i)}}async match(e,r,n){let i=await this.matchCheck(e,n);i&&this.matchFinish(i,r)}matchSync(e,r,n){let i=this.matchCheckSync(e,n);i&&this.matchFinish(i,r)}walkCB(e,r,n){this.signal?.aborted&&n(),this.walkCB2(e,r,new Il(this.opts),n)}walkCB2(e,r,n,i){if(this.#s(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2(e,r,n,i));return}n.processPatterns(e,r);let o=1,a=()=>{--o===0&&i()};for(let[p,l,u]of n.matches.entries())this.#n(p)||(o++,this.match(p,l,u).then(()=>a()));for(let p of n.subwalkTargets()){if(this.maxDepth!==1/0&&p.depth()>=this.maxDepth)continue;o++;let l=p.readdirCached();p.calledReaddir()?this.walkCB3(p,l,n,a):p.readdirCB((u,d)=>this.walkCB3(p,d,n,a),!0)}a()}walkCB3(e,r,n,i){n=n.filterEntries(e,r);let o=1,a=()=>{--o===0&&i()};for(let[p,l,u]of n.matches.entries())this.#n(p)||(o++,this.match(p,l,u).then(()=>a()));for(let[p,l]of n.subwalks.entries())o++,this.walkCB2(p,l,n.child(),a);a()}walkCBSync(e,r,n){this.signal?.aborted&&n(),this.walkCB2Sync(e,r,new Il(this.opts),n)}walkCB2Sync(e,r,n,i){if(this.#s(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2Sync(e,r,n,i));return}n.processPatterns(e,r);let o=1,a=()=>{--o===0&&i()};for(let[p,l,u]of n.matches.entries())this.#n(p)||this.matchSync(p,l,u);for(let p of n.subwalkTargets()){if(this.maxDepth!==1/0&&p.depth()>=this.maxDepth)continue;o++;let l=p.readdirSync();this.walkCB3Sync(p,l,n,a)}a()}walkCB3Sync(e,r,n,i){n=n.filterEntries(e,r);let o=1,a=()=>{--o===0&&i()};for(let[p,l,u]of n.matches.entries())this.#n(p)||this.matchSync(p,l,u);for(let[p,l]of n.subwalks.entries())o++,this.walkCB2Sync(p,l,n.child(),a);a()}},Fl=class extends vy{matches=new Set;constructor(e,r,n){super(e,r,n)}matchEmit(e){this.matches.add(e)}async walk(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise((e,r)=>{this.walkCB(this.path,this.patterns,()=>{this.signal?.aborted?r(this.signal.reason):e(this.matches)})}),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>{if(this.signal?.aborted)throw this.signal.reason}),this.matches}},Cl=class extends vy{results;constructor(e,r,n){super(e,r,n),this.results=new Ao({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(e){this.results.write(e),this.results.flowing||this.pause()}stream(){let e=this.path;return e.isUnknown()?e.lstat().then(()=>{this.walkCB(e,this.patterns,()=>this.results.end())}):this.walkCB(e,this.patterns,()=>this.results.end()),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}};var GY=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",Vn=class{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;includeChildMatches;opts;patterns;constructor(e,r){if(!r)throw new TypeError("glob options required");if(this.withFileTypes=!!r.withFileTypes,this.signal=r.signal,this.follow=!!r.follow,this.dot=!!r.dot,this.dotRelative=!!r.dotRelative,this.nodir=!!r.nodir,this.mark=!!r.mark,r.cwd?(r.cwd instanceof URL||r.cwd.startsWith("file://"))&&(r.cwd=(0,R1.fileURLToPath)(r.cwd)):this.cwd="",this.cwd=r.cwd||"",this.root=r.root,this.magicalBraces=!!r.magicalBraces,this.nobrace=!!r.nobrace,this.noext=!!r.noext,this.realpath=!!r.realpath,this.absolute=r.absolute,this.includeChildMatches=r.includeChildMatches!==!1,this.noglobstar=!!r.noglobstar,this.matchBase=!!r.matchBase,this.maxDepth=typeof r.maxDepth=="number"?r.maxDepth:1/0,this.stat=!!r.stat,this.ignore=r.ignore,this.withFileTypes&&this.absolute!==void 0)throw new Error("cannot set absolute and withFileTypes:true");if(typeof e=="string"&&(e=[e]),this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(e=e.map(l=>l.replace(/\\/g,"/"))),this.matchBase){if(r.noglobstar)throw new TypeError("base matching requires globstar");e=e.map(l=>l.includes("/")?l:`./**/${l}`)}if(this.pattern=e,this.platform=r.platform||GY,this.opts={...r,platform:this.platform},r.scurry){if(this.scurry=r.scurry,r.nocase!==void 0&&r.nocase!==r.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{let l=r.platform==="win32"?yc:r.platform==="darwin"?Dl:r.platform?xc:E1;this.scurry=new l(this.cwd,{nocase:r.nocase,fs:r.fs})}this.nocase=this.scurry.nocase;let n=this.platform==="darwin"||this.platform==="win32",i={...r,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:n,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},o=this.pattern.map(l=>new zr(l,i)),[a,p]=o.reduce((l,u)=>(l[0].push(...u.set),l[1].push(...u.globParts),l),[[],[]]);this.patterns=a.map((l,u)=>{let d=p[u];if(!d)throw new Error("invalid pattern object");return new Tc(l,d,0,this.platform)})}async walk(){return[...await new Fl(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walk()]}walkSync(){return[...new Fl(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walkSync()]}stream(){return new Cl(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).stream()}streamSync(){return new Cl(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}};var Db=(t,e={})=>{Array.isArray(t)||(t=[t]);for(let r of t)if(new zr(r,e).hasMagic())return!0;return!1};function by(t,e={}){return new Vn(t,e).streamSync()}function P1(t,e={}){return new Vn(t,e).stream()}function M1(t,e={}){return new Vn(t,e).walkSync()}async function k1(t,e={}){return new Vn(t,e).walk()}function wy(t,e={}){return new Vn(t,e).iterateSync()}function A1(t,e={}){return new Vn(t,e).iterate()}var KY=by,QY=Object.assign(P1,{sync:by}),ZY=wy,YY=Object.assign(A1,{sync:wy}),XY=Object.assign(M1,{stream:by,iterate:wy}),Ib=Object.assign(k1,{glob:k1,globSync:M1,sync:XY,globStream:P1,stream:QY,globStreamSync:by,streamSync:KY,globIterate:A1,iterate:YY,globIterateSync:wy,iterateSync:ZY,Glob:Vn,hasMagic:Db,escape:uc,unescape:Ln});Ib.glob=Ib;function D1(){let t=process.env.CURSORLESS_MODE;switch(t){case void 0:case"production":return"production";case"development":return"development";case"test":return"test";default:throw new Error(`Unexpected value for environment variable CURSORLESS_MODE: ${t}`)}}var B1=Object.defineProperty,tX=Object.getOwnPropertyNames,C=(t,e)=>B1(t,"name",{value:e,configurable:!0}),rX=(t,e)=>function(){return e||(0,t[tX(t)[0]])((e={exports:{}}).exports,e),e.exports},Qb=(t,e)=>{for(var r in e)B1(t,r,{get:e[r],enumerable:!0})},nX=rX({"(disabled):util"(){}}),_y={};Qb(_y,{addChainableMethod:()=>aw,addLengthGuard:()=>Hl,addMethod:()=>iw,addProperty:()=>nw,checkError:()=>Kr,compareByInspect:()=>Py,eql:()=>mC,expectTypes:()=>Q1,flag:()=>_e,getActual:()=>Fy,getMessage:()=>Xb,getName:()=>Oy,getOperator:()=>uw,getOwnEnumerableProperties:()=>lw,getOwnEnumerablePropertySymbols:()=>pw,getPathInfo:()=>rw,hasProperty:()=>Cy,inspect:()=>Ue,isNaN:()=>My,isProxyEnabled:()=>Ul,isRegExp:()=>Ay,objDisplay:()=>Ms,overwriteChainableMethod:()=>cw,overwriteMethod:()=>sw,overwriteProperty:()=>ow,proxify:()=>_c,test:()=>Zb,transferFlags:()=>Bn,type:()=>Ze});var Kr={};Qb(Kr,{compatibleConstructor:()=>j1,compatibleInstance:()=>$1,compatibleMessage:()=>q1,getConstructorName:()=>z1,getMessage:()=>G1});function Iy(t){return t instanceof Error||Object.prototype.toString.call(t)==="[object Error]"}C(Iy,"isErrorInstance");function W1(t){return Object.prototype.toString.call(t)==="[object RegExp]"}C(W1,"isRegExp");function $1(t,e){return Iy(e)&&t===e}C($1,"compatibleInstance");function j1(t,e){return Iy(e)?t.constructor===e.constructor||t instanceof e.constructor:(typeof e=="object"||typeof e=="function")&&e.prototype?t.constructor===e||t instanceof e:!1}C(j1,"compatibleConstructor");function q1(t,e){let r=typeof t=="string"?t:t.message;return W1(e)?e.test(r):typeof e=="string"?r.indexOf(e)!==-1:!1}C(q1,"compatibleMessage");function z1(t){let e=t;return Iy(t)?e=t.constructor.name:typeof t=="function"&&(e=t.name,e===""&&(e=new t().name||e)),e}C(z1,"getConstructorName");function G1(t){let e="";return t&&t.message?e=t.message:typeof t=="string"&&(e=t),e}C(G1,"getMessage");function _e(t,e,r){var n=t.__flags||(t.__flags=Object.create(null));if(arguments.length===3)n[e]=r;else return n[e]}C(_e,"flag");function Zb(t,e){var r=_e(t,"negate"),n=e[0];return r?!n:n}C(Zb,"test");function Ze(t){if(typeof t>"u")return"undefined";if(t===null)return"null";let e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}C(Ze,"type");var iX="captureStackTrace"in Error,ze=class K1 extends Error{static{C(this,"AssertionError")}message;get name(){return"AssertionError"}get ok(){return!1}constructor(e="Unspecified AssertionError",r,n){super(e),this.message=e,iX&&Error.captureStackTrace(this,n||K1);for(let i in r)i in this||(this[i]=r[i])}toJSON(e){return{...this,name:this.name,message:this.message,ok:!1,stack:e!==!1?this.stack:void 0}}};function Q1(t,e){var r=_e(t,"message"),n=_e(t,"ssfi");r=r?r+": ":"",t=_e(t,"object"),e=e.map(function(a){return a.toLowerCase()}),e.sort();var i=e.map(function(a,p){var l=~["a","e","i","o","u"].indexOf(a.charAt(0))?"an":"a",u=e.length>1&&p===e.length-1?"or ":"";return u+l+" "+a}).join(", "),o=Ze(t).toLowerCase();if(!e.some(function(a){return o===a}))throw new ze(r+"object tested must be "+i+", but "+o+" given",void 0,n)}C(Q1,"expectTypes");function Fy(t,e){return e.length>4?e[4]:t._obj}C(Fy,"getActual");var I1={bold:["1","22"],dim:["2","22"],italic:["3","23"],underline:["4","24"],inverse:["7","27"],hidden:["8","28"],strike:["9","29"],black:["30","39"],red:["31","39"],green:["32","39"],yellow:["33","39"],blue:["34","39"],magenta:["35","39"],cyan:["36","39"],white:["37","39"],brightblack:["30;1","39"],brightred:["31;1","39"],brightgreen:["32;1","39"],brightyellow:["33;1","39"],brightblue:["34;1","39"],brightmagenta:["35;1","39"],brightcyan:["36;1","39"],brightwhite:["37;1","39"],grey:["90","39"]},oX={special:"cyan",number:"yellow",bigint:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",symbol:"green",date:"magenta",regexp:"red"},bc="\u2026";function Z1(t,e){let r=I1[oX[e]]||I1[e]||"";return r?`\x1B[${r[0]}m${String(t)}\x1B[${r[1]}m`:String(t)}C(Z1,"colorise");function Y1({showHidden:t=!1,depth:e=2,colors:r=!1,customInspect:n=!0,showProxy:i=!1,maxArrayLength:o=1/0,breakLength:a=1/0,seen:p=[],truncate:l=1/0,stylize:u=String}={},d){let m={showHidden:!!t,depth:Number(e),colors:!!r,customInspect:!!n,showProxy:!!i,maxArrayLength:Number(o),breakLength:Number(a),truncate:Number(l),seen:p,inspect:d,stylize:u};return m.colors&&(m.stylize=Z1),m}C(Y1,"normaliseOptions");function Hi(t,e,r=bc){t=String(t);let n=r.length,i=t.length;return n>e&&i>n?r:i>e&&i>n?`${t.slice(0,e-n)}${r}`:t}C(Hi,"truncate");function Sn(t,e,r,n=", "){r=r||e.inspect;let i=t.length;if(i===0)return"";let o=e.truncate,a="",p="",l="";for(let u=0;u<i;u+=1){let d=u+1===t.length,m=u+2===t.length;l=`${bc}(${t.length-u})`;let g=t[u];e.truncate=o-a.length-(d?0:n.length);let x=p||r(g,e)+(d?"":n),b=a.length+x.length,v=b+l.length;if(d&&b>o&&a.length+l.length<=o||!d&&!m&&v>o||(p=d?"":r(t[u+1],e)+(m?"":n),!d&&m&&v>o&&b+p.length>o))break;if(a+=x,!d&&!m&&b+p.length>=o){l=`${bc}(${t.length-u-1})`;break}l=""}return`${a}${l}`}C(Sn,"inspectList");function X1(t){return t.match(/^[a-zA-Z_][a-zA-Z_0-9]*$/)?t:JSON.stringify(t).replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'")}C(X1,"quoteComplexKey");function wc([t,e],r){return r.truncate-=2,typeof t=="string"?t=X1(t):typeof t!="number"&&(t=`[${r.inspect(t,r)}]`),r.truncate-=t.length,e=r.inspect(e,r),`${t}: ${e}`}C(wc,"inspectProperty");function J1(t,e){let r=Object.keys(t).slice(t.length);if(!t.length&&!r.length)return"[]";e.truncate-=4;let n=Sn(t,e);e.truncate-=n.length;let i="";return r.length&&(i=Sn(r.map(o=>[o,t[o]]),e,wc)),`[ ${n}${i?`, ${i}`:""} ]`}C(J1,"inspectArray");var sX=C(t=>typeof Buffer=="function"&&t instanceof Buffer?"Buffer":t[Symbol.toStringTag]?t[Symbol.toStringTag]:t.constructor.name,"getArrayName");function li(t,e){let r=sX(t);e.truncate-=r.length+4;let n=Object.keys(t).slice(t.length);if(!t.length&&!n.length)return`${r}[]`;let i="";for(let a=0;a<t.length;a++){let p=`${e.stylize(Hi(t[a],e.truncate),"number")}${a===t.length-1?"":", "}`;if(e.truncate-=p.length,t[a]!==t.length&&e.truncate<=3){i+=`${bc}(${t.length-t[a]+1})`;break}i+=p}let o="";return n.length&&(o=Sn(n.map(a=>[a,t[a]]),e,wc)),`${r}[ ${i}${o?`, ${o}`:""} ]`}C(li,"inspectTypedArray");function eC(t,e){let r=t.toJSON();if(r===null)return"Invalid Date";let n=r.split("T"),i=n[0];return e.stylize(`${i}T${Hi(n[1],e.truncate-i.length-1)}`,"date")}C(eC,"inspectDate");function Ob(t,e){let r=t[Symbol.toStringTag]||"Function",n=t.name;return n?e.stylize(`[${r} ${Hi(n,e.truncate-11)}]`,"special"):e.stylize(`[${r}]`,"special")}C(Ob,"inspectFunction");function tC([t,e],r){return r.truncate-=4,t=r.inspect(t,r),r.truncate-=t.length,e=r.inspect(e,r),`${t} => ${e}`}C(tC,"inspectMapEntry");function rC(t){let e=[];return t.forEach((r,n)=>{e.push([n,r])}),e}C(rC,"mapToEntries");function nC(t,e){return t.size-1<=0?"Map{}":(e.truncate-=7,`Map{ ${Sn(rC(t),e,tC)} }`)}C(nC,"inspectMap");var aX=Number.isNaN||(t=>t!==t);function Nb(t,e){return aX(t)?e.stylize("NaN","number"):t===1/0?e.stylize("Infinity","number"):t===-1/0?e.stylize("-Infinity","number"):t===0?e.stylize(1/t===1/0?"+0":"-0","number"):e.stylize(Hi(String(t),e.truncate),"number")}C(Nb,"inspectNumber");function Lb(t,e){let r=Hi(t.toString(),e.truncate-1);return r!==bc&&(r+="n"),e.stylize(r,"bigint")}C(Lb,"inspectBigInt");function iC(t,e){let r=t.toString().split("/")[2],n=e.truncate-(2+r.length),i=t.source;return e.stylize(`/${Hi(i,n)}/${r}`,"regexp")}C(iC,"inspectRegExp");function oC(t){let e=[];return t.forEach(r=>{e.push(r)}),e}C(oC,"arrayFromSet");function sC(t,e){return t.size===0?"Set{}":(e.truncate-=7,`Set{ ${Sn(oC(t),e)} }`)}C(sC,"inspectSet");var F1=new RegExp("['\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]","g"),cX={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"},pX=16,lX=4;function aC(t){return cX[t]||`\\u${`0000${t.charCodeAt(0).toString(pX)}`.slice(-lX)}`}C(aC,"escape");function Ub(t,e){return F1.test(t)&&(t=t.replace(F1,aC)),e.stylize(`'${Hi(t,e.truncate-2)}'`,"string")}C(Ub,"inspectString");function Hb(t){return"description"in Symbol.prototype?t.description?`Symbol(${t.description})`:"Symbol()":t.toString()}C(Hb,"inspectSymbol");var cC=C(()=>"Promise{\u2026}","getPromiseValue");try{let{getPromiseDetails:t,kPending:e,kRejected:r}=process.binding("util");Array.isArray(t(Promise.resolve()))&&(cC=C((n,i)=>{let[o,a]=t(n);return o===e?"Promise{<pending>}":`Promise${o===r?"!":""}{${i.inspect(a,i)}}`},"getPromiseValue"))}catch{}var uX=cC;function Nl(t,e){let r=Object.getOwnPropertyNames(t),n=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[];if(r.length===0&&n.length===0)return"{}";if(e.truncate-=4,e.seen=e.seen||[],e.seen.indexOf(t)>=0)return"[Circular]";e.seen.push(t);let i=Sn(r.map(p=>[p,t[p]]),e,wc),o=Sn(n.map(p=>[p,t[p]]),e,wc);e.seen.pop();let a="";return i&&o&&(a=", "),`{ ${i}${a}${o} }`}C(Nl,"inspectObject");var Fb=typeof Symbol<"u"&&Symbol.toStringTag?Symbol.toStringTag:!1;function pC(t,e){let r="";return Fb&&Fb in t&&(r=t[Fb]),r=r||t.constructor.name,(!r||r==="_class")&&(r="<Anonymous Class>"),e.truncate-=r.length,`${r}${Nl(t,e)}`}C(pC,"inspectClass");function lC(t,e){return t.length===0?"Arguments[]":(e.truncate-=13,`Arguments[ ${Sn(t,e)} ]`)}C(lC,"inspectArguments");var fX=["stack","line","column","name","message","fileName","lineNumber","columnNumber","number","description"];function uC(t,e){let r=Object.getOwnPropertyNames(t).filter(a=>fX.indexOf(a)===-1),n=t.name;e.truncate-=n.length;let i="";typeof t.message=="string"?i=Hi(t.message,e.truncate):r.unshift("message"),i=i?`: ${i}`:"",e.truncate-=i.length+5;let o=Sn(r.map(a=>[a,t[a]]),e,wc);return`${n}${i}${o?` { ${o} }`:""}`}C(uC,"inspectObject");function fC([t,e],r){return r.truncate-=3,e?`${r.stylize(String(t),"yellow")}=${r.stylize(`"${e}"`,"string")}`:`${r.stylize(String(t),"yellow")}`}C(fC,"inspectAttribute");function Ey(t,e){return Sn(t,e,Yb,`
`)}C(Ey,"inspectHTMLCollection");function Yb(t,e){let r=t.getAttributeNames(),n=t.tagName.toLowerCase(),i=e.stylize(`<${n}`,"special"),o=e.stylize(">","special"),a=e.stylize(`</${n}>`,"special");e.truncate-=n.length*2+5;let p="";r.length>0&&(p+=" ",p+=Sn(r.map(d=>[d,t.getAttribute(d)]),e,fC," ")),e.truncate-=p.length;let l=e.truncate,u=Ey(t.children,e);return u&&u.length>l&&(u=`${bc}(${t.children.length})`),`${i}${p}${o}${u}${a}`}C(Yb,"inspectHTML");var dX=typeof Symbol=="function"&&typeof Symbol.for=="function",Cb=dX?Symbol.for("chai/inspect"):"@@chai/inspect",vc=!1;try{let t=nX();vc=t.inspect?t.inspect.custom:!1}catch{vc=!1}var C1=new WeakMap,O1={},N1={undefined:(t,e)=>e.stylize("undefined","undefined"),null:(t,e)=>e.stylize("null","null"),boolean:(t,e)=>e.stylize(String(t),"boolean"),Boolean:(t,e)=>e.stylize(String(t),"boolean"),number:Nb,Number:Nb,bigint:Lb,BigInt:Lb,string:Ub,String:Ub,function:Ob,Function:Ob,symbol:Hb,Symbol:Hb,Array:J1,Date:eC,Map:nC,Set:sC,RegExp:iC,Promise:uX,WeakSet:(t,e)=>e.stylize("WeakSet{\u2026}","special"),WeakMap:(t,e)=>e.stylize("WeakMap{\u2026}","special"),Arguments:lC,Int8Array:li,Uint8Array:li,Uint8ClampedArray:li,Int16Array:li,Uint16Array:li,Int32Array:li,Uint32Array:li,Float32Array:li,Float64Array:li,Generator:()=>"",DataView:()=>"",ArrayBuffer:()=>"",Error:uC,HTMLCollection:Ey,NodeList:Ey},mX=C((t,e,r)=>Cb in t&&typeof t[Cb]=="function"?t[Cb](e):vc&&vc in t&&typeof t[vc]=="function"?t[vc](e.depth,e):"inspect"in t&&typeof t.inspect=="function"?t.inspect(e.depth,e):"constructor"in t&&C1.has(t.constructor)?C1.get(t.constructor)(t,e):O1[r]?O1[r](t,e):"","inspectCustom"),hX=Object.prototype.toString;function Ry(t,e={}){let r=Y1(e,Ry),{customInspect:n}=r,i=t===null?"null":typeof t;if(i==="object"&&(i=hX.call(t).slice(8,-1)),i in N1)return N1[i](t,r);if(n&&t){let a=mX(t,r,i);if(a)return typeof a=="string"?a:Ry(a,r)}let o=t?Object.getPrototypeOf(t):!1;return o===Object.prototype||o===null?Nl(t,r):t&&typeof HTMLElement=="function"&&t instanceof HTMLElement?Yb(t,r):"constructor"in t?t.constructor!==Object?pC(t,r):Nl(t,r):t===Object(t)?Nl(t,r):r.stylize(String(t),i)}C(Ry,"inspect");var Pr={includeStack:!1,showDiff:!0,truncateThreshold:40,useProxy:!0,proxyExcludedKeys:["then","catch","inspect","toJSON"],deepEqual:null};function Ue(t,e,r,n){var i={colors:n,depth:typeof r>"u"?2:r,showHidden:e,truncate:Pr.truncateThreshold?Pr.truncateThreshold:1/0};return Ry(t,i)}C(Ue,"inspect");function Ms(t){var e=Ue(t),r=Object.prototype.toString.call(t);if(Pr.truncateThreshold&&e.length>=Pr.truncateThreshold){if(r==="[object Function]")return!t.name||t.name===""?"[Function]":"[Function: "+t.name+"]";if(r==="[object Array]")return"[ Array("+t.length+") ]";if(r==="[object Object]"){var n=Object.keys(t),i=n.length>2?n.splice(0,2).join(", ")+", ...":n.join(", ");return"{ Object ("+i+") }"}else return e}else return e}C(Ms,"objDisplay");function Xb(t,e){var r=_e(t,"negate"),n=_e(t,"object"),i=e[3],o=Fy(t,e),a=r?e[2]:e[1],p=_e(t,"message");return typeof a=="function"&&(a=a()),a=a||"",a=a.replace(/#\{this\}/g,function(){return Ms(n)}).replace(/#\{act\}/g,function(){return Ms(o)}).replace(/#\{exp\}/g,function(){return Ms(i)}),p?p+": "+a:a}C(Xb,"getMessage");function Bn(t,e,r){var n=t.__flags||(t.__flags=Object.create(null));e.__flags||(e.__flags=Object.create(null)),r=arguments.length===3?r:!0;for(var i in n)(r||i!=="object"&&i!=="ssfi"&&i!=="lockSsfi"&&i!="message")&&(e.__flags[i]=n[i])}C(Bn,"transferFlags");function Vb(t){if(typeof t>"u")return"undefined";if(t===null)return"null";let e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}C(Vb,"type");function Jb(){this._key="chai/deep-eql__"+Math.random()+Date.now()}C(Jb,"FakeMap");Jb.prototype={get:C(function(e){return e[this._key]},"get"),set:C(function(e,r){Object.isExtensible(e)&&Object.defineProperty(e,this._key,{value:r,configurable:!0})},"set")};var dC=typeof WeakMap=="function"?WeakMap:Jb;function Bb(t,e,r){if(!r||As(t)||As(e))return null;var n=r.get(t);if(n){var i=n.get(e);if(typeof i=="boolean")return i}return null}C(Bb,"memoizeCompare");function Ol(t,e,r,n){if(!(!r||As(t)||As(e))){var i=r.get(t);i?i.set(e,n):(i=new dC,i.set(e,n),r.set(t,i))}}C(Ol,"memoizeSet");var mC=Ll;function Ll(t,e,r){if(r&&r.comparator)return Wb(t,e,r);var n=ew(t,e);return n!==null?n:Wb(t,e,r)}C(Ll,"deepEqual");function ew(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e?!0:As(t)||As(e)?!1:null}C(ew,"simpleEqual");function Wb(t,e,r){r=r||{},r.memoize=r.memoize===!1?!1:r.memoize||new dC;var n=r&&r.comparator,i=Bb(t,e,r.memoize);if(i!==null)return i;var o=Bb(e,t,r.memoize);if(o!==null)return o;if(n){var a=n(t,e);if(a===!1||a===!0)return Ol(t,e,r.memoize,a),a;var p=ew(t,e);if(p!==null)return p}var l=Vb(t);if(l!==Vb(e))return Ol(t,e,r.memoize,!1),!1;Ol(t,e,r.memoize,!0);var u=hC(t,e,l,r);return Ol(t,e,r.memoize,u),u}C(Wb,"extensiveDeepEqual");function hC(t,e,r,n){switch(r){case"String":case"Number":case"Boolean":case"Date":return Ll(t.valueOf(),e.valueOf());case"Promise":case"Symbol":case"function":case"WeakMap":case"WeakSet":return t===e;case"Error":return tw(t,e,["name","message","code"],n);case"Arguments":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"Array":return Io(t,e,n);case"RegExp":return gC(t,e);case"Generator":return yC(t,e,n);case"DataView":return Io(new Uint8Array(t.buffer),new Uint8Array(e.buffer),n);case"ArrayBuffer":return Io(new Uint8Array(t),new Uint8Array(e),n);case"Set":return $b(t,e,n);case"Map":return $b(t,e,n);case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.Instant":case"Temporal.ZonedDateTime":case"Temporal.PlainYearMonth":case"Temporal.PlainMonthDay":return t.equals(e);case"Temporal.Duration":return t.total("nanoseconds")===e.total("nanoseconds");case"Temporal.TimeZone":case"Temporal.Calendar":return t.toString()===e.toString();default:return TC(t,e,n)}}C(hC,"extensiveDeepEqualByType");function gC(t,e){return t.toString()===e.toString()}C(gC,"regexpEqual");function $b(t,e,r){if(t.size!==e.size)return!1;if(t.size===0)return!0;var n=[],i=[];return t.forEach(C(function(a,p){n.push([a,p])},"gatherEntries")),e.forEach(C(function(a,p){i.push([a,p])},"gatherEntries")),Io(n.sort(),i.sort(),r)}C($b,"entriesEqual");function Io(t,e,r){var n=t.length;if(n!==e.length)return!1;if(n===0)return!0;for(var i=-1;++i<n;)if(Ll(t[i],e[i],r)===!1)return!1;return!0}C(Io,"iterableEqual");function yC(t,e,r){return Io(ky(t),ky(e),r)}C(yC,"generatorEqual");function xC(t){return typeof Symbol<"u"&&typeof t=="object"&&typeof Symbol.iterator<"u"&&typeof t[Symbol.iterator]=="function"}C(xC,"hasIteratorFunction");function jb(t){if(xC(t))try{return ky(t[Symbol.iterator]())}catch{return[]}return[]}C(jb,"getIteratorEntries");function ky(t){for(var e=t.next(),r=[e.value];e.done===!1;)e=t.next(),r.push(e.value);return r}C(ky,"getGeneratorEntries");function qb(t){var e=[];for(var r in t)e.push(r);return e}C(qb,"getEnumerableKeys");function zb(t){for(var e=[],r=Object.getOwnPropertySymbols(t),n=0;n<r.length;n+=1){var i=r[n];Object.getOwnPropertyDescriptor(t,i).enumerable&&e.push(i)}return e}C(zb,"getEnumerableSymbols");function tw(t,e,r,n){var i=r.length;if(i===0)return!0;for(var o=0;o<i;o+=1)if(Ll(t[r[o]],e[r[o]],n)===!1)return!1;return!0}C(tw,"keysEqual");function TC(t,e,r){var n=qb(t),i=qb(e),o=zb(t),a=zb(e);if(n=n.concat(o),i=i.concat(a),n.length&&n.length===i.length)return Io(Gb(n).sort(),Gb(i).sort())===!1?!1:tw(t,e,n,r);var p=jb(t),l=jb(e);return p.length&&p.length===l.length?(p.sort(),l.sort(),Io(p,l,r)):n.length===0&&p.length===0&&i.length===0&&l.length===0}C(TC,"objectEqual");function As(t){return t===null||typeof t!="object"}C(As,"isPrimitive");function Gb(t){return t.map(C(function(r){return typeof r=="symbol"?r.toString():r},"mapSymbol"))}C(Gb,"mapSymbols");function Cy(t,e){return typeof t>"u"||t===null?!1:e in Object(t)}C(Cy,"hasProperty");function SC(t){return t.replace(/([^\\])\[/g,"$1.[").match(/(\\\.|[^.]+?)+/g).map(n=>{if(n==="constructor"||n==="__proto__"||n==="prototype")return{};let o=/^\[(\d+)\]$/.exec(n),a=null;return o?a={i:parseFloat(o[1])}:a={p:n.replace(/\\([.[\]])/g,"$1")},a})}C(SC,"parsePath");function Kb(t,e,r){let n=t,i=null;r=typeof r>"u"?e.length:r;for(let o=0;o<r;o++){let a=e[o];n&&(typeof a.p>"u"?n=n[a.i]:n=n[a.p],o===r-1&&(i=n))}return i}C(Kb,"internalGetPathValue");function rw(t,e){let r=SC(e),n=r[r.length-1],i={parent:r.length>1?Kb(t,r,r.length-1):t,name:n.p||n.i,value:Kb(t,r)};return i.exists=Cy(i.parent,i.name),i}C(rw,"getPathInfo");function _(t,e,r,n){return _e(this,"ssfi",r||_),_e(this,"lockSsfi",n),_e(this,"object",t),_e(this,"message",e),_e(this,"eql",Pr.deepEqual||mC),_c(this)}C(_,"Assertion");Object.defineProperty(_,"includeStack",{get:function(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),Pr.includeStack},set:function(t){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),Pr.includeStack=t}});Object.defineProperty(_,"showDiff",{get:function(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),Pr.showDiff},set:function(t){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),Pr.showDiff=t}});_.addProperty=function(t,e){nw(this.prototype,t,e)};_.addMethod=function(t,e){iw(this.prototype,t,e)};_.addChainableMethod=function(t,e,r){aw(this.prototype,t,e,r)};_.overwriteProperty=function(t,e){ow(this.prototype,t,e)};_.overwriteMethod=function(t,e){sw(this.prototype,t,e)};_.overwriteChainableMethod=function(t,e,r){cw(this.prototype,t,e,r)};_.prototype.assert=function(t,e,r,n,i,o){var a=Zb(this,arguments);if(o!==!1&&(o=!0),n===void 0&&i===void 0&&(o=!1),Pr.showDiff!==!0&&(o=!1),!a){e=Xb(this,arguments);var p=Fy(this,arguments),l={actual:p,expected:n,showDiff:o},u=uw(this,arguments);throw u&&(l.operator=u),new ze(e,l,Pr.includeStack?this.assert:_e(this,"ssfi"))}};Object.defineProperty(_.prototype,"_obj",{get:function(){return _e(this,"object")},set:function(t){_e(this,"object",t)}});function Ul(){return Pr.useProxy&&typeof Proxy<"u"&&typeof Reflect<"u"}C(Ul,"isProxyEnabled");function nw(t,e,r){r=r===void 0?function(){}:r,Object.defineProperty(t,e,{get:C(function n(){!Ul()&&!_e(this,"lockSsfi")&&_e(this,"ssfi",n);var i=r.call(this);if(i!==void 0)return i;var o=new _;return Bn(this,o),o},"propertyGetter"),configurable:!0})}C(nw,"addProperty");var gX=Object.getOwnPropertyDescriptor(function(){},"length");function Hl(t,e,r){return gX.configurable&&Object.defineProperty(t,"length",{get:function(){throw Error(r?"Invalid Chai property: "+e+'.length. Due to a compatibility issue, "length" cannot directly follow "'+e+'". Use "'+e+'.lengthOf" instead.':"Invalid Chai property: "+e+'.length. See docs for proper usage of "'+e+'".')}}),t}C(Hl,"addLengthGuard");function vC(t){var e=Object.getOwnPropertyNames(t);function r(i){e.indexOf(i)===-1&&e.push(i)}C(r,"addProperty");for(var n=Object.getPrototypeOf(t);n!==null;)Object.getOwnPropertyNames(n).forEach(r),n=Object.getPrototypeOf(n);return e}C(vC,"getProperties");var L1=["__flags","__methods","_obj","assert"];function _c(t,e){return Ul()?new Proxy(t,{get:C(function r(n,i){if(typeof i=="string"&&Pr.proxyExcludedKeys.indexOf(i)===-1&&!Reflect.has(n,i)){if(e)throw Error("Invalid Chai property: "+e+"."+i+'. See docs for proper usage of "'+e+'".');var o=null,a=4;throw vC(n).forEach(function(p){if(!Object.prototype.hasOwnProperty(p)&&L1.indexOf(p)===-1){var l=bC(i,p,a);l<a&&(o=p,a=l)}}),Error(o!==null?"Invalid Chai property: "+i+'. Did you mean "'+o+'"?':"Invalid Chai property: "+i)}return L1.indexOf(i)===-1&&!_e(n,"lockSsfi")&&_e(n,"ssfi",r),Reflect.get(n,i)},"proxyGetter")}):t}C(_c,"proxify");function bC(t,e,r){if(Math.abs(t.length-e.length)>=r)return r;for(var n=[],i=0;i<=t.length;i++)n[i]=Array(e.length+1).fill(0),n[i][0]=i;for(var o=0;o<e.length;o++)n[0][o]=o;for(var i=1;i<=t.length;i++)for(var a=t.charCodeAt(i-1),o=1;o<=e.length;o++){if(Math.abs(i-o)>=r){n[i][o]=r;continue}n[i][o]=Math.min(n[i-1][o]+1,n[i][o-1]+1,n[i-1][o-1]+(a===e.charCodeAt(o-1)?0:1))}return n[t.length][e.length]}C(bC,"stringDistanceCapped");function iw(t,e,r){var n=C(function(){_e(this,"lockSsfi")||_e(this,"ssfi",n);var i=r.apply(this,arguments);if(i!==void 0)return i;var o=new _;return Bn(this,o),o},"methodWrapper");Hl(n,e,!1),t[e]=_c(n,e)}C(iw,"addMethod");function ow(t,e,r){var n=Object.getOwnPropertyDescriptor(t,e),i=C(function(){},"_super");n&&typeof n.get=="function"&&(i=n.get),Object.defineProperty(t,e,{get:C(function o(){!Ul()&&!_e(this,"lockSsfi")&&_e(this,"ssfi",o);var a=_e(this,"lockSsfi");_e(this,"lockSsfi",!0);var p=r(i).call(this);if(_e(this,"lockSsfi",a),p!==void 0)return p;var l=new _;return Bn(this,l),l},"overwritingPropertyGetter"),configurable:!0})}C(ow,"overwriteProperty");function sw(t,e,r){var n=t[e],i=C(function(){throw new Error(e+" is not a function")},"_super");n&&typeof n=="function"&&(i=n);var o=C(function(){_e(this,"lockSsfi")||_e(this,"ssfi",o);var a=_e(this,"lockSsfi");_e(this,"lockSsfi",!0);var p=r(i).apply(this,arguments);if(_e(this,"lockSsfi",a),p!==void 0)return p;var l=new _;return Bn(this,l),l},"overwritingMethodWrapper");Hl(o,e,!1),t[e]=_c(o,e)}C(sw,"overwriteMethod");var yX=typeof Object.setPrototypeOf=="function",U1=C(function(){},"testFn"),xX=Object.getOwnPropertyNames(U1).filter(function(t){var e=Object.getOwnPropertyDescriptor(U1,t);return typeof e!="object"?!0:!e.configurable}),TX=Function.prototype.call,SX=Function.prototype.apply;function aw(t,e,r,n){typeof n!="function"&&(n=C(function(){},"chainingBehavior"));var i={method:r,chainingBehavior:n};t.__methods||(t.__methods={}),t.__methods[e]=i,Object.defineProperty(t,e,{get:C(function(){i.chainingBehavior.call(this);var a=C(function(){_e(this,"lockSsfi")||_e(this,"ssfi",a);var u=i.method.apply(this,arguments);if(u!==void 0)return u;var d=new _;return Bn(this,d),d},"chainableMethodWrapper");if(Hl(a,e,!0),yX){var p=Object.create(this);p.call=TX,p.apply=SX,Object.setPrototypeOf(a,p)}else{var l=Object.getOwnPropertyNames(t);l.forEach(function(u){if(xX.indexOf(u)===-1){var d=Object.getOwnPropertyDescriptor(t,u);Object.defineProperty(a,u,d)}})}return Bn(this,a),_c(a)},"chainableMethodGetter"),configurable:!0})}C(aw,"addChainableMethod");function cw(t,e,r,n){var i=t.__methods[e],o=i.chainingBehavior;i.chainingBehavior=C(function(){var l=n(o).call(this);if(l!==void 0)return l;var u=new _;return Bn(this,u),u},"overwritingChainableMethodGetter");var a=i.method;i.method=C(function(){var l=r(a).apply(this,arguments);if(l!==void 0)return l;var u=new _;return Bn(this,u),u},"overwritingChainableMethodWrapper")}C(cw,"overwriteChainableMethod");function Py(t,e){return Ue(t)<Ue(e)?-1:1}C(Py,"compareByInspect");function pw(t){return typeof Object.getOwnPropertySymbols!="function"?[]:Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})}C(pw,"getOwnEnumerablePropertySymbols");function lw(t){return Object.keys(t).concat(pw(t))}C(lw,"getOwnEnumerableProperties");function wC(t){return t!==t}C(wC,"_isNaN");var My=Number.isNaN||wC;function _C(t){var e=Ze(t),r=["Array","Object","Function"];return r.indexOf(e)!==-1}C(_C,"isObjectType");function uw(t,e){var r=_e(t,"operator"),n=_e(t,"negate"),i=e[3],o=n?e[2]:e[1];if(r)return r;if(typeof o=="function"&&(o=o()),o=o||"",!!o&&!/\shave\s/.test(o)){var a=_C(i);return/\snot\s/.test(o)?a?"notDeepStrictEqual":"notStrictEqual":a?"deepStrictEqual":"strictEqual"}}C(uw,"getOperator");function Oy(t){return t.name}C(Oy,"getName");function Ay(t){return Object.prototype.toString.call(t)==="[object RegExp]"}C(Ay,"isRegExp");var{flag:M}=_y;["to","be","been","is","and","has","have","with","that","which","at","of","same","but","does","still","also"].forEach(function(t){_.addProperty(t)});_.addProperty("not",function(){M(this,"negate",!0)});_.addProperty("deep",function(){M(this,"deep",!0)});_.addProperty("nested",function(){M(this,"nested",!0)});_.addProperty("own",function(){M(this,"own",!0)});_.addProperty("ordered",function(){M(this,"ordered",!0)});_.addProperty("any",function(){M(this,"any",!0),M(this,"all",!1)});_.addProperty("all",function(){M(this,"all",!0),M(this,"any",!1)});var H1={function:["function","asyncfunction","generatorfunction","asyncgeneratorfunction"],asyncfunction:["asyncfunction","asyncgeneratorfunction"],generatorfunction:["generatorfunction","asyncgeneratorfunction"],asyncgeneratorfunction:["asyncgeneratorfunction"]};function fw(t,e){e&&M(this,"message",e),t=t.toLowerCase();var r=M(this,"object"),n=~["a","e","i","o","u"].indexOf(t.charAt(0))?"an ":"a ";let i=Ze(r).toLowerCase();H1.function.includes(t)?this.assert(H1[t].includes(i),"expected #{this} to be "+n+t,"expected #{this} not to be "+n+t):this.assert(t===i,"expected #{this} to be "+n+t,"expected #{this} not to be "+n+t)}C(fw,"an");_.addChainableMethod("an",fw);_.addChainableMethod("a",fw);function EC(t,e){return My(t)&&My(e)||t===e}C(EC,"SameValueZero");function Vl(){M(this,"contains",!0)}C(Vl,"includeChainingBehavior");function Bl(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=Ze(r).toLowerCase(),i=M(this,"message"),o=M(this,"negate"),a=M(this,"ssfi"),p=M(this,"deep"),l=p?"deep ":"",u=p?M(this,"eql"):EC;i=i?i+": ":"";var d=!1;switch(n){case"string":d=r.indexOf(t)!==-1;break;case"weakset":if(p)throw new ze(i+"unable to use .deep.include with WeakSet",void 0,a);d=r.has(t);break;case"map":r.forEach(function(b){d=d||u(b,t)});break;case"set":p?r.forEach(function(b){d=d||u(b,t)}):d=r.has(t);break;case"array":p?d=r.some(function(b){return u(b,t)}):d=r.indexOf(t)!==-1;break;default:if(t!==Object(t))throw new ze(i+"the given combination of arguments ("+n+" and "+Ze(t).toLowerCase()+") is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a "+Ze(t).toLowerCase(),void 0,a);var m=Object.keys(t),g=null,x=0;if(m.forEach(function(b){var v=new _(r);if(Bn(this,v,!0),M(v,"lockSsfi",!0),!o||m.length===1){v.property(b,t[b]);return}try{v.property(b,t[b])}catch(F){if(!Kr.compatibleConstructor(F,ze))throw F;g===null&&(g=F),x++}},this),o&&m.length>1&&x===m.length)throw g;return}this.assert(d,"expected #{this} to "+l+"include "+Ue(t),"expected #{this} to not "+l+"include "+Ue(t))}C(Bl,"include");_.addChainableMethod("include",Bl,Vl);_.addChainableMethod("contain",Bl,Vl);_.addChainableMethod("contains",Bl,Vl);_.addChainableMethod("includes",Bl,Vl);_.addProperty("ok",function(){this.assert(M(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")});_.addProperty("true",function(){this.assert(M(this,"object")===!0,"expected #{this} to be true","expected #{this} to be false",!M(this,"negate"))});_.addProperty("callable",function(){let t=M(this,"object"),e=M(this,"ssfi"),r=M(this,"message"),n=r?`${r}: `:"",i=M(this,"negate"),o=i?`${n}expected ${Ue(t)} not to be a callable function`:`${n}expected ${Ue(t)} to be a callable function`,a=["Function","AsyncFunction","GeneratorFunction","AsyncGeneratorFunction"].includes(Ze(t));if(a&&i||!a&&!i)throw new ze(o,void 0,e)});_.addProperty("false",function(){this.assert(M(this,"object")===!1,"expected #{this} to be false","expected #{this} to be true",!!M(this,"negate"))});_.addProperty("null",function(){this.assert(M(this,"object")===null,"expected #{this} to be null","expected #{this} not to be null")});_.addProperty("undefined",function(){this.assert(M(this,"object")===void 0,"expected #{this} to be undefined","expected #{this} not to be undefined")});_.addProperty("NaN",function(){this.assert(My(M(this,"object")),"expected #{this} to be NaN","expected #{this} not to be NaN")});function dw(){var t=M(this,"object");this.assert(t!=null,"expected #{this} to exist","expected #{this} to not exist")}C(dw,"assertExist");_.addProperty("exist",dw);_.addProperty("exists",dw);_.addProperty("empty",function(){var t=M(this,"object"),e=M(this,"ssfi"),r=M(this,"message"),n;switch(r=r?r+": ":"",Ze(t).toLowerCase()){case"array":case"string":n=t.length;break;case"map":case"set":n=t.size;break;case"weakmap":case"weakset":throw new ze(r+".empty was passed a weak collection",void 0,e);case"function":var i=r+".empty was passed a function "+Oy(t);throw new ze(i.trim(),void 0,e);default:if(t!==Object(t))throw new ze(r+".empty was passed non-string primitive "+Ue(t),void 0,e);n=Object.keys(t).length}this.assert(n===0,"expected #{this} to be empty","expected #{this} not to be empty")});function mw(){var t=M(this,"object"),e=Ze(t);this.assert(e==="Arguments","expected #{this} to be arguments but got "+e,"expected #{this} to not be arguments")}C(mw,"checkArguments");_.addProperty("arguments",mw);_.addProperty("Arguments",mw);function Ny(t,e){e&&M(this,"message",e);var r=M(this,"object");if(M(this,"deep")){var n=M(this,"lockSsfi");M(this,"lockSsfi",!0),this.eql(t),M(this,"lockSsfi",n)}else this.assert(t===r,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",t,this._obj,!0)}C(Ny,"assertEqual");_.addMethod("equal",Ny);_.addMethod("equals",Ny);_.addMethod("eq",Ny);function hw(t,e){e&&M(this,"message",e);var r=M(this,"eql");this.assert(r(t,M(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",t,this._obj,!0)}C(hw,"assertEql");_.addMethod("eql",hw);_.addMethod("eqls",hw);function Ly(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"doLength"),i=M(this,"message"),o=i?i+": ":"",a=M(this,"ssfi"),p=Ze(r).toLowerCase(),l=Ze(t).toLowerCase(),u,d=!0;if(n&&p!=="map"&&p!=="set"&&new _(r,i,a,!0).to.have.property("length"),!n&&p==="date"&&l!=="date")u=o+"the argument to above must be a date";else if(l!=="number"&&(n||p==="number"))u=o+"the argument to above must be a number";else if(!n&&p!=="date"&&p!=="number"){var m=p==="string"?"'"+r+"'":r;u=o+"expected "+m+" to be a number or a date"}else d=!1;if(d)throw new ze(u,void 0,a);if(n){var g="length",x;p==="map"||p==="set"?(g="size",x=r.size):x=r.length,this.assert(x>t,"expected #{this} to have a "+g+" above #{exp} but got #{act}","expected #{this} to not have a "+g+" above #{exp}",t,x)}else this.assert(r>t,"expected #{this} to be above #{exp}","expected #{this} to be at most #{exp}",t)}C(Ly,"assertAbove");_.addMethod("above",Ly);_.addMethod("gt",Ly);_.addMethod("greaterThan",Ly);function Uy(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"doLength"),i=M(this,"message"),o=i?i+": ":"",a=M(this,"ssfi"),p=Ze(r).toLowerCase(),l=Ze(t).toLowerCase(),u,d=!0;if(n&&p!=="map"&&p!=="set"&&new _(r,i,a,!0).to.have.property("length"),!n&&p==="date"&&l!=="date")u=o+"the argument to least must be a date";else if(l!=="number"&&(n||p==="number"))u=o+"the argument to least must be a number";else if(!n&&p!=="date"&&p!=="number"){var m=p==="string"?"'"+r+"'":r;u=o+"expected "+m+" to be a number or a date"}else d=!1;if(d)throw new ze(u,void 0,a);if(n){var g="length",x;p==="map"||p==="set"?(g="size",x=r.size):x=r.length,this.assert(x>=t,"expected #{this} to have a "+g+" at least #{exp} but got #{act}","expected #{this} to have a "+g+" below #{exp}",t,x)}else this.assert(r>=t,"expected #{this} to be at least #{exp}","expected #{this} to be below #{exp}",t)}C(Uy,"assertLeast");_.addMethod("least",Uy);_.addMethod("gte",Uy);_.addMethod("greaterThanOrEqual",Uy);function Hy(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"doLength"),i=M(this,"message"),o=i?i+": ":"",a=M(this,"ssfi"),p=Ze(r).toLowerCase(),l=Ze(t).toLowerCase(),u,d=!0;if(n&&p!=="map"&&p!=="set"&&new _(r,i,a,!0).to.have.property("length"),!n&&p==="date"&&l!=="date")u=o+"the argument to below must be a date";else if(l!=="number"&&(n||p==="number"))u=o+"the argument to below must be a number";else if(!n&&p!=="date"&&p!=="number"){var m=p==="string"?"'"+r+"'":r;u=o+"expected "+m+" to be a number or a date"}else d=!1;if(d)throw new ze(u,void 0,a);if(n){var g="length",x;p==="map"||p==="set"?(g="size",x=r.size):x=r.length,this.assert(x<t,"expected #{this} to have a "+g+" below #{exp} but got #{act}","expected #{this} to not have a "+g+" below #{exp}",t,x)}else this.assert(r<t,"expected #{this} to be below #{exp}","expected #{this} to be at least #{exp}",t)}C(Hy,"assertBelow");_.addMethod("below",Hy);_.addMethod("lt",Hy);_.addMethod("lessThan",Hy);function Vy(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"doLength"),i=M(this,"message"),o=i?i+": ":"",a=M(this,"ssfi"),p=Ze(r).toLowerCase(),l=Ze(t).toLowerCase(),u,d=!0;if(n&&p!=="map"&&p!=="set"&&new _(r,i,a,!0).to.have.property("length"),!n&&p==="date"&&l!=="date")u=o+"the argument to most must be a date";else if(l!=="number"&&(n||p==="number"))u=o+"the argument to most must be a number";else if(!n&&p!=="date"&&p!=="number"){var m=p==="string"?"'"+r+"'":r;u=o+"expected "+m+" to be a number or a date"}else d=!1;if(d)throw new ze(u,void 0,a);if(n){var g="length",x;p==="map"||p==="set"?(g="size",x=r.size):x=r.length,this.assert(x<=t,"expected #{this} to have a "+g+" at most #{exp} but got #{act}","expected #{this} to have a "+g+" above #{exp}",t,x)}else this.assert(r<=t,"expected #{this} to be at most #{exp}","expected #{this} to be above #{exp}",t)}C(Vy,"assertMost");_.addMethod("most",Vy);_.addMethod("lte",Vy);_.addMethod("lessThanOrEqual",Vy);_.addMethod("within",function(t,e,r){r&&M(this,"message",r);var n=M(this,"object"),i=M(this,"doLength"),o=M(this,"message"),a=o?o+": ":"",p=M(this,"ssfi"),l=Ze(n).toLowerCase(),u=Ze(t).toLowerCase(),d=Ze(e).toLowerCase(),m,g=!0,x=u==="date"&&d==="date"?t.toISOString()+".."+e.toISOString():t+".."+e;if(i&&l!=="map"&&l!=="set"&&new _(n,o,p,!0).to.have.property("length"),!i&&l==="date"&&(u!=="date"||d!=="date"))m=a+"the arguments to within must be dates";else if((u!=="number"||d!=="number")&&(i||l==="number"))m=a+"the arguments to within must be numbers";else if(!i&&l!=="date"&&l!=="number"){var b=l==="string"?"'"+n+"'":n;m=a+"expected "+b+" to be a number or a date"}else g=!1;if(g)throw new ze(m,void 0,p);if(i){var v="length",F;l==="map"||l==="set"?(v="size",F=n.size):F=n.length,this.assert(F>=t&&F<=e,"expected #{this} to have a "+v+" within "+x,"expected #{this} to not have a "+v+" within "+x)}else this.assert(n>=t&&n<=e,"expected #{this} to be within "+x,"expected #{this} to not be within "+x)});function gw(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"ssfi"),i=M(this,"message");try{var o=r instanceof t}catch(p){throw p instanceof TypeError?(i=i?i+": ":"",new ze(i+"The instanceof assertion needs a constructor but "+Ze(t)+" was given.",void 0,n)):p}var a=Oy(t);a==null&&(a="an unnamed constructor"),this.assert(o,"expected #{this} to be an instance of "+a,"expected #{this} to not be an instance of "+a)}C(gw,"assertInstanceOf");_.addMethod("instanceof",gw);_.addMethod("instanceOf",gw);function yw(t,e,r){r&&M(this,"message",r);var n=M(this,"nested"),i=M(this,"own"),o=M(this,"message"),a=M(this,"object"),p=M(this,"ssfi"),l=typeof t;if(o=o?o+": ":"",n){if(l!=="string")throw new ze(o+"the argument to property must be a string when using nested syntax",void 0,p)}else if(l!=="string"&&l!=="number"&&l!=="symbol")throw new ze(o+"the argument to property must be a string, number, or symbol",void 0,p);if(n&&i)throw new ze(o+'The "nested" and "own" flags cannot be combined.',void 0,p);if(a==null)throw new ze(o+"Target cannot be null or undefined.",void 0,p);var u=M(this,"deep"),d=M(this,"negate"),m=n?rw(a,t):null,g=n?m.value:a[t],x=u?M(this,"eql"):(F,I)=>F===I,b="";u&&(b+="deep "),i&&(b+="own "),n&&(b+="nested "),b+="property ";var v;i?v=Object.prototype.hasOwnProperty.call(a,t):n?v=m.exists:v=Cy(a,t),(!d||arguments.length===1)&&this.assert(v,"expected #{this} to have "+b+Ue(t),"expected #{this} to not have "+b+Ue(t)),arguments.length>1&&this.assert(v&&x(e,g),"expected #{this} to have "+b+Ue(t)+" of #{exp}, but got #{act}","expected #{this} to not have "+b+Ue(t)+" of #{act}",e,g),M(this,"object",g)}C(yw,"assertProperty");_.addMethod("property",yw);function xw(t,e,r){M(this,"own",!0),yw.apply(this,arguments)}C(xw,"assertOwnProperty");_.addMethod("ownProperty",xw);_.addMethod("haveOwnProperty",xw);function Tw(t,e,r){typeof e=="string"&&(r=e,e=null),r&&M(this,"message",r);var n=M(this,"object"),i=Object.getOwnPropertyDescriptor(Object(n),t),o=M(this,"eql");i&&e?this.assert(o(e,i),"expected the own property descriptor for "+Ue(t)+" on #{this} to match "+Ue(e)+", got "+Ue(i),"expected the own property descriptor for "+Ue(t)+" on #{this} to not match "+Ue(e),e,i,!0):this.assert(i,"expected #{this} to have an own property descriptor for "+Ue(t),"expected #{this} to not have an own property descriptor for "+Ue(t)),M(this,"object",i)}C(Tw,"assertOwnPropertyDescriptor");_.addMethod("ownPropertyDescriptor",Tw);_.addMethod("haveOwnPropertyDescriptor",Tw);function Sw(){M(this,"doLength",!0)}C(Sw,"assertLengthChain");function vw(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=Ze(r).toLowerCase(),i=M(this,"message"),o=M(this,"ssfi"),a="length",p;switch(n){case"map":case"set":a="size",p=r.size;break;default:new _(r,i,o,!0).to.have.property("length"),p=r.length}this.assert(p==t,"expected #{this} to have a "+a+" of #{exp} but got #{act}","expected #{this} to not have a "+a+" of #{act}",t,p)}C(vw,"assertLength");_.addChainableMethod("length",vw,Sw);_.addChainableMethod("lengthOf",vw,Sw);function bw(t,e){e&&M(this,"message",e);var r=M(this,"object");this.assert(t.exec(r),"expected #{this} to match "+t,"expected #{this} not to match "+t)}C(bw,"assertMatch");_.addMethod("match",bw);_.addMethod("matches",bw);_.addMethod("string",function(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"message"),i=M(this,"ssfi");new _(r,n,i,!0).is.a("string"),this.assert(~r.indexOf(t),"expected #{this} to contain "+Ue(t),"expected #{this} to not contain "+Ue(t))});function ww(t){var e=M(this,"object"),r=Ze(e),n=Ze(t),i=M(this,"ssfi"),o=M(this,"deep"),a,p="",l,u=!0,d=M(this,"message");d=d?d+": ":"";var m=d+"when testing keys against an object or an array you must give a single Array|Object|String argument or multiple String arguments";if(r==="Map"||r==="Set")p=o?"deeply ":"",l=[],e.forEach(function(U,K){l.push(K)}),n!=="Array"&&(t=Array.prototype.slice.call(arguments));else{switch(l=lw(e),n){case"Array":if(arguments.length>1)throw new ze(m,void 0,i);break;case"Object":if(arguments.length>1)throw new ze(m,void 0,i);t=Object.keys(t);break;default:t=Array.prototype.slice.call(arguments)}t=t.map(function(U){return typeof U=="symbol"?U:String(U)})}if(!t.length)throw new ze(d+"keys required",void 0,i);var g=t.length,x=M(this,"any"),b=M(this,"all"),v=t,F=o?M(this,"eql"):(U,K)=>U===K;if(!x&&!b&&(b=!0),x&&(u=v.some(function(U){return l.some(function(K){return F(U,K)})})),b&&(u=v.every(function(U){return l.some(function(K){return F(U,K)})}),M(this,"contains")||(u=u&&t.length==l.length)),g>1){t=t.map(function(U){return Ue(U)});var I=t.pop();b&&(a=t.join(", ")+", and "+I),x&&(a=t.join(", ")+", or "+I)}else a=Ue(t[0]);a=(g>1?"keys ":"key ")+a,a=(M(this,"contains")?"contain ":"have ")+a,this.assert(u,"expected #{this} to "+p+a,"expected #{this} to not "+p+a,v.slice(0).sort(Py),l.sort(Py),!0)}C(ww,"assertKeys");_.addMethod("keys",ww);_.addMethod("key",ww);function By(t,e,r){r&&M(this,"message",r);var n=M(this,"object"),i=M(this,"ssfi"),o=M(this,"message"),a=M(this,"negate")||!1;new _(n,o,i,!0).is.a("function"),(Ay(t)||typeof t=="string")&&(e=t,t=null);let p,l=!1;try{n()}catch(U){l=!0,p=U}var u=t===void 0&&e===void 0,d=!!(t&&e),m=!1,g=!1;if(u||!u&&!a){var x="an error";t instanceof Error?x="#{exp}":t&&(x=Kr.getConstructorName(t));let U=p;if(p instanceof Error)U=p.toString();else if(typeof p=="string")U=p;else if(p&&(typeof p=="object"||typeof p=="function"))try{U=Kr.getConstructorName(p)}catch{}this.assert(l,"expected #{this} to throw "+x,"expected #{this} to not throw an error but #{act} was thrown",t&&t.toString(),U)}if(t&&p){if(t instanceof Error){var b=Kr.compatibleInstance(p,t);b===a&&(d&&a?m=!0:this.assert(a,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(p&&!a?" but #{act} was thrown":""),t.toString(),p.toString()))}var v=Kr.compatibleConstructor(p,t);v===a&&(d&&a?m=!0:this.assert(a,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(p?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&Kr.getConstructorName(t),p instanceof Error?p.toString():p&&Kr.getConstructorName(p)))}if(p&&e!==void 0&&e!==null){var F="including";Ay(e)&&(F="matching");var I=Kr.compatibleMessage(p,e);I===a&&(d&&a?g=!0:this.assert(a,"expected #{this} to throw error "+F+" #{exp} but got #{act}","expected #{this} to throw error not "+F+" #{exp}",e,Kr.getMessage(p)))}m&&g&&this.assert(a,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(p?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&Kr.getConstructorName(t),p instanceof Error?p.toString():p&&Kr.getConstructorName(p)),M(this,"object",p)}C(By,"assertThrows");_.addMethod("throw",By);_.addMethod("throws",By);_.addMethod("Throw",By);function _w(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"itself"),i=typeof r=="function"&&!n?r.prototype[t]:r[t];this.assert(typeof i=="function","expected #{this} to respond to "+Ue(t),"expected #{this} to not respond to "+Ue(t))}C(_w,"respondTo");_.addMethod("respondTo",_w);_.addMethod("respondsTo",_w);_.addProperty("itself",function(){M(this,"itself",!0)});function Ew(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=t(r);this.assert(n,"expected #{this} to satisfy "+Ms(t),"expected #{this} to not satisfy"+Ms(t),!M(this,"negate"),n)}C(Ew,"satisfy");_.addMethod("satisfy",Ew);_.addMethod("satisfies",Ew);function Rw(t,e,r){r&&M(this,"message",r);var n=M(this,"object"),i=M(this,"message"),o=M(this,"ssfi");if(new _(n,i,o,!0).is.a("number"),typeof t!="number"||typeof e!="number"){i=i?i+": ":"";var a=e===void 0?", and a delta is required":"";throw new ze(i+"the arguments to closeTo or approximately must be numbers"+a,void 0,o)}this.assert(Math.abs(n-t)<=e,"expected #{this} to be close to "+t+" +/- "+e,"expected #{this} not to be close to "+t+" +/- "+e)}C(Rw,"closeTo");_.addMethod("closeTo",Rw);_.addMethod("approximately",Rw);function RC(t,e,r,n,i){let o=Array.from(e),a=Array.from(t);if(!n){if(a.length!==o.length)return!1;o=o.slice()}return a.every(function(p,l){if(i)return r?r(p,o[l]):p===o[l];if(!r){var u=o.indexOf(p);return u===-1?!1:(n||o.splice(u,1),!0)}return o.some(function(d,m){return r(p,d)?(n||o.splice(m,1),!0):!1})})}C(RC,"isSubsetOf");_.addMethod("members",function(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"message"),i=M(this,"ssfi");new _(r,n,i,!0).to.be.iterable,new _(t,n,i,!0).to.be.iterable;var o=M(this,"contains"),a=M(this,"ordered"),p,l,u;o?(p=a?"an ordered superset":"a superset",l="expected #{this} to be "+p+" of #{exp}",u="expected #{this} to not be "+p+" of #{exp}"):(p=a?"ordered members":"members",l="expected #{this} to have the same "+p+" as #{exp}",u="expected #{this} to not have the same "+p+" as #{exp}");var d=M(this,"deep")?M(this,"eql"):void 0;this.assert(RC(t,r,d,o,a),l,u,t,r,!0)});_.addProperty("iterable",function(t){t&&M(this,"message",t);var e=M(this,"object");this.assert(e!=null&&e[Symbol.iterator],"expected #{this} to be an iterable","expected #{this} to not be an iterable",e)});function kC(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"message"),i=M(this,"ssfi"),o=M(this,"contains"),a=M(this,"deep"),p=M(this,"eql");new _(t,n,i,!0).to.be.an("array"),o?this.assert(t.some(function(l){return r.indexOf(l)>-1}),"expected #{this} to contain one of #{exp}","expected #{this} to not contain one of #{exp}",t,r):a?this.assert(t.some(function(l){return p(r,l)}),"expected #{this} to deeply equal one of #{exp}","expected #{this} to deeply equal one of #{exp}",t,r):this.assert(t.indexOf(r)>-1,"expected #{this} to be one of #{exp}","expected #{this} to not be one of #{exp}",t,r)}C(kC,"oneOf");_.addMethod("oneOf",kC);function kw(t,e,r){r&&M(this,"message",r);var n=M(this,"object"),i=M(this,"message"),o=M(this,"ssfi");new _(n,i,o,!0).is.a("function");var a;e?(new _(t,i,o,!0).to.have.property(e),a=t[e]):(new _(t,i,o,!0).is.a("function"),a=t()),n();var p=e==null?t():t[e],l=e==null?a:"."+e;M(this,"deltaMsgObj",l),M(this,"initialDeltaValue",a),M(this,"finalDeltaValue",p),M(this,"deltaBehavior","change"),M(this,"realDelta",p!==a),this.assert(a!==p,"expected "+l+" to change","expected "+l+" to not change")}C(kw,"assertChanges");_.addMethod("change",kw);_.addMethod("changes",kw);function Pw(t,e,r){r&&M(this,"message",r);var n=M(this,"object"),i=M(this,"message"),o=M(this,"ssfi");new _(n,i,o,!0).is.a("function");var a;e?(new _(t,i,o,!0).to.have.property(e),a=t[e]):(new _(t,i,o,!0).is.a("function"),a=t()),new _(a,i,o,!0).is.a("number"),n();var p=e==null?t():t[e],l=e==null?a:"."+e;M(this,"deltaMsgObj",l),M(this,"initialDeltaValue",a),M(this,"finalDeltaValue",p),M(this,"deltaBehavior","increase"),M(this,"realDelta",p-a),this.assert(p-a>0,"expected "+l+" to increase","expected "+l+" to not increase")}C(Pw,"assertIncreases");_.addMethod("increase",Pw);_.addMethod("increases",Pw);function Mw(t,e,r){r&&M(this,"message",r);var n=M(this,"object"),i=M(this,"message"),o=M(this,"ssfi");new _(n,i,o,!0).is.a("function");var a;e?(new _(t,i,o,!0).to.have.property(e),a=t[e]):(new _(t,i,o,!0).is.a("function"),a=t()),new _(a,i,o,!0).is.a("number"),n();var p=e==null?t():t[e],l=e==null?a:"."+e;M(this,"deltaMsgObj",l),M(this,"initialDeltaValue",a),M(this,"finalDeltaValue",p),M(this,"deltaBehavior","decrease"),M(this,"realDelta",a-p),this.assert(p-a<0,"expected "+l+" to decrease","expected "+l+" to not decrease")}C(Mw,"assertDecreases");_.addMethod("decrease",Mw);_.addMethod("decreases",Mw);function PC(t,e){e&&M(this,"message",e);var r=M(this,"deltaMsgObj"),n=M(this,"initialDeltaValue"),i=M(this,"finalDeltaValue"),o=M(this,"deltaBehavior"),a=M(this,"realDelta"),p;o==="change"?p=Math.abs(i-n)===Math.abs(t):p=a===Math.abs(t),this.assert(p,"expected "+r+" to "+o+" by "+t,"expected "+r+" to not "+o+" by "+t)}C(PC,"assertDelta");_.addMethod("by",PC);_.addProperty("extensible",function(){var t=M(this,"object"),e=t===Object(t)&&Object.isExtensible(t);this.assert(e,"expected #{this} to be extensible","expected #{this} to not be extensible")});_.addProperty("sealed",function(){var t=M(this,"object"),e=t===Object(t)?Object.isSealed(t):!0;this.assert(e,"expected #{this} to be sealed","expected #{this} to not be sealed")});_.addProperty("frozen",function(){var t=M(this,"object"),e=t===Object(t)?Object.isFrozen(t):!0;this.assert(e,"expected #{this} to be frozen","expected #{this} to not be frozen")});_.addProperty("finite",function(t){var e=M(this,"object");this.assert(typeof e=="number"&&isFinite(e),"expected #{this} to be a finite number","expected #{this} to not be a finite number")});function Dy(t,e){return new _(t,e)}C(Dy,"expect");Dy.fail=function(t,e,r,n){throw arguments.length<2&&(r=t,t=void 0),r=r||"expect.fail()",new ze(r,{actual:t,expected:e,operator:n},Dy.fail)};var MC={};Qb(MC,{Should:()=>bX,should:()=>vX});function Aw(){function t(){return this instanceof String||this instanceof Number||this instanceof Boolean||typeof Symbol=="function"&&this instanceof Symbol||typeof BigInt=="function"&&this instanceof BigInt?new _(this.valueOf(),null,t):new _(this,null,t)}C(t,"shouldGetter");function e(n){Object.defineProperty(this,"should",{value:n,enumerable:!0,configurable:!0,writable:!0})}C(e,"shouldSetter"),Object.defineProperty(Object.prototype,"should",{set:e,get:t,configurable:!0});var r={};return r.fail=function(n,i,o,a){throw arguments.length<2&&(o=n,n=void 0),o=o||"should.fail()",new ze(o,{actual:n,expected:i,operator:a},r.fail)},r.equal=function(n,i,o){new _(n,o).to.equal(i)},r.Throw=function(n,i,o,a){new _(n,a).to.Throw(i,o)},r.exist=function(n,i){new _(n,i).to.exist},r.not={},r.not.equal=function(n,i,o){new _(n,o).to.not.equal(i)},r.not.Throw=function(n,i,o,a){new _(n,a).to.not.Throw(i,o)},r.not.exist=function(n,i){new _(n,i).to.not.exist},r.throw=r.Throw,r.not.throw=r.not.Throw,r}C(Aw,"loadShould");var vX=Aw,bX=Aw;function w(t,e){var r=new _(null,null,w,!0);r.assert(t,e,"[ negation message unavailable ]")}C(w,"assert");w.fail=function(t,e,r,n){throw arguments.length<2&&(r=t,t=void 0),r=r||"assert.fail()",new ze(r,{actual:t,expected:e,operator:n},w.fail)};w.isOk=function(t,e){new _(t,e,w.isOk,!0).is.ok};w.isNotOk=function(t,e){new _(t,e,w.isNotOk,!0).is.not.ok};w.equal=function(t,e,r){var n=new _(t,r,w.equal,!0);n.assert(e==_e(n,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",e,t,!0)};w.notEqual=function(t,e,r){var n=new _(t,r,w.notEqual,!0);n.assert(e!=_e(n,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",e,t,!0)};w.strictEqual=function(t,e,r){new _(t,r,w.strictEqual,!0).to.equal(e)};w.notStrictEqual=function(t,e,r){new _(t,r,w.notStrictEqual,!0).to.not.equal(e)};w.deepEqual=w.deepStrictEqual=function(t,e,r){new _(t,r,w.deepEqual,!0).to.eql(e)};w.notDeepEqual=function(t,e,r){new _(t,r,w.notDeepEqual,!0).to.not.eql(e)};w.isAbove=function(t,e,r){new _(t,r,w.isAbove,!0).to.be.above(e)};w.isAtLeast=function(t,e,r){new _(t,r,w.isAtLeast,!0).to.be.least(e)};w.isBelow=function(t,e,r){new _(t,r,w.isBelow,!0).to.be.below(e)};w.isAtMost=function(t,e,r){new _(t,r,w.isAtMost,!0).to.be.most(e)};w.isTrue=function(t,e){new _(t,e,w.isTrue,!0).is.true};w.isNotTrue=function(t,e){new _(t,e,w.isNotTrue,!0).to.not.equal(!0)};w.isFalse=function(t,e){new _(t,e,w.isFalse,!0).is.false};w.isNotFalse=function(t,e){new _(t,e,w.isNotFalse,!0).to.not.equal(!1)};w.isNull=function(t,e){new _(t,e,w.isNull,!0).to.equal(null)};w.isNotNull=function(t,e){new _(t,e,w.isNotNull,!0).to.not.equal(null)};w.isNaN=function(t,e){new _(t,e,w.isNaN,!0).to.be.NaN};w.isNotNaN=function(t,e){new _(t,e,w.isNotNaN,!0).not.to.be.NaN};w.exists=function(t,e){new _(t,e,w.exists,!0).to.exist};w.notExists=function(t,e){new _(t,e,w.notExists,!0).to.not.exist};w.isUndefined=function(t,e){new _(t,e,w.isUndefined,!0).to.equal(void 0)};w.isDefined=function(t,e){new _(t,e,w.isDefined,!0).to.not.equal(void 0)};w.isCallable=function(t,e){new _(t,e,w.isCallable,!0).is.callable};w.isNotCallable=function(t,e){new _(t,e,w.isNotCallable,!0).is.not.callable};w.isObject=function(t,e){new _(t,e,w.isObject,!0).to.be.a("object")};w.isNotObject=function(t,e){new _(t,e,w.isNotObject,!0).to.not.be.a("object")};w.isArray=function(t,e){new _(t,e,w.isArray,!0).to.be.an("array")};w.isNotArray=function(t,e){new _(t,e,w.isNotArray,!0).to.not.be.an("array")};w.isString=function(t,e){new _(t,e,w.isString,!0).to.be.a("string")};w.isNotString=function(t,e){new _(t,e,w.isNotString,!0).to.not.be.a("string")};w.isNumber=function(t,e){new _(t,e,w.isNumber,!0).to.be.a("number")};w.isNotNumber=function(t,e){new _(t,e,w.isNotNumber,!0).to.not.be.a("number")};w.isFinite=function(t,e){new _(t,e,w.isFinite,!0).to.be.finite};w.isBoolean=function(t,e){new _(t,e,w.isBoolean,!0).to.be.a("boolean")};w.isNotBoolean=function(t,e){new _(t,e,w.isNotBoolean,!0).to.not.be.a("boolean")};w.typeOf=function(t,e,r){new _(t,r,w.typeOf,!0).to.be.a(e)};w.notTypeOf=function(t,e,r){new _(t,r,w.notTypeOf,!0).to.not.be.a(e)};w.instanceOf=function(t,e,r){new _(t,r,w.instanceOf,!0).to.be.instanceOf(e)};w.notInstanceOf=function(t,e,r){new _(t,r,w.notInstanceOf,!0).to.not.be.instanceOf(e)};w.include=function(t,e,r){new _(t,r,w.include,!0).include(e)};w.notInclude=function(t,e,r){new _(t,r,w.notInclude,!0).not.include(e)};w.deepInclude=function(t,e,r){new _(t,r,w.deepInclude,!0).deep.include(e)};w.notDeepInclude=function(t,e,r){new _(t,r,w.notDeepInclude,!0).not.deep.include(e)};w.nestedInclude=function(t,e,r){new _(t,r,w.nestedInclude,!0).nested.include(e)};w.notNestedInclude=function(t,e,r){new _(t,r,w.notNestedInclude,!0).not.nested.include(e)};w.deepNestedInclude=function(t,e,r){new _(t,r,w.deepNestedInclude,!0).deep.nested.include(e)};w.notDeepNestedInclude=function(t,e,r){new _(t,r,w.notDeepNestedInclude,!0).not.deep.nested.include(e)};w.ownInclude=function(t,e,r){new _(t,r,w.ownInclude,!0).own.include(e)};w.notOwnInclude=function(t,e,r){new _(t,r,w.notOwnInclude,!0).not.own.include(e)};w.deepOwnInclude=function(t,e,r){new _(t,r,w.deepOwnInclude,!0).deep.own.include(e)};w.notDeepOwnInclude=function(t,e,r){new _(t,r,w.notDeepOwnInclude,!0).not.deep.own.include(e)};w.match=function(t,e,r){new _(t,r,w.match,!0).to.match(e)};w.notMatch=function(t,e,r){new _(t,r,w.notMatch,!0).to.not.match(e)};w.property=function(t,e,r){new _(t,r,w.property,!0).to.have.property(e)};w.notProperty=function(t,e,r){new _(t,r,w.notProperty,!0).to.not.have.property(e)};w.propertyVal=function(t,e,r,n){new _(t,n,w.propertyVal,!0).to.have.property(e,r)};w.notPropertyVal=function(t,e,r,n){new _(t,n,w.notPropertyVal,!0).to.not.have.property(e,r)};w.deepPropertyVal=function(t,e,r,n){new _(t,n,w.deepPropertyVal,!0).to.have.deep.property(e,r)};w.notDeepPropertyVal=function(t,e,r,n){new _(t,n,w.notDeepPropertyVal,!0).to.not.have.deep.property(e,r)};w.ownProperty=function(t,e,r){new _(t,r,w.ownProperty,!0).to.have.own.property(e)};w.notOwnProperty=function(t,e,r){new _(t,r,w.notOwnProperty,!0).to.not.have.own.property(e)};w.ownPropertyVal=function(t,e,r,n){new _(t,n,w.ownPropertyVal,!0).to.have.own.property(e,r)};w.notOwnPropertyVal=function(t,e,r,n){new _(t,n,w.notOwnPropertyVal,!0).to.not.have.own.property(e,r)};w.deepOwnPropertyVal=function(t,e,r,n){new _(t,n,w.deepOwnPropertyVal,!0).to.have.deep.own.property(e,r)};w.notDeepOwnPropertyVal=function(t,e,r,n){new _(t,n,w.notDeepOwnPropertyVal,!0).to.not.have.deep.own.property(e,r)};w.nestedProperty=function(t,e,r){new _(t,r,w.nestedProperty,!0).to.have.nested.property(e)};w.notNestedProperty=function(t,e,r){new _(t,r,w.notNestedProperty,!0).to.not.have.nested.property(e)};w.nestedPropertyVal=function(t,e,r,n){new _(t,n,w.nestedPropertyVal,!0).to.have.nested.property(e,r)};w.notNestedPropertyVal=function(t,e,r,n){new _(t,n,w.notNestedPropertyVal,!0).to.not.have.nested.property(e,r)};w.deepNestedPropertyVal=function(t,e,r,n){new _(t,n,w.deepNestedPropertyVal,!0).to.have.deep.nested.property(e,r)};w.notDeepNestedPropertyVal=function(t,e,r,n){new _(t,n,w.notDeepNestedPropertyVal,!0).to.not.have.deep.nested.property(e,r)};w.lengthOf=function(t,e,r){new _(t,r,w.lengthOf,!0).to.have.lengthOf(e)};w.hasAnyKeys=function(t,e,r){new _(t,r,w.hasAnyKeys,!0).to.have.any.keys(e)};w.hasAllKeys=function(t,e,r){new _(t,r,w.hasAllKeys,!0).to.have.all.keys(e)};w.containsAllKeys=function(t,e,r){new _(t,r,w.containsAllKeys,!0).to.contain.all.keys(e)};w.doesNotHaveAnyKeys=function(t,e,r){new _(t,r,w.doesNotHaveAnyKeys,!0).to.not.have.any.keys(e)};w.doesNotHaveAllKeys=function(t,e,r){new _(t,r,w.doesNotHaveAllKeys,!0).to.not.have.all.keys(e)};w.hasAnyDeepKeys=function(t,e,r){new _(t,r,w.hasAnyDeepKeys,!0).to.have.any.deep.keys(e)};w.hasAllDeepKeys=function(t,e,r){new _(t,r,w.hasAllDeepKeys,!0).to.have.all.deep.keys(e)};w.containsAllDeepKeys=function(t,e,r){new _(t,r,w.containsAllDeepKeys,!0).to.contain.all.deep.keys(e)};w.doesNotHaveAnyDeepKeys=function(t,e,r){new _(t,r,w.doesNotHaveAnyDeepKeys,!0).to.not.have.any.deep.keys(e)};w.doesNotHaveAllDeepKeys=function(t,e,r){new _(t,r,w.doesNotHaveAllDeepKeys,!0).to.not.have.all.deep.keys(e)};w.throws=function(t,e,r,n){(typeof e=="string"||e instanceof RegExp)&&(r=e,e=null);var i=new _(t,n,w.throws,!0).to.throw(e,r);return _e(i,"object")};w.doesNotThrow=function(t,e,r,n){(typeof e=="string"||e instanceof RegExp)&&(r=e,e=null),new _(t,n,w.doesNotThrow,!0).to.not.throw(e,r)};w.operator=function(t,e,r,n){var i;switch(e){case"==":i=t==r;break;case"===":i=t===r;break;case">":i=t>r;break;case">=":i=t>=r;break;case"<":i=t<r;break;case"<=":i=t<=r;break;case"!=":i=t!=r;break;case"!==":i=t!==r;break;default:throw n=n&&n+": ",new ze(n+'Invalid operator "'+e+'"',void 0,w.operator)}var o=new _(i,n,w.operator,!0);o.assert(_e(o,"object")===!0,"expected "+Ue(t)+" to be "+e+" "+Ue(r),"expected "+Ue(t)+" to not be "+e+" "+Ue(r))};w.closeTo=function(t,e,r,n){new _(t,n,w.closeTo,!0).to.be.closeTo(e,r)};w.approximately=function(t,e,r,n){new _(t,n,w.approximately,!0).to.be.approximately(e,r)};w.sameMembers=function(t,e,r){new _(t,r,w.sameMembers,!0).to.have.same.members(e)};w.notSameMembers=function(t,e,r){new _(t,r,w.notSameMembers,!0).to.not.have.same.members(e)};w.sameDeepMembers=function(t,e,r){new _(t,r,w.sameDeepMembers,!0).to.have.same.deep.members(e)};w.notSameDeepMembers=function(t,e,r){new _(t,r,w.notSameDeepMembers,!0).to.not.have.same.deep.members(e)};w.sameOrderedMembers=function(t,e,r){new _(t,r,w.sameOrderedMembers,!0).to.have.same.ordered.members(e)};w.notSameOrderedMembers=function(t,e,r){new _(t,r,w.notSameOrderedMembers,!0).to.not.have.same.ordered.members(e)};w.sameDeepOrderedMembers=function(t,e,r){new _(t,r,w.sameDeepOrderedMembers,!0).to.have.same.deep.ordered.members(e)};w.notSameDeepOrderedMembers=function(t,e,r){new _(t,r,w.notSameDeepOrderedMembers,!0).to.not.have.same.deep.ordered.members(e)};w.includeMembers=function(t,e,r){new _(t,r,w.includeMembers,!0).to.include.members(e)};w.notIncludeMembers=function(t,e,r){new _(t,r,w.notIncludeMembers,!0).to.not.include.members(e)};w.includeDeepMembers=function(t,e,r){new _(t,r,w.includeDeepMembers,!0).to.include.deep.members(e)};w.notIncludeDeepMembers=function(t,e,r){new _(t,r,w.notIncludeDeepMembers,!0).to.not.include.deep.members(e)};w.includeOrderedMembers=function(t,e,r){new _(t,r,w.includeOrderedMembers,!0).to.include.ordered.members(e)};w.notIncludeOrderedMembers=function(t,e,r){new _(t,r,w.notIncludeOrderedMembers,!0).to.not.include.ordered.members(e)};w.includeDeepOrderedMembers=function(t,e,r){new _(t,r,w.includeDeepOrderedMembers,!0).to.include.deep.ordered.members(e)};w.notIncludeDeepOrderedMembers=function(t,e,r){new _(t,r,w.notIncludeDeepOrderedMembers,!0).to.not.include.deep.ordered.members(e)};w.oneOf=function(t,e,r){new _(t,r,w.oneOf,!0).to.be.oneOf(e)};w.isIterable=function(t,e){if(t==null||!t[Symbol.iterator])throw e=e?`${e} expected ${Ue(t)} to be an iterable`:`expected ${Ue(t)} to be an iterable`,new ze(e,void 0,w.isIterable)};w.changes=function(t,e,r,n){arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,w.changes,!0).to.change(e,r)};w.changesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,w.changesBy,!0).to.change(e,r).by(n)};w.doesNotChange=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,w.doesNotChange,!0).to.not.change(e,r)};w.changesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,w.changesButNotBy,!0).to.change(e,r).but.not.by(n)};w.increases=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,w.increases,!0).to.increase(e,r)};w.increasesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,w.increasesBy,!0).to.increase(e,r).by(n)};w.doesNotIncrease=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,w.doesNotIncrease,!0).to.not.increase(e,r)};w.increasesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,w.increasesButNotBy,!0).to.increase(e,r).but.not.by(n)};w.decreases=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,w.decreases,!0).to.decrease(e,r)};w.decreasesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,w.decreasesBy,!0).to.decrease(e,r).by(n)};w.doesNotDecrease=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,w.doesNotDecrease,!0).to.not.decrease(e,r)};w.doesNotDecreaseBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);return new _(t,i,w.doesNotDecreaseBy,!0).to.not.decrease(e,r).by(n)};w.decreasesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,w.decreasesButNotBy,!0).to.decrease(e,r).but.not.by(n)};w.ifError=function(t){if(t)throw t};w.isExtensible=function(t,e){new _(t,e,w.isExtensible,!0).to.be.extensible};w.isNotExtensible=function(t,e){new _(t,e,w.isNotExtensible,!0).to.not.be.extensible};w.isSealed=function(t,e){new _(t,e,w.isSealed,!0).to.be.sealed};w.isNotSealed=function(t,e){new _(t,e,w.isNotSealed,!0).to.not.be.sealed};w.isFrozen=function(t,e){new _(t,e,w.isFrozen,!0).to.be.frozen};w.isNotFrozen=function(t,e){new _(t,e,w.isNotFrozen,!0).to.not.be.frozen};w.isEmpty=function(t,e){new _(t,e,w.isEmpty,!0).to.be.empty};w.isNotEmpty=function(t,e){new _(t,e,w.isNotEmpty,!0).to.not.be.empty};C(function t(e,r){return w[r]=w[e],t},"alias")("isOk","ok")("isNotOk","notOk")("throws","throw")("throws","Throw")("isExtensible","extensible")("isNotExtensible","notExtensible")("isSealed","sealed")("isNotSealed","notSealed")("isFrozen","frozen")("isNotFrozen","notFrozen")("isEmpty","empty")("isNotEmpty","notEmpty")("isCallable","isFunction")("isNotCallable","isNotFunction");var V1=[];function wX(t){let e={AssertionError:ze,util:_y,config:Pr,expect:Dy,assert:w,Assertion:_,...MC};return~V1.indexOf(t)||(t(e,_y),V1.push(t)),e}C(wX,"use");var Wl=class{constructor(e,r,n){this._lineNumber=e,this._text=r,this._isLastLine=n}get lineNumber(){return this._lineNumber}get text(){return this._text}get range(){return new W(this._lineNumber,0,this._lineNumber,this._text.length)}get rangeIncludingLineBreak(){return this._isLastLine?this.range:new W(this._lineNumber,0,this._lineNumber+1,0)}get rangeTrimmed(){let e=/^(\s*)/.exec(this._text)[1].length;if(e===this._text.length)return;let r=this.text.trimEnd().length;return new W(this._lineNumber,e,this._lineNumber,r)}get isEmptyOrWhitespace(){return this.rangeTrimmed==null}};var AC=yr(require("node:path"),1),Wy=class{get uri(){return this._uri}get filename(){return AC.default.basename(this._uri.path)}get languageId(){return this._languageId}get version(){return this._version}get lineCount(){return this._lineCount}get range(){let{end:e}=this.lineAt(this.lineCount-1).range;return new W(0,0,e.line,e.character)}get eol(){return this._eol===`
`?"LF":"CRLF"}constructor(e,r,n,i,o){this._uri=e,this._languageId=r,this._version=n,this._eol=i,this._lines=o,this._lineCount=o.length,this._lineStarts=null,this._cachedTextValue=null}update(e){this._lines=e,this._lineCount=e.length,this._lineStarts=null,this._cachedTextValue=null}lineAt(e){let r;if(e instanceof le?r=e.line:typeof e=="number"&&(r=e),typeof r!="number"||r<0||Math.floor(r)!==r)throw new Error("Illegal value for `line`");return r=Math.min(r,this._lines.length-1),new Wl(r,this._lines[r],r===this._lines.length-1)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.line-1)+e.character}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();let r=this._lineStarts.getIndexOf(e),n=this._lines[r.index].length;return new le(r.index,Math.min(r.remainder,n))}getText(e){if(e===void 0)return this._cachedTextValue==null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue;if(e=this._validateRange(e),e.isEmpty)return"";if(e.isSingleLine)return this._lines[e.start.line].substring(e.start.character,e.end.character);let r=this._eol,n=e.start.line,i=e.end.line,o=[];o.push(this._lines[n].substring(e.start.character));for(let a=n+1;a<i;a++)o.push(this._lines[a]);return o.push(this._lines[i].substring(0,e.end.character)),o.join(r)}_validateRange(e){if(!(e instanceof W))throw new Error("Invalid argument");let r=this._validatePosition(e.start),n=this._validatePosition(e.end);return r===e.start&&n===e.end?e:new W(r.line,r.character,n.line,n.character)}_validatePosition(e){if(!(e instanceof le))throw new Error("Invalid argument");if(this._lines.length===0)return e.with(0,0);let{line:r,character:n}=e,i=!1;if(r<0)r=0,n=0,i=!0;else if(r>=this._lines.length)r=this._lines.length-1,n=this._lines[r].length,i=!0;else{let o=this._lines[r].length;n<0?(n=0,i=!0):n>o&&(n=o,i=!0)}return i?new le(r,n):e}_ensureLineStarts(){if(!this._lineStarts){let e=this._eol.length,r=this._lines.length,n=new Uint32Array(r);for(let i=0;i<r;i++)n[i]=this._lines[i].length+e;this._lineStarts=new Dw(n)}}};function RX(t){if(t<0)return 0;let e=4294967295;return t>e?e:t|0}var Dw=class{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}getCount(){return this.values.length}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=RX(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let r=this.prefixSumValidIndex[0]+1;r===0&&(this.prefixSum[0]=this.values[0],r++),e>=this.values.length&&(e=this.values.length-1);for(let n=r;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let r=0,n=this.values.length-1,i=0,o=0,a=0;for(;r<=n;)if(i=r+(n-r)/2|0,o=this.prefixSum[i],a=o-this.values[i],e<a)n=i-1;else if(e>=o)r=i+1;else break;return new Iw(i,e-a)}},Iw=class{constructor(e,r){this.index=e;this.remainder=r;this._prefixSumIndexOfResultBrand=void 0;this.index=e,this.remainder=r}};var $y=class{constructor(e){this.client=e;this.cursorlessVersion="0.0.0";this.workspaceFolders=void 0;this.disposables=[];this.quickPickReturnValue=void 0;this.onDidCloseTextDocument=$l;this.onDidChangeActiveTextEditor=$l;this.onDidChangeVisibleTextEditors=$l;this.onDidChangeTextEditorSelection=$l;this.onDidChangeTextEditorVisibleRanges=$l;this.configuration=new gl,this.keyValueStore=new yl,this.messages=new xl,this.clipboard=new ml(this.client),this.capabilities=new ry,this.editorMap=new Map,this.documentMap=new Map,this.activeWindow=void 0,this.activeBuffer=void 0}async init(){let e=await hF(this.client);this.assetsRoot_=Fw.default.join(e,"assets"),this.cursorlessNeovimPath=Fw.default.join(e,"node","cursorless-neovim")}async showQuickPick(e,r){throw Error("showQuickPick Not implemented")}async setHighlightRanges(e,r,n){throw Error("setHighlightRanges Not implemented")}async flashRanges(e){console.debug("flashRanges Not implemented")}get assetsRoot(){if(this.assetsRoot_==null)throw Error("Field `assetsRoot` has not yet been mocked");return this.assetsRoot_}get runMode(){return D1()}get activeTextEditor(){return this.getActiveTextEditor()}get activeEditableTextEditor(){return this.getActiveTextEditor()}getActiveTextEditor(){let e=this.activeWindow?this.getTextEditor(this.activeWindow):void 0;return e===void 0&&console.debug("getActiveTextEditor: editor is undefined"),e}getTextEditor(e){for(let[r,n]of this.editorMap)if(r.id===e.id)return n}getTextDocument(e){for(let[r,n]of this.documentMap)if(r.id===e.id)return n}get visibleTextEditors(){return Array.from(this.editorMap.values())}get visibleNotebookEditors(){return[]}getEditableTextEditor(e){return e}async findInDocument(e,r){throw Error("findInDocument Not implemented")}async findInWorkspace(e){throw Error("findInWorkspace Not implemented")}async openTextDocument(e){throw Error("openTextDocument Not implemented")}async openUntitledTextDocument(e){throw Error("openUntitledTextDocument Not implemented")}async showInputBox(e){throw Error("TextDocumentChangeEvent Not implemented")}async executeCommand(e,...r){throw new Error("executeCommand Method not implemented.")}onDidChangeTextDocument(e){return EF(e)}onDidOpenTextDocument(e,r,n){return RF(e,r,n)}async updateTextEditor(e=!1){let r=await this.client.window,n=await r.buffer,i=await n.lines,o=i;i.length>=30&&(o=i.slice(0,15).concat(["..."]).concat(i.slice(-15))),console.debug(`updateTextEditor(): window:${r.id}, buffer:${n.id}, lines=${JSON.stringify(o)}`);let a,p;e?(a=[],p=[]):(a=await ey(r,this.client),p=await mF(r,this.client,i));let l=this.toNeovimEditor(r,n,i,p,a);return qr().emitEvent("onDidOpenTextDocument",l.document),l}toNeovimEditor(e,r,n,i,o){let a=this.getTextDocument(r),p=this.getTextEditor(e);return a?(console.debug(`toNeovimEditor(): updating document: buffer=${r.id}`),a.update(n)):(console.debug(`toNeovimEditor(): creating new document: buffer=${r.id}`),a=new Wy(DF.parse(`neovim://${r.id}`),"plaintext",1,`
`,n),this.documentMap.set(r,a)),p?(console.debug(`toNeovimEditor(): updating editor: window=${e.id}`),p.updateDocument(i,o,a)):(console.debug(`toNeovimEditor(): creating new editor: window=${e.id}`),p=new iy(TM(),this.client,this,e,a,i,o),this.editorMap.set(e,p)),this.activeBuffer=r,this.activeWindow=e,this.activeTextEditor}handleCommandError(e){SF(this.client,e.message)}disposeOnExit(...e){return this.disposables.push(...e),()=>(0,DC.pull)(this.disposables,...e)}};function $l(){return{dispose(){}}}var jy=class{constructor(e){this.client=e;this.signals={prePhrase:{getVersion:async()=>null}}}async getFocusedElementType(){let e=await this.client.mode;return e.mode==="t"||e.mode==="nt"?"terminal":"textEditor"}};var PX=BigInt(1e9);function IC(t,e=BigInt(1e6)){return Number(t*e/PX)/Number(e)}async function qy(t,e=[],r=[],n,i,o,a,p){let l={documentContents:n.document.getText(),selections:n.selections.map(Wk)};o!=null&&(l.marks=o),p!=null&&(l.metadata=p),e.includes("clipboard")||(l.clipboard=await i.clipboard.readText()),e.includes("visibleRanges")||(l.visibleRanges=n.visibleRanges.map(op));for(let u of ga){let d=t?.get(u),m=`${u}Mark`;d!=null&&!e.includes(m)&&(l[m]=d.map(g=>g.toPlainObject()))}if(r.includes("timeOffsetSeconds")){let u=a?.startTimestamp;if(u==null)throw new Error("No start timestamp provided but time offset was requested");let d=process.hrtime.bigint()-u;l.timeOffsetSeconds=IC(d)}return l}var MX=yr(kp(),1);function FC(t,e,r,n,i,o,a,p){return{commandServerApi:t,ide:i,neovimIDE:n,injectIde:a,scopeProvider:o,takeSnapshot(l,u,d,m,g){return qy(e,l,u,d,m,g,void 0,void 0)},setStoredTarget(l,u,d){e.set(u,d?.map(m=>lF(l,m)))},hatTokenMap:r,runIntegrationTests:p}}async function CC(t,e,r,n){let i={[dT]:async(...o)=>{(await t.mode).mode==="t"&&xF(t);try{await e.updateTextEditor();let p=await r.runCommandSafe(...o),l=Nf(o);if(await n.getFocusedElementType()==="terminal"&&es(l)){let d=p;"fallback"in d&&d.fallback.action==="insert"&&TF(t)}return p}catch(p){if(e.runMode!=="test"){let l=p;console.error(l.stack),e.handleCommandError(l)}throw p}},"cursorless.repeatPreviousCommand":Me,"cursorless.showCheatsheet":Me,"cursorless.internal.updateCheatsheetDefaults":Me,"cursorless.recordTestCase":Me,"cursorless.recordOneTestCaseThenPause":Me,"cursorless.pauseRecording":Me,"cursorless.resumeRecording":Me,"cursorless.takeSnapshot":Me,"cursorless.recordScopeTests.showUnimplementedFacets":Me,"cursorless.recordScopeTests.saveActiveDocument":Me,"cursorless.showQuickPick":Me,"cursorless.showDocumentation":Me,"cursorless.showInstallationDependencies":Me,"cursorless.migrateSnippets":Me,"cursorless.private.logQuickActions":Me,"cursorless.toggleDecorations":Me,"cursorless.recomputeDecorationStyles":Me,"cursorless.showScopeVisualizer":Me,"cursorless.hideScopeVisualizer":Me,"cursorless.analyzeCommandHistory":Me,"cursorless.keyboard.escape":Me,"cursorless.keyboard.targeted.targetHat":Me,"cursorless.keyboard.targeted.targetScope":Me,"cursorless.keyboard.targeted.targetSelection":Me,"cursorless.keyboard.targeted.clearTarget":Me,"cursorless.keyboard.targeted.runActionOnTarget":Me,"cursorless.keyboard.modal.modeOn":Me,"cursorless.keyboard.modal.modeOff":Me,"cursorless.keyboard.modal.modeToggle":Me,"cursorless.keyboard.undoTarget":Me,"cursorless.keyboard.redoTarget":Me,"cursorless.tutorial.start":Me,"cursorless.tutorial.next":Me,"cursorless.tutorial.previous":Me,"cursorless.tutorial.restart":Me,"cursorless.tutorial.resume":Me,"cursorless.tutorial.list":Me,"cursorless.documentationOpened":Me};Object.entries(i).map(([o,a])=>qr().registerCommand(o,a))}async function Me(...t){console.debug(`dummyCommandHandler(): args=${t}`)}async function OC(t){let e=t.nvim,r=new $y(e);await r.init();let n=r.runMode==="production"?r:new Ef(r,new bf,r.runMode==="test",void 0),i=new Uu,o=new jy(e),a=r.runMode==="test"?i:o,{commandApi:p,storedTargets:l,hatTokenMap:u,scopeProvider:d,injectIde:m,runIntegrationTests:g}=await pF({ide:n,commandServerApi:a});await CC(e,r,p,a);let x={testHelpers:r.runMode==="test"?FC(i,l,u,r,n,d,m,g):void 0};qr().registerExtensionApi(fF,x),console.log("activate(): Cursorless extension loaded")}function NC(t){t.setOptions({dev:!1}),t.registerFunction("CursorlessLoadExtension",async()=>await AX(t),{sync:!1})}async function AX(t){console.log("==============================================================================================="),console.log("loadExtension(cursorless-neovim): start"),await OC(t),console.log("loadExtension(cursorless-neovim): done")}
/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)

itertools/dist/index.js:
  (* istanbul ignore else -- @preserve *)
  (* istanbul ignore if -- @preserve *)

chai/chai.js:
  (*!
   * Chai - flag utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - test utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - expectTypes utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getActual utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - message composition utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - transferFlags utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * http://chaijs.com
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - isProxyEnabled helper
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addLengthGuard utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getProperties utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - proxify utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addChainingMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteChainableMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - compareByInspect utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getOwnEnumerablePropertySymbols utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getOwnEnumerableProperties utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - isNaN utility
   * Copyright(c) 2012-2015 Sakthipriyan Vairamani <thechargingvolcano@gmail.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*! Bundled license information:
  
  deep-eql/index.js:
    (*!
     * deep-eql
     * Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>
     * MIT Licensed
     *)
    (*!
     * Check to see if the MemoizeMap has recorded a result of the two operands
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {MemoizeMap} memoizeMap
     * @returns {Boolean|null} result
    *)
    (*!
     * Set the result of the equality into the MemoizeMap
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {MemoizeMap} memoizeMap
     * @param {Boolean} result
    *)
    (*!
     * Primary Export
     *)
    (*!
     * The main logic of the `deepEqual` function.
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Object} [options] (optional) Additional options
     * @param {Array} [options.comparator] (optional) Override default algorithm, determining custom equality.
     * @param {Array} [options.memoize] (optional) Provide a custom memoization object which will cache the results of
        complex objects for a speed boost. By passing `false` you can disable memoization, but this will cause circular
        references to blow the stack.
     * @return {Boolean} equal match
    *)
    (*!
     * Compare two Regular Expressions for equality.
     *
     * @param {RegExp} leftHandOperand
     * @param {RegExp} rightHandOperand
     * @return {Boolean} result
     *)
    (*!
     * Compare two Sets/Maps for equality. Faster than other equality functions.
     *
     * @param {Set} leftHandOperand
     * @param {Set} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Simple equality for flat iterable objects such as Arrays, TypedArrays or Node.js buffers.
     *
     * @param {Iterable} leftHandOperand
     * @param {Iterable} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Simple equality for generator objects such as those returned by generator functions.
     *
     * @param {Iterable} leftHandOperand
     * @param {Iterable} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Determine if the given object has an @@iterator function.
     *
     * @param {Object} target
     * @return {Boolean} `true` if the object has an @@iterator function.
     *)
    (*!
     * Gets all iterator entries from the given Object. If the Object has no @@iterator function, returns an empty array.
     * This will consume the iterator - which could have side effects depending on the @@iterator implementation.
     *
     * @param {Object} target
     * @returns {Array} an array of entries from the @@iterator function
     *)
    (*!
     * Gets all entries from a Generator. This will consume the generator - which could have side effects.
     *
     * @param {Generator} target
     * @returns {Array} an array of entries from the Generator.
     *)
    (*!
     * Gets all own and inherited enumerable keys from a target.
     *
     * @param {Object} target
     * @returns {Array} an array of own and inherited enumerable keys from the target.
     *)
    (*!
     * Determines if two objects have matching values, given a set of keys. Defers to deepEqual for the equality check of
     * each key. If any value of the given key is not equal, the function will return false (early).
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Array} keys An array of keys to compare the values of leftHandOperand and rightHandOperand against
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Recursively check the equality of two Objects. Once basic sameness has been established it will defer to `deepEqual`
     * for each enumerable key in the object.
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Returns true if the argument is a primitive.
     *
     * This intentionally returns true for all objects that can be compared by reference,
     * including functions and symbols.
     *
     * @param {Mixed} value
     * @return {Boolean} result
     *)
  *)
*/
