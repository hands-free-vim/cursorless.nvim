"use strict";var lV=Object.create;var hp=Object.defineProperty;var uV=Object.getOwnPropertyDescriptor;var pV=Object.getOwnPropertyNames;var fV=Object.getPrototypeOf,dV=Object.prototype.hasOwnProperty;var at=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),mV=(t,e)=>{for(var r in e)hp(t,r,{get:e[r],enumerable:!0})},oE=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of pV(e))!dV.call(t,i)&&i!==r&&hp(t,i,{get:()=>e[i],enumerable:!(n=uV(e,i))||n.enumerable});return t};var dr=(t,e,r)=>(r=t!=null?lV(fV(t)):{},oE(e||!t||!t.__esModule?hp(r,"default",{value:t,enumerable:!0}):r,t)),hV=t=>oE(hp({},"__esModule",{value:!0}),t);var ET=at(_T=>{"use strict";Object.defineProperty(_T,"__esModule",{value:!0});_T.default=WK;var BK=VK(require("crypto"));function VK(t){return t&&t.__esModule?t:{default:t}}var Pf=new Uint8Array(256),Mf=Pf.length;function WK(){return Mf>Pf.length-16&&(BK.default.randomFillSync(Pf),Mf=0),Pf.slice(Mf,Mf+=16)}});var Zk=at(Af=>{"use strict";Object.defineProperty(Af,"__esModule",{value:!0});Af.default=void 0;var HK=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;Af.default=HK});var rl=at(Df=>{"use strict";Object.defineProperty(Df,"__esModule",{value:!0});Df.default=void 0;var $K=jK(Zk());function jK(t){return t&&t.__esModule?t:{default:t}}function qK(t){return typeof t=="string"&&$K.default.test(t)}var zK=qK;Df.default=zK});var il=at(nl=>{"use strict";Object.defineProperty(nl,"__esModule",{value:!0});nl.default=void 0;nl.unsafeStringify=Yk;var GK=KK(rl());function KK(t){return t&&t.__esModule?t:{default:t}}var Ft=[];for(let t=0;t<256;++t)Ft.push((t+256).toString(16).slice(1));function Yk(t,e=0){return Ft[t[e+0]]+Ft[t[e+1]]+Ft[t[e+2]]+Ft[t[e+3]]+"-"+Ft[t[e+4]]+Ft[t[e+5]]+"-"+Ft[t[e+6]]+Ft[t[e+7]]+"-"+Ft[t[e+8]]+Ft[t[e+9]]+"-"+Ft[t[e+10]]+Ft[t[e+11]]+Ft[t[e+12]]+Ft[t[e+13]]+Ft[t[e+14]]+Ft[t[e+15]]}function QK(t,e=0){let r=Yk(t,e);if(!(0,GK.default)(r))throw TypeError("Stringified UUID is invalid");return r}var ZK=QK;nl.default=ZK});var Jk=at(If=>{"use strict";Object.defineProperty(If,"__esModule",{value:!0});If.default=void 0;var YK=JK(ET()),XK=il();function JK(t){return t&&t.__esModule?t:{default:t}}var Xk,RT,kT=0,MT=0;function e4(t,e,r){let n=e&&r||0,i=e||new Array(16);t=t||{};let o=t.node||Xk,s=t.clockseq!==void 0?t.clockseq:RT;if(o==null||s==null){let g=t.random||(t.rng||YK.default)();o==null&&(o=Xk=[g[0]|1,g[1],g[2],g[3],g[4],g[5]]),s==null&&(s=RT=(g[6]<<8|g[7])&16383)}let l=t.msecs!==void 0?t.msecs:Date.now(),u=t.nsecs!==void 0?t.nsecs:MT+1,f=l-kT+(u-MT)/1e4;if(f<0&&t.clockseq===void 0&&(s=s+1&16383),(f<0||l>kT)&&t.nsecs===void 0&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");kT=l,MT=u,RT=s,l+=122192928e5;let d=((l&268435455)*1e4+u)%4294967296;i[n++]=d>>>24&255,i[n++]=d>>>16&255,i[n++]=d>>>8&255,i[n++]=d&255;let h=l/4294967296*1e4&268435455;i[n++]=h>>>8&255,i[n++]=h&255,i[n++]=h>>>24&15|16,i[n++]=h>>>16&255,i[n++]=s>>>8|128,i[n++]=s&255;for(let g=0;g<6;++g)i[n+g]=o[g];return e||(0,XK.unsafeStringify)(i)}var t4=e4;If.default=t4});var PT=at(Ff=>{"use strict";Object.defineProperty(Ff,"__esModule",{value:!0});Ff.default=void 0;var r4=n4(rl());function n4(t){return t&&t.__esModule?t:{default:t}}function i4(t){if(!(0,r4.default)(t))throw TypeError("Invalid UUID");let e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}var o4=i4;Ff.default=o4});var AT=at(jo=>{"use strict";Object.defineProperty(jo,"__esModule",{value:!0});jo.URL=jo.DNS=void 0;jo.default=u4;var a4=il(),s4=c4(PT());function c4(t){return t&&t.__esModule?t:{default:t}}function l4(t){t=unescape(encodeURIComponent(t));let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}var eM="6ba7b810-9dad-11d1-80b4-00c04fd430c8";jo.DNS=eM;var tM="6ba7b811-9dad-11d1-80b4-00c04fd430c8";jo.URL=tM;function u4(t,e,r){function n(i,o,s,l){var u;if(typeof i=="string"&&(i=l4(i)),typeof o=="string"&&(o=(0,s4.default)(o)),((u=o)===null||u===void 0?void 0:u.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let f=new Uint8Array(16+i.length);if(f.set(o),f.set(i,o.length),f=r(f),f[6]=f[6]&15|e,f[8]=f[8]&63|128,s){l=l||0;for(let d=0;d<16;++d)s[l+d]=f[d];return s}return(0,a4.unsafeStringify)(f)}try{n.name=t}catch{}return n.DNS=eM,n.URL=tM,n}});var rM=at(Cf=>{"use strict";Object.defineProperty(Cf,"__esModule",{value:!0});Cf.default=void 0;var p4=f4(require("crypto"));function f4(t){return t&&t.__esModule?t:{default:t}}function d4(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),p4.default.createHash("md5").update(t).digest()}var m4=d4;Cf.default=m4});var iM=at(Nf=>{"use strict";Object.defineProperty(Nf,"__esModule",{value:!0});Nf.default=void 0;var h4=nM(AT()),g4=nM(rM());function nM(t){return t&&t.__esModule?t:{default:t}}var y4=(0,h4.default)("v3",48,g4.default),x4=y4;Nf.default=x4});var oM=at(Of=>{"use strict";Object.defineProperty(Of,"__esModule",{value:!0});Of.default=void 0;var T4=S4(require("crypto"));function S4(t){return t&&t.__esModule?t:{default:t}}var v4={randomUUID:T4.default.randomUUID};Of.default=v4});var cM=at(Lf=>{"use strict";Object.defineProperty(Lf,"__esModule",{value:!0});Lf.default=void 0;var aM=sM(oM()),b4=sM(ET()),w4=il();function sM(t){return t&&t.__esModule?t:{default:t}}function _4(t,e,r){if(aM.default.randomUUID&&!e&&!t)return aM.default.randomUUID();t=t||{};let n=t.random||(t.rng||b4.default)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return(0,w4.unsafeStringify)(n)}var E4=_4;Lf.default=E4});var lM=at(Uf=>{"use strict";Object.defineProperty(Uf,"__esModule",{value:!0});Uf.default=void 0;var R4=k4(require("crypto"));function k4(t){return t&&t.__esModule?t:{default:t}}function M4(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),R4.default.createHash("sha1").update(t).digest()}var P4=M4;Uf.default=P4});var pM=at(Bf=>{"use strict";Object.defineProperty(Bf,"__esModule",{value:!0});Bf.default=void 0;var A4=uM(AT()),D4=uM(lM());function uM(t){return t&&t.__esModule?t:{default:t}}var I4=(0,A4.default)("v5",80,D4.default),F4=I4;Bf.default=F4});var fM=at(Vf=>{"use strict";Object.defineProperty(Vf,"__esModule",{value:!0});Vf.default=void 0;var C4="00000000-0000-0000-0000-000000000000";Vf.default=C4});var dM=at(Wf=>{"use strict";Object.defineProperty(Wf,"__esModule",{value:!0});Wf.default=void 0;var N4=O4(rl());function O4(t){return t&&t.__esModule?t:{default:t}}function L4(t){if(!(0,N4.default)(t))throw TypeError("Invalid UUID");return parseInt(t.slice(14,15),16)}var U4=L4;Wf.default=U4});var mM=at(En=>{"use strict";Object.defineProperty(En,"__esModule",{value:!0});Object.defineProperty(En,"NIL",{enumerable:!0,get:function(){return $4.default}});Object.defineProperty(En,"parse",{enumerable:!0,get:function(){return G4.default}});Object.defineProperty(En,"stringify",{enumerable:!0,get:function(){return z4.default}});Object.defineProperty(En,"v1",{enumerable:!0,get:function(){return B4.default}});Object.defineProperty(En,"v3",{enumerable:!0,get:function(){return V4.default}});Object.defineProperty(En,"v4",{enumerable:!0,get:function(){return W4.default}});Object.defineProperty(En,"v5",{enumerable:!0,get:function(){return H4.default}});Object.defineProperty(En,"validate",{enumerable:!0,get:function(){return q4.default}});Object.defineProperty(En,"version",{enumerable:!0,get:function(){return j4.default}});var B4=bi(Jk()),V4=bi(iM()),W4=bi(cM()),H4=bi(pM()),$4=bi(fM()),j4=bi(dM()),q4=bi(rl()),z4=bi(il()),G4=bi(PT());function bi(t){return t&&t.__esModule?t:{default:t}}});var xM=at((yM,$f)=>{(function(t,e){typeof $f=="object"&&$f.exports?$f.exports=e():t.nearley=e()})(yM,function(){function t(u,f,d){return this.id=++t.highestId,this.name=u,this.symbols=f,this.postprocess=d,this}t.highestId=0,t.prototype.toString=function(u){var f=typeof u>"u"?this.symbols.map(l).join(" "):this.symbols.slice(0,u).map(l).join(" ")+" \u25CF "+this.symbols.slice(u).map(l).join(" ");return this.name+" \u2192 "+f};function e(u,f,d,h){this.rule=u,this.dot=f,this.reference=d,this.data=[],this.wantedBy=h,this.isComplete=this.dot===u.symbols.length}e.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},e.prototype.nextState=function(u){var f=new e(this.rule,this.dot+1,this.reference,this.wantedBy);return f.left=this,f.right=u,f.isComplete&&(f.data=f.build(),f.right=void 0),f},e.prototype.build=function(){var u=[],f=this;do u.push(f.right.data),f=f.left;while(f.left);return u.reverse(),u},e.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,o.fail))};function r(u,f){this.grammar=u,this.index=f,this.states=[],this.wants={},this.scannable=[],this.completed={}}r.prototype.process=function(u){for(var f=this.states,d=this.wants,h=this.completed,g=0;g<f.length;g++){var x=f[g];if(x.isComplete){if(x.finish(),x.data!==o.fail){for(var v=x.wantedBy,w=v.length;w--;){var N=v[w];this.complete(N,x)}if(x.reference===this.index){var A=x.rule.name;(this.completed[A]=this.completed[A]||[]).push(x)}}}else{var A=x.rule.symbols[x.dot];if(typeof A!="string"){this.scannable.push(x);continue}if(d[A]){if(d[A].push(x),h.hasOwnProperty(A))for(var U=h[A],w=0;w<U.length;w++){var Z=U[w];this.complete(x,Z)}}else d[A]=[x],this.predict(A)}}},r.prototype.predict=function(u){for(var f=this.grammar.byName[u]||[],d=0;d<f.length;d++){var h=f[d],g=this.wants[u],x=new e(h,0,this.index,g);this.states.push(x)}},r.prototype.complete=function(u,f){var d=u.nextState(f);this.states.push(d)};function n(u,f){this.rules=u,this.start=f||this.rules[0].name;var d=this.byName={};this.rules.forEach(function(h){d.hasOwnProperty(h.name)||(d[h.name]=[]),d[h.name].push(h)})}n.fromCompiled=function(h,f){var d=h.Lexer;h.ParserStart&&(f=h.ParserStart,h=h.ParserRules);var h=h.map(function(x){return new t(x.name,x.symbols,x.postprocess)}),g=new n(h,f);return g.lexer=d,g};function i(){this.reset("")}i.prototype.reset=function(u,f){this.buffer=u,this.index=0,this.line=f?f.line:1,this.lastLineBreak=f?-f.col:0},i.prototype.next=function(){if(this.index<this.buffer.length){var u=this.buffer[this.index++];return u===`
`&&(this.line+=1,this.lastLineBreak=this.index),{value:u}}},i.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},i.prototype.formatError=function(u,f){var d=this.buffer;if(typeof d=="string"){var h=d.split(`
`).slice(Math.max(0,this.line-5),this.line),g=d.indexOf(`
`,this.index);g===-1&&(g=d.length);var x=this.index-this.lastLineBreak,v=String(this.line).length;return f+=" at line "+this.line+" col "+x+`:

`,f+=h.map(function(N,A){return w(this.line-h.length+A+1,v)+" "+N},this).join(`
`),f+=`
`+w("",v+x)+`^
`,f}else return f+" at index "+(this.index-1);function w(N,A){var U=String(N);return Array(A-U.length+1).join(" ")+U}};function o(u,f,d){if(u instanceof n)var h=u,d=f;else var h=n.fromCompiled(u,f);this.grammar=h,this.options={keepHistory:!1,lexer:h.lexer||new i};for(var g in d||{})this.options[g]=d[g];this.lexer=this.options.lexer,this.lexerState=void 0;var x=new r(h,0),v=this.table=[x];x.wants[h.start]=[],x.predict(h.start),x.process(),this.current=0}o.fail={},o.prototype.feed=function(u){var f=this.lexer;f.reset(u,this.lexerState);for(var d;;){try{if(d=f.next(),!d)break}catch(de){var v=new r(this.grammar,this.current+1);this.table.push(v);var h=new Error(this.reportLexerError(de));throw h.offset=this.current,h.token=de.token,h}var g=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var x=this.current+1,v=new r(this.grammar,x);this.table.push(v);for(var w=d.text!==void 0?d.text:d.value,N=f.constructor===i?d.value:f.transform?.(d)??d,A=g.scannable,U=A.length;U--;){var Z=A[U],ne=Z.rule.symbols[Z.dot];if(ne.test?ne.test(N):ne.type?ne.type===d.type:ne.literal===w){var he=Z.nextState({data:N,token:d,isToken:!0,reference:x-1});v.states.push(he)}}if(v.process(),v.states.length===0){var h=new Error(this.reportError(d));throw h.offset=this.current,h.token=d,h}this.options.keepHistory&&(g.lexerState=f.save()),this.current++}return g&&(this.lexerState=f.save()),this.results=this.finish(),this},o.prototype.reportLexerError=function(u){var f,d,h=u.token;return h?(f="input "+JSON.stringify(h.text[0])+" (lexer error)",d=this.lexer.formatError(h,"Syntax error")):(f="input (lexer error)",d=u.message),this.reportErrorCommon(d,f)},o.prototype.reportError=function(u){var f=(u.type?u.type+" token: ":"")+JSON.stringify(u.value!==void 0?u.value:u),d=this.lexer.formatError(u,"Syntax error");return this.reportErrorCommon(d,f)},o.prototype.reportErrorCommon=function(u,f){var d=[];d.push(u);var h=this.table.length-2,g=this.table[h],x=g.states.filter(function(w){var N=w.rule.symbols[w.dot];return N&&typeof N!="string"});if(x.length===0)d.push("Unexpected "+f+`. I did not expect any more input. Here is the state of my parse table:
`),this.displayStateStack(g.states,d);else{d.push("Unexpected "+f+`. Instead, I was expecting to see one of the following:
`);var v=x.map(function(w){return this.buildFirstStateStack(w,[])||[w]},this);v.forEach(function(w){var N=w[0],A=N.rule.symbols[N.dot],U=this.getSymbolDisplay(A);d.push("A "+U+" based on:"),this.displayStateStack(w,d)},this)}return d.push(""),d.join(`
`)},o.prototype.displayStateStack=function(u,f){for(var d,h=0,g=0;g<u.length;g++){var x=u[g],v=x.rule.toString(x.dot);v===d?h++:(h>0&&f.push("    ^ "+h+" more lines identical to this"),h=0,f.push("    "+v)),d=v}},o.prototype.getSymbolDisplay=function(u){return s(u)},o.prototype.buildFirstStateStack=function(u,f){if(f.indexOf(u)!==-1)return null;if(u.wantedBy.length===0)return[u];var d=u.wantedBy[0],h=[u].concat(f),g=this.buildFirstStateStack(d,h);return g===null?null:[u].concat(g)},o.prototype.save=function(){var u=this.table[this.current];return u.lexerState=this.lexerState,u},o.prototype.restore=function(u){var f=u.index;this.current=f,this.table[f]=u,this.table.splice(f+1),this.lexerState=u.lexerState,this.results=this.finish()},o.prototype.rewind=function(u){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[u])},o.prototype.finish=function(){var u=[],f=this.grammar.start,d=this.table[this.table.length-1];return d.states.forEach(function(h){h.rule.name===f&&h.dot===h.rule.symbols.length&&h.reference===0&&h.data!==o.fail&&u.push(h)}),u.map(function(h){return h.data})};function s(u){var f=typeof u;if(f==="string")return u;if(f==="object"){if(u.literal)return JSON.stringify(u.literal);if(u instanceof RegExp)return"character matching "+u;if(u.type)return u.type+" token";if(u.test)return"token matching "+String(u.test);throw new Error("Unknown symbol type: "+u)}}function l(u){var f=typeof u;if(f==="string")return u;if(f==="object"){if(u.literal)return JSON.stringify(u.literal);if(u instanceof RegExp)return u.toString();if(u.type)return"%"+u.type;if(u.test)return"<"+String(u.test)+">";throw new Error("Unknown symbol type: "+u)}}return{Parser:o,Grammar:n,Rule:t}})});var _M=at((wM,zf)=>{(function(t,e){typeof define=="function"&&define.amd?define([],e):typeof zf=="object"&&zf.exports?zf.exports=e():t.moo=e()})(wM,function(){"use strict";var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,r=typeof new RegExp().sticky=="boolean";function n(O){return O&&e.call(O)==="[object RegExp]"}function i(O){return O&&typeof O=="object"&&!n(O)&&!Array.isArray(O)}function o(O){return O.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function s(O){var C=new RegExp("|"+O);return C.exec("").length-1}function l(O){return"("+O+")"}function u(O){if(!O.length)return"(?!)";var C=O.map(function(D){return"(?:"+D+")"}).join("|");return"(?:"+C+")"}function f(O){if(typeof O=="string")return"(?:"+o(O)+")";if(n(O)){if(O.ignoreCase)throw new Error("RegExp /i flag not allowed");if(O.global)throw new Error("RegExp /g flag is implied");if(O.sticky)throw new Error("RegExp /y flag is implied");if(O.multiline)throw new Error("RegExp /m flag is implied");return O.source}else throw new Error("Not a pattern: "+O)}function d(O,C){return O.length>C?O:Array(C-O.length+1).join(" ")+O}function h(O,C){for(var D=O.length,$=0;;){var q=O.lastIndexOf(`
`,D-1);if(q===-1||($++,D=q,$===C)||D===0)break}var K=$<C?0:D+1;return O.substring(K).split(`
`)}function g(O){for(var C=Object.getOwnPropertyNames(O),D=[],$=0;$<C.length;$++){var q=C[$],K=O[q],Q=[].concat(K);if(q==="include"){for(var te=0;te<Q.length;te++)D.push({include:Q[te]});continue}var me=[];Q.forEach(function(re){i(re)?(me.length&&D.push(v(q,me)),D.push(v(q,re)),me=[]):me.push(re)}),me.length&&D.push(v(q,me))}return D}function x(O){for(var C=[],D=0;D<O.length;D++){var $=O[D];if($.include){for(var q=[].concat($.include),K=0;K<q.length;K++)C.push({include:q[K]});continue}if(!$.type)throw new Error("Rule has no type: "+JSON.stringify($));C.push(v($.type,$))}return C}function v(O,C){if(i(C)||(C={match:C}),C.include)throw new Error("Matching rules cannot also include states");var D={defaultType:O,lineBreaks:!!C.error||!!C.fallback,pop:!1,next:null,push:null,error:!1,fallback:!1,value:null,type:null,shouldThrow:!1};for(var $ in C)t.call(C,$)&&(D[$]=C[$]);if(typeof D.type=="string"&&O!==D.type)throw new Error("Type transform cannot be a string (type '"+D.type+"' for token '"+O+"')");var q=D.match;return D.match=Array.isArray(q)?q:q?[q]:[],D.match.sort(function(K,Q){return n(K)&&n(Q)?0:n(Q)?-1:n(K)?1:Q.length-K.length}),D}function w(O){return Array.isArray(O)?x(O):g(O)}var N=v("error",{lineBreaks:!0,shouldThrow:!0});function A(O,C){for(var D=null,$=Object.create(null),q=!0,K=null,Q=[],te=[],me=0;me<O.length;me++)O[me].fallback&&(q=!1);for(var me=0;me<O.length;me++){var re=O[me];if(re.include)throw new Error("Inheritance is not allowed in stateless lexers");if(re.error||re.fallback){if(D)throw!re.fallback==!D.fallback?new Error("Multiple "+(re.fallback?"fallback":"error")+" rules not allowed (for token '"+re.defaultType+"')"):new Error("fallback and error are mutually exclusive (for token '"+re.defaultType+"')");D=re}var Re=re.match.slice();if(q)for(;Re.length&&typeof Re[0]=="string"&&Re[0].length===1;){var sr=Re.shift();$[sr.charCodeAt(0)]=re}if(re.pop||re.push||re.next){if(!C)throw new Error("State-switching options are not allowed in stateless lexers (for token '"+re.defaultType+"')");if(re.fallback)throw new Error("State-switching options are not allowed on fallback tokens (for token '"+re.defaultType+"')")}if(Re.length!==0){q=!1,Q.push(re);for(var ii=0;ii<Re.length;ii++){var cr=Re[ii];if(n(cr)){if(K===null)K=cr.unicode;else if(K!==cr.unicode&&re.fallback===!1)throw new Error("If one rule is /u then all must be")}}var hn=u(Re.map(f)),Er=new RegExp(hn);if(Er.test(""))throw new Error("RegExp matches empty string: "+Er);var gn=s(hn);if(gn>0)throw new Error("RegExp has capture groups: "+Er+`
Use (?: \u2026 ) instead`);if(!re.lineBreaks&&Er.test(`
`))throw new Error("Rule should declare lineBreaks: "+Er);te.push(l(hn))}}var jr=D&&D.fallback,bo=r&&!jr?"ym":"gm",oi=r||jr?"":"|";K===!0&&(bo+="u");var ga=new RegExp(u(te)+oi,bo);return{regexp:ga,groups:Q,fast:$,error:D||N}}function U(O){var C=A(w(O));return new de({start:C},"start")}function Z(O,C,D){var $=O&&(O.push||O.next);if($&&!D[$])throw new Error("Missing state '"+$+"' (in token '"+O.defaultType+"' of state '"+C+"')");if(O&&O.pop&&+O.pop!=1)throw new Error("pop must be 1 (in token '"+O.defaultType+"' of state '"+C+"')")}function ne(O,C){var D=O.$all?w(O.$all):[];delete O.$all;var $=Object.getOwnPropertyNames(O);C||(C=$[0]);for(var q=Object.create(null),K=0;K<$.length;K++){var Q=$[K];q[Q]=w(O[Q]).concat(D)}for(var K=0;K<$.length;K++)for(var Q=$[K],te=q[Q],me=Object.create(null),re=0;re<te.length;re++){var Re=te[re];if(Re.include){var sr=[re,1];if(Re.include!==Q&&!me[Re.include]){me[Re.include]=!0;var ii=q[Re.include];if(!ii)throw new Error("Cannot include nonexistent state '"+Re.include+"' (in state '"+Q+"')");for(var cr=0;cr<ii.length;cr++){var hn=ii[cr];te.indexOf(hn)===-1&&sr.push(hn)}}te.splice.apply(te,sr),re--}}for(var Er=Object.create(null),K=0;K<$.length;K++){var Q=$[K];Er[Q]=A(q[Q],!0)}for(var K=0;K<$.length;K++){for(var gn=$[K],jr=Er[gn],bo=jr.groups,re=0;re<bo.length;re++)Z(bo[re],gn,Er);for(var oi=Object.getOwnPropertyNames(jr.fast),re=0;re<oi.length;re++)Z(jr.fast[oi[re]],gn,Er)}return new de(Er,C)}function he(O){for(var C=typeof Map<"u",D=C?new Map:Object.create(null),$=Object.getOwnPropertyNames(O),q=0;q<$.length;q++){var K=$[q],Q=O[K],te=Array.isArray(Q)?Q:[Q];te.forEach(function(me){if(typeof me!="string")throw new Error("keyword must be string (in keyword '"+K+"')");C?D.set(me,K):D[me]=K})}return function(me){return C?D.get(me):D[me]}}var de=function(O,C){this.startState=C,this.states=O,this.buffer="",this.stack=[],this.reset()};de.prototype.reset=function(O,C){return this.buffer=O||"",this.index=0,this.line=C?C.line:1,this.col=C?C.col:1,this.queuedToken=C?C.queuedToken:null,this.queuedText=C?C.queuedText:"",this.queuedThrow=C?C.queuedThrow:null,this.setState(C?C.state:this.startState),this.stack=C&&C.stack?C.stack.slice():[],this},de.prototype.save=function(){return{line:this.line,col:this.col,state:this.state,stack:this.stack.slice(),queuedToken:this.queuedToken,queuedText:this.queuedText,queuedThrow:this.queuedThrow}},de.prototype.setState=function(O){if(!(!O||this.state===O)){this.state=O;var C=this.states[O];this.groups=C.groups,this.error=C.error,this.re=C.regexp,this.fast=C.fast}},de.prototype.popState=function(){this.setState(this.stack.pop())},de.prototype.pushState=function(O){this.stack.push(this.state),this.setState(O)};var dt=r?function(O,C){return O.exec(C)}:function(O,C){var D=O.exec(C);return D[0].length===0?null:D};de.prototype._getGroup=function(O){for(var C=this.groups.length,D=0;D<C;D++)if(O[D+1]!==void 0)return this.groups[D];throw new Error("Cannot find token type for matched text")};function At(){return this.value}if(de.prototype.next=function(){var O=this.index;if(this.queuedGroup){var C=this._token(this.queuedGroup,this.queuedText,O);return this.queuedGroup=null,this.queuedText="",C}var D=this.buffer;if(O!==D.length){var Q=this.fast[D.charCodeAt(O)];if(Q)return this._token(Q,D.charAt(O),O);var $=this.re;$.lastIndex=O;var q=dt($,D),K=this.error;if(q==null)return this._token(K,D.slice(O,D.length),O);var Q=this._getGroup(q),te=q[0];return K.fallback&&q.index!==O?(this.queuedGroup=Q,this.queuedText=te,this._token(K,D.slice(O,q.index),O)):this._token(Q,te,O)}},de.prototype._token=function(O,C,D){var $=0;if(O.lineBreaks){var q=/\n/g,K=1;if(C===`
`)$=1;else for(;q.exec(C);)$++,K=q.lastIndex}var Q={type:typeof O.type=="function"&&O.type(C)||O.defaultType,value:typeof O.value=="function"?O.value(C):C,text:C,toString:At,offset:D,lineBreaks:$,line:this.line,col:this.col},te=C.length;if(this.index+=te,this.line+=$,$!==0?this.col=te-K+1:this.col+=te,O.shouldThrow){var me=new Error(this.formatError(Q,"invalid syntax"));throw me}return O.pop?this.popState():O.push?this.pushState(O.push):O.next&&this.setState(O.next),Q},typeof Symbol<"u"&&Symbol.iterator){var it=function(O){this.lexer=O};it.prototype.next=function(){var O=this.lexer.next();return{value:O,done:!O}},it.prototype[Symbol.iterator]=function(){return this},de.prototype[Symbol.iterator]=function(){return new it(this)}}return de.prototype.formatError=function(O,C){if(O==null)var D=this.buffer.slice(this.index),O={text:D,offset:this.index,lineBreaks:D.indexOf(`
`)===-1?0:1,line:this.line,col:this.col};var $=2,q=Math.max(O.line-$,1),K=O.line+$,Q=String(K).length,te=h(this.buffer,this.line-O.line+$+1).slice(0,5),me=[];me.push(C+" at line "+O.line+" col "+O.col+":"),me.push("");for(var re=0;re<te.length;re++){var Re=te[re],sr=q+re;me.push(d(String(sr),Q)+"  "+Re),sr===O.line&&me.push(d("",Q+O.col+1)+"^")}return me.join(`
`)},de.prototype.clone=function(){return new de(this.states,this.state)},de.prototype.has=function(O){return!0},{compile:U,states:ne,error:Object.freeze({error:!0}),fallback:Object.freeze({fallback:!0}),keywords:he}})});var pl=at((Gn,hP)=>{"use strict";Object.defineProperty(Gn,"__esModule",{value:!0});function kn(t){return typeof t=="object"&&!("toString"in t)?Object.prototype.toString.call(t).slice(8,-1):t}var l5=typeof process=="object"&&process.env.NODE_ENV==="production";function an(t,e){if(!t)throw l5?new Error("Invariant failed"):new Error(e())}Gn.invariant=an;var YT=Object.prototype.hasOwnProperty,u5=Array.prototype.splice,p5=Object.prototype.toString;function zo(t){return p5.call(t).slice(8,-1)}var _d=Object.assign||function(t,e){return XT(e).forEach(function(r){YT.call(e,r)&&(t[r]=e[r])}),t},XT=typeof Object.getOwnPropertySymbols=="function"?function(t){return Object.keys(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.keys(t)};function co(t){return Array.isArray(t)?_d(t.constructor(t.length),t):zo(t)==="Map"?new Map(t):zo(t)==="Set"?new Set(t):t&&typeof t=="object"?_d(Object.create(Object.getPrototypeOf(t)),t):t}var dP=function(){function t(){this.commands=_d({},f5),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(e,r){return e===r},this.update.newContext=function(){return new t().update}}return Object.defineProperty(t.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(e){this.update.isEquals=e},enumerable:!0,configurable:!0}),t.prototype.extend=function(e,r){this.commands[e]=r},t.prototype.update=function(e,r){var n=this,i=typeof r=="function"?{$apply:r}:r;Array.isArray(e)&&Array.isArray(i)||an(!Array.isArray(i),function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."}),an(typeof i=="object"&&i!==null,function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the "+("following commands: "+Object.keys(n.commands).join(", ")+".")});var o=e;return XT(i).forEach(function(s){if(YT.call(n.commands,s)){var l=e===o;o=n.commands[s](i[s],o,i,e),l&&n.isEquals(o,e)&&(o=e)}else{var u=zo(e)==="Map"?n.update(e.get(s),i[s]):n.update(e[s],i[s]),f=zo(o)==="Map"?o.get(s):o[s];(!n.isEquals(u,f)||typeof u>"u"&&!YT.call(e,s))&&(o===e&&(o=co(e)),zo(o)==="Map"?o.set(s,u):o[s]=u)}}),o},t}();Gn.Context=dP;var f5={$push:function(t,e,r){return pP(e,r,"$push"),t.length?e.concat(t):e},$unshift:function(t,e,r){return pP(e,r,"$unshift"),t.length?t.concat(e):e},$splice:function(t,e,r,n){return d5(e,r),t.forEach(function(i){mP(i),e===n&&i.length&&(e=co(n)),u5.apply(e,i)}),e},$set:function(t,e,r){return h5(r),t},$toggle:function(t,e){ul(t,"$toggle");var r=t.length?co(e):e;return t.forEach(function(n){r[n]=!e[n]}),r},$unset:function(t,e,r,n){return ul(t,"$unset"),t.forEach(function(i){Object.hasOwnProperty.call(e,i)&&(e===n&&(e=co(n)),delete e[i])}),e},$add:function(t,e,r,n){return fP(e,"$add"),ul(t,"$add"),zo(e)==="Map"?t.forEach(function(i){var o=i[0],s=i[1];e===n&&e.get(o)!==s&&(e=co(n)),e.set(o,s)}):t.forEach(function(i){e===n&&!e.has(i)&&(e=co(n)),e.add(i)}),e},$remove:function(t,e,r,n){return fP(e,"$remove"),ul(t,"$remove"),t.forEach(function(i){e===n&&e.has(i)&&(e=co(n)),e.delete(i)}),e},$merge:function(t,e,r,n){return g5(e,t),XT(t).forEach(function(i){t[i]!==e[i]&&(e===n&&(e=co(n)),e[i]=t[i])}),e},$apply:function(t,e){return m5(t),t(e)}},JT=new dP;Gn.isEquals=JT.update.isEquals;Gn.extend=JT.extend;Gn.default=JT.update;Gn.default.default=hP.exports=_d(Gn.default,Gn);function pP(t,e,r){an(Array.isArray(t),function(){return"update(): expected target of "+kn(r)+" to be an array; got "+kn(t)+"."}),ul(e[r],r)}function ul(t,e){an(Array.isArray(t),function(){return"update(): expected spec of "+kn(e)+" to be an array; got "+kn(t)+". Did you forget to wrap your parameter in an array?"})}function d5(t,e){an(Array.isArray(t),function(){return"Expected $splice target to be an array; got "+kn(t)}),mP(e.$splice)}function mP(t){an(Array.isArray(t),function(){return"update(): expected spec of $splice to be an array of arrays; got "+kn(t)+". Did you forget to wrap your parameters in an array?"})}function m5(t){an(typeof t=="function",function(){return"update(): expected spec of $apply to be a function; got "+kn(t)+"."})}function h5(t){an(Object.keys(t).length===1,function(){return"Cannot have more than one key in an object with $set"})}function g5(t,e){an(e&&typeof e=="object",function(){return"update(): $merge expects a spec of type 'object'; got "+kn(e)}),an(t&&typeof t=="object",function(){return"update(): $merge expects a target of type 'object'; got "+kn(t)})}function fP(t,e){var r=zo(t);an(r==="Map"||r==="Set",function(){return"update(): "+kn(e)+" expects a target of type Set or Map; got "+kn(r)})}});var ov=at((zs,Zl)=>{(function(){var t,e="4.17.21",r=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",i="Expected a function",o="Invalid `variable` option passed into `_.template`",s="__lodash_hash_undefined__",l=500,u="__lodash_placeholder__",f=1,d=2,h=4,g=1,x=2,v=1,w=2,N=4,A=8,U=16,Z=32,ne=64,he=128,de=256,dt=512,At=30,it="...",O=800,C=16,D=1,$=2,q=3,K=1/0,Q=9007199254740991,te=17976931348623157e292,me=NaN,re=4294967295,Re=re-1,sr=re>>>1,ii=[["ary",he],["bind",v],["bindKey",w],["curry",A],["curryRight",U],["flip",dt],["partial",Z],["partialRight",ne],["rearg",de]],cr="[object Arguments]",hn="[object Array]",Er="[object AsyncFunction]",gn="[object Boolean]",jr="[object Date]",bo="[object DOMException]",oi="[object Error]",ga="[object Function]",Mb="[object GeneratorFunction]",yn="[object Map]",sc="[object Number]",RF="[object Null]",ai="[object Object]",Pb="[object Promise]",kF="[object Proxy]",cc="[object RegExp]",xn="[object Set]",lc="[object String]",Ru="[object Symbol]",MF="[object Undefined]",uc="[object WeakMap]",PF="[object WeakSet]",pc="[object ArrayBuffer]",ya="[object DataView]",ny="[object Float32Array]",iy="[object Float64Array]",oy="[object Int8Array]",ay="[object Int16Array]",sy="[object Int32Array]",cy="[object Uint8Array]",ly="[object Uint8ClampedArray]",uy="[object Uint16Array]",py="[object Uint32Array]",AF=/\b__p \+= '';/g,DF=/\b(__p \+=) '' \+/g,IF=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ab=/&(?:amp|lt|gt|quot|#39);/g,Db=/[&<>"']/g,FF=RegExp(Ab.source),CF=RegExp(Db.source),NF=/<%-([\s\S]+?)%>/g,OF=/<%([\s\S]+?)%>/g,Ib=/<%=([\s\S]+?)%>/g,LF=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,UF=/^\w*$/,BF=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,fy=/[\\^$.*+?()[\]{}|]/g,VF=RegExp(fy.source),dy=/^\s+/,WF=/\s/,HF=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,$F=/\{\n\/\* \[wrapped with (.+)\] \*/,jF=/,? & /,qF=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,zF=/[()=,{}\[\]\/\s]/,GF=/\\(\\)?/g,KF=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Fb=/\w*$/,QF=/^[-+]0x[0-9a-f]+$/i,ZF=/^0b[01]+$/i,YF=/^\[object .+?Constructor\]$/,XF=/^0o[0-7]+$/i,JF=/^(?:0|[1-9]\d*)$/,eC=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ku=/($^)/,tC=/['\n\r\u2028\u2029\\]/g,Mu="\\ud800-\\udfff",rC="\\u0300-\\u036f",nC="\\ufe20-\\ufe2f",iC="\\u20d0-\\u20ff",Cb=rC+nC+iC,Nb="\\u2700-\\u27bf",Ob="a-z\\xdf-\\xf6\\xf8-\\xff",oC="\\xac\\xb1\\xd7\\xf7",aC="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",sC="\\u2000-\\u206f",cC=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Lb="A-Z\\xc0-\\xd6\\xd8-\\xde",Ub="\\ufe0e\\ufe0f",Bb=oC+aC+sC+cC,my="['\u2019]",lC="["+Mu+"]",Vb="["+Bb+"]",Pu="["+Cb+"]",Wb="\\d+",uC="["+Nb+"]",Hb="["+Ob+"]",$b="[^"+Mu+Bb+Wb+Nb+Ob+Lb+"]",hy="\\ud83c[\\udffb-\\udfff]",pC="(?:"+Pu+"|"+hy+")",jb="[^"+Mu+"]",gy="(?:\\ud83c[\\udde6-\\uddff]){2}",yy="[\\ud800-\\udbff][\\udc00-\\udfff]",xa="["+Lb+"]",qb="\\u200d",zb="(?:"+Hb+"|"+$b+")",fC="(?:"+xa+"|"+$b+")",Gb="(?:"+my+"(?:d|ll|m|re|s|t|ve))?",Kb="(?:"+my+"(?:D|LL|M|RE|S|T|VE))?",Qb=pC+"?",Zb="["+Ub+"]?",dC="(?:"+qb+"(?:"+[jb,gy,yy].join("|")+")"+Zb+Qb+")*",mC="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",hC="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Yb=Zb+Qb+dC,gC="(?:"+[uC,gy,yy].join("|")+")"+Yb,yC="(?:"+[jb+Pu+"?",Pu,gy,yy,lC].join("|")+")",xC=RegExp(my,"g"),TC=RegExp(Pu,"g"),xy=RegExp(hy+"(?="+hy+")|"+yC+Yb,"g"),SC=RegExp([xa+"?"+Hb+"+"+Gb+"(?="+[Vb,xa,"$"].join("|")+")",fC+"+"+Kb+"(?="+[Vb,xa+zb,"$"].join("|")+")",xa+"?"+zb+"+"+Gb,xa+"+"+Kb,hC,mC,Wb,gC].join("|"),"g"),vC=RegExp("["+qb+Mu+Cb+Ub+"]"),bC=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,wC=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],_C=-1,Ze={};Ze[ny]=Ze[iy]=Ze[oy]=Ze[ay]=Ze[sy]=Ze[cy]=Ze[ly]=Ze[uy]=Ze[py]=!0,Ze[cr]=Ze[hn]=Ze[pc]=Ze[gn]=Ze[ya]=Ze[jr]=Ze[oi]=Ze[ga]=Ze[yn]=Ze[sc]=Ze[ai]=Ze[cc]=Ze[xn]=Ze[lc]=Ze[uc]=!1;var Ke={};Ke[cr]=Ke[hn]=Ke[pc]=Ke[ya]=Ke[gn]=Ke[jr]=Ke[ny]=Ke[iy]=Ke[oy]=Ke[ay]=Ke[sy]=Ke[yn]=Ke[sc]=Ke[ai]=Ke[cc]=Ke[xn]=Ke[lc]=Ke[Ru]=Ke[cy]=Ke[ly]=Ke[uy]=Ke[py]=!0,Ke[oi]=Ke[ga]=Ke[uc]=!1;var EC={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},RC={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},kC={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},MC={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},PC=parseFloat,AC=parseInt,Xb=typeof global=="object"&&global&&global.Object===Object&&global,DC=typeof self=="object"&&self&&self.Object===Object&&self,vt=Xb||DC||Function("return this")(),Ty=typeof zs=="object"&&zs&&!zs.nodeType&&zs,wo=Ty&&typeof Zl=="object"&&Zl&&!Zl.nodeType&&Zl,Jb=wo&&wo.exports===Ty,Sy=Jb&&Xb.process,qr=function(){try{var k=wo&&wo.require&&wo.require("util").types;return k||Sy&&Sy.binding&&Sy.binding("util")}catch{}}(),ew=qr&&qr.isArrayBuffer,tw=qr&&qr.isDate,rw=qr&&qr.isMap,nw=qr&&qr.isRegExp,iw=qr&&qr.isSet,ow=qr&&qr.isTypedArray;function Rr(k,B,L){switch(L.length){case 0:return k.call(B);case 1:return k.call(B,L[0]);case 2:return k.call(B,L[0],L[1]);case 3:return k.call(B,L[0],L[1],L[2])}return k.apply(B,L)}function IC(k,B,L,J){for(var ge=-1,Oe=k==null?0:k.length;++ge<Oe;){var gt=k[ge];B(J,gt,L(gt),k)}return J}function zr(k,B){for(var L=-1,J=k==null?0:k.length;++L<J&&B(k[L],L,k)!==!1;);return k}function FC(k,B){for(var L=k==null?0:k.length;L--&&B(k[L],L,k)!==!1;);return k}function aw(k,B){for(var L=-1,J=k==null?0:k.length;++L<J;)if(!B(k[L],L,k))return!1;return!0}function Ni(k,B){for(var L=-1,J=k==null?0:k.length,ge=0,Oe=[];++L<J;){var gt=k[L];B(gt,L,k)&&(Oe[ge++]=gt)}return Oe}function Au(k,B){var L=k==null?0:k.length;return!!L&&Ta(k,B,0)>-1}function vy(k,B,L){for(var J=-1,ge=k==null?0:k.length;++J<ge;)if(L(B,k[J]))return!0;return!1}function Je(k,B){for(var L=-1,J=k==null?0:k.length,ge=Array(J);++L<J;)ge[L]=B(k[L],L,k);return ge}function Oi(k,B){for(var L=-1,J=B.length,ge=k.length;++L<J;)k[ge+L]=B[L];return k}function by(k,B,L,J){var ge=-1,Oe=k==null?0:k.length;for(J&&Oe&&(L=k[++ge]);++ge<Oe;)L=B(L,k[ge],ge,k);return L}function CC(k,B,L,J){var ge=k==null?0:k.length;for(J&&ge&&(L=k[--ge]);ge--;)L=B(L,k[ge],ge,k);return L}function wy(k,B){for(var L=-1,J=k==null?0:k.length;++L<J;)if(B(k[L],L,k))return!0;return!1}var NC=_y("length");function OC(k){return k.split("")}function LC(k){return k.match(qF)||[]}function sw(k,B,L){var J;return L(k,function(ge,Oe,gt){if(B(ge,Oe,gt))return J=Oe,!1}),J}function Du(k,B,L,J){for(var ge=k.length,Oe=L+(J?1:-1);J?Oe--:++Oe<ge;)if(B(k[Oe],Oe,k))return Oe;return-1}function Ta(k,B,L){return B===B?QC(k,B,L):Du(k,cw,L)}function UC(k,B,L,J){for(var ge=L-1,Oe=k.length;++ge<Oe;)if(J(k[ge],B))return ge;return-1}function cw(k){return k!==k}function lw(k,B){var L=k==null?0:k.length;return L?Ry(k,B)/L:me}function _y(k){return function(B){return B==null?t:B[k]}}function Ey(k){return function(B){return k==null?t:k[B]}}function uw(k,B,L,J,ge){return ge(k,function(Oe,gt,ze){L=J?(J=!1,Oe):B(L,Oe,gt,ze)}),L}function BC(k,B){var L=k.length;for(k.sort(B);L--;)k[L]=k[L].value;return k}function Ry(k,B){for(var L,J=-1,ge=k.length;++J<ge;){var Oe=B(k[J]);Oe!==t&&(L=L===t?Oe:L+Oe)}return L}function ky(k,B){for(var L=-1,J=Array(k);++L<k;)J[L]=B(L);return J}function VC(k,B){return Je(B,function(L){return[L,k[L]]})}function pw(k){return k&&k.slice(0,hw(k)+1).replace(dy,"")}function kr(k){return function(B){return k(B)}}function My(k,B){return Je(B,function(L){return k[L]})}function fc(k,B){return k.has(B)}function fw(k,B){for(var L=-1,J=k.length;++L<J&&Ta(B,k[L],0)>-1;);return L}function dw(k,B){for(var L=k.length;L--&&Ta(B,k[L],0)>-1;);return L}function WC(k,B){for(var L=k.length,J=0;L--;)k[L]===B&&++J;return J}var HC=Ey(EC),$C=Ey(RC);function jC(k){return"\\"+MC[k]}function qC(k,B){return k==null?t:k[B]}function Sa(k){return vC.test(k)}function zC(k){return bC.test(k)}function GC(k){for(var B,L=[];!(B=k.next()).done;)L.push(B.value);return L}function Py(k){var B=-1,L=Array(k.size);return k.forEach(function(J,ge){L[++B]=[ge,J]}),L}function mw(k,B){return function(L){return k(B(L))}}function Li(k,B){for(var L=-1,J=k.length,ge=0,Oe=[];++L<J;){var gt=k[L];(gt===B||gt===u)&&(k[L]=u,Oe[ge++]=L)}return Oe}function Iu(k){var B=-1,L=Array(k.size);return k.forEach(function(J){L[++B]=J}),L}function KC(k){var B=-1,L=Array(k.size);return k.forEach(function(J){L[++B]=[J,J]}),L}function QC(k,B,L){for(var J=L-1,ge=k.length;++J<ge;)if(k[J]===B)return J;return-1}function ZC(k,B,L){for(var J=L+1;J--;)if(k[J]===B)return J;return J}function va(k){return Sa(k)?XC(k):NC(k)}function Tn(k){return Sa(k)?JC(k):OC(k)}function hw(k){for(var B=k.length;B--&&WF.test(k.charAt(B)););return B}var YC=Ey(kC);function XC(k){for(var B=xy.lastIndex=0;xy.test(k);)++B;return B}function JC(k){return k.match(xy)||[]}function eN(k){return k.match(SC)||[]}var tN=function k(B){B=B==null?vt:Ui.defaults(vt.Object(),B,Ui.pick(vt,wC));var L=B.Array,J=B.Date,ge=B.Error,Oe=B.Function,gt=B.Math,ze=B.Object,Ay=B.RegExp,rN=B.String,Gr=B.TypeError,Fu=L.prototype,nN=Oe.prototype,ba=ze.prototype,Cu=B["__core-js_shared__"],Nu=nN.toString,$e=ba.hasOwnProperty,iN=0,gw=function(){var a=/[^.]+$/.exec(Cu&&Cu.keys&&Cu.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),Ou=ba.toString,oN=Nu.call(ze),aN=vt._,sN=Ay("^"+Nu.call($e).replace(fy,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Lu=Jb?B.Buffer:t,Bi=B.Symbol,Uu=B.Uint8Array,yw=Lu?Lu.allocUnsafe:t,Bu=mw(ze.getPrototypeOf,ze),xw=ze.create,Tw=ba.propertyIsEnumerable,Vu=Fu.splice,Sw=Bi?Bi.isConcatSpreadable:t,dc=Bi?Bi.iterator:t,_o=Bi?Bi.toStringTag:t,Wu=function(){try{var a=Po(ze,"defineProperty");return a({},"",{}),a}catch{}}(),cN=B.clearTimeout!==vt.clearTimeout&&B.clearTimeout,lN=J&&J.now!==vt.Date.now&&J.now,uN=B.setTimeout!==vt.setTimeout&&B.setTimeout,Hu=gt.ceil,$u=gt.floor,Dy=ze.getOwnPropertySymbols,pN=Lu?Lu.isBuffer:t,vw=B.isFinite,fN=Fu.join,dN=mw(ze.keys,ze),yt=gt.max,Lt=gt.min,mN=J.now,hN=B.parseInt,bw=gt.random,gN=Fu.reverse,Iy=Po(B,"DataView"),mc=Po(B,"Map"),Fy=Po(B,"Promise"),wa=Po(B,"Set"),hc=Po(B,"WeakMap"),gc=Po(ze,"create"),ju=hc&&new hc,_a={},yN=Ao(Iy),xN=Ao(mc),TN=Ao(Fy),SN=Ao(wa),vN=Ao(hc),qu=Bi?Bi.prototype:t,yc=qu?qu.valueOf:t,ww=qu?qu.toString:t;function T(a){if(ot(a)&&!xe(a)&&!(a instanceof Ae)){if(a instanceof Kr)return a;if($e.call(a,"__wrapped__"))return __(a)}return new Kr(a)}var Ea=function(){function a(){}return function(c){if(!tt(c))return{};if(xw)return xw(c);a.prototype=c;var p=new a;return a.prototype=t,p}}();function zu(){}function Kr(a,c){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=t}T.templateSettings={escape:NF,evaluate:OF,interpolate:Ib,variable:"",imports:{_:T}},T.prototype=zu.prototype,T.prototype.constructor=T,Kr.prototype=Ea(zu.prototype),Kr.prototype.constructor=Kr;function Ae(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=re,this.__views__=[]}function bN(){var a=new Ae(this.__wrapped__);return a.__actions__=lr(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=lr(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=lr(this.__views__),a}function wN(){if(this.__filtered__){var a=new Ae(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a}function _N(){var a=this.__wrapped__.value(),c=this.__dir__,p=xe(a),m=c<0,y=p?a.length:0,S=OO(0,y,this.__views__),E=S.start,R=S.end,P=R-E,V=m?R:E-1,W=this.__iteratees__,j=W.length,Y=0,ie=Lt(P,this.__takeCount__);if(!p||!m&&y==P&&ie==P)return Gw(a,this.__actions__);var ue=[];e:for(;P--&&Y<ie;){V+=c;for(var Ee=-1,pe=a[V];++Ee<j;){var Pe=W[Ee],Ie=Pe.iteratee,Ar=Pe.type,Zt=Ie(pe);if(Ar==$)pe=Zt;else if(!Zt){if(Ar==D)continue e;break e}}ue[Y++]=pe}return ue}Ae.prototype=Ea(zu.prototype),Ae.prototype.constructor=Ae;function Eo(a){var c=-1,p=a==null?0:a.length;for(this.clear();++c<p;){var m=a[c];this.set(m[0],m[1])}}function EN(){this.__data__=gc?gc(null):{},this.size=0}function RN(a){var c=this.has(a)&&delete this.__data__[a];return this.size-=c?1:0,c}function kN(a){var c=this.__data__;if(gc){var p=c[a];return p===s?t:p}return $e.call(c,a)?c[a]:t}function MN(a){var c=this.__data__;return gc?c[a]!==t:$e.call(c,a)}function PN(a,c){var p=this.__data__;return this.size+=this.has(a)?0:1,p[a]=gc&&c===t?s:c,this}Eo.prototype.clear=EN,Eo.prototype.delete=RN,Eo.prototype.get=kN,Eo.prototype.has=MN,Eo.prototype.set=PN;function si(a){var c=-1,p=a==null?0:a.length;for(this.clear();++c<p;){var m=a[c];this.set(m[0],m[1])}}function AN(){this.__data__=[],this.size=0}function DN(a){var c=this.__data__,p=Gu(c,a);if(p<0)return!1;var m=c.length-1;return p==m?c.pop():Vu.call(c,p,1),--this.size,!0}function IN(a){var c=this.__data__,p=Gu(c,a);return p<0?t:c[p][1]}function FN(a){return Gu(this.__data__,a)>-1}function CN(a,c){var p=this.__data__,m=Gu(p,a);return m<0?(++this.size,p.push([a,c])):p[m][1]=c,this}si.prototype.clear=AN,si.prototype.delete=DN,si.prototype.get=IN,si.prototype.has=FN,si.prototype.set=CN;function ci(a){var c=-1,p=a==null?0:a.length;for(this.clear();++c<p;){var m=a[c];this.set(m[0],m[1])}}function NN(){this.size=0,this.__data__={hash:new Eo,map:new(mc||si),string:new Eo}}function ON(a){var c=op(this,a).delete(a);return this.size-=c?1:0,c}function LN(a){return op(this,a).get(a)}function UN(a){return op(this,a).has(a)}function BN(a,c){var p=op(this,a),m=p.size;return p.set(a,c),this.size+=p.size==m?0:1,this}ci.prototype.clear=NN,ci.prototype.delete=ON,ci.prototype.get=LN,ci.prototype.has=UN,ci.prototype.set=BN;function Ro(a){var c=-1,p=a==null?0:a.length;for(this.__data__=new ci;++c<p;)this.add(a[c])}function VN(a){return this.__data__.set(a,s),this}function WN(a){return this.__data__.has(a)}Ro.prototype.add=Ro.prototype.push=VN,Ro.prototype.has=WN;function Sn(a){var c=this.__data__=new si(a);this.size=c.size}function HN(){this.__data__=new si,this.size=0}function $N(a){var c=this.__data__,p=c.delete(a);return this.size=c.size,p}function jN(a){return this.__data__.get(a)}function qN(a){return this.__data__.has(a)}function zN(a,c){var p=this.__data__;if(p instanceof si){var m=p.__data__;if(!mc||m.length<r-1)return m.push([a,c]),this.size=++p.size,this;p=this.__data__=new ci(m)}return p.set(a,c),this.size=p.size,this}Sn.prototype.clear=HN,Sn.prototype.delete=$N,Sn.prototype.get=jN,Sn.prototype.has=qN,Sn.prototype.set=zN;function _w(a,c){var p=xe(a),m=!p&&Do(a),y=!p&&!m&&ji(a),S=!p&&!m&&!y&&Pa(a),E=p||m||y||S,R=E?ky(a.length,rN):[],P=R.length;for(var V in a)(c||$e.call(a,V))&&!(E&&(V=="length"||y&&(V=="offset"||V=="parent")||S&&(V=="buffer"||V=="byteLength"||V=="byteOffset")||fi(V,P)))&&R.push(V);return R}function Ew(a){var c=a.length;return c?a[jy(0,c-1)]:t}function GN(a,c){return ap(lr(a),ko(c,0,a.length))}function KN(a){return ap(lr(a))}function Cy(a,c,p){(p!==t&&!vn(a[c],p)||p===t&&!(c in a))&&li(a,c,p)}function xc(a,c,p){var m=a[c];(!($e.call(a,c)&&vn(m,p))||p===t&&!(c in a))&&li(a,c,p)}function Gu(a,c){for(var p=a.length;p--;)if(vn(a[p][0],c))return p;return-1}function QN(a,c,p,m){return Vi(a,function(y,S,E){c(m,y,p(y),E)}),m}function Rw(a,c){return a&&Ln(c,bt(c),a)}function ZN(a,c){return a&&Ln(c,pr(c),a)}function li(a,c,p){c=="__proto__"&&Wu?Wu(a,c,{configurable:!0,enumerable:!0,value:p,writable:!0}):a[c]=p}function Ny(a,c){for(var p=-1,m=c.length,y=L(m),S=a==null;++p<m;)y[p]=S?t:hx(a,c[p]);return y}function ko(a,c,p){return a===a&&(p!==t&&(a=a<=p?a:p),c!==t&&(a=a>=c?a:c)),a}function Qr(a,c,p,m,y,S){var E,R=c&f,P=c&d,V=c&h;if(p&&(E=y?p(a,m,y,S):p(a)),E!==t)return E;if(!tt(a))return a;var W=xe(a);if(W){if(E=UO(a),!R)return lr(a,E)}else{var j=Ut(a),Y=j==ga||j==Mb;if(ji(a))return Zw(a,R);if(j==ai||j==cr||Y&&!y){if(E=P||Y?{}:h_(a),!R)return P?kO(a,ZN(E,a)):RO(a,Rw(E,a))}else{if(!Ke[j])return y?a:{};E=BO(a,j,R)}}S||(S=new Sn);var ie=S.get(a);if(ie)return ie;S.set(a,E),j_(a)?a.forEach(function(pe){E.add(Qr(pe,c,p,pe,a,S))}):H_(a)&&a.forEach(function(pe,Pe){E.set(Pe,Qr(pe,c,p,Pe,a,S))});var ue=V?P?tx:ex:P?pr:bt,Ee=W?t:ue(a);return zr(Ee||a,function(pe,Pe){Ee&&(Pe=pe,pe=a[Pe]),xc(E,Pe,Qr(pe,c,p,Pe,a,S))}),E}function YN(a){var c=bt(a);return function(p){return kw(p,a,c)}}function kw(a,c,p){var m=p.length;if(a==null)return!m;for(a=ze(a);m--;){var y=p[m],S=c[y],E=a[y];if(E===t&&!(y in a)||!S(E))return!1}return!0}function Mw(a,c,p){if(typeof a!="function")throw new Gr(i);return Ec(function(){a.apply(t,p)},c)}function Tc(a,c,p,m){var y=-1,S=Au,E=!0,R=a.length,P=[],V=c.length;if(!R)return P;p&&(c=Je(c,kr(p))),m?(S=vy,E=!1):c.length>=r&&(S=fc,E=!1,c=new Ro(c));e:for(;++y<R;){var W=a[y],j=p==null?W:p(W);if(W=m||W!==0?W:0,E&&j===j){for(var Y=V;Y--;)if(c[Y]===j)continue e;P.push(W)}else S(c,j,m)||P.push(W)}return P}var Vi=t_(On),Pw=t_(Ly,!0);function XN(a,c){var p=!0;return Vi(a,function(m,y,S){return p=!!c(m,y,S),p}),p}function Ku(a,c,p){for(var m=-1,y=a.length;++m<y;){var S=a[m],E=c(S);if(E!=null&&(R===t?E===E&&!Pr(E):p(E,R)))var R=E,P=S}return P}function JN(a,c,p,m){var y=a.length;for(p=be(p),p<0&&(p=-p>y?0:y+p),m=m===t||m>y?y:be(m),m<0&&(m+=y),m=p>m?0:z_(m);p<m;)a[p++]=c;return a}function Aw(a,c){var p=[];return Vi(a,function(m,y,S){c(m,y,S)&&p.push(m)}),p}function Dt(a,c,p,m,y){var S=-1,E=a.length;for(p||(p=WO),y||(y=[]);++S<E;){var R=a[S];c>0&&p(R)?c>1?Dt(R,c-1,p,m,y):Oi(y,R):m||(y[y.length]=R)}return y}var Oy=r_(),Dw=r_(!0);function On(a,c){return a&&Oy(a,c,bt)}function Ly(a,c){return a&&Dw(a,c,bt)}function Qu(a,c){return Ni(c,function(p){return di(a[p])})}function Mo(a,c){c=Hi(c,a);for(var p=0,m=c.length;a!=null&&p<m;)a=a[Un(c[p++])];return p&&p==m?a:t}function Iw(a,c,p){var m=c(a);return xe(a)?m:Oi(m,p(a))}function Kt(a){return a==null?a===t?MF:RF:_o&&_o in ze(a)?NO(a):KO(a)}function Uy(a,c){return a>c}function eO(a,c){return a!=null&&$e.call(a,c)}function tO(a,c){return a!=null&&c in ze(a)}function rO(a,c,p){return a>=Lt(c,p)&&a<yt(c,p)}function By(a,c,p){for(var m=p?vy:Au,y=a[0].length,S=a.length,E=S,R=L(S),P=1/0,V=[];E--;){var W=a[E];E&&c&&(W=Je(W,kr(c))),P=Lt(W.length,P),R[E]=!p&&(c||y>=120&&W.length>=120)?new Ro(E&&W):t}W=a[0];var j=-1,Y=R[0];e:for(;++j<y&&V.length<P;){var ie=W[j],ue=c?c(ie):ie;if(ie=p||ie!==0?ie:0,!(Y?fc(Y,ue):m(V,ue,p))){for(E=S;--E;){var Ee=R[E];if(!(Ee?fc(Ee,ue):m(a[E],ue,p)))continue e}Y&&Y.push(ue),V.push(ie)}}return V}function nO(a,c,p,m){return On(a,function(y,S,E){c(m,p(y),S,E)}),m}function Sc(a,c,p){c=Hi(c,a),a=T_(a,c);var m=a==null?a:a[Un(Yr(c))];return m==null?t:Rr(m,a,p)}function Fw(a){return ot(a)&&Kt(a)==cr}function iO(a){return ot(a)&&Kt(a)==pc}function oO(a){return ot(a)&&Kt(a)==jr}function vc(a,c,p,m,y){return a===c?!0:a==null||c==null||!ot(a)&&!ot(c)?a!==a&&c!==c:aO(a,c,p,m,vc,y)}function aO(a,c,p,m,y,S){var E=xe(a),R=xe(c),P=E?hn:Ut(a),V=R?hn:Ut(c);P=P==cr?ai:P,V=V==cr?ai:V;var W=P==ai,j=V==ai,Y=P==V;if(Y&&ji(a)){if(!ji(c))return!1;E=!0,W=!1}if(Y&&!W)return S||(S=new Sn),E||Pa(a)?f_(a,c,p,m,y,S):FO(a,c,P,p,m,y,S);if(!(p&g)){var ie=W&&$e.call(a,"__wrapped__"),ue=j&&$e.call(c,"__wrapped__");if(ie||ue){var Ee=ie?a.value():a,pe=ue?c.value():c;return S||(S=new Sn),y(Ee,pe,p,m,S)}}return Y?(S||(S=new Sn),CO(a,c,p,m,y,S)):!1}function sO(a){return ot(a)&&Ut(a)==yn}function Vy(a,c,p,m){var y=p.length,S=y,E=!m;if(a==null)return!S;for(a=ze(a);y--;){var R=p[y];if(E&&R[2]?R[1]!==a[R[0]]:!(R[0]in a))return!1}for(;++y<S;){R=p[y];var P=R[0],V=a[P],W=R[1];if(E&&R[2]){if(V===t&&!(P in a))return!1}else{var j=new Sn;if(m)var Y=m(V,W,P,a,c,j);if(!(Y===t?vc(W,V,g|x,m,j):Y))return!1}}return!0}function Cw(a){if(!tt(a)||$O(a))return!1;var c=di(a)?sN:YF;return c.test(Ao(a))}function cO(a){return ot(a)&&Kt(a)==cc}function lO(a){return ot(a)&&Ut(a)==xn}function uO(a){return ot(a)&&fp(a.length)&&!!Ze[Kt(a)]}function Nw(a){return typeof a=="function"?a:a==null?fr:typeof a=="object"?xe(a)?Uw(a[0],a[1]):Lw(a):nE(a)}function Wy(a){if(!_c(a))return dN(a);var c=[];for(var p in ze(a))$e.call(a,p)&&p!="constructor"&&c.push(p);return c}function pO(a){if(!tt(a))return GO(a);var c=_c(a),p=[];for(var m in a)m=="constructor"&&(c||!$e.call(a,m))||p.push(m);return p}function Hy(a,c){return a<c}function Ow(a,c){var p=-1,m=ur(a)?L(a.length):[];return Vi(a,function(y,S,E){m[++p]=c(y,S,E)}),m}function Lw(a){var c=nx(a);return c.length==1&&c[0][2]?y_(c[0][0],c[0][1]):function(p){return p===a||Vy(p,a,c)}}function Uw(a,c){return ox(a)&&g_(c)?y_(Un(a),c):function(p){var m=hx(p,a);return m===t&&m===c?gx(p,a):vc(c,m,g|x)}}function Zu(a,c,p,m,y){a!==c&&Oy(c,function(S,E){if(y||(y=new Sn),tt(S))fO(a,c,E,p,Zu,m,y);else{var R=m?m(sx(a,E),S,E+"",a,c,y):t;R===t&&(R=S),Cy(a,E,R)}},pr)}function fO(a,c,p,m,y,S,E){var R=sx(a,p),P=sx(c,p),V=E.get(P);if(V){Cy(a,p,V);return}var W=S?S(R,P,p+"",a,c,E):t,j=W===t;if(j){var Y=xe(P),ie=!Y&&ji(P),ue=!Y&&!ie&&Pa(P);W=P,Y||ie||ue?xe(R)?W=R:ct(R)?W=lr(R):ie?(j=!1,W=Zw(P,!0)):ue?(j=!1,W=Yw(P,!0)):W=[]:Rc(P)||Do(P)?(W=R,Do(R)?W=G_(R):(!tt(R)||di(R))&&(W=h_(P))):j=!1}j&&(E.set(P,W),y(W,P,m,S,E),E.delete(P)),Cy(a,p,W)}function Bw(a,c){var p=a.length;if(p)return c+=c<0?p:0,fi(c,p)?a[c]:t}function Vw(a,c,p){c.length?c=Je(c,function(S){return xe(S)?function(E){return Mo(E,S.length===1?S[0]:S)}:S}):c=[fr];var m=-1;c=Je(c,kr(le()));var y=Ow(a,function(S,E,R){var P=Je(c,function(V){return V(S)});return{criteria:P,index:++m,value:S}});return BC(y,function(S,E){return EO(S,E,p)})}function dO(a,c){return Ww(a,c,function(p,m){return gx(a,m)})}function Ww(a,c,p){for(var m=-1,y=c.length,S={};++m<y;){var E=c[m],R=Mo(a,E);p(R,E)&&bc(S,Hi(E,a),R)}return S}function mO(a){return function(c){return Mo(c,a)}}function $y(a,c,p,m){var y=m?UC:Ta,S=-1,E=c.length,R=a;for(a===c&&(c=lr(c)),p&&(R=Je(a,kr(p)));++S<E;)for(var P=0,V=c[S],W=p?p(V):V;(P=y(R,W,P,m))>-1;)R!==a&&Vu.call(R,P,1),Vu.call(a,P,1);return a}function Hw(a,c){for(var p=a?c.length:0,m=p-1;p--;){var y=c[p];if(p==m||y!==S){var S=y;fi(y)?Vu.call(a,y,1):Gy(a,y)}}return a}function jy(a,c){return a+$u(bw()*(c-a+1))}function hO(a,c,p,m){for(var y=-1,S=yt(Hu((c-a)/(p||1)),0),E=L(S);S--;)E[m?S:++y]=a,a+=p;return E}function qy(a,c){var p="";if(!a||c<1||c>Q)return p;do c%2&&(p+=a),c=$u(c/2),c&&(a+=a);while(c);return p}function ke(a,c){return cx(x_(a,c,fr),a+"")}function gO(a){return Ew(Aa(a))}function yO(a,c){var p=Aa(a);return ap(p,ko(c,0,p.length))}function bc(a,c,p,m){if(!tt(a))return a;c=Hi(c,a);for(var y=-1,S=c.length,E=S-1,R=a;R!=null&&++y<S;){var P=Un(c[y]),V=p;if(P==="__proto__"||P==="constructor"||P==="prototype")return a;if(y!=E){var W=R[P];V=m?m(W,P,R):t,V===t&&(V=tt(W)?W:fi(c[y+1])?[]:{})}xc(R,P,V),R=R[P]}return a}var $w=ju?function(a,c){return ju.set(a,c),a}:fr,xO=Wu?function(a,c){return Wu(a,"toString",{configurable:!0,enumerable:!1,value:xx(c),writable:!0})}:fr;function TO(a){return ap(Aa(a))}function Zr(a,c,p){var m=-1,y=a.length;c<0&&(c=-c>y?0:y+c),p=p>y?y:p,p<0&&(p+=y),y=c>p?0:p-c>>>0,c>>>=0;for(var S=L(y);++m<y;)S[m]=a[m+c];return S}function SO(a,c){var p;return Vi(a,function(m,y,S){return p=c(m,y,S),!p}),!!p}function Yu(a,c,p){var m=0,y=a==null?m:a.length;if(typeof c=="number"&&c===c&&y<=sr){for(;m<y;){var S=m+y>>>1,E=a[S];E!==null&&!Pr(E)&&(p?E<=c:E<c)?m=S+1:y=S}return y}return zy(a,c,fr,p)}function zy(a,c,p,m){var y=0,S=a==null?0:a.length;if(S===0)return 0;c=p(c);for(var E=c!==c,R=c===null,P=Pr(c),V=c===t;y<S;){var W=$u((y+S)/2),j=p(a[W]),Y=j!==t,ie=j===null,ue=j===j,Ee=Pr(j);if(E)var pe=m||ue;else V?pe=ue&&(m||Y):R?pe=ue&&Y&&(m||!ie):P?pe=ue&&Y&&!ie&&(m||!Ee):ie||Ee?pe=!1:pe=m?j<=c:j<c;pe?y=W+1:S=W}return Lt(S,Re)}function jw(a,c){for(var p=-1,m=a.length,y=0,S=[];++p<m;){var E=a[p],R=c?c(E):E;if(!p||!vn(R,P)){var P=R;S[y++]=E===0?0:E}}return S}function qw(a){return typeof a=="number"?a:Pr(a)?me:+a}function Mr(a){if(typeof a=="string")return a;if(xe(a))return Je(a,Mr)+"";if(Pr(a))return ww?ww.call(a):"";var c=a+"";return c=="0"&&1/a==-K?"-0":c}function Wi(a,c,p){var m=-1,y=Au,S=a.length,E=!0,R=[],P=R;if(p)E=!1,y=vy;else if(S>=r){var V=c?null:DO(a);if(V)return Iu(V);E=!1,y=fc,P=new Ro}else P=c?[]:R;e:for(;++m<S;){var W=a[m],j=c?c(W):W;if(W=p||W!==0?W:0,E&&j===j){for(var Y=P.length;Y--;)if(P[Y]===j)continue e;c&&P.push(j),R.push(W)}else y(P,j,p)||(P!==R&&P.push(j),R.push(W))}return R}function Gy(a,c){return c=Hi(c,a),a=T_(a,c),a==null||delete a[Un(Yr(c))]}function zw(a,c,p,m){return bc(a,c,p(Mo(a,c)),m)}function Xu(a,c,p,m){for(var y=a.length,S=m?y:-1;(m?S--:++S<y)&&c(a[S],S,a););return p?Zr(a,m?0:S,m?S+1:y):Zr(a,m?S+1:0,m?y:S)}function Gw(a,c){var p=a;return p instanceof Ae&&(p=p.value()),by(c,function(m,y){return y.func.apply(y.thisArg,Oi([m],y.args))},p)}function Ky(a,c,p){var m=a.length;if(m<2)return m?Wi(a[0]):[];for(var y=-1,S=L(m);++y<m;)for(var E=a[y],R=-1;++R<m;)R!=y&&(S[y]=Tc(S[y]||E,a[R],c,p));return Wi(Dt(S,1),c,p)}function Kw(a,c,p){for(var m=-1,y=a.length,S=c.length,E={};++m<y;){var R=m<S?c[m]:t;p(E,a[m],R)}return E}function Qy(a){return ct(a)?a:[]}function Zy(a){return typeof a=="function"?a:fr}function Hi(a,c){return xe(a)?a:ox(a,c)?[a]:w_(Ve(a))}var vO=ke;function $i(a,c,p){var m=a.length;return p=p===t?m:p,!c&&p>=m?a:Zr(a,c,p)}var Qw=cN||function(a){return vt.clearTimeout(a)};function Zw(a,c){if(c)return a.slice();var p=a.length,m=yw?yw(p):new a.constructor(p);return a.copy(m),m}function Yy(a){var c=new a.constructor(a.byteLength);return new Uu(c).set(new Uu(a)),c}function bO(a,c){var p=c?Yy(a.buffer):a.buffer;return new a.constructor(p,a.byteOffset,a.byteLength)}function wO(a){var c=new a.constructor(a.source,Fb.exec(a));return c.lastIndex=a.lastIndex,c}function _O(a){return yc?ze(yc.call(a)):{}}function Yw(a,c){var p=c?Yy(a.buffer):a.buffer;return new a.constructor(p,a.byteOffset,a.length)}function Xw(a,c){if(a!==c){var p=a!==t,m=a===null,y=a===a,S=Pr(a),E=c!==t,R=c===null,P=c===c,V=Pr(c);if(!R&&!V&&!S&&a>c||S&&E&&P&&!R&&!V||m&&E&&P||!p&&P||!y)return 1;if(!m&&!S&&!V&&a<c||V&&p&&y&&!m&&!S||R&&p&&y||!E&&y||!P)return-1}return 0}function EO(a,c,p){for(var m=-1,y=a.criteria,S=c.criteria,E=y.length,R=p.length;++m<E;){var P=Xw(y[m],S[m]);if(P){if(m>=R)return P;var V=p[m];return P*(V=="desc"?-1:1)}}return a.index-c.index}function Jw(a,c,p,m){for(var y=-1,S=a.length,E=p.length,R=-1,P=c.length,V=yt(S-E,0),W=L(P+V),j=!m;++R<P;)W[R]=c[R];for(;++y<E;)(j||y<S)&&(W[p[y]]=a[y]);for(;V--;)W[R++]=a[y++];return W}function e_(a,c,p,m){for(var y=-1,S=a.length,E=-1,R=p.length,P=-1,V=c.length,W=yt(S-R,0),j=L(W+V),Y=!m;++y<W;)j[y]=a[y];for(var ie=y;++P<V;)j[ie+P]=c[P];for(;++E<R;)(Y||y<S)&&(j[ie+p[E]]=a[y++]);return j}function lr(a,c){var p=-1,m=a.length;for(c||(c=L(m));++p<m;)c[p]=a[p];return c}function Ln(a,c,p,m){var y=!p;p||(p={});for(var S=-1,E=c.length;++S<E;){var R=c[S],P=m?m(p[R],a[R],R,p,a):t;P===t&&(P=a[R]),y?li(p,R,P):xc(p,R,P)}return p}function RO(a,c){return Ln(a,ix(a),c)}function kO(a,c){return Ln(a,d_(a),c)}function Ju(a,c){return function(p,m){var y=xe(p)?IC:QN,S=c?c():{};return y(p,a,le(m,2),S)}}function Ra(a){return ke(function(c,p){var m=-1,y=p.length,S=y>1?p[y-1]:t,E=y>2?p[2]:t;for(S=a.length>3&&typeof S=="function"?(y--,S):t,E&&Qt(p[0],p[1],E)&&(S=y<3?t:S,y=1),c=ze(c);++m<y;){var R=p[m];R&&a(c,R,m,S)}return c})}function t_(a,c){return function(p,m){if(p==null)return p;if(!ur(p))return a(p,m);for(var y=p.length,S=c?y:-1,E=ze(p);(c?S--:++S<y)&&m(E[S],S,E)!==!1;);return p}}function r_(a){return function(c,p,m){for(var y=-1,S=ze(c),E=m(c),R=E.length;R--;){var P=E[a?R:++y];if(p(S[P],P,S)===!1)break}return c}}function MO(a,c,p){var m=c&v,y=wc(a);function S(){var E=this&&this!==vt&&this instanceof S?y:a;return E.apply(m?p:this,arguments)}return S}function n_(a){return function(c){c=Ve(c);var p=Sa(c)?Tn(c):t,m=p?p[0]:c.charAt(0),y=p?$i(p,1).join(""):c.slice(1);return m[a]()+y}}function ka(a){return function(c){return by(tE(eE(c).replace(xC,"")),a,"")}}function wc(a){return function(){var c=arguments;switch(c.length){case 0:return new a;case 1:return new a(c[0]);case 2:return new a(c[0],c[1]);case 3:return new a(c[0],c[1],c[2]);case 4:return new a(c[0],c[1],c[2],c[3]);case 5:return new a(c[0],c[1],c[2],c[3],c[4]);case 6:return new a(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new a(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var p=Ea(a.prototype),m=a.apply(p,c);return tt(m)?m:p}}function PO(a,c,p){var m=wc(a);function y(){for(var S=arguments.length,E=L(S),R=S,P=Ma(y);R--;)E[R]=arguments[R];var V=S<3&&E[0]!==P&&E[S-1]!==P?[]:Li(E,P);if(S-=V.length,S<p)return c_(a,c,ep,y.placeholder,t,E,V,t,t,p-S);var W=this&&this!==vt&&this instanceof y?m:a;return Rr(W,this,E)}return y}function i_(a){return function(c,p,m){var y=ze(c);if(!ur(c)){var S=le(p,3);c=bt(c),p=function(R){return S(y[R],R,y)}}var E=a(c,p,m);return E>-1?y[S?c[E]:E]:t}}function o_(a){return pi(function(c){var p=c.length,m=p,y=Kr.prototype.thru;for(a&&c.reverse();m--;){var S=c[m];if(typeof S!="function")throw new Gr(i);if(y&&!E&&ip(S)=="wrapper")var E=new Kr([],!0)}for(m=E?m:p;++m<p;){S=c[m];var R=ip(S),P=R=="wrapper"?rx(S):t;P&&ax(P[0])&&P[1]==(he|A|Z|de)&&!P[4].length&&P[9]==1?E=E[ip(P[0])].apply(E,P[3]):E=S.length==1&&ax(S)?E[R]():E.thru(S)}return function(){var V=arguments,W=V[0];if(E&&V.length==1&&xe(W))return E.plant(W).value();for(var j=0,Y=p?c[j].apply(this,V):W;++j<p;)Y=c[j].call(this,Y);return Y}})}function ep(a,c,p,m,y,S,E,R,P,V){var W=c&he,j=c&v,Y=c&w,ie=c&(A|U),ue=c&dt,Ee=Y?t:wc(a);function pe(){for(var Pe=arguments.length,Ie=L(Pe),Ar=Pe;Ar--;)Ie[Ar]=arguments[Ar];if(ie)var Zt=Ma(pe),Dr=WC(Ie,Zt);if(m&&(Ie=Jw(Ie,m,y,ie)),S&&(Ie=e_(Ie,S,E,ie)),Pe-=Dr,ie&&Pe<V){var lt=Li(Ie,Zt);return c_(a,c,ep,pe.placeholder,p,Ie,lt,R,P,V-Pe)}var bn=j?p:this,hi=Y?bn[a]:a;return Pe=Ie.length,R?Ie=QO(Ie,R):ue&&Pe>1&&Ie.reverse(),W&&P<Pe&&(Ie.length=P),this&&this!==vt&&this instanceof pe&&(hi=Ee||wc(hi)),hi.apply(bn,Ie)}return pe}function a_(a,c){return function(p,m){return nO(p,a,c(m),{})}}function tp(a,c){return function(p,m){var y;if(p===t&&m===t)return c;if(p!==t&&(y=p),m!==t){if(y===t)return m;typeof p=="string"||typeof m=="string"?(p=Mr(p),m=Mr(m)):(p=qw(p),m=qw(m)),y=a(p,m)}return y}}function Xy(a){return pi(function(c){return c=Je(c,kr(le())),ke(function(p){var m=this;return a(c,function(y){return Rr(y,m,p)})})})}function rp(a,c){c=c===t?" ":Mr(c);var p=c.length;if(p<2)return p?qy(c,a):c;var m=qy(c,Hu(a/va(c)));return Sa(c)?$i(Tn(m),0,a).join(""):m.slice(0,a)}function AO(a,c,p,m){var y=c&v,S=wc(a);function E(){for(var R=-1,P=arguments.length,V=-1,W=m.length,j=L(W+P),Y=this&&this!==vt&&this instanceof E?S:a;++V<W;)j[V]=m[V];for(;P--;)j[V++]=arguments[++R];return Rr(Y,y?p:this,j)}return E}function s_(a){return function(c,p,m){return m&&typeof m!="number"&&Qt(c,p,m)&&(p=m=t),c=mi(c),p===t?(p=c,c=0):p=mi(p),m=m===t?c<p?1:-1:mi(m),hO(c,p,m,a)}}function np(a){return function(c,p){return typeof c=="string"&&typeof p=="string"||(c=Xr(c),p=Xr(p)),a(c,p)}}function c_(a,c,p,m,y,S,E,R,P,V){var W=c&A,j=W?E:t,Y=W?t:E,ie=W?S:t,ue=W?t:S;c|=W?Z:ne,c&=~(W?ne:Z),c&N||(c&=~(v|w));var Ee=[a,c,y,ie,j,ue,Y,R,P,V],pe=p.apply(t,Ee);return ax(a)&&S_(pe,Ee),pe.placeholder=m,v_(pe,a,c)}function Jy(a){var c=gt[a];return function(p,m){if(p=Xr(p),m=m==null?0:Lt(be(m),292),m&&vw(p)){var y=(Ve(p)+"e").split("e"),S=c(y[0]+"e"+(+y[1]+m));return y=(Ve(S)+"e").split("e"),+(y[0]+"e"+(+y[1]-m))}return c(p)}}var DO=wa&&1/Iu(new wa([,-0]))[1]==K?function(a){return new wa(a)}:vx;function l_(a){return function(c){var p=Ut(c);return p==yn?Py(c):p==xn?KC(c):VC(c,a(c))}}function ui(a,c,p,m,y,S,E,R){var P=c&w;if(!P&&typeof a!="function")throw new Gr(i);var V=m?m.length:0;if(V||(c&=~(Z|ne),m=y=t),E=E===t?E:yt(be(E),0),R=R===t?R:be(R),V-=y?y.length:0,c&ne){var W=m,j=y;m=y=t}var Y=P?t:rx(a),ie=[a,c,p,m,y,W,j,S,E,R];if(Y&&zO(ie,Y),a=ie[0],c=ie[1],p=ie[2],m=ie[3],y=ie[4],R=ie[9]=ie[9]===t?P?0:a.length:yt(ie[9]-V,0),!R&&c&(A|U)&&(c&=~(A|U)),!c||c==v)var ue=MO(a,c,p);else c==A||c==U?ue=PO(a,c,R):(c==Z||c==(v|Z))&&!y.length?ue=AO(a,c,p,m):ue=ep.apply(t,ie);var Ee=Y?$w:S_;return v_(Ee(ue,ie),a,c)}function u_(a,c,p,m){return a===t||vn(a,ba[p])&&!$e.call(m,p)?c:a}function p_(a,c,p,m,y,S){return tt(a)&&tt(c)&&(S.set(c,a),Zu(a,c,t,p_,S),S.delete(c)),a}function IO(a){return Rc(a)?t:a}function f_(a,c,p,m,y,S){var E=p&g,R=a.length,P=c.length;if(R!=P&&!(E&&P>R))return!1;var V=S.get(a),W=S.get(c);if(V&&W)return V==c&&W==a;var j=-1,Y=!0,ie=p&x?new Ro:t;for(S.set(a,c),S.set(c,a);++j<R;){var ue=a[j],Ee=c[j];if(m)var pe=E?m(Ee,ue,j,c,a,S):m(ue,Ee,j,a,c,S);if(pe!==t){if(pe)continue;Y=!1;break}if(ie){if(!wy(c,function(Pe,Ie){if(!fc(ie,Ie)&&(ue===Pe||y(ue,Pe,p,m,S)))return ie.push(Ie)})){Y=!1;break}}else if(!(ue===Ee||y(ue,Ee,p,m,S))){Y=!1;break}}return S.delete(a),S.delete(c),Y}function FO(a,c,p,m,y,S,E){switch(p){case ya:if(a.byteLength!=c.byteLength||a.byteOffset!=c.byteOffset)return!1;a=a.buffer,c=c.buffer;case pc:return!(a.byteLength!=c.byteLength||!S(new Uu(a),new Uu(c)));case gn:case jr:case sc:return vn(+a,+c);case oi:return a.name==c.name&&a.message==c.message;case cc:case lc:return a==c+"";case yn:var R=Py;case xn:var P=m&g;if(R||(R=Iu),a.size!=c.size&&!P)return!1;var V=E.get(a);if(V)return V==c;m|=x,E.set(a,c);var W=f_(R(a),R(c),m,y,S,E);return E.delete(a),W;case Ru:if(yc)return yc.call(a)==yc.call(c)}return!1}function CO(a,c,p,m,y,S){var E=p&g,R=ex(a),P=R.length,V=ex(c),W=V.length;if(P!=W&&!E)return!1;for(var j=P;j--;){var Y=R[j];if(!(E?Y in c:$e.call(c,Y)))return!1}var ie=S.get(a),ue=S.get(c);if(ie&&ue)return ie==c&&ue==a;var Ee=!0;S.set(a,c),S.set(c,a);for(var pe=E;++j<P;){Y=R[j];var Pe=a[Y],Ie=c[Y];if(m)var Ar=E?m(Ie,Pe,Y,c,a,S):m(Pe,Ie,Y,a,c,S);if(!(Ar===t?Pe===Ie||y(Pe,Ie,p,m,S):Ar)){Ee=!1;break}pe||(pe=Y=="constructor")}if(Ee&&!pe){var Zt=a.constructor,Dr=c.constructor;Zt!=Dr&&"constructor"in a&&"constructor"in c&&!(typeof Zt=="function"&&Zt instanceof Zt&&typeof Dr=="function"&&Dr instanceof Dr)&&(Ee=!1)}return S.delete(a),S.delete(c),Ee}function pi(a){return cx(x_(a,t,k_),a+"")}function ex(a){return Iw(a,bt,ix)}function tx(a){return Iw(a,pr,d_)}var rx=ju?function(a){return ju.get(a)}:vx;function ip(a){for(var c=a.name+"",p=_a[c],m=$e.call(_a,c)?p.length:0;m--;){var y=p[m],S=y.func;if(S==null||S==a)return y.name}return c}function Ma(a){var c=$e.call(T,"placeholder")?T:a;return c.placeholder}function le(){var a=T.iteratee||Tx;return a=a===Tx?Nw:a,arguments.length?a(arguments[0],arguments[1]):a}function op(a,c){var p=a.__data__;return HO(c)?p[typeof c=="string"?"string":"hash"]:p.map}function nx(a){for(var c=bt(a),p=c.length;p--;){var m=c[p],y=a[m];c[p]=[m,y,g_(y)]}return c}function Po(a,c){var p=qC(a,c);return Cw(p)?p:t}function NO(a){var c=$e.call(a,_o),p=a[_o];try{a[_o]=t;var m=!0}catch{}var y=Ou.call(a);return m&&(c?a[_o]=p:delete a[_o]),y}var ix=Dy?function(a){return a==null?[]:(a=ze(a),Ni(Dy(a),function(c){return Tw.call(a,c)}))}:bx,d_=Dy?function(a){for(var c=[];a;)Oi(c,ix(a)),a=Bu(a);return c}:bx,Ut=Kt;(Iy&&Ut(new Iy(new ArrayBuffer(1)))!=ya||mc&&Ut(new mc)!=yn||Fy&&Ut(Fy.resolve())!=Pb||wa&&Ut(new wa)!=xn||hc&&Ut(new hc)!=uc)&&(Ut=function(a){var c=Kt(a),p=c==ai?a.constructor:t,m=p?Ao(p):"";if(m)switch(m){case yN:return ya;case xN:return yn;case TN:return Pb;case SN:return xn;case vN:return uc}return c});function OO(a,c,p){for(var m=-1,y=p.length;++m<y;){var S=p[m],E=S.size;switch(S.type){case"drop":a+=E;break;case"dropRight":c-=E;break;case"take":c=Lt(c,a+E);break;case"takeRight":a=yt(a,c-E);break}}return{start:a,end:c}}function LO(a){var c=a.match($F);return c?c[1].split(jF):[]}function m_(a,c,p){c=Hi(c,a);for(var m=-1,y=c.length,S=!1;++m<y;){var E=Un(c[m]);if(!(S=a!=null&&p(a,E)))break;a=a[E]}return S||++m!=y?S:(y=a==null?0:a.length,!!y&&fp(y)&&fi(E,y)&&(xe(a)||Do(a)))}function UO(a){var c=a.length,p=new a.constructor(c);return c&&typeof a[0]=="string"&&$e.call(a,"index")&&(p.index=a.index,p.input=a.input),p}function h_(a){return typeof a.constructor=="function"&&!_c(a)?Ea(Bu(a)):{}}function BO(a,c,p){var m=a.constructor;switch(c){case pc:return Yy(a);case gn:case jr:return new m(+a);case ya:return bO(a,p);case ny:case iy:case oy:case ay:case sy:case cy:case ly:case uy:case py:return Yw(a,p);case yn:return new m;case sc:case lc:return new m(a);case cc:return wO(a);case xn:return new m;case Ru:return _O(a)}}function VO(a,c){var p=c.length;if(!p)return a;var m=p-1;return c[m]=(p>1?"& ":"")+c[m],c=c.join(p>2?", ":" "),a.replace(HF,`{
/* [wrapped with `+c+`] */
`)}function WO(a){return xe(a)||Do(a)||!!(Sw&&a&&a[Sw])}function fi(a,c){var p=typeof a;return c=c??Q,!!c&&(p=="number"||p!="symbol"&&JF.test(a))&&a>-1&&a%1==0&&a<c}function Qt(a,c,p){if(!tt(p))return!1;var m=typeof c;return(m=="number"?ur(p)&&fi(c,p.length):m=="string"&&c in p)?vn(p[c],a):!1}function ox(a,c){if(xe(a))return!1;var p=typeof a;return p=="number"||p=="symbol"||p=="boolean"||a==null||Pr(a)?!0:UF.test(a)||!LF.test(a)||c!=null&&a in ze(c)}function HO(a){var c=typeof a;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?a!=="__proto__":a===null}function ax(a){var c=ip(a),p=T[c];if(typeof p!="function"||!(c in Ae.prototype))return!1;if(a===p)return!0;var m=rx(p);return!!m&&a===m[0]}function $O(a){return!!gw&&gw in a}var jO=Cu?di:wx;function _c(a){var c=a&&a.constructor,p=typeof c=="function"&&c.prototype||ba;return a===p}function g_(a){return a===a&&!tt(a)}function y_(a,c){return function(p){return p==null?!1:p[a]===c&&(c!==t||a in ze(p))}}function qO(a){var c=up(a,function(m){return p.size===l&&p.clear(),m}),p=c.cache;return c}function zO(a,c){var p=a[1],m=c[1],y=p|m,S=y<(v|w|he),E=m==he&&p==A||m==he&&p==de&&a[7].length<=c[8]||m==(he|de)&&c[7].length<=c[8]&&p==A;if(!(S||E))return a;m&v&&(a[2]=c[2],y|=p&v?0:N);var R=c[3];if(R){var P=a[3];a[3]=P?Jw(P,R,c[4]):R,a[4]=P?Li(a[3],u):c[4]}return R=c[5],R&&(P=a[5],a[5]=P?e_(P,R,c[6]):R,a[6]=P?Li(a[5],u):c[6]),R=c[7],R&&(a[7]=R),m&he&&(a[8]=a[8]==null?c[8]:Lt(a[8],c[8])),a[9]==null&&(a[9]=c[9]),a[0]=c[0],a[1]=y,a}function GO(a){var c=[];if(a!=null)for(var p in ze(a))c.push(p);return c}function KO(a){return Ou.call(a)}function x_(a,c,p){return c=yt(c===t?a.length-1:c,0),function(){for(var m=arguments,y=-1,S=yt(m.length-c,0),E=L(S);++y<S;)E[y]=m[c+y];y=-1;for(var R=L(c+1);++y<c;)R[y]=m[y];return R[c]=p(E),Rr(a,this,R)}}function T_(a,c){return c.length<2?a:Mo(a,Zr(c,0,-1))}function QO(a,c){for(var p=a.length,m=Lt(c.length,p),y=lr(a);m--;){var S=c[m];a[m]=fi(S,p)?y[S]:t}return a}function sx(a,c){if(!(c==="constructor"&&typeof a[c]=="function")&&c!="__proto__")return a[c]}var S_=b_($w),Ec=uN||function(a,c){return vt.setTimeout(a,c)},cx=b_(xO);function v_(a,c,p){var m=c+"";return cx(a,VO(m,ZO(LO(m),p)))}function b_(a){var c=0,p=0;return function(){var m=mN(),y=C-(m-p);if(p=m,y>0){if(++c>=O)return arguments[0]}else c=0;return a.apply(t,arguments)}}function ap(a,c){var p=-1,m=a.length,y=m-1;for(c=c===t?m:c;++p<c;){var S=jy(p,y),E=a[S];a[S]=a[p],a[p]=E}return a.length=c,a}var w_=qO(function(a){var c=[];return a.charCodeAt(0)===46&&c.push(""),a.replace(BF,function(p,m,y,S){c.push(y?S.replace(GF,"$1"):m||p)}),c});function Un(a){if(typeof a=="string"||Pr(a))return a;var c=a+"";return c=="0"&&1/a==-K?"-0":c}function Ao(a){if(a!=null){try{return Nu.call(a)}catch{}try{return a+""}catch{}}return""}function ZO(a,c){return zr(ii,function(p){var m="_."+p[0];c&p[1]&&!Au(a,m)&&a.push(m)}),a.sort()}function __(a){if(a instanceof Ae)return a.clone();var c=new Kr(a.__wrapped__,a.__chain__);return c.__actions__=lr(a.__actions__),c.__index__=a.__index__,c.__values__=a.__values__,c}function YO(a,c,p){(p?Qt(a,c,p):c===t)?c=1:c=yt(be(c),0);var m=a==null?0:a.length;if(!m||c<1)return[];for(var y=0,S=0,E=L(Hu(m/c));y<m;)E[S++]=Zr(a,y,y+=c);return E}function XO(a){for(var c=-1,p=a==null?0:a.length,m=0,y=[];++c<p;){var S=a[c];S&&(y[m++]=S)}return y}function JO(){var a=arguments.length;if(!a)return[];for(var c=L(a-1),p=arguments[0],m=a;m--;)c[m-1]=arguments[m];return Oi(xe(p)?lr(p):[p],Dt(c,1))}var eL=ke(function(a,c){return ct(a)?Tc(a,Dt(c,1,ct,!0)):[]}),tL=ke(function(a,c){var p=Yr(c);return ct(p)&&(p=t),ct(a)?Tc(a,Dt(c,1,ct,!0),le(p,2)):[]}),rL=ke(function(a,c){var p=Yr(c);return ct(p)&&(p=t),ct(a)?Tc(a,Dt(c,1,ct,!0),t,p):[]});function nL(a,c,p){var m=a==null?0:a.length;return m?(c=p||c===t?1:be(c),Zr(a,c<0?0:c,m)):[]}function iL(a,c,p){var m=a==null?0:a.length;return m?(c=p||c===t?1:be(c),c=m-c,Zr(a,0,c<0?0:c)):[]}function oL(a,c){return a&&a.length?Xu(a,le(c,3),!0,!0):[]}function aL(a,c){return a&&a.length?Xu(a,le(c,3),!0):[]}function sL(a,c,p,m){var y=a==null?0:a.length;return y?(p&&typeof p!="number"&&Qt(a,c,p)&&(p=0,m=y),JN(a,c,p,m)):[]}function E_(a,c,p){var m=a==null?0:a.length;if(!m)return-1;var y=p==null?0:be(p);return y<0&&(y=yt(m+y,0)),Du(a,le(c,3),y)}function R_(a,c,p){var m=a==null?0:a.length;if(!m)return-1;var y=m-1;return p!==t&&(y=be(p),y=p<0?yt(m+y,0):Lt(y,m-1)),Du(a,le(c,3),y,!0)}function k_(a){var c=a==null?0:a.length;return c?Dt(a,1):[]}function cL(a){var c=a==null?0:a.length;return c?Dt(a,K):[]}function lL(a,c){var p=a==null?0:a.length;return p?(c=c===t?1:be(c),Dt(a,c)):[]}function uL(a){for(var c=-1,p=a==null?0:a.length,m={};++c<p;){var y=a[c];m[y[0]]=y[1]}return m}function M_(a){return a&&a.length?a[0]:t}function pL(a,c,p){var m=a==null?0:a.length;if(!m)return-1;var y=p==null?0:be(p);return y<0&&(y=yt(m+y,0)),Ta(a,c,y)}function fL(a){var c=a==null?0:a.length;return c?Zr(a,0,-1):[]}var dL=ke(function(a){var c=Je(a,Qy);return c.length&&c[0]===a[0]?By(c):[]}),mL=ke(function(a){var c=Yr(a),p=Je(a,Qy);return c===Yr(p)?c=t:p.pop(),p.length&&p[0]===a[0]?By(p,le(c,2)):[]}),hL=ke(function(a){var c=Yr(a),p=Je(a,Qy);return c=typeof c=="function"?c:t,c&&p.pop(),p.length&&p[0]===a[0]?By(p,t,c):[]});function gL(a,c){return a==null?"":fN.call(a,c)}function Yr(a){var c=a==null?0:a.length;return c?a[c-1]:t}function yL(a,c,p){var m=a==null?0:a.length;if(!m)return-1;var y=m;return p!==t&&(y=be(p),y=y<0?yt(m+y,0):Lt(y,m-1)),c===c?ZC(a,c,y):Du(a,cw,y,!0)}function xL(a,c){return a&&a.length?Bw(a,be(c)):t}var TL=ke(P_);function P_(a,c){return a&&a.length&&c&&c.length?$y(a,c):a}function SL(a,c,p){return a&&a.length&&c&&c.length?$y(a,c,le(p,2)):a}function vL(a,c,p){return a&&a.length&&c&&c.length?$y(a,c,t,p):a}var bL=pi(function(a,c){var p=a==null?0:a.length,m=Ny(a,c);return Hw(a,Je(c,function(y){return fi(y,p)?+y:y}).sort(Xw)),m});function wL(a,c){var p=[];if(!(a&&a.length))return p;var m=-1,y=[],S=a.length;for(c=le(c,3);++m<S;){var E=a[m];c(E,m,a)&&(p.push(E),y.push(m))}return Hw(a,y),p}function lx(a){return a==null?a:gN.call(a)}function _L(a,c,p){var m=a==null?0:a.length;return m?(p&&typeof p!="number"&&Qt(a,c,p)?(c=0,p=m):(c=c==null?0:be(c),p=p===t?m:be(p)),Zr(a,c,p)):[]}function EL(a,c){return Yu(a,c)}function RL(a,c,p){return zy(a,c,le(p,2))}function kL(a,c){var p=a==null?0:a.length;if(p){var m=Yu(a,c);if(m<p&&vn(a[m],c))return m}return-1}function ML(a,c){return Yu(a,c,!0)}function PL(a,c,p){return zy(a,c,le(p,2),!0)}function AL(a,c){var p=a==null?0:a.length;if(p){var m=Yu(a,c,!0)-1;if(vn(a[m],c))return m}return-1}function DL(a){return a&&a.length?jw(a):[]}function IL(a,c){return a&&a.length?jw(a,le(c,2)):[]}function FL(a){var c=a==null?0:a.length;return c?Zr(a,1,c):[]}function CL(a,c,p){return a&&a.length?(c=p||c===t?1:be(c),Zr(a,0,c<0?0:c)):[]}function NL(a,c,p){var m=a==null?0:a.length;return m?(c=p||c===t?1:be(c),c=m-c,Zr(a,c<0?0:c,m)):[]}function OL(a,c){return a&&a.length?Xu(a,le(c,3),!1,!0):[]}function LL(a,c){return a&&a.length?Xu(a,le(c,3)):[]}var UL=ke(function(a){return Wi(Dt(a,1,ct,!0))}),BL=ke(function(a){var c=Yr(a);return ct(c)&&(c=t),Wi(Dt(a,1,ct,!0),le(c,2))}),VL=ke(function(a){var c=Yr(a);return c=typeof c=="function"?c:t,Wi(Dt(a,1,ct,!0),t,c)});function WL(a){return a&&a.length?Wi(a):[]}function HL(a,c){return a&&a.length?Wi(a,le(c,2)):[]}function $L(a,c){return c=typeof c=="function"?c:t,a&&a.length?Wi(a,t,c):[]}function ux(a){if(!(a&&a.length))return[];var c=0;return a=Ni(a,function(p){if(ct(p))return c=yt(p.length,c),!0}),ky(c,function(p){return Je(a,_y(p))})}function A_(a,c){if(!(a&&a.length))return[];var p=ux(a);return c==null?p:Je(p,function(m){return Rr(c,t,m)})}var jL=ke(function(a,c){return ct(a)?Tc(a,c):[]}),qL=ke(function(a){return Ky(Ni(a,ct))}),zL=ke(function(a){var c=Yr(a);return ct(c)&&(c=t),Ky(Ni(a,ct),le(c,2))}),GL=ke(function(a){var c=Yr(a);return c=typeof c=="function"?c:t,Ky(Ni(a,ct),t,c)}),KL=ke(ux);function QL(a,c){return Kw(a||[],c||[],xc)}function ZL(a,c){return Kw(a||[],c||[],bc)}var YL=ke(function(a){var c=a.length,p=c>1?a[c-1]:t;return p=typeof p=="function"?(a.pop(),p):t,A_(a,p)});function D_(a){var c=T(a);return c.__chain__=!0,c}function XL(a,c){return c(a),a}function sp(a,c){return c(a)}var JL=pi(function(a){var c=a.length,p=c?a[0]:0,m=this.__wrapped__,y=function(S){return Ny(S,a)};return c>1||this.__actions__.length||!(m instanceof Ae)||!fi(p)?this.thru(y):(m=m.slice(p,+p+(c?1:0)),m.__actions__.push({func:sp,args:[y],thisArg:t}),new Kr(m,this.__chain__).thru(function(S){return c&&!S.length&&S.push(t),S}))});function eU(){return D_(this)}function tU(){return new Kr(this.value(),this.__chain__)}function rU(){this.__values__===t&&(this.__values__=q_(this.value()));var a=this.__index__>=this.__values__.length,c=a?t:this.__values__[this.__index__++];return{done:a,value:c}}function nU(){return this}function iU(a){for(var c,p=this;p instanceof zu;){var m=__(p);m.__index__=0,m.__values__=t,c?y.__wrapped__=m:c=m;var y=m;p=p.__wrapped__}return y.__wrapped__=a,c}function oU(){var a=this.__wrapped__;if(a instanceof Ae){var c=a;return this.__actions__.length&&(c=new Ae(this)),c=c.reverse(),c.__actions__.push({func:sp,args:[lx],thisArg:t}),new Kr(c,this.__chain__)}return this.thru(lx)}function aU(){return Gw(this.__wrapped__,this.__actions__)}var sU=Ju(function(a,c,p){$e.call(a,p)?++a[p]:li(a,p,1)});function cU(a,c,p){var m=xe(a)?aw:XN;return p&&Qt(a,c,p)&&(c=t),m(a,le(c,3))}function lU(a,c){var p=xe(a)?Ni:Aw;return p(a,le(c,3))}var uU=i_(E_),pU=i_(R_);function fU(a,c){return Dt(cp(a,c),1)}function dU(a,c){return Dt(cp(a,c),K)}function mU(a,c,p){return p=p===t?1:be(p),Dt(cp(a,c),p)}function I_(a,c){var p=xe(a)?zr:Vi;return p(a,le(c,3))}function F_(a,c){var p=xe(a)?FC:Pw;return p(a,le(c,3))}var hU=Ju(function(a,c,p){$e.call(a,p)?a[p].push(c):li(a,p,[c])});function gU(a,c,p,m){a=ur(a)?a:Aa(a),p=p&&!m?be(p):0;var y=a.length;return p<0&&(p=yt(y+p,0)),dp(a)?p<=y&&a.indexOf(c,p)>-1:!!y&&Ta(a,c,p)>-1}var yU=ke(function(a,c,p){var m=-1,y=typeof c=="function",S=ur(a)?L(a.length):[];return Vi(a,function(E){S[++m]=y?Rr(c,E,p):Sc(E,c,p)}),S}),xU=Ju(function(a,c,p){li(a,p,c)});function cp(a,c){var p=xe(a)?Je:Ow;return p(a,le(c,3))}function TU(a,c,p,m){return a==null?[]:(xe(c)||(c=c==null?[]:[c]),p=m?t:p,xe(p)||(p=p==null?[]:[p]),Vw(a,c,p))}var SU=Ju(function(a,c,p){a[p?0:1].push(c)},function(){return[[],[]]});function vU(a,c,p){var m=xe(a)?by:uw,y=arguments.length<3;return m(a,le(c,4),p,y,Vi)}function bU(a,c,p){var m=xe(a)?CC:uw,y=arguments.length<3;return m(a,le(c,4),p,y,Pw)}function wU(a,c){var p=xe(a)?Ni:Aw;return p(a,pp(le(c,3)))}function _U(a){var c=xe(a)?Ew:gO;return c(a)}function EU(a,c,p){(p?Qt(a,c,p):c===t)?c=1:c=be(c);var m=xe(a)?GN:yO;return m(a,c)}function RU(a){var c=xe(a)?KN:TO;return c(a)}function kU(a){if(a==null)return 0;if(ur(a))return dp(a)?va(a):a.length;var c=Ut(a);return c==yn||c==xn?a.size:Wy(a).length}function MU(a,c,p){var m=xe(a)?wy:SO;return p&&Qt(a,c,p)&&(c=t),m(a,le(c,3))}var PU=ke(function(a,c){if(a==null)return[];var p=c.length;return p>1&&Qt(a,c[0],c[1])?c=[]:p>2&&Qt(c[0],c[1],c[2])&&(c=[c[0]]),Vw(a,Dt(c,1),[])}),lp=lN||function(){return vt.Date.now()};function AU(a,c){if(typeof c!="function")throw new Gr(i);return a=be(a),function(){if(--a<1)return c.apply(this,arguments)}}function C_(a,c,p){return c=p?t:c,c=a&&c==null?a.length:c,ui(a,he,t,t,t,t,c)}function N_(a,c){var p;if(typeof c!="function")throw new Gr(i);return a=be(a),function(){return--a>0&&(p=c.apply(this,arguments)),a<=1&&(c=t),p}}var px=ke(function(a,c,p){var m=v;if(p.length){var y=Li(p,Ma(px));m|=Z}return ui(a,m,c,p,y)}),O_=ke(function(a,c,p){var m=v|w;if(p.length){var y=Li(p,Ma(O_));m|=Z}return ui(c,m,a,p,y)});function L_(a,c,p){c=p?t:c;var m=ui(a,A,t,t,t,t,t,c);return m.placeholder=L_.placeholder,m}function U_(a,c,p){c=p?t:c;var m=ui(a,U,t,t,t,t,t,c);return m.placeholder=U_.placeholder,m}function B_(a,c,p){var m,y,S,E,R,P,V=0,W=!1,j=!1,Y=!0;if(typeof a!="function")throw new Gr(i);c=Xr(c)||0,tt(p)&&(W=!!p.leading,j="maxWait"in p,S=j?yt(Xr(p.maxWait)||0,c):S,Y="trailing"in p?!!p.trailing:Y);function ie(lt){var bn=m,hi=y;return m=y=t,V=lt,E=a.apply(hi,bn),E}function ue(lt){return V=lt,R=Ec(Pe,c),W?ie(lt):E}function Ee(lt){var bn=lt-P,hi=lt-V,iE=c-bn;return j?Lt(iE,S-hi):iE}function pe(lt){var bn=lt-P,hi=lt-V;return P===t||bn>=c||bn<0||j&&hi>=S}function Pe(){var lt=lp();if(pe(lt))return Ie(lt);R=Ec(Pe,Ee(lt))}function Ie(lt){return R=t,Y&&m?ie(lt):(m=y=t,E)}function Ar(){R!==t&&Qw(R),V=0,m=P=y=R=t}function Zt(){return R===t?E:Ie(lp())}function Dr(){var lt=lp(),bn=pe(lt);if(m=arguments,y=this,P=lt,bn){if(R===t)return ue(P);if(j)return Qw(R),R=Ec(Pe,c),ie(P)}return R===t&&(R=Ec(Pe,c)),E}return Dr.cancel=Ar,Dr.flush=Zt,Dr}var DU=ke(function(a,c){return Mw(a,1,c)}),IU=ke(function(a,c,p){return Mw(a,Xr(c)||0,p)});function FU(a){return ui(a,dt)}function up(a,c){if(typeof a!="function"||c!=null&&typeof c!="function")throw new Gr(i);var p=function(){var m=arguments,y=c?c.apply(this,m):m[0],S=p.cache;if(S.has(y))return S.get(y);var E=a.apply(this,m);return p.cache=S.set(y,E)||S,E};return p.cache=new(up.Cache||ci),p}up.Cache=ci;function pp(a){if(typeof a!="function")throw new Gr(i);return function(){var c=arguments;switch(c.length){case 0:return!a.call(this);case 1:return!a.call(this,c[0]);case 2:return!a.call(this,c[0],c[1]);case 3:return!a.call(this,c[0],c[1],c[2])}return!a.apply(this,c)}}function CU(a){return N_(2,a)}var NU=vO(function(a,c){c=c.length==1&&xe(c[0])?Je(c[0],kr(le())):Je(Dt(c,1),kr(le()));var p=c.length;return ke(function(m){for(var y=-1,S=Lt(m.length,p);++y<S;)m[y]=c[y].call(this,m[y]);return Rr(a,this,m)})}),fx=ke(function(a,c){var p=Li(c,Ma(fx));return ui(a,Z,t,c,p)}),V_=ke(function(a,c){var p=Li(c,Ma(V_));return ui(a,ne,t,c,p)}),OU=pi(function(a,c){return ui(a,de,t,t,t,c)});function LU(a,c){if(typeof a!="function")throw new Gr(i);return c=c===t?c:be(c),ke(a,c)}function UU(a,c){if(typeof a!="function")throw new Gr(i);return c=c==null?0:yt(be(c),0),ke(function(p){var m=p[c],y=$i(p,0,c);return m&&Oi(y,m),Rr(a,this,y)})}function BU(a,c,p){var m=!0,y=!0;if(typeof a!="function")throw new Gr(i);return tt(p)&&(m="leading"in p?!!p.leading:m,y="trailing"in p?!!p.trailing:y),B_(a,c,{leading:m,maxWait:c,trailing:y})}function VU(a){return C_(a,1)}function WU(a,c){return fx(Zy(c),a)}function HU(){if(!arguments.length)return[];var a=arguments[0];return xe(a)?a:[a]}function $U(a){return Qr(a,h)}function jU(a,c){return c=typeof c=="function"?c:t,Qr(a,h,c)}function qU(a){return Qr(a,f|h)}function zU(a,c){return c=typeof c=="function"?c:t,Qr(a,f|h,c)}function GU(a,c){return c==null||kw(a,c,bt(c))}function vn(a,c){return a===c||a!==a&&c!==c}var KU=np(Uy),QU=np(function(a,c){return a>=c}),Do=Fw(function(){return arguments}())?Fw:function(a){return ot(a)&&$e.call(a,"callee")&&!Tw.call(a,"callee")},xe=L.isArray,ZU=ew?kr(ew):iO;function ur(a){return a!=null&&fp(a.length)&&!di(a)}function ct(a){return ot(a)&&ur(a)}function YU(a){return a===!0||a===!1||ot(a)&&Kt(a)==gn}var ji=pN||wx,XU=tw?kr(tw):oO;function JU(a){return ot(a)&&a.nodeType===1&&!Rc(a)}function e2(a){if(a==null)return!0;if(ur(a)&&(xe(a)||typeof a=="string"||typeof a.splice=="function"||ji(a)||Pa(a)||Do(a)))return!a.length;var c=Ut(a);if(c==yn||c==xn)return!a.size;if(_c(a))return!Wy(a).length;for(var p in a)if($e.call(a,p))return!1;return!0}function t2(a,c){return vc(a,c)}function r2(a,c,p){p=typeof p=="function"?p:t;var m=p?p(a,c):t;return m===t?vc(a,c,t,p):!!m}function dx(a){if(!ot(a))return!1;var c=Kt(a);return c==oi||c==bo||typeof a.message=="string"&&typeof a.name=="string"&&!Rc(a)}function n2(a){return typeof a=="number"&&vw(a)}function di(a){if(!tt(a))return!1;var c=Kt(a);return c==ga||c==Mb||c==Er||c==kF}function W_(a){return typeof a=="number"&&a==be(a)}function fp(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=Q}function tt(a){var c=typeof a;return a!=null&&(c=="object"||c=="function")}function ot(a){return a!=null&&typeof a=="object"}var H_=rw?kr(rw):sO;function i2(a,c){return a===c||Vy(a,c,nx(c))}function o2(a,c,p){return p=typeof p=="function"?p:t,Vy(a,c,nx(c),p)}function a2(a){return $_(a)&&a!=+a}function s2(a){if(jO(a))throw new ge(n);return Cw(a)}function c2(a){return a===null}function l2(a){return a==null}function $_(a){return typeof a=="number"||ot(a)&&Kt(a)==sc}function Rc(a){if(!ot(a)||Kt(a)!=ai)return!1;var c=Bu(a);if(c===null)return!0;var p=$e.call(c,"constructor")&&c.constructor;return typeof p=="function"&&p instanceof p&&Nu.call(p)==oN}var mx=nw?kr(nw):cO;function u2(a){return W_(a)&&a>=-Q&&a<=Q}var j_=iw?kr(iw):lO;function dp(a){return typeof a=="string"||!xe(a)&&ot(a)&&Kt(a)==lc}function Pr(a){return typeof a=="symbol"||ot(a)&&Kt(a)==Ru}var Pa=ow?kr(ow):uO;function p2(a){return a===t}function f2(a){return ot(a)&&Ut(a)==uc}function d2(a){return ot(a)&&Kt(a)==PF}var m2=np(Hy),h2=np(function(a,c){return a<=c});function q_(a){if(!a)return[];if(ur(a))return dp(a)?Tn(a):lr(a);if(dc&&a[dc])return GC(a[dc]());var c=Ut(a),p=c==yn?Py:c==xn?Iu:Aa;return p(a)}function mi(a){if(!a)return a===0?a:0;if(a=Xr(a),a===K||a===-K){var c=a<0?-1:1;return c*te}return a===a?a:0}function be(a){var c=mi(a),p=c%1;return c===c?p?c-p:c:0}function z_(a){return a?ko(be(a),0,re):0}function Xr(a){if(typeof a=="number")return a;if(Pr(a))return me;if(tt(a)){var c=typeof a.valueOf=="function"?a.valueOf():a;a=tt(c)?c+"":c}if(typeof a!="string")return a===0?a:+a;a=pw(a);var p=ZF.test(a);return p||XF.test(a)?AC(a.slice(2),p?2:8):QF.test(a)?me:+a}function G_(a){return Ln(a,pr(a))}function g2(a){return a?ko(be(a),-Q,Q):a===0?a:0}function Ve(a){return a==null?"":Mr(a)}var y2=Ra(function(a,c){if(_c(c)||ur(c)){Ln(c,bt(c),a);return}for(var p in c)$e.call(c,p)&&xc(a,p,c[p])}),K_=Ra(function(a,c){Ln(c,pr(c),a)}),mp=Ra(function(a,c,p,m){Ln(c,pr(c),a,m)}),x2=Ra(function(a,c,p,m){Ln(c,bt(c),a,m)}),T2=pi(Ny);function S2(a,c){var p=Ea(a);return c==null?p:Rw(p,c)}var v2=ke(function(a,c){a=ze(a);var p=-1,m=c.length,y=m>2?c[2]:t;for(y&&Qt(c[0],c[1],y)&&(m=1);++p<m;)for(var S=c[p],E=pr(S),R=-1,P=E.length;++R<P;){var V=E[R],W=a[V];(W===t||vn(W,ba[V])&&!$e.call(a,V))&&(a[V]=S[V])}return a}),b2=ke(function(a){return a.push(t,p_),Rr(Q_,t,a)});function w2(a,c){return sw(a,le(c,3),On)}function _2(a,c){return sw(a,le(c,3),Ly)}function E2(a,c){return a==null?a:Oy(a,le(c,3),pr)}function R2(a,c){return a==null?a:Dw(a,le(c,3),pr)}function k2(a,c){return a&&On(a,le(c,3))}function M2(a,c){return a&&Ly(a,le(c,3))}function P2(a){return a==null?[]:Qu(a,bt(a))}function A2(a){return a==null?[]:Qu(a,pr(a))}function hx(a,c,p){var m=a==null?t:Mo(a,c);return m===t?p:m}function D2(a,c){return a!=null&&m_(a,c,eO)}function gx(a,c){return a!=null&&m_(a,c,tO)}var I2=a_(function(a,c,p){c!=null&&typeof c.toString!="function"&&(c=Ou.call(c)),a[c]=p},xx(fr)),F2=a_(function(a,c,p){c!=null&&typeof c.toString!="function"&&(c=Ou.call(c)),$e.call(a,c)?a[c].push(p):a[c]=[p]},le),C2=ke(Sc);function bt(a){return ur(a)?_w(a):Wy(a)}function pr(a){return ur(a)?_w(a,!0):pO(a)}function N2(a,c){var p={};return c=le(c,3),On(a,function(m,y,S){li(p,c(m,y,S),m)}),p}function O2(a,c){var p={};return c=le(c,3),On(a,function(m,y,S){li(p,y,c(m,y,S))}),p}var L2=Ra(function(a,c,p){Zu(a,c,p)}),Q_=Ra(function(a,c,p,m){Zu(a,c,p,m)}),U2=pi(function(a,c){var p={};if(a==null)return p;var m=!1;c=Je(c,function(S){return S=Hi(S,a),m||(m=S.length>1),S}),Ln(a,tx(a),p),m&&(p=Qr(p,f|d|h,IO));for(var y=c.length;y--;)Gy(p,c[y]);return p});function B2(a,c){return Z_(a,pp(le(c)))}var V2=pi(function(a,c){return a==null?{}:dO(a,c)});function Z_(a,c){if(a==null)return{};var p=Je(tx(a),function(m){return[m]});return c=le(c),Ww(a,p,function(m,y){return c(m,y[0])})}function W2(a,c,p){c=Hi(c,a);var m=-1,y=c.length;for(y||(y=1,a=t);++m<y;){var S=a==null?t:a[Un(c[m])];S===t&&(m=y,S=p),a=di(S)?S.call(a):S}return a}function H2(a,c,p){return a==null?a:bc(a,c,p)}function $2(a,c,p,m){return m=typeof m=="function"?m:t,a==null?a:bc(a,c,p,m)}var Y_=l_(bt),X_=l_(pr);function j2(a,c,p){var m=xe(a),y=m||ji(a)||Pa(a);if(c=le(c,4),p==null){var S=a&&a.constructor;y?p=m?new S:[]:tt(a)?p=di(S)?Ea(Bu(a)):{}:p={}}return(y?zr:On)(a,function(E,R,P){return c(p,E,R,P)}),p}function q2(a,c){return a==null?!0:Gy(a,c)}function z2(a,c,p){return a==null?a:zw(a,c,Zy(p))}function G2(a,c,p,m){return m=typeof m=="function"?m:t,a==null?a:zw(a,c,Zy(p),m)}function Aa(a){return a==null?[]:My(a,bt(a))}function K2(a){return a==null?[]:My(a,pr(a))}function Q2(a,c,p){return p===t&&(p=c,c=t),p!==t&&(p=Xr(p),p=p===p?p:0),c!==t&&(c=Xr(c),c=c===c?c:0),ko(Xr(a),c,p)}function Z2(a,c,p){return c=mi(c),p===t?(p=c,c=0):p=mi(p),a=Xr(a),rO(a,c,p)}function Y2(a,c,p){if(p&&typeof p!="boolean"&&Qt(a,c,p)&&(c=p=t),p===t&&(typeof c=="boolean"?(p=c,c=t):typeof a=="boolean"&&(p=a,a=t)),a===t&&c===t?(a=0,c=1):(a=mi(a),c===t?(c=a,a=0):c=mi(c)),a>c){var m=a;a=c,c=m}if(p||a%1||c%1){var y=bw();return Lt(a+y*(c-a+PC("1e-"+((y+"").length-1))),c)}return jy(a,c)}var X2=ka(function(a,c,p){return c=c.toLowerCase(),a+(p?J_(c):c)});function J_(a){return yx(Ve(a).toLowerCase())}function eE(a){return a=Ve(a),a&&a.replace(eC,HC).replace(TC,"")}function J2(a,c,p){a=Ve(a),c=Mr(c);var m=a.length;p=p===t?m:ko(be(p),0,m);var y=p;return p-=c.length,p>=0&&a.slice(p,y)==c}function eB(a){return a=Ve(a),a&&CF.test(a)?a.replace(Db,$C):a}function tB(a){return a=Ve(a),a&&VF.test(a)?a.replace(fy,"\\$&"):a}var rB=ka(function(a,c,p){return a+(p?"-":"")+c.toLowerCase()}),nB=ka(function(a,c,p){return a+(p?" ":"")+c.toLowerCase()}),iB=n_("toLowerCase");function oB(a,c,p){a=Ve(a),c=be(c);var m=c?va(a):0;if(!c||m>=c)return a;var y=(c-m)/2;return rp($u(y),p)+a+rp(Hu(y),p)}function aB(a,c,p){a=Ve(a),c=be(c);var m=c?va(a):0;return c&&m<c?a+rp(c-m,p):a}function sB(a,c,p){a=Ve(a),c=be(c);var m=c?va(a):0;return c&&m<c?rp(c-m,p)+a:a}function cB(a,c,p){return p||c==null?c=0:c&&(c=+c),hN(Ve(a).replace(dy,""),c||0)}function lB(a,c,p){return(p?Qt(a,c,p):c===t)?c=1:c=be(c),qy(Ve(a),c)}function uB(){var a=arguments,c=Ve(a[0]);return a.length<3?c:c.replace(a[1],a[2])}var pB=ka(function(a,c,p){return a+(p?"_":"")+c.toLowerCase()});function fB(a,c,p){return p&&typeof p!="number"&&Qt(a,c,p)&&(c=p=t),p=p===t?re:p>>>0,p?(a=Ve(a),a&&(typeof c=="string"||c!=null&&!mx(c))&&(c=Mr(c),!c&&Sa(a))?$i(Tn(a),0,p):a.split(c,p)):[]}var dB=ka(function(a,c,p){return a+(p?" ":"")+yx(c)});function mB(a,c,p){return a=Ve(a),p=p==null?0:ko(be(p),0,a.length),c=Mr(c),a.slice(p,p+c.length)==c}function hB(a,c,p){var m=T.templateSettings;p&&Qt(a,c,p)&&(c=t),a=Ve(a),c=mp({},c,m,u_);var y=mp({},c.imports,m.imports,u_),S=bt(y),E=My(y,S),R,P,V=0,W=c.interpolate||ku,j="__p += '",Y=Ay((c.escape||ku).source+"|"+W.source+"|"+(W===Ib?KF:ku).source+"|"+(c.evaluate||ku).source+"|$","g"),ie="//# sourceURL="+($e.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++_C+"]")+`
`;a.replace(Y,function(pe,Pe,Ie,Ar,Zt,Dr){return Ie||(Ie=Ar),j+=a.slice(V,Dr).replace(tC,jC),Pe&&(R=!0,j+=`' +
__e(`+Pe+`) +
'`),Zt&&(P=!0,j+=`';
`+Zt+`;
__p += '`),Ie&&(j+=`' +
((__t = (`+Ie+`)) == null ? '' : __t) +
'`),V=Dr+pe.length,pe}),j+=`';
`;var ue=$e.call(c,"variable")&&c.variable;if(!ue)j=`with (obj) {
`+j+`
}
`;else if(zF.test(ue))throw new ge(o);j=(P?j.replace(AF,""):j).replace(DF,"$1").replace(IF,"$1;"),j="function("+(ue||"obj")+`) {
`+(ue?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(R?", __e = _.escape":"")+(P?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+j+`return __p
}`;var Ee=rE(function(){return Oe(S,ie+"return "+j).apply(t,E)});if(Ee.source=j,dx(Ee))throw Ee;return Ee}function gB(a){return Ve(a).toLowerCase()}function yB(a){return Ve(a).toUpperCase()}function xB(a,c,p){if(a=Ve(a),a&&(p||c===t))return pw(a);if(!a||!(c=Mr(c)))return a;var m=Tn(a),y=Tn(c),S=fw(m,y),E=dw(m,y)+1;return $i(m,S,E).join("")}function TB(a,c,p){if(a=Ve(a),a&&(p||c===t))return a.slice(0,hw(a)+1);if(!a||!(c=Mr(c)))return a;var m=Tn(a),y=dw(m,Tn(c))+1;return $i(m,0,y).join("")}function SB(a,c,p){if(a=Ve(a),a&&(p||c===t))return a.replace(dy,"");if(!a||!(c=Mr(c)))return a;var m=Tn(a),y=fw(m,Tn(c));return $i(m,y).join("")}function vB(a,c){var p=At,m=it;if(tt(c)){var y="separator"in c?c.separator:y;p="length"in c?be(c.length):p,m="omission"in c?Mr(c.omission):m}a=Ve(a);var S=a.length;if(Sa(a)){var E=Tn(a);S=E.length}if(p>=S)return a;var R=p-va(m);if(R<1)return m;var P=E?$i(E,0,R).join(""):a.slice(0,R);if(y===t)return P+m;if(E&&(R+=P.length-R),mx(y)){if(a.slice(R).search(y)){var V,W=P;for(y.global||(y=Ay(y.source,Ve(Fb.exec(y))+"g")),y.lastIndex=0;V=y.exec(W);)var j=V.index;P=P.slice(0,j===t?R:j)}}else if(a.indexOf(Mr(y),R)!=R){var Y=P.lastIndexOf(y);Y>-1&&(P=P.slice(0,Y))}return P+m}function bB(a){return a=Ve(a),a&&FF.test(a)?a.replace(Ab,YC):a}var wB=ka(function(a,c,p){return a+(p?" ":"")+c.toUpperCase()}),yx=n_("toUpperCase");function tE(a,c,p){return a=Ve(a),c=p?t:c,c===t?zC(a)?eN(a):LC(a):a.match(c)||[]}var rE=ke(function(a,c){try{return Rr(a,t,c)}catch(p){return dx(p)?p:new ge(p)}}),_B=pi(function(a,c){return zr(c,function(p){p=Un(p),li(a,p,px(a[p],a))}),a});function EB(a){var c=a==null?0:a.length,p=le();return a=c?Je(a,function(m){if(typeof m[1]!="function")throw new Gr(i);return[p(m[0]),m[1]]}):[],ke(function(m){for(var y=-1;++y<c;){var S=a[y];if(Rr(S[0],this,m))return Rr(S[1],this,m)}})}function RB(a){return YN(Qr(a,f))}function xx(a){return function(){return a}}function kB(a,c){return a==null||a!==a?c:a}var MB=o_(),PB=o_(!0);function fr(a){return a}function Tx(a){return Nw(typeof a=="function"?a:Qr(a,f))}function AB(a){return Lw(Qr(a,f))}function DB(a,c){return Uw(a,Qr(c,f))}var IB=ke(function(a,c){return function(p){return Sc(p,a,c)}}),FB=ke(function(a,c){return function(p){return Sc(a,p,c)}});function Sx(a,c,p){var m=bt(c),y=Qu(c,m);p==null&&!(tt(c)&&(y.length||!m.length))&&(p=c,c=a,a=this,y=Qu(c,bt(c)));var S=!(tt(p)&&"chain"in p)||!!p.chain,E=di(a);return zr(y,function(R){var P=c[R];a[R]=P,E&&(a.prototype[R]=function(){var V=this.__chain__;if(S||V){var W=a(this.__wrapped__),j=W.__actions__=lr(this.__actions__);return j.push({func:P,args:arguments,thisArg:a}),W.__chain__=V,W}return P.apply(a,Oi([this.value()],arguments))})}),a}function CB(){return vt._===this&&(vt._=aN),this}function vx(){}function NB(a){return a=be(a),ke(function(c){return Bw(c,a)})}var OB=Xy(Je),LB=Xy(aw),UB=Xy(wy);function nE(a){return ox(a)?_y(Un(a)):mO(a)}function BB(a){return function(c){return a==null?t:Mo(a,c)}}var VB=s_(),WB=s_(!0);function bx(){return[]}function wx(){return!1}function HB(){return{}}function $B(){return""}function jB(){return!0}function qB(a,c){if(a=be(a),a<1||a>Q)return[];var p=re,m=Lt(a,re);c=le(c),a-=re;for(var y=ky(m,c);++p<a;)c(p);return y}function zB(a){return xe(a)?Je(a,Un):Pr(a)?[a]:lr(w_(Ve(a)))}function GB(a){var c=++iN;return Ve(a)+c}var KB=tp(function(a,c){return a+c},0),QB=Jy("ceil"),ZB=tp(function(a,c){return a/c},1),YB=Jy("floor");function XB(a){return a&&a.length?Ku(a,fr,Uy):t}function JB(a,c){return a&&a.length?Ku(a,le(c,2),Uy):t}function eV(a){return lw(a,fr)}function tV(a,c){return lw(a,le(c,2))}function rV(a){return a&&a.length?Ku(a,fr,Hy):t}function nV(a,c){return a&&a.length?Ku(a,le(c,2),Hy):t}var iV=tp(function(a,c){return a*c},1),oV=Jy("round"),aV=tp(function(a,c){return a-c},0);function sV(a){return a&&a.length?Ry(a,fr):0}function cV(a,c){return a&&a.length?Ry(a,le(c,2)):0}return T.after=AU,T.ary=C_,T.assign=y2,T.assignIn=K_,T.assignInWith=mp,T.assignWith=x2,T.at=T2,T.before=N_,T.bind=px,T.bindAll=_B,T.bindKey=O_,T.castArray=HU,T.chain=D_,T.chunk=YO,T.compact=XO,T.concat=JO,T.cond=EB,T.conforms=RB,T.constant=xx,T.countBy=sU,T.create=S2,T.curry=L_,T.curryRight=U_,T.debounce=B_,T.defaults=v2,T.defaultsDeep=b2,T.defer=DU,T.delay=IU,T.difference=eL,T.differenceBy=tL,T.differenceWith=rL,T.drop=nL,T.dropRight=iL,T.dropRightWhile=oL,T.dropWhile=aL,T.fill=sL,T.filter=lU,T.flatMap=fU,T.flatMapDeep=dU,T.flatMapDepth=mU,T.flatten=k_,T.flattenDeep=cL,T.flattenDepth=lL,T.flip=FU,T.flow=MB,T.flowRight=PB,T.fromPairs=uL,T.functions=P2,T.functionsIn=A2,T.groupBy=hU,T.initial=fL,T.intersection=dL,T.intersectionBy=mL,T.intersectionWith=hL,T.invert=I2,T.invertBy=F2,T.invokeMap=yU,T.iteratee=Tx,T.keyBy=xU,T.keys=bt,T.keysIn=pr,T.map=cp,T.mapKeys=N2,T.mapValues=O2,T.matches=AB,T.matchesProperty=DB,T.memoize=up,T.merge=L2,T.mergeWith=Q_,T.method=IB,T.methodOf=FB,T.mixin=Sx,T.negate=pp,T.nthArg=NB,T.omit=U2,T.omitBy=B2,T.once=CU,T.orderBy=TU,T.over=OB,T.overArgs=NU,T.overEvery=LB,T.overSome=UB,T.partial=fx,T.partialRight=V_,T.partition=SU,T.pick=V2,T.pickBy=Z_,T.property=nE,T.propertyOf=BB,T.pull=TL,T.pullAll=P_,T.pullAllBy=SL,T.pullAllWith=vL,T.pullAt=bL,T.range=VB,T.rangeRight=WB,T.rearg=OU,T.reject=wU,T.remove=wL,T.rest=LU,T.reverse=lx,T.sampleSize=EU,T.set=H2,T.setWith=$2,T.shuffle=RU,T.slice=_L,T.sortBy=PU,T.sortedUniq=DL,T.sortedUniqBy=IL,T.split=fB,T.spread=UU,T.tail=FL,T.take=CL,T.takeRight=NL,T.takeRightWhile=OL,T.takeWhile=LL,T.tap=XL,T.throttle=BU,T.thru=sp,T.toArray=q_,T.toPairs=Y_,T.toPairsIn=X_,T.toPath=zB,T.toPlainObject=G_,T.transform=j2,T.unary=VU,T.union=UL,T.unionBy=BL,T.unionWith=VL,T.uniq=WL,T.uniqBy=HL,T.uniqWith=$L,T.unset=q2,T.unzip=ux,T.unzipWith=A_,T.update=z2,T.updateWith=G2,T.values=Aa,T.valuesIn=K2,T.without=jL,T.words=tE,T.wrap=WU,T.xor=qL,T.xorBy=zL,T.xorWith=GL,T.zip=KL,T.zipObject=QL,T.zipObjectDeep=ZL,T.zipWith=YL,T.entries=Y_,T.entriesIn=X_,T.extend=K_,T.extendWith=mp,Sx(T,T),T.add=KB,T.attempt=rE,T.camelCase=X2,T.capitalize=J_,T.ceil=QB,T.clamp=Q2,T.clone=$U,T.cloneDeep=qU,T.cloneDeepWith=zU,T.cloneWith=jU,T.conformsTo=GU,T.deburr=eE,T.defaultTo=kB,T.divide=ZB,T.endsWith=J2,T.eq=vn,T.escape=eB,T.escapeRegExp=tB,T.every=cU,T.find=uU,T.findIndex=E_,T.findKey=w2,T.findLast=pU,T.findLastIndex=R_,T.findLastKey=_2,T.floor=YB,T.forEach=I_,T.forEachRight=F_,T.forIn=E2,T.forInRight=R2,T.forOwn=k2,T.forOwnRight=M2,T.get=hx,T.gt=KU,T.gte=QU,T.has=D2,T.hasIn=gx,T.head=M_,T.identity=fr,T.includes=gU,T.indexOf=pL,T.inRange=Z2,T.invoke=C2,T.isArguments=Do,T.isArray=xe,T.isArrayBuffer=ZU,T.isArrayLike=ur,T.isArrayLikeObject=ct,T.isBoolean=YU,T.isBuffer=ji,T.isDate=XU,T.isElement=JU,T.isEmpty=e2,T.isEqual=t2,T.isEqualWith=r2,T.isError=dx,T.isFinite=n2,T.isFunction=di,T.isInteger=W_,T.isLength=fp,T.isMap=H_,T.isMatch=i2,T.isMatchWith=o2,T.isNaN=a2,T.isNative=s2,T.isNil=l2,T.isNull=c2,T.isNumber=$_,T.isObject=tt,T.isObjectLike=ot,T.isPlainObject=Rc,T.isRegExp=mx,T.isSafeInteger=u2,T.isSet=j_,T.isString=dp,T.isSymbol=Pr,T.isTypedArray=Pa,T.isUndefined=p2,T.isWeakMap=f2,T.isWeakSet=d2,T.join=gL,T.kebabCase=rB,T.last=Yr,T.lastIndexOf=yL,T.lowerCase=nB,T.lowerFirst=iB,T.lt=m2,T.lte=h2,T.max=XB,T.maxBy=JB,T.mean=eV,T.meanBy=tV,T.min=rV,T.minBy=nV,T.stubArray=bx,T.stubFalse=wx,T.stubObject=HB,T.stubString=$B,T.stubTrue=jB,T.multiply=iV,T.nth=xL,T.noConflict=CB,T.noop=vx,T.now=lp,T.pad=oB,T.padEnd=aB,T.padStart=sB,T.parseInt=cB,T.random=Y2,T.reduce=vU,T.reduceRight=bU,T.repeat=lB,T.replace=uB,T.result=W2,T.round=oV,T.runInContext=k,T.sample=_U,T.size=kU,T.snakeCase=pB,T.some=MU,T.sortedIndex=EL,T.sortedIndexBy=RL,T.sortedIndexOf=kL,T.sortedLastIndex=ML,T.sortedLastIndexBy=PL,T.sortedLastIndexOf=AL,T.startCase=dB,T.startsWith=mB,T.subtract=aV,T.sum=sV,T.sumBy=cV,T.template=hB,T.times=qB,T.toFinite=mi,T.toInteger=be,T.toLength=z_,T.toLower=gB,T.toNumber=Xr,T.toSafeInteger=g2,T.toString=Ve,T.toUpper=yB,T.trim=xB,T.trimEnd=TB,T.trimStart=SB,T.truncate=vB,T.unescape=bB,T.uniqueId=GB,T.upperCase=wB,T.upperFirst=yx,T.each=I_,T.eachRight=F_,T.first=M_,Sx(T,function(){var a={};return On(T,function(c,p){$e.call(T.prototype,p)||(a[p]=c)}),a}(),{chain:!1}),T.VERSION=e,zr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){T[a].placeholder=T}),zr(["drop","take"],function(a,c){Ae.prototype[a]=function(p){p=p===t?1:yt(be(p),0);var m=this.__filtered__&&!c?new Ae(this):this.clone();return m.__filtered__?m.__takeCount__=Lt(p,m.__takeCount__):m.__views__.push({size:Lt(p,re),type:a+(m.__dir__<0?"Right":"")}),m},Ae.prototype[a+"Right"]=function(p){return this.reverse()[a](p).reverse()}}),zr(["filter","map","takeWhile"],function(a,c){var p=c+1,m=p==D||p==q;Ae.prototype[a]=function(y){var S=this.clone();return S.__iteratees__.push({iteratee:le(y,3),type:p}),S.__filtered__=S.__filtered__||m,S}}),zr(["head","last"],function(a,c){var p="take"+(c?"Right":"");Ae.prototype[a]=function(){return this[p](1).value()[0]}}),zr(["initial","tail"],function(a,c){var p="drop"+(c?"":"Right");Ae.prototype[a]=function(){return this.__filtered__?new Ae(this):this[p](1)}}),Ae.prototype.compact=function(){return this.filter(fr)},Ae.prototype.find=function(a){return this.filter(a).head()},Ae.prototype.findLast=function(a){return this.reverse().find(a)},Ae.prototype.invokeMap=ke(function(a,c){return typeof a=="function"?new Ae(this):this.map(function(p){return Sc(p,a,c)})}),Ae.prototype.reject=function(a){return this.filter(pp(le(a)))},Ae.prototype.slice=function(a,c){a=be(a);var p=this;return p.__filtered__&&(a>0||c<0)?new Ae(p):(a<0?p=p.takeRight(-a):a&&(p=p.drop(a)),c!==t&&(c=be(c),p=c<0?p.dropRight(-c):p.take(c-a)),p)},Ae.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},Ae.prototype.toArray=function(){return this.take(re)},On(Ae.prototype,function(a,c){var p=/^(?:filter|find|map|reject)|While$/.test(c),m=/^(?:head|last)$/.test(c),y=T[m?"take"+(c=="last"?"Right":""):c],S=m||/^find/.test(c);y&&(T.prototype[c]=function(){var E=this.__wrapped__,R=m?[1]:arguments,P=E instanceof Ae,V=R[0],W=P||xe(E),j=function(Pe){var Ie=y.apply(T,Oi([Pe],R));return m&&Y?Ie[0]:Ie};W&&p&&typeof V=="function"&&V.length!=1&&(P=W=!1);var Y=this.__chain__,ie=!!this.__actions__.length,ue=S&&!Y,Ee=P&&!ie;if(!S&&W){E=Ee?E:new Ae(this);var pe=a.apply(E,R);return pe.__actions__.push({func:sp,args:[j],thisArg:t}),new Kr(pe,Y)}return ue&&Ee?a.apply(this,R):(pe=this.thru(j),ue?m?pe.value()[0]:pe.value():pe)})}),zr(["pop","push","shift","sort","splice","unshift"],function(a){var c=Fu[a],p=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",m=/^(?:pop|shift)$/.test(a);T.prototype[a]=function(){var y=arguments;if(m&&!this.__chain__){var S=this.value();return c.apply(xe(S)?S:[],y)}return this[p](function(E){return c.apply(xe(E)?E:[],y)})}}),On(Ae.prototype,function(a,c){var p=T[c];if(p){var m=p.name+"";$e.call(_a,m)||(_a[m]=[]),_a[m].push({name:c,func:p})}}),_a[ep(t,w).name]=[{name:"wrapper",func:t}],Ae.prototype.clone=bN,Ae.prototype.reverse=wN,Ae.prototype.value=_N,T.prototype.at=JL,T.prototype.chain=eU,T.prototype.commit=tU,T.prototype.next=rU,T.prototype.plant=iU,T.prototype.reverse=oU,T.prototype.toJSON=T.prototype.valueOf=T.prototype.value=aU,T.prototype.first=T.prototype.head,dc&&(T.prototype[dc]=nU),T},Ui=tN();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(vt._=Ui,define(function(){return Ui})):wo?((wo.exports=Ui)._=Ui,Ty._=Ui):vt._=Ui}).call(zs)});var RI=at((p2e,EI)=>{"use strict";EI.exports=wI;function wI(t,e,r){t instanceof RegExp&&(t=bI(t,r)),e instanceof RegExp&&(e=bI(e,r));var n=_I(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}function bI(t,e){var r=e.match(t);return r?r[0]:null}wI.range=_I;function _I(t,e,r){var n,i,o,s,l,u=r.indexOf(t),f=r.indexOf(e,u+1),d=u;if(u>=0&&f>0){if(t===e)return[u,f];for(n=[],o=r.length;d>=0&&!l;)d==u?(n.push(d),u=r.indexOf(t,d+1)):n.length==1?l=[n.pop(),f]:(i=n.pop(),i<o&&(o=i,s=f),f=r.indexOf(e,d+1)),d=u<f&&u>=0?u:f;n.length&&(l=[o,s])}return l}});var CI=at((f2e,FI)=>{var kI=RI();FI.exports=iQ;var MI="\0SLASH"+Math.random()+"\0",PI="\0OPEN"+Math.random()+"\0",cv="\0CLOSE"+Math.random()+"\0",AI="\0COMMA"+Math.random()+"\0",DI="\0PERIOD"+Math.random()+"\0";function sv(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function rQ(t){return t.split("\\\\").join(MI).split("\\{").join(PI).split("\\}").join(cv).split("\\,").join(AI).split("\\.").join(DI)}function nQ(t){return t.split(MI).join("\\").split(PI).join("{").split(cv).join("}").split(AI).join(",").split(DI).join(".")}function II(t){if(!t)return[""];var e=[],r=kI("{","}",t);if(!r)return t.split(",");var n=r.pre,i=r.body,o=r.post,s=n.split(",");s[s.length-1]+="{"+i+"}";var l=II(o);return o.length&&(s[s.length-1]+=l.shift(),s.push.apply(s,l)),e.push.apply(e,s),e}function iQ(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),eu(rQ(t),!0).map(nQ)):[]}function oQ(t){return"{"+t+"}"}function aQ(t){return/^-?0\d/.test(t)}function sQ(t,e){return t<=e}function cQ(t,e){return t>=e}function eu(t,e){var r=[],n=kI("{","}",t);if(!n)return[t];var i=n.pre,o=n.post.length?eu(n.post,!1):[""];if(/\$$/.test(n.pre))for(var s=0;s<o.length;s++){var l=i+"{"+n.body+"}"+o[s];r.push(l)}else{var u=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),f=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),d=u||f,h=n.body.indexOf(",")>=0;if(!d&&!h)return n.post.match(/,.*\}/)?(t=n.pre+"{"+n.body+cv+n.post,eu(t)):[t];var g;if(d)g=n.body.split(/\.\./);else if(g=II(n.body),g.length===1&&(g=eu(g[0],!1).map(oQ),g.length===1))return o.map(function(O){return n.pre+g[0]+O});var x;if(d){var v=sv(g[0]),w=sv(g[1]),N=Math.max(g[0].length,g[1].length),A=g.length==3?Math.abs(sv(g[2])):1,U=sQ,Z=w<v;Z&&(A*=-1,U=cQ);var ne=g.some(aQ);x=[];for(var he=v;U(he,w);he+=A){var de;if(f)de=String.fromCharCode(he),de==="\\"&&(de="");else if(de=String(he),ne){var dt=N-de.length;if(dt>0){var At=new Array(dt+1).join("0");he<0?de="-"+At+de.slice(1):de=At+de}}x.push(de)}}else{x=[];for(var it=0;it<g.length;it++)x.push.apply(x,eu(g[it],!1))}for(var it=0;it<x.length;it++)for(var s=0;s<o.length;s++){var l=i+x[it]+o[s];(!e||d||l)&&r.push(l)}}return r}});var KZ={};mV(KZ,{default:()=>EF});module.exports=hV(KZ);var _x="cursorless.command",gp=class{constructor(e){this.baseTitle=e}get title(){return`Cursorless: ${this.baseTitle}`}},ut=class extends gp{constructor(){super(...arguments);this.isVisible=!1}},mt=class extends gp{constructor(){super(...arguments);this.isVisible=!0}};var ZZ={"cursorless.toggleDecorations":new mt("Toggle decorations"),"cursorless.recomputeDecorationStyles":new mt("Recompute decoration styles"),"cursorless.recordTestCase":new mt("Record test case"),"cursorless.recordOneTestCaseThenPause":new mt("Record one test case, then pause"),"cursorless.pauseRecording":new mt("Pause test case recording"),"cursorless.resumeRecording":new mt("Resume test case recording"),"cursorless.recordScopeTests.showUnimplementedFacets":new mt("Bulk record unimplemented scope facets"),"cursorless.recordScopeTests.saveActiveDocument":new mt("Bulk save scope tests for the active document"),"cursorless.showDocumentation":new mt("Show documentation"),"cursorless.showScopeVisualizer":new mt("Show the scope visualizer"),"cursorless.hideScopeVisualizer":new mt("Hide the scope visualizer"),"cursorless.analyzeCommandHistory":new mt("Analyze collected command history"),"cursorless.tutorial.start":new ut("Start a tutorial"),"cursorless.tutorial.next":new mt("Tutorial next"),"cursorless.tutorial.previous":new mt("Tutorial previous"),"cursorless.tutorial.restart":new mt("Tutorial restart"),"cursorless.tutorial.resume":new mt("Tutorial resume"),"cursorless.tutorial.list":new mt("Tutorial list"),"cursorless.documentationOpened":new ut("Used by talon to notify us that the docs have been opened; for use with tutorial"),"cursorless.command":new ut("The core cursorless command"),"cursorless.repeatPreviousCommand":new mt("Repeat the previous Cursorless command"),"cursorless.showQuickPick":new ut("Pop up a quick pick of all cursorless commands"),"cursorless.showCheatsheet":new ut("Display the cursorless cheatsheet"),"cursorless.internal.updateCheatsheetDefaults":new ut("Update the default values of the cheatsheet payload used on the website and for local development. Be sure to run this on stock community and cursorless."),"cursorless.private.logQuickActions":new ut("Log the quick actions available at the current cursor position"),"cursorless.takeSnapshot":new ut("Take a snapshot of the current editor state"),"cursorless.keyboard.escape":new ut("Should be mapped to the escape key when using cursorless keyboard. By default, exits modal keyboard mode, but changes behaviour when Cursorless is expecting a continuation keystroke.  For example, when you type a color and Cursorless is waiting for a character, it cancels the color and switches back to modal mode."),"cursorless.keyboard.targeted.targetHat":new ut("Sets the keyboard target to the given hat"),"cursorless.keyboard.targeted.targetScope":new ut("Sets the keyboard target to the scope containing the current target"),"cursorless.keyboard.targeted.targetSelection":new ut("Sets the keyboard target to the current selection"),"cursorless.keyboard.targeted.clearTarget":new ut("Clears the current keyboard target"),"cursorless.keyboard.targeted.runActionOnTarget":new ut("Run the given action on the current keyboard target"),"cursorless.keyboard.modal.modeOn":new ut("Turn on the cursorless modal mode"),"cursorless.keyboard.modal.modeOff":new ut("Turn off the cursorless modal mode"),"cursorless.keyboard.modal.modeToggle":new ut("Toggle the cursorless modal mode"),"cursorless.keyboard.undoTarget":new ut("Undo keyboard targeting changes"),"cursorless.keyboard.redoTarget":new ut("Redo keyboard targeting changes")};var yp=class{constructor(e,r){this.callback=e;this.debounceDelayMs=r;this.timeoutHandle=null;this.run=this.run.bind(this)}run(){this.timeoutHandle!=null&&clearTimeout(this.timeoutHandle),this.timeoutHandle=setTimeout(()=>{this.callback(),this.timeoutHandle=null},this.debounceDelayMs)}dispose(){this.timeoutHandle!=null&&clearTimeout(this.timeoutHandle)}};var xp=class extends Error{constructor(e){super(`Language '${e}' is not implemented yet; See https://www.cursorless.org/docs/contributing/adding-a-new-language/`),this.name="UnsupportedLanguageError"}};var Tp=class extends Error{constructor(){super("Cursorless Talon version is ahead of Cursorless VSCode extension version. Please update Cursorless VSCode.")}},wt=class extends Error{constructor(e){super(`Couldn't find containing ${e}.`),this.name="NoContainingScopeError"}};var Sp=class{constructor(){this.signals={prePhrase:{getVersion:async()=>null}}}async getFocusedElementType(){return this.focusedElementType}setFocusedElementType(e){this.focusedElementType=e}};var gV=typeof global=="object"&&global&&global.Object===Object&&global,vp=gV;var yV=typeof self=="object"&&self&&self.Object===Object&&self,xV=vp||yV||Function("return this")(),_t=xV;var TV=_t.Symbol,Yt=TV;var aE=Object.prototype,SV=aE.hasOwnProperty,vV=aE.toString,kc=Yt?Yt.toStringTag:void 0;function bV(t){var e=SV.call(t,kc),r=t[kc];try{t[kc]=void 0;var n=!0}catch{}var i=vV.call(t);return n&&(e?t[kc]=r:delete t[kc]),i}var sE=bV;var wV=Object.prototype,_V=wV.toString;function EV(t){return _V.call(t)}var cE=EV;var RV="[object Null]",kV="[object Undefined]",lE=Yt?Yt.toStringTag:void 0;function MV(t){return t==null?t===void 0?kV:RV:lE&&lE in Object(t)?sE(t):cE(t)}var wn=MV;function PV(t){return t!=null&&typeof t=="object"}var Xt=PV;var AV="[object Symbol]";function DV(t){return typeof t=="symbol"||Xt(t)&&wn(t)==AV}var Ir=DV;function IV(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var Jr=IV;var FV=Array.isArray,Le=FV;var CV=1/0,uE=Yt?Yt.prototype:void 0,pE=uE?uE.toString:void 0;function fE(t){if(typeof t=="string")return t;if(Le(t))return Jr(t,fE)+"";if(Ir(t))return pE?pE.call(t):"";var e=t+"";return e=="0"&&1/t==-CV?"-0":e}var dE=fE;var NV=/\s/;function OV(t){for(var e=t.length;e--&&NV.test(t.charAt(e)););return e}var mE=OV;var LV=/^\s+/;function UV(t){return t&&t.slice(0,mE(t)+1).replace(LV,"")}var hE=UV;function BV(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Fr=BV;var gE=NaN,VV=/^[-+]0x[0-9a-f]+$/i,WV=/^0b[01]+$/i,HV=/^0o[0-7]+$/i,$V=parseInt;function jV(t){if(typeof t=="number")return t;if(Ir(t))return gE;if(Fr(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Fr(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=hE(t);var r=WV.test(t);return r||HV.test(t)?$V(t.slice(2),r?2:8):VV.test(t)?gE:+t}var yE=jV;var xE=1/0,qV=17976931348623157e292;function zV(t){if(!t)return t===0?t:0;if(t=yE(t),t===xE||t===-xE){var e=t<0?-1:1;return e*qV}return t===t?t:0}var Da=zV;function GV(t){var e=Da(t),r=e%1;return e===e?r?e-r:e:0}var bp=GV;function KV(t){return t}var Bt=KV;var QV="[object AsyncFunction]",ZV="[object Function]",YV="[object GeneratorFunction]",XV="[object Proxy]";function JV(t){if(!Fr(t))return!1;var e=wn(t);return e==ZV||e==YV||e==QV||e==XV}var wp=JV;var eW=_t["__core-js_shared__"],_p=eW;var TE=function(){var t=/[^.]+$/.exec(_p&&_p.keys&&_p.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function tW(t){return!!TE&&TE in t}var SE=tW;var rW=Function.prototype,nW=rW.toString;function iW(t){if(t!=null){try{return nW.call(t)}catch{}try{return t+""}catch{}}return""}var gi=iW;var oW=/[\\^$.*+?()[\]{}|]/g,aW=/^\[object .+?Constructor\]$/,sW=Function.prototype,cW=Object.prototype,lW=sW.toString,uW=cW.hasOwnProperty,pW=RegExp("^"+lW.call(uW).replace(oW,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function fW(t){if(!Fr(t)||SE(t))return!1;var e=wp(t)?pW:aW;return e.test(gi(t))}var vE=fW;function dW(t,e){return t?.[e]}var bE=dW;function mW(t,e){var r=bE(t,e);return vE(r)?r:void 0}var mr=mW;var hW=mr(_t,"WeakMap"),Io=hW;var gW=Io&&new Io,Ex=gW;var wE=Object.create,yW=function(){function t(){}return function(e){if(!Fr(e))return{};if(wE)return wE(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),Ep=yW;function xW(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var _E=xW;function TW(){}var Ia=TW;var SW=4294967295;function Rp(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=SW,this.__views__=[]}Rp.prototype=Ep(Ia.prototype);Rp.prototype.constructor=Rp;var Fa=Rp;function vW(){}var kp=vW;var bW=Ex?function(t){return Ex.get(t)}:kp,Mp=bW;var wW={},Rx=wW;var _W=Object.prototype,EW=_W.hasOwnProperty;function RW(t){for(var e=t.name+"",r=Rx[e],n=EW.call(Rx,e)?r.length:0;n--;){var i=r[n],o=i.func;if(o==null||o==t)return i.name}return e}var Ca=RW;function Pp(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}Pp.prototype=Ep(Ia.prototype);Pp.prototype.constructor=Pp;var qi=Pp;function kW(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var zi=kW;function MW(t){if(t instanceof Fa)return t.clone();var e=new qi(t.__wrapped__,t.__chain__);return e.__actions__=zi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var EE=MW;var PW=Object.prototype,AW=PW.hasOwnProperty;function Ap(t){if(Xt(t)&&!Le(t)&&!(t instanceof Fa)){if(t instanceof qi)return t;if(AW.call(t,"__wrapped__"))return EE(t)}return new qi(t)}Ap.prototype=Ia.prototype;Ap.prototype.constructor=Ap;var RE=Ap;function DW(t){var e=Ca(t),r=RE[e];if(typeof r!="function"||!(e in Fa.prototype))return!1;if(t===r)return!0;var n=Mp(r);return!!n&&t===n[0]}var kx=DW;var IW=800,FW=16,CW=Date.now;function NW(t){var e=0,r=0;return function(){var n=CW(),i=FW-(n-r);if(r=n,i>0){if(++e>=IW)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var kE=NW;function OW(t){return function(){return t}}var ME=OW;var LW=function(){try{var t=mr(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Na=LW;var UW=Na?function(t,e){return Na(t,"toString",{configurable:!0,enumerable:!1,value:ME(e),writable:!0})}:Bt,PE=UW;var BW=kE(PE),Dp=BW;function VW(t,e,r,n){for(var i=t.length,o=r+(n?1:-1);n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}var Ip=VW;function WW(t){return t!==t}var AE=WW;function HW(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}var DE=HW;function $W(t,e,r){return e===e?DE(t,e,r):Ip(t,AE,r)}var Fp=$W;function jW(t,e){var r=t==null?0:t.length;return!!r&&Fp(t,e,0)>-1}var IE=jW;var qW=9007199254740991,zW=/^(?:0|[1-9]\d*)$/;function GW(t,e){var r=typeof t;return e=e??qW,!!e&&(r=="number"||r!="symbol"&&zW.test(t))&&t>-1&&t%1==0&&t<e}var Oa=GW;function KW(t,e,r){e=="__proto__"&&Na?Na(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var FE=KW;function QW(t,e){return t===e||t!==t&&e!==e}var La=QW;var CE=Math.max;function ZW(t,e,r){return e=CE(e===void 0?t.length-1:e,0),function(){for(var n=arguments,i=-1,o=CE(n.length-e,0),s=Array(o);++i<o;)s[i]=n[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=n[i];return l[e]=r(s),_E(t,this,l)}}var Cp=ZW;function YW(t,e){return Dp(Cp(t,e,Bt),t+"")}var Ua=YW;var XW=9007199254740991;function JW(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=XW}var Ba=JW;function eH(t){return t!=null&&Ba(t.length)&&!wp(t)}var Bn=eH;function tH(t,e,r){if(!Fr(r))return!1;var n=typeof e;return(n=="number"?Bn(r)&&Oa(e,r.length):n=="string"&&e in r)?La(r[e],t):!1}var Fo=tH;var rH=Object.prototype;function nH(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||rH;return t===r}var NE=nH;function iH(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var Np=iH;var oH="[object Arguments]";function aH(t){return Xt(t)&&wn(t)==oH}var Mx=aH;var OE=Object.prototype,sH=OE.hasOwnProperty,cH=OE.propertyIsEnumerable,lH=Mx(function(){return arguments}())?Mx:function(t){return Xt(t)&&sH.call(t,"callee")&&!cH.call(t,"callee")},Va=lH;function uH(){return!1}var LE=uH;var VE=typeof exports=="object"&&exports&&!exports.nodeType&&exports,UE=VE&&typeof module=="object"&&module&&!module.nodeType&&module,pH=UE&&UE.exports===VE,BE=pH?_t.Buffer:void 0,fH=BE?BE.isBuffer:void 0,dH=fH||LE,Mc=dH;var mH="[object Arguments]",hH="[object Array]",gH="[object Boolean]",yH="[object Date]",xH="[object Error]",TH="[object Function]",SH="[object Map]",vH="[object Number]",bH="[object Object]",wH="[object RegExp]",_H="[object Set]",EH="[object String]",RH="[object WeakMap]",kH="[object ArrayBuffer]",MH="[object DataView]",PH="[object Float32Array]",AH="[object Float64Array]",DH="[object Int8Array]",IH="[object Int16Array]",FH="[object Int32Array]",CH="[object Uint8Array]",NH="[object Uint8ClampedArray]",OH="[object Uint16Array]",LH="[object Uint32Array]",Ye={};Ye[PH]=Ye[AH]=Ye[DH]=Ye[IH]=Ye[FH]=Ye[CH]=Ye[NH]=Ye[OH]=Ye[LH]=!0;Ye[mH]=Ye[hH]=Ye[kH]=Ye[gH]=Ye[MH]=Ye[yH]=Ye[xH]=Ye[TH]=Ye[SH]=Ye[vH]=Ye[bH]=Ye[wH]=Ye[_H]=Ye[EH]=Ye[RH]=!1;function UH(t){return Xt(t)&&Ba(t.length)&&!!Ye[wn(t)]}var WE=UH;function BH(t){return function(e){return t(e)}}var Wa=BH;var HE=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Pc=HE&&typeof module=="object"&&module&&!module.nodeType&&module,VH=Pc&&Pc.exports===HE,Px=VH&&vp.process,WH=function(){try{var t=Pc&&Pc.require&&Pc.require("util").types;return t||Px&&Px.binding&&Px.binding("util")}catch{}}(),Ax=WH;var $E=Ax&&Ax.isTypedArray,HH=$E?Wa($E):WE,Op=HH;var $H=Object.prototype,jH=$H.hasOwnProperty;function qH(t,e){var r=Le(t),n=!r&&Va(t),i=!r&&!n&&Mc(t),o=!r&&!n&&!i&&Op(t),s=r||n||i||o,l=s?Np(t.length,String):[],u=l.length;for(var f in t)(e||jH.call(t,f))&&!(s&&(f=="length"||i&&(f=="offset"||f=="parent")||o&&(f=="buffer"||f=="byteLength"||f=="byteOffset")||Oa(f,u)))&&l.push(f);return l}var jE=qH;function zH(t,e){return function(r){return t(e(r))}}var qE=zH;var GH=qE(Object.keys,Object),zE=GH;var KH=Object.prototype,QH=KH.hasOwnProperty;function ZH(t){if(!NE(t))return zE(t);var e=[];for(var r in Object(t))QH.call(t,r)&&r!="constructor"&&e.push(r);return e}var GE=ZH;function YH(t){return Bn(t)?jE(t):GE(t)}var Gi=YH;var XH=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,JH=/^\w*$/;function e$(t,e){if(Le(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||Ir(t)?!0:JH.test(t)||!XH.test(t)||e!=null&&t in Object(e)}var Ha=e$;var t$=mr(Object,"create"),yi=t$;function r$(){this.__data__=yi?yi(null):{},this.size=0}var KE=r$;function n$(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var QE=n$;var i$="__lodash_hash_undefined__",o$=Object.prototype,a$=o$.hasOwnProperty;function s$(t){var e=this.__data__;if(yi){var r=e[t];return r===i$?void 0:r}return a$.call(e,t)?e[t]:void 0}var ZE=s$;var c$=Object.prototype,l$=c$.hasOwnProperty;function u$(t){var e=this.__data__;return yi?e[t]!==void 0:l$.call(e,t)}var YE=u$;var p$="__lodash_hash_undefined__";function f$(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=yi&&e===void 0?p$:e,this}var XE=f$;function $a(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}$a.prototype.clear=KE;$a.prototype.delete=QE;$a.prototype.get=ZE;$a.prototype.has=YE;$a.prototype.set=XE;var Dx=$a;function d$(){this.__data__=[],this.size=0}var JE=d$;function m$(t,e){for(var r=t.length;r--;)if(La(t[r][0],e))return r;return-1}var Ki=m$;var h$=Array.prototype,g$=h$.splice;function y$(t){var e=this.__data__,r=Ki(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():g$.call(e,r,1),--this.size,!0}var e0=y$;function x$(t){var e=this.__data__,r=Ki(e,t);return r<0?void 0:e[r][1]}var t0=x$;function T$(t){return Ki(this.__data__,t)>-1}var r0=T$;function S$(t,e){var r=this.__data__,n=Ki(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var n0=S$;function ja(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ja.prototype.clear=JE;ja.prototype.delete=e0;ja.prototype.get=t0;ja.prototype.has=r0;ja.prototype.set=n0;var Qi=ja;var v$=mr(_t,"Map"),Zi=v$;function b$(){this.size=0,this.__data__={hash:new Dx,map:new(Zi||Qi),string:new Dx}}var i0=b$;function w$(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var o0=w$;function _$(t,e){var r=t.__data__;return o0(e)?r[typeof e=="string"?"string":"hash"]:r.map}var Yi=_$;function E$(t){var e=Yi(this,t).delete(t);return this.size-=e?1:0,e}var a0=E$;function R$(t){return Yi(this,t).get(t)}var s0=R$;function k$(t){return Yi(this,t).has(t)}var c0=k$;function M$(t,e){var r=Yi(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var l0=M$;function qa(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}qa.prototype.clear=i0;qa.prototype.delete=a0;qa.prototype.get=s0;qa.prototype.has=c0;qa.prototype.set=l0;var Co=qa;var P$="Expected a function";function Ix(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(P$);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=t.apply(this,n);return r.cache=o.set(i,s)||o,s};return r.cache=new(Ix.Cache||Co),r}Ix.Cache=Co;var Ac=Ix;var A$=500;function D$(t){var e=Ac(t,function(n){return r.size===A$&&r.clear(),n}),r=e.cache;return e}var u0=D$;var I$=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,F$=/\\(\\)?/g,C$=u0(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(I$,function(r,n,i,o){e.push(i?o.replace(F$,"$1"):n||r)}),e}),p0=C$;function N$(t){return t==null?"":dE(t)}var _n=N$;function O$(t,e){return Le(t)?t:Ha(t,e)?[t]:p0(_n(t))}var Lp=O$;var L$=1/0;function U$(t){if(typeof t=="string"||Ir(t))return t;var e=t+"";return e=="0"&&1/t==-L$?"-0":e}var Xi=U$;function B$(t,e){e=Lp(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[Xi(e[r++])];return r&&r==n?t:void 0}var za=B$;function V$(t,e,r){var n=t==null?void 0:za(t,e);return n===void 0?r:n}var No=V$;function W$(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var Ga=W$;var f0=Yt?Yt.isConcatSpreadable:void 0;function H$(t){return Le(t)||Va(t)||!!(f0&&t&&t[f0])}var d0=H$;function m0(t,e,r,n,i){var o=-1,s=t.length;for(r||(r=d0),i||(i=[]);++o<s;){var l=t[o];e>0&&r(l)?e>1?m0(l,e-1,r,n,i):Ga(i,l):n||(i[i.length]=l)}return i}var Ka=m0;function $$(t){var e=t==null?0:t.length;return e?Ka(t,1):[]}var rt=$$;function j$(t){return Dp(Cp(t,void 0,rt),t+"")}var h0=j$;function q$(t){return function(e){return t?.[e]}}var g0=q$;var z$={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},G$=g0(z$),y0=G$;var K$=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Q$="\\u0300-\\u036f",Z$="\\ufe20-\\ufe2f",Y$="\\u20d0-\\u20ff",X$=Q$+Z$+Y$,J$="["+X$+"]",e3=RegExp(J$,"g");function t3(t){return t=_n(t),t&&t.replace(K$,y0).replace(e3,"")}var Fx=t3;function r3(){this.__data__=new Qi,this.size=0}var x0=r3;function n3(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var T0=n3;function i3(t){return this.__data__.get(t)}var S0=i3;function o3(t){return this.__data__.has(t)}var v0=o3;var a3=200;function s3(t,e){var r=this.__data__;if(r instanceof Qi){var n=r.__data__;if(!Zi||n.length<a3-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Co(n)}return r.set(t,e),this.size=r.size,this}var b0=s3;function Qa(t){var e=this.__data__=new Qi(t);this.size=e.size}Qa.prototype.clear=x0;Qa.prototype.delete=T0;Qa.prototype.get=S0;Qa.prototype.has=v0;Qa.prototype.set=b0;var Za=Qa;function c3(t,e){for(var r=-1,n=t==null?0:t.length,i=0,o=[];++r<n;){var s=t[r];e(s,r,t)&&(o[i++]=s)}return o}var Up=c3;function l3(){return[]}var w0=l3;var u3=Object.prototype,p3=u3.propertyIsEnumerable,_0=Object.getOwnPropertySymbols,f3=_0?function(t){return t==null?[]:(t=Object(t),Up(_0(t),function(e){return p3.call(t,e)}))}:w0,E0=f3;function d3(t,e,r){var n=e(t);return Le(t)?n:Ga(n,r(t))}var R0=d3;function m3(t){return R0(t,Gi,E0)}var Cx=m3;var h3=mr(_t,"DataView"),Bp=h3;var g3=mr(_t,"Promise"),Vp=g3;var y3=mr(_t,"Set"),Ji=y3;var k0="[object Map]",x3="[object Object]",M0="[object Promise]",P0="[object Set]",A0="[object WeakMap]",D0="[object DataView]",T3=gi(Bp),S3=gi(Zi),v3=gi(Vp),b3=gi(Ji),w3=gi(Io),Oo=wn;(Bp&&Oo(new Bp(new ArrayBuffer(1)))!=D0||Zi&&Oo(new Zi)!=k0||Vp&&Oo(Vp.resolve())!=M0||Ji&&Oo(new Ji)!=P0||Io&&Oo(new Io)!=A0)&&(Oo=function(t){var e=wn(t),r=e==x3?t.constructor:void 0,n=r?gi(r):"";if(n)switch(n){case T3:return D0;case S3:return k0;case v3:return M0;case b3:return P0;case w3:return A0}return e});var Nx=Oo;var _3=_t.Uint8Array,Ox=_3;function E3(){var t=arguments.length;if(!t)return[];for(var e=Array(t-1),r=arguments[0],n=t;n--;)e[n-1]=arguments[n];return Ga(Le(r)?zi(r):[r],Ka(e,1))}var Dc=E3;var R3="__lodash_hash_undefined__";function k3(t){return this.__data__.set(t,R3),this}var I0=k3;function M3(t){return this.__data__.has(t)}var F0=M3;function Wp(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new Co;++e<r;)this.add(t[e])}Wp.prototype.add=Wp.prototype.push=I0;Wp.prototype.has=F0;var Hp=Wp;function P3(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var C0=P3;function A3(t,e){return t.has(e)}var $p=A3;var D3=1,I3=2;function F3(t,e,r,n,i,o){var s=r&D3,l=t.length,u=e.length;if(l!=u&&!(s&&u>l))return!1;var f=o.get(t),d=o.get(e);if(f&&d)return f==e&&d==t;var h=-1,g=!0,x=r&I3?new Hp:void 0;for(o.set(t,e),o.set(e,t);++h<l;){var v=t[h],w=e[h];if(n)var N=s?n(w,v,h,e,t,o):n(v,w,h,t,e,o);if(N!==void 0){if(N)continue;g=!1;break}if(x){if(!C0(e,function(A,U){if(!$p(x,U)&&(v===A||i(v,A,r,n,o)))return x.push(U)})){g=!1;break}}else if(!(v===w||i(v,w,r,n,o))){g=!1;break}}return o.delete(t),o.delete(e),g}var jp=F3;function C3(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}var N0=C3;function N3(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var Ya=N3;var O3=1,L3=2,U3="[object Boolean]",B3="[object Date]",V3="[object Error]",W3="[object Map]",H3="[object Number]",$3="[object RegExp]",j3="[object Set]",q3="[object String]",z3="[object Symbol]",G3="[object ArrayBuffer]",K3="[object DataView]",O0=Yt?Yt.prototype:void 0,Lx=O0?O0.valueOf:void 0;function Q3(t,e,r,n,i,o,s){switch(r){case K3:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case G3:return!(t.byteLength!=e.byteLength||!o(new Ox(t),new Ox(e)));case U3:case B3:case H3:return La(+t,+e);case V3:return t.name==e.name&&t.message==e.message;case $3:case q3:return t==e+"";case W3:var l=N0;case j3:var u=n&O3;if(l||(l=Ya),t.size!=e.size&&!u)return!1;var f=s.get(t);if(f)return f==e;n|=L3,s.set(t,e);var d=jp(l(t),l(e),n,i,o,s);return s.delete(t),d;case z3:if(Lx)return Lx.call(t)==Lx.call(e)}return!1}var L0=Q3;var Z3=1,Y3=Object.prototype,X3=Y3.hasOwnProperty;function J3(t,e,r,n,i,o){var s=r&Z3,l=Cx(t),u=l.length,f=Cx(e),d=f.length;if(u!=d&&!s)return!1;for(var h=u;h--;){var g=l[h];if(!(s?g in e:X3.call(e,g)))return!1}var x=o.get(t),v=o.get(e);if(x&&v)return x==e&&v==t;var w=!0;o.set(t,e),o.set(e,t);for(var N=s;++h<u;){g=l[h];var A=t[g],U=e[g];if(n)var Z=s?n(U,A,g,e,t,o):n(A,U,g,t,e,o);if(!(Z===void 0?A===U||i(A,U,r,n,o):Z)){w=!1;break}N||(N=g=="constructor")}if(w&&!N){var ne=t.constructor,he=e.constructor;ne!=he&&"constructor"in t&&"constructor"in e&&!(typeof ne=="function"&&ne instanceof ne&&typeof he=="function"&&he instanceof he)&&(w=!1)}return o.delete(t),o.delete(e),w}var U0=J3;var ej=1,B0="[object Arguments]",V0="[object Array]",qp="[object Object]",tj=Object.prototype,W0=tj.hasOwnProperty;function rj(t,e,r,n,i,o){var s=Le(t),l=Le(e),u=s?V0:Nx(t),f=l?V0:Nx(e);u=u==B0?qp:u,f=f==B0?qp:f;var d=u==qp,h=f==qp,g=u==f;if(g&&Mc(t)){if(!Mc(e))return!1;s=!0,d=!1}if(g&&!d)return o||(o=new Za),s||Op(t)?jp(t,e,r,n,i,o):L0(t,e,u,r,n,i,o);if(!(r&ej)){var x=d&&W0.call(t,"__wrapped__"),v=h&&W0.call(e,"__wrapped__");if(x||v){var w=x?t.value():t,N=v?e.value():e;return o||(o=new Za),i(w,N,r,n,o)}}return g?(o||(o=new Za),U0(t,e,r,n,i,o)):!1}var H0=rj;function $0(t,e,r,n,i){return t===e?!0:t==null||e==null||!Xt(t)&&!Xt(e)?t!==t&&e!==e:H0(t,e,r,n,$0,i)}var Xa=$0;var nj=1,ij=2;function oj(t,e,r,n){var i=r.length,o=i,s=!n;if(t==null)return!o;for(t=Object(t);i--;){var l=r[i];if(s&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++i<o;){l=r[i];var u=l[0],f=t[u],d=l[1];if(s&&l[2]){if(f===void 0&&!(u in t))return!1}else{var h=new Za;if(n)var g=n(f,d,u,t,e,h);if(!(g===void 0?Xa(d,f,nj|ij,n,h):g))return!1}}return!0}var j0=oj;function aj(t){return t===t&&!Fr(t)}var zp=aj;function sj(t){for(var e=Gi(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,zp(i)]}return e}var q0=sj;function cj(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var Gp=cj;function lj(t){var e=q0(t);return e.length==1&&e[0][2]?Gp(e[0][0],e[0][1]):function(r){return r===t||j0(r,t,e)}}var z0=lj;function uj(t,e){return t!=null&&e in Object(t)}var G0=uj;function pj(t,e,r){e=Lp(e,t);for(var n=-1,i=e.length,o=!1;++n<i;){var s=Xi(e[n]);if(!(o=t!=null&&r(t,s)))break;t=t[s]}return o||++n!=i?o:(i=t==null?0:t.length,!!i&&Ba(i)&&Oa(s,i)&&(Le(t)||Va(t)))}var K0=pj;function fj(t,e){return t!=null&&K0(t,e,G0)}var Q0=fj;var dj=1,mj=2;function hj(t,e){return Ha(t)&&zp(e)?Gp(Xi(t),e):function(r){var n=No(r,t);return n===void 0&&n===e?Q0(r,t):Xa(e,n,dj|mj)}}var Z0=hj;function gj(t){return function(e){return e?.[t]}}var Kp=gj;function yj(t){return function(e){return za(e,t)}}var Y0=yj;function xj(t){return Ha(t)?Kp(Xi(t)):Y0(t)}var X0=xj;function Tj(t){return typeof t=="function"?t:t==null?Bt:typeof t=="object"?Le(t)?Z0(t[0],t[1]):z0(t):X0(t)}var Vn=Tj;function Sj(t,e,r,n){for(var i=-1,o=t==null?0:t.length;++i<o;){var s=t[i];e(n,s,r(s),t)}return n}var J0=Sj;function vj(t){return function(e,r,n){for(var i=-1,o=Object(e),s=n(e),l=s.length;l--;){var u=s[t?l:++i];if(r(o[u],u,o)===!1)break}return e}}var eR=vj;var bj=eR(),tR=bj;function wj(t,e){return t&&tR(t,e,Gi)}var rR=wj;function _j(t,e){return function(r,n){if(r==null)return r;if(!Bn(r))return t(r,n);for(var i=r.length,o=e?i:-1,s=Object(r);(e?o--:++o<i)&&n(s[o],o,s)!==!1;);return r}}var nR=_j;var Ej=nR(rR),Qp=Ej;function Rj(t,e,r,n){return Qp(t,function(i,o,s){e(n,i,r(i),s)}),n}var iR=Rj;function kj(t,e){return function(r,n){var i=Le(r)?J0:iR,o=e?e():{};return i(r,t,Vn(n,2),o)}}var oR=kj;function Mj(t){return Xt(t)&&Bn(t)}var aR=Mj;function Pj(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}var sR=Pj;function Aj(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var Zp=Aj;var cR=/[\\^$.*+?()[\]{}|]/g,Dj=RegExp(cR.source);function Ij(t){return t=_n(t),t&&Dj.test(t)?t.replace(cR,"\\$&"):t}var Cr=Ij;var Fj=Math.max,Cj=Math.min;function Nj(t,e,r){var n=t==null?0:t.length;if(!n)return-1;var i=n-1;return r!==void 0&&(i=bp(r),i=r<0?Fj(n+i,0):Cj(i,n-1)),Ip(t,Vn(e,3),i,!0)}var Ic=Nj;function Oj(t,e){var r=-1,n=Bn(t)?Array(t.length):[];return Qp(t,function(i,o,s){n[++r]=e(i,o,s)}),n}var lR=Oj;var Lj="Expected a function",Uj=8,Bj=32,Vj=128,Wj=256;function Hj(t){return h0(function(e){var r=e.length,n=r,i=qi.prototype.thru;for(t&&e.reverse();n--;){var o=e[n];if(typeof o!="function")throw new TypeError(Lj);if(i&&!s&&Ca(o)=="wrapper")var s=new qi([],!0)}for(n=s?n:r;++n<r;){o=e[n];var l=Ca(o),u=l=="wrapper"?Mp(o):void 0;u&&kx(u[0])&&u[1]==(Vj|Uj|Bj|Wj)&&!u[4].length&&u[9]==1?s=s[Ca(u[0])].apply(s,u[3]):s=o.length==1&&kx(o)?s[l]():s.thru(o)}return function(){var f=arguments,d=f[0];if(s&&f.length==1&&Le(d))return s.plant(d).value();for(var h=0,g=r?e[h].apply(this,f):d;++h<r;)g=e[h].call(this,g);return g}})}var uR=Hj;var $j=uR(),Ux=$j;var jj=Object.prototype,qj=jj.hasOwnProperty,zj=oR(function(t,e,r){qj.call(t,r)?t[r].push(e):FE(t,r,[e])}),Bx=zj;function Gj(t,e){return t>e}var pR=Gj;function Kj(t,e){return Jr(e,function(r){return t[r]})}var fR=Kj;function Qj(t){return t==null?[]:fR(t,Gi(t))}var dR=Qj;function Zj(t,e){return Xa(t,e)}var xi=Zj;function Yj(t,e){return t<e}var mR=Yj;function Xj(t,e,r){for(var n=-1,i=t.length;++n<i;){var o=t[n],s=e(o);if(s!=null&&(l===void 0?s===s&&!Ir(s):r(s,l)))var l=s,u=o}return u}var Yp=Xj;function Jj(t,e){return t&&t.length?Yp(t,Vn(e,2),pR):void 0}var Vx=Jj;function eq(t,e){for(var r,n=-1,i=t.length;++n<i;){var o=e(t[n]);o!==void 0&&(r=r===void 0?o:r+o)}return r}var hR=eq;function tq(t){return t&&t.length?Yp(t,Bt,mR):void 0}var Wx=tq;function rq(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}var gR=rq;function nq(t,e){if(t!==e){var r=t!==void 0,n=t===null,i=t===t,o=Ir(t),s=e!==void 0,l=e===null,u=e===e,f=Ir(e);if(!l&&!f&&!o&&t>e||o&&s&&u&&!l&&!f||n&&s&&u||!r&&u||!i)return 1;if(!n&&!o&&!f&&t<e||f&&r&&i&&!n&&!o||l&&r&&i||!s&&i||!u)return-1}return 0}var yR=nq;function iq(t,e,r){for(var n=-1,i=t.criteria,o=e.criteria,s=i.length,l=r.length;++n<s;){var u=yR(i[n],o[n]);if(u){if(n>=l)return u;var f=r[n];return u*(f=="desc"?-1:1)}}return t.index-e.index}var xR=iq;function oq(t,e,r){e.length?e=Jr(e,function(o){return Le(o)?function(s){return za(s,o.length===1?o[0]:o)}:o}):e=[Bt];var n=-1;e=Jr(e,Wa(Vn));var i=lR(t,function(o,s,l){var u=Jr(e,function(f){return f(o)});return{criteria:u,index:++n,value:o}});return gR(i,function(o,s){return xR(o,s,r)})}var TR=oq;var aq=9007199254740991,sq=Math.floor;function cq(t,e){var r="";if(!t||e<1||e>aq)return r;do e%2&&(r+=t),e=sq(e/2),e&&(t+=t);while(e);return r}var SR=cq;function lq(t,e,r,n){for(var i=r-1,o=t.length;++i<o;)if(n(t[i],e))return i;return-1}var vR=lq;var uq=Array.prototype,bR=uq.splice;function pq(t,e,r,n){var i=n?vR:Fp,o=-1,s=e.length,l=t;for(t===e&&(e=zi(e)),r&&(l=Jr(t,Wa(r)));++o<s;)for(var u=0,f=e[o],d=r?r(f):f;(u=i(l,d,u,n))>-1;)l!==t&&bR.call(l,u,1),bR.call(t,u,1);return t}var wR=pq;function fq(t,e){return t&&t.length&&e&&e.length?wR(t,e):t}var _R=fq;var dq=Ua(_R),Jt=dq;var mq=Math.floor,hq=Math.random;function gq(t,e){return t+mq(hq()*(e-t+1))}var ER=gq;var yq=Math.ceil,xq=Math.max;function Tq(t,e,r,n){for(var i=-1,o=xq(yq((e-t)/(r||1)),0),s=Array(o);o--;)s[n?o:++i]=t,t+=r;return s}var RR=Tq;function Sq(t){return function(e,r,n){return n&&typeof n!="number"&&Fo(e,r,n)&&(r=n=void 0),e=Da(e),r===void 0?(r=e,e=0):r=Da(r),n=n===void 0?e<r?1:-1:Da(n),RR(e,r,n,t)}}var kR=Sq;var vq=kR(),Hx=vq;function bq(t,e,r){return(r?Fo(t,e,r):e===void 0)?e=1:e=bp(e),SR(_n(t),e)}var $x=bq;function wq(t,e){var r=-1,n=t.length,i=n-1;for(e=e===void 0?n:e;++r<e;){var o=ER(r,i),s=t[o];t[o]=t[r],t[r]=s}return t.length=e,t}var Xp=wq;function _q(t){return Xp(zi(t))}var MR=_q;function Eq(t){return Xp(dR(t))}var PR=Eq;function Rq(t){var e=Le(t)?MR:PR;return e(t)}var jx=Rq;var kq=Ua(function(t,e){if(t==null)return[];var r=e.length;return r>1&&Fo(t,e[0],e[1])?e=[]:r>2&&Fo(e[0],e[1],e[2])&&(e=[e[0]]),TR(t,Ka(e,1),[])}),qx=kq;function Mq(t,e){return t&&t.length?hR(t,Vn(e,2)):0}var Jp=Mq;var Pq=1/0,Aq=Ji&&1/Ya(new Ji([,-0]))[1]==Pq?function(t){return new Ji(t)}:kp,AR=Aq;var Dq=200;function Iq(t,e,r){var n=-1,i=IE,o=t.length,s=!0,l=[],u=l;if(r)s=!1,i=sR;else if(o>=Dq){var f=e?null:AR(t);if(f)return Ya(f);s=!1,i=$p,u=new Hp}else u=e?[]:l;e:for(;++n<o;){var d=t[n],h=e?e(d):d;if(d=r||d!==0?d:0,s&&h===h){for(var g=u.length;g--;)if(u[g]===h)continue e;e&&u.push(h),l.push(d)}else i(u,h,r)||(u!==l&&u.push(h),l.push(d))}return l}var ef=Iq;function Fq(t){return t&&t.length?ef(t):[]}var Ti=Fq;function Cq(t,e){return e=typeof e=="function"?e:void 0,t&&t.length?ef(t,void 0,e):[]}var Fc=Cq;var Nq=Math.max;function Oq(t){if(!(t&&t.length))return[];var e=0;return t=Up(t,function(r){if(aR(r))return e=Nq(r.length,e),!0}),Np(e,function(r){return Jr(t,Kp(r))})}var DR=Oq;var Lq=Ua(DR),xt=Lq;var tf=class{constructor(){this.commands={clipboardCopy:void 0,toggleLineComment:void 0,indentLine:void 0,outdentLine:void 0,rename:void 0,quickFix:void 0,revealDefinition:void 0,revealTypeDefinition:void 0,showHover:void 0,showDebugHover:void 0,extractVariable:void 0,fold:void 0,highlight:{acceptsLocation:!0},unfold:void 0,showReferences:void 0,insertLineAfter:void 0}}};var Cc=class{constructor(){this.clipboardContents=""}async readText(){return this.clipboardContents}async writeText(e){this.clipboardContents=e}};var Vt=class{constructor(){this.listeners=[];this.notifyListeners=(...e)=>{this.listeners.forEach(r=>r(...e))};this.registerListener=this.registerListener.bind(this)}registerListener(e){return this.listeners.push(e),{dispose:()=>{Jt(this.listeners,e)}}}};var rf={tokenHatSplittingMode:{preserveCase:!1,lettersToPreserve:[],symbolsToPreserve:[]},wordSeparators:["_"],decorationDebounceDelayMs:50,experimental:{snippetsDir:void 0,hatStability:"balanced",keyboardTargetFollowsSelection:!1},commandHistory:!1,debug:!1};var Nc=class{constructor(){this.notifier=new Vt;this.mocks={...rf};this.scopes=[];this.onDidChangeConfiguration=this.notifier.registerListener;this.onDidChangeConfiguration=this.onDidChangeConfiguration.bind(this)}getOwnConfiguration(e,r){if(r!=null){for(let{scope:n,values:i}of this.scopes)if(Bq(n,r))return No(i,e)??No(this.mocks,e)}return No(this.mocks,e)}mockConfiguration(e,r){this.mocks[e]=r,this.notifier.notifyListeners()}mockConfigurationScope(e,r,n=!1){this.scopes.push({scope:e,values:r}),n||this.notifier.notifyListeners()}};function Bq(t,e){return t.languageId===e.languageId}var nf={hideInferenceWarning:!1,tutorialProgress:{}};var Oc=class{constructor(){this.data={...nf}}get(e){return this.data[e]}set(e,r){return this.data[e]=r,Promise.resolve()}};var Lc=class{async showMessage(e,r,n,...i){}};var of=class{constructor(){this.configuration=new Nc;this.messages=new Lc;this.globalState=new Oc;this.clipboard=new Cc;this.capabilities=new tf;this.runMode="test";this.cursorlessVersion="0.0.0";this.workspaceFolders=void 0;this.disposables=[];this.quickPickReturnValue=void 0;this.onDidOpenTextDocument=Ja;this.onDidCloseTextDocument=Ja;this.onDidChangeActiveTextEditor=Ja;this.onDidChangeVisibleTextEditors=Ja;this.onDidChangeTextEditorSelection=Ja;this.onDidChangeTextEditorVisibleRanges=Ja}async flashRanges(e){}async setHighlightRanges(e,r,n){}mockAssetsRoot(e){this.assetsRoot_=e}get assetsRoot(){if(this.assetsRoot_==null)throw Error("Field `assetsRoot` has not yet been mocked");return this.assetsRoot_}get activeTextEditor(){throw Error("Not implemented")}get activeEditableTextEditor(){throw Error("Not implemented")}get visibleTextEditors(){throw Error("Not implemented")}getEditableTextEditor(e){throw Error("Not implemented")}findInDocument(e,r){throw Error("Not implemented")}findInWorkspace(e){throw Error("Not implemented")}openTextDocument(e){throw Error("Not implemented")}openUntitledTextDocument(e){throw Error("Not implemented")}setQuickPickReturnValue(e){this.quickPickReturnValue=e}async showQuickPick(e,r){return this.quickPickReturnValue}showInputBox(e){throw Error("Not implemented")}executeCommand(e,...r){throw new Error("Method not implemented.")}onDidChangeTextDocument(e){throw Error("Not implemented")}disposeOnExit(...e){return this.disposables.push(...e),()=>Jt(this.disposables,...e)}exit(){this.disposables.forEach(e=>e.dispose())}};function Ja(){return{dispose(){}}}var se=class t{constructor(e,r){this.line=e,this.character=r}isEqual(e){return this.line===e.line&&this.character===e.character}isBefore(e){return this.line<e.line?!0:this.line>e.line?!1:this.character<e.character}isAfter(e){return this.line>e.line?!0:this.line<e.line?!1:this.character>e.character}isBeforeOrEqual(e){return this.isEqual(e)||this.isBefore(e)}isAfterOrEqual(e){return this.isEqual(e)||this.isAfter(e)}compareTo(e){return this.isBefore(e)?-1:this.isAfter(e)?1:0}with(e,r){return new t(e??this.line,r??this.character)}translate(e,r){return new t(this.line+(e??0),this.character+(r??0))}toEmptyRange(){return new H(this,this)}concise(){return`${this.line}:${this.character}`}toString(){return this.concise()}};function IR(t,e,r){return t.positionAt(t.offsetAt(e)+r)}var H=class t{constructor(...e){let[r,n]=e.length===2?e:[new se(e[0],e[1]),new se(e[2],e[3])];r.isBefore(n)?(this.start=r,this.end=n):(this.start=n,this.end=r)}get isEmpty(){return this.start.isEqual(this.end)}get isSingleLine(){return this.start.line===this.end.line}isRangeEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}contains(e){let[r,n]=e instanceof se?[e,e]:[e.start,e.end];return r.isAfterOrEqual(this.start)&&n.isBeforeOrEqual(this.end)}intersection(e){let r=this.start.isAfter(e.start)?this.start:e.start,n=this.end.isBefore(e.end)?this.end:e.end;return r.isBeforeOrEqual(n)?new t(r,n):void 0}union(e){return new t(this.start.isBefore(e.start)?this.start:e.start,this.end.isAfter(e.end)?this.end:e.end)}with(e,r){return new t(e??this.start,r??this.end)}toSelection(e){return e?new Te(this.end,this.start):new Te(this.start,this.end)}concise(){return`${this.start.concise()}-${this.end.concise()}`}toString(){return this.concise()}};function Vq(t){let{source:e,flags:r}=t;return new RegExp(`(${e})$`,r.replace("m",""))}function Wq(t){let{source:e,flags:r}=t;return new RegExp(`^(${e})`,r.replace("m",""))}function FR(t){let e=new Map;function r(n){let i=e.get(n);return i==null&&(i=t(n),e.set(n,i)),i}return r}var af=FR(Vq),sf=FR(Wq);function en(t,e,r){return e.lastIndex=0,Array.from(t.matchAll(e),r)}function Uc(t,e){return t.lastIndex=0,t.test(e)}function CR(t,e){return t.lastIndex=0,e.match(t)}function Bc(t,e){return en(t,e,r=>({index:r.index,text:r[0]}))}var es=class{constructor(e){this.original=e;this.configuration=e.configuration,this.globalState=e.globalState,this.clipboard=e.clipboard,this.messages=e.messages,this.capabilities=e.capabilities}flashRanges(e){return this.original.flashRanges(e)}setHighlightRanges(e,r,n){return this.original.setHighlightRanges(e,r,n)}onDidOpenTextDocument(e,r,n){return this.original.onDidOpenTextDocument(e,r,n)}onDidCloseTextDocument(e,r,n){return this.original.onDidCloseTextDocument(e,r,n)}onDidChangeActiveTextEditor(e,r,n){return this.original.onDidChangeActiveTextEditor(e,r,n)}onDidChangeVisibleTextEditors(e,r,n){return this.original.onDidChangeVisibleTextEditors(e,r,n)}onDidChangeTextEditorSelection(e,r,n){return this.original.onDidChangeTextEditorSelection(e,r,n)}onDidChangeTextEditorVisibleRanges(e,r,n){return this.original.onDidChangeTextEditorVisibleRanges(e,r,n)}get activeTextEditor(){return this.original.activeTextEditor}get activeEditableTextEditor(){return this.original.activeEditableTextEditor}get visibleTextEditors(){return this.original.visibleTextEditors}get cursorlessVersion(){return this.original.cursorlessVersion}get assetsRoot(){return this.original.assetsRoot}get runMode(){return this.original.runMode}get workspaceFolders(){return this.original.workspaceFolders}findInDocument(e,r){return this.original.findInDocument(e,r)}findInWorkspace(e){return this.original.findInWorkspace(e)}openTextDocument(e){return this.original.openTextDocument(e)}openUntitledTextDocument(e){return this.original.openUntitledTextDocument(e)}showQuickPick(e,r){return this.original.showQuickPick(e,r)}showInputBox(e){return this.original.showInputBox(e)}getEditableTextEditor(e){return this.original.getEditableTextEditor(e)}executeCommand(e,...r){return this.original.executeCommand(e,...r)}onDidChangeTextDocument(e){return this.original.onDidChangeTextDocument(e)}disposeOnExit(...e){return this.original.disposeOnExit(...e)}};var cf=class extends es{constructor(r,n,i,o){super(r);this.fakeIde=n;this.isSilent=i;this.cursorlessSnippetsDir=o;this.messages=i?n.messages:r.messages,this.configuration=n.configuration,this.globalState=n.globalState,this.initializeConfiguration()}initializeConfiguration(){this.configuration.mockConfigurationScope({languageId:"css"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfigurationScope({languageId:"scss"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfigurationScope({languageId:"shellscript"},{wordSeparators:["_","-"]},!0),this.configuration.mockConfiguration("experimental",{hatStability:this.configuration.getOwnConfiguration("experimental.hatStability"),snippetsDir:this.cursorlessSnippetsDir,keyboardTargetFollowsSelection:!1})}flashRanges(r){return this.isSilent?this.fakeIde.flashRanges(r):super.flashRanges(r)}setHighlightRanges(r,n,i){return this.isSilent?this.fakeIde.setHighlightRanges(r,n,i):super.setHighlightRanges(r,n,i)}async showQuickPick(r,n){return this.isSilent?this.fakeIde.showQuickPick(r,n):super.showQuickPick(r,n)}};function Vc(t,e,r,...n){return t.showMessage("warning",e,r,...n)}function nt(t,e,r,...n){return t.showMessage("error",e,r,...n)}var oe=(i=>(i[i.supported=0]="supported",i[i.supportedLegacy=1]="supportedLegacy",i[i.unsupported=2]="unsupported",i[i.notApplicable=3]="notApplicable",i))(oe||{});var{supported:et,unsupported:ele,notApplicable:NR}=oe,zx={ifStatement:et,disqualifyDelimiter:et,"comment.line":et,"comment.block":et,"string.singleLine":et,"textFragment.comment.line":et,"textFragment.comment.block":et,"textFragment.string.singleLine":et,class:et,className:et,namedFunction:et,"name.function":et,"name.class":et,"name.field":et,functionName:et,"name.argument.formal":et,"name.argument.formal.iteration":et,"name.variable":et,"value.variable":et,"name.assignment":et,"value.assignment":et,"statement.class":et,"type.class":et,"type.field":et,"value.argument.formal":NR,"value.argument.formal.iteration":NR};var{supported:ile,unsupported:ole,notApplicable:ale}=oe;var{supported:OR,unsupported:ple,notApplicable:fle}=oe,Hq={...zx,"value.argument.formal":OR,"value.argument.formal.iteration":OR};var{supported:gle,unsupported:yle,notApplicable:xle}=oe;var{supported:Wc,unsupported:$q,notApplicable:ble}=oe,Gx={"comment.block":Wc,"string.singleLine":Wc,"name.iteration.block":Wc,"name.iteration.document":Wc,disqualifyDelimiter:Wc,"comment.line":$q};var{supported:Rle,unsupported:kle,notApplicable:Mle}=oe;var{supported:Ile,notApplicable:Fle}=oe;var{supported:Lle,notApplicable:Ule}=oe;var{supported:z,unsupported:Hle,notApplicable:tn}=oe,Kx={list:z,map:z,ifStatement:z,regularExpression:z,switchStatementSubject:z,fieldAccess:z,disqualifyDelimiter:z,"textFragment.string.singleLine":z,"textFragment.string.multiLine":z,"textFragment.comment.line":z,"textFragment.comment.block":z,statement:z,"statement.iteration.document":z,"statement.iteration.block":z,class:z,className:z,anonymousFunction:z,namedFunction:z,"namedFunction.iteration.document":z,"namedFunction.method":z,"namedFunction.method.iteration.class":z,"namedFunction.constructor":z,functionName:z,"functionName.iteration.document":z,"functionName.method":z,"functionName.method.iteration.class":z,"functionName.constructor":z,functionCall:z,"functionCall.constructor":z,functionCallee:z,"functionCallee.constructor":z,"argument.actual":z,"argument.actual.iteration":z,"argument.actual.method":z,"argument.actual.method.iteration":z,"argument.actual.constructor":z,"argument.actual.constructor.iteration":z,"argument.formal":z,"argument.formal.iteration":z,"argument.formal.method":z,"argument.formal.method.iteration":z,"argument.formal.constructor":z,"argument.formal.constructor.iteration":z,"comment.line":z,"comment.block":z,"string.singleLine":z,"string.multiLine":z,"branch.if":z,"branch.if.iteration":z,"branch.try":z,"branch.switchCase":z,"branch.switchCase.iteration":z,"branch.ternary":z,"condition.if":z,"condition.while":z,"condition.doWhile":z,"condition.for":z,"condition.ternary":z,"condition.switchCase":z,"name.argument.formal":z,"name.argument.formal.iteration":z,"name.argument.formal.method":z,"name.argument.formal.method.iteration":z,"name.argument.formal.constructor":z,"name.argument.formal.constructor.iteration":z,"name.foreach":z,"name.assignment":z,"name.assignment.pattern":z,"name.variable":z,"name.variable.pattern":z,"name.function":z,"name.method":z,"name.constructor":z,"name.class":z,"name.field":z,"key.mapPair":z,"key.mapPair.iteration":z,"value.argument.formal":z,"value.argument.formal.iteration":z,"value.argument.formal.method":z,"value.argument.formal.method.iteration":z,"value.argument.formal.constructor":z,"value.argument.formal.constructor.iteration":z,"value.mapPair":z,"value.mapPair.iteration":z,"value.assignment":z,"value.variable":z,"value.variable.pattern":z,"value.foreach":z,"value.return":z,"value.return.lambda":z,"value.field":z},Qx={element:z,tags:z,startTag:z,endTag:z,attribute:z,"key.attribute":z,"value.attribute":z},jq={...Kx,...Qx,"type.variable":tn,"type.argument.formal":tn,"type.argument.formal.iteration":tn,"type.argument.formal.method":tn,"type.argument.formal.method.iteration":tn,"type.argument.formal.constructor":tn,"type.argument.formal.constructor.iteration":tn,"type.return":tn,"type.field":tn,"type.foreach":tn,"type.interface":tn,command:tn};var{supported:Zx}=oe,Hc={"comment.line":Zx,"comment.block":Zx,map:Zx};var{supported:Zle,unsupported:Yle,notApplicable:Xle}=oe,qq={...Hc};var{supported:nue,unsupported:iue,notApplicable:oue}=oe,zq={...Hc};var{supported:lue,unsupported:uue,notApplicable:pue}=oe;var{supported:hue,notApplicable:gue}=oe;var{supported:Sue,unsupported:vue,notApplicable:bue}=oe;var{supported:Rue,unsupported:kue,notApplicable:Mue}=oe;var{supported:Iue,notApplicable:Fue}=oe;var{supported:Lue,unsupported:Uue,notApplicable:Bue}=oe;var{supported:$ue,unsupported:jue,notApplicable:que}=oe;var{supported:Que,unsupported:Zue,notApplicable:Yue}=oe;var{supported:tpe,unsupported:rpe,notApplicable:npe}=oe;var{supported:ts,unsupported:cpe,notApplicable:lpe}=oe,Gq={...Gx,"namedFunction.iteration":ts,"namedFunction.iteration.document":ts,"functionName.iteration":ts,"functionName.iteration.document":ts,"comment.line":ts,disqualifyDelimiter:ts};var{supported:dpe}=oe;var{supported:er}=oe,Yx={...Kx,"name.field":er,"type.argument.formal":er,"type.argument.formal.iteration":er,"type.argument.formal.method":er,"type.argument.formal.method.iteration":er,"type.argument.formal.constructor":er,"type.argument.formal.constructor.iteration":er,"type.alias":er,"type.cast":er,"type.field":er,"type.interface":er,"type.return":er,"type.variable":er,"value.field":er,"value.typeAlias":er};var{supported:wpe,unsupported:_pe,notApplicable:Epe}=oe,Kq={...Yx,...Qx};var{supported:Ppe,unsupported:Ape,notApplicable:Dpe}=oe;var{supported:Npe,unsupported:Ope,notApplicable:Lpe}=oe;var rs=["that","source","instanceReference","keyboard"];var Te=class extends H{get isReversed(){return this.active.isBefore(this.anchor)}constructor(...e){let[r,n]=e.length===2?e:[new se(e[0],e[1]),new se(e[2],e[3])];super(r,n),this.anchor=r,this.active=n}isEqual(e){return this.anchor.isEqual(e.anchor)&&this.active.isEqual(e.active)}concise(){return`${this.anchor.concise()}->${this.active.concise()}`}toString(){return this.concise()}};function UR({line:t,character:e}){return new se(t,e)}function lf({start:t,end:e}){return new H(UR(t),UR(e))}function rn(t){return{type:"line",start:t.start.line,end:t.end.line}}function tr({start:t,end:e}){return{type:"character",start:t,end:e}}function $c(t){return{start:uf(t.start),end:uf(t.end)}}function BR(t){return{anchor:uf(t.anchor),active:uf(t.active)}}function uf({line:t,character:e}){return{line:t,character:e}}function nk(t){return typeof t>"u"||t===null}function Qq(t){return typeof t=="object"&&t!==null}function Zq(t){return Array.isArray(t)?t:nk(t)?[]:[t]}function Yq(t,e){var r,n,i,o;if(e)for(o=Object.keys(e),r=0,n=o.length;r<n;r+=1)i=o[r],t[i]=e[i];return t}function Xq(t,e){var r="",n;for(n=0;n<e;n+=1)r+=t;return r}function Jq(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}var ez=nk,tz=Qq,rz=Zq,nz=Xq,iz=Jq,oz=Yq,Tt={isNothing:ez,isObject:tz,toArray:rz,repeat:nz,isNegativeZero:iz,extend:oz};function ik(t,e){var r="",n=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(r+='in "'+t.mark.name+'" '),r+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(r+=`

`+t.mark.snippet),n+" "+r):n}function qc(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=ik(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}qc.prototype=Object.create(Error.prototype);qc.prototype.constructor=qc;qc.prototype.toString=function(e){return this.name+": "+ik(this,e)};var hr=qc;function Xx(t,e,r,n,i){var o="",s="",l=Math.floor(i/2)-1;return n-e>l&&(o=" ... ",e=n-l+o.length),r-n>l&&(s=" ...",r=n+l-s.length),{str:o+t.slice(e,r).replace(/\t/g,"\u2192")+s,pos:n-e+o.length}}function Jx(t,e){return Tt.repeat(" ",e-t.length)+t}function az(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var r=/\r?\n|\r|\0/g,n=[0],i=[],o,s=-1;o=r.exec(t.buffer);)i.push(o.index),n.push(o.index+o[0].length),t.position<=o.index&&s<0&&(s=n.length-2);s<0&&(s=n.length-1);var l="",u,f,d=Math.min(t.line+e.linesAfter,i.length).toString().length,h=e.maxLength-(e.indent+d+3);for(u=1;u<=e.linesBefore&&!(s-u<0);u++)f=Xx(t.buffer,n[s-u],i[s-u],t.position-(n[s]-n[s-u]),h),l=Tt.repeat(" ",e.indent)+Jx((t.line-u+1).toString(),d)+" | "+f.str+`
`+l;for(f=Xx(t.buffer,n[s],i[s],t.position,h),l+=Tt.repeat(" ",e.indent)+Jx((t.line+1).toString(),d)+" | "+f.str+`
`,l+=Tt.repeat("-",e.indent+d+3+f.pos)+`^
`,u=1;u<=e.linesAfter&&!(s+u>=i.length);u++)f=Xx(t.buffer,n[s+u],i[s+u],t.position-(n[s]-n[s+u]),h),l+=Tt.repeat(" ",e.indent)+Jx((t.line+u+1).toString(),d)+" | "+f.str+`
`;return l.replace(/\n$/,"")}var sz=az,cz=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],lz=["scalar","sequence","mapping"];function uz(t){var e={};return t!==null&&Object.keys(t).forEach(function(r){t[r].forEach(function(n){e[String(n)]=r})}),e}function pz(t,e){if(e=e||{},Object.keys(e).forEach(function(r){if(cz.indexOf(r)===-1)throw new hr('Unknown option "'+r+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(r){return r},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=uz(e.styleAliases||null),lz.indexOf(this.kind)===-1)throw new hr('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}var It=pz;function HR(t,e){var r=[];return t[e].forEach(function(n){var i=r.length;r.forEach(function(o,s){o.tag===n.tag&&o.kind===n.kind&&o.multi===n.multi&&(i=s)}),r[i]=n}),r}function fz(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,r;function n(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(e=0,r=arguments.length;e<r;e+=1)arguments[e].forEach(n);return t}function tT(t){return this.extend(t)}tT.prototype.extend=function(e){var r=[],n=[];if(e instanceof It)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(r=r.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new hr("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(o){if(!(o instanceof It))throw new hr("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new hr("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new hr("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(o){if(!(o instanceof It))throw new hr("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(tT.prototype);return i.implicit=(this.implicit||[]).concat(r),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=HR(i,"implicit"),i.compiledExplicit=HR(i,"explicit"),i.compiledTypeMap=fz(i.compiledImplicit,i.compiledExplicit),i};var dz=tT,mz=new It("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return t!==null?t:""}}),hz=new It("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return t!==null?t:[]}}),gz=new It("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return t!==null?t:{}}}),yz=new dz({explicit:[mz,hz,gz]});function xz(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}function Tz(){return null}function Sz(t){return t===null}var vz=new It("tag:yaml.org,2002:null",{kind:"scalar",resolve:xz,construct:Tz,predicate:Sz,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function bz(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}function wz(t){return t==="true"||t==="True"||t==="TRUE"}function _z(t){return Object.prototype.toString.call(t)==="[object Boolean]"}var Ez=new It("tag:yaml.org,2002:bool",{kind:"scalar",resolve:bz,construct:wz,predicate:_z,represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function Rz(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function kz(t){return 48<=t&&t<=55}function Mz(t){return 48<=t&&t<=57}function Pz(t){if(t===null)return!1;var e=t.length,r=0,n=!1,i;if(!e)return!1;if(i=t[r],(i==="-"||i==="+")&&(i=t[++r]),i==="0"){if(r+1===e)return!0;if(i=t[++r],i==="b"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!Rz(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(r++;r<e;r++)if(i=t[r],i!=="_"){if(!kz(t.charCodeAt(r)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;r<e;r++)if(i=t[r],i!=="_"){if(!Mz(t.charCodeAt(r)))return!1;n=!0}return!(!n||i==="_")}function Az(t){var e=t,r=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(r=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return r*parseInt(e.slice(2),2);if(e[1]==="x")return r*parseInt(e.slice(2),16);if(e[1]==="o")return r*parseInt(e.slice(2),8)}return r*parseInt(e,10)}function Dz(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!Tt.isNegativeZero(t)}var Iz=new It("tag:yaml.org,2002:int",{kind:"scalar",resolve:Pz,construct:Az,predicate:Dz,represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),Fz=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Cz(t){return!(t===null||!Fz.test(t)||t[t.length-1]==="_")}function Nz(t){var e,r;return e=t.replace(/_/g,"").toLowerCase(),r=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:r*parseFloat(e,10)}var Oz=/^[-+]?[0-9]+e/;function Lz(t,e){var r;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Tt.isNegativeZero(t))return"-0.0";return r=t.toString(10),Oz.test(r)?r.replace("e",".e"):r}function Uz(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||Tt.isNegativeZero(t))}var Bz=new It("tag:yaml.org,2002:float",{kind:"scalar",resolve:Cz,construct:Nz,predicate:Uz,represent:Lz,defaultStyle:"lowercase"}),Vz=yz.extend({implicit:[vz,Ez,Iz,Bz]}),Wz=Vz,ok=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),ak=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function Hz(t){return t===null?!1:ok.exec(t)!==null||ak.exec(t)!==null}function $z(t){var e,r,n,i,o,s,l,u=0,f=null,d,h,g;if(e=ok.exec(t),e===null&&(e=ak.exec(t)),e===null)throw new Error("Date resolve error");if(r=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(r,n,i));if(o=+e[4],s=+e[5],l=+e[6],e[7]){for(u=e[7].slice(0,3);u.length<3;)u+="0";u=+u}return e[9]&&(d=+e[10],h=+(e[11]||0),f=(d*60+h)*6e4,e[9]==="-"&&(f=-f)),g=new Date(Date.UTC(r,n,i,o,s,l,u)),f&&g.setTime(g.getTime()-f),g}function jz(t){return t.toISOString()}var qz=new It("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:Hz,construct:$z,instanceOf:Date,represent:jz});function zz(t){return t==="<<"||t===null}var Gz=new It("tag:yaml.org,2002:merge",{kind:"scalar",resolve:zz}),aT=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function Kz(t){if(t===null)return!1;var e,r,n=0,i=t.length,o=aT;for(r=0;r<i;r++)if(e=o.indexOf(t.charAt(r)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}function Qz(t){var e,r,n=t.replace(/[\r\n=]/g,""),i=n.length,o=aT,s=0,l=[];for(e=0;e<i;e++)e%4===0&&e&&(l.push(s>>16&255),l.push(s>>8&255),l.push(s&255)),s=s<<6|o.indexOf(n.charAt(e));return r=i%4*6,r===0?(l.push(s>>16&255),l.push(s>>8&255),l.push(s&255)):r===18?(l.push(s>>10&255),l.push(s>>2&255)):r===12&&l.push(s>>4&255),new Uint8Array(l)}function Zz(t){var e="",r=0,n,i,o=t.length,s=aT;for(n=0;n<o;n++)n%3===0&&n&&(e+=s[r>>18&63],e+=s[r>>12&63],e+=s[r>>6&63],e+=s[r&63]),r=(r<<8)+t[n];return i=o%3,i===0?(e+=s[r>>18&63],e+=s[r>>12&63],e+=s[r>>6&63],e+=s[r&63]):i===2?(e+=s[r>>10&63],e+=s[r>>4&63],e+=s[r<<2&63],e+=s[64]):i===1&&(e+=s[r>>2&63],e+=s[r<<4&63],e+=s[64],e+=s[64]),e}function Yz(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}var Xz=new It("tag:yaml.org,2002:binary",{kind:"scalar",resolve:Kz,construct:Qz,predicate:Yz,represent:Zz}),Jz=Object.prototype.hasOwnProperty,eG=Object.prototype.toString;function tG(t){if(t===null)return!0;var e=[],r,n,i,o,s,l=t;for(r=0,n=l.length;r<n;r+=1){if(i=l[r],s=!1,eG.call(i)!=="[object Object]")return!1;for(o in i)if(Jz.call(i,o))if(!s)s=!0;else return!1;if(!s)return!1;if(e.indexOf(o)===-1)e.push(o);else return!1}return!0}function rG(t){return t!==null?t:[]}var nG=new It("tag:yaml.org,2002:omap",{kind:"sequence",resolve:tG,construct:rG}),iG=Object.prototype.toString;function oG(t){if(t===null)return!0;var e,r,n,i,o,s=t;for(o=new Array(s.length),e=0,r=s.length;e<r;e+=1){if(n=s[e],iG.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;o[e]=[i[0],n[i[0]]]}return!0}function aG(t){if(t===null)return[];var e,r,n,i,o,s=t;for(o=new Array(s.length),e=0,r=s.length;e<r;e+=1)n=s[e],i=Object.keys(n),o[e]=[i[0],n[i[0]]];return o}var sG=new It("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:oG,construct:aG}),cG=Object.prototype.hasOwnProperty;function lG(t){if(t===null)return!0;var e,r=t;for(e in r)if(cG.call(r,e)&&r[e]!==null)return!1;return!0}function uG(t){return t!==null?t:{}}var pG=new It("tag:yaml.org,2002:set",{kind:"mapping",resolve:lG,construct:uG}),sT=Wz.extend({implicit:[qz,Gz],explicit:[Xz,nG,sG,pG]}),to=Object.prototype.hasOwnProperty,pf=1,sk=2,ck=3,ff=4,eT=1,fG=2,$R=3,dG=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,mG=/[\x85\u2028\u2029]/,hG=/[,\[\]\{\}]/,lk=/^(?:!|!!|![a-z\-]+!)$/i,uk=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function jR(t){return Object.prototype.toString.call(t)}function Wn(t){return t===10||t===13}function Uo(t){return t===9||t===32}function gr(t){return t===9||t===32||t===10||t===13}function is(t){return t===44||t===91||t===93||t===123||t===125}function gG(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}function yG(t){return t===120?2:t===117?4:t===85?8:0}function xG(t){return 48<=t&&t<=57?t-48:-1}function qR(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}function TG(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}var pk=new Array(256),fk=new Array(256);for(Lo=0;Lo<256;Lo++)pk[Lo]=qR(Lo)?1:0,fk[Lo]=qR(Lo);var Lo;function SG(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||sT,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function dk(t,e){var r={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return r.snippet=sz(r),new hr(e,r)}function ae(t,e){throw dk(t,e)}function df(t,e){t.onWarning&&t.onWarning.call(null,dk(t,e))}var zR={YAML:function(e,r,n){var i,o,s;e.version!==null&&ae(e,"duplication of %YAML directive"),n.length!==1&&ae(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&ae(e,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),s=parseInt(i[2],10),o!==1&&ae(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=s<2,s!==1&&s!==2&&df(e,"unsupported YAML version of the document")},TAG:function(e,r,n){var i,o;n.length!==2&&ae(e,"TAG directive accepts exactly two arguments"),i=n[0],o=n[1],lk.test(i)||ae(e,"ill-formed tag handle (first argument) of the TAG directive"),to.call(e.tagMap,i)&&ae(e,'there is a previously declared suffix for "'+i+'" tag handle'),uk.test(o)||ae(e,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{ae(e,"tag prefix is malformed: "+o)}e.tagMap[i]=o}};function eo(t,e,r,n){var i,o,s,l;if(e<r){if(l=t.input.slice(e,r),n)for(i=0,o=l.length;i<o;i+=1)s=l.charCodeAt(i),s===9||32<=s&&s<=1114111||ae(t,"expected valid JSON character");else dG.test(l)&&ae(t,"the stream contains non-printable characters");t.result+=l}}function GR(t,e,r,n){var i,o,s,l;for(Tt.isObject(r)||ae(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(r),s=0,l=i.length;s<l;s+=1)o=i[s],to.call(e,o)||(e[o]=r[o],n[o]=!0)}function os(t,e,r,n,i,o,s,l,u){var f,d;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),f=0,d=i.length;f<d;f+=1)Array.isArray(i[f])&&ae(t,"nested arrays are not supported inside keys"),typeof i=="object"&&jR(i[f])==="[object Object]"&&(i[f]="[object Object]");if(typeof i=="object"&&jR(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(f=0,d=o.length;f<d;f+=1)GR(t,e,o[f],r);else GR(t,e,o,r);else!t.json&&!to.call(r,i)&&to.call(e,i)&&(t.line=s||t.line,t.lineStart=l||t.lineStart,t.position=u||t.position,ae(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):e[i]=o,delete r[i];return e}function cT(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):ae(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function ht(t,e,r){for(var n=0,i=t.input.charCodeAt(t.position);i!==0;){for(;Uo(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(Wn(i))for(cT(t),i=t.input.charCodeAt(t.position),n++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return r!==-1&&n!==0&&t.lineIndent<r&&df(t,"deficient indentation"),n}function gf(t){var e=t.position,r;return r=t.input.charCodeAt(e),!!((r===45||r===46)&&r===t.input.charCodeAt(e+1)&&r===t.input.charCodeAt(e+2)&&(e+=3,r=t.input.charCodeAt(e),r===0||gr(r)))}function lT(t,e){e===1?t.result+=" ":e>1&&(t.result+=Tt.repeat(`
`,e-1))}function vG(t,e,r){var n,i,o,s,l,u,f,d,h=t.kind,g=t.result,x;if(x=t.input.charCodeAt(t.position),gr(x)||is(x)||x===35||x===38||x===42||x===33||x===124||x===62||x===39||x===34||x===37||x===64||x===96||(x===63||x===45)&&(i=t.input.charCodeAt(t.position+1),gr(i)||r&&is(i)))return!1;for(t.kind="scalar",t.result="",o=s=t.position,l=!1;x!==0;){if(x===58){if(i=t.input.charCodeAt(t.position+1),gr(i)||r&&is(i))break}else if(x===35){if(n=t.input.charCodeAt(t.position-1),gr(n))break}else{if(t.position===t.lineStart&&gf(t)||r&&is(x))break;if(Wn(x))if(u=t.line,f=t.lineStart,d=t.lineIndent,ht(t,!1,-1),t.lineIndent>=e){l=!0,x=t.input.charCodeAt(t.position);continue}else{t.position=s,t.line=u,t.lineStart=f,t.lineIndent=d;break}}l&&(eo(t,o,s,!1),lT(t,t.line-u),o=s=t.position,l=!1),Uo(x)||(s=t.position+1),x=t.input.charCodeAt(++t.position)}return eo(t,o,s,!1),t.result?!0:(t.kind=h,t.result=g,!1)}function bG(t,e){var r,n,i;if(r=t.input.charCodeAt(t.position),r!==39)return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;(r=t.input.charCodeAt(t.position))!==0;)if(r===39)if(eo(t,n,t.position,!0),r=t.input.charCodeAt(++t.position),r===39)n=t.position,t.position++,i=t.position;else return!0;else Wn(r)?(eo(t,n,i,!0),lT(t,ht(t,!1,e)),n=i=t.position):t.position===t.lineStart&&gf(t)?ae(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);ae(t,"unexpected end of the stream within a single quoted scalar")}function wG(t,e){var r,n,i,o,s,l;if(l=t.input.charCodeAt(t.position),l!==34)return!1;for(t.kind="scalar",t.result="",t.position++,r=n=t.position;(l=t.input.charCodeAt(t.position))!==0;){if(l===34)return eo(t,r,t.position,!0),t.position++,!0;if(l===92){if(eo(t,r,t.position,!0),l=t.input.charCodeAt(++t.position),Wn(l))ht(t,!1,e);else if(l<256&&pk[l])t.result+=fk[l],t.position++;else if((s=yG(l))>0){for(i=s,o=0;i>0;i--)l=t.input.charCodeAt(++t.position),(s=gG(l))>=0?o=(o<<4)+s:ae(t,"expected hexadecimal character");t.result+=TG(o),t.position++}else ae(t,"unknown escape sequence");r=n=t.position}else Wn(l)?(eo(t,r,n,!0),lT(t,ht(t,!1,e)),r=n=t.position):t.position===t.lineStart&&gf(t)?ae(t,"unexpected end of the document within a double quoted scalar"):(t.position++,n=t.position)}ae(t,"unexpected end of the stream within a double quoted scalar")}function _G(t,e){var r=!0,n,i,o,s=t.tag,l,u=t.anchor,f,d,h,g,x,v=Object.create(null),w,N,A,U;if(U=t.input.charCodeAt(t.position),U===91)d=93,x=!1,l=[];else if(U===123)d=125,x=!0,l={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=l),U=t.input.charCodeAt(++t.position);U!==0;){if(ht(t,!0,e),U=t.input.charCodeAt(t.position),U===d)return t.position++,t.tag=s,t.anchor=u,t.kind=x?"mapping":"sequence",t.result=l,!0;r?U===44&&ae(t,"expected the node content, but found ','"):ae(t,"missed comma between flow collection entries"),N=w=A=null,h=g=!1,U===63&&(f=t.input.charCodeAt(t.position+1),gr(f)&&(h=g=!0,t.position++,ht(t,!0,e))),n=t.line,i=t.lineStart,o=t.position,as(t,e,pf,!1,!0),N=t.tag,w=t.result,ht(t,!0,e),U=t.input.charCodeAt(t.position),(g||t.line===n)&&U===58&&(h=!0,U=t.input.charCodeAt(++t.position),ht(t,!0,e),as(t,e,pf,!1,!0),A=t.result),x?os(t,l,v,N,w,A,n,i,o):h?l.push(os(t,null,v,N,w,A,n,i,o)):l.push(w),ht(t,!0,e),U=t.input.charCodeAt(t.position),U===44?(r=!0,U=t.input.charCodeAt(++t.position)):r=!1}ae(t,"unexpected end of the stream within a flow collection")}function EG(t,e){var r,n,i=eT,o=!1,s=!1,l=e,u=0,f=!1,d,h;if(h=t.input.charCodeAt(t.position),h===124)n=!1;else if(h===62)n=!0;else return!1;for(t.kind="scalar",t.result="";h!==0;)if(h=t.input.charCodeAt(++t.position),h===43||h===45)eT===i?i=h===43?$R:fG:ae(t,"repeat of a chomping mode identifier");else if((d=xG(h))>=0)d===0?ae(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?ae(t,"repeat of an indentation width identifier"):(l=e+d-1,s=!0);else break;if(Uo(h)){do h=t.input.charCodeAt(++t.position);while(Uo(h));if(h===35)do h=t.input.charCodeAt(++t.position);while(!Wn(h)&&h!==0)}for(;h!==0;){for(cT(t),t.lineIndent=0,h=t.input.charCodeAt(t.position);(!s||t.lineIndent<l)&&h===32;)t.lineIndent++,h=t.input.charCodeAt(++t.position);if(!s&&t.lineIndent>l&&(l=t.lineIndent),Wn(h)){u++;continue}if(t.lineIndent<l){i===$R?t.result+=Tt.repeat(`
`,o?1+u:u):i===eT&&o&&(t.result+=`
`);break}for(n?Uo(h)?(f=!0,t.result+=Tt.repeat(`
`,o?1+u:u)):f?(f=!1,t.result+=Tt.repeat(`
`,u+1)):u===0?o&&(t.result+=" "):t.result+=Tt.repeat(`
`,u):t.result+=Tt.repeat(`
`,o?1+u:u),o=!0,s=!0,u=0,r=t.position;!Wn(h)&&h!==0;)h=t.input.charCodeAt(++t.position);eo(t,r,t.position,!1)}return!0}function KR(t,e){var r,n=t.tag,i=t.anchor,o=[],s,l=!1,u;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),u=t.input.charCodeAt(t.position);u!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,ae(t,"tab characters must not be used in indentation")),!(u!==45||(s=t.input.charCodeAt(t.position+1),!gr(s))));){if(l=!0,t.position++,ht(t,!0,-1)&&t.lineIndent<=e){o.push(null),u=t.input.charCodeAt(t.position);continue}if(r=t.line,as(t,e,ck,!1,!0),o.push(t.result),ht(t,!0,-1),u=t.input.charCodeAt(t.position),(t.line===r||t.lineIndent>e)&&u!==0)ae(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return l?(t.tag=n,t.anchor=i,t.kind="sequence",t.result=o,!0):!1}function RG(t,e,r){var n,i,o,s,l,u,f=t.tag,d=t.anchor,h={},g=Object.create(null),x=null,v=null,w=null,N=!1,A=!1,U;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=h),U=t.input.charCodeAt(t.position);U!==0;){if(!N&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,ae(t,"tab characters must not be used in indentation")),n=t.input.charCodeAt(t.position+1),o=t.line,(U===63||U===58)&&gr(n))U===63?(N&&(os(t,h,g,x,v,null,s,l,u),x=v=w=null),A=!0,N=!0,i=!0):N?(N=!1,i=!0):ae(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,U=n;else{if(s=t.line,l=t.lineStart,u=t.position,!as(t,r,sk,!1,!0))break;if(t.line===o){for(U=t.input.charCodeAt(t.position);Uo(U);)U=t.input.charCodeAt(++t.position);if(U===58)U=t.input.charCodeAt(++t.position),gr(U)||ae(t,"a whitespace character is expected after the key-value separator within a block mapping"),N&&(os(t,h,g,x,v,null,s,l,u),x=v=w=null),A=!0,N=!1,i=!1,x=t.tag,v=t.result;else if(A)ae(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=f,t.anchor=d,!0}else if(A)ae(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=f,t.anchor=d,!0}if((t.line===o||t.lineIndent>e)&&(N&&(s=t.line,l=t.lineStart,u=t.position),as(t,e,ff,!0,i)&&(N?v=t.result:w=t.result),N||(os(t,h,g,x,v,w,s,l,u),x=v=w=null),ht(t,!0,-1),U=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&U!==0)ae(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return N&&os(t,h,g,x,v,null,s,l,u),A&&(t.tag=f,t.anchor=d,t.kind="mapping",t.result=h),A}function kG(t){var e,r=!1,n=!1,i,o,s;if(s=t.input.charCodeAt(t.position),s!==33)return!1;if(t.tag!==null&&ae(t,"duplication of a tag property"),s=t.input.charCodeAt(++t.position),s===60?(r=!0,s=t.input.charCodeAt(++t.position)):s===33?(n=!0,i="!!",s=t.input.charCodeAt(++t.position)):i="!",e=t.position,r){do s=t.input.charCodeAt(++t.position);while(s!==0&&s!==62);t.position<t.length?(o=t.input.slice(e,t.position),s=t.input.charCodeAt(++t.position)):ae(t,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!gr(s);)s===33&&(n?ae(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),lk.test(i)||ae(t,"named tag handle cannot contain such characters"),n=!0,e=t.position+1)),s=t.input.charCodeAt(++t.position);o=t.input.slice(e,t.position),hG.test(o)&&ae(t,"tag suffix cannot contain flow indicator characters")}o&&!uk.test(o)&&ae(t,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{ae(t,"tag name is malformed: "+o)}return r?t.tag=o:to.call(t.tagMap,i)?t.tag=t.tagMap[i]+o:i==="!"?t.tag="!"+o:i==="!!"?t.tag="tag:yaml.org,2002:"+o:ae(t,'undeclared tag handle "'+i+'"'),!0}function MG(t){var e,r;if(r=t.input.charCodeAt(t.position),r!==38)return!1;for(t.anchor!==null&&ae(t,"duplication of an anchor property"),r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!gr(r)&&!is(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&ae(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function PG(t){var e,r,n;if(n=t.input.charCodeAt(t.position),n!==42)return!1;for(n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!gr(n)&&!is(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&ae(t,"name of an alias node must contain at least one character"),r=t.input.slice(e,t.position),to.call(t.anchorMap,r)||ae(t,'unidentified alias "'+r+'"'),t.result=t.anchorMap[r],ht(t,!0,-1),!0}function as(t,e,r,n,i){var o,s,l,u=1,f=!1,d=!1,h,g,x,v,w,N;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=s=l=ff===r||ck===r,n&&ht(t,!0,-1)&&(f=!0,t.lineIndent>e?u=1:t.lineIndent===e?u=0:t.lineIndent<e&&(u=-1)),u===1)for(;kG(t)||MG(t);)ht(t,!0,-1)?(f=!0,l=o,t.lineIndent>e?u=1:t.lineIndent===e?u=0:t.lineIndent<e&&(u=-1)):l=!1;if(l&&(l=f||i),(u===1||ff===r)&&(pf===r||sk===r?w=e:w=e+1,N=t.position-t.lineStart,u===1?l&&(KR(t,N)||RG(t,N,w))||_G(t,w)?d=!0:(s&&EG(t,w)||bG(t,w)||wG(t,w)?d=!0:PG(t)?(d=!0,(t.tag!==null||t.anchor!==null)&&ae(t,"alias node should not have any properties")):vG(t,w,pf===r)&&(d=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):u===0&&(d=l&&KR(t,N))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&ae(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),h=0,g=t.implicitTypes.length;h<g;h+=1)if(v=t.implicitTypes[h],v.resolve(t.result)){t.result=v.construct(t.result),t.tag=v.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(to.call(t.typeMap[t.kind||"fallback"],t.tag))v=t.typeMap[t.kind||"fallback"][t.tag];else for(v=null,x=t.typeMap.multi[t.kind||"fallback"],h=0,g=x.length;h<g;h+=1)if(t.tag.slice(0,x[h].tag.length)===x[h].tag){v=x[h];break}v||ae(t,"unknown tag !<"+t.tag+">"),t.result!==null&&v.kind!==t.kind&&ae(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+v.kind+'", not "'+t.kind+'"'),v.resolve(t.result,t.tag)?(t.result=v.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):ae(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||d}function AG(t){var e=t.position,r,n,i,o=!1,s;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(s=t.input.charCodeAt(t.position))!==0&&(ht(t,!0,-1),s=t.input.charCodeAt(t.position),!(t.lineIndent>0||s!==37));){for(o=!0,s=t.input.charCodeAt(++t.position),r=t.position;s!==0&&!gr(s);)s=t.input.charCodeAt(++t.position);for(n=t.input.slice(r,t.position),i=[],n.length<1&&ae(t,"directive name must not be less than one character in length");s!==0;){for(;Uo(s);)s=t.input.charCodeAt(++t.position);if(s===35){do s=t.input.charCodeAt(++t.position);while(s!==0&&!Wn(s));break}if(Wn(s))break;for(r=t.position;s!==0&&!gr(s);)s=t.input.charCodeAt(++t.position);i.push(t.input.slice(r,t.position))}s!==0&&cT(t),to.call(zR,n)?zR[n](t,n,i):df(t,'unknown document directive "'+n+'"')}if(ht(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,ht(t,!0,-1)):o&&ae(t,"directives end mark is expected"),as(t,t.lineIndent-1,ff,!1,!0),ht(t,!0,-1),t.checkLineBreaks&&mG.test(t.input.slice(e,t.position))&&df(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&gf(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,ht(t,!0,-1));return}if(t.position<t.length-1)ae(t,"end of the stream or a document separator is expected");else return}function mk(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var r=new SG(t,e),n=t.indexOf("\0");for(n!==-1&&(r.position=n,ae(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)AG(r);return r.documents}function DG(t,e,r){e!==null&&typeof e=="object"&&typeof r>"u"&&(r=e,e=null);var n=mk(t,r);if(typeof e!="function")return n;for(var i=0,o=n.length;i<o;i+=1)e(n[i])}function IG(t,e){var r=mk(t,e);if(r.length!==0){if(r.length===1)return r[0];throw new hr("expected a single document in the stream, but found more")}}var FG=DG,CG=IG,hk={loadAll:FG,load:CG},gk=Object.prototype.toString,yk=Object.prototype.hasOwnProperty,uT=65279,NG=9,zc=10,OG=13,LG=32,UG=33,BG=34,rT=35,VG=37,WG=38,HG=39,$G=42,xk=44,jG=45,mf=58,qG=61,zG=62,GG=63,KG=64,Tk=91,Sk=93,QG=96,vk=123,ZG=124,bk=125,Wt={};Wt[0]="\\0";Wt[7]="\\a";Wt[8]="\\b";Wt[9]="\\t";Wt[10]="\\n";Wt[11]="\\v";Wt[12]="\\f";Wt[13]="\\r";Wt[27]="\\e";Wt[34]='\\"';Wt[92]="\\\\";Wt[133]="\\N";Wt[160]="\\_";Wt[8232]="\\L";Wt[8233]="\\P";var YG=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],XG=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function JG(t,e){var r,n,i,o,s,l,u;if(e===null)return{};for(r={},n=Object.keys(e),i=0,o=n.length;i<o;i+=1)s=n[i],l=String(e[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),u=t.compiledTypeMap.fallback[s],u&&yk.call(u.styleAliases,l)&&(l=u.styleAliases[l]),r[s]=l;return r}function eK(t){var e,r,n;if(e=t.toString(16).toUpperCase(),t<=255)r="x",n=2;else if(t<=65535)r="u",n=4;else if(t<=4294967295)r="U",n=8;else throw new hr("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+r+Tt.repeat("0",n-e.length)+e}var tK=1,Gc=2;function rK(t){this.schema=t.schema||sT,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=Tt.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=JG(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?Gc:tK,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function QR(t,e){for(var r=Tt.repeat(" ",e),n=0,i=-1,o="",s,l=t.length;n<l;)i=t.indexOf(`
`,n),i===-1?(s=t.slice(n),n=l):(s=t.slice(n,i+1),n=i+1),s.length&&s!==`
`&&(o+=r),o+=s;return o}function nT(t,e){return`
`+Tt.repeat(" ",t.indent*e)}function nK(t,e){var r,n,i;for(r=0,n=t.implicitTypes.length;r<n;r+=1)if(i=t.implicitTypes[r],i.resolve(e))return!0;return!1}function hf(t){return t===LG||t===NG}function Kc(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==uT||65536<=t&&t<=1114111}function ZR(t){return Kc(t)&&t!==uT&&t!==OG&&t!==zc}function YR(t,e,r){var n=ZR(t),i=n&&!hf(t);return(r?n:n&&t!==xk&&t!==Tk&&t!==Sk&&t!==vk&&t!==bk)&&t!==rT&&!(e===mf&&!i)||ZR(e)&&!hf(e)&&t===rT||e===mf&&i}function iK(t){return Kc(t)&&t!==uT&&!hf(t)&&t!==jG&&t!==GG&&t!==mf&&t!==xk&&t!==Tk&&t!==Sk&&t!==vk&&t!==bk&&t!==rT&&t!==WG&&t!==$G&&t!==UG&&t!==ZG&&t!==qG&&t!==zG&&t!==HG&&t!==BG&&t!==VG&&t!==KG&&t!==QG}function oK(t){return!hf(t)&&t!==mf}function jc(t,e){var r=t.charCodeAt(e),n;return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1),n>=56320&&n<=57343)?(r-55296)*1024+n-56320+65536:r}function wk(t){var e=/^\n* /;return e.test(t)}var _k=1,iT=2,Ek=3,Rk=4,ns=5;function aK(t,e,r,n,i,o,s,l){var u,f=0,d=null,h=!1,g=!1,x=n!==-1,v=-1,w=iK(jc(t,0))&&oK(jc(t,t.length-1));if(e||s)for(u=0;u<t.length;f>=65536?u+=2:u++){if(f=jc(t,u),!Kc(f))return ns;w=w&&YR(f,d,l),d=f}else{for(u=0;u<t.length;f>=65536?u+=2:u++){if(f=jc(t,u),f===zc)h=!0,x&&(g=g||u-v-1>n&&t[v+1]!==" ",v=u);else if(!Kc(f))return ns;w=w&&YR(f,d,l),d=f}g=g||x&&u-v-1>n&&t[v+1]!==" "}return!h&&!g?w&&!s&&!i(t)?_k:o===Gc?ns:iT:r>9&&wk(t)?ns:s?o===Gc?ns:iT:g?Rk:Ek}function sK(t,e,r,n,i){t.dump=function(){if(e.length===0)return t.quotingType===Gc?'""':"''";if(!t.noCompatMode&&(YG.indexOf(e)!==-1||XG.test(e)))return t.quotingType===Gc?'"'+e+'"':"'"+e+"'";var o=t.indent*Math.max(1,r),s=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),l=n||t.flowLevel>-1&&r>=t.flowLevel;function u(f){return nK(t,f)}switch(aK(e,l,t.indent,s,u,t.quotingType,t.forceQuotes&&!n,i)){case _k:return e;case iT:return"'"+e.replace(/'/g,"''")+"'";case Ek:return"|"+XR(e,t.indent)+JR(QR(e,o));case Rk:return">"+XR(e,t.indent)+JR(QR(cK(e,s),o));case ns:return'"'+lK(e)+'"';default:throw new hr("impossible error: invalid scalar style")}}()}function XR(t,e){var r=wk(t)?String(e):"",n=t[t.length-1]===`
`,i=n&&(t[t.length-2]===`
`||t===`
`),o=i?"+":n?"":"-";return r+o+`
`}function JR(t){return t[t.length-1]===`
`?t.slice(0,-1):t}function cK(t,e){for(var r=/(\n+)([^\n]*)/g,n=function(){var f=t.indexOf(`
`);return f=f!==-1?f:t.length,r.lastIndex=f,ek(t.slice(0,f),e)}(),i=t[0]===`
`||t[0]===" ",o,s;s=r.exec(t);){var l=s[1],u=s[2];o=u[0]===" ",n+=l+(!i&&!o&&u!==""?`
`:"")+ek(u,e),i=o}return n}function ek(t,e){if(t===""||t[0]===" ")return t;for(var r=/ [^ ]/g,n,i=0,o,s=0,l=0,u="";n=r.exec(t);)l=n.index,l-i>e&&(o=s>i?s:l,u+=`
`+t.slice(i,o),i=o+1),s=l;return u+=`
`,t.length-i>e&&s>i?u+=t.slice(i,s)+`
`+t.slice(s+1):u+=t.slice(i),u.slice(1)}function lK(t){for(var e="",r=0,n,i=0;i<t.length;r>=65536?i+=2:i++)r=jc(t,i),n=Wt[r],!n&&Kc(r)?(e+=t[i],r>=65536&&(e+=t[i+1])):e+=n||eK(r);return e}function uK(t,e,r){var n="",i=t.tag,o,s,l;for(o=0,s=r.length;o<s;o+=1)l=r[o],t.replacer&&(l=t.replacer.call(r,String(o),l)),(Si(t,e,l,!1,!1)||typeof l>"u"&&Si(t,e,null,!1,!1))&&(n!==""&&(n+=","+(t.condenseFlow?"":" ")),n+=t.dump);t.tag=i,t.dump="["+n+"]"}function tk(t,e,r,n){var i="",o=t.tag,s,l,u;for(s=0,l=r.length;s<l;s+=1)u=r[s],t.replacer&&(u=t.replacer.call(r,String(s),u)),(Si(t,e+1,u,!0,!0,!1,!0)||typeof u>"u"&&Si(t,e+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=nT(t,e)),t.dump&&zc===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=o,t.dump=i||"[]"}function pK(t,e,r){var n="",i=t.tag,o=Object.keys(r),s,l,u,f,d;for(s=0,l=o.length;s<l;s+=1)d="",n!==""&&(d+=", "),t.condenseFlow&&(d+='"'),u=o[s],f=r[u],t.replacer&&(f=t.replacer.call(r,u,f)),Si(t,e,u,!1,!1)&&(t.dump.length>1024&&(d+="? "),d+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),Si(t,e,f,!1,!1)&&(d+=t.dump,n+=d));t.tag=i,t.dump="{"+n+"}"}function fK(t,e,r,n){var i="",o=t.tag,s=Object.keys(r),l,u,f,d,h,g;if(t.sortKeys===!0)s.sort();else if(typeof t.sortKeys=="function")s.sort(t.sortKeys);else if(t.sortKeys)throw new hr("sortKeys must be a boolean or a function");for(l=0,u=s.length;l<u;l+=1)g="",(!n||i!=="")&&(g+=nT(t,e)),f=s[l],d=r[f],t.replacer&&(d=t.replacer.call(r,f,d)),Si(t,e+1,f,!0,!0,!0)&&(h=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,h&&(t.dump&&zc===t.dump.charCodeAt(0)?g+="?":g+="? "),g+=t.dump,h&&(g+=nT(t,e)),Si(t,e+1,d,!0,h)&&(t.dump&&zc===t.dump.charCodeAt(0)?g+=":":g+=": ",g+=t.dump,i+=g));t.tag=o,t.dump=i||"{}"}function rk(t,e,r){var n,i,o,s,l,u;for(i=r?t.explicitTypes:t.implicitTypes,o=0,s=i.length;o<s;o+=1)if(l=i[o],(l.instanceOf||l.predicate)&&(!l.instanceOf||typeof e=="object"&&e instanceof l.instanceOf)&&(!l.predicate||l.predicate(e))){if(r?l.multi&&l.representName?t.tag=l.representName(e):t.tag=l.tag:t.tag="?",l.represent){if(u=t.styleMap[l.tag]||l.defaultStyle,gk.call(l.represent)==="[object Function]")n=l.represent(e,u);else if(yk.call(l.represent,u))n=l.represent[u](e,u);else throw new hr("!<"+l.tag+'> tag resolver accepts not "'+u+'" style');t.dump=n}return!0}return!1}function Si(t,e,r,n,i,o,s){t.tag=null,t.dump=r,rk(t,r,!1)||rk(t,r,!0);var l=gk.call(t.dump),u=n,f;n&&(n=t.flowLevel<0||t.flowLevel>e);var d=l==="[object Object]"||l==="[object Array]",h,g;if(d&&(h=t.duplicates.indexOf(r),g=h!==-1),(t.tag!==null&&t.tag!=="?"||g||t.indent!==2&&e>0)&&(i=!1),g&&t.usedDuplicates[h])t.dump="*ref_"+h;else{if(d&&g&&!t.usedDuplicates[h]&&(t.usedDuplicates[h]=!0),l==="[object Object]")n&&Object.keys(t.dump).length!==0?(fK(t,e,t.dump,i),g&&(t.dump="&ref_"+h+t.dump)):(pK(t,e,t.dump),g&&(t.dump="&ref_"+h+" "+t.dump));else if(l==="[object Array]")n&&t.dump.length!==0?(t.noArrayIndent&&!s&&e>0?tk(t,e-1,t.dump,i):tk(t,e,t.dump,i),g&&(t.dump="&ref_"+h+t.dump)):(uK(t,e,t.dump),g&&(t.dump="&ref_"+h+" "+t.dump));else if(l==="[object String]")t.tag!=="?"&&sK(t,t.dump,e,o,u);else{if(l==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new hr("unacceptable kind of an object to dump "+l)}t.tag!==null&&t.tag!=="?"&&(f=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?f="!"+f:f.slice(0,18)==="tag:yaml.org,2002:"?f="!!"+f.slice(18):f="!<"+f+">",t.dump=f+" "+t.dump)}return!0}function dK(t,e){var r=[],n=[],i,o;for(oT(t,r,n),i=0,o=n.length;i<o;i+=1)e.duplicates.push(r[n[i]]);e.usedDuplicates=new Array(o)}function oT(t,e,r){var n,i,o;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)r.indexOf(i)===-1&&r.push(i);else if(e.push(t),Array.isArray(t))for(i=0,o=t.length;i<o;i+=1)oT(t[i],e,r);else for(n=Object.keys(t),i=0,o=n.length;i<o;i+=1)oT(t[n[i]],e,r)}function mK(t,e){e=e||{};var r=new rK(e);r.noRefs||dK(t,r);var n=t;return r.replacer&&(n=r.replacer.call({"":n},"",n)),Si(r,0,n,!0,!0)?r.dump+`
`:""}var hK=mK,gK={dump:hK};function pT(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}var kk=It;var Mk=sT,yK=hk.load,Zfe=hk.loadAll,Pk=gK.dump;var Yfe=pT("safeLoad","load"),Xfe=pT("safeLoadAll","loadAll"),Jfe=pT("safeDump","dump");var yf=class{constructor(e,r){this.data=e;this.opts=r}represent(){let e=Pk(this.data,Object.assign({replacer:vK,schema:TK},this.opts));return e=e.trim(),e.includes(`
`)&&(e=`
`+e),e}},xK=new kk("!format",{kind:"scalar",resolve:()=>!1,instanceOf:yf,represent:t=>t.represent()}),TK=Mk.extend({implicit:[xK]}),fT=t=>typeof t=="object"&&t!=null;function SK(t){if(fT(t))return Object.values(t).every(e=>!fT(e)&&!Array.isArray(e));if(Array.isArray(t))return t.every(e=>!fT(e)&&!Array.isArray(e))}function vK(t,e){return t===""?e:SK(e)?new yf(e,{flowLevel:0}):e}var dT=["breakLine","clearAndSetSelection","copyToClipboard","cutToClipboard","decrement","deselect","editNewLineAfter","editNewLineBefore","experimental.setInstanceReference","extractVariable","findInDocument","findInWorkspace","foldRegion","followLink","followLinkAside","increment","indentLine","insertCopyAfter","insertCopyBefore","insertEmptyLineAfter","insertEmptyLineBefore","insertEmptyLinesAround","joinLines","outdentLine","randomizeTargets","remove","rename","revealDefinition","revealTypeDefinition","reverseTargets","scrollToBottom","scrollToCenter","scrollToTop","setSelection","setSelectionAfter","setSelectionBefore","showDebugHover","showHover","showQuickFix","showReferences","sortTargets","toggleLineBreakpoint","toggleLineComment","unfoldRegion","private.setKeyboardTarget","private.showParseTree","private.getTargets"],wK=["callAsFunction","editNew","executeCommand","generateSnippet","getText","highlight","insertSnippet","moveToTarget","pasteFromClipboard","replace","replaceWithTarget","rewrapWithPairedDelimiter","swapTargets","wrapWithPairedDelimiter","wrapWithSnippet","parsed"],Dk=[...dT,...wK];var _K=["angleBrackets","backtickQuotes","curlyBrackets","doubleQuotes","escapedDoubleQuotes","escapedParentheses","escapedSingleQuotes","escapedSquareBrackets","parentheses","singleQuotes","squareBrackets","tripleDoubleQuotes","tripleSingleQuotes"],EK=["string","any","collectionBoundary"],xf=[..._K,...EK],Bo=["argumentOrParameter","anonymousFunction","attribute","branch","class","className","collectionItem","collectionKey","comment","private.fieldAccess","functionCall","functionCallee","functionName","ifStatement","instance","list","map","name","namedFunction","regularExpression","statement","string","type","value","condition","section","sectionLevelOne","sectionLevelTwo","sectionLevelThree","sectionLevelFour","sectionLevelFive","sectionLevelSix","selector","private.switchStatementSubject","unit","xmlBothTags","xmlElement","xmlEndTag","xmlStartTag","part","chapter","subSection","subSubSection","namedParagraph","subParagraph","environment","character","word","token","identifier","line","sentence","paragraph","document","nonWhitespaceSequence","boundedNonWhitespaceSequence","url","notebookCell","command","textFragment","disqualifyDelimiter"];function Ik(t){return Bo.includes(t.type)}var Fk=["simpleScopeTypeType","complexScopeTypeType","customRegex","pairedDelimiter","action","customAction","grapheme"],Qc=class extends Error{constructor(e){super(e),this.name="NeedsInitialTalonUpdateError"}},ss=class extends Error{constructor(){super("Custom spoken forms are not currently supported in this ide"),this.name="DisabledCustomSpokenFormsError"}};function Zc(t){return t.replace(/([A-Z])/g," $1").split(" ").map(e=>e.toLowerCase()).join(" ")}function Vo(t){return t.version>=7}var ro=class{constructor(e){this.hashFunction=e;this.map={}}hash(e){return this.hashFunction(e).join("\0")}set(e,r){return this.map[this.hash(e)]=r,this}has(e){return this.hash(e)in this.map}get(e){return this.map[this.hash(e)]}delete(e){return delete this.map[this.hash(e)],this}clear(){return this.map={},this}};var no=class extends Map{constructor(r){super();this.getDefaultValue=r}get(r){let n=super.get(r);if(n!=null)return n;let i=this.getDefaultValue(r);return this.set(r,i),i}};function Ck(...t){return{dispose(){t.forEach(({dispose:e})=>{try{e()}catch(r){console.error(r)}})}}}function Yc(t){return typeof t=="string"||t instanceof String}function Tf(t){let[e,...r]=t;return kK(e,r)}function kK(t,e){let r;if(Yc(t)){let n=t,[i,o,...s]=e;r={version:0,spokenForm:n,action:i,targets:o,extraArgs:s,usePrePhraseSnapshot:!1}}else r=t;return r}function Xc(t,e){let r=new Map;return t.forEach(n=>{let i=e(n),o;r.has(i)?o=r.get(i):(o=[],r.set(i,o)),o.push(n)}),r}function Nk(t){for(let e of t)return!1;return!0}function vi(t){return Object.keys(t)}function Jc(t,e){return`${t}.${e}`}var Lk={camelCase(t){if(t.length===0)return"";let[e,...r]=t;return e+r.map(Ok).join("")},snakeCase(t){return t.join("_")},upperSnakeCase(t){return t.map(e=>e.toUpperCase()).join("_")},pascalCase(t){return t.map(Ok).join("")}};function Ok(t){return t.length===0?"":t[0].toUpperCase()+t.substr(1)}function Uk(t,e,r){if(t.length<2)return[...t];if(t.length===2)return e(t[0],t[1])?[t[0]]:[...t];let n=[],i=t.reduce((o,s)=>{let l=r(s),u=o.get(l);return u==null?(o.set(l,[s]),o):(o.get(l).push(s),u.length===2&&n.push(l),o)},new Map);return n.length===0?[...t]:(n.forEach(o=>{i.set(o,Fc(i.get(o),e))}),t.flatMap(o=>{let s=r(o),l=i.get(s);if(l==null||l.length===0)return[];let u=l[0];return e(u,o)?(l.shift(),u):[]}))}var jk=Symbol.for("immer-nothing"),Bk=Symbol.for("immer-draftable"),Nr=Symbol.for("immer-state"),MK=process.env.NODE_ENV!=="production"?[function(t){return`The plugin for '${t}' has not been loaded into Immer. To enable the plugin, import and call \`enable${t}()\` when initializing your application.`},function(t){return`produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '${t}'`},"This object has been frozen and should not be mutated",function(t){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+t},"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.","Immer forbids circular references","The first or second argument to `produce` must be a function","The third argument to `produce` must be a function or undefined","First argument to `createDraft` must be a plain object, an array, or an immerable object","First argument to `finishDraft` must be a draft returned by `createDraft`",function(t){return`'current' expects a draft, got: ${t}`},"Object.defineProperty() cannot be used on an Immer draft","Object.setPrototypeOf() cannot be used on an Immer draft","Immer only supports deleting array indices","Immer only supports setting array indices and the 'length' property",function(t){return`'original' expects a draft, got: ${t}`}]:[];function yr(t,...e){if(process.env.NODE_ENV!=="production"){let r=MK[t],n=typeof r=="function"?r.apply(null,e):r;throw new Error(`[Immer] ${n}`)}throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var cs=Object.getPrototypeOf;function ls(t){return!!t&&!!t[Nr]}function Ho(t){return t?qk(t)||Array.isArray(t)||!!t[Bk]||!!t.constructor?.[Bk]||_f(t)||Ef(t):!1}var PK=Object.prototype.constructor.toString();function qk(t){if(!t||typeof t!="object")return!1;let e=cs(t);if(e===null)return!0;let r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===PK}function Sf(t,e){wf(t)===0?Reflect.ownKeys(t).forEach(r=>{e(r,t[r],t)}):t.forEach((r,n)=>e(n,r,t))}function wf(t){let e=t[Nr];return e?e.type_:Array.isArray(t)?1:_f(t)?2:Ef(t)?3:0}function gT(t,e){return wf(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function zk(t,e,r){let n=wf(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function AK(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function _f(t){return t instanceof Map}function Ef(t){return t instanceof Set}function Wo(t){return t.copy_||t.base_}function yT(t,e){if(_f(t))return new Map(t);if(Ef(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);if(!e&&qk(t))return cs(t)?{...t}:Object.assign(Object.create(null),t);let r=Object.getOwnPropertyDescriptors(t);delete r[Nr];let n=Reflect.ownKeys(r);for(let i=0;i<n.length;i++){let o=n[i],s=r[o];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(r[o]={configurable:!0,writable:!0,enumerable:s.enumerable,value:t[o]})}return Object.create(cs(t),r)}function bT(t,e=!1){return Rf(t)||ls(t)||!Ho(t)||(wf(t)>1&&(t.set=t.add=t.clear=t.delete=DK),Object.freeze(t),e&&Object.entries(t).forEach(([r,n])=>bT(n,!0))),t}function DK(){yr(2)}function Rf(t){return Object.isFrozen(t)}var IK={};function $o(t){let e=IK[t];return e||yr(0,t),e}var el;function Gk(){return el}function FK(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Vk(t,e){e&&($o("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function xT(t){TT(t),t.drafts_.forEach(CK),t.drafts_=null}function TT(t){t===el&&(el=t.parent_)}function Wk(t){return el=FK(el,t)}function CK(t){let e=t[Nr];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function Hk(t,e){e.unfinalizedDrafts_=e.drafts_.length;let r=e.drafts_[0];return t!==void 0&&t!==r?(r[Nr].modified_&&(xT(e),yr(4)),Ho(t)&&(t=vf(e,t),e.parent_||bf(e,t)),e.patches_&&$o("Patches").generateReplacementPatches_(r[Nr].base_,t,e.patches_,e.inversePatches_)):t=vf(e,r,[]),xT(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==jk?t:void 0}function vf(t,e,r){if(Rf(e))return e;let n=e[Nr];if(!n)return Sf(e,(i,o)=>$k(t,n,e,i,o,r)),e;if(n.scope_!==t)return e;if(!n.modified_)return bf(t,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;let i=n.copy_,o=i,s=!1;n.type_===3&&(o=new Set(i),i.clear(),s=!0),Sf(o,(l,u)=>$k(t,n,i,l,u,r,s)),bf(t,i,!1),r&&t.patches_&&$o("Patches").generatePatches_(n,r,t.patches_,t.inversePatches_)}return n.copy_}function $k(t,e,r,n,i,o,s){if(process.env.NODE_ENV!=="production"&&i===r&&yr(5),ls(i)){let l=o&&e&&e.type_!==3&&!gT(e.assigned_,n)?o.concat(n):void 0,u=vf(t,i,l);if(zk(r,n,u),ls(u))t.canAutoFreeze_=!1;else return}else s&&r.add(i);if(Ho(i)&&!Rf(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;vf(t,i),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&bf(t,i)}}function bf(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&bT(e,r)}function NK(t,e){let r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:Gk(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1},i=n,o=wT;r&&(i=[n],o=tl);let{revoke:s,proxy:l}=Proxy.revocable(i,o);return n.draft_=l,n.revoke_=s,l}var wT={get(t,e){if(e===Nr)return t;let r=Wo(t);if(!gT(r,e))return OK(t,r,e);let n=r[e];return t.finalized_||!Ho(n)?n:n===mT(t.base_,e)?(hT(t),t.copy_[e]=vT(n,t)):n},has(t,e){return e in Wo(t)},ownKeys(t){return Reflect.ownKeys(Wo(t))},set(t,e,r){let n=Kk(Wo(t),e);if(n?.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){let i=mT(Wo(t),e),o=i?.[Nr];if(o&&o.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(AK(r,i)&&(r!==void 0||gT(t.base_,e)))return!0;hT(t),ST(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return mT(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,hT(t),ST(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){let r=Wo(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){yr(11)},getPrototypeOf(t){return cs(t.base_)},setPrototypeOf(){yr(12)}},tl={};Sf(wT,(t,e)=>{tl[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});tl.deleteProperty=function(t,e){return process.env.NODE_ENV!=="production"&&isNaN(parseInt(e))&&yr(13),tl.set.call(this,t,e,void 0)};tl.set=function(t,e,r){return process.env.NODE_ENV!=="production"&&e!=="length"&&isNaN(parseInt(e))&&yr(14),wT.set.call(this,t[0],e,r,t[0])};function mT(t,e){let r=t[Nr];return(r?Wo(r):t)[e]}function OK(t,e,r){let n=Kk(e,r);return n?"value"in n?n.value:n.get?.call(t.draft_):void 0}function Kk(t,e){if(!(e in t))return;let r=cs(t);for(;r;){let n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=cs(r)}}function ST(t){t.modified_||(t.modified_=!0,t.parent_&&ST(t.parent_))}function hT(t){t.copy_||(t.copy_=yT(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var LK=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){let o=r;r=e;let s=this;return function(u=o,...f){return s.produce(u,d=>r.call(this,d,...f))}}typeof r!="function"&&yr(6),n!==void 0&&typeof n!="function"&&yr(7);let i;if(Ho(e)){let o=Wk(this),s=vT(e,void 0),l=!0;try{i=r(s),l=!1}finally{l?xT(o):TT(o)}return Vk(o,n),Hk(i,o)}else if(!e||typeof e!="object"){if(i=r(e),i===void 0&&(i=e),i===jk&&(i=void 0),this.autoFreeze_&&bT(i,!0),n){let o=[],s=[];$o("Patches").generateReplacementPatches_(e,i,o,s),n(o,s)}return i}else yr(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(s,...l)=>this.produceWithPatches(s,u=>e(u,...l));let n,i;return[this.produce(e,r,(s,l)=>{n=s,i=l}),n,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){Ho(t)||yr(8),ls(t)&&(t=UK(t));let e=Wk(this),r=vT(t,void 0);return r[Nr].isManual_=!0,TT(e),r}finishDraft(t,e){let r=t&&t[Nr];(!r||!r.isManual_)&&yr(9);let{scope_:n}=r;return Vk(n,e),Hk(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){let i=e[r];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}r>-1&&(e=e.slice(r+1));let n=$o("Patches").applyPatches_;return ls(t)?n(t,e):this.produce(t,i=>n(i,e))}};function vT(t,e){let r=_f(t)?$o("MapSet").proxyMap_(t,e):Ef(t)?$o("MapSet").proxySet_(t,e):NK(t,e);return(e?e.scope_:Gk()).drafts_.push(r),r}function UK(t){return ls(t)||yr(10,t),Qk(t)}function Qk(t){if(!Ho(t)||Rf(t))return t;let e=t[Nr],r;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=yT(t,e.scope_.immer_.useStrictShallowCopy_)}else r=yT(t,!0);return Sf(r,(n,i)=>{zk(r,n,Qk(i))}),e&&(e.finalized_=!1),r}var Or=new LK,kf=Or.produce,Ghe=Or.produceWithPatches.bind(Or),Khe=Or.setAutoFreeze.bind(Or),Qhe=Or.setUseStrictShallowCopy.bind(Or),Zhe=Or.applyPatches.bind(Or),Yhe=Or.createDraft.bind(Or),Xhe=Or.finishDraft.bind(Or);var Hn=dr(mM(),1),yge=Hn.default.v1,xge=Hn.default.v3,hM=Hn.default.v4,Tge=Hn.default.v5,Sge=Hn.default.NIL,vge=Hn.default.version,bge=Hn.default.validate,wge=Hn.default.stringify,_ge=Hn.default.parse;function gM(t,e,r){if(e>=t.length)throw Error(`Expected at least ${e+1} ${r} but received only ${t.length}`);return t[e]}function Hf(t,e){if(Array.isArray(t))return t.map(r=>Hf(r,e));if(typeof t=="object"&&t!=null){if(K4(t))return gM(e,t.index,"placeholder value");let r={};for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=Hf(t[n],e));return r}return t}function K4(t){return typeof t=="object"&&t!=null&&"type"in t&&t.type==="placeholder"}var Qf=dr(xM(),1);var Q4={blue:"blue",green:"green",red:"red",pink:"pink",yellow:"yellow",userColor1:"navy",userColor2:"apricot",default:null},Z4={ex:"ex",fox:"fox",wing:"wing",hole:"hole",frame:"frame",curve:"curve",eye:"eye",play:"play",crosshairs:"cross",bolt:"bolt",default:null},jf={cursor:"this",that:"that",source:"source",nothing:"nothing",keyboard:null,explicit:null,decoratedSymbol:null,lineNumber:null,range:null,target:null},qf={modulo100:"row",relativeUp:"up",relativeDown:"down"};function TM(t){let e=Q4[t];if(e==null)throw Error(`Unknown hat color '${t}'`);return e}function SM(t){let e=Z4[t];if(e==null)throw Error(`Unknown hat shape '${t}'`);return e}function DT(t,e){return Object.fromEntries(Object.entries(t).map(([r,n])=>[r,Object.fromEntries(Object.entries(n).map(([i,o])=>[i,e(o,r,i)]))]))}var Y4=Object.fromEntries("air bat cap drum each fine gust harp sit jury crunch look made near odd pit quench red sun trap urge vest whale plex yank zip".split(" ").map((t,e)=>[String.fromCharCode(97+e),t])),X4=Object.fromEntries("zero one two three four five six seven eight nine".split(" ").map((t,e)=>[e.toString(),t])),J4={".":"dot",",":"comma",";":"semicolon",":":"colon","!":"bang","*":"asterisk","@":"at sign","&":"ampersand","?":"question","/":"slash","\\":"backslash","-":"dash","=":"equals","+":"plus","~":"tilde",_:"underscore","#":"hash","%":"percent","^":"caret","|":"pipe",$:"dollar","\xA3":"pound","'":"quote",'"':"double quote","`":"back tick","(":"paren",")":"right paren","{":"brace","}":"right brace","[":"square","]":"right square","<":"angle",">":"right angle","\uFFFD":"special"},vM={...Y4,...X4,...J4};function io(...t){return{defaultSpokenForms:t,isDisabledByDefault:!0,isPrivate:!1}}function Ct(...t){return{defaultSpokenForms:t,isDisabledByDefault:!0,isPrivate:!0}}var bM={pairedDelimiter:{curlyBrackets:"curly",angleBrackets:"diamond",escapedDoubleQuotes:"escaped quad",escapedSingleQuotes:"escaped twin",escapedParentheses:"escaped round",escapedSquareBrackets:"escaped box",doubleQuotes:"quad",parentheses:"round",backtickQuotes:"skis",squareBrackets:"box",singleQuotes:"twin",tripleDoubleQuotes:Ct("triple quad"),tripleSingleQuotes:Ct("triple twin"),any:"pair",string:"string",whitespace:"void",collectionBoundary:Ct("collection boundary")},simpleScopeTypeType:{argumentOrParameter:"arg",attribute:"attribute",functionCall:"call",functionCallee:"callee",className:"class name",class:"class",comment:"comment",functionName:"funk name",namedFunction:"funk",ifStatement:"if state",instance:"instance",collectionItem:"item",collectionKey:"key",anonymousFunction:"lambda",list:"list",map:"map",name:"name",regularExpression:"regex",section:"section",sectionLevelOne:io("one section"),sectionLevelTwo:io("two section"),sectionLevelThree:io("three section"),sectionLevelFour:io("four section"),sectionLevelFive:io("five section"),sectionLevelSix:io("six section"),selector:"selector",statement:"state",branch:"branch",type:"type",value:"value",condition:"condition",unit:"unit",xmlElement:"element",xmlBothTags:"tags",xmlStartTag:"start tag",xmlEndTag:"end tag",part:"part",chapter:"chapter",subSection:"subsection",subSubSection:"subsubsection",namedParagraph:"paragraph",subParagraph:"subparagraph",environment:"environment",command:"command",character:"char",word:"sub",token:"token",identifier:"identifier",line:"line",sentence:"sentence",paragraph:"block",document:"file",nonWhitespaceSequence:"paint",boundedNonWhitespaceSequence:"short paint",url:"link",notebookCell:"cell",string:Ct("parse tree string"),textFragment:Ct("text fragment"),disqualifyDelimiter:Ct("disqualify delimiter"),"private.fieldAccess":Ct("access"),"private.switchStatementSubject":Ct("subject")},complexScopeTypeType:{glyph:"glyph"},surroundingPairForceDirection:{left:"left",right:"right"},simpleModifier:{excludeInterior:"bounds",toRawSelection:"just",leading:"leading",trailing:"trailing",keepContentFilter:"content",keepEmptyFilter:"empty",inferPreviousMark:"its",startOf:"start of",endOf:"end of",interiorOnly:"inside",visible:"visible",extendThroughStartOf:"head",extendThroughEndOf:"tail",everyScope:"every"},modifierExtra:{first:"first",last:"last",previous:"previous",next:"next",forward:"forward",backward:"backward",ancestor:"grand"},customRegex:{},action:{breakLine:"break",scrollToBottom:"bottom",toggleLineBreakpoint:"break point",cutToClipboard:"carve",scrollToCenter:"center",clearAndSetSelection:"change",remove:"chuck",insertCopyBefore:"clone up",insertCopyAfter:"clone",toggleLineComment:"comment",copyToClipboard:"copy",scrollToTop:"crown",outdentLine:"dedent",revealDefinition:"define",editNewLineBefore:"drink",insertEmptyLineBefore:"drop",extractVariable:"extract",insertEmptyLineAfter:"float",foldRegion:"fold",followLink:"follow",followLinkAside:"follow split",deselect:"give",highlight:"highlight",showHover:"hover",increment:"increment",decrement:"decrement",indentLine:"indent",showDebugHover:"inspect",setSelectionAfter:"post",editNewLineAfter:"pour",setSelectionBefore:"pre",insertEmptyLinesAround:"puff",showQuickFix:"quick fix",showReferences:"reference",rename:"rename",reverseTargets:"reverse",findInDocument:"scout",findInWorkspace:"scout all",randomizeTargets:"shuffle",generateSnippet:"snippet make",sortTargets:"sort",setSelection:"take",revealTypeDefinition:"type deaf",unfoldRegion:"unfold",callAsFunction:"call",swapTargets:"swap",replaceWithTarget:"bring",moveToTarget:"move",wrapWithPairedDelimiter:"wrap",wrapWithSnippet:"wrap",rewrapWithPairedDelimiter:"repack",insertSnippet:"snippet",pasteFromClipboard:"paste",joinLines:"join","private.showParseTree":Ct("parse tree"),"experimental.setInstanceReference":io("from"),editNew:Ct("edit new"),executeCommand:Ct("execute command"),parsed:Ct("parsed"),getText:Ct("get text"),replace:Ct("replace"),"private.getTargets":Ct("get targets"),"private.setKeyboardTarget":Ct("set keyboard target")},customAction:{},grapheme:vM};var IT=DT(bM,t=>typeof t=="string"?{defaultSpokenForms:[t],isDisabledByDefault:!1,isPrivate:!1}:t),wi=DT(IT,({defaultSpokenForms:t,isDisabledByDefault:e,isPrivate:r})=>({spokenForms:e?[]:t,isCustom:!1,defaultSpokenForms:t,requiresTalonUpdate:!1,isPrivate:r}));var pt={rangeExclusive:"between",rangeInclusive:"past",rangeExcludingStart:null,rangeExcludingEnd:"until",listConnective:"and",swapConnective:"with",sourceDestinationConnective:"to",before:"before",after:"after",verticalRange:"slice",previous:"previous",next:"next",forward:"forward",backward:"backward"};var EM=dr(_M(),1),Gf=class{constructor(e){this.mooLexer=EM.default.compile(e)}reset(e,r){let{mooState:n}=r??{};return this.mooLexer.reset(e,n),this}formatError(e,r){return this.mooLexer.formatError(e,r)}has(e){return this.mooLexer.has(e)}save(){return{mooState:this.mooLexer.save()}}next(){let e=this.mooLexer.next();return this.skipToken(e)?this.next():e}transform({value:e}){return e}skipToken(e){return e?.type==="ws"}};var _i={};for(let t of dT){let{spokenForms:e}=wi.action[t];for(let r of e)_i[r]={type:"simpleActionName",value:t}}var e6=["replaceWithTarget","moveToTarget"];for(let t of e6){let{spokenForms:e}=wi.action[t];for(let r of e)_i[r]={type:"bringMove",value:t}}var t6=["before","after","to"];for(let t of t6){let e=pt[t==="to"?"sourceDestinationConnective":t];_i[e]={type:"insertionMode",value:t}}for(let t of Bo){let{spokenForms:e}=wi.simpleScopeTypeType[t];for(let r of e)_i[r]={type:"simpleScopeTypeType",value:t}}for(let t of xf){let{spokenForms:e}=wi.pairedDelimiter[t];for(let r of e)_i[r]={type:"pairedDelimiter",value:t}}for(let[t,e]of Object.entries(jf))e!=null&&(_i[e]={type:"simpleMarkType",value:t});var Ei=new Gf({ws:/[ \t]+/,placeholderTarget:{match:/<target\d*>/,value:t=>t.slice(7,-1)},token:{match:Object.keys(_i),type:t=>_i[t].type,value:t=>_i[t].value}});function RM(t,e){return{name:t,target:e}}function kM(t,e,r){return{name:t,source:e,destination:r}}function Kf(t,e){let r={type:"primitive"};return t!=null&&(r.modifiers=t),e!=null&&(r.mark=e),r}function MM(t,e){return{type:"primitive",insertionMode:t,target:e}}function PM(t){return{type:"containingScope",scopeType:t}}function AM(t){return{type:t}}function DM(t){return{type:"surroundingPair",delimiter:t}}function IM(t){return{type:t}}function FM(t){return{type:"target",target:{type:"placeholder",index:t.length===0?0:parseInt(t)-1}}}function FT(t){return t[0]}var r6={Lexer:Ei,ParserRules:[{name:"main",symbols:["action"],postprocess:FT},{name:"action",symbols:[Ei.has("simpleActionName")?{type:"simpleActionName"}:simpleActionName,"target"],postprocess:([t,e])=>RM(t,e)},{name:"action",symbols:[Ei.has("bringMove")?{type:"bringMove"}:bringMove,"target","destination"],postprocess:([t,e,r])=>kM(t,e,r)},{name:"destination",symbols:["primitiveDestination"],postprocess:FT},{name:"destination",symbols:[Ei.has("insertionMode")?{type:"insertionMode"}:insertionMode,"target"],postprocess:([t,e])=>MM(t,e)},{name:"target",symbols:["primitiveTarget"],postprocess:FT},{name:"primitiveTarget$ebnf$1",symbols:["modifier"]},{name:"primitiveTarget$ebnf$1",symbols:["primitiveTarget$ebnf$1","modifier"],postprocess:t=>t[0].concat([t[1]])},{name:"primitiveTarget",symbols:["primitiveTarget$ebnf$1"],postprocess:([t])=>Kf(t,void 0)},{name:"primitiveTarget",symbols:["mark"],postprocess:([t])=>Kf(void 0,t)},{name:"primitiveTarget$ebnf$2",symbols:["modifier"]},{name:"primitiveTarget$ebnf$2",symbols:["primitiveTarget$ebnf$2","modifier"],postprocess:t=>t[0].concat([t[1]])},{name:"primitiveTarget",symbols:["primitiveTarget$ebnf$2","mark"],postprocess:([t,e])=>Kf(t,e)},{name:"modifier",symbols:["containingScopeModifier"],postprocess:([t])=>t},{name:"containingScopeModifier",symbols:["scopeType"],postprocess:([t])=>PM(t)},{name:"scopeType",symbols:[Ei.has("simpleScopeTypeType")?{type:"simpleScopeTypeType"}:simpleScopeTypeType],postprocess:([t])=>AM(t)},{name:"scopeType",symbols:[Ei.has("pairedDelimiter")?{type:"pairedDelimiter"}:pairedDelimiter],postprocess:([t])=>DM(t)},{name:"mark",symbols:[Ei.has("simpleMarkType")?{type:"simpleMarkType"}:simpleMarkType],postprocess:([t])=>IM(t)},{name:"mark",symbols:[Ei.has("placeholderTarget")?{type:"placeholderTarget"}:placeholderTarget],postprocess:([t])=>FM(t)}],ParserStart:"main"},CM=r6;function n6(){return new Qf.Parser(Qf.Grammar.fromCompiled(CM))}function NM(t){let e=n6();if(e.feed(t),e.results.length!==1)throw new Error(`Expected exactly one result, got ${e.results.length}`);return e.results[0]}function Zf(t,e){let r=NM(t);return Hf(r,e)}function ol(t){switch(t.name){case"callAsFunction":return[t.callee,t.argument];case"replaceWithTarget":case"moveToTarget":return[t.source,...OM(t.destination)];case"swapTargets":return[t.target1,t.target2];case"pasteFromClipboard":case"insertSnippet":case"replace":case"editNew":return OM(t.destination);case"parsed":return ol(Zf(t.content,t.arguments));default:return[t.target]}}function OM(t){switch(t.type){case"list":return t.destinations.map(({target:e})=>e);case"primitive":return[t.target];case"implicit":return[]}}function NT(t){return t.flatMap(CT)}function CT(t){switch(t.type){case"primitive":return[t];case"list":return t.elements.flatMap(CT);case"range":return[t.anchor,t.active].flatMap(CT);case"implicit":return[]}}var i6={arrowFunction:"anonymousFunction",dictionary:"map",regex:"regularExpression"},o6={purple:"pink"};function a6(t){t.modifiers?.forEach(e=>{(e.type==="containingScope"||e.type==="everyScope")&&(e.scopeType.type=i6[e.scopeType.type]??e.scopeType.type)})}function s6(t){t.mark?.type==="decoratedSymbol"&&(t.mark.symbolColor=o6[t.mark.symbolColor]??t.mark.symbolColor)}function OT(t){NT(t).forEach(e=>{a6(e),s6(e)})}function LM(t){return{...t,version:1}}var c6={type:"primitive",mark:{type:"cursor"},selectionType:"token",position:"contents",modifier:{type:"identity"},insideOutsideType:"inside"},l6={type:"primitive",isImplicit:!0},UM=t=>xi(t,c6)?l6:t;function BM(t){let e=t.action;return{spokenForm:t.spokenForm,action:{name:e,args:t.extraArgs},targets:p6(t.targets,e),usePrePhraseSnapshot:t.usePrePhraseSnapshot??!1,version:2}}function u6(t){switch(t.type){case"identity":return[];case"containingScope":{let{includeSiblings:e,scopeType:r,type:n,...i}=t;return[{type:e?"everyScope":"containingScope",scopeType:{type:r},...i}]}case"surroundingPair":{let{delimiterInclusion:e,...r}=t,n={type:"containingScope",scopeType:r};return e==="interiorOnly"||e==="excludeInterior"?n.scopeType.delimiter==="any"?[{type:e}]:[{type:e},n]:[n]}case"subpiece":{let{type:e,pieceType:r,...n}=t;return[{type:"ordinalRange",scopeType:{type:r},...n}]}case"head":return[{type:"extendThroughStartOf"}];case"tail":return[{type:"extendThroughEndOf"}];default:return[t]}}function LT(t,e){let{type:r,isImplicit:n,mark:i,insideOutsideType:o,modifier:s,selectionType:l,position:u}=t,f=[];if(u&&u!=="contents"&&(u==="before"?o==="inside"?f.push({type:"position",position:"start"}):e==="remove"?f.push({type:"leading"}):f.push({type:"position",position:"before"}):o==="inside"?f.push({type:"position",position:"end"}):e==="remove"?f.push({type:"trailing"}):f.push({type:"position",position:"after"})),l)switch(l){case"token":if(s?.type==="subpiece")break;case"line":if(i?.type==="lineNumber")break;default:f.push({type:"containingScope",scopeType:{type:l}})}return s&&f.push(...u6(s)),{type:r,isImplicit:n,modifiers:f.length>0?f:void 0,mark:i?.type==="cursorToken"?void 0:i}}function VM(t,e){switch(t.type){case"list":return{...t,elements:t.elements.map(r=>VM(r,e))};case"range":{let{type:r,rangeType:n,start:i,end:o,excludeStart:s,excludeEnd:l}=t;return{type:r,rangeType:n,anchor:LT(i,e),active:LT(o,e),excludeAnchor:s??!1,excludeActive:l??!1}}case"primitive":return LT(t,e)}}function p6(t,e){return t.map(r=>VM(r,e)).map(r=>r.type==="primitive"?UM(r):r)}function WM(t){return{...t,version:3,targets:t.targets.map(HM)}}function HM(t){switch(t.type){case"list":return{...t,elements:t.elements.map(e=>HM(e))};case"range":{let{anchor:e,active:r,...n}=t;return{anchor:UT(e),active:UT(r),...n}}case"primitive":return UT(t)}}function UT(t){let e=t.modifiers!=null?t.modifiers.map(d6):void 0;if(t.mark?.type==="lineNumber"){let{anchor:r,active:n}=t.mark;if(r.type!==n.type||r.lineNumber<0!=n.lineNumber<0)return{type:"range",anchor:{type:"primitive",mark:sl(r),modifiers:e},active:{type:"primitive",mark:sl(n)},excludeAnchor:!1,excludeActive:!1}}return{...t,mark:t.mark!=null?f6(t.mark):void 0,modifiers:e}}function f6(t){switch(t.type){case"lineNumber":return m6(t);default:return t}}function d6(t){switch(t.type){case"ordinalRange":return h6(t);default:return t}}function m6(t){return xi(t.anchor,t.active)?sl(t.anchor):{type:"range",anchor:sl(t.anchor),active:sl(t.active)}}function h6(t){return t.anchor===t.active?al(t.scopeType,t.anchor):t.anchor===0&&t.active>t.anchor?al(t.scopeType,t.anchor,t.active-t.anchor+1):t.anchor<0&&t.active===-1?al(t.scopeType,t.anchor,-t.anchor):{type:"range",anchor:al(t.scopeType,t.anchor),active:al(t.scopeType,t.active),excludeAnchor:t.excludeAnchor,excludeActive:t.excludeActive}}function sl(t){return{type:"lineNumber",lineNumberType:t.type,lineNumber:t.lineNumber}}function al(t,e,r=1){return{type:"ordinalScope",scopeType:t,start:e,length:r}}function jM(t){return{...t,version:4,targets:t.targets.map(qM)}}function qM(t){switch(t.type){case"primitive":return $M(t);case"range":{let{anchor:e,...r}=t;return{...r,anchor:$M(e)}}case"list":{let{elements:e,...r}=t;return{...r,elements:e.map(qM)}}}}function $M(t){return t.mark==null&&t.modifiers==null||t.isImplicit?{type:"implicit"}:t}function zM(t){return{...t,version:5,action:g6(t.action),targets:t.targets.map(Yf)}}function g6(t){switch(t.name){case"wrapWithSnippet":{let[e,r]=y6(t.args[0]);return{name:"wrapWithSnippet",args:[{type:"named",name:e,variableName:r}]}}case"insertSnippet":{let[e,r]=t.args,n={type:"named",name:e};return r!=null&&(n.substitutions=r),{name:"insertSnippet",args:[n]}}default:return t}}function y6(t){let[e,r]=t.split(".");if(e==null||r==null)throw new Error("Snippet location missing '.'");return[e,r]}function Yf(t){switch(t.type){case"implicit":return t;case"list":return{...t,elements:t.elements.map(Yf)};case"range":return{...t,anchor:Yf(t.anchor),active:Yf(t.active)};case"primitive":return{...t,mark:t.mark!=null?BT(t.mark):void 0,modifiers:t.modifiers!=null&&t.modifiers.length>0?t.modifiers.map(VT):void 0}}}function BT(t){return t.type==="range"?{...t,anchor:BT(t.anchor),active:BT(t.active),excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1}:t}function VT(t){return t.type==="range"?{...t,anchor:VT(t.anchor),active:VT(t.active),excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1}:t}var x6={bring:"replaceWithTarget",call:"callAsFunction",clear:"clearAndSetSelection",commentLines:"toggleLineComment",copy:"copyToClipboard",cut:"cutToClipboard",delete:"remove",editNewLineAbove:"editNewLineBefore",editNewLineBelow:"editNewLineAfter",findInFiles:"findInWorkspace",fold:"foldRegion",indentLines:"indentLine",insertEmptyLineAbove:"insertEmptyLineBefore",insertEmptyLineBelow:"insertEmptyLineAfter",insertLineAfter:"editNewLineAfter",insertLineBefore:"editNewLineBefore",move:"moveToTarget",outdentLines:"outdentLine",paste:"pasteFromClipboard",reverse:"reverseTargets",setBreakpoint:"toggleLineBreakpoint",sort:"sortTargets",swap:"swapTargets",unfold:"unfoldRegion",use:"replaceWithTarget",wrap:"wrapWithPairedDelimiter"};function WT(t){let e=x6[t]??t;if(!Dk.includes(e))throw new Error(`Unknown action name: ${e}`);return e}function GM(t){return{version:6,spokenForm:t.spokenForm,usePrePhraseSnapshot:t.usePrePhraseSnapshot,action:T6(t.action,t.targets)}}function T6(t,e){let r=WT(t.name);switch(r){case"replaceWithTarget":case"moveToTarget":return{name:r,source:nn(e[0]),destination:cl(e[1])};case"swapTargets":return{name:r,target1:nn(e[0]),target2:nn(e[1])};case"callAsFunction":return{name:r,callee:nn(e[0]),argument:nn(e[1])};case"pasteFromClipboard":return{name:r,destination:cl(e[0])};case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return{name:r,left:t.args[0],right:t.args[1],target:nn(e[0])};case"generateSnippet":return{name:r,snippetName:t.args?.[0],target:nn(e[0])};case"insertSnippet":return{name:r,snippetDescription:t.args[0],destination:cl(e[0])};case"wrapWithSnippet":return{name:r,snippetDescription:t.args[0],target:nn(e[0])};case"executeCommand":return{name:r,commandId:t.args[0],options:t.args?.[1],target:nn(e[0])};case"replace":return{name:r,replaceWith:t.args[0],destination:cl(e[0])};case"highlight":{let n={name:r,target:nn(e[0])};return t.args?.[0]!=null&&(n.highlightId=t.args?.[0]),n}case"editNew":return{name:r,destination:cl(e[0])};case"getText":return{name:r,options:t.args?.[0],target:nn(e[0])};case"parsed":throw Error("Parsed action should not be present in V5");default:return{name:r,target:nn(e[0])}}}function nn(t){switch(t.type){case"list":case"range":case"primitive":return S6(t);case"implicit":return t}}function S6(t){switch(t.type){case"list":return v6(t);case"range":case"primitive":return Xf(t)}}function v6(t){return{...t,elements:t.elements.map(Xf)}}function Xf(t){switch(t.type){case"range":return KM(t);case"primitive":return Jf(t)}}function KM(t){let{anchor:e,active:r}=t,n={type:"range",anchor:e.type==="implicit"?e:Jf(e),active:Jf(r),excludeAnchor:t.excludeAnchor,excludeActive:t.excludeActive};return t.rangeType!=null&&(n.rangeType=t.rangeType),n}function Jf(t){let e={type:"primitive"},r=k6(t.modifiers);return r!=null&&(e.modifiers=r),t.mark!=null&&(e.mark=t.mark),e}function cl(t){switch(t.type){case"list":return b6(t);case"range":return w6(t);case"primitive":return _6(t);case"implicit":return E6()}}function b6(t){let e=[],r=[],n,i=()=>{r.length>0&&e.push({type:"primitive",insertionMode:n??"to",target:r.length===1?r[0]:{type:"list",elements:r}})};return t.elements.forEach(o=>{let s=ed(o);s!=null?(i(),r=[Xf(o)],n=s):r.push(Xf(o))}),i(),e.length>1?{type:"list",destinations:e}:e[0]}function w6(t){return{type:"primitive",insertionMode:ed(t.anchor)??"to",target:KM(t)}}function _6(t){return{type:"primitive",insertionMode:ed(t)??"to",target:Jf(t)}}function E6(){return{type:"implicit"}}function ed(t){switch(t.type){case"implicit":return"to";case"primitive":return R6(t);case"range":return ed(t.anchor)}}function R6(t){let e=t.modifiers?.find(r=>r.type==="position");if(e!=null){if(t.modifiers.indexOf(e)!==0)throw Error("Position modifier has to be at first index");if(e?.position==="before"||e?.position==="after")return e.position}}function k6(t){let e=[];if(t!=null)for(let r of t)r.type==="position"?r.position==="start"?e.push({type:"startOf"}):r.position==="end"&&e.push({type:"endOf"}):e.push(r);return e.length>0?e:void 0}function QM(t){return{...t,version:7}}function $T(t){let e=M6(t,7),{action:r,usePrePhraseSnapshot:n=!1,spokenForm:i}=e;return{version:7,spokenForm:i,action:kf(r,o=>{let s=ol(o);OT(s),r.name}),usePrePhraseSnapshot:n}}function M6(t,e){if(t.version>7)throw new Tp;for(;t.version<e;)switch(t.version){case 0:t=LM(t);break;case 1:t=BM(t);break;case 2:t=WM(t);break;case 3:t=jM(t);break;case 4:t=zM(t);break;case 5:t=GM(t);break;case 6:t=QM(t);break;default:throw new Error(`Can't upgrade from unknown version ${t.version}`)}return t}var jT;function td(t){jT=t}function I(){if(jT==null)throw Error("Tried to access ide before it was injected");return jT}var rd=class{constructor(e){this.maxLength=e;this.stack=[];this.index=void 0}push(e){this.index!=null?this.stack.splice(this.index+1,this.stack.length-this.index-1,e):this.stack.push(e),this.stack.length>this.maxLength&&this.stack.shift(),this.index=this.stack.length-1}undo(){if(this.index!=null&&this.index>0)return this.index--,this.stack[this.index]}redo(){if(this.index!=null&&this.index<this.stack.length-1)return this.index++,this.stack[this.index]}};var P6=25,nd=class{constructor(){this.targetMap=new Map;this.targetHistory=new no(()=>new rd(P6));this.notifier=new Vt}set(e,r,{history:n=!1}={}){this.targetMap.set(e,r),n&&r!=null&&this.targetHistory.get(e).push(r),this.notifier.notifyListeners(e,r)}get(e){return this.targetMap.get(e)}undo(e){let r=this.targetHistory.get(e).undo();r!=null&&this.set(e,r,{history:!1})}redo(e){let r=this.targetHistory.get(e).redo();r!=null&&this.set(e,r,{history:!1})}onStoredTargets(e){for(let r of rs)e(r,this.get(r));return this.notifier.registerListener(e)}};function us(t,e){return new H(new se(e.start.line,0),t.document.lineAt(e.end).range.end)}function qT(t,e){return e.isEmpty?0:t.document.offsetAt(e.end)-t.document.offsetAt(e.start)}function ZM(t,e){let[r,n]=e instanceof se?[e,e]:[e.start,e.end];return t.start.isBefore(r)&&t.end.isAfter(n)}function qo(t,...e){for(let r of e)r!=null&&(t=t.union(r));return t}var id=class t{constructor(e,r,n){this.target=e;this.insertionMode=r;this.contentRange=D6(e.contentRange,r),this.isBefore=r==="before",this.isLineDelimiter=e.insertionDelimiter.includes(`
`),this.indentationString=n??this.isLineDelimiter?A6(e.editor,e.contentRange):"",this.insertionPrefix=e.prefixRange!=null?e.editor.document.getText(e.prefixRange):void 0}get contentSelection(){return this.contentRange.toSelection(this.target.isReversed)}get editor(){return this.target.editor}get insertionDelimiter(){return this.target.insertionDelimiter}get isRaw(){return this.target.isRaw}withTarget(e){return new t(e,this.insertionMode,this.indentationString)}getEditNewActionType(){return this.insertionMode==="after"&&this.target.contentRange.isSingleLine&&this.insertionDelimiter===`
`&&this.insertionPrefix==null?"insertLineAfter":"edit"}constructChangeEdit(e){return this.insertionMode==="before"||this.insertionMode==="after"?this.constructEditWithDelimiters(e):this.constructEditWithoutDelimiters(e)}constructEditWithDelimiters(e){let r=this.getEditRange(),n=this.getEditText(e),i=o=>this.updateRange(o,e);return{range:r,text:n,isReplace:this.insertionMode==="after",updateRange:i}}constructEditWithoutDelimiters(e){return{range:this.contentRange,text:e,updateRange:r=>r}}getEditRange(){let e=(()=>{let r=this.isBefore?qo(this.target.contentRange,this.target.prefixRange).start:this.target.contentRange.end;if(this.isLineDelimiter){let n=this.editor.document.lineAt(r),i=this.isBefore?n.firstNonWhitespaceCharacterIndex:n.lastNonWhitespaceCharacterIndex;if(r.character===i)return this.isBefore?n.range.start:n.range.end}return r})();return new H(e,e)}getEditText(e){let r=this.indentationString+(this.insertionPrefix??"")+e;return this.isBefore?r+this.insertionDelimiter:this.insertionDelimiter+r}updateRange(e,r){let n=this.editor.document.offsetAt(e.start)+this.indentationString.length+(this.insertionPrefix?.length??0),i=this.isBefore?n:n+this.getLengthOfInsertionDelimiter(),o=i+r.length;return new H(this.editor.document.positionAt(i),this.editor.document.positionAt(o))}getLengthOfInsertionDelimiter(){if(this.editor.document.eol==="CRLF"){let e=this.insertionDelimiter.match(/\n/g);if(e!=null)return this.insertionDelimiter.length+e.length}return this.insertionDelimiter.length}};function A6(t,e){let r=Number.MAX_SAFE_INTEGER,n="";for(let i=e.start.line;i<=e.end.line;++i){let o=t.document.lineAt(i);o.range.isEmpty||o.isEmptyOrWhitespace&&!e.isSingleLine||o.firstNonWhitespaceCharacterIndex<r&&(r=o.firstNonWhitespaceCharacterIndex,n=o.text.slice(0,r))}return n}function D6(t,e){switch(e){case"before":return t.start.toEmptyRange();case"after":return t.end.toEmptyRange();case"to":return t}}function oo(t,e,r,n){return ll(t.contentRange,e.contentRange,r,n)}function ll(t,e,r,n){return new H(r?t.start:t.end,n?e.end:e.start)}function ps(t,e,r,n){let i=r?t.contentRange.start:new se(t.contentRange.end.line+1,0),o=n?e.contentRange.end:e.editor.document.lineAt(e.contentRange.start.line-1).range.end;return new H(i,o)}var We=class t{constructor(e){this.isLine=!1;this.isToken=!0;this.hasExplicitScopeType=!0;this.hasExplicitRange=!0;this.isRaw=!1;this.isImplicit=!1;this.isNotebookCell=!1;this.isWord=!1;this.state={editor:e.editor,isReversed:e.isReversed,contentRange:e.contentRange,thatTarget:e.thatTarget}}get editor(){return this.state.editor}get isReversed(){return this.state.isReversed}get thatTarget(){return this.state.thatTarget!=null?this.state.thatTarget.thatTarget:this}get contentText(){return this.editor.document.getText(this.contentRange)}get contentSelection(){return this.contentRange.toSelection(this.isReversed)}get contentRange(){return this.state.contentRange}constructRemovalEdit(){return{range:this.getRemovalRange(),text:"",updateRange:e=>e}}getRemovalHighlightRange(){return this.getRemovalRange()}withThatTarget(e){return this.cloneWith({thatTarget:e})}withContentRange(e){return this.cloneWith({contentRange:e})}getInterior(){}getBoundary(){}cloneWith(e){let r=Object.getPrototypeOf(this).constructor;return new r({...this.getCloneParameters(),...e})}maybeCreateRichRangeTarget(e,r){let{constructor:n}=Object.getPrototypeOf(this);return new n({...this.getCloneParameters(),isReversed:e,contentRange:oo(this,r,!0,!0)})}isEqual(e){return e instanceof t&&xi(this.getEqualityParameters(),e.getEqualityParameters())}getEqualityParameters(){let{thatTarget:e,...r}=this.getCloneParameters();return{...r}}toDestination(e){return new id(this,e)}toPlainObject(){return{type:this.type,contentRange:$c(this.contentRange),isReversed:this.isReversed,hasExplicitRange:this.hasExplicitRange}}};function od(t,e){return I6(t,e.start,e.end)}function I6(t,e,r){return{editor:t.editor,selection:F6(t.selection,e,r)}}function F6(t,e,r){return t.isReversed?new Te(r,e):new Te(e,r)}function ad(t,e){let{document:r}=t,n=r.getText(e),i=n.length-n.trimStart().length,o=n.length-n.trimEnd().length,s=r.offsetAt(e.start)+i,l=r.offsetAt(e.end)-o,u=r.positionAt(s),f=r.positionAt(l);return new H(u,f)}function sd(t,e,r,n){return r==null?void 0:new t({editor:e,isReversed:n,contentRange:r})}var Ue=class extends We{constructor(r){super(r);this.type="PlainTarget";this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.isToken=r.isToken??!0,this.insertionDelimiter=r.insertionDelimiter??""}getCloneParameters(){return{...this.state,isToken:this.isToken,insertionDelimiter:this.insertionDelimiter}}};function fs(t,e,r){return sd(Ue,t,e,r)}var cd=class extends We{constructor(r){super(r);this.type="DocumentTarget";this.insertionDelimiter=`
`;this.isLine=!0}getLeadingDelimiterTarget(){}getTrailingDelimiterTarget(){}getRemovalRange(){return this.contentRange}getInterior(){return[new Ue({editor:this.editor,isReversed:this.isReversed,contentRange:ad(this.editor,this.contentRange)})]}getCloneParameters(){return this.state}};var Rn=class t extends We{constructor(){super(...arguments);this.type="LineTarget";this.insertionDelimiter=`
`;this.isLine=!0;this.getRemovalHighlightRange=()=>this.fullLineContentRange}get fullLineContentRange(){return us(this.editor,this.contentRange)}getLeadingDelimiterTarget(){return fs(this.editor,C6(this.editor,this.fullLineContentRange),this.isReversed)}getTrailingDelimiterTarget(){return fs(this.editor,N6(this.editor,this.fullLineContentRange),this.isReversed)}getRemovalRange(){let r=this.fullLineContentRange,n=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return n==null?r:r.union(n.contentRange)}maybeCreateRichRangeTarget(r,n){return new t({editor:this.editor,isReversed:r,contentRange:ps(this,n,!0,!0)})}getCloneParameters(){return this.state}};function C6(t,e){let{start:r}=e;return r.line>0?new H(t.document.lineAt(r.line-1).range.end,e.start):void 0}function N6(t,e){let{end:r}=e;return r.line+1<t.document.lineCount?new H(e.end,new se(r.line+1,0)):void 0}function zT(t,e,r){return sd(Rn,t,e,r)}var ld=class t{constructor(e,r){this.target=e;this.insertionMode=r}get editor(){return this.target.editor}get contentRange(){return this.target.contentRange}get contentSelection(){return this.target.contentSelection}get insertionDelimiter(){return this.target.insertionDelimiter}get isRaw(){return this.target.isRaw}withTarget(e){return new t(e,this.insertionMode)}getEditNewActionType(){throw new Error("Method not implemented.")}constructChangeEdit(e){throw new Error("Method not implemented.")}};var ud=class extends We{constructor(r){super(r);this.type="NotebookCellTarget";this.insertionDelimiter=`
`;this.isNotebookCell=!0;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange}getCloneParameters(){return this.state}toDestination(r){return new ld(this,r)}};var pd=class t extends We{constructor(){super(...arguments);this.type="ParagraphTarget";this.insertionDelimiter=`

`;this.isLine=!0}getLeadingDelimiterTarget(){return zT(this.editor,O6(this.editor,this.fullLineContentRange),this.isReversed)}getTrailingDelimiterTarget(){return zT(this.editor,L6(this.editor,this.fullLineContentRange),this.isReversed)}getRemovalRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget(),n=r!=null?this.contentRange.union(r.contentRange):this.contentRange;return new Rn({contentRange:n,editor:this.editor,isReversed:this.isReversed}).getRemovalRange()}get fullLineContentRange(){return us(this.editor,this.contentRange)}getRemovalHighlightRange(){let r=this.getTrailingDelimiterTarget()??this.getLeadingDelimiterTarget();return r!=null?this.fullLineContentRange.union(r.contentRange):this.fullLineContentRange}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,contentRange:ps(this,n,!0,!0)})}getCloneParameters(){return this.state}};function O6(t,e){let{document:r}=t,n=r.lineAt(e.start),i=U6(r,n);if(i!=null)return i.lineNumber+1===n.lineNumber?void 0:new H(new se(i.lineNumber+1,0),r.lineAt(n.lineNumber-1).range.end);if(n.lineNumber>0)return new H(new se(0,0),r.lineAt(n.lineNumber-1).range.end)}function L6(t,e){let{document:r}=t,n=r.lineAt(e.end),i=B6(r,n);if(i!=null)return i.lineNumber-1===n.lineNumber?void 0:new H(new se(n.lineNumber+1,0),r.lineAt(i.lineNumber-1).range.end);if(n.lineNumber<r.lineCount-1)return new H(new se(n.lineNumber+1,0),r.lineAt(r.lineCount-1).range.end)}function U6(t,e){for(;e.lineNumber>0;){let r=t.lineAt(e.lineNumber-1);if(!r.isEmptyOrWhitespace)return r;e=r}return null}function B6(t,e){for(;e.lineNumber+1<t.lineCount;){let r=t.lineAt(e.lineNumber+1);if(!r.isEmptyOrWhitespace)return r;e=r}return null}var ao=class extends We{constructor(){super(...arguments);this.type="RawSelectionTarget";this.insertionDelimiter="";this.isRaw=!0;this.isToken=!1;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.getCloneParameters=()=>this.state}};var ds=class t extends We{constructor(r){super({...r,contentRange:ad(r.editor,r.fullInteriorRange)});this.type="InteriorTarget";this.insertionDelimiter=" ";this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.fullInteriorRange;this.fullInteriorRange=r.fullInteriorRange}getCloneParameters(){return{...this.state,fullInteriorRange:this.fullInteriorRange}}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,fullInteriorRange:ll(this.fullInteriorRange,n.fullInteriorRange,!0,!0)})}};function fd(t){let e=qo(t.contentRange,t.prefixRange),r=t.getTrailingDelimiterTarget()??t.getLeadingDelimiterTarget();return r!=null?e.union(r.contentRange):e}var V6=['"',"'","(","[","{","<"],W6=['"',"'",")","]","}",">",",",";",":"];function $n(t){let{editor:e}=t,{start:r}=qo(t.contentRange,t.prefixRange),o=e.document.lineAt(r).text.slice(0,r.character).match(/\s+$/);return o==null?void 0:new Ue({contentRange:new H(r.line,r.character-o[0].length,r.line,r.character),editor:e,isReversed:t.isReversed})}function jn(t){let{editor:e}=t,{end:r}=t.contentRange,o=e.document.lineAt(r).text.slice(r.character).match(/^\s+/);return o==null?void 0:new Ue({contentRange:new H(r.line,r.character,r.line,r.character+o[0].length),editor:e,isReversed:t.isReversed})}function qn(t){let{editor:e}=t,r=qo(t.contentRange,t.prefixRange),{start:n,end:i}=r,o=t.getLeadingDelimiterTarget()?.contentRange??n.toEmptyRange(),s=t.getTrailingDelimiterTarget()?.contentRange??i.toEmptyRange(),l=us(e,r);return o.union(s).isRangeEqual(l)?l:!s.isEmpty&&(!o.isEmpty||r.start.isEqual(l.start)||V6.includes(H6(e,r)))?r.union(s):!o.isEmpty&&(r.end.isEqual(l.end)||W6.includes($6(e,r)))?r.union(o):r}function H6(t,e){let{start:r}=e,n=t.document.lineAt(r);return r.isAfter(n.range.start)?t.document.getText(new H(r.translate(void 0,-1),r)):""}function $6(t,e){let{end:r}=e,n=t.document.lineAt(r);return r.isBefore(n.range.end)?t.document.getText(new H(r.translate(void 0,1),r)):""}var so=class t extends We{constructor(r){super(r);this.type="ScopeTypeTarget";this.scopeTypeType_=r.scopeTypeType,this.removalRange_=r.removalRange,this.interiorRange_=r.interiorRange,this.leadingDelimiterRange_=r.leadingDelimiterRange,this.trailingDelimiterRange_=r.trailingDelimiterRange,this.prefixRange=r.prefixRange,this.insertionDelimiter=r.insertionDelimiter??j6(r.scopeTypeType),this.hasDelimiterRange_=!!this.leadingDelimiterRange_||!!this.trailingDelimiterRange_}getLeadingDelimiterTarget(){if(this.leadingDelimiterRange_!=null)return new Ue({editor:this.editor,isReversed:this.isReversed,contentRange:this.leadingDelimiterRange_});if(!this.hasDelimiterRange_)return $n(this)}getTrailingDelimiterTarget(){if(this.trailingDelimiterRange_!=null)return new Ue({editor:this.editor,isReversed:this.isReversed,contentRange:this.trailingDelimiterRange_});if(!this.hasDelimiterRange_)return jn(this)}getInterior(){return this.interiorRange_==null?super.getInterior():[new ds({editor:this.editor,isReversed:this.isReversed,fullInteriorRange:this.interiorRange_})]}getRemovalRange(){return this.removalRange_!=null?this.removalRange_:this.hasDelimiterRange_?fd(this):qn(this)}maybeCreateRichRangeTarget(r,n){if(this.scopeTypeType_!==n.scopeTypeType_)return null;let i=this.removalRange_!=null||n.removalRange_!=null?ll(this.removalRange_??this.contentRange,n.removalRange_??n.contentRange,!0,!0):void 0;return new t({...this.getCloneParameters(),isReversed:r,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:n.trailingDelimiterRange_,removalRange:i,contentRange:oo(this,n,!0,!0)})}getCloneParameters(){return{...this.state,insertionDelimiter:this.insertionDelimiter,prefixRange:this.prefixRange,removalRange:void 0,interiorRange:void 0,scopeTypeType:this.scopeTypeType_,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:this.trailingDelimiterRange_}}};function j6(t){switch(t){case"class":case"namedFunction":case"section":case"sectionLevelOne":case"sectionLevelTwo":case"sectionLevelThree":case"sectionLevelFour":case"sectionLevelFive":case"sectionLevelSix":case"part":case"chapter":case"subSection":case"subSubSection":case"namedParagraph":case"subParagraph":return`

`;case"anonymousFunction":case"statement":case"ifStatement":case"comment":case"xmlElement":case"collectionItem":case"branch":case"environment":return`
`;default:return" "}}var dd=class t extends We{constructor(r){super(r);this.type="SubTokenWordTarget";this.isToken=!1;this.isWord=!0;this.leadingDelimiterRange_=r.leadingDelimiterRange,this.trailingDelimiterRange_=r.trailingDelimiterRange,this.insertionDelimiter=r.insertionDelimiter}getLeadingDelimiterTarget(){return fs(this.editor,this.leadingDelimiterRange_,this.isReversed)}getTrailingDelimiterTarget(){return fs(this.editor,this.trailingDelimiterRange_,this.isReversed)}getRemovalRange(){return fd(this)}maybeCreateRichRangeTarget(r,n){return new t({...this.getCloneParameters(),isReversed:r,contentRange:oo(this,n,!0,!0),trailingDelimiterRange:n.trailingDelimiterRange_})}getCloneParameters(){return{...this.state,leadingDelimiterRange:this.leadingDelimiterRange_,trailingDelimiterRange:this.trailingDelimiterRange_,insertionDelimiter:this.insertionDelimiter}}};var xr=class extends We{constructor(){super(...arguments);this.type="TokenTarget";this.insertionDelimiter=" "}getLeadingDelimiterTarget(){return $n(this)}getTrailingDelimiterTarget(){return jn(this)}getRemovalRange(){return qn(this)}getCloneParameters(){return this.state}};var md=class extends We{constructor(r){super(r);this.type="SurroundingPairTarget";this.insertionDelimiter=" ";this.boundary_=r.boundary,this.interiorRange_=r.interiorRange}getLeadingDelimiterTarget(){return $n(this)}getTrailingDelimiterTarget(){return jn(this)}getRemovalRange(){return qn(this)}getInterior(){return[new ds({editor:this.editor,isReversed:this.isReversed,fullInteriorRange:this.interiorRange_})]}getBoundary(){return this.boundary_.map(r=>new xr({editor:this.editor,isReversed:this.isReversed,contentRange:r}))}getCloneParameters(){return{...this.state,interiorRange:this.interiorRange_,boundary:this.boundary_}}};var Et=class extends We{constructor(r){super(r);this.type="UntypedTarget";this.insertionDelimiter=" ";this.hasExplicitScopeType=!1;this.hasExplicitRange=r.hasExplicitRange,this.isToken=r.isToken??!0}getLeadingDelimiterTarget(){return $n(this)}getTrailingDelimiterTarget(){return jn(this)}getRemovalRange(){return this.editor.document.getText(this.contentRange).trim().length===0?this.contentRange:qn(this)}maybeCreateRichRangeTarget(){return null}getCloneParameters(){return{...this.state,isToken:this.isToken,hasExplicitRange:this.hasExplicitRange}}};var hd=class extends We{constructor(){super(...arguments);this.type="ImplicitTarget";this.insertionDelimiter="";this.isRaw=!0;this.hasExplicitScopeType=!1;this.isImplicit=!0;this.isToken=!1;this.getLeadingDelimiterTarget=()=>{};this.getTrailingDelimiterTarget=()=>{};this.getRemovalRange=()=>this.contentRange;this.getCloneParameters=()=>this.state}};var gd=class extends We{constructor(r){let{inputTarget:n,modifiedTarget:i,isHead:o}=r;super({...r,contentRange:YM(n.contentRange,i.contentRange,o)});this.type="HeadTailTarget";this.insertionDelimiter=" ";this.inputTarget=n,this.modifiedTarget=i,this.isHead=o}getLeadingDelimiterTarget(){return $n(this)}getTrailingDelimiterTarget(){return jn(this)}getRemovalRange(){return qn(this)}getInterior(){let r=this.modifiedTarget.getInterior();if(r!=null)return r.map(n=>new Ue({editor:this.editor,contentRange:YM(this.inputTarget.contentRange,n.contentRange,this.isHead),isReversed:this.isReversed}))}getCloneParameters(){return{...this.state,inputTarget:this.inputTarget,modifiedTarget:this.modifiedTarget,isHead:this.isHead}}};function YM(t,e,r){return r?new H(e.start,t.end):new H(t.start,e.end)}function yd(t){return t.activeTextEditor?.selections.map(e=>({selection:e,editor:t.activeTextEditor}))??[]}var ms=class{run(){return yd(I()).map(e=>new Et({editor:e.editor,isReversed:e.selection.isReversed,contentRange:e.selection,hasExplicitRange:!e.selection.isEmpty,isToken:!1}))}};var zn=class{constructor(e,r){this.debouncer=new yp(r,e.getOwnConfiguration("decorationDebounceDelayMs")),this.run=this.run.bind(this)}run(){this.debouncer.run()}dispose(){this.debouncer.dispose()}};var xd=class{constructor(e,r){this.ide=e;this.storedTargets=r;this.disposables=[];this.debouncer=new zn(e.configuration,()=>this.updateKeyboardTarget()),this.disposables.push(e.configuration.onDidChangeConfiguration(()=>this.maybeActivate()),this.debouncer),this.maybeActivate()}maybeActivate(){if(this.ide.configuration.getOwnConfiguration("experimental.keyboardTargetFollowsSelection")){this.selectionWatcherDisposable==null&&(this.selectionWatcherDisposable=this.ide.onDidChangeTextEditorSelection(this.debouncer.run));return}this.selectionWatcherDisposable!=null&&(this.selectionWatcherDisposable.dispose(),this.selectionWatcherDisposable=void 0)}updateKeyboardTarget(){this.ide.activeTextEditor==null||this.storedTargets.get("keyboard")==null||this.storedTargets.set("keyboard",new ms().run())}dispose(){this.disposables.forEach(e=>e.dispose()),this.selectionWatcherDisposable?.dispose()}};var Td=class{constructor(e){this.ide=e;switch(e.disposeOnExit(this),this.evaluateSetting=this.evaluateSetting.bind(this),this.active=!0,e.runMode){case"development":this.enableDebugLog();break;case"test":this.disableDebugLog();break;case"production":this.evaluateSetting(),this.disposableConfiguration=e.configuration.onDidChangeConfiguration(this.evaluateSetting);break}}log(...e){this.active&&console.log(...e)}dispose(){this.disposableConfiguration&&this.disposableConfiguration.dispose()}enableDebugLog(){this.active=!0}disableDebugLog(){this.active=!1}evaluateSetting(){this.ide.configuration.getOwnConfiguration("debug")?this.enableDebugLog():this.disableDebugLog()}};var q6=["!","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_","`","{","|","}","~","\xA3",'"'],z6=q6.map(Cr).join("|"),G6=["[a-zA-Z0-9]",z6].join("|"),K6=new RegExp(`^(${G6})$`,"u"),Q6="[unk]",Z6=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}]/gu,Sd=class{constructor(){this.disposables=[];this.algorithmChangeNotifier=new Vt;this.getTokenGraphemes=e=>en(e,Z6,r=>({text:this.normalizeGrapheme(r[0]),tokenStartOffset:r.index,tokenEndOffset:r.index+r[0].length}));this.registerAlgorithmChangeListener=this.algorithmChangeNotifier.registerListener;I().disposeOnExit(this),this.updateTokenHatSplittingMode=this.updateTokenHatSplittingMode.bind(this),this.getTokenGraphemes=this.getTokenGraphemes.bind(this),this.updateTokenHatSplittingMode(),this.disposables.push(I().configuration.onDidChangeConfiguration(this.updateTokenHatSplittingMode))}updateTokenHatSplittingMode(){let{lettersToPreserve:e,symbolsToPreserve:r,...n}=I().configuration.getOwnConfiguration("tokenHatSplittingMode");this.tokenHatSplittingMode={lettersToPreserve:e.map(i=>i.toLowerCase().normalize("NFC")),symbolsToPreserve:r.map(i=>i.normalize("NFC")),...n},this.algorithmChangeNotifier.notifyListeners()}normalizeGrapheme(e){let{preserveCase:r,lettersToPreserve:n,symbolsToPreserve:i}=this.tokenHatSplittingMode,o=e.normalize("NFC");return i.includes(o)||(r||(o=o.toLowerCase()),n.includes(o.toLowerCase()))||(o=Fx(o),K6.test(o)||(o=Q6)),o}dispose(){this.disposables.forEach(({dispose:e})=>e())}};function hs(){return GT==null&&(GT=new Sd),GT}var GT;var XM=({penalty:t})=>-t;function JM(t){return({grapheme:{text:e},style:r})=>{let n=t.get({grapheme:e,hatStyle:r});return n==null?1/0:-n}}function eP(t,e){let r=Ac(n=>Wx(e[n].filter(i=>i>t))??1/0);return({grapheme:{text:n}})=>r(n)}function tP(t){return e=>e.grapheme.text===t?.grapheme&&e.style===t?.hatStyle?1:0}function rP(t){switch(t){case"greedy":return({penalty:e})=>-e;case"balanced":return({penalty:e})=>-(e<2?0:1);case"stable":return e=>0}}function nP(t,e){if(t.length===0)return;let r=t;for(let n of e){if(r.length===1)return r[0];r=Y6(r,n)}return r[0]}function Y6(t,e){let r=-1/0,n=[];for(let i of t){let o=e(i);o<r||(o>r&&(r=o,n.length=0),n.push(i))}return n}function iP({hatOldTokenRanks:t,graphemeTokenRanks:e},r,n,i,o){return nP(o,[rP(r),tP(i),JM(t),XM,eP(n,e)])}function oP(t,e,r){let n={},i=new ro(({grapheme:o,hatStyle:s})=>[o,s]);return t.forEach(({token:o,rank:s})=>{let l=e.get(o);l!=null&&i.set(l,s),r.getTokenGraphemes(o.text).forEach(({text:u})=>{let f;u in n?f=n[u]:(f=[],n[u]=f),f.push(s)})}),{hatOldTokenRanks:i,graphemeTokenRanks:n}}function aP(t,e=[]){return new Map(Ux(rt,Ti)(Dc([e],t.visibleRanges.map(r=>Hx(r.start.line,r.end.line+1)))).sort((r,n)=>r-n).map((r,n)=>[r,n]))}function sP(t,e){return(r,n)=>{let i=Math.abs(r.displayLine-t),o=Math.abs(n.displayLine-t);if(i<o)return-1;if(i>o)return 1;let s=Math.abs(r.range.start.character-e),l=Math.abs(n.range.start.character-e);return s-l}}var X6=["-","+","*","/","=","<",">","_","#",".","|","&",":"],J6=["!==","!=","+=","-=","*=","/=","%=","<=",">=","=>","->","??",'"""',"```","/*","*/","<!--","-->"],e5=["\\p{L}","\\p{M}","\\p{N}"],t5="[^\\s\\w]",r5="(?<![.\\d])\\d+\\.\\d+(?![.\\d])";function n5(t){let{fixedTokens:e,repeatableSymbols:r,identifierWordRegexes:n,identifierWordDelimiters:i,numbersRegex:o,singleSymbolsRegex:s}=t,l=r.map(Cr).map(x=>`${x}+`).join("|"),u=e.map(Cr).join("|"),d=`(${n.concat(i.map(Cr)).join("|")})+`,h=`(${n.join("|")})+`,g=[u,o,d,l,s].join("|");return{identifierMatcher:new RegExp(d,"gu"),wordMatcher:new RegExp(h,"gu"),tokenMatcher:new RegExp(g,"gu")}}var KT=new Map;function on(t){let e=I().configuration.getOwnConfiguration("wordSeparators",{languageId:t}),r=e.join("\0");if(!KT.has(r)){let n={fixedTokens:J6,repeatableSymbols:X6,identifierWordRegexes:e5,identifierWordDelimiters:e,numbersRegex:r5,singleSymbolsRegex:t5};KT.set(r,n5(n))}return KT.get(r)}function cP(t,e,r){return en(t,on(e).tokenMatcher,r)}function lP(t,e){let r=t.document.languageId,n=t.document.getText(e),i=t.document.offsetAt(e.start);return cP(n,r,o=>{let s=i+o.index,l=i+o.index+o[0].length,u=new H(t.document.positionAt(s),t.document.positionAt(l));return{editor:t,text:o[0],range:u,offsets:{start:s,end:l}}})}function uP(t,e){return i5(t,e).flatMap(n=>{let i=n.selections[0].active,o=aP(n,[i.line]),s=rt(n.visibleRanges.map(l=>lP(n,l).map(u=>({...u,displayLine:o.get(u.range.start.line)}))));return s.sort(sP(o.get(i.line),i.character)),s.map((l,u)=>({token:l,rank:-u}))})}function i5(t,e){let r;return t==null?r=e:r=[t,...e.filter(n=>n!==t)],r}function QT(t,e,r,n,i,o){let s=o5(r),l=uP(i,o),u=oP(l,s,t),f=Object.keys(e),d=new no(()=>[...f]);return l.map(({token:h,rank:g})=>{let x=a5(t,h,d,e),v=iP(u,n,g,s.get(h),x);if(v!=null)return d.set(v.grapheme.text,d.get(v.grapheme.text).filter(w=>w!==v.style)),s5(h,v)}).filter(h=>h!=null)}function o5(t){let e=new ro(({editor:r,offsets:n})=>[r.id,n.start,n.end]);return t.forEach(r=>e.set(r.token,r)),e}function a5(t,e,r,n){let i=[],o=t.getTokenGraphemes(e.text);for(let s of o)for(let l of r.get(s.text))i.push({grapheme:s,style:l,penalty:n[l].penalty});return i}function s5(t,e){return{hatStyle:e.style,grapheme:e.grapheme.text,token:t,hatRange:new H(t.range.start.translate(void 0,e.grapheme.tokenStartOffset),t.range.start.translate(void 0,e.grapheme.tokenEndOffset))}}var vd=class{constructor(e,r){this.hats=e;this.context=r;this.disposables=[];I().disposeOnExit(this);let n=new zn(I().configuration,()=>this.allocateHats());this.disposables.push(this.hats.onDidChangeEnabledHatStyles(n.run),this.hats.onDidChangeIsEnabled(n.run),I().onDidOpenTextDocument(n.run),I().onDidCloseTextDocument(n.run),I().onDidChangeActiveTextEditor(n.run),I().onDidChangeVisibleTextEditors(n.run),I().onDidChangeTextDocument(n.run),I().onDidChangeTextEditorSelection(n.run),I().onDidChangeTextEditorVisibleRanges(n.run),hs().registerAlgorithmChangeListener(n.run),n)}async allocateHats(e){let r=await this.context.getActiveMap(),n=this.hats.isEnabled?QT(hs(),this.hats.enabledHatStyles,e??r.tokenHats,I().configuration.getOwnConfiguration("experimental.hatStability"),I().activeTextEditor,I().visibleTextEditors):[];r.setTokenHats(n),await this.hats.setHatRanges(n.map(({hatStyle:i,hatRange:o,token:{editor:s}})=>({editor:s,range:o,styleName:i})))}dispose(){this.disposables.forEach(({dispose:e})=>e())}};var bd=class t{constructor(e){this.rangeUpdater=e;this.isExpired=!1;this.documentTokenLists=new Map;this.deregisterFunctions=[];this.map={};this._tokenHats=[]}get tokenHats(){return this._tokenHats}getDocumentTokenList(e){let r=e.uri.toString(),n=this.documentTokenLists.get(r);return n==null&&(n=[],this.documentTokenLists.set(r,n),this.deregisterFunctions.push(this.rangeUpdater.registerRangeInfoList(e,n))),n}clone(){let e=new t(this.rangeUpdater);return e.setTokenHats(this._tokenHats),e}setTokenHats(e){this.map={},this.documentTokenLists=new Map,this.deregisterFunctions.forEach(n=>n());let r=e.map(n=>{let{hatStyle:i,grapheme:o,token:s}=n,l=this.makeTokenLive(s);return this.map[Jc(i,o)]=l,{...n,token:l}});this._tokenHats=r}makeTokenLive(e){let{tokenMatcher:r}=on(e.editor.document.languageId),n={...e,expansionBehavior:{start:{type:"regex",regex:r},end:{type:"regex",regex:r}}};return this.getDocumentTokenList(e.editor.document).push(n),n}getEntries(){return this.checkExpired(),Object.entries(this.map)}getToken(e,r){return this.checkExpired(),this.map[Jc(e,hs().normalizeGrapheme(r))]}checkExpired(){if(this.isExpired)throw Error("Map snapshot has expired")}dispose(){this.isExpired=!0,this.deregisterFunctions.forEach(e=>e())}};var c5=6e4,wd=class{constructor(e,r,n,i){this.debug=r;this.commandServerApi=i;this.prePhraseMapsSnapshotTimestamp=null;this.lastSignalVersion=null;I().disposeOnExit(this),this.activeMap=new bd(e),this.getActiveMap=this.getActiveMap.bind(this),this.allocateHats=this.allocateHats.bind(this),this.hatAllocator=new vd(n,{getActiveMap:this.getActiveMap})}allocateHats(e){return this.hatAllocator.allocateHats(e)}async getActiveMap(){return await this.maybeTakePrePhraseSnapshot(),this.activeMap}async getReadableMap(e){return await this.maybeTakePrePhraseSnapshot(),e?this.lastSignalVersion==null?(console.error("Pre phrase snapshot requested but no signal was present; please upgrade command client"),this.activeMap):this.prePhraseMapSnapshot==null?(console.error("Navigation map pre-phrase snapshot requested, but no snapshot has been taken"),this.activeMap):performance.now()-this.prePhraseMapsSnapshotTimestamp>c5?(console.error("Navigation map pre-phrase snapshot requested, but snapshot is more than a minute old"),this.activeMap):this.prePhraseMapSnapshot:this.activeMap}dispose(){this.activeMap.dispose(),this.prePhraseMapSnapshot!=null&&this.prePhraseMapSnapshot.dispose()}async maybeTakePrePhraseSnapshot(){let e=await this.commandServerApi.signals.prePhrase.getVersion();e!==this.lastSignalVersion&&(this.debug.log("taking snapshot"),this.lastSignalVersion=e,e!=null&&this.takePrePhraseSnapshot())}takePrePhraseSnapshot(){this.prePhraseMapSnapshot!=null&&this.prePhraseMapSnapshot.dispose(),this.prePhraseMapSnapshot=this.activeMap.clone(),this.prePhraseMapsSnapshotTimestamp=performance.now()}};function ZT(t,e,r){let n=t.get(e);return n==null&&(n=r(),t.set(e,n)),n}var eS=dr(pl(),1);function tS(t,e){let{originalOffsets:{start:r,end:n},finalOffsets:{end:i},displacement:o}=t,{offsets:{start:s,end:l}}=e;return(0,eS.invariant)(n>r,()=>"Change range expected to be nonempty"),(0,eS.invariant)(n>=s&&r<=l,()=>"Change range expected to intersect with selection range"),{start:n<=s?s+o:Math.min(s,i),end:n<=l?l+o:Math.min(l,i)}}var gP=dr(pl(),1);function rS(t,e){let{event:{text:r,isReplace:n},finalOffsets:{start:i,end:o}}=t;if((0,gP.invariant)(i===t.originalOffsets.end&&i===e.offsets.start&&i===e.offsets.end,()=>"Selection range and change range expected to be same empty range"),n){let s=e.expansionBehavior.end;switch(s.type){case"closed":return{start:i,end:i};case"open":return{start:i,end:o};case"regex":{let l=r.match(sf(s.regex));return l==null?{start:i,end:i}:{start:i,end:i+l[0].length}}}}else{let s=e.expansionBehavior.start;switch(s.type){case"closed":return{start:o,end:o};case"open":return{start:i,end:o};case"regex":{let l=r.search(af(s.regex));return l===-1?{start:o,end:o}:{start:i+l,end:o}}}}}var nS=dr(pl(),1);function iS(t,e){let{event:{text:r},originalOffsets:{start:n},displacement:i}=t,{offsets:{start:o,end:s},text:l}=e;if((0,nS.invariant)(s>o,()=>"Selection range expected to be nonempty"),(0,nS.invariant)(n>=o&&n<=s,()=>"Insertion offset expected to intersect with selection range"),n>o&&n<s)return{start:o,end:s+i};if(n===o){let u=e.expansionBehavior.start,f=s+i;switch(u.type){case"closed":return{start:o+i,end:f};case"open":return{start:o,end:f};case"regex":{let d=r+l,h=af(u.regex),g=d.search(h);for(;g>r.length;)d=d.slice(0,g),g=d.search(h);return g===-1?{start:o,end:f}:{start:o+g,end:f}}}}else{let u=e.expansionBehavior.end,f=o;switch(u.type){case"closed":return{start:f,end:s};case"open":return{start:f,end:s+i};case"regex":{let d=l+r,h=sf(u.regex),g=d.match(h),x=g==null?0:g[0].length;for(;x!==0&&x<l.length;)d=l.slice(x)+r,g=d.match(h),x=g==null?0:x+g[0].length;return x===0?{start:f,end:s}:{start:f,end:o+x}}}}}function yP(t,e,r){let{start:n,end:i}=t.originalOffsets,{start:o,end:s}=e.offsets,l=Math.min(n,o),u="";return o<n&&(u+=e.text.substring(0,n-o)),u+=t.event.text,i<s&&(u+=e.text.substring(s-i,e.text.length)),u.substring(r.start-l,r.end-l)}function xP(t,e){let{document:r,contentChanges:n}=t,i=n.map(o=>{let s=o.text.length-o.rangeLength,l=o.rangeOffset,u=l+o.rangeLength,f=l,d=u+s;return{displacement:s,event:o,originalOffsets:{start:l,end:u},finalOffsets:{start:f,end:d}}});for(let o of e){let s=o.offsets,l=i.map(f=>{let d;return f.originalOffsets.start>s.end?{start:0,end:0}:f.originalOffsets.end<s.start?{start:f.displacement,end:f.displacement}:(f.event.rangeLength===0?o.range.isEmpty?d=rS(f,o):d=iS(f,o):d=tS(f,o),o.text=yP(f,o,d),{start:d.start-s.start,end:d.end-s.end})}),u={start:s.start+Jp(l,({start:f})=>f),end:s.end+Jp(l,({end:f})=>f)};o.range=o.range.with(r.positionAt(u.start),r.positionAt(u.end)),o.offsets=u}}var Ed=class{constructor(){this.rangeInfoLists=new Map;this.replaceEditLists=new Map;this.listenForDocumentChanges()}getDocumentRangeInfoLists(e){return ZT(this.rangeInfoLists,e.uri.toString(),()=>[])}getDocumentReplaceEditLists(e){return ZT(this.replaceEditLists,e.uri.toString(),()=>[])}registerRangeInfoList(e,r){let n=this.getDocumentRangeInfoLists(e);return n.push(r),()=>Jt(n,r)}registerReplaceEditList(e,r){let n=this.getDocumentReplaceEditLists(e);return n.push(r),()=>Jt(n,r)}*documentRangeInfoGenerator(e){let r=this.getDocumentRangeInfoLists(e);for(let n of r)for(let i of n)yield i}listenForDocumentChanges(){this.disposable=I().onDidChangeTextDocument(e=>{let r=this.getDocumentReplaceEditLists(e.document),n={...e,contentChanges:e.contentChanges.map(i=>y5(r,i)?{...i,isReplace:!0}:i)};xP(n,this.documentRangeInfoGenerator(e.document))})}dispose(){this.disposable.dispose()}};function y5(t,e){for(let r of t)for(let n of r)if(n.range.isRangeEqual(e.range)&&n.text===e.text)return!0;return!1}var Rd=class{constructor(){this.signals={prePhrase:{getVersion(){return Promise.resolve(null)}}}}getFocusedElementType(){return Promise.resolve(void 0)}};var kd=class{async allocateHats(){}async getReadableMap(){return{getEntries(){return[]},getToken(){throw new Error("Hat map is disabled")}}}dispose(){}};var Md=class{onDidChangeDefinition(e){return{dispose:()=>{}}}loadLanguage(e){return Promise.resolve()}get(e){}getNodeAtLocation(e,r){}dispose(){}};var Pd=class{updateUserSnippets(){throw new Error("Snippets are not implemented.")}registerThirdPartySnippets(e,r){throw new Error("Snippets are not implemented.")}getSnippetStrict(e){throw new Error("Snippets are not implemented.")}openNewSnippetFile(e){throw new Error("Snippets are not implemented.")}};var Ad=class{getSpokenFormEntries(){throw new ss}onDidChange(){return{dispose:()=>{}}}};var Dd=class{getTree(e){throw new Error("Tree sitter not provided")}loadLanguage(e){return Promise.resolve(!1)}getLanguage(e){throw new Error("Tree sitter not provided")}getNodeAtLocation(e,r){throw new Error("Tree sitter not provided")}};var Ge=class extends Error{constructor(r,n=!1,i=!1){super(`No spoken form for: ${r}`);this.reason=r;this.requiresTalonUpdate=n;this.isPrivate=i}};var TP={curlyBrackets:["{","}"],angleBrackets:["<",">"],escapedDoubleQuotes:['\\"','\\"'],escapedSingleQuotes:["\\'","\\'"],escapedParentheses:["\\(","\\)"],escapedSquareBrackets:["\\[","\\]"],doubleQuotes:['"','"'],parentheses:["(",")"],backtickQuotes:["`","`"],squareBrackets:["[","]"],singleQuotes:["'","'"],tripleDoubleQuotes:['"""','"""'],tripleSingleQuotes:["'''","'''"],whitespace:[" "," "],any:null,string:null,collectionBoundary:null};var SP=new ro(t=>t);for(let[t,e]of Object.entries(TP))e!=null&&SP.set(e,t);function vP(t,e,r){let n=SP.get([e,r]);if(n==null)throw Error(`Unknown surrounding pair delimiters '${e} ${r}'`);return t.pairedDelimiter[n]}var x5={ifStatement:"if",ifElseStatement:"if else",tryCatchStatement:"try",functionDeclaration:"funk",link:"link"},T5={"ifElseStatement.alternative":"else","functionDeclaration.body":"funk","ifElseStatement.consequence":"if else","ifStatement.consequence":"if","tryCatchStatement.body":"try","link.text":"link"};function bP(t){if(t.type==="custom")throw new Ge("Custom insertion snippet");let e=x5[t.name];if(e==null)throw new Ge(`Named insertion snippet '${t.name}'`);if(t.substitutions!=null){let r=Object.values(t.substitutions);return`${e} ${r.join(" ")}`}return e}function wP(t){if(t.type==="custom")throw new Ge("Custom wrap with snippet");let e=`${t.name}.${t.variableName}`,r=T5[e];if(r==null)throw new Ge(`Named wrap with snippet '${e}'`);return r}function fl(t,e,r){let n=r==="vertical"?`${pt.verticalRange} `:"";if(t&&e)return n+pt.rangeExclusive;if(t)throw new Ge("Range exclude anchor");return e?n+pt.rangeExcludingEnd:r==="vertical"?pt.verticalRange:pt.rangeInclusive}function _P(t){return Object.fromEntries(Object.entries(t).map(([e,r])=>[e,Object.fromEntries(Object.entries(r).map(([n,i])=>[n,{type:"customizable",spokenForms:i,spokenFormType:e,id:n}]))]))}var S5=["zero","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen","twenty","twenty one","twenty two","twenty three","twenty four","twenty five","twenty six","twenty seven","twenty eight","twenty nine","thirty","thirty one","thirty two","thirty three","thirty four","thirty five","thirty six","thirty seven","thirty eight","thirty nine","forty","forty one","forty two","forty three","forty four","forty five","forty six","forty seven","forty eight","forty nine","fifty","fifty one","fifty two","fifty three","fifty four","fifty five","fifty six","fifty seven","fifty eight","fifty nine","sixty","sixty one","sixty two","sixty three","sixty four","sixty five","sixty six","sixty seven","sixty eight","sixty nine","seventy","seventy one","seventy two","seventy three","seventy four","seventy five","seventy six","seventy seven","seventy eight","seventy nine","eighty","eighty one","eighty two","eighty three","eighty four","eighty five","eighty six","eighty seven","eighty eight","eighty nine","ninety","ninety one","ninety two","ninety three","ninety four","ninety five","ninety six","ninety seven","ninety eight","ninety nine"],v5=["zeroth","first","second","third","fourth","fifth","sixth","seventh","eighth","ninth","tenth","eleventh","twelfth","thirteenth","fourteenth","fifteenth","sixteenth","seventeenth","eighteenth","nineteenth","twentieth"];function gs(t){let e=S5[t];if(e==null)throw Error(`Unknown number '${t}'`);return e}function dl(t){let e=v5[t];if(e==null)throw Error(`Unknown ordinal '${t}'`);return e}var Id=class{constructor(e){this.spokenFormMap=e;this.handleModifier=this.handleModifier.bind(this)}handlePrimitiveTarget(e){let r=[];return e.modifiers!=null&&r.push(e.modifiers.map(this.handleModifier)),e.mark!=null&&r.push(this.handleMark(e.mark)),r}handleModifier(e){switch(e.type){case"cascading":case"modifyIfUntyped":throw new Ge(`Modifier '${e.type}'`);case"containingScope":if(e.ancestorIndex==null||e.ancestorIndex===0)return this.handleScopeType(e.scopeType);if(e.ancestorIndex===1)return[this.spokenFormMap.modifierExtra.ancestor,this.handleScopeType(e.scopeType)];throw new Ge(`Modifier '${e.type}' with ancestor index ${e.ancestorIndex}`);case"everyScope":return[this.spokenFormMap.simpleModifier.everyScope,this.handleScopeType(e.scopeType)];case"extendThroughStartOf":case"extendThroughEndOf":{let r=this.spokenFormMap.simpleModifier[e.type];return e.modifiers!=null?[r,e.modifiers.map(this.handleModifier)]:[r]}case"relativeScope":return e.offset===0?this.handleRelativeScopeInclusive(e):this.handleRelativeScopeExclusive(e);case"ordinalScope":{let r=this.handleScopeType(e.scopeType),n=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.length===1)return e.start===-1?[n,this.spokenFormMap.modifierExtra.last,r]:e.start===0?[n,this.spokenFormMap.modifierExtra.first,r]:e.start<0?[n,dl(Math.abs(e.start)),this.spokenFormMap.modifierExtra.last,r]:[n,dl(e.start+1),r];let i=gs(e.length);if(e.start===0)return[n,this.spokenFormMap.modifierExtra.first,i,ml(r)];if(e.start===-e.length)return[n,this.spokenFormMap.modifierExtra.last,i,ml(r)];throw new Ge(`'${e.type}' with count > 1 and offset away from start / end`)}case"range":{if(e.anchor.type==="ordinalScope"&&e.active.type==="ordinalScope"&&e.anchor.length===1&&e.active.length===1&&e.anchor.scopeType.type===e.active.scopeType.type){let r=e.anchor.start===-1?this.spokenFormMap.modifierExtra.last:dl(e.anchor.start+1),n=this.handleModifier(e.active),i=fl(e.excludeAnchor,e.excludeActive);return[r,i,n]}throw Error(`Modifier '${e.type}' is not fully implemented`)}default:return[this.spokenFormMap.simpleModifier[e.type]]}}handleRelativeScopeInclusive(e){let r=this.handleScopeType(e.scopeType),n=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.length===1){let s=e.direction==="forward"?pt.forward:pt.backward;return[n,r,s]}let i=gs(e.length),o=ml(r);return e.direction==="forward"?[n,i,o]:[n,i,o,pt.backward]}handleRelativeScopeExclusive(e){let r=this.handleScopeType(e.scopeType),n=e.direction==="forward"?pt.next:pt.previous,i=e.isEvery?this.spokenFormMap.simpleModifier.everyScope:[];if(e.offset===1){let o=gs(e.length);if(e.length===1)return[i,n,r];let s=ml(r);return[i,n,o,s]}if(e.length===1){let o=dl(e.offset);return[i,o,n,r]}throw new Ge(`${e.type} modifier with offset > 1 and length > 1`)}handleScopeType(e){switch(e.type){case"oneOf":throw new Ge(`Scope type '${e.type}'`);case"glyph":return[this.spokenFormMap.complexScopeTypeType.glyph,RP(this.spokenFormMap.grapheme,"grapheme",e.character)];case"surroundingPair":{let r=this.spokenFormMap.pairedDelimiter[e.delimiter];return e.forceDirection!=null?[this.spokenFormMap.surroundingPairForceDirection[e.forceDirection],r]:r}case"customRegex":return this.spokenFormMap.customRegex[e.regex]??{type:"customizable",spokenForms:{spokenForms:[],isCustom:!0,defaultSpokenForms:[],requiresTalonUpdate:!1,isPrivate:!1},spokenFormType:"customRegex",id:e.regex};default:return this.spokenFormMap.simpleScopeTypeType[e.type]}}handleMark(e){switch(e.type){case"decoratedSymbol":{let[r,n]=e.symbolColor.split("-"),i=[];return r!=="default"&&i.push(TM(r)),n!=null&&i.push(SM(n)),i.push(RP(this.spokenFormMap.grapheme,"grapheme",e.character)),i}case"lineNumber":return this.handleLineNumberMark(e);case"range":{if(e.anchor.type==="lineNumber"&&e.active.type==="lineNumber"){let[r,n]=this.handleLineNumberMark(e.anchor),[i,o]=this.handleLineNumberMark(e.active);if(r===i){let s=fl(e.excludeAnchor,e.excludeActive);return[r,n,s,o]}}throw Error(`Mark '${e.type}' is not fully implemented`)}case"explicit":case"keyboard":case"target":throw new Ge(`Mark '${e.type}'`);default:return[jf[e.type]]}}handleLineNumberMark(e){switch(e.lineNumberType){case"absolute":throw new Ge("Absolute line numbers");case"modulo100":return[qf.modulo100,gs(e.lineNumber+1)];case"relative":return[e.lineNumber<0?qf.relativeUp:qf.relativeDown,gs(Math.abs(e.lineNumber))]}}};function ml(t){if(typeof t=="string")return EP(t);if(Array.isArray(t)){if(t.length===0)return t;let e=t[t.length-1];return[...t.slice(0,-1),ml(e)]}return{...t,spokenForms:{...t.spokenForms,spokenForms:t.spokenForms.spokenForms.map(EP)}}}function EP(t){return`${t}s`}function RP(t,e,r){let n=t[r];if(n==null)throw new Ge(`${e} '${r}'`);return n}var ys=class{constructor(e){this.spokenFormMap=_P(e),this.primitiveGenerator=new Id(this.spokenFormMap)}getSpokenFormForSingleTerm(e,r){return this.componentsToSpokenForm(()=>{let n=this.spokenFormMap[e][r];if(n==null)throw new Ge(`${e} with id ${r}`);return n})}processCommand(e){return this.componentsToSpokenForm(()=>this.handleAction(e.action))}processScopeType(e){return this.componentsToSpokenForm(()=>[this.primitiveGenerator.handleScopeType(e)])}componentsToSpokenForm(e){try{return{type:"success",spokenForms:kP(e())}}catch(r){if(r instanceof Ge)return{type:"error",reason:r.reason,requiresTalonUpdate:r.requiresTalonUpdate,isPrivate:r.isPrivate};throw r}}handleAction(e){switch(e.name){case"editNew":case"getText":case"replace":case"executeCommand":case"parsed":case"private.getTargets":case"private.setKeyboardTarget":throw new Ge(`Action '${e.name}'`);case"replaceWithTarget":case"moveToTarget":return[this.spokenFormMap.action[e.name],this.handleTarget(e.source),this.handleDestination(e.destination)];case"swapTargets":return[this.spokenFormMap.action[e.name],this.handleTarget(e.target1),pt.swapConnective,this.handleTarget(e.target2)];case"callAsFunction":return e.argument.type==="implicit"?[this.spokenFormMap.action[e.name],this.handleTarget(e.callee)]:[this.spokenFormMap.action[e.name],this.handleTarget(e.callee),"on",this.handleTarget(e.argument)];case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return[vP(this.spokenFormMap,e.left,e.right),this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"pasteFromClipboard":return[this.spokenFormMap.action[e.name],this.handleDestination(e.destination)];case"insertSnippet":return[this.spokenFormMap.action[e.name],bP(e.snippetDescription),this.handleDestination(e.destination)];case"generateSnippet":if(e.snippetName!=null)throw new Ge(`${e.name}.snippetName`);return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"wrapWithSnippet":return[wP(e.snippetDescription),this.spokenFormMap.action[e.name],this.handleTarget(e.target)];case"highlight":{if(e.highlightId!=null)throw new Ge(`${e.name}.highlightId`);return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)]}default:return[this.spokenFormMap.action[e.name],this.handleTarget(e.target)]}}handleTarget(e){switch(e.type){case"list":if(e.elements.length<2)throw new Ge("List target with < 2 elements");return e.elements.map((r,n)=>n===0?this.handleTarget(r):[pt.listConnective,this.handleTarget(r)]);case"range":{let r=this.handleTarget(e.anchor),n=this.handleTarget(e.active),i=fl(e.excludeAnchor,e.excludeActive,e.rangeType);return[r,i,n]}case"primitive":return this.primitiveGenerator.handlePrimitiveTarget(e);case"implicit":return[]}}handleDestination(e){switch(e.type){case"list":if(e.destinations.length<2)throw new Ge("List destination with < 2 elements");return e.destinations.map((r,n)=>n===0?this.handleDestination(r):[pt.listConnective,this.handleDestination(r)]);case"primitive":return[this.handleInsertionMode(e.insertionMode),this.handleTarget(e.target)];case"implicit":return[]}}handleInsertionMode(e){switch(e){case"to":return pt.sourceDestinationConnective;case"before":return pt.before;case"after":return pt.after}}};function kP(t){if(typeof t=="string")return[t];if(Array.isArray(t))return t.length===0?[""]:MP(t.map(kP)).map(e=>e.filter(r=>r.length!==0).join(" "));if(t.spokenForms.spokenForms.length===0){let e=`${Zc(t.spokenFormType)} with id ${t.id}`,r;throw t.spokenForms.isPrivate?r="this is a private spoken form currently only for internal experimentation":t.spokenForms.requiresTalonUpdate?r="please update talon to the latest version (see https://www.cursorless.org/docs/user/updating/)":r="please see https://www.cursorless.org/docs/user/customization/ for more information",new Ge(`${e}; ${r}`,t.spokenForms.requiresTalonUpdate,t.spokenForms.isPrivate)}return t.spokenForms.spokenForms}function MP(t){if(t.length===0)return[];if(t.length===1)return t[0].map(i=>[i]);let[e,...r]=t,n=MP(r);return e.flatMap(i=>n.map(o=>[i,...o]))}var Fd=class{constructor(e){this.talonSpokenForms=e;this.notifier=new Vt;this.spokenFormMap_={...wi};this.onDidChangeCustomSpokenForms=this.notifier.registerListener;this.disposable=e.onDidChange(()=>this.updateSpokenFormMaps().catch(()=>{})),this.customSpokenFormsInitialized=this.updateSpokenFormMaps(),this.customSpokenFormsInitialized.catch(()=>{})}get spokenFormMap(){return this.spokenFormMap_}get needsInitialTalonUpdate(){return this.needsInitialTalonUpdate_}async updateSpokenFormMaps(){let e;try{if(e=await this.talonSpokenForms.getSpokenFormEntries(),e.length===0)throw new Error("Custom spoken forms list empty")}catch(r){if(r instanceof Qc)this.needsInitialTalonUpdate_=!0;else if(!(r instanceof ss)){console.error("Error loading custom spoken forms",r);let n=r.message.replace(/\.$/,"");nt(I().messages,"CustomSpokenForms.updateSpokenFormMaps",`Error loading custom spoken forms: ${n}. Falling back to default spoken forms.`)}throw this.spokenFormMap_={...wi},this.notifier.notifyListeners(),r}for(let r of Fk)b5(this.spokenFormMap_,r,IT[r],Object.fromEntries(e.filter(n=>n.type===r).map(({id:n,spokenForms:i})=>[n,i])));this.notifier.notifyListeners()}getCustomRegexScopeTypes(){return Object.keys(this.spokenFormMap_.customRegex).map(e=>({type:"customRegex",regex:e}))}dispose(){this.disposable.dispose()}};function b5(t,e,r,n){let i=Array.from(new Set([...Object.keys(r),...Object.keys(n)])),o={};for(let s of i){let{defaultSpokenForms:l=[],isPrivate:u=!1}=r[s]??{},f=n[s];o[s]=f==null?{defaultSpokenForms:l,spokenForms:[],requiresTalonUpdate:!u,isCustom:!1,isPrivate:u}:{defaultSpokenForms:l,spokenForms:f,requiresTalonUpdate:!1,isCustom:!xi(l,f),isPrivate:u}}t[e]=o}var Cd=class{constructor(e){this.customSpokenForms=new Fd(e),this.customSpokenFormsInitialized=this.customSpokenForms.customSpokenFormsInitialized,this.spokenFormGenerator=new ys(this.customSpokenForms.spokenFormMap),this.disposable=this.customSpokenForms.onDidChangeCustomSpokenForms(()=>{this.spokenFormGenerator=new ys(this.customSpokenForms.spokenFormMap)})}onDidChangeCustomSpokenForms(e){return this.customSpokenForms.onDidChangeCustomSpokenForms(e)}commandToSpokenForm(e){return this.spokenFormGenerator.processCommand(e)}scopeTypeToSpokenForm(e){return this.spokenFormGenerator.processScopeType(e)}actionIdToSpokenForm(e){return this.spokenFormGenerator.getSpokenFormForSingleTerm("action",e)}graphemeToSpokenForm(e){return this.spokenFormGenerator.getSpokenFormForSingleTerm("grapheme",e)}getCustomRegexScopeTypes(){return this.customSpokenForms.getCustomRegexScopeTypes()}get needsInitialTalonUpdate(){return this.customSpokenForms.needsInitialTalonUpdate}dispose(){this.disposable.dispose()}};function*w5(t){for(let e of t)for(let r of e)yield r}function*hl(t,e){let r=Nd(e),n=t;for(;n-- >0;){let i=r.next();if(!i.done)yield i.value;else return}}function*AP(t){let e=Nd(t),r=e.next();if(r.done)return;let n=r.value;for(let i of e)yield[n,i],n=i}var $we=Symbol();function*_5(t=0,e=1){let r=t;for(;;)yield r,r+=e}function*DP(t,e){for(let r of t)e(r)&&(yield r)}function*Nt(t,e){for(let r of t)yield e(r)}function*IP(t,e,r,n=1){let i,o;if(r!==void 0?(i=e,o=r):(i=0,o=e),i<0)throw new Error("start cannot be negative");if(o!==null&&o<0)throw new Error("stop cannot be negative");if(n<=0)throw new Error("step cannot be negative");let s=-1,l=Nd(t),u;for(;;){if(s++,o!==null&&s>=o||(u=l.next(),u.done))return;s<i||(s-i)%n===0&&(yield u.value)}}function*E5(t,e){let r=Nd(t),n;for(;!(n=r.next()).done;){let i=n.value;if(!e(i))return;yield i}}function Nd(t){return t[Symbol.iterator]()}function xs(t,e){return Array.from(Nt(t,e))}function PP(t,e,r){let n=_5(t,r),i=r>=0?o=>o<e:o=>o>e;return E5(n,i)}function FP(t,e,r=1){return e!==void 0?PP(t,e,r):PP(0,t,r)}function Od(t,e){return w5(Nt(t,e))}function Ri(t,e,{domain:r},{domain:n}){return t==="forward"?R5(e,r,n):k5(e,r,n)}function R5(t,e,r){let n=e.start.isAfterOrEqual(t),i=r.start.isAfterOrEqual(t);if(n&&i){let s=e.start.compareTo(r.start);return s===0?e.end.compareTo(r.end):s}if(!n&&!i){let s=e.end.compareTo(r.end);return s===0?-e.start.compareTo(r.start):s}if(!n&&i){let s=e.end.compareTo(r.start);return s!==0?s:r.isEmpty?1:-1}let o=e.start.compareTo(r.end);return o!==0?o:e.isEmpty?-1:1}function k5(t,e,r){let n=e.end.isBeforeOrEqual(t),i=r.end.isBeforeOrEqual(t);if(n&&i){let s=-e.end.compareTo(r.end);return s===0?-e.start.compareTo(r.start):s}if(!n&&!i){let s=-e.start.compareTo(r.start);return s===0?e.end.compareTo(r.end):s}if(!n&&i){let s=-e.start.compareTo(r.end);return s!==0?s:r.isEmpty?1:-1}let o=-e.end.compareTo(r.start);return o!==0?o:e.isEmpty?-1:1}function CP(t,e,r,n,i,o){return M5(t,n,i,o)&&(i==null||Ri(r,n.includeDescendantScopes?t:e,i,o)<0)}function M5(t,e,r,n){let{containment:i,distalPosition:o,allowAdjacentScopes:s,skipAncestorScopes:l}=e,{domain:u}=n;switch(i){case"disallowed":if(u.contains(t))return!1;break;case"disallowedIfStrict":if(ZM(u,t))return!1;break;case"required":if(!u.contains(t))return!1;break}return l&&r!=null&&u.contains(r.domain)?!1:P5(new H(t,o),u,s)}function P5(t,e,r){let n=t.intersection(e);return n==null?!1:!n.isEmpty||r||e.isEmpty}var A5={containment:null,allowAdjacentScopes:!1,skipAncestorScopes:!1,includeDescendantScopes:!1},Ht=class{constructor(){this.includeAdjacentInEvery=!1}*generateScopes(e,r,n,i={}){let o={...A5,...i,distalPosition:i.distalPosition??(n==="forward"?e.document.range.end:e.document.range.start)},s,l=r;for(let u of this.generateScopeCandidates(e,r,n,o))if(CP(r,l,n,o,s,u)&&(yield u,s=u,l=n==="forward"?u.domain.end:u.domain.start),this.canStopEarly(r,n,o,s,u))return}canStopEarly(e,r,n,i,o){let{containment:s,distalPosition:l,skipAncestorScopes:u}=n;if(this.isHierarchical&&!u)return!1;let f=this.isHierarchical&&u?i:o;return f==null?!1:!!(s==="required"&&(r==="forward"?f.domain.end.isAfter(e):f.domain.start.isBefore(e))||(r==="forward"?f.domain.end.isAfterOrEqual(l):f.domain.start.isBeforeOrEqual(l)))}};var Tr=class extends Ht{constructor(r,n,i){super();this.scopeHandlerFactory=r;this.scopeType=n;this.languageId=i;this.isHierarchical=!1}get searchScopeType(){return this.iterationScopeType}get searchScopeHandler(){return this._searchScopeHandler==null&&(this._searchScopeHandler=this.scopeHandlerFactory.create(this.searchScopeType,this.languageId)),this._searchScopeHandler}generateScopeCandidates(r,n,i,o){let{containment:s,...l}=o,u=this.searchScopeHandler.generateScopes(r,n,i,{containment:s==="required"?"required":void 0,...l});return Od(u,f=>this.generateScopesInSearchScope(i,f))}};var Ld=class extends Ht{constructor(r,n){super();this.scopeType={type:"line"};this.iterationScopeType={type:"paragraph"};this.isHierarchical=!1;this.includeAdjacentInEvery=!0}*generateScopeCandidates(r,n,i){if(i==="forward")for(let o=n.line;o<r.document.lineCount;o++)yield NP(r,o);else for(let o=n.line;o>=0;o--)yield NP(r,o)}};function NP(t,e){let{range:r}=t.document.lineAt(e);return{editor:t,domain:r,getTargets:n=>[oS(t,n,r)]}}function oS(t,e,r){return new Rn({editor:t,isReversed:e,contentRange:gl(t,r)})}function gl(t,e){let r=t.document.lineAt(e.start),n=t.document.lineAt(e.end);return new H(r.lineNumber,r.firstNonWhitespaceCharacterIndex,n.lineNumber,n.lastNonWhitespaceCharacterIndex)}function Kn(t,e,r,n){let i=e.document.offsetAt(r.start),o=e.document.getText(r),s=l=>new H(e.document.positionAt(i+l.index),e.document.positionAt(i+l.index+l[0].length));return t.lastIndex=0,n==="forward"?Nt(o.matchAll(t),s):Array.from(o.matchAll(t),s).reverse()}var Ud=class extends Tr{constructor(){super(...arguments);this.scopeType={type:"identifier"};this.iterationScopeType={type:"line"};this.regex=on(this.languageId).identifierMatcher}generateScopesInSearchScope(r,{editor:n,domain:i}){return Nt(Kn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new xr({editor:n,contentRange:o,isReversed:s})]}))}};function Bd(t,e,r){let n=t.editor.document.getText(t.domain),i=e.editor.document.getText(e.domain);for(let o of r){let s=Uc(o,n),l=Uc(o,i);if(s&&!l)return!0;if(l&&!s)return!1}}var D5=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}\p{Z}\p{C}]/gu,I5=/[$]/g,F5=/\p{L}\p{M}*|[\p{N}\p{P}\p{S}]/gu,Vd=class extends Tr{constructor(){super(...arguments);this.scopeType={type:"character"};this.iterationScopeType={type:"token"}}get searchScopeType(){return{type:"line"}}generateScopesInSearchScope(r,{editor:n,domain:i}){return Nt(Kn(D5,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new Ue({editor:n,contentRange:o,isReversed:s,isToken:!1})]}))}isPreferredOver(r,n){let{identifierMatcher:i}=on(this.languageId);return Bd(r,n,[i,I5,F5])}};var C5=/\p{Lu}?\p{Ll}+|\p{Lu}+(?!\p{Ll})|\p{N}+/gu,Wd=class{constructor(e){this.wordRegex=on(e).wordMatcher}splitIdentifier(e){let r=Bc(e,this.wordRegex);return r.length>1?r:Bc(e,C5)}};var Hd=class extends Tr{constructor(){super(...arguments);this.scopeType={type:"word"};this.iterationScopeType={type:"identifier"};this.wordTokenizer=new Wd(this.languageId)}getScopesInSearchScope({editor:r,domain:n}){let{document:i}=r,o=i.offsetAt(n.start),l=this.wordTokenizer.splitIdentifier(i.getText(n)).map(u=>new H(i.positionAt(o+u.index),i.positionAt(o+u.index+u.text.length)));return l.map((u,f)=>({editor:r,domain:u,getTargets:d=>{let h=f>0?l[f-1]:null,g=f+1<l.length?l[f+1]:null;return[N5(d,r,h,u,g)]}}))}generateScopesInSearchScope(r,n){let i=this.getScopesInSearchScope(n);return r==="backward"&&i.reverse(),i}};function N5(t,e,r,n,i){let o=r!=null&&n.start.isAfter(r.end)?new H(r.end,n.start):void 0,s=i!=null&&i.start.isAfter(n.end)?new H(n.end,i.start):void 0,u=o!=null||s!=null?e.document.getText(o??s):"";return new dd({editor:e,isReversed:t,contentRange:n,insertionDelimiter:u,leadingDelimiterRange:o,trailingDelimiterRange:s})}var O5=/[$]/g,$d=class extends Tr{constructor(){super(...arguments);this.scopeType={type:"token"};this.iterationScopeType={type:"line"};this.regex=on(this.languageId).tokenMatcher}generateScopesInSearchScope(r,{editor:n,domain:i}){return Nt(Kn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new xr({editor:n,contentRange:o,isReversed:s})]}))}isPreferredOver(r,n){let{identifierMatcher:i}=on(this.languageId);return Bd(r,n,[i,O5])}};var jd=class extends Ht{constructor(r,n){super();this.scopeType={type:"document"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i){let o=r.document.range;yield{editor:r,domain:o,getTargets:s=>[new cd({editor:r,isReversed:s,contentRange:o})]}}};function OP(t,e,r){let n=[],i=[];for(let o of t)i.length===0||e(i[i.length-1],o)?i.push(o):(n.push(r(i)),i=[o]);return i.length>0&&n.push(r(i)),n}var Ts=class extends Ht{constructor(r){super();this.query=r}*generateScopeCandidates(r,n,i,o){let{document:s}=r,l=this.query.matches(s).map(u=>this.matchToScope(r,u)).filter(u=>u!=null).sort((u,f)=>Ri(i,n,u,f));yield*OP(l,(u,f)=>u.domain.isRangeEqual(f.domain),u=>u.length===1?u[0]:{...u[0],getTargets(f){let d=Fc(u.flatMap(h=>h.getTargets(f)),(h,g)=>h.isEqual(g));if(d.length>1&&!u.every(h=>h.allowMultiple)){let h="Please use #allow-multiple! predicate in your query to allow multiple matches for this scope type";if(nt(I().messages,"BaseTreeSitterScopeHandler.allow-multiple",h),I().runMode==="test")throw Error(h)}return d}})}};function aS(t,e,r,n){return n?Ss(t,`${e}.${r}`,`_.${r}`):Ss(t,`${e}.${r}`)??(Ss(t,e)!=null?Ss(t,`_.${r}`):void 0)}function ki(t,e,r,n){return aS(t,e,r,n)?.range}function Ss(t,...e){return t.captures.find(r=>e.some(n=>r.name===n))}var qd=class extends Ts{constructor(r,n){super(r);this.iterateeScopeType=n;this.isHierarchical=!0;this.scopeType=void 0}get iterationScopeType(){throw Error("Not implemented")}matchToScope(r,n){let i=this.iterateeScopeType.type,o=aS(n,i,"iteration",!1);if(o==null)return;let{range:s,allowMultiple:l}=o,u=ki(n,i,"iteration.domain",!1)??s;return{editor:r,domain:u,allowMultiple:l,getTargets:f=>[new Ue({editor:r,isReversed:f,contentRange:s})]}}};var zd=class extends Ts{constructor(r,n){super(r);this.scopeType=n;this.isHierarchical=!0}get iterationScopeType(){return{type:"custom",scopeHandler:new qd(this.query,this.scopeType)}}matchToScope(r,n){let i=this.scopeType.type,o=Ss(n,i);if(o==null)return;let{range:s,allowMultiple:l,insertionDelimiter:u}=o,f=ki(n,i,"domain",!0)??s,d=ki(n,i,"removal",!0),h=ki(n,i,"interior",!0),g=ki(n,i,"prefix",!0)?.with(void 0,s.start),x=ki(n,i,"leading",!0)?.with(void 0,g?.start??s.start),v=ki(n,i,"trailing",!0)?.with(s.end);return{editor:r,domain:f,allowMultiple:l,getTargets:w=>[new so({scopeTypeType:i,editor:r,isReversed:w,contentRange:s,prefixRange:g,removalRange:d,leadingDelimiterRange:x,trailingDelimiterRange:v,interiorRange:h,insertionDelimiter:u})]}}};function LP(t){return t.flatMap(e=>{let{value:r,done:n}=e.next();return n?[]:[{iterator:e,value:r}]})}function UP(t,e){return t.flatMap(r=>{let{iterator:n}=r,{value:i}=r,o=!1;for(;!o&&!e(i);)({value:i,done:o}=n.next());return o?[]:[{iterator:n,value:i}]})}var Gd=class t extends Ht{constructor(r,n,i){super();this.scopeType=r;this.scopeHandlers=n;this.getIterationScopeType=i;this.isHierarchical=!0}static create(r,n,i){let o=n.scopeTypes.map(l=>{let u=r.create(l,i);if(u==null)throw new Error(`No available scope handler for '${l.type}'`);return u}),s=()=>({type:"custom",scopeHandler:new t(void 0,o.map(l=>r.create(l.iterationScopeType,i)),()=>{throw new Error("Not implemented")})});return new t(n,o,s)}get iterationScopeType(){return this.getIterationScopeType()}*generateScopeCandidates(r,n,i,o){let s=this.scopeHandlers.map(u=>u.generateScopes(r,n,i,o)[Symbol.iterator]()),l=LP(s);for(;l.length>0;){l.sort((f,d)=>Ri(i,n,f.value,d.value));let u=l[0].value;yield u,l=UP(l,f=>Ri(i,n,u,f)<0)}}};var Kd=class extends Ht{constructor(r,n){super();this.scopeType={type:"paragraph"};this.iterationScopeType={type:"document"};this.isHierarchical=!1}*generateScopeCandidates(r,n,i){let{document:o}=r,s=i==="forward"?1:-1,l=i==="forward"?o.lineCount:-1,u=L5(o,n,i),f=r.document.lineAt(n);for(let d=n.line+s;d!==l;d+=s){let h=r.document.lineAt(d);h.isEmptyOrWhitespace?u!=null&&(yield BP(r,u.range.union(f.range)),u=void 0):u==null&&(u=h),f=h}u!=null&&(yield BP(r,u.range.union(f.range)))}};function L5(t,e,r){let n=r==="forward"?-1:1,i=r==="forward"?-1:t.lineCount,o=t.lineAt(e);if(!o.isEmptyOrWhitespace){for(let s=e.line+n;s!==i;s+=n){let l=t.lineAt(s);if(l.isEmptyOrWhitespace)break;o=l}return o}}function BP(t,e){return{editor:t,domain:e,getTargets:r=>[new pd({editor:t,isReversed:r,contentRange:gl(t,e)})]}}function yl(t,e){return e.length>1?e.indexOf(t.slice(-1))>-1:t.slice(-1)===e}function VP(t,e){return t.slice(t.length-e.length)===e}var sS,B5=["al","adj","assn","Ave","BSc","MSc","Cell","Ch","Co","cc","Corp","Dem","Dept","ed","eg","Eq","Eqs","est","est","etc","Ex","ext","Fig","fig","Figs","figs","i.e","ie","Inc","inc","Jan","Feb","Mar","Apr","Jun","Jul","Aug","Sep","Sept","Oct","Nov","Dec","jr","mi","Miss","Mrs","Mr","Ms","Mol","mt","mts","no","Nos","PhD","MD","BA","MA","MM","pl","pop","pp","Prof","Dr","pt","Ref","Refs","Rep","repr","rev","Sec","Secs","Sgt","Col","Gen","Rep","Sen","Gov","Lt","Maj","Capt","St","Sr","sr","Jr","jr","Rev","Sun","Mon","Tu","Tue","Tues","Wed","Th","Thu","Thur","Thurs","Fri","Sat","trans","Univ","Viz","Vol","vs","v"];function WP(t){t?sS=t:sS=B5}function cS(t){return/^[A-Z][a-z].*/.test(t)||Qd(t)}function HP(t){return cS(t)||/``|"|'/.test(t.substring(0,2))}function $P(t){let e=t.replace(/[-'`~!@#$%^&*()_|+=?;:'",.<>{}[\]\\/]/gi,"");return~sS.indexOf(e)}function jP(t,e){return(t==="a.m."||t==="p.m.")&&e.replace(/\W+/g,"").slice(-3).toLowerCase()==="day"}function lS(t){let e=t.replace(/[()[]{}]/g,"").match(/(.\.)*/);return e&&e[0].length>0}function qP(t){return t.length<=3?!0:cS(t)}function uS(t,e){return e.length>0?t<5&&e[0].length<6&&cS(e[0])?!0:e.filter(function(n){return/[A-Z]/.test(n.charAt(0))}).length>=3:!1}function Qd(t,e){return e&&(t=t.slice(e-1,e+2)),!isNaN(t)}function zP(t){return t.match(/^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/)}function GP(t){return t.match(/[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/)}function KP(t){let e=0;return((e=t.indexOf("."))>-1||(e=t.indexOf("!"))>-1||(e=t.indexOf("?"))>-1)&&t.charAt(e+1).match(/[a-zA-Z].*/)?[t.slice(0,e),t.slice(e+1)]:!1}function QP(t){return t==="."||t==="!"||t==="?"}var YP=" @~@ ",ZP=YP.trim(),W5=new RegExp("\\S",""),H5=new RegExp("\\n+|[-#=_+*]{4,}","g"),$5=new RegExp("\\S+|\\n","g"),j5={newlineBoundaries:!1,preserveWhitespace:!1,abbreviations:void 0};function XP(t,e){if(!t)return[];if(!W5.test(t))return[];let r={...j5,...e};WP(r.abbreviations),r.newlineBoundaries&&(t=t.replace(H5,YP));let n,i;r.preserveWhitespace?(i=t.split(/(<br\s*\/?>|\S+|\n+)/),n=i.filter(function(h,g){return g%2})):n=t.trim().match($5)??[];let o=0,s=0,l=[],u=[],f=[];if(!n||!n.length)return[];for(let h=0,g=n.length;h<g;h++){if(o++,f.push(n[h]),~n[h].indexOf(",")&&(o=0),QP(n[h])||yl(n[h],"?!")||n[h]===ZP){r.newlineBoundaries&&n[h]===ZP&&f.pop(),u.push(f),o=0,f=[];continue}if((yl(n[h],'"')||yl(n[h],"\u201D"))&&(n[h]=n[h].slice(0,-1)),yl(n[h],".")){if(h+1<g){if(n[h].length===2&&isNaN(n[h].charAt(0))||$P(n[h]))continue;if(HP(n[h+1])){if(jP(n[h],n[h+1])||uS(o,n.slice(h,6))||Qd(n[h+1])&&qP(n[h]))continue}else if(VP(n[h],"..")||lS(n[h])||uS(o,n.slice(h,5)))continue}u.push(f),f=[],o=0;continue}(s=n[h].indexOf("."))>-1&&(Qd(n[h],s)||lS(n[h])||GP(n[h])||zP(n[h]))||(l=KP(n[h]))&&(f.pop(),f.push(l[0]),u.push(f),f=[],o=0,f.push(l[1]))}return f.length&&u.push(f),u=u.filter(function(h){return h.length>0}),u.slice(1).reduce(function(h,g){let x=h[h.length-1];return x.length===1&&/^.{1,2}[.]$/.test(x[0])&&!/[.]/.test(g[0])?(h.pop(),h.push(x.concat(g)),h):(h.push(g),h)},[u[0]]).map(function(h,g){if(r.preserveWhitespace&&!r.newlineBoundaries){let x=h.length*2;return g===0&&(x+=1),i.splice(0,x).join("")}return h.join(" ")})}var q5=/\S*\p{L}/u,JP=/(\r?\n[^\p{L}]*\r?\n)|(?<=[.!?])(\s*\r?\n)/gu,z5={newlineBoundaries:!1,preserveWhitespace:!0},Zd=class{*segment(e){let r=XP(e,z5),n=0;for(let i of r){let o=i.split(JP).filter(s=>s!=null);for(let s of o){if(!K5(s)){let l=G5(s,n);l!=null&&(yield l)}n+=s.length}}}};function G5(t,e){let r=CR(q5,t);if(r==null)return;let n=r.index;return n!==0&&(e+=n,t=t.slice(n)),{text:t.trimEnd(),index:e}}function K5(t){return Uc(JP,t)}var Yd=class extends Tr{constructor(){super(...arguments);this.scopeType={type:"sentence"};this.iterationScopeType={type:"paragraph"};this.segmenter=new Zd}generateScopesInSearchScope(r,{editor:n,domain:i}){let o=n.document.offsetAt(i.start),s=n.document.getText(i),l=f=>{let d=new H(n.document.positionAt(o+f.index),n.document.positionAt(o+f.index+f.text.length));return{editor:n,domain:d,getTargets:h=>[new xr({editor:n,contentRange:d,isReversed:h})]}},u=this.segmenter.segment(s);return r==="forward"?Nt(u,l):Array.from(u,l).reverse()}};var vs=class extends Tr{constructor(){super(...arguments);this.iterationScopeType={type:"line"}}generateScopesInSearchScope(r,{editor:n,domain:i}){return Nt(Kn(this.regex,n,i,r),o=>({editor:n,domain:o,getTargets:s=>[new xr({editor:n,contentRange:o,isReversed:s})]}))}},Xd=class extends vs{constructor(){super(...arguments);this.regex=/\S+/g}},Jd=class extends vs{constructor(r,n,i){super(r,n,i);this.scopeType=n;this.regex=/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/g}},em=class extends vs{constructor(r,n,i){super(r,n,i);this.scopeType=n}get regex(){return new RegExp(this.scopeType.regex,"gu")}},tm=class extends vs{constructor(r,n,i){super(r,n,i);this.scopeType=n}get regex(){return new RegExp(Cr(this.scopeType.character),"gui")}};function eA(t,{openingDelimiterRange:e,closingDelimiterRange:r},n){let i=e.union(r),o=new H(e.end,r.start);return{editor:t,domain:n?o:i,getTargets:s=>[new md({editor:t,isReversed:s,contentRange:i,interiorRange:o,boundary:[e,r]})]}}function tA(t){let e=Ti(t.map(({text:r})=>r)).map(Cr).join("|");return new RegExp(`(?<!\\\\)(${e})`,"gu")}function rA(t,e,r){if(r.length===0)return[];let n=tA(r),i=t?.getCaptures(e,"disqualifyDelimiter")??[],o=t?.getCaptures(e,"textFragment")??[],s=Object.fromEntries(r.map(u=>[u.text,u])),l=e.getText();return en(l,n,u=>{let f=u[0],d=new H(e.positionAt(u.index),e.positionAt(u.index+f.length)),h=i.some(x=>x.range.contains(d)&&!x.hasError()),g=o.find(x=>x.range.contains(d))?.range;return{delimiterInfo:s[f],isDisqualified:h,textFragmentRange:g,range:d}})}var nm=Object.freeze({angleBrackets:[["</","<"],[">","/>"]],backtickQuotes:["`","`"],curlyBrackets:[["{","${"],"}"],tripleDoubleQuotes:[[],[]],tripleSingleQuotes:[[],[]],doubleQuotes:['"','"',{isSingleLine:!0}],escapedDoubleQuotes:['\\"','\\"',{isSingleLine:!0}],escapedParentheses:["\\(","\\)"],escapedSquareBrackets:["\\[","\\]"],escapedSingleQuotes:["\\'","\\'",{isSingleLine:!0}],parentheses:[["(","$("],")"],singleQuotes:["'","'",{isSingleLine:!0}],squareBrackets:["[","]"]}),rm=["","r","u","R","U","f","F","fr","Fr","fR","FR","rf","rF","Rf","RF","b","B","br","Br","bR","BR","rb","rB","Rb","RB"],nA={nix:{singleQuotes:["''","''"]},lua:{doubleQuotes:[['"',"[["],['"',"]]"]]},python:{singleQuotes:[rm.map(t=>`${t}'`),"'",{isSingleLine:!0,isUnknownSide:!0}],doubleQuotes:[rm.map(t=>`${t}"`),'"',{isSingleLine:!0,isUnknownSide:!0}],tripleSingleQuotes:[rm.map(t=>`${t}'''`),"'''",{isUnknownSide:!0}],tripleDoubleQuotes:[rm.map(t=>`${t}"""`),'"""',{isUnknownSide:!0}]},ruby:{tripleDoubleQuotes:["%Q(",")"]}},c0e=Object.fromEntries(Object.values(nm)),iA={any:vi(nm),string:["tripleDoubleQuotes","tripleSingleQuotes","doubleQuotes","singleQuotes","backtickQuotes"],collectionBoundary:["parentheses","squareBrackets","curlyBrackets","angleBrackets"]};function oA(t){return t!=null&&t in nA?{...nm,...nA[t]}:nm}function aA(t,e){let r=iA[t]??[t];return Q5(e,r)}function Q5(t,e){let r=oA(t);return e.flatMap(n=>{let[i,o,s]=r[n],{isSingleLine:l=!1,isUnknownSide:u=!1}=s??{},f=Yc(i)?[i]:i,d=Yc(o)?[o]:o;return Ti(Dc(f,d)).map(g=>{let x=f.includes(g),v=d.includes(g);return{text:g,side:u?"unknown":x&&!v?"left":!x&&v?"right":"unknown",delimiterName:n,isSingleLine:l}})})}function sA(t){let e=[],r=new no(()=>[]);for(let n of t){let{delimiterInfo:{delimiterName:i,side:o,isSingleLine:s},isDisqualified:l,textFragmentRange:u,range:f}=n;if(l)continue;let d=r.get(i);s&&(d=d.filter(g=>g.range.start.line===f.start.line),r.set(i,d));let h=d.filter(g=>u==null&&g.textFragmentRange==null||u!=null&&g.textFragmentRange!=null&&g.textFragmentRange.isRangeEqual(u));if(o==="left"||o==="unknown"&&h.length%2===0)d.push(n);else{let g=h.at(-1);if(g==null)continue;d.splice(d.lastIndexOf(g),1),e.push({delimiterName:i,openingDelimiterRange:g.range,closingDelimiterRange:f})}}return e}var im=class extends Ht{constructor(r,n,i){super();this.languageDefinitions=r;this.scopeType=n;this.languageId=i;this.iterationScopeType={type:"line"};this.isHierarchical=!0}*generateScopeCandidates(r,n,i,o){if(this.scopeType.forceDirection!=null){nt(I().messages,"deprecatedForceDirection","forceDirection is deprecated. If this is important to you please file an issue on the cursorless repo.");return}let s=rA(this.languageDefinitions.get(this.languageId),r.document,aA(this.scopeType.delimiter,this.languageId)),l=sA(s);l=Z5(i,o,n,l),yield*l.map(u=>eA(r,u,this.scopeType.requireStrongContainment??!1)).sort((u,f)=>Ri(i,n,u,f))}};function Z5(t,e,r,n){return t==="forward"&&e.containment==="required"&&e.allowAdjacentScopes&&e.skipAncestorScopes?n.filter((i,o)=>!(i.closingDelimiterRange.end.isEqual(r)&&n[o+1]?.closingDelimiterRange.start.isEqual(r))):n}var bs=class{constructor(e){this.languageDefinitions=e;this.create=this.create.bind(this)}create(e,r){switch(e.type){case"character":return new Vd(this,e,r);case"word":return new Hd(this,e,r);case"token":return new $d(this,e,r);case"identifier":return new Ud(this,e,r);case"line":return new Ld(e,r);case"sentence":return new Yd(this,e,r);case"paragraph":return new Kd(e,r);case"document":return new jd(e,r);case"oneOf":return Gd.create(this,e,r);case"nonWhitespaceSequence":return new Xd(this,e,r);case"url":return new Jd(this,e,r);case"customRegex":return new em(this,e,r);case"glyph":return new tm(this,e,r);case"surroundingPair":return new im(this.languageDefinitions,e,r);case"custom":return e.scopeHandler;case"instance":throw Error("Unexpected scope type 'instance'");default:return this.languageDefinitions.get(r)?.getScopeHandler(e)}}};function sn(t,e){return new H(t.row,t.column,e.row,e.column)}function pS(t){return new se(t.row,t.column)}function cA(t){return new H(t.startPosition.row,t.startPosition.column,t.endPosition.row,t.endPosition.column)}function lA(t,e){return new Te(t.startPosition.row,t.startPosition.column,e.endPosition.row,e.endPosition.column)}function Qn(t,e){return{selection:new Te(new se(e.startPosition.row,e.startPosition.column),new se(e.endPosition.row,e.endPosition.column)),context:{}}}function Y5(t,e,r){let n=e.startIndex<r.startIndex,i=n?e:r,o=n?r:e;return{selection:new Te(new se(i.startPosition.row,i.startPosition.column),new se(o.endPosition.row,o.endPosition.column)),context:{}}}function uA(){return Go(t=>t.type===","||t.type==="("||t.type===")"||t.type==="["||t.type==="]"||t.type===">"||t.type==="<"||t.type==="}"||t.type==="{",", ")}function pA(t,e){let r=e.startIndex,n=e.endIndex;return e.text.startsWith("(")&&e.text.endsWith(")")?(r+=1,n-=1):e.text.endsWith(";")&&(n-=1),{selection:new Te(t.document.positionAt(r),t.document.positionAt(n)),context:{}}}function fA(...t){return function(e,r){let n=r.previousSibling,i=n?.previousSibling,o;return n&&(t.includes(n.type)?i?o=sn(i.endPosition,r.startPosition):o=sn(n.startPosition,r.startPosition):o=sn(n.endPosition,r.startPosition)),{...Qn(e,r),context:{leadingDelimiterRange:o}}}}function Zn(t=[],e=[],{includeUnnamedChildren:r=!1}={}){return function(n,i){if(t.length>0&&e.length>0)throw new Error("Cannot have both exclusions and inclusions.");let o=r?i.children:i.namedChildren,s=new Set(t),l=new Set(e);return o=o.filter(u=>s.size>0?!s.has(u.type):l.size>0?l.has(u.type):!0),Y5(n,o[0],o[o.length-1])}}function dA(...t){return function(e,r){let n=r.nextSibling,i=n?.nextSibling,o;return n&&(t.includes(n.type)?i?o=sn(r.endPosition,i.startPosition):o=sn(r.endPosition,n.endPosition):o=sn(r.endPosition,n.startPosition)),{...Qn(e,r),context:{trailingDelimiterRange:o}}}}function X5(t,e){let r=t.nextSibling;for(;r!=null;){if(!e(r))return r;r=r.nextSibling}return r}function J5(t,e){let r=t.previousSibling;for(;r!=null;){if(!e(r))return r;r=r.previousSibling}return r}function Go(t,e,r=Bt,n=Bt){return(i,o)=>{let s,l,u=r(o),f=n(o),d=J5(u,t),h=X5(f,t);d!=null&&(s=sn(d.endPosition,u.startPosition)),h!=null&&(l=sn(f.endPosition,h.startPosition));let g=e9(i,s,l,e);return{selection:new Te(new se(u.startPosition.row,u.startPosition.column),new se(f.endPosition.row,f.endPosition.column)),context:{containingListDelimiter:g,leadingDelimiterRange:s,trailingDelimiterRange:l}}}}function e9(t,e,r,n){let{document:i}=t,o=[r!=null?i.getText(r):n,e!=null?i.getText(e):n];return Vx(o,"length")}function mA(t,e){if(t.length===1)return!0;let r=!1,n=t.filter(({name:u})=>u.endsWith(".start")).map(({range:{end:u}})=>u).sort((u,f)=>u.compareTo(f)).at(-1),i=t.filter(({name:u})=>u.endsWith(".end")).map(({range:{start:u}})=>u).sort((u,f)=>u.compareTo(f)).at(0);n!=null&&i!=null&&n.isAfter(i)&&(nt(e,"TreeSitterQuery.checkCaptures.badOrder",`Start capture must be before end capture: ${t}`),r=!0);let o=t.filter(({name:u})=>u.endsWith(".start")).length,s=t.filter(({name:u})=>u.endsWith(".end")).length,l=t.length-o-s;return l>0&&(o>0||s>0)&&(nt(e,"TreeSitterQuery.checkCaptures.mixRegularStartEnd",`Please do not mix regular captures and start/end captures: ${t.map(({name:u,range:f})=>u+" "+f.toString())}`),r=!0),l>1&&(nt(e,"TreeSitterQuery.checkCaptures.duplicate",`A capture with the same name may only appear once in a single pattern: ${t.map(({name:u,range:f})=>u+" "+f.toString())}`),r=!0),!r}function hA(t){let e=t;for(;e!=null;){if(e.hasError)return!0;e=e.parent}return!1}var Ne;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{let o={};for(let s of i)o[s]=s;return o},t.getValidEnumValues=i=>{let o=t.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),s={};for(let l of o)s[l]=i[l];return t.objectValues(s)},t.objectValues=i=>t.objectKeys(i).map(function(o){return i[o]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let o=[];for(let s in i)Object.prototype.hasOwnProperty.call(i,s)&&o.push(s);return o},t.find=(i,o)=>{for(let s of i)if(o(s))return s},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,o=" | "){return i.map(s=>typeof s=="string"?`'${s}'`:s).join(o)}t.joinValues=n,t.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(Ne||(Ne={}));var dS;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(dS||(dS={}));var X=Ne.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),lo=t=>{switch(typeof t){case"undefined":return X.undefined;case"string":return X.string;case"number":return isNaN(t)?X.nan:X.number;case"boolean":return X.boolean;case"function":return X.function;case"bigint":return X.bigint;case"symbol":return X.symbol;case"object":return Array.isArray(t)?X.array:t===null?X.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?X.promise:typeof Map<"u"&&t instanceof Map?X.map:typeof Set<"u"&&t instanceof Set?X.set:typeof Date<"u"&&t instanceof Date?X.date:X.object;default:return X.unknown}},G=Ne.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),t9=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),Lr=class extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let r=e||function(o){return o.message},n={_errors:[]},i=o=>{for(let s of o.issues)if(s.code==="invalid_union")s.unionErrors.map(i);else if(s.code==="invalid_return_type")i(s.returnTypeError);else if(s.code==="invalid_arguments")i(s.argumentsError);else if(s.path.length===0)n._errors.push(r(s));else{let l=n,u=0;for(;u<s.path.length;){let f=s.path[u];u===s.path.length-1?(l[f]=l[f]||{_errors:[]},l[f]._errors.push(r(s))):l[f]=l[f]||{_errors:[]},l=l[f],u++}}};return i(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ne.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};Lr.create=t=>new Lr(t);var xl=(t,e)=>{let r;switch(t.code){case G.invalid_type:t.received===X.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case G.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,Ne.jsonStringifyReplacer)}`;break;case G.unrecognized_keys:r=`Unrecognized key(s) in object: ${Ne.joinValues(t.keys,", ")}`;break;case G.invalid_union:r="Invalid input";break;case G.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Ne.joinValues(t.options)}`;break;case G.invalid_enum_value:r=`Invalid enum value. Expected ${Ne.joinValues(t.options)}, received '${t.received}'`;break;case G.invalid_arguments:r="Invalid function arguments";break;case G.invalid_return_type:r="Invalid function return type";break;case G.invalid_date:r="Invalid date";break;case G.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:Ne.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case G.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case G.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case G.custom:r="Invalid input";break;case G.invalid_intersection_types:r="Intersection results could not be merged";break;case G.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case G.not_finite:r="Number must be finite";break;default:r=e.defaultError,Ne.assertNever(t)}return{message:r}},xA=xl;function r9(t){xA=t}function am(){return xA}var sm=t=>{let{data:e,path:r,errorMaps:n,issueData:i}=t,o=[...r,...i.path||[]],s={...i,path:o},l="",u=n.filter(f=>!!f).slice().reverse();for(let f of u)l=f(s,{data:e,defaultError:l}).message;return{...i,path:o,message:i.message||l}},n9=[];function ee(t,e){let r=sm({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,am(),xl].filter(n=>!!n)});t.common.issues.push(r)}var $t=class t{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let i of r){if(i.status==="aborted")return ye;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let i of r)n.push({key:await i.key,value:await i.value});return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let i of r){let{key:o,value:s}=i;if(o.status==="aborted"||s.status==="aborted")return ye;o.status==="dirty"&&e.dirty(),s.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof s.value<"u"||i.alwaysSet)&&(n[o.value]=s.value)}return{status:e.value,value:n}}},ye=Object.freeze({status:"aborted"}),TA=t=>({status:"dirty",value:t}),rr=t=>({status:"valid",value:t}),mS=t=>t.status==="aborted",hS=t=>t.status==="dirty",Tl=t=>t.status==="valid",cm=t=>typeof Promise<"u"&&t instanceof Promise,ce;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(ce||(ce={}));var cn=class{constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},gA=(t,e)=>{if(Tl(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new Lr(t.common.issues);return this._error=r,this._error}}};function Se(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(s,l)=>s.code!=="invalid_type"?{message:l.defaultError}:typeof l.data>"u"?{message:n??l.defaultError}:{message:r??l.defaultError},description:i}}var ve=class{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return lo(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:lo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new $t,ctx:{common:e.parent.common,data:e.data,parsedType:lo(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(cm(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;let i={common:{issues:[],async:(n=r?.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:lo(e)},o=this._parseSync({data:e,path:i.path,parent:i});return gA(i,o)}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:lo(e)},i=this._parse({data:e,path:n.path,parent:n}),o=await(cm(i)?i:Promise.resolve(i));return gA(n,o)}refine(e,r){let n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,o)=>{let s=e(i),l=()=>o.addIssue({code:G.custom,...n(i)});return typeof Promise<"u"&&s instanceof Promise?s.then(u=>u?!0:(l(),!1)):s?!0:(l(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new Ur({schema:this,typeName:fe.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Mn.create(this,this._def)}nullable(){return Ai.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Pi.create(this,this._def)}promise(){return fo.create(this,this._def)}or(e){return ea.create([this,e],this._def)}and(e){return ta.create(this,e,this._def)}transform(e){return new Ur({...Se(this._def),schema:this,typeName:fe.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new aa({...Se(this._def),innerType:this,defaultValue:r,typeName:fe.ZodDefault})}brand(){return new fm({typeName:fe.ZodBranded,type:this,...Se(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new Ms({...Se(this._def),innerType:this,catchValue:r,typeName:fe.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return Sl.create(this,e)}readonly(){return As.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},i9=/^c[^\s-]{8,}$/i,o9=/^[a-z][a-z0-9]*$/,a9=/^[0-9A-HJKMNP-TV-Z]{26}$/,s9=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,c9=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,l9="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",fS,u9=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,p9=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,f9=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function d9(t,e){return!!((e==="v4"||!e)&&u9.test(t)||(e==="v6"||!e)&&p9.test(t))}var uo=class t extends ve{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==X.string){let o=this._getOrReturnCtx(e);return ee(o,{code:G.invalid_type,expected:X.string,received:o.parsedType}),ye}let n=new $t,i;for(let o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(i=this._getOrReturnCtx(e,i),ee(i,{code:G.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="max")e.data.length>o.value&&(i=this._getOrReturnCtx(e,i),ee(i,{code:G.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if(o.kind==="length"){let s=e.data.length>o.value,l=e.data.length<o.value;(s||l)&&(i=this._getOrReturnCtx(e,i),s?ee(i,{code:G.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):l&&ee(i,{code:G.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),n.dirty())}else if(o.kind==="email")c9.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"email",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="emoji")fS||(fS=new RegExp(l9,"u")),fS.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"emoji",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="uuid")s9.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"uuid",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid")i9.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"cuid",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="cuid2")o9.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"cuid2",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="ulid")a9.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"ulid",code:G.invalid_string,message:o.message}),n.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),ee(i,{validation:"url",code:G.invalid_string,message:o.message}),n.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"regex",code:G.invalid_string,message:o.message}),n.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(e,i),ee(i,{code:G.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),n.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(i=this._getOrReturnCtx(e,i),ee(i,{code:G.invalid_string,validation:{startsWith:o.value},message:o.message}),n.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(i=this._getOrReturnCtx(e,i),ee(i,{code:G.invalid_string,validation:{endsWith:o.value},message:o.message}),n.dirty()):o.kind==="datetime"?f9(o).test(e.data)||(i=this._getOrReturnCtx(e,i),ee(i,{code:G.invalid_string,validation:"datetime",message:o.message}),n.dirty()):o.kind==="ip"?d9(e.data,o.version)||(i=this._getOrReturnCtx(e,i),ee(i,{validation:"ip",code:G.invalid_string,message:o.message}),n.dirty()):Ne.assertNever(o);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(i=>e.test(i),{validation:r,code:G.invalid_string,...ce.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ce.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ce.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ce.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ce.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ce.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ce.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ce.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ce.errToObj(e)})}datetime(e){var r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,...ce.errToObj(e?.message)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...ce.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...ce.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...ce.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...ce.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...ce.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...ce.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...ce.errToObj(r)})}nonempty(e){return this.min(1,ce.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};uo.create=t=>{var e;return new uo({checks:[],typeName:fe.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Se(t)})};function m9(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,o=parseInt(t.toFixed(i).replace(".","")),s=parseInt(e.toFixed(i).replace(".",""));return o%s/Math.pow(10,i)}var Ko=class t extends ve{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==X.number){let o=this._getOrReturnCtx(e);return ee(o,{code:G.invalid_type,expected:X.number,received:o.parsedType}),ye}let n,i=new $t;for(let o of this._def.checks)o.kind==="int"?Ne.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),ee(n,{code:G.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),ee(n,{code:G.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),ee(n,{code:G.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?m9(e.data,o.value)!==0&&(n=this._getOrReturnCtx(e,n),ee(n,{code:G.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),ee(n,{code:G.not_finite,message:o.message}),i.dirty()):Ne.assertNever(o);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,ce.toString(r))}gt(e,r){return this.setLimit("min",e,!1,ce.toString(r))}lte(e,r){return this.setLimit("max",e,!0,ce.toString(r))}lt(e,r){return this.setLimit("max",e,!1,ce.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:ce.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ce.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ce.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ce.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ce.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ce.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:ce.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:ce.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ce.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ce.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Ne.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};Ko.create=t=>new Ko({checks:[],typeName:fe.ZodNumber,coerce:t?.coerce||!1,...Se(t)});var Qo=class t extends ve{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==X.bigint){let o=this._getOrReturnCtx(e);return ee(o,{code:G.invalid_type,expected:X.bigint,received:o.parsedType}),ye}let n,i=new $t;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(n=this._getOrReturnCtx(e,n),ee(n,{code:G.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(n=this._getOrReturnCtx(e,n),ee(n,{code:G.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),ee(n,{code:G.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):Ne.assertNever(o);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,ce.toString(r))}gt(e,r){return this.setLimit("min",e,!1,ce.toString(r))}lte(e,r){return this.setLimit("max",e,!0,ce.toString(r))}lt(e,r){return this.setLimit("max",e,!1,ce.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:ce.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ce.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ce.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ce.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ce.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:ce.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};Qo.create=t=>{var e;return new Qo({checks:[],typeName:fe.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...Se(t)})};var Zo=class extends ve{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==X.boolean){let n=this._getOrReturnCtx(e);return ee(n,{code:G.invalid_type,expected:X.boolean,received:n.parsedType}),ye}return rr(e.data)}};Zo.create=t=>new Zo({typeName:fe.ZodBoolean,coerce:t?.coerce||!1,...Se(t)});var Yo=class t extends ve{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==X.date){let o=this._getOrReturnCtx(e);return ee(o,{code:G.invalid_type,expected:X.date,received:o.parsedType}),ye}if(isNaN(e.data.getTime())){let o=this._getOrReturnCtx(e);return ee(o,{code:G.invalid_date}),ye}let n=new $t,i;for(let o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(i=this._getOrReturnCtx(e,i),ee(i,{code:G.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),n.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(i=this._getOrReturnCtx(e,i),ee(i,{code:G.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),n.dirty()):Ne.assertNever(o);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:ce.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:ce.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};Yo.create=t=>new Yo({checks:[],coerce:t?.coerce||!1,typeName:fe.ZodDate,...Se(t)});var _s=class extends ve{_parse(e){if(this._getType(e)!==X.symbol){let n=this._getOrReturnCtx(e);return ee(n,{code:G.invalid_type,expected:X.symbol,received:n.parsedType}),ye}return rr(e.data)}};_s.create=t=>new _s({typeName:fe.ZodSymbol,...Se(t)});var Xo=class extends ve{_parse(e){if(this._getType(e)!==X.undefined){let n=this._getOrReturnCtx(e);return ee(n,{code:G.invalid_type,expected:X.undefined,received:n.parsedType}),ye}return rr(e.data)}};Xo.create=t=>new Xo({typeName:fe.ZodUndefined,...Se(t)});var Jo=class extends ve{_parse(e){if(this._getType(e)!==X.null){let n=this._getOrReturnCtx(e);return ee(n,{code:G.invalid_type,expected:X.null,received:n.parsedType}),ye}return rr(e.data)}};Jo.create=t=>new Jo({typeName:fe.ZodNull,...Se(t)});var po=class extends ve{constructor(){super(...arguments),this._any=!0}_parse(e){return rr(e.data)}};po.create=t=>new po({typeName:fe.ZodAny,...Se(t)});var Mi=class extends ve{constructor(){super(...arguments),this._unknown=!0}_parse(e){return rr(e.data)}};Mi.create=t=>new Mi({typeName:fe.ZodUnknown,...Se(t)});var Pn=class extends ve{_parse(e){let r=this._getOrReturnCtx(e);return ee(r,{code:G.invalid_type,expected:X.never,received:r.parsedType}),ye}};Pn.create=t=>new Pn({typeName:fe.ZodNever,...Se(t)});var Es=class extends ve{_parse(e){if(this._getType(e)!==X.undefined){let n=this._getOrReturnCtx(e);return ee(n,{code:G.invalid_type,expected:X.void,received:n.parsedType}),ye}return rr(e.data)}};Es.create=t=>new Es({typeName:fe.ZodVoid,...Se(t)});var Pi=class t extends ve{_parse(e){let{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==X.array)return ee(r,{code:G.invalid_type,expected:X.array,received:r.parsedType}),ye;if(i.exactLength!==null){let s=r.data.length>i.exactLength.value,l=r.data.length<i.exactLength.value;(s||l)&&(ee(r,{code:s?G.too_big:G.too_small,minimum:l?i.exactLength.value:void 0,maximum:s?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(ee(r,{code:G.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(ee(r,{code:G.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((s,l)=>i.type._parseAsync(new cn(r,s,r.path,l)))).then(s=>$t.mergeArray(n,s));let o=[...r.data].map((s,l)=>i.type._parseSync(new cn(r,s,r.path,l)));return $t.mergeArray(n,o)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:ce.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:ce.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:ce.toString(r)}})}nonempty(e){return this.min(1,e)}};Pi.create=(t,e)=>new Pi({type:t,minLength:null,maxLength:null,exactLength:null,typeName:fe.ZodArray,...Se(e)});function ws(t){if(t instanceof Sr){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=Mn.create(ws(n))}return new Sr({...t._def,shape:()=>e})}else return t instanceof Pi?new Pi({...t._def,type:ws(t.element)}):t instanceof Mn?Mn.create(ws(t.unwrap())):t instanceof Ai?Ai.create(ws(t.unwrap())):t instanceof Yn?Yn.create(t.items.map(e=>ws(e))):t}var Sr=class t extends ve{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=Ne.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==X.object){let f=this._getOrReturnCtx(e);return ee(f,{code:G.invalid_type,expected:X.object,received:f.parsedType}),ye}let{status:n,ctx:i}=this._processInputParams(e),{shape:o,keys:s}=this._getCached(),l=[];if(!(this._def.catchall instanceof Pn&&this._def.unknownKeys==="strip"))for(let f in i.data)s.includes(f)||l.push(f);let u=[];for(let f of s){let d=o[f],h=i.data[f];u.push({key:{status:"valid",value:f},value:d._parse(new cn(i,h,i.path,f)),alwaysSet:f in i.data})}if(this._def.catchall instanceof Pn){let f=this._def.unknownKeys;if(f==="passthrough")for(let d of l)u.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(f==="strict")l.length>0&&(ee(i,{code:G.unrecognized_keys,keys:l}),n.dirty());else if(f!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let f=this._def.catchall;for(let d of l){let h=i.data[d];u.push({key:{status:"valid",value:d},value:f._parse(new cn(i,h,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let f=[];for(let d of u){let h=await d.key;f.push({key:h,value:await d.value,alwaysSet:d.alwaysSet})}return f}).then(f=>$t.mergeObjectSync(n,f)):$t.mergeObjectSync(n,u)}get shape(){return this._def.shape()}strict(e){return ce.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var i,o,s,l;let u=(s=(o=(i=this._def).errorMap)===null||o===void 0?void 0:o.call(i,r,n).message)!==null&&s!==void 0?s:n.defaultError;return r.code==="unrecognized_keys"?{message:(l=ce.errToObj(e).message)!==null&&l!==void 0?l:u}:{message:u}}}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:fe.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};return Ne.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new t({...this._def,shape:()=>r})}omit(e){let r={};return Ne.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new t({...this._def,shape:()=>r})}deepPartial(){return ws(this)}partial(e){let r={};return Ne.objectKeys(this.shape).forEach(n=>{let i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}),new t({...this._def,shape:()=>r})}required(e){let r={};return Ne.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let o=this.shape[n];for(;o instanceof Mn;)o=o._def.innerType;r[n]=o}}),new t({...this._def,shape:()=>r})}keyof(){return SA(Ne.objectKeys(this.shape))}};Sr.create=(t,e)=>new Sr({shape:()=>t,unknownKeys:"strip",catchall:Pn.create(),typeName:fe.ZodObject,...Se(e)});Sr.strictCreate=(t,e)=>new Sr({shape:()=>t,unknownKeys:"strict",catchall:Pn.create(),typeName:fe.ZodObject,...Se(e)});Sr.lazycreate=(t,e)=>new Sr({shape:t,unknownKeys:"strip",catchall:Pn.create(),typeName:fe.ZodObject,...Se(e)});var ea=class extends ve{_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function i(o){for(let l of o)if(l.result.status==="valid")return l.result;for(let l of o)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;let s=o.map(l=>new Lr(l.ctx.common.issues));return ee(r,{code:G.invalid_union,unionErrors:s}),ye}if(r.common.async)return Promise.all(n.map(async o=>{let s={...r,common:{...r.common,issues:[]},parent:null};return{result:await o._parseAsync({data:r.data,path:r.path,parent:s}),ctx:s}})).then(i);{let o,s=[];for(let u of n){let f={...r,common:{...r.common,issues:[]},parent:null},d=u._parseSync({data:r.data,path:r.path,parent:f});if(d.status==="valid")return d;d.status==="dirty"&&!o&&(o={result:d,ctx:f}),f.common.issues.length&&s.push(f.common.issues)}if(o)return r.common.issues.push(...o.ctx.common.issues),o.result;let l=s.map(u=>new Lr(u));return ee(r,{code:G.invalid_union,unionErrors:l}),ye}}get options(){return this._def.options}};ea.create=(t,e)=>new ea({options:t,typeName:fe.ZodUnion,...Se(e)});var om=t=>t instanceof ra?om(t.schema):t instanceof Ur?om(t.innerType()):t instanceof na?[t.value]:t instanceof ia?t.options:t instanceof oa?Object.keys(t.enum):t instanceof aa?om(t._def.innerType):t instanceof Xo?[void 0]:t instanceof Jo?[null]:null,lm=class t extends ve{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==X.object)return ee(r,{code:G.invalid_type,expected:X.object,received:r.parsedType}),ye;let n=this.discriminator,i=r.data[n],o=this.optionsMap.get(i);return o?r.common.async?o._parseAsync({data:r.data,path:r.path,parent:r}):o._parseSync({data:r.data,path:r.path,parent:r}):(ee(r,{code:G.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),ye)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let i=new Map;for(let o of r){let s=om(o.shape[e]);if(!s)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let l of s){if(i.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);i.set(l,o)}}return new t({typeName:fe.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...Se(n)})}};function gS(t,e){let r=lo(t),n=lo(e);if(t===e)return{valid:!0,data:t};if(r===X.object&&n===X.object){let i=Ne.objectKeys(e),o=Ne.objectKeys(t).filter(l=>i.indexOf(l)!==-1),s={...t,...e};for(let l of o){let u=gS(t[l],e[l]);if(!u.valid)return{valid:!1};s[l]=u.data}return{valid:!0,data:s}}else if(r===X.array&&n===X.array){if(t.length!==e.length)return{valid:!1};let i=[];for(let o=0;o<t.length;o++){let s=t[o],l=e[o],u=gS(s,l);if(!u.valid)return{valid:!1};i.push(u.data)}return{valid:!0,data:i}}else return r===X.date&&n===X.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var ta=class extends ve{_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=(o,s)=>{if(mS(o)||mS(s))return ye;let l=gS(o.value,s.value);return l.valid?((hS(o)||hS(s))&&r.dirty(),{status:r.value,value:l.data}):(ee(n,{code:G.invalid_intersection_types}),ye)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([o,s])=>i(o,s)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};ta.create=(t,e,r)=>new ta({left:t,right:e,typeName:fe.ZodIntersection,...Se(r)});var Yn=class t extends ve{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==X.array)return ee(n,{code:G.invalid_type,expected:X.array,received:n.parsedType}),ye;if(n.data.length<this._def.items.length)return ee(n,{code:G.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ye;!this._def.rest&&n.data.length>this._def.items.length&&(ee(n,{code:G.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let o=[...n.data].map((s,l)=>{let u=this._def.items[l]||this._def.rest;return u?u._parse(new cn(n,s,n.path,l)):null}).filter(s=>!!s);return n.common.async?Promise.all(o).then(s=>$t.mergeArray(r,s)):$t.mergeArray(r,o)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};Yn.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Yn({items:t,typeName:fe.ZodTuple,rest:null,...Se(e)})};var um=class t extends ve{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==X.object)return ee(n,{code:G.invalid_type,expected:X.object,received:n.parsedType}),ye;let i=[],o=this._def.keyType,s=this._def.valueType;for(let l in n.data)i.push({key:o._parse(new cn(n,l,n.path,l)),value:s._parse(new cn(n,n.data[l],n.path,l))});return n.common.async?$t.mergeObjectAsync(r,i):$t.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof ve?new t({keyType:e,valueType:r,typeName:fe.ZodRecord,...Se(n)}):new t({keyType:uo.create(),valueType:e,typeName:fe.ZodRecord,...Se(r)})}},Rs=class extends ve{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==X.map)return ee(n,{code:G.invalid_type,expected:X.map,received:n.parsedType}),ye;let i=this._def.keyType,o=this._def.valueType,s=[...n.data.entries()].map(([l,u],f)=>({key:i._parse(new cn(n,l,n.path,[f,"key"])),value:o._parse(new cn(n,u,n.path,[f,"value"]))}));if(n.common.async){let l=new Map;return Promise.resolve().then(async()=>{for(let u of s){let f=await u.key,d=await u.value;if(f.status==="aborted"||d.status==="aborted")return ye;(f.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(f.value,d.value)}return{status:r.value,value:l}})}else{let l=new Map;for(let u of s){let f=u.key,d=u.value;if(f.status==="aborted"||d.status==="aborted")return ye;(f.status==="dirty"||d.status==="dirty")&&r.dirty(),l.set(f.value,d.value)}return{status:r.value,value:l}}}};Rs.create=(t,e,r)=>new Rs({valueType:e,keyType:t,typeName:fe.ZodMap,...Se(r)});var ks=class t extends ve{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==X.set)return ee(n,{code:G.invalid_type,expected:X.set,received:n.parsedType}),ye;let i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(ee(n,{code:G.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(ee(n,{code:G.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());let o=this._def.valueType;function s(u){let f=new Set;for(let d of u){if(d.status==="aborted")return ye;d.status==="dirty"&&r.dirty(),f.add(d.value)}return{status:r.value,value:f}}let l=[...n.data.values()].map((u,f)=>o._parse(new cn(n,u,n.path,f)));return n.common.async?Promise.all(l).then(u=>s(u)):s(l)}min(e,r){return new t({...this._def,minSize:{value:e,message:ce.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:ce.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};ks.create=(t,e)=>new ks({valueType:t,minSize:null,maxSize:null,typeName:fe.ZodSet,...Se(e)});var pm=class t extends ve{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==X.function)return ee(r,{code:G.invalid_type,expected:X.function,received:r.parsedType}),ye;function n(l,u){return sm({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,am(),xl].filter(f=>!!f),issueData:{code:G.invalid_arguments,argumentsError:u}})}function i(l,u){return sm({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,am(),xl].filter(f=>!!f),issueData:{code:G.invalid_return_type,returnTypeError:u}})}let o={errorMap:r.common.contextualErrorMap},s=r.data;if(this._def.returns instanceof fo){let l=this;return rr(async function(...u){let f=new Lr([]),d=await l._def.args.parseAsync(u,o).catch(x=>{throw f.addIssue(n(u,x)),f}),h=await Reflect.apply(s,this,d);return await l._def.returns._def.type.parseAsync(h,o).catch(x=>{throw f.addIssue(i(h,x)),f})})}else{let l=this;return rr(function(...u){let f=l._def.args.safeParse(u,o);if(!f.success)throw new Lr([n(u,f.error)]);let d=Reflect.apply(s,this,f.data),h=l._def.returns.safeParse(d,o);if(!h.success)throw new Lr([i(d,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:Yn.create(e).rest(Mi.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||Yn.create([]).rest(Mi.create()),returns:r||Mi.create(),typeName:fe.ZodFunction,...Se(n)})}},ra=class extends ve{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};ra.create=(t,e)=>new ra({getter:t,typeName:fe.ZodLazy,...Se(e)});var na=class extends ve{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return ee(r,{received:r.data,code:G.invalid_literal,expected:this._def.value}),ye}return{status:"valid",value:e.data}}get value(){return this._def.value}};na.create=(t,e)=>new na({value:t,typeName:fe.ZodLiteral,...Se(e)});function SA(t,e){return new ia({values:t,typeName:fe.ZodEnum,...Se(e)})}var ia=class t extends ve{_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return ee(r,{expected:Ne.joinValues(n),received:r.parsedType,code:G.invalid_type}),ye}if(this._def.values.indexOf(e.data)===-1){let r=this._getOrReturnCtx(e),n=this._def.values;return ee(r,{received:r.data,code:G.invalid_enum_value,options:n}),ye}return rr(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e){return t.create(e)}exclude(e){return t.create(this.options.filter(r=>!e.includes(r)))}};ia.create=SA;var oa=class extends ve{_parse(e){let r=Ne.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==X.string&&n.parsedType!==X.number){let i=Ne.objectValues(r);return ee(n,{expected:Ne.joinValues(i),received:n.parsedType,code:G.invalid_type}),ye}if(r.indexOf(e.data)===-1){let i=Ne.objectValues(r);return ee(n,{received:n.data,code:G.invalid_enum_value,options:i}),ye}return rr(e.data)}get enum(){return this._def.values}};oa.create=(t,e)=>new oa({values:t,typeName:fe.ZodNativeEnum,...Se(e)});var fo=class extends ve{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==X.promise&&r.common.async===!1)return ee(r,{code:G.invalid_type,expected:X.promise,received:r.parsedType}),ye;let n=r.parsedType===X.promise?r.data:Promise.resolve(r.data);return rr(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}};fo.create=(t,e)=>new fo({type:t,typeName:fe.ZodPromise,...Se(e)});var Ur=class extends ve{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===fe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,o={addIssue:s=>{ee(n,s),s.fatal?r.abort():r.dirty()},get path(){return n.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){let s=i.transform(n.data,o);return n.common.issues.length?{status:"dirty",value:n.data}:n.common.async?Promise.resolve(s).then(l=>this._def.schema._parseAsync({data:l,path:n.path,parent:n})):this._def.schema._parseSync({data:s,path:n.path,parent:n})}if(i.type==="refinement"){let s=l=>{let u=i.refinement(l,o);if(n.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){let l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?ye:(l.status==="dirty"&&r.dirty(),s(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?ye:(l.status==="dirty"&&r.dirty(),s(l.value).then(()=>({status:r.value,value:l.value}))))}if(i.type==="transform")if(n.common.async===!1){let s=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Tl(s))return s;let l=i.transform(s.value,o);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(s=>Tl(s)?Promise.resolve(i.transform(s.value,o)).then(l=>({status:r.value,value:l})):s);Ne.assertNever(i)}};Ur.create=(t,e,r)=>new Ur({schema:t,typeName:fe.ZodEffects,effect:e,...Se(r)});Ur.createWithPreprocess=(t,e,r)=>new Ur({schema:e,effect:{type:"preprocess",transform:t},typeName:fe.ZodEffects,...Se(r)});var Mn=class extends ve{_parse(e){return this._getType(e)===X.undefined?rr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Mn.create=(t,e)=>new Mn({innerType:t,typeName:fe.ZodOptional,...Se(e)});var Ai=class extends ve{_parse(e){return this._getType(e)===X.null?rr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Ai.create=(t,e)=>new Ai({innerType:t,typeName:fe.ZodNullable,...Se(e)});var aa=class extends ve{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===X.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};aa.create=(t,e)=>new aa({innerType:t,typeName:fe.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...Se(e)});var Ms=class extends ve{_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return cm(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Lr(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Lr(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};Ms.create=(t,e)=>new Ms({innerType:t,typeName:fe.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...Se(e)});var Ps=class extends ve{_parse(e){if(this._getType(e)!==X.nan){let n=this._getOrReturnCtx(e);return ee(n,{code:G.invalid_type,expected:X.nan,received:n.parsedType}),ye}return{status:"valid",value:e.data}}};Ps.create=t=>new Ps({typeName:fe.ZodNaN,...Se(t)});var h9=Symbol("zod_brand"),fm=class extends ve{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},Sl=class t extends ve{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let o=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?ye:o.status==="dirty"?(r.dirty(),TA(o.value)):this._def.out._parseAsync({data:o.value,path:n.path,parent:n})})();{let i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?ye:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:fe.ZodPipeline})}},As=class extends ve{_parse(e){let r=this._def.innerType._parse(e);return Tl(r)&&(r.value=Object.freeze(r.value)),r}};As.create=(t,e)=>new As({innerType:t,typeName:fe.ZodReadonly,...Se(e)});var vA=(t,e={},r)=>t?po.create().superRefine((n,i)=>{var o,s;if(!t(n)){let l=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,u=(s=(o=l.fatal)!==null&&o!==void 0?o:r)!==null&&s!==void 0?s:!0,f=typeof l=="string"?{message:l}:l;i.addIssue({code:"custom",...f,fatal:u})}}):po.create(),g9={object:Sr.lazycreate},fe;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(fe||(fe={}));var y9=(t,e={message:`Input not instance of ${t.name}`})=>vA(r=>r instanceof t,e),bA=uo.create,wA=Ko.create,x9=Ps.create,T9=Qo.create,_A=Zo.create,S9=Yo.create,v9=_s.create,b9=Xo.create,w9=Jo.create,_9=po.create,E9=Mi.create,R9=Pn.create,k9=Es.create,M9=Pi.create,P9=Sr.create,A9=Sr.strictCreate,D9=ea.create,I9=lm.create,F9=ta.create,C9=Yn.create,N9=um.create,O9=Rs.create,L9=ks.create,U9=pm.create,B9=ra.create,V9=na.create,W9=ia.create,H9=oa.create,$9=fo.create,yA=Ur.create,j9=Mn.create,q9=Ai.create,z9=Ur.createWithPreprocess,G9=Sl.create,K9=()=>bA().optional(),Q9=()=>wA().optional(),Z9=()=>_A().optional(),Y9={string:t=>uo.create({...t,coerce:!0}),number:t=>Ko.create({...t,coerce:!0}),boolean:t=>Zo.create({...t,coerce:!0}),bigint:t=>Qo.create({...t,coerce:!0}),date:t=>Yo.create({...t,coerce:!0})},X9=ye,He=Object.freeze({__proto__:null,defaultErrorMap:xl,setErrorMap:r9,getErrorMap:am,makeIssue:sm,EMPTY_PATH:n9,addIssueToContext:ee,ParseStatus:$t,INVALID:ye,DIRTY:TA,OK:rr,isAborted:mS,isDirty:hS,isValid:Tl,isAsync:cm,get util(){return Ne},get objectUtil(){return dS},ZodParsedType:X,getParsedType:lo,ZodType:ve,ZodString:uo,ZodNumber:Ko,ZodBigInt:Qo,ZodBoolean:Zo,ZodDate:Yo,ZodSymbol:_s,ZodUndefined:Xo,ZodNull:Jo,ZodAny:po,ZodUnknown:Mi,ZodNever:Pn,ZodVoid:Es,ZodArray:Pi,ZodObject:Sr,ZodUnion:ea,ZodDiscriminatedUnion:lm,ZodIntersection:ta,ZodTuple:Yn,ZodRecord:um,ZodMap:Rs,ZodSet:ks,ZodFunction:pm,ZodLazy:ra,ZodLiteral:na,ZodEnum:ia,ZodNativeEnum:oa,ZodPromise:fo,ZodEffects:Ur,ZodTransformer:Ur,ZodOptional:Mn,ZodNullable:Ai,ZodDefault:aa,ZodCatch:Ms,ZodNaN:Ps,BRAND:h9,ZodBranded:fm,ZodPipeline:Sl,ZodReadonly:As,custom:vA,Schema:ve,ZodSchema:ve,late:g9,get ZodFirstPartyTypeKind(){return fe},coerce:Y9,any:_9,array:M9,bigint:T9,boolean:_A,date:S9,discriminatedUnion:I9,effect:yA,enum:W9,function:U9,instanceof:y9,intersection:F9,lazy:B9,literal:V9,map:O9,nan:x9,nativeEnum:H9,never:R9,null:w9,nullable:q9,number:wA,object:P9,oboolean:Z9,onumber:Q9,optional:j9,ostring:K9,pipeline:G9,preprocess:z9,promise:$9,record:N9,set:L9,strictObject:A9,string:bA,symbol:v9,transformer:yA,tuple:C9,undefined:b9,union:D9,unknown:E9,void:k9,NEVER:X9,ZodIssueCode:G,quotelessJson:t9,ZodError:Lr});function EA(t){let e=t.operands.map(yS).join(" ");return`(#${t.operator} ${e})`}function yS(t){return t.type==="capture"?`@${t.name}`:t.value}function RA(t,e){return e.errors.filter(r=>!(r.code==="invalid_type"&&r.path.length===2&&(r.path[1]==="name"||r.path[1]==="value"))).map(r=>J9(t,r))}function J9(t,e){if(e.path.length===0)return e.code==="too_small"?"Too few arguments":e.code==="too_big"?"Too many arguments":e.message;let r=e.message;e.code==="invalid_literal"&&e.path[1]==="type"&&(r=e.expected==="capture"?"Capture names must be prefixed with @":"Expected string, but received capture");let n=e.path[0],i=yS(t[n]);return`Error on argument ${n} (\`${i}\`): ${r}`}var nr=class{allowMissingNode(){return!1}createPredicate(e){let r=this.schema.safeParse(e);return r.success?{success:!0,predicate:n=>{try{let i=this.constructAcceptArgs(r.data,n);return this.run(...i)}catch(i){if(i instanceof dm&&this.allowMissingNode())return!0;throw i}}}:{success:!1,errors:RA(e,r.error)}}constructAcceptArgs(e,r){return e.map(n=>{if(n.type==="capture"){let i=r.captures.find(o=>o.name===n.name);if(i==null)throw new dm(n.name);return i}else return n.value})}},dm=class extends Error{constructor(e){super(`Could not find capture ${e}`)}};var xS=He.object({type:He.literal("string"),value:He.string()}),we={node:He.object({type:He.literal("capture"),name:He.string()}),string:xS,integer:xS.transform((t,e)=>{let r=parseInt(t.value);return isNaN(r)?(e.addIssue({code:He.ZodIssueCode.custom,message:"Expected an integer"}),He.NEVER):{type:"integer",value:r}}),boolean:xS.transform((t,e)=>t.value==="true"?{type:"boolean",value:!0}:t.value==="false"?{type:"boolean",value:!1}:(e.addIssue({code:He.ZodIssueCode.custom,message:"Expected true or false"}),He.NEVER))};var TS=class extends nr{constructor(){super(...arguments);this.name="not-type?";this.schema=He.tuple([we.node,we.string]).rest(we.string)}run({node:r},...n){return!n.includes(r.type)}},SS=class extends nr{constructor(){super(...arguments);this.name="not-parent-type?";this.schema=He.tuple([we.node,we.string]).rest(we.string)}run({node:r},...n){return r.parent==null||!n.includes(r.parent.type)}},vS=class extends nr{constructor(){super(...arguments);this.name="is-nth-child?";this.schema=He.tuple([we.node,we.integer])}run({node:r},n){return r.parent?.children.findIndex(i=>i.id===r.id)===n}},bS=class extends nr{constructor(){super(...arguments);this.name="has-multiple-children-of-type?";this.schema=He.tuple([we.node,we.string])}run({node:r},n){return r.children.filter(o=>o.type===n).length>1}},wS=class extends nr{constructor(){super(...arguments);this.name="child-range!";this.schema=He.union([He.tuple([we.node,we.integer]),He.tuple([we.node,we.integer,we.integer]),He.tuple([we.node,we.integer,we.integer,we.boolean]),He.tuple([we.node,we.integer,we.integer,we.boolean,we.boolean])])}run(r,n,i,o,s){let{node:{children:l}}=r;n=n<0?l.length+n:n,i=i??-1,i=i<0?l.length+i:i;let u=l[n],f=l[i];return r.range=sn(o?u.endPosition:u.startPosition,s?f.startPosition:f.endPosition),!0}},_S=class extends nr{constructor(){super(...arguments);this.name="character-range!";this.schema=He.union([He.tuple([we.node,we.integer]),He.tuple([we.node,we.integer,we.integer])])}run(r,n,i){return r.range=new H(r.range.start.translate(void 0,n),r.range.end.translate(void 0,i??0)),!0}},ES=class extends nr{constructor(){super(...arguments);this.name="shrink-to-match!";this.schema=He.tuple([we.node,we.string])}run(r,n){let{document:i,range:o}=r,l=i.getText(o).match(new RegExp(n,"ds"));if(l?.index==null)throw Error(`No match for pattern '${n}'`);let[u,f]=l.indices?.groups?.keep??l.indices[0],d=i.offsetAt(o.start);return r.range=new H(i.positionAt(d+u),i.positionAt(d+f)),!0}},RS=class extends nr{constructor(){super(...arguments);this.name="trim-end!";this.schema=He.tuple([we.node])}run(r){let{document:n,range:i}=r,o=n.getText(i),s=o.length-o.trimEnd().length;return s>0&&(r.range=new H(i.start,IR(n,i.end,-s))),!0}},kS=class extends nr{constructor(){super(...arguments);this.name="allow-multiple!";this.schema=He.tuple([we.node])}allowMissingNode(){return!0}run(r){return r.allowMultiple=!0,!0}},MS=class extends nr{constructor(){super(...arguments);this.name="log!";this.schema=He.tuple([we.node])}run(r){return console.log(`#log!: ${r.name}@${r.range}`),!0}},PS=class extends nr{constructor(){super(...arguments);this.name="insertion-delimiter!";this.schema=He.tuple([we.node,we.string])}run(r,n){return r.insertionDelimiter=n,!0}},AS=class extends nr{constructor(){super(...arguments);this.name="single-or-multi-line-delimiter!";this.schema=He.tuple([we.node,we.node,we.string,we.string])}run(r,n,i,o){return r.insertionDelimiter=n.range.isSingleLine?i:o,!0}},kA=[new MS,new TS,new RS,new SS,new vS,new wS,new _S,new ES,new kS,new PS,new AS,new bS];function MA(t){let e=[],r=[];return t.forEach((n,i)=>{let o=[];n.forEach((s,l)=>{let u=kA.find(({name:d})=>d===s.operator);if(u==null){e.push({patternIdx:i,predicateIdx:l,error:`Unknown predicate operator "${s.operator}"`});return}let f=u.createPredicate(s.operands);if(!f.success){e.push(...f.errors.map(d=>({patternIdx:i,predicateIdx:l,error:d})));return}o.push(f.predicate)}),r.push(o)}),{errors:e,predicates:r}}function PA(t){return t.map(e=>e.name.endsWith(".startOf")?{...e,name:e.name.replace(/\.startOf$/,""),range:e.range.start.toEmptyRange()}:e.name.endsWith(".endOf")?{...e,name:e.name.replace(/\.endOf$/,""),range:e.range.end.toEmptyRange()}:e)}var vl=class t{constructor(e,r,n){this.treeSitter=e;this.query=r;this.patternPredicates=n}static create(e,r,n){let{errors:i,predicates:o}=MA(n.predicates);if(i.length>0){for(let s of i){let l=[`language ${e}`,`pattern ${s.patternIdx}`,`predicate \`${EA(n.predicates[s.patternIdx][s.predicateIdx])}\``].join(", ");nt(I().messages,"TreeSitterQuery.parsePredicates",`Error parsing predicate for ${l}: ${s.error}`)}if(I().runMode==="test")throw new Error("Invalid predicates")}return new t(r,n,o)}matches(e,r,n){return this.query.matches(this.treeSitter.getTree(e).rootNode,{startPosition:r==null?void 0:DA(r),endPosition:n==null?void 0:DA(n)}).map(({pattern:i,captures:o})=>({patternIdx:i,captures:o.map(({name:s,node:l})=>({name:s,node:l,document:e,range:cA(l),insertionDelimiter:void 0,allowMultiple:!1,hasError:()=>hA(l)}))})).filter(i=>this.patternPredicates[i.patternIdx].every(o=>o(i))).map(i=>{let o=Object.entries(Bx(i.captures,({name:s})=>AA(s))).map(([s,l])=>{if(l=PA(l),!mA(l,I().messages)&&I().runMode==="test")throw new Error("Invalid captures");return{name:s,range:l.map(({range:f})=>f).reduce((f,d)=>d.union(f)),allowMultiple:l.some(f=>f.allowMultiple),insertionDelimiter:l.find(f=>f.insertionDelimiter!=null)?.insertionDelimiter,hasError:()=>l.some(f=>f.hasError())}});return{...i,captures:o}})}get captureNames(){return Ti(this.query.captureNames.map(AA))}};function AA(t){return t.replace(/(\.(start|end))?(\.(startOf|endOf))?$/,"")}function DA(t){return{row:t.line,column:t.character}}var FA="_",e8=[FA,...Bo],t8=["prefix","leading","trailing"],r8=["startOf","endOf"],n8=["domain","removal","interior","iteration","iteration.domain"],IA=["start","end","start.startOf","start.endOf","end.startOf","end.endOf"],sa=new Set;for(let t of e8){if(t!==FA){sa.add(t);for(let e of IA)sa.add(`${t}.${e}`)}for(let e of t8){sa.add(`${t}.${e}`);for(let r of r8)sa.add(`${t}.${e}.${r}`)}for(let e of n8){sa.add(`${t}.${e}`);for(let r of IA)sa.add(`${t}.${e}.${r}`)}}var i8=new RegExp("^(?!;;).*@([\\w.]*)","gm");function CA(t,e){let r=e.matchAll(i8),n=[];for(let o of r){let s=o[1];if(!(s.length>1&&!s.includes(".")&&s.startsWith("_"))&&!sa.has(s)){let l=o.input.slice(0,o.index).split(`
`).length;n.push(`${t}(${l}) invalid capture '@${s}'.`)}}if(n.length===0)return;let i=n.join(`
`);if(nt(I().messages,"validateQueryCaptures.invalidCaptureName",i),I().runMode==="test")throw new Error(i)}var mm=class t{constructor(e){this.query=e}static async create(e,r,n,i){let o=await o8(e,r,`${i}.scm`);if(o==null||!await n.loadLanguage(i))return;let s=n.getLanguage(i).query(o),l=vl.create(i,n,s);return new t(l)}getScopeHandler(e){if(this.query.captureNames.includes(e.type))return new zd(this.query,e)}getCaptures(e,r){return this.query.matches(e).map(n=>n.captures.find(({name:i})=>i===r)).filter(n=>n!=null)}};async function o8(t,e,r){let n={[r]:null},i=t.runMode!=="production";for(;Object.values(n).some(o=>o==null);)for(let[o,s]of Object.entries(n)){if(s!=null)continue;let l=await e.readQuery(o);if(l==null){if(o===r)return;if(nt(t.messages,"LanguageDefinition.readQueryFileAndImports.queryNotFound",`Could not find imported query file ${o}`),t.runMode==="test")throw new Error("Invalid import statement");l=""}i&&CA(o,l),n[o]=l,en(l,/^[^\S\r\n]*;;?[^\S\r\n]*(?:import|include)[^\S\r\n]+['"]?([\w|/\\.]+)['"]?[^\S\r\n]*$/gm,u=>{let f=u[1];i&&a8(t,o,f,u[0]),n[f]=n[f]??null})}return Object.values(n).join(`
`)}function a8(t,e,r,n){let i=!1;/[/\\]/g.test(r)&&(nt(t.messages,"LanguageDefinition.readQueryFileAndImports.invalidImport",`Invalid import statement in ${e}: "${n}". Relative import paths not supported`),i=!0);let o=`;; import ${r}`;if(n!==o&&(nt(t.messages,"LanguageDefinition.readQueryFileAndImports.malformedImport",`Malformed import statement in ${e}: "${n}". Import statements must be of the form "${o}"`),i=!0),i&&t.runMode==="test")throw new Error("Invalid import statement")}var NA=Symbol("LANGUAGE_UNDEFINED"),hm=class t{constructor(e,r,n){this.ide=e;this.treeSitter=r;this.treeSitterQueryProvider=n;this.notifier=new Vt;this.languageDefinitions=new Map;this.disposables=[];this.onDidChangeDefinition=this.notifier.registerListener;e.onDidOpenTextDocument(i=>{this.loadLanguage(i.languageId)}),e.onDidChangeVisibleTextEditors(i=>{i.forEach(({document:o})=>this.loadLanguage(o.languageId))}),this.disposables.push(n.onChanges(()=>this.reloadLanguageDefinitions()))}static async create(e,r,n){let i=new t(e,r,n);return await i.loadAllLanguages(),i}async loadAllLanguages(){let e=this.ide.visibleTextEditors.map(({document:r})=>r.languageId);try{await Promise.all(e.map(r=>this.loadLanguage(r)))}catch(r){if(nt(this.ide.messages,"Failed to load language definitions",_n(r)),this.ide.runMode==="test")throw r}}async loadLanguage(e){if(this.languageDefinitions.has(e))return;let r=await mm.create(this.ide,this.treeSitterQueryProvider,this.treeSitter,e)??NA;this.languageDefinitions.set(e,r)}async reloadLanguageDefinitions(){this.languageDefinitions.clear(),await this.loadAllLanguages(),this.notifier.notifyListeners()}get(e){let r=this.languageDefinitions.get(e);if(r==null)throw new Error("Expected language definition entry is missing for languageId "+e);return r===NA?void 0:r}getNodeAtLocation(e,r){return this.treeSitter.getNodeAtLocation(e,r)}dispose(){this.disposables.forEach(e=>e.dispose())}};var gm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}get nestedStages(){return this.nestedStages_==null&&(this.nestedStages_=this.modifier.modifiers.map(this.modifierStageFactory.create)),this.nestedStages_}run(e){for(let r of this.nestedStages)try{return r.run(e)}catch{continue}throw new Error("No modifier could be applied")}};var Ds=class{constructor(e,r){this.modifierStageFactory=e;this.nestedModifier=r;this.suppressErrors=!1}run(e){if(this.shouldModify(e))try{return this.nestedStage.run(e).map(r=>r.withThatTarget(e))}catch(r){if(!this.suppressErrors)throw r}return[e]}get nestedStage(){return this.nestedStage_==null&&(this.nestedStage_=this.modifierStageFactory.create(this.nestedModifier)),this.nestedStage_}},Is=class extends Ds{constructor(e,r){super(e,r.modifier)}shouldModify(e){return!e.hasExplicitScopeType}},bl=class extends Ds{constructor(r,n,i){super(r,n);this.modificationCondition=i}shouldModify(r){return this.modificationCondition(r)}},ym=class extends Ds{shouldModify(e){return!e.hasExplicitScopeType&&!e.isImplicit}},Fs=class extends Ds{constructor(r){super(r,{type:"containingScope",scopeType:{type:"token"}});this.suppressErrors=!0}shouldModify(r){return!r.hasExplicitScopeType&&!r.hasExplicitRange&&r.contentRange.isEmpty}};function OA(t,e){return Object.getPrototypeOf(t).constructor===Object.getPrototypeOf(e).constructor}function Cs(t,e,r,n,i){if(n&&i&&OA(e,r)){let o=e.maybeCreateRichRangeTarget(t,r);if(o!=null)return o}return e.isLine&&r.isLine?new Rn({editor:e.editor,isReversed:t,contentRange:ps(e,r,n,i)}):new Et({editor:e.editor,isReversed:t,hasExplicitRange:!0,contentRange:oo(e,r,n,i),isToken:n&&i&&e.isToken&&r.isToken})}function xm(t,e,r){if(e===r)return e.getTargets(t);let n=e.getTargets(t),i=r.getTargets(t);if(n.length!==1||i.length!==1)throw Error("Scope range targets must be single-target");let[o]=n,[s]=i,l=s.contentRange.start.isAfterOrEqual(o.contentRange.start),[u,f]=l?[o,s]:[s,o];return[Cs(t,u,f,!0,!0)]}function Tm(t,e,r,n){let i=Array.from(t.generateScopes(e,r,"forward",{containment:"required",allowAdjacentScopes:!0,skipAncestorScopes:!0}));switch(i.length){case 0:return;case 1:return i[0];case 2:{let[o,s]=i;return n==="forward"?s:n==="backward"||(t.isPreferredOver?.(o,s)??!1)?o:s}default:throw new Error("Expected no more than 2 scope candidates")}}function Sm(t,e,r=0){let{isReversed:n,editor:i,contentRange:{start:o,end:s}}=t;if(s.isEqual(o)){let f=Tm(e,i,o);return f==null||(r>0&&(f=DS(e,i,f.domain.end,"forward",r,!0)),f==null)?void 0:f.getTargets(n)}let l=DS(e,i,o,"forward",r);if(l==null)return;if(l.domain.contains(s))return l.getTargets(n);let u=DS(e,i,s,"backward",r);if(u!=null)return xm(n,l,u)}function DS(t,e,r,n,i,o=!1){let s=0;for(let l of t.generateScopes(e,r,n,{containment:"required",allowAdjacentScopes:o})){if(s===i)return l;s+=1}}var vm=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let{scopeType:r,ancestorIndex:n=0}=this.modifier,i=this.scopeHandlerFactory.create(r,e.editor.document.languageId);if(i==null)return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e);let o=Sm(e,i,n);if(o==null){if(r.type==="collectionItem")return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e);throw new wt(this.modifier.scopeType.type)}return o}};var bm=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let{scopeType:r}=this.modifier,{editor:n,isReversed:i}=e,o=this.scopeHandlerFactory.create(r,n.document.languageId);if(o==null)return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e);let s;if(e.hasExplicitRange&&(s=LA(o,n,e.contentRange),s.length===1&&s[0].domain.contains(e.contentRange)&&(s=void 0)),s==null)try{s=this.getDefaultIterationRange(o,this.scopeHandlerFactory,e).flatMap(l=>LA(o,n,l))}catch(l){if(!(l instanceof wt))throw l;s=[]}if(s.length===0){if(r.type==="collectionItem")return this.modifierStageFactory.getLegacyScopeStage(this.modifier).run(e);throw new wt(r.type)}return s.flatMap(l=>l.getTargets(i))}getDefaultIterationRange(e,r,n){let i=r.create(e.iterationScopeType,n.editor.document.languageId);if(i==null)throw Error("Could not find iteration scope handler");let o=Sm(n,i);if(o==null)throw new wt(`iteration scope for ${e.scopeType.type}`);return o.map(s=>s.contentRange)}};function LA(t,e,{start:r,end:n}){return Array.from(t.generateScopes(e,r,"forward",{distalPosition:n,skipAncestorScopes:!0,allowAdjacentScopes:t.includeAdjacentInEvery}))}var wm=class{constructor(e){this.modifier=e}run(e){return e.contentText.trim()!==""?[e]:[]}},_m=class{constructor(e){this.modifier=e}run(e){return e.contentText.trim()===""?[e]:[]}};var Em=class{run(){return yd(I()).map(e=>new hd({editor:e.editor,isReversed:e.selection.isReversed,contentRange:e.selection}))}};var Rm=class{constructor(e,r){this.modifierStageFactory=e;this.markStageFactory=r}run(e,{actionFinalStages:r=[],noAutomaticTokenExpansion:n=!1}={}){return new IS(this.modifierStageFactory,this.markStageFactory,e,{actionFinalStages:r,noAutomaticTokenExpansion:n}).run()}},IS=class{constructor(e,r,n,i){this.modifierStageFactory=e;this.markStageFactory=r;this.target=n;this.opts=i}run(){return s8(this.processTarget(this.target))}processTarget(e){switch(e.type){case"list":return e.elements.flatMap(r=>this.processTarget(r));case"range":return this.processRangeTarget(e);case"primitive":case"implicit":return this.processPrimitiveTarget(e)}}processRangeTarget(e){let r=this.processPrimitiveTarget(e.anchor),n=this.processPrimitiveTarget(e.active);return xt(r,n).flatMap(([i,o])=>{if(i==null||o==null)throw new Error("AnchorTargets and activeTargets lengths don't match");switch(e.rangeType){case"continuous":return this.processContinuousRangeTarget(i,o,e);case"vertical":return c8(i,o,e.excludeAnchor,e.excludeActive)}})}processContinuousRangeTarget(e,r,{excludeAnchor:n,excludeActive:i,exclusionScopeType:o}){if(o==null)return[mo(e,r,n,i)];let s=NS(e,r);return[mo(n?UA(this.modifierStageFactory,e,o,s?"backward":"forward"):e,i?UA(this.modifierStageFactory,r,o,s?"forward":"backward"):r,!1,!1)]}processPrimitiveTarget(e){let r,n;e.type==="implicit"?(r=new Em,n=[]):(r=this.markStageFactory.create(e.mark),n=FS(this.modifierStageFactory,e.modifiers));let i=r.run(),o=[...n,...this.opts.actionFinalStages,...this.opts.noAutomaticTokenExpansion?[]:[new Fs(this.modifierStageFactory)]];return CS(o,i)}};function FS(t,e){return e.map(t.create).reverse()}function CS(t,e){return t.forEach(r=>{e=e.flatMap(n=>r.run(n))}),e}function UA(t,e,r,n){return t.create({type:"relativeScope",scopeType:r,direction:n,length:1,offset:1}).run(e)[0]}function NS(t,e){return t.contentRange.start.isAfter(e.contentRange.start)?!0:t.contentRange.start.isBefore(e.contentRange.start)?!1:t.contentRange.end.isAfter(e.contentRange.end)}function s8(t){return Uk(t,(e,r)=>e.isEqual(r),e=>e.contentRange.concise())}function BA(t,e){if(t.editor!==e.editor)throw new Error("Cannot form range between targets in different editors")}function mo(t,e,r=!1,n=!1){BA(t,e);let i=NS(t,e);return Cs(i,i?e:t,i?t:e,!(i?n:r),!(i?r:n))}function c8(t,e,r,n){BA(t,e);let i=NS(t,e),o=i?-1:1,l=(i?t.contentRange.start:t.contentRange.end).line+(r?o:0),f=(i?e.contentRange.start:e.contentRange.end).line-(n?o:0),d=[];for(let h=l;;h+=o){let g=new H(h,t.contentRange.start.character,h,t.contentRange.end.character);if(d.push(new Ue({editor:t.editor,isReversed:t.isReversed,contentRange:g,insertionDelimiter:t.insertionDelimiter})),h===f)return d}}var km=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=this.modifier.modifiers??[{type:"containingScope",scopeType:{type:"line"}}],n=FS(this.modifierStageFactory,r);return CS(n,[e]).map(o=>{let s=this.modifier.type==="extendThroughStartOf";return new gd({editor:e.editor,isReversed:s,inputTarget:e,modifiedTarget:o,isHead:s})})}};var Di=class extends Error{constructor(){super("Scope index out of range"),this.name="OutOfRangeError"}};function VA(t,e,r){return OS(t,e,r),t.slice(e,r+1)}function OS(t,e,r){if(e<0||r>=t.length)throw new Di}var Ns=class{constructor(e,r,n){this.modifierStageFactory=e;this.storedTargets=r;this.modifier=n}run(e){let r=new Fs(this.modifierStageFactory).run(e)[0];switch(this.modifier.type){case"everyScope":return this.handleEveryScope(r);case"ordinalScope":return this.handleOrdinalScope(r,this.modifier);case"relativeScope":return this.handleRelativeScope(r,this.modifier);default:throw Error(`${this.modifier.type} instance scope not supported`)}}handleEveryScope(e){return Array.from(Od(this.getEveryRanges(e),([r,n])=>this.getTargetIterable(e,r,n,"forward")))}handleOrdinalScope(e,{start:r,length:n}){return this.getEveryRanges(e).flatMap(([i,o])=>WA(this.getTargetIterable(e,i,o,r>=0?"forward":"backward"),r>=0?r:-(n+r),n))}handleRelativeScope(e,{direction:r,offset:n,length:i}){return(this.storedTargets.get("instanceReference")??[e]).flatMap(s=>{let{editor:l}=s,u=r==="forward"?new H(n===0?s.contentRange.start:s.contentRange.end,l.document.range.end):new H(l.document.range.start,n===0?s.contentRange.end:s.contentRange.start);return WA(this.getTargetIterable(e,l,u,r),n===0?0:n-1,i)})}getEveryRanges({editor:e}){return this.storedTargets.get("instanceReference")?.map(({editor:r,contentRange:n})=>[r,n])??[[e,e.document.range]]}getTargetIterable(e,r,n,i){let o=Nt(Kn(new RegExp(Cr(e.contentText),"g"),r,n,i),l=>new Ue({contentRange:l,editor:r,isReversed:!1,isToken:!1})),s=l8(e);if(s!=null){let l=this.modifierStageFactory.create({type:"containingScope",scopeType:s});return DP(Nt(o,u=>{try{let f=l.run(u);return f.length===1&&f[0].contentRange.isRangeEqual(u.contentRange)?f[0]:null}catch{return null}}),u=>u!=null)}return o}};function l8(t){return t.isLine?{type:"line"}:t.isToken?{type:"token"}:t.isWord?{type:"word"}:null}function WA(t,e,r){Array.from(hl(e,t));let n=Array.from(hl(r,t));if(n.length<r)throw new Di;return n}var Mm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r;this.containingSurroundingPairIfNoInteriorStage=u8(this.modifierStageFactory)}run(e){return this.containingSurroundingPairIfNoInteriorStage.run(e).flatMap(r=>r.getInterior())}},Pm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r;this.containingSurroundingPairIfNoBoundaryStage=LS(this.modifierStageFactory)}run(e){return this.containingSurroundingPairIfNoBoundaryStage.run(e).flatMap(r=>r.getBoundary())}};function u8(t){return new bl(t,{type:"containingScope",scopeType:{type:"surroundingPair",delimiter:"any"}},e=>e.getInterior()==null)}function LS(t){return new bl(t,{type:"containingScope",scopeType:{type:"surroundingPair",delimiter:"any"}},e=>e.getBoundary()==null)}var VS=t=>e=>t(e)?e:null;function HA(...t){return e=>{let r=e;for(let n of t)if(r=n(r),r==null)return null;return r}}function $A(t,...e){return r=>{let n=r,i=[],o=[...e].reverse();for(let s of o){if(n==null||(n=s(n),n==null))return null;i.push(n),n=n.parent??null}return i.reverse()[t]}}var ca=(...t)=>VS(e=>t.includes(e.type)),US=t=>new se(t.row,t.column),jA=(...t)=>{let e=["(","{","[","<"],r=[")","}","]",">"],n=e.concat(r),i=(s,l)=>s!=null&&l.includes(s.type),o=s=>s!=null&&!i(s,n);return(s,l)=>{let u,{start:f,end:d}=l;if(i(s.parent,t))return i(s,e)?u=s.nextNamedSibling:i(s,r)?u=s.previousNamedSibling:s.type===","?u=d.isBeforeOrEqual(US(s.startPosition))?s.previousNamedSibling:s.nextNamedSibling:u=s,o(u)?u:null;if(i(s,t)){let h=[...s.children],g=h.find(({startPosition:v})=>US(v).isAfterOrEqual(d))??null;if(o(g))return g;h.reverse();let x=h.find(({endPosition:v})=>US(v).isBeforeOrEqual(f))??null;if(o(x))return x}return null}};function Fe(...t){let e=p8(t);return r=>{for(let n of e){let i=f8(r,n);if(i!=null)return i}return null}}function p8(t){return t.map(e=>e.split(".").map(r=>new BS(r)))}function f8(t,e){let r=d8(t,e);!r&&e.length>1&&(r=m8(t,e));let n=null,i;return r!=null&&([n,i]=r),n!=null&&i!=null&&i.fields!=null&&i.fields.forEach(o=>{n=(o.isIndex?n?.namedChild(o.value):n?.childForFieldName(o.value))??null}),n}function d8(t,e){let r=null,n=t;for(let i=e.length-1;i>-1;--i){let o=e[i];if(n==null||!o.typeEquals(n)){if(o.isOptional)continue;return null}(!r||!r[1].isImportant)&&(r=[n,o]),n=n.parent}return r}function m8(t,e){let r=null,n=t;for(let i=0;i<e.length;++i){let o=e[i];if(n==null||!o.typeEquals(n)){if(o.isOptional)continue;return null}if((!r||o.isImportant)&&(r=[n,o]),i+1<e.length){let s=n.namedChildren.filter(l=>e[i+1].typeEquals(l));n=s.length===1?s[0]:null}}return r}var BS=class{constructor(e){this.anyType=!1;this.notType=!1;this.type=e.match(/^[\w*~]+/)[0],this.type==="*"?this.anyType=!0:this.type.startsWith("~")&&(this.type=this.type.slice(1),this.notType=!0),this.isImportant=e.indexOf("!")>-1,this.isOptional=e.indexOf("?")>-1,this.fields=[...e.matchAll(/(?<=\[).+?(?=\])/g)].map(r=>r[0]).map(r=>/\d+/.test(r)?{isIndex:!0,value:Number(r)}:{isIndex:!1,value:r})}typeEquals(e){return this.anyType?!0:this.notType?this.type!==e.type:this.type===e.type}};function Me(t,e=Qn){return function(r,n){let i=t(n,r.selection);return i!=null?[{node:i,selection:e(r.editor,i)}]:null}}function Xn(t,e=Qn){let r=HA(...t);return function(n,i){let o=r(i);return o==null?null:[{node:o,selection:e(n.editor,o)}]}}function Os(t,e=0,r=Qn){return Me($A(e,...t),r)}function St(...t){return Me(Fe(...t))}function Jn(...t){return Me(jA(...t),uA())}function Ls(...t){return Me(Fe(...t),pA)}function ir(t,e=[]){return Me(Fe(...t),fA(...e))}function ln(t,e=[]){return Me(Fe(...t),dA(...e))}function Xe(...t){return(e,r)=>{for(let n of t){let i=n(e,r);if(i!=null)return i}return null}}function qA(t){return(e,r)=>{throw new Error(`Node type '${t}' not supported`)}}function jt(t){return Object.freeze(Object.fromEntries(vi(t).map(e=>{let r=t[e];return Array.isArray(r)?[e,St(...r)]:typeof r=="string"?[e,St(r)]:[e,r]})))}function zA(t,e){let r=t.walk();r.gotoFirstChild();let n=[],i=!0;for(;i;)r.currentFieldName===e&&n.push(r.currentNode),i=r.gotoNextSibling();return n}function h8(t,e){return HS(t,r=>Math.floor(r/2)*2+e)}function Am(t){return h8(Fe("map_lit"),t)}function HS(t,e){return r=>{let n=r.parent;if(n==null||t(n)==null)return null;let i=wl(n),o=i.findIndex(({id:l})=>l===r.id);if(o===-1)return null;let s=e(o);return s===-1?null:i[s]}}function g8(){return HS(t=>t,t=>t)}var wl=t=>zA(t,"value"),WS="~quoting_lit.list_lit!",KA=Fe(WS);function $S(...t){return e=>{let r=KA(e);if(r==null)return null;let n=wl(r)[0];return t.includes(n?.text)?r:null}}function y8(...t){return Me($S(...t))}var QA=$S("defn","defmacro"),GA=Xn([QA,t=>wl(t)[1]]),ZA=$S("if","if-let","when","when-let"),x8=Me(ZA),T8={collectionKey:Me(Am(0)),collectionItem:Xe(Me(Am(0),Go(t=>t.type==="{"||t.type==="}",", ",Bt,Am(1))),Me(g8())),value:Me(Am(1)),argumentOrParameter:Me(HS(Fe(WS),t=>t!==0?t:-1)),functionCall:WS,functionCallee:Xn([KA,t=>wl(t)[0]]),namedFunction:Me(QA),functionName:GA,name:GA,anonymousFunction:Xe(y8("fn"),St("anon_fn_lit")),ifStatement:x8,condition:Xn([ZA,t=>wl(t)[1]])},YA=jt(T8);var S8=["array_creation_expression","implicit_array_creation_expression","implicit_stack_alloc_array_creation_expression","stack_alloc_array_creation_expression"],v8=["implicit_object_creation_expression"],XA=t=>t.children.find(e=>e.type==="initializer_expression")??null,b8=t=>t.childForFieldName("initializer"),w8=(t,e)=>Go(r=>r.type===","||r.type===t||r.type===e,", "),_8={map:Xe(Xn([ca(...v8),XA]),Xn([ca("object_creation_expression"),b8])),collectionKey:Xn([ca("assignment_expression"),t=>t.childForFieldName("left")]),value:ir(["variable_declaration?.variable_declarator[1][0]!","assignment_expression[right]"],["assignment_operator"]),list:Xe(Xn([ca(...S8),XA]),Xn([ca("object_creation_expression"),t=>t.childForFieldName("initializer")]))},E8={..._8,argumentOrParameter:Me(VS(t=>t.parent?.type==="argument_list"||t.type==="parameter"),w8("(",")")),type:ln(["*[type]"]),name:["variable_declaration?.variable_declarator.identifier!","assignment_expression[left]","*[name]"]},JA=jt(E8);var eD=["command","displayed_equation","inline_formula","math_set","block_comment","package_include","class_include","latex_include","biblatex_include","bibtex_include","graphics_include","svg_include","inkscape_include","verbatim_include","import_include","caption","citation","label_definition","label_reference","label_reference_range","label_number","new_command_definition","old_command_definition","let_command_definition","environment_definition","glossary_entry_definition","glossary_entry_reference","acronym_definition","acronym_reference","theorem_definition","color_definition","color_set_definition","color_reference","tikz_library_import"],R8=["curly_group","curly_group_text","curly_group_text_list","curly_group_path","curly_group_path_list","curly_group_command_name","curly_group_key_value","curly_group_glob_pattern","curly_group_impl","brack_group","brack_group_text","brack_group_argc","brack_group_key_value","mixed_group"],rD=["subparagraph","paragraph","subsubsection","subsection","section","chapter","part"],tD=rD.map(t=>`${t}[text]`),k8=rD.map(t=>`${t}[command]`);function jS(t,e){return{selection:new Te(t.document.positionAt(e.startIndex+1),t.document.positionAt(e.endIndex-1)),context:{removalRange:new Te(t.document.positionAt(e.startIndex),t.document.positionAt(e.endIndex))}}}function M8(t,e){let r=e.startIndex,n=e.endIndex,i=e.nextNamedSibling;return i!=null&&i.isNamed&&(n=i.endIndex),{selection:new Te(t.document.positionAt(r),t.document.positionAt(n)),context:{}}}function P8(t,e){let r=e.startIndex,n=e.childForFieldName("label");if(n==null){let i=e.childForFieldName("command");i!=null&&(r=i.endIndex+1)}else r=n.endIndex+1;return{selection:new Te(t.document.positionAt(r),t.document.positionAt(e.endIndex)),context:{leadingDelimiterRange:new H(t.document.positionAt(e.startIndex),t.document.positionAt(r-1))}}}var A8={argumentOrParameter:Xe(Os([Fe(...eD),Fe(...R8)],1,jS),Me(Fe("begin[name]","end[name]",...tD),jS)),functionCall:Xe(Me(Fe(...eD,"begin","end")),Me(Fe(...k8),M8)),name:Xe(Me(Fe(...tD),jS),St("begin[name][text]","end[name][text]")),collectionItem:Me(Fe("enum_item"),P8)},nD=jt(A8);var D8=["=","+=","-=","*=","/=","%=","**=","&=","|=","^=","<<=",">>=",".=","??="],I8={value:ir(["array_element_initializer[1]","assignment_expression[right]","augmented_assignment_expression[right]","return_statement[0]","yield_expression[0]"],D8.concat(["=>"])),collectionKey:ln(["array_element_initializer[0]"],["=>"]),argumentOrParameter:Jn("arguments","formal_parameters")},iD=jt(I8);var F8=["alias","begin_block","end_block","if_modifier","rescue_modifier","undef","unless_modifier","until_modifier","while_modifier"],C8=["array","assignment","begin","binary","break","call","case","case_match","chained_string","character","class","class_variable","complex","conditional","constant","delimited_symbol","element_reference","false","float","for","global_variable","hash","heredoc_beginning","identifier","if","instance_variable","integer","lambda","method","module","next","nil","operator_assignment","parenthesized_statements","range","rational","redo","regex","retry","return","scope_resolution","self","simple_symbol","singleton_class","singleton_method","string","string_array","subshell","super","symbol_array","true","unary","unless","until","while","yield"],N8=["begin_block","begin","block_body","block","body_statement","do_block","do","else","end_block","ensure","heredoc_beginning","interpolation","lambda","method","parenthesized_statements","program","singleton_class","singleton_method","then"],O8=["hash"],L8=["array","string_array","symbol_array"],U8=["=","+=","-=","*=","**=","/=","||=","|=","&&=","&=","%=",">>=","<<=","^="],B8=[":","=>"];function V8(t){if(t.type!=="call")return null;let e=t.childForFieldName("receiver"),r=t.childForFieldName("method"),n=t.childForFieldName("block");return e?.text==="Proc"&&r?.text==="new"||e==null&&r?.text==="lambda"?t:n}var W8={statement:Xe(St(...F8),Os([Fe(...N8),Fe(...C8)],1)),anonymousFunction:Xe(St("lambda","do_block"),Me(V8)),condition:Ls("*[condition]"),argumentOrParameter:Jn("lambda_parameters","method_parameters","block_parameters","argument_list"),collectionKey:ln(["pair[key]"],[":"]),value:ir(["pair[value]","assignment[right]","operator_assignment[right]","return.argument_list!"],U8.concat(B8)),collectionItem:Jn(...O8,...L8)},oD=jt(W8);function qS(){let t=Zn(["else_clause"],[],{includeUnnamedChildren:!0});return function(e,r){let n=t(e,r),i=r.parent;if(i?.type!=="else_clause"){let s=r.childForFieldName("alternative");if(s==null)return n;let{selection:l}=n;return{selection:l,context:{removalRange:new Te(l.start,pS(s.namedChild(0).startPosition))}}}let{selection:o}=n;return{selection:new Te(pS(i.child(0).startPosition),o.end),context:{}}}}function aD(t){let e=qS();return function(r,n){return n.namedChild(0).type===t?e(r,n.namedChild(0)):Qn(r,n)}}var sD=["associated_type","attribute_item","const_item","empty_statement","enum_item","extern_crate_declaration","foreign_mod_item","impl_item","inner_attribute_item","let_declaration","macro_definition","macro_invocation","function_item","function_signature_item","mod_item","static_item","struct_item","trait_item","type_item","union_item","use_declaration","expression_statement"],H8=["source_file","block","declaration_list"];function $8(t){return t.parent?.type==="impl_item"&&t.parent?.childForFieldName("type")?.equals(t)?t:null}function j8(t,e){return{selection:lA(e.children[1],e.lastNamedChild),context:{leadingDelimiterRange:sn(e.children[0].startPosition,e.children[1].startPosition)}}}function q8(t){if(t.type!=="block")return null;let{lastNamedChild:e}=t;if(e==null)return null;if(e.type==="expression_statement"){let r=e.child(0);return r.type==="return_expression"?r.child(1):null}return sD.includes(e.type)?null:e.type==="return_expression"?e.child(1):e}var z8={statement:Os([Fe(...H8),Fe(...sD)],1),condition:Xe(St("while_expression[condition]","if_expression[condition]"),Me(Fe("while_let_expression","if_let_expression"),Zn(["while","if","block"],[],{includeUnnamedChildren:!0})),ir(["*.match_pattern![condition]"],["if"])),collectionItem:Jn("array_expression","tuple_expression","tuple_type"),type:Xe(ir(["let_declaration[type]","parameter[type]","field_declaration[type]","const_item[type]"],[":"]),Me(Fe("constrained_type_parameter[bounds]","where_predicate[bounds]"),j8),ir(["function_item[return_type]"],["->"]),Me($8),St("struct_item","trait_item","impl_item","array_type[element]")),argumentOrParameter:Jn("arguments","parameters","meta_arguments","type_parameters","ordered_field_declaration_list"),collectionKey:Xe(ln(["field_initializer[name]","field_pattern[name]"],[":"])),name:Xe(St("let_declaration.identifier!","parameter.identifier!","function_item[name]","struct_item[name]","enum_item[name]","enum_variant[name]","trait_item[name]","const_item[name]","meta_item.identifier!","let_declaration[pattern]","constrained_type_parameter[left]","where_predicate[left]","field_declaration[name]"),ln(["field_initializer[name]","field_pattern[name]"],[":"])),value:Xe(ir(["let_declaration[value]"],["="]),ir(["field_initializer[value]","field_pattern[pattern]"],[":"]),St("meta_item[value]","const_item[value]"),Me(q8)),attribute:ln(["mutable_specifier","attribute_item"]),branch:Xe(St("match_arm"),Me(Fe("else_clause"),aD("if_expression")),Me(Fe("if_expression"),qS()))},cD=jt(z8);var G8={argumentOrParameter:Jn("arguments","parameters","class_parameters","bindings"),branch:Me(Fe("case_clause"),Zn([],[],{includeUnnamedChildren:!0})),type:ir(["upper_bound[type]","lower_bound[type]","view_bound[type]","context_bound[type]","val_definition[type]","val_declaration[type]","var_definition[type]","var_declaration[type]","type_definition","extends_clause[type]","class_parameter[type]","parameter[type]","function_definition[return_type]","typed_pattern[type]","binding[type]"],[":"]),value:ir(["*[value]","*[default_value]","type_definition[type]"],["="]),condition:Ls("*[condition]")},lD=jt(G8);var K8=["apply_statement","at_rule","charset_statement","debug_statement","each_statement","error_statement","for_statement","forward_statement","function_statement","if_statement","import_statement","include_statement","keyframes_statement","media_statement","mixin_statement","namespace_statement","placeholder","rule_set","supports_statement","use_statement","warn_statement","while_statement"];function pD(t){return[",","(",")"].includes(t.type)||fD(t)}function fD(t){return t.type==="plain_value"&&t.text==="at"}function uD(t){return e=>{(fD(e)||e.type===",")&&(e=e.previousSibling);let r=t(e);for(;r&&!pD(r);)e=r,r=t(r);return e}}function Q8(t,e){return e.type!=="declaration"?null:e.descendantsOfType("unit").map(r=>({node:r,selection:Qn(t.editor,r)}))}var Z8={condition:Ls("condition"),statement:Xe(St(...K8),Me(Fe("attribute_selector"),Zn([],["attribute_name","string_value"]))),argumentOrParameter:Xe(Me(Fe("arguments.*!","parameters.*!"),Go(t=>pD(t),", ",uD(t=>t.previousSibling),uD(t=>t.nextSibling)))),collectionKey:ln(["declaration.property_name!"],[":"]),value:Xe(Me(Fe("declaration"),Zn(["property_name","variable_name"])),Me(Fe("include_statement","namespace_statement"),Zn()),St("return_statement.*!","import_statement.*!","attribute_selector.plain_value!","attribute_selector.string_value!","parameter.default_value!")),unit:Xe(St("integer_value.unit!"),Q8)},zS=jt(Z8);function dD(t,e,r){let n=_l[t];if(n==null)throw new xp(t);let i=n[e];return i==null?qA(e):r?Y8(i):i}var _l={clojure:YA,csharp:JA,css:zS,latex:nD,php:iD,ruby:oD,rust:cD,scala:lD,scss:zS};function Y8(t){return(e,r)=>{let n=t(e,r);return n==null?null:(n=n.flatMap(i=>X8(i.node,od(e,i.selection.selection),t)),n.length>0?n:null)}}function X8(t,e,r){let n=t.parent;for(;n!=null;){let i=n.namedChildren.flatMap(o=>r(e,o)).filter(o=>o!=null);if(i.length>0)return i;n=n.parent}return[]}var Us=class{constructor(e,r){this.languageDefinitions=e;this.modifier=r}run(e){let r=dD(e.editor.document.languageId,this.modifier.scopeType.type,this.modifier.type==="everyScope"),n=this.languageDefinitions.getNodeAtLocation(e.editor.document,e.contentRange);if(n==null)throw new wt(this.modifier.scopeType.type);let i=J8(n,r,{editor:e.editor,selection:new Te(e.contentRange.start,e.contentRange.end)});if(i==null)throw new wt(this.modifier.scopeType.type);return i.map(o=>{let{containingListDelimiter:s,leadingDelimiterRange:l,trailingDelimiterRange:u,removalRange:f,interiorRange:d}=o.context;if(f!=null&&(l!=null||u!=null))throw Error("Removal range is mutually exclusive with leading or trailing delimiter range");let{editor:h,selection:g}=o.selection;return new so({scopeTypeType:this.modifier.scopeType.type,editor:h,isReversed:e.isReversed,contentRange:g,removalRange:f,interiorRange:d,insertionDelimiter:s,leadingDelimiterRange:l,trailingDelimiterRange:u})})}};function J8(t,e,r){let n=t;for(;n!=null;){let i=e(r,n);if(i!=null)return i.map(o=>o.selection).map(o=>({selection:od(r,o.selection),context:o.context}));n=n.parent}return null}function hD(t,e){let r=gD(t,e);for(;r!=null;){if(e7(t,e,r))return{range:r.getInterior()[0].contentRange,boundary:GS(r)};r=t7(t,e.editor,r)}return{range:gl(e.editor,e.contentRange)}}function e7(t,e,r){let{contentRange:n}=e;if(n.isEmpty){let[o,s]=GS(r),l=n.start;if(l.isEqual(o.start)||l.isEqual(s.end))return!1;let u=e.editor.document.lineAt(l);if(l.isEqual(o.end)&&mD(u,l.character)||l.isEqual(s.start)&&mD(u,l.character-1))return!1}else{if(n.isRangeEqual(r.contentRange))return!1;let[o,s]=GS(r);if(n.isRangeEqual(o)||n.isRangeEqual(s))return!1}let i=r7(t,r);return!(i!=null&&r.contentRange.start.isBeforeOrEqual(i.contentRange.start))}function GS(t){return t.getBoundary().map(e=>e.contentRange)}function mD(t,e){return e<t.range.start.character||e>=t.range.end.character||t.text[e].trim()===""}function t7(t,e,r){let n=e.document.offsetAt(r.contentRange.start);if(n===0)return;let i=e.document.positionAt(n-1);return gD(t,new Ue({editor:e,contentRange:new H(i,i),isReversed:!1}))}function gD(t,e){return yD(t,e,{type:"surroundingPair",delimiter:"collectionBoundary",requireStrongContainment:!0})}function r7(t,e){return yD(t,e,{type:"surroundingPair",delimiter:"string",requireStrongContainment:!0})}function yD(t,e,r){let n=t.create({type:"containingScope",scopeType:r}),i=(()=>{try{return n.run(e)}catch{return[]}})();if(i.length>1)throw Error("Expected only one surrounding pair target");return i[0]}function xD(t,e,r){let{document:n}=t,o=n.getText(e).split(/([,(){}<>[\]"'`])|(?<!\\)(\\"|\\'|\\`)/g).filter(f=>f!=null&&f.length>0),s=n7(o),l=[],u=n.offsetAt(e.start);return s.forEach(f=>{if(f.trim().length===0){u+=f.length;return}if(f===TD)l.push({type:"separator",range:new H(n.positionAt(u),n.positionAt(u+f.length))});else{let d=u+(f.length-f.trimStart().length);l.push({type:"item",range:new H(n.positionAt(d),n.positionAt(d+f.trim().length))})}u+=f.length}),r!=null?[{type:"boundary",range:r[0]},...l,{type:"boundary",range:r[1]}]:l}function n7(t){let e=[],r=0,n=null,i=null,o=-1;return t.forEach((s,l)=>{r>0?s===i?--r:s===n&&++r:(KS[s]!=null&&t.indexOf(KS[s],l+1)>-1&&(n=s,i=KS[s],r=1),o<0&&(o=l));let u=s===TD&&r===0;if(u||l===t.length-1){let f=u?l:l+1;e.push(t.slice(o,f).join("")),o=-1,u&&e.push(s)}}),e}var TD=",",KS={"(":")","{":"}","<":">","[":"]",'"':'"',"'":"'","`":"`"};var Dm=class{constructor(e,r,n){this.languageDefinitions=e;this.modifierStageFactory=r;this.modifier=n}run(e){try{return new Us(this.languageDefinitions,this.modifier).run(e)}catch{}return this.modifier.type==="everyScope"?this.getEveryTarget(this.modifierStageFactory,e):[this.getSingleTarget(this.modifierStageFactory,e)]}getEveryTarget(e,r){let n=vD(e,r),i=r.hasExplicitRange?SD(r,n):n;if(i.length===0)throw new wt(this.modifier.scopeType.type);return i.map(o=>this.itemInfoToTarget(r,o))}getSingleTarget(e,r){let n=vD(e,r),i=SD(r,n);if(i.length===0)throw new wt(this.modifier.scopeType.type);let o=i[0],s=i[i.length-1],l={contentRange:o.contentRange.union(s.contentRange),domain:o.domain.union(s.domain),leadingDelimiterRange:o.leadingDelimiterRange,trailingDelimiterRange:s.trailingDelimiterRange},u=l.leadingDelimiterRange!=null&&l.trailingDelimiterRange!=null&&qT(r.editor,l.leadingDelimiterRange)>qT(r.editor,l.trailingDelimiterRange)?l.contentRange.union(l.leadingDelimiterRange):void 0;return this.itemInfoToTarget(r,l,u)}itemInfoToTarget(e,r,n){let i=i7(r.leadingDelimiterRange,r.trailingDelimiterRange);return new so({scopeTypeType:this.modifier.scopeType.type,editor:e.editor,isReversed:e.isReversed,contentRange:r.contentRange,insertionDelimiter:i,leadingDelimiterRange:r.leadingDelimiterRange,trailingDelimiterRange:r.trailingDelimiterRange,removalRange:n})}};function i7(t,e){return t!=null&&!t.isSingleLine||e!=null&&!e.isSingleLine?`,
`:", "}function SD(t,e){return e.filter(r=>r.domain.intersection(t.contentRange)!=null)}function vD(t,e){let{range:r,boundary:n}=hD(t,e);return o7(e.editor,r,n)}function o7(t,e,r){let n=xD(t,e,r),i=[];return n.forEach((o,s)=>{if(o.type==="separator"||o.type==="boundary")return;let l=(()=>{if(n[s-2]?.type==="item")return new H(n[s-2].range.end,o.range.start);if(n[s-1]?.type==="separator")return new H(n[s-1].range.start,o.range.start)})(),u=(()=>{if(n[s+2]?.type==="item")return new H(o.range.end,n[s+2].range.start);if(n[s+1]?.type==="separator")return new H(o.range.end,n[s+1].range.end)})(),f=n[s-1]?.type==="boundary"||n[s-1]?.type==="separator"?n[s-1].range.end:o.range.start,d=n[s+1]?.type==="boundary"||n[s+1]?.type==="separator"?n[s+1].range.start:o.range.end;i.push({contentRange:o.range,leadingDelimiterRange:l,trailingDelimiterRange:u,domain:new H(f,d)})}),i}var Bs={type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:{type:"line"}}},QS={type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:{type:"token"}}};var Im=class extends Error{constructor(e){super(`Target has no ${e} delimiter.`),this.name="NoDelimiterError"}},Fm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){return this.modifierStageFactory.create(QS).run(e).map(r=>{let n=r.getLeadingDelimiterTarget();if(n==null)throw new Im("leading");return n})}},Cm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){return this.modifierStageFactory.create(QS).run(e).map(r=>{let n=r.getTrailingDelimiterTarget();if(n==null)throw new Im("trailing");return n})}};function Nm(t,e,r,n){return OS(e,r,n),r===n?e[r]:Cs(t,e[r],e[n],!0,!0)}function Om(t,e,r){return t.create({type:"everyScope",scopeType:r}).run(e)}var Lm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=Om(this.modifierStageFactory,e,this.modifier.scopeType),n=this.modifier.start+(this.modifier.start<0?r.length:0),i=n+this.modifier.length-1;return this.modifier.isEvery?VA(r,n,i):[Nm(e.isReversed,r,n,i)]}};var Um=class{run(e){let r={editor:e.editor,isReversed:e.isReversed,contentRange:this.getContentRange(e.contentRange)};return[e.isRaw?new ao(r):new Ue({...r,isToken:!1})]}},Bm=class extends Um{getContentRange(e){return e.start.toEmptyRange()}},Vm=class extends Um{getContentRange(e){return e.end.toEmptyRange()}};var Wm=class{constructor(e,r){this.modifierStageFactory=e;this.modifier=r}run(e){let r=this.modifierStageFactory.create(this.modifier.anchor),n=this.modifierStageFactory.create(this.modifier.active),i=r.run(e),o=n.run(e);if(i.length!==1||o.length!==1)throw new Error("Expected single anchor and active target");return[mo(i[0],o[0],this.modifier.excludeAnchor,this.modifier.excludeActive)]}};var Hm=class{constructor(e){this.modifier=e}run(e){return[new ao({editor:e.editor,contentRange:e.contentRange,isReversed:e.isReversed})]}};var $m=class extends Error{constructor(e,r,n){super(`Requested ${e} ${n}s, but ${r} are already selected.`),this.name="TooFewScopesError"}};function bD(t,e,r){let n=Om(t,l7(r),e.scopeType),i=c7(r.contentRange,n);return a7(e,r,n,i)}function a7(t,e,r,n){let i=t.direction==="forward",o=s7(t,e.contentRange,r,i,n),s=i?o+t.length-1:o-t.length+1,l=Math.min(o,s),u=Math.max(o,s);return[Nm(e.isReversed,r,l,u)]}function s7(t,e,r,n,i){let o=t.offset===0;if(i==null){let u=n?r.findIndex(f=>f.contentRange.start.isAfter(e.start)):Ic(r,f=>f.contentRange.start.isBefore(e.start));if(u===-1)throw new Di;return o?u:n?u+t.offset-1:u-t.offset+1}let s=i.start,l=i.end;if(o){let u=l-s+1;if(u>t.length)throw new $m(t.length,u,t.scopeType.type);return n?s:l}return n?l+t.offset:s-t.offset}function c7(t,e){let r=e.map((i,o)=>({index:o,intersection:i.contentRange.intersection(t)})).filter(i=>i.intersection!=null);if(t.isEmpty){if(r.length===0)return;let i=r.at(-1).index;return{start:i,end:i}}let n=r.filter(i=>!i.intersection.isEmpty).map(i=>i.index);if(n.length!==0)return{start:n[0],end:n.at(-1)}}function l7(t){return new Et({editor:t.editor,isReversed:t.isReversed,contentRange:t.contentRange,hasExplicitRange:!1})}var jm=class{constructor(e,r,n){this.modifierStageFactory=e;this.scopeHandlerFactory=r;this.modifier=n}run(e){let r=this.scopeHandlerFactory.create(this.modifier.scopeType,e.editor.document.languageId);if(r==null)return bD(this.modifierStageFactory,this.modifier,e);let n=Array.from(this.modifier.offset===0?u7(r,e,this.modifier):p7(r,e,this.modifier));if(n.length<this.modifier.length)throw new Di;let{isReversed:i}=e;return this.modifier.isEvery?n.flatMap(o=>o.getTargets(i)):xm(i,n[0],n[n.length-1])}};function u7(t,e,r){let{editor:n,contentRange:i}=e,{length:o,direction:s}=r,l=Tm(t,n,s==="forward"?i.start:i.end,s)?.domain;if(l==null)throw new wt(r.scopeType.type);return hl(o,t.generateScopes(n,s==="forward"?l.start:l.end,s,{skipAncestorScopes:!0}))}function p7(t,e,r){let{editor:n,contentRange:i}=e,{length:o,direction:s,offset:l}=r,u=s==="forward"?i.end:i.start,f=i.isEmpty?"disallowed":"disallowedIfStrict";return IP(t.generateScopes(n,u,s,{containment:f,skipAncestorScopes:!0}),l-1,l+o-1)}var qm=class{constructor(e){this.modifier=e}run(e){return e.editor.visibleRanges.map(r=>new Ue({editor:e.editor,isReversed:e.isReversed,contentRange:r}))}};var zm=class{constructor(e,r,n){this.languageDefinitions=e;this.modifierStageFactory=r;this.modifier=n}run(e){let n=this.modifierStageFactory.create({type:this.modifier.type,scopeType:{type:"nonWhitespaceSequence"}}).run(e),i=this.getPairTarget(e);if(i==null)return n;let o=n.flatMap(s=>{let l=s.contentRange.intersection(i.getInterior()[0].contentRange);return l==null||l.isEmpty?[]:[new xr({editor:e.editor,isReversed:e.isReversed,contentRange:l})]});if(o.length===0)throw new wt(this.modifier.scopeType.type);return o}getPairTarget(e){let r=this.modifierStageFactory.create({type:"containingScope",scopeType:{type:"surroundingPair",delimiter:"any",requireStrongContainment:!0}}),n=(()=>{try{return r.run(e)}catch{return[]}})();if(n.length>1)throw Error("Expected only one surrounding pair target");return n[0]}};var Gm=class{constructor(e){this.modifier=e}run(e){if(this.modifier.type==="everyScope")throw new Error(`Every ${this.modifier.type} not yet implemented`);return[new ud({editor:e.editor,isReversed:e.isReversed,contentRange:e.contentRange})]}};var Vs=class{constructor(e,r,n){this.languageDefinitions=e;this.storedTargets=r;this.scopeHandlerFactory=n;this.create=this.create.bind(this)}create(e){switch(e.type){case"startOf":return new Bm;case"endOf":return new Vm;case"extendThroughStartOf":case"extendThroughEndOf":return new km(this,e);case"toRawSelection":return new Hm(e);case"interiorOnly":return new Mm(this,e);case"excludeInterior":return new Pm(this,e);case"leading":return new Fm(this,e);case"trailing":return new Cm(this,e);case"visible":return new qm(e);case"containingScope":return new vm(this,this.scopeHandlerFactory,e);case"everyScope":return e.scopeType.type==="instance"?new Ns(this,this.storedTargets,e):new bm(this,this.scopeHandlerFactory,e);case"ordinalScope":return e.scopeType.type==="instance"?new Ns(this,this.storedTargets,e):new Lm(this,e);case"relativeScope":return e.scopeType.type==="instance"?new Ns(this,this.storedTargets,e):new jm(this,this.scopeHandlerFactory,e);case"keepContentFilter":return new wm(e);case"keepEmptyFilter":return new _m(e);case"cascading":return new gm(this,e);case"modifyIfUntyped":return new Is(this,e);case"range":return new Wm(this,e);case"inferPreviousMark":throw Error(`Unexpected modifier '${e.type}'; it should have been removed during inference`)}}getLegacyScopeStage(e){switch(e.scopeType.type){case"notebookCell":return new Gm(e);case"boundedNonWhitespaceSequence":return new zm(this.languageDefinitions,this,e);case"collectionItem":return new Dm(this.languageDefinitions,this,e);default:return new Us(this.languageDefinitions,e)}}};async function wD(t,e,r){let n=t.registerReplaceEditList(e.document,r.filter(o=>o.isReplace)),i=await e.edit(r);return n(),i}async function Be({rangeUpdater:t,editor:e,selections:r,preserveCursorSelections:n,...i}){let o=vi(r),s=o.map(f=>{let d=r[f],h=f7(d);return _D(e.document,h.selections,h.behavior)});n||s.push(_D(e.document,e.selections,1));let l=await("edits"in i?h7(t,e,i.edits,s):ED(t,i.callback,e.document,s));return n||await e.setSelections(l.pop()),Object.fromEntries(o.map((f,d)=>[f,l[d]]))}function _D(t,e,r){return e.map(n=>d7(t,n,n instanceof Te?!n.isReversed:!0,r))}function f7(t){return"selections"in t?t:{selections:t,behavior:1}}function d7(t,e,r,n){return{range:e,isForward:r,expansionBehavior:{start:{type:n===1||n===3?"closed":"open"},end:{type:n===1||n===2?"closed":"open"}},offsets:{start:t.offsetAt(e.start),end:t.offsetAt(e.end)},text:t.getText(e)}}function m7(t){return t.map(e=>e.map(({range:{start:r,end:n},isForward:i})=>i?new Te(r,n):new Te(n,r)))}async function ED(t,e,r,n){let i=t.registerRangeInfoList(r,rt(n));return await e(),i(),m7(n)}async function h7(t,e,r,n){return await ED(t,async()=>{if(!await wD(t,e,r))throw new Error("Could not apply edits")},e.document,n)}function vr(t){if(t.length===0)throw new Error("Require at least one target with this action");let e=t.map(r=>r.editor);if(new Set(e).size>1)throw new Error("Can only have one editor with this action");return e[0]}function br(t){if(t.length!==1)throw new Error("Can only have one target with this action");return t[0]}async function ua(t,e,r){return Promise.all(ZS(t,e).map(([n,i])=>r(n,i)))}async function st(t,e){return ua(t,r=>r.editor,e)}async function RD(t,e){let r=ZS(t,i=>i.editor),n=[];for(let[i,o]of r)n.push(await e(i,o));return n}function kD(t){return ZS(t,e=>e.editor)}function ZS(t,e){let n=Xc(t,i=>e(i).document.uri);return Array.from(n.values(),i=>[e(i[0]),i])}function Km(t){return t.contentRange}function un(t,e){return e!=null?xt(t,e).map(([n,i])=>({editor:n.editor,selection:n?.isReversed?new Te(i.end,i.start):new Te(i.start,i.end)})):t.map(n=>({editor:n.editor,selection:n.contentSelection}))}function MD(t){let e=t.contentRange;return t.isLine?rn(e):tr(e)}function je(t,e,r,n=Km){return t.flashRanges(e.map(i=>{let o=n(i);return o==null?null:{editor:i.editor,range:i.isLine?rn(o):tr(o),style:r}}).filter(i=>i!=null))}var Qm=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e){return await je(I(),e,"pendingModification0"),{thatSelections:rt(await st(e,async(n,i)=>{let o=i.map(({contentRange:f})=>f),s=g7(n,o),l=I().getEditableTextEditor(n),{contentRanges:u}=await Be({rangeUpdater:this.rangeUpdater,editor:l,edits:s,selections:{contentRanges:o}});return xt(i,u).map(([f,d])=>({editor:f.editor,selection:d.toSelection(f.isReversed)}))}))}}};function g7(t,e){let{document:r}=t,n=[];for(let i of e){let o=i.start,s=r.lineAt(o),l=s.text.slice(0,s.firstNonWhitespaceCharacterIndex),u=s.text.slice(0,o.character).search(/\s+$/),f=u>-1?new H(new se(s.lineNumber,u),o):o.toEmptyRange();n.push({range:f,text:`
`+l,isReplace:!f.isEmpty})}return n}function Zm(t){return t.length<2?t:kD(t).flatMap(([e,r])=>{if(r.length<2)return r;let n=[...r];n.sort((o,s)=>o.contentRange.start.compareTo(s.contentRange.start));let i=!0;for(;i;)[n,i]=y7(n);return n})}function y7(t){if(t.length<2)return[t,!1];let e=[],r=[];return t.forEach(n=>{r.length&&!x7(r[r.length-1],n)?(e.push(PD(r)),r=[n]):r.push(n)}),e.push(PD(r)),[e,e.length!==t.length]}function PD(t){if(t.length===1)return t[0];let e=t[0],r=t[t.length-1];return mo(e,r)}function x7(t,e){return!!t.getRemovalRange().intersection(e.getRemovalRange())}var El=class{constructor(e,r){this.rangeUpdater=e;this.type=r}async decorateTargets(e,r){await Promise.all([je(I(),e,this.decoration.sourceStyle,this.decoration.getSourceRangeCallback),je(I(),r,this.decoration.destinationStyle)])}getEditsBringMove(e,r){let n=[],i=[],o=e.length!==r.length&&r.length===1;return e.forEach((s,l)=>{let u=r[l];if((s==null||u==null)&&!o)throw new Error("Targets must have same number of args");if(u!=null){let f;o?f=e.map((d,h)=>{let g=d.contentText,x=(u.isRaw?null:u.insertionDelimiter)??(d.isRaw?null:d.insertionDelimiter);return h>0&&x!=null?x+g:g}).join(""):f=s.contentText,i.push({edit:u.constructChangeEdit(f),editor:u.editor,originalTarget:u.target,isSource:!1})}else u=r[0];n.includes(s)||(n.push(s),this.type==="bring"&&i.push({edit:s.toDestination("to").constructChangeEdit(u.target.contentText),editor:s.editor,originalTarget:s,isSource:!0}))}),this.type==="move"&&Zm(n).forEach(s=>{i.push({edit:s.constructRemovalEdit(),editor:s.editor,originalTarget:s,isSource:!0})}),i}async performEditsAndComputeThatMark(e){return rt(await ua(e,r=>r.editor,async(r,n)=>{let i=this.type!=="bring"?n:n.filter(({isSource:x})=>!x),o=this.type==="swap"?[]:n.filter(({isSource:x})=>x),s=this.type==="swap"?n:n.filter(({isSource:x})=>!x),l=o.map(({edit:x})=>x.range),u=s.map(({edit:x})=>x.range),f=I().getEditableTextEditor(r),{sourceEditRanges:d,destinationEditRanges:h}=await Be({rangeUpdater:this.rangeUpdater,editor:f,edits:i.map(({edit:x})=>x),selections:{sourceEditRanges:l,destinationEditRanges:{selections:u,behavior:0}}}),g=[...this.getMarks(o,d),...this.getMarks(s,h)];return g.sort((x,v)=>n.findIndex(w=>w.originalTarget===x.target)-n.findIndex(w=>w.originalTarget===v.target)),g}))}getMarks(e,r){return e.map((n,i)=>{let o=r[i],s=n.edit.updateRange(o),l=n.originalTarget;return{editor:n.editor,selection:s.toSelection(l.isReversed),isSource:n.isSource,target:l}})}async decorateThatMark(e){let r=n=>e.find(i=>i.target===n).selection;return Promise.all([je(I(),e.filter(({isSource:n})=>n).map(({target:n})=>n),this.decoration.sourceStyle,r),je(I(),e.filter(({isSource:n})=>!n).map(({target:n})=>n),this.decoration.destinationStyle,r)])}calculateMarksBringMove(e){return{thatMark:e.filter(({isSource:r})=>!r),sourceMark:e.filter(({isSource:r})=>r)}}};function AD(t,e){return t.length===1?Array(e.length).fill(t[0]):t}var Ym=class extends El{constructor(r){super(r,"bring");this.decoration={sourceStyle:"referenced",destinationStyle:"pendingModification0",getSourceRangeCallback:Km};this.run=this.run.bind(this)}async run(r,n){r=AD(r,n),await this.decorateTargets(r,n.map(u=>u.target));let i=this.getEditsBringMove(r,n),o=await this.performEditsAndComputeThatMark(i),{thatMark:s,sourceMark:l}=this.calculateMarksBringMove(o);return await this.decorateThatMark(s),{thatSelections:s,sourceSelections:l}}},Xm=class extends El{constructor(r){super(r,"move");this.decoration={sourceStyle:"pendingDelete",destinationStyle:"pendingModification0",getSourceRangeCallback:T7};this.run=this.run.bind(this)}async run(r,n){r=AD(r,n),await this.decorateTargets(r,n.map(u=>u.target));let i=this.getEditsBringMove(r,n),o=await this.performEditsAndComputeThatMark(i),{thatMark:s,sourceMark:l}=this.calculateMarksBringMove(o);return await this.decorateThatMark(s),{thatSelections:s,sourceSelections:l}}},Jm=class extends El{constructor(r){super(r,"swap");this.decoration={sourceStyle:"pendingModification1",destinationStyle:"pendingModification0",getSourceRangeCallback:Km};this.run=this.run.bind(this)}async run(r,n){await this.decorateTargets(r,n);let i=this.getEditsSwap(r,n),o=await this.performEditsAndComputeThatMark(i);return await this.decorateThatMark(o),{thatSelections:o,sourceSelections:[]}}getEditsSwap(r,n){let i=[];return r.forEach((o,s)=>{let l=n[s];if(o==null||l==null)throw new Error("Targets must have same number of args");i.push({edit:l.toDestination("to").constructChangeEdit(o.contentText),editor:l.editor,originalTarget:l,isSource:!1}),i.push({edit:o.toDestination("to").constructChangeEdit(l.contentText),editor:o.editor,originalTarget:o,isSource:!0})}),i}};function T7(t){return t.getRemovalHighlightRange()}var Rl=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e,r){br(e);let{returnValue:n}=await this.actions.getText.run(e,{showDecorations:!1}),{thatSelections:i}=await this.actions.wrapWithPairedDelimiter.run(r,n[0]+"(",")");return{thatSelections:i}}};var kl=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){let r=vr(e),n=e.map(o=>new Ue({editor:o.editor,isReversed:o.isReversed,contentRange:o.contentRange})),{thatTargets:i}=await this.actions.remove.run(n);return i!=null&&await I().getEditableTextEditor(r).setSelections(i.map(({contentSelection:o})=>o),{focusEditor:!0}),{thatTargets:i}}};var eh=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){await I().flashRanges(e.flatMap(i=>{let{editor:o,contentRange:s}=i,l=i.getRemovalHighlightRange();return i.isLine?[{editor:o,range:tr(s),style:"referenced"},{editor:o,range:rn(l),style:"pendingDelete"}]:[{editor:o,range:tr(s),style:"referenced"},...S7(s,l).map(u=>({editor:o,range:tr(u),style:"pendingDelete"}))]}));let r={showDecorations:!1};await this.actions.copyToClipboard.run(e,r);let{thatTargets:n}=await this.actions.remove.run(e,r);return{thatTargets:n}}};function S7(t,e){let{start:r,end:n}=t,{start:i,end:o}=e,s=[];return i.isBefore(r)&&s.push(new H(i,r)),o.isAfter(n)&&s.push(new H(n,o)),s}var Ml=class{constructor(){this.run=this.run.bind(this)}async run(e){return await st(e,async(r,n)=>{let i=r.selections.filter(o=>!n.some(s=>{let l=s.contentRange.intersection(o);return l&&(!l.isEmpty||o.isEmpty)}));if(i.length===0)throw new YS;await I().getEditableTextEditor(r).setSelections(i)}),{thatTargets:e}}},YS=class extends Error{constructor(){super("Can't deselect every selection. At least one is required"),this.name="SelectionRequiredError"}};async function DD(t,e,r,n){let i=r.destinations.map((v,w)=>{if(n||v.getEditNewActionType()==="edit")return{destination:v,index:w}}).filter(v=>!!v);if(i.length===0)return r;let o=i.map(v=>v.destination.constructChangeEdit("")),s=r.cursorRanges.map((v,w)=>({range:v,index:w})).filter(({range:v})=>v!=null),l=s.map(({index:v})=>v),u=s.map(({range:v})=>v),f=o.map(v=>v.range),{thatRanges:d,cursorRanges:h,editRanges:g}=await Be({rangeUpdater:t,editor:e,edits:o,preserveCursorSelections:!0,selections:{thatRanges:r.thatRanges,cursorRanges:u,editRanges:{selections:f,behavior:0}}}),x=[...r.cursorRanges];return xt(l,h).forEach(([v,w])=>{x[v]=w}),i.forEach((v,w)=>{let A=o[w].updateRange(g[w]);x[v.index]=A}),{destinations:r.destinations,thatRanges:d,cursorRanges:x}}async function ID({acceptsLocation:t},e,r,n){let i=n.destinations.map((h,g)=>{if(h.getEditNewActionType()==="insertLineAfter")return{destination:h,index:g}}).filter(h=>!!h);if(i.length===0)return n;let o=i.map(({destination:h})=>h.contentRange),s=n.destinations.map(({contentRange:h})=>h),l=async()=>{t?await r.insertLineAfter(o):(await r.setSelections(o.map(h=>h.toSelection(!1))),await r.focus(),await r.insertLineAfter())},{targetRanges:u,thatRanges:f}=await Be({rangeUpdater:e,editor:r,callback:l,preserveCursorSelections:!0,selections:{targetRanges:s,thatRanges:n.thatRanges}}),d=[...n.cursorRanges];return i.forEach((h,g)=>{d[h.index]=r.selections[g]}),{destinations:n.destinations.map((h,g)=>h.withTarget(h.target.withContentRange(u[g]))),thatRanges:f,cursorRanges:d}}async function FD(t,e){let r=br(e),n=I().getEditableTextEditor(r.editor),i=r.insertionMode==="before";if(r.insertionMode==="to")throw Error(`Unsupported insertion mode '${r.insertionMode}' for notebookcapell`);await t.setSelection.run([r.target]);let o=l=>l;i?o=await n.editNewNotebookCellAbove():await n.editNewNotebookCellBelow();let s=un([r.target.thatTarget]);return s[0].selection=o(s[0].selection),{thatSelections:s}}var th=class{constructor(e,r){this.rangeUpdater=e;this.actions=r;this.run=this.run.bind(this)}async run(e){if(e.some(({target:l})=>l.isNotebookCell))return FD(this.actions,e);let r=I().getEditableTextEditor(vr(e)),n={destinations:e,thatRanges:e.map(({target:l})=>l.thatTarget.contentRange),cursorRanges:new Array(e.length).fill(void 0)},i=I().capabilities.commands.insertLineAfter,o=i!=null;o&&(n=await ID(i,this.rangeUpdater,r,n)),n=await DD(this.rangeUpdater,r,n,!o);let s=n.destinations.map((l,u)=>n.cursorRanges[u].toSelection(l.target.isReversed));return await r.setSelections(s,{focusEditor:!0}),{thatSelections:un(n.destinations.map(l=>l.target),n.thatRanges)}}};var rh=class{constructor(e,r){this.actions=e;this.modifierStageFactory=r;this.run=this.run.bind(this)}getFinalStages(){return[this.modifierStageFactory.create(Bs)]}run(e){return this.actions.editNew.run(e.map(r=>r.toDestination(this.insertionMode)))}},nh=class extends rh{constructor(){super(...arguments);this.insertionMode="before"}},ih=class extends rh{constructor(){super(...arguments);this.insertionMode="after"}};var oh=t=>new Et({editor:t.editor,isReversed:t.selection.isReversed,contentRange:t.selection,hasExplicitRange:!0});var Ws=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e,r){r.showDecorations&&await je(I(),e,"referenced"),r.ensureSingleEditor&&vr(e),r.ensureSingleTarget&&br(e);let n=I().activeEditableTextEditor,i=r.setSelection?RD:st,o=rt(await i(e,(s,l)=>this.runForEditor(r,s,l)));return r.setSelection&&r.restoreSelection&&n!=null&&!n.isActive&&await n.focus(),{thatTargets:o}}async runForEditor(e,r,n){let i=I().getEditableTextEditor(r),o=r.selections,s=r.document.version,l=n.map(d=>d.contentSelection);e.setSelection&&await i.setSelections(l,{focusEditor:!0,revealRange:!1});let{originalSelections:u,targetSelections:f}=await Be({rangeUpdater:this.rangeUpdater,editor:i,callback:()=>e.callback(i,n),preserveCursorSelections:!0,selections:{originalSelections:o,targetSelections:l}});return e.setSelection&&e.restoreSelection&&await i.setSelections(u),r.document.version===s?n:f.map(d=>oh({editor:r,selection:d}))}};var Pl=class{constructor(e){this.callbackAction=new Ws(e),this.run=this.run.bind(this)}async run(e,r,{commandArgs:n,ensureSingleEditor:i,ensureSingleTarget:o,restoreSelection:s,showDecorations:l}={}){let u=n??[];return this.callbackAction.run(e,{callback:()=>I().executeCommand(r,...u),setSelection:!0,ensureSingleEditor:i??!1,ensureSingleTarget:o??!1,restoreSelection:s??!0,showDecorations:l??!0})}};var ah=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){br(e);let{returnValue:r,thatTargets:n}=await this.actions.getText.run(e),[i]=r,o;return i.length>200?(o=i.substring(0,200),Vc(I().messages,"truncatedSearchText","Search text is longer than 200 characters; truncating")):o=i,await this.find(o),{thatTargets:n}}},sh=class extends ah{find(e){return I().findInDocument(e)}},ch=class extends ah{find(e){return I().findInWorkspace(e)}};var Hs=class{constructor(e){this.options=e;this.run=this.run.bind(this)}async run(e){let r=br(e);return await je(I(),e,"referenced"),await I().getEditableTextEditor(r.editor).openLink(r.contentRange,this.options),{thatSelections:un(e)}}};function CD(t,e){let r=[],n=0,i=null,[o,...s]=t.split(/\r?\n/);return[{text:e+o,startIndex:e.length},...s.map(u=>({text:u,startIndex:0}))].forEach(({text:u,startIndex:f})=>{let d=u.match(/^\s*/)?.[0]??"",h=d.length;i!=null&&(d.length>i.length?n++:d.length<i.length&&n--),i=d;let g=Math.max(h,f),x=$x("	",n),v=u.slice(g);r.push(x+v)}),r}function ND(t,e){let r=qx(e,o=>o.offsets.start),n="",i=0;for(let o of r)n+=t.slice(i,o.offsets.start)+o.text,i=o.offsets.end;return n+=t.slice(i),n}var Al=class{constructor(){this.substitutions=[]}addSubstitution(e,r=!1){let n=v7(10);return this.substitutions.push({to:e,randomId:n,isQuoted:r}),n}makeSubstitutions(e){return this.substitutions.forEach(({to:r,randomId:n,isQuoted:i})=>{let o=i?`"${n}"`:n;e=e.split(o).join(r)}),e}};function v7(t){let e="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=r.length;for(let i=0;i<t;i++)e+=r.charAt(Math.floor(Math.random()*n));return e}var $s=class{constructor(e){this.snippets=e;this.run=this.run.bind(this)}async run(e,r){let n=br(e),i=n.editor;if(je(I(),e,"referenced"),r==null&&(r=await I().showInputBox({prompt:"Name of snippet",placeHolder:"helloWorld"})),r==null)return{};let o=1,s=i.document.offsetAt(n.contentRange.start),l=i.selections.filter(A=>n.contentRange.contains(A)).map((A,U)=>({offsets:{start:i.document.offsetAt(A.start)-s,end:i.document.offsetAt(A.end)-s},defaultName:`variable${U+1}`,placeholderIndex:o++})),u=new Al,f=i.document.getText(new H(n.contentRange.start.with(void 0,0),n.contentRange.start)),d=i.document.getText(n.contentRange),h=ND(d,[...en(d,/\$|\\/g,A=>({offsets:{start:A.index,end:A.index+A[0].length},text:A[0]==="\\"?`\\${A[0]}`:`\\\\${A[0]}`})),...l.map(({offsets:A,defaultName:U,placeholderIndex:Z})=>({offsets:A,text:u.addSubstitution(["\\$","${",Z,":",U,"}"].join(""))}))]),g=CD(h,f),x=({placeholderIndex:A})=>{let U="$"+A,Z=u.addSubstitution("{$"+o+++"}",!0);return[U,Z]},v={[r]:{definitions:[{scope:{langIds:[i.document.languageId]},body:g}],description:"$"+o++,variables:l.length===0?void 0:Object.fromEntries(l.map(x))}},w=u.makeSubstitutions(JSON.stringify(v,null,2)),N=I().getEditableTextEditor(i);return I().runMode==="test"?await N.setSelections([i.document.range.toSelection(!1)]):await this.snippets.openNewSnippetFile(r),await N.insertSnippet(w),{thatSelections:e.map(({editor:A,contentSelection:U})=>({editor:A,selection:U}))}}};var Dl=class{constructor(){this.run=this.run.bind(this)}async run(e){return{returnValue:e.map(({contentRange:r})=>({contentRange:r})),thatTargets:e}}};var Il=class{constructor(){this.run=this.run.bind(this)}async run(e,{showDecorations:r=!0,ensureSingleTarget:n=!1}={}){return r&&await je(I(),e,"referenced"),n&&br(e),{returnValue:e.map(i=>i.contentText),thatTargets:e}}};var Fl=class{constructor(){this.run=this.run.bind(this)}async run(e,r){if(I().capabilities.commands.highlight==null)throw Error("The highlight action is not supported by your ide");return e.length===0?await Promise.all(I().visibleTextEditors.map(n=>I().setHighlightRanges(r,n,[]))):await st(e,(n,i)=>I().setHighlightRanges(r,n,i.map(MD))),{thatTargets:e}}};var lh=class{constructor(e,r,n){this.rangeUpdater=e;this.modifierStageFactory=r;this.isBefore=n;this.getFinalStages=()=>[this.modifierStageFactory.create(Bs)];this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e){let r=rt(await st(e,this.runForEditor));return await I().flashRanges(r.flatMap(n=>n.thatMark.map(i=>({editor:i.editor,range:tr(i.selection),style:"justAdded"})))),{sourceSelections:r.flatMap(({sourceMark:n})=>n),thatSelections:r.flatMap(({thatMark:n})=>n)}}async runForEditor(e,r){let n=this.isBefore?"after":"before",i=r.flatMap(g=>g.toDestination(n).constructChangeEdit(g.contentText)),o=r.map(({contentSelection:g})=>g),s=i.map(({range:g})=>g),l=I().getEditableTextEditor(e),{contentSelections:u,editRanges:f}=await Be({rangeUpdater:this.rangeUpdater,editor:l,edits:i,selections:{contentSelections:o,editRanges:{selections:s,behavior:0}}}),d=xt(i,f).map(([g,x])=>g.updateRange(x)),h=e.selections[0];return u.some(g=>g.intersection(h)!=null)&&await l.revealRange(h),{sourceMark:un(r,d),thatMark:un(r,u)}}},uh=class extends lh{constructor(e,r){super(e,r,!0)}},ph=class extends lh{constructor(e,r){super(e,r,!1)}};var Cl=class{constructor(e,r,n){this.rangeUpdater=e;this.insertAbove=r;this.insertBelow=n;this.run=this.run.bind(this)}getRanges(e){let r=e.flatMap(n=>{let i=[];return this.insertAbove&&i.push(n.contentRange.start.line),this.insertBelow&&i.push(n.contentRange.end.line+1),i});return r=[...new Set(r)],r.map(n=>new H(n,0,n,0))}getEdits(e){return e.map(r=>({range:r,text:`
`}))}async run(e){let r=rt(await st(e,async(i,o)=>{let s=this.getRanges(o),l=this.getEdits(s),u=o.map(g=>g.thatTarget.contentSelection),f=I().getEditableTextEditor(i),{contentSelections:d,ranges:h}=await Be({rangeUpdater:this.rangeUpdater,editor:f,edits:l,selections:{contentSelections:u,ranges:s}});return{thatMark:d.map(g=>({editor:i,selection:g})),lineSelections:h.map((g,x)=>({editor:i,range:s[x].start.line<i.document.lineCount-1?new H(g.start.translate(-1,void 0),g.end.translate(-1,void 0)):g}))}}));return await I().flashRanges(r.flatMap(i=>i.lineSelections.map(({editor:o,range:s})=>({editor:o,range:rn(s),style:"justAdded"})))),{thatSelections:r.flatMap(i=>i.thatMark)}}},fh=class extends Cl{constructor(e){super(e,!0,!0)}},dh=class extends Cl{constructor(e){super(e,!0,!1)}},mh=class extends Cl{constructor(e){super(e,!1,!0)}};var XS=class t{constructor(){this.value="";this.pos=0}static{this._table={36:0,58:1,44:2,123:3,125:4,92:5,47:6,124:7,43:11,45:12,63:13}}static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return e===95||e>=97&&e<=122||e>=65&&e<=90}text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};let e=this.pos,r=0,n=this.value.charCodeAt(e),i;if(i=t._table[n],typeof i=="number")return this.pos+=1,{type:i,pos:e,len:1};if(t.isDigitCharacter(n)){i=8;do r+=1,n=this.value.charCodeAt(e+r);while(t.isDigitCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}if(t.isVariableCharacter(n)){i=9;do n=this.value.charCodeAt(e+ ++r);while(t.isVariableCharacter(n)||t.isDigitCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}i=10;do r+=1,n=this.value.charCodeAt(e+r);while(!isNaN(n)&&typeof t._table[n]>"u"&&!t.isDigitCharacter(n)&&!t.isVariableCharacter(n));return this.pos+=r,{type:i,pos:e,len:r}}},ho=class{constructor(){this._children=[]}appendChild(e){return e instanceof wr&&this._children[this._children.length-1]instanceof wr?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,r){let{parent:n}=e,i=n.children.indexOf(e),o=n.children.slice(0);o.splice(i,1,...r),n._children=o,function s(l,u){for(let f of l)f.parent=u,s(f.children,f)}(r,n)}get children(){return this._children}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof yh)return e;e=e.parent}}toString(){return this.children.reduce((e,r)=>e+r.toString(),"")}len(){return 0}},wr=class t extends ho{constructor(r){super();this.value=r}static escape(r){return r.replace(/\$|}|\\/g,"\\$&")}toString(){return this.value}toTextmateString(){return t.escape(this.value)}len(){return this.value.length}clone(){return new t(this.value)}},hh=class extends ho{},Br=class t extends hh{constructor(r){super();this.index=r}static compareByIndex(r,n){return r.index===n.index?0:r.isFinalTabstop?1:n.isFinalTabstop||r.index<n.index?-1:r.index>n.index?1:0}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof gh?this._children[0]:void 0}toTextmateString(){let r="";return this.transform&&(r=this.transform.toTextmateString()),this.children.length===0&&!this.transform?`$${this.index}`:this.children.length===0?`\${${this.index}${r}}`:this.choice?`\${${this.index}|${this.choice.toTextmateString()}|${r}}`:`\${${this.index}:${this.children.map(n=>n.toTextmateString()).join("")}${r}}`}clone(){let r=new t(this.index);return this.transform&&(r.transform=this.transform.clone()),r._children=this.children.map(n=>n.clone()),r}},gh=class t extends ho{constructor(){super(...arguments);this.options=[]}appendChild(r){return r instanceof wr&&(r.parent=this,this.options.push(r)),this}toString(){return this.options[0].value}toTextmateString(){return this.options.map(r=>r.value.replace(/\||,|\\/g,"\\$&")).join(",")}len(){return this.options[0].len()}clone(){let r=new t;return this.options.forEach(r.appendChild,r),r}},JS=class t extends ho{constructor(){super(...arguments);this.regexp=new RegExp("")}resolve(r){let n=this,i=!1,o=r.replace(this.regexp,function(){return i=!0,n._replace(Array.prototype.slice.call(arguments,0,-2))});return!i&&this._children.some(s=>s instanceof An&&!!s.elseValue)&&(o=this._replace([])),o}_replace(r){let n="";for(let i of this._children)if(i instanceof An){let o=r[i.index]||"";o=i.resolve(o),n+=o}else n+=i.toString();return n}toString(){return""}toTextmateString(){return`/${this.regexp.source}/${this.children.map(r=>r.toTextmateString())}/${(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")}`}clone(){let r=new t;return r.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),r._children=this.children.map(n=>n.clone()),r}},An=class t extends ho{constructor(r,n,i,o){super();this.index=r;this.shorthandName=n;this.ifValue=i;this.elseValue=o}resolve(r){return this.shorthandName==="upcase"?r?r.toLocaleUpperCase():"":this.shorthandName==="downcase"?r?r.toLocaleLowerCase():"":this.shorthandName==="capitalize"?r?r[0].toLocaleUpperCase()+r.substr(1):"":this.shorthandName==="pascalcase"?r?this._toPascalCase(r):"":this.shorthandName==="camelcase"?r?this._toCamelCase(r):"":r&&typeof this.ifValue=="string"?this.ifValue:!r&&typeof this.elseValue=="string"?this.elseValue:r||""}_toPascalCase(r){let n=r.match(/[a-z0-9]+/gi);return n?n.map(i=>i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()).join(""):r}_toCamelCase(r){let n=r.match(/[a-z0-9]+/gi);return n?n.map((i,o)=>o===0?i.toLowerCase():i.charAt(0).toUpperCase()+i.substr(1).toLowerCase()).join(""):r}toTextmateString(){let r="${";return r+=this.index,this.shorthandName?r+=`:/${this.shorthandName}`:this.ifValue&&this.elseValue?r+=`:?${this.ifValue}:${this.elseValue}`:this.ifValue?r+=`:+${this.ifValue}`:this.elseValue&&(r+=`:-${this.elseValue}`),r+="}",r}clone(){return new t(this.index,this.shorthandName,this.ifValue,this.elseValue)}},go=class t extends hh{constructor(r){super();this.name=r}resolve(r){let n=r.resolve(this);return this.transform&&(n=this.transform.resolve(n||"")),n!==void 0?(this._children=[new wr(n)],!0):!1}toTextmateString(){let r="";return this.transform&&(r=this.transform.toTextmateString()),this.children.length===0?`\${${this.name}${r}}`:`\${${this.name}:${this.children.map(n=>n.toTextmateString()).join("")}${r}}`}clone(){let r=new t(this.name);return this.transform&&(r.transform=this.transform.clone()),r._children=this.children.map(n=>n.clone()),r}};function OD(t,e){let r=[...t];for(;r.length>0;){let n=r.shift();if(!e(n))break;r.unshift(...n.children)}}var yh=class t extends ho{get placeholderInfo(){if(!this._placeholders){let e=[],r;this.walk(function(n){return n instanceof Br&&(e.push(n),r=!r||r.index<n.index?n:r),!0}),this._placeholders={all:e,last:r}}return this._placeholders}get placeholders(){let{all:e}=this.placeholderInfo;return e}offset(e){let r=0,n=!1;return this.walk(i=>i===e?(n=!0,!1):(r+=i.len(),!0)),n?r:-1}fullLen(e){let r=0;return OD([e],n=>(r+=n.len(),!0)),r}enclosingPlaceholders(e){let r=[],{parent:n}=e;for(;n;)n instanceof Br&&r.push(n),n=n.parent;return r}resolveVariables(e){return this.walk(r=>(r instanceof go&&r.resolve(e)&&(this._placeholders=void 0),!0)),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,r){return this._placeholders=void 0,super.replace(e,r)}toTextmateString(){return this.children.reduce((e,r)=>e+r.toTextmateString(),"")}clone(){let e=new t;return this._children=this.children.map(r=>r.clone()),e}walk(e){OD(this.children,e)}},js=class{constructor(){this._scanner=new XS;this._token={type:14,pos:0,len:0}}static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}text(e){return this.parse(e).toString()}parse(e,r,n){this._scanner.text(e),this._token=this._scanner.next();let i=new yh;for(;this._parse(i););let o=new Map,s=[],l=0;i.walk(u=>(u instanceof Br&&(l+=1,u.isFinalTabstop?o.set(0,void 0):!o.has(u.index)&&u.children.length>0?o.set(u.index,u.children):s.push(u)),!0));for(let u of s){let f=o.get(u.index);if(f){let d=new Br(u.index);d.transform=u.transform;for(let h of f)d.appendChild(h.clone());i.replace(u,[d])}}return n||(n=l>0&&r),!o.has(0)&&n&&i.appendChild(new Br(0)),i}_accept(e,r){if(e===void 0||this._token.type===e){let n=r?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),n}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){let r=this._token;for(;this._token.type!==e;){if(this._token.type===14)return!1;if(this._token.type===5){let i=this._scanner.next();if(i.type!==0&&i.type!==4&&i.type!==5)return!1}this._token=this._scanner.next()}let n=this._scanner.value.substring(r.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),n}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let r;return(r=this._accept(5,!0))?(r=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||r,e.appendChild(new wr(r)),!0):!1}_parseTabstopOrVariableName(e){let r,n=this._token;return this._accept(0)&&(r=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(r)?new Br(Number(r)):new go(r)),!0):this._backTo(n)}_parseComplexPlaceholder(e){let r,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(r=this._accept(8,!0))))return this._backTo(n);let o=new Br(Number(r));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new wr("${"+r+":")),o.children.forEach(e.appendChild,e),!0}else if(o.index>0&&this._accept(7)){let s=new gh;for(;;){if(this._parseChoiceElement(s)){if(this._accept(2))continue;if(this._accept(7)&&(o.appendChild(s),this._accept(4)))return e.appendChild(o),!0}return this._backTo(n),!1}}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseChoiceElement(e){let r=this._token,n=[];for(;!(this._token.type===2||this._token.type===7);){let i;if((i=this._accept(5,!0))?i=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||i:i=this._accept(void 0,!0),!i)return this._backTo(r),!1;n.push(i)}return n.length===0?(this._backTo(r),!1):(e.appendChild(new wr(n.join(""))),!0)}_parseComplexVariable(e){let r,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(r=this._accept(9,!0))))return this._backTo(n);let o=new go(r);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new wr("${"+r+":")),o.children.forEach(e.appendChild,e),!0}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseTransform(e){let r=new JS,n="",i="";for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(6,!0)||o,n+=o;continue}if(this._token.type!==14){n+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(5,!0)||this._accept(6,!0)||o,r.appendChild(new wr(o));continue}if(!(this._parseFormatString(r)||this._parseAnything(r)))return!1}for(;!this._accept(4);){if(this._token.type!==14){i+=this._accept(void 0,!0);continue}return!1}try{r.regexp=new RegExp(n,i)}catch{return!1}return e.transform=r,!0}_parseFormatString(e){let r=this._token;if(!this._accept(0))return!1;let n=!1;this._accept(3)&&(n=!0);let i=this._accept(8,!0);if(i)if(n){if(this._accept(4))return e.appendChild(new An(Number(i))),!0;if(!this._accept(1))return this._backTo(r),!1}else return e.appendChild(new An(Number(i))),!0;else return this._backTo(r),!1;if(this._accept(6)){let o=this._accept(9,!0);return!o||!this._accept(4)?(this._backTo(r),!1):(e.appendChild(new An(Number(i),o)),!0)}else if(this._accept(11)){let o=this._until(4);if(o)return e.appendChild(new An(Number(i),void 0,o,void 0)),!0}else if(this._accept(12)){let o=this._until(4);if(o)return e.appendChild(new An(Number(i),void 0,void 0,o)),!0}else if(this._accept(13)){let o=this._until(1);if(o){let s=this._until(4);if(s)return e.appendChild(new An(Number(i),void 0,o,s)),!0}}else{let o=this._until(4);if(o)return e.appendChild(new An(Number(i),void 0,void 0,o)),!0}return this._backTo(r),!1}_parseAnything(e){return this._token.type!==14?(e.appendChild(new wr(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}};var LD=Object.freeze({CURRENT_YEAR:!0,CURRENT_YEAR_SHORT:!0,CURRENT_MONTH:!0,CURRENT_DATE:!0,CURRENT_HOUR:!0,CURRENT_MINUTE:!0,CURRENT_SECOND:!0,CURRENT_DAY_NAME:!0,CURRENT_DAY_NAME_SHORT:!0,CURRENT_MONTH_NAME:!0,CURRENT_MONTH_NAME_SHORT:!0,CURRENT_SECONDS_UNIX:!0,SELECTION:!0,CLIPBOARD:!0,TM_SELECTED_TEXT:!0,TM_CURRENT_LINE:!0,TM_CURRENT_WORD:!0,TM_LINE_INDEX:!0,TM_LINE_NUMBER:!0,TM_FILENAME:!0,TM_FILENAME_BASE:!0,TM_DIRECTORY:!0,TM_FILEPATH:!0,RELATIVE_FILEPATH:!0,BLOCK_COMMENT_START:!0,BLOCK_COMMENT_END:!0,LINE_COMMENT:!0,WORKSPACE_NAME:!0,WORKSPACE_FOLDER:!0,RANDOM:!0,RANDOM_HEX:!0,UUID:!0});function xh(t,e,r){let n=b7(t)+1,i={};t.walk(o=>{if(o instanceof go){if(o.name===e)o.name="TM_SELECTED_TEXT";else if(r!=null&&Object.prototype.hasOwnProperty.call(r,o.name))o.parent.replace(o,[new wr(r[o.name])]);else if(!LD[o.name]){let s;o.name in i?s=i[o.name]:(s=n++,i[o.name]=s);let l=new Br(s);o.children.forEach(u=>l.appendChild(u)),o.parent.replace(o,[l])}}else o instanceof Br&&o.index.toString()===e&&o.parent.replace(o,[new go("TM_SELECTED_TEXT")]);return!0})}function b7(t){let e=0;return t.walk(r=>(r instanceof Br&&(e=Math.max(e,r.index)),!0)),e}function Th(t,e,r){let n=e.map(o=>w7(t,o,r)),i=n[0];if(!n.every(o=>o===i))throw new Error("Multiple snippet definitions match the given context");if(i===-1)throw new Error("Couldn't find matching snippet definition");return r[i]}function w7(t,e,r){let n=e.editor.document.languageId;return r.findIndex(({scope:i})=>{if(i==null)return!0;let{langIds:o,scopeTypes:s,excludeDescendantScopeTypes:l}=i;if(o!=null&&!o.includes(n))return!1;if(s!=null){let u=s.concat(l??[]),f,d;for(let h of u)try{let g=t.create({type:"containingScope",scopeType:{type:h}}).run(e)[0];e.contentRange.isRangeEqual(g.contentRange)&&(g=t.create({type:"containingScope",scopeType:{type:h},ancestorIndex:1}).run(e)[0]),(f==null||f.contentRange.contains(g.contentRange))&&(f=g,d=h)}catch{continue}return f!=null&&!(l??[]).includes(d)}return!0})}var Nl=class{constructor(e,r,n,i){this.rangeUpdater=e;this.snippets=r;this.actions=n;this.modifierStageFactory=i;this.snippetParser=new js;this.run=this.run.bind(this)}getFinalStages(e){let r=this.getScopeTypes(e);return r.length===0?[]:[new ym(this.modifierStageFactory,{type:"cascading",modifiers:r.map(n=>({type:"containingScope",scopeType:n}))})]}getScopeTypes(e){if(e.type==="named"){let{name:r}=e,i=this.snippets.getSnippetStrict(r).insertionScopeTypes;return i==null?[]:i.map(o=>({type:o}))}else return e.scopeTypes??[]}getSnippetInfo(e,r){if(e.type==="named"){let{name:n}=e,i=this.snippets.getSnippetStrict(n),o=Th(this.modifierStageFactory,r,i.definitions);return{body:o.body.join(`
`),formatSubstitutions(s){return s==null?void 0:_7(i,o,s)}}}else return{body:e.body,formatSubstitutions(n){return n}}}async run(e,r){let n=I().getEditableTextEditor(vr(e));await this.actions.editNew.run(e);let{body:i,formatSubstitutions:o}=this.getSnippetInfo(r,n.selections.map(f=>new Et({editor:n,contentRange:f,isReversed:!1,hasExplicitRange:!0}))),s=this.snippetParser.parse(i);xh(s,null,o(r.substitutions));let l=s.toTextmateString(),{editorSelections:u}=await Be({rangeUpdater:this.rangeUpdater,editor:n,callback:()=>n.insertSnippet(l),preserveCursorSelections:!0,selections:{editorSelections:{selections:n.selections,behavior:0}}});return{thatSelections:u.map(f=>({editor:n,selection:f}))}}};function _7(t,e,r){return Object.fromEntries(Object.entries(r).map(([n,i])=>{let o=(e.variables??{})[n]?.formatter??(t.variables??{})[n]?.formatter;if(o==null)return[n,i];let s=Lk[o];if(s==null)throw new Error(`Couldn't find formatter ${o} for variable ${n}`);return[n,s(i.split(" "))]}))}var Ol=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e){return await je(I(),e,"pendingModification0"),{thatSelections:rt(await st(e,async(n,i)=>{let o=i.map(({contentRange:l})=>l),{contentRanges:s}=await Be({rangeUpdater:this.rangeUpdater,editor:I().getEditableTextEditor(n),edits:E7(n,o),selections:{contentRanges:o}});return xt(i,s).map(([l,u])=>({editor:l.editor,selection:u.toSelection(l.isReversed)}))}))}}};function E7(t,e){let{document:r}=t,n=[];for(let i of e){let o=i.start.line,s=i.isSingleLine?o+1:i.end.line,l=xs(FP(o,s+1),u=>r.lineAt(u));for(let[u,f]of AP(l))n.push({range:new H(u.range.end.line,u.lastNonWhitespaceCharacterIndex,f.range.start.line,f.firstNonWhitespaceCharacterIndex),text:f.isEmptyOrWhitespace?"":" ",isReplace:!0})}return n}var Sh=class{constructor(e,r){this.rangeUpdater=e;this.actions=r}async run(e){let r=I().getEditableTextEditor(vr(e)),n=I().activeEditableTextEditor,i=async()=>{await this.actions.editNew.run(e)},{cursorSelections:o}=await Be({rangeUpdater:this.rangeUpdater,editor:r,preserveCursorSelections:!0,callback:i,selections:{cursorSelections:r.selections}}),{originalCursorSelections:s,editorSelections:l}=await Be({rangeUpdater:this.rangeUpdater,editor:r,callback:()=>r.clipboardPaste(),selections:{originalCursorSelections:o,editorSelections:{selections:r.selections,behavior:0}}});return await r.setSelections(s),n!=null&&!n.isActive&&await n.focus(),await I().flashRanges(l.map(u=>({editor:r,range:tr(u),style:"justAdded"}))),{thatSelections:l.map(u=>({editor:r,selection:u}))}}};var Ll=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this),this.runForEditor=this.runForEditor.bind(this)}async run(e,{showDecorations:r=!0}={}){return e=Zm(e),r&&await je(I(),e,"pendingDelete",i=>i.getRemovalHighlightRange()),{thatTargets:rt(await st(e,this.runForEditor))}}async runForEditor(e,r){let n=r.map(s=>s.constructRemovalEdit()),i=I().getEditableTextEditor(e),{editRanges:o}=await Be({rangeUpdater:this.rangeUpdater,editor:i,edits:n,selections:{editRanges:n.map(({range:s})=>s)}});return xt(r,o).map(([s,l])=>new ao({editor:s.editor,isReversed:s.isReversed,contentRange:l}))}};var Ul=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}getTexts(e,r){if(Array.isArray(r))return r.length===1?Array(e.length).fill(r[0]):r;let n=[];for(let i=0;i<e.length;++i)n[i]=(r.start+i).toString();return n}async run(e,r){await je(I(),e.map(l=>l.target),"pendingModification0");let n=this.getTexts(e,r);if(e.length!==n.length)throw new Error("Targets and texts must have same length");let i=xt(e,n).map(([l,u])=>({editor:l.editor,target:l.target,edit:l.constructChangeEdit(u)})),o=[],s=[];return await ua(i,l=>l.editor,async(l,u)=>{let f=u.map(({edit:g})=>g),{contentSelections:d,editRanges:h}=await Be({rangeUpdater:this.rangeUpdater,editor:I().getEditableTextEditor(l),edits:f,selections:{contentSelections:u.map(({target:g})=>g.contentSelection),editRanges:{selections:f.map(({range:g})=>g),behavior:0}}});for(let[g,x]of xt(u,d))o.push(g.target.withContentRange(x));for(let[g,x]of xt(u,h))s.push({editor:l,selection:g.edit.updateRange(x).toSelection(!1)})}),{sourceTargets:o,thatSelections:s}}};var Bl=class{constructor(e,r){this.rangeUpdater=e;this.modifierStageFactory=r;this.getFinalStages=()=>[LS(this.modifierStageFactory)];this.run=this.run.bind(this)}async run(e,r,n){let i=e.flatMap(s=>{let l=s.getBoundary();if(l.length!==2)throw Error("Target must have an opening and closing delimiter");return l});await je(I(),i,"pendingModification0");let o=await st(i,async(s,l)=>{let u=l.map((h,g)=>({editor:s,range:h.contentRange,text:g%2===0?r:n})),{sourceRanges:f,thatRanges:d}=await Be({rangeUpdater:this.rangeUpdater,editor:I().getEditableTextEditor(s),edits:u,selections:{sourceRanges:e.map(h=>h.thatTarget.contentRange),thatRanges:e.map(h=>h.contentRange)}});return{sourceMark:un(e,f),thatMark:un(e,d)}});return{sourceSelections:o.flatMap(({sourceMark:s})=>s),thatSelections:o.flatMap(({thatMark:s})=>s)}}};var Vl=class{constructor(e){this.at=e;this.run=this.run.bind(this)}async run(e){let r=Xc(e,s=>s.editor),n=Array.from(r,([s,l])=>({lineNumber:R7(l,this.at),editor:s})),i=I().activeEditableTextEditor;for(let s of n)await I().getEditableTextEditor(s.editor).revealLine(s.lineNumber,this.at);i!=null&&!i.isActive&&await i.focus();let o=e.filter(s=>{let l=s.editor.visibleRanges,u=l[0].start.line,f=l[l.length-1].end.line;return s.contentRange.start.line>u||s.contentRange.end.line<f||s.contentRange.start.line===u&&s.contentRange.end.line===f});return await I().flashRanges(o.map(s=>({editor:s.editor,range:rn(s.contentRange),style:"referenced"}))),{thatTargets:e}}},vh=class extends Vl{constructor(){super("top")}},bh=class extends Vl{constructor(){super("center")}},wh=class extends Vl{constructor(){super("bottom")}};function R7(t,e){let r=Number.MAX_SAFE_INTEGER,n=0;return t.forEach(i=>{r=Math.min(r,i.contentRange.start.line),n=Math.max(n,i.contentRange.end.line)}),e==="top"?r:e==="bottom"?n:Math.floor((r+n)/2)}var qs=class{constructor(){this.run=this.run.bind(this)}getSelection(e){return e.contentSelection}async run(e){let r=vr(e),n=e.map(this.getSelection);return await I().getEditableTextEditor(r).setSelections(n,{focusEditor:!0}),{thatTargets:e}}},_h=class extends qs{getSelection(e){return new Te(e.contentRange.start,e.contentRange.start)}},Eh=class extends qs{getSelection(e){return new Te(e.contentRange.end,e.contentRange.end)}};var Wl=class{constructor(e){this.key=e;this.noAutomaticTokenExpansion=!0;this.run=this.run.bind(this)}async run(e){return{thatTargets:e,[`${this.key}Targets`]:e}}};var Hl=class{constructor(e){this.treeSitter=e;this.run=this.run.bind(this)}async run(e){await je(I(),e,"referenced");let r=["# Cursorless parse tree"];for(let n of e){let{editor:i,contentRange:o}=n,s=this.treeSitter.getTree(i.document);r.push(k7(i.document,s,o))}return I().openUntitledTextDocument({language:"markdown",content:r.join(`

`)}),{thatTargets:e}}};function k7(t,e,r){let n=[],i=[];return UD(n,i,r,e.walk(),0),[`## ${t.filename} [${r}]
`,`\`\`\`${t.languageId}`,t.getText(r),"```","","```scm",...i,"```","","```js",...n,"```",""].join(`
`)}function UD(t,e,r,n,i){for(;;){let o=new H(n.startPosition.row,n.startPosition.column,n.endPosition.row,n.endPosition.column);if(r.intersection(o)!=null){let s="  ".repeat(i),l=M7(n),u=s+l;if(n.nodeIsNamed)t.push(`${u}${n.nodeType} [${o}]`),e.push(`${u}(${n.nodeType}`),n.gotoFirstChild()?(UD(t,e,r,n,i+1),n.gotoParent(),e.push(`${s})`)):e[e.length-1]+=")";else{let f=`"${n.nodeType}"`;t.push(`${u}${f} [${o}]`),e.push(`${u}${f}`)}}if(!n.gotoNextSibling())return}}function M7(t){let e=t.currentFieldName;return e!=null?`${e}: `:""}var qt=class{constructor(e){this.ensureSingleEditor=!1;this.ensureSingleTarget=!1;this.restoreSelection=!0;this.showDecorations=!0;this.callbackAction=new Ws(e),this.run=this.run.bind(this)}async run(e,{showDecorations:r}={}){let n=I().capabilities.commands[this.command];if(n==null)throw Error(`Action ${this.command} is not supported by your ide`);let{acceptsLocation:i}=n;return this.callbackAction.run(e,{callback:(o,s)=>P7(o,i?s.map(l=>l.contentRange):void 0,this.command),setSelection:!i,ensureSingleEditor:this.ensureSingleEditor,ensureSingleTarget:this.ensureSingleTarget,restoreSelection:this.restoreSelection,showDecorations:r??this.showDecorations})}},Rh=class extends qt{constructor(){super(...arguments);this.command="clipboardCopy";this.ensureSingleEditor=!0}},kh=class extends qt{constructor(){super(...arguments);this.command="toggleLineComment"}},Mh=class extends qt{constructor(){super(...arguments);this.command="indentLine"}},Ph=class extends qt{constructor(){super(...arguments);this.command="outdentLine"}},Ah=class extends qt{constructor(){super(...arguments);this.command="fold"}},Dh=class extends qt{constructor(){super(...arguments);this.command="unfold"}},Ih=class extends qt{constructor(){super(...arguments);this.command="rename";this.ensureSingleTarget=!0}},Fh=class extends qt{constructor(){super(...arguments);this.command="showReferences";this.ensureSingleTarget=!0}},Ch=class extends qt{constructor(){super(...arguments);this.command="quickFix";this.ensureSingleTarget=!0}},Nh=class extends qt{constructor(){super(...arguments);this.command="revealDefinition";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Oh=class extends qt{constructor(){super(...arguments);this.command="revealTypeDefinition";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Lh=class extends qt{constructor(){super(...arguments);this.command="showHover";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Uh=class extends qt{constructor(){super(...arguments);this.command="showDebugHover";this.ensureSingleTarget=!0;this.restoreSelection=!1}},Bh=class extends qt{constructor(){super(...arguments);this.command="extractVariable";this.ensureSingleTarget=!0;this.restoreSelection=!1}};function P7(t,e,r){switch(r){case"toggleLineComment":return t.toggleLineComment(e);case"indentLine":return t.indentLine(e);case"outdentLine":return t.outdentLine(e);case"clipboardCopy":return t.clipboardCopy(e);case"fold":return t.fold(e);case"unfold":return t.unfold(e);case"insertLineAfter":return t.insertLineAfter(e);case"rename":return t.rename(e?.[0]);case"showReferences":return t.showReferences(e?.[0]);case"quickFix":return t.quickFix(e?.[0]);case"revealDefinition":return t.revealDefinition(e?.[0]);case"revealTypeDefinition":return t.revealTypeDefinition(e?.[0]);case"showHover":return t.showHover(e?.[0]);case"showDebugHover":return t.showDebugHover(e?.[0]);case"extractVariable":return t.extractVariable(e?.[0]);case"highlight":throw Error("Highlight command not supported as simple action")}}var $l=class{constructor(e){this.actions=e;this.run=this.run.bind(this)}async run(e){e.length<2&&Vc(I().messages,"tooFewTargets",'This action works on multiple targets, e.g. "sort every line block" instead of "sort block".');let r=e.slice().sort((s,l)=>s.contentRange.start.compareTo(l.contentRange.start)),{returnValue:n}=await this.actions.getText.run(r,{showDecorations:!1}),i=this.sortTexts(n),{thatSelections:o}=await this.actions.replace.run(r.map(s=>s.toDestination("to")),i);return{thatSelections:o}}},Vh=class extends $l{sortTexts(e){return e.sort((r,n)=>r.localeCompare(n,void 0,{numeric:!0,caseFirst:"upper"}))}},Wh=class extends $l{sortTexts(e){return e.reverse()}},Hh=class extends $l{sortTexts(e){return jx(e)}};var jl=class{constructor(e){this.modifierStageFactory=e;this.getFinalStages=()=>[this.modifierStageFactory.create(Bs)];this.run=this.run.bind(this)}async run(e){let r=e.map(({thatTarget:n})=>n);return await je(I(),r,"referenced"),await st(e,async(n,i)=>{let o=i.map(s=>{let l=s.contentRange;return s.isLine?{type:"line",startLine:l.start.line,endLine:l.end.line}:{type:"inline",range:l}});await I().getEditableTextEditor(n).toggleBreakpoint(o)}),{thatTargets:e}}};var ql=class{constructor(e){this.rangeUpdater=e;this.run=this.run.bind(this)}async run(e,r,n){let i=await st(e,async(o,s)=>{let l=s.map(w=>({start:new Te(w.contentRange.start,w.contentRange.start),end:new Te(w.contentRange.end,w.contentRange.end)})),u=l.flatMap(({start:w,end:N})=>[{text:r,range:w},{text:n,range:N,isReplace:!0}]),f=s.map(w=>w.contentSelection),{boundariesStartSelections:d,boundariesEndSelections:h,sourceSelections:g,thatSelections:x}=await Be({rangeUpdater:this.rangeUpdater,editor:I().getEditableTextEditor(o),edits:u,selections:{boundariesStartSelections:{selections:l.map(({start:w})=>w),behavior:2},boundariesEndSelections:{selections:l.map(({end:w})=>w),behavior:3},sourceSelections:{selections:f,behavior:1},thatSelections:{selections:f,behavior:0}}}),v=[...d,...h];return await I().flashRanges(v.map(w=>({editor:o,range:tr(w),style:"justAdded"}))),{sourceMark:g.map(w=>({editor:o,selection:w})),thatMark:x.map(w=>({editor:o,selection:w}))}});return{sourceSelections:i.flatMap(({sourceMark:o})=>o),thatSelections:i.flatMap(({thatMark:o})=>o)}}};var zl=class{constructor(e,r,n){this.rangeUpdater=e;this.snippets=r;this.modifierStageFactory=n;this.snippetParser=new js;this.run=this.run.bind(this)}getFinalStages(e){let r=this.getScopeType(e);return r==null?[]:[new Is(this.modifierStageFactory,{type:"modifyIfUntyped",modifier:{type:"containingScope",scopeType:r}})]}getScopeType(e){if(e.type==="named"){let{name:r,variableName:n}=e,s=(this.snippets.getSnippetStrict(r).variables??{})[n]?.wrapperScopeType;return s==null?void 0:{type:s}}else return e.scopeType}getBody(e,r){if(e.type==="named"){let{name:n}=e,i=this.snippets.getSnippetStrict(n);return Th(this.modifierStageFactory,r,i.definitions).body.join(`
`)}else return e.body}async run(e,r){let n=I().getEditableTextEditor(vr(e)),i=this.getBody(r,e),o=this.snippetParser.parse(i);xh(o,r.variableName);let s=o.toTextmateString();await je(I(),e,"pendingModification0");let l=e.map(d=>d.contentSelection),u=()=>n.insertSnippet(s,l),{targetSelections:f}=await Be({rangeUpdater:this.rangeUpdater,editor:n,callback:u,preserveCursorSelections:!0,selections:{targetSelections:l}});return{thatSelections:f.map(d=>({editor:n,selection:d}))}}};var A7=/-?\d+(\.\d+)?/g,$h=class{constructor(e,r){this.actions=e;this.isIncrement=r;this.run=this.run.bind(this)}async run(e){let r=[];return await ua(e,n=>n.editor,async(n,i)=>{let o=await this.runOnEditor(n,i);r.push(...o)}),{thatSelections:r}}async runOnEditor(e,r){let{document:n}=e,i=[],o=[];for(let l of r){let u=n.offsetAt(l.contentRange.start),f=l.contentText,d=Bc(f,A7);for(let h of d)i.push(D7(e,u,h)),o.push(I7(this.isIncrement,h.text))}let{thatSelections:s}=await this.actions.replace.run(i,o);return s}},jh=class extends $h{constructor(e){super(e,!0)}},qh=class extends $h{constructor(e){super(e,!1)}};function D7(t,e,r){return new Ue({editor:t,isReversed:!1,contentRange:new H(t.document.positionAt(e+r.index),t.document.positionAt(e+r.index+r.text.length))}).toDestination("to")}function I7(t,e){return e.includes(".")?C7(t,e).toString():F7(t,e).toString()}function F7(t,e){let r=parseInt(e),n=1;return r+(t?n:-n)}function C7(t,e){let r=parseFloat(e),i=Math.abs(r)<=1?.1:1,o=r+(t?i:-i);return parseFloat(o.toPrecision(15))/1}var zh=class{constructor(e,r,n,i){this.treeSitter=e;this.snippets=r;this.rangeUpdater=n;this.modifierStageFactory=i;this.callAsFunction=new Rl(this);this.clearAndSetSelection=new kl(this);this.copyToClipboard=new Rh(this.rangeUpdater);this.cutToClipboard=new eh(this);this.decrement=new qh(this);this.deselect=new Ml;this.editNew=new th(this.rangeUpdater,this);this.editNewLineAfter=new ih(this,this.modifierStageFactory);this.editNewLineBefore=new nh(this,this.modifierStageFactory);this.executeCommand=new Pl(this.rangeUpdater);this.extractVariable=new Bh(this.rangeUpdater);this.findInDocument=new sh(this);this.findInWorkspace=new ch(this);this.foldRegion=new Ah(this.rangeUpdater);this.followLink=new Hs({openAside:!1});this.followLinkAside=new Hs({openAside:!0});this.generateSnippet=new $s(this.snippets);this.getText=new Il;this.highlight=new Fl;this.increment=new jh(this);this.indentLine=new Mh(this.rangeUpdater);this.insertCopyAfter=new ph(this.rangeUpdater,this.modifierStageFactory);this.insertCopyBefore=new uh(this.rangeUpdater,this.modifierStageFactory);this.insertEmptyLineAfter=new mh(this.rangeUpdater);this.insertEmptyLineBefore=new dh(this.rangeUpdater);this.insertEmptyLinesAround=new fh(this.rangeUpdater);this.insertSnippet=new Nl(this.rangeUpdater,this.snippets,this,this.modifierStageFactory);this.joinLines=new Ol(this.rangeUpdater);this.breakLine=new Qm(this.rangeUpdater);this.moveToTarget=new Xm(this.rangeUpdater);this.outdentLine=new Ph(this.rangeUpdater);this.pasteFromClipboard=new Sh(this.rangeUpdater,this);this.randomizeTargets=new Hh(this);this.remove=new Ll(this.rangeUpdater);this.rename=new Ih(this.rangeUpdater);this.replace=new Ul(this.rangeUpdater);this.replaceWithTarget=new Ym(this.rangeUpdater);this.revealDefinition=new Nh(this.rangeUpdater);this.revealTypeDefinition=new Oh(this.rangeUpdater);this.reverseTargets=new Wh(this);this.rewrapWithPairedDelimiter=new Bl(this.rangeUpdater,this.modifierStageFactory);this.scrollToBottom=new wh;this.scrollToCenter=new bh;this.scrollToTop=new vh;this["private.setKeyboardTarget"]=new Wl("keyboard");this["experimental.setInstanceReference"]=new Wl("instanceReference");this.setSelection=new qs;this.setSelectionAfter=new Eh;this.setSelectionBefore=new _h;this.showDebugHover=new Uh(this.rangeUpdater);this.showHover=new Lh(this.rangeUpdater);this.showQuickFix=new Ch(this.rangeUpdater);this.showReferences=new Fh(this.rangeUpdater);this.sortTargets=new Vh(this);this.swapTargets=new Jm(this.rangeUpdater);this.toggleLineBreakpoint=new jl(this.modifierStageFactory);this.toggleLineComment=new kh(this.rangeUpdater);this.unfoldRegion=new Dh(this.rangeUpdater);this.wrapWithPairedDelimiter=new ql(this.rangeUpdater);this.wrapWithSnippet=new zl(this.rangeUpdater,this.snippets,this.modifierStageFactory);this["private.showParseTree"]=new Hl(this.treeSitter);this["private.getTargets"]=new Dl}};async function BD(t,e,r){let n=await t.getFocusedElementType();if(n==null||n==="textEditor")return null;let i=r.action;switch(i.name){case"replace":return Gh(i.destination)&&Array.isArray(i.replaceWith)?{action:"insert",modifiers:Kh(i.destination),text:i.replaceWith.join(`
`)}:null;case"replaceWithTarget":return Gh(i.destination)?{action:"insert",modifiers:Kh(i.destination),text:await ev(e,i.source)}:null;case"moveToTarget":if(Gh(i.destination)){let o=await ev(e,i.source);return await N7(e,i.source),{action:"insert",modifiers:Kh(i.destination),text:o}}return null;case"callAsFunction":return Qh(i.argument)?{action:i.name,modifiers:Zh(i.argument),callee:await ev(e,i.callee)}:null;case"wrapWithPairedDelimiter":case"rewrapWithPairedDelimiter":return Qh(i.target)?{action:i.name,modifiers:Zh(i.target),left:i.left,right:i.right}:null;case"pasteFromClipboard":return Gh(i.destination)?{action:i.name,modifiers:Kh(i.destination)}:null;case"swapTargets":case"editNew":case"insertSnippet":case"generateSnippet":case"wrapWithSnippet":case"parsed":return null;default:return Qh(i.target)?{action:i.name,modifiers:Zh(i.target)}:null}}function Gh(t){return t.type==="implicit"?!0:t.type==="primitive"?t.insertionMode==="to"&&Qh(t.target):!1}function Qh(t){return t.type==="implicit"?!0:t.type==="primitive"?t.mark==null||t.mark.type==="cursor":!1}function Kh(t){return t.type==="primitive"?Zh(t.target):[]}function Zh(t){if(t.type==="primitive"){if(t.modifiers!=null&&t.modifiers.length>0)return t.modifiers;if(t.mark?.type==="cursor")return[{type:"containingTokenIfEmpty"}]}return[]}async function ev(t,e){return(await t({name:"getText",target:e})).returnValue.join(`
`)}async function N7(t,e){await t({name:"remove",target:e})}function VD(t,e){let{anchor:r,rangeType:n,active:i}=t;if(r.type!=="primitive"||n!=="continuous")return t;let o=r.modifiers.map((s,l)=>[s,l]);for(let[s,l]of o.reverse())for(let u of O7){let f=u.accept(s);if(f.accepted){let[d,h]=[r.modifiers.slice(0,l+1),r.modifiers.slice(l+1)],g={...t,anchor:h.length===0&&e?{type:"implicit"}:{type:"primitive",mark:r.mark,modifiers:h},active:kf(i,x=>{x.modifiers=x.modifiers.slice(Ic(x.modifiers,v=>u.accept(v).accepted)+1)})};return g=f.transformTarget?.(g)??g,{type:"primitive",mark:{type:"target",target:g},modifiers:d}}}return t}var O7=[{accept(t){return t.type==="everyScope"&&t.scopeType.type!=="instance"?{accepted:!0,transformTarget(e){return{...e,exclusionScopeType:t.scopeType}}}:{accepted:!1}}},{accept(t){return{accepted:(t.type==="everyScope"||t.type==="relativeScope"||t.type==="ordinalScope")&&t.scopeType.type==="instance"}}}];function rv(t,e){switch(t.type){case"list":return L7(t,e);case"range":return WD(t,e);case"primitive":return Yh(t,e);case"implicit":return t}}function L7(t,e){return{...t,elements:t.elements.map((r,n)=>{let i=e.concat(t.elements.slice(0,n));switch(r.type){case"range":return WD(r,i);case"primitive":return Yh(r,i)}})}}function WD(t,e){let r=U7(t,e),n=t.anchor.type==="implicit"||t.anchor.mark==null;return VD(r,n)}function U7(t,e){return{type:"range",rangeType:t.rangeType??"continuous",excludeAnchor:t.excludeAnchor??!1,excludeActive:t.excludeActive??!1,anchor:t.anchor.type==="implicit"?t.anchor:Yh(t.anchor,e),active:Yh(t.active,e.concat(t.anchor))}}function Yh(t,e){let r=tv(t.mark??(B7(t)?H7(e):null)??{type:"cursor"}),n=HD(t)??$7(e)??j7(e)??[];return{type:t.type,mark:r,modifiers:n}}function B7(t){return t.modifiers?.some(e=>e.type==="inferPreviousMark")??!1}function HD(t){let e=t.modifiers?.filter(r=>r.type!=="inferPreviousMark")??[];return e.length!==0?e:void 0}function V7(t){if(W7(t))return[{type:"containingScope",scopeType:{type:"line"}}]}function W7(t){let e=r=>r?.type==="lineNumber";return e(t.mark)?!0:t.mark?.type==="range"?e(t.mark.anchor)&&e(t.mark.active):!1}function H7(t){return Gl(t,e=>e.mark)}function $7(t){return Gl(t,HD)}function j7(t){return Gl(t,V7)}function Gl(t,e){for(let r=t.length-1;r>-1;--r){let n=t[r];switch(n.type){case"primitive":{let i=e(n);if(i!=null)return i;break}case"range":{let i=Gl([n.anchor],e);if(i!=null)return i;break}case"list":{let i=Gl(n.elements,e);if(i!=null)return i;break}}}}function tv(t){switch(t.type){case"range":return{...t,anchor:tv(t.anchor),active:tv(t.active)};case"target":return{type:"target",target:rv(t.target,[])};default:return t}}var Xh=class{constructor(e,r,n,i,o){this.commandServerApi=e;this.debug=r;this.storedTargets=n;this.pipelineRunner=i;this.actions=o;this.finalStages=[];this.runAction=this.runAction.bind(this),this.inferenceContext=new nv(this.debug)}async run(e){if(Vo(e)){let f=await BD(this.commandServerApi,this.runAction,e);if(f!=null)return{fallback:f}}let{returnValue:r,thatSelections:n,thatTargets:i,sourceSelections:o,sourceTargets:s,instanceReferenceTargets:l,keyboardTargets:u}=await this.runAction(e.action);return this.storedTargets.set("that",$D(i,n)),this.storedTargets.set("source",$D(s,o)),this.storedTargets.set("instanceReference",l),this.storedTargets.set("keyboard",u,{history:!0}),{returnValue:r}}runAction(e){switch(this.inferenceContext.reset(),this.finalStages=[],e.name){case"replaceWithTarget":return this.actions.replaceWithTarget.run(this.getTargets(e.source),this.getDestinations(e.destination));case"moveToTarget":return this.actions.moveToTarget.run(this.getTargets(e.source),this.getDestinations(e.destination));case"swapTargets":return this.actions.swapTargets.run(this.getTargets(e.target1),this.getTargets(e.target2));case"callAsFunction":return this.actions.callAsFunction.run(this.getTargets(e.callee),this.getTargets(e.argument));case"wrapWithPairedDelimiter":return this.actions.wrapWithPairedDelimiter.run(this.getTargets(e.target),e.left,e.right);case"rewrapWithPairedDelimiter":return this.finalStages=this.actions.rewrapWithPairedDelimiter.getFinalStages(),this.actions.rewrapWithPairedDelimiter.run(this.getTargets(e.target),e.left,e.right);case"pasteFromClipboard":return this.actions.pasteFromClipboard.run(this.getDestinations(e.destination));case"executeCommand":return this.actions.executeCommand.run(this.getTargets(e.target),e.commandId,e.options);case"replace":return this.actions.replace.run(this.getDestinations(e.destination),e.replaceWith);case"highlight":return this.actions.highlight.run(this.getTargets(e.target),e.highlightId);case"generateSnippet":return this.actions.generateSnippet.run(this.getTargets(e.target),e.snippetName);case"insertSnippet":return this.finalStages=this.actions.insertSnippet.getFinalStages(e.snippetDescription),this.actions.insertSnippet.run(this.getDestinations(e.destination),e.snippetDescription);case"wrapWithSnippet":return this.finalStages=this.actions.wrapWithSnippet.getFinalStages(e.snippetDescription),this.actions.wrapWithSnippet.run(this.getTargets(e.target),e.snippetDescription);case"editNew":return this.actions.editNew.run(this.getDestinations(e.destination));case"getText":return this.actions.getText.run(this.getTargets(e.target),e.options);case"parsed":return this.runAction(Zf(e.content,e.arguments));default:{let r=this.actions[e.name];return this.finalStages=r.getFinalStages?.()??[],this.noAutomaticTokenExpansion=r.noAutomaticTokenExpansion??!1,r.run(this.getTargets(e.target))}}}getTargets(e){let r=this.inferenceContext.run(e);return this.pipelineRunner.run(r,{actionFinalStages:this.finalStages,noAutomaticTokenExpansion:this.noAutomaticTokenExpansion})}getDestinations(e){switch(e.type){case"list":return e.destinations.flatMap(r=>this.getDestinations(r));case"primitive":return this.getTargets(e.target).map(r=>r.toDestination(e.insertionMode));case"implicit":return this.getTargets({type:"implicit"}).map(r=>r.toDestination("to"))}}},nv=class{constructor(e){this.debug=e;this.previousTargets=[]}run(e){let r=rv(e,this.previousTargets);return this.debug.active&&(this.debug.log("Full target:"),this.debug.log(JSON.stringify(r,null,2))),this.previousTargets.push(e),r}reset(){this.previousTargets=[]}};function $D(t,e){if(t!=null&&e!=null)throw Error("Actions may only return full targets or selections for that mark");return e!=null?e.map(oh):t}var Jh=class{constructor(e,r){this.readableHatMap=e;this.mark=r}run(){let e=this.readableHatMap.getToken(this.mark.symbolColor,this.mark.character);if(e==null)throw new Error(`Couldn't find mark ${this.mark.symbolColor} '${this.mark.character}'`);return[new Et({editor:e.editor,contentRange:e.range,isReversed:!1,hasExplicitRange:!1})]}};var eg=class{constructor(e){this.mark=e}run(){let{editorId:e,range:{start:r,end:n}}=this.mark,i=I().visibleTextEditors.find(s=>s.id===e);if(i==null)throw new Error(`Couldn't find editor '${e}'`);let o=new H(r.line,r.character,n.line,n.character);return[new Et({editor:i,contentRange:o,isReversed:!1,hasExplicitRange:!1})]}};var tg=class{constructor(e){this.mark=e}run(){let e=I().activeTextEditor;if(e==null)return[];let r=q7(e,this.mark.lineNumberType,this.mark.lineNumber),n=e.document.lineAt(r).range;return[oS(e,!1,n)]}},q7=(t,e,r)=>{switch(e){case"absolute":return r;case"relative":return t.selections[0].active.line+r;case"modulo100":{let i=t.visibleRanges[0].start.line,o=t.visibleRanges[t.visibleRanges.length-1].end.line,s=Math.floor(i/100)*100,l=[],u=[],f=s+r;for(;f<=o;)f>=i&&(t.visibleRanges.find(h=>f>=h.start.line&&f<=h.end.line)?l.push(f):u.push(f)),f+=100;if(l.length===1)return l[0];if(l.length+u.length>1)throw new Error("Multiple lines matching");if(u.length===1)return u[0];throw new Error("Line is not in viewport")}}};var rg=class{constructor(e){this.mark=e}run(){return[]}};var ng=class{constructor(e,r){this.markStageFactory=e;this.mark=r}run(){let e=this.markStageFactory.create(this.mark.anchor),r=this.markStageFactory.create(this.mark.active),n=e.run(),i=r.run();if(n.length!==1||i.length!==1)throw new Error("Expected single anchor and active target");return[mo(n[0],i[0],this.mark.excludeAnchor,this.mark.excludeActive)]}};var ig=class{constructor(e,r){this.storedTargets=e;this.key=r}run(){let e=this.storedTargets.get(this.key);if(e==null||e.length===0)throw Error(`No available ${this.key} marks`);return e}};var og=class{constructor(e,r){this.targetPipelineRunner=e;this.mark=r}run(){return this.targetPipelineRunner.run(this.mark.target)}};var ag=class{constructor(e,r){this.readableHatMap=e;this.storedTargets=r;this.create=this.create.bind(this)}setPipelineRunner(e){this.targetPipelineRunner=e}create(e){switch(e.type){case"cursor":return new ms;case"that":case"source":case"keyboard":return new ig(this.storedTargets,e.type);case"decoratedSymbol":return new Jh(this.readableHatMap,e);case"lineNumber":return new tg(e);case"range":return new ng(this,e);case"nothing":return new rg(e);case"target":return new og(this.targetPipelineRunner,e);case"explicit":return new eg(e)}}};async function jD(t,e,r,n,i,o,s,l,u,f){r.active&&(r.log("command:"),r.log(JSON.stringify(f,null,2)));let d=$T(f),h=await n.getReadableMap(d.usePrePhraseSnapshot),g=G7(t,e,s,r,o,h,i,l);for(let v of u)g=v.wrapCommandRunner(h,g);let x=await g.run(d);return await z7(f,x)}async function z7(t,e){if(Vo(t))return e;if("returnValue"in e)return e.returnValue}function G7(t,e,r,n,i,o,s,l){let u=new Vs(r,i,new bs(r)),f=new ag(o,i),d=new Rm(u,f);return f.setPipelineRunner(d),new Xh(e,n,i,d,new zh(t,s,l,u))}var qD=["clojure","csharp","css","latex","php","ruby","rust","scala","scss"];async function zD(t,e){await K7(t,e)}async function K7(t,e){let r=[];for(let n of qD)await t.loadLanguage(n),await e.loadLanguage(n),vi(_l[n]??{}).map(i=>{e.get(n)?.getScopeHandler({type:i})!=null&&r.push(`Scope '${i}' defined as both legacy and new for language ${n}`)});if(r.length>0)throw Error(r.join(`
`))}function GD(t){return Ik(t)?Zc(t.type).replace("."," "):t.type==="surroundingPair"?`Matching pair of ${Zc(t.delimiter)}`:t.type==="customRegex"?`Regex \`${t.regex}\``:"Unknown scope type"}var sg=class{constructor(e){this.customSpokenFormGenerator=e;this.listeners=[];this.disposable=e.onDidChangeCustomSpokenForms(()=>this.onChange()),this.onDidChangeScopeInfo=this.onDidChangeScopeInfo.bind(this),this.getScopeTypeInfo=this.getScopeTypeInfo.bind(this),this.updateScopeTypeInfos()}onDidChangeScopeInfo(e){return e(this.getScopeTypeInfos()),this.listeners.push(e),{dispose:()=>{Jt(this.listeners,e)}}}async onChange(){this.updateScopeTypeInfos(),this.listeners.forEach(e=>e(this.scopeInfos))}updateScopeTypeInfos(){let e=[...Bo.filter(r=>r!=="instance").map(r=>({type:r})),...xf.map(r=>({type:"surroundingPair",delimiter:r})),...this.customSpokenFormGenerator.getCustomRegexScopeTypes()];this.scopeInfos=e.map(r=>this.getScopeTypeInfo(r))}getScopeTypeInfos(){return this.scopeInfos}getScopeTypeInfo(e){return{scopeType:e,spokenForm:this.customSpokenFormGenerator.scopeTypeToSpokenForm(e),humanReadableName:GD(e),isLanguageSpecific:Q7(e)}}dispose(){this.disposable.dispose()}};function Q7(t){switch(t.type){case"string":case"argumentOrParameter":case"anonymousFunction":case"attribute":case"branch":case"class":case"className":case"collectionItem":case"collectionKey":case"command":case"comment":case"private.fieldAccess":case"functionCall":case"functionCallee":case"functionName":case"ifStatement":case"instance":case"list":case"map":case"name":case"namedFunction":case"regularExpression":case"statement":case"type":case"value":case"condition":case"section":case"sectionLevelOne":case"sectionLevelTwo":case"sectionLevelThree":case"sectionLevelFour":case"sectionLevelFive":case"sectionLevelSix":case"selector":case"private.switchStatementSubject":case"unit":case"xmlBothTags":case"xmlElement":case"xmlEndTag":case"xmlStartTag":case"part":case"chapter":case"subSection":case"subSubSection":case"namedParagraph":case"subParagraph":case"environment":case"textFragment":case"disqualifyDelimiter":return!0;case"character":case"word":case"token":case"identifier":case"line":case"sentence":case"paragraph":case"document":case"nonWhitespaceSequence":case"boundedNonWhitespaceSequence":case"url":case"notebookCell":case"surroundingPair":case"customRegex":case"glyph":return!1;case"oneOf":throw Error(`Can't decide whether scope type ${JSON.stringify(t,void 0,3)} is language-specific`)}}function iv(t,e,r){if(!r)return t.document.range;let n=t.visibleRanges.reduce((s,l)=>s.union(l));n=t.document.range.intersection(n.with(n.start.translate(-10),n.end.translate(10)));let i=Zp(Array.from(e.generateScopes(t,n.start,"forward",{containment:"required"})))?.domain??n,o=Zp(Array.from(e.generateScopes(t,n.end,"forward",{containment:"required"})))?.domain??n;return i.union(o)}function pa(t){return{contentRange:t.contentRange,removalRange:t.getRemovalRange(),removalHighlightRange:t.isLine?rn(t.getRemovalHighlightRange()):tr(t.getRemovalHighlightRange()),leadingDelimiter:KD(t.getLeadingDelimiterTarget()),trailingDelimiter:KD(t.getTrailingDelimiterTarget()),interior:t.getInterior()?.map(pa),boundary:t.getBoundary()?.map(pa),insertionDelimiter:t.insertionDelimiter}}function KD(t){return t!=null?pa(t):void 0}function QD(t,e,r,n,i){return xs(e.generateScopes(t,n.start,"forward",{includeDescendantScopes:!0,distalPosition:n.end}),o=>({domain:o.domain,ranges:o.getTargets(!1).map(s=>({range:s.contentRange,targets:i?Z7(r,s).map(pa):void 0}))}))}function Z7(t,e){try{return t.run(e)}catch(r){if(r.name==="NoContainingScopeError")return[];throw r}}function ZD(t,e,r){return xs(e.generateScopes(t,r.start,"forward",{includeDescendantScopes:!0,distalPosition:r.end}),n=>({domain:n.domain,targets:n.getTargets(!1).map(pa)}))}var cg=class{constructor(e,r){this.scopeHandlerFactory=e;this.modifierStageFactory=r;this.provideScopeRanges=this.provideScopeRanges.bind(this),this.provideIterationScopeRanges=this.provideIterationScopeRanges.bind(this)}provideScopeRanges(e,{scopeType:r,visibleOnly:n}){let i=this.scopeHandlerFactory.create(r,e.document.languageId);return i==null?[]:ZD(e,i,iv(e,i,n))}provideIterationScopeRanges(e,{scopeType:r,visibleOnly:n,includeNestedTargets:i}){let{languageId:o}=e.document,s=this.scopeHandlerFactory.create(r,o);if(s==null)return[];let l=this.scopeHandlerFactory.create(s.iterationScopeType,o);return l==null?[]:QD(e,l,this.modifierStageFactory.create({type:"everyScope",scopeType:r}),iv(e,s,n),i)}};var lg=class{constructor(e,r){this.scopeRangeProvider=r;this.disposables=[];this.listeners=[];this.onChange=this.onChange.bind(this),this.onDidChangeScopeRanges=this.onDidChangeScopeRanges.bind(this),this.onDidChangeIterationScopeRanges=this.onDidChangeIterationScopeRanges.bind(this);let n=new zn(I().configuration,()=>this.onChange());this.disposables.push(I().onDidChangeVisibleTextEditors(n.run),I().onDidOpenTextDocument(n.run),I().onDidCloseTextDocument(n.run),I().onDidChangeTextDocument(n.run),I().onDidChangeTextEditorVisibleRanges(n.run),e.onDidChangeDefinition(this.onChange),n)}onDidChangeScopeRanges(e,r){let n=()=>{I().visibleTextEditors.forEach(i=>{let o;try{o=this.scopeRangeProvider.provideScopeRanges(i,r)}catch(s){if(nt(I().messages,"ScopeRangeWatcher.provide",s.message),o=[],I().runMode==="test")throw s}e(i,o)})};return this.listeners.push(n),n(),{dispose:()=>{Jt(this.listeners,n)}}}onDidChangeIterationScopeRanges(e,r){let n=()=>{I().visibleTextEditors.forEach(i=>{e(i,this.scopeRangeProvider.provideIterationScopeRanges(i,r))})};return this.listeners.push(n),n(),{dispose:()=>{Jt(this.listeners,n)}}}onChange(){this.listeners.forEach(e=>e())}dispose(){this.disposables.forEach(({dispose:e})=>{try{e()}catch{}})}};var ug=class{constructor(e){this.scopeHandlerFactory=e;this.getScopeSupport=this.getScopeSupport.bind(this),this.getIterationScopeSupport=this.getIterationScopeSupport.bind(this)}getScopeSupport(e,r){let{languageId:n}=e.document,i=this.scopeHandlerFactory.create(r,n);return i==null?XD(n,r):YD(e,i)?0:1}getIterationScopeSupport(e,r){let{languageId:n}=e.document,i=this.scopeHandlerFactory.create(r,n);if(i==null)return XD(n,r);let o=this.scopeHandlerFactory.create(i.iterationScopeType,n);return o==null?3:YD(e,o)?0:1}};function YD(t,e){return!Nk(e.generateScopes(t,new se(0,0),"forward"))}function XD(t,e){switch(e.type){case"boundedNonWhitespaceSequence":case"surroundingPair":return 2;case"notebookCell":return 3;default:return _l[t]?.[e.type]!=null?2:3}}var pg=class{constructor(e,r,n){this.scopeSupportChecker=r;this.scopeInfoProvider=n;this.listeners=[];this.onChange=this.onChange.bind(this),this.onDidChangeScopeSupport=this.onDidChangeScopeSupport.bind(this);let i=new zn(I().configuration,()=>this.onChange());this.disposable=Ck(I().onDidOpenTextDocument(i.run),I().onDidCloseTextDocument(i.run),I().onDidChangeActiveTextEditor(i.run),I().onDidChangeTextDocument(i.run),e.onDidChangeDefinition(i.run),this.scopeInfoProvider.onDidChangeScopeInfo(this.onChange),i)}onDidChangeScopeSupport(e){return e(this.getSupportLevels()),this.listeners.push(e),{dispose:()=>{Jt(this.listeners,e)}}}onChange(){if(this.listeners.length===0)return;let e=this.getSupportLevels();this.listeners.forEach(r=>r(e))}getSupportLevels(){let e=I().activeTextEditor,r=e==null?()=>3:o=>this.scopeSupportChecker.getScopeSupport(e,o),n=e==null?()=>3:o=>this.scopeSupportChecker.getIterationScopeSupport(e,o);return this.scopeInfoProvider.getScopeTypeInfos().map(o=>({...o,support:r(o.scopeType),iterationScopeSupport:n(o.scopeType)}))}dispose(){this.disposable.dispose()}};async function JD({ide:t,hats:e,treeSitterQueryProvider:r,treeSitter:n=new Dd,commandServerApi:i=new Rd,talonSpokenForms:o=new Ad,snippets:s=new Pd}){td(t);let l=new Td(t),u=new Ed,f=new nd,d=new xd(t,f),h=new Cd(o),g=e!=null?new wd(u,l,e,i):new kd;g.allocateHats();let x=r?await hm.create(t,n,r):new Md;t.disposeOnExit(u,x,g,l,d);let v=[],w,N=A=>(w=A,jD(n,i,l,g,s,f,x,u,v,A));return{commandApi:{runCommand(A){return N(A)},runCommandSafe(...A){return N(Tf(A))},repeatPreviousCommand(){if(w==null)throw new Error("No previous command");return N(w)}},scopeProvider:X7(x,f,h),customSpokenFormGenerator:h,storedTargets:f,hatTokenMap:g,injectIde:td,runIntegrationTests:()=>zD(n,x),addCommandRunnerDecorator:A=>{v.push(A)}}}function X7(t,e,r){let n=new bs(t),i=new cg(n,new Vs(t,e,n)),o=new lg(t,i),s=new ug(n),l=new sg(r),u=new pg(t,s,l);return{provideScopeRanges:i.provideScopeRanges,provideIterationScopeRanges:i.provideIterationScopeRanges,onDidChangeScopeRanges:o.onDidChangeScopeRanges,onDidChangeIterationScopeRanges:o.onDidChangeIterationScopeRanges,getScopeSupport:s.getScopeSupport,getIterationScopeSupport:s.getIterationScopeSupport,onDidChangeScopeSupport:u.onDidChangeScopeSupport,getScopeInfo:l.getScopeTypeInfo,onDidChangeScopeInfo:l.onDidChangeScopeInfo}}function eI(t,e){switch(e.type){case"UntypedTarget":return new Et({editor:t,isReversed:e.isReversed,contentRange:lf(e.contentRange),hasExplicitRange:e.hasExplicitRange});case"LineTarget":return new Rn({editor:t,isReversed:e.isReversed,contentRange:lf(e.contentRange)});default:throw Error(`Unsupported target type ${e.type}`)}}var eUe=Symbol("unused");var Kl=class{constructor(e){this.position=e}},tUe={$0:new Kl(0),$1:new Kl(1),$2:new Kl(2)};var tI=require("node:events"),fg=class{constructor(){this.apis=new Map,this.commands=new Map,this.eventEmitter=new tI.EventEmitter}registerExtensionApi(e,r){this.apis.set(e,r)}getExtensionApi(e){return this.apis.get(e)}registerCommand(e,r){this.commands.set(e,r)}async executeCommand(e,...r){return await this.commands.get(e)(...r)}onEvent(e,r){return this.eventEmitter.on(e,r)}emitEvent(e,...r){return this.eventEmitter.emit(e,...r)}};function Vr(){return global._neovimRegistry==null&&(global._neovimRegistry=new fg),global._neovimRegistry}var rI="pokey.cursorless";async function dg(t,e){let r='return require("cursorless").buffer_get_selection()',[n,i,o,s,l]=await e.executeLua(r,[]),u;return l===!0?u=[new Te(new se(o-1,s-1),new se(n-1,i-1))]:u=[new Te(new se(n-1,i-1),new se(o-1,s-1))],console.debug(`bufferGetSelections(): selections=(${u[0].start.line}, ${u[0].start.character}), (${u[0].end.line}, ${u[0].end.character}) neovim=(${n},${i}),(${o},${s}),reverse=${l}`),u}async function nI(t,e){if(e.length!==1)throw new Error("bufferSetSelections() only supports one selection");let r=`return require("cursorless").select_range(${e[0].start.line+1}, ${e[0].start.character}, ${e[0].end.line+1}, ${e[0].end.character})`;console.debug(`bufferSetSelections() selections=(${e[0].start.line},${e[0].start.character}),(${e[0].end.line},${e[0].end.character}) luaCode="${r}"`),await t.executeLua(r,[])}async function iI(t,e,r){let n='return require("cursorless").window_get_visible_lines()',[i,o]=await e.executeLua(n,[]),s=new H(new se(i-1,0),new se(o-1,r[o-1].length-1));return console.debug(`windowGetVisibleRanges(): range=(${s.start.line}, ${s.start.character}), (${s.end.line}, ${s.end.character})`),[s]}async function oI(t){return await t.executeLua('return require("cursorless.utils").cursorless_nvim_path()',[])}async function mg(t,e){await e.callFunction("setreg",["*",t])}async function aI(t){return await t.callFunction("getreg",["*"])}async function sI(t){await t.executeLua('return require("cursorless.utils").paste()',[])}async function cI(t){await t.executeLua('return require("cursorless.utils").mode_switch_nt()',[])}async function lI(t){await t.executeLua('return require("cursorless.utils").mode_switch_t()',[])}async function uI(t,e){let r=`vim.notify("${e}")`;await t.executeLua(r,[])}var J7={clipboardCopy:{acceptsLocation:!1},toggleLineComment:void 0,indentLine:void 0,outdentLine:void 0,rename:void 0,quickFix:void 0,revealDefinition:void 0,revealTypeDefinition:void 0,showHover:void 0,showDebugHover:void 0,extractVariable:void 0,fold:void 0,highlight:{acceptsLocation:!0},unfold:void 0,showReferences:void 0,insertLineAfter:void 0},hg=class{constructor(){this.commands=J7}};var Ql=class{constructor(e){this.client=e}async readText(){return await aI(this.client)}async writeText(e){return await mg(e,this.client)}};var gg=dr(ov(),1);var Yl=class{constructor(){this.notifier=new Vt;this.mocks={...rf};this.scopes=[];this.onDidChangeConfiguration=this.notifier.registerListener;this.onDidChangeConfiguration=this.onDidChangeConfiguration.bind(this)}getOwnConfiguration(e,r){if(r!=null){for(let{scope:n,values:i}of this.scopes)if(eQ(n,r))return(0,gg.get)(i,e)??(0,gg.get)(this.mocks,e)}return(0,gg.get)(this.mocks,e)}mockConfiguration(e,r){this.mocks[e]=r,this.notifier.notifyListeners()}mockConfigurationScope(e,r,n=!1){this.scopes.push({scope:e,values:r}),n||this.notifier.notifyListeners()}};function eQ(t,e){return t.languageId===e.languageId}async function av(t,e,r,n){console.debug("neovimEdit() [unsorted]:");for(let s of n)console.debug(`	range=${JSON.stringify(s.range)}, text='${s.text}', isReplace=${s.isReplace}`);n.sort((s,l)=>(pI(s)||fI(s))&&(pI(l)||fI(l))?1:s.range.start.line===l.range.start.line?l.range.start.character-s.range.start.character:l.range.start.line-s.range.start.line),console.debug("neovimEdit() [sorted]:");for(let s of n)console.debug(`	range=${JSON.stringify(s.range)}, text='${s.text}', isReplace=${s.isReplace}`);let i=e.getTextDocument(await t.window.buffer),o=[];for(let s of n)o.push({range:s.range,rangeOffset:i.offsetAt(s.range.start),rangeLength:i.offsetAt(s.range.end)-i.offsetAt(s.range.start),text:s.text});Vr().emitEvent("onDidChangeTextDocument",{document:i,contentChanges:o});for(let s of n){let{range:l,text:u,isReplace:f}=s;u===""?await dI(t,l):l.isEmpty&&!f?await mI(t,l.start,u):await tQ(t,l,u)}return await e.updateTextEditor(),!0}async function dI(t,e){console.debug(`neovimDelete(): range=${JSON.stringify(e)}`);let r=await t.window.buffer,n=(await r.getLines({start:e.end.line,end:e.end.line+1,strictIndexing:!0}))[0],i=n.slice(e.end.character);if(e.start.line===e.end.line){let l=n.slice(0,e.start.character)+i;await r.setLines(l,{start:e.start.line,end:e.start.line+1,strictIndexing:!0});return}if(e.start.character===0){await r.setLines(i,{start:e.start.line,end:e.end.line+1,strictIndexing:!0});return}let o=(await r.getLines({start:e.start.line,end:e.start.line+1,strictIndexing:!0}))[0],s=o.slice(0,e.start.character);if(e.start.character<=o.length){await r.setLines(s+i,{start:e.start.line,end:e.end.line+1,strictIndexing:!0});return}await r.setLines([s,i],{start:e.start.line,end:e.end.line+1,strictIndexing:!0})}async function mI(t,e,r){console.debug(`neovimInsert(): position=${JSON.stringify(e)}, text='${r}'`);let n=r.replace(/(?:\r\n|\r|\n)/g,`
`).split(`
`),i=await t.window.buffer,o=(await i.getLines({start:e.line,end:e.line+1,strictIndexing:!0}))[0],s=o.slice(0,e.character),l=o.slice(e.character);if(n.length===1){let d=s+n[0]+l;await i.setLines(d,{start:e.line,end:e.line+1,strictIndexing:!0});return}let u=s+n[0],f=n[n.length-1]+l;await i.setLines([u,...n.slice(1,n.length-1),f],{start:e.line,end:e.line+1,strictIndexing:!0})}async function tQ(t,e,r){console.debug(`neovimReplace(): range=${JSON.stringify(e)}, text='${r}'`),await dI(t,e),await mI(t,e.start,r)}function pI(t){return t.range.isEmpty&&!t.isReplace}function fI(t){return t.text!==""&&!!(!t.range.isEmpty||t.isReplace)}function hI(t){return Vr().onEvent("onDidChangeTextDocument",t),yI()}function gI(t,e,r){return Vr().onEvent("onDidOpenTextDocument",t),yI()}function yI(){return{dispose(){}}}var Xl=class{constructor(){this.data={...nf}}get(e){return this.data[e]}set(e,r){return this.data[e]=r,Promise.resolve()}};var SF=dr(ov(),1);var Jl=class{async showMessage(e,r,n,...i){}};async function xI(t,e){let r=e.activeTextEditor,n=await t.window,i=await dg(n,t),o=r.document.getText(i[0]);await mg(o,t)}async function TI(t,e){await sI(t)}var yg=class{constructor(e,r,n,i,o,s,l){this.id=e;this.client=r;this.neovimIDE=n;this.window=i;this._document=o,this._selections=l,this._visibleRanges=s}get document(){return this._document}updateDocument(e,r,n,i){if(n)this._document=n;else if(i)this._document.update(i);else throw Error("updateDocument(): invalid arguments");return this._selections=r,this._visibleRanges=e,this._document}get selections(){return this._selections}async setSelections(e){this._selections=e,await nI(this.client,e)}get visibleRanges(){return this._visibleRanges}get options(){throw Error("get options Not implemented")}set options(e){throw Error("set options Not implemented")}get isActive(){return!0}isEqual(e){return this.id===e.id}async revealRange(e){}revealLine(e,r){throw Error("revealLine Not implemented")}async edit(e){return await av(this.client,this.neovimIDE,this.window,e)}focus(){return Promise.resolve()}editNewNotebookCellAbove(){throw Error("editNewNotebookCellAbove Not implemented")}editNewNotebookCellBelow(){throw Error("editNewNotebookCellBelow Not implemented")}openLink(e,r){throw Error("openLink Not implemented")}fold(e){throw Error("fold Not implemented")}unfold(e){throw Error("unfold Not implemented")}toggleBreakpoint(e){throw Error("toggleBreakpoint Not implemented")}async toggleLineComment(e){throw Error("toggleLineComment Not implemented")}async clipboardCopy(e){await xI(this.client,this.neovimIDE)}async clipboardPaste(e){await TI(this.client,this.neovimIDE)}async indentLine(e){throw Error("indentLine Not implemented")}async outdentLine(e){throw Error("outdentLine Not implemented")}async insertLineAfter(e){throw Error("insertLineAfter Not implemented")}insertSnippet(e,r){throw Error("insertSnippet Not implemented")}async rename(e){throw Error("rename Not implemented")}async showReferences(e){throw Error("showReferences Not implemented")}async quickFix(e){throw Error("quickFix Not implemented")}async revealDefinition(e){throw Error("revealDefinition Not implemented")}async revealTypeDefinition(e){throw Error("revealTypeDefinition Not implemented")}async showHover(e){throw Error("showHover Not implemented")}async showDebugHover(e){throw Error("showDebugHover Not implemented")}async extractVariable(e){throw Error("extractVariable Not implemented")}};var kb=dr(require("path"),1);var SI;(()=>{"use strict";var t={470:i=>{function o(u){if(typeof u!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(u))}function s(u,f){for(var d,h="",g=0,x=-1,v=0,w=0;w<=u.length;++w){if(w<u.length)d=u.charCodeAt(w);else{if(d===47)break;d=47}if(d===47){if(!(x===w-1||v===1))if(x!==w-1&&v===2){if(h.length<2||g!==2||h.charCodeAt(h.length-1)!==46||h.charCodeAt(h.length-2)!==46){if(h.length>2){var N=h.lastIndexOf("/");if(N!==h.length-1){N===-1?(h="",g=0):g=(h=h.slice(0,N)).length-1-h.lastIndexOf("/"),x=w,v=0;continue}}else if(h.length===2||h.length===1){h="",g=0,x=w,v=0;continue}}f&&(h.length>0?h+="/..":h="..",g=2)}else h.length>0?h+="/"+u.slice(x+1,w):h=u.slice(x+1,w),g=w-x-1;x=w,v=0}else d===46&&v!==-1?++v:v=-1}return h}var l={resolve:function(){for(var u,f="",d=!1,h=arguments.length-1;h>=-1&&!d;h--){var g;h>=0?g=arguments[h]:(u===void 0&&(u=process.cwd()),g=u),o(g),g.length!==0&&(f=g+"/"+f,d=g.charCodeAt(0)===47)}return f=s(f,!d),d?f.length>0?"/"+f:"/":f.length>0?f:"."},normalize:function(u){if(o(u),u.length===0)return".";var f=u.charCodeAt(0)===47,d=u.charCodeAt(u.length-1)===47;return(u=s(u,!f)).length!==0||f||(u="."),u.length>0&&d&&(u+="/"),f?"/"+u:u},isAbsolute:function(u){return o(u),u.length>0&&u.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var u,f=0;f<arguments.length;++f){var d=arguments[f];o(d),d.length>0&&(u===void 0?u=d:u+="/"+d)}return u===void 0?".":l.normalize(u)},relative:function(u,f){if(o(u),o(f),u===f||(u=l.resolve(u))===(f=l.resolve(f)))return"";for(var d=1;d<u.length&&u.charCodeAt(d)===47;++d);for(var h=u.length,g=h-d,x=1;x<f.length&&f.charCodeAt(x)===47;++x);for(var v=f.length-x,w=g<v?g:v,N=-1,A=0;A<=w;++A){if(A===w){if(v>w){if(f.charCodeAt(x+A)===47)return f.slice(x+A+1);if(A===0)return f.slice(x+A)}else g>w&&(u.charCodeAt(d+A)===47?N=A:A===0&&(N=0));break}var U=u.charCodeAt(d+A);if(U!==f.charCodeAt(x+A))break;U===47&&(N=A)}var Z="";for(A=d+N+1;A<=h;++A)A!==h&&u.charCodeAt(A)!==47||(Z.length===0?Z+="..":Z+="/..");return Z.length>0?Z+f.slice(x+N):(x+=N,f.charCodeAt(x)===47&&++x,f.slice(x))},_makeLong:function(u){return u},dirname:function(u){if(o(u),u.length===0)return".";for(var f=u.charCodeAt(0),d=f===47,h=-1,g=!0,x=u.length-1;x>=1;--x)if((f=u.charCodeAt(x))===47){if(!g){h=x;break}}else g=!1;return h===-1?d?"/":".":d&&h===1?"//":u.slice(0,h)},basename:function(u,f){if(f!==void 0&&typeof f!="string")throw new TypeError('"ext" argument must be a string');o(u);var d,h=0,g=-1,x=!0;if(f!==void 0&&f.length>0&&f.length<=u.length){if(f.length===u.length&&f===u)return"";var v=f.length-1,w=-1;for(d=u.length-1;d>=0;--d){var N=u.charCodeAt(d);if(N===47){if(!x){h=d+1;break}}else w===-1&&(x=!1,w=d+1),v>=0&&(N===f.charCodeAt(v)?--v==-1&&(g=d):(v=-1,g=w))}return h===g?g=w:g===-1&&(g=u.length),u.slice(h,g)}for(d=u.length-1;d>=0;--d)if(u.charCodeAt(d)===47){if(!x){h=d+1;break}}else g===-1&&(x=!1,g=d+1);return g===-1?"":u.slice(h,g)},extname:function(u){o(u);for(var f=-1,d=0,h=-1,g=!0,x=0,v=u.length-1;v>=0;--v){var w=u.charCodeAt(v);if(w!==47)h===-1&&(g=!1,h=v+1),w===46?f===-1?f=v:x!==1&&(x=1):f!==-1&&(x=-1);else if(!g){d=v+1;break}}return f===-1||h===-1||x===0||x===1&&f===h-1&&f===d+1?"":u.slice(f,h)},format:function(u){if(u===null||typeof u!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof u);return function(f,d){var h=d.dir||d.root,g=d.base||(d.name||"")+(d.ext||"");return h?h===d.root?h+g:h+"/"+g:g}(0,u)},parse:function(u){o(u);var f={root:"",dir:"",base:"",ext:"",name:""};if(u.length===0)return f;var d,h=u.charCodeAt(0),g=h===47;g?(f.root="/",d=1):d=0;for(var x=-1,v=0,w=-1,N=!0,A=u.length-1,U=0;A>=d;--A)if((h=u.charCodeAt(A))!==47)w===-1&&(N=!1,w=A+1),h===46?x===-1?x=A:U!==1&&(U=1):x!==-1&&(U=-1);else if(!N){v=A+1;break}return x===-1||w===-1||U===0||U===1&&x===w-1&&x===v+1?w!==-1&&(f.base=f.name=v===0&&g?u.slice(1,w):u.slice(v,w)):(v===0&&g?(f.name=u.slice(1,x),f.base=u.slice(1,w)):(f.name=u.slice(v,x),f.base=u.slice(v,w)),f.ext=u.slice(x,w)),v>0?f.dir=u.slice(0,v-1):g&&(f.dir="/"),f},sep:"/",delimiter:":",win32:null,posix:null};l.posix=l,i.exports=l}},e={};function r(i){var o=e[i];if(o!==void 0)return o.exports;var s=e[i]={exports:{}};return t[i](s,s.exports,r),s.exports}r.d=(i,o)=>{for(var s in o)r.o(o,s)&&!r.o(i,s)&&Object.defineProperty(i,s,{enumerable:!0,get:o[s]})},r.o=(i,o)=>Object.prototype.hasOwnProperty.call(i,o),r.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})};var n={};(()=>{let i;r.r(n),r.d(n,{URI:()=>g,Utils:()=>O}),typeof process=="object"?i=process.platform==="win32":typeof navigator=="object"&&(i=navigator.userAgent.indexOf("Windows")>=0);let o=/^\w[\w\d+.-]*$/,s=/^\//,l=/^\/\//;function u(C,D){if(!C.scheme&&D)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${C.authority}", path: "${C.path}", query: "${C.query}", fragment: "${C.fragment}"}`);if(C.scheme&&!o.test(C.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(C.path){if(C.authority){if(!s.test(C.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(l.test(C.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}let f="",d="/",h=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class g{static isUri(D){return D instanceof g||!!D&&typeof D.authority=="string"&&typeof D.fragment=="string"&&typeof D.path=="string"&&typeof D.query=="string"&&typeof D.scheme=="string"&&typeof D.fsPath=="string"&&typeof D.with=="function"&&typeof D.toString=="function"}scheme;authority;path;query;fragment;constructor(D,$,q,K,Q,te=!1){typeof D=="object"?(this.scheme=D.scheme||f,this.authority=D.authority||f,this.path=D.path||f,this.query=D.query||f,this.fragment=D.fragment||f):(this.scheme=function(me,re){return me||re?me:"file"}(D,te),this.authority=$||f,this.path=function(me,re){switch(me){case"https":case"http":case"file":re?re[0]!==d&&(re=d+re):re=d}return re}(this.scheme,q||f),this.query=K||f,this.fragment=Q||f,u(this,te))}get fsPath(){return U(this,!1)}with(D){if(!D)return this;let{scheme:$,authority:q,path:K,query:Q,fragment:te}=D;return $===void 0?$=this.scheme:$===null&&($=f),q===void 0?q=this.authority:q===null&&(q=f),K===void 0?K=this.path:K===null&&(K=f),Q===void 0?Q=this.query:Q===null&&(Q=f),te===void 0?te=this.fragment:te===null&&(te=f),$===this.scheme&&q===this.authority&&K===this.path&&Q===this.query&&te===this.fragment?this:new v($,q,K,Q,te)}static parse(D,$=!1){let q=h.exec(D);return q?new v(q[2]||f,de(q[4]||f),de(q[5]||f),de(q[7]||f),de(q[9]||f),$):new v(f,f,f,f,f)}static file(D){let $=f;if(i&&(D=D.replace(/\\/g,d)),D[0]===d&&D[1]===d){let q=D.indexOf(d,2);q===-1?($=D.substring(2),D=d):($=D.substring(2,q),D=D.substring(q)||d)}return new v("file",$,D,f,f)}static from(D){let $=new v(D.scheme,D.authority,D.path,D.query,D.fragment);return u($,!0),$}toString(D=!1){return Z(this,D)}toJSON(){return this}static revive(D){if(D){if(D instanceof g)return D;{let $=new v(D);return $._formatted=D.external,$._fsPath=D._sep===x?D.fsPath:null,$}}return D}}let x=i?1:void 0;class v extends g{_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=U(this,!1)),this._fsPath}toString(D=!1){return D?Z(this,!0):(this._formatted||(this._formatted=Z(this,!1)),this._formatted)}toJSON(){let D={$mid:1};return this._fsPath&&(D.fsPath=this._fsPath,D._sep=x),this._formatted&&(D.external=this._formatted),this.path&&(D.path=this.path),this.scheme&&(D.scheme=this.scheme),this.authority&&(D.authority=this.authority),this.query&&(D.query=this.query),this.fragment&&(D.fragment=this.fragment),D}}let w={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function N(C,D,$){let q,K=-1;for(let Q=0;Q<C.length;Q++){let te=C.charCodeAt(Q);if(te>=97&&te<=122||te>=65&&te<=90||te>=48&&te<=57||te===45||te===46||te===95||te===126||D&&te===47||$&&te===91||$&&te===93||$&&te===58)K!==-1&&(q+=encodeURIComponent(C.substring(K,Q)),K=-1),q!==void 0&&(q+=C.charAt(Q));else{q===void 0&&(q=C.substr(0,Q));let me=w[te];me!==void 0?(K!==-1&&(q+=encodeURIComponent(C.substring(K,Q)),K=-1),q+=me):K===-1&&(K=Q)}}return K!==-1&&(q+=encodeURIComponent(C.substring(K))),q!==void 0?q:C}function A(C){let D;for(let $=0;$<C.length;$++){let q=C.charCodeAt($);q===35||q===63?(D===void 0&&(D=C.substr(0,$)),D+=w[q]):D!==void 0&&(D+=C[$])}return D!==void 0?D:C}function U(C,D){let $;return $=C.authority&&C.path.length>1&&C.scheme==="file"?`//${C.authority}${C.path}`:C.path.charCodeAt(0)===47&&(C.path.charCodeAt(1)>=65&&C.path.charCodeAt(1)<=90||C.path.charCodeAt(1)>=97&&C.path.charCodeAt(1)<=122)&&C.path.charCodeAt(2)===58?D?C.path.substr(1):C.path[1].toLowerCase()+C.path.substr(2):C.path,i&&($=$.replace(/\//g,"\\")),$}function Z(C,D){let $=D?A:N,q="",{scheme:K,authority:Q,path:te,query:me,fragment:re}=C;if(K&&(q+=K,q+=":"),(Q||K==="file")&&(q+=d,q+=d),Q){let Re=Q.indexOf("@");if(Re!==-1){let sr=Q.substr(0,Re);Q=Q.substr(Re+1),Re=sr.lastIndexOf(":"),Re===-1?q+=$(sr,!1,!1):(q+=$(sr.substr(0,Re),!1,!1),q+=":",q+=$(sr.substr(Re+1),!1,!0)),q+="@"}Q=Q.toLowerCase(),Re=Q.lastIndexOf(":"),Re===-1?q+=$(Q,!1,!0):(q+=$(Q.substr(0,Re),!1,!0),q+=Q.substr(Re))}if(te){if(te.length>=3&&te.charCodeAt(0)===47&&te.charCodeAt(2)===58){let Re=te.charCodeAt(1);Re>=65&&Re<=90&&(te=`/${String.fromCharCode(Re+32)}:${te.substr(3)}`)}else if(te.length>=2&&te.charCodeAt(1)===58){let Re=te.charCodeAt(0);Re>=65&&Re<=90&&(te=`${String.fromCharCode(Re+32)}:${te.substr(2)}`)}q+=$(te,!0,!1)}return me&&(q+="?",q+=$(me,!1,!1)),re&&(q+="#",q+=D?re:N(re,!1,!1)),q}function ne(C){try{return decodeURIComponent(C)}catch{return C.length>3?C.substr(0,3)+ne(C.substr(3)):C}}let he=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function de(C){return C.match(he)?C.replace(he,D=>ne(D)):C}var dt=r(470);let At=dt.posix||dt,it="/";var O;(function(C){C.joinPath=function(D,...$){return D.with({path:At.join(D.path,...$)})},C.resolvePath=function(D,...$){let q=D.path,K=!1;q[0]!==it&&(q=it+q,K=!0);let Q=At.resolve(q,...$);return K&&Q[0]===it&&!D.authority&&(Q=Q.substring(1)),D.with({path:Q})},C.dirname=function(D){if(D.path.length===0||D.path===it)return D;let $=At.dirname(D.path);return $.length===1&&$.charCodeAt(0)===46&&($=""),D.with({path:$})},C.basename=function(D){return At.basename(D.path)},C.extname=function(D){return At.extname(D.path)}})(O||(O={}))})(),SI=n})();var{URI:vI,Utils:l2e}=SI;var HI=dr(CI(),1);var tu=t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>65536)throw new TypeError("pattern is too long")};var lQ={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},ru=t=>t.replace(/[[\]\\-]/g,"\\$&"),uQ=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),NI=t=>t.join(""),OI=(t,e)=>{let r=e;if(t.charAt(r)!=="[")throw new Error("not in a brace expression");let n=[],i=[],o=r+1,s=!1,l=!1,u=!1,f=!1,d=r,h="";e:for(;o<t.length;){let w=t.charAt(o);if((w==="!"||w==="^")&&o===r+1){f=!0,o++;continue}if(w==="]"&&s&&!u){d=o+1;break}if(s=!0,w==="\\"&&!u){u=!0,o++;continue}if(w==="["&&!u){for(let[N,[A,U,Z]]of Object.entries(lQ))if(t.startsWith(N,o)){if(h)return["$.",!1,t.length-r,!0];o+=N.length,Z?i.push(A):n.push(A),l=l||U;continue e}}if(u=!1,h){w>h?n.push(ru(h)+"-"+ru(w)):w===h&&n.push(ru(w)),h="",o++;continue}if(t.startsWith("-]",o+1)){n.push(ru(w+"-")),o+=2;continue}if(t.startsWith("-",o+1)){h=w,o+=2;continue}n.push(ru(w)),o++}if(d<o)return["",!1,0,!1];if(!n.length&&!i.length)return["$.",!1,t.length-r,!0];if(i.length===0&&n.length===1&&/^\\?.$/.test(n[0])&&!f){let w=n[0].length===2?n[0].slice(-1):n[0];return[uQ(w),!1,d-r,!1]}let g="["+(f?"^":"")+NI(n)+"]",x="["+(f?"":"^")+NI(i)+"]";return[n.length&&i.length?"("+g+"|"+x+")":n.length?g:x,l,d-r,!0]};var Dn=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1");var pQ=new Set(["!","?","+","*","@"]),LI=t=>pQ.has(t),fQ="(?!(?:^|/)\\.\\.?(?:$|/))",xg="(?!\\.)",dQ=new Set(["[","."]),mQ=new Set(["..","."]),hQ=new Set("().*{}+?[]^$\\!"),gQ=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),lv="[^/]",UI=lv+"*?",BI=lv+"+?",Gs=class t{type;#e;#r;#o=!1;#n=[];#a;#S;#l;#p=!1;#c;#s;#i=!1;constructor(e,r,n={}){this.type=e,e&&(this.#r=!0),this.#a=r,this.#e=this.#a?this.#a.#e:this,this.#c=this.#e===this?n:this.#e.#c,this.#l=this.#e===this?[]:this.#e.#l,e==="!"&&!this.#e.#p&&this.#l.push(this),this.#S=this.#a?this.#a.#n.length:0}get hasMagic(){if(this.#r!==void 0)return this.#r;for(let e of this.#n)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#r=!0;return this.#r}toString(){return this.#s!==void 0?this.#s:this.type?this.#s=this.type+"("+this.#n.map(e=>String(e)).join("|")+")":this.#s=this.#n.map(e=>String(e)).join("")}#g(){if(this!==this.#e)throw new Error("should only call on root");if(this.#p)return this;this.toString(),this.#p=!0;let e;for(;e=this.#l.pop();){if(e.type!=="!")continue;let r=e,n=r.#a;for(;n;){for(let i=r.#S+1;!n.type&&i<n.#n.length;i++)for(let o of e.#n){if(typeof o=="string")throw new Error("string part in extglob AST??");o.copyIn(n.#n[i])}r=n,n=r.#a}}return this}push(...e){for(let r of e)if(r!==""){if(typeof r!="string"&&!(r instanceof t&&r.#a===this))throw new Error("invalid part: "+r);this.#n.push(r)}}toJSON(){let e=this.type===null?this.#n.slice().map(r=>typeof r=="string"?r:r.toJSON()):[this.type,...this.#n.map(r=>r.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#p&&this.#a?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#a?.isStart())return!1;if(this.#S===0)return!0;let e=this.#a;for(let r=0;r<this.#S;r++){let n=e.#n[r];if(!(n instanceof t&&n.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#a?.type==="!")return!0;if(!this.#a?.isEnd())return!1;if(!this.type)return this.#a?.isEnd();let e=this.#a?this.#a.#n.length:0;return this.#S===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let r=new t(this.type,e);for(let n of this.#n)r.copyIn(n);return r}static#y(e,r,n,i){let o=!1,s=!1,l=-1,u=!1;if(r.type===null){let x=n,v="";for(;x<e.length;){let w=e.charAt(x++);if(o||w==="\\"){o=!o,v+=w;continue}if(s){x===l+1?(w==="^"||w==="!")&&(u=!0):w==="]"&&!(x===l+2&&u)&&(s=!1),v+=w;continue}else if(w==="["){s=!0,l=x,u=!1,v+=w;continue}if(!i.noext&&LI(w)&&e.charAt(x)==="("){r.push(v),v="";let N=new t(w,r);x=t.#y(e,N,x,i),r.push(N);continue}v+=w}return r.push(v),x}let f=n+1,d=new t(null,r),h=[],g="";for(;f<e.length;){let x=e.charAt(f++);if(o||x==="\\"){o=!o,g+=x;continue}if(s){f===l+1?(x==="^"||x==="!")&&(u=!0):x==="]"&&!(f===l+2&&u)&&(s=!1),g+=x;continue}else if(x==="["){s=!0,l=f,u=!1,g+=x;continue}if(LI(x)&&e.charAt(f)==="("){d.push(g),g="";let v=new t(x,d);d.push(v),f=t.#y(e,v,f,i);continue}if(x==="|"){d.push(g),g="",h.push(d),d=new t(null,r);continue}if(x===")")return g===""&&r.#n.length===0&&(r.#i=!0),d.push(g),g="",r.push(...h,d),f;g+=x}return r.type=null,r.#r=void 0,r.#n=[e.substring(n-1)],f}static fromGlob(e,r={}){let n=new t(null,void 0,r);return t.#y(e,n,0,r),n}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[r,n,i,o]=this.toRegExpSource();if(!(i||this.#r||this.#c.nocase&&!this.#c.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return n;let l=(this.#c.nocase?"i":"")+(o?"u":"");return Object.assign(new RegExp(`^${r}$`,l),{_src:r,_glob:e})}toRegExpSource(e){let r=e??!!this.#c.dot;if(this.#e===this&&this.#g(),!this.type){let u=this.isStart()&&this.isEnd(),f=this.#n.map(x=>{let[v,w,N,A]=typeof x=="string"?t.#f(x,this.#r,u):x.toRegExpSource(e);return this.#r=this.#r||N,this.#o=this.#o||A,v}).join(""),d="";if(this.isStart()&&typeof this.#n[0]=="string"&&!(this.#n.length===1&&mQ.has(this.#n[0]))){let v=dQ,w=r&&v.has(f.charAt(0))||f.startsWith("\\.")&&v.has(f.charAt(2))||f.startsWith("\\.\\.")&&v.has(f.charAt(4)),N=!r&&!e&&v.has(f.charAt(0));d=w?fQ:N?xg:""}let h="";return this.isEnd()&&this.#e.#p&&this.#a?.type==="!"&&(h="(?:$|\\/)"),[d+f+h,Dn(f),this.#r=!!this.#r,this.#o]}let n=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",o=this.#d(r);if(this.isStart()&&this.isEnd()&&!o&&this.type!=="!"){let u=this.toString();return this.#n=[u],this.type=null,this.#r=void 0,[u,Dn(this.toString()),!1,!1]}let s=!n||e||r||!xg?"":this.#d(!0);s===o&&(s=""),s&&(o=`(?:${o})(?:${s})*?`);let l="";if(this.type==="!"&&this.#i)l=(this.isStart()&&!r?xg:"")+BI;else{let u=this.type==="!"?"))"+(this.isStart()&&!r&&!e?xg:"")+UI+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&s?")":this.type==="*"&&s?")?":`)${this.type}`;l=i+o+u}return[l,Dn(o),this.#r=!!this.#r,this.#o]}#d(e){return this.#n.map(r=>{if(typeof r=="string")throw new Error("string type in extglob ast??");let[n,i,o,s]=r.toRegExpSource(e);return this.#o=this.#o||s,n}).filter(r=>!(this.isStart()&&this.isEnd())||!!r).join("|")}static#f(e,r,n=!1){let i=!1,o="",s=!1;for(let l=0;l<e.length;l++){let u=e.charAt(l);if(i){i=!1,o+=(hQ.has(u)?"\\":"")+u;continue}if(u==="\\"){l===e.length-1?o+="\\\\":i=!0;continue}if(u==="["){let[f,d,h,g]=OI(e,l);if(h){o+=f,s=s||d,l+=h-1,r=r||g;continue}}if(u==="*"){n&&e==="*"?o+=BI:o+=UI,r=!0;continue}if(u==="?"){o+=lv,r=!0;continue}o+=gQ(u)}return[o,Dn(e),!!r,s]}};var Ks=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&");var or=(t,e,r={})=>(tu(e),!r.nocomment&&e.charAt(0)==="#"?!1:new Wr(e,r).match(t)),yQ=/^\*+([^+@!?\*\[\(]*)$/,xQ=t=>e=>!e.startsWith(".")&&e.endsWith(t),TQ=t=>e=>e.endsWith(t),SQ=t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),vQ=t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),bQ=/^\*+\.\*+$/,wQ=t=>!t.startsWith(".")&&t.includes("."),_Q=t=>t!=="."&&t!==".."&&t.includes("."),EQ=/^\.\*+$/,RQ=t=>t!=="."&&t!==".."&&t.startsWith("."),kQ=/^\*+$/,MQ=t=>t.length!==0&&!t.startsWith("."),PQ=t=>t.length!==0&&t!=="."&&t!=="..",AQ=/^\?+([^+@!?\*\[\(]*)?$/,DQ=([t,e=""])=>{let r=$I([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},IQ=([t,e=""])=>{let r=jI([t]);return e?(e=e.toLowerCase(),n=>r(n)&&n.toLowerCase().endsWith(e)):r},FQ=([t,e=""])=>{let r=jI([t]);return e?n=>r(n)&&n.endsWith(e):r},CQ=([t,e=""])=>{let r=$I([t]);return e?n=>r(n)&&n.endsWith(e):r},$I=([t])=>{let e=t.length;return r=>r.length===e&&!r.startsWith(".")},jI=([t])=>{let e=t.length;return r=>r.length===e&&r!=="."&&r!==".."},qI=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",VI={win32:{sep:"\\"},posix:{sep:"/"}},NQ=qI==="win32"?VI.win32.sep:VI.posix.sep;or.sep=NQ;var Ot=Symbol("globstar **");or.GLOBSTAR=Ot;var OQ="[^/]",LQ=OQ+"*?",UQ="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",BQ="(?:(?!(?:\\/|^)\\.).)*?",VQ=(t,e={})=>r=>or(r,t,e);or.filter=VQ;var pn=(t,e={})=>Object.assign({},t,e),WQ=t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return or;let e=or;return Object.assign((n,i,o={})=>e(n,i,pn(t,o)),{Minimatch:class extends e.Minimatch{constructor(i,o={}){super(i,pn(t,o))}static defaults(i){return e.defaults(pn(t,i)).Minimatch}},AST:class extends e.AST{constructor(i,o,s={}){super(i,o,pn(t,s))}static fromGlob(i,o={}){return e.AST.fromGlob(i,pn(t,o))}},unescape:(n,i={})=>e.unescape(n,pn(t,i)),escape:(n,i={})=>e.escape(n,pn(t,i)),filter:(n,i={})=>e.filter(n,pn(t,i)),defaults:n=>e.defaults(pn(t,n)),makeRe:(n,i={})=>e.makeRe(n,pn(t,i)),braceExpand:(n,i={})=>e.braceExpand(n,pn(t,i)),match:(n,i,o={})=>e.match(n,i,pn(t,o)),sep:e.sep,GLOBSTAR:Ot})};or.defaults=WQ;var zI=(t,e={})=>(tu(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:(0,HI.default)(t));or.braceExpand=zI;var HQ=(t,e={})=>new Wr(t,e).makeRe();or.makeRe=HQ;var $Q=(t,e,r={})=>{let n=new Wr(e,r);return t=t.filter(i=>n.match(i)),n.options.nonull&&!t.length&&t.push(e),t};or.match=$Q;var WI=/[?*]|[+@!]\(.*?\)|\[|\]/,jQ=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Wr=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,r={}){tu(e),r=r||{},this.options=r,this.pattern=e,this.platform=r.platform||qI,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!r.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!r.nonegate,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=r.windowsNoMagicRoot!==void 0?r.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let r of e)if(typeof r!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],r.debug&&(this.debug=(...o)=>console.error(...o)),this.debug(this.pattern,this.globSet);let n=this.globSet.map(o=>this.slashSplit(o));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let i=this.globParts.map((o,s,l)=>{if(this.isWindows&&this.windowsNoMagicRoot){let u=o[0]===""&&o[1]===""&&(o[2]==="?"||!WI.test(o[2]))&&!WI.test(o[3]),f=/^[a-z]:/i.test(o[0]);if(u)return[...o.slice(0,4),...o.slice(4).map(d=>this.parse(d))];if(f)return[o[0],...o.slice(1).map(d=>this.parse(d))]}return o.map(u=>this.parse(u))});if(this.debug(this.pattern,i),this.set=i.filter(o=>o.indexOf(!1)===-1),this.isWindows)for(let o=0;o<this.set.length;o++){let s=this.set[o];s[0]===""&&s[1]===""&&this.globParts[o][2]==="?"&&typeof s[3]=="string"&&/^[a-z]:$/i.test(s[3])&&(s[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let n=0;n<e.length;n++)for(let i=0;i<e[n].length;i++)e[n][i]==="**"&&(e[n][i]="*");let{optimizationLevel:r=1}=this.options;return r>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):r>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(r=>{let n=-1;for(;(n=r.indexOf("**",n+1))!==-1;){let i=n;for(;r[i+1]==="**";)i++;i!==n&&r.splice(n,i-n)}return r})}levelOneOptimize(e){return e.map(r=>(r=r.reduce((n,i)=>{let o=n[n.length-1];return i==="**"&&o==="**"?n:i===".."&&o&&o!==".."&&o!=="."&&o!=="**"?(n.pop(),n):(n.push(i),n)},[]),r.length===0?[""]:r))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let r=!1;do{if(r=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let o=e[i];i===1&&o===""&&e[0]===""||(o==="."||o==="")&&(r=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(r=!0,e.pop())}let n=0;for(;(n=e.indexOf("..",n+1))!==-1;){let i=e[n-1];i&&i!=="."&&i!==".."&&i!=="**"&&(r=!0,e.splice(n-1,2),n-=2)}}while(r);return e.length===0?[""]:e}firstPhasePreProcess(e){let r=!1;do{r=!1;for(let n of e){let i=-1;for(;(i=n.indexOf("**",i+1))!==-1;){let s=i;for(;n[s+1]==="**";)s++;s>i&&n.splice(i+1,s-i);let l=n[i+1],u=n[i+2],f=n[i+3];if(l!==".."||!u||u==="."||u===".."||!f||f==="."||f==="..")continue;r=!0,n.splice(i,1);let d=n.slice(0);d[i]="**",e.push(d),i--}if(!this.preserveMultipleSlashes){for(let s=1;s<n.length-1;s++){let l=n[s];s===1&&l===""&&n[0]===""||(l==="."||l==="")&&(r=!0,n.splice(s,1),s--)}n[0]==="."&&n.length===2&&(n[1]==="."||n[1]==="")&&(r=!0,n.pop())}let o=0;for(;(o=n.indexOf("..",o+1))!==-1;){let s=n[o-1];if(s&&s!=="."&&s!==".."&&s!=="**"){r=!0;let u=o===1&&n[o+1]==="**"?["."]:[];n.splice(o-1,2,...u),n.length===0&&n.push(""),o-=2}}}}while(r);return e}secondPhasePreProcess(e){for(let r=0;r<e.length-1;r++)for(let n=r+1;n<e.length;n++){let i=this.partsMatch(e[r],e[n],!this.preserveMultipleSlashes);i&&(e[r]=i,e[n]=[])}return e.filter(r=>r.length)}partsMatch(e,r,n=!1){let i=0,o=0,s=[],l="";for(;i<e.length&&o<r.length;)if(e[i]===r[o])s.push(l==="b"?r[o]:e[i]),i++,o++;else if(n&&e[i]==="**"&&r[o]===e[i+1])s.push(e[i]),i++;else if(n&&r[o]==="**"&&e[i]===r[o+1])s.push(r[o]),o++;else if(e[i]==="*"&&r[o]&&(this.options.dot||!r[o].startsWith("."))&&r[o]!=="**"){if(l==="b")return!1;l="a",s.push(e[i]),i++,o++}else if(r[o]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(l==="a")return!1;l="b",s.push(r[o]),i++,o++}else return!1;return e.length===r.length&&s}parseNegate(){if(this.nonegate)return;let e=this.pattern,r=!1,n=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)r=!r,n++;n&&(this.pattern=e.slice(n)),this.negate=r}matchOne(e,r,n=!1){let i=this.options;if(this.isWindows){let w=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),N=!w&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),A=typeof r[0]=="string"&&/^[a-z]:$/i.test(r[0]),U=!A&&r[0]===""&&r[1]===""&&r[2]==="?"&&typeof r[3]=="string"&&/^[a-z]:$/i.test(r[3]),Z=N?3:w?0:void 0,ne=U?3:A?0:void 0;if(typeof Z=="number"&&typeof ne=="number"){let[he,de]=[e[Z],r[ne]];he.toLowerCase()===de.toLowerCase()&&(r[ne]=he,ne>Z?r=r.slice(ne):Z>ne&&(e=e.slice(Z)))}}let{optimizationLevel:o=1}=this.options;o>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var s=0,l=0,u=e.length,f=r.length;s<u&&l<f;s++,l++){this.debug("matchOne loop");var d=r[l],h=e[s];if(this.debug(r,d,h),d===!1)return!1;if(d===Ot){this.debug("GLOBSTAR",[r,d,h]);var g=s,x=l+1;if(x===f){for(this.debug("** at the end");s<u;s++)if(e[s]==="."||e[s]===".."||!i.dot&&e[s].charAt(0)===".")return!1;return!0}for(;g<u;){var v=e[g];if(this.debug(`
globstar while`,e,g,r,x,v),this.matchOne(e.slice(g),r.slice(x),n))return this.debug("globstar found match!",g,u,v),!0;if(v==="."||v===".."||!i.dot&&v.charAt(0)==="."){this.debug("dot detected!",e,g,r,x);break}this.debug("globstar swallow a segment, and continue"),g++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,g,r,x),g===u))}let w;if(typeof d=="string"?(w=h===d,this.debug("string match",d,h,w)):(w=d.test(h),this.debug("pattern match",d,h,w)),!w)return!1}if(s===u&&l===f)return!0;if(s===u)return n;if(l===f)return s===u-1&&e[s]==="";throw new Error("wtf?")}braceExpand(){return zI(this.pattern,this.options)}parse(e){tu(e);let r=this.options;if(e==="**")return Ot;if(e==="")return"";let n,i=null;(n=e.match(kQ))?i=r.dot?PQ:MQ:(n=e.match(yQ))?i=(r.nocase?r.dot?vQ:SQ:r.dot?TQ:xQ)(n[1]):(n=e.match(AQ))?i=(r.nocase?r.dot?IQ:DQ:r.dot?FQ:CQ)(n):(n=e.match(bQ))?i=r.dot?_Q:wQ:(n=e.match(EQ))&&(i=RQ);let o=Gs.fromGlob(e,this.options).toMMPattern();return i?Object.assign(o,{test:i}):o}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let r=this.options,n=r.noglobstar?LQ:r.dot?UQ:BQ,i=new Set(r.nocase?["i"]:[]),o=e.map(u=>{let f=u.map(d=>{if(d instanceof RegExp)for(let h of d.flags.split(""))i.add(h);return typeof d=="string"?jQ(d):d===Ot?Ot:d._src});return f.forEach((d,h)=>{let g=f[h+1],x=f[h-1];d!==Ot||x===Ot||(x===void 0?g!==void 0&&g!==Ot?f[h+1]="(?:\\/|"+n+"\\/)?"+g:f[h]=n:g===void 0?f[h-1]=x+"(?:\\/|"+n+")?":g!==Ot&&(f[h-1]=x+"(?:\\/|\\/"+n+"\\/)"+g,f[h+1]=Ot))}),f.filter(d=>d!==Ot).join("/")}).join("|"),[s,l]=e.length>1?["(?:",")"]:["",""];o="^"+s+o+l+"$",this.negate&&(o="^(?!"+o+").+$");try{this.regexp=new RegExp(o,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;let n=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let o=this.set;this.debug(this.pattern,"set",o);let s=i[i.length-1];if(!s)for(let l=i.length-2;!s&&l>=0;l--)s=i[l];for(let l=0;l<o.length;l++){let u=o[l],f=i;if(n.matchBase&&u.length===1&&(f=[s]),this.matchOne(f,u,r))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return or.defaults(e).Minimatch}};or.AST=Gs;or.Minimatch=Wr;or.escape=Ks;or.unescape=Dn;var Qs=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,KI=new Set,uv=typeof process=="object"&&process?process:{},QI=(t,e,r,n)=>{typeof uv.emitWarning=="function"?uv.emitWarning(t,e,r,n):console.error(`[${r}] ${e}: ${t}`)},Tg=globalThis.AbortController,GI=globalThis.AbortSignal;if(typeof Tg>"u"){GI=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(n,i){this._onabort.push(i)}},Tg=class{constructor(){e()}signal=new GI;abort(n){if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(let i of this.signal._onabort)i(n);this.signal.onabort?.(n)}}};let t=uv.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{t&&(t=!1,QI("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var qQ=t=>!KI.has(t),I2e=Symbol("type"),yo=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),ZI=t=>yo(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?Zs:null:null,Zs=class extends Array{constructor(e){super(e),this.fill(0)}},pv=class t{heap;length;static#e=!1;static create(e){let r=ZI(e);if(!r)return[];t.#e=!0;let n=new t(e,r);return t.#e=!1,n}constructor(e,r){if(!t.#e)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},nu=class t{#e;#r;#o;#n;#a;#S;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#l;#p;#c;#s;#i;#g;#y;#d;#f;#w;#h;#_;#E;#T;#v;#b;#m;static unsafeExposeInternals(e){return{starts:e.#E,ttls:e.#T,sizes:e.#_,keyMap:e.#c,keyList:e.#s,valList:e.#i,next:e.#g,prev:e.#y,get head(){return e.#d},get tail(){return e.#f},free:e.#w,isBackgroundFetch:r=>e.#u(r),backgroundFetch:(r,n,i,o)=>e.#U(r,n,i,o),moveToTail:r=>e.#V(r),indexes:r=>e.#k(r),rindexes:r=>e.#M(r),isStale:r=>e.#x(r)}}get max(){return this.#e}get maxSize(){return this.#r}get calculatedSize(){return this.#p}get size(){return this.#l}get fetchMethod(){return this.#a}get memoMethod(){return this.#S}get dispose(){return this.#o}get disposeAfter(){return this.#n}constructor(e){let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:s,updateAgeOnHas:l,allowStale:u,dispose:f,disposeAfter:d,noDisposeOnSet:h,noUpdateTTL:g,maxSize:x=0,maxEntrySize:v=0,sizeCalculation:w,fetchMethod:N,memoMethod:A,noDeleteOnFetchRejection:U,noDeleteOnStaleGet:Z,allowStaleOnFetchRejection:ne,allowStaleOnFetchAbort:he,ignoreFetchAbort:de}=e;if(r!==0&&!yo(r))throw new TypeError("max option must be a nonnegative integer");let dt=r?ZI(r):Array;if(!dt)throw new Error("invalid max value: "+r);if(this.#e=r,this.#r=x,this.maxEntrySize=v||this.#r,this.sizeCalculation=w,this.sizeCalculation){if(!this.#r&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(A!==void 0&&typeof A!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#S=A,N!==void 0&&typeof N!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#a=N,this.#b=!!N,this.#c=new Map,this.#s=new Array(r).fill(void 0),this.#i=new Array(r).fill(void 0),this.#g=new dt(r),this.#y=new dt(r),this.#d=0,this.#f=0,this.#w=pv.create(r),this.#l=0,this.#p=0,typeof f=="function"&&(this.#o=f),typeof d=="function"?(this.#n=d,this.#h=[]):(this.#n=void 0,this.#h=void 0),this.#v=!!this.#o,this.#m=!!this.#n,this.noDisposeOnSet=!!h,this.noUpdateTTL=!!g,this.noDeleteOnFetchRejection=!!U,this.allowStaleOnFetchRejection=!!ne,this.allowStaleOnFetchAbort=!!he,this.ignoreFetchAbort=!!de,this.maxEntrySize!==0){if(this.#r!==0&&!yo(this.#r))throw new TypeError("maxSize must be a positive integer if specified");if(!yo(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#A()}if(this.allowStale=!!u,this.noDeleteOnStaleGet=!!Z,this.updateAgeOnGet=!!s,this.updateAgeOnHas=!!l,this.ttlResolution=yo(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=n||0,this.ttl){if(!yo(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#P()}if(this.#e===0&&this.ttl===0&&this.#r===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#e&&!this.#r){let At="LRU_CACHE_UNBOUNDED";qQ(At)&&(KI.add(At),QI("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",At,t))}}getRemainingTTL(e){return this.#c.has(e)?1/0:0}#P(){let e=new Zs(this.#e),r=new Zs(this.#e);this.#T=e,this.#E=r,this.#I=(o,s,l=Qs.now())=>{if(r[o]=s!==0?l:0,e[o]=s,s!==0&&this.ttlAutopurge){let u=setTimeout(()=>{this.#x(o)&&this.#D(this.#s[o],"expire")},s+1);u.unref&&u.unref()}},this.#R=o=>{r[o]=e[o]!==0?Qs.now():0},this.#t=(o,s)=>{if(e[s]){let l=e[s],u=r[s];if(!l||!u)return;o.ttl=l,o.start=u,o.now=n||i();let f=o.now-u;o.remainingTTL=l-f}};let n=0,i=()=>{let o=Qs.now();if(this.ttlResolution>0){n=o;let s=setTimeout(()=>n=0,this.ttlResolution);s.unref&&s.unref()}return o};this.getRemainingTTL=o=>{let s=this.#c.get(o);if(s===void 0)return 0;let l=e[s],u=r[s];if(!l||!u)return 1/0;let f=(n||i())-u;return l-f},this.#x=o=>{let s=r[o],l=e[o];return!!l&&!!s&&(n||i())-s>l}}#R=()=>{};#t=()=>{};#I=()=>{};#x=()=>!1;#A(){let e=new Zs(this.#e);this.#p=0,this.#_=e,this.#F=r=>{this.#p-=e[r],e[r]=0},this.#N=(r,n,i,o)=>{if(this.#u(n))return 0;if(!yo(i))if(o){if(typeof o!="function")throw new TypeError("sizeCalculation must be a function");if(i=o(n,r),!yo(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#C=(r,n,i)=>{if(e[r]=n,this.#r){let o=this.#r-e[r];for(;this.#p>o;)this.#L(!0)}this.#p+=e[r],i&&(i.entrySize=n,i.totalCalculatedSize=this.#p)}}#F=e=>{};#C=(e,r,n)=>{};#N=(e,r,n,i)=>{if(n||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#k({allowStale:e=this.allowStale}={}){if(this.#l)for(let r=this.#f;!(!this.#O(r)||((e||!this.#x(r))&&(yield r),r===this.#d));)r=this.#y[r]}*#M({allowStale:e=this.allowStale}={}){if(this.#l)for(let r=this.#d;!(!this.#O(r)||((e||!this.#x(r))&&(yield r),r===this.#f));)r=this.#g[r]}#O(e){return e!==void 0&&this.#c.get(this.#s[e])===e}*entries(){for(let e of this.#k())this.#i[e]!==void 0&&this.#s[e]!==void 0&&!this.#u(this.#i[e])&&(yield[this.#s[e],this.#i[e]])}*rentries(){for(let e of this.#M())this.#i[e]!==void 0&&this.#s[e]!==void 0&&!this.#u(this.#i[e])&&(yield[this.#s[e],this.#i[e]])}*keys(){for(let e of this.#k()){let r=this.#s[e];r!==void 0&&!this.#u(this.#i[e])&&(yield r)}}*rkeys(){for(let e of this.#M()){let r=this.#s[e];r!==void 0&&!this.#u(this.#i[e])&&(yield r)}}*values(){for(let e of this.#k())this.#i[e]!==void 0&&!this.#u(this.#i[e])&&(yield this.#i[e])}*rvalues(){for(let e of this.#M())this.#i[e]!==void 0&&!this.#u(this.#i[e])&&(yield this.#i[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,r={}){for(let n of this.#k()){let i=this.#i[n],o=this.#u(i)?i.__staleWhileFetching:i;if(o!==void 0&&e(o,this.#s[n],this))return this.get(this.#s[n],r)}}forEach(e,r=this){for(let n of this.#k()){let i=this.#i[n],o=this.#u(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#s[n],this)}}rforEach(e,r=this){for(let n of this.#M()){let i=this.#i[n],o=this.#u(i)?i.__staleWhileFetching:i;o!==void 0&&e.call(r,o,this.#s[n],this)}}purgeStale(){let e=!1;for(let r of this.#M({allowStale:!0}))this.#x(r)&&(this.#D(this.#s[r],"expire"),e=!0);return e}info(e){let r=this.#c.get(e);if(r===void 0)return;let n=this.#i[r],i=this.#u(n)?n.__staleWhileFetching:n;if(i===void 0)return;let o={value:i};if(this.#T&&this.#E){let s=this.#T[r],l=this.#E[r];if(s&&l){let u=s-(Qs.now()-l);o.ttl=u,o.start=Date.now()}}return this.#_&&(o.size=this.#_[r]),o}dump(){let e=[];for(let r of this.#k({allowStale:!0})){let n=this.#s[r],i=this.#i[r],o=this.#u(i)?i.__staleWhileFetching:i;if(o===void 0||n===void 0)continue;let s={value:o};if(this.#T&&this.#E){s.ttl=this.#T[r];let l=Qs.now()-this.#E[r];s.start=Math.floor(Date.now()-l)}this.#_&&(s.size=this.#_[r]),e.unshift([n,s])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let i=Date.now()-n.start;n.start=Qs.now()-i}this.set(r,n.value,n)}}set(e,r,n={}){if(r===void 0)return this.delete(e),this;let{ttl:i=this.ttl,start:o,noDisposeOnSet:s=this.noDisposeOnSet,sizeCalculation:l=this.sizeCalculation,status:u}=n,{noUpdateTTL:f=this.noUpdateTTL}=n,d=this.#N(e,r,n.size||0,l);if(this.maxEntrySize&&d>this.maxEntrySize)return u&&(u.set="miss",u.maxEntrySizeExceeded=!0),this.#D(e,"set"),this;let h=this.#l===0?void 0:this.#c.get(e);if(h===void 0)h=this.#l===0?this.#f:this.#w.length!==0?this.#w.pop():this.#l===this.#e?this.#L(!1):this.#l,this.#s[h]=e,this.#i[h]=r,this.#c.set(e,h),this.#g[this.#f]=h,this.#y[h]=this.#f,this.#f=h,this.#l++,this.#C(h,d,u),u&&(u.set="add"),f=!1;else{this.#V(h);let g=this.#i[h];if(r!==g){if(this.#b&&this.#u(g)){g.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:x}=g;x!==void 0&&!s&&(this.#v&&this.#o?.(x,e,"set"),this.#m&&this.#h?.push([x,e,"set"]))}else s||(this.#v&&this.#o?.(g,e,"set"),this.#m&&this.#h?.push([g,e,"set"]));if(this.#F(h),this.#C(h,d,u),this.#i[h]=r,u){u.set="replace";let x=g&&this.#u(g)?g.__staleWhileFetching:g;x!==void 0&&(u.oldValue=x)}}else u&&(u.set="update")}if(i!==0&&!this.#T&&this.#P(),this.#T&&(f||this.#I(h,i,o),u&&this.#t(u,h)),!s&&this.#m&&this.#h){let g=this.#h,x;for(;x=g?.shift();)this.#n?.(...x)}return this}pop(){try{for(;this.#l;){let e=this.#i[this.#d];if(this.#L(!0),this.#u(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#m&&this.#h){let e=this.#h,r;for(;r=e?.shift();)this.#n?.(...r)}}}#L(e){let r=this.#d,n=this.#s[r],i=this.#i[r];return this.#b&&this.#u(i)?i.__abortController.abort(new Error("evicted")):(this.#v||this.#m)&&(this.#v&&this.#o?.(i,n,"evict"),this.#m&&this.#h?.push([i,n,"evict"])),this.#F(r),e&&(this.#s[r]=void 0,this.#i[r]=void 0,this.#w.push(r)),this.#l===1?(this.#d=this.#f=0,this.#w.length=0):this.#d=this.#g[r],this.#c.delete(n),this.#l--,r}has(e,r={}){let{updateAgeOnHas:n=this.updateAgeOnHas,status:i}=r,o=this.#c.get(e);if(o!==void 0){let s=this.#i[o];if(this.#u(s)&&s.__staleWhileFetching===void 0)return!1;if(this.#x(o))i&&(i.has="stale",this.#t(i,o));else return n&&this.#R(o),i&&(i.has="hit",this.#t(i,o)),!0}else i&&(i.has="miss");return!1}peek(e,r={}){let{allowStale:n=this.allowStale}=r,i=this.#c.get(e);if(i===void 0||!n&&this.#x(i))return;let o=this.#i[i];return this.#u(o)?o.__staleWhileFetching:o}#U(e,r,n,i){let o=r===void 0?void 0:this.#i[r];if(this.#u(o))return o;let s=new Tg,{signal:l}=n;l?.addEventListener("abort",()=>s.abort(l.reason),{signal:s.signal});let u={signal:s.signal,options:n,context:i},f=(w,N=!1)=>{let{aborted:A}=s.signal,U=n.ignoreFetchAbort&&w!==void 0;if(n.status&&(A&&!N?(n.status.fetchAborted=!0,n.status.fetchError=s.signal.reason,U&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),A&&!U&&!N)return h(s.signal.reason);let Z=x;return this.#i[r]===x&&(w===void 0?Z.__staleWhileFetching?this.#i[r]=Z.__staleWhileFetching:this.#D(e,"fetch"):(n.status&&(n.status.fetchUpdated=!0),this.set(e,w,u.options))),w},d=w=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=w),h(w)),h=w=>{let{aborted:N}=s.signal,A=N&&n.allowStaleOnFetchAbort,U=A||n.allowStaleOnFetchRejection,Z=U||n.noDeleteOnFetchRejection,ne=x;if(this.#i[r]===x&&(!Z||ne.__staleWhileFetching===void 0?this.#D(e,"fetch"):A||(this.#i[r]=ne.__staleWhileFetching)),U)return n.status&&ne.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),ne.__staleWhileFetching;if(ne.__returned===ne)throw w},g=(w,N)=>{let A=this.#a?.(e,o,u);A&&A instanceof Promise&&A.then(U=>w(U===void 0?void 0:U),N),s.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(w(void 0),n.allowStaleOnFetchAbort&&(w=U=>f(U,!0)))})};n.status&&(n.status.fetchDispatched=!0);let x=new Promise(g).then(f,d),v=Object.assign(x,{__abortController:s,__staleWhileFetching:o,__returned:void 0});return r===void 0?(this.set(e,v,{...u.options,status:void 0}),r=this.#c.get(e)):this.#i[r]=v,v}#u(e){if(!this.#b)return!1;let r=e;return!!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof Tg}async fetch(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:s=this.ttl,noDisposeOnSet:l=this.noDisposeOnSet,size:u=0,sizeCalculation:f=this.sizeCalculation,noUpdateTTL:d=this.noUpdateTTL,noDeleteOnFetchRejection:h=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:g=this.allowStaleOnFetchRejection,ignoreFetchAbort:x=this.ignoreFetchAbort,allowStaleOnFetchAbort:v=this.allowStaleOnFetchAbort,context:w,forceRefresh:N=!1,status:A,signal:U}=r;if(!this.#b)return A&&(A.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,status:A});let Z={allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:o,ttl:s,noDisposeOnSet:l,size:u,sizeCalculation:f,noUpdateTTL:d,noDeleteOnFetchRejection:h,allowStaleOnFetchRejection:g,allowStaleOnFetchAbort:v,ignoreFetchAbort:x,status:A,signal:U},ne=this.#c.get(e);if(ne===void 0){A&&(A.fetch="miss");let he=this.#U(e,ne,Z,w);return he.__returned=he}else{let he=this.#i[ne];if(this.#u(he)){let O=n&&he.__staleWhileFetching!==void 0;return A&&(A.fetch="inflight",O&&(A.returnedStale=!0)),O?he.__staleWhileFetching:he.__returned=he}let de=this.#x(ne);if(!N&&!de)return A&&(A.fetch="hit"),this.#V(ne),i&&this.#R(ne),A&&this.#t(A,ne),he;let dt=this.#U(e,ne,Z,w),it=dt.__staleWhileFetching!==void 0&&n;return A&&(A.fetch=de?"stale":"refresh",it&&de&&(A.returnedStale=!0)),it?dt.__staleWhileFetching:dt.__returned=dt}}async forceFetch(e,r={}){let n=await this.fetch(e,r);if(n===void 0)throw new Error("fetch() returned undefined");return n}memo(e,r={}){let n=this.#S;if(!n)throw new Error("no memoMethod provided to constructor");let{context:i,forceRefresh:o,...s}=r,l=this.get(e,s);if(!o&&l!==void 0)return l;let u=n(e,l,{options:s,context:i});return this.set(e,u,s),u}get(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:s}=r,l=this.#c.get(e);if(l!==void 0){let u=this.#i[l],f=this.#u(u);return s&&this.#t(s,l),this.#x(l)?(s&&(s.get="stale"),f?(s&&n&&u.__staleWhileFetching!==void 0&&(s.returnedStale=!0),n?u.__staleWhileFetching:void 0):(o||this.#D(e,"expire"),s&&n&&(s.returnedStale=!0),n?u:void 0)):(s&&(s.get="hit"),f?u.__staleWhileFetching:(this.#V(l),i&&this.#R(l),u))}else s&&(s.get="miss")}#B(e,r){this.#y[r]=e,this.#g[e]=r}#V(e){e!==this.#f&&(e===this.#d?this.#d=this.#g[e]:this.#B(this.#y[e],this.#g[e]),this.#B(this.#f,e),this.#f=e)}delete(e){return this.#D(e,"delete")}#D(e,r){let n=!1;if(this.#l!==0){let i=this.#c.get(e);if(i!==void 0)if(n=!0,this.#l===1)this.#W(r);else{this.#F(i);let o=this.#i[i];if(this.#u(o)?o.__abortController.abort(new Error("deleted")):(this.#v||this.#m)&&(this.#v&&this.#o?.(o,e,r),this.#m&&this.#h?.push([o,e,r])),this.#c.delete(e),this.#s[i]=void 0,this.#i[i]=void 0,i===this.#f)this.#f=this.#y[i];else if(i===this.#d)this.#d=this.#g[i];else{let s=this.#y[i];this.#g[s]=this.#g[i];let l=this.#g[i];this.#y[l]=this.#y[i]}this.#l--,this.#w.push(i)}}if(this.#m&&this.#h?.length){let i=this.#h,o;for(;o=i?.shift();)this.#n?.(...o)}return n}clear(){return this.#W("delete")}#W(e){for(let r of this.#M({allowStale:!0})){let n=this.#i[r];if(this.#u(n))n.__abortController.abort(new Error("deleted"));else{let i=this.#s[r];this.#v&&this.#o?.(n,i,e),this.#m&&this.#h?.push([n,i,e])}}if(this.#c.clear(),this.#i.fill(void 0),this.#s.fill(void 0),this.#T&&this.#E&&(this.#T.fill(0),this.#E.fill(0)),this.#_&&this.#_.fill(0),this.#d=0,this.#f=0,this.#w.length=0,this.#p=0,this.#l=0,this.#m&&this.#h){let r=this.#h,n;for(;n=r?.shift();)this.#n?.(...n)}}};var Js=require("path"),a1=require("url"),tZ=dr(require("fs"),1),ri=require("fs"),So=require("fs/promises");var Rg=require("events"),xv=dr(require("stream"),1),t1=require("string_decoder"),YI=typeof process=="object"&&process?process:{stdout:null,stderr:null},zQ=t=>!!t&&typeof t=="object"&&(t instanceof To||t instanceof xv.default||GQ(t)||KQ(t)),GQ=t=>!!t&&typeof t=="object"&&t instanceof Rg.EventEmitter&&typeof t.pipe=="function"&&t.pipe!==xv.default.Writable.prototype.pipe,KQ=t=>!!t&&typeof t=="object"&&t instanceof Rg.EventEmitter&&typeof t.write=="function"&&typeof t.end=="function",Ii=Symbol("EOF"),Fi=Symbol("maybeEmitEnd"),xo=Symbol("emittedEnd"),Sg=Symbol("emittingEnd"),iu=Symbol("emittedError"),vg=Symbol("closed"),XI=Symbol("read"),bg=Symbol("flush"),JI=Symbol("flushChunk"),In=Symbol("encoding"),Ys=Symbol("decoder"),kt=Symbol("flowing"),ou=Symbol("paused"),Xs=Symbol("resume"),Mt=Symbol("buffer"),ar=Symbol("pipes"),Pt=Symbol("bufferLength"),fv=Symbol("bufferPush"),wg=Symbol("bufferShift"),zt=Symbol("objectMode"),ft=Symbol("destroyed"),dv=Symbol("error"),mv=Symbol("emitData"),e1=Symbol("emitEnd"),hv=Symbol("emitEnd2"),ei=Symbol("async"),gv=Symbol("abort"),_g=Symbol("aborted"),au=Symbol("signal"),fa=Symbol("dataListeners"),Hr=Symbol("discarded"),su=t=>Promise.resolve().then(t),QQ=t=>t(),ZQ=t=>t==="end"||t==="finish"||t==="prefinish",YQ=t=>t instanceof ArrayBuffer||!!t&&typeof t=="object"&&t.constructor&&t.constructor.name==="ArrayBuffer"&&t.byteLength>=0,XQ=t=>!Buffer.isBuffer(t)&&ArrayBuffer.isView(t),Eg=class{src;dest;opts;ondrain;constructor(e,r,n){this.src=e,this.dest=r,this.opts=n,this.ondrain=()=>e[Xs](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(e){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},yv=class extends Eg{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,r,n){super(e,r,n),this.proxyErrors=i=>r.emit("error",i),e.on("error",this.proxyErrors)}},JQ=t=>!!t.objectMode,eZ=t=>!t.objectMode&&!!t.encoding&&t.encoding!=="buffer",To=class extends Rg.EventEmitter{[kt]=!1;[ou]=!1;[ar]=[];[Mt]=[];[zt];[In];[ei];[Ys];[Ii]=!1;[xo]=!1;[Sg]=!1;[vg]=!1;[iu]=null;[Pt]=0;[ft]=!1;[au];[_g]=!1;[fa]=0;[Hr]=!1;writable=!0;readable=!0;constructor(...e){let r=e[0]||{};if(super(),r.objectMode&&typeof r.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");JQ(r)?(this[zt]=!0,this[In]=null):eZ(r)?(this[In]=r.encoding,this[zt]=!1):(this[zt]=!1,this[In]=null),this[ei]=!!r.async,this[Ys]=this[In]?new t1.StringDecoder(this[In]):null,r&&r.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:()=>this[Mt]}),r&&r.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:()=>this[ar]});let{signal:n}=r;n&&(this[au]=n,n.aborted?this[gv]():n.addEventListener("abort",()=>this[gv]()))}get bufferLength(){return this[Pt]}get encoding(){return this[In]}set encoding(e){throw new Error("Encoding must be set at instantiation time")}setEncoding(e){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[zt]}set objectMode(e){throw new Error("objectMode must be set at instantiation time")}get async(){return this[ei]}set async(e){this[ei]=this[ei]||!!e}[gv](){this[_g]=!0,this.emit("abort",this[au]?.reason),this.destroy(this[au]?.reason)}get aborted(){return this[_g]}set aborted(e){}write(e,r,n){if(this[_g])return!1;if(this[Ii])throw new Error("write after end");if(this[ft])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof r=="function"&&(n=r,r="utf8"),r||(r="utf8");let i=this[ei]?su:QQ;if(!this[zt]&&!Buffer.isBuffer(e)){if(XQ(e))e=Buffer.from(e.buffer,e.byteOffset,e.byteLength);else if(YQ(e))e=Buffer.from(e);else if(typeof e!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[zt]?(this[kt]&&this[Pt]!==0&&this[bg](!0),this[kt]?this.emit("data",e):this[fv](e),this[Pt]!==0&&this.emit("readable"),n&&i(n),this[kt]):e.length?(typeof e=="string"&&!(r===this[In]&&!this[Ys]?.lastNeed)&&(e=Buffer.from(e,r)),Buffer.isBuffer(e)&&this[In]&&(e=this[Ys].write(e)),this[kt]&&this[Pt]!==0&&this[bg](!0),this[kt]?this.emit("data",e):this[fv](e),this[Pt]!==0&&this.emit("readable"),n&&i(n),this[kt]):(this[Pt]!==0&&this.emit("readable"),n&&i(n),this[kt])}read(e){if(this[ft])return null;if(this[Hr]=!1,this[Pt]===0||e===0||e&&e>this[Pt])return this[Fi](),null;this[zt]&&(e=null),this[Mt].length>1&&!this[zt]&&(this[Mt]=[this[In]?this[Mt].join(""):Buffer.concat(this[Mt],this[Pt])]);let r=this[XI](e||null,this[Mt][0]);return this[Fi](),r}[XI](e,r){if(this[zt])this[wg]();else{let n=r;e===n.length||e===null?this[wg]():typeof n=="string"?(this[Mt][0]=n.slice(e),r=n.slice(0,e),this[Pt]-=e):(this[Mt][0]=n.subarray(e),r=n.subarray(0,e),this[Pt]-=e)}return this.emit("data",r),!this[Mt].length&&!this[Ii]&&this.emit("drain"),r}end(e,r,n){return typeof e=="function"&&(n=e,e=void 0),typeof r=="function"&&(n=r,r="utf8"),e!==void 0&&this.write(e,r),n&&this.once("end",n),this[Ii]=!0,this.writable=!1,(this[kt]||!this[ou])&&this[Fi](),this}[Xs](){this[ft]||(!this[fa]&&!this[ar].length&&(this[Hr]=!0),this[ou]=!1,this[kt]=!0,this.emit("resume"),this[Mt].length?this[bg]():this[Ii]?this[Fi]():this.emit("drain"))}resume(){return this[Xs]()}pause(){this[kt]=!1,this[ou]=!0,this[Hr]=!1}get destroyed(){return this[ft]}get flowing(){return this[kt]}get paused(){return this[ou]}[fv](e){this[zt]?this[Pt]+=1:this[Pt]+=e.length,this[Mt].push(e)}[wg](){return this[zt]?this[Pt]-=1:this[Pt]-=this[Mt][0].length,this[Mt].shift()}[bg](e=!1){do;while(this[JI](this[wg]())&&this[Mt].length);!e&&!this[Mt].length&&!this[Ii]&&this.emit("drain")}[JI](e){return this.emit("data",e),this[kt]}pipe(e,r){if(this[ft])return e;this[Hr]=!1;let n=this[xo];return r=r||{},e===YI.stdout||e===YI.stderr?r.end=!1:r.end=r.end!==!1,r.proxyErrors=!!r.proxyErrors,n?r.end&&e.end():(this[ar].push(r.proxyErrors?new yv(this,e,r):new Eg(this,e,r)),this[ei]?su(()=>this[Xs]()):this[Xs]()),e}unpipe(e){let r=this[ar].find(n=>n.dest===e);r&&(this[ar].length===1?(this[kt]&&this[fa]===0&&(this[kt]=!1),this[ar]=[]):this[ar].splice(this[ar].indexOf(r),1),r.unpipe())}addListener(e,r){return this.on(e,r)}on(e,r){let n=super.on(e,r);if(e==="data")this[Hr]=!1,this[fa]++,!this[ar].length&&!this[kt]&&this[Xs]();else if(e==="readable"&&this[Pt]!==0)super.emit("readable");else if(ZQ(e)&&this[xo])super.emit(e),this.removeAllListeners(e);else if(e==="error"&&this[iu]){let i=r;this[ei]?su(()=>i.call(this,this[iu])):i.call(this,this[iu])}return n}removeListener(e,r){return this.off(e,r)}off(e,r){let n=super.off(e,r);return e==="data"&&(this[fa]=this.listeners("data").length,this[fa]===0&&!this[Hr]&&!this[ar].length&&(this[kt]=!1)),n}removeAllListeners(e){let r=super.removeAllListeners(e);return(e==="data"||e===void 0)&&(this[fa]=0,!this[Hr]&&!this[ar].length&&(this[kt]=!1)),r}get emittedEnd(){return this[xo]}[Fi](){!this[Sg]&&!this[xo]&&!this[ft]&&this[Mt].length===0&&this[Ii]&&(this[Sg]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[vg]&&this.emit("close"),this[Sg]=!1)}emit(e,...r){let n=r[0];if(e!=="error"&&e!=="close"&&e!==ft&&this[ft])return!1;if(e==="data")return!this[zt]&&!n?!1:this[ei]?(su(()=>this[mv](n)),!0):this[mv](n);if(e==="end")return this[e1]();if(e==="close"){if(this[vg]=!0,!this[xo]&&!this[ft])return!1;let o=super.emit("close");return this.removeAllListeners("close"),o}else if(e==="error"){this[iu]=n,super.emit(dv,n);let o=!this[au]||this.listeners("error").length?super.emit("error",n):!1;return this[Fi](),o}else if(e==="resume"){let o=super.emit("resume");return this[Fi](),o}else if(e==="finish"||e==="prefinish"){let o=super.emit(e);return this.removeAllListeners(e),o}let i=super.emit(e,...r);return this[Fi](),i}[mv](e){for(let n of this[ar])n.dest.write(e)===!1&&this.pause();let r=this[Hr]?!1:super.emit("data",e);return this[Fi](),r}[e1](){return this[xo]?!1:(this[xo]=!0,this.readable=!1,this[ei]?(su(()=>this[hv]()),!0):this[hv]())}[hv](){if(this[Ys]){let r=this[Ys].end();if(r){for(let n of this[ar])n.dest.write(r);this[Hr]||super.emit("data",r)}}for(let r of this[ar])r.end();let e=super.emit("end");return this.removeAllListeners("end"),e}async collect(){let e=Object.assign([],{dataLength:0});this[zt]||(e.dataLength=0);let r=this.promise();return this.on("data",n=>{e.push(n),this[zt]||(e.dataLength+=n.length)}),await r,e}async concat(){if(this[zt])throw new Error("cannot concat in objectMode");let e=await this.collect();return this[In]?e.join(""):Buffer.concat(e,e.dataLength)}async promise(){return new Promise((e,r)=>{this.on(ft,()=>r(new Error("stream destroyed"))),this.on("error",n=>r(n)),this.on("end",()=>e())})}[Symbol.asyncIterator](){this[Hr]=!1;let e=!1,r=async()=>(this.pause(),e=!0,{value:void 0,done:!0});return{next:()=>{if(e)return r();let i=this.read();if(i!==null)return Promise.resolve({done:!1,value:i});if(this[Ii])return r();let o,s,l=h=>{this.off("data",u),this.off("end",f),this.off(ft,d),r(),s(h)},u=h=>{this.off("error",l),this.off("end",f),this.off(ft,d),this.pause(),o({value:h,done:!!this[Ii]})},f=()=>{this.off("error",l),this.off("data",u),this.off(ft,d),r(),o({done:!0,value:void 0})},d=()=>l(new Error("stream destroyed"));return new Promise((h,g)=>{s=g,o=h,this.once(ft,d),this.once("error",l),this.once("end",f),this.once("data",u)})},throw:r,return:r,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[Hr]=!1;let e=!1,r=()=>(this.pause(),this.off(dv,r),this.off(ft,r),this.off("end",r),e=!0,{done:!0,value:void 0}),n=()=>{if(e)return r();let i=this.read();return i===null?r():{done:!1,value:i}};return this.once("end",r),this.once(dv,r),this.once(ft,r),{next:n,throw:r,return:r,[Symbol.iterator](){return this}}}destroy(e){if(this[ft])return e?this.emit("error",e):this.emit(ft),this;this[ft]=!0,this[Hr]=!0,this[Mt].length=0,this[Pt]=0;let r=this;return typeof r.close=="function"&&!this[vg]&&r.close(),e?this.emit("error",e):this.emit(ft),this}static get isStream(){return zQ}};var rZ=ri.realpathSync.native,lu={lstatSync:ri.lstatSync,readdir:ri.readdir,readdirSync:ri.readdirSync,readlinkSync:ri.readlinkSync,realpathSync:rZ,promises:{lstat:So.lstat,readdir:So.readdir,readlink:So.readlink,realpath:So.realpath}},s1=t=>!t||t===lu||t===tZ?lu:{...lu,...t,promises:{...lu.promises,...t.promises||{}}},c1=/^\\\\\?\\([a-z]:)\\?$/i,nZ=t=>t.replace(/\//g,"\\").replace(c1,"$1\\"),iZ=/[\\\/]/,dn=0,l1=1,u1=2,ti=4,p1=6,f1=8,da=10,d1=12,fn=15,cu=~fn,Tv=16,r1=32,uu=64,Fn=128,kg=256,Pg=512,n1=uu|Fn|Pg,oZ=1023,Sv=t=>t.isFile()?f1:t.isDirectory()?ti:t.isSymbolicLink()?da:t.isCharacterDevice()?u1:t.isBlockDevice()?p1:t.isSocket()?d1:t.isFIFO()?l1:dn,i1=new Map,pu=t=>{let e=i1.get(t);if(e)return e;let r=t.normalize("NFKD");return i1.set(t,r),r},o1=new Map,Mg=t=>{let e=o1.get(t);if(e)return e;let r=pu(t.toLowerCase());return o1.set(t,r),r},Ag=class extends nu{constructor(){super({max:256})}},vv=class extends nu{constructor(e=16*1024){super({maxSize:e,sizeCalculation:r=>r.length+1})}},m1=Symbol("PathScurry setAsCwd"),Gt=class{name;root;roots;parent;nocase;#e;#r;get dev(){return this.#r}#o;get mode(){return this.#o}#n;get nlink(){return this.#n}#a;get uid(){return this.#a}#S;get gid(){return this.#S}#l;get rdev(){return this.#l}#p;get blksize(){return this.#p}#c;get ino(){return this.#c}#s;get size(){return this.#s}#i;get blocks(){return this.#i}#g;get atimeMs(){return this.#g}#y;get mtimeMs(){return this.#y}#d;get ctimeMs(){return this.#d}#f;get birthtimeMs(){return this.#f}#w;get atime(){return this.#w}#h;get mtime(){return this.#h}#_;get ctime(){return this.#_}#E;get birthtime(){return this.#E}#T;#v;#b;#m;#P;#R;#t;#I;#x;#A;get path(){return(this.parent||this).fullpath()}constructor(e,r=dn,n,i,o,s,l){this.name=e,this.#T=o?Mg(e):pu(e),this.#t=r&oZ,this.nocase=o,this.roots=i,this.root=n||this,this.#I=s,this.#b=l.fullpath,this.#P=l.relative,this.#R=l.relativePosix,this.parent=l.parent,this.parent?this.#e=this.parent.#e:this.#e=s1(l.fs)}depth(){return this.#v!==void 0?this.#v:this.parent?this.#v=this.parent.depth()+1:this.#v=0}childrenCache(){return this.#I}resolve(e){if(!e)return this;let r=this.getRootString(e),i=e.substring(r.length).split(this.splitSep);return r?this.getRoot(r).#F(i):this.#F(i)}#F(e){let r=this;for(let n of e)r=r.child(n);return r}children(){let e=this.#I.get(this);if(e)return e;let r=Object.assign([],{provisional:0});return this.#I.set(this,r),this.#t&=~Tv,r}child(e,r){if(e===""||e===".")return this;if(e==="..")return this.parent||this;let n=this.children(),i=this.nocase?Mg(e):pu(e);for(let u of n)if(u.#T===i)return u;let o=this.parent?this.sep:"",s=this.#b?this.#b+o+e:void 0,l=this.newChild(e,dn,{...r,parent:this,fullpath:s});return this.canReaddir()||(l.#t|=Fn),n.push(l),l}relative(){if(this.#P!==void 0)return this.#P;let e=this.name,r=this.parent;if(!r)return this.#P=this.name;let n=r.relative();return n+(!n||!r.parent?"":this.sep)+e}relativePosix(){if(this.sep==="/")return this.relative();if(this.#R!==void 0)return this.#R;let e=this.name,r=this.parent;if(!r)return this.#R=this.fullpathPosix();let n=r.relativePosix();return n+(!n||!r.parent?"":"/")+e}fullpath(){if(this.#b!==void 0)return this.#b;let e=this.name,r=this.parent;if(!r)return this.#b=this.name;let i=r.fullpath()+(r.parent?this.sep:"")+e;return this.#b=i}fullpathPosix(){if(this.#m!==void 0)return this.#m;if(this.sep==="/")return this.#m=this.fullpath();if(!this.parent){let i=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(i)?this.#m=`//?/${i}`:this.#m=i}let e=this.parent,r=e.fullpathPosix(),n=r+(!r||!e.parent?"":"/")+this.name;return this.#m=n}isUnknown(){return(this.#t&fn)===dn}isType(e){return this[`is${e}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#t&fn)===f1}isDirectory(){return(this.#t&fn)===ti}isCharacterDevice(){return(this.#t&fn)===u1}isBlockDevice(){return(this.#t&fn)===p1}isFIFO(){return(this.#t&fn)===l1}isSocket(){return(this.#t&fn)===d1}isSymbolicLink(){return(this.#t&da)===da}lstatCached(){return this.#t&r1?this:void 0}readlinkCached(){return this.#x}realpathCached(){return this.#A}readdirCached(){let e=this.children();return e.slice(0,e.provisional)}canReadlink(){if(this.#x)return!0;if(!this.parent)return!1;let e=this.#t&fn;return!(e!==dn&&e!==da||this.#t&kg||this.#t&Fn)}calledReaddir(){return!!(this.#t&Tv)}isENOENT(){return!!(this.#t&Fn)}isNamed(e){return this.nocase?this.#T===Mg(e):this.#T===pu(e)}async readlink(){let e=this.#x;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=await this.#e.promises.readlink(this.fullpath()),n=this.parent.resolve(r);if(n)return this.#x=n}catch(r){this.#u(r.code);return}}readlinkSync(){let e=this.#x;if(e)return e;if(this.canReadlink()&&this.parent)try{let r=this.#e.readlinkSync(this.fullpath()),n=this.parent.resolve(r);if(n)return this.#x=n}catch(r){this.#u(r.code);return}}#C(e){this.#t|=Tv;for(let r=e.provisional;r<e.length;r++)e[r].#N()}#N(){this.#t&Fn||(this.#t=(this.#t|Fn)&cu,this.#k())}#k(){let e=this.children();e.provisional=0;for(let r of e)r.#N()}#M(){this.#t|=Pg,this.#O()}#O(){if(this.#t&uu)return;let e=this.#t;(e&fn)===ti&&(e&=cu),this.#t=e|uu,this.#k()}#L(e=""){e==="ENOTDIR"||e==="EPERM"?this.#O():e==="ENOENT"?this.#N():this.children().provisional=0}#U(e=""){e==="ENOTDIR"?this.parent.#O():e==="ENOENT"&&this.#N()}#u(e=""){let r=this.#t;r|=kg,e==="ENOENT"&&(r|=Fn),(e==="EINVAL"||e==="UNKNOWN")&&(r&=cu),this.#t=r,e==="ENOTDIR"&&this.parent&&this.parent.#O()}#B(e,r){return this.#D(e,r)||this.#V(e,r)}#V(e,r){let n=Sv(e),i=this.newChild(e.name,n,{parent:this}),o=i.#t&fn;return o!==ti&&o!==da&&o!==dn&&(i.#t|=uu),r.unshift(i),r.provisional++,i}#D(e,r){for(let n=r.provisional;n<r.length;n++){let i=r[n];if((this.nocase?Mg(e.name):pu(e.name))===i.#T)return this.#W(e,i,n,r)}}#W(e,r,n,i){let o=r.name;return r.#t=r.#t&cu|Sv(e),o!==e.name&&(r.name=e.name),n!==i.provisional&&(n===i.length-1?i.pop():i.splice(n,1),i.unshift(r)),i.provisional++,r}async lstat(){if(!(this.#t&Fn))try{return this.#q(await this.#e.promises.lstat(this.fullpath())),this}catch(e){this.#U(e.code)}}lstatSync(){if(!(this.#t&Fn))try{return this.#q(this.#e.lstatSync(this.fullpath())),this}catch(e){this.#U(e.code)}}#q(e){let{atime:r,atimeMs:n,birthtime:i,birthtimeMs:o,blksize:s,blocks:l,ctime:u,ctimeMs:f,dev:d,gid:h,ino:g,mode:x,mtime:v,mtimeMs:w,nlink:N,rdev:A,size:U,uid:Z}=e;this.#w=r,this.#g=n,this.#E=i,this.#f=o,this.#p=s,this.#i=l,this.#_=u,this.#d=f,this.#r=d,this.#S=h,this.#c=g,this.#o=x,this.#h=v,this.#y=w,this.#n=N,this.#l=A,this.#s=U,this.#a=Z;let ne=Sv(e);this.#t=this.#t&cu|ne|r1,ne!==dn&&ne!==ti&&ne!==da&&(this.#t|=uu)}#$=[];#j=!1;#z(e){this.#j=!1;let r=this.#$.slice();this.#$.length=0,r.forEach(n=>n(null,e))}readdirCB(e,r=!1){if(!this.canReaddir()){r?e(null,[]):queueMicrotask(()=>e(null,[]));return}let n=this.children();if(this.calledReaddir()){let o=n.slice(0,n.provisional);r?e(null,o):queueMicrotask(()=>e(null,o));return}if(this.#$.push(e),this.#j)return;this.#j=!0;let i=this.fullpath();this.#e.readdir(i,{withFileTypes:!0},(o,s)=>{if(o)this.#L(o.code),n.provisional=0;else{for(let l of s)this.#B(l,n);this.#C(n)}this.#z(n.slice(0,n.provisional))})}#H;async readdir(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();if(this.#H)await this.#H;else{let n=()=>{};this.#H=new Promise(i=>n=i);try{for(let i of await this.#e.promises.readdir(r,{withFileTypes:!0}))this.#B(i,e);this.#C(e)}catch(i){this.#L(i.code),e.provisional=0}this.#H=void 0,n()}return e.slice(0,e.provisional)}readdirSync(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let r=this.fullpath();try{for(let n of this.#e.readdirSync(r,{withFileTypes:!0}))this.#B(n,e);this.#C(e)}catch(n){this.#L(n.code),e.provisional=0}return e.slice(0,e.provisional)}canReaddir(){if(this.#t&n1)return!1;let e=fn&this.#t;return e===dn||e===ti||e===da}shouldWalk(e,r){return(this.#t&ti)===ti&&!(this.#t&n1)&&!e.has(this)&&(!r||r(this))}async realpath(){if(this.#A)return this.#A;if(!((Pg|kg|Fn)&this.#t))try{let e=await this.#e.promises.realpath(this.fullpath());return this.#A=this.resolve(e)}catch{this.#M()}}realpathSync(){if(this.#A)return this.#A;if(!((Pg|kg|Fn)&this.#t))try{let e=this.#e.realpathSync(this.fullpath());return this.#A=this.resolve(e)}catch{this.#M()}}[m1](e){if(e===this)return;let r=new Set([]),n=[],i=this;for(;i&&i.parent;)r.add(i),i.#P=n.join(this.sep),i.#R=n.join("/"),i=i.parent,n.push("..");for(i=e;i&&i.parent&&!r.has(i);)i.#P=void 0,i.#R=void 0,i=i.parent}},Dg=class t extends Gt{sep="\\";splitSep=iZ;constructor(e,r=dn,n,i,o,s,l){super(e,r,n,i,o,s,l)}newChild(e,r=dn,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}getRootString(e){return Js.win32.parse(e).root}getRoot(e){if(e=nZ(e.toUpperCase()),e===this.root.name)return this.root;for(let[r,n]of Object.entries(this.roots))if(this.sameRoot(e,r))return this.roots[e]=n;return this.roots[e]=new ec(e,this).root}sameRoot(e,r=this.root.name){return e=e.toUpperCase().replace(/\//g,"\\").replace(c1,"$1\\"),e===r}},Ig=class t extends Gt{splitSep="/";sep="/";constructor(e,r=dn,n,i,o,s,l){super(e,r,n,i,o,s,l)}getRootString(e){return e.startsWith("/")?"/":""}getRoot(e){return this.root}newChild(e,r=dn,n={}){return new t(e,r,this.root,this.roots,this.nocase,this.childrenCache(),n)}},Fg=class{root;rootPath;roots;cwd;#e;#r;#o;nocase;#n;constructor(e=process.cwd(),r,n,{nocase:i,childrenCacheSize:o=16*1024,fs:s=lu}={}){this.#n=s1(s),(e instanceof URL||e.startsWith("file://"))&&(e=(0,a1.fileURLToPath)(e));let l=r.resolve(e);this.roots=Object.create(null),this.rootPath=this.parseRootPath(l),this.#e=new Ag,this.#r=new Ag,this.#o=new vv(o);let u=l.substring(this.rootPath.length).split(n);if(u.length===1&&!u[0]&&u.pop(),i===void 0)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=i,this.root=this.newRoot(this.#n),this.roots[this.rootPath]=this.root;let f=this.root,d=u.length-1,h=r.sep,g=this.rootPath,x=!1;for(let v of u){let w=d--;f=f.child(v,{relative:new Array(w).fill("..").join(h),relativePosix:new Array(w).fill("..").join("/"),fullpath:g+=(x?"":h)+v}),x=!0}this.cwd=f}depth(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.depth()}childrenCache(){return this.#o}resolve(...e){let r="";for(let o=e.length-1;o>=0;o--){let s=e[o];if(!(!s||s===".")&&(r=r?`${s}/${r}`:s,this.isAbsolute(s)))break}let n=this.#e.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpath();return this.#e.set(r,i),i}resolvePosix(...e){let r="";for(let o=e.length-1;o>=0;o--){let s=e[o];if(!(!s||s===".")&&(r=r?`${s}/${r}`:s,this.isAbsolute(s)))break}let n=this.#r.get(r);if(n!==void 0)return n;let i=this.cwd.resolve(r).fullpathPosix();return this.#r.set(r,i),i}relative(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relative()}relativePosix(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relativePosix()}basename(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.name}dirname(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),(e.parent||e).fullpath()}async readdir(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Gt||(r=e,e=this.cwd);let{withFileTypes:n}=r;if(e.canReaddir()){let i=await e.readdir();return n?i:i.map(o=>o.name)}else return[]}readdirSync(e=this.cwd,r={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Gt||(r=e,e=this.cwd);let{withFileTypes:n=!0}=r;return e.canReaddir()?n?e.readdirSync():e.readdirSync().map(i=>i.name):[]}async lstat(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstat()}lstatSync(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstatSync()}async readlink(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Gt||(r=e.withFileTypes,e=this.cwd);let n=await e.readlink();return r?n:n?.fullpath()}readlinkSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Gt||(r=e.withFileTypes,e=this.cwd);let n=e.readlinkSync();return r?n:n?.fullpath()}async realpath(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Gt||(r=e.withFileTypes,e=this.cwd);let n=await e.realpath();return r?n:n?.fullpath()}realpathSync(e=this.cwd,{withFileTypes:r}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Gt||(r=e.withFileTypes,e=this.cwd);let n=e.realpathSync();return r?n:n?.fullpath()}async walk(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Gt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=[];(!o||o(e))&&l.push(n?e:e.fullpath());let u=new Set,f=(h,g)=>{u.add(h),h.readdirCB((x,v)=>{if(x)return g(x);let w=v.length;if(!w)return g();let N=()=>{--w===0&&g()};for(let A of v)(!o||o(A))&&l.push(n?A:A.fullpath()),i&&A.isSymbolicLink()?A.realpath().then(U=>U?.isUnknown()?U.lstat():U).then(U=>U?.shouldWalk(u,s)?f(U,N):N()):A.shouldWalk(u,s)?f(A,N):N()},!0)},d=e;return new Promise((h,g)=>{f(d,x=>{if(x)return g(x);h(l)})})}walkSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Gt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=[];(!o||o(e))&&l.push(n?e:e.fullpath());let u=new Set([e]);for(let f of u){let d=f.readdirSync();for(let h of d){(!o||o(h))&&l.push(n?h:h.fullpath());let g=h;if(h.isSymbolicLink()){if(!(i&&(g=h.realpathSync())))continue;g.isUnknown()&&g.lstatSync()}g.shouldWalk(u,s)&&u.add(g)}}return l}[Symbol.asyncIterator](){return this.iterate()}iterate(e=this.cwd,r={}){return typeof e=="string"?e=this.cwd.resolve(e):e instanceof Gt||(r=e,e=this.cwd),this.stream(e,r)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Gt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r;(!o||o(e))&&(yield n?e:e.fullpath());let l=new Set([e]);for(let u of l){let f=u.readdirSync();for(let d of f){(!o||o(d))&&(yield n?d:d.fullpath());let h=d;if(d.isSymbolicLink()){if(!(i&&(h=d.realpathSync())))continue;h.isUnknown()&&h.lstatSync()}h.shouldWalk(l,s)&&l.add(h)}}}stream(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Gt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=new To({objectMode:!0});(!o||o(e))&&l.write(n?e:e.fullpath());let u=new Set,f=[e],d=0,h=()=>{let g=!1;for(;!g;){let x=f.shift();if(!x){d===0&&l.end();return}d++,u.add(x);let v=(N,A,U=!1)=>{if(N)return l.emit("error",N);if(i&&!U){let Z=[];for(let ne of A)ne.isSymbolicLink()&&Z.push(ne.realpath().then(he=>he?.isUnknown()?he.lstat():he));if(Z.length){Promise.all(Z).then(()=>v(null,A,!0));return}}for(let Z of A)Z&&(!o||o(Z))&&(l.write(n?Z:Z.fullpath())||(g=!0));d--;for(let Z of A){let ne=Z.realpathCached()||Z;ne.shouldWalk(u,s)&&f.push(ne)}g&&!l.flowing?l.once("drain",h):w||h()},w=!0;x.readdirCB(v,!0),w=!1}};return h(),l}streamSync(e=this.cwd,r={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Gt||(r=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:o,walkFilter:s}=r,l=new To({objectMode:!0}),u=new Set;(!o||o(e))&&l.write(n?e:e.fullpath());let f=[e],d=0,h=()=>{let g=!1;for(;!g;){let x=f.shift();if(!x){d===0&&l.end();return}d++,u.add(x);let v=x.readdirSync();for(let w of v)(!o||o(w))&&(l.write(n?w:w.fullpath())||(g=!0));d--;for(let w of v){let N=w;if(w.isSymbolicLink()){if(!(i&&(N=w.realpathSync())))continue;N.isUnknown()&&N.lstatSync()}N.shouldWalk(u,s)&&f.push(N)}}g&&!l.flowing&&l.once("drain",h)};return h(),l}chdir(e=this.cwd){let r=this.cwd;this.cwd=typeof e=="string"?this.cwd.resolve(e):e,this.cwd[m1](r)}},ec=class extends Fg{sep="\\";constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,Js.win32,"\\",{...r,nocase:n}),this.nocase=n;for(let i=this.cwd;i;i=i.parent)i.nocase=this.nocase}parseRootPath(e){return Js.win32.parse(e).root.toUpperCase()}newRoot(e){return new Dg(this.rootPath,ti,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")||e.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(e)}},tc=class extends Fg{sep="/";constructor(e=process.cwd(),r={}){let{nocase:n=!1}=r;super(e,Js.posix,"/",{...r,nocase:n}),this.nocase=n}parseRootPath(e){return"/"}newRoot(e){return new Ig(this.rootPath,ti,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")}},fu=class extends tc{constructor(e=process.cwd(),r={}){let{nocase:n=!0}=r;super(e,{...r,nocase:n})}},L2e=process.platform==="win32"?Dg:Ig,h1=process.platform==="win32"?ec:process.platform==="darwin"?fu:tc;var g1=require("url");var aZ=t=>t.length>=1,sZ=t=>t.length>=1,rc=class t{#e;#r;#o;length;#n;#a;#S;#l;#p;#c;#s=!0;constructor(e,r,n,i){if(!aZ(e))throw new TypeError("empty pattern list");if(!sZ(r))throw new TypeError("empty glob list");if(r.length!==e.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=e.length,n<0||n>=this.length)throw new TypeError("index out of range");if(this.#e=e,this.#r=r,this.#o=n,this.#n=i,this.#o===0){if(this.isUNC()){let[o,s,l,u,...f]=this.#e,[d,h,g,x,...v]=this.#r;f[0]===""&&(f.shift(),v.shift());let w=[o,s,l,u,""].join("/"),N=[d,h,g,x,""].join("/");this.#e=[w,...f],this.#r=[N,...v],this.length=this.#e.length}else if(this.isDrive()||this.isAbsolute()){let[o,...s]=this.#e,[l,...u]=this.#r;s[0]===""&&(s.shift(),u.shift());let f=o+"/",d=l+"/";this.#e=[f,...s],this.#r=[d,...u],this.length=this.#e.length}}}pattern(){return this.#e[this.#o]}isString(){return typeof this.#e[this.#o]=="string"}isGlobstar(){return this.#e[this.#o]===Ot}isRegExp(){return this.#e[this.#o]instanceof RegExp}globString(){return this.#S=this.#S||(this.#o===0?this.isAbsolute()?this.#r[0]+this.#r.slice(1).join("/"):this.#r.join("/"):this.#r.slice(this.#o).join("/"))}hasMore(){return this.length>this.#o+1}rest(){return this.#a!==void 0?this.#a:this.hasMore()?(this.#a=new t(this.#e,this.#r,this.#o+1,this.#n),this.#a.#c=this.#c,this.#a.#p=this.#p,this.#a.#l=this.#l,this.#a):this.#a=null}isUNC(){let e=this.#e;return this.#p!==void 0?this.#p:this.#p=this.#n==="win32"&&this.#o===0&&e[0]===""&&e[1]===""&&typeof e[2]=="string"&&!!e[2]&&typeof e[3]=="string"&&!!e[3]}isDrive(){let e=this.#e;return this.#l!==void 0?this.#l:this.#l=this.#n==="win32"&&this.#o===0&&this.length>1&&typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0])}isAbsolute(){let e=this.#e;return this.#c!==void 0?this.#c:this.#c=e[0]===""&&e.length>1||this.isDrive()||this.isUNC()}root(){let e=this.#e[0];return typeof e=="string"&&this.isAbsolute()&&this.#o===0?e:""}checkFollowGlobstar(){return!(this.#o===0||!this.isGlobstar()||!this.#s)}markFollowGlobstar(){return this.#o===0||!this.isGlobstar()||!this.#s?!1:(this.#s=!1,!0)}};var cZ=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",du=class{relative;relativeChildren;absolute;absoluteChildren;constructor(e,{nobrace:r,nocase:n,noext:i,noglobstar:o,platform:s=cZ}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[];let l={dot:!0,nobrace:r,nocase:n,noext:i,noglobstar:o,optimizationLevel:2,platform:s,nocomment:!0,nonegate:!0};for(let u of e){let f=new Wr(u,l);for(let d=0;d<f.set.length;d++){let h=f.set[d],g=f.globParts[d];if(!h||!g)throw new Error("invalid pattern object");let x=new rc(h,g,0,s),v=new Wr(x.globString(),l),w=g[g.length-1]==="**",N=x.isAbsolute();N?this.absolute.push(v):this.relative.push(v),w&&(N?this.absoluteChildren.push(v):this.relativeChildren.push(v))}}}ignored(e){let r=e.fullpath(),n=`${r}/`,i=e.relative()||".",o=`${i}/`;for(let s of this.relative)if(s.match(i)||s.match(o))return!0;for(let s of this.absolute)if(s.match(r)||s.match(n))return!0;return!1}childrenIgnored(e){let r=e.fullpath()+"/",n=(e.relative()||".")+"/";for(let i of this.relativeChildren)if(i.match(n))return!0;for(let i of this.absoluteChildren)if(i.match(r))return!0;return!1}};var bv=class t{store;constructor(e=new Map){this.store=e}copy(){return new t(new Map(this.store))}hasWalked(e,r){return this.store.get(e.fullpath())?.has(r.globString())}storeWalked(e,r){let n=e.fullpath(),i=this.store.get(n);i?i.add(r.globString()):this.store.set(n,new Set([r.globString()]))}},wv=class{store=new Map;add(e,r,n){let i=(r?2:0)|(n?1:0),o=this.store.get(e);this.store.set(e,o===void 0?i:i&o)}entries(){return[...this.store.entries()].map(([e,r])=>[e,!!(r&2),!!(r&1)])}},_v=class{store=new Map;add(e,r){if(!e.canReaddir())return;let n=this.store.get(e);n?n.find(i=>i.globString()===r.globString())||n.push(r):this.store.set(e,[r])}get(e){let r=this.store.get(e);if(!r)throw new Error("attempting to walk unknown path");return r}entries(){return this.keys().map(e=>[e,this.store.get(e)])}keys(){return[...this.store.keys()].filter(e=>e.canReaddir())}},mu=class t{hasWalkedCache;matches=new wv;subwalks=new _v;patterns;follow;dot;opts;constructor(e,r){this.opts=e,this.follow=!!e.follow,this.dot=!!e.dot,this.hasWalkedCache=r?r.copy():new bv}processPatterns(e,r){this.patterns=r;let n=r.map(i=>[e,i]);for(let[i,o]of n){this.hasWalkedCache.storeWalked(i,o);let s=o.root(),l=o.isAbsolute()&&this.opts.absolute!==!1;if(s){i=i.resolve(s==="/"&&this.opts.root!==void 0?this.opts.root:s);let h=o.rest();if(h)o=h;else{this.matches.add(i,!0,!1);continue}}if(i.isENOENT())continue;let u,f,d=!1;for(;typeof(u=o.pattern())=="string"&&(f=o.rest());)i=i.resolve(u),o=f,d=!0;if(u=o.pattern(),f=o.rest(),d){if(this.hasWalkedCache.hasWalked(i,o))continue;this.hasWalkedCache.storeWalked(i,o)}if(typeof u=="string"){let h=u===".."||u===""||u===".";this.matches.add(i.resolve(u),l,h);continue}else if(u===Ot){(!i.isSymbolicLink()||this.follow||o.checkFollowGlobstar())&&this.subwalks.add(i,o);let h=f?.pattern(),g=f?.rest();if(!f||(h===""||h===".")&&!g)this.matches.add(i,l,h===""||h===".");else if(h===".."){let x=i.parent||i;g?this.hasWalkedCache.hasWalked(x,g)||this.subwalks.add(x,g):this.matches.add(x,l,!0)}}else u instanceof RegExp&&this.subwalks.add(i,o)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new t(this.opts,this.hasWalkedCache)}filterEntries(e,r){let n=this.subwalks.get(e),i=this.child();for(let o of r)for(let s of n){let l=s.isAbsolute(),u=s.pattern(),f=s.rest();u===Ot?i.testGlobstar(o,s,f,l):u instanceof RegExp?i.testRegExp(o,u,f,l):i.testString(o,u,f,l)}return i}testGlobstar(e,r,n,i){if((this.dot||!e.name.startsWith("."))&&(r.hasMore()||this.matches.add(e,i,!1),e.canReaddir()&&(this.follow||!e.isSymbolicLink()?this.subwalks.add(e,r):e.isSymbolicLink()&&(n&&r.checkFollowGlobstar()?this.subwalks.add(e,n):r.markFollowGlobstar()&&this.subwalks.add(e,r)))),n){let o=n.pattern();if(typeof o=="string"&&o!==".."&&o!==""&&o!==".")this.testString(e,o,n.rest(),i);else if(o===".."){let s=e.parent||e;this.subwalks.add(s,n)}else o instanceof RegExp&&this.testRegExp(e,o,n.rest(),i)}}testRegExp(e,r,n,i){r.test(e.name)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}testString(e,r,n,i){e.isNamed(r)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}};var lZ=(t,e)=>typeof t=="string"?new du([t],e):Array.isArray(t)?new du(t,e):t,Cg=class{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#e=[];#r;#o;signal;maxDepth;constructor(e,r,n){this.patterns=e,this.path=r,this.opts=n,this.#o=!n.posix&&n.platform==="win32"?"\\":"/",n.ignore&&(this.#r=lZ(n.ignore,n)),this.maxDepth=n.maxDepth||1/0,n.signal&&(this.signal=n.signal,this.signal.addEventListener("abort",()=>{this.#e.length=0}))}#n(e){return this.seen.has(e)||!!this.#r?.ignored?.(e)}#a(e){return!!this.#r?.childrenIgnored?.(e)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;this.paused=!1;let e;for(;!this.paused&&(e=this.#e.shift());)e()}onResume(e){this.signal?.aborted||(this.paused?this.#e.push(e):e())}async matchCheck(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||await e.realpath(),!n)return;e=n}let i=e.isUnknown()||this.opts.stat;return this.matchCheckTest(i?await e.lstat():e,r)}matchCheckTest(e,r){return e&&(this.maxDepth===1/0||e.depth()<=this.maxDepth)&&(!r||e.canReaddir())&&(!this.opts.nodir||!e.isDirectory())&&!this.#n(e)?e:void 0}matchCheckSync(e,r){if(r&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||e.realpathSync(),!n)return;e=n}let i=e.isUnknown()||this.opts.stat;return this.matchCheckTest(i?e.lstatSync():e,r)}matchFinish(e,r){if(this.#n(e))return;let n=this.opts.absolute===void 0?r:this.opts.absolute;this.seen.add(e);let i=this.opts.mark&&e.isDirectory()?this.#o:"";if(this.opts.withFileTypes)this.matchEmit(e);else if(n){let o=this.opts.posix?e.fullpathPosix():e.fullpath();this.matchEmit(o+i)}else{let o=this.opts.posix?e.relativePosix():e.relative(),s=this.opts.dotRelative&&!o.startsWith(".."+this.#o)?"."+this.#o:"";this.matchEmit(o?s+o+i:"."+i)}}async match(e,r,n){let i=await this.matchCheck(e,n);i&&this.matchFinish(i,r)}matchSync(e,r,n){let i=this.matchCheckSync(e,n);i&&this.matchFinish(i,r)}walkCB(e,r,n){this.signal?.aborted&&n(),this.walkCB2(e,r,new mu(this.opts),n)}walkCB2(e,r,n,i){if(this.#a(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2(e,r,n,i));return}n.processPatterns(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,u,f]of n.matches.entries())this.#n(l)||(o++,this.match(l,u,f).then(()=>s()));for(let l of n.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;o++;let u=l.readdirCached();l.calledReaddir()?this.walkCB3(l,u,n,s):l.readdirCB((f,d)=>this.walkCB3(l,d,n,s),!0)}s()}walkCB3(e,r,n,i){n=n.filterEntries(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,u,f]of n.matches.entries())this.#n(l)||(o++,this.match(l,u,f).then(()=>s()));for(let[l,u]of n.subwalks.entries())o++,this.walkCB2(l,u,n.child(),s);s()}walkCBSync(e,r,n){this.signal?.aborted&&n(),this.walkCB2Sync(e,r,new mu(this.opts),n)}walkCB2Sync(e,r,n,i){if(this.#a(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2Sync(e,r,n,i));return}n.processPatterns(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,u,f]of n.matches.entries())this.#n(l)||this.matchSync(l,u,f);for(let l of n.subwalkTargets()){if(this.maxDepth!==1/0&&l.depth()>=this.maxDepth)continue;o++;let u=l.readdirSync();this.walkCB3Sync(l,u,n,s)}s()}walkCB3Sync(e,r,n,i){n=n.filterEntries(e,r);let o=1,s=()=>{--o===0&&i()};for(let[l,u,f]of n.matches.entries())this.#n(l)||this.matchSync(l,u,f);for(let[l,u]of n.subwalks.entries())o++,this.walkCB2Sync(l,u,n.child(),s);s()}},hu=class extends Cg{matches;constructor(e,r,n){super(e,r,n),this.matches=new Set}matchEmit(e){this.matches.add(e)}async walk(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise((e,r)=>{this.walkCB(this.path,this.patterns,()=>{this.signal?.aborted?r(this.signal.reason):e(this.matches)})}),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>{if(this.signal?.aborted)throw this.signal.reason}),this.matches}},gu=class extends Cg{results;constructor(e,r,n){super(e,r,n),this.results=new To({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(e){this.results.write(e),this.results.flowing||this.pause()}stream(){let e=this.path;return e.isUnknown()?e.lstat().then(()=>{this.walkCB(e,this.patterns,()=>this.results.end())}):this.walkCB(e,this.patterns,()=>this.results.end()),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}};var uZ=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",Cn=class{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;opts;patterns;constructor(e,r){if(!r)throw new TypeError("glob options required");if(this.withFileTypes=!!r.withFileTypes,this.signal=r.signal,this.follow=!!r.follow,this.dot=!!r.dot,this.dotRelative=!!r.dotRelative,this.nodir=!!r.nodir,this.mark=!!r.mark,r.cwd?(r.cwd instanceof URL||r.cwd.startsWith("file://"))&&(r.cwd=(0,g1.fileURLToPath)(r.cwd)):this.cwd="",this.cwd=r.cwd||"",this.root=r.root,this.magicalBraces=!!r.magicalBraces,this.nobrace=!!r.nobrace,this.noext=!!r.noext,this.realpath=!!r.realpath,this.absolute=r.absolute,this.noglobstar=!!r.noglobstar,this.matchBase=!!r.matchBase,this.maxDepth=typeof r.maxDepth=="number"?r.maxDepth:1/0,this.stat=!!r.stat,this.ignore=r.ignore,this.withFileTypes&&this.absolute!==void 0)throw new Error("cannot set absolute and withFileTypes:true");if(typeof e=="string"&&(e=[e]),this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(e=e.map(u=>u.replace(/\\/g,"/"))),this.matchBase){if(r.noglobstar)throw new TypeError("base matching requires globstar");e=e.map(u=>u.includes("/")?u:`./**/${u}`)}if(this.pattern=e,this.platform=r.platform||uZ,this.opts={...r,platform:this.platform},r.scurry){if(this.scurry=r.scurry,r.nocase!==void 0&&r.nocase!==r.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{let u=r.platform==="win32"?ec:r.platform==="darwin"?fu:r.platform?tc:h1;this.scurry=new u(this.cwd,{nocase:r.nocase,fs:r.fs})}this.nocase=this.scurry.nocase;let n=this.platform==="darwin"||this.platform==="win32",i={...r,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:n,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},o=this.pattern.map(u=>new Wr(u,i)),[s,l]=o.reduce((u,f)=>(u[0].push(...f.set),u[1].push(...f.globParts),u),[[],[]]);this.patterns=s.map((u,f)=>{let d=l[f];if(!d)throw new Error("invalid pattern object");return new rc(u,d,0,this.platform)})}async walk(){return[...await new hu(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase}).walk()]}walkSync(){return[...new hu(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase}).walkSync()]}stream(){return new gu(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase}).stream()}streamSync(){return new gu(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}};var Ev=(t,e={})=>{Array.isArray(t)||(t=[t]);for(let r of t)if(new Wr(r,e).hasMagic())return!0;return!1};function Ng(t,e={}){return new Cn(t,e).streamSync()}function x1(t,e={}){return new Cn(t,e).stream()}function T1(t,e={}){return new Cn(t,e).walkSync()}async function y1(t,e={}){return new Cn(t,e).walk()}function Og(t,e={}){return new Cn(t,e).iterateSync()}function S1(t,e={}){return new Cn(t,e).iterate()}var pZ=Ng,fZ=Object.assign(x1,{sync:Ng}),dZ=Og,mZ=Object.assign(S1,{sync:Og}),hZ=Object.assign(T1,{stream:Ng,iterate:Og}),Rv=Object.assign(y1,{glob:y1,globSync:T1,sync:hZ,globStream:x1,stream:fZ,globStreamSync:Ng,streamSync:pZ,globIterate:S1,iterate:mZ,globIterateSync:Og,iterateSync:dZ,Glob:Cn,hasMagic:Ev,escape:Ks,unescape:Dn});Rv.glob=Rv;function v1(){let t=process.env.CURSORLESS_MODE;switch(t){case void 0:case"production":return"production";case"development":return"development";case"test":return"test";default:throw new Error(`Unexpected value for environment variable CURSORLESS_MODE: ${t}`)}}var D1=Object.defineProperty,xZ=Object.getOwnPropertyNames,F=(t,e)=>D1(t,"name",{value:e,configurable:!0}),TZ=(t,e)=>function(){return e||(0,t[xZ(t)[0]])((e={exports:{}}).exports,e),e.exports},$v=(t,e)=>{for(var r in e)D1(t,r,{get:e[r],enumerable:!0})},SZ=TZ({"(disabled):util"(){}}),Lg={};$v(Lg,{addChainableMethod:()=>tb,addLengthGuard:()=>vu,addMethod:()=>Xv,addProperty:()=>Yv,checkError:()=>$r,compareByInspect:()=>Wg,eql:()=>nF,expectTypes:()=>U1,flag:()=>_e,getActual:()=>jg,getMessage:()=>zv,getName:()=>zg,getOperator:()=>ob,getOwnEnumerableProperties:()=>ib,getOwnEnumerablePropertySymbols:()=>nb,getPathInfo:()=>Zv,hasProperty:()=>qg,inspect:()=>Ce,isNaN:()=>Hg,isProxyEnabled:()=>Su,objDisplay:()=>ma,overwriteChainableMethod:()=>rb,overwriteMethod:()=>eb,overwriteProperty:()=>Jv,proxify:()=>ac,test:()=>jv,transferFlags:()=>Nn,type:()=>Qe});var $r={};$v($r,{compatibleConstructor:()=>F1,compatibleInstance:()=>I1,compatibleMessage:()=>C1,getConstructorName:()=>N1,getMessage:()=>O1});function I1(t,e){return e instanceof Error&&t===e}F(I1,"compatibleInstance");function F1(t,e){return e instanceof Error?t.constructor===e.constructor||t instanceof e.constructor:e.prototype instanceof Error||e===Error?t.constructor===e||t instanceof e:!1}F(F1,"compatibleConstructor");function C1(t,e){let r=typeof t=="string"?t:t.message;return e instanceof RegExp?e.test(r):typeof e=="string"?r.indexOf(e)!==-1:!1}F(C1,"compatibleMessage");function N1(t){let e=t;return t instanceof Error?e=t.constructor.name:typeof t=="function"&&(e=t.name,e===""&&(e=new t().name||e)),e}F(N1,"getConstructorName");function O1(t){let e="";return t&&t.message?e=t.message:typeof t=="string"&&(e=t),e}F(O1,"getMessage");function _e(t,e,r){var n=t.__flags||(t.__flags=Object.create(null));if(arguments.length===3)n[e]=r;else return n[e]}F(_e,"flag");function jv(t,e){var r=_e(t,"negate"),n=e[0];return r?!n:n}F(jv,"test");function Qe(t){if(typeof t>"u")return"undefined";if(t===null)return"null";let e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}F(Qe,"type");var vZ="captureStackTrace"in Error,qe=class L1 extends Error{static{F(this,"AssertionError")}message;get name(){return"AssertionError"}get ok(){return!1}constructor(e="Unspecified AssertionError",r,n){super(e),this.message=e,vZ&&Error.captureStackTrace(this,n||L1);for(let i in r)i in this||(this[i]=r[i])}toJSON(e){return{...this,name:this.name,message:this.message,ok:!1,stack:e!==!1?this.stack:void 0}}};function U1(t,e){var r=_e(t,"message"),n=_e(t,"ssfi");r=r?r+": ":"",t=_e(t,"object"),e=e.map(function(s){return s.toLowerCase()}),e.sort();var i=e.map(function(s,l){var u=~["a","e","i","o","u"].indexOf(s.charAt(0))?"an":"a",f=e.length>1&&l===e.length-1?"or ":"";return f+u+" "+s}).join(", "),o=Qe(t).toLowerCase();if(!e.some(function(s){return o===s}))throw new qe(r+"object tested must be "+i+", but "+o+" given",void 0,n)}F(U1,"expectTypes");function jg(t,e){return e.length>4?e[4]:t._obj}F(jg,"getActual");var b1={bold:["1","22"],dim:["2","22"],italic:["3","23"],underline:["4","24"],inverse:["7","27"],hidden:["8","28"],strike:["9","29"],black:["30","39"],red:["31","39"],green:["32","39"],yellow:["33","39"],blue:["34","39"],magenta:["35","39"],cyan:["36","39"],white:["37","39"],brightblack:["30;1","39"],brightred:["31;1","39"],brightgreen:["32;1","39"],brightyellow:["33;1","39"],brightblue:["34;1","39"],brightmagenta:["35;1","39"],brightcyan:["36;1","39"],brightwhite:["37;1","39"],grey:["90","39"]},bZ={special:"cyan",number:"yellow",bigint:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",symbol:"green",date:"magenta",regexp:"red"},ic="\u2026";function B1(t,e){let r=b1[bZ[e]]||b1[e]||"";return r?`\x1B[${r[0]}m${String(t)}\x1B[${r[1]}m`:String(t)}F(B1,"colorise");function V1({showHidden:t=!1,depth:e=2,colors:r=!1,customInspect:n=!0,showProxy:i=!1,maxArrayLength:o=1/0,breakLength:s=1/0,seen:l=[],truncate:u=1/0,stylize:f=String}={},d){let h={showHidden:!!t,depth:Number(e),colors:!!r,customInspect:!!n,showProxy:!!i,maxArrayLength:Number(o),breakLength:Number(s),truncate:Number(u),seen:l,inspect:d,stylize:f};return h.colors&&(h.stylize=B1),h}F(V1,"normaliseOptions");function Ci(t,e,r=ic){t=String(t);let n=r.length,i=t.length;return n>e&&i>n?r:i>e&&i>n?`${t.slice(0,e-n)}${r}`:t}F(Ci,"truncate");function mn(t,e,r,n=", "){r=r||e.inspect;let i=t.length;if(i===0)return"";let o=e.truncate,s="",l="",u="";for(let f=0;f<i;f+=1){let d=f+1===t.length,h=f+2===t.length;u=`${ic}(${t.length-f})`;let g=t[f];e.truncate=o-s.length-(d?0:n.length);let x=l||r(g,e)+(d?"":n),v=s.length+x.length,w=v+u.length;if(d&&v>o&&s.length+u.length<=o||!d&&!h&&w>o||(l=d?"":r(t[f+1],e)+(h?"":n),!d&&h&&w>o&&v+l.length>o))break;if(s+=x,!d&&!h&&v+l.length>=o){u=`${ic}(${t.length-f-1})`;break}u=""}return`${s}${u}`}F(mn,"inspectList");function W1(t){return t.match(/^[a-zA-Z_][a-zA-Z_0-9]*$/)?t:JSON.stringify(t).replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'")}F(W1,"quoteComplexKey");function oc([t,e],r){return r.truncate-=2,typeof t=="string"?t=W1(t):typeof t!="number"&&(t=`[${r.inspect(t,r)}]`),r.truncate-=t.length,e=r.inspect(e,r),`${t}: ${e}`}F(oc,"inspectProperty");function H1(t,e){let r=Object.keys(t).slice(t.length);if(!t.length&&!r.length)return"[]";e.truncate-=4;let n=mn(t,e);e.truncate-=n.length;let i="";return r.length&&(i=mn(r.map(o=>[o,t[o]]),e,oc)),`[ ${n}${i?`, ${i}`:""} ]`}F(H1,"inspectArray");var wZ=F(t=>typeof Buffer=="function"&&t instanceof Buffer?"Buffer":t[Symbol.toStringTag]?t[Symbol.toStringTag]:t.constructor.name,"getArrayName");function ni(t,e){let r=wZ(t);e.truncate-=r.length+4;let n=Object.keys(t).slice(t.length);if(!t.length&&!n.length)return`${r}[]`;let i="";for(let s=0;s<t.length;s++){let l=`${e.stylize(Ci(t[s],e.truncate),"number")}${s===t.length-1?"":", "}`;if(e.truncate-=l.length,t[s]!==t.length&&e.truncate<=3){i+=`${ic}(${t.length-t[s]+1})`;break}i+=l}let o="";return n.length&&(o=mn(n.map(s=>[s,t[s]]),e,oc)),`${r}[ ${i}${o?`, ${o}`:""} ]`}F(ni,"inspectTypedArray");function $1(t,e){let r=t.toJSON();if(r===null)return"Invalid Date";let n=r.split("T"),i=n[0];return e.stylize(`${i}T${Ci(n[1],e.truncate-i.length-1)}`,"date")}F($1,"inspectDate");function Pv(t,e){let r=t[Symbol.toStringTag]||"Function",n=t.name;return n?e.stylize(`[${r} ${Ci(n,e.truncate-11)}]`,"special"):e.stylize(`[${r}]`,"special")}F(Pv,"inspectFunction");function j1([t,e],r){return r.truncate-=4,t=r.inspect(t,r),r.truncate-=t.length,e=r.inspect(e,r),`${t} => ${e}`}F(j1,"inspectMapEntry");function q1(t){let e=[];return t.forEach((r,n)=>{e.push([n,r])}),e}F(q1,"mapToEntries");function z1(t,e){return t.size-1<=0?"Map{}":(e.truncate-=7,`Map{ ${mn(q1(t),e,j1)} }`)}F(z1,"inspectMap");var _Z=Number.isNaN||(t=>t!==t);function Av(t,e){return _Z(t)?e.stylize("NaN","number"):t===1/0?e.stylize("Infinity","number"):t===-1/0?e.stylize("-Infinity","number"):t===0?e.stylize(1/t===1/0?"+0":"-0","number"):e.stylize(Ci(String(t),e.truncate),"number")}F(Av,"inspectNumber");function Dv(t,e){let r=Ci(t.toString(),e.truncate-1);return r!==ic&&(r+="n"),e.stylize(r,"bigint")}F(Dv,"inspectBigInt");function G1(t,e){let r=t.toString().split("/")[2],n=e.truncate-(2+r.length),i=t.source;return e.stylize(`/${Ci(i,n)}/${r}`,"regexp")}F(G1,"inspectRegExp");function K1(t){let e=[];return t.forEach(r=>{e.push(r)}),e}F(K1,"arrayFromSet");function Q1(t,e){return t.size===0?"Set{}":(e.truncate-=7,`Set{ ${mn(K1(t),e)} }`)}F(Q1,"inspectSet");var w1=new RegExp("['\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]","g"),EZ={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"},RZ=16,kZ=4;function Z1(t){return EZ[t]||`\\u${`0000${t.charCodeAt(0).toString(RZ)}`.slice(-kZ)}`}F(Z1,"escape");function Iv(t,e){return w1.test(t)&&(t=t.replace(w1,Z1)),e.stylize(`'${Ci(t,e.truncate-2)}'`,"string")}F(Iv,"inspectString");function Fv(t){return"description"in Symbol.prototype?t.description?`Symbol(${t.description})`:"Symbol()":t.toString()}F(Fv,"inspectSymbol");var Y1=F(()=>"Promise{\u2026}","getPromiseValue");try{let{getPromiseDetails:t,kPending:e,kRejected:r}=process.binding("util");Array.isArray(t(Promise.resolve()))&&(Y1=F((n,i)=>{let[o,s]=t(n);return o===e?"Promise{<pending>}":`Promise${o===r?"!":""}{${i.inspect(s,i)}}`},"getPromiseValue"))}catch{}var MZ=Y1;function xu(t,e){let r=Object.getOwnPropertyNames(t),n=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[];if(r.length===0&&n.length===0)return"{}";if(e.truncate-=4,e.seen=e.seen||[],e.seen.indexOf(t)>=0)return"[Circular]";e.seen.push(t);let i=mn(r.map(l=>[l,t[l]]),e,oc),o=mn(n.map(l=>[l,t[l]]),e,oc);e.seen.pop();let s="";return i&&o&&(s=", "),`{ ${i}${s}${o} }`}F(xu,"inspectObject");var kv=typeof Symbol<"u"&&Symbol.toStringTag?Symbol.toStringTag:!1;function X1(t,e){let r="";return kv&&kv in t&&(r=t[kv]),r=r||t.constructor.name,(!r||r==="_class")&&(r="<Anonymous Class>"),e.truncate-=r.length,`${r}${xu(t,e)}`}F(X1,"inspectClass");function J1(t,e){return t.length===0?"Arguments[]":(e.truncate-=13,`Arguments[ ${mn(t,e)} ]`)}F(J1,"inspectArguments");var PZ=["stack","line","column","name","message","fileName","lineNumber","columnNumber","number","description"];function eF(t,e){let r=Object.getOwnPropertyNames(t).filter(s=>PZ.indexOf(s)===-1),n=t.name;e.truncate-=n.length;let i="";typeof t.message=="string"?i=Ci(t.message,e.truncate):r.unshift("message"),i=i?`: ${i}`:"",e.truncate-=i.length+5;let o=mn(r.map(s=>[s,t[s]]),e,oc);return`${n}${i}${o?` { ${o} }`:""}`}F(eF,"inspectObject");function tF([t,e],r){return r.truncate-=3,e?`${r.stylize(String(t),"yellow")}=${r.stylize(`"${e}"`,"string")}`:`${r.stylize(String(t),"yellow")}`}F(tF,"inspectAttribute");function Ug(t,e){return mn(t,e,qv,`
`)}F(Ug,"inspectHTMLCollection");function qv(t,e){let r=t.getAttributeNames(),n=t.tagName.toLowerCase(),i=e.stylize(`<${n}`,"special"),o=e.stylize(">","special"),s=e.stylize(`</${n}>`,"special");e.truncate-=n.length*2+5;let l="";r.length>0&&(l+=" ",l+=mn(r.map(d=>[d,t.getAttribute(d)]),e,tF," ")),e.truncate-=l.length;let u=e.truncate,f=Ug(t.children,e);return f&&f.length>u&&(f=`${ic}(${t.children.length})`),`${i}${l}${o}${f}${s}`}F(qv,"inspectHTML");var AZ=typeof Symbol=="function"&&typeof Symbol.for=="function",Mv=AZ?Symbol.for("chai/inspect"):"@@chai/inspect",nc=!1;try{let t=SZ();nc=t.inspect?t.inspect.custom:!1}catch{nc=!1}var _1=new WeakMap,E1={},R1={undefined:(t,e)=>e.stylize("undefined","undefined"),null:(t,e)=>e.stylize("null","null"),boolean:(t,e)=>e.stylize(String(t),"boolean"),Boolean:(t,e)=>e.stylize(String(t),"boolean"),number:Av,Number:Av,bigint:Dv,BigInt:Dv,string:Iv,String:Iv,function:Pv,Function:Pv,symbol:Fv,Symbol:Fv,Array:H1,Date:$1,Map:z1,Set:Q1,RegExp:G1,Promise:MZ,WeakSet:(t,e)=>e.stylize("WeakSet{\u2026}","special"),WeakMap:(t,e)=>e.stylize("WeakMap{\u2026}","special"),Arguments:J1,Int8Array:ni,Uint8Array:ni,Uint8ClampedArray:ni,Int16Array:ni,Uint16Array:ni,Int32Array:ni,Uint32Array:ni,Float32Array:ni,Float64Array:ni,Generator:()=>"",DataView:()=>"",ArrayBuffer:()=>"",Error:eF,HTMLCollection:Ug,NodeList:Ug},DZ=F((t,e,r)=>Mv in t&&typeof t[Mv]=="function"?t[Mv](e):nc&&nc in t&&typeof t[nc]=="function"?t[nc](e.depth,e):"inspect"in t&&typeof t.inspect=="function"?t.inspect(e.depth,e):"constructor"in t&&_1.has(t.constructor)?_1.get(t.constructor)(t,e):E1[r]?E1[r](t,e):"","inspectCustom"),IZ=Object.prototype.toString;function Bg(t,e={}){let r=V1(e,Bg),{customInspect:n}=r,i=t===null?"null":typeof t;if(i==="object"&&(i=IZ.call(t).slice(8,-1)),i in R1)return R1[i](t,r);if(n&&t){let s=DZ(t,r,i);if(s)return typeof s=="string"?s:Bg(s,r)}let o=t?Object.getPrototypeOf(t):!1;return o===Object.prototype||o===null?xu(t,r):t&&typeof HTMLElement=="function"&&t instanceof HTMLElement?qv(t,r):"constructor"in t?t.constructor!==Object?X1(t,r):xu(t,r):t===Object(t)?xu(t,r):r.stylize(String(t),i)}F(Bg,"inspect");var _r={includeStack:!1,showDiff:!0,truncateThreshold:40,useProxy:!0,proxyExcludedKeys:["then","catch","inspect","toJSON"],deepEqual:null};function Ce(t,e,r,n){var i={colors:n,depth:typeof r>"u"?2:r,showHidden:e,truncate:_r.truncateThreshold?_r.truncateThreshold:1/0};return Bg(t,i)}F(Ce,"inspect");function ma(t){var e=Ce(t),r=Object.prototype.toString.call(t);if(_r.truncateThreshold&&e.length>=_r.truncateThreshold){if(r==="[object Function]")return!t.name||t.name===""?"[Function]":"[Function: "+t.name+"]";if(r==="[object Array]")return"[ Array("+t.length+") ]";if(r==="[object Object]"){var n=Object.keys(t),i=n.length>2?n.splice(0,2).join(", ")+", ...":n.join(", ");return"{ Object ("+i+") }"}else return e}else return e}F(ma,"objDisplay");function zv(t,e){var r=_e(t,"negate"),n=_e(t,"object"),i=e[3],o=jg(t,e),s=r?e[2]:e[1],l=_e(t,"message");return typeof s=="function"&&(s=s()),s=s||"",s=s.replace(/#\{this\}/g,function(){return ma(n)}).replace(/#\{act\}/g,function(){return ma(o)}).replace(/#\{exp\}/g,function(){return ma(i)}),l?l+": "+s:s}F(zv,"getMessage");function Nn(t,e,r){var n=t.__flags||(t.__flags=Object.create(null));e.__flags||(e.__flags=Object.create(null)),r=arguments.length===3?r:!0;for(var i in n)(r||i!=="object"&&i!=="ssfi"&&i!=="lockSsfi"&&i!="message")&&(e.__flags[i]=n[i])}F(Nn,"transferFlags");function Cv(t){if(typeof t>"u")return"undefined";if(t===null)return"null";let e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}F(Cv,"type");function Gv(){this._key="chai/deep-eql__"+Math.random()+Date.now()}F(Gv,"FakeMap");Gv.prototype={get:F(function(e){return e[this._key]},"get"),set:F(function(e,r){Object.isExtensible(e)&&Object.defineProperty(e,this._key,{value:r,configurable:!0})},"set")};var rF=typeof WeakMap=="function"?WeakMap:Gv;function Nv(t,e,r){if(!r||ha(t)||ha(e))return null;var n=r.get(t);if(n){var i=n.get(e);if(typeof i=="boolean")return i}return null}F(Nv,"memoizeCompare");function yu(t,e,r,n){if(!(!r||ha(t)||ha(e))){var i=r.get(t);i?i.set(e,n):(i=new rF,i.set(e,n),r.set(t,i))}}F(yu,"memoizeSet");var nF=Tu;function Tu(t,e,r){if(r&&r.comparator)return Ov(t,e,r);var n=Kv(t,e);return n!==null?n:Ov(t,e,r)}F(Tu,"deepEqual");function Kv(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e?!0:ha(t)||ha(e)?!1:null}F(Kv,"simpleEqual");function Ov(t,e,r){r=r||{},r.memoize=r.memoize===!1?!1:r.memoize||new rF;var n=r&&r.comparator,i=Nv(t,e,r.memoize);if(i!==null)return i;var o=Nv(e,t,r.memoize);if(o!==null)return o;if(n){var s=n(t,e);if(s===!1||s===!0)return yu(t,e,r.memoize,s),s;var l=Kv(t,e);if(l!==null)return l}var u=Cv(t);if(u!==Cv(e))return yu(t,e,r.memoize,!1),!1;yu(t,e,r.memoize,!0);var f=iF(t,e,u,r);return yu(t,e,r.memoize,f),f}F(Ov,"extensiveDeepEqual");function iF(t,e,r,n){switch(r){case"String":case"Number":case"Boolean":case"Date":return Tu(t.valueOf(),e.valueOf());case"Promise":case"Symbol":case"function":case"WeakMap":case"WeakSet":return t===e;case"Error":return Qv(t,e,["name","message","code"],n);case"Arguments":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"Array":return vo(t,e,n);case"RegExp":return oF(t,e);case"Generator":return aF(t,e,n);case"DataView":return vo(new Uint8Array(t.buffer),new Uint8Array(e.buffer),n);case"ArrayBuffer":return vo(new Uint8Array(t),new Uint8Array(e),n);case"Set":return Lv(t,e,n);case"Map":return Lv(t,e,n);case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.Instant":case"Temporal.ZonedDateTime":case"Temporal.PlainYearMonth":case"Temporal.PlainMonthDay":return t.equals(e);case"Temporal.Duration":return t.total("nanoseconds")===e.total("nanoseconds");case"Temporal.TimeZone":case"Temporal.Calendar":return t.toString()===e.toString();default:return cF(t,e,n)}}F(iF,"extensiveDeepEqualByType");function oF(t,e){return t.toString()===e.toString()}F(oF,"regexpEqual");function Lv(t,e,r){if(t.size!==e.size)return!1;if(t.size===0)return!0;var n=[],i=[];return t.forEach(F(function(s,l){n.push([s,l])},"gatherEntries")),e.forEach(F(function(s,l){i.push([s,l])},"gatherEntries")),vo(n.sort(),i.sort(),r)}F(Lv,"entriesEqual");function vo(t,e,r){var n=t.length;if(n!==e.length)return!1;if(n===0)return!0;for(var i=-1;++i<n;)if(Tu(t[i],e[i],r)===!1)return!1;return!0}F(vo,"iterableEqual");function aF(t,e,r){return vo(Vg(t),Vg(e),r)}F(aF,"generatorEqual");function sF(t){return typeof Symbol<"u"&&typeof t=="object"&&typeof Symbol.iterator<"u"&&typeof t[Symbol.iterator]=="function"}F(sF,"hasIteratorFunction");function Uv(t){if(sF(t))try{return Vg(t[Symbol.iterator]())}catch{return[]}return[]}F(Uv,"getIteratorEntries");function Vg(t){for(var e=t.next(),r=[e.value];e.done===!1;)e=t.next(),r.push(e.value);return r}F(Vg,"getGeneratorEntries");function Bv(t){var e=[];for(var r in t)e.push(r);return e}F(Bv,"getEnumerableKeys");function Vv(t){for(var e=[],r=Object.getOwnPropertySymbols(t),n=0;n<r.length;n+=1){var i=r[n];Object.getOwnPropertyDescriptor(t,i).enumerable&&e.push(i)}return e}F(Vv,"getEnumerableSymbols");function Qv(t,e,r,n){var i=r.length;if(i===0)return!0;for(var o=0;o<i;o+=1)if(Tu(t[r[o]],e[r[o]],n)===!1)return!1;return!0}F(Qv,"keysEqual");function cF(t,e,r){var n=Bv(t),i=Bv(e),o=Vv(t),s=Vv(e);if(n=n.concat(o),i=i.concat(s),n.length&&n.length===i.length)return vo(Wv(n).sort(),Wv(i).sort())===!1?!1:Qv(t,e,n,r);var l=Uv(t),u=Uv(e);return l.length&&l.length===u.length?(l.sort(),u.sort(),vo(l,u,r)):n.length===0&&l.length===0&&i.length===0&&u.length===0}F(cF,"objectEqual");function ha(t){return t===null||typeof t!="object"}F(ha,"isPrimitive");function Wv(t){return t.map(F(function(r){return typeof r=="symbol"?r.toString():r},"mapSymbol"))}F(Wv,"mapSymbols");function qg(t,e){return typeof t>"u"||t===null?!1:e in Object(t)}F(qg,"hasProperty");function lF(t){return t.replace(/([^\\])\[/g,"$1.[").match(/(\\\.|[^.]+?)+/g).map(n=>{if(n==="constructor"||n==="__proto__"||n==="prototype")return{};let o=/^\[(\d+)\]$/.exec(n),s=null;return o?s={i:parseFloat(o[1])}:s={p:n.replace(/\\([.[\]])/g,"$1")},s})}F(lF,"parsePath");function Hv(t,e,r){let n=t,i=null;r=typeof r>"u"?e.length:r;for(let o=0;o<r;o++){let s=e[o];n&&(typeof s.p>"u"?n=n[s.i]:n=n[s.p],o===r-1&&(i=n))}return i}F(Hv,"internalGetPathValue");function Zv(t,e){let r=lF(e),n=r[r.length-1],i={parent:r.length>1?Hv(t,r,r.length-1):t,name:n.p||n.i,value:Hv(t,r)};return i.exists=qg(i.parent,i.name),i}F(Zv,"getPathInfo");function _(t,e,r,n){return _e(this,"ssfi",r||_),_e(this,"lockSsfi",n),_e(this,"object",t),_e(this,"message",e),_e(this,"eql",_r.deepEqual||nF),ac(this)}F(_,"Assertion");Object.defineProperty(_,"includeStack",{get:function(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),_r.includeStack},set:function(t){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),_r.includeStack=t}});Object.defineProperty(_,"showDiff",{get:function(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),_r.showDiff},set:function(t){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),_r.showDiff=t}});_.addProperty=function(t,e){Yv(this.prototype,t,e)};_.addMethod=function(t,e){Xv(this.prototype,t,e)};_.addChainableMethod=function(t,e,r){tb(this.prototype,t,e,r)};_.overwriteProperty=function(t,e){Jv(this.prototype,t,e)};_.overwriteMethod=function(t,e){eb(this.prototype,t,e)};_.overwriteChainableMethod=function(t,e,r){rb(this.prototype,t,e,r)};_.prototype.assert=function(t,e,r,n,i,o){var s=jv(this,arguments);if(o!==!1&&(o=!0),n===void 0&&i===void 0&&(o=!1),_r.showDiff!==!0&&(o=!1),!s){e=zv(this,arguments);var l=jg(this,arguments),u={actual:l,expected:n,showDiff:o},f=ob(this,arguments);throw f&&(u.operator=f),new qe(e,u,_r.includeStack?this.assert:_e(this,"ssfi"))}};Object.defineProperty(_.prototype,"_obj",{get:function(){return _e(this,"object")},set:function(t){_e(this,"object",t)}});function Su(){return _r.useProxy&&typeof Proxy<"u"&&typeof Reflect<"u"}F(Su,"isProxyEnabled");function Yv(t,e,r){r=r===void 0?function(){}:r,Object.defineProperty(t,e,{get:F(function n(){!Su()&&!_e(this,"lockSsfi")&&_e(this,"ssfi",n);var i=r.call(this);if(i!==void 0)return i;var o=new _;return Nn(this,o),o},"propertyGetter"),configurable:!0})}F(Yv,"addProperty");var FZ=Object.getOwnPropertyDescriptor(function(){},"length");function vu(t,e,r){return FZ.configurable&&Object.defineProperty(t,"length",{get:function(){throw Error(r?"Invalid Chai property: "+e+'.length. Due to a compatibility issue, "length" cannot directly follow "'+e+'". Use "'+e+'.lengthOf" instead.':"Invalid Chai property: "+e+'.length. See docs for proper usage of "'+e+'".')}}),t}F(vu,"addLengthGuard");function uF(t){var e=Object.getOwnPropertyNames(t);function r(i){e.indexOf(i)===-1&&e.push(i)}F(r,"addProperty");for(var n=Object.getPrototypeOf(t);n!==null;)Object.getOwnPropertyNames(n).forEach(r),n=Object.getPrototypeOf(n);return e}F(uF,"getProperties");var k1=["__flags","__methods","_obj","assert"];function ac(t,e){return Su()?new Proxy(t,{get:F(function r(n,i){if(typeof i=="string"&&_r.proxyExcludedKeys.indexOf(i)===-1&&!Reflect.has(n,i)){if(e)throw Error("Invalid Chai property: "+e+"."+i+'. See docs for proper usage of "'+e+'".');var o=null,s=4;throw uF(n).forEach(function(l){if(!Object.prototype.hasOwnProperty(l)&&k1.indexOf(l)===-1){var u=pF(i,l,s);u<s&&(o=l,s=u)}}),Error(o!==null?"Invalid Chai property: "+i+'. Did you mean "'+o+'"?':"Invalid Chai property: "+i)}return k1.indexOf(i)===-1&&!_e(n,"lockSsfi")&&_e(n,"ssfi",r),Reflect.get(n,i)},"proxyGetter")}):t}F(ac,"proxify");function pF(t,e,r){if(Math.abs(t.length-e.length)>=r)return r;for(var n=[],i=0;i<=t.length;i++)n[i]=Array(e.length+1).fill(0),n[i][0]=i;for(var o=0;o<e.length;o++)n[0][o]=o;for(var i=1;i<=t.length;i++)for(var s=t.charCodeAt(i-1),o=1;o<=e.length;o++){if(Math.abs(i-o)>=r){n[i][o]=r;continue}n[i][o]=Math.min(n[i-1][o]+1,n[i][o-1]+1,n[i-1][o-1]+(s===e.charCodeAt(o-1)?0:1))}return n[t.length][e.length]}F(pF,"stringDistanceCapped");function Xv(t,e,r){var n=F(function(){_e(this,"lockSsfi")||_e(this,"ssfi",n);var i=r.apply(this,arguments);if(i!==void 0)return i;var o=new _;return Nn(this,o),o},"methodWrapper");vu(n,e,!1),t[e]=ac(n,e)}F(Xv,"addMethod");function Jv(t,e,r){var n=Object.getOwnPropertyDescriptor(t,e),i=F(function(){},"_super");n&&typeof n.get=="function"&&(i=n.get),Object.defineProperty(t,e,{get:F(function o(){!Su()&&!_e(this,"lockSsfi")&&_e(this,"ssfi",o);var s=_e(this,"lockSsfi");_e(this,"lockSsfi",!0);var l=r(i).call(this);if(_e(this,"lockSsfi",s),l!==void 0)return l;var u=new _;return Nn(this,u),u},"overwritingPropertyGetter"),configurable:!0})}F(Jv,"overwriteProperty");function eb(t,e,r){var n=t[e],i=F(function(){throw new Error(e+" is not a function")},"_super");n&&typeof n=="function"&&(i=n);var o=F(function(){_e(this,"lockSsfi")||_e(this,"ssfi",o);var s=_e(this,"lockSsfi");_e(this,"lockSsfi",!0);var l=r(i).apply(this,arguments);if(_e(this,"lockSsfi",s),l!==void 0)return l;var u=new _;return Nn(this,u),u},"overwritingMethodWrapper");vu(o,e,!1),t[e]=ac(o,e)}F(eb,"overwriteMethod");var CZ=typeof Object.setPrototypeOf=="function",M1=F(function(){},"testFn"),NZ=Object.getOwnPropertyNames(M1).filter(function(t){var e=Object.getOwnPropertyDescriptor(M1,t);return typeof e!="object"?!0:!e.configurable}),OZ=Function.prototype.call,LZ=Function.prototype.apply;function tb(t,e,r,n){typeof n!="function"&&(n=F(function(){},"chainingBehavior"));var i={method:r,chainingBehavior:n};t.__methods||(t.__methods={}),t.__methods[e]=i,Object.defineProperty(t,e,{get:F(function(){i.chainingBehavior.call(this);var s=F(function(){_e(this,"lockSsfi")||_e(this,"ssfi",s);var f=i.method.apply(this,arguments);if(f!==void 0)return f;var d=new _;return Nn(this,d),d},"chainableMethodWrapper");if(vu(s,e,!0),CZ){var l=Object.create(this);l.call=OZ,l.apply=LZ,Object.setPrototypeOf(s,l)}else{var u=Object.getOwnPropertyNames(t);u.forEach(function(f){if(NZ.indexOf(f)===-1){var d=Object.getOwnPropertyDescriptor(t,f);Object.defineProperty(s,f,d)}})}return Nn(this,s),ac(s)},"chainableMethodGetter"),configurable:!0})}F(tb,"addChainableMethod");function rb(t,e,r,n){var i=t.__methods[e],o=i.chainingBehavior;i.chainingBehavior=F(function(){var u=n(o).call(this);if(u!==void 0)return u;var f=new _;return Nn(this,f),f},"overwritingChainableMethodGetter");var s=i.method;i.method=F(function(){var u=r(s).apply(this,arguments);if(u!==void 0)return u;var f=new _;return Nn(this,f),f},"overwritingChainableMethodWrapper")}F(rb,"overwriteChainableMethod");function Wg(t,e){return Ce(t)<Ce(e)?-1:1}F(Wg,"compareByInspect");function nb(t){return typeof Object.getOwnPropertySymbols!="function"?[]:Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})}F(nb,"getOwnEnumerablePropertySymbols");function ib(t){return Object.keys(t).concat(nb(t))}F(ib,"getOwnEnumerableProperties");function fF(t){return t!==t}F(fF,"_isNaN");var Hg=Number.isNaN||fF;function dF(t){var e=Qe(t),r=["Array","Object","Function"];return r.indexOf(e)!==-1}F(dF,"isObjectType");function ob(t,e){var r=_e(t,"operator"),n=_e(t,"negate"),i=e[3],o=n?e[2]:e[1];if(r)return r;if(typeof o=="function"&&(o=o()),o=o||"",!!o&&!/\shave\s/.test(o)){var s=dF(i);return/\snot\s/.test(o)?s?"notDeepStrictEqual":"notStrictEqual":s?"deepStrictEqual":"strictEqual"}}F(ob,"getOperator");function zg(t){return t.name}F(zg,"getName");var{flag:M}=Lg;["to","be","been","is","and","has","have","with","that","which","at","of","same","but","does","still","also"].forEach(function(t){_.addProperty(t)});_.addProperty("not",function(){M(this,"negate",!0)});_.addProperty("deep",function(){M(this,"deep",!0)});_.addProperty("nested",function(){M(this,"nested",!0)});_.addProperty("own",function(){M(this,"own",!0)});_.addProperty("ordered",function(){M(this,"ordered",!0)});_.addProperty("any",function(){M(this,"any",!0),M(this,"all",!1)});_.addProperty("all",function(){M(this,"all",!0),M(this,"any",!1)});var P1={function:["function","asyncfunction","generatorfunction","asyncgeneratorfunction"],asyncfunction:["asyncfunction","asyncgeneratorfunction"],generatorfunction:["generatorfunction","asyncgeneratorfunction"],asyncgeneratorfunction:["asyncgeneratorfunction"]};function ab(t,e){e&&M(this,"message",e),t=t.toLowerCase();var r=M(this,"object"),n=~["a","e","i","o","u"].indexOf(t.charAt(0))?"an ":"a ";let i=Qe(r).toLowerCase();P1.function.includes(t)?this.assert(P1[t].includes(i),"expected #{this} to be "+n+t,"expected #{this} not to be "+n+t):this.assert(t===i,"expected #{this} to be "+n+t,"expected #{this} not to be "+n+t)}F(ab,"an");_.addChainableMethod("an",ab);_.addChainableMethod("a",ab);function mF(t,e){return Hg(t)&&Hg(e)||t===e}F(mF,"SameValueZero");function bu(){M(this,"contains",!0)}F(bu,"includeChainingBehavior");function wu(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=Qe(r).toLowerCase(),i=M(this,"message"),o=M(this,"negate"),s=M(this,"ssfi"),l=M(this,"deep"),u=l?"deep ":"",f=l?M(this,"eql"):mF;i=i?i+": ":"";var d=!1;switch(n){case"string":d=r.indexOf(t)!==-1;break;case"weakset":if(l)throw new qe(i+"unable to use .deep.include with WeakSet",void 0,s);d=r.has(t);break;case"map":r.forEach(function(v){d=d||f(v,t)});break;case"set":l?r.forEach(function(v){d=d||f(v,t)}):d=r.has(t);break;case"array":l?d=r.some(function(v){return f(v,t)}):d=r.indexOf(t)!==-1;break;default:if(t!==Object(t))throw new qe(i+"the given combination of arguments ("+n+" and "+Qe(t).toLowerCase()+") is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a "+Qe(t).toLowerCase(),void 0,s);var h=Object.keys(t),g=null,x=0;if(h.forEach(function(v){var w=new _(r);if(Nn(this,w,!0),M(w,"lockSsfi",!0),!o||h.length===1){w.property(v,t[v]);return}try{w.property(v,t[v])}catch(N){if(!$r.compatibleConstructor(N,qe))throw N;g===null&&(g=N),x++}},this),o&&h.length>1&&x===h.length)throw g;return}this.assert(d,"expected #{this} to "+u+"include "+Ce(t),"expected #{this} to not "+u+"include "+Ce(t))}F(wu,"include");_.addChainableMethod("include",wu,bu);_.addChainableMethod("contain",wu,bu);_.addChainableMethod("contains",wu,bu);_.addChainableMethod("includes",wu,bu);_.addProperty("ok",function(){this.assert(M(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")});_.addProperty("true",function(){this.assert(M(this,"object")===!0,"expected #{this} to be true","expected #{this} to be false",!M(this,"negate"))});_.addProperty("callable",function(){let t=M(this,"object"),e=M(this,"ssfi"),r=M(this,"message"),n=r?`${r}: `:"",i=M(this,"negate"),o=i?`${n}expected ${Ce(t)} not to be a callable function`:`${n}expected ${Ce(t)} to be a callable function`,s=["Function","AsyncFunction","GeneratorFunction","AsyncGeneratorFunction"].includes(Qe(t));if(s&&i||!s&&!i)throw new qe(o,void 0,e)});_.addProperty("false",function(){this.assert(M(this,"object")===!1,"expected #{this} to be false","expected #{this} to be true",!!M(this,"negate"))});_.addProperty("null",function(){this.assert(M(this,"object")===null,"expected #{this} to be null","expected #{this} not to be null")});_.addProperty("undefined",function(){this.assert(M(this,"object")===void 0,"expected #{this} to be undefined","expected #{this} not to be undefined")});_.addProperty("NaN",function(){this.assert(Hg(M(this,"object")),"expected #{this} to be NaN","expected #{this} not to be NaN")});function sb(){var t=M(this,"object");this.assert(t!=null,"expected #{this} to exist","expected #{this} to not exist")}F(sb,"assertExist");_.addProperty("exist",sb);_.addProperty("exists",sb);_.addProperty("empty",function(){var t=M(this,"object"),e=M(this,"ssfi"),r=M(this,"message"),n;switch(r=r?r+": ":"",Qe(t).toLowerCase()){case"array":case"string":n=t.length;break;case"map":case"set":n=t.size;break;case"weakmap":case"weakset":throw new qe(r+".empty was passed a weak collection",void 0,e);case"function":var i=r+".empty was passed a function "+zg(t);throw new qe(i.trim(),void 0,e);default:if(t!==Object(t))throw new qe(r+".empty was passed non-string primitive "+Ce(t),void 0,e);n=Object.keys(t).length}this.assert(n===0,"expected #{this} to be empty","expected #{this} not to be empty")});function cb(){var t=M(this,"object"),e=Qe(t);this.assert(e==="Arguments","expected #{this} to be arguments but got "+e,"expected #{this} to not be arguments")}F(cb,"checkArguments");_.addProperty("arguments",cb);_.addProperty("Arguments",cb);function Gg(t,e){e&&M(this,"message",e);var r=M(this,"object");if(M(this,"deep")){var n=M(this,"lockSsfi");M(this,"lockSsfi",!0),this.eql(t),M(this,"lockSsfi",n)}else this.assert(t===r,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",t,this._obj,!0)}F(Gg,"assertEqual");_.addMethod("equal",Gg);_.addMethod("equals",Gg);_.addMethod("eq",Gg);function lb(t,e){e&&M(this,"message",e);var r=M(this,"eql");this.assert(r(t,M(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",t,this._obj,!0)}F(lb,"assertEql");_.addMethod("eql",lb);_.addMethod("eqls",lb);function Kg(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"doLength"),i=M(this,"message"),o=i?i+": ":"",s=M(this,"ssfi"),l=Qe(r).toLowerCase(),u=Qe(t).toLowerCase(),f,d=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&u!=="date")f=o+"the argument to above must be a date";else if(u!=="number"&&(n||l==="number"))f=o+"the argument to above must be a number";else if(!n&&l!=="date"&&l!=="number"){var h=l==="string"?"'"+r+"'":r;f=o+"expected "+h+" to be a number or a date"}else d=!1;if(d)throw new qe(f,void 0,s);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x>t,"expected #{this} to have a "+g+" above #{exp} but got #{act}","expected #{this} to not have a "+g+" above #{exp}",t,x)}else this.assert(r>t,"expected #{this} to be above #{exp}","expected #{this} to be at most #{exp}",t)}F(Kg,"assertAbove");_.addMethod("above",Kg);_.addMethod("gt",Kg);_.addMethod("greaterThan",Kg);function Qg(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"doLength"),i=M(this,"message"),o=i?i+": ":"",s=M(this,"ssfi"),l=Qe(r).toLowerCase(),u=Qe(t).toLowerCase(),f,d=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&u!=="date")f=o+"the argument to least must be a date";else if(u!=="number"&&(n||l==="number"))f=o+"the argument to least must be a number";else if(!n&&l!=="date"&&l!=="number"){var h=l==="string"?"'"+r+"'":r;f=o+"expected "+h+" to be a number or a date"}else d=!1;if(d)throw new qe(f,void 0,s);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x>=t,"expected #{this} to have a "+g+" at least #{exp} but got #{act}","expected #{this} to have a "+g+" below #{exp}",t,x)}else this.assert(r>=t,"expected #{this} to be at least #{exp}","expected #{this} to be below #{exp}",t)}F(Qg,"assertLeast");_.addMethod("least",Qg);_.addMethod("gte",Qg);_.addMethod("greaterThanOrEqual",Qg);function Zg(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"doLength"),i=M(this,"message"),o=i?i+": ":"",s=M(this,"ssfi"),l=Qe(r).toLowerCase(),u=Qe(t).toLowerCase(),f,d=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&u!=="date")f=o+"the argument to below must be a date";else if(u!=="number"&&(n||l==="number"))f=o+"the argument to below must be a number";else if(!n&&l!=="date"&&l!=="number"){var h=l==="string"?"'"+r+"'":r;f=o+"expected "+h+" to be a number or a date"}else d=!1;if(d)throw new qe(f,void 0,s);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x<t,"expected #{this} to have a "+g+" below #{exp} but got #{act}","expected #{this} to not have a "+g+" below #{exp}",t,x)}else this.assert(r<t,"expected #{this} to be below #{exp}","expected #{this} to be at least #{exp}",t)}F(Zg,"assertBelow");_.addMethod("below",Zg);_.addMethod("lt",Zg);_.addMethod("lessThan",Zg);function Yg(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"doLength"),i=M(this,"message"),o=i?i+": ":"",s=M(this,"ssfi"),l=Qe(r).toLowerCase(),u=Qe(t).toLowerCase(),f,d=!0;if(n&&l!=="map"&&l!=="set"&&new _(r,i,s,!0).to.have.property("length"),!n&&l==="date"&&u!=="date")f=o+"the argument to most must be a date";else if(u!=="number"&&(n||l==="number"))f=o+"the argument to most must be a number";else if(!n&&l!=="date"&&l!=="number"){var h=l==="string"?"'"+r+"'":r;f=o+"expected "+h+" to be a number or a date"}else d=!1;if(d)throw new qe(f,void 0,s);if(n){var g="length",x;l==="map"||l==="set"?(g="size",x=r.size):x=r.length,this.assert(x<=t,"expected #{this} to have a "+g+" at most #{exp} but got #{act}","expected #{this} to have a "+g+" above #{exp}",t,x)}else this.assert(r<=t,"expected #{this} to be at most #{exp}","expected #{this} to be above #{exp}",t)}F(Yg,"assertMost");_.addMethod("most",Yg);_.addMethod("lte",Yg);_.addMethod("lessThanOrEqual",Yg);_.addMethod("within",function(t,e,r){r&&M(this,"message",r);var n=M(this,"object"),i=M(this,"doLength"),o=M(this,"message"),s=o?o+": ":"",l=M(this,"ssfi"),u=Qe(n).toLowerCase(),f=Qe(t).toLowerCase(),d=Qe(e).toLowerCase(),h,g=!0,x=f==="date"&&d==="date"?t.toISOString()+".."+e.toISOString():t+".."+e;if(i&&u!=="map"&&u!=="set"&&new _(n,o,l,!0).to.have.property("length"),!i&&u==="date"&&(f!=="date"||d!=="date"))h=s+"the arguments to within must be dates";else if((f!=="number"||d!=="number")&&(i||u==="number"))h=s+"the arguments to within must be numbers";else if(!i&&u!=="date"&&u!=="number"){var v=u==="string"?"'"+n+"'":n;h=s+"expected "+v+" to be a number or a date"}else g=!1;if(g)throw new qe(h,void 0,l);if(i){var w="length",N;u==="map"||u==="set"?(w="size",N=n.size):N=n.length,this.assert(N>=t&&N<=e,"expected #{this} to have a "+w+" within "+x,"expected #{this} to not have a "+w+" within "+x)}else this.assert(n>=t&&n<=e,"expected #{this} to be within "+x,"expected #{this} to not be within "+x)});function ub(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"ssfi"),i=M(this,"message");try{var o=r instanceof t}catch(l){throw l instanceof TypeError?(i=i?i+": ":"",new qe(i+"The instanceof assertion needs a constructor but "+Qe(t)+" was given.",void 0,n)):l}var s=zg(t);s==null&&(s="an unnamed constructor"),this.assert(o,"expected #{this} to be an instance of "+s,"expected #{this} to not be an instance of "+s)}F(ub,"assertInstanceOf");_.addMethod("instanceof",ub);_.addMethod("instanceOf",ub);function pb(t,e,r){r&&M(this,"message",r);var n=M(this,"nested"),i=M(this,"own"),o=M(this,"message"),s=M(this,"object"),l=M(this,"ssfi"),u=typeof t;if(o=o?o+": ":"",n){if(u!=="string")throw new qe(o+"the argument to property must be a string when using nested syntax",void 0,l)}else if(u!=="string"&&u!=="number"&&u!=="symbol")throw new qe(o+"the argument to property must be a string, number, or symbol",void 0,l);if(n&&i)throw new qe(o+'The "nested" and "own" flags cannot be combined.',void 0,l);if(s==null)throw new qe(o+"Target cannot be null or undefined.",void 0,l);var f=M(this,"deep"),d=M(this,"negate"),h=n?Zv(s,t):null,g=n?h.value:s[t],x=f?M(this,"eql"):(N,A)=>N===A,v="";f&&(v+="deep "),i&&(v+="own "),n&&(v+="nested "),v+="property ";var w;i?w=Object.prototype.hasOwnProperty.call(s,t):n?w=h.exists:w=qg(s,t),(!d||arguments.length===1)&&this.assert(w,"expected #{this} to have "+v+Ce(t),"expected #{this} to not have "+v+Ce(t)),arguments.length>1&&this.assert(w&&x(e,g),"expected #{this} to have "+v+Ce(t)+" of #{exp}, but got #{act}","expected #{this} to not have "+v+Ce(t)+" of #{act}",e,g),M(this,"object",g)}F(pb,"assertProperty");_.addMethod("property",pb);function fb(t,e,r){M(this,"own",!0),pb.apply(this,arguments)}F(fb,"assertOwnProperty");_.addMethod("ownProperty",fb);_.addMethod("haveOwnProperty",fb);function db(t,e,r){typeof e=="string"&&(r=e,e=null),r&&M(this,"message",r);var n=M(this,"object"),i=Object.getOwnPropertyDescriptor(Object(n),t),o=M(this,"eql");i&&e?this.assert(o(e,i),"expected the own property descriptor for "+Ce(t)+" on #{this} to match "+Ce(e)+", got "+Ce(i),"expected the own property descriptor for "+Ce(t)+" on #{this} to not match "+Ce(e),e,i,!0):this.assert(i,"expected #{this} to have an own property descriptor for "+Ce(t),"expected #{this} to not have an own property descriptor for "+Ce(t)),M(this,"object",i)}F(db,"assertOwnPropertyDescriptor");_.addMethod("ownPropertyDescriptor",db);_.addMethod("haveOwnPropertyDescriptor",db);function mb(){M(this,"doLength",!0)}F(mb,"assertLengthChain");function hb(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=Qe(r).toLowerCase(),i=M(this,"message"),o=M(this,"ssfi"),s="length",l;switch(n){case"map":case"set":s="size",l=r.size;break;default:new _(r,i,o,!0).to.have.property("length"),l=r.length}this.assert(l==t,"expected #{this} to have a "+s+" of #{exp} but got #{act}","expected #{this} to not have a "+s+" of #{act}",t,l)}F(hb,"assertLength");_.addChainableMethod("length",hb,mb);_.addChainableMethod("lengthOf",hb,mb);function gb(t,e){e&&M(this,"message",e);var r=M(this,"object");this.assert(t.exec(r),"expected #{this} to match "+t,"expected #{this} not to match "+t)}F(gb,"assertMatch");_.addMethod("match",gb);_.addMethod("matches",gb);_.addMethod("string",function(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"message"),i=M(this,"ssfi");new _(r,n,i,!0).is.a("string"),this.assert(~r.indexOf(t),"expected #{this} to contain "+Ce(t),"expected #{this} to not contain "+Ce(t))});function yb(t){var e=M(this,"object"),r=Qe(e),n=Qe(t),i=M(this,"ssfi"),o=M(this,"deep"),s,l="",u,f=!0,d=M(this,"message");d=d?d+": ":"";var h=d+"when testing keys against an object or an array you must give a single Array|Object|String argument or multiple String arguments";if(r==="Map"||r==="Set")l=o?"deeply ":"",u=[],e.forEach(function(U,Z){u.push(Z)}),n!=="Array"&&(t=Array.prototype.slice.call(arguments));else{switch(u=ib(e),n){case"Array":if(arguments.length>1)throw new qe(h,void 0,i);break;case"Object":if(arguments.length>1)throw new qe(h,void 0,i);t=Object.keys(t);break;default:t=Array.prototype.slice.call(arguments)}t=t.map(function(U){return typeof U=="symbol"?U:String(U)})}if(!t.length)throw new qe(d+"keys required",void 0,i);var g=t.length,x=M(this,"any"),v=M(this,"all"),w=t,N=o?M(this,"eql"):(U,Z)=>U===Z;if(!x&&!v&&(v=!0),x&&(f=w.some(function(U){return u.some(function(Z){return N(U,Z)})})),v&&(f=w.every(function(U){return u.some(function(Z){return N(U,Z)})}),M(this,"contains")||(f=f&&t.length==u.length)),g>1){t=t.map(function(U){return Ce(U)});var A=t.pop();v&&(s=t.join(", ")+", and "+A),x&&(s=t.join(", ")+", or "+A)}else s=Ce(t[0]);s=(g>1?"keys ":"key ")+s,s=(M(this,"contains")?"contain ":"have ")+s,this.assert(f,"expected #{this} to "+l+s,"expected #{this} to not "+l+s,w.slice(0).sort(Wg),u.sort(Wg),!0)}F(yb,"assertKeys");_.addMethod("keys",yb);_.addMethod("key",yb);function Xg(t,e,r){r&&M(this,"message",r);var n=M(this,"object"),i=M(this,"ssfi"),o=M(this,"message"),s=M(this,"negate")||!1;new _(n,o,i,!0).is.a("function"),(t instanceof RegExp||typeof t=="string")&&(e=t,t=null);var l;try{n()}catch(A){l=A}var u=t===void 0&&e===void 0,f=!!(t&&e),d=!1,h=!1;if(u||!u&&!s){var g="an error";t instanceof Error?g="#{exp}":t&&(g=$r.getConstructorName(t)),this.assert(l,"expected #{this} to throw "+g,"expected #{this} to not throw an error but #{act} was thrown",t&&t.toString(),l instanceof Error?l.toString():typeof l=="string"?l:l&&$r.getConstructorName(l))}if(t&&l){if(t instanceof Error){var x=$r.compatibleInstance(l,t);x===s&&(f&&s?d=!0:this.assert(s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l&&!s?" but #{act} was thrown":""),t.toString(),l.toString()))}var v=$r.compatibleConstructor(l,t);v===s&&(f&&s?d=!0:this.assert(s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&$r.getConstructorName(t),l instanceof Error?l.toString():l&&$r.getConstructorName(l)))}if(l&&e!==void 0&&e!==null){var w="including";e instanceof RegExp&&(w="matching");var N=$r.compatibleMessage(l,e);N===s&&(f&&s?h=!0:this.assert(s,"expected #{this} to throw error "+w+" #{exp} but got #{act}","expected #{this} to throw error not "+w+" #{exp}",e,$r.getMessage(l)))}d&&h&&this.assert(s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(l?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&$r.getConstructorName(t),l instanceof Error?l.toString():l&&$r.getConstructorName(l)),M(this,"object",l)}F(Xg,"assertThrows");_.addMethod("throw",Xg);_.addMethod("throws",Xg);_.addMethod("Throw",Xg);function xb(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"itself"),i=typeof r=="function"&&!n?r.prototype[t]:r[t];this.assert(typeof i=="function","expected #{this} to respond to "+Ce(t),"expected #{this} to not respond to "+Ce(t))}F(xb,"respondTo");_.addMethod("respondTo",xb);_.addMethod("respondsTo",xb);_.addProperty("itself",function(){M(this,"itself",!0)});function Tb(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=t(r);this.assert(n,"expected #{this} to satisfy "+ma(t),"expected #{this} to not satisfy"+ma(t),!M(this,"negate"),n)}F(Tb,"satisfy");_.addMethod("satisfy",Tb);_.addMethod("satisfies",Tb);function Sb(t,e,r){r&&M(this,"message",r);var n=M(this,"object"),i=M(this,"message"),o=M(this,"ssfi");if(new _(n,i,o,!0).is.a("number"),typeof t!="number"||typeof e!="number"){i=i?i+": ":"";var s=e===void 0?", and a delta is required":"";throw new qe(i+"the arguments to closeTo or approximately must be numbers"+s,void 0,o)}this.assert(Math.abs(n-t)<=e,"expected #{this} to be close to "+t+" +/- "+e,"expected #{this} not to be close to "+t+" +/- "+e)}F(Sb,"closeTo");_.addMethod("closeTo",Sb);_.addMethod("approximately",Sb);function hF(t,e,r,n,i){let o=Array.from(e),s=Array.from(t);if(!n){if(s.length!==o.length)return!1;o=o.slice()}return s.every(function(l,u){if(i)return r?r(l,o[u]):l===o[u];if(!r){var f=o.indexOf(l);return f===-1?!1:(n||o.splice(f,1),!0)}return o.some(function(d,h){return r(l,d)?(n||o.splice(h,1),!0):!1})})}F(hF,"isSubsetOf");_.addMethod("members",function(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"message"),i=M(this,"ssfi");new _(r,n,i,!0).to.be.iterable,new _(t,n,i,!0).to.be.iterable;var o=M(this,"contains"),s=M(this,"ordered"),l,u,f;o?(l=s?"an ordered superset":"a superset",u="expected #{this} to be "+l+" of #{exp}",f="expected #{this} to not be "+l+" of #{exp}"):(l=s?"ordered members":"members",u="expected #{this} to have the same "+l+" as #{exp}",f="expected #{this} to not have the same "+l+" as #{exp}");var d=M(this,"deep")?M(this,"eql"):void 0;this.assert(hF(t,r,d,o,s),u,f,t,r,!0)});_.addProperty("iterable",function(t){t&&M(this,"message",t);var e=M(this,"object");this.assert(e!=null&&e[Symbol.iterator],"expected #{this} to be an iterable","expected #{this} to not be an iterable",e)});function gF(t,e){e&&M(this,"message",e);var r=M(this,"object"),n=M(this,"message"),i=M(this,"ssfi"),o=M(this,"contains"),s=M(this,"deep"),l=M(this,"eql");new _(t,n,i,!0).to.be.an("array"),o?this.assert(t.some(function(u){return r.indexOf(u)>-1}),"expected #{this} to contain one of #{exp}","expected #{this} to not contain one of #{exp}",t,r):s?this.assert(t.some(function(u){return l(r,u)}),"expected #{this} to deeply equal one of #{exp}","expected #{this} to deeply equal one of #{exp}",t,r):this.assert(t.indexOf(r)>-1,"expected #{this} to be one of #{exp}","expected #{this} to not be one of #{exp}",t,r)}F(gF,"oneOf");_.addMethod("oneOf",gF);function vb(t,e,r){r&&M(this,"message",r);var n=M(this,"object"),i=M(this,"message"),o=M(this,"ssfi");new _(n,i,o,!0).is.a("function");var s;e?(new _(t,i,o,!0).to.have.property(e),s=t[e]):(new _(t,i,o,!0).is.a("function"),s=t()),n();var l=e==null?t():t[e],u=e==null?s:"."+e;M(this,"deltaMsgObj",u),M(this,"initialDeltaValue",s),M(this,"finalDeltaValue",l),M(this,"deltaBehavior","change"),M(this,"realDelta",l!==s),this.assert(s!==l,"expected "+u+" to change","expected "+u+" to not change")}F(vb,"assertChanges");_.addMethod("change",vb);_.addMethod("changes",vb);function bb(t,e,r){r&&M(this,"message",r);var n=M(this,"object"),i=M(this,"message"),o=M(this,"ssfi");new _(n,i,o,!0).is.a("function");var s;e?(new _(t,i,o,!0).to.have.property(e),s=t[e]):(new _(t,i,o,!0).is.a("function"),s=t()),new _(s,i,o,!0).is.a("number"),n();var l=e==null?t():t[e],u=e==null?s:"."+e;M(this,"deltaMsgObj",u),M(this,"initialDeltaValue",s),M(this,"finalDeltaValue",l),M(this,"deltaBehavior","increase"),M(this,"realDelta",l-s),this.assert(l-s>0,"expected "+u+" to increase","expected "+u+" to not increase")}F(bb,"assertIncreases");_.addMethod("increase",bb);_.addMethod("increases",bb);function wb(t,e,r){r&&M(this,"message",r);var n=M(this,"object"),i=M(this,"message"),o=M(this,"ssfi");new _(n,i,o,!0).is.a("function");var s;e?(new _(t,i,o,!0).to.have.property(e),s=t[e]):(new _(t,i,o,!0).is.a("function"),s=t()),new _(s,i,o,!0).is.a("number"),n();var l=e==null?t():t[e],u=e==null?s:"."+e;M(this,"deltaMsgObj",u),M(this,"initialDeltaValue",s),M(this,"finalDeltaValue",l),M(this,"deltaBehavior","decrease"),M(this,"realDelta",s-l),this.assert(l-s<0,"expected "+u+" to decrease","expected "+u+" to not decrease")}F(wb,"assertDecreases");_.addMethod("decrease",wb);_.addMethod("decreases",wb);function yF(t,e){e&&M(this,"message",e);var r=M(this,"deltaMsgObj"),n=M(this,"initialDeltaValue"),i=M(this,"finalDeltaValue"),o=M(this,"deltaBehavior"),s=M(this,"realDelta"),l;o==="change"?l=Math.abs(i-n)===Math.abs(t):l=s===Math.abs(t),this.assert(l,"expected "+r+" to "+o+" by "+t,"expected "+r+" to not "+o+" by "+t)}F(yF,"assertDelta");_.addMethod("by",yF);_.addProperty("extensible",function(){var t=M(this,"object"),e=t===Object(t)&&Object.isExtensible(t);this.assert(e,"expected #{this} to be extensible","expected #{this} to not be extensible")});_.addProperty("sealed",function(){var t=M(this,"object"),e=t===Object(t)?Object.isSealed(t):!0;this.assert(e,"expected #{this} to be sealed","expected #{this} to not be sealed")});_.addProperty("frozen",function(){var t=M(this,"object"),e=t===Object(t)?Object.isFrozen(t):!0;this.assert(e,"expected #{this} to be frozen","expected #{this} to not be frozen")});_.addProperty("finite",function(t){var e=M(this,"object");this.assert(typeof e=="number"&&isFinite(e),"expected #{this} to be a finite number","expected #{this} to not be a finite number")});function $g(t,e){return new _(t,e)}F($g,"expect");$g.fail=function(t,e,r,n){throw arguments.length<2&&(r=t,t=void 0),r=r||"expect.fail()",new qe(r,{actual:t,expected:e,operator:n},$g.fail)};var xF={};$v(xF,{Should:()=>BZ,should:()=>UZ});function _b(){function t(){return this instanceof String||this instanceof Number||this instanceof Boolean||typeof Symbol=="function"&&this instanceof Symbol||typeof BigInt=="function"&&this instanceof BigInt?new _(this.valueOf(),null,t):new _(this,null,t)}F(t,"shouldGetter");function e(n){Object.defineProperty(this,"should",{value:n,enumerable:!0,configurable:!0,writable:!0})}F(e,"shouldSetter"),Object.defineProperty(Object.prototype,"should",{set:e,get:t,configurable:!0});var r={};return r.fail=function(n,i,o,s){throw arguments.length<2&&(o=n,n=void 0),o=o||"should.fail()",new qe(o,{actual:n,expected:i,operator:s},r.fail)},r.equal=function(n,i,o){new _(n,o).to.equal(i)},r.Throw=function(n,i,o,s){new _(n,s).to.Throw(i,o)},r.exist=function(n,i){new _(n,i).to.exist},r.not={},r.not.equal=function(n,i,o){new _(n,o).to.not.equal(i)},r.not.Throw=function(n,i,o,s){new _(n,s).to.not.Throw(i,o)},r.not.exist=function(n,i){new _(n,i).to.not.exist},r.throw=r.Throw,r.not.throw=r.not.Throw,r}F(_b,"loadShould");var UZ=_b,BZ=_b;function b(t,e){var r=new _(null,null,b,!0);r.assert(t,e,"[ negation message unavailable ]")}F(b,"assert");b.fail=function(t,e,r,n){throw arguments.length<2&&(r=t,t=void 0),r=r||"assert.fail()",new qe(r,{actual:t,expected:e,operator:n},b.fail)};b.isOk=function(t,e){new _(t,e,b.isOk,!0).is.ok};b.isNotOk=function(t,e){new _(t,e,b.isNotOk,!0).is.not.ok};b.equal=function(t,e,r){var n=new _(t,r,b.equal,!0);n.assert(e==_e(n,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",e,t,!0)};b.notEqual=function(t,e,r){var n=new _(t,r,b.notEqual,!0);n.assert(e!=_e(n,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",e,t,!0)};b.strictEqual=function(t,e,r){new _(t,r,b.strictEqual,!0).to.equal(e)};b.notStrictEqual=function(t,e,r){new _(t,r,b.notStrictEqual,!0).to.not.equal(e)};b.deepEqual=b.deepStrictEqual=function(t,e,r){new _(t,r,b.deepEqual,!0).to.eql(e)};b.notDeepEqual=function(t,e,r){new _(t,r,b.notDeepEqual,!0).to.not.eql(e)};b.isAbove=function(t,e,r){new _(t,r,b.isAbove,!0).to.be.above(e)};b.isAtLeast=function(t,e,r){new _(t,r,b.isAtLeast,!0).to.be.least(e)};b.isBelow=function(t,e,r){new _(t,r,b.isBelow,!0).to.be.below(e)};b.isAtMost=function(t,e,r){new _(t,r,b.isAtMost,!0).to.be.most(e)};b.isTrue=function(t,e){new _(t,e,b.isTrue,!0).is.true};b.isNotTrue=function(t,e){new _(t,e,b.isNotTrue,!0).to.not.equal(!0)};b.isFalse=function(t,e){new _(t,e,b.isFalse,!0).is.false};b.isNotFalse=function(t,e){new _(t,e,b.isNotFalse,!0).to.not.equal(!1)};b.isNull=function(t,e){new _(t,e,b.isNull,!0).to.equal(null)};b.isNotNull=function(t,e){new _(t,e,b.isNotNull,!0).to.not.equal(null)};b.isNaN=function(t,e){new _(t,e,b.isNaN,!0).to.be.NaN};b.isNotNaN=function(t,e){new _(t,e,b.isNotNaN,!0).not.to.be.NaN};b.exists=function(t,e){new _(t,e,b.exists,!0).to.exist};b.notExists=function(t,e){new _(t,e,b.notExists,!0).to.not.exist};b.isUndefined=function(t,e){new _(t,e,b.isUndefined,!0).to.equal(void 0)};b.isDefined=function(t,e){new _(t,e,b.isDefined,!0).to.not.equal(void 0)};b.isCallable=function(t,e){new _(t,e,b.isCallable,!0).is.callable};b.isNotCallable=function(t,e){new _(t,e,b.isNotCallable,!0).is.not.callable};b.isObject=function(t,e){new _(t,e,b.isObject,!0).to.be.a("object")};b.isNotObject=function(t,e){new _(t,e,b.isNotObject,!0).to.not.be.a("object")};b.isArray=function(t,e){new _(t,e,b.isArray,!0).to.be.an("array")};b.isNotArray=function(t,e){new _(t,e,b.isNotArray,!0).to.not.be.an("array")};b.isString=function(t,e){new _(t,e,b.isString,!0).to.be.a("string")};b.isNotString=function(t,e){new _(t,e,b.isNotString,!0).to.not.be.a("string")};b.isNumber=function(t,e){new _(t,e,b.isNumber,!0).to.be.a("number")};b.isNotNumber=function(t,e){new _(t,e,b.isNotNumber,!0).to.not.be.a("number")};b.isFinite=function(t,e){new _(t,e,b.isFinite,!0).to.be.finite};b.isBoolean=function(t,e){new _(t,e,b.isBoolean,!0).to.be.a("boolean")};b.isNotBoolean=function(t,e){new _(t,e,b.isNotBoolean,!0).to.not.be.a("boolean")};b.typeOf=function(t,e,r){new _(t,r,b.typeOf,!0).to.be.a(e)};b.notTypeOf=function(t,e,r){new _(t,r,b.notTypeOf,!0).to.not.be.a(e)};b.instanceOf=function(t,e,r){new _(t,r,b.instanceOf,!0).to.be.instanceOf(e)};b.notInstanceOf=function(t,e,r){new _(t,r,b.notInstanceOf,!0).to.not.be.instanceOf(e)};b.include=function(t,e,r){new _(t,r,b.include,!0).include(e)};b.notInclude=function(t,e,r){new _(t,r,b.notInclude,!0).not.include(e)};b.deepInclude=function(t,e,r){new _(t,r,b.deepInclude,!0).deep.include(e)};b.notDeepInclude=function(t,e,r){new _(t,r,b.notDeepInclude,!0).not.deep.include(e)};b.nestedInclude=function(t,e,r){new _(t,r,b.nestedInclude,!0).nested.include(e)};b.notNestedInclude=function(t,e,r){new _(t,r,b.notNestedInclude,!0).not.nested.include(e)};b.deepNestedInclude=function(t,e,r){new _(t,r,b.deepNestedInclude,!0).deep.nested.include(e)};b.notDeepNestedInclude=function(t,e,r){new _(t,r,b.notDeepNestedInclude,!0).not.deep.nested.include(e)};b.ownInclude=function(t,e,r){new _(t,r,b.ownInclude,!0).own.include(e)};b.notOwnInclude=function(t,e,r){new _(t,r,b.notOwnInclude,!0).not.own.include(e)};b.deepOwnInclude=function(t,e,r){new _(t,r,b.deepOwnInclude,!0).deep.own.include(e)};b.notDeepOwnInclude=function(t,e,r){new _(t,r,b.notDeepOwnInclude,!0).not.deep.own.include(e)};b.match=function(t,e,r){new _(t,r,b.match,!0).to.match(e)};b.notMatch=function(t,e,r){new _(t,r,b.notMatch,!0).to.not.match(e)};b.property=function(t,e,r){new _(t,r,b.property,!0).to.have.property(e)};b.notProperty=function(t,e,r){new _(t,r,b.notProperty,!0).to.not.have.property(e)};b.propertyVal=function(t,e,r,n){new _(t,n,b.propertyVal,!0).to.have.property(e,r)};b.notPropertyVal=function(t,e,r,n){new _(t,n,b.notPropertyVal,!0).to.not.have.property(e,r)};b.deepPropertyVal=function(t,e,r,n){new _(t,n,b.deepPropertyVal,!0).to.have.deep.property(e,r)};b.notDeepPropertyVal=function(t,e,r,n){new _(t,n,b.notDeepPropertyVal,!0).to.not.have.deep.property(e,r)};b.ownProperty=function(t,e,r){new _(t,r,b.ownProperty,!0).to.have.own.property(e)};b.notOwnProperty=function(t,e,r){new _(t,r,b.notOwnProperty,!0).to.not.have.own.property(e)};b.ownPropertyVal=function(t,e,r,n){new _(t,n,b.ownPropertyVal,!0).to.have.own.property(e,r)};b.notOwnPropertyVal=function(t,e,r,n){new _(t,n,b.notOwnPropertyVal,!0).to.not.have.own.property(e,r)};b.deepOwnPropertyVal=function(t,e,r,n){new _(t,n,b.deepOwnPropertyVal,!0).to.have.deep.own.property(e,r)};b.notDeepOwnPropertyVal=function(t,e,r,n){new _(t,n,b.notDeepOwnPropertyVal,!0).to.not.have.deep.own.property(e,r)};b.nestedProperty=function(t,e,r){new _(t,r,b.nestedProperty,!0).to.have.nested.property(e)};b.notNestedProperty=function(t,e,r){new _(t,r,b.notNestedProperty,!0).to.not.have.nested.property(e)};b.nestedPropertyVal=function(t,e,r,n){new _(t,n,b.nestedPropertyVal,!0).to.have.nested.property(e,r)};b.notNestedPropertyVal=function(t,e,r,n){new _(t,n,b.notNestedPropertyVal,!0).to.not.have.nested.property(e,r)};b.deepNestedPropertyVal=function(t,e,r,n){new _(t,n,b.deepNestedPropertyVal,!0).to.have.deep.nested.property(e,r)};b.notDeepNestedPropertyVal=function(t,e,r,n){new _(t,n,b.notDeepNestedPropertyVal,!0).to.not.have.deep.nested.property(e,r)};b.lengthOf=function(t,e,r){new _(t,r,b.lengthOf,!0).to.have.lengthOf(e)};b.hasAnyKeys=function(t,e,r){new _(t,r,b.hasAnyKeys,!0).to.have.any.keys(e)};b.hasAllKeys=function(t,e,r){new _(t,r,b.hasAllKeys,!0).to.have.all.keys(e)};b.containsAllKeys=function(t,e,r){new _(t,r,b.containsAllKeys,!0).to.contain.all.keys(e)};b.doesNotHaveAnyKeys=function(t,e,r){new _(t,r,b.doesNotHaveAnyKeys,!0).to.not.have.any.keys(e)};b.doesNotHaveAllKeys=function(t,e,r){new _(t,r,b.doesNotHaveAllKeys,!0).to.not.have.all.keys(e)};b.hasAnyDeepKeys=function(t,e,r){new _(t,r,b.hasAnyDeepKeys,!0).to.have.any.deep.keys(e)};b.hasAllDeepKeys=function(t,e,r){new _(t,r,b.hasAllDeepKeys,!0).to.have.all.deep.keys(e)};b.containsAllDeepKeys=function(t,e,r){new _(t,r,b.containsAllDeepKeys,!0).to.contain.all.deep.keys(e)};b.doesNotHaveAnyDeepKeys=function(t,e,r){new _(t,r,b.doesNotHaveAnyDeepKeys,!0).to.not.have.any.deep.keys(e)};b.doesNotHaveAllDeepKeys=function(t,e,r){new _(t,r,b.doesNotHaveAllDeepKeys,!0).to.not.have.all.deep.keys(e)};b.throws=function(t,e,r,n){(typeof e=="string"||e instanceof RegExp)&&(r=e,e=null);var i=new _(t,n,b.throws,!0).to.throw(e,r);return _e(i,"object")};b.doesNotThrow=function(t,e,r,n){(typeof e=="string"||e instanceof RegExp)&&(r=e,e=null),new _(t,n,b.doesNotThrow,!0).to.not.throw(e,r)};b.operator=function(t,e,r,n){var i;switch(e){case"==":i=t==r;break;case"===":i=t===r;break;case">":i=t>r;break;case">=":i=t>=r;break;case"<":i=t<r;break;case"<=":i=t<=r;break;case"!=":i=t!=r;break;case"!==":i=t!==r;break;default:throw n=n&&n+": ",new qe(n+'Invalid operator "'+e+'"',void 0,b.operator)}var o=new _(i,n,b.operator,!0);o.assert(_e(o,"object")===!0,"expected "+Ce(t)+" to be "+e+" "+Ce(r),"expected "+Ce(t)+" to not be "+e+" "+Ce(r))};b.closeTo=function(t,e,r,n){new _(t,n,b.closeTo,!0).to.be.closeTo(e,r)};b.approximately=function(t,e,r,n){new _(t,n,b.approximately,!0).to.be.approximately(e,r)};b.sameMembers=function(t,e,r){new _(t,r,b.sameMembers,!0).to.have.same.members(e)};b.notSameMembers=function(t,e,r){new _(t,r,b.notSameMembers,!0).to.not.have.same.members(e)};b.sameDeepMembers=function(t,e,r){new _(t,r,b.sameDeepMembers,!0).to.have.same.deep.members(e)};b.notSameDeepMembers=function(t,e,r){new _(t,r,b.notSameDeepMembers,!0).to.not.have.same.deep.members(e)};b.sameOrderedMembers=function(t,e,r){new _(t,r,b.sameOrderedMembers,!0).to.have.same.ordered.members(e)};b.notSameOrderedMembers=function(t,e,r){new _(t,r,b.notSameOrderedMembers,!0).to.not.have.same.ordered.members(e)};b.sameDeepOrderedMembers=function(t,e,r){new _(t,r,b.sameDeepOrderedMembers,!0).to.have.same.deep.ordered.members(e)};b.notSameDeepOrderedMembers=function(t,e,r){new _(t,r,b.notSameDeepOrderedMembers,!0).to.not.have.same.deep.ordered.members(e)};b.includeMembers=function(t,e,r){new _(t,r,b.includeMembers,!0).to.include.members(e)};b.notIncludeMembers=function(t,e,r){new _(t,r,b.notIncludeMembers,!0).to.not.include.members(e)};b.includeDeepMembers=function(t,e,r){new _(t,r,b.includeDeepMembers,!0).to.include.deep.members(e)};b.notIncludeDeepMembers=function(t,e,r){new _(t,r,b.notIncludeDeepMembers,!0).to.not.include.deep.members(e)};b.includeOrderedMembers=function(t,e,r){new _(t,r,b.includeOrderedMembers,!0).to.include.ordered.members(e)};b.notIncludeOrderedMembers=function(t,e,r){new _(t,r,b.notIncludeOrderedMembers,!0).to.not.include.ordered.members(e)};b.includeDeepOrderedMembers=function(t,e,r){new _(t,r,b.includeDeepOrderedMembers,!0).to.include.deep.ordered.members(e)};b.notIncludeDeepOrderedMembers=function(t,e,r){new _(t,r,b.notIncludeDeepOrderedMembers,!0).to.not.include.deep.ordered.members(e)};b.oneOf=function(t,e,r){new _(t,r,b.oneOf,!0).to.be.oneOf(e)};b.isIterable=function(t,e){if(t==null||!t[Symbol.iterator])throw e=e?`${e} expected ${Ce(t)} to be an iterable`:`expected ${Ce(t)} to be an iterable`,new qe(e,void 0,b.isIterable)};b.changes=function(t,e,r,n){arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,b.changes,!0).to.change(e,r)};b.changesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,b.changesBy,!0).to.change(e,r).by(n)};b.doesNotChange=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,b.doesNotChange,!0).to.not.change(e,r)};b.changesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,b.changesButNotBy,!0).to.change(e,r).but.not.by(n)};b.increases=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,b.increases,!0).to.increase(e,r)};b.increasesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,b.increasesBy,!0).to.increase(e,r).by(n)};b.doesNotIncrease=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,b.doesNotIncrease,!0).to.not.increase(e,r)};b.increasesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,b.increasesButNotBy,!0).to.increase(e,r).but.not.by(n)};b.decreases=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,b.decreases,!0).to.decrease(e,r)};b.decreasesBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,b.decreasesBy,!0).to.decrease(e,r).by(n)};b.doesNotDecrease=function(t,e,r,n){return arguments.length===3&&typeof e=="function"&&(n=r,r=null),new _(t,n,b.doesNotDecrease,!0).to.not.decrease(e,r)};b.doesNotDecreaseBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);return new _(t,i,b.doesNotDecreaseBy,!0).to.not.decrease(e,r).by(n)};b.decreasesButNotBy=function(t,e,r,n,i){if(arguments.length===4&&typeof e=="function"){var o=n;n=r,i=o}else arguments.length===3&&(n=r,r=null);new _(t,i,b.decreasesButNotBy,!0).to.decrease(e,r).but.not.by(n)};b.ifError=function(t){if(t)throw t};b.isExtensible=function(t,e){new _(t,e,b.isExtensible,!0).to.be.extensible};b.isNotExtensible=function(t,e){new _(t,e,b.isNotExtensible,!0).to.not.be.extensible};b.isSealed=function(t,e){new _(t,e,b.isSealed,!0).to.be.sealed};b.isNotSealed=function(t,e){new _(t,e,b.isNotSealed,!0).to.not.be.sealed};b.isFrozen=function(t,e){new _(t,e,b.isFrozen,!0).to.be.frozen};b.isNotFrozen=function(t,e){new _(t,e,b.isNotFrozen,!0).to.not.be.frozen};b.isEmpty=function(t,e){new _(t,e,b.isEmpty,!0).to.be.empty};b.isNotEmpty=function(t,e){new _(t,e,b.isNotEmpty,!0).to.not.be.empty};F(function t(e,r){return b[r]=b[e],t},"alias")("isOk","ok")("isNotOk","notOk")("throws","throw")("throws","Throw")("isExtensible","extensible")("isNotExtensible","notExtensible")("isSealed","sealed")("isNotSealed","notSealed")("isFrozen","frozen")("isNotFrozen","notFrozen")("isEmpty","empty")("isNotEmpty","notEmpty")("isCallable","isFunction")("isNotCallable","isNotFunction");var A1=[];function VZ(t){let e={AssertionError:qe,util:Lg,config:_r,expect:$g,assert:b,Assertion:_,...xF};return~A1.indexOf(t)||(t(e,Lg),A1.push(t)),e}F(VZ,"use");var _u=class{constructor(e,r,n){this._lineNumber=e,this._text=r,this._isLastLine=n}get lineNumber(){return this._lineNumber}get text(){return this._text}get range(){return new H(this._lineNumber,0,this._lineNumber,this._text.length)}get rangeIncludingLineBreak(){return this._isLastLine?this.range:new H(this._lineNumber,0,this._lineNumber+1,0)}get firstNonWhitespaceCharacterIndex(){return/^(\s*)/.exec(this._text)[1].length}get lastNonWhitespaceCharacterIndex(){return this.text.trimEnd().length}get isEmptyOrWhitespace(){return this.firstNonWhitespaceCharacterIndex===this._text.length}};var TF=dr(require("node:path"),1),Jg=class{get uri(){return this._uri}get filename(){return TF.default.basename(this._uri.path)}get languageId(){return this._languageId}get version(){return this._version}get lineCount(){return this._lineCount}get range(){let{end:e}=this.lineAt(this.lineCount-1).range;return new H(0,0,e.line,e.character)}get eol(){return this._eol===`
`?"LF":"CRLF"}constructor(e,r,n,i,o){this._uri=e,this._languageId=r,this._version=n,this._eol=i,this._lines=o,this._lineCount=o.length,this._lineStarts=null,this._cachedTextValue=null}update(e){this._lines=e,this._lineCount=e.length,this._lineStarts=null,this._cachedTextValue=null}lineAt(e){let r;if(e instanceof se?r=e.line:typeof e=="number"&&(r=e),typeof r!="number"||r<0||Math.floor(r)!==r)throw new Error("Illegal value for `line`");return r=Math.min(r,this._lines.length-1),new _u(r,this._lines[r],r===this._lines.length-1)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.line-1)+e.character}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();let r=this._lineStarts.getIndexOf(e),n=this._lines[r.index].length;return new se(r.index,Math.min(r.remainder,n))}getText(e){if(e===void 0)return this._cachedTextValue==null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue;if(e=this._validateRange(e),e.isEmpty)return"";if(e.isSingleLine)return this._lines[e.start.line].substring(e.start.character,e.end.character);let r=this._eol,n=e.start.line,i=e.end.line,o=[];o.push(this._lines[n].substring(e.start.character));for(let s=n+1;s<i;s++)o.push(this._lines[s]);return o.push(this._lines[i].substring(0,e.end.character)),o.join(r)}_validateRange(e){if(!(e instanceof H))throw new Error("Invalid argument");let r=this._validatePosition(e.start),n=this._validatePosition(e.end);return r===e.start&&n===e.end?e:new H(r.line,r.character,n.line,n.character)}_validatePosition(e){if(!(e instanceof se))throw new Error("Invalid argument");if(this._lines.length===0)return e.with(0,0);let{line:r,character:n}=e,i=!1;if(r<0)r=0,n=0,i=!0;else if(r>=this._lines.length)r=this._lines.length-1,n=this._lines[r].length,i=!0;else{let o=this._lines[r].length;n<0?(n=0,i=!0):n>o&&(n=o,i=!0)}return i?new se(r,n):e}_ensureLineStarts(){if(!this._lineStarts){let e=this._eol.length,r=this._lines.length,n=new Uint32Array(r);for(let i=0;i<r;i++)n[i]=this._lines[i].length+e;this._lineStarts=new Eb(n)}}};function $Z(t){if(t<0)return 0;let e=4294967295;return t>e?e:t|0}var Eb=class{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}getCount(){return this.values.length}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=$Z(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let r=this.prefixSumValidIndex[0]+1;r===0&&(this.prefixSum[0]=this.values[0],r++),e>=this.values.length&&(e=this.values.length-1);for(let n=r;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let r=0,n=this.values.length-1,i=0,o=0,s=0;for(;r<=n;)if(i=r+(n-r)/2|0,o=this.prefixSum[i],s=o-this.values[i],e<s)n=i-1;else if(e>=o)r=i+1;else break;return new Rb(i,e-s)}},Rb=class{constructor(e,r){this.index=e;this.remainder=r;this._prefixSumIndexOfResultBrand=void 0;this.index=e,this.remainder=r}};var ey=class{constructor(e){this.client=e;this.cursorlessVersion="0.0.0";this.workspaceFolders=void 0;this.disposables=[];this.quickPickReturnValue=void 0;this.onDidCloseTextDocument=Eu;this.onDidChangeActiveTextEditor=Eu;this.onDidChangeVisibleTextEditors=Eu;this.onDidChangeTextEditorSelection=Eu;this.onDidChangeTextEditorVisibleRanges=Eu;this.configuration=new Yl,this.globalState=new Xl,this.messages=new Jl,this.clipboard=new Ql(this.client),this.capabilities=new hg,this.editorMap=new Map,this.documentMap=new Map,this.activeWindow=void 0,this.activeBuffer=void 0}async init(){let e=await oI(this.client);this.assetsRoot_=kb.default.join(e,"assets"),this.cursorlessNeovimPath=kb.default.join(e,"node","cursorless-neovim")}async showQuickPick(e,r){throw Error("showQuickPick Not implemented")}async setHighlightRanges(e,r,n){throw Error("setHighlightRanges Not implemented")}async flashRanges(e){console.debug("flashRanges Not implemented")}get assetsRoot(){if(this.assetsRoot_==null)throw Error("Field `assetsRoot` has not yet been mocked");return this.assetsRoot_}get runMode(){return v1()}get activeTextEditor(){return this.getActiveTextEditor()}get activeEditableTextEditor(){return this.getActiveTextEditor()}getActiveTextEditor(){let e=this.activeWindow?this.getTextEditor(this.activeWindow):void 0;return e===void 0&&console.debug("getActiveTextEditor: editor is undefined"),e}getTextEditor(e){for(let[r,n]of this.editorMap)if(r.id===e.id)return n}getTextDocument(e){for(let[r,n]of this.documentMap)if(r.id===e.id)return n}get visibleTextEditors(){return Array.from(this.editorMap.values())}getEditableTextEditor(e){return e}async findInDocument(e,r){throw Error("findInDocument Not implemented")}async findInWorkspace(e){throw Error("findInWorkspace Not implemented")}async openTextDocument(e){throw Error("openTextDocument Not implemented")}async openUntitledTextDocument(e){throw Error("openUntitledTextDocument Not implemented")}async showInputBox(e){throw Error("TextDocumentChangeEvent Not implemented")}async executeCommand(e,...r){throw new Error("executeCommand Method not implemented.")}onDidChangeTextDocument(e){return hI(e)}onDidOpenTextDocument(e,r,n){return gI(e,r,n)}async updateTextEditor(e=!1){let r=await this.client.window,n=await r.buffer,i=await n.lines,o=i;i.length>=30&&(o=i.slice(0,15).concat(["..."]).concat(i.slice(-15))),console.debug(`updateTextEditor(): window:${r.id}, buffer:${n.id}, lines=${JSON.stringify(o)}`);let s,l;e?(s=[],l=[]):(s=await dg(r,this.client),l=await iI(r,this.client,i));let u=this.toNeovimEditor(r,n,i,l,s);return Vr().emitEvent("onDidOpenTextDocument",u.document),u}toNeovimEditor(e,r,n,i,o){let s=this.getTextDocument(r),l=this.getTextEditor(e);return s?(console.debug(`toNeovimEditor(): updating document: buffer=${r.id}`),s.update(n)):(console.debug(`toNeovimEditor(): creating new document: buffer=${r.id}`),s=new Jg(vI.parse(`neovim://${r.id}`),"plaintext",1,`
`,n),this.documentMap.set(r,s)),l?(console.debug(`toNeovimEditor(): updating editor: window=${e.id}`),l.updateDocument(i,o,s)):(console.debug(`toNeovimEditor(): creating new editor: window=${e.id}`),l=new yg(hM(),this.client,this,e,s,i,o),this.editorMap.set(e,l)),this.activeBuffer=r,this.activeWindow=e,this.activeTextEditor}handleCommandError(e){uI(this.client,e.message)}disposeOnExit(...e){return this.disposables.push(...e),()=>(0,SF.pull)(this.disposables,...e)}};function Eu(){return{dispose(){}}}var ty=class{constructor(e){this.client=e;this.signals={prePhrase:{getVersion:async()=>null}}}async getFocusedElementType(){let e=await this.client.mode;return e.mode==="t"||e.mode==="nt"?"terminal":"textEditor"}};var qZ=BigInt(1e9);function vF(t,e=BigInt(1e6)){return Number(t*e/qZ)/Number(e)}async function ry(t,e=[],r=[],n,i,o,s,l){let u={documentContents:n.document.getText(),selections:n.selections.map(BR)};o!=null&&(u.marks=o),l!=null&&(u.metadata=l),e.includes("clipboard")||(u.clipboard=await i.clipboard.readText()),e.includes("visibleRanges")||(u.visibleRanges=n.visibleRanges.map($c));for(let f of rs){let d=t?.get(f),h=`${f}Mark`;d!=null&&!e.includes(h)&&(u[h]=d.map(g=>g.toPlainObject()))}if(r.includes("timeOffsetSeconds")){let f=s?.startTimestamp;if(f==null)throw new Error("No start timestamp provided but time offset was requested");let d=process.hrtime.bigint()-f;u.timeOffsetSeconds=vF(d)}return u}var zZ=dr(pl(),1);function bF(t,e,r,n,i,o,s,l){return{commandServerApi:t,ide:i,neovimIDE:n,injectIde:s,scopeProvider:o,takeSnapshot(u,f,d,h,g){return ry(e,u,f,d,h,g,void 0,void 0)},setStoredTarget(u,f,d){e.set(f,d?.map(h=>eI(u,h)))},hatTokenMap:r,runIntegrationTests:l}}async function wF(t,e,r,n){let i={[_x]:async(...o)=>{(await t.mode).mode==="t"&&cI(t);try{await e.updateTextEditor();let l=await r.runCommandSafe(...o),u=Tf(o);if(await n.getFocusedElementType()==="terminal"&&Vo(u)){let d=l;"fallback"in d&&d.fallback.action==="insert"&&lI(t)}return l}catch(l){if(e.runMode!=="test"){let u=l;console.error(u.stack),e.handleCommandError(u)}throw l}},"cursorless.repeatPreviousCommand":De,"cursorless.showCheatsheet":De,"cursorless.internal.updateCheatsheetDefaults":De,"cursorless.recordTestCase":De,"cursorless.recordOneTestCaseThenPause":De,"cursorless.pauseRecording":De,"cursorless.resumeRecording":De,"cursorless.takeSnapshot":De,"cursorless.recordScopeTests.showUnimplementedFacets":De,"cursorless.recordScopeTests.saveActiveDocument":De,"cursorless.showQuickPick":De,"cursorless.showDocumentation":De,"cursorless.private.logQuickActions":De,"cursorless.toggleDecorations":De,"cursorless.recomputeDecorationStyles":De,"cursorless.showScopeVisualizer":De,"cursorless.hideScopeVisualizer":De,"cursorless.analyzeCommandHistory":De,"cursorless.keyboard.escape":De,"cursorless.keyboard.targeted.targetHat":De,"cursorless.keyboard.targeted.targetScope":De,"cursorless.keyboard.targeted.targetSelection":De,"cursorless.keyboard.targeted.clearTarget":De,"cursorless.keyboard.targeted.runActionOnTarget":De,"cursorless.keyboard.modal.modeOn":De,"cursorless.keyboard.modal.modeOff":De,"cursorless.keyboard.modal.modeToggle":De,"cursorless.keyboard.undoTarget":De,"cursorless.keyboard.redoTarget":De,"cursorless.tutorial.start":De,"cursorless.tutorial.next":De,"cursorless.tutorial.previous":De,"cursorless.tutorial.restart":De,"cursorless.tutorial.resume":De,"cursorless.tutorial.list":De,"cursorless.documentationOpened":De};Object.entries(i).map(([o,s])=>Vr().registerCommand(o,s))}async function De(...t){console.debug(`dummyCommandHandler(): args=${t}`)}async function _F(t){let e=t.nvim,r=new ey(e);await r.init();let n=r.runMode==="production"?r:new cf(r,new of,r.runMode==="test",void 0),i=new Sp,o=new ty(e),s=r.runMode==="test"?i:o,{commandApi:l,storedTargets:u,hatTokenMap:f,scopeProvider:d,injectIde:h,runIntegrationTests:g}=await JD({ide:n,commandServerApi:s});await wF(e,r,l,s);let x={testHelpers:r.runMode==="test"?bF(i,u,f,r,n,d,h,g):void 0};Vr().registerExtensionApi(rI,x),console.log("activate(): Cursorless extension loaded")}function EF(t){t.setOptions({dev:!1}),t.registerFunction("CursorlessLoadExtension",async()=>await GZ(t),{sync:!1})}async function GZ(t){console.log("==============================================================================================="),console.log("loadExtension(cursorless-neovim): start"),await _F(t),console.log("loadExtension(cursorless-neovim): done")}
/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)

itertools/dist/index.js:
  (* istanbul ignore else -- @preserve *)
  (* istanbul ignore if -- @preserve *)

chai/chai.js:
  (*!
   * Chai - flag utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - test utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - expectTypes utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getActual utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - message composition utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - transferFlags utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * http://chaijs.com
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - isProxyEnabled helper
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addLengthGuard utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getProperties utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - proxify utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addChainingMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteChainableMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - compareByInspect utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getOwnEnumerablePropertySymbols utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getOwnEnumerableProperties utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - isNaN utility
   * Copyright(c) 2012-2015 Sakthipriyan Vairamani <thechargingvolcano@gmail.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*! Bundled license information:
  
  deep-eql/index.js:
    (*!
     * deep-eql
     * Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>
     * MIT Licensed
     *)
    (*!
     * Check to see if the MemoizeMap has recorded a result of the two operands
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {MemoizeMap} memoizeMap
     * @returns {Boolean|null} result
    *)
    (*!
     * Set the result of the equality into the MemoizeMap
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {MemoizeMap} memoizeMap
     * @param {Boolean} result
    *)
    (*!
     * Primary Export
     *)
    (*!
     * The main logic of the `deepEqual` function.
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Object} [options] (optional) Additional options
     * @param {Array} [options.comparator] (optional) Override default algorithm, determining custom equality.
     * @param {Array} [options.memoize] (optional) Provide a custom memoization object which will cache the results of
        complex objects for a speed boost. By passing `false` you can disable memoization, but this will cause circular
        references to blow the stack.
     * @return {Boolean} equal match
    *)
    (*!
     * Compare two Regular Expressions for equality.
     *
     * @param {RegExp} leftHandOperand
     * @param {RegExp} rightHandOperand
     * @return {Boolean} result
     *)
    (*!
     * Compare two Sets/Maps for equality. Faster than other equality functions.
     *
     * @param {Set} leftHandOperand
     * @param {Set} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Simple equality for flat iterable objects such as Arrays, TypedArrays or Node.js buffers.
     *
     * @param {Iterable} leftHandOperand
     * @param {Iterable} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Simple equality for generator objects such as those returned by generator functions.
     *
     * @param {Iterable} leftHandOperand
     * @param {Iterable} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Determine if the given object has an @@iterator function.
     *
     * @param {Object} target
     * @return {Boolean} `true` if the object has an @@iterator function.
     *)
    (*!
     * Gets all iterator entries from the given Object. If the Object has no @@iterator function, returns an empty array.
     * This will consume the iterator - which could have side effects depending on the @@iterator implementation.
     *
     * @param {Object} target
     * @returns {Array} an array of entries from the @@iterator function
     *)
    (*!
     * Gets all entries from a Generator. This will consume the generator - which could have side effects.
     *
     * @param {Generator} target
     * @returns {Array} an array of entries from the Generator.
     *)
    (*!
     * Gets all own and inherited enumerable keys from a target.
     *
     * @param {Object} target
     * @returns {Array} an array of own and inherited enumerable keys from the target.
     *)
    (*!
     * Determines if two objects have matching values, given a set of keys. Defers to deepEqual for the equality check of
     * each key. If any value of the given key is not equal, the function will return false (early).
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Array} keys An array of keys to compare the values of leftHandOperand and rightHandOperand against
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Recursively check the equality of two Objects. Once basic sameness has been established it will defer to `deepEqual`
     * for each enumerable key in the object.
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Returns true if the argument is a primitive.
     *
     * This intentionally returns true for all objects that can be compared by reference,
     * including functions and symbols.
     *
     * @param {Mixed} value
     * @return {Boolean} result
     *)
  *)
*/
